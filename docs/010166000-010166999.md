# StackOverflow 问答 10166000-10166999

# c# - MonoTouch：通用项目的本地化

> ID：10166001
> 
> 赞同：1
> 
> 时间：2012-04-15T20:54:24.243
> 
> 标签：c#, ios, localization, xamarin.ios, monodevelop

我创建了一个 Common Library MonoTouch 项目并在那里添加了本地化文件。但是，它们不会出现在 .app 文件中。

我怎样才能拥有一个具有本地化资源的公共项目，以便我可以在许多 MonoTouch 应用程序中共享它们？

作为一个方面：我可以将图像添加到一个公共项目并访问它们，所以我假设它可以与本地化文件一起使用。当本地化文件位于主应用程序项目中时，本地化工作正常。

![包含本地化文件的项目](../Images/b24e32b14c6c2bab9d5ce2965fc5d00c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T21:38:42.693

Common.Localization.csproj 至少需要有 1 个类才能编译为 DLL。该类也需要在主应用程序中引用。

只需创建一个 Dummie 类。

```
using System;
using MonoTouch.Foundation;

namespace Common.Localization
{
[Preserve]
public class DummieClassNeededToMakeLocalizationCompileToaDLL
{
    [Preserve]
    public DummieClassNeededToMakeLocalizationCompileToaDLL ()
    {
    }
}
} 
```

# objective-c - Objective-c 合并两个字典数组

> ID：10166002
> 
> 赞同：1
> 
> 时间：2012-04-15T20:54:32.320
> 
> 标签：objective-c, merge, nsarray, nsdictionary, mergesort

我有一个我认为很有趣的问题。我有两个需要合并和排序的数组。每个数组都是字典对象的数组，但每个字典对象的结构不同。因此，一个数组包含元素，每个元素都包含一个列表，例如 12 个键/值。另一个数组的元素包含一个列表，比如 15 个键/值。一些键/值可能相同，但不一定顺序相同，格式也不一定相同（例如，每个数组中日期字段的格式不同）。

我需要做的（最终）是将它们组合起来，并按一个通用键 - 日期字段进行排序。

我不认为数组可以在各个元素之间包含具有不同结构的元素，可以吗？我从未使用过可以做到这一点的语言，尽管我问是因为如果objective-c 可以，我不会感到惊讶。

无论如何，我一直在阅读 Apple 的文档，并且已经提供了很多很棒的排序和合并算法。但是我可以使用一些帮助来决定使用什么方法。

事实是，我只需要大约 5 个字段，所以我觉得我想用我想要的结构创建第三个字典数组，然后将所有项目转移到其中，然后进行排序。但是我从哪里开始呢？

如果有人对此有任何经验，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T20:58:50.420

在**Objective-C**中，您可以拥有一个**NSArray**，其中包含任何类型的对象。仅由**NSArrays**、**NSSets**和**NSDictionaries**组成的结构称为**Collection**。

因此，您可以将它们合并为一个并轻松按日期排序

因此，合并后，您可以像这样对数组进行排序

```
NSSortDescriptor *sortByDateDescriptor = [[NSSortDescriptor alloc] initWithKey:@"date"
                                              ascending:YES];
NSArray *sortDescriptors = [NSArray arrayWithObject:sortByDateDescriptor];
NSArray *sortedArray = [mergedArray sortedArrayUsingDescriptors:sortDescriptors]; 
```

要合并到**NSMutableArray 的**，只需使用`[firstrray addObjectsFromArray: secondArray];`

# java - Eclipse（可能）不编译外部 jar

> ID：10166007
> 
> 赞同：1
> 
> 时间：2012-04-15T20:54:59.247
> 
> 标签：java, android, eclipse, jar, buildpath

突然，我所有依赖于外部 jar 的代码都不起作用。
例如：

```
Jsoup.parse(str) 
```

给出：

```
could not resolve type: org.jsoup.Jsoup 
```

而且我 100% 确定它在构建路径中。
也许它发生是因为我将 ADT 插件和平台工具更新到了最新版本，但这没有任何意义……
但自从我更新了这些，它就开始发生了。
所以显然eclipse没有编译那些罐子。（在代码中，它确实解决了 jars 类型）...
您可能知道问题出在哪里吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T21:16:20.623

您必须将库放在项目的*/libs*文件夹中（如果您使用的是 Eclipse，则选择“添加 JAR ..”而不是“添加外部 JAR ..”）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T21:27:29.193

这与编译无关：jar*已经*编译。

您只需要将 jar 添加到项目类路径中，这样 Eclipse 就会知道使用 .jar 运行 java。您可以使用“上下文/右键单击菜单-> 属性 > Java 构建路径 > 库”（[源代码](http://wiki.eclipse.org/FAQ_How_do_I_add_an_extra_library_to_my_project%27s_classpath%3F)）来执行此操作。为了便于携带，我建议将 .jar 放在项目的子目录中。通常使用项目根目录中的“lib”文件夹（“bin”和“src”也在其中）。

另请注意，要运行您的程序，您需要将依赖项 .jar 添加到您的 java 命令中，但是通过一些搜索，您可以了解如何将依赖项 .jar 包含在您自己的组合 .jar 中。

# ruby-on-rails-3 - rails 3.1 - 如何修复此查询过滤器？

> ID：10166008
> 
> 赞同：0
> 
> 时间：2012-04-15T20:55:01.807
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1, rails-3.1

我在用

```
 @events = @user.events.where('finishDate >= ?', Time.now) 
```

从特定用户检索事件。在显示它之前，我想按日期过滤，并摆脱旧的。因此，finishDate 列属于事件。但是它给出了错误样式“在 users_events 表中找不到'finishDate'列”（关系表）

如何告诉查询查看事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:38:27.990

For my surprise, the problem was not that the query was filtering in the wrong table. It was the name of the filtering column what was giving the error.

I renamed the table column from

```
finishDate 
```

to

```
finish_date 
```

and worked perfectly!

# c++ - C++, (GLUT) - 在显示循环中维护一个全局布尔向量 - 使程序崩溃

> ID：10166009
> 
> 赞同：0
> 
> 时间：2012-04-15T20:55:04.660
> 
> 标签：c++, opengl, button, vector, crash

在我看来，我遇到了一个棘手的问题。我是 C++ 和 OpenGL/glut 的新手，所以要温柔！我正在编写一个独立于平台的简单程序（只有 2D）并且需要一个基本的 UI，所以我有一个生成 Button 对象的 Button 类。这希望能够从OpenGL/glut的displayFunc()循环内部动态调用（我认为这是正确的词）。

每次循环开始时，它都会实例化正确的按钮对象，然后在最后销毁它们。当然，按钮需要能够做某事，所以在 glutMouseFunc 函数中，它会检查鼠标是否在需要触发按钮的地方单击。

允许通过公共的 get/set 函数访问按钮成员变量 (xMin.. yMax)。然而，由于按钮是由显示循环实例化的，我必须创建一个指向按钮的全局指针向量，该指针在创建时更新，并在显示循环结束时与对象一起清理。我相信这一切都很好。

当我真的想要一个按钮来改变状态时，棘手的事情就来了。我唯一能想到的就是拥有`std::vector<bool> buttonStates;`，它在创建按钮时增加，在单击按钮时更改，并在按钮时销毁。

当然，这种状态的变化并不会延续到下一个显示循环，所以我尝试`std::vector<bool> btnStatesCopy;`了 ，它通过使用 when 更改来维护 buttonStates 向量的副本`btnStatesCopy = buttonStates;`，但在显示循环结束时不会被破坏。创建按钮后，按钮状态现在从 btnStatesCopy 向量复制，自上次循环以来未更改。

不幸的是，这会使我的程序崩溃，即使在尝试打印 btnStatesCopy 向量时也是如此。所以我想知道你是否知道它为什么会崩溃，以及我可以做些什么来避免它！我可以发布代码，但我不确定它是否会有所帮助。有没有更好、更明显的方法来做这些我没有想到的事情？我很想听听任何想法！非常感谢，帕特里克

编辑：如果有帮助，这是代码的简洁版本（请记住，我对这些东西真的很陌生！）：

```
//*in global scope*
// Stores pointers to the ui buttons.
std::vector<Button*> buttons;
// Stores button states, which are copied from buttonStates and
// destroyed every time display() runs.
std::vector<bool> buttonStates;
// Stores a copy of buttonstates which is written to when
// a button is pressed.
std::vector<bool> btnStatesCopy;

// Prototype functions:
void init(void);
void display(void);
void key(unsigned char key, int x, int y);
void processHits(GLint hits, GLuint buffer[]);
void click(int button, int state, int x, int y);
void idle(void);
void resize(int width, int height);
void drawMenu(void);
void circle(float x,float y,float size,int segments);
void initialiseButtons();

// Main loop goes here; calls glutDisplayFunc(display);

void display(void) {
    initialiseButtons();
    drawMenu();
}

bool changeBinaryState(bool state){
    /* Changes 1 to 0 and 0 to 1\. */
    if (state == 0) state = 1;
    else state = 0;
    return state;
}

void click(int button, int state, int x, int y) {
/* Called when a mouse button is clicked. */
    if (button == GLUT_LEFT_BUTTON && state != GLUT_DOWN) {
        std::cout<<x<<", "<<y<<std::endl;
        for(int i = 0; i<buttons.size();i++){
            //put a pointer of a button in variable but
            Button* but = buttons.at(i);
            if (x > but->getMinX() && x < but->getMaxX()) {
                if (y > but->getMinY() && y < but->getMaxY()){
                    but->buttonFunc();
                    changeButtonState(buttonStates.at(i));
                    buttonStates.at(i) = 1;
                    btnStatesCopy = buttonStates;
                }
            }
        }
    }
}

void drawMenu(void) {
    // Create a button and its pointer and add pointer to buttons vector.
    Button* p_b = new InfoButton("User Manual",20,spacing+yOffset);
    buttons.push_back(p_b);
    // Add button state of previous button state.
    buttonStates.push_back(btnStatesCopy.back());

    // Turn on buttons if their state is on.
    for (unsigned i = 0; i<buttonStates.size();i++){
        if (buttonStates[i]==1) {
        Button* but = buttons.at(i);
        but->buttonFunc();
    }
}
void initialiseButtons(){
    for (unsigned i = 0; i < buttons.size();i++)
    {
        delete buttons[i];
    }
    buttons.clear();
    buttonStates.clear();
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-15T21:27:35.507

你的问题的标题是

> Blockquote C++，（GLUT） - 在显示循环中维护指向布尔值的***指针的全局向量 - 使程序崩溃***

（强调补充）。如果我理解正确，那意味着你有

```
std::vector<bool*> buttonStates;
std::vector<bool*> btnStatesCopy; 
```

而不是`std::vector<bool>`。

如果确实如此，并且如果这些指针指向的布尔值在显示循环中被删除，那么它们将在显示循环中被删除。您正在保留指向已释放内存的指针，这是最可能导致崩溃的原因。

另一方面，如果这是 Java（或任何其他垃圾收集语言）而不是 C++，则存储指向对象的指针可以防止它被垃圾收集。

# sql - SQL 性能 - 视图与存储过程

> ID：10166010
> 
> 赞同：-2
> 
> 时间：2012-04-15T20:55:07.800
> 
> 标签：sql, sql-server-2008

我有一个大约需要 15 秒才能加载的语句，这太长了。我想看看将这些数据“缓存”到内存中的最佳方法是什么。我会为此使用某种视图或存储过程吗？我知道我可以使用触发器和另一个表，但我想不惜一切代价避免这种情况，有相当多的内存可用。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T21:07:30.127

您知道为什么您的查询需要 15 秒才能运行吗？查询是否使用正确的索引？正如其他人所提到的，在存储过程中运行相同的查询将产生与执行计划相同的性能。

通过使用 SQL 查询优化器并优化查询中的瓶颈，您可能会获得更好的效果。[这](http://www.simple-talk.com/sql/sql-training/the-sql-server-query-optimizer/)是一篇关于使用 SQL 查询优化器的好文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T21:09:13.000

您可以查看索引视图（在其他 RDBMS 中通常称为物化视图）。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-15T23:09:16.463

这一切都取决于您，请务必检查您的执行平面并尝试支付过多的扫描，您将获得更好的性能。我希望这有帮助

# java - 如何使用 java.nio.channels.FileChannel 将 byte[] 写入文件 - 基础

> ID：10166011
> 
> 赞同：1
> 
> 时间：2012-04-15T20:55:15.703
> 
> 标签：java

我没有使用 Java 频道的经验。我想将字节数组写入文件。目前，我有以下代码：

```
String outFileString = DEFAULT_DECODED_FILE; // Valid file pathname
FileSystem fs = FileSystems.getDefault();
Path fp = fs.getPath(outFileString);

FileChannel outChannel = FileChannel.open(fp, EnumSet.of(StandardOpenOption.CREATE, StandardOpenOption.TRUNCATE_EXISTING, StandardOpenOption.WRITE));

// Please note: result.getRawBytes() returns a byte[]
ByteBuffer buffer = ByteBuffer.allocate(result.getRawBytes().length);
buffer.put(result.getRawBytes());

outChannel.write(buffer); // File successfully created/truncated, but no data 
```

使用此代码，将创建输出文件，如果存在则将其截断。此外，在 IntelliJ 调试器中，我可以看到它`buffer`包含数据。此外，该行`outChannel.write()`已成功调用而不会引发异常。但是，程序退出后，数据不会出现在输出文件中。

有人可以（a）告诉我 FileChannel API 是否是将字节数组写入文件的可接受选择，以及（b）如果是，应该如何修改上述代码以使其工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T20:59:20.747

正如 gulyan 指出的那样，您需要`flip()`在写入字节缓冲区之前对其进行处理。或者，您可以包装原始字节数组：

```
ByteBuffer buffer = ByteBuffer.wrap(result.getRawBytes()); 
```

为保证写入在磁盘上，您需要使用[`force()`](http://docs.oracle.com/javase/6/docs/api/java/nio/channels/FileChannel.html#force%28boolean%29)：

```
outChannel.force(false); 
```

或者你可以关闭频道：

```
outChannel.close(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T21:01:01.320

您应该致电：

```
buffer.flip(); 
```

在写之前。

这为读取做好了准备。另外，你应该打电话

```
buffer.clear(); 
```

在将数据放入其中之前。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T21:02:41.223

回答你的第一个问题

> 告诉我 FileChannel API 是否是将字节数组写入文件的可接受选择

没关系，但有更简单的方法。尝试使用`FileOutputStream`. 通常，这将由`BufferedOutputStream`for performance 包装，但关键是这两个都`OutputStream`具有简单`write(byte[])`方法的扩展。这比通道/缓冲区 API 更容易使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-10T05:49:57.673

这是 FileChannel 的完整示例。

```
 import java.io.File;
    import java.io.FileNotFoundException;
    import java.io.IOException;
    import java.io.RandomAccessFile;
    import java.nio.ByteBuffer;
    import java.nio.channels.FileChannel;
    import java.nio.channels.WritableByteChannel;

    public class FileChannelTest {
        // This is a Filer location where write operation to be done.
        private static final String FILER_LOCATION = "C:\\documents\\test";
        // This is a text message that to be written in filer location file.
        private static final String MESSAGE_WRITE_ON_FILER = "Operation has been committed.";

        public static void main(String[] args) throws FileNotFoundException {
            // Initialized the File and File Channel
            RandomAccessFile randomAccessFileOutputFile = null;
            FileChannel outputFileChannel = null;
            try {
                // Create a random access file with 'rw' permission..
                randomAccessFileOutputFile = new RandomAccessFile(FILER_LOCATION + File.separator + "readme.txt", "rw");
                outputFileChannel = randomAccessFileOutputFile.getChannel();
                //Read line of code one by one and converted it into byte array to write into FileChannel.
                final byte[] bytes = (MESSAGE_WRITE_ON_FILER + System.lineSeparator()).getBytes();
                // Defined a new buffer capacity.
                ByteBuffer buffer = ByteBuffer.allocate(bytes.length);
                // Put byte array into butter array.
                buffer.put(bytes);
                // its flip the buffer and set the position to zero for next write operation.
                buffer.flip();
                /**
                 * Writes a sequence of bytes to this channel from the given buffer.
                 */
                outputFileChannel.write(buffer);
                System.out.println("File Write Operation is done!!");

            } catch (IOException ex) {
                System.out.println("Oops Unable to proceed file write Operation due to ->" + ex.getMessage());
            } finally {
                try {
                    outputFileChannel.close();
                    randomAccessFileOutputFile.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }

            }

        }

    } 
```

# jsf - 在 JSF 中找不到 JSTL 函数

> ID：10166015
> 
> 赞同：6
> 
> 时间：2012-04-15T20:55:55.833
> 
> 标签：jsf, jstl

我正在尝试在用户当前正在查看的页面上添加一个活动类，但我无法使用 JSTL 功能。我究竟做错了什么？

```
xmlns:fn="http://java.sun.com/jstl/functions" 
```

在一个`h:link`

```
styleClass="#{fn:containsIgnoreCase(request.requestURI,'index') ? 'active' : ''}" 
```

导致此错误：

```
styleClass="#{fn:containsIgnoreCase(request.requestURI,'index')}" Function 'fn:containsIgnoreCase' not found 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-15T21:10:56.947

你有错误的导入，它应该是：

```
xmlns:fn="http://java.sun.com/jsp/jstl/functions" 
```

你忘了**/jsp**

# objective-c - 在 Objective-C 中，如果调用 addObjectAtIndex 来构建数组，那么需要调用 initWithCapacity 吗？

> ID：10166016
> 
> 赞同：1
> 
> 时间：2012-04-15T20:55:58.133
> 
> 标签：objective-c

在书中，我看到了代码：

```
words = [[NSMutableArray alloc] initWithCapacity:[masterWordList count]]; 
```

假设`[masterWordList count]`是 15。然后代码通过使用循环 10 次来构建数组：

```
[words addObject:[masterWordList objectAtIndex:randomNum]]; 
```

我想知道为什么`words`必须`initWithCapacity`...和 ​​15 个插槽？不能是 10 还是 11 （如果最后需要一个 nil ......而且，不会`addObject`自动增加数组大小？我尝试使用`init`而不是`initWithCapacity`代码也可以工作。书中的代码也可以简化为just `init`?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T21:00:44.657

`initWithCapacity:`简单地给类初始化器一个关于数组最终大小的“提示”。这样，如果您知道您将需要它，它可以提前分配足够的空间。从理论上讲，使用`initWithCapacity:`可以提供更好的性能，因为它可能意味着当您向其添加对象时，数组不必重新分配内存（内部）（我不知道它在当前实现中是否真的这样做，但这是可能的） . 正如您已经猜到的那样，这只是一个提示，使用`initWithCapacity:`完全是可选的。仅仅因为你已经给出`initWithCapacity:`了一定的大小并不意味着你的数组不能增长到容纳更多的元素。此外，改为调用`init`会正常工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T21:00:27.747

> 我想知道为什么单词必须是 initWithCapacity... 和 15 个插槽？

事实上，`initWithCapacity:`一般[完全没有必要](https://stackoverflow.com/questions/6430086/nsmutablearray-insert-object-at-index/6430257#6430257)。它[可能会或可能不会](https://stackoverflow.com/questions/3948062/nsmutablearray-initwithcapacity-nuances)以有用的方式保留空间。我的理解是，它是一种历史性的附属物。

> 不能是 10 还是 11（如果`nil`最后需要 a...）

可能是 10。正如[您在另一个问题](https://stackoverflow.com/questions/10165794/in-objective-c-why-doesnt-arraywithobjects-add-a-nil-to-the-end-of-list-automa)中提到的，`nil` *它不是数组的一部分*。它只是创建方法调用本身的一个标记值——它不是一个对象，也不会成为集合的成员。

> 另外，不会`addObject:`自动增加数组大小吗？

是的，它会的; 您可以在不指定任何起始大小的情况下创建一个可变数组，它会根据需要增长。

> 那么书中的代码可以简化为`init`吗？

是的。

# css - css在浏览器标签之间显示不一样

> ID：10166024
> 
> 赞同：-1
> 
> 时间：2012-04-15T20:57:14.720
> 
> 标签：css

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T21:00:51.010

该值`underlined`对属性无效`text-decoration`。你正在寻找`underline`.

```
a:link {color: #008000; text-decoration: none;}
a:visited {color: #cccccc; text-decoration: none;}
a:active {color: #ff0000; text-decoration: underline;}
a:hover {color: #606060; text-decoration: underline;} 
```

[**JSFiddle**](http://jsfiddle.net/MMjqt/)

# java - eclipse servlet 调试

> ID：10166029
> 
> 赞同：1
> 
> 时间：2012-04-15T20:57:34.387
> 
> 标签：java, eclipse, servlets

我编写了一个 servlet 来执行一些任务。

```
public void doGet(HttpServletRequest req, HttpServletResponse resp) 
        throws IOException {
         String errmsg = "Could not retrieve workspace: ";        
        try {

            Object url1 = req.getParameter(PARAM_URL1);
            Object url2 = req.getParameter(PARAM_URL2);         
            ProcessBuilder pb = new ProcessBuilder("/opt/local/bin/convert","pic"+url1 +".png","-shave","20x20","pic22.png");
            pb.directory(new File("/user/gaurav_kl"));
            pb.start();
            } 
```

但问题是当我在 Eclipse 中使用断点调试代码时，当我在函数内部中断时，我看不到“req”和“resp”变量。相反，我得到 arg0 和 arg1 作为 2 个变量，它们对应于“req”和“resp”变量。虽然我也可以使用这些来调试，但可能是什么原因？此外，我无法查看“url1”和“url2”变量中的值，我可以在项目的其他 servlet 中看到“req”变量。

# android - Android：用 TextViews 填充图库

> ID：10166031
> 
> 赞同：0
> 
> 时间：2012-04-15T20:57:46.020
> 
> 标签：android

我正在尝试制作一个使用 TextViews 而不是 ImageViews 的画廊，但我似乎无法制作一个工作适配器。如何使用适配器用 TextViews 填充 Gallery？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T21:05:41.367

只需像这样扩展 BaseAdapter ：

```
public class GalleryTextAdapter extends BaseAdapter{

  Context context;

  GalleryTextAdapter(Context context){
    this.context = context;        
  }

  public View getView(int position, View convertView, ViewGroup parent){
    LayoutInflater li = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    convertView = li.inflate(R.layout.mylayout, null);

    TextView tv = (TextView) convertView.findViewById(R.id.mylayout_text);
    tv.setText("some text");
    return convertView;
  } 
```

并使用以下方法将其分配给画廊：

```
Gallery gallery = (Gallery) findViewById(R.id.gallery);
gallery.setAdapter(new GalleryTextAdapter(this)); 
```

# java - 在 Android 上使用 vosao

> ID：10166033
> 
> 赞同：1
> 
> 时间：2012-04-15T20:58:24.677
> 
> 标签：java, android, vosao

我有点麻烦，我需要将 vosao 与 Android 应用程序一起使用，但我不知道如何进行身份验证和使用它，我通过告诉我用户名和密码是否正确，让 JSON-RPC 部分正常工作但是我不知道从这里做什么

Vosao 是 Google App Engine 的 CMS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T08:53:17.137

为了解决这个问题，我使用 JSON 解析来自 Web 服务器的响应，然后使用相同的 HttpClient 我完成了所有其他请求:)

# objective-c - 如何知道某个精灵是否在 cocos2d 中运行任何动作？

> ID：10166036
> 
> 赞同：4
> 
> 时间：2012-04-15T20:58:44.517
> 
> 标签：objective-c, ios, cocos2d-iphone

有什么方法可以知道 cocos2d 中某个精灵是否正在运行任何动作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T22:56:17.110

检查你的精灵的运行动作的数量，例如

```
CCSprite* sprite = [// something here];
int actionsCount = [sprite numberOfRunningActions]; 
```

# ruby - 在 Rails 3.2 上使用 Kaminari 获得无限滚动和 link_to_next_page

> ID：10166040
> 
> 赞同：1
> 
> 时间：2012-04-15T20:59:15.770
> 
> 标签：ruby, ruby-on-rails-3, unobtrusive-javascript, infinite-scroll, kaminari

我在 Rails 3.2 应用程序中通过 Kaminari 无限滚动工作[，](https://github.com/amatsuda/kaminari/wiki/How-To%3a-Create-Infinite-Scrolling-with-jQuery)并想添加一个“更多”按钮。

link_to_next_page 帮助器很棒，但是在这两种方法中共享页码的最佳方法是什么？

现在，除了通过按钮加载第二页数据不会增加我在 javascript 中用于跟踪要加载哪个页面以进行无限滚动的 page 变量之外，一切正常。

在这两种方法中共享状态的最佳方法是什么？

其他相关信息：

*   每个页面都用一堆`li`s 渲染一个部分并将其附加到一个`ul`
*   “更多”按钮在每个 ajax 请求上重新呈现

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:21:07.180

它最终成为我最初尝试的方式，但我的图像加载缓慢，阻止了 javascript 运行。现在我保持禁用按钮。

# android - Android WebView无网页面：奇怪的文字

> ID：10166041
> 
> 赞同：0
> 
> 时间：2012-04-15T20:59:16.263
> 
> 标签：android, webview, android-webview

我在“资产”文件夹中有以下 HTML：

```
<html>
<head>
<style>
    a#button
    {
        cursor: pointer;
        background-size: 100% 100%;
        background-color: transparent;
        background-image: url('button.png');
    }
    a#button:active
    {
        cursor: pointer;
        border: 2px solid white;
    }
</style>
</head>
<body style="background-color: black; margin: 0px; border: 0px; padding: 0px;">
<img id="bkg" src="background.png" style="position: absolute; top: 0px;" />
<a id="button" href="someurl" style="position: absolute;"></a>
</body>
</html> 
```

如您所见，只有两张图像，没有别的。第二个图像是一个超链接，它引用了一个服务器，看起来像一个带有文本的按钮：“重试连接”。出现错误时显示页面：

```
@Override
public void onReceivedError(WebView view, int errorCode, String description, String failingUrl)
{
     view.loadUrl("file:///android_asset/html/nointernet.htm");
} 
```

想象一下，当我看到我可以使用文本选择器在页面上选择文本时，我是多么震惊！我已将文本复制到剪贴板，然后粘贴到文本编辑器中，它是：

> 检查以确保您的设备有信号和数据连接稍后重新加载此网页。查看 ca

文字是从哪里出现的？！

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T14:57:28.593

这是众所周知且非常古老（3 年）的 Android 问题[http://code.google.com/p/android/issues/detail?id=2340](http://code.google.com/p/android/issues/detail?id=2340)，仍未解决。

**更新**

顺便说一句，我意想不到的解决方法似乎是我在那里读过的最好的。WebView 背景颜色应设置为零（黑色），以消除闪烁。此外，如果可能的话，通过 WebView 属性将超链接颜色设置为零（黑色）也是明智的，而不是在单击“重试”按钮时显示错误页面，您只会看到黑屏。

虽然我仍然不知道文本是如何在被点击时得到修复的，但这是我的页面和标准错误页面的奇怪混合......

**更新 2**

唉，没有超链接颜色（正常/已访问）的属性，但也许 setTextZoom() 和默认字体设置可以完全隐藏 URL（以不同的颜色呈现）。

# android - android 谷歌地图 onTap

> ID：10166042
> 
> 赞同：1
> 
> 时间：2012-04-15T20:59:18.137
> 
> 标签：android, google-maps-api-3, itemizedoverlay

我有一堆带有默认标记的自定义项目。

在我加载所有标记后，我正在使用一项服务来更新他们的可绘制照片。新照片为 50 X 50。

一切都很好，直到我点击一个标记并且我的 onTap 警报框被激活。然后我的标记恢复到标记新照片的原始（小）尺寸。

这是我的项目：

```
 Bitmap bitmap = ((BitmapDrawable) picture).getBitmap();
                picture = new BitmapDrawable(Bitmap.createScaledBitmap(bitmap, 50, 50, true));
                picture.setBounds(0, 0, 50,50);
                marker.getItem(0).setMarker(picture);
                mapView.invalidate(); 
```

这是我的onTap：

```
 protected boolean onTap(int index) {
   OverlayItem item = mapOverlays.get(index);
   Dialog dialog = new Dialog(context);
   dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
   dialog.setContentView(R.layout.map_menu);
   dialog.setCanceledOnTouchOutside(true);
   TextView userName = (TextView)dialog.findViewById(R.id.map_menu_name);
   ImageView profilepicture = (ImageView)dialog.findViewById(R.id.map_menu_profile_picture);
   if (item.getMarker(0) == null)
       profilepicture.setImageDrawable(defaultMarker);
   else
       profilepicture.setImageDrawable(item.getMarker(0));

   userName.setText(item.getTitle());
   //dialog.getWindow().setBackgroundDrawable(new ColorDrawable(0));
   dialog.show();

  return true;

} 
```

还有一件事，当我第一次加载地图时，虚拟标记就在某个点上。当它改变标记时，标记会移动一点……我不知道为什么……

**编辑：由于下面的答案找到了解决方案：**

我的新 onTap 方法：

```
 @Override
  protected boolean onTap(int index) {
   OverlayItem item = mapOverlays.get(index);
   Dialog dialog = new Dialog(context);
   dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
   dialog.setContentView(R.layout.map_menu);
   dialog.setCanceledOnTouchOutside(true);
   TextView userName = (TextView)dialog.findViewById(R.id.map_menu_name);
   ImageView profilePicture = (ImageView)dialog.findViewById(R.id.map_menu_profile_picture);
   if (item.getMarker(0) == null)
     profilePicture.setImageDrawable(defaultMarker);
   else
   {
       Bitmap bitmap = ((BitmapDrawable) item.getMarker(0)).getBitmap();
       Drawable profile = new BitmapDrawable(Bitmap.createScaledBitmap(bitmap, 50, 50, true));
       profilePicture.setImageDrawable(profile);
   }

   userName.setText(item.getTitle());
   //dialog.getWindow().setBackgroundDrawable(new ColorDrawable(0));
   dialog.show();

  return true;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T22:36:28.203

我猜你需要在为 ImageView 设置 Drawable 时再次创建 Drawable - 否则 ImageView 和标记共享 drawable 并且当 ImageView 布局时都会调整大小。

# php - 在joomla中，如何使用表单通过ajax返回文章中的动态内容

> ID：10166046
> 
> 赞同：0
> 
> 时间：2012-04-15T21:00:07.840
> 
> 标签：php, javascript, ajax, joomla, module

我想将驻留在模块中的 ajax 表单的结果输出到当前显示的文章中。下面是我想要完成的截图。我想通过ajax通过模块（在sidebarA中）的表单输入来修改文章中的mysql查询。

![在此处输入图像描述](../Images/e3273cd5709cdfe3e4a03effa96a413b.png)

以下是通过 jumi 从模块中截断的一些格式代码：

```
<form action="http://fsdsonline.com/menumanager/index.php/menustab/all-meals/77-component-menus/124-alcohol-n" method="post">
    <option value="AND plate = '1'">Plate FSDS only</option>
    <option value="AND plate = '1'">Prep FSDS only</option>
    <option value="">Plate and Prep FSDS</option>
    </select><br /><select style="font-size: 12px;" name="menu">
    <option value="">All Meals</option>
    <input style="font-size: 12px;" onclick="location=document.menuselector.menu.options[document.menuselector.menu.selectedIndex].value;" type="button" value="Show" /></form>
<div class="success" style="display: none;">View your menu</div> 
```

这是通过 jumi 文章中的 php 代码。

```
 mysql_connect($hostname,$username, $password) OR DIE ('Unable to 
connect to database! Please try again later.');
mysql_select_db($dbname);

$plateprep        = $_POST['plateprep'];
$meal = $_POST['meal'];
$pub        = $_POST['pub'];
$avocado = $_POST['avocado'];
$alcohol = $_POST['alcohol'];

$result = mysql_query("SELECT catnum, ctgry, Shrt_Desc, `desc`,  ROUND(`Energ_Kcal`*`yield`*`qty` ) AS `cal` FROM allinnot a
LEFT JOIN allinfsds b
ON a.`NDB_No2` = b.id1
LEFT JOIN fdcat h ON b.product_type = h.unik
LEFT JOIN allinnot2 g ON a.`NDB_No2` = g.NDB_No
LEFT JOIN allincomp j ON a.`NDB_No2` = j.fsds_num
WHERE `own_id` = $user->id $plateprep $pub $meal $avocado $alcohol
ORDER BY `catnum`, `order`");

$cat = null;
$first = true;
while ($row = mysql_fetch_array($result)) {
    if ($row['catnum'] != $cat) {
       if (!$first) {
           echo '</table>'; // close the table if we're NOT the first row being output.
       }

       $first = false; // no longer the first table, so disable this check.
        echo '<p style="line-height: 12pt; font-size: 12pt;"><strong>' . $row['ctgry'] . '</strong></p>';
       echo '<table>'; // start new table
       $cat = $row['catnum'];
    }
    echo "<tr><td>" . $row['Shrt_Desc'] . "</td><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" . $row['desc'] . "&nbsp;&nbsp;" . $row['cal'] . " cal</td></tr>";
}
?>
</table>
</body>
</html> 
```

我认为我已经正确编码了查询，并且表单看起来不错，但是如何通过 ajax 连接两者？谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T05:15:57.437

恐怕我对jumi不熟悉。

通常要执行 ajax 请求，您的 javascript 文件将对特定的 php 文件发出 ajax 请求。如果您要使用 ajax，您将需要以某种方式在您的表单中触发它。php 文件应将您想要的信息回显到发出 ajax 请求的文件。

在这种情况下，我认为 ajax 请求必须转到您嵌入了 jumi 的页面，但我不确定。

如果您打算使用 ajax，那么我建议使用 jquery 来完成。它使生活变得更加轻松。这是一个使用 jquery 发出的简单 ajax 请求的示例。

```
$.ajax({  
            type: "POST",  
            url: "joomla_page.php",  
            data: { 'menu': menu },   
            success: function(){  
            informationfromphp= data.menu; //This is $menu echod from php
            $('#menuid').html('<span class="food_results">Success!</span>');
            } 
        }) 
```

在您的 php 代码中，使用类似这样的内容捕获 ajax 消息

```
if (isset($_GET['menu'])) { 
    //do something ;
} 
```

然后在 php 中做一些事情（比如调用数据库）。之后，您可以使用回显将 php 中的信息返回到 ajax 文件。

```
echo $menu; 
```

请注意，这**不是**一个工作示例，它只是一个粗略的想法，可以帮助您入门。您会在 stackoverflow 上找到很多其他示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-16T13:23:14.710

将 jumi 与 joomla 一起使用会给您带来路径问题：

**在您的 php 代码（服务器端）**中，您将拥有所有包含和要求的内容：

_**使用绝对路径，使用 $_SERVER['DOCUMENT_ROOT']**。

_或重新定义 jumi tu 使用您的包含的路径（未经测试，在我看来 macGiver 正在修复，因为无论如何都在使用 jumi ......）。

实际上，还有另一个问题，客户端，由 joomla 选择引起：

**html BASE 由 joomla 在每个页面上定义**，默认情况下，base 是人类可读的 url ...因此对于 html 和 javascript 中的 url，请注意相对 uri ... **您可以使用绝对 uri .**

因此，在您的情况下，使用 ajax 客户端，您必须使用绝对 url 来精确目标，并在您的 php 中，为其他文件中使用的所有资源提供绝对路径。

设法使工作成为 joomla 上的 jquery 自动完成功能，而不是 jumi 。

请注意**joomla 使用 mootools**，并且您只能在页面后期包含 jquery （您在 jumi 中所做的一切都将在正文中）。有时，jquery和**mootols 不能很好地**结合在一起：类似的使用 $ 。有时您必须使用**jquery.noConflict。**

我会建议只使用一种 javascript 框架，但是，有时，你必须使用旧的选择来管理......

# android - 片段内的 ViewPagerIndicator：带有适配器的 NullPointer

> ID：10166050
> 
> 赞同：2
> 
> 时间：2012-04-15T21:00:28.807
> 
> 标签：android, android-fragments, android-viewpager

我尝试使用[此答案](https://stackoverflow.com/a/9700554/1335004)在片段内使用带有指示器的 ViewPager，[如下所示](https://i.imgur.com/F739Hl.png)。（只是一个模型）。
有改变片段的导航微调器。每个“页面”都将包含一个 ListView。

所以基本上我正在寻找：
SherlockFragmentActivity -> SherlockFragment -> ViewPager -> ListView

但是，当我尝试实现在答案中看到的内容时， findViewById(); 出现错误。
我认为这是因为我没有得到正确的“上下文”。

这是我的片段：

```
public class HomeViewFragment extends SherlockFragment {

    private ViewPager mPager;
    private HomePagerAdapter mAdapter;
    private TitlePageIndicator mIndicator;
    private Context context;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        context = getSherlockActivity().getApplicationContext();            

        mAdapter = new HomePagerAdapter(context);

        mPager = (ViewPager)context.findViewById(R.id.pager);
        mPager.setAdapter(mAdapter);

        mIndicator = (TitlePageIndicator)context.findViewById(R.id.indicator);
        mIndicator.setViewPager(mPager);
    } 

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T21:10:17.187

步骤#1：删除`context = getSherlockActivity().getApplicationContext();`

步骤#2：替换`context.findViewById`为`getActivity().findViewById`

第 3 步：将所有剩余的 替换`context`为`getActivity()`

步骤#4：删除你的`onActivityCreated()`实现，因为它没有做任何事情

第 5 步：下定决心，`getApplicationContext()`除非您明确知道**在特定情况下为什么需要它，否则您将永远不会再使用它**

# php - Codeigniter 路由问题

> ID：10166054
> 
> 赞同：1
> 
> 时间：2012-04-15T21:00:59.560
> 
> 标签：php, codeigniter, url, routes, uri

我在 codeigniter 中自定义我的路线，这是我的 routes.php 示例：

```
$route['default_controller'] = 'maincontroller/main';                                                                                                                                                                                    
$route['404_override'] = '';     

$route['test'] = 'maincontroller/test'; 
```

这是主控制器类：

```
class Maincontroller extends CI_Controller  
{                 
    public function __construct( )
    {
        parent::__construct( ); 
        $this->load->library('session');  
        $this->init( ); 
    }

    public function main( )         
    {       
        echo "in main";
    } 

    public function test( )
    {
        echo "test";
    }
} 
```

但是当我在浏览器中访问此 url:/test 时，我得到服务器的 404 页面未找到错误。

我不知道我做错了什么，我遵循了 codeigniter 用户指南中的路线指南。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T21:14:59.490

而不是去 /test ，尝试去 /index.php/test

默认情况下，CodeIgniter 通过 index.php 运行所有内容。

您可以通过将 .htaccess 文件添加到站点根文件夹来更改此行为。

这直接取自 CodeIgniter 用户指南。

[https://ellislab.com/codeigniter/user-guide/general/urls.html](https://ellislab.com/codeigniter/user-guide/general/urls.html)

htaccess 文件

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

如果你这样做，你还需要改变你的 config/config.php 文件

寻找

```
$config['index_page'] = 'index.php'; 
```

将其更改为

```
$config['index_page'] = ''; 
```

当您想在页面（视图）中创建链接时，您可以使用内置的 site_url() 函数，您可能需要为此加载 url 帮助程序。

例如

```
<?php echo site_url('test'); ?> 
```

这将考虑 $config['index_page'] 设置并为您的链接创建正确的 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T03:20:16.810

如果您尝试从 localhost 运行您的站点，请使用以下代码.. 将 .htaccess 文件添加到站点根文件夹（例如：mysite）。

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /root folder/index.php/$1 [L] 
```

对于托管在远程托管服务器上的站点，请使用此代码

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

# android - 泄漏发现 SQL 数据库从未关闭

> ID：10166056
> 
> 赞同：0
> 
> 时间：2012-04-15T21:01:02.520
> 
> 标签：android, database, sqlite, memory-leaks

我正在制作一个烹饪应用程序。我创建了三个 SQL 数据库，并用一个 tabview 填充了一个列表。这是数据库

```
import android.content.ContentValues;
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class Cook_tab_mains_data extends SQLiteOpenHelper {

public static final String DATABASE_NAME = "mains";

public Cook_tab_mains_data(Context context) {
    super(context, DATABASE_NAME, null, 2);
}

@Override
public void onCreate(SQLiteDatabase db) {

    String sql = "CREATE TABLE IF NOT EXISTS mains (" +
                    "_id INTEGER PRIMARY KEY AUTOINCREMENT, " + 
                    "name TEXT, " +
                    "disc TEXT, " +
                    "photo TEXT, " +
                    "prep TEXT, " +
                    "thumb TEXT, " +
                    "ingre TEXT, " +
                    "howto TEXT, " +
                    "info TEXT, " +
                    "mainId INTEGER)";
    db.execSQL(sql);

    ContentValues values = new ContentValues();

    values.put("name", "Name 3");
    values.put("disc", "here is the description");
    values.put("photo", "stub.png");
    values.put("ingre", "the ingredients of the mains");
    values.put("howto", "how to make this thing");
    values.put("info", "basically its this much calorie and such and such");
    db.insert("mains", "name", values);

    values.put("name", "Name 4");
    values.put("disc", "here is the description");
    values.put("photo", "stub.png");
    values.put("thumb", "ic_launcher.png");
    values.put("ingre", "the ingredients of the mains");
    values.put("howto", "how to make this thing");
    values.put("info", "basically its this much calorie and such and such");
    db.insert("mains", "name", values);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL("DROP TABLE IF EXISTS mains");
    onCreate(db);
}} 
```

如您所见，我的数据库是静态的。现在我有一个列出项目的列表活动和另一个详细说明它们的活动：

```
import java.io.IOException;
import java.io.InputStream;

import android.app.ListActivity;
import android.content.Context;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.view.View;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;

public class Cook_tab_mains extends ListActivity {

protected EditText searchText;
protected SQLiteDatabase db;
protected Cursor cursor;
protected ListAdapter adapter;
 class CustomSimpleCursor extends SimpleCursorAdapter {

        public CustomSimpleCursor(Context context, int layout, Cursor c,
                        String[] from, int[] to) {
                super(context, layout, c, from, to);
        }

        @Override
        public void bindView(View view, Context context, Cursor cursor) {
                super.bindView(view, context, cursor);
                ImageView thumb = (ImageView) view.findViewById(R.id.thumb);
                try {
                        InputStream bitmap = getAssets()
                                        .open(cursor.getString(cursor
                                                        .getColumnIndexOrThrow("thumb")));
                        Bitmap bit = BitmapFactory.decodeStream(bitmap);
                        thumb.setImageBitmap(bit);
                } catch (IOException e1) {
                        e1.printStackTrace();
                }

        }
}

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.cook_tab_general);
    db = (new Cook_tab_mains_data(this)).getWritableDatabase();
    searchText = (EditText) findViewById (R.id.searchText);

EditText searchTo = (EditText)findViewById(R.id.searchText);
searchTo.addTextChangedListener(new TextWatcher() {

    @Override
    public void afterTextChanged(Editable s) {
    }
    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
    }
    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
        // autoclick
    } 
});

    // || Query  SQLite
    cursor = db.rawQuery("SELECT _id, name, disc, thumb, prep FROM mains WHERE name LIKE ?", 
                    new String[]{"%" + searchText.getText().toString() + "%"});

    adapter = new CustomSimpleCursor(
            this, 
            R.layout.cook_tab_generalist, 
            cursor, 
            new String[] {"name", "disc", "prep"}, 
            new int[] {R.id.name, R.id.disc, R.id.prep});

    setListAdapter(adapter);}

public void search(View view) {
    // ||Query SQLite
    cursor = db.rawQuery("SELECT _id, name, disc, thumb, prep  FROM mains WHERE name LIKE ?", 
                    new String[]{"%" + searchText.getText().toString() + "%"});

        adapter = new CustomSimpleCursor(
                this, 
                R.layout.cook_tab_generalist, 
                cursor, 

                new String[] {"name", "disc", "prep"}, 
                new int[] {R.id.name, R.id.disc, R.id.prep});
        setListAdapter(adapter);}

public void onListItemClick(ListView parent, View view, int position, long id) {
    Intent intent = new Intent(this, Cook_tab_mains_details.class);
    Cursor cursor = (Cursor) adapter.getItem(position);
    intent.putExtra("MAINS_ID", cursor.getInt(cursor.getColumnIndex("_id")));
    startActivity(intent);
}
} 
```

and then when an item is selected it shows details in this activity:

```
import java.io.IOException;
import java.io.InputStream;
import android.app.Activity;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.widget.ImageView;
import android.widget.TextView;

public class Cook_tab_mains_details extends Activity {

protected TextView Name;
protected ImageView Photo;
protected TextView Ingredients;
protected TextView HowTo;
protected TextView Information;

protected int mainId;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.cook_tab_generaldetails);

    mainId = getIntent().getIntExtra("MAINS_ID", 0);
    SQLiteDatabase db = (new Cook_tab_mains_data(this)).getWritableDatabase();
    Cursor cursor = db.rawQuery("SELECT emp._id, emp.name, emp.photo, emp.ingre, emp.howto, emp.info, emp.mainId, mgr.name mainsname, mgr.disc mainsdiscname FROM mains emp LEFT OUTER JOIN mains mgr ON emp.mainId = mgr._id WHERE emp._id = ?", 
            new String[]{""+mainId});

    if (cursor.getCount() == 1)
    {
        cursor.moveToFirst();

        Name = (TextView) findViewById(R.id.FoodName);
        Name.setText(cursor.getString(cursor.getColumnIndex("name")));

        Photo = (ImageView) findViewById(R.id.Photo);
        try {
            InputStream bitmap=getAssets().open(cursor.getString(cursor.getColumnIndexOrThrow("photo")));
            Bitmap bit=BitmapFactory.decodeStream(bitmap);
            Photo.setImageBitmap(bit);
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

        Ingredients = (TextView) findViewById(R.id.Ingre);
        Ingredients.setText(cursor.getString(cursor.getColumnIndex("ingre")));

        HowTo = (TextView) findViewById(R.id.HowtoDo);
        HowTo.setText(cursor.getString(cursor.getColumnIndex("howto")));

        Information = (TextView) findViewById(R.id.Information);
        Information.setText(cursor.getString(cursor.getColumnIndex("info")));

    } }} 
```

问题：我似乎无法关闭（）数据库。我到处找。我找不到答案。每次我尝试这个命令时：

```
public void close() 
{
    Cook_tab_mains_data.close();
} 
```

它给了我这个错误并且不会编译：`Cannot make a static reference to the non-static method close() from the type SQLiteOpenHelper`

那么现在怎么办？如何关闭我的数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T21:05:42.210

在活动**Cook_tab_mains_details中****onCreate**方法的最后，分别添加和关闭游标和数据库。**`cursor.close();``db.close()`**

 ****更优选地，您应该在onStart**方法中加载数据并在活动的**onStop**方法中关闭游标+数据库。（*但这只是一个建议*）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T21:43:36.713

在 Android 中，您不需要显式关闭数据库。它会被 android 自动神奇地关闭。简而言之，不用担心关闭 db.

错误是您试图关闭使用 ClassName.close() 创建的对象，这不是静态方法。您可以在需要时调用`db.close()`where db is the object。游标应该由你管理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T21:14:04.833

在 Cook_tab_mains 添加：

```
@Override
public void onDestroy() {
    db.close()
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T21:06:07.513

你必须打电话

```
cursor.close(); 
```

当您不再需要它们时。**

# python - Python win32com 和二维数组

> ID：10166064
> 
> 赞同：3
> 
> 时间：2012-04-15T21:01:53.613
> 
> 标签：python, multidimensional-array, coordinates, win32com

当使用 python 和 win32com 自动化 Adob​​e 软件时，会遇到传递二维坐标数组的问题。如果看一下 Adob​​e 为 Visual Basic (VB) 提供的代码，它很简单。在 Illustrator 中绘制线条的简化示例如下所示：

```
Set appObj = CreateObject("Illustrator.Application")
Set docObj = appObj.Documents.Add

Set pathItem = docObj.PathItems.Add
    pathItem.SetEntirePath Array(Array(0.0, 0.0), Array(20.0, 20.0)) 
```

现在天真的假设是 VB 代码可以通过将其转换为 python 如下：

```
from win32com.client import Dispatch

appObj = Dispatch("Illustrator.Application")  
docObj = appObj.Documents.Add()

pathItem = docObj.PathItems.Add()
pathItem.SetEntirePath( [ [0.0,0.0], [20.0,20.0] ] ) 
```

显然，这并不容易，python 发出一个错误说“仅支持维度为 1 的数组”。现在我知道数组数组和二维数组之间是有区别的。所以问题是我如何强制 python 制作一个正确类型的数组？

我尝试制作自己的 VARIANT 类型，但惨遭失败。我也为此查看了ctypes。有没有人遇到过同样的问题，可以解释一下吗？

PS：

我知道这个问题可以通过使用来规避：

```
pathItem = docObj.PathItems.Add()
for point in (  [0.0,0.0], [20.0,20.0] ):
    pp = pathItem.PathPoints.Add() 
    pp.Anchor = point 
```

但也有类似的情况，实际上这不起作用。无论如何，重点是为学生编写移植指南，以便尽可能接近初衷会更好。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-26T21:56:11.453

这是实际使用*win32com*模块的替代解决方案。碰巧**Illustrator**和**Photoshop**的数组类型是变体类型的单个数组。其中变体类型也是一个数组。还有其他应用程序（例如solidworks）使用相同的策略。您可以强制 win32com 使用以下代码制作变体类型：

```
from win32com.client import VARIANT
from pythoncom import VT_VARIANT

def variant(data):
    return VARIANT(VT_VARIANT, data) 
```

不需要总是在任何地方都输入变体会很方便，因此您可以只使用一个 python 数组并使用以下内容制作每个子元素变体：

```
import collections

def vararr(*data):
    if (  len(data) == 1 and 
          isinstance(data, collections.Iterable) ):
        data = data[0]
    return map(variant, data) 
```

所以最后我的完整代码如下所示：

```
from win32com.client import Dispatch, VARIANT
from pythoncom import VT_VARIANT
import collections

appObj = Dispatch("Illustrator.Application")  
docObj = appObj.Documents.Add()

def variant(data):
    return VARIANT(VT_VARIANT, data)

def vararr(*data):
    if (  len(data) == 1 and 
          isinstance(data, collections.Iterable) ):
        data = data[0]
    return map(variant, data)

pathItem = docObj.PathItems.Add()
pathItem.SetEntirePath( vararr( [0.0,0.0], [20.0,20.0] )  )

#or you can have a iterable of iterables
pathItem = docObj.PathItems.Add()
pathItem.SetEntirePath( vararr( [[30.0,10.0], [60.0,60.0]] )  ) 
```

是的，这可以通过**comtypes**完成，但这回答了我如何在*win32com*中执行此操作的真正问题。此外，使用 win32com 也是有原因的，例如能够生成常量。所以在很长一段时间后，我终于找到了真正让我困惑的问题的答案。希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T01:54:02.687

我在尝试使用 win32com 确定选择区域时遇到了同样的问题。我发现使用 comtypes 而不是 win32com 访问 Photoshop 彻底解决了多维数组问题。

我认为一维数组问题是win32com的一个限制，但我可能错了。

你可以在这里获得 comtypes：http: [//sourceforge.net/projects/comtypes/](http://sourceforge.net/projects/comtypes/)

[Tech Artists Org](http://tech-artists.org/forum/showthread.php?t=172)上有一篇关于这个问题的帖子，值得一看。

这是使用上面链接的技术艺术家论坛帖子中的 comtypes 传递数组的示例。路径点的实现应该类似。

```
import comtypes.client
ps_app = comtypes.client.CreateObject('Photoshop.Application') 
# makes a new 128x128 image
ps_app.Documents.Add(128, 128, 72)

# select 10x10 pixels in the upper left corner
sel_area = ((0, 0), (10, 0), (10, 10), (0, 10), (0, 0))
ps_app.ActiveDocument.Selection.Select(sel_area) 
```

# jquery - 将 Youtube 嵌入 Modal 时访问被拒绝错误

> ID：10166067
> 
> 赞同：2
> 
> 时间：2012-04-15T21:02:23.520
> 
> 标签：jquery, iframe, youtube, modal-dialog

我有一个页面，用户可以将 Youtube 视频发布到论坛。

用户发布视频链接后，该链接将转换为以下内容：

```
<a href='javascript:void(0)' class='video_player' data-videoid='http://www.youtube.com/embed/$vidID'>$video_title</a> 
```

$vidID 就是您在每个 youtube 视频的 URL 中看到的 Youtube 视频 ID。当用户单击链接播放视频时，会打开一个包含嵌入视频的模式。这是模态的JS：

```
$('.video_player').live('mouseover', function(event) {//VIDEO PLAYER MODAL
    var videoid = $(this).attr("data-videoid");
    var sourcepage = $(this).attr("data-sourcepage");
    $(this).qtip({
     id: 'videomodal',
     content: {
            text: '<img src="images/loading.gif" alt="Loading..." /> Loading..please wait.',
            ajax: {url: 'modals/video_player.php',type: 'GET',data: { videoid: videoid, sourcepage: sourcepage}},
            title: { text: 'Video Player', button: true }
     },
     position: {    my: 'center', at: 'center', target: $(window) },
     show: { event: 'click', solo: true, modal: true },
     hide: false,
     style: 'ui-tooltip-tipsy ui-tooltip-rounded higher-zindex',
     events: {
        hide: function(event, api){
         auto_refresh = setInterval(function (){$('#bottom_middle').load(thisurl + '&timer=' + new Date().getTime() + ' #bottom_middle' );}, 5000);             
         $(this).qtip("destroy"); 
        }
     },  
    });
return false;
}); 
```

这是我的 video_Player.php 代码：（非常基本，模态加载此页面，并嵌入所需的 iframe 来播放视频）

```
<?PHP
 $videoid = $_GET['videoid'];
 $sourcepage = $_GET['sourcepage'];

 echo "<iframe title='YouTube video player' width='480' height='390' src='$videoid' frameborder='0' allowfullscreen></iframe>";   
?> 
```

在 Chrome 中，我收到“不安全的 JavaScript 尝试使用 URL blah blah 访问框架”错误，但视频播放并且一切似乎都正常，但在 IE 中我得到 SCRIPT5：访问被拒绝。我已经在网上搜索过，并且在这个网站上搜索过解决方案，但是运气为 0。任何人都知道解决此问题或更好的方法吗？我使用了模态（qtip2），这是唯一的要求。我所有的 jquery 库也是最新的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T15:25:54.747

尝试将此添加到您的代码中：

```
$('iframe').each(function(){
    var url = $(this).attr("src");
    $(this).attr("src",url+"?wmode=transparent");
}); 
```

# php - PHP 绑定 PDO 数组

> ID：10166070
> 
> 赞同：3
> 
> 时间：2012-04-15T21:02:44.580
> 
> 标签：php, oop, pdo, associative-array

我正在尝试通过一个数组使用 PDO 组装一个数据库插入，但我只是在某处丢失了它，并且正在寻找一些关于我所缺少的东西的帮助。该数组是一个关联数组。抛出的错误是：

```
Fatal error:  Uncaught exception \'PDOException\' with message \'SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens\' in /var/www/html/themonastery.org/mot/receiver.php:70
Stack trace:
#0 /var/www/html/themonastery.org/mot/receiver.php(70): PDOStatement->execute()
#1 {main}
  thrown in /var/www/html/themonastery.org/mot/receiver.php on line 70 
```

我正在使用的代码是：

```
 /** PDO Stuff **/

    //require and instantiate pdo instance
    require_once "dependancies/pdo.func.php";
    $dbh = pdo_connect();

    //implode query
    $keys = implode(',', array_keys($clean));
    $vals = implode(',', array_fill(0, count($clean), '?'));

    $insert = array_values($clean);

    //pdo prepare
    $sth = $dbh->prepare("INSERT INTO backupDB ($keys) VALUES ($vals)");

    //set loop condition
    $waiting = true; 
    while($waiting) {
        try {
        $dbh->beginTransaction();

        $i=1;
        foreach($clean as $insert) {

            // bindvalue is 1-indexed, so $k+1
            $sth->bindValue($i++, $insert, PDO::PARAM_STR);

            $sth->execute();
            sleep(1);
        }

        $dbh->commit();
        $waiting = false;

        } catch(PDOException $e) {
        if(stripos($e->getMessage(), 'DATABASE IS LOCKED') !== false) {
            //sleep for 0.25 seconds and try again.
            $dbh->commit();
            usleep(250000);
        } else {
            $dbh->rollBack();
            throw $e;
        }
        }
    } 
```

这是关联数组，

```
array (
  'full_name' => 'First Middle Last Suffix',
  'first_name' => 'First',
  'middle_name' => 'Middle',
  'last_name' => 'Last Suffix',
  'address' => 'The Address',
  'city' => 'City',
  'state' => 'State Abbr',
  'zip' => 'Zip code',
  'country' => 'Country Abbr',
  'email' => 'dev@null.com',
  'password' => 'd41d8cd98f00b204e9800998ecf8427e',
  'ordinationDate' => '2012-04-15',
  'birthday' => '1982-14-01',
  'isValidAge' => '1',
) 
```

根据请求，这里有一个 var_dump`$keys`和`$vals`

```
$keys = string(123) "full_name,first_name,middle_name,last_name,address,city,state,zip,country,email,password,ordinationDate,birthday,isValidAge"
$vals = string(27) "?,?,?,?,?,?,?,?,?,?,?,?,?,?" 
```

这是数据库中的列名

```
 id  full_name   first_name  middle_name last_name   address city    state   zip country email   password    ordinationDate  birthday    isValidAge  sex timestamp   ulc_edit_time   osc_sync    guid 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T21:27:19.797

改变这个：

```
$i=1;
foreach($clean as $insert) {

    // bindvalue is 1-indexed, so $k+1
    $sth->bindValue($i++, $insert, PDO::PARAM_STR);

    $sth->execute();
    sleep(1);
} 
```

对此：

```
$i=1;
foreach($clean as $insert) {

    // bindvalue is 1-indexed, so $k+1
    $sth->bindValue($i++, $insert, PDO::PARAM_STR);

    sleep(1);
}

$sth->execute(); 
```

PDO::execute() 需要位于所有 bindValues() 的末尾（参见[http://php.net/manual/en/pdostatement.execute.php#example-995](http://php.net/manual/en/pdostatement.execute.php#example-995)）

另外，我具有以下功能来绑定正确的数据类型（需要针对您的情况进行一些更改）：

```
public function bindValue($key = null, $value = null) {
    if($key == null) {
        return;
    }

    if(is_int($value)) {
        $param = PDO::PARAM_INT;
    } elseif(is_bool($value)) {
        $param = PDO::PARAM_BOOL;
    } elseif(is_null($value)) {
        $param = PDO::PARAM_NULL;
    } elseif(is_string($value)) {
        $param = PDO::PARAM_STR;
    } else {
        $param = FALSE;
    }

    $this->_query->bindValue($key, $value, $param);
} 
```

# css - 将阴影应用于最外层？

> ID：10166074
> 
> 赞同：0
> 
> 时间：2012-04-15T21:03:10.437
> 
> 标签：css

是否可以将 CSS 中的阴影属性应用于外部 div？我整理东西的方式是这样的：

```
<div id="outer">
  <div id="left"></div>
  <div id="center"></div>
  <div id="right"></div>
</div> 
```

我想做类似的事情：

```
#outer{
display:block;
width: 825px;
height 300px;
margin-left: auto;
margin-right: auto;
-moz-box-shadow: 0 0 5px 5px #319a00;
-webkit-box-shadow: 0 0 5px 5px #319a00;
box-shadow: 0 0 5px 5px #319a00;
} 
```

但它会创建一个没有高度的阴影。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T21:11:18.000

原因是您错过了`height`在 CSS 之后添加冒号 :) 我认为没有什么比这更奇怪的了。

# javascript - 在空的 jQuery 选择器数组上返回“真”？

> ID：10166075
> 
> 赞同：15
> 
> 时间：2012-04-15T21:03:11.703
> 
> 标签：javascript, jquery, jquery-selectors, boolean

我正在努力创建一种更语义化的方式来使用 jQuery 检查元素。使用`$("#element").length > 0`just 对我来说真的感觉不太好，所以我正在制作自己的选择器添加用于`.is`：

```
if($("#element").is(":present")) {
  console.log("It's aliiiveeee!!");
} 
```

那部分很简单，就像这样：

```
$.extend($.expr[':'],{
    present: function(a) {
        return $(a).length > 0;
    }
}); 
```

我想更进一步，使用类似的语法轻松查看元素是否不存在：

```
$.extend($.expr[':'],{
    present: function(a) {
        return $(a).length > 0;
    },
    absent: function(a) {
        return $(a).length === 0;
    }
});

$(function() {
  if($("#element").is(":absent")) {
    console.log("He's dead, Jim.");
  }
}); 
```

但这部分很难做到。我认为这是因为我正在缩减返回的元素以获得结果，并且将选择器缩减为 .length === 0 与要求没有 elelements 相同：无论如何它都会返回 false 。

我尝试了很多不同的方法来反转事情，并在元素不存在时返回 true，如果存在则返回 false：

```
return $(a).length === 0;

return !($(a).length > 0);

if(!($(a).length > 0)) { 
  return true;
} 

if($(a).length > 0) { 
  return false;
} else {
  return true;
}

return !!($(a).length === 0);

// etc... 
```

**有没有一种简单的方法可以让它在元素不存在时返回 true，如果存在则返回 false？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-15T21:10:55.297

的定义`is`：

> 根据选择器、元素或 jQuery 对象检查当前匹配的元素集，如果这些元素中至少有一个与给定参数匹配，则返回 true。

问题是，由于您没有元素，因此您的元素之一不可能匹配某些条件。jQuery 甚至没有调用您的代码，因为没有元素。

编辑：稍微澄清一下，您的代码会为对象中的每个元素调用一次（至少在一个返回 true 之前）。没有元素意味着代码永远不会被调用。 `a`在您的代码中始终是单个元素。

**EDIT2**：考虑到这一点，这将是更有效的实现`present`：

```
$.extend($.expr[':'],{
    present: function(a) {
        return true;
    }
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-15T21:13:07.897

你可以简单地使用

```
if(​$('element').length) // 1 or 0 will be returned 
```

或者

```
$.extend($.expr[':'],{
    present: function(a) {
        return $(a).length;
    }
});

if($('#element').is(':present'))
{
    // code for existence
}
else
{
    // code for non-existence
} 
```

[例子](http://jsfiddle.net/heera/rQTcY/1/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T08:31:23.313

考虑到`$().is()`当集合为空时它甚至不会运行，所以`:present`选择器是相当多余的。因此，与其玩`$.expr[':']`，我会扩展`$.fn`以包含适当的功能，例如：

```
$.fn.extend({
    hasAny: function() {
        return this.length > 0;
    },
}); 
```

或者

```
$.fn.extend({
    isEmpty: function() {
        return this.length == 0;
    },
}); 
```

我个人采用这种方法的原因是选择器通常用于检查元素的特定属性（比较、、、、`:checked`等`:enabled`），`:selected`而**不是**作为一个整体的 jQuery 元素集的属性（例如，）。`:hover`**`.size()``.index()`**

 **用法当然类似于以下内容：

```
if ($('#element').isEmpty())
    console.log("He's dead, Jim."); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-15T21:07:53.433

`0`在 JavaScript 中是“虚假的”。

你可以直接返回`!$(a).length`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-15T21:10:25.027

怎么样：

```
if ( !$(a)[0] ) {
    // $(a) is empty
} 
```

因此，`$(a)[0]`检索 jQuery 对象中的第一个元素。如果该元素为空/未定义，则表示 jQuery 对象为空。**

# android - 安装 ADT 插件失败

> ID：10166076
> 
> 赞同：0
> 
> 时间：2012-04-15T21:03:20.097
> 
> 标签：android

嘿，我正在尝试安装它，我已经尝试了一切。

*   **正如我在某个论坛中看到的那样，我已经下载了 EE Eclipse**
*   **将https更改为http，仍然无法安装**
*   **试过手动安装，不会安装**
*   **试图以管理员身份运行，不好**

我犯了同样的错误 ：

```
 Unexpected Error.  Could not process the request. Check the error log for details. 
```

在日志中我看到：

```
org/sat4j/minisat/core/AssertingClauseGenerator 
```

org/sat4j/minisat/core/AssertingClauseGenerator

我使用的是 Windows 7 32 位，安装了 JDK 有帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T18:27:49.030

好吧，最后我只是下载了 Eclipse Helios 而不是 Indigo，这就成功了。

# login - Symfony 2 中的两个独立登录页面

> ID：10166081
> 
> 赞同：3
> 
> 时间：2012-04-15T21:04:38.073
> 
> 标签：login, symfony

我试图弄清楚如何拥有两个单独的登录页面：页面的默认登录`.com`和特定用户的默认登录，例如 route `/special`。

这在一个 SF2 项目中很容易实现吗？

更新：

我的防火墙中有以下配置（我正在使用 fosub）

```
providers:
    custom:
        id: ib.user_provider
    fos_userbundle:
        id: fos_user.user_manager
    my_fos_facebook_provider:
        id: my.facebook.user

firewalls:
    special:
        pattern: ^/special
        form_login:
            provider: fos_userbundle
            login_path: /special/login
            check_path: /special/login_check
            use_referer: false
            default_target_path: /special
            success_handler: ib.login_handler
            provider: custom
    main:
        pattern: ^/.*
        form_login:
            provider: fos_userbundle
            login_path: /login
            check_path: /login_check
            use_referer: false
            default_target_path: /
            provider: custom
        fos_facebook:
            always_use_default_target_path: true
            app_url: "http://apps.facebook.com/%facebook_app_id%/"
            server_url: "http://aw.com/aw/web/app_dev.php/"
            login_path: /login
            check_path: /login_check/facebook
            default_target_path: /checkFB
            success_handler: facebook_auth_success_handler
            provider: my_fos_facebook_provider
        logout:
            #handlers: ["fos_facebook.logout_handler"]
            target: /
        anonymous:    ~ 
```

在 ib.login_handler 我有以下内容：

```
public function onAuthenticationSuccess(Request $request,TokenInterface $token)
{
    if ($this->security->isGranted('ROLE_CATEGORIZER'))
    {
        $response = new RedirectResponse($this->router->generate('MyCoBundle_mailAdmin_index'));
    }

    return $response;
} 
```

使用此配置，如果我访问 mydomain.com/special，则会收到以下错误：Fehler: Umleitungsfehler（英文：Error: Redirection error）

更新：

在 chrome 中我得到：没有找到“GET /special/login”的路线

```
404 Not Found - NotFoundHttpException
1 linked Exception: ResourceNotFoundException » 
```

我没有此登录路径的特殊路线。我想要实现的只是，特殊用户只能访问路径/特殊下的页面。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-15T23:27:56.767

有可能，您可以定义许多保护区 => 许多防火墙。

让我们看看这个***app/config/security.yml***配置来了解如何：

```
firewalls:

    dev:
        pattern:  ^/(_(profiler|wdt)|css|images|js)/
        security: false

    special_area:
        pattern:  ^/special
        anonymous: ~
        form_login:
            check_path: /special/login_check
            login_path: /special/login
        logout:
            path:   /special/logout
            target: /

    general_area:
        pattern:  ^
        anonymous: ~
        form_login:
            check_path: /login_check
            login_path: /login
        logout:
            path:   /logout
            target: /

access_control:
    - { path: ^/_internal, role: IS_AUTHENTICATED_ANONYMOUSLY, ip: 127.0.0.1 }

    - { path: ^/login$, role: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/special/login$, role: IS_AUTHENTICATED_ANONYMOUSLY } 
```

请注意，**special_area**必须在**genereal_area**之上定义，因为general_area 的模式与其他模式匹配...

您必须在 bundle routing.yml 中添加的内容：

```
_security_login_special:
    pattern:  /special/login
    defaults: { _controller: FOSUserBundle:Security:login }

_security_check_special:
    pattern:  /special/login_check

_security_logout_special:
    pattern:  /special/logout 
```

而且您必须为 general_area 添加另一个角色，因此您需要覆盖 FOSUserManager 并使其在用户加载时添加此补充角色...（更多信息在这里：[https://github.com/FriendsOfSymfony/FOSUserBundle/blob/1.2\. 0/资源/doc/user_manager.md](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/1.2.0/Resources/doc/user_manager.md) )

# php - 中级 PHPer 的 PHP 代码的好例子？

> ID：10166086
> 
> 赞同：2
> 
> 时间：2012-04-15T21:05:30.070
> 
> 标签：php

我知道 PHP 的基础知识，并用 PHP 编写了一个学校项目（虽然回头看，我真的很想重写它）

不过，我真的很想了解如何编写*好的*PHP 代码，例如 PHP 的最佳实践是什么？是否有推荐的方法来处理某些任务？

我认为解决这个问题的最好方法就是让我花一些时间浏览一些 PHP 代码，尽管我意识到已经有类似的问题，答案似乎大多参考 PHP 程序，如 wordpress。. . 这只是我头上的一点（更不用说令人难以置信的大到拖网并尝试理解）

那么任何人都可以推荐一些程序给我看，促进最佳实践，但足够简单让我理解（即不是 Wordpress、Magento 或那个级别的东西）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T21:33:02.597

如果您谈论编码风格，有几个或多或少知名的准则，例如

*   在 PEAR 项目[http://pear.php.net/manual/en/standards.php](http://pear.php.net/manual/en/standards.php)
*   在 Zend 项目[http://framework.zend.com/manual/en/coding-standard.coding-style.html](http://framework.zend.com/manual/en/coding-standard.coding-style.html)
*   对于 Drupal 开发人员[http://drupal.org/coding-standards](http://drupal.org/coding-standards)
*   对于 Wordpress 开发人员[http://codex.wordpress.org/WordPress_Coding_Standards#PHP](http://codex.wordpress.org/WordPress_Coding_Standards#PHP)

你会发现它们有很大的不同，因为这是一个品味问题。

如果你想要一些关于如何在 PHP 中构建大型应用程序的示例，那么差异会更大，几乎每个开发人员和每个项目都有自己的做事风格——这实际上是 PHP 的一大缺点。

我个人并没有从浏览源代码中学到很多东西，在我看来，最好只是开始项目并找出如何将事情做得最好，每次遇到问题时都用谷歌搜索 - 这样你'会看到很多好的和坏的 PHP 代码，总有一天你会自动区分好代码和坏代码。我真的不知道具有良好编码标准的小型 PHP 应用程序（一般来说，如果我想到 PHP，我只会想到大型或自行编写的应用程序。或者我从未查看过源代码的应用程序。）

# ruby-on-rails - 用于 Rails 的 MongoDB

> ID：10166090
> 
> 赞同：0
> 
> 时间：2012-04-15T21:05:55.097
> 
> 标签：ruby-on-rails, mongodb, macports

我正在尝试通过 macport 为我的 Rails 项目安装 MongoDB。但是，当我尝试安装 MongoDB 时，出现以下错误。我不明白它为什么要尝试下载 Python 依赖项，这可能是它失败的原因吗？

```
hansarijanto$ sudo port install mongodb
Password:
--->  Computing dependencies for mongodb
--->  Dependencies to be installed: boost bzip2 icu libpcap pcre scons python27 db46 python_select snappy lzo2 spidermonkey nspr readline
--->  Fetching archive for bzip2
--->  Attempting to fetch bzip2-1.0.6_0.darwin_11.x86_64.tbz2 from http://packages.macports.org/bzip2
--->  Attempting to fetch bzip2-1.0.6_0.darwin_11.x86_64.tbz2.rmd160 from http://packages.macports.org/bzip2
--->  Installing bzip2 @1.0.6_0
--->  Activating bzip2 @1.0.6_0
--->  Cleaning bzip2
--->  Fetching archive for icu
--->  Attempting to fetch icu-4.8.1_0.darwin_11.x86_64.tbz2 from http://packages.macports.org/icu
--->  Attempting to fetch icu-4.8.1_0.darwin_11.x86_64.tbz2.rmd160 from http://packages.macports.org/icu
--->  Installing icu @4.8.1_0
--->  Activating icu @4.8.1_0
--->  Cleaning icu
--->  Fetching archive for boost
--->  Attempting to fetch boost-1.49.0_0.darwin_11.x86_64.tbz2 from http://packages.macports.org/boost
--->  Attempting to fetch boost-1.49.0_0.darwin_11.x86_64.tbz2.rmd160 from http://packages.macports.org/boost
--->  Installing boost @1.49.0_0
--->  Activating boost @1.49.0_0
--->  Cleaning boost
--->  Fetching archive for libpcap
--->  Attempting to fetch libpcap-1.1.1_0.darwin_11.x86_64.tbz2 from http://packages.macports.org/libpcap
--->  Attempting to fetch libpcap-1.1.1_0.darwin_11.x86_64.tbz2.rmd160 from http://packages.macports.org/libpcap
--->  Installing libpcap @1.1.1_0
--->  Activating libpcap @1.1.1_0
--->  Cleaning libpcap
--->  Fetching archive for pcre
--->  Attempting to fetch pcre-8.12_1.darwin_11.x86_64.tbz2 from http://packages.macports.org/pcre
--->  Attempting to fetch pcre-8.12_1.darwin_11.x86_64.tbz2.rmd160 from http://packages.macports.org/pcre
--->  Installing pcre @8.12_1
--->  Activating pcre @8.12_1
--->  Cleaning pcre
--->  Fetching archive for db46
--->  Attempting to fetch db46-4.6.21_6.darwin_11.x86_64.tbz2 from http://packages.macports.org/db46
--->  Attempting to fetch db46-4.6.21_6.darwin_11.x86_64.tbz2.rmd160 from http://packages.macports.org/db46
--->  Installing db46 @4.6.21_6
--->  Activating db46 @4.6.21_6
--->  Cleaning db46
--->  Fetching archive for python_select
--->  Attempting to fetch python_select-0.3_1.darwin_11.noarch.tbz2 from http://packages.macports.org/python_select
--->  Attempting to fetch python_select-0.3_1.darwin_11.noarch.tbz2.rmd160 from http://packages.macports.org/python_select
--->  Installing python_select @0.3_1
--->  Activating python_select @0.3_1
--->  Cleaning python_select
--->  Fetching archive for python27
--->  Attempting to fetch python27-2.7.3_0.darwin_11.x86_64.tbz2 from http://packages.macports.org/python27
--->  Fetching python27
--->  Attempting to fetch Python-2.7.3.tar.xz from http://ykf.ca.distfiles.macports.org/MacPorts/mpdistfiles/python27
--->  Verifying checksum(s) for python27
--->  Extracting python27
--->  Applying patches to python27
--->  Configuring python27
Error: Target org.macports.configure returned: configure failure: shell command failed (see log for details)
Error: Failed to install python27
Log for python27 is at: /opt/local/var/macports/logs/_opt_local_var_macports_sources_rsync.macports.org_release_tarballs_ports_lang_python27/python27/main.log
Error: The following dependencies were not installed: scons python27 snappy lzo2 spidermonkey nspr readline
Error: Status 1 encountered during processing.
To report a bug, see <http://guide.macports.org/#project.tickets> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-23T16:25:44.490

MacPorts 已被[Homebrew](http://brew.sh/)作为 OS X 的包管理器所取代。您可以[使用 brew 轻松安装 MongoDB](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-os-x/)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-28T12:05:43.190

MacPorts 安装有效。安装boost需要很长时间。把它关掉，去吃午饭，就像他们在打卡时代所做的那样。

# javascript - 从 $.post() 获取 JSON 对象结果

> ID：10166091
> 
> 赞同：1
> 
> 时间：2012-04-15T21:06:07.263
> 
> 标签：javascript, jquery, web-services, webforms

我试图在 WebForms 应用程序中通过 AJAX 调用 Web 服务。

我的脚本看起来像这样：

```
$.post('UpdateServer.asmx/ProcessItem',
    'itemId=' + $(this).text(),
    function (result) {
        alert(result);
    }); 
```

我的网络服务看起来像这样。

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
[System.Web.Script.Services.ScriptService]
public class UpdateServer : System.Web.Services.WebService
{
    [WebMethod]
    public string ProcessItem(int itemId)
    {
        return new JavaScriptSerializer().Serialize(
            new { Success = true, Message = "Here I am!" });
    }
} 
```

Web 方法按预期调用，并带有预期的参数。但是，传递给我的成功函数的参数（$.post() 的最后一个参数）是文档类型，不包含我期望的 Success 和 Message 成员。

有什么神奇的词可以让我找回我期待的对象？

**编辑**

经过仔细检查，我可以找到我要查找的数据，如下所示：

> result.childNodes[0].childNodes[0].data: "{"Success":true,"Message":"服务器更新成功！"}"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T22:46:18.453

您看到以 JSON 结尾的奇怪节点结构的原因是您没有调用该服务，这是将 JSON 从 ASMX ScriptServices 中诱出然后返回 JSON 字符串[的必要方法。](http://encosia.com/using-jquery-to-consume-aspnet-json-web-services/)因此，最终结果是您返回的 XML 文档包含该 JSON 字符串的单个值。

您现在遇到的两个具体问题是您正在[手动 JSON 序列化您的返回值](http://encosia.com/asp-net-web-services-mistake-manual-json-serialization/)，并且您没有使用 Content-Type 调用服务`application/json`（.NET 需要切换到 JSON 序列化响应）。

解决这些问题后，您还会遇到“无效 JSON 原语”错误[，因为 data 参数是 URL 编码的，而不是有效的 JSON 字符串](https://encosia.com/asmx-scriptservice-mistake-invalid-json-primitive/)。

要使其正常工作，请在服务器端执行此操作：

```
[ScriptService]
public class UpdateServer : System.Web.Services.WebService
{
  [WebMethod]
  public object ProcessItem(int itemId)
  {
    return new { Success = true, Message = "Here I am!" };
  }
} 
```

如果需要，您还可以创建一个数据传输对象（又名 ViewModel）来返回，而不是使用匿名类型`object`。

要成功地从中获取原始 JSON，请在客户端执行以下操作：

```
$.ajax({
  url: 'UpdateServer.asmx/ProcessItem',
  type: 'post',
  contentType: 'application/json',
  data: '{"itemId":' + $(this).text() + '}',
  success: function(result) {
    // This will be { d: { Success: true, Message: "Here I am!" } }.
    console.log(result);
  }
}); 
```

如果您有几分钟的时间，请阅读[jQuery 的通信部分中的帖子，供 ASP.NET 开发人员使用](http://encosia.com/jquery-for-the-asp-net-developer/#communication)。当您继续沿着这条道路前进时，您会发现很多有用的信息。

注意：helmus 留下的链接是相关的。在使用 ASMX ScriptServices 通过 JSON 进行通信方面，从 2.0 到现在没有发生根本性的变化。如果您对 .NET 中解决此问题的真正前沿方法感兴趣，那么 ASP.NET Web API 就是您的最佳选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T21:09:48.070

将此属性添加到您的 ProcessItem 方法：

```
[ScriptMethod(ResponseFormat = ResponseFormat.Json)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T21:10:49.020

在你的`$.post`电话中更加明确。

```
$.ajax({
    type:'post',
    url:'UpdateServer.asmx/ProcessItem',
    data: {'itemId':$(this).text()}
}).done(function (result) {
        alert(result);
}); 
```

# sql - 分页和分组

> ID：10166093
> 
> 赞同：0
> 
> 时间：2012-04-15T21:06:17.010
> 
> 标签：sql, sql-server, sql-server-2005

我的数据库存储在 sql server 2005 db 中。

此查询执行时间不到一秒：

```
SELECT * FROM ( 

SELECT  ROW_NUMBER() OVER ( ORDER BY tblOrders.orderid ) AS RowNum,   
SUM(tblProducts.Price) as price
FROM tblOrders 
LEFT OUTER JOIN tblOrderDetails ON tblOrders.orderid = tblOrderDetails.OrderId 
LEFT OUTER JOIN tblProducts ON tblOrderDetails.ProductId = tblProducts.ProductId
GROUP BY tblOrders.orderid

) as x
where RowNum >=  21001 and RowNum <  21011 
```

虽然此查询需要 10 秒才能执行：

```
SELECT * FROM ( 

SELECT  ROW_NUMBER() OVER ( ORDER BY tblOrders.orderid ) AS RowNum,   
SUM(tblProducts.Price) as price, 
OrderDate
FROM tblOrders 
LEFT OUTER JOIN tblOrderDetails ON tblOrders.orderid = tblOrderDetails.OrderId 
LEFT OUTER JOIN tblProducts ON tblOrderDetails.ProductId = tblProducts.ProductId
GROUP BY tblOrders.orderid, tblOrders.OrderDate

) as x
where RowNum >=  21001 and RowNum <  21011 
```

为什么会有这样的差异？

所有表都有一个名为 id 的列，其中包含主键。不知道为什么 orderid 和 ProductId 也存在，因为我没有设计数据库。

/巴里

**更新**

OrderDate 是日期时间

**第二次更新**

请记住，三个表都有一个 id 列作为主键。但是，在表之间引用时会使用 orderid、productid 等。我不确定为什么要以这种方式实施，但我猜它非常错误。

```
tblOrders:
Id; int; no null; PK
OrderId; int; allow null
OrderDate; datetime; allow null

tblOrderDetails:
Id; int; no null; PK
OrderId; int; allow null
ProductId; int; allow null

tblProducts:
Id; int; PK; no null
ProductId; allow null
Price; money; allow null 
```

这是一个足够的查询执行计划吗？ -

![在此处输入图像描述](../Images/2918eafd755093ced573f2aebbf3ab86.png)

**第三次更新**

这只需一秒钟即可执行 -

```
SELECT  ROW_NUMBER() OVER ( ORDER BY tblOrders.orderid ) AS RowNum,   
SUM(tblProducts.Price) as price, 
OrderDate
FROM tblOrders 
LEFT OUTER JOIN tblOrderDetails ON tblOrders.orderid = tblOrderDetails.OrderId 
LEFT OUTER JOIN tblProducts ON tblOrderDetails.ProductId = tblProducts.ProductId
GROUP BY tblOrders.orderid, OrderDate 
```

而这只有 2 秒 -

```
SELECT * FROM (
  SELECT  ROW_NUMBER() OVER ( ORDER BY tblOrders.orderid ) AS RowNum,
  SUM(tblProducts.Price) as price,
  MAX(tblOrders.OrderDate) as OrderDate  -- do this instead of grouping
FROM tblOrders
  LEFT OUTER JOIN tblOrderDetails ON tblOrders.orderid = tblOrderDetails.OrderId
  LEFT OUTER JOIN tblProducts ON tblOrderDetails.ProductId = tblProducts.ProductId
GROUP BY tblOrders.orderid  ) as x 
```

但这需要10秒——

```
SELECT * FROM (
  SELECT  ROW_NUMBER() OVER ( ORDER BY tblOrders.orderid ) AS RowNum,
  SUM(tblProducts.Price) as price,
  MAX(tblOrders.OrderDate) as OrderDate  -- do this instead of grouping
FROM tblOrders
  LEFT OUTER JOIN tblOrderDetails ON tblOrders.orderid = tblOrderDetails.OrderId
  LEFT OUTER JOIN tblProducts ON tblOrderDetails.ProductId = tblProducts.ProductId
GROUP BY tblOrders.orderid  ) as x
where RowNum >=  21001 and RowNum <  21011 
```

where 子句增加了 8 秒。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T21:26:23.943

我敢打赌，在输出列表和分组子句中都包含“tblOrders.OrderDate”的甜甜圈会导致您的速度变慢。我建议你`SET STATISTICS IO ON`运行这两个查询，看看你如何在每个表上获得不同的扫描和搜索。

SQL 引擎很可能对考虑 OrderDate 列的第二个查询有一个截然不同的计划，从而导致更多的 CPU 处理或（更有可能）更多的磁盘 IO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T09:36:26.383

如果没有实际的表结构和执行计划，我无法准确回答，但如果 orderid 在 tblOrders 中是唯一的，那么最好从 group by 语句中删除 OrderDate 并在选择列表中将其添加为`min(tblOrders.OrderDate) as OrderDate`. 它应该给出相同的结果（如果 tblOrders.orderid 是唯一键）但工作得更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T21:11:48.927

没有执行计划就无法回答这个问题，但我可以猜测：

*   附加列可能会阻止使用索引
*   慢查询的基数很高
*   OrderDate 的统计信息不知何故已过时 (exec sp_updatestats)

更新：您发布的执行计划确实很可怕。

创建索引：

```
create unique nonclustered index x0 on tblOrder(orderid) include (OrderDate)
create unique nonclustered index x1 on tblProduct (productid) include (Price)
create nonclustered index x2 on tblOrderDetails(orderid, ProductId) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T23:04:42.760

什么是订单日期？约会时间？虽然这些查询看起来非常相似，但我怀疑 OrderDate 包含时间信息，因此排序和分组要昂贵得多（并导致第二个查询的子查询中有更多行）。

考虑以下更改：

```
SELECT RowNum, price, DD = DATEADD(DAY, DD, '19000101') FROM (     
SELECT  ROW_NUMBER() OVER ( ORDER BY tblOrders.orderid ) AS RowNum,   
SUM(tblProducts.Price) as price, 
DATEDIFF(DAY, '19000101', tblOrders.OrderDate) as DD
FROM tblOrders 
LEFT OUTER JOIN tblOrderDetails ON tblOrders.orderid = tblOrderDetails.OrderId 
LEFT OUTER JOIN tblProducts ON tblOrderDetails.ProductId = tblProducts.ProductId
GROUP BY tblOrders.orderid, DATEDIFF(DAY, '19000101', tblOrders.OrderDate)

) as x
where RowNum >=  21001 and RowNum <  21011
ORDER BY RowNum; 
```

在 SQL Server 2008 或更高版本中，您可以将其简化为`CONVERT(DATE, OrderDate)`...

# c# - WCF 跟踪和消息日志不会在服务主机（服务器）端写入日志文件

> ID：10166098
> 
> 赞同：2
> 
> 时间：2012-04-15T21:07:08.887
> 
> 标签：c#, wcf, logging, web-config, trace

我的 WCF 服务出现了某种错误。

我需要确定发生了什么，因此我尝试启用服务跟踪日志记录。

我遵循了规定的指导方针并使用[wcf 配置编辑器](http://msdn.microsoft.com/en-us/library/ms732009.aspx)在我的客户端和服务器中设置跟踪和消息日志记录。

跟踪在客户端工作正常，但在这种情况下消息的用途有限，因为它们只是表明真正的故障发生在服务器上，我应该检查服务器日志：

> [接收对http://localhost:24162/MembershipService.svc](http://localhost:24162/MembershipService.svc)的 HTTP 响应时出错 。这可能是由于服务端点绑定未使用 HTTP 协议。这也可能是由于服务器中止了 HTTP 请求上下文（可能是由于服务关闭）。有关更多详细信息，请参阅服务器日志。

我在调试模式下运行，所以本例中的服务器是在端口 24162 上运行的 asp.net 开发服务器。

我的服务主机的 web.config 的诊断部分：

```
 <system.diagnostics>
<sources>
  <source propagateActivity="true" name="System.ServiceModel" switchValue="Verbose,ActivityTracing">
    <listeners>
      <add type="System.Diagnostics.DefaultTraceListener" name="Default">
        <filter type="" />
      </add>
      <add name="ServiceModelTraceListener">
        <filter type="" />
      </add>
    </listeners>
  </source>
  <source name="System.ServiceModel.MessageLogging" switchValue="Verbose,ActivityTracing">
    <listeners>
      <add type="System.Diagnostics.DefaultTraceListener" name="Default">
        <filter type="" />
      </add>
      <add name="ServiceModelMessageLoggingListener">
        <filter type="" />
      </add>
    </listeners>
  </source>
</sources>
<sharedListeners>
  <add initializeData="C:\Logs\web_tracelog.svclog" type="System.Diagnostics.XmlWriterTraceListener, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
    name="ServiceModelTraceListener" traceOutputOptions="Timestamp">
    <filter type="" />
  </add>
  <add initializeData="C:\Logs\web_messages.svclog" type="System.Diagnostics.XmlWriterTraceListener, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
    name="ServiceModelMessageLoggingListener" traceOutputOptions="Timestamp">
    <filter type="" />
  </add>
</sharedListeners>
<trace autoflush="true" /> 
```

和 system.servicemodel 部分

```
<system.serviceModel>
        <diagnostics>
      <messageLogging logEntireMessage="true" logKnownPii="true" logMalformedMessages="true"
        logMessagesAtServiceLevel="true" logMessagesAtTransportLevel="true" />
      <endToEndTracing propagateActivity="true" activityTracing="true"
        messageFlowTracing="true" />
    </diagnostics>
</system.serviceModel> 
```

目录“C:\Logs”确实存在，并且我已授予“所有人”完全控制权。我还验证了 TRACE 常量的定义只是为了确定。

如您所见，我正在尝试捕获跟踪/消息日志记录必须提供的任何内容。什么都可以。但是，唉，我什么也没得到，nada，zilch。

在查看了该站点上的现有问题并进行了大量谷歌搜索后，遵循了一些建议（确保文件夹存在，验证用户对该文件夹具有适当的权限），我觉得没有更接近理解为什么我的跟踪没有写入文件. 有关如何解决跟踪日志记录的任何建议？是否有任何信息记录在其他地方，表明为什么跟踪不起作用？

供参考和未来的读者 -

我去[这里](http://rocksolidknowledge.com/ScreenCasts.mvc/Watch?video=WCFTracing.wmv)是为了获取服务跟踪日志配置说明。我在[这里](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/7a372b9e-8e2a-4704-a96e-95cf66a7e6c2)和[这里](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/690b86c2-6462-44a1-bb1e-a0ddf6a4dc83/)尝试解决未写入的日志文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T21:37:36.197

大约一个月前，我在跟踪日志记录工作后写了[这篇文章。](http://davintryon.blogspot.co.uk/2012/03/wcf-tracing-raw-soap-xml.html)看看对你有没有帮助。在你的配置中没有什么看起来不正确。但是，也许从我的配置重新开始将有助于阐明这种情况。

# jquery - 通过 jquery 加载的 TinyMCE 错误

> ID：10166099
> 
> 赞同：3
> 
> 时间：2012-04-15T21:07:14.123
> 
> 标签：jquery, drop-down-menu, tinymce, jquery-load

当我通过 jquery 加载 tinymce 时，我遇到了这种奇怪的错误`load`，

![在此处输入图像描述](../Images/8ef858be950245ded7090bf0efd261d8.png)

**第**一次单击下拉列表****从**列表中选择一个项目**（项目符号列表**、**编号列表**、**样式列表**、**段落列表**）后，当我通过 jquery 加载重新加载表单时，我得到了如图所示的错误。**

 **任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T23:16:26.507

jQuery 将下拉元素附加到正文标记，而不是在您创建的编辑器中。虽然这修复了一些 IE 问题，但它无法处理动态加载的编辑器 dom 元素，从而使页面上的下拉元素搁浅。

加载/卸载编辑器时，通过 jQuery 删除页面上的所有 tinymce 下拉菜单：

```
$(".mceListBoxMenu").remove(); 
```

我已经测试了这个解决方案，它工作正常。**

# jquery - 参数中缺少 ) 点亮

> ID：10166101
> 
> 赞同：-2
> 
> 时间：2012-04-15T21:07:15.887
> 
> 标签：jquery

我在参数列表之后收到一条错误消息，上面写着 missing ) 并且不知道为什么。

```
function getInboxUnreadMessagesCount(displayElementID)
{
$.get(<?php echo base_url(); ?>'dashboard/getInboxUnreadMessagesCount', function(data)
{
    $messageCountJSON = data; 
    if(displayElementID != null && displayElementID != undefined && displayElementID != '')
{
    //$('#'+displayElementID).html($messageCountJSON);
    if(parseInt($('#'+displayElementID).text()) < parseInt($messageCountJSON))
    {
        $.jGrowl("You have received a new private message!", {theme : 'information'});
        $('#'+displayElementID).html($messageCountJSON).css({"display":"block"});
    }
    if(parseInt($messageCountJSON) == 0)
    {
        $('#'+displayElementID).html($messageCountJSON).css({"display":"none"});
    }
}
}, 'json');
} 
```

关于为什么会这样的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T21:15:46.533

究竟`<?php echo base_url(); ?>`输出什么？我假设只是一个裸字符串，所以你最终会得到如下代码：

```
$.get(http://somepath.com'dashboard/getInboxUnreadMessagesCount', function(){...}); 
```

显然那是行不通的。你可能想要：

```
$.get('<?php echo base_url(); ?>/dashboard/getInboxUnreadMessagesCount', function(){...}); 
```

这样，基本 url 实际上最终会*在*`$.get`.

# node.js - Nodejs删除事件监听器

> ID：10166104
> 
> 赞同：10
> 
> 时间：2012-04-15T18:59:09.787
> 
> 标签：node.js

希望得到一些帮助。我是 Nodejs 的新手，想知道是否可以删除这个自定义事件发射器。大部分代码来自 Pedro Teixeira 的 Hand on nodejs。我在底部的功能是尝试删除您在书中设置的自定义事件发射器。

```
var util = require('util');
var EventEmitter = require('events').EventEmitter;

// Pseudo-class named ticker that will self emit every 1 second.
var Ticker = function()
{
    var self = this;
    setInterval(function()
    {
        self.emit('tick');
    }, 1000);   
};

// Bind the new EventEmitter to the sudo class.
util.inherits(Ticker, EventEmitter);

// call and instance of the ticker class to get the first
// event started. Then let the event emitter run the infinante loop.
var ticker = new Ticker();
ticker.on('tick', function()
{
    console.log('Tick');
});

(function tock()
{
    setInterval(function()
    {
        console.log('Tock');
        EventEmitter.removeListener('Ticker',function()
            {
                console.log("Clocks Dead!");
            });
    }, 5000);
})(); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T03:32:14.333

您需要使用 ticker 对象的 removeListener 方法，而不是 EventEmitter。第一个参数是事件名称，第二个参数是要删除的事件监听器的链接。

此代码应该有效：

```
var util = require('util');
var EventEmitter = require('events').EventEmitter;

// Pseudo-class named ticker that will self emit every 1 second.
var Ticker = function()
{
    var self = this;
    setInterval(function()
    {
        self.emit('tick');
    }, 1000);   
};

// Bind the new EventEmitter to the sudo class.
util.inherits(Ticker, EventEmitter);

// call and instance of the ticker class to get the first
// event started. Then let the event emitter run the infinante loop.
var ticker = new Ticker();
var tickListener = function() {
    console.log('Tick');
};
ticker.on('tick', tickListener);

(function tock()
{
    setTimeout(function()
    {
        console.log('Tock');
        ticker.removeListener('tick', tickListener);
        console.log("Clocks Dead!");
    }, 5000);
})(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-30T12:48:53.143

[https://nodejs.org/api/events.html#events_emitter_removelistener_eventname_listener](https://nodejs.org/api/events.html#events_emitter_removelistener_eventname_listener) 如果您检查使用上面的链接，`EventEmitter.removeListener("eventName",listenerFunc)` 那么假设我有以下情况

```
const {EventEmitter} =require("events")
//lets construct our emitter object
const myEmitter=new EventEmitter()
//and our listener which has to be a named func if we want to identify it later for removing
function myListenerFunc(d){
    console.log(d)
    }
//adding the emitter
myEmitter.on("data",myListenerFunc)
//lets remove it after a while
//... some time passed something was done 
//... some more time passes something  else was done
//we dont need the listener anymore lets remove it
myEmitter.removeListener("data",myListenerFunc)
//alternatively if you want to remove all listeners
myEmitter.removeAllListeners(["data"/* if you need list all the event names in this array*/]) 
```

# asp.net-mvc-3 - MVC 3下拉列表未绑定到模型

> ID：10166108
> 
> 赞同：1
> 
> 时间：2012-04-15T21:07:43.970
> 
> 标签：asp.net-mvc-3, razor

在我的应用程序中，我有一个下拉列表来表示不同的选择。请注意，这`Paragraph`是一个模型，该部分只是模型中的一个字段。

```
@Html.DropDownList("Sections") 
```

这是我的控制器。

```
public ActionResult Edit(int id)
{
    var paragraph = db.Paragraphs.Find(id);

    ViewBag.Sections = new SelectList(
        db.Sections.Select(s => new { s.ID, s.Name }),
        "ID", "Name", paragraph.SectionID
    );

    return View(paragraph);
}

[HttpPost]
public ActionResult Edit(Paragraph paragraph, HttpPostedFileBase document)
{
    if (ModelState.IsValid)
    {
        // Do some stuff.
    }

    ViewBag.Sections = new SelectList(
        db.Sections.Select(s => new { s.ID, s.Name }),
        "ID", "Name", paragraph.SectionID
    );

    return View(paragraph);
} 
```

当我提交表单时，下拉列表未绑定到模型。造成`ModelState.IsValid`虚假，使我的生活变得可怕。有什么建议么？

**编辑**：当我提交表单时，我收到以下错误：

```
There is no ViewData item of type 'IEnumerable<SelectListItem>' that has the key 'Sections'. 
```

**编辑**：当我尝试提交文件时，我似乎只收到前面的错误。

**编辑**：模型

```
public class Paragraph
{
    public int ID { get; set; }

    [Required]
    public int Major { get; set; }

    [Required]
    public int Minor { get; set; }

    [Required(ErrorMessage = "Name is required")]
    [StringLength(4000)]
    public string Name { get; set; }

    public int SectionID { get; set; }
    public virtual Section Section { get; set; }
} 
```

形式：（很多。）

```
<form class="form-horizontal" action="/Paragraph/Edit" method="post" enctype="multipart/form-data">
    <fieldset>
        <div class="control-group">
            <label class="control-label" for="section">Section</label>
            <div class="controls">
                @Html.DropDownList("Sections")
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="major">Major</label>
            <div class="controls">
                <input type="number" class="input-large" name="major" value="@Model.Major" />
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="minor">Minor</label>
            <div class="controls">
                <input type="number" class="input-large" name="minor" value="@Model.Minor" />
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="name">Name</label>
            <div class="controls">
                <input type="text" class="input-large" name="name" value="@Model.Name" />
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="document">Document</label>
            <div class="controls">
                <input type="file" class="input-file" name="document" />
            </div>
        </div>
        <div class="form-actions">
            <input type="submit" class="btn btn-primary" value="Save" />
            <a class="btn" href="/Paragraph/Show/@Model.ID">Cancel</a>
        </div>
    </fieldset>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T21:47:18.457

只是想知道为什么不使用 Html.TextBoxFor 等强类型助手？如果需要，您可以传递可选的 html 属性

我会做你的下拉列表

```
@Html.DropDownListFor(model =>model.SectionID,(IEnumerable<SelectListItem>) ViewBag.Sections) 
```

其他

```
@Html.HiddenFor(model =>model.ID)
@Html.TextBoxFor(model =>model.Name)
@Html.TextBoxFor(model =>model.Major)
@Html.TextBoxFor(model =>model.Minor) 
```

文件可以`<input type="file" class="input-file" name="document" />`

那应该为您提供要绑定的模型。您一定会得到正确的名称等。此外，我将 ID 作为表格的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T01:20:05.580

将您的 HTML 代码更改为：

```
@Html.DropDownListFor(m => m.SectionID, ViewBag.Sections as SelectList) 
```

如果您没有此页面的模型，请使用以下代码：

```
@Html.DropDownList("Sections", ViewBag.Sections as SelectList) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T00:14:37.247

这已经晚了，但迟到总比没有好。当您使用它提供的助手之一时，它会在后台`HtmlHelper`生成名称。`input`此名称的生成格式为`Model.Field`. 例如，带有“名称”字段的段落将变为`Paragraph.Name`.

接受一个参数的定义`DropDownList`使用下拉列表的名称作为`input`虽然的名称。因此，调用`DropDownList("Sections")`将创建`input`一个名为“Sections”的名称。

但最后，我决定让步给 Razor 并使用内置的 HTML 帮助程序。所以我的下拉列表代码如下所示`DropDownListFor(vm => vm.Paragraph.SectionID, Models.Sections)`：

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T15:25:09.190

太奇怪了！我以前用

```
@Html.DropDownList("permissionsID", String.Empty) 
```

它工作正常 - 突然间，我收到了同样的问题。ddl 未在 Create (posted) 控制器方法上提交其选定的值）

所以我用

```
@Html.DropDownListFor(model => model.permissionID, (IEnumerable<SelectListItem>)ViewBag.permissionsID) 
```

效果很好！

但是，我的旧控制器直到今天仍然使用旧方法工作 - 只是它不喜欢我的新控制器！

实在是太不合逻辑了……

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-27T23:38:26.790

朋友在做级联下拉列表时遇到了同样的问题

并且没有为什么要绑定父下拉列表。所以我所做的就是以与很快相同的方式填充父下拉列表。创建了一个动作，在 json 上调用它并使用 jquery 填充它。

我对控制器的操作：

```
public ActionResult GetStates()
    {
        if (Request.IsAjaxRequest())
        {
            using (MyModel banco = new myModel())
            {

                return Json(new SelectList(banco.SyStates.ToList(), "StateId", "StateName"), JsonRequestBehavior.AllowGet);

            }
        }
        return View();

    } 
```

风景：

```
 <select id="StateList" name="StateList"></select> 

<script>

   $(document).ready(function () {

         var URL = "/ControllerName/GetStates";
         $.getJSON(URL, function (data) {

         var items = '<option>Selecione o estado</option>';
         $.each(data, function (i, State) {
             items += "<option value='" + State.Value + "'>" + State.Text + "</option>";
             // state.Value cannot contain ' character. We are OK because state.Value = cnt++;

         });
         $('#StateList').html(items);
         //$('#CitiesTrID').show();

     })

 }); 
```

得到级联示例：http: [//blogs.msdn.com/b/rickandy/archive/2012/01/09/cascasding-dropdownlist-in-asp-net-mvc.aspx](http://blogs.msdn.com/b/rickandy/archive/2012/01/09/cascasding-dropdownlist-in-asp-net-mvc.aspx)

# knockout.js - 在自定义剔除绑定的初始化和更新之间存储状态的首选方法是什么？

> ID：10166110
> 
> 赞同：57
> 
> 时间：2012-04-15T21:07:54.923
> 
> 标签：knockout.js

目前我正在使用 jQuery 数据存储 dom 元素的状态。

```
ko.bindingHandlers.customValue = {

    init: function init(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        var state = { isEditing: false };        
        $(element).focus(function focus() {
            state.isEditing = true;
        }).blur(function blur() {
            state.isEditing = false;            
        }).data("customBinding", state);

    },

    update: function update(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        // ignore if updating
        if (!$(element).data("customBinding").isEditing) {
            // handle update if they are not updating                                
        }
    }

};​ 
```

有没有更好的地方来存储每个不需要 dom 的绑定的状态？bindingContext 可以用于存储绑定的每个实例的状态吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-04-17T01:17:18.687

这`bindingContext`是一种可能性，但仅用于将数据从`init`第`update`一次触发绑定传递。下次`update`发生火灾时，它将不再存在。

对于存储这种类型的状态，实际上有两种选择：

1-如您所说，在元素上。您也可以使用 jQuery`$.data`或 KO 包含的 API 来执行此操作，`ko.utils.domData.get(element, key)`并且`ko.utils.domData.set(element, key, value)`.

2- 如果合适，将此类信息放入您的视图模型中。用于指示的标志`isEditing`不一定在视图模型中不合适。我个人喜欢将这种类型的“元数据”作为可观察对象的子可观察对象，例如：

```
var name = ko.observable("Bob");
name.isEditing = ko.observable(false); 
```

您将能够绑定`name`and `name.isEditing`。

这有一些优点：

*   保持视图模型相当干净，因为您没有引入新的顶级属性
*   保持子可观察对象与其父可观察对象相关联（不需要`nameIsEditing`等）
*   当转换为带有子可观察对象之类`ko.toJSON`的JSON时，它的父对象被解包时将被简单地丢弃。`isEditing`因此，您不会将不必要的值发送回服务器。
*   在这种情况下，它还具有可用于视图模型中的其他计算或绑定 UI 中的多个元素的优点。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-15T01:56:40.453

将数据附加到元素上很好，例如，Knockout 在内部使用此方法进行控制流绑定（if、with 等）。

另一种方法是仅使用该`init`函数并使用计算的 observable 来处理更新。我在[重复](https://github.com/mbest/knockout-repeat)绑定中使用此方法。以下是重要部分：

```
ko.bindingHandlers['repeat'] = {
    'init': function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        ...
        // set up persistent data
        var lastRepeatCount = 0;
        ...
        ko.computed(function() {
            var repeatCount = ko.utils.unwrapObservable(valueAccessor());
            ...
            // Remove nodes from end if array is shorter
            for (; lastRepeatCount > repeatCount; lastRepeatCount--) {
                ...
            }
            ...
            // Add nodes to end if array is longer (also initially populates nodes)
            for (; lastRepeatCount < repeatCount; lastRepeatCount++) {
                ...
            }
        }, null, {'disposeWhenNodeIsRemoved': placeholder});
        ...
    }
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-24T00:00:10.270

我经常使用这种模式：

```
define(['knockout'], function(ko) {
  var interInstanceVariable = null;

  function Tree(element) {
    var privateInstanceVariable = null;

    function privateInstanceMethod() {}

    this.publicInstanceMethod = function() {}
  }

  ko.bindingHandlers.cannDendrogram = {
    init: function(element, valueAccessor) {
      $(element).data('tree', new Tree(element));
    },
    update: function(element, valueAccessor) {
      var tree = $(element).data('tree');
      tree.publicMethod();
    }
  };
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-12-29T15:38:06.167

我意识到这个问题很老，但我在这里偶然发现了这种方法，所以我想我会加入一种更现代的 ko 方法。

您可以直接将属性添加到 bindingContext.$data。我选择了一个烦人的变量名“___IsEditing”，以避免潜在的冲突，但你明白了......

```
ko.bindingHandlers.customValue = {

init: function init(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
    bindingContext.$data.___IsEditing = false;        
    $(element).focus(function focus() {
        bindingContext.$data.___IsEditing = true;
    }).blur(function blur() {
        bindingContext.$data.___IsEditing = false;            
    }).data("customBinding", state);

},

update: function update(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
    // ignore if updating
    if (bindingContext.$data.___IsEditing) {
        // handle update if they are not updating                                
    }
} 
```

};​</p>

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2016-12-29T23:52:14.690

通过在函数内部定义公共数据，我使用一个函数来为 init 和 update 创建一个公共范围。

# .net - 在 azure 上找不到程序集“Microsoft.IdentityModel”错误

> ID：10166114
> 
> 赞同：4
> 
> 时间：2012-04-15T21:08:12.173
> 
> 标签：.net, asp.net-mvc-3, azure

我正在为我的 MVC3 Web 应用程序使用 ACS 身份验证。它在我的本地机器上运行良好。但是当我将它上传到 Azure 时。我收到了这个错误。我设置 CopyLocal=True ，请帮助

```
Unable to find assembly 'Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'. 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Runtime.Serialization.SerializationException: Unable to find assembly 'Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T16:31:39.023

有关此的更多信息。复制本地，即。确保 Microsoft.IdentityModel.dll 位于 bin 目录中，除非您的代码使用 RoleEnvironment API，否则它将起作用。如果是这种情况，那么您将遇到以下已知问题：

[http://msdn.microsoft.com/en-us/library/windowsazure/hh403974.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh403974.aspx)

在这种情况下，Microsoft.IdentityModel 需要存在于 Azure VM 的 GAC 中。为此，请使用启动任务。这篇文章描述了两种方法来实现这一点：

[http://blogs.infosupport.com/adding-assemblies-to-the-gac-in-windows-azure/](http://blogs.infosupport.com/adding-assemblies-to-the-gac-in-windows-azure/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-22T20:22:09.457

我为微软工作。由于点击率低，我们已经在 hh403974.aspx 删除了这篇文章，但我看到它仍然从这个帖子中获得了一些推荐，所以我将粘贴下面的文章内容。

**调用 RoleEnvironmentAPI 时无法找到程序集“Microsoft.IdentityModel”**

适用于：适用于 SDK1.3 及更高版本，使用完整的 IIS Web 角色和 Windows Identity Foundation。

症状：您在第一次调用 RoleEnvironment 方法时遇到以下异常。

[SerializationException: 无法找到程序集 'Microsoft.IdentityModel，Version=3.5.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35'。]

原因：Windows Identity Foundation 程序集未正确安装到 Azure 虚拟机。

解决方法：使用启动任务在虚拟机上重新安装[Windows Identity Foundation 包。](http://www.microsoft.com/en-us/evalcenter/evaluate-windows-identity-foundation)

有关使用启动任务的详细信息，请参阅 在 Azure 中[运行启动任务。](http://msdn.microsoft.com/en-us/library/azure/hh180155.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T21:10:41.010

您的 Azure 计算机可能缺少[WIF 运行时](http://www.microsoft.com/download/en/details.aspx?id=17331)。

# python - 无类型对象不可迭代

> ID：10166119
> 
> 赞同：0
> 
> 时间：2012-04-15T21:08:57.467
> 
> 标签：python, python-3.x

在有人告诉我再搜索网络之前，我已经搜索了一个多小时。

所以我的任务要求我使用一个导入的模块，该模块包含一个 safeOpen 函数，该函数为主模块selectiveFileCopy 打开一个文件。但是当我调用 safeOpen 函数时，它说我要打开的文件是 None 类型，因此不可迭代。我不确定为什么会这样。

这是一些代码：

```
def safeOpen(prompt, openMode, errorMessage ):
   while True:
      try:
         open(input(prompt),openMode)
         return 
      except IOError:
         return(errorMessage)

def selectivelyCopy(inputFile,outputFile,predicate):
   linesCopied = 0
   for line in inputFile:
      outputFile.write(inputFile.predicate)
      if predicate == True:
         linesCopied+=1
   return linesCopied

inputFile = fileutility.safeOpen("Input file name: ",  "r", "  Can't find that file")
outputFile = fileutility.safeOpen("Output file name: ", "w", "  Can't create that file")
predicate = eval(input("Function to use as a predicate: "))   
print(type(inputFile)) 
print("Lines copied =",selectivelyCopy(inputFile,outputFile,predicate)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T21:11:46.253

您必须返回文件对象本身：

```
return open(input(prompt),openMode) 
```

* * *

还有一些评论。您的大部分代码都没有什么意义。

1.  在`safeOpen`中，您有一个无限循环，但在第一次迭代后无条件地离开它。你根本不需要这个循环。
2.  `safeOpen`返回文件对象或错误消息。一般来说，函数应该总是返回类似类型的对象，并使用异常来表示错误。
3.  `safeOpen`吞下异常，因此不如内置安全`open`。
4.  `inputFile.predicate`尝试读取`predicate`从文件对象调用的属性`inputFile`。这将产生一个，`AttributeError`因为不存在这样的谓词。如果要将谓词函数传递给函数，请将其称为`predicate(object)`.
5.  `predicate == True`仅当`predicate`是布尔值时才有效，这不是您想要的。
6.  行数实际上并不计算复制的行数。

# compression - zlib：`deflate` 和 `compress` 函数之间的区别

> ID：10166122
> 
> 赞同：23
> 
> 时间：2012-04-15T21:09:25.577
> 
> 标签：compression, zlib, deflate

zlib中的`deflate()`和函数有什么区别？`compress()`

我浏览了在线示例，其中一些使用了 deflate，而另一些则使用了 compress。

我应该如何决定使用哪种情况而不是另一种情况？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-04-16T03:36:59.337

`compress()`用于在单次调用中压缩数据，并且始终压缩为*zlib*格式，这是一种带有 2 字节标头和 4 字节校验值尾部的压缩数据。 `compress()`是单独使用的。

`deflate()`用于一次压缩数据块，和/或压缩为其他格式，例如*gzip* -wrapped 或*raw*，以及其他选项，例如内存级别和压缩策略。

`compress()`如果您同时拥有所有可用数据并且有足够的内存来保存结果，并且您想要默认的压缩格式、内存使用和策略，您会使用。否则，您将使用`deflate()`.

deflate() 本身不使用。您需要使用`deflateInit()`或`deflateInit2()`初始化所`z_stream`使用的结构`deflate()`。然后您调用`deflate()`一次或多次以获取数据以压缩并提供结果。最后，`deflateEnd()`调用释放结构中使用的内存资源。您可以阅读*zlib.h*和[http://zlib.net/zlib_how.html](http://zlib.net/zlib_how.html)中的文档以获取更多信息。

# apache - 如何将具有多个参数的链接重定向到简单的 .html 链接

> ID：10166125
> 
> 赞同：0
> 
> 时间：2012-04-15T21:09:45.970
> 
> 标签：apache, mod-rewrite

旧链接： [http ://example.com/index.php?option=com_content&view=article&id=17&Itemid=52](http://example.com/index.php?option=com_content&view=article&id=17&Itemid=52)

新链接： [http ://example.com/newlink.html](http://example.com/newlink.html)

非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T06:01:52.180

从给出的 url，我猜你正在使用 Joomla!。您可以很好地在后端打开 Joomla 自己的 SEO 功能，或者查看 extensions.joomla.org 的 SEO 组件。

# windows - WP7.1 (7.5) 应用程序栏图标是“X”？

> ID：10166128
> 
> 赞同：0
> 
> 时间：2012-04-15T21:10:16.370
> 
> 标签：windows, default, windows-phone

当我包含我的应用程序栏的图标 URI 时，我将它们放在文件夹中......但它仍然显示默认的“X”图标而不是我的。这是我的代码：

```
<phone:PhoneApplicationPage.ApplicationBar>
    <shell:ApplicationBar IsVisible="True" IsMenuEnabled="True">
        <shell:ApplicationBarIconButton IconUri="/Images/help.png" Text="Help"/>
        <shell:ApplicationBar.MenuItems>
            <shell:ApplicationBarMenuItem Text="about"/>
        </shell:ApplicationBar.MenuItems>
    </shell:ApplicationBar>
</phone:PhoneApplicationPage.ApplicationBar> 
```

它显示的默认图标是：

![默认图片](../Images/84f8ecc23a7677828dab7e65bcb9b7ab.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T21:13:03.060

注意如何编译项目。特别检查要包含的图标是否具有此属性： **构建操作：内容**

# android - 使用robotium测试appwidget

> ID：10166143
> 
> 赞同：0
> 
> 时间：2012-04-15T21:11:33.070
> 
> 标签：android, unit-testing, testing, android-appwidget, robotium

是否可以退出应用程序，长按主屏幕，选择一个应用程序小部件，安装它，然后使用robotium单击它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T00:11:58.737

如果您可以找到支持应用小部件的主屏幕的源代码，您也许可以使用 Robotium 为主屏幕应用编写测试，编写可以与您的应用小部件交互的测试。

# jquery - Ruby on Rails - Carrierwave，无法上传多个图像

> ID：10166144
> 
> 赞同：0
> 
> 时间：2012-04-15T21:11:35.533
> 
> 标签：jquery, ruby-on-rails, ruby, image, carrierwave

我正在使用[jQuery File Upload](http://blueimp.github.com/jQuery-File-Upload/)和 Carrierwave 来上传图像。

我设法通过遵循[本手册](https://github.com/blueimp/jQuery-File-Upload/wiki/Rails-setup-for-V6)使其工作，并且它非常适合上传单个图像，但是一旦我添加 HTML5 多个属性以允许一次上传多个图像并选择多个图像，每个请求都会出现以下错误。

```
NoMethodError in Advertiser::MediaController#create
undefined method `[]' for nil:NilClass 
```

每个请求对我来说似乎都是一样的，我似乎无法弄清楚为什么它不能上传多张图片但可以上传单张图片，请注意，如果我启用了多个属性，我什至不能上传一张图片但是一旦我取下它，再次上传作品。[jQuery File Upload](http://blueimp.github.com/jQuery-File-Upload/)完全能够上传多个图像，您可以在他们的演示中查看它。

任何关于在哪里挖掘的提示将不胜感激。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:46:39.100

```
 def create_from_uploader
    p_attr = params[:photo]
    p_attr[:photo] = p_attr[:photo][0] if p_attr[:photo].is_a?(Array)
    @photo = @user.photos.build(p_attr)
    if @photo.save
      flash[:notice] = "Succes"
    end
  end 
```

在你的haml视图中，这样的表单的html选项 - html：{multipart：true}，对于file_field，使用multiple：true

# iphone - 重叠 UITableViewCell 内容视图

> ID：10166147
> 
> 赞同：2
> 
> 时间：2012-04-15T21:11:50.487
> 
> 标签：iphone, ios, cocoa-touch, uikit

我有这张表格，其单元格如下所示： ![UITabelViewCell](../Images/1a86eb4f7b94ce9f67884d9a0548108a.png)
如您所见，每个单元格的顶部边框都应该与上面的单元格重叠。现在，这个边框是背景的一部分（到目前为止没有重叠）。

现在，我已将边框与背景分开，我的单元格创建代码如下所示：

```
#define QAImage(NAME) [[[UIImageView alloc] initWithImage:[UIImage imageNamed:NAME]] autorelease]

- (UITableViewCell*) tableView:(UITableView*)table cellForRowAtIndexPath:(NSIndexPath*)index
{
    UITableViewCell *cell = [table dequeueReusableCellWithIdentifier:@"Entry"];
    if (cell == nil)
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                         reuseIdentifier:@"Entry"] autorelease];
        cell.backgroundView = QAImage(@"bg-cell.png");
        cell.selectedBackgroundView = QAImage(@"bg-cell-sel.png");
        cell.selectionStyle = UITableViewCellSelectionStyleGray;
        UIImageView *img = QAImage(@"disclosure.png");
        img.highlightedImage = [UIImage imageNamed:@"disclosure-sel.png"];
        cell.accessoryView = img;
        CGRect r = cell.frame;
        r.size.height = table.rowHeight;
        r.size.width = table.frame.size.width;
        cell.frame = r;
        r = cell.contentView.frame;
        r.origin = CGPointMake(13, 13);
        r.size.width -= 8 + img.frame.size.width;
        r.size.height -= 25;
        [cell.contentView addSubview:[[[TagView alloc] initWithFrame:r] autorelease]];
        img = QAImage(@"cell-top.png");
        img.highlightedImage = [UIImage imageNamed:@"cell-top-sel.png"];
        img.opaque = NO;
        r = img.frame;
        r.origin = CGPointMake(0, 1 - r.size.height); // The (supposed) overlapping happens here.
        img.frame = r;
        cell.contentView.clipsToBounds = NO;
        [cell.contentView addSubview:img];
    }
    // Here I set the title. (omitted)
    return cell;
} 
```

问题是，**仅当我在表格中向上滚动时才会显示边框**，否则它本身会被其上方的单元格重叠。（错误的方法。）

我试过`[cell setNeedsDisplay]`了，每次请求一个单元格时都`-tableView:willDisplayCell:forRowAtIndexPath:`添加边框（ ）（这显然会导致多次绘制并且看起来不太好；无论如何，它仍然不能解决我的问题）并设置.`cell-top.png``img.layer.zPosition = 2`

如何强制 UIImageView 始终保持在顶部？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-15T21:32:48.833

我的建议是将 UITableView 子类化并覆盖 layoutSubviews 以将可见单元格视图放入您希望它们处于这样的 z 顺序中：

```
- (void)layoutSubviews {
    [super layoutSubviews];
    NSArray *sortedIndexPaths = [[self indexPathsForVisibleRows] sortedArrayUsingSelector:@selector(compare:)];
    for (NSIndexPath *path in sortedIndexPaths) {
        UITableViewCell *cell = [self cellForRowAtIndexPath:path];
        [self bringSubviewToFront:cell];
    }
} 
```

这可能太慢了，或者您可能需要更改`bringSubviewToFront:`为`sendSubviewToBack:`，但希望这能给您一个尝试的方向。

编辑：如果您的目标是 iOS 6，现在的另一个选择是使用 UICollectionView，它内置了对 z 排序的支持。

# c# - 显示确认框不起作用

> ID：10166149
> 
> 赞同：0
> 
> 时间：2012-04-15T21:12:10.677
> 
> 标签：c#, asp.net

我在使这个 javascript 框出现时遇到问题，我认为我做错了，但无法弄清楚它是什么。请原谅以前没有使用过 Page.ClientScript。基本上，我想显示这个框，如果他们单击“确定”，它将继续处理我的逻辑，否则如果他们单击“取消”，它将使它们保持在同一页面上

这就是我所拥有的。

```
Page.ClientScript.RegisterStartupScript(this.GetType(), 
"ConfirmBox", "Confirm('The numbers selected are not in the directory,
Do you wish to continue?');", true); 
```

我将不胜感激任何帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T21:13:09.607

Javascript 区分大小写。
你的意思是`confirm`。

# ruby - 为什么我们使用“class << self”表达式？

> ID：10166150
> 
> 赞同：4
> 
> 时间：2012-04-15T21:12:10.910
> 
> 标签：ruby

在 Ruby 中，有几种方法可以声明一个类方法。

我们有这两种形式...

```
class Dog

  def self.species
    puts "I'm a dog."
  end

  def Dog.species_rly?
    puts "Still a dog."
  end

end 
```

而这另一种更长的形式……

```
class Dog
  class << self
    def species_srsly?
      puts "OK, fine. I'm a cat."
    end
  end
end 
```

为什么使用最后一种形式？有什么比这样做更好的呢？

```
class Dog
  def Dog.some_method
    # ...
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T21:20:11.953

[这本精彩的书](http://pragprog.com/book/ppmetr/metaprogramming-ruby)说这三种语法是相同的。选择哪一个是个人喜好问题。它还说`def Dog.some_method`Ruby 社区不赞成类名语法 ( )。我明白为什么：你在无缘无故地复制信息。如果您重命名您的类，您还必须更新所有方法定义。

因此，您可以在其余两种语法之间自由选择 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T21:19:38.203

您会发现`class << self`只有在处理少量方法时表单才会更长。如果你要写，比如说，15 个类方法，突然间它变得清晰多了，重复性也少了很多。

归根结底，这是您使用的问题或个人风格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T21:19:51.980

绝对没有区别，这最终是一个偏好问题。有些人喜欢后者，因为它将所有“类”方法集中到一个块中，并且避免了必须写入`self.`每个方法定义。

前者使得每个方法在每个定义中都是显式的“类”方法这一事实。

我认为我永远不会使用`Dog.some_method`，因为它使重构比`self.some_method`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-15T21:23:18.253

技术上没有区别（至少我不知道）。

我避免

```
class Dog
  def Dog.species_rly?
    puts "Still a dog."
  end
end 
```

如果我更改类名，我必须在每个方法定义中更改它。同样，如果我将一个方法从一个类复制到另一个类（如果这样做，请先考虑，是否应该定义一个模块并包含它）。

如果我有一种或两种方法，我会使用：

```
class Dog

  def self.species
    puts "I'm a dog."
  end

end 
```

如果我有更多的类方法，那么我首先会想为什么。类方法通常只是不良设计的提示——也许您需要另一个（单例？）类。

如果我决定定义多个类方法，我会使用：

```
class Dog
  class << self
    def species_srsly?
      puts "OK, fine. I'm a cat."
    end
  end
end 
```

有时我将源文件中的类方法分开，并将实例方法放在另一个源文件中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-15T21:44:56.947

`class << self`是最少重复的。`def Dog.meth`在全班重复“狗”，并`def self.meth`重复“自我”。

额外的缩进也可能是您在单例类方法而不是常规实例化方法中的视觉指示。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-16T12:43:38.737

在 Dog 类中，self 是“Dog”类（每个类都有一个“类”对象，有时称为元类或特征类）。

以一种棘手的方式，ruby 中的所有方法都是实例方法。

```
def self.species 
```

在“类类”上声明一个物种方法，这使得它（表现得像）一个类方法。

相似地，

```
d = Dog.new
def d.bark; puts "woof"; end 
```

向“d”实例添加方法

至于两者的区别

```
class << self
  def species 
```

和

```
def self.species 
```

它们在功能上完成了同样的事情。正如其他人所提到的，选择一种格式而不是另一种格式是一种风格。def self.species 是声明“类”方法的常用方法。

我主要会使用

```
class << self
  attr_accessor :species
end 
```

如果我想让属性访问器在类级别而不是实例上操作。

理解这一点对于使用像包含的模块这样的钩子很重要

```
module Sound
  def self.included(host_class)
    def host_class.speak(sound)
      define_method(:bark) do
        sound
      end
    end
  end
end
class Dog
  include Sound
  speak "woof"
end
Dog.new.bark 
```

另外，为了完整性

```
class Dog
  def self.species
    puts self.to_s
  end
  def Dog.bark
    puts self.to_s
  end
end
class Spaniel < Dog; end 
```

species 方法在任何子类的 self 上定义，而 :bark 方法总是在 Dog 上定义（除非被覆盖）

# iphone - Mapkit 标注图像分辨率

> ID：10166152
> 
> 赞同：0
> 
> 时间：2012-04-15T21:12:21.167
> 
> 标签：iphone, image, annotations, mapkit

我已将注释图钉更改为客户图像，效果很好。然而，当它在地图视图中下降时，图像的边缘看起来有点粗糙。有谁知道如何锐化图像？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-10-26T13:56:23.297

我遇到了同样的问题，并通过使用 UIGraphicsImageRenderer 创建图像来解决它。现在他们很锋利。

```
let whiteImage = UIImage(named: "white")

let size = CGSize(width: 60, height: 60)

  let myImage = UIGraphicsImageRenderer(size: size).image { imageContext in
      let context = imageContext.cgContext
      whiteImage?.draw(in: CGRect(origin: .zero, size: CGSize(width: 70, height: 90)))
  }

annotationView!.image = myImage 
```

# php - 提交按钮后的ajax后台进程

> ID：10166155
> 
> 赞同：3
> 
> 时间：2012-04-15T21:12:32.087
> 
> 标签：php, jquery, ajax, submit

我发布的脚本工作正常，它只是在页面加载时在后台执行我的 php 代码。我不能做的是在按下提交按钮后在后台启动 php。我试图在正文，但我不知道如何将它与 ajax 链接.. 怎么办？谢谢！

```
<html>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js"></script>
<script src="http://malsup.github.com/jquery.form.js"></script>

<script type="text/javascript">
  $(document).ready(function() {
    $.ajax({
        url: 'trial.php',
        beforeSend: function() {
            // you could also put a spinner img or whatever here too..
            $("#myStatusDiv").html("started..");
        },
        success: function(result) {
            $("#myStatusDiv").html(result);
        }
    });
  });
</script>

</head>
<body>

</body>                                                                                                             

</body>                                     
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T21:15:11.823

当文档准备好加载时，您当前正在执行代码。您应该将此代码添加到按钮单击事件中。

**所以代替这个**：

```
$(document).ready(function() {
    //your code
}); 
```

**这样做**：

```
$(document).ready(function() {
    $('#buttonid').click(function() {
        //your code
    });
}); 
```

# c - 检查C中的整个字符数组是否只是数字，如果是则返回true？

> ID：10166157
> 
> 赞同：1
> 
> 时间：2012-04-15T21:12:57.133
> 
> 标签：c

我有一个数字字符串数组：

```
char numbers[5][10] = { "123456789", "0001234", "abc5xyz", "", "987654321" }; 
```

我将此数组传递给一个函数：

```
 for(i=0; i<5; i++) {
     MyFNatoi(numbers[i], &value);
     printf("array: '%s' int value: %d\n", numbers[i], value);
  } 
```

在这个函数中，我如何检查整个字符串是否只有数字，如果是则返回 true？到目前为止，我所拥有的是：

```
MyFNatoi(char *numArray, int *value) {

    int i;

    for (i = 0; i < 10; i++) {
        if (numArray[i] > 47 && numArray[i] < 58) {
            printf("%c", numArray[i] - 0);
            // sscanf(p, "%d", &value);
        }
    }
} 
```

这只是返回：

```
123456789array: '123456789' int value: -1217188485
0001234array: '0001234' int value: -1217188485
5array: 'abc5xyz' int value: -1217188485
array: '' int value: -1217188485
987654321array: '987654321' int value: -1217188485 
```

我试图让 value 变量等效于字符串。所以如果字符串是`123456789`，`value`应该是`123456789`。如果是`abc5xyz`，`value`应该是`0`。

到目前为止，它只是将字符转换为 0 并返回:(

**完整来源**

```
#include <stdio.h>

MyFNatoi(char *numArray, int *value) {

    int i;

    for (i = 0; i < 10; i++) {
        if (numArray[i] > 47 && numArray[i] < 58) {
            printf("%c", numArray[i] - 0);
            // sscanf(p, "%d", &value);
        }

        // printf("%c", numArray[i]);
    }
// printf("- ");
}

int main( ) {

      char numbers[5][10] = { "123456789", "0001234", "abc5xyz", "", "987654321" };
      int i, value;

      for(i=0; i<5; i++) {
         MyFNatoi(numbers[i], &value);
         printf("array: '%s' int value: %d\n", numbers[i], value);
      }

      return 0;
   } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T21:19:56.120

`for`循环`MyFNatoi()`应该基于数组的长度而`numArray`不是大小：使用`strlen(numArray)`和不`10`。

用于`isdigit()`确定字符是否为数字。

如果所有字符都是数字，则分配`*value`给`atoi()`. 否则，设置`*value`为`0`：

```
void MyFNatoi(char *numArray, int *value)
{
    int i;
    const int len = strlen(numArray);

    for (i = 0; i < len; i++)
    {
        /* #include <ctype.h> for 'isdigit()'. */
        if (!isdigit(numArray[i])) break;
    }
    /* #include <stdlib.h> for 'atoi()'. */
    *value = len == i ? atoi(numArray) : 0;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-15T21:40:35.973

不要设置`*value`为 0 来表示失败 - 0 是一个有效的整数。正如您在文本正文中指出的那样，请改用返回值。使用标准库而不是自己循环。

```
#include <stdio.h>

/* return true on success */
int MyFNatoi(const char *numArray, int *value)
{
    int n = 0;
    return sscanf(numArray, "%d%n", value, &n) > 0 /* integer was converted */
       &&  numArray[n] == '\0'; /* all input got consumed */
} 
```

# sorting - 如何自动对购物清单进行排序？（朴素的机器学习）

> ID：10166158
> 
> 赞同：2
> 
> 时间：2012-04-15T21:12:57.407
> 
> 标签：sorting, machine-learning

我正在考虑根据自己的需要创建另一个购物清单应用程序。我希望它自动学习我在列表中勾选的顺序。换句话说：它应该知道我穿过商店的路线。知道该应用程序可以为我分类我的物品，从而加快我的购物速度。

可以解决此问题的最简单解决方案是什么？我在想：

*   时间购物之旅。当我清除第一个项目并在最后停止时启动计时器。然后计算每个项目的平均时间。然后，该应用程序可以根据此计算的时间对项目进行排序。
*   对于每个项目，存储我在该项目之前和之后勾选的其他项目的两个列表。然后以某种方式排序，但不知道如何。:)

你能不能想点别的？我基本上想要一些用于自动排序的简单机器学习。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T21:31:19.230

第一种方法的简单版本（基于时间）的问题在于它没有考虑到通过商店花费不同的时间：如果您花费大量时间等待熟食店，那么获得的时间之后的鸡蛋会根据您在熟食店等待的时间而有很大差异。因此，根据您检查它们的平均时间来订购东西可能并不理想。

如果您能找出产品的组别，那么进行这种排序会容易得多，即香蕉和葡萄在一个部分中，您通常将它们放在一起，牛奶和鸡蛋在不同的部分中，您可以将它们放在一起。这个模型有一些问题（你可能会从高档奶酪区或普通区的其他乳制品中获得切达干酪），但订购会容易得多（如果 A 组在 B 组之前您通常先从 A 组获取项目，然后再从 B 组获取项目；一旦您有了组定义，就根据它进行排序）。

当你输入一个新项目时，这也可能会有所帮助：如果你以前从未吃过黑莓，但你的应用搜索网络或其他东西发现黑莓更像是水果类别而不是肉类类别，它知道将它们放入水果组。

那么，如何进行分组呢？一种简单的方法是对列表中的项目进行聚类，使用项目之间的平均时间差作为距离度量（我不确定这在技术上是一个指标，但它可能并不重要）。您可以在此处使用 k-means 或任何其他聚类方法。这也可以通过某种基于网络或语料库的相似性度量来增强，以便对新商品或您在商店的前几次运行中更有用。也许你也可以使用 GPS 数据来帮助解决这个问题。

您可能会执行某种 EM 过程来在将事物分配给组和对组进行排序之间进行迭代，但我不确定这是否会很有帮助。当此过程出错时，您还可以支持手动将事物分配给组。

这是一个很酷的主意！如果你释放它，也许我会使用它。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T21:38:00.323

如果您真的只想对列表进行排序并且您觉得使用平均时间不够好，您可以按照您勾选项目的顺序保留所有访问的所有项目的列表。然后您可以按以下方式对项目进行排序：

比较 2 个项目时，看看你在项目 B 之前选择项目 A 的次数。然后看看你在项目 A 之前选择项目 B 的次数，并根据这些数字对它们进行排序。即，如果您在 B n 次之前选择 A，在 A m 次之前选择 B，并且 n>m，则 A 应该在 B 之前。使用此比较器对它们进行排序。

显然，当n = m时，有一个问题。这可以使用您提到的平均时间来细分。

但老实说，简单地对它们进行聚类可能会更好。或者，也许您可​​以使用这种方法在集群中对它们进行排序；）

# python - 查找defaultdict（list）python中的元素数

> ID：10166159
> 
> 赞同：2
> 
> 时间：2012-04-15T21:12:58.247
> 
> 标签：python

一个快速的问题？我想知道是否有一种pythonic方式来获得以下内容。

我有一个 defaultdict(list)

```
 foo = {"a":[1,2,3], "b":[3]....} and so on. 
```

有没有一种pythonic方法来编写一个函数，它只返回列表长度大于“n”的键

所以例如

```
 def return_keys_based_on_value_length(num,dictionary):
    key_list = []
    for k,v in dictionary:
         if len(v)>= num:
            key_list.append(k)
    return key_list 
```

有没有一种pythonic方法可以做到这一点？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T21:17:16.783

```
foo = {"a":[1,2,3], "b":[3], "c":[1,2], "d":[1,2,3,4]}

n = 2

my_list = [key for key,val in foo.iteritems() if len(val) > n] 
```

结果：

```
>>> my_list
['a', 'd'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T21:17:15.740

```
n = 2
foo = {"a":[1,2,3], "b":[3]}
key_list = [item for item in foo.keys() if len(foo[item]) > 2] 
```

结果是`['a']`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T21:18:27.150

您可以尝试使用过滤功能：

```
filter(lambda x: len(dictionary[x])> num, dictionary.keys()) 
```

# c# - 如何将 Kinect 上的手波绑定到按键

> ID：10166166
> 
> 赞同：4
> 
> 时间：2012-04-15T21:13:15.073
> 
> 标签：c#, kinect, kinect-sdk

我在互联网上环顾四周，找不到任何东西，有人知道将手波绑定到按键的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T21:19:46.643

你看过这里吗？

[http://www.microsoft.com/en-us/kinectforwindows/develop/](http://www.microsoft.com/en-us/kinectforwindows/develop/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T07:10:16.263

首先你需要在代码中导入 user32.dll

比你只使用这个：

```
System.Windows.Forms.SendKeys.SendWait("{Right}"); 
```

对我有用 :) 您需要将上面的行放在代码中识别手势的部分

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T14:02:30.833

关于 SendKeys 你可以阅读这个[system.windows.forms.sendkeys](http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.aspx)

然后你可以检查一下这个挥手

```
first.Joints[JointType.HandRigh].Position.X 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T07:21:45.387

有一个项目将 kinect 手势绑定到键盘事件和鼠标移动。它来自预发布的 Kinect SDK，因此它可能与您现在使用的不是 100% 兼容：

[http://www.kinecteducation.com/blog/tag/binding-keys-for-kinect/](http://www.kinecteducation.com/blog/tag/binding-keys-for-kinect/)

# asp.net - 在同一行上获取 2 个 div

> ID：10166167
> 
> 赞同：2
> 
> 时间：2012-04-15T21:13:16.273
> 
> 标签：asp.net, css, html

我试图在同一行上获得 2 个 div，我有

```
<div class="header">
  <div class="clear hideSkiplink">
     <div class="menuDiv">
             <asp:Menu ID="NavigationMenu" runat="server" CssClass="menu" 
                EnableViewState="False" Orientation="Horizontal" 
                StaticSubMenuIndent="10px" BackColor="#E3EAEB"   DynamicHorizontalOffset="2" 
                Font-Names="Verdana" Font-Size="0.8em" ForeColor="#666666">
            </asp:Menu></div>

            <div class="SearchBox">

            </div>
        </div>
    </div> 
```

我想在 hideSkiplink 中获取菜单和搜索，左侧是菜单，右侧是搜索。因为它是搜索在菜单下。我尝试更改在 css 上找到的所有内容的添加位置，但如果我在同一行中获取菜单并搜索，则 hideSkiplink 消失，如果我将搜索设置为向右浮动，它会退出 hideSkiplink。

我现在的css中只有

```
div.hideSkiplink
{
background-color:#555555;
width:100%;
 }

div.menu
{
padding: 8px 0px 8px 10px;   
} 
```

有什么想法我能做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T21:16:30.513

```
#NavigationMenu {
    float: left;
}

.SearchBox {
    float: right;
}

.MenuDiv {
    overflow: hidden; /* adjusts the height of .MenuDiv to wrap its children */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T21:15:42.243

放

`display: inline-block;`

然后根据需要设置它们的宽度（作为父容器的绝对值或百分比）

[**现场演示**](http://jsfiddle.net/Lb3U9/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T21:16:20.680

添加浮动：左；div.menu 的属性

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T21:16:32.467

你可以玩浮动：

```
float: left;
float: right;
clear: both; 
```

这并不总是容易做到的。

另一种选择是使用

```
display: inline-block; 
```

或使用跨度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-15T22:22:02.980

line-height(child-elements) 与先前答案的组合

# html - HTML5 表单验证的条件规则

> ID：10166168
> 
> 赞同：11
> 
> 时间：2012-04-15T21:14:03.457
> 
> 标签：html, webforms

我想知道是否可以根据其他元素状态设置“必需”元素。例如，假设我有一个输入元素，当且仅当用户选中特定复选框时，我希望它是“必需的”。首先，这是否可以在不使用 JavaScript 的情况下完成？其次，如果我们使用 JavaScript，当然可以在用户选中该复选框时设置规则/验证，但是关于默认浏览器验证错误的一致性呢？单击复选框后，将“必需”属性添加到元素是否“正确”？我在这里看不到替代品。您对此有何看法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T21:21:41.963

我认为没有 javascript 就无法做到这一点。

使用 javascript，您可以轻松地做到这一点。

只有在单击复选框后，我才会添加该`required`属性。

事实上，我会把它做成一个`toggled`片段，以便用户可以取消选中和不需要输入。

但是，我不会依赖浏览器的`required`属性实现。相反，我会使用一些 CSS（突出显示、动画、显示一些文字）创建自己需要的通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T07:32:16.310

您可以在不可用时使用 polyfills 来模拟原生验证：
[https ://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills)

# .htaccess - 带有 htaccess 的友好网址

> ID：10166171
> 
> 赞同：0
> 
> 时间：2012-04-15T21:14:31.500
> 
> 标签：.htaccess, url, seo, google-search-console

我有个问题。我通过 htaccess 进行了友好的 url 重写，这是我的代码：

```
RewriteRule ^category/(some-category)$  category/$1/ [R=301]
RewriteRule ^category/(some-category)/$ category/index.php?some-category=$1 [L] 
```

一切正常，但曾几何时，我正在研究谷歌网站管理员工具，并从我的网址中看到了许多错误。谷歌说某些文件在 url 上不存在 => 像这样这`http://domain.com/category//some-category/`是什么？为什么是这样？？我尝试在浏览器中打开该网址，它确实存在（有些图片丢失了来源，但它可以工作）。我不知道它为什么起作用，因为在我的 htaccess 代码中，结构非常强大，一个`/`不是两个或三个，但它们可以工作并且`/`连续 10 个。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T02:30:12.693

那些不可靠的页面返回什么 http 标头代码？您仍然可以拥有一个看起来不错的页面，但如果它返回 404 代码，那么 Google 会将其标记为缺失。

您的图像已损坏，因为您必须为它们使用相对 URL。双斜杠正在添加一个子目录并弄乱该相对路径。

我怀疑您的网站上有一些乱七八糟的链接，这些链接会指向不可靠的页面。首先是找到它们（问题的根源）并修复它们。止血然后收拾残局。

# git - Git 服务器的主机密钥未缓存在注册表中 - GitHub.com

> ID：10166173
> 
> 赞同：15
> 
> 时间：2012-04-15T21:14:44.880
> 
> 标签：git, bash, ssh, github

**[此处](https://stackoverflow.com/questions/10147521/setting-up-repo-on-github-error-on-push-u-origin-master/10147601)****继续问题**：我正在尝试在 GitHub 上设置我的第一个 Git 存储库。（注意，这意味着我不能使用腻子，我正在使用 openssh，或者至少我应该使用并且我认为我是）。我一直在关注 GitHub 网站上的[文档](http://help.github.com/create-a-repo/)。直到最后一个命令：`git push -u origin master`. 它给了我以下错误：

```
The server's host key is not cached in the registry.
You have no guarantee that the server is the computer you think it is.
The server's rsa2 key fingerprint is: ssh-rsa 2048
16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48
Connection abandoned. fatal: The remote end hung up unexpectedly 
```

我猜这意味着在我的`known_hosts`文件中找不到他们的 ssh-rsa 密钥，但我不确定如何解决这个问题。我试过`ssh -T git@github.com`了，我登录就好了。我还尝试关闭 git bash 并重新打开以防缓存问题。这不能解决问题。这是我得到的唯一与文档指示不同的输出。我希望建立一个甜蜜的 Java Helper Library，所以任何帮助都将不胜感激！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-20T12:47:35.120

使用 git-for-windows 和 GIT_SSH 指向 plink.exe，打开服务器的 putty 并接受主机密钥（然后终止 putty 会话，甚至不继续登录）就足以为我解决这个问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-16T06:09:43.583

在 Windows 上，有时您似乎无法真正接受服务器的主机密钥。

从 Power Shell 尝试以下命令之一：

```
ssh github.com 
```

或者

```
plink.exe -agent github.com 
```

运行这些独立并`y`在被要求接受主机密钥时按。

用于`ssh-add`将您的私钥添加到当前的 Power Shell 会话：

```
C:> ssh-add PATH\TO\PRIVATE\KEY 
```

之后，您应该能够成功运行`git push`.

来源：[http ://help.github.com/ssh-issues/](http://help.github.com/ssh-issues/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-17T14:40:16.977

理想的解决方案是（如果您真的不需要在 git 中使用 plink）删除 GIT_SSH 环境变量并`ssh-keygen -t rsa -C "youremail"`在 Git Bash 上使用命令生成新的密钥对，然后在 github 中更改您的 ssh 密钥，因为据我了解评论是腻子，openssh 是冲突的。

但是，如果您仍然想使用 plink，您可以使用 PuTTYgen 生成 PuTTY 格式密钥，然后在 github 中更改您的公钥并在 PuTTYagent 中加载您的私钥，然后您应该使用 PuTTY 连接到 github.com 这将添加 githubs 指纹到 known_hosts，你很高兴。这将是使用 PuTTY [http://nathanj.github.com/gitguide/tour.html的 github 资源](http://nathanj.github.com/gitguide/tour.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-02T20:20:32.057

在@Name 的帖子中添加信息（为了完整起见），因为我今天（再次）遇到了这个问题。

Putty 将其 SSH 已知主机存储[在注册表项](https://superuser.com/questions/197489/where-does-putty-store-known-hosts-information-on-windows)中，而不是像 SSH 那样存储在 ~/.ssh/known_hosts 文件中。因此，要使 Git 与 PLink 和 Pagent 一起工作，您只需在远程 Git 服务器上启动一个 Putty 会话，并接受密钥。这样，您将不会再次收到该消息。

这很令人不安，因为您必须接受两次 SSH 密钥：一次用于 SSH-ing 服务器，一次用于 Putty/Plink/Pagent，但一旦您这样做，它就像一个魅力。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-19T08:39:59.827

这对我有用：

我在这里验证了 github 指纹： [https ://help.github.com/en/github/authenticating-to-github/githubs-ssh-key-fingerprints](https://help.github.com/en/github/authenticating-to-github/githubs-ssh-key-fingerprints)

一旦确认，git就不再问了。

# ruby-on-rails-3 - 在资产中替换它们后，Rails 不提供某些图像

> ID：10166175
> 
> 赞同：0
> 
> 时间：2012-04-15T21:14:49.987
> 
> 标签：ruby-on-rails-3, image, openlayers, asset-pipeline

我目前在我的 Rails 3.2.2 应用程序中嵌入了 OpenLayers。OpenLayers 的图像位于 中`/vendor/assets/images/openlayers`，并且已正确提供。

在另一个文件夹中，我使用 Photoshop 编辑了其中一些图像，以更改按钮的色调。现在，当我替换图像时，Rails 将不再为它们提供服务，而是只显示这个“损坏的图像”图标。

之前和之后（请注意，我没有修改形成缩放栏背景的图像）：

![](../Images/9b26bb7ac1193601a4c31cfb5d45751c.png) ![](../Images/a354dc31fd091f76a299ee47ed221f1e.png)

根据 rails 控制台，图像被提供：

```
Started GET "/assets//openlayers/zoom-minus-mini.png" for 127.0.0.1 at 2012-04-15 23:09:04 +0200
Served asset /openlayers/zoom-minus-mini.png - 200 OK (0ms) 
```

...但是在我的浏览器中，当我浏览到该 URL 时，它只会再次显示“损坏的图像”图标。如果我将图像从我的文件系统拖到 Chrome，它会正确显示。

当我执行`git checkout vendor/assets/images/openlayers`并刷新浏览器（跳过缓存）时，一切都恢复正常。

是什么赋予了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T21:26:10.247

我发现*在适当位置编辑**原始*图像可以解决问题，而不是将它们复制到.*`vendor/assets/images`*

 *尽管它们在 Finder、Photoshop、Chrome、Safari 和其他工具中显示良好，但 Rails 出于任何原因拒绝为它们提供服务。

[如果有人对为什么会发生这种情况有更技术性的解释，请随时分享！]*

# php - CodeIgniter - 实时站点仅加载默认控制器的索引方法

> ID：10166176
> 
> 赞同：0
> 
> 时间：2012-04-15T21:14:52.147
> 
> 标签：php, codeigniter

我一直在 Windows 7 上的 XAMPP 中开发 CodeIgniter 应用程序。该应用程序在本地按预期运行，但在上传时却没有。

默认控制器（ShowStadium）有以下方法： - index() - show()

通过基本路径调用时 index 加载正常，但直接调用时不会加载：

/pathToApp/ShowStadium/ 或 /pathToApp/ShowStadium/index 或 pathToApp/ShowStadium/show

## **收到的错误是 Codeigniter 404 消息。**

codeigniter 实例当前位于 2 个子文件夹中。我的 .htaccess 文件：

```
RewriteEngine On

# Put your installation directory here:
# If your URL is www.example.com/, use /
# If your URL is www.example.com/site_folder/, use /site_folder/

RewriteBase /proj/groundtweet/

# Do not enable rewriting for files or directories that exist
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# For reuests that are not actual files or directories,
# Rewrite to index.php/URL
RewriteRule ^(.*)$ index.php/$1 [PT,L] 
```

我尝试过的事情：

*   控制器文件都是小写的。
*   两个安装的基本路径都是正确的。
*   尝试了各种 uri_protocol 选项
*   index.php 已从路径中删除。

任何帮助都将不胜感激，因为我找不到这个问题的具体答案，而且它可能很简单令人沮丧。

抱歉，如果我在这里遗漏了任何细节。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T04:37:52.420

试试下面的代码，将它粘贴到 .htaccess 文件中。如果您的项目文件夹是groundtweet，则将此文件放在项目文件夹下。将文件粘贴到此文件夹下。

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /proj/groundtweet/index.php/$1 [L] 
```

我希望这能帮到您..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T07:02:22.610

转到 application/config/config.php 并更改

```
$config['uri_protocol'] = 'AUTO'; 
```

使用以下选项之一（他们对此配置进行了评论）：

```
 'PATH_INFO'        Uses the PATH_INFO
 'QUERY_STRING' Uses the QUERY_STRING
 'REQUEST_URI'      Uses the REQUEST_URI
 'ORIG_PATH_INFO'   Uses the ORIG_PATH_INFO 
```

其中之一应该适合您

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T23:06:37.870

感谢所有答案，最后这是区分大小写的问题。

控制器文件名是小写的 (showstadium.php)，但在 Pascal 大小写 (ShowStadium) 中的表单操作中引用。

似乎对于默认的控制器/动作，CodeIgniter 可以解决这个问题（我没有看过胆量，所以我只是在这里做一个假设）但是当直接调用时，文件名必须与 url 大小写匹配 - 在linux服务器。

# python - 在两个列表中循环

> ID：10166177
> 
> 赞同：2
> 
> 时间：2012-04-15T21:14:53.700
> 
> 标签：python

我有这些清单：

```
list1 = [3, 5, 2, 1, 9]
list2 = [6, 9, 1, 2, 4]
list3 = []
list4 = [] 
```

我想通过这些公式：

```
x = a/b
y = 1/b 
```

其中 a 是 list1 中的每个值，b 是 list2 中的每个值，并将计算结果附加到两个空列表 - list3 和 list4。

这就是我所拥有的，但这是一场灾难哈哈:(

```
u = 0
while u<len(list1):
    for a in list1:
        for b in list2:
            x = a/b
            y = 1/b
            u+=1
            list3.append(x,)
            list4.append(y,) 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T21:20:08.767

这是一个单行：

```
>>> list3,list4 = zip(*[(a/b,1/b) for a,b in zip(list1,list2)])
>>> list3
(0, 0, 2, 0, 2)
>>> list4
(0, 0, 1, 0, 0) 
```

输出是`tuples`。但它们可以很容易地转换为`list`.

哦。`generator expression`通过使用而不是可以使内存效率更高`list comprehension`：

```
>>> zip(*((a/b,1/b) for a,b in zip(list1,list2))) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-15T21:18:33.480

```
for a, b in zip(list1, list2):
    x = a/b
    y = 1/b
    list3.append(x)
    list4.append(y) 
```

这是假设您的意思是要成对使用列表。相反，如果您的意思是您想要列表的所有可能配对，那么：

```
for a in list1:
    for b in list2:
        x = a/b
        y = 1/b
        list3.append(x)
        list4.append(y) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-15T21:18:55.327

```
for a,b in zip(list1,list2):
  x = a/b
  y = 1/b 
```

?? 像这样的东西

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-15T21:19:33.353

只需在 Python 中使用 zip 函数：

```
for a, b in zip(list1, list2):
    list3.append(a/b)
    list4.append(1/b) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-11T05:08:02.847

```
list3 = map((lambda x, y: x/y), list1, list2)
list4 = map(lambda x: 1/x), list2) 
```

或者：

```
list3, list4 = zip(*map((lambda x, y: (x/y, 1/y)), list1, list2) 
```

# ruby-on-rails-3 - Rails 3 渲染布局导致 Twitter Bootstrap 出错

> ID：10166182
> 
> 赞同：1
> 
> 时间：2012-04-15T21:15:20.033
> 
> 标签：ruby-on-rails-3, twitter-bootstrap

我使用 twitter 引导程序进行设计。我想为特定操作使用不同的模板

```
def view
  render :layout => 'single'
  @movie = Movie.find(params[:id])
   respond_to do |format|
  format.html # show.html.erb
  format.json { render json: @movie }
 end
end 
```

一旦我将渲染布局添加到操作中，我就会收到此错误消息

```
undefined method `model_name' for NilClass:Class

 Extracted source (around line #2):

 1: <%- model_class = @movie.class -%>
 2: <h1><%=t '.title', :default => model_class.model_name.human %></h1>
 3: 
 4: <p>
 5:   <strong><%= model_class.human_attribute_name(:title) %>:</strong><br> 
```

如果我把渲染拿走，页面就会加载得很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T21:22:49.663

你渲染得太早了。尝试这个：

```
 format.html { render :layout => 'single' } 
```

或者对于更可扩展的方法，请参阅[此问题和答案](https://stackoverflow.com/questions/3025784/rails-layouts-per-action)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T21:22:13.540

不要`render`在方法的开头调用`view`。最后叫它。

**upd：** 哦..在您的情况下，您应该调用它`format.html { render ... }`。对不起。

# c# - 如何在 winform 中禁用或隐藏 acrobat reader 书签面板？

> ID：10166183
> 
> 赞同：5
> 
> 时间：2012-04-15T21:15:21.423
> 
> 标签：c#, acrobat

我正在使用 Acrobat ActiveX 在我的应用程序中显示 PDF 文档。我想知道在显示pdf时是否可以在PDF adobe阅读器上禁用或隐藏书签（以及面板左侧的页面、搜索、评论、附件）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T09:23:21.420

我希望这会对你有所帮助。

```
// load pdf file
viewer.LoadFile(somePath);
// hide top toolbar
viewer.setShowToolbar(false);
// hide navigation bar
viewer.setPageMode("none"); 
```

“查看器”是来自 Adob​​e Reader (AcroPDFLib) 的 ActiveX 控件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-06-03T15:21:36.193

解决方案是添加“#toolbar=0”结束路径文件，像这样

```
axAcroPdf1.scr="c:/mifile.pdf"+"#toolbar=0" 
```

此外，您可以添加其他用“&”分隔的属性

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T19:07:38.050

I searched a lot for an answer to this one, and the best I could find is explained in this post :
[NorthCode forum post](http://www.northcode.com/forums/showthread.php?t=9577)

Basically, it seems that you can only change the PageMode with this command, but not control the visibility of the panel. This must be done within the interface. It says that the value is remembered if you hide it manually, so in theory it would be hidden when you open the viewer again, but I couldn't make it work.

I finally gave up trying to hide it...

# ruby-on-rails - 在 Heroku 上为 Rails 应用程序设置后端服务器

> ID：10166186
> 
> 赞同：1
> 
> 时间：2012-04-15T21:15:48.643
> 
> 标签：ruby-on-rails, heroku, backend

我有一个托管在 Heroku 中的 Rails 3.0 应用程序。我想设置一个不同的 Rails 服务器来运行繁重的后端作业（扫描用户配置文件、项目并创建推荐并将它们存储在 Redis 数据库中），以便它：

*   不会阻塞我的前端服务器（即，如果我在同一个前端 Rails 服务器上运行后端进程，则响应用户请求等需要更长的时间）
*   允许我拥有 Rails 类和方法

我的理解是：

*   添加更多的工人测功机不会分离前端和后端进程
*   添加 When 或 Delayed_Job gem 将不允许我在单独的后端服务器上运行。

我认为 Rails 应该经常出现这种情况。我该怎么办？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T22:00:44.037

*   “阻塞”“前端数据库”是什么意思？你可能只有一个普通的数据库，你应该实现缓存和深思熟虑的查询以避免对它征税。将 Resque 与 Redis 一起用于任务以避免增加 SQL 数据库的负载。
*   您可以通过加载环境来访问 rake 任务中的“Rails 类和方法”。例如：`task :do_this => :environment { ... }`
*   每个 dyno 都独立于其他所有 dyno，无论它们是 web worker（可用于 HTTP 请求）还是 worker dyno（用于其他任何东西）。

您真的只需要创建 rake 任务并将任何其他服务（如 Clockwork）添加到您的 Procfile（仅限 Cedar 堆栈）即可让这一切在 Heroku 上运行。

# sql-server - 如何将 SSMS 的表设计器中的 Allow Nulls 属性设置为始终为 false？

> ID：10166187
> 
> 赞同：-1
> 
> 时间：2012-04-15T21:15:58.443
> 
> 标签：sql-server, ssms

在 SQL Server Management Studio 中，当通过表设计器创建新表或向现有表添加列时，会显示 3 列：

1.  列名
2.  数据类型
3.  允许空值

允许 Nulls 始终默认为`True`（勾选），但是，我想知道是否可以将 SSMS 配置为始终默认为`False`（未勾选）？

在较小程度上，我还想知道是否可以在下部窗格的“列属性”选项卡中配置可编辑的默认选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T15:06:27.750

我想它是不可配置的，只是因为当您尝试在编辑表模式下将其关闭时 SSMS 会引发拟合（假设它们使用相同的底层代码库）。

但是，您可以使用[SET ANSI_NULL_DFLT_ON](http://msdn.microsoft.com/en-us/library/ms187375.aspx)来实现您想要的。这将覆盖新列的默认可空性（对于会话）。

请注意 sp_help 中“Nullable”列与以下查询的区别。

```
set ANSI_NULL_DFLT_ON ON
create table test (id int)
go
sp_help test
go
set ANSI_NULL_DFLT_ON OFF

drop table test
create table test (id int)
go
sp_help test 
```

我假设您希望这样做是为了强制您自己或与您一起工作的人将他们的列默认为 NOT NULL 而不是 NULL。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T21:54:11.500

老实说，我不确定*Allow Nulls*的默认值是否可配置。我希望不是。事实上，我希望它不会是可配置的，因为它有时可能会令人困惑。这是我的推理。

在我看来，默认*允许 Nulls*与将DDL 语句的列声明中不存在/的情况默认为​​ . 也就是说，无论是我在使用语句时省略了那一点列定义，还是在使用像 SSMS 这样的工具的对话模式时不注意它，我都希望结果是一样的。`True``NULL``NOT NULL``NULL``CREATE TABLE`

由于没有`NULL`或`NOT NULL`已经被`NULL`许多人解释为已经有一段时间了，我认为现在改变这个含义没有多大意义。因此，新表对话框中*允许 Nulls*选项的默认值也不应更改。

但是，*可能*有意义的是，对话框中的*Default new columns to Deny Null开关（当然最初是关闭的）以更改此特定表编辑会话中的默认行为。*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-23T19:47:44.597

如果您可以操作注册表项，这里有一个选项可以强制 SSMS 始终将值*false*分配给*Allow Null*属性。

### `NOTE: Please be careful while altering registry keys.`

1.  在*Windows 开始*-->*运行*命令中键入*regedit以打开注册表编辑器。*

***   导航到**`HKEY_CURRENT_USER\Software\Microsoft\Microsoft SQL Server\100\Tools\Shell\DataProject`**您可能需要相应地更改 SQL Server 版本。我正在使用*SQL Server 2008 R2 Express*和因此版本*100*。

    *   在上述注册表路径下，查找键名**`SSVDefaultAllowNull`**。

    *   右键单击该键并选择*修改*选项。将值从*1*更改为**`0`**。默认值为*1*，表示*True*。

    *   如果您已经在运行*SQL Server Management Studio*，请重新启动它。感谢[@Andriy M](https://stackoverflow.com/users/297408/andriy-m)指出这一步。** 

 **希望有帮助。**

# c# - 无法在 nvarchar 上调用方法

> ID：10166196
> 
> 赞同：3
> 
> 时间：2012-04-15T21:17:14.880
> 
> 标签：c#, asp.net, sql-server-2008, tsql

我在我的 asp.net 应用程序中使用的简单 SELECT 语句有一个奇怪的问题。我使用 MSSQL 2008。

该声明有效：

```
SelectSQL = "SELECT user_id, user_name, user_surname, user_code FROM Users WHERE user_group = '" + drop.SelectedItem.Value + "'"; 
```

但是，此行会抛出“*无法在 nvarchar 上调用方法。* ”

```
SelectSQL = "SELECT COUNT(DISTINCT Equations.eq_id) AS pocet_prikladu, Users.user_name, User.user_surname FROM Users LEFT JOIN Equations ON (Users.user_id = Equations.eq_user_id) WHERE Users.user_code = '" + drop.SelectedItem.Value + "' GROUP BY Users.user_id, Users.user_name, User.user_surname "; 
```

这是更多代码，它停在最后一行

```
public void FillTable(Table tab, DropDownList drop)     //naplneni tabulky
    {
        SqlConnection pripojeni = new SqlConnection(connectionString);
        string SelectSQL = "";
        if (action == "groups")
        {
            SelectSQL = "SELECT user_id, user_name, user_surname, user_code FROM Users WHERE user_group = '" + drop.SelectedItem.Value + "'";
        }
        else
        {
            SelectSQL = "SELECT COUNT(DISTINCT Equations.eq_id) AS pocet_prikladu, Users.user_name, User.user_surname FROM Users LEFT JOIN Equations ON (Users.user_id = Equations.eq_user_id) WHERE Users.user_code = '" + drop.SelectedItem.Value + "' GROUP BY Users.user_id, Users.user_name, User.user_surname ";
        }
        try
        {
            SqlCommand prikaz = new SqlCommand(SelectSQL, pripojeni);
            pripojeni.Open();
            SqlDataReader vysledky = prikaz.ExecuteReader(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T21:26:13.163

您可能需要将用户分隔为 [user]。用户是保留关键字。

所以 [User].user_surname 等

同样正如克里斯所说，错字将 User.user_surname 更改为 Users.user_surname。

我猜未定界的 [User] 问题导致了奇怪的错误

# jquery - 如何让用户使用 JQPlot 选择图表的位置？

> ID：10166199
> 
> 赞同：0
> 
> 时间：2012-04-15T21:18:01.763
> 
> 标签：jquery, charts, jqplot

我正在尝试使用 JQPlot 进行图表渲染，但遇到了问题。我希望用户能够选择图表的呈现位置。假设我有 4 个象限，我希望用户选择左上角或右上角等。有没有办法做到这一点？

从我所见，JQPlot 要求您在渲染绘图时指定绘图将进入的 div。有什么办法可以在之后选择 div 吗？还是重新分配您最初分配的 div？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T16:32:57.757

我认为您可以尝试使用选项卡来表示图表，或者您可以添加一个 html 按钮以在所需的 div 上显示图表。我真的不知道你的html知识。也试试这个：http://www.jqplot.com/deploy/dist/examples/hiddenPlotsInTabs.html

# c# - XPath 未返回结果 - YouTube 提要

> ID：10166203
> 
> 赞同：3
> 
> 时间：2012-04-15T21:18:41.900
> 
> 标签：c#, asp.net-mvc-3, xpath

我正在尝试在 C# 中使用 XPath 来获取[YouTube 最流行的 Atom 提要](http://gdata.youtube.com/feeds/api/standardfeeds/most_popular)中 <link> 节点的 href 值。

从我在网上阅读的文档来看，这个过程相对简单，大致如下：

```
XmlDocument xml = new XmlDocument();
xml.Load("http://gdata.youtube.com/feeds/api/standardfeeds/most_popular");
XmlNodeList linkNodes;
linkNodes = xml.SelectNodes("/feed/entry/link[@rel='alternate']"); 
```

但这不起作用，我没有得到任何结果。我尝试使用 XmlNamespaceManager 添加命名空间，但这也无济于事。

仓促回复将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T21:20:37.987

我确信正确添加命名空间*会*有所帮助，因为我确信这就是问题所在。不过，我个人会改用 LINQ to XML。示例代码：

```
using System;
using System.Linq;
using System.Xml.Linq;

public class Test
{
    static void Main()
    {
        string url =
             "http://gdata.youtube.com/feeds/api/standardfeeds/most_popular";
        var doc = XDocument.Load(url);
        XNamespace ns = "http://www.w3.org/2005/Atom";
        var links = doc.Root
                       .Elements(ns + "entry")
                       .Elements(ns + "link")
                       .Where(x => (string) x.Attribute("rel") == "alternate");

        Console.WriteLine(links.Count()); // 25
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T21:38:10.880

乔恩的回答绝对是今天（或任何时候）要走的路，但如果您对自己做错的事情感兴趣，那么这里有一个例子：

您的元素确实存在命名空间，它是默认命名空间。不幸的是，这`XmlDocument`门课在向您展示这一点时并不那么优雅；相反，您通常会“伪造”一个名称空间前缀映射到文档中的根名称空间；在这种情况下`xmlns=http://www.w3.org/2005/Atom`

```
 XmlDocument xdoc = new XmlDocument();
    xdoc.Load("http://gdata.youtube.com/feeds/api/standardfeeds/most_popular");

    XmlNamespaceManager manager = new XmlNamespaceManager(xdoc.NameTable);
    manager.AddNamespace("base", "http://www.w3.org/2005/Atom");

    var nodes = xdoc.SelectNodes("/base:feed/base:entry/base:link[@rel='alternate']", manager); 
```

使用您的实时文档进行测试会产生一个包含 25 个`link`元素的 XmlNodeList。

# linux - FFmpeg 截屏录制：使用哪些编解码器？

> ID：10166204
> 
> 赞同：3
> 
> 时间：2012-04-15T21:18:45.040
> 
> 标签：linux, ffmpeg, x264, video-codecs

我一直在尝试使用 FFmpeg 的 X11grab 模块录制截屏视频，到目前为止，它或多或少都运行良好。我知道 A/V 编码是一个复杂的过程，有很多细节，但我正在努力学习。

我想对视频流进行“轻量级”录制，在录制流时尽可能减少系统的压力。我用 pacat 和 sox 分别录制两个音频流。之后，整个内容被过滤、规范化、编码并组合到一个 Matroska 容器中。

现在，我正在让 ffmpeg 记录一个 rawvideo 流以馈送到 x264 的 yuv4 解复用器。我之前尝试过 ffv1 和直接 x264 录制。我的系统无法在我想要的最终流设置上使用 x264 进行实时编码，因此在录制完成后我必须单独重新压缩。我发现 ffv1 给我带来了可怕的丢帧，还有 yuv4，但没那么严重。我怀疑这是由于硬盘驱动器的速度，即使我坐在专门用于保存记录数据的 SATA3 Caviar Black 中。

问题是，我应该查看哪种视频编解码器组合？直接在 x264 中录制并稍后重新压缩为“更好”的 x264？原始视频，然后压缩？我将如何查明我遇到的丢帧等问题？

编辑：这是我目前使用的 ffmpeg 行。

```
ffmpeg -v warning -f x11grab -s 1920x1080 -r 30000/1001 -i :0.0\
-vcodec rawvideo -pix_fmt yuv420p -s 1280x720\
-threads 0\
recvideo.y4m 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T23:26:50.427

你试过[http://en.wikipedia.org/wiki/Huffyuv](http://en.wikipedia.org/wiki/Huffyuv)吗？

您确定您的问题是 CPU 还是磁盘带宽？您尝试写入磁盘的数据速率是多少？在您的比特率和设置下，您的编解码器需要多少 CPU？我假设您没有记录空闲的计算机-它还剩下多少资源用于记录？

为了测试磁盘写入性能，只需分配 100MB，从中读取 100MB `/dev/urandom`，然后在磁盘空闲时将缓冲区写入该磁盘上的文件。测量写入需要多长时间（从 urandom 读取需要时间）。Linux 具有回写功能，这意味着它每 5 秒将脏页刷新到磁盘，而不是在您写入后立即刷新。使用`fdatasync`（或 full `fsync`）将为您提供实时时间，直到数据在磁盘上。

为什么看不到ffmpeg的cpu使用情况？记录一分钟显示的终端窗口`top`怎么样？如果不是，那么`perf record -a sleep 60`在终端中如何切换到你所做的，然后记录一分钟`perf report`？

**编辑**：我用过`avconv -v warning -f x11grab -s 1680x1050 -r 30000/1001 -i :0.0 -vcodec ffvhuff -s 1280x720 -threads 0 capture.mkv`，用 RGB 录制效果很好。然后，您可以在 YUV 中离线转码为 H.264、双通道以获得最高质量等。我得到了大约 24MB/秒，但它似乎是单线程的。我的 Core2 @ 2.3Ghz 没问题。

# haskell - Haskell/GHC：多态字符文字

> ID：10166217
> 
> 赞同：1
> 
> 时间：2012-04-15T21:20:34.173
> 
> 标签：haskell, ghc

我可以使用 GHC 语言扩展来获取多态字符文字吗？喜欢`OverloadedStrings`，但对于角色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T22:18:40.330

简短的回答是：不，没有。至少现在还没有。

# vb.net - WP7 MVVM 如何从 ViewModel 调用 me.setfocus()？

> ID：10166219
> 
> 赞同：1
> 
> 时间：2012-04-15T21:20:37.987
> 
> 标签：vb.net, windows-phone-7, mvvm, vb.net-2010, windows-phone-7.1.1

我正在尝试在我的下一个 WP7 应用程序（用 Vb.NET 编写）中提高我的 MVVM 能力。我有一个已获得焦点并显示 WP7 键盘的文本框。我正在使用命令绑定和 xyzzer 的可绑定应用程序栏（非常好）。

[http://bindableapplicationb.codeplex.com/](http://bindableapplicationb.codeplex.com/)

我希望能够通过在表单上设置焦点来从 ViewModel 中取消 TextBox 的焦点。通常（非 MVVM）我会通过调用从表单中执行此操作：

```
 Me.Focus() 
```

但我不能从 ViewModel 做到这一点（我不应该这样做）。目前，我正在从 ViewModel 中提出一个事件并将其捕获到表单上，但它很讨厌。是否有一种 MVVM 友好的方式来做到这一点？到目前为止，我还没有使用过工具包，因为 vb.net 中的示例有限。

我一直在使用命令绑定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T21:26:25.123

让我猜猜：问题是当您单击 ApplicationBarIconButton 时，TextBox 尚未更新 ViewModel 上的绑定属性，对吗？

使用[Cimbalino Windows Phone Toolkit](https://github.com/PedroLamas/Cimbalino-Phone-Toolkit)中的 ApplicationBarBehavior （您也可以从[NuGet](http://nuget.org/packages/Cimbalino.Phone.Toolkit)获取它），它在内部进行处理 - 因此在 ApplicationBarIconButton 单击事件完成之前，它已经更新了 TextBox.Text 绑定属性！

检查[GitHub 中的示例代码，](https://github.com/PedroLamas/Cimbalino-Phone-Toolkit/tree/master/samples/BindableApplicationBar)您就可以使用它了！

**编辑：**

如果您只想在页面上设置焦点（从而在 TextBox 失去焦点后关闭键盘），我会使用外部类来完成这项工作，然后在 ViewModel 中使用它，如下所示：

```
//This is the service interface
public interface IPageService
{
    void Focus();
}
//This implements the real service for runtime 
public class PageService : IPageServiceusage
{
    public void Focus()
    {
        var rootFrame = Application.Current.RootVisual as PhoneApplicationFrame;

        if (rootFrame == null)
            return;

        var page = rootFrame.Content as PhoneApplicationPage;

        if (page == null)
            return;

        page.Focus();
    }
}

//This implements the mockup service for testing purpose
public class PageServiceMockup : IPageService
{
    public void Focus()
    {
        System.Diagnostics.Debug.WriteLine("Called IPageService.Focus()");
    }
} 
```

然后，在您的 ViewModel 上，创建一个服务实例，如下所示：

```
public class MyViewModel
{
    private IPageService _pageService;

    public MyViewModel()
    {
#if USE_MOCKUP
        _pageService = new PageServiceMockup();
#else
        _pageService = new PageService();
#endif
    }
} 
```

而当你想在页面上设置焦点时，你所要做的就是调用`_pageService.Focus()`.

这是一种完全 MVVM 解决问题的方法！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T22:44:31.863

您可以尝试使用一种行为：

```
public class FocusBehavior : Behavior<Control>
    {
        protected override void OnAttached()
        {
            AssociatedObject.GotFocus += (sender, args) => IsFocused = true;
            AssociatedObject.LostFocus += (sender, a) => IsFocused = false;
            AssociatedObject.Loaded += (o, a) => { if (HasInitialFocus || IsFocused) AssociatedObject.Focus(); };

            base.OnAttached();
        }

        public static readonly DependencyProperty IsFocusedProperty =
            DependencyProperty.Register(
                "IsFocused",
                typeof (bool),
                typeof (FocusBehavior),
                new PropertyMetadata(false, (d, e) => { if ((bool) e.NewValue) ((FocusBehavior) d).AssociatedObject.Focus(); }));

        public bool IsFocused
        {
            get { return (bool) GetValue(IsFocusedProperty); }
            set { SetValue(IsFocusedProperty, value); }
        }

        public static readonly DependencyProperty HasInitialFocusProperty =
            DependencyProperty.Register(
                "HasInitialFocus",
                typeof (bool),
                typeof (FocusBehavior),
                new PropertyMetadata(false, null));

        public bool HasInitialFocus
        {
            get { return (bool) GetValue(HasInitialFocusProperty); }
            set { SetValue(HasInitialFocusProperty, value); }
        }
    } 
```

然后在 xaml 中：

```
 <TextBox>
            <i:Interaction.Behaviors>
                <behaviors:FocusBehavior HasInitialFocus="True"
                                         IsFocused="{Binding IsFocused}" />
            </i:Interaction.Behaviors>
        </TextBox> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T21:54:32.340

使用 Pedros 示例，以及我之前在我的应用程序中实现的其他服务，我在 vb.net 中组合了以下解决方案：

创建一个IFocus接口，这个接口可以通过焦点服务或者一个Mock来实现

```
Public Interface IFocusInterface
    Sub Focus()
End Interface 
```

创建一个 IFocusable 接口。这将由 ViewModel 实现并接受一个实现 IFocusInterface 的对象。

```
Public Interface IFocusable
    Property FocusService As IFocusInterface
End Interface 
```

使用单例模式实现焦点接口

```
Imports Microsoft.Phone.Controls

Public NotInheritable Class FocusService
    Implements IFocusInterface

    Private Sub New()
    End Sub

    Private Shared ReadOnly m_instance As New FocusService
    Public Shared ReadOnly Property Instance() As FocusService
        Get
            Return m_instance
        End Get
    End Property

    Public Sub Focus() Implements IFocusInterface.Focus
        Dim rootFrame = TryCast(Application.Current.RootVisual, PhoneApplicationFrame)
        If Not rootFrame Is Nothing Then

            Dim page = TryCast(rootFrame.Content, PhoneApplicationPage)

            If Not page Is Nothing Then
                page.Focus()
            Else
                Throw New Exception("Unable to Cast the Root Frame Content into an Application Page")
            End If

        Else
            Throw New Exception("Unable to Cast the RootVisual into a PhoneApplicationFrame")
        End If

    End Sub

End Class 
```

在您的 ViewModel 中实现 IFocusable，并确保在构建 ViewModel 后将 Focus Service Singleton 传入 ViewModel。

```
Public Class MyViewModel
    Implements INotifyPropertyChanged
    Implements IFocusable

    ' Property for the Focus Service
    <Xml.Serialization.XmlIgnore()> Public Property FocusService As IFocusInterface Implements IFocusable.FocusService

    Public Sub Focus()
        If Not FocusService Is Nothing Then
            FocusService.Focus()
        Else
            Throw New Exception("ViewModel hasn't been passed a Focus Service")
        End If
    End Sub

End Class

Dim tMyViewModel as New MyViewModel
tMyViewModel.FocusService = Vacation_Calc_Model.FocusService.Instance 
```

# iphone - 您可以从 iOS 应用程序链接到 FB 页面并让它转到 FB 应用程序（如果存在）吗？

> ID：10166220
> 
> 赞同：0
> 
> 时间：2012-04-15T21:20:39.270
> 
> 标签：iphone, ios, facebook

我想在我的应用程序中包含一个链接，如果它存在于设备上，它将在 FB 应用程序中打开该页面，否则它将在 Safari 中打开它。我不是在谈论用代码来做这件事的方法——代码已经到位。

该应用程序有一个“新闻”页面，每个新闻项目都有一个链接。该链接与新闻数据一起下载并显示在应用程序中。如果用户有 FB 应用程序，我想打开它。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T01:04:08.950

我过去用过这样的东西

```
 NSString *fblink = [NSString stringWithFormat:@"fb://page/%@", facebookAccount];
    NSURL *url = [NSURL URLWithString:fblink];

    //Open in safari if fb app is not installed
    if (![[UIApplication sharedApplication] openURL: url]) {
        //fanPageURL failed to open.  Open the website in Safari instead
        NSURL *webURL = [NSURL URLWithString:@"http://www.facebook.com/FANPAGEADDRESSHERE"];
        [[UIApplication sharedApplication] openURL: webURL];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T12:12:21.553

在 iOS 6 更改后尝试此操作的任何人的快速说明，他们已更改它，因此页面不再工作。尝试改用配置文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T00:48:50.013

我建议阅读 URL 方案。

[http://blog.anscamobile.com/2011/12/using-app-url-schemes-in-ios/](http://blog.anscamobile.com/2011/12/using-app-url-schemes-in-ios/)

# backbone.js - 主干：模型和视图之间的关系

> ID：10166221
> 
> 赞同：0
> 
> 时间：2012-04-15T21:21:03.603
> 
> 标签：backbone.js

在我正在查看的主干应用程序的一个视图（视图 A）中（它有多个模型），它的初始化程序中有这条线

```
 this.model.bind('change', this.setText, this); 
```

在另一个视图（视图 B）中，它的初始化程序中有这一行

```
this.model.bind('change', this.render, this); 
```

但是，在任何一个视图中都没有指示它连接到哪个模型。即没有声明是什么`'model'`。这是否意味着任何触发 a 的模型`'change'`都会`this.setText`在视图 A 以及（同时） `this.render`在视图 B 中触发？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T21:32:06.123

来自[精美手册](http://documentcloud.github.com/backbone/#View-constructor)：

> **构造函数/初始化** `new View([options])`
> 
> [...] 有几个特殊选项，如果通过，将直接附加到视图：`model`、`collection`、`el`、`id`、`className`和。`tagName``attributes`

所以当你用这个实例化一个视图时：

```
var v = new SomeView({ model: m }); 
```

Backbone 将自动设置`this.model`为`m`inside `v`，这将在`initialize`调用之前完成。查找具有这些`bind`调用的视图的构造函数调用，您应该在`model`实例化视图时看到提供的。

> 这是否意味着任何触发 a 的模型`'change'`都会`this.setText`在视图 A 以及（同时）`this.render`在视图 B 中触发？

不，每个视图（在这种情况下）都有自己的模型，在实例化视图时提供，事件将仅来自该模型。

# asp.net - 使用变量名将 linq 更新为 sql？

> ID：10166228
> 
> 赞同：0
> 
> 时间：2012-04-15T21:22:22.870
> 
> 标签：asp.net, vb.net, linq-to-sql

我几乎是使用 ASP.net 和 linq to sql 的初学者，但我想做的是根据变量更新表的列。此刻我有

```
Dim db As New sqldcDataContext
Dim update As tableName = (From i in db.tableNames _ Select i) 
```

我认为这选择了一切，我怎么会有两个变量，一个存储要更新的表，另一个存储什么列。这可能吗？

编辑：抱歉不清楚我试图让它尽可能动态，所以我不必输入确切的表/列名称。类似这样的东西，但在 linq to sql 语法中。

```
mysql_query("SELECT * FROM ". $table ." WHERE `" . $column . "` = \"" . $data ."\"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T07:48:16.930

也可以在谓词构建器的帮助下创建动态查询。

[http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

我认为这个博客可能会对你有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T21:32:07.733

您的问题并不完全清楚，我不确定您要达到的目标。但是，更新通常通过以下方式使用 LINQ 完成：

假设您要更新“客户”表的示例，将整个列“LastLoginDate”设置为今天。您还需要将此表从“服务器资源管理器”“拖动”到您的数据上下文设计器。

```
Dim db as new sqldcDataContext()
dim customers = (from c in db.Customers select c)
For each customer in customers
    customer.LastLoginDate = DateTime.Now();
Next

db.SubmitChanges() 
```

# asp.net-mvc-3 - 如何从 MVC3 中的控制器调用 javascript 函数

> ID：10166235
> 
> 赞同：4
> 
> 时间：2012-04-15T21:23:19.467
> 
> 标签：asp.net-mvc-3

我环顾四周，找不到解决方案，因此我发现自己在这里。根据我的阅读，我可以使用 RegisterClientScript 或 RegisterClientScriptBlock 在 asp.net Web 表单中执行此操作。我在任何 MVC3 文档中都找不到这个。我在 MVC 3 视图中具有以下功能：

我的测试视图：

```
<div data-role="content">

<div id="mappingTable"></div>

</div>

 </section>
 @section Scripts {
 <script type="text/javascript">

    $("#jqm-home").live('pageinit', function () {
        addTableRow(' adding data to table <br/>');
    });

    //I want to the able to call the function from the controller.
    function addTableRow(msg) {
        $('#mappingTable').append(msg);        
    }; 

   </script>
 } 
```

在我的控制器中，我有以下内容。

```
public class MyTestController : Controller
    {
      #region Class Constractor

       public MyTestController()
       {            
           Common.ControllerResourceEvent += new System.EventHandler<ResourceEventArgs>(Common_ResourceEvent);
       }

    private void Common_ResourceEvent(object sender, ResourceEventArgs e)
    {
        //I want to call the function addTableRow and pass ResourceEventArgs 
    } 

    #endregion Class Constractor      

    public ActionResult Index()
    {
        return View();
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-15T22:31:54.560

您不能真正从控制器“调用”客户端 Javascript。你可以做什么，假设你想做一些类似于 RegisterClientScript 的事情，将 JS 代码注入你的页面，可以很容易地完成。您可以创建一个具有字符串属性的模型（只不过是一个简单的类）。将属性值设置为要注入的客户端 JS 代码。将模型传递给视图。在您的视图中，引用该属性 - 如下所示：

```
public class SampleModel
{
   public string JS { get; set; }
}

public ActionResult Index()
{
    var model = new SampleModel();
    model.JS = "addTableRow('My Message');";
    return View(model);
}

// In the view (at the top - note the cast of "model" and "Model"
@model Namespace.SampleModel
// Then your script 
<script type="text/javascript">
   @Model.JS 
```

或者，如果您不想创建模型，可以通过 ViewBag 传递它，它是一个动态对象：

```
public ActionResult Index()
{
    ViewBag.JS = "addTableRow('My Message');";
    return View();
}

// In the view:
<script type="text/javascript">
   @ViewBag.JS 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T12:01:45.273

使用 JavaScriptModel ( [http://jsm.codeplex.com](http://jsm.codeplex.com) )，您可以通过以下方式进行操作：

```
public ActionResult Index()
{
    this.AddJavaScriptFunction("addTableRow", "My Message");
    return View();
} 
```

如果您创建一个带有函数的 js 文件并将表格作为列表添加到 js 变量中，那就更好了。然后 js 函数将遍历列表并添加表。

```
public ActionResult Index()
{
    this.AddJavaScriptVariable("TableListInJavaScript", tableList);
    this.AddJavaScriptFunction("MyTableReadyFunction");
    return View();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T23:07:18.617

我认为你可能从错误的角度来这里。您不能直接从控制器调用页面上的 javascript。你只能做相反的事情，即从javascript调用控制器方法，使用ajax，有几个jquery ajax函数可以帮助你做到这一点。最有用的是 $.post()

我最常使用的模式如下：

在网页中：

```
$.post('TestController/TestGetPartialView','{param1:"string to add"}', function (data) {

    ('#mappingTable').append(data); // this adds the string to the mapping table.

},'html'); 
```

在控制器中：

```
[HttpPost]
public PartialViewResult TestGetPartialView(string param1)
{   
   return PartialView("TestPartial", param1);
} 
```

部分观点：

```
@model string
<p> Model </p> 
```

这会将一个字符串从页面传递回控制器，然后传递到局部视图，然后再传递回页面。这可能不是您想要做的，但它是如何使用 ajax 和部分视图传递数据的示例，我认为这可能会对您有所帮助。

# meteor - 这是在流星中执行登录逻辑以显示简单的“无效登录”消息的正确方法吗？

> ID：10166237
> 
> 赞同：1
> 
> 时间：2012-04-15T21:23:28.910
> 
> 标签：meteor

我开始这个示例项目来学习流星：

[https://github.com/andrewarrow/question-raven/](https://github.com/andrewarrow/question-raven/)

我试图复制一个流行的问答网站功能只是为了学习流星。

在我的登录表单上方，我在模板中有这个：

```
 {{#if invalid }}
<div style="background-color: yellow; padding: 3px 3px 3px 3px;">
login invalid, please try again.
</div>
{{/if}} 
```

我开始这样的登录逻辑：

```
Template.hello.events = {
  'click #login' : function () {
    var email = $('#email').val();
    var password = $('#password').val();
    if (false) {
      Session.set('user_id', 1);
    } else {
      Session.set('invalid', 1);
    }
  }
}; 
```

然后为了使无效变量在模板中工作，我有这个函数：

```
Template.hello.invalid = function () {
  return Session.get('invalid') != null;
}; 
```

这是正确的方法吗？模板引用的每个变量都必须是函数吗？我是否应该使用会话存储来记录登录无效，以便函数可以返回真/假？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T01:38:25.913

您现在可以为此使用accounts-base、accounts-ui 和accounts-*（各种登录服务）包。在调用 loginWith* 方法并提供一个回调（如果发生不好的事情时会出错）之后，您可以使用 Session 为失败的登录创建反应通知。例子：

```
Template.hello.events = {
  'click #login' : function () {
    var email = $('#email').val();
    var password = $('#password').val();
    Meteor.loginWithPassword(email, password, function (err) {
      if (err) Session.set("loginError", true);
    });
  }
}; 
```

新文档很好地解释了它：

[http://docs.meteor.com/#meteor_loginwithpassword](http://docs.meteor.com/#meteor_loginwithpassword)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T04:10:43.033

简短的回答 - 你不能这样做（还）。但我相信流星团队正在努力工作，因为目前它是框架中的一个大漏洞。

在此示例中执行此操作的方式在任何客户端框架中都是不安全的，因为您正在设置 javascript 变量的值以强制执行身份验证。我可以`Session.set('invalid', null);`在 chrome 控制台中运行并自己登录。

登录的规范方法是让服务器对密码进行哈希处理并将其与数据库中的用户名/密码表进行比较，如果有效，则在另一个数据库表中创建一个具有过期日期时间的会话令牌，然后将会话令牌提供给浏览器向您发送未来的请求（通常存储在 cookie 中）。这在 Meteor 中不起作用，因为客户端对数据库中的任何集合具有完全的读/写访问权限。

您可能会运行一个 Meteor 不知道的完全独立的数据库，并在使用 node.js 代码访问它的服务器上设置流星函数（完全使用 pybassing 流星集合）。您可以仅发布/订阅该数据库中的公共数据，以查看客户端中的数据自动更新。这真的很混乱，我什至不肯定它会起作用——如果你现在需要身份验证，最好不要使用流星。

部分解决方案（并且非常容易实现）是使用 HTTP 身份验证。它不适用于用户系统，因为没有人可以注册，但它会阻止陌生人看到您的代码/访问您的数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T22:06:16.030

如果您想了解登录错误的更多详细信息，Meteor 实际上会将错误参数中的“原因”字符串传递给 Meteor.loginWithPassword 的回调。这就是我实现 Meteor.loginWithPassword 的方式：

```
Meteor.loginWithPassword(username, password, function(error) {
  if(error !== undefined){
    setAlert('error', 'Error in processing login. ' + error.reason + '.');
  }
}); 
```

# java - 在 java google app engine 应用程序上执行 python

> ID：10166240
> 
> 赞同：0
> 
> 时间：2012-04-15T21:25:04.960
> 
> 标签：java, python, google-app-engine, jython

我想从 java google app engine 应用程序执行 python。我可以将一些库用作 jython，但最好使用本机 python 并访问真正的 python api。

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T21:49:44.047

您不能在同一应用程序版本中部署 python 和 java 代码。但是您可以在 java 和 python 中运行不同版本的 apppot 应用程序。

因此，您可以简单地将它们部署到不同的版本。注意版本不必是数字。您可以将您的 java 代码部署到版本“java”，相应的 url 将是[http://java.YourApp.appspot.com](http://java.YourApp.appspot.com)；并使用版本“py”将你的 python 部署到[http://py.YourApp.appspot.com](http://py.YourApp.appspot.com)

您可以使用 JSON（更准确地说是 JSONP [用于跨站点请求]）[http://code.google.com/webtoolkit/tutorials/1.6/Xsite.html](http://code.google.com/webtoolkit/tutorials/1.6/Xsite.html)或 Taskqueue让 java 和 python 版本相互通信

# java - 错误Jsp添加减去数字

> ID：10166241
> 
> 赞同：-1
> 
> 时间：2012-04-15T21:25:09.033
> 
> 标签：java, html, jsp

这个网络应用程序是一个简单的加法和减法计算器。我的问题是加法和减法按钮不起作用。在我尝试使用 switch 语句之前，但现在我正在使用 if 语句但仍然不起作用

```
 <%
    String name = (String) session.getAttribute("name");
    if (name==null) {
            name = request.getParameter("name");
            if (name!=null) session.setAttribute("name",name);
    }

    String sum = (String) session.getAttribute("sum");
    if (sum==null) {
            sum = "0";
            session.setAttribute("sum",sum);
    }
    int isum = Integer.parseInt(sum);

    String number = request.getParameter("number");
    if (number==null) number = "0";
    int inumber = Integer.parseInt(number);
    if(request.getParameter("add") != null){ 
    isum += inumber;
    session.setAttribute("sum",""+isum);
    }
    if(request.getParameter("subtract") != null){
    isum += inumber;
    session.setAttribute("sum",""+isum);
    }
    %>
    <html>
    <head>
    <title>Adding Machine</title>
    </head>
    <body>
            <form method='get' action='adder.jsp'>
    <%
    if (name==null) {
    %>
                    <p>
                            Name: <input type='text' name='name' id='name'>
                    </p>
                    <p>
                            <input type='submit' name='submit' id='submit' value='signin'>
                    </p>
    <%
    } else {
    %>
                    <p>Welcome, <%=name%>!</p>
                    <p>Current sum is: <%=isum%></p>
                    <p>
                            Number to add: <input type='text' name='number' id='number' value='add'>
                    </p>
                    <p>
                         <input type='submit' name='submit' id='submit' value='add'>
                    </p>
                    <p>
                          <input type='submit' name='submit' id='submit' value='subtract'>
                    </p>
    <%
    }
    %>
            </form>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T21:28:47.080

用双引号替换你的单引号

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T21:30:22.043

因此，如果您尝试将某些内容分配给长度大于 1 (one) 的 char / Character ，则会发生无效字符常量。您需要 在 switch 语句中为所有其他属性放置重复`case 'add':`。`case "add":`

# ruby - 红宝石字符串方法

> ID：10166245
> 
> 赞同：0
> 
> 时间：2012-04-15T21:26:04.027
> 
> 标签：ruby

在我的程序中，我想为字符串中的双字母添加一个方法。我的问题是有一个公共方法吗？例如：

> `'The'`→`TThhee'`

这是我所拥有的：

```
puts "Please enter text: "
input = gets
letters = input.chomp.to_s
puts "You entered: " + letters + "."

list_letters = letters.split(//)
list = list_letters.join(". ")* 2.to_i  

puts "Your text is made up of the letters: " + list + "." 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T21:29:23.167

```
letters.gsub(/(.)/, '\1\1') 
```

甚至更短：

```
letters.gsub(/./, '\&\&') 
```

舒服一点：

```
class String
  def char_duplicate
    self.gsub(/./, '\&\&')
  end
end

puts "abc".char_duplicate #aabbcc
puts "abca".char_duplicate #aabbccaa 
```

* * *

您的示例代码有所不同。也许你想做类似的事情：

```
 letters.split(//).map{|x| x * 2 }.join 
```

或者

```
 letters.each_char.map{|x| x * 2 }.join 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T21:41:38.850

只是要与众不同：

```
(['The'.each_char.to_a]*2).transpose.join 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T21:36:38.853

即使有些做作，您也可以在一行中完成所有操作。我已经进行了注入，因为我认为不复制空格会很好。

```
>> "foo bar".chomp.split("").inject([]) { |a,l| l =~ /\S/ ? a << l*2 : a << l }.join("")
=> "ffoooo bbaarr" 
```

编辑：再想一想，你也可以

```
>> "foo bar".gsub(/\S/, '\&\&')
=> "ffoooo bbaarr" 
```

去展示我最近做了多少 Ruby =)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T21:40:56.287

我会像@knut 那样做。然而，为了有趣的多样性，这里有更多：

```
irb(main):002:0> s.chars.map{ |c| c*2 }.join
#=> "TThhee"

irb(main):004:0> s.chars.zip(s.chars).join
#=> "TThhee"

irb(main):005:0> s.chars.inject(""){ |d,c| d << c << c }
#=> "TThhee"

irb(main):010:0> "".tap{ |d| s.each_char{ |c| d << c*2 } }
#=> "TThhee" 
```

# r - F 统计量和 p 值

> ID：10166246
> 
> 赞同：-4
> 
> 时间：2012-04-15T21:26:09.617
> 
> 标签：r

我正在做一个项目，其中我有三个因素，我正在测量蜡烛燃烧所需的长度。这是我的数据：

```
 Size    Brand   Scent    time
   1        1      1        255
   1        1      2        225
   1        2      1        283
   1        2      2        338
   1        3      1        192
   1        3      2        229
   2        1      1        1278
   2        1      2        1496
   2        2      1        3897
   2        2      2        2781
   2        3      1        1038
   2        3      2        1439 
```

这就是我在 R 中为分析 bur 所做的事情，由于某种原因它不会给我 F 统计数据和 p 值。

```
> attach(data)
> fsize <- factor(Size)
> fbrand <- factor(Brand)
> fscent <- factor(Scent)
> model1 <- aov(time~fsize*fbrand*fscent)
> summary(model1) 
```

```
 Df Sum Sq Mean Sq
fsize                1 2507.1  2507.1
fbrand               2  829.8   414.9
fscent               1    4.4     4.4
fsize:fbrand         2  700.0   350.0
fsize:fscent         1    7.3     7.3
fbrand:fscent        2   89.5    44.8
fsize:fbrand:fscent  2  101.4    50.7 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T22:26:20.483

如果这是我的功课，在阅读完以上所有评论后，我可能会编写一些这样的代码并稍微研究一下，并尝试思考它与我已经收到的评论之间的关系。

PS 然后，为了额外的功劳，我可能会使用贝叶斯方法尝试同样的事情。

```
my.data <- matrix(c( 
   1 ,       1,      1,        255,
   1 ,       1,      2,        225,
   1 ,       2,      1,        283,
   1 ,       2,      2,        338,
   1 ,       3,      1,        192,
   1 ,       3,      2,        229,
   2 ,       1,      1,        1278,
   2 ,       1,      2,        1496,
   2 ,       2,      1,        3897,
   2 ,       2,      2,        2781,
   2 ,       3,      1,        1038,
   2 ,       3,      2,        1439),  nrow = 12, byrow=T, 
  dimnames = list(NULL, c("Size", "Brand", "Scent",  "time")) )

my.data <- as.data.frame(my.data)

fsize  <- factor(my.data$Size)
fbrand <- factor(my.data$Brand)
fscent <- factor(my.data$Scent)

model1 <- aov(my.data$time ~ fsize * fbrand * fscent)
summary(model1)

model2 <- aov(my.data$time ~ fsize + fbrand + fscent)
summary(model2)

my.data <- matrix(c( 
   1 ,       1,      1,        255,
   1 ,       1,      2,        225,
   1 ,       2,      1,        283,
   1 ,       2,      2,        338,
   1 ,       2,      2,        300,
   1 ,       3,      1,        192,
   1 ,       3,      2,        229,
   2 ,       1,      1,        1278,
   2 ,       1,      2,        1496,
   2 ,       2,      1,        3897,
   2 ,       2,      2,        2781,
   2 ,       3,      1,        1038,
   2 ,       3,      2,        1439),  nrow = 13, byrow=T, 
  dimnames = list(NULL, c("Size", "Brand", "Scent",  "time")) )

my.data <- as.data.frame(my.data)

fsize  <- factor(my.data$Size)
fbrand <- factor(my.data$Brand)
fscent <- factor(my.data$Scent)

model3 <- aov(my.data$time ~ fsize * fbrand * fscent)
summary(model3)

model4 <- aov(my.data$time ~ fsize + fbrand + fscent)
summary(model4) 
```

# css - 在 CSS 中使用 :before 和 :after 伪元素创建这样的边框？

> ID：10166250
> 
> 赞同：17
> 
> 时间：2012-04-15T21:26:17.347
> 
> 标签：css, border, pseudo-element

# 客观的

我希望能够在 css 中创建这样的边框[，](http://lifeofstrange.com/footer.jpg)也许使用伪元素然后是背景图像。

# 代码

## HTML

```
<div id="footer"></div> 
```

## CSS

```
#footer {
    background: #4b4b4b;
    color: #868686;
    padding: 0;
    position: relative;
    height: 100px;
    width: 900px;
}

#footer:before {
    content: "";
    display: block;
    width: 220px;
    background-color: #e1e1e1;
    height: 8px;
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-15T21:35:35.667

看下面的片段，这是你想要的吗？

```
body {
    background: silver;
    padding: 0 10px;
}

#content:after {
    height: 10px;
    display: block;
    width: 100px;
    background: #808080;
    border-right: 1px white;
    content: '';
}

#footer:before {
    display: block;
    content: '';
    background: silver;
    height: 10px;
    margin-top: -20px;
    margin-left: 101px;
}

#content {
    background: white;
}

#footer {
    padding-top: 10px;
    background: #404040;
}

p {
    padding: 100px;
    text-align: center;
}

#footer p {
    color: white;
}
```

```
<body>
    <div id="content"><p>#content</p></div>
    <div id="footer"><p>#footer</p></div>
</body>
```

[JSFiddle](http://jsfiddle.net/breadadams/byepuec1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-08T07:07:10.433

```
#footer:after
{
   content: "";
    width: 40px;
    height: 3px;
    background-color: #529600;
    left: 0;
    position: relative;
    display: block;
    top: 10px;
} 
```

# php - 将 Python 代码转换为 PHP，但要保持“良好、干净和优化”

> ID：10166256
> 
> 赞同：2
> 
> 时间：2012-04-15T21:27:14.057
> 
> 标签：php, python

我的一个朋友告诉我：“看看这段代码，试着在 PHP 中做到简单、简洁、清晰”。

```
colors = ['red', 'blue', 'green', 'yellow']
print 'Choose', ', '.join(colors[:-1]), 'or', colors[-1] 
```

是否可以？你有任何“紧凑但可读”的 PHP 代码吗？

（顺便说一句，我在这里问它是因为这个问题不适合 codereview，也不适合 codegolf）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T21:29:12.713

我会说 PHP 版本总是不如 python 版本，因为 PHP 缺少适当的切片运算符，并且由于只有一种数组类型，您不能很好地选择使用的最后一个元素，`-1`因为它实际上可能是一个有效的键。

```
$colors = array('red', 'blue', 'green', 'yellow');
echo 'Choose ' . implode(', ', array_slice($colors, 0, -1)) . ' or ' . end($colors); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T21:37:03.683

```
function english_list($items, $conj) {
    $tail = $conj . array_pop($items);
    return implode(', ', $items) . $tail;
}

$colors = array('red', 'blue', 'green', 'yellow');
echo "Choose ", english_list($colors, " or "), "\n"; 
```

不是那么简洁，但对于不懂该语言的人来说却是可读的。也许*更是如此*。不是 Python 用户，我发现自己不确定是什么`colors[:-1]`意思。（例如，即使我猜它是一个切片......它包括什么？）或者甚至`colors[-1]`，就此而言 - 这在大多数语言中都是完全无效的，并且不会像 Python 专家认为的那样它在大多数其他人中都是如此。

另一方面，不了解 PHP（但了解 C、C++、Java、JS、Perl、Ruby ......甚至 Python）的人仍然会发现它可读。当然，他们可能不知道做什么`array_pop`和`implode`做什么，但他们可以*很*容易地找到它。尝试搜索其中任何一个；PHP 手册——专门针对各自的功能，不少！——是第一个结果。现在试试`:`。:) （好吧，公平地说：“python 数组冒号运算符”。）第一个结果包含答案，但是您必须从几乎所有您对数组了解或不想了解的内容中挖掘出来。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T21:37:58.753

Python以其令人难以置信的紧凑性而闻名，大多数其他语言都更加冗长。

此代码的 PHP 等效项使用更多的行/语句（请注意，这使用了 5.4 中引入的语法）：

```
$colors = ['red', 'blue', 'green', 'yellow'];
echo 'Choose'
    . implode(', ', array_slice($colors, 0, count($colors)-1))
    . ' or '
    . $colors[count($colors)-1]; 
```

当然 's之前的换行符`.`只是为了可读性而不是必需的

# mysql - 改变表后外键错误，现在不能重新创建表，也不能删除它，也不能恢复模式

> ID：10166261
> 
> 赞同：0
> 
> 时间：2012-04-15T21:27:43.267
> 
> 标签：mysql, mysql-workbench, workbench

既不能创建删除也不能恢复架构备份。

![在此处输入图像描述](../Images/0f58738e7256e689f7eaa684fdb49013.png)

**表监视器信息**

![在此处输入图像描述](../Images/20b9dc5da10a5d699497df23c111d2c8.png)

主机名错误日志[在这里](http://pastie.org/3796752)

# javascript - Javascript：在数字范围之间转换，保持正确的比例

> ID：10166266
> 
> 赞同：-1
> 
> 时间：2012-04-15T21:29:01.670
> 
> 标签：javascript, math, range

我有两组代表边界框的像素坐标：

```
top left: 
x: 19757934
y: 25240264

bottom right: 
x: 19759195
y: 25240776 
```

我需要将位于不同数字范围内的另一个点的坐标转换为上述范围，保持原始比率（以找出该点在边界框中的位置）。

```
x: 423
y: 142 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T21:57:09.420

假设用户点击了一个框，它对其他地方的“结果”框做了一些事情，就像一个缩小的框。

```
var from_coords = {x1:50,y1:80,x2:150,y2:180};
var to_coords = {x1:200,y1:230,x2:400,y2:430};
function translate(input_coords) { // input_coords = {x:123,y:123}
    return {
        x:to_coords.x1+(input_coords.x-from_coords.x1)*(to_coords.x2-to_coords.x1)/(from_coords.x2-from_coords.x1),
        y:to_coords.y1+(input_coords.y-from_coords.y1)*(to_coords.y2-to_coords.y1)/(from_coords.y2-from_coords.y1)
    };
}

console.log(translate({x:123,y:123}); // outputs {x:346,y:316} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T21:57:30.087

OK，第一个bounding box是1261x512，使得width/height = 2.462890

我将“不同的数字范围”称为宽度为 W2 和高度为 H1 的框。如果 W2/H2 不等于 2.462890，那么整个练习就毫无意义，因为您需要重新调整宽度或高度。

如果第二个框的左上角不是 (0,0)，则将所有点移动到 (0,0)，然后在进行计算后移回。我假设 (0,0) 是左上角。

因此，您只需要一个维度上的比率。找出 423/W2 是什么，然后乘以 1261。这就得到了 X 偏移量，您将其与 19757934 相加。

通过测量的比率，对于 Y，我们只需乘以：512 * 423/W2，然后加到 25240264。

```
Example: second box is 985x400\. Ratio = 423/985 = 0.429.
0.429 * 1261 = 541; 541 + 19757934 = 19758475.
for Y: 0.429 * 512 = 219; 219 + 25240264 = 25240483. 
```

# apache - Apache Shiro + Guice - 无法让注释工作

> ID：10166270
> 
> 赞同：1
> 
> 时间：2012-04-15T21:29:24.350
> 
> 标签：apache, guice, vaadin, shiro

所以我能够让 Apache Shiro 在 Vaadin 上与 Guice 一起工作（感谢 ShiroWebModule）。Shiro 注释 ( `@RequiresAuthentication`, `@RequiresPermission`) 仅适用于主 Vaadin Application 类和自定义类内部。它们在 CustomComponent/Window 类中不起作用。

我尝试通过提供者将 Window 类注入到 Application 类中，`injector.getInstance`但它仍然无法正常工作......

我是 Guice 和 Shiro 的新手，所以也许我遗漏了什么？

为什么它适用于其他自定义类？这按预期工作（抛出异常）

```
public class TestClassImpl implements TestClass {

    @Override

    public void doSomeWork() {
        //this will throw an exception as expected
        test();
    }

    @RequiresAuthentication

    public void test() {

    }
} 
```

这没有按预期工作（该方法被执行，Apache Shiro 注释被忽略）：

```
 public class LoginView extends CustomComponent {

    public LoginWindow() {
        setCompositionRoot(mainLayout);
        //this will execture but it should not
        test();
    }

    @RequiresAuthentication

    public void test() {

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T06:57:51.567

在运行时使用这样的注解通常涉及 AOP。

使用 Spring AOP，您无法拦截对 self 的调用：这是因为 Spring AOP 生成代理类，并且拦截发生在这些代理上 -> 它无法拦截对 self 的调用。

我怀疑 Guice AOP 以同样的方式工作。

注意：TestClass/Impl 和 LoginView 的区别之一是 TestClass 实现了一个接口；Guice 可能会以不同的方式处理接口代理和“普通类”代理 - 我会尝试更改 TestClass 以扩展抽象类，然后看看那里会发生什么。

# c# - 我可以动态发布视图模型吗？

> ID：10166271
> 
> 赞同：1
> 
> 时间：2012-04-15T21:29:29.880
> 
> 标签：c#, asp.net-mvc-3, dynamic, http-post

在 asp.net mvc3 中，我想要一个通用方法，它可以将 viewmodel 对象从发送到数据库中正确位置的任何位置添加到数据库。为此，我试图传递发布的模型。但是，我在动态执行它时遇到了一点困难。我试过了，但没有用：

看法：

```
(psuedo)
begin form aiming at Add
 fields
input type = submit 
```

控制器动作

```
[HttpPost]
public ActionResult Add(dynamic model,...) 
```

问题是模型永远不会被填充。隐藏字段是，但模型定义的实际字段和帮助器不会进入模型。我意识到仅仅命名它`model`很可能不会正确排列。我确定我是否对模型进行了强类型化，例如`(MyExplicitClass model,...)`它会起作用，但这会破坏动态方法，因为我希望能够发送 class1、class2、class3、class5、class8、class13 等。

有没有办法让这个工作，无论`@model class21`发送什么，`dynamic model`（或等效）都会捕获该对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T21:31:40.937

不，至少在不使用自定义模型绑定器的情况下不会。

您对模型绑定的工作方式存在根本性的误解。您认为模型绑定基于视图中的 @model 工作。这与事实相去甚远。模型绑定通过查看 action 方法中指定的参数来工作。

模型绑定器所做的只是查看为操作方法指定的参数类型，然后查看请求值（查询字符串或帖子）并尝试匹配它们。如果找到匹配项，则实例化该对象。

这里的关键是模型绑定器只实例化action方法的参数中指定的对象。什么对象是“动态的”？它不知道。因此它不能创建任何类型。

编辑：

你可能会发现这个问题很有用

[多态模型绑定](https://stackoverflow.com/questions/7222533/polymorphic-model-binding)

# jquery - 发布到控制器时 MVC 获取空参数错误

> ID：10166272
> 
> 赞同：0
> 
> 时间：2012-04-15T21:29:45.007
> 
> 标签：jquery, asp.net-mvc

我的 mvc 控制器中有这个方法：

```
public void RejectInvoice(int invoiceId)
        {
            var invoice = _unitOfWork.InvoiceRepository.Get((int)invoiceId);

            invoice.Rejected = true;
            invoice.RejectedDateTime = DateTime.Now;

            _unitOfWork.InvoiceRepository.InsertUpdate(invoice);
            _unitOfWork.Save();
        } 
```

在我的脚本文件中，我使用以下方法调用它：

```
$.post('/Invoice/RejectInvoice/'+ 3, function (data) {

                    }); 
```

在萤火虫中，我得到：

![在此处输入图像描述](../Images/fe7c3fbb053e8ab72e77decaf7c82a8a.png)

什么…………？它清楚地表明我已将 3 作为参数提供给它，但随后声称我将其发送为空值？

有人可以告诉我这里发生了什么吗？怎么修？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T21:35:36.670

默认模型绑定器将绑定到一个名为“id”的参数，但您的参数名为 invoiceId，因此它不知道将值绑定到它。一个快速的解决方法是将您的 POST URL 更改为`'/Invoice/RejectInvoice/?invoiceId='+ 3`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T23:08:32.573

如果您正在发帖，您还应该将方法修饰为 [HttpPost] 属性并检查发送的参数，我的建议是：

```
[HttpPost]
public void RejectInvoice(FormCollection collection)
{
    var id = -1;
    if(int.TryParse(collection["invoiceId"], out id))
    {
        var invoice = _unitOfWork.InvoiceRepository.Get(id);

        invoice.Rejected = true;
        invoice.RejectedDateTime = DateTime.Now;

        _unitOfWork.InvoiceRepository.InsertUpdate(invoice);
        _unitOfWork.Save();         
    }

} 
```

至于jQuery：

```
$.post("/Invoice/RejectInvoice/", { invoiceId: "3"}, callback ); 
```

（我想，我上次使用 $.post 已经有一段时间了）

# c - Linux内核源码中遇到的深奥#define宏

> ID：10166275
> 
> 赞同：7
> 
> 时间：2012-04-15T21:30:05.300
> 
> 标签：c, gcc, linux-kernel, c-preprocessor

get_cpu_var 宏定义如下

```
 29 #define get_cpu_var(var) (*({                           \
 30         extern int simple_identifier_##var(void);       \
 31         preempt_disable();                              \
 32         &__get_cpu_var(var); })) 
```

似乎难以理解。我假设它是一种函数宏，它返回一个变量指针（基于星号）或者它是某种函数指针。我什至接近它吗？有人能启发我吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-15T21:35:21.920

您在开始`({`和结束之间看到的`})`是*语句表达式*- GCC 编译器的非标准功能，它允许将复合语句嵌入到 C 表达式中。这种语句表达式的结果是`({})`. 在你的情况下，那将是`&__get_cpu_var(var)`.

`&`运算符应用于`__get_cpu_var(var)`子表达式的结果。这意味着`__get_cpu_var`返回一个左值。如果这确实是 C，那么`__get_cpu_var`也必须是宏，因为在 C 语言中函数不能返回左值。

`&`运算符产生一个指针（整个语句表达式的结果），然后由上述`*`宏定义开头的运算符取消引用。所以，上面的宏本质上等价于`*&__get_cpu_var(var)`表达式。

有些人可能会问为什么它被实现为`*&__get_cpu_var(var)`而不只是`__get_cpu_var(var)`. 这样做是为了保持 的结果的*左*`__get_cpu_var(var)`值性。语句表达式的结果总是一个右值，即使里面的最后一个语句`({})`是一个左值。为了保持结果的左值性，使用了众所周知的`*&`技巧。

这个技巧不限于任何方式的 GCC 语句表达式。它在普通的日常 C 编程中相对经常使用。例如，假设您有两个变量

```
int a, b; 
```

并且您想编写一个表达式，该表达式将返回`a`或`b`作为左值（假设我们要分配`42`给它），具体取决于选择器变量`select`。一个天真的尝试可能如下所示

```
(select ? a : b) = 42; 
```

这是行不通的，因为在 C 语言中，`?:`运算符失去了其操作数的左值性。结果是一个无法赋值的右值。在这种情况下，`*&`诀窍就派上用场了

```
*(select ? &a : &b) = 42; 
```

现在它按预期工作。

这正是原始海报的宏定义如何以及为什么包含一个看似多余的应用`*`and `&`。因此，您可以在分配的任一侧使用上述`get_cpu_var`宏

```
something = get_cpu_var(something);
get_cpu_var(something) = something; 
```

如果没有这个技巧，您将只能`get_cpu_var`在右侧使用。

*在 C++ 语言中，使用引用*可以达到相同的效果。在 C 中我们没有引用，所以我们使用类似这样的技巧。

# node.js - 使用节点代理 http 请求

> ID：10166277
> 
> 赞同：2
> 
> 时间：2012-04-15T21:30:29.530
> 
> 标签：node.js, cross-domain, basic-authentication, reverse-proxy, node-http-proxy

我在一个域上有一个 nodeJs 前端，在另一个域上有一个 rest 后端服务器。

我希望能够从前到后执行 ajax 请求。因此，我打算为此使用反向代理，以绕过同源策略限制。

我的后端 Rest 服务器将使用 Basic auth 或 OAuth 进行保护。我想知道，如果我使用 node-http-proxy 是否可以在代理之前在 http 请求中发送 Authorization 标头，以及如何。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T09:29:03.333

你有很多方法可以做到这一点：

*   您可以使用 node-http-proxy 中间件在反向代理中设置 auth 标头：http: [//blog.nodejitsu.com/http-proxy-middlewares](http://blog.nodejitsu.com/http-proxy-middlewares)

*   您可以要求 http-proxy 模块，创建一个新实例，然后使用所有可用事件。

*   分叉 node-http-proxy 并修补您的版本 http-proxy.js 以包含自定义 basic_auth；

*   滚动您自己的反向代理。使用 node.js 很容易，请查看这篇文章： http: [//www.catonmat.net/http-proxy-in-nodejs/](http://www.catonmat.net/http-proxy-in-nodejs/)

此致，

# c - 手动解析字符串

> ID：10166281
> 
> 赞同：0
> 
> 时间：2012-04-15T21:30:52.663
> 
> 标签：c, string

我正在尝试通过空格手动解析字符串，而不使用 strtok() 或 string.h 中的任何内容。这看起来像正确的方法吗？当我尝试这个时，我一直跳过字符串的末尾。

```
 char cmd[1024];
  int ret = read(STDIN, cmd, 1023);
  cmd[ret-1] = '\0';

     char * args[128];
     int length = 0;
     char * startptr = cmd;
     char * endptr = cmd;

     while(1){
        if(*startptr == '\n' || *startptr == '\0'){
           break;
        }
        if(*startptr == ' '){
           startptr ++;
           endptr ++;
           continue;
        }
        // startptr is placed
        if(*endptr != '\0' || *endptr != '\n' || *endptr != ' '){
           endptr ++;
           continue;
        }
        // both pointers placed
        char * i = startptr;
        for(i = startptr; i != endptr; i++){
           args[length][i-startptr] = *i;
        }
        length ++;
        startptr = endptr;
        if(*endptr == '\0' || *endptr == '\n'){
           break;
        }

     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T23:06:50.197

不是不对的。逻辑表达式必须是'and'而不是'or'。
检查限制会很好，有时可能会产生有趣的效果，例如“将 ARG_MAX_LEN 更改为 2”，您会得到每个单词的第一个字符。可能这段代码会起作用。

```
 char cmd[1024];
 int ret = readf(cmd, 1, 1023, stdin);

 char args[128][ARG_MAX_LEN]; //two dimensional array 
 int length = 0;
 char * startptr = cmd;
 char * endptr = cmd;
 char *ap, *aep;
 if(ret > 0)
   cmd[ret-1] = '\0';
 else
   cmd[0] = '\0';
 while(*startptr != '\n' && *startptr != '\0')
 {
    if(*startptr == ' '){
       endptr = ++startptr ;
       continue;
    }
    // startptr is placed
    if(*endptr != '\0' && *endptr != '\n' && *endptr != ' '){
       endptr ++;
       continue;
    }
    // both pointers placed
    ap = &args[length][0];
    aep = ap + ARG_MAX_LEN - 1;
    while(startptr != endptr && ap != &args[length+1])
      *ap++ = *startptr++;
    if(length >= 128)
       break;
    length ++;
    startptr = endptr;
 } 
```

如果你想获得命令行参数，你也应该寻找字符转义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T21:35:06.977

```
if(*endptr != '\0' || *endptr != '\n' || *endptr != ' '){ 
```

你应该在这里使用 && ：

```
if(*endptr != '\0' && *endptr != '\n' && *endptr != ' '){ 
```

您也没有分配 args[length]，因此当您尝试在那里写入时可能会遇到段错误。您需要先分配空间`malloc`，或者使用二维数组。

您在这里也有一个错误：

```
cmd[ret-1] = '\0'; 
```

-1 将使其覆盖缓冲区中的最后一个字符，或者更糟糕的是，如果文件为空，它将写入`cmd[-1]`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T03:26:26.360

您的方法不对，但（在我看来）都不是您接受的答案（对不起 user1333967）。

除了已经指出的逻辑错误之外，您还有嵌套循环。它们几乎总是表示经过深思熟虑的代码，应该避免（在某些情况下它们是明智的，但这不是一种）。

函数是你的朋友，尤其是对于字符串处理。如果您不想使用标准库的 strtok、strcpy、strchr 等（出于某种奇怪的原因 - 也许是家庭作业？）自己编写。它们很容易编写，将简化您的代码并使其可读。忽略任何抱怨函数调用开销的人；99% 的时间它们都不重要。

# google-app-engine - gwt-rpc 中的错误

> ID：10166282
> 
> 赞同：1
> 
> 时间：2012-04-15T21:30:56.947
> 
> 标签：google-app-engine, gwt-rpc

我创建了一个 RPC 服务，它在 appengine 共享文件夹中创建了一个 SportsLeagueAndroidRequest。当我跑去尝试我的项目时，它显示一个错误

[错误] [sportsleagueandroid] - 延迟绑定结果类型“edu.columbia.sportsleagueandroid.shared.SportsLeagueAndroidRequest”不应该是抽象的

SportsLeagueAndroidRequest是你创建RPC服务时自动生成的接口！！

如何消除此错误？

```
final EventBus eventBus = new SimpleEventBus();

final MyRequestFactory requestFactory = GWT.create(SportsLeagueAndroidRequest.class);
requestFactory.initialize(eventBus);

sendMessageButton.addClickHandler(new ClickHandler() 
{
public void onClick(ClickEvent event) 
{
    //String recipient = recipientArea.getValue();
    //String receivers[] = recipient.split(",");
    String message = messageArea.getValue();
   // setStatus("Connecting...", false);
    sendMessageButton.setEnabled(false);
    sendNewTaskToServer(message);
}
private void sendNewTaskToServer(String message) {
    SportsLeagueAndroidRequest request = requestFactory.sportsLeagueAndroidRequest();
    StadiumProxy task = request.create(StadiumProxy.class); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T22:55:00.633

```
final MyRequestFactory requestFactory = GWT.create(SportsLeagueAndroidRequest.class); 
```

您正在`GWT.create`调用`RequestContext`. 它需要在 a 上调​​用，如此[处](https://developers.google.com/web-toolkit/doc/latest/DevGuideRequestFactory#interface)`RequestFactory`所述。

您需要创建一个接口，该接口`RequestFactory`在我链接到的示例中进行扩展。如果你查看你的`sendNewTaskToServer`方法，你实际上是`sportsLeagueAndroidRequest()`从`SportsLeagueAndroidRequest`. 看？您应该`sportsLeagueAndroidRequest()`从您`RequestFactory`之前使用创建的界面调用`GWT.create`。

RequestFactory 生命周期如下所示：

1.  创建一个新的`RequestFactory`使用`GWT.create(MyRequestFactory.class)`
2.  创建一个`RequestContext`使用`myRequestFactory.myRequestContext()`
3.  触发请求，使用`myRequestContext().myDomainMethod().fire()`

# phpmyadmin - PhpMyAdmin 错误 2002

> ID：10166287
> 
> 赞同：0
> 
> 时间：2012-04-15T21:31:21.463
> 
> 标签：phpmyadmin, wamp, easyphp

我目前在使用 PhpMyAdmin 时遇到问题，我正在使用 EasyPHP，每次尝试访问 PhpMyAdmin 时，都会出现以下错误：

```
MySQL said: Documentation
#2002 - The server is not responding (or the local MySQL server's socket is not correctly configured) 
```

我已经尝试重新安装 EasyPHP 大约 5 次，多次重新启动机器，玩弄配置文件，但没有任何效果。在我格式化硬盘以解决这个问题之前，有人有什么建议吗？我目前正在运行 Windows 7 x64。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T18:18:47.513

我猜你已经解决了这个问题（或没有？），但我认为这是一个常见问题，我将发布我是如何提出解决方案的。我做了什么，在玩了一整天左右的错误之后，我通过[wamp 网站](http://www.wampserver.com)下载了新版本的 MySQL （在底部下载 MySQL 插件）安装它后，我点击了 Wamp Tray 图标。单击 MySQL --> 版本 --> 并选择新版本。它自己重新启动，它就像一个魅力！希望这会帮助一些人:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-23T17:51:47.867

我只花了 30 分钟试图帮助一位同事调试一个不允许他查看 PHPMyAdmin 模块的 EasyPHP 安装。

他在 Windows 7x86 PC 上使用 EasyPHP14.1vc11 开发版库存安装。他右键单击托盘图标，转到“管理”，然后单击主页上 PHPMyAdmin 模块旁边的蓝色“打开”按钮。

他收到的错误信息是：

```
#2002 - No connection could be made because the target machine actively refused it.

The server is not responding (or the local server's socket is not correctly configured). 
```

经过大量的调试和反复试验，我们发现问题是即使关闭了 EasyPHP，他的计算机上仍然存在一个 mysql 进程（通过 Ctrl+Alt+Delete -> 任务管理器找到）。该进程必须已终止但未正确终止，并且它阻止了 PHPMyAdmin 与数据库建立另一个连接。停止该进程会删除错误消息并允许程序按预期工作。

# html - 如何更优雅地禁用按钮

> ID：10166288
> 
> 赞同：25
> 
> 时间：2012-04-15T21:31:29.840
> 
> 标签：html, asp.net-mvc-3, razor

我的观点之一是以下剃须刀代码：

```
@if (item.PMApproved != true) {
                    <input type="button" class="btnresetinvoice button" value="Reset" data-invoiceid="@item.InvoiceId" />
                }
                else {
                    <input type="button" class="btnresetinvoice button" value="Reset" data-invoiceid="@item.InvoiceId" disabled="disabled" />
                } 
```

相当粗糙。基本上我想在特定条件下禁用该按钮，因为您可以从代码中解决问题。这样做更可取的方法是什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-11-16T01:37:13.850

由新的扩展方法辅助的以标记为中心的解决方案：

```
public static class HtmlExtensions
{
   public static HtmlString DisabledIf(this HtmlHelper html, bool condition)
   {
      return new HtmlString(condition ? "disabled=\"disabled\"" : "");
   }
} 
```

在您看来，重用 wazoo：

```
<button type="reset" @Html.DisabledIf(someCondition)>Clear Fields</button> 
```

很好地可重用，并且渲染的标记在空白方面非常干净：

```
<button type="reset" disabled="disabled">Clear Fields</button> 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-04-15T21:36:27.733

我不知道您使用的是什么语言，但您可以将您的`if`陈述移近两行之间的实际差异：

```
<input type="button" class="btnresetinvoice button" value="Reset"
       data-invoiceid="@item.InvoiceId"
       @{ if(item.PMApproved != true) { 
             @:disabled="disabled" 
        } }
/> 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-04-25T21:57:14.527

尝试这个

```
<button type="submit" disabled="@(!item.PMApproved)"></button> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-16T06:45:51.113

帮手可以帮助：

```
public static class HtmlExtensions
{
    public static IHtmlString ApproveButton(this HtmlHelper htmlHelper, MyViewModel item)
    {
        var button = new TagBuilder("input");
        button.Attributes["type"] = "button";
        button.Attributes["value"] = "Reset";
        button.AddCssClass("btnresetinvoice");
        button.AddCssClass("button");
        button.Attributes["data-invoiceid"] = item.InvoiceId.ToString();
        if (item.PMApproved)
        {
            button.Attributes["disabled"] = "disabled";
        }
        return new HtmlString(button.ToString(TagRenderMode.SelfClosing));
    }
} 
```

接着：

```
@Html.ApproveButton(item) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-07-15T20:46:14.653

`<input type="button" value="Reset" @{@((!item.PMApproved) ? null : new { disabled = "disabled" })}; />`

不需要那些臃肿的代码，只要保持简单:-)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-04-25T08:40:49.243

```
<button @(isEnabled ? null : "disabled")>Butt</button> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-09-30T06:15:05.170

使用 asp.net mvc5 剃须刀：

```
@if(condition)
{
   <button data-toggle="collapse" data-target="#content">Details</button>
}
else
{
   <button disabled>Details</button>
} 
```

它可以防止尝试从 DevTools 启用按钮，因为 DevTools 看不到剃刀

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-07-25T14:16:11.800

可能的简单方法：

```
<input type="button" @(item.PMApproved ? "disabled" : "") /> 
```

# mysql - MySQL 棘手的双重/三重 JOIN (?)

> ID：10166289
> 
> 赞同：2
> 
> 时间：2012-04-15T21:31:32.460
> 
> 标签：mysql, sql, database, join, social-networking

表结构：

```
 users: uid, name
    friendships: uid1, uid2
    game_membership: gid, uid 
```

基本上我试图获取一个作为函数的查询`gid`，并返回：

```
uid1, name1, uid2, name2 
```

其中仅返回给定表`uid`中的 's 。这是我到目前为止所得到的：`game_membership``gid`

```
SELECT 
   f.uid1 AS id1, 
   u1.name AS name1, 
   f.uid2 AS id2, 
   u2.name AS name2
FROM 
   friendships AS f
WHERE 
   u1.uid in (SELECT uid FROM game_membership WHERE gid = <GID>)
   AND u2.uid in (SELECT uid FROM game_membership WHERE gid = <GID>)
JOIN users AS u1 ON f.uid1 = u1.uid
JOIN users AS u2 ON f.uid2 = u2.uid 
```

我现在刚刚收到一个 MySQL 语法错误。谁能指出我正确的方向？我觉得也许我必须`uid`在表中的 's上再做一个或两个 JOIN `game_membership`，每个一个`uid`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-15T21:38:33.110

我建议你加入 Game_membership 表而不是 where 子句：

```
SELECT 
   f.uid1 AS id1, 
   u1.name AS name1, 
   f.uid2 AS id2, 
   u2.name AS name2
FROM 
   friendships AS f
JOIN game_membership AS user1_gm ON user1_gm.uid = f.uid1
JOIN game_membership AS user2_gm ON user2_gm.uid = f.uid2
JOIN users AS u1 ON f.uid1 = u1.uid
JOIN users AS u2 ON f.uid2 = u2.uid
WHERE user1_gm.gid = <GID> AND user2_gm.gid = <GID> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T21:38:33.243

*像这样向您的FROM*子句添加连接：

```
FROM friends f
    LEFT OUTER JOIN users u1 ON f.uid1 = u1.uid
    LEFT OUTER JOIN users u2 on f.uid2 = u2.uid 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T21:39:21.823

选择：

```
 SELECT 
   f.uid1 AS id1, 
   u1.name AS name1, 
   f.uid2 AS id2, 
   u2.name AS name2
FROM friendships AS f
INNER JOIN users AS u1 
   ON f.uid1 = u1.uid
INNER JOIN users AS u2 
   ON f.uid2 = u2.uid
INNER JOIN game_membership GMS
   ON GMS.UID=U1.UID
INNER JOIN game_membership GMS2
   ON GMS2.UID=U2.UID
WHERE 
   GMS.GID= <GID> and GMS2.GID=<GID> 
```

现在这不是保罗的替代品：D

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-15T21:42:03.527

```
select uid1, u1.name as name1, uid2, u2.name as name2
from friendships 
    join game_membership as g1 on uid1 = g1.uid
    join game_membership as g2 on uid2 = g2.uid
    join users as u1 on uid1 = u1.uid
    join users as u2 on uid2 = u2.uid
where g1.gid = <GID> and g2.gid = <GID> 
```

# javascript - 识别 JavaScript 中的“未定义”

> ID：10166291
> 
> 赞同：-1
> 
> 时间：2012-04-15T21:31:46.607
> 
> 标签：javascript

我有一大块 JavaScript 被包裹在一个 try-catch 块中。它相当复杂，因为它正在加载以前在本地存储中设置的内容。因此，我无法真正提供代码示例。但是，我正在尝试了解在此代码块中是否存在识别“未定义”“位置”或“内容”的好方法。

有谁知道一些可靠的 JavaScript / 调试工具来帮助解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T21:35:25.167

```
console.log(typeof variableName) 
```

你会看到哪个是未定义的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T07:36:46.457

正如 d4rkpr1nc3 指出的那样，使用`typeof`是一个很好的解决方案，但是您不仅应该担心，而且还应该担心`undefined`，`null`因为`typeof null`返回`object`.

所以最有可能的方法是使用这样的函数：

```
function Type(variable) {
    if(variable === null)
        return 'null';
    return (typeof variable);
} 
```

这样你就可以看到它是 null undefined 还是其他类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T21:50:39.440

Chrome 开发工具非常适合单步执行 Javascript 代码。只需在页面上的浏览器中按 F12，然后跳转到脚本选项卡。

您可以单击左侧列上的任意位置（行号所在的位置）来设置断点并使用 F8 -> F10 逐步执行代码（控件位于右上角）。

# php - 如何使用 facebook php SDK 在上传的照片中标记朋友

> ID：10166292
> 
> 赞同：0
> 
> 时间：2012-04-15T21:32:04.813
> 
> 标签：php, facebook, facebook-php-sdk

我这样做是为了创建一个相册并将照片上传到用户的个人资料：

```
$facebook->setFileUploadSupport(true);
$args = array('message' => $statusFinal);
$args['image'] = '@' . realpath($imagePath);
$data = $facebook->api('/me/photos', 'post', $args); 
```

是否可以标记用户朋友？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T21:33:50.453

是的，这是可能的，并在[文档中进行了描述](http://developers.facebook.com/docs/reference/api/photo/#tags)

# java - 方法在 AsynkTask 之后不更新 UI

> ID：10166306
> 
> 赞同：0
> 
> 时间：2012-04-15T21:33:19.317
> 
> 标签：java, android, json, android-asynctask

我写了一个 AsynkTask 女巫连接到数据库，然后将结果放在 UI 中。这工作得很好，但后来我想包括一个对话框或其他东西，其他布局女巫显示一个进度条，然后更新用户界面。

好吧，现在布局发生了变化，最后我有了“testGUI”布局，但它没有用 AsynkTask 数据升级。这是代码。非常感谢。

类 DatabaseAsync 扩展 AsyncTask {

```
 @Override
    protected void onPreExecute(){
        setContentView(R.layout.loading);
    }
    /**
     * Se ejecuta en el hilo secundario, en segundo plano
     */
    @Override
    protected JSONArray doInBackground(Void... params) {
        JSONArray jArray = new JSONArray();
        jArray = DatabaseController
                .rellenarArray("SomeURL");
        return jArray;
    }

    /**
     * Una vez terminado el hilo secundario se ejecuta esto
     */
    @Override
    protected void onPostExecute(JSONArray jArrayFull) {
        setContentView(R.layout.testgui);
         getQuestion(jArrayFull,1);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T21:45:58.363

你**不能使用** `setContentView()`两次。您必须获得对每个视图的引用并通过更改它们的属性来更新它`onPostExecute()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T21:57:51.670

显示进度条后，您的 UI 会如何显示？

如果逻辑如下：

1.  在 UI 上按 btn 或 sth 启动 DB AsyncTask
2.  启动对话活动，其中包含您要经常更新的进度条
3.  数据库任务完成它的工作并使用进度条更新对话活动
4.  一旦 DB 任务完成，它会通知对话活动它已完成
5.  对话活动达到 100% 和/或告诉用户一切正常并完成
6.  用户可以在对话框活动上按下“OK”按钮并返回到用户初始化 DB 任务开始的 UI 活动

...那么您需要使用处理程序来更新对话活动。

一旦用户在第 6 步中按下“确定”，UI 活动就会恢复 - 因此您必须确保要在 UI 活动上显示的任何内容都在您的 UI 活动中得到`onResume`更新

应避免从您的 asynctask 到 UI 的任何直接调用 - 使用处理程序将您的后台工作任务与 UI 通信。

如果您需要有关如何执行此操作的更多信息 - 只需查找处理程序和进度对话框，有几个教程。

如果您不使用处理程序而是直接从后台工作人员活动中调用 UI 活动方法，则 UI 可能会冻结，甚至在最坏的情况下被 Android 系统删除。

如果您不需要经常更新进度条，那么您可以调用：

```
textView.setText(result); in your onPostExecute method 
```

或 UI 元素的任何其他直接设置

# google-maps - 谷歌地图 V3 图标修剪

> ID：10166307
> 
> 赞同：0
> 
> 时间：2012-04-15T21:33:22.587
> 
> 标签：google-maps, icons

我对 Google Maps V3 有疑问，在放大 14 的情况下，一些自定义图标被截断。

如果你放大一步，你可以在这里看到它：http: [//www.praguegayapartments.com 。](http://www.praguegayapartments.com)由于此行为，默认值为 13。无论如何对这个问题有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:57:44.670

几分钟前我遇到了同样的问题，然后发现了我的问题所在。

确保将标记的图标图像放置为`integer`value，而不是`string`.

```
var image = new google.maps.MarkerImage('icon.png',
    new google.maps.Size(parseInt(width), parseInt(height)),
    new google.maps.Point(parseInt(x), parseInt(y)),
    new google.maps.Point(parseInt(pointerX), parseInt(pointerY))  
); 
```

# c++ - 虚拟和非虚拟继承的混合

> ID：10166313
> 
> 赞同：1
> 
> 时间：2012-04-15T21:34:18.973
> 
> 标签：c++, inheritance, multiple-inheritance, virtual-functions

在尝试更深入地分析 C++ 的继承机制时，我偶然发现了以下示例：

```
#include<iostream>

using namespace std;

class Base {
public:
    virtual void f(){
    cout << "Base.f" << endl; 
    }
};

class Left : public Base { //NOT VIRTUAL!!!
public:
void g(){ 
        f();
    }     
};

class Right : public Base{
public:
    virtual void f(){
    cout << "Right.f" << endl; 
    }
};

class Bottom : public Left, public Right{
public:
    Bottom(int arg){ }
    //void f() { }
};

int main(int argc,char **argv)
{
    Bottom* b = new Bottom(23);
    b->g();
} 
```

很明显，调用

```
b->f() 
```

是模棱两可的，所以`f()`对象底部没有唯一的方法。现在，打电话

```
b->g() 
```

工作正常并打印

```
Base.f 
```

好吧，据我所知：

1.  静态类型是Bottom，所以我们称之为它的`g()`方法，因为它是非虚拟的
2.  `g()`方法是继承自Left，所以我们称这个继承方法
3.  现在，`g()`在 Left 尝试调用虚拟方法`f()`。根据 C++ 规范，我们调用`f()`指针的动态类型的方法（即底部）

但是底部没有方法`f()`……至少不是一个独特的方法。为什么这个程序执行`Left::Base::f()`而不是`Right::Base::f()`或者为什么它根本没有说明对`f()`底部的调用是模棱两可的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T21:40:23.363

简短的回答是（如您所述），`Bottom`没有 method `f()`，因此无需尝试调用它。

`Bottom`包含两个子对象`Left`和`Right`. 它们中的每一个都继承自`Base`，因此`Bottom`包含成员函数`Left::f()`and `Right::f()`，但没有`Bottom::f()`。由于底部不覆盖`Left::f()`（`Right::f()`例如使用），`Base::f()`是`Left::g()`.

参看。来自 C++03 标准的 10.3.9 中的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T21:54:54.000

由于没有虚拟继承，因此`Base`您的对象中有两个对象副本`Bottom`。但是，如果您将层次结构向上移动到定义的`Left`位置`g()`，则会有一个`Base`子对象，那就是被调用的子对象。由于它没有在`Left`（或`Bottom`）中被覆盖，它将调用`Base`版本。请注意，`Right::f()`仅覆盖`f()`它自己的`Base`子对象。

`f`直接调用`Bottom`是模棱两可的，因为其中没有将尝试查看它的基础并会找到`f()`并且编译器不知道要使用两者中的哪一个。`Bottom``Left::Base::f``Right::Base::f`

# delphi - Indy idftp 客户端“时间编码的参数无效”

> ID：10166314
> 
> 赞同：2
> 
> 时间：2012-04-15T21:34:18.997
> 
> 标签：delphi, indy10

使用 Delphi 2010 和 Indy 10.5.8.0。

针对服务器 Titan FTP，我在连接时一直收到异常“时间编码的参数无效”（EConvertError）。

服务器日志告诉我：

```
FEAT<EOL>
211-Extensions Supported<EOL> COMB<EOL> MLST type*;size*;modify*;create*;perm*;<EOL>    SIZE<EOL> MDTM<EOL> XCRC<EOL> REST STREAM<EOL> AUTH SSL<EOL> AUTH TLS<EOL> CCC<EOL> PBSZ<EOL> PROT<EOL> EPRT<EOL> EPSV<EOL> DQTA<EOL>211 End<EOL>
TYPE A<EOL>
200 Type set to A.<EOL>
The user "*****" has initiated a session on "217.********:21"
SYST<EOL>
215 UNIX Type: L8<EOL>
SITE ZONE<EOL>
210 UTC-2147483647<EOL>
QUIT<EOL>
221 Session Ended. Downloaded 0KB, Uploaded 0KB. Goodbye *** from 130.******.<EOL> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T15:01:55.043

服务器正在发送错误的 UTC 偏移量以响应该`SITE ZONE`命令。这是泰坦中的一个错误。当 Indy 尝试解析该值以供以后`TDateTime`的操作使用时，解析失败。联系 Titan 开发人员，让他们知道这个错误。同时，我会考虑更新`TIdFTP`以在将来处理该错误。

# c++ - 运算符== 和 list::remove()

> ID：10166315
> 
> 赞同：6
> 
> 时间：2012-04-15T21:34:28.827
> 
> 标签：c++, pointers, tr1

**测试.h**

```
#ifndef TEST_H
#define TEST_H

#include <memory>

template <class Type>
bool operator==(const std::weak_ptr<Type>& wp1, const std::weak_ptr<Type>& wp2)
{
std::shared_ptr<Type> sp1;

if(!wp1.expired())
    sp1 = wp1.lock();

std::shared_ptr<Type> sp2;

if(!wp2.expired())
    sp2 = wp2.lock();

return sp1 == sp2;
}

#endif 
```

**测试.cpp**

```
#include "Test.h"
#include <list>

int main()
{
typedef std::list< std::weak_ptr<int> > intList;

std::shared_ptr<int> sp(new int(5));
std::weak_ptr<int> wp(sp);

intList myList;
myList.push_back(wp);

myList.remove(wp); //Problem
} 
```

由于 myList.remove()，程序无法编译：

> 1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\list(1194): error C2678: binary '==' : no operator found which take a left-hand operand of type 'std:: tr1::weak_ptr<_Ty>' （或没有可接受的转换） 1>
> with 1> [ 1> _Ty=int 1> ]

但是您可以在 Test.h 中看到以下定义：

```
bool operator==(const std::weak_ptr<Type>& wp1, const std::weak_ptr<Type>& wp2) 
```

问题是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T22:17:06.830

运算符重载由[依赖于参数的查找](http://en.wikipedia.org/wiki/Argument-dependent_name_lookup)找到，并且您的函数不适用，因为它未在命名空间`std`（参数类型的命名空间和内部表达式的上下文`std::list::remove`）中定义。

您应该使用`remove_if`来应用自定义谓词函数。通常，不要尝试为无法修改的库中的类型定义运算符。

# spring - 将同一个 bean 实例注入另外两个 bean

> ID：10166318
> 
> 赞同：1
> 
> 时间：2012-04-15T21:35:14.653
> 
> 标签：spring

我希望将相同的 EntityManagerFactory 实例注入到我的两个 spring bean 中。

我尝试：

```
<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalEntityManagerFactoryBean">
    <property name="persistenceUnitName" value="my-app"/>   
</bean>      

<bean id="serverDAO"
    class="com.ehcachedemo.dao.ServerDAO">
    <property name="entityManagerFactory" ref="entityManagerFactory"/>
</bean>

<bean id="testServerDAO"
    class="com.ehcachedemo.test.TestServerDAO">
    <property name="entityManagerFactory" ref="entityManagerFactory"/>
</bean> 
```

但是在运行时，注入了两个不同的 EntityManagerFactory 实例。有小费吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T21:41:38.443

考虑到默认的 spring-managed bean 是一个单例，你的`entityManagerFactory`bean 在两个 DAO 中应该*已经*是同一个实例。

`singleton="true"`您可以通过添加到您的`entityManagerFactory`bean 定义来明确这一点。

所以你的bean定义应该是：

```
<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalEntityManagerFactoryBean"
    singleton="true">
    <property name="persistenceUnitName" value="my-app"/>   
</bean> 
```

# javascript - 如何在 html 文件中包含 nodejs 模块？

> ID：10166324
> 
> 赞同：19
> 
> 时间：2012-04-15T21:36:06.137
> 
> 标签：javascript, node.js, require

首先我是nodejs的新手，其次是我的问题。如何在 html 中加载的 js 中包含 nodejs net 模块？

我的 js 文件看起来像这样。

```
net = require('net');
var client = net.createConnection(8000, '192.168.15.59');
client.on('connect',function(){
console.log('Connected To Server');
});
client.on('data',function(data){
console.log('Incoming data:; ' + data);
}); 
```

我的html文件在下面

```
<html>
<head>
<script type="text/javascript" src="sample.js"></script>
<script type="text/javascript">
function displaymessage(message)
{
alert(message);
client.write(message, encoding='utf8')
}
</script>
</head>

<body>
<form>
<input type="text" id="msg"></input>
<input type="button" value="Click me!" onclick="displaymessage(document.getElementById('msg').value)" />
</form>
</body>
</html> 
```

当我在浏览器中运行 HTML 文件时，出现以下错误

> 未捕获的 ReferenceError：未定义要求

而如果我使用命令行直接在nodejs中运行js文件（比如这个“node sample.js”），那么它工作正常。

提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-15T21:46:19.830

NodeJS runs on the **server**. Script inside HTML files runs on the **client**. You don't include server code on the client. Instead, you send messages to the server code from the client, and interpret the results. So the standard way to do this is to define a resource on the server that generates the content or data you want to generate, and to retrieve that content or data from the client, using just normal page loading or "[ajax](http://en.wikipedia.org/wiki/Ajax_%28programming%29)" (although these days, most people don't use the "x" [XML] in "ajax" [some still do], they use [JSON](http://json.org), text, or HTML).

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-15T21:44:27.033

澄清@TJCrowder 在评论中所说的内容：您尝试做的事情是不可能的。

NodeJS 是一个服务器端框架。您在 NodeJS 中编写的 Javascript 在服务器上执行。您为 HTML 页面编写的 Javascript 在客户端上执行。客户端和服务器不能直接调用对方的方法。这就是 AJAX 和其他异步客户端-服务器通信技术的用途。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T04:17:11.847

之所以“require is not defined”是因为“require”是node.js的关键字，但不是浏览器的关键字。

Node.js 是 javascript 的虚拟机（或运行上下文），浏览器也是 javascript 的虚拟机。但它们有很大的不同。您不能在另一个虚拟机中使用一个虚拟机支持的关键字，就像您可以在 Windows 和 Linux 上使用 C/C++ 一样，但是有许多库要么仅在 Linux 中，要么仅在 Windows 中。

# xna-4.0 - XNA Vector2 路径包含在矩形内

> ID：10166327
> 
> 赞同：1
> 
> 时间：2012-04-15T21:36:43.537
> 
> 标签：xna-4.0, vectormath

您好，我是 XNA 的新手，正在尝试开发一个游戏原型，其中角色使用鼠标单击从一个位置移动到另一个位置。

我有一个代表当前位置的矩形。我使用玩家鼠标输入将目标位置作为 Vector2。我通过 Vector2 减法提取从源到目标的方向向量。

```
//the cursor's coordinates should be the center of the target position
float x = mouseState.X - this.position.Width / 2;
float y = mouseState.Y - this.position.Height / 2;
Vector2 targetVector = new Vector2(x, y);
Vector2 dir = (targetVector - this.Center); //vector from source center to target
                                            //center 
```

我使用平铺地图表示世界，每个单元格都是 32x32 像素。

```
int tileMap[,]; 
```

我想要做的是检查上面的方向矢量是否穿过地图上的任何蓝色瓷砖。蓝色瓷砖在地图上等于 1。

我不知道该怎么做。我考虑过使用线性线方程和三角公式，但我发现它很难实现。我尝试对向量进行归一化并乘以 32 以获得沿向量路径的 32 个像素长度间隔，但它似乎不起作用。谁能告诉我它是否有任何问题，或解决此问题的其他方法？谢谢

```
//collision with blue wall. Returns point of impact
    private bool CheckCollisionWithBlue(Vector2 dir)
    {
        int num = Worldmap.size; //32
        int i = 0;
        int intervals = (int)(dir.Length() / num + 1);  //the number of 32-pixel length 
                                                        //inervals on the vector, with an edge
        Vector2 unit = Vector2.Normalize(dir) * num;    //a vector of length 32 in the same 
                                                        //direction as dir.
        Vector2 v = unit;
        while (i <= intervals & false)
        {
            int x = (int)(v.X / num);
            int y = (int)(v.Y / num);
            int type = Worldmap.getType(y, x);
            if (type == 1) //blue tile
            {
                return true;
            }
            else
            {
                i++;
                v = unit * i;
            }
        }
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:30:15.663

1.  您也需要初始位置，而不仅仅是方向
2.  也许你需要更多的分辨率
3.  什么？删除“错误”评估
4.  下一个职位的计算有点复杂

* * *

```
 private bool CheckCollisionWithBlue(Vector2 source, Vector2 dir)
 {
    int num = 8; // pixel blocks of 8
    int i = 0;
    int intervals = (int)(dir.Length() / num);   

    Vector2 step = Vector2.Normalize(dir)*num;

    while (i <= intervals)
    {
        int x = (int)(source.X);
        int y = (int)(source.Y);
        int type = Worldmap.getType(y, x);
        if (type == 1) //blue tile
        {
            return true;
        }
        else
        {
            i++;
            source+=step;
        }
    }
    return false;
} 
```

这将改进您的代码，但可能不准确......这取决于你想要做什么......

您也许会发现有趣的 bresenham 线算法[http://en.wikipedia.org/wiki/Bresenham](http://en.wikipedia.org/wiki/Bresenham) 's_line_algorithm

你应该意识到你不是在做体积碰撞而是线碰撞，如果船或角色或任何在源位置的东西可能你必须添加更多的计算

# c++ - 重载类型转换运算符，以转换为指向函数的指针

> ID：10166328
> 
> 赞同：3
> 
> 时间：2012-04-15T21:36:51.753
> 
> 标签：c++, casting, function-pointers

我遇到了一些困难，将强制转换重载为指向类的函数运算符的指针。在代码中，我想要的是：

```
typedef int(*funcptrtype)(int);

struct castable {
   operator funcptrtype() {return NULL;}
}; 
```

但我希望能够在不使用`typedef`. 如果你很好奇，我需要这个，因为 c++11 之前的模板别名不可用（所以这个`typedef`技巧在模板化上下文中不是一个选项......）

我通常希望这可以工作：

```
operator int(*)(int)() {return NULL;} 
```

但事实并非如此。编译器（g++ 4.6.1）说：

```
error: ‘&lt;invalid operator>’ declared as function returning a function 
```

这有效：

```
int (* operator()())(int){return 0;} 
```

但是你实际上重载了`operator()`返回一个函数指针:)

标准说：

> 转换类型 ID 不应代表函数类型或数组类型

但它没有说函数指针类型（第一个代码片段无论如何都可以工作......）。

有谁知道 w/o 的正确语法`typedef`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T21:59:48.680

语法不允许这样做：转换运算符声明中的类型是*type-specifier*，而不是*type-id*。您必须使用 typedef 或别名；在模板上下文中，使用通常的替换：

```
template<typename T>
struct something {
  typedef T (*type)(int);
}; 
```

# objective-c - 附加 NSMutableArray

> ID：10166329
> 
> 赞同：0
> 
> 时间：2012-04-15T21:36:54.000
> 
> 标签：objective-c, ios, arrays

我正在尝试`NSMutableArray`用未知大小的字符串列表填充 s。

我已经声明了数组并且正在从 a`plist`成功读取到我的`tempWordStr`中，但是当我尝试从 中追加数组时`tempWordStr`，数组对象仍然存在`null`。我尝试了几个变体（如下），但即使有字符串，对象`_wordLengthArray`仍然是空的。这似乎很基本，但已经挣扎了几个小时。`0``tempWordStr`

```
[_wordLengthArray addObject:tempWordStr];
[self.wordLengthArray addObject:tempWordStr]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T21:54:42.680

在你可以调用一个方法之前，比如`addObject:`对一个对象，比如`NSMutableArray`你需要初始化它。所以在你所有的代码之前，做`_wordLengthArray = [NSMutableArray array];`

更一般地说，如果您在尚未初始化的对象上调用方法（也称为 nil），它只会返回 nil/null。这就是为什么你没有得到任何错误，它只是默默地失败。

# javascript - 警报和确认功能是内置在 JavaScript 中的，还是它们是 DOM 的一部分？

> ID：10166330
> 
> 赞同：7
> 
> 时间：2012-04-15T21:37:02.863
> 
> 标签：javascript

`alert`和函数是`confirm`内置在 JavaScript 中的，还是它们是 DOM 的一部分？

如果您可以向我推荐一个参考资料，该参考资料可以让我轻松判断 JavaScript 直接内置了哪些函数，那么您将获得加分。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T21:37:51.913

这些功能通常只在浏览器环境中可用，但它们不是任何标准的一部分，这被称为 DOM 级别 0。

[https://developer.mozilla.org/en/DOM/window.alert](https://developer.mozilla.org/en/DOM/window.alert)

要更好地了解 javascript 和 DOM 之间的区别，请阅读这篇文章 [https://developer.mozilla.org/en/JavaScript_technologies_overview](https://developer.mozilla.org/en/JavaScript_technologies_overview)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-15T21:41:15.870

它们是通常称为[DOM 级别 0](http://en.wikipedia.org/wiki/Document_Object_Model#Legacy_DOM)的一部分，它不是任何标准的一部分。

MDN 有一个[很好的 JavaScript 参考](https://developer.mozilla.org/en/JavaScript)。它不包括不属于核心 JS 的对象（尽管网站上的其他部分确实涵盖了 DOM 和其他 API）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T21:58:59.750

[alert](http://www.whatwg.org/specs/web-apps/current-work/multipage/timers.html#dom-alert)是 WHATWG HTML 规范中定义的用户提示之一

# android - EditText 字段需要的建议

> ID：10166332
> 
> 赞同：0
> 
> 时间：2012-04-15T21:37:07.020
> 
> 标签：android

嘿伙计们，我正在开发 android 应用程序。我的应用程序包含一个具有两个 EditText 字段的活动。现在，当这个活动开始时，第一个 EditText 字段应该是焦点，并且只有在用户输入一些文本之后，另一个 EditText 字段才变得活跃，并且得到焦点，知道我该怎么做吗？我真的很感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T21:54:16.910

```
If ed1 and ed2 are your two edittexts:
ed2.setEnabled(false);
ed1.addTextChangedListener(new TextWatcher() {

    public void onTextChanged(CharSequence s, int start, int before, int count) {
        // TODO Auto-generated method stub

    }

    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
        // TODO Auto-generated method stub

    }

    public void afterTextChanged(Editable s) {
        // TODO Auto-generated method stub
    ed2.setEnabled(true);   
    }
}); 
```

在上面的代码中，除非用户在 ed1 中输入内容，否则 ed2 将被禁用。一旦用户输入数据，它就会启用

# java - 获取封闭框架的索引

> ID：10166334
> 
> 赞同：0
> 
> 时间：2012-04-15T21:37:16.663
> 
> 标签：java, swing, jinternalframe

我将所有 JInternalFrames 保存在 arraylist 中

```
 ArrayList<JInternalFrame> arr; 
```

所以每一帧都有它的索引。每个帧都包含 JScrollPane。MyJPanel(extends JPanel) 保持框架的索引。

```
JInternalFrame frame = new JInternalFrame("Frame "+Integer.toString(count),true,true,true,true);
MyJPanel panel = new MyJPanel(f.getAbsolutePath(),count);
JScrollPane pane = new JScrollPane(panel);
pane.setPreferredSize(new Dimension(theDesktop.getWidth()/2,theDesktop.getHeight()/2));
frame.getContentPane().add(pane, BorderLayout.CENTER);
frame.pack(); 
```

如何获取已关闭 JInternalFrame 的索引并从 arraylist 中删除此帧？覆盖一些关闭方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T21:46:09.097

您可以为内部框架设置默认关闭操作，然后在关闭视图时调用触发事件的[doDefaultCloseAction 。](http://docs.oracle.com/javase/6/docs/api/javax/swing/JInternalFrame.html#doDefaultCloseAction%28%29)

在此之前将您自己添加为此事件的侦听器，在收到事件后执行必要的操作。

# java - 在 java 应用程序中使用 ftp4j 库下载/上传时出现 FTP 错误

> ID：10166337
> 
> 赞同：1
> 
> 时间：2012-04-15T21:37:25.140
> 
> 标签：java, ftp, ftp-client, ftp4j

我想在 java 应用程序中下载一个文件，当我尝试它时，它会在我的硬盘驱动器上创建该文件，但随后无法完全下载它。我正在使用 ftp4j 库来做到这一点。

```
import it.sauronsoftware.ftp4j.*;
public class Main {
public static void main (String args[]){
    FTPClient client = new FTPClient();
    try{
    client.connect("ftp.myaddress.comlu.com");
    client.login("username", "password");
    System.out.println("Connection created");
    client.download("public_html/ZScreen.png", new java.io.File("d:/xxx/ZScreen.png"));
    System.out.println("Download successful");
    client.disconnect(true);
    }
    catch (Exception FTPException){
    System.out.println("Shit hit the fan");
    }
}
} 
```

我总是会创建连接，但该死的却击中了粉丝。此外，在我的硬盘驱动器上创建了一个文件，但它的大小为 0 字节。

这是堆栈竞赛

```
Connection created
java.net.SocketException: Connection reset
Shit hit the fan
at java.net.SocketInputStream.read(SocketInputStream.java:189)
at java.net.SocketInputStream.read(SocketInputStream.java:121)
at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:283)
at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:325)
at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:177)
at sun.nio.cs.StreamDecoder.read0(StreamDecoder.java:126)
at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:112)
at java.io.InputStreamReader.read(InputStreamReader.java:168)
at it.sauronsoftware.ftp4j.NVTASCIIReader.readLine(NVTASCIIReader.java:105)
at     it.sauronsoftware.ftp4j.FTPCommunicationChannel.read(FTPCommunicationChannel.java:142)
at it.sauronsoftware.ftp4j.FTPCommunicationChannel.readFTPReply(FTPCommunicationChannel.java:187)
at it.sauronsoftware.ftp4j.FTPClient.openPassiveDataTransferChannel(FTPClient.java:3538)
at it.sauronsoftware.ftp4j.FTPClient.openDataTransferChannel(FTPClient.java:3473)
at it.sauronsoftware.ftp4j.FTPClient.download(FTPClient.java:3302)
at it.sauronsoftware.ftp4j.FTPClient.download(FTPClient.java:3213)
at it.sauronsoftware.ftp4j.FTPClient.download(FTPClient.java:3078)
at Main.main(Main.java:9) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T17:18:43.023

显然，Windows 7 防火墙上存在与在 IPv6 上使用 FTP 相关的错误*，*可以**解释**您**的****问题**。[请参阅此处](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7077696)的错误报告。

 *****以下任何一种**解决方法**都应该足以解决它：

*   在 Windows 控制台中以管理员身份运行以下命令：

    `netsh advfirewall set global StatefulFtp disable`

*   使用以下选项运行 JVM：`-Djava.net.preferIPv4Stack=true`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T21:16:10.990

您没有在文件夹上写入的权限。检查曲目是否处于“只读”状态。*****

# wpf - 在 WPF 中使用旧字体

> ID：10166338
> 
> 赞同：1
> 
> 时间：2012-04-15T21:37:34.620
> 
> 标签：wpf, fonts, font-family

我有几个想在 WPF 中使用的旧 FON 文件。不过，到目前为止，我还无法加载它们。如果我将文件作为 FontFamily 加载，WPF 不会抱怨，但它实际上用标准字体代替了它应该加载的字体。

```
public static FontFamily Load()
{
    return new FontFamily(new Uri("pack://application:,,,/Fonts/12x24"), "Console");
} 
```

如果我尝试将文件加载为 GlyphTypeface，则会收到错误消息，指出它不是受支持的字体类型。（如果我在 Windows 资源管理器中双击该文件，它会在某种提供“打印”或“安装”选项的系统对话框中弹出，因此操作系统的某些部分知道如何读取此文件...... )

我发现了一个 FontConverter 应用程序，但他们要 170 美元。...

所以，我正在寻找某种方法来将此文件转换为 WPF 喜欢的东西，或者以某种方式加载文件，以便 WPF 让我使用它。

# ruby - 从 1.9.3 开始，如何在 Ruby 中获取 YAML 以将 ASCII-8Bit 字符串转储为字符串？

> ID：10166340
> 
> 赞同：8
> 
> 时间：2012-04-15T21:37:38.603
> 
> 标签：ruby, string, utf-8, binary, yaml

问题是：我可能有 UTF-8 字符串，也可能有 US-ASCII 字符串。无论编码如何，我都希望 YAML.dump(str) 实际转储对象，而不是示例所示`String`的这些无用对象。`!binary`

是否有标志或我没有看到强制 YAML.dump() 做正确的事情？

**Ruby 1.9.1 示例**

```
YAML::VERSION              # "0.60"
a = "foo"                  # => "foo"
a.force_encoding("BINARY") # => "foo"
YAML.dump(a)               # => "--- foo\n" 
```

**Ruby 1.9.3 示例**

```
YAML::VERSION              # "1.2.2"
a = "foo"                  #  => "foo" 
a.force_encoding("BINARY") #  => "foo" 
YAML.dump(a)               # => "--- !binary |-\n  Zm9v\n" 
```

**更新：得到我自己的答案**

```
YAML::ENGINE.yamler='syck'
YAML.dump(a)               # => "--- foo\n" 
```

所以，看起来像使用旧的 yamler 引擎强制旧的行为。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T03:02:17.477

**更新：得到我自己的答案**

```
YAML::ENGINE.yamler='syck'
YAML.dump(a)               # => "--- foo\n" 
```

# vb.net - VB.NET 不区分大小写的 Web 引用枚举问题

> ID：10166341
> 
> 赞同：1
> 
> 时间：2012-04-15T21:37:47.103
> 
> 标签：vb.net, web-services, service-reference, web-reference

我为 WSDL 创建了一个 Web 引用（也尝试过服务引用），该 WSDL 在 xsd 中有以下节点：

```
 <xs:element name="filter">
    <xs:complexType>
      <xs:choice minOccurs="0" maxOccurs="unbounded">
        <xs:element minOccurs="0" maxOccurs="unbounded" ref="condition" />
        <xs:element minOccurs="0" maxOccurs="unbounded" ref="filter" />
      </xs:choice>
      <xs:attribute default="and" name="type">
        <xs:simpleType>
          <xs:restriction base="xs:NMTOKEN">
            <xs:enumeration value="and" />
            <xs:enumeration value="or" />
            <xs:enumeration value="AND" />
            <xs:enumeration value="OR" />
          </xs:restriction>
        </xs:simpleType>
      </xs:attribute>
      <xs:attribute default="false" name="not" type="xs:boolean" />
    </xs:complexType>
  </xs:element> 
```

创建客户端代理类时，它会生成以下内容：

```
'''<remarks/>
<System.CodeDom.Compiler.GeneratedCodeAttribute("System.Xml", "4.0.30319.225"),  _
 System.SerializableAttribute(),  _
 System.Xml.Serialization.XmlTypeAttribute(AnonymousType:=true, [Namespace]:="urn://wsc.acme.com/dm/2010/02/02")>  _
Public Enum filterType

    '''<remarks/>
    [and]

    '''<remarks/>
    [or]

    '''<remarks/>
    [AND]

    '''<remarks/>
    [OR]
End Enum 
```

这不会在 VB 项目中构建，因为 VB.NET 不区分大小写。我尝试删除一组和/或，但是在创建 XML 时，它只是忽略了选定的值。我还尝试在一个也失败的集合的末尾附加一个 X。

有没有办法使这项工作？我还尝试更新 XSD，所以它只有两个值但没有成功。有趣的是，默认设置为“and”，在调试时会将其设置为and，它实际上并不会产生它的节点属性，它只是生成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T03:20:25.973

您根本不能有两个具有相同名称的枚举。您可以尝试设置 AllowMultiple 属性，但您遇到的问题仍然会发生。我的建议是删除原始 XSD 中的重复值并重建。

# php - Zend Framework 1.11.11 的 Amazon Web 服务使用

> ID：10166344
> 
> 赞同：0
> 
> 时间：2012-04-15T21:37:57.183
> 
> 标签：php, zend-framework, amazon-web-services

我正在尝试使用带有 Zend 框架的 Amazon Web Service 搜索/显示书籍。

[由于 Amazon API 的更改，此页面](http://framework.zend.com/manual/en/zend.service.amazon.html)上的示例不起作用。我想从现在开始我需要提供我的 Associate Tag，但我不知道如何提供。

我使用从以下网址获得的密钥： [https ://aws-portal.amazon.com/gp/aws/securityCredentials](https://aws-portal.amazon.com/gp/aws/securityCredentials)

谁能告诉我如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T22:40:34.470

亚马逊 API 更新的修复应该在 ZF 的下一个迷你版本中。如果您等不及了，您可以在此处应用补丁：http: [//framework.zend.com/issues/browse/ZF-12046](http://framework.zend.com/issues/browse/ZF-12046)到您的 1.11.11 副本，以修复与您的 AWS 版本相关的错误重新可能得到。

AssociateTag 要求实际上是亚马逊在上述之前所做的一个单独的向后不兼容的更改。您可以将此作为附加参数提供给 itemSearch，例如：

```
$amazon = new Zend_Service_Amazon('AMAZON_API_KEY', 'US', 'AMAZON_SECRET_KEY');
$results = $amazon->itemSearch(array(
    'SearchIndex' => 'Books',
    'Keywords' => 'php',
    'AssociateTag' => 'yourtaghere'
)); 
```

# php - Dreamweaver utf-8 编码的 php 页面在 IE 和 Chrome 中显示错误的汉字，在 FF 中正确

> ID：10166354
> 
> 赞同：2
> 
> 时间：2012-04-15T21:38:54.717
> 
> 标签：php, internet-explorer, utf-8, dreamweaver

我对字符编码有疑问：

我有这个页面： http: [//www.studiomille.jp/class/](http://www.studiomille.jp/class/)
（它是日语，但我认为有问题的字符来自中文）

FF 正确显示它，IE（所有版本）和 Chrome 没有（抱歉更大的屏幕截图）：

*   FF 截图：[![FF 截图](../Images/6691c0cfd6f506bdd4f029acb32624bb.png)](https://i.stack.imgur.com/vGLyl.jpg)
*   IE 截图：[![IE 截图](../Images/4cf0311971f64de30152b3b77d315bc6.png)](https://i.stack.imgur.com/0KEVf.jpg)

（整个网站还有其他不同的字符，这只是一个例子）

一切都设置为 UTF-8：
* PHP 发送标头：Content-Type:text/html；charset=UTF-8
* PHP 以：`mb_language('uni'); mb_internal_encoding('UTF-8');`
* 元标记：`<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>`
* 使用 DreamWeaver CS3 以 UTF-8 编码保存所有文件
* 在所有浏览器中使用相同的字体。

在那个页面上，没有任何东西来自数据库，一切都是硬编码的。

该站点在我的本地主机上也具有相同的行为。

那么为什么只有 FF 做对了，我怎样才能让它在 IE 上也能工作呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T23:43:28.180

# excel - 如何从类模块中检测 Frame_Enter 事件

> ID：10166355
> 
> 赞同：1
> 
> 时间：2012-04-15T21:39:08.440
> 
> 标签：excel, mouseenter, userform, vba

这是此处回答的问题的后续问题： [How to detect a mouse_down on a Userform Frame while the mouse is still down](https://stackoverflow.com/questions/7466376/how-to-detect-a-mouse-down-on-a-userform-frame-while-the-mouse-is-still-down)

使用该问题的答案中的代码，我可以成功检测表单上任何框架上的 MouseDown、MouseUp 和 MouseMove。但是，cls 中显然没有 Frame_Enter 或 Frame_Exit 事件。有没有办法在类模块中模拟 Frame_Enter 事件？

编辑：这就是我想要做的。我有 8 帧加载了 8 张图片，当它们组合在一个更大的帧中时，就构成了一张更大的图片。想象一个有 8 个矩形块的拼图。通常，所有 8 帧都包含其图片的“变暗”（中性滤镜覆盖）版本，但是当鼠标进入其中任何一个时，它会触发在新输入的帧中加载“未变暗”版本的图片，并且变暗刚刚退出的帧中的图片版本。因此，如果鼠标在这些帧中的任何一个上，它总是在被暗色图片包围的明亮图片上移动。

当鼠标在一个未变暗的框架上移动时，它会在无限数量的“热点”触发器上滚动，这些触发器会导致一个文本框弹出，其中包含有关鼠标当前悬停的更多信息。当它离开那个框架并移到另一个框架上时，这个过程会重复。

除了检测鼠标何时越过帧边界并进入下一帧之外，一切正常。必须在处理任何 MouseMove 事件之前检测到这一点。

如果没有其他建议，这是一种看起来很有希望的方法： [http ://www.mrexcel.com/forum/showpost.php?p=2567141&postcount=28](http://www.mrexcel.com/forum/showpost.php?p=2567141&postcount=28)

Edit2：它看起来仍然很有希望，但我无法让它发挥作用。直到我单击控件之后，它似乎才发出进入和退出事件，这对我没有用。

所以克里斯，回到你的。您正在观看 Frame_MouseMove 事件并等待与上次不同的 Frame 发出事件。我想知道是否不使用辅助文本框来表示更改，是否可以不使用静态变量来跟踪 currentFrame/prevFrame？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T22:21:22.670

我可能是错的，但是没有直接的方法可以捕获帧的`_Enter`and`_Exit`事件。但是有一个替代方案

```
Option Explicit

Dim temp As String

Private Sub UserForm_Initialize()
    temp = "OnForm"
End Sub

Private Sub Frame1_MouseMove(ByVal Button As Integer, ByVal Shift As Integer, _
ByVal X As Single, ByVal Y As Single)
    If temp = "OnForm" Then
        Debug.Print "The mouse just entered the frame"
        temp = "OnFrame"
    End If
End Sub

Private Sub UserForm_MouseMove(ByVal Button As Integer, ByVal Shift As Integer, _
ByVal X As Single, ByVal Y As Single)
    If temp = "OnFrame" Then
        Debug.Print "The mouse just exited the frame"
        temp = "OnForm"
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T00:58:07.603

关键词：*模拟*

使用框架`Mouse_Move`和表格的组合`Mouse_Move`

使用名为`txtWhereAmI`(initialise Value proiperty to `Form`)
`txtEntry` `txtExit`(initialise Value proiperties to `0`)的文本框进行演示

在 Class 模块中声明 Frame MouseMove

```
Private Sub Frme_MouseMove( _
 ByVal Button As Integer, _
 ByVal Shift As Integer, _
 ByVal X As Single, _
 ByVal Y As Single)

    UserForm1.txtWhereAmI.Value = Frme.Caption
End Sub 
```

在表单模块中声明表单鼠标移动

```
Private Sub UserForm_MouseMove( _
  ByVal Button As Integer, _
  ByVal Shift As Integer, _
  ByVal X As Single, _
  ByVal Y As Single)
    txtWhereAmI.Value = "Form"
End Sub 
```

和文本框更改事件

```
Private Sub txtWhereAmI_Change()
    If txtWhereAmI.Value = "Form" Then
        txtExit = txtExit + 1
    Else
        txtEntry = txtEntry + 1
    End If
End Sub 
```

结果：`txtWhereAmI`识别鼠标在哪一帧，`txtEntry`统计`txtExit`进入和退出事件

then的`Change`事件`txtWhereAmI`构成了您`Entry`和`Exit`事件处理程序的基础

# java - 用于存储排序的潜在相等元素的集合？

> ID：10166357
> 
> 赞同：1
> 
> 时间：2012-04-15T21:39:20.160
> 
> 标签：java, sorting, collections

我尝试使用 TreeSet 但它不允许双打有没有办法改变它？如果没有办法，我应该用什么来存储（等于和不等于）排序的元素？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T21:40:53.360

您可以使用[`List`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html) [特别是[`ArrayList`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)] 来保存元素，并**[`Collections.sort()`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List%29)**在完成填充后使用它来对其进行排序。

有时 a[`PriorityQueue`](http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html)也是一个不错的选择 - 如果您真正需要的是维护集合中的最小/最大元素。

如果您想维护一个排序的集合 - **[`SortedBag`](http://commons.apache.org/collections/api-2.1.1/org/apache/commons/collections/SortedBag.html)**[来自 apache commons collections] 可能就是您所追求的。[你可以从这里](http://commons.apache.org/collections/download_collections.cgi)下载一个 jar并将它添加到你的类路径中，然后就可以使用它了！请注意，apache 产品非常常用，因此经常进行测试！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T21:58:52.353

您可以为此目的使用[SortedMultiset 。](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/SortedMultiset.html)它包含在 Google 的 Guava 库中，您可以从以下网址下载：[http ://code.google.com/p/guava-libraries/](http://code.google.com/p/guava-libraries/)

如果您使用的是 Eclipse，则需要将 Guava 的 .jar 文件添加到项目的类路径中（右键单击项目，选择属性，然后选择 Java 构建路径，最后在库选项卡中添加 JAR）。

如果您不想在项目中使用第三方库，则取决于您的特定用例，最佳选择是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T21:47:22.967

A`Set`根据定义不允许重复。

你需要有不同的`Comparator`，或者你可以使用任何一种`List`。

```
SortedSet<String> temp = new TreeSet<String>(new MyComparator()); 
```

在哪里`MyComparator`实现`Comparator`：

```
public class MyComparator implements Comparator<String> {

    public int compare(String a, String b) { ... }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T21:47:23.280

除了一个有序的`List`你仍然可以使用一个`TreeSet`但有额外的空间。

即为您尝试添加的任何重复项目保留一个计数器`TreeSet`。
这种方法可以直接通过 a`TreeMap`来实现，以保持每次发生的计数器。

这样，您始终知道用户提供了多少重复项（计数器保持记录，而 TreeSet 只保存值本身）。
它有额外的空间开销，但在订购`List`时，您将有保留添加/删除等排序的开销。
取决于您的需要。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-15T21:48:16.810

您可以使用树图。在映射中，您存储 {key,value} 对，而键是您的对象，值是您的集合中键的出现次数，例如，您有 3 次键“Bob”，因此相应的映射条目将是 {"Bob ", 3} . 通过这种方式，您可以节省空间并实现保持对象分类的目标。只需确保您的密钥实现了 tge equals 和 hashcode 方法。如果 yiur 键没有可用的自然顺序（例如字符串），您还必须为 thm 实现 Comparable 接口。

祝你好运！

# email - 用户选择加入/退出接收电子邮件

> ID：10166364
> 
> 赞同：1
> 
> 时间：2012-04-15T21:39:48.460
> 
> 标签：email, drupal, notifications, drupal-rules

有没有办法让用户在触发规则时选择加入/退出接收电子邮件？

每当创建引用它的新节点时，我都有一条规则向节点的作者发送电子邮件。这是通过以下方式完成的；

ON 事件 保存新内容后 IF 创建的内容已发布

DO actionLoad a referenced node actionLoad the Referenced content author action向用户发送邮件

不幸的是，节点的作者无法选择不接收电子邮件。知道如何以首先标记发送的电子邮件为条件吗？或者更好的是，有没有一种方法可以在原始节点创建表单中放置一个复选框，用户可以选择加入或不接收这些通知？或者也许有人有其他想法？另一个模块也许......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:16:56.743

一种解决方案是确实包含一个新字段，即原始节点上的一个复选框，作者可以修改该复选框以选择加入或退出电子邮件。您可以在“管理显示”选项卡中将该字段设置为隐藏。

**然后，只需通过添加“数据值为空”类型的条件**来编辑您的规则，这样您就可以检查是否选中了新复选框。设置新条件时，输入“节点：”，然后在**数据选择器**中选择新字段，并确保在适当时选中“否定”按钮（基于您在复选框上设置语言的方式：即检查是否意味着默认选择加入或退出）。如果复选框显示“选择加入”，则选中的值将返回 false 为空，因此您应该在条件中否定它。

现在应该会根据新字段启动规则！

# comet - 使用彗星实时更新谷歌图表

> ID：10166366
> 
> 赞同：5
> 
> 时间：2012-04-15T21:40:07.003
> 
> 标签：comet, google-visualization

我想使用 Google Chart 创建一个实时更新的条形图。当用户加载页面时，我想显示当前结果。但是一旦我的数据库中的数据发生变化，我想将这些变化推送到客户端并更新图表。

这是来自 Google Charts 页面的条形图示例：

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
  google.load("visualization", "1", {packages:["corechart"]});
  google.setOnLoadCallback(drawChart);
  function drawChart() {
    var data = new google.visualization.DataTable();
    data.addColumn('string', 'Year');
    data.addColumn('number', 'Sales');
    data.addColumn('number', 'Expenses');
    data.addRows([
      ['2004', 1000, 400],
      ['2005', 1170, 460],
      ['2006', 660, 1120],
      ['2007', 1030, 540]
    ]);

    var options = {
      title: 'Company Performance',
      vAxis: {title: 'Year',  titleTextStyle: {color: 'red'}}
    };

    var chart = new google.visualization.BarChart(document.getElementById('chart_div'));
    chart.draw(data, options);
  }
</script> 
```

我想我可以使用 Ajax-Request 每隔几秒钟提取一次数据并重新绘制图表。但也许我在 Google Charts 中缺少一些内置方法。我也读了很多关于[Comet](http://en.wikipedia.org/wiki/Comet_(programming))的文章，但我从未实现过这个概念。

有没有其他人遇到过这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-26T15:17:22.377

在计时器上实现 AJAX 是最简单的解决方案：

```
// using jQuery for simplicity, but you can implement in other libraries or vanilla javascript if you want
function drawChart() {
    var options = {
        title: 'Company Performance',
        vAxis: {title: 'Year',  titleTextStyle: {color: 'red'}}
    };

    var chart = new google.visualization.BarChart(document.getElementById('chart_div'));

    function updateChart () {
        $.ajax({
            url: 'path/to/data/source/',
            data: {/* any parameters you need to pass to the server to get your data back */},
            dataType: /* text, json, XML, whatever your server returns */,
            success: function (response) {
                // use response to create/update DataTable
                chart.draw(data, options);
                // update the chart again in 2 seconds
                setTimeout(updateChart, 2000);
            },
            error: function (response) {
                // handle errors
            }
        });
    }
    updateChart();
} 
```

使用 Comet 服务实现起来有点复杂，因为它需要在 javascript 和您的服务器上设置类似[Socket.Io的东西。](http://socket.io/)

使用 Comet 服务将始终保证图表中的最新数据，而 AJAX 更易于实现。Comet 需要在 AJAX 发出多个独立请求时保持与服务器的活动连接。

# c++ - 分支预测 - 全局共享实现说明

> ID：10166367
> 
> 赞同：0
> 
> 时间：2012-04-15T21:40:15.667
> 
> 标签：c++, branch-prediction

我正在我的计算机体系结构课程中进行一项作业，我们必须在 C++ 中实现分支预测算法（用于 Alpha 21264 微处理器体系结构）。

提供了一个解决方案作为[示例](http://pastebin.com/S60nR0eJ)。此解决方案是[Global Share Predictor](http://en.wikipedia.org/wiki/Branch_predictor#Global_branch_prediction)的实现。

我只是想了解给定的解决方案，特别是发生了什么：

```
*predict (branch_info &b) {...} 
```

具体来说，

```
if (b.br_flags & BR_CONDITIONAL) {...} 
```

谁能给我一个解释？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-08T13:22:33.563

我认为 Scott McFarling 的以下论文提供了详细的答案：

[http://www.hpl.hp.com/techreports/Compaq-DEC/WRL-TN-36.pdf](http://www.hpl.hp.com/techreports/Compaq-DEC/WRL-TN-36.pdf)

让我用你的代码来解释。

```
unsigned char tab[1<<TABLE_BITS]; 
```

是**模式历史表**。选项卡中的每个条目都保留一个 2 位饱和计数器。条件分支的方向最终由计数器的 MSB 决定：

```
u.direction_prediction (tab[u.index] >> 1); 
```

我们使用两位或更多位的计数器而不是仅一位的原因是为了使模式不那么敏感以减少误预测。例如，

```
for( int i = 0; i < m; i++ )
{
    for( int j = 0; j < n; j++ )
    {
       ...
    }
} 
```

下一次执行内循环时，一位计数器会错误预测分支，而两位计数器可以防止它。

接下来是如何在模式历史表中找到正确的模式。

天真的方法是使用分支地址作为索引。但它忽略了不同分支之间的相关性。这就是引入**Global Branch History**的原因（更多详细信息，请参阅[http://www.eecg.utoronto.ca/~moshovos/ACA06/readings/two-level-bpred.pdf](http://www.eecg.utoronto.ca/~moshovos/ACA06/readings/two-level-bpred.pdf)）。

在您的代码中，

```
unsigned int history; 
```

是存储全局分支历史的**分支历史寄存器。**

然后有些人发现，将**全局分支历史记录**和**分支地址**作为索引结合起来可以比仅使用其中一个更准确的预测。原因是全局分支历史和分支地址都会影响分支模式。如果忽略其中之一，不同的分支模式可能会散列到模式历史表的相同位置，从而导致冲突问题。

在提出 Gshare 之前，有一个解决方案叫 Gselect，它使用全局分支历史和分支地址的串联作为模式历史表的索引。

Gshare提供的解决方案是哈希函数

```
index = branch_addr XOR branch_history 
```

这正是以下代码的含义：

```
 u.index = (history << (TABLE_BITS - HISTORY_LENGTH)) ^ (b.address & ((1<<TABLE_BITS)-1)); 
```

Scott McFarling 的论文提供了一个很好的例子来展示 Gshare 如何比 Gselect 更好地工作：

1.  分行地址=1111_1111 全球分行历史=0000_0000
2.  分行地址=1111_1111 全球分行历史=1000_0000

假设我们使用以下 Gselect 策略来防止偏差：

```
index = { {branch_addr[7:4]}, {branch_history[3:0]} } 
```

然后 Gselect 将为这两种情况生成 1111_0000 而 Gshare 可以区分不同的模式。

据我所知，Gshare 是迄今为止消除碰撞的最佳解决方案。

# python - Python 动态背包

> ID：10166372
> 
> 赞同：0
> 
> 时间：2012-04-15T21:40:35.947
> 
> 标签：python, recursion, python-3.x, knapsack-problem

现在我正在尝试在 Python 3.2 中编写背包问题。我试图用矩阵动态地做到这一点。我尝试使用的算法如下

```
实现背包问题的memoryfunction方法
输入：一个非负整数 i 表示第一个
正在考虑的物品和一个表示背包容量的非负整数 j
输出：前 i 项的最优可行子集的值
注意：用作全局变量输入数组 Weights[1..n], Values[1...n]
和表 V[0...n, 0...W]，其条目用 -1 初始化，除了
用 0 初始化的第 0 行和第 0 列

```

```
if V[i, j] < 0
    if j < Weights[i]
        value <-- MFKnapsack(i - 1, j)

    else
        value <-- max(MFKnapsack(i -1, j),
            Values[i] + MFKnapsack(i -1, j - Weights[i]))

    V[i, j} <-- value

return V[i, j] 
```

如果您运行下面的代码，您可以看到它尝试将权重插入列表中。由于这是使用递归，我很难发现问题。我也收到错误消息：无法使用“+”将整数与列表相加。我将矩阵初始化为从第一行和第一列的所有 0 开始，其他所有内容都初始化为 -1。任何帮助都感激不尽。

```
#Knapsack Problem 

def knapsack(weight,value,capacity):
    weight.insert(0,0)
    value.insert(0,0)

    print("Weights: ",weight)
    print("Values: ",value)

    capacityJ = capacity+1

    ## ------ initialize matrix F ---- ##
    dimension = len(weight)+1
    F = [[-1]*capacityJ]*dimension

    #first column zeroed
    for i in range(dimension):
        F[i][0] = 0
    #first row zeroed            
    F[0] = [0]*capacityJ
    #-------------------------------- ##

    d_index = dimension-2
    print(matrixFormat(F))

    return recKnap(F,weight,value,d_index,capacity)

def recKnap(matrix, weight,value,index, capacity):

    print("index:",index,"capacity:",capacity)
    if matrix[index][capacity] < 0:
        if capacity < weight[index]:
            value = recKnap(matrix,weight,value,index-1,capacity)
        else:
            value = max(recKnap(matrix,weight,value,index-1,capacity),
                        value[index] +
                        recKnap(matrix,weight,value,index-1,capacity-(weight[index]))

    matrix[index][capacity] = value
    print("matrix:",matrix)

    return matrix[index][capacity]

def matrixFormat(*doubleLst):
    matrix = str(list(doubleLst)[0])
    length = len(matrix)-1
    temp = '|'
    currChar = ''
    nextChar = ''
    i = 0

    while i < length:
        if matrix[i] == ']':
            temp = temp + '|\n|'
        #double digit
        elif matrix[i].isdigit() and matrix[i+1].isdigit():
            temp = temp + (matrix[i]+matrix[i+1]).center(4)
            i = i+2
            continue
        #negative double digit
        elif matrix[i] == '-' and matrix[i+1].isdigit() and matrix[i+2].isdigit():
            temp = temp + (matrix[i]+matrix[i+1]+matrix[i+2]).center(4)
            i = i + 2
            continue
        #negative single digit
        elif matrix[i] == '-' and matrix[i+1].isdigit():
            temp = temp + (matrix[i]+matrix[i+1]).center(4)
            i = i + 2
            continue

        elif matrix[i].isdigit():
            temp = temp + matrix[i].center(4)

        #updates next round
        currChar = matrix[i]
        nextChar = matrix[i+1]
        i = i + 1

    return temp[:-1]

def main():
    print("Knapsack Program")
    #num = input("Enter the weights you have for objects you would like to have:")
    #weightlst = []
    #valuelst = []
##    for i in range(int(num)):
##        value , weight = eval(input("What is the " + str(i) + " object value, weight you wish to put in the knapsack?  ex. 2,3: "))
##        weightlst.append(weight)
##        valuelst.append(value)
    weightLst = [2,1,3,2]
    valueLst = [12,10,20,15]
    capacity = 5

    value = knapsack(weightLst,valueLst,5)

    print("\n      Max Matrix")
    print(matrixFormat(value))

main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T01:08:12.310

```
F = [[-1]*capacityJ]*dimension 
```

没有正确初始化矩阵。`[-1]*capacityJ`很好，但`[...]*dimension`会创建对完全相同列表的`dimension` *引用。*因此，修改一个列表会修改所有列表。

试试吧

```
F = [[-1]*capacityJ for _ in range(dimension)] 
```

这是一个常见的 Python 陷阱。有关更多说明，请参阅[此帖子](https://stackoverflow.com/a/1025447/190597)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-26T18:38:53.903

出于缓存说明的目的，我一般使用默认dict如下：

```
from collections import defaultdict
CS = defaultdict(lambda: defaultdict(int)) #if i want to make default vals as  0
###or
CACHE_1 = defaultdict(lambda: defaultdict(lambda: int(-1))) #if i want to make default vals as -1 (or something else) 
```

这使我无法在 python 中动态创建二维数组...

要使用这种方法查看 z1knapsack 的答案：

[http://ideone.com/fUKZmq](http://ideone.com/fUKZmq)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-27T11:57:53.700

```
def zeroes(n,m):
    v=[['-' for i in range(0,n)]for j in range(0,m)]
    return v
value=[0,12,10,20,15]
w=[0,2,1,3,2]
v=zeroes(6,5)

def knap(i,j):
    global v
    if i==0 or j==0:
        v[i][j]= 0
    elif j<w[i] :
        v[i][j]=knap(i-1,j)
    else:
        v[i][j]=max(knap(i-1,j),value[i]+knap(i-1,j-w[i]))
    return v[i][j]
x=knap(4,5)
print (x)
for i in range (0,len(v)):
    for j in range(0,len(v[0])):
        print(v[i][j],end="\t\t")
    print()
print()
#now these calls are for filling all the boxes in the matrix as in the above call only few v[i][j]were called and returned
knap(4,1)
knap(4,2)
knap(4,3)
knap(4,4)               

for i in range (0,len(v)):
    for j in range(0,len(v[0])):
        print(v[i][j],end="\t\t")
    print()
print() 
```

# java - 元数据提取 - Java

> ID：10166373
> 
> 赞同：3
> 
> 时间：2012-04-15T21:40:42.970
> 
> 标签：java, metadata, extraction, metadata-extractor

我正在尝试创建一个从图像文件中提取元数据的程序。到目前为止，我已经设法创建了一个打印出所有元数据的程序，但我不知道如何指定程序只打印出某些东西（文件名、纬度、经度、访问日期）。在过去的四个小时里，我一直在努力解决这个问题。这是我到目前为止的代码......

主类：

```
package metadata;
import com.drew.metadata.exif.*; 
import com.drew.metadata.iptc.*; 
import com.drew.metadata.jpeg.*;
public class MetaData {

    public static void main(String[] args) {

        ExtractTags extractAllTags = new ExtractTags();

        //extractAllTags.getTags();
        System.out.println("\n\n\n Has this ");
        extractAllTags.getLatitude();     
    }
} 
```

二等：

```
package metadata;

import com.drew.imaging.ImageMetadataReader;
import com.drew.imaging.ImageProcessingException;
import com.drew.metadata.Directory;
import com.drew.metadata.Metadata;
import com.drew.metadata.Tag;
import com.drew.metadata.exif.GpsDirectory;
import java.io.File;
import java.io.IOException;
import java.util.logging.Level;
import java.util.logging.Logger;
import com.drew.metadata.exif.*; 
import com.drew.metadata.iptc.*; 
import com.drew.metadata.jpeg.*;

public class ExtractTags {

    String allTags;
    String latitude;
    File jpegFile = new File("C:\\Users\\Public\\Pictures\\Sample Pictures\\HTC Desire.jpg");

    public String getTags() {

        try {
            Metadata metadata = ImageMetadataReader.readMetadata(jpegFile);

            for (Directory directory : metadata.getDirectories()) {
                for (Tag allTags : directory.getTags()) {

                    System.out.println(allTags);
                }
            }
        } catch (ImageProcessingException ex) {
            Logger.getLogger(MetaData.class.getName()).log(Level.SEVERE, null, ex);
        } catch (IOException ex) {
            Logger.getLogger(MetaData.class.getName()).log(Level.SEVERE, null, ex);
        }
        return allTags;
    }

    public String getLatitude() {
        try {
            Metadata metadata = ImageMetadataReader.readMetadata(jpegFile);
            if (metadata.containsDirectory(GpsDirectory.class)) {
                GpsDirectory gpsDir = (GpsDirectory) metadata.getDirectory(GpsDirectory.class);
                GpsDescriptor gpsDesc = new GpsDescriptor(gpsDir);
                System.out.println("Latitude: " + gpsDesc.getGpsLatitudeDescription());
            }
        } catch (ImageProcessingException ex) {
            Logger.getLogger(ExtractTags.class.getName()).log(Level.SEVERE, null, ex);
            System.out.println("Error 1");
        } catch (IOException ex) {
            Logger.getLogger(ExtractTags.class.getName()).log(Level.SEVERE, null, ex);
            System.out.println("Error 2");
        }

        return latitude;
    }
} 
```

错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: metadata/GpsDescriptor
    at metadata.ExtractTags.getLatitude(ExtractTags.java:47)
    at metadata.MetaData.main(MetaData.java:13)
Caused by: java.lang.ClassNotFoundException: metadata.GpsDescriptor
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 2 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T21:57:10.957

您可以`Directory`使用`Metadata.getDirectory(Class)`. 每种类型`Directory`都有一个关联`Descriptor`，您可以使用它来解释`Directory`.

例如，纬度可以通过`GpsDirectory`使用`GpsDescriptor`这样的方法获得：

```
GpsDirectory gpsDir = (GpsDirectory) metadata.getFirstDirectoryOfType(GpsDirectory.class);

if (gpsDir != null) {
    GpsDescriptor gpsDesc = new GpsDescriptor(gpsDir);
    System.out.println("Latitude: " + gpsDesc.getGpsLatitudeDescription());
} 
```

请参阅您正在使用的特定类型的文档，`Descriptor`以查看它提供的用于获取所需数据的方法。

# php - MySQL：网页上的 ucs2_slovenian_ci 到 utf-8

> ID：10166376
> 
> 赞同：4
> 
> 时间：2012-04-15T21:40:56.527
> 
> 标签：php, mysql, encoding

我有一个 MySQL 数据库，其中包含 ucs2_slovenian_ci 编码的表。我想在 utf-8 编码网页上写表格的内容。到目前为止，我尝试过：

```
mysql_set_charset ("utf-8");
mysql_query("SET NAMES 'utf-8'");
...
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
...
<?php echo utf8_encode($text); ?>
... 
```

我仍然收到奇怪的符号（问号）而不是字母 Š,Č,Ž 似乎没有任何效果。

奇怪的是，使用 php 命令`mysql_client_encoding($link)`它说我有 latin1 编码。当我在 Firefox 中查看页面时，它显示 UTF-8。怎么了？

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T22:06:58.740

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T22:06:11.697

首先添加`header('Content-Type: text/html; charset=utf-8');`

和

> mysql_set_charset ("utf-8");

应该：

> $db = mysql_connect($hostname,$username,$password);
> 
> mysql_set_charset ("utf8", $db);

还要确保 MySQL DB 中的所有内容都是 utf-8

无论如何，你可以玩：

> mb_convert_encoding($string, "其他编码", "UTF-8");

# c - 用于文本文件的 C 语言中的 mmap

> ID：10166378
> 
> 赞同：0
> 
> 时间：2012-04-15T21:41:09.557
> 
> 标签：c, mmap

是否可以在 C 中使用 mmap 来读取文本文件？我知道它可能使用二进制文件。但是当我尝试阅读整个文本文件时，我似乎遇到了一些问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T21:42:26.873

是的，这当然可行——无论如何，“文本文件”只是“二进制文件”的一个子集。

但是，不要期望尾随`\0`，因此您不能使用任何字符串函数，因为它们需要以 NUL 结尾的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T21:43:17.320

您可以在任何文件上使用 mmap。

你应该详细说明你的问题。

# php - 错误日志中的mysql_num_rows

> ID：10166383
> 
> 赞同：0
> 
> 时间：2012-04-15T21:41:42.267
> 
> 标签：php, mysql, mysql-num-rows

我遇到一个错误。我的日志如下：

```
PHP Warning:  mysql_num_rows(): supplied argument is not 
a valid MySQL result resource in     
/home/domain/public_html/index.php on line 96 
```

我的代码如下L第96行：

```
mysql_num_rows(mysql_query("SELECT * FROM `table` WHERE 
UNIX_TIMESTAMP(`date`)>$user_last_visit")); 
```

什么可能导致此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T21:44:45.607

我会尝试重新排列代码

```
$sql = "SELECT * FROM `table` WHERE UNIX_TIMESTAMP(`date`) > $user_last_visit";
$result = mysql_query($sql) or die(mysql_error());
echo mysql_num_rows($result); 
```

我无法从您的代码中看出，但您正在创建与 mysql 服务器的连接？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T21:46:06.980

如果您只想计算行数，请`COUNT(*)`在查询中使用关键字；否则，尽管您不需要它们，但数据库将为输出准备整个结果行。

```
SELECT COUNT(*)
FROM `table`
WHERE UNIX_TIMESTAMP(`date`) > $user_last_visit 
```

然后，简单地执行查询：

```
$result = mysql_query($query);
list($count) = mysql_fetch_array($result); 
```

无论如何，您的查询会引发错误；应该有另一个警告显示错误。否则，您可以使用`mysql_error()`来找出错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T21:47:39.887

根据[http://php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php) mysql_query 返回“对于 SELECT、SHOW、DESCRIBE、EXPLAIN 和其他返回结果集的语句，mysql_query() 成功返回资源，否则返回 FALSE错误。”

所以尝试做

```
$query = "SELECT * FROM `table` WHERE UNIX_TIMESTAMP(`date`)>$user_last_visit"
$resource = mysql_query($query) or die("Error: ". mysql_error(). " with query ". $query);
mysql_num_rows($resource); 
```

然后看看会发生什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T21:49:14.487

你直接把两个函数放在一起：

```
mysql_num_rows(mysql_query(...)); 
```

从技术上讲，这是可以做到的（函数 1 返回的东西会成为函数 2 的参数），但是，如果函数 1 返回函数 2 无法处理的东西，则会出现错误。

这发生在你的情况下。而是将返回值存储到变量中并自己处理错误：

```
$result = mysql_query(...);
if (!$result) {
    throw new Exception(sprintf('Database query failed: %s', mysql_error()));
}
$num_rows = mysql_num_rows($result); 
```

正确的错误处理对于可靠的编程至关重要，因此请注意返回值。如有疑问，请使用 PHP 手册仔细检查有问题的函数，这确实是一个很好的资源。见[`mysql_query`](http://php.net/mysql_query)。

# arrays - cmd.exe（批处理）脚本中的数组、链表和其他数据结构

> ID：10166386
> 
> 赞同：73
> 
> 时间：2012-04-15T21:42:04.013
> 
> 标签：arrays, windows, batch-file, cmd, delayedvariableexpansion

我在玩 cmd.exe，但在它的帮助下我没有找到任何信息，如何定义数组。

我发现，如何定义简单的变量：

```
set a=10
echo %a% 
```

但是，我想创建数组、链表等......

那么，它是否可以在 cmd.exe 中（我的意思是：在 cmd.exe 中是否存在任何数组关键字？）

我想实现一些算法：

*   冒泡排序
*   快速排序
*   侏儒排序

ETC...

所以，我也想知道，Cmd.exe 是否有引用或实例、结构等？

导致它的帮助不完整：/？

图灵机定义可以将 Cmd.exe 定义为完整吗？（图灵完备）

* * *

## 回答 #1

> 赞同：194
> 
> 时间：2012-04-16T02:15:34.890

好的。我会尽量说清楚，以免被误解...

在 Windows 批处理文件中，*变量名称*应以字母开头，并且可以包含任何有效字符，其中*有效字符*包括：#$'()*+,-.?@[]_`{}~ 除了字母和数字。

这意味着从 cmd.exe 的角度来看，与 ;`SET NORMAL_NAME=123`完全相同`SET A#$'()*+,-.?@[\]_{}~=123`，也完全相同`SET VECTOR[1]=123`。这三个都是正常变量。这样，*您*可以以数组元素的形式编写变量名称：

```
set elem[1]=First element
set elem[2]=Second one
set elem[3]=The third one 
```

这样，`echo %elem[2]%`将显示`Second one`.

如果你想使用*另一个变量*作为索引，你必须知道用它们的值替换百分比符号中的变量是*从左到右*解析的；这意味着：

```
set i=2
echo %elem[%i%]% 
```

没有给出想要的结果，因为它意味着：显示`elem[`变量的值，后跟`i`，然后是`]`变量的值。

要解决这个问题，必须使用*延迟扩展*，即`setlocal EnableDelayedExpansion`在开头插入命令，将索引变量用百分号括起来，数组元素用感叹号括起来：

```
setlocal EnableDelayedExpansion
set elem[1]=First element
set elem[2]=Second one
set elem[3]=The third one
set i=2
echo !elem[%i%]! 
```

您还可以使用 FOR 命令的参数作为索引：`for /L %%i in (1,1,3) do echo !elem[%%i]!`. 您必须使用！索引！在 FOR 或 IF: 中更改索引时将值存储在数组元素中`set elem[!index!]=New value`。要在 FOR/IF 内的索引更改时获取元素的值，请将元素用双百分号括起来，并在命令前加上`call`. 例如，要将一系列数组元素向左移动四位：

```
for /L %%i in (%start%,1,%end%) do (
   set /A j=%%i + 4
   call set elem[%%i]=%%elem[!j!]%%
) 
```

实现上述过程的另一种方法是使用附加的 FOR 命令，通过等效的可替换参数来更改索引的延迟扩展，然后对数组元素使用延迟扩展。此方法比以前的 CALL 运行得更快：

```
for /L %%i in (%start%,1,%end%) do (
   set /A j=%%i + 4
   for %%j in (!j!) do set elem[%%i]=!elem[%%j]!
) 
```

这样，批处理文件的*行为*就像它管理数组一样。我认为这里的重点不是讨论 Batch 是否管理数组，而是您可以以与其他编程语言等效的方式管理 Batch 文件中的数组这一事实。

```
@echo off
setlocal EnableDelayedExpansion

rem Create vector with names of days
set i=0
for %%d in (Sunday Monday Tuesday Wednesday Thrusday Friday Saturday) do (
   set /A i=i+1
   set day[!i!]=%%d
)

rem Get current date and calculate DayOfWeek
for /F "tokens=1-3 delims=/" %%a in ("%date%") do (
   set /A mm=10%%a %% 100, dd=10%%b %% 100, yy=%%c
)
if %mm% lss 3 set /A mm=mm+12, yy=yy-1
set /A a=yy/100, b=a/4, c=2-a+b, e=36525*(yy+4716)/100, f=306*(mm+1)/10, jdn=c+dd+e+f-1523, dow=jdn %% 7 + 1
echo Today is !day[%dow%]!, %date% 
```

请注意，索引值不限于数字，它们可以是任何包含有效字符的字符串；这一点允许定义在其他编程语言中称为[关联数组](https://en.wikipedia.org/wiki/Associative_array)的内容。在[这个答案](https://stackoverflow.com/questions/35639223/find-all-ocurences-of-letter-change-to-diffrent-letter/35642840#35642840)中，详细解释了使用关联数组解决问题的方法。另请注意，空格是变量名中的有效字符，因此您必须注意不要在变量名中插入可能被忽视的空格。

[我在这篇文章](https://stackoverflow.com/questions/10544646/dir-output-into-bat-array/10569981#10569981)中详细阐述了我必须在批处理文件中使用数组表示法的原因。

在[这篇文章](http://www.dostips.com/forum/viewtopic.php?f=3&t=2823)中有一个批处理文件，它读取一个文本文件并将行的索引存储在一个向量中，然后根据行内容对向量元素进行气泡排序；等效的结果是对文件内容进行排序。

在[这篇文章](http://www.dostips.com/forum/viewtopic.php?f=3&t=3126)中，有一个基于存储在文件中的索引的批处理中的基本关系数据库应用程序。

在[这篇文章](http://www.dostips.com/forum/viewtopic.php?f=3&t=3244)中，Batch 中有一个完整的多链表应用程序，它组装了一个从子目录中获取的大型数据结构，并以 TREE 命令的形式显示它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-15T22:01:21.767

Windows shell 脚本确实不是为处理数组而设计的，更不用说复杂的数据结构了。在大多数情况下，Windows shell 中的所有内容都是字符串，但是，您可以做一些事情来“处理”数组，例如使用循环声明`n`变量并过滤前缀，或者创建一个分隔字符串然后使用迭代分隔字符串的构造。`VAR_1, VAR_2, VAR_3...``VAR_``FOR`

类似地，您可以使用相同的基本思想来创建类似结构的变量集，例如`ITEM_NAME, ITEM_DATA`或 w/e。我什至发现[这个链接](http://www.robvanderwoude.com/battech_array.php)讨论了在 CMD 中模拟关联数组。

归根结底，这一切都非常骇人听闻和不便。命令行 shell 并不是为繁重的编程而设计的。我同意@MatteoItalia - 如果您需要认真的脚本，请使用真正的脚本语言。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-03-05T10:14:53.740

不久前，我使用伪数组批量实现了冒泡排序。不知道为什么要使用它（尽管我承认在另一个批处理文件中这样做），因为随着列表大小的增加它变得非常慢。更多的是给自己设定一个小挑战。 *有人*可能会觉得这很有用。

```
:: Bubblesort
:: Horribly inefficient for large lists
:: Dave Johnson implementation 05/04/2013
@echo off
setlocal enabledelayedexpansion
:: Number of entries to populate and sort
set maxvalue=50
:: Fill a list of vars with Random numbers and print them
for /l %%a in (1,1,%maxvalue%) do (
    set /a tosort%%a=!random!
)
:: echo them
set tosort
:: Commence bubble sort
Echo Sorting...
set /a maxvalue-=1
set iterations=0
for /l %%a in (%maxvalue%,-1,1) do ( REM Decrease by 1 the number of checks each time as the top value will always float to the end
    set hasswapped=0
        for /l %%b in (1,1,%%a) do (
            set /a next=%%b+1
            set next=tosort!next!
            set next=!next!
            call :grabvalues tosort%%b !next!
            rem echo comparing tosort%%b = !tosortvalue! and !next! = !nextvalue!
            if !nextvalue! LSS !tosortvalue! (
            rem set /a num_of_swaps+=1
            rem echo Swapping !num_of_swaps!
                set !next!=!tosortvalue!
                set tosort%%b=!nextvalue!
                set /a hasswapped+=1
            )
        )
    set /a iterations+=1
    if !hasswapped!==0 goto sorted
)
goto:eof
:grabvalues
set tosortvalue=!%1!
set nextvalue=!%2!
goto:eof
:sorted
::nice one our kid
set tosortvalue=
echo Iterations required: %iterations%
set tosort
endlocal 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-15T21:54:58.850

说真的：我从来没有听说过批处理有数组，也许你可以用一些奇怪的技巧来模拟它们，但我不认为这是一个好主意。

引用/实例/结构是真实语言的东西，cmd 脚本只是在非常原始的解释器 command.com 上发展起来的一堆扩展，你可以做一些基本的脚本，但比一堆调用更复杂其他命令注定会变得丑陋和难以理解。

唯一的“高级”结构是 do-it-all 怪人`for`循环，它与变量替换的奇怪“规则”（`%var%`, `%%var`, `!var!`, 是不同的东西，因为愚蠢的解析器）混合在一起，使得编写即使是微不足道的算法也成为一个集合奇怪的 hacks（参见例如这里[的 quicksort 的实现](https://stackoverflow.com/questions/133154/how-do-i-implement-quicksort-using-a-batch-file)）。

我的建议是，如果您想以一种理智的方式编写脚本，请使用*真正的*脚本语言，并为简单、快速的 hack 和向后兼容性保留批处理。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-03-17T15:18:47.277

关于此声明^*：

> 我发现，如何定义简单的变量：
> 
> ```
> set a = 10
> echo %a% 
> ```

这简直是​​错误的！变量`a`将保持为空（假设它最初为空）`echo %a%`并将返回`ECHO is on.`一个名为的变量`a``SPACE`实际上将设置为 value `SPACE``10`。

因此，要使代码正常工作，您必须去掉`SPACEs`等号周围的：

```
set a=10
echo %a% 
```

要使分配对所有字符安全，请使用带引号的语法（假设您启用了[命令扩展名](http://ss64.com/nt/cmd.html "命令")，无论如何这是 Windows 命令提示符的默认设置）：

```
set "a=1&0"
echo(%a% 
```

对于您的所有其他问题，我建议您阅读[Aacini](https://stackoverflow.com/users/778560)的出色而全面的[答案](https://stackoverflow.com/a/10167990)。

* * *

[*) 此声明同时已被[删除](https://stackoverflow.com/revisions/10166386/8)。]

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-12-14T20:10:43.177

TLDR：

我想到了使用“For”循环和“set”命令来解析变量的想法，允许我创建伪数组，包括有序和链表样式，更重要的是，类似于结构的伪对象。

**一个典型的批处理伪数组，以及如何解析：**

```
SET "_Arr.Names="Name 1" "Name 2" ... "Name N""

FOR %A IN (%_Arr.Names%) DO @( Echo.%~A )

REM Results:

REM Name 1
REM Name 2
REM ...
REM Name N 
```

**下面我们制作了一些 Dumb Pseudo Arrays 和一个手动排序的 Pseudo Array，并创建了一个 Ordered Pseudo Array 来捕获 DIR 命令的输出。**

我们还采用 Dumb Pseudo Arrays 并将它们转换为 Ordered 数组（之后删除原始 Dumb Pseudo Array 变量）。

然后我们手动更新所有有序数组以包含更多元素。

最后，我们通过对值 7 到 9 执行预定义的 For L 循环来动态报告数组中的一些值，并生成一个随机值以打印数组的第 4 个示例值。

**笔记：**

我创建了一个变量来保存添加成员的方法，以使添加它们更简单。

我指出这一点，因为它应该可以很容易地看到我们如何从有序数组到伪对象的小跳转。

```
@(
 SETLOCAL ENABLEDELAYEDEXPANSION
 ECHO OFF

 REM Manually Create a shortcut method to add more elements to a specific ordered array
 SET "_Arr.Songs.Add=SET /A "_Arr.Songs.0+=1"&&CALL SET "_Arr.Songs.%%_Arr.Songs.0%%"

 REM Define some 'dumb' Pseudo arrays
 SET "_Arr.Names="Name 1" "Name 2" "Name 3" "Name 4" "Name 5" "Name 6" "Name 7" "Name 8""
 SET "_Arr.States="AL" "AK" "AZ" "AR" "CA" "CO" "CT" "DE" "FL" "GA" "HI" "ID" "IL" "IN" "IA" "KS" "KY" "LA" "ME" "MD" "MA" "MI" "MN" "MS" "MO" "MT" "NE" "NV" "NH" "NJ" "NM" "NY" "NC" "ND" "OH" "OK" "OR" "PA" "RI" "SC" "SD" "TN" "TX" "UT" "VT" "VA" "WA" "WV" "WI" "WY""

)

REM Manually Create One Ordered Array
%_Arr.Songs.Add%=Hey Jude"
%_Arr.Songs.Add%=The Bartman"
%_Arr.Songs.Add%=Teenage Dirtbag"
%_Arr.Songs.Add%=Roundabout"
%_Arr.Songs.Add%=The Sound of Silence"
%_Arr.Songs.Add%=Jack and Diane"
%_Arr.Songs.Add%=One Angry Dwarf and 200 Solumn Faces"

REM Turn All Pre-Existing Normal Pseudo Arrays into Element Arrays
REM Since Ordered Arrays use Index 0, we can skip any manually created Ordered Arrays:
FOR /F "Tokens=2 Delims==." %%A IN ('SET _Arr. ^| FIND /V ".0=" ^| SORT') DO (
 IF /I "%%~A" NEQ "!_TmpArrName!" (
  SET "_TmpArrName=%%~A"
  IF NOT DEFINED _Arr.!_TmpArrName!.Add (
   REM Create a shortcut method to add more members to the array
   SET "_Arr.!_TmpArrName!.Add=SET /A "_Arr.!_TmpArrName!.0+=1"&&CALL SET "_Arr.!_TmpArrName!.%%_Arr.!_TmpArrName!.0%%"
  )
  FOR %%a IN (!_Arr.%%~A!) DO (
   CALL SET /A "_Arr.!_TmpArrName!.0+=1"
   CALL SET "_Arr.!_TmpArrName!.%%_Arr.!_TmpArrName!.0%%=%%~a"
  )
 )
 IF DEFINED _Arr.!_TmpArrName! (
  REM Remove Unneeded Dumb Psuedo Array "_Arr.!_TmpArrName!"
  SET "_Arr.!_TmpArrName!="
 )
)

REM Create New Array of unknown Length from Command Output, and Store it as an Ordered Array
 SET "_TmpArrName=WinDir"
 FOR /F "Tokens=* Delims==." %%A IN ('Dir /B /A:D "C:\Windows"') DO (
  IF NOT DEFINED _Arr.!_TmpArrName!.Add (
   SET "_Arr.!_TmpArrName!.Add=SET /A "_Arr.!_TmpArrName!.0+=1"&&CALL SET "_Arr.!_TmpArrName!.%%_Arr.!_TmpArrName!.0%%"
  )
  CALL SET /A "_Arr.!_TmpArrName!.0+=1"
  CALL SET "_Arr.!_TmpArrName!.%%_Arr.!_TmpArrName!.0%%=%%~A"
 )
)

REM Manually Add additional Elements to the Ordered Arrays:
%_Arr.Names.Add%=Manual Name 1"
%_Arr.Names.Add%=Manual Name 2"
%_Arr.Names.Add%=Manual Name 3"

%_Arr.States.Add%=51st State"
%_Arr.States.Add%=52nd State"
%_Arr.States.Add%=53rd State"

%_Arr.Songs.Add%=Live and Let Die"
%_Arr.Songs.Add%=Baby Shark"
%_Arr.Songs.Add%=Safety Dance"

%_Arr.WinDir.Add%=Fake_Folder 1"
%_Arr.WinDir.Add%=Fake_Folder 2"
%_Arr.WinDir.Add%=Fake_Folder 3"

REM Test Output:

REM Use a For Loop to List Values 7 to 9 of each array and A Psuedo Rnadom 4th value
REM We are only interested in Ordered Arrays, so the .0 works nicely to locate those exclusively.
FOR /F "Tokens=2,4 Delims==." %%A IN ('SET _Arr. ^| FIND ".0=" ^| SORT') DO (
 CALL :Get-Rnd %%~B
 ECHO.
 ECHO.%%~A 7 to 9, Plus !_Rnd#! - Psuedo Randomly Selected
 FOR /L %%L IN (7,1,9) DO (
  CALL Echo. * Element [%%L] of %%~A Pseudo Array = "%%_Arr.%%~A.%%L%%"
 )
 CALL Echo. * Random Element [!_Rnd#!] of %%~A Pseudo Array = "%%_Arr.%%~A.!_Rnd#!%%"
)
ENDLOCAL 
GOTO :EOF

:Get-Rnd
 SET /A "_RandMax=(32767 - ( ( ( 32767 %% %~1 ) + 1 ) %% %~1) )", "_Rnd#=!Random!"
 IF /I !_Rnd#! GTR !_RandMax! ( GOTO :Get_Rnd# )
 SET /A "_Rnd#%%=%~1"
GOTO :EOF 
```

示例结果：

```
Results:

Names 7 to 9, Plus 5 - Psuedo Randomly Selected
 * Element [7] of Names Pseudo Array = "Name 7"
 * Element [8] of Names Pseudo Array = "Name 8"
 * Element [9] of Names Pseudo Array = "Manual Name 1"
 * Random Element [5] of Names Pseudo Array = "Name 5"

Songs 7 to 9, Plus 5 - Psuedo Randomly Selected
 * Element [7] of Songs Pseudo Array = "One Angry Dwarf and 200 Solumn Faces"
 * Element [8] of Songs Pseudo Array = "Live and Let Die"
 * Element [9] of Songs Pseudo Array = "Baby Shark"
 * Random Element [5] of Songs Pseudo Array = "The Sound of Silence"

States 7 to 9, Plus 9 - Psuedo Randomly Selected
 * Element [7] of States Pseudo Array = "CT"
 * Element [8] of States Pseudo Array = "DE"
 * Element [9] of States Pseudo Array = "FL"
 * Random Element [9] of States Pseudo Array = "FL"

WinDir 7 to 9, Plus 26 - Psuedo Randomly Selected
 * Element [7] of WinDir Pseudo Array = "assembly"
 * Element [8] of WinDir Pseudo Array = "AUInstallAgent"
 * Element [9] of WinDir Pseudo Array = "Boot"
 * Random Element [26] of WinDir Pseudo Array = "Fonts" 
```

* * *

最初，我会做类似于 Aacini 的事情，一个带有增量计数器的简单变量行，手动，或者通过一个简单的循环从一个快速的变量列表中分配它们。

这对于小型二维阵列来说很好。

但是，我发现长数据数组很痛苦，尤其是当我需要多值内容时。

更不用说什么时候我需要动态匹配和填充这些多维数组中的内容，那里的简单用法会失效。

我发现，当您最终需要多个信息数组来全面更新或添加功能时，这变得很困难。

因此，数组本质上是您需要作为变量导出的子字符串列表，添加或更改它们的顺序意味着更改您的代码。

例如，您需要登录多个 FTP 服务器，从某些路径中删除超过 X 天的文件。

**最初，您可能会创建简单的子字符串数组，我将像这样定义：**

```
Site.##=[Array (String)] [Array (String)] @(
       IP=[SubSting],
       Username=[SubString],
       Password[SubString]) 
```

**或如本示例代码所示。**

```
(
  SETOCAL
  ECHO OFF

  REM Manage Sites:
  SET "Sites=13"
  SET "MaxAge=28"

  SET "Site.1="[IP]" "[User Name]" "[Password]" "[Path]""
  SET "Site.2="[IP]" "[User Name]" "[Password]" "[Path]""
  SET "Site.3="[IP]" "[User Name]" "[Password]" "[Path]""
  REM  ...
  SET "Site.11="[IP]" "[User Name]" "[Password]" "[Path]""
  SET "Site.12="[IP]" "[User Name]" "[Password]" "[Path]""
  SET "Site.13="[IP]" "[User Name]" "[Password]" "[Path]""
)

FOR /L %%L IN (1,1,%Sites%) DO (
   FOR /F "Tokens=*" %%A IN ('CALL ECHO %%Site.%%L%%') DO (
      Echo. Pulled this example from a more complex example of my actual code, so the example variables may not need this loop, but it won't hurt to have if they don't need the extra expansion.
     Call :Log
     CALL :DeleteFTP %%~A
   )
)

GOTO :EOF
:DeleteFTP
   REM Simple ftp command for cygwin to delete the files found older than X days.
   SET "FTPCMD="%~dp0lftp" %~1 -u %~2,%~3 -e "rm -rf %~4%MaxAge% "
   FOR /F "Tokens=*" %%F IN ('"%FTPCMD% 2^>^&1"') DO @(
     ECHO.%%~F
   )
GOTO :EOF 
```

**现在，有 13 个站点，这并不是那么糟糕，我敢肯定你是在说。正确的？您可以在最后添加一个，然后输入信息并完成。**

然后您需要添加网站的名称以进行报告，因此您在位置 5 的每个字符串中添加另一个术语，这样您就不必更改您的功能..

```
::...
SET "Site.1="[IP]" "[User Name]" "[Password]" "[Path]" "[Site Name]""
::... 
```

然后你意识到你需要按照他们的站点名称（或 IP，但名称对大多数人来说更容易记住并且你需要能够让其他人看到）来保持它们的顺序，所以你改变了顺序所有 13 个点、扩展变量的调用和函数。

```
::...
SET "Site.1="[Site Name]" "[IP]" "[User Name]" "[Password]" "[Path]""
::...
FOR /F "Tokens=*" %%A IN ('CALL ECHO %%Site.%%L%%')
::...
SET "FTPCMD="%~dp0lftp" %~2 -u %~3,%~4 -e "rm -rf %~5%MaxAge% "
::... 
```

**然后它只会变得更糟：**

*   您必须在同一站点使用不同用户检查的目录数量开始增加。

*   您意识到您需要为每个站点设置不同的保留时间，然后再为每个目录设置不同的保留时间。

*   你最终会得到 30、40,50 个，通过查看长字符串的末尾并复制它们等，很难记住哪个是哪个。

*   您停止添加更多路径，但有时您必须删除旧路径，否则当它们消失时会导致问题，如果您忘记更新列表中的站点总数，您可能会错过在某些上运行脚本。

*   添加或删除目录时，您必须从每个站点添加/删除它，这使得使用排序变得更加困难，并且更容易错过站点，因为它们不容易识别。

**只是，多么痛苦，甚至当您需要一组动态对象时，这都是手动的。**

**所以，你可以做什么？好吧，这就是我所做的：**

我最终求助于在需要的 cmd 脚本中实现一种穷人结构或对象数组（字符串）。

IE 结构将是一个“站点对象”，它具有多个属性，这些属性本身可能是具有子属性的对象。由于 CMD 实际上不是面向对象的，因此它有点像数组一样。

**由于我开始的示例最终成为我尝试这些的第一个地方，因此您可以看到这个中间汞合金步骤，我将定义如下：**

```
eg: Site.[ID].[Object Property]=[Value, or array of values]

   Site
     .ID=[int]
      .Name=[string]
      .Path=[String]
      .MaxAge=[Int]
      .Details=[Array (String)] @(
       IP=[SubSting],
       Username=[SubString],
       Password[SubString]) 
```

为了解决需要即时重新排序数据集的问题，我考虑使用一种我玩过的链表形式，但是因为我想轻松地将项目添加到每个站点分组中，同时保持站点之间的顺序，所以我选择了一个简单的方法。

下面是这一步使用中的另一个代码示例：

```
@(
    SETLOCAL ENABLEDELAYEDEXPANSION
    ECHO OFF

    SET "_SiteCount=0"
    SET "_SiteID=0"

    SET /A "_SiteID= !_SiteID! + 1"
    SET "Site.!_SiteID!.MaxAge=Day5Ago"
    SET "Site.!_SiteID!.Name=[SITE NAME HEADER FOR EMAIL]"
    SET "Site.!_SiteID!.Detail="[IP]" "[UserName]" "[Password]" "[Path]""

    REM ...

    SET /A "_SiteID= !_SiteID! + 1"
    SET "Site.!_SiteID!.MaxAge=Day15Ago"
    SET "Site.!_SiteID!.Name=[SITE NAME HEADER FOR EMAIL]"
    SET "Site.!_SiteID!.Detail="[IP]" "[UserName]" "[Password]" "[Path]""
)

CALL :Main

(
    ENDLOCAL
    Exit /b %eLvl%
)

:Main
   REM In some forms of these the order isn't meaningful, but in others you need to follows the order and so we just count he number of site objects by counting one of their properties.
   FOR /F %%A IN ('SET ^| FIND /I "Site." ^| FIND /I ".Name="') DO ( CALL SET /A "_SiteCount+=1" )
    FOR /L %%L IN (1,1,34) DO (
        CALL :PSGetDate_DaysAgo %%L
    )
    FOR /L %%L IN (1,1,%_SiteCount%) DO (
        SET "Site.%%L.Create=NONE"
    )
    FOR /L %%L IN (1,1,%_SiteCount%) DO (
        FOR /F "Tokens=*" %%A IN ('CALL ECHO ""%%Site.%%L.Name%%" %%Site.%%L.Detail%% "Site.%%L" "%%%%Site.%%L.MaxAge%%%%""') DO (
            CALL ECHO CALL :DeleteFTP %%~A
            CALL :DeleteFTP %%~A
        )
    )
    CALL :SendMail "%EMLog%" "%_EMSubject%"

GOTO :EOF

:DeleteFTP
    REM ECHO.IF "%~7" EQU "%skip%" (
    IF "%~7" EQU "%skip%" (
        GOTO :EOF
    )
    SET "FTPCMD="%~dp0lftp" %~2 -u %~3,%~4 -e "rm -rf %~5%~7 "
    SET "FTPCMD=%FTPCMD%; bye""
    FOR /F "Tokens=*" %%F IN ('"%FTPCMD% 2^>^&1"') DO @(
        ECHO."%%F"
        ECHO."%%~F"
        REM CALL :Output "%Temp%\%~2_%~7.log" "%%F"
        %OP% "%Temp%\%~2_%~7.log"
        SET "FTPOut=%%~F"
    )
GOTO :EOF 
```

正如您可能看到的，这些结构在您需要手动应用并以特定顺序显示数据的分叉分层数据集的情况下工作得非常好。

**虽然，可以肯定的是，今天我通常将结构的基础作为脚本的名称，因为我发现这更有用，并且可能会或可能不会根据需要使用有序数组。**

```
SET "_GUID=^%Time^%_^%Random:~-1^%^%Random:~-1^%^%Random:~-1^%^%Random:~-1^%^%Random:~-1^%^%Random:~-1^%^%Random:~-1^%^%Random:~-1^%^%Random:~-1^%"

eg: %~n0.[ObjectName].[Object Property].[Object Sub Property]=[Value, or array of values]

       [Script Name]
         .[Object Name](May Hold Count of Names)=[int]
          .Name=[string]
          .Paths(May Hold Count of IDs)=[INT]
            .GUID=%_GUID%
             .Path=String
             .MaxAge=[Int]
          .Details=[Array (String)] @(
           IP=[SubSting],
           Username=[SubString],
           Password[SubString]) 
```

**但是，您可能需要在哪里收集大量动态生成的数据，并将其分组到预先制作的类别中，然后将其混合起来进行报告。**

好吧，这些也很有用，您可以在代码中动态构建它们，根据需要添加更多属性。

在与 FTP 删除类似的脚本中，我们需要检查多个目录的大小，我将把它弄糊涂一点，只看一个检查：

```
@(
    SETLOCAL ENABLEDELAYEDEXPANSION
    ECHO OFF

    SET /A "_SiteID= !_SiteID! + 1"
    SET "SiteName=SiteA"
    SET "%~n0.!SiteName!=%%_SiteID%%
    SET "%~n0.!SiteName!.SiteID=!_SiteID!
    SET "%~n0.!SiteName!.Paths="PathA" "PathB" "PathC" "PathD" "PathE""
)

CALL :CheckFTP [FTP Login variables from source object including Site ID]

:CheckFTP
 REM Not necessary to assign Variables, doing this for exposition only:
 CALL SET "TempSiteName=%~6"
 CALL SET "TempPaths=%%%~n0.%~1.Paths%%"
 REM Clear the site Temp KB variables
 FOR \F "Tokens=2* Delims== " %%H IN (%TempPaths% "Total" "Temp") DO (
  CALL SET /A "%%%~n0.%~1.Paths.%%~H.KB=0"
 )
 FOR %%J IN (%TempPaths%) DO (
   FOR /F "Tokens=1-2" %%F IN ('[FTP Command using source object options]') DO @(
     CALL :SumSite "%~6" "%%~F" "%%~G"
     FOR /F "Tokens=1,2,* delims=/" %%f IN ("%%~G") DO (
       CALL :ConvertFolder "%~6" "%%~F" "%%~g" "%%~h" "%~6_%%~g_%%~h"
     )
   )
 )

FOR /F "Tokens=3,4,7 Delims==_." %%g IN ('SET ^| FIND /I "%~6_" ^| FIND /I ".KB" ^| FIND /I /V "_."') DO (
    CALL :WriteFolder "%%g/%%~h" "%TmpFile%" "%~6_%%~g_%%~h"
    REM echo.CALL :WriteFolder "%%g/%%~h" "%TmpFile%" "%~6_%%~g_%%~h"
)
CALL :ConvertSite "%~1"
CALL :WriteTotalFolder "%~7" "%TmpFile%" "%~6"
CALL :SendMail "%TmpFile%" "Backup_%~1"
GOTO :EOF

:SumSite
  CALL SET "TSumPaths=%%%~n0.%~1.Paths%% "Total""
   FOR %%H IN (%TSumPaths%) DO (
    CALL SET /A "%~n0.%~1.Paths.%%~H.KB=%%%~n0.%~1.Paths.%%~H.KB%%+%~2"
  )

:SumSite
  CALL SET "TSumPaths=%%%~n0.%~1.Paths%% "Total""
   FOR %%H IN (%TSumPaths%) DO (
    CALL SET /A "%~n0.%~1.Paths.%%~H.KB=%%%~n0.%~1.Paths.%%~H.KB%%+%~2"
  )
GOTO :EOF

:ConvertFolder
    REM Convert's Folder values to MB and GB
    SET /A "%~1.Temp.KB=%~2"
    CALL SET /A "%~1.Temp.MB=%%%~1.Temp.KB%%/1024"
    CALL SET /A "%~1.Temp.GB=(%%%~1.Temp.KB%%/1024)/1024"
    CALL SET /A "%~5.Temp.KB=%%%~5.Temp.KB%%+%~2"
    CALL SET /A "%~5.Temp.MB=%%%~5.Temp.KB%%/1024"
    CALL SET /A "%~5.Temp.GB=(%%%~5.Temp.KB%%/1024)/1024"
GOTO :EOF

:WriteFolder

    CALL :PickGMKBytes "%~1" "%~2" "G" "M" "K" "%%%~3.Temp.GB%%" "%%%~3.Temp.MB%%" "%%%~3.Temp.KB%%"

GOTO :EOF

:PickGMKBytes

    IF /I "%~6" NEQ "" (
        IF /I "%~6"=="0" (
            CALL :PickGMKBytes "%~1" "%~2" "%~4" "%~5" "%~6" "%~7" "%~8"
        ) ELSE (
            CALL :Output "%~2" "%~6%~3  %~1"
        )
    ) ELSE (
        CALL :Output "%~2" "0B  %~1"
    )

GOTO :EOF

:ConvertSite
 CALL SET "TempPaths=%%%~n0.%~1.Paths%%"
    FOR %%V IN (%TempPaths% "Total") DO (
        CALL SET /A "%~1.%%~V.MB=%%%~1.%%~V.KB%%/1024"
        CALL SET /A "%~1.%%~V.GB=(%%%~1.%%~V.KB%%/1024)/1024"
    )

GOTO :EOF 
```

公平地说，这个脚本示例在显示正在发生的事情方面可能不是很明确，我必须即时进行更改以修复新的对象样式，但本质上是：它创建连接对象，然后动态扩展它们以包含 sub文件夹，并以 KB、MB 和 GB 为单位维护每个子文件夹和站点的运行总计，并在动态汇总给定文件夹的所有目录等后报告哪些值。

虽然我不得不对其进行一些编辑，因为这也是这些版本的早期版本，但我认为这是它可能最能展示好处的实例之一。如果我在我的其他脚本之一中找到更好的示例，我也可能会在那里更新它。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-01-21T10:29:42.583

以下程序模拟`cmd`. 其中介绍的子例程最初是为一些特殊情况设计的，例如将程序参数存储在数组中或在“ `for`”循环中循环文件名并将它们存储在数组中。在这些情况下，在一个`enabled delayed expansion`块中，“ `!`”字符——如果存在于参数值或“ `for`”循环变量的值中——将被解释。这就是为什么在这些情况下，必须在`disabled delayed expansion`块内使用子例程：

```
@echo off

rem The subroutines presented bellow implement vectors (arrays) operations in CMD

rem Definition of a vector <v>:
rem      v_0 - variable that stores the number of elements of the vector;
rem      v_1..v_n, where n=v_0 - variables that store the values of the vector elements.

rem :::MAIN START:::

setlocal disabledelayedexpansion

    rem Getting all the parameters passed to the program in the vector 'params':
    rem Delayed expansion is left disabled in order not to interpret "!" in the program parameters' values (%1, %2, ... );
    rem If a program parameter is not quoted, special characters in it (like "^", "&", "|") get interpreted at program launch.
:loop1
    set "param=%~1"
    if defined param (
        call :VectorAddElementNext params param
        shift
        goto :loop1
    )
    rem Printing the vector 'params':
    call :VectorPrint params

    pause&echo.

    rem After the vector variables are set, delayed expansion can be enabled and "!" are not interpreted in the vector variables's values:
    echo Printing the elements of the vector 'params':
    setlocal enabledelayedexpansion
        if defined params_0 (
            for /l %%i in (1,1,!params_0!) do (
                echo params_%%i="!params_%%i!"
            )
        )
    endlocal

    pause&echo.

    rem Setting the vector 'filenames' with the list of filenames in the current directory:
    rem Delayed expansion is left disabled in order not to interpret "!" in the %%i variable's value;
    for %%i in (*) do (
        set "current_filename=%%~i"
        call :VectorAddElementNext filenames current_filename
    )
    rem Printing the vector 'filenames':
    call :VectorPrint filenames

    pause&echo.

    rem After the vector variables are set, delayed expansion can be enabled and "!" are not interpreted in the vector variables's values:
    echo Printing the elements of the vector 'filenames':
    setlocal enabledelayedexpansion
        if defined filenames_0 (
            for /l %%i in (1,1,!filenames_0!) do (
                echo filenames_%%i="!filenames_%%i!"
            )
        )
    endlocal

    pause&echo.

endlocal
pause

rem :::MAIN END:::
goto :eof

:VectorAddElementNext
rem Vector Add Element Next
rem adds the string contained in variable %2 in the next element position (vector length + 1) in vector %1
(
    setlocal enabledelayedexpansion
        set "elem_value=!%2!"
        set /a vector_length=%1_0
        if not defined %1_0 set /a vector_length=0
        set /a vector_length+=1
        set elem_name=%1_!vector_length!
)
(
    endlocal
    set "%elem_name%=%elem_value%"
    set %1_0=%vector_length%
    goto :eof
)

:VectorAddElementDVNext
rem Vector Add Element Direct Value Next
rem adds the string %2 in the next element position (vector length + 1) in vector %1
(
    setlocal enabledelayedexpansion
        set "elem_value=%~2"
        set /a vector_length=%1_0
        if not defined %1_0 set /a vector_length=0
        set /a vector_length+=1
        set elem_name=%1_!vector_length!
)
(
    endlocal
    set "%elem_name%=%elem_value%"
    set %1_0=%vector_length%
    goto :eof
)

:VectorAddElement
rem Vector Add Element
rem adds the string contained in the variable %3 in the position contained in %2 (variable or direct value) in the vector %1
(
    setlocal enabledelayedexpansion
        set "elem_value=!%3!"
        set /a elem_position=%2
        set /a vector_length=%1_0
        if not defined %1_0 set /a vector_length=0
        if !elem_position! geq !vector_length! (
            set /a vector_length=elem_position
        )
        set elem_name=%1_!elem_position!
)
(
    endlocal
    set "%elem_name%=%elem_value%"
    if not "%elem_position%"=="0" set %1_0=%vector_length%
    goto :eof
)

:VectorAddElementDV
rem Vector Add Element Direct Value
rem adds the string %3 in the position contained in %2 (variable or direct value) in the vector %1
(
    setlocal enabledelayedexpansion
        set "elem_value=%~3"
        set /a elem_position=%2
        set /a vector_length=%1_0
        if not defined %1_0 set /a vector_length=0
        if !elem_position! geq !vector_length! (
            set /a vector_length=elem_position
        )
        set elem_name=%1_!elem_position!
)
(
    endlocal
    set "%elem_name%=%elem_value%"
    if not "%elem_position%"=="0" set %1_0=%vector_length%
    goto :eof
)

:VectorPrint
rem Vector Print
rem Prints all the elements names and values of the vector %1 on sepparate lines
(
    setlocal enabledelayedexpansion
        set /a vector_length=%1_0
        if !vector_length! == 0 (
            echo Vector "%1" is empty!
        ) else (
            echo Vector "%1":
            for /l %%i in (1,1,!vector_length!) do (
                echo [%%i]: "!%1_%%i!"
            )
        )
)
(
    endlocal
    goto :eof
)

:VectorDestroy
rem Vector Destroy
rem Empties all the elements values of the vector %1
(
    setlocal enabledelayedexpansion
        set /a vector_length=%1_0
)
(
    endlocal
    if not %vector_length% == 0 (
        for /l %%i in (1,1,%vector_length%) do (
            set "%1_%%i="
        )
        set "%1_0="
    )
    goto :eof
) 
```

也可以将程序参数存储在“数组”中，或者使用“ `for`”循环遍历目录中的文件名，并将它们存储在“数组”`!`中（不解释它们的值中的“”），而不使用在上面的程序：

```
@echo off

setlocal disabledelayedexpansion

    rem Getting all the parameters passed to the program in the array 'params':
    rem Delayed expansion is left disabled in order not to interpret "!" in the program parameters' values (%1, %2, ... );
    rem If a program parameter is not quoted, special characters in it (like "^", "&", "|") get interpreted at program launch.
    set /a count=1
:loop1
    set "param=%~1"
    if defined param (
        set "params_%count%=%param%"
        set /a count+=1
        shift
        goto :loop1
    )
    set /a params_0=count-1

    echo.

    rem After the array variables are set, delayed expansion can be enabled and "!" are not interpreted in the array variables's values:
    rem Printing the array 'params':
    echo Printing the elements of the array 'params':
    setlocal enabledelayedexpansion
        if defined params_0 (
            for /l %%i in (1,1,!params_0!) do (
                echo params_%%i="!params_%%i!"
            )
        )
    endlocal

    pause&echo.

    rem Setting the array 'filenames' with the list of filenames in the current directory:
    rem Delayed expansion is left disabled in order not to interpret "!" in the %%i variable's value;
    set /a count=0
    for %%i in (*) do (
        set "current_filename=%%~i"
        set /a count+=1
        call set "filenames_%%count%%=%%current_filename%%"
    )
    set /a filenames_0=count

    rem After the array variables are set, delayed expansion can be enabled and "!" are not interpreted in the array variables's values:
    rem Printing the array 'filenames':
    echo Printing the elements of the array 'filenames':
    setlocal enabledelayedexpansion
        if defined filenames_0 (
            for /l %%i in (1,1,!filenames_0!) do (
                echo filenames_%%i="!filenames_%%i!"
            )
        )
    endlocal

endlocal
pause

goto :eof 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-01-10T11:21:05.080

# 通用数组处理脚本

```
@ECHO OFF
Set "UseErr=Echo/&Echo/Usage Error - Ensure command extensions and Delayed Expansion are enabled with: &Echo/Setlocal EnableExtensions EnableDelayedExpansion&Echo/ or from the command line:&Echo/CMD /V:On /K&Exit /B 1"
If Not "!Comspec!"=="%Comspec%" (%UseErr%)
(Set "GRPNm="&Set "TAB= "&Set "S_Offset="&Set "mode="&Set "#STDOut="&Set "nGRPNm="&Set "#Order="&Set "#Help="&Set "Inset="&Set "Usage=Echo/###&Exit /B 1") > Nul 2> Nul
(Set "SwParam="&Set "SwFParam="&Set "#ORP#=0"&Set "#FP#=0"&Set "Inset="&Set "#STDOut=0"&Set "GRPNm="&Set "!GRPNm!="&Set "SubEl="&Set "FlNm=%~n0"& Set "Mode="&Set "FindV=") > Nul 2> Nul
If "%~1"=="" (
    Echo/&Echo/Modes:&Echo/ [Def]!TAB!!TAB!!TAB!Define, modify or clear an array.
    Echo/ [Def]!TAB!!TAB!!TAB!Switches:!TAB![/A:Groupname] [/F:Filepath.ext] [/D] [/O:Index#Arg] [/E:Element Sub value] [[element0] ~ [element#]]
    Echo/ [Sort-int]!TAB!!TAB!Sorts array by lowest or highest value using /L or /H switches
    Echo/ [Sort-int]!TAB!!TAB!Switches:!TAB![/A:Groupname] [/N:New Groupname] [/L^|/H] [/D]
    Echo/ [Sort-str]!TAB!!TAB!Sorts an array or text files string values using alphanumerical order of sort: [0-9][a-z]
    Echo/ [Sort-str]!TAB!!TAB!Switches:!TAB![/A:Groupname] [/F:Filepath.ext] [/D]
    Echo/ [Find]    !TAB!!TAB!Searches an array for the string value supplied.
    Echo/ [Find] [searchstring]!TAB!Switches: [/A:Groupname]&Echo/
    %Usage:###=/M:Mode required&Echo/[Def][Sort-int^|str][Find-Value]%
   ) Else Call :GetArgs %*
If Errorlevel 1 Exit /B 1
If "!Mode!"=="" (%Usage:###=/M:Mode  required&Echo/[Def][Sort-int^|str][Find-Value]%)
Call :!Mode! %* 2> Nul || (%Usage:###=Invalid Mode or switch error for /M:!Mode!&Echo/[Def][Sort-int^|str][Find-Value]%)
Exit /B 0
:str
 Set "Usage=Echo/###&Echo/Call !FlNm! ["/F:filepath.ext" ^| "/A:Array Group Name"] & Exit /B 1"
 Set "#!GRPNm!=0"
 If "!#FP#!"=="1" (
  (For /F "UseBackQ Delims=" %%G in (`Type "!FilePath!" ^| Sort`)Do (
   For %%x in ("!GRPNm![!#%GRPNm%!]") Do (
    Setlocal DisableDelayedExpansion
    Endlocal & Set "%%~x=%%~G"
    If "!#STDOut!"=="1" Echo/%%~x=%%~G
   )
   Set /A "#!GRPNm!+=1"
  )) 2> Nul || (%Usage:###:=Echo/Invalid Filepath:"!FilePath!"%)
  Exit /B 0
 )
 If Not "!#FP#!"=="1" (For /F "Tokens=1,2 Delims==" %%G in ('Set !GRPNm![')Do Echo/%%H)>"%TEMP%\__Sort.txt"
 (For /F "UseBackQ Delims=" %%G in (`Type "%TEMP%\__Sort.txt" ^| Sort`)Do (
   For %%x in ("!GRPNm![!#%GRPNm%!]") Do (
    Setlocal DisableDelayedExpansion
    Endlocal & Set "%%~x=%%~G"
    If "!#STDOut!"=="1" Echo/%%~x=%%~G
   )
    Set /A "#!GRPNm!+=1"
  )
 )
 Del /Q "%TEMP%\__Sort.txt"
Exit /B 0
:Find
 Set "Usage=Echo/###&Echo/Call !FlNm! [/M:Find-Searchstring] [/A:Group Name]&Exit /B 1"
 If "!FindV!"=="" (%Usage:###=/M:Find-Value Required%)
 (For /F "Tokens=1,2 Delims==" %%i in ('Set !GRPNm![') Do Echo/"%%j"|"%__AppDir__%findstr.exe"/LIC:"!FindV!" > Nul 2> Nul && (Echo/!FindV! found:&Echo/%%~i=%%~j))
Exit /B 0
:Int
Set "Usage=Echo/###&Echo/Call !FlNm! [/M:Sort-Int] [/A:Group Name] [/N:New Group Name] [Sort-Int] [/H^|/L]&Echo/Call %~n0 [/M:Sort-Int] [/A:Groupname] [Sort-Int] [/H^|/L]&Exit /B 1"
If "!#Help!"=="1" (%Usage:###=/M:Sort-Int Usage:%)
If "!nGRPNm!"=="" Set "nGRPNm=!GRPNm!"
If Not "%#Order%"=="" (Call :Sort%#Order% !nGRPNm! #!nGRPNm! !Inset!) Else (%Usage:###=Sort Order Required /H or /L%)
Exit /B 0
::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: Subroutines for Population of Arrays with numeric values in sorted order.
:sortL <Element_VarName> <Element_Index_VarName> <Variable Names containing the values to be Sorted and Populated to the Array>
 Set "%2=0"
 FOR %%P In (%*) DO If Not "%%P"=="%1" If Not "%%P"=="%2" If Not "%%P"=="" (
  Set "%1[!%2!]=!%%P!"
  Set /A "%2+=1"
 )
 For /L %%a In (1,1,!%2!)Do (
  Set /A "S_Offset=%%a - 1"
  For /L %%b IN (0,1,%%a)Do (
   If not %%b==%%a For %%c in (!S_Offset!)Do (
    IF !%1[%%c]! LEQ !%1[%%b]! (
     Set "tmpV=!%1[%%c]!"
     Set "%1[%%c]=!%1[%%b]!"
     Set "%1[%%b]=!tmpV!"
 ))))
 Set /A %2-=1
 If "!#STDOut!"=="1" For /L %%G in (0 1 !%2!)Do Echo/%1[%%G]=!%1[%%G]!
Exit /B 0
:sortH <Element_VarName> <Element_Index_VarName> <Variable Names containing the values to be Sorted and Populated to the Array>
 Set "%2=0"
 FOR %%P In (%*) DO If Not "%%~P"=="%~1" If Not "%%~P"=="%2" If Not "%%P"=="" (
  Set "%1[!%2!]=!%%~P!"
  Set /A "%2+=1"
 )
 For /L %%a In (1,1,!%2!)Do (
  Set /A "S_Offset=%%a - 1"
  For /L %%b IN (0,1,%%a)Do (
   If not %%b==%%a For %%c in (!S_Offset!)Do (
    If Not !%1[%%c]! LSS !%1[%%b]! (
     Set "tmpV=!%1[%%c]!"
     Set "%1[%%c]=!%1[%%b]!"
     Set "%1[%%b]=!tmpV!"
 ))))
 Set /A %2-=1
 If "!#STDOut!"=="1" For /L %%G in (0 1 !%2!)Do Echo/%1[%%G]=!%1[%%G]!
Exit /B 0
:Def
Set "Usage=Echo/###&Echo/Call !FlNm! [/M:Def] [/A:Groupname] ["element0" ~ "element#"] [/F:Filepath.ext] [/E:"Element sub value"]&Echo/ - Assign each line in the given filepath plus element parameters to the Array&Echo/Call %~n0 [/M:Def] [/A:Groupname] REM : Clears the Array for the given Group Name&Echo/Call %~n0 [/M:Def] [/A:Groupname] [element] [element] [/O:Index#Arg] REM : Overides Elements from the index supplied&Exit /B 0"
 If "!#ORP#!"=="1" Echo/!SwParam!|"%__AppDir__%findstr.exe" /RX [0-9]* > Nul 2> Nul
 If not "!SwParam!"=="" If Errorlevel 1 (%Usage:###=O:!SwParam! #Arg invalid. Only Integers accepted.%)
 If "!GRPNm!"=="" (%Usage:###=/A:Groupname Required%)
 If "!#ORP#!"=="1" Set "#!GRPNm!=0"
 If "!#%GRPNm%!"=="" Set "#!GRPNm!=0"
 If "%#FP#%"=="1" (
  If exist "!FilePath!" (
   For /F "Delims=" %%G in (!FilePath!)Do If Not "%%~G"=="" (
    For %%x in ("!GRPNm![!#%GRPNm%!]")Do (
     Setlocal DisableDelayedExpansion
     If "%#STDOut%"=="1" Echo/%%~x=%%~G
     Endlocal & Set "%%~x=%%G"
    )
    Set /A "#!GRPNm!+=1" > Nul
   )
  ) Else (%Usage:###=/F:!FilePath! Invalid path%)
 )
 If not "!Inset!"=="" (
  For %%G in (!Inset!)Do (
   For %%x in ("%GRPNm%[!#%GRPNm%!]")Do (
    Setlocal DisableDelayedExpansion
    If "%#STDOut%"=="1" Echo/%%~x=%%~G
    Endlocal & Set "%%~x=%%~G"
   )
   If Not "!SubEL!"=="" Set "%%~G=!SubEl!"
   Set /A "#!GRPNm!+=1" > Nul
  )
 ) Else (
  If Not "%#FP#%"=="1" (
   For /F "Tokens=1,2 Delims==" %%I in ('Set %GRPNm%')Do Set "%%~I=" > Nul 2> Nul
   Set "#!GRPNm!=" > Nul 2> Nul
  )
 )
Exit /B 0
:GetArgs
 If Not "!#Help!"=="1" If "%~1" == "" (
  If /I "!Mode!"=="int" If "!GRPNm!"=="" (Echo/Call %~n0 [/M:Sort-int] [/A:GroupName] [/H^|/L] [/D]&%Usage:###=/A:Groupname Required%)Else If /I "!Mode!"=="int" (For /F "Tokens=1,2 Delims==" %%G in ('Set !GRPNm![')Do Set "Inset=!Inset! %%G") > Nul 2> Nul || (%Usage:###=Usage Error - /A:!GRPNm! is not defined%)
  If /I "!Mode!"=="str" If "!GRPNm!"=="" (Echo/Call %~n0 [/M:Sort-str] [/A:GroupName] [/N:New Groupname] [/F:Filepath.ext] [/D]&%Usage:###=/A:Groupname Required%)Else If /I "!Mode!"=="str" (For /F "Tokens=1,2 Delims==" %%G in ('Set !GRPNm![')Do Set "Inset=!Inset! %%G") > Nul 2> Nul || (%Usage:###=Usage Error - /A:!GRPNm! is not defined%)
  Exit /B 0
 ) Else If "%~1" == "" Exit /B 0
 Set "Param=%~1"
 Echo/"!Param!"|"%__AppDir__%findstr.exe" /LIC:"Find-" > Nul 2> Nul && ((Set "FindV=!Param:/M:Find-=!"&Set "Mode=Find")&Shift&Goto :GetArgs)
 Echo/"!Param!"|"%__AppDir__%findstr.exe" /LIC:"/M:" > Nul 2> Nul && (
  Set "MODE=!Param:*/M:=!"& Echo/"!Mode!"|"%__AppDir__%findstr.exe" /LIC:"Sort-" > Nul 2> Nul && (Set "Mode=!Mode:*Sort-=!")
  If "!Param:*/M:=!"=="" (
   Echo/&Echo/Modes:&Echo/ [Def]!TAB!!TAB!Define, modify or clear an array.
   Echo/ [Sort-int]!TAB!Sorts array by lowest or highest value using /L or /H switches
   Echo/ [Sort-str]!TAB!Sorts an array or text files string values using alphanumerical order of sort: [0-9][a-z]
   Echo/ [Find:Value]!TAB!Searches an array for the string value supplied.&Echo/
   %Usage:###=/M:Mode required&Echo/[Def][Sort-int^|str][Find-Value]%
  )
  Shift&Goto :GetArgs
 )
 Echo/"%~1"|"%__AppDir__%findstr.exe" /LIC:"/H"  > Nul 2> Nul && (Set "#Order=H"&Shift&Goto :GetArgs)
 Echo/"%~1"|"%__AppDir__%findstr.exe" /LIC:"/L"  > Nul 2> Nul && (Set "#Order=L"&Shift&Goto :GetArgs)
 Echo/"%~1"|"%__AppDir__%findstr.exe" /LIC:"/D"  > Nul 2> Nul && (Set "#STDOut=1"&Shift&Goto :GetArgs)
 Echo/"%~1"|"%__AppDir__%findstr.exe" /LIC:"/F:" > Nul 2> Nul && ((If Not "!Param:/F:=!"=="" (Set "#FP#=1"&Set "FilePath=!Param:/F:=!")Else %Usage:###=/F:Filepath.ext not Supplied%)&Shift&Goto :GetArgs)
 Echo/"%~1"|"%__AppDir__%findstr.exe" /LIC:"/N:" > Nul 2> Nul && (Set "nGRPNm=!Param:*/N:=!"&(If "!Param:*/N:=!"=="" %Usage:###=/N:New Group Name required%)&Shift&Goto :GetArgs)
 Echo/"%~1"|"%__AppDir__%findstr.exe" /LIC:"/A:" > Nul 2> Nul && (Set "GRPNm=!Param:*/A:=!"&(If "!Param:*/A:=!"=="" %Usage:###=/A:Group Name required%)&Shift&Goto :GetArgs)
 Echo/"%~1"|"%__AppDir__%findstr.exe" /LIC:"/O:" > Nul 2> Nul && (Set "SwParam=!Param:*/O:=!"&(If Not "!Param:/O:=!"=="" (Set "#ORP#=1")Else %Usage:###=/O:#Arg not Supplied%)&Shift&Goto :GetArgs)
 Echo/"%~1"|"%__AppDir__%findstr.exe" /LIC:"/E:" > Nul 2> Nul && (Set "SubEl=!Param:*/E:=!"&(If "!Param:/S:=!"=="" %Usage:###=/E:Sub Element not Supplied%)&Shift&Goto :GetArgs)
 Set Inset=!Inset! %1
 Shift&Goto :GetArgs 
```

*   模式：
*   [ `Def`] 定义、修改或清除数组。
*   [ `Def`] 开关：[ `/A:Groupname`] [ `/F:Filepath.ext`] [ `/D`] [ `/O:Index#Arg`] [ `/E:Element Sub value`] `"element0"`~`"element#"`
*   [ ] 使用或开关`Sort-int`按最小值或最大值对数组进行排序`/L``/H`
*   [ `Sort-int`] 开关：
    [ `/A:Groupname`] [ `/N:New Groupname`] [ `/L`| `/H`] [ `/D`]
*   [ `Sort-str`]
    使用字母数字排序顺序对数组或文本文件字符串值进行排序：[0-9][az]
*   [ `Sort-str`] 开关：
    [ `/A:Groupname`] [ `/F:Filepath.ext`] [ `/D`]
*   [ `Find-searchstring`]
    在数组中搜索提供的字符串值。
*   [ `Find-searchstring`] 开关：[ `/A:Groupname`]

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-05-14T16:54:23.597

# 论《批处理编程中的图灵完备性》

是的，据我所知，Batch 是图灵完备的（如果您忽略“无限”功能，如无限内存和计算时间；因此有人可能会争辩说，Batch 只是“理论上的图灵等效”）。

有所有基本的布尔和算术运算符以及循环 ( `for`) 和分支 ( `if`)。还有一个`goto`功能允许建模循环 ( `while`/ `do while`/ `for`) 和`sub routines`. 块的嵌套是可能的。`Variables`可以命名、存储、删除/清除、显示/写入文件。`halt`可以使用（或 goto eof）达到条件`exit`。
作为旁注：可以从批处理程序中编写批处理文件，将其写入磁盘并运行它（允许自我修改/自定义/子例程/状态保存和恢复）。

但是，没有无限的内存存储。在计算中只能使用 32 位算术。显然，运行批处理文件的计算机也有硬件和物理限制（只有有限的时间、速度或空间）。

应该注意的是，您提到的所有“更高级别”概念都不是“批处理编程语言”的一部分。没有集成类、对象、记录/结构、数组、链表、堆栈、队列等的概念。也没有提供任何默认算法，如排序等（除非考虑到if`sort`或`findStr`等使用管道）。`more`随机化也是非常基本的`%RANDOM%`变量。
如果您需要这些概念，您需要自己使用我上面提到的给定基本语言元素对它们进行建模（或者为此使用一些库/第三方批处理文件）。
当然也可以`call`不仅是批处理文件，还包括计算机上的任何补充程序，然后返回批处理执行（通过文件、标准 I/O 流或退出/错误级别代码进行通信）。这些程序可以用更方便的方式提供这些东西的高级语言编写。

从我的角度来看，`Bash`（Linux）和`Powershell`（Windows/Linux）在这些领域要先进得多。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2021-08-31T21:39:29.350

我之前使用的一种方法是**将文件用作数组，将文件夹用作数组的字典。**

现在听我说完——一开始对你来说可能很愚蠢，但它有一些优点。

这个想法是一个文件可以被视为一个数组，甚至可以通过`FOR`命令支持原生的、易于使用的数组迭代。

> `array.txt`
> 
> ```
> these
> are
> items
> in
> an
> array 
> ```

* * *

对于二维数组，您可以使用上述文件的文件夹。（名称类似于`0.txt`through `100.txt`）。请记住，您可能需要有一个单独的文件来索引它们，因为数组目录不一定按照您在 for 循环中所期望的方式排序，实际上更像是一个哈希映射，其中`string -> [string]`.

或者，我确信解析 csv 不会太难（记住字符串值中的逗号和制表符！;)）

* * *

对于混合数组（其中有些项目是其他数组，有些是字符串），您可以将文件格式化如下：

> `complex-array.txt`
> 
> ```
> "value
> "1
> "2
> \path.txt
> \path2.txt 
> ```

和这样的文件夹：

```
complex-array\path.txt
complex-array\path2.txt 
```

如果一行以一个字符开头，它是一个值，另一个是路径（可能相对于该文件）。当然，这可能是递归的。

* * *

不过有一个大问题。该脚本留下了（可能）需要在每次运行之前清理的文件。（我之前说过，因为假设在此脚本运行时不会拔掉计算机是不安全的）。

我不确定这对性能的不利影响，而且批处理无论如何都很慢，所以也许没关系。（我相当确定变量名修改策略更快，因为值会在内存中保留更长时间）

* * *

## 回答 #11

> 赞同：-4
> 
> 时间：2016-11-02T10:21:55.227

```
@echo off

set array=

setlocal ENABLEEXTENSIONS ENABLEDELAYEDEXPANSION

set nl=^&echo(

set array=auto blue ^!nl!^
  bycicle green ^!nl!^
  buggy   red

echo convert the String in indexed arrays

set /a index=0

for /F "tokens=1,2,3*" %%a in ( 'echo(!array!' ) do (

 echo(vehicle[!index!]=%%a color[!index!]=%%b 
 set vehicle[!index!]=%%a
 set color[!index!]=%%b
 set /a index=!index!+1   

)

echo use the arrays

echo(%vehicle[1]% %color[1]%
echo oder

set index=1
echo(!vehicle[%index%]! !color[%index%]! 
```

# opengl - 如何使用 libg3d 将波前模型加载到 OpenGL

> ID：10166388
> 
> 赞同：1
> 
> 时间：2012-04-15T21:42:09.470
> 
> 标签：opengl, 3d, wavefront, 3d-model

我正在做我的论文项目。我需要一些帮助来尝试将波前 (.obj) 模型加载到 OpenGL。我一直在寻找，我找到了可以让你加载各种 3d 模型格式的[Libg3D 。](http://automagically.de/g3dviewer/ "Libg3d")

我在理解如何加载模型以及是否可以通过 libg3d 将模型加载到我的 opengl 应用程序时遇到问题。

# java - Android Autocomplete 无法正常运行应该如何..！

> ID：10166390
> 
> 赞同：0
> 
> 时间：2012-04-15T21:42:30.150
> 
> 标签：java, android, autocomplete, android-arrayadapter, custom-adapter

我有这个 Autocomplete 类，我正在修改适配器，以便它不仅会显示文本，还会在出现的文本前显示一个图标。所有可用的选项都存储在字符串数组中。

现在，由于某种原因，无论我输入什么，它都只显示 5 个项目。

```
public class AutoCompleteText extends Activity{

public class CustomAdapter extends ArrayAdapter<String>{

    public CustomAdapter(Context context, int textViewResourceId,String[] objects) {
        super(context, textViewResourceId, objects);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        LayoutInflater inflater = getLayoutInflater();
        View row = inflater.inflate(R.layout.arow,parent, false);
        TextView label = (TextView) row.findViewById(R.id.element);
        label.setText(listItems[position]);
        ImageView icon = (ImageView) row.findViewById(R.id.image);

        if("Item1".equals(listItems[position])|| something else || something else){
            icon.setImageResource(R.drawable.img1);
        }
        else if("Item2".equals(listItems[position])|| something else || something else){
            icon.setImageResource(R.drawable.img2);
        }
        else if("Item3".equals(listItems[position])|| something else || something else){
            icon.setImageResource(R.drawable.img3);
        }
        else if("Item4".equals(listItems[position])|| something else || something else){
            icon.setImageResource(R.drawable.img4);
        }
        else if("Item5".equals(listItems[position])|| something else || something else){
            icon.setImageResource(R.drawable.img5);
        }
        else if("Item6".equals(listItems[position])|| something else || something else) {
            icon.setImageResource(R.drawable.img6);
        }
        else{
            icon.setImageResource(R.drawable.whatever);
        }
        return row;
    }
}

AutoCompleteTextView acTextView;
private static String listItems[] = { "Item1", "Item2","Item3","Item4","Item5", "Item6", "Item7", "Item8", "Item9", "Item10"
                                        "Item11", "Item12","Item13","Item14","Item15", "Item16", "Item17", "Item18", "Item19", "Item20");

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.search);

    acTextView = (AutoCompleteTextView)findViewById(R.id.searchfield);
    acTextView.setThreshold(1);
    acTextView.setAdapter(new CustomAdapter(AutoCompleteText.this,R.layout.arow, listItems));
    acTextView.setOnItemClickListener(new OnItemClickListener(){
            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
                try {
                    //random staff
                } catch (ClassNotFoundException e) {
                    e.printStackTrace();
                }
            } 
        }

    );
} 
```

}

该应用程序编译并运行良好，没有任何错误。谁可以帮我这个事？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T21:45:29.390

不要比较`String`s ，`==`因为它会检查它是否是同一个对象而不是同一个文本。改为使用`.equals`。

```
if ("Item6".equals(listItems[position]) { 
```

它可能适用于您的情况，因为编译器可能足够聪明，可以使用相同的对象来表示文本，但这通常不是一个好主意。

此外，您的代码中只有 5 个（+默认）项目。你看到那些了吗？

# iphone - 捏缩放 iPhone

> ID：10166391
> 
> 赞同：1
> 
> 时间：2012-04-15T21:42:36.763
> 
> 标签：iphone, zooming, pinch, uipinchgesturerecognizer

无论如何，当我的游戏在 iPhone 上运行时，我可以通过捏缩放来为我的游戏工作吗？

我使用 Stencylworks 为一个班级项目制作了游戏。该游戏在 iPad 上运行完美，也可以在 iPhone 上运行，只是场景被放大了，这使得玩起来非常困难。

有没有办法实现缩小的捏合手势？也许可以在 Xcode 中使用视图控制器或在某处添加代码来完成？我是 Xcode 的新手，所以我完全不知道如何让它工作！

不确定这是否会有所帮助，但这里有一些项目的屏幕截图。

[https://sites.google.com/site/boomblocksgld/pinch-to-zoom](https://sites.google.com/site/boomblocksgld/pinch-to-zoom)

>

> ```
> #import <Box2D/Box2D.h>
> #import <Foundation/Foundation.h>
> #import <AudioToolbox/AudioServices.h> 
> #import "SceneScript.h"
> 
> #import "Script.h"
> 
> #import "Actor.h"
> #import "ActorType.h"
> #import "Assets.h"
> #import "Behavior.h"
> #import "Game.h"
> #import "GameModel.h"
> #import "GroupDef.h"
> #import "FadeInTransition.h"
> #import "FadeOutTransition.h"
> #import "Region.h"
> #import "Runnable.h"
> #import "Scene.h"
> #import "SHThumbstick.h"
> #import "Sparrow.h"
> #import "Transition.h"
> #import <Foundation/Foundation.h>
> #import <CoreGraphics/CoreGraphics.h>
> #import <UIKit/UIKitDefines.h>
> 
> @protocol UIGestureRecognizerDelegate;
> @class UIView, UIEvent, UITouch;
> 
> @interface Design_353_353_PinchZoom : SceneScript 
> {
>   @public
>       NSString* tempHolder;
> 
> }
> @end
> 
> @implementation Design_353_353_PinchZoom
> 
> -(void)load
> {
> 
> }
> 
> -(void)update
> {  
> }
> // Gesture Reconizer Methods
> -(void)checkpinch {    
> 
> UIPinchGestureRecognizer *pinch = [[UIPinchGestureRecognizer     >alloc]initWithTarget:self action:@selector(checkpinch)];
> [pinch setDelegate:self];
> [pinch setDelaysTouchesBegan:YES];
> [self.view addGestureRecognizer:pinch];
> [pinch release];
> }
> 
> -(void)render:(SPRenderSupport*)g x:(int)x y:(int)y
> {
> [super render:g x:x y:y];
> 
> }
> 
> -(void)forwardMessage:(NSString*)msg
> {
> 
> }
> 
> @end 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T04:04:51.100

如果您使用的是 iOS 3.2 或更高版本，请在 Viewdidload 中添加以下代码。并在 .h 文件中添加 UIGestureRecognizerDelegate

```
//Gesture reconizer
UIPinchGestureRecognizer *pinch = [[UIPinchGestureRecognizer alloc]initWithTarget:self action:@selector(checkpinch)];
[pinch setDelegate:self];
[pinch setDelaysTouchesBegan:YES];
[self.view addGestureRecognizer:pinch];
[pinch release];

UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(checktap)];
[singleTap setDelegate:self];
singleTap.numberOfTapsRequired = 1;
singleTap.numberOfTouchesRequired =2;
[self.view addGestureRecognizer:singleTap];
[singleTap release];

UITapGestureRecognizer *doubleTap = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(checktap)];
[doubleTap setDelegate:self];
doubleTap.numberOfTapsRequired = 2;
doubleTap.numberOfTouchesRequired =1;
[self.view addGestureRecognizer:doubleTap];
[doubleTap release];

// Gesture Reconizer Methods
-(void)checkpinch {    

    //write here code for your requirements
}

-(void)checktap {

    //write here code for your requirements
} 
```

我希望这会帮助你......冷静

# windbg - Windows 7分发的Dbgeng.dll与windows包调试工具的区别

> ID：10166392
> 
> 赞同：1
> 
> 时间：2012-04-15T21:42:47.180
> 
> 标签：windbg

windows 7 中的 dbgeng.dll 与随 windows 调试工具一起分发的 dbgeng.dll 中缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-30T14:32:21.390

在这个聚会上很晚了，但我最近遇到了一个非常重要的不同：

Windows 安装中内置的 dbgeng.dll 不支持远程调试，而使用调试工具安装的 dbgeng.dll 不支持远程调试！

似乎还有其他我没有深入研究的差异 - 我只知道使用内置 dll 的工作程序在使用调试工具时开始崩溃......考虑到我本来想使用的，这很痛苦开箱即用的远程调试工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T19:48:13.790

这篇文章显示了 Windows 7 和 Windows 8 预览版之间的区别，我相信 Windows 8 版本与调试工具中发布的最新版本相似或可能相同，因为当我使用dependencyWalker 时，我注意到调试工具中的那个也有这个`DebugCreateEx`最新[版本](http://blogs.msdn.com/b/andrew_richards/archive/2011/09/24/debugger-engine-dbgeng-updates-in-windows-8-developer-preview.aspx?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3A+Microsoft%2FMSDN-Blogs+%28MSDN+Blogs%29)中的新导出方法

Windows 7 系统 32 版本：

![在此处输入图像描述](../Images/fd7064208d3f0b5cb03046c6f009938b.png)

依赖步行者： ![在此处输入图像描述](../Images/b47c5fbf347c714e5ade753946e4d089.png)

调试工具版本：

![在此处输入图像描述](../Images/4c1726e7861d880f3544142c13c8c547.png)

依赖步行者：

![在此处输入图像描述](../Images/a5ffe83f31790648b1ba661b7d4ebc20.png)

希望这有助于以某种方式解释差异，尤其是顶部的帖子。

# c - Ruby中没有操作范围？

> ID：10166393
> 
> 赞同：0
> 
> 时间：2012-04-15T21:42:55.653
> 
> 标签：c, ruby, syntax, scope

在 C 中，我可以做到

```
int scoped_var = 2;
{
    int scoped_var = 3;
} 
```

我如何在 Ruby 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T21:55:00.780

如果您希望有一个块局部变量，其名称与定义该块的范围内的变量相同，而无需设置先前定义的变量，则可以使用以下语法：

```
foo = 1
items.each do |item;foo|
  foo = item.number
end
puts foo #=> 1 
```

您也可以在不传递块变量的情况下执行此操作：

```
x = Proc.new { |;foo| ... } 
```

请注意，这只是 Ruby 1.9+。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T22:04:13.663

这不是 Ruby 真正做的事情。局部变量是通过赋值创建的；除了作为参数之外，根本没有办法声明它们。（在 1.9 中，这包括块参数。）

我想 Rubyish 做类似事情的方法就是通过赋值保存并恢复到另一个本地。

# python - Scrapy 和 XPath 从亚马逊提取评论

> ID：10166396
> 
> 赞同：1
> 
> 时间：2012-04-15T21:43:17.167
> 
> 标签：python, xpath, scrapy

我对 python 和 scrapy 比较陌生，我需要一些关于我试图解决的问题的帮助。我正在尝试使用 scrapy 和 XPath 抓取亚马逊并提取特定产品的用户评论。我想问是否有比我现有的更优雅的解决方案。

假设我想从[这个地址](http://goo.gl/1dQ1u)获取评论。评论页面的结构看起来对提取不是很友好（使用firebug可以看到只有评论区周围没有特定的标签）。目前我正在使用以下选择器：`hxs.select('//div/text()').extract()`但您可以想象它会创建大量垃圾数据`"\n\n\n\n\n"`等。是否有更优雅的方式来编写我的选择器可以改善我的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T01:06:03.670

一种选择是取消“*此评论来自...* ”文本。像这样：

```
//table[@id='productReviews']//div[@class='tiny']/following-sibling::text() 
```

# iphone - uiwebviewdelegate 未从不可见的 uiwebview 调用

> ID：10166399
> 
> 赞同：1
> 
> 时间：2012-04-15T21:43:25.147
> 
> 标签：iphone, objective-c, uiwebview, uiwebviewdelegate

我试图避免 UIWebView 加载内容时显示的空白窗口。我不想在 UIWebView 上放置背景，而是在当前窗口上放置一个 HUD，然后在加载内容时推送包含 uiwebview 的新 uiviewcontroller。这是我所做的（为了理智而缩短了代码）：

第一视图：

```
MyViewController *myVC = [[MyViewController alloc] initWithNibName:@"MyViewController" bundle:nil];
myVC.parentController = self.navigationController;
UIView *myView = [myVC view];      // Force view to load 
```

我的视图控制器：

```
- (void)viewDidLoad
{
  ...
  [myWebView setDelegate:self];
  [myWebView loadHTMLString:htmlString baseURL:baseURL];
  ...
 }

- (void) webViewDidFinishLoad:(UIWebView*) webView {
     [parentController pushViewController:self animated:YES];
} 
```

好的，所以`viewDidLoad`被调用了，但是没有一个 uiwebviewdelegate 方法被调用。但是，如果我推动视图控制器

第一视图：

```
MyViewController *myVC = [[MyViewController alloc] initWithNibName:@"MyViewController" bundle:nil];
[self.navigationController myVC animated:YES]; 
```

然后调用中的所有 uiwebviewdelegate 方法`MyViewController`。

我被困住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T22:00:04.177

我不知道您的应用程序的具体要求，但通常更好的做法是先推送您的视图控制器，然后在您的内容加载时在新视图控制器的顶部显示 HUD。您可以在 中将 HUD 添加到视图控制器的视图中`viewDidLoad`，并在 webView 的`webViewDidFinishLoad`回调方法中删除 HUD。

如果您还没有这样做，请确保您在后台线程中加载 Web 视图的内容，以免在内容加载时阻塞主 UI 线程，否则用户会觉得您的应用程序已暂时冻结。

# python - 如何在 Python 中创建会话变量？

> ID：10166403
> 
> 赞同：1
> 
> 时间：2012-04-15T21:43:41.673
> 
> 标签：python, python-3.x, cgi, session-state, session-variables

我使用 Python 3 作为服务器端脚本语言，并且我想要一种让用户保持登录到我的站点的方法。我不使用任何框架，因为我更喜欢手动代码页，那么如何在 Python 3 中创建会话变量，如 PHP 中的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T21:58:11.087

会话的逻辑是在用户 cookie 中存储一个唯一的会话 id（ uuid 包将为此做一个完美的工作）。您将会话数据存储在文件、数据库或其他半永久性数据存储中。

这个想法是将您从用户 cookie 收到的 sessionid 与存储在服务器某处的一些数据相匹配。

我假设您知道如何添加正确的标头以通过响应标头设置 cookie。否则这里有更多信息：[http ://en.wikipedia.org/wiki/List_of_HTTP_header_fields#Responses](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields#Responses)

# c - 通过引用使用双指针的字符串调用

> ID：10166406
> 
> 赞同：0
> 
> 时间：2012-04-15T21:44:23.983
> 
> 标签：c, string, pass-by-reference

大家好，我在使用引用字符串作为参数的函数时遇到了一些问题。我读到你应该为此使用 e 双指针，但我无法让它工作。这是（部分）我的代码。

```
enum errCode { ERR_NONE = 0, ERR_EMPTY, ERR_FULL, ERR_MEM, ERR_INIT, ERR_COMMAND, ERR_UNDEFINED };
typedef enum errCode ErrCode;

typedef enum {
    no = 0, add, del, src, show, exit
} Command;

int main(void) {
    char stringval[50];
    char stringval2[50];
    ErrCode err;
    Command currentCommand = no;

    printf("Enter a command\n");

    if (fgets(stringval, 50, stdin) != NULL) {
        char *p;
        if ((p = strchr(stringval, '\n')) != NULL)
            *p = '\0';
    }

    ErrHandler(
            extractCommand(&currentCommand, stringval, &stringval2)
            );

    printf("stringval 2 = %s.\n", stringval2);

    return 0;
}

ErrCode extractCommand(Command *command, char *inputString, char **outputString) {

    char *strTemp;
    char *strTemp2;

    //Get the first word of the string
    strTemp = strtok(inputString, " ");

    strTemp2 = strtok(NULL, " ");
    *outputString = strTemp2;

    //Check if it equals a command
    if (strcmp(strTemp, "exit") == 0) {
        *command = exit;
        return ERR_NONE;
    } else if (strcmp(strTemp, "add") == 0) {
        *command = add;
        return ERR_NONE;
    } else if (strcmp(strTemp, "del") == 0) {
        *command = del;
        return ERR_NONE;
    } else if (strcmp(strTemp, "src") == 0) {
        *command = src;
        return ERR_NONE;
    } else if (strcmp(strTemp, "show") == 0) {
        *command = show;
        return ERR_NONE;
    } else {
        *command = no;
        printf("%s", strTemp);
        return ERR_COMMAND;
    }
} 
```

这是我的输出的样子：

```
Enter a command
add this is a test
stringval 2 = z˜ˇøÀo‡èK‡èT¯ˇø. 
```

我显然想要输入字符串的第二个单词，但我做错了什么。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T21:51:38.340

`stringVal2`未初始化且从未填充：这就是打印垃圾的原因。在这种情况下不需要传递 a `char**`，传递 a`char*`将起作用。然而，这：

```
outputString = strTemp2; 
```

不复制`strTemp2`to的内容`outputString`：它指向与:use`outputString`相同的地址。`strTemp2``strcpy()`

* * *

例如，当函数为参数分配新缓冲区时，通常将双指针`char**`传递给函数（在发布的代码中不是这种情况）：

```
char* buf = NULL;
my_alloc(&buf);

void my_alloc(char** p)
{
    *p = malloc(10);
} 
```

# c - 如何知道给 execlp() 的命令是否存在？

> ID：10166409
> 
> 赞同：1
> 
> 时间：2012-04-15T21:44:46.883
> 
> 标签：c, unix, exec, fork, parent-child

我已经搜索了很多，但我仍然没有答案。我有一个程序通过询问用户所需的命令来创建其他进程，然后我使用 execlp 打开这个新进程。我想知道是否有一种简单的方法可以让父进程找出命令是否已执行，或者接收到的命令是否不存在。

我有以下代码：

```
if (executarComando(comando) != OK)
   fprintf(stderr,"Nao foi possivel executar esse comando. "); 
```

其中 executarComando 是：

```
int executarComando(char* cmd) {
if ( execlp("xterm", "xterm", "-hold", "-e", cmd, NULL) == ERROR) // error
    return ERROR;
return OK;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T21:49:11.360

没有简单的方法；一个经常使用的约定是`fork()`ed child 将在失败的特定情况下报告错误和`exit(-1)`（或） ，并且大多数命令避免将其用于自己的失败模式。`exit(255)``exec()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T00:44:41.307

你的问题是你`execlp`总是成功；它正在运行`xterm`，而不是您传递给 shell 的命令`xterm`运行。你需要在你的程序和这个 shell 之间添加某种通信通道，以便你可以反馈成功或失败。我会做一些事情，比如用

```
( command ) 99>&- ; echo $? >&99 
```

然后，在 fork 调用之前打开一个管道`execlp`，并在 child 中，使用`dup2`创建为文件描述符编号 99 对应于管道的写入端。现在，您可以通过管道读回命令的退出状态。

只是希望`xterm`不要关闭您的所有文件描述符；否则你就不走运了，你必须`mkfifo`在文件系统的某个地方创建一个临时的 fifo (via) 才能获得相同的结果。

请注意，数字 99 是任意的；0、1 或 2 以外的任何值都应该有效。

# visual-c++ - 如何在 VC++ 10.0 中链接 msvcrt.dll 而不是 msvcr100.dll？

> ID：10166412
> 
> 赞同：12
> 
> 时间：2012-04-15T21:44:59.437
> 
> 标签：visual-c++

是否可以在 VC++10.0 中链接 VC6 的 MSVCRT.DLL？

默认情况下，它似乎与 MSVCR100.DLL 链接，但我不想重新分发另一个 DLL（MSVCRT.DLL 已在我支持的每个操作系统中可用）。

==编辑==

澄清一下：我的应用程序是一个纯 C 应用程序，它进行 WinAPI 调用。我知道做 C++ 需要 C++ 运行时，默认情况下它没有捆绑在 Windows 中（而且很可能无论如何都必须匹配编译器）。我的问题是关于纯 C 的使用，以及我所针对的最早版本的 Windows 中存在的 CRT 函数。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-03-23T22:33:05.610

（您可以在底部找到执行摘要或 TL；DR）

重要提示：此答案仅指官方 Microsoft 工具链，*而*不是已知链接到`msvcrt.dll`. 但我怀疑微软是否会倾向于支持该工具链；）

### 简短的回答：不！

甚至不要尝试使用 Visual C++ 2010 来完成这项任务。

有一个官方和受支持的方法：使用独立的 WDK，如果您需要您的应用程序链接到`msvcrt.dll`!

您*永远*不应尝试使用与 CRT 头文件和库不匹配的编译器工具链。按照 Microsoft 的意图使用工具链，而不是您创建的拼凑而成。不要混搭。使用 Microsoft 提供给您的内容。但是使用它（不要害怕 FUD）。

可用于链接的最新 WDK `msvcrt.dll`(7600.16385.1) 使用`cl.exe`版本 15.00.30729.207。这大致[对应](https://sourceforge.net/p/predef/wiki/Compilers/)于 Visual C++ 2008 附带的编译器！*以后的 WDK 将链接到他们需要*的 Visual C++ 版本的 CRT 。

`msvcrt.dll`您会发现，Windows XP 或 Windows 7并不是*Visual* C++ 6.0（甚至是最新版本的 VC6）中包含的*原始DLL。*

这也已在其他答案中*正确说明。*那里没有惊喜。

但是，与其他答案所暗示的相反`msvcrt.dll`，您将在现代系统上找到*的*VC6 CRT 允许链接到原始 VC6 CRT 的程序继续工作。即使在今天。这是一份合同。并且升级`msvcrt.dll`到系统 DLL 进一步验证了该合同。

### 一点历史背景

Microsoft 内部使用的工具链有点类似于在 Windows 8 WDK 之前提供的 WDK。我将专门写这些并统一使用术语 WDK（或独立 WDK），即使在 Vista WDK 之前它们被称为 DDK。

[来自OSR](http://osronline.com/)的好人，他们似乎可以访问 Windows 源代码或可以访问的人，在几年前我参加的一次研讨会上证实，WDK 曾经是内部使用的工具链的精简版本，用于围绕时间（〜2005年）。类似的提示可以[从 MSFT 自己的 Larry Osterman](https://blogs.msdn.microsoft.com/bwill/2004/06/22/how-well-do-you-know-your-microsoft-acronyms/)和[Alex Ionescu 在 tinykrnl 上的早期作品中找到](https://channel9.msdn.com/Forums/Coffeehouse/189875-How-Windows-is-build-)，最近版本的“Windows Internals”的合著者。BCZ 可能暗指`build -cZ`，这是我在此处描述的 WDK 的常用调用。

在这种情况下有趣的原因是：所有独立的 WDK 都允许您创建`msvcrt.dll`默认链接的可执行文件。*独立的*WDK`msvcrt.dll`是CRT，就像 Visual C++ 2010 的.*`msvcr100.dll`*

 *还应注意，工具链与 Visual Studio 工具链一起更新。例如，在 3790.1830 WDK`cl.exe`报告中，它与 Visual C++ 2003 大致相当：

```
C:\WINDDK\3790.1830\bin\x86>cl /version
Microsoft (R) 32-bit C/C++ Optimizing Compiler Version 13.10.4035 for 80x86
Copyright (C) Microsoft Corporation 1984-2002\. All rights reserved. 
```

对于 6001.18002 WDK（最新支持 Windows 2000！）与 Visual C++ 2005 大致相当：

```
C:\WINDDK\6001.18002\bin\x86\x86>cl/version
Microsoft (R) 32-bit C/C++ Optimizing Compiler Version 14.00.50727.278 for 80x86
Copyright (C) Microsoft Corporation.  All rights reserved. 
```

对于 7600.16385.1 WDK，它与 Visual C++ 2008 相当。

**独立 WDK**

WDK 版本从 XP 开始，直到（包括）Windows 7 SP1 不需要 Visual Studio。他们带有自己的工具链。

Windows XP 之前的版本需要 Visual C++ 来构建任何东西。如果我没记错的话，VC6 适用于 Windows 2000 DDK。

从 Windows 8 WDK 开始的版本再次需要 Visual C++，并且与它的集成比以往任何时候都更加紧密（包括向导，甚至用于调试和某些驱动程序特定任务的扩展）。这也是为什么当您使用各自的 WDK 时，它们会链接到各自工具链的 CRT。

在独立的 WDK 时代，人们尝试使用 Visual Studio 来封装 WDK 构建过程并非闻所未闻——这正是 DDKWizard 和[VisualDDK的真正原因。](https://sourceforge.net/projects/visualddk/)有些人甚至使用了微软推荐的不受支持的方法，**并***使用*Visual Studio 工具链构建了他们的驱动程序。那些不受支持的方法大致相当于您正在尝试的方法。**所以不要。**

 ****`build.exe`无论如何，使用 WDK和`sources`等等的构建过程`makefile`是麻烦和限制的。例如，要从当前目录或其父目录之外的任何源文件构建，您必须编写自己的 NMake 规则。毕竟`build.exe`是基于 NMake 的构建的包装器。您的本地`makefile.inc`将包含在 WDK/DDK 提供的全局中。

### 为什么`msvcrt.dll`官方支持链接*到*

如前所述，`msvcrt.dll`独立 WDK 支持链接。

这也很好。事实上，文件中的`USE_MSVCRT=1`语句`sources`正是具有这种效果。见[这里](http://blogs.msmvps.com/kernelmustard/2005/11/04/building-win32-apps-with-build-exe-and-the-ddk/)。引用 7600.16385.1 WDK 文档：

> **`USE_MSVCRT`**
> 
> 使用`USE_MSVCRT`宏来指示构建实用程序使用 DLL 中的多线程运行时库进行构建。
> 
> **句法**
> 
> `USE_MSVCRT = 1`
> 
> [...]
> 
> **注意** 您永远不应该列出`Msvcrt.lib`或`Msvcrtd.lib`在`TARGETLIBS`. 但是，您可以`Ntdll.lib`在`TARGETLIBS`.

如果微软不支持这条路径，为什么还要提供呢？正确，他们不会！

**事实上，WDK (XP..7 SP1) 一直在使用*系统 DLL* `msvcrt.dll`作为其 CRT。**

### 注意事项

主要有一个警告。SEH 的实现方式随着时间的推移随着更新的 Visual C++ 版本而改变。由于来自独立 WDK 的工具链与特定的 Visual C++ 版本密切对应，因此它们继承了各自的 SEH 处理。

例如，当您使用 Windows 7 SP1 WDK 以 Windows 7 为目标时`USE_MSVCRT=1`，它会静态导入`_except_handler4_common`. 例如，该功能在 Windows Server 2003 上不可用。因此，尝试在*目标*版本之前的 Windows 版本上运行此类应用程序*可能会*失败。因此，在这种情况下，您正在冒险进入“不受支持的领域”，并且所有免责声明都适用。但是，您可以选择使用[此处概述](https://kobyk.wordpress.com/2007/07/20/dynamically-linking-with-msvcrtdll-using-visual-c-2005/)的方法，即链接到`msvcrt_win2000.obj`和（在 Vista 和 7 WDK 中可用）来实现您想要的（二进制）向后兼容性级别`msvcrt_winxp.obj`。`msvcrt_win2003.obj`

好吧，另一方面，如果您决定设置，`WINVER=0x0601`您也不应该惊讶地发现生成的可执行文件从 kernel32.dll（或其他系统 DLL）导入函数，而这些函数在 Windows XP 上不可用。那么为什么期望不同的语义`msvcrt.dll`呢？

**作为另一个旁注：**即使已检查的构建（通常被认为对应于调试构建）也链接到`msvcrt.dll`，而不是其调试版本对应！因为“已检查”是指保留断言的事实；它不是指 CRT 的特定配置，例如“发布”或“调试”。假设`msvcrt.dll`在独立 WDK 中无法进行调试构建意味着它在某种程度上不是那些 WDK*的C 运行时，这是对**检查构建*的含义的简单误解。

还有一个小警告。`msvcrt.dll`例如，如果您使用Windows 7 WDK 来实现与*.* 所以不要指望它支持发布时不可用的功能。

### 系统DLL：`msvcrt.dll`

`msvcrt.dll`几年前被提升为系统 DLL 的状态，这意味着它与其他 Visual C++ CRT 不同，它包含在系统中（并且可以*从字面上*依赖），您需要为其安装相应的可再发行包。这也是另一个答案中引用[的 Raymond Chen 博客文章的要点。](https://devblogs.microsoft.com/oldnewthing/20140411-00/?p=1273)

由于独立的 WDK (XP..7 SP1) 默认链接到`msvcrt.dll`作为它们的 CRT，因此没有反对它的客观论据。当然*意见*不一。

### 回答”

不幸的是，自从我第一次发表评论以来，[这个答案](https://stackoverflow.com/a/10168107)已经[发生了很大变化](https://stackoverflow.com/posts/10168107/revisions)，使 FUD 长期存在，并试图从所谓的权威来源中断章取意地引用。它还链接到原始 (MSFT) 来源 - 经过仔细检查 - 不支持它们所链接的支持声明。

* * *

> 几年前，微软的 Raymond Chen 曾在博客上发表过这篇文章。从他的博客[Windows 不是 Microsoft Visual C/C++ 运行时交付渠道](https://devblogs.microsoft.com/oldnewthing/20140411-00/?p=1273)：
> 
> > 一个与所有版本的 Visual C++ 兼容的 DLL 是维护的噩梦……在某些时候，决定放弃并声明它是操作系统 DLL，**仅供操作系统组件使用**。
> 
> 强调我的。再想一想，你真的在​​写 Windows 自带的东西吗？**将支持的文件添加到您的安装程序或链接 CRT 的静态版本，而不是依赖于微软十多年前在编译器兼容性方面放弃**的系统组件，是否有那么难？

好的，所以 2010 年 2 月是十多年前（写这个答案的时间：2016 年 3 月）？因为那是 7600.16385.1 WDK 的发布日期，它**正式**支持链接到`msvcrt.dll`.

Raymond 的其他声明可能与微软最初的意图相符，但他甚至承认他们放弃了这一点，并将其提升为系统 DLL。

此外，将真正古老的历史 (Windows 9x) 与支持使用甚至不支持 Windows 9x 的独立 WDK 的建议混合在一起是非常不诚实的。Raymond 描述的历史背景是 W2K 之前和非 NT。我上面描述的背景是指 Windows 的 NT 血统，我只知道独立的 DDK/WDK（和更新的）从实践中，所以我不知道在此之前它是如何或应该是什么。

话虽如此：*不要将他的博客与 Microsoft 的**官方文档*混淆，尽管在他的博客上可以找到很多珍品，而且我多年来一直是狂热的读者。

尽管*那*是十多年前的事了，但`msvcrt.dll`Windows 2000 (SP4) 中的版本信息显示：

```
Description:    Microsoft (R) C Runtime Library
Product:        Microsoft (R) Visual C++
Prod version:   6.10.9844.0
File version:   6.10.9844.0 
```

...与雷蒙德的介绍性声明相反。

只有在 Windows XP 中才会更改为：

```
Description:    Windows NT CRT DLL
Product:        Microsoft« Windows« Operating System 
```

* * *

> 令人惊讶的是，仍有多少人否认这一决定。

在之前的一些评论之后，可以公平地假设这完全是针对我的。

好吧，我并不否认发布 Windows 8 WDK 所做出的决定。但这并没有“取消发布”官方支持链接的独立 WDK，`msvcrt.dll`也没有“取消记录”可以在其各自的*官方文档*中找到的内容。

嘿，如果您处于奢侈的位置，只需要支持 Windows 7 或 8 及更新版本，或者类似的东西，我觉得很酷。但是，我*也必须*支持早期的 Windows 版本，因此我将充分利用微软为这些 Windows 版本提供的*官方工具。*可以是集成了适当 SDK 的 Visual C++ 2005，也可以是独立的 WDK。

* * *

> 那些人给“Visual C++ 产品团队带来了极大的悲痛”

该声明引用了 Raymond Chen 的上述[博客文章](https://devblogs.microsoft.com/oldnewthing/20140411-00/?p=1273)，但将 Raymond 的声明脱离了上下文，特别是脱离了时间上下文。悲伤是由于人们尝试了提问者想要做的事情 - 更糟糕的是：触及`msvcrt.dll`. 那是在 W2K 之前。它*不是*（也不会是）由使用官方工具链（如 Microsoft 的独立 WDK）引起的。

* * *

> 现代版本的 Windows 中的 msvcrt 版本从未在相应版本的 Windows SDK 中提及。

虽然*现代*应该是合格的，但“Windows SDK”的使用表明它指的是从“平台 SDK”重命名后的所有 Windows SDK。我倾向于欣然相信这一点。但是海报忽略了独立的 Windows WDK（以及在此之前的 DDK），它们不仅提到它，而且还`msvcrt.dll`用作它们的 CRT。它们*是*Microsoft 的官方工具链，针对内核和用户模式开发。

* * *

> Microsoft 使用可能会或可能不会公开的当前工具链更新 CRT DLL（例如，在发布 Windows Media Player 补丁时）。

这是正确的。`msvcrt.dll`不断更新*，因为*它已被提升为系统 DLL。这*就是*使用 WDK 时可以依赖的合同。他们不会仅仅因为他们正在修补`msvcrt.dll`.

* * *

> 您可以指望他们没有使用古老的 WDK 编译器和库在 Windows 中构建 msvcrt DLL

我什至不确定这一点，但 2010 年的**官方**工具链并不是我称之为古老的东西。此外，由于微软同时放弃了对 XP 和 2003 的支持，他们只需要支持 Vista 及更高版本。使用最新的 Visual C++ 版本肯定会更容易，它*直接为*从 Windows 8 开始的 WDK 提供编译器和工具。

> （为什么古老？因为[WDK团队也不喜欢人们使用他们的编译器链接msvcrt，并删除了8.0版本的漏洞以阻止那些“聪明”的人](https://stackoverflow.com/questions/10166412/how-to-link-against-msvcrt-dll-instead-of-msvcr100-dll-in-vc-10-0/36189986#36189986)）。

哦，真的，Doron 真的在链接的论坛帖子中这么*说吗？*好吧，不：

> win7 wdk 构建部署成功，因为您链接到 Windows CRT (msvcrt.dll)。**我们不想让第 3 方再这样做 *了***，所以我们在 win8 wdk 中删除了该功能。它仍然适用于向后兼容。虽然它可能会成功部署，但可能会有 whck 徽标检查以确保您使用正确的 CRT

（强调我的）

该声明是关于微软改变立场的“政治决定”（也是官方决定）。“不再”实际上意味着这仅在 Windows 8 WDK 中发生了变化。第一个与 Visual C++ 再次集成的现代 WDK（自 Windows 2000 DDK 起）。因此，由于 WDK 已从独立工具链降级为与给定 Visual C++ 版本集成的扩展，因此新要求一点也不奇怪。

顺便说一句，基于 Windows 8 WDK 和更新版本的争论也是不诚实的，因为有关`msvcrt.dll`用作 CRT 的独立 WDK 的建议早于该政策更改。将导致升级为`msvcrt.dll`系统DLL的历史与升级*后*的时代混为一谈也是不诚实的。

* * *

### 词汇表

*   CRT == C/C++ 运行时
*   3790.1830 == Windows Server 2003 Service Pack 1 (SP1) 驱动程序开发工具包 (DDK)
*   6001.18002 == 适用于 Windows Server 2008/Vista 的 Windows Driver Kit SP1
*   7600.16385.1 == Windows Driver Kit 版本 7.1.0（支持 Windows 7、Windows Vista、Windows XP、Windows Server 2008 R2、Windows Server 2008、Windows Server 2003）

### TL;博士

与[这个答案](https://stackoverflow.com/a/10168107)相反，使用微软自己的和未更改的工具链是完全可以的，例如独立的 WDK，它支持`msvcrt.dll`“本机”链接到 (XP..7 SP1)。它甚至记录在这些工具链附带的文档中（除非您决定不安装它或闭上眼睛:)）。

您“仅”*必须*确保在构建时针对正确的 Windows 版本（本质上与定义正确的`WINVER`. 但是对于其他系统 DLL（例如`kernel32.dll`，`user32.dll`...）也可以这样说。

**但是，**使用自 2002 年以来的*任何*Visual C++ 进行链接`msvcrt.dll` [**必然会**产生麻烦](https://devblogs.microsoft.com/oldnewthing/20140411-00/?p=1273)。不要混搭。只需使用匹配那些特定 Visual C++ 版本的 CRT。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-14T23:46:12.020

这不是 VC6 运行时。它是与 Windows 而非 Visual Studio 捆绑在一起的 MSVCRT.DLL 的系统副本。正如您通过检查文件大小可以看到的那样，每个新版本的 Windows 都会获得一个新版本的 MSVCRT.DLL。

您可以使用 Windows 驱动程序工具包针对 MSVCRT.DLL 的系统副本进行编译。请注意，此 DLL 仅供“系统级组件”使用。什么是系统级组件？嗯，一个司机。或者，例如，文本服务：

> [http://blogs.msdn.com/b/tsfaware/archive/2008/01/17/visual-studio-2008-issues.aspx](http://blogs.msdn.com/b/tsfaware/archive/2008/01/17/visual-studio-2008-issues.aspx)
> 
> 如果您正在构建文本服务 DLL……我建议您安装 Vista（或 XP）DDK 并改用 DDKWizard。DDK 带有自己的 C/C++ 编译器，该编译器使用操作系统附带的 C 运行时库（并且不会导致其他应用程序出现问题）......

更多信息：

> [http://kobyk.wordpress.com/2007/07/20/dynamically-linking-with-msvcrtdll-using-visual-c-2005/](http://kobyk.wordpress.com/2007/07/20/dynamically-linking-with-msvcrtdll-using-visual-c-2005/)
> 
> 一个问题出现了，微软是做什么的？他们将应用程序部署到各种 Windows 环境中。查看 Windbg 的依赖项表明它使用的是 MSVCRT.DLL，而不是较新的 CRT 之一。Microsoft 的新网络监视器 3.1 也使用 MSVCRT.DLL。Windows 桌面搜索也使用旧的、可信赖的 CRT。
> 
> 所有这些新应用程序如何使用老式 CRT？他们还没有使用老式的、不受支持的 Visual C++ 6.0，是吗？嗯，不。答案比较复杂，可以在 Windows Driver Kit (WDK) 中找到。

更新：Windows 8 Driver Kit 引入了一个新的基于 MSBuild 的构建系统，它不再链接到 MSVCRT.DLL 的系统副本。但是，使用 Windows 7 驱动程序工具包构建的二进制文件仍可在 Windows 8 和 Windows 10 上运行。

MSVCRT.DLL 仍随 Windows 10 提供以实现向后兼容性，因此它的文件版本为 7.0.#####。仍在积极开发的组件，例如 user32.dll，其文件版本为 10.0.#####。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-09-25T12:20:04.133

一个普通的“Petzold 风格”Win32 程序只需要 msvcrt.dll 中的几个函数。就我而言，我经常需要浮点格式化例程，例如 _sntprintf()。而且这些功能的功能不太可能发生变化。出于这个原因，我创建了一个“msvcrt-light.lib”导入库来替代我包含在 MSVC 项目中的标准库。( [http://www.tu-chemnitz.de/~heha/hs/msvcrt-light.zip/](http://www.tu-chemnitz.de/~heha/hs/msvcrt-light.zip/) )

对于成熟的 C++ 程序，msvcrt-light.lib 可能根本不适合。如上所述使用 DDK。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T02:35:36.340

这需要跨主要编译器版本的 CRT 兼容性，微软试图适应（例如向 VC6SP2 运行时添加一个 VC5 堆）但最终放弃并引入了今天使用的 msvcrxx.dll。如果你查看 CRT 源代码，你会发现很多 #ifndef _SYSCRT，这就是微软的 msvcrt.dll 和你的编译器在生成代码时使用的那个的区别。

几年前，微软的 Raymond Chen 曾在博客上发表过这篇文章。从他的博客[Windows 不是 Microsoft Visual C/C++ 运行时交付渠道](https://blogs.msdn.microsoft.com/oldnewthing/20140411-00/?p=1273)：

> 一个与所有版本的 Visual C++ 兼容的 DLL 是维护的噩梦……在某些时候，决定放弃并声明它是操作系统 DLL，**仅供操作系统组件使用**。

强调我的。再想一想，将支持的文件添加到您的安装程序或链接 CRT 的静态版本，而不是依赖于微软**十多年前在编译器兼容性方面放弃**的系统组件有那么难吗？

令人惊讶的是，仍有多少人否认这一决定。那些人[给“Visual C++ 产品团队带来了极大的痛苦”](https://blogs.msdn.microsoft.com/oldnewthing/20140411-00/?p=1273)，如果你一直惹恼他们，如果他们有时像[他们在 Windows XP](https://support.microsoft.com/en-us/kb/884538)中所做的那样让很多 VC6 应用程序崩溃而激怒你，我也不会感到惊讶. 很多人没有遵循 Windows 2000 应用程序开发者指南，而是将设置/游戏保存在 Program Files 文件夹中。我们都知道 Windows Vista 发布时的美好结局。

顺便说一句，dll不是VC6的。在系统中使用旧的 dll 会自动使 Microsoft 的安全开发生命周期失败。（[https://blogs.msdn.microsoft.com/oldnewthing/20100607-00/?p=13793/#10020962](https://blogs.msdn.microsoft.com/oldnewthing/20100607-00/?p=13793/#10020962)）。您不会真的期望 Microsoft 使用 VC6 来编译它的现代产品，是吗？

现代版本的 Windows 中的 msvcrt 版本从未在相应版本的 Windows SDK 中提及。无论您使用何种编译器版本或 CRT lib 版本，它很可能与您客户机器上的大多数 DLL 版本不匹配。Microsoft使用可能会或可能不会公开的当前工具链更新 CRT DLL（例如，在[发布 Windows Media Player 补丁时）。](https://blogs.technet.microsoft.com/srd/2012/02/14/ms12-013-more-information-about-the-msvcrt-dll-issue/)你可以指望他们**没有**使用古老的 WDK 编译器和库在 Windows 中构建 msvcrt DLL（为什么古老？因为[WDK 团队也不喜欢人们使用他们的编译器链接 msvcrt，并删除了版本 8.0 中的漏洞阻止那些“聪明”的人](https://social.msdn.microsoft.com/Forums/vstudio/en-US/67a6eec2-9f8f-4a23-a0ef-f0bf5bafc7fe/wdk-8print-monitorsunable-to-install-port-mon-on-windows-8?forum=wdk)）。*****

# c# - 使用 C# 连接到 MySQL 数据库

> ID：10166423
> 
> 赞同：2
> 
> 时间：2012-04-15T21:46:08.307
> 
> 标签：c#, mysql, database, ado.net, mysql-connector

我在用：

```
 if (connection.State != ConnectionState.Open)
        {
            OpenConnection();
        } 
```

和

```
private bool OpenConnection()
{
    try
    {
        connection.Open();
        return true;
    }
    catch (MySqlException ex)
    {
        //When handling errors, you can your application's response based 
        //on the error number.
        //The two most common error numbers when connecting are as follows:
        //0: Cannot connect to server.
        //1045: Invalid user name and/or password.
        switch (ex.Number)
        {
            case 0:
                Console.WriteLine("Cannot connect to server.  Contact administrator");
                Console.Read();
                break;

            case 1045:
                Console.WriteLine("Invalid username/password, please try again");
                Console.Read();
                break;
        }
        return false;
    }
} 
```

我总是得到`System.InvalidOperationException: The connection is already open`。这没有意义，因为我检查它是否已经打开。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T21:50:26.470

除了打开和关闭之外，还有连接状态：Broken、Closed、Connecting、Executing、Fetching。你应该只在它“关闭”时尝试打开。如果有其他情况，则需要以不同方式处理。

# c# - 读取 STDOUT 的最后一行

> ID：10166425
> 
> 赞同：5
> 
> 时间：2012-04-15T21:46:16.797
> 
> 标签：c#, .net, stdout

我正在通过`Process.Start()`. 我尝试重定向输出以获取行。

但是，现在，我只需要最后一行。

有没有办法只阅读最后一行，还是我还需要全部`redirectStandaroutput = false;`等？

有没有更简单的方法？

如果我必须通过`process.Redirect()`，我尝试按照 MSDN 和其他`outputdatareceived`事件源上的示例进行操作，但我的输出仅在最后写入控制台并且不是异步的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T12:23:17.317

一旦您使用`process.Start()`我知道的唯一读取输出的方法就是使用`.RedirectStandardInput = true;`. 由于标准输出是一个流对象，最后一行只能通过读取整个流来读取。

顺便说一句`proc.StandardOutput.ReadToEnd()`，您的线程将挂起，直到进程退出，如果您在阅读过程中收到任何提示 - 您的应用程序将挂起。

# haskell - 如何在没有头文件的情况下使用来自haskell的共享库？

> ID：10166431
> 
> 赞同：2
> 
> 时间：2012-04-15T21:47:20.370
> 
> 标签：haskell, ffi

我有我想从 haskell 调用的 pdflib_py.so 库。我没有头文件。如您所见，lib 的名称不是标准的 libbla 形式。

我如何从 haskell 访问它？

我跟着 c2hs 教程。但它需要一个头文件（我没有），而 ghc 需要一个库名称为 libbla 格式。我当然可以将 pdflib_py.so 重命名为 libpdfpy.so，事实上我试过了（它没有用），但是假设你不能从 haskell 访问一个库是很愚蠢的，因为它的名字。我肯定在这里遗漏了一些东西。

您可以从这里下载 pdflib 库[http://www.pdflib.com/download/pdflib-family/pdflib-8/](http://www.pdflib.com/download/pdflib-family/pdflib-8/)

他们有 c++、java、php、python 等的捆绑包。

为什么我不使用 c++ 库而是使用 python 库？嗯，c++ 库 libbpdf.a 需要用 g++ 编译。而且haskell不适用于g ++，我必须先编写一个C包装器。幸运的是，有人已经为我做了。这就是 pdflib_py.so 是什么 - libpdf 库上的 ac 包装器。

那么，我如何使用具有非标准名称且没有来自 haskell 的头文件的库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T21:59:03.943

我不认为你的方法是正确的。您应该使用 g++ 将 pdflib 编译到共享库中，然后链接它。他们提供的 C++ 库已经使用“extern C”包装器，因此导出的符号将完全符合您的预期。

综上所述，我提出以下解决方案：

1.  下载 C++ 包
2.  使用 g++ 编译以制作共享的 .so 库
3.  使用包中的头 .h 文件进行 Haskell 绑定
4.  将 Haskell 代码链接到 .so 库

# string - 两个相等值的字符串变量比较不相等（android）

> ID：10166434
> 
> 赞同：0
> 
> 时间：2012-04-15T21:47:32.887
> 
> 标签：string, comparison, string-comparison

我有两个变量，一个是从数据库中填充的String数组，另一个是在程序中生成的，如果它们相等我想执​​行代码。我已经验证它们具有相同的值，但比较似乎失败了。

在这种情况下，String 数组的元素也等于“2”，但比较失败。

```
if (r3.isChecked())
     {
          choosenButton = "2";
          if (choosenButton == Global.dbCorrectAnswer[0])
          {
             Toast.makeText(MySchoolOnline.this, "Correct", Toast.LENGTH_SHORT).show();

          }
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T21:49:00.390

您应该使用 equals 来比较变量：

```
choosenButton.equals(Global.dbCorrectAnswer[0]) 
```

# lua - Corona SDK 自定义物理体

> ID：10166437
> 
> 赞同：2
> 
> 时间：2012-04-15T21:47:49.300
> 
> 标签：lua, coronasdk

我对电晕中的自定义形状有些麻烦。

这是我的代码，它的作用是我将一些球体添加到场景中，以便它们落入篮子内，这个篮子是我在 newBasket() 函数中定义的自定义形状对象，问题是篮子确实与地面物体碰撞，但它不与球体碰撞，我不知道为什么，请有人在这里帮助我，我在其他地方找不到解决方案，在此先感谢。

```
_W = display.contentWidth
_H = display.contentHeight

--Physics
local physics = require("physics")
physics.start()
physics.setDrawMode("debug")

-- iOS
display.setStatusBar(display.HiddenStatusBar)

-- screen boundaries
local ground = display.newRect(0, _H, _W, 5)
local leftWall = display.newRect(0,0,1,_H)
local rightWall = display.newRect(_W,0,1,_H)
physics.addBody(ground, "static", {friction = .2, bounce = .1})
physics.addBody(leftWall, "static", {friction = .2, bounce = .1})
physics.addBody(rightWall, "static", {friction = .2, bounce = .1})

local function newBasket()
    local body = display.newImage("assets/basket.png")
    body.x = 0 body.y = 0

    local physics_body = {}
    physics_body["basket"] = {
        {
            --LeftArm
            density = 10, friction = 10, bounce = 0.15, 
            shape = {-126, 40, -110, 40, -140, -64, -156, -64}

        },

        {
            --Bottom
            density = 10, friction = 1, bounce = 0, 
            shape = {-121, 60, 125, 60, 128, 40, -126, 40}

        },
        {
            --RightArm
            density = 10, friction = 10, bounce = 0.15, 
            shape = {113, 40, 129, 40, 158, -64, 143, -64}

        }

    }
    physics.addBody(body, unpack(physics_body["basket"]) )

    return body
end

local basket = newBasket()
basket.x = _W * .5 basket.y = _H - 100

local function newPlanet()

    local planets = {
        {img = "bigBall.png", radius = 45},
        {img = "mediumBall.png", radius = 30}, 
        {img = "smallBall.png", radius = 20}
    }

    local n = math.random(1,3)

    local img = "assets/" .. planets[n].img
    local ball = display.newImage(img)
    ball.x = math.random((_W * 0.5) -100, (_W * 0.5) + 100) ball.y = 0

    physics.addBody(ball, {bounce = 0.3, radius = planets[n].radius})
end

local function spawnPlanets(number)

    local function spawn(e)
        newPlanet()

        if(e.count == number) then
            timer.cancel(tmr)
            tmr = nil
        end
    end

    tmr = timer.performWithDelay(500, spawn, number)
end

spawnPlanets(20) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T16:55:20.840

根据[手册](http://developer.anscamobile.com/reference/index/physicsaddbody)：

> 如果指定了形状，则主体边界将遵循该形状提供的多边形。请注意，每个形状的最大边数为八，并且所有角度都必须是凸的。[...] 形状坐标必须按顺时针顺序定义，并且生成的形状必须是仅凸的。

所以你有两个问题对你不利。首先，必须按顺时针顺序定义形状，就像我在下面的示例中所做的那样。其次，所有的形状都必须是凸的（即使是复杂的身体形状），所以你不能做任何像新月或篮子一样自转的东西。

不幸的是，这意味着你必须将你的篮子做成 3 个不同的形状。此外，由于它们现在是独立的形状，因此它们在掉落时不会粘在一起（除非您使用[关节](http://developer.anscamobile.com/content/joints)）。我刚刚制作了篮子 3 个静态物体，并将其放在正确的位置开始：

```
local function newBasket()
    local physics_body = {}
    physics_body["basket"] = {
        {
            --LeftArm
            density = 10, friction = 10, bounce = 0.15,
            shape = {-126, 40, -156, -64, -140, -64, -110, 40 }

        },

        {
            --Bottom
            density = 10, friction = 1, bounce = 0,
            shape = {-121, 60,-126, 40, 128, 40, 125, 60 }

        },
        {
            --RightArm
            density = 10, friction = 10, bounce = 0.15,
            shape = {113, 40, 143, -64, 158, -64, 129, 40 }

        }

    }
    for k,shape in pairs(physics_body["basket"]) do
        local body = display.newRect(0, 0, 200, 100)
        body.x = display.contentCenterX
        body.y = display.contentHeight - 60

        physics.addBody(body, 'static', shape )
    end
end

newBasket() 
```

# javascript - 如何获取特定窗口的打开时间？

> ID：10166443
> 
> 赞同：0
> 
> 时间：2012-04-15T21:48:44.927
> 
> 标签：javascript, jquery, html, forms

我有一个简单的用户调查表，其中有一个部分用户需要单击链接，阅读链接内的页面，然后返回继续表单。目前，我有一个父 HTML 页面，我从中提供一个链接以在不同的窗口/选项卡中打开子网页。

如何获取用户在子窗口/选项卡上花费的时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T21:58:20.623

通过类似的方式收听用户的点击

```
$('a').on('click', function(){
    var d = new Date();
    var curr_time = d.getTime();
    //save in cookie1 
}) 
```

现在在用户正在阅读的另一个 html 页面中......做同样的事情，但只在窗口的卸载时

```
 $(window).unload(function(){
    var d1 = new Date();
    var curr_time1 = d1.getTime();
    //save in cookie2 
}) 
```

也保存这个....

然后当她/他回来时，我的意思是在它的 onfocus 上，您可以减去这 2 个 cookie 的值并除以 1000 得到秒，因为这些时间将以毫秒为单位。

```
 (cookie1 -cookie2)/1000 seconds  //if the cookie thing is used 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T21:57:05.890

用户是通过单击链接离开页面，还是第二个页面显示在第一个页面内？在第一种情况下，您必须使用 cookie 来存储点击时间，在第二种情况下，使用变量。可以使用 检索时间`new Date()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T22:17:19.550

1.  记录开窗时间
2.  在命名窗口中打开页面
3.  设置 timeinteval 函数（在原始页面上）以检查 1000 毫秒的命名窗口的 location.href
4.  如果更改（到已完成/感谢页面）或现有用户必须已完成阅读

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T22:23:50.720

您应该在要读取的页面打开时设置 cookie 或 DOM 存储值。在该页面中：

```
var isFocused = true; // just opened
var secondsLookedupon = 0; // eventually init with a saved value
window.onblur = function(){ isFocused=false; }; // use addEventHandler and co
window.onfocus = function(){ isFocused=true; }; // use addEventHandler and co
window.setInterval(function(){
    if (!isFocused) {
        secondsLookedupon++;
        document.cookie.name = secondsLookedupon; // set a cookie in some way
        window.sessionStorage.setItem("name", secondsLookedupon); // or use DOM storage
    }
}, 1000); 
```

并且从调查表页面中，您可以在需要时从 cookie 或 domstorage 中读取该值。

# node.js - 如何使用everyauth 进行简单（单步）身份验证？

> ID：10166446
> 
> 赞同：2
> 
> 时间：2012-04-15T21:49:07.613
> 
> 标签：node.js, oauth, express, everyauth

如果我同时拥有公钥和私钥，如何使用everyauth 使用node.js 执行非常简单的oauth 身份验证？与多步骤 facebook 类型的身份验证不同，我只想使用everyauth 来进行简单的经过身份验证的 REST 调用。

并且everyauth 是适合这项工作的工具吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:08:30.393

你看过 Mikeals “Request”：[https](https://github.com/mikeal/request) ://github.com/mikeal/request OAuth 示例。

如果您已经拥有公钥和私钥，则可以使用他的 OAuth 示例中的最后一部分。

# glsl - 在另一个纹理上重复部分纹理

> ID：10166450
> 
> 赞同：1
> 
> 时间：2012-04-15T21:49:34.973
> 
> 标签：glsl

因此，我试图在 GLSL 中将纹理的一部分替换为另一个纹理，这是宏伟计划的第一步。所以我有一个图像，2048x2048，左上角有 3 个纹理，每个 512x512。出于测试目的，我试图重复绘制第一个。

```
//get coord of smaller texture
coord = vec2(int(gl_TexCoord[0].s)%512,int(gl_TexCoord[0].t)%512);

//grab color from it and return it 
fragment = texture2D(textures, coord);
gl_FragColor = fragment; 
```

似乎它只抓取相同的像素，我从返回给我的纹理中得到一种颜色。一切都以灰色告终。有谁知道怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T22:35:15.197

除非那是一个矩形纹理（因为你正在使用它不是`texture2D`），否则你的纹理坐标是*归一化*的。这意味着范围 [0, 1] 映射到纹理的整个范围。0.5 总是意味着一半，无论是 256 大小的纹理还是 8192 大小的纹理。

因此，您需要停止传递非归一化纹理坐标（纹素值）。通过归一化纹理坐标并调整它们。

# mysql - MySQL 查询：选择最多

> ID：10166451
> 
> 赞同：0
> 
> 时间：2012-04-15T21:49:35.080
> 
> 标签：mysql, sql, aggregate-functions

我有一个这样排序的表：

```
id    tag    account
 0    sport     123
 1    game      123
 2    sport     123
 3    game      234
 4    sport     234
 5    game      234 
```

有没有办法获取所有带有标签运动的行并按哪个帐户的条目最多对它们进行排序？我觉得应该很简单。实际上，我想要的只是不同的帐户，按哪个帐户的体育条目最多排序？我会很感激我能得到的任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T21:52:34.337

这将为您提供“实际”想要的东西：

> 实际上，我想要的只是不同的帐户，按哪个帐户的体育条目最多排序

```
select account from table
where tag = 'sport'
group by account
order by count(*) desc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T21:59:43.060

这是一种方法。

```
选择帐户，计数（帐户）为“c”
来自体育
WHERE标签='运动'
按帐户分组
按 c DESC 排序；

```

# java - 如何在不对目录进行硬编码的情况下将内容保存到桌面？

> ID：10166453
> 
> 赞同：7
> 
> 时间：2012-04-15T21:49:50.603
> 
> 标签：java, user-interface, text

我想知道如何让java`hello.txt`在不写的情况下保存一个名为桌面的文本文件

```
"C:\\Users\\Austin\\Desktop" 
```

任何帮助都会很棒。就像：

```
FileWriter fileWriter = new FileWriter(fileName.getText(), true); 
```

..这`fileName.getText()`只是“你好”。

更新：我认为我可以使用 jfilechooser，所以这行得通吗？

```
JFileChooser chooser = new JFileChooser();
chooser.setVisible(true); 
```

那行得通吗？如果是这样，我将如何使用其中的选择来保存文件？我是菜鸟.... :(

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T22:15:00.437

```
import java.io.File;

class FindDesktopOnWindows {

    public static void main(String[] args) throws Exception {
        if (System.getProperty("os.name").toLowerCase().indexOf("win")<0) {
            System.err.println("Sorry, Windows only!");
            System.exit(1);
        }
        File desktopDir = new File(System.getProperty("user.home"), "Desktop");
        System.out.println(desktopDir.getPath() + " " + desktopDir.exists());

        java.awt.Desktop.getDesktop().open(desktopDir);
    }
} 
```

我忘记了不同的语言环境。**非常脆弱的代码**（即使是针对特定操作系统的代码）。请参阅下面我的评论。操作系统/ `JFileChooser`.

> ..如何`(System.getProperty("user.home"), "Desktop")`工作..

Oracle 为这类事情提供了有用的文档。

请参阅[`System.getProperty(String)`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#getProperty%28java.lang.String%29)& [`new File(String,String)`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#File%28java.lang.String,%20java.lang.String%29)。

* * *

我将在这方面让给专家（或用户），但我不认为 OS X 直接在 ..start 屏幕上支持任何应用程序图标或文档图标，默认外观，等等。可能更好地提供结束用户`JFileChooser`指向`user.home`并要求他们将文档保存到桌面（或他们喜欢的任何地方）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-08T14:22:37.453

这会将您指向桌面目录：

```
javax.swing.filechooser.FileSystemView.getFileSystemView().getHomeDirectory() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T20:00:22.770

User.home 可以工作，但只需硬编码目录就可以了。

# javascript - 使用多个表和调节 tds

> ID：10166457
> 
> 赞同：0
> 
> 时间：2012-04-15T21:50:26.537
> 
> 标签：javascript, jquery-datatables

我正在使用 datatables 表插件，并且在我的站点中全局使用它，以便我可以让所有表使用相同的设置。我想要做的是将它设置到遇到具有特定 id 的 th 之一的位置，然后它会取消排序并调整列的大小，但不确定如果td 有一定的id。

```
$(window).load(function(){
var oTable = $('.dataTable').dataTable({
} );

$('.selectall').toggle(
    function() {
        $(this).closest('.table').find('.messages').prop('checked', true);
        $(this).prop('checked', true)
    },
    function() {
        $(this).closest('.table').find('.messages').prop('checked', false);
        $(this).prop('checked', false)
    }
);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T09:33:29.217

我决定只制作一个 js 脚本页面，其中包含每个表的所有不同代码并保存。

# java - 使用 Andengine 画一个圆

> ID：10166459
> 
> 赞同：3
> 
> 时间：2012-04-15T21:50:56.547
> 
> 标签：java, android, andengine, shape

我正在寻找一种使用 Andengine 绘制圆圈的方法。如我所见，我只能画线、矩形和放置精灵，但我找不到画圆的方法。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T22:29:20.740

确实，你不能直接画一个圆。替代方案是：

*   使用圆形纹理渲染四边形（例如，请参阅[此链接](http://code.google.com/p/andengineexamples/source/browse/src/org/anddev/andengine/examples/PhysicsExample.java)）
*   渲染一个实际上是一个连接三角形的圆圈。您必须通过程序生成几何来近似圆。对于一个实心圆来说，这并不难。我想，一个空心的圆圈/圆圈轮廓，有点复杂。如果这是你想要的，你也可以用线条画一个圆圈。

祝你好运。

# c++ - 分段错误执行方法

> ID：10166462
> 
> 赞同：1
> 
> 时间：2012-04-15T21:51:37.893
> 
> 标签：c++, pointers, iterator

我的编码的相关（我认为）行如下。这意味着有一个集群列表。其中一个，`base`，将吸收另一个（`aborbed`）。`aborbed`集群应该从`list`.

我遇到的第一个问题是，在循环关闭后，我需要在集群`base`和`absorbed`集群中执行其他操作。`while`从我的搜索中，我找到了`= &(*li)`这些东西。我的理解是，我得到了一个指向元素`li`指向的地址的指针，尽管我做不到 `absorbed = li`，因为一个是迭代器，另一个是（简单？） ponter。我很感激对此的一些解释。

现在，更大的问题是我在`c->getPoints();`方法行中遇到了分割错误`joinCluster()` 我做错了什么？我该怎么办？为什么？

我在 Linux x86_64 中使用 g++ (GCC) 4.5.2。

```
Cluster * base;
Cluster * absorbed;

list<Cluster>::iterator li = clusters.begin(); 
while ( li != clusters.end() ) {   
    if (li->getId() == p2) {
        absorbed = &(*li);
        li = clusters.erase(li);
    } else if (li->getId() == p1) { 
        base = &(*li);
    }
++li;
}

base->joinCluster(absorbed);

void Cluster::joinCluster(Cluster * c)
{
    set<unsigned int> pts = c->getPoints(); 
}

set<unsigned int> Cluster::getPoints()
{
return points;
}

class Cluster {
    private:
    std::set<unsigned int> points;
    public:
    std::set<unsigned int> getPoints();
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T22:08:53.927

```
list<Cluster>::iterator li = clusters.begin(); 
while ( li != clusters.end() ) {   
    if (li->getId() == p2) {
        absorbed = &(*li);
        li = clusters.erase(li);
    } else if (li->getId() == p1) { 
        base = &(*li);
    }
++li;   // <----  Don't increment when you already deleted.
} 
```

当您删除列表中的最后一个元素时，`li`变为`cluster.end()`. 然后你再次增加它并繁荣，你超出了界限。`++li`应该进入`else`块。

另请注意，当您`li`从容器中擦除时，会`absorbed`保存一个无效地址。

# jquery - 如何在两个页面上切换 jQuery 版本

> ID：10166464
> 
> 赞同：0
> 
> 时间：2012-04-15T21:51:54.627
> 
> 标签：jquery, version, compatibility

我有一个在 jQuery 1.7 下运行良好的功能。但是另一个页面上的另一个功能会中断并需要 jQuery 1.4.2。

加载具有 1.4.2 功能的页面时，如何有效地从 1.7 切换到 1.4.2？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T21:53:59.213

这个问题与 JQuery 无关。您需要对服务器进行编程，以便为该特定页面提供正确的 JQuery 文件。根据您的服务器和页面使用的语言（PHP、C#、Ruby、Perl、CFM？或者它可能是 SSI 或 JSP？），答案会有所不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T22:05:55.920

首先，我强烈建议您尝试使用最新版本的 jQuery 来查看您说“它中断”的那个插件或代码段有什么问题。

尽管如此，您总是可以在同一页面上加载多个版本的 jQuery 并区别对待它们，例如：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script>
    // loads latest jQuery (1.7.2)
    var $ = jQuery.noConflict();
    $("#hello").text($.fn.jquery);
</script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script>
    // loads jQuery 1.4.2
    var jq142 = jQuery.noConflict();
    jq142("#hello2").text(jq142.fn.jquery);
</script> 
```

[JsBin 上的实时示例](http://jsbin.com/ugejit/edit#javascript,html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T21:54:56.943

您可以为此使用 jquery noConflict，这是一篇关于它的文章 [http://blog.nemikor.com/2009/10/03/using-multiple-versions-of-jquery/](http://blog.nemikor.com/2009/10/03/using-multiple-versions-of-jquery/)

但是我不建议这样做，只要修复错误，如果你要在每个插件的基础上加载 jQuery 版本，你将进入一个痛苦的世界，一个痛苦的世界，认真的。

# javafx-2 - javafx拖放默认图标

> ID：10166471
> 
> 赞同：1
> 
> 时间：2012-04-15T21:53:10.420
> 
> 标签：javafx-2

我想用线连接2个形状，同时按下鼠标。正如文档所说，我不能使用按下-拖动-释放模型来做到这一点，所以应该使用拖放方法 - 一切看起来都很好，但是如何禁用默认图标，这表示允许拖放内容放在目标上? 在 mouseMove 上我画线，我不想要这些默认图标。

我包括显示它的简单程序 - 只需运行我尝试将一个圆圈拖到另一个圆圈。

```
/*
* To change this template, choose Tools | Templates
* and open the template in the editor.
*/
package onreleased;

import javafx.application.Application;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.control.Label;
import javafx.scene.input.*;
import javafx.scene.layout.Pane;
import javafx.scene.paint.Color;
import javafx.scene.shape.Circle;
import javafx.stage.Stage;

/**
*
* @author mmk
*/
public class DaDIcons extends Application {

    /**
    * @param args the command line arguments
    */
    public static void main(String[] args) {
        launch(args);
    }

    @Override
    public void start(Stage primaryStage) {
        primaryStage.setTitle("Hello World!");

        final Label label = new Label("started");
        label.setLayoutY(100);

        Pane pane = new Pane();
        Circle red = createCircle(40, 40, 30, Color.RED, label);
        Circle blue = createCircle(160, 40, 30, Color.BLUE, label);

        pane.setOnDragOver(new EventHandler<DragEvent>() {

            @Override
            public void handle(DragEvent event) {

                System.out.println("foo");

            }
        });

        pane.getChildren().addAll(red, blue, label);

        primaryStage.setScene(new Scene(pane, 300, 250));
        primaryStage.show();
    }

    private Circle createCircle(double x, double y, double r, final Color color, final Label statusLabel) {

        final Circle circle = new Circle(x, y, r);
        circle.setFill(color);

        circle.setOnDragOver(new EventHandler<DragEvent>() {

            @Override
            public void handle(DragEvent event) {
                statusLabel.setText(color.toString() + " over");
                System.out.println("foo");
                if (event.getGestureSource() != circle) {

                    event.acceptTransferModes(TransferMode.ANY);
                }
            }
        });

        circle.setOnDragDropped(new EventHandler<DragEvent>() {

            @Override
            public void handle(DragEvent arg0) {
                statusLabel.setText(color.toString() + " dropped");
            }
        });

        circle.setOnDragDetected(new EventHandler<MouseEvent>() {

            @Override
            public void handle(MouseEvent arg0) {
                circle.startDragAndDrop(TransferMode.ANY);
                Dragboard db = circle.startDragAndDrop(TransferMode.ANY);

                /*
                * Put a string on a dragboard
                */
                ClipboardContent content = new ClipboardContent();
                content.putString("foo");
                db.setContent(content);

                statusLabel.setText(color.toString() + " xxxxxxxxxxxxxxxxxxxxxxx");
            }
        });

        circle.setOnDragEntered(null);

        return circle;

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:47:40.300

您可以管理`Cursor`拖放操作。
在`circle.setOnDragDetected()`动作集上`circle.setCursor(Cursor.NONE);`，
在`circle.setOnDragDropped()`动作上反转它`circle.setCursor(Cursor.DEFAULT);`。
您可以在 dn-dropping 时在鼠标坐标处显示图像，而不是显示光标图标。

# php - 清理jsonp回调的最佳方法？

> ID：10166476
> 
> 赞同：1
> 
> 时间：2012-04-15T21:53:33.720
> 
> 标签：php, javascript, jquery, callback, xss

清理 jsonp 回调的最佳方法是什么？

我目前有类似的东西：

```
function api_output($data) {

    if (isset($_GET['callback'])) {

        $cb = preg_replace("/[^][.\\'\\\"_A-Za-z0-9]/", '', $_GET['callback']);
        send_js_headers();
        print sprintf('%s(%s);', $cb, json_encode($data));
        exit(0);

    }

        send_json_headers();
        echo json_encode($data);
        exit(0);

} 
```

为什么？：

[我是否需要清理 JSONP 调用中的回调参数？](https://stackoverflow.com/questions/2777021/do-i-need-to-sanitize-the-callback-parameter-from-a-jsonp-call)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T04:47:11.347

回调必须是有效的 javascript 标识符，并且您的服务器端代码应该验证这一点。Javascript 标识符只能包含字母、数字、下划线和 $ 符号。

只要回调名称是有效的 JS 标识符，您就不需要对其进行编码/转义。如果回调不是一个有效的标识符，你应该简单地返回一个 400 错误代码。

您不得替换回调名称中的字符。这样做没有任何意义，因为客户端代码将不再定义回调函数。

# jquery - 如何更改自定义属性的值

> ID：10166478
> 
> 赞同：11
> 
> 时间：2012-04-15T21:53:47.340
> 
> 标签：jquery

```
var selector = $(this); 
```

更改自定义属性的正确代码是`data-change-me`什么`selector`？

语法

```
selector[data-change-me='someValue']; 
```

不适合我

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-15T21:54:29.277

我想你想要 attr 方法。

```
selector.attr("data-change-me","someValue"); 
```

这是文档：[http ://api.jquery.com/attr/](http://api.jquery.com/attr/)

值得指出的是，看起来您正在尝试将 jQuery 包装的 DOM 对象视为 Javascript 对象，例如：

请看以下示例以了解我的意思：

```
var myObject = {
     "data-change-me":"someValue";
};

myObject["data-change-me"] = "someOtherValue"; 
```

这是纯 Javascript 对象但不是 jQuery 的有效语法。要了解 Javascript，我推荐[Javascript 的优秀部分](http://www.amazon.co.uk/gp/product/0596517742/)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-15T22:05:51.773

虽然[Rob Stevenson-Leggett](https://stackoverflow.com/a/10166486/82548)是完全正确的，但重要的是要记住，您也可以为此使用纯 JavaScript：

```
var selector = document.getElementById('div');
selector.setAttribute('data-change-me','red');​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/pztKh/)。

参考：

*   [`element.setAttribute()`](https://developer.mozilla.org/en/DOM/element.setAttribute).

# asp.net - 在 ListView 中添加数据库中的图像

> ID：10166479
> 
> 赞同：1
> 
> 时间：2012-04-15T21:53:51.140
> 
> 标签：asp.net

我的数据库中有一张图片，我可以使用`GridView`. 现在我正在尝试用`ListView`.

我知道存储我想要链接到的 ID 的列，并且我也知道我的图像的路径。我只是想知道我将如何链接它。

我的路径是`~/assets/Image/?id={0}`，表中的列是“AlbumID”。

我相信这与在`<ItemTemplate>`和 链接中制作图像标签有关`<%# EVal("AlbumID") %>`，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T00:56:26.843

对，你在正确的轨道上。这应该可以解决问题：

```
<asp:ListView ID="ListView1" runat="server">
    <ItemTemplate>
        <asp:Image ID='Image1' runat='server' ImageUrl='~/assets/Image/?id=<%#Eval("AlbumID") %>' />
    </ItemTemplate>
</asp:ListView> 
```

# css - 删除 a:hover 在媒体样式表上？

> ID：10166482
> 
> 赞同：2
> 
> 时间：2012-04-15T21:54:02.333
> 
> 标签：css, media-queries

如何删除媒体查询 CSS 文件中主 CSS 文件中所述的样式条目？

例如，我想删除 a:hover 条目以便在触摸设备上使用。

主.css：`a:hover {color:#999999; background:#111111;}`

如何在 media.css 中取消它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T22:02:24.100

您不能“删除” CSS 规则。¹级联不是那样工作的。

只有在不满足媒体查询时才应用规则的唯一方法是将其隔离在查询的否定版本中，或者在`@media`main.css 样式表的块中：

```
@media not [your media query] {
    a:hover {color:#999999; background:#111111;}
} 
```

或者在页面标题中的单独样式表中：

```
<link rel="stylesheet" media="all" href="main.css">
<link rel="stylesheet" media="[your media query]" href="media.css">

<!-- Or put this in a separate file and link to it as above -->
<style media="not [your media query]">
a:hover {color:#999999; background:#111111;}
</style> 
```

或者，您可以撤消 media.css 样式表中的样式，但这样做的缺点是您必须知道要回退到什么值。

* * *

¹ [除了在桌面浏览器的开发者工具中，也许。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T22:05:29.933

您的选择是特异性或重要的。或者如果它们具有相同的特性，则只需在主样式表之后添加媒体查询样式表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-06T18:52:40.010

我发现的最佳选择是首先使用媒体查询来设置悬停状态

```
@media screen and (min-width: 800px){
  a:hover {color:#999999; background:#111111;}
} 
```

使用“最小宽度”允许您在桌面上设置悬停状态，但是一旦屏幕低于 800 像素（或任何您的断点），所有悬停状态都将被禁用，您可以从那里完全设置您想要的样式。

# ios - Facebook 在 iOS5 应用程序中的 Hackbook 集成

> ID：10166488
> 
> 赞同：0
> 
> 时间：2012-04-15T21:54:42.250
> 
> 标签：ios, facebook, facebook-graph-api

我正在尝试在支持 iOS5 ARC 的应用程序中使用 Hackbook 示例应用程序。我正在使用 Facebook 的示例 Hackbook 应用程序中的 APIResultsViewController。我的应用程序启用了 ARC，所以我确保我在 Hackbook 中使用的文件已`-fno-objc-arc`添加为编译器标志。我现在遇到的错误`Use of undeclared identifer 'jsonWriter'; did you mean SBJSonWriter'?`是`Unknown receiver 'jsonWriter'`

我有来自 Facebook API 的 src 文件夹中的 SBJSON。我能够让 Facebook Api 在我的应用程序中运行。然后我想使用 Hackbook 示例中的功能和代码。将代码移过这些错误后，弹出。感谢您的帮助

这是发生错误的代码

```
* Graph API: Check in a user to the location selected in the previous view.
 */
- (void)apiGraphUserCheckins:(NSUInteger)index {
    AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    SBJSON *jsonWriter = [[SBJSON new] autorelease];

    NSDictionary *coordinates = [NSDictionary dictionaryWithObjectsAndKeys:
                                  [[[myData objectAtIndex:index] objectForKey:@"location"] objectForKey:@"latitude"],@"latitude",
                                  [[[myData objectAtIndex:index] objectForKey:@"location"] objectForKey:@"longitude"],@"longitude",
                                  nil];

    NSString *coordinatesStr = [jsonWriter stringWithObject:coordinates];
    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   [[myData objectAtIndex:index] objectForKey:@"id"], @"place",
                                   coordinatesStr, @"coordinates",
                                   @"", @"message",
                                   nil];
    [[delegate facebook] requestWithGraphPath:@"me/checkins"
                                    andParams:params
                                andHttpMethod:@"POST"
                                  andDelegate:self];
} 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T02:00:46.543

这似乎很明显，但您是否将 SBJSON 作为框架包含在您的应用程序中？[http://stig.github.com/json-framework/](http://stig.github.com/json-framework/)

# c# - C# 相当于 jQuery.parents(Type)

> ID：10166490
> 
> 赞同：5
> 
> 时间：2012-04-15T21:54:42.827
> 
> 标签：c#, asp.net

在 jQuery 中有一个很酷的函数叫做 .parents('xx') ，它使我能够从 DOM 树中的某个对象开始，然后在 DOM 中向上搜索以找到特定类型的父对象。

现在我在 C# 代码中寻找同样的东西。我有一个`asp.net panel`有时位于另一个父面板中，有时甚至位于 2 或 3 个父面板中，我需要向上遍历这些父面板以最终找到`UserControl`我正在寻找的。

在 C#/asp.net 中是否有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T21:57:58.997

编辑：重读您的问题后，我根据帖子中的第二个链接对它进行了抨击：

```
public static T FindControl<T>(System.Web.UI.Control Control) where T : class
{
     T found = default(T);

     if (Control != null && Control.Parent != null)
     {
        if(Control.Parent is T)
            found = Control.Parent;
        else
            found = FindControl<T>(Control.Parent);
     }

     return found;
} 
```

请注意，未经测试，只是现在弥补。

下面供参考。

有一个称为 FindControlRecursive 的通用函数，您可以在其中从页面向下遍历控件树以查找具有特定 ID 的控件。

这是来自[http://dotnetslackers.com/Community/forums/find-control-recursive/p/2708/29464.aspx的实现](http://dotnetslackers.com/Community/forums/find-control-recursive/p/2708/29464.aspx)

```
private Control FindControlRecursive(Control root, string id) 
{ 
    if (root.ID == id)
    { 
        return root; 
    } 

    foreach (Control c in root.Controls) 
    { 
        Control t = FindControlRecursive(c, id); 
        if (t != null) 
        { 
            return t; 
        } 
    } 

    return null; 
} 
```

你可以这样使用：

```
var control = FindControlRecursive(MyPanel.Page,"controlId"); 
```

您也可以将其与以下内容结合使用：[http](http://weblogs.asp.net/eporter/archive/2007/02/24/asp-net-findcontrol-recursive-with-generics.aspx) ://weblogs.asp.net/eporter/archive/2007/02/24/asp-net-findcontrol-recursive-with-generics.aspx以创建更好的版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T22:10:39.510

您应该能够使用的[`Parent`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.parent.aspx)属性[`Control`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.aspx)：

```
private Control FindParent(Control child, string id) 
{
    if (child.ID == id)
        return child;
    if (child.Parent != null)
        return FindParent(child.Parent, id);
    return null;
} 
```

# objective-c - 有没有办法同时运行 2 个 NSAnimation 对象？

> ID：10166498
> 
> 赞同：8
> 
> 时间：2012-04-15T21:56:50.650
> 
> 标签：objective-c, cocoa, osx-lion, core-image, nsanimation

我创建了 2 个`NSAnimation`用另一个视图翻转视图的对象。我想同时运行 2 个这些动画。我不能使用`NSViewAnimation`，因为它现在是关于为任何视图属性设置动画。

下面是动画制作：

```
self.animation = [[[TransitionAnimation alloc] initWithDuration:1.0 animationCurve:NSAnimationEaseInOut] autorelease];
[self.animation setDelegate:delegate];
[self.animation setCurrentProgress:0.0];

[self.animation startAnimation]; 
```

我试图链接 2 个动画，但可能由于某种原因它不起作用。我举了一个例子： [苹果开发者网站](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/AnimationGuide/Articles/TimingAnimations.html#//apple_ref/doc/uid/TP40003581-DontLinkElementID_3)

配置`NSAnimation`要使用的对象`NSAnimationNonblocking`根本不显示任何动画......

编辑：第二个动画与第一个动画完全相同，并在创建第一个动画的同一位置创建。

`TransitionAnimation`是 的子类`NSAnimation`，`setCurrentProgress`如下所示：

```
- (void)setCurrentProgress:(NSAnimationProgress)progress {
    [super setCurrentProgress:progress];
    [(NSView *)[self delegate] display];    
} 
```

在这种`delegate`情况`NSView`下，它在其 drawRect 函数中应用时间依赖`CIFilter`于 a `CIImage`。问题是它同步运行，第二个动画在第一个动画结束后立即开始。有没有办法同时运行它们？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-16T04:49:07.913

`NSAnimation`并不是同时为多个对象及其属性设置动画的最佳选择。

相反，您应该使您的视图符合[`NSAnimatablePropertyContainer`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSAnimatablePropertyContainer_protocol/Introduction/Introduction.html)协议。

然后，您可以将多个自定义属性设置为动画（除了已经支持的属性`NSView`），然后您可以简单地使用视图的`animator`代理来为属性设置动画：

```
yourObject.animator.propertyName = finalPropertyValue; 
```

除了使动画非常简单之外，它还允许您使用以下方法同时为多个对象设置动画`NSAnimationContext`：

```
[NSAnimationContext beginGrouping];
firstObject.animator.propertyName = finalPropertyValue1;
secondObject.animator.propertyName = finalPropertyValue2;
[NSAnimationContext endGrouping]; 
```

您还可以设置持续时间并提供完成处理程序块：

```
[NSAnimationContext beginGrouping];
[[NSAnimationContext currentContext] setDuration:0.5];
[[NSAnimationContext currentContext] setCompletionHandler:^{
    NSLog(@"animation finished");
}];
firstObject.animator.propertyName = finalPropertyValue1;
secondObject.animator.propertyName = finalPropertyValue2;
[NSAnimationContext endGrouping]; 
```

和类比动画代理支持要老得多`NSAnimation`，`NSViewAnimation`我强烈建议您尽可能远离它们。支持`NSAnimatablePropertyContainer`协议比管理所有委托的东西*要简单得多。*`NSAnimation`Lion 对自定义计时功能和完成处理程序的支持意味着真的没有必要再这样做了。

对于标准`NSView`对象，如果你想为视图中的属性添加动画支持，你只需要覆盖`+defaultAnimationForKey:`视图中的方法并返回该属性的动画：

```
//declare the default animations for any keys we want to animate
+ (id)defaultAnimationForKey:(NSString *)key
{
    //in this case, we want to add animation for our x and y keys
    if ([key isEqualToString:@"x"] || [key isEqualToString:@"y"]) {
        return [CABasicAnimation animation];
    } else {
        // Defer to super's implementation for any keys we don't specifically handle.
        return [super defaultAnimationForKey:key];
    }
} 
```

我创建了一个简单的[示例项目](https://github.com/rkeniger/Animating-View)，展示了如何使用该`NSAnimatablePropertyContainer`协议同时为视图的多个属性设置动画。

成功更新视图所需要做的就是确保`setNeedsDisplay:YES`在修改任何可动画属性时调用它。然后，您可以在`drawRect:`方法中获取这些属性的值，并根据这些值更新动画。

如果您想要一个类似于事情工作方式的简单进度值`NSAnimation`，您可以在视图上定义一个`progress`属性，然后执行以下操作：

```
yourView.progress = 0;
[yourView.animator setProgress:1.0]; 
```

然后，您可以访问`self.progress`您的`drawRect:`方法以找出动画的当前值。

# c# - 如何使用 linq-c# 将 XML 元素值转换为 int

> ID：10166501
> 
> 赞同：2
> 
> 时间：2012-04-15T21:57:08.843
> 
> 标签：c#, linq-to-xml, type-conversion

我正在尝试从我的 XML 元素中获取值并使用 linq 命令将其转换为整数，以便我可以使用它做一些数学方程式。

到目前为止，这是我尝试过的方式：

```
private void buttonTab4Mod1Calculate_Click(object sender, EventArgs e)
        {
            var document = XDocument.Load(workingDir + @"\Level4.xml");

            var assessmentOneWeight = from d in document.Descendants("moduleTitle")
                                      where d.Value == (String)comboBoxTab4Mod8.SelectedItem
                                      select d.Parent.Element("assessmentOneWeight").Value;
            int a = 0;
            foreach (var item in assessmentOneWeight)
            {
                a = Convert.ToInt32(item);
            }
            MessageBox.Show(a.ToString());
        } 
```

但由于某种原因，该值仍为 0。

这是我的 xml 文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<SoftwareEngineering>
  <Module>
    <moduleCode>ECSE401</moduleCode>
    <moduleTitle>Programming Methodology</moduleTitle>
    <credits>15</credits>
    <assessmentOne>Coursework</assessmentOne>
    <assessmentOneWeight>40</assessmentOneWeight>
    <assessmentTwo>Coursework</assessmentTwo>
    <assessmentTwoWeight>40</assessmentTwoWeight>
    <assessmentThree>Test</assessmentThree>
    <assessmentThreeWeight>20</assessmentThreeWeight>
  </Module>
  <Module>
    <moduleCode>ECSC404</moduleCode>
    <moduleTitle>Computer Systems Fundamentals</moduleTitle>
    <credits>15</credits>
    <assessmentOne>Test1</assessmentOne>
    <assessmentOneWeight>30</assessmentOneWeight>
    <assessmentTwo>Test2</assessmentTwo>
    <assessmentTwoWeight>30</assessmentTwoWeight>
    <assessmentThree>Test3</assessmentThree>
    <assessmentThreeWeight>40</assessmentThreeWeight>
  </Module>
  <Module>
    <moduleCode>EBSY401</moduleCode>
    <moduleTitle>Information and Data Modelling</moduleTitle>
    <credits>15</credits>
    <assessmentOne>Test</assessmentOne>
    <assessmentOneWeight>25</assessmentOneWeight>
    <assessmentTwo>Coursework1</assessmentTwo>
    <assessmentTwoWeight>10</assessmentTwoWeight>
    <assessmentThree>Coursework2</assessmentThree>
    <assessmentThreeWeight>35</assessmentThreeWeight>
    <assessmentFour>Coursework3</assessmentFour>
    <assessmentFourWeight>30</assessmentFourWeight> 
  </Module>
  <Module>
    <moduleCode>ECSC405</moduleCode>
    <moduleTitle>Software Development Principles</moduleTitle>
    <credits>15</credits>
    <assessmentOne>Test1</assessmentOne>
    <assessmentOneWeight>30</assessmentOneWeight>
    <assessmentTwo>Coursework</assessmentTwo>
    <assessmentTwoWeight>40</assessmentTwoWeight>
    <assessmentThree>Test2</assessmentThree>
    <assessmentThreeWeight>30</assessmentThreeWeight>
  </Module>
  <Module>
    <moduleCode>ECSC407</moduleCode>
    <moduleTitle>Web Technology</moduleTitle>
    <credits>15</credits>
    <assessmentOne>Tutorials</assessmentOne>
    <assessmentOneWeight>20</assessmentOneWeight>
    <assessmentTwo>Coursework</assessmentTwo>
    <assessmentTwoWeight>20</assessmentTwoWeight>
    <assessmentThree>Exam</assessmentThree>
    <assessmentThreeWeight>60</assessmentThreeWeight>
  </Module>
  <Module>
    <moduleCode>ECSC409</moduleCode>
    <moduleTitle>Software Engineering Principles</moduleTitle>
    <credits>15</credits>
    <assessmentOne>Coursework1</assessmentOne>
    <assessmentOneWeight>40</assessmentOneWeight>
    <assessmentTwo>Coursework2</assessmentTwo>
    <assessmentTwoWeight>30</assessmentTwoWeight>
    <assessmentThree>Coursework3</assessmentThree>
    <assessmentThreeWeight>30</assessmentThreeWeight>
  </Module>
  <Module>
    <moduleCode>ECSC408</moduleCode>
    <moduleTitle>Mathematics for Computing</moduleTitle>
    <credits>15</credits>
    <assessmentOne>Coursework</assessmentOne>
    <assessmentOneWeight>50</assessmentOneWeight>
    <assessmentTwo>Exam</assessmentTwo>
    <assessmentTwoWeight>50</assessmentTwoWeight>
  </Module>
  <Module>
    <moduleCode>EBSY400</moduleCode>
    <moduleTitle>Communication and Learning Skills</moduleTitle>
    <credits>15</credits>
    <assessmentOne>Coursework</assessmentOne>
    <assessmentOneWeight>30</assessmentOneWeight>
    <assessmentTwo>Coursework</assessmentTwo>
    <assessmentTwoWeight>70</assessmentTwoWeight>
  </Module>
</SoftwareEngineering> 
```

非常感谢一些帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T22:05:23.647

只需[投射`XElement`到`int`](http://msdn.microsoft.com/en-us/library/bb348319.aspx)：

```
private void buttonTab4Mod1Calculate_Click(object sender, EventArgs e)
{
    var document = XDocument.Load(workingDir + @"\Level4.xml");

    string selectedItem = (string) comboBoxTab4Mod8.SelectedItem;
    var assessmentOneWeight = from d in document.Descendants("moduleTitle")
                              where (string) d == selectedItem
                              select (int) d.Parent.Element("assessmentOneWeight");
    foreach (int item in assessmentOneWeight)
    {
         MessageBox.Show(item.ToString());
    }        
} 
```

请注意，当引用是 an 时，您也可以*转换*为[which`int?`](http://msdn.microsoft.com/en-us/library/bb340386.aspx)的工作方式相同，但是如果您将 null 引用转换为您将返回一个 null 值 - 如果您不知道是否存在相应的元素，这可能*会*很有帮助或不。*`XElement``int?`*

 **有很多明确的转换`XElement`，而且`XAttribute`- 它们让生活变得更轻松。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T22:05:07.320

我很确定您的`assessmentOneWeight`集合不包含单个值，因为`comboBoxTab4Mod8.SelectedItem`在 XML 中找不到 的值。

因此你总是得到`0`，因为`a`是用 初始化的`0`。

* * *

顺便说一句：我强烈建议您改进代码。

迭代`<Module>`元素而不是`<moduleTitle>`元素。这更有意义，因为您需要此元素的数据（即`<assessmentOneWeight>`）

`<assessmentOneWeight`直接在 LINQ 语句中转换 >的值，如下所示：

```
var assessmentOneWeight =
    from d in document.Descendants("moduleTitle")
    where d.Value == (String)comboBoxTab4Mod8.SelectedItem
    select int.Parse(d.Parent.Element("assessmentOneWeight").Value); 
```

您`foreach`的设计不是很好，因为它只需要在您的收藏中找到的最后一个值。如果您真的想要该值，请使用 LINQ 的强大功能并仅选择该值。**

# objective-c - 在 UITableView List segue 之间传递索引号

> ID：10166509
> 
> 赞同：6
> 
> 时间：2012-04-15T21:58:50.487
> 
> 标签：objective-c, uitableview, ios5, segue

当我单击 UITableView 中的某个列表项时，我想将单击的项的索引传递给下一个详细视图。

到目前为止，这是我的相关代码：

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    HomeworkDetails *view =  [[HomeworkDetails alloc] init];

    int lastIndex = [indexPath indexAtPosition:[indexPath length] - 1];
    NSLog(@"%u", lastIndex);

    [self performSegueWithIdentifier: @"HomeworkDetailsSegue" sender:self];
    view.currentIndex = lastIndex;

    [tableView deselectRowAtIndexPath:indexPath animated:YES];

} 
```

至此，我可以成功进入下一个ViewController（HomeworkDetails）但是信息没有通过。我试图通过这样做来实现这一点，`view.currentIndex = lastIndex;`但这不起作用。我还能怎么做？对不起，如果我错过了什么；我是 iOS 开发的初学者。

有建议：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    HomeworkDetails *view =  [[HomeworkDetails alloc] init];

    int lastIndex = [indexPath indexAtPosition:[indexPath length] - 1];
    NSLog(@"%u", lastIndex);

    [self performSegueWithIdentifier: @"HomeworkDetailsSegue" sender:self];
    view.currentIndex = lastIndex;

    [tableView deselectRowAtIndexPath:indexPath animated:YES];

}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"HomeworkDetailsSegue"]) {

        // note that "sender" will be the tableView cell that was selected
        UITableViewCell *cell = (UITableViewCell*)sender;
       NSIndexPath *indexPath = [self.tableView indexPathForCell:cell]; //**error**

        HomeworkDetails *vc = (HomeworkDetails*)[segue destinationViewController];
        vc.currentIndex = indexPath.row;
    }
} 
```

![编译器错误](../Images/fe5ae7966ef627f144e11b2285c951b7.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-15T22:17:41.577

您所描述的最好在`prepareForSegue:sender:`方法中完成，而不是`didSelectRowAtIndexPath:`. 在故事板中，确保`HomeworkDetailsSegue`在 tableView 的原型单元格和目标视图控制器之间设置了 segue。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{    
    if ([segue.identifier isEqualToString:@"HomeworkDetailsSegue"]) {

        // note that "sender" will be the tableView cell that was selected
        UITableViewCell *cell = (UITableViewCell*)sender;
        NSIndexPath *indexPath = [self.tableView indexPathForCell:cell];

        HomeworkDetails *vc = (HomeworkDetails*)[segue destinationViewController];
        vc.currentIndex = indexPath.row;
    }
} 
```

另外，作为风格问题，我建议将您的 HomeworkDetails 类重命名为 HomeworkDetailsViewController。这样做更符合 Apple 的约定，并且更清楚地说明了类代表的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T22:13:59.740

您应该先在新视图中设置索引属性，然后再使用 performSegueWityIdentifier 对其进行定位。更进一步，最佳实践编码约定要求使用标准[prepareForSegue](https://developer.apple.com/library/IOs/ipad/#documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html%23//apple_ref/occ/instm/UIViewController/prepareForSegue%3asender%3a)方法设置新视图。

# jquery - 如何使用 jquery 在加载时滑动整个页面

> ID：10166510
> 
> 赞同：5
> 
> 时间：2012-04-15T21:58:52.310
> 
> 标签：jquery, load, slide

更改后，我想将整个页面向下滑动。我在想这样做的方法是创建一个垂直幻灯片，在单击链接时播放并在页面加载时再次播放？到目前为止，我只能创建影响特定 DIV 的幻灯片。我也希望它垂直滑入。任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T22:05:09.997

只需将所有内容包装在一个 div 中并将其向下滑动即可。

**CSS**

```
#bodyContent {
   display:none;
   height: 100%;
} 
```

**HTML**

```
<div id="bodyContent">
    //all your stuff goes in here
</div> 
```

**Javascript/JQuery**

```
$(document).ready(function(){
   $('#bodyContent').slideDown();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T22:08:12.087

查看[jQuery Mobile 的多页模板](http://jquerymobile.com/demos/1.1.0/docs/pages/multipage-template.html)。它的作用是将您的页面分成多个 DIV 包装器在同一个 HTML 文件中。使用幻灯片过渡，您不希望它们因为网络问题而显得笨拙或“挂起”，因此总体思路是浏览器将所有内容下载到页面并仅显示 DOM 的相关部分。

```
<div data-role="page" id="one">
    <!-- page 1 content -->

    <!-- Link to Page 2 -->
    <p><a href="#two" data-role="button">Show page "two"</a></p>
</div>

<div data-role="page" id="two">
    <!-- page 2 content -->

    <!-- Link back to Page 1 -->
    <p><a href="#one" data-direction="reverse" 
      data-role="button" data-theme="b">Back to page "one"</a></p>  

</div> 
```

一旦您的用户转换到另一个页面，您只需使用 JavaScript 和 CSS 来操作页面的样式，以便它隐藏第一个页面并取消隐藏第二个页面。

此外，上面的示例使用了淡出，因此您还需要查看[Page Transitions](http://jquerymobile.com/demos/1.1.0/docs/pages/page-transitions.html)页面才能将其更改为使用向下滑动效果。

```
<a href="page-transitions-page.html" data-role="button" data-transition="slidedown" 
  data-inline="true" data-corners="true" data-shadow="true" 
  data-iconshadow="true" 
  data-wrapperels="span" data-theme="c" 
  class="ui-btn ui-btn-inline ui-shadow ui-btn-corner-all ui-btn-up-c">
    <span class="ui-btn-inner ui-btn-corner-all">
        <span class="ui-btn-text">page</span>
    </span>
</a> 
```

此外，它使用 HTML5，主要针对移动平台。但是，我已经看到这个库在桌面上也很好玩。

使用这个库的最大优点是它更可能与其他浏览器交叉兼容，并且它还使用技术来管理转换状态。换句话说，您的用户可以使用浏览器中的后退按钮，就像他们使用普通的 Web 1.0 页面转换一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T22:10:41.023

我发现这很有趣，并尝试了一下。

由于其他人每秒可以输入 50000 个单词，因此类似于建议将内容包装在 div 中的答案 :)

测试.html

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Slide Test</title>
    </head>
    <body>
        <div class="container">
            <a href="test.html" class="slide_page">Link Text</a>
            <p>Blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah</p>
            <p>Blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah</p>
            <p>Blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah</p>
            <p>Blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah</p>
            <p>Blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah</p>
        </div>
    </body>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script>
        $(function(){
            // hide the div on page load and use a slidedown effect
            $('div.container').fadeOut(0, function(){
                $(this).slideDown(500);
            });
            // capture link clicks and slide up then go to the links href attribute
            $('a.slide_page').click(function(e){
                e.preventDefault();
                var $href = $(this).attr('href');
                $('div.container').slideUp(500, function(){
                    window.location = $href;
                });
            });

        });
    </script>
</html> 
```

# c++ - FILE_STORAGE_INFO 结构中返回的 PhysicalBytesPerSectorForPerformance 的确切含义是什么？

> ID：10166519
> 
> 赞同：1
> 
> 时间：2012-04-15T21:59:50.407
> 
> 标签：c++, c, winapi, file-io, filesystems

[`FILE_STORAGE`](http://msdn.microsoft.com/en-us/library/windows/desktop/hh447302.aspx)通过函数返回的结构数据成员的文档[`GetFileInformationByHandleEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364953.aspx)有些简洁。

该文档解释`PhysicalBytesPerSectorForPerformance`为*“每个扇区的字节数，以获得最佳的写入性能”。*

这个名字似乎表明这是一个小于存储设备物理扇区大小的大小。但我不确定这是否有意义。

也许这个名字有误导性，`PhysicalBytesPerSectorForPerformance`是写的最佳逻辑块大小，即类似于 Posix 的[stat.st_blksize](http://pubs.opengroup.org/onlinepubs/009695399/basedefs/sys/stat.h.html)？

有人知道更多吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T00:35:21.683

如果`STORAGE_INFO_FLAGS_ALIGNED_DEVICE`还设置了该标志，则表示物理扇区大小小于逻辑扇区大小。（否则，逻辑扇区可能不会映射到物理扇区。）否则，这可能只是驱动程序的建议。

# java - 最终局部变量无法赋值

> ID：10166521
> 
> 赞同：37
> 
> 时间：2012-04-15T22:00:12.500
> 
> 标签：java, swing, final, mouselistener

我有一个座位数组，该数组有两个字符串（选定的和空的）。单击鼠标时，我想遍历数组并找到选定的座位。当我按下按钮时，它说：

> 最终的局部变量 seatno 不能赋值，因为它是在封闭类型中定义的。

```
 JButton btnContinue = new JButton("Next");
    btnContinue.addMouseListener(new MouseAdapter() {
        public void mouseClicked(MouseEvent arg0) {

            for(int x=0;x<17;x++){
                if(anArray[x]=="selected"){

                    seatno = anArray[x];
                }
            }

            data page=new data(newfrom,newto,newtime,date2,seatno);
            page.setVisible(true);
            setVisible(false);
        }
    });
    btnContinue.setBounds(358, 227, 62, 23);
    contentPane.add(btnContinue); 
```

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-04-15T22:19:48.677

关键是来自封闭类型的方法局部变量实际上被**复制**到匿名类的实例中（这是因为激活框架问题，但我不会进一步详细说明，因为这与问题并不真正相关），这这就是为什么它们需要是最终的，因为嵌套类型实例中的变量不再相同。

所以，这是第一个例子：

```
void foo() {
    int a = 3;
    new Runnable() {
        @Override
        public void run() {
            a += 3;
        }
    };
} 
```

这不会编译，因为您不能在匿名类的方法中引用非最终变量。当您在 的声明中添加 final 修饰符时`a`， 的值`a`将被复制到您定义的匿名类的创建实例中。但是，您将不能更改 的值`a`，因为更改对声明的方法不可见`a`。

但是，匿名类不是静态的，也就是说，它们具有对封闭实例的引用（除非声明它们的方法是静态的），您可以使用它来修改封闭实例的变量：

```
int a = 3;

void foo() {
    new Runnable() {
        @Override
        public void run() {
            a += 3;
        }
    };
} 
```

此示例确实编译，并且`a`每次`run()`调用匿名类实例的方法时它都会增加 3。（在此示例中，它从未被调用，但这只是一个示例。）

因此，总而言之，您需要将变量`seatno`从方法局部变量转换为封闭类型的实例变量。或者，如果还没有，您需要删除 final 修饰符，因为 final 变量只能分配一次。

**更新：**在 Java 8 中，引入了*有效最终*变量的概念（请参阅[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se8/html/jls-4.html#jls-4.12.4)）。然而，在这篇文章的第一个例子中，变量`a`被多次赋值，这阻止了它实际上是最终的。这意味着该示例仍然无法使用 Java 8 进行编译。（编译错误是“在封闭范围内定义的局部变量必须是最终的或有效的最终”）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-15T22:03:02.600

final 变量不能改变它的值（它类似于 C/C++ 中的 const）。

您可能希望使其成为类中的字段（当然没有 final 关键字），而不是函数内的局部变量。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-07-11T20:41:16.620

除了定义类成员变量，您还可以使用可变 int 来实现相同的目的。

```
void foo() {
    final MutableInt a = new MutableInt(3);
    new Runnable() {
        @Override
        public void run() {
           a.add(3);
        }
    };
} 
```

由于 MutableInt 不是原始类型（因此通过引用传递）并且可以重新分配这个工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-02-26T17:00:35.917

我最近遇到了类似的问题。在我的情况下，创建最终数组（或集合）并将我想在匿名类中更改的变量添加到这个数组更容易，如下所示。

```
 int a = 3;
   final int[] array = new int[1];
   array[0] = a;
   new Runnable() {
       @Override
       public void run() {
           array[0] += 3;
       }
   }; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-15T22:02:58.933

在不知道 的声明的情况下`seatno`，我建议在`mouseClicked()`方法中引入一个新变量，该变量*不是*最终的，并且与当前所做的工作相同`seatno`，因为该变量似乎只在该方法内部使用。

顺便说一句：大写你的类名（`data`应该是`Data`）。看起来会清晰很多。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-15T22:04:25.037

确保您的变量没有`final`修饰符。

```
//final, can be set only when the object is created.
private final String seatno;

//no final modifier, the value can be set every time you "want"
private String seatno; 
```

此外，要比较字符串，您应该使用`equals`：

```
if(anArray[x].equals("selected")) 
```

# zend-framework - Zend 框架和 PHP include('');

> ID：10166525
> 
> 赞同：1
> 
> 时间：2012-04-15T22:00:45.410
> 
> 标签：zend-framework

我想在我的网站主页上为用户提供一个注册部分，但我不希望它像我单击链接以访问控制器的所有其他功能一样。我希望表单与主页一起出现其他内容.. 在 PHP 中，我会通过创建函数来做到这一点，然后只需简单地 include('path/to/php/file.php')

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T22:39:34.340

你需要的是一个[视图助手](http://framework.zend.com/manual/en/zend.view.helpers.html)。Rob Allen 有一个关于它们的[很棒的教程。](http://akrabat.com/zend-framework/zend-framework-view-helpers/)我猜您正在搜索的是有关登录和身份验证的更多信息。Matthew Weier O'Phinney 也有一个非常好的[教程](http://mwop.net/blog/165-Login-and-Authentication-with-Zend-Framework.html)。Matthew 的教程也使用了视图助手，但解释得不够详细。因此，最好先阅读 Rob 的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T22:30:17.890

即使提交给另一个控制器，表单也可以在主页上。或者，如果您喜欢以这种方式工作，您可以创建一个独立的 PHP 脚本并将其包含在（可能从您的角度来看）。

# php - MYSQL号码排序

> ID：10166527
> 
> 赞同：-1
> 
> 时间：2012-04-15T22:00:51.383
> 
> 标签：php, mysql

我有一个网站通过 mysql 为 iOS 应用程序托管一些数据，它有一些升序和降序数字，它们显示为 1、11、12、13 等、2、20、21、22 等。

这是管理站点上的排序功能，应转换为 iOS 应用程序的 JSON 响应...

```
function sortPage($pageName,$sortBy,$sortOrder, $qry = '' ){
    $getParameters = "$pageName?sortBy=$sortBy&sortOrder=$sortOrder";   
    if($catID!=''){
        $getParameters .="&catID=$catID";
    }   

    if($extraParams!=''){
        $getParameters .='&'.$extraParams;
    }

    if( $qry != '') 
        $getParameters .= $qry ;

    $url ="<a href='$getParameters' style='text-decoration:none'>";
    if($sortOrder=='ASC'){  
        $url .="<img src='".HOST."images/up-arrow.gif' width='8' height='4' border='0' />";
    }else{
        $url .="<img src='".HOST."images/down-arrow.gif' width='8' height='4' border='0'/>";
    }
    $url .="</a>";
    return $url;
} 
```

我是否需要更改结构类型以使其不按这种方式排序？它目前是 int(11)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T22:37:16.233

从屏幕截图中我可以看到这不是一个`int(11)`列，而是一些字符串类型。

使用此查询，您可以欺骗 MySQL 以首先订购带有数字的那些，如果这是您想要的。当数字位于值的左侧时，这将起作用：

```
select * from sections
order by 0+name, name 
```

# asp.net - 将 asp.net 4.0 MVC 3 站点部署到 IIS 7 时出现 403 禁止

> ID：10166528
> 
> 赞同：3
> 
> 时间：2012-04-15T22:00:57.120
> 
> 标签：asp.net, asp.net-mvc, iis, iis-7

所以我有一个 EC2 实例正在运行，URL NoWeatherSurprises.com 我有 DNS 指向那里，我在 IIS 7 中设置了一个新站点并将其指向一个文件夹。我使用 Visual Studios Web Developer 2010 express 发布到这个文件夹。它现在有二进制文件等。

但是，如果我访问 NoWeatherSurprises.com，我会受到 IIS 7 屏幕的欢迎。我希望去我的应用程序如果我导航到[http://noweathersurprises.com/weather/](http://noweathersurprises.com/weather/) [天气是我在 wwwroot 下发布的文件夹] 我会收到 403 禁止。我不知道为什么，我猜它正在尝试执行目录列表或其他操作，而不是启动我的 MVC 应用程序。

所以总结了2个问题。

1.  它没有直接将域指向文件夹，我需要添加 /weather
2.  我得到一个 403 禁止，而不是我的家庭控制器的索引操作的结果。

我是 IIS 7 的新手，我一直在使用 IIS 6，设置它的麻烦少了很多，但我怀疑这是我自己的错，我只是错过了一些东西。提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T23:47:03.750

您为网站设置的物理路径是什么？

在 IIS 管理器的右侧有“基本设置”，您可以在其中看到其指向的位置。

检查后，确保您网站的应用程序池适用于框架的 v4.0。再次在 IIS 管理器中查看应用程序池下，找到您的网站并确保框架版本为 4.0（集成）

# c# - 如何编辑 WPF 应用程序的 MainWindow 构造函数？

> ID：10166531
> 
> 赞同：16
> 
> 时间：2012-04-15T22:01:25.583
> 
> 标签：c#, wpf

我的 mainWindow 需要从一个对象订阅一些事件。在创建 MainWindow 之前初始化该对象。我想通过它的构造函数将此对象传递给 mainWindow。

但是我不知道从哪里调用 MainWindow 构造函数。或者，我尝试通过 MainWindow 的成员函数传递对象，但是调用了`app.MainWindow`is `null`before `app.Run()`。After`app.Run()`被调用，代码在程序终止之前不会返回。

另一种可能性是将对象存储在静态类中并让 MainWindow 访问它，但这似乎不必要地复杂。

我意识到我可以在 MainWindow 构造函数中创建对象，但这意味着必须在其中放置许多其他代码，几乎是整个 Main 函数。

如何将此对象传递给我的 MainWindow？还是 MainWindow 构造函数旨在充当整个程序的“主”？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-15T22:10:31.940

你可以这样做。

首先进入`App.xaml`并删除此行`StartupUri="MainWindow.xaml"`以防止 WPF 自动显示`MainWindow`.

接下来右键单击`App.xaml`并选择`View Code`打开`App.xaml.cs`。在这个文件中，我们需要覆盖`OnStartup`事件。

```
protected override void OnStartup(StartupEventArgs e)
{
    base.OnStartup(e);
} 
```

然后我们可以在里面`OnStartup`实例化我们的`MainWindow`并显示它。

```
protected override void OnStartup(StartupEventArgs e)
{
    base.OnStartup(e);

    MainWindow mw = new MainWindow();
    mw.Show();
} 
```

`Constructor`现在我们可以使用它来加载我们可以用来传递更多信息的替代方案。

**应用程序.xaml.cs**

```
protected override void OnStartup(StartupEventArgs e)
{
    base.OnStartup(e);

    MainWindow mw = new MainWindow(5);
    mw.Show();
} 
```

**主窗口.xaml.cs**

```
public MainWindow()
{
    InitializeComponent();
}

public MainWindow(int number) : base()
{

} 
```

我更喜欢[链接](https://web.archive.org/web/20121222061528/http://en.csharp-online.net/Common_Type_System%E2%80%94Constructor_Chaining)我的[构造函数](https://web.archive.org/web/20121222061528/http://en.csharp-online.net/Common_Type_System%E2%80%94Constructor_Chaining)，但这当然不是任何要求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T22:04:06.213

您可以通过在 XAML 本身中声明对象来将对象设置为 MainWindow 的 DataContext。（例如，如果您尝试创建 ViewModel）。除此之外，WPF 将以您无法控制的方式创建实例。您可以将自己的代码放在 App 类中以创建和显示窗口，并从 App.xaml 中删除 StartupUri。

# css - 覆盖单个 YUI 对话框按钮样式

> ID：10166532
> 
> 赞同：0
> 
> 时间：2012-04-15T22:02:04.910
> 
> 标签：css, yui

我正在尝试覆盖单个 YUI 对话框中使用的按钮的样式。我创建了一个具有

```
#mydialog.yui-button {
 // style customization
} 
```

其中 mydialog 是对话框的 ID。这不起作用。有人可以解释我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T22:15:57.023

您需要更具体地使用选择器。如果 YUI 正在使用

```
#wrapper #main #mydialog.yui-button 
```

你将需要类似的东西

```
#wrapper #main a#mydialog.yui-button 
```

这样想

HTML 元素 = 1 类 = 10 个 ID = 100 内联样式 = 1000

```
#wrapper=100 + #main=100 + #mydialog=100 + .yui-button=10 = 310
#wrapper=100 + #main=100 + a=1 + #mydialog=100 + .yui-button=10 = 311 
```

如果这不起作用，您总是可以诉诸添加重要事项。请注意，使用重要而不是特异性被认为是不好的做法，如果有帮助，则不应这样做。

例子：

```
#mydialog.yui-button{
    color: #000 !important;   
} 
```

总是在最后一个属性值之后和分号之前。

最后，如果失败，您可能没有正确的类和/或 id。还要确保您的样式表正在加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T22:07:30.883

如果 YUI 按钮的 CSS 类不是“yui-button”，则您的规则不正确。假设您对按钮使用“按钮”元素而不是“输入”，正确的方法是：

```
#mydialog button {
    // style customization
} 
```

希望有帮助。

# excel - Excel宏用平均值替换缺失数据

> ID：10166535
> 
> 赞同：1
> 
> 时间：2012-04-15T22:02:29.437
> 
> 标签：excel, vba, average

我有一系列数据，来自类型范围变量中的 vba 提示。然后我试图通过这个范围，对于每个空单元格，用它的列的平均值替换它。

我可以很好地替换空单元格，但它得到了我正在努力的每一列的平均值。有没有简单的方法？

我不想为每一列做一个循环，为每一行做一个循环，然后使用 total/numberOfNonEmptyCells 计算它，因为这需要相当长的时间（而且我显然在这里做错了，因为我得到了错误的值)... 但我确信这不是唯一或正确的方法。

有没有什么说法：

> For Each Column
> Get column i from the range
> 获取该列的平均值。
> 把它放在一个数组中。

然后有一个循环通过用该值替换空单元格？

或者，更好的方法是将公式放入空单元格中，说
`= AVERAGE(Column from Range)`
我尝试过使用`AVERAGE(Range.Columns,1)`它但它不起作用，因为它是 Column 类型，我相信哪个平均值不起作用。

最简单的方法我将标记为答案。它需要使用宏，而不仅仅是手动输入公式，因为它适用于很多工作表上的大量数据。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T00:27:22.110

这将在每列中选择一个范围，用非空白单元格的平均值填充空白单元格。

它通过最小化循环中的单元格的访问来解决您的速度问题（在大约 5,000,000 个单元格上测试，大约需要 10 秒）（可能会在更复杂的代码中进一步改进）

保留任何公式

```
Sub FillInAverage()
    Dim rng As Range
    Dim col As Range
    Dim a As Variant
    Dim dat As Variant
    Dim i As Long

    Set rng = Selection
    For Each col In rng.Columns
        a = Application.WorksheetFunction.Average(col)
        dat = col.Formula
        For i = 1 To UBound(dat, 1)
            If Len(dat(i, 1)) = 0 Then
                dat(i, 1) = a
            End If
        Next
        col.Formula = dat
    Next
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T08:19:41.193

说，传递的范围是 abc

```
notBlanks = abc.Rows.Count - WorksheetFunction.CountBlank(abc.Columns(i))
avg = WorksheetFunction.Sum(abc.Columns(i)) / notBlanks 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T10:28:51.860

您可以按照您的要求使用公式仅对空单元格进行操作
*（注意 - 此方法假定单元格是真正的空单元格，即不包含评估为“”等的公式）。*

此代码平均 A1:A10000 中的所有非空白数字单元格，然后填充 A1:A10000 中的空白。然后 B1:B10000 以此类推

```
Sub FillBlanks()
Dim rng1 As Range
Dim rng2 As Range
Set rng1 = Range("A1:D10000")
On Error Resume Next
For Each rng2 In rng1.Columns
    rng2.SpecialCells(xlCellTypeBlanks).Value = Application.WorksheetFunction.Average(rng2.Columns(1))
Next
End Sub 
```

# c++ - C++ 多字符串抓取器（正则表达式）

> ID：10166549
> 
> 赞同：0
> 
> 时间：2012-04-15T22:04:49.150
> 
> 标签：c++, regex, string, boost, boost-regex

我对 boost::regex 有疑问，此解决方案仅适用于每场比赛的一个结果

```
boost::regex regex("id=\"(.*?)\""); // should I use this "id=\"(.*?)\"(.*?)<value>(.*?)</value>"?
boost::sregex_token_iterator iter(xml.begin(), xml.end(), regex, 1); // 1 because I just need text inside quotes
boost::sregex_token_iterator end; 
```

现在解析字符串

```
<x id="first">
<value>5</value>
</x>
<x id="second"> 
<value>56</value>  
</x>  
etc... 
```

现在的问题是如何同时解析 id 和 value 以在匹配循环中获取它们

```
for( ; iter != end; ++iter ) {
  std::string id(iter->first, iter->second);
  std::string value(?????);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T01:45:45.503

[Boost.PropertyTree](http://www.boost.org/doc/libs/1_49_0/doc/html/property_tree.html)包含一个 XML 解析器，您可以使用它来代替正则表达式：

```
#include <boost/property_tree/ptree.hpp>
#include <boost/property_tree/xml_parser.hpp>
#include <boost/foreach.hpp>
...    
using boost::property_tree::ptree;
ptree pt;
read_xml(istreamOrFilename, pt);
BOOST_FOREACH(ptree::value_type &v, pt) {
    std::string id(v.second.get<std::string>("<xmlattr>.id"));
    std::string value(v.second.get<std::string>("value").data());    
} 
```

# html - 从 2 个下拉列表中获取值

> ID：10166552
> 
> 赞同：0
> 
> 时间：2012-04-15T22:05:14.403
> 
> 标签：html, jsp

我有两个下拉列表（这是其中之一）

```
<div align="center"> 
  <form method="post">
    <select name="update">
      <option value="DOB">DOB</option>
      <option value="Address">Address</option>
      <option value="email">email</option>
      <option value="level">level</option>
    </select>
  </form>
</div> 
```

我想在另一页中检索每个选定的值。我有这个代码

```
String col = request.getParameter("update");
String updt = request.getParameter("user"); 
```

但我得到空值。有谁知道为什么？

编辑：我找到了一个临时解决方案。通过将这些值存储在会话属性中，我可以通过从其他页面调用该会话属性来请求它。必须有更好的方法来做到这一点。

# jquery - 如何禁用在输入字段中提交带有默认文本的表单？

> ID：10166558
> 
> 赞同：0
> 
> 时间：2012-04-15T22:05:39.863
> 
> 标签：jquery, watermark

***jQuery代码：***

```
(function($){
$.fn.jgtextdefault = function(settings){
var jElements = this;
var settings = $.extend({}, $.fn.jgtextdefault.defaults, settings);
return jElements.each(function(){
if($(jElements).is("input")){ jgTextDefault( $(jElements) ); }
});
function jgTextDefault(jInput){
if (jInput.val().length==0) jInput.val(settings.text);
jInput.focus(function () {
if (jInput.val()==settings.text) jInput.val('');
});
jInput.blur(function () {
if (jInput.val().length==0) jInput.val(settings.text);
});}};
$.fn.jgtextdefault.defaults = {
text: 'Default'
};
})(jQuery); 
```

***php代码：***

```
if (empty($releasedata['size'])) {
                $errors[] = '<li>'.Enter the size in GB.'</li>';
            }
if (empty($releasedata['releaseinfo'])) {
                $errors[] = '<li>'.Give more information.'</li>';
            }
        break; 
```

***html代码：***

```
 <script>
    $(document).ready(function(){

      $('#defaultText-releasename').jgtextdefault({'text':'This is the default text for release name'});
      $('#defaultText-releasesize').jgtextdefault({'text':'This is the default text for release size'});

    });
  </script> 
```

***Html（输入字段）：***

```
<input id="defaultText-releasename" type="text" name="releasename" value="$releasedata[releasename]" /> 
```

**我的问题：** 在输入字段中显示默认文本并隐藏焦点一切都很好。但问题是，当我提交表单时（如果用户/我没有在输入字段中输入任何内容，那么它将输入字段值作为默认文本。

由于您可以从上面的 php 代码中看到，如果用户没有在输入字段中输入任何内容，我想显示错误消息。所以我不希望表单与输入字段中的默认文本一起提交......

有人可以帮我解决这个问题吗？

在此先感谢和问候...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T22:42:46.730

你可以简单地使用：

```
$('#your_form_id').submit(function(){
     if(validate_form()){
         return true;
     }else{
       return false;
     }
}); 
```

验证您的表单输入（这里，我使用我自己的函数`validate_form()`，您可以根据需要执行它以检查文本框的值），如果一切正常，则函数`validate_form()`返回 true，表单将提交；否则，from 将不会提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:15:50.530

好的，我用另一个具有“**在提交表单时清除预定义文本**”功能的 jQuery 代码解决了我的问题......

这可能对其他一些用户也有用......所以这里是代码：

```
$(document).ready(function(){
  $('.default').each(function(){
    var defaultVal = $(this).attr('title');
    $(this).focus(function(){
      if ($(this).val() == defaultVal){
        $(this).removeClass('active').val('');
      }
    })
    .blur(function(){
      if ($(this).val() == ''){
        $(this).addClass('active').val(defaultVal);
      }
    })
    .blur().addClass('active');
  });
  $('form').submit(function(){
    $('.default').each(function(){
      var defaultVal = $(this).attr('title');
      if ($(this).val() == defaultVal){
        $(this).val('');
      }
    });
  });
}); 
```

HTML 将是：

```
<input type="text" name="text1" value="" class="default" title="Default Text 1" /> 
```

所有学分归于：[DesignChemical](http://www.designchemical.com/blog/index.php/jquery/add-default-text-to-form-fields-using-jquery/) ...

# javascript - 无法在事件中访问对象的属性

> ID：10166561
> 
> 赞同：-1
> 
> 时间：2012-04-15T22:05:51.730
> 
> 标签：javascript, scope

我有这样的代码：

```
var Obj = {
  el : document.getElementById("elementId"),

  doSomething : function(){ this.el.property = "value" }
};

Obj.el.addEventListener('click', Obj.doSomething); 
```

`this.el` 但是当点击事件被触发时元素是未定义的？是什么导致这种情况发生？

注意：我不知道如何在这个编辑器的代码中换行，这就是为什么它在一行中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T22:11:28.260

在 JavaScript 中（与大多数其他具有相似语法的语言不同），`this`完全由函数的调用*方式*定义，而不是在哪里定义。在您的函数中调用事件处理程序的方式`this`并不引用您的对象。

您可以通过三种方式更正它：

1.  如果您的目标是[支持 ES5](http://es5.github.com/)的浏览器或包含 ES5 “shim”，请使用[`Function#bind`](http://es5.github.com/#x15.3.4.5)：

    ```
    var Obj = {
      el : document.getElementById,

      doSomething : function(){ this.el.property = "value" }
    };

    Obj.el.addEventListener('click', Obj.doSomething.bind(Obj)); 
    ```

2.  否则，使用[闭包](http://blog.niftysnippets.org/2008/02/closures-are-not-complicated.html)：

    ```
    var Obj = {
      el : document.getElementById,

      doSomething : function(){ this.el.property = "value" }
    };

    Obj.el.addEventListener('click', function(event) {
        return Obj.doSomething(event);
    }); 
    ```

3.  正如 RobG 在评论中指出的那样，因为您只有**一个** `Obj`对象（而不是具有构造函数或根据需要创建多个对象的东西），您可以只使用其变量 ( `Obj`) 来引用该对象，而不是`this`：

    ```
    var Obj = {
      el : document.getElementById,

      // Obj instead of this ---v
      doSomething : function(){ Obj.el.property = "value" }
    };

    Obj.el.addEventListener('click', Obj.doSomething); 
    ```

    仅当对象在其定义的范围内是一次性的时才有效（对于您的`Obj`示例来说是这样）。如果您对它的唯一引用是`this`（例如，您没有`Obj`），那么您不能这样做并且需要前两个选项之一。

更多的：

*   [*神话方法*](http://blog.niftysnippets.org/2008/03/mythical-methods.html)
*   [*你必须记住`this`*](http://blog.niftysnippets.org/2008/04/you-must-remember-this.html)

* * *

但是请注意，您的`el`财产是可疑的。您已将其定义为

```
el : document.getElementById, 
```

...这意味着`el`现在指向*函数* `getElementById`。这可能不是你的本意。大概您的意思`el`是指您*通过* `getElementById`检索到的 DOM 元素，例如：

```
el : document.getElementById("someIdValue"), 
```

更多[在这里](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-getElBId)。

# ruby-on-rails - Ruby on Rails - 批量分配问题

> ID：10166565
> 
> 赞同：0
> 
> 时间：2012-04-15T22:06:12.903
> 
> 标签：ruby-on-rails, associations, mass-assignment

初学者正在运行 rails 3.2.2，Ruby 1.8.7

我有 2 个模型，一个酒店（由脚手架创建）和设施（带有空控制器）。我能够设置 1 对 1 关联和 siplaying 字段，但似乎无法将其插入数据库。我越来越：

```
ActiveModel::MassAssignmentSecurity::Error in HotelsController#create
Can't mass-assign protected attributes: @hotel
app/controllers/hotels_controller.rb:48:in 'new'
app/controllers/hotels_controller.rb:48:in 'create' 
```

--> 我的模型是：

```
class Hotel < ActiveRecord::Base
  has_one :facility, :dependent => :destroy
  accepts_nested_attributes_for :facility, :allow_destroy => true
  attr_accessible :name, :rating, :recommended, :facility_attributes
end

class Facility < ActiveRecord::Base
  belongs_to :hotel
  attr_accessible :concierge, :hotel_id, :room24h
end 
```

正如我所说，我的设施控制器是空的（它可以是，对吧？因为我与 Hotel 关联？）我的 hotel_controller 是创建脚手架后的默认值，仅添加了 1 行：

```
 def new
    @hotel = Hotel.new
    @hotel.build_facility  #-->I added this only, I searched and all i found was this

    respond_to do |format|
      format.html # new.html.erb
      format.json { render :json => @hotel }
    end
  end

 def create
    @hotel = Hotel.new(params[:hotel])

    respond_to do |format|
      if @hotel.save
        format.html { redirect_to @hotel, :notice => 'Hotel was successfully created.' }
        format.json { render :json => @hotel, :status => :created, :location => @hotel }
      else
        format.html { render :action => "new" }
        format.json { render :json => @hotel.errors, :status => :unprocessable_entity }
      end
    end
  end 
```

最后，我的表单 html 是：

```
<%= form_for(@hotel) do |f| %>

<div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>
  <div class="field">
    <%= f.label :rating %><br />
    <%= f.number_field :rating %>
  </div>
  <div class="field">
    <%= f.label :recommended %><br />
    <%= f.check_box :recommended %>
  </div>
  <br />

    <h2>Hotel Facilities</h2>

    <%= f.fields_for :@hotel do |facility_fields| %>
 <div class="field">
    <%= facility_fields.label :room24h, "24h Room Service:" %>
    <%= facility_fields.check_box :room24h %>
  </div>
 <div class="field">
    <%= facility_fields.label "Concierge:" %>
    <%= facility_fields.check_box :concierge %>
  </div>
<%end%>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

创建时遇到的错误是问题的开始。我应该为hotel_controller 添加更多代码吗？会是什么呢？另外，我还需要为编辑/更新做哪些代码？

在此先感谢，对不起，我是 RoR 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T22:29:06.710

改变

```
attr_accessible :concierge, :hotel_id, :room24h 
```

至

```
attr_accessible :concierge, :hotel_id, :room24h, :hotel 
```

在`Facility`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:56:00.763

尽管我已经过去了很多时间，但我还是更改了与 HABTM 的关系，更改了模型和控制器并且它起作用了。我相信这是因为它是一个 has_one 关系。它需要是一个NN关系。

# java - Java中的processbuilder运行一系列命令

> ID：10166566
> 
> 赞同：-5
> 
> 时间：2012-04-15T22:06:22.297
> 
> 标签：java, processbuilder

我可以使用相同的 ProcessBuilder 对象在 Java 中运行一系列命令，还是应该为每个命令创建一个新的 ProcessBuilder 对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T22:11:33.230

如果您可以花时间阅读[文档](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)，您就会知道这一点。A`ProcessBuilder`可以启动多个进程。（有点像有一个`ProcessBuilder`。）

# css - 简单的 CSS 格式问题

> ID：10166568
> 
> 赞同：1
> 
> 时间：2012-04-15T22:06:32.640
> 
> 标签：css

我创建了一个简单的页面，用于通过 jquery/ajax 处理三个表单。一切正常，但不知何故我似乎无法调试这个简单的 CSS 问题。我有一个父 DIV，里面有三个 DIV，每个 DIV 都包含一个表单和提交表单时的相关成功消息。如果有人可以看看它，我将不胜感激。你可以在这里找到它（[链接](http://thenally.com/work/form-test)）。样式表可以通过源码看到，真的很简单。我在下面包含了页面架构的要点和我编写的一些 CSS。

**HTML**

```
<div id="wrap">

     <div class="form-container">
          <form></form>
          <div class="success">
               <p>Form Success!</p>
          </div>
     </div>

     <div class="form-container">
          <form></form>
          <div class="success">
               <p>Form Success!</p>
          </div>
     </div>

     <div class="form-container">
          <form></form>
          <div class="success">
               <p>Form Success!</p>
          </div>
     </div>

</div> 
```

**CSS**

```
#wrap{
    width:900px;
    height:450px;
    margin:25px;
    padding:0;
    }

div.form-container {
    background:#9c9;
    width:300px;
    height:100%;
    float:left;
    position:relative;
    padding:0;
    }

div.success{
    background:#ffa07a;
    padding:0;
    margin:0;
    width:100%;
    height:100%;
}

form {
    background:#999;
    float:left;
    position:relative;
    padding:10px;
    } 
```

您会注意到第二个和第三个表单容器的顶部有 19px 的边距，但这在 CSS 中的任何地方都没有体现。我一直试图调试这个几个小时无济于事。我几乎不好意思寻求帮助，因为我知道这一定很简单。我已经移动了几乎所有元素以找到问题，但没有任何改变！我可以使用负边距将两个容器拉起，但我认为我不需要这种修复。

谢谢参观，

麦克风

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T22:07:54.017

这可能不是唯一的问题，但是您有一个成功 div 的 id，但您的 css 正在调用一个成功类。

`<div id="success">`

你的CSS是

```
div.success{
    background:#ffa07a;
    padding:0;
    margin:0;
    width:100%;
    height:100%;
} 
```

将您的 HTML 更改为

`<div class="success">`

**编辑：**

在您的文本页面中，您在`BR`s 之后有`div`s。删除这些和所有内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T22:12:01.147

我认为`<br>`每个标签之间的标签`<div class="form-container">`是造成边距的原因。

# database - 如何在 WCF 服务中同步数据库访问？

> ID：10166571
> 
> 赞同：4
> 
> 时间：2012-04-15T22:07:29.120
> 
> 标签：database, wcf, concurrency

我以前使用过 WCF 服务，现在我有一个新项目即将推出。我仍处于设计阶段，我想知道处理以下场景的最佳方法是什么。

我将有多个客户端同时连接到我的 WCF 服务，在服务上触发不同的方法（操作合同）：

**A.**某些触发的方法只是纯粹的“读取”方法（例如 GetListOfCustomers）。

**B.**一些触发的方法是复杂的“读取”方法（例如 GetAllProductsByCustomerId）。这种方法需要从数据库中获取客户，检查他的东西，然后获取他购买的所有产品。（意思是，此方法中有 2 次对数据库的调用）。

**C.**有些是“Write”方法（例如“RemoveCustomer”或“SetProductOutOfStock”）。

我的问题是 - 如何同步所有这些调用，以免出现并发问题？

我*不*希望整个服务串行处理调用，因为它会损害客户端的性能（某些调用可能需要 3-4 秒才能处理）。那么我的解决方案是什么？

对具有“多个”线程的所有客户端使用“单个”实例，然后使用锁定对象？这不会导致串行吗？

或者我是否需要一个不同的锁定对象用于“读取”和不同的锁定对象用于“写入”？

还是我需要为“写”功能加锁，而为“读”功能需要其他东西？

这是我在 StackOverflow 上的第一个问题。感谢任何可以提供帮助的人！

更新：我将使用“Linq-To-SQL”作为我的 ORM。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T22:39:06.107

您不必担心数据一致性问题，也不必担心执行数据库查询时的并发性。如果我正确理解了您的情况，那么您需要确保的是在执行一系列您希望“原子”的数据库查询时始终如一地使用事务。我将尝试用一个例子来解释它：

1.  从数据库中获取所有客户。
2.  对于每个客户，执行更新一些相关数据的查询。

在这种情况下，您不希望发生的情况是，在查询 from返回**之后**和所有查询 from完成**之前，另一个查询更改了数据。**例如，如果其中一位客户同时被删除，则更新相关数据毫无意义——这甚至可能导致一些错误。`1`**`2`**

 **所以你需要做的就是把`BEGIN TRANSACTION`之前`1`和`COMMIT`之后的东西放在一起`2`。查找您正在使用的 SQL 方言的确切语法。

基本上，这将确保您正在使用的数据不会改变。事实上，它会被你的交易锁定；并且所有其他可能使用相同数据的查询都在等待您的事务完成。数据库智能地执行这种锁定，总是试图锁定尽可能少的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T08:24:32.570

> 我的问题是 - 如何同步所有这些调用，以免出现并发问题？

为什么你需要同步任何东西？DBMS 可以很好地处理同步。当然，如果你*知道*你会有很多写操作会因为锁而降低你的读性能，那么你将不得不在架构级别上对此进行规划，但这与 WCF 没有太大关系。在这种情况下，正如休所写的那样，CQRS**可能**是一个合适的选择，尽管没有手头的规范很难说。

> 我不希望整个服务串行处理调用，因为它会损害客户端的性能（某些调用可能需要 3-4 秒才能处理）。那么我的解决方案是什么？

如果可以的话，然后使用 PerCall 实例化和单并发或多并发。[在这里](http://www.codeproject.com/Articles/89858/WCF-Concurrency-Single-Multiple-and-Reentrant-and)查看有关实例化/并发组合的详细信息。

> 对具有“多个”线程的所有客户端使用“单个”实例，然后使用锁定对象？这不会导致串行吗？

单实例化会给您带来并发问题，请参阅我上面链接的文章。如果您需要 Singleton 服务，它最有用。

* * *

**更新**

回答您的评论：恐怕我仍然不明白您希望在哪里遇到并发问题。如果您担心 WCF 服务，请避免使用 Single instancing：最具可扩展性的选项是 PerCall/Multiple。

如果您问自己是否需要考虑 CQRS，请随时阅读我在另一条评论中链接[的 Udi Dahan 的文章。](http://www.udidahan.com/2009/12/09/clarified-cqrs/)但请记住，CQRS 需要一些时间来理解并增加您可能需要或可能不需要的项目的复杂性。

我建议不要无用地过度复杂化您的架构，对我来说，为您的服务正确配置实例化/并发性就足够了。如果您不确定，请编写一些原型来伪造系统的预期负载。更安全然后抱歉，特别是如果它是一个长期存在的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T07:26:37.140

您正在为 Web 设计，因此您需要拥抱并发，没有出路。在我看来，使用锁和所有东西并不是在网络上工作的好方法。并发访问即将发生，您需要考虑如何处理并发错误而不是防止并发问题。任何基于 Web 构建的并发控制机制的使用都是有限的，并且很难正确构建。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T07:37:44.993

我建议您阅读有关[CQRS](http://en.wikipedia.org/wiki/CQRS)的内容，这是一种架构模式，可以在某种程度上解决您面临的挑战。

作为您的情况的示例解决方案，下图是可以满足您要求的 CQRS 架构。

![在此处输入图像描述](../Images/3522322db6406253da3529a27ba97bcd.png)

如果您需要进一步的解释，我很乐意提供。

**更新**

主要原则是将数据库读取和写入分开到不同的数据库中。

然后您使用复制来确保您的读取数据库是最新的。

您还可以通过将两个数据库合二为一，将两个服务合二为一来实现上述架构。但是，您最初的问题是基于您的数据库使用模式存在冲突这一事实而引起的数据库争用。

所以这就是我提出 CQRS 作为解决方案的原因——数据库的写入端与读取端分离。读取端可以针对选择进行优化（甚至可以针对访问速度进行非规范化）。

这意味着您将不会遇到与通过同一接口进行读取和写入操作时相同的争用问题 - 这是您当前的方法。

此外，您不需要通过服务公开您的读取操作 - 简单的 ADO 就可以了，服务端点只会引入延迟。

当您从读取模型中读取数据以及数据库写入服务更新数据模型时，您仍然可以使用 linq2sql。**

# iphone - 用相机拍摄的照片不包含任何 ALAsset 元数据

> ID：10166575
> 
> 赞同：8
> 
> 时间：2012-04-15T22:07:44.330
> 
> 标签：iphone, objective-c, gps, uiimagepickercontroller, alassetslibrary

最奇怪的事情正在发生。我有一张操作表，用户可以选择用相机拍照或从相机胶卷中选择一张。在 UIImagePicker 从选择中返回后，我使用 ALAssetsLibrary 来确定照片中嵌入的 GPS 信息。从相机胶卷中选择一张照片效果很好，我可以检索 GPS 信息。但是，用相机拍照绝对没有 GPS 信息，事实上我根本没有元数据。有谁知道我在这里做错了什么？

下面的代码：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{    
    NSString *mediaType = [info objectForKey:UIImagePickerControllerMediaType];
    if([mediaType isEqualToString:(__bridge NSString *)kUTTypeImage])
    {        
        void (^ALAssetsLibraryAssetForURLResultBlock)(ALAsset *) = ^(ALAsset *asset)
        {
            // get images metadata
            NSDictionary *metadata = asset.defaultRepresentation.metadata;
            NSLog(@"Image Meta Data: %@",metadata);

            // get coords 
            CLLocation *location = [asset valueForProperty:ALAssetPropertyLocation];
            NSLog(@"coordLat: %f , coordLon: %f", location.coordinate.latitude, location.coordinate.longitude);

            // do more here - rest of code snipped to keep this question short

    };
    NSURL *assetURL = [info objectForKey:UIImagePickerControllerReferenceURL];
    ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
    [library assetForURL:assetURL
             resultBlock:ALAssetsLibraryAssetForURLResultBlock
            failureBlock:^(NSError *error) 
            {
                // handle error 
            }];

    // rest of code snipped to keep this question short 
```

正如我所解释的，使用相机时会输出以下内容。

```
2012-04-15 17:58:28.032 MyApp[511:707] Image Meta Data: (null)
2012-04-15 17:58:28.041 MyApp[511:707] coordLat: 0.000000 , coordLon: 0.000000 
```

但是，如果我选择现有照片，或者退出应用程序，用相机拍摄一张新照片，然后返回应用程序并从相机胶卷中选择该照片，我会从 NSLog 获得以下输出。

```
2012-04-15 17:57:03.286 MyApp[511:707] Image Meta Data: {
ColorModel = RGB;
DPIHeight = 72;
DPIWidth = 72;
Depth = 8;
Orientation = 6;
PixelHeight = 1936;
PixelWidth = 2592;
"{Exif}" =     {
    ApertureValue = "2.970854";
    BrightnessValue = "2.886456";
    ColorSpace = 1;
    ComponentsConfiguration =         (
        1,
        2,
        3,
        0
    );
    DateTimeDigitized = "2012:04:15 17:24:02";
    DateTimeOriginal = "2012:04:15 17:24:02";
    ExifVersion =         (
        2,
        2,
        1
    );
    ExposureMode = 0;
    ExposureProgram = 2;
    ExposureTime = "0.06666667";
    FNumber = "2.8";
    Flash = 24;
    FlashPixVersion =         (
        1,
        0
    );
    FocalLength = "3.85";
    ISOSpeedRatings =         (
        80
    );
    MeteringMode = 5;
    PixelXDimension = 2592;
    PixelYDimension = 1936;
    SceneCaptureType = 0;
    SensingMethod = 2;
    Sharpness = 2;
    ShutterSpeedValue = "3.9112";
    SubjectArea =         (
        1295,
        967,
        699,
        696
    );
    WhiteBalance = 0;
};
"{GPS}" =     {
    Altitude = "14.9281";
    AltitudeRef = 0;
    ImgDirection = "107.4554";
    ImgDirectionRef = T;
    Latitude = "32.7366666666667";
    LatitudeRef = N;
    Longitude = "71.679";
    LongitudeRef = W;
    TimeStamp = "21:26:20.00";
};
"{TIFF}" =     {
    DateTime = "2012:04:15 17:24:02";
    Make = Apple;
    Model = "iPhone 4";
    Orientation = 6;
    ResolutionUnit = 2;
    Software = "5.0.1";
    XResolution = 72;
    YResolution = 72;
    "_YCbCrPositioning" = 1;
};
}
2012-04-15 17:57:03.302 MyApp[511:707] coordLat: 32.7366666666667 , coordLon: -71.679 
```

PS - 我正在使用带有 ARC 的 xCode 4.3

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-27T05:08:51.677

在`- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info`

保存照片时试试这个

```
 ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
    [library writeImageToSavedPhotosAlbum:image.CGImage
                                 metadata:[info objectForKey:UIImagePickerControllerMediaMetadata]
                          completionBlock:^(NSURL *assetURL, NSError *error) {
        NSLog(@"assetURL %@", assetURL);
    }]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T06:56:28.647

@Thanh-Cong Vo 关于如何将图像保存到相册是正确的。并查看有关将图像保存到相册的[Apples 文档](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIImagePickerControllerDelegate_Protocol/UIImagePickerControllerDelegate/UIImagePickerControllerDelegate.html#//apple_ref/doc/uid/TP40007069-CH3-DontLinkElementID_1)

> 要将静止图像保存到用户的相机胶卷相册，请 从**[imagePickerController:didFinishPickingMediaWithInfo:](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIImagePickerControllerDelegate_Protocol/UIImagePickerControllerDelegate/UIImagePickerControllerDelegate.html#//apple_ref/occ/intfm/UIImagePickerControllerDelegate/imagePickerController%3adidFinishPickingMediaWithInfo%3a)**方法的主体中调用**[UIImageWriteToSavedPhotosAlbum](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/c/func/UIImageWriteToSavedPhotosAlbum)**函数 。要将电影保存到用户的相机胶卷相册，请改为调用 **[UISaveVideoAtPathToSavedPhotosAlbum](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/doc/uid/TP40006894-CH3-SW41)**函数。[UIKit Function Reference](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/doc/uid/TP40006894)中描述的这些函数**仅保存图像或电影；****他们不保存元数据。**
> 
>  **从 iOS 4.0 开始，您可以将静止图像元数据与静止图像一起保存到相机胶卷。为此，请使用 Assets Library 框架的 **[writeImageToSavedPhotosAlbum:metadata:completionBlock:](http://developer.apple.com/library/ios/DOCUMENTATION/AssetsLibrary/Reference/ALAssetsLibrary_Class/Reference/Reference.html#//apple_ref/occ/instm/ALAssetsLibrary/writeImageToSavedPhotosAlbum%3ametadata%3acompletionBlock%3a)**方法。请参阅 [UIImagePickerControllerMediaMetadata](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIImagePickerControllerDelegate_Protocol/UIImagePickerControllerDelegate/UIImagePickerControllerDelegate.html#//apple_ref/c/data/UIImagePickerControllerMediaMetadata)键的描述。**

# matlab - MATLAB NaN 替换

> ID：10166581
> 
> 赞同：2
> 
> 时间：2012-04-15T22:08:43.237
> 
> 标签：matlab, correlation

当我在两个矩阵之间执行相关性时，我得到了 NaN，但我想忽略它们，我在一些 MATLAB 论坛上读到，用 nanmean 获得的平均值替换 NaN 是一个很好的替代品。所以我执行了以下代码，但我的结果仍然是 NaN。为什么会这样？

```
cor1nan=nanmean(correlations1);
mod1cor=isnan(correlations1);

for z=1:264
for a=1:264

 if(mod1cor(a,z)==1)
     correlations1(a,z)=cor1nan(z);
 end
 end
 end 
```

刚刚注意到 cor1nan 中的一些值本身就是 NaN .. 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T22:18:03.267

如果您的列全部为`NaN`，`nanmean`则将保留它，就`NaN`好像我正确阅读了它一样。然后你下面的循环将替换为 a `NaN`，从而保留它们。

如何解决它的建议如下。将您的代码替换为：

```
 cor1nan=nanmean(correlations1);
  corAllnan = nanmean(cor1nan);
  cor1nan(isnan(cor1nan)) = corAllmean;
  mod1cor = isnan(correlations1);

  for z = 1:size(correlations1,2),
         correlations1(isnan(correlations1(:,z)),z) = cor1nan(z);
  end 
```

这将用非值的平均值替换`NaN`s in`cor1nan``NaN``cor1nan`

# ruby - 安装 Ruby 1.9.3

> ID：10166583
> 
> 赞同：0
> 
> 时间：2012-04-15T22:09:05.013
> 
> 标签：ruby, macos, rvm

规格：XCode 4.3.2、Mac OS X 10.7.3、RVM 1.12.3（稳定）。

我真的需要这方面的帮助，所以任何事情都值得赞赏。

我安装了 Ruby 1.8.7，然后需要更新到 1.9.3，所以我找到了 RVM。我安装了 RVM，然后尝试更新，结果如下：

```
rvm install 1.9.3
Fetching yaml-0.1.4.tar.gz to /Users/myname/.rvm/archives
Extracting yaml-0.1.4.tar.gz to /Users/myname/.rvm/src
Error running 'tar xmzf /Users/myname/.rvm/archives/yaml-0.1.4.tar.gz -C /Users/myname/.rvm/src ', please read /Users/myname/.rvm/log/ruby-1.9.3-p125/yaml/extract.log
Configuring yaml in /Users/myname/.rvm/src/yaml-0.1.4.
Error running ' ./configure
    --prefix="/Users/myname/.rvm/usr" ', please read /Users/myname/.rvm/log/ruby-1.9.3-p125/yaml/configure.log Compiling yaml in /Users/myname/.rvm/src/yaml-0.1.4.
Error running 'make ', please read /Users/myname/.rvm/log/ruby-1.9.3-p125/yaml/make.log

Database file /Users/myname/.rvm/config/packages does not exist.

Installing Ruby from source to: /Users/myname/.rvm/rubies/ruby-1.9.3-p125,
this may take a while depending on your cpu(s)...

ruby-1.9.3-p125
- #fetching ruby-1.9.3-p125
- #extracted to /Users/myname/.rvm/src/ruby-1.9.3-p125 (already extracted) ruby-1.9.3-p125
- #configuring Error running ' ./configure
    --prefix=/Users/myname/.rvm/rubies/ruby-1.9.3-p125 --enable-shared --disable-install-doc --with-libyaml --with-opt-dir=/Users/myname/.rvm/usr ',

please read /Users/myname/.rvm/log/ruby-1.9.3-p125/configure.log
There has been an error while running configure. Halting the installation.
ls: /Users/myname/.rvm/rubies/*/bin/ruby: No such file or directory 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T10:45:03.440

请安装[osx-gcc-installer 10.7](https://github.com/downloads/kennethreitz/osx-gcc-installer/GCC-10.7-v2.pkg)

阅读并遵守要求：

```
rvm requirements 
```

最后重新安装红宝石：

```
rvm reinstall 1.9.3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:06:14.600

你应该关注这个博客并安装任何版本的 ruby

```
http://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T10:49:15.683

我强烈建议使用[rbenv](https://github.com/sstephenson/rbenv)和 ruby​​-build 来管理你的红宝石。

它比 rvm 简单得多，也没有那么神奇。

# sensors - 控制 Galaxy SII 上的接近传感器

> ID：10166585
> 
> 赞同：0
> 
> 时间：2012-04-15T22:09:15.607
> 
> 标签：sensors, proximity, infrared, remote-control

三星 Galaxy S II 手机上的接近传感器由红外 LED 和 IR 传感器组成。是否可以以任意方式控制接近传感器的红外 LED（做电视遥控器或通过 IRDA 传输某些东西）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:05:38.550

不。

光/接近传感器硬件 IC 不提供任何控制来调制 IR 信号。它只是以恒定频率投射红外信号。

# r - 如何将多个数据框的列名设置为小写？

> ID：10166586
> 
> 赞同：8
> 
> 时间：2012-04-15T22:09:15.747
> 
> 标签：r, apply

我有一组具有相同列标题的数据框，除了一些列名是大写的而一些是小写的。我想将所有列名转换为小写，这样我就可以制作一个包含所有内容的大数据框。

我似乎无法`colnames()`在任何循环中工作或应用我写的东西。和：

```
#create dfs
df1<-data.frame("A" = 1:10, "B" = 2:11)
df2<-data.frame("a" = 3:12, "b" = 4:13)
df3<-data.frame("a" = 5:14, "b" = 6:15)
#I have many more dfs in my actual data

#make list of dfs, define lowercasing function, apply across df list
dfs<-ls(pattern = "df")
lowercols<-function(df){colnames(get(df))<-tolower(colnames(get(df)))}
lapply(dfs, lowercols) 
```

我收到以下错误：

```
Error in colnames(get(df)) <- tolower(colnames(get(df))) : 
  could not find function "get<-" 
```

如何将所有数据框更改为小写列名？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-15T22:18:56.497

以下应该有效：

```
dfList <- lapply(lapply(dfs,get),function(x) {colnames(x) <- tolower(colnames(x));x}) 
```

像这样的问题通常源于您没有将所有数据帧放在一个数据结构中，然后被迫使用一些尴尬的东西，比如`get`.

并不是在我的代码中，我*首先*`lapply`使用并`get`实际创建一个数据框列表，然后更改它们的列名。

 *您还应该知道，您的 lowercols 函数与 R 类似。R 函数通常不会以不返回任何内容但有副作用的方式调用。如果您尝试以这种方式编写函数（这是可能的），您可能会让您的生活变得困难并遇到范围问题。请注意，在我的第二个中，`lapply`我明确返回了修改后的数据框。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-15T22:31:47.923

@joran 的回答在风格和“你可能想以不同的方式做这件事”的信息上都与我的回答有很大的重叠。然而，本着“给人一条鱼，你喂他一天；给他一根锋利的棍子，他可以戳自己的眼睛”……

这是一个以（您认为）您想要的方式执行您想要的功能的功能：

```
dfnames <- ls(pattern = "df[0-9]+")  ## avoid 'dfnames' itself
lowercolnames <- function(df) {
    x <- get(df)
    colnames(x) <- tolower(colnames(x))
    ## normally I would use parent.frame(), but here we
    ##  have to go back TWO frames if this is used within lapply()
    assign(df,x,sys.frame(-2))
    ## OR (maybe simpler)
    ## assign(df,x,envir=.GlobalEnv)

    NULL
} 
```

以下是两个小写列名并返回结果的替代函数：

```
lowerCN2 <- function(x) {
    colnames(x) <- tolower(colnames(x))
    x
} 
```

为了完整起见，我将`plyr::rename`这里包括在内，尽管在这种情况下，它实际上比它的价值更麻烦。

```
lowerCN3 <- function(x) {
    plyr::rename(x,structure(tolower(colnames(x)),
                             names=colnames(x)))
}

dflist <- lapply(dfnames,get)
dflist <- lapply(dflist,lowerCN2)
dflist <- lapply(dflist,lowerCN3) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T01:19:22.063

这并不能直接回答您的问题，但可能会解决您要解决的问题；您可以通过以下方式合并不同名称的 data.frames：

```
df1 <- data.frame("A" = 1:10, "B" = 2:11, x=letters[1:10])
df2 <- data.frame("a" = 3:12, "b" = 4:13, y=LETTERS[1:10])
merge(df1, df2, by.x=c("A","B"), by.y=c("a","b"), all=TRUE) 
```*

# php - 使用默认域创建的 cookie 无法删除具有显式域的 cookie

> ID：10166587
> 
> 赞同：1
> 
> 时间：2012-04-15T22:09:26.497
> 
> 标签：php, google-chrome, cookies

我有一个网站，我们称它为`www.example.com`在那个网站上有两个页面。一个人创建一个这样的cookie：

```
setcookie('daCookie', 'boo', 2000000000, '/', '', false, true); 
```

另一个尝试像这样删除它：

```
setcookie('daCookie', '', 1, '/', 'www.example.com', false, true);
setcookie('daCookie', '', 1, '/', '.www.example.com', false, true); 
```

现在，我**知道**第一个脚本是在`www.example.com`. 如果我使用浏览器（在本例中为 Google Chrome）的开发工具，我可以看到 cookie 的域是`www.example.com`. 但是，第二次调用不会删除它。如果我将其更改为空域：

```
setcookie('daCookie', '', 1, '/', '', false, true); 
```

然后它工作。但我真的很想明确指定域。为什么它不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T22:20:02.027

我相信在第二次调用（显式传递域名）中，浏览器可能会在值前面加上一个点（。），因为它是一个域。这就是为什么该调用不会删除之前设置的 cookie（不传递 $domain 参数。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T22:30:17.350

从 php 手册中，所有示例（显式传递域）都使用：

```
setcookie("TestCookie", $value, time()+3600, "/~rasmus/", "example.com", 1); 
```

在显式传递域参数的情况下，它看起来好像最好忽略“www”。

关于域参数，它也有这样的说法：

> cookie 可用的域。将域设置为“www.example.com”将使 cookie 在 www 子域和更高的子域中可用。可用于较低域的 Cookie，例如“example.com”，将可用于较高的子域，例如“www.example.com”。仍在实施已弃用的 » RFC 2109 的旧浏览器可能需要前导 . 匹配所有子域。

# c# - 具有 24 小时时间格式的 gridcontrol syncfusion

> ID：10166588
> 
> 赞同：1
> 
> 时间：2012-04-15T22:09:35.207
> 
> 标签：c#, grid, syncfusion

抱歉，这个基本问题。我有一个同步网格控件，它在下午 12 点显示时间格式，上午格式。基础数据源具有日期时间格式。我应该使用哪些事件将日期显示更改为 24 小时格式 Sun

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T11:28:06.287

以下设置将使网格单元格具有 24 小时格式的日期时间值。

```
 this.gridControl1[2, 2].CellValueType = typeof(DateTime);
  this.gridControl1[2, 2].CellValue = new DateTime(2012, 5, 23, 16, 34, 48);
  this.gridControl1[2, 2].Format = "dd/mm/yy HH:mm:ss"; //Output is: 23/05/12 16:34:48 
```

# xml - 用asp解析svg xml

> ID：10166589
> 
> 赞同：4
> 
> 时间：2012-04-15T22:09:41.083
> 
> 标签：xml, asp-classic, svg, xml-parsing

我需要从经典asp上的svg文件中获取一个属性。但是我的代码不起作用。任何想法？

来自字体标签的 id 属性。

```
<font id="LetterGothicStdRegular" horiz-adv-x="1228" > 
```

**asp函数**

```
function getFontId(url)
Set objXml = Server.CreateObject("MSXML2.DomDocument.6.0")
'objXml.async = False
objXml.LoadXML(url)

For Each oNode In objXml.SelectNodes("svg/defs/font")
  sKey = oNode.GetAttribute("id")
 ' sValue = oNode.Text
  getXML=sKey
Next

Set objXml= Nothing
end function 
```

**svg代码：**

```
<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg">
    <metadata>This is a custom SVG webfont generated by Font Squirrel.        Copyright   :  1987 1990 1991 1995 1998 2001 2002 Adobe Systems Incorporated All rights reserved        Foundry     : Adobe </metadata>
    <defs>
        <font id="LetterGothicStdRegular" horiz-adv-x="1228">
            <font-face units-per-em="2048" ascent="1520" descent="-528"/>
            <missing-glyph horiz-adv-x="500"/>
            <glyph unicode="2" horiz-adv-x="1783" d="M149 1099l66 51l672 -696l671 696l66 -51l-737 -776z"/>
            <glyph unicode="8" horiz-adv-x="1783" d="M167 430l737 776l738 -776l-66 -51l-672 696l-671 -696z"/>
            <glyph unicode="&#x3c;" d="M201 737l776 738l51 -66l-696 -672l696 -671l-51 -66z"/>
            <glyph unicode="&#x3e;" d="M288 66l696 671l-696 672l51 66l776 -738l-776 -737z"/>
            <glyph unicode="&#x2000;" horiz-adv-x="737"/>
            <glyph unicode="&#x2001;" horiz-adv-x="1475"/>
            <glyph unicode="&#x2002;" horiz-adv-x="737"/>
            <glyph unicode="&#x2003;" horiz-adv-x="1475"/>
            <glyph unicode="&#x2004;" horiz-adv-x="491"/>
            <glyph unicode="&#x2005;" horiz-adv-x="368"/>
            <glyph unicode="&#x2006;" horiz-adv-x="245"/>
            <glyph unicode="&#x2007;" horiz-adv-x="245"/>
            <glyph unicode="&#x2008;" horiz-adv-x="184"/>
            <glyph unicode="&#x2009;" horiz-adv-x="295"/>
            <glyph unicode="&#x200a;" horiz-adv-x="81"/>
            <glyph unicode="&#x202f;" horiz-adv-x="295"/>
            <glyph unicode="&#x205f;" horiz-adv-x="368"/>
            <glyph unicode="&#xe000;" horiz-adv-x="500" d="M0 0v0v0v0v0z"/>
        </font>
    </defs>
</svg> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T11:51:34.030

您可以解析指定 svg 选择命名空间。
另外，参数名称是***url***，如果它是 url 有意义吗？因为**loadXML**仅从包含 xml 的字符串加载。如果 url 是远程的，您应该使用**Load**和设置`ServerHTTPRequest`属性。`True`查看[validateOnParse](http://msdn.microsoft.com/en-us/library/windows/desktop/ms762791%28v=vs.85%29.aspx)和[resolveExternals](http://msdn.microsoft.com/en-us/library/windows/desktop/ms762283%28v=vs.85%29.aspx)。这是一个例子：

```
Function getFontId(url)
    With Server.CreateObject("MSXML2.DomDocument.6.0")
        .async = False
        .validateOnParse = False 'parse only for well-formed xml, no more
        .resolveExternals = False
        .setProperty "ServerHTTPRequest", True
        .setProperty "ProhibitDTD", False ' it's true by default in 6.0
        If .Load(url) Then
            .setProperty "SelectionNamespaces", "xmlns:svg='http://www.w3.org/2000/svg'"
            Dim domAttrId
            Set domAttrId = .selectSingleNode("//svg:defs/svg:font/@id")
            If domAttrId Is Nothing Then 
                'node nor attribute not exists
            Else
                getFontId = domAttrId.Value
            End If
        Else
            With .parseError
                Err.Raise .errorCode, .srcText, .reason
            End With
        End If
    End With
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T09:06:57.113

您可以在 .LoadXML() 语句下方尝试类似的操作吗？（未经测试）：

```
Dim root, xpath, xmlnode, font
Set root = objXml.documentElement
    xpath = "/defs/font"
    set xmlNode = xml.selectNodes(xpath)
        font = xmlNode(0).getAttribute("id")
    set xmlNode = Nothing
Set root = Nothing 
```

我注意到以下几点：

*   你没有根集（你可以尝试设置它并 response.writing 看看它是否返回 svg 节点）
*   xmlNode(0) 返回它找到的第一个节点，这可能是必要的

尝试使用 .xml 或 .xmltext response.writing 不同的节点，看看你是否在 DOM 树的正确部分。

# javascript - Mootools：添加输入文本字段

> ID：10166591
> 
> 赞同：0
> 
> 时间：2012-04-15T22:09:56.157
> 
> 标签：javascript, mootools

我正在使用 mootools 框架向表单添加文本输入。这是我的代码：

[http://jsfiddle.net/dazaweb/wjMJt/2/](http://jsfiddle.net/dazaweb/wjMJt/2/)

如您所见，输入字段出现一秒钟，然后消失。关于为什么会发生这种情况的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T22:12:20.367

您正在单击将发布表单的提交按钮。将输入类型更改为`button`，它将起作用。或者，如果您仍想使用提交按钮，您可以阻止默认行为。

这是一个带有按钮而不是提交的工作链接：

[http://jsfiddle.net/wjMJt/3/](http://jsfiddle.net/wjMJt/3/)

您还可以通过取消冒泡来防止默认行为。

只需`e.stop();`在您的函数中添加，并将事件参数作为名为 e 的变量传递，如下所示：

```
$('btnAddOption').addEvent('click', function(e) { 
```

例子：

[http://jsfiddle.net/wjMJt/6/](http://jsfiddle.net/wjMJt/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T22:15:40.633

在javascript代码中添加这个

```
event.stop(); 
```

也在事件处理程序中传递事件

```
$('btnAddOption').addEvent('click', function(event) { 
```

默认情况下，按钮应该提交它正在执行的表单，但是通过执行 event.stop 我们阻止它提交表单

我的错误是我写了 jquery ....将其更新为 javascript

# ios - 创建一个 NSManagedObject 而不保存？

> ID：10166592
> 
> 赞同：9
> 
> 时间：2012-04-15T22:10:07.047
> 
> 标签：ios, objective-c, core-data, nsmanagedobject, nsmanagedobjectcontext

> **可能重复：**
> [存储但不将 NSManagedObject 保存到 CoreData？](https://stackoverflow.com/questions/10164850/store-but-dont-save-nsmanagedobject-to-coredata)

我需要制作一个 NSManagedObject 而不保存它，我该怎么做？

我想这样做的原因是应用程序有一个设置，用户可以在其中输入他们的详细信息，但是我只想在他们完成设置后保存对象（他们可以选择取消，在这种情况下对象需要是被丢弃而不被保存，这就是为什么我不想立即插入它）。

我试过在没有上下文的情况下插入一个，但应用程序崩溃了。

我尝试了以下方法：

```
GuestInfo *guest;
guest = (GuestInfo *)[NSEntityDescription insertNewObjectForEntityForName:@"GuestInfo" inManagedObjectContext:nil]; 
```

这会导致崩溃并显示以下错误消息：

```
'NSInternalInconsistencyException', reason: '+entityForName: could not locate an NSManagedObjectModel for entity name 'GuestInfo'' 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-16T11:49:02.323

我建议创建托管对象并照常插入托管对象上下文。您将获得对托管对象的引用，即：

```
GuestInfo* guest = (GuestInfo *)[NSEntityDescription insertNewObjectForEntityForName:@"GuestInfo" inManagedObjectContext:managedObjectContext]; 
```

然后，如果用户取消，只需将其从托管对象上下文中删除，如下所示：

```
[guest deleteInContext:managedObjectContext]; 
```

托管对象上下文被设计为一个便笺簿，您可以像这样在其中创建和删除对象。

您可能会考虑的另一个选择是调用：

```
[managedObjectContext rollback] 
```

如果用户取消。即，您将在托管对象上下文中创建托管对象，但如果用户取消，您将撤消或回滚托管对象上下文的状态，使其恢复到上次保存时的状态。请参阅 Apple 的“使用托管对象”文档的“撤消管理”部分：

[https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreData/Articles/cdUsingMOs.html](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreData/Articles/cdUsingMOs.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-15T22:34:29.557

创建一个 NSManagedObjectContext，作为正常上下文的子级。您可以在那里进行所有您想要的更改，只要您不调用保存，那里的东西就不会被推送。

例如...

```
NSManagedObjectContext *moc = [[NSManagedObjectContext alloc] initWithConcurrencyType: NSPrivateQueueConcurrencyType];
moc.parentContext = myCurrentManagedObjectContext; 
```

现在，从程序中的任何线程中，您可以进行以下调用...

```
[moc performBlock:^{
    // Do anything you want to with this context... make a new object, whatever.
    // As long as you do not call [moc save], your changes will not propagate
    // up to the parent context, nor saved.
}]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T01:06:30.297

托管对象总是需要有一个上下文。如果您不希望对象持久化，只需不要保存上下文。

如果您*从不*希望您的对象是持久的，那么您是否应该真正使用 Core Data 是值得怀疑的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-15T23:25:43.373

如果您不想保存 Core Data 对象，则创建它有点奇怪......但无论如何，错误表明您的项目中没有包含名为 GuestInfo 的模型文件。验证它是否存在并包含在您的*Copy Bundle Resources*部分中。模型文件是您在数据库中声明类型以及它们之间的连接的文件。

# function - 以简单的纯函数式语言实现折叠，无需延迟评估

> ID：10166593
> 
> 赞同：1
> 
> 时间：2012-04-15T22:10:08.203
> 
> 标签：function, haskell, recursion, lazy-evaluation, fold

我正在尝试为自动程序合成实现一种简单的功能语言。数据结构是函数和值的图，可编译为 javascript。下图应该是一个折叠函数。 `funcApp`节点连接到一个函数节点和许多值节点，并将函数应用于值。 `arg0`是列表，`arg1`是初始值 (z)`arg2`是要应用的函数。

![在此处输入图像描述](../Images/bdcfc4478a4eff876a50d5bf52f14d39.png)

它相当于以下方案定义（虽然我的“语言”不是方案，但它是图）

```
(define (foldr f z xs)
   (if (null? xs)
       z
       (f (car xs) (foldr f z (cdr xs))))) 
```

问题是，由于没有特殊的运算符，所以一切，特别`if`是只是一个正常的功能。在这种形式下，程序永远不会终止，而是达到最大堆栈深度，因为 else 子句总是被计算。

我认为这个问题在某些语言中是通过惰性求值解决的。所以我的问题是：是否有没有这种无限递归的功能版本的 fold 2）如果有必要，从哪里开始考虑将惰性求值应用于这样的简单语言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T22:49:40.790

我认为在 binders 下进行评估（尤其是评估 lambdas 的主体）是非常罕见的，所以我认为惰性化严格语言的标准解决方案是引入 lambda。我不知道方案语法，但在 Haskell 语法中，如果你想`x`成为严格函数的惰性参数`f`，你可能会写类似`f (\() -> x)`(并`f`适当修改以期望这样的 lambda，并在你想要的时候调用它们不要懒惰他们）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T22:46:51.223

您可以将 if 表达式的两个分支编译为 thunk，并根据条件调用适当的 thunk。如果 scheme 的正式定义是这样写的，我不会感到惊讶。

# google-app-engine - 您可以从 Google App Engine 上的自定义子域发送电子邮件吗？

> ID：10166595
> 
> 赞同：2
> 
> 时间：2012-04-15T22:10:25.987
> 
> 标签：google-app-engine, google-apps

是否可以从 user@subdomain.example.com 发送电子邮件？（example.com 是通过 Google Apps 设置的自定义域名）您无法将该电子邮件地址添加到权限列表中，因为它是别名，因此它会自动分配给主帐户 user@example.com，因此您无法创建其他帐户来确认它也不会“接受”邀请，因为您被谷歌识别为 user@example.com

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T22:54:57.930

只要该电子邮件地址也被添加为应用程序的管理员（所有者/开发者/查看者），这是可能的。您可以通过管理控制台中的权限添加它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T12:00:54.770

据我所知，您不能将其作为管理员添加到应用程序中，必须是 @example.org。子域不会削减它。

# javascript - 在锚标记中使用 javascript window.open(elementName.elementValue) 在新选项卡中打开页面

> ID：10166596
> 
> 赞同：7
> 
> 时间：2012-04-15T22:10:27.253
> 
> 标签：javascript, href, window.open

在过去的几天里，我检查了大量的例子，但仍然找不到我的困境的答案。为了让我先解释我的困境，我将向您展示一个我拥有的东西的例子，然后解释我希望它如何工作（但似乎无法实现）。

这有效：

```
<form>
<select name="url">
    <option selected="selected" value=""> Choose Donation Amount </option>
    <option value="http://www.url1.com">URL#1</option>
    <option value="http://www.url2.com">URL#2</option>
    <option value="http://www.url3.com">URL#3</option>
    <option value="http://www.url4.com">URL#4</option>
    <option value="http://www.url5.com">URL#5</option>
    <option value="http://www.url6.com">URL#6</option>
</select>
<input type="submit" value="Submit" onclick="if (url.value) window.open(url.value);" />
</form> 
```

但我宁愿做的是捕获选项并使用锚标记（而不是 input[type"submit"]）打开 URL，如下所示（在关闭表单标记之前替换输入标记）：

```
<a href="javascript:void(if (url.value) window.open(url.value));" target="_blank">Submit</a> 
```

上面的行不起作用，我不知道如何正确形成它。帮助？

我知道这似乎不合逻辑，特别是因为我已经使用提交按钮让它工作了，但我也无法准确解释为什么我不想使用 input 或 button type="submit", 或php。拜托，它确实需要在锚标记中嵌入 javascript。谢谢.s :-)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-15T22:22:18.270

添加您的表单`name`属性，例如：

```
<form name="form"> 
```

...然后像这样尝试：

```
<a href="" onclick="window.open( form.url.value, 'windowName' ); return false" target="_blank">Submit</a> 
```

有一个工作[示例](http://jsfiddle.net/ef69K/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T21:32:14.290

如果您只想在选择一个选项时打开一个 URL，我不知道您为什么要使用该表单。阅读下面的代码：

```
<select name="url" onchange="window.open(this.options[this.selectedIndex].value,'_blank')"> 
```

这适用于所有浏览器，即使在 IE5 上也是如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T22:22:57.693

这工作到目前为止，虽然它很长

`<a href="javascript:void((function(){ val=document.getElementsByName('url')[0].value; if(val) window.open(val)})())">click</a>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-09T02:31:32.603

我们也有类似的要求。我们希望在用户单击它时使用 ajax 调用从服务器端生成 href url。经过大量搜索我们发现它实际上是由浏览器控制的。在 chrome 中，新打开的页面作为弹出窗口打开，并被弹出窗口阻止程序阻止。我们应用程序的大多数用户都对这种行为感到困惑。这是我们使用的解决方法。希望这会帮助有类似问题的人。

我们可以有一个常规链接，该链接指向我们站点中名为 LandingPage.html 的实际网页。我们必须将目标设置为“_blank”才能在同一浏览器选项卡中打开窗口。

```
<a href="LandingPage.html" id="fakeLink" target="_blank">Click to open google in the same browser window</a> 
```

然后我们附加到 fakeLink 锚元素的点击事件。

```
 $('#fakeLink').click(function(){
        $.ajax({
            url: ""
        }).done(function() {
            localStorage.setItem('url', 'https://www.google.lk');
        });
    }); 
```

我们可以执行 ajax 调用并从服务器检索动态生成的 url。然后我们可以将该 url 添加到 localstorage。

登陆页面可以有一个文本来向用户表明他们将在一秒钟内被重定向。“您将在 1 秒内被重定向到谷歌。”

在登录页面中，我们可以有一个 settimeout 并且在该函数中，我们可以使用 window.location 将用户重定向到实际页面。

```
 setTimeout(function(){
        window.location.assign(localStorage.getItem('url'));
    }, 1000); 
```

希望这会有所帮助，这应该适用于所有浏览器，我只检查了 IE 10 和 Chrome，因为我们没有使用任何与浏览器相关的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-12T14:27:56.867

您可以忘记使用 JavaScript，因为浏览器控制它是否在新选项卡中打开。您最好的选择是执行以下操作：

```
<form action="http://www.yoursite.com/dosomething" method="get" target="_blank">
    <input name="dynamicParam1" type="text"/>
    <input name="dynamicParam2" type="text" />
    <input type="submit" value="submit" />
</form> 
```

由于该`target="_blank"`属性，无论客户端使用哪种浏览器，这将始终在新选项卡中打开。

如果您只需要在没有动态参数的情况下进行重定向，则可以使用带有`target="_blank"`属性的链接：

```
<a href="http://www.youresite.com" target="_blank">redirect</a> 
```

# emacs - Emacs中的forms-mode，它的目的是什么，有人用过吗？

> ID：10166600
> 
> 赞同：3
> 
> 时间：2012-04-15T22:11:16.327
> 
> 标签：emacs, elisp

我在 Emacs 中发现了一个有趣的叫做 forms-mode 的东西，我只是不知道它的用途或用途是什么。Emacs 中的任何主要模式都使用它吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T00:22:46.527

`Forms: (forms). Emacs package for editing data bases by filling in forms.`

> 表单模式是 Emacs 的主要模式，用于以面向表单的方式处理简单的文本数据库。在 Forms 模式下，这些文件中的信息以用户定义的格式显示在 Emacs 窗口中，一次一条记录。用户可以查看记录或修改其内容。
> 
> 表单模式不是一个简单的主要模式，它需要两个文件来完成它的工作：一个控制文件和一个数据文件。数据文件保存要呈现的实际数据。控制文件描述了如何呈现它。

如需完整文档，请从此处开始：（
`M-:` `(info "(forms) Top")` `RET`
或`C-h``i``d``m` `Forms` `RET`）

另见评论：
`M-x` `find-library` `RET` `forms` `RET`

并且在同一目录中提供了一个示例表单，因此您可以从库中执行此操作以查看它的实际效果：

*   `C-x``C-f` `forms-d2.el` `RET`
*   `M-x` `forms-mode` `RET`

# jsf - jsf中的继承

> ID：10166606
> 
> 赞同：2
> 
> 时间：2012-04-15T22:12:25.220
> 
> 标签：jsf, inheritance, el

我想在 jsf 打印的 bean 中使用继承。例如，我有一个父类（动物），有两个孩子（猫和狗），具有不同的属性（catAttr 和 dogAttr）和鉴别器（类型）。我想打印一个包含所有属性的动物列表。代码示例（它返回我一个未找到的属性异常），jsf 页面：

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
  xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
    <title>Facelet Title</title>
</h:head>
<h:body>
    <ui:repeat value="#{animalsBean.animals}" var="a">
        <!-- General attributes -->
        <label>Name: </label> #{a.name}<br/>

        <!-- Specific attributes -->
        <h:panelGroup rendered="#{a.type eq 'cat'}">
            <label>Cat attributes:</label>
            <h:inputTextarea value="#{a.catAttr}"/><br/>
        </h:panelGroup>
        <h:panelGroup rendered="#{a.type eq 'dog'}">
            <label>Dog attributes:</label>
            <h:inputTextarea value="#{a.dogAttr}"/><br/>
        </h:panelGroup>
    </ui:repeat>
</h:body> 
```

动物豆：

```
@ManagedBean
@SessionScoped
public class AnimalsBean {
    private List<Animal> animals;

    public List<Animal> getAnimals() {
        return animals;
    }

    public void setAnimals(List<Animal> animals) {
        this.animals = animals;
    }
} 
```

有人能帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T22:29:04.983

JSF 标记组件无法识别模型类的内部类型（猫、狗等）。如果您使用的是父类，那么您只能使用它的公共属性（对于所有子类都是通用的）。

```
public class Animal {
    protected String name;
    //getter and setter...
}

public class Cat extends Animal {
    private String specie;
    //getter and setter...
}

public class Dog extends Animal {
    public String race;
    //getter and setter...
}

@SessionScoped
@ManagedBean(name="animalBean")
public class AnimalsBean {
    private Cat cat;
    private Dog dog;
    private Animal animal;

    public AnimalsBean() {
        cat = new Cat();
        dog = new Dog();
        animal = new Cat();
    }

    //getters and setters...
} 
```

用于此的 xhtml 代码：

```
<h:form>
    <h:inputText value="#{animalBean.cat.specie}" />
    <h:inputText value="#{animalBean.dog.race}" />
    <h:inputText value="#{animalBean.animal.name}" />
    <!-- this line won't work -->
    <h:inputText value="#{animalBean.animal.specie}" />
</h:form> 
```

# ruby - 算法/递归树挑战

> ID：10166607
> 
> 赞同：5
> 
> 时间：2012-04-15T22:12:40.740
> 
> 标签：ruby, algorithm, recursion, tree

我在尝试理解如何使用递归来解决这个问题时遇到了麻烦。我正在使用 Ruby 来解决它，因为这是迄今为止我所知道的唯一语言！

您有一些拥有其他公司的公司的哈希值：

```
@hsh = { ['A','B'] => 0.5, ['B','E'] => 0.2, ['A','E'] => 0.2, 
         ['A','C'] => 0.3, ['C','D'] => 0.4, ['D','E'] => 0.2 } 
```

例如`['A','B'] => 0.5`，表示公司“A”拥有“B”的 0.5（50%） 问题是定义一种方法，使您可以确定特定公司通过拥有其他公司（直接和间接）拥有多少公司。到目前为止我已经确定：

```
def portfolio(entity)
  portfolio = []
  @hsh.keys.each do |relationship|
    portfolio << relationship.last if relationship.first == entity
  end
  portfolio
end 
```

这将返回一个公司直接拥有的公司数组。现在，这就是我想的 total_ownership 方法的样子。

```
def total_ownership(entity, security)
  portfolio(entity).inject() do |sum, company|
    sum *= @hsh[[entity,company]]
    total_ownership(company,security)
  end
end 
```

为了这个例子，让我们假设我们正在寻找`total_ownership('A','E')`

显然，这是行不通的。我无法真正弄清楚的是如何“存储”每个递归级别的值以及如何正确设置基本情况。如果你不能在 Ruby 中帮助我，我也不介意伪代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T23:00:03.793

嗯，在我看来应该是

```
def total_ownership(entity, security)
  indirect = portfolio(entity).inject(0) do |sum, company|
    share = @hsh[[entity, company]]
    sum + (share || 0) * total_ownership(company,security)
  end
  direct = @hsh[[entity, security]] || 0

  indirect + direct
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T23:04:42.017

```
def total_ownership(a, b)
  direct_ownership(a, b) + indirect_ownership(a, b)
end

def direct_ownership(a, b)
  @hsh[[a, b]] || 0
end

def indirect_ownership(a, b)
  portfolio(a).map do |portfolio_item|
    @hsh[[a, portfolio_item]] * total_ownership(portfolio_item, b)
  end.inject(&:+) || 0
end 
```

# ruby - 在 ruby 测试中启动 Web 服务器

> ID：10166611
> 
> 赞同：8
> 
> 时间：2012-04-15T22:13:15.917
> 
> 标签：ruby, rspec, capybara, tsung

我正在编写一个库来包装 tsung 的功能，以便更好地被 rails 应用程序使用。我想编写一些集成测试，归结为以下内容：

1.  启动一个简单的 Web 服务器
2.  通过库运行 tsung-recorder
3.  启动 selenium，将 firefox 配置文件配置为使用 tsung 代理，并让它从步骤 1 中启动的服务器获取页面
4.  检查记录的图书馆（它存在，它在正确的位置等）

对于第 1 步，虽然我可以在外部启动一个 vanilla rails 应用程序（例如，`%x{rails s}`），但我很确定有更好的方法来以编程方式创建一个适合测试的简单 Web 服务器。

**tl;dr - 在测试中以编程方式启动简单 Web 服务器的方法是什么？**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-12T21:41:37.760

您可以推出自己的简单服务器。这是一个使用 thin 和 rspec 的快速示例（必须安装这些 gem，加上 rack）：

```
# spec/support/test_server.rb
require 'rubygems'
require 'rack'

module MyApp
  module Test
    class Server
      def call(env)
        @root = File.expand_path(File.dirname(__FILE__))
        path = Rack::Utils.unescape(env['PATH_INFO'])
        path += 'index.html' if path == '/'
        file = @root + "#{path}"

        params = Rack::Utils.parse_nested_query(env['QUERY_STRING'])

        if File.exists?(file)
          [ 200, {"Content-Type" => "text/html"}, File.read(file) ]
        else
          [ 404, {'Content-Type' => 'text/plain'}, 'file not found' ]
        end
      end
    end
  end
end 
```

然后在你的`spec_helper`：

```
# Include all files under spec/support
Dir["./spec/support/**/*.rb"].each {|f| require f}

# Start a local rack server to serve up test pages.
@server_thread = Thread.new do
  Rack::Handler::Thin.run MyApp::Test::Server.new, :Port => 9292
end
sleep(1) # wait a sec for the server to be booted 
```

这将提供您存储在`spec/support`目录中的任何文件。包括自己。对于所有其他请求，它将返回 404。

这基本上就是前面答案中提到的水豚所做的，减去了很多复杂性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-15T22:43:00.973

capybara 使用 ad-hoc Rack 服务器的规格：

*   [https://github.com/jnicklas/capybara/blob/master/lib/capybara/server.rb](https://github.com/jnicklas/capybara/blob/master/lib/capybara/server.rb)
*   [https://github.com/jnicklas/capybara/blob/master/spec/server_spec.rb](https://github.com/jnicklas/capybara/blob/master/spec/server_spec.rb)

任何 Rack 应用程序（包括 Rails 应用程序）都可以使用这个系统提供服务，尽管 Rails 配置可能有点棘手。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-16T22:57:28.290

[stub_server](https://github.com/grosser/stub_server)是一个真正的测试服务器，可以提供预定义的回复，并且很容易启动......也带有 ssl 支持。

# mongodb - mongodb安装失败运行mongod

> ID：10166612
> 
> 赞同：21
> 
> 时间：2012-04-15T22:13:20.523
> 
> 标签：mongodb

我已经下载了最新版本的 mongodb 并将文件移动并重命名为 mongodb 到目录`usr/local/mongodb`。当我尝试运行 mongod 时，出现以下错误

```
`./bin/mongod --help` for help and startup options
Sun Apr 15 18:08:25 [initandlisten] MongoDB starting : pid=8801 port=27017 dbpath=/data/db/ 64-bit host=Hanss-MacBook-Air.local
Sun Apr 15 18:08:25 [initandlisten] db version v2.0.4, pdfile version 4.5
Sun Apr 15 18:08:25 [initandlisten] git version: 329f3c47fe8136c03392c8f0e548506cb21f8ebf
Sun Apr 15 18:08:25 [initandlisten] build info: Darwin erh2.10gen.cc 9.8.0 Darwin Kernel Version 9.8.0: Wed Jul 15 16:55:01 PDT 2009; root:xnu-1228.15.4~1/RELEASE_I386 i386 BOOST_LIB_VERSION=1_40
Sun Apr 15 18:08:25 [initandlisten] options: {}
Sun Apr 15 18:08:25 [initandlisten] exception in initAndListen: 10309 Unable to create/open lock file: /data/db/mongod.lock errno:13 Permission denied Is a mongod instance already running?, terminating
Sun Apr 15 18:08:25 dbexit: 
Sun Apr 15 18:08:25 [initandlisten] shutdown: going to close listening sockets...
Sun Apr 15 18:08:25 [initandlisten] shutdown: going to flush diaglog...
Sun Apr 15 18:08:25 [initandlisten] shutdown: going to close sockets...
Sun Apr 15 18:08:25 [initandlisten] shutdown: waiting for fs preallocator...
Sun Apr 15 18:08:25 [initandlisten] shutdown: lock for final commit...
Sun Apr 15 18:08:25 [initandlisten] shutdown: final commit...
Sun Apr 15 18:08:25 [initandlisten] shutdown: closing all files...
Sun Apr 15 18:08:25 [initandlisten] closeAllFiles() finished
Sun Apr 15 18:08:25 [initandlisten] shutdown: removing fs lock...
Sun Apr 15 18:08:25 [initandlisten] couldn't remove fs lock errno:9 Bad file descriptor
Sun Apr 15 18:08:25 dbexit: really exiting now 
```

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-04-15T22:16:40.470

`sudo chown -R <your-username> /data/db`

哪个用户运行 mongod？您是否使用常规登录来运行它？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-29T13:19:31.837

与“Joe Frambach's”相同，但更易于立即剪切和粘贴。

```
sudo chown -R $(whoami) /data/db 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T13:01:34.667

systemctl 启动是因为 mongod 的 init-script 像大多数其他文件一样获取此文件：

```
. /etc/rc.d/init.d/functions 
```

带有 chkconfig 注释的块用于定义配置和 pid 文件：

```
# config: /etc/my-mongod.conf
# pidfile: /var/run/mongo/mongo.pid 
```

但是该 pifile 的路径应该与配置的 dbpath 中的任何内容相匹配。所以这在 /etc/my-mongod.conf

```
dbpath = /home/mongodb/2.0.5/data 
```

与 /etc/init.d/mongod 中的此注释匹配

```
# pidfile: /home/mongodb/2.0.5/data/mongod.lock 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T17:08:55.570

得到同样的错误，在以管理员权限运行的 Windows 中解决了这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-31T10:26:33.147

下面的命令对我有用：

```
sudo chown -R `id -u` /data/db 
```

# c# - 等到网页浏览器控件中的页面加载

> ID：10166613
> 
> 赞同：3
> 
> 时间：2012-04-15T22:13:34.890
> 
> 标签：c#, browser

我正在使用 C# WebBrowser 控件，我遇到了一个问题，即当页面尚未加载但程序尝试继续但给我一个空错误时，当按下“下一步”之类的按钮时。

**是否有让程序等待页面完成加载的功能？**

我试图在检查html页面标题的程序中放置一个while循环，但随后程序冻结。类似的东西会冻结程序：

```
 while(!webbrowser1.Document.Title.ToString().Equals("NextPageTitle"))
   {
   }
   ::NextCommands:: 
```

* * *

它不起作用，我试过了，但没有点击按钮“fblqf”。但它不返回空错误..

```
public void button1_Click(object sender, EventArgs e)
{

    webBrowser1.Document.GetElementById("q").SetAttribute("value", "חחח");
    webBrowser1.Document.GetElementById("btnK").InvokeMember("Click");
    webBrowser1.DocumentCompleted += webBrowser1_DocumentCompleted;

}
void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    // do the work you need to do now that that page has completed loading
    webBrowser1.Document.GetElementById("fblqf").InvokeMember("Click");
} 
```

解决方案：

```
public void button1_Click(object sender, EventArgs e)
{
    webBrowser1.Document.GetElementById("q").SetAttribute("value", "חחח");
    webBrowser1.Document.GetElementById("btnK").InvokeMember("Click");
    int x=0;
    while (x==0)
   {
       System.Windows.Forms.Application.DoEvents();
        if(webBrowser1.Document.GetElementById("pnnext") != null)
        break;
   }

    webBrowser1.Document.GetElementById("pnnext").InvokeMember("Click");
    webBrowser1.Document.GetElementById("q").Focus();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T22:45:50.380

您需要挂钩[WebBrowser.DocumentCompleted](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.documentcompleted.aspx)事件：

也许在您的构造函数或 OnLoad 中：

```
webBrowser1.Document.GetElementById("q").SetAttribute("value", "חחח"); 
webBrowser1.DocumentCompleted += webBrowser1_DocumentCompleted; 
webBrowser1.Document.GetElementById("btnK").InvokeMember("Click"); 
```

然后你的事件看起来像这样：

```
void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    // do the work you need to do now that that page has completed loading
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T22:41:29.843

我找到了一个简单的解决方案！！！

```
public void button1_Click(object sender, EventArgs e)
{
    webBrowser1.Document.GetElementById("q").SetAttribute("value", "חחח");
    webBrowser1.Document.GetElementById("btnK").InvokeMember("Click");

    while (true)
   {
       System.Windows.Forms.Application.DoEvents();
        if(webBrowser1.Document.GetElementById("pnnext") != null)
        break;
   }

    webBrowser1.Document.GetElementById("pnnext").InvokeMember("Click");
    webBrowser1.Document.GetElementById("q").Focus();
} 
```

# c# - 使用 Asp.Net 的实体框架多对多关系

> ID：10166617
> 
> 赞同：0
> 
> 时间：2012-04-15T22:14:08.433
> 
> 标签：c#, entity-framework

我有 3 张桌子。一个叫Artist，一个叫Song，一个叫Album。

艺术家与歌曲关联为一对多。艺术家也以一对多的形式与专辑相关联。歌曲以多对多的方式链接到专辑，因此自动创建了一个桥接表。歌曲表具有艺术家和专辑的导航属性，专辑具有艺术家和歌曲的导航属性。我想添加一首新歌。添加歌曲时，桥接表不会更新，所以我想知道如何在添加歌曲时引用与歌曲关联的专辑。

```
public int CreateNewSong(String name,String songTitle)
{
    using(var context = new Myentities())
    {
        Song theNewSong = new Song()
        Artist refer = context.Artists.Single(o => o.ArtistName == name);
        theNewSong.SongTitle = songTitle;
        theNewSong.Artist_ArtistID = refer.ArtistID;
        context.Songs.AddObject(theNewSong);
        context.SaveChanges();
        return theNewSong.SongID;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T09:10:20.727

首先，如果您之间存在多对多关系，`Song`并且`Album`您的`Song`实体应该包含集合，`Albums`并且`Album`实体应该包含集合`Songs`：

```
public class Song
{
    ...
    public virtual ICollection<Album> Albums { get; set; }
}

public class Album
{
    ...
    public virtual ICollection<Song> Songs { get; set; }
} 
```

不要忘记映射它们。例如，如果您使用 Fluent API，请将其添加到您的上下文类中：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            base.OnModelCreating(modelBuilder);

            modelBuilder.Entity<Song>()
                .HasMany(s => s.Albums)
                .WithMany(a => a.Songs)
                .Map(m =>
                {
                    m.MapLeftKey("SongID");
                    m.MapRightKey("AlbumID");
                    m.ToTable("SongAlbums");
                });
        } 
```

所以你的方法将类似于这个：

```
public int CreateNewSong(String name, String songTitle, String album)
{
    using(var context = new Myentities())
    {
        Album album = context.Albums.Single(o => o.AlbumName == album);
        Artist refer = context.Artists.Single(o => o.ArtistName == name);
        Song theNewSong = new Song {
                                      SongTitle = songTitle,
                                      Artist = refer                                        
                                   };

        theNewSong.Albums.Add(album);     
        context.Songs.AddObject(theNewSong);
        context.SaveChanges();
        return theNewSong.SongID;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:51:27.930

很好的答案`algreat`，让我强调 2 点，因为我一直遇到 EF 多对多关系的错误（相应的导航属性是发送和异常，而不是检索信息），这很重要：

*   中的Mapping `OnCreatingModel`，如果不映射到对应的中间表，EF找不到这个`object`来执行join，就是`edmx`文件中省略的表。

*   如果您使用工具来生成实体和数据上下文，这就是我的情况，并修改`edmx`文件，您可能必须再次编码，因为所有这些“生成的对象”将刷新到初始状态和您的映射，您的数据注释和那些东西将被删除。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T10:03:27.407

我认为发生这种情况是因为歌曲和专辑之间存在一对多的关系，因此您必须定义与歌曲相关联的专辑（如您放置艺术家）

```
public int CreateNewSong(String name,String songTitle,String album)
{
    using(var context = new Myentities())
    {
        Song theNewSong = new Song()
        Artist refer = context.Artists.Single(o => o.ArtistName == name);

        Album album = context.Albums.Single(o => o.AlbumName == album);

        theNewSong.SongTitle = songTitle;

        theNewSong.Artist_ArtistID = refer.ArtistID;
        theNewSong.Album_AlbumID = album.AlbumID;
        context.Songs.AddObject(theNewSong);
        context.SaveChanges();
        return theNewSong.SongID;
    }
} 
```

我认为这可能有效

# java - 类型擦除抬起丑陋的头，如何规避？

> ID：10166620
> 
> 赞同：5
> 
> 时间：2012-04-15T22:14:32.050
> 
> 标签：java, generics, types, interface, type-erasure

所以我有这个界面

```
public interface EventHandler<E extends EventObject>
{   
    public void handleEvent(E event);
} 
```

我想为它派生处理事件的类，如下所示：

```
public class WorkingHandler implements EventHandler<MouseEvent>
{
    public void handleEvent(MouseEvent event)
    {
        //handle event
    }
} 
```

上面的例子工作正常。但是编译器不会让我多次实现 EventHandler，因为类型擦除非常令人沮丧。

```
public class NotWorkingHandler implements EventHandler<MouseEvent>, EventHandler<KeyEvent>
{
    public void handleEvent(MouseEvent event)
    {
        //handle mouse event
    }

    public void handleEvent(KeyEvent event)
    {
        //handle key event
    }
} 
```

几个问题...

1.  为什么 Java 不允许类型擦除？IIRC 它与与早期版本的 Java 兼容有关，对吗？

编辑：我的意思是为什么 Java 有类型擦除（反之亦然）

1.  是否有任何类型的“mod”/“extension”（因为没有更好的词）或编程语言可以让我绕过 Type Erasure？因为我没有使用旧版本的 Java，所以我不关心我的代码是否与旧代码兼容。

2.  在 Java 语言中是否有任何解决方法可以用来绕过类型擦除？

3.  如果不是，有哪些替代方法可以在我的程序中编写事件处理代码以使编译器满意？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T22:32:06.247

一种选择是使用[Guava](http://guava-libraries.googlecode.com) [EventBus](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/eventbus/EventBus.html)将事件发布给订阅者。它专为解决您当前面临的问题而设计。

有了它，你不需要实现任何接口......只需提供两个`@Subscribe`这样的方法：

```
@Subscribe
public void handleKeyEvent(KeyEvent event) { ... }

@Subscribe
public void handleMouseEvent(MouseEvent event) { ... } 
```

[Guava wiki](http://code.google.com/p/guava-libraries/wiki/EventBusExplained)上提供了一些关于它的附加文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T22:28:51.283

Type Erasure 很好，因为它意味着 JVM 不需要知道任何关于 Generic 类型的信息。这也意味着使用通用类型不会影响性能。

此外，您关于需要保持二进制兼容性的想法是正确的（如[Type Erasure 教程](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)中所示）。类型擦除允许在 Java 允许泛型类型之前编写的代码与使用泛型编写的 Java 代码无缝互操作。

简单地制作两个处理程序并附加两者怎么样？

```
public class KeyHandler implements EventHandler<KeyEvent>
{
    public void handleEvent(KeyEvent event)
    {
        //handle key event
    }
}

public class MouseHandler implements EventHandler<MouseEvent>
{
    public void handleEvent(MouseEvent event)
    {
        //handle mouse event
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T22:37:16.140

我不确定您对 Java 中类型擦除的理解是否正确。正如[这里](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)所解释的，您的泛型类的类型在运行时会丢失。

针对您的问题：

1.  我认为你是对的，Java 实现了类型擦除以实现与以前版本的语言的兼容性。
2.  不，我认为没有“mod”。
3.  不，没有解决方法（类型在编译时被删除），但您可以使用反射。
4.  见下文。

我认为一个更简单的解决方案是这样的：

```
public class WorkingHandler implements EventHandler<EventObject>
{
    public void handleEvent(EventObject event)
    {
        // handle event
        if (event instanceof MouseEvent)
            handleMouseEvent((MouseEvent) event);
        ...
    }

    ...

    private void handleMouseEvent(MouseEvent event)
    {
        // handle mice
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-15T22:34:49.947

1.  是的，类型擦除已实现，因此 JVM 的规范不必更改即可运行新版本（实现泛型）。

2.  正如其他人指出的那样，许多语言没有实现类型擦除。如果您可能正在查看 Java，但我不确定 - 不是因为 1.

3.  你可以做一个通用的事件处理程序：

.

```
public class GenericHandler implements EventHandler<EventObject> 
{ 
  public void handleEvent(EventObject event) 
  { 
    if (event instanceof MouseEvent) {
      MouseEvent mouseEvent = (MouseEvent) event;
      //handle mouse event 
    } else if (event instanceof KeyboardEvent) {
      KeyboardEvent keyboardEvent = (KeyboardEvent) event;
      //handle keyboard event 
    }
  } 
} 
```

不是最优雅的，但很有效:)

# android - 使用 Google 日历的 Android 应用程序 - 同步问题

> ID：10166621
> 
> 赞同：6
> 
> 时间：2012-04-15T22:14:39.037
> 
> 标签：android, sync, android-calendar

我正在尝试创建一个与 Google 日历接口的 android 应用程序。
我从[这里开始](http://code.google.com/p/android-calendar-provider-tests/source/browse/trunk/src/com/androidbook/androidcalendar/CalendarActivity.java)使用内容提供者按照教程进行操作。[此处](http://www.developer.com/ws/android/programming/Working-with-the-Android-Calendar-3850276.htm)解释了此代码的部分内容。

我面临以下问题。

1.  我从我的笔记本电脑在线创建了一个新日历*TestCalendar ，并将其标记为**Selected*。当我从应用程序查询我的日历时，我可以看到这个新日历，但它显示为未选中 (selected=0)。关于为什么会发生这种情况的任何建议？

2.  从我的应用程序中，我将一个事件添加到日历中，
    `getContentResolver().insert(eventsUri, event);`
    该事件反映在手机上的日历中，但它没有反映在在线版本中。要在线推送这个新活动，我必须手动同步日历，或者打开*自动同步*，我认为这不是正确的做法。任何可以帮助的建议/链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:42:38.657

1) 你能转储你的日历并发布结果吗？

注意：
Android < API Lvl 14 你必须设置 selected = 1
Android > API Lvl 14 你必须设置 visible = 1（selected 不再可用）

倾倒：

```
cursor = contentResolver.query(Uri.parse(CALENDAR_URI),null, null, null,null);

while (cursor.moveToNext()) {
   for (int i = 0; i < cursor.getColumnCount(); i++) {
    Log.e("XXX", cursor.getColumnName(i) + ": " + cursor.getString(i));
    }
} 
```

CALENDAR_URI = content://com.android.calendar/calendars（从 Froyo 开始）或 content://calendar/（在 Froyo 之前）

2) [https://stackoverflow.com/a/11652415/411951](https://stackoverflow.com/a/11652415/411951)

# java - 推荐的 TCP 缓冲区大小？建议分手？

> ID：10166624
> 
> 赞同：1
> 
> 时间：2012-04-15T22:15:34.093
> 
> 标签：java, c#, xml, buffer

我正在编写一个应用程序，它从服务器获取一个 XML 文件，然后使用里面的数据。我的问题是，因为 TCP 确保所有数据包都到达并且我无法控制它如何将数据分开，所以限制缓冲区大小是否有意义？如果是这样，我可以分块发送数据并在客户端重新组合它们。显然我不能做一个无限的缓冲区。XML 可以变得相当大，高达 256kb，我有点担心保留那个大小的缓冲区。数据是由 Android 设备提取的，但我们可以假设该设备具有 1gb 的 RAM。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T23:27:27.910

平均而言，网络堆栈中的默认缓冲区通常被调整为良好。除非您的应用程序特别不寻常（听起来不像），否则最好不要更改缓冲区大小。端点不同的事实也将导致紧张，从而阻止同时为两者选择更优化的任何东西。

如建议的那样，如果您在接收端使用流解析器，则缓冲区大小并不重要。在您准备好消息时发送消息，以减少因批处理整个文档而导致的延迟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T22:26:38.200

TCP 接收缓冲区大小与正在传输的数据大小无关。显然，您可以通过 TCP 流传输千兆字节的数据，并且不需要缓冲区大小相同。缓冲区大小通常与性能（端点上的网络和处理器）有关，并且可能很小 - 在大多数情况下，您可能不必更改默认设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T22:32:32.267

您不需要自己在客户端重新组装它。只需将 XML 解析器直接附加到套接字 InputStream。

# f# - 通过一个枚举应用多个聚合函数

> ID：10166626
> 
> 赞同：3
> 
> 时间：2012-04-15T22:15:48.413
> 
> 标签：f#, sequence

假设我有一系列作用于序列的函数，并且我想以下列方式一起使用它们：

```
let meanAndStandardDeviation data = 
    let m = mean data
    let sd = standardDeviation data
    (m, sd) 
```

上面的代码将枚举序列两次。我对一个会给出相同结果但只枚举序列一次的函数感兴趣。这个函数将是这样的：

```
magicFunction (mean, standardDeviation) data 
```

其中输入是一个函数元组和一个序列，输出与上面的函数相同。

如果函数`mean`和`stadardDeviation`是黑匣子并且我无法更改它们的实现，这可能吗？

如果我`mean`和`standardDeviation`我自己一起写，有没有办法让他们一起工作？也许以某种方式让他们继续为下一个函数提供输入并在完成后交出结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T00:11:10.690

当函数是黑盒时，仅使用一次迭代来做到这一点的唯一方法是使用`Seq.cache`函数（它计算一次序列并将结果存储在内存中）或将序列转换为其他内存表示。

当一个函数`seq<T>`作为参数时，你甚至不能保证它只会评估一次——标准偏差的通常实现会首先计算平均值，然后再次遍历序​​列以计算误差的平方。

我不确定您是否可以仅通过一次就可以计算标准偏差。但是，如果使用 . 表示函数，则可以这样做`fold`。例如，使用两次传递计算最大值和平均值如下所示：

```
let maxv = Seq.fold max Int32.MinValue input
let minv = Seq.fold min Int32.MaxValue input 
```

您可以使用这样的单遍来做到这一点：

```
Seq.fold (fun (s1, s2) v -> 
  (max s1 v, min s2 v)) (Int32.MinValue, Int32.MaxValue) input 
```

lambda 函数有点难看，但你可以定义一个组合器来组合两个函数：

```
let par f g (i, j) v = (f i v, g j v)
Seq.fold (par max min) (Int32.MinValue, Int32.MaxValue) input 
```

这种方法适用于可以使用 定义的函数`fold`，这意味着它们包含一些初始值（`Int32.MinValue`在第一个示例中），然后是一些用于在获得下一个值时更新初始（前一个）状态的函数（然后可能对结果进行一些后处理）。一般来说，应该可以用这种风格重写单通函数，但我不确定这是否可以用于标准偏差。绝对可以为均值完成：

```
let (count, sum) = Seq.fold (fun (count, sum) v -> 
  (count + 1.0, sum + v)) (0.0, 0.0) input
let mean = sum / count 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T23:55:06.893

我们在这里谈论的是一个具有以下签名的函数：

`(seq<'a> -> 'b) * (seq<'a> -> 'c) -> seq<'a> -> ('b * 'c)`

如果这是函数的签名，那么我无法想到使用序列的单次迭​​代来实现上述目标的直接方法。好吧，没有比以下更有效的方法了：

```
let magicFunc (f1:seq<'a>->'b, f2:seq<'a>->'c) (s:seq<'a>) = 
    let cached = s |> Seq.cache
    (f1 cached, f2 cached) 
```

这确保了序列本身的单次迭代（可能有副作用，或者它很慢），但实际上是通过缓存结果来实现的。缓存仍会再次迭代。这有什么问题吗？你想达到什么目的？

# html - 使用 HTML5 播放本地 mp3。如何保存文件引用以创建播放列表？

> ID：10166627
> 
> 赞同：1
> 
> 时间：2012-04-15T22:15:49.707
> 
> 标签：html, filesystems, mp3, local

我正在尝试使用 HTML 5 的好处编写一个 mp3 播放器。播放本地文件，到目前为止，似乎还可以。我根据这些示例编写示例代码：http: [//antimatter15.github.com/player/player.html](http://antimatter15.github.com/player/player.html) 事情是这样的：我必须获取每个 mp3 文件的参考。我想获取所有这些参考并保存在数据库中，以便客户端访问我显示此播放列表的网站时。问题是：以我之前提到的每次客户端关闭/打开浏览器时对文件的 blob 引用不再有效的方式进行操作。我正在寻找 FileSystem API，它允许将数据保存到沙箱部分。因此，每次用户需要时都可以清理数据，但我仍然无法在我的服务器数据库上保存 mp3 引用。大家能给我一些建议吗？真正的事情只是从 mp3 本地文件中保存一个引用，以允许我的用户创建一个播放列表，并且每次他访问网页时，他都可以看到该播放列表。

提前致谢，

[http://www.html5rocks.com/en/tutorials/file/filesystem/](http://www.html5rocks.com/en/tutorials/file/filesystem/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:54:59.587

我怀疑浏览器故意不支持此引用（或“对象 URL”）持久性。否则，您可以在他不知情的情况下访问用户的文件系统。这可能是一个安全问题。

[如此](https://developer.mozilla.org/en/using_files_from_web_applications "这里")处所引：

> 每次调用 window.URL.createObjectURL() 时，都会创建一个唯一的对象 URL，即使您已经为该文件创建了一个对象 URL。

# grails - 下拉菜单中的 Twitter 引导模式

> ID：10166628
> 
> 赞同：0
> 
> 时间：2012-04-15T22:15:56.197
> 
> 标签：grails, twitter-bootstrap

我在 groovy grails 中使用 twitter 引导库，目前可以同时使用模态框和下拉菜单，但不能在另一个中使用。这是我正在编写的代码，它非常接近，当我单击下拉列表中的某些内容时，会出现一个伪模态，它会使屏幕变黑（模态中包含透明度）但不显示带有我的信息的框提供。此外，我在使用 firebug 进行进一步检查时注意到，只有第一组模态被制作，而其余的都没有，我很困惑为什么会这样。任何人都可以帮忙吗？

代码：

```
 <table>
                <thead>
                    <tr>

                        <g:sortableColumn property="name" title="${message(code: 'course.name.label', default: 'Name')}" />

                        <g:sortableColumn property="description" title="${message(code: 'course.description.label', default: 'Description')}" />

                    </tr>
                </thead>
                <tbody>
                <g:each in="${courseInstanceList}" status="i" var="courseInstance">

                    <tr class="${(i % 2) == 0 ? 'odd' : 'even'}">
                    <td>
                                            <ul class="nav nav-pills">
                                        <li class="dropdown" id="menu${courseInstance.id}">
                                        <a class="dropdown-toggle" data-toggle="dropdown" href="#menu${courseInstance.id}">
                                          ${courseInstance.name}
                                          <b class="caret"></b>
                                        </a>
                                        <ul class="dropdown-menu">
                                                <g:each in="${courseInstance.hasMany}" var="param">
                                                        <a data-toggle="modal", href="#myModal${courseInstance.id}${param.getProperties().key}", id="${courseInstance.id}${param.getProperties().key}">${param.getProperties().key}</a>
                                <div class="modal" id="myModal${courseInstance.id}${param.getProperties().key}">
                                                        <div class="modal-header">
                                                        <a class="close" data-dismiss="modal">x</a>
                                                        <h3>Students in ${courseInstance.name}</h3>
                                                            </div>
                                                        <div class="modal-body">
                                                            <g:javascript>
                                                            $('#myModal${courseInstance.id}${param.getProperties().key}').modal({
                                                        keyboard: true
                                                            })
                                                            $('#myModal${courseInstance.id}${param.getProperties().key}').modal('hide')
                                                            </g:javascript>
                                                        </div>
                                                            <div class="modal-footer">
                                                        <a href="#" class="btn">Close</a>
                                                        <a href="#" class="btn btn-primary">Save changes</a>
                                                        </div>
                                                            </div>
                                                        </li>
                                         </g:each>
                                        </td>

                        <td>${fieldValue(bean: courseInstance, field: "description")}</td>

                    </tr>
                </g:each>
                </tbody>
            </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T06:40:31.217

在和参考之间有一个缺失的`<li>`元素......但这不应该是重点。`g:each``a`

我也在使用带有 grails 的引导程序，并且我还在导航栏下拉按钮中使用了模式，它可以工作（但需要我几个小时......）。

我不确定它是否重要，但我将模态模板呈现在下拉列表之外。我还将 javascript 设置为“模态化”模态 div 下方的对话框（不在`modal-body`.

你确定到处都是表达式： `myModal${courseInstance.id}${param.getProperties().key}`被评估为相同吗？

还要确保不要手动导入 modal.js（它已经在 bootstrap.js 中导入）。这导致了一些奇怪的行为。

我正在使用`<div class="modal hide fade" id="...">`模态。此自动隐藏 div 并添加一些漂亮的淡入淡出过渡（需要 transitions.js）。然后代码简化为：`$('#...').modal({ keyboard: true, show : false })`

也许其中一些技巧会有所帮助...

M。

# c++ - 如何在行中查找特定的字符串常量并复制以下内容

> ID：10166636
> 
> 赞同：0
> 
> 时间：2012-04-15T22:17:54.980
> 
> 标签：c++, struct, ifstream

我正在创建一个有点弱/模糊的数据库（我的经验很少，请原谅我的代码混乱）。为此，每次我的控制台程序启动时，我都会创建一个检查，检查是否已经创建了一个数据库（复制到 userlist.txt），如果没有创建一个新的，但是如果数据库存在，它应该全部复制到一个'vector users'（这是一个结构）我在'userbase'类中，然后将包含所有用户信息。

我的 userstats 结构看起来像这样，

```
enum securityLevel {user, moderator, admin};
struct userstats
{
    string ID;

    string name;
    string password;
    securityLevel secLev;                         
}; 
```

我将在此代码中包含来自文本文件的所有这些信息，

```
 int main()
    {
        Userbase userbase;  // Class to contain userinformation during runtime.

        ifstream inFile;
        inFile.open("userlist.txt");

        if(inFile.good())
        {
            // ADD DATE OF MODIFICATION
            cout << "USERLIST FOUND, READING USERS.\n";
            userstats tempBuffer;
            int userCount = -1;
            int overCount = 0;

            while(!inFile.eof())
            {
                string buffer;

                getline(inFile, buffer);
                if (buffer == "ID:")
                {
                    userCount++;

                    if (userCount > overCount)
                    {
                        userbase.users.push_back(tempBuffer);
                        overCount++;

                    }
                    tempBuffer.ID = buffer;
                    cout << "ID";           // Just to see if works

                }

                else if (buffer == "name:")
                {
                    cout << "name";         // Just to see if works
                    tempBuffer.name = buffer;

                }
                else if (buffer == "password:")
                {
                    cout << "password";     // Just to see if works
                    tempBuffer.password = buffer;
                }

            }
            if (userCount == 0)
            {
                userbase.users.push_back(tempBuffer);
            }

            inFile.close();
        }
... 
```

我尝试做的是阅读和分析文本文件的每一行。userlist.txt 的一个例子可能是，

```
created: Sun Apr 15 22:19:44 2012

mod_date: Sun Apr 15 22:19:44 2012

ID:1d
name:admin
password:Admin1
security level:2 
```

（我知道我还没有将“安全级别”读入程序）

编辑：也可能有更多用户只是在列表中前面用户的“安全级别：x”行之后。

现在，如果程序读取“ID:1d”行，它应该将其复制到结构中，最后我将把它全部放入向量 userbase.users[i] 中。然而，这似乎不起作用。它似乎没有抓住任何 if 语句。我以前有过这样的程序，所以我很困惑我做错了什么。我真的可以在这方面使用一些帮助。非常欢迎对代码提出任何其他类型的批评。

问候， 米克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T22:25:52.507

这些`if (buffer == ...)`都不会是`true`，因为行总是包含每行所包含的属性的值以及属性的类型。例如：

> 编号：1d

`getline()`读取时`buffer`将包含以下内容`ID:1d`：

```
if (buffer == "ID:") 
```

将`false`。改用[`string.find()`](http://en.cppreference.com/w/cpp/string/basic_string/find)：

```
if (0 == buffer.find("ID:")) // Comparing to zero ensures that the line
{                            // starts with "ID:".
    // Avoid including the attribute type
    // in the value.
    tempBuffer.ID.assign(buffer.begin() + 3, buffer.end());
} 
```

* * *

正如[jrok](https://stackoverflow.com/users/947836/jrok)所评论的，`while`用于读取文件的文件不正确，因为之后没有立即进行检查`getline()`。改成：

```
string buffer;
while(getline(inFile, buffer))
{
    ... 
```

# android - 直接在 C++ 中访问 Android APK 资产数据，无需资产管理器和复制

> ID：10166638
> 
> 赞同：12
> 
> 时间：2012-04-15T22:18:01.433
> 
> 标签：android, c++, native, apk, native-activity

我在我的引擎中使用纯 C++ 在 android 中创建游戏引擎。没有单个 java 文件。基本上它是一个只能存储到外部存储器的游戏。当我通过 adb 手动将我的资产数据移动到我的外部 sd 卡时，游戏已经运行良好且稳定。

```
adb push ..\..\Bin\Data /sdcard/Android/data/com.fantasyhaze.%SMALL_PACKAGE_NAME%/files/Data/ 
```

这不是一个好的解决方案，因为它无法交付。因此，我在 Assets 文件夹中有我的资产数据，该文件夹在构建过程中被移动到具有以下结构的 apk 文件中：

资产/数据/MoreFolders/Withsubfolders 资产/数据/EngineData.zip 资产/数据/ScriptData.zip

但我不知道这些文件在文件系统上的什么位置以便在 c++ 代码中访问它们。

所以我试图获取文件目录的路径。由于本机活动状态中的错误，我必须以普通代码检索信息。

```
// bug in 2.3 internalDataPath / externalDataPath = null using jni code instead
//FHZ_PRINTF("INTERNAL inter PATH = %s\n", state->activity->internalDataPath);  
//FHZ_PRINTF("EXTERNAL inter PATH = %s\n", state->activity->externalDataPath); 
```

其等效于 android.os.Environment.getFilesDir() 和 android.os.Environment.getExternalStorageState() 等的 c++ 代码

```
 // getPath() - java
        JNIEnv *jni_env = Core::HAZEOS::GetJNIEnv();
        jclass cls_Env = jni_env->FindClass("android/app/NativeActivity");
        jmethodID mid_getExtStorage = jni_env->GetMethodID(cls_Env, "getFilesDir","()Ljava/io/File;");
        jobject obj_File = jni_env->CallObjectMethod( gstate->activity->clazz, mid_getExtStorage);
        jclass cls_File = jni_env->FindClass("java/io/File");
        jmethodID mid_getPath = jni_env->GetMethodID(cls_File, "getPath","()Ljava/lang/String;");
        jstring obj_Path = (jstring) jni_env->CallObjectMethod(obj_File, mid_getPath);
        const char* path = jni_env->GetStringUTFChars(obj_Path, NULL);
        FHZ_PRINTF("INTERNAL PATH = %s\n", path);
        jni_env->ReleaseStringUTFChars(obj_Path, path);

        // getCacheDir() - java
        mid_getExtStorage = jni_env->GetMethodID( cls_Env,"getCacheDir", "()Ljava/io/File;");
        obj_File = jni_env->CallObjectMethod(gstate->activity->clazz, mid_getExtStorage, NULL);
        cls_File = jni_env->FindClass("java/io/File");
        mid_getPath = jni_env->GetMethodID(cls_File, "getAbsolutePath", "()Ljava/lang/String;");
        obj_Path = (jstring) jni_env->CallObjectMethod(obj_File, mid_getPath);
        path = jni_env->GetStringUTFChars(obj_Path, NULL);
        FHZ_PRINTF("CACHE DIR = %s\n", path); 
        jni_env->ReleaseStringUTFChars(obj_Path, path);

        // getExternalFilesDir() - java
        mid_getExtStorage = jni_env->GetMethodID( cls_Env,"getExternalFilesDir", "(Ljava/lang/String;)Ljava/io/File;");
        obj_File = jni_env->CallObjectMethod(gstate->activity->clazz, mid_getExtStorage, NULL);
        cls_File = jni_env->FindClass("java/io/File");
        mid_getPath = jni_env->GetMethodID(cls_File, "getPath", "()Ljava/lang/String;");
        obj_Path = (jstring) jni_env->CallObjectMethod(obj_File, mid_getPath);
        path = jni_env->GetStringUTFChars(obj_Path, NULL);
        FHZ_PRINTF("EXTERNAL PATH = %s\n", path);
        jni_env->ReleaseStringUTFChars(obj_Path, path);

        //getPackageCodePath() - java
        mid_getPath = jni_env->GetMethodID(cls_Env, "getPackageCodePath", "()Ljava/lang/String;"); 
        obj_File = jni_env->CallObjectMethod(gstate->activity->clazz, mid_getPath); 
        obj_Path = (jstring) jni_env->CallObjectMethod(obj_File, mid_getPath);
        path = jni_env->GetStringUTFChars(obj_Path, NULL);
        FHZ_PRINTF("Looked up package code path = %s\n", path); 
```

效果很好并导致

内部路径 = /data/data/com.fantasyhaze.rememory/files

缓存目录 = /data/data/com.fantasyhaze.rememory/cache

外部路径 = /mnt/sdcard/Android/data/com.fantasyhaze.rememory/files

查找包代码路径 = /mnt/asec/com.fantasyhaze.rememory-2/pkg.apk

但是资产文件夹中没有文件...

我需要访问一个文件夹作为正常工作目录来读取文件。这将是可能的

/mnt/sdcard/Android/data/com.fantasyhaze.rememory/files/Data

但是通过资产管理器将所有数据从资产文件夹（无论它在哪里）移动到这个文件夹，会导致内存消耗加倍。

资产 >1GB 意味着资产 >2GB，这是没有意义的。不仅如此，assert 文件夹似乎不能反复工作，并且仅适用于使用较大 pak 文件时不可能的小数据文件。也许在使用解压缩系统时可以直接从 apk 访问这些文件，然后 uzip 我的资源文件，但因此无论如何我都必须选择 apk 路径。

所以我的问题：

1.  文件系统上的 apk 中的 Assets 文件夹在哪里？
2.  检索apk位置或可执行文件位置的代码（c ++）是什么
3.  我可以使用普通的文件打开方法直接访问它吗？或者只有在我解压后才能访问它。如果我可以在不打开包装的情况下使用它，如何使用？
4.  如果安装了 sd 卡，检索信息的代码 (c++) 是什么？

我希望有一个人可以帮助我 ：）

**编辑：**添加缓存目录和包目录代码（以及它的输出路径），为其他需要它的人提供源代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T23:30:21.530

我发布答案而不是将其标记为重复，因为从技术上讲，您要求的详细信息比我将在此处链接的问题/答案中提供的更多。因此，要回答 4 点中的第一个，请参阅[使用 C++ 和 NativeActivity 类获取 Android APK 的名称](https://stackoverflow.com/questions/7701801/obtaining-the-name-of-an-android-apk-using-c-and-the-nativeactivity-class)。

至于检查SD卡是否挂载，应该比较简单。只需尝试打开 SD 卡上的目录或文件（您知道应该在那里），如果失败，您就知道 SD 卡不可用。请参阅[检查文件是否存在于 C 中的最佳方法是什么？（跨平台）](https://stackoverflow.com/questions/230062/whats-the-best-way-to-check-if-a-file-exists-in-c-cross-platform)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T06:09:25.910

您可能想查看“扩展文件”，请参阅[APK 扩展文件](http://developer.android.com/guide/market/expansion-files.html)。

据我了解，这为您提供了一个自动将资源文件（您的扩展文件）放在“共享存储位置”的系统。

所以我认为这将解决您的重复数据问题。

[android-developers 博客上](http://android-developers.blogspot.com/2012/03/android-apps-break-50mb-barrier.html)还有一篇简短的介绍文章。

# multithreading - Haskell：为什么 `par` 是这样定义的？

> ID：10166640
> 
> 赞同：5
> 
> 时间：2012-04-15T22:18:05.883
> 
> 标签：multithreading, haskell, parallel-processing, par

`par`声明为：

```
par  :: a -> b -> b 
```

请注意，该论点已被丢弃。为了使用 par ，您需要多次使用相同的表达式等技巧。

如果它的目的是并行执行a和b，为什么不这样定义呢？：

```
par  :: (a, b) -> (a, b) 
```

获取（未评估）表达式的元组并返回相同的表达式 - 虽然它们可能在后台线程上实现。

似乎后一种模型比前者更简单。为什么选择这样的设计？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-15T22:21:40.063

在前者中，您可以轻松触发两个以上的计算，

```
c1 `par` c2 `par` c3 `par` c4 `pseq` something c1 c2 c3 c4 
```

这在后者中会相当麻烦。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-16T10:12:56.243

您建议的元组版本可以在 Control.Parallel.Strategies 中作为 parTuple2 找到，其类型为：

```
evalTuple2 :: Strategy a -> Strategy b -> Strategy (a, b) 
```

至于为什么*par*是这样设计的，*par*是“更高级别”，正如[Real World Haskell](http://book.realworldhaskell.org/read/concurrent-and-multicore-programming.html)第 24 章所讨论的那样，他们并行化了快速排序：

> 我们代码的这些更改对于我们不需要说的所有事情来说都是显着的。
> 
> *   要使用多少个内核。
> *   线程之间进行什么通信。
> *   如何在可用内核之间分配工作。
> *   哪些数据在线程之间共享，哪些是私有的。
> *   如何确定所有参与者何时完成。

在[A Monad for Deterministic Parallelism](http://community.haskell.org/~simonmar/papers/monad-par.pdf)中，Marlow、Newton 和 Peyton Jones 写道：

> par 运算符是一种有吸引力的语言设计，因为它利用了惰性求值和期货之间的重叠。为了实现惰性求值，我们必须对尚未求值但稍后可能需要其值的表达式进行表示；同样，未来是一种计算，其值正在被并行评估，我们可能会等待。因此，par 被认为是一种机制，用于将惰性计算注释为并行评估可能有利可图，实际上将惰性计算转变为未来

# ms-access - Ms Access 如何在 ms access sql 查询中获取日期名称，即。周二

> ID：10166642
> 
> 赞同：0
> 
> 时间：2012-04-15T22:18:11.187
> 
> 标签：ms-access, date

我想在 ms 访问中的查询中包含当天的名称？我知道如何从格式字段中的查询设计器中将其作为“dddd”，但希望将其添加到 sql 编辑器中作为我的语句的一部分。

它是 select、from、where、group by、order by 语句的一部分，其中日期在 where 子句中指定，但我希望它显示为当天的名称，即星期二在另一列中。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T22:23:34.260

格式也适用于查询：

```
SELECT ADate, Format([ADate],"dddd") AS ADay
FROM Table1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T08:40:56.600

这是一个选择语句，它从日期时间返回日期名称

```
SELECT datename(dw,GETDATE()) AS 'Day Name' 
```

这给了我当前日期的名称。

# c - OpenCV - 计算黑色像素的数量

> ID：10166644
> 
> 赞同：2
> 
> 时间：2012-04-15T22:18:29.690
> 
> 标签：c, opencv, optimization, image-processing

我有一个二进制图像。在某个感兴趣的区域内，我需要计算黑色像素的数量。总是有循环遍历像素并计算它们的方法，但我正在寻找一种更有效的方法，因为我需要实时进行。

我找到了一种计算非零像素数量的方法（使用 cvCountNonZero()）。是否有任何这样的等效函数来计算零像素（似乎没有我所看到的那样）？如果不是，那么计算黑色像素的最有效方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-16T00:32:07.750

我相信*零像素*的数量可以看作是：

```
int TotalNumberOfPixels = width * height;
int ZeroPixels = TotalNumberOfPixels - cvCountNonZero(cv_image); 
```

# hibernate - Hibernate 交换出用于迁移现有数据的可嵌入类

> ID：10166656
> 
> 赞同：6
> 
> 时间：2012-04-15T22:20:09.693
> 
> 标签：hibernate, migrate, embeddable

我在这里不知所措，也许这很明显，因为我的 Hibernate 专业知识比其他领域要弱。

在遗留代码中有一个 Hibernate`@Entity`类`Foo`。它的属性之一是：

```
private OldBar bar = new OldBar(); 
```

`OldBar`是一个`@Embeddable`使用单列的类，`foobar`：

```
@Embeddable
public class OldBar {

  private String fooBar;

  @Column(length = 10, nullable = false)
  private String getFooBar() {
    return fooBar;
  }

  @SuppressWarnings("unused")
  private void setFooBar(String fooBar) {
    this.fooBar = fooBar;
  }
} 
```

最初的问题是我需要对 做一些事情`OldBar.fooBar`，但最初的设计有限制并且这个字段是私有的，阻止我对其进行子类化，所以我不得不创建一个完整的另一个类，`NewBar`来替换另一个并访问私人领域。我认为既然`NewBar`is 也`Embeddable`具有相同的`@Column`名称，我可以换掉类中的字段`Foo`：

```
private NewBar bar = new NewBar(); 
```

我想这样做是因为我在`foobar`列中有现有数据，并且我想透明地使用这些数据`NewBar`而不是`OldBar`.

通过跟踪日志，我看到它是在调用构造函数时创建的，正如人们所期望的那样，`Foo()`它的默认版本是 。`NewBar()`但是，按时间码来电`Foo.getBar()`，不知`bar`为何`null`！我假设 Hibernate`null`出于某种原因将其设置为 --- 但为什么 Hibernate 不从`foobar`列中读取数据并创建一个实例`NewBar`？`OldBar`为什么当我放回原位时它又开始工作了`NewBar`？当然，数据库本身没有说明哪些`@Embeddable`类映射到列，是吗？

*更新：*这变得越来越陌生。有时我会让代码过夜，第二天它就可以工作了！或者第二天就不行了！刚才不行（就是把`foobar`属性设置为，`null`而不是数据库中的值），所以我做了class `ExactCopyOfOldBar`，把`OldBar`. 效果很好！所以我切换回`NewBar`--- 只是撤销我的临时更改。它仍然有效，以前没有！是否存在某种缓存，其中 Hibernate 序列化值并且不从数据库中获取它们？这很奇怪。

*更新：*现在我根本不能`NewBar`上班了。我创建了 ，除了它有一个不同的名称之外，它`OtherBar`基本上相同，我将它插入并且它可以正常工作，正确读取嵌入的字符串。`NewBar`我切换回`NewBar`，我又得到`null`了。到底是怎么回事？

请注意，`Foo`正在通过 加载`net.databinder.auth.hib.AuthDataApplication.getUser(String username)`，这很简单：

```
return (DataUser) Databinder.getHibernateSession().createCriteria(getUserClass())
    .add(Restrictions.eq("username", username)).uniqueResult(); 
```

我一遍又一遍地验证`Foo`（用户）表有一行包含正确的数据，最重要的是该`foobar`字段有数据。为什么 Hibernate 给我`Foo`一个`null` `foobar`字段？为什么简单地从切换`NewBar`到`OtherBar`使其重新开始工作？为什么它一整天都在工作，然后我一夜之间就停止工作了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T17:23:19.487

这可能是答案；我将不得不等待几天，看看它是否确实解决了这个问题。实际上有两个部分。

首先，为了充分披露，我的`NewBar`课程实际上是`AbstractBar`. 我最终想要有不同类型的可嵌入条，所以我放置`@Embeddable`在`AbstractBar`关卡上，而不是在`NewBar`关卡上，并将私有`foobar`字段也放在`AbstractBar`关卡上。有趣的是，这在某些时候奏效了。正如我所提到的，有时我会在第二天回来，而 Hibernate 不会加载该`foobar`字段。我不明白为什么它不是一直有效或一直无效。

其次，当我试图摆脱这种层次结构以消除问题的一个根源时，我混淆了`AbstractBar`，`NewBar`但忘记将`@Embeddable`up from `AbstractBar`to提出来`NewBar`，所以 Hibernate 没有看到这是一个可嵌入的类，也不知道如何在没有指定的情况下将字符串加载到`NewBar`字段中。`@Embeddable`这就是为什么`OtherBar`（有`@Embeddable`注释）有效，但没有`NewBar`（没有`@Embeddable`注释）。这点我明白了。为什么 Hibernate 没有警告我它无法弄清楚如何加载字段，我不知道。

总而言之，如果您将`@Embeddable`注释从类中删除，Hibernate 将不会加载可嵌入字段。至于最初的问题，我只能猜想`@Embeddable`在类层次结构上使用它时会出现问题，并且最好将所有可嵌入字段保持在可嵌入类中的一个级别。我希望这就是问题所在。我们明天看看它是否继续工作。

# wordpress - WP Settings API 保存到多个选项

> ID：10166663
> 
> 赞同：0
> 
> 时间：2012-04-15T22:21:54.460
> 
> 标签：wordpress, settings, admin

在 Wordpress 设置 API 中，创建新的选项页面通常以

```
register_setting('sample_options', 'my_option');
add_settings_section('section', 'Sample Options', 'callback1', 'page');
add_settings_field('name', 'Label', 'callback2', 'page', 'section'); 
```

在这个简化的示例中，数据保存在选项中，`my_option`使得*name*的值可以通过

```
$option = get_option('my_option');
$name = $option['name']; // Got it 
```

但是，如果*name*字段的值不是用来放置新值而是更新一个已经存在的选项，`my_option`例如不是这样的`this_other_option`呢？我想我真正想要的是在使用设置 API 时是否可以将一个字段保存到多个选项（`my_option`和）？`this_other_option`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T00:37:08.160

我想你可以在`register_setting`. 它看起来像下面这样：

```
<?php
register_setting('sample_options', 'my_option', 'my_sanitize_callback');

function my_sanitize_callback($value, $option) {
    $value = mysql_real_escape_string($value);
    update_option('my_other_option', $value);
    return $value;
}
?> 
```

你可能需要稍微调整一下。我没有测试过。

# jquery - 加载更多后jQuery效果不起作用

> ID：10166665
> 
> 赞同：1
> 
> 时间：2012-04-15T22:22:14.833
> 
> 标签：jquery, css, drupal

我正在使用 Drupal 7 并通过页面上的 View 模块获取我的内容。而我的寻呼机[视图加载更多](http://drupal.org/project/views_load_more)模块。还有我的缩略图效果悬停，阴影等。使用此代码的图像悬停：

```
 var hoverImg = '<div class="hoverimg"></div>';

    $(".thumb").each(function(){
        $(this).children("div").each(function(){
            $(this).find("a").append(hoverImg);
        });
    });

    $(".thumb div").hover(function() {
        $(this).find(".hoverimg").animate({ opacity: 'toggle' });
    });

$(".thumb").hover(function() {
    $(this).find("div").each(function(){
        $(this).find(".shadow").fadeOut(500);
    });
}); 
```

并在我当前的缩略图上获取数字。这段代码：

```
var c = '';
var d = '';
$('.view-content div.views-row').each(function(){
    c = 0;
    d = 0;
    var i = 1;
    d = $(this).find('.thumbimg').length;
    $(this).find('.thumbimg').each(function(){
        sayi=i++;
        $(this).append('<div class="img_no">0'+sayi+'</div>');
    });
}); 
```

一切都好。起始页上的所有效果。但是当点击加载更多按钮时，我的效果不能在另一个页面上工作。

我的视图加载更多 js 代码：

```
/**
 * @file views_load_more.js
 *
 * Handles the AJAX pager for the view_load_more plugin.
 */
(function ($) {

  /**
   * Provide a series of commands that the server can request the client perform.
   */
  Drupal.ajax.prototype.commands.viewsLoadMoreAppend = function (ajax, response, status) {
    // Get information from the response. If it is not there, default to
    // our presets.
    var wrapper = response.selector ? $(response.selector) : $(ajax.wrapper);
    var method = response.method || ajax.method;
    var effect = ajax.getEffect(response);

    // We don't know what response.data contains: it might be a string of text
    // without HTML, so don't rely on jQuery correctly iterpreting
    // $(response.data) as new HTML rather than a CSS selector. Also, if
    // response.data contains top-level text nodes, they get lost with either
    // $(response.data) or $('<div></div>').replaceWith(response.data).
    var new_content_wrapped = $('<div></div>').html(response.data);
    var new_content = new_content_wrapped.contents();

    // For legacy reasons, the effects processing code assumes that new_content
    // consists of a single top-level element. Also, it has not been
    // sufficiently tested whether attachBehaviors() can be successfully called
    // with a context object that includes top-level text nodes. However, to
    // give developers full control of the HTML appearing in the page, and to
    // enable Ajax content to be inserted in places where DIV elements are not
    // allowed (e.g., within TABLE, TR, and SPAN parents), we check if the new
    // content satisfies the requirement of a single top-level element, and
    // only use the container DIV created above when it doesn't. For more
    // information, please see http://drupal.org/node/736066.
    if (new_content.length != 1 || new_content.get(0).nodeType != 1) {
      new_content = new_content_wrapped;
    }
    // If removing content from the wrapper, detach behaviors first.
    var settings = response.settings || ajax.settings || Drupal.settings;
    Drupal.detachBehaviors(wrapper, settings);
    if ($.waypoints != undefined) {
      $.waypoints('refresh');
    }

    // Set up our default query options. This is for advance users that might
    // change there views layout classes. This allows them to write there own
    // jquery selector to replace the content with.
    var content_query = response.options.content || '.view-content';

    // If we're using any effects. Hide the new content before adding it to the DOM.
    if (effect.showEffect != 'show') {
      new_content.find(content_query).children().hide();
    }

    // Add the new content to the page.
    wrapper.find('.pager a').remove();
    wrapper.find('.pager').parent('.item-list').html(new_content.find('.pager'));
    wrapper.find(content_query)[method](new_content.find(content_query).children());
    if (effect.showEffect != 'show') {
      wrapper.find(content_query).children(':not(:visible)')[effect.showEffect](effect.showSpeed);
    }

    // Attach all JavaScript behaviors to the new content
    // Remove the Jquery once Class, TODO: There needs to be a better
    // way of doing this, look at .removeOnce() :-/
    var classes = wrapper.attr('class');
    var onceClass = classes.match(/jquery-once-[0-9]*-[a-z]*/);
    wrapper.removeClass(onceClass[0]);
    var settings = response.settings || ajax.settings || Drupal.settings;
    Drupal.attachBehaviors(wrapper, settings);
  }

  /**
   * Attaches the AJAX behavior to Views Load More waypoint support.
   */
  Drupal.behaviors.ViewsLoadMore = {
    attach: function (context, settings) {
      if (settings && settings.viewsLoadMore && settings.views.ajaxViews) {
        opts = {
          offset: '100%'
        };
        $.each(settings.viewsLoadMore, function(i, setting) {
          var view = '.view-id-' + setting.view_name + '.view-display-id-' + setting.view_display_id + ' .pager-next a';
          $(view).waypoint(function(event, direction) {
            $(view).waypoint('remove');
            $(view).click();
          }, opts);
        });
      }
    },
    detach: function (context, settings, trigger) {
      if (settings && Drupal.settings.viewsLoadMore && settings.views.ajaxViews) {
        $.each(settings.viewsLoadMore, function(i, setting) {
          var view = '.view-id-' + setting.view_name + '.view-display-id-' + setting.view_display_id + ' .pager-next a';
          $(view, context).waypoint('destroy');
        });
      }
    }
     };
})(jQuery); 
```

我该如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T22:50:31.843

将您的 jQuery 更新到 1.7.1 或 1.7.2 并使用 $.on() 而不是 $.hover() - 使用 $.on()，您基本上是在给它一个“实时”处理程序，而无需附加单独处理每个元素。将主容器用作附加选择器，将 .thumb 和 .thumb img 选择器用作触发器选择器，如下所示：

```
$('#main').on('hover', '.thumb', function() {
    // do your hover stuff
} 
```

$.on 附加到一个 EXISTING 永久 DOM 元素并侦听要在与提供的选择器匹配的子元素上触发的事件。将任何事件侦听器附加到页面呈现时页面上不存在的对象将不起作用。并且 .live() 在 jQuery 1.7.x 中已被弃用。

# jquery-ui - jQuery UI Resizable creates Blue Highlighting in Chrome

> ID：10166666
> 
> 赞同：0
> 
> 时间：2012-04-15T22:22:15.010
> 
> 标签：jquery-ui

When I resize using the ui-resizable and begin dragging, other divs on the page are highlighted blue as if I selected them.

I tried using CSS and outline none on the classes but it doesn't work.

Please provide your insight.

Thank you- all suggestions are appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:04:54.573

Try this

```
$("element").resizable({ 
    resize: function(event) {           
        document.onselectstart = function () { return false; };
    },
    stop: function(event) {
        document.onselectstart = function () { return true; };
    }, 
}); 
```

# windows-phone-7 - Phonegap/Cordova 1.6.0 WP7 写入 www 文件夹中的文件

> ID：10166668
> 
> 赞同：0
> 
> 时间：2012-04-15T22:22:21.107
> 
> 标签：windows-phone-7, cordova, filewriter

我一直在尝试使用 phonegap/cordova API 中的示例，让应用程序将一些文本写入 windows phone 的 phonegap/cordova 1.6.0 下的文件，但没有任何运气。

该文件是在“www”文件夹中手动创建的 .txt 文件，通过使用 console.log 以及 .onerror 和 .onwriteend 事件函数，我可以看到作者应该完成了写入文件的任务成功，但文件的内容根本没有改变。

有谁知道这是什么原因？

这是来自 API 的示例（您可以在其中看到“readme.txt”，我使用了“/app/www/file.txt”）：

```
function onDeviceReady() {
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);
}

function gotFS(fileSystem) {
    fileSystem.root.getFile("readme.txt", {create: true, exclusive: false}, gotFileEntry, fail);
}

function gotFileEntry(fileEntry) {
    fileEntry.createWriter(gotFileWriter, fail);
}

function gotFileWriter(writer) {
    writer.onwriteend = function(evt) {
        console.log("contents of file now 'some sample text'");
        writer.truncate(11);  
        writer.onwriteend = function(evt) {
            console.log("contents of file now 'some sample'");
            writer.seek(4);
            writer.write(" different text");
            writer.onwriteend = function(evt){
                console.log("contents of file now 'some different text'");
            }
        };
    };
    writer.write("some sample text");
}

function fail(error) {
    console.log(error.code);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T19:00:56.630

我不是 100% 确定 WP7，但在其他平台上，您不能写入 www 目录，因为它是您的应用程序的只写部分。我确定这段代码可以正常工作，但它正在写入您的持久文件存储。

# php - 如何使用 PHP 中的第二个元素按字母顺序对数组进行排序

> ID：10166673
> 
> 赞同：0
> 
> 时间：2012-04-15T22:22:55.413
> 
> 标签：php, arrays, sorting, explode

将不胜感激任何帮助。:)

我有以下文本文件：

```
roomA     Springer, Jerry    js@email.com
roomB     Cruise, Tom        tc@email.com
roomC     Jovi, Bon          bj@email.com 
```

我想按姓氏对其进行排序，以便输出：

```
Cruise, Tom      roomB        tc@email.com
Jovi, Bon        roomC        bj@email.com
Springer, Jerry  roomA        js@email.com 
```

我知道如何加载文件：

```
$a = file("details.txt"); 
```

并认为我必须使用 explode() 来拆分数据（制表符分隔）：

```
$array = explode("\t", $a); 
```

这使名称成为数组中的第二个元素。

如何将字符串重新组合在一起，首先是名称，然后是房间和电子邮件？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T22:26:17.030

做一个`var_dump($array)`，它会显示你的索引。然后，您只需要相互交换两个元素。这是一个技巧：

```
list($array[0], $array[1]) = array($array[1], $array[0]); 
```

之后，您可以按照自己[`implode`](http://php.net/implode)的方式获得结果`explode`：

```
$line = implode("\t", $array); 
```

希望这会有所帮助。啊，好吧，为了排序，看看[`array_multisort`](http://php.net/array_multisort).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T22:35:55.737

PHP 不是这项工作的最佳工具。

```
awk -F"\t" '{print $2"\t"$1"\t"$3}' infile | sort > outfile 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T23:14:20.437

您的数据不是我知道的已知格式..它们之间的`tabs`和不是恒定的；`space`

***不要在生产中使用..我不得不破解我的方式***

尝试

```
$note  = "roomA     Springer, Jerry    js@email.com
roomB     Cruise, Tom        tc@email.com
roomC     Jovi, Bon          bj@email.com";

$data = array();
$info = explode("\n", $note);

echo"<pre>" ;
foreach($info as $line)
{
    $words = preg_split("/\\s/", $line);
    $words = array_filter($words); // remove spaces
    $words = array_values($words); // To reset the keys 
    $data[$words[1] . $words[2]] = $words[1] . $words[2] ."\t" . trim($words[0]) . "\t" . trim($words[3]) .  "\n";
}

asort($data); //Sorting the data ;
print_r(array_values($data)); 
```

输出

```
Array
(
    [0] => Cruise,Tom   roomB   tc@email.com

    [1] => Jovi,Bon roomC   bj@email.com

    [2] => Springer,Jerry   roomA   js@email.com

) 
```

**建议**

使用标准格式 suvh as `csv`,`json`或`xml`

我会尝试用 preg_match 改进它

# ios - CoreLocation 从坐标获取一定距离和方向的经纬度

> ID：10166676
> 
> 赞同：1
> 
> 时间：2012-04-15T22:23:24.727
> 
> 标签：ios, iphone, objective-c, core-location

我正在尝试确定某个距离并从另一个位置前往的位置。我在 iOS 中使用 CoreLocation 的纬度、经度。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T22:28:28.177

```
lat2 = asin(sin(lat1)*cos(d/R) + cos(lat1)*sin(d/R)*cos(θ))
lon2 = lon1 + atan2(sin(θ)*sin(d/R)*cos(lat1), cos(d/R)−sin(lat1)*sin(lat2)) 
```

`R`是您首选单位的地球半径。（6371 公里）

# c# - 单个物理印刷机的多个字符输入

> ID：10166679
> 
> 赞同：0
> 
> 时间：2012-04-15T22:24:30.237
> 
> 标签：c#, com-interop, awesomium

我正在尝试处理键盘事件的 Windows 消息并将它们传递给 awesomium webview。webview 对 windows 事件有本地处理，但主机程序必须捕获它们，然后发送它们。

我正在使用 .net 和 com 互操作来捕获和发送消息。据我所知，关键事件已传递，但输入是可变的。例如，在单次按下的文本框中输入了不同数量的字符。

这是我正在使用的代码示例（归功于 awesomium 网站上的 Sekhat）：

```
 private void CreateHook()
        {

            uint threadId = Win32.GetWindowThreadProcessId(hWnd, IntPtr.Zero);

            //hHook = Win32.SetWindowsHookEx(Win32.HookType.WH_CALLWNDPROC, wndProcDelegate, IntPtr.Zero, threadId);
            hHook = Win32.SetWindowsHookEx(Win32.HookType.WH_GETMESSAGE, wndProcDelegate, IntPtr.Zero, threadId);

        }

        private int WndProcHook(int nCode, IntPtr wParam, ref Win32.Message lParam)
        {
            if (nCode >= 0)
            {
                Win32.TranslateMessage(ref lParam); 
                WndProc(ref lParam);
            }

            return Win32.CallNextHookEx(hHook, nCode, wParam, ref lParam);
        }

        wndProcDelegate = WndProcHook; 
```

我是否错误地处理了事件，导致输入数量可变？我相信相关部分在上面，但如果需要可以发布其余部分。

附带说明一下，当我使用 WH_KEYBOARD 而不是 WH_GETMESSAGE 时，会引发 AccessViolationException。KEYBOARD 事件是否适合使用？感谢您提供任何帮助。

编辑：我做了一些进一步的调查，发现多条 0x102 (WM_CHAR) 类型的消息正在传递给我的程序。传递的数字与 awesomium 然后输出的字符数相匹配。我应该将此限制为仅第一条消息吗？虽然这可能有效，但我仍然想知道为什么会这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:32:56.507

我设法设计了一个可行的修复程序：

```
if (message.msg == 256)
{
    accept = true;
}
if (accept && message.msg == 258)
{
    view.InjectKeyboardEventWin((int)message.msg, (int)message.wparam, (int)message.lparam);
    accept = false;
}
if (message.msg != 258)
{
    view.InjectKeyboardEventWin((int)message.msg, (int)message.wparam, (int)message.lparam);
} 
```

此代码检查是否有按键按下，如果找到，则将接受设置为 true。仅当自最后一个按键后已收到按键时，才处理 char 消息。这允许文本输入，同时保留其他消息。但是，我仍然有兴趣发现根本原因。

# javascript - 此 Google Maps APIv3 代码中 (marker, i) 的含义是什么？

> ID：10166683
> 
> 赞同：1
> 
> 时间：2012-04-15T22:24:51.873
> 
> 标签：javascript, maps

```
 google.maps.event.addListener(marker, 'rightclick', (function(marker, i) {
                return function() {

                marker.setMap(null);

                }
                })(marker, i)); 
```

我从网上得到了这段代码，效果很好。我不确定函数尾部的“（marker，i）”的含义。有人可以对此进行更多解释吗？

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T22:26:40.727

这是一个自调用函数。

`(marker, i)`是调用函数时传递的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T22:29:09.550

关键是创建一个新的范围。

如果你只是这样做：

```
google.maps.event.addListener(marker, 'rightclick', function() {
        marker.setMap(null);
    }
}); 
```

`marker`如果以后更改，它将失败。此代码可能在循环中使用。然而，这`i`是毫无意义的。可以简化为：

```
google.maps.event.addListener(marker, 'rightclick', (function(marker) {
    return function() {
        marker.setMap(null);
    }
})(marker)); 
```

# github - 在我的 GitHub 中链接到 CSS 文件的正确方法是什么？

> ID：10166684
> 
> 赞同：1
> 
> 时间：2012-04-15T22:25:11.327
> 
> 标签：github

例如，我可以从以下访问 twitter 资源

[http://twitter.github.com/bootstrap/assets/css/bootstrap.css](http://twitter.github.com/bootstrap/assets/css/bootstrap.css)

当我尝试从我自己的存储库访问“原始”文件时，我得到

[https://raw.github.com/nodeninja/book/master/chapter02/bootstrap/public/stylesheets/docs.css](https://raw.github.com/nodeninja/book/master/chapter02/bootstrap/public/stylesheets/docs.css)

由于https，我猜测它在网页中无法正常工作。做这个链接的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T22:59:25.283

GitHub 有一个页面工具可以做到这一点

[http://help.github.com/pages/](http://help.github.com/pages/)

这就是我想要的

[http://nodeninja.github.com/book/chapter02/docs.css](http://nodeninja.github.com/book/chapter02/docs.css)

# python - 如何在 try/except 中退出程序？

> ID：10166686
> 
> 赞同：39
> 
> 时间：2012-04-15T22:25:20.077
> 
> 标签：python, exception-handling

我有这个尝试/除代码：

```
document = raw_input ('Your document name is ')

try:
    with open(document, 'r') as a:
        for element in a:
           print element

except:
    print document, 'does not exist' 
```

打印“[文件名]不存在”后如何退出程序？ `break`显然不工作，`pass`我不想有任何崩溃错误，所以`sys.exit`不是一个选择。

请忽略这`try`部分 - 它只是一个假人。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-04-15T22:27:04.243

使用 sys.exit：

```
import sys

try:
    # do something
except Exception, e:
    print >> sys.stderr, "does not exist"
    print >> sys.stderr, "Exception: %s" % str(e)
    sys.exit(1) 
```

一个好的做法是打印发生的异常，以便之后进行调试。

您还可以使用`traceback`模块打印堆栈跟踪。

请注意，您在 sys.exit 中返回的 int 将是您程序的返回码。要查看您的程序返回的退出代码（它将为您提供有关发生的事情并且可以自动化的信息），您可以执行以下操作：

```
echo $? 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-15T22:26:41.107

使用

```
sys.exit(1) 
```

不是崩溃错误，这是退出程序的一种完全正常的方式。退出代码 1 是一种约定，表示出现问题（如果运行成功，您将返回 0）。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-10-13T07:56:09.750

只是重新提高它。对开发者更友好

```
document = raw_input ('Your document name is ')

try:
    with open(document, 'r') as a:
        for element in a:
           print element

except:
    print document, 'does not exist'
    raise 
```

检查引发异常部分中关于重新引发错误的[python 文档](https://docs.python.org/2/tutorial/errors.html#user-defined-exceptions)`except`。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-04-15T22:30:59.003

您还可以将代码放入函数中并发出返回。您可以将其称为 main ，您可以从脚本中调用它。

```
def main():
    document = raw_input ('Your document name is ')

    try:
        with open(document, 'r') as a:
            for element in a:
               print element

    except:
        print document, 'does not exist'
        return

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-03-25T11:30:02.107

如果您在 a 中使用`if`语句`try`，您将需要多个语句`sys.exit()`才能实际**退出**程序。

例如，您在调用某个文件的执行时正在解析参数，例如`$./do_instructions.py 821`：

```
import sys

# index number 1 is used to pass a set of instructions to parse
# allowed values are integer numbers from 1 to 4, maximum number of instructions is 3
arg_vector = "821" # <- pretending to be an example of sys.argv[1]

if len(arg_vector) > 3:
    sys.exit(2) # <- this will take you out, but the following needs an extra step.

# for an invalid input (8). 
for i in arg_vector:

    # to validate that only numbers are passed as args.
    try:
        int(i) # <- 8 is valid so far

        # value (8) is not  valid, since is greater than 4
        if (int(i) == 0) or (int(i) > 4): 
            print("Values must be 1-4")
            # the following call does not takes you out from the program,
            # but rise the SystemExit exception.
            sys.exit(2) 

    except SystemExit: # <- needed to catch the previous as the first evaluation
        # The following parameter "2" is just for this example
        sys.exit(2) # <- needed to actually interrupt the execution of the program/script. 

    # if there is no "except SystemExit:", the following will be executed when the 
    # previous "if" statement evaluates to True and the sys.exit(2) is called.
    #
    # and the "print("Only num...") function will be called, even when the intention 
    # of it is to advice the *user* to use only numbers, since 8 is a number this
    # shouldn't be executed.
    except:
        print("Only numbers are allowed.")
        sys.exit(2) 
```

否则，您希望对每个评估使用一个**try-except**块。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-06-25T03:16:59.180

可能不是最佳实践，但它对我有用：

```
import sys    

close = False
try:
    if SomethingBadHappend:
        close = True
except:
    pass
if close:
    sys.exit(1) 
```

接近剂量似乎在“尝试”内不起作用。

# javascript - $().load() 而不是加载整个页面，但需要在所有页面上保留菜单

> ID：10166691
> 
> 赞同：6
> 
> 时间：2012-04-15T22:26:04.190
> 
> 标签：javascript, jquery, html

`$().load()`我想使用 jQuery/AJAX功能重新加载我网站的内容区域。但我的问题是，无论您的输入网址如何，都需要在所有页面上显示`header`和。`footer`

我的网站是使用模板构建的，所以我的第一个想法是删除独特内容上方和下方的布局输出，因为我会阻止即。菜单被显示两次。但我意识到，如果用户没有通过第一页进入我的网站，比如说 index.php，他将永远不会看到页眉或页脚，只是一个无样式的文本页面。

我的问题是，您将如何解决这个问题？允许使用 JavaScript (+ jQuery) 和 HTML5。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T22:31:52.860

页面.php：

```
<div id="header"></di>
<div id="mainContent"></div>
<div id="footer"></div> 
```

js：

```
$("#content").load("page.php #mainContent"); //that will only load mainContent 
```

或者：

```
$.get('page.php', function (data) {
    data = $(data).find('#mainContent').html();
    $("#content").empty().append(data);
}); 
```

有关更多信息，请参阅 jQuery 文档中有关[load() 和页面片段的部分](http://api.jquery.com/load/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T22:42:29.790

看起来你可以有几个不同的选择。如果用户正在访问您的网站但没有转到第一页，那么您只需检查以验证页眉和页脚在页面加载后是否显示。如果未找到，则应创建初始站点布局。您甚至可以决定以这种方式构建第一页 (index.php)，以便以相同的方式处理每个页面

```
$(document).ready(function() {
    // If an element of id "header" isn't found in the DOM
    if (!$("#header").length() > 0) {
        // Generate the header and insert it as the first element of the DOM
    }
    if (!$("#footer").length() > 0) {
        // Generate the footer and append it to the last element of the DOM
    }
}); 
```

毫无疑问，您也可以接受其他解决方案；您可能在每个页面上都有一个包含，只有在通过 GET 而不是 AJAX 请求请求该页面时才包含该页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T22:35:27.517

您正在寻找的技术称为 Hijax，您可以在其中拦截来自 AJAX 请求的响应，并且只提取您打算在呈现的页面上替换的 DOM 部分。

一般的想法是实际的 URL 本身仍然会返回完整的页面内容，因此如果请求来自新访问者，则整个 DOM 将加载，但如果请求来自用户单击页面上的 hijaxed 链接如果指定了 CSS 选择器，则仅替换选择器标识的页面部分。

看看[Hijax - jQuery 插件](http://cs.yarontadmor.com/hijax/index.php)。实际站点本身是使用插件构建的，如果您查看网络选项卡并查看 Chrome 或 Firebug 工具中的检查器，您可以看到内容已被换出，而无需替换菜单、标题或其他元素没有被替换。

# iphone - 显示 UITableView 的部分标题，即使它是空的

> ID：10166692
> 
> 赞同：4
> 
> 时间：2012-04-15T22:26:14.757
> 
> 标签：iphone, ios

即使我的部分中没有对象，我也想显示我的表格视图的部分标题。

我的空白部分没有调用这些方法：

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section;
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section; 
```

编辑：我找到了答案。

当我没有得到任何对象时，我将 0 发送到 numberOfSectionsInTableView，这就是没有调用这些方法的原因。

所以即使一个部分是空的，我的标题也会显示

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T12:06:35.337

我找到了答案。

当我没有得到任何对象时，我将 0 发送到 numberOfSectionsInTableView，这就是没有调用这些方法的原因。

所以即使一个部分是空的，我的标题也会显示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T22:39:38.337

因此，请尝试在您的部分中至少放置一个占位符对象。您可以在相应的 UITableViewCell 中设置默认文本或信息。或者您甚至可以将默认单元格的高度设置为较低的值

```
- (CGFloat)tableView:(UITableView *)tableView 
  heightForRowAtIndexPath:(NSIndexPath *)indexPath 
```

# ajax - 如何正确使用 pjax？

> ID：10166694
> 
> 赞同：0
> 
> 时间：2012-04-15T22:26:17.320
> 
> 标签：ajax, jquery, pjax

我对 pjax 的工作原理有一个非常粗略的想法，因此在我的网站上对其进行了非常粗略的实现。我在所有 jquery 的开头都有这段代码

`$('li a').pjax('#container');`

你会点击的东西看起来像这样

`<li><a href="main.html"><div id="sortmain" class="catagories">main</div></a></li>`

所以当我点击它时，`li`它将 main.html 加载到容器 div 中。但它有故障而且相当缓慢。我该如何改进呢？另外，因为 main.html 是一个真实的文档，当我刷新页面时它只显示 main.html 输出的内容，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T03:08:33.993

如果不查看您的网站，我无法说出它为什么缓慢或出现故障。

如果你想`main.html`成为一个完整的页面（以便在没有服务器端处理的情况下进行刷新），你可以使用 pjax 中的片段选项：

```
$('li a').pjax("#container", { fragment: "#container" }); 
```

这将`#container`使用 PJAX 更新 div（如果 pushState 可用），并且在旧版浏览器上，您的站点将像以前一样工作。

# java - 如何在不关闭 OutputStream 对象的情况下强制刷新？

> ID：10166701
> 
> 赞同：7
> 
> 时间：2012-04-15T22:27:11.310
> 
> 标签：java, android, sockets, outputstream

我的问题在于以下假设，我希望这些假设是正确的，因为当我在谷歌搜索我的问题时阅读它们时，我相信这些假设：

1.  关闭套接字的 OutputStream 也会关闭套接字
2.  OutputStream 的 flush() 方法什么都不做

因此，无论如何，我基本上都需要将数据从我的 OutputStream 对象中刷新出来，以使我的应用程序能够正常工作。

如果您对详细信息感兴趣，请查看以下两个链接：

. [奇怪的行为：将图像从 Android 手机发送到 Java 服务器（代码工作）](https://stackoverflow.com/questions/10161371/weird-behavior-sending-image-from-android-phone-to-java-server-code-working)

此问题已通过关闭 OutputStream 得到解决。这样做会将所有数据刷新到套接字的另一端，并使我的应用程序进一步工作，但这个修复很快引发了问题 2 - 相应的套接字也被关闭：

. [SocketException - “套接字已关闭”，即使 isConnected() 返回 true](https://stackoverflow.com/questions/10163358/socketexception-socket-is-closed-even-when-isconnected-returns-true)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T22:31:56.527

您可以调用 OutputStream 的 flush 方法而不是 close。从 OutputStream 继承的具体类将覆盖 flush() 以执行其他操作（将数据写入文件或通过网络发送）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T00:13:02.450

> OutputStream 的 flush() 方法什么都不做。

这是不正确的。

确实，类`flush()`提供的基本实现`OutputStream`什么都不做。但是，您的应用程序将调用您正在使用的*实际*流类提供的该方法的版本。如果流类没有直接写入语义，它将覆盖`flush()`以执行所需的操作。

简而言之，如果需要刷新（并且Socket*输出*流需要刷新），那么调用`flush()`将做正确的事情。（如果某些互联网资源告诉您否则它要么是错误的，要么是您误解了它。）

* * *

仅供参考，基础`OutputStream`实现`flush()`为无操作的原因是：

*   一些输出流类在刷新时不需要做任何事情；例如`ByteArrayOutputStream`，和
*   对于`flush()`不是无操作的流类，无法在基类级别实现操作。

他们可以（理论上）将流 API 设计为`OutputStream`抽象类（和`flush()`抽象方法）或接口。然而，这个 API 在 Java 1.0 之前就被有效地冻结了，当时没有足够的实际 Java 编程经验来意识到 API 设计是次优的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T22:30:48.710

> 关闭套接字的 OutputStream 也会关闭套接字

真的。

> OutputStream 的 flush() 方法什么都不做

错误的。有覆盖。请参阅 Javadoc 中的`FilterOutputStream.flush()`,`BufferedOutputStream.flush()`​​ , `ObjectOutputStream.flush()`, 等等。

所以你最初的问题是不存在的，所以你不需要导致问题 #2 的“解决方案”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-29T09:04:55.137

我有同样的问题。在流的末尾添加“\n”。刷新有效，但命运不知道消息是否结束

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-24T17:28:25.897

我会试一试。我遇到了同样的问题。关闭输出流是我可以“刷新”数据的唯一方法。但因为我仍然需要不是一个选项的输出流。所以第一次我发送字节数组长度，out.writeInt，然后是数组本身。当所有字节都被读取时，即 buffer.length == in.readInt() 我打破循环

```
 ByteArrayOutputStream dataBuffer = new ByteArrayOutputStream();
    byte[] buffer = new byte[1024];
    byte[] fileBytes;
    int n;
    int length;

    try
    {
        size = in.readInt();

        while((n = in.read(buffer)) != -1)
        {
            dataBuffer.write(buffer, 0, n);

            if(dataBuffer.toByteArray().length == length)
            {
                fileBytes = dataBuffer.toByteArray(); break;
            }
        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-20T20:36:23.720

# YES on Android flush() 什么都不做（基于 api 23 的示例）

```
public Socket() {
    this.impl = factory != null ? factory.createSocketImpl() : new PlainSocketImpl();
    this.proxy = null;
}

public class PlainSocketImpl extends SocketImpl {

    @Override protected synchronized OutputStream getOutputStream() throws IOException {
        checkNotClosed();
        return new PlainSocketOutputStream(this);
    }

}

private static class PlainSocketOutputStream extends OutputStream {
        // doesn't override base class flush();
} 
```

> 要在不关闭套接字的情况下刷新输出流，您可以关闭输出：

```
protected void shutdownOutput() throws IOException 
```

-- 这将关闭 WRITE 文件描述符。

**除了使用输出流，您可以直接写入文件描述符**或通过使用 OutputStream 创建自己的 Socket 实现，这将覆盖刷新方法（例如，在 c 中使用[Berkeley 套接字](https://en.wikipedia.org/wiki/Berkeley_sockets)实现（通过本机调用）。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-04-19T09:19:52.853

你真的需要冲洗吗？我还有一个问题，c# 服务器上的侦听器无法接收从 android 发送的数据（我试图同步获取数据）。

我确信这是因为在 Android 端，以下代码没有刷新。

```
OutputStream str = btSocket.getOutputStream();
str.write(data_byte);
// "This implementation does nothing"
str.flush(); 
```

事实证明，如果我在服务器的侦听器上使用异步数据检索 - 它会获取数据，并且不需要客户端的 flush()！

# php - 从指定键获取值

> ID：10166702
> 
> 赞同：0
> 
> 时间：2012-04-15T22:27:53.897
> 
> 标签：php

我使用 imdb api

```
 $homepage = file_get_contents('http://www.imdbapi.com/?i='.$imdbID);
            $arr = json_decode($homepage); 
```

在 $arr 我有有关相关电影的所有数据。

```
 Maguire [Year] => 1996 [Rated] => R [Released] => 13 Dec 1996 [Genre] => Comedy, Drama, Romance, Sport [Director] => Cameron Crowe [Writer] => Cameron Crowe [Actors] => Tom Cruise, Cuba Gooding Jr., Renée Zellweger, Kelly Preston [Plot] => When a sports agent has a moral epiphany and is fired for expressing it, he decides to put his new philosophy to the test as an independent with the only athlete who stays with him. [Poster] => http://ia.media-imdb.com/images/M/MV5BMTkxNjc2NjQwOF5BMl5BanBnXkFtZTcwMDE2NDU2MQ@@._V1_SX320.jpg [Runtime] => 2 hrs 19 mins [Rating] => 7.2 [Votes] => 97329 [ID] => tt0116695 [Response] => True ) 
```

我想要的是达到指定键的值。

有没有这样的功能？例如，我将给出 key=> Actors 并获取所有演员？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T22:32:03.470

：/ 像这样？

```
$homepage = file_get_contents('http://www.imdbapi.com/?i='.$imdbID);
$arr = json_decode($homepage, true);
print($arr['Actors']); 
```

# javascript - 在 Safari 扩展中设置新选项卡/窗口 URL

> ID：10166703
> 
> 赞同：4
> 
> 时间：2012-04-15T22:28:08.270
> 
> 标签：javascript, safari-extension

我正在创建一个 Safari 扩展程序。如何手动将新选项卡/窗口设置为我选择的 URL？我使用了这篇文章中的一些逻辑来确保我只接管用户创建的选项卡/Windows [Safari 扩展：全新选项卡的事件？](https://stackoverflow.com/q/10148711)

我设置了我的新标签事件监听器：

```
safari.application.addEventListener("open", handleOpen, true); 
```

使用它来处理打开的选项卡/窗口：

```
function handleOpen(e) {
    if (e.target instanceof SafariBrowserTab) {
        e.target.addEventListener('beforeNavigate', handleBeforeNavigate, false);
        setTimeout(function () {
            e.target.removeEventListener('beforeNavigate', handleBeforeNavigate, false);
            takeOverTab();
        }, 50);
    }
}

function handleBeforeNavigate(e) {
    e.target.removeEventListener('beforeNavigate', handleBeforeNavigate, false);
    if (e.url === null) {
        takeOverTab();
    }
}

function takeOverTab() {
window.location.href = "http://www.yahoo.com";
} 
```

我可以在打开新选项卡/窗口时发出警报，但我一生都无法弄清楚如何实际浏览到 url。我尝试了 window.location.href 但这似乎没有任何作用，当我打开一个新标签时，我仍然会得到“热门网站”页面。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T21:34:41.860

改变你的`takeOverTab`功能如下：

```
function takeOverTab(tab) {
    tab.url = "http://www.yahoo.com";
} 
```

并修改函数调用以包含对选项卡的引用：

```
takeOverTab(e.target); 
```

此外，在您的`beforeNavigate`处理程序中，您应该添加`e.preventDefault()`以防止选项卡加载它要加载的任何内容：

```
function handleBeforeNavigate(e) {
    e.target.removeEventListener('beforeNavigate', handleBeforeNavigate, false);
    if (e.url === null) {
        e.preventDefault();
        takeOverTab();
    }
} 
```

# iphone - 有没有办法在分组的 UITableView 中不显示每个部分的顶部和底部单元格的圆角？

> ID：10166704
> 
> 赞同：0
> 
> 时间：2012-04-15T22:28:22.920
> 
> 标签：iphone, uitableview, dropshadow, cornerradius

我想将它们改为直矩形，并在每个部分的四个边上添加一个阴影。

有没有办法做到这一点？我在每个单元格上尝试了以下操作，但它似乎不适用于我。

```
[cell.layer setCornerRadius:0.0f];
[cell.layer setBorderColor:[UIColor clearColor].CGColor];
[cell.layer setBorderWidth:1.0f];
[cell.layer setShadowColor:[UIColor blackColor].CGColor];
[cell.layer setShadowOpacity:0.4f];
[cell.layer setShadowRadius:0.8f];
[cell.layer setShadowOffset:CGSizeMake(0.8f, 0.8f)]; 
```

我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T02:38:20.560

添加另外两行，一在顶部，一在底部。实现 heightForCellAtIndexPath: 并为这些单元格返回 0 高度。

# android - Android：应用程序终止后 SoundPool 不工作

> ID：10166708
> 
> 赞同：0
> 
> 时间：2012-04-15T22:28:36.757
> 
> 标签：android, soundpool

我注意到一个奇怪的问题：我的应用程序使用 SoundPool 播放声音。当我在播放某些声音时使用返回键终止应用程序时，下次启动应用程序时 SoundPool 将无法正常工作（即使我启动另一个使用 SoundPool 的应用程序，声音也不工作，我必须重新启动设备让 SoundPool 再次工作）。

我找到了一个有帮助的解决方案：我必须在 onDestroy() 方法中停止所有播放声音，然后调用 SoundPool.release()。

问题是，当用户使用任务管理器杀死应用程序时，不会调用 onDestroy 并且我无法停止/释放声音。有谁知道

a) 我如何检测到应用程序被杀死 b) 使用另一种机制来防止 SoundPool 在应用程序终止后无法工作

在装有 Android 2.3.6 的三星 Galaxy S Plus 上测试

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:48:27.580

具有可覆盖的`SurfaceView`方法，例如`surfaceCreated`和`surfaceDestroyed`。另外`release`，您应该调用 ，而不是调用`soundPool.stop(streamId)`，其中`streamId`是该`soundPool.play`方法返回的整数，如果您使用错误的`streamId`循环声音不会停止。`streamId`我在使用另一个我没有循环的声音时遇到了同样的问题。

# php - mysqli 对 php 数据的限制

> ID：10166710
> 
> 赞同：1
> 
> 时间：2012-04-15T22:28:45.337
> 
> 标签：php, mysql, mysqli

我的问题是我有一个很大的数据库（10000+ 行）并且想用 php 和 mysqli 一次得到它们。但是当我用 var_dump 打印所有结果时，我只得到第一行。就像那是唯一发生的事情。所以我的问题是：php mysql 连接有限制吗？还是我的代码中有错误。

这是我的代码：

```
$link = mysqli_connect("localhost","root","","ows_index2");
$info_wu = mysqli_query($link,"SELECT `hostname`, `page` from `pages`");
$row = mysqli_fetch_assoc($info_wu);
var_dump $row; 
```

（带有php括号，登录很好，因为我得到了第一行）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T22:31:32.950

这是您的代码中的错误。

这个：

```
$row = mysqli_fetch_assoc($info_wu);
var_dump($row); 
```

应该：

```
while($row = mysqli_fetch_assoc($info_wu))
    var_dump($row); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T22:41:42.730

如果你有 PHP 5.3+，你可以使用新的[mysqli_fetch_all()](http://www.php.net/manual/en/mysqli-result.fetch-all.php)代替 mysqli_fetch_assoc()。

```
$rows = mysqli_fetch_all($info_wu, MYSQLI_ASSOC);

var_dump($rows); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T22:42:51.513

`mysqli_fetch_assoc`一次只取一行。~~并且没有任何东西可以使用`mysqli`AFAIK 获取所有行（不是完整的 mysqli pro）。~~（编辑：[有](https://stackoverflow.com/a/10166802/367456)）

我建议你把它变成一个迭代器，然后像数组一样使用这个迭代器：

```
/**
 * Iterator that fetches each iteration value from a
 * function until it is not string and equals false.
 */
class FetchIterator extends NoRewindIterator
{
    /**
     * @var string
     */
    private $fetchCallback;
    /**
     * number of the current iteration
     * @var int
     */
    private $virtual;
    /**
     * cache of the current value
     * @var mixed
     */
    private $current;

    /**
     * @param string $fetchCallback
     */
    public function __construct($fetchCallback)
    {
        $this->fetchCallback = $fetchCallback;
        $this->virtual = 0;
    }

    /**
     * Return the current element
     * @link http://php.net/manual/en/iterator.current.php
     * @return mixed Can return any type.
     */
    public function current()
    {
        $this->virtual || $this->next();
        return $this->current;
    }

    /**
     * Return the key of the current element
     * @link http://php.net/manual/en/iterator.key.php
     * @return scalar scalar on success, integer
     * 0 on failure.
     */
    public function key()
    {
        $this->virtual || $this->next();
        return $this->virtual - 1;
    }

    /**
     * Checks if current position is valid
     * @link http://php.net/manual/en/iterator.valid.php
     * @return boolean The return value will be casted to boolean and then evaluated.
     * Returns true on success or false on failure.
     */
    public function valid()
    {
        $this->virtual || $this->next();
        return $this->validate();
    }

    /**
     * @return bool
     */
    private function validate()
    {
        return FALSE != $this->current || is_string($this->current);
    }

    /**
     * Move forward to next element
     * @link http://php.net/manual/en/iterator.next.php
     * @return void Any returned value is ignored.
     */
    public function next()
    {
        if ($this->virtual && ! $this->validate()) {
            return;
        }
        $this->fetch();
        $this->virtual++;
    }

    /**
     * fetch value from callback. can be called
     * after assigning a new callback while
     * in iteration.
     */
    public function fetch()
    {
        $func = $this->fetchCallback;
        $this->current = $func();
    }

    /**
     * number of times the fetch callback function
     * has been called so far.
     *
     * @return int
     */
    public function getCallCount()
    {
        return $this->virtual;
    }

    /**
     * @return callback
     */
    public function getFetchCallback()
    {
        return $this->fetchCallback;
    }

    /**
     * Set callback for subsequent iterations.
     *
     * @param callback $fetchCallback
     * @return FetchIterator
     */
    public function setFetchCallback($fetchCallback)
    {
        $this->fetchCallback = $fetchCallback;
        return $this;
    }
} 
```

用法：

```
$info_wu = mysqli_query($link,"SELECT `hostname`, `page` from `pages`");
$fetchFunction = function() use ($info_wu) {
    return mysqli_fetch_assoc($info_wu);
}
$it = new FetchIterator($fetchFunction);
$rows = iterator_to_array($it); 
```

变量`$rows`现在是一个数组，每个元素包含一行。而不是`iterator_to_array`您也可以使用`foreach`并自行处理每一行。

迭代器代码对于您的情况可能看起来有点过多，它是一种更通用的代码，可用于数据库结果操作的许多情况。一篇相关的博客文章是：[Some PHP Iterator Fun](http://hakre.wordpress.com/2012/02/28/some-php-iterator-fun/)，展示了如何多次迭代同一个迭代器。

# c - C 编程 - 如何仅使用循环打印带有小数部分的数字？

> ID：10166712
> 
> 赞同：0
> 
> 时间：2012-04-15T22:28:51.407
> 
> 标签：c, loops

我目前正在学习 C 编程课程的基本介绍，对于我们当前的任务，我将编写一个程序来使用循环将公里数转换为英里数——没有 if-else、switch 语句或我们拥有的任何其他构造'还没有学过是允许的。所以基本上我们只能使用循环和一些运算符。该程序将为一个数字输入生成三个相同的表（从 1 公里开始到输入值），使用 while 循环进行第一组计算，for 循环用于第二组计算，do 循环用于第三组计算。

我已经编写了整个程序，但是在让它识别带有小数部分的输入时遇到了一些问题。

代码可以很好地读取并转换整数，但由于增量仅增加 1，它不会打印带有小数部分的数字（例如 3.2、22.6 等）。

有人可以指出我正确的方向吗？我真的很感激任何帮助！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T22:38:28.413

目前尚不清楚您要获得什么作为输出。您使用从 3.2 开始的示例，因此基于此，并基于您当前的程序，您的输出是：

```
 KILOMETERS       MILES    (while loop)
 ==========       =====
   1.000          0.620
   2.000          1.240
   3.000          1.860 
```

问题是您的表格结束时没有给出 3.2 的值吗？解决该问题的一种简单方法（根据您的要求仅使用循环语句）是添加以下代码：

```
while (count < km)
{
    printf ("%8.3lf %14.3lf\n", km, KM_TO_MILE * km);
    count = km;
} 
```

这确实是`if`变相的声明，我不知道您的教授是否会接受它，但它确实提供了最后一行输出。

您是否需要为每条线路添加增加 1.0（公里）的条目？如果不是，也许更好的解决方案是确定从一条线到下一条线的偏移量，这使您可以在有限的行数上在 1.0 和 km 之间进行迭代。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T22:44:10.177

一个简单的解决方案是将输入 ( `km`) 乘以 10、100 或 1000。然后将结果 ( `mi`) 除以相同的常数。但是避免在循环中打印结果，把它从那里拿出来。不过，您可能会失去精确度（这是您的下一个练习 :)

```
#include <stdio.h>
#define KM_TO_MILE .62 

#define NAMEITHOWYOULIKE 100.0

main (void)
{
  double km, mi, count;                                                          

  printf ("This program converts kilometers to miles.\n");

    do                                                                      
    {
           printf ("\nEnter a positive non-zero number");                   
           printf (" of kilometers of the race:  ");
           scanf  ("%lf", &km);                                             
           getchar();                                                      
    }while (km <= 1);                                                       

    km = km * NAMEITHOWYOULIKE;

    printf ("\n KILOMETERS       MILES    (while loop)\n");                      
    printf (" ==========       =====\n");

    count = 1;                                                              
    while (count <= km)                                                     
    {                                                                       
          mi = KM_TO_MILE * count;
     ++count;                                                                           
    }
    printf ("%8.3lf %14.3lf\n", count/NAMEITHOWYOULIKE, mi/NAMEITHOWYOULIKE);                  
    getchar();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T22:46:43.130

如果你想要这个输出：

```
 KILOMETERS       MILES    (while loop)
 ==========       =====
   1.000          0.620
   2.000          1.240
   3.000          1.860
   3.200          1.984 
```

只需在循环之后添加以下内容`while`（以获得独家“最终结果”）：

```
mi = KM_TO_MILE * km;
printf("%8.3lf %14.3lf\n", km, mi); 
```

或一个包容性的“最终结果”，以防止在使用整数时最后两个结果相同：

```
while (km > count)
{
    mi = KM_TO_MILE * km;
    printf("%8.3lf %14.3lf\n", km, mi);
    break;
} 
```

您成功打印了整数值，但完成后需要打印最终值。最后（上图）您需要做的就是将值直接从公里转换为英里。

# c# - 捕获通过调试器调用的进程的输出

> ID：10166716
> 
> 赞同：2
> 
> 时间：2012-04-15T22:29:05.203
> 
> 标签：c#

我目前通过调试器运行我的程序。

```
P.FileName = "windbg.exe"
P.Arguments = "-g -G foo.exe arg1 arg2" 
```

如果我在进程 P 上重定向，我没有得到 foo.exe 的输出，我怎样才能将 foo.exe 的输出保存到日志文件并写入控制台？

谢谢。

根据下面的评论添加代码。但这不是我要找的。我需要 foo.exe 的输出。

```
P.FileName = "windbg.exe"
P.Arguments = "-g -G foo.exe arg1 arg2"

p.RedirectOutput = true;
p.start();
StreamReader outputReader= p.StandardOutout
p.waitforexit();

string displayText = "Output" + Environment.NewLine + "==============" + Environment.NewLine;
                       displayText += outputReader.ReadToEnd();
Console.writeline(displayText); 
```

任何人都可以帮忙吗？我还没有找到任何解决方案...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T22:38:49.443

[这在代码项目文章“如何重定向应用程序的标准输入/输出”](http://www.codeproject.com/Articles/18577/How-to-redirect-Standard-Input-Output-of-an-applic)中有深入描述

# javascript - 何时以及为何使用胡子模板

> ID：10166719
> 
> 赞同：3
> 
> 时间：2012-04-15T22:29:14.023
> 
> 标签：javascript, templates, express, mustache

小胡子模板的用例是什么？

与快递中的玉/咖啡之类的东西相比，他们有什么好处？

mustache 模板编译有什么帮助？

似乎无法为这些基本问题找到一个好的答案。

提前致谢。

# php - 使用 CakePHP 查找与帖子 ID 相关的所有主题

> ID：10166724
> 
> 赞同：0
> 
> 时间：2012-04-15T22:29:57.267
> 
> 标签：php, cakephp

我正在尝试编写一个模型方法来拉取附加到帖子的主题。数据库设置如下：

```
Post
id
title

Topic
id
title

Post_Topic
id
post_id
topic_id 
```

和示例方法...

```
public function getPostTopics($postId)
{   
    $topics = $this->find('all', ...
    return $topics;
} 
```

我需要做的是在数据库中找到关系，然后以以下格式存储它们以供返回，例如`tag1, tag2, tag3`.

谁能帮我吗？

以下是关联：

```
Post.php
class Post extends AppModel
{
    public $name = 'Post';

    public $belongsTo = 'User';

    public $hasMany = array('Answer');

    // Has many topics that belong to topic post join table... jazz
    public $hasAndBelongsToMany = array(
        'Topic' => array('with' => 'TopicPost')
    );
}

Topic.php
class Topic extends AppModel
{
    public $hasMany = array(
        'TopicPost'
    );
}

TopicPost.php
class TopicPost extends AppModel {
    public $belongsTo = array(
        'Topic', 'Post'
    );
} 
```

并首先举例说明如何将其保存到数据库中（以了解模型中的函数如何工作）（由 SO 上的另一个乐于助人的人提供）

```
public function savePostTopics($postId, $topics)
{
    // Explode the topics by comma, so we have an array to run through
    $topics = explode(',', $topics);
    // Array for collecting all the data
    $collection = array();

    foreach($topics as $topic)
    {
        // Trim it so remove unwanted white spaces in the beginning and the end.
        $topic = trim($topic);

        // Make it all lowercase for consistency of tag names
        $topic = strtolower($topic);

        // Check if we already have a topic like this
        $controlFind = $this->find(
            'first',
            array(
                'conditions' => array(
                    'title' => $topic
                ),
                'recursive' => -1
            )
        );

        // No record found
        if(!$controlFind)
        {
            $this->create();
            if(
                !$this->save(
                    array(
                        'title' => $topic
                    )
                )
            )
            {
                // If only one saving fails we stop the whole loop and method.
                return false;
            }
            else
            {
                $temp = array(
                    'TopicPost' => array(
                        'topic_id' => $this->id,
                        'post_id' => $postId
                    )
                );
            }
        }
        else
        {
            $temp = array(
                'TopicPost' => array(
                    'topic_id' => $controlFind['Topic']['id'],
                    'post_id' => $postId
                )
            );
        }

        $collection[] = $temp;
    }

    return $this->TopicPost->saveMany($collection, array('validate' => false)); 
```

**编辑：这是给下面的乔普的：**

```
array(
    (int) 0 => array(
        'id' => '2',
        'title' => 'amazing',
        'TopicPost' => array(
            'id' => '2',
            'topic_id' => '2',
            'post_id' => '107'
        )
    ),
    (int) 1 => array(
        'id' => '1',
        'title' => 'awesome',
        'TopicPost' => array(
            'id' => '1',
            'topic_id' => '1',
            'post_id' => '107'
        )
    ),
    (int) 2 => array(
        'id' => '3',
        'title' => 'jazz',
        'TopicPost' => array(
            'id' => '3',
            'topic_id' => '3',
            'post_id' => '107'
        )
    )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:38:40.483

我假设这个函数在 PostModel 中。

```
function getTagsByPost($postId) {
    $this->Behaviors->attach('Containable') //Remove this if you're already using ContainableBehavior
    $result = $this->find(
        'first',
        array(
            'conditions' => array(
                'Post.id' => $postId
            ),
            'contain' => array(
                'Topic' => array(
                    'order' => 'Topic.title ASC'  //Edit this value to change your sorting (or remove the array containing 'order' to disable sorting completely)
                )
            )
        )
    );
    $returnString = '';
    foreach($result['Topic'] as $num => $topic) {
        $returnString .= $topic['title'];
        $nextNum = $num+1;
        if(isset($result['Topic'][($nextNum])) {
            $returnString .= ', ';
        }
    }
    return $returnString;
} 
```

# iphone - 将子视图添加到另一个视图

> ID：10166725
> 
> 赞同：1
> 
> 时间：2012-04-15T22:30:02.613
> 
> 标签：iphone, xcode, uiviewcontroller, subview, ios5

使用两个 ViewController，MyView 1 和 MyView 2，是否可以从 MyView1.m 向 MyView2 添加子视图？

我试过了：

```
MyView2 * screen = [[MyView2 alloc]initWithNibName:nil bundle:nil];
[screen.view addSubView:mySubView]; 
```

但是我的 MyView 2 的新实例与 MyView2 上的“可见”ViewController 没有连接，对吧？

澄清一下，显示的 ViewController 是 MyView1。我希望 MyView1 能够将子视图添加到 MyView2 视图。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T11:37:08.440

我认为您将 viewControllers 与视图混淆了，或者至少您的问题是。也许你正在寻找这样的东西 -

```
MyViewController2 *myViewController2 = [[[MyViewController2 alloc] initWithNibName:nil bundle:nil] autorelease];

[myViewController2.view addSubView:mySubView];
// add any other views to myViewController2's view

[self.view addSubView:myViewController2.view]; // adding the view to VC1's view 
```

如果您希望能够继续在 MyViewController1 中添加内容，您应该将 myViewController2 或其视图声明为保留属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T23:26:23.030

您可以让 MyView1 控制器将一些信息保存在应用程序的一个公共对象中，以便当 MyView2 重新出现时，它可以在需要时将子视图添加到其视图中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T22:46:19.243

假设 MyView2 是 UIViewController 的子类，则`addSubView:`viewcontroller 本身没有方法。相反，您想将 subView 添加到您的视图控制器中`view`，如下所示：

```
[screen.view addSubview:mySubView]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T10:47:28.993

试试这个，

```
[MyView1.view addSubView:MyView2];
[self.view addSubview:MyView1]; 
```

# xcode - 导出 Opengl ES 视频

> ID：10166734
> 
> 赞同：1
> 
> 时间：2012-04-15T22:31:02.550
> 
> 标签：xcode, ipad, opengl-es, screen-grab

XCode 能够从 iPad 捕获 Opengl ES 帧，这很棒！我想扩展此功能并捕获我的应用程序的整个 Opengl ES 电影。有办法吗？如果无法使用 XCode，我怎么能不费力气地对我的代码进行重大更改？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T21:56:41.277

我使用了一种非常简单的技术，只需要几行代码。

您可以使用以下代码将每个 OGL 帧捕获到 UIImage 中：

```
- (UIImage*)captureScreen {

    NSInteger dataLength = framebufferWidth * framebufferHeight * 4;

    // Allocate array.
    GLuint *buffer = (GLuint *) malloc(dataLength);
    GLuint *resultsBuffer = (GLuint *)malloc(dataLength);
    // Read data
    glReadPixels(0, 0, framebufferWidth, framebufferHeight, GL_RGBA, GL_UNSIGNED_BYTE, buffer);

    // Flip vertical
    for(int y = 0; y < framebufferHeight; y++) {
        for(int x = 0; x < framebufferWidth; x++) {
            resultsBuffer[x + y * framebufferWidth] = buffer[x + (framebufferHeight - 1 - y) * framebufferWidth];
        }
    }

    free(buffer);

    // make data provider with data.
    CGDataProviderRef provider = CGDataProviderCreateWithData(NULL, resultsBuffer, dataLength, releaseScreenshotData);

    // prep the ingredients
    const int bitsPerComponent = 8;
    const int bitsPerPixel = 4 * bitsPerComponent;
    const int bytesPerRow = 4 * framebufferWidth;
    CGColorSpaceRef colorSpaceRef = CGColorSpaceCreateDeviceRGB();
    CGBitmapInfo bitmapInfo = kCGBitmapByteOrderDefault;
    CGColorRenderingIntent renderingIntent = kCGRenderingIntentDefault;

    // make the cgimage
    CGImageRef imageRef = CGImageCreate(framebufferWidth, framebufferHeight, bitsPerComponent, bitsPerPixel, bytesPerRow, colorSpaceRef, bitmapInfo, provider, NULL, NO, renderingIntent);
    CGColorSpaceRelease(colorSpaceRef);
    CGDataProviderRelease(provider);

    // then make the UIImage from that
    UIImage *image = [UIImage imageWithCGImage:imageRef];
    CGImageRelease(imageRef);

    return image;
} 
```

然后您将捕获主循环中的每一帧：

```
- (void)onTimer {

    // Compute and render new frame
    [self update];

    // Recording
    if (recordingMode == RecordingModeMovie) {

        recordingFrameNum++;

        // Save frame
        UIImage *image = [self captureScreen];
        NSString *fileName = [NSString stringWithFormat:@"%d.jpg", (int)recordingFrameNum];
        [UIImageJPEGRepresentation(image, 1.0) writeToFile:[basePath stringByAppendingPathComponent:fileName] atomically:NO];
    }
} 
```

最后，您将拥有大量的 JPEG 文件，这些文件可以通过 [Time Lapse Assembler轻松转换为电影](http://www.macupdate.com/app/mac/33252/time-lapse-assembler)

如果您想拥有漂亮的 30FPS 电影，请将您的计算步骤硬固定为每帧 1 / 30.0 秒。

# php - PHP Yii - ActiveDropDownList() 默认选中

> ID：10166735
> 
> 赞同：5
> 
> 时间：2012-04-15T22:31:32.970
> 
> 标签：php, yii

我有以下活动下拉列表

```
<?php 
echo CHtml::activeDropDownList($project, 'city', CHtml::listData(City::model()->findAll(), 'id', 'name'), array('class'=>'st-form', 'onchange' => 'getLocationByCity(this)')); 
?> 
```

我想在创建列表时将所选选项添加到下拉列表中的第 10 个值，我该怎么做。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T23:07:15.333

下拉列表自动选择指定模型的指定属性值对应的选项。在这种情况下，值等于的选项`$project->city`被预先选择。

因此，如果您想控制哪个选项，只需执行

```
$project->city = $valueOfThatOption; 
```

打电话之前`activeDropDownList`。

该选项是第 1、第 10 还是其他任何选项都没有（也不应该）重要。

# c - 乘以 2 个数字，由 2 个数字链接列表表示

> ID：10166737
> 
> 赞同：3
> 
> 时间：2012-04-15T22:31:43.197
> 
> 标签：c, linked-list, singly-linked-list

我需要一些关于我的家庭作业的想法。考虑以下定义：

```
typedef struct listNode {
    int* dataPtr;
    struct listNode* next;
} ListNode;

typedef struct list {
    ListNode* head;
    ListNode* tail;
} List; 
```

每个列表节点代表一个数字。每个数字由一个列表表示，但以相反的方式表示：数字的最后一位是列表的第一个列表节点，数字的第一位是列表的最后一个列表节点。

我写了函数

```
void addNumbers(List n1, List n2, List *sum); 
```

它返回一个新列表，其中包含其他两个列表的总和。

现在我必须编写乘法函数：

```
void multNumbers(List n1, List n2 , List* prod); 
```

而且我有点坚持如何实施它。这不是关于代码，而是关于如何去做。不用说，我们不允许将数字转换为整数、乘以将结果转换为列表。

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T22:40:25.733

这将是一个很好的代码重用练习。由于您已经创建了一个添加两个链表数字的函数，您可以利用该函数执行（部分）乘法吗？毕竟，乘法可以通过重复将第一个数字乘以第二个数字的一​​个数字，然后将所有结果相加来手动执行。尝试以下方式：

*   创建一个包含结果的链表编号，并将其设置为零
*   循环遍历第二个数字的数字
    *   对于每个数字，将第一个数字乘以该数字（您应该编写一个单独的函数来执行此操作；如果您设法编写了加法函数，这应该不会太难）
    *   将零附加到结果的末尾，以便数字向左移动足够远
    *   将数字添加到结果中，使用`addNumbers()`

# wpf - WPF中VS11的Metro/JS模板？

> ID：10166743
> 
> 赞同：1
> 
> 时间：2012-04-15T22:31:57.117
> 
> 标签：wpf, visual-studio-2010, xaml, microsoft-metro, visual-studio-2012

所以我在 VS11 的[http://www.sellsbrothers.com/tools/#ShowMeTheTemplate](http://www.sellsbrothers.com/tools/#ShowMeTheTemplate) Metro/JS 模板中看到了一个很好的示例布局。

它看起来像这样：

![在此处输入图像描述](../Images/a1c8ef3f52a17f3c4ee4326ffa6c5289.png)

我真的很喜欢它的外观，我想知道如何在 WPF 中实现这一点，但 WPF 的各种控件/布局和内容还不是很好。谁能让我开始了解如何实现类似的目标？

我真正要寻找的是其中一个组容器的 VS2010 (WPF) 的 xaml 代码片段，以及它们在图片中如何对齐？我的意思是我什至不知道你会用什么容器/控件来做这样的事情，但它肯定看起来很甜蜜！

请记住，我对背景/应用程序标题并不在意，只是我可以在 vs2010 WPF 中获得类似于此类型的分组/结构和布局？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T22:39:18.687

您是否正在寻找 Visual Studio 11 中的默认应用程序？

文件 -> 新建项目 -> Visual C# 或 Javascript -> 网格应用程序

更新：

如果您想在安装之前获得有关 C#/XAML Metro 应用程序的更多想法`Windows 8 Consumer Preview`，请转到[此](http://msdn.microsoft.com/en-us/library/windows/apps/br211380.aspx#adding_pages_and_navigation)页面并查看代码片段。

# arrays - 如何将序列存储在 MIPS 中的数组中？

> ID：10166745
> 
> 赞同：-1
> 
> 时间：2012-04-15T22:32:05.120
> 
> 标签：arrays, assembly, mips

我有这个作业问题。

编写一个产生以下序列的程序；1,2,2,4,8, 32, 256,... 并将其存储在数组中，具体取决于用户选择的术语数。序列中的每个元素都可以通过将其前面的两个元素相乘来计算。换言之，第n个序号Sn由等式Sn＝Sn-1×Sn-2计算。

我试过但它没有运行

我的代码

^ ^

```
# UNTITLED PROGRAM

    .data   # Data declaration section
str1: .ascii "Please enter the number of terms to produce: "
arr: .space 40

    .text

main:       # Start of code section

li $v0, 4   # system call code for printing string = 4
la $a0, str1    # load address of string to be printed into $a0
syscall         # call operating system to perform print operation

li $v0, 5   # get ready to read in integers
syscall     # system waits for input
move $s0,$v0    # store the result of the read (returned in $v0) in num1

la $s1,arr
addi $t2,$zero,2    # i=2
addi $t0,$zero,1
add $t1,$t0,$t0
sw $t0,0($s1)
sw $t1,0($s1)

L1:
addi $t2,$t2,1       #i++
addi $s1,$s1,4
lw $t4,0($s1)        #A[i-1]
lw $t5,4($s1)
mul $t3,$t4,$t5
sw $t3,8($s1)
beq $t2,$s0,print 
j L1

print:
lw $t3,0($s1)
li $v0, 1   # system call code for print_int
move $a0, $t3   # integer to print
syscall     # print it
addi $s1,$s1,4
beq $t2,$s0,Exit 
j print

Exit:
li $v0, 10      # exits program
syscall

# END OF PROGRAM 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T23:21:39.380

MARS 错误信息：

> 第 26 行错误：0x00400030 处的运行时异常：存储地址未在字边界 0x1001002d 上对齐

错误消息告诉您，您正在尝试在此指令中使用非法（非字对齐）地址访问内存：

```
sw $t0,0($s1) 
```

当您遇到此类问题时，您需要使用调试器。首先，在抛出异常的指令处设置断点。

![brkpt](../Images/71f9f50e19847d8a23da98c16e5c48f0.png)

运行程序，当它在断点处停止时，检查您尝试访问的地址（在 $s1 中）。您会看到它是`268501037`or `0x1001002d`，并且由于它以 7 结尾，因此它不是字对齐的。

![注册文件](../Images/02100ab42bf68d3046095f34094b74f2.png)

`$s1`具有正确的数组地址，但我认为您假设当您在数据段中创建数组时，它将从字对齐地址开始。不是这种情况。要解决此问题，您需要[对齐](http://en.wikibooks.org/wiki/MIPS_Assembly/MIPS_Instructions#Directives)数据。

```
 .data   # Data declaration section
str1: .ascii "Please enter the number of terms to produce: "
    .align 2
arr: .space 40 
```

# java - 多模块maven pom

> ID：10166749
> 
> 赞同：1
> 
> 时间：2012-04-15T22:33:15.287
> 
> 标签：java, dependencies, maven-3

在第一次编写多模块 maven pom 时，我想知道一些事情。

首先，这里是我的父母 pom ：

```
 ...
    <modelVersion>4.0.0</modelVersion>
    <groupId>project.room_management</groupId>
    <artifactId>room_management</artifactId>
    <packaging>pom</packaging>
    <version>1.0</version>
    <name>room_management</name>
    <modules>
        <module>room_management_dao</module>
        <module>room_management_domain</module>
        <module>room_management_service</module>
        <module>room_management_gui</module>
    </modules>
    ... 
```

和它的一个孩子：

```
 ...
    <parent>
        <groupId>project.room_management</groupId>
        <artifactId>room_management</artifactId>
        <version>1.0</version>
    </parent>

    <modelVersion>4.0.0</modelVersion>
    <groupId>project.room_management</groupId>
    <artifactId>room_management_domain</artifactId>
    <version>1.0</version>
   ... 
```

考虑到我不需要从父级到子级 pom 共享公共模块，我可以在没有“风险”的情况下将父级声明删除到子级 pom 中吗？或者 Maven 确实需要它来编译模块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:50:58.287

在此示例中，您需要父元素，因为您在 gui 和您的服务之间存在依赖关系（服务到 dao 也是如此）。此外，您需要定义模块之间的依赖关系以查看哪个模块使用哪个模块。另一方面，maven 需要这些信息来预测重要的模块的构建顺序。拥有这种关系的下一个优点是您可以在父模块和许多其他东西中定义依赖项的插件/版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T23:02:55.550

您不需要`<parent>`模块中的部分。

这主要意味着每个模块必须是独立的——您不能通过父模块共享配置部分。

# c - 用 C 写一个 EXT4 文件系统？

> ID：10166750
> 
> 赞同：5
> 
> 时间：2012-04-15T22:33:43.660
> 
> 标签：c, ext4

这可能听起来很无聊，尤其是当我（正如您可能已经猜到的）尝试编写操作系统时。目前，我一直在尝试制作文件系统。

我想要的是一个与 Linux Ubuntu 类似的文件系统，它是 EXT4（至少我的是）。我想尝试也可以用 C 语言编写它。

有什么想法可以解决这个问题吗？和/或您可能发现的任何可能对我有帮助的教程（我尝试过没有运气的搜索）：L

提前致谢！

杰米。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T01:11:57.350

对这个问题进行了广泛研究的真正聪明和经验丰富的人制造了吞噬用户数据的错误。计算层中的错误（例如内核崩溃）和存储层中的错误之间的区别在于，默默地吃掉用户的数据是**非常糟糕的**——比在电子表格中给出错误答案（excel 有错误但很流行）或间歇性地给出错误答案要糟糕得多sigfaulting，同时在磁盘上保存数据（这很容易通过频繁的自动保存来缓解）。

从研究更简单的设计开始，例如旧操作系统书籍 [1] 中的 minix 文件系统（与 Linus Torvalds 二十年前开始使用的相同）。

正如其他人所说，没有日志、扩展或 ACL 的 ext2 是比 ext4 更好的起点。它的源代码在 Linux 内核和 e2fsprogs 用户空间工具包中[2]。格式有据可查。

至于教程，请考虑谁制作它们以及他们为什么要在此任务上花费精力。教程通常由平台中的利益相关者制作，以吸引新人使用该平台进行开发，利用网络效应来发展平台并从更大生态系统中已经建立的参与者中获利。

您是否看到越来越多的人实现自己的不兼容的 buggy[3] 文件系统的商业模式？仅当您出售软件工程学位时。所以微软只写关于如何*使用*NTFS 的教程，而不是关于如何*实现*它。Sun 和 ZFS、Red Hat 和 Google 使用 EXT2/3/4、SGI 使用 XFS、IBM 使用 JFS、Oracle 使用 BTRFS 等也是如此。

如果您想要教育而不是培训，您需要阅读书籍并研究他们在生产中使用的聪明人的代码，而不是寻找教程。

1.  [http://en.wikipedia.org/wiki/Operating_Systems:_Design_and_Implementation](http://en.wikipedia.org/wiki/Operating_Systems:_Design_and_Implementation)
2.  [http://e2fsprogs.sourceforge.net/](http://e2fsprogs.sourceforge.net/)
3.  有多少用途，有多少不同的使用模式与它见？考虑在数百万台计算机上使用多年后在生产 FS 中发现的错误。即使您像 Matthew Dillon 一样聪明，您的代码也不太可能减少错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T22:37:39.563

尝试查看现有的实现，例如[Linux](https://www.kernel.org/doc/Documentation/filesystems/ext4.txt)中的实现。

# c++ - 通过 libCURL 发送电子邮件

> ID：10166754
> 
> 赞同：0
> 
> 时间：2012-04-15T22:33:52.553
> 
> 标签：c++, email, curl, gmail, libcurl

在 Linux 中，您可以使用

```
curl -n --ssl-reqd --mail-from "<$from_address>" --mail-rcpt "<$to_address>" \
     --url smtps://smtp.gmail.com:465 -T message.txt -u "$username:$password" 
```

通过 Gmail 发送电子邮件。

如何使用该方法使用 libCURL for C++ 复制它`curl_easy_setopt(curl, CURLOPT_POSTFIELDS, ' ');`？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T22:45:39.993

看 libCurl 例子[smtp-tls.c](http://curl.haxx.se/libcurl/c/smtp-tls.html)，做谷歌后找到的第一个链接[：libCURL send email](http://www.google.com/search?q=libCURL%20send%20email)

# java - 浮点运算的不同结果

> ID：10166756
> 
> 赞同：1
> 
> 时间：2012-04-15T22:34:25.550
> 
> 标签：java

我有一个小问题，我有一些代码可以从给定的数据集计算平均值，我在几台不同的计算机上执行此操作（一些使用 linux，一些使用 Windows，一些 32 位和其他 64 位），但是当我观察数据库结果，一些应该相等的值略有不同。

这对我的程序没有任何影响，但我想知道为什么会这样，我的印象是具有相同单词长度的浮点运算应该产生相同的结果（我显然错了）。

这是我写来检查的一个小示例代码：

```
public class Test{
    public static void main(String... args){
        double counter = 0, value = 1./10;

        for (int i = 0; i < 1000000; i++){
            counter += value;
        }

        System.out.println(counter);
    }
} 
```

它基本上计算 1000000 / 10，我知道结果并不准确，但在某些电脑中，它打印的数字略小于 100000，而在其他情况下，它打印的数字略大。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T22:45:50.443

如果您**确实**需要在所有平台上出现相同的错误，您应该`strictfp`在方法声明中使用关键字，请查看这篇文章中的选定答案：[我什么时候应该在 java 中使用“strictfp”关键字？](https://stackoverflow.com/questions/517915/when-should-i-use-the-strictfp-keyword-in-java)

请注意，`strictfp`仅适用于您当前的块，并且不会通过代码传播，因此如果您在中间调用某些方法，它们也应该有`strictfp`（也应该使用`StrictMath`代替`Math`）。

无论如何，如果这不会影响您的代码，那就顺其自然吧……严格的浮点运算比常规浮点运算具有更高的计算成本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T22:37:09.823

我认为这取决于使用的编译器优化技术。例如，如果没有优化，你会得到很多加法，可能会导致精度损失，如果编译器可以理解所涉及的操作，整个循环可能会被替换为`counter = value*1000000`

的精度`double`及其操作在语言中精确设置

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T22:41:32.693

不同的板形有不同的表示浮点数的方式。

要获得相同的结果，您应该将精度限制为特定的小数位数。

# linux - 关于如何使用序列号和 XOR 纠错实现 uC 的 ASCII 命令协议的文献？

> ID：10166759
> 
> 赞同：1
> 
> 时间：2012-04-15T22:35:03.843
> 
> 标签：linux, serial-port, protocols, protocol-buffers, rs485

我遇到了一个半双工 ASCII 协议，它一次又一次地使用以下消息格式：[STX][dev.addr.][sequence number][message/commands...][ETX][checksum]

不仅在工业 rs485 设备中，而且在这种消费设备中：www.kaleidescape.com/go/control-protocol

所以如果这个协议被如此广泛地采用，为什么我找不到关于它的信息......它叫什么？如何实现这样的协议...

我想在我自己的 uC 项目中使用这种协议......

与其他协议相比，我绝对喜欢它的概念简单性..

我喜欢这个序列号/重复标志的东西......

序列号是一个单字节，它同时传递序列号（合法值：0 到 7）和指示由于通信故障而重复命令块的位标志。序列号用作每个命令块的身份标记

这个问题是我能找到的唯一有价值的信息...... [你如何为嵌入式系统设计串行命令协议？](https://stackoverflow.com/questions/1445387/how-do-you-design-a-serial-command-protocol-for-an-embedded-system)

有没有关于 uC 使用的 ASCII 协议的设计和实现的书？

# iphone - 在 Snow Leopard、XCode 4 和 iOS5.1 上配置 iPhone

> ID：10166762
> 
> 赞同：1
> 
> 时间：2012-04-15T22:35:20.550
> 
> 标签：iphone, ios, xcode, ios5, xcode4

我是整个 iOS 开发的新手，但我已经完成了我的第一个应用程序，现在希望部署到我的 iPhone 上进行最后一轮测试。

但是，我的设备旁边有一个黄点，消息告诉我不支持 iOS 5.1，我需要获取最新的 SDK。

我已经这样做了，但错误仍然存​​在，坚持认为我可以测试的最高 iOS 是 5.0。

我不会在我的 iPhone 上回到 5.0，因为那太愚蠢了。

我有 Snow Leopard 的最新更新，xCode 4 的最新更新。

有人知道我需要做什么才能使用我的 iPhone 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T22:45:57.497

Xcode 4 max 支持的 iOS 是 5.0，因为您的手机是 iOS 5.1，所以无法直接使用 Xcode 安装您的应用程序。你有两个解决方案：

1/ 你要么安装 Xcode 4.3.2 (iOS 5.1)，但你需要安装 Mac OS X Lion (10.7)

2/ 或创建您的应用程序的临时版本（在 Apple 网站上有说明），并使用此软件在您的手机上安装您的应用程序：http: [//support.apple.com/kb/DL1465 ?viewlocale=fr_FR&locale= fr_FR](http://support.apple.com/kb/DL1465?viewlocale=fr_FR&locale=fr_FR)

# programming-languages - 我的 Github 提交中使用的语言排名

> ID：10166763
> 
> 赞同：1
> 
> 时间：2012-04-15T22:35:20.993
> 
> 标签：programming-languages, github, commit, profile, ranking

是否可以显示我的提交中使用的语言排名？可以显示 Github 社区的整体排名：

[https://github.com/languages](https://github.com/languages)

和我的项目中使用的语言，但这仍然不是我想要的。

# android - 更改标签标题样式，如 Play 商店

> ID：10166766
> 
> 赞同：1
> 
> 时间：2012-04-15T22:36:05.110
> 
> 标签：android, tabs, styles

你好，

我想更改标签样式，因为当有很多标签时，它们只会变小并且标题文本会分开。所以我想知道，如果有人知道如何改变风格，Play Store？

这个![在此处输入图像描述](../Images/b59b0aee4045092e7d2432395e3f9ccc.png) 到 ->![查看图片示例](../Images/ef52f49de07c0b8f0e7644c9cce2f712.png)这个

谢谢您的帮助！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-21T08:51:50.673

有一个 Android Widget 可以做到这一点：

[http://developer.android.com/reference/android/support/v4/view/PagerTabStrip.html](http://developer.android.com/reference/android/support/v4/view/PagerTabStrip.html)

使用示例：

[http://blog.pboos.ch/post/40575809334/android-pagertabstrip-viewpager](http://blog.pboos.ch/post/40575809334/android-pagertabstrip-viewpager)

缺点：它只会显示 3 个标签 - 当前、上一个和下一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T01:47:14.170

您需要 ViewPageIndicator 的标题指示器 -> [http://viewpagerindicator.com/](http://viewpagerindicator.com/)

![在此处输入图像描述](../Images/1e383b3088638646577ea0e5cb7a120b.png)

# java - 计算字符串标记时忽略空格

> ID：10166767
> 
> 赞同：0
> 
> 时间：2012-04-15T22:36:20.853
> 
> 标签：java, string, map

我正在为一个班级做家庭作业，我已经解决了几乎所有的问题，但我正在努力解决一个问题。

对于作业，我们应该编写一个程序来计算任何给定字符串中字母出现的频率，然后将它们的映射打印到控制台。我已经编写了程序，它几乎可以正常工作，但我无法让地图忽略空格。它似乎也找到了两种不同的空格，一种是单词之间的空格，另一种是我无法弄清楚的空格。

在计算字母的频率之前，我已经尝试`myString.replaceAll(" ", "");`并`myString.trim();`尝试消除空格，但它仍然每次都会计算两种类型的空格。

任何见解或帮助表示赞赏。我可以像这样把它上交，但我不喜欢半途而废的项目。这是代码：

```
import java.util.*;

public class LetterFrequency {
   public static void main( String[] args ) {

      Map< String, Integer > myMap = new HashMap< String, Integer >(); 

      createMap( myMap ); 
      displayMap( myMap );
   } 

   private static void createMap( Map< String, Integer > map ) {
      Scanner scanner = new Scanner( System.in ); 
      System.out.println( "Enter a string:" ); 
      String input = scanner.nextLine();

      System.out.println("String: "+input);

      String[] tokens = input.split("");

      for ( String token : tokens ) {
         String letter = token.toLowerCase();

         if ( map.containsKey( letter ) ) {
            int count = map.get( letter ); 
            map.put( letter, count + 1 );
         }
         else 
            map.put( letter, 1 );
      } 
   } 

   private static void displayMap( Map< String, Integer > map ) {      
      Set< String > keys = map.keySet(); 

      TreeSet< String > sortedKeys = new TreeSet< String >( keys );

      System.out.println( "\nMap contains:\nKey\t\tValue" );

      for ( String key : sortedKeys )
         System.out.printf( "%-10s%10s\n", key, map.get( key ) );

      System.out.printf( 
         "\nsize: %d\nisEmpty: %b\n", map.size(), map.isEmpty() );
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T22:44:35.097

`String.replaceAll`应该管用。请记住，`String.replaceAll`返回一个`String`. 因此，您必须使用它返回的字符串来执行其余的计算。

例如，如果您有：

```
String myString = "hello world";
myString.replaceAll(" ", ""); 
```

`myString`仍将是“你好世界”

你会想要：

```
String myNewString = myString.replaceAll(" ", ""); 
```

之后`myNewString`将没有空格。

此外，您可以通过使用简化角色迭代

```
for (int i = 0; i < input.length(); i++){
    char letter = input.charAt(i); 
```

这将解决您的额外“空白被计算”问题。这是因为当您调用 时`myString.split("")`，返回列表中的第一个元素是“”（一个空字符串）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T22:39:39.663

您可以尝试`myString.split("\\s+");`摆脱所有空白并同时拆分。

正如@Kshitij Mehta 指出的那样，请确保使用该方法的返回值。所以你的代码看起来像这样：

```
 String input = scanner.nextLine();
  System.out.println("String: "+input);
  input = input.trim();
  String[] tokens = input.split("\\s+"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T22:42:24.173

替代方法`String.replaceAll`：您可以[过滤您的输入](http://docs.oracle.com/javase/6/docs/api/java/lang/Character.html#isLetter%28char%29)以在计算之前忽略任何非字母字符（或在打印结果之前类似地过滤您的地图）。例如

```
 for ( String token : tokens ) {
     if (Character.isLetter(token)) {
        String letter = token.toLowerCase();

        ...
     }
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T22:43:01.447

或者，您可以使用[Character.isLetter(char c)](http://docs.oracle.com/javase/6/docs/api/java/lang/Character.html#isLetter%28char%29)方法来确定一个字符是否真的是一个字母。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-15T23:18:12.370

@Kshitij Mehta 是正确的。

您的问题是通过设置不删除空格的组合

```
input = input.replace(" ", ""); 
```

此外，您的第二个问题是使用`Strings`而不是`char`（和地图的字符）来保存字母（它们是字符）。只是意外地使用了 String for char 才使 java 执行异常。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-02T15:18:29.937

```
import java.util.*;

public class M {
  public static void main(String[] args){
    Scanner sc = new Scanner(System.in);
    String s = sc.nextLine();
    s.toCharArray();
    String n = s.replaceAll(" ","");
    System.out.println(n.length());
  }
} 
```

你可以试试这个。我知道你已经做到了。但我认为它会帮助别人。

# php - 包裹打包的PHP/C++空间计算

> ID：10166770
> 
> 赞同：2
> 
> 时间：2012-04-15T22:36:36.177
> 
> 标签：php, c++

我正在做一个购物车项目，该项目需要一个“邮资计算器”，该计算器基于该人购物车中的物品。

显然，我将存储物品的尺寸，包括。数据库中的重量和填充，还将存储物品将进入的包裹（盒子）大小和重量，包括。盒子填充。

计算包裹的重量会很容易，但我想知道如何通过 PHP 计算如何打包盒子，也就是说，我希望代码与物品“玩俄罗斯方块”，以确保它们得到最好的合身，给出准确的邮费。

有人对如何最好地实现这一点有任何想法，或者有人知道可以做到这一点的 PHP 类或函数吗？

编辑：当我说“最合适”时，也许我很乐观！让脚本尝试包裹内所有可能的包分发组合将是最重要的，但是我可以通过在 C++ 中编写算法并在用户“签出”时在 PHP 中运行程序来提高速度，返回值为包含包裹大小和重量的数组（计算邮费所需的全部内容）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T22:44:09.213

我不相信有人已经找到了完美的算法来做到这一点。所有现有的算法（通常不公开）都试图获得近乎完美的方法，但是在合理的时间内计算每一种可能性需要太多的计算。

毕竟那些卡车需要在某个时间点离开。:)

此外，计算理想尺寸还意味着您必须知道每个包裹的确切尺寸，而装载卡车的人需要使用复杂的“地图”将这些包裹完全按照您计算的方式放置。

不，在实践中，最简单的方法是计算总体积，使用某个因子（例如 0.95，您可以在旅途中对其进行微调），然后用它来猜测您的卡车可以容纳多少包裹。只要是装载您的卡车的人，这也是最好的方法。其他任何东西都需要机器人根据您的具体计算指令装载卡车。

# c - 如果字符串的长度未知，如何从字符串中提取子字符串

> ID：10166771
> 
> 赞同：0
> 
> 时间：2012-04-15T22:36:58.720
> 
> 标签：c

可以说我有 `string1 = "DDD DXXXX" string2 = "DDXXXX" string3 = "DXXXX"`

如果我想一直提取 XXXX，那么 c 中最好的方法是什么？substr、strncpy、strndup 一切都需要一个起始位置。

正则表达式是唯一的选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T22:48:18.353

用于[`strstr()`](http://www.cplusplus.com/reference/clibrary/cstring/strstr/)定位`"XXXX"`：

```
char string1[] = "DDXXXX";
char* xxxx_ptr = strstr(string1, "XXXX");
if (xxxx_ptr)
{
    /* Do something. */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T22:45:15.527

如果您知道它始终位于末尾且具有固定长度，则可以通过计算字符串 ( `strlen()`) 的长度并减去固定长度来计算其起始位置。

这假设子字符串始终是您检查的字符串的一部分

# javascript - IE9 和 Safari 5 单页上的 2 个 ACE 编辑器

> ID：10166776
> 
> 赞同：1
> 
> 时间：2012-04-15T22:37:26.950
> 
> 标签：javascript, html, internet-explorer-9, ace-editor

我在交互式计算机编程教程 (codeavengers.com) 中使用 ACE 编辑器。

对于某些课程，我试图一次向 2 位 ACE 编辑器展示。它适用于 Firefox 和 Chrome，但不适用于 Safari 5.1 或 IE9（我不关心 IE8 和 IE7）。

这是我的测试页面的代码。

```
<!doctype html>

<html><head>
<script src="ace/src/ace.js" type="text/javascript" charset="utf-8"></script>
<style>
.editor {
    width: 500px;
    height: 500px;
    position: absolute;
}
#editor2 {
    left: 550px;
}
</style>

<script type="text/javascript">
window.onload = function() {
    ace.edit("editor1").getSession().setValue('This is the first editor');
    ace.edit("editor2").getSession().setValue('This is the second editor');
};
</script>
</head>

<body>
    <div id="editor1" class="editor"></div>
    <div id="editor2" class="editor"></div>
</body></html> 
```

在 IE9 中，第二个编辑器工作正常，但第一个编辑器不工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:49:49.937

Ace 需要定位`absolute`或`relative`在根元素上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:00:02.220

没有得到任何有效的答案，所以我选择为第一个编辑器使用 ace 编辑器，如果浏览器不是 Chrome 或 Firefox，则为第二个编辑器使用只读的美化元素。

# javascript - 我如何在流星中记录一些东西？

> ID：10166778
> 
> 赞同：14
> 
> 时间：2012-04-15T22:37:51.543
> 
> 标签：javascript, node.js, meteor

我可以在底层 .meteor/local/build/server/node_modules 中使用类似 winston npm 的东西吗？

甚至节点日志

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-10T11:07:25.317

旧的[天文台](https://atmospherejs.com/superstringsoft/observatory)已经过改造，现在可以与 Meteor 0.9+ 一起使用。[通过http://observatoryjs.com 获取](http://observatoryjs.com)详细信息、用法、演示应用程序

另请参阅[pince](https://atmospherejs.com/jag/pince)，一个用于 Node 和 Meteor（客户端/服务器）的轻量级记录器。

另一个有趣的日志包是[trail](https://github.com/tbknl/meteor-trail)，它具有可配置的传输（控制台、MongoDB、自定义），并且可以集中来自服务器和多个客户端的日志，并在管理界面[trail-monitor](https://github.com/tbknl/meteor-trail-monitor)中显示它们。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-06-28T06:37:14.920

您可以将 winston（nodejs 日志记录模块）与流星一起使用。它确实支持多种传输方式，包括 loggly、mongo 等。

[请参阅我](http://meteorhacks.com/logging-support-for-meteor.html)关于如何集成它的文章

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T00:16:29.027

有一个名为 logging 的包，但它在评论中提到它只是暂时的。它公开了一个名为 Meteor._debug 的方法，该方法基本上使用 console.log，它在服务器端和客户端都工作。所以现在使用它可能会更好。

但是，如果您愿意，您可以使用其他一些日志记录插件，或者将它放在一个包中，或者使用 npm 或在您的模板中包含 javascript 以进行日志记录。

# c++ - 虚拟 << 运算符

> ID：10166779
> 
> 赞同：1
> 
> 时间：2012-04-15T22:37:52.530
> 
> 标签：c++, operator-overloading

我有一个小问题，我的 << 运算符没有被正确调用。

这就是我所拥有的：

```
class SomeInterface
{
   friend std::ostream& operator<<(std::ostream& str, const SomeInterface& data);

   protected:
      virtual void print(ostream& str) const = 0;
};

inline std::ostream& operator<< (std::ostream& o, SomeInterface const& b)
{
  b.print(o);
  return o;
}
} 
```

调用代码如下所示：

```
SomeInterface* one  = new someConcrete ();
cout << one; 
```

我希望在接口上调用的 << 重载函数不是，更不用说分派到派生类了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T22:41:25.920

尝试：

```
cout << *one; 
```

您的代码要求打印*指针*，而您`operator<<`需要`const SomeInterface&`参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T22:42:14.280

您正在调用`std::ostream& operator<< (std::ostream& o, void*);`，因为 的类型`one`是指针。

尝试：

```
cout << *one; 
```

这将调用接受（引用）实际对象的重载，而不是指针本身

# groovy - 如何强制 Groovy 脚本引擎在文件中输出已编译的类？

> ID：10166789
> 
> 赞同：2
> 
> 时间：2012-04-15T22:39:20.333
> 
> 标签：groovy, compilation, classloader

我搜索了一下，发现您可以通过设置 setTargetDirectory 将 GroovyScriptEngine 输出 scriptCache 放入类文件中。但是当我从 scala 执行类似下面的代码时，它不会生成类文件。

如何设置 GroovyScriptEngine 以从 GroovyScriptEngine 编译的脚本中输出类文件？

```
var gse = new GroovyScriptEngine()
gse.getConfig().setTargetDirectory("c:/test")
var scriptClass = gse.loadScriptByName("SomeGroovyClass.groovy") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:22:32.080

`GroovyScriptEngine`似乎（[从查看源代码](https://github.com/groovy/groovy-core/blob/master/src/main/groovy/util/GroovyScriptEngine.java)）不使用该属性`CompilerConfiguration`

它需要在 inner 的构造函数中传递`ScriptClassLoader`，以便`GroovyClassLoader`它扩展的在构造时获取配置。

# javascript - 如何在函数声明字符串中匹配“obj.foo”

> ID：10166790
> 
> 赞同：0
> 
> 时间：2012-04-15T22:39:32.363
> 
> 标签：javascript, regex

假设我有一个表示为字符串的函数表达式

```
"var someFunction = function (foo) { foo.bar = 'hello'; };" 
```

如何在该字符串中安全地识别对 foo.bar 的所有有效（根据 js 语法）引用？

即避免像`"catfoo.barbar"`我想用其他东西替换这些引用的情况。

（肯定有人会问……是的，我正在使用 eval，是的，这在我的用例中是有意义的）

* * *

我真正要寻找的最重要的事情是如何匹配有效的对象名称。如何匹配对象名称中所有有效字符的集合？他们甚至是什么？像 áéíóú 这样的字符显然是有效字符，所以它比`[0-9a-zA-Z_]`

为了说明我真正想做的事情。我有一个函数，我在其中注入具有属性的对象

```
function shader(src, dst, out) {
    out.a = (src.a + dst.a)/2;
} 
```

这会为 2D 画布上的每个像素调用。我想做的是内联这个函数，并以合理的方式删除所有的点运算符。

```
...
var src = {}, dst = {}, out = {};
...

for (i = 0; i < len; i += 4) {
    shader(src, dst, out);
} 
```

内联着色器后变为

```
...
var src = {}, dst = {}, out = {};
...

for (i = 0; i < len; i += 4) {
   out.a = (src.a + dst.a)/2;
} 
```

但我也想删除点运算符。我真的不确定性能提升会是什么，这可能是一个无用的微优化。内联函数至少会在 FF 中产生 100% 的性能提升。无论如何，我很好奇如何做到这一点。原始函数的存在是为了回退和易于定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T22:48:16.057

这是一个用 javascript 编写的 javascript 解析器：[https ://github.com/douglascrockford/JSLint/blob/master/jslint.js](https://github.com/douglascrockford/JSLint/blob/master/jslint.js)

它将生成一个很好的解析树。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T22:55:31.140

你可以使用这个正则表达式：

```
 /(?=[{\s])foo.bar(?=[\s])/ 
```

用 string.replace，像这样：

```
 var replaced = original.replace(/(?=[{\s])foo.bar(?=[\s=])/g, "replacement"); 
```

括号之间的第一组`[\s{]`，在单词 foo 之前找到一个 { 或空格字符（空格、制表符等）。第二组在小`[\s=]`节后找到空格字符或等号。如果您发现还有其他可能性，您可以更改它。`(?=...)`匹配一个字符串，但不包括在匹配中。这意味着找到了空格字符或大括号或等号，但未包含在匹配中，因此不会替换 。

final`/g`表示找到所有匹配项。如果你知道只有一个，你可以省略它。

# css - 在扩展的链接列表中添加另一个链接以填充整个 li

> ID：10166817
> 
> 赞同：0
> 
> 时间：2012-04-15T22:43:30.220
> 
> 标签：css, html-lists

我现在所拥有的内容显示[在这个 jsFiddle 中](http://jsfiddle.net/965zT/2/)：一堆浮动`li`s，每个都包含一个扩展为整体的`li`链接`display: block`。

现在，我想做的是在每个链接中添加另一个链接`li`（在我的例子中是一个关闭按钮）。如下图所示。但我仍然希望广场的整个其余部分都可以点击并像现在一样跟随原始链接。

![与 jsFiddle 输出相同，但带有单独的关闭链接。](../Images/eed5dfbf24e8197e1a3cffb88408cd32.png)

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T22:46:54.017

给`position: relative`li 元素。然后，将其提供给您的关闭链接：

```
.close {
    position: absolute;
    top: 5px;
    right: 5px;
} 
```

演示：http: [//jsfiddle.net/965zT/3/](http://jsfiddle.net/965zT/3/)

# windows - 奇怪的 Qt SSL 问题——出现错误“No Error”，没有别的，如果我忽略它，一切正常

> ID：10166821
> 
> 赞同：1
> 
> 时间：2012-04-15T22:44:25.907
> 
> 标签：windows, qt, ssl, error-handling

问题如下：在我的 Qt 应用程序中，我有一个 QWebView，我用它来加载 HTTPS 页面。

在我的开发机器上一切正常，所以我现在正试图让它在测试机器上运行。我运行了应用程序，但页面没有加载（QWebView 是空白的）。经过多次调试，我发现问题是出现了 SSL 错误，并且触发了 sslErrors() 信号。

这是我的 sslErrors() 处理代码：

```
void blah::sslErrors(QNetworkReply *reply, const QList<QSslError> &errors) {
  foreach(QSslError error, errors) {
    qDebug() << error.errorString() << endl;
  }
  reply->ignoreSslErrors();
} 
```

上面代码打印的唯一内容是：

```
"No error" 
```

所以没有错误，但是除非我调用`reply->ignoreSslErrors()`，否则页面不会加载（在测试机器上，在我的开发人员计算机上没有报告错误）。嗯？这是一个错误吗？

如果我确保它是“无错误”类型，忽略该错误是否安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T16:00:03.470

您可能会遇到 QTBUG-28343，这是由于您的 Qt 编译版本与您正在运行的版本之间的 openssl 二进制不兼容。这将在 Qt 4.8.5 中修复。

[http://lists.qt-project.org/pipermail/announce/2013-January/000020.html](http://lists.qt-project.org/pipermail/announce/2013-January/000020.html) [https://bugreports.qt-project.org/browse/QTBUG-28343](https://bugreports.qt-project.org/browse/QTBUG-28343)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T23:24:00.987

QSslSocket[仅在翻译 OpenSSL`X509_V_OK`错误](http://qt.gitorious.org/qt/qt/blobs/HEAD/src/network/ssl/qsslsocket_openssl.cpp#line1196)时生成 NoError SslError 。

[OpenSSL 文档](http://www.openssl.org/docs/ssl/SSL_get_verify_result.html#BUGS)报告：

> 如果没有提供对等证书，则返回结果代码为 X509_V_OK。这是因为没有发生验证错误，但并不表示成功。

您应该使用 tcpdump 或类似工具来检查对等点之间是否正确交换了证书。

# ios - renderInContext：生成带有模糊文本的图像

> ID：10166824
> 
> 赞同：1
> 
> 时间：2012-04-15T22:44:41.580
> 
> 标签：ios, cocoa-touch, uikit

我正在使用几个不同的 UIImageViews 和 UILabels 预渲染合成图像，以加快在大型 tableview 中的滚动。不幸的是，与同一视图上的其他 UILabel 相比，主 UILabel 看起来有点模糊。

黑色字母“PLoS ONE”在 UILabel 中，它们看起来比“Medical”或“Medicine”要模糊得多。标志“PLoS one”可能同样被模糊，但不如清晰的文字那么明显。
整个杂志封面是分配给 UIButton 的单个 UIImage。

[![PLoS ONE 标签比](../Images/4efa4d34825948875a27e4d41fc11115.png)](https://i.stack.imgur.com/uharY.png)
[（来源：[karlbecker.com](http://karlbecker.com/screen_blurry.png)）]

这是我用来绘制图像的代码。MagazineView 是一个 125 x 151 像素的矩形。我尝试了不同的缩放质量，但这并没有改变任何东西。它不应该，因为缩放不应该是不同的。我分配此图像的 UIButton 与杂志视图的大小完全相同。

```
 UIGraphicsBeginImageContextWithOptions(magazineView.bounds.size, NO, 0.0);
    [magazineView.layer renderInContext:UIGraphicsGetCurrentContext()];
    [coverImage release];
    coverImage = UIGraphicsGetImageFromCurrentImageContext();
    [coverImage retain];
    UIGraphicsEndImageContext(); 
```

任何想法为什么它是模糊的？

当我开始一个图像上下文并立即渲染到它时，渲染是在一个偶数像素上发生的，还是我需要手动设置渲染发生的位置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T04:30:21.887

确保您的标签坐标是整数值。如果它们不是整数，它们会显得模糊。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T05:51:38.760

我认为您需要使用 CGRectIntegral 以获取更多信息，请参阅： [CGRectIntegral 的用法是什么？](https://stackoverflow.com/a/9975374/1126111)和[CGRectIntegral 的参考](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGGeometry/Reference/reference.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-04T09:29:23.760

* * *

我今天遇到了同样的问题，当我从 UILabel 文本生成图像时，我的内容被像素化了。

我们`UIGraphicsBeginImageContextWithOptions()`用来配置绘图环境以渲染成一个接受三个参数的位图：

> `size`: 新位图上下文的大小。这表示 UIGraphicsGetImageFromCurrentImageContext 函数返回的图像的大小。
> 
> `opaque`：一个布尔标志，指示位图是否不透明。如果 opaque 参数为 YES，则忽略 alpha 通道并将位图视为完全不透明。
> 
> `scale`: 应用于位图的比例因子。如果您指定值 0.0，则比例因子设置为设备主屏幕的比例因子。

所以我们应该针对设备显示使用适当的比例因子（1x、2x、3x）来解决这个问题。

斯威夫特 5 版本：

```
UIGraphicsBeginImageContextWithOptions(frame.size, true, UIScreen.main.scale)
if let currentContext = UIGraphicsGetCurrentContext() {
    nameLabel.layer.render(in: currentContext)
    let nameImage = UIGraphicsGetImageFromCurrentImageContext()
    return nameImage
} 
```

# jquery - 在 jquery 可拖动元素上指定多个取消选项

> ID：10166826
> 
> 赞同：6
> 
> 时间：2012-04-15T22:45:07.243
> 
> 标签：jquery, jquery-ui, draggable

![标题='元素样本'](../Images/d5facc758f0db6dc26c8379357aa265c.png)

如上图所示，我只想让用户在点击区域时拖动元素，标记为“允许拖动”，所有其他区域都不允许拖动，标记为“禁用拖动”。以下是我目前拥有的代码。只有当我无法将多个选择器传递给取消选项时，它才能正常工作。我试过传递一个对象和空格分隔的扇区，但它不起作用。我究竟做错了什么？请帮忙。

```
 $(".e-note").draggable({
        stop: function(e, ui) {
            // alert(ui.position['top']);
        },
        cursor: 'move',
        opacity: 0.4,
        cancel: '.e-note-body', // How do i pass more than one selectors here?
        distance:20
    }) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-15T23:49:22.030

您可以提供[多个选择器](http://api.jquery.com/multiple-selector/)来组合多个选择器：

```
cancel: '#selector1, .selector-two' 
```

请注意逗号 ( `,`) 分隔引号内的每个选择器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-24T01:04:36.537

或者，如果您有一个复杂的布局和很多应该“取消”拖动的元素，您可以代替`cancel`使用`handle`选项：

```
handle: '.allow_drag_start' 
```

这样你根本不需要使用`cancel`。

这有一个额外的骗局，这是我最近发现的。如果您的网站正在使用例如。[http://touchpunch.furf.com/](http://touchpunch.furf.com/)将鼠标事件转换为触摸事件，`cancel`真正取消了一切，不仅是拖动，还包括触摸设备的原生滚动和两指捏缩放。在我的例子中，我希望滚动和缩放能够处理除手柄之外的所有其他元素。

一般来说，我认为这`handle`是应该使用的，并且`cancel`是一种解决方法。

# javascript - 绑定函数的堆栈跟踪

> ID：10166827
> 
> 赞同：1
> 
> 时间：2012-04-15T22:45:14.830
> 
> 标签：javascript, stack-trace, callstack, ecmascript-5

当您调用[`.bind()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)javascript 函数时，堆栈跟踪会发生什么？

例如，当我有

```
Function.prototype.arg = function() {
    var fn = this;
    return function augmented(){
        // do something with the arguments
        fn.apply(c, args); // and call it
    };
} 
```

并在函数上使用它

```
(function x(){console.trace();}).arg()() 
```

它会记录

```
x
augmented
<global context> 
```

那么 bind() 做什么（内部）？它也像 arg() 那样做部分应用程序和设置上下文的事情，正如您在各种 shims 中看到的那样（例如[MDC 的兼容性](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind#Compatibility)功能）。

我从 ecmascript 规范中知道它将创建一个新函数，并设置其内部属性以存储上下文和参数，但它仍然只是指向原始函数的指针（您可以通过原型看到它）。然而，

```
(function x(){console.trace();}).bind()() 
```

只会记录

```
x
<global context> 
```

里面真的没有额外的调用，还是只是隐藏在跟踪方法中？

# html - 会话存储不起作用

> ID：10166829
> 
> 赞同：0
> 
> 时间：2012-04-15T22:45:20.643
> 
> 标签：html, sessionstorage

我的问题是以下一个......考虑到这两个按钮的jQuery代码......

```
 $('#submit').bind('click',function(e){          
        var texto = $('#linkSelected').val();
        alert(texto);
        sessionStorage.setItem('nombre', texto);
    });

    $('#load').bind('click',function(e){
        var val = sessionStorage.getItem('nombre');
        alert(val);
    }); 
```

似乎在执行第一个 jquery click eventto 时， sessionStorage 对象不存储我的“名词”项目......所以......当我按下第二个按钮时，我没有得到弹出警报......谁知道原因？...我在 DreamWeaver CS5.5 中编程，我在 FireFox v11 中进行测试！...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T07:27:18.013

在 Firefox 11 中对我来说就像一个魅力。试试这个小提琴：http:
[//jsfiddle.net/maitrekaio/FLvtJ/](http://jsfiddle.net/maitrekaio/FLvtJ/)

# asp.net - 使用 vb,net 的服务器请求方法？

> ID：10166830
> 
> 赞同：-1
> 
> 时间：2012-04-15T22:45:38.727
> 
> 标签：asp.net, vb.net

我怎么能实现像 php 的东西

```
if($_SERVER['REQUEST_METHOD'] != 'POST') 
```

使用 vb.net - 我试图阻止人们访问网页，除非他们通过表单帖子定向到那里。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T22:55:42.600

[该`HttpRequest`对象](http://msdn.microsoft.com/en-us/library/system.web.httprequest.aspx)具有表明这一点[的`HttpMethod`属性。](http://msdn.microsoft.com/en-us/library/system.web.httprequest.httpmethod.aspx)该对象可以通过`Request`基`Page`类上可用的属性访问（因此可以从任何页面访问）。

值得注意的是，这不是一种“保护”页面的方法。任何人都可以发出 POST 请求，他们不需要“被表单引导到那里”。

# jquery - 文本输入值大于.. jQuery

> ID：10166839
> 
> 赞同：0
> 
> 时间：2012-04-15T22:46:35.793
> 
> 标签：jquery, wordpress

当文本输入的值大于 40 时，我正在使用 wordpress 并尝试抛出一条消息。

```
<input type="text" name="quantity" size="2" value="<?php echo wpsc_cart_item_quantity(); ?>" /> 
```

现在，当此文本字段包含大于 40 的值并且还想将其值重置为“我的 wordpress 主题使用 jquery 1.71”时，我想抛出一条消息（警报）我正在执行以下操作：

```
jQuery("input[type='text'][name='quantity']").change(function() {
if (this.val >= 41) {
    alert("To order quantity greater than 40 please use the contact form.");
    this.val == '';
    this.focus();
    return false;
}
}); 
```

谢谢。​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T23:12:13.667

您首先需要`this`使用该`$`函数进行包装，因为这是选择查询返回的 DOM 元素，而不是 jQuery 对象，并且该`val()`函数在那种对象上不可用。

此外，您需要`val()`用括号调用函数，否则您正在处理函数的主体，而不是它返回的值。

最后，赋值语句有错别字。您至少应该这样做`this.val = ''`，但这不起作用，因为`val`它是一个函数，而不是一个变量。工作代码应如下所示：

```
$("input[type='text'][name='quantity']").change(function() {
    if ($(this).val() >= 41) {
        alert("To order quantity greater than 40 please use the contact form.");
        $(this).val('');
        $(this).focus();
    }        
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T22:50:51.907

好吧，你快到了，使用：

```
jQuery("input[type='text'][name='quantity']").change(function() {
    if (parseInt($(this).val(),10) > 40) {
        alert("To order quantity greater than 40 please use the contact form.");
        this.value == '';
        /* or with jQuery: $(this).val(''); */
        $(this).focus();
        return false;
    }
}); 
```

参考：

*   [`parseInt()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt).
*   [`.val()`](http://api.jquery.com/val/).

# c# - Mono Android 和 MonoTouch 的绘图/图形库

> ID：10166840
> 
> 赞同：2
> 
> 时间：2012-04-15T22:46:35.943
> 
> 标签：c#, xamarin.ios, xamarin.android

有没有使用 Canvases for Mono Android 和 MonoTouch 的库？我正在尝试绘制节点+边缘网络图，并希望通过编写代码来找出边缘、节点和文本放置（用于标记节点）的方法来避免重复工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T06:49:01.853

我不确定您问题的边缘/节点/文本放置部分，但最近出现的一个项目是[https://github.com/praeclarum/CrossGraphics](https://github.com/praeclarum/CrossGraphics)，它看起来很有希望在 Mono 移动平台上共享绘图代码：

> 绘图命令包括：
> 
> *   使用 FillRect 和 DrawRect 的矩形
> *   使用 FillRoundedRect 和 DrawRoundedRect 圆角矩形
> *   使用 FillOval 和 DrawOval 的椭圆
> *   使用 DrawLine 和选项 BeginLine 和 EndLine 基元的线条
> *   使用 DrawImage 的图像
> *   使用 DrawString 的文本和相关的字体函数

# wpf - 什么控件可以用来显示txt文件以及pfd和.doc

> ID：10166845
> 
> 赞同：1
> 
> 时间：2012-04-15T22:46:59.990
> 
> 标签：wpf, windows, forms, controls

我对 Windows 窗体编程比较陌生，并且正在寻找一种可用于显示 .txt、pdf 和 doc 文件的控件。当我第一次开始在谷歌上搜索解决方案时，我被引导使用 wpf xps 控件的可能性，但我必须弄清楚如何将其集成到 win 表单应用程序中，但仍然不清楚它是否能解决所有问题我的问题。对此的任何指导将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T00:45:27.067

一般来说，我不会那样做（尝试找到一个可以做任何事情的单一控件）。相反，我会考虑为不同类型的内容创建不同的控件，并根据您显示的内容切换控件上的可见状态。

# c# - 新程序员 C# - 如何添加多个 numericUpDown 值？

> ID：10166846
> 
> 赞同：0
> 
> 时间：2012-04-15T22:47:07.153
> 
> 标签：c#

我正在制作一个程序，它需要添加所有 numericUpDowns 的值，并将其显示在标签上。

numericUpDowns 以编程方式创建并添加到 ArrayList。

```
ArrayList numericUpDownMy = new ArrayList();
     numericUpDownMy.Add(new NumericUpDown());
        System.Drawing.Point h = new System.Drawing.Point(120, 275+ i * 19);          
        (numericUpDownMy[i] as NumericUpDown).Location = h;
        (numericUpDownMy[i] as NumericUpDown).Size = new System.Drawing.Size(50, 20);
        this.Controls.Add(numericUpDownMy[i] as NumericUpDown);
         int total = (((int)numericUpDown[0]) + ((int)numericUpDown[1]) + ((int)numericUpDown[2]) + ((int)numericUpDown[3]));
    labelScore.Text = total.ToString(); 
```

显然这不起作用，因为我没有得到 NumericUpDown 的实际值。任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T22:50:28.370

改变这一行：

```
 decimal total = (numericUpDownMy[1] as NumericUpDown).Value + 
                  (numericUpDownMy[2] as NumericUpDown).Value + 
                  (numericUpDownMy[3] as NumericUpDown).Value; 
```

除此之外，不要使用`ArrayList`, 使用 `List<NumericUpDown>`, 来摆脱所有的强制转换或最后添加到集合中。我会以这种方式编写该代码：

```
 List<NumericUpDown> numUpDnList = new List<NumericUpDown>();
  for (int i = 0; i < 3; i++)
  {
    NumericUpDown numUpDn = new NumericUpDown();
    numUpDn.Location = new System.Drawing.Point(120, 275 + i * 19);
    numUpDn.Size = new System.Drawing.Size(50, 20);
    this.Controls.Add(numUpDn);
    numUpDnList.Add(numUpDn);
  }
  decimal total = numUpDnList.Sum(updn => updn.Value);
  labelScore.Text = total.ToString(); 
```

# css - Sass：通过变量迭代链接选择器

> ID：10166850
> 
> 赞同：0
> 
> 时间：2012-04-15T22:47:57.813
> 
> 标签：css, compass-sass, sass

> *[我使用的是 Sass 缩进语法，尽管可以通过 SCSS 来回答]*

这是循环的嵌套部分，我想在其中使用变量为每次迭代命名选择器：

```
$class: 2      
@for $i from 1 through 2
  @if $i == 1
    $sel: link
  @if $i == 2
    $sel: visited
  div #s-#{$class} ul
    &:nth-child(1) li
      &:nth-child(2) a
        &:$sel
          color: $cc 
```

但我得到：

```
"Syntax error: Invalid CSS after \"&:\": expected pseudoclass or pseudoelement, was \"$sel\"\A 
```

（是的，我可以看到这是一个语法错误）

我正在寻找这样的输出：

```
div #s-2 ul:nth-child(1) li:nth-child(2) a:link {
  color: #cc0000;
}

div #s-2 ul:nth-child(1) li:nth-child(2) a:visited {
  color: #cc0000;
} 
```

如果做这样的事情，Sass 有能力吗？如果有怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T23:16:43.527

有一种更好（更明显）的方法可以实现我想要实现的目标（以 $i from 1 to 1 为例）：

```
$class: 2   
@for $i from 1 through 1
  div #s-#{$class} ul
    &:nth-child(1) li
      &:nth-child(2) a
        &:visited, &:link
          color: $cc 
```

输出

```
div #s-2 ul:nth-child(1) li:nth-child(2) a:visited, div #s-2 ul:nth-child(1) li:nth-child(2) a:link {
  color: #cc0000;
} 
```

虽然我对使用选择器作为变量的方法感到好奇

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T17:01:44.503

尝试使用`#{$sel}`：

```
$class: 2
$cc: #cc0000
@for $i from 1 through 2
  $sel: ()
  @if $i == 1
    $sel: link
  @if $i == 2
    $sel: visited
  div #s-#{$class} ul
    &:nth-child(1) li
      &:nth-child(2) a
        &:#{$sel}
          color: $cc 
```

这使：

```
div #s-2 ul:nth-child(1) li:nth-child(2) a:link {
  color: #cc0000; }

div #s-2 ul:nth-child(1) li:nth-child(2) a:visited {
  color: #cc0000; } 
```

请注意，我必须`$sel`在 if 之前进行初始化，可能是因为否则它会停留在每个 if 的范围内。我昨天才学 SASS，所以我可能不正确。;)

# javascript - javascript 优化和缩小与 gzipping

> ID：10166854
> 
> 赞同：1
> 
> 时间：2012-04-15T22:48:21.657
> 
> 标签：javascript, optimization, compression, gzip

我注意到 minifier 在原型 javascript 中表现不佳，因为如果它们以此开头，它们不会替换任何方法或属性。例如：

```
// unoptimized 182 bytes
myClass.prototype.myFunction = function(){
    this.myElementDom.style.backgroundColor='#000';
    this.myElementDom.style.color='#FFF';
    this.myElementDom.style.borderColor='#DDD';
}

// 168 bytes = 92% of unoptimized, YUI compressed
myClass.prototype.myFunction=function(){this.myElementDom.style.backgroundColor="#000";this.myElementDom.style.color="#FFF";this.myElementDom.style.borderColor="#DDD"};

// optimized 214 bytes
// set a replaceable local scope variable and reduce 2 variable 
// lookups at the same time
// file-size in the development version doesn't matter, so we can even increase it 
// to preserve readability
myClass.prototype.myFunction = function(){
    var myElementDomStyle = this.myElementDom.style
    myElementDomStyle.backgroundColor='#000';
    myElementDomStyle.color='#FFF';
    myElementDomStyle.borderColor='#DDD';
}

// 132 bytes = 72.53% of unoptimized, YUI compressed
myClass.prototype.myFunction=function(){var a=this.myElementDom.style;a.backgroundColor="#000";a.color="#FFF";a.borderColor="#DDD"}; 
```

万岁，节省了 19.47%……不是……当发布启用 gzip 的脚本时，未优化的 YUI 压缩版本加载了 130 个字节（= 未优化的 71.42%），显然比优化的 YUI 压缩版本节省更多134 字节（= 73.63% 未优化）......在考虑了压缩的工作原理之后可能很明显，但现在要走的路是什么？首先进行这种微优化和较小的压缩来证明使用 gzip 更大的文件大小是合理的......因为通过这种优化，您可以轻松地降低代码的可读性和可维护性。

所有信息根据[http://refresh-sf.com/yui/](http://refresh-sf.com/yui/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T23:15:03.743

一件事不排除另一件事：您可以对 JS 文件进行最小化和 gzip 压缩（gzip 压缩通常发生在网络服务器级别）。我认为它将提供最好的结果。最小化和压缩在较大的文件上效果更好。

除了让 JS 更小，我还会看看：

1.  将 JS 文件合并为一个压缩文件以减少 HTTP 请求的数量
2.  优化 HTTP 缓存设置
3.  将JS放入CDN以减少下载时间
4.  对一些常见的 JS 库（例如 jQuery）使用公共 CDN，因此更有可能从用户的本地缓存中获取
5.  添加 JS 文件和 HTML 页面的结尾

[使用http://www.webpagetest.org/](http://www.webpagetest.org/)检查您的网站，以报告其他可以改进的地方

有关更多信息，我建议阅读《[高性能网站》](http://shop.oreilly.com/product/9780596529307.do)一书。它涵盖了任何场景，即使是简单的更改也可以显着改善页面加载时间

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T23:00:48.727

代码可读性不应该涉及 - 你应该只在生产服务器上缩小并在未缩小的代码上开发。不要微优化你的变量和函数名，你几乎肯定会牺牲代码的可读性来获得几乎为零的可用性增益——你说的是一个几 KB 的文件，该文件将被下载一次并缓存。

至于是缩小和 gzip 还是仅 gzip - 以产生较小的整体文件大小为准。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T23:12:28.007

无论如何，182 字节的代码不会缩小或压缩太多。缩小通过消除空格（在您的五行代码中只有 16 个字节）和缩短函数、变量和属性名称来工作，在这种情况下由于范围的原因它不能这样做。压缩通过找到重复的序列并消除它们来工作。您的五行代码中根本没有足够的文本来找到很多重复。

尝试压缩和压缩 50 或 100 或更多行代码，您会看到更引人注目的结果。而且，正如@rgvcorley 建议的那样，您应该专注于使您的代码在您的开发环境中具有可读性和可维护性，并将文件大小的较小细节留给您的构建过程和 Web 服务器。

# php - 如何创建一个 if 语句作为 MySQL php echo 循环的一部分？

> ID：10166855
> 
> 赞同：0
> 
> 时间：2012-04-15T22:48:23.040
> 
> 标签：php, mysql, select, loops, if-statement

我正在构建一个机场出租车预订系统，作为包含预订的表格的一部分，有以下列以及本示例不需要的其他数据：

```
Customer Name 
Outbound_date
Outbound_time
Outbound_pickup
Outbound_destination

Inbound_date
Inbound_time
Inbound_pickup
Inbound_destination 
```

我正在构建一个页面，显示用户输入的两个日期之间的所有预订，然后将结果显示在 HTML 表格中，标题如下：姓名、取货、目的地、日期、时间。

我想做的是建立一个 if 语句，询问入境或出境日期是否最近，然后显示旅程信息。我需要所有这些都在 HTML 表的循环中。

我大致假设该声明会询问是否`outbound_date`<`inbound_date` `echo outbound_destination`等...否则`echo inbound_destination`等...

这是我选择数据并显示它的代码，但是它当前选择 outbound_pickup/destination/date 和入站版本。我想要做的只是显示出站/入站列，这取决于用户提交的两个日期之间。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">

<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Computerised Booking System | Airport Hopper</title>
    <meta name="generator" content="TextMate http://macromates.com/">
    <meta name="author" content="Daniel Green">
    <link rel="stylesheet" type="text/css" href="../css/main.css"/>
    <!-- Date: 2012-02-27 -->
</head>
<body>
<div id="wrapper">
<?php include('../includes/header.php');?>
<?php include('../includes/cbs_sidebar.php');?>

<div class="main-container">
<h2>Airport Hopper CBS</h2><hr/>
<?php
$db_host = 'ahopperintranet.db.8239985.hostedresource.com';
$db_user = 'ahopperintranet';
$db_pwd = '******';

$database = 'ahopperintranet';
$table = 'bookings';

if (!mysql_connect($db_host, $db_user, $db_pwd))
    die("Can't connect to database");

if (!mysql_select_db($database))
    die("Can't select database");

// sending query
$result = mysql_query("SELECT booking_ref, customer_name, outbound_destination, outbound_date, outbound_time, inbound_date FROM {$table} ORDER BY GREATEST(outbound_date, inbound_date)");
if (!$result) {
    die("Query to show fields from table failed");
}

$fields_num = mysql_num_fields($result);

echo "<table border='1'><tr>";
 ?>

<tr>
    <td>Booking Ref</td>
    <td>Customer Name</td>
    <td>Pickup</td>
            <td>Destination</td>
            <td>Date</td>
            <td>Time</td>

</tr>

<?php
// printing table rows
while($row = mysql_fetch_row($result))
{
    echo "<tr>";

    // $row is array... foreach( .. ) puts every element
    // of $row to $cell variable
    foreach($row as $cell)
        echo "<td>$cell</td>";

    echo "</tr>\n";
}
mysql_free_result($result);
?>
<div class="clear"></div>
</body> 
```

# visual-studio-2010 - 添加新生成的模型文件的正确方法是什么？在 VS 2010 英孚

> ID：10166857
> 
> 赞同：1
> 
> 时间：2012-04-15T22:48:58.380
> 
> 标签：visual-studio-2010, entity-framework

我在VS2010中使用EF。我首先创建了一个数据库，然后选择从数据库中创建模型。然后我选择添加代码生成项。到目前为止，一切看起来都很好。现在我在我的数据库中添加了一个新表，然后我从数据库中选择更新模型。这还是可以的。如何告诉 VS 2010 为该新表生成模型文件？

每次对数据库进行更改时，我都会删除所有内容并一遍又一遍地重复该步骤。有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T23:01:49.790

当您单击 *.edmx 中的**添加代码生成项**时，它将创建两个文件：

**YourModel.Context.tt** *（为 YourModel.edmx 生成强类型 ObjectContext）*

**YourModel.tt** *（负责为YourModel.Context.tt中的每个EntityType和ComplexType生成一个文件）*

当您更新 *.edmx 时，您只需右键单击 YourModel.tt 并选择**Run Custom Tool**。

更多信息：

因为您使用的是这种方法，我建议您将**YourModel.tt**文件移动到单独的*类库*项目中（按住*Shift*键并拖动并移动它）

调整：

***字符串 inputFile = @"YourModel.edmx";*** 到

***字符串输入文件 = @"..\YourNamespaceWhereEdmxIS\YourModel.edmx";***

在**YourModel.tt**中。

在属性浏览器中更改YourModel.Context.tt**的****自定义工具命名空间以匹配*****YourClassLibraryName***

 ***问候。***

# css - 带有 DIV 的可打印样式表

> ID：10166858
> 
> 赞同：3
> 
> 时间：2012-04-15T22:48:59.650
> 
> 标签：css, html

我有一个网站，我正在尝试制作可打印版本，并且正在使用新的打印样式表，但我遇到了问题。我有一个用于星级评定的 DIV，它只是 html 文件中的一个空 DIV，但在常规 CSS 中，我有实际星星的背景图像。

html 文件中的 DIV 如下所示：

```
<div class="example_rating"></div> 
```

常规样式表中的代码如下所示：

```
.example_rating {

  height:40px;

  width:200px;

  margin-left:20%;

  background: url('../stars.png') no-repeat scroll 0 0 transparent;

  } 
```

我的问题是星级评分根本没有以网页的可打印格式显示。我没有隐藏 DIV 或任何东西，但我不确定我能做些什么才能让它以可打印的格式显示。

我意识到这个问题可能有点模糊，但我不确定如何解释它。如果需要，我绝对可以提供更多细节。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T22:58:08.100

在您的 CSS 中，星星呈现为背景图像，并且在打印时，默认情况下通常不会显示背景。

您要么必须将星星显示为`<img>`，要么告诉您的用户启用背景打印。

**编辑：**

解决这个问题的最简单方法是将星级评分打印为文本*以及*背景图像，然后让 div 内的字体透明（在打印样式表中为黄色）。例子：

```
<div class="example_rating">
  4/5 stars.
</div> 
```

样式表：

```
.example_rating {
  color:Transparent;
  /* Alternatively: text-indent: -9999px; */
  height:40px;
  width:200px;
  margin-left:20%;
  background: url('../stars.png') no-repeat scroll 0 0 transparent;
} 
```

**编辑2：**

您可以尝试将其放入您的打印样式表中：

```
.example_rating {
  background: none;
}
.example_rating:after {
  content: '4/5 stars'
} 
```

这会使用 CSS 将一些文本放入 div 中，如果您仅将其放入打印样式表中，它只会在您打印时出现！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-15T22:57:49.103

尝试制作一个新的仅打印样式表......像这样：

```
<link rel="stylesheet" type="text/css" media="print" href="print.css" /> 
```

或者在您当前的样式表中，将您的打印样式放入

```
@media print { 
} 
```

# php - 传递和检索 URL 变量

> ID：10166859
> 
> 赞同：0
> 
> 时间：2012-04-15T22:49:03.813
> 
> 标签：php

我正在尝试将变量从一个页面传递和检索到另一个页面。当我运行该页面时，我收到错误“找不到 URL”。所以我猜我的变量没有被传递到页面。

当我单击页面 edit.php 和 delete.php 时，将显示相应的 url。即edit.php?id=1、edit.php?id=2 等。我尝试了许多不同的方法，但似乎无法解决这个问题。

这是源代码：

第一页（链接）：

```
$ads_id = $row ["ads_id"]; //Value retrieved from database and stored in local variable

<a href="delete.php?id=' . $ads_id . '">

<a href="edit.php?id=' . $ads_id . '"> 
```

**编辑.php**

```
if (isset($_GET['id'])) {

$ads_id = $_GET['id'];

}
else

 {

  echo "URL not found";
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T22:52:17.380

```
$ads_id = $row ["ads_id"]; //Value retrieved from database and stored in local variable

<a href="delete.php?id=' . $ads_id . '">

<a href="edit.php?id=' . $ads_id . '"> 
```

应该是这样的：

```
<?php
$ads_id = $row["ads_id"]; //Value retrieved from database and stored in local variable
?>

<a href="delete.php?id=<?=$ads_id?>">

<a href="edit.php?id=<?=$ads_id?>"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T00:34:36.510

我认为您的代码的问题在于它没有 php 开始和结束标记

它应该看起来像

```
<?php 
$ads_id = $row["ads_id"]; //Value retrieved from database and stored in local variable
?>

<a href="delete.php?id=<?php echo $ads_id; ?>">

<a href="edit.php?id=<?php echo $ads_id; ?>"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T23:22:08.730

您可以试试这个...由于单引号`'`问题，您遇到了错误...并且由于您将添加多个链接，这`php function`可能会对您有所帮助...

```
$ads_id = $row ["ads_id"]; //Value form database source 

echo addLink("delete.php?id={$ads_id}","Link1") , "<br />";
echo addLink("edit.php?id={$ads_id}","Link1") , "<br />";

function addLink($url,$name)
{
    return sprintf("<a href=\"%s\">%s</a>",$url,$name);
} 
```

# design-patterns - 替代单例以获得独特的资源

> ID：10166860
> 
> 赞同：4
> 
> 时间：2012-04-15T22:49:13.770
> 
> 标签：design-patterns, singleton, global-variables

我一遍又一遍地阅读，出于各种原因，应该避免使用单例。我想知道如何正确处理类代表唯一系统资源的情况。例如，使用 SDL 的 AudioOutput 类。由于 SDL_OpenAudio 一次只能打开一次，因此拥有多个此类对象是没有意义的，在我看来，防止意外制作多个对象实际上会很好。

只是想知道有经验的程序员对此有何看法，我是否错过了另一种选择？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-15T23:10:02.317

Singleton 的问题之一是它的使用通常破坏了控制反转原则（或[SOLID](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)方面的依赖反转）。

Singleton 不仅阻止创建多个对象，它还公开了这个对象，以便从代码中的任何地方访问。这很糟糕，因为如果您决定更改创建/访问对象的方式，则必须更改代码中期望的所有位置，例如，它们应该通过 static 访问它`SingletonClass.GetInstance()`。

此外，当您实施单元测试时，通常需要使用模拟而不是真实对象。在您的情况下，如果您希望对某个模块进行单元测试，并且该模块通过 访问真实的音频输出`SingletonClass.GetInstance()`，那么用存根替换真实的音频输出将变得非常困难。

另一方面，如果您的模块通过[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)获取音频输出对象（例如，作为传递给构造函数的参数），那么在测试时，您可以注入一个实现相同接口的存根，而不是真正的音频输出对象。

当然，在**注入**此类对象的级别上，您可以使用单例来确保一次只有一个实例。要点是底层代码不应该关心可以有多少对象或如何获取它们 - 它只适用于注入的内容。

因此，作为底线，如果您真的认为需要它，您可以使用 Singleton，但不要让它作为全局状态访问。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T22:59:49.000

明智地使用设计模式是一个棘手的问题，需要大量练习。

我见过很多人使用 Singleton 只是因为它“有点”适合他们需要做的事情。这通常会导致灾难，例如在多线程环境的情况下，或者就像它旨在隐藏设计缺陷并需要稍后重新设计完整的系统一样。

我想说你在考虑 Singleton 时需要考虑一些事情：

*   我真的只需要我的对象的一个​​实例吗？我不是在试图隐藏一些设计缺陷吗？
*   可以全局访问我的对象是否有意义？

但我想说不要花太多时间在它上面：它可能并不总是最好的解决方案，但在某些情况下这仍然是一个可以接受的解决方案，除非你在多线程环境中，否则你会可能很少有问题。这主要是一种设计选择。

如果你想获得更多关于设计模式的知识，我推荐[这本书](https://rads.stackoverflow.com/amzn/click/com/0201633612)，这几乎是该主题的参考。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-15T22:51:57.053

只要：

*   您不在多线程环境中（多个线程访问单例）
*   您*处于*多线程环境中并在单例中实施了适当的保护
*   单例对象未在多个动态加载的模块中定义

# sql - 关于编写sql删除语句的建议

> ID：10166861
> 
> 赞同：0
> 
> 时间：2012-04-15T22:49:39.137
> 
> 标签：sql

我正在尝试根据某些条件使用 sql 编写删除语句。我遇到了麻烦。这是标准。

程序应提示用户输入 ssn 并从 Employee 表中删除该员工（由于 ON DELETE CASCADE 操作，引用该员工的 Technician 表和 Expert 表中的记录也将被删除）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T22:53:57.333

```
DELETE FROM Employees WHERE SSN='508-12-1234' 
```

假设 Technician 和 Expert 表的外键设置正确，这应该是您需要做的所有事情。

# c++ - 编写 C++ 运算符重载？

> ID：10166863
> 
> 赞同：2
> 
> 时间：2012-04-15T22:50:01.570
> 
> 标签：c++

当我遇到运算符重载问题时，我正要完成我的任务，错误说

错误 1 ​​错误 C2661: 'Date::Date' : 没有重载函数需要 3 个参数 c:\users\86\documents\visual studio 2010\projects\assignmnent 3 840\assignmnent 3 840\date.cpp 137

2 IntelliSense：构造函数“Date::Date”的实例不匹配参数列表 c:\users\86\documents\visual studio 2010\projects\assignmnent 3 840\assignmnent 3 840\date.cpp 137

及其标记日期返回 Date(mt,dy,yr); 请帮忙，我已经尝试这个东西 3 个小时了。

这是代码

```
////////////////////date.h

#include <iostream>
using namespace std;

class Date
{
private:
int day,month,year ;

public:

Date ();
void setValues();
//   int getValues() ;
Date operator=(const Date &);
//
Date(const Date &);
// 

//friend     Date operator+(Date a,Date b);
Date operator-(const Date &);

friend bool operator>(Date a, Date b);
friend bool operator==(Date a, Date b);
friend ostream &operator<<(ostream &out, Date a);
friend istream &operator>>(istream &in, Date &a);

//

};

/////////////////date.cpp

#include <iostream>
using namespace std;

class Date
{
private:
int day,month,year ;

public:

Date ();
void setValues();
//   int getValues() ;
Date operator=(const Date &);
//
Date(const Date &);
// 

//friend     Date operator+(Date a,Date b);
Date operator-(const Date &);

friend bool operator>(Date a, Date b);
friend bool operator==(Date a, Date b);
friend ostream &operator<<(ostream &out, Date a);
friend istream &operator>>(istream &in, Date &a);

//

};

////////driver.cpp
//test.cpp
#include "date.h"
#include <iostream>
using namespace std;
int main()
{
Date date1;
Date date2 = date1; //copy constructor called

cout << "Initial date values\n";
cout << "Date 1 is ";
cout << date1 << endl;
cout << "Date 2 is ";
cout << date2 << endl;
cout << "Enter a date no earlier than 1800\n";
cin >> date1;

cout << "Enter another date no earlier than 1800\n";
cin >> date2;
cout << "Revised date values\n";
cout << "Date 1 is ";
cout << date1 << endl;
cout << "Date 2 is ";
cout << date2 << endl;

if (date1 == date2)
cout << "The two input dates are the same\n";
else if (date1 > date2)

{
cout << "Date 1 is later in time than Date 2 by ";
Date temp = date1 - date2;
cout << temp << endl;
}
else
{
cout << "Date 2 is later in time than Date 1 by ";
Date temp = date2 - date1;
cout << temp << endl;
}

//Date date3, date4;
//date4 = date3 = date2; //overloaded assignment operator called
//cout << "After the assignment date4 = date3 = date2\n";
//cout << " Date 3 is " << date3 << " and Date 4 is " << date4 << endl;
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T22:54:24.540

在`.cpp`文件中，您不应该重新定义类，而是包含标题并实现方法。所以，`Date.h`没关系，但`Date.cpp`应该是这样的：

```
//Date.cpp
#include "Date.h"

Date::Date ()
{
}

void Date::setValues()
{
}
Date Date::operator=(const Date &)
{
   return *this;
}
Date::Date(const Date &)
{
}
Date Date::operator-(const Date &)
{
   return *this;
}
bool operator>(Date a, Date b)
{
    return true;
}
bool operator==(Date a, Date b)
{
    return true;
}
ostream &operator<<(ostream &out, Date a)
{
    return out;
}
istream &operator>>(istream &in, Date &a)
{
    return in;
} 
```

缺少实现，运算符应该在另一个头文件中声明，可能`Date.h`，并且`operator =`应该返回 a `Date&`，而不是 a `Date`（尽管不是强制性的。

此外，如果您希望`Date`使用 3 个参数进行调用，您可能需要：

```
Date::Date (int day_, int month_, int year_ ) :
   day(day_), month(month_), year(_year)
{
} 
```

在您的实现文件中，并在标题中声明此构造函数。

# ruby-on-rails - Ruby Rails Lib 文件夹命名约定

> ID：10166866
> 
> 赞同：6
> 
> 时间：2012-04-15T22:50:34.060
> 
> 标签：ruby-on-rails, naming-conventions

我似乎对 Rails 中 Lib 文件夹的命名约定有疑问，并且提供给我的错误消息没有帮助。[例如，我收到一条消息说 XXX::YYY::TextBox 应该被定义为 xxx/yyy/text_box.rb，即使它在那里明确定义。] 我想我弄错了约定。

假设我正在开发 YourModule::MyModule::MyClass。我清楚地知道这个文件应该位于

lib/your_module/my_module/my_class.rb

但是这里的实际文件应该是什么样子？其中哪一个（如果有的话）是正确的？

```
#your_module/my_module/my_class.rb
module YourModule
  module MyModule
    class MyClass
       ...
    end
  end
end 
```

或者

```
#your_module/my_module/my_class.rb
class MyClass
  ...
end 
```

换句话说，我是否需要将类嵌套在模块结构中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T23:30:55.740

lib 文件夹没有什么约定，因为它不是自动加载的。因此，如何组织文件取决于您，但您必须正确命名类。你的第一个例子是正确的。

要获得包含的文件，您需要在 application.rb 文件中指定您想要的文件，请参见此示例：[Best way to load module/class from lib folder in Rails 3?](https://stackoverflow.com/questions/3356742/best-way-to-load-module-class-from-lib-folder-in-rails-3)

我建议创建一个名为 的文件夹`lib/modules`，因为您可能不会有很多。命名文件`my_class.rb`。然后在`application.rb`你需要：

```
config.autoload_paths += %W(#{config.root}/lib/modules) 
```

那应该可以解决您的问题。

# jquery - jquery Wookmark 插件无限加载/Scoll

> ID：10166870
> 
> 赞同：0
> 
> 时间：2012-04-15T22:51:08.913
> 
> 标签：jquery

我为我的网站使用 Wookmark jQuery 网格布局。

[https://github.com/GBKS/Wookmark-jQuery](https://github.com/GBKS/Wookmark-jQuery)

我需要自动加载/无限滚动工作。

在示例中，它只是再次加载前 10 张图像，如何让它继续加载列表的其余部分，就像在 Wookmark.com 和 Pinterest.com 上一样？

我试图改变的代码部分：

```
/**
 * When scrolled all the way to the bottom, add more tiles.
 */
function onScroll(event) {
  // Check if we're within 100 pixels of the bottom edge of the broser window.
  var closeToBottom = ($(window).scrollTop() + $(window).height() > $(document).height() - 100);
  if(closeToBottom) {
    // Get the first then items from the grid, clone them, and add them to the bottom of the grid.
    var items = $('#tiles li');
    var firstTen = items.slice(0, 10);
    $('#tiles').append(firstTen.clone());

    // Clear our previous layout handler.
    if(handler) handler.wookmarkClear();

    // Create a new layout handler.
    handler = $('#tiles li');
    handler.wookmark(options);
  }
}; 
```

提前致谢。我环顾四周并尝试了一些不同的东西，但没有运气。干杯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T13:29:25.363

我刚刚在 GitHub 存储库中添加了一个关于如何执行此操作的示例。该示例从 Wookmark API 加载数据并在页面上显示图像。当您向下滚动并到达底部时，它会加载更多。

这是示例的直接链接：[https ://github.com/GBKS/Wookmark-jQuery/tree/master/example-api](https://github.com/GBKS/Wookmark-jQuery/tree/master/example-api)

让我知道这对你有什么影响。

# php - 带有按钮的 Javascript 提交功能不起作用

> ID：10166873
> 
> 赞同：0
> 
> 时间：2012-04-15T22:52:20.573
> 
> 标签：php, javascript, html

我正在尝试使用 javascript 中的提交功能来提交表单。我不使用提交按钮的原因是我想询问用户是否真的想提交表单。这是代码：

```
<?php    
if(isset($_POST['submit1']))
die("Submit successfull!");
?>

<!--Javascript submit question.-->
<script type="text/javascript">
function question_submit() {
    if(confirm('Are you sure you want to submit?')) {
        return true;
    }

    else {
        alert('You have not submitted this form');
        return false;
    }
}
</script>

<!--The form-->
<form action='test.php' method='POST'>
<input type='button' name='submit1' value='Submit' onClick="if(question_submit()) { this.form.submit(); }" />
</form> 
```

结果：弹出窗口效果很好，它只是不想提交表单，所以“提交成功！” 永远不会出现。

当我向页面添加真正的提交按钮时，甚至没有显示该消息。就像 POST 数据不起作用。但是当我为提交按钮添加一个 PHP 代码和 die-function 时，事情会起作用并且“REal Submit Works”会出现，这很奇怪，因为按钮代码是第一位的。

```
<?php
if(isset($submit1))
die("Submit successfull!");
if(isset($_POST['realsubmitbutton']))
die("REal Submit Works");
?> 
```

我还尝试将 onClick 更改为仅包含 javascript 提交功能。像这样：onClick="this.form.submit();"。但这也行不通。所以我的问题是，代码有什么问题，为什么它不起作用？

按钮不能通过 POST 发送它的值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T22:54:19.067

问题是您正在通过`onclick`处理程序提交表单。这意味着，按钮不会作为提交的一部分被按下。

您可以`true`从该函数返回以获得您想要的行为。

但实际上，这是一个坏主意。我们中的许多人更喜欢在表单字段上简单地按 Enter，而不是单击提交。在您的表单处理程序上，只需检查即可`!empty($_POST)`。将您的“您确定”功能作为`onsubmit`表单的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T22:55:46.413

直接在表单上使用“onSubmit”事件而不是单击按钮。如果您实际上不想提交，则返回“false”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T23:05:57.037

修改您的函数，使其获得对表单的引用并调用它的 submit() 方法：

```
function question_submit() {
    if(confirm('Are you sure you want to submit?')) {
        document.getElementById("myForm").submit();
        return true;
    } else {
        alert('You have not submitted this form');
        return false;
    }
} 
```

此外，更新表单 HTML 以使表单具有 id，并修改您的 HTML 按钮，使其调用 question_submit() 函数。将实际业务逻辑留给函数以保持 HTML 干净。最后，确保你的属性都是小写的。这不应该影响功能，但使用小写属性名称更简洁：

```
<form action='test.php' method='POST' id='myForm'>
    ...
    <input type='button' name='submit1' value='Submit' onclick="question_submit();" />

</form> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T23:10:03.867

仅当输入为提交类型时，返回`true`或才有效。`false`所以，你应该改变

```
<input type='button' name='submit1' value='Submit' onClick="if(question_submit()) { this.form.submit(); }" /> 
```

为了

```
<input type='submit' name='submit1' value='Submit' onClick="if(question_submit()) { this.form.submit(); }" /> 
```

使用您的功能，它只会在用户接受时提交。或者，你可以使用

```
<form action='test.php' method='POST' onClick="return question_submit()">
  <input type='submit' name='submit1' value='Submit' />
</form> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T12:07:03.930

我已阅读您所有的答案并完成了代码。它现在可以同时单击按钮或按 Enter 键。javascript 以任何一种方式正确运行，并且表单被提交。这是代码：

```
<?php
if(!empty($_POST['justaname']))
die("Submit successfull!");
?>

<!--Javascript submit question.-->
<script type="text/javascript">
function question_submit() {
    if(confirm('Are you sure you want to submit?')) {
        document.getElementById("myform").submit();
    }

    else {
        alert('You have not submitted this form');
    }
}
</script>

<!--The form-->
<form action='test.php' method='POST' id="myform" onSubmit="event.preventDefault(); question_submit();">
<input type="text" name='justaname' />
<input type='button' name='submit1' value='Submit' onClick="question_submit()" />
</form> 
```

感谢所有答案，并希望这对某人有所帮助。

# c - 如何在使用 C 时找出 Linux 中的剩余堆栈

> ID：10166874
> 
> 赞同：3
> 
> 时间：2012-04-15T22:52:24.687
> 
> 标签：c, linux, stack-overflow

我正在开发一个倾向于使用大量堆栈内存的程序。有没有办法找出堆栈上的剩余空间？这是在linux平台上的。

谢谢！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T23:54:28.420

> 有没有办法找出堆栈上的剩余空间

是的，有：对于主线程，您可以简单地`&argc`在 main 中记录一些全局（例如`int *g_addr_argc`），然后调用`getrlimit(RLIMIT_STACK, ...)`并比较一些本地的地址，例如

```
char a_local;
struct rlimit rlim_stack;

if (getrlimit(RLIMIT_STACK, &rlim_stack) == 0 &&
    rlim_stack.rlim_cur != RLIM_INFINITY &&
    (uintptr_t)g_addr_argc - (uintptr_t)&a_local > rlim_stack.rlim_cur - 8192) {
  fprintf(stderr, "Danger: getting too close to the stack limit\n");
} 
```

这仅适用于主线程。如果您的应用程序是多线程的，您可以使用它`pthread_getattr_np`来查找有关当前线程堆栈的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T23:29:15.683

您可以在代码中自己设置堆栈大小，[使用`setrlimit`](https://stackoverflow.com/a/2284691/17027). 然后你不必怀疑，你可以在你认为合适的时候增加它（在合理的范围内）。

```
#include <sys/resource.h>

int main (int argc, char **argv)
{
    const rlim_t kStackSize = 16 * 1024 * 1024;   // min stack size = 16 MB
    struct rlimit rl;
    int result;

    result = getrlimit(RLIMIT_STACK, &rl);
    if (result == 0)
    {
        if (rl.rlim_cur < kStackSize)
        {
            rl.rlim_cur = kStackSize;
            result = setrlimit(RLIMIT_STACK, &rl);
            if (result != 0)
            {
                fprintf(stderr, "setrlimit returned result = %d\n", result);
            }
        }
    }

    // ...

    return 0;
} 
```

# java - 有人可以详细解释一下“this”的用法吗？

> ID：10166878
> 
> 赞同：1
> 
> 时间：2012-04-15T22:53:21.280
> 
> 标签：java, object, methods, this

我不太了解 Java 中“this”的用法。如果有人可以帮助我澄清，我将不胜感激。

在这个网站上它说：[http ://docs.oracle.com/javase/tutorial/java/javaOO/thiskey.html](http://docs.oracle.com/javase/tutorial/java/javaOO/thiskey.html)

“在实例方法或构造函数中，this 是对当前对象的引用——调用其方法或构造函数的对象。您可以使用 this 从实例方法或构造函数中引用当前对象的任何成员。 "

它给出了以下示例：

例如，Point 类是这样写的

```
public class Point {
    public int x = 0;
    public int y = 0;

    //constructor
    public Point(int a, int b) {
        x = a;
        y = b;
    }
} 
```

但它可能是这样写的：

```
public class Point {
    public int x = 0;
    public int y = 0;

    //constructor
    public Point(int x, int y) {
        this.x = x;
        this.y = y;
    }
} 
```

然而，我仍然不完全理解为什么 x = a 可以写成 this.x = x？为什么不是this.x = a？为什么x在左边？

对不起，我对 Java 很陌生。我很抱歉让专家们感到厌烦。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T22:55:41.997

如果定义了一些与对象属性同名的变量/参数，它会“重叠”该属性的名称，并且应该使用 this.var_name。

所以是的，它可以写成`this.x = a`，但有些多余。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T22:56:09.043

在第二个示例中，其中一个参数被命名为 x。通过引用 this.x，您的意思是该方法所属的类的 x 字段/属性。它可以读作：Point.x = argument x

这是用来区分两者的，使代码的含义清晰。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T22:56:20.680

不是 this.x = a 因为在第二个示例中没有“a”。关键是您可以重用相同的变量名，这样不会造成混淆：-|

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-15T22:58:26.210

“this”是对您正在使用的当前对象的引用。当字段和参数之间存在名称冲突时，您可以使用它。参数优先于字段。

没有冲突，不需要这个：

```
public Point(int a, int b) {
    x = a;
    y = b;
} 
```

但这也可以：

```
public Point(int a, int b) {
    this.x = a;
    this.y = b;
} 
```

名称冲突，需要使用“this”：

```
public Point(int x, int y) {
    this.x = x;
    this.y = y;
} 
```

如果你只做了

```
public Point(int x, int y) {
    x = x;
    y = y;
} 
```

那么你只需为参数分配它自己的值，这实际上什么都不做。

关键字“this”的用法更多。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-15T22:58:48.327

这样做的目的是*非常*清楚地表明您正在为构造函数提供值，`x`并且`y`在构造函数中提供值。

现在的问题是，由于构造函数中的范围规则是`x`指传递的值而不是字段`x`。因此`x = x`导致参数被分配其自己的值并且阴影字段保持不变。这通常不是我们想要的。

因此，需要一种机制来表示“我需要*另一个*x 而不是此处立即可见的 x”。这里`this`指的是当前对象 - 所以`this.x`指的是当前对象中的一个字段，并且`super`指的是这个对象扩展的对象，这样你就可以到达一个“更高”的字段。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-15T22:59:51.480

`this`是对当前对象的引用，因此您可以像访问任何其他对象一样访问它-`this.x`是`x`. 传入的参数也是`this`如此，您将其分配给.`x``this.x`

这就是命名空间——变量名称仅适用于给定代码块的想法。在 java 中，您在属于该类的函数中工作，您位于该类的命名空间中，但是，如果您有另一个与参数同名的变量，它将优先，您可以访问属性通过`this`.

`this`也可以以其他方式使用。例如，假设我想从类中将当前对象绘制到虚构库中的屏幕上，我可以这样做：

```
window.draw(this) 
```

你也可以调用函数

`this`允许我们引用我们当前“内部”的对象，因此我们可以将当前对象作为参数传递。这非常有用。（没有双关语的意思）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-15T22:59:50.393

“this”是一个隐藏的“参数”，它会为您传递，以便对对象进行操作的方法知道它们要对哪个对象进行操作。

现在假设您传递名称“x”的参数，但该类确实已经定义了该 var 名称。发生什么了 ？好吧，“属于”对象的名称 x 和参数 x 不是同一个数据对象，但它们共享名称。

为了消除歧义，您需要明确地说“this.x”，它告诉编译器您正在谈论的 x 已经属于“this”对象。（即，您尝试操作的当前对象。）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-15T23:00:36.490

在第二个例子中，构造函数的参数不是`a`and `b`; 它们被更改为`x`and `y`，`this.x = x;`意思是“为这个 Point 类实例的成员变量分配`x`传递给构造函数的值`x`”。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-15T23:02:13.627

这实际上与 java 编译器如何通过名称识别变量有关。函数（正式）参数名称位于类成员变量之前。在第一个示例中，形参名称是 a 和 b，它们不会与成员变量 x 和 y 发生冲突，因此编写

```
x = a; 
```

是合乎逻辑的，因为 x 只能表示成员变量类 Point。

In the second example x refers both to the formal parameter name and to the member variable. Writing x within the function body refers to the parameter so if you need some other way in order to refer to the member variable x. This is done by explicitly accessing a member via the 'this' keyword.

# jsf-2 - JSF 2.0 应用程序的水平缩放

> ID：10166883
> 
> 赞同：8
> 
> 时间：2012-04-15T22:54:34.493
> 
> 标签：jsf-2, cluster-computing, stateful, web-architecture, horizontal-scaling

鉴于 JavaServer Faces 在服务器端本身就是有状态的，建议使用哪些方法来水平扩展 JSF 2.0 应用程序？

如果一个应用程序运行多个 JSF 服务器，我可以想象以下场景：

1.  粘性会话：将与给定会话匹配的所有请求发送到同一服务器。
    *   **问题：**通常使用什么技术来实现这一点？
    *   **问题：**服务器故障导致会话丢失......并且通常看起来像脆弱的架构，尤其是在重新开始时（不尝试扩展现有应用程序）
2.  状态（会话）复制：在集群中的所有 JSF 服务器上复制 JSF 状态
    *   **问题：**通常使用什么技术来实现这一点？
    *   **问题：**无法缩放。集群总内存 = 最小服务器上的总内存
3.  指示 JSF（通过配置）将其状态存储在外部资源上（例如，另一台运行非常快的内存数据库的服务器），然后在需要应用程序状态时从 JSF 服务器访问该资源？
    *   **问：**这可能吗？
4.  指示 JSF（通过配置）是无状态的？
    *   **问：**这可能吗？

**[编辑]**

根据 Ravi 对 Sticky Sessions 的建议进行了更新

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-21T09:53:54.453

这是 Jelastic PaaS 的一个想法：

在 2 个服务器集群中配对应用程序实例，并在一个集群中的这 2 个实例之间应用会话复制。然后，您可以根据需要添加任意数量的 2 实例集群，并在集群之间对请求进行负载平衡，每个会话都附着在它起源的集群上。在集群中，请求可以在实例之间进行负载平衡。

这种方式有一定程度的故障安全，因为如果集群中的一个实例发生故障，另一个实例会接管，并具有相同的会话状态。另一方面，内存影响没有完全复制那么严重。

简而言之，它是您问题中 1\. 和 2\. 的组合。当然，如果可用性更受关注，每个集群中可以有 2 个以上的实例。

链接到 Jelastic 文档 我从以下网址提出了这个想法：http: [//jelastic.com/docs/session-replication](http://jelastic.com/docs/session-replication)。

免责声明：我实际上不知道如何使用 JSF2 进行配置，并且与 Jelastic 没有任何关系。只是喜欢这个想法，并认为它可能会有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-15T23:57:19.387

这可以通过将负载均衡器配置为粘性会话模式来实现。

更多[信息](http://shlomoswidler.com/2010/04/elastic-load-balancing-with-sticky-sessions.html)

这样，您的所有后续请求都将发送到同一应用程序服务器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T19:22:06.223

具有“伙伴”语义的会话复制呢？

一个伙伴的总内存减半（每台服务器需要保存两台服务器的会话数据），这比必须保存每台服务器的数据要好得多。

伙伴复制还减少了带宽开销。

# ruby-on-rails - Ruby/Rails，将散列附加到属于散列的数组

> ID：10166884
> 
> 赞同：0
> 
> 时间：2012-04-15T22:54:42.553
> 
> 标签：ruby-on-rails, ruby, arrays, hash

我有这种情况：

```
skeleton = 
{
        "timeline" => 
        { 
            "data" => []
        }
}

template = 
{
        "A" => "",
        "B" => "",
        "C" => "",
} 
```

从控制器中，我进行了一个查询，该查询返回了一个哈希数组：

```
@cdr = Cdr.select("start, end, clid") 
```

然后我遍历数组并设置“模板”哈希字段，在最后一步中，我将此哈希附加到属于“骨架”哈希的数组：

```
@cdr.each do |cdr|
        template["A"] = cdr.start
        template["B"] = cdr.end
        template["C"] = cdr.clid
        skeleton["timeline"]["data"] << template
    end 
```

所以预期的结果是：

```
skeleton = 
{
        "timeline" => 
        { 
            "data" => [
               {
               "A" => "sample1",
               "B" => "sample2",
               "C" => "sample3",
               },
               {
               "A" => "sample4",
               "B" => "sample5",
               "C" => "sample6",
               }
            ]
        }
} 
```

但我得到的真正结果是：

```
skeleton = 
{
        "timeline" => 
        { 
            "data" => [
               {
               "A" => "sample1",
               "B" => "sample2",
               "C" => "sample3",
               },
               {
               "A" => "sample1",
               "B" => "sample2",
               "C" => "sample3",
               }
            ]
        }
} 
```

数组中的所有条目都包含相同的数据。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T23:06:37.763

尝试通过每个循环创建一个新的模板数组。我认为您不能在将密钥用作密钥时更改密钥的值。

```
@cdr.each do |cdr|
    temp_inst = template.clone
    temp_inst["A"] = cdr.start
    temp_inst["B"] = cdr.end
    temp_inst["C"] = cdr.clid
    skeleton["timeline"]["data"] << temp_inst
end 
```

# database - ORA-12505, TNS: 监听器当前不知道连接描述符中给出的 SID

> ID：10166891
> 
> 赞同：1
> 
> 时间：2012-04-15T22:55:25.757
> 
> 标签：database, oracle10g, tns

我对数据库主题非常陌生，并尝试通过从 Netbeans 连接来做一些初学者的事情。但是当我测试我的连接时，我遇到了一些错误（我搜索了这个错误但无法理解任何东西）。我安装`Oracle 10g Express Database Edition`并下载`ojdbc6.jar`了`Oracle Thin`. 这是我的简单代码，仅用于测试驱动程序版本；

```
import java.sql.*;
import oracle.jdbc.pool.OracleDataSource;

    class JDBCVersion
    {
      public static void main (String args[]) throws SQLException
      {
        OracleDataSource ods = new OracleDataSource();
        ods.setURL("jdbc:oracle:thin:@localhost:1521:XE [hr on HR]");
        Connection conn = ods.getConnection();

        // Create Oracle DatabaseMetaData object
        DatabaseMetaData meta = conn.getMetaData();

        // gets driver info:
        System.out.println("JDBC driver version is " + meta.getDriverVersion());
      }
    } 
```

我明白了

```
Exception in thread "main" java.sql.SQLException: Listener refused the connection with the following error:
ORA-12505, TNS:listener does not currently know of SID given in connect descriptor 
```

正如我所说，我是这个数据库的新手，如果你能帮忙解释一下，我会很高兴的。不管怎么说，还是要谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T23:22:07.487

以下是有关如何连接到您的 Oracle 数据库的代码：

```
public class JDBCVersion {

  public static void main(String[] args) {
    try {
        Class.forName("oracle.jdbc.OracleDriver");
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
        return;
    }
    Connection connection = null;
    try {
        connection = DriverManager.getConnection(
                "jdbc:oracle:thin:@localhost:1521:XE", "username",
                "password");
    } catch (SQLException e) {
        e.printStackTrace();
        return;

    }
} 
```

必须相应更改用户名和密码的位置。此外，如果您安装了 Oracle 10g，那么正确的版本应该是 ojdbc14.jar。

# ruby-on-rails - 在浏览器中开发期间显示错误的高级模式（Ruby-on-Rails）

> ID：10166893
> 
> 赞同：1
> 
> 时间：2012-04-15T22:55:35.783
> 
> 标签：ruby-on-rails, ruby-on-rails-3

很高兴在浏览器中看到一些关于异常的附加信息。不仅有几行代码的异常本身而且不需要（在开发期间对我来说）堆栈跟踪，而且，例如，sql，也许还有更多信息 - 比如在 looong 代码行中问题的确切位置（有可能，我猜测）。查看确切的对象（如果它很长，则截断）而不是`Array:0x00000103e26ea0`在

```
undefined method `name' for #<Array:0x00000103e26ea0> 
```

即使是来自日志的附加信息也很高兴在浏览器中直接看到，而无需每次都切换到日志

有什么技巧（宝石，猴子补丁）吗？

换句话说：你用什么来取悦（这个词存在吗？:)）开发过程？

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T23:36:28.030

除了开发日志（包括您的 SQL 错误）之外，您还可以查看[Hammertime](http://devblog.avdi.org/2010/01/18/hammertime/)或[Pry](https://github.com/pry/pry)，这两个都是很好的调试器，可以让您更仔细地检查您的代码周围的异常。

# javascript - 在 RoR 中使用 ActiveRecord::Serialization.from_json() 解析上传的 JSON 会打开任何安全漏洞吗？

> ID：10166896
> 
> 赞同：0
> 
> 时间：2012-04-15T22:55:44.447
> 
> 标签：javascript, ruby-on-rails, ruby, json, security

我计划在 Ruby on Rails 中实现导出导入功能。现在既然 JSON 可以包含 JavaScript，我想知道当我要求 ruby​​ 将 JSON 转换为哈希时，是否有人可以注入可以运行的恶意代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T22:58:30.107

不，JSON 不能包含 javascript 代码*。它是更严格的 Javascript 对象文字合成器版本。

[http://json.org/](http://json.org/)

*- 实际上，javascript 代码可以包含在字符串中的 JSON 中，但不会被解析。

# php - 在 CakePHP 中按字母顺序列出带有标题的记录

> ID：10166899
> 
> 赞同：0
> 
> 时间：2012-04-15T22:56:01.467
> 
> 标签：php, cakephp

我正在显示一个用 CakePHP 编写的应用程序的主题列表，如下所示：

```
<ul>
    <?php foreach ($topics as $topic): ?>
        <li>
            <?php echo $topic['Topic']['title']; ?>
        </li>
        <?php endforeach; ?>
</ul> 
```

我想做的是将它们显示为：

```
<h3>A</h3>
<ul>
    <li>animals</li>
    <li>anger</li>
    <li>age</li>
</ul>

<h3>B</h3>
<ul>
    <li>bat</li>
    <li>bird</li>
</ul>

etc... 
```

我该怎么做？请记住，我也可以有数字，例如 3d

大批

```
array(
    (int) 0 => array(
        'Topic' => array(
            'id' => '1',
            'title' => 'awesome'
        ),
        'TopicPost' => array(
            (int) 0 => array(
                'id' => '1',
                'topic_id' => '1',
                'post_id' => '107'
            )
        )
    ),
    (int) 1 => array(
        'Topic' => array(
            'id' => '2',
            'title' => 'amazing'
        ),
        'TopicPost' => array(
            (int) 0 => array(
                'id' => '2',
                'topic_id' => '2',
                'post_id' => '107'
            )
        )
    ),
    (int) 2 => array(
        'Topic' => array(
            'id' => '3',
            'title' => 'jazz'
        ),
        'TopicPost' => array(
            (int) 0 => array(
                'id' => '3',
                'topic_id' => '3',
                'post_id' => '107'
            )
        )
    )
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T23:20:59.493

我的 php 有点生疏，所以我为可能的错误道歉，但希望逻辑清晰。你可以试试这个：

```
 <?php  
        $lastTopic = ' ';
        $first = true;
        $close = false;
        foreach ($topics as $topic): 
            $lastLetter = substr($lastTopic, 0, 1);
            $thisLetter = substr($topic['Topic']['title'], 0, 1);
            $isNewLetter =  $lastLetter == $thisLetter;
            if ($isNewLetter):
                $close = true;
                if($first) $first = false;
                else echo "</ul>";
    ?>
                <h3><?php echo $newLetter ?></h3>
                <ul>
                <?php endif; ?>
                    <li>
                        <?php 
                            echo $topic['Topic']['title']; 
                            $lastTopic = $topic['Topic']['title']; 
                        ?>
                    </li>

         <?php endforeach; ?>
         <?php if($close) echo "</ul>"; ?>
</ul> 
```

基本思想是每次遇到以新字母开头的主题时，您都会关闭 html 列表并创建一个新标题。这当然假设列表已经排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T23:34:00.903

您需要做的是首先创建一个您可以`foreach`通过的排序项目数组。当您构建此数组时，获取每个主题的第一个字母并创建一个具有相同字母或数字的主题列表。

## 鉴于`$topic`等于：

```
$topic = array(
    (int) 0 => array(
        'Topic' => array(
            'id' => '1',
            'title' => 'awesome'
        ),
        'TopicPost' => array(
            (int) 0 => array(
                'id' => '1',
                'topic_id' => '1',
                'post_id' => '107'
            )
        )
    ),
    (int) 1 => array(
        'Topic' => array(
            'id' => '2',
            'title' => 'amazing'
        ),
        'TopicPost' => array(
            (int) 0 => array(
                'id' => '2',
                'topic_id' => '2',
                'post_id' => '107'
            )
        )
    ),
    (int) 2 => array(
        'Topic' => array(
            'id' => '3',
            'title' => 'jazz'
        ),
        'TopicPost' => array(
            (int) 0 => array(
                'id' => '3',
                'topic_id' => '3',
                'post_id' => '107'
            )
        )
    )
); 
```

## 您可以使用以下代码来处理数组：

```
<?
foreach($topic as $currentTopic):
    $thisLetter = strtoupper($currentTopic['Topic']['title'][0]);
    $sorted[$thisLetter][] = $currentTopic['Topic']['title'];
    unset($thisLetter);
endforeach;

foreach($sorted as $key=>$value):

    echo '<h3>'.$key.'</h3>';
    echo '<ul>';

    foreach($value as $thisTopic):
        echo '<li>'.$thisTopic.'</li>';
    endforeach;

    echo '</ul>';

endforeach;
?> 
```

这已成功测试。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-15T22:59:45.587

试试这些代码：

```
<ul style="list-style-type:upper-alpha">
  <?php foreach ($topics as $topic): ?>
    <li>
        <?php echo $topic['Topic']['title']; ?>
    </li>
    <?php endforeach; ?>
</ul> 
```

# visual-studio - 更改 Visual Studio 中空白指示器的颜色？

> ID：10166903
> 
> 赞同：35
> 
> 时间：2012-04-15T22:56:45.163
> 
> 标签：visual-studio, editor, whitespace, indicator

**`CTRL`在 Visual Studio 中，我们可以通过+`R`**、**`CTRL`+`W`**显示空白。但是我们怎样才能改变空白指示器本身的颜色呢？

![在此处输入图像描述](../Images/021911d48d551b111fe3adcbefbfc60f.png)

我想把它改成柔和的灰色，这样颜色就不会那么强烈，也不会让人分心。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-04-15T23:28:49.847

您可以在 Tools / Options 然后 Environment / Fonts And Colors 中执行此操作，并且有一个可见 White Space 设置：

![在此处输入图像描述](../Images/ed573c3d77d59fa91e25ad5fc9e4ada4.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2020-08-06T09:28:32.993

我正在寻找如何在 VS 代码上做同样的事情，我最终找到了那个线程。我发现您可以在 settings.json 文件中更改它。如果您继续 Preferences/Settings 并搜索 Workbench 的 Color Customizations，您可以打开这个。

[![用于设置的 vs 代码菜单选项](../Images/9c612f56cb5715954f9749a064ba39fe.png)](https://i.stack.imgur.com/wTdAN.jpg)

因此，在 json 文件中，您需要添加（如果不存在）下一个属性：

```
 "workbench.colorCustomizations": {
       "editorWhitespace.foreground": "#1e6d9b"
    }, 
```

颜色应该是十六进制代码。在上面的示例中，我有“#1e6d9b”，但可以随意用您的偏好替换它。

要仅针对特定主题进行自定义，请使用如下语法，其中`Monokai`是您要覆盖其值的特定主题的名称：

```
"workbench.colorCustomizations": {
    "[Monokai]": {
        "editorWhitespace.foreground": "#1e6d9b"
    }
} 
```

自定义颜色主题的完整参考： [https](https://code.visualstudio.com/docs/getstarted/themes#_customizing-a-color-theme)
://code.visualstudio.com/docs/getstarted/themes#_customizing-a-color-theme 和主题颜色属性：
[https ://code.visualstudio.com/api/references/主题色](https://code.visualstudio.com/api/references/theme-color)

# jquery - IE9 在 jQuery 中不执行 $.post？

> ID：10166908
> 
> 赞同：0
> 
> 时间：2012-04-15T22:58:09.620
> 
> 标签：jquery

```
$('#tilmeldknap').bind('click', function(){
    alert(333);
    $.post("", $("#signupf").serialize(), function(data) {
        alert(444);
      if(data == '1')
      { 
        $.fancybox.close();
        $("#cocktaillink").fancybox().trigger('click');
      }else if(data == '2')
      {
        alert('Hov.. du skal udfylde alle felterne :-)');
        return false;
      }else if(data == '3')
      {
        alert('Hov.. du er allerede tilmeldt :-)');
        return false;
      }

    }); 
```

是我得到的。当我单击#tilmeldknap 按钮时，我得到的唯一信息是 333 警报，现在是 444。为什么会这样，我该如何解决？

在 chrome 中它工作正常，我得到两个警报。

已经找了一个小时左右，希望在这里有所帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T23:01:12.867

您没有发布到任何网址：

```
var myurl = ???;

$.post(myurl, $("#signupf").serialize(), function(data) {
      ...
}); 
```

# java - 信号量死锁

> ID：10166909
> 
> 赞同：8
> 
> 时间：2012-04-15T22:58:12.760
> 
> 标签：java, multithreading, deadlock, semaphore

所以我在使用信号量时遇到了问题。编写代码，其中有 4 个房间和一些访客。每个房间对他们可以容纳的访客数量都有一定的上限。所以进入一个完整的房间会触发一个wait()。访客在进入另一个房间之前不能离开一个房间，所以他们总是在一个房间里。

```
public class Semaphore {

  private int placesLeft;

  public Semaphore(int placesInRoom) {
    this.placesLeft = placesInRoom;
  }

  public synchronized void acquire(Visitor visitor) {
    Semaphore sem = visitor.getRoom().getSemaphore();

    try {
      while (placesLeft <= 0) {
        this.wait();
    }

  } catch (InterruptedException e) {}

  sem.release();
  placesLeft--;
}

public synchronized void release() {
  placesLeft++;
  this.notifyAll();
} 
```

当 2 个人试图进入彼此的房间时，就会出现死锁。同样由于某种原因，`placesLeft`计数不正确。

所以我该怎么做？

编辑：

忙于别的事情，重提这个问题。由于房间已满，问题不会发生，当房间 1 的人 1 想进入房间 2 和房间 2 的人 2 想进入房间 1 时发生锁定。据我了解，这可能与同步有关吗？它们在释放之前被卡住，因此不会调用释放。据我了解，一个房间的累积和释放不能同时被调用。所以基本上不能在调用 accuire 的同时调用 room1 信号量释放，对于 room2 也一样？我是新手编码器，同步还不是很清楚。从一个或另一个中删除同步似乎不起作用（也是错误的）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T23:36:18.977

与其自己实现，不如使用Java 标准库中构建的[java.util.concurrent.Semaphore怎么样？](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Semaphore.html)

该`java.util.concurrent`软件包有一个很棒的[教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/)，涵盖了信号量和它提供的许多其他有用的同步机制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T03:32:08.250

当依赖图中存在循环时会发生死锁。当两个人试图进入对方的房间时，这显然是一个循环，僵局是自然的结果。

但是，您想以其他方式处理循环：当循环发生时，人们都沿着循环移动（可以有超过 2 个人交换房间）。

所以你应该先判断是否形成了一个循环，然后再改变访问者的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T15:28:14.433

尝试这个：

```
public class Semaphore {
  private final static Object LOCK = new Object();
  private int placesLeft;

  public Semaphore(int placesInRoom) {
    this.placesLeft = placesInRoom;
  }

  public void acquire(Visitor visitor) {
      synchronized (LOCK) {
          Semaphore sem = visitor.getRoom().getSemaphore();

          try {
              while (placesLeft <= 0) {
                  LOCK.wait();
              }
          } catch (InterruptedException e) {}

        sem.release();
        placesLeft--;
    }
}

public void release() {
    synchronized(LOCK) {
        placesLeft++;
        LOCK.notifyAll();
    }
} 
```

旧代码在各个 Semaphore 实例上同步。死锁很难防止，因为一个实例的`acquire()`方法调用`release()`了另一个实例。如果另一个线程当前正在另一个实例上执行该方法，则调用`release()`then 会阻塞。`acquire()`如果第二个线程最终调用`release()`了第一个实例，那么您就有了死锁。

我将单个 Semaphore 实例上的同步替换为一个名为`LOCK`. 执行的线程`acquire()`已锁定 的监视器`LOCK`。`release()`因此，该线程在调用该方法时不会被阻塞。该`release()`方法将因此总是终止。这解决了僵局。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T23:13:36.403

向其中添加当前访客列表，`Room`以便您可以检查`acquire`来访者来自该房间的一名居住者正在等待进入的房间的情况。您还需要添加访客等待进入的房间`Visitor`。

```
Room comingFrom = visitor.getRoom();
while (placesLeft <= 0) {
    for (Visitor waiter : room.getVisitors()) {
        if (waiter.getWaitingForRoom().equals(comingFrom) {
            // swap the visitors without releasing/acquiring any semaphores and return
        }
    }
    this.wait();
} 
```

我有点不确定检查访客是否正在等待进入当前访客离开的同一个房间的逻辑。`room`给定代码，我不知道哪个房间代表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-15T23:43:57.370

要回答您的问题“我应该怎么做？”，如果您检测到死锁，请将其中一个死锁的访客移动到任何有空间的房间。然后把他搬到他真正想要的房间。这基本上允许在不违反以下任何规则的情况下进行交换。

1.  房间内的访客不得超过 X
2.  访客总是在一个房间里
3.  一次只有一位访客可以换房间（这确实是问题的症结所在）

请记住，那里有无数的信号量锁定策略......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-27T18:41:58.277

死锁通常由分层信号系统解决。典型的死锁看起来像

过程A

```
getSemaphore('A');
getSemaphore('B'); 
```

工艺 B

```
getSemaphore('B');
getSemaphore('A'); 
```

只是为了让所有进程在 B 之前选择 A。这可以通过编写`getSemaphore`函数来强制执行带有断言的层次结构来完成。

对于您的具体情况，这并不能很明显地解决问题，但您可以从这个想法中推断出来。

创建迁移队列。当用户想要更改房间时，您的功能可能如下所示：

```
ChangeRoom(person, from, to)
{
    getSemaphore('room_queue', 3200);
    enqueue(room_queue, Object(person, from, to));
    releaseSemaphore('room_queue');
} 
```

“3200”是信号量超时。如果一个进程在发出信号量后被中断，它仍然会使系统死锁。这给出了 1 小时的超时时间。您可以根据系统稳定性将其设置为 1 分 5 秒的逻辑值。然后有一个队列处理器，它一次只允许使用非阻塞信号量进行一次传输

```
QueueProcessor()
{
    getSemaphore('room_queue', 3200);
    for (transition = dequeue(room_queue))
    {
       if (getNonBlockingSemaphore(transition.to)
       {
          releaseSemaphore(transition.from);
          getSemaphore(transition.to);
       }
       continue;
    }
    releaseSemaphore('room_queue');
    sleep(10);
} 
```

睡眠使队列进程保持压倒处理器的状态。将其设置为适当的检查。您还可以设置中断以仅在房间打开空间或添加过渡时拉出队列项目。这样，如果房间已满，则不会浪费时间尝试进入，但每个人都至少有一次机会立即进入。

这会强制转换在获得房间信号量之前获得队列信号量。设置无死锁层次结构。如果房间已满，用户将永远不会离开队列，但不会使系统死锁。

# javascript - 如何在后台停止上传？

> ID：10166912
> 
> 赞同：1
> 
> 时间：2012-04-15T22:58:39.127
> 
> 标签：javascript, jquery

当我单击一个按钮时，如何停止上传，因为它仍在后台上传？：

下面是代码：

```
 $(".imageCancel").click(function() {
          $(".upload_target").attr("src","#"); //iframe
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-27T06:05:33.140

您可以删除然后重新创建文档的输入文件上传元素。它并不完美，但它会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T23:11:20.820

看看这可能对你有帮助：[Jquery File Start-Cancel Upload](http://blueimp.github.io/jQuery-File-Upload/)

# mysql - 数据查询和计算发生在 MySQL 服务器还是 Rails 服务器？

> ID：10166915
> 
> 赞同：1
> 
> 时间：2012-04-15T22:59:29.080
> 
> 标签：mysql, ruby-on-rails, backend

我需要定期运行长 MySQL 查询的长后端作业，这需要几个小时才能完成。我设置了延迟作业 gem 来安排这项工作。

当这个进程运行时：

*   这项工作会减慢我的 Rails 前端服务器的速度吗（即，响应简单用户的请求需要更长的时间）？
*   繁重的计算发生在哪里：在我的 Rails 服务器中，还是在 MySQL 服务器中？
*   MySQL服务器会被我预定的作业占用，没有人可以同时访问MySQL吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T23:21:58.460

您的问题的答案是：这取决于

1.  如果您的任务是处理器密集型的，它可能会减慢 Rails 服务器的速度。如果您担心 DJ 工作人员会影响前端盒，请将它们移至另一个可以访问共享数据库的盒子。您的工作盒需要项目设置，但不需要与您提供页面的盒子相同。

2.  这完全取决于您如何编写任务。通常，rails 应用程序执行简单的选择/插入/更新/删除。实际计算是在 Rails 中完成的。但是您可以指定涉及复杂连接的选择语句或利用数据库中的函数。这可以将复杂字段的计算卸载到数据库

3.  这取决于您的数据库配置为接受的连接数。通常在生产级服务器中，从查询的大小来看，您不会在这里看到问题。但是您应该考虑有多少活动连接以及允许多少。每个 rails 实例都算作一个连接，以及 DJ 的每个工作人员。

在每种情况下，实际性能将取决于几个因素。您创建了多少连接，您在工作人员和数据库之间传输了多少数据。你在哪里工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T23:22:05.157

如果rails服务器和mysql服务器在同一台机器上，那么会有一些影响。但是您的操作系统和 MySQL 一起，非常有能力将影响最小化，而无需您进行太多其他干预。根据您的部署方式，您始终可以使用“nice”命令，并降低延迟作业的优先级，从而最大限度地减少它对您网站响应能力的影响。

# c++ - 虚拟多重继承 - 最终覆盖

> ID：10166926
> 
> 赞同：3
> 
> 时间：2012-04-15T23:00:58.877
> 
> 标签：c++, multiple-inheritance, virtual-inheritance

在尝试更深入地分析 C++ 的继承机制时，我偶然发现了以下示例：

```
#include<iostream>

using namespace std;

class Base {
public:
    virtual void f(){
    cout << "Base.f" << endl; 
    }
};

class Left : public virtual Base {    
};

class Right : public virtual Base{
public:
    virtual void f(){
        cout << "Right.f" << endl; 
    }
};

class Bottom : public Left, public Right{

};

int main(int argc,char **argv)
{
    Bottom* b = new Bottom();
    b->f();
} 
```

以上，不知何故，编译并调用 Right::f()。我看到编译器中可能发生的事情，它知道有一个共享的 Base 对象，并且 Right 覆盖 f()，但实际上，在我的理解中，应该有两种方法：（`Left::f()`继承自`Base::f()`）和`Right::f()`，覆盖`Base::f()`. 现在，我认为，基于 Bottom 继承了两个单独的方法，它们都具有相同的签名，应该会有冲突。

谁能解释 C++ 的哪个规范细节处理这种情况以及它是如何从低级别的角度来处理的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T23:10:54.713

在*可怕的钻石*中有一个单一的基础，两个中间对象从该基础派生，然后第四种类型关闭了钻石，并从中间级别的两种类型中获得了多重继承。

您的问题似乎是*在前面的示例中声明**了多少个函数？`f`*答案是一个。

让我们从简单的线性层次结构的例子开始：

```
struct base {
   virtual void f() {}
};
struct derived : base {
   virtual void f() {}
}; 
```

在此示例中，有一个`f`声明有两个覆盖，`base::f`并且`derived::f`. 在类型的对象中`derived`，最终的替代者是`derived::f`. 需要注意的是，这两个`f`函数都代表具有多个实现的单个函数。

现在，回到最初的例子，在右边的那行，`Base::f`并且`Right::f`以同样的方式被覆盖的同一个函数。所以对于一个类型的对象`Right`，最终的覆盖是`Right::f`. 现在对于 type 的最终对象`Left`，最终的覆盖器是`Base::f`as`Left`不会覆盖该函数。

当菱形关闭时，因为继承是`virtual`有一个`Base`对象，它声明了一个`f`函数。在第二级继承中，`Right`用自己的实现覆盖该函数，这是最派生类型的最终覆盖器`Bottom`。

您可能想在标准之外查看它，并看看编译器实际上是如何实现的。编译器在创建对象时会添加一个指向虚拟表`Base`的隐藏指针。`vptr`虚拟表包含指向*thunk*的指针（为简单起见，假设该表包含指向函数最终覆盖器的指针，[1]）。在这种情况下，该`Base`对象将不包含任何成员数据，而只是一个指向包含指向函数指针的表的指针`Base::f`。

当`Left`extends时`Base`，一个新的 vtable 被创建，`Left`并且该 vtable 中的指针被设置为`f`这个级别的最终覆盖，这是顺便`Base::f`说一下，两个 vtable 中的指针（忽略蹦床）跳转到相同的实际实现。`Left`在构造类型对象时，`Base`首先初始化子对象，然后在初始化`Left`（如果有的话）的成员之前`Base::vptr`更新指针以引用`Left::vtable`（即存储在中的指针`Base`引用为 定义的表`Left`）。

在菱形的另一侧，为其创建的 vtable*包含*`Right`一个最终调用. 如果要创建一个类型的对象，则会发生相同的初始化过程，并且将指向.*`Right::f``Right``Base::vptr``Derived::f`*

 *现在我们得到最终的对象`Bottom`。同样，为该类型生成一个 vtable，`Bottom`并且该 vtable 与所有其他情况一样，包含一个表示`f`. 编译器分析继承的层次结构，确定`Right::f`overrides `Base::f`，左分支上没有等价的override，所以在`Bottom`'s vtable中代表的指针指向`f`了`Right::f`。同样，在`Bottom`对象的构造过程中，`Base::vptr`更新以引用`Bottom`的 vtable。

如您所见，所有四个 vtable 都有一个条目`f`，程序中只有*一个* `f`条目，即使每个 vtable 中存储的值不同（最终覆盖器不同）。

[1] *thunk*是一小段代码，它`this`在需要时调整指针（多重继承通常意味着它是需要的），然后将调用转发给实际的覆盖。在单继承的情况下，`this`不需要更新指针，*thunk*消失，vtable 中的条目直接指向实际函数。*

# c++ - 没有运算符“=”与这些操作数匹配 - 标准模板库中的迭代器

> ID：10166928
> 
> 赞同：1
> 
> 时间：2012-04-15T23:01:23.320
> 
> 标签：c++, iterator, operator-keyword, operands

好的，我正在为学校做一个项目，我们需要在另一个班级中有一个班级的链表（一个名为“目标”的班级中的班级“任务”的链表），所以为此我' m 使用 STL 类。现在我*几乎*已经设置好了，但是在我的显示功能中，为了显示任务的内容，我使用了一个迭代器。但是我不能将 taskList.begin() 分配给迭代器，因为它给了我一个错误。

以下是我认为相关的代码。

目标.h

```
 #ifndef OBJECTIVE_H
    #define OBJECTIVE_H
    #include <string>
    #include <list>
    #include "date.h"
    #include "task.h"
    using namespace std;
    namespace team2
    {
      class objective
      {
            private:
                string objective_name, objective_desc, resources[10];
                int category, priority, res_used;
                double time;
                date start, end;
                int status;
                std::list<task> taskList;

            public:
                // CONSTRUCTORS
                objective();
                objective(string objN, string objD, int c, int p, date s, date e, double t, string res[], int resU, int stat, list<task>& tList);

...

                // CONSTANT MEMBER FUNCTIONS
                void display() const;
...
      };
    }
    #endif 
```

Objective.cpp（这是我得到错误的地方）

```
#include "objective.h"
#include "date.h"
#include <cstdlib>
#include <cassert>
#include <string>
#include <list>
#include "task.h"
using namespace std;

namespace team2
{
    void objective::display() const // display() - Displays the complete contents of a single objective
    {
        int days, hours, minutes;
        std::list<task>::iterator taskIterator;

        days = floor(time/24.0); // Find the max number of days based off of the time (in hours)
        hours = floor(time - days*24); // Find the max number of hours after deduction of days
        minutes = floor((time - (days*24 + hours))*60); // Find the number or minutes after taking into account hours and days

        cout << "\nObjective Name: " << objective_name << endl;
        cout << "Objective Description: " << objective_desc << endl;
        cout << "Category: Quad " << category << endl;
        cout << "Priority: " << priority << endl;
        cout << "Starting Date: " << start.getMonth() << "/" << start.getDay() << "/" << start.getYear() << endl;
        cout << "Ending Date: " << end.getMonth() << "/" << end.getDay() << "/" << end.getYear() << endl;
        cout << "Time Required: " << days << " Days " << hours << " Hours " << minutes << " Minutes " << endl;
        cout << "Resources: " << endl;
            if(res_used == 0)
                cout << "\tNo Resources" << endl;
            for(int i = 0; i < res_used; i++)
                cout << "\t" << resources [i] << endl;

        cout << "Current Status: ";
            if(status == 1)
                cout << "Completed" << endl;
            else if(status == 0)
                cout << "Incomplete" << endl;
        cout << "Tasks: " << endl;
            if(taskList.empty())
                cout << "\tNo Resources" << endl;
            for(taskIterator = taskList.begin(); taskIterator != taskList.end(); taskIterator++)
            {
                 (*taskIterator).display();
                 cout << endl;
             }
    }
} 
```

任务类与目标类几乎相同，省略了一些字段。错误发生在 for 循环中。for(taskIterator = taskList.begin();...) 有人知道问题的原因吗？如有必要，我还可以提供更多代码。先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T23:05:38.743

该方法是`const`,`taskList`是一个成员，因此您不能在其上使用非`const`迭代器。

制作成员方法`const`是一种约定，该方法不会更改非`mutable`类成员，也不会调用非`const`成员方法。通过使用非`const`迭代器，您将违反该合同。

由于`display`是 const，您可以使用 const 迭代器：

```
std::list<task>::const_iterator taskIterator; 
```

# objective-c - 如何仅在uiview的底部和右侧添加阴影？

> ID：10166931
> 
> 赞同：4
> 
> 时间：2012-04-15T23:02:17.067
> 
> 标签：objective-c, ios, cocoa-touch, uiview, dropshadow

我正在考虑在 UIView 的底部和右侧添加阴影，但我发现所有的解决方案都是为视图的四个侧面添加阴影。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-15T23:05:17.250

你可以`CAGradientLayer`这样使用，

```
CAGradientLayer *shadow = [CAGradientLayer layer];
shadow.frame = CGRectMake(-10, 0, 10, myView.frame.size.height);
shadow.startPoint = CGPointMake(1.0, 0.5);
shadow.endPoint = CGPointMake(0, 0.5);
shadow.colors = [NSArray arrayWithObjects:(id)[[UIColor colorWithWhite:0.0 alpha:0.4f] CGColor], (id)[[UIColor clearColor] CGColor], nil];
[myView.layer addSublayer:shadow]; 
```

您必须更改`frame`以适合您的需要。此示例沿左侧视图的高度显示阴影。您还可以更改起点和终点以控制阴影的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T02:04:54.207

我可以通过在视图的底部和右侧添加两个带有拉伸阴影图像的 UIImageView 来做到这一点。您不必使用这些 UIImageView 覆盖所有视图，您只需根据需要进行剪辑。看看 iPhone 上 twitter 的颜色混合图层，我相信那些美丽的阴影是使用 UIImageViews 创造的。这可以节省系统资源。当然你可以使用 CALayer 来创建阴影，但是我认为渲染阴影会消耗更多的系统资源，所以 CALayer 是我的第二选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-28T10:33:01.750

```
UIBezierPath *shadowPath = [UIBezierPath 
bezierPathWithRect:self.yourViewObj.bounds];
self.yourViewObj.layer.masksToBounds = NO;
self.yourViewObj.layer.shadowColor = [UIColor blackColor].CGColor;//*** color you want for shadow
self.yourViewObj.layer.shadowOffset = CGSizeMake(5.0f, 5.0f);
self.yourViewObj.layer.shadowOpacity = 0.7f;
self.yourViewObj.layer.shadowPath = shadowPath.CGPath; 
```

# perl - 如何使用 Perl 从文件中删除一行？

> ID：10166932
> 
> 赞同：6
> 
> 时间：2012-04-15T23:02:17.983
> 
> 标签：perl

我正在尝试从文本文件中删除一行。相反，我已经清除了整个文件。有人可以指出错误吗？

```
removeReservation("john");

sub removeTime() {
    my $name = shift;

    open( FILE, "<times.txt" );
    @LINES = <FILE>;
    close(FILE);
    open( FILE, ">times.txt" );
    foreach $LINE (@LINES) {
        print NEWLIST $LINE unless ( $LINE =~ m/$name/ );
    }
    close(FILE);
    print("Reservation successfully removed.<br/>");
} 
```

示例 times.txt 文件：

```
04/15/2012&08:00:00&bob
04/15/2012&08:00:00&john 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-06-04T13:46:40.277

```
perl -ni -e 'print unless /whatever/' filename 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-16T04:57:46.420

Oalder 的回答是[正确](https://stackoverflow.com/a/10167042/368630)的，但他应该测试 open 语句是否成功。如果该文件`times.txt`不存在，您的程序将继续以愉快的方式继续进行，而不会发出警告说发生了可怕的事情。

与 oders' 相同的程序，但：

1.  测试的结果`open`。
2.  使用三部分的开放语句，这更容易证明。如果您的文件名以`>`or开头`|`，您的程序将使用旧的两部分语法失败。
3.  不使用全局文件句柄——尤其是在子程序中。文件句柄通常在范围内是全局的。`FILE`想象一下，如果我在我的主程序中命名了一个文件句柄，并且我正在阅读它，我调用了这个子例程。那会引起问题。使用本地范围的文件句柄名称。
4.  变量名应该小写。常量都是大写的。它只是随着时间的推移而发展起来的标准。不遵守它可能会导致混乱。
5.  由于 oalders 将程序放在子例程中，因此您也应该在子例程中传递文件名......

这是程序：

```
#!/usr/bin/env perl 

use strict; 
use warnings; 

removeTime( "john", "times.txt" ); 

sub removeTime { 
    my $name      = shift;
    my $time_file = shift;

    if (not defined $time_file) {
        #Make sure that the $time_file was passed in too.
        die qq(Name of Time file not passed to subroutine "removeTime"\n);
    }

    # Read file into an array for processing
    open( my $read_fh, "<", $time_file )
       or die qq(Can't open file "$time_file" for reading: $!\n); 

    my @file_lines = <$read_fh>; 
    close( $read_fh ); 

    # Rewrite file with the line removed
    open( my $write_fh, ">", $time_file )
        or die qq(Can't open file "$time_file" for writing: $!\n);

    foreach my $line ( @file_lines ) { 
        print {$write_fh} $line unless ( $line =~ /$name/ ); 
    } 
    close( $write_fh ); 

    print( "Reservation successfully removed.<br/>" ); 
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-15T23:19:29.963

看起来您正在打印到尚未定义的文件句柄。至少您还没有在示例代码中定义它。如果启用严格和警告，您将收到以下消息：

```
Name "main::NEWLIST" used only once: possible typo at remove.pl line 16.

print NEWLIST $LINE unless ($LINE =~ m/$name/); 
```

此代码应该适合您：

```
#!/usr/bin/env perl 

use strict; 
use warnings; 

removeTime( "john" ); 

sub removeTime { 
    my $name = shift; 

    open( FILE, "<times.txt" ); 
    my @LINES = <FILE>; 
    close( FILE ); 
    open( FILE, ">times.txt" ); 
    foreach my $LINE ( @LINES ) { 
        print FILE $LINE unless ( $LINE =~ m/$name/ ); 
    } 
    close( FILE ); 
    print( "Reservation successfully removed.<br/>" ); 
} 
```

还有几点需要注意：

1) 当您的意思是 removeTime() 时，您的示例代码调用 removeReservation()

[2）除非您打算使用原型](http://perldoc.perl.org/perlsub.html#Prototypes)，否则您不需要在子例程定义中使用圆括号。请参阅我上面的示例。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-16T09:19:39.330

这是在[常见问题解答](http://perldoc.perl.org/perlfaq.html)中。

[如何在文件中更改、删除或插入一行，或附加到文件的开头？](http://perldoc.perl.org/perlfaq5.html#How-do-I-change%2c-delete%2c-or-insert-a-line-in-a-file%2c-or-append-to-the-beginning-of-a-file%3f)

总是值得检查常见问题解答。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-09T18:57:40.683

以防万一有人想从文件中删除所有行。

例如，一个文件（第 4 行为空；第 5 行有 3 个空格）：

```
t e st1
test2 a
  e

aa 
    bb bb
test3a
cc 
```

要删除与某些可能使用的模式匹配的行：

```
# Remove all lines with a character 'a'
perl -pi -e 's/.*a.*//' fileTest && sed -i '/^$/d' fileTest; 
```

结果：

```
t e st1
  e

    bb bb
cc 
```

有关的：

```
perl -h
    # -p                assume loop like -n but print line also, like sed
    # -i[extension]     edit <> files in place (makes backup if extension supplied)
    # -e program        one line of program (several -e's allowed, omit programfile)

sed -h
    # -i[SUFFIX], --in-place[=SUFFIX]
    #                edit files in place (makes backup if SUFFIX supplied) 
```

[参考1](https://stackoverflow.com/questions/10166932/how-to-remove-one-line-from-a-file-using-perl/10167042#comment87997068_16919572)、[参考2](https://serverfault.com/a/252927/345785)

# c++ - 类模板 - 对我的 Node 类的解构器的未定义引用。

> ID：10166935
> 
> 赞同：0
> 
> 时间：2012-04-15T23:02:44.773
> 
> 标签：c++, templates, netbeans

我正在使用类模板在 C++ 中实现有序列表数据结构。为简单起见，我内联实现了每个构造函数和函数。我为这个项目制作了自己的 Node 类。

编译器错误粘贴在此问题的底部。“对‘Node::~Node()’的未定义引用”。这是我第一次使用模板，我以前从未见过这个错误。我不知道从哪里开始。任何帮助，将不胜感激！

**节点.h**

```
#ifndef NODE_H
#define NODE_H

#include <iostream>
#include <cstdlib>

template <class E>
class Node {
public:
    Node(const E init_data = NULL, Node<E>* init_link = NULL){data = init_data; link = init_link;}
    Node(const Node<E>& orig){data = orig.getData(); setLink = NULL;}
    virtual ~Node();

    E getData() const{return data;}
    void setData(E newData){data = newData;}

    Node<E>* getLink(){return link;}
    void setLink(Node<E>* nextLink) {link = nextLink;}
private:
    E data;
    Node<E>* link;
};

#endif  /* NODE_H */ 
```

**MyOrderedList.h**

```
#ifndef MYORDEREDLIST_H
#define MYORDEREDLIST_H

#include <iostream>
#include <cstdlib>
#include "Node.h"

template <class E>
class MyOrderedList;
template <class E>
std::ostream& operator <<(std::ostream& out, const MyOrderedList<E>& list);

template <class E>
class MyOrderedList {
public:
    MyOrderedList()
    {/*IMPLEMENTATION*/}

    MyOrderedList(const MyOrderedList<E>& orig)
    {/*IMPLEMENTATION*/}

    void operator =(const MyOrderedList<E>& orig)
    {/*IMPLEMENTATION*/}

    virtual ~MyOrderedList()
    {/*IMPLEMENTATION*/}

    bool remove(E data)
    {/*IMPLEMENTATION*/}

    MyOrderedList<E> kLargest(int k) const
    {/*IMPLEMENTATION*/}

    E get(int pos) const
    {/*IMPLEMENTATION*/}

    void insert(E data)
    {/*IMPLEMENTATION*/}

    MyOrderedList<E> operator +(const MyOrderedList<E>& list)
    {/*IMPLEMENTATION*/}

    friend std::ostream& operator <<(std::ostream& out, const MyOrderedList<E>& list)
    {/*IMPLEMENTATION*/}

private:
    Node<E>* head;
    int size;
};

#endif  //MYORDEREDLIST_H 
```

**主文件**

```
#include <cstdlib>
#include <iostream>
#include "MyOrderedList.h"

using namespace std;

int main(int argc, char** argv) 
{
    MyOrderedList<int> list;
    list.insert(5);
    std::cout << list << std::endl;;

    return 0;
} 
```

**编译器错误**

```
g++     -o dist/Debug/Cygwin-Windows/project7_windows build/Debug/Cygwin-Windows/main.o  
build/Debug/Cygwin-Windows/main.o: In function `_ZN4NodeIiE7getLinkEv':
/cygdrive/c/Users/John/Desktop/Dropbox/Data Structures/Project7 Windows/MyOrderedList.h:(.rdata$_ZTV4NodeIiE[vtable for Node<int>]+0x8): undefined reference to `Node<int>::~Node()'
/cygdrive/c/Users/John/Desktop/Dropbox/Data Structures/Project7 Windows/MyOrderedList.h:(.rdata$_ZTV4NodeIiE[vtable for Node<int>]+0xc): undefined reference to `Node<int>::~Node()'
collect2: ld returned 1 exit status
make[2]: *** [dist/Debug/Cygwin-Windows/project7_windows.exe] Error 1 
```

制作[1]：*** [.build-conf] 错误 2 制作：*** [.build-impl] 错误 2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T23:03:59.953

正如您的编译器准确指出的那样，您声明`~Node()`但从未定义它。您需要提供`Node::~Node()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T23:07:54.987

这

```
class Node {
  virtual ~Node(); 
}; 
```

声明（但未定义）Node 的虚拟析构函数（模板性在这里无关紧要）。你要么需要

1.  删除这一行（因此使用编译器提供的默认实现）或
2.  也提供一个定义：

.

```
class Node {
  virtual ~Node() { /* put your dtor logic here */ } 
}; 
```

除非您计划从 Node 继承，否则不要害怕删除声明，因为您不能在 Node 的 dtor 中放置太多逻辑：它对其模板类型知之甚少。除非您打算删除指向下一个节点 ( `Node::link`) 的指针，否则这可能是一个危险的提议

# android - 如何正确测试appwidget？

> ID：10166937
> 
> 赞同：0
> 
> 时间：2012-04-15T23:03:06.067
> 
> 标签：android, unit-testing, testing, android-appwidget

我有一个用作按钮的 appwidget。我想彻底测试它，因为它会为我的应用程序启动重要活动。怎么可能这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T00:22:08.553

即兴发挥，我会将创建 的智能隔离`RemoteViews`在一个单独的方法中，该方法可以独立于 调用`AppWidgetProvider`，只需使用`Context`. 然后，您可以使用`AndroidTestCase`.

# javascript - 如何使此脚本中的引文可点击链接？

> ID：10166938
> 
> 赞同：0
> 
> 时间：2012-04-15T23:03:10.777
> 
> 标签：javascript

我有来自 codelifter 的这个脚本，它工作得很好。我希望如果下面的引用包含一个 url，那么它就会变成可点击的。任何帮助都会很棒。谢谢

```
<script language="JavaScript">
// ==============================================
// Copyright 2004 by CodeLifter.com
// Free for all; but please leave in this header.
// ==============================================

var Quotation=new Array() // do not change this!

// Set up the quotations to be shown, below.
// To add more quotations, continue with the
// pattern, adding to the array.  Remember
// to increment the Quotation[x] index!

Quotation[0] = "http://www.youtube.com/watch?v=zH6U5y086hw";
Quotation[1] = "Sanity is a golden apple with no shoelaces.";
Quotation[2] = "Repent! The end is coming, $9.95 at Amazon.";
Quotation[3] = "Honesty blurts where deception sneezes.";
Quotation[4] = "Pastry satisfies where art is unavailable.";
Quotation[5] = "Delete not, lest you, too, be deleted.";
Quotation[6] = "O! Youth! What a pain in the backside.";
Quotation[7] = "Wishes are like goldfish with propellors.";
Quotation[8] = "Love the river's \"beauty\", but live on a hill.";
Quotation[9] = "Invention is the mother of too many useless toys.";

// ======================================
// Do not change anything below this line
// ======================================
var Q = Quotation.length;
var whichQuotation=Math.round(Math.random()*(Q-1));
function showQuotation(){document.write(Quotation[whichQuotation]);}
showQuotation();
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T00:08:50.000

```
function showQuotation(){
    if(Quotation[whichQuotation].substr(0,7)=='http://' || Quotation[whichQuotation].substr(0,8)=='https://')
    document.write('<a href="'+Quotation[whichQuotation]+'">'+Quotation[whichQuotation]+'</a>');
    else
    document.write(Quotation[whichQuotation]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T23:07:44.587

这就是我要做的：

1.  假设报价以 http(s):// 开头
2.  在 ShowQuotation 中：~~使用正则表达式来识别此类字符串。~~可能是不必要的复杂。检查长度为 7 的子字符串是否为`http://`或长度为 8 的子字符串为`https://`，假设其余部分都是 URL 的一部分
3.  使其成为链接

# c++ - QProgressBar 挂在 98%

> ID：10166939
> 
> 赞同：0
> 
> 时间：2012-04-15T20:25:08.443
> 
> 标签：c++, qt

我是 Qt 的初学者，我正在尝试为我的应用程序的 gui 显示进程栏。我写了以下代码

```
void my_app::progress()
{
  int val=1;
  while(process.state()!=0)
  {
    ui->progressBar->setValue(val++);
  }
  ui->progressBar->setValue(100);
} 
```

但进度条挂在 98% 。任何人都可以建议我一些解决方案。
谢谢你 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T06:37:01.237

两个可能的点： QProcess:::state() 没有进入 Qt 事件循环——所以重复调用它不会更新你的应用程序；您所有的 Qt 逻辑都挂起。并验证progressBar 初始化：如果progressBar 属性“最大值”不完全是100，它将不会达到100%。您的“val”也忽略了“progressBar”最大值，因此需要修复：

```
 if( val < ui->progressBar->maximum() )
   ui->progressBar->setValue(val++); 
```

大多数工作都有明确的进步概念，这在这里并不明显。您的 while 循环可能太快而无法直观地识别进度步骤。考虑用信号/槽对替换 while 循环来同步进度条。这也将允许 Qt 有时进入事件循环以更新您的应用程序。如果您调用的进程向标准输出输出一些合理的内容，请考虑使用信号 QProcess::readyReadStandardOutput()。也许你的进程做了一些事情，即填充一个缓冲区，你可以用它的大小来指示进度 - 或者只是输出一个计数到标准输出。让我在这里画个草图：

```
.. Somewhere in your my_app constructor ...
.. ui->progressBar->setRange(0, 100); ..
.. connect( this, SIGNAL(processProgressSignal(int)), this, SLOT(progressSlot(int) ); ..
.. connect( &process, SIGNAL(readyReadStandardError()), this, SLOT(processProgress()) ); ..

Q_SIGNALS:
void processProgressSignal( int val );

Q_SLOTS:
void my_app::processProgress()
{
     int val = 1;

     // Insert your process progress calculation here
     // Example: Parse the result of QByteArray QProcess::readAllStandardOutput()
     // Example: val = ( buffer.currLength / buffer.maxLength ) * 100;

     Q_EMIT processProgressSignal( val );
}

void my_app::progressSlot(int val)
{
     if( val < ui->progressBar->maximum() )
       ui->progressBar->setValue(val++);     
} 
```

如果这没有帮助，请确保 process.state() 是“真”的 100 次 - 以允许循环进行 100 次迭代。qDebug() 是你的朋友！

祝你好运！

# 3d - Unity3D 是创建交互式人类头像的好选择吗？

> ID：10166940
> 
> 赞同：2
> 
> 时间：2012-04-15T23:03:38.253
> 
> 标签：3d, unity3d, java-3d

我是研究人体运动某些方面的研究小组的一员。我必须选择合适的技术来创建交互式人类头像，以测试/说明一些研究点。生成的程序应该可以在许多平台上运行：iPhone/iPad、Android 手机、PC、Mac 和 XBox（与 Kinect 交互）。

我发现的最接近的现有 3D 技术是 Unity，但我没有使用它的经验，我担心它对于创建一个可以采取不同姿势（没有面孔、没有纹理、纯几何）的简单交互式人类化身来说是一个巨大的开销。

我的第二个想法是 Java3d，但它似乎被 Oracle 抛弃了。

我应该检查哪些其他选项？

**我知道在 SO 上也有人问过类似的问题，但是情况正在发生变化，新技术几乎每天都会出现，而 2 年前的答案可能完全无关紧要。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T10:00:50.687

在建模方面，Unity3D 并不是最佳选择。您没有太多可使用的...只是一些原始的 3D 形状（立方体、球体等），您可以“组合”这些形状以获得更复杂的东西。但是你不太可能得到你想要的。我的建议如下：

1.  使用 3DS Max 或 Maya 等 3D 建模应用程序创建您的人体（它们是为此类事物而构建的）
2.  将您的身体导入 Unity3D 并在那里设置动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T08:39:48.850

Unity 无疑是最流行的 3D 引擎之一，它使用起来相当直接，尽管我不确定 Kinect 是否支持。

真的没有其他要求或限制吗？

如果您想在 Iphone 或 Android 上进行开发，则需要使用 Java，Xbox 会希望您使用 C#。PC 和 Mac 对所有人都是免费的。如果你想使用 Kinect 设备，你不能使用手机。

如果这更像是一个研究项目，我个人会建议你只针对桌面。您可以使用 Kinect 设备和 OpenCV 等库。OpenCV 提供了很多处理相机输入的功能。用于渲染 3D 场景，OpenGL 或 DirectX。

您还需要考虑很多其他事情，您打算如何加载几何数据？

随时通过评论添加更多信息，我会尽力更新以帮助您

# android - 在 Android 中运行 prolog

> ID：10166942
> 
> 赞同：1
> 
> 时间：2012-04-15T23:04:25.643
> 
> 标签：android, prolog, tuprolog

我正在 Android 中测试 tuProlog。我有一个活动 TuProlog，类 Parser 与序言代码和 data.pl 交互，其中包含序言代码。我可以将它作为一个输出到控制台的 java 项目很好地运行，但作为一个 Android 项目我遇到了麻烦。对于 Android，即使我的文件 data.pl 被复制到项目的根目录、src 和我的包中，我也会得到 FileNotFoundException。我只想将结果作为字符串获取并在 TextView 中显示我的结果。这是我的代码

```
public class TuProlog extends Activity implements OnClickListener{

TextView tv;
Button b1;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    tv = (TextView)findViewById(R.id.label);
    b1 = (Button)findViewById(R.id.button1);
    b1.setOnClickListener(this);
}

@Override
public void onClick(View v) {
    Parser custom = new Parser();
    String result = custom.parse();
    tv.setText(result);
}   
}

public class Parser {

Prolog engine;
PrintStream orgStream   = System.out;

ByteArrayOutputStream baos = new ByteArrayOutputStream();
PrintStream psout = new PrintStream(baos, Boolean.TRUE); // Using autoFlush
String myResult ;

public String parse()
{
    engine  = new Prolog();
    try{
        Theory t = new Theory(new FileInputStream("data.pl"));
        try{
            engine.setTheory(t);
            try{
                SolveInfo answer = engine.solve("likes(john,X).");
                try{
                    Term derivative = answer.getTerm("X");
                    return myResult;;
                }
                catch (NoSolutionException e){
                    e.printStackTrace();
                }
                catch (UnknownVarException e){
                    e.printStackTrace();
                }
            }
            catch (MalformedGoalException e){
                e.printStackTrace();
            }
        }
        catch (InvalidTheoryException e){
            e.printStackTrace();
        }
    } 
    catch (FileNotFoundException e){
        e.printStackTrace();
    }
    catch (IOException e){
        e.printStackTrace();
    }
    return null;
}
    @Override
public void onSpy(SpyEvent e) {
    // TODO Auto-generated method stub
    Log.d("TAG", "** LG'd onSpy => SpyEvent Occured ** " );
    System.out.println("** onSpy => SpyEvent Occured ** \n ");
    myResult =  e.getMsg();
}

@Override
public void onOutput(OutputEvent e) {
    // TODO Auto-generated method stub
     Log.d("TAG", "** LG'd: onOutput => OutputEvent Occured ** " );
        System.out.println("** onOutput => OutputEvent Occured ** \n ");
        myResult =  e.getMsg();

}

@Override
public void onWarning(WarningEvent e) {
    // TODO Auto-generated method stub
    Log.d("TAG", "** LG'd: onWarning => WarningEvent Occured ** " );
    System.out.println("** onWarning => WarningEvent Occured ** \n ");
    myResult = e.getMsg();
}
} 
```

数据.pl

```
likes(john,mary).
likes(mary,wine). 
```

这是我的 logcat 输出，我不知道 System.err

```
04-15 18:51:25.480: W/System.err(23813): java.io.FileNotFoundException: /data.pl (No such file or directory)
04-15 18:51:25.484: W/System.err(23813): at org.apache.harmony.luni.platform.OSFileSystem.open(Native Method)
04-15 18:51:25.484: W/System.err(23813): at dalvik.system.BlockGuard$WrappedFileSystem.open(BlockGuard.java:232)
04-15 18:51:25.484: W/System.err(23813): at java.io.FileInputStream.<init>(FileInputStream.java:80)
04-15 18:51:25.484: W/System.err(23813): at java.io.FileInputStream.<init>(FileInputStream.java:132)
04-15 18:51:25.484: W/System.err(23813): at com.tuprolog.alicia.Parser.parse(Parser.java:32)
04-15 18:51:25.484: W/System.err(23813): at com.tuprolog.alicia.TuProlog.onClick(TuProlog.java:51)
04-15 18:51:25.484: W/System.err(23813): at android.view.View.performClick(View.java:2485)
04-15 18:51:25.484: W/System.err(23813): at android.view.View$PerformClick.run(View.java:9080)
04-15 18:51:25.484: W/System.err(23813): at android.os.Handler.handleCallback(Handler.java:587) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T05:08:10.637

> 即使我的文件 data.pl 被复制到项目的根目录中，我也会收到 FileNotFoundException

但是看看错误：

> java.io.FileNotFoundException: /data.pl (没有这样的文件或目录)

它正在尝试从*文件系统*的根目录读取 data.pl ！

您可以尝试使用`FileInputStream(File)`构造函数来更好地控制路径。例如，看看[这个](https://stackoverflow.com/questions/5527764/get-application-directory)关于如何获取应用程序目录的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T06:40:05.527

我以前做过，并且已经发布了（非常非常beta的概念验证）源代码用于审讯，请参见下文。

要下载 Eclipse (Helios) 项目 Source Code，请转到：versaggi.biz，下载 Adrea、TuProlog Dev Project、Eclipse (Helios) Java Source Project，最后到 TuProlog Android Eclipse Porject Source。那应该让你开始。请记住，这只是概念验证代码，将在最终版本发布之前完全重写。鉴于此，它的效果确实足以让您深入了解我是如何做我所做的事情的。如果您需要任何帮助，请直接与我联系，我很乐意为您提供帮助。:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T17:56:12.657

1.  在eclipse中，在项目的res文件夹中创建一个文件夹“plFiles”
2.  将您的 pl 文件移动到此文件夹（例如：res/plFiles/data.pl）
3.  使用活动来访问此文件（a 是当前活动）

    ```
    InputStream in = a.getResources().openRawResource(R.plFiles.data); 
    ```

4.  上面的行返回一个 InputStream。您现在可以使用 Scanner 或 BufferedReader 或您喜欢的任何阅读器类来继续解析或读取文件。

这里提到了另一种访问文件的方法...[在Android中访问资源文件](https://stackoverflow.com/questions/4081763/access-resource-files-in-android)

# ruby-on-rails - 带有 Rails 的 Backbone.js，@collection 是“未定义”？

> ID：10166946
> 
> 赞同：1
> 
> 时间：2012-04-15T23:05:00.870
> 
> 标签：ruby-on-rails, view, backbone.js, coffeescript, router

我是 Backbone.js 的新手，我正在尝试将它集成到我当前的 rails 应用程序中。我正在关注 railscasts 的教程，但在集成它们时遇到了麻烦。基本上，我正试图调用我的资源（项目），并将它们显示在页面上。我的路由器如下所示：

```
class Placeholder.Routers.Projects extends Backbone.Router
  routes:
    '': 'index'
    'projects/:id':'show'

  initialize: ->
    @collection = new CIS196Project.Collections.Projects()
    @collection.fetch()

  index: ->
    view = new Placeholder.Views.ProjectsIndex()
    $('#container').html(view.render().el)

  show: (id) ->
    alert "Project #{id}" 
```

我的观点如下：

```
class Placeholder.Views.ProjectsIndex extends Backbone.View

  template: JST['projects/index']

  initialize: ->
    document.write(@collection)
    @collection.on('reset', @render, this)

  render: ->
    $(@el).html(@template(projects: @collection))
    this 
```

我大部分都是直接从教程中学到的。我添加了`document.write(@collection)`测试。

加载页面后，我收到错误：

> projects_index.js:17 未捕获类型错误：无法调用未定义的“on”方法

我`fetch()`在路由器中成功创建了，因为在我的日志中，GET 请求成功通过，并且在 chrome 的控制台中尝试它时，获取应该返回一个大小为 1 的数组，但是它给出了那个错误，然后从其控制器加载默认的rails视图（我也不确定为什么会发生这种情况。我有一个定义的模板，但是当它抛出这个错误时，它只是恢复到以前，除非我调用document.write ）。调用后`document.write`，`@collection`显示为“未定义”。

感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T23:34:08.360

您正在将您的集合创建为路由器中的实例变量：

```
class Placeholder.Routers.Projects extends Backbone.Router
  #...
  initialize: ->
    @collection = new CIS196Project.Collections.Projects()
    #... 
```

但是您永远不会将该集合提供给您的视图：

```
index: ->
  view = new Placeholder.Views.ProjectsIndex()
  #... 
```

如果您将集合提供给您的视图：

```
index: ->
  view = new Placeholder.Views.ProjectsIndex(collection: @collection)
  #... 
```

那么你`collection`的视图中就会有一个实例变量。

来自[精美手册](http://documentcloud.github.com/backbone/#View-constructor)：

> **构造函数/初始化** `new View([options])`
> 
> [...] 有几个特殊选项，如果通过，将直接附加到视图：`model`、`collection`、`el`、`id`、`className`和。`tagName``attributes`

因此，仅`collection`在实例化视图时指定选项就足以在视图中获得 a `@collection`。

顺便说一句，`console.log(@collection)`这是一个比 更好的主意`document.write(@collection)`，`document.write`但具有不幸的副作用（例如有时会擦除整个页面），并且`console.log`会产生更具可读性的输出。

# android - 如何使用 REST API 或其他方法保护 JSON 文件？

> ID：10166947
> 
> 赞同：0
> 
> 时间：2012-04-15T23:05:01.243
> 
> 标签：android, json, security, rest, https

我到处搜索，发现了很多我无法理解的信息。我正在使用 WAMP 服务器并设法执行“从表名中选择名称”查询并将数据传递给`json_encode()`. 我喜欢目前的结果，但现在我需要保护服务器中的 JSON 文件，使其只有运行我的 Android 应用程序的用户才能访问。

通过我的研究，我发现 REST 对我来说可能是一个解决方案，但我不明白如何为我的案例实施它。是否可以同时拥有服务器端 REST 安全性和客户端？我知道 REST 是一种 Web 服务，并且我阅读了一个教程，其中 Web 服务基本上是一个网页。我的首要任务是服务器端 json 文件、安全性和速度。用户不会通过 Android 应用程序插入任何信息。我正在考虑将带有用户和密码的 Android 应用程序部署到特定的 json 文件（验证）。

![我的申请流程](../Images/0f76ab8356080002a453f1304a88e240.png)

如果您可以向我指出与该主题相关的视频教程或初学者教程，那将会很有帮助。

这是我的具体问题？

*   我可以用 JSON 解析图像吗？

*   mysqldump --> 转换 .csv 文件 ---> SQLite 效率更高吗？（安全地）。

*   如果数据库中有 100 万个条目，.CSV 文件可以有多大？

*   我怎样才能完成这一切？

请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:03:30.593

我只会回答您关于应用程序身份验证的原始问题。您的其他问题属于单独的问题。

如果它只是您的客户端和服务器，您可以（并且应该）使用相互验证的 SSL 而无需购买任何东西。您控制服务器和客户端，因此每个人都应该只信任一个证书，一个属于另一个证书，并且您不需要为此目的的 CA。

这是高级方法。创建一个自签名服务器 SSL 证书并部署在您的 Web 服务器上。为此，您可以使用 Android SDK 中包含的 keytool。然后创建一个自签名客户端并将其部署在您的应用程序中作为资源包含在您的应用程序中的自定义密钥库中（keytool 也会生成它）。将服务器配置为要求客户端 SSL 身份验证并仅接受您生成的客户端证书。将客户端配置为使用该客户端证书来标识自己，并且只接受您在服务器上安装的一个服务器端证书用于该部分。

一步一步的回答比这里保证的要长得多。我建议分阶段执行此操作，因为网络上有关于如何在服务器端和客户端处理 Android 中的自签名 SSL 证书的资源。O'Reilly 出版的我的书《Android 平台的应用程序安全性》中也有完整的演练。

您通常会将该证书/私钥存储在某种类型的密钥库中（如果您使用的是 Android，则为密钥库），并且该密钥库将被加密。该加密基于密码，因此您需要 (1) 将该密码存储在客户端中的某个位置，或者 (2) 在用户启动客户端应用程序时询问用户密码。您需要做什么取决于您的用例。如果 (2) 是可以接受的，那么您已经保护了您的凭证免受逆向工程，因为它将被加密并且密码不会存储在任何地方（但用户每次都需要输入）。如果您这样做（1），那么有人将能够对您的客户端进行逆向工程，获取密码，获取密钥库，解密私钥和证书，并创建另一个能够连接到服务器的客户端。

您无法采取任何措施来防止这种情况发生；你可以使你的代码更难逆向工程（通过混淆等），但你不能让它变得不可能。您需要确定使用这些方法试图减轻的风险是什么，以及需要做多少工作来减轻风险。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T01:06:11.577

解决方案：使用 HTTP 标头

不安全的解决方案：

使用 User-Agent 标头。

```
User-Agent: MyAndroidApp/1.0 
```

更安全的解决方案：

首先，您需要使用 SSL，这样没有人可以轻易地看到您的密钥。

其次，您可以在从 Android 应用程序发出的请求的 HTTP 标头中放置一个密钥：

```
X-Android-Secret-Key: fee400be-7d08-45c5-bf7c-ff79c35a838c 
```

您检查服务器上的标头，并且仅在收到所需的标头时才返回文件。您将标头保密，但并非无法使用 SSL。

# tcl - “没有数据可显示”使用带有 Tcl 的 Fusioncharts

> ID：10166950
> 
> 赞同：1
> 
> 时间：2012-04-15T23:05:32.073
> 
> 标签：tcl, fusioncharts

我在创建 XML 字符串时遇到问题。我只看到消息“没有要显示的数据”。在我的 .tcl 文件中，我有：

```
set strXMLgrafico "<graph caption='Distribucion Normal de Rendimiento Academico' subCaption='(Curso Administracion de Proyectos I)' xAxisName='Promedio' yAxisName='Densidad de Probabilidad' yAxisMaxValue='1'  divLineColor='91AF46' divLineAlpha='30' alternateHGridAlpha='6' canvasBorderColor='666666' baseFontColor='000000' lineColor='91AF46' numVDivlines='2' showAlternateVGridColor='0' anchorSides='2' anchorRadius='15' showValues='1'>"
    set strXML " "
    for {set i 0} {$i < [llength $datos]} {incr i} { 
     set strXMLdatos [ concat "<set name='[lindex $datos $i]' value='[lindex $datos $i]' />" ]
     append strXML $strXMLdatos 
    }
    set listaDatos [concat $strXMLgrafico $strXML "</graph>"] 
```

然后我在 .adp 文件中调用字符串 listaDatos

```
var barras = new FusionCharts("../indicadores/flash/FCF_Line.swf","barras", "600","300");
barras.setXMLData("@listaDatos@");
barras.render("chartdiv1"); 
```

这是我在浏览器中单击“查看源代码”时的代码：

> barras.setXMLData("< graph caption='Distribucion Normal de Rendimiento Academico' subCaption='(Curso Administra...

我尝试更改字符，即 < for

> '<'; , lt

没事了。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:45:43.027

我认为您需要告诉 adp 不要引用 listaDatos 变量。尝试将 adp 中的行更改为：

```
barras.setXMLData("@listaDatos;noquote@"); 
```

# css - 如何在 WordPress 网站中加入外部设计元素

> ID：10166953
> 
> 赞同：-2
> 
> 时间：2012-04-15T23:06:22.150
> 
> 标签：css, wordpress, wordpress-theming

我有很多很棒的 PSD、CSS 和 HTML 设计资源，来自 CodeCanyon、CoDrops、多个设计师捆绑包等。我想将其中一些整合到 WordPress 网站中，但对于我的生活，我不能弄清楚怎么做，我到处寻找我能想到的地方，从 CSS-Tricks.com 和 Codex 到 For-Dummies 书籍 :)

我熟悉 HTML、基本 CSS 和 WordPress，但我（显然）不是设计师。我确实知道如何使用@import 或在标签内调用外部样式表，但我如何提取其余文件？

例如，我有一个名为 CSS3Accordion 的项目，它包含几个 index.html 文件以及包含 css、图像和 javascript 的文件夹。我应该如何在我的主题中引用它们，我应该把它们放在哪里？

我假设这是一个非常基本的问题（以至于这些很棒的设计资源通常不附带操作方法文件），所以提前让我说，我真诚地感谢我可能得到的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T02:03:07.350

将 WP 模板应用到 WP 网站和编写一个模板是两件截然不同的事情。您正在使用的那些资源，它们是 WP 主题吗？如果是这样，您应该可以使用控制面板轻松安装它们。如果没有，那将是一个全新的视野。模板的功能不像“普通”的 html + css，它们需要更多的东西（特别是，它们需要被 WP 及其模块、小部件等读取）。

我建议您首先下载和安装主题（周围有很多教程），然后修改其中一些主题。它们通常带有一个自定义 css 表来添加/更改样式（使用 firebug 找到它们，使用 !important 覆盖）。

我希望这回答了你的问题。如果只是加载新 css 的问题，您仍然可以将其全部添加到自定义工作表中。您还可以在 WP 中安装许多免费插件（如手风琴）。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T02:15:51.863

我建议从一个基本的 wordPress 主题开始，并在进行一些试验和错误的过程中结合你的想法。一旦您花一些时间剖析一个基本主题，WordPress 主题实际上非常简单。大多数时候，我从 Photoshop 中的完整设计开始，并使用该图像作为背景，使用 CSS 对切片图形进行布局。

您可以将文件放在您想要的任何位置，但我通常将它们放在主题文件夹中并使用相对文件路径引用它们，但请记住在链接到文件时要考虑路径。

我还建议设置一个本地托管的 WordPress 安装来使用 WAMP、MAMP 或 LAMP 之类的东西。这样您就可以立即进行审核，而不必在每次进行更改时将其公开或上传文件。

这里有几个很好的起始模板主题可供探索。

[http://digwp.com/2010/02/blank-wordpress-theme/](http://digwp.com/2010/02/blank-wordpress-theme/)

[http://code.google.com/p/wordpress-naked/](http://code.google.com/p/wordpress-naked/)

问候和祝你好运。

# mysql - 如何在行组上执行“WHERE”？

> ID：10166954
> 
> 赞同：3
> 
> 时间：2012-04-15T23:06:29.203
> 
> 标签：mysql, sql, database

我有一张桌子，看起来像：

```
+-----------+----------+
+ person_id + group_id +
+-----------+----------+
+    1      +    10    +
+    1      +    20    +
+    1      +    30    +
+    2      +    10    +
+    2      +    20    +
+    3      +    10    +
+-----------+----------+ 
```

我需要一个查询，以便只返回组 10 AND 20 AND 30 的 person_ids（仅 person_id: 1）。我不确定如何执行此操作，因为据我所知，这需要我按 person_id 对行进行分组，然后选择包含所有 group_id 的行。

我正在寻找可以保留键的使用而无需诉诸字符串操作`group_concat()`等的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T23:12:50.163

分组和计数命中：

```
select person_id
  from ATable
 where group_id IN (10, 20, 30)
 group by person_id
having count(*) = 3 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-15T23:17:52.063

这就是你要找的：

```
select person_id from t
where group_id in (10, 20, 30)
group by person_id
having count(distinct group_id) = 3 
```

虽然有效，但使用此解决方案时，值的数量`in`必须与您比较计数的值相匹配。

正如你所说，只是为了好玩的解决方案，即使`group_concat`你也可以解决这个问题：P

```
select person_id from t
where group_id in (10, 20, 30)
group by person_id
having group_concat(distinct group_id order by group_id) = '10,20,30' 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-15T23:12:01.210

```
SELECT person_id FROM... WHERE group_id IN(10,20,30) group by person_id
having count(*) = 3 
```

# python - 创建嵌套字典python

> ID：10166956
> 
> 赞同：1
> 
> 时间：2012-04-15T23:06:40.287
> 
> 标签：python

可能一个例子会更容易解释这一点。

所以想象我有这样的事情：

```
 word_dict = {"word": frequency} 
```

例如，我是否会循环遍历一个段落，在该段落中我发现单词 freq 为

```
 word_dict = {"this":2,"that":4} # assume that all the cases have just these two words.. 
```

是的，它是一个奇怪的字典..

现在，每个段落都分配给一个故事，这个故事有一个 id：

可以说我明白了：

```
{1234: {word_dict}} # where 1234 is the story id 
```

然后这个故事被包含在一本书中：所以如果做类似的事情`book_dict[book_id][story_id]`，这将返回我 word_dict。

但是很有可能相同的 book_id、story_id 会有不同的 word_dict

我知道这听起来很奇怪..

所以我想要的是`book_dict[book_id][story_id] = [{word_dict}]`它返回我一个单词字典列表..

我该如何实现这一点。

呃。这个问题有意义吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T23:15:22.720

```
book_dict = {}
for each book_id, story_id, word_dict in who_knows_what:
    if book_id not in book_dict:
        book_dict[book_id] = {}
    if story_id not in book_dict[book_id]:
        book_dict[book_id][story_id] = []
    book_dict[book_id][story_id].append( word_dict ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-17T17:48:45.873

另一种选择是使用[`setdefault`](http://docs.python.org/2/library/stdtypes.html#dict.setdefault)：

```
book_dict = {}
for each book_id, story_id, word_dict in who_knows_what:
    book_dict.setdefault(book_id, {}).setdefault(story_id, []).append(word_dict) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-17T17:41:41.813

这是 Scott Hunter 答案的简化版本：

```
book_dict = {}
for book_id, story_id, word_dict in who_knows_what:
    book_dict[book_id] = book_dict.get(book_id, {})
    book_dict[book_id][story_id] = book_dict[book_id].get(story_id, [])
    book_dict[book_id][story_id].append( word_dict ) 
```

# html - 背景上的圆角？

> ID：10166961
> 
> 赞同：0
> 
> 时间：2012-04-15T23:07:04.197
> 
> 标签：html, css

我想知道是否可以仅在页面背景上圆角，例如 -

```
body{background-color:#7A991A; 
```

所以我想围绕页面的每个角落？谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T23:21:41.797

您必须为`html`元素提供背景颜色：

```
html, body {
    height: 100%;
}
html { background: white }
body {
    background-color:#7A991A;
    border-radius: 20px;
} 
```

这是小提琴：http: [//jsfiddle.net/wYKa3/](http://jsfiddle.net/wYKa3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T00:59:25.917

你可以使用这个：

```
body{
-moz-border-radius:4px;
-webkit-border-radius:4px;
border-radius: 4px;
-moz-box-shadow:0 2px 2px rgba(0,0,0,0.3);
-webkit-box-shadow:0 2px 2px rgba(0,0,0,0.3);
box-shadow: 0 2px 2px rgba(0,0,0,0.3);
background:#7A991A;
} 
```

这是一个带有圆角和阴影色角的背景。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T01:03:02.467

您可能还想使用`-webkit-border-radius`and `-moz-border-radius`，如下所示：

```
body {
    background-color:#7A991A;
    border-radius: 20px;
    -webkit-border-radius: 20px;
    -moz-border-radius: 20px;
} 
```

增加与不同浏览器的兼容性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T06:39:20.570

你可以看到这个**CSS**与浏览器兼容级别：

```
 html, body {
    height: 100%;
    background: white
}

body {
-moz-border-radius:20px;
-webkit-border-radius:20px;
border-radius: 20px;
background:red;
} 
```

演示：- [http://jsfiddle.net/trzpK/](http://jsfiddle.net/trzpK/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-15T23:28:04.300

我不认为这是可能的。既然“正文”是整个文档，那么如果你把页面的角落弄圆，下面应该出现什么？

也许您可以将页面内容包装在`<div>`具有全宽和全高的元素中，然后在其上设置圆角而不是 body。然后你将 body 的背景设置为与全尺寸 div 不同的颜色，然后你就设置好了。像这样的东西应该工作：

HTML：

```
<body>
  <div id="content">
    <!-- Your content here -->
  </div>
</body> 
```

CSS：

```
body { background-color: #000000; }
#content { 
  width: 100%; 
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  background-color: #ffffff;
  border-radius: 10px;
} 
```

# c# - 带有比较器的 LINQ 查询语法

> ID：10166966
> 
> 赞同：2
> 
> 时间：2012-04-15T23:07:46.220
> 
> 标签：c#, .net, linq, comparator

考虑这段代码：

```
 var files = Directory.GetFiles(filePath);
 var dataFiles = from file in files
                 where System.IO.Path.GetExtension(file) == extension 
                 orderby file.Length
                 select file; 
```

我一直在寻找可以进行“自然排序”的字符串比较器。遗憾的是，这个常见任务没有内置功能。我找到[了这篇文章](https://stackoverflow.com/questions/248603/natural-sort-order-in-c-sharp)，看起来不错。

我可以将 NaturalStringComparer 与**LINQ 查询语法**一起使用吗？我知道使用 lambdas 的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T23:17:50.610

不幸的是，这是不可能的，因为`OrderBy`查询语法不支持自定义比较器的重载 - 只有方法语法才能使其可访问：

```
var comparer = new NaturalStringComparer();
var dataFiles = files.Where(f => System.IO.Path.GetExtension(f) == extension)
                     .OrderBy(f => f, comparer); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T09:24:39.980

```
 var files = Directory.GetFiles("C:\\");
        var dataFiles = from file in files
                        where System.IO.Path.GetExtension(file) == extension
                        orderby file
                        select file; 
```

this might help you.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T23:17:58.930

您需要使用扩展方法语法：

```
files.OrderBy(file => file.Length, new NaturalStringComparer()) 
```

# c# - VS2010 C#在构建期间缺少项目dll

> ID：10166968
> 
> 赞同：0
> 
> 时间：2012-04-15T23:08:27.840
> 
> 标签：c#, visual-studio-2010, build

我在 VS2010 中构建有问题。我正在尝试开发小型 Prism、MVVM 应用程序。

我将新项目“工具栏”添加到我的解决方案“MyApp”中，并且在构建过程中出现以下错误（可能由于某种原因未创建项目的 dll）：

> 错误 2 无法加载引用的程序集“C:\net\projects\MyApp\MyApp.Modules.Toolbar\bin\Debug\MyApp.Modules.Toolbar.dll”。
> 
> 捕获 FileNotFoundException 说“无法加载文件或程序集 'C:\net\projects\MyApp\MyApp.Modules.Toolbar\bin\Debug\MyApp.Modules.Toolbar.dll' 或其依赖项之一。系统找不到指定的文件。”。
> 
> C:\net\projects\MyApp\MyApp\ResGen MyApp

我对 VS2010 和 C# 很陌生，所以我真的不知道发生了什么，是因为源代码中的一些错误或者为什么会发生这种情况而导致项目 dll 丢失？我也不知道如何在源代码中找到这样的错误，因为 VS 只显示了上面提到的错误。我猜项目的依赖关系应该没问题，文件 MyApp.Modules.Toolbar.dll 真的不存在于我的硬盘上的任何文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:05:15.920

问题是在工具栏项目的 xaml 中定义的错误类名（UserControl x:Class="BAD CLASS HERE"）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T06:15:17.583

在许多谷歌搜索了一个类似的问题之后，我曾经玩弄过在 .net 项目中使用开放式办公室，然后我所有的 aspx 页面都有蓝色波浪线，说找不到 cli_uno，它在任何地方都没有被引用我的项目或 lib 文件。

我删除了所有的 bin 文件夹，一个引用它的 dll 隐藏在其中一个文件夹中，让 vs2010 吓坏了。

我意识到这不是上述问题的确切解决方案，但是对于这个错误并没有太多的解决方案，而且它是一个令人头疼的问题，并且删除了所有对我有用的 bin 文件夹，所以可以尝试一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T23:18:40.317

您提供的信息太少，所以我会问一些问题（以及一些可能的修复）：

1.  文件是否以指定路径开头？
2.  如果没有，是否需要构建一个项目来创建 dll？
3.  如果有这样的项目，它是否会在您正在寻找它的地方构建 .dll - 如果没有，您需要手动复制它或设置构建后流程以在每次构建后自动进行复制
4.  如果没有这样的项目，您是否在某处拥有 .dll 本身。如果是，则需要将其复制到正确的位置。
5.  如果 .dll 位于正确的位置，是否有一些保护措施阻止其他项目访问它？

# c# - 如何使用 C# 中的 C 回调？

> ID：10166970
> 
> 赞同：0
> 
> 时间：2012-04-15T23:08:56.207
> 
> 标签：c#, c++

这是库[Secret Rabbit Code (aka libsamplerate)](http://www.mega-nerd.com/SRC/)的 .NET 包装器，当在**CallbackRead**中调用**src_callback_read**时：*AccessViolationException - Attempted to read or write protected memory*。

 ***从 C 标头：

```
/* Opaque data type SRC_STATE. */
typedef struct SRC_STATE_tag SRC_STATE ;

typedef long (*src_callback_t) (void *cb_data, float **data) ;

SRC_STATE* src_callback_new (src_callback_t func, int converter_type, int channels,                 int *error, void* cb_data) ;

long src_callback_read (SRC_STATE *state, double src_ratio, long frames, float * 
```

然后我创建了以下内容：

调用 C 库的 C++/CLI 类库：

```
public delegate long SRCCallback ( void *cb_data, float **data ) ;

static  IntPtr CallbackNew ( SRCCallback ^func, RabbitConverter converter_type, int channels, int *error, void* cb_data )
        {
            src_callback_t* cb = ( src_callback_t* ) &func;
            SRC_STATE* state =  src_callback_new ( *cb, ( int ) converter_type, channels, error, cb_data );
            IntPtr ptr = IntPtr ( state );
            return ptr;
        }

static long CallbackRead ( IntPtr  src_state, double src_ratio, long frames , float * data )
        {
            void* toPointer = src_state.ToPointer();
            SRC_STATE* state = ( SRC_STATE* ) toPointer;
            long l = src_callback_read ( state, src_ratio, frames, data );
            return l;
        } 
```

使用 C++/CLI 库的 C# 应用程序：

```
private static readonly unsafe SRCCallback _callback = target;

private static unsafe void Callback()
{
    var input = GetSine(1000.0d, 44100, 1);
    fixed (float* f = input)
    {
        RabbitError error = RabbitError.SRC_ERR_NO_ERROR;
        var @void = Rabbit.CallbackNew(_callback, RabbitConverter.SRC_SINC_BEST_QUALITY, 1, (int*) (&error),
                                        (void*) IntPtr.Zero);
        var callbackRead = Rabbit.CallbackRead(@void  , 1d, input.Length/2, f);
        if (callbackRead != input.Length)
        {
            // throw new InvalidOperationException();
        }
    }
}

private static unsafe int target(void* cb_data, float** data)
{
    return 9;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T17:28:42.830

我已经使用以下方法修复了它：

```
[System::Runtime::InteropServices::UnmanagedFunctionPointerAttribute ( CallingConvention::Cdecl )]
public delegate long SRCCallback ( void *cb_data, float **data ) ;

static  IntPtr CallbackNew ( SRCCallback ^ % func, RabbitConverter converter_type, int channels, int *error, void* cb_data ) { ... } 
```

简而言之：现在它使用 C 调用约定和 C# *ref*关键字。***

# python - 如何在 Python 列表中使用 \

> ID：10166971
> 
> 赞同：1
> 
> 时间：2012-04-15T23:08:59.350
> 
> 标签：python, list, escaping, sequence

有谁知道在列表中使用 \ 的转义序列。

```
List = ['a','B','c','D','\'] # My python interpreter thinks I want 
                             # a line continuation but I want the 
                             # actual  ASCII character. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-15T23:10:06.020

这将起作用，

```
 List = ['a','B','c','D','\\'] 
```

你用另一个 \ 在前面“逃脱” \。顺便说一句，“列表”可能不是变量名的最佳选择。

基本上任何时候你想使用 \ 作为一个简单的“\”字符而不是特殊的 Python 字符，你必须使用它们中的两个。

因此，例如，这将在列表中查找单个反斜杠并打印单个反斜杠，即使代码中使用了两个反斜杠。

```
for c in List:
    if c == '\\':
       print 'Found \\.' 
```

输出：

```
Found \. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T23:10:31.310

它应该是：

```
List = ['a','B','c','D','\\'] 
```

使用双反斜杠可以转义字符。它在[Python 参考 - 词法分析](http://docs.python.org/reference/lexical_analysis.html#string-literals)部分进行了详细说明。

它会给你一个反斜杠：

```
>>> print chr(ord(List[-1]))
\ 
```

# java - 如何在 Scala 中将 Java Collection[Int] 转换为 Array[Int]

> ID：10166972
> 
> 赞同：2
> 
> 时间：2012-04-15T23:09:00.423
> 
> 标签：java, scala, treemap

我`java.util.Treemap[Long, Int]`在 Scala 中有一个。我需要做的是将 Treemap 中的值转换为 Array[Int]。

我可以得到一个`Iterator[Int]`或`Collection[Int]`从`TreeMap`，但我不知道如何将它们转换成`Array[Int]`.

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T01:18:05.470

问题`t.values.toArray`在于它`java.util.Collection`已经有一个`toArray()`方法，这就是为什么它返回一个`Integer[]`看起来像`Array[AnyRef]`Scala 的方法。如果 Java 没有这样的方法，则隐式 in`JavaConversions`会`Iterable[Int]`在构建数组之前将其转换为 an。因此，您可以显式调用覆盖或给出类型提示：

```
import collection.JavaConversions._    

(t.values: Iterable[Int]).toArray 
```

或者

```
import collection.JavaConverters._

t.values.asScala.toArray 
```

在我的机器上，对于 1000 个条目的 TreeMap，这些速度是 using~~的两倍多，~~大约是 30 倍。`toMap`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T23:12:50.297

我从未使用过 Scala，但在 Java 中，您可以使用`Collection.toArray()`方法来获取 int[]。

希望有帮助。

问候。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T23:12:30.290

```
import collection.JavaConversions._

val treemap = new java.util.TreeMap[Long, Int]()
treemap.put(1,1)
treemap.put(2,2)

treemap.toMap.values.toArray // res0: Array[Int] = Array(1, 2) 
```

这会将 转换`TreeMap`为 scala `Map`，获取值，并将它们转换为`Array`.

不幸`treemap.values.toArray`的是，这并没有奏效，因为`java.util.Collection[Int]`您调用时的隐式转换`.toArray`会给您返回`Array[Object]`.

# python - 选择性地从输入文件中复制

> ID：10166973
> 
> 赞同：0
> 
> 时间：2012-04-15T23:09:07.393
> 
> 标签：python, python-3.x

我的任务需要 3 个模块——fileutility、choices 和selectiveFileCopy，最后一个导入前两个。

目的是能够有选择地从输入文件复制文本片段，然后将其写入输出文件，由选择模块中的“谓词”确定。如，复制所有内容（choices.always），如果存在特定字符串（choices.contains（x）），或者按长度（choices.shorterThan（x））。

到目前为止，我只有 always() 工作，但它必须接受一个参数，但我的教授特别指出该参数可以是任何东西，甚至什么都没有（？）。这可能吗？如果是这样，我如何编写我的定义以使其起作用？

这个很长的问题的第二部分是为什么我的其他两个谓词不起作用。当我用 docstests（作业的另一部分）对它们进行测试时，它们都通过了。

这是一些代码：

文件实用程序（有人告诉我这个函数没有意义，但它是任务的一部分......） -

```
def safeOpen(prompt:str, openMode:str, errorMessage:str ):
   while True:
      try:
         return open(input(prompt),openMode)            
       except IOError:
           return(errorMessage) 
```

选择——

```
def always(x):
    """
    always(x) always returns True
    >>> always(2)
    True
    >>> always("hello")
    True
    >>> always(False)
    True
    >>> always(2.1)
    True
    """
    return True

def shorterThan(x:int):
    """
    shorterThan(x) returns True if the specified string 
    is shorter than the specified integer, False is it is not

    >>> shorterThan(3)("sadasda")
    False
    >>> shorterThan(5)("abc")
    True

    """
    def string (y:str): 
        return (len(y)<x)
    return string

def contains(pattern:str):
    """
    contains(pattern) returns True if the pattern specified is in the
    string specified, and false if it is not.

    >>> contains("really")("Do you really think so?")
    True
    >>> contains("5")("Five dogs lived in the park")
    False

    """
    def checker(line:str):
        return(pattern in line)
    return checker 
```

选择性文件复制-

```
import fileutility
import choices

def selectivelyCopy(inputFile,outputFile,predicate):
    linesCopied = 0
    for line in inputFile:
        if predicate == True:
            outputFile.write(line)
            linesCopied+=1
    inputFile.close()
    return linesCopied

inputFile = fileutility.safeOpen("Input file name: ",  "r", "  Can't find that file")
outputFile = fileutility.safeOpen("Output file name: ", "w", "  Can't create that file")
predicate = eval(input("Function to use as a predicate: "))   
print("Lines copied =",selectivelyCopy(inputFile,outputFile,predicate)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T23:15:49.173

> 到目前为止，我只有 always() 工作，但它必须接受一个参数，但我的教授特别指出该参数可以是任何东西，甚至什么都没有（？）。这可能吗？如果是这样，我如何编写我的定义以使其起作用？

您可以使用默认参数：

```
def always(x=None): # x=None when you don't give a argument
    return True 
```

> 这个很长的问题的第二部分是为什么我的其他两个谓词不起作用。当我用 docstests（作业的另一部分）对它们进行测试时，它们都通过了。

您的谓词确实有效，但它们是需要调用的函数：

```
def selectivelyCopy(inputFile,outputFile,predicate):
    linesCopied = 0
    for line in inputFile:
        if predicate(line): # test each line with the predicate function
            outputFile.write(line)
            linesCopied+=1
    inputFile.close()
    return linesCopied 
```

# ios - 模型和控制器之间的通信 - iOS

> ID：10166975
> 
> 赞同：6
> 
> 时间：2012-04-15T23:09:13.027
> 
> 标签：ios, model-view-controller, rest, nsnotificationcenter

我是 iOS 开发的新手，所以我会很感激一些反馈。

我正在尝试为我的 Web 服务构建一个 iOS 客户端。到目前为止，这就是我所做的：

我正在实现两个视图（使用 Storyboard 的基于实用程序的应用程序）。在主视图中，我使用了一个文本字段和一个搜索按钮，用户可以在其中输入查询，然后单击搜索按钮。单击搜索按钮后，我的意图是读取文本字段的值，并将其用于对我的 Web 服务的 Restful 调用。我的 Web 服务返回一个带有查询结果的 JSON 文件，我对其进行解析并显示到辅助视图的文本区域。

我知道如何在 iOS 中进行 restful 调用以及如何进行 JSON 解析以及在屏幕上显示结果（至少是文本内容，但这是另一个不同的问题）。但我的目的是学习 MVC 基础知识并将其应用到我的应用程序中。

根据MVC，控制器更新视图，模型发出通知广播，控制器可以收听并知道对象是否有任何变化。所以这就是我最想做的事情：

我的模型 - 我的模型将处理核心 RESTful 调用、获取 JSON 回复、解析它并获取我想要在视图上显示的结果值。

我的控制器 - 我希望我的控制器监听我的模型并从模型中获取结果值并将它们显示在视图上。

使用一种快速而肮脏的方式，我可以实现 RESTful 调用、JSON 解析和显示结果值 - 所有这些都在 Controller 中，但是使用这种技术，如果我的视图明天发生变化，那么我必须重新编写我的代码。或者如果我想添加新功能，那么我必须更改我的控制器。所以理想情况下，我希望有一个不知道 View 是什么样子的核心模型，让控制器从模型中获取结果并将它们显示在 View 上。

从到目前为止我从谷歌搜索结果中看到的内容来看，有两种方法是 a) 键值观察和 b) 通知中心。

在过去的 2 天里，我试图找到一种很好的方式来实施通知中心或阅读更多关于它的信息，但我没有得到很好的引导。我的一些问题是，我可以使用控制器获取的通知中心发送字符串结果值吗？通知中心如何真正使用字符串值？我在哪里可以找到一些好的例子？

因此，我们将不胜感激任何有关这方面的帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-15T23:37:43.097

> 我的一些问题是，我可以使用控制器获取的通知中心发送字符串结果值吗？

是的，这通常使用`userInfo`a 的属性来完成`NSNotification`。`userInfo`是一个`NSDictionary`可以包含`NSObject`由遵循`NSCopying`协议的键索引的派生对象实例的纯文本（通常`NSString`使用）。请注意，字典 ( `userInfo`) 将保留您的参数对象。

* * *

> 通知中心如何真正使用字符串值？

好吧，这取决于您希望它如何工作。但除了吹毛求疵，见下文。

* * *

> 我在哪里可以找到一些好的例子？

也许这个有帮助...

* * *

**例子**

接收者（控制器）注册通知：

```
- (void)registerForNotifications
{
    [[NSNotificationCenter defaultCenter] addObserver:self 
                                             selector:@selector(modelObjectUpdatedString:)
                                                 name:@"StringUpdated"
                                               object:nil];
} 
```

发送者（模型）通知世界：

```
- (void)stringUpdateWith:(NSString *)theString
{
    self.string = theString;
    [[[NSNotificationCenter defaultCenter] postNotificationName:@"StringUpdated" 
                                                         object:self 
                                                       userInfo:[NSDictionary dictionaryWithObjectsAndKeys:self.string, @"String", nil]];
} 
```

接收器（控制器）在其处理程序中接收通知：

```
- (void)modelObjectUpdatedString:(NSNotification *)notification
{
    ModelObject *postingObject = [notification object];
    NSString *string = [[notification userInfo]
        objectForKey:@"String"];
    ...
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-15T23:43:41.523

您正在沿着正确的道路思考，但仍然不完全。正如 Till 在他的评论中“指出”的那样，您不应该在模型中处理 RESTful 通信。如果我是你，我会创建一个负责获取信息的实用程序类，然后创建一个负责保存数据的类（最后一个类是你的模型）。

创建一个类方法来分配和启动该对象的一个​​新实例是很聪明的，该实例是从通过您的 RESTful 通信器类获取的 JSON 数据创建的。

从您的控制器的角度来看：

```
RESTHelper *rest = [RESTHelper restHelperWithURL:yourRESTURL];
YourModel *model = [YourModel modelWithJSON:[rest fetchObjectWithID:1]];
// Present your models data in the view. 
```

您可能会从这里使用 CoreData 中受益，我强烈建议您研究一下。

# string - 清除不同语言的内存以确保安全

> ID：10166986
> 
> 赞同：6
> 
> 时间：2012-04-15T23:10:55.523
> 
> 标签：string, security, memory-management, passwords

在学习 Java 时，我了解到字符串[对于存储密码并不安全](https://stackoverflow.com/q/8881291/520779)，因为您无法手动清除与它们关联的内存（您不能确定它们最终会被 gc'ed，interned 字符串可能永远不会，甚至在gc 你不能确定物理内存内容是否真的被擦除了）。相反，我将使用 char 数组，因此我可以在使用后将它们归零。我试图在其他语言和平台上搜索类似的做法，但到​​目前为止我找不到相关信息（通常我看到的只是存储在字符串中的密码示例，没有提及任何安全问题）。

我对浏览器的情况特别感兴趣。我经常使用 jQuery，我通常的方法是将密码字段的值设置为空字符串，然后忘记它：

```
$(myPasswordField).val(""); 
```

但我不是 100% 相信这就足够了。我也不知道用于中间访问的字符串是否安全（例如，当我`$.ajax`用来将密码发送到服务器时）。至于其他语言，通常我看不到这个问题（我特别感兴趣的另一种语言是 Python）。

我知道尝试建立列表的问题是[有争议](https://meta.stackexchange.com/q/79835/177950)的，但由于这涉及一个在很大程度上被忽视的常见安全问题，恕我直言，这是值得的。如果我弄错了，我很乐意从 JavaScript（在浏览器中）和 Python 中知道。我也不确定是在[security.SE](https://security.stackexchange.com/)还是在[programmers.SE](https://softwareengineering.stackexchange.com/)问这里，但由于它涉及安全执行任务的实际代码（不是概念性问题），我相信这个站点是最好的选择。

*注意：*在低级语言或明确支持字符作为原始类型~~的语言中，答案应该很明显~~（*编辑：*不是很明显，正如@Gabe 在下面的答案中所示）。我要求那些“一切都是对象”或类似的高级语言，以及那些在幕后执行自动字符串实习的语言（所以你可能会在没有意识到的情况下创建一个安全漏洞，即使你'相当小心）。

**更新**：根据相关问题[的答案](https://stackoverflow.com/a/5241096/520779)`char[]`，即使在 Java 中使用也不能保证是防弹的（或 .NET [SecureString](https://stackoverflow.com/a/141393/520779)，就此而言），因为 gc 可能会移动数组，因此即使在之后它的内容也可能会留在内存中清除（SecureString 至少坚持相同的 RAM 地址，保证清除，但它的消费者/生产者可能仍会留下痕迹）。

我猜@NiklasB。是的，虽然漏洞**存在**，但被利用的可能性很低，而防范的难度很高，这可能是这个问题大多被忽略的原因。我希望我能找到至少一些关于浏览器的这个问题的参考，但是到目前为止，谷歌搜索一直没有结果（这个场景至少有一个**名字**吗？）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T23:13:31.837

.NET 解决方案是[`SecureString`](http://msdn.microsoft.com/en-us/library/system.security.securestring.aspx).

> 对象与对象的`SecureString`相似之处`String`在于它具有文本值。但是，`SecureString`对象的值是自动加密的，可以修改，直到您的应用程序将其标记为只读，并且可以由您的应用程序或 .NET Framework 垃圾收集器从计算机内存中删除。

请注意，即使对于像 C 这样的低级语言，答案也并不像看起来那么明显。现代编译器可以确定您正在写入字符串（将其归零）但从不读取您读出的值，并且只是优化归零。为了防止优化掉安全性，Windows 提供[`SecureZeroMemory`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366877.aspx).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T03:14:02.750

[根据这个答案](https://stackoverflow.com/a/728237/520779)，对于 Python，没有办法做到这一点。一种可能性是使用字符列表（作为长度为 1 的字符串或可能作为整数的代码单元）而不是字符串，因此您可以在使用后覆盖该列表，但这将要求每个接触它的代码都支持这种格式（即使其中一个创建了一个包含其内容的字符串，它结束了）。

还提到了使用 ctypes 的方法，但[链接已损坏](http://www.codexon.com/posts/clearing-passwords-in-memory-with-python)，所以我不知道它的内容。[这个其他答案](https://stackoverflow.com/a/983525/520779)也提到了它，但没有太多细节。

# python - python/集合/字典/初始化

> ID：10166987
> 
> 赞同：2
> 
> 时间：2012-04-15T23:10:58.210
> 
> 标签：python, dictionary, set, compound-assignment

有人可以解释帮助我理解这段代码是如何工作的吗？特别是 myHeap 分配是如何工作的。我知道 freq 变量被分配为字典。但是我的 myHeap 呢？它是一套吗？

```
 exe_Data = {
      'e' : 0.124167,
      't' : 0.0969225,
      'a' : 0.0820011,
      'i' : 0.0768052,
     }

    freq = exe_Data)

    myHeap = [[pct, [symbol, ""]] for symbol, pct in freq.items()] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T23:16:55.403

`freq`正如你所说，是对字典的引用。

`myHeap`是使用[列表推导](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)构造的，因此它是一个列表。列表推导的一般形式是：

```
[ expr for x in iterable ] 
```

列表也是如此`myHeap`，它的每个元素都是一个列表，第一个元素是相应字典条目的值，第二个元素是另一个列表，其第一个元素是字典的对应键，第二个元素是`""`.

您给定的代码示例中没有集合。

您可以看到它是这样工作的（为了便于阅读，我编辑了数字输出）：

```
>>> [ symbol for symbol, pct in freq.items() ]
['a', 'i', 'e', 't']
>>> from pprint import pprint  # Yay, pretty printing
>>> pprint([ [pct, symbol] for symbol, pct in freq.items() ])
[[0.0820011, 'a'],
 [0.0768052, 'i'],
 [0.1241670, 'e'],
 [0.0969225, 't']]
>>> pprint([ [pct, [symbol, ""]] for symbol, pct in freq.items() ])
[[0.0820011, ['a', '']],
 [0.0768052, ['i', '']],
 [0.1241670, ['e', '']],
 [0.0969225, ['t', '']]] 
```

请注意，由于 Python 中的字典不保留其元素的顺序，因此无法保证`freq`元素最终会以什么顺序出现在`myHeap`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T23:17:57.570

我想你的意思是

```
freq = exe_Data 
```

在这种情况下，myHeap 将如下所示：

```
[ [0.124167, ['e', ""]],
  [0.0969225, ['t', ""]],
  [0.0820011, ['a', ""]],
  [0.0768052, ['i', ""]]
] 
```

请注意，这里的顺序是任意的，但我想把它写清楚，以便您可以看到最终结果中的内容。

基本上它只是改变了字典的键/值的顺序，并出于某种原因将键放入子数组中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T23:22:48.267

```
exe_Data = {
  'e' : 0.124167,
  't' : 0.0969225,
  'a' : 0.0820011,
  'i' : 0.0768052,
 } 
```

上面的代码创建了一个名为“exe_Data”的字典。另一种方法是使用内置构造函数 dict() 和关键字参数，如下所示：`exe_Data = dict(e=0.12467, t=0.0969225, a=0.0820011, i=0.0768052)`

```
freq = exe_Data) 
```

我认为上面的内容应该是`freq=exe_Data`. 它再次引用在前一点中创建的字典。

```
myHeap = [[pct, [symbol, ""]] for symbol, pct in freq.items()] 
```

最后一部分使用列表推导创建一个列表。它创建了一个包含两件事的列表，第一件事是上面创建和引用的字典中的键，第二件事是包含字典中相应值和空白字符串的列表。

**编辑：** 在回答评论时，这相当于写作：

```
myHeap = []
for key, val in freq.items():
    myHeap.append([key, [val, ""]]) 
```

# python - Mercurial 的 showconfig 是否具有正确的编码？

> ID：10166989
> 
> 赞同：0
> 
> 时间：2012-04-15T23:11:15.297
> 
> 标签：python, unicode, encoding, mercurial

我想使用`hg showconfig`then retrieving 获取我的 Mercurial 存储库的根路径`bundle.mainreporoot`。根路径有非 ASCII 字符，它是`D:\maçã\asd`.

的输出`hg showconfig`是：

```
...
bundle.mainreporoot=D:\maþÒ\asd
... 
```

我在具有编码 cp850 的 Windows 7 Powershell 中运行它。我想告诉 Mercurial 以正确的编码 cp850 输出 showconfig。例如，我尝试过`hg showconfig --encoding cp850`但没有成功。

该字符`þ`在 cp850`\xE7`中，它看起来像 unicode 代码点 U+00E7 `ç`（我需要的正确字符），并且也在`ç`cp1252 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T01:51:27.370

在运行命令之前更改代码页会有所帮助。美国 Windows 将 cp437 用于控制台，将 Windows-1252 用于非 Unicode GUI 程序。无论出于何种原因，Mercurial 都在使用 cp1252。如果您使用的不是美国 Windows，则可能需要不同的代码页。

```
Windows PowerShell
Copyright (C) 2009 Microsoft Corporation. All rights reserved.

PS W:\maçã\asd> hg showconfig bundle.mainreporoot
W:\maτπ\asd
PS W:\maçã\asd> chcp 1252
Active code page: 1252
PS W:\maçã\asd> hg showconfig bundle.mainreporoot
W:\maçã\asd 
```

**编辑**

根据 Python3，您看到的三个不同字符串是 Mercurial 返回并在控制台中解码为 cp850 或 cp437 的 cp1252：

```
>>> 'maçã'.encode('cp1252').decode('cp850')
'maþÒ'
>>> 'maçã'.encode('cp1252').decode('cp437')
'maτπ' 
```

您的 pastebin 代码是 cp850 解码为 cp1252：

```
>>> 'maçã'.encode('cp850').decode('cp1252')
'ma‡Æ' 
```

# heroku - PGError：错误：关系“用户”不存在 - Rails 教程第 2 版第 9 章 Heroku

> ID：10166992
> 
> 赞同：3
> 
> 时间：2012-04-15T23:11:58.973
> 
> 标签：heroku, ruby-on-rails-3.2, railstutorial.org, pg

在 Hartl 的 Rails 教程（第 2 版）的第 9 章末尾，使用 rake 任务填充 db 时遇到错误。最终解决了它，但不知道出了什么问题。如果其他人遇到此错误，这就是我所做的。如果有人知道出了什么问题，请发表评论——我很想知道。谢谢！

运行这些命令

```
$ git push heroku
$ heroku run rake db:migrate
$ heroku pg:reset SHARED_DATABASE --confirm <name-heroku-gave-to-your-app>
$ heroku run rake db:populate 
```

然后，得到这个错误：

```
rake aborted!
PGError: ERROR:  relation "users" does not exist
:             SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
              FROM pg_attribute a LEFT JOIN pg_attrdef d
                ON a.attrelid = d.adrelid AND a.attnum = d.adnum
             WHERE a.attrelid = '"users"'::regclass
               AND a.attnum > 0 AND NOT a.attisdropped
             ORDER BY a.attnum

Tasks: TOP => db:populate
(See full trace by running task with --trace) 
```

无法弄清楚出了什么问题。然后遇到了这篇文章： [Heroku Postgres Error: PGError: ERROR: relationship "organizations" does not exist (ActiveRecord::StatementInvalid)](https://stackoverflow.com/questions/5450930/heroku-postgres-error-pgerror-error-relation-organizations-does-not-exist)

从那以后，我只运行了这些命令：

```
heroku run rake db:reset
heroku run rake db:migrate
heroku run rake db:populate 
```

现在该应用程序正在运行。我仍然不清楚为什么在重置 SHARED_DATABASE 时出现该错误......如果有人知道，很想知道。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T14:01:14.200

你的步骤不正常。他们应该是：

```
$ git push heroku
$ heroku pg:reset SHARED_DATABASE --confirm <name-heroku-gave-to-your-app>
$ heroku run rake db:migrate
$ heroku run rake db:populate 
```

给@rjz 的帽子提示

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-13T16:16:13.500

我遇到了完全相同的问题，但以正确的顺序执行了命令。在所有 rake 命令之后必须运行以下命令，然后它工作正常。

```
$ heroku restart 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-14T18:02:27.443

如果其他人遇到此问题，则存在具有相同症状的不同问题。如果您有一个未迁移的表，该表还具有在 application.rb 中设置的 AR 观察者，则 rake 将不会加载，因为它会尝试加载正在观察的底层模型。您必须迁移，然后将 AR 观察者添加到 application.rb。