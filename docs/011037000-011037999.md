# StackOverflow 问答 11037000-11037999

# javascript - 将图像添加到没有或标签的 JavaScript 图像查看器？

> ID：11037000
> 
> 赞同：0
> 
> 时间：2012-06-14T16:03:45.303
> 
> 标签：javascript, html, imageview

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T17:45:43.973

您快到了。

在 Colorbox 中，您可以使用该`rel`选项创建事物组。例如：

`$('.thumbnail').colorbox({rel: 'colorboxImg'})`

上面的代码意味着当你点击一个类的东西时`thumbnail`，图像查看器将打开并加载所有类的项目`colorboxImg`。

所以，“你得到的情况”（正如你所说的）非常接近。添加一堆隐藏`<a>`标签并确保`href`s 指向正确的图像。给这些`<a>`标签一个类`colorboxImg`（或任何你决定命名你的组），你就完成了。请记住，`.thumbnail`还需要有一个`colorboxImg`.

如果您还有其他需要满足的情况，请告诉我，我们可以编辑此答案。

# android - WebView 证明 Galaxy Nexus 上的文本不正确

> ID：11037003
> 
> 赞同：0
> 
> 时间：2012-06-14T16:03:48.647
> 
> 标签：android, webview

我的应用程序使用 webview 来显示我从网站解析的内容。当用户在galaxy nexus上使用我的应用程序时会出现问题（可能是1280 * 720分辨率）

我的标签很简单，使用 text-align:justify;。这是我的 webview 配置

```
 WebView web = (WebView) root.findViewById(R.id.webView);                
    web.loadDataWithBaseURL(null,content, "text/html", "utf-8",null);
    web.getSettings().setUseWideViewPort(true);
    web.getSettings().setLoadWithOverviewMode(true);
    web.getSettings().setBuiltInZoomControls(true); 
```

这是我的 webview 的 xml 布局

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" android:id="@id/root" android:gravity="center_horizontal">

    <WebView
        android:id="@+id/webView"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1" >
    </WebView>

    <com.google.ads.AdView
        android:id="@+id/ad"
        android:layout_width="wrap_content"
        android:layout_height="50dp"
        ads:adSize="BANNER"
        ads:adUnitId="a14fd0c4bb5aa9f"
        ads:background="@drawable/bg_main_repeat"
        ads:primaryTextColor="#FFFFFF"
        ads:secondaryTextColor="#CCCCCC" />

</LinearLayout> 
```

我在 Sony Xperia P(Android 2.3) 上测试我的应用程序没有发现问题。并在 800*480 的模拟器 4.0 上测试也没有发现问题。

我的问题显示在：http: [//images.droidsans.com/sites/default/files/Screenshot_2012-06-14-21-53-11.png](http://images.droidsans.com/sites/default/files/Screenshot_2012-06-14-21-53-11.png) 用户需要双击以缩放文本适合屏幕。

我该怎么办？请帮我

PS。对不起我糟糕的英语。我不是母语人士。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:19:20.293

尝试使用这个：

```
WebView.loadData("<head><style>* {margin:0;padding:0;font-size:15; text-align:justify}</style></head>" + "your data", "text/html", "UTF-8"); 
```

# c# - 默认 HTTP 标头是否有任何常量？

> ID：11037004
> 
> 赞同：83
> 
> 时间：2012-06-14T16:03:51.020
> 
> 标签：c#, asp.net, http-headers

Microsoft 是否为标准 HTTP 标头名称创建了一个充满常量的类，还是我必须自己编写？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2017-07-12T08:05:17.950

我在尝试发现同样的事情时发现了这个问题：作为字符串的标题名称常量在哪里？

在 ASP.NET Core 中，`Microsoft.Net.Http.Headers.HeaderNames`是拯救我的类。

```
public static class HeaderNames
  {
    public const string Accept = "Accept";
    public const string AcceptCharset = "Accept-Charset";
    public const string AcceptEncoding = "Accept-Encoding";
    public const string AcceptLanguage = "Accept-Language";
    public const string AcceptRanges = "Accept-Ranges";
    public const string Age = "Age";
    public const string Allow = "Allow";
    public const string Authorization = "Authorization";
    public const string CacheControl = "Cache-Control";
    public const string Connection = "Connection";
    public const string ContentDisposition = "Content-Disposition";
    public const string ContentEncoding = "Content-Encoding";
    public const string ContentLanguage = "Content-Language";
    public const string ContentLength = "Content-Length";
    public const string ContentLocation = "Content-Location";
    public const string ContentMD5 = "Content-MD5";
    public const string ContentRange = "Content-Range";
    public const string ContentType = "Content-Type";
    public const string Cookie = "Cookie";
    public const string Date = "Date";
    public const string ETag = "ETag";
    public const string Expires = "Expires";
    public const string Expect = "Expect";
    public const string From = "From";
    public const string Host = "Host";
    public const string IfMatch = "If-Match";
    public const string IfModifiedSince = "If-Modified-Since";
    public const string IfNoneMatch = "If-None-Match";
    public const string IfRange = "If-Range";
    public const string IfUnmodifiedSince = "If-Unmodified-Since";
    public const string LastModified = "Last-Modified";
    public const string Location = "Location";
    public const string MaxForwards = "Max-Forwards";
    public const string Pragma = "Pragma";
    public const string ProxyAuthenticate = "Proxy-Authenticate";
    public const string ProxyAuthorization = "Proxy-Authorization";
    public const string Range = "Range";
    public const string Referer = "Referer";
    public const string RetryAfter = "Retry-After";
    public const string Server = "Server";
    public const string SetCookie = "Set-Cookie";
    public const string TE = "TE";
    public const string Trailer = "Trailer";
    public const string TransferEncoding = "Transfer-Encoding";
    public const string Upgrade = "Upgrade";
    public const string UserAgent = "User-Agent";
    public const string Vary = "Vary";
    public const string Via = "Via";
    public const string Warning = "Warning";
    public const string WebSocketSubProtocols = "Sec-WebSocket-Protocol";
    public const string WWWAuthenticate = "WWW-Authenticate";
  } 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-06-14T16:16:50.967

请求标头

```
/// <summary>
/// Contains the standard set of headers applicable to an HTTP request.
/// </summary>
public static class HttpRequestHeaders
{
    ///<summary>Content-Types that are acceptable</summary>
    public const string Accept = "Accept";
    ///<summary>Character sets that are acceptable</summary>
    public const string AcceptCharset = "Accept-Charset";
    ///<summary>Acceptable encodings. See HTTP compression.</summary>
    public const string AcceptEncoding = "Accept-Encoding";
    ///<summary>Acceptable languages for response</summary>
    public const string AcceptLanguage = "Accept-Language";
    ///<summary>Acceptable version in time</summary>
    public const string AcceptDatetime = "Accept-Datetime";
    ///<summary>Authentication credentials for HTTP authentication</summary>
    public const string Authorization = "Authorization";
    ///<summary>Used to specify directives that MUST be obeyed by all caching mechanisms along the request/response chain</summary>
    public const string CacheControl = "Cache-Control";
    ///<summary>What type of connection the user-agent would prefer</summary>
    public const string Connection = "Connection";
    ///<summary>an HTTP cookie previously sent by the server with Set-Cookie (below)</summary>
    public const string Cookie = "Cookie";
    ///<summary>The length of the request body in octets (8-bit bytes)</summary>
    public const string ContentLength = "Content-Length";
    ///<summary>A Base64-encoded binary MD5 sum of the content of the request body</summary>
    public const string ContentMD5 = "Content-MD5";
    ///<summary>The MIME type of the body of the request (used with POST and PUT requests)</summary>
    public const string ContentType = "Content-Type";
    ///<summary>The date and time that the message was sent</summary>
    public const string Date = "Date";
    ///<summary>Indicates that particular server behaviors are required by the client</summary>
    public const string Expect = "Expect";
    ///<summary>The email address of the user making the request</summary>
    public const string From = "From";
    ///<summary>The domain name of the server (for virtual hosting), mandatory since HTTP/1.1\. Although domain name are specified as case-insensitive[5][6], it is not specified whether the contents of the Host field should be interpreted in a case-insensitive manner[7] and in practice some implementations of virtual hosting interpret the contents of the Host field in a case-sensitive manner.[citation needed]</summary>
    public const string Host = "Host";
    ///<summary>Only perform the action if the client supplied entity matches the same entity on the server. This is mainly for methods like PUT to only update a resource if it has not been modified since the user last updated it.</summary>
    public const string IfMatch = "If-Match";
    ///<summary>Allows a 304 Not Modified to be returned if content is unchanged</summary>
    public const string IfModifiedSince = "If-Modified-Since";
    ///<summary>Allows a 304 Not Modified to be returned if content is unchanged, see HTTP ETag</summary>
    public const string IfNoneMatch = "If-None-Match";
    ///<summary>If the entity is unchanged, send me the part(s) that I am missing; otherwise, send me the entire new entity</summary>
    public const string IfRange = "If-Range";
    ///<summary>Only send the response if the entity has not been modified since a specific time.</summary>
    public const string IfUnmodifiedSince = "If-Unmodified-Since";
    ///<summary>Limit the number of times the message can be forwarded through proxies or gateways.</summary>
    public const string MaxForwards = "Max-Forwards";
    ///<summary>Implementation-specific headers that may have various effects anywhere along the request-response chain.</summary>
    public const string Pragma = "Pragma";
    ///<summary>Authorization credentials for connecting to a proxy.</summary>
    public const string ProxyAuthorization = "Proxy-Authorization";
    ///<summary>Request only part of an entity. Bytes are numbered from 0.</summary>
    public const string Range = "Range";
    ///<summary>This is the address of the previous web page from which a link to the currently requested page was followed. (The word “referrer” is misspelled in the RFC as well as in most implementations.)</summary>
    public const string Referersic = "Referer[sic]";
    ///<summary>The transfer encodings the user agent is willing to accept: the same values as for the response header Transfer-Encoding can be used, plus the trailers value (related to the chunked transfer method) to notify the server it expects to receive additional headers (the trailers) after the last, zero-sized, chunk.</summary>
    public const string TE = "TE";
    ///<summary>Ask the server to upgrade to another protocol.</summary>
    public const string Upgrade = "Upgrade";
    ///<summary>The user agent string of the user agent</summary>
    public const string UserAgent = "User-Agent";
    ///<summary>Informs the server of proxies through which the request was sent.</summary>
    public const string Via = "Via";
    ///<summary>A general warning about possible problems with the entity body.</summary>
    public const string Warning = "Warning";
    ///<summary>Contains the original source address of the request.</summary>
    public const string XForwardedFor = "X-Forwarded-For";
} 
```

响应标头

```
/// <summary>
/// Contains the standard set of headers applicable to an HTTP response.
/// </summary>
public static class HttpResponseHeaders
{
    ///<summary>What partial content range types this server supports</summary>
    public const string AcceptRanges = "Accept-Ranges";
    ///<summary>The age the object has been in a proxy cache in seconds</summary>
    public const string Age = "Age";
    ///<summary>Valid actions for a specified resource. To be used for a 405 Method not allowed</summary>
    public const string Allow = "Allow";
    ///<summary>Tells all caching mechanisms from server to client whether they may cache this object. It is measured in seconds</summary>
    public const string CacheControl = "Cache-Control";
    ///<summary>Options that are desired for the connection[17]</summary>
    public const string Connection = "Connection";
    ///<summary>The type of encoding used on the data. See HTTP compression.</summary>
    public const string ContentEncoding = "Content-Encoding";
    ///<summary>The language the content is in</summary>
    public const string ContentLanguage = "Content-Language";
    ///<summary>The length of the response body in octets (8-bit bytes)</summary>
    public const string ContentLength = "Content-Length";
    ///<summary>An alternate location for the returned data</summary>
    public const string ContentLocation = "Content-Location";
    ///<summary>A Base64-encoded binary MD5 sum of the content of the response</summary>
    public const string ContentMD5 = "Content-MD5";
    ///<summary>An opportunity to raise a File Download dialogue box for a known MIME type with binary format or suggest a filename for dynamic content. Quotes are necessary with special characters.</summary>
    public const string ContentDisposition = "Content-Disposition";
    ///<summary>Where in a full body message this partial message belongs</summary>
    public const string ContentRange = "Content-Range";
    ///<summary>The MIME type of this content</summary>
    public const string ContentType = "Content-Type";
    ///<summary>The date and time that the message was sent</summary>
    public const string Date = "Date";
    ///<summary>An identifier for a specific version of a resource, often a message digest</summary>
    public const string ETag = "ETag";
    ///<summary>Gives the date/time after which the response is considered stale</summary>
    public const string Expires = "Expires";
    ///<summary>The last modified date for the requested object, inRFC 2822 format</summary>
    public const string LastModified = "Last-Modified";
    ///<summary>Used to express a typed relationship with another resource, where the relation type is defined by RFC 5988</summary>
    public const string Link = "Link";
    ///<summary>Used in redirection, or when a new resource has been created.</summary>
    public const string Location = "Location";
    ///<summary>This header is supposed to set P3P policy, in the form of P3P:CP=your_compact_policy. However, P3P did not take off,[22] most browsers have never fully implemented it, a lot of websites set this header with fake policy text, that was enough to fool browsers the existence of P3P policy and grant permissions for third party cookies.</summary>
    public const string P3P = "P3P";
    ///<summary>Implementation-specific headers that may have various effects anywhere along the request-response chain.</summary>
    public const string Pragma = "Pragma";
    ///<summary>Request authentication to access the proxy.</summary>
    public const string ProxyAuthenticate = "Proxy-Authenticate";
    ///<summary>Used in redirection, or when a new resource has been created. This refresh redirects after 5 seconds. This is a proprietary, non-standard header extension introduced by Netscape and supported by most web browsers.</summary>
    public const string Refresh = "Refresh";
    ///<summary>If an entity is temporarily unavailable, this instructs the client to try again after a specified period of time (seconds).</summary>
    public const string RetryAfter = "Retry-After";
    ///<summary>A name for the server</summary>
    public const string Server = "Server";
    ///<summary>an HTTP cookie</summary>
    public const string SetCookie = "Set-Cookie";
    ///<summary>A HSTS Policy informing the HTTP client how long to cache the HTTPS only policy and whether this applies to subdomains.</summary>
    public const string StrictTransportSecurity = "Strict-Transport-Security";
    ///<summary>The Trailer general field value indicates that the given set of header fields is present in the trailer of a message encoded with chunked transfer-coding.</summary>
    public const string Trailer = "Trailer";
    ///<summary>The form of encoding used to safely transfer the entity to the user. Currently defined methods are:chunked, compress, deflate, gzip, identity.</summary>
    public const string TransferEncoding = "Transfer-Encoding";
    ///<summary>Tells downstream proxies how to match future request headers to decide whether the cached response can be used rather than requesting a fresh one from the origin server.</summary>
    public const string Vary = "Vary";
    ///<summary>Informs the client of proxies through which the response was sent.</summary>
    public const string Via = "Via";
    ///<summary>A general warning about possible problems with the entity body.</summary>
    public const string Warning = "Warning";
    ///<summary>Indicates the authentication scheme that should be used to access the requested entity.</summary>
    public const string WWWAuthenticate = "WWW-Authenticate";       
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2019-01-04T06:52:30.597

[`Microsoft.Net.Http.Headers`](https://www.nuget.org/packages/Microsoft.Net.Http.Headers/)nuget 包中有一些可用的。在我的 asp.net 核心项目中，它已经安装了。

示例用法：

`var value = request.Headers[Microsoft.Net.Http.Headers.HeaderNames.IfNoneMatch]`

可能是一些人正在寻找的东西？

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-08-07T12:03:46.940

他们在[HttpKnownHeaderNames](https://github.com/dotnet/corefx/blob/master/src/Common/src/System/Net/HttpKnownHeaderNames.cs)中有它们，但不幸的是该类是内部的。我为它开了一个问题：[https](https://github.com/dotnet/corefx/issues/10632) ://github.com/dotnet/corefx/issues/10632 。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-06-14T16:35:08.027

Microsoft 为请求和响应标头创建了枚举。

看看以下内容：

[HttpResponseHeader](http://msdn.microsoft.com/en-us/library/system.net.httpresponseheader.aspx)

[HttpRequestHeader](http://msdn.microsoft.com/en-us/library/system.net.httprequestheader.aspx)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-06-12T16:23:44.440

扩展杰德的答案。

和[`HttpResponseHeader`](https://msdn.microsoft.com/en-us/library/system.net.httpresponseheader(v=vs.110).aspx)枚举[`HttpRequestHeader`](https://msdn.microsoft.com/en-us/library/system.net.httprequestheader(v=vs.110).aspx)可以在使用[`WebHeaderCollection`](https://msdn.microsoft.com/en-us/library/system.net.webheadercollection(v=vs.110).aspx). `WebHeaderCollection`包含接受这些枚举的索引器属性。

您可以使用字符串或枚举之一来获取和设置标头值，并在您的代码中混合使用。

示例 LinqPad 脚本：

```
var headers = new WebHeaderCollection();

headers["If-Modified-Since"] = "Sat, 29 Oct 1994 19:43:31 GMT"; 
// shows header name as "If-Modified-Since"
headers.Dump();
// shows expected header value of "Sat, 29 Oct 1994 19:43:31 GMT"
headers[HttpRequestHeader.IfModifiedSince].Dump();

headers.Clear();

headers[HttpRequestHeader.IfModifiedSince] = "Sat, 29 Oct 1994 19:43:31 GMT";
// shows header name as "If-Modified-Since"
headers.Dump(); 
// shows expected header value "Sat, 29 Oct 1994 19:43:31 GMT"
headers["If-Modified-Since"].Dump(); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-10-18T06:50:05.717

```
using System.Net.HttpRequestHeader;
using System.Net.HttpResponseHeader;

public class Example {
  static void Main() {
    Console.WriteLine(HttpRequestHeader.IfModifiedSince.ToHeaderString());
    // If-Modified-Since

    Console.WriteLine(HttpResponseHeader.ContentLength.ToHeaderString());
    // Content-Length
  }
}

static class ExtensionMethods {
  public static string ToHeaderString(this HttpRequestHeader instance)
  {
    return Regex.Replace(instance.ToString(), "(\\B[A-Z])", "-$1");
  }

  public static string ToHeaderString(this HttpResponseHeader instance)
  {
    return Regex.Replace(instance.ToString(), "(\\B[A-Z])", "-$1");
  }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-08-10T18:17:29.723

**[Microsoft.Net.Http.Headers.HeaderNames](https://github.com/dotnet/aspnetcore/blob/main/src/Http/Headers/src/HeaderNames.cs)类曾经是最好的**、开箱即用的选项。

但是从 ASP.NET Core 3.0 开始，该类具有静态只读字段而不是常量。原因是[比较的性能优化](https://github.com/dotnet/aspnetcore/pull/9341)：

1.  引用比较比字符串内容顺序不区分大小写的比较快。
2.  常量成为消费程序集的一部分，而静态字段则不然。因此，在不同程序集中对常量的使用之间的引用是不同的，而在更改之后，它们都是相同的。

这种优化的缺点是**“常量”不再是编译时常量**，因此不能用于例如属性（`[FromHeader(Name = HeaderNames.IfNoneMatch)]`）。

只需**在代码中创建自己的类副本**，使用实际常量而不是静态字段。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-03-04T21:01:46.243

如果您使用的是 .NET Framework（而不是 .NET Core），则可以创建一个扩展方法来正确格式化`System.Net.HttpRequestHeader`枚举：

```
using System;
using System.Net;
using System.Text;

namespace YourNamespace
{
   public static class HttpRequestHeaderEx
   {
      public static string ToStandardName(this HttpRequestHeader requestHeader)
      {
         string headerName = requestHeader.ToString();

         var headerStandardNameBuilder = new StringBuilder();
         headerStandardNameBuilder.Append(headerName[0]);

         for (int index = 1; index < headerName.Length; index++)
         {
            char character = headerName[index];
            if (char.IsUpper(character))
            {
               headerStandardNameBuilder.Append('-');
            }

            headerStandardNameBuilder.Append(character);
         }

         string headerStandardName = headerStandardNameBuilder.ToString();

         return headerStandardName;
      }
   }
} 
```

用法：

```
 var userAgentHeaderName = HttpRequestHeader.UserAgent.ToStandardName(); 
```

# collections - 以降序遍历 collections.Counter() 实例的 Pythonic 方式？

> ID：11037005
> 
> 赞同：58
> 
> 时间：2012-06-14T16:03:53.640
> 
> 标签：collections, iteration, python-2.7, python

在 Python 2.7 中，我想以递减计数顺序迭代一个`collections.Counter`实例。

```
>>> import collections
>>> c = collections.Counter()
>>> c['a'] = 1
>>> c['b'] = 999
>>> c
Counter({'b': 999, 'a': 1})
>>> for x in c:
        print x
a
b 
```

在上面的示例中，元素似乎按照它们添加到 Counter 实例的顺序进行迭代。

我想从最高到最低遍历列表。我看到 Counter 的字符串表示可以做到这一点，只是想知道是否有推荐的方法来做到这一点。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-06-14T16:06:17.167

您可以迭代`c.most_common()`以按所需顺序获取项目。另请参阅 的[文档`Counter.most_common()`](http://docs.python.org/library/collections.html#collections.Counter.most_common)。

例子：

```
>>> c = collections.Counter(a=1, b=999)
>>> c.most_common()
[('b', 999), ('a', 1)] 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-06-28T03:28:38.183

这是在 Python 集合中迭代 Counter 的示例：

```
>>>def counterIterator(): 
...  import collections
...  counter = collections.Counter()
...  counter.update(('u1','u1'))
...  counter.update(('u2','u2'))
...  counter.update(('u2','u1'))
...  for ele in counter:
...    print(ele,counter[ele])
>>>counterIterator()
u1 3
u2 3 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-05-02T16:48:14.623

您的问题已解决，只需返回降序，但这里是一般的方法。万一有人从谷歌来到这里，这就是我必须解决的问题。基本上，您上面所拥有的内容会返回 collections.Counter() 中字典的键。要获取值，您只需将密钥传递回字典，如下所示：

```
for x in c:
    key = x
    value = c[key] 
```

我有一个更具体的问题，我有字数，想过滤掉低频的。这里的诀窍是制作 collections.Counter() 的副本，否则当您尝试从字典中删除它们时，您将收到“RuntimeError：dictionary changed size during iteration”。

```
for word in words.copy():
    # remove small instance words
    if words[word] <= 3:
        del words[word] 
```

# c++ - 将现有的类结构移植到智能指针

> ID：11037011
> 
> 赞同：4
> 
> 时间：2012-06-14T16:04:11.113
> 
> 标签：c++, class, c++11, smart-pointers

我知道这个问题很长，但我不确定如何用更短的方式解释我的问题。问题本身是关于类层次结构设计的，特别是如何将基于指针的现有层次结构移植到使用智能指针的层次结构。如果有人能想出一些方法来简化我的解释，从而使这个问题更通用，请告诉我。这样，它可能对更多的 SO 读者有用。

我正在设计一个 C++ 应用程序来处理允许我读取一些传感器的系统。该系统由我收集测量值的远程机器组成。此应用程序实际上必须与两个不同的子系统一起工作：

1.  *聚合系统*：这种类型的系统包含几个组件，我从中收集测量结果。所有通信都通过聚合系统，如果需要，聚合系统会将数据重定向到特定组件（发送到聚合系统本身的全局命令不需要传输到单个组件）。

2.  *独立系统*：在这种情况下，只有一个系统，所有通信（包括全局命令）都发送到该系统。

接下来你可以看到我想出的类图：

![类图](../Images/34c41ff13c3bb20576cb505632359559.png)

独立系统继承自`ConnMgr`和`MeasurementDevice`。另一方面，聚合系统将其功能拆分为`AggrSystem`和`Component`。

基本上，作为用户，我想要的是一个`MeasurementDevice`对象并将数据透明地发送到相应的端点，无论是聚合系统还是独立系统。

**当前实施**

这是我目前的实现。首先，两个基本抽象类：

```
class MeasurementDevice {
public:
    virtual ~MeasurementDevice() {}
    virtual void send_data(const std::vector<char>& data) = 0;
};

class ConnMgr {
public:
    ConnMgr(const std::string& addr) : addr_(addr) {}
    virtual ~ConnMgr() {}
    virtual void connect() = 0;
    virtual void disconnect() = 0;

protected:
    std::string addr_;
}; 
```

这些是聚合系统的类：

```
class Component : public MeasurementDevice {
public:
    Component(AggrSystem& as, int slot) : aggr_sys_(as), slot_(slot) {}
    void send_data(const std::vector<char>& data) {
        aggr_sys_.send_data(slot_, data);
    }
private:
    AggrSystem& aggr_sys_;
    int slot_;
};

class AggrSystem : public ConnMgr {
public:
    AggrSystem(const std::string& addr) : ConnMgr(addr) {}
    ~AggrSystem() { for (auto& entry : components_) delete entry.second; }

    // overridden virtual functions omitted (not using smart pointers)

    MeasurementDevice* get_measurement_device(int slot) {
        if (!is_slot_used(slot)) throw std::runtime_error("Empty slot");
        return components_.find(slot)->second;
    }
private:
    std::map<int, Component*> components_;

    bool is_slot_used(int slot) const {
        return components_.find(slot) != components_.end();
    }
    void add_component(int slot) {
        if (is_slot_used(slot)) throw std::runtime_error("Slot already used");
        components_.insert(std::make_pair(slot, new Component(*this, slot)));
    }
}; 
```

这是独立系统的代码：

```
class StandAloneSystem : public ConnMgr, public MeasurementDevice {
public:
    StandAloneSystem(const std::string& addr) : ConnMgr(addr) {}

    // overridden virtual functions omitted (not using smart pointers)

    MeasurementDevice* get_measurement_device() {
        return this;
    }
}; 
```

这些是类似工厂的函数，负责创建`ConnMgr`和`MeasurementDevice`对象：

```
typedef std::map<std::string, boost::any> Config;

ConnMgr* create_conn_mgr(const Config& cfg) {
    const std::string& type =
        boost::any_cast<std::string>(cfg.find("type")->second);
    const std::string& addr =
        boost::any_cast<std::string>(cfg.find("addr")->second);

    ConnMgr* ep;
    if (type == "aggregated") ep = new AggrSystem(addr);
    else if (type == "standalone") ep = new StandAloneSystem(addr);
    else throw std::runtime_error("Unknown type");
    return ep;
}

MeasurementDevice* get_measurement_device(ConnMgr* ep, const Config& cfg) {
    const std::string& type =
        boost::any_cast<std::string>(cfg.find("type")->second);

    if (type == "aggregated") {
        int slot = boost::any_cast<int>(cfg.find("slot")->second);
        AggrSystem* aggr_sys = dynamic_cast<AggrSystem*>(ep);
        return aggr_sys->get_measurement_device(slot);
    }
    else if (type == "standalone") return dynamic_cast<StandAloneSystem*>(ep);
    else throw std::runtime_error("Unknown type");
} 
```

最后是这里`main()`，展示了一个非常简单的用例：

```
#define USE_AGGR

int main() {
    Config config = {
        { "addr", boost::any(std::string("192.168.1.10")) },
#ifdef USE_AGGR
        { "type", boost::any(std::string("aggregated")) },
        { "slot", boost::any(1) },
#else
        { "type", boost::any(std::string("standalone")) },
#endif
    };

    ConnMgr* ep = create_conn_mgr(config);
    ep->connect();

    MeasurementDevice* dev = get_measurement_device(ep, config);
    std::vector<char> data; // in real life data should contain something
    dev->send_data(data);

    ep->disconnect();
    delete ep;
    return 0;
} 
```

**拟议变更**

首先，我想知道是否有办法避免`dynamic_cast`in `get_measurement_device`。由于`AggrSystem::get_measurement_device(int slot)`和`StandAloneSystem::get_measurement_device()`具有不同的签名，因此不可能在基类中创建通用的虚拟方法。我正在考虑添加一个接受`map`包含选项的通用方法（例如，插槽）。在这种情况下，我不需要进行动态转换。*就更清洁的设计而言，第二种方法是否更可取？*

为了将类层次结构移植到我使用的智能指针`unique_ptr`。首先，我将`map`组件更改`AggrSystem`为：

```
std::map<int, std::unique_ptr<Component> > components_; 
```

添加一个新的`Component`现在看起来像：

```
void AggrSystem::add_component(int slot) {
    if (is_slot_used(slot)) throw std::runtime_error("Slot already used");
    components_.insert(std::make_pair(slot,
        std::unique_ptr<Component>(new Component(*this, slot))));
} 
```

为了返回 a`Component`我决定返回一个原始指针，因为对象的生命周期`Component`是由对象的生命周期定义的`AggrSystem`：

```
MeasurementDevice* AggrSystem::get_measurement_device(int slot) {
    if (!is_slot_used(slot)) throw std::runtime_error("Empty slot");
    return components_.find(slot)->second.get();
} 
```

*返回原始指针是正确的决定吗？*但是，如果我使用 a `shared_ptr`，那么我会在独立系统的实现中遇到问题：

```
MeasurementDevice* StandAloneSystem::get_measurement_device() {
    return this;
} 
```

在这种情况下，我无法返回`shared_ptr`using `this`。我想我可以创建一个额外的间接级别并具有类似的东西`StandAloneConnMgr`and `StandAloneMeasurementDevice`，其中第一个类将 a 保存`shared_ptr`到第二个的实例。

所以，总的来说，我想问一下在使用智能指针时这是否是一种好方法。是否最好使用 a `map`of`shared_ptr`并返回 a `shared_ptr`，还是基于使用`unique_ptr`所有权和原始指针访问的当前方法更好？

PS：`create_conn_mgr`并且`main`也进行了更改，因此`ConnMgr*`我现在使用`unique_ptr<ConnMgr>`. 我没有添加代码，因为问题已经足够长了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T23:30:50.687

> 首先，我想知道是否有办法避免get_measurement_device中的dynamic_cast。

我会尝试统一`get_measurement_device`签名，以便您可以将其作为基类中的虚拟函数。

> 所以，总的来说，我想问一下在使用智能指针时这是否是一种好方法。

我认为你做得很好。您基本上已经将您的“单一所有权”新闻和删除转换`unique_ptr`为相当机械的方式。这正是正确的第一步（也许是最后一步）。

我还认为您在返回原始指针方面做出了正确的决定，`get_measurement_device`因为在您的原始代码中，该函数的客户端没有获得该指针的所有权。当您不打算共享或转让所有权时处理原始指针是大多数程序员都会认可的一种很好的模式。

总之，您已经正确地将现有设计转换为使用智能指针，而无需更改设计的语义。

从这里开始，如果您想研究将设计更改为涉及共享所有权的设计的可能性，那么这是一个非常有效的下一步。我自己的偏好是更喜欢独特的所有权设计，直到用例或情况需要共享所有权。

唯一所有权不仅效率更高，而且更容易推理。这种易于推理通常会导致更少的意外循环内存所有权模式（循环内存所有权==泄漏内存）。每次看到指针时就敲击 shared_ptr 的编码人员更有可能以内存所有权周期告终。

话虽如此，循环内存所有权也可以仅使用`unique_ptr`. 如果发生这种情况，您需要`weak_ptr`打破循环，并且`weak_ptr`仅适用于`shared_ptr`. 因此，引入所有权周期是迁移到`shared_ptr`.

# azure - 批处理文件的 OnStart vs 启动脚本？

> ID：11037017
> 
> 赞同：1
> 
> 时间：2012-06-14T16:04:53.187
> 
> 标签：azure, cloud, azure-worker-roles

我有一个 Ruby on Rails 应用程序，它需要在 Azure Worker Role 中找到一个家。

我目前使用批处理文件自动部署应用程序 - 该文件获取 apache 和 ruby​​ 安装程序，运行它们，然后将 RoR 应用程序放在适当的目录中。批处理脚本完成后，Apache 通过端口 80 为应用程序提供服务。

我是 Azure 的新手，并试图弄清楚如何做到这一点。

据我了解，这里有两个选择：使用 Blob 存储中的安装文件启动 OnStart，或启动脚本。我不确定如何执行后者，但我在刚刚创建的新 Azure 项目中的 WorkerRole.vb 文件中找到了 onStart 方法。

我的问题：是否建议使用 OnStart 来部署应用程序（使用批处理脚本）？如果是这样，我将如何将脚本集成到项目中？并且 - 我如何开始在 blob 存储中存储和引用文件？

我知道这些都是超高级的问题。任何输入或建议阅读都会非常有帮助。我试图谷歌/搜索相关资源，但找不到太多。感谢您的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:34:09.120

当您在 OnStart() 函数中时，最好进行角色配置，例如 IP 绑定等，但是如果您想安装运行时、下载应用程序 zip、配置角色特定设置，最好使用启动任务。请访问我的博客[Windows Azure：启动任务或 OnStart()，该选择哪个？](http://blogs.msdn.com/b/avkashchauhan/archive/2011/10/22/windows-azure-startup-task-or-onstart-which-to-choose.aspx)了解更多信息。

现在，在您的情况下，最好使用启动任务。您可以执行以下操作：

1.  将您的 ROR 包创建一个 zip 并将其放在 Windows Azure Blob 存储中
2.  创建一个 Cmmmand 批处理文件，它将执行以下操作：

    2.1 下载压缩包

    2.2 将内容解压到指定位置

    2.3 将状态更新回 AZure Blob 存储（可选）

3.  在您的 OnStart() 函数中，您只需要配置 ROR

如果您将 TCP 端点名称“RORWeb80”设置为使用端口 80，则代码将如下所示：

```
TcpListener RoRPortListener = new TcpListener(RoleEnvironment.CurrentRoleInstance.InstanceEndpoints["RORWeb80"].IPEndpoint);
RoRPortListener.Start(); 
```

[我已经为基于 Tomcat/Java 的工作角色](http://tomcatazure.codeplex.com/)编写了一个示例应用程序，它的功能完全相同。所以你可以做的只是用 ROR ZIP 替换 Tomcat ZIP 文件并准确地重用代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T17:22:58.003

只要您不需要管理员级别的访问权限（例如修改注册表、安装 msi 等），您就可以从 进行设置`OnStart()`，包括启动您的脚本。只需将启动脚本包含在您的项目中（不要忘记将 Copy Local 设置为 true）。

启动脚本也是如此：你调用你的 cmd 文件，然后它会为你执行序列。如果你赋予它更高的权限，你可以运行安装程序、修改注册表设置、安装自定义性能计数器等等。

无论哪种情况：您可以将 apache zip、ruby 安装程序等保存在 blob 存储中，并在启动时将它们下载到本地存储。这使您免于在部署中捆绑所有内容，这为您带来了一些优势（能够在不重新部署的情况下更新 ruby​​ / apache、减小包大小等）。

codeplex 上有一个[示例应用程序](http://tomcatazure.codeplex.com/)，它演示了通过启动脚本设置 Tomcat 的基础知识。再举一个例子，您可以查看通过 Eclipse Windows Azure plugin for Java 安装的脚本。这些脚本非常相似。关键是有某种方法可以从 blob 存储中下载文件，然后解压缩它们。我提到的 codeplex 项目指向一个执行简单 blob 下载的示例应用程序。Eclipse 打包在 .vbs 应用程序中提供了类似的功能。这是我基于 Eclipse 的项目中的一个脚本的片段：

```
SET SERVER_DIR_NAME=apache-tomcat-7.0.25
SET WAR_NAME=myapp.war
rd "\%ROLENAME%"
mklink /D "\%ROLENAME%" "%ROLEROOT%\approot"
cd /d "\%ROLENAME%"
cscript /NoLogo util\unzip.vbs jre7.zip "%CD%"
cscript /NoLogo util\unzip.vbs tomcat7.zip "%CD%"
copy %WAR_NAME% "%SERVER_DIR_NAME%\webapps\%WAR_NAME%"
cd "%SERVER_DIR_NAME%\bin"
set JAVA_HOME=\%ROLENAME%\jre7
set PATH=%PATH%;%JAVA_HOME%\bin
cmd /c startup.bat 
```

codeplex 项目有一个外观相似的脚本。

不要忘记：您需要为您的角色设置一个输入端点（角色属性的一部分）。

要将 blob 放入 blob 存储，有免费工具（如 Clumsy Leaf [CloudXplorer）](http://clumsyleaf.com/products/cloudxplorer)和付费工具（如 Cerebrata 的 Cloud Storage Studio）。

要将 blob 下载到本地存储，您可以编写几行 .net 代码（来自 OnStart），或者只使用 codeplex 项目中指向的实用程序。

# javascript - 如何在特定子元素上使用 jquery 的 html()

> ID：11037025
> 
> 赞同：1
> 
> 时间：2012-06-14T16:05:43.797
> 
> 标签：javascript, jquery

我正在尝试对`html()`特定的孩子使用 jquery 的功能，例如：

```
<div id="main">
  <p>I am p tag</p>
  <span> i am span tag</span>
</div> 
```

现在，如果我们`$("#main").html()`同时使用它`p`，`span`但如果我只想要`p`，我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T16:06:30.257

尝试如下，

```
$("#main p").html() 
```

> 这会给我我是 p 标签，但我想要`<p> I am p tag</p>`

试试下面的outerHTML，

```
$('#main p')[0].outerHTML 
```

或者你可以把它做成 jQuery 函数，这样你就可以链接。

```
jQuery.fn.outerHTML = function(s) {
    var _this = this[0];
    return _this.outerHTML?_this.outerHTML:(s ? this.before(s).remove() : jQuery("<p>").append(this.eq(0).clone()).html());
};

$('#main p').outerHTML() 
```

**演示：http:** [//jsfiddle.net/skram/PMjKR/1/](http://jsfiddle.net/skram/PMjKR/1/)

**参考：** [获取选定元素的外部 HTML](https://stackoverflow.com/questions/2419749/get-selected-elements-outer-html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T16:10:26.227

许多方法取决于您的确切要求。

标准 CSS 选择器：

```
$('#main p').html(); 
```

过滤儿童。

```
$('#main').children('p').html(); 
```

通过获取 main 的第一个孩子

```
$('#main:first-child').html(); 
```

**在看到 OP 对另一个答案的评论后进行编辑** ，我将简单地添加 html() 替换为 [0].outerHTML 的位置

[在这里](http://api.jquery.com/category/selectors/)查看选择器

# javascript - 使用 Jquery 确定语言切换

> ID：11037032
> 
> 赞同：3
> 
> 时间：2012-06-14T16:06:16.323
> 
> 标签：javascript, jquery, client-side

在文本框中键入时，如何使用 Jquery 确定语言切换（按键盘上的 alt+shift）？

我想找到新的语言！

**编辑：**

我也可以为所有操作系统的所有浏览器使用 javascript

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T18:54:36.667

**简短回答：**不，您无法确定。

**长答案：**

没有跨浏览器的方法来检测用户语言，更不用说检测对它的更改。

Internet Explorer 有一些方法可以为您提供此类信息（[使用客户端功能](http://msdn.microsoft.com/en-us/library/ms902315.aspx)）：

*   **navigator.browserLanguage**，操作系统语言：

    [IE browserLanguage 属性文档](http://msdn.microsoft.com/en-us/library/ie/ms533542%28v=vs.85%29.aspx)或[MSDN browserLanguage 属性文档](http://msdn.microsoft.com/en-us/library/ms533542%28VS.85%29.aspx)

*   **navigator.systemLanguage**，控制面板中 Regions Options 中的语言：

    [IE系统语言属性文档](http://msdn.microsoft.com/en-us/library/ie/ms534653%28v=vs.85%29.aspx)或[MSDN系统语言属性文档](http://msdn.microsoft.com/en-us/library/ms534653%28VS.85%29.aspx)

*   **navigator.userLanguage**，操作系统语言：

    [MSDN userLanguage 属性文档](http://msdn.microsoft.com/en-us/library/ms534713%28VS.85%29.aspx)

* * *

据我所知，这些不适用于其他浏览器，因此依赖于：

*   **window.navigator.language**返回浏览器的语言版本。

    [MDN window.navigator.language 文档](https://developer.mozilla.org/en/Navigator.language)

* * *

根据 MDN 的[浏览器兼容性表](https://developer.mozilla.org/en/Navigator.language#Browser_compatibility)，这应该适用于所有现代浏览器版本：

```
var lang = window.navigator.userLanguage || window.navigator.language;
alert(lang); 
```

* * *

在阅读了一些关于此内容以了解是否有新信息浮出水面后，我发现有人说上面的代码将返回 Microsoft Windows 的区域设置：

请参阅此[Stackoverflow 答案](https://stackoverflow.com/a/4079798/352449)和[她所指的问题](https://stackoverflow.com/q/1043339/352449)

因此，我在**Windows XP Profissional 版本 2002 Service Pack 3**下通过在 pt-PT 和 en_gb 之间切换`alt`+进行了一个简单的测试：`shift`

请参阅此[工作小提琴示例](http://jsfiddle.net/zuul/KfdpF/)！

## 1)

打开浏览器，将系统区域设置设置为 pt-PT：

```
╭──────────────────────────────────╥──────────────────┬─────────────┬─────────╮
│ Browser                          ║ Browser UI Lang  │ System Lang │ Alerted │
╞══════════════════════════════════╬══════════════════╪═════════════╪═════════╡
│ Internet Explorer 8.0.6001.18702 ║        PT        │    pt-PT    │  en-gb  │
├──────────────────────────────────╫──────────────────┼─────────────┼─────────┤
│ Opera 11.62                      ║        PT        │    pt-PT    │   pt    │
├──────────────────────────────────╫──────────────────┼─────────────┼─────────┤
│ Firefox 3.6.16                   ║        PT        │    pt-PT    │  pt-PT  │
├──────────────────────────────────╫──────────────────┼─────────────┼─────────┤
│ Safari 5.1.2                     ║        PT        │    pt-PT    │  pt-PT  │
├──────────────────────────────────╫──────────────────┼─────────────┼─────────┤
│ Google Chrome 18.0.1025.168 m    ║        PT        │    pt-PT    │  pt-PT  │
╰──────────────────────────────────╨──────────────────┴─────────────┴─────────╯ 
```

## 2)

打开系统区域设置为 en-gb 的浏览器：

```
╭──────────────────────────────────╥──────────────────┬─────────────┬─────────╮
│ Browser                          ║ Browser UI Lang  │ System Lang │ Alerted │
╞══════════════════════════════════╬══════════════════╪═════════════╪═════════╡
│ Internet Explorer 8.0.6001.18702 ║        PT        │    pt-PT    │  en-gb  │
├──────────────────────────────────╫──────────────────┼─────────────┼─────────┤
│ Opera 11.62                      ║        PT        │    pt-PT    │   pt    │
├──────────────────────────────────╫──────────────────┼─────────────┼─────────┤
│ Firefox 3.6.16                   ║        PT        │    pt-PT    │  pt-PT  │
├──────────────────────────────────╫──────────────────┼─────────────┼─────────┤
│ Safari 5.1.2                     ║        PT        │    pt-PT    │  pt-PT  │
├──────────────────────────────────╫──────────────────┼─────────────┼─────────┤
│ Google Chrome 18.0.1025.168 m    ║        PT        │    pt-PT    │  pt-PT  │
╰──────────────────────────────────╨──────────────────┴─────────────┴─────────╯ 
```

## 3)

`alt`在浏览器已经打开的情况下，用+`shift`在 pt-PT 和 en_gb 之间切换：

```
╭──────────────────────────────────╥──────────────────┬─────────────┬─────────╮
│ Browser                          ║ Browser UI Lang  │ System Lang │ Alerted │
╞══════════════════════════════════╬══════════════════╪═════════════╪═════════╡
│ Internet Explorer 8.0.6001.18702 ║        PT        │    pt-PT    │  en-gb  │
├──────────────────────────────────╫──────────────────┼─────────────┼─────────┤
│ Opera 11.62                      ║        PT        │    pt-PT    │   pt    │
├──────────────────────────────────╫──────────────────┼─────────────┼─────────┤
│ Firefox 3.6.16                   ║        PT        │    pt-PT    │  pt-PT  │
├──────────────────────────────────╫──────────────────┼─────────────┼─────────┤
│ Safari 5.1.2                     ║        PT        │    pt-PT    │  pt-PT  │
├──────────────────────────────────╫──────────────────┼─────────────┼─────────┤
│ Google Chrome 18.0.1025.168 m    ║        PT        │    pt-PT    │  pt-PT  │
╰──────────────────────────────────╨──────────────────┴─────────────┴─────────╯ 
```

结果总是一样的，甚至在windows 7 Home Premium SP1 Native EN with region to PT下试过这个，执行上述练习，但结果是一样的。

据我所知，并通过执行的测试证明，您无法通过用户代理语言进入系统语言，甚至无法通过使用 JavaScript 或任何依赖库检测到它的更改。

**作为旁注：**

已经提到的 stackoverflow 问题涵盖了与我也用来执行一些[测试的](http://jsfiddle.net/zuul/KfdpF/1/)[hack 解决方法](https://stackoverflow.com/a/3335420/352449)类似的问题，但最终结果是相同的，返回的语言与+组合应用的语言不匹配。`alt``shift`

stackoverflow 上的其他问题以及经过深入的 Google 搜索后也变成空的。

# jqgrid - 如何在 jqgrid 中导航

> ID：11037039
> 
> 赞同：0
> 
> 时间：2012-06-14T16:06:42.033
> 
> 标签：jqgrid, jqgrid-asp.net, jqgrid-formatter

我是 jqgrid 的初学者，我编写此代码用于创建和填充 jqgrid（我在 asp.net 中使用存储库 pattrn）

```
 namespace Clearance.Helper
    {
        using System;
        public class JQGridRow
        {
            public int id;
            public string[] cell;
        }
    }

    namespace Clearance.Helper
    {
        public class JQGridResults
        {
            public int Page { get; set; }
            public int Total { get; set; }
            public int Records { get; set; }
            public JQGridRow[] rows;
        }
     }

namespace Clearance.Business
{
    using System;
    using System.Linq;
    using Model;
    using Clearance.Repository;
    using System.Collections.Generic;
    using System.Web.Script.Serialization;
    using Clearance.Helper;
    public class TransportTypesBusiness : GenericBusiness<CLEARANCEEntities, TRANSPORT_TYPES>
    {

    public List<TRANSPORT_TYPES> GetAll(int pageSize, int pageIndex)
            {
                var repository = new TransportTypesRepository(this.Context);
                return (List<TRANSPORT_TYPES>) repository.GetAll().OrderBy(c => c.TRANSPORT_ID).Skip(pageIndex * pageSize).Take(pageSize);
            }

     public string BuildJQGridResults(int numberOfRows = 0, int pageIndex = 0, int totalRecords = 0)
            {
                var result = new JQGridResults();
                var rows = new List<JQGridRow>();
                var list = GetAll(numberOfRows, pageIndex);
                int li = list.Count();
                totalRecords = list.Count();
                foreach (var item in list)
                {
                    var row = new JQGridRow { id = item.TRANSPORT_ID, cell = new string[4] };
                    row.cell[0] = item.TRANSPORT_ID.ToString();
                    row.cell[1] = item.TRANSPORT_NAME;
                    row.cell[2] = item.TRANSPORT_ABBR;
                    row.cell[3] = item.REMARK;
                    rows.Add(row);
                }
                result.rows = rows.ToArray();
                if ((numberOfRows != 0) && (pageIndex != 0) && (totalRecords != 0))
                {
                    result.Page = pageIndex;
                    result.Total = (totalRecords + numberOfRows - 1) / numberOfRows;
                    result.Records = totalRecords;
                }

                return new JavaScriptSerializer().Serialize(result);
            }
}} 
```

和js代码

```
 $(function () {
                var grid = $('#list');
                grid.jqGrid({
                    url: 'jQGridHandler.ashx',
                    editurl: 'jQGridHandler.ashx',
                    postData: { ActionPage: 'TransportType', Action: 'Fill' },
                    ajaxGridOptions: { cache: false },

                    datatype: 'json',
                    height: 'auto',
                    colNames: ['TRANSPORT_ID', 'TRANSPORT_NAME', 'TRANSPORT_ABBR', 'REMARK'],
                    colModel: [
                            { name: 'TRANSPORT_ID', index: 'TRANSPORT_ID', key: true, hidden: true, editable: false },
                            { name: 'TRANSPORT_NAME', width: 200, sortable: true, editable: true },
                            { name: 'TRANSPORT_ABBR', width: 100, sortable: true, editable: true },
                            { name: 'REMARK', width: 100, sortable: true, editable: true }
                           ],
                    rowNum: 10,
                    rowList: [10, 20, 30],
                    pager: '#pager',
                    prmNames: { nd: null },
                    gridview: true,
                    sortname: 'TRANSPORT_ID',
                    viewrecords: true,
                    caption: '',
                    rownumbers: true

                }); 
```

当 jqgrid 加载数据集当前页面为 0 并且图标 next 并且启用 privice 时。请帮我。谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T18:30:09.563

页码的问题很容易解决。该类`JQGridResults`具有属性`Page`、和`Total`，但 jqGrid 等待的默认名称是、和。因此，这是唯一可以正确读取的属性。`Records``rows``page``total``records``rows``rows`

要解决此问题，您可以在 jqGrid 中重命名属性`JQGridResults`或在 jqGrid 中包含以下附加参数：

```
jsonReader: {page: "Page", total: "Total", records: "Records"} 
```

有关jqGrid 和 ASHX 处理程序的使用的更多附加信息（包括完整的 Visual Studio[演示项目），您可以在](http://www.ok-soft-gmbh.com/jqGrid/jqGridASHX.zip)[答案](https://stackoverflow.com/a/10871428/315935)中找到。

# scheme - 《老谋深算》中的长度函数

> ID：11037042
> 
> 赞同：5
> 
> 时间：2012-06-14T16:06:44.277
> 
> 标签：scheme, seasoned-schemer

我一直在阅读 The Seasoned Schemer 并且遇到了*长度*函数的这个定义

```
(define length
  (let ((h (lambda (l) 0)))
    (set! h (L (lambda (arg) (h arg))))
    h)) 
```

后来他们说：

> (L (lambda (arg) (h arg))) 的值是多少？这是功能

```
(lambda (l)
  (cond ((null? l) 0)
     (else (add1 ((lambda (arg) (h arg)) (cdr l)))))) 
```

我不认为我完全理解这一点。我想我们应该把***L***定义为一个练习。我使用 letrec在*长度*定义中写了**L**的定义。这是我写的：

 *```
(define length
  (let ((h (lambda (l) 0)))
    (letrec ((L
              (lambda (f)
                (letrec ((LR
                          (lambda (l)
                            (cond ((null? l) 0)
                                  (else
                                   (+ 1 (LR (cdr l))))))))
                  LR))))                  
    (set! h (L (lambda (arg) (h arg))))
    h))) 
```

因此，**L**将一个函数作为其参数，并将另一个函数作为值返回，该函数将一个列表作为其参数并在列表上执行递归。我的解释是正确的还是完全错误的？无论如何定义有效

```
 (length (list 1 2 3 4))  => 4 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T16:43:57.410

在“The Seasoned Schemer”`length`中，最初是这样定义的：

```
(define length
  (let ((h (lambda (l) 0)))
    (set! h (lambda (l)
              (if (null? l)
                  0
                  (add1 (h (cdr l))))))
    h)) 
```

在本书的后面，前面的结果被概括并`length`重新定义为`Y!`（应用顺序，命令式 Y 组合子），如下所示：

```
(define Y!
  (lambda (L)
    (let ((h (lambda (l) 0)))
      (set! h (L (lambda (arg) (h arg))))
      h)))

(define L
  (lambda (length)
    (lambda (l)
      (if (null? l)
          0
          (add1 (length (cdr l)))))))

(define length (Y! L)) 
```

问题中显示的第一个定义`length`只是一个中间步骤-使用与`L`上面定义的过程完全相同的过程，您不应该重新定义它。本章这一部分的目的是达到我的答案中显示的第二个定义。*

# javascript - Javascript - 重复的 if 语句不起作用

> ID：11037045
> 
> 赞同：0
> 
> 时间：2012-06-14T16:06:56.547
> 
> 标签：javascript, random

我的代码有效（不会失败），但它没有做正确的事情。

每次我想生成一个新的“块”时，我都会调用“生成”函数，每次调用时都会将一个新数字传递给函数。它可以很好地生成块，但它不会生成我希望它生成的内容。

如果上一代是空格，我希望它生成空格、跳跃、幻灯片或间隙。但如果上一代不是空间，则生成空间。它不这样做。它有时会产生 2 个间隙、2 个跳跃或 2 个幻灯片，我不知道为什么......？

这是我的代码：

```
var ptg = 'space'; // what was previously generated to top
var wtgt; // what is currently being generated to top
var chunktogenerateto = 0;

function generate(a){
    chunktogenerateto = a;

    var rand1 = Math.floor(Math.random()*100) + 1;

    if(ptg == 'space' && rand1 <= 25){
        wtgt = 'space';
    }
    else if(ptg == 'space' && rand1 <= 50 && rand1 > 25){
        wtgt = 'jump';
    }
    else if(ptg == 'space' && rand1 <= 75 && rand1 > 50){
        wtgt = 'slide';
    }
    else if(ptg == 'space' && rand1 > 75){
        wtgt = 'gap';
    }
    else{
        wtgt = 'space';
    }

    ptg = wtgt;

    topGen(wtgt);
}

function topGen(g){
    document.getElementById('t' + chunktogenerateto).setAttribute('src','images/terrain/t' + g + '.png');
} 
```

我希望这不是一个错字...帮助！

“生成”的调用来自：

```
var chunkpos = new Array();
chunkpos[0] = -100;
chunkpos[1] = 0;
chunkpos[2] = 100;
chunkpos[3] = 200;
chunkpos[4] = 300;
chunkpos[5] = 400;
chunkpos[6] = 500;
chunkpos[7] = 600;
chunkpos[8] = 700;
chunkpos[9] = 800;
chunkpos[10] = 900;
chunkpos[11] = 1000;
var temppos = new Array();
var time1;
var millis1;
var time2;
var millis2;
var millis3;
var firstreset = true;
var pos;
var poschange;

function moveLevel(){
    if(firstreset == true){
        resetTime();
    }
    var time2 = new Date();
    var millis2 = time2.getTime();
    var millis3 = millis2 - millis1;
    poschange = Math.floor(millis3 / 5);
    for(i = 0; i < chunkpos.length; i++){
        temppos[i] = chunkpos[i] - poschange;
        if(temppos[i] <= -150){
            generate(i);
            temppos[i] += 1200;
        }
        pos = temppos[i];
        document.getElementById('chunk' + i).setAttribute('style','left: ' + pos + 'px;');
    }
}

function resetTime(){
    time1 = new Date();
    millis1 = time1.getTime();
    if(firstreset != true){
        for(i = 0; i < chunkpos.length; i++){
            chunkpos[i] = temppos[i];
        }
    }
    firstreset = false;
    setTimeout('resetTime()',1000);
} 
```

对“moveLevel”的调用来自：

```
window.onload = function(){
    if(test = 'runnable')
    {
        gameLoop();
    }
    else
    {
        document.getElementById('gm').innerHTML = (gm + 'Failed to run game.');
    }
}

function gameLoop(){
    if(currentscreen == 'playing'){
        moveLevel();
    }
    setTimeout('gameLoop()',0);
} 
```

这是包含所有代码的 zip 文件的下载链接： [ParkourFreak.zip](http://alpha-st.com/gabor/scripts/ParkourFreak.zip) 我遇到问题的代码位于 scripts/generation.js 下。主游戏页面（生成可见的地方是 index.html。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:18:57.943

而不是每个以“if（ptg == 'space' ... etc”开头的if语句） - 首先在一个简单的“if not space return space”中执行此操作。

之后你可以开始你的随机 - 这应该适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T16:25:30.853

```
// elsewhere
var wtgts = ['space','jump','slide','gap'];

// in the function
if(ptg !== 'space') {
    wtgt = 'space';
} else {
    var randidx = Math.floor(Math.random()*4);
    wtgt = wtgts[randidx];
} 
```

甚至在函数中：

```
var newidx = (ptg == 'space') ? Math.floor(Math.random()*4) : 0;
wtgt = wtgts[newidx]; 
```

1.  权重是相等的，所以只需从 0 到 3 中选择一个随机索引，然后使用它从数组中选择一个动作。
2.  将 ptg 的逻辑分隔为空间，以便您只测试一次
3.  考虑将动作表示为数字而不是字符串，因为分配、比较等会更快、更健壮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T00:11:20.230

我认为问题出在一代人身上，而事实上我所要做的就是改变这一点：

```
if(temppos[i] <= -100){
    generate(i);
    temppos[i] += 1200;
} 
```

对此：

```
if(temppos[i] <= -100){
    generate(i);
    chunkpos[i] += 1200;
    temppos[i] += 1200;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T16:15:09.313

大约四分之一的时间你以前有一个空间，它会创建另一个，因为这段代码：

```
if(ptg == 'space' && rand1 <= 25){
    wtgt = 'space';
} 
```

请注意，它是在先前创建空间时创建空间。

* * *

边注：

`&& rand1 > 25`这条线上不需要：

```
else if(ptg == 'space' && rand1 <= 50 && rand1 > 25){ 
```

既然你以前有过`if(ptg == 'space' && rand1 <= 25){`，那条线就不可能`rand1`是`<= 25`when `ptg == 'space'`。

（同样`&& rand2 > 50`在以下条件下。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T16:19:46.440

你确定你在增加`chunktogenerateto`？

当前代码似乎保持在 0，是在您未显示的段中吗？

编辑：哦，这是函数的参数。尝试记录该变量，也许这就是问题所在？

# ruby-on-rails - 为什么不将参数传递给 authlogic 的 UserSession.find 函数

> ID：11037050
> 
> 赞同：0
> 
> 时间：2012-06-14T16:07:18.883
> 
> 标签：ruby-on-rails, authlogic

要在 authlogic 中查找用户会话，您可以调用`UserSession.find`（或您命名的任何名称`UserSession`）。是否能够在`UserSession`不提供参数（类似`UserSession.find(params['session_id']`）的情况下找到正确的 Rails 事物或 authlogic 是否覆盖了`find`功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:36:00.880

UserSession 不是 ActiveRecord 模型。相反，它继承自`Authlogic::Session::Base`. 这为它提供了类似于 ORM 的方法。[authlogic 文档](https://github.com/binarylogic/authlogic#quick-rails-example)状态：

```
What if creating sessions worked like an ORM library on the surface… 
```

该`find`方法在[此处](https://github.com/binarylogic/authlogic/blob/master/lib/authlogic/session/persistence.rb#L36-L45)的 authlogic 代码库中定义，它只是探测会话存储（通常是 cookie）以查看用户是否已登录。

# android - 制作 2 路接触式同步适配器

> ID：11037053
> 
> 赞同：0
> 
> 时间：2012-06-14T16:07:32.610
> 
> 标签：android, android-contacts, android-syncadapter

你好亲爱的Stackoverflowers！

我在 Android 2.3.3 的 CardDAV 同步源上工作，但我不明白一个想法。我仔细阅读了有关 samplesyncadaptater 的文档，该文档仅适用于从远程服务器读取联系人。
但在我的情况下，我正在尝试添加一个源，既可以从服务器读取联系人，也可以将联系人写入服务器。

此时：
- 当您要在 Android 中添加同步源时，会出现我的项目。
- 我可以参数化我的来源和身份验证工作
- 当我转到联系人应用程序并转到帐户可见性选项时（菜单名称取决于您的手机 rom）我可以选择我的来源以显示其联系人
- 但是当我尝试创建联系人时，只提供了我的gmail和outlook源码。也许我错过了我需要的各种 xml 文件中的某些内容。

请帮我把我不同的xml文件...

这是***Manifest.xml***

```
<?xml version="1.0" encoding="utf-8"?>
<manifest package="android.carddav"
android:versionCode="1"
android:versionName="1.0" xmlns:android="http://schemas.android.com/apk/res/android">
    <uses-permission
    android:name="android.permission.GET_ACCOUNTS" />
<uses-permission
    android:name="android.permission.USE_CREDENTIALS" />
<uses-permission
    android:name="android.permission.MANAGE_ACCOUNTS" />
<uses-permission
    android:name="android.permission.AUTHENTICATE_ACCOUNTS" />
<uses-permission
    android:name="android.permission.INTERNET" />
<uses-permission
    android:name="android.permission.WRITE_SETTINGS" />
<uses-permission 
    android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission
    android:name="android.permission.WRITE_SECURE_SETTINGS" />
<uses-permission
    android:name="android.permission.READ_CONTACTS" />
<uses-permission
    android:name="android.permission.WRITE_CONTACTS" />
<uses-permission
    android:name="android.permission.READ_SYNC_STATS" />
<uses-permission
    android:name="android.permission.READ_SYNC_SETTINGS" />
<uses-permission
    android:name="android.permission.WRITE_SYNC_SETTINGS" />

<uses-sdk android:minSdkVersion="10" />

<application
    android:icon="@drawable/icon"
    android:label="@string/app_name" >
    <service
        android:name=".authenticator.AuthenticationService"
        android:exported="true">
        <intent-filter>
            <action
                android:name="android.accounts.AccountAuthenticator" />
        </intent-filter>
        <meta-data
            android:name="android.accounts.AccountAuthenticator"
            android:resource="@xml/authenticator" />
    </service>
    <service
        android:name=".syncadapter.SyncService"
        android:exported="true" android:enabled="true">
        <intent-filter>
            <action
                android:name="android.content.SyncAdapter" />
        </intent-filter>
        <meta-data
            android:name="android.content.SyncAdapter"
            android:resource="@xml/syncadapter" />

    </service>
    <activity
        android:name=".authenticator.CardDAVActivity"
        android:label="@string/app_name" 
        android:excludeFromRecents="true">
    </activity>
</application>
</manifest> 
```

这是***syncadaptater.xml***：

最后是***authenticationator.xml***：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:58:05.243

我的回应是： [https](https://stackoverflow.com/a/11153652/1195001) ://stackoverflow.com/a/11153652/1195001 您需要使用所需的数据字段创建一个活动，并使用链接中的意图过滤器调用它。

# batch-file - 使用批处理创建单词列表

> ID：11037054
> 
> 赞同：0
> 
> 时间：2012-06-14T16:07:33.110
> 
> 标签：batch-file

我想制作一个批处理文件，将数字和字母组合的列表打印到文本文件中。
使用 { `0`, ..., `9`, `a`, ..., `z`, `A`, ..., `Z`} 作为我的字符池，我有 62 个唯一字符。
字长从 1 开始并增加到预定值。

脚本从 开始`length = 1`并打印`0`到`Z`.
然后它继续`length = 2`并打印`00`到`ZZ`，依此类推......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T08:55:07.333

这是一个更快的迭代解决方案。

无需呼叫。每个排列只生成一次。

我能够在不到 5 分钟的时间内生成长度为 4 的超过 1500 万个排列。

```
@echo off
setlocal enableDelayedExpansion
set chars=0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ
set maxPos=61
del output.txt 2>nul

>prior.txt echo(""
for /l %%I in (1 1 %1) do (
  >new.txt (
    for /f %%A in (prior.txt) do for /l %%N in (0 1 %maxPos%) do echo(%%~A!chars:~%%N,1!
  )
  type new.txt>>output.txt
  move /y new.txt prior.txt >nul
)
del prior.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T16:44:52.600

也许这就是你想要的？

**测试.BAT**

```
@echo off
set charPool=_0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ
set charLen=62
(for /L %%a in (1,1,%1) do (
   set permutation=
   call :makePermutation %%a
)) > textfile.txt
goto :EOF

:makePermutation level
setlocal EnableDelayedExpansion
set lastPermutation=%permutation%
for /L %%i in (1,1,%charLen%) do (
   set permutation=!lastPermutation!!charPool:~%%i,1!
   if %1 gtr 1 (
      set /A newLevel=%1-1
      call :makePermutation !newLevel!
   ) else (
      echo(!permutation!
   )
)
exit /B 
```

批处理文件必须以数字作为参数开始，该参数是单位长度。

例如在使用`TEST.BAT 1`文本文件时`textfile.txt`包含 62 行。

注意从0到ZZ`TEST.BAT 2`生成3906个组合（严格来说是统计意义上的*排列*`TEST.BAT 3`），从0到ZZZ生成242234个组合！

估计文本文件中字符串数（文件大小）的计算示例：

`TEST.BAT`使用`5`as 参数运行产生

```
62 ^ 5 + 62 ^ 4 + 62 ^ 3 + 62 ^ 2 + 62 ^ 1 = 931.151.402 
```

文本文件中的字符串。

# javascript - 无法从我网站的根目录读取我的 cookie

> ID：11037057
> 
> 赞同：1
> 
> 时间：2012-06-14T16:08:09.723
> 
> 标签：javascript

我成功地在一个页面上使用 javascript 设置了一个 cookie，如下所示：.. 我去了这篇文章并从中获取了代码： **更新：**

```
**http://techpatterns.com/downloads/javascript_cookies.php** 
```

该代码有效..但我只能从一页设置和读取我的cookie，当我转到文档根目录时，cookie不再可用..

当我在目录的子文件夹中时，我设置了我的 cookie

我也试图这样设置：

```
 document.cookie =
      "landing_page_ref=" + encodeURIComponent("FBLND1") +
    "; path=/; " ; 
```

但我不知道我错在哪里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T16:12:25.200

没有办法根据关闭浏览器来设置 cookie 过期并有过期时间。该功能由用户的浏览器决定。如果他们将其设置为在关闭时清除 cookie，那么无论过期时间如何，它都会删除您的 cookie。

您最好的选择是将 cookie 设置为相对较短的生命周期（例如 30 分钟左右）并在每次页面查看时刷新该 cookie。这将允许您在您的网站上闲置 30 分钟后使 cookie 过期。这并不完全相同，但由于无法强制执行您要查找的内容，因此紧随其后。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T16:26:50.570

会话 cookie（在浏览器关闭时被删除）是通过不指定明确的过期时间来创建的。

```
function setSessionCookie(c_name,value,exdays) {
    document.cookie=c_name + "=" + escape(value);
} 
```

也就是说，我会使用[一个强大的 cookie 库](https://github.com/carhartl/jquery-cookie)来处理 cookie，而不是尝试自己动手。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-11T04:48:59.083

有两种类型的 cookie。持久和会话。使用会话cookie。每当您关闭浏览器时，这些 cookie 就会过期。要将持久 cookie 转换为会话 cookie，只需跳过过期时间。

# php - 如何使用 PHP 和 JQuery 开发基于 Web 的 XMPP 聊天工具？

> ID：11037062
> 
> 赞同：8
> 
> 时间：2012-06-14T16:08:18.040
> 
> 标签：php, xmpp, websocket, chat

我正在寻找开发一个网站，该网站具有网站访问者和网站管理员之间的聊天功能。

我知道最好的方法是使用 XMPP，但是我没有使用它的经验。我希望使用 PHP 来实现它。

我已经下载了 XMPPHP 并编辑了一个示例以在 GMail 中向我的 Google Chat 客户端发送消息，但是当我回复 Google 时告诉我另一端没有收到消息。

到目前为止，信息最丰富的教程是[http://www.ibm.com/developerworks/xml/tutorials/x-realtimeXMPPtut/](http://www.ibm.com/developerworks/xml/tutorials/x-realtimeXMPPtut/)但我不明白为什么我需要安装“Openfire”也不想建立网站在我的本地机器上。

有人可以告诉我我需要什么（更重要的是，为什么）来设置这个项目，这样我就可以开始为它构建代码了吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T21:24:40.897

从对其他答案的评论来看，我将告诉你为什么，以及一些什么，但不会给你一个解决方案，因为我在“相关”侧边栏中看到了大量的解决方案。您必须选择正确的，并且通过了解“原因”，您将能够做出有根据的决定。

为了让聊天感觉正确，响应必须有一些即时性。随着时间的推移，用户会注意到一秒钟的时间延迟，并给人一种不合时宜的感觉。要在浏览器中进行即时或“实时”响应，需要持久连接，以便当新信息进入时，它会立即显示出来。

由于 HTTP 的请求/响应规范，浏览器中的持久连接很困难。有一些规范可以为浏览器带来持久连接，但这些浏览器并不普遍。未来持久连接将由[WebSockets](http://en.wikipedia.org/wiki/WebSocket)和[SPDY](http://en.wikipedia.org/wiki/SPDY)提供，这两者都可以在最新版本的 Chrome、Safari 和 FireFox 中使用，但 IE 有点滞后。

持久连接的另一个选项是[XMPP](http://en.wikipedia.org/wiki/XMPP)。XMPP 是用于 Jabber 聊天客户端的协议。由于它是一个开源实现，它已被移植到许多其他用途。JavaScript 库允许您将浏览器连接到 XMPP 套接字并侦听新消息。我过去看到的方法是将消息发送到 Web 服务器，然后让 Web 服务器将新消息告诉 XMPP 服务器，然后 XMPP 服务器将新消息广播给所有用户。但是，这需要一个 XMPP 服务器，这增加了系统的复杂性。

大多数用户并不处于浏览器版本的前沿，因此您需要能够处理较旧的浏览器。大多数替代方案涉及打开与服务器的长期运行连接，该连接在新数据到达时响应。以下是在旧浏览器中模拟持久连接的方法列表：

*   Adobe Flash 插座
*   ActiveX HTML 文件 (IE)
*   服务器发送事件 (Opera)
*   多部分编码的 XHR
*   XHR 长轮询

这些较旧的方法和 WebSockets 由一个名为[Juggernaut](https://github.com/maccman/juggernaut)的库支持。

***UPDATE*** [Juggernaut 已被维护者弃用，](http://blog.alexmaccaw.com/killing-a-library)原因很充分：现代浏览器通过称为服务器发送事件 (SSE) 的规范支持开箱即用的持久连接（当然 IE 除外）。向后兼容性现在由 polyfills 处理（[什么是 polyfill？](http://remysharp.com/2010/10/08/what-is-a-polyfill/)），正如弃用帖子所指出的，有几个很好的方法可以将 SSE 引入旧版浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T16:36:59.617

有很多资源可以帮助您解决这个问题。快速的 Google 搜索会显示以下内容：

[http://sixrevisions.com/tools/10-free-website-chat-widgets-to-make-your-site-interactive/](http://sixrevisions.com/tools/10-free-website-chat-widgets-to-make-your-site-interactive/)

[http://www.phpfreechat.net/](http://www.phpfreechat.net/)

[http://net.tutsplus.com/tutorials/javascript-ajax/how-to-create-a-simple-web-based-chat-application/](http://net.tutsplus.com/tutorials/javascript-ajax/how-to-create-a-simple-web-based-chat-application/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-04T17:42:53.260

即时消息应用程序应该是实时的。一个网站在使用请求/响应方法的 HTTP 协议上工作。一种方法是轮询。向服务器发送用户新待处理消息的请求。服务器应该能够区分已发送的消息和尚未发送的消息。这种方法称为轮询。您的浏览器不断要求服务器发送任何待处理的消息。但这可能会浪费带宽并消耗电池（如果使用智能手机访问网站）。更好的选择是仍然使用 XMPP 服务器。

# sql - T-SQL：用游标选择一些数据

> ID：11037064
> 
> 赞同：0
> 
> 时间：2012-06-14T16:08:26.217
> 
> 标签：sql, select, cursor

我有一个“情况”：在大约 80 台 PC 上有一个已知 IP 的数据库，这些数据库存储在中央服务器上的代理表中。我想从每个数据库中选择（作为测试）一些数据。我开始：

```
DECLARE c CURSOR FOR
   SELECT agent_id, agent_ip_address FROM DB_FF.dbo.agents
      WHERE agent_ip_address IS NOT NULL
----------------------------------------------------- 
DECLARE @agent_id int, @agent_ip_address varchar(MAX)
-----------------------------------------------------

OPEN c
FETCH NEXT FROM c INTO @agent_id, @agent_ip_address
WHILE @@FETCH_STATUS <> -1
      BEGIN
         SELECT TOP 3 * FROM @agent_ip_address.[DB_SLAVE].[dbo].[cheques];
      END 
```

问题是当我指定“。”时 在 [DB_SLAVE] 和 [dbo] 之间。任何想法我该怎么做（做它 - 聪明）？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:13:32.777

如果它是一个选项 - 可能使用控制台应用程序或类似的应用程序来执行此操作 - 因此，您将拥有一个 dataReader（使用您使用的任何语言）而不是 SQL 游标，然后您可以执行您尝试运行的动态 SQL .

# maven - Maven Failsafe 插件和多模块项目：如何使用反应器中的其他模块？

> ID：11037065
> 
> 赞同：2
> 
> 时间：2012-06-14T16:08:26.513
> 
> 标签：maven, maven-2, maven-failsafe-plugin

我正在使用以下格式在多模块项目上运行目标故障安全：集成测试：

父级：
--------Module_A
--------Module_B

考虑一个通过 Test_B1_IT（在模块 B 中）测试 Class_A1（在模块 A 中）中的某些内容。

您现在更改 Class_A1 并且测试现在失败。但是，如果您运行目标

```
mvn failsafe:integration-test 
```

测试仍将通过 - 在您运行部署目标之前不会反映更改。我相信目标是使用存储库中的 jar，而不是当前反应堆的最新版本。
如果您运行 integration-test 它可以工作......但它似乎也运行所有单元测试（似乎没有办法跳过单元测试并运行 _IT 集成测试）。

我还看到它适用于目标集成测试，或者如果我在故障安全目标之前添加“编译”。但是，第一个选项运行所有测试（单元 + 集成）

这是故障安全插件的问题，还是 maven 处理多模块项目中依赖项的方式？最好的方法应该是添加编译选项吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:53:39.497

第一件事是您可以通过在命令行上简单地跳过单元测试，例如[：](http://maven.apache.org/plugins/maven-surefire-plugin/test-mojo.html#skip)

```
mvn -Dmaven.test.skip=true lifecycle 
```

如果你喜欢运行集成测试，你不应该调用 failsafe:integration-test 目标，因为你错过了 pre-integration-test 阶段和 post-integration-test 生命周期阶段。

更好的方法是通过调用使用 Maven 的反应器

```
mvn -D... -am -pl Module_A  lifecylcephase 
```

-am 开关将确保编译所有相关模块。

此外，我建议将集成测试放入一个单独的模块中，这会使生活更轻松，例如：

```
 +-- root 
      +--- pom.xml
      +--- mod1 (pom.xml)
      +--- mod2 (pom.xml)
      +--- mod-it (pom.xml) 
```

mod-it 可以通过使用如下配置文件来激活：

```
mvn -Prun-its ... 
```

您写的关于使用该模块的内容是正确的。如果您只是调用一个目标，则依赖关系将根据本地存储库解决，当然不是通过反应器，因为在这种情况下没有反应器在运行。

尽管如此，集成测试阶段假定所有单元测试都已经运行，因此首先运行单元测试是有意义的，就像 Maven 在其生命周期中所做的那样。但是您可以通过使用一些属性来详细控制它来影响它。但是通常运行单元测试应该不是问题，因为单元测试必须快速运行。

# php - MySQL可用性日历 - 计算免费日期的方法？

> ID：11037070
> 
> 赞同：2
> 
> 时间：2012-06-14T16:08:39.667
> 
> 标签：php, mysql, calendar

我正在使用 PHP 和 MySQL 构建一个简单的可用性日历。

我有一张表，其中存储了一个属性的可用日期（目前所有这些日期都是 7 天的块）

```
available_dates:
    start_date    DATE
    end_date      DATE
    available_id  INT PRIMARY KEY
    property_id   INT
    booked        TINYINT(1) 
```

还有一个参考`available_id`我的表的预订日期`available_dates`表：

```
bookings
    booking_id INT
    available_id INT

    ***user details*** 
```

我计划为每个属性添加行到 available_dates 以标记可以预订哪些日期，然后当有人预订该块时在该表上设置预订标志。

我想要做的是显示一个日期列表（以`x`天为单位，在这种情况下为 7 个），在接下来的 24 个月左右，没有设置可用性 - 因此该日期不会出现在该表中。

我很难解决这个问题，我***知道***有一种更简单的方法可以做到这一点，我的第一个想法是循环遍历每个属性，然后是每个 7 天的块，等等。

任何人都可以启发我吗？

* * *

**更新：**

感谢@ZaneBien 的出色而全面的回答，我已经设法通过使用他的`yeardate`表格和程序获得了我需要的结果。我所做的是，当请求需要显示没有可用性集的日期的页面时，如果没有 for ，PHP 将调用该过程以添加更多年份日期`CURYEAR()+2`。

然后为了得到我的结果，稍微修改了 Zane 的查询：

```
SELECT
    a.yeardate AS blockstart,
    DATE_ADD(a.yeardate, INTERVAL 7 DAY) AS blockend
FROM
    yeardates a  
LEFT JOIN
    available_dates b 
        ON(a.yeardate BETWEEN b.start_date AND b.end_date)              
    OR      
    (DATE_ADD(a.yeardate, INTERVAL 7 DAY) BETWEEN b.start_date AND b.end_date)
WHERE
    b.date_id IS NULL AND WEEKDAY(a.yeardate)=5; 
```

在我的情况下，这些块是 7 天，从星期六到星期六 - 所以我`WHERE`在查询中添加了第二个子句，以便我为每一行获得不同的 1 周星期六到星期六块，这些块一个接一个地发生。

所以而不是：

```
+------------+------------+
| blockstart | blockend   |
+------------+------------+
| 2012-01-01 | 2012-01-08 |
| 2012-01-02 | 2012-01-09 |
| 2012-01-03 | 2012-01-10 |
| 2012-01-04 | 2012-01-11 | 
```

我明白了：

```
+------------+------------+
| blockstart | blockend   |
+------------+------------+
| 2012-01-07 | 2012-01-14 |
| 2012-01-14 | 2012-01-21 |
| 2012-01-21 | 2012-01-28 |
| 2012-01-28 | 2012-02-04 | 
```

这***正是***我需要的。再次感谢赞恩的精彩回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T19:39:20.900

将您的问题理解为*检索当前和明年的所有 7 天间隔块，其范围不与`available_dates`表*中已经存在的任何间隔块重叠：

要处理当前和明年的所有日期，我们必须创建一个单独的表 ( `yeardates`)，其中包含`DATE`当前和明年的所有日期。这将方便我们`OUTER JOIN`在检索查询中的操作。

定义`yeardates`表格和插入日期的代码：

```
CREATE TABLE yeardates 
(
    yeardate DATE NOT NULL,
    PRIMARY KEY (yeardate)
) ENGINE = MyISAM;

DELIMITER $$
CREATE PROCEDURE PopulateYear(IN inputyear INT)
    BEGIN
        DECLARE i INT;
        DECLARE i_end INT;
        SET i = 1;
        SET i_end = CASE WHEN inputyear % 4 THEN 365 ELSE 366 END;
        START TRANSACTION;
        WHILE i <= i_end DO
            INSERT INTO yeardates VALUES (MAKEDATE(inputyear, i));
            SET i = i + 1;
        END WHILE;
        COMMIT;
    END$$
DELIMITER ;

CALL PopulateYear(2012);
CALL PopulateYear(2013); 
```

然后创建该表并包含当前和明年的所有日期。如果我们需要为随后的年份插入天数，只需`CALL`将年份作为参数（例如 2014、2015 等）再次执行该过程。

然后我们可以在available_dates表中得到不重叠块的7天块：

```
SELECT
    a.yeardate AS blockstart,
    DATE_ADD(a.yeardate, INTERVAL 7 DAY) AS blockend
FROM
    yeardates a
LEFT JOIN 
    available_dates b ON 
        (a.yeardate BETWEEN b.start_date AND b.end_date)
        OR
        (DATE_ADD(a.yeardate, INTERVAL 7 DAY) BETWEEN b.start_date AND b.end_date)
WHERE
    b.available_id IS NULL 
```

这会根据*所有*房产的预订情况检索所有免费的 7 天区块，但如果我们只需要获取特定房产的免费 7 天区块，我们可以使用：

```
SELECT
    a.yeardate AS blockstart,
    DATE_ADD(a.yeardate, INTERVAL 7 DAY) AS blockend
FROM
    yeardates a
LEFT JOIN 
    (
        SELECT *
        FROM available_dates
        WHERE property_id = <property_id here>
    ) b ON 
        (a.yeardate BETWEEN b.start_date AND b.end_date)
        OR
        (DATE_ADD(a.yeardate, INTERVAL 7 DAY) BETWEEN b.start_date AND b.end_date)
WHERE
    b.available_id IS NULL 
```

property_id在哪里`<property_id here>`。我们甚至可以一次基于多个属性进行选择，只需将其更改为`WHERE property_id IN (<comma sep'd list of property_ids here>)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T16:12:41.140

我想你已经把它弄反了。

除非预订，否则所有日期都可能可用，在数据库中记录已预订的内容并将其从结果中剔除

# asp.net - ASP.Net Web 应用程序添加配置转换灰显

> ID：11037072
> 
> 赞同：91
> 
> 时间：2012-06-14T16:08:43.650
> 
> 标签：asp.net, web-config, transform

我在我的解决方案中添加了一个现有的 ASP.Net Web 应用程序项目。除了标准的调试和发布配置外，该解决方案还有两个自定义配置，SAT 和 UAT。对于新的 Web 应用程序，右键单击 Web.Config 会显示上下文菜单，但“添加配置转换”选项是灰色的。

我不知所措。新项目是一个 Web 应用程序。配置管理器不会显示此项目的两个自定义配置，但会显示其他项目。该项目似乎在解决方案文件中有正确的条目。

想法？

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-06-14T16:16:19.753

您必须首先在配置管理器中定义配置。为确保您启动了配置管理器，您可以通过以下方式访问它：构建->配置管理器

在*活动解决方案配置*下拉列表中，选择`<New...>`。添加后，您将能够“添加配置转换”。

不要直接编辑您的解决方案文件。只会让人头疼。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2015-11-06T08:00:00.723

当我们使用 PublishProfiles 时，对我来说，答案是右键单击相关`pubxml`文件（在项目文件夹`Properties`subfolder中找到`PublishProfiles`），然后选择`Add Config Transform`. 不需要经理;)。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2017-02-07T17:39:16.723

就我而言，在 Visual Studio 2015 中，当我基于项目模板创建新解决方案时，*添加配置转换*显示为灰色 - 但出于不同的原因：

单击**“显示所有文件”**显示文件已经存在 - 只是隐藏。因此，该按钮显示为灰色（因为它们已经存在，因此无需添加）。

1.  点击“显示所有文件”图标：
    [![在此处输入图像描述](../Images/765432f8a69f774edd40dd332e7ae33b.png)](https://i.stack.imgur.com/LqLSi.png)

2.  现在您可以展开“Web.config”：
    [![在此处输入图像描述](../Images/7ec1d5fcecd49cc2cbedffdb46d2209c.png)](https://i.stack.imgur.com/ksbLv.png)

3.  双击任何转换文件 (`Web.Debug.config`或`Web.Release.config`) 以打开和编辑它。

**笔记：**

*   我不想添加额外的配置，只需使用*Debug*和*Release*。如果您创建一个，选择它，并且转换文件尚不存在，则上下文菜单项*Add Config Transform*处于活动状态且未显示为灰色。

*   另一种方法是删除（或将文件移到项目目录之外），然后从头开始重新创建它们（通过*Add config transform*）。因为它们不再存在，所以菜单不应该是灰色的。删除文件后，可能需要关闭并重新打开解决方案。

*   如果要**创建其他配置转换**文件，请记住在 Visual Studio 中，配置转换与配置相关联。要添加另一个转换，您需要先添加一个新配置。要添加另一个，请执行以下操作： 通过配置管理器（您可以选择调试或发布的下拉菜单），首先添加一个新配置，例如 myNewConfig。然后选择 myNewConfig。现在在解决方案资源管理器中选择 Web.config，右键单击并在上下文菜单中选择“添加配置转换”——它将创建 Web.myNewConfig.config。一旦存在，上下文菜单将再次变灰，因为 VS 只允许每个配置进行一次转换。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-07-04T09:22:07.547

我通过实现两件事解决了这个问题：

1.  有**解决方案**级别的配置，也有**项目**级别的配置。web.MyConfigName.config 是根据**项目**级别的配置创建的。
2.  似乎 Visual Studio 2017 配置管理器基于从（隐藏的）obj 文件夹中添加的配置。删除项目的 obj 文件夹并重新构建将使用您添加的配置更新项目。

要使“添加配置转换”选项可用，请执行以下步骤：

1.  确保您已启用**显示隐藏文件**
2.  打开**解决方案的配置管理器**
3.  选择相关的**解决方案**配置，然后在项目旁边的下拉列表中选择`<New..>`或`<Edit..>`添加、删除或编辑您想要的**项目配置。**
4.  删除项目中的 obj 文件夹。重建。确保将更改保存到项目和解决方案文件中。我还重新启动了视觉工作室，因为为什么不呢。验证您是否将所有项目配置视为 obj 文件夹中的文件夹。
5.  右键单击 web.config 并添加您的配置转换。

希望它可以帮助某人。:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-01-09T15:51:08.993

为了让它工作，我必须在我的 csproj 文件中添加新的属性组。

*添加配置转换*是灰色的。

我将以下 XML 添加到我的 csproj 并重新加载了项目。然后添加配置转换可用。一旦选择了我的附加变换就被添加了

```
<PropertyGroup Condition="'$(Configuration)|$(Platform)' == 'IAT_CMCD|AnyCPU'">
    <DebugType>pdbonly</DebugType>
    <Optimize>true</Optimize>
    <OutputPath>bin\</OutputPath>
    <DefineConstants>TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
  </PropertyGroup>
  <PropertyGroup Condition="'$(Configuration)|$(Platform)' == 'UAT_CM|AnyCPU'">
    <DebugType>pdbonly</DebugType>
    <Optimize>true</Optimize>
    <OutputPath>bin\</OutputPath>
    <DefineConstants>TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
  </PropertyGroup> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-12-05T11:26:36.523

如何启用“添加配置转换”选项。请按照以下步骤操作。步骤 1：转到解决方案配置（团队下方） [转到解决方案配置（团队下方）](https://i.stack.imgur.com/BPUrP.png)

Step2：点击配置管理器 [点击配置管理器](https://i.stack.imgur.com/QYTYO.png)

步骤 3：从活动解决方案配置窗口中 [选择新建 从活动解决方案配置窗口中选择新建](https://i.stack.imgur.com/Y7nvN.png)

第 4 步：现在为您的新项目命名有意义的名称，例如 Production/Staging，然后从“Release”选项中选择复制设置。如果默认情况下未选中，请确保选中该复选框，然后单击“确定”。 [现在给你的新项目起有意义的名字，比如生产/登台](https://i.stack.imgur.com/ERLPt.png)

第 5 步：现在回到您的解决方案资源管理器并右键单击您的 Web.Config 文件。 [现在启用添加配置转换](https://i.stack.imgur.com/XgvGt.png)

你好！现在启用添加配置转换。:)

# google-app-engine - 有一种方法可以从 jinja2 模板访问 ndb 模型类属性

> ID：11037073
> 
> 赞同：0
> 
> 时间：2012-06-14T16:08:49.473
> 
> 标签：google-app-engine, app-engine-ndb

我正在使用 Appengine 1.6.5，从我得到 None 的 jinja2 模板访问 NDB 模型类属性，而是在循环上访问相同的属性得到了正确的结果。为了解释问题，我发布了一些代码

- - 楷模 - -

```
class Vehicles(ndb.Model):
    registration = ndb.StringProperty()
    brand = ndb.StringProperty()
    model = ndb.StringProperty()
    cost = ndb.FloatProperty()
    km_cost = ndb.FloatProperty()
    viacard = ndb.StringProperty()
    telepass = ndb.StringProperty()

class Employees(ndb.Model):
    user_id = ndb.StringProperty()
    name = ndb.StringProperty()
    surname = ndb.StringProperty()
    email = ndb.StringProperty()
    job = ndb.StringProperty()
    credit_card = ndb.StringProperty()
    cc_expiry_date = ndb.StringProperty()
    vehicle = ndb.KeyProperty(kind=Vehicles)
    last_login = ndb.DateTimeProperty(auto_now=True)
    last_activity = ndb.DateTimeProperty(auto_now=True)

    @property
    def vehicle_registration(self):
        return Key(self.vehicle.kind(),int(self.vehicle.id())).get().registration 
```

--- 处理程序 --- 这只是处理程序的一部分

```
class BaseHandler(webapp2.RequestHandler):

    @webapp2.cached_property
    def jinja2(self):
        return jinja2.get_jinja2(app=self.app)

    def render_template(self, filename, **kwargs):
        self.response.write(self.jinja2.render_template(filename, **kwargs))

class EmployeesHandler(BaseHandler):
    @login_required
    def get(self,**kwargs):
        user = users.get_current_user()
        company = models.Company.query().fetch(1)
        employees = models.Employees.query().fetch()
        vehicles = models.Vehicles.query().fetch()

        params = {
            "nickname" : user.nickname(),
            "company" : company,
            "employees" : employees,
            "vehicles" : vehicles
            }
        return self.render_template('employee.html', **params) 
```

--- 模板 --- 这是模板的一部分

```
<table class="table table-striped table-bordered table-condensed">
  <thead>
    <tr>
      <th>Nome</th>
      <th>Cognome</th>
      <th>Email</th>
      <th>Ruolo</th>
      <th>Carta di credito</th>
      <th>Scadenza</th>
      <th>Auto</th>
      <th>Ultimo accesso</th>
      <th>Ultimo movimento</th>
    </tr>
  </thead>
  <tbody>
    {% for emp in employees %}
    <tr>
      <td>{{ emp.name }}</td>
      <td>{{ emp.surname }}</td>
      <td>{{ emp.email }}</td>
      <td>{{ emp.job }}</td>
      <td>{{ emp.credit_card }}</td>
      <td>{{ emp.cc_expiry_date }}</td>
      <td>({{ emp.vehicle.vehicle_registration }})</td>
      <td>{{ emp.last_login }}</td>
      <td>{{ emp.last_activity }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table> 
```

谁能告诉我获取雇员汽车登记号的正确方法？提前致谢

问候，罗伯托

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:29:22.010

尝试：`emp.vehicle.get.vehicle_registration`

但是，您遇到了[n+1 问题](https://stackoverflow.com/questions/97197/what-is-the-n1-selects-problem)，您应该真正考虑[预取车辆参考。](http://blog.notdot.net/2010/01/ReferenceProperty-prefetching-in-App-Engine)

# javascript - 尝试在 Javascript 中执行空合并运算符时出错

> ID：11037079
> 
> 赞同：1
> 
> 时间：2012-06-14T16:09:29.280
> 
> 标签：javascript, jquery, error-handling, null

尝试为表单提交计划一个字符串生成器：

```
try{
  top.document.getElementById("attributes").contentWindow.location = "attributeToolbar.aspx?el_id=" + (t_selected.attr("id").match(intRegex)[0] || "new") + "&opts="+ form_to_server();
}catch(err){
  alert(err);
  //prints:   TypeError: Unable to get value of the property '0': object is null or undefined.
} 
```

我正在考虑将正则表达式与匹配项分开，如果没有匹配项，则将其分配给“new”以显示它不在 jquery 对象中。

上述声明中的关键领域是：

```
(t_selected.attr("id").match(intRegex)[0] || "new") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:21:32.387

如果您只想测试匹配，请执行以下操作：

```
... intRegex.test(t_selected.attr("id")) ... 
```

反而。如果“匹配”调用返回`null`，数组索引运算符会给你那个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T17:49:19.627

```
(t_selected.attr("id").match(intRegex) || ["new"])[0] 
```

这将为您提供完整的匹配项（如果找到）或字符串“new”。

# javascript - 查找一个点是否落在有界框内

> ID：11037084
> 
> 赞同：2
> 
> 时间：2012-06-14T16:09:44.060
> 
> 标签：javascript, math

我有一组点可以绘制在图表上，如果连接起来会形成形状（有界框可能是正确的术语？）。我怎样才能找到另一个点是否落在这个盒子里？

这里指出一个示例框：

```
var box = [[181,7500],[181,11279],[185,12500], [196.4,12500],[196.4,7500]];
var point_inside_box = [188,10000];
var point_outside_box = [182,12000]; 
```

如果您将其可视化如下，很容易看出这些点是否落在框外：

[边界框](http://bernieberg.com/linked/box.png)

有没有办法在javascript中通过一些数学来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T16:14:11.080

做到这一点的一种方法是选择一个方向并计算出如果你在理论上永远朝着那个方向移动，那么有多少条边是交叉的。如果是奇数，则点在方框内。如果是偶数，则点在框外。

参考： [http ://local.wasp.uwa.edu.au/~pbourke/geometry/insidepoly/](http://local.wasp.uwa.edu.au/~pbourke/geometry/insidepoly/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T16:14:10.343

其中一种方法是检查向量（PA_i，PA_{i+1}）的所有叉积是否具有相同的符号。如果是，则该点在内部，否则在外部。（P是要检查的点，多边形是A_1A_2...A_n。）

在二维情况下，向量 的叉积`(a, b)`就是`(c, d)`数字`ad - bc`。

如果您的点 A_i 形成*凸*多边形，则此计算有效。

# iphone - 如果在滚动超出元素 0 或最终元素时快速点击 UIPickerView didSelectRow，则不会调用

> ID：11037086
> 
> 赞同：4
> 
> 时间：2012-06-14T16:09:59.083
> 
> 标签：iphone, objective-c, ipad, uipickerview

当你滚动一个`UIPickerView`组件，然后看着它继续滚动，它最终会停在一个元素上并调用`didSelectRow`. 这是预期的行为。

假设您在选择器视图的元素 1 上。如果您滚动到元素 0（通过向下拖动组件）...并越过它（将 0 元素拖到选择器视图下方的蓝色选择框之外）...当您松开时，选择器视图将向后滚动到元素 0 以使其在蓝色选择框中居中，然后调用`didSelectRow`.

但是，如果我们采用相同的示例...（即您在选择器视图的元素 1 上，并且滚动远远超出元素 0）...如果选择器视图正在滚动回元素 0 的中间，并且您快速单击元素 0 或其上方的空白区域，然后选择器视图将笨拙地从滚动动画中的任何位置直接“跳转”到元素 0，然后*不会*调用`didSelectRow`.

这是一个大问题，因为我们现在在元素 0 上而没有实际调用`didSelectRow`......因此，我们没有迹象表明我们不再在元素 1 上。此外，如果您滚动到最后一个元素并快速点击在滚动动画完成之前，最终元素或其下方的空白区域。（如果您出于某种原因在中间元素中尝试此操作，它会正常工作）

所以总体上的问题是，我如何才能检测到这种尴尬的“跳跃”，它或多或少是一个小故障`UIPickerView`？

* * *

到目前为止的想法：我们可能不得不手动处理点击`UIPickerView`；不过，这似乎有点矫枉过正，因为它只在pickerview的第一个和最后一个元素上被破坏了......

* * *

另一个更新：在 iPhone 上尝试了一些标准的苹果应用程序（比如时钟应用程序）后，我意识到这个问题实际上也发生在这些应用程序中（在时钟应用程序上选择 am，滚动过去 pm，然后单击它之前的“保存”完成滚动回到下午）。你最终还是会被选中。所以这似乎是一个苹果的问题，很可能无法解决。

# javascript - 如何制作 HTML标签以使搜索引擎爬虫无法访问它们

> ID：11037088
> 
> 赞同：1
> 
> 时间：2012-06-14T16:10:06.247
> 
> 标签：javascript, html, hyperlink, search-engine

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T16:13:02.440

可能有也可能没有一种万无一失的技术来做到这一点。但是，为了安全起见，您可以执行以下操作：

[在您的robots.txt](http://www.robotstxt.org/)文件中禁止这些链接。这需要创建一个名为的文件`/robots.txt`并添加以下行：

```
Disallow: /YourPage.html 
```

到文件。

您还可以使用[禁止关注](http://en.wikipedia.org/wiki/Nofollow)链接：

```
<a href="http://www.example.com/" rel="nofollow">Link text</a> 
```

但是，根据[Wikipedia](http://en.wikipedia.org/wiki/Nofollow#Interpretation_by_the_individual_search_engines)的说法，大多数（如果不是全部）搜索引擎实际上仍会跟踪该链接，只是不会将其编入索引或将其用于排名。

另一个想法是根本不使用 URL，而是使用脚本。就像是：

```
<a href="javascript:void(0)" onclick="GoSomewhere()">Google Can't Find Me!</a>
<script>
   function GoSomewhere()
   {
      window.location = '/YourPage.html';
   }
</script> 
```

您可能还想重新考虑如何*计算*点击次数。也许您可以使用 Javascript 来注册一个点击，而不是将点击计为任何 HTTP 请求，因为机器人通常不会在页面上执行任何脚本。这就是[Google Analytics](http://www.google.com/analytics/)和[Clicky 之](http://www.getclicky.com/)类的工作方式。

您还可以排除来自包含单词[Googlebot](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=1061943)的用户代理的任何点击。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-16T20:21:59.750

这个问题有点老了，但 nofollow 确实充当了搜索机器人不关注链接的“建议”。

[对特定链接使用 rel="nofollow"](https://support.google.com/webmasters/answer/96569?hl=en)

本页介绍了 google 如何解释 nofollow。基本上它说“一般”它不跟随它们，但如果其他站点链接到它们而不使用“nofollow”，则目标仍可能出现在索引中。

Google 和 Bing 网站管理员工具也有一部分允许您删除其索引中的 URL。

最后一个选项是 robots.txt 就像其他人提到的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T16:15:01.097

nofollow 选项将阻止遵循网络标准的搜索引擎跟踪链接。如果您还想保护链接免受机器人、撇渣器等的侵害，我建议您在 DOM 准备好后使用 Javascript 将链接添加到您的 html 内容。

这将防止大多数机器人和所有搜索引擎首先看到这些链接，并防止人们在扫描您的网站以查找表单/电子邮件地址/电话号码/等时无意中跟踪链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-16T22:25:28.693

由于 Google 希望为其爬虫启用 Javascript

```
<a href="javascript:void(0)" onclick="openLink()">Link</a> 
```

建议可能已过时。有人可以争辩说它仍然是链接语义（`a`），因此爬虫将跟随链接。防止这种情况的一种可能方法是将所有不应遵循的链接转换为跨度

```
<span onclick="openLink()">Link</span> 
```

尽管这仍然可能不起作用，因为 DOM 中仍有信息表明该元素提供了点击处理程序。对于进一步的解决方法，需要添加一个单击事件侦听器`body`并从坐标中推断出实际单击了哪个按钮。这在计算上可能非常昂贵。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T16:12:44.557

您可以添加使用[nofollow](http://www.w3schools.com/TAGS/att_a_rel.asp)：

```
 <a rel="nofollow"> Bla Bla </a> 
```

这是对网络爬虫不要跟随链接的建议。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-16T21:50:10.690

如果用户代理属于机器人，您可以使用 PHP 删除链接。

# tridion - 应用了哪些 Tridion 修补程序？

> ID：11037093
> 
> 赞同：7
> 
> 时间：2012-06-14T16:10:25.760
> 
> 标签：tridion, hotfix

确定哪些 Tridion 修补程序已应用于系统的最可靠方法是什么（除了适当的先前版本文档）？

具体来说，我想了解 SDL Tridion 2009，但也想知道 SDL Tridion 2011 是否有所不同。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T16:12:05.697

最可靠的方法是跟踪您手动安装的修补程序。例如，将每个修补程序 zip 放在服务器上的目录中并从那里工作。

更有可能在每个系统上工作（而不仅仅是您今天设置的一个）取决于文件版本、清单文件（在 jar 中）、文件大小和文件时间戳的组合。这些是按优先级降序排列的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T17:35:51.333

在 CM Web 界面中，如果单击右上角的 SDL Tridion 徽标，您将看到一个包含一般版本信息的弹出窗口。如果您单击“详细信息”（并等待几秒钟），您将获得所有带有版本和时间戳的 CM 文件的列表，您可以使用这些文件与修补程序进行比较并确定它们是否已安装。这适用于所有最新版本的 Tridion（5.x 及更高版本）。

CD，您需要直接查看文件，但在 CD 端检查的文件通常要少得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T17:43:22.537

您可以使用以下社区扩展来管理您的热修复。[https://www.sdltridionworld.com/community/2011_extensions/HotfixManager.aspx](https://www.sdltridionworld.com/community/2011_extensions/HotfixManager.aspx)

这无助于查找已应用的修补程序。这与 Puf 和 Nuno 评论几乎一致。当您安装热修复时，您必须使用扩展安装，因此它将跟踪修复。我们已经在 Dev/QA 中使用它并对其进行了测试，但还没有在生产中使用（计划使用它）。

# bash - 如何编写一个 shell 脚本来添加足够的零来为每个数字添加六位数字？

> ID：11037096
> 
> 赞同：3
> 
> 时间：2012-06-14T16:10:32.390
> 
> 标签：bash, shell, numbers

我在 .tsv 文件中有一个数字列表（每个数字少于 6 位）：
4559
123
等

我需要一个6位数字的列表：
004559
000123
等

非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T16:14:31.547

bash 中的 printf 正是这样做的——

```
printf "%0.6d" $value 
```

# java - GWT DockLayoutPanel 子控件大小

> ID：11037102
> 
> 赞同：2
> 
> 时间：2012-06-14T16:10:50.190
> 
> 标签：java, css, gwt, docklayoutpanel

我创建一个小部件并将其添加到 DockLayoutPanel，如下所示：

```
DockLayoutPanel dockPanel = new DockLayoutPanel(Unit.PCT);  
dockPanel.addNorth(widget, size); 
```

尺寸参数决定什么？

[Google 说](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiPanels#Design)使用 CSS 参数 left、top、width、height、right 和 bottom 来确定孩子的大小（在基于约束的布局小节中）。

从逻辑上讲，将值 100（单位为 %）作为大小传递会使小部件填充其容器，因为它表示单个维度。

我只是想获得一个布局，其中北部小部件的高度为 100 像素，宽度为 100%，东部和西部的高度为 100%，宽度为 25%，中心占据剩余空间。我使用香草 DockPanel 实现了这一点，但 UI 在窗口大小更改等方面不够强大。

我将不胜感激 DockLayoutPanel 大小的解释，或任何有用的指针。提前致谢。

**注意：我对使用 UI binder 不感兴趣，因为我已经创建了应用程序，这个过程是维护工作。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T20:35:38.183

对于北和南子面板，`size`参数决定了它们的**高度**，宽度隐含为 100%。对于东部和西部子面板，参数确定它们的**宽度**，高度隐式为 100%。

# syntax-highlighting - hl7 是否存在 Notepad++ 语法高亮配置文件？

> ID：11037103
> 
> 赞同：15
> 
> 时间：2012-06-14T16:10:53.420
> 
> 标签：syntax-highlighting, notepad++, hl7

hl7 是否存在 Notepad++ 语法高亮配置文件？

我已经开始自己制作了，但是如果自定义的用户定义的语言已经存在于所有的细分等中，那就太好了。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-14T16:13:08.773

这是我开始使用 Notepad++ 的 hl7 用户定义语言...

```
<NotepadPlus>
    <UserLang name="HL7" ext="hl7">
        <Settings>
            <Global caseIgnored="no" />
            <TreatAsSymbol comment="no" commentLine="no" />
            <Prefix words1="no" words2="no" words3="no" words4="no" />
        </Settings>
        <KeywordLists>
            <Keywords name="Delimiters">000000</Keywords>
            <Keywords name="Folder+"></Keywords>
            <Keywords name="Folder-"></Keywords>
            <Keywords name="Operators">(x0D) | ^ &amp; ~ \</Keywords>
            <Keywords name="Comment"></Keywords>
            <Keywords name="Words1">ACC ADD AL1 BHS BLG BTS DG1 DSC DSP ERR EVN FHS FT1 FTS GT1 IN1 IN2 IN3 MFA MFE MFI MRG MSA MSH NCK NK1 NPU NSC NST NTE OBR OBX ODS ODT OM1 OM2 OM3 OM4 OM5 OM6 ORC PD1 PID PR1 PRA PV1 PV2 QRD QRF RQ1 RQD RXA RXC RXD RXE RXG RXO RXR STF UB1 UB2 URD URS ZAL ZBN ZEI ZLR ZNI ZPI ZQA ZV1</Keywords>
            <Keywords name="Words2">ACK ADR ADT ARD BAR DFT DSR MCF MFD MFK MFN MFR NMD NMQ NMR ORF ORM ORR ORU OSQ PGR QRY RAR RAS RDE RDR RDS RER RGV ROR RRA RRD RRE RRG UDM OML</Keywords>
            <Keywords name="Words3">A01 A02 A03 A04 A05 A06 A07 A08 A09 A10 A11 A12 A13 A14 A15 A16 A17 A18 A19 A20 A21 A22 A23 A24 A25 A26 A27 A28 A29 A30 A31 A32 A33 A34 A35 A36 A37 M01 M02 M03 O01 O02 P01 P02 P03 P04 Q01 Q02 Q03 Q05 R01 R02 R03 R04</Keywords>
            <Keywords name="Words4"></Keywords>
        </KeywordLists>
        <Styles>
            <WordsStyle name="DEFAULT" styleID="11" fgColor="000000" bgColor="FFFFFF" fontName="" fontStyle="0" />
            <WordsStyle name="FOLDEROPEN" styleID="12" fgColor="000000" bgColor="FFFFFF" fontName="" fontStyle="0" />
            <WordsStyle name="FOLDERCLOSE" styleID="13" fgColor="000000" bgColor="FFFFFF" fontName="" fontStyle="0" />
            <WordsStyle name="KEYWORD1" styleID="5" fgColor="0000FF" bgColor="FFFFFF" fontName="" fontStyle="1" />
            <WordsStyle name="KEYWORD2" styleID="6" fgColor="800000" bgColor="FFFFFF" fontName="" fontStyle="1" />
            <WordsStyle name="KEYWORD3" styleID="7" fgColor="00FF00" bgColor="FFFFFF" fontName="" fontStyle="1" />
            <WordsStyle name="KEYWORD4" styleID="8" fgColor="8000FF" bgColor="FFFFFF" fontName="" fontStyle="0" />
            <WordsStyle name="COMMENT" styleID="1" fgColor="000000" bgColor="FFFFFF" fontName="" fontStyle="0" />
            <WordsStyle name="COMMENT LINE" styleID="2" fgColor="000000" bgColor="FFFFFF" fontName="" fontStyle="0" />
            <WordsStyle name="NUMBER" styleID="4" fgColor="000000" bgColor="FFFFFF" fontName="" fontStyle="0" />
            <WordsStyle name="OPERATOR" styleID="10" fgColor="FF00FF" bgColor="FFFFFF" fontName="" fontStyle="0" />
            <WordsStyle name="DELIMINER1" styleID="14" fgColor="000000" bgColor="FFFFFF" fontName="" fontStyle="0" />
            <WordsStyle name="DELIMINER2" styleID="15" fgColor="000000" bgColor="FFFFFF" fontName="" fontStyle="0" />
            <WordsStyle name="DELIMINER3" styleID="16" fgColor="000000" bgColor="FFFFFF" fontName="" fontStyle="0" />
        </Styles>
    </UserLang> </NotepadPlus> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-26T22:03:56.190

HL7 的此 UDL 包括 HL7 2.7 版本定义的所有段类型 (Words1)、消息类型 (Words2) 和事件类型 (Words3)，以及来自之前对该线程的贡献的许多 Zxx 段。

```
<NotepadPlus>
<UserLang name="HL7_LightBkgrnd" ext="hl7">
    <Settings>
        <Global caseIgnored="no" />
        <TreatAsSymbol comment="no" commentLine="no" />
        <Prefix words1="no" words2="no" words3="no" words4="no" />
    </Settings>
    <KeywordLists>
        <Keywords name="Delimiters">000000</Keywords>
        <Keywords name="Folder+"></Keywords>
        <Keywords name="Folder-"></Keywords>
        <Keywords name="Operators">&amp; \ ^ | ~</Keywords>
        <Keywords name="Comment"></Keywords>
        <Keywords name="Words1">ABS ACC ADD ADJ AFF AIG AIL AIP AIS AL1 APR ARQ ARV AUT BHS BLC BLG BPO BPX BTS BTX CDM CER CM0 CM1 CM2 CNS CON CSP CSR CSS CTD CTI DB1 DG1 DMI DRG DSC DSP ECD ECR EDU EQP EQU ERR EVN FAC FHS FT1 FTS GOL GP1 GP2 GT1 Hxx IAM IAR IIM ILT IN1 IN2 IN3 INV IPC IPR ISD ITM IVC IVT LAN LCC LCH LDP LOC LRL MFA MFE MFI MRG MSA MSH NCK NDS NK1 NPU NSC NST NTE OBR OBX ODS ODT OM1 OM2 OM3 OM4 OM5 OM6 OM7 ORC ORG OVR PAC PCE PCR PD1 PDA PDC PEO PES PID PKG PMT PR1 PRA PRB PRC PRD PRT PSG PSH PSL PSS PTH PV1 PV2 PYE QAK QID QPD QRD QRF QRI RCP RDF RDT REL RF1 RFI RGS RMI ROL RQ1 RQD RXA RXC RXD RXE RXG RXO RXR SAC SCD SCH SCP SDD SFT SHP SID SLT SPM STF STZ TCC TCD TQ1 TQ2 TXA UAC UB1 UB2 URD URS VAR VND ZL7 ZAL ZB2 ZBE ZBN ZBP ZBR ZBX ZCT ZEI ZLR ZN2 ZNI ZNT ZPD ZPI ZQA ZRX ZV1 ZVI ZWA</Keywords>
        <Keywords name="Words2">ACK ADT BAR BPS BRP BRT BTS CCF CCI CCM CCQ CCR CCU CQU CRM CSU DFT EAC EAN EAR EHC ESR ESU INR INU LSR LSU MDM MFK MFN NMD NUL OMB OMD OMG OMI OML OMN OMP OMS OPL OPR OPU ORA ORB ORD ORG ORI ORL ORN ORP ORS ORU ORU OSM OUL PEX PGL PIN PMU PPG PPP PPR PPT PPV PRR PTR QBP QCN QRY QSB QSX QVR RAS RCI RCL RDE RDR RDS RDY REF RGV RPA RPI RPL RPR RQA RQC RQI RQP RRA RRD RRE RRG RRI RSP RTB SCN SDN SDR SIU SLN SLR SMD SRM SRR SSR SSU STC STI TCR TCU UDM VXU</Keywords>
        <Keywords name="Words3">A01 A02 A03 A04 A05 A06 A07 A08 A09 A10 A11 A12 A13 A14 A15 A16 A17 A20 A21 A22 A23 A24 A25 A26 A27 A28 A29 A31 A32 A33 A37 A38 A40 A41 A42 A43 A44 A45 A47 A49 A50 A51 A52 A53 A54 A55 A60 A61 A62 B01 B02 B03 B04 B05 B06 B07 B08 C01 C02 C03 C04 C05 C06 C07 C08 C09 C10 C11 C12 E01 E02 E03 E04 E10 E12 E13 E15 E20 E21 E22 E24 I01 I02 I03 I04 I05 I06 I07 I08 I09 I10 I11 I12 I13 I14 I15 I16 I17 I18 I19 I20 I21 I22 J01 J02 K11 K13 K15 K21 K22 K23 K24 K25 K31 K32 M02 M04 M05 M06 M07 M08 M09 M10 M11 M12 M13 M14 M15 M16 M17 N02 O03 O04 O05 O06 O07 O08 O09 O10 O11 O12 O13 O14 O15 O16 O17 O18 O19 O20 O21 O22 O23 O24 O25 O26 O27 O28 O29 O30 O31 O32 O33 O34 O35 O36 O37 O38 O39 O40 P01 P02 P03 P05 P06 P07 P08 P10 P11 P12 PC1 PC2 PC3 PC4 PC5 PC6 PC7 PC8 PC9 PCA PCB PCC PCD PCE PCF PCG PCH PCJ PCK PCL Q05 Q11 Q13 Q15 Q16 Q17 Q21 Q22 Q23 Q24 Q25 Q31 Q32 R01 R22 R23 R24 R25 R26 R30 R31 R32 R33 RDR S01 S02 S03 S04 S05 S06 S07 S08 S09 S10 S11 S12 S13 S14 S15 S16 S17 S18 S19 S20 S21 S22 S23 S24 S26 S27 S28 S29 S30 S31 S32 S33 S34 S35 S36 S37 T01 T02 T03 T04 T05 T06 T07 T08 T09 T10 T11 U01 U02 U03 U04 U05 U06 U07 U08 U09 U10 U11 U12 U13 V04 var Z73 Z74 Z75 Z76 Z77 Z78 Z79 Z80 Z81 Z82 Z83 Z84 Z85 Z86 Z87 Z88 Z89 Z90 Z91 Z92 Z93 Z94 Z95 Z96 Z97 Z98 Z99</Keywords>
        <Keywords name="Words4"></Keywords>
    </KeywordLists>
    <Styles>
        <WordsStyle name="DEFAULT" styleID="11" fgColor="000000" bgColor="FFFFFF" colorStyle="1" fontName="" fontStyle="0" />
        <WordsStyle name="FOLDEROPEN" styleID="12" fgColor="000000" bgColor="FFFFFF" colorStyle="1" fontName="" fontStyle="0" />
        <WordsStyle name="FOLDERCLOSE" styleID="13" fgColor="000000" bgColor="FFFFFF" colorStyle="1" fontName="" fontStyle="0" />
        <WordsStyle name="KEYWORD1" styleID="5" fgColor="0000FF" bgColor="FFFFFF" colorStyle="1" fontName="" fontStyle="1" />
        <WordsStyle name="KEYWORD2" styleID="6" fgColor="800080" bgColor="FFFFFF" colorStyle="1" fontName="" fontStyle="1" />
        <WordsStyle name="KEYWORD3" styleID="7" fgColor="FF00FF" bgColor="FFFFFF" colorStyle="1" fontName="" fontStyle="1" />
        <WordsStyle name="KEYWORD4" styleID="8" fgColor="8000FF" bgColor="FFFFFF" colorStyle="1" fontName="" fontStyle="0" />
        <WordsStyle name="COMMENT" styleID="1" fgColor="000000" bgColor="FFFFFF" colorStyle="1" fontName="" fontStyle="0" />
        <WordsStyle name="COMMENT LINE" styleID="2" fgColor="000000" bgColor="FFFFFF" colorStyle="1" fontName="" fontStyle="0" />
        <WordsStyle name="NUMBER" styleID="4" fgColor="000000" bgColor="FFFFFF" colorStyle="1" fontName="" fontStyle="0" />
        <WordsStyle name="OPERATOR" styleID="10" fgColor="AE0000" bgColor="FFFFFF" colorStyle="1" fontName="" fontStyle="0" />
        <WordsStyle name="DELIMINER1" styleID="14" fgColor="000000" bgColor="FFFFFF" colorStyle="1" fontName="" fontStyle="0" />
        <WordsStyle name="DELIMINER2" styleID="15" fgColor="000000" bgColor="FFFFFF" colorStyle="1" fontName="" fontStyle="0" />
        <WordsStyle name="DELIMINER3" styleID="16" fgColor="000000" bgColor="FFFFFF" fontName="" fontStyle="0" />
    </Styles>
</UserLang>
</NotepadPlus>
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-24T17:20:41.910

我也花了几年时间调整、着色和完善我自己的 HL7 自定义 UDL。由于 HL7 易于定制，因此您可能会遇到一些未突出显示的部分。每当您遇到这些情况时，只需跳入 UDL 编辑器并将段添加到适当的样式列表中。很容易更新。我已经有一段时间了，所以下面的列表应该是一个相当全面的起点。

要安装它，请将下面的 XML 保存到名为 hl7.xml（或任何您想要的文件）的文件中，然后使用`Language > Define Your Language... > Import`对话框将其添加到您的语言菜单中。

```
<NotepadPlus>
<UserLang name="HL7" ext="hl7" udlVersion="2.1">
    <Settings>
        <Global caseIgnored="no" allowFoldOfComments="no" foldCompact="no" forcePureLC="0" decimalSeparator="0" />
        <Prefix Keywords1="no" Keywords2="yes" Keywords3="no" Keywords4="no" Keywords5="no" Keywords6="no" Keywords7="no" Keywords8="no" />
    </Settings>
    <KeywordLists>
        <Keywords name="Comments">00\. 01 02\ 03 04</Keywords>
        <Keywords name="Numbers, prefix1"></Keywords>
        <Keywords name="Numbers, prefix2"></Keywords>
        <Keywords name="Numbers, extras1"></Keywords>
        <Keywords name="Numbers, extras2"></Keywords>
        <Keywords name="Numbers, suffix1"></Keywords>
        <Keywords name="Numbers, suffix2"></Keywords>
        <Keywords name="Numbers, range"></Keywords>
        <Keywords name="Operators1">\S\ | \ ^ &amp; ` ~</Keywords>
        <Keywords name="Operators2"></Keywords>
        <Keywords name="Folders in code1, open"></Keywords>
        <Keywords name="Folders in code1, middle"></Keywords>
        <Keywords name="Folders in code1, close"></Keywords>
        <Keywords name="Folders in code2, open"></Keywords>
        <Keywords name="Folders in code2, middle"></Keywords>
        <Keywords name="Folders in code2, close"></Keywords>
        <Keywords name="Folders in comment, open"></Keywords>
        <Keywords name="Folders in comment, middle"></Keywords>
        <Keywords name="Folders in comment, close"></Keywords>
        <Keywords name="Keywords1">ABS ACC ADD ADJ AFF AIG AIL AIP AIS AL1 APR ARQ ARV AUT BHS BLC BLG BPO BPX BTS BTX CDM CM0 CM1 CM2 CNS CON CSP CSR CSS CTD CTI DB1 DG1 DMI DRG DSC DSP ECD ECR EDU EQP EQU ERR EVN FAC FHS FT1 FTS GOL GP1 GP2 GT1 IAM IIM ILT IN1 IN2 IN3 INV IPC IPR ISD ITM IVC IVT LAN LCC LCH LDP LOC LRL MFA MFE MFI MRG MSA MSH NCK NDS NK1 NPU NSC NST NTE OBR OBX ODS ODT OM1 OM2 OM3 OM4 OM5 OM6 OM7 ORC ORG OVR PCE PCR PD1 PDA PDC PEO PES PID PKG PMT PR1 PRA PRB PRC PRD PSG PSH PSL PSS PTH PV1 PV2 PYE QAK QID QPD QRD QRF QRI RCP RDF RDT REL RF1 RFI RGS RMI ROL RQ1 RQD RXA RXC RXD RXE RXG RXO RXR SAC SCD SCH SCP SDD SFT SID SLT SPM STF STZ TCC TCD TQ1 TQ2 TXA UAC UB1 UB2 URD URS VAR VND ZCT ZPI CD1 CD2 CD3 ZVI ZEI ZBE ZQA ZAL ZWA ZPD ZNT ZBR ZBX ZNI ZN2 ZRX ZBP ZB2</Keywords>
        <Keywords name="Keywords2">CD: ## DONOTSEND</Keywords>
        <Keywords name="Keywords3">A B C D E F G H I J K L M N O P Q R S T U V W X Y Z AA BB CC DD EE FF GG HH II JJ KK LL MM NN OO PP QQ RR SS TT UU VV WW XX YY ZZ</Keywords>
        <Keywords name="Keywords4">NM TX ST DT</Keywords>
        <Keywords name="Keywords5">RE NW NA CA SC SN</Keywords>
        <Keywords name="Keywords6"></Keywords>
        <Keywords name="Keywords7"></Keywords>
        <Keywords name="Keywords8"></Keywords>
        <Keywords name="Delimiters">00 01 02 03 04 05 06 07 08 09 10 11 12 13 14 15 16 17 18 19 20 21 22 23</Keywords>
    </KeywordLists>
    <Styles>
        <WordsStyle name="DEFAULT" fgColor="000000" bgColor="FFFFFF" fontName="" fontStyle="0" nesting="0" />
        <WordsStyle name="COMMENTS" fgColor="8000FF" bgColor="FFFFFF" fontName="" fontStyle="0" nesting="2048" />
        <WordsStyle name="LINE COMMENTS" fgColor="8000FF" bgColor="FFFFFF" fontName="" fontStyle="0" nesting="0" />
        <WordsStyle name="NUMBERS" fgColor="0080C0" bgColor="FFFFFF" fontName="" fontStyle="0" nesting="0" />
        <WordsStyle name="KEYWORDS1" fgColor="0000FF" bgColor="FFFFFF" fontName="" fontStyle="5" nesting="0" />
        <WordsStyle name="KEYWORDS2" fgColor="FF0000" bgColor="FFFFFF" fontName="" fontStyle="1" fontSize="10" nesting="0" />
        <WordsStyle name="KEYWORDS3" fgColor="8000FF" bgColor="FFFFFF" fontName="" fontStyle="0" nesting="0" />
        <WordsStyle name="KEYWORDS4" fgColor="008000" bgColor="FFFFFF" fontName="" fontStyle="0" nesting="0" />
        <WordsStyle name="KEYWORDS5" fgColor="FF0000" bgColor="FFFFFF" fontName="" fontStyle="1" nesting="0" />
        <WordsStyle name="KEYWORDS6" fgColor="000000" bgColor="FFFFFF" fontName="" fontStyle="0" nesting="0" />
        <WordsStyle name="KEYWORDS7" fgColor="000000" bgColor="FFFFFF" fontName="" fontStyle="0" nesting="0" />
        <WordsStyle name="KEYWORDS8" fgColor="000000" bgColor="FFFFFF" fontName="" fontStyle="0" nesting="0" />
        <WordsStyle name="OPERATORS" fgColor="FF8000" bgColor="FFFFFF" fontName="" fontStyle="1" nesting="0" />
        <WordsStyle name="FOLDER IN CODE1" fgColor="000000" bgColor="FFFFFF" fontName="" fontStyle="0" nesting="0" />
        <WordsStyle name="FOLDER IN CODE2" fgColor="000000" bgColor="FFFFFF" fontName="" fontStyle="0" nesting="0" />
        <WordsStyle name="FOLDER IN COMMENT" fgColor="000000" bgColor="FFFFFF" fontName="" fontStyle="0" nesting="0" />
        <WordsStyle name="DELIMITERS1" fgColor="FF8000" bgColor="FFFFFF" fontName="" fontStyle="0" nesting="0" />
        <WordsStyle name="DELIMITERS2" fgColor="FF0000" bgColor="FFFFFF" fontName="" fontStyle="0" nesting="0" />
        <WordsStyle name="DELIMITERS3" fgColor="FF0000" bgColor="FFFFFF" fontName="" fontStyle="0" nesting="0" />
        <WordsStyle name="DELIMITERS4" fgColor="008000" bgColor="FFFFFF" fontName="" fontStyle="0" nesting="0" />
        <WordsStyle name="DELIMITERS5" fgColor="000000" bgColor="FFFFFF" fontName="" fontStyle="0" nesting="0" />
        <WordsStyle name="DELIMITERS6" fgColor="000000" bgColor="FFFFFF" fontName="" fontStyle="0" nesting="0" />
        <WordsStyle name="DELIMITERS7" fgColor="000000" bgColor="FFFFFF" fontName="" fontStyle="0" nesting="0" />
        <WordsStyle name="DELIMITERS8" fgColor="000000" bgColor="FFFFFF" fontName="" fontStyle="0" nesting="0" />
    </Styles>
</UserLang> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-13T21:22:23.710

为什么HL7需要使用Notepad++？

我使用[7Edit](http://www.7edit.com/home/index.php)。它有 21 天的免费试用期，价格为 99 美元（我向雇主支付了这笔费用）。
如果您喜欢免费，这里有[HL7 Inspector](http://sourceforge.net/projects/hl7inspector/)。我办公室的另一个人使用它。

这些是您应该用来编辑、查看、研究和验证您的 HL7 输出的强大开发工具的类型。您可以尝试许多其他程序，看看哪一个最适合您的需求。

这是 7Edit 的屏幕截图： ![在此处输入图像描述](../Images/298fc00590fddd2b90e007899a30ed4b.png)

# django - 超过 Django Celery 时间限制？

> ID：11037105
> 
> 赞同：15
> 
> 时间：2012-06-14T16:11:00.083
> 
> 标签：django, celery, django-celery

我一直收到这个错误...

```
[2012-06-14 11:54:50,072: ERROR/MainProcess] Hard time limit (300s) exceeded for movies.tasks.encode_media[14cad954-26e2-4511-94ec-b17b9a4149bb]

[2012-06-14 11:54:50,111: ERROR/MainProcess] Task movies.tasks.encode_media[bc173429-77ae-4c96-b987-75337f915ec5] raised exception: TimeLimitExceeded(300,)

Traceback (most recent call last): File "/srv/virtualenvs/filmlib/local/lib/python2.7/site-packages/celery/concurrency/processes/pool.py", line 370, in _on_hard_timeout raise TimeLimitExceeded(hard_timeout)
TimeLimitExceeded: 300 
```

即使我在我`CELERYD_TASK_TIME_LIMIT = 86400`的`CELERYD_TASK_SOFT_TIME_LIMIT = 86400`settings.py 中有项目。有谁知道为什么它仍然默认为300s？

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-14T19:55:14.807

修改你的 celeryd (/etc/init.d/celeryd) 设置。下面的示例将时间限制设置为 2 小时。

```
CELERYD_OPTS="--time-limit=7200 -E --loglevel=DEBUG" 
```

# php - 订单电子邮件的 Opencart 产品选项类型

> ID：11037106
> 
> 赞同：0
> 
> 时间：2012-06-14T16:11:02.107
> 
> 标签：php, opencart

我将如何修改订单电子邮件以便将文件添加到订单电子邮件？

当我检查帐户/下载中的代码时，这需要用户登录才能查看下载吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:53:30.010

虽然我不建议通过电子邮件发送大文件你必须编辑`Order model`它的方法-`confirm`在`/catalog/model/checkout/order.php`第 500 行左右的某个地方，有一封关于刚刚创建的订单的电子邮件发送给客户。

在这里您可以获取文件以供下载并将其添加为附件。

**编辑：**您不需要更改下载方法。我猜这会破坏列出下载的“我的帐户”部分。您唯一需要做的就是将应该包含（附加）的文件加载到（到）订单电子邮件中，附加并发送电子邮件......如果用户仍然想从您的eshop，他仍然必须登录 - 但这是正常行为，我不会改变它。

# python - 毫无例外地获取python回溯

> ID：11037109
> 
> 赞同：14
> 
> 时间：2012-06-14T16:11:20.593
> 
> 标签：python, stack-trace, pretty-print

假设你有这些模块：

## 模块1.py

```
import module2

def a():
    module1.b()

def c():
    print "Hi guys!" 
```

## 模块2.py

```
import module1

def b():
    module1.c() 
```

我想要一个`func(a())`产生与此类似的输出的函数： (=a traceback ?)

```
 /usr/local/lib/python2.7/dist-packages/test/module1.py
   3 def a():
   4     module1.b()

   1 import module1

 /usr/local/lib/python2.7/dist-packages/test/module2.py
   3 def b():
   4     module1.c()

   1 import module2

 /usr/local/lib/python2.7/dist-packages/test/module1.py
   6 def c():
   7     print "Hi guys!" 
```

`traceback`标准模块和/或`cgitb`和/或可能有可能，`inspect`但我很难从文档中找出这些模块。

我认为这是可能的，`traceback.print_stack(a())`但由于某种原因它只是一直在加载。我在这些模块中尝试了其他功能，但没有成功。

## 更新 3

@jterrace

python trapy_module.py ：

```
import trace

def trapy(arg):
    tracer = trace.Trace()
    tracer.run(arg)
    r = tracer.results()
    r.write_results()

if __name__ == '__main__':
    import random
    trapy('random.random()') 
```

现在当我这样做时： `python trapy_module.py`我得到：

```
--- modulename: trapy, funcname: <module>
<string>(1): 
```

替换`import random`为`import pyglet`和只是继续运行而不输出任何内容`random.random()`。`pyglet.app.run()`

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-14T17:56:34.180

[traceback.print_stack](http://docs.python.org/library/traceback.html#traceback.print_stack)很适合我：

```
>>> import traceback
>>> def what():
...    traceback.print_stack()
... 
>>> def hey():
...    what()
... 
>>> hey()
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 2, in hey
  File "<stdin>", line 2, in what 
```

**更新：**

你已经明确表示你真的不想要追溯。您需要跟踪信息。您可以通过以下方式获取一些跟踪信息：

```
#tracetest.py

def what():
    return 3

def hey():
    return what()

def yo():
    return hey()

import trace
tracer = trace.Trace()
tracer.run("yo()")
r = tracer.results()
r.write_results() 
```

并运行上述：

```
$ python tracetest.py
 --- modulename: tracetest, funcname: <module>
<string>(1):   --- modulename: tracetest, funcname: yo
tracetest.py(8):     return hey()
 --- modulename: tracetest, funcname: hey
tracetest.py(5):     return what()
 --- modulename: tracetest, funcname: what
tracetest.py(2):     return 3 
```

# silverlight - 应用程序退出时 RIA 服务不提交

> ID：11037112
> 
> 赞同：1
> 
> 时间：2012-06-14T16:11:27.163
> 
> 标签：silverlight, silverlight-4.0, wcf-ria-services

我们有一个 Silverlight 应用程序，它需要在应用程序退出之前保存一些数据。我们正在使用 RIA 服务，并实现 IApplicationLifetimeAware 接口。我们看到 SubmitChanges 方法被调用，但从未看到回调（参见下面的伪代码）。此外，我们看到当我们调用 SubmitChanges 时，从来没有通过网络发送任何请求。有没有办法做到这一点？

```
public class ApplicationLifetimeMessenger : IApplicationService, IApplicationLifetimeAware
{
    private DomainContext context;

    public void Exiting()
    {
        context.SubmitChanges(OnSubmitCompleted);
    }

    private void OnSubmitCompleted(SubmitOperation op)
    {
        // Never gets here
    }

    // Other interface methods
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T22:31:55.547

尝试使用提交操作。

```
SubmitOperation so = Context.SubmitChanges();                  
so.Completed += new EventHandler(so_Completed); 
```

# algorithm - 解决TSP时遗传算法应该有多远

> ID：11037114
> 
> 赞同：0
> 
> 时间：2012-06-14T16:11:36.450
> 
> 标签：algorithm, genetic-algorithm

我正在学习遗传算法，并且正在练习旅行商问题。

我想知道我应该实际期望 GA 能够做什么。

我在这里尝试了 15 个城市和 48 个城市的问题[TSP 示例问题](http://people.sc.fsu.edu/~jburkardt/f_src/tsp_io/tsp_io.html)

我的 GA 很快就找到了 15 个城市问题的确切解决方案。然而，它与 48 城市问题作斗争。我尝试了各种规格的儿童数量和人口规模，我的结果大致是这样的：

正确解最小距离：33,551

我的 GA 解决方案距离：~39,000

随机路线距离：~140,000

我知道 GA 不能保证给出确切的解决方案，而只能提供一个接近的解决方案，这基本上就是正在发生的事情。

我的问题是：对于 48 个城市的问题，我离 GA 算法还差多远，还是我做错了什么，我的 GA 需要一些重大改进？

先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T16:22:00.170

城市数量越多，问题就越难，这不仅是因为搜索空间更大，还因为成本函数通常变得更加复杂。

总是很难（如果不是不可能的话）说明启发式算法的性能如何（不仅仅是 GA，而是所有这些），但在我看来，16% 的折扣是一笔不小的数目。我相信如果您更改运算符并稍微修改参数，性能可能会有所提高。

每个操作员对结果都有限制和期望。例如，您的交叉算子（如您在上一篇文章中所述）往往会增加具有相同子路径的染色体数量，从而导致遗传收敛，而您使用的变异算子并不是最具攻击性的算子之一。因此，我建议您使用其他运算符，看看性能是否有所提高。您可以使用我之前对您的回答中的所有参考资料来正确理解它们，并且实施不应该太难，因为一旦您理解它们就很简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T17:17:11.633

我认为你绝对可以改进这一点。我的目标是误差不超过 5%，最好是`~1%`.

# php - Symfony2 将上传的文件分配到内存

> ID：11037115
> 
> 赞同：4
> 
> 时间：2012-06-14T16:11:47.333
> 
> 标签：php, symfony, symfony-forms

在 Symfony 中上传大于**post_max_size**的文件时，上传的文件被分配在内存中。

> **致命错误：**第 28 行 /Applications/MAMP/htdocs/Symfony/vendor/symfony/src/Symfony/Component/HttpKernel/DataCollector/DataCollector.php 中允许的内存大小为 150994944 字节（试图分配 84627994 字节）

**为什么 symfony 试图在 POST 上分配一个文件到内存？**

**1/ php.ini**

```
file_uploads = On
upload_tmp_dir = /Applications/MAMP/tmp/php
upload_max_filesize = 32M
post_max_size = 48M 
```

**2/ 控制器**

```
<?php
//AcmeDemoBundle/Controller/DemoController
namespace Acme\DemoBundle\Controller;
use Symfony\Component\HttpFoundation\Request;

class DemoController extends Controller
{

public function createAction(Request $request)
{

    if ($request->getMethod() == 'POST')
    {
        if ($_FILES["file"]["size"] < 3000000 )//3Mb
        {
            if ($_FILES["file"]["error"] > 0)
            {
                echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
            }
            else
            {
                if (empty($_POST) && empty($_FILES) && isset($_SERVER['REQUEST_METHOD']) && strtolower($_SERVER['REQUEST_METHOD']) == 'post')
                {
                    echo "The file is bigger than post_max_size in php.ini.";
                }
                else
                {
                    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";

                    if (file_exists("upload/" . $_FILES["file"]["name"]))
                    {
                        echo $_FILES["file"]["name"] . " already exists. ";
                    }
                    else
                    {
                        move_uploaded_file($_FILES["file"]["tmp_name"],
                            "upload/" . $_FILES["file"]["name"]);
                        echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
                    }
                }
            }
        }
        else
        {
            echo "Invalid file";
        }

    }

    return $this->container->get('templating')->renderResponse('AcmeDemoBundle:Demo:create.html.twig');

} 
```

**3/ 模板**

```
//AcmeDemoBundle/Resources/views/Demo/create.html.twig
{% extends "AcmeDemoBundle::layout.html.twig" %}

{% block content %}

<h1>Upload File</h1>

<form action="#" method="post"
      enctype="multipart/form-data">
    <label name="file">Filename:</label>
    <input type="file" name="file" id="file" />
    <br />
    <input type="submit" name="submit" value="Submit" />
</form>

{% endblock %} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-15T19:16:28.817

我假设您正在通过 app_dev.php 前端控制器尝试 symfony。

默认情况下，在开发环境中，为每个请求启用分析器。

```
framework:
    profiler: { only_exceptions: false } 
```

只需将 only_exceptions 参数从 false 更改为 true，然后重试。

框架：分析器：{ only_exceptions: true }

您应该使用框架为您提供的工具来处理文件上传。

**行动：**

```
public function createAction(Request $request)
{
    $form = $this->createFormBuilder()
        ->add('attachment', 'file')
        ->getForm();

    if ($request->getMethod() == 'POST') {
        $form->bindRequest($request);

        if ($form->isValid()) {
            $file = $form['attachment']->getData(); /** @var $file \Symfony\Component\HttpFoundation\File\UploadedFile */

            echo $file->getClientSize();
        }
    }

    return $this->render('AcmeDemoBundle:Demo:create.html.twig', array(
        'form' => $form->createView(),
    ));
} 
```

**模板：**

```
{% extends "AcmeDemoBundle::layout.html.twig" %}

{% block content %}

<h1>Upload File</h1>

<form action="" method="post" {{ form_enctype(form) }}>
    {{ form_errors(form) }}

    {{ form_row(form.attachment) }}

    {{ form_rest(form) }}

    <input type="submit" />
</form>

{% endblock %} 
```

使用此代码，php 永远不会超过内存使用量。如果文件太大，表单会报错，“if ($form->isValid())”里面的代码不会被执行。

查看表单文档：[http](http://symfony.com/doc/current/book/forms.html) ://symfony.com/doc/current/book/forms.html 和“文件”字段类型的参考： http: [//symfony.com/doc/current/reference/表格/类型/file.html](http://symfony.com/doc/current/reference/forms/types/file.html)

# excel - 需要根据相邻列的值查找/替换一列中的值

> ID：11037118
> 
> 赞同：0
> 
> 时间：2012-06-14T16:12:00.220
> 
> 标签：excel, excel-formula

无需编写 VBA 代码，有没有办法编写一个公式来执行以下操作：

*   遍历每一行（比如 $i）。
*   如果值 (B,$i) = 2000 & (A,$i) = 1，则更改 (B,i) = 3327

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:22:31.403

弄清楚了。

```
=IF(B2=1,C2,IF(C2=2000,3325,IF(OR(C2=2001,C2=102),3327,IF(C2=2003,3329,C2)))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T16:25:11.027

包裹在 For 循环中的 if 语句：

```
Dim x    'Beginning Row
Dim y    'Ending Row

For myLoop = x to y
  If Cells(x,1)= 2000 and Cells(x,2) = 1 then
    Cells(x,3 [or a formula to calculate] )=3327
  End If
Next myLoop 
```

# xamarin.ios - MvvmCross 使用选项卡中的模态 ViewController

> ID：11037119
> 
> 赞同：5
> 
> 时间：2012-06-14T16:12:03.277
> 
> 标签：xamarin.ios, modal-dialog, viewcontroller, mvvmcross

我已经在 SO 和其他地方搜索了 MvvmCross 和 Modal，但是现有的一个答案对我们没有帮助。

我们正在使用 MonoTouch 和 MvvmCross 开发一个跨平台应用程序，这似乎是一个非常强大的组合。但是，我们在导航方面遇到了一些问题，我们正在逐步解决这些问题！目前的问题是——

该应用程序使用 TabBarController 运行，并且每个选项卡都可以导航到更多级别 - 这很好用。然而，客户端希望其中一个选项卡上的“开始”按钮显示一个模式视图（隐藏其他所有内容，尤其是选项卡栏），然后它有自己的级别，其工作方式与 UINavigationController 相同，具有能力随时弹回 tabBarController。

我们已经设法调出一个模态视图，但是我们一直停留在从这里加载新视图并弹出回来。

任何帮助/建议表示赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T16:27:32.363

我认为您要做的是自定义演示者，以便它将您的 UIViewController 包装在 UINavigationController 中 - 然后以模态方式呈现该 UINavigationController？

为了实现这一点，@DeapSquatter 最近的 Pull 请求中的代码可能会有所帮助 - [https://github.com/slodge/MvvmCross/pull/9](https://github.com/slodge/MvvmCross/pull/9) - 我认为您可以使用他的[模态导航演示](https://github.com/deapsquatter/MvvmCross/blob/49a7a135bfd8d4f4ea211ce791816eac36a379be/Cirrious/Cirrious.MvvmCross/Touch/Views/Presenters/MvxModalNavSupportTouchViewPresenter.cs) 器来实现您的效果寻找：

```
 if (view is IMvxModalTouchView)
        {
            if (_currentModalViewController != null)
                throw new MvxException("Only one modal view controller at a time supported");

            var newNav = new UINavigationController();
            newNav.PushViewController(view as UIViewController, false);

            _currentModalViewController = view as UIViewController;

            PresentModalViewController(newNav, true);
            return;
        } 
```

mvvmcross 的架构在这里是故意可扩展和可配置的——虽然我们包含了一些基本的 Presenter 类，但人们很可能希望在逐个应用程序的基础上自定义不同视图的呈现方式。除了最简单的演示应用程序之外，我预计大多数 mvvmcross 触摸应用程序都将附带一个自定义演示器。

希望有帮助

斯图尔特

# ms-access - 如何有效地比较 Access 中两个表中的字符串值？

> ID：11037120
> 
> 赞同：2
> 
> 时间：2012-06-14T16:12:04.417
> 
> 标签：ms-access, vba

我在 Access 2010 中创建了一个 VBA 函数，用于将一个表中的术语列表与另一个表中的术语列表进行比较。如果这些值是相似的（不一定是完全匹配），我会从第二个表中的列中为每个匹配项求和。表 A 有大约 150 个术语。TableB 有大约 50,000 个具有相关计数（整数）的术语。

示例表：

```
TableA             TableB
---------          ----------
ID                 ID
Term               Term
                   Count 
```

我有一个简单的 SQL 查询，它调用 VBA 函数来比较术语，如果它们有模糊匹配，则对计数求和。

SQL：

```
SELECT TableA.[Term], TermCheck(TableA.[Term]) AS [Term Count] FROM TableA ORDER BY 2 DESC; 
```

VBA：

```
Option Compare Database

Public Function TermCheck(Term) As Long

    Dim rst As DAO.Recordset
    Set rst = CurrentDb.OpenRecordset("TableB", dbOpenDynaset)
    Dim ttl As Long
    ttl = 0

    With rst
        While Not .EOF
            If rst(1) Like "*" & Term & "*" Then
                ttl = ttl + rst(2)
            End If
            .MoveNext
        Wend
    End With

    rst.Close
    Set rst = Nothing

    CurrentDb.Close

    TermCheck = ttl

End Function 
```

我遇到的问题是它使用了我大约 50% 的 CPU，我想让它尽可能轻量级。是否有更有效的方法来使用 Access 完成此任务？在这一点上，转向纯粹的 SQL 替代方案不是一种选择，尽管它会让我更开心。我不是 Access 或 VBA 专家，但我觉得我在查询中遗漏了一些可以提高性能的明显内容。

编辑：

预期的结果将列出 TableA 中的所有术语以及发生模糊匹配的 TableB 中的计数列的总和。

示例数据：

```
TableA
-------------
1 blah
2 foo
3 bar
4 zooba

TableB
-------------
1 blah    16
2 blah2   9
3 foo     7
4 food    3
5 bar     3 
```

示例结果：

```
Term          Count
---------------------
blah          25
foo           10
bar           3
zooba         0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:23:55.120

在这些线上？

```
SELECT ta.ID, tb.Term, ta.Term, tb.Count
FROM ta, tb
WHERE ta.Term Like "*" & tb.term & "*";

ID  tb.Term  ta.Term  Count
2   hat      hat      2
3   hat      the hat  2
3   the hat  the hat  4
4   mat      mat      6
5   mat      matter   6
5   matter   matter   8 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T18:33:54.347

```
SELECT
    TableA.Term,
    Nz(subq.SumOfCount, 0) AS Count
FROM
    TableA
    LEFT JOIN
    (
        SELECT a.Term, Sum(b.Count) AS SumOfCount
        FROM TableA AS a, TableB AS b
        WHERE b.Term ALike '%' & a.Term & '%'
        GROUP BY a.Term
    )  AS subq
    ON TableA.Term = subq.Term; 
```

**编辑**：我使用`ALike`了标准的 ANSI 通配符。这允许查询正确运行，无论它是从 SQL-89 还是 SQL-92 模式运行。如果您更喜欢 * 通配符，请使用此版本的`WHERE`子句：

```
WHERE b.Term Like '*' & a.Term & '*' 
```

请注意，只有在 SQL-89 模式下运行时才会正确匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-15T19:43:41.600

我通常使用 iif 构建表达式：

```
TestFlag:iif([TableA]![Term] = [TableB]![Term],"Same","Different") 
```

# html - é 标题标签中的 HTML 实体代码

> ID：11037123
> 
> 赞同：13
> 
> 时间：2012-06-14T16:12:09.347
> 
> 标签：html, html-escape-characters

我正在尝试在我网站的标题标签中使用 HTML 实体代码作为“é”，但它似乎不适用于任何浏览器。如果我在标题中输入法文对应的“派对：”：

```
<title>part&eacute;</title> 
```

当它呈现时，我会`part&eacute;`进入所有浏览器的标题栏。当我使用 'é' 字符时，它确实有效。有谁知道这是怎么回事？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-14T16:43:47.610

`title`实体引用在元素中工作正常（至少与直接输入的字符一样好） 。这个问题很可能是由在作者查看文件时*看起来像是*对作者的实体引用引起的——浏览器获取的数据不包括它。一些软件用于从一些包含的文件生成 HTML 文档，`&eacute;`但该软件不会简单地将其传递，而是例如转换`&`为`&amp;`.

这可以使用浏览器中的查看源代码进行检查。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T16:18:09.547

我试过了

```
<!DOCTYPE html>     
<meta http-equiv="Content-type" content="text/html; charset=utf-8">
<title>&eacute;</title>
<div>&eacute;</div> 
```

它有效（FF13）

# objective-c - 使用 cocos2d 和 box2d 在 iphone 游戏中滑动和跳跃效果

> ID：11037131
> 
> 赞同：-4
> 
> 时间：2012-06-14T16:12:44.887
> 
> 标签：objective-c, cocos2d-iphone, box2d-iphone

我有一个问题。如何使用 cocos2d 和 box2D 在 iPhone 游戏中实现上下跳跃效果（左右滑动效果），就像在寺庙跑和地铁冲浪者应用程序中一样。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:23:26.487

你会想看看[UISwipeGestureRecognizer](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UISwipeGestureRecognizer_Class/Reference/Reference.html)。如需获取与 Cocos2D 一起使用的滑动手势识别器的帮助，[请查看此处。](https://stackoverflow.com/questions/4985917/cocos2d-ios-gesture-recognisers)

简短的介绍是这样的：

1.  设置您的手势识别器（方向、数字、选择器/目标）。
2.  将手势识别器附加到 glView
3.  设置在检测到滑动时触发的事件。这是您将进行向上/向下跳跃的地方。
4.  当您不再需要手势识别器时，请拆除它。

附带说明，一点点[研究](https://meta.stackexchange.com/a/128553)会产生奇迹。所有这些信息都可以通过快速的谷歌搜索获得。

# sql - 调整插入到 SQL

> ID：11037132
> 
> 赞同：0
> 
> 时间：2012-06-14T16:12:49.393
> 
> 标签：sql, insert-into

我已经开始工作了；

```
 INSERT INTO TermsFinal 
            (old_classification, count, new_classification, old_term,new_term) 
        SELECT  old_classification   , Count(seed) AS count , new_classification, old_term, new_term FROM   TermsTemp
            GROUP  BY old_classification
            ORDER  BY count DESC 
```

在TermsFinal 中还有一个名为SOURCE_TABLE 的字段，TermsTemp 没有该字段。我也想填充该字段。我已经得到了 $source_table 值。我试过这个但不工作。

```
 INSERT INTO TermsFinal 
            (SOURCE_TABLE,old_classification, count, new_classification, old_term,new_term) 
    '{$SOURCE_TABLE}',  SELECT  old_classification   , Count(seed) AS count , new_classification, old_term, new_term FROM   TermsTemp_TEMP
            GROUP  BY old_classification
            ORDER  BY count DESC 
```

如何在一次性执行 insert into 语句时将该值添加到 TermsFinal 的 SOURCE_TABLE 字段中？

还有一个令我困惑的事情是，我的第一个 SQL insertinto 是如何在没有 SQL 关键字 VALUES 的情况下工作的。此页面[http://www.w3schools.com/sql/sql_insert.asp](http://www.w3schools.com/sql/sql_insert.asp)教导需要**VALUES**部分！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T16:18:08.097

您可以将字符串（或任何其他类型）常量放入选择中，例如 `select 'string' as const_str , field1 from table1`将返回 2 列，第一列将具有所有行的“字符串”文本。在你的情况下，你可以做

```
 INSERT INTO TermsFinal 
        (SOURCE_TABLE,old_classification, count, new_classification, old_term,new_term) 
  SELECT  '{$SOURCE_TABLE}', old_classification   , Count(seed) AS count , new_classification, old_term, new_term FROM   TermsTemp_TEMP
        GROUP  BY old_classification
        ORDER  BY count DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T16:39:57.767

有几种方法可以将数据插入表中

**一次一排。**这是您需要 values 关键字的地方。

```
Insert into TableA (Col1, Col2,...) values (@Val1, @Val2,...) 
```

如果您启用了自动标识，则可以使用 select @@identity （至少在 ms sql 中）获取 id。当您需要下次插入的 ID 时，这很有用。

**从选择**（你在做什么）

```
Insert into tableA (Col1, Col2)
Select Val1, Val2 from TableB 
```

或从两个单独的表中插入硬编码值和值

```
Insert into tableA (Col1, Col2, Col3, Col4)
Select 'hard coded value', b.Val1, b.Val2, c.Val1 
from TableB b join Table c on b.TableCID=c.ID 
```

现在您可以一次插入多行。

**选择进入**

此方法最终从查询创建一个新表，非常适合快速备份表或表的一部分。

```
select * into TermsFinal_backup from TermsFinal where ... 
```

# ios - cocos2d 2.0-rc2：结束director并重启

> ID：11037134
> 
> 赞同：7
> 
> 时间：2012-06-14T16:12:53.327
> 
> 标签：ios, iphone, cocos2d-iphone

我有一个使用 UIKit 菜单的 cocos2d 驱动的游戏，所以我只使用一个视图控制器的框架，这就是游戏本身。而且，它只有一个场景。由于 cocos2d 2.0，director 本身是一个子类，所以我只是在用户点击开始按钮时`UIViewController`将其推入我的：`MenuViewController`

```
-(void)startGameButtonPressed {

    CCDirectorIOS* director = (CCDirectorIOS *) [CCDirector sharedDirector];

    // Create an CCGLView with a RGB565 color buffer, and a depth buffer of 0-bits
    self.glView = [CCGLView viewWithFrame:CGRectMake(0, 0, 480, 320)
                              pixelFormat:kEAGLColorFormatRGB565    //kEAGLColorFormatRGBA8
                              depthFormat:0 //GL_DEPTH_COMPONENT24_OES
                       preserveBackbuffer:NO
                               sharegroup:nil
                            multiSampling:NO
                          numberOfSamples:0];

    // attach the openglView to the director
    [director setView:glView];
    [director runWithScene:[GameLayer scene]];
    [director setDelegate:(id <CCDirectorDelegate>) [[UIApplication sharedApplication] delegate]];
    [self.navigationController pushViewController:director animated:YES];
} 
```

当用户开始第一个游戏时，这在第一次调用该方法时工作正常。比赛结束后，我打电话给`[[CCDirector sharedDirector] end]`。

大多数director 设置在appDelegate 中完成（它与默认的Cocos2d 模板保持不变）。我只将`CCGLView`作为保留属性放入我的`MenuViewController`中，否则应用程序在`[[CCDirector sharedDirector] end]`被调用时崩溃并且`CCGLView`不保留。我认为这可能是一个 cocos2d 错误。在`[[CCDirector sharedDirector] end]`框架调用`[self setView:nil]`中，但它稍后仍会尝试访问视图（可能在另一个线程上）。

现在的问题是，在我上面的方法的第二次调用中（当用户想要从菜单开始另一个游戏时），`startGameButtonPressed`导演被推动但屏幕仍然是黑色的。游戏正在运行并响应，我只是什么也没看到。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T05:00:16.507

好的，我有同样的问题，我能够“修复它”。

当你设置 CCGLView 和 [director setView:] 时，即使你弹出控制器场景仍然存在。唯一发生的事情是场景停止了。

所以为了让“重启”工作，你必须检查是否已经有一个正在运行的场景（即使它已经停止，而不是`runWithScene:`你使用`replaceScene:`.

这是我的代码，因此您可以看到：

```
- (void)setupCocos2D {
    CCGLView *glView = [CCGLView viewWithFrame:CGRectMake(0, 0, 320, 480)
                               pixelFormat:kEAGLColorFormatRGB565   //kEAGLColorFormatRGBA8
                               depthFormat:0    //GL_DEPTH_COMPONENT24_OES
                        preserveBackbuffer:NO
                                sharegroup:nil
                             multiSampling:NO
                           numberOfSamples:0];

// HERE YOU CHECK TO SEE IF THERE IS A SCENE RUNNING IN THE DIRECTOR ALREADY    
if(![director_ runningScene]){
    [director_ setView:glView]; // SET THE DIRECTOR VIEW
    if( ! [director_ enableRetinaDisplay:YES] ) // ENABLE RETINA
        CCLOG(@"Retina Display Not supported");

    [director_ runWithScene:[HelloWorldLayer scene]]; // RUN THE SCENE

} else {
    // THERE IS A SCENE, START SINCE IT WAS STOPPED AND REPLACE TO RESTART
    [director_ startAnimation];
    [director_ replaceScene:[HelloWorldLayer scene]];
}      

[director_ setDelegate:(id <CCDirectorDelegate>) [[UIApplication sharedApplication] delegate]];

// I DO NOT PUSH BECAUSE I ALREADY PUSHED TO THIS CONTROLLER, SO I ADD THE COCOS2D VIEW AS A SUBVIEW
[self.view addSubview:[director_ view]];

} 
```

希望这段代码对您有所帮助，因为我花了一整天的时间试图弄清楚这一点。它可能不是正确的方式，甚至不是最漂亮的方式，但它正在工作:)

**编辑：** 另外，如果您弹出 COCOS2D 场景，请不要这样做，`[[CCDirector sharedDirector] end]`因为当视图被释放/删除时动画将停止。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-18T22:56:03.710

我花了几天时间寻找与此相关的信息，并将与您分享我自己的经验。我也在尝试创建一个加载到 UITableViewController 中的游戏，当一个单元格被触摸时，CCDirector 会从该控制器中加载。这是一个 Game Center 回合制游戏，因此设计（想想 Words With Friends）。到目前为止，我为此找到的最佳方法如下（注意我在 2.0 中工作 - 其中 CCDirector 是 UIViewController 子类）：

在 AppDelegate.h 中，创建一个新的 ivar 来保存从模板代码创建的 CCGLView。然后将在 didFinishLaunching 中创建的 CCGLView 分配给您的新 ivar。这允许导演重用最初创建的视图，而不是每次重新加载 CCDirector 时都尝试重新创建它，这在我的经验中似乎会导致各种奇怪的问题。

您还想在 AppDelegate 中创建一个名为 -setupDirector 的新方法或类似的方法，您将在其中设置导演。每次重新创建 CCDirector 时都应该调用它。我已经在下面发布了我的版本。注意我的 CCGLView 的 ivar 被称为“GLView”。

```
- (void)setupDirector {
if (![CCDirector sharedDirector]) {
    CCLOG(@"Calling setupDirector");

    director_ = (CCDirectorIOS*) [CCDirector sharedDirector];

    director_.wantsFullScreenLayout = YES;

    // Display FSP and SPF
    [director_ setDisplayStats:NO];

    // set FPS at 60
    [director_ setAnimationInterval:1.0/60];

    // attach the openglView to the director
    [director_ setView:GLView];

    // for rotation and other messages
    [director_ setDelegate:self];

    // 2D projection
    [director_ setProjection:kCCDirectorProjection2D];
    //  [director setProjection:kCCDirectorProjection3D];

    // Enables High Res mode (Retina Display) on iPhone 4 and maintains low res on all other devices
    if( ! [director_ enableRetinaDisplay:YES] )
        CCLOG(@"Retina Display Not supported");

    // Default texture format for PNG/BMP/TIFF/JPEG/GIF images
    // It can be RGBA8888, RGBA4444, RGB5_A1, RGB565
    // You can change anytime.
    [CCTexture2D setDefaultAlphaPixelFormat:kCCTexture2DPixelFormat_RGBA8888];

    // If the 1st suffix is not found and if fallback is enabled then fallback suffixes are going to searched. If none is found, it will try with the name without suffix.
    // On iPad HD  : "-ipadhd", "-ipad",  "-hd"
    // On iPad     : "-ipad", "-hd"
    // On iPhone HD: "-hd"
    CCFileUtils *sharedFileUtils = [CCFileUtils sharedFileUtils];
    [sharedFileUtils setEnableFallbackSuffixes:NO];             // Default: NO. No fallback suffixes are going to be used
    [sharedFileUtils setiPhoneRetinaDisplaySuffix:@"-hd"];      // Default on iPhone RetinaDisplay is "-hd"
    [sharedFileUtils setiPadSuffix:@"-ipad"];                   // Default on iPad is "ipad"
    [sharedFileUtils setiPadRetinaDisplaySuffix:@"-ipadhd"];    // Default on iPad RetinaDisplay is "-ipadhd"

    // Assume that PVR images have premultiplied alpha
    [CCTexture2D PVRImagesHavePremultipliedAlpha:YES];
} 
```

此外，您还需要对模板加载视图控制器的方式进行一些更改。通常 cocos2D 会设置以 director_ 作为根视图控制器的导航控制器。在这里，您要分配并初始化您的菜单视图控制器并添加 THAT 而不是 director_：

```
// Create a Navigation Controller with the Director
gamesTVC_ = [[GamesTableViewController alloc] initWithStyle:UITableViewStyleGrouped];
navController_ = [[UINavigationController alloc] initWithRootViewController:gamesTVC_];
navController_.navigationBarHidden = NO; 
```

didFinishLaunching 中的其他所有内容都可以保持不变。现在，在您的 startGameButtonPressed 方法中的 menuViewController 中，您将在您的应用实例上调用新创建的 setupDirector 方法，该方法通过调用来引用：

```
AppController *app = (AppController *)[[UIApplication sharedApplication] delegate];
if ([CCDirector sharedDirector].runningScene) {
    [[CCDirectorIOS sharedDirector] end];
}
[app setupDirector];
[app.navController pushViewController:app.director animated:YES]; 
```

我包括一个检查以确保 CCDirector 没有仍在运行，如果是，则结束它。在您的游戏层中，当您想要弹出视图控制器时，您只需像这样调用它：

```
AppController *app = (AppController *)[[UIApplication sharedApplication] delegate];
[app.navController popViewControllerAnimated:YES];
[[CCDirector sharedDirector] end]; 
```

这个流程应该允许您自由地使用导航控制器通过 CCDirector 推送您的游戏场景，并在您想要返回基于 UIKit 的主菜单时弹出该视图控制器。我希望这会有所帮助，因为我花了很多令人沮丧的时间来尝试为我自己的游戏做好准备。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T22:56:20.807

行之有效的方法是在 director 中调用 startAnimation 和 stopAnimation，但保留 cocos2d 视图并重新使用它。

任何关闭 cocos2d 及其 OpenGL 视图并稍后重新初始化它的尝试都会导致或多或少的问题，因为它确实没有经过足够好的测试。除了 cocos2d 与 UIKit 配合得很好之外，它与任何其他 OpenGL ES 应用程序在与 UIKit 视图混合时遇到的问题相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T16:21:43.290

根据我的经验，Cocos 并不真正支持结束和恢复，它的行为就像它已经完成并且几乎会自行关闭。

你可以尝试两件事，第一件事（我刚想到）是`CC_DIRECTOR_INIT`在导演结束后和你想重新开始之前打电话（可能不是确切的名字）。

第二个是编辑director源代码，修改`end`方法，让cocos处于可用状态（阻止它释放视图和清除缓存等）。或者，您可以修改该`start`方法，以确保 Cocos 在启动之前处于可用状态。

遗憾的是，Cocos 并没有让我们使用 UIKit+Cocos 变得容易，但运气好的话。

# image-processing - 稀疏光流和密集光流有什么区别？

> ID：11037136
> 
> 赞同：27
> 
> 时间：2012-06-14T16:12:55.320
> 
> 标签：image-processing, computer-vision, opticalflow

很多资源说有两种类型的光流算法。而Lucas-Kanade是一种稀疏技术，但我找不到稀疏和密集的含义？有人能告诉我密集光流和稀疏光流有什么区别吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-15T09:33:20.177

简短的解释是，稀疏技术只需要处理整个图像中的一些像素，密集技术处理所有像素。密集技术速度较慢但可能更准确，但根据我的经验，Lucas-Kanade 准确度可能足以满足实时应用程序的需要。密集光流算法（最流行）的一个例子是 Gunner Farneback 的光流。

要了解流量质量，请查看基准页面，例如[KITTI](http://www.cvlibs.net/datasets/kitti/eval_stereo_flow.php?benchmark=flow)或[Middleburry](http://vision.middlebury.edu/flow/eval/results/results-e1.php)数据集

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-15T13:04:11.810

稀疏光流为您提供图像中一些“有趣特征”的流向量。

密集的光流试图为您提供整个图像的流 - 每个像素最多一个流向量。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-12-10T06:40:09.320

首先，Lucas-Kanade 不是稀疏光流技术。之所以这么多人相信，是因为广泛存在的误解。自从在 OpenCV 中 Lucas-Kanade 的第一个实现被标记为 SPARSE 以来，这种误解成为了公认的事实，并且直到今天仍然如此。为什么 Lucas-Kanade 应该被称为稀疏的论点适用于任何密集流算法。如果你坚持 Lucas-Kanade 是稀疏的，那么所有的流算法都是稀疏的，区分它们是没有意义的。

稀疏流与点跟踪相同，密集流由视频上的向量组成，表示固定位置的运动估计。

[您可以在我编写](https://se.mathworks.com/matlabcentral/fileexchange/44400-tutorial-and-toolbox-on-real-time-optical-flow)的本教程中阅读有关所有这些的更多信息，其中我还展示了 Lucas-Kanade 如何与其他任何算法一样密集（尽管不那么准确）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-06-26T06:47:06.210

稀疏光流 - Lucas-Kanade 方法计算稀疏特征集的光流（例如，使用 Shi-Tomasi 算法检测到的角点）。密集光流 - Gunner Farneback 的算法计算帧中所有点的光流。Gunner Farneback 在 2003 年的“基于多项式展开的双帧运动估计”中对此进行了解释。

的示例实现可以[在此处的 opencv 文档中找到](http://docs.opencv.org/trunk/d7/d8b/tutorial_py_lucas_kanade.html)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-01-27T15:41:29.847

稀疏光流适用于特征（边缘、角落等）。密集光流设计用于所有像素。第一个的优点是它通常更快，而第二个可以比第一个给出更多像素的估计。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-05-29T10:03:43.957

稀疏光流为您提供一些有趣（角）点的速度矢量，这些点是使用 Shi-Tomashi、Harris 等算法预先提取的。提取的点与当前图像和下一个图像一起传递到您的 [光流函数]图片。任何良好的光流功能都应使用上述角点检查正向的光流，并使用回溯来交叉检查它是否遵循相同的点。

另一方面，密集光流可以从这里参考：[http ://www.cs.toronto.edu/~fleet/courses/cifarSchool09/flowChapter05.pdf](http://www.cs.toronto.edu/~fleet/courses/cifarSchool09/flowChapter05.pdf)

# ruby-on-rails-3 - Rails 3 - set_routes_reloader - 真的很慢......为什么

> ID：11037137
> 
> 赞同：1
> 
> 时间：2012-06-14T16:12:56.973
> 
> 标签：ruby-on-rails-3

使用这篇文章中描述的 railties 补丁：[slow rails stack](https://stackoverflow.com/questions/4461346/slow-rails-stack)，我注意到步骤“set_routes_reloader”通常需要超过 3 秒。

这是预期的吗？如果没有，我可能做错了什么和/或我如何弄清楚我是否做错了什么，等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:51:54.147

在我们的例子中，问题是我们定义了太多的路线。set_routes_reloader 步骤加载您的路线（正如您可能猜到的）。通过添加适当的 :except/:only 参数，我们得到了很多好处。

可能对您有所帮助的是[traceroute](https://github.com/amatsuda/traceroute/) gem，它为您提供了一个没有关联控制器操作的路由列表。我编写了一个一次性脚本来处理我们的 traceroute 输出并更新我们的 routes.rb 文件。你可以在[这里](https://gist.github.com/3286702)找到它。

# c++ - clang 的扫描构建不适用于简单的 cpp 文件

> ID：11037139
> 
> 赞同：8
> 
> 时间：2012-06-14T16:13:01.907
> 
> 标签：c++, clang, static-analysis

我无法让 clang`c++-analyzer`处理玩具 C++ 文件。

```
#include <iostream>

using namespace std;

int main()
{
    int t[4];
    int x,y;

    t[5]=1;
    if(x)
        y = 5;
    x = t[y];
} 
```

makefile 只是

```
all: t.cpp
    $(CXX) t.cpp 
```

`scan-build make`输出：

```
scan-build: 'clang' executable not found in '/usr/share/clang/scan-build/bin'.
scan-build: Using 'clang' from path: /usr/bin/clang
/usr/share/clang/scan-build/c++-analyzer t.cpp
scan-build: Removing directory '/tmp/scan-build-2012-06-14-6' because it contains no reports. 
```

如何使 c++-analyzer 工作？Clang 的版本是 Ubuntu 11.10 上的 2.9。

编辑：我知道代码不正确。关键是 Clang 不会抱怨明显的错误。如果我将上面的代码粘贴到 .c 文件（没有`using ...`），clang 会正确发出警告。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T16:27:59.067

原因如下：

[http://lists.cs.uiuc.edu/pipermail/cfe-dev/2010-September/011194.html](http://lists.cs.uiuc.edu/pipermail/cfe-dev/2010-September/011194.html)

```
>>> When I run "clang --analyze" on my c++ source files individually I get reports,
>>> but none when using the scan-build tool.
>> 
>> This is intended behavior.  C++ support is still alpha and so it isn't enabled
>> by default in scan-build.  It's really only intended to be used by those
>> currently hacking on the analyzer.
>> 
>> If you want to enable C++ analysis, you must define the environment variable
>> CCC_ANALYZER_CPLUSPLUS. 
```

# css - 获取滚动条以忽略单个背景 div

> ID：11037141
> 
> 赞同：1
> 
> 时间：2012-06-14T16:10:02.897
> 
> 标签：css, layout

我有一个 div 作为我的容器的一部分，它向各个方向溢出，以便给我一个背景（它位于 z-index:0）我禁用了水平滚动（html {overflow-x：hidden;}），因为它永远不应该被要求。

但是我希望垂直滚动条忽略我的“背景”div，但如果我的其余内容拉伸以适应高度，那么滚动条应该出现。

我已经尝试溢出：隐藏在后台 div 中，但它没有效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:15:26.477

一个简单的解决方案是为您的背景 div 设置以下内容：

```
#bgdiv {
    max-width:  100%;   /* Won't cause horizontal scrollbars */
    max-height: 100%;   /* Won't cause vertical scrollbars */
    position: fixed;    /* Positions relative to viewport */
    top: 0; left: 0;    /* Sets to top left of viewport */
    z-index: 0;         /* Places at a low z-index level */
} 
```

并提供一个额外的元素来容纳您的内容，它本身具有以下内容：

```
#body {
    position: relative; /* Permits z-index placement */
    z-index: 1;         /* Places just above background div */
} 
```

小提琴：http: [//jsfiddle.net/jonathansampson/R3kBP/4/](http://jsfiddle.net/jonathansampson/R3kBP/4/)

# ios - b2Bodys 太多？

> ID：11037143
> 
> 赞同：0
> 
> 时间：2012-06-14T16:13:10.233
> 
> 标签：ios, memory-management, cocos2d-iphone, box2d

一段时间后，在我的应用程序中，似乎存在一个大问题。Box2D 构建了 b2Bodys。我确实在我的应用程序中使用了一些 b2Bodys 来进行碰撞，但我会说屏幕上一次最多有 10 个。

在 Instruments 中使用 Time Profiler 调试应用程序后，我发现这是我最大的减速：

![在此处输入图像描述](../Images/32c90b1f905f1d365396680d93fb5841.png)

所以基本上，我的一些 b2Body 似乎没有在应该清理的时候得到清理。**有没有办法 NSLog 世界上 b2Bodys 的数量，这样我就可以检查是否发生了任何奇怪的事情？**

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T22:52:38.343

您可以将 NSLog 语句添加到 b2World 类中适当的 CreateBody 和 DestroyBody 方法中。

# c-preprocessor - 关于 C 中的## 预处理器

> ID：11037153
> 
> 赞同：11
> 
> 时间：2012-06-14T16:13:35.917
> 
> 标签：c-preprocessor

给定

```
#define cat(x,y) x##y 
```

调用`cat(a,1)`返回`a1`，但`cat(cat(1,2),3)`未定义。但是，如果我也定义`#define xcat(x,y) cat(x,y)`了，那么结果`xcat(xcat(1,2),3)`就是 now `123`。谁能详细解释为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:04:29.213

我使用 GCC 和 Clang 对此进行了测试。

GCC 给出错误：

```
test.c:6:1: error: pasting ")" and "3" does not give a valid preprocessing token 
```

Clang给出错误：

```
test.c:6:11: error: pasting formed ')3', an invalid preprocessing token
  int b = cat(cat(1,2),3); 
```

似乎正在发生的事情是，编译器`cat(1,2)`在展开后立即将结果包装在括号中；所以当你调用`cat(1,2)`你的代码时，它真的给了你`(12)`. 然后，再次调用`cat((12),3)`会导致`((12)3)`，这不是一个有效的令牌，这会导致编译错误。

普遍的看法是“在使用标记粘贴运算符 (##) 时，您应该使用两级间接”（即，使用您的`xcat`解决方法）。请参阅[为什么我需要宏的双层间接？](https://stackoverflow.com/questions/8231966/why-do-i-need-double-layer-of-indirection-for-macros)以及[需要将两个标记粘贴在一起的宏应该怎么做？](https://web.archive.org/web/20120229073241/http://www.parashift.com/c%2B%2B-faq-lite/misc-technical-issues.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-28T23:00:26.293

在 xcat(x,y) 中，x 和 y 与 ## 运算符不相邻，因此它们在被替换之前会进行宏扩展。

所以 x 被标识为 xcat(1,2) 而 y 被标识为 3。但是在替换之前，x 被宏扩展为 cat(1,2)，它变成了 1##2，它变成了 12。所以最终, xcat(xcat(1,2),3) 将扩展为 cat(12,3)，结果为 123。

**这个作品 --> cat(xcat(1,2),3) --> cat(cat(1,2),3) --> cat(12,3)**

该行为是明确定义的，因为所有标记粘贴都会生成有效的预处理器标记，即任何扩展的表达式在任何阶段都应该是有效的标记。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T16:37:42.010

我不认为 cat 是否真的会连续扩大 2 次。这就是为什么我想知道为什么编译器甚至会产生这样的消息`'pasting ")" and "3" does not give a valid preprocessing token'`。另外，我不认为内心的猫会首先被扩大。所以，我认为输出将是`cat(1,2)3`. 这引导我思考编译器将如何解释这一点。

# jquery - 设置不同的facebook分享数据

> ID：11037155
> 
> 赞同：0
> 
> 时间：2012-06-14T16:14:03.400
> 
> 标签：jquery, facebook

希望这是有道理的。

我需要根据所选择的奖品使用不同的 Facebook 数据。不知道如何让它正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:33:38.567

不那么干净，你可以`.data`用来保留最后选择的奖品。

```
showPrize = function (dial, id) {
  ...
  var prize_zerod = parseInt(id) - 1;
  $(".post-entry-share").data('prize', prize_zerod);
  ...
};

Facebook.bindEntryShare = function () {
  $('.post-entry-share').live('click', function () {
    var prize = PRIZE_DATA[ $(".post-entry-share").data('prize') ];
    FB.ui({
      method      : 'feed',
      name        : prize["share-name"],
      link        : 'http://www.google.com',
      picture     : prize["share-picture"],
      caption     : 'Caption here',
      description : prize["share-text"]
    });
    return false;
  });
}; 
```

~~（注意：在您阐明什么`setLabels`功能之前，可能会发生变化。）~~ `setLabels`毕竟不相关。

# javascript - setTimeout inside for 循环和范围解析问题

> ID：11037162
> 
> 赞同：1
> 
> 时间：2012-06-14T16:14:28.643
> 
> 标签：javascript, scope, window, sencha-touch, settimeout

> **可能重复：**
> [如何在 for...循环中使用 setTimeout 使用 for 循环](https://stackoverflow.com/questions/8070896/how-to-use-settimeout-in-a-for-loop)
> [调用 setTimeout](https://stackoverflow.com/questions/10020127/calling-settimeout-with-a-for-loop)

对我来说，`setTimeout`函数在 for 循环中不起作用。它在执行所有 for 循环语句后执行。

`setTimeout`如果在javascript中使用函数，我将面临这个范围问题。

这是我的代码片段..

```
 ... moves[] is an array ..

 for(i=0;i<noOfMoves;i++) {

        playerName = moves[i].playerName;
        timeDiff = moves[i].timeDiff;
        console.log("Inside for loop"+ playerName);

        setTimeout(function(){
             console.log("Inside set time out :"+playerName);
        },timeDiff);
 ....
 ....
} 
```

但它笨拙地打印出以下输出......

```
 Inside for loopplayer1
 Inside for loopplayer2
 Inside for loopplayer3
 Inside for loopplayer4
 .... (noOfMoeves times .. )
 Inside set time outplayer1
 Inside set time outplayer1
 Inside set time outplayer1
 Inside set time outplayer1 
```

**编辑 ：**

我想要以下方式的o/p

我期望代码逐行运行..`Inside for loop`首先打印“”控制台日志，然后等待“ `timeDiff`”期间，然后打印“ `Inside settimeout`”功能控制台日志..我该怎么做？——</p>

```
 Inside for loopplayer1
 Inside set time outplayer1 // (after waiting for timeDiff time)
 Inside for loopplayer2
 Inside set time outplayer2  // (after waiting for timeDiff time)
 ......
 ...... 
```

此外， playerName 变量在每个 settimeout 控制台日志语句中都获得相同的值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T16:23:00.790

这不完全是由于闭包，这是因为 javascript 是单线程的，并且在 javascript 有空闲时间执行之前不会发生设置 Timeout。for 循环总是在 setTimeout 执行它的代码之前完成。

要解决此问题，请将所有内容放入 setInterval 中，如下所示：

```
var moves = [{playerName:'Test'},{playerName:'Terry'}, {playerName:'sdfsdf'}];
var currIdx = 0;
var intervalId = window.setInterval(function () {
    var playerName = moves[currIdx].playerName;
    console.log("Inside for loop"+ playerName);
    (function(name) {
        setTimeout(function(){
             console.log("Inside set time out :"+name);
        },0);
    })(playerName);
    currIdx++;
    if(currIdx >= moves.length)
        window.clearTimeout(intervalId);        
}, 10); 
```

请参阅小提琴的示例 - [http://jsfiddle.net/uTyVw/2/](http://jsfiddle.net/uTyVw/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T16:18:01.063

这是因为关闭。像这样更改您的代码：

```
for(i=0;i<noOfMoves;i++) {
    playerName = moves[i].playerName;
    console.log("Inside for loop"+ playerName);
    (function(name) {
        setTimeout(function(){
             console.log("Inside set time out :"+name);
        },timeDiff);
    })(playerName);
} 
```

[你可以在这里](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)了解更多关于闭包的信息。

**更新代码：**

```
var moves = [
    {playerName: '1'},
    {playerName: '2'},
    {playerName: '3'},
    {playerName: '4'}
];
var timeDiff = 1000;
var currentMove = 0;

var processNextMove = function() {
    var move = moves[currentMove];
    console.log('Inside for loop: ' + move.playerName);
    currentMove++;
    window.setTimeout(function() {
        console.log('Inside set time out: ' + move.playerName);
        if(currentMove != moves.length) {
            processNextMove(); 
        }
    }, timeDiff);
};

processNextMove(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T19:31:57.507

一旦迭代和延迟完成，您似乎想要进入下一个项目。这是一个可能对您有所帮助的步进器。

```
// Generic stepper. On step will move to next item and
// run custom stepping function. If at the end will return 0.
function Stepper(stepfunc, items) {
    this.items = items;
    this.index = -1;
    this.stepfunc = stepfunc;
}

Stepper.prototype.start = function() {
    this.index = -1;
    this.step();
}

Stepper.prototype.step = function() {
    this.index++; // move to the next item

    // Stop when we reach the end.
    if (this.items.length <= this.index) {
        return 0;
    }

        /* Do something now. */
        var item = this.items[this.index];
        this.stepfunc(item);

        return 1;
}

// Custom step function.
function myStep(item) {
    // Do this now.
    console.log(item.n);

    // Get a reference to the stepper.
    var s = this;

    // Do this later.
    setTimeout(function(){
        console.log(item.n + ' after ' + item.t);
        var status = s.step();
        console.log(status);
    }, item.t);
}

var items = [{n: 'A', t: 500}, {n: 'B', t: 600}, {n: 'C', t: 1000}];
var s = new Stepper(myStep, items);
s.start(); 
```

# ios - 我应该在 OSX 上使用哪个库进行任意精度算术？

> ID：11037165
> 
> 赞同：0
> 
> 时间：2012-06-14T16:14:40.670
> 
> 标签：ios, macos, llvm, gmp, arbitrary-precision

我已经尝试过GMP，MPFR。但我无法完成像下面这样的简单划分。顺便说一句，我在 Xcode 中有 LLVM 编译器。我尝试编译，运行到IOS模拟器。

> mpf_t 一个；
> 
> mpf_init2（一，256）；
> 
> mpf_set_d(a, 0.7);
> 
> mpf_t b; mpf_init2 (b, 256);
> 
> mpf_set_d(b, 1.0);
> 
> mpf_t l; mpf_init2 (l, 256);
> 
> gmp_printf ("%.*Ff \n", 5, a); --- 0.70000
> 
> gmp_printf ("%.*Ff \n", 5, b); --- 1.00000
> 
> mpf_div(l, a, b);
> 
> gmp_printf ("%.*Ff", 5, l); --- 0.52502

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T16:35:01.937

你试过[MPIR](http://www.mpir.org/)吗？[OpenSSL](http://www.openssl.org/)还提供了一个大数字库...

# git - 将 SVN 存储库导入 Git 时未定义作者

> ID：11037166
> 
> 赞同：40
> 
> 时间：2012-06-14T16:14:45.023
> 
> 标签：git, git-svn

我正在尝试将我们的 SVN 存储库导入 Git。当我运行此命令时：

```
git svn --authors-file=/path/to/authors --trunk=trunk clone https://my-repo/project . 
```

或者这个命令：

```
svn2git https://my-repo/project --no-minimize-url -v --authors /path/to/authors 
```

两者都返回此错误：

```
Author: patrick  not defined in /path/to/authors file 
```

..但据我所知，我的作者文件没有​​任何问题：

```
$ grep patrick /path/to/authors
patrick = Patrick <none@example.com> 
```

该错误在版本 8700 之前不会发生，因此它必须正确获取其他作者姓名。

这里会发生什么？谢谢。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2015-02-03T16:03:24.563

尝试在 Windows 上执行此操作时，我遇到了同样的问题。事实证明，我存储作者的文件的编码设置为 UTF-8，而不是没有 BOM 的 UTF-8。由于“带 BOM”版本在文件开头添加了一些额外的字节，因此从未找到列表中的第一作者。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-02-27T08:53:47.817

我遇到了同样的问题，但原因实际上完全不同：我使用 Powershell 从 SVN 转储作者列表，但我没有意识到它将结果保存为 UTF-16 文件。

事实证明 git（至少，Windows 版本 2.16.1 的 git）无法使用 UTF-16 文件。将文件转换为 UTF-8 对我有用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-04-24T00:34:53.093

我遇到过同样的问题。authors.txt 的格式是严格的形式

```
svn name = user name &#8249;email&#8250; 
```

如：

```
cruise-control = Cruise Control &#8249;cruise-control@abc.com&#8250;
user1 = User1 Lastname1 &#8249;user1@abc.com&#8250;
user2 = User2 Lastname2 &#8249;user2@abc.com&#8250; 
```

例如，这种格式不起作用：

```
user1 = user1@abc.com 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-14T20:04:56.367

有两个问题：

我通过为每个作者分配唯一的电子邮件地址来解决第一个问题。

此外，用户名是“patrick”。我不知道这是怎么发生的，但是通过使用 svnadmin 我能够将该昵称的所有实例更改为“patrick”。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-07-31T11:00:36.827

我看到了同样的错误，但出于不同的原因。我将在这里发布我的解决方案作为“答案”，因为它可能是找到此问题的其他人的答案（即使它不是 OP 问题/问题的解决方案/答案）：

我正在`svn log`从项目的结帐中运行。但我只是`trunk`签出，所以只包括对主干进行更改的作者。这显然是大多数作者的情况，因此克隆会运行很长时间（超过 90 分钟），然后才会因错误而崩溃。

由于检查整个项目根不是一个可行的选择（它有超过 500 个分支和标签，并且转储超过 600 GB），我发现我可以`svn log`像这样在远程仓库上运行：

```
svn log -q svn://server/path-to-project-root 
```

实际命令还对输出进行了一些过滤和格式化：

```
svn log -q svn://server-url/path-to-project-root | awk -F '|' '/^r/ {sub("^ ", "", $2); sub(" $", "", $2); print $2" = "$2" <"$2">"}' | sort -u > authors-transform.txt 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-09-12T21:09:20.370

查找作者姓名开头的任何空格并删除空格。如果这样做没有帮助，请尝试将作者姓名移到文件顶部。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-05-21T12:56:51.283

我遇到了与问题相同的错误，我的解决方案是额外的换行符或回车符没有出现在记事本中。我的条目`john = John <email@example.com>`在记事本中显示得很好。虽然在记事本++中打开时，我注意到它的格式如下：

```
john =
John <email@example.com> 
```

在我在 Notepad++ 中将其修复为单行之后，它似乎对我来说工作得很好。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-03-24T18:55:17.163

我在文件中一个接一个地有 2 个用户，默认情况下编码设置为 Ucs-2 LE BOM。将编码更改为 UTF-8 对我有用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-03-11T11:03:11.333

当心你的底线。我的文件是 UTF-8 格式，但结尾是“mac 风格”，虽然我在 Windows 上。

现在，通过良好的端线（cr + lf），文件被接受

# php - Zend 主机名路由器：未指定动态部分

> ID：11037175
> 
> 赞同：1
> 
> 时间：2012-06-14T16:15:08.677
> 
> 标签：php, zend-framework, subdomain, router, hostname

我在 bootstrap.php 中设置了如下路径：

```
$hostnameRoute = new Zend_Controller_Router_Route_Hostname(
    ':param1.localhost',
    array(
    'controller' => 'index'
    )
);

$plainPathRoute = new Zend_Controller_Router_Route_Static('');

$router->addRoute('user', $hostnameRoute->chain($plainPathRoute)); 
```

但是当我尝试转到“test.localhost”时，它会给出错误消息：“发生应用程序错误：未指定 param1”。

如何解决这个问题？

配置了 Windows 主机和 apache vhost，然后错误在于 Zend。

# sql - 如何使用关键字 LIKE 从 Oracle 中的 LONG 字段中进行搜索

> ID：11037177
> 
> 赞同：0
> 
> 时间：2012-06-14T16:15:10.860
> 
> 标签：sql, oracle

我正在尝试在 Oracle 中运行一个简单的查询，使用关键字`LIKE`在`LONG`字段中进行搜索。这是示例：

```
SELECT SOMETHING
FROM MYTABLE
WHERE (LONGFIELD LIKE '%translate%' or LONGFIELD LIKE '%interpret%') 
```

以下是错误：

```
inconsistent datatypes: expected NUMBER got LONG 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:22:07.157

根据[这个问题（诚然这是旧的，但我认为仍然相关）](http://dbaforums.org/oracle/index.php?showtopic=1164)，您应该使用该`CLOB`类型。你不能做你想做的事`LONG`

# android - Android：更新到最新版本的 SDK

> ID：11037178
> 
> 赞同：0
> 
> 时间：2012-06-14T16:15:11.500
> 
> 标签：android, sdk

在谷歌的网站上，它指出：

“如果您已经在使用 Android SDK，您应该使用 Android SDK 和 AVD Manager 更新到最新的工具或平台”

当前版本是 18，但是当我运行 SDK 和 AVD Manager 时，它从未将版本 17 或 18 显示为可用更新。这有什么原因吗？我讨厌必须从头开始安装最新版本的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:25:44.833

SDK 管理器的可能原因：

*   未经检查的更新/新
*   连接问题，检查 SDK Manager 中的 Preferences

顺便说一句：当前的 Android SDK 工具版本是 19

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T16:38:32.117

如果您使用 Windows，请检查您是否以管理员身份使用 eclipse，这是我更新时的错。

# sockets - NS-3 TCP/UDP 套接字是非阻塞的还是阻塞的？

> ID：11037180
> 
> 赞同：0
> 
> 时间：2012-06-14T16:15:18.460
> 
> 标签：sockets, client-server, ns-3

我正在尝试在 NS-3 中实现一个多媒体服务器应用程序，它可以为多个客户端提供服务。

单个 NS-3（TCP？和/或）UDP 套接字可以接受多个同时连接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T08:32:46.520

如[ns-3 套接字文档](http://www.nsnam.org/doxygen/classns3_1_1_socket.html%20/%20socket%20documentation)中所述，ns-3 中的所有套接字调用都是非阻塞的（与原始套接字 API 相比）。这是ns-3异步和基于事件的实现模型的直接结果。

对阻塞套接字调用建模的核心概念是注册一个回调，一旦建立连接或数据可用，就会调用该回调。其中一个调用是 ns3::Socket::SetRecvCallback ，您可以使用它来响应传入的数据包

当然，ns-3 可以用来实现一个接受多个连接的服务器。为此，您需要注册一个回调函数，例如 ns3::Socket::SetRecvCallback，然后充分调度接收到的数据。

# android - 九补丁图像切片，填充问题

> ID：11037182
> 
> 赞同：0
> 
> 时间：2012-06-14T16:15:24.870
> 
> 标签：android, android-layout, nine-patch

所以我已经修补了一个图像，但是它在左右两侧都有我不想要的填充，但是当我在不填充图像的情况下修补图像时，在布局中绘制时图像上的角会变形。

下面是我如何做的截图，你将如何克服这个问题？

![在此处输入图像描述](../Images/76a6e4fae7b122c7c78aca242550dedc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:21:42.790

也许只是尝试以指定的方式指定填充，即通过在 9-patch 工具中绘制底部（如果需要，也可以是右侧）边框。像这样：![在此处输入图像描述](../Images/2074003a193b29402c1244cba403ae62.png)

这样，填充应该是正确的（从一侧到另一侧）并且角落不会变形。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T16:26:31.913

左侧和顶部的线定义了可拉伸区域。当您将角包含在可拉伸区域中时，图像会失真。在这种情况下，一个黑色像素在左侧接触图像中心并且在顶部相同就足够了。要识别视图内容的矩形，从而识别填充，您可以使用右线和底线。

# c - 非常简单的 DNS 服务器

> ID：11037188
> 
> 赞同：9
> 
> 时间：2012-06-14T16:15:43.870
> 
> 标签：c, linux, perl, dns

我有一个 linux 服务器，有一个 ad-hoc 无线网络供客户端连接。连接后，无论用户输入什么 URL，我都希望用户始终被重定向到它自己的 Web 服务器。大型解决方案是设置一个完整的 DNS 服务器（使用 BIND 或等效的），但这似乎有点矫枉过正。我所需要的只是一个简单的程序，它可以监听任何 DNS 请求并始终使用相同的 IP 地址进行响应。

我四处寻找，但似乎找不到。它最好用 C 或 Perl 编写，因为我真的不想安装任何其他脚本语言。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T16:22:19.917

使用[Net::DNS::Nameserver](http://p3rl.org/Net::DNS::Nameserver)并编写您自己的回复处理程序。

对于 C，请查看：

*   [如何在 C/C++ 中构建自定义的简单 DNS 服务器](https://stackoverflow.com/questions/649618/how-to-build-a-custom-simple-dns-server-in-c-c)
*   [在 C 中创建自定义 DNS 名称服务器](https://stackoverflow.com/questions/1614243/create-custom-dns-name-server-in-c)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-14T16:44:23.550

我建议使用[dnsmasq](http://www.thekelleys.org.uk/dnsmasq/doc.html)。它比您绝对需要的功能更全面，但它编写得非常好，体积小且易于安装，您需要为其提供的唯一配置是`--address='/#/1.2.3.4'`告诉它回答所有查询（与其他查询不匹配）规则），地址为 1.2.3.4。dnsmasq 是众所周知和维护的，并且可能比 Net::DNS::Nameserver 更强大的服务器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T16:41:03.310

我在逆向恶意软件时使用[了 fakedns.py](http://code.activestate.com/recipes/491264/)。对于您的情况，它可能太有限了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-06-27T07:35:47.157

正如我在另一个相关问题中回答的那样，我用 C++ 编写了一个基本的 DNS 服务器，用于在 BSD 许可下进行的面试。

我认为代码很干净，虽然我没有进行单元测试:-(我用 dig 测试了它，花了大约一周的时间来理解 DNS 协议 + 实现 + 文档。

如果有人想扩展它，我想这不会很困难。因为我认为它只支持逆向查询，正如练习中所要求的那样。

代码可以在这里找到： [http ://code.google.com/p/dns-server/](http://code.google.com/p/dns-server/)

它被迁移到：[https ://github.com/tomasorti/dns-server](https://github.com/tomasorti/dns-server)

# facebook - 自定义 facebook 连接按钮

> ID：11037191
> 
> 赞同：2
> 
> 时间：2012-06-14T16:15:51.237
> 
> 标签：facebook

如何用我自己的自定义按钮替换生成的 facebook 登录按钮？

我猜它可以通过创建一个触发对话框的代码函数来完成，或者通过一些 css 技巧将按钮从屏幕上移开。我更喜欢第一个解决方案。

我怎样才能让我自己的按钮做他们做的事情并摆脱默认按钮？

以下是来自 facebook 开发者网站的示例代码：

```
require 'fb/facebook.php';

$facebook = new Facebook(array(
  'appId'  => 'X',
  'secret' => 'X',
));

// See if there is a user from a cookie
$user = $facebook->getUser();

if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    echo '<pre>'.htmlspecialchars(print_r($e, true)).'</pre>';
    $user = null;
  }
}

?>
<!DOCTYPE html>
<html xmlns:fb="http://www.facebook.com/2008/fbml">
  <body>
    <?php if ($user) { ?>
      Your user profile is
      <pre>
        <?php print htmlspecialchars(print_r($user_profile, true)) ?>
      </pre>
    <?php } else { ?>
      <fb:login-button></fb:login-button>
    <?php } ?>
    <div id="fb-root"></div>
    <script>
      window.fbAsyncInit = function() {
        FB.init({
          appId: '<?php echo $facebook->getAppID() ?>',
          cookie: true,
          xfbml: true,
          oauth: true
        });
        FB.Event.subscribe('auth.login', function(response) {
          window.location.reload();
        });
        FB.Event.subscribe('auth.logout', function(response) {
          window.location.reload();
        });
      };

      (function() {
        var e = document.createElement('script'); e.async = true;
        e.src = document.location.protocol +
          '//connect.facebook.net/en_US/all.js';
        document.getElementById('fb-root').appendChild(e);
      }());

    </script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T19:33:28.813

只需使用 JavaScript SDK 的 FB.login 方法，并在您自己的按钮上调用它。

[http://developers.facebook.com/docs/reference/javascript/FB.login/](http://developers.facebook.com/docs/reference/javascript/FB.login/)

# xml - XSLT 为轮廓中的 umbraco 形式创建超链接

> ID：11037192
> 
> 赞同：1
> 
> 时间：2012-06-14T16:15:55.463
> 
> 标签：xml, xslt, xpath, umbraco, umbraco-contour

Contour for Umbraco 带有一个工作流选项，可让您在用户提交表单后发送带有应用 XSLT 文件的电子邮件。

它带有这个示例：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:msxsl="urn:schemas-microsoft-com:xslt"
xmlns:user="urn:my-scripts"
xmlns:umbraco.library="urn:umbraco.library"
exclude-result-prefixes="xsl msxsl user umbraco.library">

  <xsl:output method="html" media-type="text/html" doctype-public="-//W3C//DTD XHTML 1.0 Strict//EN"
  doctype-system="DTD/xhtml1-strict.dtd"
  cdata-section-elements="script style"
  indent="yes"
  encoding="utf-8"/>

  <xsl:param name="records" />

  <xsl:template match="/">

    <h3>Intro</h3>
    <p>
      Hello, this is a sample email using xslt to convert a record into a custom email
    </p>

    <h3>the fields</h3>
    <ul>
      <xsl:for-each select="$records//fields/child::*">
        <li>
          <h4>
            Caption: <xsl:value-of select="./caption"/>
          </h4>
          <p>
            <xsl:value-of select=".//value"/>
          </p>
        </li>
      </xsl:for-each>
    </ul>

    <h3>The actual xml</h3>
    <xsl:copy-of select="$records"/>

  </xsl:template>

</xsl:stylesheet> 
```

其中一个表单字段是 CV 的文件上传字段

理想情况下，如果我可以输出正确的链接，我会喜欢它。

字段名称是“上传简历”，目前类似这样的内容在它发送的电子邮件中作为简单的文本输出：

'/umbraco/plugins/umbracoContour/files/e105a66a-7478-4f95-95ad-d4da3190c6ce/d9e0087e-733b-4b4d-9b54-41d4aa979c11/mycv.pdf'

我怎样才能重新调整这个 xslt，以便当它遇到“上传简历”字段时，它会创建一个超链接，而不仅仅是原始文本。

超链接的 href 最终将类似于：

“http://www.example.com/umbraco/plugins/umbracoContour/files/e105a66a-7478-4f95-95ad-d4da3190c6ce/d9e0087e-733b-4b4d-9b54-41d4aa979c11/mycv.pdf”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:25:58.147

您可以使用 XSLT when/otherwise 构造来检查这一点（我猜包含“/umbraco/plugins/umbracoContour/files/”的路径会这样做，然后您可以使用适当的值在锚标记中写入 - 附加 http :// 位在 href 需要的地方。

[http://www.w3schools.com/xsl/el_when.asp](http://www.w3schools.com/xsl/el_when.asp)

[http://www.w3schools.com/xsl/el_otherwise.asp](http://www.w3schools.com/xsl/el_otherwise.asp)

# c++ - 我可以在 OpenMP 中使用多个 omp_lock_t 吗？

> ID：11037193
> 
> 赞同：2
> 
> 时间：2012-06-14T16:15:59.927
> 
> 标签：c++, gcc, parallel-processing, openmp

我假设我能够创建 2 个不同的 omp_lock_t，并相互独立地锁定它们。我用 gcc 4.4 和 gcc 4.6.1 测试了以下代码部分，得到了相同的输出：

```
omp_lock_t lockA;
omp_lock_t lockB;
omp_init_lock(&lockA);
omp_init_lock(&lockB);

std::cout << "Lock B is: " omp_test_lock(&lockB) << "\n";
omp_set_lock(&lockA);
std::cout << "Lock A set\n";
std::cout << "Lock B is: " omp_test_lock(&lockB) << "\n";

omp_set_lock(&lockB);
... 
```

此代码产生以下输出：

```
Lock B is: 1
Lock A set
Lock B is: 0 
```

然后它在 omp_set_lock(&lockB) 尝试中死锁。

难道不能创建两个不同的锁并独立使用它们吗？如果可能，设置这些锁的正确方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T16:21:51.667

该代码按预期工作。我假设您对做什么有误解`omp_test_lock`（特别是因为这个名字确实具有误导性）。

[`omp_test_lock`](http://msdn.microsoft.com/en-us/library/6e1yztt8%28v=vs.80%29.aspx) *尝试获取*锁。但是除非`omp_set_lock`，它在成功获取锁之前不会阻塞。但这是唯一的区别。值得注意的是，在获得第一个“测试”（不仅仅是一个测试）之后`lockB`，这就是为什么第二个“测试”失败以及随后的`omp_set_lock(&lockB)`死锁的原因。

只是为了说明这一点：**是的，您*可以*使用多个锁。**

```
omp_lock_t lockA;
omp_lock_t lockB;
omp_init_lock(&lockA);
omp_init_lock(&lockB);

omp_set_lock(&lockA);
std::cout << "Lock A set\n";
omp_set_lock(&lockB);
std::cout << "Lock B set\n";
… 
```

这段代码不会死锁。

# jquery - Jquery Mobile 滑动更改 aspx 页面

> ID：11037194
> 
> 赞同：0
> 
> 时间：2012-06-14T16:16:01.407
> 
> 标签：jquery, jquery-mobile

我有一个aspx。带有滑动事件的页面！当事件触发时，它应该更改为另一个 aspx 页面！它工作正常，但新的 aspx 页面出现在触发事件的同一个 aspx 页面上！现在我在一侧有两个内容......但我只想显示新 aspx 页面中的内容......

这是我的代码：

```
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
<div data-role="page" id="Default">
    <div data-role="content">
        <div id="swipeRight">
            <asp:Image ImageUrl="~/Images/TestSeite.png" runat="server" />
        </div>

    </div>
</div>

<script type="text/javascript">

    $(function () {
        $("#swipeLeft").live('swipeleft', function (event, ui) {
            $.mobile.changePage("/Default.aspx", "slide");
        });

        $("#swipeRight").live('swiperight', function () {
            $.mobile.changePage("/Madrid.aspx", "slide");
        });
    });

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:21:30.720

如果用户向左滑动，则 swipe 和 swipeleft 都将被触发，因为 swipe 占所有四个方向。

您很可能应该使用 swipeleft 和 swiperight。

# database - 如何将 R 连接到 Oracle？

> ID：11037195
> 
> 赞同：4
> 
> 时间：2012-06-14T16:04:15.900
> 
> 标签：database, oracle, r

我需要将 R 连接到 oracle，但到目前为止我一直没有成功。我下载了两个包：RODBC 和 RODM。

这是我一直在使用的声明：

```
DB <- odbcDriverConnect("DBIORES1",uid="mhala",pwd="XXXXXXX") 
```

但我得到这个错误：

```
Error in odbcDriverConnect("DBIORES1", uid = "mhalagan", pwd = "XXXXXXX") : 
  unused argument(s) (uid = "mhalagan", pwd = "XXXXXXX") 
```

我需要哪些信息才能连接到 Oracle 数据库？我使用了正确的包吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T16:19:46.533

请参阅帮助页面`odbcDriverConnect()`。`odbcDriverConnect()`不接受`uid`或`pwd`争论。您可能打算`odbcConnect()`改用：

```
odbcConnect(dsn = "DBIORES1", uid = "mhala", pwd = "XXXXXXX") 
```

除了`RODBC`包之外，还有一个`RODM`包，我相信它是专门为 Oracle 数据库设计的，这里有进一步的描述：[http](http://www.oracle.com/technetwork/articles/datawarehouse/saternos-r-161569.html) ://www.oracle.com/technetwork/articles/datawarehouse/saternos-r-161569.html 。我不使用 Oracle 数据库，因此无法评论这两个软件包的优点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-27T10:10:44.793

RJDBC 对我来说工作得很好。您只需要拥有 Oracle 瘦驱动程序 jar 文件并配置连接，例如：

```
> install.packages("RJDBC")
> library(RJDBC)
> drv <- JDBC("oracle.jdbc.driver.OracleDriver","/path/to/driver/com/oracle/oracle-thin/11.2.0.1.0/oracle-thin-11.2.0.1.0.jar”)
> conn <- dbConnect(drv, "jdbc:oracle:thin:@database:port:schema”, “user”, “passwd”) 
```

然后准备执行一些查询。

贾。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T16:48:04.823

您是否安装了 oracle ODBC 客户端/驱动程序？如果您要使用 ODBC R 包，您将需要它。转到[oracle 即时客户端下载](http://www.oracle.com/technetwork/database/features/instant-client/index-097480.html)，获取适用于您操作系统的客户端。安装它们，然后继续配置 ODBC 并在 R 外部测试连接，然后安装 R 和 RODBC 并在 R 内部测试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T17:51:05.673

过去，我曾成功使用 RJDBC 从 R 连接到 Oracle 数据库。我发现它更容易开始，因为我刚刚抓住了我在当时使用的基于 java 的 GUI 中成功使用的连接字符串，并且像魔术一样“正常工作”（tm）。

# apache - 主机文件是否会影响临时连接的设备？

> ID：11037199
> 
> 赞同：1
> 
> 时间：2012-06-14T16:16:25.820
> 
> 标签：apache, tomcat, mobile, virtualhost, hosts

我在 Ubuntu 12.04 上有一个带有虚拟主机的本地 Apache2 服务器，因此在“主机”文件中，我将虚拟主机名称指向本地 IP 地址 -192.168.1.33-。

所以“http://mySite.local”指向“192.168.1.33”，它在浏览器中运行良好。

现在我想在通过共享连接在我的笔记本中创建的 wlan-adhoc 网络连接到机器的手机中进行相同的测试。

如果我正确访问“192.168.1.33”，我可以看到根文件夹，但如果我访问“http://mySite.local”则看不到

我假设“/etc/hosts”文件不会影响通过 adhoc 网络的流量。这个对吗？我可以改变这种行为吗？有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:59:04.517

您假设主机文件仅影响源自主机文件所属机器的连接是正确的。其他流量在到达您的计算机之前已经需要知道它需要连接的 IP 地址。根据您对手机的访问权限，让它像这样识别您自己的域名可能比它的价值更多。

我这样说是因为您需要执行以下操作之一：

*   编辑手机上对应的 hosts 文件（如果这样的文件以可访问的方式存在）

或者

*   设置本地 DNS 服务器以将此信息提供给您的手机，并让您的手机将其用于 DNS 解析。

在不知道你有什么手机的情况下，我不能肯定这两种手机会有多难。但我想这两者都不会像在手机浏览器中输入 IP 并添加书签那样简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T17:54:19.843

hosts 文件仅适用于它所在的本地计算机。它不会被传递或用作任何 DNS 服务的数据源。您必须在手机本地拥有一个主机文件，我不确定这是否可行。

# amazon-web-services - 我可以使用 amazon IAM 作为我的应用程序用户的登录凭证吗

> ID：11037201
> 
> 赞同：1
> 
> 时间：2012-06-14T16:16:29.720
> 
> 标签：amazon-web-services, amazon-iam

是否可以将 IAM API 用作我的应用程序的用户注册服务。

即，如果我让用户创建一个帐户和密码。然后他们可以使用 IAM 登录并使用我的应用程序吗？

还是更适合正在修补实际 AWS 平台的开发人员？

谢谢，本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T16:22:19.827

这不是 AWS Identity and Access Management 的用途。我猜你不希望你的用户访问你的基础设施……如果你想要一个用户注册，你应该在你的应用程序中实现它。

# java - Java串口IO读取

> ID：11037202
> 
> 赞同：0
> 
> 时间：2012-06-14T16:16:33.680
> 
> 标签：java, io, serial-port

从 Java 中的串行端口读取数据时，我遇到了一个奇怪的问题。

我必须通过工作正常的线程中的轮询方法从串行端口读取数据，但我有一个要求，我需要将数据写入串行端口并读回 ACK。向串口写入数据成功，但我无法读回数据。这里有两个读操作，一个在线程中，一个在主线程中。

收到串行写入数据后，我暂停了使用标志从串行端口读取数据的线程，并在写入完成后再次开始从串行端口读取数据，但我无法读取数据。我在写操作后禁用了读取串口并启用了在线程中读取串口的线程，这里我看到了来自串口的 ACK 数据。

任何人都可以提出这个串行读取操作出了什么问题吗？它不是缓冲的读/写操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T19:20:44.093

我强烈建议只使用一个专用线程来访问串行端口读取。最可靠的解决方案曾经是将所有接收到的数据铲到线程安全状态机的中断处理程序。尝试从多个线程读取串行端口会调用问题。串行端口 IO 不在乎您“暂停了线程”，数据可能已经被获取并由于上下文切换而丢失。

因此，只需继续阅读进来的内容，如果预期并获得 ACK，则通过信号量通知主线程。在一个肮脏的残酷简化的伪代码中：

主线程循环：

```
{
  serialReaderThread.isAckExpected = true
  sendWriteCommand();
  ackReceivedSemaphore.wait();
} 
```

串行阅读器线程循环：

```
{
  readData();
  if( isAckExpected && data == ack ) {
    mainThread.ackReceivedSemaphore.notify();
    isAckExpected = false
  }
} 
```

您需要`isAckExpected`在发送写入命令之前进行设置，因为如果您的串行对等点足够快，您可能会在您`sendWriteCommand`甚至返回之前得到响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T19:09:34.303

您不应该有不同的线程尝试从串行端口读取。正确的架构是让单线程读取数据并通过多个队列将传入数据分发给感兴趣的客户端。

您将拥有一个“正常读取处理”线程，该线程由读取线程提供数据。当您需要执行 write/ack 序列时，执行 write/ack 的线程会临时将自己注册到读取线程并转移数据流。

您仍然必须处理任何数据交错处理（即在写入请求之后但在收到确认之前接收正常数据），但这取决于您的应用程序。

# android - 一个广告通过不同的布局 - Android

> ID：11037204
> 
> 赞同：3
> 
> 时间：2012-06-14T16:16:39.173
> 
> 标签：android, android-layout, admob

我尝试谷歌这个问题，并在 Stackoverflow 上搜索了一个多小时，但我没有找到解决方案。

我在一些应用程序中看到了通过不同布局运行的广告。我想在我的应用程序中实现它，但我不知道如何？

我当前的模型是每次用户更改布局时都会加载新广告的模型。我想要即使在用户更改布局后仍能继续运行相同广告的解决方案。广告会在我将在 adMob 仪表板中设置的一段时间（60 秒）后发生变化。

我想这样做是因为我对 adMob 的统计数据不佳。我认为那是因为我的 RPM 属性：RPM = $0.07 l 请大家...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:28:04.100

我必须承认我还没有使用过 AdMob，但我的一般策略如下：

```
// Before starting new activity
View adView = findViewById(R.id.my_add_view); // get ad view
StaticHelperClass.adView = adView; // Set your view to some kind of static helper class
currentActivityLayout.remove(adView);
startActivity(...); // Call new activity 
```

在新活动中，将保存的视图添加到新布局中（您应该在可以添加视图的正确位置有一个容器）。

* * *

编辑：我刚刚用一个按钮做了一个快速测试，它起作用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T16:41:20.567

好吧，如果您动态构建 adview，您可以在创建它之后设置对它的全局引用，然后将其添加到您加载的每个 View

# php - 每一页都有独特的背景

> ID：11037209
> 
> 赞同：2
> 
> 时间：2012-06-14T16:16:53.890
> 
> 标签：php, jquery, css, drupal-7

我正在使用 Drupal 7。page.tpl.php 文件中的我的 bg 图像和图像进入 css。

我的html：

```
<div class="mainimage" id="mainimg" class="clearfix"></div> 
```

和 CSS：

```
#mainimg {
    background: url("../img/mainimg.jpg") repeat scroll 0 0 transparent;
    height: 500px;
    left: 50%;
    margin-left: -640px;
    position: absolute;
    width: 1280px;
    z-index: 1;
    top:0;
} 
```

我的 bg 图像看到了所有页面。这很正常。但我想在每一页上更改我的 bg 图像。例如

```
...
mysite.com/index.php -bg image: mainimg.jpg
mysite.com/news -bg image:news.jpg
mysite.com/about -bg image: about.jpg
... 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T16:20:44.663

您可以使用[内置的 Drupal 函数](http://drupal.org/node/32077)将唯一标识符添加到`body`，因此您可以在 CSS 中单独定位每个页面。

例如，如果 body 有`id="news"`，您可以通过将其添加到 CSS 来更改背景图像：

```
#news #mainimg {
    background-image: url("../img/news.jpg");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T16:25:02.413

每个页面使用不同的类。

## mysite.com/news

HTML

```
<div class="mainimage news-bg" id="mainimg" class="clearfix"></div> 
```

CSS

```
.news-bg {
    background: url("../img/news-bg.jpg") repeat scroll 0 0 transparent;
} 
```

## mysite.com/about

HTML

```
<div class="mainimage about-bg" id="mainimg" class="clearfix"></div> 
```

CSS

```
.about-bg {
    background: url("../img/about-bg.jpg") repeat scroll 0 0 transparent;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-14T16:23:10.497

使图像 php 生成。
1）设置标题（“内容类型：图像/ jpg”）；
2）检查请求来自哪个页面并选择图像
3）回显图像的二进制数据。

假设这是在文件 bg.php 中，你必须设置 background-image:url('bg.php');

例子：

```
function currentPageName() {
    return substr($_SERVER["SCRIPT_NAME"],strrpos($_SERVER["SCRIPT_NAME"],"/")+1);
}
if(currentPageName() == "news.html")
    $imagedata = file_get_contents('path/to/news.jpg');
//etc

header('Content-type: image/jpg');
echo $imagedata; 
```

# svn - SVN：重新集成后在分支中开发

> ID：11037212
> 
> 赞同：0
> 
> 时间：2012-06-14T16:17:09.377
> 
> 标签：svn

我犯了一个错误（[如文档中所示](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-merge.html)）继续在已经合并到主干的分支中开发。保存我为另一个合并到主干所做的工作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:40:45.123

我最终做的是在重新集成后从修订版的主干创建一个新分支。然后我从旧分支合并到新分支，以获取重新集成后所做的更改。当尝试从已经重新集成的分支再次合并到主干时，这些合并到主干中没有遇到冲突投诉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T16:24:13.100

[在此处](http://blogs.collab.net/subversion/2008/07/subversion-merg/)检查此先前的问题[Reintegrate 问题](https://stackoverflow.com/questions/102472/subversion-branch-reintegration)和引用的 collabnet 博客条目。

简短的回答：你可能很好。

我的建议是再次重新整合/合并并丢弃分支。或者，签出新副本并复制您要保留的更改。你应该能够使用'svn st --recursive'在你的工作副本中找到它们。

# c# - ASP.NET MVC 属性只允许用户编辑他/她自己的内容

> ID：11037213
> 
> 赞同：20
> 
> 时间：2012-06-14T16:17:14.993
> 
> 标签：c#, .net, asp.net-mvc, security, authentication

我有一个名为的控制器方法`Edit`，用户可以在其中编辑他们创建的数据，就像这样......

```
public ActionResult Edit(int id)
{
    Submission submission = unit.SubmissionRepository.GetByID(id);
    User user = unit.UserRepository.GetByUsername(User.Identity.Name);

    //Make sure the submission belongs to the user
    if (submission.UserID != user.UserID)
    {
        throw new SecurityException("Unauthorized access!");
    }

    //Carry out method
} 
```

这个方法工作得很好，但是把每个控制器的 Edit 方法都放进去有点乱。每个表总是有一个`UserID`所以我想知道是否有一种更简单的方法可以通过`[Authorize]`属性或其他一些机制来使代码更清晰。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-14T16:20:39.903

是的，您可以通过自定义 Authorize 属性来实现：

```
public class MyAuthorizeAttribute : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        var authorized = base.AuthorizeCore(httpContext);
        if (!authorized)
        {
            return false;
        }

        var rd = httpContext.Request.RequestContext.RouteData;

        var id = rd.Values["id"];
        var userName = httpContext.User.Identity.Name;

        Submission submission = unit.SubmissionRepository.GetByID(id);
        User user = unit.UserRepository.GetByUsername(userName);

        return submission.UserID == user.UserID;
    }
} 
```

接着：

```
[MyAuthorize]
public ActionResult Edit(int id)
{
    // Carry out method
} 
```

假设您需要将我们提取到自定义属性中的提交实例作为操作参数提供，以避免再次访问数据库，您可以执行以下操作：

```
public class MyAuthorizeAttribute : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        var authorized = base.AuthorizeCore(httpContext);
        if (!authorized)
        {
            return false;
        }

        var rd = httpContext.Request.RequestContext.RouteData;

        var id = rd.Values["id"];
        var userName = httpContext.User.Identity.Name;

        Submission submission = unit.SubmissionRepository.GetByID(id);
        User user = unit.UserRepository.GetByUsername(userName);

        rd.Values["model"] = submission;

        return submission.UserID == user.UserID;
    }
} 
```

接着：

```
[MyAuthorize]
public ActionResult Edit(Submission model)
{
    // Carry out method
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T16:44:10.917

我建议您将逻辑从动作/控制器中提取出来并构建一个域类来处理该逻辑。

操作方法实际上应该只处理从视图获取数据和向视图发送数据。您可以创建足够通用的东西来满足您的需求，但也将遵循单一责任主体。

```
public class AuthorizedToEdit 
{
     protected override bool AuthorizeCore(string user, int itemId)
     {
         var userName = httpContext.User.Identity.Name;

         var authUsers = SubmissionRepository.GetAuthoriedUsers(itemId);

         return authUsers.Contains(user);
     }
} 
```

这也将使您以后可以灵活地允许管理员用户之类的东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-30T11:33:39.197

```
@if (Request.IsAuthenticated && User.IsInRole("Student"))
    {
    @Html.ActionLink("Edit", "Edit", new { id = item.StdID })
    } 
```

就我而言，登录用户是学生。所以我说如果登录请求经过身份验证，并且他的角色是学生，那么让他可以访问编辑链接。

下面这允许您让普通用户或管理员也执行编辑。

```
@if(Request.IsAuthenticated && User.IsInRole("Student") || 
User.IsInRole("Administrator"))
{
 @Html.ActionLink("Edit", "Edit", new { id = item.StdID })
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-14T16:22:34.083

我建议阅读`AuthorizeAttribute`（见[这里](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute%28v=vs.98%29.aspx)）。另外，你看过[这个](https://stackoverflow.com/questions/6432592/mvc3-custom-authorizeattribute-how-to-pass-in-an-object-from-controller)帖子吗？它讨论了如何覆盖身份验证属性内部以及如何使用 IPrincipal 和 IIdentity。

# requirejs - 需要更改同一文件上的 baseUrl

> ID：11037217
> 
> 赞同：0
> 
> 时间：2012-06-14T16:17:31.980
> 
> 标签：requirejs

我有以下文件结构：

```
|- index.html
   vendor
    |- jquery.min.js (some libraries)
   js
    |- app.js 
```

当我尝试使用以下网址从浏览器加载 index.html 时：

```
http://localhost/~myname/WebFrontend/ 
```

我收到以下错误`conf.js`（请参阅 conf.js 上的评论）。

我应该如何解决这个问题？

* * *

```
// index.html
<script data-main="js/conf" src="./vendor/require.js"></script> 
```

* * *

```
 // conf.js
requirejs.config({
    baseUrl: '../vendor',
    paths: {
        jquery: 'jquery.min', // it works
    }
});

require(['../js/app']); // http://localhost/~mynane/js/router.js not found
require(['./js/app']); // http://localhost/~myname/vendor/js/router.js not found
// I would like to point to http://localhost/~antoniopierro/WebFrontend/js/router.js 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:31:00.510

不确定是否可以更改同一文件上的 baseUrl。
而且，如果您加载另一个模块，我认为您无法更改 baseUrl。

反正：

1）您说jquery模块已成功加载。
这是错误的，因为您不会因为`require(['../js/app']);`失败而得到错误。
2）根据您的结构，我建议定义`baseUrl: './'`.
通过这种方式，您将能够访问供应商模块制作`vendor/filename`和您的源文件制作`js/filenane`.

# asp.net-mvc - httppost 在 mvc3 razor vb.net 中不返回任何复杂对象

> ID：11037218
> 
> 赞同：1
> 
> 时间：2012-06-14T16:17:47.237
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3, web-applications, razor

我的 MVC3 vb.net 应用程序有问题。当我尝试发布对控制器所做的更改时，模型不会发送到控制器。

我尝试关注很多帖子，例如[this one](https://stackoverflow.com/questions/7074922/asp-net-mvc3-complex-class-not-being-passed-as-null-on-httppost-method)和[this one](https://stackoverflow.com/questions/6523131/mvc3-submit-returning-null-on-my-complex-data-type)，但我不确定如何在我的应用程序中实现它们，因为我的模型没有发送 IEnumerable 类型。

最后，我只希望模型为每个批次返回一个值，该值是我将保存到数据库中的值。

当我发布模型并尝试发送到控制器时，页面会通过邮寄方式发送以下内容：

```
Client=2&Datacenters=20&BatchesForAssignation[0].CenterID=4&BatchesForAssignation[1].CenterID=20&BatchesForAssignation[1].DatacenterID=14... 
```

但我不知道如何将此查询字符串转换为**BatchesForAssignation**对象，将其分配给模型并发送给控制器。

注意：查询字符串中显示的**客户端**和**数据中心**的值未在控制器中使用。我需要**BatchesForAssignation[n].CenterID**部分。

你能指点我找到解决方案吗？

这是我在 MVC 应用程序中使用的对象（代码压缩）：

批：

```
Public class Batch
    public property ID as integer
    public property CenterID as integer
    public property name as string
end class 
```

中心（此对象仅存储将分配给批处理的所有中心列表。名称只是为了在下拉列表中显示名称）：

```
Public class Center
    public property ID as integer
    public property name as string
end class 
```

（还有一个 Batchlist 和一个 Centerlist 对象，它们充当从 CollectionBase 继承的集合，存储所有 Batch 和 Center 对象。如果您需要类定义，请告诉我，但非常简单）。

模型如下

```
Public class ProcessingModel
    public property BatchesForAssignation as BatchList
    public property Datacenters as CenterList
End class 
```

控制器如下：

```
<HttpGet()>
<Authorize()> _
Public Function AssignToDataCenters() As ActionResult
    Dim model As New ProcessingModel
    Dim BatchHandler As New BatchControl

    'This line will get the list of batches without datacenter
    model.BatchesForAssignation = BatchHandler.GetBatchesAvailable(ConnectionString)

    'This method will get the list of Datacenters available
    model.Datacenters=BatchHandler.GetDatacenters(ConnectionString)
    return View(model)
End Function 
```

HttpPost（这实际上不起作用，因为模型返回一个空模型）：

```
<HttpPost()>
<Authorize()> _
Public Function AssignToDataCenters(ByVal Model as ProcessingModel) As ActionResult
    Dim BatchHandler As New BatchControl
    Dim SaveResult as Boolean=false

    'This line will get the list of batches without datacenter
    model.BatchesForAssignation = BatchHandler.GetBatchesAvailable(ConnectionString)

    'This method save the information returned by the model
    SaveResult=BatchHandler.UpdateBatches(model)

    ViewBag("Result")=SaveResult
    Return View(model)
End Function 
```

视图如下（是强类型视图）：

```
@ModelType MVCAdmin.ProcessingModel

@Code
    ViewData("Title") = "Assign Batches To centers"
End Code

@Using Html.BeginForm()
    @<table id="tblAvailableBatches">
        <thead>
            <tr>
                <th>Assign batch to:</th>
                <th>Name</th>
            </tr>
        </thead>
        <tbody>
            @code
                For i As Integer = 0 To Model.BatchesForAssignation.Count - 1
                    Dim a As Integer = i
                    @<tr>
                        <td>@Html.DropDownListFor(Function(m) m.BatchesForAssignation(a).CenterID, New SelectList(Model.Datacenters, "ID", "name", model.BatchesForAssignation(i).CenterID), " ")</td>
                        <td>@Model.BatchesForAssignation(i).name</td>
                    </tr>        
                Next
            End Code
        </tbody>
    </table>
    <input type="button" value="Apply changes" id="btnApply" />
End Using 
```

提前致谢

2012 年 6 月 14 日更新：

在进行了一些研究后，我发现我可以使用`request.Form`我可以解析视图发送的结果来解析控制器中的查询字符串。但是查询字符串键的格式`BatchesForAssignation[0].CenterID`为 , `BatchesForAssignation[1].CenterID`，`BatchesForAssignation[2].CenterID`依此类推...

是否有更好的方法可以“自动”执行此操作，以便模型解析查询字符串并将解析的对象发送到控制器？

再次...在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:49:39.257

在查看[了这个问题](https://stackoverflow.com/a/6741129/1055988)后，我发现创建模型并将其发送到控制器的最佳方法是创建一个`CustomModelBinder`（从接口）并使用该属性在方法`IModelBinder`上解析表单的查询字符串。像这样的东西：`BindModel``controllerContext.HttpContext.Request.Form`

```
Public Class ProcessingModelBinder
    implements IModelBinder

    public Function BindModel(controllerContext As System.Web.Mvc.ControllerContext, bindingContext As System.Web.Mvc.ModelBindingContext) As Object
        dim model as ProcessingModel = if(nothing.equals(bindingContext.Model),directcast(bindingContext.Model,directcast(DependencyResolver.Current.GetService(typeof(ProcessingModel))
        dim Keys as string()=controllerContext.HttpContext.Request.Form.AllKeys

        for each key in Keys
            'Fill the model required parameters
        Next

        return model
End Function 
```

最后在 global.asax 文件中注册新的模型生成器

```
Sub Application_Start()
    AreaRegistration.RegisterAllAreas()
    ModelBinders.Binders.Add(typeof(ProcessingModel),New ProcessingModelBinder())
    RegisterGlobalFilters(GlobalFilters.Filters)
    RegisterRoutes(RouteTable.Routes)
End Sub 
```

我希望这可以帮助某人

问候

# c# - 将数据库中的值存储到 C# 变量中

> ID：11037219
> 
> 赞同：1
> 
> 时间：2012-06-14T16:17:50.700
> 
> 标签：c#

在 C# 上工作的项目想要获取在 site_id 8 上工作的所有工作人员的 emp_id 并将其显示在表单上。我所做的是

```
SqlCommand cmd3 = new SqlCommand("Select emp_id from employee_attendance where site_id=8",conn); 
SqlDataReader reader = cmd3.ExecuteReader();
while(reader.Read())
{
int emp_id =Convert.ToString(reader[0]));
label7.Text = Convert.ToString(emp_id);
} 
```

它只显示一个结果但是我知道有 2 名员工与查询匹配

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T16:20:36.380

您将始终显示最后一个，因为您每次都会覆盖标签。您可以执行以下操作：

```
StringBuilder builder = new StringBuilder();
while(reader.Read())
{
    builder.Append(reader[0]);
    builder.Append(" ");
}
label7.Text = builder.ToString(); 
```

这将创建一个长字符串，其中所有 ID 彼此附加（以及尾随空格）。如果您需要删除尾随空格，您也可以只修剪结果字符串：

```
builder.Remove(builder.Length-1, 1);
label7.Text = builder.ToString(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T16:20:31.560

它只显示一个 id，因为您总是覆盖标签值：

```
label7.Text = Convert.ToString(emp_id); 
```

您需要将其连接起来：

```
SqlCommand cmd3 = new SqlCommand("Select emp_id from employee_attendance where site_id=8",conn); 
SqlDataReader reader = cmd3.ExecuteReader();
StringBuilder sb = new StringBuilder();

while(reader.Read())
{
    int emp_id =Convert.ToString(reader[0]));
    sb.Append(Convert.ToString(emp_id) + ", ");
}

label7.Text = sb.ToString(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T16:20:38.360

这是因为您的下一个结果会覆盖上一个结果。您可以使用`StringBuilder`类之类的东西来连接`emp_id`

```
var cmd3 = new SqlCommand(
    "Select emp_id from employee_attendance where site_id=8",conn); 
var reader = cmd3.ExecuteReader();
var sb = new StringBuilder();
while(reader.Read())
{
    int emp_id =Convert.ToString(reader[0]));
    sb.Append(emp_id + ", ");   
}
label7.Text = sb.ToString(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T16:21:14.450

此代码同时覆盖 id 和 label7 文本。

```
while(reader.Read())
{
    int emp_id =Convert.ToString(reader[0]));
    label7.Text = Convert.ToString(emp_id);
} 
```

要同时显示两者，请将值附加到一个或另一个，如下所示。

```
label7.Text = "";
while(reader.Read())
{
    label7.Text += reader[0] += " ";
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-14T16:21:29.403

您将在循环的每次迭代中替换 label7.Text 中的值，因此它只会显示最后一项。如果适合您的需要，您可以将字符串连接在一起作为循环的一部分，或者找到除标签文本之外的其他方式来表示它。

# php - 如何在 Buddypress 中获取用户名/显示名称？

> ID：11037220
> 
> 赞同：5
> 
> 时间：2012-06-14T16:17:57.383
> 
> 标签：php, wordpress, buddypress

在 buddypress 默认模板中，发布某个活动的用户名显示如下： `bp_activity_action();` 但这带来的不仅仅是用户名。有没有更简单的方法来获取用户对象/名称？

Wordpess get userdata 功能不起作用，因为它显示页面作者，而不是评论或活动作者姓名。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T12:51:21.233

您有显示名称使用以下功能：

```
bp_get_displayed_user_fullname() 
```

或者

显示用户名：

```
bp_core_get_username($user_id) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-01T12:38:26.950

登录用户的显示名称：

```
echo bp_core_get_user_displayname( bp_loggedin_user_id() ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T16:20:25.350

使用 bp_activity_user_link() 怎么样？

# sql-server - 查询用户以管理员身份访问的所有数据库

> ID：11037226
> 
> 赞同：0
> 
> 时间：2012-06-14T16:18:11.683
> 
> 标签：sql-server, sql-server-2005

我正在查询映射到用户的所有数据库，类似于安全 > 登录 > 属性 > 用户映射。

如果可能，这可以在 SQL 2005 中完成

例如，类似于：

```
SELECT name
FROM sys.databases
WHERE HAS_DBACCESS(name) = 1 
```

但是从管理用户执行查询，而不是以用户本身的身份运行上述查询。

这样的事情将如何执行？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T16:58:22.370

好吧，这可能是一个开始，可能不是您希望的好的输出（它会产生两个结果集）：

```
EXEC sp_helplogins N'floob'; 
```

但它确实适用于 SQL Server 2000。如果您想尝试复制过程中的某些功能，您可以看到它是如何检查权限的，基本上是一个游标通过每个数据库。在 SQL Server 2000 上：

```
EXEC sp_helptext N'sp_helplogins'; 
```

在 2005+ 上，我更喜欢 OBJECT_DEFINITION() 的输出：

```
SELECT OBJECT_DEFINITION(OBJECT_ID(N'sys.sp_helplogins')); 
```

所以你可以根据类似的逻辑编写自己的光标，并使输出更漂亮......

这是一个快速（但不完整）的示例，没有涵盖太多内容，但如果以上内容还不够，则可以开始使用：

```
DECLARE @login NVARCHAR(255);
SET @login = N'foobarblat';

-- above would be an input parameter to a procedure, I presume

CREATE TABLE #dbs(name SYSNAME);

DECLARE @sql NVARCHAR(MAX);
SET @sql = N'';

SELECT @sql = @sql + N'INSERT #dbs SELECT ''' + name + ''' FROM ' 
  + QUOTENAME(name) + '.sys.database_principals AS u
  INNER JOIN sys.server_principals AS l
  ON u.sid = l.sid
  WHERE l.name = @login;'
FROM sys.databases 
WHERE state_desc = 'ONLINE'
AND user_access_desc = 'MULTI_USER';

EXEC sp_executesql @sql, N'@login SYSNAME', @login;

SELECT name FROM #dbs;

DROP TABLE #dbs; 
```

正如我所说，这并不完整。不知道用户是否已被拒绝连接，是否是拒绝读/写角色的成员，如果数据库中的用户名与登录名不匹配，则不会显示别名等。您可以从`sp_helplogins`取决于你想展示什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T16:38:52.477

[EXECUTE AS](http://msdn.microsoft.com/en-us/library/ms188354.aspx)功能是在 2005 版本中添加的，因此我认为您无法在 2000 年运行它。您可以通过将相关代码放入作业并将作业所有者设置为管理员用户来模仿它，但它会与作业不内联的过程。

# c++ - GDI - 如何创建和填充位图？

> ID：11037228
> 
> 赞同：1
> 
> 时间：2012-06-14T16:18:12.747
> 
> 标签：c++, windows, bitmap, gdi+, gdi

有人可以给我简短的解释如何使用 GDI/GDI+ 创建位图运行时并用颜色填充它？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T16:21:14.257

1.  `CreateBitmap`,`CreateCompatibleBitmap`或`CreateDIBSection`（如果您想访问原始基础数据位）
2.  `CreateCompatibleDC`
3.  `SelectObject`位图到创建的设备上下文中
4.  `FillRect`或设备上下文中的朋友，并且绘画发生在您选择的位图上（那里有选项：黑色和白色的标准画笔，手上有RGB而不是创建画笔，您可以使用空字符串`SetBkColor`和矩形将被填满）`ExtTextOut``ETO_OPAQUE`
5.  `SelectObject`背部
6.  位图仍然保持绘画
7.  释放资源

它仍然与标题中的“整个屏幕”有关，您需要在那里解释您想要什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T16:21:00.800

1.  [查询屏幕大小](http://msdn.microsoft.com/en-us/library/system.windows.systemparameters.aspx)

2.  创建您的可绘制对象（或仅在您的绘图处理程序中操作图形对象）

3.  [用颜色填充它](http://msdn.microsoft.com/en-us/library/aa984364%28v=vs.71%29.aspx)

:)

# animation - 画布精灵库或教程

> ID：11037232
> 
> 赞同：0
> 
> 时间：2012-06-14T16:18:32.093
> 
> 标签：animation, sprite, javascript, javascript-framework

我正在寻找一些简单的 javascript 库来管理动画。我需要一些非常简单的东西，只是将动画“解析”为帧。我想自己处理所有事情，我只想知道动画中有多少帧以及如何获得我想要的帧。

我在谷歌上做了一些挖掘，我发现了一个非常好的（sprite.js），但它太大了，它会迫使我重写我的应用程序。

是否有简单的库或如何处理动画图像的教程？（gif和其他）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T17:06:25.183

在 JavaScript 中没有直接从 gif 获取单帧的方法。

# backbone.js - 无法在异步函数中设置模型 - 主干

> ID：11037235
> 
> 赞同：0
> 
> 时间：2012-06-14T16:18:47.020
> 
> 标签：backbone.js, coffeescript

我有观点

```
class FoursquareSearch.Views.Origin extends Backbone.View

events:
    'change [name=origin]': 'setOrigin'
    'click [name=geolocate]' : 'geolocate'

  geolocate: ->
    navigator.geolocation.getCurrentPosition(@handle)

  handle: (response) ->
    @model.set(coords: response) 
```

我正在尝试确定设备的位置，然后使用响应设置模型。但是我得到

```
Uncaught TypeError: Cannot call method 'set' of undefined 
```

奇怪的是，这只发生在它在这个函数中时。例如，如果我使用：

```
 geocode: (location) ->
    data = 
      location: location

    $.ajax(
      type: 'POST'
      url: '/search/geocode'
      data: data
      dataType: 'json'

      error: (jqXHR, textStatus, errorThrown) =>
        alert("ERROR")

      success: (response, text, xhr) =>
        @model.set(coords: response)
        @center(@model.get('coords'))
        ) 
```

在同一个视图中它可以工作，而且效果很好......但是我无法获得其他功能来设置模型。我认为这是关于它是异步的。我绝不是这方面的专家，我一直在学习 Backbone，但这让我很难过！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T16:48:07.057

[Geolocation API](http://dev.w3.org/geo/api/spec-source.html#geolocation_interface)没有为`getCurrentPosition`回调函数指定任何特定的上下文，因此回调`this`内部可能是`window`; `window`通常不会有一个`model`属性，所以这个：

```
handle: (response) ->
  @model.set(coords: response) 
```

`getCurrentPosition`调用它时最终看起来像这样：

```
handle: (response) ->
  window.model.set(coords: response) 
```

所以`handle`尝试调用`set`不存在`window.model`的，这是你的`Cannot call method 'set' of undefined`错误。

尝试定义`handle`为[绑定方法](http://coffeescript.org/#fat_arrow)：

```
handle: (response) =>  # fat arrow here
  @model.set(coords: response) 
```

您的其他`@model.set`调用工作正常，因为`@`您的视图对象确实具有`model`属性。

# android - Android将动画应用于按钮背景

> ID：11037237
> 
> 赞同：1
> 
> 时间：2012-06-14T16:18:55.820
> 
> 标签：android, animation, button, drawable

我有一个按钮，当前在单击时为其分配了动画：

```
Button btn = (Button)findViewById(R.id.btn);
btn.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        v.startAnimation(animRotate);
}
}); 
```

以下是 XML 中的按钮示例：

```
<Button
    android:id="@+id/btn"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:background="@android:color/transparent"
    android:text="@string/btnText"
    android:textColor="#ffffff"
    android:textSize="18dp"
    android:padding="12dp"
    android:drawableTop="@drawable/btnIcon"
    android:layout_weight="1" /> 
```

动画效果很好，但是按钮本身有一个文本值和一个可绘制值，我希望能够定位可绘制对象并仅对其进行动画处理。我已经在网上搜索了所有内容，所有内容似乎都是通过它们的 id 来定位对象，而没有任何背景/可绘制选择。

欢迎任何反馈，即使它只是告诉我它无法完成。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:34:14.857

您可能想`FrameLayout`用`TextView`和创建一个`Button`并且只为`Button`.

# android - 小部件子视图坐标？

> ID：11037245
> 
> 赞同：0
> 
> 时间：2012-06-14T16:19:22.233
> 
> 标签：android, android-widget, coordinates

在 Activity 中，我们可以使用**getIntent()**来获取请求启动 Activity 的视图的左上角坐标：

```
top = this.getIntent().getSourceBounds().top;
left = this.getIntent().getSourceBounds().left; 
```

所以如果一个widget请求启动一个Activity，我们可以获得它的左上角坐标。但是如果一个widget的子视图（如按钮或textview）申请启动一个Activity，我们如何获得左上角坐标的小部件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T05:22:41.080

我没有找到任何方法来获取父视图的坐标，所以我对小部件使用相对布局并将 textview layout_alignParentLeft 和 layout_alignParentTop 设置为“true”，然后在它前面设置其他控件。结果当用户点击 textview 时，textview 发送它的坐标意图等于它的父坐标。

# asp.net - 如何使用 C# 读取不变的 csv 文件

> ID：11037246
> 
> 赞同：1
> 
> 时间：2012-06-14T16:19:36.837
> 
> 标签：asp.net, sql-server, csv

我正在使用 c# 进行 Windows 应用程序开发。我想从目录中读取一个 csv 文件并导入到 sql server 数据库表中。如果文件内容一致，我已成功读取 csv 文件数据并将其导入数据库表。但是我无法插入具有不变形式的文件数据。实际上，我的 csv 文件分隔符是 tab('\t') 并且在获取单个字段后，我有一个包含 dcc 之类的数据的字段

```
Name
----
xxx
xxx yyy
xx yy zz 
```

我检索了 xxx,yyy 和 xx,yy,zz 之类的数据，因此插入成为问题。我怎样才能将数据统一插入数据库表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T18:05:34.720

如果 CSV（或 TSV）值在其中包含分隔符，则应将其括在引号中。有关详细信息，请参阅规范：[https ://www.rfc-editor.org/rfc/rfc4180#page-3](https://www.rfc-editor.org/rfc/rfc4180#page-3)

所以你的输入文件格式不正确。如果您可以说服输入提供商解决此问题，那将是解决问题的最佳方法。如果没有，其他解决方案可能包括：

*   目视检查和编辑文件以修复错误，或
*   编写您的解析器程序以充分了解您的数据期望，以便它可以正确“猜测”真正的分隔符在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T02:28:10.440

如果我对您的理解正确，那么问题是您的代码在空格而不是制表符上拆分。鉴于您已阅读文件中的行，您需要做的就是：

```
string[] fileLines;//from the file
foreach(string line in fileLines)
{
    string[] lineParts=line.Split(new char[]{'\t'});
} 
```

然后对每个`lineParts`. 是`\t`制表符。

如果您还询问将行写入数据库文件...您可以使用[导入导出向导](http://technet.microsoft.com/en-us/library/ms141209.aspx)读取制表符分隔的文件（假设您使用的是 Sql Server Mgmt Studio，但我确信有可比性使用其他数据库管理软件导入的方法）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T16:41:39.330

这很容易。

只需逐行读取文件。这里的 MSDN 示例：

[如何：从文件中读取文本](http://msdn.microsoft.com/en-us/library/db5x7c0d.aspx)

对于每一行，使用 String.Split 方法和您的选项卡作为分隔符。方法文档和示例在这里：

[String.Split 方法 (Char[], StringSplitOptions)](http://msdn.microsoft.com/en-us/library/ms131448.aspx)

然后工作插入您的数据。

# c# - c# WebRequest 到 Google API 错误请求

> ID：11037249
> 
> 赞同：2
> 
> 时间：2012-06-14T16:19:40.390
> 
> 标签：c#, google-api

当我运行此代码来调用 Google API 时，我得到的只是一个“错误请求”错误，但我不知道我哪里出错了。

从谷歌的授权页面返回代码没有问题，当代码到达下面的部分时，它就会失败。请有人能告诉我我要去哪里错了吗？

我知道有这方面的库，但我试图了解如何以 RESTful 方式作为学习练习。

谢谢

```
 var code = Request.QueryString["code"];

    var accessToken = string.Empty;
    var req0 = WebRequest.Create("https://accounts.google.com/o/oauth2/token");
    req0.Method = "POST";
string postData = string.Format("code={0}&client_id={1}&client_secret={2}&redirect_uri=        {3}&grant_type=authorization_code",
code, //the code i got back
"xxxx.apps.googleusercontent.com",
"xxx",
Url.Encode("http://localhost/home/callback")
); //my return URI

byte[] byteArray = Encoding.UTF8.GetBytes(postData);
req0.ContentType = "application/x-www-form-urlencoded";
req0.ContentLength = byteArray.Length;
using (Stream dataStream = req0.GetRequestStream())
{
dataStream.Write(byteArray, 0, byteArray.Length);
dataStream.Close();
        }
        try
        {
            using (WebResponse response = req0.GetResponse())
            {
                using (var dataStream = response.GetResponseStream())
                {
                    using (StreamReader reader = new StreamReader(dataStream))
                    {
                        string responseFromServer = reader.ReadToEnd();
                        var ser = new JavaScriptSerializer();
                        accessToken = ser.DeserializeObject(responseFromServer).ToString();
                    }
                }
            }
        }
        catch (WebException wex) 
        { 
            Debug.WriteLine(wex.ToString());
        }
        catch (Exception ex) 
        {
            Debug.WriteLine(ex.ToString());

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T17:05:13.633

当涉及到您在 API 控制台中为您的客户端 ID 返回 URI 输入的内容以及您在代码中输入的调用它的内容时，Google API 非常挑剔。

我错过了尾部的正斜杠。就这些。学习到教训了...

感谢 Jon 和 Sandeep 的帮助，通过比较网络流量中的内容和我应该发送的内容，为我指明了正确的方向。

# qt - Qt：提取由感兴趣区域多边形裁剪的强度值

> ID：11037252
> 
> 赞同：1
> 
> 时间：2012-06-14T16:19:53.757
> 
> 标签：qt, polygon, mask

基于灰度图像和有序闭合多边形（可能是凹面），我想获取位于感兴趣多边形区域内的所有灰度值（同样如 [SciPy Create 2D Polygon Mask](https://stackoverflow.com/questions/3654289/scipy-create-2d-polygon-mask)中所述）。Qt 4.8 中最高效的实现是什么？端点应该是某种`QList<double>`. 感谢您的建议。

此外，是否可以计算浮点掩码（例如，0 表示多边形外，0.3 表示 30% 的像素区域在多边形内，1 表示完全在多边形内）？但是，这只是一个额外的端点`QPair<double, double>`，然后是 (percentage, value)。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T01:11:19.000

首先，您需要扫描线将多边形转换为水平线 - 这是由`getScanLines()`. 扫描线用于对图像进行采样以获取每条线端点内的所有值，使用`scanlineScanner()`.

下面是一个完整的、独立的和可编译的示例，我放置在其中以显示扫描线算法表现良好。也可以对其进行调整以计算定点掩码。到目前为止，如果扫描线在水平范围内覆盖了一半以上的点（由于`round()s`in `scanlineScanner`），则包括一个点。

启动时，调整窗口大小并单击以定义多边形中的连续点。您看到的多边形仅使用扫描线渲染。为了比较，您可以启用多边形的轮廓。

我确信扫描线转换器可以进一步优化。我没有做任何图像采样，但`scanlineScanner`它表明这是一件微不足道的事情。

```
// https://github.com/KubaO/stackoverflown/tree/master/questions/scanline-converter-11037252
#define QT_DISABLE_DEPRECATED_BEFORE 5
#include <QtGui>
#if QT_VERSION > QT_VERSION_CHECK(5,0,0)
#include <QtWidgets>
#endif
#include <algorithm>

typedef QVector<QPointF> PointVector;
typedef QVector<QLineF> LineVector;

// A list of vertex indices in the polygon, sorted ascending in their y coordinate
static QVector<int> sortedVertices(const QPolygonF & poly)
{
   Q_ASSERT(! poly.isEmpty());
   QVector<int> vertices;
   vertices.reserve(poly.size());
   for (int i = 0; i < poly.size(); ++i) { vertices << i; }
   std::sort(vertices.begin(), vertices.end(), [&](int i, int j){
      return poly[i].y() < poly[j].y();
   });
   return vertices;
}

// Returns point of intersection of infinite lines ref and target
static inline QPointF intersect(const QLineF & ref, const QLineF & target)
{
   QPointF p;
   target.intersect(ref, &p);
   return p;
}

// Allows accessing polygon vertices using an indirect index into a vector of indices.
class VertexAccessor {
   const QPolygonF & p;
   const QVector<int> & i;
public:
   VertexAccessor(const QPolygonF & poly, const QVector<int> & indices) :
      p(poly), i(indices) {}
   inline QPointF operator[](int ii) const {
      return p[i[ii]];
   }
   inline QPointF prev(int ii) const {
      int index = i[ii] - 1;
      if (index < 0) index += p.size();
      return p[index];
   }
   inline QPointF next(int ii) const {
      int index = i[ii] + 1;
      if (index >= p.size()) index -= p.size();
      return p[index];
   }
};

// Returns a horizontal line scanline rendering of an unconstrained polygon.
// The lines are generated on an integer grid, but this could be modified for any other grid.
static LineVector getScanlines(const QPolygonF & poly)
{
   LineVector lines;
   if (poly.isEmpty()) return lines;
   const QVector<int> indices = sortedVertices(poly);
   VertexAccessor vertex{poly, indices};
   const QRectF bound = poly.boundingRect();
   const auto l = bound.left();
   const auto r = bound.right();
   int ii = 0;
   int yi = qFloor(vertex[0].y());
   QList<int> active;
   PointVector points;
   forever {
      const qreal y = yi;
      const QLineF sweeper{l, y, r, y};
      // Remove vertex from the active list if both lines extending from it are above sweeper
      for (int i = 0; i < active.size(); ) {
         const int ii = active.at(i);
         // Remove vertex
         if (vertex.prev(ii).y() < y && vertex.next(ii).y() < y) {
            active.removeAt(i);
         } else {
            ++ i;
         }
      }
      // Add new vertices to the active list
      while (ii < poly.count() && vertex[ii].y() < y) {
         active << ii++;
      }
      if (ii >= poly.count() && active.isEmpty()) break;
      // Generate sorted intersection points
      points.clear();
      for (auto ii : active) {
         const auto a = vertex[ii];
         auto b = vertex.prev(ii);
         if (b.y() >= y)
            points << intersect(sweeper, QLineF{a, b});
         b = vertex.next(ii);
         if (b.y() >= y)
            points << intersect(sweeper, QLineF{a, b});
      }
      std::sort(points.begin(), points.end(), [](const QPointF & p1, const QPointF & p2){
         return p1.x() < p2.x();
      });
      // Generate horizontal fill segments
      for (int i = 0; i < points.size() - 1; i += 2) {
         lines << QLineF{points.at(i).x(), y, points.at(i+1).x(), y};
      }
      yi++;
   };
   return lines;
}

QVector<int> scanlineScanner(const QImage & image, const LineVector & tess)
{
   QVector<int> values;
   for (auto & line : tess) {
      for (int x = round(line.x1()); x <= round(line.x2()); ++ x) {
         values << qGray(image.pixel(x, line.y1()));
      }
   }
   return values;
}

class Ui : public QWidget
{
   Q_OBJECT
   QPointF lastPoint;
   QPolygonF polygon;
   LineVector scanlines;
   QGridLayout layout{this};
   QPushButton reset{"Reset"};
   QCheckBox outline{"Outline"};
public:
   Ui() {
      setMinimumSize(200, 200);
      layout.addItem(new QSpacerItem{0, 0, QSizePolicy::Expanding, QSizePolicy::Expanding}, 0, 0, 1, 3);
      layout.addWidget(&reset, 1, 0);
      layout.addWidget(&outline, 1, 1);
      layout.addItem(new QSpacerItem{0, 0, QSizePolicy::Expanding}, 1, 2);
      reset.setObjectName("reset");
      outline.setObjectName("outline");
      QMetaObject::connectSlotsByName(this);
   }
protected:
   Q_SLOT void on_reset_clicked() {
      polygon.clear();
      scanlines.clear();
      lastPoint = QPointF{};
      update();
   }
   Q_SLOT void on_outline_stateChanged() {
      update();
   }
   void paintEvent(QPaintEvent *) override {
      QPainter p{this};
      if (false) p.setRenderHint(QPainter::Antialiasing);
      p.setPen("cadetblue");
      if (!polygon.isEmpty() && scanlines.isEmpty()) {
         scanlines = getScanlines(polygon);
         qDebug() << "new scanlines";
      }
      p.drawLines(scanlines);
      if (outline.isChecked()) {
         p.setPen("orangered");
         p.setBrush(Qt::NoBrush);
         p.drawPolygon(polygon);
      }
      if (!lastPoint.isNull()) {
         p.setPen("navy");
         p.drawEllipse(lastPoint, 3, 3);
      }
   }
   void mousePressEvent(QMouseEvent * ev) override {
      lastPoint = ev->posF();
      polygon << ev->posF();
      scanlines.clear();
      update();
   }
};

int main(int argc, char** argv)
{
   QApplication app{argc, argv};
   Ui ui;
   ui.show();
   return app.exec();
}

#include "main.moc" 
```

# android - Android-x86 中没有音频

> ID：11037254
> 
> 赞同：6
> 
> 时间：2012-06-14T16:19:53.990
> 
> 标签：android, alsa, android-x86

我在 Dell Latitude D820 上的 VirtualBox 中设置了一个[Android-x86](http://www.android-x86.org/)映像（4.0-RC1-eeepc）。这个特定的 ISO 不适用于笔记本电脑，但在所有可用的 ISO 中，它的效果最好。

我已经解决了我遇到的一些问题（因为我的设备没有 ISO），但我无法让声音正常工作。Android-x86 VirtualBox 教程和其他在线资源指导我将 ALSA 驱动程序与 SoundBlaster 16 一起使用，但这不起作用。

[这个](https://stackoverflow.com/questions/5894582/alsa-aplay-not-recording-on-android)问题让我查看了一些 ALSA 命令，看看我能找到什么，但我没有得到任何结果。

使用 ALSA 驱动程序和 SoundBlaster 控制器，我得到以下信息`alsa_ctl init`

```
Unknown hardware: "Dummy" "Dummy Mixer"
Hardware is initialized using a guess method 
```

这对我来说看起来很错误，所以像另一个问题一样切换到英特尔高清音频。

使用 ALSA 驱动程序和 Intel HD Audio 控制器，我得到以下信息`alsa_ctl init`

```
Unknown hardware: "HDA-Intel" "SigmaTel ID 7680" ...
Hardware is initialized using a guess method 
```

虽然这看起来更有希望，但我仍然没有音频。

由于Android*基本上*是Linux，我想我可以翻译一个Linux解决方案。几个网页的内容与修改和添加的内容类似，[这](http://ubuntuforums.org/showthread.php?t=1475185&page=2)似乎帮助了很多 Linux 用户。但是，这似乎不适用于 Android。至少对我来说不是，因为我没有`/etc/modprobe.d/alsa-base.conf``options snd-hda-intel model=CORRECT_MODEL``alsa-base.conf`

我对音频和 ALSA 知之甚少。有什么从我上面的内容中跳出来的吗？即使是在大方向上轻推也会很棒。

我有一些问题：当我得到`Unknown hardware: "Dummy"`信息时，这意味着什么？没有音频设备？

最后，我验证了我的声音在虚拟盒子之外有效。我的第一个想法是，由于我的笔记本电脑可以运行有声音的 Linux，我应该能够在 Android 中包含 Linux 驱动程序。这有任何意义吗？不幸的是，我也不知道该怎么做。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-30T20:10:47.590

我有同样的问题。

我正在为 WhatsApp 使用 VMWare。并且有各种没有音频的 Android 版本...使用 HDAudio 配置文件 mod 设置 VMWare。

```
alsa_ctl init 
```

始终没有显示任何设备。

我从 Google Play“ [AlsaMixer (ROOT)](https://play.google.com/store/apps/details?id=com.skvalex.alsamixer) ”安装了这个应用程序，这个版本立即获得了音频：

*   android-x86-4.3-20130725.iso
*   android-x86-4.4-RC1.iso

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T00:04:15.790

我遇到过同样的问题。

我一直在寻找`init.sh`，然后意识到我必须先将这该死的东西安装到磁盘上，然后才值得摆弄（它在重新启动时重新解析，并且实时光盘不保存）。

所以我抓住了最新的 x86 端口并翻阅它们，直到找到一个没有问题的 4.2x。可悲的是，我不知道哪个是哪个，而好的只是`vm.iso`？！

长话短说，音频在这个版本中运行良好，我什至不需要调整任何东西。

系统：

*   主板标签：
    *   4GB RAM（主机 RAM 的一半）
    *   [x] 硬盘（仅引导设备）
    *   其他都是默认的
*   处理器选项卡：
    *   2个核心
    *   其他都是默认的
*   声音的：
    *   Windows DirectSound
    *   ICH AC97
    *   其他都是默认的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T22:33:18.067

在 vbox 中有类似的无音频问题。在您的 init.sh 中，将此行添加到 alsa_amixer 内容的末尾：

`alsa_amixer set PCM 100 unmute`

在我说我的音频工作正常之后。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-13T15:21:59.380

使用 phoenix os 和 androidx86 进行声音修复 1) 安装 AlsaMixer apk 2) 打开 AlsaMixer 3) 搜索主播放音量并将值编辑为 90

# ruby-on-rails-3.1 - Rails 控制器的最佳实践，它对一种 mime 格式进行分页，而不是另一种

> ID：11037255
> 
> 赞同：1
> 
> 时间：2012-06-14T16:19:59.500
> 
> 标签：ruby-on-rails-3.1, will-paginate

我的 rails 项目正在对 HTML 格式进行分页，而不是对其他格式进行分页。有人可以建议一种更优雅的方法来处理获取@contacts 集合的差异吗？也许分页版本应该是只支持HTML的不同方法？

```
def index
  if request.format.to_sym == :html
    @contacts = Contact.paginate(page: params[:page]).search(params[:search])
  else
    @contacts = Contact.search(params[:search])
  end      

  respond_to do |format|
    format.html { render html: @contacts }
    format.mobile { render mobile: @contacts }
    format.json { render json: @contacts }
    format.xml { render xml: @contacts.to_xml }
  end
end 
```

我的解决方案是在 routes.rb 中添加 paginate 作为 RESTful 资源，它会自动为我提供路由辅助方法：paginate_contacts_path

```
resources :contacts do
  collection do
    get 'paginate'
  end
end 
```

并在 ContactsController 中有一个单独的分页方法

```
def index
  @contacts = Contact.search(params[:search])

  respond_to do |format|
    format.html { render html: @contacts }
    format.mobile { render mobile: @contacts }
    format.json { render json: @contacts }
    format.xml { render xml: @contacts.to_xml }
  end
end

def paginate
  @contacts = Contact.paginate(page: params[:page]).search(params[:search])

  respond_to do |format|
    format.html
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:25:18.983

强烈喜欢使用单独的方法，因为这会产生不稳定性并使作品的可测试性降低。此外，在例如文档中，您还需要创建异常。

另一种方法是使用一些参数来处理这个问题。现在它突然（当您只更改视图时）返回不同的数据。对于未知的开发人员来说，这可能看起来像是一个错误，并且可能会引发问题。

所以不要做神奇的事情，清除参数或单独的方法。

# android - 获取从数据库填充的微调器项的行 ID

> ID：11037256
> 
> 赞同：0
> 
> 时间：2012-06-14T16:20:01.993
> 
> 标签：android, sqlite, spinner

我有一个从数据库中填充的微调器女巫，当我选择一个项目时，我想在数据库中返回该项目的行 ID（主键）；这是我的代码：

```
private int getcategoryrowid(Spinner spinner){                  

        AndroidOpenDbHelper openHelperClass = new AndroidOpenDbHelper(this);

        // Then we need to get a readable database
        SQLiteDatabase sqliteDatabase = openHelperClass.getReadableDatabase();

        //
        Cursor cursor1 = (Cursor) (spinner.getSelectedItem());
        String t=String.valueOf(spinner.getSelectedItem());
        System.out.println(t);
        int rowid = cursor1.getInt(cursor1.getColumnIndex("_id"));
        System.out.println(rowid);
         cursor1.close();
         sqliteDatabase.close();
        return rowid; 
```

}

这是logcat：

```
06-14 16:02:01.840: W/dalvikvm(14081): threadid=1: thread exiting with uncaught exception (group=0x40015560)
06-14 16:02:01.880: E/AndroidRuntime(14081): FATAL EXCEPTION: main
06-14 16:02:01.880: E/AndroidRuntime(14081): java.lang.ClassCastException: java.lang.String
06-14 16:02:01.880: E/AndroidRuntime(14081):    at com.app.pfe.Addfile.getcategoryrowid(Addfile.java:345)
06-14 16:02:01.880: E/AndroidRuntime(14081):    at com.app.pfe.Addfile.onClick(Addfile.java:85)
06-14 16:02:01.880: E/AndroidRuntime(14081):    at android.view.View.performClick(View.java:2485)
06-14 16:02:01.880: E/AndroidRuntime(14081):    at android.view.View$PerformClick.run(View.java:9080)
06-14 16:02:01.880: E/AndroidRuntime(14081):    at android.os.Handler.handleCallback(Handler.java:587)
06-14 16:02:01.880: E/AndroidRuntime(14081):    at android.os.Handler.dispatchMessage(Handler.java:92)
06-14 16:02:01.880: E/AndroidRuntime(14081):    at android.os.Looper.loop(Looper.java:123)
06-14 16:02:01.880: E/AndroidRuntime(14081):    at android.app.ActivityThread.main(ActivityThread.java:3683)
06-14 16:02:01.880: E/AndroidRuntime(14081):    at java.lang.reflect.Method.invokeNative(Native Method)
06-14 16:02:01.880: E/AndroidRuntime(14081):    at java.lang.reflect.Method.invoke(Method.java:507)
06-14 16:02:01.880: E/AndroidRuntime(14081):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-14 16:02:01.880: E/AndroidRuntime(14081):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-14 16:02:01.880: E/AndroidRuntime(14081):    at dalvik.system.NativeStart.main(Native Method) 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:33:27.990

为什么要有一个完全独立的班级？您可以从`onItemSelected`方法中获取它，因为它在传入的参数中提供给您（它是`long id`部分）......

```
spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
    @Override
    public void onNothingSelected(AdapterView<?> parent) {
    }
    @Override
    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
            long rowId = id;    
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T16:54:31.260

在顶部创建 Activity 的上下文

```
public Context cntx = this; 
```

现在添加cntx如下：

```
AndroidOpenDbHelper openHelperClass = new AndroidOpenDbHelper(cntx); 
```

# c# - CultureInfo.CurrentCulture.NumberFormat.CurrencySymbol 的文本等效项

> ID：11037259
> 
> 赞同：5
> 
> 时间：2012-06-14T16:20:15.817
> 
> 标签：c#, internationalization

是否有与 CultureInfo.CurrentCulture.NumberFormat.CurrencySymbol 等效的文本作为 C# 中的属性提供。

例如 CultureInfo.CurrentCulture.NumberFormat.CurrencySymbol 会给我 $，但我想要像 USD 这样的文本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T16:24:37.877

你会用这个：

```
var name = System.Globalization.RegionInfo.CurrentRegion.ISOCurrencySymbol; 
```

如果您需要特定地区的货币符号，您可以使用`RegionInfo`'s 构造函数来指定文化。例如，要始终使用 en-US：

```
var name = new System.Globalization.RegionInfo(1033).ISOCurrencySymbol; 
```

或者

```
var name = new System.Globalization.RegionInfo("en-US").ISOCurrencySymbol; 
```

查看[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.globalization.regioninfo.isocurrencysymbol)以获取更多信息。

# c# - 我的应用程序中的登录例程没有将我引导到主表单

> ID：11037262
> 
> 赞同：1
> 
> 时间：2012-06-14T16:20:29.437
> 
> 标签：c#, sql-server-2008

我正在使用 VS2010 构建一个 Windows 窗体应用程序。我想读取用户 ID 和密码并使用数据库检查它们的有效性。如果找到合适的匹配项，我想将用户引导至主表单。当我输入正确的凭据时，我的代码当前没有指示。可能是什么原因？

```
string connectionstring = "Data Source=localhost;Initial Catalog=HMS;Persist Security Info=True;User ID=Developer;Password=abc@123";
SqlConnection connection = new SqlConnection(connectionstring);

string SelectStatement = "SELECT * FROM Users where UserID = '@UserID' and Password = '@password'";
SqlCommand insertcommand = new SqlCommand(SelectStatement, connection);
insertcommand.Parameters.AddWithValue("@UserID", textBox1.Text);
insertcommand.Parameters.AddWithValue("@password", textBox2.Text);
SqlDataReader reader;

try
{
  connection.Open();
  reader = insertcommand.ExecuteReader();

  while (reader.Read())
  {
    string userid = reader["UserID"].ToString();
    string pass = reader["Password"].ToString();
    if (userid == textBox1.Text.ToString() && pass == textBox2.Text.ToString()) // login successful
    {
      Mainform main = new Mainform();
      this.Hide();
      main.Show();
    }
    else
    {
      MessageBox.Show("Invalid Username or Password!");
    }
  }//end while
  reader.Close();
  }
  catch (Exception ex)
  {
  throw ex;

}//end catch
finally
{
  connection.Close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:25:53.427

首先，不要将密码作为原始文本存储在数据库中。那只是自找麻烦。您应该在数据库中存储一个加盐哈希并在客户端计算哈希并进行比较。

其次，尝试 main.ShowDialog() 让您的主窗体保持不变。

# knockout.js - KO：用 ko 实用方法遍历可观察数组是不是很糟糕？

> ID：11037273
> 
> 赞同：3
> 
> 时间：2012-06-14T16:20:48.453
> 
> 标签：knockout.js, knockout-2.0

从[这篇文章](https://stackoverflow.com/a/9077264/109941)：

> 我首先建议您优化您的`dependentObservable`（又名`computed`）。当你读取任何 observable 时，Knockout 会在 Dependency Manager 中注册一个对它的依赖...
> 
> 我可以在您的伪代码中看到您正在 while 循环中访问 this.ParentList() 。这意味着 registerDependency 将被调用 3000 次，并且依赖数组将被扫描 3000 次，这对 IE 不利（因为它没有内置的 Array.indexOf 方法）。
> 
> 所以我的第一个建议是：**在循环之前阅读所有的 observables。**

考虑到这个好建议，这是我的问题：

`observable`使用 ko 实用方法（如下所示）遍历数组是不是很糟糕？[假设这`this.mySelectListItems()`是一个`observableArray`]：

```
self.selectedValuesCount = ko.computed(function () {
    var total = 0;
    ko.utils.arrayForEach(this.mySelectListItems(), function (item) {
        if (item.selected() === true) {
            total += 1;
        }
    });
    return total;
}, self); 
```

换句话说，做以下事情有什么好处吗？

```
self.selectedValuesCount = ko.computed(function () {
    var total = 0;
    var myArray = this.mySelectListItems();
    ko.utils.arrayForEach(myArray, function (item) {
        if (item.selected() === true) {
            total += 1;
        }
    });
    return total;
}, self); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T16:36:20.170

不，这些代码是完全相等的。

如果您在移交给的回调中一次又一次地检索同一个可观察对象的值，您只会获得性能提升`arrayForEach`- 但在这种情况下，可观察数组的值只被检索一次，所以没有指出你为什么要将该数组放在一个额外的变量中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T16:38:24.903

你真的在经历性能打击吗？对于非常大的数据集，展开循环的可观察数组是有意义的，但如果你只有十几个左右，你应该没问题。此外，如果您正在对可观察数组本身进行更改（例如排序或删除元素），首先解开它会阻止任何数据绑定/订阅更新，因为您只是在修改常规数组。

请记住，过早的优化是万恶之源。

# javascript - 具有在受限范围内运行的后台脚本的 Chrome 应用

> ID：11037276
> 
> 赞同：1
> 
> 时间：2012-06-14T16:20:55.897
> 
> 标签：javascript, google-chrome-extension

我们有一个在桌面和支持互联网的电视上运行的网络应用程序。目前我们正在使用 User-Agent 标头来确定要服务的接口。

我现在的任务是在不阻止访问桌面网站的情况下从桌面浏览器访问电视界面，因此我认为将其包装为 chrome 应用程序可以解决问题，但存在一些问题。

## 打包应用方法

我使用 chrome.webRequest.onBeforeSendHeaders 函数创建了一个打包的应用程序，其中包含一个加载主网站的 iframe 和一些 javascript 以覆盖用户代理的纯 html 文件。

清单.json

```
{
    "app": {
        "launch": {
            "local_path": "index.html"
        }
    },
    "permissions": [
        "webRequest", "webRequestBlocking", "cookies",
        "*://my.site.url/*"
    ]
} 
```

索引.html

```
<html>
    <head>
        <script src="main.js"></script>
    </head>
    <body>
        <iframe src="http://my.site.url"></iframe>
    </body>
</html> 
```

main.js

```
chrome.webRequest.onBeforeSendHeaders.addListener(
    function(details) 
    {
        var headers = details.requestHeaders;

        for (var i = 0; i < headers.length; ++i) 
        {
            if (headers[i].name === 'User-Agent') 
            {
                headers[i].value += " Chromebox"
                break;
    }
        }
        return {requestHeaders: headers};
    }, 
    {
        urls: ["*://my.site.url/*"]
    }, 
    ["blocking", "requestHeaders"]
); 
```

### 问题

*   我必须允许将整个站点加载到 iframe 中，从而将其打开以进行可能的点击劫持
*   当应用程序打开时，它还会在导航到另一个选项卡中的主站点时触发 onBeforeSendHeaders 侦听器，从而导致用户代理被修改，并且对站点的所有请求都被重定向到电视界面。

## 托管应用程序方法

我创建了一个托管应用程序，其起始 url 指向主站点，并创建了一个运行 javascript 以覆盖用户代理的后台页面。

清单.json

```
{
    "app": {
        "launch": {
            "web_url": "http://my.site.url"
        }
    },
    "background_page": "https://my.site.url/chromebox/index.html",
    "permissions": [
        "webRequest", "webRequestBlocking", "background",
        "*://my.site.url/*"
    ]
} 
```

索引.html

```
<html><script src="main.js"></script></html> 
```

### 问题

*   安装后，后台页面 javascript 始终运行，因此用户始终被重定向到电视网站

理想的解决方案是托管应用程序，只有在应用程序打开时才运行后台页面，并且 onBeforeSendHeaders 侦听器不会影响 chrome 应用程序之外的任何请求。

有人知道我如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T06:53:47.180

我认为我没有直接解决您的问题，但如果我这样做了，这是`main.js`您的**托管应用程序**方法：

```
function parse_url(str,component){var key=['source','scheme','authority','userInfo','user','pass','host','port','relative','path','directory','file','query','fragment'],ini=(this.php_js&&this.php_js.ini)||{},mode=(ini['phpjs.parse_url.mode']&&ini['phpjs.parse_url.mode'].local_value)||'php',parser={php:/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/\/?)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/};var m=parser[mode].exec(str),uri={},i=14;while(i--){if(m[i]){uri[key[i]]=m[i];}}
if(component){return uri[component.replace('PHP_URL_','').toLowerCase()];}
if(mode!=='php'){var name=(ini['phpjs.parse_url.queryKey']&&ini['phpjs.parse_url.queryKey'].local_value)||'queryKey';parser=/(?:^|&)([^&=]*)=?([^&]*)/g;uri[name]={};uri[key[12]].replace(parser,function($0,$1,$2){if($1){uri[name][$1]=$2;}});}
delete uri.source;return uri;}

chrome.webRequest.onBeforeSendHeaders.addListener(function(details){
    if(!details.requestHeaders) return details; // skip parsing if missing request headers
    var domain = parse_url(details.url,'host');
    if(host.indexOf('my.site.com')!==0) return details; // skip parsing if it doesn't go to your site
    host=host.split('/'); if(host[1] && host[1]!=='') return details; // skip parsing if it doesn't go to the index

    var headers = details.requestHeaders;
    for(var i in headers){
        if(!headers[i] || !headers[i].name || !headers[i].value) continue;
        if(headers[i].name!=='string') continue;
        if(headers[i].name.toLowerCase()!=='user-agent') continue;

        details.requestHeaders[i].value += ' Chromebox'
        break;
    }

    return details; //  OK BOSS
}); 
```

[`Parse_url()`从 PHP.js 窃取的函数](http://phpjs.org/functions/parse_url:485)

# java - XML 解析错误 MalformedURLException：无协议：

> ID：11037279
> 
> 赞同：0
> 
> 时间：2012-06-14T16:21:05.590
> 
> 标签：java, xml, xml-parsing, saxparser

我正在尝试从程序中修改一个方法，使其成为 JAVA 6.3，但我收到以下错误“格式错误的 URL 异常”。

我正在使用这段代码。

```
DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        try{
            DocumentBuilder builder = factory.newDocumentBuilder();
            DOMImplementation implementation = builder.getDOMImplementation();
            Document document=implementation.createDocument(null, "xml", null);
           //  Document document=implementation.;
            Element raiz = document.createElement("Correos");// creamos el elemento raiz
            Element elemento = document.createElement("Correo");//creamos un nuevo elemento
            Text text = document.createTextNode("pepito@email.com");//Ingresamos la info

            document.setXmlVersion("1.0");// asignamos la version de nuestro XML
            document.getDocumentElement().appendChild(raiz);  //pegamos la raiz al documento
            raiz.appendChild(elemento); //pegamos el elemento hijo a la raiz
            elemento.appendChild(text); //

            Source source = new DOMSource(document);

            String datos="";

            Result console= new StreamResult(System.out);
            Result result = new StreamResult(new java.io.File("resultado.xml"));//nombre del archivo
            Transformer transformer = TransformerFactory.newInstance().newTransformer();
            transformer.transform(source, result);
            transformer.transform(source, console);
            //transformer.t
           // DocumentBuilder db = new DocumentBuilder();
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            DocumentBuilder db =  dbf.newDocumentBuilder();

            //db.parse(datos) ;
            String xmlX =("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<xml>\n<Correos>\n<Correo>pepito@email.com</Correo>\n</Correos>\n</xml>");
            db.parse(xmlX);
                    //document;
        }catch(Exception e){
            System.err.println("Error:" +e);
        } 
```

正如您在第 31 行看到的那样，我正在“连接”发送字符串的 XML。

我正在使用的 XML 我已经在几个 Web 导航器上对其进行了测试，而且我从来没有遇到像在 JAVA 中那样的错误。

基本上我需要的是创建一个“***文档***”变量，因为这是我需要修改的方法返回的变量类型。

在原始方法中，而不是在上层代码中，该代码（上层代码）是我用来调试更大代码的另一个项目，是一个返回“***文档***”的方法。

这是我需要修改的原始代码。（以下代码在***try catch***内）

```
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
DocumentBuilder db = dbf.newDocumentBuilder();
InputStream input = HTMLTools.inputStream_GET(url, timeoutMS);
InputStreamReader reader = new InputStreamReader(input, ENCODING_UTF8);
InputSource inSrc = new InputSource(reader);
inSrc.setEncoding(ENCODING_UTF8);

return db.parse(inSrc); 
```

我不太了解 db 变量的方法解析的目的。

我也想也许我不需要 db 变量，因为我已经从上面的代码中获得了一个变量类型“ ***Document ”。***

我已经阅读了 JavaDoc，但我不知道这些代码是如何工作的，基本上是 XML 部分。

所以基本上我认为我变得一团糟，谁能澄清我做错了什么？

谢谢。：-）

# c# - 如何按 Master Master->Nested Master->Page 的顺序加载

> ID：11037283
> 
> 赞同：0
> 
> 时间：2012-06-14T16:21:19.437
> 
> 标签：c#, asp.net, page-lifecycle

我的设置需要 2 级母版页，因为我在 Master Master 中加载数据，这些数据在我的应用程序中与不同的嵌套母版共享。

所以现在我需要Master Master先加载我的数据，然后在Nested Master中加载东西，然后在Page中加载东西。

当我只有一级大师时，我将加载顺序设置为：

1.  嵌套主控 - 初始化
2.  页面 - 加载

既然我多了一个Master等级，我该如何按以下顺序加载呢？

1.  大师大师——？
2.  嵌套大师 - ？
3.  页 - ？

这是一个问题，因为 ASP.NET 出于某种原因首先加载了最内层。因此，假设提供相同的函数，ASP.NET 将按照 Page->Nested->Master 的顺序调用，而不是有意义的：Master->Nested->Page。在我个人看来，这完全违背了拥有母版页系统的目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:36:38.290

简短的回答是 PreRender，但听起来您可以从将母版页的一些逻辑移动到业务对象/类中受益？拥有相互依赖的不同母版页可能不是最好的主意。如果您需要数据在全球范围内可用 - 将其加载到业务类中，并在创建后将其缓存到合适的时间（如果仅用于请求，请使用 HttpContext.Items）。

如果您确实需要坚持该设置，您还可以选择通过母版页层次结构调用 - 因此您的根主控（顶级）可以使选项/数据在 OnInit 可用。然后可以调用任何其他需要它的东西 - 这是一个循环任何给定页面层次结构中的所有母版页并返回所需类型的第一个实例的方法：

```
/// <summary>
/// Iterates the (potentially) nested masterpage structure, looking for the specified type.
/// </summary>
/// <typeparam name="T"></typeparam>
/// <param name="currentMaster">The current master.</param>
/// <returns>Masterpage cast to specified type or null if not found.</returns>
public static T GetMasterPageOfType<T>(MasterPage currentMaster) where T : MasterPage
{
    T typedRtn = null;
    while (currentMaster != null)
    {
        typedRtn = currentMaster as T;
        if (typedRtn != null)
        {
            return typedRtn; //End here
        }

        currentMaster = currentMaster.Master; //One level up for next iteration
    }

    return null;
} 
```

要使用：

```
Helpers.GetMasterPageOfType<GlobalMaster>(this.Master); 
```

# iphone - 将视图添加到 AQGridView ScrollView 的顶部

> ID：11037284
> 
> 赞同：0
> 
> 时间：2012-06-14T16:21:22.603
> 
> 标签：iphone, ios, aqgridview

我正在使用 AQGridView 创建一个包含大约 21 个项目的图片库。我想在此列表/滚动视图的顶部添加一个包含应用程序徽标和名称的视图，以便用户看到它，但当他们滚动查看图像时，带有名称和徽标的视图会随之滚动。以前有没有人实施过这样的事情？

感谢@skram，我能够添加徽标，但现在图像被第一行图像挡住了。

这是我定义徽标并将其添加到 gridView 的地方：

```
 self.gridView = [[AQGridView alloc] initWithFrame:CGRectMake(0, 0, 320, 367)];
        UIImageView *logo = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"paramythLogoTest.png"]];
        [logo setFrame:CGRectMake(0,0,logo.frame.size.width,logo.frame.size.height)]; 
        [gridView addSubview:logo];
        self.gridView.autoresizingMask = UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleHeight;
        self.gridView.autoresizesSubviews = YES;
        self.gridView.delegate = self;
        self.gridView.dataSource = self;

        [self.view addSubview:gridView];

        [self.gridView reloadData]; 
```

然后在此处加载图像：

```
- (AQGridViewCell *) gridView: (AQGridView *) aGridView cellForItemAtIndex: (NSUInteger) index
{
static NSString * PlainCellIdentifier = @"PlainCellIdentifier";

GridViewCell * cell = (GridViewCell *)[aGridView dequeueReusableCellWithIdentifier:@"PlainCellIdentifier"];

if ( cell == nil )
{
    cell = [[GridViewCell alloc] initWithFrame: CGRectMake(3.333, 3.333, 100, 100)
                               reuseIdentifier: PlainCellIdentifier];
}
NSString *stringURL = [[featuredStories objectAtIndex:index] objectAtIndex:1];

NSURL *url = [NSURL URLWithString:stringURL];
[cell.imageView setImageWithURL:url placeholderImage:[UIImage imageNamed:@"example0.png"]];
cell.storyID = [[featuredStories objectAtIndex:index] objectAtIndex:0];\

return cell;
} 
```

这是模拟器的截图：

![enter image description here](../Images/1e9d5e1f7ce06ac340522f298acdc001.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:22:34.710

是的。您可以使用`addSubview:`. 在您的`AQGridView`实例上，添加 a`UIImageView`作为子视图。`AQGridView`只不过是一个 subclassed `UIScrollView`，你可以使用`addSubview:`它。

```
....
AQGridView *_grid;
....
UIImageView *logo = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"logo.png"]];
[logo setFrame:CGRectMake(0,0,logo.frame.size.width,logo.frame.size.height)]; // Set the Frame's position on where you want it in the grid.
[_grid addSubview:logo]; 
```

希望这可以帮助。

**EDIT**: Editing Answer to reflect adding the logo as the first subview to the `AQGridView` so all images overlap the logo. Instead of using `[_grid addSubview:logo]`, Assuming these are `UIImageView`'s Use:

```
[_grid insertSubview:logo belowSubview:(UIImageView*)[_grid.subviews objectAtIndex:0]]; 
```

**EDIT BY mkral**

While skram version does work I wanted to mention that for my purposes the gridViewHeader is the best option, see code:

```
UIImageView *logo = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"paramythLogoTest.png"]];
[logo setFrame:CGRectMake(0,0,logo.frame.size.width,logo.frame.size.height)]; 
[gridView setGridHeaderView:logo]; 
```

# javascript - 打印下一页 - java 脚本

> ID：11037287
> 
> 赞同：0
> 
> 时间：2012-06-14T16:21:31.173
> 
> 标签：javascript, printing

是否可以将页面打印到链接指向的位置？我在一个网站上有很多简短的信息。我想通过单击第一个站点上的链接打印整篇文章。每个链接都有一个唯一的 id。感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:25:19.480

浏览器必须加载下一页才能打印。

如果有打印链接，您可以将页面加载到隐藏的 iframe 中并打印。

如果它只是普通的浏览器打印，那么您可能不走运，除非您尝试使用未得到很好支持的打印事件进行某种同步 Ajax 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T16:27:09.753

没有。有一种[`window.print`](https://developer.mozilla.org/en/DOM/window.print)方法可以打开浏览器的打印窗口，但出于明显的安全原因，您无法告诉它从 JavaScript 中打印的确切内容。

您仍然可以以某种方式在服务器端检索此页面并将其与对 的调用一起提供`window.print`，但这也有明显的缺点。

# asp.net - MySqlDataReader 获取布尔值的方法

> ID：11037293
> 
> 赞同：0
> 
> 时间：2012-06-14T16:21:47.220
> 
> 标签：asp.net, mysql, mysqldatareader

我正在从 MySQL 表中检索数据并使用 MySqlDataReader 和 .NET (C#) 将其显示在网页上，检索简单文本数据没有问题，但我无法从布尔列检索数据，因为可能的值为在这种情况下，“1”或“ *null* ”和 GetBoolean() 都不起作用。

我正在对上述列使用 GetString() 和 GetDateTime() 方法（例如 myReader.GetString("name") 和 myReader.GetDateTime("startDate")），是否有类似的方法来检索布尔值时它们标签是“1”还是“ *null* ”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:33:47.007

`IsDBNull()`在您的代码中使用：

```
if(myReader.IsDBNull("BooleanColumnName") == true)
{
    // column contains a null value
    // handle null as you see fit
}
else
{
    var columnValue = myReader.GetBoolean("BooleanColumnName");
    if(columnValue == true)
    {
        // column value is "true"
    }
    else
    {
        // column value is "false"
    }
} 
```

# c# - 什么是匹配字符串（段落）中大型短语词典中的项目的有效方法

> ID：11037296
> 
> 赞同：2
> 
> 时间：2012-06-14T16:21:53.553
> 
> 标签：c#, arrays, string, dictionary

有没有办法通过.Net aframework（或有人写过类似的东西）在传递字符串和字典对象时获取匹配数组？

首先一些背景

我需要

我有运动队的 csv 文件，我将其加载到字典对象中，例如...

```
Team, Variants
Manchester United, Manchester United
Manchester United, manutd
Manchester United, man utd
Manchester United, manchester utd
Manchester United, mufc
Aston Villa, Aston Villa
Aston Villa, avfc
Newcastle United, Newcastle United
Newcastle United, toon army 
```

现在我想看看一个字符串是否包含该字典中的任何短语。

一个示例字符串...

```
"I wonder if man utd, aston villa andthe toon army will exist in this string" 
```

现在我要返回匹配的 n 个字符串数组，示例输出如下：

```
["Manchester United","Aston Villa", "Newcastle United"] 
```

我目前正在使用正则表达式来拆分字符串中的单词。然后我循环遍历字符串中的每个单词并根据字典对其进行测试（这里需要注意的是代码确实有效，但只有单个单词而不是短语，这是由于正则表达式）

```
public static List<string> CheckStringWithDictionary(string input, Dictionary<string, string> dic, int minimumLength)
{
    List<string>lst = new List<string>();
    string myValue = "";
        foreach (Match match in RegexSplitStringToArray(input, minimumLength))
        {
            if (dic.TryGetValue(match.Value, out myValue))
                lst.Add(myValue);
        }
    return lst;
}

public static MatchCollection RegexSplitStringToArray(string input, int minLength)
{
    Regex csvSplit = new Regex("(\\w{3,})", RegexOptions.Compiled);
    return csvSplit.Matches(input);
} 
```

循环字符串而不是字典的原因是因为字典将包含超过 10,000 多个项目，因此在循环遍历它方面效率非常低。

感谢您到目前为止的耐心，现在问题...

有没有办法通过.Net aframework（或有人写过类似的东西）在传递字符串和字典对象时获取匹配数组？

谢谢大家

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T16:27:10.197

我会为此使用 LINQ：

```
 string input = "I wonder if man utd, aston villa andthe toon army will exist in this string";
 List<string> matches = dic.
                           .Where(kvp => input.Contains(kvp.Key))
                           .Select(kvp => kvp.Value)
                           .ToList(); 
```

这仍然有效地循环通过字典，但如果您需要处理多个单词选项，这可能会比大多数替代方案更好，即使使用大型字典也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T17:01:43.377

使用标准字典和字符串比较不会变得更快。要获得真正的性能，您需要具备[Aho-Corasick 算法](http://en.wikipedia.org/wiki/Aho%E2%80%93Corasick_string_matching_algorithm)的能力。本质上，您从字典中构建了一个特殊的树并与之匹配。该算法在输入大小和字典大小方面是线性的。

# sql - 使用 CTE 递归的 SQL 缩放函数问题

> ID：11037299
> 
> 赞同：0
> 
> 时间：2012-06-14T16:22:04.403
> 
> 标签：sql, function, recursion, common-table-expression

我正在尝试创建一个返回 nvarchar(MAX) 字符串的 SQL 函数。该函数使用 CTE 递归 WITH 语句。当它们不在函数中时，我可以让所有部件正常工作，但是当我把它们放在一起时，我得到以下错误：

消息 208，级别 16，状态 1，第 1 行无效的对象名称“drillUp”。

该函数本身在“编译”期间不会出错，但只有在运行时才会出错。如果我将 SET @RET 更改为“TESTING ...”而不是调用 SELECT 语句，它会按预期运行。

我对 SQL 相当陌生，我不确定我做错了什么。如果有人能给我一些建议，我将不胜感激。

谢谢你。

乔

```
CREATE FUNCTION BuildName(@SUBTRAIT_ID int)
RETURNS nvarchar(MAX)
AS
BEGIN
DECLARE @RET nvarchar(MAX)
DECLARE @TEXTMODE nvarchar(50)
DECLARE @PARENTID int
DECLARE @CHECKDROPDOWN TABLE
(
    TextMode nvarchar(MAX),
    ParentId int
);

WITH drillUp(FullName, ParentId, depth) 
AS
(
    SELECT  
        SubValue,
        ParentId,
        0           
    FROM SubTrait
    WHERE Id = @SUBTRAIT_ID 
    UNION ALL
    SELECT                  
        child.SubValue + ' -> ' + drillUp.FullName,
        child.ParentId,
        drillUp.depth + 1
    FROM SubTrait child, drillUp
    WHERE drillUp.ParentId = child.Id 
)

INSERT @CHECKDROPDOWN 
SELECT TextMode, ParentId FROM SubTrait WHERE Id = @SUBTRAIT_ID

SET @TEXTMODE = (SELECT MAX(TextMode) FROM @CHECKDROPDOWN);
SET @PARENTID = (SELECT MAX(ParentId) FROM @CHECKDROPDOWN);

IF (@TEXTMODE != 'DropDown')
BEGIN
    SET @SUBTRAIT_ID = @PARENTID
END 

SET @RET = (
       SELECT FullName
       FROM drillUp du
       WHERE depth =(SELECT MAX(depth) FROM drillUp ) - 1
     )
--  SET @RET = 'TESTING...'

RETURN (@RET)

END;
GO

PRINT dbo.BuildName(77) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:28:46.213

CTE 仅适用于遵循其定义的语句。所以你应该移动你`SET @RET`的下一个定义`drillup`：

```
CREATE FUNCTION BuildName(@SUBTRAIT_ID int)
RETURNS nvarchar(MAX)
AS
BEGIN
DECLARE @RET nvarchar(MAX)
DECLARE @TEXTMODE nvarchar(50)
DECLARE @PARENTID int
DECLARE @CHECKDROPDOWN TABLE
(
    TextMode nvarchar(MAX),
    ParentId int
);

INSERT @CHECKDROPDOWN 
SELECT TextMode, ParentId FROM SubTrait WHERE Id = 74

SET @TEXTMODE = (SELECT MAX(TextMode) FROM @CHECKDROPDOWN);
SET @PARENTID = (SELECT MAX(ParentId) FROM @CHECKDROPDOWN);

IF (@TEXTMODE != 'DropDown')
BEGIN
    SET @SUBTRAIT_ID = @PARENTID
END 

WITH drillUp(FullName, ParentId, depth) 
AS
(
    SELECT  
        SubValue,
        ParentId,
        0           
    FROM SubTrait
    WHERE Id = @SUBTRAIT_ID 
    UNION ALL
    SELECT                  
        child.SubValue + ' -> ' + drillUp.FullName,
        child.ParentId,
        drillUp.depth + 1
    FROM SubTrait child, drillUp
    WHERE drillUp.ParentId = child.Id 
)
SELECT @RET = (
       SELECT FullName
       FROM drillUp du
       WHERE depth =(SELECT MAX(depth) FROM drillUp ) - 1
     )
--  SET @RET = 'TESTING...'

RETURN (@RET)

END;
GO

PRINT dbo.BuildName(77) 
```

# android - 从github下载的项目没有编译，缺少库，android

> ID：11037304
> 
> 赞同：0
> 
> 时间：2012-06-14T16:22:18.080
> 
> 标签：android

谁能解释我如何克服这些问题？

```
Description Resource    Path    Location    Type
Project 'DomoHome' is missing required library: '\Users\mattialipreri\dev\lib\json-lib-2.3-jdk13.jar'   DomoHome        Build path  Build Path Problem
The container 'Android Dependencies' references non existing library 'C:\Users\Ignacio\Desktop\Νέος φάκελος\cyrilmottier-GreenDroid-5f92227\GreenDroid\bin\com_cyrilmottier_android_greendroid.jar' DomoHome        Build path  Build Path Problem 
```

我已经从 Github 下载了一个项目，并且我继续在项目旁边看到一个标点符号。

我已经从 github 下载了 GreenDroid 库并将其粘贴到我的桌面，然后将其作为一个独特的项目导入到 eclipse 中，然后将其添加到我的项目的库中（我看到它旁边有一个绿色复选标记）。

在哪里可以找到 json-lib-2.3-jdk13.jar' 文件？我在网上找到了一些代码，但我不知道。我必须创建文件吗？并保存在哪里？我的用户不是上面提到的那个吗？在哪里改？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T17:01:52.473

即使如果您获得了 jar 文件但没有获得 Library 项目，并且**如果**Library 项目包含 Layouts 文件，那么 .JAR 文件也不会被填满；

请从 GITHUB 阅读 README 文件；

或者

在您的项目目录中搜索 jar 文件可能在上传者插入的某个文件夹中可用，或者您可以转到 JAVA Build 路径并选择它是否可用且未选中...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T16:52:09.360

你可以在这里找到 json-lib 包[。](http://json-lib.sourceforge.net/)

至于 greendroid 路径，我会检查 eclipse 项目属性。在“Java Build Path”下有一个“Libraries”选项卡，其中包含一个名为“Android Dependencies”的项目。展开此标题，您应该会看到一些项目`annotations.jar`，其中包括 greendroid.jar 项目。它指向错误的路径（可能是项目开发人员的路径？） - 只需告诉它您下载的 jar 在哪里（选择“Android Dependencies”并单击“Add JARs ...”）它应该可以工作。

# facebook - Facebook 食谱盒打开图教程

> ID：11037307
> 
> 赞同：0
> 
> 时间：2012-06-14T16:22:27.517
> 
> 标签：facebook, recipe

我正在开始 Facebook 应用程序开发，并正在关注 Facebook 上的食谱盒应用程序教程。

[https://developers.facebook.com/docs/opengraph/tutorial/](https://developers.facebook.com/docs/opengraph/tutorial/)

我被困在“发布操作”标题下，上面写着“现在单击烹饪按钮！” 在我的网站上，我单击它，不久后我收到一条错误消息，显示“发生错误”。我按照给定的步骤操作，除了它说单击“获取代码”链接旁边的操作的部分。这包含您可以复制到终端并直接运行的 curl 代码片段。我不知道如何处理 curl 代码……本教程从未真正说过要用它做任何事情。

下面是我现在正在使用的代码。我有一个recipe.html 文件和一个objectpage.html，我在其中单击cook 按钮并得到错误。提前感谢您能给我的任何帮助！

**食谱.html：**

```
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US"
      xmlns:fb="https://www.facebook.com/2008/fbml"> 
<head>
  <title>OG Tutorial App</title>
</head>
<body>
  <div id="fb-root"></div>
  <script>
    window.fbAsyncInit = function() {
      FB.init({
        appId      : '266155930158877', // App ID
        status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        xfbml      : true  // parse XFBML
      });
    };

    // Load the SDK Asynchronously
    (function(d){
      var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
      js = d.createElement('script'); js.id = id; js.async = true;
      js.src = "//connect.facebook.net/en_US/all.js";
      d.getElementsByTagName('head')[0].appendChild(js);
    }(document));
  </script>

  <fb:login-button show-faces="true" width="200" max-rows="1" scope="publish_actions">
  </fb:login-button>

  <h3>Stuffed Cookies</h3>
  <p>
    <img title="Stuffed Cookies" 
         src="http://fbwerks.com:8000/zhen/cookie.jpg" 
         width="550"/>
  </p>
</body>
</html> 
```

**对象页面.html**

```
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US"
      xmlns:fb="https://www.facebook.com/2008/fbml"> 
<head prefix="og: http://ogp.me/ns# rk_recipebox: 
                  http://ogp.me/ns/apps/rk_recipebox#">
  <title>OG Tutorial App</title>
  <meta property="fb:app_id" content="266155930158877" /> 
  <meta property="og:type" content="rk_recipebox:recipe" /> 
  <meta property="og:title" content="Stuffed Cookies" /> 
  <meta property="og:image" content="http://fbwerks.com:8000/zhen/cookie.jpg" /> 
  <meta property="og:description" content="The Turducken of Cookies" /> 
  <meta property="og:url" content="http://fbwerks.com:8000/zhen/cookie.html">

  <script type="text/javascript">
  function postCook()
  {
      FB.api(
        '/me/rk_recipebox:cook',
        'post',
        { recipe: 'http://fbwerks.com:8000/zhen/cookie.html' },
        function(response) {
           if (!response || response.error) {
              alert('Error occured');
           } else {
              alert('Cook was successful! Action ID: ' + response.id);
           }
        });
  }
  </script>
</head>
<body>
  <div id="fb-root"></div>
  <script>
    window.fbAsyncInit = function() {
      FB.init({
        appId      : '266155930158877', // App ID
        status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        xfbml      : true  // parse XFBML
      });
    };

    // Load the SDK Asynchronously
    (function(d){
      var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
      js = d.createElement('script'); js.id = id; js.async = true;
      js.src = "//connect.facebook.net/en_US/all.js";
      d.getElementsByTagName('head')[0].appendChild(js);
    }(document));
  </script>

  <h3>Stuffed Cookies</h3>
  <p>
    <img title="Stuffed Cookies" 
         src="http://fbwerks.com:8000/zhen/cookie.jpg" 
         width="550"/>
  </p>

  <br>
  <form>
    <input type="button" value="Cook" onclick="postCook()" />
  </form>
</body>
</html> 
```

页面位于：

[http://glutendatabase.com/objectpage.html](http://glutendatabase.com/objectpage.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:53:43.240

在你的文件中用这个`objectpage.html`替换函数。`postCook()`这至少会告诉你你的错误是什么。

我的猜测是您仍在尝试发布给出的示例 URL，而不是您网页的 URL（请参见下面的第 6 行）。如果你的服务器是 LOCALHOST，那也会抛出一个错误。您需要在命名服务器上。

```
function postCook()
{
  FB.api(
    '/me/rk_recipebox:cook',
    'post',
    { recipe: 'http://YOURSERVER/objectpage.html' },
    function(response) {
       if (!response) {
          alert('Error occurred : No Response');
       } else if (response.error) {
          alert('Error occurred : ' + response.error);
       } else {
          alert('Cook was successful! Action ID: ' + response.id);
       }
    });
} 
```

# c++ - 使用堆调试 MS VC++ 2005

> ID：11037310
> 
> 赞同：0
> 
> 时间：2012-06-14T16:22:34.723
> 
> 标签：c++, memory-management, memory-leaks, visual-studio-2005, crtdbg.h

我启用了堆调试来尝试调试一些内存泄漏错误。我通过包括以下内容来做到这一点：

```
#define _CRTDBG_MAP_ALLOC
#include <stdlib.h>
#include <crtdbg.h> 
```

连同`_CrtDumpMemoryLeaks()`对感兴趣函数的调用。

然后我还编辑项目属性配置以将调试类型设置为`'Native Only'`并添加预处理器定义`'_DEBUG'`和 C/C++ 代码生成运行时库`/MDd`。我发现无论我把`_CrtDumpMemoryLeaks()`函数调用放在哪里，它都会如下转储内存泄漏输出。

```
Detected memory leaks!
Dumping objects ->
{2606} normal block at 0x000000003D3A5370, 32 bytes long.
 Data: <VAR1> 54 48 45 52 4D 41 4C 5F 43 4F 4E 44 55 43 54 49 
{2605} normal block at 0x000000003D3A52E0, 32 bytes long.
 Data: <VAR2> 52 4F 43 4B 5F 48 45 41 54 5F 43 41 50 41 43 49 
{2604} normal block at 0x000000003D3A5250, 32 bytes long.
 Data: <VAR3> 45 51 55 49 4C 49 42 52 41 54 49 4F 4E 5F 52 45 
{2603} normal block at 0x000000003D3A51C0, 32 bytes long.
 Data: <VAR4> 4D 41 58 5F 57 41 54 45 52 5F 43 41 50 49 4C 4C 
{2602} normal block at 0x000000003D3A5130, 32 bytes long.
 Data: <VAR5> 4D 41 58 5F 47 41 53 5F 43 41 50 49 4C 4C 41 52 
{2601} normal block at 0x000000003D3A50A0, 32 bytes long.
 Data: <VAR6> 57 41 54 45 52 5F 43 4F 4D 50 52 45 53 53 49 42 
{2600} normal block at 0x000000003D3A5000, 48 bytes long. 
```

这可能意味着什么？这是否意味着如果在调用点有转储输出，那么错误/泄漏实际上发生在此之前？我们可以肯定地得出结论吗？如果没有，它似乎不是一个真正有用的实用程序。任何关于如何正确使用它或关于解释的建议/帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:29:11.663

假设您有以下对：

```
int *x = new int[5];
int *y = new int[7];

delete[] y;
_CrtDumpMemoryLeaks();
delete[] x; 
```

无论您删除`x`以后的转储，都将包括`x`为非释放。实际上，标准的 MS 技术需要对内存管理理解的高技能。为了简化您的生活，我的推荐是[Visual Leak Detector](http://vld.codeplex.com/) - 易于嵌入到您的项目中并轻松定位错误（而且它是免费的）。

# php - PHP - 使用多个通配符搜索字符串

> ID：11037312
> 
> 赞同：1
> 
> 时间：2012-06-14T16:22:41.603
> 
> 标签：php, regex

我试图确定一个字符串是否以字符*US、DS、UCS 或 DCS*开头。

尽管只做一个不必要的长 if 语句很诱人，但我认为有更好的方法，我一直在尝试使用正则表达式执行此操作，但没有任何乐趣：

```
$string = 'USQWERTY';
if(preg_match_all('|(US|DS|UCS|DCS)|', $string) // do something 
```

它总是返回false，我想知道是不是因为我没有使用通配符？我尝试在每个单词后使用 *s，但不幸的是，我也没有对此感到高兴。

非常感谢您对此提出任何建议，谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T16:24:55.247

您应该使用不同的[分隔符](http://php.net/manual/en/regexp.reference.delimiters.php)：

```
'/(US|DS|UCS|DCS)/' 
```

我还注意到你这样说：

> 我试图弄清楚一个字符串是否以**字符**US、DS、UCS 或 DCS 开头。

您使用的正则表达式将匹配字符串中任何位置的这些字符。您还应该使用字符串锚点的开头来仅匹配字符串的开头：

```
'/^(US|DS|UCS|DCS)/' 
```

您还缺少一个右括号，看起来您想使用`preg_match`而不是`preg_match_all`.

```
if (preg_match('/^(US|DS|UCS|DCS)/', $string)) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-14T16:28:43.487

*首先，如果你想要的是一场*比赛，你真的不需要 preg_match_all 。[preg_match](http://www.php.net/manual/en/function.preg-match.php)就足够了。

其次，如果您使用管道符号作为全局模式分隔符，则必须在模式本身内对其进行转义。选择通常的正斜杠符号更容易。)

最后，如果您只需要在字符串开始时（使用一系列字母）进行匹配，则必须稍微更改正则表达式：

```
if (preg_match('/^(?:US|DS|UCS|DCS)/', $string)) { ... } 
```

在这个例子中为我工作：

```
<?php

$string = 'USdsa';
if (preg_match('/^(?:US|DS|UCS|DCS)/', $string)) { 
  echo 'Matched!'; 
}

$string = 'DCSda';
if (preg_match('/^(?:US|DS|UCS|DCS)/', $string)) { 
  echo 'Matched again!'; 
}

$string = 'EWDS';
if (! preg_match('/^(?:US|DS|UCS|DCS)/', $string)) { 
  echo 'Not matched!'; 
}

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T16:26:22.873

管道表示 OR，因此您需要从开头和结尾删除它，并确保其不区分大小写

```
/^(US|DS|UCS|DCS)/gi 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T16:27:34.757

您的问题是[PCRE 模式需要包含在分隔符中](http://www.php.net/manual/en/regexp.reference.delimiters.php)，如果您想在模式中包含分隔符，则需要对其进行转义。

因此，如果您将正则表达式更改为以下之一，它应该可以工作：

*   `'/(US|DS|UCS|DCS)/'`
*   `'|(US\|DS\|UCS\|DCS)|'`

尽管我强烈建议使用第一种形式，因为在正则表达式中使用具有很多含义的符号作为 PCRE 分隔符会很麻烦。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-14T16:34:43.187

我不是正则表达式专家，主要是因为它只是让我迷惑了beejeebus。我写的这个函数非常快，可以帮你检查。

```
 function searchMultiple($n, $h) {
    for ($i = 0; $i < count($n); $i++) {
        if (stripos($h, $n[$i]) !== false) return TRUE;
    }
  }

  $needles = array("US","DS","UCS","DCS");
  $haystack = "We are looking for one of our needles in here, like maybe 'US'";
  searchMultiple($needles, $haystack); 
```

# postgresql - 如何设置 node-postgres？

> ID：11037316
> 
> 赞同：-2
> 
> 时间：2012-06-14T16:23:00.123
> 
> 标签：postgresql, node.js, websocket, node-postgres

我有一个 PostgreSQL，php5，在 Apache2.0 上运行（在 Windows 机器上。）

我希望能够在更新某些表行时将更新推送到客户端的浏览器。我遇到了这个[https://github.com/brianc/node-postgres](https://github.com/brianc/node-postgres)

1.  在服务器端设置什么以及如何设置？
2.  如何安装/设置 node-postgres？
3.  node-postgres 是否假设我已经在使用 node.js 或者它是一个完整的包？
4.  更新指定表时如何向客户端浏览器发送消息？

我只需要一些方向来开始！谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:58:20.327

1.  你需要在你的服务器上安装带有 Npm 的 Node.js。您可以在官方 Node.js 上找到更多信息。
2.  npm 安装 pg
3.  否，请参阅第 1 步
4.  Node.js 应该监听你的数据库的变化。我不是 postgres 专家，所以我不知道这是否可能。如果可能的话，您应该让您的客户端 Javascript 连接到您的 Node.js 服务器。这里有一些选项，例如使用 ajax 轮询。如果你想要更高级的东西，你可以使用 socket.io。

您还可以使用消息队列在 Node.js 和 Php 之间进行通信。这意味着您需要在 php 中创建一条消息，尽管这比让 Node.js 轮询您的数据库（如果可能的话）更复杂。不确定是否有使用 HTTP 的消息队列，但如果有，您甚至根本不需要使用 Node.js。您可以让您的客户端与您的消息队列对话。

# c# - Windows 窗体和 Aero 不能很好地混合——我如何让它们看起来像原生的？

> ID：11037318
> 
> 赞同：5
> 
> 时间：2012-06-14T16:23:07.940
> 
> 标签：c#, .net, winforms, winapi, aero

这很烦人：Windows 窗体控件看起来或感觉不是原生的；他们不会像他们应该的那样发光/褪色。

例如，顶部按钮不是原生的，但底部是：

![](../Images/08ba9874ec2faf5c2fe182c7291ba01d.png)

那么如何在 .NET 中获得这种原生外观/感觉？有没有办法在不使用外部库的情况下做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T16:23:08.313

是的！只需将控件上的*FlatStyle*属性设置为*System*，而不是默认的*Standard 。*
这不容易注意到，但它很容易修复！

请注意，在某些情况下，这可能会微妙地影响控件——简单的搜索`FlatStyle.System`应该会指出注意事项。

# java - 为什么这个网站向我的 Java 代码返回 406“不可接受”？

> ID：11037321
> 
> 赞同：0
> 
> 时间：2012-06-14T16:23:17.217
> 
> 标签：java, apache, http

在测试期间，我发现某个特定网站在尝试检索它时返回了 HTTP 406 错误代码 - “不可接受”。网址是[http://thelastword.msnbc.msn.com/_news/2012/06/07/12109716-awesome-internets-thursday-edition](http://thelastword.msnbc.msn.com/_news/2012/06/07/12109716-awesome-internets-thursday-edition)。

这是我的代码（我正在尽我所能让它看起来像一个普通的浏览器请求）：

```
 sourceURL = new URL("http://thelastword.msnbc.msn.com/_news/2012/06/07/12109716-awesome-internets-thursday-edition");

    final HttpURLConnection connection = (HttpURLConnection) sourceURL.openConnection();
    connection.setDoInput(true);
    connection.setDoOutput(true);
    connection.setRequestMethod("GET");
    connection.setRequestProperty("Accept", "text/html,application/xhtml+xml,application/rss+xml");
    connection.setRequestProperty("Accept-Charset", "ISO-8859-1,utf-8");
    connection.setRequestProperty("Accept-Language", "en-US,en");
    connection.setRequestProperty("Accept-Encoding", "gzip");
    connection
        .setRequestProperty("User-Agent",
                "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/535.21 (KHTML, like Gecko) Chrome/19.0.1042.0 Safari/535.21");
    connection.setRequestProperty("Host",
            sourceURL.getHost() + (sourceURL.getPort() != -1 ? ":" + sourceURL.getPort() : ""));

    System.out.println("Response code: "+connection.getResponseCode()); 
```

为什么此 Web 服务器会返回此错误？显然 Web 服务器是 Apache 2.2.16。

*编辑*：当我注释掉这一行时，这似乎有效：

```
 connection.setRequestProperty("Accept", "text/html,application/xhtml+xml,application/rss+xml"); 
```

但为什么？

# javascript - Twitter bootstrap typeahead 无法添加到动态创建的元素

> ID：11037322
> 
> 赞同：6
> 
> 时间：2012-06-14T16:23:23.693
> 
> 标签：javascript, jquery, twitter-bootstrap, function, jquery-events

有没有办法将 twitter bootstrap 的 typeahead 函数转换为`$("body").on()`函数？如果页面加载中存在该元素，则以下代码可以正常工作。

```
$("#job_title").typeahead({
    source: searchFunction,        
    onselect: function(obj) {            
    }
}); 
```

但是如果我动态添加文本输入`id="job_title"`，上面的函数就不起作用了。有解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-06T20:03:50.590

此解决方案不需要额外的 javascript。来自[https://stackoverflow.com/a/15094730](https://stackoverflow.com/a/15094730)

```
$("#element-that-will-contain-typeaheads").on("DOMNodeInserted", function () {
    $(this).find(".typeahead").typeahead();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T18:31:28.090

我下载[了 jquery.livequery.js](https://github.com/brandonaaron/livequery/downloads)以获得我想要的行为：

```
$("#job_title").livequery("create", function() {
    $(this).typeahead({
        source: searchFunction,        
        onselect: function(obj) {            
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-25T22:35:04.697

```
var fx = {
    "init":function() {
        $("#id_of_an_element").typeahead({
            minLength:2,
            delay:1 ...
        })
    },
    "method2":function(){
        some content;
    }
} 
```

每次包含预先输入的元素被加载到 DOM 中（例如，通过 AJAX 成功，调用 fx.init();

# c# - 关于查看存储在数据库中的数据的 ASP.Net MVC3 C# 查询

> ID：11037324
> 
> 赞同：0
> 
> 时间：2012-06-14T16:23:31.500
> 
> 标签：c#, database, asp.net-mvc-3, visual-web-developer-2010

我有一个关于 MVC3 C# 教程的问题。

创建Controller时，它会自动为您创建视图，并创建Index.cshtml（路径为/Views/News/Index.cshtml）。此代码如下所示：

```
@model IEnumerable<dale_harrison.Models.News>
@{
    ViewBag.Title = "Index";
}
<h2>Index</h2>
<p>
    @Html.ActionLink("Create New", "Create")
</p>
<table>
    <tr>
        <th>
            News_Entry
        </th>
        <th>
        News_Date
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.News_Entry)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.News_Date)
        </td>
    </tr>
}
</table> 
```

这很好用，但是，我想在我的主页上显示 @Html.DisplayFor(modelItem => item.News_Entry) 和 @Html.DisplayFor(modelItem => item.News_Date) 的内容，这是在不同的视图中。

我试图将 Index.cshtml 中的代码复制到新视图中（路径为 /Views/Home/homepage.cshtml），但它失败并出现错误：“NullReferenceException 未被用户代码处理” - 抱歉，但我是不确定这意味着什么？

有人介意解释为什么简单地复制代码以显示数据库中的数据从一个视图到另一个视图不起作用吗？很抱歉很厚，但我是一个没有编码背景的初学者。

如果需要，我可以发布控制器代码。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:30:45.123

也许你在调用它时省略了传递模型来查看它。你可以这样做：

```
public ActionResult HomePage()
{
    IEnumerable<dale_harrison.Models.News> model = new List<dale_harrison.Models.News>();  
    // prepare your model (populate it with proper data)

    return View(model);
} 
```

# windows-phone-7 - 保存 bool 的状态，以便当应用程序再次运行时，该状态已保存

> ID：11037327
> 
> 赞同：1
> 
> 时间：2012-06-14T16:23:49.917
> 
> 标签：windows-phone-7

在运行我的应用程序时，用户可以显示或隐藏画布，以便他们可以看到数据集 A 或数据集 B。当他们离开程序并在以后重新输入时。应用程序忽略用户按下按钮以查看带有数据 B 的画布，而是使用数据 A 重新加载应用程序。就像应用程序第一次运行时一样。

所以我想要的是一种方法，当我关闭应用程序时，它会保存按下按钮以显示画布的事实，这样当用户返回它时，应用程序将加载数据集 B 显示。

我想这样做的方法是在页面顶部设置一个全局布尔值并让它在按下按钮时布尔值设置为真，然后当应用程序再次运行时它会检查该布尔值的状态为真或假并加载具有相应数据集的画布。然而这并没有成功。有什么办法可以挽救这个吗？

谢谢先进

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T16:32:57.583

使用IsolatedStorageSettings.ApplicationSettings，在这里查看一些示例

1.  [http://dotnet.dzone.com/articles/using-application-settings](http://dotnet.dzone.com/articles/using-application-settings)
2.  [http://www.dreamincode.net/forums/topic/198869-wp7-using-isolatedstoragesettings/](http://www.dreamincode.net/forums/topic/198869-wp7-using-isolatedstoragesettings/)

希望这可以帮助！

# wpf - 为什么 Visual Studio x86 中 WPF 应用程序的默认平台目标而不是 AnyCPU？

> ID：11037329
> 
> 赞同：7
> 
> 时间：2012-06-14T16:24:08.187
> 
> 标签：wpf, visual-studio-2010, build, jit

当我在 Visual Studio 2012 中创建新的 WPF 应用程序时，平台目标和构建配置默认设置为 x86。为什么会这样？对于一个普通的 WPF 应用程序（没有任何对混合模式程序集的引用），使用 AnyCPU 是否有任何危险，所以我的 WPF 可执行文件将被 JITed 到我的 x64 机器上的 x64 代码和 x86 机器上的 x86？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T16:33:44.470

> 为什么会这样？

对于大多数应用程序，构建为 32 位实际上更好。64 位在大多数情况下提供的好处很少，但也有一些明显的缺点（更高的内存使用率、更复杂的多平台依赖管理、更差的调试体验等）。

但是，如果您的应用程序*需要*能够使用大量内存，那么 64 位当然有优势（并且在 VS 中易于切换），但大多数应用程序不会落入这条船上。

这就是为什么 VS 2012 中的新默认设置是使用`AnyCPUPrefer32Bit`而不是`AnyCPU`应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T16:38:29.710

根据这个[错误报告](https://connect.microsoft.com/VisualStudio/feedback/details/455333/platform-target-is-defaulting-to-x86-rather-than-any-cpu#details)，它是因为在 x64 机器上使用 x64 代码的 Edit and Continue 的问题而完成的。通过将其更改为 x86，“编辑并继续”可以正常工作。

将其切换到 AnyCPU 应该没有危险。我总是这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T16:28:39.533

如果您选择指定 CPU，则会自动将 .exe 限制在一个平台或另一个平台上。

很少有任何理由这样做，除非您绝对有 32 位依赖项：

*   [Visual Studio“任何 CPU”目标是什么意思？](https://stackoverflow.com/questions/516730/visual-studio-any-cpu-target)

*   [/CLRIMAGETYPE](http://msdn.microsoft.com/en-us/library/31zwwc39.aspx)

换句话说，不存在“性能”问题。真正的问题是“兼容性”。如果您加载任何 32 位组件，并且您使用的是 64 位平台，那么您必须调用 WOW64。CLRTIMAGETYPE 允许您这样做。

# .net - LINQ：使用 FirstOrDefault 返回成员或其他成员

> ID：11037331
> 
> 赞同：3
> 
> 时间：2012-06-14T16:24:11.313
> 
> 标签：.net, linq

我对这种使用 Linq Query 有误解我确实有这个实体

```
class Content  
{          
    public string Type = "X";
    public string Name;  
    public int? Owner;  
} 
```

和一个列表列表，该列表包含 2 个成员，除名称和所有者外，其类型均相等（一个为空，另一个不是）。所以我尝试查询以查找具有特定所有者的内容，如果没有找到，则返回另一个下面使用的查询：

```
int? owner = 1;
  var result = (
     from c in list 
     where c.Type == "X" && c.Owner == owner 
     select c
     ).FirstOrDefault(c => c.Type == "X" && c.Owner == (int?)null); 
```

但结果成员返回 null。此查询的正确语句应该是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T16:27:21.710

您在这里应用*了两个*过滤器。该`where`子句将仅返回具有给定所有者的值 - 然后该`FirstOrDefault`子句中的谓词将仅考虑没有所有者的值。

我建议你使用：

```
var value = list.Where(c => c.Type == "X" && 
                            (c.Owner == null || c.Owner == owner))
                .OrderByDescending(c => c.Owner)
                .FirstOrDefault(); 
```

Using`OrderByDescending`会将任何具有 null 所有者的值放在具有非 null 所有者的值*之后*，因此当您获取第一个结果时，如果存在所有者，它将得到一个所有者。

# html - Json 调用返回相同的随机值

> ID：11037341
> 
> 赞同：0
> 
> 时间：2012-06-14T16:25:08.770
> 
> 标签：html, json, random, image

所以我正在制作一个网站来显示文件夹中的图像，并附有无限滚动功能。我刚刚把它记下来，唯一的问题是我在 javascript 中有一个函数，它调用一个“createImge”函数，该函数从一个选择随机图像并返回该图像路径的 php 文件中调用一个 json。问题是当我连续多次调用 createImage 时，它​​返回相同的图像，并且 php 不会生成新的随机数来选择文件。关于如何获得 createImg() 以使 php 在连续多次调用时选择不同的随机数的任何想法？？？

index.html 代码：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Request json test</title>
<script src="http://code.jquery.com/jquery-1.5.js"></script>
<script type="text/javascript">

var totalLoad;
var loadedImg=new Array();
var maxLoaded=20;
var loadFirst=5;
var bufferLoad=3;
var imgSrc;

function loadTop(){ 
    for(var i=0;i<loadFirst;i++){
    createImg();
    }    
}
function remove(id)
{
    $('.'+id).remove();
}
function createImg(){

    $.getJSON('json-data.php', function(data) {
        alert("Return json-data"+data.img);
        $('#showdata').html($('#showdata').html()+"<div id="+getImageName(data.img)+" ><img width=\"450px\" src=\""+data.img+"\"></div><br/>");
    });

}
function getImageName(src){
var path = src;
var tarr = path.split('/');      // ["static","images","banner","blue.jpg"]
var file = tarr[tarr.length-1]; // "blue.jpg"
var data = file.split('.')[0];  // "blue"
return data;

}
$(document).ready(function(){

    $(window).scroll(function(){
        // grab the scroll amount and the window height
        var scrollAmount = $(window).scrollTop();
        var documentHeight = $(document).height();

        // calculate the percentage the user has scrolled down the page
        var scrollPercent = (scrollAmount / documentHeight) * 100;

        if(scrollPercent > 80) {
                for(var i=0;i<bufferLoad;i++){
                createImg();
            }
        }
        if(totalLoad>maxLoaded){

        }
    });
});

</script>

</head>
<body>
<div id="showdata" style="width:450px;margin-left:auto;margin-right:auto;">
<script type="text/javascript">  
loadTop();
</script>  </div>
</body>
</html> 
```

json-data.php 代码：

```
$files = glob("Approved/*.*");
$no = sizeof($files)-1;

$random = rand(0, $no);
$imgHold=$files[$random];

$imgPull = array('img' =>$imgHold);
echo json_encode($imgPull);

?> 
```

非常感谢提前

# sockets - 停止 Akka HTTP 服务器

> ID：11037344
> 
> 赞同：2
> 
> 时间：2012-06-14T16:25:16.160
> 
> 标签：sockets, scala, akka

拥有一个简单的 Akka HTTP 服务器：

```
package org.package.some

import akka.actor.{IOManager, IO, Actor}
import java.net.InetSocketAddress

class HttpServerActor extends Actor {    
  val state = IO.IterateeRef.Map.async[IO.Handle]()(context.dispatcher)

  override def preStart() {
    IOManager(context.system) listen new InetSocketAddress(8000)
  }

  def receive = {
    case IO.NewClient(server) =>
      val socket = server.accept()
      state(socket) flatMap (_ => RequestProcessor.processRequest(socket))

    case IO.Read(socket, bytes) =>
      state(socket)(IO Chunk bytes)

    case IO.Closed(socket, cause) =>
      state(socket)(IO EOF None)
      state -= socket

    case "STOP" => 
      println("WHAT'S HERE??")
  }
} 
```

如何停止服务器，即关闭端口 8000 上的服务器套接字？

仅仅杀死演员没有任何效果：仍然有`netstat -a | grep 8000`一句话说端口仍在被监听。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T17:13:57.517

[`IOManager.listen`](http://doc.akka.io/api/akka/2.0.2/akka/actor/IOManager.html#listen%28SocketAddress%29%28ActorRef%29%3aServerHandle)返回 a [`ServerHandle`](http://doc.akka.io/api/akka/2.0.2/akka/actor/IO%24%24ServerHandle.html)，它有一个[`close`](http://doc.akka.io/api/akka/2.0.2/akka/actor/IO%24%24ServerHandle.html#close%28%29%3aUnit)方法。

```
class HttpServerActor extends Actor {
  val state = IO.IterateeRef.Map.async[IO.Handle]()(context.dispatcher)
  var handle: ServerHandle = _

  override def preStart() {
    handle = IOManager(context.system) listen new InetSocketAddress(8000)
  }

  def receive = {
    // ...
    case "STOP" => 
      handle.close()
  }
} 
```

# c# - 从gridview中的超链接打开pdf

> ID：11037349
> 
> 赞同：0
> 
> 时间：2012-06-14T16:25:39.840
> 
> 标签：c#, asp.net

当用户单击显示在 gridview 列中的超链接时，想要打开 pdf 文件。文件的名称取自存储文件标题的 gridview 的第一列。

将鼠标悬停在gridview中的超链接上会显示文件链接，但是单击它时不会打开pdf文件，

```
protected void Gridview1_RowDataBound(object sender, GridViewRowEventArgs e)
{

 if (e.Row.RowType == DataControlRowType.DataRow)
        {
            HyperLink hlink = (HyperLink)e.Row.FindControl("HL");
            string url = "~/Docs/" + e.Row.Cells[1].Text +".pdf";
            hlink.NavigateUrl = url;
            hlink.Text = "Read";
        } 
 } 
```

单击超链接时出现以下错误，因为它无法打开 pdf 文件。

> 无法找到该资源。说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用

在gridview中单击超链接时调用哪个事件，也许要在那里打开pdf应用程序。请建议。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T16:41:49.143

该错误表明您的文件不存在。您应该做的是放弃您所做的连接，而是在数据源中包含文件的全名（包括扩展名）并使用它（甚至是整个路径）。您想要这样做的原因是因为您可能出于审美目的严格修改/格式化/编码了单元格文本。你甚至可以添加一些嵌入的 html 来设置它的样式。

我想它看起来像这样：

```
protected void Gridview1_RowDataBound(object sender, GridViewRowEventArgs e)
{

 if (e.Row.RowType == DataControlRowType.DataRow)
     {
            DataRow row = ((System.Data.DataRowView)e.Row.DataItem).Row;
            HyperLink hlink = e.Row.FindControl("HL") as HyperLink;
            if (hlink!=null)
            {
                string url = string.Format("~/Docs/{0}",row["FileName"]);
                hlink.NavigateUrl = url;
                hlink.Text = "Read";
            }
     } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T16:43:21.673

您是否尝试在此页面的浏览器中检查“查看源代码”以检查正在输出的链接的实际路径并验证它是否正确？
您是否已通过调试器来确保它`FindControl("HL");`确实找到了您正在寻找的控件？由于控件位于 GridView 中，因此 asp.net 可能已修改其`id`. 您可以尝试`HL`使用

```
HyperLink hlink = e.Row.Cells[HL_cell_index].Controls[HL_control_index] as HyperLink; 
```

如果您在那里遇到问题。这两件事之一一定是你的问题。

作为建议，与@Jeremy 一致，您还应该将文件的完整路径存储在数据源（无论是数据库还是您使用的任何东西）中以绑定到此超链接列，这样您就不必做这个额外的事件绑定并遇到这样的问题。

# javascript - javascript 鼠标悬停图像交换问题

> ID：11037350
> 
> 赞同：2
> 
> 时间：2012-06-14T16:25:40.090
> 
> 标签：javascript, mouseover

我正在尝试用 javascript 替换悬停图像，但它似乎不起作用，知道为什么吗？我认为这是正确的方法。

```
<li>
   <a onMouseOver="document.fbi.src=images/facebookIconHover.jpg" onMouseOut="document.fbi.src=images/facebookIcon.jpg"
href="http://www.facebook.com">
     <img src="images/facebookIcon.jpg" NAME="fbi">
  </a>
</li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:32:09.153

看起来您需要做的所有事情（假设这些图像存在）就是在`src`字符串周围加上单引号。

```
onMouseOver="document.fbi.src='images/facebookIconHover.jpg'"
onMouseOut="document.fbi.src='images/facebookIcon.jpg'" 
```

不过，我建议您`:hover`对图像使用 CSS，因为它将演示与内容/脚本分开。

```
#element {
   background-image:url('url1.png');
}
#element:hover {
   background-image:url('url2.png');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T16:32:22.313

通过 jQuery：

```
$('img[name="fbi"]').hover(function(){
    $(this).attr('src','images/facebookIconHover.jpg');
},function(){
    $(this).attr('src','images/facebookIcon.jpg');
}); 
```

# hibernate - Hibernate saveAndUpdate 不会保留关系，而 merge 会保留

> ID：11037351
> 
> 赞同：0
> 
> 时间：2012-06-14T16:25:41.063
> 
> 标签：hibernate

我有以下具有以下关系的实体：

```
@Entity
@Table(name = "bpr_user")
public abstract class User {
  ...
  @OneToOne(fetch = FetchType.EAGER, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH,  CascadeType.REMOVE})
   @JoinColumn(name = "bcard_id", nullable = true)
   public BCard getBcard() {
     return bcard;
   }
} 
```

当我像这样运行合并时：

```
 Adult adult = new Adult();
    BCard bcard = createBCard();
    adult.setBcard(bcard);
    adult = adultDao.merge(adult); 
```

Bcard 实体被持久化并被赋予一个 id，但如果我使用 saveOrUpdate，只有 Adult 被持久化，而不是 Bcard。为什么？？

```
 Adult adult = new Adult();
    BCard bcard = createBCard();
    adult.setBcard(bcard);
    adult = adultDao.saveOrUpdate(adult); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T16:31:05.077

因为您已经为 MERGE 配置了级联，但没有为 SAVE_UPDATE 配置。

使用[Cascade 注释](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/annotations/Cascade.html)为 SAVE_UPDATE 添加级联。

# mongodb - 与文档数据库相比，Postgresql 的 Hstore（并且将会）有多好？

> ID：11037354
> 
> 赞同：9
> 
> 时间：2012-06-14T16:25:45.970
> 
> 标签：mongodb, postgresql, nosql

我很感兴趣，因为它带有一个强大的 ACID DB **，**它是无模式的，两全其美？

它与像 Mongo 这样承诺非常高的性能和**完整的二级索引**的文档数据库相比如何？

我说的是性能、值索引以及最重要的即席查询能力。它是否增强/牺牲了关系表中存在的功能？

# jquery - 长度或其中一个 div 中的复选框数

> ID：11037355
> 
> 赞同：1
> 
> 时间：2012-06-14T16:25:48.720
> 
> 标签：jquery

例如我有以下内容：

```
<div class="both">
    <textarea data-id="1" name="t1">Value 1</textarea>
    <input type="checkbox" value="checkbox1" checked="checked" name="c1">
    <input type="checkbox" value="checkbox1-2"  name="c1">
    <input type="checkbox" value="checkbox1-3"  name="c1">
</div>
<div class="both">
    <textarea data-id="2" name="t2">Value 2</textarea>
    <input type="checkbox" value="checkbox2-1"  name="c2">
    <input type="checkbox" value="checkbox2" checked="checked" name="c2">
    <input type="checkbox" value="checkbox2-3" name="c2">
</div>
<div class="both">
    <textarea data-id="3" name="t3">Value 3</textarea>
    <input type="checkbox" value="checkbox3-1"  name="c3">
    <input type="checkbox" value="checkbox3-2" name="c3">
    <input type="checkbox" value="checkbox3-3" checked="checked" name="c3">
</div> 
```

我想找出两者的第一个 div 元素中复选框的数量。

愚蠢的问题，但我是新来的..

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T16:27:53.133

```
$('div.both:first input:checkbox').length 
```

更多信息：[http ://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T16:27:22.070

```
$('div.both:first input[type="checkbox"]').length 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T16:28:17.233

```
$('div.both:first input[type="checkbox"]').length 
```

正如 jQuery Doc 所说的那样[http://api.jquery.com/checkbox-selector/](http://api.jquery.com/checkbox-selector/)

`input[type="checkbox"]`好于`:checkbox`

> 因为 :checkbox 是一个 jQuery 扩展而不是 CSS 规范的一部分，所以使用 :checkbox 的查询不能利用原生 DOM querySelectorAll() 方法提供的性能提升。为了在现代浏览器中获得更好的性能，请改用 [type="checkbox"]。

# jquery - jQuery 不显眼的验证忽略 MVC3 中的 data-val-required 消息

> ID：11037359
> 
> 赞同：9
> 
> 时间：2012-06-14T16:26:03.240
> 
> 标签：jquery, asp.net-mvc-3, data-annotations, unobtrusive-validation

我已经使用[这里](http://blog.gauffin.org/2011/08/)描述的方法来本地化我的数据注释消息，基本上它在普通形式的帖子中工作正常。我也可以在客户端看到本地化的验证消息。

但是，当我有一个部分视图具有要验证的输入字段并使用 ajax 调用加载时，就会出现问题。出于某种原因，我得到了默认验证消息（“此字段是必需的”），而不是在元素的 data-val-required 属性中设置的本地化消息。

我已验证以下内容：
1\. 我已包含“jquery.validate.min.js”和“jquery.validate.unobtrusive.min.js”。
2\. 我检查了 ajax 响应，它确实包含带有本地化消息的 data-val-required 属性。

我已经尝试了以下解决方案：
1\. 我尝试将 ajax 响应（不起作用）解析为 $.validator.unobtrusive.parse('form')
2\. 解析动态内容以进行验证，如此[处](http://xhalent.wordpress.com/2011/01/24/applying-unobtrusive-validation-to-dynamic-content/)所述。仍然没有解决办法。

我有一个紧迫的截止日期，这让我很困扰。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T10:05:18.300

我想你已经尝试过了：[stackoverflow.com/questions/4406291/jquery-validate-unobtrusive-not-working-with-dynamic-injected-elements](https://stackoverflow.com/questions/4406291/jquery-validate-unobtrusive-not-working-with-dynamic-injected-elements) - Steve Lamb 的回答对我帮助最大。

基本上，每当您更改页面内容时，您都需要重新初始化验证器，因为验证代码会构建一个列表来跟踪它只需要在页面加载时验证一次的控件......

我似乎还必须添加一些额外的代码才能通过并确保输入正确命名。~~给我一点时间，我会挖掘代码。~~- 嗯，抱歉，该代码是客户端应用程序的一部分，我无法发布。不太确定它是否会有所作为......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-11T21:59:18.797

以防万一有人提出这个问题，如文档所述，您的字段必须具有`name`属性：

> 强制：所有需要验证的输入元素都需要一个“名称”属性，如果没有这个，插件将无法工作。'name' 属性对于表单也必须是唯一的，因为这是插件跟踪所有输入元素的方式。但是，每组单选或复选框元素将共享相同的“名称”，因为该分组的值表示单个表单数据。

[资源](https://jqueryvalidation.org/reference/)

# java - 控制对 JAR 中的类的访问

> ID：11037361
> 
> 赞同：1
> 
> 时间：2012-06-14T16:26:11.547
> 
> 标签：java, class, jar

好的，所以我正在编写一个 JAR 作为即时通讯系统的后端实现。为了让类进行交互和所有，我正在使用`public class MyClassHere { ... }`. 但是当我将所有类编译到 JAR 中时，我不希望除主类之外的任何类都可以访问。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T16:38:21.157

我能想到的唯一方法是在构建链中使用像[ProGuard](http://proguard.sourceforge.net/manual/examples.html#application)这样的工具来停止暴露主类之外的所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T16:40:14.303

不是很优雅，也不是很慢，但是在这些类的构造函数中，您可以检查从（使用）实例化它们的类`new Exception.getStacktrace()`- 如果由您的类以外的任何东西调用，则限制控制。

# c# - 如何使用 setBinding 函数在 c# 代码中绑定按钮的背景颜色（而不是在 XAML 代码中）

> ID：11037366
> 
> 赞同：3
> 
> 时间：2012-06-14T16:26:22.740
> 
> 标签：c#, xaml, data-binding, dependency-properties

我基本上是在做一个演示，所以不要问为什么。

使用 XAML 很容易绑定它：

c#代码：

```
public class MyData
    {
        public static string _ColorName= "Red";

        public string ColorName
        {
            get
            {
                _ColorName = "Red";
                return _ColorName;
            }
        }
    } 
```

XAML 代码：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:c="clr-namespace:WpfApplication1"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <c:MyData x:Key="myDataSource"/>
    </Window.Resources>

    <Window.DataContext>
        <Binding Source="{StaticResource myDataSource}"/>
    </Window.DataContext>

    <Grid>
        <Button Background="{Binding Path=ColorName}"
          Width="250" Height="30">I am bound to be RED!</Button>
    </Grid>
</Window> 
```

但我正在尝试使用 c# setBinding() 函数实现相同的绑定：

```
 void createBinding()
        {
            MyData mydata = new MyData();
            Binding binding = new Binding("Value");
            binding.Source = mydata.ColorName;
            this.button1.setBinding(Button.Background, binding);//PROBLEM HERE             
        } 
```

问题出在最后一行，因为 setBinding 的第一个参数是**依赖属性**，但背景不是……**所以我在 Button 类中找不到合适的依赖** [属性](http://msdn.microsoft.com/en-us/library/system.windows.controls.button.aspx)。

```
 this.button1.setBinding(Button.Background, binding);//PROBLEM HERE 
```

但是我可以很容易地为 TextBlock 实现类似的东西，因为它具有依赖属性

```
 myText.SetBinding(TextBlock.TextProperty, myBinding); 
```

谁能帮我做演示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T16:49:28.660

你有两个问题。

1) BackgroundProperty 是一个静态字段，您可以访问该字段以进行绑定。

2）另外，在创建绑定对象时，传入的字符串就是Property的名称。绑定“源”是包含此属性的类。通过使用 binding("Value") 并将其传递给字符串属性，您可以获取字符串的值。在这种情况下，您需要获取 MyData 类的 Color 属性（一个 Brush）。

将您的代码更改为：

```
MyData mydata = new MyData();
Binding binding = new Binding("Color");
binding.Source = mydata;
this.button1.SetBinding(Button.BackgroundProperty, binding); 
```

在 MyData 类中添加一个 Brush 属性：

```
public class MyData
{
    public static Brush _Color = Brushes.Red;
    public Brush Color
    {
        get
        {
            return _Color;
        }
    }
} 
```

# java - java enum 可以有多个构造函数吗？

> ID：11037370
> 
> 赞同：10
> 
> 时间：2012-06-14T16:26:33.933
> 
> 标签：java

我知道我可以像这样创建一个枚举：

```
public enum MyEnum {
   ONE(1),
   TWO(2);
   private int value;
   private MyEnum(int value) {
      this.value = value);
   }
   public int getValue() {
      return value;
   }
} 
```

但我有一些问题：

1）似乎枚举值是在开始时声明的。是否有特定的格式。我可以在任何地方声明它们吗？

2) 是否可以声明一个具有多个构造函数的枚举，这是人们有时会做的事情吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-14T16:33:18.183

```
public enum MyEnum {
   ONE(1),
   TWO(1, 2);
   private int value1, value2;

   private MyEnum(int value) {
      this.value1 = value;
      this.value2 = 0; // default
      // this.value2 = getFromSomewhereElse(); // get it at runtime
   }

   private MyEnum(int value1, int value2) {
      this.value1 = value1;
      this.value2 = value2;
   }

   public int getValue1() {
      return this.value1;
   }

   public int getValue2() {
      return this.value2;
   }
} 
```

1.  是的，您必须在开始时声明枚举值。总是。
2.  请参见上面的代码。有可能的。如果人们这样做，这取决于应用程序。如果你有很多字段并且大部分应该是默认值，那么使用多个构造函数是一件好事。此外，可以在运行时（从文件或另一个静态类）读取字段的值。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-14T16:28:33.407

1.  是的，它们必须在枚举类的其他字段之前声明。
2.  是的，它们可以有多个构造函数。

你自己试试就可以发现的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-14T16:30:47.650

1.  根据[JLS 7](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.9)，常数先行。

2.  “枚举声明中的任何构造函数或成员声明都适用于枚举类型，就好像它们已经存在于普通类声明的类主体中一样，除非另有明确说明。” 和“如果枚举类型的构造函数声明是公共的或受保护的，这是一个编译时错误。” （同上，8.9.2）

# oracle - 下载哪一个：JDK 还是 JRE？

> ID：11037378
> 
> 赞同：4
> 
> 时间：2012-06-14T16:27:12.570
> 
> 标签：oracle, java

> **可能重复：**
> [Java SE 6 vs. JRE 1.6 vs. JDK 1.6 - 这些是什么意思？](https://stackoverflow.com/questions/250517/java-se-6-vs-jre-1-6-vs-jdk-1-6-what-do-these-mean)

我需要安装最新版本的 J2SE。所以现在我在下面的指定链接上试图弄清楚如何继续。我得到的书的作者说要获得 J2SE 的更新版本。我发现 JSE7u5 我猜是更新版本。但是在页面的右侧（仍然是下面的指定链接）出现了JDK和JRE。我应该安装这两个来创建完整的 JSE 包吗？我也在Mac上运行。

[http://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T16:30:01.527

如果您想进行 Java*开发*，请下载 JDK 。JDK 附带开发所需的 Java 编译器 (javac)。JRE 只是运行时环境 - 如果您只想*运行*Java 程序，请使用它。如果您获得了 JDK，它会附带一个 JRE，因此您无需单独获得 JRE。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-14T16:40:12.837

以防其他答案不清楚：

1.  您需要 JRE 来运行 Java 应用程序；JRE 是 Java Runtime Environment 的缩写。
2.  您需要 JDK 来开发 Java 应用程序；JDK 是 Java Development Kit 的缩写。JDK 包括一个 JRE。
3.  标准版和企业版的当前术语是 Java SE（标准）和 Java EE（企业）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-14T16:30:10.103

Java 开发工具包 (JDK) 就是您所需要的。

如果您只想运行 Java 程序，那么 JRE 就是您所需要的。

Java 平台多年来一直没有被称为 J2SE。上一个 J2SE 5.0 是在 2004 年发布的，并且已经终止了几年。[http://en.wikipedia.org/wiki/Java_version_history](http://en.wikipedia.org/wiki/Java_version_history)

# mysql - 在 MySQL 查询 LEFT JOIN 中减去 2 行

> ID：11037379
> 
> 赞同：0
> 
> 时间：2012-06-14T16:27:21.133
> 
> 标签：mysql, database

```
SELECT * From `users` AS `User`
LEFT JOIN `selections` AS `Selections` ON (`Selections`.`user_id` = `User`.`id`)
LEFT JOIN  `clients` AS `Client` ON (`Client`.`id` = `Selections`.`client_id`)
LEFT JOIN  `client_stats` AS `ClientsStat` ON (`ClientsStat`.`date` = """DATE1""") 
```

问题是我想在 ClientsStat 中获取某些字段的值，其中 date = "DATE1" 减去相同的字段但日期为 #2 但我不确定在 LEFT JOIN 中如何做到这一点。我尝试对同一个表进行另一个 LEFT JOIN 并重命名并减去但执行时间非常长，所以我想我的方法很糟糕。

编辑：

我的结果是这样的：

```
USER => fields...
SELECTIONS => fields...
CLIENTS => fields..
CLIENT_STATS => field x,y,z on date = date 1 
```

等等。

我想要这个：

```
USER => fields
USERSELECTIONS => fields...
CLIENTS => fields..
CLIENT_STATS => field x,y,z when client_stats.date = date1 MINUS field x,y,z when client_stats.date = date2 
```

等等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:01:29.153

您应该擅长统计数据的双重联接。性能，我猜是基于索引。但是，您确定您的意思是左连接（仅在第一个表上需要，无论第二个表是否匹配）。或者...您的意思是 INNER JOIN - 您期望在连接的双方都有记录。如果您试图从一个记录日期减去另一个记录日期的值，我希望找到两个条目。我写的是“JOIN”（双方都必须存在）而不是“LEFT JOIN”的基础。

```
SELECT 
      U.* 
      CS1.x - CS2.x as XDiff,
      CS1.y - CS2.y as YDiff,
      CS1.z - CS2.z as ZDiff
   From 
      users U
         JOIN selections S
            ON U.ID = S.User_ID
            JOIN clients C
               ON S.Client_ID = C.ID
               JOIN  client_stats CS1
                  ON ( C.ID = CS1.Client_ID AND CS1.`date` = YourFirstDateVariable )
               JOIN  client_stats CS2
                  ON ( C.ID = CS2.Client_ID AND CS2.`date` = YourSecondDateVariable ) 
```

不确定这是否是您要查找的内容，但我认为您错过的一个元素是仅在日期加入客户端统计信息表......您在 WHICH 客户端 ID 上没有限定符，因此可能是失败你的表现。确保 client_Stats 在 (client_id,date) 上有一个索引——前提是 client_id 丢失并且是 client_stats 表的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T16:35:04.077

首先：您必须使用来自其他表之一的字段离开连接到 client_stats。所以首先让连接正常工作。现在的方式 - 该查询是否运行？第二：然后您可以在日期上使用 WHERE 子句限制 ClientsStat.date 上的日期范围：

WHERE ClientsStat.date >= 'date1' AND ClientsStat.date <= 'date2'

或类似的东西。

（可能需要查看有关表格的更多信息，以准确了解您要执行的操作）。作为一般规则 - 让查询返回比您需要的更多的行，然后找出如何减少它们。

# django - 当 debug = false 时，Django + Apache + mod_wsgi 失败

> ID：11037383
> 
> 赞同：0
> 
> 时间：2012-06-14T16:27:22.273
> 
> 标签：django, apache, mod-wsgi

我正在尝试练习部署正在开发的 django 应用程序。我已经更新它以使用 django 1.3，并且一切都在调试模式下工作。一旦我将设置中的 DEBUG 切换为 False，服务器就会返回以下故障。

```
Internal Server Error
The server encountered an internal error or misconfiguration and was unable to complete your request.
Please contact the server administrator, [no address given] and inform them of the time the error occurred, and anything you might have done that may have caused the error.
More information about this error may be available in the server error log.
Apache/2.2.14 (Ubuntu) Server at 192.168.1.220 Port 80 
```

我个人不想使用 apache，但它一直在我身上。谁能指出我可能是什么？

```
Traceback (most recent call last):

File "/home/fakeco/django1.3/django/core/handlers/base.py", line 89, in get_response
    response = middleware_method(request)

File "/home/fakeco/django1.3/django/middleware/common.py", line 67, in process_request
    if (not _is_valid_path(request.path_info, urlconf) and

File "/home/fakeco/django1.3/django/middleware/common.py", line 154, in _is_valid_path
    urlresolvers.resolve(path, urlconf)

File "/home/fakeco/django1.3/django/core/urlresolvers.py", line 342, in resolve
    return get_resolver(urlconf).resolve(path)

File "/home/fakeco/django1.3/django/core/urlresolvers.py", line 250, in resolve
    for pattern in self.url_patterns:

File "/home/fakeco/django1.3/django/core/urlresolvers.py", line 279, in _get_url_patterns
    patterns = getattr(self.urlconf_module, "urlpatterns", self.urlconf_module)

File "/home/fakeco/django1.3/django/core/urlresolvers.py", line 274, in _get_urlconf_module
    self._urlconf_module = import_module(self.urlconf_name)

File "/home/fakeco/django1.3/django/utils/importlib.py", line 35, in import_module
    __import__(name)

File "/home/fakeco/domains/fakeco-directory.co.uk/fakecodirectory/urls.py", line 3, in <module>
    admin.autodiscover()

File "/home/fakeco/django1.3/django/contrib/admin/__init__.py", line 26, in autodiscover
    import_module('%s.admin' % app)

File "/home/fakeco/django1.3/django/utils/importlib.py", line 35, in import_module
    __import__(name)

File "/home/fakeco/domains/fakeco-directory.co.uk/fakecodirectory/contacts/admin.py", line 2, in <module>
    import fakecodirectory.contacts.models as models

File "/home/fakeco/domains/fakeco-directory.co.uk/fakecodirectory/contacts/models.py", line 3, in <module>
    from fakecodirectory.generic.models import Country, Title

File "/home/fakeco/domains/fakeco-directory.co.uk/fakecodirectory/generic/models.py", line 9, in <module>
    from fakecodirectory.contacts.models import Manufacturer

ImportError: cannot import name Manufacturer 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T16:46:47.583

确保你有：

1.  创建了一个[500.html 模板](https://docs.djangoproject.com/en/dev/topics/http/views/#the-500-server-error-view)
2.  将您的电子邮件地址添加到 [`ADMINS`](https://docs.djangoproject.com/en/dev/ref/settings/#admins) 设置中，以便通过电子邮件向您发送回溯。
3.  查看 apache 错误日志，看看那里是否有任何有用的信息。对于 Ubuntu，请查看`/var/log/apache2/`

# c - 获取 Linux 上当前进程的环境变量

> ID：11037388
> 
> 赞同：0
> 
> 时间：2012-06-14T16:27:40.587
> 
> 标签：c, linux, environment-variables, porting

我正在尝试将应用程序从 Windows 移植到 Linux。在 Windows 中，我在 windows.h 中有一个 GetEnvironmentStrings() 函数，它以 NAME=VALUE 的形式为我提供当前进程中的环境变量及其值。

是否有等效的 Linux 函数调用？我需要一个 C 函数。如何在 Linux 上实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T16:34:36.497

您可以通过变量访问环境变量`extern char **environ;`。

[阅读更多](http://pubs.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap08.html)：

> 环境变量的值是一个字符串。对于 C 语言程序，一个称为环境的字符串数组应在进程开始时可用。该数组由外部变量environ指向，定义为：
> 
> ```
> extern char **environ; 
> ```
> 
> 这些字符串的格式为`name=value`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T16:33:26.073

有[getenv](http://linux.die.net/man/3/getenv) ()
符合 SVr4、POSIX.1-2001、4.3BSD、C89、C99。

# android - 从 Apache 服务器在 Android 上播放 MP4 视频的问题

> ID：11037390
> 
> 赞同：2
> 
> 时间：2012-06-14T16:27:49.310
> 
> 标签：android, apache, video

我在尝试使用 Android 网络浏览器播放 MP4 视频（使用 HTML5 标签）时遇到问题。

我已经尝试过使用直接的 HTML5 和 Video.JS 插件（videojs.com），并且在这两种情况下都遇到了同样的问题。描述我所看到的：

从 Android 浏览时，我网站上的视频无法播放。我点击播放并得到一个错误对话框，上面写着“无法播放视频。抱歉，无法播放此视频。”

在使用 Video.JS 时，我最初认为这可能是视频编码问题，所以为了尝试隔离，我从 videojs.com 的主页上抓取了代码和视频（在 Android 上运行良好）和把它们放在我的测试服务器上（运行 apache）。事情在 iPhone 上运行良好，但在 android 上却不行。

第二步，我把从 videojs.com 抓取的相同代码和文件放到另一个运行 IIS 的开发服务器上。从那里开始，我测试的任何 Android 都运行良好。

这对我来说意味着这是一个服务器配置问题，但这就是我难住的地方。我已经为 mp4 文件（视频/mp4）的 mime 类型正确配置了 apache 和 IIS。在从两台服务器请求文件时，我通过查看 HTTP 标头验证了这一点。

有没有人知道要查看哪些其他设置？显然代码是正确的，它在 IIS 服务器上运行良好，但由于某种原因，当从我的 Apache 服务器提供服务时，它无法在 Android 上正确播放。

任何帮助是极大的赞赏。

谢谢，

埃文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T21:55:03.993

我遇到了同样的问题，然后我发现 Android 不喜欢安全的 HTTP 地址。一旦我从 HTTP 链接中删除了“s”，它终于可以工作了。所以你的链接应该是这样的：

```
<video width='640' height='360' src='http://domain.net/video/640x360_example.mp4' type='video/mp4' id='player1' autoplay='autoplay' controls='controls' preload='none'></video> 
```

希望这可以帮助你！我花了 10 个月的时间寻找这个解决方案。:)

# c++ - C ++：指向具有可变数量参数的函数的函数指针

> ID：11037393
> 
> 赞同：18
> 
> 时间：2012-06-14T16:27:53.803
> 
> 标签：c++, function, function-pointers, member-function-pointers

我试图找出一种方法来将函数指针分配给具有不同数量参数的函数。

我有一个 while 循环，它采用许多不同的函数作为条件语句，所以我不想用完全相同的代码编写多个 while 循环，而是希望有一个带有函数指针的循环。所有函数都是格式的`bool f(...)`。我认为一些代码最能说明我的意思：

```
int a, b, c, d;
MyClass* my_class;

typedef bool (MyClass::*my_fun_t)();
my_fun_t my_fun;

if (condition1)
    my_fun = &MyClass::function_one();
else if (condition2)
    my_fun = &MyClass::function_two(a, b);
else if (condition3)
    my_fun = &MyClass::function_three(a, b, c);
else if (condition4)
    my_fun = &MyClass::function_four(a, b, c, d);

while ((my_class->*my_fun)()) 
{ ... } 
```

现在这显然不起作用，因为函数具有不同的签名。有没有可能让它以类似的方式工作？functoids 是我应该看的东西吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T16:32:03.547

您可以使用`std::function<>`和`std::bind()`。

```
#include <functional>

using std::placeholders::_1;

typedef std::function<bool(MyClass&)> my_fun_t;
my_fun_t my_fun;

if (condition1)
    my_fun = std::bind(&MyClass::function_one, _1);
else if (condition2)
    my_fun = std::bind(&MyClass::function_two, _1, a, b);
else if (condition3)
    my_fun = std::bind(&MyClass::function_three, _1, a, b, c);
else if (condition4)
    my_fun = std::bind(&MyClass::function_four, _1, a, b, c, d);

while (my_fun(my_class)) { ... } 
```

这些假设您将使用 C++11。如果不能使用 C++11 但可以使用 TR1，请将所有替换`std::`为`std::tr1::`. 还有一个[Boost 实现](http://www.boost.org/doc/libs/1_49_0/libs/bind/bind.html)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-14T17:50:59.387

这对我有用：

```
#include <iostream>
#include <cstdarg>

using namespace std;

class MyInterface
{
public:
    virtual bool func(int argc, ...) = 0;
};

class MyImpl : public MyInterface
{
public:
    virtual bool func(int argc, ...);
};

bool MyImpl::func(int argc, ...)
{
    va_list varargs;
    va_start(varargs,argc);
    cout << "Arguments passed:" << endl;
    for(int i = 0; i < argc; ++i)
    {
        // expect double values
        double val = va_arg(varargs,double);
        cout << val << endl;
    }
    va_end(varargs);
    return true;
}

typedef bool (MyInterface::*MyFunc)(int, ...);

int main() {

    MyImpl impl;
    MyInterface* interface = &impl;
    MyFunc pfunc = &MyInterface::func;

    if(!(interface->*pfunc)(2,double(3.14),double(2.72)))
    {
        return 1;
    }
    return 0;
} 
```

输出：

```
Arguments passed:
3.14
2.72 
```

显然，您可以使用变量参数为（成员）函数声明和使用函数指针。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-14T16:33:17.713

您想要`std::function`一个多态函数对象，并`std::bind`通过将参数绑定到其他仿函数的参数来创建函数对象。

如果您不能使用 C++11，那么`boost::function`和`boost::bind`是等价的，尽管限制性稍强。

```
std::function<bool()> my_fun;

if (condition1)
    my_fun = std::bind(&MyClass::function_one, my_class);
else if (condition2)
    my_fun = std::bind(&MyClass::function_two, my_class, a, b);
else if (condition3)
    my_fun = std::bind(&MyClass::function_three, my_class, a, b, c);
else if (condition4)
    my_fun = std::bind(&MyClass::function_four, my_class, a, b, c, d);

while (my_fun()) 
{ ... } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T16:29:43.143

> 我试图找出一种方法来将函数指针分配给具有不同数量参数的函数。

你不能。函数指针特定于*一个*函数签名。这完全合乎逻辑：你将如何调用这样的函数？（是的，C 允许调用函数而不在其声明中指定函数有多少参数，但这在 C++ 中不起作用，因为它颠覆了类型系统。）

> functoids 是我应该看的东西吗？

通常是的，但他们没有解决这个问题。

# vb.net - 如何防止抛出多个 SelectedIndexChanged 事件？

> ID：11037398
> 
> 赞同：0
> 
> 时间：2012-06-14T16:28:12.670
> 
> 标签：vb.net, winforms

我在 winforms 中有一个组合框，它根据您选择的内容确定其他组合框中填充的内容。我使用数据视图填充了初始组合框：

```
combobox_process.DataSource = dataview
combobox_process.DisplayMember = "UserDefine1"
combobox_process.SelectedIndex = -1 
```

效果很好，除了这些行中的每一行都会引发 SelectedIndexChanged 事件。填充下一个组合框的函数会监听该事件，因此它运行了 3 次。我问了一位同事，他建议只是循环遍历数据并将它们全部手动添加为字符串，但如果可以的话，我更愿意坚持使用数据绑定。特别是如果将来我需要做一些我只能通过数据绑定来做的事情。

有什么想法吗？也许有某种方法可以在这段代码的一部分期间禁用该事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T22:02:35.123

事件在您不希望触发时触发是 Windows 窗体中的常见问题 - SelectedIndexChanged 就是一个典型示例。我经常使用的一种方法是声明在运行部分代码时设置的标志，我知道当我不想听它时会触发事件。

一个例子：

```
Public Class Form1
    Private m_IsSettingDataSource As Boolean = False

    Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
        Try
            Me.m_IsSettingDataSource = True
            combobox_process.DataSource = DataView
            combobox_process.DisplayMember = "UserDefine1"
            combobox_process.SelectedIndex = -1
        Catch
            Throw
        Finally
            Me.m_IsSettingDataSource = False
        End Try
    End Sub

    Private Sub combobox_process_SelectedIndexChanged(sender As Object, e As EventArgs) Handles combobox_process.SelectedIndexChanged
        If Not Me.m_IsSettingDataSource Then
            ' Do what you want to do when not setting data source
        End If
    End Sub
End Class 
```

您可以这样做，或者像约翰所说的那样，关闭并打开事件处理程序。当您知道两个或多个事件处理程序将受到影响时，标志方法可能会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T16:29:51.053

您可以在进行调用之前取消绑定事件处理程序，然后在调用完成后重新绑定它。

# java - 提交表单而不刷新（SPRING MVC 3）

> ID：11037399
> 
> 赞同：2
> 
> 时间：2012-06-14T16:28:14.847
> 
> 标签：java, javascript, forms, spring, spring-mvc

是否可以在不刷新的情况下在 SPRING MVC 3 中提交表单？

我想要的是将 SPRING 表单中的数据存储到 java**对象/POJO。**

这是我的**map.jsp**

```
<form:form action="" method="post" commandName="userQuery">    
    <form:input path="startLocation"  id ="startLocation" />
<input type="submit" value="Search" onclick="codeAddress()">

 <script  type="text/javascript">
     function codeAddress(){
        var address = document.getElementById("startLocation").value;                
        geocoder.geocode( { 'address': address, 'partialmatch' : true }, geoCodeResults );                
 </script> 
```

我正在尝试将数据（即 startLocation ）存储到 java 对象，**同时**将该数据用于 javascript，以便我可以显示谷歌地图并在该位置显示标记。但是每次我提交表单时，它都会刷新页面，因此不会呈现 MARKER，因为它会重新加载包括地图在内的整个页面

这是我的**Controller.java**

```
@RequestMapping(value= "/map" , method = RequestMethod.GET)
public ModelAndView showMap(){
    ModelAndView mav = new ModelAndView("home/map");
    Query query = new Query();
    mav.getModel().put("userQuery", query);                
    return mav;        
}

  @RequestMapping(value="/map", method = RequestMethod.POST)
 public ModelAndView createMap(@ModelAttribute("userQuery") Query query ){                
    ModelAndView mav = new ModelAndView("home/map");        
    List<Query> q = new ArrayList<Query>();        
    q.add(new Query(query.getStartLocation()));                        
    mav.addObject("q", q);        
    return mav;        
} 
```

我需要存储**startLocation**。请帮忙。除了 SPRING 表单之外，还有其他存储用户输入的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T06:34:24.760

我会考虑将[jQuery](http://jquery.com/) javascript 库与 jQuery[表单](http://jquery.malsup.com/form/)插件一起使用。它使使用 AJAX 发布表单（即无需重新加载整个页面）变得更加容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T20:18:19.777

你在做什么很好。但是您缺少的一件事是 java 脚本函数中的“return false”。因为您是从表单提交按钮调用该函数，所以在成功处理您的 ajax 请求后，它也会提交表单。所以你需要阻止它。

希望这对您有所帮助。干杯。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T11:49:30.423

我认为下面的代码会帮助你

在事件上调用下面的 javascript 方法，当您想更新开始位置时，需要在提交按钮单击时调用 addStartLocation 方法，而不是“codeAddress()”方法

```
var xmlHttp;
            function addStartLocation(){
                if (typeof XMLHttpRequest != "undefined"){
                    xmlHttp= new XMLHttpRequest();
                }
                else if (window.ActiveXObject){
                    xmlHttp= new ActiveXObject("Microsoft.XMLHTTP");
                }
                if (xmlHttp==null){
                    alert("Browser does not support XMLHTTP Request")
                    return;
                }
                var url="/project/updateStartLocation";
                url +="?location=" +document.getElementById("location").value;
                xmlHttp.onreadystatechange = displayMap;
                xmlHttp.open("GET", url, true);
                xmlHttp.send(null);
            }

function displayMap() {
// Here you can right geocode to display map
} 
```

然后在 Spring MVC Controller 中像这样处理这个请求

```
@RequestMapping(value = "/updateStartLocation", method = RequestMethod.GET)
    public @ResponseBody String updateStartLocation(@RequestParam(value = "location", required = true) String location, Model model) {
        //Perform your logic to update Start Location
        return location;
    } 
```

# java - Eclipse：找不到类：javac1.7

> ID：11037400
> 
> 赞同：1
> 
> 时间：2012-06-14T16:28:17.280
> 
> 标签：java, eclipse, compiler-construction

我安装了 java jdk 1.6，今天安装了 jdk 1.7，因为需要编译新项目。因此，当我尝试使用 ANT (build.xml) 进行编译时，将 JAVA_HOME 从 1.6 路径更改为 1.7 路径并使用 jdk 1.7 创建项目，我收到了**找不到 javac1.7 类**的错误... cheked compiler (preferences-java-compiler)它是 1.6（也有 1.5 .1.4），但没有我需要的 1.7。那么，也许有人知道这个问题的解决方案？谢谢你。抱歉英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T16:37:27.027

请注意：

*   [只有新版本的 Eclipse 支持 JDK 1.7](http://wiki.eclipse.org/JDT_Core/Java7)（第一个 Indigo 版本不支持）
*   您也必须在首选项/java/installedJRes 中更改使用的 JRE

Eclipse 使用特定的编译器。他们[在这里](http://www.eclipse.org/jdt/ui/r3_8/Java7news/whats-new-java-7.html)提到了他们在 Eclipse 中为 JDK1.7 添加的功能。

# asp.net-mvc-3 - MvcContrib Pager - 更改页面大小

> ID：11037402
> 
> 赞同：1
> 
> 时间：2012-06-14T16:28:17.490
> 
> 标签：asp.net-mvc-3, razor, mvccontrib

我没有使用网格，只是使用 MvcContrib 寻呼机。我为 Pager 创建了一个局部视图（因此我可以轻松地将其显示在结果的顶部和底部），它调用该`@Html. Pager`方法如下：

```
 @Html.Pager(Model.PagedPrograms).First("<<").Last(">>").Next(">").Previous("<").Format("Item {0} - {1} of {2} ") 
```

只要所有参数都通过 QueryString 传递给页面，这无需额外调整即可工作，因为 Pager 知道将这些参数重新构建到 URL 上。

我想为用户提供更改页面大小的选项（比如 20、50、全部）......我可以在控制器端轻松处理它，我可以写类似

```
@if (Model is Foo) {
     @Html.ActionLink<SearchController>(sc => sc.Foo(var1, var2, var3, 20), "20")
     @Html.ActionLink<SearchController>(sc => sc.Foo(var1, var2, var3, 50), "50");
     @Html.ActionLink<SearchController>(sc => sc.Foo(var1, var2, var3, -1), "All");
} 
```

但是对于可能使用此寻呼机的每种模型类型，我都必须这样做......我可能会想太多或者完全倒退，但我想我会问一下，看看是否有人有洞察力。

目前，寻呼机仅从采用`IPagedProgramList`(provides `IPagination<ProgramDTO> { get; }`) 的视图中调用，并且我有两个 ViewModel 实现该接口（一个简单搜索和一个高级搜索）。但是，如果这个项目增长并且我们添加了使用该接口的新 ViewModel，我将不得不更新 Pager 部分视图，这看起来很糟糕 / 无法缩放 / 等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:48:55.867

所以向 Ek0nomik 致敬，他让我在这个问题上跳出思维定势。

第 1 步：确保所有将使用 Pager 控制器的页面都通过 GET 而不是 POST 传递所有参数。如果您必须在某处接受 post 并将所有参数转换为 GET 方法的**原始类型，请使用 RedirectToAction。**

第 2 步：不要担心添加`.Link()`到寻呼机。只要一切都是通过 GET 进来的，你就没事。当您前进/后退时，它将查看页面的 URL 并根据需要调整页码参数。

第 3 步（可选但推荐）：为了在您的应用程序中保持一致性，您应该在某个地方（可能是您的 Global.ascx.cs 文件）定义您将支持的页面大小列表。在我的情况下，我使用`Dictionary<int,string>`这样我可以`-1`作为`PageSize`值传递但显示`All`（当然数据层必须知道这`-1`意味着禁用分页）。

第 4 步：将类似这样的内容添加到您的寻呼机局部视图中：

```
<ul class="pageSizeSelector">
        @foreach (KeyValuePair<int,string> kvp in MvcApplication.AVAIL_PAGE_SIZES)
        {
            <li><a href="#" onclick="changePageSize(@kvp.Key)">@kvp.Value</a></li>
        }
 </ul> 
```

第 5 步：javascript 函数`changePageSize`如此简单，我不敢相信我没有首先想到这个（注意：不需要 jQuery ......以防万一你还没有使用它，你不需要只是为了这）。

```
function changePageSize(size) {
  var PSpattern = /PageSize=\d+/i;
  var url = window.location.href;
  url = url.replace(PSpattern, "PageSize=" + size);
  window.location.href = url;
} 
```

第 6 步（可选，除非您是网络巨魔）：盈利！

# jquery - jQuery - 如何将多个节点附加到容器

> ID：11037403
> 
> 赞同：2
> 
> 时间：2012-06-14T16:28:20.090
> 
> 标签：jquery, append, nodes, dom-manipulation

我需要将多个节点附加到一个容器。我不想在每次迭代中进行缓慢的 DOM 追加，而是想将文档片段中的节点排队（对其他想法开放）并一次追加它们。这是我的代码：

```
var fragment = document.createDocumentFragment();
$.each( poFailureInfoMultiple, function(i,e){
    fragment.appendChild(
         $('<button/>', {
            'class': 'el-contents-center multiple-record'
         })
    );
});

$('#some-container').html( fragment ); 
```

我的问题是我收到一条错误消息，说明：

```
Could not convert JavaScript argument arg 0 [nsIDOMDocumentFragment.appendChild] 
```

那么如何一次将多个元素节点附加到我的 DOM 中呢？我不必使用片段方法（我刚刚找到它，它似乎可行）。

注意： **我不想为追加使用 HTML 语法**

```
i.e. $('#some-container').append('<button class="myclass"></button>'); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T16:31:05.573

```
var elemsToAppend=$()

$.each( poFailureInfoMultiple, function(i,e){
    elemsToAppend = elemsToAppend.add(
        $('<button/>', {
            'class': 'el-contents-center multiple-record'
        })
    )
}); 
$('#some-container').append(elemsToAppend) 
```

jQuery 对象上的 add 方法不会改变对象本身，而是返回一个新对象，这就是您需要`elemsToAppend = elemsToAppend.add(...)`. 老实说，我不能说这种方法有多快。我实际上认为html方式更快。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T16:44:40.470

您将文档片段与 jQuery 混合在一起，传递了错误的参数。`appendChild`不带`jQuery`对象`$.html`也不带 a`DocumentFragment`这就是你的错误告诉你的。

**示例** [http://jsfiddle.net/YNLzg/](http://jsfiddle.net/YNLzg/)

```
var fragment = document.createDocumentFragment();
$.each( [1,2,3], function(i,e){
    fragment.appendChild(
         $('<button/>', {
            'class': 'el-contents-center multiple-record'
         })[0] // passing the HTMLElement to appendChild, not a jQuery object
    );
});
// Can't call $.html() and pass it a fragment, call appendChild.
document.getElementById('ct').appendChild(fragment);​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-13T15:50:49.323

If you would choose html syntax for append ([demo](http://jsbin.com/bahumixi/1/watch?html,js,output)):

```
$(selector)
  .append(arrayOfContents.map(function(s){return "<span>"+s+"</span>";}).join('')); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T16:45:01.750

`$('#some-container').append(fragment.childNodes);`将完成这项工作。举个有趣的例子，在控制台中运行：

```
var f = document.createDocumentFragment();
var div = document.createElement('div');
div.innerHTML = "<h1>This heading was not here before :)</h1>";
f.appendChild(div);
$('body').append(f.childNodes); 
```

标题将出现在页面底部。（在 Chrome、FF7 和 IE8 中测试）

更新：澄清这如何适用于您的 OP 中的代码：

```
var fragment = document.createDocumentFragment();
$.each(poFailureInfoMultiple, function (i, e) {
    var btn = document.createElement('button');
    btn.cssClass = 'el-contents-center multiple-record';
    fragment.appendChild(btn);
});
$('#some-container').append(fragment.childNodes); 
```

# apache - wamp/Apache - 存在于 /wamp/www 之外的新虚拟主机

> ID：11037404
> 
> 赞同：0
> 
> 时间：2012-06-14T16:28:20.697
> 
> 标签：apache, virtualhost, wampserver, document-root

我的`httpd-vhosts.conf`文件看起来像这样。我正在尝试创建 2 个虚拟主机。其中一个项目存在于默认文档根目录中，而另一个项目则完全位于另一个硬盘驱动器上。

```
<VirtualHost *:80>
    ServerAdmin webmaster@dummy-host.example.com
    DocumentRoot "C:/wamp/www/project1/public_html"
    ServerName p1.localhost
    ServerAlias www.p1.localhost
    ErrorLog "logs/p1.localhost.log"
</VirtualHost>

<VirtualHost *:80>
    ServerAdmin webmaster@dummy-host.example.com
    DocumentRoot "E:/Other Media/www"
    ServerName pn.localhost
    ServerAlias www.pn.localhost
    ErrorLog "logs/pn.localhost.log"
    CustomLog "logs/pn.localhost.log" common
    <Directory "E:/Other Media/www">
        Options Includes Indexes FollowSymLinks
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost> 
```

我还将这个块添加到我的`httpd.conf`

```
<Directory "E:/Other Media/www">
    Order allow,deny
    Allow from all
</Directory> 
```

`/wamp/www`正如所料， works文件中的VH ，但我`E:`驱动器上的项目不会显示！

任何意见，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T08:30:16.280

那么还有其他简单的解决方案。你可以在这里找到一个，[http://www.tech99.us/wamp-configuring-virtual-directory/](http://www.tech99.us/wamp-configuring-virtual-directory/)

通过使用 wamp> apache>alias>add alias 你可以很容易地配置外部目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T16:09:09.477

我最终把所有东西都移到了[EasyPHP](http://www.easyphp.org/)上。它更优雅地处理外部磁盘位置。

# google-places-api - Google Places API 查询

> ID：11037405
> 
> 赞同：0
> 
> 时间：2012-06-14T16:28:22.707
> 
> 标签：google-places-api, google-places

我正在使用 Google Places API 中的 Place Searches，并且想知道 JSON 结果是如何返回/排序的。例如，在结果数组中以随机顺序返回的地点列表；或者它们是否按到指定位置的最近距离的顺序返回，即结果数组中的第一个结果是离指定位置最近的位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:05:52.933

这由`rankby`参数决定，该参数允许您选择突出（最佳搜索结果匹配）或距离。

更多信息：[https ://developers.google.com/maps/documentation/places/#PlaceSearchRequests](https://developers.google.com/maps/documentation/places/#PlaceSearchRequests)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T05:44:18.530

这已添加到 API，请在您的地方搜索请求中使用“rankby=distance”而不是“radius”，如此处文档中所述：[https ://developers.google.com/maps/documentation/places/#地点搜索请求](https://developers.google.com/maps/documentation/places/#PlaceSearchRequests)

# linux - Linux 命令 - 使用参数调用

> ID：11037425
> 
> 赞同：0
> 
> 时间：2012-06-14T16:29:42.393
> 
> 标签：linux, terminal, command, invoke

有没有办法用参数调用 linux 命令？例如，当调用“su”请求密码时，我想在终端中粘贴一个字符串，该字符串将调用 su 并在之后填写密码（例如 1234）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:09:58.837

改为使用`sudo`。

修改 /etc/sudoers 添加这一行：

`$user ALL=(ALL) NOPASSWD: ALL`

$user 是您的用户名。比您无需任何密码即可运行 sudo 命令。

# javascript - 将 Javascript 添加到 DOM

> ID：11037429
> 
> 赞同：0
> 
> 时间：2012-06-14T16:29:53.633
> 
> 标签：javascript, jquery

有什么建议。为什么我不能将 javascript 添加到 DOM 中？

```
var strScript = "<script type='text/javascript'></script>";
$("#someElement").append(strScript); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:38:35.120

看到[这个](https://stackoverflow.com/questions/610995/jquery-cant-append-script-element)帖子。最受好评的评论可以很好地说明有效的方法和原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T16:39:54.973

你总能做到

```
document.write('\x3Cscript src="your-jsfile.js" type="text/javascript" >\x3C/script>'); 
```

# jquery - Jquery 基本 Portlet

> ID：11037438
> 
> 赞同：1
> 
> 时间：2012-06-14T16:30:24.207
> 
> 标签：jquery, jquery-ui, jquery-plugins

我在我的网页上列出学生。我想列出他们的信息，例如：

[http://nettuts.s3.amazonaws.com/127_iNETTUTS/demo/index.html](http://nettuts.s3.amazonaws.com/127_iNETTUTS/demo/index.html)

然而，portlet 的大小相同，不需要编辑关闭按钮。我只想在 portlet 的每个标题上显示他们的名字。也不需要是可拖动或可排序的。我只想在我的 div 中有良好的 ui 效果，并希望每个 portlet 都有这个标题（我不太了解设计 CSS，所以库对我来说会更好，而不是试图获得好的颜色）还放置一个最小化按钮可能很好。

Jquery 有这样的插件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:48:25.383

您可以使用 jQuery UI 主题 CSS 文件以及格式正确的 html。

[http://jsfiddle.net/P9K3F/](http://jsfiddle.net/P9K3F/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T16:56:35.617

对你来说最好的选择是尝试一些 CSS。您可以使用`float: left|right`以网格方式组织它们，使用图像或更简单（但不交叉兼容）的[边框半径](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&sqi=2&ved=0CF4QFjAA&url=http://border-radius.com/&ei=NxbaT7XTHsKj0QXS3_yRBA&usg=AFQjCNEDZ5OcRDd3S_sHAnWEl0R2hsW_jg&sig2=EMZM951A-4AMxjeAK2MbZw)。

# jquery - 如何在 jQuery 的 if { } 中选择单个元素？

> ID：11037439
> 
> 赞同：0
> 
> 时间：2012-06-14T16:30:29.050
> 
> 标签：jquery, jquery-selectors

如果选择器包含任何数据，我希望能够隐藏它。

**HTML**

```
<ul>
    <li></li>
    <li>Test</li>
    <li></li>
</ul> 
```

**JS**

```
 var x= $('#ul li');

   if (x.html().length > 0) {
        $(this).hide();
   } 
```

$(this) 不起作用，但我不知道如何选择它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T16:32:20.913

您需要使用 迭代它们`.each()`，然后检查*每个*元素的内部 HTML（这`$(this)`在您的情况下是有意义的）：

```
x.each(function() {
    if ($(this).html().length > 0)
        $(this).hide();
}); 
```

# android - 如何通过android中的自定义属性查找视图

> ID：11037445
> 
> 赞同：-2
> 
> 时间：2012-06-14T16:30:53.670
> 
> 标签：android, xml

如何通过引用其属性来获取组件？

```
Button attribute1 = "@+myAttributes/one"/>

//something like
Button Button1 = (Button) findViewByattribute1(R.myAttributes.one); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:33:00.840

尝试使用以下代码。

```
Button buttonName = (Button) findViewById(R.id.yourButton); 
```

# regex - sed 正则表达式不返回预期结果

> ID：11037449
> 
> 赞同：0
> 
> 时间：2012-06-14T16:30:59.247
> 
> 标签：regex, shell, sed

我正在尝试使用 sed 搜索与以下表达式匹配的文件

```
[a-zA-Z0-9]{1,10}\s{1,5}\" 
```

执行后

```
sed -e '/\([a-zA-Z0-9]{1,10}\s{1,5}\"\)/!d' 
```

它没有给出预期的结果

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T16:36:07.400

在 sed 中，您需要转义大括号以进行重复，请尝试以下操作：

```
sed -e '/\([a-zA-Z0-9]\{1,10\}\s\{1,5\}\"\)/!d' 
```

[这是sed 正则表达式语法](http://www.gnu.org/software/sed/manual/sed.html#Regular-Expressions)的一个很好的参考页面。

如果这不起作用，请尝试替换`\s`为`[ \t\r\n]`

# mysql - 给定复选框，如何删除相应的数据库行？

> ID：11037456
> 
> 赞同：0
> 
> 时间：2012-06-14T16:31:35.997
> 
> 标签：mysql, html, perl, datatable

我正在尝试使用 Perl 从网页中删除 MySQL 表行。我想遍历复选框，如果选中一个，则数据库中的该行将被删除。我已将复选框的值设为自动递增键值。这是我的一段代码，因此您可以按表格了解我的位置：

```
while (@data = $STH1->fetchrow_array()) {
    print "<tr>";
    print " <td>$data[2]</td>";
    print " <td>$data[3]</td>";
    print " <td>$data[7]</td>";
    print " <td>$data[6]</td>";
    print " <td>$data[4]</td>";
    print " <td>$data[5]</td>";
    print " <td>$data[1]</td>";
    print "<td>";
    print '<form><center>';
    print checkbox(
        -name     => 'delete',
        -value    => 'data[0]',
        -selected => 0,
        -label    => 'delete'
    );
    print '<center></form>';
    print "</td>";
    print "</tr>";
} 
```

如果选中复选框，我只是不明白如何使它删除一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:41:25.417

使用`CGI`，创建一个`form`其中包含所有复选框的。

然后通过另一个脚本，再次`CGI`读取提交的表单值并根据选中的复选框执行 SQL`delete`命令以从表中删除请求的行。

确保使用唯一`id`列作为表单复选框的标识符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T16:45:20.860

我相信您对复选框的调用需要稍作调整：

```
print checkbox(
    -name => 'delete',
    # -value => 'data[0]'
    # should be
    -value => $data[0],
    # do you need this ?
    # -selected => 0,
    -label => 'delete'
); 
```

然后在您的 cgi 或对象中：

```
my @ids_to_delete = $q->param( 'delete' ); 
```

将让您按 id 删除行，然后您只需构建并运行您的删除语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T16:46:31.123

您想将数据发布到第二个 perl 脚本。在第二个 perl 脚本中，您选择该行作为查询参数。您有要删除的行的 ID。然后使用包含 SQL 的 id 调用 deleteRow 函数。

我现在正在使用[http://template-toolkit.org/](http://template-toolkit.org/)来完成您所描述的基本操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T19:55:28.767

好吧，您的表单在您的循环中，因此您将为每个复选框使用不同的表单。

如果要支持多次删除，则必须将表单打开和关闭标签移到循环之外。

然后在循环中添加一个隐藏的输入。使用“id”作为隐藏名称，使用“delete”作为复选框。

我不确定cgi，但您应该将表单作为两个字段的二维数组返回。循环通过该集合。如果复选框存在并被选中（有时您不会返回未选中的复选框）查找 id。然后将 id 添加到列表中并继续循环。

然后从列表中创建您的删除语句。检查删除的行数并将该消息返回给您的用户。

希望有帮助...

# java - 写入随机位置java中的txt文件

> ID：11037459
> 
> 赞同：2
> 
> 时间：2012-06-14T16:31:56.413
> 
> 标签：java, file-handling, random-access

我正在尝试将字符串写入随机位置的 txt 文件，即我想编辑特定的 txt 文件。我不想追加，但我想做的就是在第 3 行写一些字符串。我尝试使用 RandomAccessFile 进行相同操作，但是当我写入特定行时，它会替换该行的数据。

egatxt-

1
2
3
4
5

我期望的输出..

1
2
嗨
3
4
5

我使用 RandomAccessFiles 所取得的成就

1
2
嗨
4
5

* * *

我尝试在替换之前保存第 3 行的内容，为此我使用了 readLine() 函数，但它不起作用，它给出了意想不到的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T16:38:51.563

**对于内存不太大的文件：**

您可以[将文件读入字符串](https://github.com/kentcdodds/Java-Helper/blob/master/src/com/kentcdodds/javahelper/helpers/IOHelper.java#L65)，然后执行以下操作：

```
String s = "1234567890"; //This is where you'd read the file into a String, but we'll use this for an example.
String randomString = "hi";
char[] chrArry = s.toCharArray(); //get the characters to append to the new string
Random rand = new Random();
int insertSpot = rand.nextInt(chrArry.length + 1); //Get a random spot in the string to insert the random String
//The +1 is to make it so you can append to the end of the string
StringBuilder sb = new StringBuilder();
if (insertSpot == chrArry.length) { //Check whether this should just go to the end of the string.
  sb.append(s).append(randomString);
} else {
  for (int j = 0; j < chrArry.length; j++) {
    if (j == insertSpot) {
      sb.append(randomString);
    }
    sb.append(chrArry[j]);
  }
}
System.out.println(sb.toString());//You could then output the string to the file (override it) here. 
```

* * *

**对于内存太大的文件：**

[您可以对复制文件](https://github.com/kentcdodds/Java-Helper/blob/master/src/com/kentcdodds/javahelper/helpers/IOHelper.java#L127)进行某种变体，在该文件中预先确定一个随机点，然后在该块的其余部分之前将其写入输出流中。下面是一些代码：

```
public static void saveInputStream(InputStream inputStream, File outputFile) throws FileNotFoundException, IOException {
  int size = 4096;
  try (OutputStream out = new FileOutputStream(outputFile)) {
    byte[] buffer = new byte[size];
    int length;
    while ((length = inputStream.read(buffer)) > 0) {
      out.write(buffer, 0, length);
      //Have length = the length of the random string and buffer = new byte[size of string]
      //and call out.write(buffer, 0, length) here once in a random spot.
      //Don't forget to reset the buffer = new byte[size] again before the next iteration.
    }
    inputStream.close();
  }
} 
```

像这样调用上面的代码：

```
InputStream inputStream = new FileInputStream(new File("Your source file.whatever"));
saveInputStream(inputStream, new File("Your output file.whatever")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T16:35:35.107

没有 API 可以做到这一点。你可以做的是：

1.  选择一个随机位置
2.  走到行尾
3.  写 '\n + '你的文字'

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T16:36:54.437

您只有两个选项，追加和覆盖。文件没有插入方法，因为它们不支持此操作。要插入数据，您必须重新编写文件的其余部分以将其向下移动。

# javascript - Javascript/小型 Jquery 扩展方法自动更改 Z-Indexes 以将元素放在所有内容之上？

> ID：11037461
> 
> 赞同：1
> 
> 时间：2012-06-14T16:32:08.510
> 
> 标签：javascript, z-index

我想知道是否有可能，如果有的话，是否存在与一堆元素一起工作以将相对元素放在其他所有元素之上的*东西*？（Z 指数）

类似于以下内容：

```
$('myElement').moveToFront(); 
```

如果我的知识是准确的，这将意味着遍历元素树并更改 Z 索引，以使元素及其父元素位于其他元素之上。我宁愿不重新发明轮子，也不愿发现它是不可能发明的轮子。是否存在这样做的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:40:35.513

那个怎么样。

### 演示

[http://jsfiddle.net/insertusernamehere/KNB2f/](http://jsfiddle.net/insertusernamehere/KNB2f/)

注意：该演示仅以一种方式工作（没有编写“恢复”功能）。如果您尝试了链接，请重新加载页面。

### 基本理念

```
// clone the element and get its current position
var copy        = e.clone();
var position    = e.offset();

// set the position and a high z-index on the copy
copy    .css('position', 'absolute')
        .css('z-index', '1000')
        .css('top', position.top)
        .css('left', position.left);

// append the copy directly to the body
body.append( copy );

// hide the original element, but leave the document flow intact
e.css('visibility', 'hidden'); 
```

通过以下方式恢复/撤消此操作：

*   删除副本
*   再次显示原始元素

# javascript - 模态不会关闭 - Twitter Bootstrap 1.40

> ID：11037466
> 
> 赞同：0
> 
> 时间：2012-06-14T16:32:29.463
> 
> 标签：javascript, twitter-bootstrap, modal-dialog

我正在使用 Bootstrap 1.40，虽然我的模态打开没有任何问题，但我似乎无法使用我自己包含在模态中的按钮来关闭它。

这是我用来关闭它的代码：

```
<a href="#" data-dismiss="modal-from-dom" ><img src="images/cancel_btn.png" alt="" border="0" align="absmiddle" /></a> 
```

这是模态的代码：

```
<div id="modal-from-dom" class="modal hide fade">
          <div class="modal-body">
            <div align="center"><img src="images/icon_wait.gif" alt="" border="0" /></div>
            <h5 class="logout_h5" >Blah blah</h5>
          </div>
          <div class="modal-footer" >
             <a href="#" data-dismiss="modal-from-dom" ><img src="images/cancel_btn.png" alt="" border="0" align="absmiddle" /></a> 
          </div>
 </div>
        <button data-controls-modal="modal-from-dom" data-backdrop="true" data-keyboard="true" class="btn danger">Launch Modal</button> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:59:32.867

模态关闭元素应该具有`close`类。( `class="close"`)。

此外，[考虑升级](http://twitter.github.com/bootstrap/upgrading.html)到[较新的引导程序版本](http://twitter.github.com/bootstrap/index.html)以享受许多错误修复和新功能。

# html - CSS3 边框半径在 Visual Studio 项目中的呈现方式与在 HTML 文件中的呈现方式不同

> ID：11037467
> 
> 赞同：0
> 
> 时间：2012-06-14T16:32:38.120
> 
> 标签：html, asp.net-mvc, css

在将我在 notepad++ 中开发的 HTML 页面迁移到 ASP.NET MVC Web 模板时，我遇到了一个奇怪的问题。问题是这样的：我有一张顶部和底部都有圆角的桌子。当我在我的电脑上打开本地文件时，它看起来很好。但是，当我将 HTML 页面与 CSS 一起放入我的 ASP.NET MVC 项目中的 .cshtml 文件并通过 Visual Studio 呈现页面时，我得到了这个（为了更清晰而更改了颜色）：

![CSS3 边框半径 - 圆形背景，方形边框](../Images/90762e3b5af11ee8292f459fd73c89b9.png)

您在左上角看到，深灰色边框不是应有的圆形（当我在同一浏览器中打开页面的正常 HTML 版本时，如下所示。）**请注意，CSS 和 HTML在这两种情况下都是相同的，这意味着这不仅仅是“错误应用”样式表的问题。CSS 应该——而且确实——可以工作，只是当我在 Visual Studio 中打开网站时就不行了。为什么会这样？**

![CSS3 边框半径 - 普通版](../Images/b379948f8f287445333a5a3fc3866cbf.png)

（另请注意，我实际上是在更改实际左上角单元格的右上角单元格的样式，但这不是问题，因为同样的事情发生在所有其他角落。 )

这是相关的CSS：

```
/*top left corner*/
table tr:first-child td:first-child + td {
    border-top-left-radius: 20px;
}

/*bottom left corner*/
table tr:last-child td:first-child + td {
    border-left: 3px solid #ddd;
    border-bottom: 3px solid #ddd;
    -moz-border-radius-bottomleft: 20px;
    -webkit-border-bottom-left-radius:20px;
    border-bottom-left-radius:20px;
}

/*top right corner*/
table tr:first-child td:last-child {
    border-right: 3px solid #ddd;
    border-top: 3px solid #ddd;
    -moz-border-radius-topleft: 20px;
    -webkit-border-top-right-radius:20px;
    border-top-right-radius:20px;
}

/*bottom right corner*/
table tr:last-child td:last-child {
    border-right: 3px solid #ddd;
    border-bottom: 3px solid #ddd;
    -moz-border-radius-topleft: 20px;
    -webkit-border-bottom-right-radius:20px;
    border-bottom-right-radius:20px;
} 
```

提前感谢任何提供可能解决方案的人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:38:21.873

您必须将左上角和右上角的边框半径放在表格本身或具有灰色边框的任何元素上。

```
table {
 border:3px solid #ddd;
 -webkit-border-top-left-radius: 20px;
 -webkit-border-top-right-radius: 20px;
 -moz-border-radius-topleft: 20px;
 -moz-border-radius-topright: 20px;
 border-top-left-radius: 20px;
 border-top-right-radius: 20px;
}

/*top left corner*/
table tr:first-child td:first-child + td {
    border-top-left-radius: 20px;
}

/*bottom left corner*/
table tr:last-child td:first-child + td {
    -moz-border-radius-bottomleft: 20px;
    -webkit-border-bottom-left-radius:20px;
    border-bottom-left-radius:20px;
}

/*top right corner*/
table tr:first-child td:last-child {
    -moz-border-radius-topleft: 20px;
    -webkit-border-top-right-radius:20px;
    border-top-right-radius:20px;
}

/*bottom right corner*/
table tr:last-child td:last-child {
    -moz-border-radius-topleft: 20px;
    -webkit-border-bottom-right-radius:20px;
    border-bottom-right-radius:20px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T19:02:30.157

我解决了这个问题。如果其他人遇到此问题并发现此问题，则问题在于标准 Visual Studio 模板中自动包含的 normalize.css 文件。在该文件中，table 标记的border-collapse 属性设置为“collapse”。当我禁用它时，问题就消失了。所以这个故事的寓意——或者至少一个故事的寓意——是，如果你将一个边界半径应用于一个有边框的表格单元格，请确保“border-collapse”**没有**设置为“collapse” , 否则边框不会被圆角。我希望这可以帮助别人。

# asp.net - ASP.NET MVC - 加密 URL

> ID：11037470
> 
> 赞同：1
> 
> 时间：2012-06-14T16:32:49.237
> 
> 标签：asp.net, asp.net-mvc-3, encryption

我正在使用 ASP.NET MVC 3 开发网站，现在我需要加密客户 URL 的 ID。例如：

```
http://mysite.com/person?id=42 
```

像这样的东西：

```
http://mysite.com/person?id=Dfjhasdfh33kASDG868365çkhg54sdSDFD 
```

它需要是安全的。当我说安全时，这意味着任何人都很难找到正确的 ID

有没有图书馆可以做到这一点？

许多像贝宝这样的安全网络支付都使用这种方法： [https ://paypal.com/br/webscr?info=CNS9tFsVM_tv4c18gHgZ3OMH2zblN7GWDQoyamVF3mzNh7vGduhiKU3](https://paypal.com/br/webscr?info=CNS9tFsVM_tv4c18gHgZ3OMH2zblN7GWDQoyamVF3mzNh7vGDuhiKU3)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:01:55.083

一种选择是使用随机生成的字符串或唯一标识符 (GUID) 使您的 PK 变得那么长。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T09:49:22.393

如果您真的想加密查询参数，这非常简单，只需使用 .Net 提供的任何加密器，然后使用属性或 httpmodule 来解密参数即可。

最重要的是始终验证请求。如果您可以使用防伪令牌进行 POST，请执行此操作。然后，如果该用户有权访问受保护的资源，请始终检查用户凭据。

这一点都不难，但你必须慢慢来，处理你能想到的每一个场景。使用白名单方式：只允许满足某些条件的人。

# javascript - Javascript 中的 OOP 应该是什么样的？

> ID：11037476
> 
> 赞同：1
> 
> 时间：2012-06-14T16:33:03.327
> 
> 标签：javascript, oop

我正在使用 Jquery 编写一段较长的代码，众所周知，它似乎是一个简单的项目，随着复杂性的增加，现在看起来就像一个无法管理的意大利面条，功能和代码到处重复。因此，我开始将所有功能倾倒在这样的对象上：

```
function MyObject(container) {
    this.container = container
};

Notifications.prototype.featureOne = function (arg1, arg2){

};

Notifications.prototype.featureTwo = function (arg1, arg2, arg3){

};

obj1 = new Notifications($('#container'));
obj1.featureOne('arg1', 'arg2');
obj1.featureOne('arg1', 'arg2', 'arg3'); 
```

显然，这使得知道发生了什么变得非常简单，但我注意到我有一些与另一个非常相似的代码（特别是，一个 ajax 函数接受 2 个参数，另一个 ajax 函数接受与以前相同的 2 个参数加上一个额外的参数）。我能做些什么？创建一个新的原型方法来创建一个函数来包装这两种情况？

另一个问题：在 Javascript 中处理 OOP 时，您使用了哪些最佳实践？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:56:01.837

原型继承就是这样工作的。假设您有一个“班级”。

```
// original "class"
var SomeObject = function( constructorArg1 ) {
   this.someProperty = constructorArg1;
};
SomeObject.prototype.method1 = function( arg1, arg2 ) {
   // some code
}; 
```

现在假设您要创建一个继承 method1 的类，但还要添加更多内容。

```
// new "class" which inherits from first "class"
var SomeOtherObject = function( constructorArg1 ) {
   this.someProperty = constructorArg1;
};
// inheritance happens here
SomeOtherObject.prototype = new SomeObject();
// must also set the constructor as part of prototypical inheritance
SomeOtherObject.prototype.constructor = SomeOtherObject;
// add a second method to your new "class"
SomeOtherObject.prototype.method2 = function( arg1 ) {
   // some code
}; 
```

你会看到这个系统并不完美，因为它不允许你继承原来的构造函数，而且如果父类方法被覆盖，你也不能调用它们，但是所有添加到第一个“类”原型中的方法现在都是在新的“类”中可用。

有大约 100 种方法可以使用这个想法来模拟经典继承，并且几乎可以设置它的工作方式，能够从扩展类中调用覆盖的父方法等。许多模拟经典继承的方法根本不使用原型继承，而只是简单地将方法从一个原型复制到另一个原型。您将不得不进行一些搜索或试验，以了解最适合您的方法。

# clojure - 持久性收集是否被垃圾收集？

> ID：11037477
> 
> 赞同：8
> 
> 时间：2012-06-14T16:33:08.370
> 
> 标签：clojure

如果我持有对持久集合的一部分的引用，整个集合可以被垃圾回收吗？我理解正确吗？

函数 gctest 只是为了测试集合的行为。

```
(defn gctest
  "A shot about testing the gc-ability of persistent thingies."
  [n]
  (take 5 (drop 100 (vec (range n)))))

main=> (def a (gctest 1e7))
main=> (def b (gctest 1e7))
main=> (def c (gctest 1e7))
main=> (def d (gctest 1e7))
main=> (def e (gctest 1e7))
main=> (def f (gctest 1e7))
main=> (def g (gctest 1e7))

OutOfMemoryError GC overhead limit exceeded  clojure.lang.ArrayChunk.dropFirst     (ArrayChunk.java:54) 
```

我已经听说过头部保留，但这似乎更笼统，不是吗？

我想了解的是如何使用大变化的集合。我预计收集的大部分会随着时间的推移而变化，原则上大部分可以被垃圾收集，但不是全部。

有没有标准的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T18:50:20.627

标准 GC 规则仍然存在：只要您保留对集合的一部分的引用，从您的引用访问的所有对象都保留在内存中。因此，**只有**可以从您的引用**中访问**的集合部分将被**保留**，其余部分将被收集。特别是，如果您引用 100 元素列表的最后 50 个元素，则将收集前 50 个元素，其余的将保留在内存中。

但是，在您的情况下，将保留从第 100 个开始的每个集合的所有元素。其原因是**懒惰的评价**。函数`take`产生（在你的情况下）5个元素的*惰性*序列。惰性序列对象本身不是真正的序列，而是特殊的**生成器对象**（虽然它不是 Clojure 的，而是 Python 的术语）。*当您需要*惰性序列元素时，生成器对象会生成并返回它。但是如果你不要求元素，生成器只会保留对它可能需要生成元素的所有对象的引用。

在您的示例中，您创建大向量并从中请求 5 个元素，然后将结果保存到变量`a`、`b`、`c`等。Clojure 生成大向量和生成器对象，指向第 100 个元素。对集合本身的引用丢失，但对生成器对象的引用保存在顶层。您永远不会评估生成器对象，因此永远不会制作真正的 5 元素序列。REPL 指的是 vars `a`、`b`、`c`等，这些 vars 指的是生成器对象，而生成器对象指的是它们产生真正的 5 元素序列所需的集合。因此，所有集合的所有元素（可能是前 100 个除外）都必须保留在内存中。

另一方面，如果您**评估生成器对象**，它们将生成真正的 5 个元素序列，而忘记对集合其余部分的引用。试试这个：

```
user> (def a (gctest 1e7))
#'user/a                                                                                                                                               
user> (println a)
(100 101 102 103 104)                                                                                                                                  
nil                                                                                                                                                    
user> (def b (gctest 1e7))
#'user/b                                                                                                                                               
user> (println b)
(100 101 102 103 104)                                                                                                                                  
nil                                                                                                                                                    
user> (def c (gctest 1e7))
#'user/c                                                                                                                                               
user> (println c)
(100 101 102 103 104)                                                                                                                                  
nil                                                                                                                                                    
user> (def d (gctest 1e7))
#'user/d                                                                                                                                               
user> (println d)
(100 101 102 103 104)                                                                                                                                  
nil                                                                                                                                                    
user> (def e (gctest 1e7))
#'user/e                                                                                                                                               
user> (println e)
(100 101 102 103 104)                                                                                                                                  
nil                                                                                                                                                    
user> (def f (gctest 1e7))
#'user/f                                                                                                                                               
user> (println f)
(100 101 102 103 104)                                                                                                                                  
nil                                                                                                                                                    
user> (def g (gctest 1e7))
#'user/g                                                                                                                                               
user> (println g)
(100 101 102 103 104)                                                                                                                                  
nil                                                                                                                                                    
user> (def h (gctest 1e7))
#'user/h                                                                                                                                               
user> (println h)
(100 101 102 103 104)                                                                                                                                  
nil                                                                                                                                                    
user> (def i (gctest 1e7))
#'user/i                                                                                                                                               
user> (println i)
(100 101 102 103 104)                                                                                                                                  
nil 
```

没有内存不足！Vars `a`, `b`,`c`等现在存储 5 个元素的真实列表，因此不再有对大型集合的引用，因此可以收集它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T16:43:29.533

这类问题可以使用惰性序列来解决。在您的情况下，您使用的`vec`函数实际上是通过遍历`range`函数生成的每个元素在内存中创建一个向量（范围返回一个惰性序列）。

下面的代码（不`vec`调用不会有内存问题）

```
(defn gctest
  "A shot about testing the gc-ability of persistent thingies."
  [n]
  (take 5 (drop 100 (range n)))) 
```

**更新**：

使用`vec`调用时，内存中的所有元素都将被保留，不会被 GC 收集，因为这些元素被函数返回的序列对象引用（并且需要），`gctest`以便它可以获取需要的元素（即跳过 100 个元素并取 5 个元素）当序列对象被要求提供元素时。

# iphone - sendSubviewToBack 和 insertSubview:belowSubview: don't work as they should

> ID：11037478
> 
> 赞同：1
> 
> 时间：2012-06-14T16:33:10.790
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我有一个问题`sendSubviewToBack`和`insertSubview:belowSubview:`方法。简单地说，我有一个按钮，我将其插入到另一个视图下方`_centerView`。我希望按钮保持在`_centerView`.

我面临的问题是，当我在下方插入一个按钮时，`_centerView`我看到`_centerView`. 我尝试了两者`sendSubviewToBack:`-`insertSubview:belowSubview:`相同的效果。

你有什么想法可能是错的吗？我错过了什么吗？这是我的代码：

```
 UIButton* itemButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [itemButton setFrame:CGRectMake(0, 0, 40, 40)];
    [itemButton setCenter:_centerView.center];

    [parentView bringSubviewToFront:_centerView];
    [parentView insertSubview:itemButton belowSubview:_centerView]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T01:49:59.043

我最近遇到了同样的问题，但是将此选项传递给动画代码修复了它。希望这对您也有帮助。如果没有你的评论，我不会想出我的解决方案，所以谢谢你:)

```
UIViewAnimationOptionShowHideTransitionViews 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T17:20:40.610

我不确定背后的内部结构`insertSubview`是什么，但如果你想摆脱闪烁，最简单的方法是在插入之前隐藏视图并在之后再次显示它。

```
[itemButton setHidden:YES];
[parentView insertSubview:itemButton belowSubview:_centerView];
[itemButton setHidden:NO]; 
```

不是最优雅的解决方案，但它应该可以完成工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T14:07:57.340

好的，过了一会儿，事实证明这是我在添加按钮的同时制作动画的窗口的错误。我不知道为什么，但是窗口动画的淡入导致了这个问题。我切换了 UIWindow 的动画，现在它可以工作了。感谢帮助！

# javascript - 在 couchdb reduce 中使用“eval”——这有多危险？

> ID：11037481
> 
> 赞同：0
> 
> 时间：2012-06-14T16:33:15.610
> 
> 标签：javascript, couchdb, mapreduce

我的文档包含错误列表。我有一个视图，它计算具有特定错误的文档的数量，以及具有给定错误的文档的平均错误数。

地图

```
function (doc) {
var i;
for (i = 0; i < doc.errors.length; i = i + 1){
    emit([doc.errors[i], doc.flummery], [1, doc.errors.length])
} 
```

}

减少

```
function (key, values, rereduce) {
var avg = [];
var cnt = [];
var i;
for (i = 0; i < values.length; i = i + 1) {
    avg.push(values[i][1]);
    cnt.push(values[i][0]);
}
return [sum(cnt), eval(avg.join("+")) / avg.length] 
```

}

我读过很多次，使用 eval() 是通往疯狂的道路，但我想不出有什么方法可以真正让我绊倒。eval() 在 couchdb 视图中安全吗？

请注意，Oleg 提出了显而易见的答案，即“不要那样做，couchdb 给你一个 sum() 函数”。在这种情况下，显然不需要 eval()。但是，如果我需要它，考虑到我可以很好地控制我的输入，使用它是否安全？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T16:39:38.193

不能`sum(avg) / avg.length`改用吗？

`eval`调用编译器的全部功能有明显的缺点：除非您仔细清理输入，否则它会占用大量资源并引入很大的安全漏洞。

# html - 在 IE 浏览器的 Extjs 面板中显示 html

> ID：11037491
> 
> 赞同：0
> 
> 时间：2012-06-14T16:33:42.143
> 
> 标签：html, internet-explorer, extjs, xhtml

我有一个需要在面板中显示 html 文档的 ExtJS 应用程序。该应用程序在 FF 和 chrome 中运行良好但是，当我尝试在 Internet Explorer 8 中使用此功能时，会出现一个弹出窗口：

> “您要保存这个文件，还是在网上找一个程序打开它？名称：getBinary 类型：未知文件类型，688KB 来自：SERVER_NAME_HERE”

我没有包含代码，因为它是我公司的财产，但如果真的需要它可能会创建一个模型。我首先想看看有没有关于我无法在网上找到的这类问题的常识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T15:04:27.470

好的，我想通了，不得不向 stackoverflow 的好人道歉。IE8 在显示 .html 页面时没有问题。该页面实际上是一个 .xhtml 文件，我是通过深入研究代码了解到的，我们的一位开发人员刚刚将其命名为 .html：/

因此，有两种不同的解决方案可以让 Internet Explorer 8 显示 .xhtml 文件。

1.  您可以使用此处提到的 hack/fix [w3c xhtml fix](http://www.w3.org/MarkUp/2004/xhtml-faq#ie)

2.  您可以将 .xhtml 文件的扩展名更改为 .html （风险更大），但在我的特殊情况下，不会丢失其他信息。

# css - 从Firefox中的悬停中删除下划线

> ID：11037494
> 
> 赞同：1
> 
> 时间：2012-06-14T16:33:47.120
> 
> 标签：css, firefox, underline

我在我的网站上添加了一个悬浮板，它可以翻转以显示更多文本。它只适用于 Chrome，所以我尝试在 Firefox 中将其关闭。它在 Firefox 中不再翻转，但它使框在悬停时具有灰色下划线。

我只是无法弄清楚哪个 CSS 具有这种效果。

我的网站是：

（已移除）- 将鼠标悬停在“按可用性排序产品”以查看我所指的内容。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:40:15.747

您只在[89e843b0.5175cb.css](http://outgrow.me/wp-content/w3tc/min/89e843b0.5175cb.css)`-webkit-`中使用前缀，这会导致其他浏览器不显示此元素的圆角、透视指令等。

必要时，使用[`-moz-`](https://developer.mozilla.org/en/CSS_Reference/Mozilla_Extensions), [`-ms-`](http://msdn.microsoft.com/en-us/library/ie/hh673536%28v=vs.85%29.aspx), `-o-`, 以及不带前缀的属性。

有关所有浏览器中前缀属性的详尽列表，请参阅[http://peter.sh/experiments/vendor-prefixed-css-property-overview/](http://peter.sh/experiments/vendor-prefixed-css-property-overview/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T16:40:52.857

[该样式表从](http://outgrow.me/wp-content/w3tc/min/89e843b0.5175cb.css)**#hover-flip:hover 中**删除背景：#ddd

# c++ - 如何避免 C++ 中的多重定义？

> ID：11037495
> 
> 赞同：0
> 
> 时间：2012-06-14T16:33:50.987
> 
> 标签：c++

我有一个很大的 C++ 项目，我在其中尝试实现一个需要其他库中的类的调试功能。不幸的是，这些类与项目内部调用的类共享相同的名称和命名空间。我尝试使用静态库来避免多个定义，但编译器当然会抱怨这个问题。所以我的问题是：是否可以为函数创建该库，而编译器不知道函数内部被调用的类？

我不知道，像“受保护的函数”还是喜欢将库中的所有代码放在函数代码中..

*编辑：我正在使用 g++ 编译器。*

*麦克斯，我知道，但到目前为止我没有其他办法。*

示意图，问题是。

项目：

```
#include a.h // (old one)
#include a2.h

return a->something();
return a2->something(); //debug function 
```

调试功能a2：

```
#include a.h // (new one!!)

return a->something(); // (new one!) 
```

编译过程看起来到目前为止：

```
g++ project -la -la2 
```

这是一个非常简化的草案。但实际上就是这样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T16:44:11.547

也许您可以创建一个包装库，该库在内部链接到该外部库并以不同的名称或命名空间导出其定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T16:44:42.153

尝试将#includes 用于在命名空间中的调试函数中使用的类的声明，但不要对该命名空间使用 using 子句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T17:48:33.707

有一些技术可以帮助您，但这取决于库的“调试版本”的功能。

`#ifdef`首先，根据程序是否在调试模式下构建来执行额外检查的函数内部的块并不是闻所未闻的。C`assert`宏以这种方式运行。

其次，“调试版本”可能只是记录消息。在调试和发布版本中包含日志记录代码很容易，并根据每个日志消息的某种“优先级”参数来决定实际记录。

第三，您可以考虑使用基于事件的设计，其中函数可以选择将对象作为具有某些方法的参数，然后如果发生有趣的事情并且函数被传递一个事件对象，函数可以调用这些方法。

最后，如果您真的对在比您正在处理的库更低级别发生的事情感兴趣，您可以简单地链接到那些较低级别库的调试版本。这是上面提到的第一个选项的情况，应用于与您实际使用的库不同的库。Microsoft 的[运行时库、Google 的](http://msdn.microsoft.com/en-us/library/aa985982%28v=vs.110%29)[perftools](http://code.google.com/p/gperftools/)和许多“调试”库都可以做到这一点`malloc`。

# matlab - 在 matlab 中可视化图形

> ID：11037499
> 
> 赞同：6
> 
> 时间：2012-06-14T16:34:06.913
> 
> 标签：matlab, graph

我有一个由一组边及其相应的开始和结束节点组成的图。这些是为城市的特定区域生成的。如何在 matlab 中可视化此图

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T16:41:49.893

看看这个功能：

> 文档 gplot

例子：

```
% Plot half of a "Bucky ball" carbon molecule, placing asterisks at each node:
k = 1:30;
[B,XY] = bucky;
gplot(B(k,k),XY(k,:),'-*')
axis square 
```

![gplot_output](../Images/180eb4de35657b940014373f39d4eb8d.png)

# php - 从多个同名div中提取文本

> ID：11037502
> 
> 赞同：0
> 
> 时间：2012-06-14T16:34:16.357
> 
> 标签：php, html, extract, scrape

我要做的是从（非版权）网站中提取文本。我只需要特定 div 中的文本。假设 div 被称为“foo”。每个页面上大约有 20 个“foo div”，我想从每个页面中提取文本并输出到页面或外部文本，没关系。

一次做多个页面肯定是一个奖励。

我已阅读此站点上的问题从网站[上多个页面上出现的 DIV 中提取文本，然后输出到 .txt？](https://stackoverflow.com/questions/10295669/extract-text-from-a-div-that-occurs-on-multiple-pages-on-a-website-then-output)

它似乎与我要问的相似，如果不完全相同的话。但是，不确定这是否会从一页内的多个同名 div 中提取。

我尝试将所有代码复制并粘贴到一个新的 .php 文件中，但没有成功。我在运行时收到错误消息:(

我年轻的时候确实做过几年html，但是我的php技能很基础。

另外，我不需要抓取脚本或任何东西，只需抓取信息即可。如果有多个 URL 的选项，我想手动输入它们。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:22:39.373

我认为这些链接可能对您在 PHP 中进行 HTML DOM PARSING 有所帮助

[快速入门](http://simplehtmldom.sourceforge.net/manual.htm#section_quickstart)
[如何创建 HTML DOM 对象？](http://simplehtmldom.sourceforge.net/manual.htm#section_create)
[如何找到 HTML 元素？](http://simplehtmldom.sourceforge.net/manual.htm#section_find)
[如何访问 HTML 元素的属性？](http://simplehtmldom.sourceforge.net/manual.htm#section_access)
[如何遍历 DOM 树？](http://simplehtmldom.sourceforge.net/manual.htm#section_traverse)
[如何转储 DOM 对象的内容？](http://simplehtmldom.sourceforge.net/manual.htm#section_dump)
[如何自定义解析行为？](http://simplehtmldom.sourceforge.net/manual.htm#section_callback)
[API 参考](http://simplehtmldom.sourceforge.net/manual_api.htm)
[常见问题](http://simplehtmldom.sourceforge.net/manual_faq.htm)

ALso here's a example for Scraping from a sample site *(www.slashdot.org)*

```
// Create DOM from URL
$html = file_get_html('http://slashdot.org/');

// Find all article blocks
foreach($html->find('div.article') as $article) {
    $item['title']     = $article->find('div.title', 0)->plaintext;
    $item['intro']    = $article->find('div.intro', 0)->plaintext;
    $item['details'] = $article->find('div.details', 0)->plaintext;
    $articles[] = $item;
}

print_r($articles); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T17:24:58.310

你什么意思`foo div`？如果您的意思是`name`div 的属性值是，`foo`您可以使用[SIMPLE HTML DOM PARSER](http://simplehtmldom.sourceforge.net/manual.htm)通过类似查询轻松检索它。

`$ret = $html->find('div[name=foo]');`

然后，您可以遍历这些结果，将它们存储在您认为合适的任何位置。如果您手动运行脚本，将这些结果直接写入文件可能是个好主意？

上面的简单 dom 解析器链接让您逐步了解如何抓取网站。

为了让我们为您提供帮助，最好发布您的代码，准确的错误信息越多，您可以获得的答案就越好。如果您希望 SO 为您编写解析网页的脚本，您可能会感到失望。

# memory-management - C++ 中的指针算术使用 sizeof(type) 增量而不是字节增量？

> ID：11037503
> 
> 赞同：1
> 
> 时间：2012-06-14T16:34:18.667
> 
> 标签：memory-management, pointer-arithmetic

我对 C++ 中指针算术的行为感到困惑。我有一个数组，我想从当前数组向前移动 N 个元素。由于在 C++ 中指针是 BYTES 中的内存地址，所以对我来说代码应该是`newaddr = curaddr + N * sizeof(mytype)`. 但是它产生了错误；后来我发现`newaddr = curaddr + N`一切正常。为什么这样？它真的应该是地址+ N而不是地址+ N * sizeof吗？

我注意到它的部分代码（所有内存分配为一个块的二维数组）：

```
// creating pointers to the beginning of each line
if((Content = (int **)malloc(_Height * sizeof(int *))) != NULL)
{
    // allocating a single memory chunk for the whole array
    if((Content[0] = (int *)malloc(_Width * _Height * sizeof(int))) != NULL)
    {
        // setting up line pointers' values
        int * LineAddress = Content[0];
        int Step = _Width * sizeof(int); // <-- this gives errors, just "_Width" is ok
        for(int i=0; i<_Height; ++i)
        {
            Content[i] = LineAddress; // faster than
            LineAddress += Step;      // Content[i] = Content[0] + i * Step;
        }
        // everything went ok, setting Width and Height values now
        Width = _Width;
        Height = _Height;
        // success
        return 1;
    }
    else
    {
        // insufficient memory available
        // need to delete line pointers
        free(Content);
        return 0;
    }
}
else
{
    // insufficient memory available
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T16:49:12.667

您的推理错误就在这里：“由于 C++ 中的指针是 BYTES 中的内存地址，[...]”。

AC/C++ 指针**不是**以字节为单位的内存地址。当然，它由内存地址表示，但您必须区分指针类型及其表示。操作“+”是为一个类型定义的，而不是它的表示。因此，当它被称为 type`int *`时，它​​尊重该类型的语义。因此，`+ 1`在一个`int *`类型上，指针前进的字节数与底层`int`类型表示使用的字节数一样多。

你当然可以像这样投射你的指针：`(int)myPointer`. 现在你有了一个数字类型（而不是指针类型），它`+ 1`可以像你期望的数字类型一样工作。请注意，在此转换之后，表示形式保持不变，但类型发生了变化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T16:50:02.120

指针指向地址，因此将指针 p 递增 N 将指向 p 的第 N 个内存块。

现在，如果您使用地址而不是地址指针，那么添加 N*sizeof(type) 是合适的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T16:38:00.703

“指针”指向一个*位置*。

当你“增加”时，你想去*下一个*相邻的位置。

问：“下一个”和“相邻”取决于您指向的对象的*大小，不是吗？*

问：当您不使用“sizeof()”时，一切正常，对吗？为什么？你认为编译器“在你背后”为你做什么？

问：如果您添加自己的“sizeof()”，您认为会发生什么？

*在“一切正常”的场景之上 *？**

# iis - 使用 IIS 的 Dropbox 中的本地站点

> ID：11037506
> 
> 赞同：4
> 
> 时间：2012-06-14T16:34:32.893
> 
> 标签：iis, dropbox

我正在尝试使用 IIS 在 Dropbox 中创建我的本地网站。当我添加保管箱目录时，出现错误：服务器配置为使用带有内置帐户的直通身份验证来访问指定的物理路径。但是，IIS 管理器无法验证内置帐户是否具有访问权限。确保应用程序池标识对物理路径具有读取权限。如果此服务器已加入域，并且应用程序池标识为 NetworkService 或 LocalSystem，请验证 \$ 是否具有对物理路径的读取访问权限。

我是管理员，并已允许对保管箱文件夹的所有访问权限。怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T12:59:20.957

您应该将 IIS 用户帐户添加到允许查看/读取文件的用户列表中。出于安全原因，IIS 通常通过单独的用户帐户运行。这是通过以下方式完成的：

1.  右键单击 Dropbox 中的站点文件夹
2.  选择“安全”
3.  点击“添加”
4.  查找 IUSR 用户和/或 IIS_IUSRS 组
5.  将它们都添加（或一个，如果只有一个）并分配它们读取权限
6.  再次尝试添加您的站点文件夹。

这应该可以解决问题。

# ruby-on-rails - rspec gem 是干什么用的？

> ID：11037513
> 
> 赞同：-2
> 
> 时间：2012-06-14T16:34:54.233
> 
> 标签：ruby-on-rails, rspec

rspec gem 有什么作用？它被命名为“行为驱动的开发工具”，但这些话并没有说明什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T16:55:21.680

RSpec 是为您的应用程序编写测试的 gem。功能类似于 Test:Unit（Rails 附带），尽管它们的执行方式不同。

有各种测试框架允许您遵循称为测试（或行为）驱动开发的开发过程。这种开发风格基本上表明，您为最初会失败的功能或代码段编写测试（因为您尚未编写该功能）。然后，您为该功能编写代码，直到测试通过。它似乎倒退了，但与其他开发方法相比，它提供了一些好处。我发现 railscast 剧集[“我如何测试”](http://railscasts.com/episodes/275-how-i-test)对于学习测试驱动开发和 RSpec 非常有帮助（因为这就是 Ryan 在剧集中用于测试的内容）。

# css - Bootstrap，对布局进行响应式更改

> ID：11037517
> 
> 赞同：13
> 
> 时间：2012-06-14T16:35:08.787
> 
> 标签：css, twitter-bootstrap, less, responsive-design

我正在为我的设计使用流畅的 Twitter Bootstrap 布局，并且即将使其具有响应性。考虑一个像这样的网格：

```
<div class="row-fluid">
    <div class="span4"></div>
    <div class="span8"></div>    
</div> 
```

隐藏 span4 并让 span8 占据整个宽度的最佳方法是什么，以便在屏幕变小时时使用？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-01T15:56:26.627

使用 bootstrap 2.0.2 及更高版本，您可以：

将html更改为：

```
<div class="row-fluid">
    <div class="span4 hidden-phone hidden-tablet"></div>
    <div class="span8 span12-tablet"></div>    
</div> 
```

（我用平板电脑和手机尺寸解释“更小”，其他尺寸使用您自己的定义）

.hidden-phone 和 .hidden-tablet 为较小的屏幕隐藏 span4。

要回收该空间并重新跨越 span8，请将其添加到您的 css：

```
@media (max-width: 979px) {
  .span12-tablet {
    width: 91.48936170212765% !important;
    *width: 91.43617021276594% !important;
  }
} 
```

如果您碰巧使用较少，则可以使用引导程序的网格混合：

```
.span12-tablet {
    @media (max-width: 979px) {
        #grid > .fluid > .span(12) !important;
    }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-14T16:42:51.610

使用任何最小/最大宽度设置`.span4`为的媒体查询`display: none;`

然后，为您隐藏的任何宽度以下的所有内容添加`.span8`规则，因为所有工作都已通过引导程序为您完成，因此无需复制。它看起来像这样：`.span12``.span4`

```
@media (min-width: 320px){
    .span12,
    .span8 {
        width: 300px;
    }
} 
```

（最后一段代码只是一个例子，但在引导脚手架中会有类似的东西。）

希望有帮助:)

**编辑：**

这可以工作，我使用引导站点上的开发工具对其进行了测试，它似乎可以工作。同样，在媒体查询中：

```
@media (min-width: 320px){

    #special .span4 {
        display: none;
    }

    #special .span8 {
        float: none;
        width: auto;
    }

} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-04T08:46:33.770

**如果使用引导程序 2.2.1，您可以：**

将html更改为：

```
<div class="row-fluid">
    <div class="span4 hidden-phone hidden-tablet"></div>
    <div class="span8"></div>    
</div> 
```

现在将其添加到您的 css 覆盖中：

```
@media (min-width: 768px) and (max-width: 979px) 
{
    [class*="span"],
    .row-fluid [class*="span"] {
        display: block;
        float: none;
        width: 100%;
        margin-left: 0;
    }
} 
```

**这也适用于您在 html 中指定的任何其他跨度宽度。**

这些更改的效果使所有跨度宽度为 100%，导致 iPad 在纵向模式下始终使用 1 列流体模式。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-15T14:35:59.777

这将是保持动态的最佳选择。在我的示例中，fluidGridColumnWidth 旁边的宽度设置为 6 列

```
[class*="span"]  {
    width: 100%;

    .row-fluid {
        [class*="span"] {
            width: (@fluidGridColumnWidth * 6) + (@fluidGridGutterWidth * (6 - 1)) - (.5 / @gridRowWidth * 100 * 1%);

            float: left;
            margin-left: @fluidGridGutterWidth;

            &:first-child {
                margin-left: 0;
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-06-27T12:07:05.117

像这样写

在电话设备中，此 div 将隐藏`<div class="span4 hidden-phone"></div>`

这个 div 会显示 `<div class="span8 visible-phone"></div>`

**更新**

Bootstrap 2.3 的先前答案

现在 bootstrap 3 进入市场..

所以我为新用户更新了我的答案→ bootstrap3

在电话设备中，此 div 将隐藏`<div class="col-md-4 hidden-xs"></div>`

这个 div 会显示 `<div class="col-xs-4 visible-xs"></div>`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-12-19T11:22:51.180

**TLDR：使用第二个代码片段**

Bootstrap 是一个移动优先的框架，所以我将从最小的屏幕尺寸开始解释。无论断点/屏幕大小如何，布局始终为 12 列宽。

从最小的断点（xs - extra small）开始，`span4`隐藏并且`span8`占据所有宽度（所有 12 列）

```
<div class="row-fluid">
    <div class="span4 hidden-xs"></div>
    <div class="span8 col-xs-12"></div>    
</div> 
```

我们还没有完成，因为我们还没有定义下一个断点被击中时的行为（sm/small/screen 宽度超过 767px），所以我们将`span4`占用宽度的三分之一（12 列/3 = 4列）并且`span8`将占用其余的宽度（12-4 = 8列）

```
<div class="row-fluid">
    <div class="span4 hidden-xs col-sm-4"></div>
    <div class="span8 col-xs-12 col-sm-8"></div>    
</div> 
```

以上假设您希望更改发生在 xs - sm 断点之间的更改上。

**进一步阅读：**

如果您想要在 sm-md (md = medium) 之间进行更改，那么我可能会使用[visible-md](http://getbootstrap.com/css/#responsive-utilities-classes)类，该类将显示`span4`on 断点 medium 和 up (>992px)

```
<div class="row-fluid">
    <div class="span4 visible-md col-md-4"></div>
    <div class="span8 col-xs-12 col-md-8"></div>    
</div> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-07T12:36:47.313

我想出了一个小的变化。

将`stack-tablet`类添加到 a`row-fluid`以使跨度在平板电脑宽度上堆叠，而不仅仅是在手机宽度上（引导程序默认）：

```
@media (max-width: 979px) {
    .row-fluid.stack-tablet [class*="span"] {
        width: 100%;
        display: block;
        float: none;
        margin-left: 0;
    }
} 
```

可以与显示类和隐藏类一起使用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-07-15T00:58:32.770

只是：

```
<div class="row-fluid">
   <div class="span4 hidden-desktop"></div>
   <div class="span8"></div>    
</div> 
```

# html - Dreamweaver 模板转换冷融合 从相对路径到绝对路径

> ID：11037519
> 
> 赞同：3
> 
> 时间：2012-06-14T16:35:33.673
> 
> 标签：html, coldfusion, dreamweaver

我对 Dreamweaver 和 Coldfusion 都很陌生，而且我很难弄清楚这个问题。我确信修复非常简单。

当我从 Dreamweaver 中的现有模板创建新页面时，我的任何标签都将它们的路径从 Dreamweaver 解析为相对于我的本地站点副本，而不是远程站点。

例如，

在我的模板中，我有类似的东西

```
<cfinclude template="../../stuff.cfm"\> 
```

但是当我从该模板创建一个新页面时，我得到

```
<cfinclude template="file:///C|/Users/Me/Documents/MySite/stuff.cfm"> 
```

这显然是不正确的。如何更改它，以便在 Dreamweaver 中从模板创建页面时，它不会这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:45:12.653

采用

```
<cfinclude template="#ExpandPath("../../stuff.cfm")#"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T14:19:57.757

“代码中”的答案是解决此问题的正确方法，但对于一般路径首选项，您也可以在 Dreamweaver 中进行设置： [设置新链接的相对路径](http://help.adobe.com/en_US/dreamweaver/cs/using/WScbb6b82af5544594822510a94ae8d65-7c3ea.html#WScbb6b82af5544594822510a94ae8d65-7c35a)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T15:12:28.440

我认为它使用 file:///C: 直到您保存新文档。
然后它将其更改为相对位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T12:08:12.670

保存文档后，Dreamweaver 将更新指向文档相对路径的链接。

# c - 如何将 regexec 与内存映射文件一起使用？

> ID：11037521
> 
> 赞同：2
> 
> 时间：2012-06-14T16:35:45.353
> 
> 标签：c, regex, unix, mmap

我正在尝试使用*regexec()*函数在大型内存映射文件中查找正则表达式。我发现当文件大小是页面大小的倍数时程序会崩溃。

是否有一个*regexec()*函数将字符串的长度作为附加参数？

或者：

如何在内存映射文件中找到正则表达式？

这是总是崩溃的最小示例（如果我运行的线程少于 3 个线程程序不会崩溃）：

```
ls -la ttt.txt 
-rwx------ 1 bob bob 409600 Jun 14 18:16 ttt.txt

gcc -Wall mal.c -o mal -lpthread -g && ./mal
[1]    11364 segmentation fault (core dumped)  ./mal 
```

程序是：

```
#include <fcntl.h>
#include <unistd.h>
#include <sys/mman.h>

#include <stdio.h>
#include <assert.h>
#include <pthread.h>
#include <regex.h>

void* f(void*arg) {
  int size = 409600;
  int fd = open("ttt.txt", O_RDONLY);
  char* text = mmap(NULL, size, PROT_READ, MAP_PRIVATE, fd, 0);
  close(fd);

  fd = open("/dev/zero", O_RDONLY);
  char* end = mmap(text + size, 4096, PROT_READ, MAP_PRIVATE | MAP_FIXED, fd, 0);
  close(fd);

  assert(text+size == end);

  regex_t myre;
  regcomp(&myre, "XXXXX", REG_EXTENDED);
  regexec(&myre, text, 0, NULL, 0);
  regfree(&myre);
  return NULL;
}

int main(int argc, char* argv[]) {
  int n = 10;
  int i;
  pthread_t t[n];
  for (i = 0; i < n; ++i) {
    pthread_create(&t[n], NULL, f, NULL);
  }
  for (i = 0; i < n; ++i) {
    pthread_join(t[n], NULL);
  }
  return 0;
} 
```

PS这是gdb的输出：

```
gdb ./mal 
GNU gdb (Ubuntu/Linaro 7.4-2012.04-0ubuntu2) 7.4-2012.04
Copyright (C) 2012 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-linux-gnu".
For bug reporting instructions, please see:
<http://bugs.launchpad.net/gdb-linaro/>...
Reading symbols from /home/bob/prog/c/mal...done.
(gdb) r

Starting program: /home/srdjan/prog/c/mal 
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib/x86_64-linux-gnu/libthread_db.so.1".
[New Thread 0x7ffff77ff700 (LWP 11817)]
[New Thread 0x7ffff6ffe700 (LWP 11818)]
[New Thread 0x7ffff6799700 (LWP 11819)]
[New Thread 0x7fffeffff700 (LWP 11820)]

Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread 0x7ffff6799700 (LWP 11819)]
__strlen_sse2 () at ../sysdeps/x86_64/multiarch/../strlen.S:72
72  ../sysdeps/x86_64/multiarch/../strlen.S: No such file or directory.
(gdb) bt
#0  __strlen_sse2 () at ../sysdeps/x86_64/multiarch/../strlen.S:72
#1  0x00007ffff78df254 in __regexec (preg=0x7ffff6798e80, string=0x7fffef79b000 'a' <repeats 200 times>..., nmatch=<optimized out>, 
pmatch=0x0, eflags=<optimized out>) at regexec.c:245
#2  0x00000000004008e6 in f (arg=0x0) at mal.c:24
#3  0x00007ffff7bc4e9a in start_thread (arg=0x7ffff6799700) at pthread_create.c:308
#4  0x00007ffff78f24bd in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:112
#5  0x0000000000000000 in ?? ()
(gdb) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T01:30:47.047

[Celada](https://stackoverflow.com/a/11038239/134633)正确识别问题 - 文件数据不一定包含空终止符。

您可以通过在文件后立即映射一页零来解决此问题：

```
int fd;
char *text;

fd = open("ttt.txt", O_RDONLY);
text = mmap(NULL, 409600, PROT_READ, MAP_PRIVATE, fd, 0);
close(fd);

fd = open("/dev/zero", O_RDONLY);
mmap(text + 409600, 4096, PROT_READ, MAP_PRIVATE | MAP_FIXED, fd, 0);
close(fd); 
```

（请注意，您可以`fd`在 之后立即关闭`mmap()`，因为`mmap()`添加了对打开文件描述的引用）。

您当然应该在上面添加错误检查。此外，许多 UNIX 系统支持`MAP_ANONYMOUS`您可以使用而不是打开的标志`/dev/zero`（但这不在 POSIX 中）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T17:22:49.203

问题是`regexec()`用于将空终止字符串与预编译模式缓冲区匹配，但`mmap`ed 文件不一定（实际上并非通常）空终止。因此，它在文件末尾之外查找 NUL 字符（0 字节）。

您需要一个版本，`regexec()`它需要一个缓冲区和一个大小参数，而不是一个以 null 结尾的字符串，但似乎没有。

# visual-studio-2010 - 使用命令行“devenv”构建，但不使用 Visual Studio (sln) 和 MSBUild

> ID：11037526
> 
> 赞同：1
> 
> 时间：2012-06-14T16:35:59.600
> 
> 标签：visual-studio-2010, tfs, msbuild, teamcity, devenv

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T22:10:17.760

您可以验证它正在构建的平台，或指定它。过去，当项目设置跨平台不一致时，我们也遇到过类似的问题，并且正在构建的平台不是预期的平台。在这种情况下，我怀疑一个平台与另一个平台没有相同的包含目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-06T17:33:30.803

TeamCity 是一个构建服务器，它具有一组插件支持，可以以非常流畅的方式执行多种类型的构建过程。TeamCity 将代码从源代码管理应用程序下载到工作文件夹并开始构建过程。构建过程期望程序集引用和库类似于开发人员机器。例如，一个基本的 .net 应用程序需要适当的 .net 框架来执行构建过程。同样在你的情况下，图书馆。如果您可以使库文件可用，则构建过程将毫无问题地运行。

# reporting-services - 根据最后一条记录定义表达式

> ID：11037527
> 
> 赞同：0
> 
> 时间：2012-06-14T16:35:59.803
> 
> 标签：reporting-services, dynamics-crm-2011, fetchxml

我在 Fetch XML 中创建了一个自定义报告，其中的表达式根据日期范围参数计算每个事件所花费的时间。在这里创建表达式没有问题，但是这个应该只涉及最后一个合同记录（尽管我仍然需要以前的记录出现在报告中）。有没有办法做到这一点？

提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T18:50:33.760

一定范围内的 Last value函数[怎么](http://msdn.microsoft.com/en-us/library/ms155794%28v=sql.100%29.aspx)[样](http://msdn.microsoft.com/en-us/library/ms159673%28v=sql.90%29.aspx)？例如

```
=Last(Fields!ProductNumber.Value, "Category") 
```

# c# - CS0120：非静态字段、方法或属性“System.Web.UI.Control.Controls.get”需要对象引用

> ID：11037535
> 
> 赞同：1
> 
> 时间：2012-06-14T16:36:23.237
> 
> 标签：c#, asp.net, .net, visual-studio-2010

我知道关于这个主题有很多问题，但似乎没有一个对我的情况有帮助，所以我发布了另一个。

我得到了一个项目，并被要求将项目拆分为单独的控件。最初项目中有一个名为“events”的文件夹，它引用了一个名为“EventsRssFeedControl”的控件。我的老板要求我将事件和 EventsRssFeedControl 分开，并将它们放在自己的项目中。所以我就这么做了。我更改了所有的命名空间并编译了所有内容。但是当我尝试在那里导航时，我得到一个错误。说明：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。

编译器错误消息：CS0120：非静态字段、方法或属性“System.Web.UI.Control.Controls.get”需要对象引用

源错误：

```
<input type="hidden" name="selectedDate" value="<%= UMNEventsRssFeedControl.Controls.UMNEventsRssFeedControl.SelectedDateStr %>"/> 
```

我的代码看起来像这样，我很困惑称它为“非静态”，更困惑为什么它不起作用。

```
 private static string _selectedDateStr;
    public static string SelectedDateStr
    {
        get { return _selectedDateStr; }
        set { _selectedDateStr = value; }
    } 
```

它在旧项目中工作，唯一改变的是命名空间和对新命名空间的调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:40:12.813

问题其实不在`SelectedDateStr`。

`UMNEventsRssFeedControl.Controls`要求 . 的属性`Controls`的静态获取器`UMNEventsRssFeedControl`。显然，`Controls`是上述类的实例属性。

您需要提供一个实例`UMNEventsRssFeedControl`才能使代码正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T21:52:50.507

您的命名空间和类被命名为相同的东西。不要那样做。

# tinymce - TinyMCE中的forced_root_block选项

> ID：11037537
> 
> 赞同：5
> 
> 时间：2012-06-14T16:36:29.083
> 
> 标签：tinymce, contenteditable

我正在尝试使用`contenteditable` `<div>`.

我面临的主要问题之一是浏览器处理`ENTER`击键（换行符）的方式不一致。Chrome 插入`<div>`、Firefox 插入`<br>`和 IE 插入`<p>`。我正在查看 TinyMCE，它有一个名为`forced_root_block`. 设置`forced_root_block`为`div`实际适用于所有主要浏览器。有人知道`forced_root_block`TinyMCE 中的选项如何跨浏览器实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T06:42:35.817

在 tinymce 源代码 (/tiny_mce/classs/dom/DomParser.js) 中，您会发现以下内容：

```
rootBlockName = "forced_root_block" in args ? args.forced_root_block : settings.forced_root_block;

        whiteSpaceElements = schema.getWhiteSpaceElements();
        startWhiteSpaceRegExp = /^[ \t\r\n]+/;
        endWhiteSpaceRegExp = /[ \t\r\n]+$/;
        allWhiteSpaceRegExp = /[ \t\r\n]+/g;

        function addRootBlocks() {
            var node = rootNode.firstChild, next, rootBlockNode;

            while (node) {
                next = node.next;

                if (node.type == 3 || (node.type == 1 && node.name !== 'p' && !blockElements[node.name] && !node.attr('data-mce-type'))) {
                    if (!rootBlockNode) {
                        // Create a new root block element
                        rootBlockNode = createNode(rootBlockName, 1);
                        rootNode.insert(rootBlockNode, node);
                        rootBlockNode.append(node);
                    } else
                        rootBlockNode.append(node);
                } else {
                    rootBlockNode = null;
                }

                node = next;
            };
        }; 
```

这显然负责创建根块元素。我 99% 确信 tinymce 会自行处理“ENTER”键击并停止传播/默认浏览器命令。

# sorting - 具有本地排序的缓冲存储（客户端）

> ID：11037540
> 
> 赞同：3
> 
> 时间：2012-06-14T16:36:46.960
> 
> 标签：sorting, extjs, extjs4, extjs4.1

我有一个缓冲网格，在该网格上实现了本地排序功能（客户端）。我想在商店重新加载时删除列标题上的排序指示（较暗的背景和小箭头）。

有谁知道如何在 4.1 中实现这一点？

**为了更清楚地说明这一点：**

我**希望**我的列是可排序的。我不希望他们在禁用排序的情况下进行初始化。用户应该能够单击标题并对其进行排序。*但是*，我想要的是能够以编程方式关闭排序。即，删除从用户点击中应用的任何排序类（例如较暗的背景和小排序方向箭头）。

我这样做的原因是因为我使用的是修改后的缓冲存储，它允许我对所有缓冲数据（不仅仅是显示的块）进行本地排序（客户端）。通常，使用缓冲存储会禁用本地排序，因为它只会对显示在网格中的数据进行排序 - 而不是内存中的所有数据，所以 Sencha 的人让任何具有缓冲存储的网格自动禁用本地排序- 只有远程分拣有效。好吧，正如我所说，我的已经过修改，所以它可以工作 - 但是当这个缓冲存储重新加载数据库中的新数据时，它不喜欢`sortOnLoad`普通网格理所当然地获得的便利功能。在我的用例中，删除排序状态比覆盖排序状态更合乎逻辑`sortOnLoading`功能并使其对新数据应用相同的排序，因此，这个问题。

我现在已经解决了，我会尽快发布一个答案以及我使用*本地*排序的缓冲存储的实现，以防万一有人感兴趣并供我自己将来参考。

我还应该指出，我非常清楚在需要缓冲的存储上进行本地排序所带来的客户端性能损失（而不是仅对服务器上的数据使用远程排序）。[我知道这可能是 Sencha 不支持对其缓冲存储进行本地排序的原因](http://www.sencha.com/forum/showthread.php?179809-Buffered-Scrolling-Grid-example-and-sort-bug&p=746973&viewfull=1#post746973)。我已经评估了这方面的所有利弊，在我的特定用例中，这对我来说是最明智的做法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T20:41:18.607

深埋在 dom 里面有一个`setSortState`关于`Ext.grid.header.Container`类和`Ext.grid.column.Column`类的函数。这些不会出现在 4.1.0 文档中的任何地方，但它们仍然存在于代码中。

您可以自己查看这些函数，以全面了解它们的作用，但它们的要点是在第一个参数中查找 a或 a`'DESC'`的switch 语句，例如：`'ASC'``null`

```
setSortState(`DESC`);
setSortState(`ASC`);
setSortState(null); 
```

使用单个`null`参数调用此函数的标题版本或列版本将删除列上的排序类。唯一真正的区别是标题版本查看网格的存储以在存储`sorters`属性中找到活动的排序器，然后使用该数据来确定在哪一列上调用此函数 - 列版本只是运行它所在的列对象从调用。

在我的用例中，我没有向 store`sorters`属性添加排序器，因此我使用的是列版本（即`setSortState`从`Ext.grid.column.Column`对象调用）。

首先，这是我实现允许本地（客户端）排序的缓冲存储的示例：

```
Ext.define('MyApp.store.TheBufferedStoreWithLocalSorting', {
    extend: 'Ext.data.Store',
    requires: [
        'Ext.ux.data.PagingMemoryProxy',
        'Ext.util.MixedCollection'
    ],
    model: 'MyApp.model.SomeModel',
    buffered: true,
    pageSize: 100,
    remoteSort: true, // this just keeps sorting from being disabled
    proxy: {
        type: 'pagingmemory',
        reader: 'json'
    },
    /* 
     * Custom sort function that overrides the normal store sort function.
     * Basically this pulls all the buffered data into a MixedCollection
     * and applies the sort to that, then it puts the SORTED data back
     * into the buffered store.               
     */                    
    sort: function(sorters) {
        var collection = new Ext.util.MixedCollection();

        collection.addAll(this.proxy.data);
        collection.sort(sorters);
        this.pageMap.clear();
        this.getProxy().data = collection.getRange();
        this.load();

    }
}); 
```

现在，为了回答我的问题，每当商店重新加载时删除排序器类，我只需要这样做：

```
Ext.each(myGrid.columns, function(column, index) {
    if (column.hasCls('x-column-header-sort-ASC') ||
        column.hasCls('x-column-header-sort-DESC')) {
        myGrid.columns[index].setSortState(null);
        return false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T18:14:59.650

如果我理解正确，在指定列上设置此配置应该可以解决您的问题

```
columns: [
    {text: 'First Name',  dataIndex:'firstname', sortable: false},
    {text: 'Last Name',  dataIndex:'lastname'},
 ] 
```

更多细节在这里[http://docs.sencha.com/ext-js/4-0/#!/api/Ext.grid.column.Column-cfg-sortable](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.grid.column.Column-cfg-sortable)

这是一个配置选项，因此它会在首次呈现网格时禁用列的可排序性。

这是一个[jsfiddle 演示](http://jsfiddle.net/pradeep122/McG4W/)

* 请注意，我使用分机。4.0.7，你可以切换到4.1.0，但是由于某种原因弹出了一个与下拉列表无关的显示错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T18:27:39.877

重新加载商店时，您可以将以下内容添加到商店的加载事件处理程序中：

```
Ext.create("Ext.data.Store", {

    listeners: {
        load: {
            fn: function () {
                grid.addCls("no-sort-icon");
            }
        }
    }
}; 
```

然后修改你的css以在元素是“no-sort-icon”的子元素时隐藏图标（这将在网格上）

```
.no-sort-icon .x-column-header-text {
    background-image: none;
}
.no-sort-icon .x-column-header {
    background-color: #C5C5C5;
} 
```

# ruby-on-rails - 在rails 3.1.4应用程序中未调用accept_nested_attributes_for中的：reject_if

> ID：11037541
> 
> 赞同：0
> 
> 时间：2012-06-14T16:36:47.743
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, nested-attributes

有很多关于`:reject_if`不工作的问题。这里还有一个案例。被`:reject_if`完全绕过了。

这是用户模型中的代码：

```
class User < ActiveRecord::Base

  attr_accessible :name, :login, :email, :password, :user_type, :user_levels_attributes, :as => :role_new
  has_many :user_levels, :dependent => :destroy
  accepts_nested_attributes_for :user_levels, :reject_if => proc { |a| a['position'].blank? }, :allow_destroy => true

end 
```

用户有许多用户级别，其中包含用户位置信息。这是user_level的模型：</p>

```
class UserLevel < ActiveRecord::Base
  belongs_to :user

  validates :position, :presence => true
end 
```

不应该保存没有位置的用户，这`:reject_if`就是应该做的。然而我们尝试了，`proc, lambda, 'position' and :position`. 最后我们甚至试图`:reject_if => true`强制执行`:reject_if`. 保存了具有空白位置的用户，并且以上都没有在`user_level`. 似乎`:reject_if`完全被绕过了。

我们上面的代码有什么问题？谢谢你。

# ruby-on-rails - 测试 rspec Hartl 教程第 10.3.3 章

> ID：11037547
> 
> 赞同：0
> 
> 时间：2012-06-14T16:37:00.653
> 
> 标签：ruby-on-rails, testing, rspec, railstutorial.org

我一直遇到同样的测试失败，我不知道为什么。我是编程新手，所以我已经发布了自上次通过测试以来我处理过的所有文件。

任何见解将不胜感激！

```
Failures:

  1) Static pages Home page for signed-in users should render the user's feed
Failure/Error: page.should have_selector("li##{item.id}", text: item.content)
   expected css "li#2" with text "Dolor sit amet" to return something
 # ./spec/requests/static_pages_spec.rb:31:in `block (5 levels) in <top (required)>'
 # ./spec/requests/static_pages_spec.rb:30:in `block (4 levels) in <top (required)>'

Finished in 5.66 seconds
101 examples, 1 failure

Failed examples:

rspec ./spec/requests/static_pages_spec.rb:29 # Static pages Home page for signed-in users should     render the user's feed 
```

这是 static_pages_spec.rb：

```
require 'spec_helper'

describe "Static pages" do  
  subject { page }

  shared_examples_for "all static pages" do
    it { should have_selector('h1', text: heading) }
    it { should have_selector('title', text: full_title(page_title)) }
end

  describe "Home page" do
    before { visit root_path }
   let(:heading)   { 'Sample App' }
   let(:page_title) { '' } 

   it_should_behave_like "all static pages"
   it { should_not have_selector 'title',   text: '| Home' }

    describe "for signed-in users" do
      let(:user) { FactoryGirl.create(:user) }
      before do
        FactoryGirl.create(:micropost, user: user, content: "Lorem ipsum")
        FactoryGirl.create(:micropost, user: user, content: "Dolor sit amet")
        sign_in user
        visit root_path
      end

  it "should render the user's feed" do
    user.feed.each do |item|
      page.should have_selector("li##{item.id}", text: item.content)
    end
  end
end
 end 

  describe "Help page" do
    before { visit help_path }
  let(:heading) { 'Help' }
  let(:page_title) { 'Help' }
end

  describe "About Us page" do
    before { visit about_path }
  let(:heading) { 'About Us' }
  let(:page_title) { 'About Us' }
end

  describe "Contact page" do
    before { visit contact_path }
  let(:heading) { 'Contact' }
  let(:page_title) { 'Contact' }
end

end 
```

这是 user_spec.rb

```
require 'spec_helper'

describe User do

  before do
    @user = User.new(name: "Example User", email: "user@example.com", 
                  password: "foobar", password_confirmation: "foobar")
  end

  subject { @user }

  it { should respond_to(:name) }
  it { should respond_to(:email) }
  it { should respond_to(:password_digest) }
  it { should respond_to(:password) }
  it { should respond_to(:password_confirmation) }
  it { should respond_to(:remember_token) }
  it { should respond_to(:authenticate) }

  it { should be_valid }

  it { should respond_to(:admin) }
  it { should respond_to(:authenticate) }

  it { should respond_to(:authenticate) }
  it { should respond_to(:microposts) }
  it { should respond_to(:feed) }

  it { should be_valid }
  it { should_not be_admin }

  describe "with admin attribute set to 'true'" do
    before { @user.toggle!(:admin) }

    it { should be_admin }
  end

  describe "when password is not present" do
    before { @user.password = @user.password_confirmation = " " }
    it { should_not be_valid }
  end

  describe "when password doesn't match confirmation" do
    before { @user.password_confirmation = "mismatch" }
    it { should_not be_valid}
  end

  describe "when password confirmation is nil" do
    before { @user.password_confirmation = nil }
    it { should_not be_valid }
  end

  describe "with a password that's too short" do
    before { @user.password = @user.password_confirmation = "a" * 5}
    it { should be_invalid }
  end

  describe "return value of authenticate method" do
    before { @user.save }
    let(:found_user) { User.find_by_email(@user.email) }

    describe "with valid password" do
      it { should == found_user.authenticate(@user.password) }
    end

    describe "with invalid password" do
      let(:user_for_invalid_password) { found_user.authenticate("invalid") }

      it { should_not == user_for_invalid_password }
      specify { user_for_invalid_password.should be_false }
    end
  end

    describe "remember token" do
     before { @user.save }
     its(:remember_token) { should_not be_blank }
   end

  describe "when name is not present" do
    before { @user.name = " " }
    it { should_not be_valid }
  end

  describe "when name is too long" do
    before { @user.name = "a" * 51 }
    it { should_not be_valid }
  end

  describe "when email is not present" do
    before { @user.email = " " }
    it { should_not be_valid}
  end

  describe "when email format is invalid" do
    it "should be invalid" do
      addresses = %w[user@foo,com user_at_foo.org example.user@foo.
                       foo@bar_baz.com foo@bar+baz.com]
      addresses.each do |invalid_address|
        @user.email = invalid_address
        @user.should_not be_valid
      end      
    end
  end

  describe "when email format is valid" do
    it "should be valid" do
      addresses = %w[user@foo.COM A_US-ER@f.b.org frst.lst@foo.jp a+b@baz.cn]
      addresses.each do |valid_address|
        @user.email = valid_address
        @user.should be_valid
      end      
    end
  end
  describe "when email address is already taken" do
    before do
      user_with_same_email = @user.dup
      user_with_same_email.email = @user.email.upcase
      user_with_same_email.save
    end

    it { should_not be_valid }
  end

  describe "micropost associations" do

    before { @user.save }
    let!(:older_micropost) do 
      FactoryGirl.create(:micropost, user: @user, created_at: 1.day.ago)
    end
    let!(:newer_micropost) do
      FactoryGirl.create(:micropost, user: @user, created_at: 1.hour.ago)
    end

    it "should have the right microposts in the right order" do
      @user.microposts.should == [ newer_micropost, older_micropost]
    end

    describe "status" do
      let(:unfollowed_post) do
        FactoryGirl.create(:micropost, user: FactoryGirl.create(:user))
      end

      its(:feed) { should include(newer_micropost) }
      its(:feed) { should include(older_micropost) }
      its(:feed) { should_not include(unfollowed_post) }
    end

    it "should destroy associated microposts" do
      microposts = @user.microposts
      @user.destroy
      microposts.each do |micropost|
        Micropost.find_by_id(micropost.id).should be_nil
      end
    end
  end 
end 
```

这是user.rb

```
class User < ActiveRecord::Base

  attr_accessible :email, :name, :password, :password_confirmation
  has_secure_password
  has_many :microposts, dependent: :destroy

  before_save { |user| user.email = email.downcase }
  before_save :create_remember_token

  validates :name, presence: true, length: { maximum: 50 }
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence: true, format: { with: VALID_EMAIL_REGEX },
                    uniqueness: { case_sensitive: false }
  validates :password, presence: true, length: { minimum: 6 }
  validates :password_confirmation, presence: true

  def feed
    Micropost.where("user_id = ?", id)
  end

  private

    def create_remember_token
      self.remember_token = SecureRandom.urlsafe_base64
    end
end 
```

这是 static_pages_controller.rb

```
class StaticPagesController < ApplicationController

  def home
    if signed_in?
        @micropost = current_user.microposts.build 
        @feed_items = current_user.feed.paginate(page: params[:page])
    end
  end

  def help
  end

  def about
  end

  def contact
  end

end 
```

这是 feed.html.erb

```
<% if @feed_items.any? %>
<ol class="microposts">
    <% render partial: 'shared/feed_item', collection: @feed_items %>
</ol>
<%= will_paginate @feed_items %> 
```

这是 feed_item.html.erb

```
 <li id="<%= feed_item.id %>">
  <%= link_to gravatar_for(feed_item.user), feed_item.user %>
  <span class="user">
    <%= link_to feed_item.user.name, feed_item.user %>
  </span>
  <span class="content"><%= feed_item.content %></span>
  <span class="timestamp">
    Posted <%= time_ago_in_words(feed_item.created_at) %> ago.
  </span>
</li> 
```

这是 home.html.erb

```
<% if signed_in? %>
<div class="row">
    <aside class="span4">
        <section>
            <%= render 'shared/user_info' %>
        </section>
        <section>
            <%= render 'shared/micropost_form' %>
        </section>
    </aside>
    <div class="span8">
        <h3>Micropost Feed</h3>
        <%= render 'shared/feed' %>
    </div>
</div>
<% else %>
<div class="center hero-unit">

<h1>Welcome to the Sample App</h1>

<h2>
    This is the home page for the 
    <a href="http://railstutorial.org/">Ruby on Rails Tutorial</a>
    sample application. 
</h2>

<%= link_to "Sign up now!", signup_path, class: "btn btn-large btn-primary" %>
</div>

<%= link_to image_tag("rails.png", alt: "Rails"), 'http://rubyonrails.org/' %>
<% end %> 
```

这是 microposts_controller.rb

```
 class MicropostsController < ApplicationController
  before_filter :signed_in_user

  def create
    @micropost = current_user.microposts.build(params[:micropost])
    if @micropost.save
      flash[:success] = "Micropost created!"
      redirect_to root_path
    else
      @feed_items = [ ]
      render 'static_pages/home'
    end
  end

  def destroy
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T18:03:14.393

我想到了。feed.html.erb 在渲染之前缺少一个 =。所以之前，它看起来像这样：

```
 <% if @feed_items.any? %>
<ol class="microposts">
    <% render partial: 'shared/feed_item', collection: @feed_items %>
</ol>
<%= will_paginate @feed_items %> 
```

但它需要看起来像这样（更改在第 3 行）：

```
<% if @feed_items.any? %>
<ol class="microposts">
    <%= render partial: 'shared/feed_item', collection: @feed_items %>
</ol>
<%= will_paginate @feed_items %> 
```

所以，我认为这是因为 <% with = 使 ruby​​ 评估表达式，然后将其付诸行动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T17:30:02.150

您的测试结果表明，您的主文件必须呈现带有文本“Dolor sit Amet”的第二个 li 项目

我猜你必须准备一个内容为“Dolor sit Amet”的提要项目

# java - 参考搜索仅在 Eclipse 中修改变量

> ID：11037549
> 
> 赞同：2
> 
> 时间：2012-06-14T16:37:07.693
> 
> 标签：java, eclipse

在 Eclipse 中，我可以对变量进行参考搜索，这使我可以查看相关变量已被访问/修改的每个位置。有没有办法让我快速查看相关变量的修改位置？（代码库很大......）

举个例子，

```
static public int test;

public static void main(String[] args)
{
    test = 4;

    if (test > 5) doNothing();
} 
```

我只想让搜索显示 line `test = 4;`，而不是 if 测试。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T16:44:52.257

您可以对字段执行此操作。例如，选择“测试”字段，按 Ctrl-H，然后按 Java 搜索，选择字段和写入访问单选按钮并将搜索范围缩小到工作区或特定工作集中的源。

# java - 创建一个在计时器上运行但可以随时唤醒的 java 线程

> ID：11037551
> 
> 赞同：2
> 
> 时间：2012-06-14T16:37:14.373
> 
> 标签：java, multithreading, concurrency

我想创建一个定期运行某些东西（可运行）但可以在需要时唤醒的类。如果我可以封装整个事情，我想公开以下方法：

```
public class SomeService implements Runnable {

  public run() {
    // the code to run at every interval
  }

  public static void start() { }
  public static void wakeup() { }
  public static void shutdown() { }

} 
```

不知怎的，我已经走到了这一步。但我不确定这是否是正确的方法。

```
public class SomeService implements Runnable {

  private static SomeService service;
  private static Thread thread;
  static {
    start();
  }

  private boolean running = true;

  private SomeService() {
  }

  public void run() {
    while (running) {
      try {
        // do what needs to be done
        // perhaps peeking at a blocking queue
        // or checking for records in a database
        // trying to be independent of the communication
        System.out.println("what needs to be done");
        // wait for 15 seconds or until notify
        synchronized (thread) {
          try {
            thread.wait(15000);
          } catch (InterruptedException e) {
            System.out.println("interrupted");
          }
        }
      } catch (Exception e) {
        e.printStackTrace();
      }
    }
  }

  private static void start() {
    System.out.println("start");
    service = new SomeService();
    thread = new Thread(service);
    thread.setDaemon(true);
    thread.start();
  }

  public static void wakeup() {
    synchronized (thread) {
      thread.notify();
    }
  }

  public static void shutdown() {
    synchronized (thread) {
      service.running = false;
      thread.interrupt();
      try {
        thread.join();
      } catch (InterruptedException e) {
        e.printStackTrace();
      }
    }
    System.out.println("shutdown");
  }

  public static void main(String[] args) throws IOException {

    SomeService.wakeup();
    System.in.read();
    SomeService.wakeup();
    System.in.read();
    SomeService.shutdown();

  }

} 
```

我担心变量应该被声明为 volatile。并且还担心我应该检查“需要完成的部分” `thread.isInterrupted()`。这看起来是正确的方法吗？我应该把它翻译给执行者吗？如何强制在计划的执行程序上运行？

编辑

与执行器进行了实验后，似乎这种方法似乎是合理的。你怎么看？

```
public class SomeExecutorService implements Runnable {

  private static final SomeExecutorService runner 
    = new SomeExecutorService();

  private static final ScheduledExecutorService executor 
    = Executors.newSingleThreadScheduledExecutor();

  // properties

  ScheduledFuture<?> scheduled = null;

  // constructors

  private SomeExecutorService() {
  }

  // methods

  public void schedule(int seconds) {
    scheduled = executor.schedule(runner, seconds, TimeUnit.SECONDS);
  }

  public void force() {
    if (scheduled.cancel(false)) {
      schedule(0);
    }
  }

  public void run() {
    try {
      _logger.trace("doing what is needed");
    } catch (Exception e) {
      _logger.error("unexpected exception", e);
    } finally {
      schedule(DELAY_SECONDS);
    }
  }

  // static methods

  public static void initialize() {
    runner.schedule(0);
  }

  public static void wakeup() {
    runner.force();
  }

  public static void destroy() {
    executor.shutdownNow();
  }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T16:49:17.613

对于初学者 - 你可能不想自己实现 Runnable；你应该接受一个Runnable。仅当您希望将您的类传递给其他人执行时，您才应该实现 Runnable。

为什么不封装一个 ScheduledExecutorService？这是一个快速（非常差，但应该是功能性的）实现。

```
public class PokeableService {

  private ScheduledExecutorService service = Executors.newScheduledThreadPool(1);
  private final Runnable codeToRun;

  public PokeableService (Runnable toRun, long delay, long interval, TimeUnit units) {
    codeToRun = toRun;
    service.scheduleAtFixedRate(toRun, delay, interval, units);
  }

  public void poke () {
    service.execute(codeToRun);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T16:45:55.353

这些变量不需要是易失的，因为它们是在同步块中读取和修改的。

您应该使用与线程不同的对象作为锁，因为 Thread 类执行它自己的同步。

我建议使用单线程 ScheduledExecutorService 并删除睡眠。然后如果你想在当前的睡眠期间运行任务，你可以再次提交给执行器进行单次运行。只需使用 ScheduledExecutorService 扩展的 ExecutorService 中的执行或提交方法。

关于检查 isInterrupted，如果 do 工作部分可能需要很长时间，可以在中间取消，并且不调用阻塞的方法并且会以任何方式抛出中断异常，则应该执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T16:58:39.310

使用等待/通知应该是一种更有效的方法。我也同意没有必要使用“易失性”的建议，并且在替代对象上同步以避免冲突是明智的。

其他一些建议：

*   在别处启动线程，从静态块开始不是好的做法
*   将执行逻辑放在“execute()”方法或类似方法中是可取的

此代码实现了上述建议。另请注意，只有一个线程执行 SomeService 执行逻辑，并且它将在上次完成时间后的 INTERVAL 毫秒后发生。在手动触发 wakeUp() 调用后，您不应重复执行。

```
public class SomeService implements Runnable {

  private static final INTERVAL = 15 * 1000;
  private Object svcSynchronizer = new Object();
  private boolean running = true;

  private SomeService() {
  }

  public void run() {
    while (running) {
      try {
        // do what needs to be done
        // perhaps peeking at a blocking queue
        // or checking for records in a database
        // trying to be independent of the communication
        System.out.println("what needs to be done");

        // wait for 15 seconds or until notify
        try {
          svcSynchronizer.wait(INTERVAL);
        } catch (InterruptedException e) {
          // ignore interruptions
        }

      } catch (Exception e) {
        e.printStackTrace();
      }
    }
  }

  public void wakeUp() {
    svcSynchronizer.notifyAll();
  }

  public void shutdown() {
    running = false;
    svcSynchronizer.notifyAll();
  }

} 
```

# c# - C# 类中是否添加了隐藏的“使用”？

> ID：11037552
> 
> 赞同：2
> 
> 时间：2012-06-14T16:37:25.853
> 
> 标签：c#, .net, enums

我的应用程序中有一个 Utils 单元，截至目前，它只定义了几个枚举，例如：

```
public enum MostFavoredStates
{
    California,
    NorthCarolina,
    Vermont,
    NewMexico
}

public enum LeastFavoredStates
{
    NorthDakota,
    Illinois,
    Nebraska
}

public enum StatesInWhichIHaveResided
{
        California,
        NewYork,
        Montana,
    Alaska,
        Oklahoma,
        Wisconsin,
        Idaho,
        Missouri
} 
```

当我在我的项目上运行 ReSharper 时，它说我在这个类中根本不需要“使用”语句；所以，我将它们全部删除，瞧！它真的什么都不需要。

“枚举”必须在某处声明——如果没有对该程序集或命名空间的引用，它怎么能存在？如果每个班级都有一些“基础”，那是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-14T16:38:56.853

> “枚举”必须在某处声明——如果没有对该程序集或命名空间的引用，它怎么能存在？如果每个班级都有一些“基础”，那是什么？

“枚举”是 C# 语言关键字。它不是需要解决的框架类型，因为它是语言本身的一部分。

请注意，还有许多其他语言关键字是这种方式。例如，您可以`int`在不使用 using 子句的情况下使用 for `using System;`，因为它作为别名“烘焙”到语言中`System.Int32`- 但您不能使用`Int32`，因为那是`System.Int32`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T17:17:26.460

在程序开始时你永远不需要任何`using`语句；它们的存在都是为了方便。

您始终可以为每个内联类型使用完全限定名称，它将被解析。

```
System.Console.WriteLine(System.String.Empty); 
```

上面的代码片段编译得很好，没有任何`using`块。添加的唯一好处`using System;`是它可以让您将上面的代码缩短为：

```
Console.WriteLine(String.Empty); 
```

现在，考虑到某些命名空间类型通常在给定代码文件中使用的次数，这往往是一个显着的改进，因此很少使用完全限定名称。

类型别名（int、string、double、datetime 等）映射到它们所代表的完全限定名称，而不仅仅是非限定名称，因此不依赖于`using System`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T13:06:36.003

重要的是要注意，C#“内置”类型（例如 int 和 string）只是 .NET 类型 System.Int32 和 System.String 的别名。

如果您使用 int 或 string，则不需要 using System.

如果您正在尝试决定使用哪个（.NET 类型或 C# 别名），则以下 SO 问题可能会有所帮助：

[C#、int 还是 Int32？我应该关心吗？](https://stackoverflow.com/questions/62503/c-int-or-int32-should-i-care)

# windows-phone-7 - 如何获取 Windows Phone 上的“系统区域设置”设置？

> ID：11037554
> 
> 赞同：1
> 
> 时间：2012-06-14T16:37:41.120
> 
> 标签：windows-phone-7, localization, windows-phone

在手机的设置下，您可以设置

*   “显示语言”（通过 检索`CultureInfo.CurrentUICulture`），
*   “区域格式”（通过 检索`CultureInfo.CurrentCulture`），以及
*   “系统语言环境”，通过**?**

有谁知道如何检索为“系统语言环境”设置的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:01:23.590

尝试

```
CultureInfo.CurrentCulture.EnglishName 
```

资料来源：[http ://www.ginktage.com/2011/06/retreive-the-country-name-in-windows-phone-7/](http://www.ginktage.com/2011/06/retreive-the-country-name-in-windows-phone-7/)

# c++ - 协助在 MFC 中从多字节移植到 UNICODE

> ID：11037555
> 
> 赞同：4
> 
> 时间：2012-06-14T16:37:41.080
> 
> 标签：c++, unicode, mfc, multibyte

我还有 6 个月到 1 年的无聊时间。我正在开发一个包含超过 100 万行代码的程序（其中大部分是在 90 年代早期/中期编写的），并且已经决定它现在应该支持 UNICODE 构建。我研究并发现了许多最佳实践：

*   使用许多 microsoft 和 C++ 方法的 _t 版本，例如 _stprintf_s() 而不是 sprintf_s() 或 _tcsstr() 而不是 strstr()，
*   包装所有需要为 TCHAR* 的编码字符串，如 _T("string") 或 _T('c')，
*   如有必要，使用 CA2T() 和 CT2A() 将大多数 char* 替换为 LPTSTR，将大多数 const char* 替换为 LPCTSTR，将 char 替换为 TCHAR，以便在 char* 和 LPTSTR 之间进行转换，

我想知道是否有人编写了一个能够自动进行许多这些更改的脚本，因为他们可以为我节省几个月的工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T18:39:08.387

我认为[这种方法](http://utf8everywhere.org/)完全适合您的情况。

将所有字符串保留为窄字符，使用`sprintf`和`strstr`以前一样，从始终假定为没有 BOM 的 UTF-8 的文本文件中读取和写入，等等……您需要更改的只是与系统的通信。现在假设字符串是 UTF-8，在调用 MFC 或 Windows 之前，即时转换为 UTF-16。

作为奖励，与 Microsoft 提倡的方法相比，您将更容易移植到非 Windows 平台。

# javascript - 使用变量的 Href 属性不起作用

> ID：11037560
> 
> 赞同：0
> 
> 时间：2012-06-14T16:38:05.300
> 
> 标签：javascript, variables, href, alert

在 JS 中，我正在创建一个链接，其中 href 属性运行一个函数。函数 simple 打开一个带有给定变量的警报窗口。

```
function alerter(str){
    alert(str);
} 
```

创建链接时，我使用以下代码。

```
var link = document.createElement('a');
link.setAttribute('href','javascript:alerter("hi")');
link.innerHTML = "Sauce"; 
```

如果我这样做，它会起作用。但是，我想要做的是提醒先前定义的变量。但是当我使用

```
link.setAttribute('href','javascript:alerter(myvar)'); 
```

弹出窗口不再起作用。另外，有没有办法简单地将警报嵌入到 href 中，而不是编写单独的函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:41:26.017

它应该是

```
link.setAttribute('href','javascript:alerter("' + myvar + '")'); 
```

您正在使用字符串连接来放入`myvar`该字符串。你有它的方式，整个事情是一个字符串“javascript：alerter（myvar）”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T16:41:49.090

试试这个

```
link.setAttribute('href','javascript:alerter('+myvar+')'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T16:43:04.863

[http://jsfiddle.net/xmBbw/2/](http://jsfiddle.net/xmBbw/2/)

只需修改锚点的 onclick 事件。如果您不打算在任何地方链接，则无需使用 href 属性。而是使用 onclick 并为其分配您喜欢的任何功能。此外，在 html 标记中编写 javascript 是非常糟糕的做法。请[不要](https://stackoverflow.com/questions/1070760/javascript-function-in-href-vs-onclick?rq=1)。

[一篇关于良好实践的好文章](http://www.javascripttoolbox.com/bestpractices/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T16:44:16.553

该`myvar`变量必须在全局范围内。确保您也可以将其作为`window.myvar`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T16:47:33.417

对于您的第一个问题，请使用：

```
link.setAttribute('href','javascript:alerter(' + somevar + ')'); 
```

对于您的第二个问题，请使用：

```
link.setAttribute('href','javascript:alert(' + somevar + ')'); 
```

干杯。

# .net - 为什么 IIS 7 不返回 JSON 错误？在 *my* 机器上工作

> ID：11037571
> 
> 赞同：8
> 
> 时间：2012-06-14T16:38:50.067
> 
> 标签：.net, json, wcf, iis, .net-4.0

我遵循以下博客文章中的原则，当我使用 Visual Studio 2010 的内置 Web 服务器调试 WCF 服务时，我得到了我期望的行为。

[http://zamd.net/2008/07/08/error-handling-with-webhttpbinding-for-ajaxjson/](http://zamd.net/2008/07/08/error-handling-with-webhttpbinding-for-ajaxjson/)

当我的应用程序抛出 FaultException() 时，我可以在本地机器上看到该错误的 JSON 表示。应用程序还返回适当的 HttpStatusCode（在本例中为 401 Unauthorized），这是所需的行为。

```
{"Code":"UserNotLoggedInFault","DisplayText":"You must be logged in to access this resource.","InternalText":"User is not logged in"} 
```

但是，当我将应用程序部署到 IIS 7.0 时，我得到了正确的 HttpStatusCode，但返回的 html 是与状态代码关联的通用文本：

> 您无权查看此目录或页面。

因为这是在本地工作，所以我认为问题是 IIS 配置设置。我已经删除了 IIS：拦截错误状态的错误页面值（它用于从 %SystemDrive%\inetpub\custerr\\401.htm 返回格式化的 HTML）

有谁知道当返回 200 范围之外的 HTTP 状态时，我需要更改哪些 IIS 设置以允许 JSON 响应通过？...或者也许我还需要做其他事情？

* * *

**更新#1**

仅当我的应用程序抛出一个将 HttpStatusCode 设置为 Unauthorized (401) 的 FaultException 时才会出现这种情况。如果我的应用程序返回 404 Not Found 的状态代码，则正确返回 JSON。

问题仍然存在，但我想它只适用于返回 401 Unauthorized 状态码。

以下是 Charles Web Proxy 捕获的响应截图

[http://imgur.com/a/MkRRI](http://imgur.com/a/MkRRI)

这是我点击本地机器时的样子

[http://imgur.com/a/RMmsa](http://imgur.com/a/RMmsa)

* * *

**更新#2**

因此，如果我将桌面远程访问服务器并通过 localhost 访问该站点，则*不会发生这种情况。*当我点击需要身份验证的 URL 时，我会返回正确的 JSON 对象。

[http://i.imgur.com/J5oNn.png](http://i.imgur.com/J5oNn.png)

那么这是否意味着 IIS 以不同的方式处理 401 状态代码，并且未经过身份验证的用户无法获得正确的响应？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-08T21:26:13.270

我们在 IIS“错误页面”配置中找到了修复该行为的设置。

您需要将错误响应设置为“详细错误”，默认为“本地请求的详细错误和远程请求的自定义错误页面”。您可以在您的网站或服务器范围内设置它。

似乎该功能决定显示 401 的自定义错误页面，而不是向未经授权的客户端提供更多详细信息。

只要确保您的服务错误处理屏蔽了异常，否则客户端可以看到堆栈跟踪。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-14T20:40:03.457

浏览器正在生成“您没有权限”。我想您正在浏览器中查看对请求的响应；我猜是IE。

鉴于 401 响应，IE 正在为您生成“友好”页面。IE 不是 json 客户端，它认为调用者是人（几乎总是正确的）。所以它显示了一个人性化的页面。

如果您使用 Fiddler 或 wget.exe 或其他一些非浏览器工具来处理该 URL，您将看到带有 401 状态代码和 json 响应的正确输出。

不知道在其他浏览器上会发生什么。

有关 IE 中“友好”错误页面的更多信息，包括如何关闭它们，请参阅[Eric Lawrence（Fiddler 的作者）的这篇文章](http://blogs.msdn.com/b/ieinternals/archive/2010/08/19/http-error-pages-in-internet-explorer.aspx)。

# oracle - 我可以在 oracle 函数中使用 insert all 语句吗

> ID：11037578
> 
> 赞同：2
> 
> 时间：2012-06-14T16:39:04.543
> 
> 标签：oracle, function

```
CREATE OR REPLACE FUNCTION layer2layerAttribute RETURN VARCHAR2 AS
/**
 * This function properly joins all layers to their appropriate fields
 */
  cursor PLACES is select * from layer l where l.layer_name like '%place%';
BEGIN
  FOR place IN PLACES
  LOOP
     Insert all
      into LAYER_JOIN_LAYER_ATTRIBUTE (ID_LAYER, ID_LAYER_ATTRIBUTE) 
        values (place.id_layer, select id_layer_attribute from layer_attribute where name_attribute = 'filter.street')
      into LAYER_JOIN_LAYER_ATTRIBUTE (ID_LAYER, ID_LAYER_ATTRIBUTE) 
        values (place.id_layer, select id_layer_attribute from layer_attribute where name_attribute = 'filter.city')
      into LAYER_JOIN_LAYER_ATTRIBUTE (ID_LAYER, ID_LAYER_ATTRIBUTE) 
        values (place.id_layer, select id_layer_attribute from layer_attribute where name_attribute = 'filter.state')
      into LAYER_JOIN_LAYER_ATTRIBUTE (ID_LAYER, ID_LAYER_ATTRIBUTE) 
        values (place.id_layer, select id_layer_attribute from layer_attribute where name_attribute = 'filter.zip')
      into LAYER_JOIN_LAYER_ATTRIBUTE (ID_LAYER, ID_LAYER_ATTRIBUTE) 
        values (place.id_layer, select id_layer_attribute from layer_attribute where name_attribute = 'filter.country')
      select * from dual;
  END LOOP;
  RETURN null;
END layer2layerAttribute; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T17:56:45.580

可以，但不能`select`在子句内使用 a `values`，或代替`values`each 的子句`into`。您可以使用值，也可以使用单个子查询。（参见[语法图](http://docs.oracle.com/cd/E18283_01/server.112/e17118/statements_9014.htm#i2121682)）。我也不确定您为什么使用游标，而不是将 select from`layer`作为子查询而不是 select from `dual`。

您可以使用单个插入来执行此操作，同时跳过显式游标；如果需要，在过程中（而不是函数，因为您不需要返回任何内容，并且通常在可以更新数据时不使用函数）：

```
CREATE OR REPLACE PROCEDURE layer2layerAttribute AS
BEGIN
    insert into layer_join_layer_attribute (id_layer, id_layer_attribute)
    select l.id_layer, la.id_layer_attribute
    from layer l
    cross join layer_attribute la
    where l.layer_name like '%place%'
    and la.name_attribute in ('filter.street', 'filter.city', 'filter.state',
        'filter.zip', 'filter.country');
END layer2layerAttribute; 
```

虽然这看起来像是填充新表的一次性任务，但您可以将其作为简单的 SQL 语句运行。如果它不是一次性的，那么除非您检查并排除它们，否则您将在第二次执行时得到重复。

# android - 如果应用程序在启动时崩溃，在哪里查看

> ID：11037582
> 
> 赞同：0
> 
> 时间：2012-06-14T16:39:18.023
> 
> 标签：android

我是安卓的初学者。在 java 和其他编程语言中，我们在控制台中得到错误。如何找到与代码中没有错误和应用程序在启动时崩溃一样的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:42:10.923

设备上发生的错误消息[将通过 LogCat 对您可见](http://developer.android.com/guide/developing/debugging/ddms.html#logcat)，可通过`adb logcat`命令、独立 DDMS 中的 LogCat 窗格或 Eclipse 中的 LogCat 视图访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T16:45:40.517

您可以随时在 DDMS Perspective 中检查 LogCat 控制台

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T16:42:23.367

在eclipse中使用logcat，红线是错误。双击它们会显示错误来自的代码行（尝试所有这些）。

# reporting-services - SSRS 2005 - 不正确的 RunningValue 总和

> ID：11037585
> 
> 赞同：0
> 
> 时间：2012-06-14T16:39:32.747
> 
> 标签：reporting-services, sum

我正在运行一个包含多个组的报告，最后我尝试用总负债和权益减去总资产。结果差了一分钱。我不知道为什么。

这是总资产以及总负债和权益-

> 总资产 **383,357,355.23**
> 
> 负债及 **权益总额 (383,032,370.18)**

最后是总计 -

这是用于计算它的表达式 -

```
'=RunningValue(Iif(Fields!Group_1.Value = "ASSETS" or Fields!Group_1.Value = "LIABILITIES AND EQUITIES",Val(Fields!CurMonAvgBal.Value), Val(0)), Sum, nothing)' 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T05:48:23.147

出一分钱？

```
Owner's Equity = Assets - Liabilities 
```

这意味着 OE + L = A，您损失了 $324,985.05

尽管如此，您最有可能拥有的是舍入误差。尝试以四位小数显示您的数字，并查看美分后面是否有未显示但干扰您的计算的数字。

# html - html表格上的空格

> ID：11037589
> 
> 赞同：0
> 
> 时间：2012-06-14T16:39:45.213
> 
> 标签：html, css, html-table

这是一个简单的问题，但我似乎无法解决它。我的 html 表可以在下面看到：

[http://jsfiddle.net/Rochefort/kvUKG/](http://jsfiddle.net/Rochefort/kvUKG/)

并且还包括在这里：

```
 <table style="background:#fff;width:300px;margin-left:14px;" class="form"> 
    <tbody>
       <tr style=""> 
          <td class="bosluk"></td> 
          <td class="alis_baslik"><strong>ALIŞ</strong></td> 
          <td class="satis_baslik"><strong>SATIŞ</strong></td> 
       </tr> 
       <tr style="border-bottom:1px solid #e4e4e4;"> 
          <td class="ikonlar"><strong>$ </strong></td> 
          <td class="kurlar">DOLAR</td> 
          <td class="alis">2.2804</td> 
          <td class="satis">2.2914</td> 
       </tr> 
       <tr style="border-bottom:1px solid #e4e4e4;"> 
          <td class="ikonlar"><strong>$ </strong></td> 
          <td class="kurlar"><strong>DOLAR</strong></td> 
          <td class="alis">2.2804</td> 
          <td class="satis">2.2914</td> 
       </tr> 
       <tr style="border-bottom:1px solid #e4e4e4;"> 
          <td class="ikonlar"><strong>$ </strong></td> 
          <td class="kurlar"><strong>DOLAR</strong></td> 
          <td class="alis">2.2804</td> 
          <td class="satis">2.2914</td> 
       </tr> 
       <tr style="border-bottom:1px solid #e4e4e4;"> 
          <td class="ikonlar"><strong>$ </strong></td> 
          <td class="kurlar"><strong>DOLAR</strong></td> 
          <td class="alis">2.2804</td> 
          <td class="satis">2.2914</td> 
       </tr> 
    </tbody>
 </table> 
```

我实现了 CSS，但该`DOLLAR`项目有太多空间。我怎样才能删除这个额外的空间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:47:35.850

您可以使用`text-align: right`with`padding-right`代替`padding-left`.

示例：http: [//jsfiddle.net/BfD2v/](http://jsfiddle.net/BfD2v/)

```
.ikonlar {
    padding-right:5px;
    font-family: Arial;
    font-size:12px;
    font-weigth: bold;
    color: #000;
    text-align: right;
} 
```

如果要使整列变窄，可以使用以下方法设置列的宽度：

```
.bosluk, .ikonlar {
    width: 10px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T19:57:28.240

您还应该`<th>`为标题使用标签。`<td>`然后，这些列将在标签下对齐。像：

```
<table border="1">
 <tr>
  <th>Month</th>
  <th>Savings</th>
 </tr>
 <tr>
  <td>January</td>
  <td>$100</td>
 </tr>
 <tr>
  <td>February</td>
  <td>$80</td>
 </tr>
</table> 
```

# asp.net-mvc-3 - 实体上的 DataAnnotations 未显示在视图中

> ID：11037599
> 
> 赞同：0
> 
> 时间：2012-06-14T16:40:20.720
> 
> 标签：asp.net-mvc-3

我有一个供应商实体，其中包含

```
ID - int
Status - string
Name - string
CreateDate- datetime 
```

我正在使用部分类方法为上述实体创建数据注释。如此处[所述](http://ryanhayes.net/blog/data-annotations-for-entity-framework-4-entities-as-an-mvc-model/)

```
namespace TemplateEx.Models
{
    [MetadataType(typeof(SupplierMetadata))]
    public partial class Supplier
    {
        // Note this class has nothing in it.  It's just here to add the class-level attribute.
    }

    public class SupplierMetadata
    {
        // Name the field the same as EF named the property - "FirstName" for example.
        // Also, the type needs to match.  Basically just redeclare it.
        // Note that this is a field.  I think it can be a property too, but fields definitely should work.

        [Required]
        [Display(Name = "Supplier Name")]
        public string Name;
    }
} 
```

我定义了一个控制器动作如下

```
 public ViewResult Details(int id)
    {
        Supplier supplier = db.Suppliers1.Single(s => s.ID == id);
        return View(supplier);
    } 
```

当我为此操作创建视图并为供应商实体选择详细信息脚手架时，以下是我得到的视图

```
@model TemplateEx.Models.Supplier

@{
    ViewBag.Title = "Details";
}

<h2>Details</h2>

<fieldset>
    <legend>Supplier</legend>

    <div class="display-label">CreateDate</div>
    <div class="display-field">
        @Html.DisplayFor(model => model.CreateDate)
    </div>

    <div class="display-label">Status</div>
    <div class="display-field">
        @Html.DisplayFor(model => model.Status)
    </div>

    <div class="display-label">Name</div>
    <div class="display-field">
        @Html.DisplayFor(model => model.Name)
    </div>
</fieldset>
<p>
    @Html.ActionLink("Edit", "Edit", new { id=Model.ID }) |
    @Html.ActionLink("Back to List", "Index")
</p> 
```

请注意 model.Name 有一个“名称”标签而不是“供应商名称”。我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T16:44:40.063

代替

```
<div class="display-label">Name</div> 
```

和

```
<div class="display-label">@Html.LabelFor(model => model.Name)</div> 
```

编辑 ：

对于第二个问题，请看这里 [我如何强制脚手架自动生成的代码在我的 asp.net mvc 3 的同一行显示 Label 和 EditorFor 文本字段](https://stackoverflow.com/questions/10298986/how-can-i-enforce-the-scaffolding-automatically-generated-code-to-display-the-la)（特别是最后一个答案）

# android - Android 平板中注册表单的 UI 布局

> ID：11037602
> 
> 赞同：0
> 
> 时间：2012-06-14T16:40:34.567
> 
> 标签：android, forms, user-interface, tablet

我正在为 android 3.0 平板电脑开发应用程序。此应用程序的一项活动包含用户注册表单。

这是我的初步 xml 布局，字段很少

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:padding="15dp" >

        <TextView
            style="@style/lable"
            android:text="Name" />

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="match_parent"
            android:orientation="horizontal" >

            <EditText
                android:id="@+id/firstName"
                style="@style/editText"
                android:hint="First Name"
                android:inputType="textPersonName" >

                <requestFocus />
            </EditText>

            <EditText
                android:id="@+id/lastName"
                style="@style/editText"
                android:hint="Last Name"
                android:inputType="textPersonName" >
            </EditText>
        </LinearLayout>

        <!-- USER NAME -->

        <TextView
            style="@style/lable"
            android:text="Choose your username" />

        <EditText
            android:id="@+id/userName"
            style="@style/editText"
            android:ems="10"
            android:hint="Username"
            android:inputType="textEmailAddress" />
    </LinearLayout>

</ScrollView> 
```

以下是对应的style.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="lable">
        <item name="android:layout_width">wrap_content</item>
        <item name="android:layout_height">wrap_content</item>
        <item name="android:textAppearance">?android:attr/textAppearanceMedium</item>
        <item name="android:paddingTop">10dp</item>
        <item name="android:textStyle">bold</item>
    </style>

    <style name="editText">
        <item name="android:layout_width">fill_parent</item>
        <item name="android:layout_height">wrap_content</item>
        <item name="android:textAppearance">?android:attr/textAppearanceMedium</item>

        <item name="android:layout_weight">1</item>
    </style>
</resources> 
```

添加几个字段后，我注意到屏幕上有很多空白空间。谁能告诉我在平板电脑 ui 中创建注册表单的正确安排是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:51:16.927

您可以尝试将名字和姓氏并排放置，以在水平方向占用更多空间，因为平板电脑的宽度大于高度。

姓名：*名字姓氏* 或姓名： *姓氏，名字*

如果可能，您也可以尝试使用片段在注册表单活动之前或之后显示活动。

# unix - `rm` 一个名为 '--help' 的文件？

> ID：11037603
> 
> 赞同：2
> 
> 时间：2012-06-14T16:40:35.510
> 
> 标签：unix, command-line, escaping

如何使用`rm`删除名为“--help”的文件？当我尝试时，它只显示帮助提示。

我最终打开文件浏览器将其删除。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-14T16:41:46.750

两种方法：

```
rm ./--help
rm -- --help 
```

后一种方法受到许多常见 UNIX 工具的支持（`--`按惯例表示“选项的结尾”，即其他所有内容都将是位置参数），并且在脚本中特别方便，当您不知道自己的数据时会处理。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T16:42:50.143

该`rm`命令将接受“--”来告诉它不再处理任何选项。

```
rm -- '--help' 
```

# java - JQuery - Ajax - Struts2 列表

> ID：11037608
> 
> 赞同：0
> 
> 时间：2012-06-14T16:40:53.593
> 
> 标签：java, jquery, ajax, struts2

我正在寻找一些帮助来获取我的 JQuery/Ajax 调用以从 Struts 操作返回列表并使用 s:iterator 使用列表元素填充 DIV。

我有以下 JQuery

```
 function lookupCustomerJs() {
        alert("lets start");
        $.ajax({  
            type: "POST",  
            url: "lookupCustomerAjax",  
            data: $('#lookupCustomer').serialize(), 
            success:function(response) {  
                alert("do stuff");
                $('div#custList').replaceWith($(response).find("div#custList"));
            },
            failure:function(response) {
                alert('Ajax call failed');
            },
            error:function(response) {
                alert(exception);
            }
        });  
    } 
```

我的页面中有一个 DIV，然后我想遍历列表

```
 <div id="custList">
                            <s:iterator status="stat" value="customerList" var="customer">
                                <s:param name="custFName" value="%{customer.firstname}" />
                            </s:iterator>
                        </div> 
```

还有我调用的 Action 方法，因为当我调试时，调试器会遍历代码。

```
private List<Customer> customerList;

public String lookupCustomerAjax() {

    dummyData();

    return SUCCESS;
} 
```

这成功地调用了我的 Action 方法，但我得到的只是“让我们开始”警报，然后什么都没有，没有错误，什么都没有！

所以我猜这只是 jQuery/Ajax success:function(response) { 没有正确触发，但不明白为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:56:40.510

可能是“lookupCustomerAjax”是无效的 url 或文件名。您应该尝试添加扩展名。

此外，为了进行故障排除，您应该连续使用 console.log(response) 以查看您实际上得到了结果。

# php - 如何使用 PHP POST 方法将 gps 数据从 android 应用程序正确上传到 XAMPP MYSQL？

> ID：11037611
> 
> 赞同：0
> 
> 时间：2012-06-14T16:41:09.420
> 
> 标签：php, android, mysql, sql, apache

我已经阅读了一些关于这里处理此问题的问题，但似乎无法完全理解我的问题我制作了一个简单的 android 应用程序，当在屏幕上按下按钮时检索位置数据。这应该会在 Toast 小部件中弹出，但它并没有像我想象的那样提交给 MySQL 数据库......

我正在使用 apache.http.client 并使用 POST 发送数据（通过 wifi 网络）。

代码如下：

```
package com.example.GpsTest;

import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;

import android.app.Activity;
import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class GpsTestActivity extends Activity {
    //Set parameters for location updates
    private static final long minimumDistanceChangeBeforeUpdate = 10; //Meters
    private static final long minimumUpdatePeriod = 10000; //In Milliseconds

    protected LocationManager locationManager;
    protected Button gpsRequestButton;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        gpsRequestButton = (Button) findViewById(R.id.gpsRequestButton);
        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, minimumUpdatePeriod, minimumDistanceChangeBeforeUpdate, new MyLocationListener());

    gpsRequestButton.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            showCurrentLocation();
        }
    });
    }   

    protected void showCurrentLocation() {
        Location location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);

        if (location != null){
            String alert = String.format("Location \n Longitude: %1$s \n Latitude: %2$s", location.getLongitude(), location.getLatitude());
            Toast.makeText(GpsTestActivity.this, alert, Toast.LENGTH_LONG).show();
        }
    }

    private class MyLocationListener implements LocationListener {
        public void onLocationChanged(Location location) {
            String alert = String.format("Location Updated \n Longitude: %1$s \n Latitude: %2$s", location.getLongitude(), location.getLatitude());
            Toast.makeText(GpsTestActivity.this, alert, Toast.LENGTH_LONG).show();
            postData(location);
        }

        public void onStatusChanged(String s, int i, Bundle b){
            Toast.makeText(GpsTestActivity.this, "Provider Status Updated", Toast.LENGTH_LONG).show();
        }

        public void onProviderDisabled(String s) {
            Toast.makeText(GpsTestActivity.this, "GPS Deactivated", Toast.LENGTH_LONG).show();
        }

        public void onProviderEnabled(String s) {
            Toast.makeText(GpsTestActivity.this, "GPS Activated", Toast.LENGTH_LONG).show();
        }
        public void postData(Location location) {
            // Create a new HttpClient and Post Header
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("192.168.1.229/appTesting/gpsdb.php");
            try {
                // Add your data
                List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
                nameValuePairs.add(new BasicNameValuePair("gpsLastKnown","location"));
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                // Execute HTTP Post Request
                HttpResponse response = httpclient.execute(httppost);
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
            } catch (IOException e) {
                // TODO Auto-generated catch block
            }
        } 
}} 
```

这是我正在使用的简单 PHP 脚本：

```
<?php
$con = mysql_connect("localhost","root","************");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("3dprotect", $con);

$sql="INSERT INTO gps (gpsLastKnown)
VALUES
('$_POST[gpsLastKnown]')";

if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }
echo "1 record added";

mysql_close($con);
?> 
```

就目前而言，没有数据写入数据库，也没有记录错误。让应用程序与数据库对话的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T17:05:57.607

尝试在 $_POST 数组中添加大括号

```
$sql="INSERT INTO gps (gpsLastKnown)
VALUES
('{$_POST[gpsLastKnown]}')"; 
```

此外，您能否记录发送到服务器的确切内容。IE 所有的 HTTP 流量。

# c# - C# - 无法从事件处理程序访问全局变量

> ID：11037612
> 
> 赞同：2
> 
> 时间：2012-06-14T16:41:10.863
> 
> 标签：c#, variables, reference, null, global

我有一个带有全局变量的 Windows 窗体应用程序 - 一个名为`testPath`.

此字符串用于保存路径 - 默认情况下是`C:\temp\`. 当用户单击按钮时，将创建此目录（如果它不存在）。

还有一个文本框控件，以防用户想要更改路径的值。

在按钮的事件处理程序中，我尝试访问`testPath`并得到一个空引用。

我不会更改`testPath`任何地方的值，除非我将它传入和传出文本框控件。

我究竟做错了什么？全局变量如何在一秒钟内有一些东西，然后它指向一个空引用？

这是完整的代码：

```
public string testPath = @"C:\temp\";

public MainForm()
{
     //Windows Designer call
     InitializeComponent();

     //Show the testPath in the textBox (using Invokes)
     this.textBox1.Invoke(new MethodInvoker(delegate { this.textBox1.Text = testPath; } ));

     //here, testPath contains 'C:\temp\'
}

//Button "Click" handler
private void Button1Click(object sender, EventArgs e)
{
     //here, testPath contains a null reference!

     //If the user changed testPath in the textBox, we need to save it again
     this.textBox1.Invoke(new MethodInvoker(delegate { testPath = this.textBox1.Text; } ));

     //Create the path
     if(!Directory.Exists(testPath)) //If it does not exist already
     {
         Directory.CreateDirectory(testPath); 
     }

     //...Do something else

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T16:48:14.993

我建议将其设为常数：

```
const string testPath = @"C:\temp\"; 
```

这将导致任何将值设置为编译器错误的尝试。使用该值无需更改即可工作。

* * *

根据评论进行编辑：

由于您想*更改*该值，我建议将其重新设计为属性：

```
private string _testPath = @"C:\temp\";
private string testPath 
{ 
    get { return _testPath; }
    set
    {
        _testPath = value;
    }
} 
```

然后，您可以在该行上设置一个断点`_testPath = value;`，并在调试器中查看究竟是什么将其设置为`null`. 更正此问题后，我建议修复命名以匹配标准 .NET 命名约定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T16:47:23.017

我会尝试将该字段标记`testPath`为只读，并遵循编译器错误。

这是关于 const 和 readonly 之间差异 [的教程。](http://www.switchonthecode.com/tutorials/csharp-tutorial-the-readonly-keyword)

*编辑*您可以查看为表单加载事件实现自定义处理程序并检查那里的状态。您还可以在构建对象、处理表单加载事件以及处理用户输入时使用 F10 逐步执行。请记住，刚进入函数时，所有变量在左大括号上显示为未初始化。您必须至少通过该功能一次才能看到它们。使用图钉在文本编辑器中密切关注您的变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T17:13:32.653

**更新**：我不确定你为什么需要这个公共变量。如果您只是想使用“C:\temp\”之类的初始值来初始化控件，用户可以根据需要对其进行编辑。如果是这种情况，请在设计视图中打开表单，右键单击文本框 > 转到属性。在属性窗口中，将 Text 属性更改为“C:\temp\”，完成此操作后，您的文本框将被初始化为“C:\temp\”。在事件处理程序中，您可以简单地编写

```
private void button1_Click(object sender, EventArgs e)
{
     if (!Directory.Exists(this.textBox1.Text.Trim()))
        {
            Directory.CreateDirectory(this.textBox1.Text.Trim());
        }

} 
```

**原始**：在表单初始化之后但在单击按钮之前，testPath 变量被修改为 null。由于它是一个公共变量，因此也可以从类外部访问和修改它。

重现此问题的一种简单方法 - 在 Program 类 > Main 方法中

```
[STAThread]
static void Main()
{
   Form1 obj = new Form1();
   obj.testPath = null;
   Application.Run(obj);
} 
```

建议： 1\. 将testPath设为常量或只读，判断是否被修改。2\. 如果您不需要公开访问说明符，请将其更改为私有。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T16:46:14.837

我建议不要在按钮单击事件范围之外声明路径，而是在方法中声明它。

像这样：

```
private void Button1Click(object sender, EventArgs e) 
{ 
     string testPath = @"C:\temp\"; 

     //Create the path if it does not exist      
     if(!Directory.Exists(testPath))      
          Directory.CreateDirectory(testPath);       
} 
```

# javascript - 将 Javascript 变量传递到 createlink 方法调用 Grails

> ID：11037614
> 
> 赞同：7
> 
> 时间：2012-06-14T16:41:16.447
> 
> 标签：javascript, variables, grails, parameter-passing

```
var search= document.getElementById('appMenu').value 
document.location.href= '${createLink(controller: 'application' , action:'ajaxAppSearch',   params: ['query': search])}' 
```

元素 appMenu 是一个文本字段，因此我获取用户在文本框中输入的值以传递给搜索控制器。但是，它一直告诉我 params 查询为空。似乎搜索没有被传递到 create link 方法中。有人有建议吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-14T16:48:59.970

Grails（控制器、GSP 和标签等）在服务器端工作。客户端的 JavaScript。这个链接是在向浏览器发送数据之前准备好的，在 JavaScript 可以将其变量传递给 GSP 标签之前。

但是您可以在服务器端准备基本链接，并在客户端添加额外的参数，使用 javascript，如：

```
var search= document.getElementById('appMenu').value;
document.location.href= '${createLink(controller: 'application' , action:'ajaxAppSearch')}?query=' + escape(search); 
```

# java - JTable 阻止所有排序

> ID：11037615
> 
> 赞同：2
> 
> 时间：2012-06-14T16:41:20.550
> 
> 标签：java, swing, jtable

是否可以防止在 JTable 上全部排序？基本上，当用户单击表头并且内容处于静态顺序时，我不希望发生任何事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T16:46:40.437

请参阅[Javadoc](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTable.html#setRowSorter%28javax.swing.RowSorter%29)：

> 公共无效 setRowSorter(RowSorter 排序器)
> 
> 参数：`sorter`- `RowSorter`; `null`关闭排序

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T17:41:34.280

> 基本上，当用户单击表头并且内容处于静态顺序时，我不希望发生任何事情。

基本上`JTable`没有任何Sorter，你必须删除代码行

```
- JTable#setAutoCreateRowSorter(true);

- table.setRowSorter(sorter);

- custom Comparator added as MouseEvent to the JTableHeader 
```

查看并阅读[有关排序和过滤的 JTable 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-09T21:41:13.597

当用户单击任何表标题列时禁用排序的最佳和简单方法：

1.  首先你需要在表头上创建一个鼠标点击监听器
2.  在它里面只有鼠标左键可用（使用 SwingUtilities）
3.  插入这行代码

    yourTableVariable.setRowSorter(null);

实际例子：

```
yourTableVariable.getTableHeader().addMouseListener(new MouseAdapter() //here you make the click avaible ONLY on Table Header 
    {
        @Override
        public void mouseClicked(MouseEvent arg0) 
        {
            if (SwingUtilities.isLeftMouseButton(arg0)) //here you select the mouse left click action 
            {
                yourTableVariable.setRowSorter(null); //here is disableing the sorting                  
            }
        }
    }); 
```

# iphone - UITableCellView 中的 UIButton 图像问题

> ID：11037617
> 
> 赞同：0
> 
> 时间：2012-06-14T16:41:24.977
> 
> 标签：iphone, ios, xcode, ios5

我正在制作一个简单的计时器应用程序。我有一个多行的 uitable。在那个表中我放了一个 UIButton。一切正常，到目前为止一切顺利，即我看到按钮出现在每一行中。接下来我需要为 UIButton 设置一个图像，例如，如果计时器正在运行，我想在 UIButton 中显示 stop_button_image，如果计时器已经启动，我想将按钮上的 UIImage 设置为 start_button_image

问题是，如果表被刷新，那么我会得到一个讨厌的回溯，这取决于我放置 UIButton setimage 代码的位置。这是我的代码供参考。

```
//WORKING CODE: (NOT THAT I WANT)
    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        //TESTING - Button
        UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];

        // Try to retrieve from the table view a now-unused cell with the given identifier.
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        // If no cell is available, create a new one using the given identifier.
        if (cell == nil)
        {
            // Use the default cell style.
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

            //TESTING - Button
            [button addTarget:self
                       action:@selector(timerStopStart:)
             forControlEvents:UIControlEventTouchDown];
            [button setTitle:@"Start/Stop" forState:UIControlStateNormal];
            button.frame = CGRectMake(5.0f, 5.0f, 72.0f, 77.0f);
            button.tag = indexPath.row;
            [cell addSubview:button];

    //THIS WORKS IF I PUT THIS HERE
            [button setImage:[UIImage imageNamed:@"button_pause.png"] forState:UIControlStateNormal];

        }
        else 
        {
             //NSLog(@"went here 2");
             button = (UIButton *) [cell viewWithTag:indexPath.row];
        }

//some other logic
    } 
```

//代码在这里中断

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
        {
            //TESTING - Button
            UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];

            // Try to retrieve from the table view a now-unused cell with the given identifier.
            UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

            // If no cell is available, create a new one using the given identifier.
            if (cell == nil)
            {
                // Use the default cell style.
                cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

                //TESTING - Button
                [button addTarget:self
                           action:@selector(timerStopStart:)
                 forControlEvents:UIControlEventTouchDown];
                [button setTitle:@"Start/Stop" forState:UIControlStateNormal];
                button.frame = CGRectMake(5.0f, 5.0f, 72.0f, 77.0f);
                button.tag = indexPath.row;
                [cell addSubview:button];

            }
            else 
            {
                 //NSLog(@"went here 2");
                 button = (UIButton *) [cell viewWithTag:indexPath.row];
            }

//CODE BREAKS HERE
[button setImage:[UIImage imageNamed:@"button_pause.png"] forState:UIControlStateNormal];

    //some other logic
        } 
```

问题是，当表格刷新时，它使用代码 button = (UIButton *) [cell viewWithTag:indexPath.row]; 调用该部分。我知道这只是一个参考。

Here is the error I get in iOS simulator. I really want to put that image code outside the cell==null check. Any clues how this can be done?

Here is the error that I get in the simulator

```
2012-06-14 12:39:27.246 Timers[5381:10a03] -[UITableViewCell setImage:forState:]: unrecognized selector sent to instance 0x73706e0
2012-06-14 12:39:27.247 Timers[5381:10a03] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UITableViewCell setImage:forState:]: unrecognized selector sent to instance 0x73706e0'
*** First throw call stack:
(0x150b052 0x16bbd0a 0x150cced 0x1471f00 0x1471ce2 0x136c6 0x7b5e0f 0x7b6589 0x7a1dfd 0x7b0851 0x75b322 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T16:51:08.627

The problem is probably when the indexPath.row is zero. In that case, you call `viewWithTag:0` but as the tag of any UIView is 0 by default, there are chances that a lot of your cell's subview have a tag with the value 0, not only your UIButton.

To avoid this issue, try adding a constant (like 100) to your indexPath.row before affecting it to the tag, so that your button at row 0 will have the tag 100 and not 0 (and button at row 1 will have the tag 101, and so on…), avoiding it to be confused with any other subview with tag 0.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T16:51:21.310

Yeah, this will fail for row 0.

```
button = (UIButton *) [cell viewWithTag:indexPath.row]; 
```

will return cell when indexPath.row is 0, because cell.tag is 0.

* * *

As a general note, this approach will not work. The first time you reuse a cell the button will have the wrong tag. For example, if you reuse the cell from row 2 in row 18, then the tag on the button will be 2, but the tag you look for is 18\. It will return `nil`.

why not define a constant `#define kMyStopStartButtonTag 12345` and use that constant the whole time.

```
if (cell == nil)
{
    …
    button.tag = kMyStopStartButtonTag;
    [cell addSubview:button];
    …
} else {
    button = (UIButton *) [cell viewWithTag:kMyStopStartButtonTag];
} 
```

# regex - 有没有办法在 Perl 正则表达式替换中直接使用对象的属性？

> ID：11037620
> 
> 赞同：1
> 
> 时间：2012-06-14T16:41:29.020
> 
> 标签：regex, perl, moose

我有一个 Perl Moose 对象，其中包含我想在正则表达式中用作替换字符串的属性。这个想法是使用类似的东西：

```
$full_string =~ s{FIND_THIS}{$self->replace_string}; 
```

Moose 对象的属性在哪里`$self->replace_string`使用。如上所述运行时，它不能按预期工作。正则表达式引擎认为 '$self' 是变量，而 '->' 箭头只是一个字符串。而不是属性的值，替换的输出最终看起来像：

```
ObjectName=HASH(0x7ff458f70778)->replace_string 
```

我知道克服这个问题的一个简单方法是将字符串放入一个新变量中。例如：

```
my $new_replace_string = $self->replace_string;
$full_string =~ s{FIND_THIS}{$new_replace_string}; 
```

我的问题是是否有办法避免创建新变量而直接使用对象的属性。（而且，理想情况下不必添加一行代码。）这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T17:03:37.980

最直接的方法是告诉 Perl 替换表达式是要计算的 Perl 代码。替换值将是该代码返回的值。

```
$full_string =~ s{FIND_THIS}{$self->replace_string}e; 
```

但是有一个技巧可以将表达式的结果插入字符串文字（这就是替换表达式）。

```
$full_string =~ s{FIND_THIS}{${\( $self->replace_string )}/; 
```

或者

```
$full_string =~ s{FIND_THIS}{@{[ $self->replace_string ]}/; 
```

这个想法是创建一个引用并使用解引用对其进行插值。首先，表达式在标量上下文中求值。在后者中，在列表上下文中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T16:45:16.147

`/e`将 s/// 的右侧评估为表达式：

```
$full_string =~ s/FIND_THIS/$self->replace_string/e; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T16:46:02.803

是的，您可以抛出[*eval*开关](http://perldoc.perl.org/perlop.html#s/PATTERN/REPLACEMENT/msixpodualgcer)( `/e`)。

```
$full_string =~ s{FIND_THIS}{$new_replace_string}e; 
```

# php - 托管在由单独域名指向的服务器上的网页，如何隐藏原始服务器路径？

> ID：11037621
> 
> 赞同：-1
> 
> 时间：2012-06-14T16:41:31.203
> 
> 标签：php, url-rewriting, webserver, hosting

我确信谷歌上有答案，但我不知道如何提出我的问题：

一个 php 网站托管在这样的服务器上：[http](http://sub.realserver.com/website/index.php) ://sub.realserver.com/website/index.php 现在我想将真实域名链接到它：[http ://therealwebsite.com](http://therealwebsite.com)

问题是，当用户访问：http://therealwebsite.com 时，他会在浏览其他页面时看到[http://sub.realserver.com/website/index.php 。](http://sub.realserver.com/website/index.php)

问题是如何隐藏这个 realserver 路径并用域名替换它？

谢谢

编辑：该网站与真实域名托管在不同的服务器上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:50:40.887

我假设域名和网站指向同一个服务器。

尽管您可以使用 URL 重写（适用于几乎所有流行的 Web 服务器），但更好的解决方案是设置您的 Web 服务器以提供该网站作为该域名的根。如何做到这一点完全取决于您使用的服务器软件。

在 apache 中，您需要创建一个所谓的虚拟主机，将其配置为响应您的域名并将其 DocumentRoot 指令设置为您的站点所在的目录。

有关示例，请参见[http://httpd.apache.org/docs/2.0/vhosts/examples.html 。](http://httpd.apache.org/docs/2.0/vhosts/examples.html)

编辑：我刚刚读了你的评论。恐怕你的选择相当有限。最简单但也是最肮脏的解决方案是创建一个带有 IFRAME 的页面，该页面从真实服务器加载站点。您还可以在托管您的域名的服务器上托管 PHP 代理，并让它代理您的网站

[http://sourceforge.net/projects/php-proxy/](http://sourceforge.net/projects/php-proxy/)

（我从来没有用过这个，我也不隶属于这个项目，但它似乎声称可以做你想做的事。）

我强烈建议您更新域名上的 DNS 记录，使其指向托管您网站的服务器，并在其中添加虚拟主机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T16:45:19.933

你可以用asp来做这件事，这里有一个很好的资源-

[http://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx](http://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx)

# java - 将变量传递给 Java 中的 ActionListener

> ID：11037622
> 
> 赞同：7
> 
> 时间：2012-06-14T16:41:34.760
> 
> 标签：java, swing, jbutton, actionlistener

我有类似下面的代码：

```
 for(int i=0;i<10;i++){
        button=new JButton(buttons[i]);
        button.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent e) {
                setPage(i);
            }
        });
        menu.add(button);
    } 
```

但是，该变量`i`未在 ActionListener 类的范围内定义。如何传递变量？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-14T18:37:26.470

一种完全不同的方法是向按钮添加一个属性，然后在您的操作侦听器中检索该属性。例如

```
button=new JButton(buttons[i]);
button.putClientProperty( "page", i );
button.addActionListener(new ActionListener(){
   public void actionPerformed(ActionEvent e) {
      setPage((Integer)((JButton)e.getSource()).getClientProperty( "page" ));
   }
}); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-06-14T16:50:18.630

除了 Hovercraft 的回答之外，您还应该注意，您不会被迫为您的听众使用匿名类。气垫船答案的代码类似于以下代码：

```
private class PageActionListener implements ActionListener {
    private int page;

    public PageActionListener(int page) {
        this.page = page;
    }

    public void actionPerformed(ActionEvent e) {
        setPage(page);
    }
}

...

for(int i = 0; i < 10; i++){
    button = new JButton(buttons[i]);
    button.addActionListener(new PageActionListener(i));
    menu.add(button);
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-06-14T16:43:56.623

该变量`i` *实际上*在 ActionListener 的范围内，但由于您试图在内部类中使用局部变量，因此该变量必须是 final 的。因此，您可以为此使用最终变量：

```
for(int i=0;i<10;i++){
    final int index = i;
    button=new JButton(buttons[i]);
    button.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent e) {
            setPage(index);
        }
    });
    menu.add(button);
} 
```

# ruby - 是否定义了 Ruby 散列的 each_value 的顺序？

> ID：11037625
> 
> 赞同：2
> 
> 时间：2012-06-14T16:41:43.200
> 
> 标签：ruby, associative-array

Ruby 返回的值的顺序是否以`Hash::each_value{ |val| block }`某种方式定义？即对于给定的哈希，循环迭代中的值的顺序总是*相同吗？

我想知道是不是这样，因为哈希的键值对不像数组的值那样排序。

给定以下示例：

```
myhash = { :a => 100, :b => 200, :z => 9, :e => 101 }
myhash.each_value { |val|
  puts val
} 
```

Ruby 是否确保它始终*打印

```
100
200
9
101 
```

* * *

**如果已定义，则有额外的问题：定义**
订单的先决条件是什么？它是否仅适用于硬编码的哈希作为示例？

* * *

[*]：“ *always ”**在每次执行时以及在任何运行 Ruby 1.9+ 的系统上都*应该读作'。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T16:44:25.190

在 Ruby 1.8 中，散列是没有顺序的，值会以你不能依赖的任意顺序返回。在 Ruby 1.9 中，哈希是根据插入键的时间排序的（第一个插入首先定位，等等）。

您在脚注中指定“'always' 应被读作'在每次执行时以及在任何运行 Ruby 1.9+ 的系统上'。”。根据“总是”的定义，答案是“是”；）

来自[Ruby 1.8.7 哈希](http://ruby-doc.org/core-1.8.7/Hash.html)文档：

> 您通过键或值遍历哈希的顺序可能看起来是任意的，并且通常不会在插入顺序中。

来自[Ruby 1.9.3 哈希](http://ruby-doc.org/core-1.9.3/Hash.html)文档：

> 哈希按照插入相应键的顺序枚举它们的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T16:43:32.623

在 Ruby 1.9 中，顺序是插入顺序。

大约三年前的一些信息，当时这是新闻：

*   [YCombinator 讨论了一个可能的用例](http://news.ycombinator.com/item?id=466592)
*   [还有一些内部信息](http://www.igvita.com/2009/02/04/ruby-19-internals-ordered-hash/)

# sql - 在保留 ID 的同时获取不同的名称、地址、最大值（日期）

> ID：11037626
> 
> 赞同：1
> 
> 时间：2012-06-14T16:41:44.420
> 
> 标签：sql, sql-server-2008

我有以下表结构：

```
ID | fname | lname | street | date 
```

我正在尝试获取不同的 fname、lname、street 和 max(date)，但也保留匹配行的 id。因此，可能会有多行匹配的 fname、lname、street 但都具有不同的 ID

我找到了一些几乎适合这个但不完全适合的解决方案。如果这已被涵盖，我深表歉意。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:51:59.657

尝试以下操作：

```
;WITH CTE AS
(
    SELECT *, ROW_NUMBER() OVER(PARTITION BY fname, lname, street ORDER BY [Date] DESC) RN
    FROM yourTable
)
SELECT ID, fname, lname, street, [date]
FROM CTE
WHERE RN = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T16:51:42.657

假设 max(date) 在 max(id) 中：

```
select max(ID), fname, lname, street, max(date)
from tablename
group by fname, lname, street 
```

# c - c中的浮点模数

> ID：11037631
> 
> 赞同：0
> 
> 时间：2012-06-14T16:41:50.667
> 
> 标签：c, floating-point, integer, floating-point-conversion

我在编译以下程序时遇到非法使用浮点错误。请让我知道我在哪里犯了错误。

```
#include<stdio.h>
#include<conio.h>

void main()
{
    float a;
    clrscr();
    printf("\n Enter the num : ");
    scanf("%f", &a);

    if ( a >= 0 )
    {
        if ( (a % 2) == 0 ) //ERROR HERE
        {
            printf("\n You entered a positive even num");
        }
        else
        {
            printf("\n You entered a positive odd num");
        }
    }
    else
    {
        if ( (a % 2) == 0 ) //ERROR HERE
        {
            printf("\n You entered a negative even num");
        }
        else
        {
            printf("\n You entered a negative odd num");
        }
    }
    getch();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T16:42:43.217

因为`%`适用于整数类型。使用[`fmod()`](http://en.cppreference.com/w/cpp/numeric/math/fmod).

[但像往常一样，对浮点类型](https://stackoverflow.com/questions/9542391/float-double-equality-with-exact-zero)[执行相等比较 (`==`](https://stackoverflow.com/questions/9542391/float-double-equality-with-exact-zero) ) 时要非常小心。也许在您的情况下，最好始终使用整数类型。

# c++ - 验证将动画 GIF 提交到 OpenCV imread() 函数

> ID：11037632
> 
> 赞同：1
> 
> 时间：2012-06-14T16:41:51.633
> 
> 标签：c++, validation, image-processing, opencv, animated-gif

我有一个 OpenCV C++ 程序，它读取用户提交的图像（使用 imread() 函数）并处理它们。在开始处理之前，我需要验证图像不是动画 GIF，因为 OpenCV 在尝试处理动画 GIF 时会产生错误。

有没有一种方法可以区分静态 GIF 和动画 GIF，以便在用户提交动画 GIF 时抛出错误？

# php - 404重定向不起作用

> ID：11037633
> 
> 赞同：0
> 
> 时间：2012-06-14T16:41:52.460
> 
> 标签：php, wordpress

嗨，我正在输入一个插件，该插件在不存在的页面上显示页面而不是发送 404 页面

我知道我可以编辑到 404.php 文件来执行此操作，但我需要将其放入插件中。

如果我删除 if 语句，那么它在所有页面上都有效，这不是我想要的。
所以我把 if(is_404()) 语句放进去，但它现在似乎根本不起作用......

```
 function da_404_redirect()
    {
      if(is_404())
      {      
        query_posts('page_id=2');
        status_header( "200" );
      }
    }
    add_action('init','da_404_redirect'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T00:10:50.583

您的操作钩子在 wordpress 周期中可能为时过早，无法知道它是否是 404。[http://codex.wordpress.org/Plugin_API/Action_Reference/init](http://codex.wordpress.org/Plugin_API/Action_Reference/init)。尝试使用稍后的操作挂钩。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T00:22:27.387

正如尼克上面所说，你可能会陷入迟到的事件。以我的经验，[template_redirect](http://adambrown.info/p/wp_hooks/hook/template_redirect)是最好的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T00:28:27.447

要重定向，请不要`init`挂上 ，尤其是在使用 is_404() 之类的条件标记时。任何条件标签仍将返回`false`in `init`。

使用：`template_redirect`相反，或者`pre_get_post`如果您需要更改某些内容`WP_Query`

# jquery - jQuery 动画分步运行

> ID：11037634
> 
> 赞同：-2
> 
> 时间：2012-06-14T16:41:59.860
> 
> 标签：jquery, jquery-animate

我想创建一个看起来像闪光灯的动画。 [jsFiddle](http://jsfiddle.net/LwAVz/1/)
我希望每行中的每个 div 一个一个地改变颜色。但是 animate 函数是一次性调用的。请协助/指导我如何做我想做的事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:46:19.597

让我向您介绍一个名为 setInterval() 的魔法。从这里开始阅读：[https ://developer.mozilla.org/en/window.setInterval](https://developer.mozilla.org/en/window.setInterval)

# php - PHP cURL Json Post - 做错事

> ID：11037635
> 
> 赞同：0
> 
> 时间：2012-06-14T16:42:00.987
> 
> 标签：php, json, curl

我是 php 新手，我正在尝试创建一个简单的示例来调用我们公司的 api。昨晚我让 NetBeans IDE 7.1.2 工作（耶），但我似乎无法让以下代码向我展示任何东西。我可以在调试器中运行它。我可以通过它。我什至没有错误地走到最后，但 curl_exec 只返回 0。我添加了 CURLOPT_PROXYPORT 以便我可以让提琴手查看流量，但提琴手什么也看不到。我也试图将其作为 php 命令行运行（如果有任何影响）。

我知道我在做一些愚蠢的事情……但这就是愚蠢的问题。

```
<?php
$url = 'https://target.boomerang.com/api/JobCreate';
$authToken = 'phptest';
$data = array(
    "emailHTML" => "Howdy",
    "jobKind" => "email",
    "senderEmail" => "bob@boomerang.com",
    "subject" => "My howdy email"
);
$data_string = json_encode($data);
$headers = array(
    'Content-type: application/json',
    'auth_token: ' . $authToken,
    'Accept: application/json',
    'Expect:'
);
$ch = curl_init();
$args = array(
    CURLOPT_URL => $url,
    CURLOPT_FOLLOWLOCATION => TRUE,
    CURLOPT_RETURNTRANSFER => TRUE,
    CURLOPT_POST => TRUE,
    CURLOPT_POSTFIELDS => $data_string,
    CURLOPT_HTTPHEADER => $headers,
    CURLOPT_PROXYPORT => "localhost:8888"
);
curl_setopt_array($ch, $args);
$res = curl_exec($ch);
$res_data = json_decode($res, true);
print($res_data);
?> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T17:14:30.700

那么问题是由 SSL 证书不匹配引起的吗？我想它可以通过添加这个来解决......

```
CURLOPT_SSL_VERIFYHOST => 0,
CURLOPT_SSL_VERIFYPEER => 0, 
```

...进入 $args 数组。

# unit-testing - RhinoMocks - 获取传递给索引器的值 (this[])

> ID：11037639
> 
> 赞同：1
> 
> 时间：2012-06-14T16:42:22.983
> 
> 标签：unit-testing, arguments, rhino-mocks

我需要找出传递给索引器的值。

我需要测试的代码（c#）如下：

```
string cacheKey = GetCacheKey(cacheKeyRequest);
string cachedValue = myCache[cacheKey] as string; 
```

所以，我需要能够识别传递给索引器的“cacheKey”的值。

我尝试使用缓存对象的 Mock 进行此操作：

```
var cache = MockRepository.GenerateMock<WebDataCache>(); 
```

这个想法是在代码执行后，我将查询模拟以识别已传递​​到索引器的值：

```
var actualCacheKey = cache.GetArgumentsForCallsMadeOn(a => a["somevalue"], opt => opt.IgnoreArguments())[0][0].ToString(); 
```

这给了我一个编译错误：只有赋值、调用、递增、递减和新对象表达式可以用作语句。

我看到了一个建议，通过以下方式使它成为一个函数：

```
var actualCacheKey = cache.GetArgumentsForCallsMadeOn(a => a["somevalue"] = null, opt => opt.IgnoreArguments())[0][0].ToString(); 
```

现在可以编译，但会引发运行时 InvalidOperationException：没有设置要验证的期望，确保操作中的方法调用是虚拟 (C#) / 可覆盖 (VB.Net) 方法调用。

有什么建议么？[正在使用 RhinoMocks.3.6.1]

提前谢谢了

格里夫

PS - 我之前曾在[http://groups.google.com/group/rhinomocks](http://groups.google.com/group/rhinomocks)上发布过此内容，但几天后，观看次数仍然低得令人沮丧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T09:37:45.167

异常告诉你到底发生了什么：

> InvalidOperationException：没有设置要验证的期望，请**确保**操作中的**方法**调用是**虚拟**(C#) / 可覆盖 (VB.Net) 方法调用。

这意味着，为了让 Rhino 正常工作（或者为了让 Castle 生成[工作代理](https://stackoverflow.com/a/10796367/343266)），你的索引器必须是虚拟的。如果你做不到，Rhino 不会在这种情况下帮助你。

将索引器设为虚拟后，任务就很简单了：

```
var cache = MockRepository.GenerateMock<WebDataChache>();
cache.Expect(c => c["SomeKey"]).Returns("SomeValue");

// perform actual test

cache.VerifyAllExpectations(); 
```

这可确保使用 访问缓存`["SomeKey"]`。如果键值不同，则测试将失败`VerifyAllExpectations`。

# variables - 将变量从一个活动发送到另一个活动

> ID：11037643
> 
> 赞同：5
> 
> 时间：2012-06-14T16:42:34.807
> 
> 标签：variables

我有一个存储电话号码的屏幕，然后转到另一个屏幕并启动活动的主要部分，我在其中发送文本消息，我试图获取我在第一个活动中输入的号码。我有发送消息的所有代码，但它不会从以前的活动中获取号码。这是我的第一个活动的代码：

```
public class StoreNumberActivity extends Host_Setting_PageActivity {
     /** Called when the activity is first created. */
    @Override

     public void onCreate(Bundle savedInstanceState) {
            super.on``Create(savedInstanceState);
            setContentView(R.layout.notificationsettings);

            final EditText editText= (EditText) findViewById(R.id.HostPhoneNumber);

             //Juston class to schedule edit
            Button Save = (Button) findViewById(R.id.SaveBtn);
            Save.setOnClickListener(new View.OnClickListener() {
                public void onClick(View view) {
                    Toast.makeText(StoreNumberActivity.this, "Number was Saved Successfully", Toast.LENGTH_LONG).show();

                }
            });
             Button Send = (Button) findViewById(R.id.SendBtn);
              Send.setOnClickListener(new View.OnClickListener() {
                  public void onClick(View view) {
                      String Number  =  editText.getText().toString();
                      Intent myIntent = new Intent(StoreNumberActivity.this, Host_Setting_PageActivity.class);
                      myIntent.putExtra("Phone Num", Number);
                      startActivity(myIntent);
                  }

and my code from the second activity:

 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    /** setting the view of the activity to xml */
    setContentView(R.layout.messageme);
    final Bundle bundle = getIntent().getExtras();

    final EditText editText= (EditText) findViewById(R.id.yourname);
    final EditText phonenumber= (EditText) findViewById(R.id.phone);
    final EditText emailaddress= (EditText) findViewById(R.id.email);
    final EditText messagebox= (EditText) findViewById(R.id.messages);
    final EditText number = (EditText) findViewById(R.id.HostPhoneNumber);

    button= (Button) findViewById(R.id.btn);
    button.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
    // TODO Auto-generated method stub
        Intent myIntent = getIntent(); // this is just for example purpose
        myIntent.getStringExtra("PhoneNum");
        String Number = bundle.getString("Phone Num");
        String Name  =  editText.getText().toString();
        String Phone  = phonenumber.getText().toString();
        String Email  = emailaddress.getText().toString();
        String Message  = messagebox.getText().toString();

        sendSMS(Number, "Name: " + Name + "\n" + "\n" + "Email: " + Email + "\n" + "\n" + "Phone: " + Phone + "\n" + "\n" + Message);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T16:56:21.420

以下是一些 StackOverflow 答案，它们可能会满足您的需求：

[在活动android之间传递值](https://stackoverflow.com/questions/5852677/pass-value-between-activity-android "在活动android之间传递值")

[如何在 Android 中的活动之间传递数据？](https://stackoverflow.com/questions/2091465/how-do-i-pass-data-between-activities-in-android "如何在 Android 中的活动之间传递数据？")

# c++ - 如何通过可变参数构造函数调用复制构造函数？

> ID：11037644
> 
> 赞同：13
> 
> 时间：2012-06-14T16:42:41.183
> 
> 标签：c++, templates, c++11, variadic-templates

在下面的代码中，可变参数构造函数被调用了两次。如何在适当的时候调用复制构造函数而不是可变参数构造函数的单参数版本？

```
#include <iostream>

struct Foo
{
    Foo(const Foo &)
    {
        std::cout << "copy constructor\n";
    }

    template<typename... Args>
    Foo(Args&&... args)
    {
        std::cout << "variadic constructor\n";
    }

    std::string message;
};

int main()
{
    Foo f1;
    Foo f2(f1); // this calls the variadic constructor, but I want the copy constructor.
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-14T16:48:11.840

这实际上与构造函数是可变参数的事实无关。以下具有非可变构造函数模板的类表现出相同的行为：

```
struct Foo
{
    Foo() { }

    Foo(const Foo& x)
    {
        std::cout << "copy constructor\n";
    }

    template <typename T>
    Foo(T&& x)
    {
        std::cout << "template constructor\n";
    }

}; 
```

问题是构造函数模板是更好的匹配。要调用复制构造函数，需要进行限定转换以将非 const 左值绑定`f1`到`const Foo&`（必须添加 const 限定）。

要调用构造函数模板，不需要转换： `T`可以推导出为`Foo&`，在引用折叠（`Foo& &&`-> `Foo&`）之后，给出参数`x`类型`Foo&`。

您可以通过提供具有非常量左值引用参数的第二个复制构造函数来解决此问题`Foo&`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-14T16:46:17.507

`const` `Foo&`除了传统的复制构造函数之外，只需提供一个完全匹配的重载，即带有非的重载。然后您可以通过显式转换委托调用：

```
Foo(Foo& other) : Foo{const_cast<Foo const&>(other)} { } 
```

# c# - 如何动态调用接收回调作为参数的 dll 方法？

> ID：11037645
> 
> 赞同：0
> 
> 时间：2012-06-14T16:42:42.353
> 
> 标签：c#, reflection, callback, invoke

**概述：**

我正在编写一个应用程序来动态加载 .dll 并调用它们的方法。

由于 .dll 在后台执行繁重的 i/o，因此我进行了回调以通知 UI “那里”发生的事情

**代码片段：**

```
 dllName = (string) e.Argument;

            // Assembling Complete path for the .dll file
            completePath       = Path.Combine(ConfigurationManager.AppSettings["DllsFolder"], dllName);
            Assembly assembler = Assembly.LoadFrom (completePath);

            // Creating Instance of Crawler Object (Dynamically)
            dllWithoutExtension = Path.GetFileNameWithoutExtension (dllName);
            Type crawlerType    = assembler.GetType (dllWithoutExtension + ".Crawler");
            object  crawlerObj  = assembler.CreateInstance (crawlerType.FullName);

            // Fetching reference to the methods that must be invoked
            MethodInfo crawlMethod       = crawlerType.GetMethod ("StartCrawling");
            MethodInfo setCallbackMethod = crawlerType.GetMethod ("SetCallback"); 
```

到目前为止，一切都很好。问题是，即使我已经声明了“回调”方法

```
public void Notify (string courseName, int subjects, int semesters)
    {
        string course = courseName;
        int a = subjects;
        int b = semesters;
    } 
```

此代码有效（只是为了测试回调声明是否有效）

```
 Crawler crawler = new Crawler();
             crawler.SetCallback (Notify);
             crawler.StartCrawling(); 
```

虽然这不起作用（这是我要解决的问题。动态调用 .dll 方法，将回调作为参数传递）

```
setCallbackMethod.Invoke(crawlerObj, new object[] { Notify }); // this method fails, bc its a callback parameter
crawlMethod.Invoke(crawlerObj, new object[] {true}    ); // This method works, bc its a bool parameter 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:12:16.980

我假设您有一个像这样的委托类型，用于将方法传递给`SetCallback`：

```
public delegate void CrawlerCallback(string courseName, int subjects, int semesters); 
```

`Notify`然后，如果您将其转换为这种委托类型，则可以传递该方法，如下所示：

```
setCallbackMethod.Invoke(crawlerObj, new object[] { (CrawlerCallback)Notify }); 
```

# php - 带有 Json 数组的 Jquery Ui Auto 建议

> ID：11037648
> 
> 赞同：0
> 
> 时间：2012-06-14T16:42:47.897
> 
> 标签：php, javascript, jquery-ui-autocomplete

我正在使用 jquery UI 自动完成在列表中给出项目名称建议。我提供了一个项目名称列表作为 php 文件中的 json 数组，如下所示。

```
function getProjectList($projectList) {
    foreach ($projectList as $project) {
        $jsonArray[] = array('name' => $project['projectName'], 'id' => $project['projectId']);
    }

    $jsonString = json_encode($jsonArray);
    return $jsonString;
 } 
```

我将整个项目名称列表添加到一个 javascript 变量中。

```
var projectsForAutoComplete=<?php echo $timesheetForm->getProjectListAsJson(); ?>; 
```

这个项目列表有超过 10000 个项目，我有 20 个项目名称文本框，它们应该提供自动建议。因此，当我尝试在加载时按以下方式执行此操作时，由于 js 的更高进程，页面需要 30 秒才能加载。

```
$(".project").autocomplete(projectsForAutoComplete, {

    formatItem: function(item) {
    var temp = $("<div/>").html(item.name).text();
        return temp.replace("##", "");
    }
    ,
    matchContains:true
}) 
```

所以我需要在按键事件中加载自动建议，就像 Jquery 文档中的演示一样。[http://jqueryui.com/demos/autocomplete/#remote-jsonp](http://jqueryui.com/demos/autocomplete/#remote-jsonp)

但是该示例显示了如何使用远程 json 源来执行此操作。我可以对本地 json 数组做同样的事情吗？可能吗。有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T17:12:42.563

如果页面上已经有 json 数组，那么您可以简单地将其包含为源

```
source: projectsForAutoComplete 
```

但是，自动完成希望它的源是一维数组，而您的数组是二维的。您需要创建两个数组，将字符串作为源提供一个数组，然后编写一个函数将名称映射到 id，或者执行类似于 jQueryUI 自动完成文档中的组合框示例的操作。

# c++ - 您可以在类的初始化列表中使用 Lambda 吗？

> ID：11037650
> 
> 赞同：10
> 
> 时间：2012-06-14T16:42:50.540
> 
> 标签：c++, lambda, c++11

我正在尝试使用 C++11 Lambda 来初始化`const`类的成员变量。

一个非常简化的例子：

```
class Foo
{
public:
    const int n_;
    Foo();
};

Foo::Foo()
:   n_( []() -> int { return 42; } )
{
}

int main()
{
    Foo f;
} 
```

在 MSVC10 中，这会产生：

```
error C2440: 'initializing' : cannot convert from '`anonymous-namespace'::<lambda0>' to 'const int' 
```

在[IDEONE 中](http://ideone.com/xmTYR)，这会产生：

```
prog.cpp: In constructor 'Foo::Foo()':
prog.cpp:9:34: error: invalid conversion from 'int (*)()' to 'int' 
```

我开始意识到我不能在类的初始化列表中使用 lambda。

我可以吗？如果是这样，正确的语法是什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-14T16:45:51.130

您正在尝试从 lambda 转换为 int - 您应该改为调用 lambda：

```
Foo::Foo()
:   n_( []() -> int { return 42; }() ) //note the () to call the lambda!
{
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-14T16:45:15.120

您的变量声明为`int`.

你想*调用*lambda 吗？这应该有效：

```
n_(([]() -> int { return 42; })()) 
```

或者你想要一个类型的变量`std::function<>`？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T16:46:00.110

您正在创建一个 lambda，正如编译器所述，您正在尝试将 lambda 本身存储在 n_ 中。

# r - 操作数据框列表和列表

> ID：11037652
> 
> 赞同：0
> 
> 时间：2012-06-14T16:42:53.683
> 
> 标签：r

```
A = data.frame( a = c(1:10), b = c(11:20) )
B = data.frame( a = c(101:110), b = c(111:120) )
C = data.frame( a = c(5:8), b = c(55:58) )

L = list( list(B), list(A,C), list(B,C,A), list(B,C) )

InputList = InputList = list(c(0.9,0.8),c(0.98,0.5),c(1, 1),c(1.5,1.2)) 
```

我有两个列表 L（向量列表）和 InputList（数据框列表列表）。我必须在列表 L 中搜索向量 (1,1) 的位置，并从 InputList 返回相应的数据帧列表

例如在上面的示例中，向量 (1,1) 是 Inputlist 的第三个元素，所以我必须从 L 返回第三个数据帧列表是 List (B,C,A)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:08:05.997

我假设您有一种定义测试向量的方法。在您的示例中，您使用了`c(1, 1)`.

```
test_vector <- c(1, 1) 
```

定义一个执行您想要的功能。如果 InputList 中的值与您的相同，则返回与索引匹配的`test_vector`元素。`L``x`

```
myfun <- function(x, test_vec=test_vector) {
  if(identical(InputList[[x]], test_vec)) {
    return(L[[x]])
  }
}

out <- lapply(seq_along(InputList), myfun) 
```

但是，这`NULL`会在不匹配的地方返回。下面的步骤删除`NULL`列表中的 s。

```
> out[!sapply(out, is.null)]
[[1]]
[[1]][[1]]
     a   b
1  101 111
2  102 112
3  103 113
4  104 114
5  105 115
6  106 116
7  107 117
8  108 118
9  109 119
10 110 120

[[1]][[2]]
  a  b
1 5 55
2 6 56
3 7 57
4 8 58

[[1]][[3]]
    a  b
1   1 11
2   2 12
3   3 13
4   4 14
5   5 15
6   6 16
7   7 17
8   8 18
9   9 19
10 10 20 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T17:08:29.803

```
test<-mapply(function(x,y){paste(x,collapse="~")==y},InputList,paste(c(1,1),collapse="~"))
L[test] 
```

# javascript - 在 Internet Explorer 中调试 Javascript：显示未更新

> ID：11037653
> 
> 赞同：2
> 
> 时间：2012-06-14T16:42:54.707
> 
> 标签：javascript, internet-explorer, debugging

我正在尝试在 Internet Explorer（IE9 包括 IE8 模式）中使用 JavaScript 调试间歇性的、可能与时间相关的绘图问题。

使用开发人员工具，我逐步完成了创建、样式和显示元素的行，但实际的浏览器窗口保持不变（并且大部分时间都显示 Windows“无响应”标题文本），所以我不能看看什么时候发生。

使用 Firefox 和 Firebug，我可以在每一步看到主窗口更新。但遗憾的是这个问题在FF中没有出现，所以我不能在那里调试。

我在网上搜索并查看了有关使用开发人员工具的 MS 文章，但我找不到任何关于单步执行 JavaScript 并查看每个步骤的结果的讨论。我的系统有问题吗，或者这是不可能的？

64 位 Windows 7 上的 32 位 IE9，以防万一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:58:22.773

如果您能够单步执行 javascript 代码，但浏览器没有刷新并且崩溃，那么您最好的调试方法可能是隔离问题。假设您正在对某段代码做五件事。将其简化为一件事，并逐渐在上面堆积不同的过程。

不确定这是否是您正在寻找的答案，但我之前遇到过与 IE 9 类似的问题，所以如果您提供一些可以复制的代码片段，我可以进一步帮助您。

**更新** 如果您遇到 IE 的间歇性问题，请确保添加元标记，以便 IE 在您的代码中遇到问题后不会加载怪癖模式。添加以下标签。更多信息[在这里](http://msdn.microsoft.com/en-us/library/ms533876%28v=vs.85%29.aspx)

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" > 
```

# javascript - DOM 树操作（document.createElement）代码复用

> ID：11037654
> 
> 赞同：1
> 
> 时间：2012-06-14T16:42:54.783
> 
> 标签：javascript, html, dom, domdocument, createelement

所以基本上，我已经多次遇到这个问题，这让我非常沮丧。

我想做的是有这样的代码：

```
node = document.createElement("option");
textbox = document.createTextNode(currentday.getFullYear() + i);
node.value = currentday.getFullYear() + i;
node.appendChild(textbox);
document.getElementById("pick_up_year").appendChild(node);
document.getElementById("return_year").appendChild(node); 
```

但是此代码仅将节点附加到 return_year （显然是一个选择元素）。

如果我重复这样的代码，它确实有效：

```
node = document.createElement("option");
textbox = document.createTextNode(currentday.getFullYear() + i);
node.value = currentday.getFullYear() + i;
node.appendChild(textbox);
document.getElementById("pick_up_year").appendChild(node);
node = document.createElement("option");
textbox = document.createTextNode(currentday.getFullYear() + i);
node.value = currentday.getFullYear() + i;
node.appendChild(textbox);
document.getElementById("return_year").appendChild(node); 
```

但这并不优雅，是吗？为什么我被迫重用代码，有没有简单的方法解决这个问题？

HTML基本上是这样的：

```
<select id="pick_up_days" name="pick_up_day">
    <option value="nojs">Please enable JavaScript</option>
</select>
<select id="pick_up_year" name="pick_up_year">
    <option value="nojs">Please enable JavaScript</option>
</select> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T16:47:01.630

您可以尝试使用[cloneNode](https://developer.mozilla.org/en/DOM/Node.cloneNode)

```
document.getElementById("pick_up_year").appendChild(node);
document.getElementById("return_year").appendChild(node.cloneNode(true)); 
```

# c++ - boost::detail::spinlock_pool 中的虚假共享？

> ID：11037655
> 
> 赞同：16
> 
> 时间：2012-06-14T16:43:03.903
> 
> 标签：c++, boost, c++11, shared-ptr, boost-thread

我遇到了这个 SO [question](https://stackoverflow.com/questions/8007186/read-write-thread-safe-smart-pointer-in-c-x86-64)并阅读它最终导致我查看`boost::detail::spinlock_pool`.

的目的是通过对s 地址进行散列`boost::detail::spinlock_pool`从 s 数组中进行选择来减少对全局自旋锁的潜在争用。这似乎是一个合理的解决方案，但当前（Boost v1.49）版本的实现似乎存在问题。`spinlock``shared_ptr`

`spinlock_pool`管理一个由 41 个`spinlock`实例组成的静态分配数组。看来，`sizeof(spinlock)==4`对于我所查看的平台——这意味着在 x64 上使用 64 字节缓存线，`spinlock`每个缓存线将有 16 秒。

**即整个阵列跨越所有2 1/2 高速缓存行。**

**即一个随机自旋锁与另一个错误共享的概率为 40%。**

...首先，这几乎完全违背了游泳池的目的。

我的分析是正确的还是我遗漏了一些重要的东西？

**更新：** 我终于写了一个小基准程序：

```
#include <boost/shared_ptr.hpp>
#include <boost/thread.hpp>
#include <boost/timer.hpp>
#include <iostream>
#include <vector>
#include <stdlib.h>

using namespace std;

enum { BufferSize = 1<<24,  SLsPerCacheLine = 1 };

int          ibuffer[BufferSize];

using boost::detail::spinlock;
size_t nslp = 41;
spinlock* pslp = 0;

spinlock& getSpinlock(size_t h)
{
  return pslp[ (h%nslp) * SLsPerCacheLine ];
}

void threadFunc(int offset)
{
  const size_t mask = BufferSize-1;
  for (size_t ii=0, index=(offset&mask); ii<BufferSize; ++ii, index=((index+1)&mask))
  {
    spinlock& sl = getSpinlock(index);
    sl.lock();
    ibuffer[index] += 1;
    sl.unlock();
  }
};

int _tmain(int argc, _TCHAR* argv[])
{
  if ( argc>1 )
  {
    size_t n = wcstoul(argv[1], NULL, 10);
    if ( n>0 )
    {
      nslp = n;
    }
  }

  cout << "Using pool size: "<< nslp << endl;
  cout << "sizeof(spinlock): "<< sizeof(spinlock) << endl;
  cout << "SLsPerCacheLine: "<< int(SLsPerCacheLine) << endl;
  const size_t num = nslp * SLsPerCacheLine;
  pslp = new spinlock[num ];
  for (size_t ii=0; ii<num ; ii++)
  { memset(pslp+ii,0,sizeof(*pslp)); }

  const size_t nThreads = 4;
  boost::thread* ppThreads[nThreads];
  const int offset[nThreads] = { 17, 101, 229, 1023 };

  boost::timer timer;

  for (size_t ii=0; ii<nThreads; ii++)
  { ppThreads[ii] = new boost::thread(threadFunc, offset[ii]); }

  for (size_t ii=0; ii<nThreads; ii++)
  { ppThreads[ii]->join(); }

  cout << "Elapsed time: " << timer.elapsed() << endl;

  for (size_t ii=0; ii<nThreads; ii++)
  { delete ppThreads[ii]; }

  delete[] pslp;

  return 0;
} 
```

我编译了两个版本的代码，一个带有`SLsPerCacheLine==1`，一个带有`SLsPerCacheLine==8`. 使用 MSVS 2010 优化的 32 位，在 4 核 Xeon W3520 @ 2.67Ghz（禁用超线程）上运行。

我很难从这些测试中获得一致的结果——偶尔会观察到高达 50% 的虚假时序变化。然而，平均而言，该版本似乎比具有大小为 41 的自旋锁表的版本`SLsPerCacheLine==8`快约 25-30% 。`SLsPerCacheLine==1`

看看它如何随着更多的核心、NUMA、超线程等扩展会很有趣。我目前无法访问那种硬件。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-04T01:33:43.900

**简短的**

你是对的，因为自旋锁共享相同的缓存行，而它们可能位于不同的缓存行中。又名虚假分享。通过在不同的缓存行中分配锁可能会获得一些性能提升（但请参见下文）。

但是，这与*锁*争用不同。当一个人持有一个锁并且一个或多个其他人想要访问它时，就会出现锁争用。

即 spinlock_pool 存在由锁共驻在同一缓存行中引起的缓存行争用。但它（减少了）软件锁争用。

减少软件锁争用无疑是好事。

正如您的基准测试在某种程度上显示的那样，缓存行争用可能会造成一些伤害，但与软件锁争用相比是二阶效应。

**细节**

**背景**

首先，一些背景：

经典的自旋循环是 test-and-test-and-set：

```
 loop: 
         tmp := load( memory_location_of_sw_lock )
         if( is_locked(tmp) ) goto loop
         was_locked := atomic_hw_locked_rmw( memory_location_of_sw_lock, 
                                             value_that_will_get_sw_lock )
         if( was_locked(tmp) ) goto loop
     got_the_sw_lock:
          ...
          ... critical section
          ...
          // release the lock, e.g.
          memory_location_of_sw_lock := 0 
```

还有测试和设置自旋锁，看起来像

```
 loop: 
         was_locked := atomic_hw_locked_rmw( memory_location_of_sw_lock, 
                                             value_that_will_get_sw_lock )
         if( was_locked(tmp) ) goto loop 
```

在大多数具有高速缓存、直写或回写的现代内存系统上，这些性能可能非常差。（尽管我提出的一些硬件优化使测试和设置自旋循环与测试和测试和设置自旋循环一样快 - 因为它们更小所以稍微快一些。）

请注意，这里有两个不同的锁概念：自旋锁正在获取的“软件”锁，以及 atomic_hw_locked_rmw 指令使用的硬件锁，例如 Intel LOCK INC mem 或 CMPXCHG。我们不太关心后者，只是知道它通常无条件地写入持有软件锁的缓存行，使缓存行的其他副本无效。（使写入有条件是另一种可能的硬件优化。）

**O(N^2) 高速缓存未命中突发（软件）锁争用**

使用 test-and-test-and-set spinloop 的锁争用尤其糟糕。服务员都在锁上旋转，当它被释放时，会有一阵总线访问。一个人赢了，其他人意识到他们输了，最终他们安定下来再次旋转。这种活动爆发特别糟糕，因为对于 N 个等待的人（线程/进程/处理器）来说，总线活动的爆发在大小上可能是 O(N^2)，因为在最坏的情况下，每个人都退出了测试的测试部分- and-test-and-set spinloop，每个人都尝试同时执行原子锁定 RMW（读-修改-写）指令，例如 x86 LOCK INC mem 或 CMPXCHG。这意味着*每个人*最终都会写这行代码，即使除了第一个之外的所有人都不需要写锁，因为他们不会得到锁。

例如

```
Lock is held by P0
P1-PN are spinning in test-and-test-and-set spinloops waiting for it.

P0 releases the lock, e.g. by writing it to 0

P1's "test-" instruction reads the lock
...
PN's "test-" instruction reads the lock

All of P1-PN see the lock as released, 
   so they fall out of the "test-" part of the spinloop which uses ordinary instructions
   to the test-and-set part of the spinloop, which uses a hardware atomic RMW like LOCK INC mem

P1's locked RMW happens, and acquires the spinlock for P1
   It invalidates all other cache lines
   P1 goes away and does something with the data protected by the lock

P2's locked RMW fails to acquire the spinlock
   It invalidates all other caches because it has a write
   P1 falls back into its test- spinloop

P3's locked RMW fails
   It invalidates all other caches because it has a write
   P1 falls back into its test- spinloop

...

PN's locked RMW fails 
```

现在，至少，所有剩余的 P2..PN 处理器必须为它们的测试自旋循环执行普通的未锁定缓存未命中。这意味着至少有 N+(N-1) 次缓存未命中。情况可能会更糟，因为每次写入都可能由无法获取锁的服务员触发所有其他服务员进行未锁定的读取。即，根据时间，您可能会得到

```
 1 release the lock
   N reads to test- the lock
   1 locked atomic RMW to acquire the lock
   N reads...
   for each of the remaining N-1 processors
      1 locked RMW that fails to acquire the lock
      N reads 
```

这是O（N ^ 2）。或者可能，对于处理器 M，1 个锁定的 RMW，然后是 2..M 读取 - 这仍然是 O(N^2)。

**这对这个问题意味着什么？**

好的，如果有真正的锁争用，当一个争用锁被释放时，你会得到这个 O(N^2) 的缓存未命中突发。

然而，spinlock_pool 将等待者分散到多个锁中。如果自旋锁池中有 S 把锁，你得到的等待者会少得多：可能少于 N/S（因为共享同一个锁的人数往往是超线性的）。

即使用 Boost 的 spinlock_pool，您可能天真地期望获得 1/41 的争用量 --- 并且可能更少。

请记住，spinlock_pool 是在每个 shared_pointer 拥有一个锁、增加共享指针的大小以及让所有 shared_pointer 共享同一个锁之间的折衷。因此，对 shared_pointer 的自旋锁的任何争用都可能是 (a) 真正的争用，或 (b) 由独立散列到自旋锁池中的同一条目的 shared_pointer 引起的虚假争用。

现在，是的，如果不是有 N 个服务员，而是“只有”N/41 个服务员，那么突发仍然是 O((N/41)^2) 或 O(N^2)。但是，如果 N 通常小于 41……你就明白了。

基本上，散列以将 shared_Pointers 分散到多个 spinlock_pool 条目上可以快速减少争用量。

但是......自旋锁住在同一个高速缓存行中？对...但是其他缓存行上的服务员不会前进到他们自旋循环的测试和设置部分。

即，如果与 M 个等待者的竞争锁与 M 个其他进程共享一个缓存行，您将获得 M*N 流量。但是，如果散列将 M 减少到 O(1)，那么您只会获得 N 流量。

如果大多数时候根本没有其他服务员，那么在锁释放时你只会得到 O(1) raffic。

**底线**：

减少软件锁竞争在性能方面比减少导致硬件缓存行竞争的缓存错误共享要高得多。

现在，不将这么多 spinlock_pool 条目打包到同一个缓存行中仍然可能有好处。但这绝不是显而易见的。这是一个经验问题，我的意思是你需要进行一个实验，它会随着工作量的不同而变化。

有时，在同一缓存行中错误地共享这些锁会很糟糕。一个典型的例子是保护处理器运行队列的锁。

有时，在同一缓存行中错误地共享这些锁是好的——它可以提供与预取在缓存中相同的好处。例如，假设您分配了一个 shared_pointers 数组，并且人们通常访问 aosptr[i]，然后访问 aosptr[i+1]，等等。

这完全取决于您的工作量。我已经看到它双向下跌。通常，根据我的经验，每个缓存行一个锁会更好，尽管通常不会很多。

**更多乐趣**

如果您关心，测试和测试和设置自旋循环的硬件优化是我的 MS 论文“同步基元的特征分类，包括总线放弃锁”的主题 - 一种消除突发的硬件更新缓存协议总线访问。未在任何正式出版物上发表，大学缩微胶片除外。

我的工作受到 T Anderson - IEEE Transactions on Parallel and Distributed Systems 1990 的论文“共享内存多处理器的自旋锁替代方案的性能”的启发。

我认为公平地说，大多数出版物都是关于软件、算法的，包括著名的 MCS 锁。我认为公平地说，这些技术虽然在理论上很流行，但很少被熟练的程序员使用。

顺便说一句，这里还有一些硬件优化可能。例如 CMPXCHG 根本不需要写锁。不幸的是，在当前的 Intel 硬件上，或者至少在我 1991 年设计的 Intel 硬件上，我仍然认为仍在使用，释放硬件锁（用于实现原子锁定 RMW）的唯一方法是使用特殊的微码写“存储解锁”。哎呀，微代码甚至可以使用 LoadLinked/StoreConditional (LL/SC)，在幼稚的 LL/SC 在某些线程上没有向前进展的情况下回退到锁定。

英特尔最近可能已修复此问题。我在 2009 年离开了 Intel。我试图修复、改进、优化它，哦，从 1991 年开始。而且 Intel*最近*一直在改进锁的性能。但我认为他们主要致力于非竞争锁性能，并没有优化竞争锁性能。

同样，Alain Kagi 在他的论文和一些出版物以及专利[http://www.google.com/patents/US6460124](http://www.google.com/patents/US6460124)中表明，通过添加明智的延迟，缓存硬件可以使自旋锁与排队锁一样高效。

其中一些硬件优化使测试和设置自旋循环比测试和测试和设置自旋循环更好。

最新的开发是 Intel TSX（事务同步扩展），包括 HLE（硬件锁消除（Ravi Rajwar 在 UWisc 从事此工作，而我和 Alain Kagi 在那里，虽然我在同步方面的工作早在 UIUC））和 RTM （受限事务内存）。这两个都有助于无竞争......嗯，它们有助于解决错误竞争的竞争锁，例如保护可能是独立内容的粗粒度锁。即假锁争用。在某些方面，HLE 可能不需要 spinlock_pool。

**道歉**

对不起：我提供了一个冗长的答案，归结为“减少软件锁争用可能比自旋循环的硬件缓存行争用重要得多”。

虽然我希望通过为每个高速缓存行分配 1 个自旋循环来获得一些性能，但它可能很小，并且在一些不完全不常见的工作负载上甚至可能会有损失。

可以肯定的是，你必须测量它。

但是，无论如何，最大的收获来自于减少软件锁争用。

# c++ - 类私有变量损坏

> ID：11037665
> 
> 赞同：0
> 
> 时间：2012-06-14T16:43:44.773
> 
> 标签：c++, c, memory, gcc, memory-corruption

我有某种形式的 std::vector

```
class A{
 public:
 A():i(someNumber){}
 void useI() const{
   //do something with i
 }
 // No destructor defined
 private:
  int i;
}; 
```

我的代码循环遍历每个数据点并调用`useI()`数组中的每个元素。经过几百次迭代，变量`i`被破坏了，我不知道为什么。这种情况可以复制。我知道这里没有太多细节，但任何关于检查内容的建议都非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T16:46:21.077

最有可能导致这样的事情是过度索引数组访问未指向正确位置的指针。现在，找到发生这种情况的位置并非易事，但是像 valgrind 这样的工具可以提供帮助。

如果未正确终止或未正确应用保持缓冲区的大小，使用 C 样式字符串也很容易导致字符串过度索引

另一个原因可能是双重删除/释放也会破坏内存的指针

# apache - htaccess 用 3 个子目录重写

> ID：11037671
> 
> 赞同：0
> 
> 时间：2012-06-14T16:43:58.077
> 
> 标签：apache, .htaccess, mod-rewrite

我的网站上有这样的网址。

```
http://localhost/tutor_institute/profiles/tutors/index.php?tutorCode=1255&tutorName=Jhon Amarathunga&city=Perth 
```

我需要像这样重写它

```
http://localhost/tutor_institute/profiles/tutors/1255/Perth/Jhon Amarathunga.html 
```

这里的tutor_insitute、profiles 和tutors 是我根目录下的子目录。index.php 页面存在于导师目录中，我的 htaccess 文件也存在于那里。

我在我的 htaccess 文件中是这样的

```
RewriteEngine on
RewriteRule ^/tutor_institute/profiles/tutors/([0-9]+)/([A-Za-z_]+)/([A-Za-z_]+)$ index.php?tutorCode=$1&tutorName=$2&city=$3 [NC] 
```

但它不起作用..有人告诉我哪里出错了吗？

# java - 从 Java 代码源的 java AST 中删除节点

> ID：11037674
> 
> 赞同：1
> 
> 时间：2012-06-14T16:44:08.050
> 
> 标签：java, eclipse, abstract-syntax-tree, visitor-pattern

我想通过删除完全限定名称来更改 AST Java，并将其替换为相应的导入。ça 需要通过简单节点更改调用完成节点的类型。问题是我找不到任何允许我做的功能。谁有想法？先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:12:13.587

This Eclipse Corner article on AST may help you - [http://www.eclipse.org/articles/article.php?file=Article-JavaCodeManipulation_AST/index.html](http://www.eclipse.org/articles/article.php?file=Article-JavaCodeManipulation_AST/index.html)

# jquery - 使用客户端代理对象从 jQuery 调用 WCF 服务

> ID：11037678
> 
> 赞同：1
> 
> 时间：2012-06-14T16:44:16.523
> 
> 标签：jquery, wcf, web-services, proxy

我们有一个 ASP.NET 网站项目。过去，我们一直使用 asmx webservice。现在，我们有了 WCF 服务，我正在尝试使用带有 jQ​​uery 的客户端代理对象调用 WCF 服务。使用 asmx，使用以下代码行调用 Web 服务相当容易

```
function GetBooks() {
    $.ajax({
        type: "POST",
        data: "{}",
        dataType: "json",
        url: "http: /WebService.asmx/GetBooks",
        contentType: "application/json; charset=utf-8",
        success: onSuccess
    });
} 
```

WebService 类中的方法是

```
[WebMethod(EnableSession = true)]
public Books[] GetBooks()
{
       List<BooksTO> dtos = BooksDTOUtils.GetBooks(entityOwnerID);
       return dtos.ToArray();
} 
```

现在，必须从 jQuery 调用 GetBooks_Wcf() 方法。我在新类（WcfCall.cs）中使用客户端代理来调用 wcf 方法 GetBooks

```
 public Books[] GetBooksWcf()
{
        var service = WcfProxy.GetServiceProxy();
        var request = new GetBooksRequest();
        request.entityOwnerID= entityOwnerID;
        var response = service.GetBooks(request);
        returnresponse.Results.ToArray();
} 
```

我的代理（Wcfproxy.cs）是

```
 public static Service.ServiceClient GetServiceProxy()
{
    var Service = Session["Service"] as Service.ServiceClient;
    if (Service == null)
    {
        // create the proxy
        Service = CreateServiceInstance();

        // store it in Session for next usage
        Session["Service"] = Service;
    }

    return Service;
}

   public static Service.ServiceClient CreateServiceInstance()
   {
    ServicePointManager.ServerCertificateValidationCallback = new        RemoteCertificateValidationCallback(IgnoreCertificateErrorHandler);

    string configValue = Environment.GetConfigSettingStr("WcfService");

    Service.ServiceClient webService = new Service.ServiceClient();
    //Here is my WCF endpoint
    webService.Endpoint.Address = new System.ServiceModel.EndpointAddress(configValue);

    return webService;
} 
```

所以，我的问题是如何从 jQuery 调用 GetBooksWcf？我创建了一个reference.cs，上面方法的Service.ServiceClient在下面的reference.cs中。此外，参数“entityOwnerID”是敏感的，我不能从 JQuery 传递它，要么我必须坚持它，要么从 web.config 作为键调用。

```
 [System.Diagnostics.DebuggerStepThroughAttribute()]
  [System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "4.0.0.0")]
  public partial class ServiceClient : System.ServiceModel.ClientBase<Service.IService>, Service.IService
  {
      .........  
   } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:02:54.040

WCF 服务的 .NET 代理不能在 jQuery 中按原样使用。

`AspNetCompatibilityRequirements`您需要通过使用和`WebInvoke`属性启用您的 WCF 服务，以便通过 JavaScript 或 jQuery 使用（请参阅[此处](http://www.codeproject.com/Articles/132809/Calling-WCF-Services-using-jQuery)）。

# c# - 加速我的应用程序

> ID：11037680
> 
> 赞同：-2
> 
> 时间：2012-06-14T16:44:19.870
> 
> 标签：c#, encryption, aes

我正在使用高级加密标准算法创建一个文件加密应用程序，但我发现我的应用程序非常慢，尤其是当我加密大量数据时，例如。80MB 文件大小，30 分钟。已经过去了，但我的应用程序尚未完成对 80mb 大小的文件的加密。

我在我的加密算法中使用 ECB（电子密码本）模式

如何加快应用程序加密大量数据的速度？我做了一些研究，发现了这个[http://en.wikipedia.org/wiki/Speedup](http://en.wikipedia.org/wiki/Speedup)，但我不确定这是否是我问题的答案......或者如果我使用 BackgroundWorker 是否有效？顺便说一句，我在开发我的项目时使用了 Visual Studio 2008。

这是我加密文件的代码..

```
private void cmdEncrypt_Click(object sender, EventArgs e)
{
        AESECB aes = new AESECB();
        FileInfo fInfo = new FileInfo(txtFileSource.Text);

        if (txtFileSource.Text == "")
        {
            MessageBox.Show("Please Select a File", "Message", MessageBoxButtons.OK, MessageBoxIcon.Warning);

            return;
        }

        if (txtSecretKey.Text == "")
        {
            MessageBox.Show("Please Enter the password", "Message", MessageBoxButtons.OK, MessageBoxIcon.Warning);

            return;
        }

        if (fInfo.Exists == false)
        {
            MessageBox.Show("File Not Found!", "Message", MessageBoxButtons.OK, MessageBoxIcon.Warning);

            return;
        }

        byte[] bytePadding = aes.filePadding(txtFileSource.Text);
        byte[] fByte = aes.getFileByte(txtFileSource.Text);
        int farrLength = (bytePadding.Length + fByte.Length);
        byte[] newFbyte = new byte[farrLength];
        byte[] encryptedFByte = new byte[farrLength];
        int counterBytePadding =0;
        byte firstByte = 0;

        for (int i = 0; i < farrLength; i++)
        {
            if (i < fByte.Length)
            {
                newFbyte[i] = fByte[i];
            }
            else
            {
                newFbyte[i] = bytePadding[counterBytePadding];
                counterBytePadding++;
            }
        }

        int plainFileBlock = newFbyte.Length / 16;

        progressBar1.Maximum = plainFileBlock-1;

        progressBar1.Visible = true;

        int counter = 0;
        int counter2 = 0;

        for (int j = 0; j < plainFileBlock; j++)
        {
            byte[] encfbyte = aes.fileEncrypt(txtSecretKey.Text, newFbyte, counter);

            for (int k = 0; k < 16; k++)
            {
                encryptedFByte[counter2] = encfbyte[k];
                counter2++;
            }

            progressBar1.Value = j;
            counter = counter + 16;

        }

        progressBar1.Visible = false;

        int bytesToRead = encryptedFByte.Length;

        string newPath = txtFileSource.Text + ".aesenc";

        using (FileStream newFile = new FileStream(newPath, FileMode.Create, FileAccess.Write))
        {
            newFile.Write(encryptedFByte, 0, bytesToRead);

        }

        MessageBox.Show("Encryption Done!", "Message", MessageBoxButtons.OK, MessageBoxIcon.Information);

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:18:40.047

“对你的代码充满信心”这一切都很好，但所有优秀的程序员都会衡量。

这很简单，这样做：

```
using System.Diagnostics;

var startTime = DateTime.Now;
//some code here
Debug.WriteLine("This took {0}", DateTime.Now.Subtract(startTime)); 
```

然后在 VS (View->Output) 中查看你的输出窗口。

通过用这两行包裹方法的不同部分，您将识别慢位。

我怀疑你逐字节复制 80MB 的循环。在这里试试`Array.Resize`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T10:23:03.227

正如韦斯顿所建议的那样，请测量您的代码以识别慢的地方。也就是说，可能是文件加密 for loop 让你放慢了速度。如果是这样，您绝对可以通过使用超过 1 个 cpu 来加速该过程。在 C# 中查找并行结构：“Parallel.For”。

这是一个简单的例子： [http ://www.dotnetcurry.com/ShowArticle.aspx?ID=608](http://www.dotnetcurry.com/ShowArticle.aspx?ID=608)

# sharepoint-2010 - 用于 SharePoint 的 CRM 2011 列表组件 - 自定义列宽

> ID：11037685
> 
> 赞同：1
> 
> 时间：2012-06-14T16:44:38.377
> 
> 标签：sharepoint-2010, dynamics-crm-2011

## 环境

我通过 SharePoint 的 CRM 2011 列表组件使用 Microsoft Dynamics CRM 2011 和 Microsoft SharePoint 2010 之间的本机文档管理集成。这个部署没有什么不寻常的——它被配置为与联系人和帐户一起工作，并且一切都按文档说明工作。

## 要求

我最初有几个要求（虽然在写这个问题的过程中，我已经~~解决了其中两个~~）

1.  ~~自定义显示的列以包含自定义列（已在通过 SP 的列表中定义）~~
2.  ~~自定义默认排序顺序~~
3.  自定义某些列的默认列宽

## 到目前为止我所知道的

我了解到，SharePoint 库的默认视图似乎驱动了组件的大部分行为。将我的自定义列添加到库的默认视图中，会导致它们出现在 List 组件输出中（我不相信这无论如何都记录在案 - 如果你认为是，请大声喊叫）。默认视图中的列排序和视图排序顺序也驱动 List 组件。快乐的日子 - 满足两个要求。

SharePoint 通过 Web UI 不允许设置列宽（因为它们是使用动态宽度呈现的），因此库设置在这里没有帮助。使用 SharePoint Designer 手动设置列的宽度也无法被 List 组件继承。

安装到 SharePoint 和安装 List 组件期间的基础页面位于“.../crmgrid/”子目录中。在可用页面中，`crmgridpage.aspx`似乎完成了所有渲染。SharePoint Designer 热衷于告诉我“此页面不包含您有权编辑的任何区域”。

## 问题

我有什么（创新的？）方法可以为我通过 List 组件显示的某些列自定义默认列宽？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T19:43:24.457

好吧，您在这里的选择有限。因为您要处理多个域，所以您会遇到跨域脚本问题，排除了 crm 表单上的任何 javascript。

想到的唯一方法是修改共享点服务器上的 crmgridpage.aspx 页面以通过 javascript 设置列的宽度。虽然它完全不受支持。

# java - 将 Java 应用程序转换为 Mac OS X 应用程序

> ID：11037693
> 
> 赞同：16
> 
> 时间：2012-06-14T16:44:53.980
> 
> 标签：java, macos, netbeans

有没有办法将 Java 应用程序转换为 Mac OS X 可执行应用程序？

我使用 NetBeans 在 Java 中进行开发，我想将“dist”文件夹“打包”到一个应用程序中（只是为了方便）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-14T17:55:23.067

## 使用 Apple Java 扩展及其指南

[Apple Java Extensions](http://developer.apple.com/library/mac/#samplecode/AppleJavaExtensions/Introduction/Intro.html)包含一个非常完整的开发指南，其中包含有关在 Mac OS X 上部署[Java 应用程序](http://developer.apple.com/library/mac/#documentation/Java/Conceptual/Java14Development/03-JavaDeployment/JavaDeployment.html)和生成应用程序包的信息。它还介绍了 Apple Java 扩展的其他方面，例如对与标准 Mac OS X UI 集成的支持。

### 其他参考：

*   [罐子捆绑器](http://informagen.com/JarBundler/)。
*   [制作 Mac OS X 应用程序包](http://howlingmoonsoftware.com/wordpress/?p=36)
*   [在注册到协议 url 的 Java 中创建 osx 应用程序包](http://blog.myti.it/post/5158151441/javaosxurlhandler)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-05-05T04:15:45.877

有一个库可以让您打包 Java 应用程序
**Packr**：[https ://github.com/libgdx/packr](https://github.com/libgdx/packr)

打包您的 JAR、资产和 JVM，以便在 Windows (ZIP)、Linux (ZIP) 和 Mac OS X (.app) 上分发，添加本机可执行文件以使其看起来像是本机应用程序。

它甚至可以为您最小化 JRE。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-01-28T00:37:35.720

**[jar2app](https://github.com/Jorl17/jar2app)**

Packr 是一个很棒的工具，但当时我发现我想要一些“更容易使用”的东西，于是**jar2app**诞生了。我知道这是一个老问题，但也许其他人会发现这个程序比其他替代方案**更容易使用。**如果他们不这样做， FAQ 中有对其他替代方案（例如 Packr）[的直接引用。](https://github.com/Jorl17/jar2app#jar2app-doesnt-do-what-i-want-are-there-other-alternatives)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-05-23T14:09:20.867

您可以使用[javapackager](https://docs.oracle.com/javase/8/docs/technotes/tools/unix/javapackager.html)工具构建应用程序并将其包装到安装程序中，以下命令显示如何将 jar 文件转换为 bundle 文件：

## 命令

```
mkdir -p package/macosx
cp Test.icns package/macosx
jdk=$(/usr/libexec/java_home)
$jdk/bin/javapackager -deploy -native dmg \
   -srcfiles Test.jar -appclass package.Test -name Test \
   -outdir deploy -outfile Test -v
cp deploy/bundles/Test-1.0.dmg installer.dmg
ls -l
open installer.dmg 
```

更改应用程序图标和更多信息[MacJava](http://centerkey.com/mac/java/)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-10-27T02:06:42.713

由于已接受答案中的某些链接在 2020 年不再可用或不再适用，因此在提出问题 8 年后，我想分享我今天确认有效的发现。

java自带的工具，`javapackager`可以为你打包Windows、Linux、macOS上的java应用。

这是官方手册：[https ://docs.oracle.com/javase/8/docs/technotes/tools/unix/javapackager.html](https://docs.oracle.com/javase/8/docs/technotes/tools/unix/javapackager.html)

（这里还有其他有用的工具：[https](https://docs.oracle.com/javase/8/docs/technotes/tools/) ://docs.oracle.com/javase/8/docs/technotes/tools/ ）

* * *

为了打包一个 mac 应用程序，我使用了这个命令：

```
javapackager \
    -deploy \
    -native image \
    -srcdir ./csv-encrypt-tool-mac \
    -srcfiles csv-encrypt-tool.jar \
    -srcfiles dict \
    -srcfiles config \
    -srcfiles log \
    -outdir ./dist \
    -outfile csv-encrypt-tool \
    -appclass some.package.CsvEncToolApp \
    -name "csv-encrypt-tool" \
    -title "csv-encrypt-tool" \
    -nosign \
    -v \
    -BjvmOptions=-Xmx4096m \
    -BmainJar=csv-encrypt-tool.jar \
    -Bicon=icon.icns 
```

这是解释：

```
-deploy \                                       # Assembles the application package for redistribution with sys JRE
-native image \                                 # Build a .app file. If you want a .dmg, use -native dmg
-srcdir ./csv-encrypt-tool-mac \                # directory where my jar and resource files in
-srcfiles csv-encrypt-tool.jar \                # my executable jar, path relative to -srcdir
-srcfiles dict \                                # one of my resource directories, path relative to -srcdir
-srcfiles config \                              # another one of my resource directories, path relative to -srcdir
-srcfiles log \                                 # again, one of my resource directories, path relative to -srcdir
-outdir ./dist \                                # where I want the package to be put
-outfile csv-encrypt-tool \                     # the output file name without extension, the final file (or bundle which is a directory actually) will be csv-encrypt-tool.app
-appclass some.package.CsvEncToolApp \          # the class with main method, which is the entry point of the whole app
-name "csv-encrypt-tool" \                      # the name (not very sure what this is for)
-title "csv-encrypt-tool" \                     # the title (not sure what it is either)
-nosign \                                       # not sign the app since this is just an internal tool, if you want to publish it, signing is necessary
-v \                                            # verbose
-BjvmOptions=-Xmx4096m \                        # I need 4GB max heap size
-BmainJar=csv-encrypt-tool.jar \                # the jar file with main class
-Bicon=icon.icns                                # the icon 
```

执行命令后，会在 中创建一些文件和目录`dist`，我希望包在其中，其中一个目录是`bundles`. 应用程序放在那里。

由于我只是构建了一个内部工具，因此无需其他生产就绪选项就无需签名和打包。可以参考官方手册寻求帮助。

希望这可以帮助其他不知道如何在 2020 年在 macOS 上打包应用程序的人，就像我一样。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2021-03-07T10:47:31.103

从 JDK14 开始，还有 **[`jpackage`](https://docs.oracle.com/en/java/javase/14/jpackage/packaging-overview.html)**( [**JEP-392**](https://openjdk.java.net/jeps/392) )，在撰写本文时仍处于孵化阶段，可能尚未准备好生产，但已经完成了这项工作。

[与swt 应用程序](https://github.com/BiglySoftware/BiglyBT)一起使用的示例用法（假设所有必需的 jar 文件都驻留在`files`文件夹中；您还可以使用 提供自定义资源文件夹`--resource-dir`）：

```
jpackage --type dmg \
 -i files \
 -n Bigly \
 --main-class com.biglybt.ui.Main \
 --main-jar BiglyBT.jar \
 --java-options -XstartOnFirstThread \
 --mac-package-name BiglyBt \
 --icon app.icns \
 --verbose 
```

对于完整的选项列表，请使用：

```
jpackage --help 
```

> ^(警告：它是否是一个错误可能是有争议的，也许它将在未来的版本中解决，但在当前版本中，如果您将输入文件夹指定为`-i .`，并且不提供自定义目标，`--dest`那么 jpackage 将捆绑*所有内容*在当前文件夹中...包括它刚刚创建的包，即它本身是递归的，因为`.`它既是输入文件夹*又*是输出 :D 。)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-28T05:58:42.110

所以这些选项都不适合我（可能是因为我运行的是 OS X 10.15，也可能是因为这些项目中的大多数已经存在多年了，谁知道呢）。安装 Catalina 使我围绕 Java 应用程序构建的现有应用程序不再工作。

[最终，这篇文章有所帮助](https://apple.stackexchange.com/questions/91285/how-do-i-make-a-bash-script-so-that-i-can-drag-its-input-on-top-of-the-icon)：只需使用 Automator 运行一个脚本，该脚本运行 java 命令来启动 jar。我想制作一个应用程序来启动[Colossus，这是旧 Avalon Hill 棋盘游戏 Titan 的 Java 版本](http://colossus.sourceforge.net/)。我编写了一个看起来像这样的 shell 脚本：`java -Xmx256m -jar /my/path/to/the/game/Colossus.jar net.sf.colossus.appmain.Start`然后创建了一个自动化应用程序，其唯一的操作是启动该脚本的“运行 shell 脚本”。像魅力一样工作，无需安装 Ant，无需您下载 java vms 的命令行应用程序，最重要的是它使用 Apple 工具，因此可以与较新版本的 OS X 一起使用。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-02-10T17:16:24.317

你可以试试这个应用程序，它将你的 jar 文件捆绑到 Mac 应用程序中

编辑：它很容易使用，选择 Jar 文件和一个图标。在这里你可以看到[屏幕截图。](https://i.stack.imgur.com/O3fJl.png)

[https://github.com/aprsn/Mac-App-Creator](https://github.com/aprsn/Mac-App-Creator)

# solr - 使用外部文件来提升结果。未反映外部文件中的更改

> ID：11037694
> 
> 赞同：2
> 
> 时间：2012-06-14T16:44:56.123
> 
> 标签：solr

我正在使用带有 apachesolr 模块的 drupal 7。我有一个外部文件字段来提升我想要的结果。该文件的名称是 external_eff_ranking。在架构中，我有：

```
<fieldType name="pfloat" class="solr.FloatField" omitNorms="true"/>
<fieldType name="file" keyField="id" defVal="1" stored="false" indexed="false" class="solr.ExternalFileField" valType="pfloat"/>
<dynamicField name="eff_*" type="file"/> 
```

外部文件的格式为：

```
id1=3.1
id2=4.2
id3=5 
```

这可以按预期工作，结果会根据文件中的值进行提升。问题是当值发生变化时，结果并不能反映变化。我知道我需要以某种方式提交更改，但我不知道如何。

我试过这样的事情：

```
curl http://localhost:8983/solr/update?commit=true -H "Content-Type: text/xml" --data-binary '<commit />' 
```

但没有用。

**解决了**

我的 solrconfig.xml 中的以下行解决了这个问题：

```
<requestHandler name="/reloadCache" class="org.apache.solr.search.function.FileFloatSource$ReloadCacheRequestHandler" /> 
```

然后我在每次文件更新后点击这个 url (http://localhost:port/reloadCache)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T19:17:38.867

看起来这是由于 solr 中的一个错误影响了缓存的结果。可能尝试[reloadCache 有](https://issues.apache.org/jira/browse/SOLR-2536)帮助吗？

# c# - 用 C# 计算马氏距离

> ID：11037697
> 
> 赞同：1
> 
> 时间：2012-06-14T16:45:09.440
> 
> 标签：c#, statistics, distance, covariance

我正在尝试用 c# 计算马氏距离。我在网上找不到任何真正好的例子，而且我是 C# 新手。我特别难以让协方差矩阵正确运行。任何帮助，将不胜感激。谢谢！

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using MathNet.Numerics.LinearAlgebra.Double;

namespace MahalanobisDistance
 {
   class Program
{

    static void Main(string[] args)
    {
        Program p = new Program();
        DenseVector vector1 = new DenseVector(4);
        DenseVector vector2 = new DenseVector(4);
        DenseMatrix matrix1 = new DenseMatrix(vector1.Count/2);

        vector1[0] = 1;
        vector1[1] = 2;
        vector1[2] = 3;
        vector1[3] = 4;

        vector2[0] = 2;
        vector2[1] = 12;
        vector2[2] = 14;
        vector2[3] = 18;

        matrix1 = p.twoPassCovariance(vector1, vector2);
        for(int i = 0; i < matrix1.RowCount; i++)
        {
            for(int k = 0; k < matrix1.ColumnCount; k++)
            {

                Console.Write(matrix1[k, i] + " ");
            }
            //Mahalanobis2(v1, v2, covariance);
            Console.Write("\n");
        }
    }

    public DenseMatrix twoPassCovariance(DenseVector data1, DenseVector data2)
    {
        int n = data1.Count;

        double mean1 = data1.Average();
        double mean2 = data2.Average();

        DenseMatrix covariance = new DenseMatrix(data1.Count);
        double x;

        for(int i = 0; i < 2; i++)
        {
            for (int k = 0; k < n; k++)
            {
                double a = data1[i] - mean1;
                double b = data2[k] - mean2;
                x = a*b;
                covariance[i, k] = x;
            }
        }

        covariance.Multiply(1/n);
        return covariance;
    }

}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T16:58:52.227

在方法的`i`循环中`twoPassCovariance`，我相信你应该循环到`i < n`而不是`i < 2`.

# ruby-on-rails - 如何在 Rails 中为自定义 SQL 查询创建动态 where 子句？

> ID：11037705
> 
> 赞同：1
> 
> 时间：2012-06-14T16:45:25.557
> 
> 标签：ruby-on-rails, postgresql, activerecord

我们需要对双组进行计数，据我所知，Rails 2.3 中的 ActiveRecord 不支持，因此我们正在执行自定义 SQL 查询，例如：

```
ActiveRecord::Base.connection.execute("select COUNT(*), author_id, call_type_id from signup_calls group by author_id, call_type_id") 
```

但是，我们还需要过滤由三个用户选择的过滤器计算的注册调用，这些过滤器需要包含在 where 子句中。

有没有办法我可以使用 ActiveRecord 助手来帮助生成 where 子句。如果没有，最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:00:02.100

你可以做

```
SignupCall.select('count(*) as signup_count, author_id, call_type_id').group('author_id, call_type_id') 
```

然后只需在之后链接 where 子句。

# air - 批量检查 Adob e AIR 版本

> ID：11037707
> 
> 赞同：0
> 
> 时间：2012-06-14T16:45:32.590
> 
> 标签：air

我想编写一个批处理文件来检查系统中是否安装了 Adob​​e AIR，如果安装的是 3.0 版或更高版本。如果未安装或安装了旧版本，则会安装 C:\AdobeAIRInstaller.exe

# c# - 通过 IronRuby 从资源字典中检索

> ID：11037709
> 
> 赞同：0
> 
> 时间：2012-06-14T16:45:45.923
> 
> 标签：c#, .net, ruby, ironruby, dynamic-language-runtime

我有一个 Silverlight 4 应用程序，其中包含一个`Canvas`，而该应用程序又包含一个`Storyboard`资源（名为`sb1`）。

在 C# 中，我可以通过执行来访问情节提要资源

```
Storyboard sb = (Storyboard)canvas.Resources["sb1"]; 
```

当我尝试在 ruby​​ 中做同样的事情时：

```
sb = canvas.Resources["sb1"] 
```

我收到一条`System.ArgumentException`消息

```
Key must be a Type or a String. 
```

就其本身而言，`canvas.resources`用红宝石评估，`System.Windows.ResourceDictionary`所以我希望它像字典一样工作......

有人可以指出我在这里做错了什么吗？我依稀记得CLR字符串和Ruby字符串是有区别的。这就是这里发生的事情吗？

我在 .NET 4.0.30319.235 和 VS2010 上使用 IronRuby 1.1.3.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T18:40:00.927

[我在这里](https://stackoverflow.com/questions/5341111/how-do-you-add-a-string-to-a-c-sharp-iliststring-from-ironruby)找到了答案：

> 将 to_clr_string 添加到 ruby​​ 代码中

我知道这很简单。:-)

# video - Windows Phone 中的视频 API

> ID：11037712
> 
> 赞同：1
> 
> 时间：2012-06-14T16:45:55.567
> 
> 标签：video, windows-phone, media

我一直在为 Windows Phone 7.5 开发一些媒体播放器应用程序，但我还没有弄清楚如何访问手机内部存储中的视频集合。

你能指出我正确的方向吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T02:38:41.100

无法通过默认选择器选择现有的视频和声音媒体内容。您可以使用[MediaLibrary](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.media.medialibrary.aspx)，它可以让您访问与现有歌曲和图片相关的元数据，仅此而已。您目前无法访问手机上存储的视频。

此外，您无法访问歌曲流 - 那些仅由操作系统读取，因此用户将无法通过第三方应用程序复制它们。

每[登 Delimarsky](https://stackoverflow.com/questions/6812156/wp7-audio-video-files-chooser)。

# vb6 - VB6 定时器问题

> ID：11037726
> 
> 赞同：0
> 
> 时间：2012-06-14T16:46:28.510
> 
> 标签：vb6, timer

我有一个有计时器问题的旧 VB6 应用程序。有一个模态表单，其中包含一些元素和两个计时器（VB6 标准计时器）。每个计时器都是这样工作的（伪代码）：

```
-- TimerEvent Start 
DoSomething
DoEvents
-- TimerEvent End 
```

然后，在某个时间点，会引发来自 OCX 控件的某个连接丢失的事件。与计时器本身无关。但是此时，两个计时器都不再引发计时器事件，尽管 - 现在很奇怪 - 计时器已启用并设置了 2000 的间隔。即使重新启用和重新设置间隔也没有任何效果。当来自同一 OCX 控件的另一个事件引发连接已恢复时，计时器事件会突然再次引发。即使删除 OCX 控件事件处理程序中的所有代码，计时器也不起作用。

我对 DoEvents “模式”不是很熟悉，但我认为这个问题一定与 DoEvents 有关。删除它并没有改变任何东西。

有谁知道这里会发生什么？我已经在寻找任何可以阻止计时器引发已逝事件的全局设置，但看在上帝的份上，我找不到任何设置。

我要疯了……

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:13:02.410

回复晚了非常抱歉。

这是另一个计时器内部的计时问题。这个另一个计时器 ping 另一个 IP，ping 超时为 200 毫秒。此计时器间隔为 200 毫秒。因此，如果 ping 超时（因为另一台机器已断开连接），则计时器的触发频率超过了可以处理的频率。所以它弄乱了事件队列并阻止了所有其他计时器的触发。通过将计时器间隔增加到 1000 毫秒，它可以工作，尽管更好的解决方案是停止计时器，处理事件，然后重新启动计时器。

感谢您的有用提示！

# google-chrome - 盒子阴影不会在 Chrome 中一直延伸

> ID：11037727
> 
> 赞同：0
> 
> 时间：2012-06-14T16:46:28.717
> 
> 标签：google-chrome, css

所以我的内容两侧都有一个盒子阴影

www.heatherkirk.net。哈哈，如果你选择使用它，请不要关注我在 IE 上的首页（我的投资组合列表都是一团糟），那完全是另一个问题，哈哈。

对于 Firefox 和 IE，它肯定会一路延伸。但是，在 Chrome 上，它会中途停止，当我单击 Inspect 时，它显示我的主容器在页面的中途停止（虽然只是在 Chrome 上）。如果有人可以为我解答，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T17:03:46.157

坦率地说，我看不出有什么不同，只是 chrome 的阴影更瘦了一点。chrome 检查元素显示您添加了-web-box-shadow。如果你加了，那就错了，应该是-webkit，safari就是这样。对于 Mozilla 那就是 -moz。像这样添加，看看你是否发现了不同之处。

```
#example1 {
    -moz-box-shadow: 10px 10px 5px #888;
    -webkit-box-shadow: 10px 10px 5px #888;
    box-shadow: 10px 10px 5px #888;
} 
```

# ios - iOS - 由 tableView 附件触发的 Segue？

> ID：11037731
> 
> 赞同：3
> 
> 时间：2012-06-14T16:46:57.973
> 
> 标签：ios, storyboard, segue

我试图在选择单元格上的附件视图后显示模式。

我目前有一个来自 TableViewCell 的 segue 来显示模式，当单击附件按钮时，我在此 segue 上手动调用 performSegueWithIdentifier。

问题是选择单元格和选择附件视图都会触发segue。我只希望在选择附件视图时触发 segue。

有哪些解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-06T22:04:23.313

右键单击带有情节提要中的详细附件的原型 tableViewCell。这会弹出一个黑色的接线盒。在 Triggered Segues 下有两个选择，选择和辅助动作。控制从那些到您想要的视图控制器的拖动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T17:03:37.707

我最终通过从我的第一个 ViewController 拖动到 SecondViewController 创建了一个 segue，而不是从单元格拖动到 viewController。我使用指定的标识符字符串手动调用 performSegueWithIdentifier，这样只有在我想要的时候才会调用 segue。

# android - 为每个视图膨胀新的布局 xml - PagerAdapter 中的实例化项目

> ID：11037733
> 
> 赞同：9
> 
> 时间：2012-06-14T16:47:00.757
> 
> 标签：android, android-viewpager, layout-inflater

所以基本上我想用每个视图位置的单独 XML 布局填充 ViewPager 内的页面。我目前正在这样做

```
@Override
    public Object instantiateItem(View container, int position) {

        LayoutInflater inflater = (LayoutInflater) mContext.getSystemService(mContext.LAYOUT_INFLATER_SERVICE);

        if(position == 0){
        view = inflater.inflate(R.layout.main, null);
        ((ViewPager) container).addView(view, 0);
        }
        if(position == 1){
            view = inflater.inflate(R.layout.main_second, null);
            ((ViewPager) container).addView(view, 0);
        }
        if(position == 2){
            view = inflater.inflate(R.layout.main_third, null);
            ((ViewPager) container).addView(view, 0);
        }

        return view;
} 
```

视图最初显示正确，但是当我滑动 ViewPager 时，布局被隐藏/破坏。为什么是这样？我做错了吗？请帮助和纠正我。

谢谢。爱。卫斯理

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-14T03:48:35.100

查看[此链接](http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-horizontal-view-paging/)以获取有关如何将它们组合在一起的好教程。基本上这个想法是你必须将新膨胀的视图添加到 ViewPager 集合中：

```
View view = inflater.inflate(resId, null);
((ViewPager) collection).addView(view, 0); 
```

# python - 如何判断一个句子中两个对象之间是否有比较？

> ID：11037737
> 
> 赞同：1
> 
> 时间：2012-06-14T16:47:06.293
> 
> 标签：python, nlp, nltk

再会。首先，我想为标题中没有非常具体而道歉，如果有人知道我需要的正确术语，请告诉我。这是我的问题。有一个人 X 和一个人 Y，我正在对每个人进行情绪分析。这是让我困惑的两个案例（请记住，这里的案例是简化的）。

*   案例 1：“X 表现优于 Y”
*   案例 2：“X 表现出色，Y 表现不佳”

在案例 2 中进行情感分析时，您可以将句子一分为二，分别对 X 部分和 Y 部分进行分析，而这不适用于案例 1。#1 中 X 和 Y 之间存在关系这意味着在该类型的句子中，如果 X 好，则 Y 不好。所以这是我的问题：有没有办法像案例 2 一样识别句子结构。我正在考虑 POS 标记，但由于我不是母语人士（而且我的语法很差），我有点难以理解这会奏效。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:19:32.933

POS 标记是不够的。您将需要使用依赖解析器（例如[MaltParser](http://www.maltparser.org/)）来找出句子的语法结构。

你将如何对结果进行情绪分析，我留给你。我不知道处理这种句子的任何算法或模型，但我想你可以通过谷歌搜索“情绪分析”（或其任何近义词）+“依赖解析”或类似的东西找到一些“相对情绪/意见/极性”。

# php - 在 PHP 中使用 imagejpeg 生成图像

> ID：11037738
> 
> 赞同：1
> 
> 时间：2012-06-14T16:47:10.330
> 
> 标签：php, image

`http://localhost/image.php?application=first`当我从一切正常的代码中触发以下代码时，我不知道我在哪里出错了。

```
session_start();
$name = $_GET['application'];   

$text = rand(10000,99999); 
$_SESSION['application'][$name] = $text;

$height = 25; 
$width = 65; 
$image_p = imagecreate($width, $height); 
$black = imagecolorallocate($image_p, 0, 0, 0); 
$white = imagecolorallocate($image_p, 255, 255, 255); 
$font_size = 14; 

imagestring($image_p, $font_size, 5, 5, $text, $white); 
imagejpeg($image_p, null, 80); 
```

但是当我为此更改代码时

```
if (isset($_GET['application']) && !empty($_GET['application'])) {
    if (isset($_GET['image']) && $_GET['image'] == 'get'){
    session_start();
    $name = $_GET['application'];   

    $text = rand(10000,99999); 
    $_SESSION['application'][$name] = $text;

    $height = 25; 
    $width = 65; 
    $image_p = imagecreate($width, $height); 
    $black = imagecolorallocate($image_p, 0, 0, 0); 
    $white = imagecolorallocate($image_p, 255, 255, 255); 
    $font_size = 14;
    imagestring($image_p, $font_size, 5, 5, $text, $white); 

    imagejpeg($image_p, null, 80);
}
} 
```

然后我在浏览器中得到 RAW 格式，所以我添加

```
header('Content-type: image/jpeg'); 
imagejpeg($image_p, null, 80); 
```

到代码，现在我收到消息，我的图片被中断，但是当我将它保存在驱动器上并从 IrfanView 启动时，它会正常打开。

我想补充一点，我正在测试`ob_start()`功能，但它没有改变任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:17:17.143

当我点击此 URL 时对我很有用：

```
http://localhost/image.php?application=first&image=get 
```

这是我在 image.php 中使用的确切代码：

```
if (isset($_GET['application']) && !empty($_GET['application'])) {
    if (isset($_GET['image']) && $_GET['image'] == 'get'){
        session_start();
        $name = $_GET['application'];   

        $text = rand(10000,99999); 
        $_SESSION['application'][$name] = $text;

        $height = 25; 
        $width = 65; 
        $image_p = imagecreate($width, $height); 
        $black = imagecolorallocate($image_p, 0, 0, 0); 
        $white = imagecolorallocate($image_p, 255, 255, 255); 
        $font_size = 14;
        imagestring($image_p, $font_size, 5, 5, $text, $white); 

        header('Content-type: image/jpeg');
        imagejpeg($image_p, null, 80);
    }
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T21:07:44.943

好的，我想通了。问题是我`require 'common.php'`在主 IF 语句之前添加。我的整个代码是这样的

```
<?php
require 'common.php';
    if (isset($_GET['application']) && !empty($_GET['application'])) {
    if (isset($_GET['image']) && $_GET['image'] == 'get'){
        session_start();
        $name = $_GET['application'];                   $text = rand(10000,99999);             $_SESSION['application'][$name] = $text;
            $height = 25;             $width = 65;             $image_p = imagecreate($width, $height);             $black = imagecolorallocate($image_p, 0, 0, 0);             $white = imagecolorallocate($image_p, 255, 255, 255);             $font_size = 14;
        imagestring($image_p, $font_size, 5, 5, $text, $white);                 header('Content-type: image/jpeg');
        imagejpeg($image_p, null, 80);
    }
.
.
. 
```

所以当我把要求搬到其他地方时，一切都很好！感谢小伙伴们的帮助！:)

# gwt - 新的 Firefox 13 是否有开发模式插件？

> ID：11037739
> 
> 赞同：7
> 
> 时间：2012-06-14T16:47:10.463
> 
> 标签：gwt

为了排除有关 Firefox 13 的 GWT 开发模式插件可用性的问题，我在下面发布了这个问题及其答案。

那么，新的 Firefox 13 是否有开发模式插件？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T16:53:00.493

是的，[再次感谢 Google 的 Alan Leung](https://groups.google.com/forum/?fromgroups#!topic/google-web-toolkit/EoTbKTvJRyk)。以下是 Alan 帖子的直接 FF13 Dev Mode 插件下载链接：[Linux32](http://acleung.com/ff13-linux32.xpi)、[Linux64](http://acleung.com/ff13-linux64.xpi)、[Windows](http://acleung.com/ff13-win.xpi)和[Mac](http://acleung.com/ff13-mac.xpi)。

更新：该插件也可作为源存储库中的[全平台构建](http://google-web-toolkit.googlecode.com/svn/trunk/plugins/xpcom/prebuilt/gwt-dev-plugin.xpi)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T09:16:12.260

直接链接

[https://groups.google.com/forum/?fromgroups=#!topic/google-web-toolkit/EoTbKTvJRyk](https://groups.google.com/forum/?fromgroups=#!topic/google-web-toolkit/EoTbKTvJRyk)

该插件也可作为全平台版本使用。

# crystal-reports - 如何缩小细节部分？

> ID：11037740
> 
> 赞同：0
> 
> 时间：2012-06-14T16:47:17.327
> 
> 标签：crystal-reports, crystal-reports-2008

我报告中的详细信息部分似乎与 11 英寸挂钩。我不能把它缩小到下面。我可以把它变大。是否在某个地方定义了它的最小尺寸？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T16:47:17.657

问题解决了。

通过选择一个向下延伸到详细信息部分底部下方的区域，我发现有两个隐藏（在选择之前不可见）对象跨越详细信息部分的最底部，即报表页脚部分和页面页脚部分。

删除它们使我可以将详细信息部分的大小缩小到更合理的程度。

我不是该报告的原始开发人员，因此可能是早期的开发人员做了一些古怪的事情，或者文件以某种方式损坏了。

# macos - 在带有 Firefox 的 OS X 上使用 .htaccess 和 pdf

> ID：11037742
> 
> 赞同：1
> 
> 时间：2012-06-14T16:47:18.083
> 
> 标签：macos, .htaccess, pdf, web, mime

我试图让一个目录指向一个pdf文件。所以在目录中我有一个 .htaccess 文件，上面写着：

```
DirectoryIndex vitae.pdf 
```

这适用于我尝试过的每个 Windows 和 Linux 发行版。但是，如果我在 OS X 10.7 上使用带有 Firefox 13 的机器访问该目录，它会尝试下载具有奇怪文件名的文件（例如“59GFLAOl.dms-1.part”）并且无法打开它。

我尝试添加以下行：

```
Content-Type: application/pdf 
```

和

```
ForceType application/pdf 
```

但我没有运气。想法？

# python - 带有参数的循环中的Python线程模块？

> ID：11037748
> 
> 赞同：2
> 
> 时间：2012-06-14T16:47:36.200
> 
> 标签：python, multithreading, urllib2

我正在尝试创建一个爬虫来爬取网站上的前 100 个页面：

我的代码是这样的：

```
def extractproducts(pagenumber):
    contenturl = "http://websiteurl/page/" + str(pagenumber)

    content = BeautifulSoup(urllib2.urlopen(contenturl).read())
    print pagehtml

pagenumberlist = range(1, 101)

for pagenumber in pagenumberlist:
    extractproducts(pagenumber) 
```

在这种情况下，我该如何使用线程模块，以便 urllib 使用多线程一次抓取 X 个 URL？

/新出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:51:58.673

最有可能的是，您想使用[multiprocessing](http://docs.python.org/library/multiprocessing.html)。有一个`Pool`你可以用来并行执行多个事情：

```
from multiprocessing import Pool

# Note: This many threads may make your system unresponsive for a while
p = Pool(100)

# First argument is the function to call,
# second argument is a list of arguments
# (the function is called on each item in the list)
p.map(extractproducts, pagenumberlist) 
```

如果您的函数返回任何内容，`Pool.map`将返回一个返回值列表：

```
def f(x):
    return x + 1

results = Pool().map(f, [1, 4, 5])
print(results) # [2, 5, 6] 
```

# abap - 带有选择的循环内的意外结果

> ID：11037749
> 
> 赞同：1
> 
> 时间：2012-06-14T16:47:47.147
> 
> 标签：abap, opensql

我从透明表和集群表中选择数据并将结果放入内部表中。由于无法连接集群表，因此我使用了两个`select single`来从集群表中检索数据。

问题是，在循环中，每个输出行都被分配了与内部表中第一行相同的信息（`D`在每一行）。可能是因为 where 条件的字段从`BELNR`列中检索了 3 行具有相同值的行。

首先，这里是代码：

```
FORM select_data1 CHANGING lt_data LIKE gt_map1\.   
  FIELD-SYMBOLS: <fs_main> TYPE zimposto_consumo.

  SELECT a~belnr d~spart a~bldat a~waers c~wrbtr a~hwaer c~dmbtr  
    INTO CORRESPONDING FIELDS OF TABLE lt_data
          FROM ( ( bkpf AS a
      INNER JOIN bsis AS c ON c~belnr = a~belnr )
      INNER JOIN vbrk AS d ON d~xblnr = c~belnr )
      WHERE a~belnr IN belnr.

  LOOP AT lt_data ASSIGNING <fs_main>.
      SELECT SINGLE kbetr fwste hwste FROM bset
        INTO (<fs_main>-kbetr, <fs_main>-fwste, <fs_main>-hwste)
        WHERE belnr = <fs_main>-belnr.

      SELECT SINGLE koart FROM bseg
        INTO (<fs_main>-koart)
        WHERE buzei = 1
        AND belnr = <fs_main>-belnr.

    IF <fs_main>-koart = 'D'.    
          FORMAT COLOR COL_NORMAL INTENSIFIED OFF.
          WRITE:/
                  sy-vline NO-GAP,
                  (16) <fs_main>-belnr NO-GAP,
                  sy-vline NO-GAP,
                  (16) <fs_main>-spart NO-GAP,
                  sy-vline NO-GAP,
                  (10) <fs_main>-bldat NO-GAP,
                  sy-vline NO-GAP.
                  perc = <fs_main>-kbetr / 10.
                  WRITE: (10) perc NO-GAP,
                  sy-vline NO-GAP,
                  (5) <fs_main>-waers NO-GAP,
                  sy-vline NO-GAP,
                  (16) <fs_main>-wrbtr NO-GAP,
                  sy-vline NO-GAP,
                  (16) <fs_main>-fwste NO-GAP,
                  sy-vline NO-GAP,
                  (5) <fs_main>-hwaer NO-GAP,
                  sy-vline NO-GAP,
                  (16) <fs_main>-dmbtr NO-GAP,
                  sy-vline NO-GAP,
                  (16) <fs_main>-hwste NO-GAP,
                  sy-vline NO-GAP.
                  WRITE:/ sy-uline(137).
                  write: <fs_main>-koart. 
    ELSE.   
                  write: 'Não há dados a mostrar.'. 
    ENDIF.   
  ENDLOOP.

ENDFORM.                    "select_data1 
```

结果是这个：

![运行时结果](../Images/c0b29f0e832820d25055c20f3f1b7c70.png)

输出表右侧的“D”不应该`D`是 3 行。只有第一个应该是`D`，另外两个应该是`S`。

怎么了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T18:38:22.720

你`WRITE <fs_main>-koart.`在块里面`IF <fs_main>-koart = 'D'.`。

所以你总是得到`D`. 我认为这是代码副本的问题。

你用

```
 SELECT SINGLE koart FROM bseg
        INTO (<fs_main>-koart)
        WHERE buzei = 1
        AND belnr = <fs_main>-belnr. 
```

你不检查`SY-SUBRC`。如果没有找到条目，则旧值`<fs_main>-koart`保留在变量中。

我会推荐：

```
 clear <fs_main>-koart.
      "<fs_main>-koart = '?'.    "Alternative
      SELECT SINGLE koart FROM bseg
        INTO (<fs_main>-koart)
        WHERE buzei = 1
        AND belnr = <fs_main>-belnr. 
```

或者

```
 SELECT SINGLE koart FROM bseg
        INTO (<fs_main>-koart)
        WHERE buzei = 1
        AND belnr = <fs_main>-belnr.
      IF SY-SUBRC NE 0.
        clear <fs_main>-koart.
        "<fs_main>-koart = '?'.    "Alternative
        " or you may skip the output with NEXT
      ENDIF. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T18:07:27.893

您的选择中有行项目 (BUZEI) 硬编码。我怀疑这是重复数据的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T13:51:38.940

只是一个评论，我觉得很奇怪你没有按公司和年份过滤。记住今年文件的相同 BELNR 明年不会是相同的文件。公司也是一样。

请确保这是您希望程序显示的内容。因为当会计年度更改或将新公司添加到系统中时，它可能会成为问题。

# jquery - 如何在fadeIn 之前完成jQuery html() 加载？

> ID：11037750
> 
> 赞同：1
> 
> 时间：2012-06-14T16:47:51.700
> 
> 标签：jquery, html

我使用此脚本在另一个 div 中加载某些 div 的内容：

```
$(function() {
        $('#menu a').click(function(e) {
            e.preventDefault();
            var h = $(this).attr('href');
            $('#aqui').hmtl($(h).html()).fadeOut('slow').fadeIn('slow');
            //alert(h);
        });
    }); 
```

但是，正如您在此处看到的：http: [//jsfiddle.net/8rB3S/](http://jsfiddle.net/8rB3S/)，内容是在`fadeOut()`生效前加载的。

我试试这个技巧：[https](https://stackoverflow.com/a/2745494/588842) ://stackoverflow.com/a/2745494/588842 ，但是有`.html()`，这不起作用....只有这个`fadeOut`，不`fadeIn`

像这样的东西：`$('#aqui').fadeOut('slow').hmtl($(h).html, function(){$(this).fadeIn('slow');})`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T16:55:16.753

[html()](http://api.jquery.com/html/)是同步的，传递一个回调函数不会做任何事情。

另一方面，[fadeOut()是异步的。](http://api.jquery.com/fadeOut/)因此，首先调用它并提供一个回调函数来修改标记，然后将元素淡入：

```
$("#aqui").fadeOut("slow", function() {
    $(this).html($(h).html()).fadeIn("slow");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T16:53:42.493

我不确定想要的效果是什么，但试试下面的代码，

**演示**：http: [//jsfiddle.net/skram/8rB3S/2/](http://jsfiddle.net/skram/8rB3S/2/)

```
$(function() {
    $('#menu a').click(function(e) {
        e.preventDefault();
        var h = $(this).attr('href');
        $('#here').fadeOut(100, function () {
            $(this).html($(h).html())           
           .fadeIn('slow');
        });
    });
}); 
```

或者

**演示： http:** [//jsfiddle.net/skram/8rB3S/1/](http://jsfiddle.net/skram/8rB3S/1/)（`#here`因为这似乎是你想要的地方）

```
$(function() {
    $('#menu a').click(function(e) {
        e.preventDefault();
        var h = $(this).attr('href');
        $('#aqui')
           .hide()
           .html($(h).html())           
           .fadeIn('slow');        
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T16:56:46.780

在淡出淡入功能中使用回调：

```
$(function() {
        $('#menu a').click(function(e) {
            e.preventDefault();
            var h = $(this).attr('href');
            $('#aqui').fadeOut('slow', function(){
                $(this).html($(h).html());
                $(this).fadeIn('slow');
            }):
        });
}); 
```

# android - Android片段onCreateView在彼此之上创建重复视图

> ID：11037752
> 
> 赞同：1
> 
> 时间：2012-06-14T16:47:53.453
> 
> 标签：android, user-interface, views

在我的应用程序中，当我暂停时，恢复时，我会看到重复的视图堆叠在一起，最上面的是唯一可编辑的视图。我的 onCreateView() 在下面。有什么建议么？

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    View v = super.onCreateView(inflater, container, savedInstanceState);

    Item currentItem = Global.DataManager.getItem();

    // Set the different details
    ((EditView) v.findViewById(R.id.item_title))
            .setText(currentItem.getTitle());
    ((EditView) v.findViewById(R.id.item_type))
            .setText(currentItem.getType());
    ((EditView) v.findViewById(R.id.item_details))
            .setText(currentItem.getDetails());

    return v;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:00:55.487

您的问题很可能不在`onCreateView()`. 相反，我怀疑您正在第二次创建片段。您只需要创建一次片段，即使由于配置更改（例如，纵向 -> 横向旋转）而破坏并重新创建活动也是如此。

# ruby-on-rails - Ruby on Rails 中的 Runner

> ID：11037753
> 
> 赞同：29
> 
> 时间：2012-06-14T16:47:58.843
> 
> 标签：ruby-on-rails, runner

什么是脚本/跑步者？

什么是跑者？

如何在 Ruby 文件上使用 runner？

在命令提示符下输入的所有命令是什么？

顺便说一句，我正在使用 Windows。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-14T16:52:03.410

从[Rails 指南](https://guides.rubyonrails.org/command_line.html#bin-rails-runner)：

> ### 1.7`rails runner`
> 
> `runner`在 Rails 的上下文中以非交互方式运行 Ruby 代码。例如：
> 
> ```
> $ rails runner "Model.long_running_method" 
> ```
> 
> 您还可以使用别名“r”来调用运行器：`rails r`.
> 
> 您可以使用`-e`开关指定运行器命令应在其中运行的环境。
> 
> ```
> $ rails runner -e staging "Model.long_running_method" 
> ```

任何要运行的代码都必须作为 Rails 应用程序的一部分加载，即在`app/`或`lib/`等其他地方。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-02-10T15:02:44.350

您可以将 Ruby 文件放入 /lib 文件夹并通过以下方式执行它：

```
rails r lib/script.rb 
```

就是这样。

# clojurescript - Clojurescript：将 cljs 映射转换为 javascript 哈希

> ID：11037755
> 
> 赞同：11
> 
> 时间：2012-06-14T16:48:06.740
> 
> 标签：clojurescript

## 以下代码段不起作用

```
 headerElement (goog.dom/createDom
                    "div" (.strobj {"style" "background-color:#EEE"})
                    (:title note)) 
```

## 原因：

{ ... } 创建一个 Clojurescript 映射。我需要一个 javascript 对象/哈希。

## 问题：

我如何进行这种微不足道的转换？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-08-28T07:27:38.007

您还可以使用`#js`阅读器文字来创建 JavaScript 对象或数组。

你可以写：

```
(def test1 #js {:foo 1 :bar false}) 
```

它创建了 JavaScript 代码：

```
namespace.test1 = {"bar":false, "foo":1}; 
```

对于数组：

```
(def test2 #js [1 2 3 false nil true]) 
```

创建：

```
namespace.test2 = [1, 2, 3, false, null, true]; 
```

您还可以使用`clj->js`功能：

```
(clj->js :style "background-color:#EEE") 
```

它的好处是它可以递归地工作 - 转换嵌套的数据结构。

我发了一篇关于它的[帖子](http://www.spacjer.com/blog/2014/09/12/clojurescript-javascript-interop/)（如果我可以为自己做广告）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T21:54:00.253

cljs.core/js-obj 应该对此有所帮助。请注意，它需要普通的数组/列表（不是地图）。

```
headerElement (goog.dom/createDom
               "div" (js-obj "style" "background-color:#EEE")
               (:title note)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T02:00:07.867

这个宏可以让你使用`js-obj`关键字：

**宏**

```
(defmacro obj [& key-values]
(let [obj-def (apply concat (map #(list (name (first %)) (last %))
     (partition 2 key-values)))]
    `(cljs.core/js-obj ~@obj-def)
)) 
```

**用法**

```
(obj 
    :key someVal
    :otherKey (fn [a b] a)
) 
```

# html - 在 contenteditable div 中强制字体格式

> ID：11037758
> 
> 赞同：0
> 
> 时间：2012-06-14T16:48:13.923
> 
> 标签：html

我将如何强制在内容可编辑的 div 中设置字体格式，例如，如果用户将斜体或粗体文本粘贴到我的 div 中，我如何使其不以斜体或粗体显示文本，而仅以正常的非格式化显示文本？

我想保留标签和空格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:04:54.470

你需要 JavaScript 或 jQuery 来做到这一点。这是一个jQuery解决方案：

```
$('[contenteditable]').on('blur keyup paste', function() {
    $(this).html($(this).text());
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/mcTnr/)**。

# java - 多线程测试

> ID：11037761
> 
> 赞同：1
> 
> 时间：2012-06-14T16:48:29.030
> 
> 标签：java, multithreading, testing

我的任务是首先编写一个多线程客户端服务器应用程序，然后用大量客户端（100 个客户端每个发送 1000 条消息）对其进行测试。所以我有正常工作的控制台客户端服务器。客户端有两个线程，一个用于输入，另一个用于输出。现在我开始编写测试。在我看来，它的工作模式应该是：执行应该等待接受新客户端的服务器线程，然后我将执行 InputThreads（将其连接到服务器）并在循环中写入测试协议。我对吗？

所以我写了这样的东西：

```
public class ServerLoadTest {
    private static final Logger LOG = Logger.getLogger(ServerLoadTest.class);
    private ExecutorService clientExec = Executors.newFixedThreadPool(100);
    private ExecutorService serverExec = Executors.newFixedThreadPool(100);

    @Test
    public void test() throws IOException, JAXBException, XMLStreamException, ParserConfigurationException, SAXException, InterruptedException {        
        LOG.trace("Start testing");     
        serverExec.execute(new TestServerThread());     

        for (int i = 0; i < 100; i++) { 
            clientExec.execute(new TestClientThread());
        }

        Assert.assertTrue(true);
        LOG.trace("All working fine");
        clientExec.shutdown();
    }

}

class TestClientThread implements Runnable {
    private static final Logger LOG = Logger.getLogger(TestClientThread.class);
    private ExecutorService outputExec = Executors.newFixedThreadPool(2);

    public TestClientThread() {
        new Thread(this);
    }

    @Override
    public void run() {

        try {
            LOG.trace("Starting Socket");
            Socket s = new Socket("localhost", 4444);
            OutputThread spamming = new OutputThread(s, new PrintWriter(s.getOutputStream(), true), new BufferedReader(
                    new InputStreamReader(s.getInputStream())));
            exec.execute(spamming);

            spamming.getOut().println("HO HO Ho HO HO");

            InputThread getSpamAnswer = new InputThread(s, new BufferedReader(new InputStreamReader(s.getInputStream())));
            outputExec.execute(getSpamAnswer);

        } catch (IOException | JAXBException | XMLStreamException | ParserConfigurationException | SAXException e) {
            e.printStackTrace();
        }
    }
}

class TestServerThread implements Runnable {
    private Server king = mock(Server.class);

    public TestServerThread() {
        new Thread(this);
    }

    @SuppressWarnings("static-access")
    @Override
    public void run() {
        try {
            king.main(null);
        } catch (IOException | JAXBException | ParserConfigurationException | SAXException e) {
            Assert.assertFalse(false);
        }
    }
} 
```

首先，服务器上有很多 LOG.trace，但我在控制台中没有，当我调试时收到客户端无法连接的异常（我认为它没有时间这样做） . 我应该如何同步这个？

**PS Server 是多线程的，并且支持许多客户端。现在我只想从源头测试它。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T17:53:47.347

您的防火墙是否打开，允许该端口上的传入连接？

此外，您并没有真正复制客户端-服务器架构，因为只有一个套接字被所有“客户端”线程共享。这可能是您的错误的来源（多个线程访问同一个对象 - 在本例中为流）。

请参阅 Oracle 的此文档，了解如何使用单独的进程和套接字正确设置客户端/服务器演示：http: [//docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html](http://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html)这将允许您模拟什么实际上会发生，并且对代码进行了很好的解释。

# android - 在哪里放置 .so 文件以便它包含在最终构建中

> ID：11037765
> 
> 赞同：2
> 
> 时间：2012-06-14T16:49:00.000
> 
> 标签：android, android-ndk, android-source

我有一个 .so 文件，它被 AOSP 系统包中的其他项目引用。为了使引用成为可能，我在 AOSP/external 包中创建了一个新项目，其中包含两个文件，即 Android.mk 和 xyz.so 文件。Android.mk 如下所示。

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE := customutil
LOCAL_SRC_FILES := xyz.so
include $(PREBUILT_SHARED_LIBRARY) 
```

在编译期间，它给了我以下错误。

制作：***没有规则可以制作目标`out/target/product/crespo/obj/lib/customutil.so', needed by`/目标/产品/crespo/obj/EXECUTABLES/abc_agent_intermediates/LINKED/abc_agent'。停止。

我应该将 xyz.so 文件保存在哪里，或者我应该进行哪些更改，以便在构建 AOSP 时不会出现此错误？

* * *

寿司

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:06:41.330

您的模块规则有问题。

当您有一个带有 的预构建库时`LOCAL_MODULE := customutil`，链接器将获得附加标志`-lcustomutil`。因此，您`LOCAL_SRC_FILES :=`需要`LOCAL_SRC_FILES := libcustomutil.so`

因此 Android.mk 部分应该是：

```
# Prebuilt Lib
include $(CLEAR_VARS)
LOCAL_MODULE := xyx
LOCAL_SRC_FILES := libxyz.so
include $(PREBUILT_SHARED_LIBRARY) 
```

这也意味着您需要适当地重命名库或根据库名称设置模块名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-08T12:19:24.110

默认情况下，对于预构建，LOCAL_SRC_FILES 是相对于您当前的 LOCAL_PATH 定义的，因此如果您的 Android.mk 位于 下`$PROJECT/jni/Android.mk`，您应该将其放在`$PROJECT/jni/xyz.so`

该名称也应该是可能的 libxyz.so 而不是 xyz.so（尽管这可能在没有 lib 前缀的情况下工作）。

如果您计划支持多个 CPU ABI，请尝试使用子目录，如下所示：

```
include $(CLEAR_VARS)
LOCAL_MODULE := libxyz
LOCAL_SRC_FILES := $(TARGET_ARCH_ABI)/libxyz.so
include $(PREBUILT_SHARED_LIBRARY) 
```

并将文件放在：

```
$PROJECT/jni/armeabi/libxyz.so
$PROJECT/jni/armeabi-v7a/libxyz.so
$PROJECT/jni/x86/libxyz.so
... 
```

最后，您还可以为 LOCAL_SRC_FILES 使用绝对路径，构建系统将从那里选择文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-21T09:27:56.570

我在 AOSP 源代码的外部文件夹中添加了预构建的 .so 文件，如下所示：-

第 1 步：- 我在 AOSP 的外部文件夹中创建了一个文件夹（比如说 myLibs），然后我在其中添加了我的 .so 文件并在 Android.mk 文件中添加了以下代码

```
# Prebuilt Lib
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE := libMyabc  # your lib name
LOCAL_SRC_FILES := libMyabc.so
  # your lib .so file name
include $(BUILD_SHARED_LIBRARY) 
```

然后我在 LOCAL_SHARED_LIBRARIES 部分的 Frameworks/base/core/jni/Android.mk 文件中添加了我的共享库名称。

现在它在 out/target/product/generic/obj/lib 文件夹中生成我的 .so 文件

谢谢快乐编码...

# c# - 用逗号格式化十进制，保留尾随零

> ID：11037766
> 
> 赞同：13
> 
> 时间：2012-06-14T16:49:10.847
> 
> 标签：c#, .net, decimal, string-formatting

我想将小数转换为字符串，用逗号作为千位分隔符，并保持与创建小数时相同的精度。（将有 2-5 个有效数字）

```
 decimal d = 1234.4500M;

        //I'd like "1,234.4500"

        var notRight = d.ToString("###,###.#######");     //1,234.45
        var alsoNotRight = d.ToString("###,###.00000");;  //1,234.45000
        var notRightEither = d.ToString("N");    //1,234.45
        var notRightEither2 = d.ToString("G");   //1234.45000 
```

如果不手动解析字符串，是否没有内置方法可以做到这一点？如果没有单一格式字符串，那么最简单的方法是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-14T16:57:33.337

根据[文档](http://msdn.microsoft.com/en-us/library/system.decimal.aspx)，十进制数保留尾随零。如果您使用“G”说明符或根本不使用说明符，则可以显示它们。当您使用包含千位分隔符的说明符之一时，它们会丢失。

如果要在转换为字符串时指定尾随零的数量，可以通过在格式字符后添加[精度说明符（0 到 99 位）来实现，如下所示：](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)

```
decimal d=1234.45M;
var numberAsString=d.ToString("N4"); 
```

结果将是

```
 1,234.4500 
```

**更新：您可以使用**[Decimal.GetBits](http://msdn.microsoft.com/en-us/library/system.decimal.getbits.aspx)方法 获取十进制位数，该方法返回数字的二进制表示。小数位数存储在第四个元素的第 16-23 位（第三个字节）中。

`The fourth element of the returned array contains the scale factor and sign. It consists of the following parts:`

...

`Bits 16 to 23 must contain an exponent between 0 and 28, which indicates the power of 10 to divide the integer number.`

使用所有数字获取字符串表示可以这样完成：

```
decimal d=1234.45000M;
var nums=Decimal.GetBits(d);
var decimals=BitConverter.GetBytes(nums[3])[2];
var formatStr="N"+decimals;
d.ToString(formatStr); 
```

这将产生

```
1,234.45000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T17:18:48.733

由于您计划使用**可变的小数位数 (2-5)**，我认为您不能通过字符串格式将其拉下来。

这个解决方案不一定漂亮，但它可以完成工作。请注意，它会在过程中分配几个字符串（我相信是5个），所以它在大规模使用时可能表现不佳。您将保留小数位数，并在小数点前的部分中获得逗号分隔的组。

```
public static string FormatDecimal(decimal d)
{
    return d.ToString("N0") + // Format portion before decimal
           "." + 
           d.ToString().Split('.')[1];  // Retain number of decimal places
} 
```

# c++ - Ubuntu 的 C++ 更新框架

> ID：11037777
> 
> 赞同：2
> 
> 时间：2012-06-14T16:50:03.307
> 
> 标签：c++, linux, ubuntu, frameworks, the-update-framework

我主要为 Ubuntu Linux 编写了一个 C++ 应用程序，并且正在寻找一个自动更新框架，即我希望应用程序检查更新并在可用和经过身份验证时下载它们。

我一直无法在 Linux 上找到 C++ 框架。我找到了 TUF，但 tha 是针对 python 的，Sparkle 是针对 OSX 的。那么有人知道可以帮助我的框架吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:47:09.663

如果您*只*对为 Ubuntu 提供此应用程序感兴趣，请查看 LaunchPad 的 PPA 功能： [https ://help.launchpad.net/Packaging/PPA](https://help.launchpad.net/Packaging/PPA)

这允许您创建自己的 APT 存储库。任何将你的 repo 添加到他的系统的用户都会自动获得你通过 repo 推送的所有更新。

当然，其他 Linux 发行版也有类似的设置，例如 Opensuse 有 OBS。但这不是你问题的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-03T20:08:55.127

Notary 是用 Go 编写的更新框架 (TUF) 的实现。它由云原生计算基金会托管，是 Docker 的核心组件。

[https://github.com/theupdateframework/notary](https://github.com/theupdateframework/notary)

# jquery - jQuery Pagination Wordpress 小部件后 Dom Css 丢失

> ID：11037779
> 
> 赞同：8
> 
> 时间：2012-06-14T16:50:06.487
> 
> 标签：jquery, ajax, wordpress, pagination

我为 Wordpress 开发了一个小部件来显示投资组合，用户可以选择是否需要分页、过滤类别、每页帖子的数量……等等，它与我制作的 php 分页系统完美配合。

我正在尝试在小部件中对此分页实现 ajax jquery 以使其重新加载而无需重新加载整个页面。我有这个代码：

```
jQuery('.paginate a').live('click', function(e){ 
e.preventDefault(); 

var link = jQuery(this).attr('href');  
jQuery('.widget_gantry_portfolio').html('<div class="loading"></div>');
jQuery('.widget_gantry_portfolio').load(link+' .widget_gantry_portfolio .portfolio_class'); 
```

分页在 php 中完美运行，当我实现此代码时，分页可以工作，但是当单击小部件时会丢失所有用户首选项（显示过滤器，显示分页..等），div 也失去了他们计算的宽度和高度首先存在在 css 中（在**firebug**中看到）：

```
element.style{width and height} 
```

我已经有几天了，并且已经证明而不是**live、on 和 delegate**等等，但是它们都不起作用，这个 ajax 分页在我网站上的帖子分页中也能完美地工作，但是小部件不会重新加载 Dom 元素?

对我来说最重要的是：

-在DOM css中，每个缺少宽度和高度的元素，首先这个宽度是用functions.php enqued脚本计算的，例如当它有4列时：

```
var mysizes = function() {
    theWidth4 = jQuery(".mosaic-block4c img").css('width');
    jQuery(".mosaic-block4c").css('width', theWidth4);
    theHeight4 = jQuery(".mosaic-block4c img").css('height');
    jQuery(".mosaic-block4c").css('height', theHeight4);
} 
```

我调用 mysizes(); 带有标签的小部件 php 中的函数

- 我认为缺少类别的过滤器是因为，当分页加载时，它无法识别小部件的用户预设。它在第一页中完美地识别它，但在后续页面中没有。

链接到投资组合小部件分页无法正常工作的网站（请单击 2 页查看）：

[http://framecero.com/aagantrywordpress/?page_id=635](http://framecero.com/aagantrywordpress/?page_id=635)

链接到具有相同分页工作的示例类别（页面底部的分页）：

[http://framecero.com/aagantrywordpress/?cat=4](http://framecero.com/aagantrywordpress/?cat=4)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-17T20:47:48.170

来自[Jure C. 评论](https://stackoverflow.com/questions/11037779/dom-css-lost-after-jquery-pagination-wordpress-widget#comment14565506_11037779)：

> 快速浏览表明您至少在更改 HTML 结构。在分页页面上，您有`.portfolio_class`两次嵌套，而原始页面只有一次。

# android - 升级到 Proguard 4.8 后无法导出应用程序

> ID：11037781
> 
> 赞同：7
> 
> 时间：2012-06-14T16:50:19.140
> 
> 标签：android, eclipse, adt, proguard, android-library

我刚刚将我的 Android SDK、ADT 和 Proguard 升级到了最新最好的版本。

我的项目编译构建并在调试模式下运行良好，但是当我尝试导出它的签名发布 APK 时，我从导出向导收到一个错误，**而 Eclipse 控制台上没有任何错误日志消息！***

![在此处输入图像描述](../Images/ceccc6e265e870b345c66e5338b9e2c4.png)

如果我尝试通过`Window->Show View->Error Log`我看到的所有内容查看错误日志，则更多相同：

![在此处输入图像描述](../Images/d92f1e2e318bf334b6902ff6017d3f48.png)

我不知道该怎么做，因为 Eclipse 和 Proguard 都不会给出**任何**关于问题可能是什么的提示。

在最近的升级之前，我的项目导出良好。没有构建警告。没有棉绒警告！

我正在使用适用于 Android 的标准配置文件`${sdk.dir}\tools\proguard\proguard-android.txt`：

```
-dontusemixedcaseclassnames
-dontskipnonpubliclibraryclasses
-verbose

-dontoptimize
-dontpreverify

-keepattributes *Annotation*
-keep public class * extends android.app.Activity
-keep public class * extends android.app.Application
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider
-keep public class * extends android.app.backup.BackupAgent
-keep public class * extends android.app.backup.BackupAgentHelper
-keep public class * extends android.preference.Preference
-keep public class * extends android.support.v4.app.Fragment
-keep public class * extends android.app.Fragment
-keep public class com.android.vending.licensing.ILicensingService

-keepclasseswithmembernames class * {
    native <methods>;
}

-keep public class * extends android.view.View {
    public <init>(android.content.Context);
    public <init>(android.content.Context, android.util.AttributeSet);
    public <init>(android.content.Context, android.util.AttributeSet, int);
    public void set*(...);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet, int);
}

-keepclassmembers class * extends android.app.Activity {
   public void *(android.view.View);
}

-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

-keep class * implements android.os.Parcelable {
  public static final android.os.Parcelable$Creator *;
}

-keepclassmembers class **.R$* {
    public static <fields>;
}

-dontwarn android.support.** 
```

而我项目的 proguard.cfg 只包含：

```
-assumenosideeffects class android.util.Log {
    public static *** v(...);
    public static *** i(...);
    public static *** d(...);
    public static *** w(...);
    public static *** e(...);
} 
```

以前有人见过这个问题吗？知道如何解决这个问题吗？

**一些进展？**自从我通过这样做升级以来，我第一次能够导出签名的 APK：

1.  我运行 CCleaner 来清理 Windows 系统中的所有临时文件和缓存，
2.  然后我重新启动了 Windows。

但令我沮丧的是，下次我再次尝试导出已签名的 APK 时，我收到了同样`Failed to export application`的消息，**但没有控制台消息！**再次！

现在我很清楚，Android 开发工具已经变得不稳定。每次我想导出签名的 APK 时，我都无法真正运行 CCleaner 并重新启动 Windows。而且我不在乎是谁的错：Android SDK？ADT 插件？前卫？

现在我该怎么做？

**再进步一点？**我尝试在关闭 Proguard 的情况下导出签名的 APK。它导出正常，但是当我启动它时，它会因为找不到应用程序的活动类 ( `ClassNotFoundException`) 而立即崩溃。这很奇怪！它在调试模式下运行良好，如果应用程序的活动类不存在，它不应该编译！这是怎么回事？最新最好的 Android 开发工具是否损坏？

我尝试按照[此解决方案](https://stackoverflow.com/a/9831061)（以及[此](https://stackoverflow.com/a/10866563)`Order and Export`解决方案）中的描述使用选项卡，但没有帮助。

现在我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T20:13:50.820

~~你正在运行 Windows XP，所以我不确定我是否能提供帮助（我正在运行 Windows 7 64 位），但你对 @Boe-Dev 关于“17 个未解决的类引用”的评论让我想起了我最近与升级类似于你的：~~

我通过将以下行放入[解决了这个问题](https://stackoverflow.com/a/11008325/576267)`proguard.cfg`：

```
-dontwarn com.bta.myapp.MyAppActivity.R** 
```

~~不知道你的问题是否和我的一样，但可能值得一试。~~

**编辑：**注意到即使你关闭 Proguard 你也有问题，我可以建议以下吗？

1.  从标准 Java 构建路径中删除库：右键单击项目名称 > 属性 > Java 构建路径 > 选项卡库 > 删除除“Android XX”和“Android 依赖项”之外的所有内容</li>
2.  将库文件夹从“lib”重命名为“libs”。通过这样做，文件夹“libs”中的所有库都被Android插件找到并添加到项目的“Android Dependencies”项中
3.  清理项目（考虑到 Android 开发工具的不可预测性，总是有必要的）

让我们知道它是如何工作的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T18:58:24.247

你的错误日志怎么样。窗口->显示视图->错误日志。与控制台输出不同，错误代码 1 往往会出现在此处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T16:52:33.847

尝试在 Eclipse 中重新安装您的 ADT 插件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T02:42:31.000

这是对我有用的关键

[http://android.foxykeep.com/dev/fix-the-conversion-to-dalvik-format-failed-with-error-1-with-adt-14](http://android.foxykeep.com/dev/fix-the-conversion-to-dalvik-format-failed-with-error-1-with-adt-14)

据称已在 ADT-15 中修复，解决方法是

1) 对于每个 X_src 元素，右键单击它，然后构建路径 > 从构建路径中删除。

2）将打开一个弹出窗口。确保选中“同时从项目中取消链接文件夹”，然后接受它。

您仍然可以调试库代码，但您需要管理这些项目中的断点，然后单步执行类文件选项卡中的代码。

# c# - 仅在 Crystal Report 具有详细信息时加载徽标

> ID：11037785
> 
> 赞同：1
> 
> 时间：2012-06-14T16:50:38.640
> 
> 标签：c#, datatable, crystal-reports, crystal-reports-xi

我正在尝试在 Crystal Reports 中加载公司的徽标。为此，我在 DataSet 中创建了另一个名为 ReportSetup 的 DataTable（除了包含所有详细信息的 DataTable，我称之为 ReportData），它只有一个名为 LogoData 的 System.Byte[] 类型的列。然后，我将 LogoData 字段拖放到我的报告中，并希望它在我运行报告后显示我的图像。

但是，尽管徽标实际上出现在报表中，但它仅在其他数据表 (ReportDate) 具有条目时才会出现。如果我的报告中没有任何详细信息，则不会显示徽标。当我调试时，我可以看到正在执行加载我的数据表的代码，因此正确的数据被放入 ReportSetup 数据表中，只是没有显示出来。知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T19:45:29.863

如果徽标的数量“过多”，您可以将每个图像嵌入到其自己的部分中，然后添加一个对参数做出反应的条件抑制公式。

```
//add a conditional-suppression formula for each section that contains a logo
//change name to match logo
Local Stringvar companyName:="Acme";
{?CompanyName}<>companyName; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T08:44:33.487

我认为您可以在代码中更改图像源，这样您就可以按照@HardCode 的建议将占位符徽标添加为图像，然后在运行时替换它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T20:44:29.217

我认为您需要使用子报告。如果您的数据源中有多个不相关（未连接）的表，CR 会给您一个警告。问题是 CR 不知道从哪个表开始。

# java - GAE：知道特定任务是否在队列中

> ID：11037789
> 
> 赞同：3
> 
> 时间：2012-06-14T16:51:02.917
> 
> 标签：java, google-app-engine, task, task-queue

我必须知道一个特定的任务，具体由 url 上的参数指定，是否在队列中......应该有可能吗？

我正在使用 Java ！

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T00:25:47.510

您可能可以使用[Named Tasks](https://developers.google.com/appengine/docs/java/taskqueue/overview#Task_Names)来做到这一点。

例如，您可以散列任务参数并将结果设置为名称。然后，如果您尝试两次插入具有相同参数的任务，则第二次插入将失败。

如前所述，这里存在竞争条件，您可能需要考虑是否存在这样的设计，即在任何时候在队列中拥有多个相同任务的副本不会导致问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T17:01:43.177

您可以使用 TASK Queue REST API 来检查队列中任务的状态

[https://developers.google.com/appengine/docs/java/taskqueue/rest#method_taskqueue_tasks_list](https://developers.google.com/appengine/docs/java/taskqueue/rest#method_taskqueue_tasks_list)

或者，您可以提前为其编写代码，使用 com.google.appengine.api.taskqueue.TaskHandle 类来获取任务的句柄，然后通过 API 公开对象

# visual-studio-2010 - Visual Studio 2010 中的临时工作窗口？

> ID：11037790
> 
> 赞同：2
> 
> 时间：2012-06-14T16:51:03.743
> 
> 标签：visual-studio-2010, visual-studio

（有关 VS2008 的类似问题，请参阅[Visual Studio 中是否有“便笺簿”窗口。）](https://stackoverflow.com/questions/246295/is-there-a-scratch-pad-window-in-visual-studio-2008)

当我在文本编辑器中处理项目时，我习惯于打开一个新的“匿名”文档窗口进行临时工作，然后在完成后关闭它。在 Visual Studio 中，创建一个新文档实际上是在某个位置创建一个新文档。到目前为止，我一直在使用记事本，但我错过了 IDE 功能，为此目的在 VS 旁边运行 Notepad++ 似乎有点愚蠢。

有没有办法从 Visual Studio 本身中做到这一点？

# javascript - 选择textarea jquery中的所有文本

> ID：11037797
> 
> 赞同：3
> 
> 时间：2012-06-14T16:51:27.317
> 
> 标签：javascript, jquery

当用户通过jquery打开它时，如何选择textarea中的所有文本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T16:52:57.770

```
$('textarea').on('mouseup', function() { $(this)[0].select(); });​ 
```

[http://jsfiddle.net/Tu9N7/](http://jsfiddle.net/Tu9N7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T16:53:04.820

[输入.选择](https://developer.mozilla.org/en/DOM/Input.select)

```
var eraInput = document.getElementById('era');
eraInput.select(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T16:55:09.293

```
$('textarea').focus(function() {
  this.select();
}) 
```

**[演示](http://jsfiddle.net/QStkd/209/)**

### 从“当用户通过 jquery 打开它时”这一行，我认为你需要类似的东西：

```
$('textarea').slideDown(function() {
    $(this).focus();
}).focus(function() {
    this.select();
}); 
```

在这里，我假设您`textarea`是隐藏的，并且您使用 jQuery 事件打开它，打开后默认选择文本。

**[演示](http://jsfiddle.net/QStkd/210/)**

# opencv - cvMat、Mat 和 IpImage 的区别

> ID：11037798
> 
> 赞同：20
> 
> 时间：2012-06-14T16:51:30.153
> 
> 标签：opencv

我目前正在尝试发现 opencv 库，但数据结构似乎有点混乱。所以每个都有`cv::Mat`,`cvMat`和`IpImage`, 和不同的例子。据我所知，opencv 已经从 C 迁移到 C++，然后对 2.4 版进行了重大更改。
那么推荐使用哪种数据结构，通常是否有任何文档，例如 opencv 程序员指南，解释推荐的数据结构以及此代码迁移是如何发生的（我不是在询问代码 api 或教程页面）

非常感谢

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-06-14T17:35:13.737

`cv::Mat`是 的 c++ 版本`cvMat`，它们是相同的，如果您查看代码，您会发现 c++ 版本只是转到 c 代码。如果您使用 C++，请使用`cv::Mat`.

C 没有名称空间，因此您可以将 cv 放在每个函数名称的前面，这样它就不会与其他库发生冲突

`IpImage`是旧的英特尔 IPP 兼容图像格式。您永远不需要使用它，但是如果您正在使用其他一些旧库，则可以在它们之间进行转换。

开始于[Welcome to opencv 文档](http://docs.opencv.org/)以获取新文档

（OpenCV 已经经历了几次重组，旧网站都陷入了混乱。希望从现在开始一切都在[http://opencv.org/](http://opencv.org/)之下）

# python - python嵌套列表：替换嵌套列表中的重复项，同时保留第一次出现

> ID：11037800
> 
> 赞同：0
> 
> 时间：2012-06-14T16:51:43.213
> 
> 标签：python, nested-lists

我有一个列表列表，并希望用破折号替换整个列表/矩阵中所有出现的相同单词，但第一次出现除外。我创建了一个单独的列表，其中计算了原始列表中每个元素的数量。我希望单词的第一次出现被计数列表中的项目替换，这样数字就在那里。

```
table = [['Bacteria', 'Aquificae', 'Persephonella'],
        ['Bacteria', 'Aquificae', 'Thermovibrio'],
        ['Bateria', 'Firmicutes', 'Bacillus']]
countlist = ['Bacteria3', 'Aquificae2', 'Persephonella1', 'Thermovibrio1', 'Firmicutes1', 'Bacillus1'] 
```

所以当我完成后，我希望列表是这样的：

```
table = [['Bacteria3', 'Aquificae2', 'Persephonella1'],
        ['-', '-', 'Thermovibrio1'],
        ['-', 'Firmicutes1', 'Bacillus1']] 
```

我想把它放到一个制表符分隔的表格中，这样它最终看起来不会那么混乱。

这是我目前用计数列表版本替换单词但不起作用的内容：

```
for num in range(1525):
    for n in table[num]:
            for s in count:
                    if n in s:
                            n = s 
```

**编辑** 在 Python 2.6.1 中工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:06:34.630

我不知道是否需要带有破折号的表，或者只是您认为需要进入制表符分隔表的步骤，此代码将获得一个列表，其名称后附有总数，可用于使制表符分隔桌子

```
from collections import Counter
count= Counter([item for sublist in table for item in sublist])
totals= ["%s%i"%(e,c) for e,c in count.most_common()]

#can then be tab deliminated
"\t".join(totals) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T17:23:02.057

我同意关于数据结构的评论和其他答案中所说的一切。我只添加这个答案，因为它提供了一种以 OP 请求的格式获取表格的方法。

*编辑注释掉了 Counter 的使用，以便允许它在 Python 2.6 上工作*

```
# from collections import Counter
from pprint import pprint

table = [['Bacteria', 'Aquificae', 'Persephonella'],
        ['Bacteria', 'Aquificae', 'Thermovibrio'],
        ['Bacteria', 'Firmicutes', 'Bacillus']]

# count_dict = Counter( [ item for row in table for item in row   ] )

count_dict = {}
for row in table:
    for item in row:
        count_dict[item] = count_dict.get(item, 0) + 1

for index_row, row in enumerate(table):
    for index_col, element in enumerate(row):
        if element in count_dict:
            table[index_row][index_col] = '%s %s' % (element, count_dict[element])
            del count_dict[element]
        else:
            table[index_row][index_col] = '-'

pprint(table) 
```

产生：

```
[['Bacteria 3', 'Aquificae 2', 'Persephonella 1'],
 ['-', '-', 'Thermovibrio 1'],
 ['-', 'Firmicutes 1', 'Bacillus 1']] 
```

# mysql - ActiveRecord::ConnectionNotEstablished - 代码从 2.x 系统迁移的 RoR 3

> ID：11037810
> 
> 赞同：0
> 
> 时间：2012-06-14T16:52:15.760
> 
> 标签：mysql, ruby-on-rails, ruby, windows, activerecord

我有一种情况，我一直在用头撞墙。首先，我不是 Ruby/Rails 人，但我是一名开发人员。我只知道关于它的最基本信息，但我必须让这个代码在这个服务器上运行。

它是带有 Rails 和 Ruby 1.9.3 的 Windows 2008 64 位服务器。Rails 似乎可以通过导入正常运行，并且文档服务器可以正常工作，等等。但是，当我尝试在其“服务器”中运行站点代码时，我得到了`ConnectionNotEstablished`错误。

我还安装了 MySQL 连接器并安装了 MySQL 绑定，尽管我认为它是内置的。这两种方法似乎都不起作用。

我需要一个修复程序或更多关于如何获得比`ActiveRecord::ConnectionNotEstablished`. 如果我可以获得更多跟踪信息，我可以进一步排除故障，但我只是不知道下一步该尝试什么，因为我没有足够的信息，所以我只能尝试随机的事情。

现在，这就是我得到的：

Rails 安装文件夹：c:\RailsInstaller 和 Ruby 所在的 C:\RailsInstaller\Ruby1.9.3 文件夹。

默认站点工作 - 站点文件夹：c:\sites\quote_machine，当我`c:\sites\quote_machine\rail s`在此文件夹中运行时，服务器加载没有错误，并出现“欢迎登机”屏幕。

### 数据库.yml：

```
development:
  adapter: mysql
  database: fb
  host: localhost
  port: 3306
  username: ******
  password: ********
  timeout: 5000 
```

（还有一个测试和生产部分）

这是表数据库模型之一的语法：

### 事件组.rb

```
class IncidentGroup < ActiveRecord::Base
  set_table_name "incident_group"
  set_primary_key "group_id"
   belongs_to :prospect, :class_name => "Prospect", :foreign_key => "prospect_id"
   has_many :incidents, :class_name => "Incident", :foreign_key => "group_id"
end 
```

### 事件.rb

```
class Incident < ActiveRecord::Base
  set_table_name "incident"
  set_primary_key "incident_id"
  belongs_to :incident_group, :class_name => "IncidentGroup", :foreign_key => "group_id"
end 
```

## 其他重要事实：

1.  数据库已启动并且可以直接在同一台服务器上使用 Coldfusion 正常工作，因此数据库没有任何问题。此外，当我使用 IRB 手动连接到数据库时，它似乎已连接。
2.  该站点在运行 Rails 2.x 的 Linux 服务器上运行良好
3.  据我所知，URL 路由是正确的，并且正在运行正确的控制器和视图。
4.  我尝试了不同的语法变体，结果没有变化，所以我只需要帮助我在哪里可以获得更多错误信息。顺便说一句，“跟踪”并没有真正告诉我任何事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T08:40:54.793

首先尝试更改 database.yml 文件。将适配器值更改为“mysql2”，并在您的 gem 文件中确保您使用的是“mysql2”gem 而不是“mysql”。

# javascript - 非数字的按位运算

> ID：11037811
> 
> 赞同：16
> 
> 时间：2012-06-14T16:52:24.597
> 
> 标签：javascript, operators, bit-manipulation

不知何故，JavaScript 理解了[按位运算](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Bitwise_Operators) `NaN ^ 1`，`Infinity ^ 1`甚至`'a' ^ 1`（全部计算为`1`）。

管理非数字的位运算符的规则是什么？为什么上面的所有示例都评估为`1`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-14T16:58:20.373

根据[ES5 规范](http://es5.github.com/)，在进行[按位运算](http://es5.github.com/#x11.10)时，所有操作数都转换为[`ToInt32`](http://es5.github.com/#x9.5)（首先调用[`ToNumber`](http://es5.github.com/#x9.3). 如果值为`NaN`or `Infinity`，则转换为`0`）。

因此：`NaN ^ 1`=> `0 XOR 1`=>`1`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T17:04:58.830

[ECMA-262](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)在 11.10 中定义二进制位运算符的参数使用 ToInt32 进行转换。解释 ToInt32 的 9.5 在其前两点中说：

> 1.  令 number 为对输入参数调用 ToNumber 的结果。
> 2.  如果 number 为 NaN、+0、-0、+Inf 或 -Inf，则返回 +0。

# json - Spring MVC 3 - 杰克逊 - AjaxForm

> ID：11037815
> 
> 赞同：1
> 
> 时间：2012-06-14T16:52:34.820
> 
> 标签：json, spring-mvc, jackson, ajaxform

我有一个 Spring MVC 注释驱动的项目，它运行良好。在这一点上，我的许多表单都很小，我倾向于使用 Ajax 请求来处理它们。我一直在使用这个插件： http: [//jquery.malsup.com/form/](http://jquery.malsup.com/form/)来处理我的 Ajax 请求，它也一直运行良好。我遇到了一个问题。我正在使用 Jackson 将我的 @ResponseBody 项目序列化为 json。它工作得很好，但我遇到了需要上传文件的第一个表单。AjaxForm 在较旧的浏览器上使用 iframe 提交技巧来处理这个问题，但警告说有必要用`<textarea></textarea>`以确保所有信息都顺利到达。我一直在疯狂地环顾四周，我发现我可以为我的对象制作一个自定义序列化程序，但我想不出这将如何让我检查请求类型是否是`XHR`，然后才用`<textarea></textarea>`标签包围响应。有任何想法吗？

这是我的一些代码：

```
 public @ResponseBody
    JsonResponse setReferenceNumber(@ModelAttribute("referenceNumber") 
    @Valid ReferenceNumberBean referenceNumber, 
    BindingResult result, 
    HttpServletResponse response)
    {
      //Do some stuff
      //Theoretically here I would call upon some logic to surround the response?
      return jsonResponse;
    } 
```

提前致谢！

**更新**——我几乎认为我已经解决了这个问题，特别是通过在 Spring 中添加一个新的拦截器：

```
 <mvc:interceptors>
      <bean class="edge.portal.vendor.web.interceptor.MultipartAjaxInterceptor"></bean>
    </mvc:interceptors> 
```

然后进行拦截器测试以查看 X-Requested-with，然后添加标签，如果我的 javascript 已将调用标记为 Ajax 但标头未反映此更改，因此暗示 iframe ajax 帖子：

```
 @Component
    public class MultipartAjaxInterceptor extends HandlerInterceptorAdapter
    {
    @Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception
    {
    if(request.getParameter("isAjax") != null && request.getHeader("X-Requested-With") == null)
        response.getWriter().write("<textarea>");

    return true;
    }

    @Override
    public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception
       {
       if(request.getParameter("isAjax") != null && request.getHeader("X-Requested-With") == null)
           response.getWriter().write("</textarea>");
       }
    } 
```

现在显然我遇到的问题是你不能多次调用响应的 getWriter 或 OutputStream，我觉得我在解决这个问题的正确轨道上，但不知道从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:25:55.983

让我发布一下，我是如何解决这个问题的（我不知道，是否正确）。我在前端使用 Dojo，而 Dojo`dojo.io.iframe.send`用于文件上传。处理表单 post 的 JS 函数如下。（看`handleAs`我设置的“”属性为' `json`'）

```
function ioIframeGetJson(){
    var td = dojo.io.iframe.send({
        url: "${pageContext. request. contextPath}/switch/add",
        form: "frmSwitchTypeAdd",
        method: "post",
        preventCache: true, 
        handleAs: "json",
         load: function(response, ioArgs){
                clearSwitchTypeForm();
            },

            error: function(response, ioArgs){
            }
    });
} 
```

在我的情况下，处理表单提交的控制器方法，其中还包括上传的文件，如下所示，（看我将返回类型保留为字符串）

```
@RequestMapping(value="/add",method=RequestMethod.POST)
    @ResponseBody
    public String add(HttpServletRequest request) {
        . . . . .
        //I call the toString method of the model I want to return in Response
        return fromModel(switchType).toString();
} 
```

`toString()`方法编码如下，我让Json字符串被包围`<textarea>`

```
public String toString() {
        return "<textarea>{name:'" + name + "', code:'" + code
                + "', className:'" + className + "', dynamic:" + dynamic+"}</textarea>";
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-23T23:37:27.563

我知道在这里回答有点晚了，但我最近遇到了类似的问题，我想分享我的结果。您使用 HandlerInterceptor 走在正确的轨道上，但您应该使用 getOutputStream() 方法而不是 getWriter() 方法。根据[ServletReponse 的Javadoc](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletResponse.html#getOutputStream())：

```
getOutputStream

Throws:
IllegalStateException - if the getWriter method has been called on this response 
```

类似地，如果 getOutputStream 已经被调用，getWriter 方法将抛出 IllegalStateException，但只要另一个从未被调用，每一个都可以多次。Jackson 在写入 JSON 数据时似乎使用了 getOutputStream。因此，您的代码应使用以下修改：

```
@Component
public class MultipartAjaxInterceptor extends HandlerInterceptorAdapter
{
    @Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {
        if(request.getParameter("isAjax") != null && request.getHeader("X-Requested-With") == null)
            response.getOutputStream().write("<textarea>".getBytes(response.getCharacterEncoding()));

        return true;
    }

    @Override
    public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception {
       if(request.getParameter("isAjax") != null && request.getHeader("X-Requested-With") == null)
           response.getOutputStream().write("</textarea>".getBytes(response.getCharacterEncoding()));
    }
} 
```

如果响应最初是作为“application/json”发送的，那么使用 postHandle 中的 setContentType 方法更改响应的内容类型也可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T17:18:21.627

所以这是我得到的答案，它类似于 Ravi 的答案，但对我的设置来说似乎更好一些。首先是将我`@ResponseBody`的 's 更改为字符串。这是假设我将手动使用`<textarea />`标签围绕响应完成的。然后我创建了一个名为的新类`JsonResponseSerializer`，如下所示：

```
public class JsonResponseSerializer
{
private HttpServletRequest request;

public JsonResponseSerializer(HttpServletRequest request)
{
    this.request = request;
}

public String serialize(JsonResponse jsonResponse) throws IOException
  {
    String response = "";

    ObjectMapper mapper = new ObjectMapper();

    response = mapper.writeValueAsString(jsonResponse);

    if(request.getParameter("isAjax") != null && request.getHeader("X-Requested-With") == null)
    {
        response = "<textarea>" + response + "</textarea>";
    }

    return response;
  }
} 
```

然后我将我的回复的返回语句更改为：

```
 return new JsonResponseSerializer(request).serialize(jsonResponse); 
```

本质上，我创建了一个实用方法，它注入了 ServletRequest，然后简单地要求 Jackson 序列化对象，然后在`<textarea />`必要时将其包围。

# ios - IOS - 如何强制视图横向

> ID：11037817
> 
> 赞同：0
> 
> 时间：2012-06-14T16:52:46.513
> 
> 标签：ios, uiview, autorotate

我想强迫我的观点去风景，就在我调用一个方法的时候。

当我的方法运行时，我调用：

```
[self shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)UIInterfaceOrientationLandscapeRight]; 
```

自动旋转的方法

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
    return UIInterfaceOrientationIsLandscape(toInterfaceOrientation);
} 
```

问题是视图不会强制旋转。可以在模拟器上测试它，还是只在真实设备上工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:12:16.443

```
[[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeRight animated:YES]; 
```

# c++ - C++：std::istream 读取及其对 std::streambuf 的调用下溢

> ID：11037818
> 
> 赞同：2
> 
> 时间：2012-06-14T16:52:48.183
> 
> 标签：c++, istream, streambuf

以下代码仅测试`underflow`在`std::istream` `read`.`std::stringbuf`

```
#include <iostream>
#include <vector>
#include <sstream>

class TestStringBuf : 
public std::stringbuf
{
public:

    int_type underflow()
    {
        std::cout<<"TestStringBuf underflow"<<std::endl;
        return std::stringbuf::underflow();
    }
};

int main(int argc, const char * argv[])
{
    TestStringBuf buf;
    std::iostream stream(&buf);

    stream << "tesr";

    std::vector<char> data(4);
    stream.read(&data[0], 4);

    for(int i=0; i<data.size(); ++i)
        std::cout<<data[i];
    std::cout<<std::endl;

    return 0;
} 
```

输出是：

```
TestStringBuf underflow
TestStringBuf underflow
test 
```

我希望只调用一次下溢，因为我准确地读取了 get 区域中存在的字节数，那么为什么要再次下溢呢？这是预期的行为吗？我之所以问，是因为我的自定义`underflow`方法可能会长时间阻塞以读取新数据，因此`underflow`在这种情况下，第二次调用并不是很理想。

我在 Osx 上使用**clang 3.1**和**libc++**。

谢谢！

**更新：**

我刚刚做了一个完全独立的测试，在我看来这是**libc++实现中的一个奇怪之处，因为****libstd++**不会发生这种情况。有人可以用其他实现来测试吗？这是一个错误还是只是一个实现差异（对我来说感觉很糟糕）。我更新了上面的代码，因此您可以将其复制并粘贴到任何 main.cpp 中。

**更新2：**

毕竟这是 libc++ 中的一个错误，请参阅： http://llvm.org/bugs/show_bug.cgi?id= [13113](http://llvm.org/bugs/show_bug.cgi?id=13113)。如果您自己编译 libc++，则该错误应该消失了，我会尽快尝试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T17:10:02.580

C++ 标准明确允许 std::basic_stringbuf 的实现将字符序列存储在 std::basic_string 中，而不是使用 std::basic_streambuf 的内部缓冲区。

# objective-c - 'presentedViewController' 同时有多个视图

> ID：11037823
> 
> 赞同：0
> 
> 时间：2012-06-14T16:53:12.607
> 
> 标签：objective-c, ios

我正在学习Objective-C，但我被困在涉及多个视图控制器的这一点上。我了解到，如果您的故事板上有多个视图，则必须创建一个单独的文件（例如 ViewTwoControllor.h 和 .m），然后通过单击它们并在第三个选项卡右侧的面板中将这些文件链接到您的视图您必须输入“ViewTwoController”。例如，我可以通过单击按钮在 Safari 中打开一个网站。但我希望在第二个视图中集成 Twitter。

Twitter iOS 5 集成很顺利，直到我把它放在第二个视图上。我对按钮使用以下代码。

```
TWTweetComposeViewController *tweet = [[TWTweetComposeViewController alloc]init];

[tweet setInitialText:@"This is a pretty awesome application bro."];
[tweet addURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://www.stackoverflow.com"]]];

[self presentedViewController:tweet animated:YES completion:nil]; 
```

包括 Twitter 框架，IBAction 等也很好。这适用于单视图应用程序，但现在我收到以下错误：“接收器类型 'ViewTwoController' 例如消息未声明具有选择器 'presentedViewController:animate:completion:' 的方法。

房间里有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:58:48.357

你可能想要`presentModalViewController`，不是`presentedViewController`

查看[UIViewController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)的文档。您会看到在这种情况下您有两个选择：`presentViewController:animated:completion`和`presentModalViewController:animated`

如果您是 Objective-c 的新手，选择器本质上只是一个方法名称。错误消息告诉您问题出在哪里：您正在尝试将消息（在本例中为选择器`presentedViewController:animated:completion`）发送到不知道如何响应该消息的对象（在本例中为 的实例`ViewTwoController`） . 这表明您调用的方法不正确，或者您尝试调用该方法的对象不是您所想的子类。

# vim - 如何在 Vim 中不切换插入模式的情况下转到括号/括号/引号的末尾？

> ID：11037825
> 
> 赞同：18
> 
> 时间：2012-06-14T16:53:35.020
> 
> 标签：vim

我正在寻找一个插件，当你在它们里面时，它可以让你摆脱括号/括号/引号/等。我发现在插入模式下必须 ESC 到命令模式并键入 A 以跳出括号以转到行尾有点困难，是否有满足我需求的插件？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-14T17:03:12.957

一个插件将是矫枉过正。将此映射添加到您的`~/.vimrc`：

```
inoremap <C-e> <C-o>A 
```

*   `<C-o>`用于在不离开*插入*模式的情况下发出*正常*模式命令。
**   `A`，嗯……你知道它的作用。*

 ** * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-14T20:31:23.157

如果您安装[delimitMate 插件](http://www.vim.org/scripts/script.php?script_id=2754)`<S-e>`，您可以使用or`<C-g>g`映射来实现此目的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-21T01:59:38.707

我习惯于`Tab`跳出括号、花括号等内容，所以我只是对`Shift`+做了一个简单的映射，`Tab`它只是将字符 1 字符从 INSERT 模式向右移动。这是我的简单映射，对于我的目的来说似乎很好。

```
inoremap <S-Tab> <esc>la 
```

编辑：似乎 delimitMate 具有相同的映射 ( `Shift`+ `Tab`) 用于跳过结束分隔符。我想我会使用它，因为我已经使用了 delimitMate。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-02-15T09:57:41.430

由于我使用[自动配对](https://github.com/jiangmiao/auto-pairs)插件，因此我更改了其默认`g:AutoPairsShortcutJump`选项

```
" Jump outside '"({
if !exists('g:AutoPairsShortcutJump')
  let g:AutoPairsShortcutJump = '<C-l>'
endif 
```

现在不仅可以轻松跳出对外，还可以轻松插入它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-06T16:54:05.903

我重新映射`alt-h,j,k,l`以移动光标而无需使用箭头键。所以它只是`<m-l>`跳过一个括号。我也有`<C-a>`and`<C-e>`去行首和行尾，并且`<C-h>`向左`<C-l>`或向右跳一个单词：

```
"  alt-h,j,k,l  move cursor left,down,up,right
inoremap <m-h> <Left>
inoremap <m-j> <Down>
inoremap <m-k> <Up>
inoremap <m-l> <Right>
"  ^a and ^e move cursor to begin and end of line
inoremap <C-a> <C-o>I
inoremap <C-e> <C-o>A
"  ^h and ^l move cursor 1 word left and right
inoremap <C-h> <C-o>b
inoremap <C-l> <Esc>ea 
```*

# android - startactivityforresult from dialogpreference（非活动）

> ID：11037826
> 
> 赞同：1
> 
> 时间：2012-06-14T16:53:36.740
> 
> 标签：android, android-preferences

我有一个对话框首选项，上面有一个按钮，我想打开另一个活动。该活动完成后，我希望对话框使用从活动中收集的信息更新文本视图（在对话框中）。

换句话说：Preference screen --> Dialog preference --> Dialog --> Button click event --> Activity

我曾经有一个正常的活动调用活动（活动->按钮单击->活动），所以我可以使用startactivityforresult，然后从“onactivityresult”调用我的syncgui函数。遗憾的是，Dialog 首选项不是一个活动，因此只能使用 startactivity（来自上下文），而不是 startactivityforresult（来自活动）。

有没有其他方法可以告诉我的对话框它开始的活动已经完成并且它可以更新文本视图？这是原始功能

老家长活动：

```
public void onClick(View v) {
        if(v == mSimModeBrowse) {
            Intent i = new Intent("com.shared.FileChooser");
            i.putExtra("com.shared.FileChooser.EXTRA_PATH", vsbPath);
            i.putExtra("com.shared.FileChooser.EXTRA_EXTENSIONS", vsbExtensions);
            startActivityForResult(i,0);
        }
    }

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if(resultCode == RESULT_OK) {
            final String file = data.getExtras().getString("com.shared.FileChooser.EXTRA_RESULT");
            mSimModePath.setText(file);
        }
    } 
```

从文件选择器（子活动）：

```
@Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        File f = new File(path + "/" + files.get(position));
        Intent i = new Intent();
        i.putExtra(EXTRA_RESULT,f.getAbsolutePath());
        setResult(RESULT_OK,i);
        finish();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:31:55.847

您是否尝试过使用：

```
runOnUiThread(new Runnable() { 
    public void run() 
    { 
        Intent i = new Intent("com.shared.FileChooser");
        i.putExtra("com.shared.FileChooser.EXTRA_PATH", vsbPath);
        i.putExtra("com.shared.FileChooser.EXTRA_EXTENSIONS", vsbExtensions);

        startActivityForResult(i,0);
    } 
 }); 
```

在 Dialog 的 onClick 事件中？这应该会导致它在 Activity 的 UI 线程上运行。

# windows - Windows CMD 批处理脚本中的文件名时间戳被截断

> ID：11037831
> 
> 赞同：42
> 
> 时间：2012-06-14T16:53:47.987
> 
> 标签：windows, batch-file, cmd

我有一个输出文件的批处理脚本，我试图确保每次执行脚本时都不会覆盖现有文件，所以我试图在上面加上时间戳。

目前我有这个：

```
set  stamp=%DATE:/=-%_%TIME::=-% 
```

但如果时间是上午 1 点到 9 点，它会给出如下信息：

```
13-06-2012_ instead of a full 13-06-2012_12-39-37.28 
```

我怎样才能解决这个问题？

我使用的是 Windows 7，`echo %date% %time%`命令行窗口中的输出是（我的“短日期”时钟格式设置为显示 3 个字母的月份）：

```
03-Sep-12 9:06:21.54 
```

基本上我想要一个解决问题的解决方案，无论时钟格式设置为什么。

* * *

**编辑：**由于没有人喜欢阅读标题，我会明确说明这个问题是关于截断问题。我找到了解决方案。

我已经使用以下时间戳已有一段时间了，效果很好。

```
set timestamp=%DATE:/=-%_%TIME::=-%
set timestamp=%timestamp: =% 
```

它产生了一个时间戳，如：`18-03-2013_13-37-43.26`，通过替换`/`and`:`中的`%TIME%`and `%DATE%`，然后去除空格。空格是我原来问题中的问题，真的。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2014-05-05T15:33:24.540

The first four lines of this code will give you reliable YY DD MM YYYY HH Min Sec variables in XP Pro and higher, using WMIC.

```
@echo off
for /f "tokens=2 delims==" %%a in ('wmic OS Get localdatetime /value') do set "dt=%%a"
set "YY=%dt:~2,2%" & set "YYYY=%dt:~0,4%" & set "MM=%dt:~4,2%" & set "DD=%dt:~6,2%"
set "HH=%dt:~8,2%" & set "Min=%dt:~10,2%" & set "Sec=%dt:~12,2%"

set "datestamp=%YYYY%%MM%%DD%" & set "timestamp=%HH%%Min%%Sec%"
set "fullstamp=%YYYY%-%MM%-%DD%_%HH%-%Min%-%Sec%"
echo datestamp: "%datestamp%"
echo timestamp: "%timestamp%"
echo fullstamp: "%fullstamp%"
pause 
```

Output example:

```
datestamp: "20200828"
timestamp: "085513"
fullstamp: "2020-08-28_08-55-13"
Press any key to continue . . . 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-14T17:00:46.220

请参阅 Stack Overflow 问题*[How to get current datetime on Windows command line，以适合在文件名中使用的格式？](https://stackoverflow.com/questions/203090)*.

创建一个文件，`date.bat`：

```
@echo off
For /f "tokens=2-4 delims=/ " %%a in ('date /t') do (set mydate=%%c-%%a-%%b)
For /f "tokens=1-3 delims=/:/ " %%a in ('time /t') do (set mytime=%%a-%%b-%%c)
set mytime=%mytime: =% 
echo %mydate%_%mytime% 
```

运行`date.bat`：

```
C:\>date.bat
2012-06-14_12-47-PM 
```

更新：

你也可以用这样的一行来做到这一点：

`for /f "tokens=2-8 delims=.:/ " %%a in ("%date% %time%") do set DateNtime=%%c-%%a-%%b_%%d-%%e-%%f.%%g`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-04-04T18:49:26.813

Here's a batch script I made to return a timestamp. An optional first argument may be provided to be used as a field delimiter. For example:

c:\sys\tmp>timestamp.bat
20160404_144741
c:\sys\tmp>timestamp.bat -
2016-04-04_14-45-25
c:\sys\tmp>timestamp.bat :
2016:04:04_14:45:29

```
@echo off
SETLOCAL ENABLEDELAYEDEXPANSION
:: put your desired field delimiter here.
:: for example, setting DELIMITER to a hyphen will separate fields like so:
:: yyyy-MM-dd_hh-mm-ss
::
:: setting DELIMITER to nothing will output like so:
:: yyyyMMdd_hhmmss
::
SET DELIMITER=%1

SET DATESTRING=%date:~-4,4%%DELIMITER%%date:~-7,2%%DELIMITER%%date:~-10,2%
SET TIMESTRING=%TIME%
::TRIM OFF the LAST 3 characters of TIMESTRING, which is the decimal point and hundredths of a second
set TIMESTRING=%TIMESTRING:~0,-3%

:: Replace colons from TIMESTRING with DELIMITER
SET TIMESTRING=%TIMESTRING::=!DELIMITER!%

:: if there is a preceeding space substitute with a zero
echo %DATESTRING%_%TIMESTRING: =0% 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-29T16:15:15.643

```
for /f "tokens=2-8 delims=.:/ " %%a in ("%date% %time: =0%") do set DateNtime=%%c-%%a-%%b_%%d-%%e-%%f.%%g
echo %DateNtime% 
```

Or, from the command line:

```
for /f "tokens=2-8 delims=.:/ " %a in ("%date% %time: =0%") do echo %c-%a-%b_%d-%e-%f.%g 
```

* * *

**EDIT:** As per bryce's **non-standard** time/date specs. (`03-Sep-12 9:06:21.54`)

```
@echo off
setlocal enabledelayedexpansion
for /f "tokens=1-7 delims=.:/- " %%a in ("%date% %time%") do (
  if "%%b"=="Jan" set MM=01
  if "%%b"=="Feb" set MM=02
  if "%%b"=="Mar" set MM=03
  if "%%b"=="Apr" set MM=04
  if "%%b"=="May" set MM=05
  if "%%b"=="Jun" set MM=06
  if "%%b"=="Jul" set MM=07
  if "%%b"=="Aug" set MM=08
  if "%%b"=="Sep" set MM=09
  if "%%b"=="Oct" set MM=10
  if "%%b"=="Nov" set MM=11
  if "%%b"=="Dec" set MM=12
  set HH=0%%d
  set HH=!HH:~-2!
  echo 20%%c-!MM!-%%a_!HH!-%%e-%%f.%%g
)
endlocal 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-14T17:57:24.960

Thanks to [an answer to Stack Overflow quesion *Creating a file name as a timestamp in a batch job*](https://stackoverflow.com/questions/1064557/creating-a-file-name-as-a-timestamp-in-a-batch-job/10116045#10116045), I found that it was a space terminating the filename.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-02-08T22:33:58.503

Windows batch log file name in 2018-02-08_14.32.06.34.log format:

```
setlocal
set d=%DATE:~-4%-%DATE:~4,2%-%DATE:~7,2%
set t=%time::=.% 
set t=%t: =%
set logfile="%d%_%t%.log"

ping localhost -n 11>%1/%logfile%
endlocal 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-14T16:57:05.160

它想要完整的时间在`DD-MM-YYYY_HH-MM-SS.TT`TT 是滴答声。例外说明了一切。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-02-09T09:53:35.273

In the past, I've used a .cmd script I found on the Internet. I hate the way localization normally messes with dates. Anytime you have dates in filenames (or anywhere else, if I may be so bold) I figure you want them in ISO 8601 format:

2015-02-19T14:54:51Z

or something else that has Y M D H M in that order, such as

2015-02-19 14:54

because it fixes the MDY / DMY ambiguity and because it's sortable as text.

I don't know where I got that .cmd script, but it may have been [http://ss64.com/nt/syntax-getdate.html](http://ss64.com/nt/syntax-getdate.html), which works beautifully on my YYYY-MM-DD Windows 8.1 and on a M/D/YYYY vanilla install of Windows 7\. Both give the same format:

2015-02-09 04:43

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-02-25T07:50:16.200

BATCH/CMD FILE like **DateAndTime.cmd** (*not in CMD-Console*)

Code:

```
SETLOCAL EnableDelayedExpansion
(set d=%date:~8,2%-%date:~3,2%-%date:~0,2%) & (set t=%time::=.%) & (set t=!t: =0!) & (set STAMP=!d!__!t!) 
```

Create output:

```
echo %stamp% 
```

Output:

```
2020-02-25__08.43.38.90 
```

Or also possible in for lines in CMD-Console and BATCH/CMD File

```
set d=%date:~6,4%-%date:~3,2%-%date:~0,2%
set t=%time::=.%
set t=%t: =0%
set stamp=%d%__%t% 
```

"Create output" and "Output" same as above

# asp.net - Crystal Reports调用存储过程的正确方法

> ID：11037833
> 
> 赞同：0
> 
> 时间：2012-06-14T16:54:19.423
> 
> 标签：asp.net, sql-server-2008, crystal-reports-xi

我正在使用 ASP.NET 网站，该网站使用 Crystal Reports 呈现报告。我正在使用 LINQ to SQL 和 SQL Server 存储过程。

调用存储过程的正确方法是使用 LINQ to SQL 并调用调用存储过程的方法吗？

绕过 LINQ to SQL 调用并直接将存储过程与 Crystal 报表相关联是否有好处？

如果您使用这种方法，您会以什么方式完成此操作？请指教。

# c++ - QGraphicsScene 缺少特定项目更新

> ID：11037837
> 
> 赞同：5
> 
> 时间：2012-06-14T16:54:34.130
> 
> 标签：c++, qt, qgraphicsview, qgraphicsscene

我有一个应用程序，您可以在其中观看给定 2D 游戏的回放：

基本上，车辆在地图上移动。视图以车辆为中心，因此地图在回放时滚动，类似于*Micro Machines*（这只是为了提供一个想法，实际游戏不是*Micro Machines*）。

[![](../Images/c9c83e31f9a4aaacf766906ba968cdf7.png)](https://i.stack.imgur.com/xVeGY.jpg)
[（来源：[randomracket.com](http://www.randomracket.com/images/genesis-gems/micromachines.jpg)）]

在我的场景中，当车辆四处移动时，地图是静态的。回放的每一帧视图都在滚动，因此车辆居中。出于性能原因，地图在几个`QGraphicsPixmapItem`s 中平铺。

视口更新模式设置为`QGraphicsView::BoundingRectViewportUpdate`。项目索引方法设置为`QGraphicsScene::NoIndex`.

在大多数情况下，一切正常。但是当地图比平时大时，车辆不会更新。视图正在滚动，图块更新良好；但不是车辆，除非我通过放大/缩小触发完整的视口更新（所以我知道该项目定位良好）。

车辆的 boundingRect 永远设置一次，并且是有效的（见下文，以逻辑坐标给出）。我不在项目的边界矩形之外绘制。

调试输出的一些示例（只有第三个配置不起作用）：

```
ok :
vehicle->boundingRect() : QRectF(-1.9391,-1.9391 3.8782x3.8782)
scene->sceneRect() : QRectF(-117.543,-38.3826 138.834x40.3217)
SCENE_CACHING : 85 tiles

ok :
vehicle->boundingRect() : QRectF(-2.88489,-2.88489 5.76979x5.76979)
scene->sceneRect() : QRectF(-68.8843,-18.2202 187.989x119.277)
SCENE_CACHING : 308 tiles

nok : vehicle won't update
vehicle->boundingRect() : QRectF(-3.45546,-3.45546 6.91092x6.91092)
scene->sceneRect() : QRectF(-64.2988,-107.802 188.927x187.445)
SCENE_CACHING : 506 tiles 
```

我试图调试一个更新通道，并且油漆事件确实排除了车辆所在的区域......

**任何人都知道为什么更新可能会错过特定项目？**

**编辑 ：**

Qt：4.8.1，我也看到了以前版本的问题

操作系统：Windows XP SP3，尚未在其他操作系统上测试

我没有成功地用一个最小的例子重现这个问题。最小的例子就像预期的那样工作。在现实生活中，这是完成的：

1.  地图是从文件中读取的。它由多达数百个界定地面/天空的多边形（每个多边形以图形方式由多边形、边和顶点层组成）、数千张图片和纹理组成，然后将其剪裁到地面或天空，以及其他一些项目。

2.  我计算所有剪辑，然后在 QImage 中渲染场景。图像在添加到场景中的几个 s 中平铺`QGraphicsPixmapItem`，而以前的项目从场景中删除并删除（顺便说一下，当我没有删除和删除以前的项目时，也会出现错误）。

3.  重播开始了

我认为 Qt Graphics 内部搞砸了，但我不知道如何清理/重置它。

这是一个图形示例（说明我所说的地面/天空的意思）。地图可能非常巨大。

[![](../Images/9e9f54d6a49c253d884c1ab72e90d223.png)](https://i.stack.imgur.com/Mw18P.jpg)
[（来源：[kopasite.net](http://kopasite.net/up/0/example.jpg)）]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T12:29:32.307

从上面拿起我的评论作为答案：

您需要使用`QGraphicsScene::invalidate(...)`使应重绘的场景部分无效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T09:19:23.383

我相信这类似于我在使用大量 QGraphicsItems 时遇到的问题。我最终通过简化我在屏幕上的 QGraphicsItems 数量来解决我的问题，并且不缓存不需要缓存的 QGraphicsItems。

检查这是否是您的问题的一种简单方法是：

```
vehicle->setCacheMode(QGraphicsItem::NoCache); 
```

这应该会导致每次需要绘制车辆上的油漆方法时都会被调用。

# asp.net - 使用 AJAX ScriptManager、UpdatePanel、UpdateProgress 控件的 ASP.NET 页面不起作用

> ID：11037838
> 
> 赞同：2
> 
> 时间：2012-06-14T16:54:36.070
> 
> 标签：asp.net, ajax, updatepanel, scriptmanager, updateprogress

我正在使用客户的 .NET 应用程序并尝试在页面回发到服务器时显示文本和 gif 动画。我最初在应用程序解决方案中创建了一个单独的项目，它使用一个简单的按钮按下来创建一个 5 秒的延迟（模拟回发延迟）。延迟之后，网页上的标签会更新为当前时间。

我正在使用 ScriptManager、UpdatePanel 和 UpdateProgress 控件。我创建的单独项目工作正常，但是当我将相同的代码集成到客户现有项目中时，我无法让 UpdateProgress 控件显示文本或 gif。

这是表单代码：

```
<body>
  <form id="form1" runat="server">
  <div>
    <asp:ScriptManager ID="ScriptManager3" runat="server"></asp:ScriptManager>
    <asp:UpdatePanel ID="UpdatePanel3" runat="server">
      <ContentTemplate>
         <h1>UpdatePanel</h1>
         <asp:Label ID="Label1" runat="server"></asp:Label>
         <asp:Button ID="Button1" runat="server" Text="Generate Report" 
           onclick="Button1_Click" />
      </ContentTemplate>
    </asp:UpdatePanel>
    <br />

    <asp:UpdateProgress ID="UpdateProgress3" runat="server"
     AssociatedUpdatePanelID="UpdatePanel3">
    <ProgressTemplate>
           <h1>UpdateProgress</h1>
              <div class="PleaseWait">
                  Please Wait...
              </div>
        </ProgressTemplate>
    </asp:UpdateProgress>

    <h1>No update, just straight up text</h1><br>

  </div>
  </form>
</body> 
```

任何建议，将不胜感激。

# php - MySQL PDO - 设置默认获取模式？

> ID：11037842
> 
> 赞同：4
> 
> 时间：2012-06-14T16:54:58.933
> 
> 标签：php, mysql, oop, pdo

所以今天，我终于完成了从标准 PHP MySQL 函数到 PDO 的过渡。我注意到在将数据作为对象获取时，我们必须运行类似于以下内容的行：

```
$STH = $DBH->query('SELECT name, addr, city from folks');
$STH->setFetchMode(PDO::FETCH_OBJ);

$result = $STH->fetch(); 
```

我的问题是关于第 2 行的。有没有办法将其设置为默认行为，这样我们就不需要在每次希望运行查询时都设置获取模式？这对我来说似乎很烦人。当然没有必要这样做吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T16:59:42.897

您可以为 PDO 对象设置默认获取模式：

```
$DBH->setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE, PDO::FETCH_OBJ); 
```

当然，这在您初始化 $DBH (PDO) 对象后立即执行。

（有关这方面的详细文档，请参阅[http://www.php.net/manual/de/pdo.setattribute.php](http://www.php.net/manual/de/pdo.setattribute.php)）

# excel - 如何保护某些行而其他行不受保护并且能够删除行

> ID：11037844
> 
> 赞同：0
> 
> 时间：2012-06-14T16:55:12.900
> 
> 标签：excel, vba

我有一个问题，我想保护工作表，但删除权限将授予用户。但最多隐藏 9 行，这些行不应被删除。有没有可能。请帮我。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T19:14:10.693

尝试这个。我刚刚测试了这个，它似乎得到了你想要的。

*   解锁所有不会隐藏的行中的单元格。
*   保持所有要隐藏的行锁定
*   隐藏行
*   使用以下权限保护工作表： 选择未锁定的单元格 删除行（您希望给他们的任何其他内容）

这样，用户将无法选择隐藏的行，因为它们已被锁定。但是，如果用户想要删除隐藏行上方/下方的行，他们将不得不使用 Ctrl + 鼠标单击来选择单独的范围。

此外，使用此解决方案。你甚至不需要 VBA。您只需在保护工作表之前进行设置，而不是添加保护。

# java - Android 中的 HTML 解析

> ID：11037845
> 
> 赞同：0
> 
> 时间：2012-06-14T16:55:14.447
> 
> 标签：java, android, html, parsing

所以这就是问题所在。我目前正在创建一个需要我解析一些 html 的 Android 应用程序，以便我可以在应用程序屏幕上显示它。

我不知道如何正确地做到这一点，并且想知道你们是否可以为我指出正确的方向或向我展示一个好的指南。

我想要做的是通过 html 代码并取出某些物品（特别是食品，您将在一分钟内看到）。我不想只是将人链接到网站或使用 webview 在应用程序中显示网页，因为我个人觉得这看起来不太好。我想要做的是从 html 中提取食物，然后以字符串或其他东西的形式将该部分放在我的应用程序中。

-----这是我正在使用的站点中的一些html作为参考-----

```
enter code here

<a href="http://www.campusdish.com/en-US/CSMA/OldDominion/Locations/rda.aspx?RCN=m784&amp;MI=122&amp;RN=CEREAL  HOT  GRITS" OnClick="javascript: NewWindow('http://www.campusdish.com/en-US/CSMA/OldDominion/Locations/rda.aspx?RCN=m784&amp;MI=122&amp;RN=CEREAL  HOT  GRITS', 'RDA_window',  'width=450, height=600, scrollbars=no, toolbar=no,  directories=no, status=no, menubar=no, copyhistory=no');return false" Class="recipeLink">CEREAL  HOT  GRITS</a>

                <br>

              </td>

            </tr>

          </table>

        </div>

      </td>

    </tr>

    <tr>

      <td>

        <div class="menuTxt">

          <table cellpadding="0" cellspacing="0" border="0" bordercolor="green">

            <tr valign="top">

              <td colspan="3">

                <a href="http://www.campusdish.com/en-US/CSMA/OldDominion/Locations/rda.aspx?RCN=m860&amp;MI=122&amp;RN=PANCAKES  BUTTERMILK" OnClick="javascript: NewWindow('http://www.campusdish.com/en-US/CSMA/OldDominion/Locations/rda.aspx?RCN=m860&amp;MI=122&amp;RN=PANCAKES  BUTTERMILK', 'RDA_window',  'width=450, height=600, scrollbars=no, toolbar=no,  directories=no, status=no, menubar=no, copyhistory=no');return false" Class="recipeLink">PANCAKES  BUTTERMILK  </a> 
```

------结束html-----

所以我想提取例如“CEREAL HOT GRITS”和“PANCAKES BUTTERMILK”这两个词。

请并感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:23:29.810

我会推荐[JSoup](http://jsoup.org/)，我已经在一些安卓项目中使用过它，而且它非常可靠，我对此没有任何抱怨。

正如 JSoup 网站上的示例所说：

```
Document doc = Jsoup.connect("http://en.wikipedia.org/").get();
Elements newsHeadlines = doc.select("#mp-itn b a"); 
```

您可以使用`select()`提取所需的任何数据

特别注意[选择器](http://jsoup.org/cookbook/extracting-data/selector-syntax)，从上面的示例中，您似乎只想要食物名称，因此您可以`<a>`使用以下方式从标签中获取它们：

```
Elements resultLinks = doc.select("a"); 
```

另一个提示是，在创建 后立即插入断点`Document`，然后使用 IDE 中的表达式构建器来窥探并找出所需的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T17:06:16.490

这可能不是最有效的方法，但是如果您将 HTML 源代码放入一个字符串中，然后逐行解析它。每当您在开头打一行时`<a href`，您就可以检查它，看看它是否是食品（不知道在不知道其余链接的情况下您会如何做到这一点，但可能有不同的结构或其他东西，或者食物可能在链接 7 或其他东西之后开始。网站通常具有可识别的模式）。如果它是食品，则获取链接（用于图像）和名称，或任何您需要的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T17:09:44.593

很简单：您应该使用[JSoup](http://jsoup.org/)库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T17:12:32.780

有（至少）两种合理的方法。

1) 使用真正的 HTML 解析器。（@you786 建议这样做）我最熟悉 Jsoup，但 @CommonsWare 提到了其他一些链接。然后，您有条不紊地浏览 HTML 树以找到您想要的内容。如果 HTML 的格式和结构合理，并且*随着时间的推移保持这种格式和结构*，这种方法效果最好。

2）只是“飞跃”到你想要的。（@Odiefrom 建议这样做）在您的示例中，搜索（使用 String.indexOf()） for `"<a href"`，然后从那里搜索 for`"RN="`然后抓取所有文本直到下一个`"`。这在 HTML 结构中效果最好，但它是一个巨大的混乱，或者您不想费心去弄清楚它。（例如，他们过度使用表格，而您想要的是大约 22 层以下的内容，是的，我已经看到了！），并且如果*要搜索的文本对于您的信息来说非常独特和独特*。在这种情况下，您可能希望对文本进行一些额外的“健全性检查”。

# java - 关于创建 java 屏幕键盘的建议

> ID：11037850
> 
> 赞同：2
> 
> 时间：2012-06-14T16:55:31.883
> 
> 标签：java, swing, netbeans

我想创建一个屏幕键盘，这样当文本字段获得焦点时，键盘会出现在屏幕上，而当焦点丢失或在屏幕外单击时，键盘应该会消失。

这不是问题，问题是我不确定应该使用什么来创建这样的键盘。我不能使用 a`jFrame`因为如果我在键盘窗口外单击，那么键盘会进入后台并且不会关闭。我也不能使用`jDialog`，因为它不允许我们在窗口外点击。

我还希望能够显示一个文本框，其中包含键盘实时输入的内容（当我单击屏幕键盘上的键时，它应该出现在文本框中）。我在 netbeans 中做这个程序，所以如果你能记住这一点，那会很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:15:43.103

我不确定我是否理解这里的要求，但看看这个例子是否能给你一些想法。

它的基本主旨是确保在可以变得可聚焦的组件周围有“空白”（在这个例子中是好的`RED`，`ORANGE`但我们不要对灰色阴影争论不休）。向其添加鼠标侦听器，并在事件时请求焦点（或者在您的情况下，隐藏键盘）。

```
import java.awt.*;
import java.awt.event.*;

import javax.swing.*;

public class ComponentFocus {

    ComponentFocus() {
        final JPanel gui = new JPanel(new GridLayout(0,1,15,15));
        gui.setFocusable(true);
        gui.addMouseListener(new MouseAdapter(){
            @Override 
            public void mouseClicked(MouseEvent me) {
                System.out.println(me);
                gui.requestFocus(true);
            }
        });
        gui.setBackground(Color.RED);
        gui.addFocusListener(new FocusAdapter(){
            @Override
            public void focusGained(FocusEvent fe) {
                gui.setBackground(Color.ORANGE);
            }

            @Override
            public void focusLost(FocusEvent fe) {
                gui.setBackground(Color.RED);
            }
        });

        JButton button1 = new JButton("button1");
        gui.add(button1);
        JButton button2 = new JButton("button2");
        gui.add(button2);

        JOptionPane.showMessageDialog(null, gui);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new ComponentFocus();
            }
        });
    }
} 
```

# c - 如何以编程方式转换音频（diy）？

> ID：11037851
> 
> 赞同：0
> 
> 时间：2012-06-14T16:55:36.270
> 
> 标签：c, flac, audio-converter

我正在考虑用 C 语言编写一个 FLAC 到 ALAC 和/或 FLAC 到 AAC 转换器。根据格式规范读取一种格式并输出另一种格式是否简单？

任何关于方法、语言等的提示都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T17:06:16.660

全程自己做？听起来很难。

它就像以一种格式阅读并输出另一种格式一样“简单”，但小细节实际上是巨大的庞然大物，有很多相当复杂的数学。

基本上，您必须阅读 FLAC，解析其容器格式，将 FLAC 音频解码为某种中间形式，将其编码为 Apple Lossless，然后将其放入 MPEG4 音频容器中（因为这是 ALAC 使用的）。

如果您放弃自己做这一切，并使用库来解码 FLAC 和编码 ALAC，那一点也不难，请注意 - 只是编码器和解码器不容易编写。

查看 libflac 和 libavcodec 的编码器/解码器，然后围绕它们编写程序应该不会太难。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T17:11:45.637

不，一点都不简单。

就 DSP 而言，FLAC 解码相对简单。但它仍然是 libav 中的大约 3,000 行代码，其中不包括位于它使用的库中其他位置的一堆支持代码。

AAC 编码*极其*复杂，因为它是有损编解码器；因此，编码到 AAC 涉及许多高度主观的心理声学决定。libav 中的 AAC 编解码器有将近 12,000 行代码（同样，不包括生成 MPEG4 容器的代码），其结果甚至不是特别高质量。[如果您对MDCT](https://en.wikipedia.org/wiki/Modified_discrete_cosine_transform)音频编码还不是很熟悉，那么尝试从头开始编写编码器将是徒劳的。

您可能最好使用已经能够执行此转换的库（如 libav！）。不要试图从头开始编写它。

*（挑剔的人会注意到，代码行数并不是衡量复杂性的重要指标。我知道这一点——我只是在这里将其用作“球场数字”。）*

# android - 如何使用 KSOAP2 和 Android 从 Web 服务接收消息

> ID：11037852
> 
> 赞同：0
> 
> 时间：2012-06-14T16:55:42.087
> 
> 标签：android, web-services, ksoap2

我试着做一个简单的 ksoap2 教程。这是[链接](http://seesharpgears.blogspot.de/2010/11/basic-ksoap-android-tutorial.html)

我的问题是，如果我将 SoapPrimitive 和 Ksoap...2.6.4.jar 与 Ksoap...2.4.jar 和或“SoapObject response = (SoapObject)envelope.getResponse();”一起使用，我只会得到响应 我有一个例外。

我必须如何使用 SoapObject？

这是我的代码：

```
public class WS_Auth_ComplexObjectsActivity extends Activity {
    /** Called when the activity is first created. */

    String NAMESPACE = "http://WS.androidroleplay.fk4.de.hs_bremen.de";
    String METHOD_NAME = "GetSumOfTwoInts";
    String SOAP_ACTION = "http://WS.androidroleplay.fk4.de.hs_bremen.de/GetSumOfTwoInts";
    String URL = "http://192.168.178.28:8080/WebProject_DB16/services/HelloWorldWS?wsdl";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        SoapObject Request = new SoapObject(NAMESPACE, METHOD_NAME);

        PropertyInfo pi = new PropertyInfo();
        pi.setName("Operand1");
        pi.setValue(2);
        pi.setType(int.class);
        Request.addProperty(pi);

        PropertyInfo pi2 = new PropertyInfo();
        pi2.setName("Operand2");
        pi2.setValue(5);
        pi2.setType(int.class);
        Request.addProperty(pi2);

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

        envelope.setOutputSoapObject(Request);

//        envelope.addMapping(NAMESPACE, "Integer",);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

        try
        {
             // Hier folgt die Authentifikation mit dem User Admin und Passwort Admin
            List<HeaderProperty> headerList = new ArrayList<HeaderProperty>();
            headerList.add(new HeaderProperty("Authorization", "Basic " + org.kobjects.base64.Base64.encode("tomcat:tomcat".getBytes()))); // "username:password"

            androidHttpTransport.call(SOAP_ACTION, envelope, headerList);
            androidHttpTransport.debug=true;

            SoapObject response = (SoapObject)envelope.getResponse();
            String result =  response.getAttributeAsString(0);

            TextView tv = (TextView)findViewById(R.id.TextView);
            tv.setText("Text: " + result); //"CategoryId: " +C.getCategoryId() + " Name: " + C.getName() + " Description: " + C.getDescription()
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }
} 
```

这是我的网络服务：

```
public class HelloWorldWS
{   

    public int GetSumOfTwoInts(int Operand1, int Operand2 )
    {
        System.out.println(Operand1+ " + "+ Operand2 +" = "+ (Operand1 + Operand2));

       return Operand1 + Operand2;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T17:02:55.583

试试这个

```
SoapObject resultObj = (SoapObject) envelope.bodyIn;
String result = (String)resultObj.getProperty(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T06:53:06.813

您的服务方法只返回一个整数值。在 ksoap2 中，如果 web 服务响应只有一个值（整数、字符串..），您应该使用

```
SoapPrimitive response = (SoapPrimitive) envelope.getResponse(); 
```

`response.toString();`是你想要的结果。如果您的响应具有复杂类型（对象），您应该使用

```
SoapObject response = (SoapObject) envelope.getResponse(); 
```

并解析它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-24T10:16:45.373

试试这个

```
String result = envelope.getResponse().toString();
return result; 
```

# .net - WCF JSON 服务不公开方法

> ID：11037856
> 
> 赞同：0
> 
> 时间：2012-06-14T16:56:03.777
> 
> 标签：.net, json, wcf

我正在尝试创建一个返回 JSON 对象的 WCF 服务。我的第一个问题是我没有看到暴露的服务方法甚至调用它。当我像这样调用服务方法时...“http://localhost:60090/VehicleDataService/detailbydivision?divisionId=1&year=2012”，我收到 404 错误。

网络配置....

```
 <system.serviceModel>
    <services>
      <service name="GMEOG.VehicleDataService" behaviorConfiguration="metadataBehavior">
        <endpoint address="" binding="webHttpBinding" contract="GMEOG.IVehicleDataService" behaviorConfiguration="VehicleDataServiceBehavior">
          <identity>
            <dns value="" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
      </service>
    </services>

    <behaviors>
      <serviceBehaviors>
        <behavior name="metadataBehavior">
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>

      <endpointBehaviors>
        <behavior name="VehicleDataServiceBehavior">
          <webHttp helpEnabled="true" defaultOutgoingResponseFormat="Json" />
        </behavior>
      </endpointBehaviors>
    </behaviors>

    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />

  </system.serviceModel>
 <system.webServer>
   <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer> 
```

这是我的界面....

```
[ServiceContract(Namespace = "GMEOG.VehicleDataService", Name = "VehicleDataService")]
public interface IVehicleDataService

{
[OperationContract]
[WebInvoke(Method = "GET",
           ResponseFormat = WebMessageFormat.Json,
           RequestFormat = WebMessageFormat.Json,
           BodyStyle = WebMessageBodyStyle.WrappedResponse,
           UriTemplate = "DetailByDivision?divisionId={divisionId}&year={year}")]
[return: MessageParameter(Name = "Vehicle")]
List<Vehicle> DetailByDivision(string divisionId, string year);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T18:15:55.857

你如何定义你的服务文件？使用 .svc 文件还是使用路由？

如果是前者（假设一个名为“VehicleDataService.svc”的 svc 文件），地址应该是`http://localhost:60090/VehicleDataService`**.svc**`/detailbydivision?divisionId=1&year=2012`。

如果是后者，请更新您的帖子您如何使用路由服务。

如果还有其他问题，请同时说明问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T17:02:05.203

尝试在 web.config 中将主机添加到您的服务端点：

```
<host>
  <baseAddresses>
    <add baseAddress="http://localhost:60090/VehicleDataService" />
  </baseAddresses>
</host> 
```

# ios - 有什么方法 UIAnimationBlock 会跳过完成部分或在中间停止？

> ID：11037857
> 
> 赞同：0
> 
> 时间：2012-06-14T16:56:04.227
> 
> 标签：ios, objective-c-blocks, uiviewanimation, uianimation

我有一个带有持续时间、延迟、选项、动画和完成的 UIAnimation。

在动画中，我只是通过设置它的框架来移动一个视图。

`CGPoint newPoint;`

```
newPoint = CGPointMake(x + offset, button.center.y); 
```

然后在完成块中，我将视图返回到我存储在某处的原始位置。

```
completion:^(BOOL finished)
{
    view.center = oldPosition;
} 
```

我的问题是，当我通过滑动手势移动按钮时，动画似乎在完成一半时失败。我想知道如果我从不调用 [view.layer removeAllAnimations] 究竟会取消视图上的动画。幕后是否有任何事情会取消动画（可能是另一个动画）？

编辑：我真的只是想知道 UIAnimation 块在幕后是否有任何可能导致这种行为的事情。

# oracle - Oracle 分层查询：在结果和优化中包含 Start With

> ID：11037858
> 
> 赞同：0
> 
> 时间：2012-06-14T16:56:06.647
> 
> 标签：oracle, hibernate

您好我有以下分层查询。我可以知道如何在结果中包含以 pc.Parent="abc" 开头的吗？

```
select pc.child
from parentChild pc
start with pc.Parent="abc"
connect by nocycle prior pc.child = pc.parent; 
```

我正在使用上面的查询来更新所有的孩子+从父值开始。

```
update person set ..... where person.id in (select pc.child
    from parentChild pc
    start with pc.Parent="abc"
    connect by nocycle prior pc.child = pc.parent) 
```

我可以知道是否有更有效的方法来更新所有的孩子和自己？

我正在考虑取出子列表并使用休眠单独更新它们。

请分享您的建议 :D 谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T17:30:57.110

对于第一个问题，使用`SELECT pc.parent`代替`SELECT pc.child`. 这样，即使是父级也将包含在结果中。

对于第二个问题（更新），我认为该查询没有任何问题。我以类似的方式使用 CONNECT BY PRIOR（为 IN 生成列表）并且从未遇到任何问题。事实上，我从未见过任何其他方法来更新 Oracle 上的树层次结构。

回应关于第一个问题的评论，（SQLDeveloper，10g）：

```
CREATE TABLE mytree( parent_id INT, child_id INT );

INSERT INTO mytree VALUES ( 1, 2 );
INSERT INTO mytree VALUES ( 2, 3 );
INSERT INTO mytree VALUES ( 3, NULL );

SELECT 
lpad(' ', LEVEL)||parent_id
FROM
mytree
START WITH mytree.parent_id = 1
CONNECT BY PRIOR mytree.child_id = mytree.parent_id ;
1
 2
  3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T13:20:41.610

不插入“父，空子”值的可能解决方案是使用对偶

```
select pc.child
from parentChild pc
start with pc.Parent="abc"
connect by nocycle prior pc.child = pc.parent
union
Select pc.parent from dual 
```

# ruby-on-rails - Rails：尝试登录时出现“BCrypt::Errors::InvalidHash”

> ID：11037864
> 
> 赞同：53
> 
> 时间：2012-06-14T16:56:40.603
> 
> 标签：ruby-on-rails, heroku, bcrypt

我正在努力完成一个项目。我正在使用用户模型。当我注册时，一切似乎都很好。但是当我尝试登录同一个成员时，我得到了这个错误。

我们很抱歉，但有些不对劲。 *heroku 日志*文件显示错误为：

```
BCrypt::Errors::InvalidHash (invalid hash):
  app/controllers/sessions_controller.rb:8:in `create' 
```

我的***sessions_controller***是：

```
class SessionsController < ApplicationController

  def new
  end

   def create
    user = User.find_by_email(params[:session][:email])
    if user && user.authenticate(params[:session][:password])
      sign_in user
      redirect_to user
    else
      flash.now[:error] = 'Invalid email/password combination'
      render 'new'
    end
  end

  def destroy
    sign_out
    redirect_to root_path
  end
end 
```

用户**模型**是：

```
class User < ActiveRecord::Base
  attr_accessible :email, :name, :nickname,:password, :password_confirmation 
  has_secure_password

  before_save { |user| user.email = email.downcase }
  before_save { |user| user.nickname = nickname.downcase }
  before_save :create_remember_token
....validations......

    private

    def create_remember_token
      self.remember_token = SecureRandom.urlsafe_base64
    end
end 
```

这是我的**session.helper**

```
module SessionsHelper

  def sign_in(user)
    cookies.permanent[:remember_token] = user.remember_token
    self.current_user = user
  end
  def signed_in?
    !current_user.nil?
  end

  def current_user=(user)
    @current_user = user
  end

  def current_user
    @current_user ||= User.find_by_remember_token(cookies[:remember_token])
  end

  def sign_out
    self.current_user = nil
    cookies.delete(:remember_token)
  end
end 
```

我试过 heroku rake db:migrate, heroku restart .. 没有变化。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-06-14T17:37:30.667

这意味着存储的哈希`password_digest`不是有效的 BCrypt 哈希（包括如果该字段为空）。

根据评论，您似乎只是在`has_secure_password`不存在的时候创建了用户，因此密码摘要从未被存储。查看数据库，您可能会看到该`password_digest`用户为空。从数据库中删除用户并使用新的工作代码重新创建它应该可以工作。

不过，在评论中讨论时，我对密码错误的原因做了一个（不正确的）猜测，并且我已经写下了解释。因此，这里适用于确实有此问题的任何未来访问者，即使它不直接适用于此处：

* * *

当您从使用 SHA1 或其他算法切换到 BCrypt 但未能在 BCrypt 中重新散列密码时，通常会发生这种情况。由于您无法访问原始密码（或者至少您不应该......），因此切换有点难看，因为您必须同时使用*BCrypt*和原始身份验证方案。例如，如果您之前使用 SHA1，现在使用 BCrypt，则必须将 SHA1 密码哈希*视为*BCrypt 输入的纯文本密码。例如，您可以像这样创建 BCrypt 摘要：

```
sha1_password = Digest::SHA1.hexdigest("#{salt}#{real_password}")
self.password_digest = BCrypt::Password.create(sha1_password).to_s 
```

*然后，您可以根据您*有权访问的 sha1 密码哈希创建 bcrypt password_digests 。

您将像这样进行身份验证：

```
sha1_password = Digest::SHA1.hexdigest("#{salt}#{attempted_password}")
BCrypt::Password.new(self.password_digest) == sha1_password 
```

我在上面的示例中使用了 SHA1，但这也适用于其他散列算法。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2021-01-07T06:52:28.203

BCrypt gem 的更新为我解决了这个问题

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-11-06T15:30:47.973

我已经有了实时用户，并且同样已经将未加密的密码保存到了数据库中。一旦我开始使用 bcrypt，它就会期待一个加密的密码，当它没有找到它时，它就会产生这个错误。

因此，我添加了此救援以捕获错误并提示旧用户重置密码：

```
begin
    # your code that attempts to login the user
rescue BCrypt::Errors::InvalidHash
  flash[:error] = 'We recently adjusted the way our passwords are stored. Please click the "forgot username or password?" link to re-establish your password. Thank you for your understanding!'
  redirect_to password_resets_url
end 
```

希望这可以帮助。

# c++ - 套接字发送调用被阻塞了这么长时间

> ID：11037867
> 
> 赞同：3
> 
> 时间：2012-06-14T16:56:46.237
> 
> 标签：c++, linux, sockets, tcp

我每 10 秒在套接字上发送 2 个字节的应用程序数据（阻塞），但发送调用在最后一个实例中被阻塞超过 40 秒。

*   2012-06-13 12:02:46.653417|信息|发送前
*   2012-06-13 12:02:46.653457|INFO|发送后(​​2)
*   2012-06-13 12:02:57.566898|信息|发送前
*   2012-06-13 12:02:57.566962|INFO|发送后(​​2)
*   2012-06-13 12:03:08.234060|信息|发送前
*   2012-06-13 12:03:08.234101|INFO|发送后 (2)
*   **2012-06-13 12:03:19.010743|信息|发送前
*   2012-06-13 12:04:00.969162|INFO|发送后 (2)**

机器（linux）上的 tcp 默认发送缓冲区大小为 65536。

2 个字节的数据用于与服务器进行心跳，服务器希望客户端至少每 15 秒发送一次 HB。

另外，我没有禁用 naggle 的算法。

问题是 - 发送呼叫能否被阻塞这么长时间（如 40 秒）？而且它只是偶尔发生，它是在运行近 12 小时后发生的。

我知道的发送调用应该只是将数据复制到 TCP 发送缓冲区。

每 10 秒调用一次发布。不，它不会逐渐减慢发送呼叫的速度。它突然发生一次，然后由于另一侧的套接字关闭，因此应用程序退出。

```
int publish(char* buff, int size) const {
      /* Adds the 0x0A to the end */
      buff[size]=_eolchar;

      if (_debugMode)
      {
          ACE_DEBUG((MY_INFO "before send\n"));
      }

      int ret = _socket.send((void*)buff, size+1);

      if (_debugMode)
      {
          ACE_DEBUG((MY_INFO "after send (%d)\n", ret));
          //std::cout << "after send " << ret << std::endl;
      }

      if (ret < 1)
      {
          ACE_DEBUG((MY_ERROR "Socket error, FH going down\n"));
          ACE_OS::sleep(1);
          abort();
      }
      return ret;
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T17:39:48.217

使用阻塞`send()`调用时，从应用程序的角度来看，您可以将远程 TCP 缓冲区、网络和本地发送 TCP 缓冲区视为一个大缓冲区。

也就是说，如果远程应用程序在从其 TCP 缓冲区读取新字节时出现延迟，最终您的本地 TCP 缓冲区将变得（几乎）满。如果您尝试`send()`使用溢出 TCP 缓冲区的新有效负载，则`send()`实现（内核系统调用）不会将焦点返回给您的应用程序，直到 TCP 缓冲区获得足够的空间来存储该有效负载。

达到该状态的唯一方法是远程应用程序没有读取足够的字节。*测试*环境中的一个典型场景是远程应用程序在断点处暂停... :-)

这就是我们所说的**慢消费**问题。如果您分享该诊断，则有多种方法可以解决该问题：

1.  如果您可以控制远程应用程序，请使其足够*快*，以免本地应用程序被阻塞。
2.  如果您没有远程应用程序的控制权，那么可能有多个答案：
    *   根据您自己的需要，最多可以阻止 40 秒。
    *   如果不是这样，您需要使用`send()`系统调用的解锁版本。从这里开始，有多种可能的政策；我在下面描述一个。（等一下！ ：-） ）

您可以尝试使用一个动态数组，该数组充当假发送 TCP FIFO，并在发送调用返回您时增长`EWOULDBLOCK`。在这种情况下，您可能必须使用`select()`系统调用来检测远程应用程序何时跟上步伐并首先向其发送看不见的数据。

您在这里拥有的简单功能可能有点棘手`publish()`（虽然在大多数网络应用程序中很常见）。您还必须知道，不能保证动态缓冲区会增长到您不再拥有任何可用内存的程度，然后您的本地应用程序可能会崩溃。“实时”网络应用程序中的一个典型策略是为缓冲区选择任意最大大小，在达到时关闭 TCP 连接，从而避免本地应用程序耗尽可用内存。明智地选择最大值，因为它取决于潜在的慢速消费者连接的数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T17:20:12.777

The following(and more that I am not gonna mention now) are considered blocking system calls:
send, connect, recv, accept.

What this means is that they can block as far as they need till the specified job is done. So yes, send can block for 40 seconds and more, depending on how much time it takes to send the data; though I cannot know why it blocked that long in your specific case.

If you want to avoid this blocking, I advice you to read about asynchronous sockets and I/O. They MIGHT prove to solve part of your problem.

# java - 如果处置了外壳，则 SWT 剪贴板数据在 Windows 剪贴板中不可用

> ID：11037869
> 
> 赞同：3
> 
> 时间：2012-06-14T16:56:53.473
> 
> 标签：java, swt, clipboard

在我们的项目中，我正在开发一个简单的功能，它可以将数据复制到剪贴板，然后在其他任何地方使用。这很简单。一个模态窗口弹出并在 SWT.List 中显示该函数导出的所有文件的列表。此窗口还有两个按钮：“确定”和“复制到剪贴板”。OK 按钮通过 shell.dispose() 关闭窗口（我什至尝试过 Shell.close()）。剪贴板功能如下所示：

```
Clipboard clipboard = new Clipboard(Display.getDefault());
TextTransfer transfer = TextTransfer.getInstance();
String lines = "";
for (String line : list.getItems())
{
    lines += line;
    lines +="\n";
}
clipboard.setContents(new Object[] { lines }, new TextTransfer[] { transfer }); 
```

文件导出完成后，按钮被激活。复制到剪贴板并使用数据是有效的，但前提是我单击此按钮并首先将此数据粘贴到任何地方。如果我现在单击“确定”并关闭窗口，则数据仍在剪贴板中。但是，如果我单击“复制”按钮，然后直接“确定”而不将这些数据粘贴到任何地方，它就会从剪贴板中丢失。

有没有办法将数据保存在剪贴板中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T10:43:25.310

也许您需要在设置内容后直接处理剪贴板？也就是说，当您不再需要使用 Clipboard 实例时，将其丢弃，如 Clipboard 类 javadoc 中所述。不确定它是否有帮助，但您可以尝试...另请参阅[http://www.vogella.com/blog/2009/09/04/swt-clipboard/](http://www.vogella.com/blog/2009/09/04/swt-clipboard/)

# scala - 地图上的Scala类型不匹配错误

> ID：11037870
> 
> 赞同：2
> 
> 时间：2012-06-14T16:56:56.360
> 
> 标签：scala, type-erasure

我在这里想念什么？这是我得到的错误......

> 错误：类型不匹配；找到：List[Double]（在方法 calculateHaarWaveletI 中）]
> 
> 必需：列表[scala.Double]
> 
> Console.println(list2Tuples(ls.take(n)))

这是我的代码..

```
 object HaarWavelet {

  def calculateHaarWavelet(ls: List[Double]): List[Double] = {
    if (ls.length % 2 != 0) throw new RuntimeException("Need even number of elements to calculate HaarWavelet")
    calculateHaarWaveletI(ls, ls.length)
    def calculateHaarWaveletI[Double](ls: List[Double], n: Int): List[Double] = {
      Console.println(list2Tuples(ls.take(n)))
      null
    }
    null
  }

  def processTuple(x: (Double, Double)): (Double, Double) = {
    val f = (x._1 + x._2) / 2
    (f, x._1 - f)
  }

  def list2Tuples(ls: List[Double]): List[(Double, Double)] = {
    if (ls.isEmpty) return List()
    (ls.head, ls.tail) match {
      case (_, Nil) => List()
      case (x, y) => List((x, y.head)) ::: list2Tuples(y.tail)
    }
  }

  def main(args: Array[String]) {
    Console.println("Starting....")
    Console.println(calculateHaarWavelet(List(8.0, 4.0)))
    Console.println("Done....")
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T17:12:28.063

`Double`您定义中的类型参数`calculateHaarWaveletI`是 shadowing `scala.Double`。您可以完全删除类型参数，代码应该按预期工作。[有关更多详细信息，请参阅我的](https://stackoverflow.com/a/9958940/334519)答案。

# javascript - 构建 javascript 对象而不冻结

> ID：11037872
> 
> 赞同：1
> 
> 时间：2012-06-14T16:57:03.180
> 
> 标签：javascript, freeze

我目前正在开发一个管理面板，用于从图中添加和删除顶点。我有三个大型“网络”图，每个图大约有 500 个节点，我可以毫无问题地加载和构建它们。现在，只有一个在 HTML5 中以图形方式显示。为图表创建所有 HTML5 对象非常耗时（大约 5 秒左右）。图表可能会在未来增长，而这次可能会增加。在构建图形 UI 时，网站没有响应，我正在尝试解决这个问题。我使用了“setTimeout”，但没有达到预期的结果。

我想知道是否可以在一个外部文件中构建一个 javascript-Object，然后可以用 ajax 调用它？请注意，我要构建的对象是基于 javascript 函数和 HTML5 的！

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:37:13.167

我对这个问题的假设是：1）您获得的数据没有任何问题 2）导致速度变慢的是 HTML 的呈现。

DOM 并不是世界上响应速度最快的东西。这听起来很奇怪，但实际上构建一个巨大的 HTML 字符串非常快，然后通过调用 div.innerHTML 或 $('#graph').html() 一次性设置它。

原因是一旦构建了字符串，复杂的字符串处理和 DOM 操作就会发生在用高度优化的 C 或 C++ 编写的浏览器中，而不是 JavaScript 引擎。

另一种选择是将渲染拆分为多个部分，并尝试使用 setTimeout 来“让步”其他事件。

有了这个，你可以一次迭代你的 500 个节点 50 并调用 setTimeout(next, 0) 继续接下来的 50 个节点。这将允许在做太多工作之前处理其他事件。

一个副作用可能是图形分阶段显示，因为 setTimeout 将允许 DOM 在继续之前渲染该部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T17:17:39.123

您可以使用 nodejs 在服务器上运行处理器密集型代码，并通过简单的 ajax 调用仅返回 JSON 结果。

在没有看到任何代码的情况下，很难详细说明如何实现这一点。但是如果对象已经在 J​​S 中构建，那么卸载到节点应该不难。

也许看看这个答案，了解如何使用节点创建简单的服务器响应： [Basic Ajax send/receive with node.js](https://stackoverflow.com/questions/6011984/basic-ajax-send-receive-with-node-js)

# ios - 如何确保 MIDI 信息以正确的顺序到达？

> ID：11037874
> 
> 赞同：1
> 
> 时间：2012-06-14T16:57:11.010
> 
> 标签：ios, multithreading, coremidi

我的 iOS 应用使用[PGMidi](https://github.com/petegoodliffe/PGMidi)（一个核心 MIDI 库）将 MIDI 库和程序更改发送到其他设备。一些用户报告说，消息有时会以错误的顺序到达——程序更改之后是银行更改。

对于每个银行/程序更改，我正在组装一个数值的 NSArray，然后将该数组传递给后台线程中的 sendMidiDataInBackground 方法：

```
int MSBStatus = 0xB0;
int MSBController = 0;
int MSBValue = 1;
NSArray *MSBValues = [NSArray arrayWithObjects:[NSNumber numberWithInt:MSBStatus], [NSNumber numberWithInt:MSBController], [NSNumber numberWithInt:MSBValue], nil];
[self performSelectorInBackground:@selector(sendMidiDataInBackground:) withObject:MSBValues];

int LSBStatus = 0xB0;
int LSBController = 32;
int LSBValue = 2;
NSArray *LSBValues = [NSArray arrayWithObjects:[NSNumber numberWithInt:LSBStatus], [NSNumber numberWithInt:LSBController], [NSNumber numberWithInt:LSBValue], nil];
[self performSelectorInBackground:@selector(sendMidiDataInBackground:) withObject:LSBValues];

int programStatus = 0xC0;
int programValue = 3
NSArray *programValues = [NSArray arrayWithObjects:[NSNumber numberWithInt:programStatus], [NSNumber numberWithInt:programValue], nil];
[self performSelectorInBackground:@selector(sendMidiDataInBackground:) withObject:programValues]; 
```

sendMidiDataInBackground 方法将值更改为 C 数组并将它们传递给 PGMidi 的 sendBytes 方法，该方法将它们组装成一个数据包列表并通过 MIDISend 发送出去。我注意到时间戳设置为 0，这意味着“现在”：

```
- (void) sendBytes:(const UInt8*)bytes size:(UInt32)size {
    Byte packetBuffer[size+100];
    MIDIPacketList *packetList = (MIDIPacketList*)packetBuffer;
    MIDIPacket     *packet     = MIDIPacketListInit(packetList);
    packet = MIDIPacketListAdd(packetList, sizeof(packetBuffer), packet, 0, size, bytes);
    OSStatus s = MIDISend(midi.outputPort, endpoint, packetList);
} 
```

但在某些时候，显然有些消息被延迟了，所以它们以错误的顺序结束。这是因为后台线程没有按照它们开始的顺序完成吗？如果是这样，我可以组合 MSB、LSB 和程序数组并将组合数组发送到 sendMidiDataInBackground，而不是启动三个单独的线程，这应该可以解决它。

或者这可能在调用 MIDISend 函数之后发生？如果是这样，我需要另一个解决方案。

我不能在自己的测试中重复这个问题，所以我想确定问题是什么，这样我就有更好的机会实际修复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T04:02:00.260

根据[文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsobject_Class/Reference/Reference.html#//apple_ref/occ/instm/NSObject/performSelectorInBackground%3awithObject%3a)，`-performSelectorInBackground:withObject:`创建一个新的后台线程。您不应该对操作系统将如何调度这些线程做出任何假设。您不能指望它们按照您创建它们的顺序运行。

是什么让您认为您需要在后台执行此操作？发送一些简短的 MIDI 消息不太可能在很长一段时间内阻塞您的主线程。创建三个单独的线程对于少量工作来说是一个令人难以置信的开销。

如果您确实需要在后台执行此操作，请考虑使用 GCD`dispatch_async`或`NSOperation`带有串行队列的东西，和/或在一个方法调用而不是三个方法调用中完成所有工作。

# matlab - 查找分类错误的高效 MATLAB 代码

> ID：11037875
> 
> 赞同：1
> 
> 时间：2012-06-14T16:57:18.450
> 
> 标签：matlab

我写了一个用于分类的 Matlab 脚本。当我执行此操作时，出现内存不足错误。

```
for i =1:size(Y)  
    if(predictions(i) ~= clasL(find(ismember(mydata,X(i)),'rows')))  
        error = error+1;  
    end  
end 
```

在上面的代码中`Y`，and`predictions`是维度为 19928 的向量。and是 19928*62061`mydata`和`X`12819*62061 矩阵。当我执行以下代码时，出现以下错误

```
Error using  == 
Out of memory. Type HELP MEMORY for your options.

Error in ismember (line 62)
            tf = (a == s);

Error in myinit (line 105)
if(predictions(i) ~= clasL(find(ismember(mydata,X(i)),1))) 
```

如何克服这一点？请帮我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:28:09.417

首先尝试在 MATLAB 进程上运行 ulimit，以便它可以使用尽可能多的内存。

其次，我认为您想将参数的顺序切换为`ismember`：

```
ismember(X(i, :), mydata, 'rows') 
```

`find`第三，如果您更改参数的顺序，则不需要额外的功能。然后，您只需执行此操作（在循环内）：

```
[~, idx] = ismember(X(i, :), mydata, 'rows')
if (idx > 0 && predictions(i) ~= clasL(idx))
    error = error+1;  
end 
```

第四，为了节省时间，您可以对（无循环）`ismember`中的所有行只运行一次，`X`然后以向量化方式查找错误数：

```
[~, idxs] = ismember(X, mydata, 'rows')
error = sum(predictions(idxs > 0) ~= clasL(idxs > 0)) 
```

# sql - 仅匹配某些单词的全文搜索？

> ID：11037877
> 
> 赞同：7
> 
> 时间：2012-06-14T16:57:32.167
> 
> 标签：sql, c, sqlite

我最近开始使用 SqlLite，所以我对它比较陌生。我正在尝试使用全文搜索功能来查找聊天机器人的粗略匹配项。基本上我想匹配尽可能多的关键字，但不一定是所有关键字。应根据在短语中找到多少关键字以及它们与查询的紧密程度对结果进行排序。换句话说，排序不一定要精确，但越接近，结果的排名就越高。同样，即使只找到短语中的一两个单词，它也应该匹配，但出现的单词越多，排名越高。我已经阅读了参考资料，看到了 NEAR 语句和 matchinfo 函数，以及如何使用它的示例，但我无法弄清楚如何将这些知识应用于我的具体问题。有没有人有什么建议？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T13:59:23.393

最近有人告诉我，这在 SqlLite 邮件列表中是不可能的。我最接近的解决方案是像搜索引擎那样去除停用词，以及使用 porter stemmer 算法来进一步概括查询。首先搜索完整的关键字集（自然没有标点符号和类似的），然后搜索应用了词干提取的同一组关键词，然后搜索相同的一组但去除了停用词，最后搜索了同样的去除了词干的子集应用，似乎从最好到最坏给出了一个合理的近似值。当然，只要找到一些匹配项，就不会执行上面链中更一般的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T18:38:09.297

看起来您可以通过`offsets`辅助功能获取此信息。以下是更完整文档的链接：

[4.1。偏移功能](http://www.sqlite.org/fts3.html#section_4_1)

基本上，您将函数添加到查询中，它将返回文档中的偏移量。

```
SELECT offsets(data) FROM data ... 
```

每个结果都是一个空格分隔的 4 个整数列表。第三列是该列中匹配项的字节偏移量。您应该能够使用该信息制定解决方案。

这是一些探索性查询的记录。

```
sqlite> create virtual table data using fts4(body);

sqlite> insert into data(body) 
  values('the quick brown fox jumps over the lazy dog');

sqlite> insert into data(body) 
  values('the lazy brown fox quickly jumps over the lazy dog');

sqlite> select * from data where body match 'lazy';
the quick brown fox jumps over the lazy dog
the lazy brown fox quickly jumps over the lazy dog

sqlite> select rowid,offsets(data) from data where body match 'brown';
1|0 0 10 5
2|0 0 9 5

sqlite> select rowid,offsets(data) from data where body match 'lazy';
1|0 0 35 4
2|0 0 4 4 0 0 42 4 
```

因此，如果您想搜索 brown 与 lazy，这两个文档都匹配。

对于第一个文档，brown 为 10，lazy 为 35。它们相距 25。

对于第二个文档，brown 位于 9，lazy 位于 4 和 42。它们相距 5 和 33。

它们还引用谓词的术语排序，尽管当我尝试匹配同一查询中的两个术语时它不起作用。我不确定我是否误解了，或者我只是不知道正确的语义。

我怀疑有一些 SQL 枢轴恶作剧可以用来在 sqlite 中进行所有排名计算。从 sqlite 中获取结果并自己进行排名数学可能更易于维护。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-15T09:51:51.157

这是你可以使用的 sql 查询....

```
Select * 
From Tablename 
Where Yourfield = '"+textbox.text(or any data)+"%' 
```

这将为您提供该字段的所有数据，以文本中的字母或数字开头，或者您想要的任何内容

例如：- 你输入 t 它会给茶 tisha

ot数字你输入1你将gwt 1 112 1 13

# ruby-on-rails - 检查对象是否有一个或多个孩子的数据库有效方法是什么？

> ID：11037879
> 
> 赞同：0
> 
> 时间：2012-06-14T16:57:45.037
> 
> 标签：ruby-on-rails

我想检查一个对象是否包含一个或多个孩子：

```
if @question.replies.count > 0 
  // do this
else
  // do that
end 
```

但是我宁愿不进行涉及到的数据库查找。有没有一种很好的有效方法来做这个查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:18:54.243

如果您已经通过 加载回复`include`，则可以使用`@question.replies.length`或`@question.replies.size`（更多信息[在这里](http://blog.hasmanythrough.com/2008/2/27/count-length-size)）。您还可以将您的`if`陈述简化为

```
if @question.replies.present? 
```

否则，您可以使用一个`counter_cache`列，它只会在您的问题表 ( `replies_count`) 上维护一个列，您可以随时访问该列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T17:05:23.137

只需使用：counter_cache（[http://asciicasts.com/episodes/23-counter-cache-column](http://asciicasts.com/episodes/23-counter-cache-column)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T17:32:40.023

如果您有预先加载的关联，请使用该`present?`方法

```
class User
  has_many :messages
end

class Message
  belongs_to :user
  has_many   :replies
end

current_user.messages.all(:include => :replies).each do |message|
  if message.replies.present?
  else
  end
end 
```

如果您尚未将关联加载到内存中，请使用该`exists?`方法。

```
current_user.messages.each do |message|
  if message.replies.exists?
  else
  end
end 
```

该`exists?`调用导致[EXISTS](http://dev.mysql.com/doc/refman/5.0/en/exists-and-not-exists-subqueries.html)检查，该检查在找到第一个匹配行时返回，而不会产生从 DB 取回行数据的成本。

**笔记**

其他选择是使用[@dimuch](https://stackoverflow.com/users/1416723/dimuch)建议的`counter_cache` [方法](https://stackoverflow.com/a/11037997/163203)。如果您可以更改数据库表结构，该解决方案将非常有效。`counter_cache`

# jquery - Flexslider 图像在 Firefox 中非常轻微的错误移动

> ID：11037881
> 
> 赞同：4
> 
> 时间：2012-06-14T16:57:48.373
> 
> 标签：jquery, html, css, firefox, flexslider

我正在使用[Flexslider](http://www.woothemes.com/flexslider/)，但遇到了一些问题。

它实际上在[演示](http://www.woothemes.com/flexslider/flexslider-demo/)中可见。这只会发生在 Firefox 中，或者至少它不会出现在 IE9 或 Chrome 中。当您将浏览器的大小重新调整为大约 400-500 像素宽并在最后两个图像（山丘和鸟）之间切换时，如果您仔细观察，您会发现图像实际上上下跳跃了大约一个像素转变。*实际上，您可能需要多次尝试调整窗口大小来复制这种可能并不总是显示的行为，但至少有 50% 的时间会这样做。*

我知道这非常小，但是当我做一个 1200 像素宽的滑块时，它非常明显。我花了几个小时追踪问题，直到我注意到它实际上是固有的。

但是我发现，当图像有标题（使用`<p>`标签）时，它们不会表现出这种行为。您可以使用 firebug 验证这一点。

我的问题是：有谁知道 p 标签会做什么来防止这种行为。能够强制它工作真是太好了，但如果我可以避免的话，我想避免在标记中使用非语义的空段落标签。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-14T20:04:31.280

我通过将以下代码添加到 css 来修复它。我不明白为什么，但它似乎需要在`<li>`标签之外（或在标签内部有高度？）才能保持稳定。将列表样式更改为光盘也可以，但这看起来不太好。

```
.slides li:after {
content: ".";
position:absolute;
top:0;
left:0;
z-index:-1000;
} 
```

`top:0`编辑：实际上，如果将其替换为，则该代码的效果会稍好一些，`bottom:0`否则当滑块部分离开屏幕时会出现奇怪的效果。

# asp.net - ASP.NET 日期正则表达式验证器 99/99/2012

> ID：11037883
> 
> 赞同：4
> 
> 时间：2012-06-14T16:58:00.230
> 
> 标签：asp.net, validation, datetime

我有以下正则表达式日期验证器，但它允许以下日期：

```
"99/99/2012" 
```

只是不知道为什么，如果有人知道我如何更改正则表达式以检查上述内容

日期格式如下：06/05/2012 mm/dd/yyyy

正则表达式：

```
^(((0?[1-9]|1[012])/(0?[1-9]|1\d|2[0-8])|(0?[13456789]|1[012])/(29|30)|(0?[13578]|1[02])/31)/(19|[2-9]\d)\d{2}|0?2/29/((19|[2-9]\d)(0[48]|[2468][048]|[13579][26])|(([2468][048]|[3579][26])00)))$ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T17:54:28.920

我在这些模式中看到了很多过于复杂的情况。您的日期格式实际上非常简单。我认为您通过忽略 28 天月和 31 天月之间的重叠而采取了错误的方法。

在我进一步解释之前，让我指出，除非您被正则表达式所困扰，否则**有更好的方法来解析和验证日期。**最好的选择是[DateTime.TryParseExact](http://msdn.microsoft.com/en-us/library/system.datetime.tryparseexact.aspx)，它就是为此而生的。如果您使用的是 WebForms，则只需使用和放入[CompareValidator](http://msdn.microsoft.com/en-us/library/db330ayw(v=vs.100).aspx)即可。`Operator="DataTypeCheck"``Type="Date"`

现在我已经说了神奇的话，让我们来谈谈正则表达式模式。

改变你看待这个的方式。的确，并非所有月份都包含 31 甚至 30 天，但有多少包含 28 天？

**...他们都是！**因此，如果要匹配 4 月和 5 月，则无需覆盖 4 月 1 日至 30 日，然后再覆盖 5 月 1 日至 31 日。您可以编写一个模式来覆盖*任*一月的前 30 天，然后自行到 5 月 31 日。结果类似于`[45]/([012]?[1-9]|[123]0)|5/31`，它的长度是其他情况的一半。

考虑这个模式，为了清楚起见，扩展：

```
^(
( #First, we'll cover months and days for a normal year. Forget leap years 
  #for a second.
  (
     (?<month>0?[1-9]|1[012])      #First we account for up to 28 days,
     /(?<day>[01]?[1-9]|10|2[0-8]) #which ALL months have.
  )
  |
  (
     (?<month>0?[13-9]|1[012])     #Every month but February has at
     /(?<day>29|30)                #least 30 days, so cover that.
  )
  |
  (
     (?<month>0?[13578]|1[02])     #Cover the 31st day for months
     /(?<day>31)                   #that have one.
  )
)

/(?<year>(1[89]|20)[0-9]{2})  #Any year between 1800 and 2099.

|  #Normal years: Done. Now we just need to cover February 29, 
   #and only for leap years.

(?<month>0?2)
/(?<day>29)
/(?<year>
      (1[89]|20)      #Century doesn't matter, since 100 is divisible by 4.
      (
        [24680][048]  #If the decade is even, leap years end in [048].
      |                            
        [13579][26]   #If the decade is odd, leap years end in 2 or 6.
      )
  )
)$ 
```

我们完成了。强制执行 mm/dd/yyyy 格式，验证现有日期，并且简短易读。这是缩小版：

```
^(((0?[1-9]|1[012])/([01]?[1-9]|10|2[0-8])|(0?[13-9]|1[012])/(29|30)|(0?[13578]|1[02])/31)/(1[89]|20)[0-9]{2}|0?2/29/(1[89]|20)([24680][048]|[13579][26]))$ 
```

* * *

# 编辑：

由于这是 .NET，因此您可以使用外观来缩短它很多：

```
 ^(
    (?!(0?[2469]|11)/31)
    (?!0?2/(29|30))
    (?<month>0?[1-9]|1[012])
    /
    (?!0?0/)
    (?<day>[012]?[0-9]|3[01])
    /
    (?<year>(1[89]|20)[0-9]{2})
  |
    (?<month>0?2)/(?<day>29)
    /
    #Years ending in 00 are only leap years if they're divisible by 400:
    (?!1[89]00)  
    (?<year>(1[89]|20) ( [24680][048] | [13579][26] ) )
 )$ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T17:01:09.843

您可以使用此正则表达式：

*   MM/DD/YYYY 格式
*   验证从*1800*到*9999的任何日期*
*   闰年账户
*   接受的格式：MM/DD/YYYY、M/DD/YYYY、MM/D/YYYY、M/D/YYYY

> ((^(10|12|0?[13578])([/])(3[01]|[12][0-9]|0?[1-9])([/])((1 [8-9]\d{2})|([2-9]\d{3}))$)|(^(11|0?[469])([/])(30|[12] [0-9]|0?[1-9])([/])((1[8-9]\d{2})|([2-9]\d{3}))$)| (^(0?2)([/])(2[0-8]|1[0-9]|0?[1-9])([/])((1[8-9]\d {2})|([2-9]\d{3}))$)|(^(0?2)([/])(29)([/])([2468][048]00) $)|(^(0?2)([/])(29)([/])([3579][26]00)$)|(^(0?2)([/])(29) ([/])( [1](http://www.pagecolumn.com/tool/regtest.htm) [89][0][48])$)|(^(0?2)([/])(29)([/])([2-9][0-9 ][0][48])$)|(^(0?2)([/])(29)([/])( [1](http://www.pagecolumn.com/tool/regtest.htm) [89][2468][048])$)|(^(0 ?2)([/])(29)([/])([2-9][0-9][2468][048])$)|(^(0?2)([/])( 29)([/])( [1](http://www.pagecolumn.com/tool/regtest.htm) [89][13579][26])$)|(^(0?2)([/])(29)([/])([2-9][0 -9][13579][26])$))

是的，有点吓人，但我多年来一直使用它并取得了巨大的成功。

您可以使用[此在线表达式测试器对其进行测试](http://www.pagecolumn.com/tool/regtest.htm)。

享受！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T17:24:25.677

只是抛出另一个选择来考虑......

我喜欢简单的正则表达式，但疯狂的正则表达式很难验证和维护。

您能否改为编写自己的验证器并使用它`DateTime.TryParseExact()`来完成工作？

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/ms131044.aspx](http://msdn.microsoft.com/en-us/library/ms131044.aspx)

```
(untested)

// this is inside a custom validator

DateTime d;

// get dateString from the control
if (DateTime.TryParseExact(dateString, 
                           "MM/dd/yyyy",
                           CultureInfo.InvariantCulture,
                           DateTimeStyles.None,
                           out d)
{
     // valid dateString
}
else
{
    // invalid dateString
} 
```

# wordpress - Magento Fishpig Wordpress 模块 - 创建自定义帖子列表

> ID：11037884
> 
> 赞同：1
> 
> 时间：2012-06-14T16:58:01.027
> 
> 标签：wordpress, magento, fishpig

这应该很简单，但由于某种原因并非如此。我只是希望能够加载我自己的模板文件并访问 $this->getPosts() 方法。

我努力了：

```
<block type="wordpress/post_list" name="blog_header" template="unleaded/fishpig/header.phtml"/> 
```

然后在我的模板中：

```
<?php $_posts = $this->getPosts() ?>
<?php foreach ($_posts as $_post) : ?>
     <?php echo $_post->getAuthor() ?>
<?php endforeach ?> 
```

这不起作用。查看主 List.php 块文件，该集合是基于“包装器”返回的，但我似乎找不到那是什么。

是否有其他人有用于在 Magento 的任何模板中获取帖子列表的代码示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T23:28:48.073

首先抓住街区是一件简单的事情。还有其他方法，但这对我有用。

```
<?php $_block = $this->getPostListBlock() ?>
<?php $_posts = $_block->getPosts() ?> 
```

# css - CSS。单个位置的边框

> ID：11037891
> 
> 赞同：0
> 
> 时间：2012-06-14T16:58:22.760
> 
> 标签：css, border

我将用图像来解释。[关联。](http://www.1907.net/images/border.jpg)当我尝试在图像中添加边框位置 1 时。它会自动添加到 2 和 3。 代码：`border-bottom: 1px dotted rgb(153, 153, 153)`乳清在样式表的同一行中。有什么方法可以将边框添加到仅位置 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:01:38.563

```
div.divclass:first-child {border-bottom: 1px dotted rgb(153, 153, 153)} 
```

或者

```
div.divclass:nth-child(1) {border-bottom: 1px dotted rgb(153, 153, 153)} 
```

编辑

或者，如果您不想使用类，则可以使用 DOM 结构来定位 DIV：

```
/* Where the second "div" is the element you want to apply the style to */
div > div:first-child {/* Enter style here */} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T17:08:08.430

您可以使用小时：

```
hr {
  border-top: 1px dotted #f00;
  color: #fff;
  background-color: #fff;
  height: 1px;
  width:50%;
} 
```

# html - 插入php调用后xhtml无效

> ID：11037892
> 
> 赞同：1
> 
> 时间：2012-06-14T16:58:36.190
> 
> 标签：html, xml, validation, magento, xhtml

我插入 Magento 模板：

```
xml:lang="<?php echo $this->getLang() ?>" lang="<?php echo $this->getLang() ?>"> 
```

它直接取自 magento 1.7 版附带的现代默认主题。但是，在尝试使用 W3C 验证页面时，我收到此错误：

> 第 325 行，第 10 列：省略了“html”的结束标记，但指定了 OMITTAG NO。您可能忽略了关闭一个元素，或者您可能打算“自我关闭”一个元素，即以“/>”而不是“>”结束它。

```
 Line 2, Column 1: start tag was here
 <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
```

知道如何解决这个问题吗？我没有修改 header.phtml 并且在我的主题文件夹中没有自定义的...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T17:02:09.353

您的模板是否在末尾包含标签——验证器实际抱怨的 html 的结束标签？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T17:01:00.963

您似乎正在尝试验证您的 PHP 文档而不是生成的 HTML。不要这样做。将其`.php`放在 Web 服务器上，通过浏览器访问服务器并验证生成的源代码。

# python - 如何将我的 pandas 数据分组推广到超过 3 个维度？

> ID：11037895
> 
> 赞同：10
> 
> 时间：2012-06-14T16:58:42.400
> 
> 标签：python, pandas

我正在使用优秀的`pandas`软件包来处理大量不同的气象诊断数据，当我将数据拼接在一起时，我很快就会用完维度。查看文档，可能是使用`MultiIndex`可以解决我的问题，但我不确定如何将其应用于我的情况 - 文档显示了使用随机数据和`DataFrame`s 创建 MultiIndexes 的示例，但不是预先存在的 Series时间序列数据。

**背景**

我使用的基本数据结构包含两个主要字段：

*   `metadata`，这是一个由描述数字的键值对组成的字典
*   `data`，这是一个包含数字本身的 pandas 数据结构。

最小的公分母是时间序列数据，因此基本结构有一个 pandas`Series`对象作为`data`条目，该`metadata`字段描述了这些数字的实际含义（例如，东太平洋上空 10 米风的矢量 RMS 误差，用于 24 小时预报实验Test1）。

我正在考虑采用最低公分母并将各种时间序列粘合在一起，以使结果更有用并允许轻松组合。例如，我可能想查看所有不同的提前期 - 我有一个过滤例程，它将获取我的时间序列，这些时间序列共享相同的元数据条目，*但*提前期（例如实验、区域等）并返回一个新对象，其中该`metadata`字段仅包含常见条目（`Lead Time`即已被删除），现在该`data`字段是一个熊猫`DataFrame`，其列标签由`Lead Time`值给出。我可以再次扩展它并说我想获取结果帧并将*它们*与另一个不同的条目（例如`Experiment`）组合在一起，给我一个熊猫`Panel`. 对于我的条目，其中项目索引由`Experiment`组成框架的元数据值给出，并且对象的新元数据不包含`Lead Time`或`Experiment`。

当我遍历这些复合对象时，我有一个`iterseries`框架`iterframes`例程和面板例程，当我删除一个维度时重建适当的元数据/数据配对（即来自框架的系列在列之间变化的前置时间将具有所有其父项的元数据*加上*`Lead Time`使用从列标签获取的值恢复的字段）。这很好用。

**问题**

我已经用完了尺寸（使用面板最多为 3-D），并且一旦面板中的所有内容都对齐，我也无法使用诸如`dropna`删除空列之类的东西（这在绘制摘要统计信息时导致了几个错误）。阅读有关使用具有更高维数据的 pandas 导致阅读有关`MultiIndex`它及其使用的信息。我已经尝试过文档中给出的示例，但我仍然不清楚如何将其应用于我的情况。任何方向都是有用的。我希望能够：

*   将基于my`Series`的数据合并为沿任意数量维度的多索引`DataFrame`（这会很棒 - 它会消除一个从系列中创建框架的调用，然后是另一个从框架中创建面板的调用）
*   遍历生成的 multi-indexed `DataFrame`，删除单个维度，以便我可以重置组件元数据。

**编辑 - 添加代码示例**

Wes McKinney 在下面的回答几乎正是我所需要的 - 问题在于，一旦我开始将元素组合在一起，我必须使用的系列支持的存储对象到我的 DataFrame 支持的对象的初始转换。Data-Frame-backed 类具有以下方法，该方法接受基于系列的对象列表和将在列中变化的元数据字段。

```
@classmethod
def from_list(cls, results_list, column_key):
    """
    Populate object from a list of results that all share the metadata except
    for the field `column_key`.

    """
    # Need two copies of the input results - one for building the object
    # data and one for building the object metadata
    for_data, for_metadata = itertools.tee(results_list)

    self             = cls()
    self.column_key  = column_key
    self.metadata    = next(for_metadata).metadata.copy()
    if column_key in self.metadata:
        del self.metadata[column_key]
    self.data = pandas.DataFrame(dict(((transform(r[column_key]), r.data)
                                        for r in for_data)))
    return self 
```

一旦我有了这个例程给出的框架，我就可以轻松地应用下面建议的各种操作——特定实用程序能够`names`在我调用时使用该字段`concat`——这消除了在内部存储列键名称的需要，因为它已存储在 MultiIndex 中作为该索引维度的名称。

我希望能够实现下面的解决方案，只需获取匹配系列支持的类列表和键列表，然后按顺序进行分组。但是，我不知道这些列将提前代表什么，所以：

*   将系列数据存储在一维 DataFrame 中对我来说真的没有意义
*   我看不到如何设置索引的名称和初始系列中的列-> 帧分组

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T17:11:45.560

我可能会建议`pandas.concat`与它的`keys`参数一起使用将 Series DataFrames 粘合在一起以在列中创建 MultiIndex：

```
In [20]: data
Out[20]: 
{'a': 2012-04-16    0
2012-04-17    1
2012-04-18    2
2012-04-19    3
2012-04-20    4
2012-04-21    5
2012-04-22    6
2012-04-23    7
2012-04-24    8
2012-04-25    9
Freq: D,
 'b': 2012-04-16    0
2012-04-17    1
2012-04-18    2
2012-04-19    3
2012-04-20    4
2012-04-21    5
2012-04-22    6
2012-04-23    7
2012-04-24    8
2012-04-25    9
Freq: D,
 'c': 2012-04-16    0
2012-04-17    1
2012-04-18    2
2012-04-19    3
2012-04-20    4
2012-04-21    5
2012-04-22    6
2012-04-23    7
2012-04-24    8
2012-04-25    9
Freq: D}

In [21]: df = pd.concat(data, axis=1, keys=['a', 'b', 'c'])

In [22]: df
Out[22]: 
            a  b  c
2012-04-16  0  0  0
2012-04-17  1  1  1
2012-04-18  2  2  2
2012-04-19  3  3  3
2012-04-20  4  4  4
2012-04-21  5  5  5
2012-04-22  6  6  6
2012-04-23  7  7  7
2012-04-24  8  8  8
2012-04-25  9  9  9

In [23]: df2 = pd.concat([df, df], axis=1, keys=['group1', 'group2'])

In [24]: df2
Out[24]: 
            group1        group2      
                 a  b  c       a  b  c
2012-04-16       0  0  0       0  0  0
2012-04-17       1  1  1       1  1  1
2012-04-18       2  2  2       2  2  2
2012-04-19       3  3  3       3  3  3
2012-04-20       4  4  4       4  4  4
2012-04-21       5  5  5       5  5  5
2012-04-22       6  6  6       6  6  6
2012-04-23       7  7  7       7  7  7
2012-04-24       8  8  8       8  8  8
2012-04-25       9  9  9       9  9  9 
```

那么你有：

```
In [25]: df2['group2']
Out[25]: 
            a  b  c
2012-04-16  0  0  0
2012-04-17  1  1  1
2012-04-18  2  2  2
2012-04-19  3  3  3
2012-04-20  4  4  4
2012-04-21  5  5  5
2012-04-22  6  6  6
2012-04-23  7  7  7
2012-04-24  8  8  8
2012-04-25  9  9  9 
```

甚至

```
In [27]: df2.xs('b', axis=1, level=1)
Out[27]: 
            group1  group2
2012-04-16       0       0
2012-04-17       1       1
2012-04-18       2       2
2012-04-19       3       3
2012-04-20       4       4
2012-04-21       5       5
2012-04-22       6       6
2012-04-23       7       7
2012-04-24       8       8
2012-04-25       9       9 
```

您可以有任意多个级别：

```
In [29]: pd.concat([df2, df2], axis=1, keys=['tier1', 'tier2'])
Out[29]: 
             tier1                       tier2                    
            group1        group2        group1        group2      
                 a  b  c       a  b  c       a  b  c       a  b  c
2012-04-16       0  0  0       0  0  0       0  0  0       0  0  0
2012-04-17       1  1  1       1  1  1       1  1  1       1  1  1
2012-04-18       2  2  2       2  2  2       2  2  2       2  2  2
2012-04-19       3  3  3       3  3  3       3  3  3       3  3  3
2012-04-20       4  4  4       4  4  4       4  4  4       4  4  4
2012-04-21       5  5  5       5  5  5       5  5  5       5  5  5
2012-04-22       6  6  6       6  6  6       6  6  6       6  6  6
2012-04-23       7  7  7       7  7  7       7  7  7       7  7  7
2012-04-24       8  8  8       8  8  8       8  8  8       8  8  8
2012-04-25       9  9  9       9  9  9       9  9  9       9  9  9 
```

# sql - SQL 查询太复杂，但看起来很简单

> ID：11037896
> 
> 赞同：0
> 
> 时间：2012-06-14T16:58:44.943
> 
> 标签：sql, long-integer

我最近通过 SAS/KXen 开发了一个模型，并在 SQL 中导出了这个分数代码脚本。但是，我得到一个“这个表达式输入错误，或者它太复杂而无法计算。例如，一个数字表达式可能包含太多复杂的元素。尝试通过将表达式的一部分分配给变量来简化表达式。（错误 3071)" 错误代码，但这个脚本看起来很简单（只是很多情况下）。有什么想法可以解决这个问题吗？谢谢：

-- KXEN 分析框架 - IXI Corp - Equifax_US_Amendment 1_2011_06_30 - Itam Media - - 版权所有 KXEN (c) 1999-2011 - 模型内置于 5.1.4 - 模型名称为 auto_digital_targets_model：自动触发（添加月份）- 模型版本为 1

```
SELECT $Key, "rr_auto", CAST( (CASE 
WHEN "rr_auto" <= -1.077823785821e0 THEN 6.05306179145e-3
WHEN "rr_auto" <= -7.882377294631e-2 THEN 6.05306179145e-3
WHEN "rr_auto" <= -7.782378582091e-2 THEN  ( 1.353029818544e-3*"rr_auto"+6.159712720187e-3 ) 
WHEN "rr_auto" <= -2.27776053868e-2 THEN  ( 2.457958732379e-5*"rr_auto"+6.056327680634e-3 ) 
WHEN "rr_auto" <= -2.27225048152e-2 THEN  ( 2.453076886879e1*"rr_auto"+5.648081862521e-1 ) 
WHEN "rr_auto" <= -2.239074958722e-2 THEN  ( 4.074267027032e0*"rr_auto"+9.998502008548e-2 ) 
WHEN "rr_auto" <= -2.122812183221e-2 THEN  ( 3.317444508635e-1*"rr_auto"+1.618709683277e-2 ) 
WHEN "rr_auto" <= -1.93194152634e-2 THEN  ( 2.02071555915e-1*"rr_auto"+1.343438352374e-2 ) 
WHEN "rr_auto" <= -1.880207986003e-2 THEN  ( 2.750673996089e0*"rr_auto"+6.26719178928e-2 ) 
WHEN "rr_auto" <= -1.629110457901e-2 THEN  ( 5.667204500391e-1*"rr_auto"+2.160902706983e-2 ) 
WHEN "rr_auto" <= -1.422586845977e-2 THEN  ( 8.377498048977e-1*"rr_auto"+2.602439734411e-2 ) 
WHEN "rr_auto" <= -1.272245032419e-2 THEN  ( 1.150811683736e0*"rr_auto"+3.047797758284e-2 ) 
WHEN "rr_auto" <= -1.040443748766e-2 THEN  ( 4.840967408216e-1*"rr_auto"+2.199572317408e-2 ) 
WHEN "rr_auto" <= -9.092699548129e-3 THEN  ( 8.554623797399e-1*"rr_auto"+2.585957746292e-2 ) 
WHEN "rr_auto" <= -7.776715513431e-3 THEN  ( 8.499508924389e-1*"rr_auto"+2.580946310972e-2 ) 
WHEN "rr_auto" <= -7.067411649177e-3 THEN  ( 1.57692895964e0*"rr_auto"+3.146297199262e-2 ) 
WHEN "rr_auto" <= -6.189206328952e-3 THEN  ( 1.028690319931e0*"rr_auto"+2.758833836143e-2 ) 
WHEN "rr_auto" <= -5.106390124994e-3 THEN  ( 8.343071599086e-1*"rr_auto"+2.638525893334e-2 ) 
WHEN "rr_auto" <= -4.068712552393e-3 THEN  ( 9.084700249121e-1*"rr_auto"+2.676396419647e-2 ) 
WHEN "rr_auto" <= -3.236476389088e-3 THEN  ( 1.132730121325e0*"rr_auto"+2.767641630835e-2 ) 
WHEN "rr_auto" <= -2.311112848156e-3 THEN  ( 9.162096194071e-1*"rr_auto"+2.697565065093e-2 ) 
WHEN "rr_auto" <= -1.484466429351e-3 THEN  ( 1.025622271342e0*"rr_auto"+2.722851673069e-2 ) 
WHEN "rr_auto" <= -6.582919879849e-4 THEN  ( 1.026794442297e0*"rr_auto"+2.723025679085e-2 ) 
WHEN "rr_auto" <= -2.372768614338e-4 THEN  ( 2.014918874085e0*"rr_auto"+2.788074106867e-2 ) 
WHEN "rr_auto" <= 7.348116300255e-4 THEN  ( 3.779561021206e-1*"rr_auto"+2.749231131023e-2 ) 
WHEN "rr_auto" <= 1.466972506743e-3 THEN  ( 5.018115401022e-1*"rr_auto"+2.740130213251e-2 ) 
WHEN "rr_auto" <= 1.773626724415e-3 THEN  ( 2.860591190964e0*"rr_auto"+2.394106082303e-2 ) 
WHEN "rr_auto" <= 2.233186453451e-3 THEN  ( 1.908810320657e0*"rr_auto"+2.562915529258e-2 ) 
WHEN "rr_auto" <= 3.00010379386e-3 THEN  ( 6.854086624086e-1*"rr_auto"+2.83612270689e-2 ) 
WHEN "rr_auto" <= 3.936044386394e-3 THEN  ( 5.616294374467e-1*"rr_auto"+2.873257635351e-2 ) 
WHEN "rr_auto" <= 4.478472197817e-3 THEN  ( 1.672101099827e0*"rr_auto"+2.436172170527e-2 ) 
WHEN "rr_auto" <= 5.028307559689e-3 THEN  ( 1.649574041524e0*"rr_auto"+2.446260828431e-2 ) 
WHEN "rr_auto" <= 5.850721137488e-3 THEN  ( 7.37321002719e-1*"rr_auto"+2.904968801315e-2 ) 
WHEN "rr_auto" <= 6.001886640999e-3 THEN  ( 4.011383482005e0*"rr_auto"+9.894094200759e-3 ) 
WHEN "rr_auto" <= 6.746515643618e-3 THEN  ( 1.653178226231e-1*"rr_auto"+3.297770584155e-2 ) 
WHEN "rr_auto" <= 7.617596362912e-3 THEN  ( 1.413192172072e-1*"rr_auto"+3.313961256843e-2 ) 
WHEN "rr_auto" <= 7.733833416175e-3 THEN  ( 7.936496738217e0*"rr_auto"-2.62408254121e-2 ) 
WHEN "rr_auto" <= 8.391316551827e-3 THEN  ( 1.403100618187e0*"rr_auto"+2.428730648814e-2 ) 
WHEN "rr_auto" <= 9.277818407042e-3 THEN  ( 7.717893009392e-1*"rr_auto"+2.95848332808e-2 ) 
WHEN "rr_auto" <= 9.921191372171e-3 THEN  ( 1.063446374344e0*"rr_auto"+2.68788948332e-2 ) 
WHEN "rr_auto" <= 1.04156843028e-2 THEN  ( 1.800201154244e0*"rr_auto"+1.956941703499e-2 ) 
WHEN "rr_auto" <= 1.158256334531e-2 THEN  ( 7.628783379167e-1*"rr_auto"+3.037383363673e-2 ) 
WHEN "rr_auto" <= 1.235526014615e-2 THEN  ( 1.739757568828e0*"rr_auto"+1.905907783277e-2 ) 
WHEN "rr_auto" <= 1.344232502489e-2 THEN  ( 1.236637420602e0*"rr_auto"+2.527525311767e-2 ) 
WHEN "rr_auto" <= 1.446073277534e-2 THEN  ( 1.408996524257e0*"rr_auto"+2.295834774894e-2 ) 
WHEN "rr_auto" <= 1.670931082955e-2 THEN  ( 6.381512876404e-1*"rr_auto"+3.410532701834e-2 ) 
WHEN "rr_auto" <= 1.773094271753e-2 THEN  ( 3.091367987252e0*"rr_auto"-6.886208815554e-3 ) 
WHEN "rr_auto" <= 2.149117445603e-2 THEN  ( 8.399057113687e-1*"rr_auto"+3.303431731419e-2 ) 
WHEN "rr_auto" <= 2.399923014126e-2 THEN  ( 1.887927909042e0*"rr_auto"+1.051109991042e-2 ) 
WHEN "rr_auto" <= 2.403763415355e-2 THEN  ( 1.232951466039e2*"rr_auto"-2.903167468286e0 ) 
WHEN "rr_auto" <= 6.240324243199e-2 THEN  ( 1.235421072765e-4*"rr_auto"+6.055195607717e-2 ) 
WHEN "rr_auto" <= 6.340324247949e-2 THEN  ( 4.739767868535e-3*"rr_auto"+6.026388866803e-2 ) 
WHEN "rr_auto" <= 1.062403242432e0 THEN 6.05644052721e-2
WHEN "rr_auto" > 1.062403232432e0 THEN 6.05644052721e-2
WHEN "rr_auto" >= 1.562403222432e0 THEN 6.05644052721e-2
ELSE 0.0e0
END)  AS FLOAT )
AS PROBA0 
FROM 
(
SELECT $Key, 
( 5.881871083571e-3 + 
CAST( (CASE 
WHEN ( "Comp360" IS NULL ) THEN 4.935327682215e-3
WHEN "Comp360" < 1.418e3 THEN -9.487857723034e-3
WHEN "Comp360" <= 3.73200624627e4 THEN  ( 3.909023382895e-8*"Comp360"-9.543287674603e-3 ) 
WHEN "Comp360" <= 3.735600000001e4 THEN  ( 8.871132410687e-5*"Comp360"-3.318796594523e0 ) 
WHEN "Comp360" <= 4.329428094367e4 THEN  ( 5.757205724121e-7*"Comp360"-2.640298888932e-2 ) 
WHEN "Comp360" <= 5.366200000001e4 THEN  ( 2.151378961397e-7*"Comp360"-1.079182119937e-2 ) 
WHEN "Comp360" <= 5.5568715698e4 THEN  ( 9.963450072002e-7*"Comp360"-5.27129571931e-2 ) 
WHEN "Comp360" <= 7.363500000001e4 THEN  ( 4.97528001222e-8*"Comp360"-1.120439560443e-4 ) 
WHEN "Comp360" <= 7.456136504401e4 THEN  ( 2.470352068076e-7*"Comp360"-1.463893397232e-2 ) 
WHEN "Comp360" <= 1.0e6 THEN  ( 3.909023382895e-8*"Comp360"+8.657270670023e-4 ) 
WHEN "Comp360" >= 1.0e6 THEN 3.995596089595e-2
ELSE 3.0421122029e-3
END) AS FLOAT)+
CAST( (CASE 
WHEN ( "DSIIndex" IS NULL ) THEN -1.22528641747e-3
WHEN "DSIIndex" < 1.0e0 THEN -4.347321884497e-3
WHEN "DSIIndex" <= 6.493600083397e1 THEN  ( 1.895933608395e-7*"DSIIndex"-4.347511477858e-3 ) 
WHEN "DSIIndex" <= 6.500000001e1 THEN  ( 2.415957577851e-2*"DSIIndex"-1.573161432703e0 ) 
WHEN "DSIIndex" <= 1.172985795211e2 THEN  ( 2.975408294321e-5*"DSIIndex"-4.723022491584e-3 ) 
WHEN "DSIIndex" <= 2.1100000001e2 THEN  ( 9.399555019836e-6*"DSIIndex"-2.335465279553e-3 ) 
WHEN "DSIIndex" <= 2.289725274846e2 THEN  ( 4.820657323843e-5*"DSIIndex"-1.052374612368e-2 ) 
WHEN "DSIIndex" <= 2.6700000001e2 THEN  ( 1.09151102402e-5*"DSIIndex"-1.985025587747e-3 ) 
WHEN "DSIIndex" <= 2.677330000448e2 THEN  ( 5.566210791432e-4*"DSIIndex"-1.476885192848e-1 ) 
WHEN "DSIIndex" <= 1.00000000001e3 THEN  ( 1.895933608395e-7*"DSIIndex"+1.286551717494e-3 ) 
WHEN "DSIIndex" >= 9.9999999999e2 THEN 1.476145078333e-3
ELSE 1.342517033075e-3
END) AS FLOAT)+
CAST( (CASE 
WHEN ( "Bal_RetailCredit_New" IS NULL ) THEN 3.435891076066e-4
WHEN "Bal_RetailCredit_New" < 0.0e0 THEN -1.027663996908e-3
WHEN "Bal_RetailCredit_New" <= 2.097900028037e1 THEN  ( 1.695549928681e-8*"Bal_RetailCredit_New"-1.027663996908e-3 ) 
WHEN "Bal_RetailCredit_New" <= 2.100000001e1 THEN  ( 2.950669720501e-2*"Bal_RetailCredit_New"-6.200483169289e-1 ) 
WHEN "Bal_RetailCredit_New" <= 1.017480518373e2 THEN  ( 7.690605743411e-6*"Bal_RetailCredit_New"-5.691783444176e-4 ) 
WHEN "Bal_RetailCredit_New" <= 1.7000000001e2 THEN  ( 1.075773997763e-5*"Bal_RetailCredit_New"-8.812532774423e-4 ) 
WHEN "Bal_RetailCredit_New" <= 7.17208026001e2 THEN  ( 1.35662785556e-6*"Bal_RetailCredit_New"+7.169357833101e-4 ) 
WHEN "Bal_RetailCredit_New" <= 5.47378e5 THEN  ( 1.69554992868e-8*"Bal_RetailCredit_New"+1.677759549427e-3 ) 
WHEN "Bal_RetailCredit_New" >= 5.47378e5 THEN 1.095882683804e-2
ELSE 3.435891076066e-4
END) AS FLOAT)+
CAST( (CASE 
WHEN ( "Bal_OtherNonMortgage_New" IS NULL ) THEN 6.49070492785e-4
WHEN "Bal_OtherNonMortgage_New" < 0.0e0 THEN -9.492489235445e-4
WHEN "Bal_OtherNonMortgage_New" <= 3.196800042199e1 THEN  ( -2.865089974917e-8*"Bal_OtherNonMortgage_New"-9.492489235445e-4 ) 
WHEN "Bal_OtherNonMortgage_New" <= 3.200000001e1 THEN  ( 4.305535039747e-2*"Bal_OtherNonMortgage_New"-1.37734362408e0 ) 
WHEN "Bal_OtherNonMortgage_New" <= 3.949024186059e3 THEN  ( 3.230840719637e-7*"Bal_OtherNonMortgage_New"+4.17249948639e-4 ) 
WHEN "Bal_OtherNonMortgage_New" <= 3.917056e6 THEN  ( -2.865089974917e-8*"Bal_OtherNonMortgage_New"+1.806259859012e-3 ) 
WHEN "Bal_OtherNonMortgage_New" >= 3.917056e6 THEN -1.104209189089e-1
ELSE 6.49070492785e-4
END) AS FLOAT)+
CAST( (CASE 
WHEN ( "HH_AutoFin" IS NULL ) THEN 1.488472474192e-4
WHEN "HH_AutoFin" < 0.0e0 THEN -4.710736071749e-3
WHEN "HH_AutoFin" <= 9.990000138746e0 THEN  ( 1.201538430985e-4*"HH_AutoFin"-4.710736071749e-3 ) 
WHEN "HH_AutoFin" <= 1.000000001e1 THEN  ( 6.400562921613e-2*"HH_AutoFin"-6.429266432734e-1 ) 
WHEN "HH_AutoFin" <= 1.392892551578e1 THEN  ( 2.827546681306e-4*"HH_AutoFin"-5.697897793341e-3 ) 
WHEN "HH_AutoFin" <= 2.200000001e1 THEN  ( 1.586846072613e-4*"HH_AutoFin"-3.969735157996e-3 ) 
WHEN "HH_AutoFin" <= 2.792193557951e1 THEN  ( 1.726678673103e-4*"HH_AutoFin"-4.277366879072e-3 ) 
WHEN "HH_AutoFin" <= 3.300000001e1 THEN  ( 1.915716060023e-4*"HH_AutoFin"-4.805195852855e-3 ) 
WHEN "HH_AutoFin" <= 3.306700001318e1 THEN  ( 5.533049130884e-3*"HH_AutoFin"-1.81073954174e-1 ) 
WHEN "HH_AutoFin" <= 1.0000000001e2 THEN  ( 1.201538430985e-4*"HH_AutoFin"-2.085745675522e-3 ) 
WHEN "HH_AutoFin" >= 9.999999999e1 THEN 9.929638634331e-3
ELSE 1.488472474192e-4
END) AS FLOAT)+
CAST( (CASE 
WHEN ( "HH_AutoBnk" IS NULL ) THEN -1.614032285829e-4
WHEN "HH_AutoBnk" < 0.0e0 THEN -1.838399331938e-3
WHEN "HH_AutoBnk" <= 1.298700017737e1 THEN  ( 1.815003168977e-4*"HH_AutoBnk"-1.838399331938e-3 ) 
WHEN "HH_AutoBnk" <= 1.300000001e1 THEN  ( -6.04737135335e-2*"HH_AutoBnk"+7.85890873095e-1 ) 
WHEN "HH_AutoBnk" <= 1.583695456651e1 THEN  ( -9.644126182477e-5*"HH_AutoBnk"+9.863335632526e-4 ) 
WHEN "HH_AutoBnk" <= 2.000000001e1 THEN  ( 5.242714728826e-5*"HH_AutoBnk"-1.371288666771e-3 ) 
WHEN "HH_AutoBnk" <= 2.424793984083e1 THEN  ( 5.500665361205e-5*"HH_AutoBnk"-1.422878793247e-3 ) 
WHEN "HH_AutoBnk" <= 2.800000001e1 THEN  ( 1.936191250225e-5*"HH_AutoBnk"-5.58567255531e-4 ) 
WHEN "HH_AutoBnk" <= 3.570272726119e1 THEN  ( 1.025214008351e-4*"HH_AutoBnk"-2.887032928851e-3 ) 
WHEN "HH_AutoBnk" <= 4.100000001e1 THEN  ( 1.450836551356e-5*"HH_AutoBnk"+2.552724657839e-4 ) 
WHEN "HH_AutoBnk" <= 4.10590000128e1 THEN  ( -1.48117517394e-2*"HH_AutoBnk"+6.081319367672e-1 ) 
WHEN "HH_AutoBnk" <= 1.0000000001e2 THEN  ( 1.815003168977e-4*"HH_AutoBnk"-7.475999454305e-3 ) 
WHEN "HH_AutoBnk" >= 9.999999999e1 THEN 1.067403223547e-2
ELSE -1.614032285829e-4
END) AS FLOAT)+
CAST( (CASE 
WHEN ( "HH_FMOther" IS NULL ) THEN -1.069677183384e-4
WHEN "HH_FMOther" < 0.0e0 THEN 1.484348281833e-3
WHEN "HH_FMOther" <= 1.398600019024e1 THEN  ( -5.691356379979e-5*"HH_FMOther"+1.484348281833e-3 ) 
WHEN "HH_FMOther" <= 1.400000001e1 THEN  ( -1.381375944085e-2*"HH_FMOther"+1.938875971978e-1 ) 
WHEN "HH_FMOther" <= 1.728919387302e1 THEN  ( -1.15466926935e-4*"HH_FMOther"+2.111502003043e-3 ) 
WHEN "HH_FMOther" <= 2.800000001e1 THEN  ( -6.243543751057e-5*"HH_FMOther"+1.194630301539e-3 ) 
WHEN "HH_FMOther" <= 3.189892742845e1 THEN  ( -7.208279176467e-5*"HH_FMOther"+1.464756220654e-3 ) 
WHEN "HH_FMOther" <= 3.600000001e1 THEN  ( -7.062423979564e-5*"HH_FMOther"+1.418229977258e-3 ) 
WHEN "HH_FMOther" <= 3.606400001304e1 THEN  ( -9.354834814612e-4*"HH_FMOther"+3.255316267722e-2 ) 
WHEN "HH_FMOther" <= 1.0000000001e2 THEN  ( -5.691356379979e-5*"HH_FMOther"+8.684171640062e-4 ) 
WHEN "HH_FMOther" >= 9.999999999e1 THEN -4.822939215973e-3
ELSE -1.069677183384e-4
END) AS FLOAT)+
CAST( (CASE 
WHEN ( "HH_MortgageCredit" IS NULL ) THEN -1.456794544127e-5
WHEN "HH_MortgageCredit" < 0.0e0 THEN -8.384990197329e-4
WHEN "HH_MortgageCredit" <= 2.297700030612e1 THEN  ( 1.325824884976e-5*"HH_MortgageCredit"-8.384990197329e-4 ) 
WHEN "HH_MortgageCredit" <= 2.300000001e1 THEN  ( 2.714272371401e-3*"HH_MortgageCredit"-6.28997013134e-2 ) 
WHEN "HH_MortgageCredit" <= 3.589630763069e1 THEN  ( 1.807532725954e-5*"HH_MortgageCredit"-8.871692981523e-4 ) 
WHEN "HH_MortgageCredit" <= 5.600000001e1 THEN  ( 1.524051891743e-5*"HH_MortgageCredit"-7.854101458584e-4 ) 
WHEN "HH_MortgageCredit" <= 6.37657348849e1 THEN  ( 1.838988781184e-5*"HH_MortgageCredit"-9.617748039452e-4 ) 
WHEN "HH_MortgageCredit" <= 7.000000001e1 THEN  ( 2.122077144275e-5*"HH_MortgageCredit"-1.142288179015e-3 ) 
WHEN "HH_MortgageCredit" <= 7.003000001142e1 THEN  ( 1.667940733899e-3*"HH_MortgageCredit"-1.16412685551e-1 ) 
WHEN "HH_MortgageCredit" <= 1.0000000001e2 THEN  ( 1.325824884976e-5*"HH_MortgageCredit"-5.352711205967e-4 ) 
WHEN "HH_MortgageCredit" >= 9.999999999e1 THEN 7.905537643791e-4
ELSE -1.456794544127e-5
END) AS FLOAT)+
CAST( (CASE 
WHEN ( "HH_1stMortgageCredit_NL12" IS NULL ) THEN -3.851479335309e-4
WHEN "HH_1stMortgageCredit_NL12" < 0.0e0 THEN -5.924051677173e-4
WHEN "HH_1stMortgageCredit_NL12" <= 5.994000087248e0 THEN  ( 1.328845709937e-4*"HH_1stMortgageCredit_NL12"-5.924051677173e-4 ) 
WHEN "HH_1stMortgageCredit_NL12" <= 6.00000001e0 THEN  ( -5.29232194671e-2*"HH_1stMortgageCredit_NL12"+3.174258865351e-1 ) 
WHEN "HH_1stMortgageCredit_NL12" <= 6.094000014465e0 THEN  ( -3.253631499761e-3*"HH_1stMortgageCredit_NL12"+1.940835873104e-2 ) 
WHEN "HH_1stMortgageCredit_NL12" <= 1.0000000001e2 THEN  ( 1.328845709937e-4*"HH_1stMortgageCredit_NL12"-1.229070219259e-3 ) 
WHEN "HH_1stMortgageCredit_NL12" >= 9.999999999e1 THEN 1.205938688011e-2
ELSE -3.851479335309e-4
END) AS FLOAT)+
CAST( (CASE 
WHEN ( "AvgMoB_TotalAllCredit" IS NULL ) THEN -7.682563890863e-5
WHEN "AvgMoB_TotalAllCredit" < 2.0e0 THEN 4.813545150812e-3
WHEN "AvgMoB_TotalAllCredit" <= 7.392800093697e1 THEN  ( -6.861529764345e-5*"AvgMoB_TotalAllCredit"+4.950775746099e-3 ) 
WHEN "AvgMoB_TotalAllCredit" <= 7.400000001e1 THEN  ( 2.788005779118e-3*"AvgMoB_TotalAllCredit"-2.062335098648e-1 ) 
WHEN "AvgMoB_TotalAllCredit" <= 9.715412288377e1 THEN  ( -5.973247057019e-5*"AvgMoB_TotalAllCredit"+4.499120612198e-3 ) 
WHEN "AvgMoB_TotalAllCredit" <= 1.0700000001e2 THEN  ( -1.949069486607e-5*"AvgMoB_TotalAllCredit"+5.894661907816e-4 ) 
WHEN "AvgMoB_TotalAllCredit" <= 1.07316000025e2 THEN  ( 1.46200109428e-3*"AvgMoB_TotalAllCredit"-1.579301552478e-1 ) 
WHEN "AvgMoB_TotalAllCredit" <= 4.2300000001e2 THEN  ( -6.861529764345e-5*"AvgMoB_TotalAllCredit"+6.329473490782e-3 ) 
WHEN "AvgMoB_TotalAllCredit" >= 4.2299999999e2 THEN -2.26947974124e-2
ELSE -7.682563890863e-5
END) AS FLOAT)+
CAST( (CASE 
WHEN ( "NA_AutoBank" IS NULL ) THEN 2.903024345148e-4
WHEN "NA_AutoBank" < 0.0e0 THEN -3.829896504652e-3
WHEN "NA_AutoBank" <= 1.298700116737e-1 THEN  ( -3.169363530011e-4*"NA_AutoBank"-3.829896504652e-3 ) 
WHEN "NA_AutoBank" <= 1.3000001e-1 THEN  ( 1.294408334764e1*"NA_AutoBank"-1.684919183051e0 ) 
WHEN "NA_AutoBank" <= 2.091882296263e-1 THEN  ( 2.093307254777e-2*"NA_AutoBank"-4.909647289856e-3 ) 
WHEN "NA_AutoBank" <= 3.2000001e-1 THEN  ( 1.053502926052e-2*"NA_AutoBank"-2.734499126998e-3 ) 
WHEN "NA_AutoBank" <= 3.849008699287e-1 THEN  ( 1.821171845231e-2*"NA_AutoBank"-5.191039668372e-3 ) 
WHEN "NA_AutoBank" <= 4.7000001e-1 THEN  ( 1.045997845179e-2*"NA_AutoBank"-2.207388276225e-3 ) 
WHEN "NA_AutoBank" <= 5.308603385687e-1 THEN  ( 1.475209472318e-2*"NA_AutoBank"-4.224682923781e-3 ) 
WHEN "NA_AutoBank" <= 5.7000001e-1 THEN  ( 3.611812983299e-2*"NA_AutoBank"-1.556706334239e-2 ) 
WHEN "NA_AutoBank" <= 6.744300149602e-1 THEN  ( 1.333868417139e-2*"NA_AutoBank"-2.582779315276e-3 ) 
WHEN "NA_AutoBank" <= 1.0500000001e2 THEN  ( -3.169363530011e-4*"NA_AutoBank"+6.626980902726e-3 ) 
WHEN "NA_AutoBank" >= 1.0499999999e2 THEN -2.665133616239e-2
ELSE 2.903024345148e-4
END) AS FLOAT)+
CAST( (CASE 
WHEN ( "Cty" IS NULL ) THEN -1.782382804934e-3
WHEN "Cty" < 0.0e0 THEN 1.962640547298e-4
WHEN "Cty" > 1.9e1 THEN -6.707198221185e-3
WHEN ABS( "Cty" - 0.0e0 ) < 10e-9 THEN 1.962640547298e-4
WHEN ABS( "Cty" - 1.0e0 ) < 10e-9 THEN -1.335104218808e-4
WHEN ABS( "Cty" - 2.0e0 ) < 10e-9 THEN -4.632848984915e-4
WHEN ABS( "Cty" - 3.0e0 ) < 10e-9 THEN -7.930593751021e-4
WHEN ABS( "Cty" - 4.0e0 ) < 10e-9 THEN -1.122833851713e-3
WHEN ABS( "Cty" - 5.0e0 ) < 10e-9 THEN -1.452608328323e-3
WHEN ABS( "Cty" - 6.0e0 ) < 10e-9 THEN -1.782382804934e-3
WHEN ABS( "Cty" - 7.0e0 ) < 10e-9 THEN -2.318538385233e-3
WHEN ABS( "Cty" - 8.0e0 ) < 10e-9 THEN -2.648312861844e-3
WHEN ABS( "Cty" - 9.0e0 ) < 10e-9 THEN -2.978087338455e-3
WHEN ABS( "Cty" - 1.0e1 ) < 10e-9 THEN -3.307861815065e-3
WHEN ABS( "Cty" - 1.1e1 ) < 10e-9 THEN -3.637636291676e-3
WHEN ABS( "Cty" - 1.2e1 ) < 10e-9 THEN -3.967410768287e-3
WHEN ABS( "Cty" - 1.3e1 ) < 10e-9 THEN -4.297185244897e-3
WHEN ABS( "Cty" - 1.4e1 ) < 10e-9 THEN -4.626959721508e-3
WHEN ABS( "Cty" - 1.5e1 ) < 10e-9 THEN -4.956734198119e-3
WHEN ABS( "Cty" - 1.6e1 ) < 10e-9 THEN -5.286508674729e-3
WHEN ABS( "Cty" - 1.7e1 ) < 10e-9 THEN -6.047649267963e-3
WHEN ABS( "Cty" - 1.8e1 ) < 10e-9 THEN -6.377423744574e-3
WHEN ABS( "Cty" - 1.9e1 ) < 10e-9 THEN -6.707198221185e-3
WHEN "Cty" >= 0.0e0 AND "Cty" <= 6.0e0 THEN -4.75035309443e-3
WHEN "Cty" >= 7.0e0 AND "Cty" <= 1.6e1 THEN -4.956734198119e-3
WHEN "Cty" >= 1.7e1 AND "Cty" <= 1.9e1 THEN -5.388100314742e-3
ELSE -4.956734198119e-3
END) AS FLOAT )+
CAST( (CASE 
WHEN ( "Den" IS NULL ) THEN -1.370866855927e-3
WHEN "Den" < 0.0e0 THEN 1.187397664919e-4
WHEN "Den" > 1.9e1 THEN -4.731455220138e-3
WHEN ABS( "Den" - 0.0e0 ) < 10e-9 THEN 1.187397664919e-4
WHEN ABS( "Den" - 1.0e0 ) < 10e-9 THEN -1.222356536684e-4
WHEN ABS( "Den" - 2.0e0 ) < 10e-9 THEN -3.632110738288e-4
WHEN ABS( "Den" - 3.0e0 ) < 10e-9 THEN -6.041864939891e-4
WHEN ABS( "Den" - 4.0e0 ) < 10e-9 THEN -8.451619141494e-4
WHEN ABS( "Den" - 5.0e0 ) < 10e-9 THEN -1.08613733431e-3
WHEN ABS( "Den" - 6.0e0 ) < 10e-9 THEN -1.370866855927e-3
WHEN ABS( "Den" - 7.0e0 ) < 10e-9 THEN -1.611842276087e-3
WHEN ABS( "Den" - 8.0e0 ) < 10e-9 THEN -1.852817696247e-3
WHEN ABS( "Den" - 9.0e0 ) < 10e-9 THEN -2.170563863785e-3
WHEN ABS( "Den" - 1.0e1 ) < 10e-9 THEN -2.411539283945e-3
WHEN ABS( "Den" - 1.1e1 ) < 10e-9 THEN -2.652514704105e-3
WHEN ABS( "Den" - 1.2e1 ) < 10e-9 THEN -2.893490124266e-3
WHEN ABS( "Den" - 1.3e1 ) < 10e-9 THEN -3.285602699176e-3
WHEN ABS( "Den" - 1.4e1 ) < 10e-9 THEN -3.526578119336e-3
WHEN ABS( "Den" - 1.5e1 ) < 10e-9 THEN -3.767553539497e-3
WHEN ABS( "Den" - 1.6e1 ) < 10e-9 THEN -4.008528959657e-3
WHEN ABS( "Den" - 1.7e1 ) < 10e-9 THEN -4.249504379817e-3
WHEN ABS( "Den" - 1.8e1 ) < 10e-9 THEN -4.490479799978e-3
WHEN ABS( "Den" - 1.9e1 ) < 10e-9 THEN -4.731455220138e-3
WHEN "Den" >= 0.0e0 AND "Den" <= 5.0e0 THEN -1.32711275447e-3
WHEN "Den" >= 6.0e0 AND "Den" <= 8.0e0 THEN -1.370866855927e-3
WHEN "Den" >= 9.0e0 AND "Den" <= 1.2e1 THEN -1.447637603304e-3
WHEN "Den" >= 1.3e1 AND "Den" <= 1.9e1 THEN -1.598774758054e-3
ELSE -1.370866855927e-3
END) AS FLOAT )+
CAST( (CASE 
WHEN ( "OM_Score_CompBank" IS NULL ) THEN 2.067576391454e-3
WHEN "OM_Score_CompBank" < -1.83990421043e1 THEN 5.862160932523e-3
WHEN "OM_Score_CompBank" <= 5.407811559579e1 THEN  ( -7.321353908529e-5*"OM_Score_CompBank"+4.515101944288e-3 ) 
WHEN "OM_Score_CompBank" <= 5.41506643682e1 THEN  ( -8.486274509202e-3*"OM_Score_CompBank"+4.594775855165e-1 ) 
WHEN "OM_Score_CompBank" <= 5.988691655253e1 THEN  ( -1.796170279856e-4*"OM_Score_CompBank"+9.666564312643e-3 ) 
WHEN "OM_Score_CompBank" <= 6.60103895187e1 THEN  ( -1.66585554025e-4*"OM_Score_CompBank"+8.88614951914e-3 ) 
WHEN "OM_Score_CompBank" <= 6.608293388151e1 THEN  ( -7.954749568922e-3*"OM_Score_CompBank"+5.229858897002e-1 ) 
WHEN "OM_Score_CompBank" <= 1.38554748887e2 THEN  ( -7.321353908529e-5*"OM_Score_CompBank"+2.150865434479e-3 ) 
WHEN "OM_Score_CompBank" >= 1.38554748867e2 THEN -7.99321808788e-3
ELSE 8.430977645999e-4
END) AS FLOAT)+
CAST( (CASE 
WHEN ( "month" IS NULL OR "month" = ''  ) THEN -2.771172542423e-3
WHEN "month" IN('01', '02', '03', '04', '05')  THEN 2.624553958278e-3
WHEN "month" IN('06', '12')  THEN 3.782250849016e-4
ELSE -2.771172542423e-3
END) AS FLOAT )
) AS "rr_auto"
FROM $Dataset
) TMPTABLE0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:05:12.363

您可以创建一组临时表/表变量，将比较和计算常量放入其中，然后查询这些表中的值。我想这也会更容易阅读。

# c#-3.0 - 图像隐写术中的错误密码

> ID：11037900
> 
> 赞同：0
> 
> 时间：2012-06-14T16:59:02.490
> 
> 标签：c#-3.0, steganography

我有一个关于图像隐写术的项目（用于无损图像）。我正在努力学习它背后的过程。但是当我运行它来提取消息时，会为**错误的密码**以及**空图像（无数据编码）**生成**异常**。它随机选择**像素**并使用**哈希集**。但是我不明白中间的一些步骤。我怀疑这些步骤中的任何错误是否会导致异常。此外，在某些情况下， **即使密码错误，该项目也会提取隐藏消息**。我该如何解决这些问题？

 ******为这个长代码道歉，但希望有一个解决方案..感谢您的帮助。

代码如下所示：

```
//encoding data in image

private void EncodeByte(Bitmap bm, Bitmap visible_bm, Random rand,
        byte value, HashSet<string> used_positions)
    {
        for (int i = 0; i < 8; i++)
        {
            // Pick a position for the ith bit.
            int row, col, pix;
            PickPosition(bm, rand, used_positions, out row, out col, out pix);

            // Get the color's pixel components.
            Color clr = bm.GetPixel(row, col);
            byte r = clr.R;
            byte g = clr.G;
            byte b = clr.B; 
```

疑问：如何在下面显示的“下两行”中获取下一个要存储的位？

```
// Get the next bit to store.
            int bit = 0;
            if ((value & 1) == 1) bit = 1;  //’value’ is the byte to be encoded 
```

* * *

```
// Update the color.
            switch (pix)
            {
                case 0:
                    r = (byte)((r & 0xFE) | bit);
                    break;
                case 1:
                    g = (byte)((g & 0xFE) | bit);
                    break;
                case 2:
                    b = (byte)((b & 0xFE) | bit);
                    break;
            }
            clr = Color.FromArgb(clr.A, r, g, b);
            bm.SetPixel(row, col, clr);

  // Move to the next bit in the value.
            value >>= 1;
        }
    }

  //decoding  image
  private string DecodeMessageInImage(Bitmap bm, string password)
    {
        // Initialize a random number generator.
        Random rand = new Random(obj.NumericPassword(password));

        // Create a new HashSet.
        HashSet<string> used_positions = new HashSet<string>();

        // Make a byte array big enough to hold the message length.
        int len = 0;
        byte[] bytes = BitConverter.GetBytes(len);

   // Decode the message length.
        for (int i = 0; i < bytes.Length; i++)
        {
            bytes[i] = DecodeByte(bm, rand, used_positions);
        }
        len = BitConverter.ToInt32(bytes, 0); 
```

疑问：以下检查（如果 len>10000）是否正确？

```
 // Sanity check.

        if(len>10000)
        {
            throw new InvalidDataException(
            "Message length " + len.ToString() +
                " is too big to make sense. Invalid password.");
        } 
```

* * *

```
 // Decode the message bytes.
        char[] chars = new char[len];
        for (int i = 0; i < chars.Length; i++)
        {
            chars[i] = (char)DecodeByte(bm, rand, used_positions);
        }
        return new string(chars);
    }

    // Decode a byte.
    private byte DecodeByte(Bitmap bm, Random rand, HashSet<string>   used_positions)
    {

        byte value = 0;
        byte value_mask = 1;
        for (int i = 0; i < 8; i++)
        {
            // Find the position for the ith bit.
            int row, col, pix;
           obj.PickPosition(bm, rand, used_positions, out row, out col, out pix);

            // Get the color component value.
            byte color_value = 0;
            switch (pix)
            {
                case 0:
                    color_value = bm.GetPixel(row, col).R;
                    break;
                case 1:
                    color_value = bm.GetPixel(row, col).G;
                    break;
                case 2:
                    color_value = bm.GetPixel(row, col).B;
                    break;
            } 
```

疑问：你能告诉我以下是如何工作的：

```
// Set the next bit if appropriate.
            if ((color_value & 1) == 1)
            {
                // Set the bit.
                value = (byte)(value | value_mask);
            }

            // Move to the next bit.
            value_mask <<= 1;
        } 
```

* * *

```
 return value;
      } 
```

疑问：这个无限循环是否异常？这是一个正确的条件吗？

```
 // Pick an unused (r, c, pixel) combination.
    public void PickPosition(Bitmap bm, Random rand,
        HashSet<string> used_positions,
        out int row, out int col, out int pix)
    {
        for (; ; )
        {
            // Pick random r, c, and pix.
            row = rand.Next(0, bm.Width);
            col = rand.Next(0, bm.Height);
            pix = rand.Next(0, 3);

            // See if this location is available.
            string key =
                row.ToString() + "/" +
                col.ToString() + "/" +
                pix.ToString();
            if (!used_positions.Contains(key))
            {
                used_positions.Add(key);
                return;
            }
        }
      } 
```

* * *

```
 // Convert a string password into a numeric value.
    public int NumericPassword(string password)
    {
        // Initialize the shift values to different non-zero values.
        int shift1 = 3;
        int shift2 = 17;

        // Process the message.
        char[] chars = password.ToCharArray();
        int value = 0;
        for (int i = 1; i < password.Length; i++)
        {
            // Add the next letter.
            int ch_value = (int)chars[i];
            value ^= (ch_value << shift1);
            value ^= (ch_value << shift2);

            // Change the shifts.
            shift1 = (shift1 + 7) % 19;
            shift2 = (shift2 + 13) % 23;
        }
        return value;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:13:47.473

## 首先，为什么会接受错误的密码：

可能会`NumericPassword`为两个不同的密码返回相同的值（“<a href="https://en.wikipedia.org/wiki/Collision_%28computer_science%29" rel="nofollow">hash collission”）。`NumericPassword`基本上是一个哈希函数，因此容易受到碰撞攻击。您可以通过为哈希使用更多字节来改善这种情况，尽管这需要不同的算法和能够处理更大种子的随机数生成器。

在这种情况下，如果它们产生相同的散列，随机数生成器将为不同的密码产生相同的数字序列，即导致对隐写内容的“解密”。

可以通过使用密码作为密钥的加密算法加密数据本身来规避这种情况。

## 关于算法

有关如何将值打包/解包到图像中的问题，请查看[Bitwise Operators](https://en.wikipedia.org/wiki/Bitwise_operation)。

*   例如：

    ```
    if ((value & 1) == 1) bit = 1;  //’value’ is the byte to be encoded 
    ```

    将取值的最低有效位并将其与 1 进行比较。如果为 1，`bit`则设置为 1。这就是将字节值分解为单个位的方式，然后将其写入图像中颜色值的最低有效位除了您展示的案例之外。

    `bitwise and`( ) 运算符的示例`&`：有一个二进制值`00101010`，我们可以`bitwise and`用`00010111`，这将给我们`00000010`。

*   还使用了位移运算符 ( `<<`)。在您的情况下（ ），它将整数中的位向左移动（即它们的重要性向上`<<= 1`）。那里的掩码用于掩码必须将当前读取的位放入值的位置。

    基本上，在编码和解码功能中，从低到高遍历字节中的所有位。然后，通过将图像打包到像素的最低有效位中，一个位接着一个位地写入或读取图像。

*   长度检查是明智的，但我会选择不同的条件（即取决于图像大小的条件，即容器的实际大小）。有必要通过检查图像中编码的数据是否可以使用给定的密码解码来检测可能错误的密码（完整性检查）。

    对于错误的密码，提取的长度可能会非常高。但是，这不是检测错误密码的安全检查（错误的密码也可能产生低长度的数字）。

*   PickPosition 中的“无限”循环。这个循环可能确实是无限的，即如果图像中没有任何位置。就个人而言，我会选择一种算法，它首先通过“坏”（即已使用）像素的邻居，然后再获取一个新的随机值。

    这样，可能需要很长时间才能找到下一个有效位置。此外，它还没有检查是否留下了任何有效位置，但这可能发生在您未显示的部分代码中。

给定算法，可以很容易地计算出可以存储在图像中的位数。该算法将信息存储在每个颜色通道的最低有效位中，因此我们得到每个像素三个位。因此，图像中的总位数为：

```
capacityInBits = width * height * 3 
```******

# iphone - iPhone Robotics Visual-SLAM算法实现

> ID：11037903
> 
> 赞同：3
> 
> 时间：2012-06-14T16:59:13.040
> 
> 标签：iphone, gps, camera, robotics, slam-algorithm

我有一个带有 iPhone 大脑的履带式机器人。它有两个摄像头——一个来自 iPhone，另一个来自独立摄像头。该手机具有 GPS、陀螺仪、加速度计和磁力计，传感器融合将用户引起的加速度与重力分离。手机可以一起检测自己在太空中的姿态。如果机器人之前撞到墙壁，我想教机器人至少避开墙壁。

**任何人都可以建议由此类机器人完成的视觉同时定位和映射的入门项目吗？**我会非常感谢 Objective-c 的实现，因为我在 OpenSlam.org 上看到了一些用 C/C++ 编写的项目，但这些并不是我最擅长的编程语言。

我无法使用激光测距仪，因此任何有关 Visual SLAM 的文章、关键词或学术论文也会有所帮助。

谢谢您的意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T08:46:05.157

我可以建议你看看 FAB-MAP，它在[OpenCV中有一个实现](http://docs.opencv.org/modules/contrib/doc/openfabmap.html)

我正在做关于视觉 SLAM 的 MS 论文，特别是关于闭环问题。

它在 C++ 中，但如果您按照示例进行操作，您会发现它非常易于使用。

# vb.net - 使用浏览器登录 Vb.net

> ID：11037904
> 
> 赞同：0
> 
> 时间：2012-06-14T16:59:21.950
> 
> 标签：vb.net, login, browser

我正在登录网站，但在检查登录是否成功时遇到问题，因为我已经在使用完成的文档。当我检查注销按钮是否存在时，页面还没有完成加载。这是我的代码：

```
Imports System.Net
Imports System.Text
Imports System.IO

Public Class Form1

    Private Sub FutureButton2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles FutureButton2.Click
        If TextBox1.Text = ("") Or
            TextBox2.Text = ("") Or
            TextBox3.Text = ("") Or
            TextBox4.Text = ("") Or
            TextBox5.Text = ("") Or
            TextBox6.Text = ("") Then
            MsgBox("some information is Missing please Fill all The Boxes")

        Else

            WebBrowser1.Navigate("http://combatarms.nexon.net/Support/UserAbuse.aspx")
            Form2.Show()

        End If

    End Sub
    Private Sub WebBrowser2_DocumentCompleted(ByVal sender As System.Object, ByVal e As System.Windows.Forms.WebBrowserDocumentCompletedEventArgs) Handles WebBrowser1.DocumentCompleted

        Dim Username, Password As String
        Username = TextBox1.Text
        Password = TextBox2.Text
        Form2.FutureProgressBar1.Progress = 10
        On Error Resume Next
        WebBrowser1.Document.All("userID").SetAttribute("value", TextBox1.Text)
        Form2.FutureProgressBar1.Progress = 20
        WebBrowser1.Document.All("password").SetAttribute("value", TextBox2.Text)
        Form2.FutureProgressBar1.Progress = 30
        WebBrowser1.Document.All("gnt_login_submit").InvokeMember("click")
        Form2.FutureProgressBar1.Progress = 40

        If WebBrowser1.StatusText = ("Done") Then

            If (WebBrowser1.Document.All("btnLogin") Is Nothing) Then 
        msgbox("Works") 
          else  
         MsgBox("wrong")

I have worked on it for days. The login is working but I can't get it to verify it.

Thanks for the help! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T18:12:49.447

**编辑：**

使用这个：

```
Do While wb.ReadyState <> WebBrowserReadyState.Complete
    Application.DoEvents()

Loop 
```

# r - 在 R 中使用“mlogit”来估计离散选择数据时出错：无效的“次”参数

> ID：11037907
> 
> 赞同：2
> 
> 时间：2012-06-14T16:59:35.050
> 
> 标签：r

每次尝试在此数据上使用“mlogit”运行混合 logit 模型时，我都会收到此错误，并且我无法弄清楚我缺少什么。这是来自关于车辆的联合调查的离散选择数据。使用效果编码对数据进行编码。以下是我为 mlogit 准备数据的方式：

```
DATA <- mlogit.data(data, id.var="id", shape="long", choice="choice", alt.var="alt")

> head(DATA)
    id Task alt Answer choice Price2 Price3 Price4 Price5 American Japanese
1.1  1    1   1      3  FALSE      0      0      1      0        0        0
1.2  1    1   2      3  FALSE      0      0      0      1        0        0
1.3  1    1   3      3   TRUE     -1     -1     -1     -1       -1       -1
2.1  1    2   1      1   TRUE     -1     -1     -1     -1        0        0
2.2  1    2   2      1  FALSE      0      1      0      0        1        0
2.3  1    2   3      1  FALSE      0      0      1      0        0        1
    Chinese SKorean HEV PHEV10 PHEV20 PHEV40 EV75 EV100 EV150 F20 F30 FNA s6
1.1       0       1   0      1      0      0    0     0     0   1   0   0  1
1.2       1       0   0      0      0      1    0     0     0   0   1   0 -1
1.3      -1      -1   0      0      0      0    1     0     0   0   0   1  1
2.1       1       0   0      1      0      0    0     0     0   0   1   0 -1
2.2       0       0   0      0      0      0    0     1     0   1   0   0  1
2.3       0       0   0      0      1      0    0     0     0  -1  -1  -1  0
    s10 eff2 eff3 eff4 accel2 accel3 accel4
1.1   0    0    0    1      1      0      0
1.2  -1   -1   -1   -1      0      0      1
1.3   0    1    0    0     -1     -1     -1
2.1  -1    0    1    0      1      0      0
2.2   0    0    1    0     -1     -1     -1
2.3   1   -1   -1   -1      0      1      0 
```

当我运行它时，这是我得到的错误：

```
> mixed.est <- mlogit(choice ~ Price2 + Price3 + Price4 + Price5 + American + Japanese + 
Chinese + SKorean + HEV + PHEV10 + PHEV20 + PHEV40 + EV75 + EV100 + EV150 + F20 + F30 +  
FNA + s6 + s10 + eff2 + eff3 + eff4 + accel2 + accel3 + accel4|0, DATA, 
rpar=c(Price2='n', Price3='n', Price4='n', Price5='n', American='n', Japanese='n', 
Chinese='n', SKorean='n', HEV='n', PHEV10='n', PHEV20='n', PHEV40='n', EV75='n', 
EV100='n', EV150='n', F20='n', F30='n', FNA='n', S6='n', S10='n', eff2='n', eff3='n', 
eff4='n', accel2='n', accel3='n', accel4='n'), R=100, halton=NA, print.level=0, panel=F)

Error in rep(halt, prime - 1) : invalid 'times' argument 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:09:59.913

我认为您使用了太多随机参数（25）。我使用超过 9 个时遇到了同样的问题。尽管如此，旧版本的 mlogit 可以估计具有大参数尺寸的模型，但是许多参数 = 高度相关的停止绘制（超过尺寸），所以“标准停止绘制”对你来说可能是个坏主意目的。（参见 Train 2009，第 231-235 页） 最佳 dg

# java - 如何让安卓模拟器启动更快

> ID：11037908
> 
> 赞同：6
> 
> 时间：2012-06-14T16:59:37.453
> 
> 标签：java, android

我目前坚持使用 Atom CPU 桌面进行 Android 应用程序开发。有什么方法可以改善它的启动时间。运行模拟器时，我可以看到模拟器使用的内核数只有一个，我在 Eclipse ADT 插件中运行模拟器。

*   如何让模拟器使用两个核心而不是一个？
*   哪些模拟器设置可以加快启动速度？

我的 android 项目将主要是一个 PhoneGap + jQuery android 应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:03:25.750

> 如何让模拟器使用两个核心而不是一个？

你不能，对不起。

> 哪些模拟器设置可以加快启动速度？

您应该尝试使用其中一个 x86 仿真器映像（现在可用于 4.0.3 和 2.3.3）。除此之外，我知道没有什么会加快启动时间。

请注意，您可以让您的模拟器运行更长的时间——例如，您不需要关闭并重新打开它来运行您的应用程序的新副本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T08:35:27.180

尝试在虚拟机中安装android并将其连接到eclipse。它真的比默认模拟器快（在 40 秒内加载）。

首先，您必须在 VMware 工作站中安装 Android x86。在这里可以下载[android-x86-vm-20120130.iso.gz](http://www.mediafire.com/?l3vauu9v9yjb8ba)

然后你必须将你的虚拟机连接到 Eclipse IDE。首先从您的 VM 运行 ICS 并打开 android 命令提示符。（导航到应用程序并运行**终端仿真器**）

在终端中键入“ **netcfg** ”以找出您的虚拟机的 IP

然后转到 cmd（windows 命令提示符）并移动到您的 android 安装路径中的“platform-tool”文件夹（在我的情况下为 cd C:\android-sdk-windows\platform-tools）

然后输入“ **adb connect your ip** ”命令（adb connect 190.156.10.122）

现在您可以在 vm 中轻松调试您的 android 应用程序。试试[这个](http://androidjam.blogspot.com/2012/11/faster-adroid-emulator.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T17:01:56.250

您可以使用[http://android-x86.org/](http://android-x86.org/)运行可以更好地利用您的 CPU 的 android 版本。我认为您需要在虚拟机中运行它。

恐怕设置它比直接从 android SDK 运行虚拟设备要复杂一些。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-25T12:16:45.057

在启动更快方面，最新的 Android Emulator v26.2 现在有一个名为 Quick Boot 的功能，在 AVD 的初始冷启动后，它将在几秒钟内启动，以便后续启动。

[![Android Emulator v26.2 中的快速启动功能](../Images/b6df20ca8f9b5bbf7f2bd1a1c0d04209.png)](https://i.stack.imgur.com/vb2gs.png)

在此处了解更多信息：[https ://androidstudio.googleblog.com/2017/10/android-emulator-2620-canary-with-quick.html](https://androidstudio.googleblog.com/2017/10/android-emulator-2620-canary-with-quick.html)

# java - 如何在对象的arrayList中迭代并通过前缀匹配得到结果集？

> ID：11037909
> 
> 赞同：0
> 
> 时间：2012-06-14T16:59:41.553
> 
> 标签：java, string, collections, arraylist, iteration

我有以下课程：

```
class A {
    String s;
} 
```

以及以下`class A`对象列表列表：

```
[{1s, 3f, 46h}, {333s, 67b, 1d, 67m, 67h}, {3a, 3x}, {34n, 22o, 34s},
 {40f, 22x, 4m}... and so on] 
```

我只需要遍历这个列表，获取结果并推送到另一个输出数组列表中。现在将包含在结果数组列表中的内容：

```
1\. Just skip those elements from the above input arrayList
   which have more than one String with same prefix(only the last character
   is the suffix here which will always be a single character alphabet; not digit).
   For example: from the above input arrayList the first element({1s, 3f, 46h}) 
   won't be skipped and will be pushed into the output arrayList
   as it doesn't have any String with the same prefix; as 1, 3 and 46 are different.
   But 2nd, 3rd and 4th elements will be skipped as they have matches
   (three prefixes with same 67 in 2nd element, two prefixes with same 3 in 3rd element
   and two prefixes with same 34 in 4th element).

   So, for the above input arrayList the output arrayList will be:
   [{1s, 3f, 46h}, {40f, 22x, 4m}] 
```

任何人都可以建议我如何以简单有效的方式完成上述工作。如果可能，请提供一些示例代码。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T18:29:28.807

因此，如果我为此编写测试，我会看到我需要的一件事是能够确定前缀。给定一个带有字符串“55p”的A，前缀应该是“55”。为此写一个测试。前缀方法属于哪里？可能在A类本身。它应该看起来像：

```
public String prefix() {
    return ...;
} 
```

一旦你有了那个方法，就很容易遍历列表中的所有 A 并确定它们中的任何一个是否具有相同的前缀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T18:02:00.367

考虑以下：

我已经尝试了一个逻辑，如果这对你有用，我会很高兴。

```
`ArrayList<A> arrList` = [{1s, 3f, 46h}, {333s, 67b,67m, 67h}, {3a, 3x}, {40f, 22x, 4m}... and so on]

 ArrayList<String> newList = new ArrayList<String>();

for ( A a: arrList){

        for(String s : a) {

             int[] temp = a.indexOf(s);

             if (temp > 1){

                break; // will break the immediate loop, NOT the Outer loop

             }

            else{
                     newList.add(s);

              }

      }

} 
```

# uitableview - iOS 5 - 带有 NSDate 范围的核心数据 UITableView 部分

> ID：11037914
> 
> 赞同：1
> 
> 时间：2012-06-14T17:00:03.130
> 
> 标签：uitableview, core-data, ios5, nsdate

我希望能够创建一个`UITableView`使用 Core Data 的内容，并将`NSFetchedResultsController`其分为多个部分，每个部分都基于日期范围，例如：5 天内、10 天内和 20 多天内，或其他像那样。我将使用一个`NSDate`名为“日期”的核心数据属性。我知道如何根据每个单独的日期项将表格视图划分为多个部分，但不知道如何像这样组织它。有人可以帮忙吗？我所需要的只是一个起点。

正如我所说，我正在使用 Core Data，`NSFetchedResultsController`并使用 a`UIDatePicker`供用户选择日期，然后将其放入该部分。

非常感谢大家！我对iOS开发很陌生，所以请多多包涵。:)

# python - 在 PyQt 中重新加载窗口？

> ID：11037916
> 
> 赞同：0
> 
> 时间：2012-06-14T17:00:12.820
> 
> 标签：python, pyqt

我有几个 PyQt Windows 设置，每个都使用 ListWidget。我想要它，以便在单击某个窗口上的按钮时，它会使用新信息重新加载 ListWidget（有点更新数据）。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T18:15:48.397

这里没什么好说的，一些源代码会很有用......

重载位：

```
def reloadList(info):
    # info is a list of strings
    listwidget.clear()
    listwidget.addItems(info) 
```

按钮回调：

```
btn.clicked.connect(reloadList) 
```

不确定是否能回答您的问题，但如果您提供更详细的信息，我可能会给出更好的答案；-)

# database - 根据 MS Access 中的月份访问票证数据库中的数据

> ID：11037918
> 
> 赞同：0
> 
> 时间：2012-06-14T17:00:21.103
> 
> 标签：database, ms-access

亲爱的 stackoverflow 成员，

我正在为门票销售价格创建一个访问数据库。由于门票价格每年都在变化，我想创建数据库以访问基于月份的门票价格。

但问题是我如何查询数据库以检索基于特定月份的票价？我还附上了我的示例数据库的图像。 ![数据库](../Images/0ad81e40dcfc4f58920cde5c0790bd33.png) 我还以文本格式上传了数据库。

**公司：**

```
 -------------------------------------------
    |     CompanyID      |    CompanyName     |
    -------------------------------------------
    | A                  | AAA                |
    -------------------------------------------
    | B                  | BBB                |
    -------------------------------------------
    | C                  | CCC                |
    -------------------------------------------
    | D                  | DDD                |
    -------------------------------------------
    | .                  | ..                 |
    -------------------------------------------
    | .                  | ..                 |
    -------------------------------------------
    | .                  | ..                 |
    -------------------------------------------
    | Z                  | ZZZ                |
    ------------------------------------------- 
```

**票：**

```
 ----------------------------------------------------------------------------------------------------------
|         ID         |     TicketType     |        2010        |        2011        |        2012        |
----------------------------------------------------------------------------------------------------------
| 001                | 3 months           |             $50.00 |             $55.00 |             $68.00 |
----------------------------------------------------------------------------------------------------------
| 002                | 2 Weeks            |             $10.00 |             $11.50 |             $13.10 |
----------------------------------------------------------------------------------------------------------
| 003                | Group ticket       |             $30.00 |             $32.00 |             $35.00 |
----------------------------------------------------------------------------------------------------------
| 004                | Night ticket       |              $7.00 |              $9.00 |             $11.00 |
----------------------------------------------------------------------------------------------------------
| 005                | 1 Day              |              $3.00 |              $5.00 |              $8.00 |
----------------------------------------------------------------------------------------------------------
| 006                | 1 Week             |              $8.00 |             $15.00 |             $12.00 |
----------------------------------------------------------------------------------------------------------
| 007                | 1 month            |             $19.00 |             $22.00 |             $25.00 |
----------------------------------------------------------------------------------------------------------
| 200                | Fun ticket         |             $11.00 |             $12.00 |             $14.00 |
----------------------------------------------------------------------------------------------------------
| AAA                | 001                |                    |            $100.00 |          $5,500.00 |
---------------------------------------------------------------------------------------------------------- 
```

问题是：我想访问基于月份的票价。例如，“2011 年 3 月”中 TicketID:“001”的价格。有了它，将计算基于特定月份售出的门票的月度帐户。

这些字段按年份列出，并在几个月内创建它会导致大量数据冗余或对未来的更新造成麻烦。

任何帮助将不胜感激。非常感谢您提前。

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T01:55:51.367

您的数据库结构阻止您这样做。票表甚至不在[第一范式](http://en.wikipedia.org/wiki/Database_normalization "第一范式")中。目前，每个新年您都需要添加一个新列来显示更新的定价。这更容易通过添加行而不是列来实现。

您需要创建另一个名为 TicketID 的表，该表具有 ID 和 TicketType。修改您的 Ticket 表，使其具有以下内容：ID、价格、date_effective。这将允许您像这样记录不断变化的价格

```
 1,50,1/1/2010
    1,51,2/1/2010
    1,52,8/15/2010
    1,55,1/1/2011 
```

这将允许您在需要时更改价格，而无需添加额外的列。由于您将日期存储在最后一列中，因此您可以使用 Access 中的内置日期函数来创建查询。

# iphone - 设置按钮图像

> ID：11037919
> 
> 赞同：0
> 
> 时间：2012-06-14T17:00:29.917
> 
> 标签：iphone, objective-c, ios, uiimage, mpmovieplayercontroller

**已解决：**我是个彻头彻尾的白痴。我以前使用两个按钮（播放和暂停）并隐藏它们而不是更改一个按钮的图像。我愚蠢地忽略了这行代码：`playButton.hidden = YES`.

我正在构建自定义控件`MPMoviePlayerController`。我正在尝试将按钮的图像设置为`pause.png`when `MPMoviePlaybackState == MPMoviePlaybackStatePlaying`。否则，它应该设置为`play.png`。这条语句每半秒运行一次，同样的方法 `currentPlaybackTime`设置为 a `UILabel`。

由于某种原因，它不会设置为`pause.png`。按钮就消失了。虽然，条件记录`Playing`并`not playing`正确。

。H

```
@property (retain) UIImage *playBtnBG;
@property (retain) UIImage *pauseBtnBG; 
```

.m

```
- (void)viewDidLoad
{
playBtnBG = [UIImage imageNamed:@"play.png"];
pauseBtnBG = [UIImage imageNamed:@"pause.png"];
}

- (void)updatePlaybackTime:(NSTimer*)theTimer 
{
if (!sliding) {
    int playbackTime = moviePlayer.currentPlaybackTime; 

    timeLabel.text = [NSString stringWithFormat:@"%d:%02d", (playbackTime / 60), (playbackTime % 60)];
    playbackSlider.value = playbackTime;
}

if (moviePlayer.playbackState == MPMoviePlaybackStatePlaying) {
    NSLog(@"Playing");
[playButton setImage:pauseBtnBG forState:UIControlStateNormal];
}
else {
    NSLog(@"not playing");
    [playButton setImage:playBtnBG forState:UIControlStateNormal];

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T17:18:52.260

一种可能性是，如果您从 xibs 创建按钮，则您没有将按钮连接到文件所有者，请尝试此操作并玩得开心：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    [[NSNotificationCenter defaultCenter] addObserver:self 

                                        selector:@selector(moviePlayerPlaybackStateDidChange:) 
                                             name:MPMoviePlayerPlaybackStateDidChangeNotification 
                                           object:nil];

//myPlayer is MPMoviePlayerController declared in header
myPlayer =  [[MPMoviePlayerController alloc] initWithContentURL:myaudioUrl];
myPlayer.controlStyle = MPMovieControlStyleNone; 
[myPlayer prepareToPlay];
[[NSNotificationCenter defaultCenter] addObserver:self 
                                         selector:@selector(moviePlayerLoadStateChanged:) 
                                             name:MPMoviePlayerLoadStateDidChangeNotification 
                                           object:nil];
}

- (void) moviePlayerLoadStateChanged:(NSNotification*)notification {
　　　　　if ([myPlayer loadState] != MPMovieLoadStateUnknown) {
    [[NSNotificationCenter  defaultCenter] removeObserver:self 
                                                     name:MPMoviePlayerLoadStateDidChangeNotification 
                                                   object:nil];
    [myPlayer play];
}

}

-(void) moviePlayerPlaybackStateDidChange:(NSNotification*)notification {

NSLog(@"playbackDidChanged");
MPMoviePlayerController *moviePlayer = notification.object;
MPMoviePlaybackState playbackState = moviePlayer.playbackState;
if(playbackState == MPMoviePlaybackStateStopped) {
    NSLog(@"MPMoviePlaybackStateStopped");
} else if(playbackState == MPMoviePlaybackStatePlaying) {
    NSLog(@"MPMoviePlaybackStatePlaying");
 [playButton setImage:pauseBtnBG forState:UIControlStateNormal];
} else if(playbackState == MPMoviePlaybackStatePaused) {
    NSLog(@"MPMoviePlaybackStatePaused");
[playButton setImage:playBtnBG forState:UIControlStateNormal];
} 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T17:19:50.853

You should probably try using the `setBackground:` method.

```
[playButton setBackgroundImage:pauseBtnBG forState:UIControlStateNormal]; 
```

# css - 如何使 div 具有与花药相同的样式但名称不同？

> ID：11037922
> 
> 赞同：0
> 
> 时间：2012-06-14T17:00:49.370
> 
> 标签：css, html, styles

我基本上陷入了这样一种情况，我需要一堆具有相同样式（高度、宽度、不透明度等）的 div，但我需要它们都有不同的名称（test1、test2、test3 等）。如何轻松地将一个 div 的样式设置为另一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T17:02:08.020

使用[`class`](http://htmldog.com/guides/cssintermediate/classid/)：

```
<style>
div.mystyle {
    width: 10px;
}
</style>
<div class="mystyle" id="test1"/>
<div class="mystyle" id="test2"/>
<div class="mystyle" id="test3"/>
<div class="mystyle" id="test4"/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T17:02:55.707

给他们一个类和一个像这样的id：

```
<div id="test1" class="divstyle">
</div>
<div id="test2" class="divstyle">
</div>
<div id="test3" class="divstyle">
</div>     

<style>
  .divstyle{
    color:red;
  }
</style> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T17:09:59.420

使用这种**级联**css的**常见**做法。

 ****HTML 标记：**

```
<div class="common diff01"></div>
<div class="common diff02"></div>
<div class="common diff03"></div>
<div class="common diff04"></div> 
```

**CSS：**

```
/* sizes and colors are demo only */
.common {
    height: 10px;
    width: 10px;
    opacity: 1;
}

.diff01 { background-color: #FFF; }
.diff02 { background-color: #AAA; }
.diff03 { background-color: #333; }
.diff04 { background-color: #000; } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T17:06:55.523

你也可以这样做：

```
#test1, #test2, #test3, #test4 { font-size:13px; } 
```

所有这些 ID 都将共享该样式，只需使用逗号分隔 ID。**

# php - 使用 PHP 去除 RSS 提要

> ID：11037929
> 
> 赞同：2
> 
> 时间：2012-06-14T17:01:16.053
> 
> 标签：php, xml, encoding, rss

我有这个功能：

```
function validate($data) {
    $newData = str_replace("&nbsp;", " ", $newData);
    $newData = utf8_encode(htmlentities(strip_tags($data)));
    return $newData;
}

$rssfeed.='<description><![CDATA['.validate($news).']]></description>'; 
```

它从中提取的 MY MySQL 表使用 utf8-general_ci 编码。

但是，我的 XML 提要仍然包含`&nbsp;`在其中。任何想法为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T17:05:36.620

您以错误的顺序使用变量，因此您忽略了`str_replace`.

```
$newData = str_replace("&nbsp;", " ", $newData);
$newData = utf8_encode(htmlentities(strip_tags($data))); 
```

应该

```
$newData = str_replace("&nbsp;", " ", $data);
$newData = utf8_encode(htmlentities(strip_tags($newData))); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T17:07:05.357

你的功能不应该是这样的：

```
function validate($data) { 
    $newData = str_replace("&nbsp;", " ", $data); 
    $newData = utf8_encode(htmlentities(strip_tags($newData))); 
    return $newData; 
} 
```

# installation - Mac OS X 10.7.4 上的 Sublimetext2 安装

> ID：11037934
> 
> 赞同：1
> 
> 时间：2012-06-14T17:01:31.850
> 
> 标签：installation, osx-lion, sublimetext

我正在尝试安装 SBT2 并具有以下设置

**操作系统**

**Mac OS X 10.7**

```
tbc:~ mystic$ which python
/Library/Frameworks/Python.framework/Versions/2.7/bin/python
tbc:~ mystic$ python -V
Python 2.7.2 
```

我从 SBT2 网站下载了 dmg 包并安装它，但打开 SBT2 应用程序后出现错误

```
Unable to run package setup:

Failed to load module

Traceback (most recent call last):
  File "./PackageSetup.py", line 7, in <module>
    import zipfile
  File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/zipfile.py", line 4, in <module>
    import struct, os, time, sys, shutil
  File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/struct.py", line 1, in <module>
    from _struct import *
ImportError: No module named _struct 
```

根据 sublimetext2 论坛帮助我还尝试了什么

```
tbc:~ mystic$ ls -la /Library/Frameworks/Python.framework/Versions
total 8
drwxr-xr-x 5 root admin 170 Jun 12 2011 .
drwxr-xr-x 6 root admin 204 Jun 12 2011 ..
drwxrwxr-x 11 root admin 374 Jun 12 2011 2.7
drwxrwxr-x 10 root admin 340 Jun 9 2011 3.0
lrwxr-xr-x 1 root admin 3 Sep 25 2011 Current -> 2.7
tbc:~ mystic$ cd /Library/Frameworks/Python.framework/Versions
tbc:Versions mystic$ sudo rm Current
Password:
tbc:Versions mystic$ sudo ln -s /Library/Frameworks/Python.framework/Versions/2.7 Current 
```

因为我将 Python2.7 作为默认设置，所以我不知道为什么 SBT2 会追随 Python2.6

我知道它不应该这么复杂，但是没有办法让它发挥作用。

任何帮助和建议表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:58:20.267

我遇到同样的问题。在花了很多时间研究它的配置文件或 plist 之后，我什么也没得到。

然后我找到了一些技巧来欺骗 Sublime Text 2 使用 python 2.7 而不是 2.6

```
cd /Library/Frameworks/Python.framework/Versions/
sudo mv 2.6 2.6-backup
sudo ln -s 2.7 2.6 
```

这对我有用。

# java - 使用java解码二进制消息

> ID：11037948
> 
> 赞同：3
> 
> 时间：2012-06-14T17:02:13.783
> 
> 标签：java, binary, decoding

**我需要解码以高速率（> 1000 msgs/sec）传入的二进制消息，并使用JAVA**将它们存储在数据库中（未决定哪一个）。将有多个 TCP 连接进入该服务器，每个连接都有自己的需要处理的二进制数据流。

消息没有被任何“标志”分隔。
消息的开头有一个 4 字节长度的字段。它后面是一个固定的标题。

消息的有效负载将依次是多条消息，每条消息都有一个固定的标头，后面是位掩码（32 位），用于确定存在哪些其他字段。每个位掩码字段为 32 位，位 32-30（MSB -32 / Big endian）指定每个可选字段的长度。所有其他位（29-1），如果“ON”表示该字段存在于消息中。

例如，如果位 32-30 是 100，而位 1 是“1”，那么字段 XXX 跟在位掩码字段之后，它是 4 个字节长。如果位 2 为“0”，则消息中不存在字段 YYY，依此类推。将存在多个位掩码字段（可选），但受最大数量限制。我是 java 新手（c/C++ 背景）所以问题可能......

1）我正在考虑以“主”线程接收连接并创建“工作线程A”来处理该套接字上的消息的常规方式设计应用程序。我正在考虑让配置文件驱动“workerThread A”是创建一个线程池来处理每条消息还是自己做。我将实施前者并检查性能，看看是否需要改进。我的问题是，**netty**或**Apache Mina 是值得考虑的好选择**吗？由于这是 POC 工作，我需要快速启动它。

2）我想到了使用 nio - SocketChannel 和 ByteBuffer。但似乎我无法从套接字读取指定数量的字节？我认为“readInt()”获取长度然后从套接字读取“length”字节数以获取完整的一条消息然后解析它会更容易。DataInputStream 是更好用的吗？使用 oio 和 nio 会对性能产生任何影响吗？

3）我应该查看任何框架来解码消息吗？我稍微查看了 Google 协议缓冲区，但它似乎不支持解码位掩码字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T17:08:39.040

我会为每个连接创建一个工作线程。

我会使用 DataInputStream，除非您确定这不够快。性能影响很小，但在 1000 msg/sec 时不太重要。

我会在消息到达时使用 JDK 对其进行解码。在这种情况下，我还没有找到让事情变得更简单的第三方库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T08:54:31.457

在您的情况下，Apache MINA 是一个非常好的选择。Mina 可以很好地管理多个会话并且非常可扩展。我们已经将它用于非常相似的案例，到目前为止我们对它非常满意。

我们使用 MINA 开发了一个网关，它接收来自数千个 gsm 设备的二进制消息，对其进行解码并将其存储到数据库中。我们使用 Core2 Duo、4 GB RAM 的服务器对超过 2000 个并发会话连续发送数据的网关进行了负载测试。

您可以使用[Codec Filters](http://mina.apache.org/tutorial-on-protocolcodecfilter-for-mina-2x.html)非常干净地将解码器和编码器插入其中。文档也很合理，您可以通过基本的 JAVA 知识轻松上手[。](http://mina.apache.org/mina-v20-quick-start-guide.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T18:27:33.010

我会选择 NIO 和 Selector 模型。这是您可以阅读的[文章（旧但仍然相关）。](http://onjava.com/pub/a/onjava/2004/09/01/nio.html?page=1)

如果您想实现超低延迟，那么您应该考虑将可以重用的对象池化，而不是创建新对象。GC 不适合低延迟的应用程序。

最后，我会尝试使用 Google 的 Protocol Buffers，因为它们非常高效且易于使用多种语言。

# http - 使服务器上的文件列表不可访问，但不是文件本身？

> ID：11037951
> 
> 赞同：0
> 
> 时间：2012-06-14T17:02:25.173
> 
> 标签：http, directory

我在 Web 服务器上有一个文件目录。我希望*文件*可以访问，但不是目录中所有文件的列表。

*   去`http://example.com/folder/generic.html`应该没问题，你去看看`generic.html`。
*   应该`http://example.com/folder/`被拒绝，你不应该看到目录中的文件列表。

我需要设置哪些标志才能使这成为可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:07:51.897

在`.htaccess`目录中的文件中，放入以下行：

```
Options -Indexes 
```

这会禁用目录浏览，但文件本身仍然可以访问。

# perl - perl 命令 '=>' 和 '=' 之间的区别

> ID：11037953
> 
> 赞同：1
> 
> 时间：2012-06-14T17:02:28.077
> 
> 标签：perl, mason

以下 perl/mason 命令有什么区别。

$test = $test1; $test => $test1;

具体来说，实例化在这里是如何工作的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T18:43:50.380

[Mason](http://search.cpan.org/perldoc/Mason)是一个 Perl 框架，供不知道的人使用...

是`=`一个 Perl 赋值运算符。`=>`是运算符的[语法糖](http://en.wikipedia.org/wiki/Syntactic_sugar)`,`。它主要用于散列，以帮助将键与值相关联。以下三个是等价的：

```
my %hash = ("red", "apple", "yellow", "lemon", "green", "lime");

my %hash = (red => "apple", yellow => "lemon", green => "lime");

my %hash = ("red", apple => "yellow", lemon => "green", "lime"); 
```

*   第一个看起来可能只是一个列表。我必须密切注意才能看到它是`%hash`不是`@hash`。另外，如果我有 100 个键值对，而不仅仅是其中的 3 个，您可能会开始忘记哪些是键，哪些是值。

*   第二个非常清楚的`red`是 value 的键`apple`，那`yellow`是的键`lemon`等等。还要注意，只要我的键遵循 Perl 变量名称约定，我就不再需要在我的键周围加上引号（尽管它们可以包含一个或前面的两个破折号）。

*   第三个只是为了扰乱你的思想。并且向您展示这`=>`仅仅*是*语法糖，并不一定将之前的内容与之后的内容联系起来。对于 Perl，它只是一个列表分隔符。你的大脑是形成联想的那个。

您`=>`会在这样的函数中看到 used：

```
my_function(
   -bar   => $bar_value,
   -fubar => $fu_value,
   -futz  => $futz_value,
); 
```

这是一个调用的函数`myFunction`，它将一组键控值作为参数。我也可以这样做：

```
my_function("-bar", "$bar_value", "-fubar", $fu_value, "-futz", "$futz_value"); 
```

但是，此函数执行以下操作：

```
sub my_function {
   my %params = @_; 
```

所以，它使用哈希作为它的参数，而不仅仅是一个列表。当参数的顺序可能会因为太长或函数使用的许多参数是可选的而令人困惑时，函数往往会使用散列。想象一个可能需要用户 ID 和密码但不一定需要用户 ID 和密码的功能。

您可以`=>`在任何情况下使用，而不是逗号。例如，Perl 的最新风格是不使用括号作为函数参数：

```
chomp $foo; 
```

比：

```
chomp( $foo ); 
```

但是，当你的函数有多个参数时，这有时更难阅读：

```
join ", ", @foo; 
```

在这些情况下，我有时会使用`=>`来替换命令：

```
join ", " => @foo; 
```

现在，我可以看到“、”和`@foo`都是`join`函数的参数。小心，否则它会咬你：

```
my @array = ( join ", " => @foo, @bar); 
```

是相同的：

```
my @array = ( join ", ", @foo, @bar ); 
```

或者

```
my @array = ( join (", ", @foo, @bar ) ); 
```

并不是：

```
my @array = ( join (", ", @foo) , @bar); 
```

仅仅因为我`=>`只使用了 between`", "`并不`@foo`意味着它`@bar`不是参数的一部分！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T17:06:35.563

那么，Perl 还是 Mason？我不认识 Mason，所以我将回答有关 Perl 的问题。

« `=`» 是赋值运算符。

```
$test = 'test';  # $test now contains the 4-char string "test". 
```

« `=>`» 是« » 的一个花哨版本，`,`它自动引用它的左侧。以下都是等价的：

```
print "a", "b";
print "a" => "b";
print a => "b";    # Auto-quoting in effect 
```

两者都与实例化无关，尽管 Perl 会在使用包变量时自动实例化它。这通常是一个坏主意，并且被禁用`use strict;`。（总是使用`use strict; use warnings;`！）

运算符记录在[perlop](http://perldoc.perl.org/perlop.html)中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-14T09:34:08.240

David 的回答是关于 Perl 赋值运算符`=`和运算符的语法糖的一个很好的答案`,`。但是，如果您使用的是 HTML::Mason，则该`=>`运算符还可以具有其他含义。

Mason 组件可以接受各种参数，来自外部源（HTTP 请求）或内部源（一个组件调用另一个），并通过`<%args>`块声明参数的名称和数据类型：

```
<%args>
  $width
  $admin => 0  # A default value
  @items => ( 1, 2, 'something else' )
  %pairs => ( key1 => 1, key2 => 'value' )
</%args> 
```

这里`=>`操作符用于指定默认值。并且一个组件可以使用例如 & 标记调用另一个组件，而无需指定任何参数：

```
<& menu &> 
```

或使用运算符指定一些参数`=>`：

```
<& menu, width => 640, admin => 1 &> 
```

您可以查看[Mason Book](http://www.masonbook.com/book/chapter-2.mhtml)的组件章节。

在 Mason2（简称 Mason）中，该`<%args>`块消失了，您仍然可以使用`<& &>`标签调用组件，但要声明属性，您必须在一个`<%class>`部分中使用 Moose 'has' 语法：

```
<%class>
  has 'foo';
  has 'bar' => (required => 1);
  has 'baz' => (isa => 'Int', default => 17);
</%class> 
```

这里有一些参考：[Mason::Manual::Components](http://search.cpan.org/~jswartz/Mason-2.20/lib/Mason/Manual/Components.pod)。

# fortran - 错误：(1) 处的格式字符串中需要非负宽度

> ID：11037954
> 
> 赞同：6
> 
> 时间：2012-06-14T17:02:38.283
> 
> 标签：fortran, gfortran

我正在尝试使用 gfortran 编译一段代码，但失败并出现以下错误：

```
Error: Nonnegative width required in format string at (1)
../src/powmes.f90:410.20:
     write(lunit,'(I,E,E,E)') wavenum(k),power(k),nmodes(k),errorexpan(k)

414   if (filepower_fold(1:1) /= '#') then
415      fileout=trim(filepower_fold)//'.waven'
416      if (verbose) write(*,*) 'Output '//trim(fileout)
417      open(file=fileout,form='formatted',status='unknown',unit=lunit,err=2)
418      do k=0,ngrid/2
419         do ifold=0,nfoldpow-1
420            write(lunit,'(I,$)') waven(k,ifold)
421         enddo
422         write(lunit,'(I)') waven(k,nfoldpow)
423      enddo
424      close(lunit) 
```

我怎样才能编译这个？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T18:53:56.760

正如已经回答的那样，您需要指定宽度。像 ES14.5 这样的东西可能适用于浮点格式。整数格式有一个捷径：I0 将导致编译器使用所需的位数。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-14T18:17:06.637

尝试将格式字符串更改`I`为正数。与 相同，仅使用。 有关解释，请参见例如此链接： [http ://www.cs.mtu.edu/~shene/COURSES/cs201/NOTES/chap05/format.html](http://www.cs.mtu.edu/~shene/COURSES/cs201/NOTES/chap05/format.html)`Iw``w``E``Ew.d`

但请注意：使用，例如，`I3`写出 1234 可能会打印`***`，因此请确保您的格式足够宽。

编辑：请参阅@MSB 关于如何避免整数格式问题的答案。

# javascript - 对象 [对象窗口] 的“$”不是函数

> ID：11037955
> 
> 赞同：1
> 
> 时间：2012-06-14T17:02:42.620
> 
> 标签：javascript, jquery, actinic

刚刚发现我们购物车上使用的排序插件有问题，昨天工作正常，没有对其进行任何更改。该站点位于[此处](http://www.firesidexpressions.com)。我意识到 HEAD 中有一堆 javascript 和 jquery，我相信这无济于事。我得到的错误是**Property '$' of object [object Window] is not a function**。这里可能发生了 jQuery 冲突吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T19:17:44.167

在闭包中敲击任何 Javascript 代码，

```
(function($){
    // code goes here
})(jQuery); 
```

然后，这将防止 jQuery 和使用 $ 的任何问题，因为您正在创建一个以 $ 作为名称的函数，然后强制闭包内的所有内容都将使用 $ 的函数本地副本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T17:43:39.353

kiranvj vcsjones 对于首先要解决的问题都有正确的想法。我们在那里有一个徽章，当它需要一个数字时，它试图附加一个字符串，因此出现 Nan 错误。解决了这个问题，但仍然出现错误。我没有上传我的更改，因为这个站点需要一段时间，但我确实修复了 NaN 错误，但仍然存在原始问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T17:51:52.433

您还可以使用 noConflict 方法更改 jquery 变量。

```
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
 var J=$.noConflict();
 J(".class").hide(); //use J instead of $ now
</script> 
```

这样你就知道这不是与 $ 字符的 jquery 冲突

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T17:58:11.400

另一个导致您的问题的因素是您两次加载 jquery 和 jqueryui。

# java - Apache FOP - PDF 导出中的奇怪图像

> ID：11037960
> 
> 赞同：-1
> 
> 时间：2012-06-14T17:02:55.710
> 
> 标签：java, image, pdf, apache-fop

代码正在使用 Apache FOP 库（0.93 版本）生成 PDF 文档。某些图像在 PDF 中显示奇怪。您可以查看随附的屏幕截图。图片是普通的jpg。你知道这可能是什么原因吗？

![在此处输入图像描述](../Images/fc7bf4112c3d4ea5672d623eed5f8da6.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T21:45:33.607

首先，我建议您升级到 FOP 1.0 [1]，因为 0.93 现在已经超过五年了；如果这不能解决问题，那么您可以尝试更新的开发版本之一 [2] 或发送电子邮件至 [3]

[1] [http://xmlgraphics.apache.org/fop/1.0/index.html](http://xmlgraphics.apache.org/fop/1.0/index.html)

[2] [http://ci.apache.org/projects/xmlgraphics/fop/snapshots/](http://ci.apache.org/projects/xmlgraphics/fop/snapshots/)

[3] 邮箱：fop-users@xmlgraphics.apache.org

请注意，新的维护版本 FOP 1.1 预计将在下个月内发布

# .net - 将单个元素 IEnumerable 转换为单个元素的最佳方法？

> ID：11037961
> 
> 赞同：0
> 
> 时间：2012-06-14T17:02:58.200
> 
> 标签：.net, ienumerable

如果我的 .net 代码中有一个包含单个元素的 IEnumerable 对象，那么在检查 IEnumerable 确实只包含一个元素的同时，将 IEnumerable 转换为单个对象的最佳方法是什么？

以下是我想到的几个想法：

```
IEnumerable<string> strings = getStrings();
if (string.Count() != 0 ) throw new Exception();
else return strings.First();

return getStrings().Single(x => true); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:06:10.960

如果您的目标是无论如何引发异常，您可以使用：

```
return getStrings().Single(); 
```

`InvalidOperationException`如果枚举中有多个字符串，这将自动引发一个。

# javascript - 如何检查和删除不再需要的数组项？

> ID：11037962
> 
> 赞同：0
> 
> 时间：2012-06-14T17:03:05.890
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

我正在使用 Google Maps API v3，并且我有一个标记数组（markersArray），每个标记都包含一个名为“id”的元素。通过 Ajax，我点击了一个 db 并将当前 ID 值作为一个数组 (tokID) 返回并调用一个“loadMarkers”函数。

在“loadMarkers”函数中，我需要删除任何与从数据库返回的 ID 值不匹配的数组项。我已经研究过 .splice() 和 .filter() 但我一辈子都无法让它工作。

抱歉没有代码示例。我真的很难过，真的没有什么可去的。

谢谢！麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T17:15:18.490

大致你可以做这样的事情，

**更新的工作代码**

```
var newIDs; // new IDs found from ajax

newIDs = [1,2]
markersArray = [{ID:1},{ID:8},{ID:2},{ID:4},{ID:6}]
var newMarkers = $.map(markersArray,function(obj,i){
   if(($.inArray(obj.ID,newIDs) == -1))
      return null;
   else
      return obj; 
});

console.log(newMarkers);
​

// now newMarkers holds the filtered markers Array 
```

修改上面的代码以满足您的需要。

[$.map](http://api.jquery.com/jQuery.map/) [$.inArray](http://api.jquery.com/jQuery.inArray/)

检查[工作小提琴](http://jsfiddle.net/joycse06/Q6VCv/)

找出从服务器发送的额外 ID 的最终代码也是：[小提琴](http://jsfiddle.net/joycse06/Q6VCv/3/)

```
var newIDs; // new IDs found from ajax

newIDs = [1,2,3,4,5];

markersArray = [{ID:1},{ID:8},{ID:2},{ID:4},{ID:6}];
console.log('Orig Array: ',markersArray);
console.log('From Server: ',newIDs);
var newMarkers = $.map(markersArray,function(obj,i){
    return $.inArray(obj.ID,newIDs) == -1? null: obj;
});

console.log('New Markers Objects: ',newMarkers);
var newMarkerIDs = $.map(markersArray,function(obj,i){
    return $.inArray(obj.ID,newIDs) == -1? null:obj.ID;
});
console.log('New Markers ID Array: ',newMarkerIDs);
var extraIDs = $.map(newIDs,function(val,i){
    return $.inArray(val,newMarkerIDs) == -1 ? val : null;
});

console.log('Extra IDs: ',extraIDs);
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T17:13:51.777

我不确定在调用之前你有什么数据以及你得到什么格式的数据，`loadMarkers`但是如果你使用的是 JQuery，并且你想根据另一个数组中的 id 列表从数组中删除项目，你可以这样做：

```
​var orgArray = [{id:1},{id:2},{id:3}];
var newArray = [1,3];

var orgArray = $.map(orgArray, function(v, i){ return $.inArray(v.id, newArray) ? v : null;})​;

console.log(orgArray); 
```

# html - 有没有办法从 Nokogiri 获取原始 HTML？

> ID：11037963
> 
> 赞同：1
> 
> 时间：2012-06-14T17:03:13.020
> 
> 标签：html, ruby, nokogiri

我看过“[如何使用 Ruby 或 Nokogiri 获取页面的原始 HTML 源代码？](https://stackoverflow.com/questions/10919422/how-to-get-the-raw-html-source-code-for-a-page-by-using-ruby-or-nokogiri) ”，它使用如下内容：

```
file = open("index.html")
puts file.read
page = Nokogiri::HTML(file) 
```

但它似乎将读取点移动到文件的末尾，这样 Nokogiri 就无法再读取文件了。如果我交换`read`和 Nokogiri 电话：

```
file = open("index.html")
puts file.read
page = Nokogiri::HTML(file) 
```

该文件不再输出。我希望能够向 Nokogiri 查询它最初使用的 HTML，这样我就可以对原始源进行自己的额外解析。理想情况下，我想要类似的东西

```
file = open("index.html")
page = Nokogiri::HTML(file)
raw_html = page.html 
```

注意：我也试过`page.to_html`，但它似乎稍微改变了格式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T17:08:35.303

您通常传递一个`File`实例，以便它可以被块处理，但[传递一个字符串也可以](http://nokogiri.rubyforge.org/nokogiri/Nokogiri/HTML/Document.html#M000195)：

```
html = File.read("index.html")
page = Nokogiri::HTML(html)
page_html = page.html 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T22:28:49.587

仅供参考：您也可以要求 Nokogiri 在 Nokogiri 解析或修改后返回文档的 HTML（或 XML，如果这是您正在使用的）：

```
doc = Nokogiri::HTML('<head><body>foo</body></head>')
puts doc.to_html 
```

这将在撬输出：

```
[4] (pry) main: 0> puts doc.to_html
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head>
<body>foo</body>
</html> 
```

请注意，Nokogiri 进行了一些修复以使 HTML “更好”。

# javascript - 创建可抓取的跨域 javascript 小部件

> ID：11037967
> 
> 赞同：3
> 
> 时间：2012-06-14T17:03:25.067
> 
> 标签：javascript, jquery, asp.net-mvc, search-engine, web-crawler

我一直在阅读有关使 ajax 繁重的应用程序对搜索引擎更友好的信息： [https ://developers.google.com/webmasters/ajax-crawling/docs/getting-started](https://developers.google.com/webmasters/ajax-crawling/docs/getting-started)

我最近提供的解决方案之一在很大程度上依赖于跨域 javascript 小部件。集成此解决方案的网站将在其网站中包含一段 javascript。例如：

```
<script type="text/javascript">
  var _lw = _lw || {};
  _lw._setAccount = ' 00000000-0000-0000-0000-000000000000' ;
  _lw._widgetType = '_widgetName';
  _lw._options = {};  

  (function() {
    var scriptsrc = document.createElement('script'); 
    scriptsrc.type = 'text/javascript'; 
    scriptsrc.async = true;
    scriptsrc.src = 'http://hostname/Application/js';

    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(scriptsrc, s);
  })();
</script>]

<div id="widget-container"></div> 
```

此请求将 jQuery 包装器以及小部件将使用的相关应用程序 URL 附加到 dom。注意，这段 javascript 的来源只是一个 asp.net mvc 内容结果，它输出相关内容：

```
[HttpGet]
[ActionName("js")]
public ContentResult RenderJavascript()
{
      // java script urls & jquery wrapper are output
} 
```

既然必要的 url 可用，刚刚附加的 jQuery 包装器就会启动并使用帐户信息、小部件类型和任何相关选项向服务器发出请求。`ASP.net MVC`只是充当内容生成器，它返回`JSONP`生成的内容附加到站点内容容器中的结果。

```
function loadWidget() {
    var jsonpUrl = _opts._widgetUrl + _lw._setAccount;
    jQuery.getJSON(jsonpUrl, _lw._options, function (data) {
        jQuery('#widget-container').html(data.html);
    });
} 
```

我读到的关于使这个过程对搜索引擎更友好的内容越多，我就不知从何开始。生成所需的 HTML 快照很容易，但是**我如何向 google 表明应该抓取链接**？

另一个似乎有希望的选项是关于如何处理没有散列片段的页面的部分。这将通过添加一个使用 javascript 小部件的元标记来完成。

```
<meta name="fragment" content="!"> 
```

但是，现在的问题在于这是一个跨域请求，并且不会导致任何地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:57:44.003

这是一个棘手的问题。有[证据](http://www.seomoz.org/ugc/new-reality-google-follows-links-in-javascript-4930)表明 Google 确实会抓取 JavaScript（它本身并不像您的浏览器那样执行它，但它至少会在 JavaScript 中查找 URL，就像它在 Flash、Word 等文档中所做的那样。所以如果 Google`'http://hostname/Application/js'`在您的 JavaScript 中发现并愿意遵循它，然后从返回的 JavaScript 中解析 URL，那么您可能不需要做任何事情。

如果您想要更具体的解决方案，也许可以像这样修改您的代码：

```
<div id="widget-container"><iframe src="http://hostname/Application/iframe"></div> 
```

或者：

```
<div id="widget-container"><a href="http://hostname/Application/links"></div> 
```

当您的小部件的 JavaScript 由浏览器执行时，您可以将其内容替换为`#widget-container`您通常替换它的内容（您也可以添加一个`style="visibility:invisible;"`属性，但我怀疑 Google 出于显而易见的原因会尽可能惩罚“隐藏”内容），但是当Googlebot 停下来，它会抓取 iframe/链接。在服务器端，您可以让这些 URL 生成与 JavaScript 中相同的链接列表，但使用易于消化的 HTML。

另一个*可能*使 Googlebot 更快乐的选项是使用 Schema.org 对象，例如[WebPageElement](http://schema.org/SiteNavigationElement)，例如：

```
<div id="widget-container" itemscope itemtype="http://schema.org/SiteNavigationElement">
  <link itemprop="url" href="http://hostname/Application/links">
</div> 
```

...然后让目标页面也包含 Schema.org 声明。我不确定您是否会比以前的一种形式从中获得任何真正的好处，但[元数据*是*对未来的情书](http://twitpic.com/6ry6ar)。

# javascript - 如何在dust.js 中实现自定义渲染逻辑？

> ID：11037968
> 
> 赞同：1
> 
> 时间：2012-06-14T17:03:25.910
> 
> 标签：javascript, dust.js

我正在使用dust.js 来呈现变量名列表，这些变量名有时很长并且包含下划线，例如：

SUM_COUNT_LABOR_COUNTRIES_SMS_PAST

浏览器不使用下划线，因此它会变得丑陋。我希望我的灰尘模板在每个下划线后添加一个零宽度空格，以便浏览器可以包装它。这绝对属于模板层而不属于模型，但我不知道如何使用dust.js 正确实现这一点，否则它是非常好的将表示与逻辑分离的原则。

我要创建一个“帮助”功能吗？我在哪里放置辅助功能？如何从模板中调用它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-26T05:53:29.387

灰尘中有很多方法可以解决这个问题。我认为您正在寻找的可能是定义一个灰尘过滤器。你可以扩展dust.filters来添加你自己的过滤器。dust.filters 在源代码中看起来像这样：

```
dust.filters = {
  h: function(value) { return dust.escapeHtml(value); },
  j: function(value) { return dust.escapeJs(value); },
  u: encodeURI,
  uc: encodeURIComponent,
  js: function(value) { if (!JSON) { return value; } return JSON.stringify(value); },
  jp: function(value) { if (!JSON) { return value; } return JSON.parse(value); }
}; 
```

所以你想要做的是添加另一个键值来过滤你的变量。例如，如果您使用下划线：

```
_.extend(dust.filters, {zws: function(value){ your code here}}) 
```

然后你可以像这样在你的灰尘模板中调用它：

```
the variable is: {variable|zws} 
```

希望这可以帮助。

# clojure - 为什么 clojure 库不尝试为常用函数名使用唯一名称

> ID：11037970
> 
> 赞同：8
> 
> 时间：2012-06-14T17:03:27.220
> 
> 标签：clojure, space

为什么 clojure 库会重用经常出现的函数名称，从而迫使您对它们进行命名空间限定？例如 clojure.zip 使用 next、replace 和 remove 已经存在于 clojure core 和“replace”已经存在于 clojure.string 中。

现在开发人员可能会为 clojure.zip 命名空间使用一些缩写，因此在一个开发人员的代码中，clojure.zip/next 将是命名空间限定为 z/next 在另一个人的代码中为 w/next 等。这将迫使你回头看看名称空间缩写实际上是什么，因为开发人员可以创建自己的库，该库也使用函数“next”

为什么不使用 zip-next、zip-replace 和 zip-remove、str-replace？或类似的东西

然后在人们的代码中会有一个一致的“命名空间限定”，这些函数指的是什么就很清楚了。

这不像图书馆之间有数百个名称冲突。我通常只看到两三个。明确地使这些名称对图书馆来说是独一无二的吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-14T18:02:07.373

一般来说，**使用`use`包含库不如在正常外观的 clojure 代码中使用，因此当`require`****命名空间已经传达相同的含义**时，使用较长的唯一名称不太有用，因此 clojure 程序员倾向于简洁而不是唯一性。

代替：

```
(use 'liba 'libb)

(liba-foo 1 2 3)
(libb-foo 1 2 2) 
```

然后人们可以写：

```
(require ['liba :as 'a] [libb :as 'b] )

(a/liba-foo 1 2 3)
(b/libb-foo 1 2 3) 
```

这使得 liba- 看起来很傻，因此：

```
(a/foo 1 2 3)
(b/foo 1 2 3) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-14T18:59:51.453

如果您要要求名称是全局唯一的，那为什么还要使用名称空间呢？如果我定义了 icecream 库，并在每个函数名称前加上 icecream，那么没有人会发生冲突。

但这对双方来说都非常不方便——我们都必须一遍又一遍地输入这个愚蠢的前缀。如果不是 icecream-scoop，我只是在命名空间 icecream 中命名我的函数 scoop，你可以选择如何引用它：如果从上下文中清楚并且不与你的命名空间或 icecream/ 冲突，你可以将其命名为 scoop勺子，或甜点/勺子，无论你需要什么让它读起来都很好。

# java - Java，更新地图

> ID：11037972
> 
> 赞同：1
> 
> 时间：2012-06-14T17:03:33.707
> 
> 标签：java, map

如果地图被定义为

```
private Map<Integer, Integer>   map = new HashMap<Integer, Integer>(); 
```

更新密钥工作正常，如下所示

```
public void increaseCountInFile(Integer hashCode) {
    if (mapContains(hashCode)) {
        increaseCount(hashCode);
    } else {
        map.put(hashCode, 1);
    }
}

private void increaseCount(Integer fileHashCode) {
    Integer key = map.get(fileHashCode);
    map.remove(fileHashCode);
    map.put(fileHashCode, ++key);
}

private boolean mapContains(Integer fileHashCode) {
    return map.containsKey(fileHashCode);
} 
```

但是，我想知道，是否可以在不必从地图中删除元素的情况下做同样的事情？( `map.remove(fileHashCode);`)

`++(map.get(fileHashCode));`看起来不错，但 Java 不喜欢它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T17:13:06.727

比@tskuzzy 的回答更有效。这只执行一次查找。

```
public void increaseCountInFile(Integer hashCode) {
    Integer prev = map.get(hashCode);
    if (prev == null) prev = 0;
    map.put(hashCode, prev + 1);
} 
```

如果您使用 TIntIntHashMap 您可以避免使用对象或检查以前的值。

```
public void increaseCountInFile(int hashCode) {
    map.adjustValue(hashCode, 1, 1);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T17:04:53.330

你不需要

```
map.remove(fileHashCode); 
```

`put()`将自动覆盖条目。您可以像这样缩短您的`increaseCount()`方法：

```
private void increaseCount(Integer fileHashCode) {
    map.put(fileHashCode, map.get(fileHashCode)+1);
} 
```

不过老实说，我认为您在代码中添加了太多抽象。除非您有充分的理由，否则它实际上应该只是一种方法：

```
public void increaseCountInFile(Integer hashCode) {
    if(map.containsKey(hashCode)) {
        map.put(hashCode, map.get(hashCode)+1);
    } else {
        map.put(hashCode, 1);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T17:07:02.403

映射的键和值是对象（`Integer`在这种情况下），因此 ++ 不起作用。但是，您可以`put()`在不先调用`remove()`的情况下使用，结果是所提供键的覆盖值。

# iphone - 无法完全理解 cg 路径是如何工作的

> ID：11037977
> 
> 赞同：1
> 
> 时间：2012-06-14T17:03:47.670
> 
> 标签：iphone, core-graphics

我正在通过以下方法对矩形的角进行四舍五入

定义一个 colouredBoxRect 并计算 x 和 y 的最小值、最大值

```
CGFloat coloredBoxMargin    =   8;
CGFloat coloredBoxHeight    =   40.0;

coloredBoxRect  =   CGRectMake(coloredBoxMargin,  coloredBoxMargin, self.bounds.size.width-coloredBoxMargin*2, coloredBoxHeight);
CGFloat minx    =   CGRectGetMinX(coloredBoxRect);
CGFloat miny    =   CGRectGetMinY(coloredBoxRect); 
CGFloat midx    =   CGRectGetMidX(coloredBoxRect);     
CGFloat midy    =   CGRectGetMidY(coloredBoxRect); 
CGFloat maxx    =   CGRectGetMaxX(coloredBoxRect); 
CGFloat maxy    =   CGRectGetMaxY(coloredBoxRect); 
```

然后做

```
CGMutablePathRef path = CGPathCreateMutable();
//Path stars here
CGPathMoveToPoint  (path, NULL, midx, miny);
// Add an arc for the upper right corner 
1.CGPathAddArcToPoint(path, NULL, maxx, miny,  maxx, maxy, radius);
//Add an arc for the lower right corner
2.CGPathAddArcToPoint(path, NULL, maxx, maxy,  minx, maxy, radius);
// Add an arc for the lower left corner 
3.CGPathAddArcToPoint(path, NULL, minx, maxy,  minx, miny, radius);
// Add an arc for the upper left corner 
4.CGPathAddArcToPoint(path, NULL, minx, miny,  maxx, miny, radius);
CGPathCloseSubpath(path);
CGContextAddPath(context, path); 
```

其中一个签名 CGPathAddArcToPoint 是第一条和第二条切线的 x 和 y 坐标。例如为右上角添加弧）maxx+miny+maxx+maxy。这些参数现在让我感到困惑。

我试着画了一张图，发现 (maxx,miny) 不是切线的坐标。这对只是矩形右上角的坐标......

有人在这个问题上给我建议吗。欢迎所有评论在这里。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:10:39.677

简单一个数量级是使用`[UIBezierPath bezierPathWithRoundedRect:cornerRadius:]`. 之后您可以从中获取 CGPath。

请参阅[文档](http://developer.apple.com/library/ios/documentation/uikit/reference/UIBezierPath_class/Reference/Reference.html#//apple_ref/occ/clm/UIBezierPath/bezierPathWithRoundedRect%3acornerRadius%3a)。这可能在幕后做同样的事情，但为什么要自己做呢？

# xslt - XPath 1.0：查找指定节点之前的节点数

> ID：11037979
> 
> 赞同：2
> 
> 时间：2012-06-14T17:04:09.213
> 
> 标签：xslt, xpath, xslt-1.0, xpath-1.0

我熟悉在 XSLT 中使用[前面的轴来确定给定当前上下文的前面元素的数量。](http://www.w3.org/TR/xpath/#axes)但是，考虑到我存储在变量中的节点，我看不到这样做的方法。例如：

```
<xsl:variable name="matchedBook" select="book[text()='The Hobbit']"/>
<xsl:variable name="precedingBookCount" select="count(???)"/> 
```

给定以下 XML，`precedingBookCount`应该等于 3。

```
<available>
    <book>Lord of the Rings</book>
    <book>The Hunger Games</book>
</available>
<purchased>
    <book>Ready Player One</book>
    <book>The Hobbit</book>
    <book>Lord of the Flies</book>
</purchased> 
```

我在 XPath 2.0 中看到有一个可以使用的[NodeComp 运算符](http://www.w3.org/TR/xpath20/#id-node-comparisons) `<<`，但在 XPath 1.0 中似乎没有。

那么我该如何在 XPath 1.0 中执行此操作呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:12:11.143

`<xsl:variable name="precedingBookCount" select="count($matchedBook/preceding-sibling::book | $matchedBook/preceding::book)"/>`应该做。

其实做就够了`<xsl:variable name="precedingBookCount" select="count($matchedBook/preceding::book)"/>`。

# attributes - Ruby on Rails：在索引视图上显示关联模型的一个属性值

> ID：11037980
> 
> 赞同：1
> 
> 时间：2012-06-14T17:04:09.383
> 
> 标签：attributes, indexing, has-many-through, formtastic, model-associations

我试图让一个元素索引视图显示关联的项目名称（来自 db 项目的字段）和来自 has_many_through 的实验类型（来自 db 实验的字段），并且属于/具有许多关联模型

模型元素.rb

```
class Element < ActiveRecord::Base

has_many :project_elements   
has_many :projects, :through => :project_elements

has_many :experiments

attr_accessible :project_ids, :experiment_ids 
```

模型项目.rb

```
class Project < ActiveRecord::Base

has_many :project_elements
has_many :elements, :through => :project_elements  

attr_accessible :projectname, :element_ids 
```

模型 project_element.rb

```
class ProjectElement < ActiveRecord::Base
belongs_to :project
belongs_to :element
attr_accessible :project_id, :element_id 
```

模型实验.rb

```
class Experiment < ActiveRecord::Base

belongs_to :element

has_many :welldish_experiments
has_many :welldishs, :through => :welldish_experiments

attr_accessible :exptype, :element_id 
```

元素控制器.rb

```
 def index
   @elements = Element.all
   respond_to do |format|
     format.html # index.html.erb
     format.json { render json: @elements }
     end 
```

/elements/index.html.erb

```
 <% @elements.each do |element| %>
  <tr>

    <td><%= element.experiments %></td>
    <td><%= element.projects %></td> 
```

当我这样做时，它向我展示了整个相关的项目对象......对于实验来说也是如此，我无法弄清楚如何将显示限制为一个属性？

或者，因为数据是使用formtastic生成的：

元素/_form.html.erb

```
 <%= semantic_form_for @element do |f| %>    
       <%= f.inputs do %>  
         <%= f.input :projects, :label => "projet associé", :required => true%>
         <%= f.input :experiments, :label => "type d'experience",
     :as => :radio,       :collection => Experiment.all, :required => true %>    
       <% end %>
       <%= f.actions :submit, :cancel %>
       <% end %> 
```

我想知道是否有一种快速的方法可以从那里生成索引视图（可能带有一些渲染“表单”选项？）任何帮助将不胜感激......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:53:27.520

答案在这里（收集方法）： [http ://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)

```
 <% @elements.each do |element| %>
       <tr>          
       <td><%= element.projects.collect { |a| a.projectname }%></td>
       </tr>
  <% end %> 
```

# emacs - 未找到全局 linum 模式

> ID：11037981
> 
> 赞同：1
> 
> 时间：2012-06-14T17:04:12.973
> 
> 标签：emacs

我正在尝试安装一个使用`global-linum-mode`并不断获得的软件包：

```
 error "Autoloading failed to define function global-linum-mode 
```

我使用的是 Emacs 23，现在在 OSX 上升级到 Emacs 24.1，使用这个包：

[http://emacsformacosx.com/](http://emacsformacosx.com/)

然而，做一个`(require 'linum)`作品但随后`(global-linum-mode 1)`给出了同样的错误。

对我来说，它说 global-linum 不存在，但从我读过的内容来看，它应该来自 Emacs 23。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:22:26.450

那应该没问题。

*可能*在您的配置中某处还有另一个自动加载声明正在破坏默认声明？

或者也许你的加载路径中有另一个“linum.el”？那将是一个坏主意。

如果你用 启动 Emacs 会发生同样的事情`emacs -Q`吗？

# maven - maven 可以打印更短的反应器摘要吗？

> ID：11037983
> 
> 赞同：6
> 
> 时间：2012-06-14T17:04:26.217
> 
> 标签：maven

当一个多项目 maven 构建完成时，所有组件的摘要都会作为最终输出打印出来。它看起来像这样：

```
[INFO] Compiling 5 source files to C:\project\target\classes
----------
1\. ERROR in C:\project\src\main\java\com\example\Foo.java (at line 100)
        foo.bar();
            ^^^
The method bar() is undefined
----------
3 problems (3 errors)[INFO] ------------------------------
[ERROR] COMPILATION ERROR :
[INFO] ---------------------------------------------------
[ERROR] Found 1 errors and 0 warnings.
[INFO] 1 error
[INFO] ---------------------------------------------------
[INFO] -----------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] Component 1 ... SUCCESS [1.000s]
[INFO] Component 2 ... FAILURE [2.000s]
[INFO] Component 3 ... SKIPPED
[INFO] -----------------------------------------
[INFO] BUILD FAILURE
[INFO] -----------------------------------------
[INFO] Total time: 3.000s
[INFO] Finished at: Thu Jun 14 12:10:36 EDT 2012
[INFO] Final Memory: 579M/812M
[INFO] ----------------------------------------- 
```

我有一个非常大的项目，包含一百多个组件。如果出现故障，我希望错误消息及其上下文非常接近输出的底部。有没有办法让这个摘要更短？我不想列出所有组件，而是希望它显示最后一个组件以及它是成功还是失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T07:17:31.837

我在这里遇到过类似的问题。我所做的是运行`mvn somegoal -l file.log`，然后通过 file.log grep

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T07:11:12.607

不，你不能。前段时间我试图弄清楚这一点，不幸的是我什么也没找到。您甚至无法通过忽略某些级别等来控制日志记录。

对我来说，它使用简单的 Python scipt 处理 Maven 输出，只过滤这个输出并收集我需要的信息。

# android - android tabhost如何在tabhost中启动新活动

> ID：11037985
> 
> 赞同：0
> 
> 时间：2012-06-14T17:04:47.590
> 
> 标签：android, android-tabhost, tabwidget

我有一个 Tabhost，这是我的主要活动。单击选项卡时，您将在 Tabwidget 中看到活动。在内部活动中，我有这个按钮，它启动了一个新的意图。有没有办法可以在同一个 Tabhost 和 Tabhost 小部件中启动此意图？我希望它看起来一样，并且仍然与视图中的 Tabhost 保持一致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T17:19:40.527

在 TabGroupActivity 上查看此链接，看看它是如何工作的。这将在您启动的任何活动中显示您的选项卡。这应该可以解决您的问题。 [http://androidmaterial.blogspot.in/2011/04/how-to-us-tab-group-activity-in-android.html](http://androidmaterial.blogspot.in/2011/04/how-to-us-tab-group-activity-in-android.html)

# c++ - C 中的 Malloc 和结构给了我错误（按照教程）？

> ID：11037987
> 
> 赞同：5
> 
> 时间：2012-06-14T17:04:54.100
> 
> 标签：c++, c, visual-studio-2010, struct, malloc

因此，我正在关注 C 教程，但由于它们使用 malloc 函数而我被困在结构上，而且该函数似乎与我的编译器（Visual Studio C++ 10.0）不兼容。所以我完全按照说明操作，我可以编译 C，除了在这个特定的代码中，它给了我一个错误（从教程网站上获取的代码）：

```
#include <stdio.h>
#include <stdlib.h>

struct node {
  int x;
  struct node *next;
};

int main()
{
    /* This won't change, or we would lose the list in memory */
    struct node *root;       
    /* This will point to each node as it traverses the list */
    struct node *conductor;  

    root = malloc( sizeof(struct node) );  
    root->next = 0;   
    root->x = 12;
    conductor = root; 
    if ( conductor != 0 ) {
        while ( conductor->next != 0)
        {
            conductor = conductor->next;
        }
    }
    /* Creates a node at the end of the list */
    conductor->next = malloc( sizeof(struct node) );  

    conductor = conductor->next; 

    if ( conductor == 0 )
    {
        printf( "Out of memory" );
        return 0;
    }
    /* initialize the new memory */
    conductor->next = 0;         
    conductor->x = 42;

    return 0;
} 
```

malloc 函数一直在制造麻烦：“void 类型的值不能分配给“node *”类型的实体，因此我将 (node *) 强制转换为每个包含 malloc 的行，即：

```
root = malloc( sizeof(struct node) ); 
```

等等。这似乎解决了上述错误，但是当我这样做并尝试编译一个新错误时出现了：

```
1>------ Build started: Project: TutorialTest, Configuration: Debug Win32 ------
1>  TutorialTest.c
1>c:\users\ahmed\documents\visual studio 2010\projects\tutorialtest\tutorialtest\tutorialtest.c(16): error C2065: 'node' : undeclared identifier
1>c:\users\ahmed\documents\visual studio 2010\projects\tutorialtest\tutorialtest\tutorialtest.c(16): error C2059: syntax error : ')'
1>c:\users\ahmed\documents\visual studio 2010\projects\tutorialtest\tutorialtest\tutorialtest.c(27): error C2065: 'node' : undeclared identifier
1>c:\users\ahmed\documents\visual studio 2010\projects\tutorialtest\tutorialtest\tutorialtest.c(27): error C2059: syntax error : ')'
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

所以是的，在（作为一个完整的 C 新手）试图解决这个问题半小时之后，我无法想出解决方案。我该如何解决这个错误？我开始认为这是一个编译器问题，但如果不是必需的，我不想更改编译器。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-14T17:08:23.173

问题是您正在使用 C++ 编译器编译 C 代码。C 允许从`void *`到对象指针的转换；C++ 没有。

你说你添加了一个演员，但没有向我们展示它的样子。如果它看起来像这样，那么代码应该编译为 C 和 C++：

```
root = (struct node *) malloc(sizeof (struct node)); 
```

或者，可能有一种方法可以告诉编译器将其视为 C，但我对该编译器的了解还不够，无法帮助您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-01T12:19:06.817

5 年后，我发现这个话题似乎帮助了很多人，包括我。正如在接受的答案中所说，问题是由您的代码编译为 C++ 引起的，而 C++ 不允许这样的转换。

> 或者，可能有一种方法可以告诉编译器将其视为 C，但我对该编译器的了解还不够，无法帮助您。

您可以告诉编译器编译 C 或 C++ 代码。拥有`.c`扩展并不总是足以让您的编译器选择。要手动设置，请在 Visual Studio 2017 中：

**解决方案的属性 -> C/C++ -> 所有选项 -> 编译为 -> 编译为 C 代码**

为我工作。希望它会有所帮助。

# c - 如何确定 GTK 小部件是否已被销毁

> ID：11037988
> 
> 赞同：5
> 
> 时间：2012-06-14T17:04:54.047
> 
> 标签：c, gtk, widget

我`Gtk+`写了一些代码`C`，使用`Cairo`和计时器做一些动画。大多数情况下，当我单击关闭应用程序图标时，我会在终端上收到以下消息：

> Gtk-CRITICAL **：gtk_widget_queue_draw：断言“GTK_IS_WIDGET（小部件）”失败

现在我假设这正在发生，因为在我关闭应用程序的那一刻，计时器被触发并且主窗口小部件被访问但已经被销毁。确定 Gtk 小部件是否仍然有效并且可以引用的常用方法是什么？

有问题的代码在这里：

```
gboolean rotate_cb( void *degrees )
{
    rotation += DegreesToRadians((*(int*)(degrees)));
    // Tell our window that it should repaint itself (ie. emit an expose event)
    /* need to only call gtk_widget_queue_draw() if window is still valid / exists */
    gtk_widget_queue_draw(window);
    return( TRUE );
} 
```

我假设必须有某种方法来测试是否`window`仍然有效和有效？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-14T19:44:09.307

你的问题很微妙。这通常是因为 GObject/GtkObject 的所有权和销毁规则。让我提醒他们：

*   `GObject`s 只是计数引用。它们在计数达到 0 时被销毁。新创建的对象的计数为 1。
*   `GInitiallyUnowned`s 也是计数引用的，当计数达到 0 时它们也会被销毁。但是新创建的对象具有*浮动计数*。这意味着第一次增加计数时，它实际上并没有增加，但是浮动计数被*沉没*了，即转换为普通引用。

`GtkObject`s**是** `GInitiallyUnowned`对象，因此它们具有神奇的*浮动计数*。

但你可能知道这一切......现在，我的问题：

> 谁拥有可见主 GtkWindow 的计数器？

这实际上很简单，GTK 框架有一个列表，并保留了每个可见的引用`GtkWindow`。但是，另一个问题：

> GTK 框架何时释放其 GtkWindow 的引用？

你还记得`gtk_widget_destroy()`函数和`destroy`信号吗？它们正是为此：当您想要删除`GtkWindow`您调用的顶层时`gtk_widget_destroy()`，它会激活信号`destroy`，该信号由 GTK 框架接收，该框架将删除实际窗口并释放其对对象的引用。

这就是您的问题的原因：如果 GTK 框架保留对 的唯一现有引用，则`GtkWindow`该对象实际上已被释放。如果那时，您的计时器尝试访问它，它将失败，因为窗口不再存在。

最后，这里（希望）出现了解决方案：

*   `g_object_ref()/g_object_ref_sink()`启动计时器时调用窗口。还要`destroy`为窗口的信号注册一个处理程序。
*   在窗口信号的处理程序中`destroy`：调用`g_object_unref()`窗口并停止定时器。

当然，这个部分解决方案也应该可以工作，因为窗口不会在不发送`destroy`信号的情况下被破坏：

*   将处理程序注册到`destroy`窗口的信号。
*   `destroy`在窗口信号的处理程序中：停​​止定时器。

但是，当您实际保留指向对象的指针时，增加对象的引用计数器被认为是一种好习惯。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T19:24:32.583

没有办法，因为您将查询不再在内存中的对象的状态，即一些未定义的内存块。这样的功能可能会失败，例如，如果在同一内存地址创建了另一个小部件。原则上，您可以只使用该`GTK_IS_WIDGET()`宏，但*不能保证*即使大多数情况下也能正常工作。

解决问题的正确方法是在销毁`rotate_cb()`时删除回调。为此，课堂上`window`有“破坏”信号。`GtkWidget`因此，您应该连接到“destroy”并在该处理程序中删除`rotate_cb()`（或设置一些`rotate_cb()`不做任何事情的标志）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-15T23:06:32.497

`g_object_weak_ref()`对于这些情况也很有用

> 当对象完成时，弱引用用于通知。

您可以连接一个弱 ref 回调（通过 ex. ）以在它被破坏之前与小部件`widget_destroy_cb`断开连接，因此一旦小部件被破坏就不应调用它。`rotate_cb``rotate_cb`

# javascript - jslint 标记“危险评论”

> ID：11037991
> 
> 赞同：9
> 
> 时间：2012-06-14T17:05:01.427
> 
> 标签：javascript, jslint

鉴于此 JavaScript 代码（这只是引用 url 的注释）：

```
// see http://enterprisejquery.com/2010/10/how-good-c-habits-can-encourage-bad-javascript-habits-part-1/ 
```

打开“安全子集”的[JSLint会说](http://www.jslint.com/)

```
Dangerous comment.
// http://enterprisejquery.com/2010/10/how-good-c-habits-can-encourage-bad-javascript-habits-part-1/ 
```

*评论*怎么会有危险？根据定义，评论不会被解析！还是他们？

**编辑：**使用不同的网址不一定是危险的。例如这个：

```
// http://enterprisejquery.com 
```

不会触发标志。评论中的一个 URL 怎么可能是“危险的”，而另一个却不是？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T17:31:29.153

“危险”注释匹配正则表达式：

```
/@cc|<\/?|script|\]\s*\]|<\s*!|&lt/i 
```

在这种情况下，您的评论是“危险的”，因为它包含字符串“script”。

我认为这可能是一个误报。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T17:15:04.200

您可以使用以下命令手动执行评论`eval`：

[http://googlecode.blogspot.com/2009/09/gmail-for-mobile-html5-series-reducing.html](http://googlecode.blogspot.com/2009/09/gmail-for-mobile-html5-series-reducing.html)

> 为了将所有模块组合成一个资源，我们将每个模块写入一个单独的脚本标签，并将代码隐藏在注释块 (/* */) 中。当资源第一次加载时，没有任何代码被解析，因为它被注释掉了。要加载模块，请找到相应脚本标记的 DOM 元素，去掉注释块，然后 eval() 代码。

此外，有人可能会不小心取消注释危险代码并创建漏洞。

默认情况下，不，不解析 JavaScript 注释。但躺着也不是什么好事。