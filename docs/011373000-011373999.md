# StackOverflow 问答 11373000-11373999

# java - 从包含整数的文件中读取 - java

> ID：11373002
> 
> 赞同：-1
> 
> 时间：2012-07-07T07:03:24.960
> 
> 标签：java, arrays, file-io

我正在尝试从包含三个数字的文件中读取。该文件如下所示：

```
45
20
32 
```

我的代码如下：

```
import java.awt.Color;
import java.awt.Desktop.Action;
import java.awt.GridLayout;
import java.awt.Label;
import java.awt.MenuItem;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.BufferedReader;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.util.Arrays;
import java.util.Scanner;
import javax.swing.Timer;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JProgressBar;
import javax.swing.JSlider;
import javax.swing.border.TitledBorder;

public class practise implements ActionListener {

int menuCount = 0;
int [] fileValues = new int[3];

JFrame frame1 = new JFrame();
JPanel[] panels = new JPanel[3];

JMenuItem menuitemMyDialog1 = new JMenuItem( "Open File" );
JMenuItem menuitemMyDialog2 = new JMenuItem( "EXIT" );
JMenuBar menuBar = new JMenuBar( );
JMenu menuData = new JMenu( "Menu" );

Label label = new Label();

JSlider slider = new JSlider( JSlider.VERTICAL,0,100,20);;

Timer timer = new Timer(1000,new TimerAction());

void go(){

    frame1.setTitle("Referred Coursework");
    frame1.setSize(600, 300);
    frame1.setVisible(true);
    buildGUI();

    menuitemMyDialog1.addActionListener( this );
    menuData.add( menuitemMyDialog1 );

    //buildGUI();

    menuitemMyDialog2.addActionListener( this );
    menuData.add( menuitemMyDialog2 );

    menuBar.add( menuData );
    frame1.setJMenuBar( menuBar );

}
int b = 0;
class TimerAction implements ActionListener{
    public void actionPerformed(ActionEvent e){
        if(b == 3){ timer.stop(); }
        slider.setValue(fileValues[b]);
        b++;
    }
}

@Override
public void actionPerformed(ActionEvent arg0) {
    // TODO Auto-generated method stub

    if(arg0.getSource() == menuitemMyDialog1){
        menuCount = 1;
        String inputValue = JOptionPane.showInputDialog("File Open dialog box");
        label.setSize(80,80);
        label.setText(inputValue);
        label.setLocation(40,160);

        //fileValues[1] = 27;  fileValues[0] = 2;  fileValues[2] = 62;

        try {
            FileReader file = new FileReader("temperature.txt");
            BufferedReader buf = new BufferedReader(file);
            int i = 0;

            String s = null;
            while((s = buf.readLine()) != null){
            fileValues[i] = Integer.parseInt(s);
            i++;
            }
        }catch (Exception e){e.printStackTrace();}

        Arrays.sort(fileValues);
        for (int i : fileValues){
            System.out.println(i);
        }

        timer.start();

    }
    if(arg0.getSource() == menuitemMyDialog2){

        frame1.dispose();
        System.exit(0);
    }

    }

public void buildGUI(){
    layoutComponents();
}

public void layoutComponents(){

    JLabel label1 = new JLabel();

    JSlider slider2,slider3;
    //JProgressBar bar = new JProgressBar( JProgressBar.VERTICAL,1000, 1020 );

    panels[0] = new JPanel();
    panels[1] = new JPanel();
    panels[2] = new JPanel();

    panels[1].setBorder( new TitledBorder( "Temperature" ) );

    slider.setMajorTickSpacing(20);
    slider.setPaintTicks( true );
    slider.setPaintLabels( true );
    slider.setMinorTickSpacing(10);

    panels[1].add( slider );

    panels[1].setBackground(Color.orange);

    frame1.setLayout( new GridLayout( 1,2 ) );
    for ( int i = 0; i < panels.length;i++ ){
            frame1.add( panels[i] );
        }
}

/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub

    practise obj = new practise();
    obj.go();

} 
```

}

该程序编译正常，没有错误。但是当我输出数组 fileValues 的内容时，我得到：0 0 0

任何帮助，将不胜感激。谢谢！

*更新*我查看了 FileReader 的异常，现在它显示 FileNotFoundException。这很奇怪，因为该文件存在于项目文件夹中。有什么建议么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T07:23:06.707

您需要提供“temperature.txt”的完整路径。

您忽略 I/O 操作发送的异常：

```
 try {
        FileReader file = new FileReader("temperature.txt");
        BufferedReader buf = new BufferedReader(file);
        int i = 0;

        String s = null;
        while ((s = buf.readLine()) != null) {
            fileValues[i] = Integer.parseInt(s);
            i++;
        }
    } catch (Exception e) {
    } 
```

如果您将 catch 块替换为以下内容：

```
 } catch (Exception e) {
        System.out.println(e.getMessage());
    } 
```

您应该会收到一条不言自明的消息。

# maven - 使用 Maven 开发 OSGi 应用程序时，我应该先使用 POM 还是先使用 MANIFEST？

> ID：11373009
> 
> 赞同：17
> 
> 时间：2012-07-07T07:04:31.840
> 
> 标签：maven, osgi, tycho, maven-bundle-plugin

使用 Maven 开发 OSGi 应用程序时有两种主要方法：POM-first 和 MANIFEST first。

我正在寻找以表格形式显示每种方法的优缺点的答案。

更具体地说，我还想知道它与：

*   工具集的成熟度
*   供应商独立性
*   易于开发（包括寻找可以在工具上进行开发的人）
*   兼容性
*   避免 ClassNotFound
*   避免手工作业

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-07T07:04:32.713

目前这是我能想到的

**POM-First Pros（使用 maven-bundle-plugin）**

*   利用现有的 Maven 技能、存储库和工具。
*   可能更容易找到知道如何管理 pom.xml 而不是 MANIFEST.MF 和 pom.xml 的人
*   MANIFEST.MF 中的大部分信息都可以从 pom.xml 本身获取。
*   可以与其他 IDE 一起工作，而不仅仅是基于 Eclipse 的。
*   侵入性较小，只需添加**单个**插件并将打包类型更改为“捆绑”

**POM 优先缺点**

*   `ClassNotFoundException`更有可能在运行时发生。但是，可以使用 pax-exam 来缓解这种情况（尽管设置起来非常复杂）。
*   仍然需要了解 MANIFEST 是如何设置的，以确保`instructions`配置元素设置正确。

**清单优先的优点（使用 tycho-maven-plugin）**

*   似乎是推荐的方法，或者至少被称为推荐的方法，但我真的不明白为什么它有显着的好处。（因此为什么要问这个问题）。
*   适合开发 Eclipse 插件并与 PDE 很好地集成
*   Provides tooling for testing thus allowing `ClassNotFoundException` to appear during JUnit testing rather than runtime.

**MANIFEST-first Cons**

*   Seems to only work well on Eclipse based IDEs. You don't have to use Eclipse, but without the PDE would you want to?
*   Violates DRY principles since I have to do put keep the names and versions from the POM and MANIFEST.MF in sync.
*   Need to name things in a specific fashion
*   You cannot mix, meaning existing Maven multi-project installations cannot just tack on OSGi support
*   A lot more configuration compared to maven-bundle-plugin is needed to get less warnings: [http://wiki.eclipse.org/Tycho/Reference_Card#Examplary_parent_POM](http://wiki.eclipse.org/Tycho/Reference_Card#Examplary_parent_POM)
*   Have to make test cases a separate project. It won't run when built in src/test/java.
*   Seems that it will only test classes that are exposed, in other words those in ".internal." is not testable.

If I were asked for a recommendation for an enterprise that is using Maven already and want to move to OSGi then it would be **POM first**

If I were asked for a recommendation for someone who is doing Eclipse plugin development, then it is **Manifest first -- with tycho**

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-07T21:08:00.317

I think you should choose by use case. For server side OSGi projects I favour the pom first style. It nicely matches the maven builds and is much less error prone than Manifest first. In fact bnd which is behind the maven bundle plugin gets the Manifest right for most cases without any additional config. The trick is to use some naming rules. For example if you name internal package impl or internal the will not be exported. Using this style you can not use the Eclipse plugin perspective (at least without bndtools which I do not like) but I did not yet miss this perspective. I am a developer in the Apache Karaf, CXF and Camel projects where we use this style and it works great. Especially for CXF and Camel it is great that we can support OSGi and non OSGi deployments with the same build and tools.

For Eclipse RCP applications Manifest first is the way to go as you need the plugin perspective and the Eclipse IDE tools. If you want to combine that with maven then tycho is probably the way to go.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T08:42:24.107

MANIFEST first does not lock you to Eclipse (although I'd be surprised if more than a tiny minority would use anything else). The MANIFEST is the file that counts, and needs to be added to a jar, regardless how you do that.

On the other hand, POM first completely locks you to Maven, you lose the advantage that an OSGi bundle is a regular jar you can make any way you want.

I've tried both, I really prefer MANIFEST first. The MANIFEST file is a really important file, I prefer to craft that file over crafting a file that produces that file. If something weird happens, (and it will at some point) the MANIFEST file is the first to check, it's just easier if it's your own file. Besides, you will have to be familiar with it anyway.

So, if Maven is your alpha and omega, POM first will suit you best, but you'll still need to have in-depth understanding of the MANIFEST file.

# python - 如何将 Django 变量作为 javascript 方法参数传递？

> ID：11373013
> 
> 赞同：3
> 
> 时间：2012-07-07T07:04:57.923
> 
> 标签：python, google-maps, google-maps-api-3, django-templates, django-views

`extra_context`我的views.py中有以下内容。

```
extra_context = {
    'user': list_user,
    'time': str(list_time),
    'latlng': list_latlng
} 
```

以上所有变量都是`python list`. 现在我想在 Gmap v3 javascript 中使用这些变量。我找到了谷歌地图的以下片段：（发布主要部分）

```
<script type="text/javascript">
var map ;
function initialize() {
var latlng = new google.maps.LatLng(-34.397, 150.644);
var myOptions = {
  zoom: 2,
  center: latlng,
  mapTypeId: google.maps.MapTypeId.TERRAIN 
};

map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

var flightPlanCoordinates = [ {% for ip in latlng %}{{ ip }}{% endfor %}];
for(var i in flightPlanCoordinates){
    var marker = add_marker(flightPlanCoordinates[i][0], flightPlanCoordinates[i][1],"Some title!","html for info box");
    marker.setMap(map);
    }
}

function add_marker(lat,lng,title,box_html) {
var infowindow = new google.maps.InfoWindow({
    content: box_html
});

var marker = new google.maps.Marker({
      position: new google.maps.LatLng(lat,lng),
      map: map,
      title: title
});

google.maps.event.addListener(marker, 'click', function() {
  infowindow.open(map,marker);
});   

return marker; 
```

}

`latlng`上面的代码根据从上下文传递的列表显示了一个标记。但问题发生在当时我也试图以`time and user`同样的方式通过时。它在地图上没有显示任何内容。顺便说一句，我尝试使用此代码：

```
var user = [{% for i in user %}{{ i }}{% endfor %}]; 
var timestamp = [{% for y in time %}{{ y }}{% endfor %}]; 
```

那是正确的方法吗？我是根据`latlng`代码编写的 javascript 新手。

我试过了`alert(timestamp)`。没发生什么事 ：（

另一个问题是我必须将这三个参数传递给`add_marker` java 脚本方法。为此，我必须同时运行三个 for 循环。发布伪代码：

```
var user = [{% for i in user %}{{ i }}{% endfor %}]; 
var timestamp = [{% for y in time %}{{ y }}{% endfor %}];
var flightPlanCoordinates = [ {% for ip in latlng %}{{ ip }}{% endfor %}];
for (var in flightPlanCoordinates) and for (a in timestamp) and for(b in user)
{
  var marker = add_marker(flightPlanCoordinates[i][0], flightPlanCoordinates[i][1],b,a);
marker.setMap(map); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T07:16:31.010

您需要将变量定义为：

`var user = [{% for i in user %}{{ i }}{% if forloop.last %} {%else%} , {%endif%} {% endfor %}];`

即在数组中的值之间添加逗号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T08:52:45.017

使用[django-jsonify](http://pypi.python.org/pypi/django-jsonify/0.2.1)。在您的模板中使用例如

```
var user = {{ user|jsonify }}; 
```

就像魔术一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-29T19:48:32.563

使用[**JSON.parse()**](https://www.w3schools.com/js/js_json_parse.asp) 在您的模板中使用例如

```
<script type="text/javascript">
    var user = JSON.parse('{{user}}');
</script> 
```

这对我来说很好；）

# c++ - 工会概念混乱

> ID：11373021
> 
> 赞同：3
> 
> 时间：2012-07-07T07:06:23.983
> 
> 标签：c++, c, unions

```
#include<stdio.h>

union node {
     int i;
     char c[2];
};

main() {

    union node n;
    n.c[0] = 0;
    n.c[1] = 2;
    printf("%d\n", n.i);
    return 0;
} 
```

我认为它给出了`512`输出，因为 c[0] 值存储在第一个字节中，而 c[1] 值存储在第二个字节中，但是给出了`1965097472`. 为什么 ？。我在 Windows 的代码块中编译了这个程序。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-07T07:12:35.077

您的联合分配四个字节，开始为：

```
[????] [????] [????] [????] 
```

您设置了至少两个有效字节：

```
[????] [????] [0x02] [0x00] 
```

然后将所有四个字节打印为整数。你不一定会得到`512`，因为任何东西都可以在最重要的两个字节中。在这种情况下，您有：

```
[0x75] [0x21] [0x02] [0x00] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T07:07:04.007

因为未定义的行为。访问一个`union`未设置的成员就是这样做的，就这么简单。它可以做任何事情，打印任何内容，甚至崩溃。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T07:27:44.587

未定义的行为，嗯……未定义。

我们**可以**尝试回答为什么给出了特定的结果**（**其他答案通过猜测编译器实现细节来做到这一点），但我们**不能说为什么****没有**给出另一个结果。据我们所知，编译器可能会打印 0、格式化您的硬盘、放火烧房子或将 100,000,000 美元转入您的银行账户。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T07:13:54.633

请注意，您`int`的字节数可能至少为 4 个字节（而不是 2 个字节，就像过去那样）。要让大小匹配，请将类型更改`i`为`uint16_t`。

即使在此之后，该标准实际上也不允许设置一个联合成员，然后访问另一个成员以尝试重新解释字节。但是，您可以使用`reinterpret_cast`.

```
union node {
    uint16_t i;
    uint8_t c[2];
};

int main() {
    union node n;
    n.c[0] = 0;
    n.c[1] = 2;
    std::cout << *reinterpret_cast<uint16_t *>(&n) << std::endl;
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-07T07:18:30.987

被`int`编译为 32 位数字，小端。通过将两个较低的字节分别设置为 2 和 0，然后读取 int，您将得到 1965097472。如果您查看十六进制表示 7521 **0200**，您会再次看到您的字节，此外它是未定义的行为，其中一部分取决于内存架构程序运行的平台。

# design-patterns - 设计：在第三方网站上销售内容

> ID：11373029
> 
> 赞同：0
> 
> 时间：2012-07-07T07:07:07.180
> 
> 标签：design-patterns

只需要一些建议，因为我是这个领域的新手，不确定最好的方法是什么。

我有一个网站，我们在其中销售 udemy、appsumo 或 lynda 等在线课程。人们在网站上付款，可以在线访问/流式传输视频和测验。

现在我正在与第三方网站合作，该网站将出售我们的课程，但我们正在为该网站定制课程，这些课程不会在我的网站上供我的用户使用。同样，来自此第 3 方网站的用户不应看到我网站上可用的课程。

这个想法是 - 在第 3 方网站上 - 用户将查看课程详细信息、注册并在线支付，之后用户将被重定向到我的网站。用户不应该得到任何迹象表明他已经访问了我的站点 - 外观应该类似于第 3 方站点，并且 URL 也将被屏蔽。不用说，当他在我的网站上时 - 他应该无法访问我当前的任何页面，例如“查看课程”、“关于我们”、“联系我们”等

基本上这个想法是用户永远不会知道我的网站。即使下次他想访问课程时 - 他也会登录 3rd 方网站并被重定向到这里。

因此，另一端的技术团队建议我应该只使用主要课程页面和新布局进行新构建，并将其部署在单独的服务器上，但指向相同的后端数据库。

维护同一个站点的两个版本的想法对我来说似乎不正确。

需要一些专家的建议，他们曾经在那里做过。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T07:16:16.067

我的第一个想法是你应该为他们创建一个 API 来访问内容而不是重定向。这样你只负责提供内容，集成完全在他们身上。此外，如果将来出现与其他方的类似合作伙伴关系，您已经为此做好了准备。

# objective-c - init 方法中的 (id) 是什么意思？

> ID：11373031
> 
> 赞同：1
> 
> 时间：2012-07-07T07:07:17.127
> 
> 标签：objective-c, ios

> **可能重复：**
> [id 是什么意思？](https://stackoverflow.com/questions/7987060/what-is-the-meaning-of-id)

我是 iOS 编程的新手。

我看到了以下声明

```
- (id)init 
```

(id) 在这里是什么意思？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T07:41:22.227

`id`表示与任何对象兼容的类型。符号

```
- (id)init 
```

表示`init`你的类的实例方法；通常它用于在内存分配后初始化实例化对象（通常使用完成`alloc`）。在 Objective-C 中，方法的返回类型是通过将类型放在方法名称之前的括号中来声明的。因此，这意味着该`init`方法可以返回任何 Objective-C 对象。

* * *

但是你真的应该用谷歌搜索 Objetive-C 教程并阅读它。这是一个基本的事情，**没有理由**不阅读教程或其他文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T07:10:27.217

`id`是表示 Objective-C 对象的普通 C 兼容类型。这允许 C 源代码存储 Objective-C 对象并与之交互。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T07:56:35.933

它是 'id' 类型的原因是 -init 方法从 NSObject 一直继承（在 Objective-C 中，您不能重载方法，因此子类化时不能更改参数/返回值类型） . 由于“id”适用于任何对象，这没关系。

**编辑**似乎指定一个具体的类作为 -init 的返回类型是可以的，即使你最终覆盖了'-[NSObject init]'。

我猜“id”的使用只是一种习惯？

不过，'id' 充当“通用 Objective-C 对象指针”，在赋值时接受任何对象类型这一事实保持不变。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-07T07:10:27.350

-(id)init 被调用来初始化对象内的变量并进行任何必要的设置（它基本上是构造函数）。

可能的重复可能是 [-(id)init 方法有什么用？](https://stackoverflow.com/questions/4887062/whats-the-idinit-method-good-for)

# yii - 使用 CActiveDataProvider 按 MYSQL 记录显示组

> ID：11373032
> 
> 赞同：1
> 
> 时间：2012-07-07T07:07:20.937
> 
> 标签：yii

请我现在需要一个快速的帮助。这是我的问题

我有一张有几列的桌子。我正在使用 yii 框架来显示我的数据我想要做的是以这种方式对我的记录进行分组

第 1 列 第2 列 第3 列 第4 列

1 2 3 4

80 3 1 100

30 3 1 60

50 3 0 10

90 2 3 40

100 2 1 80

所以我想做的是查询我的表显示column2和column3，按我的column2分组。但是我遇到的问题是，我的 column2 在每个重复的 column2 下返回 2,2 - 3,3 和来自 column3 的组记录

我的结果应该以这种方式显示：

..................................................... ...................... 第 2 列 -- 2 .1 .3 .................... ..................................................... ... 列 2 -- 3 .0 .1

控制器：：

```
protected function displaybyCategory()
    {
         //$model = new myModel; 
         $criteria= new CDbCriteria();
         $criteria->distinct = true;
         $criteria->group = 'column2,column3';
         $criteria->order = 'column2';

    //$dataProvider=new CActiveDataProvider('myModel' );
             $dataProvider=new CActiveDataProvider('myModel', array(
            'criteria'=>$criteria,
            'pagination'=>false,
    ));
    $this->renderpartial('application.views.competency.ctype',array(
        'dataProvider'=>$dataProvider,
    ));    
    } 
```

我的观点：

```
<ul id="example1" class="accordion">

            <li>
                <h3><?php echo CHtml::link(CHtml::encode($data->column2)); ?></h3>
                <div class="panel loading">
                    <h4><?php  echo CHtml::link(CHtml::encode($data->column3)); ?></h4>
                </div>
            </li>

        </ul> 
```

# android - 如何捕捉 C2DM 通知来电话？

> ID：11373033
> 
> 赞同：0
> 
> 时间：2012-07-07T07:08:00.813
> 
> 标签：android, android-intent, push-notification, android-c2dm, google-cloud-messaging

启用 Android 的手机是否可以拦截所有 C2DM 通知？如果是这样，应该挖哪条路。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:10:38.690

不，不可能拦截 C2DM 或 GCM 消息。系统不会将它们交付给您的拦截器。它们不是通过不安全的广播意图传递的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T07:47:51.577

几天前，宣布正式弃用 C2DM。

当时 C2DM 停止接受新用户和配额请求。

C2DM 已被 Google Cloud Messaging for Android (GCM) 取代。C2DM服务短期内会继续维持，但开发者必须使用GCM进行新的开发。

因此，在近功能中，我们可能需要将现有的 C2DM 应用程序迁移到 GCM 以利用 GCM 功能。

# c++ - 未找到 DbManager.h

> ID：11373034
> 
> 赞同：1
> 
> 时间：2012-07-07T07:08:01.243
> 
> 标签：c++

我正在使用 Visual Studio 2008 并希望将我的数据库连接到 Oracle 数据库。但是在运行以下代码时，我遇到了以下错误。任何人都可以帮忙。我在下面发布我的代码。

```
// Connection to DataBase.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"

#include"DbManager.h"
#define WIN32COMMON

#include<iostream>
#include <occi.h>
using namespace oracle::occi;
using namespace std; 

class DataBaseConnectionTest
{
public:
    void test()
    {
        const string sqlstring("select * from info ");
        try
        {
            cout<<"Hello"<<'\n';
            DbManager *db=new DbManager(system);
            OracleServices *os=db->getoracleServices();

            Connection *conn=os->connection();
            Statement *st=conn->createStatement(sqlstring);
            ResultSet *rs=st->executeQuery();
            string name;
            while(rs->next())
            {
                 name=rs->getString(1);
                 cout<<name<<" "<<'\n';
            }
            st->closeResultSet(rs);
            conn->terminateStatement(st);
        }
        catch(SQLException& se)
        {
            cout<<"Error Occured"<<"\n";
        }
    }
};

void main()
{
    DataBaseConnectionTest *dbc=new DataBaseConnectionTest();
    dbc->test();
} 
```

错误如下所示：

> 错误 1 ​​致命错误 C1083：无法打开包含文件：'DbManager.h'：没有这样的文件或目录

我搜索了该文件，但无法找到它。

# asp.net-mvc - MVC3 区域和路由结构

> ID：11373035
> 
> 赞同：0
> 
> 时间：2012-07-07T07:08:02.780
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我正在为用户、管理员、商店、论坛等创建区域

在每个区域中，它都有自己的 Controllers、Models、Views 文件夹。在根模型、根控制器和根视图中，我在其中共享了组件。

结构A：

```
Root/ -> Models/, Controllers/, Views/
Root/User/ -> Models/, Controllers/, Views/
Root/Admin/ -> Models/, Controllers/, Views/
Root/Shop/ -> Models/, Controllers/, Views/
Root/Forum/ -> Models/, Controllers/, Views/ 
```

我可能错了，但他们真的不认为我在每个业务逻辑组中重复 MV 和 C 文件夹。我在想一个更好的结构是使用 MV 和 C 作为主要文件夹并在其中布局我的业务逻辑组：

结构 B：

```
Root/Views/ -> User/, Admin/, Shop/, Forum/ ...etc
Root/Models/ -> User/, Admin/, Shop/, Forum/ ...etc
Root/Controllers/ -> User/, Admin/, Shop/, Forum/ ...etc 
```

但是，如果我确实以这种方式构建文件夹，我就失去了划分网站逻辑功能的区域（或从用户的角度来看，子文件夹路径）的能力。

例如

使用结构A，我可以：

```
www.mywebsite.com/Users(area)/Account(controller)/LogOn(action)
www.mywebsite.com/Admin(area)/Account(controller)/LogOn(action) 
```

请注意，我可以在不同的区域使用相同的控制器和操作名称。

使用结构 B，我能做的最好的事情是：

```
www.mywebsite.com/AdminAccount(controller)/LogOn(action)
www.mywebsite.com/UserAccount(controller)/LogOn(action) 
```

无法实现无区域的单字子文件夹效果。如果不仅如此，这里的控制器名称很快就会变得更长更混乱。更不用说您在同一个 controller.cs 文件中堆叠了大量的操作。

所以，无论如何，我的观点是，如果我发现结构 B 对我更有意义，我该如何配置路由来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T07:48:38.947

所以你想要结构 B 的 url 对应于 A？

您将放弃约定优于配置。

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "UserAccount", // Route name
            "users/account/{action}/{id}", // URL with parameters
            new { controller = "UserAccount", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );
    } 
```

另一种选择是编写自定义路由处理程序并引入您自己的约定。类似于以下内容（新约定是将用户和帐户连接起来以获取 www.mywebsite.com/Users/Account/LogOn 中的 UsersAccountController）。我没有测试看看它如何处理区域，但如果你有问题让我知道，我可以看看。

```
public class CustomConventionRouteHandler : MvcRouteHandler
{
    protected override IHttpHandler GetHttpHandler(System.Web.Routing.RequestContext requestContext)
    {
        string controller = requestContext.RouteData.Values["controller"].ToString();

        object controllerModifier;
        if (requestContext.RouteData.Values.TryGetValue("controllerModifier", out controllerModifier))
        {
            requestContext.RouteData.Values["controller"] = string.Concat(controllerModifier, controller);
        }

        return base.GetHttpHandler(requestContext);
    }
}

public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.Add(
        new Route(
            "{controllerModifier}/{controller}/{action}",
            new RouteValueDictionary(new { controllerModifier = UrlParameter.Optional, controller = "Home", action = "Index" }),  //defaults
            new CustomConventionRouteHandler()));
} 
```

# silverlight - 部署后如何显示启动画面？

> ID：11373041
> 
> 赞同：0
> 
> 时间：2012-07-07T07:08:41.983
> 
> 标签：silverlight, image, deployment, screen, splash-screen

我有一个带有自定义启动画面和图像的“silverlight RIA”应用程序。在我的客户端，一切似乎都很好。问题在我将其部署到服务器后开始。我的图像不再显示！首先，我在显示启动画面时遇到了问题。但是，在我将“splashscreen.xaml”的属性更改为“内容”之后，它就可以了！但是部署后仍然没有显示图像！关于哪里出了问题以及如何纠正的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T04:45:51.087

您应该以 ../ 开头图像的 url

# asp.net-mvc-3 - 在 MVC 3 应用程序中管理用户的角色

> ID：11373043
> 
> 赞同：1
> 
> 时间：2012-07-07T07:09:05.643
> 
> 标签：asp.net-mvc-3

我正在尝试为 MVC 3 应用程序中的任何用户添加和删除 aspnet 角色。

我只需要使用下面描述的 3 个表。

我的问题是：

1.  **我需要使用“复选框”**显示用户现有的选定角色，以及其他可用但未为用户选择的角色

***   我需要将选定的值保存到表 aspnet_UsersInRoles 表中** 

 ****这是我到目前为止所做的：**

1.  我创建了名为 AssignedRolesData.cs 的 ViewModel
2.  我已经更改了 aspnet_Users 和 aspnet_Users 的模型，以保存 aspnet_UsersInRoles 的 icollection 导航属性
3.  我为 UserController 创建了一个名为“PopulateAssignedRoleData”的方法来填充每个用户的现有角色

**我的问题：**

1.  我无法将所选角色放入复选框
2.  我不知道以后如何保存它们
3.  键的类型为 GUID

**楷模**

```
**using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
namespace WWW.Models
{
    public class aspnet_Roles
    {

        public Guid ApplicationId { get; set; }
        [Key]
        public Guid RoleId { get; set; }
        public string RoleName { get; set; }
        public string LoweredRoleName { get; set; }
        public string Description { get; set; }
        public virtual ICollection<aspnet_Users> aspnet_User { get; set; }
    }
}
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
namespace WWW.Models
{
    public class aspnet_Users
    {
        public Guid ApplicationId { get; set; }
        [Key]
        public Guid UserId { get; set; }
        public string UserName { get; set; }
        public string LoweredUserName { get; set; }
        public string MobileAlias { get; set; }
        public bool IsAnonymous { get; set; }
        public DateTime LastActivityDate { get; set; }
        public virtual ICollection<aspnet_Roles> aspnet_Role { get; set; }
    }
}** 
```

**视图模型**

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;

namespace WWW.ViewModels
{
    public class AssignedRolesData
    {
        public Guid RoleId { get; set; }
        public string RoleName { get; set; }
        public bool Assigned { get; set; }
    }
} 
```

**用户控制器**

```
 public ActionResult Edit(Guid id)
        {
            aspnet_Users aspnet_User = db.aspnet_Users
            .Include(i => i.UserId)
                //.Include(i => i.aspnet_User)
            .Where(i => i.UserId == id)
            .Single();
            PopulateAssignedRoleData(aspnet_User);
            return View(aspnet_User);

        }

 private void PopulateAssignedRoleData(aspnet_Roles aspnet_Role)
        {
            var allaspnet_Users = db.aspnet_Users;
            var UsersInRoles = new HashSet<Guid>(aspnet_Role.aspnet_User.Select(c => c.UserId));
            var viewModel = new List<AssignedRolesData>();
            foreach (var user in allaspnet_Users)
            {
                viewModel.Add(new AssignedRolesData
                {
                    RoleId = aspnet_Role.RoleId,
                    RoleName = aspnet_Role.RoleName,
                    Assigned = UsersInRoles.Contains(aspnet_Role.RoleId)
                });
            }
            ViewBag.Courses = viewModel;
        } 
```

**我的编辑视图**

```
<div class="editor-field">
            <table>
                <tr>
                    @{
                        int cnt = 0;
                        List<www.ViewModels.AssignedRolesData> Roles = ViewBag.aspnet_Role;

                        foreach (var Role in Roles)
                        {
                            if (cnt++ % 3 == 0) {
                                @:  </tr> <tr> 
                            }
                            @: <td> 
                                <input type="checkbox" 
                                       name="selectedRoles" 
                                       value="@Role.RoleId" 
                                       @(Html.Raw(Role.Assigned ? "checked=\"checked\"" : "")) /> 
                                @Role.RoleId @:  @Role.RoleName
                            @:</td>
                        }
                        @: </tr>
                    }
            </table>
        </div>

        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset> 
```

**表**

```
aspnet_Users Table  
ApplicationId   uniqueidentifier
UserId  uniqueidentifier
UserName    nvarchar(256)
LoweredUserName nvarchar(256)
MobileAlias nvarchar(16)
IsAnonymous bit
LastActivityDate    datetime

aspnet_Roles Table  
ApplicationId   uniqueidentifier
RoleId  uniqueidentifier
RoleName    nvarchar(256)
LoweredRoleName nvarchar(256)
Description nvarchar(256)

aspnet_UsersInRoles Table   
UserId  uniqueidentifier
RoleId  uniqueidentifier 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T10:34:13.663

您需要发布您的视图，以便我们可以看到您是如何尝试创建复选框的。

要回答您的第二个问题，您可以执行以下操作：

```
public ActionResult UpdateRoles(string userName, string[] roles)
{
    // Remove the user from all roles, you could use more logic
    // to see what the changes are and if you need to remove a role
    // but this is just to get you started
    string[] userRoles = Roles.GetRolesForUser(user.UserName);        
    if(userRoles.Count() > 0)
    {
        foreach(string role in userRoles)
        {
            Roles.RemoveUserFromRoles(userName, role);
        }
    }

    // then you just add the user to the submitted roles
    foreach(string role in roles)
    {
        Roles.AddUserToRole(UserName, role);
    } 
```**

# ajax - Ajax表单中找不到View的错误

> ID：11373048
> 
> 赞同：0
> 
> 时间：2012-07-07T07:09:26.803
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-ajax

[我在这里](https://stackoverflow.com/questions/11372421/ajaxform-in-result-of-ajaxform)问一个类似的问题

所以我`OnComplete`在 Ajax 表单中添加了一些函数和 Id，并且有：

这是我的观点：

```
@foreach(var item in Model) {
 <tr id="TR@(item.Id)">
    @{Html.RenderPartial("_PhoneRow", item);}
 </tr>
} 
```

`_PhoneRow`：

```
@model PhoneModel
@using(Ajax.BeginForm("EditPhone", new { id = Model.Id }, new AjaxOptions {
UpdateTargetId = "TR" + Model.Id,
OnComplete = "OnCompleteEditPhone"
}, new { id = "EditAjaxForm" + Model.Id})) {
<td>@Html.DisplayFor(modelItem => Model.PhoneNumber)</td>
<td>@Html.DisplayFor(modelItem => Model.PhoneKind)</td>
<td><input type="submit" value="Edit" class="CallEditPhone" id="edit@(Model.Id)" /></td>
} 
```

控制器：

```
public ActionResult EditPhone(long Id) {
  //Get model by id
  return PartialView("_EditPhoneRow", model);
}

public ActionResult SavePhone(PhoneModel model) {
  //Save Phone, and Get Updatet model
  return PartialView("_PhoneRow", model);
} 
```

`_EditPhoneRow`

```
 @model PhoneModel
@using(Ajax.BeginForm("SavePhone", new { id = Model.Id }, new AjaxOptions {
UpdateTargetId = "TR" + Model.Id,
OnComplete = "OnCompleteSavePhone"
})) {
<td>@Html.EditorFor(modelItem => Model.PhoneNumber)</td>
<td>@Html.EditorFor(modelItem => Model.PhoneKind)</td>
<td><input type="submit" value="Save" class="SaveEditPhone" id="save@(Model.Id)" /></td>
} 
```

和`Oncomplete`脚本：

```
function OnCompleteEditPhone() {

$('input.SaveEditPhone').click(function () {
    var id = $(this).attr("id").substring(4);
    $('form#SaveAjaxForm' + id).trigger('submit');
});
}

function OnCompleteSavePhone() {
$('input.CallEditPhone').click(function () {
    var id = $(this).attr("id").substring(4);
    $('form#EditAjaxForm' + id).trigger('submit');
});
} 
```

所以点击编辑工作得很好，然后点击保存也工作得很好，但是当我第二次点击编辑按钮时，我在发布操作中有一个错误，我在这里复制了 Firebug 控制台：

```
http://Mysite/members/editphone/7652 200 OK 582ms
http://Mysite/members/savephone/7652 200 OK 73ms
http://Mysite/members/editphone/7652 500 internal server error 136ms
<title>The view 'EditPhone' or its master was not found or no view engine supports the searched locations. The following locations were searched: ... 
```

那么问题出在哪里？如果我第二次删除`OnCompleteSavePhone`了“编辑”按钮不起作用，并且使用此功能出现了一个没有任何意义的错误，我该如何解决？我实际上是通过 Ajax 加载部分视图，并且需要此视图的按钮正常工作，起初一切都很好，但在 Ajax 结果之后他们没有，我想添加一些`Oncomplete`功能，但也有错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T07:41:00.577

你之前的问题现在已经[回答了](https://stackoverflow.com/a/11373102/29407)。你破坏了标记。因此，您不再需要关心任何`OnComplete`事件并执行一些自动触发器、表单提交和其他操作。这将由`Ajax.BeginForm`基础架构自动为您处理。

# c# - 如何在不使用 XML 属性的情况下读取包含 XML 元素的字符串

> ID：11373049
> 
> 赞同：-1
> 
> 时间：2012-07-07T07:09:33.263
> 
> 标签：c#

我正在我的项目中进行 XML 读取过程。我必须在哪里读取 XML 文件的内容。我已经实现了。

出于好奇，我还尝试使用相同的方法，将 XML 内容保存在字符串中，然后仅读取 elemet 标记内的值。甚至这我已经实现了。以下是我的代码。

```
string xml = <Login-Form>
                 <User-Authentication>
                     <username>Vikneshwar</username>
                     <password>xxx</password>
                 </User-Authentication>

                 <User-Info>
                     <firstname>Vikneshwar</firstname>
                     <lastname>S</lastname>
                     <email>xxx@xxx.com</email>
                 </User-Info>
             </Login-Form>";
        XDocument document = XDocument.Parse(xml);

var block = from file in document.Descendants("client-authentication")
            select new
            {
                Username = file.Element("username").Value,
                Password = file.Element("password").Value,
            };

foreach (var file in block)
{
    Console.WriteLine(file.Username);
    Console.WriteLine(file.Password);
} 
```

同样，我获得了另一组元素（名字、姓氏和电子邮件）。现在我的好奇心再次吸引了我。现在我正在考虑使用字符串函数做同样的事情？

将采用上述代码中使用的相同字符串。我试图不使用任何与 XMl 相关的类，即[XDocument](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)、[XmlReader](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.aspx)等。应该只使用字符串函数来实现相同的输出。我不能那样做。可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T07:34:38.880

不要这样做。XML 比实际情况更复杂，具有围绕嵌套、字符转义、命名实体、名称空间、排序（属性与元素）、注释、未解析的字符数据和空格的复杂规则。例如，只需添加

```
<!--
    <username>evil</username>
--> 
```

或者

```
<parent xmlns=this:is-not/the/data/you/expected">
    <username>evil</username>
</parent> 
```

或者在 CDATA 部分中可能相同 - 看看基本的基于字符串的方法如何工作。提示：对于通过 DOM 获得的内容，您会得到不同的答案。

使用**专**为读取 XML 设计的专用工具是正确的方法。至少，使用`XmlReader`- 但坦率地说，DOM（例如您现有的代码）要方便得多。或者，使用序列化`XmlSerializer`程序来填充对象模型，然后查询*.*

试图**正确**解析 xml 和类似 xml 的数据不会很好地结束...... [RegEx 匹配除了 XHTML 自包含标签之外的开放标签](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T07:21:54.427

您可以使用课堂上`IndexOf, Equals, Substring`提供的等方法`String`来满足您的需求，更多信息请[点击此处](http://msdn.microsoft.com/en-us/library/system.string_members%28v=vs.71%29)，

使用正则[表达式](http://msdn.microsoft.com/en-us/library/ms228595%28v=vs.80%29.aspx)也是一个不错的选择。

但建议为此目的使用[XmlDocument类。](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T07:26:27.370

它可以在没有正则表达式的情况下完成，如下所示：

```
string[] elementNames = new string[]{ "<username>", "<password>"};
foreach (string elementName in elementNames)
{
    int startingIndex = xml.IndexOf(elementName);
    string value = xml.Substring(startingIndex + elementName.Length,
        xml.IndexOf(elementName.Insert(1, "/")) 
        - (startingIndex + elementName.Length));
    Console.WriteLine(value);
} 
```

使用正则表达式：

```
string[] elementNames2 = new string[]{ "<username>", "<password>"};
foreach (string elementName in elementNames2)
{
    string value = Regex.Match(xml, String.Concat(elementName, "(.*)",
        elementName.Insert(1, "/"))).Groups[1].Value;
    Console.WriteLine(value);
} 
```

当然，唯一推荐的是**使用 XML 解析类**。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-07T07:56:03.577

构建一个扩展方法来获取标签之间的文本，如下所示：

```
public static class StringExtension
{
    public static string Between(this string content, string start, string end)
    { 
        int startIndex = content.IndexOf(start) + start.Length;
        int endIndex = content.IndexOf(end);
        string result = content.Substring(startIndex, endIndex - startIndex);
        return result;
    }
} 
```

# php - 如何在 Yii 中设置默认控制器

> ID：11373057
> 
> 赞同：10
> 
> 时间：2012-07-07T07:12:25.080
> 
> 标签：php, yii

有没有办法在 Yii 中指定默认控制器？而不是使用 SiteController？先感谢您。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-07T07:26:57.067

将默认控制器设置为 Yii PHP 框架上的主页控制器。您必须修改 /protected/config/main.php 上的核心默认控制器（站点/索引）

```
return array(
    'name' => 'Web Application',
    'defaultController' => 'home ', 

); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-07T07:25:26.157

尝试在config main.php中添加配置

```
'defaultController' => 'newcontrollername', 
```

在“名称”设置之后。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-05-22T06:27:12.773

还有另一种方法可以做到这一点

更改 public $defaultController 属性的值

框架/web/CWebApplication.php

# php - 如何在嵌套集合模型中插入数据（MySQL）；

> ID：11373061
> 
> 赞同：2
> 
> 时间：2012-07-07T07:12:57.507
> 
> 标签：php, mysql, database, nested-sets

在嵌套集模型中，我们有 LEFT 和 Right 列

第一次空表时，我需要在 RIGHT 列中插入什么，如果我不知道我会有多少个孩子

左 1 - 永远

对 ？- 这里有什么价值？

如何让它动态？不是静态的。

ps：使用php

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T07:19:34.370

我从您的标签和标题中假设您正在寻找适用于**MySQL**的解决方案。

是的，你是对的，除非你事先知道元素的数量，否则`right`需要动态计算值。您可以使用两种方法：

*   您可以从有效的最小值开始（在本例中为 2），然后根据需要增加它。
*   您可以只进行 10000000 之类的猜测，并希望这已经足够了，但是您需要为它还不够的可能性做好准备，以后可能需要再次调整。

在这两种情况下，您都需要实现在插入新行时可能需要调整多行的`left`and值，但在第二种情况下，您实际上只需要在您的猜测错误时执行更新。`right`所以第二种解决方案更复杂，但可以提供更好的性能。

请注意，在存储分层数据的四种常用方法中，嵌套集方法是**最难**执行插入和更新的方法。请参阅 Bill Karwin 的层次[数据模型的](http://www.slideshare.net/billkarwin/models-for-hierarchical-data)幻灯片 69 。

![嵌套集更新难度](../Images/271bfb8cb184cca2faad554fc9726a02.png)

# javascript - 计算节点数不起作用

> ID：11373062
> 
> 赞同：1
> 
> 时间：2012-07-07T07:12:58.470
> 
> 标签：javascript, xml, xml-parsing

我有一个 xml 文件：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<food>
    <cuisine type="Chinese">
        <restaurant name = "Panda Express">
            <location id= "0"></location>
            <phone id = "1"></phone>
            <city id="2"></phone>
        </restaurant>
        <restaurant name = "Mr. Chau's">

        </restaurant>
    </cuisine>
    <cuisine type="Indian">
        <restaurant name = "Shan">

        </restaurant>
    </cuisine>
</food> 
```

我正在尝试计算美食节点的数量，这是我拥有的代码，我知道它大部分是正确的，但是当我尝试打印节点列表的长度时，它说它是 0

```
//starts talking to the xml document
        if(window.XMLHttpRequest){
            xmlhttp = new XMLHttpRequest();
        }else{
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }

        xmlhttp.open("GET","data.xml", false);
        xmlhttp.send();
        xmlData = xmlhttp.responseXML;

        //fills the first comboBox
        var sel = document.getElementById('CuisineList');
        cuisineList = xmlData.getElementsByTagName('cuisine');
        document.getElementById("test").innerHTML = cuisineList.length; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T07:36:48.720

两个可能的答案：

A) XML 有错误，你有`</phone>`你需要的地方`</city>`。所以你需要解决这个问题。:-)（但我猜这只是问题，而不是你的真实数据，因为如果它在你的真实数据中，你不会得到`0`，我不会想；你会得到一个错误。 )

B) 检查您的响应标头，可能是您的服务器没有返回具有正确 MIME 类型的 XML。如果不：

1.  最好的答案是更正服务器配置，以便正确地提供 XML 文件。

2.  如果由于某种原因您不能这样做，您可以使用`overrideMimeType`强制`XMLHttpRequest`将响应视为 XML：

    ```
    xmlhttp.open("GET","data.xml", false);
    xmlhttp.overrideMimeType("text/xml"); // <=== The new bit
    xmlhttp.send();
    xmlData = xmlhttp.responseXML; 
    ```

如果你解决了这些问题，它就可以工作：[实时工作副本](http://jsbin.com/inobev)| [来源](http://jsbin.com/inobev/edit)

# python - 在 Python 中合并多个 CSV 文件

> ID：11373067
> 
> 赞同：1
> 
> 时间：2012-07-07T07:13:52.263
> 
> 标签：python, csv, import-from-csv

我有一系列随机模拟的输出，格式为 .csv 文件，如下所示：

```
Run,ID,Var
1,1,7
1,2,9
1,3,4
2,1,3
2,2,4
2,3,8 
```

等等

除此之外，我还有另一个数据文件，也是一个 .csv，格式如下：

```
ID, Var2, Var3
1,0.89,0.10
2,0.45,0.98
3,0.27,0.05
4,0.98,0.24 
```

**注意**：数据文件中有一些值*没有*出现在模拟文件中。我希望这些被忽略。

我想做的是编写一个脚本，`ID`从第一个 .csv 文件中获取每个值，找到 Var2 和 Var3 并将它们放在一起，最终得到如下内容：

```
Run, ID, Var, Var2, Var3
1,1,7,0.89,0.10
1,2,9,0.45,0.98
1,3,4,0.27,0.05
2,1,3,0.89,0.10
2,2,4,0.45,0.98
2,3,8,0.27,0.05 
```

关于如何做到这一点的任何建议？我承认这是我对 Python 中数据处理的理解的极限。我对如何在 SAS 中执行此操作有一定的了解，但我更愿意将其保留为单语言任务，以便可以将它们作为单个脚本处理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T08:20:18.873

输出.csv：

```
Run, ID, Var
1, 1, 7
1, 2, 9
1, 3, 4
2, 1, 3
2, 2, 4
2, 3, 8 
```

数据.csv：

```
ID, Var2, Var3
1, 0.89, 0.10
2, 0.45, 0.98
3, 0.27, 0.05
8, 0.4, 0.5 
```

**请注意**，即使我们在 data.csv 中有条目，但不存在于 ouput.csv 中，它也不会影响最终结果，因为当我们解析 output.csv 时，我们只查找我们从 output.csv 中知道的 ID，**尽管相反，** data.csv 至少必须包含 output.csv 中的所有 ID，但如果需要，这可以很容易地处理。

代码：

```
import csv
from pprint import pprint 

data = dict([(row['ID'], row) for row in csv.DictReader(open('data.csv', 'rb'), skipinitialspace = True)])
values = []
for row in csv.DictReader(open('output.csv', 'rb'), skipinitialspace = True):
    values.append(row)
    values[-1].update(data[row['ID']])

>>> pprint(values)
[{'ID': '1', 'Run': '1', 'Var': '7', 'Var2': '0.89', 'Var3': '0.10'},
 {'ID': '2', 'Run': '1', 'Var': '9', 'Var2': '0.45', 'Var3': '0.98'},
 {'ID': '3', 'Run': '1', 'Var': '4', 'Var2': '0.27', 'Var3': '0.05'},
 {'ID': '1', 'Run': '2', 'Var': '3', 'Var2': '0.89', 'Var3': '0.10'},
 {'ID': '2', 'Run': '2', 'Var': '4', 'Var2': '0.45', 'Var3': '0.98'},
 {'ID': '3', 'Run': '2', 'Var': '8', 'Var2': '0.27', 'Var3': '0.05'}]
>>> 
```

现在保存回 csv 文件。

```
fieldnames = ['Run', 'ID', 'Var', 'Var2', 'Var3']
f = open('combined.csv', 'wb')
csvwriter = csv.DictWriter(f, fieldnames = fieldnames)
csvwriter.writerow(dict((fn,fn) for fn in fieldnames)) # 2.7 has writeheader, which is cleaner
[csvwriter.writerow(row) for row in values]
f.close()

$ cat combined.csv 
Run,ID,Var,Var2,Var3
1,1,7,0.89,0.10
1,2,9,0.45,0.98
1,3,4,0.27,0.05
2,1,3,0.89,0.10
2,2,4,0.45,0.98
2,3,8,0.27,0.05 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T08:04:54.193

不使用`csv`模块的解决方案：

```
with open('data.txt') as f1,open('data1.txt') as f2,open('data3.txt','w') as f3:
    header1=f1.readline().strip().split(',') #header from file 1 i.e Run,ID,Var

    header2=f2.readline().strip().split(',')[1:] #header from file 2 ,i.e Var2, Var3

    dic={x.strip().split(',')[0]:x.strip().split(',')[1:] for x in f2 if x.strip()} #use dict to save data as per ID from file 2

    f3.write(','.join((header1+header2))+'\n') #write the new header(header1+header2) to file 3

    for x in f1: 
        f3.write(x.strip()+','+','.join(dic[x.split(',')[1]])+'\n') #fetch results from dic as per the ID obtained from the current line in data.txt 
```

**输出：** `data3.txt`包含

```
Run,ID,Var, Var2, Var3
1,1,7,0.89,0.10
1,2,9,0.45,0.98
1,3,4,0.27,0.05
2,1,3,0.89,0.10
2,2,4,0.45,0.98
2,3,8,0.27,0.05 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T08:47:26.897

简单易行：

```
f = open('one.csv', 'r')
one = f.read()
f.close()

f = open('two.csv', 'r')
two = f.read()
f.close()

one = one.split('\n')[1:-1]
two = two.split('\n')[1:-1]
output = 'Run, ID, Var, Var2, Var3\n'

for o in one:
  for t in two:
    row = t.split(',')
    if o.split(',')[1] == row[0]:
      output += '%s,%s,%s\n' % (o, row[1], row[2])

# or save it to a file
print output 
```

# python - 使用 wxPython 麻烦生成连续位图

> ID：11373081
> 
> 赞同：0
> 
> 时间：2012-07-07T07:17:28.827
> 
> 标签：python, user-interface, wxpython

好吧，虽然我不认为自己是一个有经验的程序员，尤其是在多媒体应用程序方面，但我不得不做这种图像查看器之类的程序，它可以全屏显示图像，并且当用户按下 <- 或 -> 时图像会发生变化箭头。

一般的想法是创建一个列表框，其中显示某个文件夹（imgs）中包含的所有图像，当有人双击或点击返回时，会生成一个新的全屏帧，首先包含在列表框中选择的图像但在用户点击箭头后，图像会以连续顺序变化，就像在常规图像查看器中一样。

一开始，当生成前 15-20 张图像时，一切都很顺利，之后，尽管程序仍然在中间工作，非常不愉快且非常不需要，但在图像生成之间会出现效果，其中基本上之前生成的一些图像是快速显示在屏幕上，然后出现右侧的连续图像。在第一次出现时，效果几乎不明显，但过了一段时间，两代人之间的时间越来越长。

这是当有人双击列表框条目时运行的代码：

```
def lbclick(self, eve):
    frm = wx.Frame(None, -1, '')
    frm.ShowFullScreen(True)
    self.sel = self.lstb.GetSelection() # getting the selection from the listbox
    def pressk(eve):
        keys = eve.GetKeyCode()
        if keys == wx.WXK_LEFT:
            self.sel = self.sel - 1
            if self.sel < 0:
                self.sel = len(self.chk) - 1
            imgs() # invocking the function made for displaying fullscreen images when left arrow key is pressed
        elif keys == wx.WXK_RIGHT:
            self.sel = self.sel + 1
            if self.sel > len(self.chk) - 1:
               self.sel = 0
            imgs() # doing the same for the right arrow 
       elif keys == wx.WXK_ESCAPE:
            frm.Destroy()       
       eve.Skip()
    frm.Bind(wx.EVT_CHAR_HOOK, pressk)
    def imgs(): # building the function
        imgsl = self.chk[self.sel]
        itm = wx.Image(str('imgs/{0}'.format(imgsl)), wx.BITMAP_TYPE_JPEG).ConvertToBitmap() # obtaining the name of the image stored in the list          self.chk
        mar = itm.Size   # Because not all images are landscaped I had to figure a method to rescale them after height dimension, which is common to all images
        frsz = frm.GetSize()
        marx = float(mar[0])
        mary = float(mar[1])
        val = frsz[1] / mary
        vsize = int(mary * val)
        hsize = int(marx * val)
        panl = wx.Panel(frm, -1, size = (hsize, vsize), pos = (frsz[0] / 2 -  hsize / 2, 0)) # making a panel container
        panl.SetBackgroundColour('#000000')
        imag = wx.Image(str('imgs/{0}'.format(imgsl)), wx.BITMAP_TYPE_JPEG).Scale(hsize, vsize, quality = wx.IMAGE_QUALITY_NORMAL).ConvertToBitmap()
        def destr(eve): # unprofessionaly trying to destroy the panel container when a new image is generated hopeing the unvanted effect, with previous generated images will disappear. But it doesn't.
            keycd = eve.GetKeyCode()
            if keycd == wx.WXK_LEFT or keycd == wx.WXK_RIGHT:
                try:
                    panl.Destroy()
                except:
                    pass
            eve.Skip()
        panl.Bind(wx.EVT_CHAR_HOOK, destr) # the end of my futile tries
        if vsize > hsize: # if the image is portrait instead of landscaped I have to put a black image as a container, otherwise in the background the previous image will remain, even if I use Refresh() on the container (the black bitmap named fundal)
            intermed = wx.Image('./res/null.jpg', wx.BITMAP_TYPE_JPEG).Scale(frsz[0], frsz[1]).ConvertToBitmap()
            fundal = wx.StaticBitmap(frm, 101, intermed)
            stimag = wx.StaticBitmap(fundal, -1, imag, size = (hsize, vsize), pos = (frsz[0] / 2 -  hsize / 2, 0))
            fundal.Refresh()
            stimag.SetToolTip(wx.ToolTip('Esc = exits fullscreen\n<- -> arrows = quick navigation'))
            def destr(eve): # the same lame attempt to destroy the container in the portarit images situation
                keycd = eve.GetKeyCode()
                if keycd == wx.WXK_LEFT or keycd == wx.WXK_RIGHT:
                    try:
                        fundal.Destroy()
                    except:
                        pass
                eve.Skip()
            frm.Bind(wx.EVT_CHAR_HOOK, destr)
        else: # the case when the images are landscape
            stimag = wx.StaticBitmap(panl, -1, imag)
            stimag.Refresh()
            stimag.SetToolTip(wx.ToolTip('Esc = exits fullscreen\n<- -> arrows = quick navigation'))
    imgs() # invocking the function imgs for the situation when someone does double click
    frm.Center()
    frm.Show(True) 
```

感谢您提前提供任何建议。

后来补充：

问题是我正在尝试为带有大量图像的 DVD 进行自动运行演示。无论如何，如果有任何其他选项，则不一定要使上述代码正常工作。我已经尝试使用 Windows 图像查看器，但奇怪的是它不能识别相对路径，当我这样做时

```
path = os.getcwd() # getting the path of the current working directory
sel = listbox.GetSelection() # geting the value of the current selection from the list box
imgname = memlist[sel] # retrieving the name of the images stored in a list, using the listbox selection, that uses as choices the same list
os.popen(str('rundll32.exe C:\WINDOWS\System32\shimgvw.dll,ImageView_Fullscreen {0}/imgsdir/{1}'.format(path, imgname))) # oepning the images up with bloody windows image viewer 
```

只有当我的程序在硬盘上时，它才会打开图像，如果它在 CD/图像驱动器上，它什么也不做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:40:54.663

wxPython 演示包中包含一个图像查看器。[我在这里](http://www.blog.pythonlibrary.org/2010/03/26/creating-a-simple-photo-viewer-with-wxpython/)也写了一个非常简单的。任何一个都应该在您的旅程中为您提供帮助。我怀疑您没有重复使用面板/框架，而是看到从未正确销毁的旧面板/框架。

# c# - C#：没有重复的骰子排列

> ID：11373083
> 
> 赞同：6
> 
> 时间：2012-07-07T07:18:00.237
> 
> 标签：c#, math, permutation, combinatorics

如何更改下面的 C# 代码以列出所有可能的排列而不重复？例如： 2 次掷骰子的结果将产生 1,1,2，这意味着 2,1,1 不应该出现。

下面是我的代码：

```
string[] Permutate(int input)
{
        string[] dice;
        int numberOfDice = input;
        const int diceFace = 6;
        dice = new string[(int)Math.Pow(diceFace, numberOfDice)];
        int indexNumber = (int)Math.Pow(diceFace, numberOfDice);
        int range = (int)Math.Pow(diceFace, numberOfDice) / 6;

        int diceNumber = 1;
        int counter = 0;

        for (int i = 1; i <= indexNumber; i++)
        {
            if (range != 0)
            {
                dice[i - 1] += diceNumber + " ";
                counter++;
                if (counter == range)
                {
                    counter = 0;
                    diceNumber++;
                }
                if (i == indexNumber)
                {
                    range /= 6;
                    i = 0;
                }
                if (diceNumber == 7)
                {
                    diceNumber = 1;
                }
            }
            Thread.Sleep(1);
        }
        return dice;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T08:48:00.340

我能想到的最简单的方法：

```
List<string> dices = new List<string>();
for (int i = 1; i <= 6; i++)
{
    for (int j = i; j <= 6; j++)
    {
        for (int k = j; k <= 6; k++)
        {
            dices.Add(string.Format("{0} {1} {2}", i, j, k));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T23:07:15.107

我编写了一个类来处理处理二项式系数的常用函数，这是您的问题所属的问题类型。它执行以下任务：

1.  将任何 N 选择 K 的所有 K 索引以良好的格式输出到文件。K-indexes 可以替换为更具描述性的字符串或字母。这种方法使得解决这类问题变得非常简单。

2.  将 K 索引转换为已排序二项式系数表中条目的正确索引。这种技术比依赖迭代的旧已发布技术快得多。它通过使用帕斯卡三角形固有的数学属性来做到这一点。我的论文谈到了这一点。我相信我是第一个发现并发表这种技术的人，但我可能是错的。

3.  将已排序二项式系数表中的索引转换为相应的 K 索引。

4.  使用[Mark Dominus](http://blog.plover.com/math/choose.html)方法计算二项式系数，它不太可能溢出并且适用于更大的数字。

5.  该类是用 .NET C# 编写的，并提供了一种通过使用通用列表来管理与问题相关的对象（如果有）的方法。此类的构造函数采用一个名为 InitTable 的 bool 值，当它为 true 时，将创建一个通用列表来保存要管理的对象。如果此值为 false，则不会创建表。无需创建表即可执行上述 4 种方法。提供了访问器方法来访问表。

6.  有一个关联的测试类，它显示了如何使用该类及其方法。它已经用 2 个案例进行了广泛的测试，并且没有已知的错误。

要了解此类并下载代码，请参阅[制表二项式系数](http://tablizingthebinomialcoeff.wordpress.com/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T13:10:09.453

问题的重要部分是您想要不同的集合（无论顺序如何）。例如，掷骰子 [1, 2, 1] 等于掷骰子 [1, 1, 2]。

我敢肯定有很多方法可以给这只猫剥皮，但首先想到的是创建一个 EqualityComparer，它将以您想要的方式比较骰子列表，然后使用 LINQ `Distinct()`方法。

这是`EqualityComparer`，它取 2`List<int>`并表示如果元素都相等（无论顺序如何）它们相等：

```
 private class ListComparer : EqualityComparer<List<int>>
    {
        public override bool Equals(List<int> x, List<int> y)
        {
            if (x.Count != y.Count)
                return false;
            x.Sort();
            y.Sort();
            for (int i = 0; i < x.Count; i++)
            {
                if (x[i] != y[i])
                    return false;
            }
            return true;
        }
        public override int GetHashCode(List<int> list)
        {
            int hc = 0;
            foreach (var i in list)
                hc ^= i;
            return hc;
        }
    } 
```

这是使用它的代码。我正在使用 LINQ 来构建所有组合的列表......你也可以使用嵌套`for`循环来做到这一点，但出于某种原因我更喜欢这样：

```
 public static void Main()
    {
        var values = new[] { 1,2,3,4,5,6 };
        var allCombos = from x in values
                        from y in values
                        from z in values
                        select new List<int>{ x, y, z };
        var distinctCombos = allCombos.Distinct(new ListComparer());

        Console.WriteLine("#All combos: {0}", allCombos.Count());
        Console.WriteLine("#Distinct combos: {0}", distinctCombos.Count());
        foreach (var combo in distinctCombos)
            Console.WriteLine("{0},{1},{2}", combo[0], combo[1], combo[2]);
    } 
```

希望有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-08T16:01:36.640

Here is generic c# version using recursion (basically the recursive method takes number of dices or number of times the dice has been tossed) and returns all the combinations strings ( for ex, for '3' as per the question - there will be 56 such combinations).

```
public string[] GetDiceCombinations(int noOfDicesOrnoOfTossesOfDice)
        {
            noOfDicesOrnoOfTossesOfDice.Throw("noOfDicesOrnoOfTossesOfDice",
                n => n <= 0);
            List<string> values = new List<string>();
            this.GetDiceCombinations_Recursive(noOfDicesOrnoOfTossesOfDice, 1, "",
                values);
            return values.ToArray();
        }
        private void GetDiceCombinations_Recursive(int size, int index, string currentValue,
            List<string> values)
        {
            if (currentValue.Length == size)
            {
                values.Add(currentValue);
                return;
            }
            for (int i = index; i <= 6; i++)
            {
                this.GetDiceCombinations_Recursive(size, i, currentValue + i, values);
            }
        } 
```

**Below are corresponding tests...**

```
[TestMethod]
        public void Dice_Tests()
        {
            int[] cOut = new int[] { 6, 21, 56, 126 };
            for(int i = 1; i<=4; i++)
            {
                var c = this.GetDiceCombinations(i);
                Assert.AreEqual(cOut[i - 1], c.Length);
            }
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-07T08:22:15.673

我的数学也很差，这可能有用也可能没有帮助......

**程序.cs**

```
namespace Permutation
{
    using System;
    using System.Collections.Generic;

    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("Generating list.");

            var dice = new List<ThreeDice>();

            for (int x = 1; x <= 6; x++)
            {
                for (int y = 1; y <= 6; y++)
                {
                    for (int z = 1; z <= 6; z++)
                    {
                        var die = new ThreeDice(x, y, z);

                        if (dice.Contains(die))
                        {
                            Console.WriteLine(die + " already exists.");
                        }
                        else
                        {
                            dice.Add(die);
                        }
                    }
                }
            }

            Console.WriteLine(dice.Count + " permutations generated.");

            foreach (var die in dice)
            {
                Console.WriteLine(die);
            }

            Console.ReadKey();
        }
    }
} 
```

三骰子.cs

```
namespace Permutation
{
    using System;
    using System.Collections.Generic;

    public class ThreeDice : IEquatable<ThreeDice>
    {
        public ThreeDice(int dice1, int dice2, int dice3)
        {
            this.Dice = new int[3];
            this.Dice[0] = dice1;
            this.Dice[1] = dice2;
            this.Dice[2] = dice3;
        }

        public int[] Dice { get; private set; }

        // IEquatable implements this method. List.Contains() will use this method to see if there's a match.
        public bool Equals(ThreeDice other)
        {
            // Get the current dice values into a list.
            var currentDice = new List<int>(this.Dice);

            // Check to see if the same values exist by removing them one by one.
            foreach (int die in other.Dice)
            {
                currentDice.Remove(die);
            }

            // If the list is empty, we have a match.
            return currentDice.Count == 0;
        }

        public override string ToString()
        {
            return "<" + this.Dice[0] + "," + this.Dice[1] + "," + this.Dice[2] + ">";
        }
    }
} 
```

祝你好运。

# iphone - 重新排列 UIView iphone 中的 UIButton 位置？

> ID：11373088
> 
> 赞同：0
> 
> 时间：2012-07-07T07:18:51.593
> 
> 标签：iphone, uibutton, position

我的班级中有一组 UIButtons。根据 UIWebView 中的 url 字段，我需要重新排列按钮的位置。

我的按钮数组是

```
 buttonArray = [[NSMutableArray alloc] initWithObjects:btn1,btn2,btn3,btn4,btn5,btn6, nil]; 
```

这些按钮按顺序排列，如果 mu url 字段给出的值为 false 意味着我需要删除按钮 btn1 和其他按钮应该保留显示顺序。

我试过这段代码

```
if(false)
   {
   btn1.hidden=YES;
   btn2.center=CGPointMake(btn1.frame.origin.x, btn1.frame.origin.y);

   } 
```

但 btn2 并没有占据 btn1 的位置。

我将如何安排我的按钮，以使其他按钮即使在显示中缺少某些按钮时也应保持显示顺序。

希望能得到一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T07:25:40.667

```
//please set first btn1 position 

btn1.hidden=YES;
btn2.frame=CGPointMake(btn1.frame.origin.x, btn1.frame.origin.y); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T07:27:16.063

而不是这个

```
 btn1.hidden=YES;
   btn2.center=CGPointMake(btn1.frame.origin.x, btn1.frame.origin.y); 
```

使用 btn2 的中心

```
 btn1.hidden=YES;
   btn2.center= btn1.center; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T07:28:13.420

不在可访问的计算机上，而只是猜测...尝试：

```
CGRect buttonFrame = btn1.frame;
[btn2 setFrame: buttonFrame]; 
```

# c# - 无效登录后如何再次显示登录表单？

> ID：11373089
> 
> 赞同：1
> 
> 时间：2012-07-07T07:18:53.650
> 
> 标签：c#, winforms

无效登录后如何在win表单应用程序中重定向回登录表单现在我正在program.cs中尝试这个

```
Application.EnableVisualStyles();
Application.SetCompatibleTextRenderingDefault(false);
// Application.Run(new frmLogin());
frmLogin fm = new frmLogin();

fm.ShowDialog();
if (fm.DialogResult == DialogResult.OK && Global.Login)
    Application.Run(new MDIParent1());
else if(fm.DialogResult==DialogResult.Cancel)
{
    MessageBox.Show("Wrong Username Or Password");
    Application.Run(new frmLogin());
    //fm.ShowDialog();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T07:29:20.820

为什么您不处理登录表单本身中的“无效登录”？在登录有效之前不要返回调用表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T08:43:24.843

在`frmLogin`实施检查有效性并显示消息框：

```
// in frmLogin.cs
if(/* loginn is valid*/)
{
    this.DialogResult = DialogResult.OK;
    this.Close();
}
else
{
    MessageBox.Show("Wrong Username Or Password");
} 
```

# php - 页面重定向而不重新定义

> ID：11373090
> 
> 赞同：-6
> 
> 时间：2012-07-07T07:18:59.467
> 
> 标签：php, jquery, ajax, redirect

我想要重定向而不刷新整个父页面。有什么方法可以执行此操作。我需要类似下面网站的功能

[https://github.com/jquery/jquery](https://github.com/jquery/jquery)

就像在上面的站点中一样，文件列表在 jQuery 下。当我们单击任何文件时，它会将我们重定向到该文件而无需刷新页面。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T07:27:15.847

在不知道您的确切要求的情况下，我一般无法给您一个正确的答案，jQuery 将是您最好的选择。

使用 jQuery.ajax（此处为[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)文档）

此方法允许您在不刷新页面的情况下异步查询数据，然后对结果执行您想要的操作。

如果您准确描述您的要求，我可以为您提供一个教程。

# javascript - 如何以特定间隔将字符串拆分为Javascript中的数组

> ID：11373095
> 
> 赞同：0
> 
> 时间：2012-07-07T07:19:53.620
> 
> 标签：javascript, string, split

如何以特定间隔将字符串拆分为Javascript中的数组？

例如：将此字符串拆分为4个字符（包括空格和字符）

`this is an example should be split,numbers(123),space,characters also included`

至

```
this ------> 1st array
 is  ------> 2nd array
 an  ------> 3rd array
exam ------> 4th array
ple  ------> 5th array
shou ------> 6th array     ............ etc till.....
..ed ------> last array 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T09:11:36.167

这是一个函数，可以将你的字符串分割成你想要的任何大小的块：

```
function splitN(s, n) {
    var output = [];
    for (var i = 0; i < s.length; i+=4) {
        output.push(s.substr(i, 4));
    }
    return(output);
} 
```

你可以在这里看到它的工作：http: [//jsfiddle.net/jfriend00/JvabJ/](http://jsfiddle.net/jfriend00/JvabJ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T07:28:03.857

尝试这个：

```
 var foo = "this is an example should be split,numbers(123),space,characters also included"; 
    var arr = [];
    for (var i = 0; i < foo.length; i++) {
        if (i % 4 == 0 && i != 0)
            arr.push(foo.substring(i - 4, i));
        if (i == foo.length - 1)
            arr.push(foo.substring(i - (i % 4), i+1));          
    }
    document.write(arr);
    console.log(arr); 
```

# javascript - 用 casperjs 伪造 xmlhttprequests

> ID：11373097
> 
> 赞同：4
> 
> 时间：2012-07-07T07:20:06.553
> 
> 标签：javascript, testing, mocking, sinon, casperjs

我正在用 casperjs 编写端到端测试，并想伪造 ajax 服务器响应

我想出了一个想法，即包含一个模拟 xmlhttprequest 对象并始终返回我预期结果的简单脚本，如下所示

```
var ajax_requests = [
    ['GET', '/jobs', JSON.stringify(jobs)]
], stubs = stubs || {};

function setup_ajax(){
    stubs.server = sinon.fakeServer.create();
    _.each(ajax_requests, function(r){ 
        //r[1] = "http://localhost:8000" + r[1]
        r[2] = [200, { "Content-Type": "application/json" }, r[2]]
        stubs.server.respondWith.apply(stubs.server, r)
    })
    stubs.server.autoRespond = true;
    stubs.server.autoRespondAfter = 2;
} 
```

然后我打电话给`setup_ajax`我的 casper 测试

```
casper.then(function(){
    this.evaluate(setup_ajax)
} 
```

但看似未来的 ajax 请求仍然避免我的 xmlhttprequest 实现。

我试过运行 setup_ajax，使用 $.ready() 并从 casper 调用它，但这些都不起作用

更有趣的是，检查对象的存在奇怪地失败了。

```
function setup_ajax(){
    return typeof(sinon)
}

casper.then(function(){
    var x = this.evaluate(setup_ajax)
    casper.log(x) // logs 'null'
} 
```

但是 sinon 是正确包含的，至少当我在 setup_ajax 函数之外对其进行一些调用时，casper 没有导致任何错误，但是当我故意排除 sinon 时会导致错误。

您对在 casperjs 下模拟 xmlhttprequests 有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T18:19:46.933

您可以使用[sinon.js](http://sinonjs.org/)来伪造 XmlHttpRequest。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-13T09:20:38.200

[PhantomXHR](https://github.com/Huddle/PhantomXHR)为 casperjs 包装了 SinonJS 的 XHR 模拟。

首先你需要初始化 PhantomXHR：

```
var xhr = require('phantomxhr');
casper.on('page.initialized', function () {
    xhr.init(casper.page, {
        libraryRoot: '/path/to/node_modules/phantomxhr/'
    });
}); 
```

你可以伪造 XHR 请求：

```
var fake = xhr.fake({
    url: '/jobs',
    responseBody: jobs
}); 
```

在评估页面之前，请注意等待 XHR 请求完成。您可以通过查找来检查请求是否完成

```
fake.count() === 1 
```

# c++ - 如何确保 Singleton 不会过早销毁？

> ID：11373100
> 
> 赞同：2
> 
> 时间：2012-07-07T07:20:29.783
> 
> 标签：c++, memory-management, singleton, stack, destructor

在我的项目中，我使用了大约 4 个按照 Scott Meyer 的方式制作的单身人士。其中之一：

```
LevelRenderer& LevelRenderer::Instance()
{
    static LevelRenderer obj;
    return obj;
} 
```

现在是其中的两个 Singleton，`LevelRenderer`并`LevelSymbolTable`相互交互。例如，在这个方法中：

```
void LevelRenderer::Parse(std::vector<std::string>& lineSet)
{
    LevelSymbolTable& table = LevelSymbolTable::Instance();

    /** removed code which was irrelevant **/

    // for each line in lineSet
    BOOST_FOREACH(std::string line, lineSet)
    {
        // for each character in the line
        BOOST_FOREACH(char sym, line)
        {

            /** code... **/

            // otherwise
            else
            {
                sf::Sprite spr;

                // Used LevelSymbolTable's Instance here...
                table.GenerateSpriteFromSymbol(spr, sym);
                // ^ Inside LevelRenderer

                /** irrelevant code... **/
            }
        }
    }
} 
```

现在，虽然问题还没有出现。我害怕的是，如果实例在我调用*之前*`LevelSymbolTable`已经被销毁了怎么办？*`GenerateSpriteFromSymbol`*

 *由于我使用的是 Scott Meyer 方式，Singleton 的实例是由堆栈分配的。因此保证使用*最后创建的第一个销毁*规则被销毁。现在如果`LevelSymbolTable`' 的 Instance 是*在 ' 的 Instance 之后* `LevelRenderer`创建的，它会在 ' 的 Instance*之前* `LevelRenderer`被销毁，对吧？那么，如果我调用`LevelSymbolTable`inside的方法`LevelRenderer`（尤其是在`LevelRenderer`'s 的析构函数中），我将踏上未定义的行为领域。

正如我之前所说，这个问题在调试时实际上并没有发生，纯粹是我的假设和猜测。那么，我的结论正确吗？很`LevelSymbolTable`容易被销毁之前`LevelRenderer`。如果是这样，有没有办法摆脱这种混乱？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T07:34:43.483

您不必担心这里的任何事情。* static 关键字保证它从初始化到程序退出时都可用。因此，您可以在初始化后随时调用静态变量。

此外，您有对 LevelSymbolTable 的引用，而不是局部变量。这就是类名后面的 & 符号的含义。所以你可以在本地使用它，但它实际上是“引用”存在于其他地方的真实对象。因此，当方法退出时，引用将超出范围，但它引用的对象不会。

*好吧，您可能需要担心一件事。在析构函数中，您应该只清理任何内存或文件引用或其他您可以处理的性质的东西。我不知道你为什么要在析构函数中调用其他对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T08:08:56.167

定义对象之间的所有权关系。要么有`LevelSymbolTable`作为成员`LevelRenderer`：

```
class LevelRenderer {
    LevelSymbolTable symbolTable;
public:
    static LevelRenderer& getInstance();
    ~LevelRenderer() { /* can use symbolTable here */ }
}; 
```

或者创建一个`Level`包含`SymbolTable`and的单例`Renderer`：

```
class Level {
    SymbolTable symbolTable;
    Renderer levelRenderer;   // note the order here
public:
    static Level& getInstance();

private:
    /* have LeverRenderer save reference to symbol table,
       now renderer can use symbol table anywhere */
    Level() : levelRenderer(symbolTable)
    { /* ... */ }
}; 
```

编辑：或者一起摆脱单身人士。看看[为什么单身人士不好](https://stackoverflow.com/questions/137975/what-is-so-bad-about-singletons)。我不知道你的应用程序的结构，但据我所知，你可以拥有`Level`一个普通的类，它知道如何呈现自己并拥有它的符号表。并将其生命周期连接到它应该在应用程序中表示的级别。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T07:41:21.887

静态实例将在程序开始时（在 main 之前）创建并在最后（在 main 之后）清理，您不能依赖任何特定的清理顺序。也就是说，如果您有两个实例（为简单起见，我们将它们设为全局）

```
class one {
  one() {}
  ~one() {}
};

class two {
  two() {}
  ~two() {}
};

one the_one;
two the_other;

int main() {
  ...
  return 0;
} 
```

您不能也不应该假设`the_one`在`the_other`. （反之亦然。）

但是，您可以依赖它们在任何其他成员函数中以及在 main 本身中都处于活动状态。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-07T07:43:23.993

您在问题中提出的情况不太可能发生，因为`Parse`可能在程序仍处于活动状态时被调用。只有当程序即将退出时，才会调用析构函数。

在您的评论中，您指出了一个稍微不同的担忧，即*global destructor interdependency*。如果您有将自己注册到某个全局容器的全局对象，这实际上可能会发生。您可能期望对象会从容器中移除自己，并且容器会弹出对象。

处理此问题的一种方法是允许容器获取向其注册的对象的所有权。这意味着在全局容器中注册的是动态分配的实例，而不是 Scott Meyer 的单例实例。然后，全局容器将负责在调用其全局析构函数时清理已注册的项目。*

# java - 如何在 Java 中的按钮中设置单键助记符？

> ID：11373101
> 
> 赞同：10
> 
> 时间：2012-07-07T07:20:29.897
> 
> 标签：java, swing, jbutton, key-bindings

我正在做一个项目，我想在按钮上设置助记符。但问题是助记符适用于配对键示例（`Alt`+ `F`）等。但我希望它是单键。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-07T07:28:48.057

*   看看 KeyBindings，

*   然后您可以将任何键附加到 JButton

这是一个帮助您的示例代码，只需按下`C`键盘：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.Action;

public class ButtonExample
{
    private JFrame frame;
    private JButton button;

    private void displayGUI()
    {
        frame = new JFrame("Button Mnemonic Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel contentPane = new JPanel();      
        Action buttonAction = new ButtonAction("CLICK ME"
                                , "This is a Click Me JButton");
        button = new JButton(buttonAction);                                             
        button.getInputMap().put(KeyStroke.getKeyStroke('c'), "Click Me Button");
        button.getActionMap().put("Click Me Button", buttonAction);

        contentPane.add(button);
        frame.setContentPane(contentPane);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    class ButtonAction extends AbstractAction
    {
        public ButtonAction(String text, String desc)
        {
            super(text);
            putValue(SHORT_DESCRIPTION, desc);
        }

        @Override
        public void actionPerformed(ActionEvent ae)
        {
            JOptionPane.showMessageDialog(frame, "BINGO, you SAW me.");
        }
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new ButtonExample().displayGUI();
            }
        });
    }
} 
```

# javascript - 在鼠标指针下获取单词

> ID：11373103
> 
> 赞同：1
> 
> 时间：2012-07-07T07:20:59.390
> 
> 标签：javascript, html, ajax, browser

根据这个（[使用 JavaScript 获取光标下的单词](https://stackoverflow.com/questions/2444430/how-to-get-a-word-under-cursor-using-javascript)）链接我可以在鼠标指针下获取单词。这对英语来说很好。我改变它（阿拉伯语）

```
<p>سلام به همه</p>
Word: <span id="word"></span>

<script type="text/javascript">
    $(function() {
        // wrap words in spans
        $('p').each(function() {
            var $this = $(this);
            $this.html($this.text().replace(/[^\x00-\x80]+/g, "<span>$1</span>"));
        });

        // bind to each span
        $('p span').hover(
            function() { $('#word').text($(this).css('background-color','#ffff66').text()); },
            function() { $('#word').text(''); $(this).css('background-color',''); }
        );
    }); 
```

但它为每个单词返回 '$1'。请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T07:31:28.883

您*需要*出现在原始正则表达式中的括号。在正则表达式表示法中，括号形成一个“匹配组”，用于`$1`替换替换字符串中的“”。

```
$this.html($this.text().replace(/([^\x00-\x80]+)/g, "<span>$1</span>")); 
```

如果您的正则表达式中没有任何匹配组，则`$1`简单地将其视为文字美元符号和一个。

当您有多个带括号的匹配组时，这些组用于按照匹配组打开的顺序替换以美元符号表示的编号占位符（第一个匹配组替换`$1`，第二个替换`$2`等）。

# rabbitmq - 如何使用rabbitmq作为分布式任务队列？

> ID：11373105
> 
> 赞同：2
> 
> 时间：2012-07-07T07:21:43.960
> 
> 标签：rabbitmq

据我所知，rabbitmq 是一个 HA 消息队列。可以将其用作任务队列。一些要求：

1.  负载均衡应该考虑worker节点空闲资源
2.  应该动态添加/删除工作线程
3.  工作节点热插拔
4.  可以动态设置路由。

由于 rabbitmq 消费者可以获取消息并定义回调函数来处理消息。很有可能做到这一点。但我不知道如何灵活、动态地使用它。

你能举一些例子或想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-19T09:43:28.940

在 RabbitMQ 中，如果多个消费者绑定到一个队列，则消息将以循环方式进行负载平衡。

为了更好地理解，您可以阅读这篇文章。

[https://techietweak.wordpress.com/2015/08/14/rabbitmq-a-cloud-based-message-orientation-middleware/](https://techietweak.wordpress.com/2015/08/14/rabbitmq-a-cloud-based-message-oriented-middleware/)

谢谢， Saravanan S.

# jquery - jQuery 表单验证在 Django 中不起作用

> ID：11373115
> 
> 赞同：0
> 
> 时间：2012-07-07T07:22:40.800
> 
> 标签：jquery, django, twitter-bootstrap, validation

我的 Django 站点中有一个简单的 HTML 表单。

看到这个[http://tinypic.com/r/2ce57rb/6](http://tinypic.com/r/2ce57rb/6)

我想使用 jQuery 在客户端验证表单，但我不知道 jQuery 或 JavaScript。所以，我在这里下载了表单[http://alittlecode.com/files/jQuery-Validate-Demo/](http://alittlecode.com/files/jQuery-Validate-Demo/)

并将所有文件复制到正确的位置，代码是相同的，除了一些小的修改，如名称等。我知道它们在正确的位置，因为我可以从源代码中看到它们并且我正在使用 twitter 引导程序。

问题是我提交后没有进行验证。

点击提交后地址栏是这样的
`http://127.0.0.1:8000/contact/?name=&email=&subject=&message=`

请帮助我尝试了许多插件等。它们都不起作用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T13:28:03.407

我猜你的 bootstrap/docs/assets/js/script.js 不正确或者没有准备好执行。可能是冲突，您使用 dojo、mootools 还是其他？尝试用 jQuery var 替换表单验证插件所涉及的 $ ：

$(document).ready(function() --> jQuery(document).ready(function()

$('#contact-form').validate --> jQuery('#contact-form').validate

# jquery - 如果找到行跨度，则删除下一行单元格

> ID：11373116
> 
> 赞同：-1
> 
> 时间：2012-07-07T07:22:52.223
> 
> 标签：jquery, html, css

如果 td 具有 csstdgreen 并且具有属性行跨度，我必须在每个 tr 中遍历表。我必须删除单元格有文本删除我。

```
 function clearTable()
     {
        if ($("tr").has("td.csstdgreen").length > 0)
        {
            if ($('td[rowSpan]') == 1 || $('td[rowSpan]') == 2 || $('td[rowSpan]') == 3)
            {
                var $this = $(this);
                var i = $this.index();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T08:51:02.413

```
$('table tr').each(function(){

    var indexofThis,indexofColSpan,numRows;
    if($('td[rowspan]',this).length!=0)
    {
            indexofThis =$('table tr').index(this);
            indexofColSpan = $('td',this).index($('td[rowspan]',this));
            numRows = $('td[rowspan]',this).attr('rowspan');

            $('table tr:gt('+indexofThis+')').each(function(){
            $('td:eq('+indexofColSpan+')',this).remove();
});
    }
});
​ 
```

这应该可以帮助您获得所需的东西。JS fiddle 不适用于我的 atm。需要做一些修改，因为它不做行数，所以它会做整个网格。但这是完成的主要部分。

# java - 如何最好地为缓存实现获取 List 节点

> ID：11373121
> 
> 赞同：0
> 
> 时间：2012-07-07T07:23:29.567
> 
> 标签：java, caching

好的，首先我会以“我对 Java 非常陌生”（即几天后）作为开头，但我是一名程序员。

我遇到了要加载数据的情况。但是，我想缓存该数据以防止对 API 的无关调用（或者，无论数据源是什么）。经过一番思考，我想出了一个对我来说似乎很合理的缓存方案：这个想法是 DataCache 类有两个集合：一个哈希表，键类型为“字符串”，值类型为“CacheData” ”。CacheData 有 2 个数据成员 - 以字符串形式调用 api 的实际结果，以及指向链表节点的 ref (ListIterator?)。这将我们带到了第二个集合 - 键的链接列表。这个想法是，当请求数据时，我们会查看它是否在哈希中。如果没有，我们从 API 中获取，将结果键添加到链表的前面，并在包含结果的散列中存储一个 Data 对象，以及指向链表第一个节点（我们刚刚添加的那个）的引用。如果在哈希中找到数据，我们将节点从链表中取出，放在最前面，然后从 CacheData 返回数据。好处是，如果我理解正确，每个操作都保证在 O(1) 中执行。

我可以将“请求”的整数哈希值存储在链表中而不是整个字符串（请求）中吗？如果是这样，给定该整数，我如何访问哈希图中的结果？（这些方法似乎都没有将“int”作为参数）。另外...我对这种情况的处理方法是否合理？或者在 Java 中是否有一些东西可以让这更容易？

# python - 在 Python 中存储三角形/六边形网格的最佳方法

> ID：11373122
> 
> 赞同：9
> 
> 时间：2012-07-07T07:23:32.747
> 
> 标签：python, dictionary, hexagonal-tiles

我正在用六边形瓷砖制作游戏，并决定使用三角形/六边形网格。我发现[这个](https://stackoverflow.com/questions/2049196/generating-triangular-hexagonal-coordinates-xyz)问题帮助我生成坐标，并稍微修改了代码以将所有坐标作为键存储在字典中，其值为“。” （地板）或“X”（墙），并包含一个函数，该函数打印出地图的字符串表示形式，其中每个非空白字符代表一个六边形瓷砖。这是新代码：

```
deltas = [[1,0,-1],[0,1,-1],[-1,1,0],[-1,0,1],[0,-1,1],[1,-1,0]]
class HexGrid():
    def __init__(self, radius):
        self.radius = radius
        self.tiles = {(0, 0, 0): "X"}
        for r in range(radius):
            a = 0
            b = -r
            c = +r
            for j in range(6):
                num_of_hexas_in_edge = r
                for i in range(num_of_hexas_in_edge):
                    a = a+deltas[j][0]
                    b = b+deltas[j][1]
                    c = c+deltas[j][2]           
                    self.tiles[a,b,c] = "X"

    def show(self):
        l = []
        for y in range(20):
            l.append([])
            for x in range(60):
                l[y].append(".")
        for (a,b,c), tile in self.tiles.iteritems():
            l[self.radius-1-b][a-c+(2*(self.radius-1))] = self.tiles[a,b,c]
        mapString = ""
        for y in range(len(l)):
            for x in range(len(l[y])):
                mapString += l[y][x]
            mapString += "\n"
        print(mapString) 
```

使用此代码，我可以生成半径内的所有坐标，如下所示：

```
import hexgrid
hg = hexgrid.HexGrid(radius) 
```

并访问这样的坐标：

```
hg.tiles[a,b,c] 
```

现在这似乎工作正常，但我确信以这种方式存储地图一定有一些缺点。如果有任何缺点，您能否指出它们，并提出更好的存储地图的方法？非常感谢您的时间。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-07T08:41:56.503

使用数组进行存储可能会节省一些 CPU 时间，但差异可能可以忽略不计。

但是，您错过了管理此类地图的一种非常简单的方法。将其视为行和列，只是单元格的形状略有不同。

```
+--+--+--+--+--+--+--+
 \/ \/ \/ \/ \/ \/ \/    Even row

  /\ /\ /\ /\ /\ /\ /\   Odd row
 +--+--+--+--+--+--+--+ 
```

或者对于六边形：

```
 __    __    __    __
 /  \__/  \__/  \__/  \__ Even row
 \__/  \__/ A\__/  \__/   Odd  row
 /  \__/ F\__/ B\__/  \__ Even row
 \__/  \__/ X\__/  \__/   Odd  row
 /  \__/ E\__/ C\__/  \__ Even row
 \__/  \__/ D\__/  \__/   Odd  row
 /  \__/  \__/  \__/  \__ Even row
 \__/  \__/  \__/  \__/   Odd  row 
```

然后，您可以将数据存储为常规二维数组。奇数行向右偏移 0.5，您需要计算`X`: above: `A = (0,-2)`、up right: `B = (1,-1)`、bottom right: `C = (1,1)`、 below: `D = (0,2),`bottom left: `E = (0,1)`、top left: 的邻接步骤：`F = (0,-1)`

如果您可以浪费一点内存，您也可以将其他每一列都留空，这样邻域关系就会变得更简单：`(0,-2), (1,-1), (1,-1), (0,-2), (-1,-1), (-1,1)`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-02-02T22:46:12.007

我也做了一些研究，并找到了一种更简单的方法来做到这一点。你不必变得像你一样复杂！该表可以是一个简单的数组数组，没有任何特殊规则。

您想使用六角根坐标系。请参阅此处的理论：[https](https://en.wikipedia.org/wiki/Root_system) ://en.wikipedia.org/wiki/Root_system 。还有[https://www.redblobgames.com/grids/hexagons/](https://www.redblobgames.com/grids/hexagons/)

单元格 (0,0) 位于结构的中心，因此它有六个邻居：如众所周知的正交表 (1,0)、(0,1)、(-1,0)、(0 ,-1) 还有 (1,1) , (-1-1)。其他单元格同样有六个邻居，不需要取模！

这里有一些 Ascii 艺术以便更好地理解：

```
 _____       _____      ____      __
  / -2,2\_____/ 0,1 \____/2,0 \____/  \__ 
  \_____/-1,1 \_____/ 1,0\____/3,-1\__/   
  /-2,1 \_____/0,0  \____/2,-1\____/  \__     
  \_____/-1,0 \_____/1,-1\____/3,-2\__/   
  /-2,0 \_____/ 0,-1\____/2,-2\____/  \__ 
  \_____/     \_____/    \____/    \__/ 
```

您可以计算平面中每个单元格中心的位置（以及屏幕中的位置），因为它遵循矢量几何规则。向量的坐标是 60° 而不是 90°：a=(0,1) 但 b=(0,87,0.5)，只需将这些坐标相乘并相加！

您可能想要使用 python 库[Hexy](https://github.com/RedFT/Hexy)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T08:20:33.463

不要使用 hg.tiles[a,b,c]。

通过这种方式使磁贴成为一个三维列表， `hg.tiles = [[[z for z in range(10)] for y in range(10)] for x in range(10)]` 现在您可以使用`hg.tiles[a][b][c]`

PS：其他作业`a = a+deltas[j][0]`应该`a += deltas[j][0]`以此类推

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-23T00:00:47.707

也许存储十六进制的最佳方式是在 python 列表或元组中；然后挑战变成如何从您的列表中检索特定的十六进制。在 python 中，一个很好的方法是构建一个十六进制坐标字典作为键，列表索引（或十六进制对象）作为值。假设您的十六进制列表不需要更改，则列表可以在完成后转换为元组。如果您将十六进制对象作为值保存在字典中，则可以完全放弃保存列表；字典直接将十六进制坐标映射到对象。

您的代码已经生成了一系列十六进制坐标，只需将它们保存在列表中并同时构建您的参考字典。此外，如果您正在编写一个类来管理您的游戏板，则存储和检索的所有细节都可以隐藏在该类中。

一些代码：

```
radius = 4
deltas = [[1,0,-1],[0,1,-1],[-1,1,0],[-1,0,1],[0,-1,1],[1,-1,0]]

hexes = []
indices = {}
index = 0

for r in range(radius):
    print("radius %d" % r)
    x = 0
    y = -r
    z = +r

    hexes.append((x,y,z))
    indices[(x,y,z)] = index   # Or store objects here
    index += 1
    print(x,y,z)

    for j in range(6):
        if j==5:
            num_of_hexes_in_edge = r-1
        else:
            num_of_hexes_in_edge = r
        for i in range(num_of_hexes_in_edge):
            x = x+deltas[j][0]
            y = y+deltas[j][1]
            z = z+deltas[j][2]

            hexes.append((x,y,z))
            indices[(x,y,z)] = index   # Or store objects here
            index += 1
            print(x,y,z)

hexes = tuple(hexes)
print(hexes)
print(indices) 
```

# spring - Error creating sessionFactory

> ID：11373124
> 
> 赞同：5
> 
> 时间：2012-07-07T07:23:48.430
> 
> 标签：spring, hibernate, maven, spring-mvc

When I have started my Spring MVC project I have got exception below:

```
javax.servlet.ServletException: Servlet.init() for servlet appServlet threw exception 
```

And the most important thing is the root cause:

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name
'sessionFactory' defined in ServletContext resource [/WEB-INF/spring/appServlet/servlet-context.xml]: 
Invocation of init method failed; nested exception is java.lang.NoClassDefFoundError:     
org/hibernate/cfg/EJB3DTDEntityResolver 
```

I have looked up this class: [http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/cfg/EJB3DTDEntityResolver.html](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/cfg/EJB3DTDEntityResolver.html) and here [http://search.maven.org/#search%7Cga%7C1%7Cfc%3Aorg.hibernate.cfg.EJB3DTDEntityResolver](http://search.maven.org/#search%7Cga%7C1%7Cfc%3Aorg.hibernate.cfg.EJB3DTDEntityResolver) And I have found out that it is part of hibernate-annotations. But I have some Hibernate dependecies in my `POM.xml` file:

```
 <!-- Hibernate -->
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>4.1.4.Final</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-annotations</artifactId>
        <version>3.5.6-Final</version>
    </dependency>       
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-validator</artifactId>
        <version>4.3.0.Final</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate.common</groupId>
        <artifactId>hibernate-commons-annotations</artifactId>
        <version>4.0.1.Final</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-envers</artifactId>
        <version>4.1.4.Final</version>
    </dependency> 
```

I don't know what's wrong with my project. In general this exception have occured when I have declared this in my Servlet Dispatcher:

```
<!-- Hibernate session factory -->      
<beans:bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">

    <beans:property name="dataSource">
        <beans:ref bean="dataSource" />
    </beans:property>

    <beans:property name="hibernateProperties">
        <beans:props>
            <beans:prop key="hibernate.dialect">org.hibernate.dialect.HSQLDialect</beans:prop>
            <beans:prop key="hibernate.show_sql">true</beans:prop>
        </beans:props>
    </beans:property>

    <beans:property name="annotatedClasses">
        <beans:list>
            <beans:value>hutter.pl.dao.Users</beans:value>                          
        </beans:list>
    </beans:property> 
</beans:bean>

<beans:bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <beans:property name="sessionFactory" ref="sessionFactory" />
</beans:bean>   
<!-- Hibernate session factory end --> 
```

Could you give me some advices?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-07T07:55:16.413

`hibernate-annotations` is part of `hibernate-core` [since 3.6](http://in.relation.to/Bloggers/HibernateCore360FinalRelease)

# java - 如何从 DirectoryPath 中获取 FolderName 和 FileName

> ID：11373130
> 
> 赞同：3
> 
> 时间：2012-07-07T07:25:32.037
> 
> 标签：java, file

我有 DirectoryPath:
`data/data/in.com.jotSmart/app_custom/folderName/FileName`
它作为字符串存储在`ArrayList`

像

```
ArrayList<String> a;
a.add("data/data/in.com.jotSmart/app_custom/page01/Note01.png"); 
```

现在，我想从这条路径获取`page01`一个单独的字符串和`Note01`一个单独的字符串，并将其存储到两个字符串变量中。我尝试了很多，但我无法得到结果。如果有人知道帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-07T07:31:39.007

[`f.getParent()`](http://docs.oracle.com/javase/1.6/docs/api/java/io/File.html#getParent%28%29)

> 返回此抽象路径名的父目录的路径名字符串，如果此路径名未命名父目录，则返回 null。

**例如**

```
 File f = new File("/home/jigar/Desktop/1.txt");

    System.out.println(f.getParent());// /home/jigar/Desktop
    System.out.println(f.getName());  //1.txt 
```

**更新：（**基于有问题的更新）

如果`data/data/in.com.jotSmart/app_custom/page01/Note01.png`是文件系统中文件的有效表示，则

```
for(String fileNameStr: filesList){
  File file = new File(fileNameStr);
  String dir = file.getParent().substring(file.getParent().lastIndexOf(File.separator) + 1);//page01
  String fileName = f.getName();
  if(fileName.indexOf(".")!=-1){
     fileName = fileName.substring(0,fileName.lastIndexOf("."));
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-11-30T17:17:01.723

对于文件夹名称：`file.getParentFile().getName()`.

对于文件名：`file.getName()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T07:31:33.480

用这个路径创建一个文件...然后使用这两种方法获取目录名和文件名。

```
file.getParent(); // dir name from starting till end like data/data....../page01
file.getName(); // file name like note01.png 
```

如果您需要目录名称为 page01，您可以从 getparent 获取路径的子字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T07:28:24.313

如何使用`.split`？

```
answer = str.split(delimiter); 
```

# jvm - WebSphere JVM MXBean

> ID：11373138
> 
> 赞同：0
> 
> 时间：2012-07-07T07:26:59.853
> 
> 标签：jvm, websphere, jmx

使用 Oracle JVM 时，我们可以使用提供的 MXBean（如 GarbageCollectorMXBean、MemoryMXBean 等）获取大量有用的 JVM 数据。对于 WebSphere JVM，是否可以使用相同的 MXBean？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T20:01:04.547

是的，它们在 WebSphere 上也可用，但远程访问它们有点棘手。我刚刚完成了一份文档，该文档解释了访问这些 MXBean 需要了解的内容：

[http://code.google.com/p/xm4was/wiki/WebSphereJmx](http://code.google.com/p/xm4was/wiki/WebSphereJmx)

XM4WAS 项目还提供了一些工具来简化此操作。以下文档描述了如何使用它们来设置 VisualVM 以监控 WebSphere JVM：

[http://code.google.com/p/xm4was/wiki/VisualVMHowTo](http://code.google.com/p/xm4was/wiki/VisualVMHowTo)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T12:52:26.347

是的，如果它是 java 1.5+。WAS 也有你应该研究的 PMI。

# c++ - C++ 类对象指针和访问成员函数

> ID：11373139
> 
> 赞同：16
> 
> 时间：2012-07-07T07:27:07.343
> 
> 标签：c++, class, object, pointers

我对 C++ 有点陌生，并尝试使用 Qt 来处理事情并遇到了这个令人困惑的事情：

各种教程的概念陈述如下：

```
Class *obj; 
```

`*obj`- 将显示存储在引用内存中的对象的值
`obj`- 将是它指向的内存地址

所以，我会做类似的事情

```
*obj=new Class(); 
```

但是如果我想访问一个函数，我必须这样做`obj->function1();` 而不是`*obj->function1();`

- 不知道为什么，因为普通对象 [ `normalObj.function1();`] 会起作用，因为这就是直接的价值。

那么，对于指针对象，为什么我们使用内存引用来访问函数，或者在普通对象的情况下，它总是引用

PS：有人可以指导我在 C++ 中使用指针的好教程，这样我的这些查询就可以直接在其中解决。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-07T08:19:42.323

该`*`符号用于定义指针和取消引用指针。例如，如果我想创建一个指向 int 的指针，我可以这样做：

`int *ptr;`

在此示例中， the`*`用于声明 this 是*指向 int*的指针。现在，当您不声明指针并且将`*`符号与已声明的指针一起使用时，那么您正在取消引用它。您可能知道，指针只是一个地址。当您取消引用指针时，您将获得该地址指向的值。例如：

```
int pointToMe = 5;
int *ptr = &pointToMe;
std::cout << *ptr; 
```

这将打印出 5。此外，如果您正在分配一个指向新地址的指针并且它不在声明中，则*不要*使用该`*`符号。所以：

```
int pointToMe = 5;
int *ptr;
ptr = &pointToMe; 
```

你会怎么做。您还可以尊重指针以将新值分配给地址指向的值。如：

```
int pointToMe = 5;
int *ptr = &pointToMe;
std::cout << *ptr; // Prints out 5
*ptr = 27;
std::cout << *ptr; // Prints out 27 
```

现在，`->`就像尊重符号一样。它将取消引用指针，然后像使用`.`非指针对象一样使用成员函数和变量。即使使用不是指针的对象，您也可以`->`通过首先获取地址来使用：

```
CObj object;
(&object)->MemberFunction(); 
```

这只是指针的简要概述，希望对您有所帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-07T08:18:47.330

您可以使用“正常”`.`来访问对象成员，但您必须先取消引用指针。

由于运算符优先级，这看起来像`(*obj).member`. 对于那些认为这写得太多的人来说，`obj->member`是一个更短的替代方案。

如果您有一个`c`类型为 的对象`Class`，`*c.ptr`则意味着取消引用一个`ptr`属于`Class`. 这是 的一个原因`(*obj).member`，这意味着其他东西。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-07T07:29:16.857

其实，你错了。你做：

```
obj=new Class(); 
```

或者

```
Class *obj = new Class; 
```

这是完全不同的。

```
Class *obj;
*obj = new Class; 
```

不会编译。

`obj`是 type `Class*`，所以这就是您可以分配给它的内容（以及`new Class`返回的内容）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-08-18T07:02:22.500

更准确地说，你可以这样做

```
Class  obj;
Class* obj_ptr;

obj_ptr = &obj;

// Now onwards you can use the pointer to access data members and function

obj_ptr->a = 10; // Like this 
```

# list - 将列表转换为元组

> ID：11373140
> 
> 赞同：0
> 
> 时间：2012-07-07T07:27:08.730
> 
> 标签：list, haskell, tuples, continuation-passing

我有几个命令行选项（例如 5 个），我想将它们转换为元组。问题是我希望它们以正确的顺序出现，因此可以使用模式匹配从列表轻松构建元组，但在现实生活中可以随机顺序提供选项，所以我不知道列表的头部是否包含详细选项或日志文件名？

我试图思考如何使用 continuation-passing 风格来做到这一点，但是我没有想到任何有用的东西。

那有可能吗？

我认为我可以“排序”列表以使其按预测顺序排列，但看起来并不好。

我也可以摆脱元组并创建数据记录——但这仍然会导致检查属性类型并设置记录的正确字段。打字还是很多的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T14:25:32.050

根据您的描述，我认为您有两种选择。在这两者中，我会说转换为字典是最简单的，但转换为元组会起作用，只是有点笨拙

所以，采用这个定义：

```
options :: [OptDescr (String, String)]
options = [Option ['a'] ["alpha"] (ReqArg (\a -> ("alpha", a)) "empty") "",
           Option ['b'] ["beta"] (ReqArg (\a -> ("beta", a)) "empty") "",
           Option ['g'] ["gamma"] (ReqArg (\a -> ("gamma", a)) "empty") ""]

main = do
    args <- getArgs
    let (opts, nonopts, errs) = getOpt Permute options args
    putStrLn $ show opts 
```

由此，我的几个示例输出是：

```
[("beta","b"),("alpha","a")]
[("alpha","a"),("gamma","g"),("beta","b")] 
```

等等。与命令行相同的顺序。但是，由于我在上面设置它的方式，我基本上有一个关联列表，所以......如果我特别想要一个具有值（alpha，beta，gamma）的元组，那么我最好的选择是......

```
(lookup "alpha" opts, lookup "beta" opts, lookup "gamma" opts) 
```

您生成的数据类型将是（Maybe String、Maybe String、Maybe String），按“alpha”、“beta”和“gamma”的顺序排列。

# uiimageview - 将 UILabel 文本放在类似工具提示的 UIImage 中

> ID：11373144
> 
> 赞同：0
> 
> 时间：2012-07-07T07:27:23.737
> 
> 标签：uiimageview, uiimage, uilabel

我一直在寻找各种将文本放在图像上的方法。我已经尝试过这样的事情[，](https://stackoverflow.com/questions/8497311/uiimageview-only-displays-when-i-call-initwithimage)但是它将标签与图像一起显示为单独的对象。

我希望该文本仅在图像上（类似于透明标签，仅其文本可见，但我不知道客观 C 是如何做到的）。

这是因为我说的图片是自定义工具提示，而文字是可变的，所以不能静态放在那里。

# python - 在 Python 中绘制立方晶格

> ID：11373146
> 
> 赞同：1
> 
> 时间：2012-07-07T07:27:29.210
> 
> 标签：python, drawing

所以我想使用可视化包在 Python 中绘制一个简单的立方晶格。

我有一种简单的方法来制作具有相同颜色的小球体的格子，但我希望颜色交替：要制作 NaCl 格子，我需要一个颜色的球体被 6 个其他颜色的球体包围。

所以我这样做了：

```
from __future__ import division
from visual import sphere,color

L = 5
R = 0.3

even = []
odd = []

for i in range(-L,L+1):
    if i%2==0:
        even.append(i)
    else:
        odd.append(i)

for i in even:
    for j in even:
        for k in even:
            sphere(pos=[i,j+1,k+1],radius=R,color=color.green)

for i in odd:
    for j in odd:
        for k in odd:
            sphere(pos=[i,j,k],radius=R,color=color.yellow) 
```

我在不同颜色的球体旁边得到一种颜色的球体，但它们是成排的：

![格子](../Images/ee88a1a9bfb154eab64c0525847e5039.png)

但我需要他们交替 :\ 正确的位置只在 i 方向。我如何纠正其他人以制作简单的立方晶格？我尝试摆弄球体的位置（i,j,k+-number），但这样我得到了 bcc 格子（中间有一个绿色球体，周围有其他球体）。

我被困住了...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T11:48:12.830

你需要的是这样的：

```
from visual import sphere,color

count = 3
R=0.3

for x in range(-count,count+1):
    for y in range(-count,count+1):
        for z in range(-count,count+1):
            if ((x+y+z+3*count)%2) == 0:
                sphere(pos=[x,y,z],radius=R,color=color.green)
            else:
                sphere(pos=[x,y,z],radius=R,color=color.yellow) 
```

关键是，您应该根据（积分，在这种情况下）坐标的总和是否可被 2 整除来切换颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T19:29:42.773

稍微概括的版本：

```
from visual import sphere,color
from itertools import product

L = 2
R = 0.25

xvals = range(-L, L+1)
yvals = range(-L, L+1)
zvals = range(-L, L+1)

colorfn = lambda *args: [color.yellow, color.green][sum(args)%2]

for pos in product(xvals, yvals, zvals):
    sphere(pos=pos, radius=R, color=colorfn(*pos)) 
```

结果是

![在此处输入图像描述](../Images/c8badef4a62a4b1a48f30bc0fd4a3cc8.png)

# css - 如何以不填满页面的 div 的全尺寸设置背景图像

> ID：11373153
> 
> 赞同：0
> 
> 时间：2012-07-07T07:28:24.823
> 
> 标签：css, html, background-image, image

我需要将图像放在 div 的背景中，位于它的中心位置，例如： ![例子](../Images/5e0d60fc7be909919ed8f3218ff2ffc2.png)

我试过的是：

```
<div id="container">
    ...
</div
<div id="background">
    <img src="images/bg.png"/>
</div> 
```

用这个CSS：

```
div#container {
    margin: 0 auto;
    width: 52em;
}
div#bg img {
    z-index: -999;
    width: 100%;
    height: 100%;
    position: absolute;
    top: 22%;
} 
```

在我的浏览器中，我的屏幕尺寸为 22%，一切正常，但如果我在另一个屏幕上尝试不同尺寸的背景 img 不在 div 的中心。我能做些什么？有人能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T07:38:15.197

给

```
position:relative; 
```

在容器 div 中..它应该可以工作..背景 div(with `position:absolute;`) 应该是容器 div 的子级..那么只有你会得到 div 重叠属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T07:34:44.140

可以使用 css 如下：

```
#sample
{
    background:url(bg_apple_little.gif) no-repeat center center;
    height:200px;
    width:200px;
} 
```

＆你的 div 将使用 id="sample"。高度，宽度可以根据您的要求而变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T08:06:47.457

在css3中你可以使用`#container { background-size: auto; }`

# java - 如何将可滚动的 JPanel 保存为 jpeg 图像（而不是快照）

> ID：11373155
> 
> 赞同：0
> 
> 时间：2012-07-07T07:29:03.847
> 
> 标签：java, swing, awt, jpanel

如何将 a 存储`JPanel`为*jpeg*图像，我可以搜索的解决方案会拍摄显示的快照，这不会捕获所有内容，`JPanel`因为它的一部分是隐藏的。有没有办法在*jpeg*中获取整个图像。

[此处提供的此解决](https://stackoverflow.com/questions/11272938/how-to-save-panel-as-image-in-swing)方案根本无法正常工作

我目前用来拍摄 JPanel 快照的代码

```
if (panelx == null) {
            jButton3.setText("Generate Diagram");
        } else {
            jButton3.setText("Generate Diagram");
            jTextPane1
                    .setText(Messages.getString("statement2")); //$NON-NLS-1$
            JFrame win = (JFrame) SwingUtilities
                    .getWindowAncestor(panelx.panelx);
            Dimension size = win.getSize();
            // BufferedImage image = new BufferedImage(size.width, size.height,
            // BufferedImage.TYPE_INT_RGB);
            BufferedImage image = (BufferedImage) win.createImage(size.width,
                    size.height);
            Graphics g = image.getGraphics();
            win.paint(g);
            g.dispose();
            try {

                ImageIO.write(
                        image,
                        Messages.getString("Statement38"), new File(Messages.getString("statement5"))); //$NON-NLS-1$ //$NON-NLS-2$
            } catch (IOException e) {
                System.out.println("Image cannot be created");
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T11:25:23.630

你没有解释为什么这个例子不起作用。

你为什么使用窗口而不是面板？如果您使用的是示例答案，您应该参考滚动窗格中的面板。

您在整个 JFrame 上调用paint，而不仅仅是您感兴趣的面板。

# html - 一页网站 + AJAX + History.js + googlebot

> ID：11373157
> 
> 赞同：2
> 
> 时间：2012-07-07T07:29:14.563
> 
> 标签：html, ajax, cloaking

我正在构建一个具有以下结构的滑动单页网站：

```
<div id="wrapper">

  <div id="ajax_content">
    // AJAX action fires on document ready (jquery) and loads ALL pages in here
    // then I slide to the correct page-panel found via URL
  </div>

  <noscript>
    // Normal rendering of the SINGLE page that was requested by the url
  </noscript>

</div> 
```

我正在使用 History.js，所以我没有 hashbanged URL。到几个页面的所有（菜单）链接都只是具有JS`data-page`属性的普通链接。`return false`

**我希望谷歌单独索引所有页面。**

我面临的问题是，我发现的所有关于 ajaxed 网站的文档都表明 google 需要 hashbangs。因此，如果我的`href`标签中只有普通 URL，谷歌就不会执行任何 ajax 操作，对吗？

其他问题：谷歌会读取`<noscript>`标签。但是由于 noscript 的内容与显示给用户的内容不同，谷歌会认为这种方法是伪装的吗？

谷歌声明：

> 确保在两个元素中提供相同的内容（例如，在 JavaScript 中提供与 noscript 标记中相同的文本）。在替代元素中包含显着不同的内容可能会导致 Google 对网站采取行动。

您如何看待这种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T15:43:16.553

> 因此，如果我的 href 标签中只有普通 URL，谷歌就不会执行任何 ajax 操作，对吗？

正确的。

> 但是由于 noscript 的内容与显示给用户的内容不同，谷歌会认为这种方法是伪装的吗？

不。伪装是故意向搜索引擎显示不同的内容，然后向您的用户显示，以操纵搜索结果。使用`<noscript>`它是很好的可用性，因为任何非 JavaScript 用户，包括一些关闭 JavaScript 的人，仍然可以使用您的网站。所以你正在做的是一件好事。

# jquery - jQuery ajaxSubmit() API 问题与 'iframe: true'

> ID：11373160
> 
> 赞同：0
> 
> 时间：2012-07-07T07:29:42.747
> 
> 标签：jquery, jquery-plugins, jquery-forms-plugin

我正在使用[jQuery Form Plugin](http://jquery.malsup.com/form/)进行 ajax 调用并将响应定位到 iFrame。

这是一段代码：

```
function getResponse(requestData) {
    $('#myForm').ajaxSubmit({
            type: "POST",
            url: "servlet/myServletPath",
            data: {requestData: requestData},
            timeout: 10000000,
            iframe: true
    }); 
```

}

这工作得很好，除了我的 servlet 找不到任何名为“requestData”的参数。当我删除'iframe：true'时，同样的开始工作。但我需要将我的回复发布到 iframe。

知道这里到底发生了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T08:15:01.517

如果成功，您将收到对成功函数的响应，因此请添加成功函数

```
 success: function (response) 
            {
                // Perform your process after succeeding 
                iframe: true                
            },
 error: function (xhr, status, error) {

                alert(error);
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T10:54:49.260

尝试使用 GET 而不是 POST。它对我来说很好。:)

# jquery - jquery如何调用全局函数

> ID：11373162
> 
> 赞同：2
> 
> 时间：2012-07-07T07:30:04.150
> 
> 标签：jquery

我已经创建了两个全局函数，现在我想在我的 HTML 页面中调用它们。我已经为全局函数制作了单独的文件并将它们调用到我们的 HTML 页面中，但我的代码似乎有问题

```
<script type="text/javascript">
(function ($) {
    jQuery.functionOne = function () {
        var text = "i am first"
    };
    jQuery.functionTwo = function (param) {
        var text = "i am second"
    };
})(jQuery);
$('.first').text().functionOne();
$('.second').text().functionTwo();
</script>

<body>
    <div class="first"></div>
    <div class="second"></div>
</body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T07:35:09.477

请试试这个：如果你在文本函数中调用这些函数，那么试试下面的代码：**演示** [http://jsfiddle.net/SMLTP/](http://jsfiddle.net/SMLTP/)或[http://jsfiddle.net/SMLTP/1/](http://jsfiddle.net/SMLTP/1/)

**根据您更新的代码**更新演示：http:** [//jsfiddle.net/SMLTP/8/](http://jsfiddle.net/SMLTP/8/)**

 **如果你热衷：[http ://api.jquery.com/text/](http://api.jquery.com/text/)

希望这会有所帮助，或者如果我错过了什么，请让我知道！`:)`

```
$('.first').text(function(){
    return functionOne();
});

$('.second').text(function(){
      return   functionTwo();
}); 
```

示例函数 =>

```
 $('.first').text(function(){
         return functionOne();
    });

function functionOne(){
    return "HULK is awesome";
}
​ 
```

**更新**

```
functionOne = function() {
    var text = "i am first"
    return text;
};

functionTwo = function() {
    var text = "i am second"
    return text
};

$('.first').text(function() {
    return functionOne();
});

$('.second').text(function() {
    return functionTwo();
}); 
```**

# iphone - 在 iPhone 中创建自定义 UITableView

> ID：11373169
> 
> 赞同：1
> 
> 时间：2012-07-07T07:31:25.483
> 
> 标签：iphone, uitableview

我们可以用水平和垂直对齐的 UITableView 单元格创建 UITableView

![在此处输入图像描述](../Images/d87491880bde1c7a21d29f6c36119133.png)

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T07:34:25.247

好吧，可以修改`UITableView`并添加包含多个视图的单元格行，这些视图设置为水平顺序，但这需要大量的自定义工作，在我看来太多了，你将失去使用 UITableView 的好处，

我在这里建议的是创建你的自定义视图，它有自定义的 DataSource 和 Delegate，并创建你自己的视图绘制逻辑，因为这是一个相当复杂的视图，它需要更多的工作来自定义你的表视图，而不是创建一个新的`UIView`子类

# validation - 黑莓日期验证器

> ID：11373174
> 
> 赞同：0
> 
> 时间：2012-07-07T07:31:46.183
> 
> 标签：validation, date, blackberry, blackberry-jde

有没有简单的方法来验证黑莓中的输入日期？我尝试了 RegEx，但没有成功。有没有人有验证方法。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T18:29:25.397

当您将日期作为部分字符串获取时，请使用 java.util.Calendar 类来构建 java.util.Date 实例。万一出现异常，输入的日期不正确。

在您的验证方法中拦截此异常并返回 false。

# matlab - k-means 聚类的不规则图，异常值去除

> ID：11373176
> 
> 赞同：8
> 
> 时间：2012-07-07T07:32:11.613
> 
> 标签：matlab, plot, data-mining, cluster-analysis, k-means

嗨，我正在尝试从 1999 年 darpa 数据集中对网络数据进行聚类。不幸的是，我并没有真正使用相同的技术和方法获得聚类数据，而不是与一些文献相比。

我的数据是这样的：

![Matlab 图1](../Images/a142d951b7d9b4a3631d79e3cae26908.png)

如您所见，它不是很集群。这是由于数据集中存在大量异常值（噪声）。我已经查看了一些异常值删除技术，但到目前为止我没有尝试过真正清理数据。我尝试过的方法之一：

```
%% When an outlier is considered to be more than three standard deviations away from the mean, determine the number of outliers in each column of the count matrix:

    mu = mean(data)
    sigma = std(data)
    [n,p] = size(data);
    % Create a matrix of mean values by replicating the mu vector for n rows
    MeanMat = repmat(mu,n,1);
    % Create a matrix of standard deviation values by replicating the sigma vector for n rows
    SigmaMat = repmat(sigma,n,1);
    % Create a matrix of zeros and ones, where ones indicate the location of outliers
    outliers = abs(data - MeanMat) > 3*SigmaMat;
    % Calculate the number of outliers in each column
    nout = sum(outliers) 
    % To remove an entire row of data containing the outlier
    data(any(outliers,2),:) = []; 
```

在第一次运行中，它从从完整数据集中选择的 1000 个标准化随机行中删除了 48 行。

这是我在数据上使用的完整脚本：

```
 %% load data
        %# read the list of features
        fid = fopen('kddcup.names','rt');
        C = textscan(fid, '%s %s', 'Delimiter',':', 'HeaderLines',1);
        fclose(fid);

        %# determine type of features
        C{2} = regexprep(C{2}, '.$','');              %# remove "." at the end
        attribNom = [ismember(C{2},'symbolic');true]; %# nominal features

        %# build format string used to read/parse the actual data
        frmt = cell(1,numel(C{1}));
        frmt( ismember(C{2},'continuous') ) = {'%f'}; %# numeric features: read as number
        frmt( ismember(C{2},'symbolic') ) = {'%s'};   %# nominal features: read as string
        frmt = [frmt{:}];
        frmt = [frmt '%s'];                           %# add the class attribute

        %# read dataset
        fid = fopen('kddcup.data_10_percent_corrected','rt');
        C = textscan(fid, frmt, 'Delimiter',',');
        fclose(fid);

        %# convert nominal attributes to numeric
        ind = find(attribNom);
        G = cell(numel(ind),1);
        for i=1:numel(ind)
            [C{ind(i)},G{i}] = grp2idx( C{ind(i)} );
        end

        %# all numeric dataset
        fulldata = cell2mat(C);

%% dimensionality reduction 
columns = 6
[U,S,V]=svds(fulldata,columns);

%% randomly select dataset
rows = 1000;
columns = 6;

%# pick random rows
indX = randperm( size(fulldata,1) );
indX = indX(1:rows)';

%# pick random columns
indY = indY(1:columns);

%# filter data
data = U(indX,indY);

% apply normalization method to every cell
maxData = max(max(data));
minData = min(min(data));
data = ((data-minData)./(maxData));

% output matching data
dataSample = fulldata(indX, :)

%% When an outlier is considered to be more than three standard deviations away from the mean, use the following syntax to determine the number of outliers in each column of the count matrix:

mu = mean(data)
sigma = std(data)
[n,p] = size(data);
% Create a matrix of mean values by replicating the mu vector for n rows
MeanMat = repmat(mu,n,1);
% Create a matrix of standard deviation values by replicating the sigma vector for n rows
SigmaMat = repmat(sigma,n,1);
% Create a matrix of zeros and ones, where ones indicate the location of outliers
outliers = abs(data - MeanMat) > 2.5*SigmaMat;
% Calculate the number of outliers in each column
nout = sum(outliers) 
% To remove an entire row of data containing the outlier
data(any(outliers,2),:) = [];

%% generate sample data
K = 6;
numObservarations = size(data, 1);
dimensions = 3;

%% cluster
opts = statset('MaxIter', 100, 'Display', 'iter');
[clustIDX, clusters, interClustSum, Dist] = kmeans(data, K, 'options',opts, ...
'distance','sqEuclidean', 'EmptyAction','singleton', 'replicates',3);

%% plot data+clusters
figure, hold on
scatter3(data(:,1),data(:,2),data(:,3), 5, clustIDX, 'filled')
scatter3(clusters(:,1),clusters(:,2),clusters(:,3), 100, (1:K)', 'filled')
hold off, xlabel('x'), ylabel('y'), zlabel('z')
grid on
view([90 0]);

%% plot clusters quality
figure
[silh,h] = silhouette(data, clustIDX);
avrgScore = mean(silh); 
```

这是与输出不同的两个集群：

![在此处输入图像描述](../Images/77f753f21608bdfe1b485bc543a87e62.png)

如您所见，数据看起来比原始数据更干净、更聚集。但是我仍然认为可以使用更好的方法。

例如观察整体聚类，我仍然有很多来自数据集的噪音（异常值）。可以在这里看到：

![在此处输入图像描述](../Images/a34869287fd13a36843880bd4f9b64d1.png)

我需要将异常行放入单独的数据集中以供以后分类（仅从聚类中删除）

这是 darpa 数据集的链接，请注意 10% 数据集的列数显着减少，大部分有 0 或 1 的列已被删除（42 列到 6 列）：

[http://kdd.ics.uci.edu/databases/kddcup99/kddcup99.html](http://kdd.ics.uci.edu/databases/kddcup99/kddcup99.html)

**编辑**

数据集中保存的列是：

```
src_bytes: continuous.

dst_bytes: continuous.

count: continuous.

srv_count: continuous.  

dst_host_count: continuous.

dst_host_srv_count: continuous. 
```

**重新编辑：**

根据与 Anony-Mousse 的讨论和他的回答，可能有一种方法可以使用 K-Medoids [http://en.wikipedia.org/wiki/K-medoids](http://en.wikipedia.org/wiki/K-medoids)减少聚类中的噪声。我希望我目前拥有的代码没有太大变化，但到目前为止我还不知道如何实现它来测试这是否会显着降低噪音。因此，只要有人可以向我展示一个工作示例，这将被接受为答案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-07T23:18:15.430

请注意，*不鼓励*使用此数据集：

该数据集有错误：[KDD Cup '99 数据集（网络入侵）被认为是有害的](http://www.kdnuggets.com/news/2007/n18/4i.html)

重新考虑使用不同的算法。k-means 并不真正适合混合类型的数据，其中许多属性是*离散*的，并且具有非常不同的尺度。K-means 需要能够计算*合理*的均值。对于二进制向量，“0.5”不是一个合理的平均值，它应该是 0 或 1。

另外，k-means 不太喜欢异常值。

绘图时，请确保等比例缩放它们，否则结果会看起来不正确。您的 X 轴长度约为 0.9，您的 y 轴只有 0.2 - 难怪它们看起来被压扁了。

总的来说，**也许数据集没有 k-means 风格的集群？**您绝对应该尝试基于密度的方法（因为这些方法*可以*处理异常值），例如 DBSCAN。但是从你添加的可视化来看，我会说它最多有 4-5 个集群，它们并不是很有趣。它们可能可以在某些维度上通过多个阈值来捕获。

![平行坐标](../Images/bd5af79604140be707ca82a04702c95b.png)

这是 z 归一化后数据集的可视化，在平行坐标中可视化，包含 5000 个样本。亮绿色是正常的。

您可以清楚地看到数据集的特殊属性。所有攻击在属性 3 和 4（count 和 srv_count）上明显不同，并且最集中在 dst_host_count 和 dst_host_srv_count。

我也在这个数据集上运行了 OPTICS。它发现了许多集群，其中大多数是酒红色的攻击模式。但它们并不是很有趣。如果你有 10 台不同的主机 ping-flooding，它们将形成 10 个集群。

![光学集群](../Images/708ffa8fbfddb3f828a9c3853b77eb6a.png)

您可以很好地看到[OPTICS](https://en.wikipedia.org/wiki/OPTICS_algorithm)成功地聚集了许多此类攻击。它错过了所有橙色的东西（也许如果我将 minpts 设置得更低，它会相当分散），但它甚至在葡萄酒色攻击中发现了*结构），将其分解为许多单独的事件。

要*真正*理解这个数据集，您应该**从特征提取开始**，例如将此类 ping 洪水连接尝试合并到一个*聚合事件中*。

另请注意，**这是一个不现实的场景**。

1.  攻击中有众所周知的模式，特别是*端口扫描*。这些最好用专门的端口扫描检测器检测，而不是*学习*。
2.  模拟的数据有很多完全没有意义的“攻击”模拟。例如90 年代的[Smurf 攻击](https://en.wikipedia.org/wiki/Smurf_attack)，占数据集的 50% 以上，Syn flood 占另外 20%；而正常流量<20%！
3.  对于这类攻击，有众所周知的签名。
4.  许多现代攻击（例如 SQL 注入）都使用通常的 HTTP 流量，并且不会在原始流量模式中显示异常。

只是**不要将此数据用于分类或异常值检测**。只是不要。

引用上面的 KDNuggets 链接：

> 因此，我们强烈建议
> 
> (1) 所有研究人员停止使用 KDD Cup '99 数据集，
> 
> (2) KDD Cup 和 UCI 网站在 KDD Cup '99 数据集网页上包含警告，通知研究人员该数据集存在已知问题，以及
> 
> (3) 会议和期刊的同行审稿人 ding 论文（甚至直接**拒绝**它们，这在网络安全社区中很常见），其结果仅来自 KDD Cup '99 数据集。

**这既不是*真实*的数据，也不是*现实的*数据。去拿点别的东西。**

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-12T10:57:27.467

首先要做的事情是：您在这里要求很多。供将来参考：尝试将您的问题分解为更小的部分，并发布几个问题。这会增加您获得答案的机会（并且不会花费您 400 声望！）。

幸运的是，我了解您的困境，并且喜欢这种问题！

除了这个数据集与 k-means 可能存在的问题之外，这个问题仍然足够通用，也适用于其他数据集（因此谷歌人最终会在这里寻找类似的东西），所以让我们继续解决这个问题。

我的建议是我们编辑这个答案，直到你得到相当满意的结果。

# 集群数

任何聚类问题的第 1 步：选择多少个聚类？我知道有几种方法可以用来选择适当数量的集群。有一个不错的[wiki 页面](http://en.wikipedia.org/wiki/Determining_the_number_of_clusters_in_a_data_set)，其中包含以下所有方法（以及更多方法）。

## 视力检查

这可能看起来很傻，但如果你有很好分离的数据，一个简单的图可以告诉你已经（大约）你需要多少个集群，只需查看。

优点：

*   快的
*   简单的
*   在相对较小的数据集中分离良好的集群上效果很好

缺点：

*   和肮脏的
*   需要用户交互
*   很容易错过较小的集群
*   使用这种方法很难处理具有不太好的分离集群或其中很多集群的数据
*   这都是相当主观的——下一个人可能会选择与你不同的金额。

## 剪影情节

如您的[其他问题](https://stackoverflow.com/questions/11384430/show-rows-on-clustered-kmeans-data)之一所示，`silhouettes`绘制图表将帮助您更好地决定数据中的正确聚类数量。

优点：

*   比较简单
*   通过使用统计措施减少主观性
*   表示选择质量的直观方式

缺点：

*   需要用户交互
*   在极限情况下，如果您采用与数据点一样多的集群，则轮廓图会告诉您这*是*最佳选择
*   它仍然是相当主观的，不是基于统计手段
*   计算成本可能很高

## 肘法

与轮廓图方法一样，您`kmeans`重复运行，每次使用大量集群，您会看到数据中的总方差中有多少是由这次`kmeans`运行选择的集群解释的。将有许多集群，其中解释方差的数量会突然增加很多，比之前选择的集群数量（“肘部”）要少得多。那么从统计上讲，肘部是集群数量的最佳选择。

优点：

*   无需用户交互——可以自动选择肘部
*   在统计上比上述任何一种方法都更可靠

缺点：

*   有点复杂
*   *仍然是*主观的，因为“肘部”的定义取决于主观选择的参数
*   计算成本可能很高

# 异常值

一旦您使用上述任何方法选择了集群的数量，就该进行异常值检测以查看集群的质量是否有所提高。

我将从使用肘部方法的两步迭代方法开始。在伪 Matlab 中：

```
data = your initial dataset
dataMod = your initial dataset

MAX = the number of clusters chosen by visual inspection

while (forever)

    for N = MAX-5 : MAX+5
        if (N < 1), continue, end
        perform k-means with N clusters on dataMod
        if (variance explained shows a jump)
            break
    end

    if (you are satisfied)
        break
    end

    for i = 1:N
        extract all points from cluster i 
        find the centroid (let k-means do that)
        calculate the standard deviation of distances to the centroid
        mark points further than 3 sigma as possible outliers
    end

    dataMod = data with marked points removed

end 
```

困难的部分显然是确定是否`you are satisfied`。这是算法有效性的关键。这部分的粗略结构

```
if (you are satisfied)
    break
end 
```

会是这样的

```
if (situation has improved)
    data = dataMod

elseif (situation is same or worse)
    dataMod = data
    break            
end 
```

当`situation has improved`异常值较少时，或者为 的所有选择解释的方差`N`优于`while`. 这也是要摆弄的东西。

无论如何，我不会称之为第一次尝试。如果有人在这里看到不完整、缺陷或漏洞，请发表评论或编辑。

# ruby - Ruby 产量新手问题

> ID：11373180
> 
> 赞同：1
> 
> 时间：2012-07-07T07:32:45.933
> 
> 标签：ruby, yield

我最近开始使用 Ruby，对此很陌生。我目前的目标是使用一个名为 retort 的 ruby​​ 模块，我的问题是我不理解如下所示的配置方法：

```
def configure
    config = Config.new
    yield config
    @@service = XMLRPC::Client.new2(config.url)
end 
```

配置类很简单，看起来像：

```
class Config
    attr_accessor :url
end 
```

我试图创建一个小例子来玩，以了解它应该如何工作：

```
class TestClass
  def test_method
     config = String.new
     yield config
     p config
  end
end

d = TestClass.new
d.test_method { 'test string' } 
```

当然它不会返回“测试字符串”而是一个空字符串。

感谢您的任何帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T07:42:10.357

你能更清楚什么让你感到困惑吗？这段代码对你有意义吗？

```
class TestClass
  def test_method
    config = yield
    p config
  end
end

d.test_method { "test string" } 
```

该`yield`语句调用该块。该块返回一个字符串，该字符串分配给`config`后面的变量，`test_method`然后打印。这是否使它更清楚？

在您的代码中，该行在`yield config`传入刚刚实例化的`Config`对象时调用块。例如：

```
def foo
  s = "a string"
  yield s
  p "In foo printing " + s
end

foo { |x| p "In block printing " + x } 
```

# selenium - 在scrapy中推迟部分scrape

> ID：11373181
> 
> 赞同：4
> 
> 时间：2012-07-07T07:33:02.767
> 
> 标签：selenium, web-scraping, twisted, scrapy

我有下面给出的解析方法，我使用 selenium 首先加载页面，访问无法直接从蜘蛛抓取访问的某些页面，将单个 url 收集到另一个从页面中提取项目的解析方法。问题是，这个解析方法会阻塞其他解析，直到所有页面都被访问。这会阻塞系统。我尝试添加一个睡眠，但这会一起停止引擎，而不仅仅是这个`parse`方法。

关于我如何优化这一点的任何指示，或者至少使睡眠工作以使其不会停止引擎？

```
def parse(self, response):
    '''Parse first page and extract page links'''

    item_link_xpath = "/html/body/form/div[@class='wrapper']//a[@title='View & Apply']"
    pagination_xpath = "//div[@class='pagination']/input"
    page_xpath = pagination_xpath + "[@value=%d]"

    display = Display(visible=0, size=(800, 600))
    display.start()

    browser = webdriver.Firefox()
    browser.get(response.url)
    log.msg('Loaded search results', level=log.DEBUG)

    page_no = 1
    while True:
        log.msg('Scraping page: %d'%page_no, level=log.DEBUG)
        for link in [item_link.get_attribute('href') for item_link in browser.find_elements_by_xpath(item_link_xpath)]:
            yield Request(link, callback=self.parse_item_page)
        page_no += 1
        log.msg('Using xpath: %s'%(page_xpath%page_no), level=log.DEBUG)
        page_element = browser.find_element_by_xpath(page_xpath%page_no)
        if not page_element or page_no > settings['PAGINATION_PAGES']:
            break
        page_element.click()
        if settings['PAGINATION_SLEEP_INTERVAL']:
            seconds = int(settings['PAGINATION_SLEEP_INTERVAL'])
            log.msg('Sleeping for %d'%seconds, level=log.DEBUG)
            time.sleep(seconds)
    log.msg('Scraped listing pages, closing browser.', level=log.DEBUG)
    browser.close()
    display.stop() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-27T00:06:07.743

[这](https://gist.github.com/dangra/2781744)可能会有所帮助：

```
# delayspider.py
from scrapy.spider import BaseSpider
from twisted.internet import reactor, defer
from scrapy.http import Request

DELAY = 5 # seconds

class MySpider(BaseSpider):

    name = 'wikipedia'
    max_concurrent_requests = 1

    start_urls = ['http://www.wikipedia.org']

    def parse(self, response):
        nextreq = Request('http://en.wikipedia.org')
        dfd = defer.Deferred()
        reactor.callLater(DELAY, dfd.callback, nextreq)
        return dfd 
```

输出：

```
$ scrapy runspider delayspider.py 
2012-05-24 11:01:54-0300 [scrapy] INFO: Scrapy 0.15.1 started (bot: scrapybot)
2012-05-24 11:01:54-0300 [scrapy] DEBUG: Enabled extensions: LogStats, TelnetConsole, CloseSpider, WebService, CoreStats, SpiderState
2012-05-24 11:01:54-0300 [scrapy] DEBUG: Enabled downloader middlewares: HttpAuthMiddleware, DownloadTimeoutMiddleware, UserAgentMiddleware, RetryMiddleware, DefaultHeadersMiddleware, RedirectMiddleware, CookiesMiddleware, HttpCompressionMiddleware, ChunkedTransferMiddleware, DownloaderStats
2012-05-24 11:01:54-0300 [scrapy] DEBUG: Enabled spider middlewares: HttpErrorMiddleware, OffsiteMiddleware, RefererMiddleware, UrlLengthMiddleware, DepthMiddleware
2012-05-24 11:01:54-0300 [scrapy] DEBUG: Enabled item pipelines: 
2012-05-24 11:01:54-0300 [wikipedia] INFO: Spider opened
2012-05-24 11:01:54-0300 [wikipedia] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)
2012-05-24 11:01:54-0300 [scrapy] DEBUG: Telnet console listening on 0.0.0.0:6023
2012-05-24 11:01:54-0300 [scrapy] DEBUG: Web service listening on 0.0.0.0:6080
2012-05-24 11:01:56-0300 [wikipedia] DEBUG: Crawled (200) <GET http://www.wikipedia.org> (referer: None)
2012-05-24 11:02:04-0300 [wikipedia] DEBUG: Redirecting (301) to <GET http://en.wikipedia.org/wiki/Main_Page> from <GET http://en.wikipedia.org>
2012-05-24 11:02:06-0300 [wikipedia] DEBUG: Crawled (200) <GET http://en.wikipedia.org/wiki/Main_Page> (referer: http://www.wikipedia.org)
2012-05-24 11:02:11-0300 [wikipedia] INFO: Closing spider (finished)
2012-05-24 11:02:11-0300 [wikipedia] INFO: Dumping spider stats:
    {'downloader/request_bytes': 745,
     'downloader/request_count': 3,
     'downloader/request_method_count/GET': 3,
     'downloader/response_bytes': 29304,
     'downloader/response_count': 3,
     'downloader/response_status_count/200': 2,
     'downloader/response_status_count/301': 1,
     'finish_reason': 'finished',
     'finish_time': datetime.datetime(2012, 5, 24, 14, 2, 11, 447498),
     'request_depth_max': 2,
     'scheduler/memory_enqueued': 3,
     'start_time': datetime.datetime(2012, 5, 24, 14, 1, 54, 408882)}
2012-05-24 11:02:11-0300 [wikipedia] INFO: Spider closed (finished)
2012-05-24 11:02:11-0300 [scrapy] INFO: Dumping global stats:
    {} 
```

它使用 Twisted 的 callLater 来休眠。

# php - PHP中的2行有什么区别？

> ID：11373182
> 
> 赞同：2
> 
> 时间：2012-07-07T07:33:32.247
> 
> 标签：php, jqgrid

我在 jqGrid 服务器端 PHP 示例中找到了下一行

```
$start = $limit*$page - $limit; // do not put $limit*($page - 1) 
```

有什么区别

```
$start = $limit*$page - $limit; 
```

和

```
$start = $limit*($page - 1); 
```

为什么作者不推荐第二种方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T07:49:20.170

从数学上讲，两个表达式应该产生相同的结果。
**实际上**，由于 CPU 中的浮点运算（假设我们不只考虑整数），这两个表达式的结果可能会有很大差异。

**示例：**
想象`$page`是一个非常大的数字。
在这种情况下，`1`表达式`$page - 1`将被分解（因为 1 比 小几个数量级`$page`），
表达式`$start = $limit*($page - 1);`将等价于`$start = $limit*$page;`
第一种方式，我们没有这样的问题，这就是为什么它被推荐.

**结论：**
从数学上讲，它没有区别。
实际上，CPU（浮点运算单元）只能处理有限的数量级，而较小的数字在与大数字结合时通常会被分解。

**编辑：** 一个例子值得 1000 字......
看看这个小提琴，看看两个*数学*上相同的表达式如何产生不同的结果：http:
[//jsfiddle.net/EyalAr/Z9BT5/](http://jsfiddle.net/EyalAr/Z9BT5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T07:53:15.337

我怀疑这是一个数值数学问题。假设`$page`是巨大的，如`6.02e231`. 然后

```
($page - 1) = 6.02e231 
```

（完全相同的浮点表示），因此

```
$limit*($page - 1) = $limit*$page 
```

从任何处理器的角度来看。相比

```
$limit*$page = [SOME HUGE VALUE]
$limit*$page - $limit = [SUBTRACTION OF TWO HUGE VALUES] 
```

这将产生*不同*的结果，比“减一”表示法更准确。

因此，尽管在完美的数学世界中，这两个符号是相等的，但在非完美的计算世界中，第一个比第二个更容易出现“灾难性取消”（wiki that）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T07:39:29.063

```
$start = $limit*$page - $limit; 
```

这将首先执行乘法运算，然后减去结果的限制

```
$start = $limit*($page - 1); 
```

这将首先将 $page 减去 1，然后与 $limit 相乘

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T07:43:46.250

就像在代数中一样，乘法按运算顺序发生在加法/减法之前。请参阅[PHP 的优先文档](http://www.php.net/manual/en/language.operators.precedence.php)。所以第一行做$limit * $page，然后减去limit，其实和`$page * ($limit-1)`.

我认为暗示这一点的原因是，在代数中，语句在数学上是相同的，但在编程中却不是（括号被视为操作顺序指标而不是数量表示）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-07T07:52:24.157

通常不建议使用第二种方法，因为在较旧的语言/编译器中，第二条语句会导致`-0`. 这`-0`会在计算中产生一些其他问题，因此，首选第一种方法。

您可以在此处看到上述内容：[PHP 中的代码（未`-0`观察到）](http://codepad.org/rD7ztA2Y)和[Lua 中的代码（`-0`在输出中观察）](http://codepad.org/DGj10TK1)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-07T07:57:42.860

老实说，我不明白为什么不推荐第二个版本。

```
$c = $a * $b - $a; 
```

在抽象视图中，这将计算如下：

1.  加载`$a`到 CPU 寄存器 1。
2.  加载`$b`到 CPU 寄存器 2。
3.  将两个寄存器相乘，将结果存储到寄存器 2 中。
4.  `$a`仍在寄存器 1 中。从寄存器 2 中减去它，将结果存储在任一寄存器中。
5.  将结果寄存器保存到`$c`.

如果编译器看到`$a`等式中的两个操作数相同，则整行将仅使用两个 CPU 寄存器。

```
$c = $a * ($b - 1); 
```

1.  加载`$a`到寄存器 1。这应该首先完成，因为据我所知，PHP 保证了从左到右的评估顺序。
2.  加载`$b`到寄存器 2。
3.  递减寄存器 2。这是一个单独的操作，因此`1`不需要显式加载。
4.  将寄存器 1 和 2 相乘，将结果存储在其中一个中。
5.  将结果寄存器保存到`$c`.

对我来说，这看起来很像同样的努力。再说一次，他们可能已经分析了整个事情，并发现出于某种原因（例如由于行的上下文）第一个版本更有效。

假设整数算术，结果绝对没有区别。我也不完全分享浮点参数，因为如果`$page`是这么大的数字，那么您使用哪个版本仍然无关紧要。`1`要么从一个非常大的数字中减去，要么没有效果。或者您将大数和`1`分别乘以相同的因子，然后执行减法。这两个值在数量级上的差异与原始值相同，`$page`并且`1`。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-07-07T08:21:46.597

**程序员对准确性过于谨慎了。**

在数学上根本没有区别。

从程序员的角度来看，运算符的优先级并不重要，因为变量是基本数字。（如果它们是具有重载运算符的 foo 类的实例，情况就不同了）

表格可能会失去准确性`$limit*$page - $limit`，请参阅rody_o对此的回答。但这不会发生，因为我从不认为 $page 和 $limit 的数量级为 10^38 之类的。但是 php 知道如何处理数字。请记住，我们甚至不知道它们是花车！

正如其他人也提到了执行速度，这不是程序员可能想到的。你真的关心在你的代码中编写哪种形式吗？选择一种形式而不是另一种形式甚至不是微优化。

没有理由告诉别人他们绝对不应该使用第二种形式。没关系。

# php - 在 Magento 的一页结帐的订单审查部分中获取帐单信息

> ID：11373183
> 
> 赞同：6
> 
> 时间：2012-07-07T07:33:39.880
> 
> 标签：php, magento, checkout

我正在尝试在 Magento 1.7.0 的一页结帐的“订单审查”部分中显示帐单和运输信息。

但是，它根本不想合作。我尝试了各种论坛和 SO 中提到的几种方法。但这些方法似乎都不起作用。

这是我已经尝试过的。

[http://www.magentocommerce.com/boards/viewthread/55281/](http://www.magentocommerce.com/boards/viewthread/55281/)

[http://www.magentocommerce.com/boards/viewthread/55281/](http://www.magentocommerce.com/boards/viewthread/55281/)

任何帮助将不胜感激！提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-08T18:02:12.833

```
Mage::getSingleton('checkout/session')->getQuote()
                                      ->getShippingAddress()
                                      ->getData();

Mage::getSingleton('checkout/session')->getQuote()
                                      ->getBillingAddress()
                                      ->getData(); 
```

将为您提供包含当前订单的账单和运输信息的数组。根据上下文，您可能还需要调用

```
Mage::getSingleton('checkout/session')->getQuote()
                                      ->collectTotals(); 
```

使订单税、小计等正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-02T12:20:35.083

您可以将地址作为对象获取：

```
$checkout = Mage::getSingleton('checkout/session')->getQuote();
$billing = $checkout->getBillingAddress();
$shipping = $checkout->getShippingAddress(); 
```

并将它们显示为 html 文本：

```
echo $billing->format("html");
echo $shipping->format("html"); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-07-16T08:57:13.583

您可以通过此代码获取帐单信息：

```
Mage::getSingleton('checkout/session')->getQuote()
                                  ->getBillingAddress()
                                  ->getData(); 
```

# xcode - 使用 Xcode 执行 git mv 命令，Xcode 中的资源消失了吗？

> ID：11373190
> 
> 赞同：1
> 
> 时间：2012-07-07T07:34:51.893
> 
> 标签：xcode, git

我正在尝试通过一些 git 命令和教程，所以我不必使用 Xcode 进行源代码控制。我尝试了一个带有图片的简单示例。

*   我将图片 0000.jpg 拖到我的项目中。
*   我在 Xcode 中看到图片 0000.jpg 旁边有一个“A”
*   我去命令行和 git commit -m "test"
*   git mv 0000.jpg 1.jpg
*   git commit -m "消息"

当我转到此图像所在的文件夹时，我确实看到它已更改为 1.jpg。但是，在 Xcode 中，我仍然看到名为 0000.jpg 的图像。即使我清理项目并关闭并重新打开 Xcode，名称也保持不变。我是否缺少 mv 命令的内容？还是 Xcode 只是没有做它应该做的事情？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T07:37:03.373

Xcode 不知道文件系统更改，例如重命名文件。您必须在项目中读取文件或在 Xcode 中重命名它。

这与 Eclipse 和您可能使用过的其他一些 Java IDE 不同。

# python - 使用 SciPy 或 NumPy 生成具有指定权重的离散随机变量

> ID：11373192
> 
> 赞同：55
> 
> 时间：2012-07-07T07:35:12.623
> 
> 标签：python, random, numpy, scipy

我正在寻找一个简单的函数，它可以根据它们对应的（也指定的）概率生成指定随机值的数组。我只需要它来生成浮点值，但我不明白为什么它不能生成任何标量。我可以想出许多从现有函数构建它的方法，但我想我可能只是错过了一个明显的 SciPy 或 NumPy 函数。

例如：

```
>>> values = [1.1, 2.2, 3.3]
>>> probabilities = [0.2, 0.5, 0.3]
>>> print some_function(values, probabilities, size=10)
(2.2, 1.1, 3.3, 3.3, 2.2, 2.2, 1.1, 2.2, 3.3, 2.2) 
```

注意：我找到**[了 scipy.stats.rv_discrete](http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.rv_discrete.html#scipy.stats.rv_discrete)**但我不明白它是如何工作的。具体来说，我不明白这（下）是什么意思，也不应该做什么：

```
numargs = generic.numargs
[ <shape(s)> ] = ['Replace with resonable value', ]*numargs 
```

如果 rv_discrete 是我应该使用的，您能否为我提供一个简单的示例和对上述“形状”语句的解释？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2015-08-24T10:11:12.980

从离散分布中绘图直接内置到 numpy. 该函数称为[random.choice](https://numpy.org/doc/stable/reference/random/generated/numpy.random.choice.html)（如果不参考 numpy 文档中的离散分布，很难找到）。

```
elements = [1.1, 2.2, 3.3]
probabilities = [0.2, 0.5, 0.3]
np.random.choice(elements, 10, p=probabilities) 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-07-07T09:42:44.593

这是一个简短的、相对简单的函数，它返回加权值，它使用 NumPy 的`digitize`、`accumulate`和`random_sample`。

```
import numpy as np
from numpy.random import random_sample

def weighted_values(values, probabilities, size):
    bins = np.add.accumulate(probabilities)
    return values[np.digitize(random_sample(size), bins)]

values = np.array([1.1, 2.2, 3.3])
probabilities = np.array([0.2, 0.5, 0.3])

print weighted_values(values, probabilities, 10)
#Sample output:
[ 2.2  2.2  1.1  2.2  2.2  3.3  3.3  2.2  3.3  3.3] 
```

它是这样工作的：

1.  首先使用`accumulate`我们创建垃圾箱。
2.  然后我们使用创建一堆随机数（介于`0`和之间`1`）`random_sample`
3.  我们`digitize`用来查看这些数字属于哪些垃圾箱。
4.  并返回相应的值。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-02-02T08:11:25.260

您正朝着一个好的方向前进：内置`scipy.stats.rv_discrete()`非常直接地创建了一个离散随机变量。下面是它的工作原理：

```
>>> from scipy.stats import rv_discrete  

>>> values = numpy.array([1.1, 2.2, 3.3])
>>> probabilities = [0.2, 0.5, 0.3]

>>> distrib = rv_discrete(values=(range(len(values)), probabilities))  # This defines a Scipy probability distribution

>>> distrib.rvs(size=10)  # 10 samples from range(len(values))
array([1, 2, 0, 2, 2, 0, 2, 1, 0, 2])

>>> values[_]  # Conversion to specific discrete values (the fact that values is a NumPy array is used for the indexing)
[2.2, 3.3, 1.1, 3.3, 3.3, 1.1, 3.3, 2.2, 1.1, 3.3] 
```

因此，上面的分布从列表中`distrib`返回*索引。*`values`

更一般地说，在其参数的第一个元素中`rv_discrete()`采用一系列*整*`values=(…,…)`数值，并在这种情况下返回这些值；无需转换为特定的（浮点）值。这是一个例子：

```
>>> values = [10, 20, 30]
>>> probabilities = [0.2, 0.5, 0.3]
>>> distrib = rv_discrete(values=(values, probabilities))
>>> distrib.rvs(size=10)
array([20, 20, 20, 20, 20, 20, 20, 30, 20, 20]) 
```

其中（整数）输入值以所需概率直接返回。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-07T12:06:25.993

最简单的 DIY 方法是将概率总结为累积分布。这样，您将单位间隔拆分为长度等于原始概率的子间隔。现在在 [0,1) 上生成一个统一的随机数，并查看它落在哪个区间。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-12-13T11:59:56.440

您还可以使用[Lea](http://code.google.com/p/lea/)，这是一个专门用于离散概率分布的纯 Python 包。

```
>>> distrib = Lea.fromValFreqs((1.1,2),(2.2,5),(3.3,3))
>>> distrib
1.1 : 2/10
2.2 : 5/10
3.3 : 3/10
>>> distrib.random(10)
(2.2, 2.2, 1.1, 2.2, 2.2, 2.2, 1.1, 3.3, 1.1, 3.3) 
```

瞧！

# java - Android：AsyncTask UI 更新问题

> ID：11373193
> 
> 赞同：0
> 
> 时间：2012-07-07T07:35:16.370
> 
> 标签：java, android, android-asynctask

在下面的代码中，我正在尝试创建一个`ListActivity`. 此列表的元素由自定义`ArrayAdapter`- OrderAdapter 填充。

所有元素获取机制都在 AsyncTask 类中。我可以在 中设置元素`m_adapter`，但无法更新 List 的 UI。

活动正在强制关闭。

代码：

```
public class SoftwarePassionView extends ListActivity {

    private ProgressDialog m_progressDialog = null;
    private ArrayList<Order> m_orders = null;
    private OrderAdapter m_adapter; // Defined Below
    private Runnable viewOrders;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        try {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.softwarepassionview);
            m_adapter = new OrderAdapter(SoftwarePassionView.this,
                    R.layout.row, m_orders);

            new AsyncOperation().execute();

        } catch (Exception e) {
            Toast.makeText(this, e.toString(), Toast.LENGTH_SHORT).show();
        }
    }

    public class OrderAdapter extends ArrayAdapter<Order> {

        private ArrayList<Order> items;

        public OrderAdapter(Context context, int textViewResourceId,
                ArrayList<Order> elements) {
            super(context, textViewResourceId, elements);
            this.items = elements;
        }

        public void setList(ArrayList<Order> items) {
            this.items = new ArrayList<Order>();
            this.items.addAll(items);

        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            super.getView(position, convertView, parent);
            View v = convertView;
            try {
                if (v == null) {
                    LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                    v = vi.inflate(R.layout.row, null);
                }
                Order o = items.get(position);
                if (o != null) {
                    TextView orderName = (TextView) v
                            .findViewById(R.id.topText);
                    TextView orderStatus = (TextView) v
                            .findViewById(R.id.bottomText);
                    orderName.setText(o.getOrderName());
                    orderStatus.setText(o.getOrderStatus());
                }
            } catch (Exception e) {
                Toast.makeText(SoftwarePassionView.this, e.toString(),
                        Toast.LENGTH_SHORT).show();
            }
            return v;
        }
    }

    public class AsyncOperation extends AsyncTask {

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
        }

        @Override
        protected Object doInBackground(Object... params) {
            getOrders();
            if (m_orders != null && m_orders.size() > 0) {
                m_adapter.setList(m_orders);
            }
            return null;
        }

        @Override
        protected void onPostExecute(Object result) {
            super.onPostExecute(result);
            m_adapter.notifyDataSetChanged();
            setListAdapter(m_adapter);
        }
    }

    private void getOrders() {
        try {
            m_orders = new ArrayList<Order>();
            Order o1 = new Order();
            o1.setOrderName("T-Shirt Purchase");
            o1.setOrderStatus("Dispatched");
            Order o2 = new Order();
            o2.setOrderName("Deo Purchase");
            o2.setOrderStatus("Pending");
            m_orders.add(o1);
            m_orders.add(o2);

            Thread.sleep(2000);
        } catch (Exception e) {
            Toast.makeText(this, e.toString(), Toast.LENGTH_SHORT).show();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T17:13:13.883

I have fix error try now

```
public class SoftwarePassionView extends ListActivity {

private ProgressDialog m_progressDialog = null;
private ArrayList<Order> m_orders = new ArrayList<Order>(); //why you have putting it null?
private OrderAdapter m_adapter; // Defined Below
private Runnable viewOrders;

@Override
protected void onCreate(Bundle savedInstanceState) {
    try {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.softwarepassionview);
        m_adapter = new OrderAdapter(SoftwarePassionView.this,
                R.layout.row, m_orders);
        setListAdapter(m_adapter); // you are getting npe as you have not init "m_orders"
        new AsyncOperation().execute();

    } catch (Exception e) {
        Toast.makeText(this, e.toString(), Toast.LENGTH_SHORT).show();
    }
}

public class OrderAdapter extends BaseAdapter {

    private ArrayList<Order> items=new ArrayList<Order>();

    public OrderAdapter(Context context, int textViewResourceId,
            ArrayList<Order> elements) {
        //super(context, textViewResourceId, elements);
        this.items = elements;
    }

    public void setList(ArrayList<Order> items) {
        this.items.clear(); 
        this.items.addAll(items);
        this.notifyDataSetChanged();

    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        super.getView(position, convertView, parent);
        View v = convertView;
        try {
            if (v == null) {
                LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                v = vi.inflate(R.layout.row, null);
            }
            Order o = items.get(position);
            if (o != null) {
                TextView orderName = (TextView) v
                        .findViewById(R.id.topText);
                TextView orderStatus = (TextView) v
                        .findViewById(R.id.bottomText);
                orderName.setText(o.getOrderName());
                orderStatus.setText(o.getOrderStatus());
            }
        } catch (Exception e) {
            Toast.makeText(SoftwarePassionView.this, e.toString(),
                    Toast.LENGTH_SHORT).show();
        }
        return v;
    }

public int getCount() {

    return this.items.size();
}

public Object getItem(int arg0) {
    // TODO Auto-generated method stub
    return this.items.get(arg0);
}

public long getItemId(int arg0) {
    // TODO Auto-generated method stub
    return 0;
}

}

public class AsyncOperation extends AsyncTask {

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
    }

    @Override
    protected Object doInBackground(Object... params) {
        getOrders();
       // if (m_orders != null && m_orders.size() > 0) {  NO nead to set list here
       //     m_adapter.setList(m_orders);
       // }
        return null;
    }

    @Override
    protected void onPostExecute(Object result) {

        if (m_orders != null && m_orders.size() > 0) {  
            m_adapter.setList(m_orders);
        }
         super.onPostExecute(result);
        //setListAdapter(m_adapter);
    }
}

private void getOrders() {
    try {
        m_orders = new ArrayList<Order>();
        Order o1 = new Order();
        o1.setOrderName("T-Shirt Purchase");
        o1.setOrderStatus("Dispatched");
        Order o2 = new Order();
        o2.setOrderName("Deo Purchase");
        o2.setOrderStatus("Pending");
        m_orders.add(o1);
        m_orders.add(o2);

        Thread.sleep(2000);
    } catch (Exception e) {
        Toast.makeText(this, e.toString(), Toast.LENGTH_SHORT).show();
    }
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T08:56:33.240

检查[**this post**](https://stackoverflow.com/questions/11228698/no-change-black-screen-by-notifydatasetchanged)，问题几乎相同。

我认为由于项目具有相同的参考（从活动传递到适配器），所以项目（在适配器上和活动上都指向相同的 ArrayLists）所以两者都是清晰的，所以这些行没有意义，因为两者都是空的

*尝试这样的事情：*

```
public class OrderAdapter extends ArrayAdapter<Order> {
        // private ArrayList<Order> items;
        private ArrayList<Order> items = new ArrayList<Order>();

        public OrderAdapter(Context context, int textViewResourceId,
                ArrayList<Order> elements) {
            super(context, textViewResourceId, elements);
            this.items = elements;
        }

        public void setList(ArrayList<Order> items) {
        this.items.addAll(items);

        } 
```

*和：*

```
@Override
        protected void onPostExecute(Object result) {
            super.onPostExecute(result);
            //m_adapter.notifyDataSetChanged();
            // setListAdapter(m_adapter);
            m_adapter.notifyDataSetChanged();
        } 
```

并`setListAdapter(m_adapter);`在创建后使用`m_adapter`

# javascript - 将 json 对象转换为对象的 json 数组

> ID：11373195
> 
> 赞同：0
> 
> 时间：2012-07-07T07:36:02.987
> 
> 标签：javascript, jquery

我收到了一个 json 片段，其中包含以下几行（字符串转换为 json 对象）

```
"profile":{"id":"billg","name":"Bill Gates","countryCode":"US"} 
```

现在用户添加了一个配置文件，我需要将配置文件对象转换为一组配置文件对象。

```
"profile":[{"id":"billg","name":"Bill Gates","countryCode":"US"},{"id":"steve","name":"Steve Jobs","countryCode":"US"}] 
```

任何指针或代码都非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T07:52:52.237

如果你展示一些你的代码，那就太好了：我们基本上不知道这个 json 字符串的来源（JSON = JavaScript Object Notation，所以'JSON object'是一个重言式），我们不知道如何是创建的第二个配置文件。

不过考虑一下：

```
var jsonData = '{"profile":{"id":"billg","name":"Bill Gates","countryCode":"US"}}';
var data     = JSON.parse(jsonData); // it's an object now...
var profile  = data.profile;         // storing another object as a value of `.profile` property
var anotherProfile = {"id":"steve","name":"Steve Jobs","countryCode":"US"};
if (! profile[0]) { // checking whether it's an array or not
   // it's not, so we should make an array, adding another profile as well
   data.profile = [data.profile, anotherProfile]; 
}
else { // but if it was, it'd be enough just to push anotherProfile into the end of it
   data.profile.push(anotherProfile);
}
console.log(data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T07:47:30.257

```
Try This: 

   var obj = jQuery.parseJSON('"profile":[{"id":"billg","name":"Bill Gates","countryCode":"US"},{"id":"steve","name":"Steve Jobs","countryCode":"US"}]');

    var a = obj.profile;

    var jsonArrObj = $.parseJSON('[' + a + ']'); 
```

您可以像这样访问数组中的名称：

```
for (i in jsonArrObj)
{
alert(jsonArrObj[i]["name"]);
} 
```

# c# - 第二个架构中的表在实体向导中不可见

> ID：11373196
> 
> 赞同：6
> 
> 时间：2012-07-07T07:36:22.407
> 
> 标签：c#, oracle, entity-framework, ado.net, odp.net

我想将 ADO.NET 实体数据模型添加到我的项目中。我正在使用 Oracle 数据库和 Oracle ODP.NET 连接到数据库。

我需要从两个模式中查询。因此，我将连接配置为使用两个不同的模式（使用我在[另一个 SO 问题](https://stackoverflow.com/a/7598378/1380428)中找到的信息）。

这些表在我的服务器资源管理器中可见。但它们在 ADO.NET 实体数据模型添加向导中不可见。它仅显示第一个模式中的表，并且它们的前面有模式名称：

```
TableName(SchemaName). 
```

我必须做什么才能从两个模式中查看表？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-19T23:22:23.350

**更新：** ~~我遇到[了一个非常相似的问题](https://stackoverflow.com/q/13753139/920506)，在 Oracle 论坛中找到的[这个解决方法帮助了我。](https://forums.oracle.com/forums/message.jspa?messageID=10714286#10714286)~~上述解决方法似乎没有进入 Oracle 的新论坛区域。请[在此处](https://stackoverflow.com/a/13962954/920506)查看我的 SO 答案以获取更多详细信息。

**摘要：**在带有最新 ODAC 的 VS2012 中，当您设置连接过滤条件时，您始终必须包含默认架构以及您想要的任何架构。

出于某种原因，我不必在 VS2010 中使用以前版本的 ODAC 执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T16:39:17.033

这是一个已知的错误。我也深受其害，曾经一度消失，但现在又回来了。Oracle 意识到了这一点，并希望在下一个 ODAC 版本中修复它。有关它的线程，请参见此处：

[https://forums.oracle.com/forums/thread.jspa?messageID=10396897](https://forums.oracle.com/forums/thread.jspa?messageID=10396897)

甲骨文员工的回复：

> 发布时间：2012 年 5 月 2 日下午 3:53
> 
> 我们已经能够在 Oracle 重现此错误，目前正在研究解决方案。我们希望在下一个版本中包含此错误修复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-12T20:13:29.250

如果它有帮助...我根本无法使用 VS 2010、EF 5 和 ODAC 2.102.2.20 从非默认模式添加表。因为我将过滤器设置为使用具有我的表定义的模式（与用户 ID 的默认模式不同），所以我可以在服务器资源管理器中看到这些表，但无法将它们添加到模型中。我必须将用户 ID 的默认模式和表的模式都添加到过滤器列表中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-30T20:02:06.170

对我来说，关键是当我在服务器资源管理器中创建数据连接时，使用 Oracle 非托管驱动程序。指定 TNS 别名，指向您的 .ora 文件（至关重要）。然后，这就是导致问题的原因，是单击过滤器，并添加查看表所需的模式。保留默认架构，并添加您需要的架构。您必须点击更新按钮才能使其生效！！！如果一切顺利，您应该会在 Server Explorer 数据连接中看到这些表。

现在转到您的解决方案并从数据库中添加 ADO.NET 实体数据模型、EF 设计器。您应该会看到一个对话框，其中包含我们在上面创建的数据连接。选择那个。我选择在连接字符串中包含敏感数据。

现在，当您转到显示表格的窗口时，它们会自动出现！

希望有一天这对某人有所帮助。我断断续续地坚持了几个星期。

# c# - Crystal Report 仅显示数据表中的一行，该数据表有 10 行

> ID：11373197
> 
> 赞同：0
> 
> 时间：2012-07-07T07:36:24.670
> 
> 标签：c#, crystal-reports, report

我开发了一个 Windows 应用程序，它使用 C# 生成没有数据库的报告。

我添加了一个 Dataset 和一个 DataTable 作为水晶报表的数据源。我的数据表至少有 1 行。即使我的数据表有多个（如 4、5、10）行，水晶报表仍然只显示数据表的第一行。

我使用了断点并验证了我的数据表有多行。

我正在使用 Windows XP Service Pack 3 (64-Bit) OS Visual Studio 2010 Professional .Net Framework 4 Crystal Report（上个月从 SAP 网站下载）

**谢谢你**

这个你能帮我吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T09:56:17.360

也许您将表格字段放在报告的“页面标题”或“报告标题”部分中。

如果是这种情况，您应该将您的字段放在“详细信息”部分。
将针对数据源中的每一行重复报告的“详细信息”部分。

# debian - 需要删除一个文件 -ggdb

> ID：11373198
> 
> 赞同：1
> 
> 时间：2012-07-07T07:36:33.793
> 
> 标签：debian, rm

所以我有点搞砸了，设法在 Debian 发行版的主目录中创建了一个名为 -ggdb 的文件。我尝试用 " 将其包围以使其成为字符串文字（如下所示：），`rm "-ggdb"`但出现以下错误：`rm: invalid option -- 'g'`...

当我尝试时`rm "\-ggdb"`，出现以下错误：

```
rm: cannot remove '\\-ggdb': No such file or directory 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T07:52:14.903

尝试这个：

```
rm -- -ggdb

rm ./-ggdb 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-07T07:41:45.387

以下命令将起作用：

```
rm "\-ggdb" 
```

# java - JTable ，每当单击按钮时更新表格

> ID：11373199
> 
> 赞同：0
> 
> 时间：2012-07-07T07:36:34.463
> 
> 标签：java, mysql, swing, jtable

我目前正在尝试使用 MySQL 学习 JTable。我已将我的数据库设置为 JTable 并使用滚动窗格将其添加到我的 GUI 中。

我的问题是，当我单击按钮时，如何创建更新数据库或执行搜索操作的功能（两者都是一样的......）。

这是我的代码（我正在将数据库信息读入我的 .ini 文件）

```
final Vector columnNames = new Vector();
        final Vector data = new Vector();

        try
        {
            //  Connect to an Access Database

            driver = IniFonksiyon.iniSVNOkut(driver, "databaseBilgileri", "driver");//"com.mysql.jdbc.Driver";
            url = IniFonksiyon.iniOkut(url, "databaseBilgileri", "url");//"jdbc:mysql://localhost:3306/";
            userid = IniFonksiyon.iniOkut(userid, "databaseBilgileri", "kullanici");
            password = IniFonksiyon.iniOkut(password, "databaseBilgileri", "sifre");
            dbName = IniFonksiyon.iniOkut(dbName, "databaseBilgileri", "dbIsmi");

            Class.forName( driver );
            Connection connection = DriverManager.getConnection( url+dbName , userid, password );

            //  Read data from a table

            String sql = "select * from profildb.tbl_detailed";
            Statement stmt = connection.createStatement();
            ResultSet rs = stmt.executeQuery( sql );

            ResultSetMetaData md = rs.getMetaData();
            int columns = md.getColumnCount();

            //  Get column names

            for (int i = 1; i <= columns; i++)
            {
                columnNames.addElement( md.getColumnName(i) );
            }

            //  Get row data

            while (rs.next())
            {
                Vector row = new Vector(columns);

                for (int i = 1; i <= columns; i++)
                {
                    row.addElement( rs.getObject(i) );
                }

                data.addElement( row );
            }

            rs.close();
            stmt.close();
            connection.close();
        }
        catch(Exception e)
        {
            System.out.println( e );
        }

        //  Create table with database data

        final JTable table = new JTable(data, columnNames)
        {
            /**
             * 
             */
            private static final long serialVersionUID = 1L;

            public Class getColumnClass(int column)
            {
                for (int row = 0; row < getRowCount(); row++)
                {
                    Object o = getValueAt(row, column);

                    if (o != null)
                    {
                        return o.getClass();
                    }
                }

                return Object.class;
            }
        }; 
```

这是处理创建表的代码，但它与我的主要 GUI 功能直接相关，所以如何刷新/执行其他操作，如搜索功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T04:12:39.677

使用表格模型更容易。请参阅相关[教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)。您可以使用[DefaultTableModel](http://docs.oracle.com/javase/6/docs/api/javax/swing/table/DefaultTableModel.html)或您自己的`TableModel`. 如果不能满足您的需求，扩展`AbstractTableModel`通常是最常见的方法。`DefaultTableModel`

为了获得更好的 Swing 应用程序性能和响应能力，不应在[EDT](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)上执行长时间运行的任务。因此，最好从 EDT 以外的线程访问数据库。

[SwingWorker](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)可用于此目的。从数据库中获取数据`SwingWorker.doInBackground()`。然后，在`SwingWorker.done()`.

这种实现方式有很多变体。这些特定于您的应用程序的性质和要求。例如，您可以使用 SwingWorker 的`publish()/process()`串联来处理块中的数据。您可以选择将数据库访问逻辑合并到您的模型中或创建扩展`SwingWorker`.

# java - 如何使 JFileChooser 不与它所属的表单一起出现？

> ID：11373201
> 
> 赞同：0
> 
> 时间：2012-07-07T07:36:43.657
> 
> 标签：java, swing, netbeans

根据本[教程](http://netbeans.org/kb/docs/java/gui-filechooser.html)，我在我的表单中添加了一个 JFileChooser ，但它在第一次加载表单时与表单一起出现。关于如何解决这个问题的任何想法？这是代码：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package nysemarketpick;

import java.io.File;
import java.io.IOException;
import javax.swing.JFileChooser;

/**
 *
 * @author skiabox
 */
public class MainForm extends javax.swing.JFrame {

    /**
     * Creates new form MainForm
     */
    public MainForm() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        mainPanel = new javax.swing.JPanel();
        fileChooser = new javax.swing.JFileChooser();
        jMenuBar1 = new javax.swing.JMenuBar();
        jMenu1 = new javax.swing.JMenu();
        Open = new javax.swing.JMenuItem();
        Exit = new javax.swing.JMenuItem();
        jMenu2 = new javax.swing.JMenu();
        jMenu3 = new javax.swing.JMenu();
        jMenu4 = new javax.swing.JMenu();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setTitle("Nyse Stock Pick");
        setSize(new java.awt.Dimension(1920, 1080));

        org.jdesktop.layout.GroupLayout mainPanelLayout = new org.jdesktop.layout.GroupLayout(mainPanel);
        mainPanel.setLayout(mainPanelLayout);
        mainPanelLayout.setHorizontalGroup(
            mainPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(0, 1082, Short.MAX_VALUE)
        );
        mainPanelLayout.setVerticalGroup(
            mainPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(0, 621, Short.MAX_VALUE)
        );

        jMenu1.setText("File");

        Open.setText("Open");
        Open.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                OpenActionPerformed(evt);
            }
        });
        jMenu1.add(Open);

        Exit.setText(" Exit");
        Exit.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                ExitActionPerformed(evt);
            }
        });
        jMenu1.add(Exit);

        jMenuBar1.add(jMenu1);

        jMenu2.setText("Options");
        jMenuBar1.add(jMenu2);

        jMenu3.setText("Tools");
        jMenuBar1.add(jMenu3);

        jMenu4.setText("Help");
        jMenuBar1.add(jMenu4);

        setJMenuBar(jMenuBar1);

        org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(mainPanel, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                .add(layout.createSequentialGroup()
                    .add(0, 266, Short.MAX_VALUE)
                    .add(fileChooser, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                    .add(0, 266, Short.MAX_VALUE)))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(layout.createSequentialGroup()
                .addContainerGap()
                .add(mainPanel, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(43, Short.MAX_VALUE))
            .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                .add(layout.createSequentialGroup()
                    .add(0, 135, Short.MAX_VALUE)
                    .add(fileChooser, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                    .add(0, 135, Short.MAX_VALUE)))
        );

        pack();
    }// </editor-fold>                        

    private void OpenActionPerformed(java.awt.event.ActionEvent evt) {                                     
        // TODO add your handling code here:
        int returnVal = fileChooser.showOpenDialog(this);
        if (returnVal == JFileChooser.APPROVE_OPTION)
        {
            File file = fileChooser.getSelectedFile();
            //What to do with the file
            PriceVolumeChart chart = new PriceVolumeChart(file.getName());
            mainPanel = chart.myPanel;

        }
        else
        {
            System.out.println("File access cancelled by user.");
        }
    }                                    

    private void ExitActionPerformed(java.awt.event.ActionEvent evt) {                                     
        // TODO add your handling code here:
        System.exit(0);
    }                                    

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /*
         * Set the Nimbus look and feel
         */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /*
         * If Nimbus (introduced in Java SE 6) is not available, stay with the
         * default look and feel. For details see
         * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(MainForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(MainForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(MainForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(MainForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /*
         * Create and display the form
         */
        java.awt.EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new MainForm().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify                     
    private javax.swing.JMenuItem Exit;
    private javax.swing.JMenuItem Open;
    private javax.swing.JFileChooser fileChooser;
    private javax.swing.JMenu jMenu1;
    private javax.swing.JMenu jMenu2;
    private javax.swing.JMenu jMenu3;
    private javax.swing.JMenu jMenu4;
    private javax.swing.JMenuBar jMenuBar1;
    private javax.swing.JPanel mainPanel;
    // End of variables declaration                   
} 
```

大部分代码是从 netbeans 生成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T08:08:08.913

我终于设法通过将 JFileChooser 添加到 Netabens (v7.1.2) 的导航窗口中的其他组件节点来解决我的问题，而不是将其添加到 JForm。也许教程很旧，它可能只适用于较旧的 netbeans 版本。

# c++ - 访问不活动的工会成员和未定义的行为？

> ID：11373203
> 
> 赞同：139
> 
> 时间：2012-07-07T07:37:00.127
> 
> 标签：c++, undefined-behavior, language-lawyer, unions

我的印象是访问`union`除最后一组以外的成员是 UB，但我似乎找不到可靠的参考（除了声称它是 UB 但没有任何标准支持的答案）。

那么，这是未定义的行为吗？

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2012-08-16T23:41:10.043

令人困惑的是，C 明确允许通过联合进行类型双关语，而 C++ ( [c++11](/questions/tagged/c%2b%2b11 "显示标记为“c++11”的问题") ) 没有这样的权限。

> [c11](/questions/tagged/c11 "显示标记为“c11”的问题")
> 
> ### 6.5.2.3 结构和工会成员
> 
> 95) 如果用于读取联合对象内容的成员与上次用于在对象中存储值的成员不同，则将值的对象表示的适当部分重新解释为新对象中的对象表示6.2.6 中描述的类型（有时称为“类型双关”的过程）。这可能是一个陷阱表示。

C++的情况：

> [c++11](/questions/tagged/c%2b%2b11 "显示标记为“c++11”的问题")
> 
> ### 9.5 联合[class.union]
> 
> 在一个union中，任何时候最多可以有一个非静态数据成员处于活动状态，即任何时候最多可以有一个非静态数据成员的值存储在一个union中。

C++ 后来的语言允许使用包含`struct`s 和公共初始序列的联合；然而，这不允许类型双关语。

要确定C++ 中*是否*允许联合类型双关语，我们必须进一步搜索。回想一下，[c99](/questions/tagged/c99 "显示标记为“c99”的问题")是 C++11 的规范性参考（C99 与 C11 有相似的语言，允许联合类型双关语）：

> ### 3.9 类型 [basic.types]
> 
> 4 - T 类型对象的对象表示是由 T 类型对象占用的 N 个 unsigned char 对象的序列，其中 N 等于 sizeof(T)。对象的值表示是保存类型 T 的值的一组位。对于普通可复制类型，值表示是对象表示中确定值的一组位，它是实现的一个离散元素-定义的一组值。^(42)
> 42) 目的是 C++ 的内存模型与 ISO/IEC 9899 编程语言 C 的内存模型兼容。

当我们阅读时，它变得特别有趣

> ### 3.8 对象生命周期 [basic.life]
> 
> 类型 T 的对象的生命周期开始于： — 获得类型 T 具有正确对齐和大小的存储，并且 — 如果对象具有非平凡初始化，则其初始化完成。

因此，对于包含在联合中的原始类型（*事实上*具有微不足道的初始化），对象的生命周期至少包含联合本身的生命周期。这允许我们调用

> ### 3.9.2 复合类型 [basic.compound]
> 
> 如果一个类型 T 的对象位于地址 A，则称其值为地址 A 的类型为 cv T* 的指针指向该对象，而不管该值是如何获得的。

假设我们感兴趣的操作是类型双关语，即获取非活动联合成员的值，并且根据上述给出我们对该成员引用的对象的有效引用，则该操作是左值到-右值转换：

> ### 4.1 左值到右值的转换[conv.lval]
> 
> 非函数、非数组类型的左值`T`可以转换为纯右值。如果`T`是不完整类型，则需要进行此转换的程序格式错误。**如果泛左值引用的对象不是类型对象，`T`也不是派生自 的类型的对象`T`，或者如果该对象未初始化，则需要此转换的程序具有未定义的行为。**

然后的问题是，作为非活动联合成员的对象是否通过存储初始化到活动联合成员。据我所知，情况并非如此，尽管如果：

*   一个联合被复制到`char`数组存储中并返回 (3.9:2)，或者
*   一个联合按字节复制到另一个相同类型的联合 (3.9:3)，或者
*   符合 ISO/IEC 9899（就其定义而言）（3.9:4 注 42）的程序元素跨语言边界访问联合，然后

非活动成员对联合的访问*被定义*并被定义为遵循对象和值表示，没有上述插入之一的访问是未定义的行为。这对允许在这样的程序上执行的优化有影响，因为实现当然可以假设未定义的行为不会发生。

也就是说，尽管我们可以合法地为非活动的联合成员形成一个左值（这就是为什么在没有构造的情况下分配给非活动成员是可以的），但它被认为是未初始化的。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-07-07T07:48:43.203

C++11 标准是这样说的

> **9.5 工会**
> 
> 在一个union中，任何时候最多可以有一个非静态数据成员处于活动状态，即任何时候最多可以有一个非静态数据成员的值存储在一个union中。

如果只存储一个值，如何读取另一个值？它只是不存在。

* * *

gcc 文档在[实现定义的行为下列出了这一点](http://gcc.gnu.org/onlinedocs/gcc-4.7.1/gcc/Structures-unions-enumerations-and-bit_002dfields-implementation.html#Structures-unions-enumerations-and-bit_002dfields-implementation)

> *   *使用不同类型的成员访问联合对象的成员 (C90 6.3.2.3)。*
> 
> 对象表示的相关字节被视为用于访问的类型的对象。请参阅类型双关语。这可能是一个陷阱表示。

表明这不是 C 标准所要求的。

* * *

2016-01-05：通过评论，我链接到[C99 缺陷报告 #283](http://www.open-std.org/jtc1/sc22/wg14/www/docs/dr_283.htm)，它在 C 标准文档中添加了类似的文本作为脚注：

> 78a) 如果用于访问联合对象内容的成员与上次用于在对象中存储值的成员不同，则该值的对象表示的适当部分被重新解释为新的对象表示6.2.6 中描述的类型（有时称为“类型双关语”的过程）。这可能是一个陷阱表示。

考虑到脚注不是标准的规范性，不确定它是否澄清了很多。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-08-10T18:06:46.540

我认为最接近标准的说法是未定义的行为是它定义了包含公共初始序列的联合的行为（C99，§6.5.2.3/5）：

> 一个特殊的保证是为了简化联合的使用：如果一个联合包含多个共享一个公共初始序列的结构（见下文），并且如果联合对象当前包含这些结构之一，则允许检查公共它们中的任何一个的初始部分，任何地方的完整类型的联合声明都是可见的。如果对应的成员对于一个或多个初始成员的序列具有兼容的类型（并且对于位域，具有相同的宽度），则两个结构共享一个共同的初始序列。

C++11 在 §9.2/19 给出了类似的要求/许可：

> 如果一个标准布局联合包含两个或多个共享一个公共初始序列的标准布局结构，并且如果标准布局联合对象当前包含这些标准布局结构之一，则允许检查任何的公共初始部分其中。如果对应的成员具有布局兼容的类型，并且两个成员都不是位域或两者都是一个或多个初始成员序列的具有相同宽度的位域，则两个标准布局结构共享一个共同的初始序列。

尽管两者都没有直接说明，但它们都强烈暗示“检查”（读取）成员*只有*在 1）它是（部分）最近写入的成员，或 2）是共同首字母的一部分时才被“允许”顺序。

这不是直接声明不这样做是未定义的行为，但它是我所知道的最接近的。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-08-16T22:00:52.497

可用答案​​尚未提及的是第 6.2.5 节第 21 段中的脚注 37：

> 请注意，聚合类型不包括联合类型，因为具有联合类型的对象一次只能包含一个成员。

这个要求似乎清楚地暗示你不能在一个成员中写入并在另一个成员中阅读。在这种情况下，由于缺乏规范，它可能是未定义的行为。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-08-17T07:00:47.880

我用一个例子很好地解释了这一点。
假设我们有以下联合：

```
union A{
   int x;
   short y[2];
}; 
```

我很好地假设`sizeof(int)`给出 4，并且`sizeof(short)`给出 2。
当你写得`union A a = {10}`很好时，创建一个 A 类型的新 var 并将值 10 放入其中。

你的记忆应该是这样的：（记住所有工会成员都在同一个位置）

```
       | x |
       | y[0] | y[1] |
       -----------------------------------------
   a-> |0000 0000|0000 0000|0000 0000|0000 1010|
       -----------------------------------------

```

如你所见，ax 的值为 10，ay [1](http://msdn.microsoft.com/en-us/library/5dxy4b7b%28v=vs.80%29.aspx)的值为 10，而 ay[0] 的值为 0。

现在，如果我这样做会发生什么？

```
a.y[0] = 37; 
```

我们的记忆将如下所示：

```
       | x |
       | y[0] | y[1] |
       -----------------------------------------
   a-> |0000 0000|0010 0101|0000 0000|0000 1010|
       -----------------------------------------

```

这会将 ax 的值变为 2424842（十进制）。

现在，如果你的 union 有一个浮点数或双精度数，那么你的内存映射就会更加混乱，因为你存储精确数字的方式。您可以在[这里](http://msdn.microsoft.com/en-us/library/5dxy4b7b%28v=vs.80%29.aspx)获得更多信息。

# android - 将json数组解析为android中的普通数组

> ID：11373205
> 
> 赞同：0
> 
> 时间：2012-07-07T07:37:13.610
> 
> 标签：android, arrays, json

我有来自 php 的 JSON 数据-它是一维数组-：

```
{pair:["-8.5745000,115.3735700","-8.5683300,115.3733700","-8.5683300,115.3733700","-8.5687800,115.3997700","-8.5687800,115.3997700","-8.5764900,115.4007400","-8.5764900,115.4007400","-8.5687800,115.3997700","-8.5687800,115.3997700","-8.5656400,115.4156400","-8.5656400,115.4156400","-8.5565200,115.4122800","-8.5565200,115.4122800","-8.5566200,115.4110500","-8.5566200,115.4110500","-8.5560700,115.4112200","-8.5560700,115.4112200","-8.5554200,115.4112800","-8.5554200,115.4112800","-8.5527200,115.4025400","-8.5527200,115.4025400","-8.5424000,115.4027000","-8.5424000,115.4027000","-8.5426600,115.4055800","-8.5426600,115.4055800","-8.5377000,115.4057200","-8.5377000,115.4057200","-8.5375900,115.4034500","-8.5375900,115.4034500","-8.5358900,115.4036500","-8.5358900,115.4036500","-8.5358800,115.4033400"]} 
```

在android中我想将该JSON数组保存到一个数组中，所以我想得到这样的数组

```
pair=["-8.5745000,115.3735700","-8.5683300,115.3733700","-8.5683300,115.3733700","-8.5687800,115.3997700","-8.5687800,115.3997700","-8.5764900,115.4007400","-8.5764900,115.4007400","-8.5687800,115.3997700","-8.5687800,115.3997700","-8.5656400,115.4156400","-8.5656400,115.4156400","-8.5565200,115.4122800","-8.5565200,115.4122800","-8.5566200,115.4110500","-8.5566200,115.4110500","-8.5560700,115.4112200","-8.5560700,115.4112200","-8.5554200,115.4112800","-8.5554200,115.4112800","-8.5527200,115.4025400","-8.5527200,115.4025400","-8.5424000,115.4027000","-8.5424000,115.4027000","-8.5426600,115.4055800","-8.5426600,115.4055800","-8.5377000,115.4057200","-8.5377000,115.4057200","-8.5375900,115.4034500","-8.5375900,115.4034500","-8.5358900,115.4036500","-8.5358900,115.4036500","-8.5358800,115.4033400"] 
```

我正在尝试这个

```
String []pairs=null;
        String hasil = "";
        hasil = getRequest(url);
        try 
        {
            jObject = new JSONObject(hasil);
            JSONArray myArray = jObject.getJSONArray("pair");
            for(int i = 0; i < myArray.length(); i++)
            {
                pairs[i]= myArray.get(i).toString();
            }

        } 
        catch (JSONException e)
        {
            e.printStackTrace();
        }
        teks1 = (TextView)findViewById(R.id.textView1);
        teks1.setText(Arrays.toString(pairs)); 
```

但仍然没有工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T07:49:36.420

```
 ArrayList<String> list = new ArrayList<String>();     
            JSONArray jsonArray = (JSONArray)jsonObject; 
            if (jsonArray != null) { 
               int len = jsonArray.length();
               for (int i=0;i<len;i++){ 
                list.add(jsonArray.get(i).toString());
               } 
                } 
             }
           String i[] = list.toArray();   //get array 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T07:41:27.880

尝试以下代码块..

```
Array<String> list = new Array<String>();     
JSONArray jsonArray = (JSONArray)jsonObject; 
if (jsonArray != null) { 
   int len = jsonArray.length();
   for (int i=0;i<len;i++){ 
    list.add(jsonArray.get(i).toString());
   } 
    } 
 } 
```

谢谢，

# php - 部分上传图片

> ID：11373210
> 
> 赞同：0
> 
> 时间：2012-07-07T07:38:08.800
> 
> 标签：php, image-processing

有没有办法通过 PHP 部分上传图片？我的意思是我们实际上是在该图像上绘制一个网格并上传我们想要的图像销售。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T07:49:08.860

如果您只想**上传**图像的特定部分，您应该查看客户端裁剪： [Image cropping/resizing before sent to a server](https://stackoverflow.com/questions/5492736/image-cropping-resizing-before-sending-to-a-server)

您当然可以在客户端选择所需的区域，上传整个图像，然后使用[GD](http://php.net/manual/de/book.image.php)或[Imagick等 php 库对其进行裁剪](http://php.net/manual/en/book.imagick.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T07:55:24.870

您可以尝试通过将其转换为字节数组并在另一端重新组装它们来分块发送它

# java - json字符串在struts 1.3.8的动作类中变为空

> ID：11373215
> 
> 赞同：0
> 
> 时间：2012-07-07T07:38:32.557
> 
> 标签：java, ajax

我正在使用 struts 1.3.8 开发一个 Web 应用程序我正在使用 $.ajax() jquery 将 json 数据发布到我的操作类中，但我收到 null .my 代码

```
var dataobj={data:[{code:code1,hd1:h1,hd2:h2}]};
 $.ajax(
                {
                    url: "EditablePage.do?data="+dataobj,
                    dataType: "json",
                    method:"POST",
                    data:dataobj

                }); 
```

爪哇代码

```
 String data=request.getParameter("data");
    JSONObject jObj    = new JSONObject();
    JSONObject newObj=jObj.getJSONObject(data); 
```

**String data=request.getParameter("data");** 这正在变成空，不明白我在哪里做错了我在 Jquery 中的新功能，任何提示都会对我有很大帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T07:50:31.987

您创建 JSONObject 的方式是错误的。将您的代码更改为：

```
String data = request.getParameter("data");
JSONObject jObj = new JSONObject(data); 
```

此外，不建议将 JSON 数据作为参数字符串发送。而是将其作为 Javascript 中的实体主体发送。

# c# - 密码恢复不发送电子邮件。

> ID：11373216
> 
> 赞同：0
> 
> 时间：2012-07-07T07:38:39.797
> 
> 标签：c#, asp.net, ajax, forgot-password, password-recovery

我有一个在 LoginView 内构建的超链接，文本设置为“忘记密码”。

单击超链接后，将弹出密码恢复控件（使用 AJAX ModalPopUp 扩展器的实现）。modalpopup 运行良好。但问题是，在输入用户名后，在步骤 2 中用户回答了他/她的安全答案后，当点击“提交”按钮时，它不会进入步骤 3，也没有发送电子邮件。

但是，数据库中的密码已更改（我尝试使用用户名和旧密码登录，但没有成功）。

这是 passwordrecover.aspx 的代码：

```
<asp:HyperLink ID="HyperLink2" runat="server" 
             style="margin-top:15px; text-align: right;">Forget Password</asp:HyperLink>

                        <asp:ModalPopupExtender 
                        ID="HyperLink2_ModalPopupExtender" 
                        runat="server" 
                        BackgroundCssClass="modalBackground" 
                        DynamicServicePath="" 
                        Enabled="True" 
                        PopupControlID="Panel1" 
                        TargetControlID="HyperLink2" >

                        </asp:ModalPopupExtender>

                        <asp:Panel ID="Panel1" 
                        runat="server" 
                        BackColor="White" 
                        BorderColor="Black" 
                        BorderStyle="Solid" 
                        BorderWidth="2px" 
                        Height="200px" 
                        Width="360px">

                         <asp:UpdatePanel ID="UpdatePanel1" runat="server">

                         <ContentTemplate>

                  <asp:PasswordRecovery ID="PasswordRecovery1" runat="server"
                    onsendingmail="PasswordRecovery1_SendingMail"> 

                <MailDefinition BodyFileName="~/EmailTemplates/ResetPassword.htm" 
                    From="bedofrosesptltd@gmail.com" IsBodyHtml="True" Priority="High" 
                    Subject="Request on the password reset for BedOfRoses's account.">
                </MailDefinition>

                </asp:PasswordRecovery>

                              </ContentTemplate>
                            </asp:UpdatePanel>

                            <asp:Button ID="btnClose" runat="server" Text="Close" />
                        </asp:Panel> 
```

这是后面的代码：

```
 protected void PasswordRecovery1_SendingMail(object sender, MailMessageEventArgs e)
    {
        System.Web.UI.WebControls.PasswordRecovery PasswordRecovery1 = (System.Web.UI.WebControls.PasswordRecovery)LoginView1.FindControl("PasswordRecovery1");
            MembershipUser pwRecover = Membership.GetUser(PasswordRecovery1.UserName);
            Guid userInfoId2 = (Guid)pwRecover.ProviderUserKey;

            //Create an url that will link to a UserProfile.aspx and
            //accept a query string that is the user's id

            //setup the base of the url
            string domainName = Request.Url.GetLeftPart(UriPartial.Authority) + Request.ApplicationPath;

            //setup the second half of the url
            string confirmationPage = "/Members/UserProfile.aspx?ID=" + userInfoId2.ToString();

            //combine to make the final url
            string url = domainName + confirmationPage;

            // Replace <%VerifyUrl%> placeholder with url value
            e.Message.Body = e.Message.Body.Replace("<%ResetPassword%>", url);
        } 
```

*   如果我从 ModalPopUp 中删除密码恢复控件，整个控件将完美运行。只有当它在 ModalPopUp 中构建时，它才能进行最后一步并且没有发送电子邮件。然而，当他/她的用户名和旧密码时，用户无法登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T08:58:18.153

最可能的原因可能是当您的表单在模型弹出窗口中打开时，表单（即密码恢复表单）不再保留在 FORM 标记中。所以你需要做类似的事情

```
jQuery(function() {
   var dlg = jQuery("#dialog").dialog({ 
                        draggable: true, 
                        resizable: true, 
                        show: 'Transfer', 
                        hide: 'Transfer', 
                        width: 320, 
                        autoOpen: false, 
                        minHeight: 10, 
                        minwidth: 10 
          });
  dlg.parent().appendTo(jQuery("form:first"));
}); 
```

它正在 FORM DOM 中移动弹出窗口。当您的表单不在 FORM DOM 中时，它的数据将不会被发送回服务器。

参考：[带有 ASP.NET 按钮回发的 jQuery UI 对话框](https://stackoverflow.com/questions/757232/jquery-ui-dialog-with-asp-net-button-postback)

# php - Virtuemart 和自动导入我的数据库中的文件

> ID：11373217
> 
> 赞同：2
> 
> 时间：2012-07-07T07:38:49.753
> 
> 标签：php, excel, joomla, virtuemart

我想将文本文件转换为 excel，然后修改 excel 文件中的某些数据，然后使用 PHP 将这个新的 excel 文件导入数据库。

例如，excel 文件的内容将是产品及其价格，修改将针对价格。因此数据库和网站上的产品更新将是自动的。我打算将 Joomla 与 Virtuemart 一起使用。

我的问题是：Virtuemart 会允许我这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T15:15:25.283

VM 本身不支持 excel 导入，但 JED 上可能有可用的工具。我已经使用[phpExcel](http://phpexcel.codeplex.com/)完成了很多工作，这让我可以灵活地考虑电子表格的格式，但我可能碰巧使用了 VM 产品和自定义字段。

我刚刚在[VM 论坛](https://forum.virtuemart.net/index.php?topic=103157.0)上找到了这个可能有帮助的链接。我认为它适用于较早版本的 VM，但它可能为入门提供了基础。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T05:56:29.047

是的，您应该通过 csv 改进的组件导入 csv 文件没有问题，您还应该通过设置 cron 作业来运行自动导入，csv 改进的组件具有对 cron 作业的内置支持

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T12:29:38.083

VirtueMart 没有开箱即用的这个功能。寻找名为“CSVI VirtueMart”的扩展程序。我不认为它适用于 Excel 文件，但它适用于 CSV，并允许您设置列映射并将产品导入 VM。祝你好运。

# android - SQLite 语法错误：编译时：UPDATE 联系人 SET name=? 电话=+34

> ID：11373223
> 
> 赞同：-1
> 
> 时间：2012-07-07T07:40:38.423
> 
> 标签：android, sqlite, contacts

`ContentObserver`在我的项目中，当联系人表发生更改时，有一段代码正在等待调用。发生这种情况时，我会一一检查表中的每个联系人是否已更改或已创建。然后，根据这一点，我将更改保存在自己的表上。但它给了我错误。这是我的代码：

```
while (phones.moveToNext()) {
            try {
                name = phones
                        .getString(phones
                                .getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
                phoneNumber = phones
                        .getString(phones
                                .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

                JSONObject jobject = db.select_contact(name, phoneNumber);

                String type1 = jobject.getString("type");

                if (type1.equals("upload")) {
                    Log.i("********", "Upload on the db" + name + "  "
                            + phoneNumber);
                    db.contact_table(name, phoneNumber);
                } else if (type1.equals("change_name")) {
                    db.update_name(name, phoneNumber);
                    Log.i("********", "Change name and upload " + name);
                } else if (type1.equals("change_phone")) {
                    db.update_name(name, phoneNumber);
                    Log.i("********", "Change phone and upload "
                            + phoneNumber);
                }

            } catch (Exception ex) {
                ex.printStackTrace();
            }
        } 
```

还有我把它上传到我自己创建的表的部分：

```
public long update_name(String name, String number) {
    ContentValues cv = new ContentValues();
    cv.put(NAME, name);
    return ourDatabase.update(DATABASE_TABLE_4, cv, NUMBER + "=" + number,
            null);
}

public long update_number(String name, String number) {
    ContentValues cv = new ContentValues();
    cv.put(NUMBER, number);
    return ourDatabase
            .update(DATABASE_TABLE_4, cv, NAME + "=" + name, null);
} 
```

问题是在数据库上的上传更改部分，它给了我这个错误：

```
07-07 09:28:41.412: W/System.err(11667): android.database.sqlite.SQLiteException: near "629": syntax error: , while compiling: UPDATE contacts SET name=? WHERE phone=+34 629 21 00 80
07-07 09:28:41.412: W/System.err(11667):    at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
07-07 09:28:41.412: W/System.err(11667):    at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:68)
07-07 09:28:41.412: W/System.err(11667):    at android.database.sqlite.SQLiteProgram.compileSql(SQLiteProgram.java:143)
07-07 09:28:41.412: W/System.err(11667):    at android.database.sqlite.SQLiteProgram.compileAndbindAllArgs(SQLiteProgram.java:361)
07-07 09:28:41.412: W/System.err(11667):    at android.database.sqlite.SQLiteStatement.acquireAndLock(SQLiteStatement.java:260)
07-07 09:28:41.412: W/System.err(11667):    at android.database.sqlite.SQLiteStatement.executeUpdateDelete(SQLiteStatement.java:84)
07-07 09:28:41.412: W/System.err(11667):    at android.database.sqlite.SQLiteDatabase.updateWithOnConflict(SQLiteDatabase.java:1936)
07-07 09:28:41.412: W/System.err(11667):    at android.database.sqlite.SQLiteDatabase.update(SQLiteDatabase.java:1887)
07-07 09:28:41.412: W/System.err(11667):    at com.background.Database.update_name(Database.java:215)
07-07 09:28:41.417: W/System.err(11667):    at com.extract.Contacts.onChange(Contacts.java:69)
07-07 09:28:41.417: W/System.err(11667):    at android.database.ContentObserver$NotificationRunnable.run(ContentObserver.java:43)
07-07 09:28:41.417: W/System.err(11667):    at android.os.Handler.handleCallback(Handler.java:605)
07-07 09:28:41.417: W/System.err(11667):    at android.os.Handler.dispatchMessage(Handler.java:92)
07-07 09:28:41.417: W/System.err(11667):    at android.os.Looper.loop(Looper.java:137)
07-07 09:28:41.417: W/System.err(11667):    at android.app.ActivityThread.main(ActivityThread.java:4507)
07-07 09:28:41.422: W/System.err(11667):    at java.lang.reflect.Method.invokeNative(Native Method)
07-07 09:28:41.422: W/System.err(11667):    at java.lang.reflect.Method.invoke(Method.java:511)
07-07 09:28:41.422: W/System.err(11667):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
07-07 09:28:41.422: W/System.err(11667):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
07-07 09:28:41.422: W/System.err(11667):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T07:44:25.400

这个：

```
WHERE phone=+34 629 21 00 80 
```

应该是这样的：

```
WHERE phone="+34 629 21 00 80" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T11:30:47.917

你的语法是错误的。要在 SQL 中测试字符串值，您应该使用“Like”运算符。

你的 Where 声明应该是这样的：

```
WHERE phone LIKE "+34 629 21 00 80" 
```

这是正确的答案：

```
public long update_name(String name, String number) {
    ContentValues cv = new ContentValues();
    cv.put(NAME, name);
    return ourDatabase.update(DATABASE_TABLE_4, cv, NUMBER + " LIKE ?",
        new String[]{number});
}

public long update_number(String name, String number) {
    ContentValues cv = new ContentValues();
    cv.put(NUMBER, number);
    return ourDatabase
        .update(DATABASE_TABLE_4, cv, NAME + " LIKE ?", new String[]{name});
} 
```

# android - 在 Android 上的根设备上切换 gps

> ID：11373234
> 
> 赞同：5
> 
> 时间：2012-07-07T07:42:19.887
> 
> 标签：android, gps, toggle, root

从某些 Android 版本（我认为是 2.3.x）开始，无论应用程序拥有什么权限，您都无法通过 API 打开/关闭 GPS。过去，可以通过利用电源控制小部件中的错误（参见[此处](http://code.google.com/p/android/issues/detail?id=7890)），但现在已修复。

假设我有 root 访问权限，如何打开和关闭 GPS？

* * *

编辑：[**这**](https://stackoverflow.com/a/12642918/878126)是您获得读取 jelly bean 日志的权限的方式，普通应用程序不再允许这样做。我尝试对 WRITE_SECURE_SETTINGS 权限使用类似的解决方案来切换 gps ，但它没有用。

* * *

编辑：到目前为止，我发现只有一个有效的解决方案：将应用程序转换为系统应用程序（可以在[此处](https://stackoverflow.com/a/14850224/878126)找到一个有效的解决方案，甚至可以在 android 4.2.1 上工作）。但是，我想到的是从一开始就使用root绕过它，因为root权限可以根据我所知道的做所有事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T23:14:48.930

我在Android源代码中看了一点，发现以下代码

```
 public static final boolean isLocationProviderEnabled(ContentResolver cr, String provider) {
            String allowedProviders = Settings.Secure.getString(cr, LOCATION_PROVIDERS_ALLOWED);
            return TextUtils.delimitedStringContains(allowedProviders, ',', provider);
        }

  /**
   * Thread-safe method for enabling or disabling a single location provider.
   * @param cr the content resolver to use
   * @param provider the location provider to enable or disable
   * @param enabled true if the provider should be enabled
   */
        public static final void setLocationProviderEnabled(ContentResolver cr,
                String provider, boolean enabled) {
            // to ensure thread safety, we write the provider name with a '+' or '-'
            // and let the SettingsProvider handle it rather than reading and modifying
            // the list of enabled providers.
            if (enabled) {
                provider = "+" + provider;
            } else {
                provider = "-" + provider;
            }
            putString(cr, Settings.Secure.LOCATION_PROVIDERS_ALLOWED, provider);
        } 
```

我相信，如果您具有 root 访问权限，那么您可以读取和写入 Settings.Secure。这样你应该能够控制 GPS (setLocationProviderEnabled)。

但是，据我了解，它不会关闭 GPS 硬件，只会忽略此位置提供程序。

我不知道会与 GPS 对话并关闭硬件的接口。但是，您拥有的另一个选项是禁用负责 GPS 的内核模块（我不知道它的名称）。

**更新 1**

我检查了 WRITE_SECURE_SETTIONS 在 Android (4.1) 中是如何定义的。这里是

```
 <permission android:name="android.permission.WRITE_SECURE_SETTINGS"
        android:permissionGroup="android.permission-group.DEVELOPMENT_TOOLS"
        android:protectionLevel="signature|system|development"
        android:label="@string/permlab_writeSecureSettings"
        android:description="@string/permdesc_writeSecureSettings" /> 
```

基于“系统”级别。将其添加到应用程序的清单中，将此应用程序复制到系统映像（您需要将其挂载为可写），您应该一切顺利。

还有一件事情。uid shell 有这个权限。

```
 <assign-permission name="android.permission.WRITE_SECURE_SETTINGS" uid="shell" /> 
```

我不记得了，但是有一些方法可以临时更改 uid（如果您是 root）。我在 Android 代码中的某个地方。因此，您可以将 uid 更改为 shell，执行某些操作并将其更改回来。

**更新 2**

我找到了chaing uid的这种方法。

如果您下载[AOSP](http://source.android.com/)，您可以在很多地方找到它在本地库中的使用方式

./base/cmds/screenshot/screenshot.c

它确实 setuid(AID_SHELL);

./native/cmds/dumpstate/dumpstate.c

setuid(AID_SHELL)

它在其他几个地方。

我认为您应该尝试使用它来获得具有 WRITE_SECURE_SETTINGS 权限的 AID_SHELL 组。

*更新 3*

我不确定细节。我相信应该有一个用于 gps 硬件的本机驱动程序和 unix 设备。但是，它可以在不同的设备上以不同的方式命名。

您可以尝试使用[rmmod](http://linuxcommand.org/man_pages/rmmod8.html) linux 命令删除某些模块。我相信它应该禁用gps。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-10T16:05:21.347

不需要系统应用程序只需使用 su 在高精度模式下启用 gps 只需使用

```
 Process proc=Runtime.getRuntime().exec(new String[]{"su",
"pm grant com.your_app_packagename android.permission.WRITE_SECURE_SETTINGS",
"settings put secure location_providers_allowed gps,network,wifi"});
 proc.waitFor(); 
```

在后台线程上运行这些命令:)

[此外，您可以在此处](https://android.stackexchange.com/questions/40147/is-it-possible-to-enable-location-services-via-shell/114033#114033?s=7eb820622b1448118ffbcf373b489cc5)参考此链接

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T22:54:59.003

这个[SO Question](https://stackoverflow.com/questions/4721449/enable-gps-programatically-like-tasker/10004614)似乎最接近与该主题相关的任何内容。

在 2.2 版之前存在一个漏洞利用，可以更改 GPS 设置。在 2.3 之后，目前似乎没有用户干预是不可能的。

以下是几次不成功尝试的答案/评论： -[如何在 Android 上以编程方式启用或禁用 GPS？](https://stackoverflow.com/questions/4721449/enable-gps-programatically-like-tasker/10004614#comment5223375_4725106) - [https://stackoverflow.com/a/10004614/238722](https://stackoverflow.com/a/10004614/238722)

显然有一种使用 BusyBox 的方法，但我在网上找不到任何可靠的东西。来源：[https ://stackoverflow.com/a/14850224/238722](https://stackoverflow.com/a/14850224/238722)

**更新**

与 BusyBox 相关的[答案包含此工作](https://stackoverflow.com/a/14850224/238722)[示例项目](http://rapidshare.com/files/1458124346/GPSToggler-20130222.7z)可供下载。

# android - java.lang.RuntimeException：执行 doInBackground() 时发生错误

> ID：11373238
> 
> 赞同：1
> 
> 时间：2012-07-07T07:43:25.317
> 
> 标签：android, android-asynctask

异常堆栈跟踪：

> java.lang.RuntimeException: 执行 doInBackground() E/AndroidRuntime(695) 时发生错误：在 android.os.AsyncTask$3.done(AsyncTask.java:200) E/AndroidRuntime(695): 在 java.util.concurrent .FutureTask$Sync.innerSetException(FutureTask.java:273) E/AndroidRuntime(695): 在 java.util.concurrent.FutureTask.setException(FutureTask.java:124) E/AndroidRuntime(695): 在 java.util.concurrent .FutureTask$Sync.innerRun(FutureTask.java:307) E/AndroidRuntime(695): at java.util.concurrent.FutureTask.run(FutureTask.java:137) E/AndroidRuntime(695): at java.util.concurrent .ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068) E/AndroidRuntime(695): 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561) E/AndroidRuntime(695): 在 java.lang.Thread .run（线程.java：1096）E/AndroidRuntime（695）：引起：java.lang.NoClassDefFoundError：com.google.gson.Gson E/AndroidRuntime（695）：在com.amphisoft.mebox.LoginActivity$LoginTask.doInBackground（LoginActivity.java:167 ) E/AndroidRuntime(695)：在 com.amphisoft.mebox.LoginActivity$LoginTask.doInBackground(LoginActivity.java:1) E/AndroidRuntime(695)：在 android.os.AsyncTask$2.call(AsyncTask.java:185) E/AndroidRuntime(695): 在 java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305) E/AndroidRuntime(695): ... 4 更多java:1) E/AndroidRuntime(695): 在 android.os.AsyncTask$2.call(AsyncTask.java:185) E/AndroidRuntime(695): 在 java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java :305) E/AndroidRuntime(695): ... 4 更多java:1) E/AndroidRuntime(695): 在 android.os.AsyncTask$2.call(AsyncTask.java:185) E/AndroidRuntime(695): 在 java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java :305) E/AndroidRuntime(695): ... 4 更多

这是我的代码：

```
protected User doInBackground(User... user) {
        HttpClient httpClient = new DefaultHttpClient();
        try {
            HashMap<String, String> parameters = new HashMap<String, String>();
            parameters.put("username", user[0].username);
            parameters.put("password", user[0].password);
            String response = HTTPUtil.post("/user/login.json", parameters,
                    null);
            System.out.println("Response:" + response);
            Gson gson = new Gson();
            User userObj = gson.fromJson(response, User.class);
            Store.getInstance().user = userObj;

        } 
```

我尝试在库中多次添加 gson-2.1jar。但得到与未找到类定义相同的错误。请帮助我。提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T07:48:23.197

创建一个`libs`文件夹并将*gson*放在那里，然后将该文件夹添加到库路径中。

看到[这个](https://stackoverflow.com/questions/3642928/adding-a-library-jar-to-an-eclipse-android-project)

# mysql - 如何通过查询将字段的一部分与另一个字段中的数据匹配？

> ID：11373239
> 
> 赞同：1
> 
> 时间：2012-07-07T07:43:30.797
> 
> 标签：mysql, sql

我有 2 个表 table1 和 table2：

*   table1 包含一个以`id`值`1212`（示例）命名的字段。
*   table2 有一个以`action`数据命名的字段，例如`added 1212`or `updated 1212`。

现在检查这个查询。

```
SELECT t1.*, t2.name
FROM table1 t1, table2 t2
WHERE t2.action LIKE 'added t1.id' 
```

我想将`name`第二个表中的字段添加到仅包含`added`（`updated`不需要）数据的第一个表中。这个条件的 where 子句是什么？我该如何查询这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T08:32:42.567

我是这样做的。

```
SELECT t1.*, t2.name
FROM table1 t1, table2 t2
WHERE t1.id = (RIGHT(t2.action, 4)) AND t2.action LIKE 'added %' 
```

感谢所有试图帮助我的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T07:55:25.227

最好将`action`列分为两列，一列用于操作类型，一列用于操作目标。然后你可以加入这两个表。

```
SELECT t1.*, t2.name
FROM table1 t1
INNER JOIN table2 t2 ON t1.id = t2.action_target
WHERE t2.action_type = 'added' 
```

# android - Android 错误 java.lang.OutOfMemoryError：位图大小超出 VM 预算

> ID：11373240
> 
> 赞同：-1
> 
> 时间：2012-07-07T07:43:36.750
> 
> 标签：android

将图像从资产加载到数组列表时出现异常错误。这是日志中的错误 cat: ***E/AndroidRuntime(2837): java.lang.OutOfMemoryError: bitmap size超出VM budget***

请有人帮我解决这个问题，在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T07:48:52.737

有一次，我尝试重新调整图像大小，我也遇到了同样的问题，我使用了下面的代码，您可以根据自己的需要进行修改，

```
public Bitmap custom_SizedImage(String intent_data2) {

        Options options = new Options();
        options.inJustDecodeBounds = true;
        BitmapFactory.decodeFile(intent_data2, options);
        double sampleSize = 0;
        Boolean scaleByHeight = Math.abs(options.outHeight - targetHeight) >= Math
                .abs(options.outWidth - targetWidth);

        if (options.outHeight * options.outWidth * 2 >= 1638) {
            sampleSize = scaleByHeight ? options.outHeight / targetHeight
                    : options.outWidth / targetWidth;
            sampleSize = (int) Math.pow(2d,
                    Math.floor(Math.log(sampleSize) / Math.log(2d)));
        }
        options.inJustDecodeBounds = false;
        options.inTempStorage = new byte[128];
        while (true) {
            try {
                options.inSampleSize = (int) sampleSize;
                           // here you can do you Decode process
                //mBitmap = BitmapFactory.decodeFile(intent_data2, options);

                break;
            } catch (Exception ex) {
                try {
                    sampleSize = sampleSize * 2;
                } catch (Exception ex1) {

                }
            }
        }
        return scaledBitmap;

    } 
```

# javascript - 用 CSS 在 div 上切换位置？

> ID：11373245
> 
> 赞同：0
> 
> 时间：2012-07-07T07:44:35.563
> 
> 标签：javascript, html, css

我正在用 CSS 媒体查询为移动设备构建一个网站，我需要在 3 个 div 上切换位置。

这就是它现在的样子：http: [//jsfiddle.net/snowman/3kZW2/](http://jsfiddle.net/snowman/3kZW2/)

这就是我需要的：http: [//jsfiddle.net/snowman/7S7e9/](http://jsfiddle.net/snowman/7S7e9/)

仅更改版本 1 的 css 是否有可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T07:54:03.030

实现此目的的一种方法是在 DIVS 上设置宽度，然后使用 float right：

[http://jsfiddle.net/wabJn/](http://jsfiddle.net/wabJn/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T08:08:01.737

这里看看[http://jsfiddle.net/3kZW2/5/](http://jsfiddle.net/3kZW2/5/)

我使用了绝对定位。如果 div 大小发生变化，您可能需要根据需要设置宽度和位置。一个更优雅的解决方案是在标记中将 div2 移动到 div1 上方，此处为[http://jsfiddle.net/3kZW2/4/](http://jsfiddle.net/3kZW2/4/)

# php - 如何从函数中返回变量？

> ID：11373247
> 
> 赞同：0
> 
> 时间：2012-07-07T07:44:51.137
> 
> 标签：php, function

我正在尝试从函数返回一个变量并将其打印出来。它现在显示意外的 T_STRING.... 有人可以帮忙吗？

```
function reg_word($i){
        $reg_word = "/[^A-Za-z0-9 ]/";
        $i = preg_replace($reg_word, '', $i);
    }

$suggestion = function reg_word($_POST['suggestions']);

    print_r($suggestion); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T07:46:38.517

```
function reg_word($i){
    $reg_word = "/[^A-Za-z0-9 ]/";
    return preg_replace($reg_word, '', $i);
}

$suggestion = reg_word($_POST['suggestions']);

print_r($suggestion); 
```

你以前有`function`关键字`reg_word($_POST['suggestions']);`- 你不需要它。您需要使用`return`关键字从函数返回某些内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T07:46:46.157

您有一个`function`关键字错误，请尝试：

```
function reg_word($i){
        $reg_word = "/[^A-Za-z0-9 ]/";
        $i = preg_replace($reg_word, '', $i);
    }

$suggestion = reg_word($_POST['suggestions']);

    print_r($suggestion); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T07:48:01.280

错误`function`的关键字，您不会在函数中返回任何值。

```
function reg_word($i){
        $reg_word = "/[^A-Za-z0-9 ]/";
        return preg_replace($reg_word, '', $i); // return added
    }

$suggestion = reg_word($_POST['suggestions']); // here function was

    print_r($suggestion); 
```

# c# - 如何使用 html5 获得完整的离线支持

> ID：11373248
> 
> 赞同：2
> 
> 时间：2012-07-07T07:45:05.040
> 
> 标签：c#, asp.net-mvc, html, offline-caching, manifest.cache

这一直困扰着我，我有一个需要离线支持的 .net MVC 应用程序。我将 Manifest 文件动态呈现为视图。

在使页面刷新时，我观察到的是-

1.  第一次一切都是新鲜的。
2.  第二次，浏览器 (Chrome) 只请求 Manifest 文件。
3.  现在在所有后续请求中，仅请求 Manifest 文件（服务器返回 200 响应）并从缓存中获取其他文件。

这并没有给我完整的离线支持，因为浏览器仍在向服务器发出请求。理想情况下，如果应用程序支持离线功能，它应该在我的 IIS 停止时仍然可以工作，对吗？

为了解决这个问题，我只在清单文件中添加了 2 小时的到期日期（例如）。这使我的问题在两个方面变得更糟-

1.  除非清单文件过期，否则浏览器不会在重新联机时获取最新数据。
2.  如果应用程序仍然离线 2 小时后，它会返回 404 错误（不知道为什么），因为清单文件已过期并且服务器已关闭。

# java - 我搜索非二叉树（n叉树）的方法有什么问题？

> ID：11373249
> 
> 赞同：1
> 
> 时间：2012-07-07T07:45:08.520
> 
> 标签：java, search

嗨，我有这段代码来搜索 n 元树，但它工作正常，我不知道在搜索 n4 和 n5 时它有什么问题，它返回 n3 有什么问题？ ![在此处输入图像描述](../Images/d08ecd797e6de11102739c4d78b44c7b.png)

```
public FamilyNode findNodeByName(FamilyNode nodeName ){
       if(this.name.equals(nodeName.name)){
          // We found a node named nodeName, return it
          return this;
       } 
       // That's not me that you are looking for, let's see my kids

           for(FamilyNode child : this.children){
            if(child.findNodeByName(nodeName) != null) 
              return child;
                // We found what we are looking, just return from here
            //    return child;

       }
       // Finished looping over all nodes and did not find any, return null
       return null;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T07:50:17.057

原因是你交还了找到节点的节点。一旦找到一个节点，就需要返回这个节点，如果找到 a 的父节点`FamilyNode`需要返回 found `FamilyNode`。`found`检查变量做了什么。

你需要做这样的事情：

```
FamilyNode found = child.findNodeByName(nodeName);
if(found != null) 
    return found; 
```

整个方法将如下所示：

```
public FamilyNode findNodeByName(FamilyNode nodeName ){
    if(this.name.equals(nodeName.name)){
        return this;
    } 
    for(FamilyNode child : this.children){
        FamilyNode found = child.findNodeByName(nodeName);
        if(found != null) 
            return found;
    }
    return null;
} 
```

# php - WordPress 插件：如何创建新的子页面？

> ID：11373250
> 
> 赞同：0
> 
> 时间：2012-07-07T07:45:26.873
> 
> 标签：php, wordpress, plugins

我必须编写一个 WordPress 插件，它应该提供一个带有某种联系表格的新子页面。我制作的插件仅使用钩子更改了现有文件中的某些内容，而且我不知道如何创建一个嵌入到主 Wordpress 布局中的新子页面。该插件还应该将指向该子页面的链接添加到博客的主导航中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T07:26:58.660

我知道这很烦人，但是...您无法在您制作的插件中在实际博客上创建页面。但是，您可以制作这样的简码`[contact-form]`来输出表单。用户只需将该短代码放在页面上，它就会将表单放在那里。可以在此处找到一些短代码参考：[ShortCode API](http://codex.wordpress.org/Shortcode_API)。但是创建短代码的主要语法是这样的：

```
//[foobar]
function foobar_func( $atts ){
 return "foo and bar";
}
add_shortcode( 'foobar', 'foobar_func' ); 
```

只需将表单代码放入函数中并更改名称即可。不过，您不需要属性。对于您的情况，您只需要执行以下操作：

```
function contact_form(){
 //Code that process form
 //Actual code that outputs the form
} 
```

你去吧！谢谢！

伊桑·布劳威尔

# mysql - 如何在 MySQL 语句中使用二进制/位域文字

> ID：11373253
> 
> 赞同：0
> 
> 时间：2012-07-07T07:45:41.183
> 
> 标签：mysql, bit-manipulation

```
select (bin(~'101010101010101')) as Result;

Result is : '1111111111111111101001000010000111000000110011111000000101001010' 
```

这是真的吗？

我希望看到这个结果：

> '111111111111111111111111111111111111111111111111010101010101010'

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T08:03:41.053

您正在将字符串传递给按位运算。[这些操作](http://dev.mysql.com/doc/refman/5.0/en/bit-functions.html)是为 mysql 中的 BIGINT 整数定义的，因此您可能会得到意想不到的结果。

你应该试试：

```
SELECT bin(~0x5555) as Result 
```

或者：

```
SELECT bin(~b'101010101010101' ) as Result 
```

结果是：

```
'1111111111111111111111111111111111111111111111111010101010101010' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T07:52:26.730

看起来 101010101010101 被解释为十进制数。它的二进制表示是 10110111101111000111111001100000111111010110101。补充这个，你得到打印结果。

# iphone - “弹出”后无法推送视图控制器

> ID：11373254
> 
> 赞同：1
> 
> 时间：2012-07-07T07:46:19.557
> 
> 标签：iphone, objective-c, ios, xcode, uiviewcontroller

我从[这里](https://stackoverflow.com/questions/2415772/push-viewcontroller-from-right-to-left-with-uinavigationcontroller)得到了这段代码，它可以根据我的需要完美运行。但问题是当我想弹出视图控制器并返回主屏幕时。当我使用

```
[self.navigationController popViewControllerAnimated:YES];
```

它不是什么都不做。但是当我使用相同的代码时，它可以工作，但不是我想要的方式，从“左到右”。

这是代码，我必须做些什么才能让它以他来自的同一方向弹出视图控制器？我知道它将 viewController 放在我正在处理的之前，而不是弹出它，但是现在我该如何推送？当我尝试推动我得到错误。

```
 NSMutableArray *vcs =  [NSMutableArray arrayWithArray:self.navigationController.viewControllers];
    [vcs insertObject:levelsView atIndex:[vcs count]-1];
    [self.navigationController setViewControllers:vcs animated:NO];
    [self.navigationController popViewControllerAnimated:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T11:30:49.173

首先深入调试您的代码片段。检查你的数组 vcs，对象正在插入吗？如果是，那么检查`self.navigationController`不是零。如果没有，那么详细说明您的代码。如果您不想公开您的代码，请尝试替代动画。

尝试使用 CATransition 动画效果。

```
CATransition * trans = [CATransition animation];
trans.type = kCATransitionPush;
trans.subtype = kCATransitionFromLeft;
trans.duration = 0.22; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T07:58:29.343

您应该使用

```
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

# iphone - 将双精度分配给另一个具有小数点后 1 个数字的双精度

> ID：11373256
> 
> 赞同：0
> 
> 时间：2012-07-07T07:46:28.550
> 
> 标签：iphone, objective-c, cocoa

我想将双精度值分配给另一个双精度值，但只打印小数点后的 1 个数字，假设我有这个随机**双**精度值，现在是**23.12906370532668**

如何将其转换为仅**23.1**，但保持双值？我可以说：

```
NSLog(@"%4.1f\n", double); 
```

但这被打印为字符串，我想将其分配给另一个新的双精度。从`double one = 23.12906370532668;`到`double two = 23.1;`什么是最好的方法以及如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T08:00:49.933

不确定您要做什么，但这可能是您想要的

```
double d = 23.12906370532668;
NSString *str = [NSString stringWithFormat:@"%4.1f\n", d];
double d2 = [str doubleValue]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T08:08:49.457

您可以乘以 10，舍入/截断/天花板/地板（根据您的需要）到一个整数值，然后除以 10。

```
double two = rint(10.0 * one) / 10.0; 
```

# java - 套接字：BufferedOutputStream 还是只是 OutputStream？

> ID：11373259
> 
> 赞同：10
> 
> 时间：2012-07-07T07:46:47.487
> 
> 标签：java, sockets, tcp, bufferedinputstream, bufferedoutputstream

为了在 Java 中通过 TCP 获得最快的传输速度，最好：

选项 A：

```
InputStream in = socket.getInputStream();
OutputStream out = socket.getOutputStream(); 
```

选项 B：

```
BufferedInputStream in = new BufferedInputStream(socket.getInputStream());
BufferedOutputStream out = new BufferedOutputStream(socket.getOutputStream()); 
```

我已经读到将超过 8 KiB 的数据写入 OutputStream 时性能会受到影响，建议将其以小块的形式写入，而不是一次写入 8 KiB。8 KiB 是 BufferedOutputStream 的默认缓冲区大小。

但是，我还读到，在通过网络传输数据时，最好尽快清除字节。这意味着使用缓冲区和小块写入会增加不必要的开销。

那么，选项A还是选项B？哪个效果最好？

现在我猜选项 A 提供最高的传输速度，同时比选项 B 消耗更多的 CPU。选项 B 可能会更好，因为它不会慢很多，但节省了大量的 CPU。

--

额外问题：触摸 TCP 窗口大小是个好主意吗？例如，将其设置为 64 KiB：

```
socket.setReceiveBufferSize(65536);
socket.setSendBufferSize(65536); 
```

我尝试在测试机器上将其设置为 128 KiB，因为我读到它可以提高速度，但是当服务器有几个连接时，CPU 处于 100%，而不是像我不理会它时的 ~2%。我猜 128 KiB 太高了，除非你有一个可以处理流量高峰的好服务器，但是将它设置为 32 KiB 是否明智？我认为我的默认值是 8 KiB。

（“套接字”是“java.net.Socket”）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-08T08:00:00.550

我不知道您从哪里读到所有这些废话，但它完全是从头到尾的。一次写入 TCP 连接的次数越多越好，一次读取的次数也越多。我总是在应用程序和套接字流之间使用缓冲流、读取器或写入器。在某些情况下，例如 SSL，一次直接写入一个字节会导致 40 倍的数据爆炸。

> 触摸 TCP 窗口大小是个好主意吗？例如，将其设置为 64 KiB

您不能“触摸 TCP 窗口大小”。您可以通过您提到的 API 增加其最大值，这确实是一个好主意。

# javascript - 如何在使用javascript四舍五入时忽略“，”？

> ID：11373265
> 
> 赞同：0
> 
> 时间：2012-07-07T07:47:16.427
> 
> 标签：javascript

```
<html>
<head></head>
<body>
<label class="xyz">
<span class="aaaa">Rs. </span>
 1,399.00
</label>
<label class="xyz">
<span class="aaaa">Rs. </span>
 199.00
</label>
<script>
function deciremove(){
var all = document.getElementsByClassName('xyz');
for(var i=0; i< all.length; i++)
{

var x = all[i].childNodes[2].nodeValue;
x= Math.round(x);
all[i].childNodes[2].nodeValue = x;
}
}
deciremove();
</script>
</body>
</html> 
```

在上面的代码中，我想要四舍五入小数点两个值，当一个值为 199.00 时，它运行良好 n 给出 199，但当 1,399.00 它给出 NaN。这是因为“，”。那么我该如何忽略或删除“，”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T07:51:31.463

替换逗号。

```
x= Math.round(x.replace(/,/g, '')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T07:51:35.090

您需要将“，”替换为“”

```
 x= Math.round(x.replace(/\,/g,'')); 
```

**[演示](http://jsfiddle.net/3ASSZ/1/)**

# android - ActivityNotFoundException：没有找到处理 Intent { act=splashscreen.app.test.CLEARSCREEN } 的活动？

> ID：11373274
> 
> 赞同：-3
> 
> 时间：2012-07-07T07:48:38.110
> 
> 标签：android, android-intent

我遇到了这个问题..基本上这是创建启动画面的简单方法，但是在加载启动画面后我想加载主窗体，但在这里我遇到了这个问题…………我已将活动添加到清单也......这是我的java代码

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
        setContentView(R.layout.splash);
        Thread logotimer=new Thread(){
            public void run()
            {
            try
            {
                int timer=0;
                while(timer<5000)
                {
                    sleep(100);
                    timer=timer+100;

                }
                startActivity(new Intent("splashscreen.app.test.CLEARSCREEN"));
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            finally
            {
                finish();
            }

            }
        };
        logotimer.start();

    }
} 
```

这是我包含的清单活动

```
 <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".SplashscreenActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity 
        android:name=".menu"
        android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.CLEARSCREEN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T07:57:36.553

将此行更改`startActivity(new Intent("splashscreen.app.test.CLEARSCREEN"));`为

```
startActivity(new Intent(YourActivity.this,SecondActivity.class)); 
```

供您参考，以后不要使用 Activity 或类名作为菜单。

在你的明显使用中，

```
<activity 
        android:name=".menu"
        android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

或者

```
<activity 
        android:name=".menu"/> 
```

请参阅本教程制作启动画面[http://www.codeproject.com/Articles/113831/An-Advanced-Splash-Screen-for-Android-App](http://www.codeproject.com/Articles/113831/An-Advanced-Splash-Screen-for-Android-App)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T07:54:49.963

用这个：

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".SplashscreenActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity 
        android:name=".menu"
        android:label="@string/app_name">
    </activity>
</application> 
```

和：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);
    Thread logotimer=new Thread(){
        public void run()
        {
        try
        {
            int timer=0;
            while(timer<5000)
            {
                sleep(100);
                timer=timer+100;

            }
            Intent intent = new Intent(YourSplashActivityName.this,TagetActivityName.class);
            startActivity(intent);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        finally
        {
            finish();
        }

        }
    };
    logotimer.start();

} 
```

# java - 了解产生线程的类上的线程和同步

> ID：11373276
> 
> 赞同：1
> 
> 时间：2012-07-07T07:48:39.943
> 
> 标签：java, multithreading, static, synchronization

好的，那么有人可以在这里向我解释我的知识差距吗？

最初下面的示例试图同步一个实例方法，但后来意识到我生成了一个新实例，因此不会发生锁定。

所以我决定对类的静态方法进行锁定，希望线程能够按顺序运行，但仍然没有运气。任何人都可以解释我的方式的错误吗？（请容忍我，可能有更好的方法来做到这一点，它只是让理解正确，我是一名进入 Java 的 PHP 开发人员，我喜欢它 - 但我只有 2 天时间；-)）

所以此时数字以随机顺序打印出来。

1级

```
package learningjava;

public class LearningJava {
    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {

      ThreadCaller ob1 = new ThreadCaller("This is a test string 1");
      ThreadCaller ob2 = new ThreadCaller("This is a test string 2");
      ThreadCaller ob3 = new ThreadCaller("This is a test string 3");
      ThreadCaller ob4 = new ThreadCaller("This is a test string 4");
      ThreadCaller ob5 = new ThreadCaller("This is a test string 5");

      try {

           ob1.t.join();
           ob2.t.join();
           ob3.t.join();
           ob4.t.join();
           ob5.t.join();

      } catch (InterruptedException e) {

          System.out.println(e);

      }

    }    

} 
```

2 级

```
package learningjava;

public class ThreadCaller implements Runnable {

    private String message;
    public Thread t;

    public ThreadCaller(String text) {
        message = text;
        t = new Thread(this);
        t.start();
    }

    public static synchronized void echo(String message) {
        System.out.println(message);
    }

    public void run() {
            ThreadCaller.echo(this.message);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T07:54:59.940

> 任何人都可以解释我的方式的错误吗？

基本上，您期待的订单根本无法保证。你`start()`连续调用了很多线程......不能保证哪个线程将首先开始执行。您拥有静态同步方法这一事实仅意味着一次只有一个线程将执行该方法 - 它不能保证任何关于排序的事情。

想象一下，您有一条跑道，在跑道下方 100 米处有一个单车道大门。你开始比赛 - 哪个选手会先到达大门？

幸运的是，这通常不是问题——如果值得启动多个线程来做某事，您*通常*不会关心它们的执行顺序。如果你这样做了，是时候重新检查你的设计了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T07:56:21.947

线程的调度是不可预测的。

你试图做的事情在某种程度上违背了它的目的，不是吗？

如果您想要顺序，请使您的执行顺序或使用[ExecutorService](http://download.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html#invokeAll%28java.util.Collection%29)调用它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T08:13:29.610

无法以这种方式执行排序，因为您在加入它们之前已经启动了所有线程。

您可以使用[ExecurorService](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Executors.html#newSingleThreadExecutor%28%29) 并创建一个线程池，然后在循环中将一个线程一个接一个地传递给池并执行它。

您的代码中的其他方式不要启动线程`Runnable`，启动它`LearningJave`并在一个接一个启动后加入它。

```
Thread t1=new Thread(ob1);
   t1.start();
   t1.join();

   Thread t2=new Thread(ob2);
   t2.start();
   t2.join();
 ----
 ----- 
```

# android - android中Tablelayout中的Listview

> ID：11373286
> 
> 赞同：0
> 
> 时间：2012-07-07T07:50:14.063
> 
> 标签：android, tablelayout

在我的应用程序中，我有 1 个表格布局和 1 个数据库。现在，我想在表格布局中显示该数据库内容。但它应该看起来像一个列表视图，因为我必须在另一个下方显示条目。是否有可能表格布局中的列表视图，还给出了如何在表格布局中相应的列表视图中设置数据库条目的一些想法。

这是我的 XML 结构：

```
<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent" >

    <TableLayout
        android:id="@+id/tablelayout"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:paddingRight="2dip" >

        <TableRow>
            <TextView

                android_layout_span="2"
                android:layout_weight="1" 
                android:text="Income" />
        </TableRow>

        <TableRow>
            <TextView             
                android:layout_weight="1"
                android:text="Price:"/>

            <TextView

                android:layout_weight="1"
                android:text="Price:" />

            <ListView
        android:id="@+id/listView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1" >
    </ListView>
        </TableRow>

        <TableRow>
            <TextView

                android:layout_weight="1"
                android:text="Quantity:"/>

            <TextView

                android:id="@+id/et_url"
                android:layout_weight="1"
                android:text="Quantity:" />
        </TableRow>

    </TableLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T08:24:20.620

如果您需要将数据显示为列表/类似列表的东西，那么为什么要通过使其成为复杂结构来使用表格布局？

在包含列表视图的活动中使用您的主 list_view_layout。创建另一个像 list_item 这样的 xml 并在适配器中使用它来逐个显示数据。您可以根据需要在 list_item 的布局中使用表格布局或设计。

[**您将在vogella.com**](http://www.vogella.com/articles/AndroidListView/article.html)获得更好的知识[](http://www.vogella.com/articles/AndroidListView/article.html)

 **只需准备您的数据集，创建列表及其适配器，然后使用适配器中的数据......就是这样！

祝你好运 ：-）**

# actionscript-3 - 参考变量 AS3

> ID：11373291
> 
> 赞同：3
> 
> 时间：2012-07-07T07:51:03.617
> 
> 标签：actionscript-3, flash

我正在尝试在 Flash Professional CS6 中创建一个引用变量的简单 AS3 代码。

例子：

```
var1:int = 1;
varref = "var1"; (this is the "reference" variable, but ofcourse this is not how it's done in as3)

if (var1 == 1)
{
varref = 50
} 
```

如果运行此程序，它将尝试将当前为“var1”的变量 varref 中的字符串转换为“1”的 int。我希望它**引用**该变量，而不是它自己的变量。

一个简单的例子来说明如何做到这一点会很棒。（据我所知，可能需要一个对象，因此这种情况的简单对象示例会很棒。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T08:21:23.910

在 AS3 中，您可以引用基本类型（仅类和对象）。

你可以通过做类似的事情来实现你想要的：

```
var var1:Object = { value:1 };
var varRef:Object = var1;

if(var1.value == 1) {
    varRef.value = 50;
}

trace(varRef.value); // outputs 50;
trace(var1.value); // outputs 50; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T08:40:17.640

我正在使用这个类来创建引用： [https ://github.com/turbosqel/as3SupportLib/blob/master/as3SupportLib/src/turbosqel/data/LVar.as](https://github.com/turbosqel/as3SupportLib/blob/master/as3SupportLib/src/turbosqel/data/LVar.as)

它的使用非常简单，例如：

```
public var item:String = "some str";
{...}
var ref:LVar = new LVar (this,"item");
trace(ref.value);// return : "some str"
trace("my ref is " + ref ); // return : my ref is some str
// You can always change this on runtime :
item = "new value";
trace(ref.value); // return : new value 
```

同样的事情你可以用任何其他数据类型做。

# mysql - 插入复合主键表时出现“重复条目”

> ID：11373296
> 
> 赞同：1
> 
> 时间：2012-07-07T07:51:56.830
> 
> 标签：mysql, database, primary-key

```
CREATE TABLE IF NOT EXISTS `mytable` (
  `machine_no` varchar(50) CHARACTER SET ascii NOT NULL,
  `date` datetime NOT NULL,
  `nature` int(11) DEFAULT NULL,
  `start` time NOT NULL,
  PRIMARY KEY (`machine_no`,`date`),
  UNIQUE KEY `date` (`date`),
  UNIQUE KEY `start` (`start`),
  UNIQUE KEY `start_2` (`start`),
  UNIQUE KEY `nature` (`nature`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

该表有一个复合键。

当我尝试插入 2 条日期/时间相同但 machine_no 值不同的记录时。它说日期的重复条目。我不明白它的原因。由于它是一个复合键，它应该只在两个属性中寻找重复的条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T08:19:44.363

你的`PRIMARY KEY`作品很好：

```
PRIMARY KEY (`machine_no`,`date`), 
```

导致问题的原因是`UNIQUE KEY`您有：

```
UNIQUE KEY `date` (`date`), 
```

这不允许插入具有相同日期时间的两行。

同样，您的其他 3 个唯一键也可能会导致您的 torubles：

```
UNIQUE KEY `start` (`start`),
UNIQUE KEY `start_2` (`start`),
UNIQUE KEY `nature` (`nature`) 
```

* * *

所以，让这些键简单（不是唯一的）。

并且没有理由拥有两个仅名称不同的相同键（`start`和`start_2`）

# php - SQL 语法错误。好像我错过了什么

> ID：11373298
> 
> 赞同：1
> 
> 时间：2012-07-07T07:52:04.873
> 
> 标签：php, mysql, sql

这是我结合php的sql代码

```
$query = sprintf("SELECT SUM( value ) AS totalvalue
              FROM (
                SELECT *
                FROM answers
                WHERE user_id='%s'
                AND test_id ='%s'
                ORDER BY answers.id DESC
                LIMIT '%s'
                ) 
              AS subquery",
              $user_id,
              mysql_real_escape_string($test_id),
              $num_of_q); 
```

这是错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 8 行的 ''40' ) AS subquery' 附近使用正确的语法

这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T07:54:13.217

`''`从限制值中删除并在`%d`使用数字时使用：

```
$query = sprintf("SELECT SUM( value ) AS totalvalue
          FROM (
            SELECT *
            FROM answers
            WHERE user_id='%s'
            AND test_id ='%s'
            ORDER BY answers.id DESC
            LIMIT %d
            ) 
          AS subquery",
          $user_id,
          mysql_real_escape_string($test_id),
          $num_of_q); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T08:01:03.937

我认为您正在将 Limit value 扫描为 string 。将其读取为 int 值。这将解决我认为的问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T07:57:05.043

您不需要`LIMIT`. `LIMIT`后面需要一个数字，而您为它提供了一个字符串。

将其更改为：

```
LIMIT %d 
```

我建议对你的`WHERE`子句做同样的事情`test_id`，`user_id`如果它们是类型`INT`

# flash - 如何解析 .swf 文件中的数据？

> ID：11373304
> 
> 赞同：3
> 
> 时间：2012-07-07T07:52:57.980
> 
> 标签：flash, parsing

我正在尝试开发一个应用程序来解析来自 .swf 的数据（我希望能够从 flash 文件中读取一些字段）我该如何实现呢？还是不可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-14T13:46:15.087

您可以使用 SWF::Parser

前任：

```
use SWF::Parser;

  $parser = SWF::Parser->new( 'header-callback' => \&header, 'tag-callback' => \&tag);
  # parse binary data
  $parser->parse( $data );
  # or parse SWF file
  $parser->parse_file( 'flash.swf' ); 
```

在这里查看：[http ://search.cpan.org/~ysas/SWF-File-0.42/lib/SWF/Parser.pm](http://search.cpan.org/~ysas/SWF-File-0.42/lib/SWF/Parser.pm)

# php - 立即发布

> ID：11373307
> 
> 赞同：-2
> 
> 时间：2012-07-07T07:53:11.937
> 
> 标签：php, javascript, jquery, html

我有一个 Paypal 课程，我想回显表单，然后在用户单击付款后提交。我已经尝试过javascript，但它对我不起作用。

```
if(isset($_SESSION['user_id']))
{

include('includes/class_paypal.php');
include 'includes/class_order.php';
include 'includes/class_user.php';
include 'includes/class_permission.php';
include('includes/adminfunctions_status.php');

$invoice = new paypal();
$order = new order($_GET['pay']);

$invoice->custom = $_GET['pay'];
$invoice->amount = $order->price;
$invoice->item_name = 'Order #'.$order->id.'';
$invoice->item_number = $order->id;
$invoice->init();
}

?>

<script type="text/javascript">

$(document).ready(myfunc () {
        var frm = document.getElementById("order");
        frm.submit();
    }

</script> 
```

贝宝类

```
 var $cmd = "_xclick";
    var $business = "**";
    var $item_name;
    var $item_number;
    var $amount;
    var $no_shipping = 1;
    var $no_note = 1;
    var $currency_code = "USD";
    var $lc = 'US';
    var $bn = "PP-BuyNowBF";
    var $return;
    var $cancel_return;
    var $rm = 2;
    var $notify_url;
    var $custom;

    function init()
    {
        echo '

        <form id="order" target="paypal" action="https://www.paypal.com/cgi-bin/webscr" method="post"> 
        <input type="hidden" name="cmd" value="_cart"> 
        <input type="hidden" name="business" value="'.$this->business.'"> 
        <input type="hidden" name="item_name" value="'.$this->item_name.'"> 
        <input type="hidden" name="item_number" value="'.$this->item_number.'">
        <input type="hidden" name="amount" value="'.$this->amount.'">  
        </form>

        ';
    } 
```

如您所见，我想在初始化订单信息后发布表单。因此，当用户转到 index.php?pay=45 （45 是订单号）时，我希望文件显示表单和所有内容，然后将表单发布到 Paypal。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T07:55:26.990

尝试：

```
$(document).ready(function() {
  var frm = document.getElementById("order");
  frm.submit();
}); 
```

或者

```
$(document).ready(function() {
   $('#order')[0].submit();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T07:58:00.607

尝试这个：

```
 jQuery(document).ready(function(){
          setTimeout(function(){
             var frm = document.getElementById("order");
             frm.submit();              

          },10000);
    }); 
```

这将延迟提交 10 秒，以便用户可以查看表单。

# django - Django-nonrel：重置应用程序的语法

> ID：11373310
> 
> 赞同：1
> 
> 时间：2012-07-07T07:53:25.667
> 
> 标签：django, django-models, django-nonrel

为了重置我的应用程序，我运行了这个：

```
./manage.py reset node 
```

它给了我这个错误输出：

```
WARNING:root:The rdbms API is not available because the MySQLdb library could not be loaded.
Traceback (most recent call last):
  File "./manage.py", line 11, in <module>
    execute_manager(settings)
  File "/home/a/mywebsites/django/seperolinux/django/core/management/__init__.py", line 438, in execute_manager
    utility.execute()
  File "/home/a/mywebsites/django/seperolinux/django/core/management/__init__.py", line 379, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/home/a/mywebsites/django/seperolinux/django/core/management/base.py", line 191, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/home/a/mywebsites/django/seperolinux/django/core/management/base.py", line 220, in execute
    output = self.handle(*args, **options)
  File "/home/a/mywebsites/django/seperolinux/django/core/management/base.py", line 286, in handle
    app_output = self.handle_app(app, **options)
  File "/home/a/mywebsites/django/seperolinux/django/core/management/commands/reset.py", line 35, in handle_app
    sql_list = sql_reset(app, self.style, connection)
  File "/home/a/mywebsites/django/seperolinux/django/core/management/sql.py", line 107, in sql_reset
    return sql_delete(app, style, connection) + sql_all(app, style, connection)
  File "/home/a/mywebsites/django/seperolinux/django/core/management/sql.py", line 66, in sql_delete
    table_names = connection.introspection.get_table_list(cursor)
AttributeError: 'DatabaseIntrospection' object has no attribute 'get_table_list' 
```

如何在 Django-nonrel 中重置模型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T11:52:05.413

```
./manage.py reset node 
```

> 执行*sqlreset*为给定的应用程序创建 DROPT TABLE 和 CREATE TABLE SQL 语句。

[https://docs.djangoproject.com/en/1.3/ref/django-admin/#reset-appname-appname](https://docs.djangoproject.com/en/1.3/ref/django-admin/#reset-appname-appname)

这不适用于 App Engine 数据存储区，因为数据存储区是无模式的，因此不需要 CREATE/DROP 表命令。

如果要从数据存储区中删除现有模型，可以使用[App Engine 开发控制台](https://developers.google.com/appengine/docs/python/tools/devserver#The_Development_Console)删除模型的所有实体（只需确保在访问开发控制台时使用正确的端口）。

# php - face.com API 的替代方案

> ID：11373312
> 
> 赞同：23
> 
> 时间：2012-07-07T07:53:27.890
> 
> 标签：php, image, image-processing, image-recognition

可悲的是，由于被 Facebook 收购，face.com API 正在关闭。

*有没有像样的替代品？*

我正在寻找给定的图像是否有一张脸+关于它的人口统计内容。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-16T12:53:46.083

确实是个悲伤的消息。如果您有充分的理由并且已经拥有一个帐户，他们可能会将您延长至 2012 年 10 月：http: [//developers.face.com/extension-request/](http://developers.face.com/extension-request/)

对于其他所有人，这是我编制的潜在替代方案列表：

1.  OpenCV： http: [//opencv.willowgarage.com/](http://opencv.willowgarage.com/)（C/C++，但至少它是开源的、独立的和可下载的）
2.  Viewdle (Objective-C)... 被 Google 收购/取消，请参阅：[iPhone 上的人脸识别](https://stackoverflow.com/questions/10272129/face-recognition-on-the-iphone)
3.  Betaface API：[http](http://www.betafaceapi.com/) ://www.betafaceapi.com/ （C#/.net 或 API）
4.  Rekognition：[http:](http://rekognition.com/) //rekognition.com/ （API）
5.  Lambda 实验室： http: [//lambdal.com/](http://lambdal.com/)（API；仍处于私有测试阶段）
6.  BiometryCloud： http: [//www.biometrycloud.com/](http://www.biometrycloud.com/)（API；正如已经提到的私有测试版）
7.  天空生物测量：[http ://www.skybiometry.com/](http://www.skybiometry.com/)

以下是类似的，但更多的是在增强现实 (AR) 库方面，仅用于使用网络摄像头检测对象或运动，但可能会进行一些扩展，以检测快照或上传图像中的人脸：

1.  FaceAPI - 从网络摄像头跟踪人脸：http: [//faceapi.com](http://faceapi.com)
2.  SURF 库 - Adob​​e Flash 平台的图像识别和特征提取：[http ://code.google.com/p/in-spirit/wiki/ASSURF](http://code.google.com/p/in-spirit/wiki/ASSURF)
3.  基于内容的图像识别 - PHP 中的一个刺：http://web.archive.org/web/20120309034643/http: [//www.searchlores.org/finn_cbir_1.htm](http://web.archive.org/web/20120309034643/http://www.searchlores.org/finn_cbir_1.htm)
4.  一个不那么慢的 JavaScript 人脸检测器：http: [//liuliu.me/ccv/js/nss/](http://liuliu.me/ccv/js/nss/)
5.  通过 HTML5 Canvas 在 JavaScript 中进行人脸检测：[https ://github.com/neave/face-detection](https://github.com/neave/face-detection)

如果有人认识其他人，请随时在此处添加以使此列表尽可能全面。

更新（2013-08-20）：前几天发现这篇文章并认为我应该在这里添加它，但不确定列出的项目有多少仍然处于活动状态：http: [//blog.mashape.com/post/53379410412/list -of-40-face-detection-recognition-apis](http://blog.mashape.com/post/53379410412/list-of-40-face-detection-recognition-apis)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-08T15:26:17.640

[SkyBiometry.com](http://skybiometry.com/)有一个替代品。该 API 可免费使用。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-08T23:58:17.413

还有惠普实验室的[多媒体分析平台](http://map.hpl.hp.com)，也处于测试阶段。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-10-17T14:17:56.650

有一个名为“openbr”的开源项目，它建立在 opencv 和 Qt 之上，几乎没有什么好的 api 可供使用。很容易从 shell 中使用，并且也有 IIRC python 和 java 的适配器

来自网站的人脸识别示例：

```
$ br -algorithm FaceRecognition -compare me.jpg you.jpg 
```

Github：[https](https://github.com/biometrics/openbr) ://github.com/biometrics/openbr 网站： http: [//openbiometrics.org/](http://openbiometrics.org/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-23T10:56:19.210

[http://www.identitykit.it](http://www.identitykit.it)是一个 RESTful Web 服务，提供人脸检测和人脸识别功能。[您可以在http://www.identitykit.it/index.php/demo/login](http://www.identitykit.it/index.php/demo/login)上尝试 Web 演示以测试他们的 API

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-05-24T20:44:13.577

[api.animetrics.com](http://api.animetrics.com)提供了一个非常不错的免费人脸检测和人脸识别 api。他们的检测器不提供人口统计数据，但除了俯仰、偏航和滚动之外，它们确实在面部包括 20 个左右的特征点。他们还将生成偏离中心/旋转的面部的 3D“setpose”或面部照片图像。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-08-09T14:22:30.337

一些 face.com 开发人员的另一个选择是 BioID 的人脸识别 API，尽管它可能无法提供您正在寻找的确切内容，Noam（就人口统计而言）。

由于 BioID 的技术是为身份验证而开发的，API 不支持 face.com 的所有功能（年龄、性别、眼镜、多个面部点等），但可以做 face.com 无法做到的事情（例如更好的识别、图像质量检查、欺诈检测和自然身份验证）。

[您可以在https://www.bioid.com/solutions/solutions-by-application/bioid-for-facedotcom.html](https://www.bioid.com/solutions/solutions-by-application/bioid-for-facedotcom.html)找到更详细的差异解释

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-08-25T15:33:26.007

另一个选择是 Kairos.com 的 API。

我们有一个可用的 RESTful API，它正在积极开发中，并提供与旧的 face.com API 相同的功能。

您可以在 developer.kairos.com 上注册。

完全披露我是 Kairos 的首席技术官。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-10T04:20:00.650

请查看我们在[www.biometrycloud.com](http://www.biometrycloud.com)上的视频。我是创始人之一，过去一年我们一直在努力提供一个 RESTFULL API 来进行面部识别。首先，我们专注于人脸识别和验证。现在我们正在开放我们 API 的私有测试版，如果有足够的兴趣，我们将继续开发其他功能，例如性别、年龄组等。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-01-19T23:13:14.373

这是一个包含 75,000 个 API 调用的免费试用版 [http://cloudinary.com/documentation](http://cloudinary.com/documentation)

# c++ - 如何知道 std::list 是否已被修改

> ID：11373313
> 
> 赞同：0
> 
> 时间：2012-07-07T07:53:30.383
> 
> 标签：c++, list

> **可能重复：**
> [在递归函数中创建 std::list of value 而不是 std::list of pointers](https://stackoverflow.com/questions/11335738/create-stdlist-of-value-instead-of-stdlist-of-pointers-in-recursive-function)

我有这堂课：

```
class C
{
public:

    C* parent;
    std::list<C> children;
}; 
```

我可以以这种方式使用此类，例如：

```
C root;
C child;

root.children.push_back(child); // or other method of std::list (es: push_front, insert, ...)

// Here child.parent is root
// How can I set the parent of child? 
```

我想在我的班级内部完成这项工作而不会失去 的功能`std::list`，这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T08:07:57.093

如果我正确理解你的问题，你想要这样的东西：

```
class C {
public:
    C* parent;
    std::list<C *> children;
    explicit C(C *p = 0) : parent(p) {
        if (p) p->children.push_back(this);
    }
};

C root;
C child(&root); 
```

请注意，我更改了您的`children`列表以获取指针。只要`C`不期望管理节点的内存，这很好，只需参考它们即可。

您的问题的标题是：*如何知道 std::list 是否已被修改*。从您的评论看来，您想要的是*代理*：

```
class ListProxy {
    std::list<C *> children;
public:
    // replicate list traits
    // ...

    void push_back (C *c) {
        children.push_back(c);
        //... do something
    }

    void erase (iterator i) {
        children.erase(i);
        //... do something
    }

    //...
}; 
```

代理将列表功能委托给列表，但增加了那些会更改列表的方法的行为。

```
class C {
public:
    C* parent;
    ListProxy children;
    explicit C(C *p = 0) : parent(p) {
        if (p) p->children.push_back(this);
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T08:06:12.673

你可以在你的类中实现接口函数。例如：

```
class C
{
private:
    std::list<C *> children;
public:
    C* parent;

    void AddChild(C *child);
}; 
```

然后，只需在 AddChild 函数中执行此操作：

```
void C::AddChild(C *child)
{
     children.push_back(child);

     // Do internal work here...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T08:06:23.970

我建议您添加一个成员函数：

```
class C
{
    C* parent;
    std::list<C> children;  //make it private first
public:
    void add_child(C const & child)
    {
         children.push_back(child);
         children.back().parent = this; //make `this` child's parent
    }    
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T08:04:58.893

首先：由于您似乎有自己的链表，您可以在`AddChild`您的类中添加一个方法。这可以使用 std::list 功能。

我很确定您不想存储值而是指向 C 的指针，因为您可能不想在每次将 C 添加到列表时都复制它。

```
public:
void AddChild(C *child)
{
    this.children.push_back(child);
} 
```

按如下方式使用它：

```
C *root = new C();
C *child = new C();
child->parent = root;
root->AddChild(child); 
```

您也可以在 AddChild 中设置父级，这使您有机会获得连贯的列表（每个子级都有一个适当的父级集）。

但是，如果您对更改感兴趣，请使用**观察者模式**。

这是一篇关于此的文章，其中包含 C++ 代码示例：[观察者模式](http://sourcemaking.com/design_patterns/observer)

# php - Zend 框架中的 MVC 控制器无法理解

> ID：11373317
> 
> 赞同：2
> 
> 时间：2012-07-07T07:53:55.433
> 
> 标签：php, zend-framework, zend-studio

我是 php5 和 Zend Framework 的新手，我正在使用 Zend Studio。我浏览了许多文档，但我仍然无法理解 Zend 中控制器背后的概念。

简而言之，我正在尝试开发一个用于帐户处理的小型 Web 应用程序。我没有对默认的 index.php 文件进行任何更改。这里是：

```
<?php

// Define path to application directory
defined('APPLICATION_PATH')
|| define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/../application'));

// Define application environment
defined('APPLICATION_ENV')
||define('APPLICATION_ENV', (getenv('APPLICATION_ENV') ? getenv ('APPLICATION_ENV'):    'production'));

// Ensure library/ is on include_path
set_include_path(implode(PATH_SEPARATOR, array(
       realpath(APPLICATION_PATH . '/../library'),
       get_include_path(),
)));

/* function _initView()
{
   $view = new Zend_View();
   $view->addScriptPath(APPLICATION_PATH . '/views/scripts/');
} */

/** Zend_Application */
require_once 'Zend/Application.php';

// Create application, bootstrap, and run
$application = new Zend_Application(
       APPLICATION_ENV,
       APPLICATION_PATH . '/configs/application.ini'
);
$application->bootstrap()
->run(); 
```

这是我的 IndexController.php

```
<?php

class IndexController extends Zend_Controller_Action
{

public function init()
{
    /* Initialize action controller here */
}

 public function indexAction()
 {

 }

} 
```

我也没有在那里做任何改变，因为我无法理解这个概念。

我的 index.phtml ：

```
<html>
<style>
</style>

<body>
<img alt="" src="http://localhost/Accounts/application/views/scripts/images/logo.png">
<div id="text" >
<h1>Welcome</h1><br><hr>
<h4>Please Log In To View The Main Page</h4></div><br><br><br>
<form action="main/main" method="post"><center><table>
<tr>
<td>User Name  :</td> <td><input type="text" name="uname"/></td>
</tr>
<tr>
<td>Passowrd   :</td> <td><input type="password" name="pwd"/></td>
</tr>
<tr>
<td><center><input type="submit" value="Log In"/></center></td> <td><center><input type="reset" value="Cancel"/></center></td>
</tr>
</table></center></form>
</body>
</html> 
```

**请注意我已指定

```
<form action="main/main"> 
```

转到下一页，即“main.phtml”。但这不起作用。

这是我的 MainController.php：

```
<?php
require_once ('library/Zend/Controller/Action.php');

class MainController extends Zend_Controller_Action {

public function init()
{
    /* Initialize action controller here */
}

public function mainAction()
{
    include 'views/scripts/main/main.phtml';
}
} 
```

在上述控制器中，如果我指定，

```
include 'views/scripts/main/main.phtml'; 
```

与否，它的工作原理相同。在浏览器上，我尝试登录时没有显示任何内容。

由于我没有为登录指定任何标准，我认为这应该显示 main.phtml。

这里是：

```
<html xmlns="http://www.w3.org/1999/xhtml" lang = "en">
<style>
</style>

<head>
    <meta name="keywords" content="" /></meta>
    <meta name="description" content="" /></meta>
    <link rel="shortcut icon" href="http://localhost/Accounts/application/views/scripts/images/favicon.ico" >
    <title>Accounts Handling</title>
</head>

<body>
    <div id="header"></div>
    <div id="main">
        <div id="menu">
        <?php include ('C:\wamp\www\Accounts\application\views\scripts\header\header.php');?>
        </div>
        <div id="content">  
            <center><img src="http://localhost/Accounts/application/views/scripts/images/accounts.jpg" alt="image" height=600px width=550px/></center>  
        </div>
        <div>
        <?php include ('C:\wamp\www\Accounts\application\views\scripts\footer\footer.php');?>
        </div>
    </div>
</body>
</html> 
```

我的代码有什么问题？为什么这不起作用？我需要了解的是这些控制器是如何工作的。它们如何链接视图？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T09:30:10.073

首先，您的应用程序是否有效？当您导航到时，您是否获得了索引页面，`http://localhost/accounts/public/index`或者您是否收到错误？如果您遇到错误，您需要修复您的[PHP/ZF 环境](http://framework.zend.com/manual/en/learning.quickstart.create-project.html)。

其次，我建议您为您的应用程序配置一个[虚拟主机](http://blog.srmklive.com/2010/12/27/how-to-create-virtual-hosts-using-zend-server-ce/)，以使导航更容易。您将拥有类似的网址，`http://accounts/main`而不是`http://localhost/accounts/public/main`.

您显示页面的问题可能是您根本没有导航到正确的网址。

现在回答你的基本问题。？

[控制器概念](http://framework.zend.com/manual/en/learning.quickstart.intro.html#learning.quickstart.intro.mvc)...

将 MVC 应用程序（特别是 Zend Framework）中的控制器视为一种数据流量管理器。控制器是将您的网页（视图）与模型（数据）粘合在一起的东西。控制器最常用于从用户（即表单）获取数据，过滤和验证该数据，然后将其传递给模型以进行进一步处理或保存在数据库或其他存储中。它也以另一种方式工作。从模型中获取数据并准备好呈现给用户。

下面是一个简单的控制器动作示例，它只显示一个用户列表：

```
//navigate to http://myapp/user/list where myapp is the base url, user is the controller
// and list is the action
class UserController extends Zend_Controller_Action{

    public function listAction() { //declare action in camel case
            $currentUsers = Application_Model_DbTable_User::getUsers();//get data from database via model
            if ($currentUsers->count() > 0) {
                $this->view->users = $currentUsers; //send list of users to the view
            } else {
                $this->view->users = NULL;
            }
        }
    } 
```

并显示此用户列表，视图脚本可能如下所示：

```
<!-- list.phmtl at application/views/scripts/user -->
h2>Current Users</h2>
<?php if ($this->users != null) : ?>
    <table class='spreadsheet' cellpadding='0' cellspacing='0'>
        <tr>
            <th>Links</th>
            <th>Last Name</th>
            <th>First Name</th>
            <th>Username</th>
            <th>Role</th>
            <th>
        </tr>
        <?php echo $this->partialLoop('_user-row.phtml', $this->users); ?>
    </table>
<?php else : ?>
    <p>You do not have any users yet.</p>
<?php endif ?>
<p><a href='/user/create'>Create a new user</a></p> 
```

ZF 中的 parttail 是一段脚本，允许您使用指定的数据位循环相同的代码，在这种情况下，每个用户行都将由这几行代码显示。倾向于替换 foreach 循环的某些实例。

```
<!-- the patial _user_row.phtml -->
<tr>
    <td class="links">
        <a href='/page/edit/id/<?php echo $this->id ?>'>Update</a>
        <a href='/page/delete/id/<?php echo $this->id ?>'>Delete</a>
    </td>
    <td><?php echo $this->name ?></td>
</tr> 
```

为了完整起见，我将包括提供数据的模型的一部分：

```
class Application_Model_DbTable_User extends Zend_Db_Table_Abstract
{
    protected $_name = 'users';

 public static function getUsers() {
        $userModel = new self();
        $select = $userModel->select();
        $select->order(array('last_name', 'first_name'));
        return $userModel->fetchAll($select);
    }
} 
```

我意识到这里的答案有点简单，因为控制器可以根据应用程序承担许多角色，它们在大多数应用程序中的主要角色是数据管理和视图准备。

我知道要绕住你的头有多难，我不久前自己也经历过。[Rob Allens 的 ZF 1.x 教程](http://akrabat.com/zend-framework-tutorial/)是一个很好的起点。

此外，您可能希望在开始时对 Zend Studio 保持警惕，它似乎在项目创建期间做了一些与[Zend_Tool](http://framework.zend.com/manual/en/zend.tool.usage.cli.html)在创建项目时所做的不同的事情（我认为可以在选项中更改此行为）所以Zend Studio 生成的代码可能与教程中的不完全相同。

*代码片段来自 Book* [Pro Zend Framework Techniques](https://rads.stackoverflow.com/amzn/click/com/1430218797)

我希望这能提供一些指导和帮助......

**PS**如果您正确安装和配置了 ZF，您几乎永远不会使用 include 语句。如果您必须包含 ZF 的任何内容，则说明您的配置有问题（可能是您的 php 包含路径）

**[编辑]**

要更正 500 服务器错误，您可以检查以下几项内容：

在您的 Apache 配置中`httpd.conf`，确保该行 `LoadModule rewrite_module modules/mod_rewrite.so`未被注释。

在同一个 .conf 文件中，确保 localhost 目录的目录条目具有以下设置：

```
<Directory "C:\Zend\Apache2/htdocs"><--- YOUR DIRECTORY
    ...truncated as the following is the important part
    Options Indexes FollowSymLinks <---IMPORTANT FOLLOWSYMLINKS IS REQUIRED FOR ZF
    #
    # AllowOverride controls what directives may be placed in .htaccess files.
    # It can be "All", "None", or any combination of the keywords:
    #   Options FileInfo AuthConfig Limit
    #
    AllowOverride All<---IMPORTANT, THIS ALLOWS .HTACCESS TO WORK
    #
    # Controls who can get stuff from this server.
    #
    Order allow,deny
    Allow from all
</Directory> 
```

希望这可以解决您的问题。

# php - 数组对象，getIterator();

> ID：11373318
> 
> 赞同：5
> 
> 时间：2012-07-07T07:53:56.640
> 
> 标签：php, spl, arrayobject

我试图了解是什么**`getIterator()`**，我将解释：

据我所知`getIterator`，我们调用的方法是包含一个外部迭代器。

问题是 getIterator 包括**它自己的方法**，关闭者认为看起来相同的是 Iterator 接口，但它不能是接口，它可以是类，但我试图在 SPL.php 源代码中搜索它，但没有找到，也许我让这比实际情况更复杂，如果有人可以帮助我了解它在 SPL.php 源代码中的位置以及它是什么（类等），我会很高兴。谢谢大家，祝你有美好的一天。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-07T08:12:45.710

`ArrayObject`implements`IteratorAggregate`允许你返回一个迭代器而不是实现它。这很简单。假设您有一个包装数组的类，例如

```
class Foo
{
    private $array = [1,2,3,4];
} 
```

并且你想`foreach`通过一个实例`Foo`，像这样：

```
foreach (new Foo as $bar) {
    echo $bar; // outputs 1234
} 
```

要实现这一点，您可以添加`Iterator`接口，但随后您必须实现接口中的所有方法，以完成在对象内迭代数组的简单任务。当您需要该功能时，您不想一遍又一遍地重复该代码，特别是因为已经有一个迭代器可以满足您的需求。所以不是实施`Iterator`你实施`IteratorAggregate`

```
class Foo implements IteratorAggregate
{
    private $array = [1,2,3,4];

    public function getIterator()
    {
        return new ArrayIterator($this->array);
    }
} 
```

现在，当您执行此操作时，`foreach`PHP 将使用从返回的迭代器`getIterator`而不是`Foo`实例本身，从而允许您获得输出 1234。

在 的情况下`ArrayObject`，这一点只是为了允许您`foreach`超过`ArrayObject`. 当然，你也可以调用`getIterator`自己，因为它是公共的，然后直接使用返回的迭代器。

还要注意 ctor 签名`ArrayObject`：

```
public __construct (
    [ mixed $input 
    [, int $flags = 0 
    [, string $iterator_class = "ArrayIterator" 
]]] ) 
```

其中指出将返回哪个迭代器。

# java - 从另一个类中获取线程

> ID：11373321
> 
> 赞同：-1
> 
> 时间：2012-07-07T07:54:30.700
> 
> 标签：java, multithreading

我有一个java类：

```
public class httpd implements Runnable
{

   public void createHttpdStatistics
   {
      httpdStatistics stats = new httpdStastics(this);
   }

} 
```

现在我将在另一个类中获取在`stats`httpd 中创建的对象。当 httpd 对象启动时，它在 jvm 中执行。我很难在 httpd 类中构建 get 方法，但是当我在另一个类中时，我如何获得确切的 httpd 对象来调用 get 方法来检索 stats 对象？

编辑

```
public class httpd implements Runnable
{

    public static void main(String[] args)
    {
        httpd server = new httpd();
        OtherClass oc = new OtherClass(server);
    }
{

MY OWN MAIN

public class myownmain
{
public static void main(String[] args)
{
    //Here I need OtherClass object created in httpd class
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T08:15:57.233

通过向 httpd 类中的 stats 对象提供 getter 将 stats 对象传递给 CTOR 中需要的其他类有什么问题 -
当然，这只是在运行代码中未执行 createHttpdStatistics 方法的情况下方法（我建议你 pvovide 它）。
如果 createHttpdStatistics 方法在 run 方法中执行（在不同的线程中），您应该考虑在线程之间使用共享数据结构（例如 - 可以用作共享数据结构的共享 Singletone），如果您想创建线程内的 HttpdStatistics 对象。
在这种情况下，代码将如下所示：

```
public class httpd implements Runnable
{

   public void createHttpdStatistics()
   {
      httpdStatistics stats = new httpdStastics(this);
      StatsManager.getInstance().putStats(stats);
   }

   public void run() {
      //I assume the creation is done at the run method. Maybe I'm wrong here.
      createHttpdStatistics();
   }

} 
```

然后在代码中的某处使用它 -

```
HttpdStatistics stats = StatsManager.getInstance().getStats();
MyClass  stats = new MyClass(stats); //passing stats to another object. 
```

您当然应该确保 getStats 或者 stats 对象下的块设置为单音，或者检查 getStats() 是否返回 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T08:10:54.383

鉴于[此处](http://pastebin.com/0jE2CYY0)发布的代码：例如，在您的其他类`OtherClass`中，您应该为`httpd`对象设置 setter 或在构造函数中提供`httpd`实例。`OtherClass`这种方式`OtherClass`会有参考`httpd`

```
public class OtherClass{
   httpd httpd_ = null;

   public OtherClass(httpd httpd_){
      this.httpd_ = httpd_;
   }
   // Access and use stats from httpd
   public void useStats(){
      httpdStatistics stats = httpd_.getStatistics()
      if(stats != null){
        // Do something here
      }else{
        // stats not set yet, the thread did probably not start yet
      }
   }
} 
```

在您的应用程序的主要内容中，您可以拥有以下内容：

```
httpd  h = new httpd();
OtherClass otherClass = new OtherClass(h); 
```

**编辑**正如其中一条评论所述，该`stats`变量在两个线程之间共享，因此您必须对其进行同步并确保以独占方式对其进行更新。

# android - 如何在 json 数据上创建 java 类？

> ID：11373323
> 
> 赞同：1
> 
> 时间：2012-07-07T07:54:54.583
> 
> 标签：android, facebook, json

```
{
 "data": [
  {
     "name": "acac",
     "id": "00000"
  },
  {
     "name": "adcd",
     "id": "1111111"
  }
 ],
 "paging": {
  "next": "https://graph.facebook.com/00000000/friends?...."
}
} 
```

我正在尝试在我的 android 应用程序中列出 facebook 朋友列表。我将朋友列表作为 json 数据获取。现在我的问题是如何从 json 数据创建 java 类。我已经为“数据”和“分页”创建了两个类。我我被困在如何在解析时使用这两个类。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T07:58:26.917

您可以按照本教程在此处使用 GSON 将 JSON 字符串解析为本机域 Java 对象：http: [//java.sg/parsing-a-json-string-into-an-object-with-gson-easily/](http://java.sg/parsing-a-json-string-into-an-object-with-gson-easily/)

Google GSON 将为您处理将 JSON 字符串解析为 Java 对象的所有管道代码。

然后，您可以创建一个名为 Facebook 的对象，该对象具有一组“数据”对象和一个“分页”对象。

```
Class Facebook{
  private List<Data> dataList;
  private Paging paging;
...
} 
```

# xml - 如何在 XML 中选择没有属性但具有特定值的节点

> ID：11373324
> 
> 赞同：0
> 
> 时间：2012-07-07T07:54:57.360
> 
> 标签：xml

我已经在一个 XML 文件的一部分的变量 ($ResId) 中存储了一个特定数字，并且我在不同的部分中有以下内容。

```
<CalculatedWho>
  <ResourceId>85</ResourceId>
  <ResourceId>49</ResourceId>
  <ResourceId>43</ResourceId>
  <ResourceId>41</ResourceId>
</CalculatedWho> 
```

如果其中任何一个与存储在变量中的数字匹配，我将执行一项特定任务。我已经尝试了以下和其他几件事，但还没有做对。

```
<xsl:for-each select="//StrategyPool/Strategy">
  <xsl:if test="//StrategyPool/Strategy/CalculatedWho/ResourceId[text()=$ResId]" >
    <xsl:value-of select="StrategyName"/>
  </xsl:if>
</xsl:for-each> 
```

问题是 IF 测试从不返回值，尽管我知道有匹配项。我还尝试了以下作为 if 测试：

```
 <xsl:if test="/CalculatedWho/ResourceId[text()=$ResId]" > 
```

和

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T08:07:50.623

缺少一个特定的问题，我立即认为是错误的事情是您不需要 xsl:if 中测试的“//StrategyPool/Strategy/”部分。此时的上下文节点已经是一个策略元素。此外，如果您打算选择 StrategyName 的值，请确保它是 CalculatedWho 节点的兄弟/Strategy 节点的直接子节点。除此之外，根据 $ResId 的值/类型，您可能会得到一些奇怪的强制行为。

# javascript - 重叠悬停装饰

> ID：11373331
> 
> 赞同：2
> 
> 时间：2012-07-07T07:55:32.393
> 
> 标签：javascript, jquery, css, html

鉴于以下图片，我真的不确定如何最好地解决这个问题。

![在此处输入图像描述](../Images/d9c55e5ad864941583a0cd1b92feedfb.png)

![在此处输入图像描述](../Images/981eda7619b9eb847ac84ccc962fbb0b.png)

![在此处输入图像描述](../Images/1b65e6cc0a5fc3fbeb7a0dbe53eff267.png)

![在此处输入图像描述](../Images/f1818be84fe699f56a7b034dfb4ba282.png)

我的意思是我可以制作一个精灵图像并将每个链接/图标定位为绝对位置，以便在发生悬停状态时它们不会相互推动。然而问题是可点击区域会随着悬停状态而增长，从而与其他按钮重叠并使其难以点击。

任何建议/想法将不胜感激。

干杯!

**感谢@ioannis-karadimas 我的解决方案**

[http://codepen.io/trev/pen/overlapping-hover-states/2](http://codepen.io/trev/pen/overlapping-hover-states/2)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T08:01:57.453

没试过，但我认为它应该工作。

```
.button:hover:after {
    display: inline;
    position: absolute;
    left: 60px; // button's width / 2
    width: 150px;
    height: 150px;
    background-image:url('cross.png');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T08:05:26.747

如果不涉及运动，则没有理由不能将触发区域与图像本身分开。使所有触发器不可见的 div 漂浮在图形上方，可点击区域将保持不变且可预测。图形中的更改，例如用另一个图像覆盖图像或更改精灵的位置，根本不需要与可点击区域相关。

为了帮助您进行初始定位和调试，您可以先在每一层周围放置一个边框，然后将它们定位在图形上方。完成后，移除边框并使图层透明，并使用完全透明的 GIF 填充它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T08:04:45.307

您需要在图标容器内创建一个绝对定位的元素（或伪元素）并在鼠标悬停时显示它们。因此，它不会影响悬停区域。

这是带有伪元素的示例，但如果您需要对 IE < 8 的支持，您可以添加普通元素：

[http://jsfiddle.net/bFVx8/](http://jsfiddle.net/bFVx8/)

# mongodb - mongoengine 的最后更新

> ID：11373332
> 
> 赞同：1
> 
> 时间：2012-07-07T07:55:34.403
> 
> 标签：mongodb, mongoengine

有什么方法可以在集合中找到最后更新的文档吗？以其他方式按更新排序集合

像这样的东西

```
people = Person.objects.order_by_update() 
```

或者我必须为每个文档添加更新时间？

我用`mongodb`, `mongoengine`,`flask`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T09:32:09.107

您必须添加一个字段，例如`last_updated_time`如果您希望能够以这种方式排序。此外，由于您正在对其进行排序，因此您可能应该对其进行索引。

mongodb 默认存储的唯一的东西是`_id`，它可以粗略地用作`created_time`时间戳。

# android - Android 光传感器返回 null

> ID：11373334
> 
> 赞同：0
> 
> 时间：2012-07-07T07:56:00.683
> 
> 标签：android

我正在开发一个带有光传感器的项目，但我的问题是光传感器总是返回 null 而我的测试设备是**samsung galaxy y**。我的疑问：是我的光传感器代码错误还是我的银河 y 不包含光传感器？

我试过下面的代码：

```
package com.example.lightsensor;

import android.app.Activity;
import android.content.Context;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.os.Bundle;
import android.widget.ProgressBar;
import android.widget.TextView;
import android.widget.Toast;

public class LightSensorActivity extends Activity {

 ProgressBar lightMeter;
 TextView textMax, textReading;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.light_sensor_layout);
        lightMeter = (ProgressBar)findViewById(R.id.lightmeter);
        textMax = (TextView)findViewById(R.id.max);
        textReading = (TextView)findViewById(R.id.reading);

        SensorManager sensorManager 
        = (SensorManager)getSystemService(Context.SENSOR_SERVICE);
        Sensor lightSensor 
        = sensorManager.getDefaultSensor(Sensor.TYPE_LIGHT);

        if (lightSensor == null){
         Toast.makeText(LightSensorActivity.this, 
           "No Light Sensor! quit-", 
           Toast.LENGTH_LONG).show();
        }else{
         float max =  lightSensor.getMaximumRange();
         lightMeter.setMax((int)max);
         textMax.setText("Max Reading: " + String.valueOf(max));

         sensorManager.registerListener(lightSensorEventListener, 
           lightSensor, 
           SensorManager.SENSOR_DELAY_NORMAL);

        }
    }

    SensorEventListener lightSensorEventListener
    = new SensorEventListener(){

  @Override
  public void onAccuracyChanged(Sensor sensor, int accuracy) {
   // TODO Auto-generated method stub

  }

  @Override
  public void onSensorChanged(SensorEvent event) {
   // TODO Auto-generated method stub
   if(event.sensor.getType()==Sensor.TYPE_LIGHT){
    float currentReading = event.values[0];
    lightMeter.setProgress((int)currentReading);
    textReading.setText("Current Reading: " + String.valueOf(currentReading));
   }
  }

    };
} 
```

任何人都可以帮助我代码有什么问题或设备不包含光传感器吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T08:17:03.897

三星 Galaxy y 未嵌入光传感器，请在[此处查看三星规格](http://www.gsmarena.com/samsung_galaxy_y_s5360-4117.php)

三星 Galaxy Y 支持的传感器有：加速度计、指南针、接近度

![在此处输入图像描述](../Images/0484e8861aa2ab011aaa73b04e76885b.png)

# javascript - 使用 z-index 修复 div 位置并将鼠标悬停在另一个 div 上的内容上

> ID：11373340
> 
> 赞同：0
> 
> 时间：2012-07-07T07:57:01.100
> 
> 标签：javascript, jquery, css, z-index, mouseover

我的数据正确地提醒`mouseover`了 div 上的数据，但是我仍然在为我的 CSS 弱点而苦苦挣扎。我需要在鼠标悬停时使用属性而不是警报在`rightsideblock`div上显示数据。`z-index`我创建了一个类`mydatatoshow`来保存数据，其中显示设置为无，但我无法正确配置它。帮我解决这个问题，因为我搜索了很多。请建议一些可能有助于开发人员修复 css 问题的链接。

**编辑** 我的事件面临的另一个问题是在添加此代码时 --var mydata = $(this).text(); $('.mydatatoshow').append(mydata); 它将数据正确地添加到 div 但我希望在鼠标移出时数据也会消失

我的CSS——

```
<style type="text/css">
.container{width:999px;}
.leftsideblock{float:left; border:1px solid green;width:674px;}
.rightsideblock{border:5px solid blue;}
</style> 
```

我的身体内容——

```
<body>

<div class="container">
    <div class="leftsideblock">
    <div class="mydivdata">
<table width="650" border="0">
<tbody>
<tr>
<td width="90" valign="top" rowspan="2" class="myimageclass">&nbsp;</td>
<td width="193" valign="top">Monday 07 July 2012</td>
<td width="424">
Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
</td>
</tr>
</tbody>
</table>
</div>

    <div class="mydivdata">
<table width="650" border="0">
<tbody>
<tr>
<td width="90" valign="top" rowspan="2" class="myimageclass">&nbsp;</td>
<td width="193" valign="top">Friday 06 July 2012 8:00AM</td>
<td width="424">
Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
</td>
</tr>
</tbody>
</table>
</div>
    </div>

    <div class="mydatatoshow" style="display:none;">
    </div>

    <div class="rightsideblock">
    <p>
    This is right sidebar data.This is right sidebar data.This is right sidebar data.This is right sidebar data.This is right sidebar data.This is right sidebar data.This is right    sidebar data.This is right sidebar data.This is right sidebar data.This is right sidebar data.This is right sidebar data.This is right sidebar data.This is right sidebar data.
    </p>
    </div>

</div>

</body> 
```

我的JS--

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
$(document).ready(function(){
$('.mydivdata').mouseover(function(){
var mydata = $(this).text();
alert(mydata);
});
});
</script> 
```

这是 jsFiddle：http: [//jsfiddle.net/JsnDc/](http://jsfiddle.net/JsnDc/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T08:14:58.503

试试这个：

```
 $('.mydivdata').mouseover(function(){
        $('.mydatatoshow').css('z-index', '9999');
    }); 
```

请参阅[此](https://stackoverflow.com/questions/1850732/how-might-i-use-jquery-to-position-one-div-dynamically-below-another)和[此](https://stackoverflow.com/questions/1850732/how-might-i-use-jquery-to-position-one-div-dynamically-below-another)以正确定位您的 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T11:27:47.007

工作解决方案——

```
 <html xmlns="http://www.w3.org/1999/xhtml"><head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <style type="text/css">
    .container{width:999px;}
    .leftsideblock{float:left; border:1px solid green;width:674px;}
    .rightsideblock{border:5px solid blue;}
    </style>

    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
    <script type="text/javascript">
    $(document).ready(function(){

    $('.mydivdata').mouseover(function(){
    $('.mydatatoshow').css('z-index', '9999');
    $('.mydatatoshow').show();
    //     document.getElementById('to_hide').style.display='none';
    var mydata = $(this).text();
    $('.mydatatoshow').html(mydata);        
    });

    $('.mydivdata').mouseout(function(){
    $('.mydatatoshow').hide();
    //document.getElementById('to_hide').style.display='block';
    });

    });
    </script>

    <title>Test To Test</title>
    </head>
    <body>
        <div class="container">
        <table>
        <tbody><tr>
        <td>
            <div class="leftsideblock">
                <div class="mydivdata">
                    <table width="650" border="0">
                        <tbody>
                        <tr>
                            <td width="90" valign="top" rowspan="2" class="myimageclass">&nbsp;</td>
                            <td width="193" valign="top">Monday 07 July 2012</td>
                            <td width="424">
                                Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>

                <div class="mydivdata">
                    <table width="650" border="0">
                    <tbody>
                    <tr>
                        <td width="90" valign="top" rowspan="2" class="myimageclass">&nbsp;</td>
                        <td width="193" valign="top">Friday 06 July 2012 8:00AM</td>
                        <td width="424">
                            Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                        </td>
                    </tr>
                    </tbody>
                    </table>
                </div>
            </div>
            </td>
            <td>
            <div class="rightsideblock" style="top: 0;position: absolute;width: 300px;float: right;">
                <p style="z-index:-1">
                    This is right sidebar data.This is right sidebar data.This is right sidebar data.This is right sidebar data.This is right sidebar data.This is right sidebar data.This is right    sidebar data.This is right sidebar data.This is right sidebar data.This is right sidebar data.This is right sidebar data.This is right sidebar data.This is right sidebar data.
                </p>

            <div class="mydatatoshow" style="top: 0px; left: 0px; z-index: 9999; float: right; position: absolute; display: none; ">

                        &nbsp;
                        Friday 06 July 2012 8:00AM

                            Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.

                </div></div>

            </td>
            </tr>
            </tbody></table>
        </div>

    </body></html> 
```

# css - Twitter Bootstrap 和 gmaps4rails

> ID：11373344
> 
> 赞同：0
> 
> 时间：2012-07-07T07:57:25.563
> 
> 标签：css, ruby-on-rails, google-maps, twitter-bootstrap, gmaps4rails

我有以下视图代码，它会动态调整手机和桌面的大小。但是地图不会改变大小。有没有办法让地图使用引导程序动态改变大小以适应手机/平板电脑/桌面？（见下文）

```
.row
  .span6.offset3
    .well
      = gmaps4rails(@maps_json) 
```

![在此处输入图像描述](../Images/5c5cd5b016079607cf4f7caf4fd75901.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T10:55:21.297

找到了答案。在 gmaps4rails.css 文件中将宽度和高度更改为 100%

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T01:17:09.757

didn't work for me, to fix it i changed in gmaps4rails.css:

```
.map_container {
  width: 100%;
}

.gmaps4rails_map {
  width: 100%;
  height: 400px;
} 
```

And this for fix the toolbar

```
#map label { width: auto; display:inline; }
#map img { max-width: none; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-20T15:07:58.017

有同样的问题。这为我修复了它：

```
.gmaps4rails_map img {
    max-width: none;
}
.gmaps4rails_map label {
    width: auto; display:inline;
} 
```

如果它不能解决问题，请尝试替换选择器`.gmaps4rails_map img`，`img`以确保您需要此特定的 css 修复程序。然后在 img 之前尝试另一个地图选择器。

# ruby - selenium-webdriver 并等待页面加载

> ID：11373351
> 
> 赞同：8
> 
> 时间：2012-07-07T07:58:04.523
> 
> 标签：ruby, selenium, webdriver

我正在尝试编写简单的测试。我的问题是，我想等到页面完全加载。目前我正在等到一些元素出现，但这并不是我真正想要的。有没有可能做这样的事情：

```
driver = Selenium::WebDriver.for :chrome
driver.navigate.to url
driver.wait_for_page_to_load "30000" 
```

用 Java 没问题，但是如何用 ruby​​ 来做呢？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-07T09:28:31.427

这就是[Selenium docs](http://seleniumhq.org/docs/03_webdriver.html#introducing-the-selenium-webdriver-api-by-example) () 的建议：

```
require 'rubygems'
require 'selenium-webdriver'

driver = Selenium::WebDriver.for :firefox
driver.get "http://google.com"

element = driver.find_element :name => "q"
element.send_keys "Cheese!"
element.submit

puts "Page title is #{driver.title}"

wait = Selenium::WebDriver::Wait.new(:timeout => 10)
wait.until { driver.title.downcase.start_with? "cheese!" }

puts "Page title is #{driver.title}"
driver.quit 
```

如果这不是一个选项，您可以尝试[此 SO 帖子](https://stackoverflow.com/questions/8688435/how-can-i-implement-wait-for-page-to-load-in-selenium-2)中的建议，尽管它需要在 Ruby/Rails 之上使用一些 Javascript。

似乎`wait.until`正在/已经被淘汰。新的建议过程是查找页面以包含您知道的元素：

```
expect(page).to have_selector '#main_div_id' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-07T18:54:20.927

据我了解 webdriver，您不需要等待页面加载，因为 WebDriver 具有[阻塞 API](http://code.google.com/p/selenium/wiki/FrequentlyAskedQuestions#Q%3a_WebDriver_fails_to_find_elements_/_Does_not_block_on_page_loa)，但您可以确定设置页面加载超时。

```
driver.manage.timeouts.page_load = 10 # seconds 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-07T23:32:11.983

因此，在 Ruby 中，每当您使用`get`打开 URL 时，ruby 脚本仅在页面完全加载时才会执行。

因此，在您的情况下，您只需执行以下操作：-

```
driver.get url 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-07T22:19:05.813

WebDriver 不再需要这些了。

如果需要，WebElement click() 和 Actions click() 都会自动“等待页面加载”。

例如，如果您需要等待一些 ajax 内容，则可以使用 imclicit 和显式（按此顺序）等待（在 seleniumhq 中描述）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-25T16:12:37.057

在某些情况下，AJAX 或 CSS 更改有时会导致我的测试失败。我将这些方法添加到我的静态驱动程序实例中，以便在需要时让测试等待某些条件。（C＃）

WaitForCssChange 方法中的 TimedWait 基本上只是一个`Threading.Thread.Sleep`这不是我猜的最漂亮的方式，但它很适合我的需要。

对于 Ajax 等待：

```
 public static void WaitForAjax()
    {
        var wait = new WebDriverWait(Driver.Instance, TimeSpan.FromSeconds(25));
        wait.Until(d => (bool)(d as IJavaScriptExecutor).ExecuteScript("return jQuery.active == 0"));
    } 
```

对于 CSS 更改：

```
public static void  WaitForCssChange(IWebElement element, string value)
    {
        int counter = 0;
        while (true)
        {
           if(element.GetAttribute("style").Contains(value) || counter > 50)
           {
               break;
           }
           TimedWait(20);
           counter++;
        }
    } 
```

# c# - 我已将表单名称存储在数据库中。现在我想使用这些名称加载表单

> ID：11373354
> 
> 赞同：0
> 
> 时间：2012-07-07T07:58:30.873
> 
> 标签：c#

我已将表单名称存储在数据库中。现在我想使用这些名称加载表单。这是我的表结构：

```
frmID, Item_Name, formName 
```

这是我的代码：

```
 private void treeView1_AfterSelect(object sender, TreeViewEventArgs e)
    {
        //TreeNode node = treeView1.SelectedNode;
        string item = Convert.ToString(treeView1.SelectedNode);

        int index = item.IndexOf(" ");
        if (index > 0)
            item = item.Substring(index + 1); 
        //MessageBox.Show(item);
        var selectedFRM = from Menu in dbdata.Menus
                          where Menu.Item_Name == item
                          select Menu;
        foreach (var pick in selectedFRM.Take(1))
        {
            string sel = pick.Form_Name;
            Assembly asm = typeof(Form).Assembly;
            Type type = asm.GetType(sel);

            string df = Convert.ToString(type);
            MessageBox.Show(df);
            AssemblyName assemName = asm.GetName();
            MessageBox.Show(assemName.Name);
            try
            {
            Form frmChk = (Form)Activator.CreateInstance(type);                
                frmChk.Show();
            }
            catch (Exception)
            {
                MessageBox.Show("Error in loading form");
            }
           // MessageBox.Show(sel);
        } 
```

upto`Assembly asm = typeof(Form).Assembly;`代码工作正常。如何使用数据库中的“formName”加载表单

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T08:09:43.513

这就是问题所在，我怀疑：

```
Assembly asm = typeof(Form).Assembly;
Type type = asm.GetType(sel); 
```

该程序集将是`System.Windows.Forms`程序集-显然不包括*您的*特定表格。只需使用您知道在正确程序集中的*任何*`Form`形式，而不是：

```
// Or whatever you know about, of course...
Assembly asm = typeof(LoginForm).Assembly; 
```

请注意，该名称仍需要是命名空间限定的名称。

另一种（更灵活的）替代方法是存储您可以通过 获取的类型的*程序集限定*[`Type.AssemblyQualifiedName`](http://msdn.microsoft.com/en-us/library/system.type.assemblyqualifiedname.aspx)名称。然后您可以使用`Type.GetType(aqName)`- 这意味着如果您将表单拆分到多个程序集中，您的代码仍然可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T13:00:36.613

我找到了解决方案。该`Type type = asm.GetType(sel);`行应该像这样更正。

```
Type type = asm.GetType("WindowsFormsApplication6." + sel); 
```

这意味着

```
Type type = asm.GetType("Namespace.Class"); 
```

# mysql - 如何连接多个表？

> ID：11373356
> 
> 赞同：1
> 
> 时间：2012-07-07T07:58:50.687
> 
> 标签：mysql

我有 2 张桌子。

工人和经验

在表工作人员中有行 worker_parent （因为一个工作人员可以负责另一个工作人员）。

不，我必须像这样连接表：

```
SELECT w1.* FROM workers w1 LEFT JOIN workers w2 ON (w2.id = w1.worker_parent) 
```

没关系。但我必须根据 w2 的经验订购，我尝试添加表体验，但它连接到 w1 而不是 w2。

我的问题是如何将表体验（具有行 worker_id）添加到 w2 并按经验排序并从 w1 中选择数据。

这是我的尝试。

```
SELECT w1.* FROM workers w1 LEFT JOIN workers w2 ON (w2.id = w1.worker_parent) LEFT JOIN experience e ON (w2.id = e.worker_id) ORDER BY e.experience DESC 
```

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T08:41:18.013

如果您只想要有经验的父母的童工，您需要添加一个 where（或更改连接类型）（为了便于阅读，我将 w1 和 w2 重命名为 w_child 和 w_parent）

```
SELECT w_child.*, e_parent.experience
FROM workers AS w_child 
LEFT JOIN workers AS w_parent ON (w_parent.id = w_child.worker_parent) 
LEFT JOIN experience AS e_parent ON (w_parent.id = e_parent.worker_id) 
WHERE e_parent.worker_id IS NOT NULL
ORDER BY e_parent.experience DESC 
```

# android - AudioManager 和系统音量变化接收器

> ID：11373357
> 
> 赞同：2
> 
> 时间：2012-07-07T07:58:56.080
> 
> 标签：android

在“为 Android 2.2 准备代码而不将其限制为 Android 2.2”之前，我一直按照[此页面上的说明进行操作。](http://android-developers.blogspot.com/2010/06/allowing-applications-to-play-nicer.html)即使我是针对 2.3 版本构建的，我想它现在应该可以工作，但事实并非如此。我在清单中注册了一个接收器：

```
<receiver android:name="RemoteControlReceiver">
    <intent-filter>
        <action android:name="android.intent.action.MEDIA_BUTTON" />
    </intent-filter>
</receiver> 
```

为 RemoteControlReceiver 声明创建了一个类：

```
public class RemoteControlReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        Toast.makeText(context, "onReceive", Toast.LENGTH_SHORT).show();
    }
} 
```

最后在启动活动中增强了它。

```
private AudioManager _audioManager;
private ComponentName _componentName;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    _audioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
    _componentName = new ComponentName(getPackageName(), RemoteControlReceiver.class.getName());
}

@Override
protected void onResume() {
    super.onResume();

    _audioManager.registerMediaButtonEventReceiver(_componentName);

    _audioManager.requestAudioFocus(new OnAudioFocusChangeListener() {

            @Override
            public void onAudioFocusChange(int focusChange) {
                    Toast.makeText(getApplicationContext(), "onFocusChanged", Toast.LENGTH_SHORT).show();
            }
    }, AudioManager.STREAM_MUSIC, 0);
} 
```

你能指出我在这里缺少什么吗？我有一个假设，为了接收消息，我的活动必须播放任何媒体内容。我马上去测试。

PS 如您所见，我什至添加了一些不必要的代码-不要注意 requestAudioFocus。

感谢您的任何建议。

# php - jQuery 多表单提交

> ID：11373361
> 
> 赞同：8
> 
> 时间：2012-07-07T07:59:30.340
> 
> 标签：php, javascript, jquery, html

我在一个页面上有 4 个表格。我知道表格不能嵌套。

`<form id="form1"></form>`

`<form id="form2"></form>`

`<form id="form3"></form>`

`<form id="form4"></form>`

以该顺序呈现。

表格 1 和表格 4 发布到同一个 php 页面进行处理。表格 1 有 1 个输入字段 表格 4 有多个字段、复选框和选择。

表格 1 或表格 4 发送两种表格的组合字段的最佳方法是什么？

我试过 jQuery，非常适合文本输入和复选框，但无法让它与 Select 一起使用。尝试结合表格 1 和表格 4 并使用 css 重新定位表格 1，但无法正确布局。

有没有更简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-07T08:02:52.117

这是不可能的。您可以使用`serialize()`or`serializeArray()`方法获取表单数据并使用 Ajax 将它们发布到服务器：

> 将一组表单元素编码为字符串以进行提交。

```
$('#send').click(function() {
   var firstFormData  = $('form:eq(0)').serializeArray();
   var fourthFormData = $('form:eq(3)').serializeArray();
   $.ajax({
        url  : '...',
        type : 'post',
        data : firstFormData.concat(fourthFormData)
   }).done(function() {
       // ...
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T05:00:11.367

好的，我无法让 .serialize() 使用 form4 中的复选框数组，例如

```
<input type="checkbox" id="model[]"> 
```

我试图获取检查的值，但无法让它们与其他输入一起序列化：

```
var vals = []
    $('input:checkbox[name="model[]"]').each(function() {
        if (this.checked) {
            vals.push(this.value);
        }
    }); 
```

所以我回去做了更简单的事情：

删除了form1，将文本输入和提交按钮移到了`<div id="searchbox" style="position:abosulte;top:-100px;left:0px;">My original form1</div>`内部form4中。

`<div id="placeholder" style="position:relative;"></div>`在 form1 曾经所在的 form2 和 3 上方放置一个占位符。

在上面放置一个javascript：

```
$(document).ready(function(){
    $("#searchbox")
    .appendTo("#placeholder");
}); 
```

移动文本输入和提交按钮以将它们定位为绝对和相对于占位符 div。

通过这种方式，我将它们减少到 1 种形式（这就是它的意图），不依赖 javascript 来操作任何数据，并且不需要我对两种形式进行串联序列化。

# android - 滚动视图上的 Android PullTo 刷新

> ID：11373362
> 
> 赞同：2
> 
> 时间：2012-07-07T07:59:50.170
> 
> 标签：android, android-layout, android-widget, scrollview

我知道 iPhone 中提供了类似 pullToRefresh 的功能，而对于 Android，我们必须手动管理它。

我得到了一些具有 pullToRefresh 的示例，但它仅适用于 ListView。

就我而言，我想为 Scrollview 实现。Google Play 的 DrawFree 应用程序中提供了 PullToRefresh 之类的东西。

请看下图：

![在此处输入图像描述](../Images/98110725a24fc5f98ea77d64288313dd.png)

那么，如何实现呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-09T08:58:55.680

这是在 ListView、GridView、WebView、Expandable ListView 中实现拉取刷新的一个很好的例子。

您可以使用此示例并根据您的视图进行更改。

[https://github.com/chrisbanes/Android-PullToRefresh](https://github.com/chrisbanes/Android-PullToRefresh)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-02T21:38:23.100

[编辑：我的解决方案类似于 Gmail，如果它不是您想要的，我很抱歉，无论如何我发布的代码可能对其他人有用]

我刚刚完成，我已经按照Joe Dailey 编写的[示例在 ListView 中实现了它（非常好且简单）。](https://play.google.com/store/apps/details?id=com.refreshable.list)然后我重新访问它以与 ScrollView 一起使用。

这就是我所做的：

我为 ScrollView 设置了一个 onTouchListener；

我控制滚动视图是否在顶部（scrollView.getScrollY（）== 0）然后，我使用“lastY = startY”来了解我是向下滚动还是向上滚动（两个变量都是活动字段）。

“act.refresh()”是运行任务以从我的服务器获取数据的方法。

在你的 asynkTask 的 onPostExecute 方法中，或者如果你使用 handlers 在 Handler 中，你调用“finishRefresh()”方法；

这是 onTouchListener：

```
class RefreshTouchListener implements View.OnTouchListener {

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        ScrollView scroll = (ScrollView) v;
        if (scroll.getScrollY() == 0) {
            switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                startY = event.getY();
                lastY = startY;
                break;
            case MotionEvent.ACTION_MOVE:
                if (!refreshing && event.getY() > lastY) {

                    lastY = event.getY();
                    if (event.getY() - startY <= dragLength) {
                        double percent = 1 - (event.getY() - startY) / dragLength;
                        double weight;
                        weight = 2 * Math.pow(percent, 0.8);
                        LinearLayout.LayoutParams params = (LinearLayout.LayoutParams) progress.getLayoutParams();
                        params.weight = (float) weight;
                        progress.setLayoutParams(params);
                        progress.setIndeterminate(false);
                        progress.setPadding(0, 0, 0, 0);
                        return true;
                    } else {
                        refreshing = true;

                        act.refresh();
                        startY = 100000f;
                        LinearLayout.LayoutParams params = (LinearLayout.LayoutParams) progress.getLayoutParams();
                        params.weight = 0;
                        progress.setIndeterminate(true);
                        progress.postInvalidate();
                        progress.setLayoutParams(params);
                    }
                }
            case MotionEvent.ACTION_UP:
                startY = 100000f;
                Log.i(TAG, "action up " + event.getY());
                if (!refreshing) {
                    LinearLayout.LayoutParams params = (LinearLayout.LayoutParams) progress.getLayoutParams();
                    params.weight = 2;
                    progress.setLayoutParams(params);
                }
            }
        }
        return false;
    }
} 
```

这是 finishRefresh() 方法：

```
public void finishRefresh() {
    progress.setIndeterminate(false);
    progress.postInvalidate();
    LinearLayout.LayoutParams params = (LinearLayout.LayoutParams) progress.getLayoutParams();
    params.weight = 2;
    progress.setLayoutParams(params);
    refreshing = false;
} 
```

这是生成布局的代码，带有 progressBar 和其他所有内容：

```
private void createProgressBarLayout() {
    topMargin = -Math.round(6 * act.metrics.density);
    dragLength = Math.round(act.screen_size.y / 2.5f);

    LinearLayout top = new LinearLayout(this);
    top.setGravity(Gravity.TOP);
    top.setOrientation(LinearLayout.HORIZONTAL);

    content_rel_layout = (RelativeLayout) findViewById(R.id.rel_layout_name);
    content_rel_layout.addView(top);
    ViewGroup.LayoutParams topParams = top.getLayoutParams();
    topParams.width = ViewGroup.LayoutParams.MATCH_PARENT;
    topParams.height = ViewGroup.LayoutParams.WRAP_CONTENT;
    top.setLayoutParams(topParams);

    FrameLayout left = new FrameLayout(this);
    progress = new ProgressBar(this, null, android.R.attr.progressBarStyleHorizontal);
    progress.setProgress(100);
    progress.setIndeterminate(false);
    // progress.setBackgroundResource(R.drawable.progress_bar);
    FrameLayout right = new FrameLayout(this);

    top.addView(left);
    top.addView(progress);
    top.addView(right);

    LinearLayout.LayoutParams leftParams = (LinearLayout.LayoutParams) left.getLayoutParams();
    leftParams.weight = 1;
    leftParams.width = ViewGroup.LayoutParams.MATCH_PARENT;
    leftParams.height = ViewGroup.LayoutParams.WRAP_CONTENT;
    leftParams.topMargin = topMargin;
    left.setLayoutParams(leftParams);

    LinearLayout.LayoutParams progressParams = (LinearLayout.LayoutParams) progress.getLayoutParams();
    progressParams.weight = 2;
    progressParams.width = ViewGroup.LayoutParams.MATCH_PARENT;
    progressParams.height = ViewGroup.LayoutParams.WRAP_CONTENT;
    progressParams.topMargin = topMargin;

    progress.setLayoutParams(progressParams);

    LinearLayout.LayoutParams rightParams = (LinearLayout.LayoutParams) right.getLayoutParams();
    rightParams.weight = 1;
    rightParams.width = ViewGroup.LayoutParams.MATCH_PARENT;
    rightParams.height = ViewGroup.LayoutParams.WRAP_CONTENT;
    rightParams.topMargin = topMargin;

    right.setLayoutParams(rightParams);

    ScrollView sv = (ScrollView) findViewById(R.id.prof_mon4_vert_scroll);
    sv.setOnTouchListener(new RefreshTouchListener());
} 
```

如有任何疑问，请随时问我！享受

# php - 如何在 Windows 操作系统上安装 gearman php 扩展？

> ID：11373363
> 
> 赞同：4
> 
> 时间：2012-07-07T07:59:59.123
> 
> 标签：php, windows, operating-system, php-extension, gearman

请任何人帮助我在 windows xp 上安装 gearman php 扩展。我的系统上安装了 xampp 1.7.7，并且我的系统上安装了 Cygwin、libevent-1.4.14b-stable 和 gearmand。请让我知道安装 gearman-1.0.2 php 扩展还需要什么。当我在 cygwin 终端上运行 gearman-1.0.2 时，找不到命令错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-06-02T10:23:21.630

> 要在 CentOS 或 Debian 中安装带有 PHP 扩展的 Gearman，请参阅 [如何使用 PHP 扩展安装 Gearman](https://stackoverflow.com/questions/14982921/how-to-install-gearman-with-php-extension/30592132#30592132)

**安装和更新 Cygwin 包**

来自：[https ://cygwin.com/install.html](https://cygwin.com/install.html)

**安装最新的 GCC 并通过 Cygwin 制作**

*   [http://www2.warwick.ac.uk/fac/sci/moac/people/students/peter_cock/cygwin/part2/](http://www2.warwick.ac.uk/fac/sci/moac/people/students/peter_cock/cygwin/part2/)

![在此处输入图像描述](../Images/1d8b9c44082a07a7f383054d97f88a89.png)

**通过 Cygwin 安装 wget**

*   [https://superuser.com/questions/693284/wget-command-not-working-in-cygwin](https://superuser.com/questions/693284/wget-command-not-working-in-cygwin)

![在此处输入图像描述](../Images/e30c066f26e41c673371fdd7dc35e780.png)

**安装 libevent**

```
 wget https://github.com/libevent/libevent/releases/download/release-2.0.22-stable/libevent-2.0.22-stable.tar.gz
    tar -zxvf libevent-2.0.22-stable.tar.gz
    cd libevent-2.0.22-stable
    ./configure
    make
    make install 
```

**安装 gearmand 和 libgearman**

```
wget https://github.com/gearman/gearmand/archive/1.1.12.tar.gz
tar -zxvf gearmand-1.1.12.tar.gz
cd gearmand-1.1.12
./configure
make
make install 
```

**安装pecl-gearman**

```
pecl install gearman 
```

**资源**

*   [http://www.cppblog.com/guojingjia2006/archive/2012/12/28/196743.html](http://www.cppblog.com/guojingjia2006/archive/2012/12/28/196743.html)

*   [Cygwin Make bash 命令未找到](https://stackoverflow.com/questions/4828388/cygwin-make-bash-command-not-found)

*   [https://gist.github.com/mnapoli/5270256](https://gist.github.com/mnapoli/5270256)

*   [如何使用 PHP 扩展安装 Gearman](https://stackoverflow.com/questions/14982921/how-to-install-gearman-with-php-extension/30592132#30592132)

# wpf - PRISM + MEF：用户控件还是页面？

> ID：11373365
> 
> 赞同：0
> 
> 时间：2012-07-07T08:00:06.113
> 
> 标签：wpf, xaml, prism

对于 WPF Prism + MEF，大多数示例使用用户控件，是否有任何问题不使用页面代替？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T17:53:08.460

Well`Pages`适用于[XAML 浏览器应用程序](http://msdn.microsoft.com/en-us/library/aa970060.aspx)，应包含在 Frame 或 NavigationWindow 中。另一方面`UserControl`可以包含在一个`Window`或另一个控件中。

XBAP 从 Internet Explorer 运行。大多数样本显然不是 XBAP，所以这就是它们不使用`Page`控制的原因。如果这是您想要的，则`Page`用于 Prism 应用程序没有问题。而MEF与这个问题无关。

# google-maps - 在 Android 应用中离线使用 Google 地图

> ID：11373369
> 
> 赞同：7
> 
> 时间：2012-07-07T08:01:06.323
> 
> 标签：google-maps

最近谷歌发布了一个新版本的谷歌地图，它可以让你保存地图特定块的离线版本。与此同时，我一直在尝试制作一个使用 Google Maps API 的 Android 应用程序，我只是想知道......是否有可能以某种方式获取该离线地图并让我的应用程序使用它？这样我的应用程序也不需要互联网连接吗？

我知道 OpenStreetMap 是一种替代方案，但我认为它不适用于我想到的项目。

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T08:11:37.637

这可能违反了 Google 的服务条款。看看这个：[如何缓存谷歌地图图块以供离线使用？](https://stackoverflow.com/questions/6109369/how-to-cache-google-map-tiles-for-offline-usage)

# java - Eclipse 生成的方法参数名称不合理

> ID：11373370
> 
> 赞同：0
> 
> 时间：2012-07-07T08:01:13.133
> 
> 标签：java, eclipse, methods, parameters, naming

我有时会遇到这样的问题：当我使用 Eclipse 函数添加/生成我想要实现的接口的方法时，这些方法的参数名称只是“太通用”。

因此，如果它是一个 String 参数，它被命名为 paramString，如果它是一个 int，它被称为 paramInt 等等——而不是被称为表达参数语义的东西。

例如，我目前正在实现 javax.portlet.PortletSession 接口（JSR 286 规范的一部分；我需要一个自定义实现）。

方法携带如下参数：

```
public void setAttribute(String paramString, Object paramObject) 
public void setAttribute(String paramString, Object paramObject, int paramInt) 
```

我想要的是这样的：

```
public void setAttribute(String key, Object value) 
public void setAttribute(String key, Object value, int scope) 
```

有时方法的生成按我想要的方式工作，有时，就像这次一样，它没有。我认为这与我导入包含我想要实现的接口的库的方式有关，但也许有人可以更详细地解释这种行为？

也许有人可以通过一个具体的例子给出解释：我将如何导入 JSR 286 规范，如何生成方法来获得我想要的？

太感谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T08:06:13.940

只需自己重命名参数。我怀疑参数名称是根据 Eclipse 必须使用的信息生成的 - 如果 jar 文件中不存在参数名称，它就无法提供它。如果有 portlet jar 文件的调试版本，或者如果您可以告诉 Eclipse JavaDoc 在哪里，这可能会有所帮助……但最终，大多数时候只需手动重命名它们就足够简单了。

就像一个测试，我怀疑如果你声明一个类型的变量，`PortletSession`然后尝试将它与自动完成一起使用，如下所示：

```
PortletSession session = null; // Doesn't matter for this
session.set <hit ctrl-space here> 
```

我的猜测是，这*不会*在自动完成中包含参数名称......而在自动实现工作的情况下，它会。这完全取决于 Eclipse 必须处理多少信息。

# calendar - 如何从它的源打包 dotnetnuke 的安装版本

> ID：11373373
> 
> 赞同：4
> 
> 时间：2012-07-07T08:01:58.657
> 
> 标签：calendar, dotnetnuke

我更改了 DotNetnuke 的源（一点点！），我想打包我的新 DotNetNuke 的安装版本。

我怎样才能做到这一点？

ps：我知道不建议更改来源，但我没有其他选择（Telerik 日历不支持我的日期格式，我必须用另一个日历替换它！）

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T14:02:38.330

答案取决于您所做的更改，但最简单的方法是交付应在正常 dnn 安装后安装的补丁。例如，如果您只更改了 dll，您可以要求按照正常的 dnn 设置说明，最后重新调整 dll。如果超过文件，您可以查看如何构建 dnn 升级包。它遵循相同的文件夹结构，只放置更改的文件。因此，如果您在 bin 中更改了几个 dll，则它们将放置在 bin 文件夹中，如果您更改了某些 ascx 文件，则应通过创建相同的文件夹层次结构将其放置在相同的路径中。

您还可以创建一个可以安装的包以部署您的更改，但对于较小的文件集，它将被完成。

如果您需要更多帮助，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T08:00:38.873

您可以通过将已编译的文件与 DNN 清单文件一起包含在内，将任何更改打包到 DNN 安装包中。然后可以通过扩展页面安装它。清单文件是一个 Xml 文件，它控制安装 zip 内容的安装位置。您可以根据需要使其简单或复杂。您还可以包含 xml 合并语句，以便在安装和卸载时更改 web.config 文件。请参阅 wiki 以供参考： http: [//www.dotnetnuke.com/Resources/Wiki/Page/Manifests.aspx](http://www.dotnetnuke.com/Resources/Wiki/Page/Manifests.aspx)

顺便说一句，您可能已经能够将修改后的 Telerik 源作为单独的提供程序提供，并通过 web.config 对其进行配置，从而使您免于修改源代码。为此，您需要构建自己的模块，并将其插入并替换标准的 Telerik 引用。

# seo - 多个域的 Robots.txt

> ID：11373376
> 
> 赞同：20
> 
> 时间：2012-07-07T08:02:01.097
> 
> 标签：seo

每种语言都有不同的域

1.  www.abc.com
2.  www.abc.se
3.  www.abc.de

然后我们为每个站点设置了不同的 sitemap.xml。在 robots.txt 中，我想为每个域添加站点地图参考。

1.  是否可以在单个 robots.txt 中为每个域提供多个站点地图引用？
2.  如果有多个，它会选择哪一个？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-06-07T10:50:16.940

在所有域重定向和 www 到非 www 重定向之后，我在 .htaccess 中使用以下解决方案。

```
# Rewrite URL for robots.txt
RewriteRule ^robots\.txt$ robots/%{HTTP_HOST}.txt [L] 
```

在您的根目录中创建一个名为 robots.txt 的新目录。创建一个包含每个域的特定机器人信息的文本文件。

*   /robots/abc.com.txt
*   /机器人/abc.se.txt
*   /机器人/abc.de.txt

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-07T15:41:12.250

robots.txt 只能通知搜索引擎其自身域的站点地图。因此，当它抓取该域的 robots.txt 时，它将是唯一一个它尊重的人。如果所有三个域都映射到同一个网站并共享一个 robots.txt，那么搜索引擎将有效地找到每个站点地图。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-11-01T11:37:36.610

根据[Hans2103](https://stackoverflow.com/users/1059884/hans2103)的回答，我写了这个应该可以安全地包含在几乎每个 Web 项目中的内容：

```
# URL Rewrite solution for robots.txt for multidomains on single docroot
RewriteCond %{REQUEST_FILENAME} !-d # not an existing dir
RewriteCond %{REQUEST_FILENAME} !-f # not an existing file
RewriteCond robots/%{HTTP_HOST}.txt -f # and the specific robots file exists
RewriteRule ^robots\.txt$ robots/%{HTTP_HOST}.txt [L] 
```

`robots.txt`如果存在，则此重写条件应该只是正常服务，并且仅查找`robots/`具有指定文件的目录`robots/<domain.tld>.txt`。

# mysql - 如何在mysql中使用带in子句的replace函数

> ID：11373377
> 
> 赞同：3
> 
> 时间：2012-07-07T08:02:29.197
> 
> 标签：mysql, sql

我想要将输出作为连接字符串的 sql 查询

**Sql 查询**

```
SELECT GROUP_CONCAT(nm) FROM xyz WHERE xyz.id IN (REPLACE(abc,"|",',')) 
```

其中 abc 是类似 1|2|3|4 的字符串，它是上面查询的 xyz 表的 ids，只在 abc 中给出第一个 id 的 nm。我认为它会创建类似的查询

```
SELECT GROUP_CONCAT(nm) FROM xyz WHERE xyz.id IN ("1,2,3,4") 
```

所以 (") 可能会产生任何人都可以提供帮助的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T08:09:56.190

您可以使用`LIKE`, （但它不会使用索引）

```
SELECT GROUP_CONCAT(nm)
FROM xyz
WHERE CONCAT('|', abc, '|') LIKE CONCAT('%|', xyz.id, '|%'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T08:47:36.483

你可以`INSTR`这样使用：

```
SELECT GROUP_CONCAT(nm) 
FROM xyz 
WHERE INSTR(CONCAT('|', abc, '|'), CONCAT('|', xyz.id, '|')) > 0 
```

或者您可以实现拆分功能或使用动态 SQL。

# javascript - 如何从 plone 4.1 的文件预览中禁用复制/粘贴或下载文件？

> ID：11373380
> 
> 赞同：0
> 
> 时间：2012-07-07T08:03:22.343
> 
> 标签：javascript, python, plone

[我已经使用我遵循的如何禁用复制粘贴（浏览器）](https://stackoverflow.com/questions/9958478/how-to-disable-copy-paste-browser)步骤中的答案 1 在 portal_javascript 下注册了 javascript ：1> 将脚本复制到文件中

```
document.onkeydown = function(e) {
    if (e.ctrlKey && e.keyCode === 65) {
   //     alert('not allowed');
        return false;
    }
     if (e.ctrlKey && e.keyCode === 67) {
     //   alert('not allowed');
        return false; 
    }
     if (e.ctrlKey && e.keyCode === 86) {
       // alert('not allowed');
        return false;
    }
};​
document.oncontextmenu=new Function("return false") 
```

步骤2）选择portal_javascripts /在开发模式下添加这个具有相同id / url的脚本并保存。3.在 atreal.richfile.preview 中自定义模板 (atreal.richfile.preview.interfaces.ipreview-atreal.richfile.preview.viewlet)，将鼠标按钮事件 onSelectStart 和 onSelectDrag 设置为 False。通过删除预览窗口的右上角按钮并在此窗口中显示除 pdf 之外的文件来更改代码。将代码块用作：

```
<dl class="richfile portlet"
    tal:condition="view/available"
    tal:attributes="id view/plugin_id"
    i18n:domain="atreal.richfile.preview">

    <dt tal:attributes="id string:${view/plugin_id}Header" class="rfheader portletHeader">
        <span class="portletTopLeft"></span>
        <!--tal:block tal:replace="structure view/controls"-->
        <span class="title" style="font-weight:bold"
            i18n:translate="">
            Preview
        </span>

        <span class="portletTopRight" ></span>
    </dt>

        <!--Your specific code here      tal:condition="not:ispdf" -->        
    <dd>
        <tal:block define="ispdf python:here.absolute_url().endswith('.pdf')">
        <IFRAME src="http://www.xyz.com" 
                    tal:condition="not:ispdf"
            tal:attributes="src string:${here/absolute_url}/rfpreview"
            width="100%" height="400" scrolling="auto" frameborder="1"> 
                    draggable="false" onselectstart="false"
           </IFRAME>  
    </tal:block>
    </dd>   
</dl> 
```

4.  在 ZMI 中，portal_types/File 选择 Aliases 选项卡并将 Default 和 View Aliases 的方法更改为（选定布局）并保存。
5.  在 ZMI 中，portal_skins/archetypes 自定义 at_download 代码以不返回任何内容，或者删除那里的代码。
6.  使用附加组件collective.documentviewer 预览pdf 文件。这对我来说很好。在过去的 1 1/2 个月里，我一直在研究这个问题。最后，我对最终结果感到满意。想和大家分享一下。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T08:21:13.207

试试这个以防止默认行为。

```
document.onkeydown = function(e) {
    if (e.ctrlKey && e.keyCode === 65) {
        alert('not allowed');
    }
     if (e.ctrlKey && e.keyCode === 67) {
        alert('not allowed');
    }
     if (e.ctrlKey && e.keyCode === 86) {
        alert('not allowed');
    }

    return false;
};​ 
```

**[**演示*](http://jsfiddle.net/G5P7x/9/)*** 在结果窗口上进行测试，而不是在其他任何地方。

**更新**禁用右键单击

```
<SCRIPT TYPE="text/javascript"> 
<!-- 
//Disable right click script 
//visit http://www.rainbow.arch.scriptmania.com/scripts/ 
var message="Sorry, right-click has been disabled"; 
/////////////////////////////////// 
function clickIE() {if (document.all) {(message);return false;}} 
function clickNS(e) {if 
(document.layers||(document.getElementById&&!document.all)) { 
if (e.which==2||e.which==3) {(message);return false;}}} 
if (document.layers) 
{document.captureEvents(Event.MOUSEDOWN);document.onmousedown=clickNS;} 
else{document.onmouseup=clickNS;document.oncontextmenu=clickIE;} 
document.oncontextmenu=new Function("return false") 
// --> 
</SCRIPT> 
```

# iphone - 我想在检测到触摸点时移动精灵体

> ID：11373385
> 
> 赞同：3
> 
> 时间：2012-07-07T08:04:19.973
> 
> 标签：iphone, ios, cocos2d-iphone, ccsprite

我想在触摸屏时移动精灵身体，但它不能发生......

```
-(void)ccTouchEnded:(UITouch *)touch withEvent:(UIEvent *)event
{
    for(b2Body *b=world->GetBodyList();b;b=b->GetNext())
    {
    CGPoint location=[touch locationInView:[touch view]];
        location=[[CCDirector sharedDirector]convertToGL:location];
         b2Vec2 locationWorld = b2Vec2(location.x/PTM_RATIO, location.y/PTM_RATIO);

        if(b->GetUserData()!=NULL)
        {
        CCSprite *sprite =(CCSprite *)b->GetUserData();

            b->SetTransform(b2Vec2(location.x, location.y), 0);
            id action = [CCMoveTo actionWithDuration:0.4 position:CGPointMake( b->GetPosition().x * PTM_RATIO, b->GetPosition().y * PTM_RATIO)];
             [sprite runAction:action];
        }
     }
} 
```

请帮助我...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T11:20:44.913

请尝试以下代码，它会为您工作。

```
- (void)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{       
    for( UITouch *touch in touches ) {
        CGPoint location = [touch locationInView: [touch view]];

        location = [[CCDirector sharedDirector] convertToGL: location];
        for(b2Body *b=world->GetBodyList();b;b=b->GetNext())
        {
            if(b->GetUserData()!=NULL)
            {
                CCSprite *sprite =(CCSprite *)b->GetUserData();
                b2Vec2 locationWorld = b2Vec2(location.x/PTM_RATIO, location.y/PTM_RATIO);
                b->SetTransform(b2Vec2(locationWorld.x, locationWorld.y), 0);
                id action = [CCMoveTo actionWithDuration:0.4 position:CGPointMake( b->GetPosition().x * PTM_RATIO, b->GetPosition().y * PTM_RATIO)];
                [sprite runAction:action];

            }
        }

    }
} 
```

带有身体的精灵移动到触摸结束的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T08:52:52.567

添加`self.isTouchEnabled = YES;`你的初始化方法

# java - 按钮 ClickListener 在 LibGDX 游戏中不起作用

> ID：11373390
> 
> 赞同：21
> 
> 时间：2012-07-07T08:04:54.733
> 
> 标签：java, android, libgdx

我正在使用 LibGDX 开发 Android 游戏。菜单屏幕中有 4 个按钮，但`ClickListener`这些按钮中的一个不起作用。

```
// retrieve the custom skin for our 2D widgets
Skin skin = super.getSkin();

// create the table actor and add it to the stage
table = new Table( skin );
table.width = stage.width();
table.height = stage.height();
stage.addActor( table );

// retrieve the table's layout
TableLayout layout = table.getTableLayout();

// register the button "start game"
TextButton startGameButton = new TextButton( "Start game", skin );
startGameButton.addListener( new ClickListener() {
    @Override
    public void clicked(InputEvent event, float x, float y) {
        System.out.println("hiii");
        Assets.load();
        // game.getSoundManager().play( TyrianSound.CLICK );
        game.setScreen( new GameScreen(game) );
    }
} );

layout.register( "startGameButton", startGameButton ); 
```

如何激活`ClickListener`LibGDX 中的按钮？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-07-09T18:08:31.897

您必须将按钮添加到舞台并调用

```
Gdx.input.setInputProcessor(stage); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-03T19:45:58.927

现在不是“点击方法”，而是“点击方法”（我想！），以防万一有人遇到我在发现这个问题时遇到的同样问题：

```
startGameButton.addListener( new ClickListener() {              
    @Override
    public void clicked(InputEvent event, float x, float y) {
        game.setScreen( new GameScreen(game) );
    };
}); 
```

# eclipse - 在 Eclipse 中制作的 Qt 应用程序无法启动

> ID：11373393
> 
> 赞同：0
> 
> 时间：2012-07-07T08:05:26.327
> 
> 标签：eclipse, qt, ide, mingw

我已经尝试了几个小时来让 eclipse、mingw 和 Qt 工作，但我无法做到。

无论我尝试什么，当我尝试运行 qt 应用程序（使用 Run 或 Debug，同样的事情）时，没有出现任何窗口，几秒钟后，Eclipse 说“程序终止”。另一次我尝试（使用一些不同的配置）时，Windows 会给出“程序已停止”错误。

如果我尝试从 Eclipse 外部启动应用程序，则会收到缺少 .dll 错误。

我安装了 Qt 4.8.1，最新版本的 eclipse，我刚刚安装了最新版本的 MinGW。我也在使用 Eclipse 的 Qt 插件。我正在运行 Windows 7。

还有一些其他小问题：

*   出于某种原因，我必须在打开/创建项目后重建索引，否则我会得到“未定义的包含”错误。
*   工具栏中的构建（锤子）图标是灰色/禁用的，为什么会这样？
*   对于每个新项目，我需要将 make 应用程序更改为 mingw32-make，是否可以让工具链使用这个 make 可执行文件之类的？

我不明白为什么 Microsoft Visual Studio 可以正常工作，除了安装 Qt 插件我不需要设置任何东西，而且 Eclipse 很难配置......

# ios-simulator - 如何在 ipad 模拟器中保存视频

> ID：11373404
> 
> 赞同：2
> 
> 时间：2012-07-07T08:07:01.147
> 
> 标签：ios-simulator, uiimagepickercontroller

我想使用 imagePickerController 从照片库中挑选视频。

但我的模拟器上没有视频。我知道如何在模拟器中加载图像，但不知道如何加载视频。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T19:41:27.317

您必须将 .mov 文件拖放到模拟器中。完成此操作后，您将看到视频，并且可以将其保存到相机胶卷（使用该屏幕中显示的按钮之一）。

但是您将无法在模拟器中选择视频，因为压缩视频时出错。

# viewdidload - 我应该写 [super viewDidLoad] 吗？

> ID：11373407
> 
> 赞同：0
> 
> 时间：2012-07-07T08:07:36.643
> 
> 标签：viewdidload, viewdidunload

我正在编写一个基于导航的应用程序。（它也有模态序列）我不确定我是否应该继续`[super viewDidLoad];`打电话。我应该在这行代码之后还是之前写代码？和类似的怎么样`[super viewDidUnload];`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T08:16:31.633

你不必；根据文档，它是一个存根函数，因此它在非子类中没有任何用处。

* * *

道德：总是阅读文档。

# javascript - 用javascript检查nodejs的真实IP IP地址

> ID：11373408
> 
> 赞同：1
> 
> 时间：2012-07-07T08:07:36.760
> 
> 标签：javascript, node.js

我将此代码作为在 nginx 代理后面运行的 nodejs 应用程序的一部分：

```
var ip_address = (request.headers['x-real-ip']);
if (ip_address !== "127.0.0.1") {
    var ip = request.headers['x-real-ip'];
    console.log(ip);    
}
else {
    var ip = "173.194.41.100";
    console.log(ip);
} 
```

我想要实现的是在我的本地开发机器上，为了测试我使用固定的 IP 地址，否则它会从请求标头中读取 x-real-ip。

我的问题是，有没有办法让这个证明更充分，例如，有没有办法绕过这个循环，从而使 var ip 返回 null，这会在我的应用程序上创建回溯？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T08:14:04.113

> 我的问题是，有没有办法让这个证明更充分，例如，有没有办法绕过这个循环，从而使 var ip 返回 null，这会在我的应用程序上创建回溯？

如果您稍微更改它，我们可以确定`ip`不会`null`：

```
var ip, ip_address;
ip = ip_address = request.headers['x-real-ip'];
if (ip === null || ip === "127.0.0.1") {
    ip = "173.194.41.100";
}
console.log(ip); 
```

`ip` `null`如果`request.headers['x-real-ip']`评估为，您的原始代码将会生成`null`，因为您的条件 ( `ip_address !== "127.0.0.1"`) 将是`true`，并且您将`request.headers['x-real-ip']`( `null`) 抓取到`ip`.

使用上面的修改后的代码，我们就没有这个问题了，而且我们也能够使它更简洁一些。

# ios - 我如何修复警告

> ID：11373421
> 
> 赞同：-4
> 
> 时间：2012-07-07T08:10:13.043
> 
> 标签：ios, xcode4.2

我的项目中有两个类：`SIAViewController.h`和它的子类`cell.h`。

在`cell.h`我有

```
@interface cell : UIViewController
@property(nonatomic)CGRect frame;
@property(assign,nonatomic)UIImage *image;
@property(nonatomic)int tag;
@property(nonatomic)bool userInteractionEnabled;
@property(retain,nonatomic)UITapGestureRecognizer *addGestureRecognizer;
@end 
```

并在`SIAViewController.m`：

```
int x=20,y=50,t=1;
cell *tank[9][9];
for(int i=1;i<=8;i++)
{
    for(int j=1;j<=8;j++)
    {
        tank[i][j]=[[cell alloc]init];
        tank[i][j].frame=CGRectMake(x, y, 35, 35);
        UIImage *myImage=[UIImage imageNamed:@"s.jpg"];
        [tank[i][j] setImage:myImage];
        tank[i][j].tag=t;
        tank[i][j].userInteractionEnabled=YES;
        UITapGestureRecognizer * recognizer = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(tapDetected:)];
        tank[i][j]. addGestureRecognizer=recognizer;
        [self.view addSubview:tank[i][j]];
        x+=35;
        t++;
    }
    y+=35;
    x=20;
} 
```

在运行项目时，我收到线程不兼容的指针类型，将单元 __strong 发送到 uiview 类型的参数。谁能帮我。我是 xcode 的新手。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T08:15:01.337

原因是，UIView 是表格视图单元格的超类。这意味着如果某些属性应该是 UITableViewCell，但您传入了一个通用的 UIView 实例，则该 UIView 可能但不一定也是 UITableViewCell。这就是编译器警告您的原因。如果你知道你要设置的实例实际上是一个伪装成 UIView 的 UITableViewCell，你可以放心地忽略这个警告，因为 Objective-C 是一种动态语言；类型声明仅用于欺骗编译器；类型匹配发生在运行时。

# java - 是否可以使用枚举常量作为 Java 中可实例化类的模板？

> ID：11373428
> 
> 赞同：-1
> 
> 时间：2012-07-07T08:12:56.617
> 
> 标签：java, class, templates, enums, instantiation

对不起，如果我的问题有点不清楚；我发现很难找到措辞。我花了几个小时在 Eclipse 中玩转，浏览 JavaDoc、Google 以及 SO。我学到了很多，但没有找到答案。

我想做的是定义一个枚举，例如：

```
public enum Animals {
    Cow,
    Chicken,
    Sheep,
    Horse;
} 
```

并让每个枚举常量定义一个非本地类的可实例化类。下面的工作吗？如果不是，为什么，会怎样？

在某些文件中：

```
abstract public class Animal {

    private String nameString;

    public String getName() {
        return nameString;
    }

} 
```

在另一个：

```
public enum Animals {

    Cow ((new Animal() {
        private boolean hasMilk;
        {
            nameString = "Cow";
            hasMilk = false;
        }
        public boolean hasMilk() {
            return hasMilk;
        }
    }).getClass()),

    Chicken ((new Animal() {
        private boolean hasFeathers;
        {
            nameString = "Chicken";
            hasFeathers = true;
        }
        public boolean hasFeathers() {
            return hasFeathers;
        }
    }).getClass()),

    Sheep ((new Animal() {
        private boolean isShorn;
        {
            nameString = "Cow";
            isShorn = false;
        }
        public boolean isShorn() {
            return isShorn;
        }
        public void Shear() {
            isShorn = true;
        }
    }).getClass()),

    Horse ((new Animal() {
        {
            nameString = "Cow";
        }
    }).getClass());

    private Class<? extends Animal> animalClass;

    private Animals(Class<? extends Animal> a) {
        animalClass = a;
    }

    public Class<? extends Animal> getAnimalClass() {
        return animalClass;
    }
} 
```

然后，在其他类的其他方法中，能够做到这一点：

```
Animal farmAnimal;
farmAnimal = Animals.Sheep.getAnimalClass().newInstance();
boolean shorn = farmAnimal.isShorn(); 
```

（此时此刻的价值`shorn`）`false`；

```
farmAnimal.shear();
shorn = farmAnimal.isShorn(); 
```

( `shorn == true`)

```
farmAnimal = Animals.Sheep.getAnimalClass().newInstance();
shorn = farmAnimal.isShorn(); 
```

( `shorn == false`)

显然，这不是我在这里所做的最好的方法，但这不是重点。我知道我可以为枚举常量指定行为，但这并不能使它们作为不同的实例多次实例化。我希望能够创建各种枚举常量的多个实例（或副本），具有不同的实例变量（以及不同数量/类型的实例变量），具有不同的访问器方法，然后我可以对其进行处理（更改实例变量）无需修改枚举常量。

我知道枚举常量被设计为不可变的。这与我的想法并不冲突；我希望每个枚举常量都代表一个可变类的不可变定义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T08:44:04.677

你可以这样做：

```
public enum AnimalType {
    COW {
        @Override
        public Animal createNew() {
            return new Cow();
        }
    },
    HORSE {
        @Override
        public Animal createNew() {
            return new Horse();
        }
    };

    public abstract Animal createNew();
}

public abstract class Animal {
    private final AnimalType type;
    private final String nameString;

    public Animal(final AnimalType type, final String nameString) {
        super();
        this.type = type;
        this.nameString = nameString;
    }

    public String getName() {
        return nameString;
    }

    public AnimalType getType() {
        return type;
    }
}

public class Horse extends Animal {
    public Horse() {
        super(AnimalType.HORSE, "Horse");
    }
}

public class Cow extends Animal {
    private boolean milk;

    public Cow() {
        super(AnimalType.COW, "Cow");
    }

    public boolean hasMilk() {
        return milk;
    }

    public void setMilk(final boolean milk) {
        this.milk = milk;
    }
}

@Test
public void testEnum() {
    Cow cow = (Cow) AnimalType.COW.createNew();
    Horse horse = (Horse) AnimalType.HORSE.createNew();

    System.out.println("cow  : " + cow.getType() + ", has milk: " + cow.hasMilk());
    System.out.println("horse: " + horse.getType());
} 
```

# php - 您如何使用 REST API + PHP 将图像上传到 parse.com？

> ID：11373431
> 
> 赞同：2
> 
> 时间：2012-07-07T08:14:00.590
> 
> 标签：php, parse-platform

目前正在使用这个，但存储的文件是空的，所以我想没有数据通过。

```
$post = array("file"=>'@'.$_FILES['uploadfile']['tmp_name']);         
$ch = curl_init();
curl_setopt($ch,CURLOPT_HTTPHEADER,array('X-Parse-Application-Id : XXXXXXXXXXXXXX','X-Parse-REST-API-Key: XXXXXXXXx', 'Content-type: image/jpeg'));
curl_setopt($ch, CURLOPT_URL, 'https://api.parse.com/1/files/'.$_FILES['uploadfile']['name']);
curl_setopt($ch, CURLOPT_POST,1);
curl_setopt($ch, CURLOPT_BINARYTRANSFER, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($post));
$result=curl_exec ($ch);
curl_close ($ch);
echo $result; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T04:29:13.287

得到它的工作。您需要将二进制数据作为 post 字段发送。呃。在此之前，您可能应该创建一些限制（文件大小、类型等）

```
$post = file_get_contents($_FILES['uploadfile']['tmp_name']);

$ch = curl_init();
curl_setopt($ch,CURLOPT_HTTPHEADER,array('X-Parse-Application-Id : XXXXXXXX','X-Parse-REST-API-Key: XXXXXXXXXXXXXXX', 'Content-type: image/jpeg'));
curl_setopt($ch, CURLOPT_URL, 'https://api.parse.com/1/files/'.$_FILES['uploadfile']['name']);
curl_setopt($ch, CURLOPT_POST,1);
curl_setopt($ch, CURLOPT_BINARYTRANSFER, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $post);
$result=curl_exec ($ch);
curl_close ($ch);
echo $result; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-23T10:30:00.773

完全按照我们需要的方式使用这项工作......

```
function sendImageToParse($url, $filename) {
    $this->layout = FALSE;
    $this->autoRender = false;

    $headers = array(
        'X-Parse-Application-Id:' . $this->APPLICATION_ID,
        'X-Parse-REST-API-Key:' . $this->REST_API_KEY,
        'Content-Type: image/jpeg'
    );

    $data = file_get_contents($url);

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
    curl_setopt($ch, CURLOPT_URL, 'https://api.parse.com/1/files/' . $filename);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($ch, CURLOPT_VERBOSE, true);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    $response = curl_exec($ch);
    curl_close($ch);
    return $response;
}

function add() {

    if ($this->request->is('post')) {

        $giftUniqueId = time();
        $urlFileImage = $allData['Coupon']['imageLink']; 
        //Eg : "http://localhost/favrapp/img/couponsLogo/gap.jpg";
        $filename = $allData['Coupon']['imageName']; //Eg : "gap.jpg";

        $responseFile = $this->sendImageToParse($urlFileImage, $filename);
        $arrayInt = json_decode($responseFile);

        if (!empty($arrayInt)) {
            $name = $arrayInt->name;
            $url = $arrayInt->url;
        } else {
            $name = '';
            $url = '';
        }

        //Save to table by creating object   
        $url = 'https://api.parse.com/1/classes/giftcard';
        $data = array('name' => $allData['Coupon']['name'], 
               'couponType' => $allData['Coupon']['coupontype'],
               'giftcardTypeid' => $allData['Coupon']['giftcardTypeid'], 'giftcardcheckid' => $giftUniqueId,
            'logo' => array('name' => $name, '__type' => 'File', 'url' => $url),
        );
        $_data = json_encode($data);
        $headers = array(
            'X-Parse-Application-Id: ' . $this->APPLICATION_ID,
            'X-Parse-REST-API-Key: ' . $this->REST_API_KEY,
            'Content-Type: application/json',
            'Content-Length: ' . strlen($_data),
        );

        $curl = curl_init($url);
        curl_setopt($curl, CURLOPT_POST, 1);
        curl_setopt($curl, CURLOPT_POSTFIELDS, $_data);
        curl_setopt($curl, CURLOPT_HTTPHEADER, $headers);
        curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);
        curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
        curl_exec($curl);
        curl_close($curl);
    }

} 
```

# android - Android 自动滚动 EditText 提示

> ID：11373433
> 
> 赞同：0
> 
> 时间：2012-07-07T08:14:18.223
> 
> 标签：android, android-edittext

[使edittext可滚动的问题](https://stackoverflow.com/questions/6250041/problem-with-making-edittext-scrollable)

有人提到它不能用 singleLine=true 滚动。

所以我有两个选择：

1.  我检查用户是否输入“\n”并将其删除，那么我也必须担心第二行中的事情。

2.  我使用了一个循环滚动的自定义文本视图，这也可以在这里仅用于提示吗？

    ```
     <com.test.ScrollingTextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_marginTop="1dp"
            android:layout_weight="0.17"
            android:background="@color/black"
            android:ellipsize="marquee"
            android:gravity="center_vertical"
            android:marqueeRepeatLimit="marquee_forever"
            android:paddingLeft="10dp"
            android:scrollHorizontally="true"
            android:singleLine="true"
            android:text="@string/editLength"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:textColor="@color/white" /> 
    ```

公共类 ScrollingTextView 扩展 TextView {

```
public ScrollingTextView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

public ScrollingTextView(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public ScrollingTextView(Context context) {
    super(context);
}

@Override
protected void onFocusChanged(boolean focused, int direction, Rect previouslyFocusedRect) {
    if (focused)
        super.onFocusChanged(focused, direction, previouslyFocusedRect);
}

@Override
public void onWindowFocusChanged(boolean focused) {
    if (focused)
        super.onWindowFocusChanged(focused);
}

@Override
public boolean isFocused() {
    return true;
} 
```

}

我只是无法正确格式化。对此感到抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T09:18:35.637

使您的 EditText 可滚动，如下所示：

```
EditText yourEditText = new EditText(context);
yourEditText.setScroller(new Scroller(context)); 
yourEditText.setMaxLines(1); 
yourEditText.setVerticalScrollBarEnabled(true); 
yourEditText.setMovementMethod(new ScrollingMovementMethod()); 
```

# javascript - 拼接只在部分时间工作

> ID：11373438
> 
> 赞同：0
> 
> 时间：2012-07-07T08:15:03.177
> 
> 标签：javascript, splice

在这里，我有一个元素数量未定义的数组。我试图打印这个数组的随机元素并剪切它。这是我的代码。

```
function rand(min, max){
   return (Math.floor(Math.random() * (max - min + 1)) + min).toFixed(0);
}
$('#do').click(function(){
    var count = chamarr.length;
    var num = 0;
    if (count == 1) {
      $('#output').html('Nothing can found');
    } else {
      num = rand(1,chamarr.length);
      $('#output').html(chamarr[num]);
      chamarr.splice(num,1);
    }
 }); 
```

当我记录一个数组被切割时，我看到总是好的，但有时元素没有被切割！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T08:20:13.363

我的*猜测*是问题出在您的`randnum`方法上：

```
function rand(min, max){
   return (Math.floor(Math.random() * (max - min + 1)) + min).toFixed(0);
} 
```

我*相信*这会给你一个范围内的价值`[min, max]`——包括*两端*。（实际上，它会为您提供该值的字符串版本作为`toFixed`返回字符串，但是当您稍后使用它时，它会被强制转换为数字。）

现在你这样称呼它：

```
num = rand(1,chamarr.length); 
```

因此，如果数组的长度为 6 个元素，您将获得 range 中的值`[1, 6]`。但是随后您将尝试采用`chamarr[num]`- 有效索引的范围是`[0, 5]`因为数组是基于 0 的。如果您尝试使用元素 6，那将给您`undefined`- 但是在元素 6 处*拼接*将无济于事。

我会将您的`rand`方法更改为在上限处*独占，如下所示：*

```
function rand(min, max) {
   return (Math.floor(Math.random() * (max - min)) + min).toFixed(0);
} 
```

然后这样称呼它：

```
num = rand(0, chamarr.length); 
```

这将为索引和拼接提供正确范围内的值。

编辑：回应评论等：

*   可能值得删除该功能的`toFixed(0)`一部分`rand`；毕竟，你并不*真正想要一个字符串。*这实际上并不是以前错误的一部分，但它通常更干净：

    ```
    function rand(min, max) {
       return Math.floor(Math.random() * (max - min)) + min;
    } 
    ```

*   您可能还需要一个使`0`下限隐式的函数版本

*   如果您不打算在代码中的其他任何地方使用随机数，您*可以*内联`Math.floor()`/`Math.random()`调用而不是使用单独的函数，但我个人希望让它们远离只想得到的“逻辑”代码一个随机数并使用它。
*   我改变这个函数的原因是，在计算机科学中拥有一个独占的上限更为常见——它通常与集合之类的 0 索引一起使用。您通常会编写`for`包含下限和互斥下限等的循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T08:20:15.610

问题是`num`索引超出范围。你应该做这个：

```
num = rand(0, chamarr.length - 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T08:27:05.923

您可以简化逻辑：

```
function rand(max) {
  return Math.round( Math.random() * max ) % max;
}
var arr = [1, 2, 3, 4],
    len = arr.length,
    num = rand(len);

if ( len === 1 ) {
    // Do your "Nothing here" output
}
else {
    arr.splice(num, 1);
    // etc, etc, etc...
} 
```

# java - 接口是否可以从 Java 中的超级接口继承常量和方法？

> ID：11373442
> 
> 赞同：-1
> 
> 时间：2012-07-07T08:15:43.200
> 
> 标签：java, oop

我知道一个接口在java中扩展了另一个接口。所以，这是否可以从超级接口继承常量和方法。如果我对继承有任何限制，请指导我了解它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T08:18:12.743

扩展常量是什么意思？！所有子接口/类从超类/接口继承所有常量和方法

# android - 如何在 Android 中设置选项卡视图指示器背景颜色

> ID：11373443
> 
> 赞同：4
> 
> 时间：2012-07-07T08:15:47.757
> 
> 标签：android

如何在单击选项卡主机上更改颜色。我可以改变图像，但颜色不会改变。

```
public class MainActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);

        TabHost tabHost=(TabHost)findViewById(R.id.tabHost);
        tabHost.setup();

        TabSpec spec1=tabHost.newTabSpec("Tab 1");
        spec1.setContent(R.id.tab1);`enter code here`
        spec1.setIndicator("Tab 1", getResources().getDrawable(setBackgroundColor(Color.RED));

        TabSpec spec2=tabHost.newTabSpec("Tab 2");
        spec2.setIndicator("Tab 2", getResources().getDrawable(setBackgroundColor(Color.GREAN));
        spec2.setContent(R.id.tab2);

        TabSpec spec3=tabHost.newTabSpec("Tab 3");
        spec3.setIndicator("Tab 3", getResources().getDrawable(setBackgroundColor(Color.BLACK));
        spec3.setContent(R.id.tab3);

        tabHost.addTab(spec1);
        tabHost.addTab(spec2);
        tabHost.addTab(spec3);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T10:14:11.427

您可以使用此功能，只需在其中传递您的 tabHost

```
public static void setTabColor(TabHost tabhost) {
        for(int i=0;i<tabhost.getTabWidget().getChildCount();i++)
        {
            tabhost.getTabWidget().getChildAt(i).setBackgroundResource(R.color.white); //unselected
        }
        tabhost.getTabWidget().getChildAt(tabhost.getCurrentTab()).setBackgroundResource(R.color.tab_selected); // selected
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T10:11:34.827

//设置标签的背景颜色

```
 for (int i = 1; i <= 3; i++) {
    tabHost.getTabWidget().getChildTabViewAt(i).setBackgroundColor(getResources().getColor(R.color.gradient));

       } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-22T10:23:59.047

```
public class MainActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);

        TabHost tabHost=(TabHost)findViewById(R.id.tabHost);
        tabHost.setup();

        TabSpec spec1=tabHost.newTabSpec("Tab 1");
        spec1.setContent(R.id.tab1);`enter code here`
        spec1.setIndicator("Tab 1", getResources().getDrawable(setBackgroundColor(view.Color.RED));

        TabSpec spec2=tabHost.newTabSpec("Tab 2");
        spec2.setIndicator("Tab 2", getResources().getDrawable(setBackgroundColor(view.Color.GREAN));
        spec2.setContent(R.id.tab2);

        TabSpec spec3=tabHost.newTabSpec("Tab 3");
        spec3.setIndicator("Tab 3", getResources().getDrawable(setBackgroundColor(view.Color.BLACK));
        spec3.setContent(R.id.tab3);

        tabHost.addTab(spec1);
        tabHost.addTab(spec2);
        tabHost.addTab(spec3);
    }
} 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2017-04-19T14:50:38.983

为此，您应该使用事件 onTabChangedlistener 并在其中放置您想要的任何循环，如所选答案中所示。

```
tabhost.setOnTabChangedListener(new TabHost.OnTabChangeListener() {
        @Override
        public void onTabChanged(String s) {
            setTabColor(tabhost); 
        }
    }); 
```

你可以阅读这篇文章，这会对你有所帮助，但它是西班牙语的。

[http://www.johnarij.ml/2017/04/19/cambio-de-color-de-tab-en-tabhost-android/](http://www.johnarij.ml/2017/04/19/cambio-de-color-de-tab-en-tabhost-android/)

# emacs - 再次打开 Emacs 时如何保存所有已编辑的情况并恢复上次的所有情况

> ID：11373447
> 
> 赞同：0
> 
> 时间：2012-07-07T08:16:43.077
> 
> 标签：emacs, elisp

我了解到在.emacs中添加这些代码可以使Emacs在退出之前自动保存所有情况并下次启动它，Emacs可以显示最后的情况并继续编辑它。

```
(load "desktop") 

(desktop-load-default)

(desktop-read)

(add-hook 'kill-emacs-hook

         '(lambda()(desktop-save "~/"))) 
```

但是这段代码带来了一个问题，你只能打开一个 Emacs，当你想同时启动另一个 Emacs 时，只能运行前一个。

我想要保存所有情况以备下次使用的功能，但我还需要再启动一个 Emacs，我怎样才能让两侧同时工作？

谢谢您的帮助。我在等待......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T09:47:23.107

使用不同的桌面文件；或者在您的主​​ Emacs 启动并运行后，使用 emacsclient 而不是 emacs 来启动新的编辑缓冲区。Google 中有多个`emacs`别名/函数/任何示例，如果 Emacs 未运行，则启动 Emacs，否则运行`emacsclient`。

# objective-c - Restkit：将 Json 数组和映射响应发布到托管对象

> ID：11373448
> 
> 赞同：1
> 
> 时间：2012-07-07T08:16:46.757
> 
> 标签：objective-c, ios, json, restkit

这是我的设置，将 Json 中的对象列表发布到服务器并返回更新的结果，这些结果将映射到核心数据并进行更新。

-- 发布博日 --

```
{
    "memberId": "1000000",
    "contacts": [
        {
            "phoneNumber": "+12233333333",
            "firstName": "john",
            "lastName": "H"
        },
        {
            "phoneNumber": "+12244444444",
            "firstName": "mary",
            "lastName": "K"
        }
    ]
} 
```

-- 发布回复 --

```
{
    "contacts": [
        {
            "phoneNumber": "+12233333333",
            "firstName": "john",
            "lastName": "k",
            "isMember": "yes"

        },
        {
            "phoneNumber": "+12244444444",
            "firstName": "mary",
            "lastName": "k",
            "isMember": "no"
        }
    ]
} 
```

我发现了另一个与我的案例非常相似的主题。[RestKit：如何发布一组对象？](https://stackoverflow.com/q/7726437/772481)

这是我的设置。

-- SHContact.h --

```
@interface SHContact : NSManagedObject {}

@property (nonatomic, strong) NSString* phoneNumber;
@property (nonatomic, strong) NSString* firstName;
@property (nonatomic, strong) NSString* lastName;
@property (nonatomic, strong) NSNumber* isMember;
@end 
```

-- SHContactPost.m --

```
#import "SHContactPost.h"
@implementation SHContactPost
@synthesize contacts;
@synthesize memberId;
- (NSArray*)contacts {
    return <list-of-SHContact>;
}
- (NSString *)memberId {
    return @"my-member-id";
}
@end 
```

-- RK 映射 --

```
// Setup our object mappings for SHContact
RKManagedObjectMapping* contactMapping = 
       [RKManagedObjectMapping mappingForClass:[SHContact class]  
                          inManagedObjectStore:objectManager.objectStore];
contactMapping.primaryKeyAttribute = @"phoneNumber";
[contactMapping mapAttributes:@"phoneNumber", 
 @"firstName", @"lastName", @"isMember", nil];

[objectManager.mappingProvider setObjectMapping:contactMapping 
                                     forKeyPath:@"contacts"];

[[objectManager mappingProvider] 
                      setSerializationMapping:[contactMapping inverseMapping]
                                     forClass:[SHContact class]];

RKObjectMapping *cPostMapping = [RKObjectMapping 
                            mappingForClass:[SHContactPost class]];
[cPostMapping mapKeyPath:@"contacts" 
          toRelationship:@"contacts" 
             withMapping:contactMapping];
[cPostMapping mapAttributes:@"memberId", nil];
[objectManager.mappingProvider 
          setSerializationMapping:[cPostMapping inverseMapping] 
                         forClass:[SHContactPost class]];    
[objectManager.router routeClass:[SHContactPost class] 
                  toResourcePath:@"/contacts" 
                       forMethod:RKRequestMethodPOST];
objectManager.serializationMIMEType = RKMIMETypeJSON; 
```

-- 发布到服务器 --

```
SHContactPost *post = [[SHContactPost alloc] init];
RKObjectManager* manager = [RKObjectManager sharedManager];
[manager postObject:post delegate:self]; 
```

服务器发布和响应是**SUCCESSFUL**。但是，Reskit 无法将结果映射回 SHContact 对象列表。这是例外。我错过了什么吗？

```
restkit.network:RKObjectLoader.m:222 Encountered errors during mapping: 
Cannot map a collection of objects onto a non-mutable collection. 
Unexpected destination object type 'SHContactPost' 
```

**更新：**这就是我改变它以使其对我有用。

-- RK 映射 --

```
// Setup our object mappings for SHContact
RKManagedObjectMapping* contactMapping = 
       [RKManagedObjectMapping mappingForClass:[SHContact class]  
                          inManagedObjectStore:objectManager.objectStore];
contactMapping.primaryKeyAttribute = @"phoneNumber";
[contactMapping mapAttributes:@"phoneNumber", 
 @"firstName", @"lastName", @"isMember", nil];
[objectManager.mappingProvider addObjectMapping:contactMapping]; 
```

-- 发布到服务器 --

```
SHContactPost *post = [[SHContactPost alloc] init];
RKObjectManager* manager = [RKObjectManager sharedManager];
RKObjectMapping* responseMapping = [manager.mappingProvider 
                            objectMappingForClass:[SHContact class]];
[manager postObject:post usingBlock:^(RKObjectLoader *loader) {
        loader.delegate = self;
        loader.targetObject = nil;
        responseMapping.rootKeyPath = @"contacts";
        loader.objectMapping = responseMapping;
 }]; 
```

**loader.targetObject 需要将其设置为 nil，否则将不起作用。**

# iphone - NSInternalInconsistencyException（执行 SQL 字符串 'INSERT INTO Y_UBMETA(YPEERID, YTRANSACTIONNUMBER) 期间出错）

> ID：11373449
> 
> 赞同：8
> 
> 时间：2012-07-07T08:16:51.857
> 
> 标签：iphone, xcode, ios5, icloud, icloud-api

iOS iCloud

由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“执行 SQL 字符串时出错”INSERT INTO Y_UBMETA(YPEERID, YTRANSACTIONNUMBER)

未解决的错误 Error Domain=NSCocoaErrorDomain Code=134312 “存储元数据恢复似乎失败，请尝试再次将存储添加到协调器。如果不成功，请将数据迁移到新的泛化持久存储。” UserInfo=0xdba5b80 {NSLocalizedDescription=存储元数据恢复似乎失败，请尝试再次将存储添加到协调器。如果不成功，将数据迁移到新的泛化持久化存储。}, { NSLocalizedDescription = "存储元数据恢复似乎失败，请尝试再次将存储添加到协调器。如果不成功，将数据迁移到新的无处不在的持久存储。”；

我该如何解决这个问题？因为它是 iCloud 的内部查询。我把我的代码块放在我写的方法下面..

```
 - (NSPersistentStoreCoordinator *)persistentStoreCoordinator
 {
     NSLog(@"persistentStoreCoordinator:%@",[persistentStoreCoordinator_ description]);
     if((persistentStoreCoordinator_ != nil)) 
     {
         return persistentStoreCoordinator_;
     }

     NSLog(@"persistentStoreCoordinator:%@",[persistentStoreCoordinator_ description]);
     NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"CoreDataModel.sqlite"];

     persistentStoreCoordinator_ = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];

     NSPersistentStoreCoordinator* psc = persistentStoreCoordinator_;

     NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

         dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
         NSFileManager *fileManager = [NSFileManager defaultManager];

         // Migrate datamodel
         NSDictionary *options = nil;

         // this needs to match the entitlements and provisioning profile
         NSURL *cloudURL = [fileManager URLForUbiquityContainerIdentifier:nil];

         NSLog(@"cloudURL:%@",cloudURL);

             //NSString* coreDataCloudContent = [[cloudURL path] stringByAppendingPathComponent:@"Data"];  

            cloudURL = [cloudURL URLByAppendingPathComponent:@"Data"];                                                                                                                                   

        // NSLog(@"coreDataCloudContent:%@",coreDataCloudContent);

        //if ([coreDataCloudContent length] != 0 && [[defaults objectForKey:@"allMetadataFlag"] isEqualToString:@"YES"]) 

        if (cloudURL )//&& [[defaults objectForKey:@"allMetadataFlag"] isEqualToString:@"YES"])

         {
             // iCloud is available
            // cloudURL = [NSURL fileURLWithPath:coreDataCloudContent];

             NSLog(@"cloudURL:%@",cloudURL);

             options = [NSDictionary dictionaryWithObjectsAndKeys:
                        [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
                        [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption,
                        @"SecureAssistant.store", NSPersistentStoreUbiquitousContentNameKey,
                        cloudURL, NSPersistentStoreUbiquitousContentURLKey,nil];
         } 
         else 
         {
             // iCloud is not available
             options = [NSDictionary dictionaryWithObjectsAndKeys:
                        [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
                        [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption,nil];
         }
             NSError *error = nil;
         [psc lock];
         if (![psc addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:options error:&error])
         {
             NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
             abort();
         }
         [psc unlock];

         dispatch_async(dispatch_get_main_queue(), ^{
             NSLog(@"asynchronously added persistent store!");
             [[NSNotificationCenter defaultCenter] postNotificationName:@"RefetchAllDatabaseData" object:self userInfo:nil];
         });

     });

    return persistentStoreCoordinator_;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:00:18.620

我遇到了同样的问题，这是因为我从 Xcode 更改了数据模型的属性，而不是通过代码从我的应用程序更改。我通过从 iCloud 中删除 SQLite 文件并从设备中删除应用程序然后重建来解决了这个问题。它对我有用。

# actionscript-3 - 从远程页面上的 SWF 连接到本地套接字服务器

> ID：11373450
> 
> 赞同：0
> 
> 时间：2012-07-07T08:17:00.327
> 
> 标签：actionscript-3, flash, sockets, sandbox

我有一个连接到本地套接字服务器的 Kiosk，因此它可以访问某些硬件。如果 kiosk 代码存储在本地，它可以完美地访问套接字。

但是，我有充分的理由知道，如果信息亭代码托管在远程服务器上，由于沙盒违规，它无法访问本地套接字服务器。

问题是所有这些信息亭都托管在 AppEngine 上，所以当我完成更改后，需要花费数小时才能渲染到单个 HTML 文件，并更改所有 css/js 位置链接。

是否有可能允许 SWF 文件在远程招待所时访问本地套接字服务器？

此外，套接字服务器是我没有源代码的 Java 应用程序。我通过终端在本地运行它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T09:02:02.553

我有同样的问题。

问题是 Flash player 10 的套接字安全性变得更加严格。只是将 crossdomain.xml 放在服务器上不会做任何事情 - 您实际上必须将跨域策略文件发送给任何连接的客户端。

Adobe 提供了最简单的解决方案——他们提供了几个脚本，一个 perl 和一个 python，它们将设置一个策略文件服务器。你可以在这里找到它们：

[设置套接字策略服务器](http://www.adobe.com/devnet/flashplayer/articles/socket_policy_files.html)

# java - LCP 如何帮助查找模式的出现次数？

> ID：11373453
> 
> 赞同：21
> 
> 时间：2012-07-07T08:18:11.873
> 
> 标签：java, algorithm, data-structures, pattern-matching, suffix-array

我读过**最长公共前缀（LCP）**可用于查找字符串中模式的出现次数。

具体来说，您只需要创建文本的后缀数组，对其进行排序，然后无需进行二进制搜索来查找范围以便计算出现次数，您只需计算文本中每个连续条目的 LCP后缀数组。

尽管使用二进制搜索来查找模式的出现次数是显而易见的，但我无法弄清楚 LCP 如何帮助在这里找到出现次数。

例如对于这个后缀数组`banana`：

```
LCP  Suffix entry
N/A  a  
1    ana  
3    anana  
0    banana  
0    na  
2    nana 
```

LCP 如何帮助找到像“banana”或“na”这样的子字符串的出现次数对我来说并不明显。

任何帮助弄清楚 LCP 如何在这里提供帮助？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-07T11:48:33.173

我不知道使用 LCP 数组*而不是*执行二进制搜索的任何方法，但我相信您所指的是 Udi Manber 和 Gene Myers 在[Suffix arrays: a new method for online string](http://scholar.google.com/scholar?q=suffix+arrays+a+new+method+for+on-line+string+searches&btnG=&hl=en&as_sdt=0%2C5) search 中描述的技术。

（注意：以下解释已被复制到 2014 年 4 月 9 日的维基百科文章中，请参阅[diff](https://en.wikipedia.org/w/index.php?title=LCP_array&diff=603491647&oldid=603484606)。如果您查看此处和维基百科上的修订历史，您会发现这里的内容是先写的。请不要插入像“取自维基百科”这样的评论进入我的回答。）

这个想法是这样的：为了找到给定字符串 P（长度 m）在文本 T（长度 N）中出现的次数，

*   您对 T 的后缀数组使用二进制搜索（就像您建议的那样）
*   但是您可以使用 LCP 数组作为辅助数据结构来**加快速度。**更具体地说，您生成一个特殊版本的 LCP 阵列（我将在下面将其称为 LCP-LR）并使用它。

使用标准二进制搜索（*没有*LCP 信息）的问题是，在您需要进行的**每个 O(log N) 比较**中，您将 P 与后缀数组的当前条目进行比较，这意味着up的**完整字符串比较**到 m 个字符。所以复杂度是 O(m*log N)。

LCP-LR 阵列通过以下方式帮助将其改进为 O(m+log N)：

*   在二分搜索算法的任何时候，您都像往常一样考虑后缀数组的范围 (L,...,R) 及其中心点 M，并决定是否继续在左侧子范围 ( L,...,M) 或在正确的子范围内 (M,...,R)。
*   为了做出决定，您将 P 与 M 处的字符串进行比较。如果 P 与 M 相同，则完成，但如果不是，您将比较 P 的前 k 个字符，然后确定 P 在字典上是否更小大于 M。假设结果是 P 大于 M。
*   因此，在**下一步**中，您考虑 (M,...,R) 和中间的新中心点 M'：

    ```
     M ...... M' ...... R
                  |
           we know:
              lcp(P,M)==k 
    ```

    现在的**诀窍**是 LCP-LR 是预先计算的，因此 O(1) 查找会告诉您 M 和 M' 的最长公共前缀 lcp(M,M')。

    您已经（从上一步中）知道 M 本身具有与 P 相同的 k 个字符的前缀：lcp(P,M)=k。现在有三种可能：

    *   情况 1：k < lcp(M,M')，即 P与 M 的共同前缀字符*少于*M 与 M' 的共同前缀字符。这意味着 M' 的第 (k+1) 个字符与 M 的字符相同，并且由于 P 在字典上大于 M，因此它也必须在字典上大于 M'。所以我们继续右半部分（M'，...，R）。
    *   情况 2：k > lcp(M,M')，即 P与 M 的共同前缀字符*多于*M 与 M' 的共同前缀字符。因此，如果我们将 P 与 M' 进行比较，公共前缀将小于 k，并且 M' 在字典序上将大于 P，因此，*在不实际进行比较的情况下*，我们继续左半部分 (M,.. .,M')。
    *   情况 3：k == lcp(M,M')。所以 M 和 M' 在前 k 个字符中都与 P 相同。要决定我们是继续左半部分还是右半部分，只需**从第 (k+1) 个字符开始**比较 P 和 M' 就足够了。
*   我们继续递归。

总体效果是**P 的任何字符都不会与文本中的任何字符进行多次比较**。字符比较的总数以 m 为界，因此总复杂度确实是 O(m+log N)。

显然，剩下的关键问题是我们如何预先计算 LCP-LR，以便它能够在 O(1) 时间内告诉我们后缀数组的任意两个条目之间的 lcp？正如您所说，标准 LCP 数组仅告诉您**连续条目**的 lcp ，即任何 x 的 lcp(x-1,x)。但是上面描述的M和M'不一定是连续的条目，那是怎么做的呢？

关键是要意识到在二分查找过程中只会出现特定的范围 (L,...,R)：它总是从 (0,...,N) 开始并在中心除以它，然后继续向左或向右，然后再次划分那一半，依此类推。如果你想一想：后缀数组的每个条目在二分搜索期间恰好作为一个可能范围的中心点出现。因此，恰好有 N 个不同的范围 (L...M...R) 可能在二分搜索期间发挥作用，并且对于那些 N 个可能的情况预先计算 lcp(L,M) 和 lcp(M,R) 就足够了范围。所以这是 2*N 个不同的预计算值，因此 LCP-LR 的大小为 O(N)。

此外，有一个直接的递归算法可以在 O(N) 时间内从标准 LCP 数组计算 LCP-LR 的 2*N 值——如果您需要详细描述，我建议发布一个单独的问题。

**总结一下：**

*   可以在 O(N) 时间和 O(2*N)=O(N) 空间从 LCP 计算 LCP-LR
*   **在二分搜索期间使用 LCP-LR 有助于将搜索过程**从 O(M*log N) 加速到 O(M+log N)
*   正如您所建议的，您可以使用两次二进制搜索来确定 P 的匹配范围的左端和右端，并且匹配范围的长度与 P 的出现次数相对应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-03T22:06:34.970

最长公共前缀 (LCP) 是后缀树中的最低公共祖先 (LCA)。一旦你有了最低共同祖先，你就可以计算从 LCA 分支出来的节点的数量。这将为您提供后缀树中模式的出现次数。这就是 LCP 和 LCA 之间的关系。

# image-processing - 使用镜面反射的 3d 相机属性

> ID：11373456
> 
> 赞同：0
> 
> 时间：2012-07-07T08:18:33.567
> 
> 标签：image-processing, computer-vision

任何人都可以帮助澄清以下描述，该描述取自 Savarese、Chen 和 Perona 的文章“镜面反射的局部形状”。

“设 c 为相机的投影中心。图像平面位于 c 前面 l 个距离单位，垂直于视图方向 v。给定一个场景点 p，让 q 是 p 在图像平面上观察到的图像，通过镜面在 r 处的镜面反射。"

1.  据我了解，c、v 和 l 都是相机的属性，那么我怎样才能找到它们呢？
2.  当 p 沿着场景平面移动时，q 和 r 的偏移分别是 c、v 和 l 常数，还是应该为每个点分别校准新的投影中心、图像平面和视图方向？

[系统设置图：](http://www.tiikoni.com/tis/view/?id=2305a07)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T21:55:14.593

C 和 v 不是相机的内在属性，它们只是它的位置和方向。然而，l 是焦距，它是一个内在参数。内在和外在参数都可以通过校准程序恢复。如果您喜欢 matlab，请在 Google 上搜索 Jean-Yves Bouguet 的相机校准工具包。如果您更喜欢 C 或 C++，它也一直被移植到 OpenCV。

只有当相机相对于场景移动时，外部参数才会发生变化。如果镜头中的任何东西发生变化，例如通过重新聚焦或改变光圈（f-stop），内在的就会发生变化。两者都不会随着曝光时间而改变（它只影响到达传感器的光子数量）。

请注意，使用当今的镜头支架（螺丝、卡口）和传感器尺寸和分辨率（几十毫米和几百万像素） ，“移动”相机**非常**容易：只需触摸镜头通常就足以将其中心移动一个几个像素和它的轴由几分钟的弧。如果可重复性至关重要，您可能需要考虑获得特殊/定制的镜头支架和非常坚固的相机支架/支架。在任何情况下，您的软件都需要在小相机运动方面具有强大的功能

# php - 如何避免在线托管上的 php 转义字符串？

> ID：11373459
> 
> 赞同：2
> 
> 时间：2012-07-07T08:19:00.377
> 
> 标签：php, pdo

当我输入***don't***时，它会将***don\'t***保存到数据库中。我在 wamp 离线服务器上测试了代码，它保存***不***。但是当我在在线托管上测试代码时，它保存了***don\'t***。如何使在线托管不使用 excape 字符串？

代码：

```
<?php
if (isset($_POST['btn_edit'])) { 
    $description = $_POST['description'];
}

$sql = "UPDATE expense 
    SET description=?
    WHERE spender_id=?";
$q = $conn->prepare($sql);
$result = $q->execute(array($description, $_SESSION['user_id']));
?>

<input type="text" name="description" size="70" value="" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T08:22:30.213

听起来你的主人激活了魔法行情。请参阅有关如何禁用它们的手册：http: [//php.net/magic_quotes](http://php.net/magic_quotes)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T08:28:00.540

禁用[magic_qoutes](http://php.net/magic_quotes)或更改此语句

```
 $description = $_POST['description']; 
```

作为

```
 $description = stripslashes($_POST['description']); 
```

# java - 在 Java 中处理多个线程以向 C 服务器应用程序发送请求并获取响应

> ID：11373461
> 
> 赞同：-1
> 
> 时间：2012-07-07T08:19:04.927
> 
> 标签：java, multithreading, performance, synchronization

我有一个在 java 开发中存在多年的传统问题，但无法决定什么是最好的方法。所以需要你的建议来选择最好的。问题如下 -

客户端 - Java 程序（基本上是基于 Web 的应用程序）

服务器 - 用 C 编写

要求 - 用户将上传一个可能包含一百万条记录或例如 50000 条记录的文件。每条记录（行）都有一个序列号、产品名称和客户名称。我的 java 程序应该读取文件并通过网络向 C 应用程序发送请求。此 C 服务器应用程序将使用请求 ID 进行响应，并且在 java（客户端）中，我需要将此请求 ID 存储在同步的列表中，并应查询回 C 服务器应用程序以找出之前发送的请求 ID 的状态. 服务器响应请求 ID 的 WIP（正在进行的工作）或 DONE（已完成）。如果 C 服务器应用程序响应 = DONE，服务器将连同响应一起发送一些数据，如果它的 WIP，客户端应该以 5 秒的间隔重试 3 次。

代码设计 -

第 1 步 - 逐行读取文件

第 2 步 - 读取该行后，启动一个线程，该线程将向服务器发送请求并将响应存储到同步数组列表中。

第 3 步 - 另一个线程将读取同步列表并开始查询请求状态并存储来自 C 服务器应用程序的最终响应。

这可能会产生内存开销，因为您可以看到如果文件包含 100000 条记录，它可能会创建 100000 个线程。你们能建议我一个更好的方法来处理这个问题吗？

谢谢，西里什。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T08:26:17.837

简单的解决方案是：不要创建 100000 个线程，而是使用 ExecutorService（例如，使用其中一个可以使用的 from [`Executors`](http://docs.oracle.com/javase/7/docs/api/index.html?java/util/concurrent/Executors.html)）。

这样您就可以控制要执行的最大并行作业数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T08:27:33.203

几个问题/问题/建议 -
A. 文件中的记录是否相互依赖 - 如果不是，您可以做的可能是将文件拆分为文件，并让每个线程执行步骤 1。
B. 不要在读取每一行后启动线程 - 使用线程池和/或让工作线程侦听队列以查找“作业” - 将您读取的每一行推送到这样的队列中。这将为您节省线程开始时间。
C. 如果可能的话，我会考虑使用不同的数据结构 - 也许不仅仅是单个列表（再一次，如果行不相互依赖，这是可能的） - 请注意，当你锁定列表时，你是锁定整个列表。
如果您确实想使用单个列表，并且这些行不相互依赖 - 考虑让 N 个线程从列表中读取，并有一个 ReaderWriterLock - 这样，N 个读取线程可以工作（如果它们执行只是读取，并且不负责删除他们读取的条目），而作者线程填充列表。

# php - 在帖子列表中突出显示当前帖子项目 - PHP

> ID：11373462
> 
> 赞同：0
> 
> 时间：2012-07-07T08:19:21.397
> 
> 标签：php, mysql, css, html-lists

我有一个网站正在建设中，使用 PHP MYSQL，其中包含一个包含三列的新闻页面。

*   col1（中间列）显示新闻标题和新闻文本。

*   col2（左列）显示 10 个最新新闻条目的标题。

*   col3(right column) - 是显示月份和年份的档案栏。

就像我上面所说的，最近的新闻栏 (col2) 显示了 10 个最近的新闻条目的标题。当我单击特定标题时， col1 会显示与该标题对应的主要内容。我想要做的是突出显示 col2 中的活动标题。有没有办法使用 css & PHP 做到这一点？

数据库查询如下：

```
mysql_select_db($database_admin_conn, $admin_conn);
$query_getArchives = "SELECT DISTINCT DATE_FORMAT (news.updated, '%M %Y') AS archive, DATE_FORMAT (news.updated, '%Y-%m') AS link FROM news ORDER BY news.updated DESC";
$getArchives = mysql_query($query_getArchives, $admin_conn) or die(mysql_error());
$row_getArchives = mysql_fetch_assoc($getArchives);
$totalRows_getArchives = mysql_num_rows($getArchives);

mysql_select_db($database_admin_conn, $admin_conn);
$query_getRecent = "SELECT news.news_id, news.title FROM news ORDER BY news.updated DESC LIMIT 10";
$getRecent = mysql_query($query_getRecent, $admin_conn) or die(mysql_error());
$row_getRecent = mysql_fetch_assoc($getRecent);
$totalRows_getRecent = mysql_num_rows($getRecent);

$var1_getDisplay2 = "-1";
if (isset($_GET['archive'])) {
  $var1_getDisplay2 = $_GET['archive'];

$query_getDisplay = sprintf("SELECT news.news_id, news.title, news.news_entry, DATE_FORMAT (news.updated, '%%M %%e, %%Y') AS formatted FROM news WHERE DATE_FORMAT(news.updated, '%%Y-%%m') = %s ORDER BY news.updated DESC", GetSQLValueString($var1_getDisplay2, "text"));

} elseif (isset($_GET['news_id'])) {
  $var2_getDisplay3 = $_GET['news_id'];

$query_getDisplay = sprintf("SELECT news.news_id, news.title, news.news_entry, DATE_FORMAT(news.updated, '%%M %%e, %%Y') AS formatted FROM news WHERE news.news_id=%s ", GetSQLValueString($var2_getDisplay3, "int"));

} else {
mysql_select_db($database_admin_conn, $admin_conn);
$query_getDisplay = "SELECT news.news_id, news.title, news.news_entry, DATE_FORMAT (news.updated, '%M %e, %Y') AS formatted FROM news ORDER BY news.updated DESC LIMIT 3";
}
$getDisplay = mysql_query($query_getDisplay, $admin_conn) or die(mysql_error()); 
```

这是新闻页面的 html/css 的相关摘录：

```
<div class="col1">
<div class="news">

<?php  while($newsItem = mysql_fetch_array($getDisplay))
{ ?>
<?php $arrayNews[$getDisplay['news_id']] = $newsItem; ?>

<?php foreach($arrayNews AS $newsItem)
{  ?>   

<h1> <?php echo $newsItem['title'] ; ?> <h3><?php echo $newsItem['formatted'];?></h3></h1>

<?php $query_getPhotoDetails = "SELECT *
FROM photos INNER JOIN news2photo USING (photo_id)
WHERE news2photo.news_id = '" . $newsItem['news_id'] . "' LIMIT 3
";
$getPhotoDetails = mysql_query($query_getPhotoDetails, $admin_conn) or die(mysql_error());

while($photo = mysql_fetch_array($getPhotoDetails))
{ ?>
<div class="imagefield">
<p>&nbsp</p>
<p> <img src="../images/<?php echo $photo['filename']; ?>" width="200" />
</p>
</div> 
<?php }
?>
<?php $newsItem['news_entry'] = preg_replace("/((http)+(s)?:\/\/[^<>\s]+)/i", "<a href=\"\\0\" target=\"_blank\">\\0</a>", $newsItem['news_entry'] ); ?>
<div class="newsitem">
<p>&nbsp</p>
<p> <?php echo nl2br($newsItem['news_entry']);
?>  
</p>
</div>
<?php } ?>
<?php } ?>

</div><!--end news-->         
</div>

<div class="col2">
<h3>Recent News</h3>
<ul> 
  <?php do { 
 ?> <li class="seperator"><a href="news.php?news_id=<?php echo $row_getRecent['news_id'];
     ?>"><?php echo $row_getRecent['title']; ?></a></li> 
    <?php } while ($row_getRecent = mysql_fetch_assoc($getRecent)); ?>

</ul>

</div>
<div class="col3"><h3>News Archives</h3>
<ul>
  <?php do { ?>
    <li class="seperator"><a href="news.php?archive=<?php echo $row_getArchives['link']; ?>"><?php echo $row_getArchives['archive']; ?></a></li>
    <?php } while ($row_getArchives = mysql_fetch_assoc($getArchives)); ?>
</ul>

</div> 
```

一切正常，但我需要帮助突出显示“最近新闻”（col2）列中的当前列表项。我确实搜索了很多，但几乎所有的解决方案都是 wordpess 特定的。提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T10:39:19.737

我不太确定你想要如何突出显示。

我认为您正在尝试做的是当用户在该空间上时为 div中的`<li>`s添加一些效果？`col2`

您可以通过在`<head></head>`标签之间添加类似内容来轻松实现此目的：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">
  $(document).onLoad(function(){
    $('.col2 li').hover(function() { this.toggleClass('hovered'); });
  });
</script>
<style type="text/css">
  .hovered { background-color: black; color: white; }
</style> 
```

这样做是在页面加载后在`<li>`标签上打开或关闭 CSS 类。`col2`

**编辑：**要在 div 中标记当前选定的新闻项目，请`col2`在标题中为其创建一个类并根据提交的 news_id 应用它：

```
<head>
  <style type="text/css">
    .currentItem { background-color: darkorange; }
  </style>
</head>
...
<h3>Recent News</h3>
<ul>
  <?php do { ?>
  <li class="seperator
      <?php echo (isset($_GET['news_id']) && $_GET['news_id'] == $row_getRecent['news_id']
                  ? 'currentItem' : '') ?>">
    <a href="news.php?news_id=<?php echo $row_getRecent['news_id']?>">
      <?php echo $row_getRecent['title'] ?>
    </a>
  </li>
  <?php } while ($row_getRecent = mysql_fetch_assoc($getRecent)); ?>
</ul> 
```

**EDIT2**：要在 中标记当前选定的月份`col3`，您必须`<li>`像这样标记 s：

```
<li class="seperator
           <?php echo (isset($_GET['archive'] && $row_getArchives['link'] == $_GET['archive']
                       ? 'currentItem' : '') ?>">
  <a href="news.php?archive=<?php echo $row_getArchives['link'] ?>">
    <?php echo $row_getArchives['archive']; ?>
  </a>
</li> 
```

# vb.net - 必应搜索 API Azure 市场示例

> ID：11373469
> 
> 赞同：0
> 
> 时间：2012-07-07T08:20:33.100
> 
> 标签：vb.net, api, azure, bing

我正在寻找使用 Bing 的 API 在我的 vb.net 应用程序上实现网络搜索的简单示例代码。我找不到任何有趣的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T13:58:46.650

我使用了此页面上提供的几行代码：[API 代码](http://www.motoreitaliano.net/bing-api/) 我认为在您编写“有趣”时可以理解您的意思：最小且易于理解。
如果是这样，你会在那里找到你需要的东西。还有c#代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T21:43:20.963

'示例使用标准的 azure bing 搜索 api 而不是仅 Web

'需要将数据中心账号页面中的BingSearchContainer.cs文件编译成'类库。

'添加对它和 System.Data.Services.Client 的引用

'在这里获取它[https://datamarket.azure.com/dataset/explore/getproxy/](https://datamarket.azure.com/dataset/explore/getproxy/)

'带有 xaml 和结果列表框的完整示例[http://codepaste.net/jfks5h](http://codepaste.net/jfks5h)

```
 Dim strBingKey As String = "W1QPif2PUhkuSiyoMze324324234234"
        Dim bingClass As New Bing.BingSearchContainer(New Uri("https://api.datamarket.azure.com/Bing/Search/"))
        bingClass.Credentials = New NetworkCredential(strBingKey, strBingKey)

        Dim query = bingClass.Video("site:somesite.com test", Nothing, Nothing, "Off", Nothing, Nothing, Nothing, Nothing)
        Dim results = query.Execute()
        For Each result In results
            Console.WriteLine(result.Title)
            Console.WriteLine(result.MediaUrl)
            Console.WriteLine(result.RunTime)
            Console.WriteLine(result.Thumbnail) 'ThumbNail type, need to convert to use in result list

        Next 
```

# android - 将值分配给不同类的 TextView

> ID：11373475
> 
> 赞同：2
> 
> 时间：2012-07-07T08:21:27.533
> 
> 标签：android, class, android-layout, android-context, settext

TestaActivity.java

```
public class TestaActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        tvText=(TextView)findViewById(R.id.textView1);
        tvText.setText("Sample");
    }
} 
```

打印.java

```
public class Print {
    public Print(Context tempContext) {
        //I want to assign the value to the tvText from here
    }
} 
```

在上面的示例中，如您所见，我已将 tvText 中的文本设置为“Sample”。同样，一旦创建，我需要在 Print 类中为 textView1 ID 分配一些值。

请帮我找出方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T08:25:54.827

如果您的类 Print 在 TestaActivity 出现在屏幕上时被实例化，那么您可以获得 tvText 引用，以某种方式将 TestaActivity 引用传递给 Print。也许你可以通过构造函数传递它：

从 TestaActivity 你做：

```
Print print = new Print(this); 
```

其中 this 代表 TestaActivity 的实例。然后在您的打印代码中，您可以执行以下操作：

```
TextView tvText = (TextView)((TestaActivity)context.findViewById(R.id.textView1));
tvText.setText("Sample"); 
```

另一个解决方案是提供一个来自 TestaActivity 的接口，对外部透明，它管理你在 textview （或其他）上的更改。像这样的东西：

```
 private TextView tvText;

 public void setTvText(String str){
      tvText.setText( str );
 } 
```

然后在您的 Print 课程中：

```
 ((TestaActivity)context).setTvText( "Sample" ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T08:25:52.627

尝试：

```
public class Print {
 protected TestaActivity  context;
    public Print(Context tempContext) {

        context = tempContext;
    }
     public void changetextViewtext(final String msg){
            context.runOnUiThread(new Runnable() {

                @Override
                public void run() {
                //assign the value to the tvText from here
                    context.tvText.setText("Hello Test");    
                }
            });
        }
} 
```

并从 Activity 调用以从Class`changetextViewtext`更改 TextView 文本`Print`

```
public class TestaActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        tvText=(TextView)findViewById(R.id.textView1);
        tvText.setText("Sample");
        Print  myPrint  = new Print(this);
            myPrint.changetextViewtext("Hello World !!!");
    }
} 
```

根据您的需要!!!!:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T08:32:06.517

@imran - 解决方案是正确的，除了您希望将 TextView 作为构造函数或方法中的参数传递。

在方法中对 TextView 进行编码是不好的，因为您不能重用它。

# objective-c - 在 UITableViewCell 内调整大小时将 UILabel 锚定到右侧？

> ID：11373476
> 
> 赞同：1
> 
> 时间：2012-07-07T08:21:40.697
> 
> 标签：objective-c, xamarin.ios

我的 UITableViewCell 中有一个标签。我已经在 Interface Builder 中设置了它的最大宽度。在标签上设置文本后，我将使用“SizeToFit”调整其大小。

我遇到的问题是，当我调整标签的大小时，它的大小固定在原始位置的左侧。

我想将其调整到其原始位置的右侧，使其锚定在右侧。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T08:29:13.530

将其`autoresizingMask`属性设置为`UIViewAutoresizingFlexibleLeftMargin`。

# facebook - 社交媒体按钮验证问题

> ID：11373481
> 
> 赞同：-2
> 
> 时间：2012-07-07T08:23:24.657
> 
> 标签：facebook, validation, linkedin, google-plus, social-media

当您从 Google+、Facebook、LinkedIn 等向您的网站添加社交媒体按钮时，它们通常包含许多自制属性和其他无法验证的内容。

由于社交按钮，我[在验证器中的此页面](http://validator.w3.org/check?uri=http://www.eosweb.dk/om/&charset=%28detect%20automatically%29&doctype=Inline&group=0&user-agent=W3C_Validator/1.3)上有 14 个错误。

是否有任何技巧可以使页面验证？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T08:46:25.940

由于按钮仅适用于使用 Javascript 的用户，因此您可以做的最简单的事情是通过 javascript 插入它们。然后您的页面将再次验证。

当心“社交间谍按钮”的隐私问题。不自动加载它们是一个很好的做法，而只是显示一个占位符图像，并在用户单击它时加载实际按钮。这些就是所谓的“2 点击喜欢”。第一次单击以启用将您的数据传输到 Facebook，第二次单击以喜欢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T23:57:44.873

不正确的 HTML 版本会导致大多数错误 - 社交按钮使用 data- 属性，这是 HTML5 的一部分，但页面已被验证为 HTML4。

对文档类型进行排序应该可以修复一堆错误。

# c# - 通过 JSON 解析计算对用户的总转推

> ID：11373482
> 
> 赞同：0
> 
> 时间：2012-07-07T08:23:50.167
> 
> 标签：c#, json, c#-4.0, json.net

我正在计算 C# 中的转发总数，我的想法是计算`retweeted_status`JSON 响应中的字段。我正在使用 JSON.NET。有没有更短的方法来计算它？其他方法是创建类并填充响应并迭代对象。但我正在寻找一种更短的方法，因为它只是一个简单的计数。任何可以帮助我的人， [这是 JSON 响应](http://jsonviewer.stack.hu/#http://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=uxmangjx&count=200)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T08:41:58.750

是的，您可以`json`通过`dynamic`使用`Json.Net`.

```
dynamic values = JsonConvert.DeserializeObject<dynamic>(json); 
```

并迭代值只需将其转换为`Dictionary<string, object>`

```
IDictionary<string, object> list = (IDictionary<string, object>)values; 
```

# php - 如何将 javascript 变量更改为 PHP

> ID：11373483
> 
> 赞同：0
> 
> 时间：2012-07-07T08:23:53.703
> 
> 标签：php, javascript, ajax, twitter

我有一个 Javascript 变量`screenName`供 Twitter 用户使用。当他们连接到我的网站时，我想要一个 php 脚本将他们的名字写在一个 txt 文件中。我怎么能这样。我研究过用 AJAX 编写文件，但没有运气。

```
<script type="text/javascript">

twttr.anywhere(function (T) {
    var currentUser,
        screenName,
        profileImage,
        profileImageTag;
    if (T.isConnected()) {
        currentUser = T.currentUser;
        screenName = currentUser.data('screen_name');
        $('#twitter-connect-placeholder').append("<p style='color:white;text-shadow:none;'>Howdy " +" " + screenName + "!");
        var screenName = "<?= $js ?>";
    } 
});
</script>

<?php
$check = $_GET['track'];

if ($check == '1') {
    $fp = fopen('data.txt', 'a');
    fwrite($fp, "{$js}");
    fclose($fp);
}
?> 
```

如果查看源`screenName`等于“”

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T08:41:01.990

为了解决这个问题，您需要了解 PHP 是在服务器端执行的，*在*页面发送给用户之前，而 Javascript 是在客户端执行的，在用户的浏览器中，即之后PHP 代码。显然，您需要事件以相反的顺序发生。示例实现如下：

使用 jQuery，您可以执行以下操作：

```
if (T.isConnected()) {
    var currentUser = T.currentUser;
    var screenName = currentUser.data('screen_name');
    $.post(
        '/writename.php',      // request url
        {'name' : screenName}, // POST data
        function() {           // optional callback
            alert("done!");
        }
    );
} 
```

而且，在你的`writename.php`：

```
if ($_POST['name']) {
    $fp = fopen('data.txt', 'a');
    fwrite($fp, $_POST['name']);
    fclose($fp);
} 
```

# android-webview - Android：Logcat 不适用于 JS console.log()

> ID：11373491
> 
> 赞同：8
> 
> 时间：2012-07-07T08:26:15.030
> 
> 标签：android-webview, android-logcat

我的应用是 Android 原生、html5 的组合。直到上周，我才能看到来自本机代码和在 WebView 内运行的 javascript 代码的日志消息。但是突然 Logcat 没有显示来自 javascript 的控制台消息，尽管它显示了来自我的本机代码的日志消息。有任何想法吗？

提前致谢。文卡特

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-07-25T11:34:30.683

您可以尝试通过创建自定义 WebChromeClient 将控制台消息处理程序添加到您的 WebView：

```
class MyWebChromeClient extends WebChromeClient
{
    @Override
    public boolean onConsoleMessage(ConsoleMessage cm)
    {
        Log.d("CONTENT", String.format("%s @ %d: %s", 
                    cm.message(), cm.lineNumber(), cm.sourceId()));
        return true;
    }
} 
```

然后附上它：

```
someWebView.setWebChromeClient(new MyWebChromeClient()); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-09-21T01:42:01.940

仅适用于 android native & html5 (not phonegap/cordova) 这涵盖了如何在 logcat 中显示控制台消息。 [http://developer.android.com/guide/webapps/debugging.html#WebView](http://developer.android.com/guide/webapps/debugging.html#WebView)

另一种方法是使用 jsconsole.com。[http://jsconsole.com/remote-debugging.html](http://jsconsole.com/remote-debugging.html)介绍了远程调试

编辑：有些人发现 jsconsole.com 不起作用。远程调试的另一种选择是[https://bugfender.com/remote-logging](https://bugfender.com/remote-logging/) **免责声明**：非附属链接，除了用户之外，我与 bugfender 没有任何关系。有一个免费计划，也有各种具有更高使用水平的付费计划。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-25T03:21:39.480

我正在运行 PhoneGap 2.9.1。

在做了一些搜索之后，我期待 Console.log 显示在 Eclipse LogCat 中的标签“ **WebView** ”下，所以我不确定它是否正常工作。

经过一番玩耍后，我发现 console.log() 确实显示在 LogCat 中的标签“ **CordovaLog** ”下。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-31T17:03:40.657

这个命令太好用了

> adb shell "logcat | grep 'Web 控制台'"

[我在这里](https://stackoverflow.com/questions/30247308/debugging-a-webview-ionic-app-on-android-via-logcat)找到了答案

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-02T16:31:39.010

如果您想在浏览器中测试您的 cordova 应用程序，就像您测试任何其他 Web 应用程序一样。

您可以使用：`cordova serve`. 这将在本地运行混合应用程序。您可以打开 url [http://localhost:8000](http://localhost:8000)，并可以检查控制台日志的元素。您可以更改 DOM 元素、CSS。

# c++ - c++ 用双换行符分割字符串

> ID：11373492
> 
> 赞同：7
> 
> 时间：2012-07-07T08:26:15.737
> 
> 标签：c++, string, split

我一直在尝试用双换行符 ( `"\n\n"`) 拆分字符串。

```
input_string = "firstline\nsecondline\n\nthirdline\nfourthline";

size_t current;
size_t next = std::string::npos;
do {
  current = next + 1;
  next = input_string.find_first_of("\n\n", current);
  cout << "[" << input_string.substr(current, next - current) << "]" << endl;
} while (next != std::string::npos); 
```

给我输出

```
[firstline]
[secondline]
[]
[thirdline]
[fourthline] 
```

这显然不是我想要的。我需要得到类似的东西

```
[first line
second line]
[third line
fourthline] 
```

我也尝试过`boost::split`，但它给了我相同的结果。我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T08:29:19.800

`find_first_of`只查找单个字符。您通过传递它来告诉它要做的`"\n\n"`是找到`'\n'`or`'\n'`中的第一个，这是多余的。改为使用[`string::find`](http://en.cppreference.com/w/cpp/string/basic_string/find)。

`boost::split`也可以一次只检查一个字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T12:05:14.143

这种方法怎么样：

```
 string input_string = "firstline\nsecondline\n\nthirdline\nfourthline";

  size_t current = 0;
  size_t next = std::string::npos;
  do
  {
    next = input_string.find("\n\n", current);
    cout << "[" << input_string.substr(current, next - current) << "]" << endl;
    current = next + 2;
  } while (next != std::string::npos); 
```

它给了我：

```
[firstline
secondline]
[thirdline
fourthline] 
```

结果，这基本上就是你想要的，对吧？

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-07T08:32:18.783

@Benjamin 在他的回答中很好地解释了您的代码不起作用的原因。因此，我将向您展示另一种解决方案。

无需手动拆分。对于您的具体情况，`std::stringstream`是合适的：

```
#include <iostream>
#include <sstream>

int main() {
        std::string input = "firstline\nsecondline\n\nthirdline\nfourthline";
        std::stringstream ss(input);
        std::string line;
        while(std::getline(ss, line))
        {
           if( line != "")
                 std::cout << line << std::endl;
        }
        return 0;
} 
```

输出（[演示](http://ideone.com/cJv93)）：

```
firstline
secondline
thirdline
fourthline 
```

# c# - 下拉列表意外行为

> ID：11373498
> 
> 赞同：0
> 
> 时间：2012-07-07T08:27:22.517
> 
> 标签：c#, asp.net, drop-down-menu, webforms

我在使用 ASP.NET Web 表单 DropDownList 时出现了这种意外行为。我将 ListItems 添加到下拉列表中，一切看起来都很好。除了 ddl 中的值（在我的例子中是 Id）从未设置外，它被 ListItem 中的文本替换。

```
<asp:DropDownList ID="ddl1" runat="server">
        </asp:DropDownList>

    private void Populate()
    {
        List<ListItem> list = new List<ListItem>();
        foreach (var item in GetItems())
        {
            list.Add(new ListItem(item.name, item.id.ToString()));
            //in the drop down list the ListItem.Value is being replaced
            //by ListItem.Text when it is added to the ddl
        }

        ddl1.DataSource = list;
        ddl1.DataBind();

        ddl1.Items.Add(new ListItem("Make a selection"));
    }

    private List<Stuff> GetItems()
    {
        List<Stuff> list = new List<Stuff>();
        list.Add(new Stuff{ name = "bill", id = 1});
        list.Add(new Stuff{ name = "james", id = 2});
        return list;
    }

    private struct Stuff
    {
        public string name;
        public int id;
    } 
```

如果这是要发生的事情，有什么想法吗？如果是我如何在 ddl 中存储名称和 ID？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T08:30:57.697

尝试设置[DataTextField](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.datatextfield.aspx)和[DataValueField](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.datavaluefield.aspx)属性：

```
ddl1.DataTextField = "Text";
ddl1.DataValueField = "Value"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-07T08:31:34.783

在您的填充方法中，您是数据绑定，但没有指定哪个属性应该绑定到列表项列表中的哪个值。

为此，您需要设置[DataTextField](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.datatextfield.aspx)和[DataValueField](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.datavaluefield)属性。

您可能会发现将填充代码更改为以下内容更简单：

```
private void Populate() 
{ 

    foreach (var item in GetItems()) 
    { 
        ddl1.Items.Add(new ListItem(item.name, item.id.ToString())); 
    } 

    ddl1.Items.Insert(0, new ListItem("Make a selection")); 
} 
```

甚至：

```
private void Populate() 
{ 
    GetItems().ForEach(x => dd1.Items.Add(new ListItem(x.name, x.id.ToString())));
    ddl1.Items.Insert(0, new ListItem("Make a selection")); 
} 
```

即直接将您的项目添加到DropDownList。

在您的原始示例中，要使用数据绑定，无需创建 ListItem 列表。您可以直接对内容进行数据绑定；在这种情况下，您的代码变为：

```
private void Populate() 
{ 
    dd1.DataTextField = "name";
    dd1.DataValueField = "id"
    dd1.DataSource = GetItems();
    ddl1.Items.Insert(0, new ListItem("Make a selection")); 
} 
```

即，只要您告诉 DropDownList 从哪里获取它的值，您就可以直接将数据绑定到一个东西列表。许多人更喜欢这个模型，因为 SelectedItem 是一个 Stuff，而不是一个字符串，所以你有一个直接代表项目的对象。缺点是你的 ViewState 变大了 ;-)

# python - Python之禅vs with语句——哲学思考

> ID：11373502
> 
> 赞同：10
> 
> 时间：2012-07-07T08:27:42.693
> 
> 标签：python, coding-style, indentation, with-statement, zen-of-python

我不打算简单地浪费您的时间，但是：**您是否也想过，在使用 Python 的`with`声明时，它确实与“Python 之禅”的第 5 行“平面优于嵌套”相反？任何开明的 Python 大师都可以与我分享他们对此的一些见解吗？**

（我总是发现，每次我使用`with`而不是`f.close()`...时，我的代码中都会弹出一个多层次的缩进，这并不是说我`try: ... finally: ...`无论如何都不会使用，因此`with`即使我越来越喜欢，我仍然无法获得它的好处并且越来越了解 Python...)

* * *

@glglgl（对不起，我找不到在评论中写代码的方法）：是的，但是如果你顺其自然`with`，你的代码就会变成：

```
try:
    with file(...) as f:
        ...
except IOError:
    ... 
```

...并且只使用 with 而没有 the`try`是人们最终在他们使用而不是 with 的那种骇人听闻的“一次性”代码中所做的事情`f.close()`（这很糟糕，因为如果在他们之前抛出异常，文件可能不会关闭`f.close()`），所以对于“hacky”代码，人们只是不使用`with`，因为，我不知道，我猜他们只是觉得它太“花哨”，而且对于结构良好的代码，它无论如何都不会带来任何好处，所以它似乎我没有留下任何真实世界的用例……那是我真正思考的问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-07T16:39:18.963

是的，[Python 之禅](http://www.python.org/dev/peps/pep-0020/)说“扁平胜于嵌套”，但这并不是我们关心的唯一特性；它还指出“简单胜于复杂”。它的美妙之`with`处在于它实际上遵守了**这两个**原则，我将在下面解释。

每当您发现自己对 Python 中的某个功能进行哲学思考时，可能都值得查找[Python 增强提案 (PEP)](http://www.python.org/dev/peps/)以了解该功能背后的动机。在这种情况下[，PEP 343——“with”语句](http://www.python.org/dev/peps/pep-0343/)在摘要中预先说明：

> 此 PEP 向 Python 语言添加了一个新语句“with”，以便可以排除 try/finally 语句的标准用法。

分解`try/finally`语句使代码更简单，更具可读性。

[然而， PEP 343](http://www.python.org/dev/peps/pep-0343/)比提供一些简单的语法糖更深入。它建立了一个上下文管理器协议：

> 语句中紧跟 with 关键字的表达式是“上下文表达式”，因为该表达式提供了上下文管理器在语句主体期间建立的运行时环境的主要线索。

使用上下文管理器协议，API 编写者可以帮助隐藏复杂性并确保在多线程上下文中正确获取/释放资源。

[但是PEP 343](http://www.python.org/dev/peps/pep-0343/)`with`的示例 12 显示了该语句的真正优点，它解释了：

> 一个“嵌套”上下文管理器，它自动从左到右嵌套提供的上下文以避免过度缩进。

使用`nested()`上下文管理器，您可以获取如下所示的代码：

```
with a as x:
    with b as y:
        with c as z:
            # Perform operation 
```

并将其变成这样：

```
with nested(a, b, c) as (x, y, z):
             # Perform operation 
```

请注意，它`nested()`是在 Python 2.5 中引入的，但从 2.7 版开始，它已被弃用，而支持这种多上下文管理器语法形式：

```
with a as x, b as y, c as z:
             # Perform operation 
```

显然，这不仅更简单、更易读，而且比嵌套更扁平。因此，使用`with`是遵循无为的[路径](http://en.wikipedia.org/wiki/Wu_wei)：）

**更新：**为了回应[对 Simeon Visser 的回答的评论，](https://stackoverflow.com/a/11373733/462302)这里是一个示例，当您想将两个（或多个）文件的内容压缩在一起时，您可能会使用多个上下文管理器一次打开多个文件，这样如果打开其中一个文件失败，它将使整个事情失败并正确关闭每个打开的文件：

```
from itertools import izip
with open("/etc/passwd") as a, open("/etc/group") as b, open("/etc/shadow") as c:
    for lines in izip(a,b,c):
        print map(lambda x: x.split(':')[0], lines) 
```

运行此示例两次；一次以root身份，一次以普通用户身份。假设您将此文件保存为`ziptogether.py`第一次尝试以 root 身份调用它`sudo python ziptogether.py`并且它会成功，但是作为普通用户调用它`python ziptogether.py`会失败，因为您没有读取权限`/etc/shadow`。当它失败时，上下文管理器将确保在执行移出`with`语句范围时正确关闭失败之前成功打开的文件。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-07T08:34:11.700

您已经提到过：这样做更清洁

```
f = file(...)
try:
    # do work on file
finally:
    f.close() 
```

不仅仅是在文件操作后关闭 - 如果发生异常，则不会到达。

如果你比较`try/finally`to `with`，你有相同级别的缩进，所以你不会丢失任何东西。然而，如果你进行异常处理，你就会多一层缩进，这确实违背了禅宗的观点。

OTOH，`with`封装事物并使它们更容易和更易读，这是其他禅宗方面。

在我看来，要始终准确地遵循禅的每一个方面似乎是不可能的。有时你必须权衡一个对另一个。在这种情况下，您“失去”了一层缩进，但您获得了更好的可读性和可维护性。后者对我来说似乎是一个优势。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-07T09:12:41.480

请注意，Python 之禅也说：

> 简单胜于复杂。
> 
> 复杂胜于复杂。

和

> 可读性很重要。

`with`在语句中使用上下文管理器提供了多种功能：

*   正确的行为，因为文件总是关闭
*   可读性（`with open(..) as f`很好理解）

你不能指着 Python 之禅中的一个项目，并争论所有 Python 代码必须始终满足所有项目。例如，如果以可读和正确的方式解决特定问题的最小缩进级别是四，那么就这样吧：如果缩进级别为三使代码的可读性降低，那么就不要管代码了（四是好的）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-07T10:50:36.737

```
"Flat is better than nested" 
```

那么，什么是**平面**？

```
import thirdparty
print "I Like Pie!" 
```

对比

```
import org.example.thirdparty.something
System.out.println("I Like Cake") 
```

ETC...

Python 之禅并不仅仅对您的代码强制执行缩进限制。它鼓励您编写可读（因此更好）的代码。如果您的`with`语句位于只能由 3 层对象（等`one.two.three.func()`）访问的函数中，那么这是一个问题。

否则，三个缩进级别与任何缩进级别一样好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-07T12:36:27.593

更喜欢 的原因`with`是您不需要*手动*配对相关操作（例如`open(...)`/ `.close()`；但该`with`结构更通用——不仅用于处理文件）。这很重要，即在第二个操作可能由于源代码中不清晰可见的原因而无法执行的情况下。您是在告诉机器*为我处理它*，并且机器在这种情况下比人类更好。这样，您就可以摆脱可能难以找到的令人讨厌的错误组。

顺便说一句，您应该使用`open(...)`而不是`file(...)`. Python 3 对此一无所知，`file(...)`否则您将不得不稍后修复您的代码。

# c - 在C中获取文件的最后修改日期

> ID：11373505
> 
> 赞同：8
> 
> 时间：2012-07-07T08:29:02.220
> 
> 标签：c, date, file-io, compiler-errors

我想在 C 中获取文件的最后修改日期。我发现的几乎所有来源都使用这个片段中的一些东西：

```
char *get_last_modified(char *file) {
    struct tm *clock;
    struct stat attr;

    stat(file, &attr);
    clock = gmtime(&(attr.st_mtime));

    return asctime(clock);
} 
```

但是`attr`甚至没有字段`st_mtime`，只有`st_mtimespec`。然而，当使用这个时，我的 Eclipse 告诉我`passing argument 1 of 'gmtime' from incompatible pointer type`就行了`clock = gmtime(&(attr.st_mtimespec));`

我究竟做错了什么？

PS：我正在开发 OSX Snow Leopard、Eclipse CDT 并使用 GCC 作为跨平台编译器

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T08:42:54.220

在 OS X 上，`st_mtimespec.tv_sec`相当于`st_mtime`.

为了使这个便携，做

```
#ifdef __APPLE__
#ifndef st_mtime
#define st_mtime st_mtimespec.tv_sec
#endif
#endif 
```

然后使用`st_mtime`.

# facebook - 从 Facebook 创建社交图数据集

> ID：11373506
> 
> 赞同：-1
> 
> 时间：2012-07-07T08:29:07.327
> 
> 标签：facebook, api, facebook-graph-api, web-crawler

我在我的大学做一个项目，我想从 Facebook 建立一个社交图。

我只想要用户之间的联系（友谊），所以我可以建立一个图表。我阅读了 Facebook API 文档，据我了解，它不允许获取我朋友的朋友，这意味着我陷入了困境。

有人对如何克服这个问题有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T11:25:34.347

如果不使用最有可能违反 TOS 的爬虫，这是不可能的。

您可以使用第一深度仅基于您的朋友网络中的共同朋友制作第一度连接图。

```
/userid1/friends/userid2 
```

将您的项目集中在 Twitter 的数据上会更容易。

# xml - “字符串无法解析为 XML”php 错误

> ID：11373507
> 
> 赞同：1
> 
> 时间：2012-07-07T08:29:12.910
> 
> 标签：xml, simplexml, php, fatal-error

当我尝试创建`SimpleXMLElement`.

我使用在线工具手动检查了我的 xml 语法，甚至从[php.net](http://php.net)复制/粘贴了示例 XML 文件，但我仍然收到错误消息。

我的代码：

```
include 'example.php';
$namevalues= new SimpleXMLElement($xmlstr); 
```

例子.php：

```
<?php
$xmlstr = <<<XML
<?xml version='1.0' standalone='yes'?>
<movies>
 <movie>
  <title>PHP: Behind the Parser</title>
  <characters>
   <character>
    <name>Ms. Coder</name>
    <actor>Onlivia Actora</actor>
   </character>
   <character>
    <name>Mr. Coder</name>
    <actor>El Act&#211;r</actor>
   </character>
  </characters>
  <plot>
   So, this language. It's like, a programming language. Or is it a
   scripting language? All is revealed in this thrilling horror spoof
   of a documentary.
  </plot>
  <great-lines>
   <line>PHP solves all my web problems</line>
  </great-lines>
  <rating type="thumbs">7</rating>
  <rating type="stars">5</rating>
 </movie>
</movies>
XML;
?> 
```

错误：

> 致命错误：第 266 行 C:\AbyssRoot\htdocs\Forum\Sources\showhomework.php 中的未捕获异常 'Exception' 和消息 'String could not be parsed as XML'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T09:16:21.830

我通过确保找不到 example.php 来复制此消息。我想这也是你的问题。

检查 example.php 是否位于提供包含服务的目录中，否则将其放在同一目录中。

如果确实是这种情况，您需要提高错误报告级别，我在异常之前看到了一个通知和 2 个警告 - 这些确切说明了导致此问题的原因，并将为您节省大量时间、精力和头发。

[设置错误报告](http://php.net/manual/en/function.error-reporting.php)

# jquery - JQuery 模态对话框的行为与示例不同

> ID：11373508
> 
> 赞同：0
> 
> 时间：2012-07-07T08:29:13.193
> 
> 标签：jquery, jquery-ui, node.js, jquery-ui-dialog, express

首先，我对 JQuery 和 Web 技术总体上是新手。到目前为止，我一直在玩 node.js/expressjs/jade.js 和 JQuery 几周。

出于某种原因，我无法获得模态对话框的工作。以下代码显示按钮和按钮单击显示“对话框”。此对话框只是按钮下方的 div 元素，而不是按钮上方。最重要的是，您不能移动按钮，并且样式与 JQuery 示例中所示的样式不同。

[http://jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)

有人可以善良并指出问题或复制粘贴工作示例。谢谢。

```
<html>
  <head>
    <title>Places Server</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.8.21/themes/base/jquery-ui.css" type="text/css" media="all"/>
    <link rel="stylesheet" href="http://static.jquery.com/ui/css/demo-docs-theme/ui.theme.css" type="text/css" media="all"/>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script>
      jQuery(document).ready( function(){
            jQuery("#myButton").click( showDialog );
                //variable to reference window
                $myWindow = jQuery('#myDiv');

                //instantiate the dialog
                $myWindow.dialog({ height: 350,
                        width: 400,
                        modal: true,
                        position: 'center',
                        autoOpen:false,
                        title:'Hello World'
                        //overlay: { opacity: 0.5, background: 'black'}
                        });
                }

      );
      //function to show dialog   
      var showDialog = function() {
        //if the contents have been hidden with css, you need this
        $myWindow.show(); 
        //open the dialog
        $myWindow.dialog("open");
        }

      //function to close dialog, probably called by a button in the dialog
      var closeDialog = function() {
        $myWindow.dialog("close");
      }
    </script>
  </head>
  <body>     
    <input id="myButton" name="myButton" value="Click Me" type="button"/>
    <div id="myDiv" style="display:none" class="ui-dialog ui-widget ui-widget-content ui-corner-all undefined ui-draggable ui-resizable">
      <div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix"><span id="ui-dialog-title-dialog" class="ui-dialog-title">Dialog title</span></div>
      <div id="dialog" class="ui-dialog-content ui-widget-content">
        <p>I am a modal dialog</p>
      </div>
    </div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T08:36:26.327

**工作演示** [http://jsfiddle.net/LPeeC/](http://jsfiddle.net/LPeeC/)

问题是你的点击事件，剩下的你可以玩这个演示，

这应该有帮助，`:)`

**代码**

```
$(document).ready( function(){
    jQuery("#myButton").click(function(e){
             showDialog()

             e.preventDefault();
            });
                //variable to reference window
                $myWindow = jQuery('#myDiv');

                //instantiate the dialog
                $myWindow.dialog({ height: 350,
                        width: 400,
                        modal: true,
                        position: 'center',
                        autoOpen:false,
                        title:'Hello World'
                        //overlay: { opacity: 0.5, background: 'black'}
                        });
                }

      );
      //function to show dialog   
      var showDialog = function() {
        //if the contents have been hidden with css, you need this
        $myWindow.show(); 
        //open the dialog
        $myWindow.dialog("open");

        }

      //function to close dialog, probably called by a button in the dialog
      var closeDialog = function() {
        $myWindow.dialog("close");
      }
​ 
```

# c - execv 如何从管道获取输出？

> ID：11373511
> 
> 赞同：1
> 
> 时间：2012-07-07T08:29:59.913
> 
> 标签：c, operating-system, execv

参考旧的作业问题：`/* implementing "/usr/bin/ps -ef | /usr/bin/more" */` 使用管道。

```
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>

int main()
{
  int fds[2];
  int child[2];
  char *argv[3];
  pipe(fds);
  if (fork()== 0) {
    close(fds[1]);
    close(STDIN_FILENO); dup(fds[0]); /* redirect standard input to fds[1] */
    argv[0] = "/bin/more";
    argv[1] = NULL;           /* check how the argv array is set */
    execv(argv[0], argv);// here how execv reads from stdin ??
    exit(0);

  }
  if (fork() == 0) {
    close(fds[0]);
    close(STDOUT_FILENO); dup(fds[1]);  /* redirect standard output to fds[0] */
    argv[0] = "/bin/ps";
    argv[1] = "-e"; argv[2] = NULL;
    execv(argv[0], argv);
    exit(0);

  }

  close(fds[1]);
  wait(&child[0]);
  wait(&child[0]);  
} 
```

将 fd 重定向到标准输出后，execv 如何从中读取。在执行命令之前它是否内置在 execv 中，它会从标准输入中读取？我无法理解这个概念。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T08:42:27.950

你的问题是基于一个错误的前提——`execv`不从任何地方阅读，也不需要。它是`more`从它读取的，`stdin`它在对 的调用中继承`execv`。`more`读取 from的原因`stdin`是因为它是一个过滤器，并且与大多数过滤器一样，`stdin`如果未在命令行上指定另一个输入源，它默认为读取 from。（否则，`/usr/bin/ps -ef | /usr/bin/more`将不起作用。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T08:48:41.413

在您的第二次`fork`通话中，我将从以下代码更改代码：

```
 if (fork() == 0) {
    close(fds[0]); 
```

对此：

```
 close(fds[0]);
  if (fork() == 0) { 
```

调用的应该`argv[1]`是.`ps``-ef`

如果所有程序不做任何更改这些流的默认设置，所有程序都将从读取`stdin`以获取终端输入并写入以将数据传递到终端。代码所做的`stdout`是修改`stdin`和`more`修改`stdout`. for与`ps`当前进程（父进程）相同。因此，您的程序将终端输出数据重定向为.`stdout``more``ps``more`

该`pipe`调用返回两个单向相互连接的文件描述符。当`ps`写入它`stdout`时，它会写入`dup`d `fds[1]`。`more`从其读取时，`stdin`它是`dup`d `fds[0]`。因此，`more`获取 的输出`ps`。

# extjs - 在 checkboxselectionmodel 中设置 Checkbox 值

> ID：11373512
> 
> 赞同：0
> 
> 时间：2012-07-07T08:30:04.177
> 
> 标签：extjs, extjs4, extjs-mvc, extjs4.1

我想要一个在所有行中都有复选框的网格，就像这个链接[http://gwt-ext.com/demo/#checkboxSelectionGrid](http://gwt-ext.com/demo/#checkboxSelectionGrid)中的那个一样保存选定的记录后，我想设置之前选择的复选框。

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T12:29:06.927

`grid.getSelectionModel().select()`应该工作[http://docs.sencha.com/ext-js/4-0/#!/api/Ext.selection.CheckboxModel-method-select](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.selection.CheckboxModel-method-select)

只需传递要选择的记录数组或其索引即可。似乎有什么问题？

# jakarta-ee - 如何克服这个 NullPointerException？

> ID：11373515
> 
> 赞同：0
> 
> 时间：2012-07-07T08:30:58.600
> 
> 标签：jakarta-ee, jdbc, nullpointerexception, prepared-statement

```
 import java.sql.*;
    import java.io.*; 
    import java.util.*;

    public class A {

        public static void main(String args[]){

        try {

            Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
            Connection con= DriverManager.getConnection("jdbc:odbc:debjeet", "system", "tiger");
        PreparedStatement st=con.prepareStatement("insert into emp values('?','?','?','?','?','?','?','?','?','?','?','?','?','?','?','?','?')"); //there are 17 fields in the database
        BufferedReader dis= new BufferedReader(new InputStreamReader(System.in));
        System.out.println("Enter the desired username");
        String us=dis.readLine();
        st.setString(1,(String)us); //this was an attempt made by me to remove the exception ,otherwise all were below as from index 4.also the exception occurs here.
        System.out.println("Enter the desired password");
        String pw=dis.readLine();
        st.setString(2,pw);
        System.out.println("Enter your First Name");
        String fn=dis.readLine();
        st.setString(3, fn);

        System.out.println("Enter your Middle Name");
        String mn=dis.readLine();
        System.out.println("Enter your Last Name");
        String ln=dis.readLine();
        System.out.println("Enter your Email");
        String em=dis.readLine();
        System.out.println("Enter your Date of Birth");
        int dob= Integer.parseInt(dis.readLine());
        System.out.println("Enter your Month of Birth");
        String mob=dis.readLine();
        System.out.println("Enter your Year of Birth");
        int yob=Integer.parseInt(dis.readLine());
        System.out.println("Enter your Gender(M/F)");
        String gen=dis.readLine();
            System.out.println("Enter your Institute");
        String inst=dis.readLine();
        System.out.println("Enter your Address");
        String add=dis.readLine();
        System.out.println("Enter your City");
        String ct=dis.readLine();
        System.out.println("Enter your State");
        String state=dis.readLine();
        System.out.println("Enter your Pincode");
        int pin=Integer.parseInt(dis.readLine());
        System.out.println("Enter your Country");
        String cn=dis.readLine();
        System.out.println("Enter your 10 digit mobile number");
        String phnum=dis.readLine();

        System.out.println("Thank you :D");

             st.setString(4, mn);

        st.setString(5, ln);

        st.setString(6, em);

        st.setString(7, gen);

        st.setString(8, inst);

        st.setString(9, add);

        st.setString(10, ct);

        st.setString(11, state);

        st.setInt(12, pin);

        st.setString(13, cn);

        st.setString(14, phnum);

        st.setInt(15,dob);

        st.setString(16, mob);

        st.setInt(17, yob);

        int i=st.executeUpdate();
        if(i>0)
        System.out.println("SUCCESS");
        con.close();
    } catch (Exception e) {
        System.out.println(e);

}
}
} 
```

输出：

```
Enter the desired username
grg
java.lang.NullPointerException 
```

此代码显示机器中的空指针异常和其他机器中的无效列索引消息。不知道如何进行。另一方面，如果我尝试使用语句对象插入值，则数据库工作正常。我猜准备好的语句对象存在问题，但无法解决。

# wpf - 调试 WPF DataGrid 虚拟化问题

> ID：11373525
> 
> 赞同：0
> 
> 时间：2012-07-07T08:32:27.117
> 
> 标签：wpf, performance, debugging, datagrid

我正在使用 WPF 数据网格（.Net 或 Toolkit），当绑定到可观察的集合时速度慢得令人无法接受。它包含大约 3500 行和 10 列，需要一分钟多的时间来显示内容。一切都表明它没有对数据进行 UI 虚拟化。但是，我无法弄清楚为什么会这样。

我没有使用分组。我通过将网格放置在具有固定高度的面板中来确保包含网格的高度。我已经在 DataGrid 上设置了所有虚拟化属性。我已签入 snoop 并设置了这些属性。然而，snoop 也显示加载后可视化树中有数千个数据网格。这是否是由使用 snoop 引起的我不知道。我尝试使用 AQTime 来了解发生了什么。减速似乎不在我们的代码中，而是在系统代码中。但是，我找不到一种轻松查看 WPF 在做什么的方法。我已经剥离了网格并尝试了 .Net 4 DataGrid 和工具包 DataGrid。两者都显示初始数据的速度慢得令人无法接受。我已经尝试修复行高和列宽。这也没什么区别。

如何确认虚拟化已打开，如果已关闭，为什么要关闭？如何调试代码之外发生的事情？有什么方法可以查看 WPF 在做什么？（我尝试过使用 WPF 性能套件，但由于某种原因它没有为我们的应用程序提供任何输出）。

我的想法不多了。当 UI 中只有 10 行可见时，它不应该这么慢。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:09:29.150

确保`ScrollViewer.CanContentScroll`未设置为`False`.

有关说明，请参阅[为什么将 ScrollViewer.CanContentScroll 设置为 false 禁用虚拟化](https://stackoverflow.com/q/3724593/620360)。

顺便说一句：WPF 4.5[为 VirtualizingPanel 引入了新功能](https://msdn.microsoft.com/en-us/library/ms171868(v=vs.110).aspx#core)，可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-11T17:14:31.077

与 WPF 4.5 中的虚拟化功能相关的已接受答案中的链接已失效，但这是一个摘要。

如果您使用的是 WPF 4.5，则可以通过离开`ScrollViewer.CanContentScroll="true"`（即不更改默认值）并设置`VirtualizingStackPanel.ScrollUnit="Pixel"`. 例子：

```
<ListView ItemsSource="{Binding YourItems}"
    ItemTemplate="{StaticResource YourListItemTemplate}"
    VirtualizingStackPanel.ScrollUnit="Pixel"/> 
```

我们看到平均需要 4.7 秒来渲染由文本框、组合框和按钮组成的复杂 DataTemplate 的 200 个实例，但是通过重新启用`CanContentScroll`和设置它们`ScrollUnit`，渲染时间缩短到了 0.08 秒。

# jquery - jquery 1.3.2 初始加载在（文档）上失败。在 ie8 中准备就绪，但在刷新时有效

> ID：11373526
> 
> 赞同：1
> 
> 时间：2012-07-07T08:32:35.487
> 
> 标签：jquery, onload

使用带有脚本功能的 jquery 1.3.2.min、ui.1.7.3.min 和 main.js。我在 ie8 上有一个奇怪的行为。

当我最初加载页面时，脚本全部下载完毕，但是 JQ 没有触发

```
SCRIPT16389: Failed    
jquery.132.min.js, line 19 character 5841 
```

三个条件可以改变这种行为

1.  刷新页面，它工作正常
2.  添加警报作为第一行，它也可以正常工作。
3.  在页面本身中包含 main.js 而不是包含

例如

```
$(document).ready(function(){
      alert("now works!); 
```

任何理论或建议，因为重新加载或警报上的代码 100% 有效

谢谢艺术

# javascript - 检查图像是否以 jQuery（或纯 JavaScript）加载

> ID：11373529
> 
> 赞同：4
> 
> 时间：2012-07-07T08:33:01.110
> 
> 标签：javascript, jquery, image, loaded

我知道`load()`jQuery 中有一个事件在图像完成加载时触发。但是，如果在图像完成加载*后附加事件处理程序怎么办？*

是否有类似`$('#myimage').isLoaded()`检查图像是否已加载的属性？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-07T08:48:14.340

您可以检查[`complete`](https://developer.mozilla.org/en/DOM/HTMLImageElement#DOM_properties)图像的属性。

> 是否有类似`$('#myimage').isLoaded()`检查图像是否已加载的属性？

不，但你可以这样做:)

```
jQuery.fn.isLoaded = function() {
    return this
             .filter("img")
             .filter(function() { return this.complete; }).length > 0;
}; 
```

`true`如果集合中的所有图像都已加载，并且`false`一个或多个图像未加载，这将产生。您可以对其进行调整以满足您的需求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T08:47:11.497

纯JS就够了。图像对象具有完整的属性。在这里查看：[http ://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_img_complete](http://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_img_complete)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T08:45:10.943

它有点骇人听闻，我不确定它是否会在任何地方都有效。自己做测试。

```
$.fn.isLoaded = function(message) {
  var $this = $(this);
  if($this.height() > 0 && $this.width() > 0){
     return true;
  }
  return false;
};

$('#myimage').isLoaded() 
```

**编辑：**

这适用于ff和chrome，

```
$.fn.isLoaded = function(message) {
  var $this = $(this); 
  $this.hide();   // becaues firefox gives a 24*24 dimension
  var w = this[0].width;
  var h = this[0].height;  
  $this.show(); 
  if(w > 0 || h > 0){ 
    return true;
  } 
  return false;
}; 
console.log($('#myimage').isLoaded()); 
```

但是如果你隐藏图像 ie 给 0 作为宽度和高度，所以它会失败 ie。即，您不应该隐藏图像。

我希望，有人可以结合这两个功能来制作跨浏览器的东西，或者至少它肯定会帮助某人。

# jasper-reports - 如何在 jasper 报告中使用特定字体

> ID：11373530
> 
> 赞同：1
> 
> 时间：2012-07-07T08:33:25.860
> 
> 标签：jasper-reports

我想在我的 jasper 报告中使用我自己的特定字体。我使用的是 jasper 报告-4.5.0。如果我在我的 jrxml 文件中使用 Helvetica 作为字体名称，那么我会收到异常，因为字体对 JVM 不可用.如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T01:07:15.103

[您可以在iReport](http://sourceforge.net/projects/ireport/files/iReport/iReport-4.6.0/)中按如下方式安装 TrueType 字体

转到`Tools`**~>** `Options`**~>** `Reports`**~>** `Fonts`**~>**`Install Font`

然后从那里跟随向导。

# jquery - 如何使用 JQUERY 选择多个深度 DOM

> ID：11373534
> 
> 赞同：0
> 
> 时间：2012-07-07T08:34:32.170
> 
> 标签：jquery, dom

我有多个级别的 DOM 元素，但我仍然在寻找如何选择 DOM 元素。我的html在这里。

```
<div class="data">
  <div class="item">
    <form class="comment" method="post" action="">
      <div class="d1">
        <a href="">Tree</a>
        <p>
        </p>
      </div>
      <div class="d2">
        <p class="quote">
      </div>
      <div class="col p3">
        <input type="hidden" name="token" value=""/><input type="hidden" name="u" value=""/><input type="button" class="button" name="submit"/><br>
        <abbr class="selected_dom" title="2012-07-05T11:29:22Z">July 1, 2012</abbr>
      </div>
    </form>
  </div>
</div> 
```

你能帮我如何选择这个`<abbr class="selected_dom" title="2012-07-05T11:29:22Z">July 1, 2012</abbr>`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T08:36:32.810

用这个：

```
// select abbr element with class selected_dom, inside form with class comment
var abbr = $('form.comment abbr.selected_dom'); 
```

根据您的 HTML 结构，您可能只想选择`abbr`元素：

```
var abbr = $('abbr'); 
```

阅读有关[选择器（通用）](http://api.jquery.com/category/selectors/)和[元素选择器的更多信息](http://api.jquery.com/element-selector/)

# playframework - 播放框架在启动时挂起：“正在加载项目定义”

> ID：11373536
> 
> 赞同：61
> 
> 时间：2012-07-07T08:34:52.660
> 
> 标签：playframework

我刚刚开始使用 Play Framework。我已经下载并安装了 play 并创建了一个示例 java 应用程序。当我尝试在应用程序目录中启动播放控制台时，它会挂在“正在加载项目定义”处。

```
PS C:\dev\play\javatest> play.bat
Getting org.scala-sbt sbt_2.9.1 0.11.3 ...
:: retrieving :: org.scala-sbt#boot-app
        confs: [default]
        37 artifacts copied, 0 already retrieved (7245kB/283ms)
[info] Loading project definition from C:\dev\play\myFirstApp\project 
```

当我尝试运行 Scala 应用程序时，我收到一条关于它正在等待锁定的消息：

```
PS C:\dev\play\scalatest> play
[info] Loading project definition from C:\dev\play\test1\project
Waiting for lock on C:\lib\play\repository\.sbt.ivy.lock to be available... 
```

运行 Windows 7、JDK 1.7.0_05 和 Play Framework 2.0.2。有任何想法吗？

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-09-26T15:20:29.893

我刚刚在 Play 2 中亲身体验了这一点，结果发现它并没有真正挂起，它只是拉一个 maven 并下载 Internet。要验证这与您在编辑`project/plugins.sbt`和替换时遇到的行为相同：

```
logLevel := Level.Warn 
```

和

```
logLevel := Level.Debug 
```

（虽然我是在 OSX 上构建的，但我想你会在 Windows 上体验到类似的输出。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-24T15:58:58.927

只是在这里添加到现有答案，

从 Play 2.2x 升级到 Play 2.3.x 后，我也看到了这种行为（请参阅[MigrationGuide](http://www.playframework.com/documentation/2.3.x/Migration23)）

我正在调试如下。

在 Linux 上，转到您的项目文件夹，然后：

```
$ bash -x `which sbt`
.... OUTPUT SKIPPED....
++ ((  128 < 512  ))
++ local 'common_opts=-Xms1024m -Xmx1024m -XX:ReservedCodeCacheSize=128m'
++ [[ 1.7.0_55 < 1.8 ]]
++ local perm=256
++ echo '-Xms1024m -Xmx1024m -XX:ReservedCodeCacheSize=128m -XX:MaxPermSize=256m'
+ execRunner java -Xms1024m -Xmx1024m -XX:ReservedCodeCacheSize=128m -XX:MaxPermSize=256m -jar /usr/share/sbt-launcher-packaging/bin/sbt-launch.jar
+ [[ -n '' ]]
+ [[ -n '' ]]
+ java -Xms1024m -Xmx1024m -XX:ReservedCodeCacheSize=128m -XX:MaxPermSize=256m -jar /usr/share/sbt-launcher-packaging/bin/sbt-launch.jar 
```

记下最后一行的命令，取消当前进程`Ctrl+C`，然后执行它添加`-verbose`选项`java`：

```
java -verbose -Xms1024m -Xmx1024m -XX:ReservedCodeCacheSize=128m -XX:MaxPermSize=256m -jar /usr/share/sbt-launcher-packaging/bin/sbt-launch.jar 
```

最后我也加`logLevel := Level.Debug`进去了`project/plugins.sbt`。

但是，它不断给出这样的输出：

```
.... OUTPUT SKIPPED....
info]   [SUCCESSFUL ] org.apache.maven.doxia#doxia-sink-api;1.1!doxia-sink-api.jar (2065ms)
[debug]         tried http://repo.typesafe.com/typesafe/ivy-releases/org.apache.maven.doxia/doxia-logging-api/1.1/jars/doxia-logging-api.jar
[debug] CLIENT ERROR: Not Found url=http://repo.typesafe.com/typesafe/ivy-releases/org.apache.maven.doxia/doxia-logging-api/1.1/jars/doxia-logging-api.jar
[debug]         tried http://repo.scala-sbt.org/scalasbt/sbt-plugin-releases/org.apache.maven.doxia/doxia-logging-api/1.1/jars/doxia-logging-api.jar
[debug] CLIENT ERROR: Not Found url=http://repo.scala-sbt.org/scalasbt/sbt-plugin-releases/org.apache.maven.doxia/doxia-logging-api/1.1/jars/doxia-logging-api.jar
[debug]         tried /home/saleem/.ivy2/local/org.apache.maven.doxia/doxia-logging-api/1.1/jars/doxia-logging-api.jar
[debug]         tried http://repo1.maven.org/maven2/org/apache/maven/doxia/doxia-logging-api/1.1/doxia-logging-api-1.1.jar
[info] downloading http://repo1.maven.org/maven2/org/apache/maven/doxia/doxia-logging-api/1.1/doxia-logging-api-1.1.jar ...
[debug]     public: downloading http://repo1.maven.org/maven2/org/apache/maven/doxia/doxia-logging-api/1.1/doxia-logging-api-1.1.jar
[debug]     public: downloading http://repo1.maven.org/maven2/org/apache/maven/doxia/doxia-logging-api/1.1/doxia-logging-api-1.1.jar.sha1
[debug] sha1 OK for http://repo1.maven.org/maven2/org/apache/maven/doxia/doxia-logging-api/1.1/doxia-logging-api-1.1.jar
[info]  [SUCCESSFUL ] org.apache.maven.doxia#doxia-logging-api;1.1!doxia-logging-api.jar (3997ms)
[debug]         tried http://repo.typesafe.com/typesafe/ivy-releases/org.apache.maven/maven-plugin-registry/2.2.1/jars/maven-plugin-registry.jar
[debug] CLIENT ERROR: Not Found url=http://repo.typesafe.com/typesafe/ivy-releases/org.apache.maven/maven-plugin-registry/2.2.1/jars/maven-plugin-registry.jar
[debug]         tried http://repo.scala-sbt.org/scalasbt/sbt-plugin-releases/org.apache.maven/maven-plugin-registry/2.2.1/jars/maven-plugin-registry.jar
[debug] CLIENT ERROR: Not Found url=http://repo.scala-sbt.org/scalasbt/sbt-plugin-releases/org.apache.maven/maven-plugin-registry/2.2.1/jars/maven-plugin-registry.jar
[debug]         tried /home/saleem/.ivy2/local/org.apache.maven/maven-plugin-registry/2.2.1/jars/maven-plugin-registry.jar
[debug]         tried http://repo1.maven.org/maven2/org/apache/maven/maven-plugin-registry/2.2.1/maven-plugin-registry-2.2.1.jar
[info] downloading http://repo1.maven.org/maven2/org/apache/maven/maven-plugin-registry/2.2.1/maven-plugin-registry-2.2.1.jar ...
[debug]     public: downloading http://repo1.maven.org/maven2/org/apache/maven/maven-plugin-registry/2.2.1/maven-plugin-registry-2.2.1.jar
[debug]     public: downloading http://repo1.maven.org/maven2/org/apache/maven/maven-plugin-registry/2.2.1/maven-plugin-registry-2.2.1.jar.sha1
[debug] sha1 OK for http://repo1.maven.org/maven2/org/apache/maven/maven-plugin-registry/2.2.1/maven-plugin-registry-2.2.1.jar
[info]  [SUCCESSFUL ] org.apache.maven#maven-plugin-registry;2.2.1!maven-plugin-registry.jar (2025ms)
[debug]         tried http://repo.typesafe.com/typesafe/ivy-releases/backport-util-concurrent/backport-util-concurrent/3.1/jars/backport-util-concurrent.jar
[debug] CLIENT ERROR: Not Found url=http://repo.typesafe.com/typesafe/ivy-releases/backport-util-concurrent/backport-util-concurrent/3.1/jars/backport-util-concurrent.jar
[debug]         tried http://repo.scala-sbt.org/scalasbt/sbt-plugin-releases/backport-util-concurrent/backport-util-concurrent/3.1/jars/backport-util-concurrent.jar
[debug] CLIENT ERROR: Not Found url=http://repo.scala-sbt.org/scalasbt/sbt-plugin-releases/backport-util-concurrent/backport-util-concurrent/3.1/jars/backport-util-concurrent.jar
[debug]         tried /home/saleem/.ivy2/local/backport-util-concurrent/backport-util-concurrent/3.1/jars/backport-util-concurrent.jar
[debug]         tried http://repo1.maven.org/maven2/backport-util-concurrent/backport-util-concurrent/3.1/backport-util-concurrent-3.1.jar
[info] downloading http://repo1.maven.org/maven2/backport-util-concurrent/backport-util-concurrent/3.1/backport-util-concurrent-3.1.jar ...
[debug]     public: downloading http://repo1.maven.org/maven2/backport-util-concurrent/backport-util-concurrent/3.1/backport-util-concurrent-3.1.jar
.... OUTPUT SKIPPED.... 
```

似乎有太多 jar 需要下载。我现在正在使用 Typesafe Activator 的离线版本（在此处下载 356MB [）](http://www.playframework.com/download)，这要快得多！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-21T15:09:59.343

尝试中止您的构建，删除引用的锁定文件，然后再次执行“播放运行”。

# java - 迭代器空集合

> ID：11373537
> 
> 赞同：10
> 
> 时间：2012-07-07T08:34:56.693
> 
> 标签：java, collections, iterator

当不确定集合引用是否为 null 时，我必须在迭代之前检查 null 是很常见的。样本：

```
Collection<Object> collection = ...
...
if(collection != null)//troublesome
    for(Object o : collection) 
```

当然，我知道空集合比 null 好得多，但在某些情况下，客户端代码无法控制来自其他模块的可为空集合（例如，来自 3rd 方代码的返回值）。所以我写了一个实用方法：

```
public static <T> Iterable<T> nullableIterable(Iterable<T> it){
    return it != null ? it : Collections.<T>emptySet();
} 
```

在客户端代码中，不再需要检查 null：

```
for(Object o : nullableIterable(collection))
... 
```

你觉得`nullableIterable()`合理吗？有什么建议吗？有什么顾虑吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T08:41:20.577

这看起来不错。我个人也是这样做的。您总会遇到不同意这一点的开发人员，因为它是一种防御性编程。想象一下，您有一个不应该返回的工作流或类`null`。这意味着`null`从中获取 a 是一个错误，您的代码将隐藏它，因为它将变成`null`一个空集合，并且该错误永远不会浮出水面。

例如，如果您正在编写不支持`null`集合的 API，那么您应该避免这种情况。如果客户端代码给你一个`null`你不支持的集合，你应该抛出一个`IllegalArgumentException`让客户端代码知道提供的集合有问题。就像是：

```
public void myApiNoSupportForNull(Collection<Object> collection){
   // Pre condition
   if(collection == null) 
     throw new IllegalArgumentException("This API does not support null collections!");
   //...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T11:04:01.470

在大多数情况下，这是可以的。
请记住，您可能会遇到第三方在 error 的情况下返回 null ，并且空列表是有效的结果。
因此，我会考虑更改您的代码并执行以下操作：

```
public static <T> Iterable<T> nullableIterable(Iterable<T> it, boolean exceptionIfNull){
    if (exceptionIfNull && it == null) {
        throw new NUllPointerException("Iterable is null");
    } else
    return it != null ? it : Collections.<T>emptySet();
}

public static <T> Iterable<T> nullableIterable(Iterable<T> it){
    return nul,lableIterable(it,false); //Default behavior for most cases
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T09:10:02.020

如果您将此功能的使用限制在与“外部”代码交互的层并确保您永远不会开始使用它来防御自己或同事，这对我来说看起来不错。考虑使用 @Nullable 注释在代码中注释参数和字段 - 假设未注释的内容不能为空，这非常有用，特别是考虑到 IDE 和静态分析工具知道此注释。

# objective-c - 石英核心。同一路径上的纯色矩形和渐变色圆圈

> ID：11373538
> 
> 赞同：0
> 
> 时间：2012-07-07T08:35:31.517
> 
> 标签：objective-c, ios, quartz-graphics

我相信主题是可能的。如果是，那该怎么做？如果没有，那么如何在特定路径上设置特定颜色？

谢谢。

**编辑：**好的。删除了消息中令人困惑的部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:27:09.670

渐变色的圆圈不是用路径绘制的，路径是用来裁剪上下文的，然后单独绘制渐变。将路径想象为以单一动作绘制的单一颜色 - 所以您对问题的回答是否定的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T14:40:21.303

由于您发布的代码使用矩形进行剪辑，我对您要查找的内容有些困惑，但是您正在谈论对它们进行不同的着色。但是这样的事情怎么样：

```
CGContextSetFillColor (cx, fillColor0);
CGContextFillRect (cx, CGRectMake (x0, y0, w0, h0));
CGContextSetFillColor (cx, fillColor1);
CGContextFillRect (cx, CGRectMake (x1, y1, w1, h1));
CGContextSetFillColor (cx, fillColor2);
CGContextFillRect (cx, CGRectMake (x2, y2, w2, h2));
CGContextSetFillColor (cx, fillColor3);
CGContextFillRect (cx, CGRectMake (x3, y3, w3, h3));
CGContextRadialGradient (...etc...); 
```

如果这与您要查找的内容相去甚远，请说明您想要什么。

# android - ICS 键盘中的 makedict

> ID：11373541
> 
> 赞同：1
> 
> 时间：2012-07-07T08:36:08.920
> 
> 标签：android, dictionary, keyboard, binary, android-4.0-ice-cream-sandwich

我尝试使用 Gingerbread 键盘中的 main.dict，但它不起作用。然后我尝试根据 ICS 源代码从 xml 文件到 main.dict 。问题是如果 XML 文件中的单词不多（10-20）我可以使用它，但是如果我尝试添加更多它会出现错误说“无法打开资源文件”。Logcat 说它已经被压缩了。我不知道为什么或如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T18:21:38.373

我刚刚发现如果他们不知道文件扩展名，ICS 会在原始文件夹中压缩所有内容。所以这是我的主要问题。

如果你有安卓键盘的二进制字典，你应该把它从 main.dict 重命名为 main.mp3 或其他安卓识别的扩展名。

# hadoop - 在 Hive 中分解结构数组

> ID：11373543
> 
> 赞同：44
> 
> 时间：2012-07-07T08:36:23.433
> 
> 标签：hadoop, mapreduce, hive, hiveql

这是下面的 Hive 表

```
CREATE EXTERNAL TABLE IF NOT EXISTS SampleTable
(
USER_ID BIGINT,
NEW_ITEM ARRAY<STRUCT<PRODUCT_ID: BIGINT,TIMESTAMPS:STRING>>
) 
```

这就是上表中的数据——

```
1015826235     [{"product_id":220003038067,"timestamps":"1340321132000"},{"product_id":300003861266,"timestamps":"1340271857000"}] 
```

爆炸数组后，有什么方法可以从 HiveQL 获得以下输出？

```
**USER_ID**  |  **PRODUCT_ID**  |   **TIMESTAMPS**
 ------------+------------------+----------------
1015826235      220003038067       1340321132000
1015826235      300003861266       1340271857000 
```

**更新**

我编写了此查询以获取上述格式的输出，但它并没有以我想要的方式给我结果。

```
SELECT myTable1.myCol1,myTable2.myCol2 FROM sampletable st LATERAL VIEW 
explode(st.purchased_item.product_id) myTable1 AS myCol1 LATERAL VIEW 
explode(st.purchased_item.timestamps) myTable2 AS myCol2; 
```

谁能帮助我我做错了什么？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-07-09T12:56:01.187

您只需爆炸一次（与 LATERAL VIEW 结合使用）。展开后，您可以使用一个新列（在我的示例中称为 prod_and_ts），该列将是 struct 类型。然后，您可以解析这个新结构列的 product_id 和 timestamps 成员来检索所需的结果。

```
SELECT
   user_id,
   prod_and_ts.product_id as product_id,
   prod_and_ts.timestamps as timestamps
FROM 
   SampleTable 
   LATERAL VIEW explode(new_item) exploded_table as prod_and_ts; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-06-26T22:46:40.737

如果您使用 Hive 0.10 或更高版本，您还可以使用`inline(ARRAY<STRUCT[,STRUCT]>)`. 它将一个结构数组分解成一个表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-22T17:46:05.430

您可以通过以下方式分解阵列：

```
select USER_ID,items from Sample_Table lateral view explode(NEW_ITEM) temp_table as items; 
```

# objective-c - 何时对属性使用强或弱

> ID：11373546
> 
> 赞同：2
> 
> 时间：2012-07-07T08:36:48.667
> 
> 标签：objective-c, memory-management, automatic-ref-counting, declared-property

我有一个表格视图`IBOutlet`，默认情况下 XCode 将其属性设置为`strong`而不是`weak`. 有时我会收到“收到内存警告”消息。所以我尝试将许多属性从`strong`to更改`weak`，但它似乎并没有影响过程并且事情运行顺利。我应该将出口设置为弱，还是我错了？

最重要的是，我应该在方法中设置**所有**属性，还是只设置s？`nil``viewDidUnload``IBOutlet`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T09:50:01.317

您应该只将`Strong`属性设置为`nil`in `viewDidUnload`。`Weak`如果目标对象被释放，属性会自动设置为 Nil。

`IBOutlet`可以根据需要设置`strong`或设置`weak`。

对于您面临的警告问题，您能否提供更多详细信息和代码？

除了 Josh 提供的链接外，还有很多与此主题相关的 SO 帖子，其中一些如下：

[IBOutlet 和其他的弱或强](https://stackoverflow.com/questions/11168916/weak-or-strong-for-iboutlet-and-other)

[Objective-C 声明的@property 属性（非原子、复制、强、弱）](https://stackoverflow.com/questions/9859719/xcode-property-attributes-nonatomic-copy-strong-weak)

可以在这里找到很好的详细解释：

[http://www.raywenderlich.com/5677/beginning-arc-in-ios-5-part-1](http://www.raywenderlich.com/5677/beginning-arc-in-ios-5-part-1)

可以在此处找到有关此主题的 Apple 文档：http: [//developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html#//apple_ref/doc/uid/TP30001163-CH17 -SW1](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html#//apple_ref/doc/uid/TP30001163-CH17-SW1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-07T10:58:11.523

“当父对象引用子对象时，应使用强引用。当子对象引用其父对象时，应使用弱引用”

通常，在处理内存周期时会使用弱引用。如果你使用 strong 你需要在 viewDidUnload 中设置 nil 因为如果你不这样做，在内存不足的情况下，你可能会导致意外的泄漏。您不会在 dealloc 中释放它们，因为 ARC 会为您完成。相反，weak 不需要这种处理，因为当目标对象被销毁时，这些值会自动设置为 nil。不再有悬空指针。

# mysql - 连接中的 MySQL COUNT 查询

> ID：11373549
> 
> 赞同：1
> 
> 时间：2012-07-07T08:38:00.633
> 
> 标签：mysql, sql

我有两张桌子。

第一个表是成员表

```
MEMBER TABLE
ID    |  NAME
1     |  User
2     |  Another User
3     |  Some other User 
```

第二张桌子是朋友

```
FRIENDS TABLE
ID    |  member_id    |  Friend Name    |  Notified
1     |  1            |  Friend #1      |  0
2     |  1            |  Friend #1      |  1
3     |  2            |  Friend #1      |  0
4     |  1            |  Friend #1      |  1
5     |  2            |  Friend #1      |  1 
```

我喜欢做的是获取成员表信息，同时也获取每个成员的通知好友总数。

到目前为止我所做的是

```
SELECT
    M.ID
    M.NAME
    COUNT(F.notified)
FROM
    MEMBER AS M
LEFT JOIN
    FRIENDS AS F
ON
    F.member_id = M.id
WHERE
    F.notified = 1
GROUP BY
    M.id 
```

但这对我不起作用，因为如果我有一个未通知朋友的成员，则查询不会包含在结果中。

例如，在上面的代码中，ID 为 3 的成员不会包含在我的结果中。

关于如何修改该查询以返回没有通知朋友的成员的任何想法？

亲切的问候梅里亚诺斯尼科斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T08:40:14.100

该`WHERE F.notified = 1`条件取消`LEFT`连接，使其作为`INNER`连接工作。将条件移至连接`ON`子句：

```
SELECT
    M.ID
    M.NAME
    COUNT(F.member_id)
FROM
      MEMBER AS M
  LEFT JOIN
      FRIENDS AS F
    ON
      F.member_id = M.id
    AND
      F.notified = 1
GROUP BY
    M.id ; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T08:41:02.987

您可以通过这种方式使用子查询来做到这一点：

```
SELECT
    M.ID,
    M.NAME,
    (SELECT  COUNT(F.notified) FROM FRIENDS AS F WHERE F.member_id = M.id AND F.notified = 1) AS NUMFRIENDS
FROM
    MEMBER AS M 
GROUP BY
    M.id 
```

# forms - Symfony2 表单中的非空白文件输入字段

> ID：11373551
> 
> 赞同：13
> 
> 时间：2012-07-07T08:38:21.913
> 
> 标签：forms, validation, symfony, doctrine-orm, entity

在我的 Doctrine 实体中，这是`data_class`我的表单，我有一个文件属性定义如下：

```
/**
     * Image.
     *
     * @Assert\NotBlank
     * @Assert\File
     * @Assert\Image(minWidth="138", minHeight="96")
     */
    protected $file; 
```

此外，将其添加到表单类型中`->add('file', 'file')`...

创建实体很完美，但问题是当我使用表单来更新这个实体时。它再次请求文件，因为它有@Assert\NotBlank。由于我在此表单中有其他字段，因此我不想在每次更新时重新上传图像。

当我删除@Assert\NotBlank 时，一切正常，但我希望这个文件字段是强制性的。

任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T09:03:43.457

你有两种方法可以解决这种情况，并且都依赖`Callback`验证器：（[Symfony 回调](http://symfony.com/doc/current/reference/constraints/Callback.html)）

`boolean`将命名添加`isUpdate`到您的实体，该实体将不会被持久化，并会告诉验证器尝试了哪个操作。这种方法在上面的链接中有完整的描述。

解决此问题的另一种方法是将回调验证器直接添加到您的表单类型。同样，`isUpdate`将需要一些标志，但这次在 Form 类型中（通过构造函数传递它）：

```
if ( $this->isUpdate == false ){
    $builder->addValidator(new CallbackValidator(function(FormInterface $form){
        if ( $form['image_file']->getData() == NULL ){
            $form->addError(new FormError('You need to specify image file.'));                  
        }
    }));
} 
```

也许有更简单的方法来实现所需的验证，但我在这两个月前遇到了。

希望这可以帮助...

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-11T11:21:43.267

您也可以为此使用验证组。一个验证组（可能是默认的）将用于创建，第二个用于更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-07T20:30:03.657

我有过类似的情况。我尝试使用文件路径编辑数据库中的现有记录。当我编辑记录时，我必须上传新文件，这对用户来说不舒服。在我的解决方案中，我使用变量 tmp 文件作为文件哈希和变量文件名。我在动作编辑类中进行的所有需要​​的操作。

波纹管链接中的完整示例动作类

[https://github.com/marekz/php_examples/wiki/Symfony-how-to-edit-attachment-form](https://github.com/marekz/php_examples/wiki/Symfony-how-to-edit-attachment-form/ "symfony 示例使用文件编辑现有记录")

# c# - 添加程序集引用后，命名空间中不存在类型或命名空间名称“ComponentModel”

> ID：11373553
> 
> 赞同：1
> 
> 时间：2012-07-07T08:38:53.130
> 
> 标签：c#, visual-studio-2010

我有一个很难诊断的奇怪问题。将包含命名空间的程序集引用添加`Matrix.System`到 Windows 服务项目后，我现在在编译服务时收到此错误：

> 命名空间“Matrix.System”中不存在类型或命名空间名称“ComponentModel” 命名空间“Matrix.System”中不存在类型或命名空间名称“ServiceProcess”

错误是在服务中生成的：

```
private System.ComponentModel.IContainer components = null;
private System.ServiceProcess.ServiceInstaller serviceInstaller1; 
```

在服务设置项目中，我得到了这个：

> 找不到程序集“Apache.NMS.ActiveMQ.dll”的依赖项“IONIC.ZLIB”（签名=“EDBE51AD942A3F5C”版本=“1.9.1.5”）

`Matrix.System`NMS 程序集已经在安装项目中，并且在我添加程序集之前一切正常

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T08:40:36.420

您可以像这样“根”命名空间：

```
using global::System.ComponentModel; 
```

（然后摆脱代码中的完全限定引用。）

或者，如果您*真的*想使用完全限定的命名空间：

```
private global::System.ComponentModel.IContainer components = null;
private global::System.ServiceProcess.ServiceInstaller serviceInstaller; 
```

不过，这看起来与其他依赖问题无关。

我的猜测是，在同一个班级你有：

```
using Matrix; 
```

否则我不希望它首先成为一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-09T12:04:39.047

您需要`system.componentmodel`从 Nuget 管理包安装。因为`system.componentmodel`在 Microsoft 参考资料或系统中都没有。请注意，框架 2.0 不支持它，至少需要 .Net 框架 4.3

[![在此处输入图像描述](../Images/31f1903e8cbca81510320ec5e7b2869f.png)](https://i.stack.imgur.com/qAsSQ.png)

[![在此处输入图像描述](../Images/8c291fe57f264932241b1f3c17bd1026.png)](https://i.stack.imgur.com/DetiT.png)

# ios - 在 iOS 中安装 2 个具有相同配置文件的应用程序

> ID：11373554
> 
> 赞同：0
> 
> 时间：2012-07-07T08:39:42.590
> 
> 标签：ios, provisioning-profile

如何在 iOS 设备上安装两个具有相同配置文件的应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T16:43:20.197

您可以使用通配符配置文件。然后你只需要在你的应用程序中绑定 ID，但配置文件保持不变。

# asp.net-mvc-3 - Asp .net MVC3 用户注册

> ID：11373559
> 
> 赞同：0
> 
> 时间：2012-07-07T08:40:34.720
> 
> 标签：asp.net-mvc-3, membership-provider, custom-membershipprovider

我正在自学 Asp .net MVC 3。我已经到了现在需要合并用户帐户系统的阶段。我从标准的 Asp .net MVC 3 会员提供程序开始，并希望在大多数情况下坚持使用它，并将所有其他用户详细信息存储在链接到用户表的另一个表中。

但是，我想在注册时添加两个功能：1）确认电子邮件 2）接受 T&C。

有没有一种简单的方法可以在不构建自定义会员提供程序的情况下做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T08:50:00.947

就个人而言，我不认为确认电子邮件/条款和条件应该成为会员提供商的一部分。

您通常会在您的 AccountController（或您拥有的任何等价物）中处理类似的事情。

例如，如果您有一个注册操作，一旦您使用会员提供者保存用户并且一切看起来都不错，您将发送确认电子邮件（从操作触发的代码）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T09:52:19.893

您可以将接受条款和条件添加到 Account Model 中的 RegisterModel 类（Models 目录中的 AccountModels.cs），如下所示：

```
[Display(Name = "Agree to Terms")]
public bool AgreeTandC { get; set; } 
```

您必须更新注册视图，为此添加显示，以便显示复选框以及您想要的任何文本。

不幸的是，您不能简单地使用该`[Required]`属性，因为这是 a`bool`并且未检查是 false 不为空。有一些方法可以创建自定义 bool 必需属性，但它们有点工作。您可能更容易在 Account Controller 中的 Register 方法中添加检查以查看是否已检查，如下所示：

```
if(model.AgreeTandC == false)
{
    ModelState.AddModelError("AgreeTandC", "You must agree to the Terms and Conditions");
    return View(model);
} 
```

我以前没有使用过`ModelState.AddModelError`类似的东西，但我认为它会起作用（向用户显示错误），否则只需将其替换为`ViewBag.Error = "You must agree to the Terms and Conditions";`并将其添加到寄存器视图模型中。

至于电子邮件，这并不难，您必须添加发送电子邮件的功能，例如 [MvcMailer](https://github.com/smsohan/MvcMailer/wiki/MvcMailer-Step-by-Step-Guide)会有所帮助。您还需要更改`Membership.CreateUser`Account Controller 的 Register 方法中的行以不授权用户。

```
Membership.CreateUser(model.UserName, model.Password, model.Email, null, null, false, null, out createStatus); 
```

我认为应该是这样。然后，如果`createStatus == MembershipCreateStatus.Success)`发送带有确认 GUID 的电子邮件`string confirmationGuid = user.ProviderUserKey.ToString();`

您还必须制定一种方法来接受确认 ID（当他们单击电子邮件中的链接时。）

我只是简单地谈到了电子邮件部分，网上有很多博客都详细介绍了发送注册电子邮件。

# ruby-on-rails - 如何禁用rails中的activerecord缓存日志记录

> ID：11373566
> 
> 赞同：5
> 
> 时间：2012-07-07T08:41:17.310
> 
> 标签：ruby-on-rails, caching, activerecord, logging

我正在尝试禁用生产中缓存的日志记录。已成功让 SQL 停止记录查询，但缓存日志条目没有运气。生产日志中的示例行：

```
CACHE (0.0ms) SELECT `merchants`.* FROM `merchants` WHERE `merchants`.`id` = 1 LIMIT 1 
```

我不想禁用所有日志记录，因为我希望 logger.debug 语句显示在生产日志中。使用带有 Mysql 和 Apache 的 rails 3.2.1。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-07-07T22:42:04.343

导轨 5.1

```
# config/initializers/active_record_logger.rb

class CacheFreeLogger < ActiveSupport::Logger
  def add(severity, message = nil, progname = nil, &block)
    return true if progname&.include? "CACHE"
    super
  end
end

ActiveRecord::Base.logger = CacheFreeLogger.new(STDOUT) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-13T18:14:06.600

我使用下面链接的帖子建议的方法使 CACHE 日志静音。

我用一个包装器替换了默认的 ActiveRecod 记录器，该包装器过滤掉包含不需要的文本的消息，即“CACHE”。

`config/initializers`首先，例如在其中创建一个文件，`active_record.rb`并在该文件中定义一个包装类并替换活动记录记录器，如下面的代码所示：

```
# Implementation of logger that ignores messages containing forbidden words
# here “CACHE” and "Settings Load"
class CacheFreeLogger < ActiveSupport::TaggedLogging

  @@excluded = ['Settings Load','CACHE']

  def add(severity, message = nil, progname = nil, &block)
    if message.nil?
      if block_given?
        message = block.call
      else
        message = progname
        progname = nil #No instance variable for this like Logger
      end
    end
    if severity > Logger::DEBUG ||  !(@@excluded.map{|e| message.include? e}.include?(true))
        @logger.add(severity, "#{tags_text}#{message}", progname)
    end
  end
end

#Replace the existing logger with the filtering one
ActiveRecord::Base.logger = CacheFreeLogger.new(ActiveRecord::Base.logger) if Rails.env.development? 
```

原始帖子扩展了 Logger 而不是 TaggedLoggin 但它对我不起作用。

博客中建议了这种方法：http: [//heliom.ca/blog/posts/disable-rails-cache-logging](http://heliom.ca/blog/posts/disable-rails-cache-logging)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-07T09:12:46.857

SO上有一些类似的问题（[this](https://stackoverflow.com/questions/10522961/rails-activerecord-how-can-i-turn-off-logging-particular-queries)，[this](https://stackoverflow.com/questions/7759321/disable-rails-3-1-sql-logging)，[this ），主题都相似。](https://stackoverflow.com/questions/7966948/turn-off-verbose-sql-activerecord-for-rails-3-1-1)您可以尝试将其放入初始化程序文件中：

```
old_logger = ActiveRecord::Base.logger
ActiveRecord::Base.logger = nil 
```

恢复记录器：

```
ActiveRecord::Base.logger = old_logger; nil # nil just to suppress some garbage 
```

# java - 用户指定的日志类 'org.apache.commons.logging.impl.Log4JLogger' 找不到或不可用

> ID：11373573
> 
> 赞同：1
> 
> 时间：2012-07-07T08:42:09.033
> 
> 标签：java, log4j, websphere-6.1

我在网络应用程序中工作。我尝试使用 WEB-INF/lib/*.jar 从我的战争中删除 jar 重复。这帮助我将罐子排除在我的战争之外。在 websphere 中部署耳朵时，我遇到了以下问题，

我检查了我的战争类路径，它包含 log4j.jar 和 common-logging1.1.jar。

请帮忙！！！

错误日志：

```
[7/6/12 22:34:10:577 CEST] 00000165 webapp        E com.ibm.ws.webcontainer.webapp.WebApp notifyServletContextCreated SRVE0283E: Exception caught while initializing context: {0}
    org.apache.commons.logging.LogConfigurationException: User-specified log class 'org.apache.commons.logging.impl.Log4JLogger' cannot be found or is not useable.
    at org.apache.commons.logging.impl.LogFactoryImpl.discoverLogImplementation(LogFactoryImpl.java:874)
    at org.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:604)
    at org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:336)
    at org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:310) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T15:35:50.060

WebSphere 6.1 包括 Commmons Logging 本身，由比您的 Web 应用程序[更高的类加载器加载。](http://websphereapplicationservernotes.wordpress.com/2012/03/21/classnotfound-a-close-look-at-class-loader-in-websphere-application-server/)[（您可以通过将此 JSP](https://www.ibm.com/developerworks/mydeveloperworks/blogs/Dougclectica/entry/revive_finding_a_java_class_in_your_servlet_container2)部署到您的应用程序并输入其中一个 JCL 类名称来查看从何处加载 JCL 类。）因此您已将 JCL 配置为加载 log4j 类，但更高级别（父）类加载器可以从较低级别的 Web 应用程序类加载器中看不到 log4j 类。

因此，一种解决方案，特别是如果您需要 JCL 的 1.1 版本而不是 WebSphere 包含的版本 (1.0)，就是将您的 WebSphere 类加载器策略更改为**parent last**。

由于更改类加载器策略可能会产生其他影响，因此另一种选择是使用 WebSphere 包含的版本并[使用一种技术告诉它使用 log4j 作为应用程序中的日志记录机制](https://stackoverflow.com/questions/8131529/websphere-all-logs-are-going-to-systemout-log/8138477#8138477)。但请注意，由于 WebSphere 6.1 不包括整个 JCL1.0，因此[您需要在您的应用程序中部署一个完整的 JCL 1.0](http://majikshoe.blogspot.com/2009/01/joys-of-websphere-61-and-commons.html)。

# php - 具有持续时间的 CakePHP 缓存元素

> ID：11373576
> 
> 赞同：2
> 
> 时间：2012-07-07T08:42:36.367
> 
> 标签：php, cakephp, element, cakephp-2.0

关于[食谱](http://book.cakephp.org/2.0/en/views.html#caching-elements)，我们可以缓存这样的元素：

```
echo $this->element('helpbox', array(), array('cache' => true)); 
```

配置缓存是这样的：

```
echo $this->element('helpbox', array(),
    array('cache' => array('config' => 'view_long') ); 
```

如何在没有预定义配置的情况下缓存元素？如何将持续时间缓存到元素？我试过这个，但没有奏效：

```
echo $this->element('helpbox',  array(),
     array('cache' => array('time' => '+30 minutes'))); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T08:49:00.103

您需要在以下[位置配置缓存](http://book.cakephp.org/2.0/en/core-libraries/caching.html#configuring-cache-class)`app/Config/bootstrap.php`：

```
Cache::config('hour', array(
    'engine' => 'File',
    'duration' => '+1 hours',
    'path' => CACHE,
    'prefix' => 'cake_short_'
));

Cache::config('week', array(
    'engine' => 'File',
    'duration' => '+1 week',
    'probability' => 100,
    'path' => CACHE . 'long' . DS,
)); 
```

在此之后，您可以使用定义的配置缓存您的元素：

```
echo $this->element('helpbox', array(), array('cache' => array('config' => 'week'))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:12:44.620

由于您现在只能引用命名缓存配置，因此如果您想以编程方式清除缓存的元素，您需要使用 Cache::delete() 与元素名称和键。

我写了[一篇](http://blog.echothis.com/2012/12/17/controlling-element-caching-in-cakephp-2-3/)关于这个的博客文章。[在相关的 CakePHP 论坛主题](http://cakephp.1045679.n5.nabble.com/clear-element-cache-cakphp-2-0-td5123660.html)中还有一些更详细的信息。

(8/31/14) 我还没有检查这是否仍然是 CakePHP 2.5 中的行为。

# cocos2d-iphone - cocos2d-iphone SimpleAudioEngine 预加载策略

> ID：11373580
> 
> 赞同：0
> 
> 时间：2012-07-07T08:43:45.547
> 
> 标签：cocos2d-iphone, simpleaudioengine

SimpleAudioEngine 效果预加载的最佳策略是什么？在游戏启动时预加载所有音效？还是在每个屏幕的创建中仅预加载此屏幕中使用的效果？加载的效果会在某个时候发布吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T10:27:58.767

如果第一次播放音效会导致明显的延迟，则需要预加载。对于动作游戏，您要预加载所有游戏效果。对于回合制或其他“慢节奏”的游戏，不预加载任何音效可能是可以的。

预加载的时间和地点取决于您的需要。通常在游戏场景开始时（即在 init 或 onEnter 期间）。

除非您在其上调用 unloadEffect，否则不会释放预加载的效果。音频引擎在内部缓存音效，因此这不是预加载独有的。简单地播放声音效果也会加载它并将其保存在内存中。

# c++ - STL set_symmetric_difference 用法

> ID：11373583
> 
> 赞同：1
> 
> 时间：2012-07-07T08:44:05.603
> 
> 标签：c++, stl

我正在解决一个编程问题，它想要找到两组之间的对称差异。我已经使用 STL 解决了它`set_symmetric_difference`。我得到两个`vector<int>s`,`A`和`B`:

> A = {342,654,897,312,76,23,78}
> 
> B = {21,43,87,98,23,756,897,234,645,876,123}

灵魂回报（正确答案）：

> { 21,43,76,78,87,98,123,234,312,342,645,654,756,876 }

但我得到：

> { 21,43,76,78,87,98,123,234,312,342,645,65,756,876}

问题是什么 ？这是我的代码：

```
sort(A.begin(), A.end());
sort(B.begin(), B.end());
// allocate the smallest size of A,B as maximum size
vector<int> c(A.size() < B.size() ? B.size() : A.size());
vector<int>::iterator i;
i = set_symmetric_difference(A.begin(), A.end(), B.begin(), B.end(), c.begin());
return vector<int>(c.begin(), i); 
```

**注意：** 我得到了其余示例的正确答案。这个例子只给了我这个错误的答案。

我在 Visual Studio 中对其进行了测试，并收到一条错误消息：“Iterator not incrementable”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T09:09:01.597

问题在于 vector 的初始化`c`。逻辑稍有错误，因为输出范围的最大大小*可能*与两个输入范围的总和一样大。由于您不知道先验的大小，因此最好从空输出向量开始，然后将 push_back 与[std::back_inserter](http://en.cppreference.com/w/cpp/iterator/back_inserter)一起使用：

```
sort(A.begin(), A.end());
sort(B.begin(), B.end());
std::vector<int> c;
set_symmetric_difference(A.begin(), A.end(), 
                         B.begin(), B.end(), std::back_inserter(c));
return c; 
```

这产生

> 21 43 76 78 87 98 123 234 312 342 645 654 756 876

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T09:10:47.947

当我运行您的代码时，我从向量迭代器中得到一个异常，该异常不可递增。我认为问题出在这里：

`vector c(A.size() < B.size() ? B.size() : A.size());`

我将其更改为：

`vector c(A.size() + B.size());`

并毫无例外地运行它。我也得到与你写的相同的数字（正确的数字）。

# python - 连接列表中的元组

> ID：11373584
> 
> 赞同：1
> 
> 时间：2012-07-07T08:44:20.850
> 
> 标签：python

我想加入列表中的一组元组。

例如，

```
[(1, 2, 3), (1, 2, 4), (1, 2, 5)] 
```

会成为

```
[123, 124, 125] 

(or ['123', '124', '125'] if it must become a string) 
```

我不知道如何做到这一点，并且搜索几乎没有用处。

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T08:56:43.790

在 reduce 周围使用这个包装器将处理任何非零长度的元组：

```
>>> combinedigits = lambda seq : reduce(lambda a,b:a*10+b, seq)
>>> combinedigits((1,2,3))
123 
```

使用 map 将每个元组传递给 combinedigits 函数：

```
>>> data = [(1, 2, 3), (1, 2, 4), (1, 2, 5), (1,2,3,4,5,6,7,9)]
>>> map(combinedigits, data)
[123, 124, 125, 12345679] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T08:47:35.137

```
>>> bs = [(1, 2, 3), (1, 2, 4), (1, 2, 5)]

>>> ["".join(map(str, b)) for b in bs]
['123', '124', '125'] 
```

如果结果必须是数字，则用于`int()`转换

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-07T08:48:55.750

你可以试试这个：

```
>>> [int(''.join(str(v) for v in val)) for val in [(1, 2, 3), (1, 2, 4), (1, 2, 5)]]
[123, 124, 125]
>>> 
```

请注意，如果您希望它们作为字符串，则无需将它们转换为`int`.

# xquery - 有没有办法对提取的记录进行编号。

> ID：11373586
> 
> 赞同：1
> 
> 时间：2012-07-07T08:44:31.077
> 
> 标签：xquery

我需要从我的关系数据库中提取数据作为 XML，并且我需要为我提取的每条记录分配一个数字。我编写了以下 XQuery ...

```
<myRecords> {
    let $i := 0
    for $Territories in collection("Northwind.dbo.Territories")/Territories
    let $i := $i + 1
    return
        <territory rec_count="{$i}">
            {$Territories/TerritoryDescription/text()}
        </territory>
} </myRecords> 
```

...我没有得到预期的结果：

```
<myRecords>
    <territory rec_count="1">Westboro</territory>
    <territory rec_count="1">Bedford</territory>
    <territory rec_count="1">Georgetown</territory>
… 
```

记录号不增加。为什么？

XQuery 是一种没有副作用的函数式语言——例如，您不能像在 Java 或 C# 中那样在 XQuery 中真正创建状态概念。在某些情况下，您可以使用递归函数模拟状态，但要解决此问题，有一个更简单的解决方案：您可以使用位置变量。这是 XQuery：

```
<myRecords> {
    for $Territories at $i in collection("Northwind.dbo.Territories")/Territories
    return
        <territory rec_count="{$i}">
            {$Territories/TerritoryDescription/text()}
        </territory>
} </myRecords> 
```

这是（希望的）结果：

```
<myRecords>
    <territory rec_count="1">Westboro</territory>
    <territory rec_count="2">Bedford</territory>
    <territory rec_count="3">Georgetow</territory>
… 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T01:06:28.527

为了给 Dimitre 的回答添加一点内容，这里是如何做你想做的事情：

```
<myRecords> {
  for $Territories at $i in collection("Northwind.dbo.Territories")/Territories
  return
    <territory rec_count="{$i}">
      {$Territories/TerritoryDescription/text()}
    </territory>
} </myRecords> 
```

正如 Dimitre 所指出的， for 中的 let 不会在每次迭代时保留值。for 的 at 子句将满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T16:06:41.903

> ```
> let $i := 0
>      for $Territories in collection("Northwind.dbo.Territories")/Territories
>      let $i := $i + 1
>      return 
> ```

在内部创建`let`了一个名为的*新*变量`i`。

它被定义为具有*外部* `$i`加一的值：即`0 + 1`，它给出`1`。

# php - 从 PHP Switch 调用变量

> ID：11373589
> 
> 赞同：0
> 
> 时间：2012-07-07T08:45:08.973
> 
> 标签：php, sqlite

我可以将我的文档上传到我的主要测试目录。但我想调出我的变量staffNo 并将其放在特定的staffNo 目录中。但是，即使我已经为我的输入声明了合适的名称，我也无法解析出变量。

例如：

**员工页面**

```
$staffNo = 1;
<form id="Staff" name="Staff" method="post" action="upload.php" enctype="multipart/form-data">

//My staffno variable
<input type="hidden" id="staffNo" name="staffNo" value="<?php echo $staffNo ?>"/>

//Upload document
<input name="upload" id="upload" type="file"/>
<input type="hidden" name="upload" value="upload"/>

//Submit button
<input type="submit" name="submit" value="Submit">
</form> 
```

**上传.php**

```
switch($_POST['submit']) 
{
case 'Submit':
    if ($_FILES["upload"]["error"] > 0)
    {
    echo "Error: " . $_FILES["upload"]["error"] . "<br />";
    }
    else
    {
    echo "Upload: " . $_FILES["upload"]["name"] . "<br />";
    echo "Type: " . $_FILES["upload"]["type"] . "<br />";
    echo "Stored in: " . $_FILES["upload"]["tmp_name"];

    move_uploaded_file($_FILES["upload"]["tmp_name"],
  "documents/"."staffNo"."/".$_FILES["upload"]["name"]);

            echo "Stored in: " ."./documents/"."staffNo"."/".  $_FILES["upload"]["name"];
}

break;

case 'others':
break;

default; 
```

我的 staffNo 变量无法调用，即使它已经在表格下。我在哪里做错了吗？而且我还想为staffNo创建一个新文件夹，如果里面没有的话。但现在基本人员没有变数是无法呼唤出来的。好心提醒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T10:31:30.203

我已经修复了您提交的 upload.php 中的几个错误。您需要将隐藏字段的值分配给变量： `$staffNo = $_POST['staffNo'];`

上传.php

```
switch($_POST['submit']) 
{
    case 'Submit':
        if ($_FILES["upload"]["error"] > 0)
        {
            echo "Error: " . $_FILES["upload"]["error"] . "<br />";
        }
        else
        {
            $staffNo = $_POST['staffNo']; // preform validation here
            echo "Upload: " . $_FILES["upload"]["name"] . "<br />";
            echo "Type: " . $_FILES["upload"]["type"] . "<br />";
            echo "Stored in: " . $_FILES["upload"]["tmp_name"];
            // check if directory exists
            if(!is_dir("documents/".$staffNo)){
                // if it doesn't - create it
                mkdir("documents/".$staffNo);
            }
            move_uploaded_file($_FILES["upload"]["tmp_name"],
            "documents/".$staffNo."/".$_FILES["upload"]["name"]);
            echo "Stored in: " ."./documents/".$staffNo."/".  $_FILES["upload"]["name"];
        }

    break;

    case 'others':
    break;

    default;
} 
```

您可能应该验证`staffNo`以防止通过例如 firebug 更改其值，并弄乱上传路径。

# ruby-on-rails - ror 中的新布局与 MVC

> ID：11373591
> 
> 赞同：0
> 
> 时间：2012-07-07T08:45:25.140
> 
> 标签：ruby-on-rails

我正在学习RoR，我想知道如果我想做一个像google主页一样的页面，我必须使用Model+Controller+view吗？或者我可以使用新的布局（这是因为我不需要任何数据库或实体来保存搜索查询）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T09:58:59.483

**您不需要生成模型**，但您仍然需要控制器和相关视图。如果你想要一堆静态页面，你可能有一个 Pages 控制器，在那里你可以为你想要的不同页面设置方法。将这些方法中的每一个与同名的视图匹配。

布局更像是基本视图模板。一个简单的应用程序可能只有一种布局。

有关详细信息，请参阅[Rails 中的布局和渲染](http://guides.rubyonrails.org/layouts_and_rendering.html)。

首先，如果您认真学习 Rails，我建议您阅读 Hartle 的 Rails 教程之类的教程： [http](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book) ://ruby.railstutorial.org/ruby-on-rails-tutorial-book - 它会带您完成所有像这样的基础知识等等。

# iphone - 在 iOS 上创建类似于饼图的东西

> ID：11373592
> 
> 赞同：0
> 
> 时间：2012-07-07T08:46:11.960
> 
> 标签：iphone, objective-c, ios, xcode, pie-chart

对于一个项目，我必须在“看起来”像饼图但实际上不是的东西上表示数据。我必须将数据放在带有“馅饼”块的圆圈上，但圆圈宽度和透明度不同。

有什么东西可以让我创建这样的图形吗？

编辑：

它必须能够看起来像这样：

[http://i.stack.imgur.com/i2BjS.jpg](http://i.stack.imgur.com/i2BjS.jpg)

甚至可能是黑色圆圈中的一些天气信息.. 这一切都可能与情节核心的对象有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T08:51:59.133

当然是。您可以为此目的使用 coreplot。检查这个： [http](http://code.google.com/p/core-plot/wiki/PlotExamples) ://code.google.com/p/core-plot/wiki/PlotExamples 。根据我的经验，它是用于图表的最佳框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-26T07:58:03.803

您可能需要参考[HUChart](http://github.com/hugo53/HUChart)。它适用于半圆形图表，但您可以根据您的目的自定义源代码，或者更简单，您可以打开一个问题并请求作者支持您想要的图表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-10T07:27:14.993

试试这个它对我有用，

您可以在 GitHub 中使用[dilipajm](https://github.com/dilipajm/piechart)的 dlpiechart 类，然后根据您的目的修改属性和变量。希望它有用。

# java - Java - 是否可以通过指纹验证特定的“硬编码”自签名证书，并忽略主机名匹配？

> ID：11373593
> 
> 赞同：1
> 
> 时间：2012-07-07T08:46:21.700
> 
> 标签：java, ssl, verification, hostname, self-signed

这是[这个问题](https://stackoverflow.com/questions/11368612/java-asymmetric-encryption-of-traffic-with-pre-shared-public-keys-and-without)的延续（决定把它分开，以防将来有人会研究类似的问题）

基本上，设置是applet 和servlet 通信。

Servlet 的证书是自签名并硬编码到小程序中的。

现在，假设我走“在内存中创建信任库，将硬编码证书导入其中”路线。

**问题：servlet 的 IP/主机名可能会在没有警告的情况下更改**

如何使小程序不验证此特定证书的主机名，但仍检查其他内容，例如指纹等？

其他注意事项：

*   我宁愿避免让我的小程序失去验证其他证书的主机名的能力。

*   在处理“硬编码”证书时，我还想避免任何浏览器弹出窗口和请求用户输入（我们自己把它放在那里，当然我们相信它^_^）

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T10:25:27.400

主机名检查仅通过 HTTPS 进行。如果您直接使用 SSL，则没有问题。

# java - Java - 使用 Object 参数实现接口

> ID：11373595
> 
> 赞同：4
> 
> 时间：2012-07-07T08:46:29.610
> 
> 标签：java, graph

我正在实现一个Java Graph library（学习......）。因此，我写了一个界面

```
public interface DigraphInterface {
    public boolean isEmpty();
    public int size();
    public boolean isAdjacent(Object v, Object w);
    public void insertEdge(Object v, Object w);
    public void insertVertex(Object v);
    public void eraseEdge(Object o, Object w);
    public void eraseVertex(Object v);
    public void printDetails();
} 
```

作为实现的第一步，我正在编写实现上述接口的 Digraph 类。但是，为了简单起见，我希望节点标识符为整数，因此我将函数定义为

```
 @Override
    public boolean isAdjacent(int v, int w) {
            // TODO Auto-generated method stub
            return adjList[v].contains(w) || adjList[w].contains(v);
    } 
```

但是，我收到错误，我需要用超类型覆盖或实现方法。有人可以向我解释这种行为的基础。此外，如果有人可以解释，我们如何设计允许灵活添加任何类型组件的库。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T08:51:07.633

你的界面说：

```
public boolean isAdjacent(Object v, Object w); 
```

你实现：

```
public boolean isAdjacent(int v, int w) 
```

对于java，这没有相同的签名，因此不是相同的方法。您可以做的是使用泛型，这取决于您需要什么，但是在这种情况下，您可以执行以下操作：

```
public interface DigraphInterface<T> {
    ...
    public boolean isAdjacent(T v, T w);
    ...
} 
```

你的实现可能是：

```
public class DefaultDigraph<Integer> {
    ...
    public boolean isAdjacent(Integer v, Integer w) {
        ...
    }
    ...
} 
```

当然你需要小心，因为`Integer`可以为空，而`int`不是。因此，在自动拆箱之前，对参数进行空检查是一个好主意。

# php - 需要使用 PHP 将 MySQL 数据块转换为超链接

> ID：11373597
> 
> 赞同：1
> 
> 时间：2012-07-07T08:46:55.153
> 
> 标签：php, mysql, hyperlink, spaces

我显示了一个表格，它将文件上传位置 ( `DocLoc`) 转换为超链接。但是，由于文件名中有空格，因此超链接会将它们删除。如果我显示`docloc`它显示的列：

> 上传/minegem/GUI-MGEM-001 Bullet Programming.pdf

但是，当我单击超链接时，我得到

> 上传/minegem/GUI-MGEM-001

如何让超链接添加文件名的其余部分，以便我可以从链接打开文件？

```
// Printing table rows
while($row = mysql_fetch_array($result))
{
    $docname=$row['DocName'];
    $docver=$row['DocVer'];
    $doctype=$row['DocType'];
    $docloc=$row['DocLoc'];

    echo "<tr>";
    echo "<td><a href=/uploading/$docloc>$docname</a></td>";
    echo "<td>$docver</td>";
    echo
    echo "</tr>";
}
echo "</table>"; 
```

对不起，如果这很愚蠢，我在这里做了一些谷歌搜索和阅读，我很挣扎。大约三天前我才开始学习 PHP、MySQL 和 HTML。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T08:48:29.240

[使用urlencode](http://php.net/manual/en/function.urlencode.php)对 URL 进行编码：

```
echo '<td><a href="/uploading/'.urlencode($docloc).'">'.$docname.'</a></td>'; 
```

# apache - 安装 Grails activiti 插件后 Grails 应用程序未运行

> ID：11373599
> 
> 赞同：0
> 
> 时间：2012-07-07T08:47:04.540
> 
> 标签：apache, tomcat, grails, grails-plugin, activiti

我在[这里](http://grails.org/plugin/activiti)找到了 grails 活动插件，并按照此[文档](http://code.google.com/p/grails-activiti-plugin/)开始使用此插件。

在安装插件后运行应用程序时出现以下错误

```
 | Running Grails application
            Activiti Process Engine with Spring Security Initialization ...
            Activiti Process Engine Initialization...

            Configuring Spring Security Core ...
            ... finished configuring Spring Security Core

            | Error 2012-07-07 14:02:45,500 [pool-7-thread-1] ERROR context.GrailsContextLoader  - Error executing bootstraps: Error creating bean with name 'transactionMana
            erPostProcessor': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'tran
            actionManager': Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.fac
            ory.BeanCreationException: Error creating bean with name 'sessionFactory': Cannot resolve reference to bean 'hibernateProperties' while setting bean property 'hi
            ernateProperties'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'hibernateProperties': Cannot resol
            e reference to bean 'dialectDetector' while setting bean property 'properties' with key [hibernate.dialect]; nested exception is org.springframework.beans.factor
            .BeanCreationException: Error creating bean with name 'dialectDetector': Invocation of init method failed; nested exception is org.springframework.jdbc.support.M
            taDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionF
            ctory (Connection is broken: "java.net.ConnectException: Connection refused: connect: localhost" [90067-164])
            Message: Error creating bean with name 'transactionManagerPostProcessor': Initialization of bean failed; nested exception is org.springframework.beans.factory.Be
            nCreationException: Error creating bean with name 'transactionManager': Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFac
            ory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Cannot resolve reference to be
            n 'hibernateProperties' while setting bean property 'hibernateProperties'; nested exception is org.springframework.beans.factory.BeanCreationException: Error cre
            ting bean with name 'hibernateProperties': Cannot resolve reference to bean 'dialectDetector' while setting bean property 'properties' with key [hibernate.dialec
            ]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dialectDetector': Invocation of init method failed
             nested exception is org.springframework.jdbc.support.MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.db
            p.SQLNestedException: Cannot create PoolableConnectionFactory (Connection is broken: "java.net.ConnectException: Connection refused: connect: localhost" [90067-1
            4])
               Line | Method
            ->> 303 | innerRun in java.util.concurrent.FutureTask$Sync
            - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
            |   138 | run      in java.util.concurrent.FutureTask
            |   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
            |   908 | run      in     ''
            ^   662 | run . .  in java.lang.Thread

            Caused by BeanCreationException: Error creating bean with name 'transactionManager': Cannot resolve reference to bean 'sessionFactory' while setting bean propert
             'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Cannot resolve re
            erence to bean 'hibernateProperties' while setting bean property 'hibernateProperties'; nested exception is org.springframework.beans.factory.BeanCreationExcepti
            n: Error creating bean with name 'hibernateProperties': Cannot resolve reference to bean 'dialectDetector' while setting bean property 'properties' with key [hib
            rnate.dialect]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dialectDetector': Invocation of init
            ethod failed; nested exception is org.springframework.jdbc.support.MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apac
            e.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection is broken: "java.net.ConnectException: Connection refused: connect: localh
            st" [90067-164])
            ->> 303 | innerRun in java.util.concurrent.FutureTask$Sync
            - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
            |   138 | run      in java.util.concurrent.FutureTask
            |   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
            |   908 | run      in     ''
            ^   662 | run . .  in java.lang.Thread

            Caused by BeanCreationException: Error creating bean with name 'sessionFactory': Cannot resolve reference to bean 'hibernateProperties' while setting bean proper
            y 'hibernateProperties'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'hibernateProperties': Cannot
            resolve reference to bean 'dialectDetector' while setting bean property 'properties' with key [hibernate.dialect]; nested exception is org.springframework.beans.
            actory.BeanCreationException: Error creating bean with name 'dialectDetector': Invocation of init method failed; nested exception is org.springframework.jdbc.sup
            ort.MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConne
            tionFactory (Connection is broken: "java.net.ConnectException: Connection refused: connect: localhost" [90067-164])
            ->> 303 | innerRun in java.util.concurrent.FutureTask$Sync
            - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
            |   138 | run      in java.util.concurrent.FutureTask
            |   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
            |   908 | run      in     ''
            ^   662 | run . .  in java.lang.Thread

            Caused by BeanCreationException: Error creating bean with name 'hibernateProperties': Cannot resolve reference to bean 'dialectDetector' while setting bean prope
            ty 'properties' with key [hibernate.dialect]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dialect
            etector': Invocation of init method failed; nested exception is org.springframework.jdbc.support.MetaDataAccessException: Error while extracting DatabaseMetaData
             nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection is broken: "java.net.ConnectException: Conne
            tion refused: connect: localhost" [90067-164])
            ->> 303 | innerRun in java.util.concurrent.FutureTask$Sync
            - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
            |   138 | run      in java.util.concurrent.FutureTask
            |   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
            |   908 | run      in     ''
            ^   662 | run . .  in java.lang.Thread

            Caused by BeanCreationException: Error creating bean with name 'dialectDetector': Invocation of init method failed; nested exception is org.springframework.jdbc.
            upport.MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableCo
            nectionFactory (Connection is broken: "java.net.ConnectException: Connection refused: connect: localhost" [90067-164])
            ->> 303 | innerRun in java.util.concurrent.FutureTask$Sync
            - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
            |   138 | run      in java.util.concurrent.FutureTask
            |   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
            |   908 | run      in     ''
            ^   662 | run . .  in java.lang.Thread

            Caused by MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create Poolabl
            ConnectionFactory (Connection is broken: "java.net.ConnectException: Connection refused: connect: localhost" [90067-164])
            ->> 303 | innerRun in java.util.concurrent.FutureTask$Sync
            - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
            |   138 | run      in java.util.concurrent.FutureTask
            |   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
            |   908 | run      in     ''
            ^   662 | run . .  in java.lang.Thread

            Caused by SQLNestedException: Cannot create PoolableConnectionFactory (Connection is broken: "java.net.ConnectException: Connection refused: connect: localhost"
            90067-164])
            ->> 1549 | createPoolableConnectionFactory in org.apache.commons.dbcp.BasicDataSource
            - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
            |   1388 | createDataSource in     ''
            |   1044 | getConnection in     ''
            |   303 | innerRun in java.util.concurrent.FutureTask$Sync
            |   138 | run . .  in java.util.concurrent.FutureTask
            |   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
            |   908 | run . .  in     ''
            ^   662 | run      in java.lang.Thread

            Caused by JdbcSQLException: Connection is broken: "java.net.ConnectException: Connection refused: connect: localhost" [90067-164]
            ->> 329 | getJdbcSQLException in org.h2.message.DbException
            - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
            |   158 | get      in     ''
            |   397 | connectServer in org.h2.engine.SessionRemote
            |   287 | connectEmbeddedOrServer in     ''
            |   110 | <init> . in org.h2.jdbc.JdbcConnection
            |    94 | <init>   in     ''
            |    72 | connect  in org.h2.Driver
            |    38 | createConnection in org.apache.commons.dbcp.DriverConnectionFactory
            |   582 | makeObject in org.apache.commons.dbcp.PoolableConnectionFactory
            |   1556 | validateConnectionFactory in org.apache.commons.dbcp.BasicDataSource
            |   1545 | createPoolableConnectionFactory in     ''
            |   1388 | createDataSource in     ''
            |   1044 | getConnection in     ''
            |   303 | innerRun in java.util.concurrent.FutureTask$Sync
            |   138 | run . .  in java.util.concurrent.FutureTask
            |   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
            |   908 | run . .  in     ''
            ^   662 | run      in java.lang.Thread

            Caused by ConnectException: Connection refused: connect
            ->> 351 | doConnect in java.net.PlainSocketImpl
            - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
            |   213 | connectToAddress in     ''
            |   200 | connect  in     ''
            |   366 | connect  in java.net.SocksSocketImpl
            |   529 | connect  in java.net.Socket
            |   119 | createSocket in org.h2.util.NetUtils
            |   100 | createSocket in     ''
            |    93 | initTransfer in org.h2.engine.SessionRemote
            |   393 | connectServer in     ''
            |   287 | connectEmbeddedOrServer in     ''
            |   110 | <init> . in org.h2.jdbc.JdbcConnection
            |    94 | <init>   in     ''
            |    72 | connect  in org.h2.Driver
            |    38 | createConnection in org.apache.commons.dbcp.DriverConnectionFactory
            |   582 | makeObject in org.apache.commons.dbcp.PoolableConnectionFactory
            |   1556 | validateConnectionFactory in org.apache.commons.dbcp.BasicDataSource
            |   1545 | createPoolableConnectionFactory in     ''
            |   1388 | createDataSource in     ''
            |   1044 | getConnection in     ''
            |   303 | innerRun in java.util.concurrent.FutureTask$Sync
            |   138 | run . .  in java.util.concurrent.FutureTask
            |   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
            |   908 | run . .  in     ''
            ^   662 | run      in java.lang.Thread 
```

是什么导致了这个错误？如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T04:05:38.573

感谢您试用插件。

在运行 grails 应用程序之前，您需要以服务器模式启动 H2 数据库。从 5.9 版本开始，插件将使用内存 H2 数据库运行。

[请将您未来的问题发布到http://groups.google.com/group/grails-activiti-plugin](http://groups.google.com/group/grails-activiti-plugin)的插件讨论论坛以获得更快的响应。

最好的问候， Chee Kin

Grails Activiti 插件创建者

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T07:46:24.803

java -jar 您的 h2 数据库 jar，在您运行 grails-app 之前

# django - 在 django 模板中使用 spaceless

> ID：11373601
> 
> 赞同：8
> 
> 时间：2012-07-07T08:47:14.523
> 
> 标签：django, django-templates

我有以下代码：

```
 {% for item in profile.jobs.all %}
        {% if not forloop.first %}, {% endif %}{{ item }}
    {% endfor %} 
```

这会产生如下内容：

```
"Programmer , Plumber , Philosopher" 
```

我不想要逗号之前的前导空格，但我能够摆脱它的唯一方法是将它压缩到一行，这会降低可读性：

```
{% for item in profile.jobs.all %}{% if not forloop.first %}, {% endif %}{{ item }}{% endfor %} 
```

有没有更好的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T10:50:31.633

{% spaceless %} 只去除 html 标签之间的空格。

您可以使用 {{ value|join:", " }}

或者我相信这会起作用：

```
{% for item in profile.jobs.all %}
    {% if not forloop.first %}, {% endif %}
    {{ item }}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T08:48:25.567

试试 {% spaceless %} 模板标签：[https ://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#spaceless](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#spaceless)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T10:57:53.523

如果你使用类似的东西怎么办

```
{% if profile.jobs.count != 1 %}
    {% for item in profile.jobs.all %}
        {{ item }}{% if not forloop.last %}, {% endif %}
    {% endfor %}
{% else %}
    {{item}}
{% endif %} 
```

# windows - 在不使用 GetDiskFreeSpace 的情况下确定卷簇大小

> ID：11373603
> 
> 赞同：-3
> 
> 时间：2012-07-07T08:47:28.293
> 
> 标签：windows, winapi, filesystems

我想以编程方式确定安装在 Windows 系统上的卷（又名文件系统）的集群（又名分配单元）大小。由于各种原因，我想找到一个*不*使用`GetDiskFreeSpace()`.

是否有任何 FSCTL_xxx 或 IOCTL_xxx 请求可用于此目的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T06:00:00.443

您需要调用[`NtQueryVolumeInformationFile`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff567070.aspx)驻留在您的卷上的文件的句柄，请求`FileFsSizeInformation`. 您应该能够通过

```
GetProcAddress(GetModuleHandle(TEXT("ntdll.dll")),"NtQueryVolumeInformationFile") 
```

生成的[`FILE_FS_SIZE_INFORMATION`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff540282.aspx)结构将具有一个`SectorsPerAllocationUnit`值和一个`BytesPerSector`可用的值，当乘以它时，将为您提供分配单元（集群）的大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T07:13:42.780

您可以将 DeviceIoControl 与`IOCTL_STORAGE_QUERY_PROPERTY`. 在输入时，将`PropertyId`结构中的`STORAGE_PROPERTY_QUERY`设置为`StorageAccessAlignmentProperty`。

这将为您提供一个[`STORAGE_ACCESS_ALIGNMENT_DESCRIPTOR`](http://msdn.microsoft.com/en-us/library/windows/desktop/ff800831.aspx)，其中包含`BytesPerLogicalSector`和的成员`BytesPerPhysicalSector`。链接的参考页面包括用于检索和显示设备的逻辑/物理扇区大小的演示代码。

# module - Playframework 1.2.5 自定义模块从未命中

> ID：11373606
> 
> 赞同：0
> 
> 时间：2012-07-07T08:47:35.507
> 
> 标签：module, playframework

脚步：

1.  **播放新模块 firstmodule**

2.  更新了模块的**play.plugins**文件以包含

    ```
    10:play.modules.firstmodule.MyPlugin 
    ```

3.  创建**MyPlugin**类：

    ```
    package play.modules.firstmodule;

    import play.Logger;
    import play.PlayPlugin;

    public class MyPlugin extends PlayPlugin {
        @Override
        public void onLoad() {
            Logger.info("hello");
        }

        @Override
        public void onApplicationStart() {
            Logger.info("hello");
        }

        @Override
        public void onRoutesLoaded() {
            Logger.info("hello");
        }
    } 
    ```

4.  **玩构建模块**

5.  将模块添加到主项目依赖项

    ```
    require:
        - play 1.2.5
        - customModules -> firstmodule

    repositories:
        - playCustomModules:
            type:       local
            artifact:   c:\github\firstmodule\dist\firstmodule-0.1.zip
            contains:
                - customModules -> * 
    ```

6.  **play deps**正确解析所有依赖项

7.  **玩跑**

服务器启动，我点击任何页面，但从未打印日志消息“hello”。是什么赋予了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-12T19:07:59.740

成功了吗？

我还必须将相同的`play.plugins`文件添加到主`proyect /conf`目录以使其工作。

# python - 将 matplotlib 文件保存到目录

> ID：11373610
> 
> 赞同：47
> 
> 时间：2012-07-07T08:48:14.960
> 
> 标签：python, matplotlib

这是生成绘图图像并将其保存在与代码相同的目录中的简单代码。现在，有没有办法可以将它保存在选择的目录中？

```
import matplotlib
import matplotlib.pyplot as plt

fig = plt.figure()
ax = fig.add_subplot(111)
ax.plot(range(100))

fig.savefig('graph.png') 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2015-08-03T22:20:14.527

如果要保存到的目录是工作目录的子目录，只需在文件名前指定相对路径：

```
 fig.savefig('Sub Directory/graph.png') 
```

如果您希望使用绝对路径，请导入[os](https://docs.python.org/2/library/os.path.html)模块：

```
 import os
    my_path = os.path.abspath(__file__) # Figures out the absolute path for you in case your working directory moves around.
    ...
    fig.savefig(my_path + '/Sub Directory/graph.png') 
```

如果不想担心子目录名前面的斜杠，可以智能加入路径如下：

```
 import os
    my_path = os.path.abspath(__file__) # Figures out the absolute path for you in case your working directory moves around.
    my_file = 'graph.png'
    ...
    fig.savefig(os.path.join(my_path, my_file)) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-07T08:56:07.440

根据[文档](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.savefig) `savefig`接受文件路径，因此您只需要指定完整（或相对）路径而不是文件名。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-12-06T15:55:20.300

这是将绘图保存到所选目录的一段代码。如果目录不存在，则创建它。

```
import os
import matplotlib.pyplot as plt

script_dir = os.path.dirname(__file__)
results_dir = os.path.join(script_dir, 'Results/')
sample_file_name = "sample"

if not os.path.isdir(results_dir):
    os.makedirs(results_dir)

plt.plot([1,2,3,4])
plt.ylabel('some numbers')
plt.savefig(results_dir + sample_file_name) 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-08-04T12:56:53.993

除了已经给出的答案，如果你想创建一个新目录，你可以使用这个函数：

```
def mkdir_p(mypath):
    '''Creates a directory. equivalent to using mkdir -p on the command line'''

    from errno import EEXIST
    from os import makedirs,path

    try:
        makedirs(mypath)
    except OSError as exc: # Python >2.5
        if exc.errno == EEXIST and path.isdir(mypath):
            pass
        else: raise 
```

接着：

```
import matplotlib
import matplotlib.pyplot as plt

fig = plt.figure()
ax = fig.add_subplot(111)
ax.plot(range(100))

# Create new directory
output_dir = "some/new/directory"
mkdir_p(output_dir)

fig.savefig('{}/graph.png'.format(output_dir)) 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-05-06T15:59:12.997

最**简单的方法**如下：

* * *

```
save_results_to = '/Users/S/Desktop/Results/'
plt.savefig(save_results_to + 'image.png', dpi = 300) 
```

* * *

图像将保存在`save_results_to`具有名称的目录中`image.png`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-05-02T09:47:37.223

这是一个使用带有 Sublime Text 2 编辑器的 Python 版本 2.7.10 保存到目录（外部 USB 驱动器）的简单示例：

```
import numpy as np 
import matplotlib.pyplot as plt

X = np.linspace(-np.pi, np.pi, 256, endpoint = True)
C, S = np.cos(X), np.sin(X)

plt.plot(X, C, color = "blue", linewidth = 1.0, linestyle = "-")
plt.plot(X, S, color = "red", linewidth = 1.0, linestyle = "-")

plt.savefig("/Volumes/seagate/temp_swap/sin_cos_2.png", dpi = 72) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-02-23T17:33:08.223

您可以使用以下代码

```
name ='mypic'
plt.savefig('path_to_file/{}'.format(name)) 
```

如果要保存在代码所在的同一文件夹中，请忽略 path_to_file 并使用名称进行格式化。如果您在 python 脚本之外的仅一级有文件夹名称*“图像” ，则可以使用，*

```
name ='mypic'
plt.savefig('Images/{}'.format(name)) 
```

保存的默认文件类型为*“.png”*文件格式。如果要保存在循环中，则可以为每个文件使用唯一名称，例如 for 循环的计数器。如果我是柜台，

```
plt.savefig('Images/{}'.format(i)) 
```

希望这可以帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-01-21T18:36:36.317

最简单的方法：

```
plt.savefig( r'root path' +  str(variable)  + '.pdf' ) 
```

在这个例子中，我还创建了一个文件格式并将一个变量作为字符串。

'r' 代表根。

例如 ：

```
plt.savefig( r'D:\a\b\c' +  str(v)  + '.pdf' ) 
```

请享用 ！！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-12-31T01:44:22.383

您只需将文件路径（目录）放在图像名称之前。例子：

```
fig.savefig('/home/user/Documents/graph.png') 
```

其他示例：

```
fig.savefig('/home/user/Downloads/MyImage.png') 
```

# facebook - 最近的帖子看不到 Wordpress 评论框

> ID：11373611
> 
> 赞同：1
> 
> 时间：2012-07-07T08:48:20.720
> 
> 标签：facebook, wordpress

我在为 Wordpress 集成 Facebook 社交插件时遇到问题。我为我的帖子激活了 Facebook 评论，但这个框只出现在一些帖子上。

例如：

*   [http://www.fredskitchen.fr/potatoes/](http://www.fredskitchen.fr/potatoes/)这里没有评论框
*   [http://www.fredskitchen.fr/margarita/](http://www.fredskitchen.fr/margarita/)带评论框

我不明白为什么我有这种奇怪的行为。插件中的其他所有内容都可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T11:36:39.160

检查您的 Wordpress 设置以确保默认情况下打开评论。

/wp-admin/options-discussion.php

`[ ]`允许人们对新文章发表评论
[（这些设置可能会被个别文章覆盖。）]

# iphone - Interface Builder 文件中的未知类 CPTGraphHostingView

> ID：11373618
> 
> 赞同：2
> 
> 时间：2012-07-07T08:49:31.483
> 
> 标签：iphone, objective-c, ios, ipad, core-plot

我正在使用新的核心情节版本。我陷入了这个错误。我在stackoverflow上搜索并解决了许多相同的问题，但没有找到解决方案。我想绘制条形图，我已经完成了显示条形图所需的所有必要设置和编码，但陷入了这个错误。我已经在 XIB 端查看了 CPTGraphHostingView。是否设置了其他链接器标志，还写了 barChartView.hostedGraph = barChart。Target Memembership 选项也被选中。如果我遗漏了什么，请告诉我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-29T19:56:52.660

前提是您正确设置了项目中包含的核心图头文件和核心图库。这是我为解决问题所做的。

在您的 target`Build Settings`中，将链接器标志设置为：

```
-objC -force_load "core plot library name" 
```

`-all_load`如果您使用的是 4.2+ 版本，则不需要。

原因`-force_load`是`-all_loa`d 试图编译我在项目中拥有的所有其他库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-13T01:11:10.073

在 XCode 5.1 - 构建设置 - 链接器 - 其他链接器标志 - -ObjC

我有同样的错误，为我工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T17:41:58.227

您的标题搜索路径设置是否正确？[Core Plot wiki](http://code.google.com/p/core-plot/wiki/UsingCorePlotInApplications)上发布了说明。

# jquery - 一页淡入淡出过渡逻辑

> ID：11373619
> 
> 赞同：1
> 
> 时间：2012-07-07T08:49:33.557
> 
> 标签：jquery, arrays, logic

我正在为客户制作一个单页网站。有 3 个不同的菜单组，但在此示例中，我将其简化为一个菜单且内容较少。

我有这个导航：

```
 <nav>
        <ul id="main" class="toggle">
            <li><a id="design" href="#">DESIGN</a></li>
            <li><a id="contactus" href="#">CONTACT US</a></li>
            <li><a id="aboutus" href="#">ABOUT US</a></li>
            <li><a id="news" href="#">NEWS</a></li>
        </ul>
    </nav> 
```

像下面这样的 Div：

```
<div class="designcontent">
Design Content Here
</div>
<div class="aboutuscontent">
About us Content Here      
</div> 
```

因此，如果我单击 DESIGN，它将显示设计内容，然后如果我单击 ABOUT US，它将显示 aboutuscontent 等等。

我要一个简写代码

```
 $("#design").click(function(){
        $('.homecontent').fadeOut(500);
        $('.designcontent').delay(500).fadeIn(1000);
        return false;
        });

        $("#home").click(function(){
        $('.designcontent').fadeOut(500);
        $('.homecontent').delay(500).fadeIn(1000);
        return false;
        }); 
```

因为如果有很多页面，并且我的客户想要添加一个新页面，它会变得越来越复杂。

我在下面有这个 jQuery 代码来获取 id 并在 Array 中使用它们并在加载时隐藏内容：

```
$('#main li a').each(function(){
  liIds.push('.'+ $(this).attr('id')+'content');
  $(''+liIds).hide();   
}) 
```

我缺少的是，每次单击菜单时单击菜单链接并显示正确的内容。

我希望我的问题足够清楚，如果不是，我可以在 jsFiddle 上提供视觉示例。

感谢您花时间阅读我的问题

我的问题通过以下方式解决：

```
$("a").click(function(){
    var cls = $(this).attr('id')
     $('.' + cls + 'content').addClass('onpage');
    $('.onpage').fadeOut(500);
    $('.' + cls + 'content').delay(500).fadeIn(1000);
    return false;
}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T08:56:46.157

您可以使用类似的名称作为`id`锚点及其目标元素的`class`名称：

html:

```
<li><a id="design" href="#">DESIGN</a></li> 

<div class="design content">
   Design Content Here
</div> 
```

js：

```
$("ul li a").click(function(){
    var cls = $(this).attr('id')
    $(".content").fadeOut(500);
    $('.' + cls).delay(500).fadeIn(1000);
    return false;
}) 
```

[演示](http://jsfiddle.net/QuKhN/1/)

# css - 如何使文本重叠

> ID：11373624
> 
> 赞同：0
> 
> 时间：2012-07-07T08:50:38.130
> 
> 标签：css, overlap, css-position

我想让 2 DIV 水平重叠。我希望 DIV 内的内容也重叠。在下面的示例中，aaaaaaa 环绕块 A，预期的行为是让 aaaaaaa 从 div B 的左边框开始。我该如何实现呢？

```
<div id="A" style="float:left;position:relative; background: #987321; width: 100px; height: 300px; z-index:5; "></div>`
<div id="B" style=" background: #555; width: 400px; height: 400px; ">aaaaaaaaaa</div> 
```

[小提琴](http://jsfiddle.net/queto_putito/8kJJa/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T13:25:36.487

尝试这个：

### CSS

```
<style>
    div.a {
        width:      100px;
        height:     300px;
    }

    div.b {
        position:   relative;
        z-index:    0;
        width:      400px;
        height:     400px;
        margin-top: -300px;
        border:     1px solid red;
    }

    div.c {
        position:   relative;
        z-index:    1;
        height:     100%;
        border:     1px solid blue;
    }
</style> 
```

### HTML

```
<div class="a">
    <div class="c">div A's content</div>
    <div class="b">div B's content xxxxx</div>
</div> 
```

# java - dao层上的空指针异常

> ID：11373630
> 
> 赞同：1
> 
> 时间：2012-07-07T08:51:47.153
> 
> 标签：java, jdbc, nullpointerexception, dao

我已经开发了下面的程序，但是它抛出了空指针异常。

下面是模型类..

```
public class Circle {

    private int Id;
    public Circle(int id, String name) {
        super();
        Id = id;
        this.name = name;
    }
    private String name;
    public int getId() {
        return Id;
    }
    public void setId(int id) {
        Id = id;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }

} 
```

下面是dao类..

```
public class jdbcdaoimpl {
    public Circle getCircle(int circleId) 
        {   
        Circle circle = null;

        try
        {
        Class.forName("oracle.jdbc.driver.OracleDriver");
        Connection con=DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:xe","saral","saral");
        PreparedStatement stmt=con.prepareStatement("select * from CIRCLE where id = ?");
        stmt.setInt(1,circleId);
        ResultSet rset=stmt.executeQuery();
        while(rset.next())
        {
             circle= new Circle(circleId, rset.getString("name") );
        }       
        rset.close();
        stmt.close();
        con.close();
        }                   
        catch (Exception e)
        {
            e.printStackTrace();            
        }
        return circle;
    }
} 
```

最后是主要课程..

```
public class jdbcDemo {

    public static void main(String[] args) {
        Circle c = new jdbcdaoimpl().getCircle(1);
        System.out.println(c.getName());
    }

} 
```

请告知在执行主类时抛出空指针异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T08:54:16.350

您正在吞噬 DAO 方法中的所有异常。它返回`null`。`null`如果查询仅返回空结果，它也会返回。

您也无法`close`在`finally`. 您必须**传播**您的异常，而不是在不处理的情况下捕获它们。

```
public class JdbcDaoImpl
{
  public Circle getCircle(int circleId) {
    Connection con = null;
    try {
      Class.forName("oracle.jdbc.driver.OracleDriver");
      con = DriverManager.getConnection(
          "jdbc:oracle:thin:@localhost:1521:xe","saral","saral");
      final PreparedStatement stmt = con.prepareStatement(
          "select * from CIRCLE where id = ?");
      stmt.setInt(1,circleId);
      final ResultSet rset = stmt.executeQuery();
      if (rset.next()) return new Circle(circleId, rset.getString("name") );
      throw new RuntimeException("Result set is empty");
    }
    catch (RuntimeException e) { throw e; }
    catch (Exception e) { throw new RuntimeException(e); }
    finally { try { if (con != null) con.close(); } catch (Throwable t) {} }
  }
} 
```

# openid - 是否可以更改天蓝色表实体上的分区键？

> ID：11373631
> 
> 赞同：1
> 
> 时间：2012-07-07T08:51:54.750
> 
> 标签：openid, azure-table-storage

在我的网站上，用户将使用 Open ID 登录，我将使用声明标识符的哈希作为分区键将声明的标识符作为实体存储在 Azure 表中。

用户随后在站点上创建的工作项也使用分区键的相同哈希存储在 Azure 表中。从性能角度来看，这似乎很有用，因为一个用户总是会查询他们自己的分区键。

但是在我把自己画到一个角落之前，我怎样才能让用户改变他们的开放 id 提供者和声称的标识符？因为如果他们声称的 id 发生变化，则分区键的散列必须更改。我不能改变它，我可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T20:16:04.167

不，不可能更改表的分区键，因为这是识别实体的方式。

您将需要添加一个新实体并删除旧实体。

您可以尝试使用另一个分区键。

# shell - 从当前用户运行 Debian 软件包脚本中的一些命令

> ID：11373634
> 
> 赞同：2
> 
> 时间：2012-07-07T08:52:47.957
> 
> 标签：shell, package, debian

如何在我的 deb 包（preinst、postinst、prerm、postrm）的安装脚本中运行一些命令，而不是从 root 而是从当前用户（调用安装的用户）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T09:49:49.690

root 是当前用户。您永远不要期望软件包的安装是由`sudo`

您可以检查`SUDO_USER`可能已调用脚本的用户的环境变量，如果安装是从简单的上下文执行的`sudo dpkg -i`- sudo 可能尚未安装，因此安装可能已由 执行`su`，这意味着环境变量不会设置。

如果您想以该用户身份调用脚本，您只需反转 sudo - 即：

```
sudo -u $SUDO_USER -c <command to invoke> 
```

但您需要确保您正确了解调用脚本的用户——即 SUDO_USER 可能是 root！

但是，通常情况下，因为您可以在 Linux 系统上拥有任意数量的用户，所以您**不应该这样**做，因为它会使系统处于只有一个用户可以使用该软件包的状态。您应该以普通用户身份*在第一次调用时*创建状态/配置。

最后，不要指望 GUI，如果它只是作为 dpkg 交付，也不要指望安装终端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T09:49:59.363

你需要`root`为了安装一些东西。如果您安装每用户配置，通常应该为所有用户安装它们。

话虽如此，请查看真实与有效的 uid。

# cakephp - CakePHP 在任何页面的顶部显示“admi”

> ID：11373636
> 
> 赞同：0
> 
> 时间：2012-07-07T08:53:01.170
> 
> 标签：cakephp

我正在尝试处理一些奇怪的 CakePHP 行为。我在 core.php 中启用了“admin”前缀，现在我在任何页面的顶部都有“admi”...

```
admi<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head> 
```

从字面上看，它无处不在，在 layout@default.ctp 中没有任何痕迹。看起来像一些 CakePHP 错误，任何想法将不胜感激。

在 localhost、Apache 2.2.17、PHP 5.3.5、MySQL 5.1.63、Cake 2.o 上运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T13:32:36.573

找到了，“admi”在core.php的开头，我可能是我在那里更改“管理员前缀”时不小心添加的。

# c++ - glm 库 ext.hpp 编译问题（Xcode iOS）

> ID：11373637
> 
> 赞同：1
> 
> 时间：2012-07-07T08:53:08.767
> 
> 标签：c++, xcode, compiler-errors, glm-math

我正在尝试将`glm/ext.hpp`扩展标题包含到我的项目中。虽然`glm.hpp`可以毫不费力地包含在内，并且项目可以简单地构建，但该库的扩展会产生大量编译时错误。例如，有一些辅助的内联头文件 ( `.inl`) 带有一些引发错误的宏定义：

*   int_10_10_2.inl：语义问题

    ```
        GLM_FUNC_QUALIFIER 双字 uint10_10_10_2_cast
            (
                glm::vec4 常量 & v
            ) //-> 需要一个类或命名空间 | 预期的 ';' 在顶级声明符等之后

    ```

*   type_vec2.hpp：

    ```
            联合 {value_type x, r, s;}; //联合成员'x'有一个非平凡的复制构造函数..etc
            union {value_type y, g, t;};

    ```

冲突的构造可能是什么（提示分析哪些文件最有帮助）？有没有其他人成功地将 ext.hpp 包含在 Xcode 项目中？

# c - gdb：程序退出，代码为 030000000375

> ID：11373640
> 
> 赞同：11
> 
> 时间：2012-07-07T08:53:43.270
> 
> 标签：c, gdb, mingw, stack-overflow, segmentation-fault

我正在自学使用 gdb 并正在运行一些随机测试。值得一提的是，我在 Windows 7 x64 上使用便携式 MinGW 安装。我创建了一个我知道会导致堆栈溢出的程序，当我在 gdb 中运行它时，我首先得到两个 SIGSEGV 信号（毫不奇怪），然后它以代码 030000000375 退出（同样毫不奇怪）。

```
Program received signal SIGSEGV, Segmentation fault.
Program received signal SIGSEGV, Segmentation fault.
Program exited with code 030000000375. 
```

好奇心占了上风……那代码到底是什么？我用谷歌搜索，发现很少。

谢谢！

更新：作为参考，我在 Ubuntu 上尝试了相同的程序，结果略有不同：

```
Program received signal SIGSEGV, Segmentation fault.
Program terminated with signal SIGSEGV, Segmentation fault.
The program no longer exists. 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-09T14:44:10.627

`gdb`以八进制格式打印出退出代码。不明显，但由前导指示`0`。

`030000000375`十六进制也是如此`0xC00000FD`，这使得代码对于 Windows 程序员来说看起来更常见。

`0xC00000FD`是`STATUS_STACK_OVERFLOW`并且应该在 中定义`ntstatus.h`。

# android - 在 Android 中将视频从一个位置复制到另一个位置

> ID：11373642
> 
> 赞同：0
> 
> 时间：2012-07-07T08:54:12.963
> 
> 标签：android

我遇到了一个问题，我想将视频从一个位置复制/移动到 android 的 sdcard 内的另一个位置。有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T09:39:37.963

```
private String CopyFile(String srcPath,String destPath)
{
    String videoFileName = VIDEO_FILE_PREFIX + mCurrentQuestion.getQuestionId() + VIDEO_FILE_SUFFIX ;
    File source= new File(srcPath);
    File destination= new File(destPath+"/"+videoFileName);
    source.renameTo(destination);

    return destPath+"/"+videoFileName;
} 
```

# parsing - 解析器的性能：PEG vs LALR(1) 或 LL(k)

> ID：11373644
> 
> 赞同：16
> 
> 时间：2012-07-07T08:54:24.580
> 
> 标签：parsing, parser-generator, lalr, ll, peg

我已经看到一些声称优化的 PEG 解析器通常不能比优化的 LALR(1) 或 LL(k) 解析器快。（当然，解析的性能取决于特定的语法。）

我想知道 PEG 解析器是否有任何特定限制，无论是一般有效还是对于 PEG 语法的某些子集，这会使它们在性能方面不如 LALR(1) 或 LL(k)。

特别是，我对解析器生成器感兴趣，但假设在任何特定情况下都可以调整它们的输出以提高性能。我还假设解析器已经过优化，如果需要提高性能，可以稍微调整特定语法。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-07T09:52:57.667

[找到了一个关于 Packrat vs LALR parsing](https://stackoverflow.com/a/3800681/118478)的好答案。其中的一些引述：

> L(AL)R 解析器也是线性时间解析器。所以理论上，packrat 和 L(AL)R 解析器都不是“更快”的。
> 
> 当然，在实践中重要的是实施。L(AL)R 状态转换可以在很少的机器指令中执行（“在向量中查找令牌代码，获取下一个状态和动作”），因此它们在实践中可以非常快。
> 
> 一个观察：大多数语言前端不会花费大部分时间“解析”；相反，他们花费大量时间进行词法分析。优化那个......，解析器的速度并不重要。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-10-21T14:17:10.497

`PEG`与（默认）不同，解析器可以使用无限前瞻（同时通过 Packrat 保持平均线性解析时间）`LL(k)`，或者`LR(k)`使用有限前瞻的解析器，同时保持线性解析时间。

最近（2014-2015）`ANTLR4`进行了扩展以处理任意前瞻（如`PEG`），同时保持平均线性解析时间（据说比`packrat`算法更有效），但是这包含了`LR`解析算法的新扩展和变体（而不是默认`LR`算法）。

`packrat`解析器（以及 ,的相关解析器`LL`）`LR`不一定实用，但提供了解析的理论界限，因此可以进行比较。

但请注意，无限前瞻可用于在线性时间（例如 via`packrat`或`antlr`）解析语法/语言，而这些语法/语言无法通过甚至在非线性时间解析`LL(k)`，`LR(k)`因此了解**什么与什么比较**很重要。

# java - 如何在android中将按钮放在活动标题旁边？

> ID：11373646
> 
> 赞同：3
> 
> 时间：2012-07-07T08:54:45.550
> 
> 标签：java, android, android-layout

嗨，我想在 android 中将按钮放在活动标题旁边。我可以使用 setTitle() 更改文本，但我没有找到任何允许将按钮放在 Activity 标题旁边的东西。我正在使用安卓 4.0.3。有谁能够帮助我？

![在此处输入图像描述](../Images/8d99ed419b495f6c09f4a0917984f0a4.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T09:12:24.540

在您的项目名称 topbar.xml 中创建 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="40dp"
    android:orientation="vertical" 
    android:background="@android:color/white">

    <TextView 
        android:id="@+id/title_txt"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="MyTitle: NameOfUser"
        android:layout_centerVertical="true"
        android:textColor="@android:color/black"
        android:textStyle="bold"
        android:textSize="20sp"
        android:layout_marginLeft="20dp"/>

    <Button 
        android:id="@+id/back_btn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:text="Btn"
        android:textColor="@android:color/white"
        android:layout_marginLeft="5dp"
        android:layout_alignParentRight="true"/>
</RelativeLayout> 
```

只需编写以下内容即可将此布局添加到任何布局中：

```
<include layout="@layout/topbar"/> 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T09:04:15.547

您可以使用`custom title bar`，也可以将`no title theme`其用于 Activity 并将线性布局设置为 Activity 布局上方的子布局，因此您的 Activity*似乎有标题栏*。

1.  创建自定义标题栏：
    [edumobile.org](http://www.edumobile.org/android/android-programming-tutorials/creating-a-custom-title-bar/)
    [londatiga.net](http://www.londatiga.net/it/how-to-create-custom-window-title-in-android/)
2.  [隐藏应用程序的标题栏。](http://www.vogella.com/blog/2011/02/28/android-hidding-the-status-and-title-bar/)

# php - 如何在 joomla 1.7 中修改 url 链接

> ID：11373647
> 
> 赞同：2
> 
> 时间：2012-07-07T08:55:29.017
> 
> 标签：php, joomla, content-management-system

我正在使用 joomla 1.7 。我使用 joomla 添加了子菜单。但是当我单击子菜单链接时，它会重定向到 URL“www.xyz.com/2012-07-07/xyz”。我想删除此网址中的日期。请帮助我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T04:28:03.097

您需要创建另一个“菜单项别名”类型的菜单项。在别名字段中输入“xyz”。右侧“菜单项”有参数，这里需要选择菜单项2012-07-07/xyz。

不显示新创建的菜单。每当您单击 2012-07-07/xyz 时，它都会显示新创建菜单的别名 xyz。

# jsp - eclipse 和 netbeans 中都没有加载 validateJarFile

> ID：11373650
> 
> 赞同：0
> 
> 时间：2012-07-07T08:55:42.947
> 
> 标签：jsp, tomcat, servlets

在 Tomcat 服务器中运行项目时，我收到以下消息

```
INFO: validateJarFile(D:\Programming\Internproject\HRDBMS\HRDB\build\web\WEB-INF\lib\servlet-api-2.5.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class 
```

谁能帮我摆脱这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T11:23:34.420

根据 servlet 规范，Tomcat 不允许 Web 应用程序提供它自己的任何 servlet API 类的副本。因此，Tomcat 拒绝加载该 JAR 文件。

假设您没有尝试使用您的 Tomcat 版本不支持的功能（您没有提及），您的 webapp 应该可以正常工作。Tomcat 6.0 及更高版本支持 servlet 2.5（及更早版本），Tomcat 7.0 支持 servlet 3.0 版本（及更早版本）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T13:00:04.690

删除 servlet.jar.Tomcat 有自己的 servlet。

# iphone - 如何将我的文件写入 NSBundle？

> ID：11373652
> 
> 赞同：2
> 
> 时间：2012-07-07T08:55:59.560
> 
> 标签：iphone, ios, ipad, ios4, nsbundle

我正在编写一个 iPhone/iPad 应用程序，其中包含压缩文件，这些文件基本上是网站的内容，然后我可以在提取时运行这些内容。但是，我想将所有这些文件和文件夹放入一个文件中，即一个`NSBundle`文件，这样我就可以将它显示给用户，就好像它是一个文件一样，然后可以在其中删除或移动它，但不能遍历它。（我的应用程序允许遍历整个文件夹中的`NSDocuments`文件夹）

我知道您可以轻松地将自己的导入`NSBundle`到您的项目中，然后将其读入网站。但是，是否有可能使用已经创建的目录结构来编写一个目录结构，其中的文件和文件夹必须保持原样，即我之前描述的 web 文件夹？

如果不是`NSBundle`，我可以将文件夹写入（转换）到任何其他类型的包中吗？

如果没有，你对我的困境还有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T02:59:15.397

这不是您问题的直接答案，而是查看您的问题的另一种方式。

1.  具体来说，您已经声明您的应用程序允许遍历整个 NSDocumentDirectory 中的文件夹。由于您的代码是在其中枚举文件/文件夹的内容，因此您可以简单地实现您的枚举代码，以便它将与某些模式（例如 *.bundle）匹配的文件夹视为层次结构中的叶节点；用户永远不需要知道里面有什么东西。

2.  更进一步，您可以将 .zip 文件直接存储在文档目录中，然后在 UIWebView 请求访问单个 URL 时将其内容直接提供给它。

    可以注册一个`NSURLProtocol`在检查所有 URL 请求时首先破解的子类。如果子类说它可以处理特定的 URL（例如，对于特定的主机或路径），那么将创建子类的一个实例并要求提供内容。

    此时，您可以使用一些 zip-reading 代码，例如[Objective-Zip](http://code.google.com/p/objective-zip/)从 zip 中读取请求的文件，并从请求中返回其内容。

    用于`NSURLProtocol +registerClass:`向系统注册子类。

    在以下示例中，我的协议处理程序将忽略所有请求，但对我的站点的请求除外。对于那些它返回相同的硬编码字符串（作为概念证明）：

    **MyURLProtocolRedirector.h**：

    ```
    #import <Foundation/Foundation.h>

    @interface MyURLProtocolRedirector : NSURLProtocol
    + (BOOL)canInitWithRequest:(NSURLRequest *)request;
    + (NSURLRequest *)canonicalRequestForRequest:(NSURLRequest *)request;
    - (void)startLoading;
    - (void)stopLoading;
    @end 
    ```

    **MyURLProtocolRedirector.m**：

    ```
    #import "MyURLProtocolRedirector.h"

    @implementation MyURLProtocolRedirector

    + (BOOL)canInitWithRequest:(NSURLRequest *)request {
      if ([request.URL.host compare:@"martinkenny.com"] == 0) {
        return YES;
      }
      return NO;
    }

    + (NSURLRequest *)canonicalRequestForRequest:(NSURLRequest *)request {
      return request;
    }

    - (void)startLoading {
      NSURLResponse *response = [[NSURLResponse alloc] initWithURL:self.request.URL MIMEType:@"text/plain" expectedContentLength:11 textEncodingName:nil];
      [self.client URLProtocol:self didLoadData:[[NSData alloc] initWithBytes:"Hello World" length:11]];
      [self.client URLProtocol:self didReceiveResponse:response cacheStoragePolicy:NSURLCacheStorageAllowed];
      [self.client URLProtocolDidFinishLoading:self];
    }

    - (void)stopLoading {
    }

    @end 
    ```

    **SomeViewController.m**：

    ```
    // register the new URL protocol handler with the system
    [NSURLProtocol registerClass:[MyURLProtocolRedirector class]];

    UIWebView *webView = [[UIWebView alloc] initWithFrame:self.view.bounds];
    [webView loadRequest:[[NSURLRequest alloc] initWithURL:[NSURL URLWithString:@"http://www.seenobjects.org/"]]];
    [self.view addSubview:webView]; 
    ```

# objective-c - 如何从图像视图中显示的 plist 文件中检索图像数组？

> ID：11373657
> 
> 赞同：1
> 
> 时间：2012-07-07T08:57:21.193
> 
> 标签：objective-c

我已经在图像数组中获取了 plist 文件...在该通道中，有五个图像，但是如何在我们的视图中检索这些图像？

我的代码是：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSString *path=[[NSBundle mainBundle] pathForResource:@"Animalfile" ofType:@"plist"];
    NSArray *animalImages=[NSArray arrayWithContentsOfFile:path];
    NSMutableArray *animal=[[NSMutableArray alloc]init];
    for(int i=0;i<[animalImages count];i++)
    {
        UIImage *img=[animalImages objectAtIndex:i];
        [animalphoto setImage:img];
        NSLog(@"print:%@",i);

        //NSString *name=[animalImages objectAtIndex:i];
        [animal addObject:[UIImage imageNamed:[NSString stringWithFormat:@"%@.png",img]]];
    }
} 
```

# android - android：在 targetSdkVersion 更改时无法连接到相机服务

> ID：11373658
> 
> 赞同：1
> 
> 时间：2012-07-07T08:57:52.583
> 
> 标签：android, android-camera

我的相机应用 manifest.xml 中有以下设置：

```
<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="8" /> 
```

现在我把它改成了：

```
<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="13" /> 
```

问题是：我的应用程序无法再打开相机了。此行引发错误：

```
this.camera = Camera.open(); 
```

错误信息：

> 连接相机服务失败

顺便说一句，奇怪的事情：使用新设置启动应用程序后，我不再让相机设备运行（所有其他照片应用程序也在启动时崩溃）。我必须重新启动设备才能再次使用相机。

有人可以帮我吗？

我的 Preview.java 类：

```
package net.mt.lib.cc;

import java.io.IOException;
import java.util.Collections;
import java.util.Comparator;
import java.util.Hashtable;
import java.util.List;

import net.mt.lib.Tools;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.app.ActivityManager;
import android.app.ActivityManager.MemoryInfo;
import android.content.Context;
import android.hardware.Camera;
import android.hardware.Camera.ErrorCallback;
import android.hardware.Camera.Size;
import android.os.Build;
import android.os.Debug;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Toast;

import com.crittercism.app.Crittercism;
import com.flurry.android.FlurryAgent;

/**
 *
 * openCamera()
 * onSizeChanged()
 * onLayout()
 * onLayout()
 * surfaceCreated()
 * surfaceChanged()
 * onLayout()
 */
class Preview extends ViewGroup implements SurfaceHolder.Callback { // <1>
    private static final String TAG = "Preview";

    SurfaceHolder mHolder; // <2>
    public Camera camera; // <3>
    SurfaceView mSurfaceView;
    BaseCameraActivity cameraActivity;
    int l2 = 0, t2 = 0, r2 = 0, b2 = 0;
    int padding = 20;
    PreviewCallback cb;
    private double downscalingFactor = 1;
    // the size of this view. gets set in onMeasure()
    int fullWidth, fullHeight;
    Size bestPictureSize = null;
    Size bestPreviewSize = null;

    private String allResolutions;

    private Context context;

    public Preview(Context context, PreviewCallback callback) {
        super(context);
        this.cb = callback;
        init(context);
    }

    private void init(Context context) {
        setKeepScreenOn(true);
        cameraActivity = (BaseCameraActivity) context;
        mSurfaceView = new SurfaceView(context);
        addView(mSurfaceView);
        this.context = context;
        mHolder = mSurfaceView.getHolder(); // <4>
        mHolder.addCallback(this); // <5>
        mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS); // <6>
    }

    public void openCamera() {
        Log.d(TAG,"openCamera()");
        if (this.camera == null) {
            try{
                this.camera = Camera.open();
                this.camera.setErrorCallback(new ErrorCallback() {
                    @Override
                    public void onError(int error, Camera camera) {
                        Log.e(TAG, "error! code:"+error);
                        Toast.makeText(cameraActivity, "Camera error occured: "+error, 8000).show();
                    }
                });
                requestLayout(); // -> onSizeChanged() -> onLayout()
            }catch (Exception e) {
                String errorMessage = "Manufacturer: "+Build.MANUFACTURER+"; Model:"+Build.MODEL+"; Camera: "+this.camera+"; Stacktrace:"+Tools.exception2String(e);
                Log.d(TAG,"error occured: "+errorMessage);
                FlurryAgent.onError("1", errorMessage, "Preview.openCamera()");
                Toast.makeText(cameraActivity, "Uuups, I am sorry! Could not connect to the camera device. Please restart me or your phone.", 8000).show();
                Crittercism.logHandledException(e);
            }
        }
    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        Log.d(TAG,"onSizeChanged() "+w+" "+h);
        fullWidth = w;
        fullHeight = h;
        if(fullWidth < fullHeight){ 
            int tmp = fullHeight;
            fullHeight = fullWidth;
            fullWidth = tmp;
            Log.d(TAG,"switched:"+fullWidth+"x"+fullHeight);
        }else{
            Log.d(TAG,"fullSize:"+fullWidth+"x"+fullHeight);
        }
        if(this.camera != null){
            this.setCameraPreviewSize();
            this.setCameraPictureSize();
            if (getChildCount() > 0) {
                final View child = getChildAt(0);
                Log.d(TAG,"r:"+this.getPreviewRight()+" l:"+this.getPreviewLeft()+" b:"+this.getPreviewBottom()+" t:"+this.getPreviewTop());
                child.layout(this.getPreviewLeft(), this.getPreviewTop(), this.getPreviewRight(), this.getPreviewBottom());
                cb.previewReady(getPreviewLeft(), getPreviewTop(), getPreviewRight()-getPreviewLeft(), getPreviewBottom() - getPreviewTop(), getBestPictureSize().width, getBestPictureSize().height, (int) downscalingFactor, allResolutions);
            }
        }

        super.onSizeChanged(w, h, oldw, oldh);
    }

    private void calcScaledPreviewSize(){       
        int previewWidth = getBestPreviewSize().width;
        int previewHeight = getBestPreviewSize().height;
        float scaledWidth;
        float scaledHeight;

        Log.d(TAG,"preview width: "+previewWidth+", preview height: "+previewHeight);
        Log.d(TAG,"display width: "+fullWidth+", display height: "+fullHeight);
        float previewRatio = (float) previewWidth / (float) previewHeight;
        float displayRatio = (float) fullWidth / (float) fullHeight;

        if(displayRatio >= previewRatio){ // the display is wider then the preview image
            scaledHeight = fullHeight - 2*padding;
            scaledWidth = scaledHeight * previewRatio;
            l2 = (int) (fullWidth - scaledWidth) / 2;
            t2 = padding;
            r2 = (int) (fullWidth + scaledWidth) / 2;
            b2 = (int) scaledHeight + padding;

        }else{
            scaledWidth = fullWidth - 2*padding;
            scaledHeight = scaledWidth / previewRatio;
            l2 = padding;
            t2 = (int) (fullHeight - scaledHeight) / 2;
            r2 = (int) scaledWidth + padding;
            b2 = (int) (fullHeight + scaledHeight) / 2;     
        }
    }

    public int getPreviewTop() {
        if(this.t2 == 0){
            this.calcScaledPreviewSize();
        }
        return t2;
    }
    public int getPreviewBottom() {
        if(this.b2 == 0){
            this.calcScaledPreviewSize();
        }
        return b2;
    }
    public int getPreviewLeft() {
        if(this.l2 == 0){
            this.calcScaledPreviewSize();
        }
        return l2;
    }
    public int getPreviewRight() {
        if(this.r2 == 0){
            this.calcScaledPreviewSize();
        }
        return r2;
    }
    public int getPreviewWidth() {
        return this.getPreviewRight()-this.getPreviewLeft();
    }
    public int getPreviewHeight() {
        return this.getPreviewBottom()-this.getPreviewTop();
    }

    private void setCameraPreviewSize() {
        Camera.Parameters parameters = camera.getParameters();
        if(parameters.getPreviewSize() != this.getBestPreviewSize()){
            parameters.setPreviewSize(this.getBestPreviewSize().width, this.getBestPreviewSize().height);
            this.camera.setParameters(parameters);
        }
    }

    private void setCameraPictureSize() {
        Camera.Parameters parameters = this.camera.getParameters();
        if(parameters.getPictureSize() != this.getBestPictureSize()){
            parameters.setPictureSize(getBestPictureSize().width, getBestPictureSize().height);
            this.camera.setParameters(parameters);
        }
    }

    @Override
    protected void onLayout(boolean changed, int l, int t, int r, int b) {
        Log.d(TAG,"onLayout()");
        /*
        if (changed && getChildCount() > 0 && this.camera != null) {
            final View child = getChildAt(0);
            Log.d(TAG,"r:"+this.getPreviewRight()+" l:"+this.getPreviewLeft()+" b:"+this.getPreviewBottom()+" t:"+this.getPreviewTop());
            child.layout(this.getPreviewLeft(), this.getPreviewTop(), this.getPreviewRight(), this.getPreviewBottom());
            cameraActivity.initOverlay(this.getPreviewLeft(),this.getPreviewTop(),this.getPreviewRight(),this.getPreviewBottom());
        }*/
    }
    public Size getBestPictureSize() {
        if(this.bestPictureSize == null){
            this.calculateOptimalPictureAndPreviewSizes();
        }
        return bestPictureSize;
    }

    public Size getBestPreviewSize() {
        if(this.bestPreviewSize == null){
            this.calculateOptimalPictureAndPreviewSizes();
        }
        return bestPreviewSize;
    }

    // Called once the holder is ready
    public void surfaceCreated(SurfaceHolder holder) { // <7>
        // The Surface has been created, acquire the camera and tell it where
        // to draw.
        Log.d(TAG,"surfaceCreated()");
        try {
            if (this.camera != null) {
                this.camera.setPreviewDisplay(holder);
            }
        } catch (IOException exception) {
            Log.e(TAG, "IOException caused by setPreviewDisplay()", exception);

        }
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
        Log.d(TAG,"surfaceChanged()");
        if (camera != null) {

            Camera.Parameters parameters = camera.getParameters();
            parameters.setPreviewSize(getBestPreviewSize().width, getBestPreviewSize().height);
            camera.setParameters(parameters);
            camera.startPreview();
            cb.onPreviewStart();
            requestLayout();
        }
    }

    public void surfaceDestroyed(SurfaceHolder holder) { // <14>
        Log.d(TAG,"surfaceDestroyed()");
        if(this.camera != null){
            camera.stopPreview();
            camera.lock();
            camera.release();
            this.camera = null;
        }
    }

    public void releaseCamera(){
        Log.d(TAG,"releaseCamera()");
        if (camera != null) {
            camera.stopPreview();
            camera.setPreviewCallback(null);
            camera.release();
            camera = null;
        }
    }

} 
```

预览是这样初始化的（来自主要活动）：

```
@Override
    protected void onResume() {
        super.onResume();
        Log.d(TAG,"onResume()");

        previewLayout.removeAllViews();
        preview = new Preview(this, this);
        previewLayout.addView(preview, new ViewGroup.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT,ViewGroup.LayoutParams.MATCH_PARENT));
        preview.openCamera();

    } 
```

和清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="net.mc.ccPro"
    android:versionCode="35"
    android:versionName="3.5" >

    <application
        android:hardwareAccelerated="true"
        android:icon="@drawable/icon"
        android:label="@string/app_name"
        android:largeHeap="true" >
        <activity
            android:name=".ccProActivity"
            android:configChanges="keyboard|orientation|keyboardHidden"
            android:label="@string/app_name"
            android:windowSoftInputMode="adjustPan" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
            <intent-filter>
                <action android:name="android.media.action.IMAGE_CAPTURE" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name="net.mc.lib.cc.PreferenceActivity"
            android:label="@string/set_preferences" >
        </activity>

    </application>

    <supports-screens 
           android:largeScreens="true" 
           android:normalScreens="true" 
           android:smallScreens="true" 
           android:resizeable="true" 
           android:anyDensity="true" />

    <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="8" />

    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <uses-library android:name="net.mc.lib.cc" />
    <uses-feature
        android:name="android.hardware.camera.autofocus"
        android:required="false" />

    <supports-screens
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="true"
        android:xlargeScreens="true" />

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T14:53:17.300

尝试将此行添加到您的 AndroidManifest 中：

```
<uses-feature android:name="android.hardware.camera" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T07:17:22.273

使用此代码初始化相机：

```
 Camera camera;
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.GINGERBREAD) {
            int numberOfCameras = Camera.getNumberOfCameras();
            CameraInfo cameraInfo = new CameraInfo();
            for (int i = 0; i < numberOfCameras; i++) {
                Camera.getCameraInfo(i, cameraInfo);
                if (cameraInfo.facing == CameraInfo.CAMERA_FACING_BACK)
                    camera = Camera.open(i);
            }
        }
        if (camera == null)
            camera = Camera.open();
        ... 
```

# drupal - 如何在 Drupal 中创建动态可编辑表？

> ID：11373659
> 
> 赞同：1
> 
> 时间：2012-07-07T08:57:55.020
> 
> 标签：drupal, drupal-7, drupal-modules, dynamic-tables

我想在**Drupal 7中创建****动态可编辑表**。但我找不到任何模块。请帮我！

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T12:23:23.817

取决于你的意思是表..但如果电子表格可以dø然后看看[http://drupal.org/project/sheetnode](http://drupal.org/project/sheetnode)**

# blackberry - 是否可以在不将默认相机应用程序置于黑莓前景的情况下以编程方式拍摄照片.....？

> ID：11373663
> 
> 赞同：0
> 
> 时间：2012-07-07T08:59:08.170
> 
> 标签：blackberry, background, camera, image

我正在开发一个使用相机的应用程序......我的应用程序的要求是：

我必须从“已经运行”的后台应用程序中拍照；但我必须将相机应用程序保持在后台......意味着我想在不干扰当前前台应用程序的情况下捕获图片。

而且没有发出任何相机快门声....？？？

这可能吗？如果我们调用相机应用程序 - 通过 Invoke.invokeApplication(Invoke.APP_TYPE_CAMERA, new CameraArguments())............

* * *

感谢你们所有人......特别是@donturner ......很抱歉很晚才回来写这篇文章。

经过一些尝试，我发现如果不将相机屏幕置于前台，我们就无法捕捉到快照。

1）如果我们将相机屏幕置于背景或

2) 将 VideoControl 的类对象的可见性更改为 false...

```
_videoControl.setVisible(false); 
```

那么......将不会收到任何字节（空值）

```
byte[] imageBytes = _videoControl.getSnapshot( encoding ); 
```

那么这个功能有什么用....而我们使用视频控制类来捕捉快照或视频？？？

```
_videoControl.setVisible(true); 
```

我尝试了一个不同的技巧......

*   在将相机屏幕置于前台以关闭设备的背光之前，我调用了一个线程。

*   然后不久之后，我将相机屏幕带到前台并捕捉快照。

我在 BB Flip (4.6) 和 Storm (5.0) 设备上测试了上述技巧，即使设备背光关闭，它也能成功拍摄快照。

但现在我陷入了其他一些问题……那就是相机快门声。我尝试了很多，但无法成功将其静音....

正如@Michael Donohue 建议的那样，我尝试过..

```
private void muteThread() {
        Thread t = new Thread(new Runnable() {
            public void run() {
                try {
                    int i = 0;
                    while (i < 50) {
                        Audio.setVolume(0);
                        try {
                            Thread.sleep(50);
                        } catch (InterruptedException e) {                      
                        }
                        i++;
                    }
                    System.out.println("\n\n >>>>> End of Mute Thread. <<<< \n\n");
                } catch (Exception e) {
                }
            }
        });
        t.start();
    } 
```

但它不起作用......如果不能做到这一点，那么这些应用程序如何提供这种设施......以及他们使用的功能类型。

[http://appworld.blackberry.com/webstore/content/97648/?lang=en](http://appworld.blackberry.com/webstore/content/97648/?lang=en)

[http://appworld.blackberry.com/webstore/content/79083/?lang=en](http://appworld.blackberry.com/webstore/content/79083/?lang=en)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:54:29.860

如果不向用户显示相机预览提要，您就无法以编程方式拍摄照片，因此您至少需要将相机预览表面带入 UI 前景。

# jsp - 如何在 JSP 中获取 Bean 数据

> ID：11373665
> 
> 赞同：0
> 
> 时间：2012-07-07T08:59:46.980
> 
> 标签：jsp, jsf, jsf-2, javabeans

我将bean定义为`PersonBean`会话范围。

我想要的是找到`PersonBean.personId`in jsp 页面。

我想要它在 jsp 页面中，因为我想在此基础上进行一些计算`personId`。任何人都知道如何获得相同的。

在 JSP 中，我可以使用 jsf 打印相同的内容

```
<h:outputText value="#{PersonBean.personId}" /> 
```

但是我需要将此值分配给jsp中的某个整数值，如下所示。

```
<h:outputText value="#{PersonBean.personId}" />
<%
   int i = new PersonBean().getPersonId;
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
%> 
```

我以为`int i = new PersonBean().getPersonId;`会起作用，但它不起作用。知道我怎么得到这个吗？

## 更新 1

我也试过

```
<jsp:useBean id="sessionPersonalDataBean" class="com.sac.databean.PersonalInformationDataBean" scope="session"/>
<%
   out.print("my id is " + sessionPersonalDataBean.getPersonId());
%> 
```

我仍然得到输出`my id is 0`而不是`my id is 0`.

**笔记：**

当我使用时，`<h:outputText value=#{PersonalInformationDataBean.personId} />`我得到了正确的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T11:32:11.910

您应该避免在 JSP 中使用 scriptlet，但要回答您的问题：JSP 是一个 servlet。如果 bean 存储在属性“PersonBean”下的会话范围内，则只需从会话中获取它：

```
PersonBean p = (PersonBean) request.getSession().getAttribute("PersonBean"); 
```

如果存储在“PersonalInformationDataBean”属性下，代码当然是

```
PersonBean p = (PersonBean) request.getSession().getAttribute("PersonalInformationDataBean"); 
```

代码`new PersonBean()`创建了一个新的 PersonBean 实例，所以当然，这个实例没有理由与会话中存储的实例具有相同的 ID。这是非常基本的 Java 内容，我建议在使用 JSF 之前学习更多关于 Java 语言和基本 OO 概念的知识。

# c++ - 我什么时候应该选择复制省略而不是通过 const 引用传递参数？

> ID：11373672
> 
> 赞同：9
> 
> 时间：2012-07-07T09:01:10.773
> 
> 标签：c++, c++11, lvalue, rvalue, rvo

> **可能重复：**
> [按值传递是 C++11 中合理的默认值吗？](https://stackoverflow.com/questions/7592630/is-pass-by-value-a-reasonable-default-in-c11)

我在读[想要速度？按值传递。](http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/)戴夫亚伯拉罕关于复制省略和 RVO。我想知道为什么我们需要复制省略？

我被告知太多次，你应该通过 const 引用传递函数参数以避免复制（我读过的几乎每一本 c++ 书籍都告诉我这一点）。

假设我们有两个函数：

```
int f1(const string &s);
int f2(string s); 
```

如果实际参数是右值，则在两个函数中都将避免复制。但是如果实际参数是一个左值，复制只会在 f1 中避免，而不是在 f2 中。那么为什么我们需要这个功能呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-07T09:07:21.173

如果您仍然需要副本，请按值传递。选择 f1 的签名还是 f2 的签名取决于函数的内容。例如，在这种情况下，您将使用 const 引用：

```
int f1(const string& s) {
    return s.size();
} 
```

但是在这种情况下你会按值传递：

```
int f2(string s) {
    sort(s.begin(), s.end());
    s.erase(unique(s.begin(), s.end()), s.end());
    return s.size();
} 
```

因为替代方案是这样的：

```
int f2(const string& s) {
    string temp(s);
    sort(temp.begin(), temp.end());
    temp.erase(unique(temp.begin(), temp.end()), temp.end());
    return temp.size();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T09:08:50.657

RVO 不适用于您的示例，因为返回值为`int`.

```
string f1(const string &s) {
    string ret = s; // always makes a copy
    ret += 'x';
    return ret; // makes a copy pre-C++11 if no RVO
} 
```

Tally：C++03 中的 1-2 个副本，C++11 中正好 1 个，加上（如果禁用省略）一个移动可能会退化为其他类的副本，而不是`std::string`.

```
string f2(string s) { // calling makes a copy if lvalue or no elision
    s += 'x';
    return s; // makes a copy pre-C++11 if no RVO
} 
```

Tally：在 C++03 中为 0-2 个副本，在 C++11 中为 0-1 个。

正如其他人所说，当您想将对象作为纯值进行操作时，按值传递，没有任何引用语义。

`const &`是一个熟悉的习语，但就语言语义而言，它有点杂乱无章。当您根本不需要参考时使用它；`&`只是为了使参数`const`定义有意义。如果您想修改参数（但仅限于本地），则`const`实际上并不适用，并且也会`&`退出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T09:14:39.487

`f2`通过它的签名发出信号，无论你传递给我什么，我都会处理我自己的对象副本。有用，如果`f2`要以不可逆的方式修改对象（例如通过移动窃取它的资源），或者在某些并发场景中。诚然，c++11 为（已经令人困惑的）c++ 类型系统增加了新的混乱程度，但一旦你想到它就很有意义......

# jquery - jquery append 不适用于 CakePHP 的 JsHelper

> ID：11373674
> 
> 赞同：0
> 
> 时间：2012-07-07T09:01:44.357
> 
> 标签：jquery, cakephp, formhelper

我想使用 cakephp 的表单助手动态地附加一些表单元素。

我错过了什么？

```
<script type="text/javascript">
        $("a#megyeAdd").click(function(){
            $("div#moreCounty").append(
                <?php echo $this->Form->input('ColleaguesCounty.1.county_id',array('label' => 'Megye')); ?>
            );
        });     
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T09:06:13.080

您在 .append 参数上缺少引号。

```
$("div#moreCounty").append("<?php echo $this->Form->input('ColleaguesCounty.1.county_id',array('label' => 'Megye')); ?>"); 
```

# asp.net - HTML中的向下箭头

> ID：11373678
> 
> 赞同：1
> 
> 时间：2012-07-07T09:02:45.360
> 
> 标签：asp.net, html, css

这是 HTML ( `&#187;`) 中右箭头的代码，它看起来像 »。像这样的向下箭头和向上箭头的任何其他 html 代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T09:16:02.657

有单箭头：↑ ( `&uarr;`, `&#8593;`or `&#x2191;`) 和 ↓ ( `&darr;`, `&#8595;`or `&#x2193;`)。还有双箭头：⇑ ( `&uArr;`, `&#8657;`or `&#x21D1;`) 和 ⇓ ( `&dArr;`, `&#8659;`or `&#x21D3;`)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T09:07:44.467

这是一个很好的命名实体列表： [http ://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references)

这些数字只是 Unicode 代码点，所以你可以在那里查看它们：http: [//unicode.org/charts/](http://unicode.org/charts/)

因此，例如，向下箭头是`&darr;`(↓)，向上箭头是`&uarr;`(↑)。此外，左箭头和右箭头是`&larr;`和`&rarr;`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-07T09:08:38.587

实际上，那不是“箭头”，而是“引号”。“左点双角引号”的代码为 171，但没有“上”和“下”引号。

对于实际的箭头，请检查如下表：[http ://www.fileformat.info/info/unicode/block/arrows/utf8test.htm](http://www.fileformat.info/info/unicode/block/arrows/utf8test.htm)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-07T09:17:05.200

没有相应的向上指向的双箭头（请记住，» 实际上是一个标点实体）。但是您可能会发现这个很有用 - 8743（∧ 向上）和 8744（∨ 向下）。您可能还会发现[这个 html 实体列表](http://www.escapecodes.info/)很有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T12:19:34.053

这些是 HTML 代码

`(&#8593;)`单向上箭头
`(&#8594;)`单向下箭头

`(&#8657;)`向上双箭头 `(&#8659;)`向下双箭头

# php - 带有 productid 的会话数组

> ID：11373679
> 
> 赞同：0
> 
> 时间：2012-07-07T09:03:08.477
> 
> 标签：php, arrays, session, session-variables

我正在将产品 ID 添加到会话数组中：

```
if (isset($_GET["add"]) && (int)$_GET["add"]>0)
{
$_SESSION['products'][] = $_GET["add"];
} 
```

我将如何循环数组并向所有具有数组中 id 的产品添加一个类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T10:00:02.810

那这个呢：

```
...
$_SESSION['products'][$_GET["add"]] = true ;
... 
```

然后简单地问

```
if ($_SESSION['products']) { something ... } 
```

或在一个循环中

```
foreach ($_SESSION['products'] as $id=>$isset)
{
   // ...
} 
```

顺便说一句更短的条件：

```
if (($_GET["add"]*1)>0) 
```

# entity-framework - 在 DataObjects.Net 中包含外键属性

> ID：11373681
> 
> 赞同：1
> 
> 时间：2012-07-07T09:03:28.323
> 
> 标签：entity-framework, foreign-keys, dataobjects.net

我最近担心实体框架存在的问题，我们可能需要寻找替代品。根据 ORMBattle 的说法，最好的候选者是 DataObjects.Net，我最初的调查结果非常有希望，除了我们在结构中需要的一个特性：

考虑两个类：订单和客户，在“订单”类中，我有一个“客户”导航属性（可能还有客户类中的“订单”导航属性）。我还需要 Order 类中的属性 CustomerID。这在低级 EF4 中是完全可能的。

我怎样才能实现这个目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T10:37:50.993

您可以使用特殊的 getter 添加非持久性属性来完成这项工作：

```
public long CustomerId
{
  get
  {
    return GetReferenceKey(TypeInfo.Fields["Customer"]).Value.GetValue<long>(0);
  }
} 
```

可以以相同的方式添加设置器。

希望有帮助。

PS
这是原始答案的副本，可以在[DataObjects.Net 官方支持站点上](http://support.x-tensive.com/question/5205/include-foreign-key-id-properties)找到。

# sql - 如何将列值放入行标题

> ID：11373684
> 
> 赞同：2
> 
> 时间：2012-07-07T09:04:10.710
> 
> 标签：sql

```
ID    Amount      Date
------------------------------
 1    300     02-02-2010 00:00
 2    400     02-02-2009 00:00
 3    200     02-02-2011 00:00
 4    300     22-02-2010 00:00
 5    400     12-02-2009 00:00
 6    500     22-02-2009 00:00
 7    600     02-02-2006 00:00
 8    700     02-07-2012 00:00
 9    500     08-02-2012 00:00
10    800     09-02-2011 00:00
11    500     06-02-2010 00:00
12    600     01-02-2011 00:00
13    300     02-02-2019 00:00 
```

期望的输出：

```
 Y1          Y2            Y3 ...........
 sum(amount)   sum(amount)   sum(amount) 
```

什么是一种方法，其中 Y1 是日期的年份部分，这样结果列将如下所示？

```
 2006   2009    2010   2011   2012
 ---------------------------------
  600   1300     800   1900   1200 
```

数据库系统：SQL Server 2008

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T09:55:16.080

您需要使用[动态`PIVOT`表](http://www.kodyaz.com/articles/t-sql-dynamic-pivot-table-example-code.aspx)

```
DECLARE @Years nvarchar(max)
SELECT @Years =
  STUFF(
  (
    select distinct ',[' + cast(Year([date]) as nvarchar(4)) + ']'
    from YOUR_TABLE_NAME_HERE
    for xml path('')
  ),
  1,1,'')

DECLARE @SQL nvarchar(max)
SELECT @SQL = N'
select
  *
from (
  select
    amount, year([date]) as [y]
  from YOUR_TABLE_NAME_HERE
) Data
PIVOT (
  sum(amount)
  FOR [y]
  IN (
    ' + @Years + '
  )
) PivotTable
'

EXECUTE (@SQL) 
```

参考：[`PIVOT`文档](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)

# objective-c - NSTableView 将选定的行显示到 NSTextField

> ID：11373686
> 
> 赞同：2
> 
> 时间：2012-07-07T09:04:16.057
> 
> 标签：objective-c, cocoa, nstableview, cocoa-bindings

我还是可可的新手，我已经创建`NSTableView`了按钮来添加和删除选定的行。我添加了`NSTextField`标签以显示两列中选定行的值。

谁能指出我正确的方向如何实现这一目标？我想它应该像这样工作：

1.  获取选定的行索引号
2.  获取所选行中两个标识符的字符串值
3.  设置字符串值

如果没有选择任何内容，我猜也应该有字符串是空的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T10:52:33.967

找到了我正在寻找的关于`NSTableView`绑定的内容。

[https://developer.apple.com/library/mac/#samplecode/NSTableViewBinding/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010522-Intro-DontLinkElementID_2](https://developer.apple.com/library/mac/#samplecode/NSTableViewBinding/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010522-Intro-DontLinkElementID_2)

# events - GWT 事件服务多个/共享会话

> ID：11373688
> 
> 赞同：0
> 
> 时间：2012-07-07T09:04:40.167
> 
> 标签：events, gwt, service, shared, gwt-eventservice

我使用 GWT 事件服务构建了一个简单的聊天。当我在浏览器的两个选项卡中打开聊天时，只有一个选项卡会捕获事件。

我想我可以通过将此行添加到属性来解决这个问题：

eventservice.connection.id.generator = de.novanic.eventservice.service.connection.id.SessionExtendedConnectionIdGenerator

现在，只有我打开的最后一个选项卡会捕获事件。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:42:08.093

我有同样的问题，这是我所做的：

```
# Generator for unique client ids
eventservice.connection.id.generator = de.novanic.eventservice.service.connection.id.SessionExtendedConnectionIdGenerator 
```

@Marcel Stör：您可能正在查看旧版本的 gwteventservice [http://gwteventservice.googlecode.com/svn/trunk/eventservice/src/main/java/de/novanic/eventservice/service/connection/id/SessionExtendedConnectionIdGenerator。爪哇](http://gwteventservice.googlecode.com/svn/trunk/eventservice/src/main/java/de/novanic/eventservice/service/connection/id/SessionExtendedConnectionIdGenerator.java)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-20T12:51:27.430

试试这个

```
# Generator for unique client ids
eventservice.connection.id.generator=de.novanic.eventservice.service.connection.id.SessionExtendedClientIdGenerator 
```

类名`SessionExtendedClientIdGenerator`不是`SessionExtendedConnectionIdGenerator`

# android - Android JSON Array 不适用于 Maplocations 类

> ID：11373689
> 
> 赞同：-1
> 
> 时间：2012-07-07T09:05:02.503
> 
> 标签：android, json, google-maps

我正在android中开发一个地图应用程序我已经制作了maplocation类来传递纬度和经度并使用Json Array从MYSQl中获取数据以显示在地图中。但是当我运行应用程序时它不幸崩溃了这是我的日志猫

```
07-07 14:02:26.423: E/AndroidRuntime(366): FATAL EXCEPTION: main
07-07 14:02:26.423: E/AndroidRuntime(366): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.icons.draw.view/com.icons.draw.view.DrawIcons}: android.view.InflateException: Binary XML file line #6: Error inflating class com.icons.draw.view.LocationViewers
07-07 14:02:26.423: E/AndroidRuntime(366):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
07-07 14:02:26.423: E/AndroidRuntime(366):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
07-07 14:02:26.423: E/AndroidRuntime(366):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
07-07 14:02:26.423: E/AndroidRuntime(366):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
07-07 14:02:26.423: E/AndroidRuntime(366):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-07 14:02:26.423: E/AndroidRuntime(366):  at android.os.Looper.loop(Looper.java:130)
07-07 14:02:26.423: E/AndroidRuntime(366):  at android.app.ActivityThread.main(ActivityThread.java:3683)
07-07 14:02:26.423: E/AndroidRuntime(366):  at java.lang.reflect.Method.invokeNative(Native Method)
07-07 14:02:26.423: E/AndroidRuntime(366):  at java.lang.reflect.Method.invoke(Method.java:507)
07-07 14:02:26.423: E/AndroidRuntime(366):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-07 14:02:26.423: E/AndroidRuntime(366):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-07 14:02:26.423: E/AndroidRuntime(366):  at dalvik.system.NativeStart.main(Native Method)
07-07 14:02:26.423: E/AndroidRuntime(366): Caused by: android.view.InflateException: Binary XML file line #6: Error inflating class com.icons.draw.view.LocationViewers
07-07 14:02:26.423: E/AndroidRuntime(366):  at android.view.LayoutInflater.createView(LayoutInflater.java:518)
07-07 14:02:26.423: E/AndroidRuntime(366):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570)
07-07 14:02:26.423: E/AndroidRuntime(366):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
07-07 14:02:26.423: E/AndroidRuntime(366):  at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
07-07 14:02:26.423: E/AndroidRuntime(366):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
07-07 14:02:26.423: E/AndroidRuntime(366):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
07-07 14:02:26.423: E/AndroidRuntime(366):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
07-07 14:02:26.423: E/AndroidRuntime(366):  at android.app.Activity.setContentView(Activity.java:1657)
07-07 14:02:26.423: E/AndroidRuntime(366):  at com.icons.draw.view.DrawIcons.onCreate(DrawIcons.java:16)
07-07 14:02:26.423: E/AndroidRuntime(366):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-07 14:02:26.423: E/AndroidRuntime(366):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
07-07 14:02:26.423: E/AndroidRuntime(366):  ... 11 more
07-07 14:02:26.423: E/AndroidRuntime(366): Caused by: java.lang.reflect.InvocationTargetException
07-07 14:02:26.423: E/AndroidRuntime(366):  at java.lang.reflect.Constructor.constructNative(Native Method)
07-07 14:02:26.423: E/AndroidRuntime(366):  at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
07-07 14:02:26.423: E/AndroidRuntime(366):  at android.view.LayoutInflater.createView(LayoutInflater.java:505)
07-07 14:02:26.423: E/AndroidRuntime(366):  ... 21 more
07-07 14:02:26.423: E/AndroidRuntime(366): Caused by: java.lang.NullPointerException
07-07 14:02:26.423: E/AndroidRuntime(366):  at org.json.JSONTokener.nextCleanInternal(JSONTokener.java:112)
07-07 14:02:26.423: E/AndroidRuntime(366):  at org.json.JSONTokener.nextValue(JSONTokener.java:90)
07-07 14:02:26.423: E/AndroidRuntime(366):  at org.json.JSONArray.<init>(JSONArray.java:87)
07-07 14:02:26.423: E/AndroidRuntime(366):  at org.json.JSONArray.<init>(JSONArray.java:103)
07-07 14:02:26.423: E/AndroidRuntime(366):  at com.icons.draw.view.LocationViewers.getMapLocations(LocationViewers.java:102)
07-07 14:02:26.423: E/AndroidRuntime(366):  at com.icons.draw.view.LocationViewers.init(LocationViewers.java:65)
07-07 14:02:26.423: E/AndroidRuntime(366):  at com.icons.draw.view.LocationViewers.<init>(LocationViewers.java:45)
07-07 14:02:26.423: E/AndroidRuntime(366):  ... 24 more 
```

这是我的 JSOn 数组和循环代码来制作标记

```
double LAT;
    double LANG;
    String INFO;    
    public List<MapLocation> getMapLocations() {
        if (mapLocations == null) 
        {

        try{
                  jArray = new JSONArray(result);
                  JSONObject json_data=null;
                  for(int i=0;i<jArray.length();i++){
                         json_data = jArray.getJSONObject(i);
                         LAT=json_data.getDouble("lat");
                         LANG=json_data.getDouble("lang");
                         INFO=json_data.getString("info");
                        mapLocations = new ArrayList<MapLocation>();
                        mapLocations.add(new MapLocation(INFO,LAT,LANG));
                     }
                  }
                  catch(JSONException e1){
                      Toast.makeText(getContext(), "No Vehicles Found" ,Toast.LENGTH_LONG).show();
                  } catch (ParseException e1) {
                        e1.printStackTrace();
                }

        }
        return mapLocations;
    } 
```

请帮助删除此错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T09:12:31.377

您的班级 LocationViewers 没有被夸大。只需确保您对 com.icons.draw.view.LocationViewers 类使用相同的名称。

然后另一个错误是关于任何对象的 NullPointerException 。

# asp.net - 通过 jQuery Ajax 从客户端表单动态传递数据

> ID：11373697
> 
> 赞同：1
> 
> 时间：2012-07-07T09:08:11.223
> 
> 标签：asp.net, json, jquery

我想在数据库的表单文本框中插入成员的规范。当我使用静态值调用 web 方法时，我使用 jQuery Ajax 执行此操作。操作成功。例如，这段代码是可以的：

```
 $.ajax({
     type: "POST",
     url:"MethodInvokeWithJQuery.aspx/executeinsert",
     data: '{ "username": "user1", "name":"john","family":"michael","password":"123456","email": "email@yahoo.com", "tel": "123456", "codemeli": "123" }',
     contentType: "application/json; charset=utf-8",
     dataType: "json",
     async: true,
     cache: false,
     success: function (msg) {
         $('#myDiv2').text(msg.d);
     },
     error: function (x, e) {
         alert("The call to the server side failed. " + x.responseText);
     }
 }
 ); 
```

但是当我想使用动态输入到文本框中的值时，就会发生错误。什么问题？我尝试了以下两个代码块。

```
<script type="text/javascript">
    $(document).ready(
    function () {
        $("#Button1").click(
            function () {
                var username, family, name, email, tel, codemeli, password;
                username = $('#<%=TextBox1.ClientID%>').val();
                name = $('#<%=TextBox2.ClientID%>').val();
                family = $('#<%=TextBox3.ClientID%>').val();
                password = $('#<%=TextBox4.ClientID%>').val();
                email = $('#<%=TextBox5.ClientID%>').val();
                tel = $('#<%=TextBox6.ClientID%>').val();
                codemeli = $('#<%=TextBox7.ClientID%>').val();

                $.ajax(
                {
                    type: "POST",
                    url: "WebApplication20.aspx/executeinsert",
                    data: "{'username':'username','name':name,
                            'family':family,'password':password,
                            'email':email,'tel':tel,
                            'codemeli':codemeli}",
                    contentType: "application/json;charset=utf-8",
                    dataType: "json",
                    async: true,
                    cache: false,
                    success: function(msg) {
                        alert(msg);
                    },
                    error: function (x, e) {
                        alert("The call to the server side failed. "
                              + x.responseText);
                    }
                }
            );
        }
        )
     })
 </script> 
```

和

```
$(document).ready(
    function () {
        $("#Button1").click(
            function () {
                var username, family, name, email, tel, codemeli, password;
                username = $('#<%=TextBox1.ClientID%>').val();
                name = $('#<%=TextBox2.ClientID%>').val();
                family = $('#<%=TextBox3.ClientID%>').val();
                password = $('#<%=TextBox4.ClientID%>').val();
                email = $('#<%=TextBox5.ClientID%>').val();
                tel = $('#<%=TextBox6.ClientID%>').val();
                codemeli = $('#<%=TextBox7.ClientID%>').val();

                $.ajax(
                {
                    type: "POST",
                    url: "WebApplication20.aspx/executeinsert",
                    data: '{"username" : '+username+', "name": '+name+', "family":     '+family+',
                    "password": '+password+', "email": '+email+', "tel": '+tel+' ,
                    "codemeli": '+codemeli+'}'
                    contentType: "application/json;charset=utf-8",
                    dataType: "json",
                    async: true,
                    cache: false,
                    success: function(msg) {
                        alert(msg);
                    },
                    error: function (x, e) {
                        alert("The call to the server side failed. "
                              + x.responseText);
                    }
                }
        );
    }
    )
}) 
```

这里的错误内容是：

```
{"Message":"Invalid JSON primitive: myname.","StackTrace":" at System.Web.Script.Serialization.JavaScriptObjectDeserializer.DeserializePrimitiveObject()
 at System.Web.Script.Serialization.JavaScriptObjectDeserializer.DeserializeInternal(Int32 depth)
 at System.Web.Script.Serialization.JavaScriptObjectDeserializer.DeserializeDictionary(Int32 depth)
 at System.Web.Script.Serialization.JavaScriptObjectDeserializer.DeserializeInternal(Int32 depth)
 at System.Web.Script.Serialization.JavaScriptObjectDeserializer.BasicDeserialize(String input, Int32 depthLimit, JavaScriptSerializer serializer)
 at System.Web.Script.Serialization.JavaScriptSerializer.Deserialize(JavaScriptSerializer serializer, String input, Type type, Int32 depthLimit)
 at System.Web.Script.Serialization.JavaScriptSerializer.Deserialize[T](String input)
 at System.Web.Script.Services.RestHandler.GetRawParamsFromPostRequest(HttpContext context, JavaScriptSerializer serializer)
 at System.Web.Script.Services.RestHandler.GetRawParams(WebServiceMethodData methodData, HttpContext context)
 at System.Web.Script.Services.RestHandler.ExecuteWebServiceCall(HttpContext context, WebServiceMethodData methodData)","ExceptionType":"System.ArgumentException"} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T09:11:52.920

> 例如这段代码是好的

是的，在这个特定的示例中，这没问题，因为您已经对值进行了硬编码，但是代码隐藏了一个巨大的缺陷，这个缺陷是您在使用动态值时遇到的问题的原因。您不对 JSON 请求值进行编码。这就是您想要插入动态值时发生的情况。如果名称中有一些特殊字符，例如您的 JSON 中断，因为您使用了字符串连接。你不应该那样做。您应该使用该`JSON.stringify`功能并替换以下恐怖：

```
data: '{"username" : '+username+', "name": '+name+', "family":     '+family+',
            "password": '+password+', "email": '+email+', "tel": '+tel+' , 
            "codemeli": '+codemeli+'}' 
```

和：

```
data: JSON.stringify({ 
    username: username, 
    name: name, 
    family: family,
    password: password, 
    email: email, 
    tel: tel, 
    codemeli: codemeli 
}) 
```

现在您的所有请求参数都将被正确编码。该`JSON.stringify`方法原生内置于所有现代浏览器中。但是如果您需要支持一些非常旧的浏览器，您可能需要包含[json2.js](https://github.com/douglascrockford/JSON-js)脚本。

# c++ - “new（expr-list）类型”操作的含义和例子

> ID：11373699
> 
> 赞同：4
> 
> 时间：2012-07-07T09:08:30.610
> 
> 标签：c++, new-operator

在“The C++ Programming Language”一书中，在操作列表*（第 6.2 条）*中，Bjarne Stoustrup 写道：

> **创建（放置）**新（expr-list）类型
> 
> **创建（放置和初始化）**新的（ expr-list ）类型（ expr-list ）

我从来没有听说过这种`new`运算符，我对它的作用很感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T09:12:24.247

这称为放置新。您可以在已经存在的内存上创建一个对象。

这是[SO 中的一个](https://stackoverflow.com/questions/222557/what-uses-are-there-for-placement-new)[解释](http://www.parashift.com/c++-faq-lite/placement-new.html)和一个有用的问题

你也可以有`nothrow`，例如：

```
char* pzNewBuffer = new (nothrow) char [2048]; 
```

这说明，如果内存不足，它`new`不会抛出`std::bad_alloc`，而是会返回`NULL`。

* * *

我想到的另一个例子 - 标准容器（可能）使用`placement new`: 当你调用时`reserve`，内存被分配，但没有在这个内存上构造/初始化。因此，当您插入（`std::vector<T>::push_back`例如）时，如果有分配但未初始化的内存 -`placement new`将被使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T09:49:48.333

它做你告诉它做的事情。有些人使用它来传递分配器环境和对齐。例如在我写的语言运行时中

```
new (myEnvironment) Variable(initialValue); 
```

clang 编译器将分配的 AST 资源与“ast 上下文”相关联，因此它执行类似的操作

```
new (AstContext, 32 /* alignment */) MyFooBar; 
```

参数都作为单个参数列表传递给重载`operator new`的，请求的大小作为第一个参数作为它们之前的前缀。

# bash - 一个简单的 if/else bash 脚本，它对用户的是/否输入做出反应？

> ID：11373702
> 
> 赞同：14
> 
> 时间：2012-07-07T09:08:47.187
> 
> 标签：bash, shell

我基本上有一个 bash 脚本，它连续执行 5 个命令。我想添加一个逻辑，询问我“你想执行命令 A”，如果我说是，则执行命令，否则脚本跳转到另一行，我看到提示“你想执行命令 B” .

脚本很简单，看起来像这样

```
echo "Running A"
commandA &
sleep 2s;
echo "done!"

echo "Running B"
commandB &
sleep 2s;
echo "done!"
... 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-07T09:21:27.677

使用[`read`](http://wiki.bash-hackers.org/commands/builtin/read)内置函数从用户那里获取输入。

```
read -p "Run command $foo? [yn]" answer
if [[ $answer = y ]] ; then
  # run the command
fi 
```

如果您要多次执行此操作，请将上述内容放入一个将命令（可能还有提示）作为参数的[函数中。](http://tldp.org/LDP/abs/html/functions.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T09:25:57.143

您希望 Bash[读取 builtin](http://www.gnu.org/software/bash/manual/bashref.html#Bash-Builtins)。*您可以使用隐式REPLY*变量在循环中执行此操作，如下所示：

```
for cmd in "echo A" "echo B"; do
    read -p "Run command $cmd? "
    if [[ ${REPLY,,} =~ ^y ]]; then
        eval "$cmd"
        echo "Done!"
    fi
done 
```

这将遍历所有命令，提示用户输入每个命令，然后仅当用户响应的第一个字母是 Y 或 y 字符时才执行命令。希望有帮助！

# javascript - 防止在 jQuery html() 中执行 Javascript

> ID：11373703
> 
> 赞同：-1
> 
> 时间：2012-07-07T09:08:48.507
> 
> 标签：javascript, jquery, html, dom

我有一个包含一些 html 和大量 Javascript 的 div

```
<div id="mydiv">
<p>Hello Philippines</p> my first time in Philippines is nice
<script type="text/javascript">alert("how was it became nice?");</script>
well I experienced a lot of things
<script type="text/javascript">alert("and how about your Japan's trip?");</script>
well its more nicer ^^ but both countries are good! hahah
</div> 
```

我想将非 Javascript 代码和 Javascript 代码放在两个单独的变量中：

```
var html = $("#mydiv").html(); 
```

我的问题是我的 javascript 正在执行，这让我停止创建我想要的代码，即将 javascript 和非 javascript 存储到两个不同的变量。

1.  当javascript代码进入div时，如何阻止它们执行？
2.  如何安全地将 javascript 和非 javascript 代码存储到两个不同的变量中？

**注意：我需要存储的 javascript 以供以后执行**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T09:14:13.027

您可以使用`code`标签代替`script`：

html:

```
<div id="mydiv">
<p>Hello Philippines</p> my first time in Philippines is nice</p>
<code>alert("how was it became nice?");</code>
well i experienced a lot of things
<code>alert("and how about your Japan's trip?");</code>
<p>well its more nicer ^^ but both countries are good! hahah
</p>
</div> 
```

js：

```
var html = $('#mydiv *').not('code').html()
var code = $('#mydiv code').text() 
```

[http://jsfiddle.net/dMDy5/3/](http://jsfiddle.net/dMDy5/3/)

# mysql - 如何删除mysql中除了hiphen之外的空格？

> ID：11373713
> 
> 赞同：-3
> 
> 时间：2012-07-07T09:10:11.310
> 
> 标签：mysql

我从 mysql 数据库中获取图像名称。我的图片包含两到三个带有 png 扩展名的单词。名称也包含 hiphen 符号。首先，我想删除 hiphen 符号左右两侧的空格。其次，我想用下划线符号替换两个单词之间的空格。我该如何为此编写查询？

对于第二个：

UPDATE table_name set colname=replace(colname, ' ', '')

请帮我查询第一项任务...在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T10:05:53.167

听起来您正在使用字符串来保存结构化数据，这不是对 MySQL 等关系数据库管理系统的有效使用：您最好更改您的模式，以便每个离散数据单元都在自己的列中（并且您然后可以在从数据库中检索数据时重建所需的字符串）。

但是，在回答您的具体问题时，尚不清楚您想要什么：

*   如果您想在多个连字符的任一侧最多删除一个空格，那么[Puggan Se 的答案](https://stackoverflow.com/a/11373783/623041)就是适合您的答案。

*   如果您想在多个连字符的任一侧仅删除一个空格，则可以将相同的答案简化一点：

    ```
    REPLACE(REPLACE(colname, ' - ', '-'), ' ', '_') 
    ```

*   如果要删除单个连字符两侧的多个空格，最好使用 MySQL 的[`SUBSTRING_INDEX()`](http://dev.mysql.com/doc/en/string-functions.html#function_substring-index)函数拆分字符串，然后修剪结果：

    ```
    REPLACE(CONCAT(
      RTRIM(SUBSTRING_INDEX(colname, '-',  1)),
      '-',
      LTRIM(SUBSTRING_INDEX(colname, '-', -1))
    ), ' ', '_') 
    ```

*   如果要删除多个连字符两侧的多个空格，则需要创建一个循环遍历字符串的函数：

    ```
    DELIMITER ;;

    CREATE FUNCTION trim_delim (
        IN input TEXT
      , IN delim CHAR(1)
    )
    RETURNS TEXT
    DETERMINISTIC
    BEGIN
      DECLARE i      INT DEFAULT 1 ;
      DECLARE result TEXT;

      WHILE CHAR_LENGTH(input) > 0 AND cur_position > 0 DO
        SET i      := INSTR(input, delim);

        SET result := CONCAT(
          IF(CHAR_LENGTH(result) > 0, CONCAT(result, delim), ''),
          IF(i, RTRIM(LEFT(input, i - 1)), input)
        );

        SET input  := LTRIM(SUBSTRING(input, i + 1));
      END WHILE;

      RETURN result;
    END;;

    DELIMITER ; 
    ```

    然后，您可以使用此功能：

    ```
    REPLACE(trim_delim(colname, '-'), ' ', '_') 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T09:20:16.993

听起来你可以用几个`REPLACE`

```
SELECT
  REPLACE(
    REPLACE(
      REPLACE(
        name,
        ' -',
        '-'
      ),
      '- ',
      '-'
    ),
    ' ',
    '_'
  ) as new_name 
```

# visual-studio-2010 - 字符串未被识别为有效的日期时间。在c#中

> ID：11373714
> 
> 赞同：-1
> 
> 时间：2012-07-07T09:10:46.777
> 
> 标签：visual-studio-2010, c#-4.0

我正在使用此代码来传递日期时间。

```
Convert.ToDateTime(textBox1.Text) 
```

但编译器显示错误，字符串未被识别为有效日期时间。那么如何避免这个错误并且是我数据库中的一个日期时间字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T09:23:30.803

```
Convert.ToDateTime(textBox1.Text) 
```

`string`如果in 中的值`textBox1.Text`不代表有效值`DateTime`（或至少无法解析为具有 C# 中的默认功能的值），则此代码将引发异常。您可以添加一些防御性编程来处理此类错误。

该`DateTime`类型（以及 .NET 中的大多数（如果不是全部的话）常见值类型）有[一个专门调用的方法，`TryParse()`](http://msdn.microsoft.com/en-us/library/system.datetime.tryparse.aspx)目的是尝试将值解析为该类型而不引发异常。`true`如果解析成功，则该方法返回，`false`否则返回。它接受一个`out`参数来保存解析后的值（如果解析不成功，则为原始值）。

所以代替这个：

```
var dateTimeValue = Convert.ToDateTime(textBox1.Text); 
```

你可以使用这样的东西：

```
var dateTimeValue = DateTime.MinValue;
if (DateTime.TryParse(textBox1.Text, out dateTimeValue))
    // use the value for something 
```

# grails - Grails Spring Security 插件 - 操作的请求图

> ID：11373721
> 
> 赞同：2
> 
> 时间：2012-07-07T09:11:22.607
> 
> 标签：grails, spring-security

是否可以使用 Requestmap 在 Spring Security 中通过其名称来保护操作？例如，我需要用户进行身份验证才能创建和更新，但匿名用户可以查看。

基本上我想实现类似

```
new Requestmap(url: '/*/create', configAttribute: 'IS_AUTHENTICATED_REMEMBERED').save() 
```

对于所有名为“创建”的操作，无论控制器如何。

我可以从哪里开始寻求实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T18:11:15.420

这个博客展示了你将如何做到这一点：

[http://blog.springsource.com/2010/08/11/simplified-spring-security-with-grails/](http://blog.springsource.com/2010/08/11/simplified-spring-security-with-grails/)

您似乎想在博客中的“动态请求映射”下查看。您需要在 Config.groovy 中添加几行代码，然后您就可以开始创建`Requestmap`s，就像您在那里一样：

```
import grails.plugins.springsecurity.SecurityConfigType
...
grails.plugins.springsecurity.securityConfigType = SecurityConfigType.Requestmap 
```

该博客没有在中间显示通配符的示例，但根据我的经验，我很确定它会起作用。

# api - 在 Node.js 中使用 Pastebin API

> ID：11373727
> 
> 赞同：3
> 
> 时间：2012-07-07T09:12:18.977
> 
> 标签：api, http, node.js, pastebin

我一直在尝试在 Node.js 中向 Pastebin 发布粘贴，但似乎我做错了。

我收到一个**错误的 API 请求，无效的 api_option**，但是我清楚地将**api_option**设置为按照文档要求进行粘贴**。**

```
var http = require('http');
var qs = require('qs');

var query = qs.stringify({
  api_option: 'paste',
  api_dev_key: 'xxxxxxxxxxxx',
  api_paste_code: 'Awesome paste content',
  api_paste_name: 'Awesome paste name',
  api_paste_private: 1,
  api_paste_expire_date: '1D'
});

var req = http.request({
  host: 'pastebin.com',
  port: 80,
  path: '/api/api_post.php',
  method: 'POST',
  headers: {
    'Content-Type': 'multipart/form-data',
    'Content-Length': query.length
  }
}, function(res) {
  var data = '';
  res.on('data', function(chunk) {
    data += chunk;
  });
  res.on('end', function() {
    console.log(data);
  });
});

req.write(query);
req.end(); 
```

`console.log(query)`确认字符串编码良好并且**api_option**存在并设置为**paste**。

现在，我一直在寻找可能的原因。我还尝试在写入时设置编码，`req.write(query, 'utf8')`因为 Pastebin API 提到 POST 必须是 UTF-8 编码的。我一遍又一遍地重写，并多次重新查阅 Node HTTP 文档。

我很确定我在这里完全错过了一些东西，因为我不知道这怎么会失败。有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T02:12:39.760

您创建的不是格式正确的`multipart/form-data`请求；它看起来更像是一个`application/x-www-form-urlencoded`请求。根据我对 pastebin 的 API 的了解（我从未真正使用过它），后者是您真正想要的，因此请尝试将其更改`Content-Type`为它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T22:18:19.883

它不能直接回答你的问题，但也许它可以帮助......

您是否尝试过使用请求模块？

你的例子会更容易阅读，你可能会发现问题......

[麦克尔/请求](https://github.com/mikeal/request/)

# jquery-ui - jquery 使用 :last 和 val()

> ID：11373734
> 
> 赞同：0
> 
> 时间：2012-07-07T09:12:45.037
> 
> 标签：jquery-ui

我正在尝试在我的机器上运行来自[http://jsfiddle.net/ddole/AC5mP/13/](http://jsfiddle.net/ddole/AC5mP/13/)的代码，我使用的方法如下或[此处](http://pastebin.com/cADEuzX1)。

你知道为什么该代码在我的机器上不起作用吗？Firebug 对我没有帮助，我也无法解决问题。我想我需要另一双眼睛:(((

在萤火虫，控制台选项卡中，我没有收到任何错误消息。问题是，在我按下保存按钮后，我无法从对话框中获取该输入的值。$('input:last').val() 似乎是空的

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>jQuery UI Dialog - Modal form</title>
    <link type="text/css" href="css/ui-lightness/jquery-ui-1.8.21.custom.css" rel="stylesheet" />
    <script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="js/jquery-ui-1.8.21.custom.min.js"></script>
    <script  type="text/javascript" >
        jQuery(function($) {
            $('.helpDialog').hide();
            $('.helpButton').each(function() {  
                $.data(this, 'dialog',
                $(this).next('.helpDialog').dialog({
                    autoOpen: false,  
                    modal: true,  
                    width: 300,  
                    height: 250,
                    buttons: {
                        "Save": function() {
                            alert($('.helpText:last').val());
                            $(this).dialog( "close" );
                        },
                        Cancel: function() {
                            $(this).dialog( "close" );
                        }
                    }
                })
            );  
            }).click(function() {  
                $.data(this, 'dialog').dialog('open');  
                return false;  
            });  
        });  
    </script>
</head>
<body>

    <span class="helpButton">Button</span>
    <div class="helpDialog">
        <input type="text" class="helpText" />
    </div>

    <span class="helpButton">Button 2</span>
    <div class="helpDialog">
        <input type="text" class="helpText" />
    </div>

    <span class="helpButton">Button 3</span>
    <div class="helpDialog">
        <input type="text" class="helpText" />
    </div>

    <span class="helpButton">Button 4</span>
    <div class="helpDialog">
        <input type="text" class="helpText" />
    </div>

    <span class="helpButton">Button 5</span>
    <div class="helpDialog">
        <input type="text" class="helpText" />
    </div>    </body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T09:34:22.727

参考**[现场演示](http://jsfiddle.net/SivaCharan/AC5mP/16/)**

为了在保存时显示文本，我已将您的行修改`alert($('.helpText:last').val());`为此`alert($('.helpText', this).val());`

我又增加了一个对提琴手的依赖，

**[http://code.jquery.com/ui/1.8.21/jquery-ui.min.js](http://code.jquery.com/ui/1.8.21/jquery-ui.min.js)**

现在它按预期工作。

## HTML：

```
<span class="helpButton">Button</span>
<div class="helpDialog">
    <input type="text" class="helpText" />
</div>
<span class="helpButton">Button 2</span>
<div class="helpDialog">
    <input type="text" class="helpText" />
</div>
<span class="helpButton">Button 3</span>
<div class="helpDialog">
    <input type="text" class="helpText" />
</div>
<span class="helpButton">Button 4</span>
<div class="helpDialog">
    <input type="text" class="helpText" />
</div>
<span class="helpButton">Button 5</span>
<div class="helpDialog">
    <input type="text" class="helpText" />
</div> 
```

## JS：

```
jQuery(function($) {
  $('.helpDialog').hide();
  $('.helpButton').each(function() {  
    $.data(this, 'dialog', 
      $(this).next('.helpDialog').dialog({
        autoOpen: false,  
        modal: true,  
        width: 300,  
        height: 250,
        buttons: {
            Save: function() {
                alert($('.helpText', this).val());
                $(this).dialog( "close" );
            },
            Cancel: function() {
                $(this).dialog( "close" );
            }
          }
      })
    );  
  }).click(function() {  
      $.data(this, 'dialog').dialog('open');  
      return false;  
  });  
}); 
```

# ruby-on-rails - Rails td 单元链接与实例变量

> ID：11373736
> 
> 赞同：1
> 
> 时间：2012-07-07T09:13:00.693
> 
> 标签：ruby-on-rails

我有这个链接：

```
<%= link_to "#{x.name}", { :controller => 'pages', :action =>
'berufsschule', :given_user => x.name} , :class => "btn btn-danger" %> 
```

我希望它是一个可点击的表格单元格。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T09:39:16.580

你可以通过 CSS 试试这个。创建一个类似这样的类：

```
a.cell_link {display: block; width: 100%; margin: 2em auto;} 
```

然后将其添加到您的`:class => "btn btn-danger"`部分；例如`:class => "btn btn-danger cell_link`。

如果不知道您的表格或 UI 需求，您可能会发现边距部分不需要或不正确。

# html - 使用菜单而不使用框架构建网站

> ID：11373739
> 
> 赞同：1
> 
> 时间：2012-07-07T09:13:29.623
> 
> 标签：html, css, dreamweaver

在 Dreamweaver 中，我使用框架来定义左栏菜单，单击每个菜单选项卡会更改显示在右框架上的 HTML 页面。但是，kompozer 等网页设计工具不支持框架。

1.  在不使用框架的情况下，设计带有此类菜单栏的 HTML 个人网页的最佳方法是什么？
2.  如果 HTML 还不够，您会建议有 Java 背景和 HTML 和 CSS 基本知识的人学习哪些其他脚本语言。
3.  您会推荐哪些网页设计工具来构建个人网站？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T09:44:42.250

**1\. 框架**
我不建议您使用框架来创建您正在寻找的设计。使用`div`s 创建的页面布局可能是要走的路。这样的事情会做：

```
<html>
    <head>
        <title>My Title</title>
        <style type="text/css">
            div { margin:0; padding:0; }
            #container { margin:0 auto; width:960px; }
            #menu { float:left; width:200px; }
            #content { float:right: width:760px; }
        </style>
    </head>
    <body>
        <div id="container">
            <div id="menu"><!-- Your menu --></div>
            <div id="content"><!-- Your content --></div>
        </div>
    </body>
</html> 
```

**2\. 脚本语言**
HTML 和 CSS 足以创建您正在寻找的内容，但是如果您想为您的布局、菜单和内容提供单独的模板，您将不得不寻找一种可以用作服务器端的语言模板[引擎](http://en.wikipedia.org/wiki/Template_engine_%28web%29)。

**3\. 工具**
既然你有 Java 的背景，我肯定会推荐你学习使用你选择的文本编辑器创建 HTML 和 CSS。它们是易于学习的语言，并且与 JavaScript 一起构成了任何想要创建网站的人的基础。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T10:22:01.000

> **Q1** 1 - 在不使用框架的情况下设计带有此类菜单栏的 html 个人网页的最佳方法是什么？

这在很大程度上是个人喜好问题，作为一名开发人员，我已经有一段时间没有使用 Dreamweaver 了，因为虽然它提供了设计概述，但与其他 IDE 相比，它作为编程工具的功能是缺乏的。

与其使用框架来构建您的页面，不如考虑使用您的 HTML 和 CSS 结构创建列。

```
<div id="canvas">
    <div class="row">
       <div class="column1">

       </div>
       <div class="column2">

       </div>
       <br class="clearFix" />
    </div>
</div> 
```

和CSS：

```
.canvas   { height: 100%; width: 100%; overflow: hidden }
.row      { width: 960px; margin: 0 auto; }
.column1  { width:70%; height: 1024px; float:left; } // Could use PX instead of %
.column2  { width:30%; height: 1024px; float:left; } // As above
.clearFix { clear: both; } 
```

或许可以研究一下用于 PHP、HTML、CSS、Javascript的 IDE，例如[Aptana Studio 。](http://www.aptana.com/)这将帮助您理解您编写的代码，并且您的“设计”视图成为在呈现 HTML 和 CSS 方面比 Dreamweaver 更准确的浏览器。

> **Q2** 2 - 如果 html 还不够，您会推荐哪些其他脚本语言给具有 Java 背景并具有 html 和 css 基本知识的人学习。

**Javascript**

Javascript 将帮助您将一些动态内容添加到您的站点，与 JS 扩展如 JQuery 和 JQuery-UI 结合使用，它是选择和操作 DOM 元素的非常强大的工具。

看看[代码学院](http://www.codecademy.com/)。大约 8 个月前，我偶然发现了这个 gem，并推荐给很多人学习 Javascript。（他们还提供 Python、Ruby、HTML 5、CSS 2 / 3 课程）

**PHP**

PHP 是一种服务器端语言，可帮助您处理网站可能具有的任何后端功能，例如表单提交、数据库管理等。

由于 PHP 5 OOP 功能也得到了极大的增强。来自 Java 背景，您不会感到如此迷茫，我猜想学习 PHP OOP。如果您打算编写更深入、更具吸引力的代码，这种语言将帮助您加载。

> **Q3** 3 - 您会推荐哪些网页设计工具来构建个人网站？

如果你想建立一个网站并且你已经具备了能力，那么坚持你目前所知道的，但尝试不同的工具并找到一种语言来学习（我再次引用[CodeAcademy](http://www.codecademy.com/)，它真的那么好）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T09:30:20.077

制作菜单的一种好方法是使用[div 标签](http://www.w3schools.com/tags/tag_div.asp)或[nav 标签](http://www.w3schools.com/html5/tag_nav.asp)（HTML 5 中的新标签）。[然后，您需要使用CSS（层叠样式表）](http://www.w3schools.com/css/)设置菜单及其条目的位置和外观。

如果您不想将整个菜单复制到所有页面，您可以使用[Smarty](http://www.smarty.net/)之类的模板系统（需要 PHP），它可以让您将菜单代码存储在单独的文件中，并在需要的地方包含它。

至于网页设计工具，如果你想像 Word 文档一样编辑 HTML（所见即所得），我推荐[KompoZer](http://kompozer.net)（跨平台，开源）。如果您想直接编辑 HTML，任何带有语法突出显示的体面的编辑器都可以。我使用[Geany](http://www.geany.org/)（跨平台，开源）和[Sublime Text](http://www.sublimetext.com/)（付费，以键盘为中心）。

# javascript - 检测用户滚动了多少

> ID：11373741
> 
> 赞同：42
> 
> 时间：2012-07-07T09:13:40.220
> 
> 标签：javascript, html, css

我的网站上有一个图像弹出功能，以便在用户单击页面上的较小版本时向他们显示全分辨率图片。

这是`CSS`定位它的电流：

```
div#enlargedImgWrapper {
    position: absolute;
    top: 30px;
    left: 55px;
    z-index: 999;
} 
```

现在的问题是，如果我单击页面下方的图像，该窗口仍会出现在页面的左上角，直到我向上滚动才能看到它。我需要它相对于窗口出现，无论它相对于文档的当前位置是什么。

**注意：**我不想使用`position: fixed;`某些图像可能比屏幕高，所以我希望用户也能够沿着图像滚动。

我的想法是使用 JS 来改变`top`值：

```
var scrollValue = ???;
document.getElementById('enlargedImgWrapper').style.top = scrollValue+30 + 'px'; 
```

如何检测用户向下滚动页面的程度（`var scrollValue`）？
或者有没有“更好”的方法来做到这一点？

**编辑：**如果可能的话，我想在没有 jQuery 的情况下这样做。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-07-07T09:29:09.827

纯 JavaScript 使用`scrollTop`and `scrollLeft`：

```
var scrollLeft = (window.pageXOffset !== undefined) ? window.pageXOffset : (document.documentElement || document.body.parentNode || document.body).scrollLeft;
var scrollTop = (window.pageYOffset !== undefined) ? window.pageYOffset : (document.documentElement || document.body.parentNode || document.body).scrollTop; 
```

[https://developer.mozilla.org/en-US/docs/Web/API/Element.scrollTop](https://developer.mozilla.org/en-US/docs/Web/API/Element.scrollTop)

`jQuery`版本：

```
var scrollLeft = $(window).scrollLeft() ;
var scrollTop = $(window).scrollTop() ; 
```

你需要的是这样的：

```
document.getElementById('enlargedImgWrapper').style.top = (scrollTop+30) + 'px'; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-07T09:24:33.903

```
document.getElementById('enlargedImgWrapper').scrollTop; 
```

**MDN**

> 此属性的值等于可滚动范围内内容的当前垂直偏移量。虽然您可以将此属性设置为任何值，但如果您分配的值小于 0，则该属性设置为 0。如果您分配的值大于最大值，则该属性设置为最大值。
> 
> 您可以内联设置此属性，但在加载文档时结果可能不一致。

[scrollTop 属性](http://msdn.microsoft.com/en-us/library/ms534618%28VS.85%29.aspx)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2022-03-03T10:32:25.157

**试试看**

```
console.log('Current Scroll (X/Y)', window.pageXOffset, window.pageYOffset); 
```

你可以在这里找到从水平和垂直到顶部的滚动量。

这是有关滚动的完整文档： [https ://javascript.info/size-and-scroll-window](https://javascript.info/size-and-scroll-window)

# c# - 将python转换为c#的工具

> ID：11373742
> 
> 赞同：21
> 
> 时间：2012-07-07T09:13:50.050
> 
> 标签：c#, python

是否有任何工具或方法可以将 python 代码转换或翻译为 c# 代码？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2019-02-13T13:14:53.337

有一个开源工具可能有助于将 Python 转换为 C#：

[https://github.com/uxmal/pytocs](https://github.com/uxmal/pytocs)

该页面中的示例转换看起来很有希望

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-07T09:18:00.263

嗯，例如，通过[IronPython](http://ironpython.net/)重用现有的 Python 代码库不是更明智吗？

# c# - MonoMac 控制台应用程序仅返回 nvarchar(max) 的第一个字符

> ID：11373748
> 
> 赞同：1
> 
> 时间：2012-07-07T09:14:37.493
> 
> 标签：c#, sql-server, mono, monomac

我有一个控制台应用程序，我通过 Mono 在 Mac OS X 上运行。尽管它在 Windows 操作系统上正确执行，但它只返回 nvarchar(max) 变量的第一个字符。这是 C# 代码：

```
SqlConnection myConnection = new SqlConnection(Variables.connectionString());
SqlCommand myCommand = new SqlCommand("IndexPageDetailsGet", myConnection);

myCommand.CommandType = CommandType.StoredProcedure;

SqlParameter parameterIndexPageID = new SqlParameter("@IndexPageID", SqlDbType.Int);
parameterIndexPageID.Value = indexPageID;
myCommand.Parameters.Add(parameterIndexPageID);

SqlParameter parameterIndexPageText = new SqlParameter("@IndexPageText", SqlDbType.NVarChar, -1);
parameterIndexPageText.Direction = ParameterDirection.Output;
myCommand.Parameters.Add(parameterIndexPageText);

myConnection.Open();
myCommand.ExecuteNonQuery();
myConnection.Close();

return (string)parameterIndexPageText.Value; // Only returns the first character 
```

这是存储过程：

```
ALTER PROCEDURE [dbo].[IndexPageDetailsGet]
(
    @IndexPageID int,
    @IndexPageText nvarchar(max) OUTPUT
)
AS SELECT
    @IndexPageText = IndexPageText
FROM
    IndexPages
WHERE
    IndexPageID = @IndexPageID 
```

有没有其他人目睹过这种行为和/或知道如何解决它？

编辑：这是我的单声道版本信息：

MonoDevelop 3.0.3.2
运行时：
Mono 2.10.9 (tarball)
GTK 2.24.10
GTK# (2.12.0.0)
包版本：210090011

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T05:33:38.010

我找到了解决方法。我没有使用返回字符串的存储过程，而是使用了返回 SqlDataReader 的存储过程。然后它允许我使用完整的 nvarchar(max) 值的字符串。因此，在 C# 中：

```
string indexPageText = string.Empty;

SqlConnection myConnection = new SqlConnection(Variables.connectionString());
SqlCommand myCommand = new SqlCommand("IndexPagesGetByIndexPageID", myConnection);

myCommand.CommandType = CommandType.StoredProcedure;

SqlParameter parameterIndexPageID = new SqlParameter("@IndexPageID", SqlDbType.Int);
parameterIndexPageID.Value = indexPageID;
myCommand.Parameters.Add(parameterIndexPageID);

myConnection.Open();
SqlDataReader result = myCommand.ExecuteReader(CommandBehavior.CloseConnection);

while (result.Read())
{
    indexPageText = (string)result["IndexPageText"];
    break;
}
result.Close();

indexPageDetails.indexPageText = indexPageText; 
```

和存储过程：

```
ALTER PROCEDURE
    [dbo].[IndexPagesGetByIndexPageID]
(
    @IndexPageID int
)
AS SELECT
    *
FROM
    IndexPages
WHERE
    IndexPageID = @IndexPageID 
```

# c# - 计算 JSON 响应中的对象总数

> ID：11373749
> 
> 赞同：0
> 
> 时间：2012-07-07T09:14:38.880
> 
> 标签：c#, c#-4.0, twitter, json.net

我想[从这个 Response](http://jsonviewer.stack.hu/#http://api.twitter.com/1/statuses/retweeted_to_user.json?screen_name=uxmangjx&count=100)计算对象的数量。我不想为这么小的目的制作课程，然后对课程进行迭代。有没有更短的方法来做到这一点。

我同时使用 JSON.NET 和 web.Serialization。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T09:37:12.023

这将返回数组中直接对象的计数。

```
var input = "[{Name: 'Hello'}, {Name: 'Hi'}]";
dynamic response = new System.Web.Script.Serialization.JavaScriptSerializer().Deserialize<dynamic>(input);
Response.Write(response.Length); 
```

# android - 需要一个android的推送框架

> ID：11373752
> 
> 赞同：0
> 
> 时间：2012-07-07T09:14:53.630
> 
> 标签：android, node.js, redis, push, pusher

我们需要在我们的安卓聊天应用程序中实现推送功能。我们不想追求基于 DB 轮询 http-endpoint 的方法，因为这意味着轮询，并且它会严重耗尽电池电量。

因此，我们正在寻找一个实时推送框架或具有频道订阅的 PubSub 机制（每个用户将在其一生中成为唯一的频道名称）。我们经历了以下几点：

*   [Faye.js](http://faye.jcoglan.com)（基于nodejs和redis，但没有客户端的android库）
*   [Pusher](http://pusher.com)（但这有“活动连接”的限制。这不会让很多用户在线，因为每个用户登录都会创建一个到 pusher.com 的连接，这是收费的）
*   [PubNub](http://pubnub.com)（与 Pusher.com 相同的问题）

在我们的案例中，任何带有 android 客户端库的消息传递框架都可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T09:18:13.767

试用[适用于 Android 的 Google Cloud Messaging](http://developer.android.com/guide/google/gcm/index.html)。

# c# - 我可以在 C# 中使函数采用可选参数还是需要重载它？

> ID：11373753
> 
> 赞同：0
> 
> 时间：2012-07-07T09:15:00.847
> 
> 标签：c#

我在界面中有以下内容：

```
string GetTopic(string rk); 
```

这个功能：

```
public string GetTopic(string rk)
{
    return string.Format("{0}.{1}.{2}",
        rk.Substring(0, 2).TrimStart('0'),
        rk.Substring(2, 2).TrimStart('0').PadLeft(1, '0'),
        rk.Substring(4, 2).TrimStart('0').PadLeft(1, '0'));
} 
```

我想添加一个可选的第二个参数，使函数能够像这样调用：

```
var a = GetTopic("010101") 
```

或者

```
var b = GetTopic("010101","test") 
```

在第一种情况下，我想获得输出“1.1.1”，在第二种情况下，我想获得输出“1.1.1 - test”。

这可能吗，还是我需要创建两个函数并让一个重载另一个？如何在我的界面中指定可选的第二个参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T09:17:15.963

您可以设置默认值：

```
public string GetTopic(string rk, string anotherParam = "")
{
    String append = (String.IsNullOrEmpty(anotherParam)) ? "" : " - " + anotherParam;
    return string.Format("{0}.{1}.{2}{3}",
        rk.Substring(0, 2).TrimStart('0'),
        rk.Substring(2, 2).TrimStart('0').PadLeft(1, '0'),
        rk.Substring(4, 2).TrimStart('0').PadLeft(1, '0'),
        append);
} 
```

所以如果你打电话，“anotherParam”将被测试：

```
var a = GetTopic("010101"); 
```

对于您的交互定义：

```
public interface IUtilityService 
{ 
    string GetTopic(string rk, string suffix = ""); 
} 
```

MSDN：http: [//msdn.microsoft.com/de-de/library/dd264739.aspx](http://msdn.microsoft.com/de-de/library/dd264739.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T09:17:10.963

在 C# 4.0 中，您可以为参数提供默认值，因此使其成为可选：

```
public string GetTopic(string rk, string param2 = "5")
{
    return string.Format("{0}.{1}.{2}",
        rk.Substring(0, 2).TrimStart('0'),
        rk.Substring(2, 2).TrimStart('0').PadLeft(1, '0'),
        rk.Substring(4, 2).TrimStart('0').PadLeft(1, '0'));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T09:17:01.753

您可以使用`params`关键字：

```
public string GetTopic(string rk, params options)
{
    return string.Format("{0}.{1}.{2}",
        rk.Substring(0, 2).TrimStart('0'),
        rk.Substring(2, 2).TrimStart('0').PadLeft(1, '0'),
        rk.Substring(4, 2).TrimStart('0').PadLeft(1, '0'));
} 
```

这为您提供了一系列可选参数。这是一个参考[链接](http://msdn.microsoft.com/en-us/library/w5zay9db.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T09:17:58.210

有可能的：

```
public string GetTopic(string rk,string lk = null)
{
    if (lk!=null)
    { //with param logic

    }
    else
    { //without param logic

    }
    return string.Format("{0}.{1}.{2}",
        rk.Substring(0, 2).TrimStart('0'),
        rk.Substring(2, 2).TrimStart('0').PadLeft(1, '0'),
        rk.Substring(4, 2).TrimStart('0').PadLeft(1, '0'));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-07T09:33:26.633

您需要更改界面以使第二个参数可选：

```
public interface YourInterface
{
    string GetTopic(String rk, String suffix = "");
} 
```

然后，实现你的接口，再次指定可选参数：

```
public class YourClass : YourInterface
{
    public string GetTopic(String rk, String suffix = "")
    {
        return string.Format("{0}.{1}.{2}{3}{4}",
            rk.Substring(0, 2).TrimStart('0'),
            rk.Substring(2, 2).TrimStart('0').PadLeft(1, '0'),
            rk.Substring(4, 2).TrimStart('0').PadLeft(1, '0'),
            string.IsNullOrWhiteSpace(suffix) ? "" : " - ",
            suffix);
    }    
} 
```

在这种情况下使用可选参数的注意事项：注意您指定的默认值，因为根据调用方法的方式，将使用接口中定义的值或实现中定义的值。

例如，如果要定义接口并且要定义`suffix = ""`实现`suffix = null`：

*   `YourInterface.GetTopic("010101")`将传递空字符串作为第二个参数，但是
*   `YourClass.GetTopic("010101")`反而会通过`null`！

可以[在此博客文章](http://elegantcode.com/2010/01/28/c-4-0-optional-parameters-exploration/)中找到对可能情况的一个很好的概述。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-07T09:33:55.527

您需要将可选参数添加到界面中：

```
 interface IInterface
    {
        string GetTopic(string one, string t = null);
    }

    class a : IInterface
    {
        public string GetTopic(string one, string t = null)
        {
            throw new NotImplementedException();
        }
    } 
```

# asp.net - windows.postMessage 行为？

> ID：11373754
> 
> 赞同：1
> 
> 时间：2012-07-07T09:15:45.520
> 
> 标签：asp.net, ajax, postmessage

我需要一个跨域调用来将数据发送到另一台服务器并取回相同的数据来验证它，因此我将 window.postMessage 与 Iframe 一起使用。

它工作正常。

我在消息中发送 1 MB 字符串并从中返回，因此它正在发送 1 MB 字符串并接收 1 MB 字符串，此任务在 appx 4 秒内完成。我认为这不会发生。

但是当我使用 jsonp 从使用 ajax jsonp 的同一台服务器下载相同的内容时，需要 9 秒。

所以最后下载只需要 9 秒，而 postmessage（发送和响应）都需要 4 秒。怎么可能？我认为它应该超过9秒。

请让我知道为什么会这样。

谢谢， Laxmilal Menaria

# javascript - 如何使用 Z-index 设置 div 并修复 css

> ID：11373758
> 
> 赞同：0
> 
> 时间：2012-07-07T09:16:22.687
> 
> 标签：javascript, jquery, html, css, z-index

关注的区域 -

*   我的蓝色 div 与绿色 div 重叠。（我想要一个绿色的 Div 然后在蓝色的 Div 旁边）
*   在加载的内容上，蓝色的 div 会掉下来，但是我试图使用 jquery属性`Mouseover`将“mydatatoshow”div 设置为“rightsideblock” 。`z-index`

请看一下，让我知道可能的解决方案。

我的工作代码---

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style type="text/css">
.container{width:999px;}
.leftsideblock{float:left; border:1px solid green;width:674px;}
.rightsideblock{border:5px solid blue;}
</style>

<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
$(document).ready(function(){

$('.mydivdata').mouseover(function(){
        $('.mydatatoshow').css('z-index', '9999');
        $('.mydatatoshow').show();
        var mydata = $(this).text();
        $('.mydatatoshow').html(mydata);        
    });

$('.mydivdata').mouseout(function(){
$('.mydatatoshow').hide();
});

});
</script>

<title>Test To Test</title>
</head>
<body>

<div class="container">
    <div class="leftsideblock">
    <div class="mydivdata">
<table width="650" border="0">
<tbody>
<tr>
<td width="90" valign="top" rowspan="2" class="myimageclass">&nbsp;</td>
<td width="193" valign="top">Monday 07 July 2012</td>
<td width="424">
Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
</td>
</tr>
</tbody>
</table>
</div>

    <div class="mydivdata">
<table width="650" border="0">
<tbody>
<tr>
<td width="90" valign="top" rowspan="2" class="myimageclass">&nbsp;</td>
<td width="193" valign="top">Friday 06 July 2012 8:00AM</td>
<td width="424">
Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
</td>
</tr>
</tbody>
</table>
</div>
    </div>

    <div class="mydatatoshow">
    </div>

    <div class="rightsideblock">
    <p>
    This is right sidebar data.This is right sidebar data.This is right sidebar data.This is right sidebar data.This is right sidebar data.This is right sidebar data.This is right    sidebar data.This is right sidebar data.This is right sidebar data.This is right sidebar data.This is right sidebar data.This is right sidebar data.This is right sidebar data.
    </p>
    </div>

</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T09:50:38.863

`z-index`仅在您指定位置类型时才有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T10:06:08.893

试试这个

```
 <html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.container{width:999px;}
.leftsideblock{float:left; border:1px solid green;width:674px;}
.rightsideblock{border:5px solid blue;}
</style>

<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>

<title>Test To Test</title>
</head>
<body>
    <div class="container">
    <table>
    <tbody><tr>
    <td>
        <div class="leftsideblock">
            <div class="mydivdata">
                <table width="650" border="0">
                    <tbody>
                    <tr>
                        <td width="90" valign="top" rowspan="2" class="myimageclass">&nbsp;</td>
                        <td width="193" valign="top">Monday 07 July 2012</td>
                        <td width="424">
                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>

            <div class="mydivdata">
                <table width="650" border="0">
                <tbody>
                <tr>
                    <td width="90" valign="top" rowspan="2" class="myimageclass">&nbsp;</td>
                    <td width="193" valign="top">Friday 06 July 2012 8:00AM</td>
                    <td width="424">
                        Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                    </td>
                </tr>
                </tbody>
                </table>
            </div>
        </div>
        </td>
        <td>
        <div class="rightsideblock" style="top: 0;position: absolute;width: 300px;float: right;">
            <p style="z-index:-1">
                This is right sidebar data.This is right sidebar data.This is right sidebar data.This is right sidebar data.This is right sidebar data.This is right sidebar data.This is right    sidebar data.This is right sidebar data.This is right sidebar data.This is right sidebar data.This is right sidebar data.This is right sidebar data.This is right sidebar data.
            </p>

        <div class="mydatatoshow" style="top: 0px; left: 0px; z-index: 9999; float: right; position: absolute; display: none; ">

                    &nbsp;
                    Friday 06 July 2012 8:00AM

                        Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.

            </div></div>

        </td>
        </tr>
        </tbody></table>
    </div>

    <script type="text/javascript">
    $(document).ready(function(){

    $('.mydivdata').mouseover(function(){
            $('.mydatatoshow').css('z-index', '9999');
            $('.mydatatoshow').show();
       //     document.getElementById('to_hide').style.display='none';
            var mydata = $(this).text();
            $('.mydatatoshow').html(mydata);        
        });

    $('.mydivdata').mouseout(function(){
    $('.mydatatoshow').hide();
    //document.getElementById('to_hide').style.display='block';
    });

    });
    </script>

</body></html> 
```

# android - 我在三星 Galaxy s3 的 google play 中看不到我的 android applicatio

> ID：11373759
> 
> 赞同：1
> 
> 时间：2012-07-07T09:16:34.920
> 
> 标签：android

我在 google play 中上传了我的 android 应用程序。在google play上传后，我在可用设备列表中看不到三星galaxy s3。

我试图到处寻找答案，但我无法解决。

我还在下面发布了我的 android menifiest 文件：

```
 <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.eliteplatinum.budgetplanner"
  android:versionCode="12" 
```

 android:versionName="2.1" >

```
<!-- android:installLocation="auto" -->

<uses-sdk android:minSdkVersion="4" />

<supports-screens
    android:anyDensity="true"
    android:largeScreens="true"
    android:normalScreens="true"
    android:smallScreens="true" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="com.android.vending.BILLING" />

<application
    android:icon="@drawable/app_icon"
    android:label="@string/app_name" >
    <activity
        android:label="@string/app_name"
        android:name=".Splash"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        <intent-filter >
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <receiver
        android:name="AlarmReceiver"
        android:process=":remote" >
    </receiver>

    <activity
        android:name=".NotificationDialog"
        android:theme="@android:style/Theme.Translucent.NoTitleBar" >
    </activity>
    <activity
        android:name=".Login"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
    </activity>
    <activity
        android:name=".SignUp"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
    </activity>
    <activity
        android:name=".Forecast"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
    </activity>
    <activity
        android:name=".Search"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
    </activity>
    <activity
        android:name=".Plot"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
    </activity>
    <activity
        android:name=".PieChart"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
    </activity>
    <activity
        android:name="com.bargraph.BarGraph"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
    </activity>
    <activity
        android:name=".BarGraph"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
    </activity>
    <activity
        android:name=".Reports"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
    </activity>
    <activity
        android:name=".Summary"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
    </activity>
    <activity
        android:name=".Calc"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
    </activity>
    <activity
        android:name=".Settings"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
    </activity>
    <activity
        android:name=".Accounts"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
    </activity>
    <activity
        android:name=".AddAccount"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
    </activity>
    <activity
        android:name=".EditAccount"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
    </activity>
    <activity
        android:name=".FAQs"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
    </activity>
    <activity
        android:name=".SyncNRestore"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
    </activity>
    <activity
        android:name="com.dignizant.inappbilling.Plans"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
    </activity>
    <activity
        android:name=".Categories"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
    </activity>
    <activity
        android:name=".AddCategory"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
    </activity>
    <activity
        android:name=".EditSubCategories"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
    </activity>
    <activity
        android:name="com.wheel.main"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
    </activity>
    <activity
        android:name="com.horizontal.wheel.DefaultDateSlider"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
    </activity>

    <service android:name="com.dignizant.inappbilling.BillingService" />

    <receiver android:name="com.dignizant.inappbilling.BillingReceiver" >
        <intent-filter >
            <action android:name="com.android.vending.billing.IN_APP_NOTIFY" />
            <action android:name="com.android.vending.billing.RESPONSE_CODE" />
            <action android:name="com.android.vending.billing.PURCHASE_STATE_CHANGED" />
        </intent-filter>
    </receiver>
</application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:26:51.850

当用户在 Google Play 中搜索应用程序时，Googly play 正在使用过滤。

在 Google Play 中搜索应用程序时需要考虑很多事情。

请访问以下链接以获取想法。

[过滤 Google Play 中的应用程序](http://hasmukhbhadani.blogspot.in/2013/01/filtering-app-in-google-play.html)

让我知道您有任何疑问！

# ios - 如果我使用 Storyboards，我还需要创建 xibs 以实现向后兼容性吗？

> ID：11373760
> 
> 赞同：0
> 
> 时间：2012-07-07T09:16:35.983
> 
> 标签：ios, ios5, ios4

这是一个通用的 iOS 5+/4 问题：

如果我使用情节提要制作我的应用程序，它将无法在 iOS 5 之前的设备（iphone/ipod touch）上运行。

Apple 要求针对 iOS 5+ 的应用程序必须仍与 iOS 4 兼容。

所以基本上，我最好从一个非故事板应用程序（即xib）开始？换句话说，如果我最终不得不创建 xib，那么为什么要使用故事板开始呢？

虽然故事板很漂亮并且可以帮助组织布局，但最终似乎仍然需要做更多的工作。还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T09:25:46.367

是的，你是对的，你不能在 iOS 5 之前使用故事板。所以如果你正在考虑支持 iOS 4.3，那么你最好从一开始就使用 xibs

# php - 重定向标头

> ID：11373766
> 
> 赞同：2
> 
> 时间：2012-07-07T09:17:37.497
> 
> 标签：php

我有一个电子邮件表格，我正在验证一个日期，它是一个预订表格。我正在做的是当开始日期大于结束日期时，它会给我一条消息，告诉我修复日期并重定向到页面。我有 2 个页面，即预订表格的页面，当我单击提交时，它会转到 contact_engine 页面以验证并发送电子邮件：

我是这样说的：

```
if ($datebegin >= $dateend){
    echo '<script>alert("Fix the Date");</script>'; 

exit; 
```

问题是当它退出时它停留在功能页面中，我希望它退出但转到上一页。有人可以给我一些帮助吗？我尝试改用`exit`. 我尝试使用它，`header("Refresh: 1; url=http:/website.com/booking.php");`但不知何故这将我带到了`sent_page_booking page`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T10:56:06.713

用这个：

```
header("Location: phppage.php"); 
```

并且不要`echo`在此代码之前使用。将此代码放在启动中并使用按钮事件调用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T10:31:26.067

我建议另一种方法：使用验证处理表单提交的正确方法是使用**Post-Redirect-Get**技术：

1.  用户提交表单（即**POST**请求）。
2.  表格有效吗？如果是这样，处理它并使用**GET****重定向**到确认页面。
***   如果表单无效，只需显示带有错误消息的表单（作为对原始**POST**请求的响应。**

 **为了显示：

```
+--------+   POST   +--------+   Yes    +----------+   GET   +--------------+
| Submit | -------> | Valid? | -------> | Redirect | ------> | Confirmation |
+--------+          +--------+          +----------+         +--------------+
     ^                   |
     |                   | No
     +-------------------+ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T10:18:32.220

如何进行定时重定向，以便用户收到显示的错误消息：

```
header("refresh:5;url=back-to-booking-form.php");
echo 'Form Error. Fix the date. Redirecting to the booking form in about 5 secs.'; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-26T09:42:10.710

使用以下链接获得准确答案

[https://stackoverflow.com/questions/13539752/redirect-function](https://stackoverflow.com/questions/13539752/redirect-function)

```
function redirect_url($path)
{
  header("location:".$path);
  exit;
} 
```**

# c - 从结构队列中删除所有节点

> ID：11373770
> 
> 赞同：2
> 
> 时间：2012-07-07T09:18:03.933
> 
> 标签：c, structure, free

我正在尝试从我的结构队列中删除所有节点。

结构：

```
struct element{

    int id;
    int sign;
    int year;
    int month;
    double amount;

    struct element *next;
};

struct queue{
    struct element *head;  

    int size;
}; 
```

我写的函数：

```
void delete(struct queue *queue) {
    if (queue->size == 0){
        printf("Structure is empty\n");
    }
    else {
        struct element* this;
        struct element* other;      

        for(this=queue->head;this!=NULL;this=other)
        {
            other=this->next;
            free(this);
        }
        free(queue);
    }   
} 
```

它不起作用，我没有想法。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T09:28:23.203

在您的`delete`例程中，`queue`如果大小为空，则不释放它，但如果大小非空，则释放它。你可能应该对这两种情况都做同样的事情。也就是说，要么不在两个地方都免费，要么在两个地方都免费。

需要弄清楚什么是正确的事情是很麻烦的，因为`delete`不知道是如何`queue`分配的。鉴于您当前的设计，一种出路可能是传递一个标志`delete`来指示它应该做什么：

```
void delete(struct queue *queue, int do_free) {
    if (queue->size == 0){
        printf("Structure is empty\n");
    }
    else {
        struct element* this;
        struct element* other;
        for(this=queue->head;this!=NULL;this=other) {
            other=this->next;
            free(this);
        }
        queue->head = 0;
        queue->size = 0;
    }
    if (do_free) free(queue);
}

struct queue new;
/* ... */
delete(&new, 0);      /* don't free the queue */

struct queue *empty_new = malloc(sizeof(struct queue));
empty_new->size = 0;
delete(empty_new, 1); /* free the empty queue */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T09:33:55.317

这里

```
struct queue new;
//...
delete(&new); 
```

`new`分配在堆栈上，所以不要调用`free(queue)`. `delete`相反，`queue->head = NULL; queue->size = 0;`如@kirill 所述，设置为指示队列现在为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T09:31:12.383

只传递队列的第一个元素怎么样。

```
void delete(element *el ) {
    if(el) {
        delete(el->next );
        free(el);
    }
} 
```

和

```
typedef struct _element{

  int id;
  int sign;
  int year;
  int month;
  double amount;

  struct _element *next;

} element; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T09:37:37.887

您可能忘记在函数末尾更新指向 NULL 的指针以及将队列的大小更改为 0。

# ios - iOS 5 使用 .XIB 创建自定义 UIButton 可重用组件

> ID：11373775
> 
> 赞同：0
> 
> 时间：2012-07-07T09:18:40.807
> 
> 标签：ios, uibutton, storyboard, xib, reusability

我是 iOS 开发的新手，我正在一个使用 iOS5 和 Storyboard 的项目中工作。我想创建一个可重用的组件，比如一个按钮，带有一个自定义视图（在按钮内部会有一些图像和标签，它将是一个大按钮），在故事板的同一个视图中创建其中的一些。所以我创建了一个带有 UIButton 的 XIB 文件 (ItemClothes.xib)，其中包含一些 UIImagesViews 和一个 UILabel。然后，我创建了 UIButton 的子类（UIItemClothes.h 和 UIItemClothes.m），具有 UIImageViews 和 UILabel 组件的属性。

**UIItemClothes.h**

```
#import <UIKit/UIKit.h>
#import "SCClothes.h"

@interface UIItemClothes : UIButton

@property (nonatomic, strong) IBOutlet UIImageView *imageClothes;
@property (nonatomic, strong) IBOutlet UIActivityIndicatorView *loadingImage;
@property (nonatomic, strong) IBOutlet UIImageView *seasonIconClothes;
@property (nonatomic, strong) IBOutlet UIImageView *categoryIconClothes;
@property (nonatomic, strong) NSString *idClothes;
@property (strong, nonatomic) IBOutlet UILabel *lblProva;

@end 
```

**UIItemClothes.m**

```
#import "UIItemClothes.h"

@implementation UIItemClothes

@synthesize imageClothes = _imageClothes;
@synthesize loadingImage = _loadingImage;
@synthesize seasonIconClothes = _seasonIconClothes;
@synthesize categoryIconClothes = _categoryIconClothes;
@synthesize idClothes = _idClothes;
@synthesize lblProva = _lblProva;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        [self addSubview:[[[NSBundle mainBundle] loadNibNamed:@"ItemClothes" owner:self options:nil] objectAtIndex:0]];
    }
    return self;
}

@end 
```

然后在 .XIB 文件中，我将 UIButton 的类设置为 UIItemClothes，并在 XIB 的 UI 组件和我的类属性之间建立关系。

因此，在那之后，在情节提要中，在一个视图的 ViewController 中，我编写了以下代码：

```
UIItemClothes *item = [[UIItemClothes alloc] initWithFrame:CGRectMake(0.0, 0.0, 200.0, 200.0)];
item.lblProva.text = @"test!";
[item.categoryIconClothes setImage:iconCategory];
item.seasonIconClothes.image = iconSeason;
[cell addSubview:item]; 
```

如您所见，该组件将位于 TableViewCell 内，其想法是在其中放置更多组件（UIItemClothes）。

问题是组件已绘制，但任何出口都设置为我在上面的代码中所做的。

谁能帮我？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:28:25.903

好吧，问题已经解决了……不再需要 UIButton 的自定义子类，而是需要一个带有所有 Outlets 的 ViewController。然后在另一个 ViewController（StoryBoard）中初始化这个新的 ViewController

# java - 将类主体中的对象创建传递给另一个类

> ID：11373776
> 
> 赞同：0
> 
> 时间：2012-07-07T09:18:44.857
> 
> 标签：java

我有这堂课：

```
public class Example
{
    public void static main(String[] args)
    {
        Object obj = new Object();
        OtherClass oc = new OtherClass(obj);
    }
}

public class OtherClass
{
    private Object object;
    public OtherClass(Object ob)
    {
    this.object = ob;
    }
} 
```

现在我将在另一个主目录中使用 OtherClass。我能怎么做？这是我想使用之前在类示例中创建的 OtherClass 对象的类

```
public class myownmain
{
    public static void main(String[] args)
    {
        // Here I need OtherClass object created in Example class
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T09:27:32.977

这些不同类中的主要功能代表不同的应用程序，您将无法从另一个应用程序中引用在一个应用程序中创建的对象。

如果您想在其他主要功能中使用类似的对象，您只需创建新实例并使用它们。尽管您尝试实现的目标并不明显。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T09:29:16.220

Java 程序通常只有一种`main`方法，或者更具体地说，`main`程序启动时只会调用一种方法。但是，可以`main`从您的方法中调用其他方法。

如果不重组上面的类，你就无法做到这一点`Example`，因为`OtherClass`实例是`main`方法中的局部变量，因此你无法检索它。

`OtherClass`一种解决方案是在您自己的`main`方法中实例化：

```
public class myownmain {
    public static void main(String[] args) {
        Object obj = new Object();
        OtherClass oc = new OtherClass(obj);
    }
} 
```

另一种选择是重写`Example`类以将`OtherClass`实例公开为静态属性：

```
public class Example {
    private static OtherClass oc;

    public static OtherClass getOc() {
        return oc;
    }

    public static void main(String[] args) {
        Object obj = new Object();
        oc = new OtherClass(obj);
    }
} 
```

然后您可以在调用后获取此实例`Example.main`：

```
public class myownmain {
    public static void main(String[] args) {
        Example.main(args);
        OtherClass oc = Example.getOc();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T09:29:21.277

你应该只有一种`main(String[] args)`方法。如果您想从 *Example 类中传递**OtherClass*创建方法，例如

 *```
public static OtherClass getOtherClass(Object obj) {
   return new OtherClass(obj);
} 
```

然后在*MyOwnMain 类*中添加

```
Object obj = new Object();
OtherClass oc = Example.getOtherClass(obj); 
```

但正如*@Eng.Fouad*的意思，如果你想拥有两个正在运行的应用程序，只需点击他的链接即可。*

# asp.net - 使用asp文件上传控件将图像上传到网络服务器

> ID：11373778
> 
> 赞同：0
> 
> 时间：2012-07-07T09:19:18.933
> 
> 标签：asp.net, file-upload, plesk

我正在使用代码隐藏中的语言 c# 在 asp.net 中开发 Web 应用程序。我正在尝试使用文件上传控件将图像上传到我的网络服务器。我正在使用具有并行 plesk 9.5.4 的 Windows 服务器。我的代码在本地服务器中运行良好，但是当我托管应用程序时，会显示“Permission denied to httpdocs/images/xyz.jpg”之类的错误消息。

我想将任何图像文件上传到我的网络服务器位置“httpdocs://images/”。有没有办法解决这个问题？或者如何在 plesk 面板中设置目录的权限？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-04-26T05:43:22.950

我想我有一个解决方案给你......默认情况下更改文件夹的权限权限是只读的，更改权限读写展台并将文件保存在Web服务器上

要了解更多信息，请访问此链接.... [https://support.plesk.com/hc/en-us/articles/213407189-How-to-manage-file-directory-permissions-via-Plesk-File-Manager](https://support.plesk.com/hc/en-us/articles/213407189-How-to-manage-file-directory-permissions-via-Plesk-File-Manager)

# iphone - 可可稠度

> ID：11373784
> 
> 赞同：0
> 
> 时间：2012-07-07T09:20:18.337
> 
> 标签：iphone, xcode

如果我能写：

```
test_string = [[NSString alloc] init]; and
test_date   = [[NSDate alloc] init]; 
```

为什么，如果只是出于一致性的原因，我不能写：

```
test_integer = [[NSInteger alloc] init]; or
test_decimal = [[NSDecimal alloc] init]; 
```

以及如何设置它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T09:36:01.540

我建议必读[数字和值编程指南。](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/NumbersandValues/NumbersandValues.html)

它将帮助您从这一切开始，但请记住，通常使用标量值（C 标准值类型：int、float、long 等）会更容易，除非您想具体使用它们（将值存储在NSArray，在微积分上具有最高的精度并避免奇怪的浮点舍入等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T10:07:57.677

您的前两个示例是真实对象，因此*必须*使用`alloc`/ `init`（或简写形式`new`.

An`NSInteger`只是`int`or的 typedef `long`，具体取决于平台，也就是说，它只是`int`or的另一个名称`long`。这些都是所谓的*原始类型*。它们不是真实的物体，而是更简单的东西。它们没有任何方法、iVar 等 - 事实上，它们实际上只是数字，而表示数字的对象（例如 an `[NSNumber numberWithInt:1]`）要多得多。

当速度和内存效率很重要时，会使用原始类型，而整数的使用如此频繁以至于这些考虑在这里很重要。顺便说一句，Smalltalk（启发了 Objective-C 语法和对象模型的语言）没有原始类型。甚至整数，甚至布尔值都是对象。这更加一致（并且在某些方面更强大），但它是使 Smalltalk 在 70 年代和 80 年代初期变得相当缓慢的因素之一。

`NSDecimal` is also not an object, but a struct. A struct is essentially a list of named primitive values. Other often-used structs in Objective-C where this might be more obvious are `CGPoint` (A struct containing two floats, *x* and *y*), `CGSize` (again a struct containing two floats, this time called *width* and *height*), `CGRect` (a struct containing a `CGPoint` struct named *origin*, and a `CGSize` struct named *size*).

# c# - 编写一个分析 XML 数据的递归方法

> ID：11373785
> 
> 赞同：1
> 
> 时间：2012-07-07T09:20:40.720
> 
> 标签：c#, recursion

我需要 C# 逻辑来分析 XML 文件中的某些条件。逻辑应该能够评估条件并告诉我最终结果是真还是假：

示例：1：规则（A AND B AND C）在 XML 文件中表示如下：

```
 <Evaluate>       
        <!-- (A AND B AND C)-->
        <AND>                               
            <Condition Name="A" Operator="!=" Value="0"/>
            <Condition Name="B" Operator="!=" Value="0"/>
            <Condition Name="C" Operator="==" Value="17"/>
        </AND>                
   </Evaluate> 
```

我知道这很简单，但以下是一些需要从 C# 代码评估的复杂规则：示例：2：

```
<Evaluate>
    <!-- (A AND B) OR C -->
    <OR>
        <Condition Name="C" Operator="==" Value="17"/>
        <AND>
            <Condition Name="A" Operator="!=" Value="0"/>
            <Condition Name="B" Operator="!=" Value="0"/>
        </AND>            
    </OR>                
</Evaluate> 
```

示例：3：

```
<Evaluate>
    <!-- (A)  OR ((B AND C) OR D)-->
    <OR>
        <Condition Name="A" Operator="!=" Value="0"/>
        <OR>
            <Condition Name="D" Operator="!=" Value="0"/>
            <AND>
                <Condition Name="B" Operator="!=" Value="0"/>
                <Condition Name="C" Operator="!=" Value="0"/>                    
            </AND>
        </OR>
    </OR>               
</Evaluate> 
```

示例：4：

```
<Evaluate>
    <!-- (A AND B)  OR ((C AND D) OR E)-->
    <OR>
        <AND>
            <Condition Name="A" Operator="!=" Value="0"/>
            <Condition Name="B" Operator="!=" Value="0"/>
        </AND>            
        <OR>
            <Condition Name="E" Operator="!=" Value="0"/>
            <AND>
                <Condition Name="C" Operator="!=" Value="0"/>
                <Condition Name="D" Operator="!=" Value="0"/>                    
            </AND>
        </OR>
    </OR>
</Evaluate> 
```

向您解释 Xml 节点：

```
<Condition Name="D" Operator="!=" Value="0"/> 
```

表示 (D != 0) 与否。

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T14:16:27.167

也许这样的事情会让你开始。

```
// warning, not tested
bool Evaluate(XmlNode node)
{
  // what kind of node is this? call one of the other functions
}

bool Condition(XmlNode node)
{
  // this is a condition node, evaluate it
}

bool And(XmlNode node)
{
  bool val = true;
  foreach (XmlNode child in node.ChildNodes)
  {
     val = val && Evaluate(child);
  }
  return val;
}

bool Or(XmlNode node)
{
  bool val = false;
  foreach (XmlNode child in node.ChildNodes)
  {
     val = val || Evaluate(child);
  }
  return val;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T02:28:49.033

我为你做了一个样品

```
 static void Main(string[] args)
    {
        XmlDocument doc = new XmlDocument();
        doc.Load("test.xml");
        var dict = new Dictionary<string, int>();
        dict["A"] = 1;
        dict["B"] = 0;
        dict["C"] = 17;
        var result = Evaluate(doc.FirstChild,dict);
    }

    static bool Evaluate(XmlNode node, IDictionary<string, int> dict)
    {
        switch (node.Name)
        {
            case "Evaluate":
                return Evaluate(node.FirstChild.NextSibling, dict); // Ignore first comment
            case "Condition":
                return Condition(node, dict);
            case "AND":
                return And(node, dict);
            case "OR":
                return Or(node, dict);
            default:
                throw new NotSupportedException();
        }
    }

    private static bool Or(XmlNode root, IDictionary<string, int> dict)
    {
        var result = false; // Starting with false, because It will be true when at least condition is true
        foreach (XmlNode node in root.ChildNodes)
        {
            result |= Evaluate(node, dict);
        }
        return result;
    }

    private static bool And(XmlNode root, IDictionary<string, int> dict)
    {
        var result = true;
        foreach (XmlNode node in root.ChildNodes)
        {
            result &= Evaluate(node, dict);
        }
        return result;
    }

    private static bool Condition(XmlNode node, IDictionary<string, int> dict)
    {
        var name = node.Attributes["Name"].Value;
        var value = node.Attributes["Value"].Value;
        var opt = node.Attributes["Operator"].Value;

        switch (opt)
        {
            case "==":
                return dict[name] == int.Parse(value);
            case "!=":
                return dict[name] != int.Parse(value);
            default:
                throw new NotSupportedException();
        }
    } 
```

# android - 如何在状态栏中创建没有图标的通知或简单地隐藏它？

> ID：11373786
> 
> 赞同：14
> 
> 时间：2012-07-07T09:21:10.233
> 
> 标签：android, icons, android-notifications, android-statusbar

我想知道如何创建一个不在状态栏中显示图标的通知。

有办法隐藏吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-06-08T12:41:38.873

从 Android 4.1（API 级别 16）开始，可以指定通知的[`priority`](https://developer.android.com/reference/android/app/Notification.html#priority). 如果您将该标志设置[`PRIORITY_MIN`](https://developer.android.com/reference/android/app/Notification.html#PRIORITY_MIN)为通知图标将不会显示在状态栏上。

```
notification.priority = Notification.PRIORITY_MIN; 
```

或者，如果您使用`Notification.Builder`：

```
builder.setPriority(Notification.PRIORITY_MIN); 
```

* * *

从 Android 8.0 Oreo（API 级别 26）开始，您必须将`importance`通知设置`NotificationChannel`为[`IMPORTANCE_MIN`](https://developer.android.com/reference/android/app/NotificationManager.html#IMPORTANCE_MIN)：

```
NotificationChannel channel = 
      new NotificationChannel(channelId, channelName, NotificationManager.IMPORTANCE_MIN);
notificationManager.createNotificationChannel(channel);
...
builder.setChannelId(channel.getId()) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-19T14:47:27.593

`.setPriority`with 参数`PRIORITY_MIN`将使这成为可能。

```
NotificationCompat notification = new NotificationCompat.Builder(this)
                .setContentTitle(getString(R.string.app_name))
                .setContentText(getString(R.string.notification_text))
                .setSmallIcon(R.mipmap.ic_launcher)

                //Show the notification only in NotificationDrawer.
                //Notification will not be shown on LockScreen as well as Hidden Icon on StatusBar.
                .setPriority(Notification.PRIORITY_MIN)

                .build(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-24T12:14:27.950

`NotificationManager.IMPORTANCE_UNSPECIFIED`在我的情况下有效

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-07T09:28:23.610

您可以通过拥有一个完全透明的图像并将其用作您的图标来做到这一点。:)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-06-08T13:27:51.417

**没有图标就无法显示通知。**

```
You can use transparent image. But, it take space of icon. 
```

@CommonsWare：由于提出通知的主要目的是在状态栏中放置一个图标，因此通常不需要不在状态栏中放置图标，除非它是交互式的，例如切换或信息通知总是运行，你可能想要下拉，但没有使用图标。

[检查此答案以获取更多详细信息。](https://stackoverflow.com/a/15901492/1168654)

# c++ - STL 映射的自定义内存分配器

> ID：11373796
> 
> 赞同：13
> 
> 时间：2012-07-07T09:23:38.190
> 
> 标签：c++, memory-management, stl, map

这个问题是关于在插入 std::map 期间自定义分配器实例的构造。

这是一个自定义分配器`std::map<int,int>`以及一个使用它的小程序：

```
#include <stddef.h>
#include <stdio.h>
#include <map>
#include <typeinfo>

class MyPool {
public:
  void * GetNext() {
    return malloc(24);
  }
  void Free(void *ptr) {
    free(ptr);
  }
};

template<typename T>
class MyPoolAlloc {
public:
  static MyPool *pMyPool;

  typedef size_t     size_type;
  typedef ptrdiff_t  difference_type;
  typedef T*         pointer;
  typedef const T*   const_pointer;
  typedef T&         reference;
  typedef const T&   const_reference;
  typedef T          value_type;

  template<typename X>
  struct rebind
  { typedef MyPoolAlloc<X> other; };

  MyPoolAlloc() throw() {
    printf("-------Alloc--CONSTRUCTOR--------%08x %32s\n", this, typeid(T).name());
  }

  MyPoolAlloc(const MyPoolAlloc&) throw()  {
    printf(" Copy Constructor ---------------%08x %32s\n", this, typeid(T).name());
  }

  template<typename X>
  MyPoolAlloc(const MyPoolAlloc<X>&) throw() {
    printf(" Construct T Alloc from X Alloc--%08x %32s %32s\n", this, typeid(T).name(), typeid(X).name());
  }

  ~MyPoolAlloc() throw() {
    printf(" Destructor ---------------------%08x %32s\n", this, typeid(T).name());
  };

  pointer address(reference __x) const { return &__x; }

  const_pointer address(const_reference __x) const { return &__x; }

  pointer allocate(size_type __n, const void * hint = 0) {
    if (__n != 1)
      perror("MyPoolAlloc::allocate: __n is not 1.\n");
    if (NULL == pMyPool) {
      pMyPool = new MyPool();
      printf("======>Creating a new pool object.\n");
    }
    return reinterpret_cast<T*>(pMyPool->GetNext());
  }

  //__p is not permitted to be a null pointer
  void deallocate(pointer __p, size_type __n) {
    pMyPool->Free(reinterpret_cast<void *>(__p));
  }

  size_type max_size() const throw() {
    return size_t(-1) / sizeof(T);
  }

  void construct(pointer __p, const T& __val) {
    printf("+++++++ %08x %s.\n", __p, typeid(T).name());
    ::new(__p) T(__val);
  }

  void destroy(pointer __p) {
    printf("-+-+-+- %08x.\n", __p);
    __p->~T();
  }
};

template<typename T>
inline bool operator==(const MyPoolAlloc<T>&, const MyPoolAlloc<T>&) {
  return true;
}

template<typename T>
inline bool operator!=(const MyPoolAlloc<T>&, const MyPoolAlloc<T>&) {
  return false;
}

template<typename T>
MyPool* MyPoolAlloc<T>::pMyPool = NULL;

int main(int argc, char *argv[]) {

  std::map<int, int, std::less<int>, MyPoolAlloc<std::pair<const int,int> > > m;
  //random insertions in the map
  m.insert(std::pair<int,int>(1,2));
  m[5] = 7;
  m[8] = 11;
  printf("======>End of map insertions.\n");
  return 0;
} 
```

这是该程序的输出：

```
--------Alloc--CONSTRUCTOR--------bffcdaa6 St4pairIKiiE
 从 X Alloc 构造 T Alloc--bffcda77 St13_Rb_tree_nodeISt4pairIKiiEE St4pairIKiiE
 复制构造函数 ----------------bffcdad8 St13_Rb_tree_nodeISt4pairIKiiEE
 析构函数 ---------bffcda77 St13_Rb_tree_nodeISt4pairIKiiEE
 析构函数---------bffcdaa6 St4pairIKiiE
======>创建一个新的池对象。
 从 X Alloc 构造 T Alloc--bffcd9df St4pairIKiiE St13_Rb_tree_nodeISt4pairIKiiEE
+++++++ 0985d028 St4pairIKiiE。
 析构函数 ---------------------bffcd9df St4pairIKiiE
 从 X Alloc 构造 T Alloc--bffcd95f St4pairIKiiE St13_Rb_tree_nodeISt4pairIKiiEE
+++++++ 0985d048 St4pairIKiiE。
 析构函数 ---------------------bffcd95f St4pairIKiiE
 从 X Alloc 构造 T Alloc--bffcd95f St4pairIKiiE St13_Rb_tree_nodeISt4pairIKiiEE
+++++++ 0985d068 St4pairIKiiE。
 析构函数 ---------------------bffcd95f St4pairIKiiE
======>地图插入结束。
 从 X Alloc 构造 T Alloc--bffcda23 St4pairIKiiE St13_Rb_tree_nodeISt4pairIKiiEE
-+-+-+- 0985d068。
 析构函数---------bffcda23 St4pairIKiiE
 从 X Alloc 构造 T Alloc--bffcda43 St4pairIKiiE St13_Rb_tree_nodeISt4pairIKiiEE
-+-+-+- 0985d048。
 析构函数---------bffcda43 St4pairIKiiE
 从 X Alloc 构造 T Alloc--bffcda43 St4pairIKiiE St13_Rb_tree_nodeISt4pairIKiiEE
-+-+-+- 0985d028。
 析构函数---------bffcda43 St4pairIKiiE
 析构函数 ---------bffcdad8 St13_Rb_tree_nodeISt4pairIKiiEE

```

输出的最后两列显示，`std::pair<const int, int>`每次插入映射时都会构造一个分配器。为什么这是必要的？有没有办法抑制这种情况？

谢谢！

编辑：此代码在 g++ 版本 4.1.2 的 x86 机器上测试。如果您希望在 64 位机器上运行它，您至少必须更改`return malloc(24)`. 更改为`return malloc(48)`应该工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T09:42:05.650

之所以如此，是因为分配器是 for`std::pair<const int, int>`但实现实际上需要分配一个更复杂的数据结构，它是其中的一个成员。虽然我希望需要构造和缓存实际的分配器，但每次都重新构造它并不违法。这是一个实现细节，如果不更改实现，您就无法逃避。创建的实际分配器类型是`St13_Rb_tree_nodeISt4pairIKiiEE`(mangled name)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T15:10:39.753

在 MyPool.h（单例）中：

```
class MyPool
{
...
public:
  static MyPool & GetInstance( void );
private:
  MyPool(void);
} 
```

在 MyPool.cpp 中：

```
MyPool & MyPool::GetInstance( void )
{
  static MyPool retval;
  return retval;
} 
```

在 fooStdAllocator.h 中：

```
#pragma once

#include "MyPool.h"

#pragma push_macro( "new" )
#undef new
#include <new>

template <class T1> class fooStdAllocator;

// Description:
// Specialize for void
template <> class fooStdAllocator<void>
{
public:
  typedef void * pointer;
  typedef const void* const_pointer;
  typedef void value_type;
  template <class U1> struct rebind { typedef fooStdAllocator<U1> other; };
};

template <class T1> class fooStdAllocator
{
public:
  // Description:
  // Typedefs
  typedef T1 value_type;
  typedef size_t size_type;
  typedef ptrdiff_t difference_type;
  typedef T1* pointer;
  typedef const T1* const_pointer;
  typedef T1& reference;
  typedef const T1& const_reference;

  // Description:
  // The rebind member allows a container to construct an allocator for some arbitrary type out of
  // the allocator type provided as a template parameter.
  template <class U1> struct rebind { typedef fooStdAllocator<U1> other; };

  // Description:
  // Constructors
  fooStdAllocator( void ) : pool(MyPool::GetInstance()) {};
  fooStdAllocator( const fooStdAllocator& other ) : pool(MyPool::GetInstance()) {};
  template <class U1> fooStdAllocator(const fooStdAllocator<U1>&) : pool(MyPool::GetInstance()) {};

  // Description:
  // Destructor
  ~fooStdAllocator( void ) {};

  // Description:
  // Returns the address of r as a pointer type. This function and the following function are used
  // to convert references to pointers.
  pointer address(reference r) const { return &r; };
  const_pointer address(const_reference r) const { return &r; };

  // Description:
  // Allocate storage for n values of T1.
  pointer allocate( size_type n, fooStdAllocator<void>::const_pointer hint = 0 )
  {
    // I would never do it that way:
    //pointer return_value = reinterpret_cast<pointer>( pool.GetNext() );
    // I would prefer to use the got size to allocate:
    pointer return_value = reinterpret_cast<pointer>( pool.GetNext(n) );

    if ( return_value == 0 )
      throw std::bad_alloc();
    return return_value;
  };

  // Description:
  // Deallocate storage obtained by a call to allocate.
  void deallocate(pointer p, size_type n)
  {
    pool.Free(p);
  };

  // Description:
  // Return the largest possible storage available through a call to allocate.
  size_type max_size() const
  {
    size_type return_value = 0xFFFFFFFF;
    return_value /= sizeof(T1);
    return return_value;
  };

  // Description:
  // Construct an object of type T1 at the location of ptr
  void construct(pointer ptr)
  {
    ::new (reinterpret_cast<void*>(ptr)) T1;
  };

  // Description:
  // Construct an object of type T1 at the location of ptr, using the value of U1 in the call to the
  // constructor for T1.
  template <class U1> void construct(pointer ptr, const U1& val)
  {
    ::new (reinterpret_cast<void*>(ptr)) T1(val);
  };

  // Description:
  // Construct an object of type T1 at the location of ptr, using the value of T1 in the call to the
  // constructor for T1.
  void construct(pointer ptr, const T1& val)
  {
    ::new (reinterpret_cast<void*>(ptr)) T1(val);
  };

  // Description:
  // Call the destructor on the value pointed to by p
  void destroy(pointer p)
  {
    p->T1::~T1();
  };
private:
  MyPool &pool;
};

// Return true if allocators b and a can be safely interchanged. "Safely interchanged" means that b could be
// used to deallocate storage obtained through a and vice versa.
template <class T1, class T2> bool operator == ( const fooStdAllocator<T1>& a, const fooStdAllocator<T2>& b)
{
  return true;
};
// Return false if allocators b and a can be safely interchanged. "Safely interchanged" means that b could be
// used to deallocate storage obtained through a and vice versa.
template <class T1, class T2> bool operator != ( const fooStdAllocator<T1>& a, const fooStdAllocator<T2>& b)
{
  return false;
};
#pragma pop_macro( "new" ) 
```

您可以按如下方式使用它：

```
std::map<keyT,valueT,std::less<keyT>,fooStdAllocator> your_map; 
```

# javascript - Javascript 中的 Google Analytics API

> ID：11373797
> 
> 赞同：3
> 
> 时间：2012-07-07T09:23:48.903
> 
> 标签：javascript, google-analytics-api

我正在使用 Google Analytics Javascript 库让用户查看他们所在特定页面的 GeoMap。但是，每次他们尝试这样做时，您都必须通过身份验证过程才能将我的数据显示在我的页面上。我怎样才能找到替代方案。我只想通过页面上的可视化图表嵌入我的 Analytics 数据，以便所有匿名查看者都可以看到它

* * *

**我们在 Google Analytics 中创建了一个帐户。现在我们可以得到网站的统计数据了。打开站点[http://Example.com](http://Example.com) 单击 Authorize Analytics 按钮。在打开的窗口中提供 Google 帐户的凭据。用户名：xxxx@gmail.com 密码：xxx 它将重定向到[http://Example.com](http://Example.com)页面。输入表格 id ga:61737784 并单击绘制图表按钮，然后您将获得该站点的统计信息。

我的要求是没有登录到谷歌分析网站我应该得到统计数据。因为最终用户不知道 Google 分析的凭据。以下是 html 和 javascript 代码。**

```
 <script src="http://apis.google.com/js/client.js?onload=gadashInit" type="text/javascript"></script>
    <script src="http://analytics-api-samples.googlecode.com/svn/trunk/src/reporting/javascript/ez-ga-dash/gadash-1.0.js" type="text/javascript"></script>
    <script src="http://www.google.com/jsapi" type="text/javascript"></script>
    <script src="http://www.google-analytics.com/ga.js" type="text/javascript"></script>

    <script type="text/javascript">
      gadash.configKeys({
        'apiKey': xxxxx',
        'clientId':xxxxx'
      }); 
      var dataOverTime = new gadash.Chart();
      var scoreCard = new gadash.Chart();
      var sourceMediumTable = new gadash.Chart(); 
      var baseConfig = {
        'last-n-days': 30,
        'query': {
          'metrics': 'ga:visitors, ga:visits, ga:pageviews',
        },
        'chartOptions': {
          width: 400
        }
      }; 
      var dataOverTimeConfig = {
        'divContainer': 'dataOverTimeConfig',
        'type': 'LineChart',
        'query': {
          'dimensions': 'ga:date',
          'sort': 'ga:date'
        },
        'chartOptions': {
          height: 250,
          legend: {position: 'bottom'},
          hAxis: {title:'Date'},
          curveType: 'function'
        }
      }; 
      var scoreCardConfig = {
        'divContainer': 'scorecard',
      }; 
      var sourceMediumTableConfig = {
        'divContainer': 'sourceMediumTableConfig',
        'query': {
          'dimensions': 'ga:source,ga:medium',
          'sort': '-ga:visitors',
          'max-results': 100
        }
      };
      function renderGraph() {

         baseConfig.query.ids = document.getElementById('tableId').value;

         dataOverTime.set(baseConfig).set(dataOverTimeConfig).render();

         scoreCard.set(baseConfig).set(scoreCardConfig).render();
    sourceMediumTable.set(baseConfig).set(sourceMediumTableConfig).render();   

         document.getElementById('ui').style.display = 'block';

    return false;
       }
        </script>
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-33166458-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-32934024-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google.com/jsapi';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
        <script type="text/javascript">

          var _gaq = _gaq || [];
          _gaq.push(['_setAccount', 'UA-32934024-1']);
          _gaq.push(['_trackPageview']);

          (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://') + 'analytics-api-samples.googlecode.com/svn/trunk/src/reporting/javascript/ez-ga-dash/gadash-1.0.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
          })();

        </script>
        <script type="text/javascript">

          var _gaq = _gaq || [];
          _gaq.push(['_setAccount', 'UA-32934024-1']);
          _gaq.push(['_trackPageview']);

          (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://') + 'apis.google.com/js/client.js?onload=gadashInit';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
          })();

        </script>
        <button id="Button1" style="visibility: hidden;">
        Authorize Analytics</button>
        <hr />
        <p>
        Enter your Table ID:
        <input type="text" id="tableId" />
        <button onclick="return renderGraph()">
        Draw Charts</button></p>
        <hr />
        <div id="ui" style="display: none;">
        <h4>
        Data Over Time</h4>
        <div id="dataOverTimeConfig">
        </div>
        <h5>
        Totals for each metric</h5>
        <div id="scorecard">
        </div>
        <h5>
        Source and Mediums by Visitor</h5>
        <div id="sourceMediumTableConfig">
        </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-23T00:51:44.317

您可以使用 Google Analytics superProxy 与未经身份验证的用户共享数据。
您可以使用 superProxy 创建对 Analytics 的查询，然后使用通过 superProxy 存储的数据来构建图表。我遇到了同样的问题，这是我能找到的唯一解决方案。

[https://developers.google.com/analytics/solutions/google-analytics-super-proxy](https://developers.google.com/analytics/solutions/google-analytics-super-proxy)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T07:09:05.490

你能分享更多关于你如何访问谷歌分析的信息吗？

查看[http://code.google.com/p/google-api-javascript-client/wiki/Authentication](http://code.google.com/p/google-api-javascript-client/wiki/Authentication)以了解如何设置身份验证。请注意，您的凭据在 JavaScript 中可见，因此请确保您创建的用户仅具有所需的最低权限

# android - Android OnItemClickListener

> ID：11373798
> 
> 赞同：1
> 
> 时间：2012-07-07T09:23:54.673
> 
> 标签：android, adapter, listactivity

我有一个附有适配器的 ListActivity。现在我想在适配器中注册一个列表项的点击。这是我在 ListActivity 的 onCreate 中的解决方案：

```
 this.myList = getListView();
        this.myList.setAdapter(this.adapter);
        this.myList.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
                Log.d("Click", "ListView");
            }
        }); 
```

但是 OnItemClickListener 从不响应。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T09:53:15.407

```
ListView list = (ListView) findViewById(R.id.listView1);

 MobileArrayAdapter adapter = new MobileArrayAdapter(this,android.R.layout.simple_list_item_1);
 list.setAdapter(adapter);       

 list.setOnItemClickListener(new OnItemClickListener() {
 public void onItemClick(AdapterView<?> parent, View view, int position, long id) { 
 //your data

     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T09:29:08.873

您不需要设置`OnItemClickListener`. 你必须覆盖`onListItemClick`：

```
@Override 
    public void onListItemClick(ListView l, View v, int position, long id) {
        // Do something when a list item is clicked
    } 
```

第三个参数是适配器中`position`的元素。`position`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-07T09:47:50.300

如果你有你在适配器中使用的每个列表项的行布局，而不是每个 ImageView 或 Button 或 Checkbox 或 TextView 等的行布局......你必须在 xml 中添加这一行

```
 android:clikable="false"
 android:focusable="false" 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-07T09:49:28.147

你错过了这个：

```
 this.myList.setChoiceMode(ListView.CHOICE_MODE_SINGLE); 
```

默认情况下，列表没有任何选择模式，即默认设置为 CHOICE_MODE_NONE。因此，要使其可点击，我们必须根据您的需要将其设置为 CHOICE_MODE_SINGLE 或 CHOICE_MODE_MULTIPLE 。

# android - 保持图像质量

> ID：11373799
> 
> 赞同：6
> 
> 时间：2012-07-07T09:24:12.857
> 
> 标签：android, bitmap, gesture

我有一个由手势组成的位图，它的外观相对较小。我想将它与从图库中选择的图像合并。我已经完成了这个图像混合，但问题是添加的手势图像与画廊图像相比太小了。我想以这样的方式合并，小图像应该足够可见并且不应该失去质量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T09:53:02.623

由于放大手势图像会导致像素化，您可以尝试创建与图库中图像相同大小的手势图像。当被用户编辑时，缩小手势图像以适应屏幕。

# php - 如何在php中从包含冒号的数组中访问对象

> ID：11373806
> 
> 赞同：0
> 
> 时间：2012-07-07T09:25:46.167
> 
> 标签：php, web

> **可能重复：**
> [PHP：使用 SimpleXML 访问命名空间 XML](https://stackoverflow.com/questions/2991832/php-accessing-namespaced-xml-with-simplexml)

解析后无法从此数组访问对象

```
<abc>
<ls:location>
      <ls:address1>No 16 GLama</ls:address1>
      <ls:city>Kuala Lumpur</ls:city>
      <ls:zip>58200</ls:zip>
      <ls:latitude>3.092055</ls:latitude>
      <ls:longitude>101.684757</ls:longitude>
</ls:location>
</abc> 
```

如何访问 zip 对象

```
 $x = new SimpleXmlElement($content); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T09:32:25.410

```
echo $x->location->zip;
//"58200" 
```

演示：[http ://codepad.org/FJDSM5su](http://codepad.org/FJDSM5su)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T09:42:12.207

```
<?php

$content = '<abc>
            <ls:location>
                  <ls:address1>No 16 GLama</ls:address1>
                  <ls:city>Kuala Lumpur</ls:city>
                  <ls:zip>58200</ls:zip>
                  <ls:latitude>3.092055</ls:latitude>
                  <ls:longitude>101.684757</ls:longitude>
            </ls:location>
            </abc>';

$x = new SimpleXmlElement($content);

// accessing the wanted value in the object
// returns zip as an object
$zip = $x->location->zip;

// object to string type conversion
$zip = (string) $zip;

assert('$zip == "58200" /* Expected result: zip = 58200\. */');
?> 
```

# iphone - 每次选择选项卡时如何获得相同的视图？

> ID：11373813
> 
> 赞同：0
> 
> 时间：2012-07-07T09:26:32.720
> 
> 标签：iphone, ios, uinavigationcontroller, uitabbarcontroller

我有一个基于标签栏的 iphone 应用程序，其中每个标签本身就是一个导航控制器。所以在每个标签视图中都有子视图，我将其推入 self.navigation 控制器。

**问题是**当我推送一个视图然后选择另一个选项卡然后返回我选择相同的选项卡时，它将显示该推送视图。不是我想要的观点来的。

每次选择选项卡时，任何人都可以帮助我实现 rootview 吗？有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T09:36:42.437

每次切换 IUTabBarController 选项卡时，UINavigationController 保存其视图控制器堆栈并显示最顶部的一个是正常的。那么，您是说您希望每个 UINavigationController 在每次标签栏从它们离开时释放堆栈？如果是这样，请查看 UITabBarControllerDelegate 文档：

[http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITabBarControllerDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40006932](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITabBarControllerDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40006932)

在这里，您有一些方法会告诉您何时切换选项卡：

```
 – tabBarController:shouldSelectViewController:
 – tabBarController:didSelectViewController: 
```

我假设你知道委托协议是如何工作的。

然后查看 UINavigationController 的文档，其中包含将视图控制器从堆栈中“弹出”的方法：

[http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UINavigationController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006934](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UINavigationController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006934)

这将弹出到顶部（'root'）视图控制器：

```
– popToRootViewControllerAnimated: 
```

请注意——一般用户希望 UITabBarController 选项卡保留与上次切换到它时相同的视图。

哦，还有，你所说的是当一个标签栏标签被点击两次时的默认行为（即，当已经选择了该标签栏标签时点击它时）。

# inheritance - Twig（Symfony2）在“扩展”块中看不到变量

> ID：11373814
> 
> 赞同：2
> 
> 时间：2012-07-07T09:27:04.327
> 
> 标签：inheritance, symfony, twig

我在控制器中定义变量并将其传递给模板，但它在`extend`块中不可见。重要的控制器代码是：

```
 $response['html'] = $this->renderView(
            'AldenXyzBundle:Profile:edit_ajax.html.twig', array(
                'isXmlHttpRequest' => $request->isXmlHttpRequest(),
            )
        ); 
```

和树枝模板

```
{% extends isXmlHttpRequest ? '::base-ajax.html.twig' : '::base.html.twig' %}

{% block content %}
...
{% endblock %} 
```

我有异常`Variable "isXmlHttpRequest" does not exist in ...`，而模板

```
{% extends '::base-ajax.html.twig' %}

{% block content %}
{{ dump(isXmlHttpRequest) }}
...
{% endblock %} 
```

运行良好并显示正确的`$isXmlHttpRequest`值。

我也直接在模板中尝试过：

```
{% extends app.request.isXmlHttpRequest ? '::base-ajax.html.twig' : '::base.html.twig' %} 
```

但我有一个例外说`app is undefined`。

我正在使用 symfony v2.0.15 和 twig v1.8.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-09T08:50:43.687

我遇到了像 koral 一样的问题，尽管 Besnik 给出的条件语句解决方案对我不起作用。我花了一段时间才弄清楚这是因为我使用了条件扩展 `{% extend ? : %}`和表单主题的组合`{% form_theme form _self %}`。

因此，在实施给定的解决方案之后，我仍然收到一个异常，说 var `app`（或者在我的情况下是 var `vars`）是未定义的。但是，对于任何面临同样问题的人：有一个解决方案：

创建**一个 Twig 函数**，您可以在其中添加所有逻辑和逻辑，并在 Twig 模板中使用它：

```
{% extends parent_template() %} 
```

有一篇关于这个问题的优秀[帖子。](http://richardmiller.co.uk/2013/02/27/symfony2-more-twig-ajax-templates/)另请参阅symfony 论坛中提到该问题的这篇[文章。](https://github.com/symfony/symfony/issues/5284)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T21:02:13.833

这将起作用：

```
{% set layout = app.request.isXmlHttpRequest ? '::base-ajax.html.twig' : '::base.html.twig' %}
{% extends layout %} 
```

# git - 如何使用 git 裸存储库推入非裸存储库？

> ID：11373815
> 
> 赞同：1
> 
> 时间：2012-07-07T09:27:16.823
> 
> 标签：git

基本上，我想将所有本地更改推送到远程服务器上的备份裸存储库，然后让裸存储库将更改推送到同一服务器上的生产（非裸）。现在，我正在考虑做一个钩子。如果这很重要，我不会使用 gitosis。我怎样才能实现这个目标？

我不知道这是否是正确的方法，但我基本上只想将我的本地更改推送到备份仓库（裸）和非裸仓库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T09:46:59.020

### TL;博士

您无法成功推送到非裸存储库。

### 三个实用选项

*选项1*

实际上，如果您足够努力，您*可以*推送一个非裸存储库，但即使您这样做，它也不会为您更新您的工作树。例如，推送错误消息说：

> 您可以在远程存储库中将“receive.denyCurrentBranch”配置变量设置为“忽略”或“警告”，以允许推送到其当前分支；但是，除非您安排更新其工作树以匹配您以其他方式推送的内容，否则不建议这样做。

您必须更改非裸遥控器上的配置，并添加一个接收后挂钩来更新工作树。因此，当有更简单的方法时，通常没有用。

*选项 2*

您还可以在裸存储库上创建一个接收后挂钩，该挂钩将使用 ssh（或类似方法）连接到具有非裸存储库的远程主机，并在更新裸存储库时执行拉取。这与前一个选项非常相似，但不需要对非裸存储库进行任何配置更改。

*选项 3*

轮询是另一种选择。您可以执行类似于[https://stackoverflow.com/a/11254771/1301972](https://stackoverflow.com/a/11254771/1301972)的操作，您可以在其中定期轮询裸存储库以获取拉取。此选项根本不需要 git 配置或自定义挂钩，因此如果您可以访问 crontab，我建议将其作为通用解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T21:22:05.507

不确定这是否有效，但是.. 仍然可以`--work-tree=<path>`在裸仓库中对（GIT_WORK_TREE 环境变量）进行检查。我在手册页中没有找到任何方法。

# java - 带有 jUnit 的 Properties.loadFromXML NullPointerException

> ID：11373822
> 
> 赞同：1
> 
> 时间：2012-07-07T09:28:14.230
> 
> 标签：java, xml, properties, junit, classloader

我在 jUnit 测试中从 xml 加载属性时遇到问题（相同的代码在没有 jUnit 的情况下运行良好）：

```
public class InternetMapTest {

private Properties properties;

@Before
public void readProperties() {

try {
ClassLoader loader = ClassLoader.getSystemClassLoader();
InputStream stream = loader.getResourceAsStream("analyse.properties.xml");
properties.loadFromXML(stream); 
```

...

如果我运行测试，我会得到

```
java.lang.NullPointerException
    at xxx.yyy.zzz.analyse.tests.InternetMapTest.readProperties(InternetMapTest.java:27)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    ...
    ...
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

不幸的是，我无法使用此堆栈跟踪来识别问题。首先，我以为找不到该文件（它位于/src/test/resources）。但是 System.out.println(loader.getResource("analysis.properties.xml")); 返回正确的文件路径。

有人可以帮忙吗？

我在 Ubuntu 12.04 amd64 下使用 STS 2.9.1 和 Maven（插件版本 2.3.1，我认为）和 jUnit 4.10。

预先感谢您，亲切的问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T09:34:31.287

变量“属性”可能为空，您必须在调用加载函数之前创建它。

# emacs - 如何在 Emacs 中禁用边缘？

> ID：11373826
> 
> 赞同：13
> 
> 时间：2012-07-07T09:28:27.460
> 
> 标签：emacs

首先，我尝试使用`(fringe-mode -1)`，如下图，在 linum 线的右侧有一个很细的边缘。

![在此处输入图像描述](../Images/901bef96581f4743d695b9ee08af6823.png)

然后，我尝试使用`(set-fringe-mode '(0 . 0))`将左边缘和右边缘指定为零。边缘消失。但我得到了一个非常奇怪的外观。在 Emacs 启动时，框架会越来越细，直到窄到很细的一条线（我不怎么解释，请看下图）。

1.  启动 - 加载点文件 ![在此处输入图像描述](../Images/0e8b0e1399012a0c00f517a8ec68677d.png)

2.  变瘦 ![在此处输入图像描述](../Images/ac3eb279d2b619572b4dd05132f3f7b7.png)

3.  最后 ![在此处输入图像描述](../Images/0f3d4d59a3261aa46d7a6c27c4a837fd.png)

现在，我设置`(set-fringe-mode '(0 . 1))`了 ，缓冲区的右侧会出现一个边缘。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-14T01:17:27.527

怎么样`(set-fringe-mode 0)`？这就是`no-fringes`in `fringe-styles`alist 的值。

如果这也不起作用，我认为您应该提交错误报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-04T03:50:03.833

我知道这是一篇旧帖子，但我遇到了类似的问题并添加了`setq`修复我的问题。制作线：

```
 (setq set-fringe-mode 0) 
```

# c# - 如何禁用睡眠/休眠功能？

> ID：11373831
> 
> 赞同：0
> 
> 时间：2012-07-07T09:29:04.700
> 
> 标签：c#, windows-phone-7

我怎样才能让我的应用程序不会进入睡眠状态，只要它运行就保持应用程序的活力和专注？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T09:36:55.847

你能做的最好的就是[在锁屏下](http://blogs.msdn.com/b/jaimer/archive/2010/11/01/running-a-windows-phone-application-under-the-lock-screen.aspx)运行应用程序。您无法阻止设备进入睡眠状态。

# c# - 无法导入 system.web.ui.design

> ID：11373836
> 
> 赞同：2
> 
> 时间：2012-07-07T09:29:21.207
> 
> 标签：c#, asp.net

我正在尝试导入以下命名空间：

```
using System.Web.UI.Design; 
```

但它找不到它。我添加了对以下内容的引用/程序集引用：

```
System.Web;
System.Design; 
```

但是还是找不到！我需要导入它，以便我可以使用`ContainerControlDesigner`. 我正在使用 .NET Framework 4 和普通的 ASP.NET Web 窗体 Web 应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T09:31:27.437

确保您已将`System.Design.dll`程序集引用到您的项目中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T09:51:35.743

哦 ！有效 ！我刚刚去了 system.design 参考并将本地副本从 true 更改为 false 然后再次返回 true ！它起作用了：S不确定它是否是Visual Studio 2012问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T09:31:38.863

它在 System.Design.dll 中

确保您已将对该程序集的引用添加到正确的项目中。

[http://msdn.microsoft.com/en-us/library/system.web.ui.design.containercontroldesigner.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.design.containercontroldesigner.aspx)

# objective-c - itemWithNormalSprite with block on cocos2d for ios

> ID：11373839
> 
> 赞同：1
> 
> 时间：2012-07-07T09:29:44.180
> 
> 标签：objective-c, ios, cocos2d-iphone

我正在尝试`MenuItem`使用块而不是选择器创建一个可以移动到游戏玩法的游戏（在 cocos2d 上为 IOS v2.0 工作）

```
CCMenuItemSprite *nextLevelMI = [CCMenuItemSprite itemWithNormalSprite:playSpr selectedSprite:playSpr2 block:^(id sender)block]; 
```

谁能给我一个这样使用的例子？

10 倍，谢菲

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T10:23:27.190

这是 CCMenuItemLabel 的示例。除了其他参数外，它与 CCMenuItemSprite 的用法没有什么不同。我假设您想看看如何使用该块。

```
CCMenuItem* item = [CCMenuItemLabel itemWithLabel:label block:^(id sender)
{
    CCScene* scene = [PixelPerfectTouchScene node];
    [ReturnToMainMenuNode returnNodeWithParent:scene];
    [[CCDirector sharedDirector] replaceScene:scene];
}]; 
```

[这里有更多示例](https://github.com/LearnCocos2D/LearnCocos2D/tree/master/Cocos2D-CCRenderTexture-Demo/Cocos2D-CCRenderTexture-Demo)，例如在 MainMenuScene 和 ReturnToMainMenuNode 中。

# android - 创建项目

> ID：11373840
> 
> 赞同：-8
> 
> 时间：2012-07-07T09:29:55.203
> 
> 标签：android

我目前正在按照“傻瓜的android应用程序开发”一书中的步骤进行操作，并且已经到了需要创建新项目的部分。我遇到的问题是我的窗口与书中的不同，所以我无法按照书中的步骤操作，因为我的窗口不同。

我的窗口说“android 应用程序项目”，在书中说“android 项目”，所以当我点击它继续时，我的下一个窗口与书中的不同。

有人知道为什么吗？以及我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T09:34:26.623

SDK 已更改，这意味着您的书已过时。我建议在这里使用官方的 Android 开发人员培训：http: [//developer.android.com/training/basics/firstapp/index.html](http://developer.android.com/training/basics/firstapp/index.html)

# html - 制作一个圆角的 3D 按钮

> ID：11373841
> 
> 赞同：3
> 
> 时间：2012-07-07T09:30:00.810
> 
> 标签：html, css, button, 3d

我正在开发一个网站，我想在其中实现带有圆边的 3D 按钮。因此，我需要创建一个 CSS 文件。我搜索了很多关于 3D 按钮的信息，但目前还没有任何效果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T13:32:35.310

您想使用以下 CSS 样式的组合：`border`、`border-radius`、`background`和`text-shadow`finally `box-shadow`。

要使用这些实现 3D 效果，您需要在样式上使用[**渐变**](https://developer.mozilla.org/en/CSS/-moz-linear-gradient)值。`background`

这里有一个用于制作跨浏览器渐变 css 的有用工具：http: [//www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

这是一些`CSS`可以设置`a`标签样式的示例：

```
.button {
    display: block;
    height: 30px;
    margin-bottom: 10px;
    text-align: center;
    line-height: 30px;
    width: 150px;
    margin: 20px;

    color: #FFF;
    text-align: center;
    border: solid #427AA8 1px;
    border-radius: 5px;
    text-decoration: none;

    /* Gradient */
    background: #427AA8;
    background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIxJSIgc3RvcC1jb2xvcj0iIzU5YTNlMCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiM0MjdhYTgiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
    background: -moz-linear-gradient(top,  #59A3E0 1%, #427AA8 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(1%,#59A3E0), color-stop(100%,#427AA8));
    background: -webkit-linear-gradient(top,  #59A3E0 1%,#427AA8 100%);
    background: -o-linear-gradient(top,  #59A3E0 1%,#427AA8 100%);
    background: -ms-linear-gradient(top,  #59A3E0 1%,#427AA8 100%);
    background: linear-gradient(to bottom,  #59A3E0 1%,#427AA8 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#59A3E0', endColorstr='#427AA8',GradientType=0 );

    text-shadow: 1px 1px 0 rgba(0,0,0,0.25);
    box-shadow: 0 1px 0 rgba(255,255,255, 0.3), inset 0 1px 0 rgba(255,255,255, 0.3);
}

.button:hover {
    background: #59A3E0;
    text-decoration: none;
    filter: none;
}​

<a href="#" class="button">Example Button</a> 
```

以及您可以制作的示例：**[jsfiddle.net/UPTyw](http://jsfiddle.net/UPTyw/)**

这适用于所有现代浏览器，适用于 IE8-6（不支持`border-radius`）。此方法也不使用图像。

还可以查看这个问题，[谷歌的无图像按钮](https://stackoverflow.com/questions/520640/googles-imageless-buttons)，它解释了谷歌是如何创建他们的`CSS`按钮范围的。

## IE9 错误

`border-radius`如果`filter`设置了，IE9 有一个渲染错误。解决方法是仅将以下 IE9 添加`CSS`到使用 css 渐变的任何元素。

```
<!--[if gte IE 9]>
  <style type="text/css">
    .gradient {
       filter: none;
    }
  </style>
<![endif]--> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-07T09:33:55.177

看看[http://css3button.net/](http://css3button.net/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T09:43:20.113

试试[http://www.cssbuttongenerator.com/](http://www.cssbuttongenerator.com/)

完成按钮样式后，单击它，相应的 CSS 将出现在底部的框中​​。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T09:58:06.750

```
<style>
button {
    -webkit-border-radius: 3px;
    -moz-border-radius: 3px;
    border-radius: 3px;
}
</style>

<button>Test</button> 
```

见：http: [//jsfiddle.net/wPcn3/](http://jsfiddle.net/wPcn3/)

# html - 如何将表单数据更改为 json 并使用 post 方法传递给 api？

> ID：11373842
> 
> 赞同：0
> 
> 时间：2012-07-07T09:30:01.923
> 
> 标签：html, ruby, json

```
Id:<input type="text" id="id" required="required"></br>
Name:<input type="text" id="name" required="required"></br>
<input type="submit" id="submit"> 
```

我有一个表格，上面放了上面的代码。现在我可以给出价值了。我需要的是，我必须将我在文本框中给出的值以特定格式发送到 api，如下所示。

```
{ "entry":
      { "id":"",
        "name":""
      }
} 
```

我必须用红宝石来做。我没有使用 rails 或任何其他框架。我怎样才能做到这一点？如果可能的话，给我一些代码示例。

# scala - 在 Play 框架和 OAuth2 上保护 REST API

> ID：11373843
> 
> 赞同：42
> 
> 时间：2012-07-07T09:30:08.147
> 
> 标签：scala, oauth, playframework, oauth-2.0, playframework-2.0

我正在使用**Play 2.0**和**Scala**开发一个应用程序，它公开了一些 REST API。这些 API 将被不同的应用程序、Web、移动或桌面使用，因此 OAuth 协议 (OAuth2) 似乎是最合适的。

此外，我最初会使用外部 OAuth 提供程序，例如 Facebook。

我的问题是：授权单个 REST 调用的确切流程是什么？每次调用在服务器端我应该期待什么以及我应该与外部提供商检查什么？

使用 OAuth1 我知道客户端发送了带有所有签名请求的令牌，但使用 Oauth2 我认为不是这样，我想如果令牌未签名是不可信的，因此我认为这不是流程。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-13T05:16:41.907

您可以使用名为 SecureSocial 的模块。

[https://github.com/jaliss/securesocial/](https://github.com/jaliss/securesocial/)

这个非常精致，Play 社区中的许多人似乎都知道/使用这个模块。

对于授权可能有用。 [https://github.com/schaloner/deadbolt-2/](https://github.com/schaloner/deadbolt-2/)

对于端到端 scala 的东西， [https://github.com/t2v/play20-auth](https://github.com/t2v/play20-auth)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-08-10T02:50:30.177

我将 Apache Amber 移植到 Play2 Scala，这里是链接： [https ://github.com/cleanyong/oauth2play2scala](https://github.com/cleanyong/oauth2play2scala)

移植 Apache Amber 的原因是：

1.  它已经过测试
2.  比自制的好
3.  它适合 Play2 Scala API
4.  便于使用
5.  不打扰

如果你想在你的站点上设置 oauth2 服务器，你可以尝试使用我的端口。它有文件。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-15T12:21:42.527

基本上，标准流程如下：

1.  在每个请求中，检查 cookie（Play! 方言中的“会话”）是否包含 id
2.  如果没有，请让用户向提供者（Facebook 或其他）进行身份验证
3.  如果没问题，提供者将返回一个 id，将此 id 保存在您的持久性系统（注册）和当前 cookie/会话中
4.  在下一个请求中，检查 cookie/session 中是否存在 id 并对应于持久性系统中的现有用户
5.  要“注销”，只需清除 cookie/会话

如果您想了解更多详细信息，请询问:-)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-17T17:33:42.530

OAuth 是一种授权协议，因此如果您正在查看身份验证解决方案，这可能不是一个。

您的问题是 API 的使用者将是各种应用程序。这导致了两种情况，

```
 1\. Where there is no end user involved (grant_type: client_credential)  
 2\. Where end-user can consume these APIs on multiple Application (Owned by your Org) (grant_type: implicit/password)
 3\. Where end-user can consume these APIs via third Party Applications.(authrization_code) 
```

要支持 OAuth 生态系统，您需要一个密钥管理系统。到，

1.  为应用程序生成密钥/秘密。
2.  生成 AccessToken/Refresh_token/authorization_code

现在来到你必须暴露的端点，

```
3-Legged OAuth
GET     /authorize  authorize{entry point/ initiate oauth}  
    Sample Call: http://YourAPIService.com/authorize?response_type=code&client_id=GG1IbStzH45ajx9cEeILqjFt&scope=READ&redirect_uri=www.google.com

    GET     /login  login (Call Page for login App, 302 redirected from /authorize)     
Sample Call: http://YourAPIService.com/v1/oauth20/login?response_type=code&client_id=GG1IbStzH45ajx9cEeILqjFt&scope=READ&redirect_uri=www.google.com

    POST    /dologin    consentPage     http://YourAPIService.com/dologin 
    Submit the credential, On success, render the application page 

    POST    /grantpermission    consentSubmission   http://YourAPIService.com/grantpermission
Permission has been granted/declined. Send a 302 to generate authorization_code 

    GET      /code          AuthorizationCode {To generate auth code}
    Sample Call: http://YourAPIService.com/code?client_id=GG1IbStzH45ajx9cEeILqjFt&response_type=code&user_id=user@YourAPIService.com&redirect_uri=www.google.com

    POST    /token  GenerateAccessToken     http://YourAPIService.com/token 
Sample call: http://kohls-test.mars.apigee.net/v1/oauth20/token
Header: Authorization: Basic R0cxSWJTdHpINDVhang5Y0VlSUxxalFj its generated with apps Api Key & Secret.
Payload: 
grant_type=authorization_code&scope=x&redirect_uri=www.google.com&code=abc123 
```

否则最简单/最可靠的解决方案是 [http://apigee.com](http://apigee.com)

您可以使用 Apigee 现有的 OAuth 生态系统。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-18T13:33:40.073

我自己没有尝试过，但是[tuxdna](https://github.com/tuxdna/play-oauth2-server)模块怎么样。正如在 github repo 中所说：

> 使用 Play 的 OAuth2 服务器！2.0 框架

我希望这有帮助

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-11T01:35:46.257

我有同样的问题，我所做的（我想这不是最好的解决方案）是将 REST 服务器的方法放在 "@Security.Authenticated(Secure.class)" 内，并使用会话 cookie（它也在后端的哈希表中注册）。会话 cookie 是在用户登录后生成的

```
I post code:

package controllers;

import ...;

@Security.Authenticated(Secured.class)
public class ExampleController extends Controller {

    public static String currentUserEmail() {

 ... return json after checking that 'session("id")' exists in the loggedin users hash table... 

} 
```

和

```
package controllers;

import ...;

public class Secure extends Security.Authenticator {

    @Override
    public String getUserId(Http.Context context) {
        return context.session().get("user_id");
    }
...
} 
```

希望这可以帮助

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-12T19:27:45.810

您可以尝试使用此模板进行游戏，将 OAuth 2 提供程序与 Deadbolt 相结合。OAuth 范围映射到 Deadbolt 权限和角色概念。它使用 Redis 存储访问令牌，并在您配置的时间段后自动过期。

[https://github.com/lglossman/scala-oauth2-deadbolt-redis](https://github.com/lglossman/scala-oauth2-deadbolt-redis)

# javascript - 如果找到 rowspan 3，则删除下一个和下一个 tr 的第三个单元格

> ID：11373852
> 
> 赞同：0
> 
> 时间：2012-07-07T09:31:15.783
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [如果找到行跨度，则删除下一行单元格](https://stackoverflow.com/questions/11373116/remove-next-row-cell-if-rowspan-is-found)

**删除 tr 的第三个单元格之前的表格**

```
<table id="mytable" runat="server" bgcolor="gray">
    <tbody>
        <tr class="csstablelisttd">
            <td></td>
            <td class="csstdgreen">30</td>
            <td class="csstdgreen" rowspan="3">
                <span>john</span>
            </td>
        </tr>
        <tr class="csstablelisttd">
            <td></td>
            <td class="csstdgreen">45</td>
            <td>Remove me</td>
        </tr>
        <tr class="csstablelisttd">
            <td>09:00</td>
            <td class="csstdgreen">00</td>
            <td>Remove me</td>
        </tr>
    </tbody>
</table> 
```

如果 td 具有 csstdgreen 并且具有属性行跨度，我必须在每个 tr 中遍历表。我必须删除单元格有文本删除我。

```
function clearTable() {
    $('#mytable tbody tr td.csstdgreen').each(function () {
        if ($(this).attr('rowspan')) {
            $(this).parent().find('td:last').remove();
        }
    });
} 
```

**我必须像这样制作桌子**

```
<table id="mytable" runat="server" bgcolor="gray">
    <tbody>
        <tr class="csstablelisttd">
            <td></td>
            <td class="csstdgreen">30</td>
            <td class="csstdgreen" rowspan="3">
                <span>john</span>
            </td>
        </tr>
        <tr class="csstablelisttd">
            <td></td>
            <td class="csstdgreen">45</td>
        </tr>
        <tr class="csstablelisttd">
            <td>09:00</td>
            <td class="csstdgreen">00</td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T09:37:48.897

尝试这个，

**[现场演示](http://jsfiddle.net/GNwFU/5/)**

这将搜索具有 id 的表以`mytable`获取和。如果找到，它将删除所有兄弟姐妹（tr）中的。`td``class csstdgreen``rowspan 3``last td`

```
$('#button1').click(function() {
    $('#mytable td.csstdgreen[rowspan=3]').each(function() {

        $(this).parent().siblings().each(function() {
            $(this).find('td').last().remove();
        });
    });
}); 
```

​ ​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T10:08:25.533

如果您还必须考虑行跨度的值，请尝试以下操作：

```
$('table tr td.csstdgreen').each(function() {
  // parse attribute
  var rowspan = isNaN($(this).attr('rowspan')) ? 1 : parseInt($(this).attr('rowspan'));
  if (rowspan > 1) {
    var rows = $(this).parent().nextAll().slice(0, rowspan - 1); // limit elements
    $(rows).find('td:last-child').remove(); // remove last td of each row
  }
});​ 
```

# ios5 - 在按钮单击时使用 Javascript 在 UIWebView 中跳转搜索结果

> ID：11373855
> 
> 赞同：2
> 
> 时间：2012-07-07T09:31:45.550
> 
> 标签：ios5, cordova

我已经使用 javascript 在 uiwebview 中设置了一个搜索，效果很好，但我希望能够跳转到搜索结果中找到的下一个单词。通过使用以下代码，我已成功使视图滚动到第一个实例：

```
 function uiWebview_HighlightAllOccurencesOfStringForElement(element,keyword) {

//declared a var for height

if (element) {
    if (element.nodeType == 3) {        // Text node
        while (true) {
            //if (counter < 1) {
            var value = element.nodeValue;  // Search for keyword in text node
            var idx = value.toLowerCase().indexOf(keyword);
            if (idx < 0) break;             // not found, abort

            //(value.split);

            //we create a SPAN element for every parts of matched keywords
            var span = document.createElement("span");
            var text = document.createTextNode(value.substr(idx,keyword.length));
            span.appendChild(text);
            span.setAttribute("id",keyword);
            span.setAttribute("class","uiWebviewHighlight");
            span.style.backgroundColor="black";
            span.style.color="white";

            uiWebview_SearchResultCount++;    // update the counter

            text = document.createTextNode(value.substr(idx+keyword.length));
            element.deleteData(idx, value.length - idx);
            var next = element.nextSibling;
            element.parentNode.insertBefore(span, next);
            element.parentNode.insertBefore(text, next);
            element = text;
            if(desiredHeight == 0)
            {
                var offset = {};
                offset.x = 0;
                offset.y =0;
                GetOffset(document.getElementById(keyword),offset);
                desiredHeight = offset.y-150;
                alert(desiredHeight);
                window.scrollTo(0,desiredHeight);
            }
        }

    } else if (element.nodeType == 1) { // Element node
        if (element.style.display != "none" && element.nodeName.toLowerCase() !=  
     'select') {
            for (var i=element.childNodes.length-1; i>=0; i--) {
   uiWebview_HighlightAllOccurencesOfStringForElement(element.childNodes[i],keyword);

            }
        }
     }
   }

  }

   function GetOffset (object, offset) {
  if (!object)
    return;
 offset.x += object.offsetLeft;
 offset.y += object.offsetTop;

  GetOffset (object.offsetParent, offset);
  } 
```

现在我想在单击下一个按钮时跳转到下一个搜索字符串。我该怎么做？请给我建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-02T12:31:30.323

我将该代码用于下一个和上一个功能，它工作正常

```
function uiWebview_HighlightAllOccurencesOfNextStringForElement(element,keyword) {

    if (element) {
        if (element.nodeType == 3) {        // Text node
            while (true) {
                //if (counter < 1) {
                var value = element.nodeValue;  // Search for keyword in text node
                var idx = value.toLowerCase().indexOf(keyword);

                if (idx < 0) break;             // not found, abort

                var span = document.createElement("span");
                var text = document.createTextNode(value.substr(idx,keyword.length));
                span.appendChild(text);
                span.setAttribute("class","MyAppHighlight");
                text = document.createTextNode(value.substr(idx+keyword.length));
                element.deleteData(idx,value.length-idx);
                var next = element.nextSibling;
                element.parentNode.insertBefore(span,next);
                element.parentNode.insertBefore(text,next);
                element = text;
                span.scrollIntoView();
                span.style.backgroundColor = "yellow";

                span.style.color = "black";
                a.push(span);

                uiWebview_SearchResultCount++;

            }
        } else if (element.nodeType == 1) { // Element node
            if (element.style.display != "none" && element.nodeName.toLowerCase() != 'select') {
                for (var i=element.childNodes.length-1; i>=0; i--) {
                    uiWebview_HighlightAllOccurencesOfNextStringForElement(element.childNodes[i],keyword);
                }
            }
        }
    }
}

// the main entry point to start the search
function uiWebview_HighlightAllOccurencesOfNextString(keyword) 
`enter code here`{
    uiWebview_RemoveAllHighlights();
    uiWebview_HighlightAllOccurencesOfNextStringForElement(document.body, keyword.toLowerCase());

} 
```

//And than In Your ViewContrlller Called this function on Next And Previous button method

```
- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar
{
    [self highlightAllOccurencesOfNextString:searchbar.text];
}

- (NSInteger)highlightAllOccurencesOfNextString:(NSString*)str
{
    NSString *filePath = [[NSBundle mainBundle]pathForResource:@"UIWebViewSearch" ofType:@"js"];
    NSData *fileData = [NSData dataWithContentsOfFile:filePath];
    NSString *jsString = [[NSMutableString alloc] initWithData:fileData encoding:NSUTF8StringEncoding];
    [htmlWebView stringByEvaluatingJavaScriptFromString:jsString];

    NSString *startSearch = [NSString stringWithFormat:@"uiWebview_HighlightAllOccurencesOfNextString('%@')",str];
    [htmlWebView stringByEvaluatingJavaScriptFromString:startSearch];
    NSString *result = [htmlWebView stringByEvaluatingJavaScriptFromString:@"a.length"];
    currentPosition = [result intValue] - 1;
    return [result integerValue];

}

-(void)nextMethod
{
    currentPosition -= 1;
    NSString *nextScrollPosition =  [NSString stringWithFormat:@"a[%d].scrollIntoView()", currentPosition];
    [htmlWebView stringByEvaluatingJavaScriptFromString:nextScrollPosition];
}

-(void)previousMethod
{
    currentPosition += 1;
    NSString *previousScrollPosition =  [NSString stringWithFormat:@"a[%d].scrollIntoView()", currentPosition];
    [htmlWebView stringByEvaluatingJavaScriptFromString:previousScrollPosition];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-28T09:06:37.397

这是我的功能，具有必要的功能：

```
// We're using a global variable to store the number of occurrences
var MyApp_SearchResultCount = 0;
var myCurrentCount = 0;

// helper function, recursively searches in elements and their child nodes
function MyApp_HighlightAllOccurencesOfStringForElement(element,keyword) {
    if (element) {
        if (element.nodeType == 3) {        // Text node
            while (true) {
                var value = element.nodeValue;  // Search for keyword in text node
                var idx = value.toLowerCase().indexOf(keyword);

                if (idx < 0) break;             // not found, abort

                var span = document.createElement("span");
                var text = document.createTextNode(value.substr(idx,keyword.length));
                span.appendChild(text);
                var str1 = "MyAppHighlight"+MyApp_SearchResultCount;
                span.setAttribute("class", "MyAppHighlight");
                span.setAttribute("id", str1);
                span.style.backgroundColor="yellow";
                span.style.color="black";
                text = document.createTextNode(value.substr(idx+keyword.length));
                element.deleteData(idx, value.length - idx);
                var next = element.nextSibling;
                element.parentNode.insertBefore(span, next);
                element.parentNode.insertBefore(text, next);
                element = text;
                MyApp_SearchResultCount++;  // update the counter
            }
        } else if (element.nodeType == 1) { // Element node
            if (element.style.display != "none" && element.nodeName.toLowerCase() != 'select') {
                for (var i=element.childNodes.length-1; i>=0; i--) {
                    MyApp_HighlightAllOccurencesOfStringForElement(element.childNodes[i],keyword);
                }
            }
        }
    }
}

// the main entry point to start the search
function MyApp_HighlightAllOccurencesOfString(keyword) {
    MyApp_RemoveAllHighlights();
    MyApp_HighlightAllOccurencesOfStringForElement(document.body, keyword.toLowerCase());
    myCurrentCount = MyApp_SearchResultCount;
    moveToNext();
}

// helper function, recursively removes the highlights in elements and their childs
function MyApp_RemoveAllHighlightsForElement(element) {
    if (element) {
        if (element.nodeType == 1) {
            if (element.className.indexOf("MyAppHighlight") > -1) {
                var text = element.removeChild(element.firstChild);
                element.parentNode.insertBefore(text,element);
                element.parentNode.removeChild(element);
                return true;
            } else {
                var normalize = false;
                for (var i=element.childNodes.length-1; i>=0; i--) {
                    if (MyApp_RemoveAllHighlightsForElement(element.childNodes[i])) {
                        normalize = true;
                    }
                }
                if (normalize) {
                    element.normalize();
                }
            }
        }
    }
    return false;
}

function moveToPrev()
{
    if (myCurrentCount < MyApp_SearchResultCount-1)
    {
        myCurrentCount++;
        document.getElementById("MyAppHighlight"+myCurentCount).scrollIntoView();
    }
    else{
        myCurrentCount = MyApp_SearchResultCount;
        window.scrollTo(0,0);
    }
}

function moveToNext()
{
    if (myCurrentCount > 0)
    {
        myCurrentCount--;
        document.getElementById("MyAppHighlight"+myCurentCount).scrollIntoView();
    }
    else{
        myCurrentCount = MyApp_SearchResultCount;
        window.scrollTo(0,0);
    }
}

// the main entry point to remove the highlights
function MyApp_RemoveAllHighlights() {
    MyApp_SearchResultCount = 0;
    myCurrentCount = 0;
    MyApp_RemoveAllHighlightsForElement(document.body);
} 
```

# php - css中的宽度可以用变量动态选择吗

> ID：11373856
> 
> 赞同：0
> 
> 时间：2012-07-07T09:31:46.410
> 
> 标签：php, html, css

代码是：

```
<div class="bar">
    <div class="percentage" style="width:16%; height: 59px;">This is 66% wide div</div>
</div> 
```

如您所见，此处的宽度为 16 ....我需要一种可以根据变量进行更改的方法。我有一个返回某个值的 php 查询。宽度必须是那个值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T09:34:55.627

你可以用Javascript来做。以 JQuery 为例：

```
$('.percentage').css({'width': x%, 'height': xpx}); 
```

或者你可以用 PHP 做到这一点：

```
<div class="percentage" style="width: <?php echo $width; ?>%; height: <?php echo $height; ?>px; ">This is 66% wide div</div> 
```

# c# - 如何指定datagrid列的宽度占用剩余空间？

> ID：11373860
> 
> 赞同：0
> 
> 时间：2012-07-07T09:32:24.380
> 
> 标签：c#, silverlight-4.0, datagrid, column-width

我正在开发silverlight 4 应用程序。我有以下数据网格

```
<data:DataGrid x:Name="StudentDataGrid" AutoGenerateColumns="False" Height="200" HorizontalAlignment="Left" Margin="176,96,0,0" VerticalAlignment="Top" Width="200">
            <data:DataGrid.Columns>
                <data:DataGridTextColumn Header="First Name" Binding="{Binding FirstName}"></data:DataGridTextColumn>
                <data:DataGridTextColumn Width="*" Header="Last Name" Binding="{Binding LastName}" ></data:DataGridTextColumn>

            </data:DataGrid.Columns>
        </data:DataGrid> 
```

我将以下列表绑定到此数据网格

```
 public List<Student> GetStudents()
        {
            List<Student> studentList = new List<Student>();
            Student s1 = new Student();
            s1.FirstName = "Anil";
            s1.LastName = "Jadhav";
            Student s2 = new Student();
            s2.FirstName = "Shyam";
            s2.LastName = "Jodh";
            studentList.Add(s1);
            studentList.Add(s2);
            return studentList;
        } 
```

代码工作正常。* 宽度占用剩余空间。但是当 s1.FirstName 被赋值时，它的字符串很长，然后代码运行但数据网格不显示滚动条。LastName 列位于右侧并被隐藏。我不想增加datagrd的宽度。如何解决上述问题？为什么datagrid不显示滚动条？您能否提供我可以解决上述问题的任何代码或链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T12:11:08.363

[这里](http://social.msdn.microsoft.com/Forums/is/wpf/thread/8e3fff2a-8757-412a-8aa4-18abf7b09a36)的这个链接描述了这个问题的解决方案。我有点怀疑，因为它不适用于 WPF（我没有 Silverlight），所以有兴趣听听它是否有效。

否则我认为你必须动态设置最后一列的宽度，例如使用触发器。

# iphone - 应用程序不是只安装在 4s 设备上吗？

> ID：11373864
> 
> 赞同：1
> 
> 时间：2012-07-07T09:32:51.540
> 
> 标签：iphone

应用程序不是安装在 4s 设备上，而是安装在 3g 和其他设备上。我该如何解决这个问题？我可以知道原因吗？

提前致谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T09:41:45.297

请检查设备的 UDID 是否已添加到您的配置文件中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T09:37:23.693

您必须添加 armv6 架构。要查看这是如何完成的：

[“警告：iPhone 应用程序应包含 armv6 架构”，即使有构建配置集](https://stackoverflow.com/questions/4198676/warning-iphone-apps-should-include-an-armv6-architecture-even-with-build-config)

# php - 在 PHP 中以适当的面额显示文件大小

> ID：11373866
> 
> 赞同：0
> 
> 时间：2012-07-07T09:33:13.773
> 
> 标签：php, math, precision, filesize

使用 PHP，有什么简单的方法可以根据字节数以适当的面额显示文件大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T09:33:14.400

为此我想出了一个小功能：

```
function filesize_exact($iSize, $iPrecision = 2, $bSpace = true) {

    // By Gabriel Nahmias (gabriel@terrasoftlabs.com)

    // Measure certain byte ranges in descending order.

    $sUnit = "bytes";

    if ($iSize > 1024 * 1024 * 1024 * 1024 * 1024) {
        $sUnit = "PB";
        $iSize /= 1024 * 1024 * 1024 * 1024 * 1024;
    } else if ($iSize > 1024 * 1024 * 1024 * 1024) {
        $sUnit = "TB";
        $iSize /= 1024 * 1024 * 1024 * 1024;
    } else if ($iSize > 1024 * 1024 * 1024) {
        $sUnit = "GB";
        $iSize /= 1024 * 1024 * 1024;
    } else if ($iSize > 1024 * 1024) {
        $sUnit = "MB";
        $iSize /= 1024 * 1024;
    } else if ($iSize > 1024) {
        $sUnit = "KB";
        $iSize /= 1024;
    }

    if ($iPrecision > 0 && $iPrecision != NULL)
        $iSize = round($iSize, $iPrecision);

    // Make sure bytes is always spaced out; could be changed.

    return $iSize . ($bSpace || $sUnit == "bytes" ? " " : "") . $sUnit;

} 
```

为我工作。有几个不错的选择。您可以扩展它以封装任何大小范围，只要它按降序排列，因为这就是此处设置逻辑的方式并且它是合适的。请参阅[http://www.webopedia.com/quick_ref/FileSizeConversionTable.asp](http://www.webopedia.com/quick_ref/FileSizeConversionTable.asp)以获取文件大小面额的体面列表。

# java - Java GUI - 从另一个方法在新窗口中显示文本

> ID：11373878
> 
> 赞同：0
> 
> 时间：2012-07-07T09:34:28.173
> 
> 标签：java, swing, user-interface, jtextcomponent

我有以下界面结构：一个框架，我可以在其中浏览和选择一些文件（在一个类文件中），当我按下一个按钮时，它会读取文件（在一个单独的类文件中）并将它们发送给一些处理（在另一个类文件，第 3 个）。处理本身与这个问题无关。

当我按下前面提到的处理按钮时，会启动一个新窗口（框架）。在那个窗口中，我有一个文本区域，我想在处理过程中显示一些控制台输出，然后显示另一个文本。

绘制第二帧的方法位于第 3 类文件中，即处理类文件中，如下所示：

```
public static void drawScenario(){
    final JPanel mainPanel2 = new JPanel();
    JPanel firstLine = new JPanel();
    JPanel secLine = new JPanel();

    mainPanel2.setLayout(new BoxLayout(mainPanel2, BoxLayout.Y_AXIS));
    mainPanel2.setBorder(new EmptyBorder(new Insets(5, 5, 5, 5)));
    mainPanel2.add(Box.createVerticalGlue());

    firstLine.setLayout(new BoxLayout(firstLine, BoxLayout.X_AXIS));
    firstLine.setBorder(new EmptyBorder(new Insets(5, 5, 5, 5)));
    firstLine.add(Box.createVerticalGlue());

    secLine.setLayout(new BoxLayout(secLine, BoxLayout.X_AXIS));
    secLine.setBorder(new EmptyBorder(new Insets(5, 5, 5, 5)));
    secLine.add(Box.createVerticalGlue());

    JTextArea textArea = new JTextArea("", 10, 40);
    textArea.setLineWrap(true);
    JScrollPane scrollPane = new JScrollPane(textArea); 
    scrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
    textArea.setEditable(false);

    JLabel label1 = new JLabel("Processing results:");

    firstLine.add(Box.createRigidArea(new Dimension(5,0)));
    firstLine.add(label1);
    firstLine.add(Box.createRigidArea(new Dimension(5,0)));

    secLine.add(textArea);
    secLine.add(Box.createRigidArea(new Dimension(5,0)));

    mainPanel2.add(firstLine);
    mainPanel2.add(Box.createRigidArea(new Dimension(0, 30)));
    mainPanel2.add(secLine);
    mainPanel2.add(Box.createRigidArea(new Dimension(0, 20)));

    JFrame frame = new JFrame("Test results");
    frame.setSize(400, 300);
    frame.setLocation(50,50);
    frame.setVisible( true );
    frame.add(mainPanel2);
    frame.pack();

} 
```

处理方法（ public static void compare(String txt1, String txt2) ）也位于同一文件中，在 drawScenario() 方法下方。我的问题是，如何将文本从 compare() 打印到 drawScenario() 方法的 TextArea？

此外，尽管我在 compare() 之前调用了 drawScenario()，但在处理过程中，窗口并没有完全绘制自己（它显示一个黑色的列，并且没有在其中绘制 TextArea）。有没有办法解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T09:44:42.750

至于您的第一个问题，请`textArea`改为实例变量。至于您的第二个，我认为您显示的代码没有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T10:08:31.607

文本区域应该是可见的，`drawScenario`并且`compare`您可以通过方法对其进行更新。这是您如何做到这一点（对您的代码进行最少的更改）

```
public class MyClass {
     private static JTextArea textArea = new JTextArea("", 10, 40);
     public void static drawScenario(){
         // ...
     }
     public static void compare(String txt1, String txt2){
         textArea.setText("here is some text...");
     }    
} 
```

现在，如果您想要正确实现您的要求，您应该这样做：

1.  `drawScenario`和所有的`compare`UI 元素都可以变成非静态的
2.  创建您自己的框架（扩展`JFrame`）类，它将封装所有 UI 元素的创建。在你的`drawScenario()`你可以创建框架并显示它。

# redis - 小Redis片段的解释

> ID：11373881
> 
> 赞同：2
> 
> 时间：2012-07-07T09:34:38.170
> 
> 标签：redis

我指的是@Sripathi Krishnan 对 SO 上提出的问题给出的这个[很好的答案：Redis 只是一个缓存](https://stackoverflow.com/a/10140190/806374)

我正在尝试学习如何使用 redis，而我的研究让我想到了关于 SO 的问题。

有人可以解释一下代码中这两行的原因，因为我仍然发现很难理解它们在 Sripathi 在答案中给出的代码中的用处。

```
$ HINCRBY unique_ids question 1
$ HINCRBY unique_ids answer 1 
```

我知道它创建了一个以“unique_ids”为键的散列，其中“问题”和“答案”字段首先初始化为 0，然后增加到 1。除此之外，我看不到 unique_ids 键与流程的任何链接但我不确定我的菜鸟脑子是否遗漏了一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T09:53:03.893

这些命令只是生成合成主键的一种方式。

在 Sri 的示例中，人们可以在系统中添加问题和答案。这些实体需要被引用，因此它们需要通过唯一键来标识。您可能会想象为此使用某种[UUID](http://en.wikipedia.org/wiki/Universally_unique_identifier)机制，但使用数字键通常更简单。

unique_ids 只是一个方便的容器，用于存储系统中存储的对象的下一个可用键。要添加新问题，只需增加 unique_ids 的 question 字段（Redis 的原子操作），并将返回的值作为新问题的键。它保证所有新问题都将具有不同的关键值。

在关系数据存储中，此类功能由序列（Oracle、PostgreSQL）或自动增量主键（MySQL）提供。

# java - 使用 AND、OR 和 SEQ 对事件流使用 Reaction/ECA 规则进行事件模式检测

> ID：11373884
> 
> 赞同：1
> 
> 时间：2012-07-07T09:34:50.790
> 
> 标签：java, events, event-driven, complex-event-processing, snoop

我有一个事件流，其中事件是一组属性/值对，例如：
`E1 = {(ID, val), (attr, val), (attr, val), ... }`

我想只使用 SNOOP 样式的事件代数来检测简单的模式，即`AND, OR, SEQ`没有括号。
示例：`E1 AND E2 OR E4` , 其中`E`是标识符。

现在，我想使用一些*事件处理引擎*来跟踪事件流并做出反应，以防找到模式。规则类似于此示例中的[RuleML ECA](http://ruleml.org/reaction/0.2/syntax.htm)规则：

```
<rule style="active" ...>
   <on> e.g. E1 SEQ/AND/OR ... </on>
   <do> alert </do>
</rule> 
```

这些规则应该从列表中生成/解析。如果有人可以向我推荐一个能够检测上述简单模式的 CEP 引擎，那就太棒了。
我尝试过[Esper](http://esper.codehaus.org/)和 prova (Prolog + Java)，但无法将列表中的模式“解析”成一组规则。
非常感谢任何帮助！

有谁知道，如果 Drools 可以做到这一点？特别是，我需要能够`AND,OR,SEQ`在规则的 on/when 部分中使用。

# ruby-on-rails - Ruby on rails 堆栈级别太深

> ID：11373886
> 
> 赞同：2
> 
> 时间：2012-07-07T09:34:59.900
> 
> 标签：ruby-on-rails, ruby

考虑以下模型：

```
class Category < ActiveRecord::Base
    # nothing in the model
end

>> rails c

>> Category.all     # works fine 
```

但是当我按照以下方式执行时，它会引发错误`stack level too deep`：

```
>> Category.order("updated_at DESC") # you should assume syntax is right 
```

在将 ruby​​ 从 1.8.7 升级到 1.9.3 并将 rails 从 3.0.4 升级到 3.2.0 后，我遇到了这个错误。在我升级之前它工作正常。根本没有代码更改，只有版本升级。

但是，我的机器上有另一个旧版本的项目，我在那里没有遇到任何错误。

**显然，问题似乎是因为升级版本但不确定，我在 stackoverflow 上阅读了许多线程，但没有得到满意的答案。**

请帮助我已经花了相当多的时间来解决这个问题，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:07:46.967

尝试使用`ulimit`命令增加堆栈大小。也许它只是有点小。

[http://dalibornasevic.com/posts/5-ruby-stack-level-too-deep-systemstackerror](http://dalibornasevic.com/posts/5-ruby-stack-level-too-deep-systemstackerror)

# asp.net - 水晶在 asp.net vb 中报告错误，不需要水晶报告

> ID：11373887
> 
> 赞同：5
> 
> 时间：2012-07-07T09:35:18.370
> 
> 标签：asp.net, vb.net, excel, crystal-reports

我在我的 asp.net(vb) 网站中出现以下 7 个错误。它们发生在我根据[此](https://stackoverflow.com/questions/2407293/how-to-read-excel-cell-from-vb-net)SO 帖子添加对 Microsoft Office 12.0 对象库的引用以尝试读取单个 Excel 工作表单元格之后。现在整个网站无法建立。最令人惊讶的是，当我在项目中不需要水晶报告时，为什么会收到与水晶报告相关的错误？

以下是7个错误：

```
Error   Unknown server tag 'CR:CrystalReportViewer'.    C:\Users\ssaa\Documents\Visual Studio 2010\WebSites\Dpp2012\aspnet_client\system_web\4_0_30319\crystalreportviewers13\preview.aspx  130 

Error   Could not load file or assembly 'CrystalDecisions.Web, Version=12.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304' or one of its dependencies. The system cannot find the file specified.    C:\Users\ssaa\Documents\Visual Studio 2010\WebSites\Dpp2012\aspnet_client\system_web\4_0_30319\crystalreportviewers13\preview.aspx  3   

Error   Could not load file or assembly 'CrystalDecisions.ReportSource, Version=12.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304' or one of its dependencies. The system cannot find the file specified.   C:\Users\ssaa\Documents\Visual Studio 2010\WebSites\Dpp2012\aspnet_client\system_web\4_0_30319\crystalreportviewers13\preview.aspx  6   

Error   Could not load file or assembly 'CrystalDecisions.ReportAppServer.XmlSerialize, Version=12.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304' or one of its dependencies. The system cannot find the file specified.   C:\Users\ssaa\Documents\Visual Studio 2010\WebSites\Dpp2012\aspnet_client\system_web\4_0_30319\crystalreportviewers13\preview.aspx  7   

Error   Could not load file or assembly 'CrystalDecisions.ReportAppServer.ObjectFactory, Version=12.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304' or one of its dependencies. The system cannot find the file specified.  C:\Users\ssaa\Documents\Visual Studio 2010\WebSites\Dpp2012\aspnet_client\system_web\4_0_30319\crystalreportviewers13\preview.aspx  8   

Error   Could not load file or assembly 'CrystalDecisions.ReportAppServer.Controllers, Version=12.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304' or one of its dependencies. The system cannot find the file specified.    C:\Users\ssaa\Documents\Visual Studio 2010\WebSites\Dpp2012\aspnet_client\system_web\4_0_30319\crystalreportviewers13\preview.aspx  4   

Error   Could not load file or assembly 'CrystalDecisions.CrystalReports.Engine, Version=12.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304' or one of its dependencies. The system cannot find the file specified.  C:\Users\ssaa\Documents\Visual Studio 2010\WebSites\Dpp2012\aspnet_client\system_web\4_0_30319\crystalreportviewers13\preview.aspx  5 
```

非常欢迎任何帮助！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-03T07:24:20.107

去这个位置

```
[Windows Partition]:\Windows\Microsoft.NET\Framework\v4.0.30319\ASP.NETClientFiles\crystalreportviewers13\ 
```

打开 preview.aspx 文件，然后更改`12.0.2000.0`为`13.0.2000.0`

有用 ;-）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T13:27:21.010

除了修复`[Windows Partition]:\Windows\Microsoft.NET\Framework\v4.0.30319\ASP.NETClientFiles\crystalreportviewers13\`文件夹中的 preview.aspx 外，您还应该在网站根目录中查找名为 aspnet_client 的文件夹，并在那里应用相同的更改。

如果您在 IIS 中使用多个网站，而不仅仅是“默认网站”，它会将 Crystalreportviewers13 文件夹复制到每个网站中，因此请全部检查。

# events - 所选项目的 ListView 事件已更改

> ID：11373889
> 
> 赞同：2
> 
> 时间：2012-07-07T09:35:40.910
> 
> 标签：events, listview, vb6, selectedindexchanged

更改*ListView的**选定项（或索引）*时会发生哪个事件？

 ** * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T10:18:22.900

```
Private Sub ListView1_ItemClick(ByVal Item As MSComctlLib.ListItem) 
```

可能是反直觉的，但你去。

适用于使用键盘或鼠标进行选择，但与 ListBox 控件不同，在以编程方式设置所选项目时不起作用。*

# php - htaccess & WebsitePanel 404 错误

> ID：11373894
> 
> 赞同：0
> 
> 时间：2012-07-07T09:37:00.633
> 
> 标签：php, .htaccess

我在安装了 WebsitePanel (1.2.1) 和 Helicon Ape 模块以允许使用 htaccess 文件的服务器上运行我的网站时遇到问题。

我在网站属性面板中启用了 Helicon Ape 模块，但 htaccess 不起作用，服务器给我一个 404 错误。

有人知道问题出在哪里吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T16:08:35.930

好的，

我发现了问题。服务器所有者没有按顺序获得许可证。他们有试用许可证，而且这个期限在几天前就到期了。

这是所有的了。

# c# - 这是状态消息显示的最佳方式吗？

> ID：11373896
> 
> 赞同：1
> 
> 时间：2012-07-07T09:37:22.413
> 
> 标签：c#, winforms, multithreading

这是利用显示一段时间的状态消息的最佳方式吗？

```
private void SetStatus(Color _color, string _msg)
{
    System.Threading.Thread t = new System.Threading.Thread(() =>
    {
        stsStatusMsg.ForeColor = _color;
        stsStatusMsg.Text = _msg;
        System.Threading.Thread.Sleep(2000);
        stsStatusMsg.Text = "";
    });
    t.Start();
} 
```

调用它的示例：

```
SetStatus(Color.Red, AppMessages["msgALREADYIN"]); 
```

`stsStatusMsg`（即 a `ToolStripStatusLabel`）在整个应用程序操作期间只能通过此方法访问。

上面的代码确实有效。消息在控件上显示 2 秒钟，然后消失...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T09:40:09.443

如果这是在 WinForms 中，我怀疑，这不太可能工作。您只能从主窗口消息线程访问 UI 控件，可以通过使用控件来访问[`Invoke`](http://weblogs.asp.net/justin_rogers/pages/126345.aspx)。*更新，虽然您的代码确实有效，但这是因为您从线程操作的实际对象不是`Control`- 通常在 WinForms 中，不允许跨线程访问*。

此外，每个状态的新线程似乎都过大了。是的，线程将在某个时候被 GC 释放，但是线程是一种昂贵的创建资源，并且您的代码会为每个状态更改创建一个。更好的方法是使用内置线程池（您可以在其中从框架管理的池中获取长寿命线程上的处理时间），或者使用`Timer`专为按指定时间间隔运行代码而设计的 .

如何更改文本，然后在所需时间后使用 Timer 再次隐藏它？

这是使用 a 的解决方案`Timer`：

```
private void SetStatus(Color _color, string _msg)
{
    stsStatusMsg.ForeColor = _color;
    stsStatusMsg.Text = _msg;
    timer.Start();
}

private void StatusTimer_Elapsed(object sender, EventArgs e)
{
    stsStatusMsg.Text = "";
    timer.Stop();
} 
```

上面的代码假定计时器已经构建，并且它的`Tick`事件与事件挂钩`StatusTimer_Elapsed`。该类非常适合此的原因`System.Windows.Forms.Timer`是在 UI 线程上引发了计时器事件，这意味着您不必担心对控件的跨线程访问。

免责声明：我只是在没有使用编译器的情况下想出了上面的示例，可能需要对其进行调整。

# iphone - .caf 文件长度不同，即使持续时间相同

> ID：11373902
> 
> 赞同：-1
> 
> 时间：2012-07-07T09:38:34.223
> 
> 标签：iphone, ipad

我有 .wav 声音文件，持续时间为 5 秒，音频通道 2，总比特率为 1411200。我正在通过终端上的命令将此文件转换为 .caf 格式。文件转换后，它给出以下信息音频持续时间再次相同（5 秒），但音频通道为 1，总比特率为 705600。

现在这个 .caf 文件保存在 NSBundle 中。我需要录制相同持续时间的音频文件并将其与预先录制的文件进行比较。但是，当我用 NSData 长度同时 NSlog （录制和预先录制的）声音时，它会产生很大的字节差异（大约只有两倍）。

我不明白为什么会发生这种情况，即使两种声音都是具有相同持续时间的 .caf 文件。请帮我。谢谢你的建议。

谢谢苏德什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T12:40:06.510

这取决于[核心音频格式规范的以下因素](https://developer.apple.com/library/mac/#documentation/MusicAudio/Reference/CAFSpec/CAF_spec/CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-TPXREF101)

```
 struct CAFAudioFormat {

 Float64 mSampleRate;

 UInt32  mFormatID;

 UInt32  mFormatFlags;

 UInt32  mBytesPerPacket;

 UInt32  mFramesPerPacket;

 UInt32  mChannelsPerFrame;

 UInt32  mBitsPerChannel;

 }; 
```

还要检查[这](http://new2objectivec.blogspot.in/2011/09/use-ima4-compression-to-reduce-caf-file.html)也取决于上述因素caf文件长度变化的状态

# java - 从文件读取错误（Java）

> ID：11373911
> 
> 赞同：1
> 
> 时间：2012-07-07T09:41:03.360
> 
> 标签：java, file-io, filenotfoundexception

我在这里发布了一个类似的问题：[从包含整数的文件中读取 - java](https://stackoverflow.com/questions/11373002/read-from-a-file-containing-integers-java)但无法得到一个体面的答复。

现在我已经编写了这个新代码，它只读取一个文件并输出结果。

每当我尝试从文件中读取时，我都会收到 FileNotFoundException。代码如下：

```
import java.io.*;

public class second {

/**
 * @param args
 * @throws IOException 
 */
public static void main(String[] args) throws IOException {

    File f = new File("C:\\Users\\Haroon\\workspace\\ppp\\temperature.txt");
    FileReader file = new FileReader(f);
    BufferedReader buf = new BufferedReader(file);

    String s = null;
    while((s = buf.readLine()) != null){
        System.out.println(s);
    }
} 
```

}

这很奇怪，因为该文件位于项目的文件夹中。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T09:45:21.660

那应该行得通。转到文件的位置，复制路径，将其粘贴到您的代码中，然后转义斜杠。你错过了一些东西。

还要检查文件的名称/扩展名是否正确，您可能有类似“temperature.txt.txt”的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T10:21:03.717

我不知道您为什么无法读取该文件。它在我的系统上运行良好。因为你正在让你在 Eclipse 中进行项目。我将在这里发布一个解决方法。

```
System.out.println(System.getProperty("user.dir")); 
```

使用此命令可在执行时查找当前用户目录。现在直接将文件放在该用户目录中。现在您可以直接通过文件名直接读取文件。例如：

```
File f = new File("temperature.txt"); 
```

此外，正如“lxxx”所提到的，通过在 Windows 中启用显示文件扩展名选项来检查文件名和扩展名。

# php - 上传后如何检测损坏或崩溃的图像

> ID：11373913
> 
> 赞同：0
> 
> 时间：2012-07-07T09:41:24.203
> 
> 标签：php, file-upload, upload, image-uploading, uploading

上传后如何检测损坏的图像？

我使用这样的一些代码：

```
$imageSize = getimagesize($tmp_name);
if(!$imageSize ||  !in_array($imageSize['mime'], $allowMimeType)){
    $this->error = 'Bad Image';
    @unlink($tmp_name);
    return false;
}
$tn = imagecreatetruecolor(80, 80);
switch ($imageSize['mime']){
    case 'image/jpeg':
        $userphoto = imagecreatefromjpeg($tmp_name);// Error 1
    break;
    case 'image/png':
        $userphoto = imagecreatefrompng($tmp_name);// Error 1
    break;
    case 'image/gif':
        $userphoto = imagecreatefromgif($tmp_name);// Error 1
    break;
    case 'image/bmp':
        $userphoto = imagecreatefromwbmp($tmp_name);// Error 1
    break;
    default:
        $this->error = 'unknown image';
        @unlink($tmp_name);
        return false;
    break;
}
imagecopyresampled($tn, $userphoto, 0, 0, 0, 0, 80, 80, $width, $height);// Error 2
imagejpeg($tn,'images/userphoto/'.$this->username.'.jpg',100);
chmod('images/userphoto/'.$this->username.'.jpg', 0777);
@unlink($tmp_name);
USERPROFILE::updatePhotoByUsersId($this->username.'.jpg', $this->users_id); 
```

但有时我会给出 2 个错误串联，

1.  在有评论的行`// Error 1`

> imagecreatefromwbmp() [href='function.imagecreatefromwbmp'>function.imagecreatefromwbmp]: >'images/userphoto/4ff7db9800871.bmp' 不是有效的 WBMP 文件
> 
> imagecreatefromgif() [href='function.imagecreatefromgif'>function.imagecreatefromgif]: >'images/usersphoto/4fe70bb390758' 不是有效的 GIF 文件

1.  在评论行`// Error 2`

    > imagecopyresampled()：提供的参数不是有效的图像资源

我认为它的发生是因为文件在上传过程中损坏。如果我是对的，我该如何解决这个问题？如果不是，原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T09:55:52.190

在进行任何进一步处理之前，您应该检查[getimagesize()](http://www.php.net/manual/en/function.getimagesize.php)的返回值。

如果`getimagesize()`返回 a `FALSE`，则表示它已失败并且文件有问题，因此您应该终止。图像通过此检查后，您可以继续处理。

至于为什么会得到`supplied argument is not a valid Image resource`，解释很简单：很可能，存储的图像`$userphoto`实际上是`FALSE`因为`imagecreatefrompng()`和其他`imagecreatefrom`功能失败，返回一个`FALSE`.

`getimagesize()`解决方案：在继续之前检查上传的图像是否有效。

上传失败的一些可能原因：

*   将图像写入临时目录时，某些东西会损坏图像。
*   用户正在上传损坏的文件。

* * *

关于`imagecreatefromwbmp()`失败，这是因为 gd 不支持 BMP 文件。您需要将 BMP 转换为 gd 可以使用的格式。例如，您可以使用[bmp2png](http://cetus.sakura.ne.jp/softlab/b2p-home/)。

# python - GObject.add_emission_hook 只工作一次

> ID：11373914
> 
> 赞同：1
> 
> 时间：2012-07-07T09:41:26.603
> 
> 标签：python, gtk, gobject

我想使用 GObject.add_emission_hook 来连接以捕获类的所有实例的信号。它似乎有效，但只有一次。在下面的最小示例中，“收到的信号”仅打印一次，无论单击其中一个按钮多少次。为什么会这样？我如何在每次点击时收到信号？

当然，在我的应用程序中，事情更复杂，接收器（这里是 Foo 类）不知道发出信号的对象。因此，无法连接到对象本身的信号。

```
from gi.repository import Gtk
from gi.repository import GObject

class MyWindow(Gtk.Window):

    def __init__(self):
        Gtk.Window.__init__(self, title="Hello World")
        vbox = Gtk.VBox()
        self.add(vbox)
        button = Gtk.Button(label="Click Here")
        vbox.pack_start(button, True, True, 0)
        button = Gtk.Button(label="Or There")
        vbox.pack_start(button, True, True, 0)
        self.show_all()

class Foo:

    def __init__(self):
        GObject.add_emission_hook(Gtk.Button, "clicked", self.on_button_press)

    def on_button_press(self, *args):
        print "signal received"

win = MyWindow()
foo = Foo()
Gtk.main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T15:56:14.470

您应该`True`从事件处理程序返回，以便在连续事件上触发回调。如果你返回`False`（当你没有返回任何东西时，我猜`False`是返回）然后钩子被移除。这可以根据您的示例通过以下示例进行说明：

```
from gi.repository import Gtk
from gi.repository import GObject

class MyWindow(Gtk.Window):

    def __init__(self):
        Gtk.Window.__init__(self, title="Hello World")
        vbox = Gtk.VBox()
        self.add(vbox)
        self.connect("destroy", lambda x: Gtk.main_quit())
        button = Gtk.Button(label="Click Here")
        vbox.pack_start(button, True, True, 0)
        button = Gtk.Button(label="Or There")
        vbox.pack_start(button, True, True, 0)
        self.show_all()

class Foo:
    def __init__(self):
        self.hook_id = GObject.add_emission_hook(Gtk.Button, "button-press-event", self.on_button_press)
        GObject.add_emission_hook(Gtk.Button, "button-release-event", self.on_button_rel)

    def on_button_press(self, *args):
        print "Press signal received"
        return False # Hook is removed

    def on_button_rel(self, *args):
        print "Release signal received"
        # This will result in a warning
        GObject.remove_emission_hook(Gtk.Button, "button-press-event",self.hook_id)
        return True

win = MyWindow()
foo = Foo()
Gtk.main() 
```

希望这可以帮助！

# magento-1.6 - Magento admin：使用开始按钮制作简单的管理导入界面

> ID：11373918
> 
> 赞同：0
> 
> 时间：2012-07-07T09:41:54.987
> 
> 标签：magento-1.6, magento

我正在尝试制作一个 Magento 模块，以使我们的 Magento 网店客户能够自动导入我们所有的产品。由于我还不是很精通 Magento 开发，所以我在途中遇到了几站...... :-)

现在我尝试制作一个 AdminController，其中的索引页面应该只显示一个文本和**一个按钮来启动导入过程**。这是“addButton”部分，我遇到了麻烦：

```
public function indexAction() {
  $this->loadLayout();

  $block = $this->getLayout()
    ->createBlock('core/text', 'example-block')
    ->setText("
      <h1>Import/update products</h1>
      <p>On this page you can start the import of all products from Misstoro.</p>
      ...bla bla bla...
    ");
  $this->_addContent($block);

  $url = $this->getUrl('*/*/do_import');

  $this->_addButton('button_import', array(
    'label'     => Mage::helper('import')->__('Start import'),
    'onclick'   => 'setLocation(\'' . $url .'\')',
    'class'     => 'add',
  ));

  $this->renderLayout();
} 
```

**$this->_addButton**给了我一个“调用未定义的方法”错误。

这样做的正确方法是什么？

/ 卡斯滕

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T10:04:27.113

想通了一点更多的研究：

```
$url = $this->getUrl('*/*/do_import');

$block = $this->getLayout()
  ->createBlock('adminhtml/widget_button')
  ->setData(array(
    'label'     => Mage::helper('import')->__('Start import'),
    'onclick'   => 'setLocation(\'' . $url .'\')',
    'class'     => 'add',
  ));
$this->_addContent($block); 
```

# r - R中的图像函数需要永远运行

> ID：11373919
> 
> 赞同：2
> 
> 时间：2012-07-07T00:53:48.140
> 
> 标签：r, matlab

我有一个大小为 23,000 x 200 的矩阵，它在 R 中作为数据帧读取，但处理它的时间比在 MATLAB 中要长得多。

例如，在 MATLAB 中，我键入`image(X)`它需要不到一秒的时间，而在 R 中需要大约一分钟来生成图像。

如果我这样做`dim(X)`了，那就是同一个故事。

有什么想法为什么 R 与 MATLAB 相比处理如此小的矩阵的效率如此之低？

我非常喜欢 R，只是想知道减速的可能来源。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-07T10:10:04.007

以下大约需要一秒钟。

```
n <- 23000
k <- 200
m <- matrix( rnorm(n*k), nc=n, nr=k )

image(m, useRaster=TRUE) 
```

# java - 将多个窗口合并为一个窗口

> ID：11373922
> 
> 赞同：0
> 
> 时间：2012-07-07T09:42:00.740
> 
> 标签：java, swing, rest, layout, layout-manager

我正在开发一个具有以下窗口的应用程序

如果在窗口中输入的信息正确，则将按上述顺序提示用户。现在客户要求我使用这个用户界面。

现在我必须以最后一个窗口格式添加所有这些窗口，如果输入的第一个信息正确，用户将被允许进入最后一个图像的第二部分。并且用户在启动这个应用程序时会看到最后一个图像并且可以在最后一个窗口的各个部分随时更改值。我已经用 Swing Java 对其进行了编码。我是 Java 新手。我在 Netbeans 7.1.2 中工作 我有三个文件： 1)Login.java -包含我的 LoginDemo 类，它具有扩展 Jframe 类的主对象和表单对象 -Login 类扩展 J 框架并实现动作侦听器（此类创建一个 J 框架下一个文件的输入信息 2)Algorithm.java 如果信息正确，则创建下一个文件的新J 框架对象。3)TravellingSalesmanProblem.java 给出的输出如 Optimal Travel Route 窗口所示。我正在使用对网站的 REST 调用访问信息。那么任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:20:16.733

这将取决于您如何构建代码。如果您只是将组件直接放在窗户/框架本身上，那么您可能需要做一些工作。

或者，如果您使用面板，然后将其放置在窗户上，这可能会为您节省一些时间。

反正。假设你只有窗户。

```
for each window do
    myLastWindow.add(window.getContentPane()); 
```

这很简单，但您还需要知道您想要的布局。我建议使用 SwingX 项目中的 GridLayout 或 VerticalLayout 之类的东西。

# cocoa - 如何引用位于同一个 NSWindow 中的 Cocoa 控件？

> ID：11373927
> 
> 赞同：0
> 
> 时间：2012-07-07T09:42:30.087
> 
> 标签：cocoa

我有一个 NSWindow，里面有一个 NSView 和一个 NSTextField。

我现在正在使用界面生成器。我已经在默认的 NSWindow 上删除了这两个控件，并将 NSView 子类化。我正在`-drawRect`从 NSView 实现该方法，我需要访问 NSTextField 的内容。

如何从 NSView 中的方法引用 NSTextField 的实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T10:11:44.690

您的 NSWindow 是（或应该）由窗口控制器控制。在 IB 中，您在窗口控制器中为 NSTextField 创建一个出口。使用插座，您可以参考 NSTextField：

在您的窗口控制器 .h 文件中：

```
@property (strong) IBOutlet NSTextField *myTextField; 
```

在您的窗口控制器 .m 文件中：

```
@synthesize myTextField; 
```

从那里你可以在你的控制器中：

```
[[self myTextField] setEditable: NO]; 
```

需要注意的一点是，您不能直接从该窗口访问窗口中的控件，因为窗口（以及与此相关的所有 Cocoa 控件）静态存储在 XIB/NIB 文件中。所有对控件（UI 元素）的访问都通过控制器（`NSWindowController`, `NSViewController`）进行引导，这些控制器又能够加载 XIB/NIB 文件。

Apple 在其文档中提供了有关如何执行此操作的各种示例。

# java - Java Regexp 捕获组包含空格，为什么？

> ID：11373931
> 
> 赞同：0
> 
> 时间：2012-07-07T09:42:55.607
> 
> 标签：java, regex

我正在尝试解析这个字符串，

```
"斬釘截鐵 斩钉截铁 [zhan3 ding1 jie2 tie3] /to chop the nail and slice the iron (idiom)/resolute and decisive/unhesitating/definitely/without any doubt/"; 
```

使用此代码

```
private static final Pattern TRADITIONAL = Pattern.compile("(.*?) ");

    private String extractSinglePattern(String row, Pattern pattern) {
        Matcher matcher = pattern.matcher(row);
        if (matcher.find()) {
            return matcher.group();
        }
        return null;
    } 
```

但是，由于某种原因，返回的字符串末尾包含一个空格

```
org.junit.ComparisonFailure: expected:<斬釘截鐵[]> but was:<斬釘截鐵[ ]> 
```

我的模式有问题吗？我也试过

```
private static final Pattern TRADITIONAL = Pattern.compile("(.*?)\\s"); 
```

但无济于事

我也尝试在模式末尾匹配两个空格，但不匹配（只有一个空格）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T09:47:09.593

您正在使用[`Matcher.group()`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#group%28%29)记录为：

> 返回与前一个匹配项匹配的输入子序列。

比赛*包括*空间。比赛中的*捕获组*没有，但您没有要求。

如果您将退货声明更改为：

```
return matcher.group(1); 
```

那么我相信它会做你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T09:48:10.013

使用这个正则表达式`(.+?)(?=\s+)`

# javascript - jquery 选择下一个 iframe

> ID：11373932
> 
> 赞同：0
> 
> 时间：2012-07-07T09:43:05.713
> 
> 标签：javascript, jquery, html

html代码

```
<div style="width: 1000px;margin: auto" class="cf"> 
<div class="bo" data-href="../../link1">click</div>
<div class="bo" data-href="../../link2">click 2</div>
<div class="bo" data-href="../../link3">click 3</div>
<iframe class='iframe hd' scrolling='no' frameborder='0'></iframe>

<div class="bo" data-href="../../link1">click</div>
<div class="bo" data-href="../../link2">click 2</div>
<div class="bo" data-href="../../link3">click 3</div>
<iframe class='iframe hd' scrolling='no' frameborder='0'></iframe>

<div class="bo" data-href="../../link1">click</div>
<div class="bo" data-href="../../link2">click 2</div>
<iframe class='iframe hd' scrolling='no' frameborder='0'></iframe> 
```

我尝试当我点击任何 div 时，下一个 iframe 删除 hd 类，并且只有这个特定 div 的下一个 iframe 我点击它

我已经测试过这个选择器

`$(".iframe:first")`

不工作

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T09:47:15.087

试试这个 - [http://jsfiddle.net/aa8yK/](http://jsfiddle.net/aa8yK/)

```
$("div").on("click", function() {
    var iframes = $(this).nextAll("iframe");
    iframes.eq(0).removeClass("hd");
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T10:05:30.357

这里的技巧是确保只选择下一个 iframe，而不是所有 iframe 兄弟姐妹（后者很简单 - 你可以只使用`nextAll()`）。

尝试这个

```
$('div').on('click', function() {               
    $(this).next('iframe').add($(this).nextUntil('iframe').next()).removeClass('hd');
}); 
```

[编辑] - 一种更简单的方法，以及@Zoltan 答案的变体，就是

```
$(this).nextAll('iframe:eq(0)').removeClass('hd'); 
```

# symfony-1.4 - 我应该使用 symfony 还是不使用

> ID：11373934
> 
> 赞同：-1
> 
> 时间：2012-07-07T09:43:46.227
> 
> 标签：symfony-1.4

我想使用 symfony 1.4 制作一个精简的 facebook 版本。但是我过去在 symfony 和记忆方面遇到了一些问题，所以：

使用 symfony 是否明智？顺利运行​​它的服务器要求是什么（cpu，内存......）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T08:02:42.537

关于内存，您如何定义“精简版”或多或少是一个问题；）有很多成功的网站使用 symfony 1.4（也有大网站，例如delicious.com），所以我相信可扩展性的问题更多关于你的知识在性能问题上的成熟程度。

您想到的替代方法是什么？编写自己的框架？然后我强烈的建议是改用现有的（尽管不必是 sf1.4），因为开始实现实际应用程序逻辑的大部分工作已经为您完成。

你看过 Symfony2 吗？因为它是一个更现代的框架，现在非常稳定（因为带有新表单组件的 2.1 即将发布）我建议使用它；）

# functional-programming - 什么是 Lambda 可定义性？

> ID：11373935
> 
> 赞同：4
> 
> 时间：2012-07-07T09:43:50.647
> 
> 标签：functional-programming, lambda-calculus

当我在阅读 lambda 演算时，遇到了**Lambda 可定义性**这个词。有人可以解释那是什么，因为我找不到任何好的资源。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-16T07:32:47.817

更一般地说，有一系列研究试图在广泛的语言类别中描述“lambda 可定义性”。“lambda 可定义性”本身通常与以集合形式给出的语言语义相关。对于`T`我们语言中的类型，将`|T|`其解释为一个集合。现在，取一个元素`|T|`-- 调用它`e`。我们想知道我们的语言中是否有一个术语——称之为`x : T`（T 类型的 x），这样 |x| 是`e`。如果有这样一个术语，那么我们说它`t`是 lambda 可定义的。

现在，在我们的完美世界中，当我们将一种语言解释为集合时，我们想说与每种类型关联的集合正是那些包含该类型的 lambda 可定义元素且*仅*包含 lambda 可定义元素（完整性）的集合. 这也很好，也许可以说我们可以提供一种算法来*确定*集合中声明的元素是否具有关联的 lambda 项（可判定性）。

现在，我们通常不只是建模成集合，而是建模成其他有趣的数学结构。而且我们不仅仅从 lambda 演算建模，而是从其他相关系统建模，例如 Plotkin 的 PCF 等。但研究中的属性通常仍称为“lambda-definability”。

经过几十年的研究，在这方面仍有许多悬而未决的问题和疑问——虽然某些低阶项已被证明具有可判定的 lambda 可定义性（经典结果涉及高达二阶的项），但许多项并没有产生这么容易。这篇论文（Ralph Loader 的“The Undecidability of lambda-Definability”）给出了一个重要的这种不可判定性结果并描述了一些后果：[http ://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.36.6860](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.36.6860)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T18:49:23.277

请参阅[Church-Turing](http://www.alanturing.net/turing_archive/pages/reference%20articles/The%20Turing-Church%20Thesis.html)论文，其中 lambda 可定义函数（来自 Church）是那些为我们提供[“有效可计算”](http://en.wikipedia.org/wiki/Computable_function)函数的函数。图灵表明，可在图灵机上实现的程序等价于 lambda 可定义函数。

# javascript-events - Javascript (JQuery) - 如何为 Chrome 禁用 Ctrl + P

> ID：11373937
> 
> 赞同：1
> 
> 时间：2012-07-07T09:44:11.977
> 
> 标签：javascript-events, javascript

我的一个应用程序具有自定义按钮来打印客户发票账单。& 浏览器还具有默认打印选项 (Cntrl + P) 来打印窗口内容。

最初，我通过添加解决了这个问题，

```
$(document).ready(function(){
    $(document).keydown(function(event) {
        if (event.ctrlKey==true && (event.which == '80') { //cntrl + p
            event.preventDefault();
        }
    });
 }); 
```

但我觉得，这不是可行的解决方案。因为我在这里在文档上绑定 this(keydown) 事件。所以在应用程序上的每一个按键都会触发这个（keydown）事件，所以这对于性能问题来说非常关键..

是否有任何其他解决方案，以便我可以禁用**cntrl + p**（没有绑定事件）？

**注意：**重要和好的事情是我们的客户只使用谷歌浏览器来访问这个应用程序..

此致。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T09:48:36.167

JavaScript 都是关于事件的，所以你不会找到不依赖关键事件的解决方案。你有实际的性能问题吗？每个浏览器都应该能够处理这个问题。

或者，正如[Don Knuth](http://de.wikipedia.org/wiki/Donald_Ervin_Knuth)的一句流行名言所说：

> 我们应该忘记小的效率，比如大约 97% 的时间：过早优化是万恶之源

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T10:02:41.577

您是否考虑过使用它：

`<link rel="alternate" media="print" href="alternativeUrlForPrint.ext" />`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T06:15:19.367

据我了解，如果有人有专业的基于网络的 POS 或业务应用程序，那么出于打印目的，您可以使用[JZebra](http://code.google.com/p/jzebra/) java applete，这将真正解决您的所有问题，因为它不依赖于浏览器，如打印预览或浏览器的内置 css 等。

# mysql - 子字符串返回一个数字值而不是 varchar

> ID：11373938
> 
> 赞同：0
> 
> 时间：2012-07-07T09:44:37.700
> 
> 标签：mysql

```
$query = mysql_query(SELECT * FROM test WHERE SUBSTRING(date,0,4)="1392") //for example 1392
echo query['name']; 
```

我想得到 4 个第一个字符并检查它是否与 1392 相等。但它返回 1054 我的列名类型是 varchar，我对此一无所知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T09:46:05.073

MySQL 从 1 开始计数 char，而不是从 0 开始作为 php。尝试

```
SUBSTRING(date,1,4)="1392" 
```

或者如果你想要年份

```
YEAR(date)="1392" 
```

[http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_substring](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_substring)

**编辑**测试示例

```
CREATE TABLE babak (name VARCHAR(20) NOT NULL, date VARCHAR(10) NOT NULL);
INSERT INTO babak SELECT 'test', '1391/11/11';
INSERT INTO babak SELECT 'correct', '1932/11/11';

SELECT * FROM babak WHERE YEAR(date) = 1932;
+---------+------------+
| name    | date       |
+---------+------------+
| correct | 1932/11/11 |
+---------+------------+

SELECT * FROM babak WHERE SUBSTRING(date, 1, 4) = 1932;
+---------+------------+
| name    | date       |
+---------+------------+
| correct | 1932/11/11 |
+---------+------------+ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T10:04:00.233

所以你的日期是`varchar`格式的`yyyy/MM/dd`，试试这个：

```
SELECT   *
  FROM   test 
 WHERE   SUBSTRING(`date`,1,4) = '1932' 
```

**[单击此处进行演示](http://sqlfiddle.com/#!2/88ce9/7)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T10:00:39.113

mysql_query 只返回一个资源，您需要使用该资源来获取结果

```
$resource = mysql_query('SELECT * FROM test WHERE SUBSTRING(date,1,4)="1392"')
$result = mysql_fetch_assoc($resource);
echo $result['name']; 
```

# c# - 获取应用程序首次运行表单

> ID：11373941
> 
> 赞同：0
> 
> 时间：2012-07-07T09:44:59.283
> 
> 标签：c#, winforms, reflection

我在一个项目中有两个表格。当我的应用程序运行时，`Form1`它被打开。之后我打开`Form2`。

如何`Form1`通过`Form2`反射访问？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T09:48:52.587

为什么要为此使用反射？

创建第二个表单时，只需传入对第一个表单的引用：

```
// I assume it's code within Form1 which opens Form2
Form2 form2 = new Form2(this);
form2.Show(); 
```

假设您很乐意添加一个构造函数`Form2`作为参数。或者，将其设为 中的属性`Form2`：

```
Form2 form2 = new Form2 { Form1 = this };
form2.Show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T10:03:38.257

如果您只打开一个 form2 实例，您也可以这样做： `Form2 f2 = Application.OpenForms["Form2"];`

# database - 如何在现有表中插入一列？

> ID：11373943
> 
> 赞同：2
> 
> 时间：2012-07-07T09:45:08.817
> 
> 标签：database, oracle, oracle10g

我的表名`userdetails`

我想在列`mob`之后插入一个新`location`列。

我尝试使用代码

```
alter table userdetails 
add mob varchar2(10) after location; 
```

但它显示错误

> ORA-01735: 无效的 ALTER TABLE 选项

请帮我。

我正在使用oracle10g。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T09:57:03.713

尝试摆脱“之后”

```
alter table userdetails add ( mob varchar2(10) ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T10:04:08.110

没有“后定位”。语法无效。

您可能会走以下路线：只需将 mob varchar 添加到 userdetails。它将被添加到表格的末尾。你仍然可以查询它。ALTER TABLE userdetails ADD (mob varchar2(10))

要获得所需的表结构：

```
// 1) rename the table
rename userdetails to userdetails_old;

// 2) recreate the table with your wanted structure
// Note that the selection order decides about the table structure.
create table userdetails
as
select a as a
     , b as b
     , location as location
     , mob  as mob
     , c as c
from userdetails_old;

// 3) check what you did
desc userdetails;

// 4) before dropping your old table
drop table userdetails_old; 
```

# asp.net - InvalidOperationException 由于在查询中使用了多个数据模型

> ID：11373947
> 
> 赞同：0
> 
> 时间：2012-07-07T09:45:56.430
> 
> 标签：asp.net, visual-studio-2010, telerik-open-access

我正在使用 Telerik 开放访问。我有三个数据模型，对于这三个数据模型，我有三个不同的上下文模块。

在我的查询中，我想通过连接不同数据模型中的不同表来检索数据。我写了查询，但它抛出了这个错误：

> InvalidOperationException 未由用户代码处理。

如果项目中有不同的数据模型，我该如何检索数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T13:11:39.570

您可以单独检索数据并将其加入内存中，但是无法直接查询不同模型中的数据。

# ios - 接收信号：Web 服务调用函数中的 EXC_BAD_ACCESS

> ID：11373958
> 
> 赞同：1
> 
> 时间：2012-07-07T09:47:20.297
> 
> 标签：ios, xcode, xcode4.2

我是 iPhone 开发的新手。我正在使用 xcode 4.2。

当我单击保存按钮时，我从 html 页面获取值并且我的 Web 服务正在处理它们，然后我收到错误：

> 程序接收信号：EXC_BAD_ACCESS

在我的网络服务调用功能中。这是我的代码：

```
 NSString *val=[WebviewObj stringByEvaluatingJavaScriptFromString:@"save()"];
    NSLog(@"return value:: %@",val);
    [adict setObject:[NSString stringWithFormat:@"%i",userid5] forKey:@"iUser_Id" ];
    [adict setObject:[[val componentsSeparatedByString:@","]objectAtIndex:0] forKey:@"vImage_Url"];
    [adict setObject:[[val componentsSeparatedByString:@","]objectAtIndex:1] forKey:@"IGenre_Id"];
    [adict setObject:[[val componentsSeparatedByString:@","]objectAtIndex:2] forKey:@"vTrack_Name"];
    [adict setObject:[[val componentsSeparatedByString:@","]objectAtIndex:3] forKey:@"vAlbum_Name"];
    [adict setObject:[[val componentsSeparatedByString:@","]objectAtIndex:4] forKey:@"vMusic_Url"];
    [adict setObject:[[val componentsSeparatedByString:@","]objectAtIndex:5] forKey:@"iTrack_Duration_min"];
    [adict setObject:[[val componentsSeparatedByString:@","]objectAtIndex:6] forKey:@"iTrack_Duration_sec"];
    [adict setObject:[[val componentsSeparatedByString:@","]objectAtIndex:7] forKey:@"vDescription"];
    NSLog(@"dict==%@",[adict description]);

  NSString *URL2= @"http://184.164.156.55/Music/Track.asmx/AddTrack";
  obj=[[UrlController alloc]init];
  obj.URL=URL2;
  obj.InputParameters = adict;
  [obj WebserviceCall];
 obj.delegate= self;

       //this is my function..it is working for so many function calls
     -(void)WebserviceCall{

     webData = [[NSMutableData alloc] init];

  NSMutableURLRequest *urlRequest = [[ NSMutableURLRequest alloc ] initWithURL: [ NSURL URLWithString: URL ] ];

   NSString *httpBody = @"";
        for(id key in InputParameters)
        {
         if([httpBody length] == 0){
         httpBody=[httpBody stringByAppendingFormat:@"&%@=%@",key,[InputParameters valueForKey:key]];
    }
         else{
         httpBody=[httpBody stringByAppendingFormat:@"&%@=%@",key,[InputParameters valueForKey:key]];
          }
          }
       httpBody = [httpBody stringByAppendingFormat:httpBody];//Here i am getting  EXC_BAD_ACCESS 

        [urlRequest setHTTPMethod: @"POST" ];
     [urlRequest setHTTPBody:[httpBody dataUsingEncoding:NSUTF8StringEncoding]];
     [urlRequest setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"content-type"];

          NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:urlRequest delegate:self];

       } 
```

任何人都可以帮助我吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T15:12:42.910

`stringByAppendingFormat`需要一个（sprintf 风格的）格式化字符串作为它的第一个参数，然后每个 % 格式占位符再一个参数。例如：

```
[httpBody stringByAppendingFormat:@"Integer: %d, String: %@", 1234, @"Hello"]; 
```

如果您的`httpBody`字符串恰好包含一个“%”，后跟一个有效的格式类型（例如，“d”、“f”、“@”等），那么`stringByAppendingFormat`您将需要额外的参数，但您没有提供这些参数。尝试取消引用这些参数将导致您的 EXC_BAD_ACCESS。

我没有完全遵循你的代码逻辑，所以我不确定你在那条线上的真正意图。

# css - 在 jquerymobile 中自定义一个按钮？

> ID：11373960
> 
> 赞同：0
> 
> 时间：2012-07-07T09:47:48.383
> 
> 标签：css, html, jquery-mobile

那是我的 JQueryMobile 按钮：

```
 <p><a href="#test1" data-role="button" class="testbutton1">Test 1</a></p> 
```

这就是css规范：

```
.testbutton1 {
    /* Fallback for web browsers that don't support RGBa */
    background-color: rgb(0, 0, 0);
    /* RGBa with 0.6 opacity */
    background-color: rgba(0, 0, 0, 0.6);
    /* For IE 5.5 - 7*/
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);
    /* For IE 8*/
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";   
} 
```

当我加载 html 端时。没发生什么事？我的错误是什么？

提前谢谢

-- *1.Update* -- 谢谢你的回答！好的，这就是我所支持的：

```
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script> 
```

但什么也没发生……哈哈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T10:46:05.330

确保您已包括：

*   核心 jQuery
*   jQuery手机
*   jQuery 移动 CSS

它应该可以工作 - [http://jsfiddle.net/Jhvqh/](http://jsfiddle.net/Jhvqh/)

此外，我认为您不需要在移动设备上支持旧的 IE-s。

# android - Android 滑动活动列表

> ID：11373962
> 
> 赞同：1
> 
> 时间：2012-07-07T09:48:00.383
> 
> 标签：android, swipe

我曾在 android 3.0 中进行过“滑动”，并且运行良好。现在在刷了一些页面（假设向右）之后，我希望所有这些页面都出现在底部（作为选项），这样我就不必刷所有页面（向左）回到第一页。我可以直接从这些选项中选择所需的页面并跳转到该活动。请帮助或告诉我任何可以提供帮助的好教程。谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T10:12:08.980

在底部放置一些容器布局，为 swipe 事件添加一个侦听器，您可以在其中动态膨胀/生成相应的项目并将其添加到底部的容器中。为项目添加点击监听器，并在点击监听器中模拟滑动到相应的页面......

# python - Google App Engine get_current_user 始终返回 None，即使我已登录

> ID：11373966
> 
> 赞同：1
> 
> 时间：2012-07-07T09:48:27.423
> 
> 标签：python, google-app-engine, google-cloud-platform, google-cloud-datastore

这是我的代码

```
 def subscribe_current_user(self):
        user1 = SocialNodeSubscription(parent=self.key)
        user1.subscribed = True
        current_user = users.get_current_user()
        logging.error(current_user)
        if current_user:
            user1.user=current_user
        else:
            raise users.UserNotFoundError

        user1.put() 
```

问题是即使我已登录 get_current_user 也会返回 None 。它在字段 user1.user 中存储 None 并在日志控制台中打印 None 。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T09:57:52.167

您是否已`login: required`在 app.yaml 中为您的处理程序定义，或者您是否提供了登录 url，`users.create_login_url()`以便用户可以显式登录。

即使您在某处登录谷歌， users.get_current_user() 也不会返回用户对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-14T18:08:29.063

我见过很多类似的问题。

以不同的方式思考这条线会有所帮助......

用户 = users.get_current_user()

此行不会在您的浏览器中搜索高低并缓存和检索任何信息并将其放入一个不错的用户对象中；它只是检查用户是否使用用户类登录到应用程序。这意味着如果您没有使用 users 类登录用户，那么这行代码很可能不会执行您希望它执行的操作。

通常应该遵循 get_current_user() 方法的重要代码：

```
if user:
        greeting = ('Welcome, %s! (<a href="%s">sign out</a>)' %
                    (user.nickname(), users.create_logout_url('/')))
    else:
        greeting = ('<a href="%s">Sign in or register</a>.' %
                    users.create_login_url('/'))

self.response.out.write('<html><body>%s</body></html>' % greeting) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T10:00:01.843

我相信，你肯定进口了这个，

**从 google.appengine.api 导入用户**

而且，你真的在​​登录时验证了 django 的“用户”模型吗？

# jquery - 我怎样才能在一个 html 页面中运行 lightbox jquery 更多时间

> ID：11373969
> 
> 赞同：0
> 
> 时间：2012-07-07T09:48:53.063
> 
> 标签：jquery, html

如何在 html 页面中多次运行灯箱 jquery。? 我可以在单个 html 页面中多次运行一个 jquery 吗？

我使用的代码是

```
<script type="text/javascript">
$(function() {
    $('#gallery a').lightBox();
});
</script>

<div id="gallery">
<ul>
    <li>
        <a href="photos/ilPunto-cat1.jpg" target="_parent">
             <img src="photos/ilPunto_cat1.jpg" class="left"/>
        </a>
</li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T11:37:58.017

如果您想将 Lightbox 应用于比画廊内更多的图像，那么

```
$(function() {
    $('#gallery1 a').lightBox();
    $('#gallery2 ul li a').lightBox();
}); 
```

或者

```
$(function() {
    $('#gallery1 a, #gallery2 ul li a').lightBox();
}); 
```

我推荐第一段代码。灵活很多。

# c# - 如何以编程方式知道项目类型？

> ID：11373971
> 
> 赞同：0
> 
> 时间：2012-07-07T09:49:06.337
> 
> 标签：c#, windows, visual-studio

我的项目中有一个文件。该文件被其他一些项目使用。我想使用控制台项目的控制台和 Windows 应用程序项目的 Messagebox 在此文件中显示一些消息。所以，我想以编程方式了解项目类型。有人可以说如何实现吗？

注意：该文件采用 C# 语言。

**编辑：** 大卫的回答是我必须遵循的方式。但是，目前我们已经接近发布日期。所以，我需要使用项目类型作为临时解决方案。有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T12:01:26.850

测试是否有主窗口，如果没有，则必须在控制台应用程序中：

```
if (Process.GetCurrentProcess().MainWindowHandle == IntPtr.Zero)
{
    Console.WriteLine(...);
}
else
{
    // Your Message box code
    ....
} 
```

# javascript - 如何使用 jquery 或 javascript 为两张图片制作动画？

> ID：11373980
> 
> 赞同：0
> 
> 时间：2012-07-07T09:50:07.000
> 
> 标签：javascript, jquery, asp.net, animation

我有两个图像，我想在单击按钮时为它们设置动画。我希望当我单击按钮时，两个图像彼此靠近。怎么办？有人可以帮我做吗。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T09:53:56.960

就像是：

```
$('input[type=button]').click(function() {
    $('#pic1').animate({left:+=50});
    $('#pic2').animate({left:-=50});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T09:54:29.863

单击按钮时，通过 jquery 或 java 获取两个元素并更改它们的位置。写下您的 HTML，以便我可以帮助您编写代码。

# php - AJAX 不想缓存图片

> ID：11373981
> 
> 赞同：2
> 
> 时间：2012-07-07T09:50:11.313
> 
> 标签：php, c++, ajax, caching

我有一个 Web 表单，它采用 C++ 代码，在服务器上编译它，然后输出输出。有问题的 C++ 代码写入可在网页上查看的 BMP 文件。这是通过 AJAX 接口的。我的主要问题是，每当我重新编译程序以更改图像时，除非我刷新页面，否则相关图像不会更改。因此我认为这是一个缓存问题。以下是步骤：

1.  人员输入 C++ 代码
2.  人按提交
3.  C++ 代码被发送到 compile.php
4.  compile.php 编译程序并显示目录中的所有图像

如果有人在程序中更改了图像的颜色并重新提交了表单，则提交成功但除非刷新页面，否则图像不会更改。我在更改输出文件名并创建具有正确颜色的新图像时验证了这一点，但是如果您使用相同的文件名重新编译程序，除非您刷新页面，否则该特定图像不会更改。

我尝试将无缓存标头放在 PHP 文件的顶部。

```
<?php
header("Expires: Mon, 26 Jul 1990 05:00:00 GMT");
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
header("Cache-Control: no-store, no-cache, must-revalidate");
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache");
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T10:17:00.490

要解决此问题，您可以尝试在发出 AJAX 请求时禁用 Javascript 库中的缓存。对于[JQuery](http://api.jquery.com/jQuery.ajax/)，设置`cache`为`false`.

另一种解决方案是在发出请求时手动附加缓存清除参数。例如，不是向 发出 AJAX 请求，而是向当前时间戳在哪里`compile.php`发出请求。这应该强制浏览器不使用缓存的副本。`compile.php?123456``123456`

# asp.net - 您可以在现有的 webforms asp.net 站点中使用 .cshmtl-pages 吗？

> ID：11373983
> 
> 赞同：0
> 
> 时间：2012-07-07T09:50:21.127
> 
> 标签：asp.net, razor

我在 webforms asp.net 中有一个现有的站点，但现在我想让页面更像 mvc 或经典 asp，而没有回发和视图状态的麻烦。那么是否可以在 webforms-asp.net 中创建纯 .cshtml 页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T09:59:11.577

你的问题应该是。

> 我可以在单个 asp.net 项目中使用 webforms 和 MVC 吗？

那我就说。**是的**

# android - 如何使用 OOP 而不是线程从初始屏幕显示另一个活动

> ID：11373986
> 
> 赞同：0
> 
> 时间：2012-07-07T09:50:50.760
> 
> 标签：android, android-activity

这是我的想法，我想在 android 中创建一个类似活动的组件，所以以这种方式，我希望我的主要活动源自我的启动活动，该启动活动源自 Activity，并且在我的启动活动中，我想检查许可证，如果它是可用然后我想重定向到从启动活动派生的主要活动。

我的整个想法是拥有一个组件，因此通过从主要活动扩展它，一切都应该自动化。

我已经使用以下代码完成了此操作，但它运行不顺利，我确信我的方法有问题：

```
//my main activity which will be shown after splash screen
public class MyActivity extends SplashLoader
{
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.setNextActivity(this);
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        TextView tv = (TextView) findViewById(R.id.tv);
        tv.setText("hello");

    }
}

//my splash activity

public class SplashLoader extends Activity
{
    private static final String ERROR_MESSAGE = "Error message";
    private  Activity nextActivity=null;

    public Activity getNextActivity() {
        return nextActivity;
    }

    public void setNextActivity(Activity nextActivity) {
        this.nextActivity = nextActivity;
    }

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        LinearLayout lLayout = new LinearLayout(this);
        lLayout.setOrientation(LinearLayout.VERTICAL);
        lLayout.setLayoutParams(new LinearLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT));
        ImageView iv = new ImageView(this);
        iv.setLayoutParams(new LinearLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT));
        iv.setImageResource(R.drawable.logo);
        lLayout.addView(iv);
        setContentView(lLayout);

boolean isRegistered = false;
        if(!isRegistered)
        {
            createDialog().show();
        }
        else
        {
        //    finish();
            Intent intent = new Intent(SplashLoader.this,getNextActivity().getClass());
            startActivity(intent);

        }
    }

    private AlertDialog.Builder createDialog()
    {
        AlertDialog.Builder builder = new AlertDialog.Builder(this);

        DialogInterface.OnClickListener clickListener = new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialogInterface, int which)
            {
                switch (which)
                {
                    case DialogInterface.BUTTON_NEUTRAL:
                        System.exit(0);
                        break;
                    default:
                        break;
                }

            }
        } ;

        builder.setMessage(ERROR_MESSAGE).setNeutralButton("Ok" ,clickListener );
        return builder;
    }
}

//and my manifest 

<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="com.example"
          android:versionCode="1"
          android:versionName="1.0">
    <uses-sdk android:minSdkVersion="10"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.READ_PHONE_STATE"/>

    <application android:label="@string/app_name">
        <activity android:name="MyActivity"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>
    </application> 
```

编辑：

这种方法没有任何错误，但是在splash想要加载mainActivity之后它有一个滞后或者在改变方向之后我可以看到mainActivity。这种方法的行为有点奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T11:09:21.040

在`MainActivity.onCreate()`你打电话`super.onCreate()`。因为`MainActivity`从`SplashLoader`this 派生的最终会调用`SplashLoader.onCreate()`. 在`SplashLoader.onCreate()`你膨胀视图并调用 setContentView()。然后`MainActivity.onCreate()`你再做一次（从而覆盖你所做的所有工作`SplashLoader.onCreate()`）。膨胀视图需要时间（和资源），这可能会产生部分可见延迟。此外，`SplashLoader.onCreate()`调用 startActivity() 来启动`MainActivity`，这将在`MainActivity.onCreate() calls super.onCreate()`.

如果你真的想做一些事情，比如`MainActivity`从扩展`SplashLoader`，那么你需要修复你的生命周期覆盖的工作方式。您可能需要执行以下操作：

在**SplashLoader**中：

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    setNextActivity(this);
    super.onCreate(savedInstanceState);
    // Do any activity-specific stuff
    doOncreate(savedInstanceState);
}

// Derived classes should NOT override onCreate(), but should
//  instead override doOnCreate() and put their activity-specific code there
protected void doOnCreate(Bundle savedInstanceState) {
}
    // This is the SplashLoader-specific onCreate() stuff
    LinearLayout lLayout = new LinearLayout(this);
    lLayout.setOrientation(LinearLayout.VERTICAL);
    ... etc etc etc ...
} 
```

在**MainActivity**：

```
@Override
protected void doOnCreate(Bundle savedInstanceState)
{
    // This is the MainActivity-specific onCreate() stuff
    setContentView(R.layout.main);
    TextView tv = (TextView) findViewById(R.id.tv);
    tv.setText("hello");
} 
```

# java - 模拟 Json 响应

> ID：11373999
> 
> 赞同：1
> 
> 时间：2012-07-07T09:53:38.770
> 
> 标签：java, javascript, spring-mvc, extjs

我们在项目中使用带有 Spring MVC 的 ExtJS，并且大多数时候 UI 是在后端之前开发的，这意味着我们需要转到控制器，创建虚拟方法以模拟网格的 Json 响应等。

您是否会推荐任何框架来模拟 Json 响应，而不是总是使用 Java 并创建新方法？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T10:21:26.197

您不能将准备好的 JSON**文件**作为静态内容放在服务器上并指向它们而不是动态处理程序吗？