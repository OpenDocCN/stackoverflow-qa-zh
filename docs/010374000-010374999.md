# StackOverflow 问答 10374000-10374999

# ruby-on-rails-3 - ruby on rails - 创建一个简单的 html 页面

> ID：10374001
> 
> 赞同：0
> 
> 时间：2012-04-29T16:56:35.273
> 
> 标签：ruby-on-rails-3

我需要一些帮助来创建一个简单的 html 页面并将其定位在服务器中。

由于我在文档中找不到它，所以我尝试将 index2.html 文件放在 /public 库中，当我尝试使用它来接收它时

```
http://127.0.0.1:3000/index2.html 
```

或者

```
http://127.0.0.1:3000/public/index2.html 
```

和接收器

```
ActionController::RoutingError (No route matches [GET] "/public/index2.html"): 
```

1.  如何从服务器获取 html
2.  我如何将其设为默认值。

谢谢。

编辑：感谢您的回答。我正在寻找最简单的工作方式。在许多 [教程](http://ruby.railstutorial.org/chapters/static-pages#sec%3atruly_static_pages)中，它说您可以将其放在公用文件夹中，仅此而已。这将使我无用的控制器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T18:05:23.220

您可以通过多种方式做到这一点：更明显的是在您的一个控制器（或一个新的控制器，无论如何）中执行任何操作（渲染视图除外），并为其添加路由。还有其他方法可以实现这一点，使用更合适的工具。我从来没有使用过它们中的任何一个，所以可能想用谷歌搜索它（静态页面导轨），但我知道其中一个是名为`High Voltage`. 希望这对你有好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T17:09:14.200

我想你可能误解了 Rails ......

我从未使用过它，但我想我可能可以帮助您回答问题。Rails 是 Ruby 语言最流行的 MVC 框架，因此是“Ruby on Rails”。这是 MVC 框架的链接，可以帮助您理解它： [http ://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)

使用 MVC 框架，您无法通过 URL 直接“获取”文件。您必须通过路由引擎获取它。通常，您通过一个控制器来执行此操作，该控制器通常从模型中呈现视图。

如果您不了解 MVC 框架的工作原理，则很难解释，但是一旦您了解了，您应该能够非常快速地开发 Web 应用程序。

在这里查看创建您的第一个 Rails 应用程序：http: [//guides.rubyonrails.org/getting_started.html](http://guides.rubyonrails.org/getting_started.html)

# wxpython - 将事件绑定到对话响应

> ID：10374003
> 
> 赞同：0
> 
> 时间：2012-04-29T16:56:57.727
> 
> 标签：wxpython

我对 wxpython 很陌生。我有一个对话框，如果用户点击确定，那么它应该触发一个事件。我不确定事件如何绑定到对话框中的按钮。我尝试使用正常的方法调用，但这导致了一个问题，当我关闭应用程序时，程序没有在终端级别终止。我试过使用这样的东西。

def OnclickMe（自我，事件）：

```
 dlg = wx.MessageDialog(None, 'Is this right', 'MessageDialog', wx.YES_NO | wx.ICON_QUESTION)
    result = dlg.ShowModal()
    if result == wx.ID_YES:
        self.IfYes()
    dlg.Destroy()
def IfYes(self):
    dlg = wx.TextEntryDialog(None, "Wats ur opinion?", 'A Question', '')
    if dlg.ShowModal() == wx.ID_OK:
        response = dlg.GetValue() 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:25:36.393

当您调用 IfYes() 时，会暂停第一个对话框的销毁，直到第二个对话框关闭/销毁。我认为如果你破坏 TextEntryDialog 它会起作用。执行应返回“if”语句并退出该语句，从而破坏对话框。如果您仍有问题，请尝试将 IfYes() 方法调用从条件中取出。像这样的东西应该工作：

```
yes_or_no = False
if result == wx.ID_YES:
    yes_or_no = True
dlg.Destroy()
if yes_or_no:
    self.IfYes() 
```

是的，这是一个黑客，但我只是好奇这是否有效......

# c - 如何在 C 中跟踪函数调用？

> ID：10374005
> 
> 赞同：19
> 
> 时间：2012-04-29T16:57:18.890
> 
> 标签：c, trace, call-hierarchy

**在不**修改源代码的情况下，当调用某个函数（例如以下示例中的 func100）时，我如何跟踪调用了哪些函数以及使用了哪些参数。我希望输出如下：

```
enter func100(p1001=xxx,p1002=xxx)
        enter func110(p1101=xxx,p1102=xxx)
        exit  func110(p1101=xxx,p1102=xxx)
        enter func120(p1201=xxx,p1202=xxx,p1203=xxx)
                enter func121(p1211=xxx)
                exit  func121(p1211=xxx)
        exit  func120(p1201=xxx,p1202=xxx,p1203=xxx)
exit  func100(p1001=xxx,p1002=xxx) 
```

这是可行的吗？或者对源代码进行最少修改的解决方案是什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-29T17:09:21.737

如果使用`gcc`，则可以使用`-finstrument-functions`编译标志。它添加了调用两个函数的代码，`__cyg_profile_func_enter`并且`__cyg_profile_func_exit`，每当一个函数进入/退出时。

你需要实现这些功能，做你想做的事。确保在没有标志的情况下编译它们，或者使用`__attribute__((no_instrument_function))`，这样它们就不会尝试调用自己。

函数的第二个参数是指向调用站点的指针（即调用函数中的返回地址）。您可以使用 打印它`%p`，但使用起来会有些困难。你可以用它`nm`来找出包含这个地址的真正函数。

您无法通过这种方式获取函数参数。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-29T17:11:05.357

通过 GNU C 库，您可以使用该[`backtrace`](http://www.gnu.org/software/libc/manual/html_node/Backtraces.html)模块。这是一个例子：

```
#include <stdio.h>
#include <execinfo.h>
#include <stdlib.h>

void handler(char *caller) {
  void *array[10];
  size_t size;
  printf("Stack Trace Start for %s\n",caller);
  size = backtrace(array, 10);
  backtrace_symbols_fd(array, size, 2);
  printf("Stack Trace End\n");
}

void car() {
    handler("car()");
    printf("Continue Execution");
}
void baz() {car(); }

void bar() { baz(); }
void foo() { bar(); }

int main(int argc, char **argv) {
  foo(); 
} 
```

使用`-g -rdynamic`编译器选项编译以加载符号

```
gcc -g -rdynamic Test1.c -o Test 
```

您将看到类似的输出

```
Stack Trace Start for car()
./Test(handler+0x2d)[0x80486f1]
./Test(car+0x12)[0x804872e]
./Test(baz+0xb)[0x8048747]
./Test(bar+0xb)[0x8048754]
./Test(foo+0xb)[0x8048761]
./Test(main+0xb)[0x804876e]
/lib/i386-linux-gnu/libc.so.6(__libc_start_main+0xe7)[0x126e37]
./Test[0x8048631]
Stack Trace End
Continue Execution in car 
```

您可以编写此处理函数并在任意时间从程序中的任何位置调用。请记住根据需要增加`array`大小。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-29T17:01:56.960

如果您使用的是 linux，[那么 callgrind](http://valgrind.org/docs/manual/cl-manual.html)可能会有所帮助。它基本上收集您正在寻找的内容的统计信息，因此，它可能提供一种访问其原始数据的方法。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-04-09T13:44:55.977

我也遇到过函数调用跟踪良好的问题。因此，我编写了一个 Python GDB 脚本 ( [https://gist.github.com/stettberger/e6f2fe61206471e22e9e6f1926668093](https://gist.github.com/stettberger/e6f2fe61206471e22e9e6f1926668093) )，它在每个有趣的函数（由环境变量 TRACE_FUNCTION 定义）上设置一个断点。然后 GDB 调用 python 函数，该函数对帧及其所有参数进行解码。如果它遇到一个指针，它会尝试取消引用它，并使用参数将函数调用跟踪打印到 TRACE_FILE（默认值：/tmp/log）。对于以下程序

```
#include <stdio.h>

struct foo {
    int a;
    struct foo * next;
};

int fib(int a, struct foo *b) {
    if (a <= 1) return 1;
    printf("%d\n", a);
    return fib(a-1, 0)+fib(a-2, 0);
}

int main() {
    struct foo b = {23, 0};
    return fib(5, &b);
} 
```

我得到了详细的跟踪，其中每一行都是一个 python 元组，可以使用以下命令读取`eval()`：

```
('call', None, 1, 'main', 'main', {})
('call', 1, 2, 'fib', 'fib', {'a': {'type': 'int', 'value': 5}, 'b': {'type': 'struct foo *', 'value': 140737488344320, 'deref': {'type': 'struct foo', 'value': {'a': {'type': 'int', 'value': 23}, 'next': {'type': 'struct foo *', 'value': 0, 'deref': None}}}}})
('call', 2, 3, 'fib', 'fib', {'a': {'type': 'int', 'value': 4}, 'b': {'type': 'struct foo *', 'value': 0, 'deref': None}})
....
('return', 'fib', 2, {'type': 'int', 'value': 8})
('exit', 8) 
```

要点包含有关日志文件格式的更多信息。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-08-24T13:11:52.520

有时我必须跟踪很多函数调用，即使对于外部库我没有任何控制权，或者我不想修改。

前段时间，我意识到你可以结合 gdb 的正则表达式断点（常规的也可以），然后在每次触发这些断点时执行一组命令来运行。见：[http ://www.ofb.net/gnu/gdb/gdb_35.html](http://www.ofb.net/gnu/gdb/gdb_35.html)

例如，如果你想跟踪所有以“MPI_”前缀开头的函数，你可以这样做：

```
(gdb) rbreak MPI_
[...]
(gdb) command 1-XX
(gdb) silent
(gdb) bt 1
(gdb) echo \n\n
(gdb) continue
(gdb) end 
```

Silent 命令用于在找到断点时隐藏 gdb 消息。我通常打印几行空行，以便于阅读。

然后，您只需运行程序： (gdb) run

一旦您的程序开始运行，gdb 将打印 N 个最顶层的回溯级别。

```
#0  0x000000000040dc60 in MPI_Initialized@plt ()

#0  PMPI_Initialized (flag=0x7fffffffba78) at ../../src/mpi/init/initialized.c:46

#0  0x000000000040d9b0 in MPI_Init_thread@plt ()

#0  PMPI_Init_thread (argc=0x7fffffffbe78, argv=0x7fffffffbde0, required=3, provided=0x7fffffffba74) at ../../src/mpi/init/initthread.c:946

#0  0x000000000040e390 in MPI_Comm_rank@plt ()

#0  PMPI_Comm_rank (comm=1140850688, rank=0x7fffffffba7c) at ../../src/mpi/comm/comm_rank.c:53

#0  0x000000000040e050 in MPI_Type_create_struct@plt ()

#0  PMPI_Type_create_struct (count=3, array_of_blocklengths=0x7fffffffba90, array_of_displacements=0x7fffffffbab0, array_of_types=0x7fffffffba80, newtype=0x69de20) at ../../src/mpi/datatype/type_create_struct.c:116

#0  0x000000000040e2a0 in MPI_Type_commit@plt ()

#0  PMPI_Type_commit (datatype=0x69de20) at ../../src/mpi/datatype/type_commit.c:75 
```

如果您想要更详细的信息，也可以打印给定断点的局部变量，只需在`command`和之间插入更多命令`end`。

额外提示：将所有这些添加到您的`.gdbinit`文件中并将执行通过管道传输到文件中。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-04-29T17:17:57.843

使用调试器设置带有关联操作的断点。例如，在 gdb 中，您可以在要跟踪的每个函数的开头和结尾处设置断点。您可以为这些断点中的每一个提供一个要执行的命令，例如：

```
printf("Enter func100(p1001=%d, p1002=%d)", p1001, p1002) 
```

然后，当您运行程序（在调试器中）时，它将打印每个命令的文本以及相关参数。

[查看gdb](http://www.ofb.net/gnu/gdb/gdb_35.html)的相关文档。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-29T17:02:36.600

您可以查看 log4cxx，一个由 apache 基金会托管的项目。我知道 log4j，java 变体允许您设置敏感度，并且您可以跟踪程序中所做的每一件事。也许 c++ 变体是相同的，但有几个替代方案 - 有一个面向方面的 c++ 编译器，您可以在所有函数中定义一个方面，并让它捕获并打印变量。另一种选择是使用调试器。

总结一下：调试器、log4cxx 或 AOP

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-04-09T13:55:33.283

如果您使用动态模块，您可以使用命令 ltrace 获取此信息。您甚至可以使用 -l 标志指定监视库

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-02-04T20:44:28.377

这是一个完美的答案，我一直在寻找一个类似的工具，我发现了一个由 John Panzer 在 1998 年制作的名为 CallMonitor 的工具。这是该工具的输出。是的，它是为 Visual C++ 6.0 制作的，但它可以在 Visual Studio 2019 中运行，根本不需要编辑。

（除了缺少我可以不用的参数。）

适用于**Windows** !!!

我将代码放在我的个人 github 上用于历史备份。（它还包含我自己构建的已编译调试，因此您可以立即对其进行测试，只需在命令提示符下运行 Test.exe 即可查看结果）。

[https://github.com/fatrolls/CallMonitor](https://github.com/fatrolls/CallMonitor)

**这是 test.cpp 代码**

```
// Test driver for CallMon

#include <windows.h>
#include <iostream>

using namespace std;

void child2(bool doThrow)
{
    Sleep(5);
    if (doThrow) throw "random exception";
}

void child1(bool doThrow)
{
    child2(false);
    child2(doThrow);
}

// Waits a bit, then calls a child function
// that might throw an exception
DWORD WINAPI threadFunc(LPVOID param)
{
    Sleep(1);
    try {
        child1(param ? true : false);
    } catch (char *) {
        child1(false);
    }
    return 0;
}

// Starts argv[1] threads running, of which argv[2] throw
// exceptions.
void main(int argc,char *argv[])
{
    if (argc!=3)
    {
        cout << "Usage: " << argv[0] << " <number of threads, or 0> <number of exceptions>" << endl;
        cout << "  Pass 0 for number of threads for simple nonthreaded test" << endl;
        cout << "  Pass the number of threads which should throw exceptions as the second arg" << endl;
        cout << "  Note: The test output for the multithreaded case gives " << endl;
        cout << "        nearly unreadable output." << endl;
        return;
    }
    const int MAX_THREADS=MAXIMUM_WAIT_OBJECTS;
    DWORD id;
    HANDLE th[MAX_THREADS];
    int numThreads = atol(argv[1]);
    int numExc = atol(argv[2]);
    if (numThreads == 0)
    {
        threadFunc((void*)(numExc));
    }
    else
    {
        int i;
        for(i=0;i<numThreads;i++)
        {
            void * param= (void*)(i < numExc ? 1 : 0);
            th[i] = CreateThread(NULL,0,threadFunc,param,0,&id);
        }
        WaitForMultipleObjects(numThreads,th,TRUE,50000);
        for(i=0;i<numThreads;i++)
        {
            CloseHandle(th[i]);
        }
    }
} 
```

**这是 Test.exe 0 20 的输出**

```
C:\Users\User\Desktop\callmonitor\Debug>Test 0 20
Test!main (002B2160)
        Test!threadFunc (002B20A0)
                Test!child1 (002B1F70)
                        Test!child2 (002B1FB0)
                        exit 002B1FB0, elapsed time=4 ms (13738100 ticks)
                        Test!child2 (002B1FB0)
                                Test!child1 (002B1F70)
                                        Test!child2 (002B1FB0)
                                        exit 002B1FB0, elapsed time=4 ms (123855
75 ticks)
                                        Test!child2 (002B1FB0)
                                        exit 002B1FB0, elapsed time=5 ms (150199
75 ticks)
                                exit 002B1F70, elapsed time=27 ms (82797408 tick
s)
                        exception exit 002B1FB0, elapsed time=40 ms (122291193 t
icks)
                exception exit 002B1F70, elapsed time=56 ms (170411060 ticks)
        exit 002B20A0, elapsed time=61 ms (184553835 ticks)
exit 002B2160, elapsed time=74 ms (222897953 ticks)

C:\Users\User\Desktop\callmonitor\Debug> 
```

**这是Test.exe的输出**

```
Test!main (01132160)
        Test!std::operator<<<std::char_traits<char> > (01131740)
                Test!<unknown symbol> (01132070)
                exit 01132070, elapsed time=0 ms (1960 ticks)
                Test!<unknown symbol> (01131CB0)
                        Test!<unknown symbol> (01131C40)
                        exit 01131C40, elapsed time=0 ms (3123 ticks)
                exit 01131CB0, elapsed time=2 ms (7502464 ticks)
                Test!<unknown symbol> (01131F00)
                exit 01131F00, elapsed time=0 ms (378 ticks)
Usage:          Test!<unknown symbol> (01131E60)
                        Test!<unknown symbol> (01131DC0)
                        exit 01131DC0, elapsed time=0 ms (1740 ticks)
                exit 01131E60, elapsed time=2 ms (6846975 ticks)
        exit 01131740, elapsed time=15 ms (47014729 ticks)
        Test!std::operator<<<std::char_traits<char> > (01131740)
                Test!<unknown symbol> (01132070)
                exit 01132070, elapsed time=0 ms (1485 ticks)
                Test!<unknown symbol> (01131CB0)
                        Test!<unknown symbol> (01131C40)
                        exit 01131C40, elapsed time=0 ms (2268 ticks)
                exit 01131CB0, elapsed time=2 ms (8479308 ticks)
                Test!<unknown symbol> (01131F00)
                exit 01131F00, elapsed time=0 ms (285 ticks)
Test            Test!<unknown symbol> (01131E60)
                        Test!<unknown symbol> (01131DC0)
                        exit 01131DC0, elapsed time=0 ms (2415 ticks)
                exit 01131E60, elapsed time=3 ms (10897188 ticks)
        exit 01131740, elapsed time=17 ms (52439945 ticks)
        Test!std::operator<<<std::char_traits<char> > (01131740)
                Test!<unknown symbol> (01132070)
                exit 01132070, elapsed time=0 ms (1443 ticks)
                Test!<unknown symbol> (01131CB0)
                        Test!<unknown symbol> (01131C40)
                        exit 01131C40, elapsed time=0 ms (2550 ticks)
                exit 01131CB0, elapsed time=2 ms (8731260 ticks)
                Test!<unknown symbol> (01131F00)
                exit 01131F00, elapsed time=0 ms (354 ticks)
 <number of threads, or 0> <number of exceptions>               Test!<unknown sy
mbol> (01131E60)
                        Test!<unknown symbol> (01131DC0)
                        exit 01131DC0, elapsed time=0 ms (2397 ticks)
                exit 01131E60, elapsed time=3 ms (10455030 ticks)
        exit 01131740, elapsed time=18 ms (54133983 ticks)
        Test!std::endl<char,std::char_traits<char> > (01131BE0)

        exit 01131BE0, elapsed time=0 ms (1256316 ticks)
        Test!std::operator<<<std::char_traits<char> > (01131740)
                Test!<unknown symbol> (01132070)
                exit 01132070, elapsed time=0 ms (1554 ticks)
                Test!<unknown symbol> (01131CB0)
                        Test!<unknown symbol> (01131C40)
                        exit 01131C40, elapsed time=0 ms (1983 ticks)
                exit 01131CB0, elapsed time=2 ms (8839671 ticks)
                Test!<unknown symbol> (01131F00)
                exit 01131F00, elapsed time=0 ms (2736 ticks)
  Pass 0 for number of threads for simple nonthreaded test              Test!<un
known symbol> (01131E60)
                        Test!<unknown symbol> (01131DC0)
                        exit 01131DC0, elapsed time=0 ms (1605 ticks)
                exit 01131E60, elapsed time=2 ms (8375898 ticks)
        exit 01131740, elapsed time=20 ms (61957080 ticks)
        Test!std::endl<char,std::char_traits<char> > (01131BE0)

        exit 01131BE0, elapsed time=0 ms (1303008 ticks)
        Test!std::operator<<<std::char_traits<char> > (01131740)
                Test!<unknown symbol> (01132070)
                exit 01132070, elapsed time=0 ms (1245 ticks)
                Test!<unknown symbol> (01131CB0)
                        Test!<unknown symbol> (01131C40)
                        exit 01131C40, elapsed time=0 ms (1548 ticks)
                exit 01131CB0, elapsed time=2 ms (8249352 ticks)
                Test!<unknown symbol> (01131F00)
                exit 01131F00, elapsed time=0 ms (408 ticks)
  Pass the number of threads which should throw exceptions as the second arg
        Test!<unknown symbol> (01131E60)
                        Test!<unknown symbol> (01131DC0)
                        exit 01131DC0, elapsed time=0 ms (1503 ticks)
                exit 01131E60, elapsed time=2 ms (8074389 ticks)
        exit 01131740, elapsed time=17 ms (52143870 ticks)
        Test!std::endl<char,std::char_traits<char> > (01131BE0)

        exit 01131BE0, elapsed time=0 ms (1312485 ticks)
        Test!std::operator<<<std::char_traits<char> > (01131740)
                Test!<unknown symbol> (01132070)
                exit 01132070, elapsed time=0 ms (1392 ticks)
                Test!<unknown symbol> (01131CB0)
                        Test!<unknown symbol> (01131C40)
                        exit 01131C40, elapsed time=0 ms (2043 ticks)
                exit 01131CB0, elapsed time=2 ms (8364006 ticks)
                Test!<unknown symbol> (01131F00)
                exit 01131F00, elapsed time=0 ms (357 ticks)
  Note: The test output for the multithreaded case gives                Test!<un
known symbol> (01131E60)
                        Test!<unknown symbol> (01131DC0)
                        exit 01131DC0, elapsed time=0 ms (1557 ticks)
                exit 01131E60, elapsed time=2 ms (8433210 ticks)
        exit 01131740, elapsed time=17 ms (51733404 ticks)
        Test!std::endl<char,std::char_traits<char> > (01131BE0)

        exit 01131BE0, elapsed time=0 ms (1323972 ticks)
        Test!std::operator<<<std::char_traits<char> > (01131740)
                Test!<unknown symbol> (01132070)
                exit 01132070, elapsed time=0 ms (1257 ticks)
                Test!<unknown symbol> (01131CB0)
                        Test!<unknown symbol> (01131C40)
                        exit 01131C40, elapsed time=0 ms (1668 ticks)
                exit 01131CB0, elapsed time=2 ms (7994649 ticks)
                Test!<unknown symbol> (01131F00)
                exit 01131F00, elapsed time=0 ms (393 ticks)
        nearly unreadable output.               Test!<unknown symbol> (01131E60)

                        Test!<unknown symbol> (01131DC0)
                        exit 01131DC0, elapsed time=0 ms (1572 ticks)
                exit 01131E60, elapsed time=2 ms (8090115 ticks)
        exit 01131740, elapsed time=17 ms (52094652 ticks)
        Test!std::endl<char,std::char_traits<char> > (01131BE0)

        exit 01131BE0, elapsed time=0 ms (1355601 ticks)
exit 01132160, elapsed time=162 ms (486552183 ticks) 
```

# java - 如何识别具有从 byte[] 转换的负值的 int？

> ID：10374013
> 
> 赞同：2
> 
> 时间：2012-04-29T16:58:38.100
> 
> 标签：java

我有一个奇怪的问题。基本上我正在使用一个队列服务器，它只将输入作为 byte[] 所以我使用两个 int 和 int[] 并使用`ByteArrayOutputStream`. 到目前为止它运行良好，但是当我从队列中来回传输大量消息时，我试图压缩我的 int[]（它有几千个项目，但大多数是零）。我的想法是采用零序列并将它们变成负值（参见这个[问题](https://stackoverflow.com/questions/10369660/suggestions-for-compression-library-to-get-byte-as-small-as-possible-without-c)的答案。

但是我遇到了问题，因为要将我的 bytes[] 转换回原来的格式，我使用 byte[] 的长度并将其除以 4（因为每个 int 的大小为 4，然后循环遍历它）。由于我在列表中引入了负值，因此大小发生了变化（每个负数变化 1），这使我无法解包数据。我尝试了不同的方法将数据输入 Byte[] 并且 ByteArrayOutputStream 似乎是我迄今为止尝试过的最快的方法，除非有更快的方法，否则我更喜欢坚持使用这种方法。同样在我的链接问题中，接受的答案似乎完全适合现有的 for 循环结构，我已经使用它来隐藏数据（用零序列的负数替换所有零的解决方案）。

有什么想法可以区分正/负字节流吗？

这是代码：

```
import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;

public class compressionTest {

    public static void main(String[] args) throws IOException {
        //to convert to string
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        DataOutputStream dos = new DataOutputStream(baos);
        //data
        int data1 = 10;
        int data2 = 43;
        int[] sub = { 10, 40, 0, 0, 0, 30, 0, 100, 0, 0, 0, 0 }; //should become [10, 40, -3, 30, -1, 100, -4]
        //add data to bytes
        dos.writeInt(data1);
        dos.writeInt(data2);
        int count_zero = 0;
        for (int j : sub) {
            if (j == 0 ) {
                //System.out.println("Equals 0!");
                count_zero = count_zero + 1;
            } else {
                if ( count_zero != 0) {
                    dos.write(-1 * count_zero);
                    //System.out.println(-1 * count_zero);
                    count_zero = 0;

                }
                dos.writeInt(j); //orginally I just had this under the for loop and it works(if you delete the if data above)
            }
        }
        byte[] bytes = baos.toByteArray();

        System.out.println(bytes); //this is the data I send

        //now bring it back
        ByteArrayInputStream bais = new ByteArrayInputStream(bytes);
        DataInputStream dis = new DataInputStream(bais);
        System.out.println("****");
        int data1_return = 0;
        int data2_return = 0;
        System.out.println("size of byte[] is " + bytes.length);
        //ArrayList<Integer> sub_return = new ArrayList<Integer>();
        int[] sub_return = new int[(bytes.length/4)-2]; //size of data minus first two intgers
        for (int item = 0; item<(bytes.length/4);item++){
            if (item == 0) {
                data1_return = dis.readInt();
            } else if (item == 1) {
                data2_return = dis.readInt();
            } else {
                sub_return[item-2] =  dis.readInt();
            }
        }

        //print out the data
        System.out.println(data1_return);
        System.out.println(data2_return);
        for (int i : sub_return) {
            System.out.println(i);
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T17:06:24.433

最简单的方法可能是在开始时对完整列表的大小进行编码，因此您不必拥有类似 {0, 1, 2, 3, -5} 的列表，而是 {0, 0, 0, 6, 0 , 1, 2, 3, -5} - 然后你只需将前 4 个字节作为 int 读取，发现它们等于 6，分配一个 int[6]，然后将流的其余部分解压缩到其中。

# javascript - jquery - 在 dom 元素中找不到匹配项时显示消息

> ID：10374021
> 
> 赞同：0
> 
> 时间：2012-04-29T16:59:11.173
> 
> 标签：javascript, jquery

我有以下工作代码：

[http://jsfiddle.net/tu8tc/2/](http://jsfiddle.net/tu8tc/2/)

我需要添加一些逻辑，以便在没有匹配项时显示“未找到产品”消息。例如，单击 jsfiddle 代码中的“其他品牌”选项，该选项不应该返回任何匹配项。

非常感谢任何想法/建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T17:02:21.973

[http://jsfiddle.net/tu8tc/3/](http://jsfiddle.net/tu8tc/3/)

将您的选择器分配给一个 jquery 变量，然后检查`.length`它。如果为 0，则做一些特别的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T17:13:48.343

检查以下 jsfiddle 它对我来说很好

[http://jsfiddle.net/tu8tc/5/](http://jsfiddle.net/tu8tc/5/)

# javascript - HTML5：矩形定位不准确

> ID：10374022
> 
> 赞同：0
> 
> 时间：2012-04-29T16:59:15.747
> 
> 标签：javascript, html, canvas

我正在使用 HTML5 的画布创建一个“预览”图像，该图像主要由一些矩形和简单的线条组成。到目前为止工作正常，但有一个问题我无法以某种方式解决。假设以下情况：

```
context.fillStyle = "rgba(0,0,0,0.75)";
context.fillRect(100.64646,100,50.94967,20);
context.fillRect(100.64646+50.94967,100,100,20); 
```

所以我正在绘制 2 个不透明的矩形。第一个矩形的 x-starting 坐标加上 x-length 等于第二个 rect 的 x-starting 坐标，所以理论上它们之间应该没有任何边距发生碰撞。可悲的是，结果不同：（见[http://files.clemensfreitag.de/thin_spacing.jpg](http://files.clemensfreitag.de/thin_spacing.jpg)）

盒子之间的间距非常小，背景颜色可见。但是： **如果坐标和长度是整数值，则不会出现此问题。**

有没有办法通过使用浮点值来完成它？在我的应用程序中，在绘制之前将它们转换为整数可能是可以接受的，但我只是想知道为什么这不适用于浮点数。

最好的，克莱门斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T17:25:24.470

您所看到的是叠加两种不透明颜色的结果。当第一个矩形在 151.59613 处结束时，矩形会自动消除锯齿，并用 rgba(0,0,0,0.4470975) 填充最右边的列。当第二个矩形从相同的 x 坐标开始时，它也被消除锯齿，用 rgba(0,0,0,0.3029025) 填充最左边的列（与第一个矩形的最右边相同）。这两个值确实加起来为 rgba(0,0,0,0.75)，但这不是它们的混合方式。相反，第二种颜色 (rgba(0,0,0,.3029025)) 绘制在第一种颜色之上，导致 rgba(0,0,0,0.4470975+(1-0.4470975)*0.3029025) = rgba(0 ,0,0,0.61457305)。所以这两个矩形之间实际上没有间隙，而是一个 1px 的列，它是一个稍浅的灰色阴影。

同样，如果您使用纯色，则第二个矩形的抗锯齿列将覆盖第一个矩形，从而在“间隙”中产生更浅的灰色阴影。

整数值不会出现此问题，因为不需要抗锯齿 - 每个矩形都在像素的边缘结束。

看起来没有任何`globalCompositeOperation`设置可以解决此问题，并且关闭抗锯齿有时会导致 1px 间隙，因此我认为您最简单的解决方案是强制整数值（或者，您可以清除该列，然后用所需的颜色填充它） .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T19:52:15.390

此问题与在基于浮点的网格上绘制对象的方式有关（尤其是垂直和水平线，因此是矩形）。

见那里的解释和模式：[http ://canop.org/blog/?p=220](http://canop.org/blog/?p=220)

根据对象的大小，您需要为形状使用整数或中间整数坐标和大小，目标是在两个维度上填充完整的像素。

例如 ：

*   使用中间整数表示细线（一个像素宽度）
*   对 2 像素宽的线使用整数坐标

（并扩展矩形的逻辑）

# ios - 更改 CoreData 模型：复古兼容性

> ID：10374027
> 
> 赞同：2
> 
> 时间：2012-04-29T16:59:39.987
> 
> 标签：ios, core-data, model, xcdatamodel

我一直在用 coredata 解决这个问题，它让我发疯，因为它应该是直截了当的

我目前正在开发这个应用程序的第一个版本，显然我一直在这里和那里调整核心数据模型，

但是，每次更改核心数据模型时，我都需要卸载应用程序并重新安装新版本。

这只是我自己还可以接受，但一旦发布，我需要能够在不重新安装用户的情况下更改更新应用程序。

我错过了什么，

是否需要编写一些代码来告诉核心数据如何将现有的持久数据修改为新的？

感谢您的帮助

杰森

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-14T14:02:45.307

核心数据模型 - 迁移 - 向当前数据模型添加新属性/字段 - 无需重置模拟器或应用程序

脚步：

1）从编辑器创建模型版本 - 给它任何有意义的名称，如*ModelVersion2*

2) 转到该模型版本并更改您的模型。

3) 现在转到*YourProjectModel.xcdatamodeld*并将当前版本设置为新创建的版本。

4）将以下代码添加到您创建持久协调器的位置 -

```
NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:

[NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption, 

[NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil]; 
```

并将选项值设置为方法的选项 -

```
[__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error] 
```

就我而言，它看起来像这样：

```
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{

 if (__persistentStoreCoordinator != nil) {
    return__persistentStoreCoordinator;
 }

 NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:

 [NSNumber numberWithBool:YES],      NSMigratePersistentStoresAutomaticallyOption,

 [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];

 NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"LGDataModel.sqlite"];

  NSError *error = nil;
  __persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
  if (!   [__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:options  error:&error])
 {
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    abort();
  }

  return__persistentStoreCoordinator;
 } 
```

链接：http: [//developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreDataVersioning/Articles/vmInitiating.html#//apple_ref/doc/uid/TP40004399-CH7-SW1](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreDataVersioning/Articles/vmInitiating.html#//apple_ref/doc/uid/TP40004399-CH7-SW1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T17:25:34.080

您需要阅读[Core Data 版本控制和迁移](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreDataVersioning/Articles/Introduction.html#//apple_ref/doc/uid/TP40004399-CH1-SW1)。这是一篇很好地解释它的博客文章：

[http://www.timisted.net/blog/archive/core-data-migration/](http://www.timisted.net/blog/archive/core-data-migration/)

# rendering - 为什么 Padrino 将我的视图呈现为转义文本？

> ID：10374029
> 
> 赞同：1
> 
> 时间：2012-04-29T16:59:51.467
> 
> 标签：rendering, padrino, slim

我正在`slim`用作我的渲染引擎。这是我的应用程序.slim

```
doctype html
html
    head
        title Hello

    body
        = yield 
```

这是我的观点（“views/welcome/index.slim”）

```
h1 Hello 
```

application.slim 正在正确呈现，但我在页面上看到“< h1>Hello</h1>”。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T20:01:25.823

我找到了答案。`==`如果您不希望它转义，则必须在渲染部分时使用。不敢相信我在文档中没有看到这一点。

# php - 提取 div 标签之间的文本 - 简单的 Html Dom Parser

> ID：10374030
> 
> 赞同：-2
> 
> 时间：2012-04-29T16:59:52.100
> 
> 标签：php, parsing, dom

代码 ：

```
$html = file_get_html('http://url.com');
$ret = $html->find('div[samplediv]');
echo $ret; 
```

我得到的输出只是数组。这意味着它是空的。我确信 div 是在我正在抓取的页面上预设的。

另外，我想要实现的另一件事是，从 html 中获取文本。当我简单地将其转换为纯文本时，会产生很多不需要的数字和东西。所以我想做的是，获取我在浏览器中看到的文本。（而不是从 html 中获取整个文本）。

欢迎所有建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-29T17:04:41.297

看起来您正在输出整个文档。尝试

```
echo $ret->innertext; 
```

只输出div的内容。

PS：我只是在谷歌上查了一下，发现[http://simplehtmldom.sourceforge.net/manual.htm](http://simplehtmldom.sourceforge.net/manual.htm)

# actionscript-3 - getDefinitionByName 找不到存在的变量

> ID：10374031
> 
> 赞同：3
> 
> 时间：2012-04-29T16:59:57.023
> 
> 标签：actionscript-3

我正在使用*flash.utils.getDefinitionByName*试图获取艺术资产。我经常使用这个功能，直到现在都没有遇到过麻烦。核实：

```
assetName = Assets.MegaBerry; // works
assetName = getDefinitionByName("Assets.MegaBerry") as Class; // doesn't work 
```

有没有搞错？？第二行的错误响应是“*未找到变量。* ”

如果重要的话：Assets 是我的根源目录中的一个文件（它没有包；Assets 是完全限定的名称），我尝试放置：

```
import Assets; 
```

在顶部没有运气。

作为参考，在 Assets.as 我有：

```
 [Embed(source = "../art/Inventory/MegaBerry.png")]
    public static var MegaBerry:Class; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T17:39:00.743

您的问题是将资源嵌入到`Assets`类中将创建一个`Class`属于该类的类型的静态变量 - 这是您在使用时引用`Assets.MegaBerry`的：类类型的变量（！）。

~~但是，它不会将 MegaBerry 类注册到完全限定的类*名*。为此，您必须`registerClassAlias`在应用程序中的某个时刻使用 - 谁会猜到它：~~

 ~~```
registerClassAlias("Assets.MegaBerry", Assets.MegaBerry); 
```~~ 

~~之后，它会在调用时在其他任何地方可用`getDefinitionByName`。~~

****编辑****

嗯，这是一些意想不到的行为......事实证明，嵌入的类*实际上是自动注册*的，但是在`{className}_{variableName}`, 而不是您期望的符号下。所以使用：

```
getDefinitionByName("Assets_MegaBerry") as Class; 
```

应该是诀窍。

`registerClassAlias`也可以，但是你需要调用`getClassByAlias`而不是`getDefinitionByName`. 很抱歉混淆了。

****结束编辑****

您还可以使用 Embed 标记将资源注入到单独的类文件中，然后您可以使用`getDefinitionByName`或简单地使用导入按预期引用该文件：

```
package assets {

    [Embed(source="../art/Inventory/MegaBerry.png"]
    public class MegaBerry extends BitmapData {
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T18:40:28.583

而不是打电话

```
assetName = getDefinitionByName("Assets.MegaBerry") as Class; 
```

, 而只是使用：

```
assetName = Assets["MegaBerry"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T17:17:51.053

尝试：

```
 [Embed(source = "../art/Inventory/MegaBerry.png" , symbol="MegaBerry")]
 public static var MegaBerry:Class; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T19:22:11.807

在 actionscript 中，对象实际上具有与代码中显示的实际变量名称不同的名称属性。

例如，如果您按如下方式创建变量，

```
var myBerry = new MegaBerry(); 
```

然后`getDefinitionByName("myBerry")`将返回null。

只有当您通过写入设置变量的*名称*`myBerry.name = "myBerry"`时，才会`getDefinitionByName("myBerry")`返回您想要的名称。对象的*名称*不一定必须等于代码中的变量名称。

在您的具体情况下，我认为您无论如何都不需要使用任何这些。你试过`assetName = new MegaBerry()`吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T16:11:11.023

如果你想知道你的类的*完全限定名*是什么，你可以执行以下操作：

```
trace(getQualifiedClassName(Assets.MegaBerry)); 
```

例如，您可以在 Assets.as 中执行此操作。

您可以将该字符串反馈给`getDefinitionByName()`该类并获取对该类的引用。

```
trace(getDefinitionByName(getQualifiedClassName(SomeClass)));
// output [class SomeClass] 
```

请记住，`getDefinitionByName()`仅获取与 getDefinitionByName 调用本身在同一范围内的类的引用。因此，如果您正在加载外部 SWF，获取类引用将取决于您使用的应用程序域以及此代码执行的位置。

# android - 不可用的共享库 com.google.android.maps

> ID：10374034
> 
> 赞同：0
> 
> 时间：2012-04-29T17:00:27.610
> 
> 标签：android, android-activity, map

E/PackageManager(78): 包 com.bountouris 需要不可用的共享库 com.google.android.maps；失败！

这是我的日志文件。我的应用程序在它工作之前。我没有改变任何关于地图的东西。

编辑：

显现：

```
<uses-sdk android:minSdkVersion="15" /> 
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/> 
<uses-permission android:name="android.permission.INTERNET" /> 
<application android:icon="@drawable/ic_launcher" android:label="@string/app_name" > 
<uses-library android:required="true" android:name="com.google.android.maps"/> 
<activity android:name=".Syros1Activity" android:label="@string/app_name">
<intent-filter> 
    <action android:name="android.intent.action.MAIN" /> 
    <category android:name="android.intent.category.LAUNCHER" /> 
</intent-filter> 
</activity> 
<activity android:name=".MyMapActivity" android:label="@string/app_name" 
android:theme="@android:style/Theme.NoTitleBar" >
</activity> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T07:25:12.443

碰巧您的代码使用了 GoogleAPI。右键单击您的项目 -> 运行方式 -> 运行配置...，在目标选项卡中 -> 选择具有 GoogleAPIs 的适当 Android 虚拟设备。（如 GoogleAPIs - 平台 2.3.3）。

应用 -> 运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-10T05:41:48.917

使用不带任何选项的 android 命令启动 AVD 管理器。如果您在 Eclipse/ADT 中进行开发，您还可以从 Window > Android SDK 和 AVD Manager 访问该工具。

单击“新建”按钮开始创建新的 AVD。在出现的对话框中，指定 AVD 的名称并选择您希望 AVD 使用的系统映像目标。选择“Google API (Google Inc.)”目标之一，确保选择 API 级别与应用程序清单中的 android:minSdkVersion 属性匹配的版本，如上所述。配置其他选项，然后单击“创建 AVD”。创建完 AVD 后，您可以从 AVD Manager UI 运行它，也可以使用模拟器的命令行界面。如果您在 Eclipse 中进行开发，您可以配置一个运行配置来启动 AVD 并在其上安装您的应用程序。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-10-11T14:38:42.860

尝试从清单文件中删除它：

```
 <uses-library android:name="com.google.android.maps" android:required="true"/> 
```

# jquery - 我可以看到 JSON 对象，但无法访问值

> ID：10374036
> 
> 赞同：1
> 
> 时间：2012-04-29T17:00:48.777
> 
> 标签：jquery, json

我正在使用以下代码获取 JSON 对象：

```
// Check that the token has been updated, then submit the form as required
$.when( $.getJSON(url + 'scripts/json.php'), button).then(function(json, button) {

} 
```

如果我在控制台窗口中输出值如下：

```
console.log(json); 
```

我得到以下信息：

```
[Object { token="cdad8422e88787958729e21cce102cb0"}, "success", Object { readyState=4, responseText="{"token":"cdad8422e88787958729e21cce102cb0"}", status=200, more...}] 
```

但是尝试使用以下方法获取“令牌”的值：

```
console.log(json.token); 
```

我得到“未定义”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T17:02:41.873

它是一个包含对象的数组。您可以通过 访问它`json[0].token`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T23:48:29.140

如果您使用 jQuery 的`$.ajax()`，不要忘记指定`jsonType:'json'`( `T`in`Type`是大写，而不是`jsontype:'json'`.

示例：此脚本将获得未定义的 JSON 结果。

```
$.ajax({
  url:'server',
  datatype:'json',
  data:'your param',
  success:function(JSONResponse,status,xhr){

    //.....your code
  }   
}) 
```

如果在 中使用小写`t`，`type`则不会定义 JSON 结果。所以使用大写`dataType`字母.`T``dataType:'json'`

# php - 根据会话变量选择下拉值

> ID：10374037
> 
> 赞同：0
> 
> 时间：2012-04-29T17:00:59.860
> 
> 标签：php, forms, session, drop-down-menu

我有一个 php 表单，它将数据提交给另一个 php 进行验证。如果任何字段留空，验证器 php 将使用会话变量将消息连同所有预填充的变量一起发送回原始 php 表单，这样用户就不必再次填写它们。

我可以像这样使用这些会话变量再次填写文本框

```
value="<?php echo $_SESSION['fname'] ?>" 
```

但是如何填充下拉菜单、单选按钮和复选框？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T17:05:48.103

对于选择、复选框或单选框，您需要检查值是否匹配。就像是：

```
<select name="fname">
 <option value="1" <?php if($_SESSION['fname'] == 1) echo 'selected'; ?>>1</option>
 <option value="2" <?php if($_SESSION['fname'] == 2) echo 'selected'; ?>>2</option>
</select> 
```

如果您遍历选项字段的值会更容易：

```
<select name="fname">
 <?php foreach($array AS $key => $value) { ?>
  <option value="<?php echo $value; ?>" <?php if($_SESSION['fname'] == $value) echo 'selected'; ?>><?php echo $value; ?></option>
 <?php } ?>
</select> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T17:03:44.773

一个`<select>`元素的选择`<option>`不是由它的`value=`属性决定的。为了标记一个选项被选中，`<option>`元素必须`selected`设置属性，如下所示：

```
<select>
    <option>1</option>
    <option selected>2</option>
    <option>3</option>
</select> 
```

为了以编程方式执行此操作，您需要遍历选项，并手动测试正确的选项，然后添加`selected`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-14T11:33:06.087

使用 JQuery 有一个更简单的方法。您可以使用 .val() 设置选择，以便充分利用它。

```
<script type="text/javascript">
$("#fname").val("<?php echo $_SESSION['fname']; ?>");
</script> 
```

不要忘记将 select 的 id 以及 name 设置为**fname**。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-26T16:24:51.963

...注意到您在语句末尾的双引号放错了位置，它应该是：

```
<script>
    $("#fname").val("<?php echo $_SESSION['fname'] ?>");
</script> 
```

# antlr - 不匹配的双令牌

> ID：10374040
> 
> 赞同：2
> 
> 时间：2012-04-29T17:01:51.497
> 
> 标签：antlr

在 ANTLR 中，我有`MismatchedTokenException`以下定义：

```
type : IDENTIFIER ('<' (type (',' type)*) '>')?; 
```

以及以下测试：

```
A<B,C<D>> 
```

解析第一个时发生异常`>`。ANTLR 尝试同时解析两个“>>”，但失败了。

使用静默空白通道，以下测试*确实*有效：

```
A<B,C<D> > 
```

其中明确指示 ANTLR 分别处理每个令牌。

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T17:08:51.313

我无法重现。解析器生成：

```
grammar T;

type       : IDENTIFIER ('<' (type (',' type)*) '>')?;
IDENTIFIER : 'A'..'Z'; 
```

将输入`A<B,C<D>>`（不带空格）解析为以下解析树：

![在此处输入图像描述](../Images/36b08d1c7d749f1f17c2917213d868ff.png)

您需要提供导致此输入生成`MismatchedTokenException`.

也许您正在使用 ANTLRWorks 的解释器（或 Eclipse 的 ANTLR-IDE，它使用相同的解释器）？在那种情况下，***这***可能就是问题所在：臭名昭著的越野车。不要使用它，而是使用 ANTLRWorks 的调试器：它很棒（上面发布的图像来自调试器）。

> **拉兹洛博宁**写道：
> 
> 知道了。我定义了一个 << 令牌。很快，有没有办法让令牌识别优先于另一个？

不，词法分析器只是尝试尽可能多地匹配。因此，如果它可以创建一个标记匹配`<<`(or `>>`)，它将支持两个单个`<`(or `>`) 标记。只有当两个（或更多）词法分析器规则匹配相同数量的字符时，才会进行优先级排序：首先定义的规则将“胜过”稍后在语法中定义的规则。

# ruby-on-rails - 创建新应用时出现 rvm 错误

> ID：10374057
> 
> 赞同：0
> 
> 时间：2012-04-29T17:03:22.137
> 
> 标签：ruby-on-rails, rvm, reinstall

我刚刚重新安装了 rvm、ruby 和 rails。安装运行良好。

但是，每当我创建一个新的 rails 应用程序时，我总是会收到一个错误：

```
$ rails new abc
  create  
  create  README.rdoc
  create  Rakefile
  ...

  create  vendor/plugins
  create  vendor/plugins/.gitkeep
     run  bundle install
/Users/kong/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/net/http.rb:799: [BUG] Segmentation fault
ruby 1.9.3p125 (2012-02-16 revision 34643) [x86_64-darwin11.3.0]

-- Control frame information -----------------------------------------------
c:0038 p:---- s:0217 b:0217 l:000216 d:000216 CFUNC  :connect
c:0037 p:0011 s:0214 b:0214 l:0006b0 d:000213 BLOCK  /Users/kong/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/net/http.rb:799 
```

我想不知何故，我搞砸了 rvm 安装。我试图重新安装 rvm 和 rails 很多次，但它只是得到同样的错误。

我可以在另一个用户帐户中安装 rvm 和 rails。它工作正常，但对我来说不太方便。

有人知道如何重新安装新的rvm吗？我尝试`rvm implode`但仍然收到该错误。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T17:41:17.503

请阅读`rvm requirements`ruby​​-1.9.3-p125 与 LLVM 不完全兼容，尝试安装 osx-gcc-installer 并重新安装 ruby​​：

```
rvm reinstall 1.9.3-p125 
```

另请注意，1.9.3 的当前补丁级别为 194：

```
rvm get head
rvm install 1.9.3 
```

# c++ - 如何像OpenGL中的glRotatef（）一样旋转顶点？

> ID：10374063
> 
> 赞同：0
> 
> 时间：2012-04-29T17:04:01.017
> 
> 标签：c++, opengl, rotation

我需要优化我的渲染代码，目前我正在使用 glPushMatrix() 与 glTranslatef() 和 glRotatef()。但这比在单个顶点数组调用中渲染所有对象的成本更高。

OpenGL 中是否有一些**快速**内置函数可以像 glRotatef() 一样旋转我的顶点数据？如果没有，您会推荐使用什么库或方法？我知道的唯一方法是使用 sin/cos 函数来旋转顶点，但我不确定这是否是最快的方法，或者它是否会产生相同的结果。

每个对象我只需要沿一个轴旋转一次（2D 渲染），因此它不需要非常复杂或支持 glPushMatrix() 系统的全部潜力。

**编辑：**我不想为此使用着色器。

**Edit2：**我只渲染沿零点旋转的单个四边形（在 2D 模式下），因此例如每个顶点的值将从 -10 变为 10。我当前的代码：（`(quad.vert[i].x*cosval)-(quad.vert[i].y*sinval)`两次，对于 y 也是）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T18:21:06.937

我假设您使用的是旧版本的 OpenGL，因为您使用的是 OpenGL`glRotate`和真正古老/奇怪的硬件，因为您不想使用着色器。

您可以将`glRotate*()`调用放在显示列表中，或者自己计算旋转矩阵。OpenGL 红皮书的[第 3 章和](http://www.glprogramming.com/red/chapter03.html)[附录 F](http://www.glprogramming.com/red/appendixf.html)提供了您自己构建矩阵所需的信息。有关显示列表的更多信息，请参阅第 7 章。

# jquery - jqueryUI自定义按钮未显示

> ID：10374064
> 
> 赞同：1
> 
> 时间：2012-04-29T17:04:04.527
> 
> 标签：jquery, html, css, jquery-ui, button

我正在尝试创建一些自定义 jqueryui 按钮，这些按钮依赖于[如何将自定义图标添加到标准 jQuery UI 主题？](https://stackoverflow.com/questions/3836241/how-do-i-add-a-custom-icon-to-a-standard-jquery-ui-theme)，尤其是 Matthew/Panayiotis 的回答，在这里创建一些自定义 jqueryUI 按钮：

[http://nie-wieder.net/metronom/test.html](http://nie-wieder.net/metronom/test.html)

如您所见，该按钮未显示，并且...简而言之，我不知道出了什么问题。

我在这里创建了一个按钮：http: [//nie-wieder.net/metronom/img/plus-normal.png](http://nie-wieder.net/metronom/img/plus-normal.png)（还有 2 个其他文件，plus-hover.png 和 plus-active.png）并考虑到 firebug 并不可怕周围，​​文件已加载，但是...如您所见，按钮不存在:(

css 文件在这里： http: [//nie-wieder.net/metronom/css/style.css](http://nie-wieder.net/metronom/css/style.css)（向下滚动，phil-plus-classes）

我没有想法，如果你能帮助我，那就太好了！

最好的问候， 多米尼克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T18:51:52.057

我认为在使用带有 jQ​​uery UI 按钮的自定义图标时要理解的关键是图标，无论是否自定义，都*添加*到`ui-button`.

因此，带有加号的蓝色正方形图标显示在银色矩形上，因为您可能使用默认的 jQuery UI 主题，这使得按钮背景为银灰色。

为了解决你想在这里做的事情，我想你会想要拥抱[Theme Roller](http://jqueryui.com/themeroller/)来帮助你。

在该页面上，将 Clickable：默认状态、Clickable：悬停状态和 Clickable：活动状态的背景颜色更改为与您的图像非常匹配的颜色（是的，我意识到它们比纯色更漂亮，但要承受和我在这里）。

颜色更改将确保添加图标的按钮使用您选择的颜色，而不是默认颜色。

从那里，您需要决定如何最好地执行自定义图标。

请记住，从我们已经看到的情况来看，如果将 30x30 图标添加到 a `ui-button`，则默认情况下，该按钮的任一侧都会有额外的填充。

如果您想更深入地挖掘，请打开您的 jquery-ui CSS 文件（默认或自定义，任一），然后搜索`Interaction states`.

此标题下有七行类，这是`ui-state-default`声明类的背景和其他颜色的地方。

同样在该 CSS 文件中，搜索`button text element`.

该标题下的第三行以 开头`.ui-button-icon-only`，与该行元素关联的样式包括`padding: .4em;` **这就是导致按钮比预期更宽的原因！**

[旁注：在查看后面的两行时，有名为`ui-button-icon-primary`and的类`ui-button-icon-secondary`，因此`ui-button-icon-only`不是为了声明该按钮仅包含一个图标，而是声明该按钮正在使用`only`按钮样式而不是声明一个按钮是`primary`，另一个是`secondary`。]

希望这足以让您创建满意的按钮，但如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T17:07:37.773

不确定您在谈论哪个按钮，但您的`<button>`元素中没有任何文本。对于背景图像，您`span`的 s 具有宽度和高度的样式，但`spans`它们是不能指定宽度或高度（或填充或边距）的内联元素。将您的显示值设置`inline-block`为 ui-icon 跨度会使您的图像显示出来。

# django - django 配置文件创建，在使用多种配置文件类型时设置用户配置文件

> ID：10374071
> 
> 赞同：1
> 
> 时间：2012-04-29T17:05:37.230
> 
> 标签：django, django-models, django-forms, django-users, django-profiles

我被困在用户注册上，我实际上打算拥有不同的个人资料类型。注册时，我无法在创建用户时设置 UserProfile。我正在使用 UserCreationForm。我的文件中的代码如下。

```
from django.contrib.auth.forms import UserCreationForm
from registration.forms import RegistrationForm
from django import forms
from django.contrib.auth.models import User
from accounts.models import UserProfile
from django.utils.translation import ugettext_lazy as _
from person.models import Person
from pprint import pprint

class UserRegistrationForm(UserCreationForm):
    #email = forms.EmailField(label = "Email")
    fullname = forms.CharField(label = "Full name")

    class Meta:
        model = User
        fields = ("email","fullname","password1","password2" )

    def __init__(self, *args, **kwargs):
        super(UserRegistrationForm, self).__init__(*args, **kwargs)
        del self.fields['username']

    def clean_email(self):
        """
        Validate that the supplied email address is unique for the
        site.

        """
        if User.objects.filter(email__iexact=self.cleaned_data['email']):
            raise forms.ValidationError(_("This email address is already in use. Please supply a different email address."))
        return self.cleaned_data['email']

    def save(self, commit=True):
        user = super(UserRegistrationForm, self).save(commit=False)
        #user_profile=user.set_profile(profile_type="Person")

        UserProfile.profile.person.full_name = self.cleaned_data["fullname"]
        user.email = self.cleaned_data["email"]
        if commit:
            user.save()
        return user

class CompanyRegistrationForm(UserCreationForm):
    email=forms.EmailField(label="Email")

class UserProfileForm(forms.ModelForm):
    class Meta:
        model=UserProfile
        exclude=('user',) 
```

帐户/模型.py

```
 from django.db import models
from django.contrib.auth.models import User

class UserProfile(models.Model):
    user=models.OneToOneField(User) 
    meta_keywords=models.CharField("Meta Keywords",max_length=255,
            help_text="Comma delimited set of keywords of meta tag")
    meta_description=models.CharField("Meta Description",max_length=255,
            help_text='Content for description meta tag')

    def __unicode__(self):
        return "User Profile for: "+self.username

    class Meta:
        ordering=['-id'] 
```

视图.py

```
 from django.contrib.auth.forms import UserCreationForm
from django.template import RequestContext
from django.shortcuts import render_to_response,get_object_or_404
from django.core import urlresolvers
from django.http import HttpResponseRedirect
from django.contrib.auth.decorators import login_required
from accounts.forms import UserRegistrationForm, UserProfileForm
#from accounts.forms import UserProfile

def register(request,template_name="account/register.html"):
    if request.method=='POST':
        postdata=request.POST.copy()
        form=UserRegistrationForm(postdata)
        user_profile=UserProfileForm(postdata)
        if form.is_valid():
            form.save()
            un=postdata.get('username','')
            pw=postdata.get('password','')
            from django.contrib.auth import login,authenticate
            new_user=authenticate(username=un,password=pw)
            if new_user and new_user.is_active:
                login(request,new_user)
                url=urlresolvers.reverse('dashboard')
                return HttpResponseRedirect(url)     
    else:
        form=UserRegistrationForm()
    page_title="User Registration"
    return render_to_response(template_name,locals(),context_instance=RequestContext(request))

@login_required
def dashboard(request):
    pass

@login_required
def settings(request):
    pass 
```

由于我正在使用多个配置文件，因此以下是其中一个配置文件的 models.py 的代码：

```
 from django.db import models
from django.contrib.auth.models import User
from accounts.models import UserProfile

class Person(UserProfile):
    skills=models.CharField(max_length=100)
    fullname=models.CharField(max_length=50)
    short_description=models.CharField(max_length=255)
    is_online=models.BooleanField(default=False)
    tags=models.CharField(max_length=50)
    profile_pic=models.ImageField(upload_to="person_profile_images/")
    profile_url=models.URLField()
    date_of_birth=models.DateField()
    is_student=models.BooleanField(default=False)
    current_designation=models.CharField(max_length=50)
    is_active_jobseeker=models.BooleanField(default=True)
    current_education=models.BooleanField(default=True)

    class Meta:
        db_table='person' 
```

我在 settings.py 中的个人资料身份验证

```
AUTH_PROFILE_MODULE='accounts.UserProfile' 
```

这是我在查看其他地方后使用的文件 profile.py： from accounts.models import UserProfile from accounts.forms import UserProfileForm from person.models import Person from company.models import Company

```
def retrieve(request,profile_type):
    try:
        profile=request.user.get_profile()
    except UserProfile.DoesNotExist:
        if profile_type=='Person':
            profile=Person.objects.create(user=request.user)
        else:
            profile=Company.objects.create(user=request.user)
        profile.save()
    return profile

def set(request,profile_type):
    profile=retrieve(request,profile_type)
    profile_form=UserProfileForm(request.POST,instance=profile)
    profile_form.save() 
```

我是新手，很困惑，也看过文档。还在 stackoverflow.com 上看到了其他解决方案，但没有找到任何解决我的问题的方法。因此，请告诉您是否发现任何对我有帮助的东西。这似乎不是一个大问题，但由于我是新手，所以这对我来说是个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T18:45:05.913

多个配置文件类型不适用于 Django 配置文件机制所需的 OneToOne 关系。我建议您保留一个包含所有配置文件类型通用数据的配置文件类，并将特定于类型的数据存储在一组单独的类中，您使用[通用关系](https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/#generic-relations)链接到您的配置文件类。

**编辑：**

感谢您的澄清。今天再次查看您的代码，您似乎确实能够完成您尝试使用模型继承所做的事情。我认为问题出在`save()`方法上`UserRegistrationForm`。尝试这样的事情：

```
def save(self, commit=True):
    user = super(UserRegistrationForm, self).save(commit=False)
    user.email = self.cleaned_data["email"]
    if commit:
        user.save()
        person = Person(user=user)
        person.full_name = self.cleaned_data["fullname"]
        person.save()
    return user 
```

# python - Python 标记化：标记位置

> ID：10374072
> 
> 赞同：2
> 
> 时间：2012-04-29T17:05:41.533
> 
> 标签：python, tokenize

Python 的标记化将所有找到的标记的位置作为 (startRow, startCol) 和 (endRow, endCol) 的两个元组返回。

有没有办法将位置作为从字符串开头的偏移量返回？也就是说，我想摆脱 (row, col) 只支持“偏移”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T17:09:23.617

没有一个内置的`tokenize`。

如果您可以访问标记器使用的同一组行，则可以运行并将累积的“行 X 之前的行总长度”存储到一个列表中，然后使用它将行值转换为附加偏移量。

例如：

```
import tokenize

def tokens_with_offset(path):
    line_offsets = []
    line_offset_accum = 0
    with open(path) as f:
        for line in f:
            line_offsets.append(line_offset_accum)
            line_offset_accum += len(line)

    with open(path) as f:
        for ttype, tstring, tbegin, tend, tline in tokenize.generate_tokens(f.readline):
            offset_begin = line_offsets[tbegin[0]] + tbegin[1]
            offset_end = line_offsets[tend[0]] + tend[1]
            yield ttype, tstring, offset_begin, offset_end, tline 
```

（注意：没有测试过这段代码，更多的是作为一般概念的一个例子。）

# mysql - 从特定月份提取帖子

> ID：10374075
> 
> 赞同：0
> 
> 时间：2012-04-29T17:06:05.387
> 
> 标签：mysql, database, dynamic, hyperlink

我正在尝试从已点击的特定月份中提取帖子，在不同的页面上......所以让它更清楚一点。

我有一个页面，每个月都会显示一篇帖子，然后我有第二个页面，该页面链接到该页面。第二页用于显示上一页中选择的月份的帖子。

下面是显示月份的代码和我创建的供用户点击的链接

```
$months = mysql_query("SELECT DISTINCT(MONTHNAME(date)) as post_month
                       FROM article
                       LIMIT 12");

while($row = mysql_fetch_array($months)){
    echo "<a href=\"montharticles.php?id=" . $row['0'] . "\">" . $row['0'] . "</a><br/>";
} 
```

下面是第二页的代码

```
$article = mysql_query("SELECT article_id, content, DATE_FORMAT(date, '%d %b %y') 
                       FROM article
                       WHERE article_id = $_GET[id]");

while($row = mysql_fetch_array($article)){
    echo $row . "</br>";
} 
```

我的问题是，当打开第二页时，我收到一条错误消息。

我已删除 $_GET[id] 并将其替换为数字，这样做只会显示“数组”我也尝试过 $_GET[month] 但没有运气

我意识到语句的 $_GET[] 部分存在问题，如果单击一个月，我需要将地址栏中的内容设置为 $_GET 命令中的内容，但我不知道该怎么做它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T17:15:35.923

你得到“数组”的原因是因为`$row`是一个数组。正如 Ami 所说，您需要访问数组中的一个值。

在您的 ref 访问的第一页上`montharticles.php?id=ID`，您必须确保通过查看地址栏来填充 id 属性，然后在第二页上尝试在`echo $_GET['id'];`某处回显（）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T17:10:31.277

在您的代码`$row`中是一个包含整行结果集的数组。

要访问行中的特定列，您需要执行以下操作：

```
echo $row['article_id']; 
```

您可能希望为日期列使用别名，如下所示：

```
SELECT article_id, content, DATE_FORMAT(date, '%d %b %y') AS date_column 
```

所以你可以这样做：

```
echo $row['date_column']; 
```

而不是这个：

```
echo $row["DATE_FORMAT(date, '%d %b %y')"]; 
```

# c# - 水晶报表组织数据

> ID：10374076
> 
> 赞同：0
> 
> 时间：2012-04-29T17:06:20.250
> 
> 标签：c#, crystal-reports, formatting

我在 C# Visual Studio 2010 中使用 Crystal Reports 13_0_2。一切正常，但我需要一些建议来格式化数据库中的数据。我是编程新手，尤其是水晶报表。在我的项目中，我使用水晶报表查看器工具来拍摄报表。

假设以下是我正在使用的数据：

```
Col1     Col2 
value1   abc 
value2   abc
value3   def
value4   def
value5   abc
value6   abc
value7   def
value8   def 
```

我需要从数据库中生成多个报告，例如第一个报告：

```
Col1     Col2 
value1   abc 
value2   abc
value5   abc
value6   abc 
```

第二份报告：

```
Col1     Col2 
value3   def
value4   def
value7   def
value8   def 
```

等等。

所以我需要按第二个 col 对数据进行分组，并在左侧的组树中显示 abc 和 def 名称。这可能很容易，但我不知道该怎么做。所以请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T03:01:10.617

如果您希望“Col2”成为您分组的对象，只需选择“插入组”并选择您要分组的列。

另一种选择是在主报表的第一列和“插入子报表”中创建每个“父数据”行下的“子数据”。

# c# - 将参数传递给 SQL 选择语句 IN 子句的行为很奇怪。

> ID：10374082
> 
> 赞同：2
> 
> 时间：2012-04-29T17:06:53.280
> 
> 标签：c#, sql, dataset, tableadapter, query-builder

我有以下查询返回 2 条记录（在 DataSet 的查询生成器中）

```
SELECT        EmpID, Name, id
FROM          Users
WHERE        (CAST(id AS Varchar(20)) IN ('5688','5689')) 
```

现在，如果我执行相同的查询，而不是从后面的代码中传递参数： String param = "'5688','5689'"; 它返回空值。

```
WHERE        (CAST(id AS Varchar(20)) IN (@param)) 
```

我试着去掉第一个和最后一个'，但这并没有什么不同。

!!!id是独一无二的PK！！！

有人有线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T18:49:14.293

我找到的解决方案很简单，这就像一个魅力，不需要sps或其他功能；

SQL：

```
SELECT whatever 
FROM whatever
WHERE (PATINDEX('%''' + CAST(id AS Varchar(20)) + '''%', @param) > 0) 
```

C＃：

```
String param = "'''1234'',''4567'''";
dataTable1 = tableAdapter1.getYourValues(param); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T17:13:56.570

IN 子句中不允许使用变量。
您期望值作为逗号分隔的字符串，您可以使用 split 函数（用户定义和非标准）将它们与原始表连接：

[http://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=326300&SiteID=1](http://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=326300&SiteID=1)

有关更多信息，您可以访问[此](http://social.msdn.microsoft.com/Forums/en-US/transactsql/thread/4ba1162d-fa76-452f-a59a-a6b1dc8e6d65/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T17:11:10.533

`('5688','5689')`是一个值数组。

定义`String param = "'5688','5689'";`和使用它作为`(@param)`一个`('5688','5689')`字符串。哪个行不通。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T15:40:34.603

比巴斯是正确的。对我来说，这很有效：

`string param="'1234','4567'";`我们不能使用 param 作为 SQL Parameter(@param)。

`command = new SqlCommand("SELECT * FROM table WHERE number IN (" + param + ")", connection);`

`command.ExcecuteReader();`

# sql-server-2008 - Ascmd.exe 进程卡在 OLAP 创建上

> ID：10374084
> 
> 赞同：2
> 
> 时间：2012-04-29T17:07:10.270
> 
> 标签：sql-server-2008, ascmd

我在这里拉头发，因为我不明白发生了什么
我有以下内容：

1.  Windows Server 2008 R2 64 位
2.  SQL Server 2008 R2 64 位

当我运行 ascmd.exe 它提供 xml 文件以构建 OLAP 数据库时，大多数情况下该过程只是卡住了，即使在十分钟后控制台窗口也会打开而没有更多消息。
但是，如果我检查 SQL Server 管理，我可以看到 OLAP 数据库已创建。然后在其他时间（同一台机器，同一场景，同一快照）它成功了。什么会导致这种奇怪的行为？

我试图到处搜索，但没有发现任何类似的问题
我试图用最新的（版本 10.0.87.5）替换 ascmd.exe 工具

不知道是什么原因造成的，求大神帮忙！

谢谢！！！

**更新：** 请人？这非常重要

**更新：** 我认为我在这方面取得了进展，但无法解释这种行为。我查看了 Ascmd 的代码，发现由于某种原因跟踪文件（日志文件）没有启动，因此代码进入了一个永远循环的部分并且没有退出（我添加了打印到代码检查它是否卡在这里，我注意到它卡在`while (!TraceStarted) { Thread.Sleep(1); }`：

```
private static void WaitForTraceToFinish()
    {
        int delay = Int32.Parse(TraceTimeout, CultureInfo.CurrentCulture);
        TraceTimeoutCount = TraceTimeoutCountReset = delay * PollingInterval; // TraceTimeoutCount is in 1/4 seconds
        Console.WriteLine("TraceTimeoutCount is : " + TraceTimeoutCount);
        Console.WriteLine("Did Trace Start Already ? : " + TraceStarted);
        // Wait for trace to start to flow
        while (!TraceStarted) { Thread.Sleep(1); } // loop every 20ms waiting for trace to start
        // Wait BeginEndBlockCount becomes 0 or TraceTimeoutCount expires
        while (TraceTimeoutCount > 0)
        { // loop forever until TraceFinished
            Console.WriteLine("TraceTimeoutCount is : " + TraceTimeoutCount);
            Console.WriteLine("PollingInterval is : " + PollingInterval);
            Console.WriteLine("1000 / PollingInterval = " + 1000 / PollingInterval);
            if (BeginEndBlockCount == 0) return;
            Thread.Sleep(1000 / PollingInterval); // wait a polling interval
            Console.WriteLine("TraceTimeoutCount is : " + TraceTimeoutCount);
            TraceTimeoutCount--;
            Console.WriteLine("TraceTimeoutCount is : " + TraceTimeoutCount);
        }
        Console.WriteLine("Got out from trace");
        // TraceTimeoutCount expired -- just exit
    } 
```

有谁知道为什么不启动跟踪文件？它与 Windows Server 2008 硬安全规则有关吗？

我无法删除跟踪文件，因为它是我们的要求有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:25:25.780

知道 Windows Server 2008 + SQL Server 2008 中的管理权限可能会导致这些错误以管理员身份运行解决了我的问题并且 OLAP 创建过程没有卡住，这真是令人沮丧

# php - 用于日食的 php pdt

> ID：10374085
> 
> 赞同：1
> 
> 时间：2012-04-29T17:07:20.437
> 
> 标签：php, eclipse

我已经为 Eclipse 安装了 pdt 我已经建立了一个新项目，添加了一个新的 php 文件，但我的智能只适用于我的可变 abe 方法。我怎样才能使它适用于 php 核心功能？像“socket_listen”等..？

我正在将它用于 android 开发，并且效果很好，如果它可以帮助我自动完成我的代码，我会非常高兴。

在我的项目中，我有 php 语言库，其中包含所需的所有函数和 php 文件，但由于某种原因 eclipse 不使用它。

有什么建议么 ？

# c# - 如何在 C# 中获取当前时间？

> ID：10374089
> 
> 赞同：18
> 
> 时间：2012-04-29T17:07:34.320
> 
> 标签：c#

我需要在 C# 中获取当前时间，但是当我创建一个 DateTime 对象时，时间设置为 00:00:00。

如何获取当前时间实例？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-04-29T17:09:45.427

```
DateTime.Now.ToString("HH:mm:ss tt"); 
```

这将其作为字符串提供给您。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-29T17:08:16.693

[DateTime.Now](http://msdn.microsoft.com/en-us/library/system.datetime.now.aspx)是您要搜索的内容...

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-29T17:19:25.387

```
DateTime.Now.ToShortTimeString().ToString() 
```

这会给你*DateTime*作为`10:50PM`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-29T17:21:51.230

尝试这个：

```
 string.Format("{0:HH:mm:ss tt}", DateTime.Now); 
```

有关更多详细信息，您可以查看：[您如何获得当前时间？](https://stackoverflow.com/questions/296920/how-do-you-get-the-current-time-of-day)

# sql - 在 Rails 3 应用程序中使用原始 sql 查询？

> ID：10374105
> 
> 赞同：7
> 
> 时间：2012-04-29T17:09:37.740
> 
> 标签：sql, ruby-on-rails-3, model, rails-activerecord, legacy-database

我正在将遗留数据库迁移到我的 Rails 应用程序（3.2.3）中。原始数据库带有很多用于报告的长 sql 查询。现在，我想做的是使用 Rails 应用程序中的 sql 查询，然后一一（在时间允许的情况下）将 sql 查询交换为“正确的”Rails 查询。

我有一个临床模型，控制器有以下代码：

```
 @clinical_income_by_year = Clinical.find_all_by_sql(SELECT date_format(c.transactiondate,'%Y') as Year, 
                                                 date_format(c.transactiondate,'%b') as Month,
                                                 sum(c.LineBalance) as "Income"
                                                 FROM clinical c
                                                 WHERE c.Payments = 0 AND c.LineBalance <> 0
                                                 AND c.analysiscode <> 213
                                                 GROUP BY c.MonthYear;) 
```

但是，当我运行该代码时，我会遇到一些与格式有关的错误。

```
Started GET "/clinicals" for 127.0.0.1 at 2012-04-29 18:00:45 +0100

SyntaxError (/Users/dannymcclelland/Projects/premvet/app/controllers/clinicals_controller.rb:6: syntax error, unexpected tIDENTIFIER, expecting ')'
...rmat(c.transactiondate,'%Y') as Year, 
...                               ^
/Users/dannymcclelland/Projects/premvet/app/controllers/clinicals_controller.rb:7: syntax error, unexpected tIDENTIFIER, expecting keyword_end
...rmat(c.transactiondate,'%b') as Month,
...                               ^
/Users/dannymcclelland/Projects/premvet/app/controllers/clinicals_controller.rb:8: syntax error, unexpected tIDENTIFIER, expecting keyword_end
...          sum(c.LineBalance) as "Income"
...                               ^
/Users/dannymcclelland/Projects/premvet/app/controllers/clinicals_controller.rb:10: syntax error, unexpected tCONSTANT, expecting keyword_end
...       WHERE c.Payments = 0 AND c.LineBalance <> 0
...                               ^
/Users/dannymcclelland/Projects/premvet/app/controllers/clinicals_controller.rb:10: syntax error, unexpected '>'
...yments = 0 AND c.LineBalance <> 0
...                               ^
/Users/dannymcclelland/Projects/premvet/app/controllers/clinicals_controller.rb:11: syntax error, unexpected '>'
...          AND c.analysiscode <> 213
...                               ^ 
```

在将 sql 查询导入控制器之前，我应该对它做些什么吗？虽然查询可能有问题（它是很久以前写的），但当直接在数据库中运行时，它确实可以按预期工作。它返回一个像这样的数组：

```
----------------------------------------------
|  Year      |    Month     |     Income     |
----------------------------------------------
----------------------------------------------
|  2012      |    January   |   20,000       |
|  2012      |    February  |   20,000       |
|  2012      |    March     |   20,000       |
|  2012      |    April     |   20,000       |
----------------------------------------------
etc.. 
```

任何帮助、建议或一般指示将不胜感激！

我正在阅读[http://guides.rubyonrails.org/active_record_querying.html](http://guides.rubyonrails.org/active_record_querying.html)试图将 sql 查询转换为正确的 Rails 查询。

到目前为止，我已经匹配了倒数第二行：

```
AND c.analysiscode <> 213 
```

和

```
@clinical_income_by_year = Clinical.where("AnalysisCode != 213") 
```

宝贝步骤！

**更新**

多亏了 Rails 指南站点，我现在已经对过滤进行了排序，但是我被困在 sql 查询的分组和求和部分上。到目前为止，我有以下内容：

```
@clinical_income_by_year = Clinical.where("AnalysisCode != 213 AND Payments != 0 AND LineBalance != 0").page(params[:page]).per_page(15) 
```

我正在努力构建以下两行 sql 查询：

```
sum(c.LineBalance) as "Income" 
```

和

```
GROUP BY c.MonthYear;) 
```

我的视图代码如下所示：

```
<% @clinical_income_by_year.each do |clinical| %>
  <tr>
    <td><%= clinical.TransactionDate.strftime("%Y") %></td>
    <td><%= clinical.TransactionDate.strftime("%B") %></td>
    <td><%= Clinical.sum(:LineBalance) %></td>
  </tr>    
  <% end %>
</table>
  <%= will_paginate @clinical_income_by_year %> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-29T17:37:53.247

Ruby 解析器不理解 SQL，需要使用字符串：

```
@clinical_income_by_year = Clinical.find_by_sql(%q{ ... }) 
```

我建议为此使用`%q`or `%Q`（如果您需要插值），这样您就不必担心嵌入的引号。您还应该将其移动到模型中的类方法中，以使您的控制器不必担心与其业务无关的事情，这也将使您可以轻松访问[`connection.quote`](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/Quoting.html#method-i-quote)和朋友，以便您可以正确使用字符串插值：

```
find_by_sql(%Q{
    select ...
    from ...
    where x = #{connection.quote(some_string)}
}) 
```

此外，您的 SQL 中的分号：

```
GROUP BY c.MonthYear;}) 
```

没有必要。有些数据库会让它通过，但无论如何你都应该摆脱它。

根据您的数据库，标识符（表名，列名，...）应该不区分大小写（除非某些可恶的人在创建它们时引用它们），因此您可以使用小写的列名来使内容适合轨道更好。

另请注意，某些数据库不喜欢 GROUP BY，因为您的 SELECT 中有未聚合或分组的列，因此`c.transactiondate`对于每个组使用哪个列存在歧义。

* * *

您的查询的更“Railsy”版本看起来像这样：

```
@c = Clinical.select(%q{date_format(transactiondate, '%Y') as year, date_format(transactiondate, '%b') as month, sum(LineBalance) as income})
             .where(:payments => 0)
             .where('linebalance <> ?', 0)
             .where('analysiscode <> ?', 213)
             .group(:monthyear) 
```

然后你可以做这样的事情：

```
@c.each do |c|
    puts c.year
    puts c.month
    puts c.income
end 
```

访问结果。您还可以通过将日期修改推入 Ruby 来简化一点：

```
@c = Clinical.select(%q{c.transactiondate, sum(c.LineBalance) as income})
             .where(:payments => 0)
             .where('linebalance <> ?', 0)
             .where('analysiscode <> ?', 213)
             .group(:monthyear) 
```

然后在 Ruby 中拆分`c.transactiondate`而不是调用`c.year`and `c.month`。

# exec - Shellexec vs Exec vs Shellexec 我的批处理文件

> ID：10374107
> 
> 赞同：7
> 
> 时间：2012-04-29T17:09:59.187
> 
> 标签：exec, inno-setup, shellexecute

我没有在帮助中找到对 Shellexec 和 Exec 之间区别的详尽解释。是个

```
Shellexec('','program.exe',params,'',SW_HIDE,ewWaitUntilTerminated,ResultCode) 
```

相当于

```
Exec('program.exe',params,'',SW_HIDE,ewWaitUntilTerminated,ResultCode) 
```

使用 exe 文件时？当然，当我想执行与 exe 或批处理不同的文件时，请使用 Shellexec。

然而，有时我无法通过 Shellexec 或 Exec 让我的指令正常工作。唯一始终有效的解决方案是编写一个批处理文件并通过 shellexec 运行它。我个人不喜欢这个解决方案，因为我必须处理一个临时文件并且我不相信获得的结果代码。现在我必须回到批处理文件解决方案，因为我不知道如何让这个指令工作：（错误是如果目标文件不存在，它会引发指令失败，而在命令提示符下即使目标文件不存在，该指令也有效）。

```
mysqldump := 'C:\Program Files (x86)\MySQL\MySQL Server 5.0\bin\mysqldump.exe';
params := '-uroot -ppassword myschema>C:\myappdir\backup\newbackup.sql'; 
//the destination folder exists, the file newbackup.sql does not exist      
Shellexec('',mysqldump,params,'',SW_HIDE,ewWaitUntilTerminated,ResultCode); 
```

我正在使用 Windows 7 64 位，程序（Inno Setup 安装程序）以管理权限运行

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T10:03:48.127

在 Inno Setup 的那种情况下，这两个调用几乎相同。但是，如果安装程序以最低权限运行，并且您尝试运行需要提升的进程，`ShellExec()`则会允许它提示而`Exec()`将失败。

传递单个整体命令行、传递非可执行文件或使用除`"open"`.

请注意，这两个函数都不允许您运行命令解释器提供的命令或操作，例如重定向运算符 ( `... > ...`)。需要传递这些命令`{cmd}`才能运行。

这是一些空气代码：

```
mysqldump := 'C:\Program Files (x86)\MySQL\MySQL Server 5.0\bin\mysqldump.exe';
params := '-uroot -ppassword myschema';
dumpfile : = 'C:\myappdir\backup\newbackup.sql';

command := AddQuotes(mysqldump) + ' ' + params + ' >' + AddQuotes(dumpfile);
Exec(ExpandConstant('{cmd}'), '/C ' + command, '', SW_HIDE, ewWaitUntilTerminated, ResultCode); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T17:13:31.967

您是否考虑过使用[CreateProcess](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)来启动流程？此调用提供了一些额外的选项来控制结果过程，并且还可以更好地处理传递的参数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-30T05:03:35.937

如果您可以使用 JEDI JVCL 库，他们有一个很好的组件可以为您封装 CreateProcess：

[http://jvcl.delphi-jedi.org/](http://jvcl.delphi-jedi.org/)

查看 JvCreateProcess 和 JvCreateProcessExtended 组件。JEDI JVCL 是免费和开源的，并在 Mozilla Public License 下发布。

# html - 在我的网站 html 上使用 2 个样式表

> ID：10374109
> 
> 赞同：3
> 
> 时间：2012-04-29T17:10:07.050
> 
> 标签：html, xhtml

我已经完成了我的网站并完成了样式表，但现在我创建了第二个样式表（称为 other.css）。我想要做的是在我的主页上有 2 个链接，一个带有“normal.css”，一个带有“other.css”。所以基本上我希望用户能够在我的 2 种样式之间进行选择。我复制了所有原始页面并在其名称中添加了“2”，我还创建了 other.css 并在这些页面上引用了它。“2”页都可以很好地显示替代布局，但我不知道如何让用户在样式之间切换......请帮忙？

注意我的 html 完全没有改变，我只是在改变 css 文件。

戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T17:25:32.837

好问题。答案很大程度上取决于您使用的服务器端技术。例如，对于我通常使用的 Google App Engine，只需更改生成的 HTML 标题的一部分以指向不同的 CSS 文件。但它不是一个静态的 HTML 文件。

[CSS Zen Garden](http://csszengarden.com)是一个专门用于说明以不同样式表呈现的同一个 HTML 文件的网站。也许你可以从那里得到一些关于如何做到这一点的想法。您将再次看到具有不同样式的页面，即使它们具有相同的 HTML 源，也不是静态的 .html 页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T19:17:46.663

如果您的服务器上有 php，您可以根据 cookie 更改样式表。以下代码将起作用：

```
if ($_COOKIE['style'] == '1') {
echo '<link rel="stylesheet" href="normal.css" type="text/css" />';
}
elseif ($_COOKIE['style'] == '2') {
echo '<link rel="stylesheet" href="other.css" type="text/css" />';
}
else {
echo '<link rel="stylesheet" href="normal.css" type="text/css" />';
} 
```

在页面底部添加一个链接：更改样式

在 changestyle.php 页面上有以下内容：

```
if ((isset($_COOKIE['style'])) AND ($_COOKIE['style'] == '1')) {
setcookie(style,2) 
}
elseif ((isset($_COOKIE['style'])) AND ($_COOKIE['style'] == '2')) {
setcookie(style,1) 
}
else {
setcookie(style,2) 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T17:45:13.397

[这个 W3C 页面](http://www.w3.org/Style/Examples/007/alternatives.en.html)不仅解释了如何做到这一点，而且本身也有许多备用样式表，因此您可以实际测试它。

在大多数浏览器中，用户可以使用 View → Page Style 之类的方式切换样式表。所需要的只是让菜单栏可见......

# java - 全局访问变量（Java）

> ID：10374118
> 
> 赞同：0
> 
> 时间：2012-04-29T17:11:44.070
> 
> 标签：java, android, static, enums, singleton

我正在为 Android 开发一个应用程序，并且有一次用户选择了一个区域，之后应用程序所有部分的内容都发生了变化。因此我需要在整个程序中访问一个整数。我考虑过一个单例类，但我不知道如何向它添加一个 int、一个 get() 和一个 set()（我希望能够在任何地方阅读并在两个类中写入（到处都很好） ））。

我应该简单地声明它是全球性的吗？

这就是我现在要做的，可以吗？

```
public enum Region {
INSTANCE;
private int rID =0;

public void setRID(int rID) {
    this.rID=rID;

}

public int getRID()
{
    return rID;
}

} 
```

访问

```
Region.INSTANCE.setRID(5); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T17:15:05.153

这不是一个真正的 Singleton，而是一个静态类。包含静态字段（未绑定到实例的字段）的类：

```
public class StaticClass {

    private static int value;

    private Singleton () {}

    public static int getValue () {
       return value;
    }
    public static void setValue (int val) {
       value = val;
    }

} 
```

您可以通过 访问值`StaticClass.getValue()`并通过 设置值`StaticClass.getValue(4)`。（'StaticClass 不能被对象替换）。

私有构造函数可防止意外创建实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T17:16:12.983

尝试类似的东西

```
public class State
{
     static State instance = new State ();
     public static State getInstance() { return instance; }

     private int value;
     public void setValue (int value) { this.value = value; }
     public int getValue () { return value; }
} 
```

不要忘记在应用程序退出时存储您的值，并在重新加载时恢复它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T17:16:01.887

创建一个公共静态类并将 setter 和 getter 声明为 public。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T10:55:00.357

我带着一个枚举去了：

```
public enum Region {
INSTANCE;
private int rID =0;

    public void setRID(int rID)
    {
        this.rID=rID;

    }

    public int getRID()
    {
        return rID;
    }
} 
```

我访问的

```
Region.INSTANCE.getRID(); 
```

# php - mysql_real_escape_string 在将带有撇号的单词保存到数据库时添加一个斜杠“\”

> ID：10374119
> 
> 赞同：3
> 
> 时间：2012-04-29T17:11:49.047
> 
> 标签：php, mysql, mysql-real-escape-string

> **可能重复：**
> [mysql_real_escape_string 和单引号](https://stackoverflow.com/questions/1200972/mysql-real-escape-string-and-single-quote)

编辑：我已经检查并且我的托管服务的 mysql 数据库设置为：

```
 Language: English (en-utf-8)
   MySQL charset: UTF-8 Unicode (utf8) 
```

下面的“userItem”变量来自用户在表单上输入的文本字符串。

当我输入“这是 A 的用户项目”时——我在上面使用***mysql_real_escape_string——*** 这是保存到数据库的内容：

```
 "this is A\'s user item" 
```

坏的。我的测试字符串保存了一个 backslsh。

如果我注释掉**mysql_real_escape_string($userItem)** 并在查询字符串中使用**$userItem** - 这就是存储在数据库中的内容：

```
 "this is A's user item" 
```

好的！！没有反斜杠。

但让我们面对现实吧，出于安全原因，我真的很想使用***mysql_real_escape_string*** —— 我被引导相信在将字符串保存到数据库之前对字符串使用 mysql_real_escape_string 更安全。

问题：当我检索我的文本字符串**“这是 A\ 的用户项”** 并将其显示在浏览器中时 - 它在字符串中有斜杠。这让用户感到惊讶——他们没有输入**“这是 A 的用户项目”**，而是输入***了“这是 A 的用户项目”***。

这是代码：

```
 $newItemInsertQuery = "INSERT INTO " . Dbases::$USERITEMS_TABLE 
   . " VALUES "
   . "('" 
   . mysql_real_escape_string( $loggedInUser ) . "', '" 
  //. mysql_real_escape_string($userItem) . "', '" COMMENTED OUT due to extraneous backslash
   . $userItem . "', '"
   . mysql_real_escape_string($description) . "', '" 
   . mysql_real_escape_string($itemImage) . "', '"
   . mysql_real_escape_string($userSubfolder) .  "')";

   $result = mysql_query($newItemInsertQuery); 
```

我怀疑以下内容；

*   我期望在数据库插入之前对字符串使用 mysql_real_escape_string 是件好事是有效的。

*   但我不知道必须采取的其他步骤

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T17:25:52.423

我*强烈*建议通过[`mysqli`](http://php.net/manual/en/book.mysqli.php)or使用参数化查询[`PDO`](http://php.net/manual/en/book.pdo.php)（两者都是 PHP 内置的）。

`mysql_real_escape_string()`充其量只是权宜之计。使用参数化查询既不那么麻烦（避免这样的问题）又更安全——而且对于许多事情来说，它也可以更有效。

它还将更清楚地准确传递和进入数据库的数据，因为它不需要执行任何形式的任何转义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T17:40:55.583

> 在将字符串保存到数据库之前，对字符串使用 mysql_real_escape_string 会更安全。

它不是“更安全”。
这实际上是一个**严格的规则**。

但是您的问题不是来自此功能，而是来自其他破坏数据的代码或设置。

所以，我们这里有两个问题。

1.  如何让你相信这不是这个功能的罪魁祸首。
2.  如何找到真正的原因。

对于第一个，请回显最终查询

```
echo $newItemInsertQuery; 
```

并在这里发布你得到的

感谢您
现在发布让我们看看
您发布的查询由于语法错误将永远不会被执行。

INSERT INTO useritems VALUES ('b@b.com', **'b'** s 4th item', 'the 4th item', '', '')

请参阅强调的部分：在这里，您的字符串文字已关闭，而后没有正确的语法关键字。

用这个改变你的查询电话

```
$result = mysql_query($newItemInsertQuery) or trigger_error(mysql_error()." ".$query);
exit; 
```

看看

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T19:58:09.933

我相信我已经找到了额外反斜杠的来源以及解决方案。我会在这里发布，然后回来发布我目前正在研究的解决方案。

提交表单的 **输入 type="text"**字段，然后在 PHP 中的服务器端从 $_POST 数组中提取带有撇号的文本字符串并以**回**显的方式显示时，斜杠已经*在文本中字符串*，像这样：

**“这就是它的样子”**

我无法使用我的网站目录中的 .htaccess 文件来使用该行关闭“魔术引号”

**php_flag magic_quotes_gpc 关闭**

由于 1and1 托管服务器显示错误（请参阅我上面对此的评论）并且不会运行我的网站。

我有一个解决方案，一旦得到证实，我会发回。

我已经测试了以下代码并且它可以工作 - 在我的表单上，我输入字符串**"b's 6th item"**，当表单提交时，此代码处理表单的 POST：

```
 $itemName = $_POST['theItemname'];
 echo $itemName; 
 if (get_magic_quotes_gpc())
 {
    $stripped = stripslashes($itemName);
    echo "<br /> This is itemName string after stripping: " . $stripped;
 } 
```

输出是：

```
 b\'s 6th item
     This is itemName string after stripping: b's 6th item 
```

我已经阅读了您在下面的评论，并将查看所有选项。现在，我现在需要一个解决方案，上面避免调用stripslashes()，除非'magic quotes'打开——它有效。

我会准备好回复并尝试找到更优雅的方式！谢谢大家。

# ruby-on-rails - has_one 与 :class_name 和 belongs_to 关系未在 rails 3.2.3 中正确设置属性

> ID：10374123
> 
> 赞同：0
> 
> 时间：2012-04-29T17:13:00.860
> 
> 标签：ruby-on-rails, form-for, has-one, fields-for

我正在尝试制作一个表单，通过 has_one （使用 :class_name 选项）和 belongs_to 关系为两个子对象设置值。但是，当我通过表单输入和提交值时，即使我输入不同的值，两个子对象也具有相同的值。

我有这两个模型。（上面的两个子对象表示类名为“Place”的“origin”和“destination”）

```
class Route < ActiveRecord::Base
  attr_accessible :name, :destination_attributes, :origin_attributes                                            
  has_one :origin, :class_name=>"Place"
  has_one :destination, :class_name=>"Place"
  accepts_nested_attributes_for :origin, :destination
end

class Place < ActiveRecord::Base                                                                                                                                              
  attr_accessible :address, :lat, :lng, :name, :route_id
  belongs_to :route, :foreign_key => "route_id"
end 
```

并使用以下部分制作表格。

**路线/_form.html.erb**

```
<%= form_for(@route) do |f| %>
  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
    <br />
    <%= render :partial => "places/nested_places_form", :locals => {record_name: :origin, place_object: @route.origin, parent_form: f} %>
    <br />
    <%= render :partial => "places/nested_places_form", :locals => {record_name: :destination, place_object: @route.destination, parent_form: f} %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

**地方/nested_places_form.html.erb**

```
 <%= parent_form.fields_for record_name, place_object  do |t| %>                                                                                                               
  <%= record_name %>

  <% if place_object.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@place.errors.count, "error") %> prohibited this place from being saved:</h2>

      <ul>
      <% @place.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= t.label :name %><br />
    <%= t.text_field :name %>
  </div>
  <div class="field">
    <%= t.label :lat %><br />
    <%= t.text_field :lat %>
  </div>
  <div class="field">
    <%= t.label :lng %><br />
    <%= t.text_field :lng %>
  </div>
<% end %> 
```

就像我提到的那样，即使我将不同的值放在空白中并从表单提交，来源和目的地的属性也总是以相同的方式结束。

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T17:18:11.273

您需要以某种方式区分数据库中的起点和终点。如果它们都具有相同的类并且存储在同一个表中，则没有什么可以将它们区分开来。如果您不想更改现有关系，则可能需要为此使用 STI 并使起点和终点不同的类：

```
class OriginPlace < Place
end

class DestinationPlace < Place
end

class Route < ActiveRecord::Base
  ...
  has_one :origin, :class_name=>"OriginPlace"
  has_one :destination, :class_name=>"DestinationPlace"
  ...
ene 
```

这将需要`type`位置表中的字段。

# extjs4 - Ext.grid.ColumnModel 不是构造函数

> ID：10374124
> 
> 赞同：0
> 
> 时间：2012-04-29T17:13:03.450
> 
> 标签：extjs4

我对 extjs 很陌生。我在我的服务器上安装了 ext js4。我收到以下错误。不知道是什么意思：

```
Ext.grid.ColumnModel is not a constructor 
```

这是我的链接： [http ://srikanthrajan.com/test/index.html](http://srikanthrajan.com/test/index.html)

现在我得到 Ext.grid.RowSelectionModel 不是构造函数

基本上我正在尝试以下教程：

[http://www.sencha.com/learn/ext-js-grids-with-php-and-sql](http://www.sencha.com/learn/ext-js-grids-with-php-and-sql)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:01:06.963

RowModel 是默认的，所以在你的网格配置中试试这个：

```
selModel: { mode: 'SIMPLE' }, 
```

或者

```
selModel: new Ext.selection.RowModel({singleSelect:false}) 
```

虽然 singleSelect 不是 RowModel 的配置选项，但请尝试：

```
selModel: new Ext.selection.RowModel({model:SIMPLE}) 
```

来自 ExtJs 文档：

> mode : 字符串选择模式。有效值为：
> 
> SINGLE - 一次只允许选择一个项目。使用 allowDeselect 允许取消选择 > 该项目。这是默认设置。
> 
> 简单 - 允许简单地一一选择多个项目。网格中的每次单击都将 > 选择或取消选择一个项目。
> 
> MULTI - 允许使用 Ctrl 和 Shift 键复杂地选择多个项目。

编辑：

我查看了您提到的教程中的代码，发现它适用于 ExtJs 2.x 和 3.x 版本。Grid 从第 3 版到第 4 版发生了很大变化。如果您想学习该教程，您需要手头有 ExtJs 4 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T17:54:55.407

我认为 PresidentsColumnModel 的列应该是`Ext.grid.column.Column`，而不是`Ext.grid.ColumnModel`

# configuration - 本地 NServicebus 发布到 Azure 队列

> ID：10374129
> 
> 赞同：2
> 
> 时间：2012-04-29T17:13:36.400
> 
> 标签：configuration, azure, nservicebus

我们有一个使用 NServicebus 的本地 Web 应用程序，我们希望将队列移动到 azure（作为完全基于云的更大迁移路径的一部分）。我正在尝试建立 POC，但似乎无法使其正常工作。

我有以下配置：

```
<configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,log4net, Version=1.2.10.0, Culture=neutral, PublicKeyToken=1b44e1d426115821" />
     <section name="AzureQueueConfig" type="NServiceBus.Config.AzureQueueConfig, NServiceBus.Azure"/>
    <section name="UnicastBusConfig" type="NServiceBus.Config.UnicastBusConfig, NServiceBus.Core"/>
    <section name="MessageForwardingInCaseOfFaultConfig" type="NServiceBus.Config.MessageForwardingInCaseOfFaultConfig, NServiceBus.Core"/>
</configSections>

<MessageForwardingInCaseOfFaultConfig ErrorQueue="error" />
<AzureQueueConfig QueueName="timeoutmanager" 
                ConnectionString="DefaultEndpointsProtocol=https;AccountName=<My storage account>;AccountKey=<My primary access key>"/>

<UnicastBusConfig TimeoutManagerAddress="timeoutmanager">
<MessageEndpointMappings>
  <add Messages="TechFu.Services.Bus.Messages.Publishing.CMS.SitePagePublishMessage, TechFu.Services.Bus.Messages" Endpoint="sitepagepublish" />
</MessageEndpointMappings> 
```

在我的应用程序中，我将总线配置为：

```
Configure.WithWeb()
.StructureMapBuilder()
.InMemorySubscriptionStorage()
       .AzureMessageQueue()
        .JsonSerializer()
.UnicastBus()
        .LoadMessageHandlers()
              .IsTransactional(true)
.CreateBus()
       .Start(); 
```

当我尝试发布到队列时，我收到以下消息：

```
The destination queue 'sitepagepublish@ DefaultEndpointsProtocol=https;AccountName=&lt;My storage account&gt;;AccountKey=&lt;My primary access key&gt;’ could not be found. You may have misconfigured the destination for this kind of message (TechFu.Services.Bus.Messages.Publishing.CMS.SitePagePublishMessage) in the MessageEndpointMappings of the UnicastBusConfig section in your configuration file. It may also be the case that the given queue just hasn't been created yet, or has been deleted. 
```

我有点不知所措，我尝试了我在网上找到的几个不同的样本，但我觉得我缺乏天蓝色的知识正在妨碍我。我从这个问题中提取了大部分配置：[nservicebus on-premise host using azure Queue](https://stackoverflow.com/questions/10274301/nservicebus-on-premise-host-using-azure-queue) 难道我缺少一些魔法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:53:01.663

目标队列是否存在？NServiceBus 默认只创建源队列，因此如果目标不存在，它不会为您创建它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T10:57:31.230

我认为这不会起作用，因为订阅消息无法在两个主机之间交换。

更好地使用 NServiceBus 的网关概念，它将跨不同站点分发消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T20:21:30.053

您可以尝试从配置文件中删除对**MsmqTransportConfig**的任何引用吗？（使用 Azure 队列时，您实际上是在替换 MSMQ 传输）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T06:40:06.283

我不熟悉 NServicebus。但是 Windows Azure 有一个内置的 Service Bus，它可以自然地与队列集成。您可以参考[http://msdn.microsoft.com/en-us/WAZPlatformTrainingCourse_ServiceBusMessaging](http://msdn.microsoft.com/en-us/WAZPlatformTrainingCourse_ServiceBusMessaging)获取教程。

最好的祝福，

明旭。

# android - Android：SimpleDateFormat 不断增加我的时间 1 小时

> ID：10374130
> 
> 赞同：2
> 
> 时间：2012-04-29T17:13:41.843
> 
> 标签：android, time, simpledateformat

我`currentTimeMillis();`用来获取开始时间，然后再次使用它来获取结束时间。然后我使用 delete start from end 并获得一个值，即两者之间的持续时间。我正在使用`SimpleDateFormat`使所有这些值变得漂亮和可读。唯一的事情是，当我使用像 10 秒（或 300 等）这样的低值而不是完整的长数字（即 1335718053126）时，我似乎在 01:00:10 或 01:02:12 等全部退出我的输出？事实上，如果我只是要求 SimpleDateFormat 输出一个 hh:mm:ss 值而不是 0 值，它会读取 01:00:00。

有谁知道这是为什么？

如果其他人需要时间格式化的解决方案，请找到这个简洁的小代码。 [来源链接](http://www.coderanch.com/t/378404/java/java/Convert-milliseconds-time)

```
public String getNiceTime(long time) {     

    String format = String.format("%%0%dd", 2);
    String seconds = String.format(format, time % 60);
    String minutes = String.format(format, (time % 3600) / 60);
    String hours = String.format(format, time / 3600);
    String outPutTime =  hours + ":" + minutes + ":" + seconds;
    return outPutTime;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:30:44.897

```
mySimpleDateFormat.setTimeZone(TimeZone.getTimeZone("GMT")); 
```

说明：您可能生活在 GMT+1 时区，除非您指定不同的时区，否则您的格式化程序将选择您当前的时区，因此它将 0 小时视为 GMT，而当您处于 GMT+1 时，它会输出 1 小时

# asp.net - 如何在我的网站上托管我的 WCF 服务？

> ID：10374131
> 
> 赞同：20
> 
> 时间：2012-04-29T17:13:46.237
> 
> 标签：asp.net, wcf, iis, hosting

我是 WCF 的新手。我开发了一个示例 WCF 服务。我的服务使用`basicHttp`绑定。

我使用 WAS 在本地 IIS 7.5 中托管我的服务，它工作正常。现在我想在我的网站上托管我的服务。

我搜索谷歌，但它们中的大多数都托管在 IIS 的 localhost 中。请告诉我该怎么做？最好参考一些教程或分步指南。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-29T18:17:38.953

我相信你基本上有两种选择：

**选项 1 - “bin”部署**（首选选项）

1.  将您的 WCF 服务编译为 DLL（类库）
2.  在 IIS 中创建网站
3.  将 WCF DLL 复制到网站的`.\bin`文件夹中
4.  在该网站中创建一个`*.svc`文件
5.  在网站文件夹中添加一个适当`web.config`的来定义您的端点和服务配置等。

您的 WCF 服务现在可以通过网站的基地址以及`*.svc`文件名访问，例如

```
http://myserver/someweb/Myservice.svc 
```

你`*.svc`会看起来像这样：

```
<%@ ServiceHost Language="C#" Debug="true" 
    Service="WCF_Simple_Service.HelloIndigoService"  %> 
```

属性表示实现服务的`Service=`类 - 完全限定其名称空间。

**选项 2 - 把东西放进去`App_Code`**

1.  在 IIS 中创建网站
2.  将所有 WCF 相关`*.cs`文件直接放入`.\App_Code`文件夹中
3.  在该网站中创建一个`*.svc`文件
4.  在网站文件夹中添加一个适当`web.config`的来定义您的端点和服务配置等。

您的 WCF 服务现在可以通过网站的基地址以及`*.svc`文件名访问，例如

```
http://myserver/someweb/Myservice.svc 
```

你`*.svc`会看起来像这样：

```
<%@ ServiceHost Language="C#" Debug="true" 
    Service="Service" 
    CodeBehind="~/App_Code/Service.cs" %> 
```

一个简单的示例`web.config`可能如下所示：

```
<system.serviceModel>
    <behaviors>
        <serviceBehaviors>
            <behavior name="WithDebug">
                <serviceMetadata httpGetEnabled="true" />
                <serviceDebug includeExceptionDetailInFaults="true" />
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  <services>
    <service name="SimpleWCF.HelloIndigoService" behaviorConfiguration="WithDebug">
      <endpoint
          address=""
          binding="basicHttpBinding"
          contract="SimpleWCF.IHelloIndigoService" />
      <endpoint
          address="mex"
          binding="mexHttpBinding"
          contract="IMetadataExchange" />
    </service>
  </services>
</system.serviceModel> 
```

您基本上定义了您的`<service>`标签 - 再次：`name=`表示实现服务的类 - 完全限定其名称空间。它必须包含至少一个端点——“mex”端点是可选的——但非常有用，尤其是对于开发和测试。它允许客户端“发现”服务并获取其服务描述，以便与​​它进行交互。

在 IIS 中部署服务后，您可以使用[WCF 测试客户端](http://msdn.microsoft.com/en-us/library/bb552364.aspx)（WCF 免费提供）或[SoapUI](http://www.soapui.org)（一种通用 SOAP 测试实用程序）等工具查看它的运行情况（提供免费版本供您使用） .

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-24T14:01:41.880

旧线程，如果有人找到它......但你也可以在你的 global.asax 中创建而不是你的 *.svc：

```
static Global()
{
    RouteTable.Routes.Add(new ServiceRoute("ExternalServices/SOAP/test", new     ninjectServiceHostFactory(), typeof(testService)));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-03T12:33:25.427

除了 Marc 的回答之外，如果您将工厂属性添加到您的 *.svc 文件中，如下所示，您无需更改主项目中的 web.config 文件中的任何内容。让我再重复一遍。web.config 文件中没有大量混乱，保持原样。这是因为 svc 文件中的 Factory 属性会照顾到这一切。

```
<%@ ServiceHost Language="C#" Debug="true" Service="WCF_Simple_Service.HelloIndigoService" Factory="System.ServiceModel.Activation.WebServiceHostFactory"  %> 
```

但我必须说，当你调用你的服务时，它会给出端点未找到错误。但是当你在你的服务中调用你的方法时，它们都会起作用。在宁静的 wcf 中测试。

# sql - 将 XML 批量导入 SQL Server

> ID：10374134
> 
> 赞同：6
> 
> 时间：2012-04-29T17:14:32.827
> 
> 标签：sql, sql-server, sql-server-2008

我在这里查看 Microsoft.com 上的这些示例：

[http://support.microsoft.com/kb/316005](http://support.microsoft.com/kb/316005)

[http://msdn.microsoft.com/en-us/library/aa225754%28v=sql.80%29.aspx](http://msdn.microsoft.com/en-us/library/aa225754%28v=sql.80%29.aspx)

但它在部分步骤中说必须执行 VBScript 代码，而我无法找到应该执行 VBScript 的位置。是否可以在 SQL Server 本身中执行？

该站点的代码如下所示：

```
 Set objBL = CreateObject("SQLXMLBulkLoad.SQLXMLBulkLoad")
 objBL.ConnectionString = "provider=SQLOLEDB.1;data source=MySQLServer;
                           database=MyDatabase;uid=MyAccount;pwd=MyPassword"
 objBL.ErrorLogFile = "c:\error.log"
 objBL.Execute "c:\customermapping.xml", "c:\customers.xml"
 Set objBL = Nothing 
```

这看起来可以在经典的 asp 或其他东西中执行，但我更喜欢将它保存在 SQL Server 中。有谁知道如何在 SQL Server 中执行类似的操作？或者有没有人有更好的方法将 XML 批量导入 SQL 服务器？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-29T17:32:08.100

SQL Server 能够读取 XML 并根据需要插入它。这是一个 XML 文件的示例，并且从[这里](http://pratchev.blogspot.com/2008/11/import-xml-file-to-sql-table.html)提取的插入：

XML:

```
<Products>
  <Product>
    <SKU>1</SKU>
    <Desc>Book</Desc>
  </Product>
  <Product>
    <SKU>2</SKU>
    <Desc>DVD</Desc>
  </Product>
  <Product>
    <SKU>3</SKU>
    <Desc>Video</Desc>
  </Product>
</Products> 
```

解析 XML 的插入语句：

```
INSERT INTO Products (sku, product_desc) 
SELECT X.product.query('SKU').value('.', 'INT'),
       X.product.query('Desc').value('.', 'VARCHAR(30)')
FROM ( 
SELECT CAST(x AS XML)
FROM OPENROWSET(
     BULK 'C:\Products.xml',
     SINGLE_BLOB) AS T(x)
     ) AS T(x)
CROSS APPLY x.nodes('Products/Product') AS X(product); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-05-21T05:23:08.320

我试过这个，对于 1MB XML 文件中的 975 行，这需要大约 2.5 分钟才能在速度非常快的 PC 上执行。

我转而在多步骤过程中使用 OpenXml，并且过程不到一秒钟。

```
CREATE TABLE XMLwithOpenXML
(
    Id INT IDENTITY PRIMARY KEY,
    XMLData XML,
    LoadedDateTime DATETIME
)    

INSERT INTO XMLwithOpenXML(XMLData, LoadedDateTime)
SELECT CONVERT(XML, BulkColumn) AS BulkColumn, GETDATE() 
FROM OPENROWSET(BULK 'clients.xml', SINGLE_BLOB) AS x;

DECLARE @XML AS XML, @hDoc AS INT, @SQL NVARCHAR (MAX)    

SELECT @XML = XMLData FROM XMLwithOpenXML WHERE ID = '1' -- The row to process    

EXEC sp_xml_preparedocument @hDoc OUTPUT, @XML

INSERT INTO Clients
SELECT CustomerID, CustomerName
FROM OPENXML(@hDoc, 'Clients/Client')
WITH 
(
    CustomerID [varchar](50) 'ID',
    CustomerName [varchar](100) 'Name'
)

EXEC sp_xml_removedocument @hDoc
GO 
```

我从这里得到这个： [http ://www.mssqltips.com/sqlservertip/2899/importing-and-processing-data-from-xml-files-into-sql-server-tables/](http://www.mssqltips.com/sqlservertip/2899/importing-and-processing-data-from-xml-files-into-sql-server-tables/)

基本上，您将 XML 作为一大块文本加载到表中，然后使用 OpenXml 对其进行处理。

# air - 我想用 Adob e Air PHP MYSQL 创建一个桌面应用程序

> ID：10374135
> 
> 赞同：1
> 
> 时间：2012-04-29T17:14:39.450
> 
> 标签：air, adobe

首先，我要感谢大家对我过去的帮助。在使用 Html、PHP、jQuery、Javascript、CSS、MYSQL 完成我的 Web 应用程序后，我意识到我不想要一个网站。最后，为了安全起见，我更愿意知道谁将访问我的应用程序。话虽如此，我想使用我已经为我的网站所做的大部分工作。我知道我可以将 PHP 与 AIR 和 MySQL 一起使用。我读到很多人会推荐使用 SQLite，但我的问题是我会不断更新数据库。我还阅读到使用 MYSQL 和 AIR 时存在一些安全问题。

问题 1，如果我在连接到 MYSQL 的 PHP 中采取了“必要的”安全预防措施，那可以吗？或者还有什么我应该注意的机智 AIR 吗？

问题 2 如果我真的需要使用 SQLite，有没有办法连接到 Mysql 以便我可以更新数据库。

如果有第三方软件可以将我的项目转换为可以连接到 MYSQL 的桌面应用程序，我愿意接受建议。我还嵌入了第三方闪存。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:04:26.897

强制登录网站才能使用它。这还不足以知道谁在访问您的应用程序吗？

PHP 是一种服务器端语言。Adobe AIR 是桌面应用程序框架。我不确定将 PHP-MySQL 应用程序转换为 Adob​​e AIR 应用程序将是一项微不足道的任务。

您可以通过在 AIR 中执行客户端并在 PHP/MySQL 中编写 Web 服务来采用分布式应用程序路由。如果你也想要一个分布式数据库，它会变得更加复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-08T00:29:34.810

您可以使用 php 构建一个 rest api，并通过 http 将其与 adobe air 应用程序集成，不需要 js。只需使用带有 urlloader urlstream 的 actionscript。如果您需要离线数据库，您可以使用 sqlite 并通过 php 与 Mysql 同步。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-06T04:18:45.300

您将不得不忘记 PHP 并使用 javascript 和 SQL sintax 来完成它。您可以从 adobe 查看这个漂亮的指南[http://help.adobe.com/en_US/air/html/dev/air_htmldevguide.pdf](http://help.adobe.com/en_US/air/html/dev/air_htmldevguide.pdf) 这并不容易；P

# javascript - jquery ajax 回调变量范围（为什么有些在范围内而有些不在）

> ID：10374136
> 
> 赞同：1
> 
> 时间：2012-04-29T17:14:41.103
> 
> 标签：javascript, jquery, scope, jquery-callback

我是 Javascript 和 jQuery 的新手，对以下代码和结果感到困惑。

为什么我的 golfer_name 在范围内，但我的 team_id 不在范围内？我该如何解决？它似乎是数组，并且变量集等于回调中不可用的数组元素。

jQuery代码

```
function submit_pick( sender ) {
    var names = sender.attr('name').split('-');
    var team_id = names[0];
    var tournament_id = names[1];
    var pick_number = names[2];
    var golfer_id = sender.val();
    var golfer_name = sender.find("option:selected").text();
    var senders_parent = sender.parent().get(0);
    sender.remove();
    $(senders_parent).html('submitting pick...');
    jQuery("#testdiv").append("submit pick before ajax request: "+names+', '+team_id+', '+tournament_id+', '+pick_number+', '+golfer_id+', '+golfer_name+'<br />');
    jQuery.post(fantasy_golf.ajaxurl, 
                {'action' : 'insert_pick',
                 'team_id' : team_id,
                 'tournament_id' : tournament_id,
                 'pick_number' : pick_number,
                 'golfer_id' : golfer_id
                },
                function(response) {
                    if (response) {
                        jQuery("#testdiv").append("submit pick after response: "+names+', '+team_id+', '+tournament_id+', '+pick_number+', '+golfer_id+', '+golfer_name+'<br />');
                    }
                },
                'text'
     );
} 
```

#testdiv 的结果

```
submit pick before ajax request: 10,2,1, 10, 2, 1, 22, Aaron Baddeley
submit pick after response: undefined, undefined, undefined, undefined, 22, Aaron Baddeley 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T18:30:38.057

我发现有趣的是，注释掉的代码行（最初没有被注释掉）导致了上述错误，即使它们是在我认为有问题的代码行之后。

我很抱歉在我的问题之前没有注释掉所有额外的代码行，我正在移动一些代码并且新的我仍然需要查看下面的代码，我只是从未想过它会导致上面的问题那一点。

感谢所有帮助过的人。

```
function submit_pick( sender ) {
    var names = sender.attr('name').split('-');
    jQuery("#testdiv").append(sender.attr('name')+"<br />");
    var team_id = names[0];
    var tournament_id = names[1];
    var pick_number = names[2];
    var golfer_id = sender.val();
    var golfer_name = sender.find("option:selected").text();
    var senders_parent = sender.parent().get(0);
    sender.remove();
    $(senders_parent).html('submitting pick...');
    jQuery("#testdiv").append("submit pick before ajax request: "+names+', '+team_id+', '+tournament_id+', '+pick_number+', '+golfer_id+', '+golfer_name+'<br />');
    jQuery.post(fantasy_golf.ajaxurl, 
                {'action' : 'insert_pick',
                 'team_id' : team_id,
                 'tournament_id' : tournament_id, 
                 'pick_number' : pick_number,
                 'golfer_id' : golfer_id 
                },
                function(response) {
                    if (response) {
                        jQuery("#testdiv").append("submit pick after response: "+names+', '+team_id+', '+tournament_id+', '+pick_number+', '+golfer_id+', '+golfer_name+'<br />');
//                            var names = $this.attr('id').split('-');
//                            var pick_id = names[1];
//                            var team_id = names[2];
//                            var tournament_id = names[3];
//                            var pick_number = names[4];
                    }
                },
                'text'
    );
} 
```

# mysql - 图像链接的 base64 编码 - MySQL 致命错误

> ID：10374138
> 
> 赞同：0
> 
> 时间：2012-04-29T17:14:49.813
> 
> 标签：mysql, base64, mysqldump, mysql-management

最近我一直致力于将一个非常大的客户端数据库从共享主机迁移到 VPS（仅主数据库的大小约为 5GB），而我已经成功地通过 shell 迁移了大部分表（并将数据包上限增加到 2GB）特别是有一张表给我带来了问题。

问题是我在表格中间有大约 20k 行，它们不会在 phpMyAdmin 或通过 shell 中上传，因为它们包含 base64 编码的图像，这会导致 mySQL 向我抛出“最大数据包到达错误”，即使上限是2GB。

我尝试联系我的服务器管理员和他的支持团队，他们也对如何处理这些数据感到困惑，因此非常感谢任何帮助。

此外，有问题的表只有 160mb 左右未压缩，而单独的段（与其他段分开）只有 ~60mb，所以我认为数据包上限不是问题。

*更新*我刚刚运行查询以显示数据包大小，MySQL 显示：max_allowed_pa​​cket 值下的 1048576

*update2*当我在 MySQL 中显示警告时，我不断收到有关行中没有所有列中的数据的错误，但是当我用 Null 替换空字符串时，错误仍然存​​在，所以我仍然感到困惑

IonCube 似乎在原始客户端服务器上启用，所以我不确定这是否也会导致任何错误。

# ruby - 使用 Mechanize 和 Ruby 解析帧中的数据

> ID：10374142
> 
> 赞同：0
> 
> 时间：2012-04-29T17:15:10.580
> 
> 标签：ruby, nokogiri, mechanize, hpricot

我正在尝试抓取以下网站，因为 XML 格式错误并且不包含我需要的所有数据：

[http://www.cafebonappetit.com/menu/your-cafe/pitzer](http://www.cafebonappetit.com/menu/your-cafe/pitzer)

但是，当我使用 Mechanize 获取文档时，我只得到：

```
{meta_refresh}
{title "Collins  | Claremont McKenna Cafés | Café Bon Appétit"}
{iframes}
{frames}
{links
 #<Mechanize::Page::Link "Welcome" "http://www.cafebonappetit.com/">
 #<Mechanize::Page::Link "Our Approach" "javascript://">
 #<Mechanize::Page::Link
 "Kitchen Principles"
 "http://www.cafebonappetit.com/our-approach/kitchen-principles">
 .....
 } 
```

不幸的是，我显然需要了解表格中的内容（我猜它们是 iFrame）。有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T01:20:46.273

这是一个简单的 mech + Nokogiri 脚本，用于抓取菜单项。

```
require 'rubygems'
require 'mechanize'
require 'pp'

agent = Mechanize.new
url   = "http://www.cafebonappetit.com/menu/your-cafe/pitzer"
page  = agent.get(url)

#Grab each daily menu
page.search('div#menu-items > table.my-day-menu-table').each do |menu|
  day = menu.xpath('preceding-sibling::div[1]/a').text.strip
  puts day
  fare = []
  #Collect the menu items
  menu.xpath('tr').each do |item|
    fare << item.xpath('td/strong').map(&:text).join(": ")
  end
  pp fare
end 
```

结果（摘录）：

```
Sunday, May 6th, 2012
["Brunch",
 "chef's table: custom omelet bar",
 "main plate: chicken sanchez",
 "meatless chicken and sauce",
 "options: banana pancakes",
 "stocks: beed barley",
 "vegetable minestrone",
 "Lunch",
 "main plate: steamed broccoli",
 "Dinner",
 "chef's table: pasta bar",
 "farm to fork: sauteed rainbow chard",
 "options: mozzarella sticks",
 "ovens: pizza bar",
 "main plate: roasted herb chicken",
 "baked ziti pasta",
 "steamed carrots and parsnips"] 
```

# c# - evry id 的 DataGridView 显示其他数据网格视图

> ID：10374150
> 
> 赞同：0
> 
> 时间：2012-04-29T17:16:25.353
> 
> 标签：c#

我正在制作小程序，现在制作了一个数据网格视图，该视图从我的数据库中全部显示`Project`。在数据库中，我有以下表格`Project`，，，。现在我希望当用户单击一行时，它将显示带有数据网格视图的新表单，该表单将显示连接到项目的类别。我知道我应该从数据源中删除，但我不能，因为我有中间表。我已经有 SQL Query 我如何从目标（类别）获取信息。`Category``Job`

```
SELECT c.*
FROM Kategorija c
INNER JOIN Project_Category pc on pc.cId = c.cId
INNER JOIN Project p on pc.pId = p.pId 
```

所以 pId 应该是输入参数。

感谢您的任何建议和帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T17:37:20.537

我很困惑你的确切要求是什么，但我认为你看起来有些像这样

```
SELECT c.*
FROM Kategorija c, Project_Category pc, Project p
WHERE pc.cId = c.cId and pc.pId = p.pId and p.pId=@selectedProjectID 
```

如果我错了，请纠正我。

# symfony - 在 postPersist 事件中插入教义

> ID：10374155
> 
> 赞同：18
> 
> 时间：2012-04-29T17:16:49.933
> 
> 标签：symfony, doctrine-orm, symfony-sonata

我想在实体上添加新的 Feed 项并持续更新。我写了这个事件监听器（postUpdate 是一样的）：

```
public function postPersist(LifecycleEventArgs $args)
{
    $entity = $args->getEntity();
    $em = $args->getEntityManager();

    if ($entity instanceof FeedItemInterface) {
        $feed = new FeedEntity();
        $feed->setTitle($entity->getFeedTitle());
        $feed->setEntity($entity->getFeedEntityId());
        $feed->setType($entity->getFeedType());
        if($entity->isFeedTranslatable()) {
            $feed->getEnTranslation()->setTitle($entity->getFeedTitle('en'));
        }
        $em->persist($feed);
        $em->flush();
    }
} 
```

但我得到了

> 完整性约束违规：1062 键 'PRIMARY' 的重复条目 '30-2'

并且在日志 a 中有两个插入：

> INSERT INTO interview_scientificdirection (interview_id, sciencedirection_id) VALUES (?, ?) ([30,2]) INSERT INTO interview_scientificdirection (interview_id, sciencedirection_id) VALUES (?, ?) ([30,2])

sciencedirection 是我们想要持久化的实体的多对多关系表。在前端应用程序中一切正常，但在 Sonata Admin 中我遇到了这个问题:(

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-15T15:48:54.530

如果您需要持久化其他对象，遗憾的是，Doctrine 中的 postPersist 或 postUpdate 处理程序不是正确的选择。我今天遇到了同样的问题，因为我需要在该处理程序中生成一些消息条目。

此时的问题是 postPersist 处理程序是在刷新事件**期间调用的，而不是在之后。**因此，您不能在此处保留其他对象，因为之后它们不会被刷新。此外，您不能在 postPersist 处理程序期间调用 flush ，因为这可能会导致重复条目（正如您所经历的那样）。

一种方法是使用来自学说的 onFlush 处理程序，记录在这里：[https ://www.doctrine-project.org/projects/doctrine-orm/en/2.7/reference/events.html#onflush](https://www.doctrine-project.org/projects/doctrine-orm/en/2.7/reference/events.html#onflush)

如果您需要插入数据库对象的 id，这只是有问题，因为实体尚未在该处理程序中写入数据库。如果您不需要这些 id，则可以使用 onFlush 事件。

对我来说，解决方案有点不同。我目前正在开发一个 symfony2 项目，并且需要插入的数据库对象的 ID（用于稍后的回调和更新）。

我在 symfony2 中创建了一个新服务，它基本上就像我的消息队列一样。在 postPersist 更新期间，我只是填写队列中的条目。我在 上注册了另一个处理程序`kernel.response`，然后将这些条目保存到数据库中。（沿着这条线的东西： http: [//symfony.com/doc/current/cookbook/service_container/event_listener.html](http://symfony.com/doc/current/cookbook/service_container/event_listener.html)）

我希望我在这里不要离题太多，但由于这是我真正挣扎的事情，我希望有些人可能会发现这很有用。

为此的服务条目是：

```
 amq_messages_chain:
   class: Acme\StoreBundle\Listener\AmqMessagesChain

 amqflush:
   class: Acme\StoreBundle\Listener\AmqFlush
   arguments: [ @doctrine.orm.entity_manager, @amq_messages_chain, @logger ]
   tags:
     - { name: kernel.event_listener, event: kernel.response, method: onResponse, priority: 5 }

 doctrine.listener:
  class: Acme\StoreBundle\Listener\AmqListener
  arguments: [ @logger, @amq_messages_chain ]
  tags:
    - { name: doctrine.event_listener, event: postPersist }
    - { name: doctrine.event_listener, event: postUpdate }
    - { name: doctrine.event_listener, event: prePersist } 
```

您不能为此使用`doctrine.listener`，因为这会导致循环依赖（因为您需要服务的实体管理器，但实体管理器需要服务......）

这就像一个魅力。如果您需要更多信息，请不要犹豫，我很高兴为此添加一些示例。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-05-21T01:53:54.123

Francesc 的回答是错误的，因为 postFlush 事件中的变更集已经是空的。jhoffrichter 的第二个答案可以工作，但有点矫枉过正。正确的做法是在 postPersist 事件中持久化实体，并在 postFlush 事件中再次调用 flush。但是只有在 postPersist 事件中更改了某些内容时，您才必须这样做，否则您将创建一个无限循环。

```
public function postPersist(LifecycleEventArgs $args) {

    $entity = $args->getEntity();
    $em = $args->getEntityManager();

    if($entity instanceof FeedItemInterface) {
        $feed = new FeedEntity();
        $feed->setTitle($entity->getFeedTitle());
        $feed->setEntity($entity->getFeedEntityId());
        $feed->setType($entity->getFeedType());
        if($entity->isFeedTranslatable()) {
            $feed->getEnTranslation()->setTitle($entity->getFeedTitle('en'));
        }
        $em->persist($feed);
        $this->needsFlush = true;
    }
}

public function postFlush(PostFlushEventArgs $eventArgs)
{
    if ($this->needsFlush) {
        $this->needsFlush = false;
        $eventArgs->getEntityManager()->flush();
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-02T18:04:45.060

jhoffrichter 的解决方案运行良好。如果您使用控制台命令，您应该为事件 command.terminate 添加一个标签。否则它在控制台命令中不起作用。见[https://stackoverflow.com/a/19737608/1526162](https://stackoverflow.com/a/19737608/1526162)

配置.yml

```
amq_messages_chain:
   class: Acme\StoreBundle\Listener\AmqMessagesChain

amqflush:
   class: Acme\StoreBundle\Listener\AmqFlush
   arguments: [ @doctrine.orm.entity_manager, @amq_messages_chain, @logger ]
   tags:
     - { name: kernel.event_listener, event: kernel.response, method: onResponse, priority: 5 }
     - { name: kernel.event_listener, event: command.terminate, method: onResponse }

doctrine.listener:
  class: Acme\StoreBundle\Listener\AmqListener
  arguments: [ @logger, @amq_messages_chain ]
  tags:
    - { name: doctrine.event_listener, event: postPersist }
    - { name: doctrine.event_listener, event: postUpdate }
    - { name: doctrine.event_listener, event: prePersist } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-28T18:48:43.353

Well, heres how i have done in SF 2.0 and 2.2:

Listener class:

```
<?php
namespace YourNamespace\EventListener;

use Doctrine\ORM\Mapping\PostPersist;

/*
 * ORMListener class
 *
 * @author:        Marco Aurélio Simão
 * @description:   Listener para realizar operações em qualquer objeto manipulado pelo Doctrine 2.2
 */

use Doctrine\ORM\UnitOfWork;

use Doctrine\ORM\Event\OnFlushEventArgs;
use Doctrine\Common\EventArgs;
use Doctrine\ORM\Mapping\PrePersist;
use Doctrine\ORM\Event\PostFlushEventArgs;
use Doctrine\ORM\Mapping\PostUpdate;
use Doctrine\ORM\Event\PreUpdateEventArgs;
use Doctrine\ORM\EntityManager;
use Doctrine\ORM\Event\PreFlushEventArgs;
use Enova\EntitiesBundle\Entity\Entidades;

use Doctrine\ORM\Event\LifecycleEventArgs;

use Enova\EntitiesBundle\Entity\Tagged;
use Enova\EntitiesBundle\Entity\Tags;

class ORMListener
{
    protected $extra_update;

    public function __construct($container)
    {
        $this->container    = $container;
        $this->extra_update = false;
    }

    public function onFlush(OnFlushEventArgs $args)
    {
        $securityContext = $this->container->get('security.context');
        $em              = $args->getEntityManager();

        $uow             = $em->getUnitOfWork();
        $cmf             = $em->getMetadataFactory();

        foreach ($uow->getScheduledEntityInsertions() AS $entity)
        {
            $meta = $cmf->getMetadataFor(get_class($entity));

            $this->updateTagged($em, $entity);
        }

        foreach ($uow->getScheduledEntityUpdates() as $entity)
        {
            $meta = $cmf->getMetadataFor(get_class($entity));

            $this->updateTagged($em, $entity);
        }
    }

    public function updateTagged($em, $entity)
    {
      $entityTags = $entity->getTags();

      $a = array_shift($entityTags);
      //in my case, i have already sent the object from the form, but you could just replace this part for new Object() etc

      $uow      = $em->getUnitOfWork();
      $cmf      = $em->getMetadataFactory();
      $meta     = $cmf->getMetadataFor(get_class($a));

      $em->persist($a);

      $uow->computeChangeSet($meta, $a);
    }

} 
```

Config.yml:

```
services:
    updated_by.listener:
        class: YourNamespace\EventListener\ORMListener
        arguments: [@service_container]
        tags:
            - { name: doctrine.event_listener, event: onFlush, method: onFlush } 
```

Hope it helps ;)

# php - 它没有附加变量

> ID：10374158
> 
> 赞同：-2
> 
> 时间：2012-04-29T17:17:04.300
> 
> 标签：php, javascript

我想附加已使用从 php 脚本`$_POST`发布的方法上传的文件的名称。`$_FILES['fileImage']['name']`问题是文件上传后，我没有看到附加的文件名，它只是显示一个空白。为什么成功上传文件后不附加文件名？

如果有人可以提供一个编码示例，那将非常有帮助。

下面是Javascript代码：

```
 <?php
    session_start();

    $output = array();
    if(isset($_POST['fileImage'])){
        $idx = count($_POST['fileImage']) -1 ;
        $output[] = isset($_POST['fileImage'][$idx]) ?
            $_POST['fileImage'][$idx]['name'] : "";
    }

    ?>

     <script>   

    function stopImageUpload(success) {
        var imageNameArray = <?php echo  json_encode($output); ?>;
        var result = '';

        if (success == 1) {
            result = '<span class="msg">The file was uploaded successfully!</span><br/><br/>';
            for (var i = 0; i < imageNameArray.length; i++) {
                $('.listImage').append(imageNameArray[i] + '<br/>');
            }
        }
        else {
            result = '<span class="emsg">There was an error during file upload!</span><br/><br/>';
        }

        return true;
    }

</script> 
```

以下是上传文件的 php 脚本，该脚本与 Javascript 函数处于不同的时代：

```
 <?php
session_start();

$result = 0;
$errors = array ();
$dirImage = "ImageFiles/";

if (isset ( $_FILES ['fileImage'] ) &&
    $_FILES ["fileImage"] ["error"] == UPLOAD_ERR_OK) {

    $fileName = $_FILES ['fileImage'] ['name'];

    $fileExt = pathinfo ( $fileName, PATHINFO_EXTENSION );
    $fileExt = strtolower ( $fileExt );

    $fileDst = $dirImage . DIRECTORY_SEPARATOR . $fileName;

    if (count ( $errors ) == 0) {
        if (move_uploaded_file ( $fileTemp, $fileDst )) {
            $result = 1;
        }
    }
}

$_SESSION ['fileImage'][] = array('name' => $_FILES ['fileImage']['name']);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T17:24:49.727

因为您正在寻找`$_POST`一个位于`$_SESSION`. 尝试将其更改为：

```
$output = array();
if(isset($_SESSION['fileImage'])){
    $idx = count($_SESSION['fileImage']) -1 ;
    $output[] = isset($_SESSION['fileImage'][$idx]) ?
        $_SESSION['fileImage'][$idx]['name'] : "";
} 
```

# .net - Delphi中指向指针的字节列表

> ID：10374160
> 
> 赞同：0
> 
> 时间：2012-04-29T17:17:17.910
> 
> 标签：.net, delphi, pointers

我在 vb.net 中有这个示例，我在 Delphi 中需要相同的输出。它基本上是一个指针列表，每个指针应该指向一个字节数组（图像）。

```
 Dim pPointerArray As IntPtr() = New IntPtr(count) {}
        Dim i = 0
        For Each r In ImageList
            pPointerArray(i) = Marshal.AllocHGlobal(r.Images.Length)
            Marshal.Copy(r.Images, 0, pPointerArray(i), r.Images.Length - 1)
            i += 1
        Next 
```

我尝试了许多不同的方法来转换它，但似乎都不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T17:24:20.867

我不确定是什么`ImageList`。它似乎不是该名称的 WinForms 控件。假设你知道如何做这`Marshal.Copy`部分，那么你想要这样的东西：

```
var
  PointerArray: array of Pointer;
.....
SetLength(PointerArray, ImageList.Count);
for i := 0 to ImageList.Count-1 do
begin
  PointerArray[i] := GetMem(ImageList[i].Size);
  // copy contents of i-th image to PointerArray[i]
end; 
```

# java - 更改时 JTree convertValueToText 返回被截断

> ID：10374161
> 
> 赞同：3
> 
> 时间：2012-04-29T17:17:27.947
> 
> 标签：java, swing, jtree

我有一个实现的自定义 JTree 实现`convertValueToText`。这个实现依赖于一些全局状态。如果返回的字符串比以前返回的字符串长（实际上我认为以像素为单位触发它更宽），则文本将被截断并用“...”填充。当重绘是由（取消）选择元素或`repaint`树上的 a 引起的时，这是正确的。

`convertValueToText`以这种方式实施是否有效？（我知道树显示不会自动更新）。

如何摆脱“...”并强制使用当前文本值正确绘制所有元素？

更新2：

显然我违反了 Swings 相当严格的踩踏政策（[http://docs.oracle.com/javase/6/docs/api/javax/swing/package-summary.html](http://docs.oracle.com/javase/6/docs/api/javax/swing/package-summary.html)）。使用以下方法进行更新：

```
 SwingUtilities.invokeAndWait(new Runnable() {
            @Override
            public void run() {
                for (int row = 0; row < tree.getRowCount(); row++) {
                    ((DefaultTreeModel) tree.getModel())
                            .nodeChanged((TreeNode) tree.getPathForRow(row)
                                    .getLastPathComponent());
                }
            }
        }); 
```

似乎工作正常。

更新：

这是一个最小的例子：

```
import java.util.Enumeration;
import java.util.Random;

import javax.swing.JFrame;
import javax.swing.JTree;
import javax.swing.tree.DefaultTreeModel;
import javax.swing.tree.TreeNode;

public class WeirdTreeFrame extends JFrame {
    public class WeirdTree extends JTree {
        public WeirdTree(TreeNode root) {
            super(root);
        }

        @Override
        public String convertValueToText(Object value, boolean selected,
                boolean expanded, boolean leaf, int row, boolean hasFocus) {
            return super.convertValueToText(value, selected, expanded, leaf, row, hasFocus);
        }
    }

    public class WeirdNode implements TreeNode {
        protected WeirdNode parent;
        protected WeirdNode children[];
        protected int dephth;
        protected String name;
        protected String names[] = {"Foo", "Bar", "Ohh"};
        public long superCrazyNumber;

        public WeirdNode(WeirdNode parent, String name) {
            this.parent = parent; 
            this.name = name;
            if (parent != null) {
                dephth = parent.dephth + 1;
            } else {
                dephth = 0;
            }
            if (dephth < 10) {
                children = new WeirdNode[3];
                for (int i = 0; i < 3; i++) {
                    children[i] = new WeirdNode(this, name + names[i]);
                }
            }
        }

        @Override
        public TreeNode getChildAt(int childIndex) {
            if (childIndex >= getChildCount()) return null;
            return children[childIndex];
        }

        @Override
        public int getChildCount() {
            return (children != null) ? children.length : 0;
        }

        @Override
        public TreeNode getParent() {
            return parent;
        }

        @Override
        public int getIndex(TreeNode node) {
            for (int i = 0; i < children.length; i++) {
                if (children[i] == node) return i;
            }
            throw new RuntimeException();
        }

        @Override
        public boolean getAllowsChildren() {
            return true;
        }

        @Override
        public boolean isLeaf() {
            return getChildCount() == 0;
        }

        @Override
        public Enumeration children() {
            return new Enumeration<TreeNode>() {
                int nextIdx = 0;
                @Override
                public boolean hasMoreElements() {
                    return nextIdx < getChildCount();
                }

                @Override
                public TreeNode nextElement() {
                    return getChildAt(nextIdx++);
                }
            };
        }

        @Override
        public String toString() {
            return "[" + dephth + "]" + name + "@" + superCrazyNumber;
        }
    }

    public WeirdNode root;
    private WeirdTree tree;

    public WeirdTreeFrame() {
        root = new WeirdNode(null, "Blubb");
        tree = new WeirdTree(root);
        add(tree);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setSize(500,500);
        setVisible(true);
    }

    public void update() {
        for (int row = 0; row < tree.getRowCount(); row++) {
            ((DefaultTreeModel) tree.getModel()).nodeChanged((TreeNode)tree.getPathForRow(row).getLastPathComponent());
        }
    }

    public static void main(String[] args) {
        WeirdTreeFrame frame = new WeirdTreeFrame();
        Random rnd = new Random(41);

        for (long i = 0; ; i++) {
            for (WeirdNode node = frame.root; node != null; node = (WeirdNode)node.getChildAt(rnd.nextInt(3))) {
                node.superCrazyNumber++;
            }
            if (i % 1e7 == 0) {
                System.out.println("Update: " + i);
                frame.update();
            }
        }
    }
} 
```

使用该`update()`方法，我尝试触发适当的事件以确保正确更新所有可见节点。正如您所看到的，一些计算在计算过程中并行且周期性地发生，我想更新树标签（而不是结构）。

该`update()`方法的问题是某些节点被标记为完全错误，如您在附图中所见（根节点应为“[0] ...”，第n级应为“[n] ..”）

![混合节点标签](../Images/69181429b06fb07bd1a80c084f9194ba.png)

我认为这是一些竞争条件。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-29T20:41:00.273

这可能意味着您正在更新树而没有告诉它您更改了某些内容，因此当它重绘时它只是重绘它而不重新计算布局。您必须从模型中调用 DefaultTreeModel.nodeChanged(node) 来通知 JTree 您实际修改了某些内容，然后它将处理重新计算节点的大小。或者使用适当的 TreeModelListener 接口调用来通知 Tree 发生了一些变化。如果你这样做，它将正确地重新布局该节点。

如果您正确地通知树 JLabel 正在重绘自己，但它没有再次执行布局来计算新字符串需要多少空间。如果你 revalidate() 它（而不是 repaint()）它应该再次执行布局，它将根据新字符串再次计算其首选大小并调整自身大小以包围整个字符串。

main() 方法中操作树然后调用 update 的部分违反了摆动线程规则，因为在构造 WeirdFrame 时，它​​是通过调用 setVisible() 实现的。这意味着除了 Swing Event Dispatcher 线程之外，您无法触摸它或用于从任何线程中绘制的任何模型。它与您是否实现 TreeNode 没有任何关系。

最简单的解决方法是将其推迟到 Event Dispatch 线程。像这样：

```
public void update( final WeirdNode node, final long nextSuperCrazyNumber ) {
    SwingUtilities.invokeLater( new Runnable() {
        public void run() {
            node.superCrazyNumber = nextSuperCrazyNumber;
            ((DefaultTreeModel) tree.getModel()).nodeChanged(node);
        }
    });
}

public static void main(String[] args) {
    WeirdTreeFrame frame = new WeirdTreeFrame();
    Random rnd = new Random(41);

    for (long i = 0; ; i++) {
        for (WeirdNode node = frame.root; node != null; node  =(WeirdNode)node.getChildAt(rnd.nextInt(3))) {
            long superCrazyNumber = node.superCrazyNumber;
            frame.update( node, superCrazyNumber++ );
        }
    }
} 
```

现在注意主线程是如何不受约束地运行的，但它并没有直接操作 WeirdNode 中包含的数据。请记住，调用 WeirdNode 的 toString() 方法来呈现要显示的字符串，因此在 SwingThread 上调用它。如果您从另一个线程写入 WeirdNode.superCrazyNumber，则您违反了线程规则。主线程获取副本对其进行一些计算，然后使用 SwingUtilities.invokeLater() 而不是 invokeAndWait() 将更新发布回 Swing 线程。你不需要 invokeAndWait 除非是非常有限的情况，它有可能导致锁定，所以最好避免它。您的 UI 不必每秒钟都反映模型，它只需要最终反映它，因此 invokeLater 是您的朋友。这里的关键是我

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-24T10:49:12.207

更改节点后调用方法*nodeChanged。*

```
((DefaultTreeModel)tree).getModel().nodeChanged(node); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T18:19:04.863

是`DefaultTreeCellRenderer`a `JLabel`，添加省略号是为了方便。您可以通过调整此[示例](https://stackoverflow.com/a/3597688/230513)中的框架大小来查看效果。有几种可能的选择：

*   为封闭容器使用合适的布局；该示例使用`GridLayout`.

*   `JTextField`使用可以水平滚动的渲染器组件，例如。

*   添加一个`TreeSelectionListener`更新相邻文本组件的。

# c++ - C++ 特化成员函数

> ID：10374162
> 
> 赞同：0
> 
> 时间：2012-04-29T17:17:43.477
> 
> 标签：c++, template-specialization, specialization

我需要创建一个具有通用数据成员的类，它的工作原理类似于 istream。对于所有类型，它应该能够存储由 << 运算符接收到的数据。我希望它适用于单个变量，除非该类是为 char 创建的，它应该适用于 C 字符串。

```
template <typename T>
class foo<C>{
    T* data;
public:
    void operator << (T t);
};

template <typename T>
class foo<char>: public foo<T>{
public:
    void operator << (char* str)
}; 
```

这就是我试图解决它的方法，但我得到一个错误的说法：显式专业化正在使用部分专业化语法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T17:23:19.483

这是你想要的吗？

```
template <typename T>
class foo
{
    T* data;
public:
    void operator<<(T t);
};

template <>
class foo<char>
{
public:
    void operator<<(char* str);
}; 
```

如果你打算继承行为，你需要这样的东西：

```
template <typename T>
class foo_impl
{
    T* data;
public:
    void operator<<(T t);
};

template <typename T>
class foo : public foo_impl<T>
{
};

template <>
class foo<char> : public foo_impl<char>
{
public:
    void operator<<(char* str);
}; 
```

（或者，通过消除不必要的出现更简单`public`）

```
template <typename T>
class foo_impl
{
    T* data;
public:
    void operator<<(T t);
};

template <typename T>
struct foo : foo_impl<T>
{
};

template <>
struct foo<char> : foo_impl<char>
{
    void operator<<(char* str);
}; 
```

我会建议一些 const 正确性：

```
template <typename T>
class foo_impl
{
    T* data;
public:
    void operator<<(const T& t);
};

template <typename T>
struct foo : foo_impl<T>
{
};

template <>
struct foo<char> : foo_impl<char>
{
    void operator<<(const char* str);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T17:25:31.333

您不能在类声明中指定模板类型。

```
template <typename T>
class foo{
    T* data;
public:
    void operator << (T t);
}; 
```

试试这个。阅读有关模板的 cplusplus.com 文档也可能会有所帮助。[http://www.cplusplus.com/doc/tutorial/templates/](http://www.cplusplus.com/doc/tutorial/templates/)

# php - 如何从 Flash Builder 4.6 发布变量并在 PHP 中获得结果？有任何想法吗？

> ID：10374163
> 
> 赞同：0
> 
> 时间：2012-04-29T17:17:45.267
> 
> 标签：php, sql, post, flash-builder

我对 Flash Builder 还很陌生，但我在网上和这里阅读了一些文章，这是一个我似乎无法解决的持久性问题。

在 Flash Builder 中，我有一个 ID 为“searchBar”的搜索栏。除了搜索栏外，还有一个标有“提交”的按钮。

我的系统是这样工作的：

1.  我已经建立了一个 HTTP 服务：

    ```
     <s:HTTPService id="searchBookAuthor"
                   url="http://localhost/cm0665-assignment/web/libraryServicePipe.php"
                   result="searchBookAuthor_resultHandler(event)"
                   fault="libraryService_faultHandler(event)"
                   method="POST"
                   >

        <s:request xmlns="">
            <searchBar>{searchBar.text}</searchBar>
        </s:request>

    </s:HTTPService> 
    ```

2.  用户在搜索框中输入搜索词并点击“提交”
3.  单击按钮时，会调用 click_handler 事件，在这里我创建了一个变量：

    ```
     var param:Object = new Object;
                param.action = 'search';
                searchBookAuthor.send(param); // ID of HTTPService 
    ```

3\. action = 'search' 与我的 PHP 服务器端文件中的一个案例函数有关。

我的问题是我不知道如何获取用户输入的数据以在 PHP 中获取。我有这个，但它不起作用（尽管我已经通过向 URL 传递一些参数来测试脚本）：

```
$searchValue = $_POST["searchBar"];

                $recset = new T_XMLRecordSet();

                $searchSQL = "select Title, Author from l_stock WHERE Title OR Author LIKE '%$searchValue%'";

                $result = $recset ->getRecordSet($searchSQL, 'book');
                return $result; 
```

结果返回我数据库中的每个标题和作者，并且 $_POST['searchBar'] 似乎没有获取数据。抱歉，看了很多，但我真的不知道我要去哪里错了。

非常感谢任何帮助，谢谢。

蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T23:53:03.790

稍微编辑一下您的请求结构：

```
<s:request xmlns="">
    <searchBar>{searchBar.text}</searchBar>
    <action>search</action>
</s:request> 
```

然后在 click_handler 事件中：

```
searchBookAuthor.send() 
```

这应该有效。

*当您传递`param`给`send()`函数时，您基本上是在覆盖您的请求结构。换句话说，你也可以这样做：

```
var param:Object = new Object;
            param.action = 'search';
            param.searchBar = searchBar.text;
            searchBookAuthor.send(param); 
```

# wolfram-mathematica - Mathematica NDSolve

> ID：10374166
> 
> 赞同：0
> 
> 时间：2012-04-29T17:18:01.133
> 
> 标签：wolfram-mathematica, differential-equations

我对 Mathematica 中的 NDSolve 函数有疑问。我有一个由这两个方程定义的振荡器：

```
x' = v
v' = -x - u*v^3 
```

其中 u 是一些常数。

如何创建解决此问题的 NDSolve？我尝试了以下代码（它必须取决于时间）但它不起作用：

```
eq1 = x'[t] == v;
eq2 = v' == -x[t] - u*v^3;
eq3 = x[0] == 2; 
```

（初始位移为 2m）。

```
s = NDSolve[{eq1, eq2, eq3}, x, {t, 0, 30}] 
```

非常感谢你...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T18:07:16.680

您需要为您指定一个数值`u`以及为 的初始条件`v[t]`：

```
u=1.0;
solution=NDSolve[{x'[t]==v[t], v'[t]==-x[t]-u v[t]^3,x[0]==2,v[0]==-1},{x,v},{t,0,1}]

Plot[{solution[[1,1,2]][t],solution[[1,2,2]][t]},{t,0,1}] 
```

![在此处输入图像描述](../Images/1314e2492ba7afa3667e9490a6986371.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T18:28:46.423

您需要观察到，第一个等式一旦对 微分，就`t`可以用来代替`v[t]`。但随后第二个方程变为二阶 ODE，需要提供另一个额外的初始条件。我们会给

```
v[0]==x'[0]==some number 
```

然后在为`x`你解决这个 ODE 之后，我可以恢复`v[t]==x'[t]` 我给你的解决方案，`Manipulate`这样在几何上情况对你来说就很清楚了。

```
(* First equation *)
v[t] = x'[t];
(* 
   Differentiate this equation once and substitute 
   for v[t] in the second equation
*)
Manipulate[
With[{u = Constant, der = derval}, 
     res = NDSolve[{x''[t] == -x[t] - u*x'[t]^3, x[0.] == 2,x'[0.] == der},
     x, {t, 0., 30.}] // First; 
     Plot[Evaluate[{x[t], v[t]} /. res], {t, 0, 30}, PlotRange -> All,
     Frame -> True,Axes -> None, ImageSize -> 600]
   ],
{{Constant, 0.,TraditionalForm@(u)}, 0.,3, .1},
{{derval, -3., TraditionalForm@(v[0] == x'[0])}, -3, 3, .1}
] 
```

![在此处输入图像描述](../Images/02de956408c418baed2d12ba2560b510.png)

希望这对您有所帮助，但下次在您提问之前，您需要先复习一下理论，因为您可以看到您提出的问题涉及非常基础和初等数学而不是 Mathematica 编程。祝你好运！！

# javascript - 更改边框/颜色 onFocus

> ID：10374170
> 
> 赞同：3
> 
> 时间：2012-04-29T17:18:24.440
> 
> 标签：javascript, jquery

我试图制作脚本，在专注于之后改变 div 边框底部的颜色

```
<input type="text"> 
```

然后在单击其他位置后更改回默认颜色。

这是我尝试过的：

CSS：

```
.div1 {border-bottom:1px solid #ccc;} 
```

Java脚本：

```
function inputFocus(){ $(".div1").css("border-bottom","1px solid #ffba00"); }; 
```

html:

```
<input type="text" onFocus="inputFocus();"> 
```

第一部分（在焦点上更改颜色）工作正常，但是在单击其他地方（不关注输入）后，它不会变回 css 文件中设置的正常样式。

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T17:20:25.560

我建议：

```
$('input').focus(
    function(){
        $(this).css('border-bottom','1px solid #000');
    }).blur(
        function(){
            $(this).css('border-bottom','1px solid #ccc');
        });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/2xXr6/1/)。

虽然如果你愿意使用 CSS：

```
input:focus,
input:active {
    border-bottom: 1px solid #000;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/2xXr6/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T17:24:20.117

```
$('input').focus(function(){
    $(this).css('border-bottom-color','#ffba00');
});
$('input').blur(function(){
    $(this).css('border-bottom-color','#ccc');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T17:21:04.460

您不应该使用 JavaScript 来执行此操作。CSS 有一个`:focus`更适合于此的选择器。

```
.div1 {border-bottom:1px solid #ccc;}
.div1:focus {border-bottom:1px solid #ffba00;} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T17:21:10.447

您应该向 onBlur 事件添加一个函数来回滚您的更改

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-29T17:24:44.843

你必须使用`onBlur`事件。

JavaScript：

```
function inputBlur() {
    $(".div1").css("border-bottom","1px solid #ccc");
} 
```

HTML：

```
<input type="text" class="div1" onFocus="inputFocus();" onBlur="inputBlur();"> 
```

**但是**，更好的选择是使用类切换。

HTML：

```
<input type="text" class="myinput"> 
```

CSS：

```
.myinput {
    border-bottom:1px solid #ccc;
}

.myinput.active {
    border-bottom:1px solid #ffba00;
} 
```

JavaScript：

```
$(function() {
    $(".myinput").on("focus", function() {
        $(this).addClass("active");
    }).on("blur", function() {
        $(this).removeClass("active");
    });
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-29T17:24:52.707

而不是在 html 中调用函数，你可以试试这个：

```
.border {border-bottom:1px solid #ccc;}

$("input[type='text']").focus(function(){
    $(this).addClass("border")
})

$("input[type='text']").blur(function(){
   $(this).removeClass("border");
}) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-29T17:25:33.360

发生这种情况是因为在失去控制焦点后更改的 css 没有恢复。

这将有助于：

```
<input type="text" onFocus="inputFocus();" onblur="inputBlur();">

function inputFocus(){ $(".div1").removeAttr('style'); }; 
```

# html - 如何制作 Twitter Bootstrap 的 块水平滚动？

> ID：10374171
> 
> 赞同：60
> 
> 时间：2012-04-29T17:18:32.370
> 
> 标签：html, css, twitter-bootstrap, horizontal-scrolling, pre

根据示例[https://getbootstrap.com/docs/4.3/content/code/#code-blocks](https://getbootstrap.com/docs/4.3/content/code/#code-blocks)`<pre>` ，bootstrap 仅支持开箱即用的垂直可滚动和自动换行块。如何使我拥有可水平滚动的未包装代码块？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-04-29T17:20:51.493

诀窍是引导程序会覆盖元素*的*the`white-space`和 CSS3`word-wrap`属性。`<pre>`要实现水平滚动，请确保您的 CSS 中有以下内容：

```
pre {
  overflow: auto;
  word-wrap: normal;
  white-space: pre;
} 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-05-07T13:34:50.400

这对我有用：

```
pre {
    overflow-x: auto;
}
pre code {
    overflow-wrap: normal;
    white-space: pre;
} 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2015-09-24T22:54:42.070

当我开始新项目并且必须通读评论以记住时，我不断回到这个答案，哦，是的，不要覆盖引导类，不要忘记溢出包装等......

所以你有 stock `pre-scrollable`，它只是垂直滚动，你可能还想要：

## 仅水平滚动

```
.pre-x-scrollable {
    overflow: auto;
    -ms-word-wrap: normal;
    word-wrap: normal;
    overflow-wrap: normal;
    white-space: pre;
} 
```

## 垂直和水平滚动

```
.pre-xy-scrollable {
    overflow: auto;
    -ms-word-wrap: normal;
    word-wrap: normal;
    overflow-wrap: normal;
    white-space: pre;
    max-height: 340px;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-31T20:27:27.963

较新版本的 Bootstrap 将样式应用于这两者`pre`并`code`包装单词。将此添加到我的样式表中为我解决了这个问题：

```
pre code {
        white-space: pre;
        word-wrap: normal;
} 
```

# facebook-c#-sdk - 使用 facebook c# sdk 创建控制台应用程序

> ID：10374175
> 
> 赞同：2
> 
> 时间：2012-04-29T17:19:04.297
> 
> 标签：facebook-c#-sdk

大家好，我想编写一个控制台应用程序，在 facebook 上的特殊时刻发布消息，我现在不知道如何开始，如果您有示例或教程或任何可以帮助我的链接，请与我分享，谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T05:11:18.063

目前尚不清楚您的方案是什么，但您可以尝试 Facebook PowerShell Module [http://facebookpsmodule.codeplex.com](http://facebookpsmodule.codeplex.com)。

# mysql - 如何比较行之间的值并找到响应的平均值？

> ID：10374178
> 
> 赞同：3
> 
> 时间：2012-04-29T17:19:12.393
> 
> 标签：mysql, sql, database, join, subquery

我有一个用户对是/否投票问题的回答的 MySQL 表。看起来有点像这样：

```
| user_id    | poll_id  | response  |
|------------|----------|-----------|
|    111     |    1     |   'yes'   |
|    111     |    2     |   'no'    |
|    111     |    3     |   'no'    |
|    222     |    1     |   'yes'   |
|    222     |    2     |   'yes'   |
|    222     |    3     |   'yes'   |
|    333     |    1     |   'no'    |
|    333     |    2     |   'no'    |
|    333     |    3     |   'no'    | 
```

我想计算每个用户的响应与每个其他用户的响应之间的相似性。因此，用户 111 和用户 222 的相似度为 0.333（因为他们有 3 个相同的响应中的 1 个），用户 111 和用户 333 的相似度为 0.666（因为他们有 3 个相同的响应中的 2 个）。

我编写了一个查询，它将为我提供两个指定用户的相同响应数：

```
SELECT  COUNT(*) AS same_count 
FROM    (
            SELECT  response 
            FROM    results 
            WHERE   user_id = 111
        ) AS t1
    ,   (
            SELECT  response 
            FROM    results 
            WHERE   user_id = 222
        ) AS t2 
WHERE   t1.response = t2.response 
```

现在我正在尝试找出一种方法来为所有用户获取该信息，以产生如下结果：

```
| user_1  |  user_2  |  same_count  |
|---------|----------|--------------|
|  111    |   222    |    0.333     |
|  111    |   333    |    0.666     |
|  222    |   111    |    0.333     |
|  222    |   333    |    0         |
|  333    |   111    |    0.666     |
|  333    |   222    |    0         | 
```

或者，如果可能的话，没有冗余信息：

```
| user_1  |  user_2  |  same_count  |
|---------|----------|--------------|
|  111    |   222    |    0.333     |
|  111    |   333    |    0.666     |
|  222    |   333    |    0         | 
```

我的直觉告诉我，有一种方法可以将其作为一个庞大的 MySQL 查询来执行，而不必通过 PHP 中的循环执行一堆查询。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T17:37:56.100

您必须使用列 *poll_id* 和 *user_id* 对同一个表执行完全外连接。结果将显示两次，为了避免我们需要以这样一种方式指定条件，即只有*alias1*表的`user_id`值小于*alias2*表的`user_id`值才会包含在结果集中。

[**单击此处查看 SQL Fiddle 中的演示。**](http://sqlfiddle.com/#!2/bc770/27)

*脚本*：

```
CREATE TABLE poll
(
    user_id     INT         NOT NULL
  , poll_id     INT         NOT NULL
  , response    VARCHAR(10) NOT NULL  
);

INSERT INTO poll (user_id, poll_id, response) VALUES
   (111, 1, 'yes'),
   (111, 2, 'no'),
   (111, 3, 'no'),
   (222, 1, 'yes'),
   (222, 2, 'yes'),
   (222, 3, 'yes'),
   (333, 1, 'no'),
   (333, 2, 'no'),
   (333, 3, 'no');

SELECT      p1.user_id AS user_1
        ,   p2.user_id AS user_2, 
            AVG(CASE 
                    WHEN p1.response = p2.response THEN 1 
                    ELSE 0 
                END) Average_Response
FROM        poll p1
,           poll p2 
WHERE       p1.poll_id = p2.poll_id 
AND         p1.user_id < p2.user_id
GROUP BY    p1.user_id
        ,   p2.user_id; 
```

*输出*：

```
USER_1 USER_2 AVERAGE_RESPONSE
------ ------ ----------------
111     222      0.3333
111     333      0.6667
222     333      0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T17:27:12.860

这应该会给你想要的结果：

```
SELECT
  t1.user_id AS user_1,
  t2.user_id AS user_2,
  SUM(CASE WHEN t1.response = t2.response THEN 1 ELSE 0 END) / COUNT(1)
    AS same_count
FROM t t1
JOIN t t2 ON ( t2.user_id > t1.user_id AND t2.poll_id = t1.poll_id )
GROUP BY t1.user_id, t2.user_id
ORDER BY user_1, user_2 
```

我的测试结果：

```
111 222 0.333333333333333
111 333 0.666666666666667
222 333 0 
```

* * *

这`CASE`部分在 MySQL 中可以更容易地编写为 ( `t1.response = t2.response`)，我的版本也适用于其他类型的数据库。
这部分的主要技巧是计算所有匹配的条目，并将计数除以条目数。

这`t2.user_id > t1.user_id`将删除重复项（111 - 222、222 - 111）。

# c++ - 这是偏函数模板专业化吗？

> ID：10374180
> 
> 赞同：3
> 
> 时间：2012-04-29T17:19:25.537
> 
> 标签：c++, templates, c++11, template-specialization, initializer-list

[我在回答这个问题](https://stackoverflow.com/questions/10369464/template-function-gives-no-matching-function-for-call-error)后想出了这个

我有一个简单的函数模板（C++11）：

```
template<class elem_t, class list_t>
bool in_list(const elem_t& elem, const list_t& list) {
   for (const auto& i : list) {
      if (elem == i) {
         return true;
      }
   }
   return false;
} 
```

但是 GCC 发出警告，因为它似乎不喜欢将模板参数推断为 std::initializer_list。所以，不假思索，我做了一个专业化：

```
template<class elem_t>
bool in_list(const elem_t& elem, std::initializer_list<elem_t> list) {
   for (const auto& i : list) {
      if (elem == i) {
         return true;
      }
   }
   return false;
} 
```

这行得通。没有更多的警告。但是当我再次查看并考虑时，我记得 C++ 不支持函数模板上的部分模板特化。但这似乎就是这样。我唯一的猜测是这是允许的，因为 std::initializer_list 仍然依赖于模板参数，所以它本质上是一个不同的模板。但是我不确定这是否应该是这样（没有关于模板不重载的问题吗？）。

接受这一点是标准行为吗？为什么？

作为一个额外的问题，为什么 GCC 不喜欢将模板参数推断为 std::initializer_list？期望我复制和粘贴代码并用 std::initializer_list 替换参数似乎很愚蠢。

警告信息：

```
test.cpp: In function ‘int main()’:
test.cpp:33:43: warning: deducing ‘const list_t’ as ‘const std::initializer_list<int>’ [enabled by default]
test.cpp:6:6: warning:   in call to ‘bool in_list(const elem_t&, const list_t&) [with elem_t = int, list_t = std::initializer_list<int>]’ [enabled by default]
test.cpp:33:43: warning:   (you can disable this with -fno-deduce-init-list) [enabled by default] 
```

当被调用时`in_list(3, {1, 2, 3, 4, 5});`

编辑：显然，将模板参数推断为 initializer_list 是根据我的 GCC 版本（[引用](http://gcc.gnu.org/onlinedocs/gcc-4.4.4/gcc/C_002b_002b-Dialect-Options.html)）的工作草案的扩展。所以新的问题：这仍然是最终 c++11 标准的扩展吗？如果是这样，这意味着我有必要为符合标准的代码添加第二个函数。感谢你的帮助！

EDIT2： GCC 4.7 的编译器方言标志似乎已被删除，因此问题似乎已解决，但我不知道它是*如何*解决的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T18:05:30.127

使用@Ben Voigt 在另一个答案的评论中所说的话，我收集了一些相关的标准引用：

> §14.5.6.2
> 
> 一个函数模板可以被其他函数模板和普通（非模板）函数重载。普通函数与函数模板无关（即，它**从不被视为特**化），**即使它与可能生成的函数模板特化具有相同的名称和类型**。

所以这排除了你正在做的函数模板特化，因为即使两个函数模板重载可能会生成相同的函数，它也不是特化。所以超载了。

> 这样的专业化是不同的功能，并且不违反单一定义规则（3.2）。

所以它们是不同的功能，这就是它不会出错的原因。

> §14.5.6.2.1
> 
> 如果函数模板被重载，则函数模板特化*的使用可能会产生歧义，因为模板参数推导 (14.8.2) 可能会将函数模板特化与多个函数模板声明相关联。

这是针对我们都已经看到的内容的启动，即`in_list(a, b)`where `b`is an`initializer_list`似乎与两个函数模板匹配。

（*注意，这里的“函数模板特化”并不意味着特化一个函数模板，它意味着一个已经用一个类型实例化的函数模板。所以 with `template<typename T> f();`,`f<int>()`是一个函数模板特化。）

所以我们使用所谓*的重载函数模板的部分排序*来解决这个问题：

> 在以下上下文中使用重载函数模板声明的部分排序来选择函数模板特化所引用的函数模板：
> 
> — 在调用函数模板特化 (13.3.3) 的重载决议期间；
> 
> — 当一个函数模板特化的地址被取用时；
> 
> — when a placement operator delete that is a function template specialization is selected to match a placement operator new (3.7.4.2, 5.3.4);
> 
> — when a friend function declaration (14.5.4), an explicit instantiation (14.7.2) or an explicit specialization (14.7.3) refers to a function template specialization.

Ok, so that's when partial ordering is for. This is what it does:

> Partial ordering selects which of two function templates is more specialized than the other by transforming each template in turn (see next paragraph) and performing template argument deduction using the function type. The deduction process determines whether one of the templates is more specialized than the other. If so, the more specialized template is the one chosen by the partial ordering process.

And then you get into the long and laborious process of determining which template is more specialised, which you can read about if you want, but it's really complicated and I probably don't understand it all (and plus, I don't have enough time to write about it :)).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T17:27:16.763

这不是部分专业化。您正在做的是重载功能。

# ios - iPhone 应用程序在模拟器中启动得非常好，但在 iphone 上什么也不做

> ID：10374182
> 
> 赞同：0
> 
> 时间：2012-04-29T17:19:46.020
> 
> 标签：ios, crash, uiapplicationdelegate

谢谢阅读。我解决了这个问题。原因如下：

在 info.plist 文件中，我将“本地化本地开发区域”行更改为“德国”。之后，该应用程序不再在 iphone 上运行，而是在模拟器中运行。将其重置为“en”后，它再次在 iphone 设备上工作。

有谁知道为什么它不能在这种特殊情况下在 iphone 上运行？

我有一个非常奇怪的问题。我可以在模拟器中运行我的 iPhone 应用程序，但不能在我的 iphone 设备上运行。如果我在我的设备上运行它，它会在以下行兑现

```
int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])); <-- crashes here
    }
} 
```

在我的 AppDelegate.m 文件中，我在每个方法中放置了一个 NSLog：

```
#import "AppDelegate.h"
#import <CoreLocation/CoreLocation.h>

@implementation AppDelegate

@synthesize window = _window;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    NSLog(@"didFinishLaunchingWithOptions");
    return YES;
}

- (void)applicationWillResignActive:(UIApplication *)application
{
    NSLog(@"applicationWillResignActive");
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
    NSLog(@"applicationDidEnterBackground");
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    NSLog(@"applicationWillEnterForeground");
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
    NSLog(@"applicationDidBecomeActive");

    if( ![[Logic si] network_is_available] ) {
        [[[UIAlertView alloc] initWithTitle:NSLocalizedString(@"AlertView_error_title", @"") message:NSLocalizedString(@"No_Internet_connection_available",@"") delegate:self cancelButtonTitle:@"Okay" otherButtonTitles:nil] show];
    }

    if( ![CLLocationManager locationServicesEnabled] ) {
        NSLog(@"not locationServicesEnabled");
        [[[UIAlertView alloc] initWithTitle:NSLocalizedString(@"AlertView_error_title", @"") message:NSLocalizedString(@"No_location_management_available",@"") delegate:self cancelButtonTitle:@"Okay" otherButtonTitles:nil] show];
    } else {
        NSLog(@"locationServicesEnabled");
    }
}

- (void)applicationWillTerminate:(UIApplication *)application
{
    NSLog(@"applicationWillTerminate");
}

@end 
```

如果我运行它立即崩溃的应用程序，控制台不会打印任何内容。从 iPhone 上的 xcode 中启动时，我编写的其他应用程序运行良好。

我知道这可能是一切，但你有什么想法可能导致这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T17:31:47.570

你什么都没有`didFinishLaunchingWithOptions:`。这是您需要创建窗口的地方。开始一个全新的项目，例如 Master-Detail，并查看如何在此委托中创建窗口。

## 例子

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];    
    DashboardViewController * dashboard = [[DashboardViewController alloc] init];
    self.navigationController = [[UINavigationController alloc] initWithRootViewController:dashboard];       
    self.window.rootViewController = self.navigationController;    

    [self.window makeKeyAndVisible];

    return YES;
} 
```

# xcode - Xcode 应用程序检索“正在播放”的音乐标题，即使它已暂停

> ID：10374184
> 
> 赞同：0
> 
> 时间：2012-04-29T17:20:00.200
> 
> 标签：xcode, macos, itunes

我正在创建一个 Mac 应用程序，用于检索 iTunes 上“正在播放”音乐的标题。我正在使用这段代码：

```
iTunesApplication *iTunes = [SBApplication applicationWithBundleIdentifier:@"com.apple.iTunes"];
        NSString* fullTrackName = [NSString stringWithFormat:@"Now Playing: %@ - %@", iTunes.currentTrack.artist, iTunes.currentTrack.name];
        NSLog(@"%@", fullTrackName); 
```

如果正在播放音乐，它工作得很好，但如果我暂停 iTunes 并运行代码，它会自动获取音乐名称，即使它没有播放。
我该如何解决？
谢谢你。

顺便说一句，我为此使用了 iTunes.h 和 ScriptingBridge.framework。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T18:43:41.277

您可能需要寻找一个播放器状态属性`iTunesApplication`来为您提供当前轨道的状态。

显然是这样的：

```
if ([iTunes playerState] == iTunesEPlSPlaying) {
    // Code if iTunes is not playing
} 
```

# java - bufferedReader 中的读取行

> ID：10374191
> 
> 赞同：5
> 
> 时间：2012-04-29T17:21:01.773
> 
> 标签：java, bufferedreader

来自 javadoc

```
public String readLine()
            throws IOException

Read a line of text. A line is considered to be terminated by any one of a line feed ('\n'), a carriage return ('\r'), or a carriage return followed immediately by a linefeed. 
```

我有以下类型的文字：

```
Now the earth was formless and empty.  Darkness was on the surface
of the deep.  God's Spirit was hovering over the surface
of the waters. 
```

我正在阅读以下行：

```
 while(buffer.readline() != null){
       } 
```

但是，问题是它正在考虑在换行符之前为字符串设置一行。但我想在字符串以 . 结尾时考虑行`.`。我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T17:28:41.817

您可以使用 a[`Scanner`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html)并使用[`useDelimiter(Pattern)`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#useDelimiter%28java.util.regex.Pattern%29).

请注意，输入分隔符是[regex](http://docs.oracle.com/javase/tutorial/essential/regex/)，因此您需要提供 regex `\.`（您需要打破`.`regex 中字符的特殊含义）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-29T17:25:13.003

您可以一次读取一个字符，并将数据复制到 StringBuilder

```
Reader reader = ...;
StringBuilder sb = new StringBuilder();
int ch;
while((ch = reader.read()) >= 0) {
    if(ch == '.') break;
    sb.append((char) ch);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-29T17:28:08.903

*   使用 a`java.util.Scanner`而不是缓冲阅读器，并将分隔符设置为`"\\."`with `Scanner.useDelimiter()`。（但请注意，分隔符已被消耗，因此您必须再次添加它！）
*   或读取原始字符串并将其拆分为每个`.`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-29T17:28:41.367

您可以将整个文本拆分为 every `.`：

```
String text = "Your test.";
String[] lines = text.split("\\."); 
```

拆分文本后，您会得到一组行。如果您想要更多控制，您也可以使用正则表达式，例如也可以通过`:`or分割文本`;`。只是谷歌它。

PS .：也许您必须首先使用以下内容删除换行符：

```
text = text.replaceAll("\n", ""); 
```

# ios - 如何在 iOS 上同步多个音频文件？

> ID：10374194
> 
> 赞同：1
> 
> 时间：2012-04-29T17:21:13.273
> 
> 标签：ios, audio

我喜欢在 iOS 上将（单次）音频效果与（循环）背景音乐的节拍同步。

我该如何处理该任务？

编辑：所以，为了提供更多细节，假设背景音乐循环超过 4 个小节。我希望能够在下一个第 8 个（或第 16 个或第 4 个......）音符上开始播放另一个音频文件（音频效果）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T18:36:18.507

简单的。将它们放在同一个时间线上（例如音频播放回调），并使用输入速度来确定样本中的度量间隔（或滴答声，如果使用 MIDI 事件）。

**更新**

```
double SamplesPerBeat(const double audioSampleRate,
                      const double beatsPerMinute) {
  assert(8000.0 <= audioSampleRate && 192000.0 >= audioSampleRate);
  assert(20.0 <= beatsPerMinute && 500.0 >= beatsPerMinute);
  return audioSampleRate / beatsPerMinute;
}

uint32_t StartPosition(const double audioSampleRate,
                       const double beatsPerMinute,
                       const uint32_t beatNumber) {
  const double samplesPerBeat = SamplesPerBeat(audioSampleRate, beatNumber);
  return (uint32_t)floor(samplesPerBeat * beatNumber);
} 
```

# c - 用于查找字节顺序问题的静态分析工具？

> ID：10374196
> 
> 赞同：2
> 
> 时间：2012-04-29T17:21:24.763
> 
> 标签：c, endianness

是否有像 lint 这样的工具可以检查 C 代码库中潜在的字节顺序问题？在网络编程或文件传输等数据共享期间检测此类问题的工具可能是不现实的。但是检查指针转换滥用不应该那么难，对吧？

基本上，我想要一个工具来检测类似于以下代码片段的情况。

```
#include <stdio.h>

void bar(char *cp)
{
    *cp = 'c';
}

void foo(int *intp)
{
    bar((char*)intp);
}

int main(void)
{
    int a = 0xAABBCCDD;

    foo(&a);

    printf("a = %d\n", a);

    return 0;
} 
```

任何建议表示赞赏。

# unix - 有没有办法从 Node.js 程序调用 exec(2) 函数？

> ID：10374199
> 
> 赞同：1
> 
> 时间：2012-04-29T17:21:47.937
> 
> 标签：unix, node.js, process

我想用另一个替换我的 Node.js 程序。我是否必须通过调用`child_process.spawn`并为所有事件做正确的事情来解决这个问题，或者有没有办法直接调用`exec(2)`函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T17:31:04.980

糟糕，看起来这是[Like Ruby 'exec' 的副本，但适用于 Node.js？](https://stackoverflow.com/questions/8362181/like-ruby-exec-but-for-node-js). （你能在 Stack Overflow 上将问题标记为重复问题吗？

**回答：** `npm install kexec`

# shell - Emacs 中的 Shell 通过在变量前面 \200\230 来显示变量的名称

> ID：10374200
> 
> 赞同：3
> 
> 时间：2012-04-29T17:21:49.100
> 
> 标签：shell, emacs

当我从 emacs 中的 shell/eshell/term 运行编译指令时，变量的名称在 shell 中显得很奇怪。

这是一个示例代码（有一些随机错误）和我编译时的输出：

```
#include iostream
#include cstdlib

int main (void)
{
cscdsd ;//some random error 
return ;
}
//shell o/p:
g++ new.cc 
new.cc: In function â\200\230int main()â\200\231:
new.cc:7: error: â\200\230cscdsdâ\200\231 was not declared in this scope
new.cc:8: error: return-statement with no value, in function returning â\200\230intâ\200\231
~/codes $ 
```

我发现 \200\230 和 \200\231 表示变量或函数名称的开始和结束。有什么想法会发生什么或如何摆脱它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T22:32:20.390

`\200`是一个八进制转义序列。在十六进制中，`â\200\230`is`E2 80 98`是 U+2018（左单引号）以 UTF-8 编码的方式。同样，`â\200\231`是 U+2019（右单引号）。这就是`g++`发出 UTF-8 并且 Emacs 将其解释为 ISO-8859-1 时发生的情况。

您可能需要设置`default-process-coding-system`为不同的值。尝试（在你的 ~/.emacs 中）：

```
(setq default-process-coding-system '(utf-8-unix . utf-8-unix)) 
```

还有其他方法可以告诉 Emacs 期望什么样的编码系统。阅读变量`default-process-coding-system`&`process-coding-system-alist`和函数`universal-coding-system-argument`&的文档`set-buffer-process-coding-system`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-20T07:20:40.543

文本编码应该是`LANG`环境变量的一部分。
`export LANG=en_US.UTF-8`应该修复。
在 Ubuntu 系统上，将其更改为`/etc/default/locale`.

# spring - Spring Web MVC 和循环动态页面元素

> ID：10374202
> 
> 赞同：2
> 
> 时间：2012-04-29T17:21:58.387
> 
> 标签：spring, spring-mvc, velocity, recurring

我是 java 和 web 应用程序的新手，在尝试了一些东西之后，我使用了一个 Spring webmvc 设置，使用注释和速度作为模板引擎。对控制器方法进行简单的@RequestMapping 注释并返回填充数据的 ModelAndView 实例并不难，但是我想知道当您在每个页面上出现的模型中都有所需的数据时，事情是如何完成的，例如“最新 5 条新闻物品”或类似的东西。当然，您总是可以在 @RequestMapping 处理的每个方法中使用此类数据填充模型，但我很确定这不是这样做的方法。

用重复数据填充模型的正确方法是什么，而不用调用此重复数据的相同方法来污染您的控制器方法。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T18:02:02.473

您可以使用[servlet 过滤器](http://www.oracle.com/technetwork/java/filters-137243.html)或[Spring 拦截器](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#mvc-handlermapping-interceptor)，并从此过滤器或拦截器获取重复数据并将其放置在请求属性中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T19:38:30.583

另一种解决方案是让页面调用多个控制器，例如通过使用多个 ajax 请求。然后一个控制器可以负责特定页面，另一个负责“最新 5 条新闻”，请参阅相关[问题](https://stackoverflow.com/questions/1440084/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T18:08:03.247

好问题伙计。在我当前的应用程序中，我使用会话来存储我的用户名，该用户名出现在应用程序的所有其余部分。

@JB Nizet 感谢您的链接.. 现在我会选择 spring 拦截器

# graph - Graphviz - 节点之间的水平边

> ID：10374204
> 
> 赞同：8
> 
> 时间：2012-04-29T17:22:16.450
> 
> 标签：graph, graphviz, dot

晚上好，我正在尝试使用**graphviz**生成图形。

我不知道如何在某些节点之间建模**水平边缘。**我使用下面的代码来生成这个图：

![图形](../Images/fd8b4f147dbddac60e301d9fc71c9165.png)

```
digraph{ rankdir=LR;
//{rank=same; "[0]"; "[10B1]"; "[62]"; "[8]"; "[9]"; "[10]";}
"[0]"->"[37]"; "[37]"->"[4]"; "[37]"->"[8]";
"[8]"->"[9]"; "[9]"->"[10]"; "[62]"->"[8]";
"[0]"->"[10B1]"; "[10B1]"->"[62]"; "[0]"->"[2]";
"[2]"->"[3]"; "[7]"->"[8]"; "[4]"->"[7]";
} 
```

* * *

我想将节点 [8]、[10B1]、[62] [8]、[9] 和 [10] 对齐在**一条水平线上**。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T17:44:45.783

您需要将这些节点放在一个[集群](http://www.graphviz.org/Gallery/directed/cluster.html)中。在该集群中，您可以`rank=lr`将节点设置为从左到右放置。在将连接边添加到图的其余部分之前，定义集群和所需的节点非常重要。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-29T18:00:24.297

另一种解决方案是让必须对齐的节点共享相同的`group`属性值：

```
digraph{
rankdir=LR;

node[group=main];
"[0]"; "[10B1]"; "[62]"; "[8]"; "[9]";
node[group=""];

"[0]"->"[37]";
"[37]"->"[4]";
"[37]"->"[8]";
"[8]"->"[9]";
"[9]"->"[10]";
"[62]"->"[8]";
"[0]"->"[10B1]";
"[10B1]"->"[62]";
"[0]"->"[2]";
"[2]"->"[3]";
"[7]"->"[8]";
"[4]"->"[7]";
} 
```

`weight`您可以通过调整或使用`constraint=false`某些边缘来实现类似的效果。

这[是另一个使用 group 的示例](https://stackoverflow.com/questions/4671238/forcing-main-line-nodes-into-a-straight-line-in-graphviz-or-alternatives/4673624#4673624)，以及[另一个使用 weight](https://stackoverflow.com/questions/4671238/forcing-main-line-nodes-into-a-straight-line-in-graphviz-or-alternatives/4671684#4671684)的示例（相同的问题）。

# windows - 我可以更改签名的可执行文件

> ID：10374207
> 
> 赞同：0
> 
> 时间：2012-04-29T17:22:55.327
> 
> 标签：windows, uac, code-signing, portable-executable, authenticode

我试图下载一个签名的可执行文件（[http://live.sysinternals.com/procexp.exe](http://live.sysinternals.com/procexp.exe)）并修改它。我认为它无法完成，Windows 会以某种方式阻止我运行它（或至少警告我）。但是当我更改单个字符（例如在 DOS 存根或任何其他文本数据中）时，它仍然可以运行。

在修改之前，当我运行这个应用程序时，它会发出 UAC 警告，显示它已签署 Microsoft 并询问我是否要运行它。修改后就没有了。即使我恢复更改，它仍然不会出现。我已经将修改和恢复的可执行文件与原始文件（总指挥官）进行了比较，它没有显示任何区别。但原著还是泼了UAC。

这是为什么？

我正在使用 Windows 7 和 Firefox。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T07:01:16.113

我从来没有尝试过这样做。然而，当您编辑文件时，数字签名无效，您应该在文件的属性中看到它。

Windows 通常不检查数字签名。当文件被标记为从 Internet 下载时，数字签名开始发挥作用（如果签名有效，Windows 将在确认对话框中显示其发布者；否则，发布者将是未知的）和 UAC（在这种情况下，数字签名还确认文件来自作为数字签名的一部分存储的发布者）。

是否显示 UAC 确认不是由数字签名控制的，而是由应用程序清单控制的。

所以据我了解，应该显示 UAC 对话框。但由于修改后的文件未通过数字签名检查，Windows 可能会认为文件不安全，无法提升。您可以在 Windows 事件日志中查找消息，可能会有解释您看到的行为的事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-09T17:45:56.203

我已将 chrome.exe 复制到其他目录并开始在应用程序中写入随机字节。

我检查了属性，数字签名在那里。我已经更改了应用程序。它无法执行（给出一些内部错误而不是 Windows 错误）但仍然在属性中显示有效证书。真奇怪。

我认为 Windows 只验证应用程序的证书一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-25T01:23:28.510

更改文件后，它仍会显示数字签名，但如果您单击该签名的详细信息按钮，我想您会发现它说签名无效。当我将它改回原来包含的内容时，它再次告诉我签名是有效的。（但是您必须使用编辑器来编辑字节 - 而不是可能会无意中添加换行符或其他内容的编辑器。）

# eclipse - 如何在 JBoss 和 Eclipse RCP 之间共享 OSGi 包？

> ID：10374211
> 
> 赞同：1
> 
> 时间：2012-04-29T17:23:41.663
> 
> 标签：eclipse, jboss, eclipse-plugin, osgi, jboss7.x

我目前正在开发一个应用程序，它有一个基于 JBoss 7.1 上的 JavaEE 6.0 的服务器部分和一个基于 Eclipse RCP 3.7 的客户端。

对于共享 API 的简单 OSGi 包，由于版本和依赖项的一些差异，我已经遇到了麻烦。该 API 需要“ org.osgi.framework.”用于*捆绑激活器，“org.slf4j.* ”用于 slf4j 日志记录 API。

目前我的客户工作得很好，但 JBoss 告诉我 OSGi 导入的预期版本和 slf4j 的导入也不适合......

我有在 Eclipse 和 JBoss 之间共享 OSGi 包的最佳实践吗？我是否需要回到简单的导入和导出声明，或者我可以以某种方式使用 Require-Bundle？我是否需要为 JBoss 创建一些兼容性包才能使其运行？在这里进行的最佳方式是什么？

**更新** 我通过专门使用 Import-Package 解决了这个问题。对于 org.osgi.framework 之类的依赖，使用 version="0.0" 来解释没关系。:-( 这不是很安全，但目前我没有看到其他选择。有更好的方法吗？

**更新 2** 还需要注意实现 OSGi 框架的正确版本。JBoss 7.1.x 只实现了 OSGi 4.2，它不支持类型安全的服务检索。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T21:33:42.537

最佳做法是使用导入包语句，其范围从您正在使用的最低版本到下一个主要增量。

例如，如果 RCP 需要 1.5 版本的包，而 JBoss 需要 1.3.6，则 import version="[1.3.6,2)"。

[语义版本控制白皮书 (pdf)](http://www.osgi.org/wiki/uploads/Links/SemanticVersioning.pdf)解释了为什么这种导入方式是安全且明智的。

# macos - Mac PackageMaker：仅在文件不存在时执行操作

> ID：10374214
> 
> 赞同：1
> 
> 时间：2012-04-29T17:23:54.017
> 
> 标签：macos, installation, packagemaker

**仅当文件不存在**时，如何进行一些条件操作？

我发现要求检查“如果文件存在”而不是“如果文件不存在”。

也许在预安装检查中使用苹果脚本？

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T22:29:47.170

这是一个例子......

```
set someFile to (path to desktop as text) & "sample.txt"

tell application "Finder"
    if not (exists file someFile) then
        -- do something here
    end if
end tell 
```

# javascript - 使用 CouchDB 和 IrisCouch 的 iOS 回合制多人游戏

> ID：10374225
> 
> 赞同：4
> 
> 时间：2012-04-29T17:25:05.857
> 
> 标签：javascript, ios, nosql, couchdb

我和我的初创应用程序公司正在开发一款基于回合制的多人 iPhone 应用程序。可以说我们谁都没有任何数据库或服务器知识。虽然，我们愿意学习。

游戏流程将类似于：WordFeud、WordsWithFriends、Rumble 等游戏。

让我从网络上的大量搜索让我们开始：

我们决定使用[CouchDB](http://couchdb.apache.org/)作为存储有关用户、游戏会话和其他内容的信息的工具。CouchDB 是一个开源的 noSQL 数据库系统。原因是我们被教导，它应该支持很多不同意的用户。此外，它可以扩展——我们当然希望做大。

我们的 CouchDB 托管在[IrisCouch](http://www.iriscouch.com/)上。IrisCouch 是为运行 CouchDb 而设计的“云端”托管服务。

因此，我们已经启动并运行了一个 CouchDB 服务器，并且我们知道如何从服务器查询数据的基础知识。

我们现在最大的困惑是我们应该如何设置系统以根据最佳实践工作。现在，我们能够接收数据并将数据提交到服务器。

我们的游戏应该有 Facebook 集成，以便用户可以通过我们的应用程序或通过 Facebook 注册。之后，他们可以与随机匹配的对手一起玩，或与朋友一起玩。比赛开始后，一名球员会收到一组要问的问题，在他回答后，应通过推送通知通知另一名球员轮到他们了。几回合后游戏结束。

在这一点上，我们认为这可能是应用程序流程的最佳解决方案：

1.  一个用户连接到另一个用户 -> 一个游戏会话作为一个名为“游戏”的数据库中的文档打开。
2.  新创建的文档包含玩家姓名、问题、答案等
3.  一个名为“whos_turn”的字段决定了两个玩家中的哪一个轮到它。
4.  游戏结束后，会话被删除。

同样，正如您所看到的，我们对如何真正做到这一点一无所知，但这是一般的想法。

所以，我的问题如下：

**是直接从 iPhone 应用程序查询数据，还是通过 Web 服务查询数据最好？**

**设置数据库以最好地管理应用程序流的最佳方式是什么？**

任何可能使我们更接近的信息将不胜感激:)

先谢谢了！

奥拉夫·冈德森

* * *

**编辑#1：我们的 Objective-C 程序员设法使用 CouchDb 连接两个 iPhone 设备。iPhone 应用程序包含一个表视图，该表视图与数据库有并发连接，因此当有人 POST 到数据库时，它会显示在所有其他已连接手机的表视图上。看哪：一个严重无效的聊天系统。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T04:31:23.713

如果是多人游戏，您需要让应用程序与远程 iriscouch.db 通信，但我担心您声明您或您的朋友都没有任何数据库经验。你愿意学习，所以我认为最好的起点是：

[http://guide.couchdb.org/editions/1/en/index.html](http://guide.couchdb.org/editions/1/en/index.html)

如果您计划连续擦除文档，您可能会发现可扩展性存在几个问题。数据库大小在 couchdb 上可能相当大，您需要定期压缩和清理数据库。但我认为目前还不是主要问题，因为这还处于起步阶段。

您的团队应该解决*“设置数据库和最佳管理应用程序流程的最佳方式”*的问题。如果您没有*任何*数据库经验的人，您应该尝试找到愿意帮助您的人。应该是在数据库方面有丰富经验的人。[您可能会在http://www.odesk.com](http://www.odesk.com)找到一些相当合理的专业人士

老实说，如果你没有这样的人物——无论是作为自由职业者还是贡献者——来帮助你在游戏中拥有可靠的数据库逻辑，以确保出色的用户体验，我认为你不会成功。

例如：您是否考虑过使用位于美国 (Iriscouch) 的数据库与您的用户所在位置的延迟问题？

出于这个原因，您可能希望尽可能多地做客户端（嵌入式数据库，如 sqlite 或 touchDB，本质上是 iPhone 的 couchDB）

[对于 iPhone 应用程序，您可能想尝试专门为https://github.com/couchbaselabs/TouchDB-iOS](https://github.com/couchbaselabs/TouchDB-iOS)制作的 TouchDB （注意：您需要连接来检查转弯等，这可能不是理想的解决方案，但它可以在本地存储一些信息）。

要解决这个问题，您需要有 couchdb 经验的人来设置一个合适的、可用的应用程序。对您的想法充满热情并没有错，但要使其成功，您需要数据库方面的技术头脑。当然，您自己也可以很好地学习这一点。阅读 CouchDB 书籍后，您应该能够创建一个基本流程来满足您的需求。

当然，其他更有经验的用户可能会提供更全面的答案或示例布局，但我认为这不是最好的方法。即使有人发布了文档结构的完整布局以及如何查询它，如果出现问题，例如会话没有被删除、冲突等，你将如何为应用程序提供服务？因此，我真诚地建议您为您的案例获得一些特别的专业知识。

这也可能导致分析合适的替代方案。我认为您不应该相信 CouchDB 可以扩展，因此是您最好/唯一的选择（当然，如果您觉得这是一个不错的选择，那就去吧）。例如 twitter、google adwords 和许多其他在线应用程序都使用 mysql 来存储它们的数据，因此可以肯定 CouchDB 不是唯一可以扩展的数据库！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T14:57:30.260

我认为这个演示应用程序可能是一个很好的例子：[iOS Couchbase Demo](https://github.com/couchbaselabs/iOS-Couchbase-Demo)

# java - Android：自定义 Facebook 集成

> ID：10374226
> 
> 赞同：0
> 
> 时间：2012-04-29T17:25:07.200
> 
> 标签：java, android, facebook

我需要一些建议来解决这个问题...我使用 facebook android sdk 从我的应用程序创建与 facebook 的集成...我遵循了本教程： http: [//www.integratingstuff.com/2010/10/14/integrating -facebook-into-an-android-application/](http://www.integratingstuff.com/2010/10/14/integrating-facebook-into-an-android-application/)

我需要在一个活动中实现身份验证，在另一个活动中实现功能 postToWall ......在身份验证后，我想通过按下按钮发送帖子，但在其他活动中，与我进行身份验证的活动不同。

可能吗？还是使用 SDK 我被迫在同一个活动中一起做所有事情？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T17:38:29.970

您需要安装一个扩展，类似于核心 Android SDK，但不，这是您需要做的：

1.) 访问 github.com/facebook/facebook-android-sdk

2.) 只下载 facebook 目录！其他目录只是示例。

3.) 将 src 中的文件（如果需要，您也可以复制可绘制对象）放入您当前正在使用的包中

4.) 你很好，你可以使用 facebook "SDK"

另请参阅此示例[https://github.com/facebook/facebook-android-sdk/tree/master/examples/Hackbook](https://github.com/facebook/facebook-android-sdk/tree/master/examples/Hackbook)下载它，它是 facebook 提供的工作示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T17:27:52.767

对的，这是可能的。您将获得一个访问令牌，您可以将其发送到下一个活动。使用 getAccessToken() 和 setAccessToken()。

这是一个甚至保存所需数据的示例：[Contact-Picture-Sync](https://github.com/heinrisch/Contact-Picture-Sync/blob/master/src/heinrisch/contact/picture/sync/Main.java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T18:04:38.760

just to provide an alternative answer, there's other ways of implementing sharing on Android.

It allows for more sharing options (like Twitter, QR-Barcodes, blogging and whatnot) without having to deal with the facebook android sdk.

What you would use is a "share" intent, like so:

```
String title = "My thing"; // used if you share through email or channels that require a headline for the content, always include this or some apps might not parse the content right

String wallPost = "Hey - check out this stuff: http://link.com "; // the content of your wallpost

String shareVia = "Share this stuff via"; // the headline for your chooser, where the phones avaliable sharing mechanisms are offered. 

Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND);
            shareIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            shareIntent.setType("text/plain");

shareIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, title);

shareIntent.putExtra(android.content.Intent.EXTRA_TEXT, wallPost);

startActivity(Intent.createChooser(shareIntent, shareVia)); 
```

This is by far the preferred solution on Android if you're looking for simple sharing, as it makes your app future-compatible with new services. And more lean and flexible for the user too, as there's little to no friction from hitting the share button to posting content.

It can also be seen in this blog post: [http://android-developers.blogspot.com/2012/02/share-with-intents.html](http://android-developers.blogspot.com/2012/02/share-with-intents.html)

I hope you can use this for your project.

# c++ - 具有右值引用的 C++ 构造函数

> ID：10374235
> 
> 赞同：8
> 
> 时间：2012-04-29T17:25:48.853
> 
> 标签：c++, constructor, c++11, rvalue-reference

考虑这个具有三个构造函数的类：

```
class Circle {

public:
 Circle(int r) {
      _radius = r;
 }

Circle(const Circle& c){
    _radius = c.radius();
    cout << endl << "Copy constructor with lvalue reference. Radius: " << _radius;
}

Circle(Circle&& c){
    _radius = c.radius();
    cout << endl << "Copy constructor with rvalue reference. Radius:" << _radius;
}

int radius() const {
    return _radius;
}

private:
    int _radius;
};

int main() {
     Circle c1(2);
     Circle c2(c1);
     cout << endl << c2.radius(); 
     Circle c3(Circle(4));
     cout << endl << c3.radius(); 
     return 0;
 } 
```

用“g++ -std=c++0x”编译。输出是：

```
Copy constructor with lvalue reference. Radius: 2
2
4 
```

好的。前两种情况的正确构造函数被调用。但是对于第三种情况，即 Circle c3(Circle(4))，我希望调用第三个构造函数（具有右值引用的复制构造函数），但事实并非如此。显然，由于 c3 已正确实例化，因此调用了一些构造函数，但我不明白为什么编译器不使用显式提供的构造函数。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-29T17:56:02.697

没有调用移动构造函数，因为您的编译器对于您的代码来说太聪明了；）

```
 Circle c1(2); 
```

这只是用`int`转换构造函数构造一个对象。

```
 Circle c2(c1); 
```

这是一个复制操作。`c1`是一个左值，所以它会引发一个副本。

```
 Circle c3(Circle(4)); 
```

在这里，您的编译器认识到您基本上是在告诉它构造对象两次。所以它*省略*了一个对象构造函数。在这种情况下，C++ 规范允许这样做。

如果您的编译器无法省略构造，那么它将执行移动。此外，如果您的编译器无法忽略*它*，请将其丢弃。

所以没有任何进展。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-29T17:28:36.197

为了获取右值引用，它应该是非常量的，因为构造函数参数的内容将被移动，并且通常这是一个更改操作数状态的操作（尽管不是在您的特定情况下）：

```
Circle(Circle&& c){ } 
```

此外，您在这里看到了复制省略：

```
Circle c3(Circle(4)); 
```

所以移动构造函数不会被调用。这是一个标准的编译器优化，可能会发生也可能不会发生。如果你要构建一个`Circle`这样的：

```
Circle c3(std::move(c1)); 
```

然后你会调用移动构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-23T11:29:06.153

新的编译器有一个称为 RVO（返回值优化）的特性，并尽量避免无用的副本。在 g++ 中，如果您在编译命令中放置 -fno-elide-constructors 标志，它将避免它。然而，在您的情况下，即使使用此抑制编译器标志，它也会保留省略复制构造函数并移动构造函数。如果您想查看如何调用您的 r-value 构造函数，请按如下方式使用它并使用上面的标志编译它：

```
Circle MakeACircle(int r) {
      Circle temp(r);
      return temp;
} 
```

# javascript - 自动将事件处理程序分配给新元素

> ID：10374239
> 
> 赞同：2
> 
> 时间：2012-04-29T17:26:18.257
> 
> 标签：javascript, jquery, event-handling

假设我有一些这样的代码被调用`$(document).ready()`

```
$(".someClass").click(function(){
    //do something 
}); 
```

后来我有一些 jquery 来创建一个带有 class 的元素`someClass`。无论如何要从上面自动附加点击还是我必须再次手动附加它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T17:28:45.280

是的。有可能的。

```
$("body").on("click", ".someClass", function() {
    // ...
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T17:28:58.273

使用最新版本的 jquery 和`on`

```
$(document).on('click', '.someClass', function(e){
    //do something 
}); 
```

`Live`已弃用，但无论如何您都可以使用它（不推荐）。

```
$('.someClass').live('click', function(e){
    //do something 
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T17:28:04.903

There is `live`，它也监听新元素

```
$(".someClass").live('click', function(){
    //do something 
}); 
```

但是，从 jquery 1.7 开始，它已被弃用。建议`on`改用。

但是为了使用`on`，您需要一个容器来存放要绑定处理程序的元素。当然你可以使用`body`or`document`但最好使用更具体的元素

```
$(".someClassContainer").on('click', '.someClass' function(){
        //do something 
    }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-29T17:28:18.790

有两种简单的方法可以做到这一点，第一种是使用`on()`：

```
$(".someClassParentElementPresentInTheDOMonDOMReady").on('click','.someClass',
    function(){
        //do something 
    }); 
```

另一种是在创建新元素时简单地分配点击处理程序；我不知道你是怎么做到的，但下面是一个例子：

```
$('#addElement').click(
    function(){
        var newElem = $('<div />',{'class' : 'someClass'}).click(function(){
            // do something }).appendTo('.someClassParentElementPresentInTheDOMonDOMReady'); 
```

参考：

*   [`on()`](http://api.jquery.com/on/).

# c++ - C++ Win32 通过电子邮件或网络浏览器发送消息

> ID：10374240
> 
> 赞同：1
> 
> 时间：2012-04-29T17:26:28.700
> 
> 标签：c++, winapi, message

我不知道哪种方法更容易，所以我要求更简单的方法。如何在 win32 中发送电子邮件或打开如下链接：www.wp.com/?text=message 但不向用户显示浏览器？我是win32的新手，请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T17:34:53.223

您可以简单地使用 WinHttp api 打开 http url www.wp.com/?text=message。这不会打开浏览器，也会发送电子邮件。我假设您可以完全控制 www.wp.com 的管理，以便它可以从服务器发送电子邮件。

请参阅此获取 WinHttp 帮助：http: [//msdn.microsoft.com/en-us/library/aa383138%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/aa383138%28VS.85%29.aspx)

# import - VMware ESXi 4.1：如何从 U 盘复制机器？

> ID：10374241
> 
> 赞同：-1
> 
> 时间：2012-04-29T17:26:45.847
> 
> 标签：import, usb, vmware, virtual-machine, esxi

我想摆脱我的旧 ESX 服务器（安装了操作系统）并将机器移动到 ESXi 服务器。我将我的机器复制到 USB 磁盘上，但 ESXi 4.1 似乎没有检测到 USB 磁盘。有没有办法“挂载”或其他方式从 VMware 访问 USB 驱动器？

USB 盘是用 ext3 文件系统格式化的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-14T16:34:12.030

最后，我们必须这样做：

*   创建临时 ESXi
*   创建安装了 Windows 7 并具有足够磁盘空间的 PC

解决方案是：

*   禁止所有快照
*   关闭 ESX 服务器
*   将 VM 文件复制到装有 Windows 7 的 PC
*   在装有 Windows 7 的 PC 上安装 vmware-converter
*   从以临时 ESXi 服务器为目标的本地文件转换...只有这样，才能将它们复制到新的 ESXi 服务器（这是旧的 ESX 服务器，重新格式化）。

顺便说一句，一个重要的建议：不要将您的虚拟机转换为太新的版本，否则您将无法再从 ESXi 客户端修改它们，您必须安装 vSphere 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-13T11:18:57.977

注意事项：

1) 访问 ESXi 内外部连接的 USB 闪存或磁盘驱动器，其中可以看到存储在磁盘上的 VM 映像，需要禁用 USB 仲裁器，该仲裁器使 USB 驱动器可用于 USB 直通。请参阅[https://kb.vmware.com/s/article/1038228](https://kb.vmware.com/s/article/1038228)，了解禁用 USB 直通的过程，并在连接外部 USB 驱动器之前执行此操作以获得最佳效果。

2）您说您复制了“使用 ext3 文件系统格式化”的“USB 磁盘上的机器”。这只能在虚拟机内部完成，因为 ESXi 不支持 ext3 文件系统，甚至不支持 FAT32（至少 ESXi 6.5 以及由于 FAT32 的专利问题可能更高版本）。它确实支持 FAT16 和用于保存虚拟机的专有 VMFS 文件系统。

这该怎么做：

1.  关闭要复制的所有 VM。
2.  禁用 USB 直通（见上文），然后连接您的 USB 磁盘。
3.  访问 ESXi 命令行并使用 VMFS (Google vmfstools) 格式化您的 USB 磁盘。
4.  确认您可以在 USB 磁盘上放置一个小文本文件，并在将其与旧主机分离之前将其从磁盘上移开。“cd away”的目的类似于在 Windows 上分离 USB 磁盘之前所需的过程。
5.  在新主机上禁用 USB 直通并连接 USB 磁盘并验证您是否可以读取文本文件。然后 cd 离开磁盘并将其分离并返回旧主机。
6.  使用 cp 复制您的 VM，然后 cd 从 USB 磁盘等中取出。

FWIW 我确信这样做是不受支持的，但如果你小心并且 USB 磁盘足够大，它应该可以工作。同样的情况是，如果您有一个集群，使用 Storage vMotion 会容易得多，但小商店可能没有那么奢侈。祝你好运！

# symfony - Symfony2：捆绑结构

> ID：10374242
> 
> 赞同：0
> 
> 时间：2012-04-29T17:26:46.900
> 
> 标签：symfony, structure, bundles

我当前的包结构是这样的：

1.  Acme/CoreBundle
2.  Acme/ImageBundle
3.  Acme/SecurityBundle
4.  Acme/UserBundle
5.  Acme/GroupBundle

CoreBundle 拥有家庭、联系和印记等边缘功能。现在我想将 ImageBundle（以及后来的其他全局服务）合并到 CoreBundle 中。合并后 CoreBundle 太大且令人困惑，所以我想将边缘功能放在其他地方。问题是在哪里？

我应该将它们放入 EdgeBundle 中吗？您将主要的低逻辑边缘文件存储在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T17:54:02.100

查看两个相关问题以及我对它们的回答：

*   [Symfony2 概念问题：一般捆绑包与特定捆绑包](https://stackoverflow.com/questions/8012191/symfony2-conceptual-issue-general-bundles-vs-specific-ones)
*   [Symfony 2 中的所有东西都应该是一个捆绑包吗？](https://stackoverflow.com/questions/9999433/should-everything-really-be-a-bundle-in-symfony-2)

# css - 使用 CSS 将图标与文本（RTL 站点）右侧对齐

> ID：10374245
> 
> 赞同：1
> 
> 时间：2012-04-29T17:27:06.153
> 
> 标签：css, wordpress, hebrew, right-to-left, background-position

我正在开发一个从右到左对齐的网站（希伯来语），并希望图标出现在文本的右侧。例如： http: [//kaptinlin.com/themes/striking/shortcodes/typography/](http://kaptinlin.com/themes/striking/shortcodes/typography/)在底部的联系我们小部件，图标在左边，我想要它在右边。

以下是相关代码（HTML）：

```
<section id="contact_info-3" class="widget widget_contact_info">
    <h3 class="widgettitle">Contact Us</h3>

    <p><span class="icon_text icon_phone default">(+40) 111 222 333</span></p>

    <p class="contact_address">
        <span>city,&nbsp;state</span>
        <span class="contact_zip">1111</span>
    </p>
    </div>
</section> 
```

CSS：

```
.icon_text {
    padding:               0 22px 0 0;
    background-image:      url("http://kaptinlin.com/themes/striking/wp-content/themes/striking/images/icons.png");
    background-repeat:     no-repeat;
    background-attachment: scroll;
    background-color:      transparent;
}

#footer .icon_text.default {
    background-image: url("http://kaptinlin.com/themes/striking/wp-content/themes/striking/images/footer_icons.png");
}

.icon_globe {
    background-position: -390px 0px;
}

.icon_home {
    background-position: -360px -30px;
}

.icon_email {
    background-position: -330px -60px;
}

.icon_user {
    background-position: -300px -90px;
}

.icon_multiuser {
    background-position: -270px -120px;
}

.icon_id {
    background-position: -240px -150px;
}

.icon_addressbook {
    background-position: -210px -180px;
}

.icon_phone {
    background-position: -180px -210px;
}

.icon_link {
    background-position: -150px -240px;
}

.icon_chain {
    background-position: -120px -270px;
}

.icon_calendar {
    background-position: -90px -300px;
}

.icon_tag {
    background-position: -60px -330px;
}

.icon_download {
    background-position: -30px -360px;
}

.icon_cellphone {
    background-position: 1px -390px;
}

.icon_text.default {
    background-image: url("http://kaptinlin.com/themes/striking/wpcontent/themes/striking/images/icons_black.png");
}

.icon_text.black {
    background-image: url("http://kaptinlin.com/themes/striking/wp-content/themes/striking/images/icons_black.png");
}

.icon_text.gray {
    background-image: url("http://kaptinlin.com/themes/striking/wp-content/themes/striking/images/icons_gray.png");
}

.icon_text.red {
    background-image: url("../images/icons_red.png");
}

.icon_text.orange {
    background-image: url("http://kaptinlin.com/themes/striking/wp-content/themes/striking/images/icons_orange.png");
}

.icon_text.magenta {
    background-image: url(http://kaptinlin.com/themes/striking/wp-content/themes/striking/images/icons_magenta.png);
}

.icon_text.yellow {
    background-image: url("http://kaptinlin.com/themes/striking/wp-content/themes/striking/images/icons_yellow.png");
}

.icon_text.blue {
    background-image: url("http://kaptinlin.com/themes/striking/wp-content/themes/striking/images/icons_blue.png");
}

.icon_text.pink {
    background-image: url("http://kaptinlin.com/themes/striking/wp-content/themes/striking/images/icons_pink.png");
}

.icon_text.green {
    background-image: url("http://kaptinlin.com/themes/striking/wp-content/themes/striking/images/icons_green.png");
}

.icon_text.rosy {
    background-image: url("http://kaptinlin.com/themes/striking/wp-content/themes/striking/images/icons_rosy.png");
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T22:12:21.530

简而言之，您的图标`background-image`需要调整`padding`,`background-position`和`text-align`属性以将其从左侧移动到右侧。

你需要做一些调整。首先，您需要确保将填充设置为右侧而不是左侧。然后你需要调整`background-position`把图标放在右边：

```
.icon_text {
    padding: 0 22px 0 0; /* changed from 0 0 0 22px on live site*/
    background-image: url("http://kaptinlin.com/themes/striking/wp-content/themes/striking/images/icons.png");
    background-repeat: no-repeat;
    background-attachment: scroll;
    background-color: transparent;
}

.contact_info_wrap .icon_text, .contact_info_wrap .contact_address {
    padding-right: 26px; /* changed from padding-left on live site */
}

.icon_phone { /* obviously you would change each of the icons as necessary */
    background-position: -72px -210px; /* changed from -180px -210px */
} 
```

但是，这样做会导致您的图标在右侧彼此不一致。因此，您需要通过调整`p`标签来将文本右对齐：

```
.contact_info_wrap p {
    margin-bottom: 5px;
    text-align: right; /* add this */
} 
```

我猜你也希望你的标题是这样对齐的：

```
#footer h3.widgettitle {
    color: #FFFFFF;
    font-size: 24px;
    text-align: right; /* add this */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T04:34:05.877

如果您在 rtl 问题上需要任何进一步的帮助，请访问 Striking 支持论坛，我们将为您提供帮助。RTL 通常很简单。我们可以为您提供将所有正文文本移动到 rtl 的代码，并协助处理您不确定元素移动的任何特定元素。

# python - 生日悖论列表是非类型的

> ID：10374256
> 
> 赞同：4
> 
> 时间：2012-04-29T17:28:23.640
> 
> 标签：python, birthday-paradox

我正在尝试用 Python 解决生日悖论。我很接近，但最后一块让我不知所措。我正在使用 random 来生成给定范围和要创建的项目数量的数字列表。这样可行。

然后我检查一个列表（上面生成的）是否有重复项。这样可行。

然后我尝试生成给定的 (n) 个列表。这是我遇到麻烦的地方。它生成一个列表然后返回“NoneType”是不可迭代的。令我困惑的是，列表已生成，但 Python 并未将其视为列表。

这是代码：

```
def make_bd(n, r):
    """Generates (r) numbers of birthdays in a range (n)."""
    import random
    t = [random.randrange(n) for i in range(r)]
    print (t)

def has_dupe(test):
    """Here I test to see if I can detect a duplicate birthday.
This is based on problem #4."""

    d = []
    count = 0
    for number in test:
        if number in d:
            count = count + 1
        d.append(number)
    if count >= 1:
        return True
    return False

def dupebd(n,r,t):
    count_dupe = 0
    for i in range(n):
        if has_dupe(make_bd(r,t)):
            count_dupe = count_dupe + 1
    print (float(count)/n)       

dupebd(50,365,23) 
```

结果如下：

```
>>> has_dupe(make_bd(50,6))
[13, 3, 8, 29, 34, 44]
Traceback (most recent call last):
  File "<pyshell#45>", line 1, in <module>
    has_dupe(make_bd(50,6))
  File "<pyshell#44>", line 7, in has_dupe
    for number in test:
TypeError: 'NoneType' object is not iterable 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T17:30:50.853

在第 5 行中，您打印`t`但不返回它，因此`make_bd`返回`None`. 将行更改为

```
return t 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T18:08:24.530

```
from random import randint

def make_bd(n, d):
    """Generates n birthdays in range(d)."""
    return [randint(1, d) for _ in xrange(n)]

def has_dupe(bd):
    """Test to see if list of birthdays contains one or more duplicates.
        This is based on problem #4.
    """
    return len(set(bd)) < len(bd)

def dupe_bd(n, d, t):
    dupes = sum(has_dupe(make_bd(n,d)) for _ in xrange(t))
    return dupes/float(t)

def exactProbability(n, d):
    probUnique = 1.0
    d = float(d)
    for i in xrange(n):
        probUnique *= (d - i)/d
    return 1.0 - probUnique

for n in xrange(18,26):
    print("{:d} people: {:0.4f} probability of shared birthday (exact: {:0.4f})".format(n, dupe_bd(n, 365, 1000), exactProbability(n, 365))) 
```

给

```
18 people: 0.3640 probability of shared birthday (exact: 0.3469)
19 people: 0.3790 probability of shared birthday (exact: 0.3791)
20 people: 0.4020 probability of shared birthday (exact: 0.4114)
21 people: 0.4070 probability of shared birthday (exact: 0.4437)
22 people: 0.4720 probability of shared birthday (exact: 0.4757)
23 people: 0.4980 probability of shared birthday (exact: 0.5073)
24 people: 0.5290 probability of shared birthday (exact: 0.5383)
25 people: 0.5450 probability of shared birthday (exact: 0.5687) 
```

# objective-c - 在 iOS 中只初始化一个对象一次

> ID：10374257
> 
> 赞同：1
> 
> 时间：2012-04-29T17:28:24.393
> 
> 标签：objective-c, ios, xcode

我正在尝试显示一个在单独的类中编码的股票消息，我正在以下面的方式使用该类

当我在 xcode 中运行时，下面的代码在当前视图中显示了 iphone 模拟器中的自动收报机消息

```
#import "CLTickerView.h" //imported ticker message class

- (void)viewDidLoad
{
   CLTickerView *ticker = [[CLTickerView alloc] initWithFrame:CGRectMake(30, -3, 80, 40)];

   ticker.marqueeStr = @"OLD Ticker msg goes here";

   ticker.marqueeFont = [UIFont boldSystemFontOfSize:16];
   [self.view addSubview:ticker];

} 
```

我想通过一个按钮更改股票信息和位置，我正在使用下面的代码

```
- (IBAction)changeTitleAndPosition:(id)sender {
{
   CLTickerView *ticker = [[CLTickerView alloc] initWithFrame:CGRectMake(10, 10, 20, 50)]; //i want to change the position here

   ticker.marqueeStr = @"NEW Ticker msg goes here"; //i want to change msg here

   ticker.marqueeFont = [UIFont boldSystemFontOfSize:16];
   [self.view addSubview:ticker];

} 
```

但是当我点击按钮时，它每次都会创建重复的股票信息，我们是否可能只能更改信息和位置？

我知道当我单击按钮时，它每次都会创建新对象并显示重复的消息。但我不知道如何在 viewDidLoad 中初始化对象一次并从任何按钮或操作更改消息的标题和位置。

请向我建议可能的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T17:55:42.637

答案很简单：只要您有对代码和活动实例的引用，您就可以更改它的属性而无需创建新实例。将 CLTickerView 声明为调用类的属性。

# mysql - 我怎样才能确保防火墙没有停止 MYSQL

> ID：10374260
> 
> 赞同：0
> 
> 时间：2012-04-29T17:28:33.690
> 
> 标签：mysql, networking, firewall

我可以使用命令行工具访问 MYSQL，但不知何故我无法使用 Liferay 访问 MYSQL 数据库。

在服务器启动期间，它说 Connection Refused 。

现在我的问题是，我怎样才能确保防火墙没有阻止它？

我正在使用 WINdows XP MYSQL 5.1 可以请任何人告诉我这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T17:33:13.590

1.  您可以将例外添加到防火墙列表
2.  要确保您的防火墙对其进行了限制，请尝试禁用防火墙一次，然后使用该服务并验证是否接受连接。

# c# - 使用 SDK 为 MS Project 2010 开发

> ID：10374267
> 
> 赞同：2
> 
> 时间：2012-04-29T17:28:51.970
> 
> 标签：c#, asp.net, ms-project

我正在尝试使用 Project 2010 SDK 为 Microsoft Project 2010 开发，但我在互联网上没有找到太多文档，有没有人以前测试过这个工具包？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T06:06:46.560

对于 Project Server 2010，请查看[http://technet.microsoft.com/en-us/projectserver/ee263909.aspx](http://technet.microsoft.com/en-us/projectserver/ee263909.aspx)

# java - 无法在 xml 文件中使用 com.google.android.maps

> ID：10374269
> 
> 赞同：0
> 
> 时间：2012-04-29T17:29:00.253
> 
> 标签：java, android, xml, eclipse, maps

我正在设计一个使用谷歌地图的应用程序。为了获取地图，我使用了以下代码：

```
 com.google.android.maps.MapView
    android:id="@+id/mapview" android:layout_width="fill_parent"
    android:layout_height="wrap_content" android:clickable="true"
    android:apiKey="0V1xMgGND8LqWx0wO3Vkgs8Rj27aVCRp0biowfw" /> 
```

在 xml 文件中，但应用程序强制在运行后关闭。

如果我不使用这部分，那么其余代码都可以正常执行。

1.  使用 google APIs 2.3 作为目标
2.  sdk 版本 1.6
3.  使用 Eclipse IDE for Java Developers 版本：Indigo Service Release 2 Build id：20120216-1857
4.  我已将应用程序标记放入清单文件中。
5.  我什至使用了权限

*但是，我可以编译它而没有任何错误，但无法运行它。我实在想不通。这是 logcat 生成的日志。我可以从任何人那里得到一些帮助...？*

```
 04-29 22:14:32.553: D/dalvikvm(415): GC_CONCURRENT freed 261K, 48% free
    2963K/5639K, external 411K/517K, paused 5ms+5ms
   04-29 22:14:32.863: D/dalvikvm(415): GC_CONCURRENT freed 447K, 49% free
    3086K/5959K, external 411K/517K, paused 5ms+7ms
   04-29 22:14:33.133: D/dalvikvm(415): GC_CONCURRENT freed 326K, 46% free
    3271K/6023K, external 411K/517K, paused 5ms+6ms
   04-29 22:14:33.203: D/AndroidRuntime(415): Shutting down VM
   04-29 22:14:33.203: W/dalvikvm(415): threadid=1: thread exiting with uncaught
    exception (group=0x40015560)
   04-29 22:14:33.303: E/AndroidRuntime(415): FATAL EXCEPTION: main
   04-29 22:14:33.303: E/AndroidRuntime(415): java.lang.RuntimeException: Unable to
    start activity ComponentInfo{com.my.map/com.my.map.MapActivity}:
    android.view.InflateException: Binary XML file line #6: Error inflating class
    com.google.android.maps.MapView
  04-29 22:14:33.303: E/AndroidRuntime(415): 
  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
  04-29 22:14:33.303: E/AndroidRuntime(415): 
  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
  04-29 22:14:33.303: E/AndroidRuntime(415): 
  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
  04-29 22:14:33.303: E/AndroidRuntime(415): 
  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
  04-29 22:14:33.303: E/AndroidRuntime(415): 
  at android.os.Handler.dispatchMessage(Handler.java:99)
  04-29 22:14:33.303: E/AndroidRuntime(415): 
  at android.os.Looper.loop(Looper.java:130)
  04-29 22:14:33.303: E/AndroidRuntime(415): 
  at android.app.ActivityThread.main(ActivityThread.java:3683)
  04-29 22:14:33.303: E/AndroidRuntime(415): 
  at java.lang.reflect.Method.invokeNative(Native Method)
  04-29 22:14:33.303: E/AndroidRuntime(415): 
  at java.lang.reflect.Method.invoke(Method.java:507)
  04-29 22:14:33.303: E/AndroidRuntime(415): 
  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run
     (ZygoteInit.java:839)
  04-29 22:14:33.303: E/AndroidRuntime(415): 
  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
  04-29 22:14:33.303: E/AndroidRuntime(415): 
  at dalvik.system.NativeStart.main(Native Method)
  04-29 22:14:33.303: E/AndroidRuntime(415): Caused by: android.view.InflateException:
       Binary XML file line #6: Error inflating class com.google.android.maps.MapView
  04-29 22:14:33.303: E/AndroidRuntime(415):    
       at android.view.LayoutInflater.createView(LayoutInflater.java:518)
  04-29 22:14:33.303: E/AndroidRuntime(415): 
  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570)
  04-29 22:14:33.303: E/AndroidRuntime(415): 
  at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
  04-29 22:14:33.303: E/AndroidRuntime(415): 
  at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
  04-29 22:14:33.303: E/AndroidRuntime(415): 
  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
  04-29 22:14:33.303: E/AndroidRuntime(415): 
  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
  04-29 22:14:33.303: E/AndroidRuntime(415): 
  at com.android.internal.policy.impl.PhoneWindow.setContentView
       (PhoneWindow.java:207)
  04-29 22:14:33.303: E/AndroidRuntime(415): 
  at android.app.Activity.setContentView(Activity.java:1657)
  04-29 22:14:33.303: E/AndroidRuntime(415): 
  at com.my.map.MapActivity.onCreate(MapActivity.java:17)
  04-29 22:14:33.303: E/AndroidRuntime(415): 
  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
  04-29 22:14:33.303: E/AndroidRuntime(415): 
  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
  04-29 22:14:33.303: E/AndroidRuntime(415):    
         ... 11 more
  04-29 22:14:33.303: E/AndroidRuntime(415): Caused by:
       java.lang.reflect.InvocationTargetException
  04-29 22:14:33.303: E/AndroidRuntime(415): 
  at java.lang.reflect.Constructor.constructNative(Native Method)
  04-29 22:14:33.303: E/AndroidRuntime(415): 
  at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
  04-29 22:14:33.303: E/AndroidRuntime(415): 
  at android.view.LayoutInflater.createView(LayoutInflater.java:505)
  04-29 22:14:33.303: E/AndroidRuntime(415):    ... 21 more
  04-29 22:14:33.303: E/AndroidRuntime(415): Caused by:
      java.lang.IllegalArgumentException: MapViews can only be created insideinstances
         ofMapActivity.
  04-29 22:14:33.303: E/AndroidRuntime(415): 
  at com.google.android.maps.MapView.<init>(MapView.java:291)
  04-29 22:14:33.303: E/AndroidRuntime(415): 
  at com.google.android.maps.MapView.<init>(MapView.java:264)
  04-29 22:14:33.303: E/AndroidRuntime(415): 
  at com.google.android.maps.MapView.<init>(MapView.java:247)
  04-29 22:14:33.303: E/AndroidRuntime(415):  
    ... 24 more
 04-29 22:14:45.193: I/Process(415): Sending signal. PID: 415 SIG: 9** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T18:24:14.320

尝试不要将“wrap_content”用于高度，因为它似乎会抛出和膨胀异常。尝试获取 dp 值。或者，如果您想让它调整到布局中的某个特定位置，请使用相对布局并使其相对于其他视图元素拉伸。只是不要单独使用“wrap_content”。

如果这不起作用，请回复我，我会尽力提供进一步的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:52:43.043

在应用程序标签下方添加`<uses-library android:name="com.google.android.maps" />`在 xml 中指定`android:layout_height="fill_parent"`

如果可能，请尝试将项目构建目标更改`Project->Properties->Android`为 Google API 级别。

# android - 如果 Google 服务器没有响应，我的应用是否应该处于许可状态？

> ID：10374272
> 
> 赞同：1
> 
> 时间：2012-04-29T17:29:06.843
> 
> 标签：android, licensing, response

我的应用程序依赖于`com.google.android.vending.licensing`许可证验证。如果应用程序已付费，它会进入许可状态，其中某些功能已解锁。这是通过以下回调函数完成的：

```
public void allow(int reason) { }
public void dontAllow(int reason) { } 
```

当然，除非 Google 服务器没有响应，否则这非常有效。在这种情况下，我根本没有得到回应（也`allow`没有被叫到`dontAllow`）。据我了解，此许可证检查第一次成功时，底层库将缓存响应以供以后使用。但是……问题依然存在。

**问：**如果 Google 服务器在我第一次运行我的应用程序时没有响应，我是否应该假设该应用程序已获得许可？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T17:32:33.940

不需要。只需要连接互联网即可激活并提前做好准备；无论如何，您的客户可能有 3G。

这种假设服务器对验证做出积极响应的方法允许无数软件被伪许可，只需在首次启动时切断互联网访问即可。

# jquery - 被点击的特定类的jquery调用函数

> ID：10374274
> 
> 赞同：1
> 
> 时间：2012-04-29T17:29:10.230
> 
> 标签：jquery, html

html:

```
 <div class="a">

   <div class="g"></div>
   <a class="e">Link</a>

  <div class="g"></div>
   <a class="e">Link</a>

</div> 
```

每当我点击链接时，我都想隐藏带有“g”类的 div。只有那个特定的链接。假设如果我点击第一个链接，那么第一个带有“g”类的 div 应该只隐藏。现在我已经完成了在这儿。

查询：

```
 $('.e').click(function(){
               c();
       });

    function c(){
          $(.g).hide();
      } 
```

但这隐藏了“g”类的所有元素。

具有“g”类的 div 和链接都是由用户动态生成的，我不知道用户可以生成多少。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T17:31:57.397

当前，您正在调用`$('.g').hide()`它选择所有以 g 作为类的元素并将它们全部隐藏。

而是用于`prev()`选择要隐藏的元素

```
 $('.e').click(function(){
              jQuery(this).prev().hide();
       }); 
```

[演示](http://jsfiddle.net/mprabhat/NQYN4/1/)

根据评论更新：

您可以使用以下代码：

```
$('.e').click(function(){
              c(this);
       });

function c(element){
          $(element).prev().hide();
      } 
```

[现场演示](http://jsfiddle.net/mprabhat/NQYN4/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T17:33:54.087

尝试这个：

```
$(".e").click(function(){
   $(this).closest("div.g").hide();
}) 
```

或者：

```
var elem = "";
$(".e").click(function(){
       elem = $(this).closest("div.g");
       c(elem);
    })

function c(elem) {
$(elem).hide();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T17:37:37.017

使用函数 c()：

```
$('.e').click(function(){
    c(this);
});

function c(element){
    $(element).prev().hide();
} 
```

演示：http: [//jsfiddle.net/NQYN4/3/](http://jsfiddle.net/NQYN4/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T17:49:31.010

您可以使用 jQuery each() 方法来实现这一点，您的 HTML 保持不变，JavaScript 如下；

```
$(".e").each(function () {

  // $(this) refers to that particular link not all the links.
  $(this).click(function (e) {

    /**
     * as a precaution for preventing anchor
     * to redirect/scroll to location defined in "href" attribute
     */
    e.preventDefault();

    $(this).prev(".g").hide();
  });
}); 
```

# c# - FocusNavigationDirection.Next 没有移动到下一个控件

> ID：10374275
> 
> 赞同：1
> 
> 时间：2012-04-29T17:29:30.397
> 
> 标签：c#, wpf, datagrid, focus

```
TraversalRequest request = new TraversalRequest(FocusNavigationDirection.Next);                    
MoveFocus(request); 
```

我在 DataGrid PreviewKeyDown 事件中使用此代码，并且焦点没有移动到下一个控件，而是它的焦点转到了 DataGrid 之前的两个控件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T14:59:11.223

使用此代码请求：

```
TraversalRequest request = new TraversalRequest(FocusNavigationDirection.Down); 
```

使用**Down**请求希望有帮助

# javascript - 按内容匹配元素在控制台中有效，“在现实生活中”失败

> ID：10374277
> 
> 赞同：1
> 
> 时间：2012-04-29T17:29:46.263
> 
> 标签：javascript, jquery

我想隐藏 YouTube 上已知不良频道的视频结果。这应该不是很有挑战性。视频项主要有两种变体：搜索视频时`span`较大的 s 和相关视频列的较小 s。两者都在其内部元素中列出了频道所有者。`.result-item``.video-list-item``.yt-user-name`

通过对 Chrome 20 的开发人员控制台进行一些处理，我发现以下内容可以按预期工作：

1.  从[任何有搜索结果的页面](http://www.youtube.com/results?search_query=meet%20the%20pyro "请不要真的给这些家伙意见。")开始，注入 jQuery
2.  选择第一个搜索结果`a = $(".video-list-item, .result-item")[0]`
3.  提取用户名并将其转换为小写`$(a).find(".yt-user-name").text().toLowerCase()`

因此我尝试了以下方法：

```
badChannels = ["vaivecorporation"] #fill in as desired

$(jQuery.grep($(".video-list-item, .result-item"),
  function(item, number){
    username = $(item).find(".yt-username").text().toLowerCase();
    console.debug(username);
    return badChannels.indexOf(username) != -1;
  })).css('opacity', 0.1); 
```

尽管有大量的 jQuery，它是完美的并且可以做所有的事情，但在[这里注入](http://www.youtube.com/results?search_query=meet%20the%20pyro "Do not actually give these guys views, please.")[最新的 jQuery](http://code.jquery.com/jquery-latest.min.js)和上面的内容只会给我 24 个换行符。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T17:37:43.490

通过快速浏览页面源代码，看起来您需要`yt-user-name`，而不是`yt-username`

# javascript - 在 aspx 页面中自动运行 javascript 函数

> ID：10374280
> 
> 赞同：0
> 
> 时间：2012-04-29T17:30:17.943
> 
> 标签：javascript, timer

我的页面中有运行查询的输入控件，我想在两次之间运行此查询，例如上午 8:00 到下午 4:00。

我使用 Timer 控件，但我不知道我在 Timer1_Tick 中编写了什么代码，因为我的按钮是 html 控件并且它运行一个 javascript 函数。我想自动运行这个函数（在上午 8:00 到下午 4:00）没有任何按下按钮控制。如何自动运行此功能或单击事件？

```
<div id="tab4">  
        <asp:UpdatePanel ID="UpdatePanel1" runat="server">  
        <Triggers>  
        <asp:AsyncPostBackTrigger ControlID="Timer1" EventName="Tick" />  
        </Triggers>  
        <ContentTemplate>   
        <input type="button" value="Run query" onclick="RunQuery(this)"> </input>  

        </ContentTemplate>  
        </asp:UpdatePanel> 
```

我该怎么做？，

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T18:14:23.663

您可以解决的一种方法是简单地将您的时间检查放在计时器事件处理程序中，并且除了在这些时间之外不要执行查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T18:16:17.190

如果您只想在特定时间运行 javascript 函数，您可以使用“setTimeout”方法来安排函数执行。例如，以下代码在当天晚上 20:30 显示一条消息：

```
var date = new Date();
date.setHours(20, 30, 00, 0);
setTimeout("alert('It is time!')", date.getTime() - (new Date()).getTime());​​​​​​​ 
```

您可以轻松创建一个函数来包装上面的代码并将其应用于您的案例。然后将其绑定到[Sys.Application.load Event](http://msdn.microsoft.com/en-us/library/bb383829.aspx)。

# git - 如何合并本地和远程分支之间的更改？

> ID：10374281
> 
> 赞同：0
> 
> 时间：2012-04-29T17:30:21.847
> 
> 标签：git

我的 git 存储库中有 2 个分支：

```
 capsule-os
* remotes/m/ics 
```

capsule-os 是我对 remotes/m/ics 分支的本地更改的分支。我使用（并构建）了 capsule-os 分支，但是 remotes/m/ics 有时会更新，我想将此更改与我的本地分支同步（实际上，将我的更改添加到此远程分支）。我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T17:44:31.573

*[Amber 的答案](https://stackoverflow.com/a/10374299/223092)是正确的，但我认为使用变基而不是合并的替代方法可能值得添加答案。*

如果您还没有发布您的`capsule-os`分支，您可能希望将您的更改“重新定位”到更新的`m/ics`分支，例如：

```
# Make sure you're on the right branch:
git checkout capsule-os

# "Replay" all of your commits on top of m/ics, and update
# capsule-os to point to the result:
git rebase m/ics 
```

（你可能需要解决一些冲突——如果你不能轻易做到这一点，你可以把你的`capsule-os`分支恢复到原来的样子`git rebase --abort`。）

作为替代方案，您可以`ics`一次性获取新版本的分支并重新基于该分支：

```
git pull --rebase m ics 
```

有许多不同的使用方式`git rebase`，但它们本质上都涉及进行一组提交，并且对于其中的每一个，都尝试将提交引入的更改重新应用到其他提交上。这经常用于将一组提交“移动”到更新的上游分支，以保持历史简单。

我用“如果你还没有发布`capsule-os`分支”来限定它的原因是重写一个分支的历史可能会给正在处理该分支的原始版本的合作者带来困难。但是，如果它仍然是私人工作，那么变基是使您的分支与上游保持同步的好方法，并且仍然保持历史简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T17:32:30.410

假设您的遥控器名为`m`：

```
git pull m ics 
```

[http://gitref.org/remotes/#pull](http://gitref.org/remotes/#pull)

# java - ActiveMQ - 创建嵌入式代理侦听 SSL (TLS) 传输错误

> ID：10374283
> 
> 赞同：1
> 
> 时间：2012-04-29T17:30:31.190
> 
> 标签：java, activemq

我想创建一个嵌入式 ActiveMQ 代理，它使用客户端身份验证机制 (TLS) 侦听 SSL 协议。

这是我希望这样做的代码：

```
//loading keystore from file    
KeyStore keystore = KeyStore.getInstance("pkcs12");

File ksfile = new File("/home/me/client1.pkcs12");
FileInputStream ksfis = new FileInputStream(ksfile);

keystore.load(ksfis, "password".toCharArray());

//loading truststore from file
KeyStore truststore = KeyStore.getInstance("jks");
truststore.load(new FileInputStream(new File("/home/me/client1.truststore")), "password"
                .toCharArray());

KeyManagerFactory kmf = KeyManagerFactory.getInstance(KeyManagerFactory
        .getDefaultAlgorithm());
kmf.init(keystore, "password".toCharArray());

TrustManagerFactory tmf = TrustManagerFactory
        .getInstance(TrustManagerFactory.getDefaultAlgorithm());
tmf.init(truststore);

//broker definition
String cfURI = "ssl://localhost:2032";
BrokerService brokerService = new BrokerService();
brokerService.addConnector(cfURI);

//configure ssl context for the broker
SslContext sslContext = new SslContext(kmf.getKeyManagers(),tmf.getTrustManagers(), null);

//need client authentication
sslContext.getSSLContext().getDefaultSSLParameters().setNeedClientAuth(true);
sslContext.getSSLContext().getDefaultSSLParameters().setWantClientAuth(true);

brokerService.setSslContext(sslContext);
brokerService.start(); 
```

当我在主程序中执行前面的代码时，出现以下错误：

```
GRAVE: Could not accept connection : javax.net.ssl.SSLException: No available certificate or key corresponds to the SSL cipher suites which are enabled. 
```

欢迎提出任何建议！

谢谢阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T13:29:33.180

您的客户是否在其信任库中设置了来自代理的证书？恐怕这就是你遇到的问题。

除此之外，如果您也粘贴客户端代码可能会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:39:31.413

从客户端连接时，我使用 ActiveMQConnectionFactory 而不是 ActiveMQSslConnectionFactory 收到此错误

# c# - MVC Rss 聚合器缓存

> ID：10374284
> 
> 赞同：0
> 
> 时间：2012-04-29T17:30:34.763
> 
> 标签：c#, asp.net, asp.net-mvc, rss

我正在构建一个 RSS 聚合器并显示从提要到用户浏览的最后一个条目，每页大约 20 个提要。我可以看到，每次任何用户加载页面时，从 20 个提要中的每个提要中提取最后一个项目会很痛苦。所以我在想最好的方法是将提要缓存一天。

缓存是存储在内存中还是磁盘上？我担心缓存这么多项目可能会达到我主机上的内存限制并停止池。

这种类型的 chaching 在 MVC 中是如何完成的？我知道它类似于`Page.Cache.Insert`WebForms。我`System.ServiceModel.Syndication`用来从提要中获取最后一个条目。

我有一个自定义模型类，其中包含 Feed Title、Feed Adress、Item title、Item Adress 和前 200 个内容字母，因此不会占用大量内存。

任何人都可以向我解释缓存存储在哪里，并且在长达一天的时间内会伤害我的应用程序吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T05:32:58.787

您必须将控制器中的操作定义为缓存（[MSDN](http://msdn.microsoft.com/en-us/library/system.web.mvc.outputcacheattribute.aspx)）：

```
 [OutputCache(Duration=10, VaryByParam="none")]
        public ActionResult Index()
        {
            return View();
        } 
```

数据保存在内存中。您可以在[IIS 配置中管理输出缓存](http://www.iis.net/ConfigReference/system.webServer/caching)

已经有默认限制属性：

**最大缓存响应大小**（以字节为单位）指定用户模式和内核模式缓存的缓存响应的最大大小。默认值为 262144 字节。该字段仅在服务器级别启用；它在所有其他级别都是只读的。

**缓存大小限制**（以 MB 为单位）配置用户模式和内核模式缓存的大小限制。您可以键入大小（以 MB 为单位）或键入 0。如果键入 0，IIS 将使用可用物理内存或虚拟内存的一半，以较少者为准。该字段仅在服务器级别启用；它在所有其他级别都是只读的。

# vba - 从 Outlook 调用 Access 子程序 - 对象 _Application 的方法运行失败

> ID：10374286
> 
> 赞同：-1
> 
> 时间：2012-04-29T17:30:48.340
> 
> 标签：vba, ms-access, outlook, office-automation

当在 Outlook 中收到电子邮件时，我正在尝试在 MS Access 中运行子程序。

我正在使用 Access.Application 对象及其 Run 方法。

我收到以下错误：对象_应用程序的方法运行失败。

```
Private Sub Application_newmail()
    MsgBox "New mail"
    Dim accessdb As Access.Application
    Set accessdb = CreateObject("Access.Application")

    accessdb.opencurrentdatabase "C:/Camps.accdb", False

    accessdb.Run "test"

    accessdb.CloseCurrentDatabase

    Set accessdb = Nothing

End Sub 
```

“测试”子程序是 Checkdb 模块中的一个空子程序（在我尝试调用实际子程序但未能成功之后）。

我正在运行 Office 2007。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T01:27:03.310

我使用 VBScript 而不是 Outlook 测试了您的代码。您的代码对我来说很好，除了我确实将您的正斜杠更改为数据库路径中的反斜杠：“C:\Camps.accdb”

确保您将“测试”功能/子标记为公开。

```
Public Function Test()
    MsgBox "Test Works"
End Function 
```

# java - HttpURLConnection 总是执行 GET 请求而不是 POST 请求，尽管 setDoOutput(true) 和 setRequestMethod("POST")

> ID：10374289
> 
> 赞同：9
> 
> 时间：2012-04-29T17:31:06.697
> 
> 标签：java, android, http, android-4.0-ice-cream-sandwich

自从更新到冰淇淋三明治后，我的 POST 请求不再起作用。在 ICS 之前，这可以正常工作：

```
try {
        final URL url = new URL("http://example.com/api/user");
        final HttpURLConnection connection = (HttpURLConnection) url
                .openConnection();
        connection.setRequestMethod("POST");
        connection.setDoOutput(false);
        connection.setDoInput(true);
        connection.setRequestProperty("Content-Length", "0");
        if (connection.getResponseCode() != HttpURLConnection.HTTP_OK) {
            Log.w(RestUploader.class.getSimpleName(), ": response code: " + connection.getResponseMessage());
        } else {
            final BufferedReader reader = new BufferedReader(
                    new InputStreamReader(connection.getInputStream()));
            final String line = reader.readLine();
            reader.close();
            return Long.parseLong(line);
        }
    } catch (final MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (final ProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (final IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return -1; 
```

我试过设置

```
connection.setDoOutput(true); 
```

但它不起作用。服务器响应始终是 405（不允许使用方法），服务器日志显示这是一个 GET 请求。

到 setRequestMethod 的 Android JavaDoc 说：

> 此方法只能在建立连接之前调用。

是不是说方法必须在url.openConnection()之前调用？我应该如何创建一个 HttpURLConnection 实例？我见过的所有例子，都按照上面的描述。

我希望有人知道为什么它总是发送 GET 请求而不是 POST。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-16T09:20:54.597

```
connection.setRequestMethod("POST");
connection.setDoOutput(false); 
```

在上面的两个语句中，只需放置

```
connection.setDoOutput(true) 
```

前

```
connection.setRequestMethod("POST") 
```

陈述

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-03T15:42:52.487

我的 .htaccess 有一个重写规则，将 www 重定向到 http://。结果我的Java代码工作得很好！重定向/重写规则使我的第一个请求 (POST) 转发到 http，因此“变成”了一个 GET。我的 PHP 脚本只收听 POST，我一直摸不着头脑，直到我发现自己的错误是重定向规则。检查你的这种“问题”。

对我来说，首先设置 setDoOutput 或 setRequestMethod 并不重要，任何顺序都有效（API 23）。目前事情是这样的：

```
HttpURLConnection con = (HttpURLConnection) obj.openConnection();
con.setInstanceFollowRedirects(false);
con.setUseCaches(false);
con.setRequestMethod("POST");
con.setDoOutput(true);
con.setRequestProperty("Content-Type",bla bla
con.setRequestProperty("Accept-Charset", "UTF-8");
con.setRequestProperty("Content-Length", String.valueOf(PARAMETER_VARIABLE.getBytes().length));
con.setFixedLengthStreamingMode(PARAMETER_VARIABLE.getBytes().length);
OutputStream os = con.getOutputStream();
os.write(PARAMETER_VARIABLE.getBytes());
os.flush();
os.close(); 
```

# android - 在 IntelliJ 中，如何设置 Android API 级别

> ID：10374290
> 
> 赞同：8
> 
> 时间：2012-04-29T17:31:07.523
> 
> 标签：android, intellij-idea

我正在使用最新最好的 IntelliJ 社区版。我的应用程序在 android 模拟器上运行良好。但是，我需要模拟器来更好地匹配 Kindle Fire。我在 AVD Manager 中进行了配置更改（包括将设备设置为 API 10。）

当我去我的项目配置项目以新的虚拟设备为目标时，我收到以下消息：“AVD DEV3 的构建目标与您的构建目标不兼容。”

没花太多功夫就发现这个问题与我选择的 API 10 有关。

我不知道我在哪里告诉我的项目使用 API 10。我看了一遍，根本没有看到任何对 API 级别的引用。有任何想法吗？

*编辑*

我添加了

```
<uses-sdk android:minSdkVersion="10" /> 
```

到我的 AndroidManifest.xml 文件并能够选择新设备。我现在正在启动它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-15T18:33:15.233

上面的答案在 Intellij 中不再正确（使用 gradle）

现在`<uses-sdk>`在 AndroidManifest.xml 中被忽略，它会自动添加到构建的清单文件中。要更改版本，请转到“build.gradle”文件并查看 minSdkVersion。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T15:31:22.360

正如托尼和布伦德尔提到的，答案是`minSdkVersion`在你的`AndroidManifest.xml`文件中声明你的。这样，应用程序将被允许在至少满足`minSdkVersion`.

这里有更多关于`<uses-sdk>`标签的文档：http: [//developer.android.com/guide/topics/manifest/uses-sdk-element.html](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-22T15:01:40.030

在 Gradle 文件中设置此值 - 如下所示：

```
android {
    compileSdkVersion 30
    buildToolsVersion "30.0.3"

    defaultConfig {
        applicationId "com.example.kotlinconverterapp"
        **minSdkVersion 26**
        targetSdkVersion 30
        versionCode 1
        versionName "1.0"

        testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
    } 
```

# ruby-on-rails - 删除相应资源时如何从亚马逊s3服务器中删除附件？

> ID：10374291
> 
> 赞同：2
> 
> 时间：2012-04-29T17:31:08.730
> 
> 标签：ruby-on-rails, ruby-on-rails-3, amazon-s3, paperclip, ckeditor

我有一个问题模型，可以使用带有 Paperclip 的 ckeditor gem 创建。每个问题可以包含几张附加图片。每个问题都有几个答案，每个答案也可以包含几个附加图片（答案也是用 ckeditor 创建的）。

我的ckeditor上传图片的配置如下：

```
class Ckeditor::Picture < Ckeditor::Asset
  has_attached_file :data,
                :storage => :s3,
                :url  => ":s3_eu_url",
                :s3_credentials => "path to credentials",
                :path => ":class/:id/:basename.:extension",
                  :styles => {  :medium => "500x500>",
                                :thumb => "500x500>"},
                :s3_protocol => 'http'

validates_attachment_size :data, :less_than => 2.megabytes
validates_attachment_presence :data

def url_content
  url(:content)
end
end 
```

使用该配置，我不知道如何识别附加到给定问题或答案的图片。目的是在删除问题或答案时从 s3 中删除图片。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-08T09:11:48.243

由于我没有成功找到使用 Paperclip 解决此问题的方法，因此我开始使用提供此功能的[carrierwave 。](https://github.com/jnicklas/carrierwave)

# tridion - 如何在我的 SDL Tridion 页面中使用 Flash 文件？

> ID：10374293
> 
> 赞同：1
> 
> 时间：2012-04-29T17:31:30.617
> 
> 标签：tridion

我的页面很好地展示了常规的组件演示。我的本地机器中有一个 flash/video 文件，我想在我的页面上上传这个文件。我怎样才能做到这一点？

我有这个代码片段用于在我的页面上呈现组件：

```
<!-- TemplateBeginRepeat name="Components" -->
    <!-- TemplateBeginIf cond="ComponentTemplate == 'HomePageCT'" -->
        @@RenderComponentPresentation()@@
    <!-- TemplateEndIf -->   
<!-- TemplateEndRepeat --> 
```

请提供有关 Flash 文件和视频文件的所有详细信息。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-29T18:10:16.880

在页面上放置 Flash 文件的过程与在模板输出中放置任何图像的过程完全相同。步骤概述如下：

1.  创建一个允许 Flash 多媒体类型的多媒体模式（例如 Flash 视频模式）
2.  使用您的新架构上传您的 Flash 文件
3.  创建一个组件模板以呈现您要用于显示 Flash 文件的 HTML，并实际发布二进制文件本身。（例如显示 Flash CT）
4.  创建一个页面模板（您似乎已经完成了这部分），它呈现页面，并使用呈现页面上的组件`@@RenderComponentPresentation()@@`
5.  创建一个页面，并使用 Display Flash CT 将您的 Flash 文件放置在其上
6.  发布页面

如果没有您想要生成的输出的详细信息，就很难为 DisplayFlash CT 提供示例 Dreamweaver 模板构建块代码，但它可能看起来像这样：

```
<embed src="@@Component.Id@@" allowFullScreen="true" width="540" 
    height="438" bgcolor="#000000" type="application/x-shockwave-flash"    
    pluginspage="http://www.macromedia.com/go/getflashplayer">
</embed> 
```

确保在此之后在组件模板中使用默认完成操作 TBB，以便`src`处理链接并发布二进制文件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-29T18:02:40.627

使用 Tridion 的 Flash 文件没有什么特别之处。他们可以像对待任何其他人一样对待`Multimedia Component`。您可以将它们上传到 CME（或使用 Webdav），因此您将拥有一个`Multimedia Component`. 当然，请确保您`Multimedia Schema`允许 Flash（和扩展）作为多媒体类型。

关于如何将 Flash 文件放在页面上 - 再次就像正常的`Multimedia Component`. 在您的 CT 中，您必须生成将在某处使用您的 Flash 文件 URL 的输出。您必须发布您的 Flash MMC 才能获取其 URL。如果您的 MMC 在包中，您可以使用`Engine.AddBinary`或`RenderedItem.AddBinary`方法，或使用默认 TBB。`Publish Binaries in Package`然后您可以简单地将您的 Flash URL 称为包项目。查看此 URL 以获得一些灵感： http: [//yatb.mitza.net/2012/03/publishing-images-as-variants.html](http://yatb.mitza.net/2012/03/publishing-images-as-variants.html)（您的情况不必那么复杂）和[http:// yatb.mitza.net/2012/04/reference-image-variants-from.html](http://yatb.mitza.net/2012/04/referencing-image-variants-from.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T01:38:33.100

有几种方法可以使用 Tridion 管理的页面呈现多媒体。

多媒体组件可以是：

1.  组件演示文稿的一部分，添加到已选择模板的页面
2.  作为“容器”组件中的链接到多媒体组件，该组件被添加到页面
3.  在另一个组件内的富文本格式 (RTF) 区域中

您也可以只发布带有动态组件模板的二进制文件并在 Tridion 之外处理标记和链接。根据您需要的标记和/或元数据，在上述基本场景中发挥创意。

Chris 解决了 #1，Mihai 解释了模式设置和`.AddBinary`. 第二个选项类似，但您必须获取引用的 ID 而不是页面上的组件。第三个选项要求您在 RTF 中解析多媒体，这取决于您的模板语言和多媒体类型。

我见过 XSLT ( `<xsl:template match="">`)、grep 以及`.replace`解析特定标记（如 Flash 视频）的各种选项。

# c# - 将元数据分配给 asp.net 控件

> ID：10374302
> 
> 赞同：0
> 
> 时间：2012-04-29T17:32:48.817
> 
> 标签：c#, asp.net

我想知道是否可以将“元数据”分配给稍后可以在回发中检索的 asp.net 控件？例如，假设我有一个 LinkBut​​ton：

```
LinkButton link = new LinkButton();
link.ID = "LinkButton_0";
link.Text = "Click here for more info";
link.Click += new EventHandler(link_Click); 
```

现在我想为控件分配更多数据，以便当回发事件发生时，我可以检索这些数据以找出要做什么。我考虑过使用“属性”属性，但我想这不是一个好的解决方案，因为它可能会影响控件的 html 布局：

```
link.Attributes.Add("param0", "value0");
link.Attributes.Add("param1", "value1");
link.Attributes.Add("param2", "value2"); 
```

我需要这样做，因为我的页面有很多动态创建的链接按钮，并且所有这些按钮都会引发相同的回发事件。

有人建议我简单地连接控件 ID 中的所有“元数据”，但我正在尝试找到更好的解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T17:56:02.213

由于您不希望在标记中包含这些元数据，我认为您在客户端不需要它，因此您可以将元数据放在 Session 中，并命名会话项，如控件 ID + paramID，如下所示：

```
this.Session.Add(link.ID + "-param1", "Value0"); 
```

顺便提一句。这是一个示例，如果您从 Page 方法执行此操作，如果您没有页面实例，则可以像这样访问会话：

```
HttpContext.Current.Session.Add(link.ID + "-param1", "Value0"); 
```

# c - 将 Unix 命令与 C 一起通过管道传输

> ID：10374305
> 
> 赞同：0
> 
> 时间：2012-04-29T17:32:55.590
> 
> 标签：c, unix, exec, pipe

我想模拟这个 Unix 命令：

```
cat file.txt | sort | tail -4 
```

我遵循了该技术，但它不起作用，它仍然被阻止。当有文件时，也许我需要使用其他东西。我使用了两个管道和两个进程，并且我在一个进程中使用了两个 DUP，这可能是错误的。

```
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
#include <sys/wait.h>

int main()
{
  int p1[2];
  int p2[2];

  if(pipe(p1))
  {
    perror("pipe1");
    exit(0);
  }

  if(pipe(p2))
  {
    perror("pipe2");
    exit(0);
  }

  switch(fork())
  {
    case -1: perror(" fork1 error ");
             exit(0);

    case  0: close(STDOUT_FILENO);
             (void)dup(p1[1]);
             close(p1[1]);
             close(p1[0]);
             execlp("cat", "cat", "file.txt", NULL);
             exit(0);
    default: 
            switch(fork())
            {
              case -1: perror(" fork2 error ");
               exit(0);

              case  0: close(STDIN_FILENO);
                       (void)dup(p1[0]);
                       close(p1[1]);
                       close(p1[0]);

                       close(STDOUT_FILENO);
                       (void)dup(p2[1]);
                       close(p2[1]);
                       close(p2[0]);

                       execlp("sort", "sort", NULL);
                       exit(0);

              default: 
                       wait(NULL);
                       close(STDIN_FILENO);
                       (void)dup(p2[0]);
                       close(p2[0]);
                       close(p2[1]);
                       execlp("tail", "tail", "-4", NULL); 
            }             
  }
} 
```

这是 file.txt ：

```
g
f
d
b
c
a
e 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T17:56:31.263

父进程永远不会关闭管道`p1`，因此它的子进程会继续尝试读取它。在. `close(p1[0]); close(p1[1]);`_`execlp("tail", "tail", "-4", NULL);`

另请注意，您不应该*：* `wait(NULL)`当 file.txt 很大并开始填充管道缓冲区时，这是另一个等待发生的挂起。

# android - Android：主机端：ddmlib：如何让应用程序通过 ddmlib.jar 在设备上运行

> ID：10374312
> 
> 赞同：1
> 
> 时间：2012-04-29T17:34:23.060
> 
> 标签：android

```
package com.android.ddmlib.use;

import com.android.ddmlib.AndroidDebugBridge;
import com.android.ddmlib.Client;
import com.android.ddmlib.IDevice;
import com.android.hierarchyviewer.device.DeviceBridge;

public class DDMlibUse implements AndroidDebugBridge.IDeviceChangeListener, AndroidDebugBridge.IClientChangeListener{

 public static void main(String args[]) {

       DDMlibUse mlibUse = new DDMlibUse();

       AndroidDebugBridge.init(true);
       AndroidDebugBridge adb = AndroidDebugBridge.createBridge("adb",
                                false);
       adb.addClientChangeListener(mlibUse);
       adb.addDeviceChangeListener(mlibUse);
       for (;;) {

       }
 }

@Override
public void deviceConnected(IDevice dev) {
    // TODO Auto-generated method stub
    System.out.print("deviceConnected ... \n");
    System.out.print(dev.toString() + "\n");
    System.out.print(dev.getState() + "\n");
    System.out.println(dev.getClients().length);

}

@Override
public void deviceDisconnected(IDevice dev) {
    // TODO Auto-generated method stub
    System.out.print("deviceDisconnected ... \n");
    DeviceBridge.removeDeviceForward(dev);

}

@Override
public void deviceChanged(IDevice dev, int changeMask) {
    // TODO Auto-generated method stub
    System.out.print("deviceChanged ... \n");
    System.out.print(dev.toString() + "\n");
    System.out.print(dev.getState() + "\n");
    System.out.println(dev.getClients().length + "\n");
    System.out.println("changeMask " + changeMask + "\n");

}

@Override
public void clientChanged(Client client, int change_code) {
    // TODO Auto-generated method stub
    System.out.print("clientChanged ... \n");

}

} 
```

结果是 Device 为 ON_LINE，但调用 getClients 方法仅返回 Client 的数组 [0]。我无法获得任何客户端另一件事是当我在设备上启动一个新应用程序时，我永远不会让“changeMask”成为 IDevice.CHANGE_CLIENT_LIST

你能帮助我吗 ？非常感谢我的目的是让设备上的哪个活动在前面，就像 Hierarchyviewer 和 DDMS 所做的那样。

# android - 一个简单的android程序的问题

> ID：10374317
> 
> 赞同：0
> 
> 时间：2012-04-29T17:34:53.137
> 
> 标签：android

代码：

```
 setContentView(R.layout.splashscreen);
    Thread timer = new Thread() {

        @Override
        public void run() {
            // TODO Auto-generated method stub

            try {
                sleep(5000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            } finally {
                intent=new Intent(Intent.ACTION_VIEW,Uri.parse("http://www.google.com/"));
                startActivity(intent);
            }

        }

    };
    timer.start();
}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    this.finish();

}
  } 
```

正如你们所看到的，这是一个非常简单的程序，它会显示一个启动屏幕，然后会在浏览器中打开 URL。到这里为止一切都很好。现在通过使用后退按钮，我退出了应用程序。但是，只要我尝试按下已安装的应用程序图标，系统就会给我一个祝酒词`"app is not installed on your phone"`。

当我检查正在运行的服务时，它总是在那里，我`logcat`说：`"Launcher does not have permission to launch the intent"`。

所以我的第一个问题：为什么我的应用程序一直在运行，尽管我已经`finish()`在`onPause()`方法中调用了？

Q2。此`logcat`消息表明什么？

这是我的清单（猜你在想我没有添加`uses-permission`互联网但我有）：

```
 <?xml version="1.0" encoding="utf-8"?>
  <manifest xmlns:android="http://schemas.android.com/apk/res/android"
   package="com.abc.xyz.main"
    android:versionCode="1"
    android:versionName="1.0.1" >

<uses-sdk android:minSdkVersion="8" />
   <uses-permission android:name="android.permission.INTERNET"/>

<application
    android:icon="@drawable/app_icon"
    android:label="@string/app_name" android:permission="android.permission.INTERNET"  android:description="@string/appdescription">

        <activity
            android:name=".SplashActivity"
             android:label="@string/app_name"
              android:screenOrientation="portrait" >
            <intent-filter>
               <action android:name="android.intent.action.MAIN" />

              <category android:name="android.intent.category.LAUNCHER" />
          </intent-filter>
      </activity>

   </application>

   </manifest> 
```

这是`logcat`：

```
04-29 23:17:56.745: I/ActivityManager(68): Starting activity: Intent {act=android.intent.action.MAIN   cat[android.intent.category.LAUNCHER] flg=0x10200000        cmp=com.vayyoo.epost.main/.SplashActivity }
04-29 23:17:56.745: W/ActivityManager(68): Permission Denial: starting Intent {      act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.vayyoo.epost.main/.SplashActivity } from ProcessRecord{45cfc0f8 240:com.android.launcher/10025} (pid=240, uid=10025) requires android.permission.INTERNET
04-29 23:17:56.785: E/Launcher(240): Launcher does not have the permission to launch Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.vayyoo.epost.main/.SplashActivity }. Make sure to create a MAIN intent-filter for the corresponding activity or use the exported attribute for this activity. tag=ApplicationInfo(title=ePost) intent=Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.vayyoo.epost.main/.SplashActivity }
04-29 23:17:56.785: E/Launcher(240): java.lang.SecurityException: Permission Denial: starting Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.vayyoo.epost.main/.SplashActivity } from ProcessRecord{45cfc0f8 240:com.android.launcher/10025} (pid=240, uid=10025) requires android.permission.INTERNET
04-29 23:17:56.785: E/Launcher(240):    at android.os.Parcel.readException(Parcel.java:1247)
04-29 23:17:56.785: E/Launcher(240):    at android.os.Parcel.readException(Parcel.java:1235)
04-29 23:17:56.785: E/Launcher(240):    at android.app.ActivityManagerProxy.startActivity(ActivityManagerNative.java:1298)
04-29 23:17:56.785: E/Launcher(240):    at android.app.Instrumentation.execStartActivity(Instrumentation.java:1373)
04-29 23:17:56.785: E/Launcher(240):    at android.app.Activity.startActivityForResult(Activity.java:2817)
04-29 23:17:56.785: E/Launcher(240):    at com.android.launcher2.Launcher.startActivityForResult(Launcher.java:1053)
04-29 23:17:56.785: E/Launcher(240):    at android.app.Activity.startActivity(Activity.java:2923)
04-29 23:17:56.785: E/Launcher(240):    at com.android.launcher2.Launcher.startActivitySafely(Launcher.java:1462)
04-29 23:17:56.785: E/Launcher(240):    at com.android.launcher2.AllApps2D.onItemClick(AllApps2D.java:178)
04-29 23:17:56.785: E/Launcher(240):    at android.widget.AdapterView.performItemClick(AdapterView.java:284)
04-29 23:17:56.785: E/Launcher(240):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:1696)
04-29 23:17:56.785: E/Launcher(240):    at android.os.Handler.handleCallback(Handler.java:587)
04-29 23:17:56.785: E/Launcher(240):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-29 23:17:56.785: E/Launcher(240):    at android.os.Looper.loop(Looper.java:123)
04-29 23:17:56.785: E/Launcher(240):    at android.app.ActivityThread.main(ActivityThread.java:4627)
04-29 23:17:56.785: E/Launcher(240):    at java.lang.reflect.Method.invokeNative(Native Method)
04-29 23:17:56.785: E/Launcher(240):    at java.lang.reflect.Method.invoke(Method.java:521)
04-29 23:17:56.785: E/Launcher(240):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-29 23:17:56.785: E/Launcher(240):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-29 23:17:56.785: E/Launcher(240):    at dalvik.system.NativeStart.main(Native Method)
04-29 23:17:59.855: W/KeyCharacterMap(240): No keyboard for id 0
04-29 23:17:59.855: W/KeyCharacterMap(240): Using default keymap: /system/usr/keychars/qwerty.kcm.bin 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T17:52:40.667

如果您使用的是冰淇淋三明治，（我记得在某处读过这个）不仅权限必须在其自己的标签中，应用程序不能同时具有属性“android.permission.INTERNET”.. 所以只是从应用程序节点中删除它并尝试...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T18:10:43.343

尝试删除：

```
android:permission="android.permission.INTERNET" 
```

从这部分：

```
<application
android:icon="@drawable/app_icon"
android:label="@string/app_name" android:permission="android.permission.INTERNET"  android:description="@string/appdescription"> 
```

但把它留在清单的另一部分。

# jquery - 通过 jquery 更改 DisplayFor Text/Value

> ID：10374318
> 
> 赞同：9
> 
> 时间：2012-04-29T17:35:06.337
> 
> 标签：jquery, asp.net-mvc, razor

我需要这个 displayfor 来使用 jquery 更新它的值。

我试过了`.val()`，`.text()`但都没有成功，有没有一种特殊的方法可以为显示器做到这一点，我需要它并保持作为显示器。

也不能为显示器设置样式吗？我永远无法让它工作，它适用于 TextboxFor。

感谢您的任何提示。

```
Estimated Time: @Html.DisplayFor(model => model.EstimatedTime, new { @class = "TitleEstTimeClass", @style = "color: green" })

$(".TitleEstTimeClass").val(result[1]); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-29T17:42:41.523

`DisplayFor`生成一个标签 HTML 标签`<label id="myId" class="myClass">Some Text</label>`。**（不正确）**

**编辑**

我错了，以为你在使用`LabelFor`助手。助手不输出 HTML 标记（如`DisplayFor`标签或跨度标记）。如果您希望它与`DisplayFor`助手一起使用，则需要使用 a或类似的东西来包装`DisplayFor`标签，如下所示：`<span>`

```
<span class="TitleEstTimeClass" style="color: green">
   @Html.DisplayFor(model => model.EstimatedTime)
</span> 
```

鉴于此，请尝试使用`.html()`如下所示的 JQuery 属性——它实际上与更新 div 或 span 中的文本没有什么不同：

```
$(".TitleEstTimeClass").html(result[1]); 
```

此外，请确保您的 JQuery 调用位于适当的`<script></script>`标记中，并且您正在调用的函数实际上正在被触发。我不确定上面的代码是直接来自您的项目还是只是片段，但如上所述，什么都不会发生。

# c++ - 如何在运行时定义成员数组大小

> ID：10374320
> 
> 赞同：3
> 
> 时间：2012-04-29T17:35:17.693
> 
> 标签：c++, arrays

假设我有一个类，它的成员是一个数组。是否可以通过以下方式在构造/运行时定义其大小：

```
class myClass {
    private:
        int myArray[n]
    public:
        myClass();
        someOtherMethod();
}; 
```

其中 n 是基于用户输入定义的变量。如果没有，最好的选择是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-29T18:11:19.477

这取决于。

从语义上讲，有 3 种类型的数组：

*   大小在编译时固定的数组
*   在运行时固定大小的数组
*   具有动态大小的数组

C++ 直接支持第一种和第三种情况，分别用正则数组和`std::vector`类。

C 还支持具有两个结构的第二种类型：

*   可变长度数组（在堆栈上）
*   oldie struct hack 或*tail-padding*

我会建议，在 C++ 中，`std::vector`在你的情况下使用这个类。它提供的功能超出了您的需求，但使用起来更简单。

另一方面，即使在 C++ 中，您仍然可以使用尾部填充。不过，它确实需要仔细的工程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T17:37:33.213

使用向量。

```
class myClass {
    private:
        std::vector<int> myArray;
    public:
        myClass();
        someOtherMethod();
};

myClass::myClass (int size)
    : myArray (size)
{ 
    ...
} 
```

然后，您可以像填写数组一样填写向量。或者，正如 Nawaz 指出的那样，使用`reserve()`为新元素保留空间，和/或`push_back()`将元素一次添加到背面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T17:36:51.060

类模板`std::vector`就是为此目的而设计的。

```
class myClass {
    private:
        std::vector<int> myArray;
    public:
        myClass(int size);
        someOtherMethod();
};

myClass::myClass(int size) : myArray(size)
{
} 
```

# ruby-on-rails - 哈姆尔：link_to vs button_to

> ID：10374322
> 
> 赞同：10
> 
> 时间：2012-04-29T17:35:45.167
> 
> 标签：ruby-on-rails, button, hyperlink, haml

据我了解，`link_to`用于获取方法，`button_to`用于发布方法。

另一方面，有人告诉我，使用 HTML5 语义，`<button>`可用于任何类型的可点击...嗯，按钮。如果我有一个可点击的按钮，可以将用户发送到要填写的表单，我应该创建一个`button_to`还是一个`link_to`？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-29T17:49:07.217

你想的更简单。这些方法是 Rails 助手，与 haml 没有任何关系。是的，一种方法用于获取，另一种用于发布方法。如果您需要将任何数据发布到控制器，请使用`button_to`（例如在删除记录时）。否则，`link_to`就够了。

此外，您可以使用参数`link_to`发布数据：`:method`

```
= link_to "Something", some_path, :method => :post 
```

回答你的问题，使用`link_to`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T18:37:22.937

您**应该**使用链接将用户指向资源，例如文章。

但是你**必须倾向于使用**按钮来指向一个动作（比如你的编辑页面上的“创建”/“发送”）。如果这与您的界面不一致 - 将它们设置为链接。

原因如下：如果用户缺乏 javascript 支持，**您就不能将**用户指向任何非 GET 操作。`link_to`因此，按钮是在这种情况下触发发送/销毁操作的唯一选项。

如果您的链接指向最终导致修改资源的页面（链接/按钮指向显示表单的编辑/创建页面），请随意使用**这两种方法，就像您的情况一样。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-29T17:50:23.223

如果您只想将用户发送到某个地方，那就是获取请求。所以在这种情况下你应该使用 link_to 。顺便说一句，如果您指定 :method，您可以将 link_to 用于发布请求和其他请求（例如 button_to）。例如：`=link_to "some path", some_path, :method => :get`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-29T06:39:20.730

和 的主要原理区别在于[`#link_to`](http://apidock.com/rails/ActionView/Helpers/UrlHelper/link_to)，[`#button_to`](http://apidock.com/rails/ActionView/Helpers/UrlHelper/button_to)它`#link_to`只是创建一个链接标签`A`，并在没有额外数据的情况下发出简单的 AJAX 请求，而使用自定义数据`#button_to`创建一个`FORM`，因此可以使用该表单向网络服务器发出扩展的 AJAX 请求。表单数据包含嵌入式 CSRF-token，用于对请求进行身份验证。在`#link_to`CSRF-token 的情况下，必须序列化并在`on_click`事件中发送。

# php - 将我的网站从 MAMP 转移到 LAMP 堆栈服务器。为什么我的网站没有连接到数据库？

> ID：10374323
> 
> 赞同：1
> 
> 时间：2012-04-29T17:35:47.190
> 
> 标签：php, mysql, lamp, linode

我是服务器和命令行的新手，但我已经成功地将我的 php 文件传输到服务器，并且似乎我已经成功导入了 mysql 数据库（至少我在 /var/lib/mysql 中看到它）。我使用 Linode 作为我的主机，我在本地使用 MAC 终端连接到 ubuntu linux 服务器。

谁能解释我可能缺少什么或我应该如何正确设置？

# c++ - || 的逻辑错误 操作员？

> ID：10374324
> 
> 赞同：0
> 
> 时间：2012-04-29T17:35:47.833
> 
> 标签：c++, logical-operators

我的程序的一部分（如有必要，我可以添加更多详细信息）包含以下行：

```
if((e->start->explored = false) || (e->end->explored = false)){
   //do action...
 } 
```

这是图算法的一部分，其中 e 是具有事件顶点“开始”和“结束”的有向边。如果 e 的至少一个事件顶点未被探索，我希望“行动”发生，但这种逻辑似乎是错误的。尽管我使用了一个小例子并验证了我的边的起点和终点确实是未经探索的，但我的整个函数正在进入一个无限循环。

然后我像这样测试它：

```
 if((e->start->explored = false) || (e->end->explored = false)){
       //do action...
     } 

  else cout << "FAIL"; 
```

……当然，它打印了一个“失败”的屏幕。我的逻辑错误是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-29T17:36:57.037

您正在分配`false`您的属性，而不是针对`false`. 这是一个经常犯的错误，而且很难调试。将赋值运算符更改`=`为相等运算符`==`：

```
if((e->start->explored == false) || (e->end->explored == false)) {
    // Do action...
} else {
    cout << "FAIL";
} 
```

* * *

与其将值与 进行比较，不如使用not 运算符`false`更清楚。`!`内部括号也被取消了：

```
if(!e->start->explored || !e->end->explored) {
    // Do action...
} else {
    cout << "FAIL";
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-29T17:38:26.380

正如其他人所阐述的那样，您不小心使用了赋值而不是比较。但是，真正的解决方案是根本不进行比较：

将布尔值与文字进行比较`true`是`false`荒谬的！

相反，写：

```
if(! e->start->explored || ! e->end->explored) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-29T17:37:06.600

您使用了赋值运算符 = 而不是比较运算符 ==。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-29T17:37:26.303

您在此处分配值：

```
if((e->start->explored = false) || (e->end->explored = false)){ 
```

应该：

```
if((e->start->explored == false) || (e->end->explored == false)){ 
```

# php - 如何在 .inc 文件中声明变量？

> ID：10374325
> 
> 赞同：0
> 
> 时间：2012-04-29T17:35:52.590
> 
> 标签：php, mysql

我应该将数据库用户名和密码存储在我的 html 文件夹之外的 .inc 文件中。我的问题是，如何在 .inc 中声明变量以及如何引用我的 html 文件夹之外的包含文件夹？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T17:41:07.327

您可以使用常量定义它们：

```
define("DB_USERNAME", "your-username");
define("DB_PASSWORD", "your-password"); 
```

并将它们与您的 html 文件夹中的包含一起使用

```
include "/path/to/database.inc"
mysql_connect("localhost", DB_USERNAME, DB_PASSWORD); 
```

请确保 database.inc 确实在您的 apache 的文档根目录之外，否则数据库密码可以以纯文本/文本形式打开。考虑将 *.php 扩展名用于您的 database.inc (=> database.php)。

# java - 记忆游戏 - 让 2 张卡片在 X 次后消失

> ID：10374326
> 
> 赞同：2
> 
> 时间：2012-04-29T17:35:55.540
> 
> 标签：java, swing, show-hide

我想为 Java 制作一个“记忆”或“找对”游戏，只是在开始一些更困难的事情之前先从一个基本游戏开始。我的游戏运行良好，但我只有 1 个大问题。我真的不知道如何在用户点击第二张图片后 x 秒内隐藏这两张图片。

这是完成的：

1.  游戏是用数组中的 4x4 按钮创建的
2.  卡片的值是分布的（名称、位置、图标）
3.  然后用户点击第一张卡片，该卡片立即显示
4.  用户点击第二个，如果第一个等于第二个则禁用 2，否则重新隐藏 2。

但我不知道如何让程序显示第二张卡片，然后在 x 秒后隐藏 2...

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T18:29:25.300

根据您使用的框架，应该有一个可供您使用的计时器实用程序。

例如，如果您使用的是 Swing，那么您应该能够`javax.swing.Timer`按照上述评论中的建议使用。按照此链接获取简单的[Swing Timer 教程](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)。正如他们在该页面上所说，摆动计时器可以以两种方式之一使用，其中一种方式是：

> 延迟执行一次任务

这听起来正是您想要实现的目标。

你也可以试试像[Joda Time](http://joda-time.sourceforge.net/)这样的库，它有很多功能和选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-28T18:50:37.780

您应该制作 match 函数和另一个 unmatch 函数，并且在 unmatch 函数中，您可以使用 setTimeout 并在您选择它们​​时给两张卡类（翻转），并且在一定时间之后并且当它们不匹配时删除此翻转类。

# java - Java bean在同一个jsp中的多个实例

> ID：10374329
> 
> 赞同：1
> 
> 时间：2012-04-29T17:36:20.983
> 
> 标签：java, jsp, jsf-2

我有一个类 counterBean，我希望在我的 jsp 中实例化两个 counterBean 实例（用于两个单独的计数器）。我该怎么做？

编辑 - 添加代码

```
package beans;

import java.io.Serializable;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;

@ManagedBean(name="CounterBean")
@SessionScoped
public class CounterBean implements Serializable
{
    private static final long serialVersionUID = 1L;
    private static int hitCount;

    public CounterBean() 
    {
        CounterBean.hitCount = 0;
    }

    public static int getCounter() 
    {
        hitCount++;
        return hitCount;
    }

    public static void setCounter(int hitCount) 
    {
        CounterBean.hitCount = hitCount;
    }

    public static int getValue() 
    {
        return hitCount;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T17:56:32.940

最好不要直接在 JSP 代码中创建对象。由于 JSP 应该只是视图。在 JSP 页面中使用 scriptlet 不是好的做法。最好使用`<jsp:useBean>`标签：

```
<jsp:useBean id="firstCounterId' class="yourpackagename.CounterBean" />
<jsp:useBean id="secondCounterId' class="yourpackagename.CounterBean" /> 
```

并更改特定计数器的值应用标签`<jsp:set Property>`

```
<jsp:setProperty name="firstCounterId" property="myNumber" value="123"/> 
```

但我认为几乎所有从 JSP 更改和使用 bean 的问题都可以通过使用标签`<c:set>`和`<c:out>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T18:09:51.950

像往常一样创建计数器 bean：

```
@Named(value="counterBean")
@SessionScoped
public class CounterBeanClass implements Serializable {

    private int counter = 0;

    public CounterBeanClass() {
    }

    public int getCounter() {
        return counter;
    }

    public void setCounter(int counter) {
        this.counter = counter;
    }

    public String addCounterValue() {
        this.counter++;
        return "";
    }
} 
```

然后，在 faces-config.xml 文件中创建或添加一个新的托管 bean

```
<managed-bean>
    <managed-bean-name>anotherCounterBean</managed-bean-name>
    <managed-bean-class>my.backingbean.CounterBeanClass</managed-bean-class>
    <managed-bean-scope>session</managed-bean-scope>
</managed-bean> 
```

现在您可以将两个计数器称为分离的 bean。

```
<h:form>
    <h:panelGrid columns="2">
        <h:outputText value="Counter 1" />
        <h:outputText value="#{counterBean.counter}" />
        <h:outputText value="Counter 2" />
        <h:outputText value="#{anotherCounterBean.counter}" />
        <h:commandButton value="Add Counter 1"
            action="#{counterBean.addCounterValue}" />
        <h:commandButton value="Add Counter 2"
            action="#{anotherCounterBean.addCounterValue}" />
    </h:panelGrid>
</h:form> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-29T17:54:14.703

怎么样

```
CounterBean cb1 = new CounterBean();
CounterBean cb2 = new CounterBean(); 
```

# wcf - 如何使用 IIS Express 发布 WCF 服务？

> ID：10374332
> 
> 赞同：1
> 
> 时间：2012-04-29T17:36:46.620
> 
> 标签：wcf, windows-7, iis-express

> **可能重复：**
> [使用 Web 部署在 IIS Express 上发布 WCF 服务应用程序](https://stackoverflow.com/questions/5704166/publish-wcf-service-app-on-iis-express-using-web-deployment)

我有 Windows 7 Home 基本操作系统，我想在上面发布 WCF 服务。由于 Windows7 Home Basic 不支持 IIS，我从[这里](http://www.microsoft.com/en-us/download/details.aspx?id=1038)下载了 IIS Express并安装了它。现在谁能指导我如何使用 IIS Express 发布 WCF 服务？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T09:54:13.890

StackOverflow 包含一些相同的帖子 -[在 IIS Express 中托管 WCF 服务问题](https://stackoverflow.com/questions/5489062/problem-hosting-wcf-service-in-iis-express)和使用 Web 部署在 IIS Express上[发布 WCF 服务应用程序](https://stackoverflow.com/questions/5704166/publish-wcf-service-app-on-iis-express-using-web-deployment)，您可以查看这篇文章 -[使用 IIS Express 保护 Silverlight 和 WCF 应用程序](http://weblogs.asp.net/dwahlin/archive/2011/05/21/using-iis-express-to-secure-silverlight-and-wcf-applications.aspx)

# hibernate - 为什么hibernate什么都不做？

> ID：10374336
> 
> 赞同：0
> 
> 时间：2012-04-29T17:37:06.430
> 
> 标签：hibernate, hibernate-mapping, hibernate-annotations

我已经用 Hibernate 3 建立了一个 Spring 项目，并且我正在使用注释。我刚刚实现了一个导入脚本，它填充一个对象并使用我从`HibernateSessionFactory.getSession()`调用中获得的会话对象进行保存。

我的配置看起来像这样（更改名称和详细信息以保护无辜者等）

```
<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
      "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
      "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<!-- Generated by MyEclipse Hibernate Tools.                   -->
<hibernate-configuration>

<session-factory>
    <property name="hbm2ddl.auto">update</property>
    <property name="dialect">
        org.hibernate.dialect.PostgreSQLDialect
    </property>
    <property name="connection.url">
    jdbc:postgresql://localhost:5432/foobar
    </property>
    <property name="connection.username">myuser</property>
    <property name="connection.password">mypass</property>
    <property name="connection.driver_class">
        org.postgresql.Driver
    </property>
    <property name="myeclipse.connection.profile">
        org.postgres.Driver
    </property>
    <mapping class="com.mycompany.Foo" />
    <mapping class="com.mycompany.Bar" />
</session-factory>

</hibernate-configuration> 
```

据我了解， hbm2ddl.auto=update 配置应该意味着我的表将自动创建。

我的 HibernateSessionFactory 看起来像这样：

```
package com.mycompany;

import org.hibernate.HibernateException;
import org.hibernate.Session;
import org.hibernate.cfg.Configuration;
import org.hibernate.cfg.AnnotationConfiguration;

/**
 * Configures and provides access to Hibernate sessions, tied to the
 * current thread of execution.  Follows the Thread Local Session
 * pattern, see {@link http://hibernate.org/42.html }.
 */
public class HibernateSessionFactory {

    /** 
     * Location of hibernate.cfg.xml file.
     * Location should be on the classpath as Hibernate uses  
     * #resourceAsStream style lookup for its configuration file. 
     * The default classpath location of the hibernate config file is 
     * in the default package. Use #setConfigFile() to update 
     * the location of the configuration file for the current session.   
     */
    private static String CONFIG_FILE_LOCATION = "/hibernate.cfg.xml";
    private static final ThreadLocal<Session> threadLocal = new ThreadLocal<Session>();
    private static Configuration configuration = new AnnotationConfiguration();    
    private static org.hibernate.SessionFactory sessionFactory;
    private static String configFile = CONFIG_FILE_LOCATION;

    static {
        try {
            configuration.configure(configFile);
            sessionFactory = configuration.buildSessionFactory();
        } catch (Exception e) {
            System.err.println("%%%% Error Creating SessionFactory %%%%");
            e.printStackTrace();
        }
    }

    private HibernateSessionFactory() {
    }

    /**
     * Returns the ThreadLocal Session instance.  Lazy initialize
     * the <code>SessionFactory</code> if needed.
     *
     *  @return Session
     *  @throws HibernateException
     */
    public static Session getSession() throws HibernateException {
        Session session = (Session) threadLocal.get();

        if (session == null || !session.isOpen()) {
            if (sessionFactory == null) {
                rebuildSessionFactory();
            }
            session = (sessionFactory != null) ? sessionFactory.openSession() : null;
            threadLocal.set(session);
        }

        return session;
    }

    /**
     *  Rebuild hibernate session factory
     *
     */
    public static void rebuildSessionFactory() {
        try {
            configuration.configure(configFile);
            sessionFactory = configuration.buildSessionFactory();
        } catch (Exception e) {
            System.err.println("%%%% Error Creating SessionFactory %%%%");
            e.printStackTrace();
        }
    }

    /**
     *  Close the single hibernate session instance.
     *
     *  @throws HibernateException
     */
    public static void closeSession() throws HibernateException {
        Session session = (Session) threadLocal.get();
        threadLocal.set(null);

        if (session != null) {
            session.close();
        }
    }

    /**
     *  return session factory
     *
     */
    public static org.hibernate.SessionFactory getSessionFactory() {
        return sessionFactory;
    }

    /**
     *  return session factory
     *
     *  session factory will be rebuilded in the next call
     */
    public static void setConfigFile(String configFile) {
        HibernateSessionFactory.configFile = configFile;
        sessionFactory = null;
    }

    /**
     *  return hibernate configuration
     *
     */
    public static Configuration getConfiguration() {
        return configuration;
    }
} 
```

我很确定我正确使用了这段代码，基本上我的代码逻辑如下：

```
Session session = HibernateSessionFactory.getSession();

Foo foo = new Foo();
...
session.save(foo); 
```

所以这应该要么保存我的对象，要么开始对我做错的愚蠢的事情大喊大叫。没发生什么事。

日志中没有输出，表仍然不存在，我已经手动测试了连接，并通过直接使用配置的 Eclipse 插件进行了测试。即使是`save()`调用也没有效果或错误。

这是配置错误还是逻辑错误？干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T17:47:29.630

您至少有以下问题：您没有启动和提交任何事务。阅读[http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#transactions-demarcation-nonmanaged](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#transactions-demarcation-nonmanaged)以了解有关您应该如何处理 Hibernate 事务的详细信息。

Note that since you're using Spring, you should definitely use its Hibernate support, which would completely avoid the need for this HibernateSessionFactory class, and would allow you to demarcate transactions declaratively, instead of programmatically. Don't reinvent the wheel, and read [http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#orm-hibernate](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#orm-hibernate).

# objective-c - 使用字符串的值来转换对象

> ID：10374349
> 
> 赞同：0
> 
> 时间：2012-04-29T17:37:46.673
> 
> 标签：objective-c, cocoa-touch, casting

我必须将对象转换为包含在字符串中的类型，但我不知道这是否可能。

我的课程在一个字符串中：

```
NSString *myClass = @"User"; 
```

我有一个我想用这种类型投射的对象。

```
object = (myClass)object; // Doesn't work
object = (myClass *)object; // Doesn't work 
```

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T18:02:48.710

这样做是没有意义的——对象的静态类型只在编译时被检查，而且这只能在运行时发生，即使有办法做到这一点（因为字符串等对象实际上直到运行时才存在）。

如果您试图将对象从一个类更改为另一个类，那无论如何都行不通——从一种指针类型转换为另一种指针类型只会让编译器知道它指向的数据类型，它实际上并没有改变数据。为了将对象从一种类型转换为另一种类型，必须有一种方法或函数从旧对象中获取数据并创建所需类型的新对象（例如`dataUsingEncoding:`从 NSString 转换为 NSData 的 NSString）。

但是，如果您有一个动态选择的类，并且需要某种类型来为该类的实例提供变量，则可以使用`id`（如果所有可能的类都响应相同的消息，则可能使用协议）。

# c# - 比较和报告两个数据库之间的不同数据

> ID：10374350
> 
> 赞同：0
> 
> 时间：2012-04-29T17:37:50.127
> 
> 标签：c#, .net, linq, sql-server-2008, reflection

我的应用程序的数据库包含我的应用程序运行所必需的表（用户不可编辑）。例如，有一个**报告**表，其中包含我的 SSRS 报告列表。

除了自动增量和 GUID 字段，我的**报告**表中的数据应该在所有数据库中匹配。

为了使现有的客户端数据库与从头创建的数据库保持同步，有一个数据库更新程序应用程序可以运行脚本来更新现有的客户端群。

有单元测试可确保报告在两种类型的数据库上正确运行。但是，除了开发人员的眼睛，没有系统检查来确保这些行中的行和值在表之间匹配。这很容易出现人为错误。

为了解决这个问题，我计划在单元测试报告中添加一个小报告，该报告将为以下内容的开发提供信息：

1.  “更新”数据库中存在的“从零开始”数据库中缺失的记录
2.  “Made From Scratch”数据库中存在的“Updated”数据库中缺失的记录
3.  表之间不匹配的字段

到目前为止，我有一个查询来报告所有涉及的表的上述信息。

示例查询如下所示：

```
--Take the fields I want to compare from TableToCompare in MadeFromScratch and put them in @First_Table_Var
--NOTE:  MyFirstField should match in both tables in order to compare the values between rows
DECLARE @First_Table_Var table(
    MyFirstField Varchar(255),
    MySecondField VarChar(255),
    MyThirdField Varchar(255),
    );

INSERT INTO @First_Table_Var
    SELECT
        r.MyFirstField,
        r.MySecondField,
        l.MyThirdField
    FROM
        MadeFromScratch.dbo.TableToCompare r
            INNER JOIN  MadeFromScratch.dbo.LookUpTable l ON r.ForeignKeyID = l.PrimaryKeyID

--Take the fields I want to compare from TableToCompare in UpdatdDatabase and put them in @Second_Table_Var
DECLARE @Second_Table_Var table(
    MyFirstField Varchar(255),
    MySecondField VarChar(255),
    MyThirdField Varchar(255),
    );

INSERT INTO @Second_Table_Var
    SELECT
        r.MyFirstField,
        r.MySecondField,
        l.MyThirdField
    FROM
        UpdatdDatabase.dbo.TableToCompare r
            INNER JOIN  UpdatdDatabase.dbo.LookUpTable l ON r.ForeignKeyID = l.PrimaryKeyID

--**********************
--   CREATE OUTPUT
--**********************

--List Rows that exist in @Second_Table but not @First_Table
--(e.g. these rows need to be added to the table in MadeFromScratch)
SELECT 
    Problem = '1 MISSING ROW IN A MADE-FROM-SCRATCH DATABASE',
    hur.MyFirstField,
    hur.MySecondField,
    hur.MyThirdField
FROM 
    @Second_Table_Var hur
WHERE
    NOT EXISTS
    (SELECT 
        *
     FROM 
        @First_Table_Var hu 
     WHERE
        hu.MyFirstField = hur.MyFirstField
    )

UNION

--List Rows that exist in @First_Table but not @Second_Table
--(e.g. these rows need to be added to the table in UpdatdDatabase)
SELECT 
    Problem = '2 MISSING IN UPDATE DATABASE',
    hur.MyFirstField,
    hur.MySecondField,
    hur.MyThirdField
FROM 
    @First_Table_Var hur
 WHERE 
    NOT EXISTS
    (SELECT 
        * 
     FROM
        @Second_Table_Var hu 
     WHERE
        hu.MySecondField = hur.MySecondField 
    )

UNION   

--Compare fields among the tables where MyFirstField matches, but 
SELECT 
    Problem = '3 MISMATCHED FIELD',
    h.MyFirstField,
    MySecondField = CASE WHEN h.MySecondField = hu.MySecondField    THEN '' ELSE 'Created Value:  ' + h.MySecondField                       + '  Updated Value:  '  + hu.MySecondField                  END,
    MyThirdField    = CASE WHEN h.MyThirdField = hu.MyThirdField        THEN '' ELSE 'Created Value:  ' + CAST(h.MyThirdField AS VARCHAR(4))    + '  Updated Value:  '  + CAST(hu.MyThirdField AS VARCHAR(4))   END,

 FROM
    @First_Table_Var h
        INNER JOIN @Second_Table_Var hu on h.MyFirstField  = hu.MyFirstField
 WHERE 
    NOT EXISTS
    (SELECT 
        *
     FROM
        @Second_Table_Var hu 
     WHERE
        hu.MyFirstField = h.MyFirstField and 
        hu.MySecondField = h.MySecondField and
        hu.MyThirdField = h.MyThirdField and
    )

ORDER BY Problem 
```

我编写代码来解析结果不会有任何问题，但由于以下原因，这种方法*感觉过时了：*

1.  需要编写几个查询（本质上做同样的事情）
2.  此过程的维护可能会很麻烦

我希望能够编写一些东西，其中要比较的表和字段列表由某种文件（XML？）维护。因此，无论是添加字段还是更改字段，用户所要做的就是更新此文件。

有没有办法使用 LINQ 和/或反射（或 .NET 4.0 中的任何功能），我可以比较两个数据库之间的表并像上面列出的那样维护它们？

欢迎提出想法。有一个例子的想法会很棒！:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T19:06:58.303

你说*“除了自动增量和 GUID 字段，我的报告表中的数据应该在所有数据库中匹配。”*

我假设这些字段是 ID 字段，理想情况下，数据库的复制也应该复制 id 字段，以确保这将允许您按 ID 检查新插入，在更新的情况下，您可以设置时间戳字段进行比较。

# iphone - iPhone SQLite 数据库未更新

> ID：10374353
> 
> 赞同：0
> 
> 时间：2012-04-29T17:38:07.157
> 
> 标签：iphone, database, sqlite

我刚刚更新了我的 sqlite 数据库（添加了一些新记录） - 保存它，将它重新导入我的 Xcode 项目，然后重新运行我的应用程序 - 所有新数据都按预期在 iPhone 模拟器上显示得非常好。

但是，在我的 iPhone 上安装该应用程序后，我仍然获得与该应用程序的先前版本捆绑在一起的*旧数据。*我当然首先从 iPhone 中删除了旧版本的应用程序，假设它会因此破坏其“文档”文件夹和其中的旧 db 文件 - 但由于某种原因它仍在读取（或显示）旧数据 -这是没有意义的。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T00:54:27.187

更改数据库后尝试重新启动设备，然后查看获得的结果类型。

# c - C 实践测试整数和字符数组

> ID：10374355
> 
> 赞同：-1
> 
> 时间：2012-04-29T17:38:11.883
> 
> 标签：c

我在练习测试中被问到这个问题，没有发布答案。我无法测试代码，但它让我感到困惑。您能否帮助我不仅理解答案，而且理解为什么。

```
int foo() {
    int a = 1;
    char b[] = "zapples";
    a = *(b + 1);
    if (a == 'a') return 1;
    else return 0;
}
What does foo return? ____ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T17:45:24.880

他们教过你 C 指针是如何工作的吗？

我不会给你一个直接的答案，但请考虑一下：

`b`具有字符串“zapples”的起始地址。这意味着`b[0]`指向“z”。另一种表示法是`*(b + 0)`，即“地址 中包含的值`b`，偏移量为`0`)。有了这些信息， 的值是`*(b + 1)`多少？

这应该足以解决练习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T17:45:25.410

它将返回 1。

线`a = *(b + 1)`是重要的。它将 b 作为指向数组中第一个元素的指针并添加一个以指向第二个元素。然后将其取消引用，以便将该地址 'a' 处的值分配给变量`a`。

# javascript - Fancybox 没有关闭

> ID：10374356
> 
> 赞同：1
> 
> 时间：2012-04-29T17:38:15.140
> 
> 标签：javascript, jquery, html, fancybox

我的网站出现错误。当我尝试关闭 Fancybox 插件的框架时，它并没有全部关闭。屏幕仍处于锁定状态。

在控制台调试中我可以看到这个错误`Object doesn't support property or method 'swing'`，在这一行：`this.pos=f.easing[i.animatedProperties[this.prop]](this.state,c,0,1,i.duration)`

[要在线观看，请点击http://www.justmp3.cn/baixar/david-guetta/](http://www.justmp3.cn/baixar/david-guetta/)上的一些音乐链接

如果有人知道我应该怎么做才能解决我的问题，我会非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T18:36:51.370

**您的缓动**插件有问题。尝试从[这里](http://gsgd.co.uk/sandbox/jquery/easing/)获取并包括

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T18:41:22.330

要使用“摇摆”效果，它需要缓动插件并且您没有添加它，因此您应该包括

```
<script type="text/javascript" src="http://your_domain/fancybox/jquery.easing-1.4.pack.js"></script> 
```

> 可选 - 默认情况下将过渡添加为 jQuery 仅支持“swing”和“linear”

**参考：** [**fancybox**](http://fancybox.net/howto)。

# algorithm - 为什么使用 Dijkstra 算法而不是 Best (Cheapest) First Search？

> ID：10374357
> 
> 赞同：14
> 
> 时间：2012-04-29T17:38:21.300
> 
> 标签：algorithm, search, graph, dijkstra

从我到目前为止所读到的。就找到目标的最短路径而言，最佳优先搜索似乎更快，因为 Dijkstra 的算法必须在遍历图形时放松所有节点[。](https://en.wikipedia.org/wiki/Best-first_search)是什么让 Dijkstra 的算法比 Best First Search 更好？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-29T17:39:34.863

**编辑**：您的编辑表明您对*Best-First Search*感兴趣，而不是*BFS*。

**最佳优先搜索实际上是一种知情算法**，它首先扩展最有希望的节点。非常类似于众所周知[的 A* 算法](http://en.wikipedia.org/wiki/A*_search_algorithm)（实际上 A* 是一种特定的最佳优先搜索算法）。

**Dijkstra 是不知情的算法**- 当您不了解图并且无法估计每个节点到目标的距离时，应该使用它。

请注意，当您对[每个](http://en.wikipedia.org/wiki/Heuristic_function) .`h(v) = 0``v`

此外，**Best First Search 不是最优**的[不能保证找到最短路径]，如果不使用[可接受的启发式函数](http://en.wikipedia.org/wiki/Admissible_heuristic)，A* 也不是最优的，而 Dijkstra 的算法始终是最优的，因为它不依赖任何启发式。

**结论**：当您对图有一些了解并且可以估计与目标的距离时，应该首选最佳优先搜索而不是 dijkstra。如果您不这样做 - 使用`h(v) = 0`并且仅在已经探索的顶点上中继的不知情的最佳优先搜索会衰减到 Dijkstra 的算法。
此外，如果最优性很重要 - Dijkstra 算法始终适合，而只有在适当的启发式函数可用时才能使用最佳优先搜索算法（特别是 A*）。

* * *

**原始答案 - 回答为什么选择 Dijkstra 而不是 BFS：**

当涉及到**[加权图](http://en.wikipedia.org/wiki/Glossary_of_graph_theory#Weighted_graphs_and_networks)**时，BFS 会失败。

**例子：**

```
 A
   /   \
  1     5
 /       \
B----1----C 
```

在这里：`w(A,B) = w(B,C) = 1, w(A,C) = 5`。

来自 A 的 BFS 将`A->C`作为最短路径返回，但对于加权图，它是一个权重为 5 的路径！！！而最短路径的权重为 2: `A->B->C`.
Dijkstra 的算法不会犯这个错误，并返回最短的加权路径。

**如果您的图表未加权 - BFS 既最优又完整**- 并且通常应该比 dijkstra 更受欢迎 - 两者都因为它更简单和更快（至少渐近地说）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T18:09:52.253

通常是路径查找中的[最佳优先搜索算法，搜索两个给定节点之间的路径：](http://en.wikipedia.org/wiki/Best-first_search) *Source*和*Sink*，但 Dijkstra 的算法查找源和所有其他节点之间的路径。所以你不能比较它们。Dijkstra 本身也是一种[最佳优先搜索](http://en.wikipedia.org/wiki/A%2a_search_algorithm#Special_cases)（ A ^*的变体）意味着你不能说它不是最佳优先搜索。正常的最佳优先搜索算法也使用启发式算法，它们不能保证正确性，最后在加权情况下，它们的运行时间通常取决于权重，但 Dijkstra 的算法仅取决于图形大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-15T07:38:55.073

BFS 适用于在所有边具有相同权重的情况下找到从源到顶点的最短路径，即找到从源到顶点的最小边数。虽然 Dikjstra 适用于加权图

# c - 重定向标准输出时删除的日志文件

> ID：10374363
> 
> 赞同：1
> 
> 时间：2012-04-29T17:38:57.550
> 
> 标签：c, unix

我有一些代码，我在其中重定向`stdout`到`logfile`（通常的，`dup, open, and dup2`）然后恢复`stdout`。只要我`C`在两者之间有一些代码，它就可以正常工作，当我调用`system()`并执行一些`shell/perl`脚本时，我看到`logfile`在执行结束时被删除了！（被调用的脚本没有`logfile`名称，也不做任何事情`unlink`）我可以在脚本执行*时*`logfile`看到正在编写的内容。

 *代码块是这样的：

```
 /redirect-stdout-to-logfile/
  system(scripts);
  /reset-stdout/ 
```

我想将所有消息捕获`stdout`到`logfile`. 任何有助于进一步调试的帮助，或非常感谢的提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T17:53:35.687

如果没有源代码，很难判断出什么问题。

在您致电之前，您的*“恢复”*似乎`stdout`并不完整`system()`。

我想到的是使用`exec`家族而不是`system`因为`exec`知道您的进程在调用外部程序时所拥有的文件描述符。（尽管在这种情况下，文件描述符打算被关闭。）*

# objective-c - 在特定位置插入文本

> ID：10374365
> 
> 赞同：0
> 
> 时间：2012-04-29T17:39:06.317
> 
> 标签：objective-c, xcode, uitextview

我有一个带有一些文本的 TextView。我有一个必须插入单词的按钮。问题是使用“stringByAppendingString”我不能在光标位置输入单个单词而不删除之前和之后的内容。

有什么方法可以在您想要的位置插入文本吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T18:00:19.787

使用 ' text View ' 的 ' text ' 属性获取要在其中插入单词的字符串，然后使用字符串的 'insertString:atIndex:' 属性并替换 textview 文本。. . . 希望这可以帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T17:49:54.507

你应该使用类似的东西：

```
NSMutableString *string1 = [NSMutableString stringWithString: @"The quick brown fox jumped"];

[string1 insertString: @"agile, " atIndex: 4]; 
```

# java - 运行spring应用程序时的PropertyAccessorFactory NoClassDefFoundError

> ID：10374366
> 
> 赞同：0
> 
> 时间：2012-04-29T17:39:09.253
> 
> 标签：java, spring

初始化spring应用程序时我面临以下异常？我不知道缺少什么罐子。我的类路径中有以下罐子，

spring-2.5.jar spring-test-2.5.jar spring-webmvc-2.5.5.jar standard-1.1.2-sources.jar jstl-1.2.jar commons-logging-1.0.4.jar

java.lang.NoClassDefFoundError: org/springframework/beans/PropertyAccessorFactory

```
INFO: Starting Servlet Engine: Apache Tomcat/6.0.32
29-Apr-2012 23:00:49 org.apache.catalina.core.ApplicationContext log
SEVERE: StandardWrapper.Throwable
java.lang.NoClassDefFoundError: org/springframework/beans/PropertyAccessorFactory
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:114)
    at javax.servlet.GenericServlet.init(GenericServlet.java:212)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1173)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:993)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4420)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4733)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: java.lang.ClassNotFoundException: org.springframework.beans.PropertyAccessorFactory
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    ... 19 more
29-Apr-2012 23:00:49 org.apache.catalina.core.StandardContext loadOnStartup
SEVERE: Servlet /springmvc threw load() exception
java.lang.ClassNotFoundException: org.springframework.beans.PropertyAccessorFactory
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:114)
    at javax.servlet.GenericServlet.init(GenericServlet.java:212)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1173)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:993)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4420)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4733)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
29-Apr-2012 23:00:49 org.apache.coyote.http11.Http11Protocol start 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T17:50:36.507

您使用的是 spring webmvc 2.5.5，但只有 spring 2.5 - 尝试使用`spring-2.5.5.jar`，**或**添加`spring-beans-2.5.5.jar`。

您最好对所有弹簧组件使用相同的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T17:45:49.420

你错过了春豆罐-`spring-beans-<version>.jar`

# java - 如何检查值是否已存在于 android sqlite 数据库中？

> ID：10374367
> 
> 赞同：4
> 
> 时间：2012-04-29T17:39:12.123
> 
> 标签：java, android, sql, database, sqlite

我有应用程序，用户在其中输入特定日期的姓名和其他详细信息。我需要检查值/名称用户是否尝试添加已存在于数据库列**名称**中。我有这段代码，但这不起作用，因为它只选择一个值。谢谢

```
Cursor c = dbe.rawQuery("SELECT name FROM tbl_user WHERE meeting_date LIKE'" + mydate + "'", null);

if ((c.getString(3)).equals(editTextName.getText().toString()))

{
// do something
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T17:50:45.080

如果您只检查字段中是否存在值，最简单的方法是使用适当的过滤器进行选择计数。

类似的东西

```
SELECT count(*)
FROM tbl_user
WHERE meeting_date LIKE ' + my_date'
AND name = ' + editTextName.getText() + ' 
```

这将使您能够轻松快速地确定这些值是否存在于您的表中。

如果您需要检查多个表，则必须在这些表之间进行连接并相应地编写过滤器。

如果碰巧你没有很好地处理 SQL。
这个站点是一个很好的起点： [W3Schools SQL 教程](http://www.w3schools.com/sql/default.asp)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T18:05:16.667

您只选择一列 ( `name`)，但在您`if`尝试比较（不存在的）第三列的内容（不确定您为什么要这样做，但这显然是个问题）。

与其尝试那样做，为什么不使用列标题呢？

所以你`if`看起来像这样（并且列在光标中的位置无关紧要）：

```
if (c.getString(c.getColumnIndex("name")).equals(editTextName.getText().toString())) 
```

# css - 为什么我的元素在缩放时会改变位置？

> ID：10374369
> 
> 赞同：3
> 
> 时间：2012-04-29T17:39:30.607
> 
> 标签：css, position

我正在这个网站上工作。当我放大浏览器（ctr +/-）时，顶部的元素会改变位置（菜单和特色滑块）。无论缩放如何，有没有办法让它们保持在某个位置。

这是该网站的链接 - [http://www.independentlynew.com/dev/5church](http://www.independentlynew.com/dev/5church)

[![这是正确定位的截图](../Images/c17e2e0d1132c495ec2ad9cf8b5d5752.png)](https://i.stack.imgur.com/Far4b.jpg)

[![这是缩放后定位不正确的截图](../Images/a8c7c21b0d0ad680506df4159afd35ae.png)](https://i.stack.imgur.com/1VIbc.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T17:46:39.527

似乎主菜单容器溢出了徽标容器，导致它被向上推。这很可能是由那些具有访问边距或填充，完全适合其包装器的容器以及缩放期间使用的浏览器舍入方法引起的。

尝试从`#menu`容器中删除左侧填充：

```
#menu {
    float: right;
    background: url(images/left-menu-bg.png) no-repeat top left;
    /* padding-left: 12px; */
    height: 48px;
    margin-top: 40px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T17:42:17.867

浏览器通常具有较差的缩放算法，导致在放大或缩小时出现舍入错误。

我相信这更像是一个用户代理问题，因为 iOS 版本的 Safari 在执行缩放时没有问题，而其他浏览器则有。

# android - 服务如何检测到活动已关闭？

> ID：10374371
> 
> 赞同：0
> 
> 时间：2012-04-29T17:39:38.067
> 
> 标签：android, android-service, android-activity, android-2.3-gingerbread

我有一个*启动*类型和*绑定*类型的服务（定义[在这里](http://developer.android.com/guide/topics/fundamentals/services.html)）。它开始无限期地运行，然后一个单独的应用程序绑定到它：当这个应用程序被销毁时，它调用它的`unbindService`on`onDestroy`方法。

该服务应检测到此应用程序已完成。我读到了[onUnbind](http://developer.android.com/reference/android/app/Service.html#onUnbind%28android.content.Intent%29)方法，*当所有客户端都从服务发布的特定接口断开连接时调用*该方法。但是，我不需要知道所有客户端何时断开连接，而是任何断开连接。是否可以？

我认为，在关闭期间（在`onDestroy`方法内部），应用程序可以向服务发送消息（利用服务已绑定的事实）：稍后它应该调用该`unbindService`方法，如下所示。

```
// method of the application
@Override
public void onDestroy() {
    super.onDestroy();
    service.closed();   // service is defined by IService.aidl
    unbindService(...);
} 
```

这样，应用程序会将最后一条消息发送到服务（`service.closed()`方法），然后取消绑定服务。它可以正常工作吗？`service.closed()`当消息到达其目的地时该方法是否返回？或者是否存在由于下一次调用方法而导致消息未传递的风险`unbindService`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T18:14:57.417

> 是否可以？

让活动`Binder`在取消绑定之前调用一个方法，以指示它正在断开连接。

> 它可以正常工作吗？

它应该。AIDL 调用是同步的，因此在您的示例中使用 , 调用`unbindService()`之后才会发生。`Binder``closed()`

# c - 检测当前是否正在读取文件

> ID：10374376
> 
> 赞同：0
> 
> 时间：2012-04-29T17:40:52.153
> 
> 标签：c, file-io

我正在使用多线程的 libonion 库编写一些东西，我只是想知道您将如何检测声明的任何文件指针当前是否正在被任何其他线程*读取。*

（基本上我想创建手动处理的临时文件，如果没有人再读它们，它们就会被删除。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T18:05:58.960

文件指针只是指向文件资源的指针，仅通过查看指针无法确定是否有其他线程正在读取它。您可能希望在文件指针旁边声明一个互斥锁和一个全局锁计数。当任何线程打算读取它时，它可以获得互斥锁上的共享锁，增加锁计数并在线程不打算进一步读取文件时在减少锁计数后释放它。

您可以查询此锁定计数以查看该值是否为零，在这种情况下您可以安全地释放它。

另请注意，由于此锁定计数是全局的，并且您最终可能会处于竞争状态，因此应以独占方式读取和更新锁定计数变量。

# python - 内置非数据版本的属性？

> ID：10374379
> 
> 赞同：9
> 
> 时间：2012-04-29T17:41:14.113
> 
> 标签：python

```
class Books():
    def __init__(self):
        self.__dict__['referTable'] = 1

    @property
    def referTable(self):
        return 2

book = Books()
print(book.referTable)
print(book.__dict__['referTable']) 
```

跑步：

```
vic@ubuntu:~/Desktop$ python3 test.py 
2
1 
```

`Books.referTable` [作为数据描述符](http://docs.python.org/reference/datamodel.html#invoking-descriptors)不受以下影响`book.__dict__['referTable']`：

> 该`property()`函数被实现为数据描述符。因此，实例不能覆盖属性的行为。

为了隐藏它，我必须使用我自己的描述符而不是`property`内置描述符。是否有内置描述符，`property`但它不是数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T17:51:46.500

为了扩展我的评论，为什么不简单地像这样：

```
>>> class Books():
...     def __init__(self):
...         self.__dict__['referTable'] = 1
...     @property
...     def referTable(self):
...         try:
...             return self.__dict__['referTable']
...         except KeyError:
...             return 2
... 
>>> a = Books()
>>> a.referTable
1
>>> del a.__dict__['referTable']
>>> a.referTable
2 
```

现在，我想指出，我认为这不是一个好的设计，你最好使用私有变量而不是`__dict__`直接访问。例如：

```
class Books():
    def __init__(self):
        self._referTable = 1

    @property
    def referTable(self):
        return self._referTable if self._referTable else 2 
```

简而言之，答案是否定的，`property()`在 Python 标准库中没有其他选择可以按照您想要的方式工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-26T23:21:09.523

有一些与内置非数据描述符非常相似的东西——类属性：

```
class Books():

    referTable = 'default'

    def __init__(self, referTable=None):
        if referTable is not None:
            self.referTable = referTable

book = Books()
print(book.referTable)
# default
book.referTable = 'something specific'
print(book.referTable)
# something specific 
```

如果您需要更像属性的东西（例如，您希望一个函数第一次做一些繁重的工作，但随后将第一个值用于所有将来的引用），那么您需要自己构建它：

```
class OneTime(object):

    def __init__(self, method):
        self.name = method.__name__
        self.method = method

    def __get__(self, inst, cls):
        if inst is None:
            return self
        result = self.method(inst)
        inst.__dict__[self.name] = result
        return result

class Books(object):

    @OneTime
    def referTable(self):
        print 'calculating'
        return 1 * 2 * 3 * 4 * 5

b = Books()
print b.__dict__
print b.referTable
print b.__dict__
print b.referTable 
```

结果如下：

```
{}
calculating
120
{'referTable': 120}
120 
```

# sql - 创建日期范围表

> ID：10374380
> 
> 赞同：4
> 
> 时间：2012-04-29T17:41:16.737
> 
> 标签：sql, sqlite

我正在写一份需要每天显示一个值的报告。我有查询的开始日期和结束日期，但我希望避免丢失日期，以防表不包含特定日期的值。我正在考虑创建一个基本日期范围表，该表包含开始和结束之间的所有日期，然后将其与数据表连接起来以显示每一天的值。

我找到了一些适用于 mySQL、SQL Server 等的脚本，但没有找到适用于 SQLite 的脚本。有没有办法用日期范围快速填充表格？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T08:27:23.047

以下是使用数字表扩展范围的方法：

```
SELECT
  datetime('now', N || ' seconds') AS DT
FROM numbers
WHERE N < strftime('%s', 'now', '1 minutes') - strftime('%s', 'now'); 
```

在这种情况下，数字表应该保存从 0 开始的数字。

数字表是一个值得为许多目的而方便使用的工具。您可以像这样初始化它，例如：

```
CREATE TABLE numbers (N int);
/* #0 */ INSERT INTO numbers (N) SELECT 0;
/* #1 */ INSERT INTO numbers (N) SELECT N + C FROM numbers, (SELECT COUNT(*) AS C FROM numbers);
/* #2 */ INSERT INTO numbers (N) SELECT N + C FROM numbers, (SELECT COUNT(*) AS C FROM numbers);
/* #3 */ INSERT INTO numbers (N) SELECT N + C FROM numbers, (SELECT COUNT(*) AS C FROM numbers);
/* #4 */ INSERT INTO numbers (N) SELECT N + C FROM numbers, (SELECT COUNT(*) AS C FROM numbers);
/* #5 */ INSERT INTO numbers (N) SELECT N + C FROM numbers, (SELECT COUNT(*) AS C FROM numbers);
/* #6 */ INSERT INTO numbers (N) SELECT N + C FROM numbers, (SELECT COUNT(*) AS C FROM numbers);
/* #… */ 
```

每行在表中产生 2 ^(*N*)行，最大的行数是`#*N*`*`2^(*N*)-1`*

 *可以[在 SQL Fiddle 上](http://sqlfiddle.com/#!5/1050f/5)找到（并使用）该方法的演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T18:24:23.597

这取决于您想要的详细程度。如果您只是想要从 A 到 B 的日期，您可以这样做：

```
declare @start datetime
set @start = '04/20/2012'
while @start <getdate() begin
  print @start
  set @start = dateadd(dd,1,@start)
end 
```

只需将打印更改为表格上的插入即可。

如果您需要更多详细信息，您可能需要更详细的脚本。我可以为您指出一些，只是更具体地说明您的要求*

# c# - 将 XML 反序列化为 C# Windows 窗体

> ID：10374388
> 
> 赞同：0
> 
> 时间：2012-04-29T17:42:23.493
> 
> 标签：c#, xml, windows, winforms, deserialization

我有一个通过我的 Windows 表单创建的 XML 文件，用于保存两个文本字段和 2 个日期时间选择器。

我想知道如何将其“加载”（最好是通过询问用户文件在哪里）回到我的表单中，以便可以再次对其进行编辑和保存。

```
public class Values 
{
    public string task1_name { get; set;}
    public string task1_desc { get; set;}
    public DateTime task1_date { get; set;}
    public DateTime task1_time { get; set;}
} 
```

在我的表单上保存按钮

```
void SavebuttonClick(object sender, EventArgs e)
{
    DialogResult dialogResult = MessageBox.Show("Are you sure you want to save?",
        "Save", MessageBoxButtons.YesNo);

    if (dialogResult == DialogResult.Yes)
    {
        Values v = new Values();
        v.task1_name = this.task1_name.Text;
        v.task1_desc = this.task1_desc.Text;
        v.task1_date = this.task1_date.Value;
        v.task1_time = this.task1_time.Value;
        SaveValues(v);  
    }
} 
```

第三方

```
public void SaveValues(Values v)
{
    XmlSerializer serializer = new XmlSerializer(typeof(Values));
    using (TextWriter textWriter = new StreamWriter(@"E:\TheFile.xml"))
    {
        serializer.Serialize(textWriter, v);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T18:36:07.633

您可以将 xml 反序列化为一个对象并使用该对象重新加载字段。

为此，首先使用 xsd.exe 为该 xml 创建 xsd。然后您可以使用相同的 exe 创建类文件并使用 XmlSerializer 将 xml 反序列化为该对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T04:14:07.293

你可以这样做：

```
public void SomeMethod()
{
    Values v = LoadValues();
    this.task1_name.Text = v.task1_name;
    this.task1_desc.Text = v.task1_desc;
    this.task1_date.Value = v.task1_date;
    this.task1_time.Value = v.task1_time;
}

public Values LoadValues()
{
    XmlSerializer serializer = new XmlSerializer(typeof(Values));
    using (TextReader textReader = new StreamReader(@"E:\TheFile.xml"))
    {
        return (Values)serializer.Deserialize(textReader);
    }
} 
```

我建议将序列化程序放在一个变量中，这样就不会每次都创建它（构造一个新的 XmlSerializer 很昂贵）

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T17:49:56.677

您可以解析 xml 并使用解析的数据更新表单。Visual Studio 中有一个文件选择器对话框供用户选择文件。

```
XmlTextReader reader = new XmlTextReader ("books.xml");

while (reader.Read()) 
{
    // code
} 
```

# parsing - 用于解析编程语言的 CKY

> ID：10374390
> 
> 赞同：1
> 
> 时间：2012-04-29T17:42:55.163
> 
> 标签：parsing, syntax

使用 CKY 图表解析算法来解析编程语言的语法是不是一个好主意（要知道它多用于解析自然语言的语法）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T17:54:29.390

CKY 可以解析任何上下文无关的语言，但与其他语言相比，时间复杂度并不高。CKY 要求语法为乔姆斯基范式，这会增加语法的大小并影响运行时间。对于快速而肮脏的解析器来说，这是一种不错的方法，但是当您尝试扩展到更大的输入或复杂的语法时，您会遇到问题。

如果您正在寻找一种易于理解且实现起来相对简单的解析算法，请查看 Parsing Expression Grammars (PEG)。他们可以识别大量的上下文无关语言，以及一些上下文敏感性有限的语言。一旦你有了一个工作的 PEG 解析器，就很容易添加 memoization，它为你提供了一个在线性时间内运行的 Packrat 解析器。关于[PEGs](http://bford.info/pub/lang/peg.pdf)、[Packrat](http://bford.info/pub/lang/packrat-icfp02.pdf)的学术论文，以及[这个](http://www.cs.ucla.edu/~todd/research/pepm08.pdf)允许左递归语法的扩展都是可以理解的。

# c# - 从 Hashlist 中检索 TcpClient

> ID：10374391
> 
> 赞同：0
> 
> 时间：2012-04-29T17:43:24.747
> 
> 标签：c#, tcpclient

我正在用 C# 开发一个用于管理的开放 telnet 端口的聊天程序。交易是每次客户端连接到服务器时，服务器都会将他的昵称和套接字存储在哈希列表中。有没有办法找回 TcpClient 以便我可以做`TcpClient.Disconnect()`或`Close()`？

我的代码：

```
// When the client enters the server
   clientsList.Add(dataFromClient, clientSocket);
// This will add the nick and tcpclient to the Hashtable 
```

有没有办法找回它，以便我可以做`Close()`或`disconnect()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T17:46:06.813

这应该给你 TcpClient：

```
 clientsList[dataFromClient] 
```

# android - AutoCompleteTextView 导致 ListView 中的项目消失

> ID：10374392
> 
> 赞同：0
> 
> 时间：2012-04-29T17:43:42.637
> 
> 标签：android, commonsware

我正在做 Android 教程中添加列表部分的额外信用部分。我尝试使用 ArrayAdapter 中包含的项目填充 AutoCompleteTextView (ACTV)，但如果 addr 字段中的字符超过阈值限制，则列表不会显示任何项目。这是代码：

```
public class MyActivity extends Activity
{
List<Restaurant> model = new ArrayList<Restaurant>();
ArrayAdapter<Restaurant> adapter = null;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button save = (Button)findViewById(R.id.save);
    save.setOnClickListener(onSave);

    ListView list = (ListView)findViewById(R.id.restaurants);

    adapter = new ArrayAdapter<Restaurant>(this,
                    android.R.layout.simple_list_item_1,
                    model);
    list.setAdapter(adapter);

    AutoCompleteTextView textView = (AutoCompleteTextView)findViewById(R.id.addr);
    textView.setAdapter(adapter);
}

private View.OnClickListener onSave= new View.OnClickListener(){
    ...
};
} 
```

和 XML...

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="match_parent"
    android:layout_width="match_parent">
<TableLayout
    android:id="@+id/details"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:stretchColumns="1"
    android:shrinkColumns="1"
    android:layout_alignParentBottom="true"
    >
    <TableRow>
        <TextView android:text="Name:"/>
        <EditText android:id="@+id/name"/>
    </TableRow>

    <TableRow>
        <TextView android:text="Address:"/>
        <AutoCompleteTextView android:id="@+id/addr"
                              android:completionThreshold="5"
                />
    </TableRow>
    <TableRow>
        <TextView android:text="Type:"/>
        <RadioGroup android:id="@+id/types">
            <RadioButton android:id="@+id/take_out"
                         android:text="Take Out"
                         android:layout_height="wrap_content"
                         android:layout_width="wrap_content"
                         android:checked="true"
                         />
            <RadioButton android:id="@+id/sit_down"
                         android:text="Sit Down"
                         android:layout_width="wrap_content"
                         android:layout_height="wrap_content"/>
            <RadioButton android:id="@+id/delivery"
                         android:text="Delivery"
                         android:layout_height="wrap_content"
                         android:layout_width="wrap_content"/>
        </RadioGroup>
    </TableRow>
    <Button
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:id="@+id/save"
            android:text="Save"/>
</TableLayout>
<ListView android:id="@+id/restaurants"
          android:layout_width="match_parent"
          android:layout_height="wrap_content"
          android:layout_alignParentTop="true"
          android:layout_above="@id/details"/>
</RelativeLayout> 
```

更改 completionThreshold 会更改在列表中的项目消失之前我可以输入的字符数。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T18:12:10.333

您正在尝试对 和 使用相同的`ListView`适配器`AutoCompleteTextView`。这不是一个好主意。请使用单独的适配器。您甚至可能希望与 一起使用的适配器有一个单独的布局`AutoCompleteTextView`（例如`android.R.layout.simple_dropdown_item_1line`，正如我在[此示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/Selection/AutoComplete)中使用的那样）。

# iphone - 如何从我的 iphone 应用程序将显示从白底黑字更改为黑底白字？

> ID：10374394
> 
> 赞同：0
> 
> 时间：2012-04-29T17:44:14.983
> 
> 标签：iphone, objective-c, ios5, ipad-2

我需要将文本更改为白色并从我的 iphone 应用程序中制作背景。因此，它需要从应用程序内的编码访问 iphone 设置（常规>>辅助功能>>黑底白字）。任何人都可以提供一些想法来访问 iphone 应用程序中的这些设置功能吗？

提前感谢您的任何建议。

# windows-phone-7 - Windows Phone 7 操作系统是否支持 44.1 kHz 的采样频率？

> ID：10374395
> 
> 赞同：0
> 
> 时间：2012-04-29T17:44:26.097
> 
> 标签：windows-phone-7, audio

我想知道 Windows Phone 7 操作系统在录制音频时是否支持 44.1 kHz 的采样频率？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T18:00:02.487

您没有提到在什么情况下（录制？播放？），但一般来说，Windows Phone 的最低要求[是音频编解码器的最大 48kHz 采样率](http://msdn.microsoft.com/en-us/library/ff462087%28v=vs.92%29.aspx)。

所以，是的，它支持 44.1 kHz 采样率。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T18:01:24.470

麦克风的采样率[固定为 16KHz](http://msdn.microsoft.com/en-us/magazine/gg598930.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-29T06:46:10.053

当前的答案具有误导性——16 kHz 采样率是示例中使用的特定 XNA 麦克风类的限制，而不是操作系统的限制。

通过扩展 AudioSink 类，您可以以更高的采样率访问音频：http: [//msdn.microsoft.com/en-us/library/system.windows.media.audiosink (v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.audiosink(v=vs.95).aspx)

# mysql - MySQL 不使用索引（尽管 FORCE INDEX）

> ID：10374398
> 
> 赞同：2
> 
> 时间：2012-04-29T17:44:31.743
> 
> 标签：mysql, sql, indexing, innodb

我需要使用 PHP 和 jQuery 进行实时搜索，以从两个表`cities`（几乎 3M 行）和`countries`（几百行）中选择城市和国家。

有一段时间我在考虑使用不支持搜索的`MyISAM`表，但是决定这不是一种方法（频繁的表崩溃，所有其他表都是等等，并且 MySQL 5.6+也开始支持索引）。`cities``InnoDB``FULLTEXT``InnoDB``InnoDB``FULLTEXT`

所以，现在我仍然使用 MySQL 5.1，因为大多数城市只包含一个单词或最多 2-3 个单词，但是例如“New York”——如果他们的意思是“New York”，大多数人不会搜索“York” . 所以，我只是在列上放了一个索引`city_real`（这是一个 varchar）。

以下查询（我在不同的版本中尝试过，没有任何`JOIN`和没有`ORDER BY`，有`USE INDEX`甚至有`FORCE INDEX`，我试过用 LIKE 代替等于（=）但另一篇文章说 = 更快，如果通配符只在最后，没关系使用它），`EXPLAIN`它总是说“使用哪里，使用文件排序”。查询的平均时间约为 4 秒，您必须承认这对于实时搜索来说有点慢（用户在文本框中输入并查看城市和国家/地区的建议）......

实时搜索（jQuery ajax）搜索用户是否输入了至少 3 个字符...

```
SELECT ci.id, ci.city_real, co.country_name FROM cities ci LEFT JOIN countries co ON(ci.country_id=co.country_id) WHERE city_real='cit%' ORDER BY population DESC LIMIT 5 
```

有一个`PRIMARY`on`ci.id`和一个`INDEX`on `ci.city_real`。任何想法为什么 MySQL 不使用索引？或者我怎样才能加快查询速度？或者我应该/不应该在哪里设置一个`INDEX`？

非常感谢您的帮助！

* * *

这是解释输出

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE  ci  range   city_real   city_real   768 NULL    1250    Using where; Using filesort
1   SIMPLE  co  eq_ref  PRIMARY PRIMARY 6   fibsi_1.ci.country_id   1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T17:47:01.827

你应该使用`WHERE city_real LIKE 'cit%'`，而不是`WHERE city_real='cit%'`。

> 我试过用 LIKE 代替等于 (=) 但另一篇文章说 = 更快，如果通配符只在最后，可以使用它

这是错误的。`=`不支持通配符，所以它会给你错误的结果。

> 或者我怎样才能加快查询速度？

`country_id`确保在两个表中都有索引。`EXPLAIN SELECT ...`如果您需要进一步的帮助，请发布输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T18:25:17.690

`key`查询确实使用了在解释输出字段中看到的索引。它使用文件排序的原因是 order by，它使用 where 的原因可能是字段之一（city_real、population）允许空值。

# android - 从 Eclipse 调试 Android 小部件

> ID：10374399
> 
> 赞同：0
> 
> 时间：2012-04-29T17:44:33.607
> 
> 标签：android, android-widget

我很接近，但是在使用模拟器或真实设备从 Eclipse 调试我的小部件时遇到了奇怪的问题。我正在做的是在我的 Java 代码中设置一些断点，使用 Run -> Debug 在目标上安装小部件，然后将其添加到主屏幕。

此时，我的配置活动出现并等待输入。使用 DDMS 透视图，我可以附加到小部件的进程并继续配置活动。如果我在配置活动中有断点（例如在 onClick 中），Eclipse 会像往常一样中断，我可以像往常一样单步执行代码。

当我在用于更新小部件的 Service 类中放置断点时会出现问题，该小部件由我的配置活动在完成时启动。Eclipse 在断点处暂停，但如果我尝试单步执行代码，经过几步之后，Eclipse 似乎失去了与进程的连接，我的服务模块起飞并运行其其余代码以完成（或崩溃！），从而难以追踪问题。

有人知道这里发生了什么吗？我注意到的一件奇怪的事情是，当我的断点发生时，Eclipse 会为“OtdService.class”打开一个新选项卡，而不是“OtdService.java”，这是我实际设置断点的地方。但也许这是通过 DDMS 附加时的预期行为。

# php - CodeIgniter - 表单验证设置为 false

> ID：10374402
> 
> 赞同：0
> 
> 时间：2012-04-29T17:44:49.040
> 
> 标签：php, forms, codeigniter, validation

我有一些用于图像上传的脚本，我将它与表单验证一起使用。所以这是代码：

```
$this->form_validation->set_rules('name','Name','required|max_length[30]|xss_clean');
$this->form_validation->set_rules('desc','Description','required|xss_clean');

if ($this->form_validation->run() == TRUE)
{
    $config = array(
        'allowed_types' => 'jpg|jpeg|png|gif',
        'upload_path' => path/to/folder,
        'max_size' => 3000,
        'max_height' => 1024,
        'max_width' => 1024,
        'remove_spaces' => TRUE
    );
    $this->load->library('upload', $config);

    if ($this->upload->do_upload())
    {
        //code for insert this data into database
    }
    else
    {
        //code for FALSE the form validation and error message with flashdata
    } 
```

现在，如果图像上传出现错误，我想伪造表格。我想像某些字段的错误（如果它是空的）一样这样做，以获取帖子变量的数据（对于字段的内容）。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T17:52:47.420

和的`else`条件应该是相似的。`$this->form_validation->run()``$this->upload->do_upload()`

表单验证：

```
$data['error_message'] = validation_errors();
$this->load->view('form', $data); 
```

上传文件：

```
$data['error_message'] = $this->upload->display_errors();
$this->load->view('form', $data); 
```

“表单”视图是最初加载的视图。它可以有一个这样的 div：

```
<div class="error_message">
   <?php if ($error_message) {
      echo $error_message;
   } ?>
</div> 
```

# javascript - 自动显示用户名是否可用于 JQuery

> ID：10374403
> 
> 赞同：0
> 
> 时间：2012-04-29T17:45:02.400
> 
> 标签：javascript, jquery, mysql, html, forms

我正在尝试查看是否已在 mysql 数据库中使用了用户名，并且它似乎不想工作。理想情况下，它会在我在表格上输入时显示。任何帮助将不胜感激，因为我没有看到代码有任何问题。

在我的主页上是 jquery、javascript 和 html 的代码。对应的页面是testusername.php。

```
<script type="text/javascript">
$(document).ready(function() {
$('#feedback').load('testusername.php').show();
$('#username_input').keyup(function() {
$.post('testusername.php', { username:form.username.value }, 
function(result) {
$('#feedback').html(result).show();
});
});
});
</script>

<form name='form'>
<fieldset>
<legend>Test Form</legend>
Username: <br /><input type='text' id='username_input' name='username'></input>
</fieldset>
</form>
<div id = "feedback"></div> 
```

testusername.php 是：

```
<?php 
include 'functions2.php';
?>
<?php
$username = mysql_real_escape_string($_POST['username']);
$query1a = mysql_query("SELECT * FROM users WHERE username='$username'");
$count = mysql_num_rows($query1a);
if ($count==0)
{
echo "Available";   
}
else {
echo "Username exists";
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T17:48:25.350

该脚本应该可以处理您的客户端部分，假设您已将 jQuery 正确加载到您的 pafe。

```
<script type="text/javascript">
$(document).ready(function() {
  $('#username_input').keyup(function() {
     $.post('testusername.php', { username: $(this).val() },function(result){
      $('#feedback').html(result).show();
     });
   });
});
</script> 
```

对于服务器端，不要在查询中使用 *。您可能会使用类似的东西，`SELECT 1 FROM ....`您可能还想确保您不会成为[SQL Injection](http://www.unixwiz.net/techtips/sql-injection.html)的受害者。

# c++ - 在 Eclipse 中编译时出错：ld: symbol(s) not found for architecture x86_64

> ID：10374404
> 
> 赞同：0
> 
> 时间：2012-04-29T17:45:03.960
> 
> 标签：c++, eclipse

很长一段时间后，我才重新开始使用 C++。我在 Macbook Pro 上使用 Eclipse，我尝试制作一个链接列表的小项目。

当我尝试编译我的项目时，我遇到了这个错误：
`ld: symbol(s) not found for architecture x86_64`

仅当我`#include "SingleLinkedList.h"`在 main.cpp 中执行与 相关的操作时才会发生这种情况`SingleLinkedist`，否则在 main 中删除上述 SingleLinkedList，项目编译罚款。我一直在寻找关于 SO 的类似问题，但有同样的错误，但似乎没有一个能帮助我解决这个问题。

如果需要的话，这里是类文件：
据我所知，以前的一切都以相同的方式在 Eclipse 上正常工作。前段时间我刚刚升级到 Lion，并安装了新的 Xcode 和新的 Eclispe，现在却面临着奇怪的问题，而不是专注于编码。

**单链表.cpp**

```
#include "SingleLinkedList.h"

template<class T>
SingleLinkedList<T>::~SingleLinkedList()
{
    Node<T> *temp = head;
    while(head!=0)
    {
        temp = head;
        head = temp->next;
        delete temp;
    }
}

template <class T>
void SingleLinkedList<T>::addToHead(int item)
{
    head = new Node<T>(item, head);
    if (tail==0)
        tail = head;
}

template <class T>
void SingleLinkedList<T>::addToTail(int item)
{
    if(tail!=0)
    {
    tail->next = new Node<T>(item);
    tail = tail->next;
    }
    else
        head = tail = new Node<T>(item);
}

template <class T>
int SingleLinkedList<T>::deletefromHead()
{
    int e1 = head->info;
    Node<T> *temp = head;
    if(head ==tail)
    {
    head = tail = 0;
    }
    else
        head = temp->next;
    delete temp;
    return e1;
}

template <class T>
int SingleLinkedList<T>::deletefromTail()
{
    int e1 = tail->info;
    if(head == tail)
    {
        delete head;
        head = tail = 0;
    }
    else{
        Node<T> *temp = head;
        while(temp->next != tail)
            temp = temp->next;
        delete tail;
        tail = temp;
        tail->next = 0;
    }
    return e1;
}

template <class T>
void SingleLinkedList<T>::deleteNode(int item)
{
    if(head!=0) {
        if(head == tail && head->info){ //If this is the only item in the linked list
            delete head;
            head = tail = 0;
        }
        else if (item == head->info){
            Node<T> *temp = head;
            head = temp->next;
            delete temp;
        }
        else{
            Node<T> *temp = head;
            while(temp->next->info != item && temp->next !=0 ){
                temp = temp->next;
            }
            if(temp!=0){
                temp->next = temp->next->next;
                temp = temp->next;
                delete temp;
            }
        }
    }
}

template <class T>
bool SingleLinkedList<T>::isEmpty()
{
    return head == 0;
}

template <class T>
bool SingleLinkedList<T>::isInList(int item)const
{
    Node<T> * temp = head;
    while(temp!=0)
    {
        if(temp->info == item){
            break;
        }
        temp = temp->next;
    }
    return temp->info == item;
}

template<class T>
SingleLinkedList<T>::SingleLinkedList()
{
    head = tail = 0;
} 
```

**SingleLinkedList.h**

```
#include "Node.h"

#ifndef SINGLELINKEDLIST_H_
#define SINGLELINKEDLIST_H_

template <class T>
class SingleLinkedList {
public:
    SingleLinkedList();
    ~SingleLinkedList();

    bool isEmpty();
    bool isInList(int)const;

    void addToHead(int);
    void addToTail(int);
    int deletefromHead();
    int deletefromTail();
    void deleteNode(int);
private:
    Node<T> *head;
    Node<T> *tail;
};
#endif /* SINGLELINKEDLIST_H_ */ 
```

**主文件**

```
 #include <iostream>
#include "SingleLinkedList.h"
using namespace std;
int main() {
    SingleLinkedList<int> listfile;
    listfile.addToHead(2);
    listfile.addToHead(4);
    listfile.addToHead(6);
    listfile.addToHead(8);
    listfile.addToHead(10);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T19:46:06.053

实际上，这不起作用的原因是因为您没有为模板类定义头文件，具有单独的实现，因为模板没有编译器生成的实现。因此，拥有 .cpp 文件是不正确的 c++。将其全部内联或仅保留在标题中。[请参阅最底部的以下内容](http://www.cplusplus.com/doc/tutorial/templates/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T17:50:08.080

您需要确保它们位于构建路径中，以便 eclipse 知道将 .cpp 文件链接到二进制文件的其余部分。转到项目-> 属性-> c++ 常规-> 路径和符号-> 源位置，您应该可以从那里设置它。再次构建时，通过查看构建日志确保正在构建包含实现的 .cpp 文件。

如果您不包括整个构建日志，那么添加您的源代码并没有太大帮助，只是说。

# node.js - node_redis ：在 forEach 中使用 client.multi

> ID：10374406
> 
> 赞同：1
> 
> 时间：2012-04-29T17:45:17.773
> 
> 标签：node.js, redis, node-redis

我有以下代码应该检索设备列表并获取每个设备的状态和标签：

```
app.get('/test', function(req, res){
  db.smembers("devices", function(err1, devices){
    var jsonObj = {};
    if(!err1) {
       var i = 0;
       devices.forEach(function(id){
          db.multi([
             ["get", id + ":label"],
             ["get", id + ":status"],
          ]).exec(function (err, replies) {
             jsonObj[id] = {"label":replies[0], "status":replies[1]};
             console.log(jsonObj);     // stuff is added on each loop
          });

          i = i + 1;
          if(i == devices.length){  
             console.log(jsonObj);     // jsonObj is {}     
             h.respond(res, jsonObj);
          }
       });
    } else {
       h.respond(res, { "error" : err1 });
    }
  });
}); 
```

devices 是一个 id 列表。对于每个 id，有 2 个键：“ID:status”、“ID:label”

h.respond 是一个发送 http 响应的辅助方法。

我可以看到每个循环都将新数据添加到 jsonObj 中，但是当所有循环完成时，它是空的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T17:54:55.817

代码异步运行，并且在任何 Redis 调用实际完成之前计数到 devices.length（在继续之前它不会等待回调 from`multi`返回）。将您的支票移入回调将防止这种情况发生。

```
app.get('/test', function(req, res){
  db.smembers("devices", function(err1, devices){
    var jsonObj = {};
    if(!err1) {
       var i = 0;
       devices.forEach(function(id){
          db.multi([
             ["get", id + ":label"],
             ["get", id + ":status"],
          ]).exec(function (err, replies) {
             jsonObj[id] = {"label":replies[0], "status":replies[1]};
             console.log(jsonObj);     // stuff is added on each loop
             i = i + 1;
             if(i == devices.length){  
                console.log(jsonObj);     // jsonObj is {}     
                h.respond(res, jsonObj);
             }
          });

       });
    } else {
       h.respond(res, { "error" : err1 });
    }
  });
}); 
```

将这段代码移动到一个单独的函数中可能更有意义，但希望你明白这一点。像这样的异步库`async`提供了辅助方法，使执行这样的并行异步循环变得更加容易。

# javascript - jQuery + 在不同时间多次附加克隆？

> ID：10374410
> 
> 赞同：4
> 
> 时间：2012-04-29T17:45:32.460
> 
> 标签：javascript, jquery

我有这个表格，其中有一个部分，用户可以指定无限数量的值对，特别是语言和熟练程度。

我的 DOM 结构如下：

```
<ul id="language-list">
    <li class="user-language-item">
        <select name="language[]" class="user-language-select">...</select>
        Level: <select name="proficiency[]">...</select>
        <input type="button" value="Remove" class="remove-language" />
    </li>
    <li class="user-language-item">
        <select name="language[]" class="user-language-select">...</select>
        Level: <select name="proficiency[]">...</select>
        <input type="button" value="Remove" class="remove-language" />
    </li>
    <li class="user-language-item">
        <select name="language[]" class="user-language-select">...</select>
        Level: <select name="proficiency[]">...</select>
        <input type="button" value="Remove" class="remove-language" />
    </li>
</ul>
<input type="button" value="Add another language..." id="add-a-language" /> 
```

如果用户单击`Add another language...`按钮，则应将包含相同表单元素的新列表项插入到列表中。

这是我的代码：

```
$(function(){

    //Save a clone of one list item during initialization.
    var liItem = $('.user-language-item').last().clone(); 

    $('#add-a-language').click(function(){

        //Append the clone to the list item. But this only works once!
        $('#language-list').append(liItem);

    });

    //Note that there might be an instance where there are no list items present, which is why I opted to clone the a list item during initialization.
    $('.remove-language').live('click', function(){
        $(this).parents('li.user-language-item').fadeOut(500, function(){
            $(this).remove();
        });
    });

}); 
```

但是克隆似乎只能使用一次。第二次单击该`Add a language...`按钮时，不会附加任何列表项。（有趣的是，当我在控制台上输出变量时，它仍然包含克隆！）

解决这个问题的一种方法是将 HTML 标记保存为字符串，但我避免使用这种方法，因为元素是通过 PHP 动态加载的，我宁愿在需要修改标记时只更改代码的一部分-向上。

我怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-29T17:49:35.167

每次要添加时都必须克隆它

```
 $('#add-a-language').click(function(){
       var liItem = $('.user-language-item').last().clone(); 
        //Append the clone to the list item. But this only works once!
        $('#language-list').append(liItem);

    }); 
```

[演示](http://jsfiddle.net/mprabhat/Et68V/3/)

根据评论：

像这样保持一里：

```
<li class="user-language-item hidden" id="placeHolderLi">
    <select name="language[]" class="user-language-select">...</select>
    Level: <select name="proficiency[]">...</select>
    <input type="button" value="Remove" class="remove-language" />
</li> 
```

在哪里`.hidden`标记它`display:none;`

```
.hidden{
  display:none;
} 
```

然后在克隆时，您总是克隆这个 li 并使其可见，这样即使用户删除了所有 li，仍然可以添加新元素。

```
$('#add-a-language').click(function(){
      var liItem = $('.user-language-item:first').clone(true).show();
      //Append the clone to the list item. But this only works once!
      $('#language-list').append(liItem);
 }); 
```

[演示](http://jsfiddle.net/mprabhat/Q5Zg2/1/)

# linux - 唯一的文件 ID？

> ID：10374412
> 
> 赞同：0
> 
> 时间：2012-04-29T17:45:36.517
> 
> 标签：linux, shell, command-line, filesystems

我正在制作一个应用程序，它将保存某些文件的信息。我想知道跟踪文件的最佳方法是什么。我正在考虑使用文件的绝对路径，但如果文件被重命名，那可能会改变。我发现如果你运行 ls -i 每个文件旁边都有一个唯一的 ID（？）。可以用于唯一的文件ID吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T17:53:40.227

每个设备的 inode 都是唯一的，但我不建议使用它，因为假设您的机器崩溃并且您将所有文件移动到新文件系统，现在您的所有文件都有新的 id。

这实际上取决于您选择的语言，但几乎所有语言都包含一个用于生成 UUID 的库。虽然理论上可能发生碰撞，但它确实不是问题。生成 UUID 并将其添加到文件的前面，然后您就可以开展业务了。随着实现的增长，它还允许您创建文件的 HashTable 索引，以便以后快速查找。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T20:57:51.330

问题是，“在什么方面独一无二？”

如果您在给定的时间点在给定的机器上需要一些独特的东西，那么是的，inode 号 + 设备号几乎总是唯一的 - 这些可以从 C 中的 stat() 或类似的东西，python 中的 os.stat() 获得. 但是，如果您删除一个文件并创建另一个文件，则可能会重复使用该 inode 编号。此外，两个不同的主机可能对设备、inodeno 对的概念完全不同。

如果您需要一些东西来描述文件的内容（因此具有相同内容的两个文件具有相同的 id），您可以查看 SHA 或 RIPEMD 函数之一。这将是非常独特的——意外碰撞的几率非常低。

如果您需要其他形式的唯一性，请详细说明。

# c# - 在 C# Gridview 中搜索

> ID：10374413
> 
> 赞同：0
> 
> 时间：2012-04-29T17:45:39.327
> 
> 标签：c#, asp.net, gridview

我有一个网格视图，它显示了我保存的所有数据。当我单击日期搜索按钮时，数据会绑定在我在文本框中键入的特定日期的网格视图中。但是，当我尝试通过单击网格视图寻呼机按钮进入下一页时，网格视图日期会绑定保存日期的所有页面。它不是那个特定日期的绑定数据。请帮我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T18:05:03.373

you can implement `PageIndexChanging` as below.

```
protected void GridViewExtUsers1_PageIndexChanging(object sender, GridViewPageEventArgs e)
{

    // Set the index of the new display page. 
    GridView1.PageIndex = e.NewPageIndex;

    // Rebind the GridView control 
    // if on search mode bind search results 
    // otherwise bind all data. 
    // implement your logic in different method
    BindGridView();
} 
```

# java - @see 标记，链接其他类方法

> ID：10374415
> 
> 赞同：13
> 
> 时间：2012-04-29T17:45:55.540
> 
> 标签：java, javadoc, netbeans-7

例如，假设我想使用 html 标记链接 java.lang.Double 的 equals 方法：

```
@see <a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Double.html#equals(java.lang.Object)"> 
```

这没关系，但我不明白如何链接非标准类。
例如，我正在开发两个类，名为 AbstractVehicle 和 Vehicle。但是没有 AbstractVehicle 的 javadoc 文档，因为它的文档还需要生成。
那我如何链接它的方法或类引用？考虑一下：

```
@see mypackage.AbstractVehilce 
```

这没有放置类 URL，我会在生成文档之前知道如何获取 URL 或它的引用。
我希望问题很清楚，否则请告诉我。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-29T17:55:31.910

要创建指向特定类的[链接](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javadoc.html#link)`{@link mypackage.AbstractVehicle}`，您可以使用标签。同样，您可以使用在类`{@link mypackage.AbstractVehicle#someMethod}`中创建链接。`someMethod()``AbstractVehicle`

更多关于 javadoc 的建议可以在 Oracle 的[javadoc - Java API 文档生成器](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javadoc.html)页面中找到。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T17:49:30.720

javadoc 的联机帮助页解释了`-link`以及`-linkoffline`哪些控制如何为未传递到的包生成链接`javadoc`。

```
 -link extdocURL
          Creates  links to existing javadoc-generated documentation
          of external referenced classes.  It takes one argument.

          extdocURL is the absolute or relative URL of the directory
          containing  the  external  javadoc-generated documentation
          you want to link to. Examples are shown below.  The  pack-
          age-list  file must be found in this directory (otherwise,
          use -linkoffline). The  Javadoc  tool  reads  the  package
          names  from  the package-list file and then links to those
          packages at that URL. When the Javadoc tool  is  run,  the
          extdocURL  value  is  copied  literally  into the <A HREF>
          links that are created. Therefore, extdocURL must  be  the
          URL to the directory, not to a file.

          You  can use an absolute link for extdocURL to enable your
          docs to link to a document on any website, or  can  use  a
          relative link to link only to a relative location. If rel-
          ative, the value you pass in should be the  relative  path
          from the destination directory (specified with -d ) to the
          directory containing the packages being linked to.

          When specifying an absolute link you normally use an http:
          link.   However, if you want to link to a file system that
          has no web server, you can use a file: link - however,  do
          this only if everyone wanting to access the generated doc-
          umentation shares the same file system.

          You can specify multiple -link options in a given  javadoc
          run to link to multiple documents.

          Choosing between -linkoffline and -link - One or the other
          option is appropriate when linking to an API document that
          is external to the current javadoc run.

          Use  -link: when using a relative path to the external API
          document, or when using an absolute URL  to  the  external
          API  document,  if  you  shell does not allow a program to
          open a connection to that URL for reading.

          Use -linkoffline : when  using  an  absolute  URL  to  the
          external API document, if your shell does not allow a pro-
          gram to open a connection to that URL for  reading.   This
          can  occur  if  you are behind a firewall and the document
          you want to link to is on the other side.

          ... 
```

并且`-link`在生成文档时要求您连接网络，以便它可以通过网络检索包列表，`-linkoffline`但不需要您自己提供包列表：

```
 -linkoffline extdocURL  packagelistLoc
          This option is a varition of -link; they both create links
          to javadoc-generated documentation for external referenced
          classes.  Use the -linkoffline option when  linking  to  a
          document  on  the  web  when  the  Javadoc  tool itself is
          "offline" - that is, it cannot access the document through
          a web connection.

          ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-29T17:55:45.333

[javadoc 工具文档](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/javadoc.html#@see)`@see`中描述了您可以添加的内容。您永远不应该放置任何外部类或方法文档的 URL。相反，您应该输入类/方法名称，并使用[-link 选项](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/javadoc.html#link)让 javadoc 为您找出合适的 URL。

# ruby-on-rails - 第 8 章 Rails 教程记住令牌错误

> ID：10374416
> 
> 赞同：6
> 
> 时间：2012-04-29T17:45:57.360
> 
> 标签：ruby-on-rails, remember-me

本章是关于添加记住令牌以确保记住用户的登录状态，并且只有在用户明确退出时才会清除会话。我了解在我的应用程序中使用此功能的重要性，因此希望确保它正常工作。但是，当我运行时，我遇到了一堆错误

```
$ bundle exec rspec spec/ 
```

我怀疑它们与我的用户模型有关，因为除了一个之外，它们都包含：

```
NoMethodError:
       undefined method `remember_token=' for #<User:...> 
```

最后一个包含

```
Failure/Error: it { should respond_to(:remember_token) } 
```

然后指向我的 user_spec.rb、user.rb 和 authentication_pages_spec.rb 文件，我在此处包含了大部分（相关部分）。

用户.rb：

```
# == Schema Information
#
# Table name: users
#
#  id         :integer         not null, primary key
#  name       :string(255)
#  email      :string(255)
#  created_at :datetime        not null
#  updated_at :datetime        not null
#

class User < ActiveRecord::Base
  attr_accessible :name, :email, :password, :password_confirmation
  has_secure_password

  before_save { |user| user.email = email.downcase }
  before_save :create_remember_token

  validates :name, presence: true, length: { maximum: 50 }
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence:   true,
                    format:     { with: VALID_EMAIL_REGEX },
                    uniqueness: { case_sensitive: false }
  validates :password, length: { minimum: 6 }
  validates :password_confirmation, presence: true

  private

      def create_remember_token
        self.remember_token = SecureRandom.urlsafe_base64
      end
end 
```

authentication_pages_spec.rb：

```
require 'spec_helper'

describe "Authentication" do

  subject {page}
  describe "signin page" do
    before { visit signin_path }
    it {should have_selector('h1', text: 'Sign in')}
    it {should have_selector('title', text: 'Sign in')}
  end

  describe "signin" do
    before {visit signin_path}

    describe "with invalid information" do
      before {click_button "Sign in"}

      it {should have_selector('title', text: 'Sign in')}
      it {should have_selector('div.alert.alert-error', text: 'Invalid')}

      describe "after visiting another page" do
              before { click_link "Home" }
              it { should_not have_selector('div.alert.alert-error') }
            end
    end

    describe "with valid information" do
          let(:user) { FactoryGirl.create(:user) }
          before do
            fill_in "Email",    with: user.email
            fill_in "Password", with: user.password
            click_button "Sign in"
          end

          it { should have_selector('title', text: user.name) }
          it { should have_link('Profile', href: user_path(user)) }
          it { should have_link('Sign out', href: signout_path) }
          it { should_not have_link('Sign in', href: signin_path) }
          end
  end
end 
```

和 user_spec.rb 的开头：

```
# == Schema Information
#
# Table name: users
#
#  id         :integer         not null, primary key
#  name       :string(255)
#  email      :string(255)
#  created_at :datetime        not null
#  updated_at :datetime        not null
#

require 'spec_helper'

describe User do

  before do
      @user = User.new(name: "Example User", email: "user@example.com", 
                       password: "foobar", password_confirmation: "foobar")
  end

  subject { @user }

  it { should respond_to(:name) }
  it { should respond_to(:email) }
  it { should be_valid }
  it { should respond_to(:password_digest) }
  it { should respond_to(:password) }
  it { should respond_to(:password_confirmation) }
  it { should respond_to(:authenticate) }
  it { should respond_to(:remember_token) }

  describe "remember token" do
      before { @user.save }
      its(:remember_token) { should_not be_blank }
    end
.
.
. 
```

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-14T03:33:27.100

如果您在 Heroku 上的生产中遇到此错误，请在运行后：

```
heroku run rake db:migrate 
```

您需要重新启动您的应用程序：

```
heroku restart 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T18:21:07.390

您是否生成了将列添加到 User 模型的迁移？

```
$ rails generate migration add_remember_token_to_users 
```

在此之后编辑迁移文件以添加新字段 remember_token

和

之后你需要做

```
$ bundle exec rake db:migrate
$ bundle exec rake db:test:prepare 
```

您在模型上的注释不显示该列。确保您执行了上述命令。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-18T23:24:56.247

我得到了类似的测试失败错误。我所做的是生成`remember_token`具有字符串类型的列。

```
rails generate migration add_remember_token_to_users remember_token:string --force

rake db:migrate RAILS_ENV=test 
```

之后，测试通过。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-07T16:41:09.130

我在学习 Mhartl 教程时遇到了同样的问题。我解决了。当您的数据库已经有一些用户数据时，这个问题就会出现，然后“remember_token”迁移将不起作用。您必须先清理您的日期，然后执行 db:migrate.like ：

rake db:drop db:create rake db:migrate （小心：这将删除所有数据）

希望帮助

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-09T14:31:32.357

我刚刚遇到了同样的问题，得到了未定义的方法 find_by_remember_token。

这是我为修复它所做的：

```
heroku run rake db:migrate 
```

然后再次推送到heroku

```
git push heroku 
```

# ruby - 从 ruby 调用时返回 shell 脚本的状态值？

> ID：10374418
> 
> 赞同：5
> 
> 时间：2012-04-29T17:45:58.937
> 
> 标签：ruby

我希望这些值匹配。当 shell 脚本由于某些错误情况而退出时，它们不匹配（因此返回非零值）。壳牌$？返回 1，红宝石 $? 返回256。

```
>> %x[ ls kkr]
ls: kkr: No such file or directory
=> ""
>> puts $?
256
=> nil
>> exit
Hadoop:~ Madcap$ ls kkr
ls: kkr: No such file or directory
Hadoop:~ Madcap$ echo $?
1 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-29T18:08:36.823

在 Ruby`$?`中就是一个`Process::Status`实例。打印`$?`相当于调用`$?.to_s`，相当于`$?.to_i.to_s`（来自文档）。

`to_i`不一样`exitstatus`。

从文档中：

> Posix 系统使用 16 位整数记录有关进程的信息。低位记录进程状态（已停止、已退出、已发出信号），高位可能包含附加信息（例如，在已退出进程的情况下程序的返回码）。

`$?.to_i`将显示整个 16 位整数，但您想要的只是退出代码，因此您需要调用`exitstatus`：

```
$?.exitstatus 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T18:04:07.543

请参阅[http://pubs.opengroup.org/onlinepubs/9699919799/functions/exit.html](http://pubs.opengroup.org/onlinepubs/9699919799/functions/exit.html)：

> status 的值可以是 0、EXIT_SUCCESS、EXIT_FAILURE、[CX] 或任何其他值，尽管只有最低有效 8 位（即 status & 0377）可用于等待的父进程。

unix 退出状态只有 8 位。256 溢出，所以我猜这种情况下的行为只是未定义的。例如，这发生在带有 Ruby 1.9.3 的 Mac OS 10.7.3 上：

```
irb(main):008:0> `sh -c 'exit 0'`; $?
=> #<Process::Status: pid 64430 exit 0>
irb(main):009:0> `sh -c 'exit 1'`; $?
=> #<Process::Status: pid 64431 exit 1>
irb(main):010:0> `sh -c 'exit 2'`; $?
=> #<Process::Status: pid 64432 exit 2>
irb(main):011:0> `sh -c 'exit 255'`; $?
=> #<Process::Status: pid 64433 exit 255>
irb(main):012:0> `sh -c 'exit 256'`; $?
=> #<Process::Status: pid 64434 exit 0> 
```

这与我的外壳指示的一致

```
$ sh -c 'exit 256'; echo $?
0 
$ sh -c 'exit 257'; echo $?
1 
```

我建议您修复 shell 脚本（如果可能）以仅返回 < 256 的值。

# c# - 获取集合的所有子集

> ID：10374419
> 
> 赞同：5
> 
> 时间：2012-04-29T17:46:03.117
> 
> 标签：c#, algorithm, set, subset

我正在尝试创建一个返回集合的所有子集的方法。

例如，如果我有集合`10,20,30` ，我希望得到以下输出

```
 return new List<List<int>>()
        {
            new List<int>(){10},
            new List<int>(){20},
            new List<int>(){30},
            new List<int>(){10,20},
            new List<int>(){10,30},
            new List<int>(){20,30},
            //new List<int>(){20,10}, that substet already exists
            // new List<int>(){30,20}, that subset already exists
            new List<int>(){10,20,30}
        }; 
```

因为集合也可以是字符串的集合，例如我想创建一个通用方法。这是我[根据这个解决方案](https://i.stack.imgur.com/wiIPE.jpg)制定的。

```
 static void Main(string[] args)
    {
        Foo<int>(new int[] { 10, 20, 30});
    }

    static List<List<T>> Foo<T>(T[] set)
    {

        // Init list
        List<List<T>> subsets = new List<List<T>>();

        // Loop over individual elements
        for (int i = 1; i < set.Length; i++)
        {
            subsets.Add(new List<T>(){set[i - 1]});

            List<List<T>> newSubsets = new List<List<T>>();

            // Loop over existing subsets
            for (int j = 0; j < subsets.Count; j++)
            {
                var tempList = new List<T>();
                tempList.Add(subsets[j][0]);
                tempList.Add(subsets[i][0]);
                var newSubset = tempList;
                newSubsets.Add(newSubset);
            }

            subsets.AddRange(newSubsets);
        }

        // Add in the last element
        //subsets.Add(set[set.Length - 1]);
        //subsets.Sort();

        //Console.WriteLine(string.Join(Environment.NewLine, subsets));
        return null;
    } 
```

* * *

编辑

对不起，这是错误的，我仍然得到重复...

```
 static List<List<T>> GetSubsets<T>(IEnumerable<T> Set)
    {
        var set = Set.ToList<T>();

        // Init list
        List<List<T>> subsets = new List<List<T>>();

        subsets.Add(new List<T>()); // add the empty set

        // Loop over individual elements
        for (int i = 1; i < set.Count; i++)
        {
            subsets.Add(new List<T>(){set[i - 1]});

            List<List<T>> newSubsets = new List<List<T>>();

            // Loop over existing subsets
            for (int j = 0; j < subsets.Count; j++)
            {
                var newSubset = new List<T>();
                foreach(var temp in subsets[j])
                    newSubset.Add(temp);

                newSubset.Add(set[i]);

                newSubsets.Add(newSubset);
            }

            subsets.AddRange(newSubsets);
        }

        // Add in the last element
        subsets.Add(new List<T>(){set[set.Count - 1]});
        //subsets.Sort();

        return subsets;
    } 
```

然后我可以将该方法称为：

![在此处输入图像描述](../Images/db1b7235be2c026513ba77fa728af674.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T17:58:13.487

这是一个基本算法，我使用以下技术来制作单人拼字游戏解算器（报纸上的解算器）。

让你的集合有`n`元素。将一个从 0 开始的整数递增到`2^n`。对于每个生成器编号位掩码，整数的每个位置。如果`i`整数的第 th 位置是`1`然后选择`i`集合的第 th 元素。对于每个生成的整数，从`0`执行`2^n`上述位控制和选择将为您提供所有子集。

这是一个帖子： http: [//phoxis.org/2009/10/13/allcombgen/](http://phoxis.org/2009/10/13/allcombgen/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-11T21:16:49.020

[这是对 Marvin Mendes 在此答案](https://stackoverflow.com/a/14818802/1159478)中提供的代码的改编，但被重构为带有迭代器块的单个方法。

```
public static IEnumerable<IEnumerable<T>> Subsets<T>(IEnumerable<T> source)
{
    List<T> list = source.ToList();
    int length = list.Count;
    int max = (int)Math.Pow(2, list.Count);

    for (int count = 0; count < max; count++)
    {
        List<T> subset = new List<T>();
        uint rs = 0;
        while (rs < length)
        {
            if ((count & (1u << (int)rs)) > 0)
            {
                subset.Add(list[(int)rs]);
            }
            rs++;
        }
        yield return subset;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T18:47:28.363

我知道这个问题有点老了，但我一直在寻找答案，但在这里找不到任何好处，所以我想分享这个解决方案，它是在这个博客中找到的改编版：http: [//praseedp.blogspot.com.br /2010/02/subset-generation-in-c.html](http://praseedp.blogspot.com.br/2010/02/subset-generation-in-c.html)

我只将类转换为泛型类：

```
public class SubSet<T>
{
    private IList<T> _list;
    private int _length;
    private int _max;
    private int _count;

    public SubSet(IList<T> list)
    {
        if (list== null)
            throw new ArgumentNullException("lista");
        _list = list;
        _length = _list.Count;
        _count = 0;
        _max = (int)Math.Pow(2, _length);
    }

    public IList<T> Next()
    {
        if (_count == _max)
        {
            return null;
        }
        uint rs = 0;

        IList<T> l = new List<T>();            

        while (rs < _length)
        {
            if ((_count & (1u << (int)rs)) > 0)
            {
                l.Add(_list[(int)rs]);                    
            }
            rs++;
        }
        _count++;
        return l;            
    }
} 
```

要使用此代码，您可以执行以下操作：

```
 List<string> lst = new List<string>();

        lst.AddRange(new string[] {"A", "B", "C" });

        SubSet<string> subs = new SubSet<string>(lst);

        IList<string> l = subs.Next();

        while (l != null)
        {

            DoSomething(l);
            l = subs.Next();
        } 
```

请记住：此代码仍然是 O(2^n)，如果您在列表中传递类似 20 个元素的内容，您将获得 2^20= 1048576 个子集！

**编辑**：正如 Servy 所建议的，我添加了一个带有 interator 块的实现以与 Linq 和 foreach 一起使用，新类是这样的：

```
private class SubSet<T> : IEnumerable<IEnumerable<T>>
    {
        private IList<T> _list;
        private int _length;
        private int _max;
        private int _count;

        public SubSet(IEnumerable<T> list)
        {
            if (list == null)
                throw new ArgumentNullException("list");
            _list = new List<T>(list);
            _length = _list.Count;
            _count = 0;
            _max = (int)Math.Pow(2, _length);
        }

        public int Count
        {
            get { return _max; }
        }

        private IList<T> Next()
        {
            if (_count == _max)
            {
                return null;
            }
            uint rs = 0;

            IList<T> l = new List<T>();

            while (rs < _length)
            {
                if ((_count & (1u << (int)rs)) > 0)
                {
                    l.Add(_list[(int)rs]);
                }
                rs++;
            }
            _count++;
            return l;
        }

        public IEnumerator<IEnumerable<T>> GetEnumerator()
        {
            IList<T> subset;
            while ((subset = Next()) != null)
            {
                yield return subset;
            }
        }

        System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
        {
            return GetEnumerator();
        }
    } 
```

你现在可以像这样使用它：

```
 List<string> lst = new List<string>();

        lst.AddRange(new string[] {"A", "B", "C" });

        SubSet<string> subs = new SubSet<string>(lst);

        foreach(IList<string> l in subs)
        {
            DoSomething(l);
        } 
```

感谢Servy的建议。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-26T03:35:11.893

它不给出重复值；

不要在子集的开头添加 int 数组的值

正确的程序如下：

```
class Program
    {
        static HashSet<List<int>> SubsetMaker(int[] a, int sum)
        {
            var set = a.ToList<int>();
            HashSet<List<int>> subsets = new HashSet<List<int>>();
            subsets.Add(new List<int>());
            for (int i =0;i<set.Count;i++)
            {
                //subsets.Add(new List<int>() { set[i]});
                HashSet<List<int>> newSubsets = new HashSet<List<int>>();
                for (int j = 0; j < subsets.Count; j++)
                {
                   var newSubset = new List<int>();
                   foreach (var temp in subsets.ElementAt(j))
                   {
                      newSubset.Add(temp);

                    }
                    newSubset.Add(set[i]);
                    newSubsets.Add(newSubset);

                }
                Console.WriteLine("New Subset");
                foreach (var t in newSubsets)
                {
                    var temp = string.Join<int>(",", t);
                    temp = "{" + temp + "}";
                    Console.WriteLine(temp);
                }
                Console.ReadLine();

                subsets.UnionWith(newSubsets);
            }
            //subsets.Add(new List<int>() { set[set.Count - 1] });
            //subsets=subsets.;
            return subsets;

        }
        static void Main(string[] args)
        {
            int[] b = new int[] { 1,2,3 };
            int suma = 6;
            var test = SubsetMaker(b, suma);
            Console.WriteLine("Printing final set...");
            foreach (var t in test)
            {
                var temp = string.Join<int>(",", t);
                temp = "{" + temp + "}";
                Console.WriteLine(temp);
            }
            Console.ReadLine();

        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-29T17:54:53.557

你不想返回一组列表，你想使用 java 的 set 类型。Set 已经通过只保存每种类型的一个独特元素来完成您正在寻找的部分工作。因此，例如，您不能两次添加 20。它是一种无序类型，因此您可以编写一个组合函数来创建一堆集合，然后返回一个包含这些集合的列表。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-03T09:29:02.797

**获取特定子集长度的集合的所有子集：**

```
 public static IEnumerable<IEnumerable<T>> GetPermutations<T>(IEnumerable<T> list, int length) where T : IComparable
    {
        if (length == 1) return list.Select(t => new T[] { t });
        return GetPermutations(list, length - 1).SelectMany(t => list.Where(e => t.All(g => g.CompareTo(e) != 0)), (t1, t2) => t1.Concat(new T[] { t2 }));
    }

    public static IEnumerable<IEnumerable<T>> GetOrderedSubSets<T>(IEnumerable<T> list, int length) where T : IComparable
    {
        if (length == 1) return list.Select(t => new T[] { t });
        return GetOrderedSubSets(list, length - 1).SelectMany(t => list.Where(e => t.All(g => g.CompareTo(e) == -1)), (t1, t2) => t1.Concat(new T[] { t2 }));
    } 
```

测试代码：

```
 List<int> set = new List<int> { 1, 2, 3 };
        foreach (var x in GetPermutations(set, 3))
        {
            Console.WriteLine(string.Join(", ", x));
        }
        Console.WriteLine();
        foreach (var x in GetPermutations(set, 2))
        {
            Console.WriteLine(string.Join(", ", x));
        }
        Console.WriteLine();
        foreach (var x in GetOrderedSubSets(set, 2))
        {
            Console.WriteLine(string.Join(", ", x));
        } 
```

测试结果：

```
1, 2, 3
1, 3, 2
2, 1, 3
2, 3, 1
3, 1, 2
3, 2, 1

1, 2
1, 3
2, 1
2, 3
3, 1
3, 2

1, 2
1, 3
2, 3 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-17T21:24:34.300

基于递归的简单算法：

```
private static List<List<int>> GetPowerList(List<int> a)
    {
        int n = a.Count;
        var sublists = new List<List<int>>() { new List<int>() };
        for (int i = 0; i < n; i++)
        {
            for (int j = i; j < n; j++)
            {
                var first = a[i];
                var last = a[j];
                if ((j - i) > 1)
                {
                    sublists.AddRange(GetPowerList(a
                        .GetRange(i + 1, j - i - 1))
                        .Select(l => l
                        .Prepend(first)
                        .Append(last).ToList()));
                }
                else sublists.Add(a.GetRange(i,j - i + 1));
            }
        }
        return sublists;
    } 
```

# git - 如何在 LibGit2Sharp 中获取有关 Stashes 的详细信息？

> ID：10374425
> 
> 赞同：2
> 
> 时间：2012-04-29T17:46:24.287
> 
> 标签：git, libgit2, libgit2sharp

有什么方法可以获取存储列表及其名称（可能还有其他信息），然后查看哪些文件发生了变化和差异？

我正在使用 LibGit2Sharp

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T18:22:17.420

**Diff**目前正在实施，应该可以作为下一个版本 (v0.9.0) 的一部分提供。

*   *“树到树”*的更改列表已经[可用](https://github.com/libgit2/libgit2sharp/commit/81b1186c4541130f4636b5af9340109a75378986#diff-0)。
*   *“Index to Workdir”*、*“Blob to blob”*和*“Index to Tree”*应该在接下来的几天内发布

隐藏的更改列表尚未实施。

**更新：**您仍然可以通过直接访问参考来访问最新的隐藏更改。像这样的东西可能会起作用：

```
[SkippableFact]
public void CanRetrieveTheLatestStashedChanges()
{
    using (var repo = new Repository("path/to/the/repository"))
    {
        Reference latestStash = repo.Refs["refs/stash"];

        InconclusiveIf(() => latestStash == null, "Nothing has been stashed.");

        var changes = repo.Lookup<Commit>(latestStash.TargetIdentifier);
        Assert.NotNull(changes);
    }
} 
```

# android - 共享数据库连接

> ID：10374433
> 
> 赞同：0
> 
> 时间：2012-04-29T17:47:34.123
> 
> 标签：android, sqlite, locking, thread-safety

我只需要一些验证，这是一种通过使用辅助类在我和我的应用程序之间共享`SQLlite`数据库连接的可行方法：`Activities``Services`

```
public class DatabaseHelper
{
    private static DBItems dbItems;
    private static SQLiteDatabase sdbItemsRead, sbItemsWrite;

    public static synchronized DBItems getHelper(Context context)
    {
        if (dbItems == null)
            dbItems = new DBItems(context);

        return dbItems;
    }

    public static synchronized SQLiteDatabase select(Context context)
    {
        if (sdbItemsRead == null)
            sdbItemsRead = getHelper(context).getReadableDatabase();

        return sdbItemsRead;
    }

    public static synchronized SQLiteDatabase write(Context context)
    {
        if (sbItemsWrite == null)
            sbItemsWrite = getHelper(context).getWritableDatabase();

        return sbItemsWrite;
    }
} 
```

在我的代码中，我调用它来选择数据：

```
DatabaseHelper.select(this).rawQuery("SELECT * FROM TABLE"); 
```

这要写入数据：

```
DatabaseHelper.write(this).update("tbl_items", cv, "[id] = ?", new String[] { itemId.toString() }); 
```

我需要这样做，因为我从不同的线程（UI 和后台）调用数据库，并且我收到“数据库被锁定”异常抛出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T17:55:07.690

如果您正在创建数据库并调用某些活动，那么它会正常工作，但是如果您希望您的数据库应该与服务一起运行，那么最好在自定义内容提供程序中编写数据库。

自定义内容提供程序将帮助您在后台运行数据库以及服务。

[您可以从此链接](http://ashwinrayaprolu.wordpress.com/2011/03/16/custom-content-provider-in-android/)引用自定义内容提供程序。

# c++ - 读取 stdio.h 时出现无限循环

> ID：10374435
> 
> 赞同：-2
> 
> 时间：2012-04-29T17:48:01.747
> 
> 标签：c++

为什么下面的程序会陷入无限循环？

```
int main()
{
    string fname = "C:\\Program Files\\Microsoft Visual Studio 9.0\\VC\\include\\stdio.h";
    char line[985];

    ifstream file(fname.c_str());

    if(file == NULL)
    {
        cout<<"unable to open";
        exit(0);
    }

    while(!file.eof())
    {
        file.getline(line,'\n');
        cout<<line<<'\n';
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T18:06:56.100

getline() 的第二个参数是流大小，第三个参数是分隔符。

而不是这个：

```
file.getline(line,'\n'); 
```

试试这个：

```
file.getline(line,256,'\n'); 
```

# sass - 如何使用 sass --precision？

> ID：10374438
> 
> 赞同：4
> 
> 时间：2012-04-29T17:48:36.193
> 
> 标签：sass, compass-sass

我正在尝试使用 sass + compass 来制作流体网格，并且在计算它们时我需要我的 % 至少有 8 位数字，但现在 sass + compass 正在将我的小数四舍五入为 3 位数字。我发现如果使用`--precision`你可以告诉 sass 舍入到你想要的位数，我的问题是我似乎可以弄清楚如何`--precision`从我的项目的终端开始工作。请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T01:09:09.557

根据[this answer](https://stackoverflow.com/questions/7672473/sass-and-rounding-down-numbers-can-this-be-configured)，在SASS的numbers.rb中配置@precision就可以达到这个效果。似乎 --precision 不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-04T18:28:43.463

```
sass --precision 6 input.scss output.css 
```

参考：[https ://stackoverflow.com/a/10369785](https://stackoverflow.com/a/10369785)

# visual-studio-2010 - 在 Visual Studio 中编译生成的文件

> ID：10374444
> 
> 赞同：0
> 
> 时间：2012-04-29T17:49:23.210
> 
> 标签：visual-studio-2010, visual-studio-2008

Visual Studio 是否有一些选项可以添加/编译在 Visual Studio 外部自动生成的所有选定文件，即在预构建事件中？如何实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T17:55:32.447

您可以自动生成它们一次，然后将其添加到项目中并进行编译...预构建将生成它们，然后您将使用新文件进行编译。

# symfony - 无法在 Symfony2 中启用 SoftDeleteable - 无法识别的选项“过滤器”

> ID：10374449
> 
> 赞同：5
> 
> 时间：2012-04-29T17:49:35.003
> 
> 标签：symfony, doctrine-orm

我在尝试激活 StofDoctrineExtensionsBundle 中的**SoftDeleteable**过滤器时**遇到**问题。[我按照手册](https://github.com/stof/StofDoctrineExtensionsBundle/blob/master/Resources/doc/index.rst)中的描述对其进行了配置：

```
# app/config/config.yml
doctrine:
    orm:
        entity_managers:
            default:
                filters:
                    softdeleteable:
                        class: Gedmo\SoftDeleteable\Filter\SoftDeleteableFilter
                        enabled: true 
```

但这就是我得到的：

```
[Symfony\Component\Config\Definition\Exception\InvalidConfigurationException]
Unrecognized options "filters" under "doctrine.orm.entity_managers.default" 
```

跑步`bin/vendors update`没有帮助。有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T17:58:30.007

首先，使用`bin/vendors update`是一个坏主意，因为它将所有供应商设置为最新版本。你应该`bin/vendors install`只使用。

其次，确保您使用的是 的`1.0.x`分支`StofDoctrineExtensionsBundle`，因为该`master`分支与 Symfony 不兼容`2.0.x`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-09T00:54:40.617

你可以自己做，这并不难，让你免于安装另一个包：

[http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/filters.html](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/filters.html)

# mysql - Mysql 用 IF THEN 触发

> ID：10374454
> 
> 赞同：16
> 
> 时间：2012-04-29T17:50:19.207
> 
> 标签：mysql, if-statement, triggers, innodb

我的存储是 INNODB，我正在尝试在 IF 语句中创建一个带有 2 个查询的触发器。向下你可以看到给我错误的触发器

```
delimiter |
CREATE TRIGGER count_delete_videos BEFORE DELETE ON videos
  FOR EACH ROW BEGIN
    UPDATE counts SET count = count - 1 WHERE name = 'all';

    IF OLD.published = 1 THEN
        DELETE FROM videos_categories WHERE id_video = OLD.id;
        DELETE FROM videos_tags WHERE id_video = OLD.id;
    END IF;
  END;
|
delimiter ;

You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '= OLD.id;
    END IF;
  END' at line 6 
```

这是我用第一个触发器激活的 2 个触发器。

```
delimiter |
CREATE TRIGGER count_delete_videos_tags AFTER DELETE ON videos_tags
  FOR EACH ROW BEGIN
    UPDATE tags SET count = count - 1 WHERE id = OLD.id_tag;
  END;
|
delimiter ;

delimiter |
CREATE TRIGGER count_delete_videos_categories AFTER DELETE ON videos_categories
  FOR EACH ROW BEGIN
    UPDATE categories SET count = count - 1 WHERE id = OLD.id_category;

    IF OLD.id_category <> 20 AND OLD.id_category <> 34 THEN
        UPDATE counts SET count=count-1 WHERE name='english';
    ELSEIF OLD.id_category = 34 THEN
        UPDATE counts SET count=count-1 WHERE name='german';
    ELSEIF OLD.id_category = 20 THEN
        UPDATE counts SET count=count-1 WHERE name='italian';
    END IF;
  END;
|
delimiter ; 
```

但这一个完美地工作

```
delimiter |
    CREATE TRIGGER count_delete_videos BEFORE DELETE ON videos
      FOR EACH ROW BEGIN
        UPDATE counts SET count = count - 1 WHERE name = 'all';

        IF OLD.published = 1 THEN
            DELETE FROM videos_categories WHERE id_video = OLD.id;
        END IF;
      END;
    |
    delimiter ;

Query OK, 0 rows affected (0.16 sec) 
```

我怎样才能使第一个触发器工作？我做错了什么？谢谢帮助我。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-29T19:20:58.037

据我所知，两个触发器都可以，但您可以尝试以下操作：

```
DELIMITER $$
CREATE TRIGGER count_delete_videos BEFORE DELETE ON videos
FOR EACH ROW 
BEGIN
  UPDATE counts SET count = count - 1 WHERE name = 'all';

  IF OLD.published = 1 THEN BEGIN
    DELETE FROM videos_categories WHERE id_video = OLD.id;
    DELETE FROM videos_tags WHERE id_video = OLD.id;
  END; END IF;
END$$

DELIMITER ; 
```

# c++ - Pthread C++ 中的同步

> ID：10374458
> 
> 赞同：-3
> 
> 时间：2012-04-29T17:50:42.933
> 
> 标签：c++, multithreading, synchronization, pthreads

我在[Posix 线程教程](http://www.yolinux.com/TUTORIALS/LinuxTutorialPosixThreads.html)中阅读了有关同步线程的信息。他们说函数 pthread_join 用于等待线程直到它停止。但是为什么这个想法[在这种情况下](https://stackoverflow.com/questions/10364299/weird-order-of-executing-threads-in-c)不起作用呢？

这是我的代码：

```
#include <pthread.h>
#include <stdio.h>
#include <stdlib.h>
#include <iostream>

using namespace std;

int a[5];

void* thread(void *params)
{
    cout << "Hello, thread!" << endl;

    cout << "How are you, thread? " << endl;

    cout << "I'm glad to see you, thread! " << endl;
}

void* thread2(void *params)
{
    cout << "Hello, second thread!" << endl;

    cout << "How are you, second thread? " << endl;

    cout << "I'm glad to see you, second thread! " << endl;

//    for (;;);

}

int main()
{
    pthread_t pt1, pt2;

    int iret = pthread_create(&pt1, NULL, thread, NULL);
    int iret2 = pthread_create(&pt2, NULL, thread2, NULL);

    cout << "Hello, world!" << endl;

    pthread_join(pt1, NULL);
    cout << "Hello, middle!" << endl;

    pthread_join(pt2, NULL);

    cout << "The END" << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T18:26:04.897

正如有人在回答您链接的问题时已经提到的那样，线程是异步执行的。线程执行在您之后立即开始`create()`。所以，此时：

```
int iret = pthread_create(&pt1, NULL, thread, NULL); 
```

`thread()`已经在另一个线程中执行，可能在另一个内核上（但这并不重要）。如果你在那之后`for (;;);`在你的`main()`右边添加一个，你仍然会看到线程消息被打印到控制台。

你也误解了什么`join()`。它等待线程终止；由于您的线程不做任何实际工作，因此它们（很可能）会在您调用`join()`它们之前达到其目的并终止。再一次：`join()`不会在给定位置开始执行线程，而是等待它终止（或者只是返回，如果它已经终止）。

# python - 用于 Python 的 Python 语法荧光笔

> ID：10374460
> 
> 赞同：1
> 
> 时间：2012-04-29T17:50:57.067
> 
> 标签：python, syntax-highlighting

是否有一个简单的（可能没有依赖关系）语法荧光笔来标记 Python 源代码？我需要它返回令牌类型、代码开头的偏移量和令牌长度。

我想使用 Python 内置，`tokenize`但它不返回偏移量。

我还查看了一些标准语法荧光笔，但它们也都标记了其他语言，这对我来说是多余的。我正在寻找的只是简单（快速）的 Python 语法荧光笔。

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T18:02:42.563

[我不知道偏移量，但您可以使用pygments](http://pygments.org/)从 Python 片段中取回令牌流。据我所知，它是一个独立的 Python 库。然后可以使用令牌流做任何你想做的事情。我有一个[示例](https://gist.github.com/773300)，它使用 Pygments 将一段 Python 代码渲染到一个 pygame 表面，并使用语法高亮显示。它逐行标记输入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T17:59:10.223

结帐[http://oneqonea.blogspot.com/2012/04/how-do-i-add-syntax-highlighting-to-my.html](http://oneqonea.blogspot.com/2012/04/how-do-i-add-syntax-highlighting-to-my.html)

这是一个非常简单的“SyntaxHighlighter for Blogger”教程，包含屏幕截图和所有内容。

您应该只需几分钟即可启动并运行。

在您的情况下，由于您正在寻找一个“简单（且快速）”的语法荧光笔而没有任何不必要的开销，因此在您的实现中只需包含 shBrushPython.js 库文件，如下所示：

```
<head>
    <script src='http://alexgorbatchev.com/pub/sh/current/scripts/shBrushPython.js' type='text/javascript'/>
</head> 
```

希望这可以帮助。快乐编码。

# javascript - 列出窗口对象的所有属性？

> ID：10374462
> 
> 赞同：10
> 
> 时间：2012-04-29T17:51:33.137
> 
> 标签：javascript, properties, window, prototype

我正在寻找（动态）获取浏览器当前知道的 HTML 元素列表，例如`HTMLPreElement`等`HTMLSpanElement`。这些对象是全局的，即

```
console.log('HTMLPreElement' in window);  //=> true 
```

所以我想我可以这样使用`getOwnPropertyNames`：

```
console.log(Object.getOwnPropertyNames(window)); 
```

获取全局属性的完整列表（MDN 声明这会返回可枚举和不可枚举的属性）。

使用上面的方法，我得到了一个包含大约 70 个属性名称的数组。但是，它不包括 -only 之类的`HTMLPreElement`对象`HTMLElement`。我也试过：

```
console.log(Object.getOwnPropertyNames(window.Window.prototype)); 
```

这带回了一个更大的列表（包括`addEventListener`等），但同样，没有`HTMLPreElement`。

`HTML{Tag}Element`那么，这些对象到底在哪里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T17:55:50.680

```
for (var prop in window)
    console.log(prop); 
```

这就是你需要的吗？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-01T20:49:40.803

在 Firefox 中，除非明确要求作为全局变量或属性，否则似乎不会添加它们的全局对象是元素的行为。也许 Firefox 将它们延迟加载到环境中，这样它们就不会消耗内存，除非确实需要它们。

`Object.getOwnPropertyNames` *除非*如上所述首先明确引用它们，否则它们似乎在简单地请求全局对象的键时不会出现。

[http://jsfiddle.net/mBAHm/](http://jsfiddle.net/mBAHm/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-15T19:49:40.103

```
var obj = window;
while(obj){
    for(let prop of Reflect.ownKeys(obj)){
        console.log(prop);
    };
    obj = Object.getPrototypeOf(obj);
}; 
```

# php - 使用while循环将mysql行插入变量

> ID：10374464
> 
> 赞同：2
> 
> 时间：2012-04-29T17:51:43.167
> 
> 标签：php, mysql

我正在尝试将数据输出到 xml 文件中，一切正常，除了它只保存最后一条获取的记录。

使用以下查询：

```
$query = mysql_query("SELECT mileage FROM cars WHERE make ='bmw' ORDER BY date DESC, time DESC LIMIT 3");
while ($row = mysql_fetch_array($query)){
$result = $row['mileage'];
} 
```

我的问题是如何制作，以便将每条记录保存在 3 个单独的变量中，以便我可以将这 3 个变量输出到 xml 文件中。我还尝试仅获取按最后日期和最后时间排序的最后 3 行，因此不确定查询是否正确。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T18:00:46.730

首先：不要使用 mysql_* 函数！它们已过时，您应该改用[PDO](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)。

其次：最简单的做法是构造一个包含结果的数组。

```
$result = array();
$query = mysql_query("SELECT mileage FROM cars WHERE make ='bmw' ORDER BY date DESC, time DESC LIMIT 3");
while ($row = mysql_fetch_array($query)){
    $result[] = $row['mileage'];
} 
```

您的查询结果现在包含在`$result[0]`、`$result[1]`和`$result[2]`中。（如果您使用 PDO，代码看起来并没有太大不同。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T18:06:40.953

```
$result=array();
$query = mysql_query("SELECT mileage FROM cars WHERE make ='bmw' ORDER BY date DESC, time DESC LIMIT 3");
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
$result[]  = $row['mileage'];

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T17:55:22.863

尝试将输出保存为数组。

```
$array[]=$value; 
```

会将 $value 推入 $array 数组中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T17:56:59.590

您可以使用以下内容；

```
$query = mysql_query("SELECT mileage FROM cars WHERE make ='bmw' ORDER BY date DESC, time DESC LIMIT 3");
while ($row = mysql_fetch_array($query)){
$result[] = $row['mileage'];
} 
```

您可以`foreach`$result 并构建您的 xml。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-29T17:59:47.137

给自己一个*函数*

```
function dbGetCol($sql){
  $ret = array();
  $res = mysql_query($sql) or trigger_error(mysql_error()." ".$sql);
  if ($res) {
    while($row = mysql_fetch_row($res)){
      $ret[] = $row[0];
    }
  }
  return $ret;
} 
```

然后就调用它

```
$data = dbGetCol("SELECT mileage FROM cars WHERE make ='bmw' ORDER BY date DESC, time DESC LIMIT 3"); 
```

# shutdown - 硬关机与操作系统关机/安全删除

> ID：10374467
> 
> 赞同：0
> 
> 时间：2012-04-29T17:52:14.113
> 
> 标签：shutdown

这只是一个我不确定的基本硬件问题。

我不是在寻找诸如“您应该始终正确关闭”或“您应该始终安全地移除硬盘驱动器”之类的答案。我正在寻找的是正确的关机步骤和拔掉插头之间的区别。我知道关闭确保所有写入都已完成，将所需的任何内容存储到日志中等等。但是当涉及到实际关闭电源时，有什么区别吗？硬关机最终会对硬盘造成永久性损坏吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T18:02:10.287

在关机过程中，Windows（或任何操作系统）将关闭文件并访问系统注册表，同时将硬盘的小磁盘臂停在旁边。如果您只是拔下插头，手臂可能没有时间自行停放，从而刮伤磁盘。最重要的是，任何打开的文件/注册表都可能已损坏，因为操作系统没有警告或时间来写入它们并正确关闭它们。

# c# - I'm trying to use backgroundworker but it doesn't work - why?

> ID：10374469
> 
> 赞同：3
> 
> 时间：2012-04-29T17:52:28.487
> 
> 标签：c#

This is the code of the `DoWork` event the `ProgressChanged` event and the `RunWorkerCompleted` event. The problem is that the progressBar is getting to 100% much faster before the function process operation is end. So when the progressBar is up to 100% I'm getting error exception since the progressBar can't be 101%

I need somehow to make that the progressBar will get progress according to the function process / progress. I guess that something is wrong with my calculation in the `DoWork` event.

In the `Form1` top I added:

```
Int i; 
```

In the constructor I did:

```
i = 0;

backgroundWorker1.WorkerSupportsCancellation = true;
backgroundWorker1.WorkerReportsProgress = true;
backgroundWorker1.RunWorkerAsync(); 
```

And this is the events of the `Backgroundworker`:

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
   BackgroundWorker worker = sender as BackgroundWorker;
   //int currentLength;
   //int currentIndex;
   //int lastIndex = 0;
   string startTag = "T256=\"";
   string endTag = "\"";
   int startTagWidth = startTag.Length;
   //int endTagWidth = endTag.Length;
   int index = 0;

   h = new StreamReader(@"d:\DeponiaSplit\testingdeponias_Translated.txt");

   while ((line = h.ReadLine()) != null)
   {
      if (index > f.LastIndexOf(startTag))
      {
         break;
      }

      int startTagIndex = f.IndexOf(startTag, index);
      int stringIndex = startTagIndex + startTagWidth;
      index = stringIndex;
      int endTagIndex = f.IndexOf(endTag, index);
      int stringLength = endTagIndex - stringIndex;

      if (stringLength != 0)
      {
         string test = f.Substring(stringIndex, stringLength);
         f = f.Substring(0, stringIndex) + line + f.Substring(stringIndex + stringLength);

         if (listBox1.InvokeRequired)
         {
            textBox1.Invoke(new MethodInvoker(delegate { textBox1.Text = line; }));
         }

         i = i + 1;
         System.Threading.Thread.Sleep(500);
         worker.ReportProgress((i * 1));
      }
   }

   h.Close();

   StreamWriter w = new StreamWriter(@"D:\New folder (24)\000004aa.xml");
   w.AutoFlush = true;
   w.Write(f);
   w.Close();
}

private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    //this.progressBar1.Text = (e.ProgressPercentage.ToString() + "%");
    progressBar1.Value = e.ProgressPercentage;
}

private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
   if ((e.Cancelled == true))
   {
      this.progressBar1.Text = "Canceled!";
   }
   else if (!(e.Error == null))
   {
      this.progressBar1.Text = ("Error: " + e.Error.Message);
   } 
   else
   {
       this.progressBar1.Text = "Done!";
   }
} 
```

Why doesn't it work correctly?

**Working using FileStream**

Now I wanted to add to the progressBar a label which will show `%` and the label will move according to the progressBar I don't want to disable the progressBar green color progress just to add `%` and show the numbers in percentages.

So in the `ProgressChanged` event I did :

```
private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    progressBar1.Value = e.ProgressPercentage;
    label3.Text = (e.ProgressPercentage.ToString() + "%");
} 
```

But it doesn't work - the `label13` doesn't move only the % changed to 1\. I want to see something like 1%...2%...3%... and so on. How can I do it?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T18:01:31.470

Why don't you use `File.ReadAllLines`, it returns an array of strings. You could report your progress as the percentage of the line you are processing to the total number of lines:

```
string[] lines = File.ReadAllLines(@"d:\DeponiaSplit\testingdeponias_Translated.txt"); 
// ...
worker.ReportProgress(i * 100 / lines.Length); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T18:10:44.057

The "ReportProgress()" method is reporting "i" right after "i" has been incremented with the "i+1" statment. i is a variable that is incremented every time you have found a string that has matched your provided parameters. I think the problem here is that you are reporting an integer without context. Do you know how many lines total in the file contain a string that matches your parameters. I would suggest reporting (i/totalNumLinesMatchingParameters) * 100\. This would report a number in terms of percentage. However, this does not include the action of writing the File. So you may want to scale the above differently if you intend to include the action of writing the File in your progress bar/progress bar label...

# racket - DrRacket On-Key 错误/错误

> ID：10374471
> 
> 赞同：0
> 
> 时间：2012-04-29T17:52:40.040
> 
> 标签：racket

我正在为我的 Comp-160 课程做一个项目，而我的按键功能正在做一些奇怪的事情。

```
(define (KEY-PRESS W key)
(cond 
[(key=? key "left") (make-MOVEB 
                     (- 15 (MOVEB-x W))
                     (MOVEB-y W))]

[(key=? key "right") (make-MOVEB
                      (+ 15 (MOVEB-x W))
                      (MOVEB-y W))])) 
```

就上下文而言，my`MOVEB`是一个结构，它为一个桶在我的场景的地面左右移动的位置提供一个位置。当我运行这个函数时，它让我向右移动没有问题，但每当我向左移动时，我的桶就会消失或一直移动回到起点。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:55:22.007

我意识到这可能为时已晚，但当你说

```
(- 15 (MOVEB-x W)) 
```

就像`15 - (MOVEB-x W)`; 所以如果`(MOVEB-x W)`是 100，那么这会给你 -85，这可能不是你想要的。你可能想要`(- (MOVEB-x W) 15)`.

# perl - 在 Perl 中构建框架

> ID：10374474
> 
> 赞同：-3
> 
> 时间：2012-04-29T17:52:51.883
> 
> 标签：perl, frameworks

我正在用 perl 编写一个框架，其中每天都在添加新功能。现在，不是每次在文件中添加新的子程序时，我希望创建一个文件并将其放置在一个文件夹中，并且该文件由主程序调用。我需要帮助我们如何做到这一点？这是我的文件夹结构：

```
Framework
  - PerformOperation
    - Operation1.pm
    - Operation2.pm
    - Operation3.pm
  - Execute.pl 
```

该`PerformOperation`文件夹具有每天添加的所有操作/功能，Execute.pl 是执行以启动框架的主要 Perl 文件。现在，我不知道如何管理。

更多信息：从 Execute.pl 读取一个文件，在该文件中写入我需要执行的操作，以及从中选择`PerformOperation`并执行该特定操作。如果需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T23:17:28.787

听起来你会受益于查看另一个框架来获得想法。Catalyst 框架确实做到了这一点，并且可能会就如何管理动态包含的模块提供一些很好的见解。

# django - 相当于 SQL 的查询集

> ID：10374475
> 
> 赞同：0
> 
> 时间：2012-04-29T17:53:08.230
> 
> 标签：django, satchmo

我正在尝试提高此代码的性能：

```
orderitems = OrderItem.objects.filter(order__contact=contact)
for orderitem in orderitems:

    try:
        pv = ProductVariation.objects.get(product=orderitem.product)

        if pv.parent_id == parent_product.id:
            return True
    except:
        pass 
```

本质上我想摆脱'for'循环，因为它很慢。如果可能的话，我想使用单个查询集来完成它，但我无法理解语法。这是我想要重现的 SQL。它创建了一个相当短的列表，因此我可以遍历该列表以查找匹配项：

```
SELECT parent_id
FROM configurable_productvariation
WHERE product_id IN (
    SELECT product_id
        FROM shop_orderitem
        WHERE order_id
        IN (
            SELECT id
            FROM shop_order
            WHERE contact_id = 4)); 
```

“4”是python第一行中提到的“联系人”。

非常感谢，托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T18:17:19.540

这应该生成像你的 sql

```
product_ids = OrderItem.objects.filter(order__contact=contact).values_list('product_id', flat=True)
ProductVariation.objects.filter(product_id__in=product_ids) 
```

# c++ - 如果 Q_OBJECT 宏被其他宏删除，则无法编译 MOC 文件：头文件不包含

> ID：10374476
> 
> 赞同：2
> 
> 时间：2012-04-29T17:53:19.120
> 
> 标签：c++, qt, c-preprocessor, moc

在编译非 Qt 版本的 Qt/C++ 程序 (-DDISABLE_MYMODULE) 时，我收到以下编译器错误：

```
src/mymodule.moc.cpp:12:2: error: #error "The header file
'mymodule.hpp' doesn't include <QObject>."
src/mymodule.moc.cpp:19:1: error: ‘QT_BEGIN_MOC_NAMESPACE’ does not name a type
src/mymodule.moc.cpp:40:6: error: ‘MyModule’ has not been declared
... 
```

我正在使用 GNU make（不是 qmake）。我的 Makefile 为每个模块编译两个目标文件，一个直接来自 .cpp 源文件，另一个来自 .moc.cpp 源文件（这是行不通的），两者都使用 g++。此 .moc.cpp 源文件由 MOC 从 .hpp 标头创建（此过程不会引发错误）。

有问题的头文件看起来有点像这样：

```
#ifndef DISABLE_MYMODULE //My problem macro
#ifndef MYMODULE_HPP
#define MYMODULE_HPP
//...
class MyModule : //...
{
    Q_OBJECT //Qt problem macro
    //...
};
//...
#endif
#endif 
```

如果不设置我的问题宏，整个事情将编译（然后链接，执行）就好了。如果我确实设置了它，但注释掉 QT 的问题宏，它也会编译得很好（构建一个非 Qt 版本）。

我不完全知道，MOC 用什么替换 Q_OBJECT，但它不应该仍然在我的 DISABLE_MYMODULE 内，因此被预处理器删除吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T18:15:09.823

看起来您的宏 DISABLE_MYMODULE 排除了类定义，其中包括 Q_OBJECT。另一方面，此代码仍由 moc 工具处理，该工具会生成您的 mymodule.moc.cpp 文件，该文件又包含您的 mymodule.hpp 头文件。当 mymodule.moc.cpp 然后由编译器处理时，它包含 .hpp 文件，但由于 DISABLE_MYMODULE，预处理器排除了它的内容，所以编译器找不到类的定义，#include <QObject> 和 Q_OBJECT 宏应该扩展的东西. 所以编译器没有找到它期望的东西并变得不安......

我认为，如果定义了 DISABLE_MYMODULE，或者（更好）禁用 mymodule.hpp 上的 moc 处理（如果定义了 DISABLE_MYMODULE），解决方案将是从构建中排除 mymodule.moc.cpp。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-17T23:26:46.313

尝试检查下一个标准：

1.  类应直接或间接继承自 QObject，且 QObject 必须在继承列表中排在第一位。
2.  类在单独的 *.h 和 *.cpp 文件中定义和实现。如果没有，您需要将#include "you_cpp_file.moc" 添加到实现和定义类的文件末尾。

# r - 从文件中读取特定的、模式匹配的行

> ID：10374478
> 
> 赞同：5
> 
> 时间：2012-04-29T17:53:31.560
> 
> 标签：r, data-processing

我有一个制表符分隔的文件，包含多个表，每个表都以标题为标题，例如“Azuay\n”、“Bolivar\n”、“Cotopaxi\n”等，每个表由两个换行符分隔。在 R 中，我如何读取此文件并仅选择对应于例如“Bolivar”的表（即指定的行），而忽略对应于“Cotopaxi”的表和对应于“Azuay”的表。

注意。我不想修改 R 之外的表格。

数据看起来像这样。该文件是制表符分隔的。

```
 Azuay
 region begin       stop
 1A     2017761     148749885
 1A     148863885   150111299
 1A     150329391   150346152
 1A     150432847   247191037

 Bolivar
 region begin           stop 
 2A     2785            242068364
 2A     736640          198339289

 Cotopaxi
 region begin           stop 
 4A     2282            9951846
 4A     11672561        11906166 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-29T19:27:20.620

这似乎可以完成这项工作：

```
read.entry.table <- function(file, entry) {

   lines <- readLines(file)

   table.entry <- lines == entry
   if (sum(table.entry) != 1) stop(paste(entry, "not found"))

   empty.lines <- which(lines == "")
   empty.lines <- c(empty.lines, length(lines) + 1L)

   table.start <- which(table.entry) + 1L
   table.end   <- empty.lines[which(empty.lines > table.start)[1]] - 1L

   return(read.table(textConnection(lines[seq(from = table.start,
                                              to   = table.end)]),
                     header = TRUE))
}

read.entry.table("test.txt", "Bolivar")
#   region  begin      stop
# 1     2A   2785 242068364
# 2     2A 736640 198339289

read.entry.table("test.txt", "Cotopaxi")
#   region    begin     stop
# 1     4A     2282  9951846
# 2     4A 11672561 11906166 
```

# c# - 将类添加到 WCF 服务库

> ID：10374487
> 
> 赞同：0
> 
> 时间：2012-04-29T17:54:41.287
> 
> 标签：c#, wcf, service

我有一个类，它定义了需要在两个单独的应用程序之间共享的事务。它们都引用了这个库，并且可以将类用作数据类型，但不能调用它的任何方法：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.Text;
using ServerLibrary.MarketService;

namespace ServerLibrary
{
    [ServiceContract]
    public interface IService
    {
        [OperationContract]
        string GetData(int value);

        [OperationContract]
        CompositeType GetDataUsingDataContract(CompositeType composite);

        [OperationContract]
        bool ProcessTransaction(Transaction transaction);
    }

    [DataContract]
    public class CompositeType
    {
        bool boolValue = true;
        string stringValue = "Hello ";

        [DataMember]
        public bool BoolValue
        {
            get { return boolValue; }
            set { boolValue = value; }
        }

        [DataMember]
        public string StringValue
        {
            get { return stringValue; }
            set { stringValue = value; }
        }
    }

    // Transaction class to encapsulate products and checkout data
    [DataContract]
    public class Transaction
    {
        [DataMember]
        public int checkoutID;
        [DataMember]
        public DateTime time;
        [DataMember]
        public List<Product> products;
        [DataMember]
        public double totalPrice;
        [DataMember]
        public bool complete;

        public void Start(int ID)
        {
            checkoutID = ID;
            products = new List<Product>();
            complete = false;
        }

        public void Complete()
        {
            time = DateTime.Now;
            complete = true;
        }
    }
} 
```

我究竟做错了什么？

[更新] 我错过了其余的服务。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T18:13:10.003

为了从客户端和服务器使用相同的 .NET 类型，您需要将数据协定类添加到客户端和主机都使用的共享程序集中。然后，当您的主机启动并运行并执行添加服务引用时，应该有一个复选框，说明重用现有程序集中的类型。

这将使 WCF 使用您期望的方法和数据重新创建您的对象。

# ruby - Ruby 中奇怪的 require 语句错误？

> ID：10374488
> 
> 赞同：-1
> 
> 时间：2012-04-29T17:54:44.953
> 
> 标签：ruby, require

我有一个我的宝石包装纸，袜子，里面`socks.rb`。整个文件由 require 语句和一个模块声明组成：

```
# lib/socks.rb
require 'socks/version'
require 'socks/base_controller'
require 'socks/templates'
require 'socks/tasks'
require 'socks/rake_tasks'

module Socks
end 
```

但是，`require 'socks/tasks'`并且`socks/rake_tasks`给了我一个`LoadError: no such file to load -- socks/tasks`/`rake_tasks`错误。

这是 require 语句的对齐问题，还是只是代码的问题？

**代码在 Github：** [https ://github.com/Beakr/socks](https://github.com/Beakr/socks)

**编辑**：`require './socks/tasks'`现在正在工作，但`require './socks/rake_tasks'`不是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T22:48:53.417

Ruby 使用它的`$LOAD_PATH`. 这个全局数组被 ruby​​gems 和 bundler 更改，以允许在不同位置查找库。在您`sock.gemspec`的定义中

```
gem.require_paths = ["lib"] 
```

这意味着 ruby​​gems 会将`lib`您的 gem 的目录添加到 ruby​​ 的`$LOAD_PATH`. 但它只有在您安装了 gem 并且 gemspec 被评估时才会如此。如果您不想安装 gem，可以使用

```
bundle exec irb 
```

在您的 gem 目录中，或者通过首先调整您`$LOAD_PATH`的 irb 会话，如下所示：

```
$LOAD_PATH.push "/path/to/your/gem/lib"
require 'socks' 
```

# android - 为android创建移动文本

> ID：10374503
> 
> 赞同：0
> 
> 时间：2012-04-29T17:55:53.523
> 
> 标签：android

有什么方法可以植入方式来创建移动文本[croos text]

例如打开meida o\player，在状态栏可以看到音乐标题会移动到按钮下方。

显示大文本是个好主意，

我怎样才能做到这一点 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T18:22:15.907

你想为你的文字设置动画吗？如果您要创建动作，您应该尝试更具体地查看动画资源

> [http://developer.android.com/guide/topics/resources/animation-resource.html#translate-element](http://developer.android.com/guide/topics/resources/animation-resource.html#translate-element)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T20:28:47.110

您应该向 TextView 添加一些属性：

```
 android:scrollHorizontally="true"
        android:scrollbars="horizontal"
        android:singleLine="true"
        android:cursorVisible="false"
        android:ellipsize="marquee"
        android:focusableInTouchMode="true"
        android:marqueeRepeatLimit ="marquee_forever" 
```

并添加这一行：

```
 mTextView.setMovementMethod(new ScrollingMovementMethod()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T18:04:11.953

将TextView添加到RelativeLayout，并调整其RelativeLayout.LayoutParams的topMargin和leftMargin属性。

# python - 将 BeautifulSoup 与多处理池映射一起使用时出现递归深度错误

> ID：10374504
> 
> 赞同：10
> 
> 时间：2012-04-29T17:56:02.087
> 
> 标签：python, multiprocessing, beautifulsoup

我一直在使用 BeautifulSoup 来解析 html 文件，而我编写的所有脚本都运行良好但速度很慢。所以我正在尝试使用多处理工人池和 BeautifulSoup，这样我的程序可以运行得更快（我有 100,000 - 1,000,000 个 html 文件要打开）。我写的脚本更复杂，但我在这里写了一个小例子。我正在尝试做这样的事情，但我不断收到错误

**'RuntimeError: 酸洗对象时超出最大递归深度'**

**编辑代码**

```
from bs4 import BeautifulSoup
from multiprocessing import Pool
def extraction(path):
   soup=BeautifulSoup(open(path),"lxml")
   return soup.title

pool=Pool(processes=4)
path=['/Volume3/2316/http/www.metro.co.uk/news/852300-haiti-quake-victim-footballers-stage-special-tournament/crawlerdefault.html','/Volume3/2316/http/presszoom.com/story_164020.html']
print pool.map(extraction,path)
pool.close()
pool.join() 
```

在做了一些搜索和挖掘一些帖子之后，我知道错误正在发生，因为 BeautifulSoup 超出了 python 解释器堆栈的深度。我试图提高限制并运行相同的程序（我上升到 3000），但错误仍然相同。我停止提高限制，因为在打开 html 文件时，BeautifulSoup 出现了问题。

将多处理与 BeautifulSoup 一起使用将加快我的执行时间，但我无法弄清楚如何应用它来打开文件。

有没有人有任何其他方法来使用 BeautifulSoup 进行多处理或如何克服这些错误？

任何形式的帮助将不胜感激，我坐了几个小时试图修复它并理解我为什么会收到错误。

**编辑**

我用我在路径中给出的文件测试了上面的代码，我得到了与上面相同的 RuntimeError

这些文件可以在这里访问（[http://ec2-23-20-166-224.compute-1.amazonaws.com/sites/html_files/](http://ec2-23-20-166-224.compute-1.amazonaws.com/sites/html_files/)）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T20:18:44.093

我认为原因是整个对象的返回`soup.title`。看来，所有的`children`and`parent`元素以及它们的子元素和父元素等等都在这一刻被分析了，这就引发了递归错误。

如果对象的内容是您所需要的，您可以简单地调用**str**方法：

```
return soup.title.__str__() 
```

不幸的是，这意味着您无法再访问 bs4-library 提供的所有其他信息。

# android - 为什么我看不到启动画面？

> ID：10374513
> 
> 赞同：0
> 
> 时间：2012-04-29T17:56:57.557
> 
> 标签：android, android-layout, android-intent, splash-screen

我有下面的代码，它创建了一个启动画面。当我启动我的应用程序时，我看不到启动屏幕，而是直接看到第一个活动：

```
public class splash extends Activity {
    private static final int STOPSPLASH = 0;

    //time in milliseconds
    private static final long SPLASHTIME = 13000;

    private ImageView splash;

    //handler for splash screen
    private Handler splashHandler = new Handler() {
        /* (non-Javadoc)
         * @see android.os.Handler#handleMessage(android.os.Message)
         */
        @Override
        public void handleMessage(Message msg) {
            switch (msg.what) {
                case STOPSPLASH:
                    //remove SplashScreen from view
                    splash.setVisibility(View.GONE);
                    break;
            }
            super.handleMessage(msg);
        }
    };  

    /** Called when the activity is first created. */
    @Override
        public void onCreate(Bundle icicle) {
        super.onCreate(icicle);

        setContentView(R.layout.main);        

        Intent intent = new Intent(this, prima.class);

        splash = (ImageView) findViewById(R.id.imageView1);

        Message msg = new Message();
        msg.what = STOPSPLASH;       

        splashHandler.sendMessageDelayed(msg, SPLASHTIME);        

        startActivity(intent);  
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T18:02:50.710

你必须`startActivity()`从你的处理程序那里做。如果你直接这样做，你将直接切换到下一个活动。

```
public class splash extends Activity {
    private static final int STOPSPLASH = 0;
    // time in milliseconds
    private static final long SPLASHTIME = 13000;
    private Intent nextActivity;

    // handler for splash screen
    private Handler splashHandler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            switch (msg.what) {
                case STOPSPLASH:
                    // start next Activity
                    startActivity(nextActivity);
                    break;
            }
        }
    };

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.main);
        nextActivity = new Intent(this, prima.class);
        splashHandler.sendEmptyMessageDelayed(STOPSPLASH, SPLASHTIME);
    }
} 
```

# java - 在我使用 NETBEANS 可视 GUI 制作 JTable 的 JTable 中需要时，如何插入值以及如何在运行时增加行？

> ID：10374515
> 
> 赞同：2
> 
> 时间：2012-04-29T17:57:04.807
> 
> 标签：java, swing, jtable, jframe, defaulttablemodel

在我使用 NETBEANS 可视 GUI 制作 JTable 的 JTable 中需要时如何插入值以及如何在运行时增加行？

```
 text_jTable = new javax.swing.JTable();

 text_jTable.setFont(new java.awt.Font("Arial Unicode MS", 0, 11)); // NOI18N

 text_jTable.setModel(new javax.swing.table.DefaultTableModel(
new Object [][] {
    {null, null, null, null, null},
    {null, null, null, null, null},
    {null, null, null, null, null},
    {null, null, null, null, null},
    {null, null, null, null, null}
 },
new String [] {
    "#", "Start Time", "End Time", "Duration", "Text"
 }
 ) {
Class[] types = new Class [] {
    java.lang.Integer.class, java.lang.String.class, java.lang.String.class,      java.lang.String.class, java.lang.String.class
   };

public Class getColumnClass(int columnIndex) {
    return types [columnIndex];
}
    });

text_jTable.setAutoResizeMode(javax.swing.JTable.AUTO_RESIZE_ALL_COLUMNS);

      text_jTable.setColumnSelectionAllowed(true);

   text_jTable.setEnabled(false);

 text_jTable.setSelectionMode(javax.swing.ListSelectionModel.SINGLE_SELECTION);

 text_jTable.getTableHeader().setReorderingAllowed(false);

 jScrollPane1.setViewportView(text_jTable);

 text_jTable.getColumnModel().getSelectionModel().setSelectionMode(javax.swing.ListSelectionModel.MULTIPLE_INTERVAL_SELECTION);
text_jTable.getColumnModel().getColumn(0).setResizable(false);
text_jTable.getColumnModel().getColumn(1).setResizable(false);
text_jTable.getColumnModel().getColumn(2).setResizable(false);
text_jTable.getColumnModel().getColumn(3).setResizable(false); 
```

通过 netbeans 可视化 GUI 创建 JTable 后，我无法理解如何在运行时增加行数..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T18:09:38.817

获取表的表模型，将其转换为[DefaultTableModel](http://docs.oracle.com/javase/6/docs/api/javax/swing/table/DefaultTableModel.html)，并使用其`addRow()`方法之一：

```
DefaultTableModel model = (DefaultTableModel) text_jTable.getModel();
model.addRow(theDataOfTheNewRow); 
```

了解 JTable 的工作原理及其模型的作用是至关重要的。如果您不了解它生成的代码以及如何使用它生成的组件，则不应使用可视化 GUI 设计器。

[Swing 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)是了解 Swing 工作原理的非常好的（免费）资源。

# android - 您可以在线程中设置 textview 文本吗？

> ID：10374519
> 
> 赞同：0
> 
> 时间：2012-04-29T17:57:49.647
> 
> 标签：android, multithreading, textview, logcat

一旦应用程序停止从服务器接收文本说它现在已断开连接，我需要它来拥有它我需要设置按钮以表示它已断开连接，这就是我现在所拥有的（这是在一个 while 循环中，我只是没有发布所有代码）

```
Thread.sleep(10);
                        counter++;
                        if (counter >= 100)
                        {
                            Log.d("ClientActivity","send S");
                            counter = 0;
                            out.println("S");
                            A2MCString = in.readLine();
                            Log.d("ClientActivity","got " + A2MCString);
                            if (A2MCString == null) 
                                {
                                connected = false;
                                Log.d("ClientActivity","Closed1");
                                Connect.setText("Connect");
                                Log.d("ClientActivity","Closed2");
                                Connect.setBackgroundResource(R.drawable.contect_button);
                                Log.d("ClientActivity","Closed3");
                                DeBug.setText("Disconnected from " + serverIpAddress);
                                Log.d("ClientActivity","Closed4");
                                } 
```

当我尝试将连接设置为“连接”时应用程序崩溃 logCat 错误是“android.view.ViewRoot$CalledFromWrongThreadException”如果你能帮助我，那就太好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T18:01:05.903

使用 runOnUiThread 或处理程序从线程对 UI 进行更改。我认为这行导致错误。

```
Connect.setBackgroundResource(R.drawable.contect_button); 
```

像这样把它放在你的线程中的 runOnUiThread

```
 runOnUiThread(new Runnable() {
                     public void run() {

                        Connect.setBackgroundResource(R.drawable.contect_button);
                    }
                }); 
```

# linux - 使用 cron 的 Gsettings

> ID：10374520
> 
> 赞同：27
> 
> 时间：2012-04-29T17:57:52.387
> 
> 标签：linux, bash, cron, gnome

我写了一个改变壁纸的 bash 脚本（用于 GNOME3）。

```
#!/bin/bash

# Wallpaper's directory.
dir="${HOME}/images/wallpapers/"

# Random wallpaper.
wallpaper=`find "${dir}" -type f | shuf -n1`

# Change wallpaper.
# http://bit.ly/HYEU9H
gsettings set org.gnome.desktop.background picture-options "spanned"
gsettings set org.gnome.desktop.background picture-uri "file://${wallpaper}" 
```

在终端仿真器（例如 gnome-terminal）中执行的脚本效果很好。在 cron 或 ttyX 终端执行期间出现错误：

```
** (process:26717): WARNING **: Command line `dbus-launch --autolaunch=d64a757758b286540cc0858400000603 --binary-syntax --close-stderr' exited with non-zero exit status 1: Autolaunch error: X11 initialization failed.\n

** (process:26717): WARNING **: Command line `dbus-launch --autolaunch=d64a757758b286540cc0858400000603 --binary-syntax --close-stderr' exited with non-zero exit status 1: Autolaunch error: X11 initialization failed.\n

** (process:26721): WARNING **: Command line `dbus-launch --autolaunch=d64a757758b286540cc0858400000603 --binary-syntax --close-stderr' exited with non-zero exit status 1: Autolaunch error: X11 initialization failed.\n

** (process:26721): WARNING **: Command line `dbus-launch --autolaunch=d64a757758b286540cc0858400000603 --binary-syntax --close-stderr' exited with non-zero exit status 1: Autolaunch error: X11 initialization failed.\n 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-10-29T18:49:17.203

经过多次尝试，我终于设法解决了这个问题。

事实上，问题的出现是因为 cron 只使用了一组非常有限的环境变量。当将其设置为 cron 作业时，唯一一个负责以正确方式运行来自问题的脚本的环境变量是`DBUS_SESSION_BUS_ADDRESS`, not `DISPLAY`or `XAUTHORITY`or `GSETTINGS_BACKEND`or something else。这个事实在[这个答案](https://stackoverflow.com/a/10390963/2353900)中也得到了很好的指出。

但是[这个答案](https://stackoverflow.com/a/10390963/2353900)中的问题是，*不能保证*目录中该文件的`DBUS_SESSION_BUS_ADDRESS`变量`~/.dbus/session-bus/`更新为当前 gnome 会话的当前值。要解决这个问题，一种方法是在当前 gnome 会话中查找进程的 PID，并从其环境中获取 dbus 地址。我们可以这样做：

```
PID=$(pgrep gnome-session)  # instead of 'gnome-session' it can be also used 'noutilus' or 'compiz' or the name of a process of a graphical program about that you are sure that is running after you log in the X session
export DBUS_SESSION_BUS_ADDRESS=$(grep -z DBUS_SESSION_BUS_ADDRESS /proc/$PID/environ|cut -d= -f2-) 
```

话虽如此，脚本应该如下所示：

```
#!/bin/bash

# TODO: At night only dark wallpapers.

# Wallpaper's directory.
dir="${HOME}/images/wallpapers/"

# export DBUS_SESSION_BUS_ADDRESS environment variable
PID=$(pgrep gnome-session)
export DBUS_SESSION_BUS_ADDRESS=$(grep -z DBUS_SESSION_BUS_ADDRESS /proc/$PID/environ|cut -d= -f2-)

# Random wallpaper.
wallpaper=`find "${dir}" -type f | shuf -n1`

# Change wallpaper.
# http://bit.ly/HYEU9H
gsettings set org.gnome.desktop.background picture-options "spanned"
gsettings set org.gnome.desktop.background picture-uri "file://${wallpaper}" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-30T21:41:00.520

我找到了一些解决方案。当您导出文件 ~/.dbus/session-bus/* 中包含的变量 DBUS_SESSION_BUS_ADDRESS 时，dbus-launch 不会告诉更多关于错误的信息。然而，不是墙纸，而是人工制品。

添加代码：

```
sessionfile=`find "${HOME}/.dbus/session-bus/" -type f`
export `grep "DBUS_SESSION_BUS_ADDRESS" "${sessionfile}" | sed '/^#/d'` 
```

现在脚本如下所示：

```
#!/bin/bash

# TODO: At night only dark wallpapers.

# Wallpaper's directory.
dir="${HOME}/images/wallpapers/"

# Weird, but necessary thing to run with cron.
sessionfile=`find "${HOME}/.dbus/session-bus/" -type f`
export `grep "DBUS_SESSION_BUS_ADDRESS" "${sessionfile}" | sed '/^#/d'`

# Random wallpaper.
wallpaper=`find "${dir}" -type f | shuf -n1`

# Change wallpaper.
# https://superuser.com/questions/298050/periodically-changing-wallpaper-under-gnome-3/298182#298182
gsettings set org.gnome.desktop.background picture-options "spanned"
gsettings set org.gnome.desktop.background picture-uri "file://${wallpaper}" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-21T08:53:10.693

试过这个，它对我很有用：

```
dbus-launch --exit-with-session gsettings set schema key value 
```

或从根 cron：

```
sudo -u user dbus-launch --exit-with-session gsettings set schema key value 
```

信用：[http ://php.mandelson.org/wp2/?p=565](http://php.mandelson.org/wp2/?p=565)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T18:12:09.220

添加 export DISPLAY=:0 && export XAUTHORITY=/home/username/.Xauthority ，其中 username 是您的 ubuntu 用户名。它应该修复 X11 授权错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T06:26:40.917

要通过 cron 更改墙纸，只需直接在 crontab 中执行此操作：执行 crontab -e

添加这样的行：

30 09 * * * DISPLAY=:0 GSETTINGS_BACKEND=dconf /usr/bin/gsettings 设置 org.gnome.desktop.background 图片-uri 文件:////home/elison/Pictures/morning.jpg

00 12 * * * DISPLAY=:0 GSETTINGS_BACKEND=dconf /usr/bin/gsettings 设置 org.gnome.desktop.background 图片-uri file:////home/elison/Pictures/noon.jpg

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-30T15:07:42.797

另请参阅适合我的解决方案： [https](https://unix.stackexchange.com/questions/111188/using-notify-send-with-cron#answer-111190) ://unix.stackexchange.com/questions/111188/using-notify-send-with-cron#answer-111190 ：

您需要设置 DBUS_SESSION_BUS_ADDRESS 变量。默认情况下，cron 无权访问该变量。为了解决这个问题，将以下脚本放在某个地方并在用户登录时调用它，例如使用 awesome 和 wiki 上提到的 run_once 函数。任何方法都可以，因为如果函数被调用的频率超过了要求，它不会造成伤害。

```
#!/bin/sh

touch $HOME/.dbus/Xdbus
chmod 600 $HOME/.dbus/Xdbus
env | grep DBUS_SESSION_BUS_ADDRESS > $HOME/.dbus/Xdbus
echo 'export DBUS_SESSION_BUS_ADDRESS' >> $HOME/.dbus/Xdbus

exit 0 
```

这将创建一个包含所需 Dbus 环境变量的文件。然后在 cron 调用的脚本中，通过获取脚本来导入变量：

```
if [ -r "$HOME/.dbus/Xdbus" ]; then
  . "$HOME/.dbus/Xdbus"
fi 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-01T03:16:19.880

**最后是丑陋的**，根本没有cron（*该死*）！使用其他方法可以在 gconf 中设置更改，但图像不会更改。也许是因为我在运行 Deepin 的 DDE（dde 使用相同的路径，不同的密钥）。丑陋的救援：使这个传奇成功的最后一次尝试。

使用此脚本，壁纸每 420 秒（7 分钟）在无限循环中更改一次，根据白天或晚上的时间从 4 个集合（或目录）之一中选择随机壁纸。

我创建了一个 .desktop 文件并将这个 .desktop 文件添加到*"~/.config/autostart"*。我还创建了另一对脚本/桌面，没有循环放在我的码头上，所以我也可以点击它并即时更改它。

设置丑陋：将脚本另存为**墙纸**并使其可执行：

> chmod +x 壁纸

现在在**Pictures**目录中创建一个名为**Wallpaper的文件夹。**在此墙纸文件夹中再创建 4 个文件夹，名称分别为**下午**、**黄昏黎明**、**早晨**和**夜晚**。将您想要的图像文件放在这 4 个目录中。

 ******> mkdir -p ~/Pictures/Wallpaper/早上
> mkdir ~/Pictures/Wallpaper/下午
> mkdir ~/Pictures/Wallpaper/night
> mkdir ~/Pictures/Wallpaper/duskdawn

### 壁纸

```
#!/bin/bash

for (( ; ; ))
do

    me="MyUser" # Change me!
    morning="morning"
    afternoon="afternoon"
    dawn="duskdawn"
    night="night"
    dusk="duskdawn"
    now="morning"
    hour=$(date +%R | sed 's/\:.*//')

    if [ "$hour" -ge 7 ] && [ "$hour" -lt 12 ]
        then
        now="morning"
    elif [ "$hour" -ge 12 ] && [ "$hour" -lt 17 ]
        then
        now="afternoon"
    elif [ "$hour" -ge 17 ] && [ "$hour" -lt 18 ]
        then
        now="duskdawn"
    elif [ "$hour" -ge 18 ] && [ "$hour" -le 23 ]
        then
        now="night"
    elif [ "$hour" -ge 0 ] && [ "$hour" -lt 6 ]
        then
        now="night"
    elif [ "$hour" -ge 6 ] && [ "$hour" -lt 7 ]
        then
        now="duskdawn"
    fi

    imgPath="/home/$me/Pictures/Wallpaper/$now/"
    imgFile=$(ls -1 $imgPath | shuf -n 1 | awk '{print $NF}')

    export bgNow=""$imgPath$imgFile""

    # Deepin desktop
    /usr/bin/gsettings set com.deepin.wrap.gnome.desktop.background picture-uri "$bgNow"

    # Gnome desktop 
    #/usr/bin/gsettings set org.gnome.desktop.background picture-uri "$bgNow"  

  sleep 420

done 
```

*   在脚本中为您的桌面设置正确的 gsettings 命令！

### wallyd.desktop

** 自动启动路径：/home/YOUR_USER/.config/autostart/wallyd.desktop**

```
[Desktop Entry]
Categories=System;
Comment=Change Wallpapers Agent
Exec=/home/$USER/Bin/wallpaperd
Icon=computer
Name=Wally Daemon
NoDisplay=false
Terminal=false
Type=Application 
```

*   编辑脚本的路径以匹配您保存脚本的路径。

### 无循环

要创建没有循环的桌面图标，只需更改 wally 并退出，请执行以下操作：

将脚本保存为**墙纸**（末尾没有 d）并删除这些行：

```
for (( ; ; ))
do

done 
```

使用上面的模板为这个非循环**墙纸**脚本创建另一个 .desktop 文件。更改非循环脚本的**名称**和**执行**路径。

在此处保存此 .desktop：

/usr/share/applications/wally.desktop

将其拖到任务栏或停靠栏。单击它，它将动态更改壁纸。******

# objective-c - 处理 NSPerformService 错误

> ID：10374525
> 
> 赞同：0
> 
> 时间：2012-04-29T17:58:37.157
> 
> 标签：objective-c, xcode, macos, twitter

我正在使用以下代码通过 Twitter.app 发送推文：

```
NSPerformService(@"Tweet", [NSPasteboard generalPasteboard]); 
```

如果用户没有 twitter.app，我该如何处理以下错误以显示自定义消息？
![错误](../Images/5a4bd26ac129084249db06bd89003c3a.png)

我试过try catch，但它不起作用。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T18:25:22.070

在调用它之前，您尝试获取`[NSApp servicesMenu]`并搜索它以查看该名称的服务是否存在。

* * *

更新示例：

```
NSUInteger itemIndex = [[[NSApp servicesMenu] itemArray] indexOfObjectPassingTest:^(id obj, NSUInteger idx, BOOL *stop){
    return [[(NSMenuItem*)obj title] isEqualToString:@"Tweet"];
}];
if (itemIndex != NSNotFound)
    NSPerformService(@"Tweet", [NSPasteboard generalPasteboard]); 
```

* * *

更新 2：

以上是针对一般情况的，在本地化和服务菜单更新时存在问题。对于已知应用程序提供的服务的特定情况，您可以检查该应用程序是否存在，`-[NSWorkspace absolutePathForAppBundleWithIdentifier:]`以查看系统上是否存在具有已知捆绑 ID 的应用程序。

# c# - 使用 DBContext 和 POCO 时如何连接导航属性更改

> ID：10374526
> 
> 赞同：3
> 
> 时间：2012-04-29T17:58:39.787
> 
> 标签：c#, .net, entity-framework, entity-framework-4.3

我正在使用 Database First 代码策略，并通过`EF4.x DBContext Generator`.

简而言之，当我使用 ObjectContext 时，为了触发通知，我正在扩展这样的实体：

```
public partial class Customer
{
    public Customer()
    {

        this.AddressReference.AssociationChanged += AddressReference_AssociationChanged;            
    }

    private void AddressReference_AssociationChanged(object sender, CollectionChangeEventArgs e)
    {
        OnPropertyChanged("Address");
    }

} 
```

使用 DBContext 和 POCO 时是否有类似的东西？

**编辑：**

当 Customer.Address = 新地址时，我需要此更改通知。默认情况下，标量属性会引发 ChangeNotifications，但导航属性不会。

# python - 在 Python 中动态分配函数实现

> ID：10374527
> 
> 赞同：19
> 
> 时间：2012-04-29T17:58:49.023
> 
> 标签：python, anonymous-function, anonymous-methods, callable

我想动态分配一个函数实现。

让我们从以下内容开始：

```
class Doer(object):

    def __init__(self):
        self.name = "Bob"

    def doSomething(self):
        print "%s got it done" % self.name

def doItBetter(self):
    print "Done better" 
```

在其他语言中，我们会将 doItBetter 设为匿名函数并将其分配给对象。但不支持 Python 中的匿名函数。相反，我们将尝试创建一个可调用的类实例，并将其分配给该类：

```
class Doer(object):

    def __init__(self):
        self.name = "Bob"

class DoItBetter(object):

    def __call__(self):
        print "%s got it done better" % self.name

Doer.doSomething = DoItBetter()
doer = Doer()
doer.doSomething() 
```

这给了我这个：

> 回溯（最后一次调用）：第 13 行，在 doer.doSomething() 中第 9 行，**调用** 打印“%s 做得更好” % self.name AttributeError: 'DoItBetter' object has no attribute 'name'

最后，我尝试将可调用对象作为属性分配给对象实例并调用它：

```
class Doer(object):

    def __init__(self):
        self.name = "Bob"

class DoItBetter(object):

    def __call__(self):
        print "%s got it done better" % self.name

doer = Doer()
doer.doSomething = DoItBetter()
doer.doSomething() 
```

只要我不在 DoItBetter 中引用 self ，它就可以工作，但是当我这样做时，它会给我一个名称错误，`self.name`因为它引用的是可调用的`self`，而不是拥有的类`self`。

所以我正在寻找一种pythonic方法来将匿名函数分配给类函数或实例方法，其中方法调用可以引用对象的`self`.

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-29T18:03:24.873

你的第一种方法是好的，你只需要将函数分配给类：

```
class Doer(object):
    def __init__(self):
        self.name = "Bob"

    def doSomething(self):
        print "%s got it done" % self.name

def doItBetter(self):
    print "%s got it done better" % self.name

Doer.doSomething = doItBetter 
```

匿名函数与此无关（顺便说一下，Python 支持由单个表达式组成的简单匿名函数，请参阅 参考资料`lambda`）。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-04-29T18:11:51.530

如果您想为类的每个实例更改某些内容，yak 的答案非常有用。

如果您只想为对象的特定*实例*而不是整个类更改方法，则需要使用`MethodType`类型构造函数来创建绑定方法：

```
from types import MethodType

doer.doSomething = MethodType(doItBetter, doer) 
```

# .net - NoRM -> 使用还是不使用？

> ID：10374530
> 
> 赞同：1
> 
> 时间：2012-04-29T17:59:21.343
> 
> 标签：.net, mongodb, norm

我将使用最新的可用 .NET 驱动程序开始学习 MongoDB。

但是我知道这个看起来很酷的项目： http: [//normproject.org/](http://normproject.org/)

使用它真的更糟糕吗？（1年前更新）

是否有任何其他最佳实践或任何很酷的帮助框架？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T20:00:59.703

NoRM 是一个很棒的项目，背后有一些非常有才华的开发人员。但是，正如您所说，它已经很长时间没有更新，并且是一个死项目。mongodb 数据库的创新非常迅速，并且 NoRM 驱动程序不支持数据库的许多功能。

官方的 C# 驱动程序绝对是要走的路。这里有很多有用的文档：[http](http://www.mongodb.org/display/DOCS/CSharp+Language+Center) ://www.mongodb.org/display/DOCS/CSharp+Language+Center 。此外，您可以使用 nuget 拉入 10gen 驱动程序。

# javascript - 在 CSS 菜单栏中突出显示当前选定的链接

> ID：10374533
> 
> 赞同：0
> 
> 时间：2012-04-29T17:59:40.290
> 
> 标签：javascript, html, css, django, menu

我有一个带有此 URL 的页面：[http://localhost:8000/progress/c/?l=1&c=1](http://localhost:8000/progress/c/?l=1&c=1)

以下内容可用作简单的 CSS 菜单栏。

```
<div class="menu_div">
    <ul>
        <li><a href="/progress/c/?l=1&c=1"> l1c1 </a></li>
        <li><a href="/progress/c/?l=2&c=1"> l1c1 </a></li>
        <li><a href="/progress/c/?l=3&c=1"> l1c1 </a></li>
        <li><a href="/progress/c/?l=4&c=1"> l1c1 </a></li>
    </ul>
</div> 
```

CSS样式是

```
.menu_div ul
{
    padding:6px;
    margin:0px;
    font-size:12px;
    list-style:none;
    text-indent:15px;

}
.menu_div ul li
{
    line-height:28px;
    border-bottom:1px solid #000;
}
.menu_div ul li a
{
    text-decoration:none;
    font-color:#3A332D;
    display:block;
}
.menu_div ul li a:hover
{
    background:blue;
}
.menu_div ul li#active
{
    background:blue;
} 
```

当我将鼠标悬停在链接上时，背景颜色会发生变化，但当前选择的菜单链接未以蓝色突出显示。

我正在使用 django 框架。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-05T10:32:03.700

试试这个 jQuery 代码，它会自动添加类

```
$(function(){

    var url = window.location.href; 

    $("#menu a").each(function() {

        if(url == (this.href)) { 
            $(this).closest("li").addClass("active");
        }
    });

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T18:06:25.497

在您的 CSS 中，您有一个 id 为“active”的类，这应该是这样的类：

```
.menu_div ul li.active
{
    background:blue;
} 
```

此外，我不建议尝试使用 javascript 客户端匹配“活动”或更好地制定的“当前”页面。

相反，您在服务器上的脚本应该识别当前页面并向相关菜单项添加一个类，因此它看起来像这样：

```
<li class="active"><a href="/progress/c/?l=1&c=1"> l1c1 </a></li> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T18:05:24.590

```
.menu_div ul li#active 
```

它说活动链接需要一个活动的ID。我看不到 id，因此它不是蓝色的。

如果您希望链接处于活动状态，则必须将项目设置为活动状态，浏览器不会为您执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T18:05:16.260

Replace your id `#active` to class `.active` - that is more right way:

```
.menu_div ul li.active
{
    background:blue;
} 
```

and add this class to active element in your list:

```
<div class="menu_div">
    <ul>
        <li class="active"><a href="/progress/c/?l=1&c=1"> l1c1 </a></li>
        <li><a href="/progress/c/?l=2&c=1"> l1c1 </a></li>
        <li><a href="/progress/c/?l=3&c=1"> l1c1 </a></li>
        <li><a href="/progress/c/?l=4&c=1"> l1c1 </a></li>
    </ul>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-05T11:01:14.877

只是

**css**

```
.menu_div ul li.active{background:blue} 
```

**html**

```
<div class="menu_div">
    <ul>
        <li id="page1"><a href="/progress/c/?l=1&c=1"> l1c1 </a></li>
        <li id="page2"><a href="/progress/c/?l=2&c=1"> l1c1 </a></li>
        <li id="page3"><a href="/progress/c/?l=3&c=1"> l1c1 </a></li>
        <li id="page4"><a href="/progress/c/?l=4&c=1"> l1c1 </a></li>
    </ul>
</div> 
```

**脚本**

```
#In every page just put this script and change the id
<script>$("#page1").addClass('active');</script> 
```

# java - 找不到 Eclipse 大纲插件 ContentOutlinePage

> ID：10374534
> 
> 赞同：0
> 
> 时间：2012-04-29T17:59:41.973
> 
> 标签：java, eclipse, eclipse-plugin

我正在制作一个 Eclipse 插件，我想制作大纲视图。我想扩展 ContentOutlinePage。但我的日食无法解决它。

我应该向 plugin.xml 添加一些内容以使其找到类吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T23:52:41.517

您将需要为您的插件正确定义依赖项。在您的情况下，您可能至少需要：org.eclipse.ui.editors、org.eclipse.ui.ide。请将它们添加到清单中（在插件/清单编辑器的依赖项选项卡上）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T09:35:46.643

将 org.eclipse.ui.views 添加到 Dependencies 选项卡。

# ios - MPMoviePlayerViewController 从 NSData (MP4) 播放

> ID：10374543
> 
> 赞同：0
> 
> 时间：2012-04-29T18:00:40.307
> 
> 标签：ios, mpmovieplayercontroller, nsdata, mp4

```
NSString *p = [app getFilePathFor:name];
// Printing description of p:
// /Users/Jackson/Library/Application Support/iPhone Simulator/5.0/Applications/7FE97EDD-D080-4E5E-8EDD-3D9FFA8F6CF5/Documents/6681a4d7-8630-4a12-90c6-f95d72650a42

NSData *data = [NSData dataWithContentsOfFile:p];
// Printing description of data:
// <01401dc2 a15ebc27 e473ee79 316568ff 19dc7000 df3f7c5c dc206870 01a1c00e 00010000 00000000 00e10288 00000003 01060020 08c80038 00080000 88edffbf 02000119 0000050e 00000000 00000000 02000007 0000050f 00000000 00000000>

NSString *str = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];
// Printing description of str:
// @Â¡^¼'äsîy1ehÿÜp

path = [NSURL fileURLWithPath:str];
// Printing description of path:
// %01@%1D%C3%82%C2%A1%5E%C2%BC'%C3%A4s%C3%AEy1eh%C3%BF%19%C3%9Cp%00%C3%9F%3F%7C%5C%C3%9C%20hp%01%C2%A1%C3%80%0E%00%01%00%00%00%00%00%00%00%C3%A1%02%C2%88%00%00%00%03%01%06%00%20%08%C3%88%008%00%08%00%00%C2%88%C3%AD%C3%BF%C2%BF%02%00%01%19%00%00%05%0E%00%00%00%00%00%00%00%00%02%00%00%07%00%00%05%0F%00%00%00%00%00%00%00%00 -- file://localhost/ 
```

然后我将路径发送到 MPMoviePlayerViewController，如下所示：

```
MPMoviePlayerViewController * playerController = [[MPMoviePlayerViewController alloc] initWithContentURL:path];

[self presentMoviePlayerViewControllerAnimated:(MPMoviePlayerViewController *)playerController];

playerController.moviePlayer.movieSourceType = MPMovieSourceTypeFile;
[playerController.moviePlayer play];
playerController=nil; 
```

此时，电影播放器​​显示，然后在“显示”动画完成后立即隐藏。在日志中我得到这个：

```
An instance 0x87ca7b0 of class AVPlayerItem was deallocated while key value observers were still registered with it. Observation info was leaked, and may even become mistakenly attached to some other object. Set a breakpoint on NSKVODeallocateBreak to stop here in the debugger. Here's the current observation info:
<NSKeyValueObservationInfo 0x87dfc30> (
<NSKeyValueObservance 0x933c280: Observer: 0x93367d0, Key path: nonForcedSubtitleDisplayEnabled, Options: <New: YES, Old: NO, Prior: NO> Context: 0x0, Property: 0x933c630>
<NSKeyValueObservance 0x933c360: Observer: 0x93356b0, Key path: presentationSize, Options: <New: NO, Old: NO, Prior: NO> Context: 0x0, Property: 0x87b53b0> 
```

我不知道下一步该去哪里..*帮助？*

** 编辑 **

我要播放的 MP4 来自[这个 buckbunny 测试剪辑](http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4)。当我直接以 URL 的形式加载剪辑时，它可以工作。但是，如果我下载它并通过 NSData 保存并尝试重新打开 NSData，这将不再有效。

** 编辑 2 **

@Till：“您正在使用 garbledegock 字符串初始化 URL；`// str=@"@Â¡^¼'äsîy1ehÿÜp" path = [NSURL fileURLWithPath:str];`您在这里期待什么？”

所以现在我已经尝试过：

```
path = [NSURL fileURLWithPath:[app getFilePathFor:name]];
// Printing description of path:
// file://localhost/Users/Jackson/Library/Application%20Support/iPhone%20Simulator/5.0/Applications/CB1CA8D0-B5EC-4B5F-8C7F-0EF449508BA7/Documents/9d425856-14b0-4ad3-835a-970affacb05f 
```

我仍然收到完全相同的错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T00:13:03.703

为什么要从保存的剪辑文件转换为 nsdata？

您应该只在应用文档目录中加载剪辑的路径。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *filePath = [documentsDirectory stringByAppendingPathComponent:name];

NSURL *fileURL = [NSURL fileURLWithPath:filePath isDirectory:NO];

yourMoviePlayer = [[MPMoviePlayerController alloc] initWithContentURL: fileURL]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T22:02:45.950

我认为这是因为您在`nil`播放时将其设置为。实际上，它似乎发生得如此之快，以至于`MPMoviePlayerViewController`当您将其设置为时仍在加载材料`nil`。

# java - 如何在 Java 中并排打印？

> ID：10374544
> 
> 赞同：0
> 
> 时间：2012-04-29T18:00:43.217
> 
> 标签：java, algorithm, printing, system.out

我在任何地方都找不到这个；我可能会用错误的关键字找到它。

图片画了一千个字，所以让我解释一下。

假设我们有一组未知数量的字符串：

```
String hello = "Hello world\n Welcome\n"
String goodbye = "Goodbye\n See you in the next life\n"
String do = "Do something\n Be part of us\n" 
```

我想要一个产生这样结果的函数：

```
String hellogoodbyedo = "
  Hello world_________________Goodbye________________________Do Something\n
  Welcome_____________________See you in the next life_______Be part of us\n" 
```

其中*_*表示空格。有这样做的聪明方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T18:02:59.753

您可以使用

```
System.out.printf("%-20s%-s20s%-20s%n", field1, field2, field3); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T18:03:11.103

尝试使用制表符`\t`或计算每行中的字符数，并使用循环在每个单词之间生成空格。

**编辑**用 \n 分割每个变量，然后为每个 var 添加第一个实例，依此类推。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-29T18:08:13.593

解决方案有两个部分。

您可以使用[`String.split()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String%29) 在换行符上拆分每个字符串并将片段存储在数组中。

然后使用`printf`or`String.format()`与其他答案中所示的格式字符串一起左对齐每个字符串：

```
String output = String.format("%-25s%-25s%-25s\n", string1, string2, string3); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-29T19:54:55.240

## 假设

*   输入是多个字符串
*   每个字符串输入包含未知数量的行
*   输出应该是输入中每个字符串一列，保留行尾
*   输出列应该是与输入行长度匹配的可变宽度

## 方法

```
public static String printColumns(String[] input) {
  String result = "";

    // Split input strings into columns and rows
    String[][] columns = new String[input.length][];
    int maxLines = 0;
    for (int i = 0; i < input.length; i++) {
        columns[i] = input[i].split("\n");
        if (columns[i].length > maxLines)
            maxLines = columns[i].length;
    }

    // Store an array of column widths
    int[] widths = new int[input.length];
    // calculate column widths
    for (int i = 0; i < input.length; i++) {
        int maxWidth = 0;
        for (int j = 0; j < columns[i].length; j++)
            if (columns[i][j].length() > maxWidth)
                maxWidth = columns[i][j].length();
        widths[i] = maxWidth + 1;
    }

    // "Print" all lines
    for (int line = 0; line < maxLines; line++) {
        for (int column = 0; column < columns.length; column++) {
            String s = line < columns[column].length ? columns[column][line] : "";
            result += String.format("%-"+widths[column]+"s", s);
        }
        result += "\n";
    }
    return result;
} 
```

## 用法

```
String hello = "Hello world\nWelcome\n";
String goodbye = "Goodbye\nSee you in the next life\n";
String dosomething = "Do something\nBe part of us\n";
String[] input = {hello, goodbye, dosomething};
System.out.println(printColumns(input)); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-29T18:06:49.690

[在这里](http://www.braju.com/docs/IntroductionToPrintf/)结帐`printf()`

# android - 如何将 LinearLayout 转换为图像？

> ID：10374547
> 
> 赞同：13
> 
> 时间：2012-04-29T18:01:17.150
> 
> 标签：android, bitmap, android-linearlayout

我尝试使用以下代码将其转换`LinearLayout`为图像：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    LinearLayout lyt = (LinearLayout) findViewById(R.id.lyt);
    lyt.setDrawingCacheEnabled(true);
    lyt.buildDrawingCache(true);

    Bitmap b = Bitmap.createBitmap(lyt.getDrawingCache());

    ImageView img = (ImageView) findViewById(R.id.imageView1);
    img.setImageBitmap(b);

} 
```

但我进来`NullPointerException`了：

```
Bitmap b = Bitmap.createBitmap(lyt.getDrawingCache()); 
```

布局 XML 是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/lyt"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button 1" />

        <Button
            android:id="@+id/button3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button 2" />

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button 3" />

    </LinearLayout>

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-01-21T12:55:19.280

***试试下面的代码，它工作***

**在清单中添加以下权限**

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

> **MainActivity.java**

```
 public class MainActivity extends Activity implements OnClickListener{
    private LinearLayout linearLayout;
    private Button saveBtn;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        linearLayout = (LinearLayout) findViewById(R.id.linearLayout_view);
        saveBtn = (Button) findViewById(R.id.save_btn);
        saveBtn.setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {
        int id = v.getId();
        switch (id) {
        case R.id.save_btn:
            File file = saveBitMap(this, linearLayout);    //which view you want to pass that view as parameter
            if (file != null) {
                Log.i("TAG", "Drawing saved to the gallery!");
            } else {
                Log.i("TAG", "Oops! Image could not be saved.");
            }
            break;
        default:
            break;
        }

    private File saveBitMap(Context context, View drawView){
        File pictureFileDir = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES),"Handcare");
        if (!pictureFileDir.exists()) {
            boolean isDirectoryCreated = pictureFileDir.mkdirs();
            if(!isDirectoryCreated)
                Log.i("ATG", "Can't create directory to save the image");
            return null;
        }
        String filename = pictureFileDir.getPath() +File.separator+ System.currentTimeMillis()+".jpg";
        File pictureFile = new File(filename);
        Bitmap bitmap =getBitmapFromView(drawView);
        try {
            pictureFile.createNewFile();
            FileOutputStream oStream = new FileOutputStream(pictureFile);
            bitmap.compress(CompressFormat.PNG, 100, oStream);
            oStream.flush();
            oStream.close();
        } catch (IOException e) {
            e.printStackTrace();
            Log.i("TAG", "There was an issue saving the image.");
        }       
            scanGallery( context,pictureFile.getAbsolutePath());
        return pictureFile;
    }
    //create bitmap from view and returns it
    private Bitmap getBitmapFromView(View view) {
        //Define a bitmap with the same size as the view
        Bitmap returnedBitmap = Bitmap.createBitmap(view.getWidth(), view.getHeight(),Bitmap.Config.ARGB_8888);
        //Bind a canvas to it
        Canvas canvas = new Canvas(returnedBitmap);
        //Get the view's background
        Drawable bgDrawable =view.getBackground();
        if (bgDrawable!=null) {
            //has background drawable, then draw it on the canvas
            bgDrawable.draw(canvas);
        }   else{
            //does not have background drawable, then draw white background on the canvas
            canvas.drawColor(Color.WHITE);
        }
        // draw the view on the canvas
        view.draw(canvas);
        //return the bitmap
        return returnedBitmap;
    }
    // used for scanning gallery
    private void scanGallery(Context cntx, String path) {
        try {
            MediaScannerConnection.scanFile(cntx, new String[] { path },null, new MediaScannerConnection.OnScanCompletedListener() {
                public void onScanCompleted(String path, Uri uri) {
                }
            });
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T18:16:03.050

我的猜测是您正在 onCreate 中执行该代码。问题在于视图尚未布局。调用 lyt.measure 或稍后调用代码。例如：在调用 super.onLayout() 之后到 onSizeChanged() 或 onLayout()。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T18:08:02.437

```
Bitmap b = Bitmap.createBitmap(lyt.getDrawingCache()); 
```

唯一可以`null`在该行中的是`lyt`，其余的不能。您可能尚未设置布局，在这种情况下`findViewById()`将返回`null`。

你必须先做`setContentView()`才能做`findViewById()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-28T11:45:04.190

下面是将xml布局转换为位图图像的代码片段

```
private Bitmap convertLayoutToImage() {
        LinearLayout linearView = (LinearLayout) this.getLayoutInflater(null).inflate(R.layout
                .marker_layout, null, false); //you can pass your xml layout

        linearView.measure(View.MeasureSpec.makeMeasureSpec(0, View.MeasureSpec.UNSPECIFIED),
                View.MeasureSpec.makeMeasureSpec(0, View.MeasureSpec.UNSPECIFIED));
        linearView.layout(0, 0, linearView.getMeasuredWidth(), linearView.getMeasuredHeight());

        linearView.setDrawingCacheEnabled(true);
        linearView.buildDrawingCache();
        return linearView.getDrawingCache();// creates bitmap and returns the same
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-29T18:20:19.850

看看这是否对您有帮助：

[在 Android 中将视图转换为位图图像](http://www.brighthub.com/mobile/google-android/articles/30676.aspx)

# c# - 字节 [] 到 .eps 图片

> ID：10374550
> 
> 赞同：0
> 
> 时间：2012-04-29T18:01:44.887
> 
> 标签：c#, eps

> **可能重复：**
> [在 C# 中将 .EPS 转换为图像](https://stackoverflow.com/questions/4095071/converting-eps-to-image-in-c-sharp)

如何在 C# 中将字节数组转换为 .eps 图像？

我有一个适用于图形图像（`.jpg`，`.png`...）的代码，但是当我转换为`.eps`格式时它会引发参数异常。

```
MemoryStream ms = new MemoryStream(byteArray, 0, byteArray.Length);

using (ms)
{
      //saving image on current project directory
      Image img = Image.FromStream(ms);

      img.Save(Environment.CurrentDirectory + "file.eps");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T18:24:39.270

如果您只需要保存它，您可以使用类保存它[`File`](http://msdn.microsoft.com/en-us/library/system.io.file.aspx)：

```
byte[] buffer  = ms.GetBuffer();
File.WriteAllBytes(Environment.CurrentDirectory + "file.eps", buffer); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T18:27:26.827

从您发布的代码看来，您只将图像保存到扩展名为 *.eps 的文件中。如果是这样，您根本不必创建`MemoryStream`对象，只需使用此方法：

```
try
{
    File.WriteAllBytes(Environment.CurrentDirectory + "file.eps", byteArray);
}
catch (Exception err)
{
    //your exception handling code here
} 
```

它应该适用于所有类型的文件，但无需验证文件内容是否为有效图像。但是，如果您确定文件的内容是什么，那么在这种情况下使用它应该是一个不错的方法。但是，此方法可能会引发许多异常，因此请务必正确处理它们。

# api - Windows 低级图形

> ID：10374553
> 
> 赞同：-3
> 
> 时间：2012-04-29T18:02:20.847
> 
> 标签：api, winapi, graphics, directx, gdi

我是编程新手。我确实知道 C/C++ 和 Win32 的基础知识。我现在正在尝试做图形，但我想要最快的屏幕连接。我意识到大多数人都在使用 Opengl 或 DirectX。但是，我不想要开销。我想从头开始并控制像素数据。我知道 GDI 位图，但我不确定这是否是访问数据的最佳方式。我知道我必须通过窗户交谈，这很麻烦。Opengl 和 DirectX 是否编译到 GDI 的级别，或者他们有什么特殊的方法，他们是绕过还是使用类似的代码？请不要问我为什么要这样做。也许对如何做到这一点的解释可能会有所帮助。就像 windows 如何组合所有窗口以创建最终图像一样。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T18:05:27.903

对像素数据最直接的访问是通过OpenGL 和 Direct3D 都支持的*着色器。*它们经过交叉编译并直接在视频卡上运行。他们不使用 OpenGL，他们没有 OpenGL 开销。OpenGL 最初只是用来将它们送到显卡自己的处理器上。

您在 CPU 上所做的任何事情都必须首先通过总线（通常是 PCI-express）复制到视频卡。GDI 实际上是从图形内存中删除了许多级别。

OpenGL、Direct3D、Direct2D、GDI 和 GDI+ 都是抽象层。GPU 供应商编写了一个接受这些标准命令函数的驱动程序，将数据重新编码为特定于卡的格式，然后将其发送到卡。通常，OpenGL 和 Direct3D 的优化程度最高，并且需要最少的重新编码。

Windows 如何组合各种屏幕窗口以创建全屏图像在很大程度上取决于您所谈论的 Windows 版本。DWM 改变了*一切*。由于在 Vista 中引入了 DWM，程序渲染到其个人 GPU 内存区域，然后窗口管理器使用视频卡的纹理查找单元将每个程序的单独区域有效地分层到屏幕主缓冲区上。当程序（通常是游戏）请求全屏独占访问时，会跳过此步骤，驱动程序会导致来自该应用程序的渲染命令直接影响主屏幕缓冲区。

假设 CPU 正在生成需要显示的数据，最快和最有效的方法可能是将该数据块复制到顶点缓冲区对象中，并使用 OpenGL 命令将其光栅化为线或多边形或其他任何东西（或Direct3D 等效）。如果您以前认为 GDI 是低级接口，那么您需要阅读一些资料来完成这项工作。但它的运行速度将比纯 GDI 快几个数量级。事实上，新架构的速度要快得多，因为 GDI（和 WPF）建立在 Direct2D 和/或 Direct3D 之上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T18:30:05.513

> 但我想要最快的屏幕连接
> 
> 我想从头开始控制像素数据

你要求的是不可能的。当您使用 GPU 加速功能时，您将获得最佳性能。但是，在这种情况下，您无法直接访问像素数据，并且尝试访问它（读回或写入）会对性能产生负面影响，因为您必须将数据从系统内存传输到视频内存。因此，应小心处理从系统内存流式传输到视频内存的任何内容。另外，您必须学习 API。

如果你“从头开始”并在 CPU 上进行渲染，则可以轻松访问像素数据并完全控制渲染，但性能会不如 GPU（CPU 不太适合并行处理，系统内存可以比视频内存慢一个数量级），而且您将花费大量时间重新发明轮子。

> Opengl 和 DirectX 是否编译到 GDI 的级别，或者他们有什么特殊的方法，他们是绕过还是使用类似的代码？

不，它们几乎直接使用硬件制造商提供的驱动程序与图形硬件通信。并且 DirectX/OpenGL 使用的那些“直接硬件访问”接口将不提供给您——它们是特定于硬件和制造商的，可以是内部的，甚至可能受专利保护。

当然，您可以使用的旧硬件接口很少（即 VESA 或 VGA 13h 模式），但是，操作系统通常禁止直接使用它们（您无法在 Windows 上轻松访问 VESA），因此要访问他们必须启动 MS-DOS、使用自定义操作系统或帮助程序类（例如 linux 上的 SVGAlib），它们可能只能在 root 权限下运行。当然，即使您实际使用 VESA/VGA 自己渲染某些东西，与 OpenGL/DirectX 完成的硬件加速渲染相比，在任何硬件（比 RivaTNT 2 Pro 更新）上的性能都将是可怕的。你有没有见过 windows xp 在没有适当的 GPU 驱动程序时工作的速度有多快（重绘窗口需要一秒钟）？这就是直接 VESA/VGA 访问的速度。

> 请不要问我为什么要这样做。

问你为什么要这样做是有道理的。您的“我想要直接的低级访问”方法可能适用于 15..20 年前或 DOS 时代。现在合理的解决方案是使用现有的 API（由不是你的人维护）并寻找一种充分利用它的方法。当然，如果你想开发驱动程序，那就另当别论了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T18:38:28.860

> Opengl 和 DirectX 是否编译到 GDI 的级别，或者他们有什么特殊的方法吗

和

> 我意识到大多数人都在使用 Opengl 或 DirectX。但是，我不想要开销

所以你说的是**你完全不知道 OpenGL 或 DirectX 实际做了什么，但你已经确定它们的效率不足以满足你的需求。

对不起，这是胡说八道。回答这样的问题是不可能的。

在现实世界中，您拥有一台专门用于绘图的小型超级计算机。您可以通过 OpenGL 和 DirectX 访问它。

它们速度快的原因是它们**不**只是“从头开始并控制像素数据”。

因此，如果您想要认真的答案，请尝试让那些有知识回答您问题的人决定哪个问题最好。

如果您想要高效的图形，正确的答案是使用 DirectX 或 OpenGL。

# asp.net-mvc - 传入字典的模型项是“System.Boolean”类型的？

> ID：10374555
> 
> 赞同：1
> 
> 时间：2012-04-29T18:02:29.803
> 
> 标签：asp.net-mvc, jquery-ui

我收到了这个错误：

```
The model item passed into the dictionary is of type 'System.Boolean', but this dictionary requires a model item of type 'DunyaYazilim.Models.TBL_CATEGORIES'. 
```

这是我的看法：

```
@model DunyaYazilim.Models.TBL_CATEGORIES
@{
    ViewBag.Title = "EditCategory";
}
@using (Html.BeginForm((string)ViewBag.FormAction, "Administrator"))
{
    <div>
        <div>Category Name</div>
        <div>@Html.TextBoxFor(m => m.Name)</div>
        <input type="submit" value="Submit" />
    </div>
} 
```

这是控制器：

```
public ActionResult EditCategory(int CategoryID)
{
    return PartialView(entity.TBL_CATEGORIES.Select(c=>c.CategoryID==CategoryID).FirstOrDefault());
} 
```

和行动链接：

```
@Html.ActionLink("update", "EditCategory", "Administrator", new { CategoryID = categories.CategoryID }, new { @class = "openDialog", dialog_id = "EditCategory", dialog_title = "Update Category" }) 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T18:09:41.787

您的选择语句是问题的原因-它返回布尔值-我认为您的意思是 c=>c.CategoryID==CategoryID 位于 Where 或 FirstOrDefault 中（取决于您的数据源-我没有认为 EF 4.0 支持 FirstOrDefault 中的子句）

尝试

```
public ActionResult EditCategory(int CategoryID)
{
    return PartialView(entity.TBL_CATEGORIES.Where(c=>c.CategoryID==CategoryID).FirstOrDefault());
} 
```

Select 旨在投影结果，而不是 where 子句。

# java - java slick无法加载tmx tilemaps

> ID：10374559
> 
> 赞同：0
> 
> 时间：2012-04-29T18:02:41.047
> 
> 标签：java, slick2d

我刚开始使用 Slick2D 并了解了加载瓷砖地图并显示它是多么简单。我从众多示例中尝试了至少十几个不同的 tmx 文件，以查看它是否是损坏的实际文件。每次我得到这个错误：

```
Exception in thread "main" java.lang.RuntimeException: Resource not found: data/maps/desert.tmx
    at org.newdawn.slick.util.ResourceLoader.getResourceAsStream(ResourceLoader.java:69)
    at org.newdawn.slick.tiled.TiledMap.<init>(TiledMap.java:101)
    at game.Game.init(Game.java:17)
    at game.Tunneler.initStatesList(Tunneler.java:37)
    at org.newdawn.slick.state.StateBasedGame.init(StateBasedGame.java:164)
    at org.newdawn.slick.AppGameContainer.setup(AppGameContainer.java:390)
    at org.newdawn.slick.AppGameContainer.start(AppGameContainer.java:314)
    at game.Tunneler.main(Tunneler.java:29) 
```

这是我的游戏课：

```
package game;
import org.newdawn.slick.GameContainer;
import org.newdawn.slick.Graphics;
import org.newdawn.slick.SlickException;
import org.newdawn.slick.state.BasicGameState;
import org.newdawn.slick.state.StateBasedGame;
import org.newdawn.slick.tiled.TiledMap;

public class Game extends BasicGameState{
    private int stateID = -1;
    private TiledMap map = null;

    public Game(int stateID){
        this.stateID = stateID;
    }
    public void init(GameContainer container, StateBasedGame game) throws SlickException{
        map = new TiledMap("data/maps/desert.tmx","maps");//ERROR
    }
    public void render(GameContainer container, StateBasedGame game, Graphics g) throws SlickException{
        //map.render(0,0);
    }
    public void update(GameContainer container, StateBasedGame game, int delta) throws SlickException{
    }

    public int getID(){return stateID;}
} 
```

我试图看看是否有其他人遇到过类似的问题，但没有发现任何问题。我能够加载其他文件，所以我不认为这是编译器问题。我的菜单类可以加载图像并很好地显示它们。此外，文件路径是正确的。

如果您有任何建议可以帮助我解决这个问题，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:12:01.110

这看起来像一个“找不到文件”的问题。它基本上是说它找不到您指定的文件（阅读：“资源”）。检查您的相对路径，`data/maps/desert.tmx`并确保它是正确的。

如果这不起作用，请将您的相对路径替换为绝对路径（从文件系统的根目录开始），仅用于测试，看看是否有效。如果这确实有效，那么您的相对路径应该有效，但只是没有正确指定。我看到的最常见的问题之一是在查找资源时没有*打开*几个文件夹。例如，可能对您来说正确的相对路径是`../../data/maps/desert.tmx`，或者类似的东西。您需要确定您的代码是在哪个文件夹中执行的（可能是一个`bin`文件夹？），并从那里指定相对路径。

# facebook - joomla 组件上的 API 关键函数

> ID：10374565
> 
> 赞同：0
> 
> 时间：2012-04-29T18:02:59.583
> 
> 标签：facebook, joomla

我正在使用带有 joomla 组件的 facebook API 密钥来使用 facebook 帐户对文章发表评论。

我使用第三方组件 JFBCONNECT 发表评论，该组件使用 API KEY。

我想知道发布的评论是否有任何备份或数据库？

如果我用 joomla CMS 1.7 更改我的 joomla CMS 1.5 并安装新的 JFBCONNECT 然后提供相同的 API KEY，我可以取回所有评论吗？

等待。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T05:57:11.980

JFBCONNECT 中的 facebook 评论存储在 facebook 服务器上并与您的应用程序相关联。

因此，如果您升级 joomla，您将不会丢失任何评论，直到 url' 相同。因为我认为 facebook 使用 url 作为唯一标识符来管理评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T18:21:41.447

是的你可以。我不确定评论是否存储在您的服务器或 facebook 服务器上，因此，请转到您的 Koomla 数据库并查找 JFBCONNECT 表，查看其中是否包含所做的评论。如果是，则进行备份，如果不是，则将它们存储在 facebook 数据库中。

# java - Servlet 抛出异常

> ID：10374567
> 
> 赞同：0
> 
> 时间：2012-04-29T18:03:05.417
> 
> 标签：java, servlets

这是我用来查询 solr 索引的 Servlet 代码

```
import java.io.*;
import java.net.*;
import java.text.*;
import java.util.*;
import javax.servlet.*;
import javax.servlet.http.*;

//Solr Imports
import org.apache.solr.client.solrj.SolrServer;
import org.apache.solr.client.solrj.SolrServerException;
import org.apache.solr.client.solrj.impl.CommonsHttpSolrServer;
import org.apache.solr.client.solrj.response.QueryResponse;
import org.apache.solr.client.solrj.SolrQuery;
import org.apache.solr.common.params.ModifiableSolrParams;
import org.apache.solr.client.solrj.request.ContentStreamUpdateRequest;
import org.apache.solr.common.SolrInputDocument;
import org.apache.solr.client.solrj.request.AbstractUpdateRequest;

/*
import org.jdom.Document;
import org.jdom.Element;
import org.jdom.JDOMException;
import org.jdom.input.SAXBuilder;
*/

public class HelloWorldExample extends HttpServlet {

    public void doGet(HttpServletRequest request,HttpServletResponse response) throws IOException, ServletException
    {
        PrintWriter out = response.getWriter();
        String inputStr=request.getParameter("input");
        out.println("<html><h1>" + inputStr + "</h1></body></html>");
        //try {
        SolrServer server = new CommonsHttpSolrServer("http://localhost:8080/solr/");
        SolrQuery solrQuery = new SolrQuery(); 
        //solrQuery.setQuery("fileName:"+input);
        solrQuery.setQuery("Latitude:"+32.55668);
        QueryResponse rsp = server.query(solrQuery);
        //SolrDocumentList x = rsp.getResults();
        System.out.println(rsp);
        }
        catch (SolrServerException e) {
            e.printStackTrace();
        }       
    }
} 
```

我正在使用

**D:\xampp\tomcat\webapps\examples\WEB-INF\classes>javac -classpath .;D:\JAR\servl et-api.jar;D:\JAR\1solr-core-1.3.0.jar;D :\JAR\1solr-solrj-1.3.0.jar;D:\JAR\1solr -common-1.3.0.jar;D:\JAR\apache-solr-solrj-1.4.0.jar HelloWorldExample.java**

此代码编译没有问题。但是，当我运行此 servlwt 时，它给了我一个错误：

> 类型异常报告消息
> 
> 描述 服务器遇到一个内部错误 () 阻止它完成这个请求。
> 
> 例外
> 
> javax.servlet.ServletException：Servlet 执行引发异常根本原因
> 
> java.lang.NoClassDefFoundError: org/apache/solr/client/solrj/impl/CommonsHttpSolrServer HelloWorldExample.doGet(HelloWorldExample.java:35) javax.servlet.http.HttpServlet.service(HttpServlet.java:621) javax.servlet.http .HttpServlet.service(HttpServlet.java:722)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T21:16:04.407

编译时，您正确地将所有依赖库包含到类路径中。

用于执行的类路径是完全不同的野兽。您需要确保 Servlet 在执行时可以访问 jar。如何做到这一点取决于您使用的容器。因为它是 tomcat，所以应该很容易找到（搜索网络）如何添加第三方库（很确定你可以将 jar 转储到 common/lib 目录中）。

最好的构建过程与手动编译 servlet 类不同。例如 IDE 或 maven - 这将产生一个战争 / Web 应用程序并将其部署到 servlet 容器（在您的情况下为 tomcat）。我真的非常推荐这样做，而不是手动编译和部署（一旦你获得了 IDE 的工作方式并且在部署方面变得更加熟练，你可以回到手动部署）

也许在互联网上搜索有关 servlet 和 tomcat 的教程？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T19:53:09.997

将 webapp 依赖的库 JAR 文件放在其`/WEB-INF/lib`文件夹中。该文件夹默认包含在 webapp 的运行时类路径中。

# javascript - 使用访问本地 VB Dll Can I access a Local registered Dll like this from javascript like this: 问问题 问问题 2012-04-29T18:03:30.787 326 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. Can I access a Local registered Dll like this from javascript like this: function dllData(){ alert('called') var objData = document.getElementById('dllId'); alert(objData); } Am trying to do this from a normal HTML page. Is it possible in the above manner? Kindly suggest. Thanks axis2 - Error parsing WSDL I'm new in using axis2 and I'trying to generate java classes from a wsdl. Unfotunately I get the following exception : org.apache.axis2.wsdl.codegen.CodeGenerationException: Error parsing WSDL I cannot figure out how to find the problem. I work with axis2-1.6.2 on jdk1.7 and win7\. Any hint would be appreciated. Flavio here is my wsdl : <wsdl:definitions name="IFX170PortType" targetnamespace="urn:ifxforum-org:WSDL:1:PortType" xmlns:tns="urn:ifxforum-org:WSDL:1:PortType" xmlns:types="urn:ifxforum-org:WSDL:1:PortType:types" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><wsdl:types><xsd:schema targetnamespace="urn:ifxforum-org:WSDL:1:PortType:types" xmlns:ifx="urn:ifxforum-org:XSD:1" xmlns:xsd="http://www.w3.org/2001/XMLSchema" elementformdefault="qualified"></xsd:schema></wsdl:types><wsdl:message name="DoIFXRqMsg"><wsdl:part name="parameters" element="types:DoIFXRq"></wsdl:part></wsdl:message><wsdl:message name="DoIFXRsMsg"><wsdl:part name="result" element="types:DoIFXRs"></wsdl:part></wsdl:message><wsdl:porttype name="IFX170PortType"><wsdl:operation name="DoIFX"></wsdl:operation></wsdl:porttype><wsdl:binding name="IFX170SOAPBinding" type="IFX170PortType"><soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"><wsdl:operation name="DoIFX"><soap:operation style="document" soapaction="getDoIFX"><wsdl:input><soap:body use="literal"></soap:body></wsdl:input><wsdl:output><soap:body use="literal"></soap:body></wsdl:output></soap:operation></wsdl:operation></soap:binding></wsdl:binding><wsdl:service name="IFX170Service"><wsdl:port name="IFX170SOAPPort" binding="IFX170SOAPBinding"><soap:address location="http://localhost:8080/axis2/services /StockQuoteService"></soap:address></wsdl:port></wsdl:service></wsdl:definitions>javascriptvb6object-tag 4 1 回答 1 This answer is useful 1 不，您需要通过“new ActiveXObject()”从该 DLL 实例化对象，然后调用该对象实例的方法。 于 2012-04-29T18:28:04.283 回答 Related 1 mysql - MySQL 触发器：更新 table1 后，从 table2 中删除行？ 2 php - empty file in force download - what is wrong? 1 jquery - add fade-in fade-out effect to menu mouse hover 3 c - Specifying number of bits for a datatype in C 3 java - Oracle Forms 10g 粘滞光标 7 c# - ListBox selectedItem 开始工作但在 MVVM 中设置不工作 4 iphone - 在 UITableViewCell 中绘制文本 2 c++ - BOOST_THROW_EXCEPTION 在初始化列表中缺少三元运算符的解决方法 1 php - 即使扩展加载得很好，redis也会抛出错误 1 javascript - 如何在表中创建二维数组？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10374570
> 
> 赞同：1
> 
> 时间：
> 
> 标签：javascript, vb6, object-tag

Can I access a Local registered Dll like this

```
 <object classid="clsid:8fa8600b-dd9d-4ec2-a533-2986cb0df433" id="dllId">
    </object> 
```

from javascript like this:

```
 function dllData(){
        alert('called')
        var objData = document.getElementById('dllId');
        alert(objData);
   } 
```

Am trying to do this from a normal HTML page. Is it possible in the above manner?

Kindly suggest.

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T18:28:04.283

不，您需要通过“new ActiveXObject()”从该 DLL 实例化对象，然后调用该对象实例的方法。

# web-services - axis2 - 解析 WSDL 时出错

> ID：10374571
> 
> 赞同：0
> 
> 时间：2012-04-29T18:04:02.983
> 
> 标签：web-services, axis2, wsdl2java

我是使用axis2的新手，我试图从wsdl生成java类。不幸的是，我得到了以下异常： `org.apache.axis2.wsdl.codegen.CodeGenerationException: Error parsing WSDL` 我无法弄清楚如何找到问题。我在 jdk1.7 和 win7 上使用axis2-1.6.2。任何提示将不胜感激。Flavio 这是我的 wsdl：

```
<?xml version="1.0" encoding="UTF-8"?>
<wsdl:definitions 
name="IFX170PortType" 
targetNamespace="urn:ifxforum-org:WSDL:1:PortType" 
xmlns:tns="urn:ifxforum-org:WSDL:1:PortType" 
xmlns:types="urn:ifxforum-org:WSDL:1:PortType:types" 
xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" 
xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<wsdl:types>
    <xsd:schema 
        targetNamespace="urn:ifxforum-org:WSDL:1:PortType:types"
        xmlns:ifx="urn:ifxforum-org:XSD:1" 
        xmlns:xsd="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified">
        <xsd:import namespace="urn:ifxforum-org:XSD:1" 
                                schemaLocation="IFX170.xsd"/>
        <xsd:element name="DoIFXRq">
            <xsd:complexType>
                <xsd:sequence>
                    <xsd:element ref="ifx:IFX" />
                </xsd:sequence>
            </xsd:complexType>
        </xsd:element>
        <xsd:element name="DoIFXRs">
            <xsd:complexType>
                <xsd:sequence>
                    <xsd:element ref="ifx:IFX" />
                </xsd:sequence>
            </xsd:complexType>
        </xsd:element>
    </xsd:schema>
</wsdl:types>
<wsdl:message name="DoIFXRqMsg">
    <wsdl:part name="parameters" element="types:DoIFXRq"/>
</wsdl:message>
<wsdl:message name="DoIFXRsMsg">
    <wsdl:part name="result" element="types:DoIFXRs"/>
</wsdl:message>
<wsdl:portType name="IFX170PortType">
    <wsdl:operation name="DoIFX">
        <wsdl:input message="tns:DoIFXRqMsg"/>
        <wsdl:output message="tns:DoIFXRsMsg"/>
    </wsdl:operation>
</wsdl:portType>
<wsdl:binding name="IFX170SOAPBinding" type="IFX170PortType">
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http" />
    <wsdl:operation name="DoIFX">
        <soap:operation style="document" soapAction="getDoIFX" />
        <wsdl:input>
            <soap:body use="literal" />
        </wsdl:input>
        <wsdl:output>
            <soap:body use="literal" />
        </wsdl:output>
    </wsdl:operation>
</wsdl:binding>
<wsdl:service name="IFX170Service">
    <wsdl:port name="IFX170SOAPPort" binding="IFX170SOAPBinding">
        <soap:address location="http://localhost:8080/axis2/services      /StockQuoteService" />
    </wsdl:port>
</wsdl:service>
</wsdl:definitions> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T05:08:11.010

如果仍有问题，请尝试对 WSDL 进行以下更新，以确保正确引用 WSDL 中的相关实体：

```
<wsdl:binding name="IFX170SOAPBinding" type="tns:IFX170PortType">

<wsdl:service name="IFX170Service">
    <wsdl:port name="IFX170SOAPPort" binding="tns:IFX170SOAPBinding"> 
```

请注意分别在 type 和 binding 属性中使用 'tns:' 前缀。

# facebook - Unable to create Facebook App - Try again Later

> ID：10374577
> 
> 赞同：3
> 
> 时间：2012-04-29T18:04:50.067
> 
> 标签：facebook

I am unable to create a simple facebook app. It continually says try again later. I have searched the forums, but only see posts about people trying to create the app as a "page", but I am logged in as a "user" on the master account. My account has been active for 7 years and I only have one page.

What do I have to do to get the ability to create an app?

I am simply trying to create the app so that customers can click a like button on our product pages. This is done using a pre-built extension in the Magento E-Commerce platform. All I need is the appID to plug into Magento.

Please help!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T05:10:50.957

看起来事情正在奏效。如果需要，请在重试之前清除浏览器缓存或注销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T03:42:05.783

我今天遇到了同样的问题。我试图为这个网站的粉丝页面创建一个应用程序：[http ://www.cutepickuplines.info](http://www.cutepickuplines.info)

好像是脸书的问题。我想它会在一天结束时得到解决。当我让它工作时，我会在这里报告。

# c - 动态库函数调用

> ID：10374578
> 
> 赞同：1
> 
> 时间：2012-04-29T18:04:59.257
> 
> 标签：c, linux, dlsym

我有以下代码，它只是从当前目录加载库 test.so 并`version`在该库中执行函数。应该返回的是一个字符串。相反，返回的是堆栈中的垃圾（可能是指针位置？）。有谁知道为什么以下代码会失败。

```
#include <stdio.h>
#include <stdlib.h>
#include <dlfcn.h>

int main(int argc, char **argv){
    void *handler;
    char *(*version);
    char *error;

    handler = dlopen("./test.so", RTLD_LAZY);
    if(!handler){
        fprintf(stderr, "%s\n", dlerror());
        exit(EXIT_FAILURE);
    }

    dlerror(); //Flushes any existing error

    *(void **)(&version) = dlsym(handler, "version");

    if((error = dlerror()) != NULL){
        fprintf(stderr, "%s\n", error);
        exit(EXIT_FAILURE);
    }
    printf("%s\n", version);
    dlclose(handler);
    exit(EXIT_SUCCESS);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T18:24:56.717

更改声明：

```
char *(*version); // this is not a function pointer 
```

到：

```
char *(*version)(); // but this is 
```

然后，更改行：

```
printf("%s\n", version); 
```

到：

```
printf("%s\n", version()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T18:10:40.750

dlsym 只返回一个函数指针。您仍然需要实际调用它，您可以通过将 (void*) 强制转换为适当类型的函数指针并调用它来实现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-29T18:36:18.340

您的代码中有两个错误：

: 它的声明`version`是指向代码中 char 的指针的指针，这导致您在以下位置进行了奇怪的转换：

```
*(void **)(&version) = dlsym(handler, "version"); 
```

而是使用指向函数的指针返回指向 char 的指针，如下所示：

```
char *(*version)(); 
```

并使用常规分配：

```
version = dlsym(handler, "version"); 
```

当您打印结果时，您没有调用该函数。在 C 中，只写函数名会返回它的地址，所以`version`和`&version`是等价的。你的代码应该是这样的：

```
printf("%s\n", version()); 
```

# objective-c - 使用纯文本文件存储任意元数据

> ID：10374580
> 
> 赞同：9
> 
> 时间：2012-04-29T18:05:13.590
> 
> 标签：objective-c, cocoa

我正在编写一个文本编辑器，我需要在应用程序保存的每个文件中存储一些信息（通常只是几个字符串；存储不需要特别持久）（而不是文本文件的一部分）因为其他应用程序可能会读取它并且信息仅特定于我的应用程序）。

我该怎么办？

* * *

更多信息：我有一个 NSDocument 设置，我想简单地存储一个 NSString 实例变量作为每个文件元数据。根据下面的答案，我想出了这个，目前有问题，导致程序在启动时崩溃：

```
#import <sys/xattr.h>
@interface MyDocument : NSDocument {
  NSString *metadatum;
}

@implementation MyDocument 

- (BOOL)writeToURL:(NSURL *)url ofType:(NSString *)type error:(NSError **)err
{
  BOOL output = [super writeToURL:url ofType:type error:err];
  if(!setxattr([[url path] cStringUsingEncoding:NSUTF8StringEncoding], 
               "eu.gampleman.xattrs.style", 
               [metadatum cStringUsingEncoding:NSUTF8StringEncoding], 
               sizeof(char) * [styleName length], 0, 0)) 
  {
      NSLog(@"Write failure");
  }
  return output;
}

- (BOOL)readFromURL:(NSURL *)url ofType:(NSString *)type error:(NSError **)err {
  char *output;
  ssize_t bytes = getxattr([[url path] cStringUsingEncoding:NSUTF8StringEncoding],
                           "eu.gampleman.xattrs.style", &output, 1024, 0, 0);
  if (bytes > 0) {
    metadatum = [[NSString alloc] initWithBytes:output length:bytes 
          encoding:NSUTF8StringEncoding]; // <- crashes here with "EXC_BAD_ACCESS"
  }
  return [super readFromURL:url ofType:type error: err];
}

// ...
// fairly standard -dataOfType:error: and 
// -readFromData:ofType:error: implementations 
```

* * *

PS：如果你的回答真的很好（附上示例代码等），我会奖励 100rep 的赏金。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-29T18:21:24.177

使用扩展属性。请参阅[setxattr()](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man2/setxattr.2.html)。

这是一个编写字符串的示例调用：

```
NSData* encodedString = [theString dataUsingEncoding:NSUTF8StringEncoding];
int rc = setxattr("/path/to/your/file", "com.yourcompany.yourapp.yourattributename", [encodedString bytes], [encodedString length], 0, 0);
if (rc)
    /* handle error */; 
```

读取字符串：

```
ssize_t len = getxattr("/path/to/your/file", "com.yourcompany.yourapp.yourattributename", NULL, 0, 0, 0);
if (len < 0)
    /* handle error */;
NSMutableData* data = [NSMutableData dataWithLength:len];
len = getxattr("/path/to/your/file", "com.yourcompany.yourapp.yourattributename", [data mutableBytes], len, 0, 0);
NSString* string = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]; 
```

PS：您不必在问题得到回答之前就设置赏金吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T18:25:53.690

在 Mac 上有几个地方可以存储此类信息。当然，最简单的方法是将其存储在您自己单独的元数据数据库中。如果文件移动，当然会有挑战。但是，从 10.6 开始，您可以使用书签来解决此问题。书签（请参阅[NSURL](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html)）允许您保留对文件的引用，即使它被移动（即使在应用程序重新启动时）。在 10.6 之前有别名管理器，但它不能创建新别名；只需阅读 Finder 创建的内容。

下一个常见的解决方案是创建元数据文件。所以如果我有`foo.txt`，那么你创建一个兄弟`.foo.txt.metadata`来保存额外的信息。如果可以移动文件，则需要进行一些权衡。

接下来是 Spotlight，可用于将任意信息附加到文件中。这里的实际工具是 xattr （参见手册页`setxattr`及其亲属）。这些基本上吸收了过去使用 Resource Forks 完成的几件事（除了 xattr 应该只是元数据）。

# android - OpenGL透明图像中有黑色

> ID：10374581
> 
> 赞同：5
> 
> 时间：2012-04-29T18:05:14.190
> 
> 标签：android, opengl-es, alpha, overlap, blending

我正在开发一款适用于 Android 的游戏，我想知道为什么每当我绘制透明图像时，透明部分似乎总是添加一些黑色。这一切都发生了，让我的一些效果看起来很奇怪。

这是一个例子。这两个圆圈只是带有模糊的白色图像，但是当一个与另一个重叠时，您可以看到它有阴影。如果我在 Inkscape 中重叠两个圆圈，我会在它们重叠的地方得到纯白色。

![在此处输入图像描述](../Images/4f393d584951758e012eeaeec325218f.png)

我在用

```
GLES20.glEnable(GLES20.GL_BLEND);
GLES20.glBlendFunc(GLES20.GL_SRC_ALPHA, GLES20.GL_ONE_MINUS_SRC_ALPHA); 
```

为我的混合。

知道为什么会发生这种情况以及如何避免它吗？

编辑：我唯一能想到的是这两个图像具有相同的 z 所以也许它们只与背景混合而不是相互混合？

编辑：我改变了

```
GLES20.glBlendFunc(GLES20.GL_SRC_ALPHA, GLES20.GL_ONE_MINUS_SRC_ALPHA); 
```

到

```
GLES20.glBlendFunc(GLES20.GL_SRC_ALPHA, GLES20.GL_DST_ALPHA); 
```

这是我正在寻找的结果。

![在此处输入图像描述](../Images/7d274b97c9eb7fcee560661e78473fd8.png)

现在唯一的事情是我拥有的透明黑色的透明图像被忽略了，这是有道理的，因为我认为目标 alpha 是 1。为什么一个减源会添加那个灰色？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-30T02:31:19.670

我想出了如何解决它。

我变了

```
GLES20.glBlendFunc(GLES20.GL_SRC_ALPHA, GLES20.GL_ONE_MINUS_SRC_ALPHA); 
```

到

```
GLES20.glBlendFunc(GLES20.GL_ONE, GLES20.GL_ONE_MINUS_SRC_ALPHA); 
```

事实证明，Android 在加载 PNG 图像时会预乘其纹理的 alpha（使白色变为灰色）。

我添加了

```
vColor.r = vColor.r * vColor.a;
vColor.g = vColor.g * vColor.a;
vColor.b = vColor.b * vColor.a; 
```

到我的顶点着色器为我的其他颜色做乘法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T18:13:39.377

你确定你的内容是正确的吗？如果您不希望圆圈产生任何黑色，则图像中的颜色值应该是完全白色的，并且 Alpha 通道应该定义圆圈的形状。现在看起来图像有一个带有 alpha 通道的白色圆圈，颜色值逐渐变为零，这会导致光晕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T22:10:48.073

您是否使用线性采样？我的想法可能是，如果您的图像非常小（尺寸小于 30-40 像素），您可能会在圆内部（alpha = 1）和圆外部（alpha = 0)。这将为您提供导致那种模糊效果的中间 alpha 值。

当您绑定了圆形纹理时，请尝试以下代码：

```
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST); 
```

也许您可以托管您正在使用的实际纹理，以便我们可以检查它？如果这没有帮助，也请发布您的绘图代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-21T00:54:29.483

您也可以除以 Alpha，因为问题是，当您导出纹理时，图像处理软件可能会预乘您的 Alpha 通道。我最终将 alpha 分割到我的片段着色器中。以下代码是 HLSL，但您可以轻松地将其转换为 GLSL：

```
float4 main(float4 tc: TEXCOORD0): COLOR0
{
    float4 ts = tex2D(Tex0,tc);

    //Divide out this pre-multiplied alpha
    float3 outColor = ts.rgb / ts.a;

    return float4(outColor, ts.a);
} 
```

请注意，此操作是有损的，非常有损，即使在这些情况下它很可能就足够了，但它不是一个通用的解决方案。在您的情况下，您可以完全忽略颜色并在片段着色器中提供原始 alpha 和白色，例如`return float4(1,1,1,ts.a);`（转换为 GLSL）

# ruby - Ruby 邮件 gem：连接被拒绝 - 连接（2）（Errno::ECONNREFUSED）

> ID：10374589
> 
> 赞同：2
> 
> 时间：2012-04-29T18:05:34.463
> 
> 标签：ruby, email

我正在尝试使用 Ruby[邮件](https://github.com/mikel/mail)gem 进行简单的邮件传递：

```
require 'mail'
Mail.deliver do
   from    'me@test.lindsaar.net'
   to      'varatis@gmail.com'
   subject 'Here is the image you wanted'
   body    File.read('body.txt')
end 
```

但我得到这个错误：

```
Users/varatis/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/net/smtp.rb:546:in `initialize': Connection refused - connect(2) (Errno::ECONNREFUSED)
from /Users/varatis/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/net/smtp.rb:546:in `open'
from /Users/varatis/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/net/smtp.rb:546:in `tcp_socket'
from /Users/varatis/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/net/smtp.rb:555:in `block in do_start'
from /Users/varatis/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/timeout.rb:58:in `timeout'
from /Users/varatis/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/timeout.rb:89:in `timeout'
from /Users/varatis/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/net/smtp.rb:555:in `do_start'
from /Users/varatis/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/net/smtp.rb:525:in `start'
from /Users/varatis/.rvm/gems/ruby-1.9.2-p290/gems/mail-2.4.4/lib/mail/network/delivery_methods/smtp.rb:144:in `deliver!'
from /Users/varatis/.rvm/gems/ruby-1.9.2-p290/gems/mail-2.4.4/lib/mail/message.rb:2034:in `do_delivery'
from /Users/varatis/.rvm/gems/ruby-1.9.2-p290/gems/mail-2.4.4/lib/mail/message.rb:231:in `deliver'
from /Users/varatis/.rvm/gems/ruby-1.9.2-p290/gems/mail-2.4.4/lib/mail/mail.rb:140:in `deliver'
from mailer.rb:2:in `<main>' 
```

我怎样才能解决这个问题？我假设这与 Mail 使用的默认端口有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T18:20:39.460

好的，想通了。

Sendmail 没有运行，所以我启动了它，并更改了这些行：

```
require 'mail'
mail = Mail.new do
  from     'me@test.lindsaar.net'
  to       'varatis@yahoo.com'
  subject  'Here is the image you wanted'
  body     File.read('body.txt')
end

mail.delivery_method :sendmail

mail.deliver 
```

# android - 无法通过 ListActivity 使用自己的布局选择项目

> ID：10374602
> 
> 赞同：0
> 
> 时间：2012-04-29T18:07:12.500
> 
> 标签：android, listactivity

我正在尝试`ListActivity`网上的一个例子。我在使用自定义列表布局时遇到问题。这是我的代码：

```
public class Test1Activity extends ListActivity {
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    String[] values = new String[] { "Android", "iPhone", "WindowsMobile",
            "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X",
            "Linux", "OS/2" };
    //ArrayAdapter<String> standard_adapter = new ArrayAdapter<String> (this,android.R.layout.simple_list_item_1, values);

    ArrayAdapter<String> my_adapter = new ArrayAdapter<String>(this, R.layout.mylistlayout, R.id.label,values);
    setListAdapter(my_adapter);
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    String item = (String) getListAdapter().getItem(position);
    Toast.makeText(this, item + " selected", Toast.LENGTH_LONG).show();
}} 
```

`onListItemClick`当我使用标准适配器时工作正常。但是使用我的适配器时它不起作用。事实上，当我单击列表项时，我什至看不到任何突出显示。为什么会这样。我错过了一些代码吗？

`mylistlayout`是一个简单`LinearLayout`的`TextView`(id `label`) 和`Button`(id `button1`)。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal" >

<TextView
    android:id="@+id/label"
    android:layout_width="287dp"
    android:layout_height="wrap_content"
    android:text="items" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="32dp"
    android:padding="0dp"
    android:text="X" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T18:09:59.987

尝试添加：

```
android:focusable="false" 
```

到您`Button`的 xml 布局中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T18:24:59.493

尝试将此属性添加到您的 LinearLayout 中`mylistlayout`：

`android:descendantFocusability="blocksDescendants"`

# java - java中相关对象的序列化

> ID：10374604
> 
> 赞同：3
> 
> 时间：2012-04-29T18:07:25.620
> 
> 标签：java, serialization

假设我有 A、B 和 C 类型的对象。我有 3 个地图，分别包含 A、B 和 C 的所有实例。在内部，A 和 B 都有 C 的 Maps。我希望能够随时存储和恢复应用程序的状态。

所以，直到今天我一直序列化类似金字塔的应用程序，我会在顶部对象上调用序列化，并且调用会传播到其他所有东西。我该如何处理这种情况？如果我在 A 地图上调用序列化，然后在 B 地图上调用，C 实例不会被保存两次吗？即使他们这样做了，当我在反序列化 A 映射后反序列化 B 映射时，反序列化是否会离开应用程序状态，因为它只是覆盖 C 实例？

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-29T18:13:05.950

Java 序列化机制知道对同一个对象的多个引用，并且不会复制它们。该对象将被存储一次，并且所有内部引用都将被保留。

反序列化后，您的对象将处于相同状态：只有一个实例和对该对象的多个引用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T18:17:54.270

ObjectOutputStream 的 Javadoc[写道](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectOutputStream.html)：

> writeObject 方法用于将对象写入流。任何对象，包括字符串和数组，都是用 writeObject 编写的。可以将多个对象或原语写入流。对象必须从相应的 ObjectInputstream 以与写入时相同的类型和相同的顺序读回。

和

> 对其他对象的引用（瞬态或静态字段除外）也会导致这些对象被写入。对单个对象的多个引用使用引用共享机制进行编码，以便对象的图形可以恢复到与原始对象相同的形状。

特别是，如果同一个对象被重复写入一个`ObjectOutputStream`，它的数据只被写入一次。

您可以通过运行以下程序来验证这一点：

```
class A implements Serializable {
    C c;
}

class B implements Serializable {
    C c;
}

class C implements Serializable {

}

public class Test {

    public static void main(String[] args) throws Exception {
        C c = new C();

        A a = new A();
        a.c = c;

        B b = new B();
        b.c = c;

        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        try (ObjectOutputStream oos = new ObjectOutputStream(baos)) {
            oos.writeObject(a);
            oos.writeObject(b);
            oos.writeObject(c);
        }
        byte[] data = baos.toByteArray();

        try (ObjectInputStream ois = new ObjectInputStream(new ByteArrayInputStream(data))) {
            A newA = (A) ois.readObject();
            B newB = (B) ois.readObject();
            C newC = (C) ois.readObject();

            System.out.println(newA.c == newC && newB.c == newC); // prints "true"
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T18:14:22.103

最好的办法是回到你的“金字塔状”模型，将你的地图存储在一个对象中，然后序列化这个对象；

```
public class ApplicationState implements Serializable {
    private Map<Foo, A> aMap;
    private Map<Bar, B> bMap;
} 
```

序列化机制可以毫无问题地处理同一对象的图形和多个实例。

# javascript - 将 location.href 附加到 iframe 中的表单

> ID：10374606
> 
> 赞同：0
> 
> 时间：2012-04-29T18:07:49.893
> 
> 标签：javascript, forms, iframe

这是我得到的：

1=包含表单的页面 2=包含 iframe 1 的页面

我在表单中创建了一个不可见的文本区域，因此它可以填充包含 iframe 的页面的 URL。

1 和 2 都在不同的域上。我可以完全访问这两个站点。

我想要做的是知道表单是从哪里发送的。

不确定我是否足够清楚：

![框架](../Images/4adab3c45c552b086bcefbe07e6a8a54.png)

我已经尝试附加：

```
 <script type="text/javascript">
            $(document).ready(function() {
                $('textarea#id_subject').append(window.parent.location.href)
            });
            </script> 
```

到1，但它没有工作。我怎么能做到这一点，有什么想法吗？

顺便说一句，这个 iframe 将附加到 10-100 个其他站点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T18:17:06.193

您可以在 iframe url 中添加父窗口的 url 作为 GET 参数：

```
This goes in parent page.
<iframe src="http://something.com/form.html?parent_url={your url goes here}">
</iframe> 
```

它可以在服务器端或客户端完成。从 iframe 内部，您可以在服务器端（通过读取 GET 参数）或在客户端（通过读取`location.href`）访问此值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T18:23:19.777

> 此 iframe 将附加到 10-100 个其他站点

同源[政策](http://en.wikipedia.org/wiki/Same_origin_policy)会妨碍您。

通过其他技术传递 URL。iframe中的查询字符串`src`是一个合理的选择。

# perl - 为什么这个 Perl 脚本会给我一个“使用未初始化的附加值 (+)”错误

> ID：10374607
> 
> 赞同：1
> 
> 时间：2012-04-29T18:07:54.107
> 
> 标签：perl

下面的程序应该采用一个数组并对其进行压缩，以便没有重复的产品并将总数相加，因此：

```
A B B C D A E F
100 30 50 60 100 50 20 90 
```

变成：

```
A 150
B 80
C 60
D 100
E 20
F 90 
```

下面的代码按照我想要的方式运行和工作：

```
#! C:\strawberry\perl\bin
use strict;
use warnings;

my @firstarray = qw(A B B C D A E F);
my @secondarray = qw (100 30 50 60 100 50 20 90); 
my @totalarray; 
my %cleanarray; 
my $i;

# creates the 2d array which holds variables retrieved from a file
@totalarray = ([@firstarray],[@secondarray]);
my $count = $#{$totalarray[0]};

# prints the array for error checking
for ($i = 0;  $i <= $count; $i++) {
    print "\n $i) $totalarray[0][$i]\t $totalarray[1][$i]\n";
}

# fills a hash with products (key) and their related totals (value)
for ($i = 0;  $i <= $count; $i++) {
    $cleanarray{ $totalarray[0][$i] } = $cleanarray{$totalarray[0][$i]} + $totalarray[1][$i];
}

# prints the hash
my $x = 1;
while (my( $k, $v )= each %cleanarray) {
    print "$x) Product: $k Cost: $cleanarray{$k} \n";
    $x++;
} 
```

然而，在打印哈希之前，它给了我六次“使用未初始化的值加法（+）”错误。对 Perl 非常陌生（这是我在教科书之外的第一个 Perl 程序），有人可以告诉我为什么正在发生吗？好像我已经初始化了一切......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T18:19:29.107

它在这些行中给了我编译错误：

```
my @cleanarray; 
```

这是一个哈希。

```
my %cleanarray; 
```

和这里：

```
$cleanarray{ $totalarray[0][$i] } = $cleanarray{$totalarray[0][$i]} + totalarray[1][$i]; 
```

你错过了 的印记`totalarray`。这是`$totalarray[1][$i]`

因为`$cleanarray{$totalarray[0][$i]}`不存在未定义的消息。使用较短的：

```
$cleanarray{ $totalarray[0][$i] } += totalarray[1][$i]; 
```

将在没有警告的情况下工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T18:18:04.287

您正在使用 cleanarray 作为哈希，但它被声明为数组

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T23:08:06.380

您可能会发现您更喜欢这种程序重组。

```
use strict;
use warnings;

my @firstarray = qw (A B B C D A E F);
my @secondarray = qw (100 30 50 60 100 50 20 90); 

# prints the data for error checking
for my $i (0 .. $#firstarray) {
  printf "%d) %s %.2f\n", $i, $firstarray[$i], $secondarray[$i];
}
print "\n";

# fills a hash with products (key) and their related totals (value)
my %cleanarray; 
for my $i (0 .. $#firstarray) {
  $cleanarray{ $firstarray[$i] } += $secondarray[$i];
}

# prints the hash
my $n = 1;
for my $key (sort keys %cleanarray) {
  printf "%d) Product: %s Cost: %.2f\n", $n++, $key, $cleanarray{$key};
} 
```

# vim - 我怎样才能看到 vim 认为我在敲什么键？

> ID：10374615
> 
> 赞同：12
> 
> 时间：2012-04-29T18:08:25.000
> 
> 标签：vim

有没有办法获得类似**[xev](http://linux.die.net/man/1/xev)**的模式，我可以在其中按下键和键组合，vim 会打印出它认为我正在按下的键或字符？

具体相关问题：我有在 MacVim 和 GVim 中工作的键绑定，但它们在终端 vim 中不起作用，我在 Linux 上通过屏幕内的 SSH 使用它。我得出的结论是，原因是 vim 认为我按下的键与 MacVim 对它们的解释不同。

在我的 .vimrc 中：

```
map <M-,> :split<CR> " Horizontal split
map <M-.> :vsplit<CR> " Vertical split
map <M-/> :close<CR> 
```

在我的 vim 中`:map`（MacVim 显示相同）：

```
¯             :close<CR><Space>
®             :vsplit<CR> " Vertical split
¬             :split<CR> " Horizontal split 
```

它适用于 MacVim 和 GVim，但不适用于任何基于终端的 vim。我已经在多个终端（OSX 终端和 Term2、KDE ​​终端、Gnome 终端等）中进行了尝试。我也用其他修饰符和键组合见证了这一点。似乎 vim 正在捕获击键，但它会将它们解释为除`<M-,>`示例之外的其他内容。

我很想有办法找出 vim 认为我在按什么，以便我可以相应地编写映射。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-29T19:30:17.390

1.  `i`切换到*插入*模式。
2.  `<C-v>`.
3.  `<key>`或组合。
4.  Vim 打印你按下的键/组合的“原始”值。

在这里（Ubuntu 11.04 上的 Gnome 终端），键入`i<C-v>`，然后是`<Alt>`，然后`,`打印一些看起来像`^[,`“Escape”的东西。密钥（我相信这`Alt`是您想要用于的`<Meta>`）既不被识别为`<Meta>`也不被识别为`<Alt>`.

直接的结论是 CLI Vim 不喜欢`<M->`（而且许多终端仿真器无论如何都不能很好地处理它）。一些终端仿真器允许您将`<Alt>`密钥映射到，`Meta`但它不是一个完美的跨平台解决方案（我`<Alt>`在 Mac OS X 上使用了很多来输入特殊字符）。

在这台机器上，

```
nnoremap ^[, :split<CR> " ^[ is <C-v><Esc> 
```

不过，这正是我认为你想要的。

如果您绝对想在 GUI 和 CLI 中继续使用`<M->`快捷方式，您需要维护两组独立的快捷方式。如果你有几十个自定义映射`.vimrc`，它很快就会变得有点难以管理。

这就是为什么我认为您应该使用在任何地方都可以使用的映射，例如：

```
:nnoremap <leader>, :split<CR>
:nnoremap <leader>. :vsplit<CR>
:nnoremap <leader>/ :close<CR> 
```

默认`<leader>`键是`\`，但我已将其设置为`,`.

请注意，您不需要使用`<leader>key`, 只需映射`,,`，`,.`并且`,/`也可以使用。

见`:help <leader>`。

# java - 如何在 JSF 页面中导航？

> ID：10374620
> 
> 赞同：-1
> 
> 时间：2012-04-29T18:09:22.567
> 
> 标签：java, jsf, jsf-2

我想用数据列表创建 h:datatable：

```
<h:dataTable id="dataTable" value="#{SessionsController.dataList}" binding="#{table}" var="item">
    <!-- Check box -->
        <h:column>
            <f:facet name="header">
                <h:outputText value="Select" />
            </f:facet>
            <h:selectBooleanCheckbox  onclick="highlight(this)"
                value="#{item.selected}" />
        </h:column>
        <h:column>
            <f:facet name="header">
                <h:commandLink value="№"
                    actionListener="#{SessionsController.sort}">
                    <f:attribute name="№" value="№" />
                </h:commandLink>
            </f:facet>
            <h:outputText
                value="#{table.rowIndex + SessionsController.firstRow + 1}" />
        </h:column>
        <h:column>
            <f:facet name="header">
                <h:commandLink value="Account Session ID"
                    actionListener="#{SessionsController.sort}">
                    <f:attribute name="sortField" value="Account Session ID" />
                </h:commandLink>
            </f:facet>
            <h:outputText value="#{item.aSessionID}" />
        </h:column>
        <h:column>
            <f:facet name="header">
                <h:commandLink value="User ID"
                    actionListener="#{SessionsController.sort}">
                    <f:attribute name="sortField" value="User ID" />
                </h:commandLink>
            </f:facet>
            <h:outputText value="#{item.userID}" />
        </h:column>
        <h:column>
            <f:facet name="header">
                <h:commandLink value="Activity Start Time"
                    actionListener="#{SessionsController.sort}">
                    <f:attribute name="sortField" value="Activity Start Time" />
                </h:commandLink>
            </f:facet>
            <h:outputText value="#{item.activityStart}" />
        </h:column>
        <h:column>
            <f:facet name="header">
                <h:commandLink value="Activity End Time"
                    actionListener="#{SessionsController.sort}">
                    <f:attribute name="sortField" value="Activity End Time" />
                </h:commandLink>
            </f:facet>
            <h:outputText value="#{item.activityEnd}" />
        </h:column>
        <h:column>
            <f:facet name="header">
                <h:commandLink value="Activity"
                    actionListener="#{SessionsController.sort}">
                    <f:attribute name="sortField" value="Activity" />
                </h:commandLink>
            </f:facet>
            <h:outputText value="#{item.activity}" />
        </h:column>
    </h:dataTable> 
```

当我单击表格行时，我希望打开一个显示更多详细信息的新页面。我想使用`aSessionID`将用于 SQL 查询的表键从数据库中获取数据。我知道我可以`h:commandLink`用来传递密钥，但我不想要丑陋的 html 链接。还有其他方法可以单击 JSF 表行，传递一个键并打开一个新窗口吗？

最好的祝愿

**编辑**

我在[这里找到了一种可能的解决方案](https://stackoverflow.com/questions/890743/click-entire-row-preserving-middle-click-and-ctrlclick)

使用此 JavaScript 代码，可以在用户单击一行时打开一个新窗口：

```
<table id="row_link"> 
  <tbody> 
    <tr>
      <td><a href="link1.html">link</a></td> 
      <td>info 1</td> 
    </tr>       
    <tr>
      <td><a href="link2.html">link</a></td> 
      <td>info 2</td> 
    </tr>       
  </tbody> 
</table>

$("table#row_link tbody tr").click(function () {
    window.location = $(this).find("a:first").attr("href");
}); 
```

问题是我如何将这个密钥传递`aSessionID`给新窗口。在上面的示例`href`中，用于将链接传递到新窗口。JSF表中可以使用什么属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T18:33:57.127

@BalusC（JSF 专家）有一篇关于在 JSF 1.2 中管理 Datatable 的帖子，但它也适用于 JSF 2.x。您对点击部分的[选择行感兴趣。](http://balusc.blogspot.com/2006/06/using-datatables.html#HighlightAndSelectRowOnClick)

更新：

让我解释一下这个例子。首先，每个 JSF 组件 ID 都将具有以下形式：:，例如：

```
<h:form id="myForm">
    <h:inputText id="myInputText" value="#{myBean.textValue}" />
</h:form> 
```

这将生成 HTML：

```
<form id="myForm">
    <input type="text" id="myForm:myInputText" />
</form> 
```

其次，您必须为数据表更新生成的[DOM](http://en.wikipedia.org/wiki/Document_Object_Model)。他通过 javascript 做到这一点，还给你 js 代码：

```
function addOnclickToDatatableRows() {
    //gets all the generated rows in the html table
    var trs = document.getElementById('form:dataTable').getElementsByTagName('tbody')[0]
        .getElementsByTagName('tr');
    //on every row, add onclick function (this is what you're looking for)
    for (var i = 0; i < trs.length; i++) {
        trs[i].onclick = new Function("highlightAndSelectRow(this)");
    }
} 
```

第三，定义`highlightAndSelectRow`js函数（名字可以随便改）。

```
function highlightAndSelectRow(tr) {
    //get all the datatable rows
    var trs = document.getElementById('form:dataTable').getElementsByTagName('tbody')[0]
        .getElementsByTagName('tr');
    //find the selected rowby using the tr parameter
    for (var i = 0; i < trs.length; i++) {
        if (trs[i] == tr) {
            //once found it, change the color (maybe you don't need this part)
            trs[i].bgColor = '#ff0000';
            //update a hidden value in the form (maybe you need this code)
            document.form.rowIndex.value = trs[i].rowIndex;
            //here, you can add js code to open a new window
            //or simulate a button/link click or something else you need.
        } else {
            trs[i].bgColor = '#ffffff';
        }
    }
} 
```

更新 2：

我已经为这个案例做了一个测试。我将向您展示使用 facelets 完成它的代码。

数据表.xhtml

```
<script type="text/javascript">
    function addOnclickToDatatableRows() {
        //gets all the generated rows in the html table
        var trs = document.getElementById('myForm:dataTable').getElementsByTagName('tbody')[0]
            .getElementsByTagName('tr');
        //on every row, add onclick function (this is what you're looking for)
        for (var i = 0; trs.length > i; i++) {
            trs[i].onclick = new Function("rowOnclick(this)");
        }
    }

    function rowOnclick(tr) {
        var elements = tr.cells[0].childNodes;
        for(var i = 0; elements.length > i; i++) {
            //get the link
            if ((typeof elements[i].id !== "undefined") &amp;&amp;
                (elements[i].id.indexOf("lnkHidden") > -1)) {
                //open a new window/tab using the href generated in link
                window.open(elements[i].href);
                break;
            }
        }
        return false;
    }
</script>

<h:form id="myForm">
    <h1>Show data</h1>
    <h:dataTable id="dataTable" var="data" value="#{datatableBean.lstData}">
        <h:column>
            <f:facet name="header">
                <h:outputText value="ID" />
            </f:facet>
            <h:outputText value="#{data.id}" />
            <!-- define a hidden link for every row of the datatable
                 the value attribute contains the page to redirect. -->
            <h:outputLink id="lnkHidden" value="AnotherPage.xhtml"
                            style="display:none">
                <f:param name="id" value="#{data.id}" />
            </h:outputLink>
        </h:column>
        <h:column>
            <f:facet name="header">
                <h:outputText value="Value" />
            </f:facet>
            <h:outputText value="#{data.value}" />
        </h:column>
    </h:dataTable>
</h:form> 
```

DataTableBean 类

```
@ManagedBean
@ViewScoped
public class DatatableBean {

    private List<Data> lstData;
    /**
    * Creates a new instance of datatableBean
    */
    public DatatableBean() {
        lstData = new ArrayList<Data>();
        lstData.add(new Data(1, "Hello World"));
        lstData.add(new Data(2, "Hello StackOverflow"));
        lstData.add(new Data(3, "Hello Luiggi"));
        System.out.println("LOL");
    }
    //define getters and setters...
} 
```

另一个页面.xhtml

```
<h1>This is another page</h1>
<h:panelGrid columns="2">
    <h:outputText value="Selected ID" />
    <h:outputText value="#{anotherPageBean.id}" />
</h:panelGrid> 
```

另一个PageBean 类

```
@ManagedBean
@RequestScoped
public class AnotherPageBean {

    private int id;
    /**
    * Creates a new instance of AnotherPageBean
    */
    public AnotherPageBean() {
        try {
            this.id = Integer.parseInt((String)FacesContext
               .getCurrentInstance().getExternalContext()
               .getRequestParameterMap().get("id"));
            //by getting the id you can get more data
        }
        catch (Exception e) {
            this.id = 0;
        }
    } 
```

# c# - 关于动态文本框的一般概念

> ID：10374624
> 
> 赞同：2
> 
> 时间：2012-04-29T18:09:45.587
> 
> 标签：c#, asp.net, .net, asp.net-mvc-3

我正在开发一个需要即时构建“页面”的项目。一个页面可以包含各种控件，如文本框、复选框等。目前，当用户想要添加新的文本框时，我会发出 ajax 请求并呈现部分视图并返回 HTML 并将其显示在客户端。这可行，但我也想在用户填写这些动态控件时正确处理数据。在某种程度上，如果我没记错的话，我需要能够制作 HTML 控件数组。现在，如果我们给视图提供静态列表并使用 Html.TextboxFor 生成文本框，我们会看到生成的名称是：

```
[0].FruitName
[1].FruitName
[2].FruitName 
```

在发出 Jquery Ajax 请求时如何处理此索引部分，以便始终获得正确的索引并将其呈现在客户端上。

如果有人有比提出 ajax 请求更好的解决方案，那么也请告诉我。我需要处理 HTML 控件的动态呈现，并在回发到服务器时正确访问它们的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T18:18:14.657

看看[http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)。`Non-Sequential Indices`_ 他还引入了一个辅助方法来生成它。 另外，我认为您可以使用 ajax 调用传递一个索引，然后将其从 Controller 传递到您的局部视图，并使用它来生成正确的索引文本框。

更新：
我在[Submit javascript dynamic added elements to controller method like Stackoverflow上问了一个非常相似的问题](https://stackoverflow.com/q/10158089/337294)

# php - 编写一个自定义的 drupal 模块（但背景是 php）

> ID：10374631
> 
> 赞同：0
> 
> 时间：2012-04-29T18:10:17.037
> 
> 标签：php, drupal

我想要一个选择列表，其中选项从数据库中的列中提取名称列表。为此，我编写了一个函数来提取名称并将它们放入一个数组中。

我正在编写代码，我希望在其中包含有人可以从选项中选择名称的选择列表（如上所述），然后是由该记录的其余信息填充的其余字段。

其余字段是 $body = 'name:' 中的代码。$formname->名称。

我的问题：编码选择列表的正确方法是什么？

例如：在表单页面中，有这样的：

```
$form['user_info']['Type'] = array(
'#type' = 'select',
'#options' => array(
 'type1' => t('Type 1'),
 'type2' => t('Type 2'),
),
); 
```

但是我的页面不是表单，所以我该怎么称呼它？它只是一个人们可以选择名称并查看这些名称详细信息的地方。

蒂亚！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T00:10:41.380

出于各种原因，包括防止 SQL 注入、可扩展性等，强烈建议您将 FAPI 用于 Drupal 生态系统中的任何和所有形式。

您可以使用[drupal_get_form](http://api.drupal.org/api/drupal/includes!form.inc/function/drupal_get_form/7)函数在几乎任何地方使用 php 包含模块定义的表单，并且您可以动态生成选择选项等，方法是向 FAPI 项传递一个可能通过迭代数据库结果生成的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T18:58:36.557

看起来是对的——取决于你想投入多少精力。

无论您是否打算将表单发回，如果您想使用 FormAPI 来构建您的选择/下拉列表，您都需要构建一个表单。

(2) 或者，您可以创建原始 html/php 并显示为块。

(3) 另一种选择是创建一个新的内容-> 基本页面，将文本格式交换为“PHP 代码”并使用 html/php。

# java - 如何检查我的表中是否存在变量？

> ID：10374644
> 
> 赞同：0
> 
> 时间：2012-04-29T18:11:53.230
> 
> 标签：java, mysql, methods, sqlexception

我想浏览表格以找到一些值并将其与输入的值进行比较。

此代码用于验证它是否存在并比较两个值​​​：

```
public  boolean verifer(){
    DataBase s = DataBase.getInstance();
     int numR1 =getnumR();

String req1 ="SELECT  `numR`  FROM  `reference` WHERE  `numR` =  '"+numR1+"' ";

    try {

        Statement m=  s.getConn().createStatement();
        ResultSet r1 = m.executeQuery(req1);

        int numR0 = 0;
        while (r1.next()) {

             numR0 =r1.getInt("numR");
            nbp++;   
        } 
        if(numR1==numR0){
            System.out.println("numR exists! : " +numR0 );
            verif=true;
             } 

        else { 
            System.out.println("numR is not existing ");
            verif=false;
              }

        rs1.close();
        m.close();

      } catch (SQLException e1) {
        e1.printStackTrace();
        System.out.println("error validation numR: "+e1);
        verif=false;

    } 

    return verif;
} 
```

如果它们相等，则通过将变量 maxn 增加 +1 来插入请求。如果不相等，则插入查询 n = 1。

```
public  void remplir_reference(){

    DataBase s = DataBase.getInstance();

    String req3 ;

int numR  = getnumR();
int numA  = getnumA();
int numV  = getnumV();

String type_instal= setType_instal().toString();

String categorie=comboBox_categorie.getSelectedItem().toString();

Calendar calendar =new GregorianCalendar();
calendar.setTime(new Date());
int annee =calendar.get(Calendar.YEAR);

System.out.println(annee);

if(verif==true ){
       int maxn=maXnumR();
       int maxnplus = maxn +1 ;
       System.out.println("existe");
req3 ="INSERT INTO `reference` values ('"+numR+"','"+maxnplus+"','"+cin+"','"+numA+"','"+numV+"','"+type_instal+"','"+categorie+"','"+annee+"')";

            try {

                Statement m=  s.getConn().createStatement();
                m.executeUpdate(req3);

              } catch (SQLException e1) {
                e1.printStackTrace();
                System.out.println("remplir_reference si v=vrai: "+e1);

               }

      }

 if(verif ==false) {
     System.out.println("n'existe pas");

 req3 ="INSERT INTO `reference` values ('"+numR+"',1,'"+cin+"','"+numA+"','"+numV+"','"+type_instal+"','"+categorie+"','"+annee+"')";   
        try {

            Statement m=  s.getConn().createStatement();
            m.executeUpdate(req3);

          } catch (SQLException e1) {
            e1.printStackTrace();
            System.out.println("remplir_reference si v=false: "+e1);

           }
   }

} 
```

一直显示“不存在”，表中值n=1

```
public  int maXnumR(){
    DataBase s = DataBase.getInstance();

    int numR= getnumR();

String req1 = "SELECT MAX('idrf') FROM `reference` WHERE `numR` = '"+numR+"'  ";

try {

    Statement m=  s.getConn().createStatement();
    ResultSet r1 = m.executeQuery(req1);

    while (r1.next()) {

         maxnumR =r1.getInt("idrf");
        nbp++;  
    } 

  } catch (SQLException e1) {
    e1.printStackTrace();
    System.out.println("maXnumR repetetion : "+e1);

} 

return maxnumR;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T18:18:22.763

`''`当 numR 为 int 时，您尝试添加的查询不正确。

从改变

```
String req1 ="SELECT  `numR`  FROM  `reference` WHERE  `numR` =  '"+numR1+"' "; 
```

至

```
String req1 ="SELECT  numR  FROM  `reference` WHERE  numR =  "+numR1+" "; 
```

# python - 为什么“（1/6）*（66.900009-62.852596）”评估为零？

> ID：10374645
> 
> 赞同：3
> 
> 时间：2012-04-29T18:11:55.590
> 
> 标签：python, xcode

在 Objective-C (Xcode) 和 Python (终端) 中都进行了尝试，并且两次`(1/6)*(66.900009-62.852596)`都评估为零。有谁知道这是为什么？不应该是 0.26246 吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-29T18:13:54.287

您正在对 进行整数运算`1/6`，而 的下限`1/6`是`0`。试试`1.0/6`吧。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T18:13:56.830

`1/6`是整数除法，变为0。尝试使用`1.0/6`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-29T22:19:51.603

避免使用整数导入进行意外地板除法，请`from __future__ import division`在模块顶部执行 a：

```
>>> from __future__ import division
>>> (1/6)*(66.900009-62.852596)
0.6745688333333331 
```

[未来模块](http://docs.python.org/library/__future__.html)负责启用将在 Python 3 中默认出现的功能。

# static - 如果使用单个静态库而不是多个静态库构建代码，是否会提高性能？

> ID：10374646
> 
> 赞同：0
> 
> 时间：2012-04-29T18:12:06.057
> 
> 标签：static

是否有可能在同一库中的所有例程的代码中获得更好的性能。

或者，换个说法，当代码的某些部分被移到另一个库中时，代码的性能是否会下降？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T18:18:26.343

问题，您的程序会只运行一次还是会经常运行？

如果是前者，并且我们假设共享库不在内存中，那么是的，静态二进制文件的性能也会略有提高，这也只是几毫秒。

最有可能的是，如果您正在链接 libc 或 msvcrt（在 Windows 上），它们已经在内存中，并且除了拥有一个巨大的二进制文件之外，您并没有节省太多。

让我们考虑后一种情况......我认为性能改进不值得静态构建并拥有巨大的二进制文件。如果您的应用程序使用公共共享库（或 DLL），那么所有这些库都已经加载到内存中。

希望有帮助。

有关其他响应，请参见此处[静态与动态库性能](https://stackoverflow.com/questions/4384752/static-vs-dynamic-library-performance)。

# c++ - 奇怪地重复出现的模板 - 变体

> ID：10374650
> 
> 赞同：8
> 
> 时间：2012-04-29T18:12:36.277
> 
> 标签：c++, templates, crtp

关于[CRP](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern "CRP")，如果我想实现它的轻微变化（使用模板模板参数），我得到一个编译错误：

```
template <template <typename T> class Derived>
class Base
{
public:
    void CallDerived()
    {
        Derived* pT = static_cast<Derived*> (this);
        pT->Action(); // instantiation invocation error here
    }
};

template<typename T>
class Derived: public Base<Derived>
{
public:
    void Action()
    {
    }
}; 
```

我不确定有人会选择这种形式（它不会为我编译）而不是使用它（这行得通）

```
template <typename Derived>
class Base
{
public:
    void CallDerived()
    {
        Derived* pT = static_cast<Derived*> (this);
        pT->Action();
    }
};

template<typename T>
class Derived: public Base<Derived<T>>
{
public:
    void Action()
    {
    }
}; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-29T18:25:49.910

这也应该编译。我们只需要明确指定的其他模板参数

```
 template <typename T, template <typename T> class Derived>
 class Base
 {
 public:
     void CallDerived()
     {
        Derived<T>* pT = static_cast<Derived<T>*> (this);
        pT->Action(); // instantiation invocation error here
     }
 };

template<typename T>
class Derived: public Base<T,Derived>
{
public:
    void Action()
    {
    }
}; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-29T18:19:14.350

在第一个示例中，类模板实际上采用*模板模板参数*，而不仅仅是*模板参数*，如您所写：

```
template <template <typename T> class Derived>
class Base
{
     //..
}; 
```

所以这段代码没有意义：

```
Derived* pT = static_cast<Derived*> (this);
pT->Action(); // instantiation invocation error here 
```

这`Derived`是一个模板模板参数，它需要您没有提供给它的模板参数。实际上，在`CallDerived()`函数中，您无法知道需要提供给它的*类型*，以便执行您打算执行的操作。

第二种方法是正确的解决方案。用它。

# c# - 从 Windows 域上的远程工作站搜索和获取文件信息

> ID：10374651
> 
> 赞同：0
> 
> 时间：2012-04-29T18:12:37.947
> 
> 标签：c#, wmi

我需要查询 Windows 域上远程工作站的文件系统。程序应搜索远程文件系统是否存在特定文件名和文件路径。例如，假设我想查明“c:\program files\mozilla\firefox.exe”或“c:\program files\chrome\chrome.exe”是否存在于 10,000 台机器的域中的任何工作站上。

我知道哪些选项：1）仅使用 WIN32 API 和使用具有管理员共享访问权限的 UNC 路径进行 Windows 模拟的 C# 代码，如 \ServerName\C$\FolderName。（我不确定我们是否需要从域服务器运行应用程序才能获取工作站管理员共享访问）。

2) 将 WMI 与 C# 管理类一起使用，通过域管理员凭据模拟获取远程系统访问权限，然后使用查询获取远程文件信息。

我已经实现了这两种场景，但我不确定哪一个最好并且实时运行良好。我只测试了我可用的 2-3 个系统网络。

我心中有疑问。

1) 哪个选项最适合这种情况？2) 哪一个更快、更安全、更一致？

请向我建议其中之一或任何可满足上述要求的最佳选择。

谢谢你，拉维

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T18:25:39.510

无需从域控制器运行它。使用适当的权限，您可以从任何地方运行 WMI 查询。事实上，将它们推送到 DC 会为查询添加一个跃点，并且可能比直接查询要慢。如果您有该进程的域管理员权限，我只需直接查询 unc 路径以进行文件存在检查，然后就可以完成了。

# 3d - 带有 fftw 库的 3d c2c fft

> ID：10374656
> 
> 赞同：0
> 
> 时间：2012-04-29T18:13:23.733
> 
> 标签：3d, fft, fftw

我正在尝试使用 FFTW 库进行 3D FFT，但我在逆变换方面遇到了一些困难。

首先，我通过以下方式进行前言转换：

```
fftwf_plan_dft_3d(_dimensions[0], _dimensions[1], _dimensions[2], (fftwf_complex*)_inputBuffer, (fftwf_complex*)_outputBuffer, FFTW_FORWARD, FFTW_ESTIMATE); 
```

虽然我的数据是真实数据，但我正在使用复杂到复杂的转换，因为以后想用只支持复杂到复杂转换的 opencl fft 替换它。

在 3D 傅立叶空间中，我做了一个非常简单的低通滤波器：

```
for all x, y, z:

// global position of the current bin
int gid = (y * w + x) + (z * w * h);

// position of the symmetric bin
vec3 conPos(M - x - 1, N - y - 1, L - z - 1);

// global position of the symmetric element
int conGid = (conPos.y * w + conPos.x) + (conPos.z * w * h);

if (sqrt(x * x + y * y + z * z) > 500)
{
    complex[gid].real = 0.0f;
    complex[gid].imag = 0.0f;
    complex[conGid].real = 0.0f;
    complex[conGid].imag = 0.0f;
} 
```

最后进行逆变换：

```
fftwf_plan_dft_3d(_dimensions[0], _dimensions[1], _dimensions[2], (fftwf_complex*)_inputBuffer, (fftwf_complex*)_outputBuffer, FFTW_BACKWARD, FFTW_ESTIMATE);
// normalization ... 
```

结果并不如我所料。在逆变换之后，虚部并不像他们应该的那样全为零。

据我所知，在对真实数据进行正向变换后，只使用了总缓冲区大小的一半，而另一半没有共轭复数值。（请参阅：[c2c with real data](http://www.dspguide.com/ch12/1.htm)）如果是这种情况，我必须在反向转换之前自行计算它们，但我无法在 fftw 文档中找到计算一半的提示，哪些不是。

我编写了一个非常简单的 2D-Test-Case 来查看傅立叶空间中的这种对称性：

```
int w = 4;
int h = 4;
int size  = w * h;

cl_float rawImage[16] = ...; // loading image

fftwf_complex *complexImage = (fftwf_complex*) fftwf_malloc(sizeof(fftwf_complex) * size);
fftwf_complex *freqBuffer = (fftwf_complex*) fftwf_malloc(sizeof(fftwf_complex) * size);

for (int i = 0; i < size; i++)
{
    complexImage[i][0] = rawImage[i]; complexImage[i][1] = 0.0f;
}

fftwf_plan forward = fftwf_plan_dft_2d(w, h, complexImage, freqBuffer, FFTW_FORWARD, FFTW_ESTIMATE);

fftwf_execute(forward);

for (int y = 0; y < h; y++)
{
    for (int x = 0; x < w; x++)
    {
        int gid = y * w + x;
        qDebug() << gid << "real:" << freqBuffer[gid][0] << "imag:" << freqBuffer[gid][1];
    }
} 
```

这给了我以下输出：

```
gid
0    real 3060 imag 0 
1    real 510 imag 510 
2    real 0 imag 0 
3    real 510 imag -510 
4    real 510 imag 510 
5    real 0 imag -510 
6    real 0 imag 0 
7    real -510 imag 0 
8    real 0 imag 0 
9    real 0 imag 0 
10   real 0 imag 0 
11   real 0 imag 0 
12   real 510 imag -510 
13   real -510 imag 0 
14   real 0 imag 0 
15   real 0 imag 510 
```

据我所知，没有对称值。为什么？

如果有人能给我一个提示，那就太好了。

问候

狼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T18:18:00.777

该链接具有误导性。仅实数信号的 DFT（通常）不会导致一半的输出样本为零。它只是对它们施加（共轭）对称性。

因此，在您的过滤器代码中，您只操作了应有的输出值的一半。每次操作输出 bin *n*时，您还需要操作 bin *Nn*（其中*N*是 DFT 的长度），以保持对称性，当您应用逆 DFT 时，这将为您提供仅真实的结果。

我的建议是首先解决一个更简单的问题——一维滤波器。一旦你得到了正确的结果，那么它应该很容易扩展到 3D。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T20:19:33.540

如果您想要在逆 FFT 之后得到严格的实数结果（减去使用有限大小算术的通常数值噪声），您必须确保您提供完整 IFFT 的输入数据是完全共轭对称的（向量的后半部分是前半部分的镜像复共轭）。您似乎没有强迫您的数据如此。

# android - Android 可扩展列表颜色

> ID：10374658
> 
> 赞同：0
> 
> 时间：2012-04-29T18:13:43.167
> 
> 标签：android, android-layout

```
package com.database_demo;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ListActivity;
import android.net.ParseException;
import android.os.Bundle;
import android.widget.ArrayAdapter;
import android.widget.Toast;

public class Database_demo extends ListActivity {

    /** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    String result = null;
    InputStream is = null;
    StringBuilder sb = null;
    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    List<String> r = new ArrayList<String>();

    try{

    //http post
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://10.0.0.4/WWW/test.php");
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    HttpResponse response = httpclient.execute(httppost);
    HttpEntity entity = response.getEntity();
    is = entity.getContent();
    }
    catch(Exception e){
        Toast.makeText(getBaseContext(),e.toString() ,Toast.LENGTH_LONG).show();
   }

    //Convert response to string  
    try
    {
      BufferedReader reader = new BufferedReader(new InputStreamReader(is,"UTF-8"));

      sb = new StringBuilder();

      String line = null;

      while ((line = reader.readLine()) != null) 
      {
         sb.append(line + "\n");
      }

      is.close();

      result = sb.toString();
    }
    catch(Exception e)
    {
        Toast.makeText(getBaseContext(),e.toString() ,Toast.LENGTH_LONG).show();
    }
    //END Convert response to string   
    try{
            JSONArray jArray = new JSONArray(result);
            JSONObject json_data=null;
            for(int i=0;i<jArray.length();i++)
            {
               json_data = jArray.getJSONObject(i);
               r.add("E-mail adres: \n " + json_data.getString("E-mail" ));
               r.add("Wachtwoord: \n" + json_data.getString("Wachtwoord" ));

           }
           setListAdapter(new ArrayAdapter<String>(this,    android.R.layout.simple_expandable_list_item_1, r));
        }
        catch(JSONException e1){
            Toast.makeText(getBaseContext(),e1.toString() ,Toast.LENGTH_LONG).show();
        } catch (ParseException e1) {
            Toast.makeText(getBaseContext(),e1.toString() ,Toast.LENGTH_LONG).show();
    }

  }
 } 
```

我在可扩展列表“r.add("E-mail adres: \n " + json_data.getString("E-mail" )); "和 "r.add("Wachtwoord: \n " + json_data .getString("Wachtwoord" ));。现在我希望 r.add("E-mail adres: \n " + json_data.getString("E-mail" )); 在我的可扩展列表中显示为红色。如何我这样做吗？有什么建议吗？

"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T18:23:33.193

您可以使用`SpannableStringBuilder`代替`StringBuilder`并应用于`TextAppearanceSpan`可扩展字符串的“电子邮件”部分。

# javascript - Phonegap+JavaScript+WP7：ajax.responseText 不起作用

> ID：10374667
> 
> 赞同：1
> 
> 时间：2012-04-29T18:14:39.927
> 
> 标签：javascript, ajax, windows-phone-7, cordova

我正在使用 Cordova 1.6.1 并且 html 代码有问题：

```
<script type="text/javascript">

function onDeviceReady() {
    $.support.cors = true;
    $.mobile.allowCrossDomainPages = true;

    var ajax = new XMLHttpRequest();
    ajax.open("GET","http://mySite.com/response.php",true);
    ajax.send();
    ajax.onreadystatechange=function(){
        if(ajax.readyState==4 && (ajax.status==200)){
            console.log("--Start log to VStudio");
            console.log(ajax.responseText);
            document.getElementById('content').innerHTML = ajax.responseText;
            console.log("--End log to VStudio");
        }
    }
}

document.addEventListener("deviceready",onDeviceReady,false);

</script> 
```

问题是文本“--End log to VStudio”永远不会显示，尽管总是显示文本“--Start log to VStudio”，并且内容没有改变。此 java 脚本在浏览器 (Chrome) 中运行良好，但不适用于 WP7 手机或模拟器。

响应.php：

```
<?php
    echo "My new content";
?> 
```

我已经设置了 .htacces 设置，所以：

```
Header add Access-Control-Allow-Origin "*" 
```

# android - 自定义微调器的项目背景颜色

> ID：10374675
> 
> 赞同：1
> 
> 时间：2012-04-29T18:15:28.973
> 
> 标签：android, android-layout, xamarin.android

我正在制作一个应用程序来计算其色带中的电阻值。在纯编程方面一切正常。目前，为了选择色带，我正在使用一个充满颜色列表的微调器。

我真的想让它看起来更好。我希望能够将微调器中每个项目的背景颜色设置为相应的颜色：

![在此处输入图像描述](../Images/dfdae6d390cd8b84f55f477a249a9a5c.png)

我应该怎么做才能做到这一点？这是我的代码的一部分：

**用于微调器的数组：**

```
 <string-array name="FourBandResistorFullColor">
    <item>Black</item>
    <item>Brown</item>
    <item>Red</item>
    <item>Orange</item>
    <item>Yellow</item>
    <item>Green</item>
    <item>Blue</item>
    <item>Violet</item>
    <item>Gray</item>
    <item>White</item>    
  </string-array> 
```

**方法中的适配器代码`OnCreate`：**

```
 var bandOne = FindViewById<Spinner>(Resource.Id.bandOneColor);
    var bandOneAdapter = ArrayAdapter.CreateFromResource(this, Resource.Array.FourBandResistorFullColor,
                                                         Android.Resource.Layout.SimpleSpinnerItem);
    bandOneAdapter.SetDropDownViewResource(Android.Resource.Layout.SimpleSpinnerDropDownItem);
    bandOne.Adapter = bandOneAdapter;
    bandOne.ItemSelected += BandOne_ItemSelected; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T18:26:00.103

您需要使用自定义适配器。我猜你正在使用 ArrayAdapter？如果是这样，您可以这样做：

```
 private class MyArrayAdapter extends ArrayAdapter<String>{

        public MyArrayAdapter(Context context, int textViewResourceId) {
            super(context, textViewResourceId); 
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View view = super.getView(position, convertView, parent);
            int color = getColorFromName(getItem(position));
            view.setBackgroundColor(color);
            return view;
        }   
    } 
```

请注意，这`getColorFromName`是您需要自己实现的功能。它从 String 映射到 int 颜色值 (ARGB)。例如，红色为 0xffff0000。

# php - Invision电源板空白

> ID：10374676
> 
> 赞同：0
> 
> 时间：2012-04-29T18:15:44.037
> 
> 标签：php, xml, apache, centos, ipb

我在 forum.bettercraft.net 上建立了 IPB 设置（您会注意到它当前设置为离线），这是由托管服务提供商托管的。我将把它移到一个新域以及我的专用服务器上，所以它会在 betterverse.net/forum

（我已经为以前的域停用了它）

但是，当我传输所有内容并将其连接到以前的数据库时，我看到的只是空白 - 你现在可以自己看到了。

IPB 支持说我的文件设置没有什么明显的错误，而且它一定是我的 apache 或 php 的问题；但“系统要求”检查器报告一切都可以接受。

显然，Apache 日志对支持浏览没有任何用处。关于我从哪里开始修复 httpd 和/或 php 的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T18:39:01.803

尝试通过 FTP 管理器将文件权限设置为 755

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-05T09:37:09.477

我遇到过类似的问题。其中一件事是运行 IPS 要求检查器脚本，如果它说一切正常，然后你仍然得到白屏，那么这是与权限相关的问题。

你可以做 CHMOD 755 或者如果你在 VPS 上然后 chown -R apache.apache ips-dir/ 将解决这个问题。

# css - 如何让 div 并排浮动？

> ID：10374677
> 
> 赞同：1
> 
> 时间：2012-04-29T18:15:53.960
> 
> 标签：css, html, css-float

[http://oi49.tinypic.com/2qithg4.jpg](http://oi49.tinypic.com/2qithg4.jpg) *（示例是 jpg img）*

正如您在示例中看到的那样；盒子（浮动后）在它下面有一个空白空间，以便为相等的 div 排腾出空间，但我想将它们全部浮动以填补空白......有什么建议吗？

这就是我想做的*（例如 jpg img）*

[http://oi47.tinypic.com/2nixr2x.jpg](http://oi47.tinypic.com/2nixr2x.jpg)

提前致谢。

编辑// 向 Alex 展示一些代码 :)

**HTML**

```
<div id="content">
<div id="featured"></div>
<div class="box"></div>
<div class="box"></div>
<div style="width:310px; height:18px; margin:0 0 10px; padding:98px 0; text-align:center; float:left; display: block; background: #ffffcc;">Ad Space</div>
<div class="box"></div>
<div class="box"></div>
<div class="box"></div>
</div> 
```

**CSS**

```
#content { }
#featured { width:630px; float:right; height:214px; margin:0 10px 10px 0; }
.box { float:left; width:310px; margin:0 10px 10px 0; height:400px; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T18:53:29.653

之前有人问过类似的问题：[float:left div's 的垂直对齐](https://stackoverflow.com/questions/4445960/vertical-alignment-of-floatleft-divs)，尽管没有提出适当的解决方案。据我猜测，使用纯 CSS 来处理动态内容会很困难，所以我建议使用[jQuery Masonry](http://masonry.desandro.com/)来完成这项任务。

**对于纯 CSS 方法，我想它可以使用[这里](https://stackoverflow.com/questions/1847460/how-can-i-make-a-float-top-with-css)`CSS3 columns`解释的方法来完成。**

# javascript - 无限滚动会导致浏览器崩溃吗？

> ID：10374689
> 
> 赞同：10
> 
> 时间：2012-04-29T18:17:35.463
> 
> 标签：javascript, jquery, browser, crash

我像这样实现了无限滚动：

```
new_page_value = 1;

$(window).scroll(function() {
    if($(window).scrollTop() >= $(document).height() - $(window).height() - 200) {

        new_page_value = parseInt(new_page_value) + 1;

        get_page(new_page_value);

    }
}); 
```

当用户几乎到达页面底部（左 200 像素）时，`get_page()`调用该函数。这包含一个 ajax 调用，它获取新页面的所有内容并将其**附加**到`<body>`文档中。

现在我才意识到，如果我的网站变得很大，而不是只有 10 个小页面，而我有一个巨大的页面，那么如果用户的浏览器足够持久以保持长时间无限滚动，那么用户的浏览器可能会崩溃。

这是否是解决此问题的可能方法：

我将继续将新页面附加到文档中`<body>`，直到第 10 页，之后我将`<body>`完全替换内容而不是附加。所以使用`html()`而不是`append()`.

我只是不知道这是否真的可以防止崩溃。是否会`.html()`清除通过 ajax 引入的先前 html 的“内存”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T19:06:13.313

我真的认为这是许多具有 AJAX 列表内容的网站的常见问题。因此，让我们以一些最流行的（想想规模=经验）网站及其解决方案为例：

### 谷歌图片

如果您查看[images.google.com](http://images.google.com)并搜索任何内容，例如“guiness”，您将看到一个充满结果的页面（实际上图像是 ajax 加载的，而不是 html 代码，因此页面具有固定高度) 当你在底部滚动时有一个按钮`"Show more results"`。这可能是您的问题的解决方案之一，但是是否真的有必要在底部放置一个按钮，例如第 10 页？我真的认为它通常是页面可用性和内存泄漏的一个很好的解决方案，但它确实不是一个必要的选择，正如我们在中看到的：

### Facebook

Facebook Newsfeed 是另一回事。有一个按钮`"Show more posts"`，但我真的不知道它何时显示，而不是加载下一页的帖子。我曾经发生过一次加载 10-15 页的帖子，只能通过滚动。而且你知道 Facebook 帖子包括视频、照片、AJAX 评论和更多的 Javascript 奇特的东西，它们会占用大量内存。我认为经过大量研究，他们已经成功地做到了这一点，有多少用户滚动到底部。

### YouTube

Youtube`"Load more videos"`在每个页面都有，所以解决方案基本上类似于谷歌，除了谷歌呈现页面的整个 html 并且滚动时只加载图像。

### 推特

Twitter 支持无限滚动。是的，他们这样做可能是因为推文有 140 个字符，他们不需要太担心内存。毕竟谁愿意在一页加载时阅读超过 1000 页的推文。所以他们没有按钮，`"load more"`也不需要按钮。

所以有两种解决方案：

1.  使用无限滚动（你应该考虑你加载了多少内容以及它有多丰富）
2.  使用按钮：`"Load More"`

最重要的是，您不应该删除列表中已加载的内容。

现在一切都是 Javascript 并且 Javascript 有[垃圾收集](https://stackoverflow.com/questions/864516/what-is-javascript-garbage-collection)，所以很难卸载 DOM（如果它有 Javascript，而不是纯文本）并设法从 Javascript 中删除垃圾。这意味着您不会从浏览器中释放已卸载内容的全部分配内存。

还要想想你的请求，为什么你需要再次加载一些你已经加载的东西。它需要另一个服务器请求，这意味着另一个数据库请求等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T18:35:56.040

我以前曾与此合作过，以下是我的一些想法：

a) 如果您一次将数据附加到内存页面，那么这不是问题，一些浏览器可能响应不佳，但大多数最新的浏览器将毫无问题地呈现，只要内存上有足够的内存目标机器，您可能会看到附加页面时内存使用量如何增加。为此使用 chrome，因为每个页面都是一个单独的进程，并且它具有内置的任务管理器

b）关于 的使用`html()`，它确实删除了标记，但这样做的代价是高昂的，因为它试图处理特殊条件并且有开销并访问嵌套在您要替换的容器中的所有控件（不确定最后拍），但它有成本。清除 DOM 的一种更简单的方法是使用该`innerHTML`属性并将其设置为空，jquery 会这样做，但它是在`html()`api 的稍后位置。打开api看看方法。使用`innerHTML`

`$("<selector>")[0].innerHTML=""`

作为用户，删除页面对我来说听起来很奇怪，如果我想回到最初的评论怎么办，请不要考虑让它成为无限滚动。我已经尝试过并在提出的错误数量之后放弃了，但我们有一个真正的用例，我不得不在那里放一个按钮，但这不是当用户滚动离开第一页时，这是当用户登陆第三页但现在需要查看上面的结果时。

希望能回答你的问题，顺便说一句，无限滚动是你的朋友使用它，不要过度设计一个可能只会由你的 QA 团队测试的案例。最好把精力花在别的地方。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-29T18:20:18.680

是的，如果我可以在说 5 页后提出一个想法，只需删除第一页并附加新的，而不是删除所有以前的页面。祝你好运 ：）

# cocos2d-iphone - 为 cocos2d 创建自定义 CCAction

> ID：10374691
> 
> 赞同：3
> 
> 时间：2012-04-29T18:17:45.097
> 
> 标签：cocos2d-iphone

在 coco2d 中创建自定义操作的最佳方法是什么？

我想创建一个自定义动作，在我的游戏对象上创建卡通壁球动画。我是否只是子类 CCFiniteTimeAction 类并覆盖更新方法？

任何示例或链接将不胜感激。

此外，在我的自定义操作中，我想使用 CCScale 操作。那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T18:54:52.240

是的，这几乎就是所有的魔法。可以在[http://getsetgames.com/2009/09/23/custom-cocos2d-action-for-animating-an-atlassprites-texturerect/找到一个示例](http://getsetgames.com/2009/09/23/custom-cocos2d-action-for-animating-an-atlassprites-texturerect/)

可以使用 CCScale 动作。我认为如果您导入并使用它，它会工作得很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T19:23:10.883

只需编写一个返回 CCSequence 的自定义方法

就像是：

```
-(CCSequence)squash{
id action1=....//define action
id action2=...2nd action
...
return [CCSequence actions: action1, action2,..., nil];
} 
```

你只要打电话`[mySprite runAction:[self squash]];`

使用此解决方案，您可以完全更改精灵的所有内容（甚至在序列中调用函数（使用 CCCallFunc）

[这](http://cocos2d.org/doc/programming_guide/actions_transformations_and_effects.html)是我用于有关我能做什么的文档的链接（是的..它是用 java 编写的，但在 iphone cocos2d 中有相同的方法）

如果您遇到任何问题..发布您的代码，我会查看它

# java - 如何使用 AWS java sdk 在 AWS 中创建负载均衡器

> ID：10374704
> 
> 赞同：4
> 
> 时间：2012-04-29T18:19:15.280
> 
> 标签：java, amazon-web-services, load-balancing, amazon-elb

作为项目的一部分，我需要在亚马逊 AWS 上创建一个新的负载均衡器。我需要使用 java sdk 来完成

如何使用代码设置负载均衡器？

这是我到目前为止没有成功的尝试。

```
//create load balancer
        CreateLoadBalancerRequest lbRequest = new CreateLoadBalancerRequest();
        lbRequest.setLoadBalancerName("loader");
        List<Listener> listeners = new ArrayList<Listener>(1);
        listeners.add(new Listener("HTTP", 80, 80));
        lbRequest.withAvailabilityZones(availabilityZone1,availabilityZone2);
        lbRequest.setListeners(listeners);

        CreateLoadBalancerResult lbResult=new CreateLoadBalancerResult();
        System.out.println("created load balancer loader"); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-30T14:43:22.630

很好，我明白了：

首先创建一个elb客户端

```
AmazonElasticLoadBalancingClient elb = new AmazonElasticLoadBalancingClient(credentials); 
```

然后

用它来发起请求

```
 //create load balancer
        CreateLoadBalancerRequest lbRequest = new CreateLoadBalancerRequest();
        lbRequest.setLoadBalancerName("loader");
        List<Listener> listeners = new ArrayList<Listener>(1);
        listeners.add(new Listener("HTTP", 80, 80));
        lbRequest.withAvailabilityZones(availabilityZone1,availabilityZone2);
        lbRequest.setListeners(listeners);

        CreateLoadBalancerResult lbResult=elb.createLoadBalancer(lbRequest);
        System.out.println("created load balancer loader"); 
```

然后将您的实例注册到负载均衡器

```
//get the running instances
        DescribeInstancesResult describeInstancesRequest = ec2.describeInstances();
        List<Reservation> reservations = describeInstancesRequest.getReservations();
        List<Instance> instances = new ArrayList<Instance>();

        for (Reservation reservation : reservations) {
            instances.addAll(reservation.getInstances());
        }

        //get instance id's
        String id;
        List instanceId=new ArrayList();
        List instanceIdString=new ArrayList();
        Iterator<Instance> iterator=instances.iterator();
        while (iterator.hasNext())
        {
            id=iterator.next().getInstanceId();
            instanceId.add(new com.amazonaws.services.elasticloadbalancing.model.Instance(id));
            instanceIdString.add(id);
        }

        //register the instances to the balancer
        RegisterInstancesWithLoadBalancerRequest register =new RegisterInstancesWithLoadBalancerRequest();
        register.setLoadBalancerName("loader");
        register.setInstances((Collection)instanceId);
        RegisterInstancesWithLoadBalancerResult registerWithLoadBalancerResult= elb.registerInstancesWithLoadBalancer(register); 
```

你完成了......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-08T19:24:20.740

V2代码——

```
package com.example.loadbalance;

import software.amazon.awssdk.regions.Region;
import software.amazon.awssdk.services.elasticloadbalancing.ElasticLoadBalancingClient;
import software.amazon.awssdk.services.elasticloadbalancing.model.CreateLoadBalancerRequest;
import software.amazon.awssdk.services.elasticloadbalancing.model.ElasticLoadBalancingException;
import software.amazon.awssdk.services.elasticloadbalancing.model.CreateLoadBalancerResponse;
import software.amazon.awssdk.services.elasticloadbalancing.model.Listener;

import java.util.ArrayList;
import java.util.List;

public class CreateLoadBalancer {

    public static void main(String[] args) {

        Region region = Region.US_WEST_2;
        ElasticLoadBalancingClient loadClient = ElasticLoadBalancingClient.builder()
                .region(region)
                .build();

        try {

            Listener listener = Listener.builder()
                .protocol("HTTP")
                .instancePort(80)
                .loadBalancerPort(80)
                .build();

            List<Listener> listeners = new ArrayList<>();
            listeners.add(listener);

            List<String> avZone = new ArrayList<String>();
            avZone.add("us-west-2a");
            avZone.add("us-west-2b");

            //Define security groups
            List<String> secGroups = new ArrayList<String>();
            secGroups.add("sg-7aba5827");

        CreateLoadBalancerRequest loadBalancerRequest = CreateLoadBalancerRequest.builder()
                .availabilityZones(avZone)
                .securityGroups(secGroups)
                .loadBalancerName("LoadB44")
                 .listeners(listeners)
                .scheme("internet-facing")
                .build();

            CreateLoadBalancerResponse response = loadClient.createLoadBalancer(loadBalancerRequest);
            System.out.println("The DNS Name is "+response.dnsName());

    } catch (ElasticLoadBalancingException e) {
        System.err.println(e.awsErrorDetails().errorMessage());
        System.exit(1);
    }

    }
} 
```

# linux - Linux 脚本：传递参数

> ID：10374706
> 
> 赞同：0
> 
> 时间：2012-04-29T18:19:50.013
> 
> 标签：linux, scripting, awk

我是脚本新手，需要很多帮助来了解如何加载将由参数传入的文本文件。恐怕您将不得不真正愚蠢地回答。请像我10岁一样解释！

例如，如何编写一个接受两个参数的脚本，一个文件路径和一个整数。

另外你如何运行脚本？你能打电话吗`script.sh -f data.txt`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T18:27:00.250

你能详细解释一下你的要求吗？

我假设您正在寻找从给定文件中提取第 N 列。您不需要在 AWK 中解析命令行参数，而只需从其`sh(1)`自身传递它们。

```
# foo.sh
awk "{ print $"$1" }" $2 
```

在这里，我逃离 AWK 以获取第一个参数，即位置编号。如果你觉得这太混乱了，你可以操纵`ARGC`, `ARGV`. 阅读`awk(1)`。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T18:24:59.573

您可以通过操作[`ARGC`并`ARGV`](http://www.gnu.org/software/gawk/manual/html_node/ARGC-and-ARGV.html)从块中的参数列表中提取整数来做到这一点`BEGIN`。您可以将脚本放在第一行的文本文件中`#!/usr/bin/awk -f`，然后使用`chmod a+x`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T01:33:30.213

GNU AWK ( ) 手册的[这一页](http://www.gnu.org/software/gawk/manual/html_node/Getopt-Function.html#Getopt-Function)`gawk`描述了如何处理选项`getopt`。

在脚本中包含该页面上显示的函数。

# python - QApplication（PySide）Django应用程序退出问题

> ID：10374715
> 
> 赞同：2
> 
> 时间：2012-04-29T18:21:19.217
> 
> 标签：python, django, qt, pyqt, pyside

我有一个 Django 应用程序，用户可以在其中在整个 webapp 的各个位置创建报告。作为一个漂亮的功能，我想为这些报告创建一个“以 PDF 格式发送”功能，而且我快到了。

我所做的是，在通过 Django 作为 HttpResponse 返回报告之前，我通过一个小的 PySide/QT 片段（如下所示）发送原始 HTML 内容。

问题是我无法让 QApplication 退出。

我已经尝试过标准`QCoreApplication.exit()`但没有运气。如果我尝试在第一个报告之后立即转换新报告，控制台会显示“QApplication 实例已存在”。

我在 OS X 10.7.3（用于测试）上使用 Django 1.2.5、Python 2.7、QT 4.8 和 PySide 1.1。

代码：

```
def makepdf(response,filename):
    try:
        app = QApplication(sys.argv)
    except:
        app = QCoreApplication.instance()
    web = QWebView()

    stylelink = "%s%s" % (media_root,'images/css/reportGenerator.css') 

    web.settings().setUserStyleSheetUrl(QUrl.fromLocalFile(stylelink))
    web.setHtml(response)

    printer = QPrinter()
    printer.setPageSize(QPrinter.A4)
    printer.setOutputFormat(QPrinter.PdfFormat)
    printer.setOutputFileName(filename)

    def convertToPdf():
        web.print_(printer)
        #webresponse = web.close()        
        #QObject.disconnect()
        #print QCoreApplication.instance().children()[0].interrupt()
        #qthread = QCoreApplication.instance().thread()#.cleanup()
        #qthread.exit()
        QCoreApplication.exit()
    QObject.connect(web, SIGNAL("loadFinished(bool)"), convertToPdf()) 
```

代码注释：

目前我已经制作了一个`try`/`except`子句，以便能够通过使用当前的 QApplication 实例来保持代码运行（以避免“实例存在错误”），但这似乎不对？我的意思是，在我的 Apache 服务器期间运行 QAppliation（在生产中就是这种情况）似乎有点不对劲。PDF转换完成后不是应该可以退出吗？

除了`QCoreApplication.exit()`我尝试使用的`sys.exit(app.exec_())`方法之外，正如在示例和片段中经常看到的那样。然而，这只会导致错误并使 Python 崩溃，并且代码可以在没有这个的情况下完美运行。（它会创建 PDF，但不会退出）。

注释掉的所有行都是我之前为退出 QApplication 所做的尝试。

简而言之：我不知道它是什么，但它就是不会退出。谁能建议为什么？

**更新：**在最新答案之后，我编辑了代码以响应输入。这是最后一部分现在的样子：

```
def convertToPdf():
    web.print_(printer)
    app.exit()
web.loadFinished.connect(convertToPdf)
app.exec_() 
```

但是，我仍然收到错误消息：

> 2012-04-30 00:16:10.791 Python[21241:1803] *** +[NSUndoManager _endTopLevelGroupings] 中的断言失败，/SourceCache/Foundation/Foundation-833.24/Misc.subproj/NSUndoManager.m:324
> Qt 已捕获抛出异常从事件处理程序。Qt 不支持从事件处理程序中抛出异常。您必须重新实现 QApplication::notify() 并在那里捕获所有异常。

此错误仅在我实施时发生`app.exec_()`。然而，没有`app.exec_()`它只是正常的问题，没有退出。

有任何想法吗？

**更新 2：**这是最新的代码，根据 matas 最新建议修复：

```
app = QApplication(sys.argv)
web = QWebView()
printer = QPrinter()
printer.setPageSize(QPrinter.A4)
printer.setOutputFormat(QPrinter.PdfFormat)
printer.setOutputFileName(filename)
def convertToPdf():
    web.print_(printer)
    app.exit()
web.loadFinished.connect(convertToPdf)
web.setHtml(response) 
```

但是，我仍然有同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T19:31:21.917

我能说的是：

```
QObject.connect(web, SIGNAL("loadFinished(bool)"), convertToPdf()) 
```

这里你**调用** `convertToPdf()`，如果你想连接信号，省略括号！

您还可以使用更清晰的语法：

```
web.loadFinished.connect(convertToPdf) 
```

您可能还想向 convertToPdf 添加一个参数，因为它是用一个布尔值调用的，表示加载是否成功。

并且使用`app.exit()`应该足够了。

哦，当你使用 Gui-Components 时，你需要使用`QApplication`. A`QCoreApplication`不会做！

*编辑：*连接信号`web.setHtml` **后**打电话很重要`loadFinished`！否则如果加载已经完成，你的函数将永远不会被执行！

*编辑*：这对我来说没有任何问题：

```
#!/usr/bin/env python
from PySide.QtGui import *
from PySide.QtWebKit import *
import sys
from subprocess import Popen, PIPE

def createPdf(html, filename):
    app = QApplication(sys.argv)
    web = QWebView()
    printer = QPrinter()
    printer.setPageSize(QPrinter.A4)
    printer.setOutputFormat(QPrinter.PdfFormat)
    printer.setOutputFileName(filename)
    def convertToPdf():
        web.print_(printer)
        app.exit()
        app.deleteLater()
    web.loadFinished.connect(convertToPdf)
    web.setHtml(html)
    app.processEvents()

def createPdfInSubprocess(html, filename):
       p = Popen(["python", __file__, filename], 
                stdin=PIPE, stdout=PIPE, stderr=PIPE)
       out, err = p.communicate(html)
       return (p.returncode, out, err)

if __name__ == '__main__':
    if len(sys.argv) > 1:
        # read html from stdin, filename from cmdline
        html = "\n".join(sys.stdin.readlines())
        createPdf(html, sys.argv[1])
        # print("done")
    else:
        # test if it's working
        ret = createPdfInSubprocess(
                "<html><h1>test</h1>it's working...</html>", "test.pdf")
        print(ret) 
```

`app.exit()`即使没有对, `app.deleteLater()`,的所有调用`app.processEvents()`，它仍然有效......但拥有它不会有什么坏处。

更重要的一件事：必须从主线程创建 QApplications！因此，如果它在 django 应用程序中运行，它可能无法正常工作，这就是我添加子进程内容的原因......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T19:32:52.667

PySide 被设计成在一个进程中只有一个 QCoreApplication 实例。我能找到的对此（可能是未记录的事实）的最佳参考是[http://bugs.pyside.org/show_bug.cgi?id=855](http://bugs.pyside.org/show_bug.cgi?id=855)。

Basically, there may be dangling references to the qapplication that prevent it from being reaped by the garbage collector, so even if you tell the application to exit *and* you delete your reference, there may still be other references lying around.

# jquery - 如何在 Coldfusion 的用户触发器上只调用一次 cf 函数？

> ID：10374718
> 
> 赞同：1
> 
> 时间：2012-04-29T18:21:31.893
> 
> 标签：jquery, events, coldfusion, coldfusion-8, cffunction

我在 Coldfusion8 中有一个组件，它构造错误消息日志并将其传递给 JSON 中的一个变量，以供 Jquery 获取。

当用户更改语言（重新加载页面）时，我正在重建这个组件，如下所示：

**HTML：**

```
<a href="index.cfm?lang=EN">change to english</a> 
```

在重新加载中，我正在检查*lang*，如果指定，我在 Coldfusion 中运行它：

```
<cfif isdefined("lang")>
   <cfset Session.lang= #lang#>

   <!--- rebuild error messages --->
   <cfinvoke component="services.errorMsg"
          method="createErrMsgsLog"         
          returnvariable="errMsgs">         
   </cfinvoke>
   <cfoutput><script type="text/javascript">var errorLog = '<cfoutput>#errMsgs#</cfoutput>';</script></cfoutput>
</cfif> 
```

**问题**1：有没有更好的方法来做到这一点？从我的小 Coldfusion exp 中，CFINVOKE 创建和丢弃对象，所以这应该是*资源友好的*。

**问题2**：
应用程序/会话启动时如何运行它？我尝试从我的 application.cfc *onSessionStart*运行它，但我无法从那里触发任何 Javascript 警报/控制台，所以我担心什么都不会发生......而且必须有比使用这样的功能涂抹 application.cfc 更好的方法。

感谢您的一些见解！

**编辑**：
中途：我可以在更改语言时触发它：

```
 <cfif isdefined("Sprachwechsel")>
   <cfset Session.Sprache = #Sprachwechsel#>
     <cfinvoke component="services.errorMsg" method="createErrMsgsLog"       returnvariable="Session.errMsgs">
     </cfinvoke>
     <cfoutput>
       <script type="text/javascript">var errorLog = '<cfoutput>#Session.errMsgs#</cfoutput>'</script>
     </cfoutput> 
```

但是，我也想从 application.cfc 触发一次。我可以使用相同的代码或下面的代码。没发生什么事。

```
 <cffunction name="onApplicationStart" returnType="boolean" output="false">
   <cfscript> 
      APPLICATION.strObjs = structNew();
      APPLICATION.strObjs.objErrMsg = createObject("component","services.errorMsg");    
   </cfscript>                  
   <cfreturn true />
 </cffunction>

 <cffunction name="onSessionStart" returnType="void" output="false">
    <cfscript>
    Session.sprache = "DE";
    Session.errMsgs = APPLICATION.strObjs.objErrMsg.createErrMsgsLog();
    </cfscript>
    <cfreturn true />
 </cffunction> 
```

我已经尝试了无数种变体，但是如果我在实际页面上检查**Session.errMsgs ，它只会保持未定义状态。**知道我错过了什么吗？

**EDIT2：**
好的。我发现问题在[这里](http://old.nabble.com/Problem-with-onSessionStart-td17494651.html)阅读。当我更改我的应用程序名称时，我看到什么不起作用，修复此问题后，onSessionStart 按预期触发。很赶...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T18:52:00.127

可能有更好的方法，但是从您发布的代码中很难判断哪种方法最适合您的特定情况。我假设您的代码示例在您的 index.cfm 中？

以下是您可能会做的事情：

1）在 Application.cfc 的 onApplicationStart() 方法中缓存您的组件：

```
application.objErrMsh = createobject("component", "services.errorMsg"); 
```

2) 在 Application.cfc 中的 onSessionStart() 中，将 session.lang 设置为默认语言并设置 session.errMsg var：

```
session.lang = "DE";
session.errMsg = application.objErrMsg.createErrMsgsLog(session.lang); 
```

（我在这里假设您的组件的返回取决于用户的语言设置。如果不是 - 在语言更改时重新调用组件有什么意义？）

3) 每当您需要设置 javascript errorLog var 时，您现在可以执行以下操作：

```
<script type="text/javascript">var errorLog = <cfoutput>#session.errMsg#</cfoutput>;</script> 
```

4）当用户点击您的“更改语言”链接时，运行以下代码：

```
<cfparam name="url.lang" type="string" default="DE">
<cfif url.lang neq session.lang>
  <cflock scope="session" type="exclusive">
  <cfset session.lang = url.lang>
  <cfset session.errMsg = application.objErrMsg.createErrMsgsLog(session.lang)>
  </cflock>
</cfif> 
```

即上面的代码将在您的 index.cfm 页面的顶部。您还需要**为 url.lang 值添加一些验证**（例如，它在接受值的列表中），这样您就不会在那里遇到各种垃圾 -**始终清理所有用户提供的值**。

hth

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T18:52:42.587

我对问题 1 无能为力，但也许对问题 2 有帮助。

您应该能够将您的代码放在某个 CFC 中，并从 Application.cfc 运行它（请确保文件名以大写 A 开头），onRequestStart 方法。

# javascript - 节点服务器和 WS 服务器并排运行？

> ID：10374720
> 
> 赞同：0
> 
> 时间：2012-04-29T18:21:42.470
> 
> 标签：javascript, node.js, websocket

我对 Node.js 真的很陌生，并且一直在想一些事情。我正在尝试构建一个简单的聊天室应用程序，以自学这一切是如何工作的。

我看到它的工作方式是我有一个 Node http 服务器，它为我的网站页面（主页、登录、聊天屏幕等）提供服务，然后我有一个 WS 服务器，它接受短消息中继给所有连接的用户。

问题是我无法确定这是否是解决此问题的正确方法。是否可以在 Node 服务器上对用户进行身份验证，并知道他们已经在 WS 服务器上进行了身份验证？他们可以分享某种会话吗？

需要任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T18:52:17.657

你没有提到你用来实现 WebSocket 服务器的东西，所以我假设你正在使用[socket.io](http://socket.io)。（如果你不是，你应该。）

您可以使用[socket.io 握手过程](https://github.com/LearnBoost/socket.io/wiki/Authorizing)来访问 HTTP 会话状态。

如果您使用[Express](http://expressjs.com)（再次强烈推荐），[很容易将两者结合在一起](http://www.danielbaulig.de/socket-ioexpress/)。

# c - 为什么不显示过多的立方体或球体？

> ID：10374721
> 
> 赞同：0
> 
> 时间：2012-04-29T18:21:45.093
> 
> 标签：c, opengl

```
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
//glBegin(GL_TRIANGLES);
//  glVertex3f(-0.5,-0.5,0.0);
//  glVertex3f(0.5,0.0,0.0);
//  glVertex3f(0.0,0.5,0.0);
//glEnd();

glutSolidSphere(200,10,10);

glutSwapBuffers(); 
```

三角形出现了，但没有球体，为什么？我只是得到一个黑色的窗口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T18:24:22.637

您的半径可能太大，您正在剔除背面。

```
glutSolidSphere(1,10,10); 
```

Glut 是封闭源代码且未维护的。考虑其他东西，例如 SDL。

# macos - .gdbinit 没有被 mac osx lion 上的 gdb 读取

> ID：10374722
> 
> 赞同：0
> 
> 时间：2012-04-29T18:21:59.277
> 
> 标签：macos, configuration, gdb

我的主目录中有一个 .gdbinit 文件（我知道这一点是因为我在 finder 中有隐藏文件可见）。

但由于某种原因，它没有阅读它。好吧，它没有显示任何用户定义的命令。gdb 有什么理由忽略这个文件？我有办法解决它吗？

如果有帮助，我在 osx lion

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:15:57.987

问题是格式错误的配置。一个有效的解决了这个问题

# xcode - 我可以在我的 Xcode 项目中摆脱 SVN 吗？

> ID：10374729
> 
> 赞同：-1
> 
> 时间：2012-04-29T18:22:44.720
> 
> 标签：xcode, svn

我的 Xcode 项目中存在颠覆问题，因此我想摆脱它并保留所有文件的本地副本。我怎样才能做到这一点？

（我一直在考虑删除所有 .svn 目录，但我想我也必须告诉 Xcode 跳过 svn）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T18:39:25.447

首先，我对你的问题感到困惑。您想摆脱您的存储库，或者您只想摆脱 xcode 项目的颠覆。

1 -**好吧，您可以从您的 xcode 项目中显示/隐藏存储库，或者您可以从管理器窗口的窗格中删除存储库**

![在此处输入图像描述](../Images/a1d35f0748e79262e5a68e1fa7fb778e.png)

2 -

> **svn delete --keep-local the_file**

# sockets - Google Goggles 和 Layar 使用什么应用层协议？

> ID：10374730
> 
> 赞同：0
> 
> 时间：2012-04-29T18:22:52.850
> 
> 标签：sockets, video, streaming, layar, google-goggles

这些应用程序将视频从客户端应用程序流式传输到它们自己的服务器。我有兴趣知道他们使用什么类型的协议？我正计划构建一个类似的应用程序，但我不知道如何处理视频流。将流传输到服务器后，我将使用 OpenCV 进行一些处理并将结果返回给客户端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T06:48:20.577

我建议您只发送最少的数据并尽可能在客户端上进行处理。由于发送整个视频流是对流量的巨大浪费（我认为不能实时完成）

我会使用 TCP 连接将中间结果发送到服务器，服务器可以进一步处理。该通信的设计取决于您发送的内容以及您想用它做什么。

例如，您可以将其包装在 xml 中，或序列化对象等。

# java - 在 Android XML 中对齐文本视图和进度条

> ID：10374733
> 
> 赞同：0
> 
> 时间：2012-04-29T18:23:30.910
> 
> 标签：java, android, xml

我已经尝试将 smallprogressbar 与 textview 对齐，将它们放入线性布局，但它不起作用。试过了，`android:layout_gravity="left"`但它崩溃了。

![在此处输入图像描述](../Images/7c4f87773742bfa7de7fe75cfa22ba8e.png)

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="10dp"
        android:text="@string/calibration_1"
        android:textColor="#33b5e5"
        android:textSize="16dp"
        android:textStyle="bold" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <TextView
            android:id="@+id/tvNumberWaves"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dp"
            android:text="@string/calibration_2"
            android:textColor="#FFFFFF"
            android:textSize="18dp" />

        <ProgressBar
            android:id="@+id/progressBar1"
            style="?android:attr/progressBarStyleSmall"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <TextView
            android:id="@+id/tvIntervalWaves"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dp"
            android:text="@string/calibration_3"
            android:textColor="#FFFFFF"
            android:textSize="18dp" />

        <ProgressBar
            android:id="@+id/progressBar2"
            style="?android:attr/progressBarStyleSmall"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
    </LinearLayout>

    <Button
        android:id="@+id/bSetValues"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="10dp"
        android:text="@string/calibration_5" />

    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_margin="10dp"
            android:text="@string/calibration_6" />
    </ScrollView>

</LinearLayout> 
```

代码已更新以匹配您的答案。我放了整个代码来展示我所拥有的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T18:28:17.420

更改此行：

```
android:orientation="vertical" 
```

对此：

```
android:orientation="horizontal" 
```

没有看到你的源代码的其余部分，我不知道这是否会弄乱你布局的其他部分，所以你可能想要将`TextView`and包装`ProgressBar`在他们自己的`LinearLayout`.

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="10dp"
        android:text="@string/calibration_1"
        android:textColor="#33b5e5"
        android:textSize="16dp"
        android:textStyle="bold" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/tvNumberWaves"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dp"
            android:text="@string/calibration_2"
            android:textColor="#FFFFFF"
            android:textSize="18dp" />

        <ProgressBar
            android:id="@+id/progressBar1"
            style="?android:attr/progressBarStyleSmall"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/tvIntervalWaves"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dp"
            android:text="@string/calibration_3"
            android:textColor="#FFFFFF"
            android:textSize="18dp" />

        <ProgressBar
            android:id="@+id/progressBar2"
            style="?android:attr/progressBarStyleSmall"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
    </LinearLayout>

    <Button
        android:id="@+id/bSetValues"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="10dp"
        android:text="@string/calibration_5" />

    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_margin="10dp"
            android:text="@string/calibration_6" />
    </ScrollView>

</LinearLayout> 
```

# android - Android 上的 Lucene 和 ORMLite

> ID：10374735
> 
> 赞同：0
> 
> 时间：2012-04-29T18:23:33.413
> 
> 标签：android, lucene, ormlite, hibernate-search

我想知道如何在 Android 上将 ORMLite 与 Lucene 一起使用（任何示例）。现在我在 PC 上使用 Hibernate Search 和 Lucene，但是 Hibernate Search 对于 Android 来说太重了，我认为 ORMLite 更适合...

谢谢。

# ios - 与设备方向相关的异常 NSInternalInconsistencyException

> ID：10374736
> 
> 赞同：0
> 
> 时间：2012-04-29T18:23:56.950
> 
> 标签：ios, ipad, exception, orientation

我正在使用的 iPad 应用程序出现异常错误：

```
Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason:     '+entityForName: could not locate an NSManagedObjectModel for entity name 'Card''
*** First throw call stack:
(0x35ef988f 0x31872259 0x37aee7e5 0x8aadd 0x30a35e33 0x30a42391 0x30a42201 0x30a420e7    0x30a41969 0x30a416ab 0x30a4156b 0x30a000bd 0x35e581fb 0x37349aa5 0x373496bd 0x373495c9 0x30b7ea73 0x30ae0b1f 0x30b7212b 0x30b720bb 0x30a40ba9 0x30bb8927 0x34c6e2e9 0x34c6de23 0x30bbeae9 0x34c47f09 0x35e587d3 0x35e59461 0x30c741af 0x30c7594d 0x30bab509 0x30a34893 0x30a2e8d7 0x309fcc6b 0x309fc70f 0x309fc0e3 0x35bcf22b 0x35ecd523 0x35ecd4c5 0x35ecc313 0x35e4f4a5 0x35e4f36d 0x30a2da13 0x30a2ae7d 0x83631 0x835f0) 
```

仅当我从以下位置更改视图控制器 shouldAutorotateToInterfaceOrientation 时才会发生这种情况：

```
return YES; 
```

至：

```
if (interfaceOrientation==UIInterfaceOrientationLandscapeLeft || interfaceOrientation==UIInterfaceOrientationLandscapeRight)
    return YES;

return NO; 
```

为什么这会导致 NSInternalInconsistencyException？我在调试时确实注意到，shouldAutorotateToInterfaceOrientation 被同一个函数调用了大约 20 次：[UIViewController _isSupportedInterfaceOrientation:]。这不是递归完成的。

我的应用程序只有横向（左）和横向（右）在支持的方向和横向（左）作为初始方向

提前致谢。

# html - 由于滚动条向右，水平菜单栏向左移动了一点

> ID：10374748
> 
> 赞同：1
> 
> 时间：2012-04-29T18:24:59.730
> 
> 标签：html, css

我正在开发这个管理数据库的 Web 应用程序。每次我去这个有一个大列表的特定页面时，垂直滚动条都会出现在浏览器的右侧。

然而，这使我的整个页面向一侧移动了一点。如果您查看页面顶部的水平菜单栏，则最明显。

有没有办法克服这个？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T18:29:13.423

您可以通过将以下内容应用于您的身体来启用滚动条始终显示：`overflow-y:scroll;`

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2014-04-10T15:51:04.997

```
body
{
    background:#DDDDDD;
    overflow-y:scroll;
} 
```

# ruby-on-rails - simple_form 和引导验证不起作用

> ID：10374749
> 
> 赞同：2
> 
> 时间：2012-04-29T18:25:21.990
> 
> 标签：ruby-on-rails, twitter-bootstrap, omniauth, simple-form

我想设置一个“创建帐户”页面。我使用的宝石是：

*   导轨 (3.2.3)
*   simple_form (2.0.1)
*   全能身份
*   twitter-bootstrap-rails (2.0.6)
*   mongoid (2.2.3)

表格如下所示：

```
= simple_form_for @identity, :url => '/auth/identity/register', :html => { :class =>    'form-horizontal' } do |f| 
  = f.input :name, :input_html => {:name => 'name'}
  = f.input :email, :input_html => {:name => 'email'}
  = f.input :password, :as => 'password', :input_html => {:name => 'password'} 
  = f.input :password_confirmation, :label => "Confirm Password", :as => 'password', :input_html => {:name => 'password_confirmation'} 
  .form-actions
    = f.button :submit, 'Sign Up', class: 'btn-primary'
    = link_to 'Cancel', root_path,  class: 'btn-danger' 
```

对应的身份模型是

```
class Identity
  include Mongoid::Document
  include OmniAuth::Identity::Models::Mongoid
  field :name, :type => String
  field :email, :type => String
  field :password_digest, :type => String

  validates_presence_of :name, :email
  validates_uniqueness_of :email
  validates_format_of :email, :with => /^[-a-z0-9_+\.]+\@([-a-z0-9]+\.)+[a-z0-9]{2,4}$/i
end 
```

如果我没有填写表单的任何文本字段，然后单击“注册”，则表单不会显示来自验证器的任何错误消息，而是将我重定向到主页！

我是否遗漏了一些明显的东西，或者这可能是我使用的 gem 版本的问题？我当然可以使用 twitter-bootstrap 标记在没有 simple_form 的情况下实现相同的表单，但我更喜欢这种方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:22:36.273

我处于类似的情况，simple_form 确实验证了另一个模型中的字段，但不在用户模型中。

无论如何，我注意到您没有：

```
validates_presence_of :password 
```

在你的模型中。也许 mongoid 可以使您免于执行该步骤？我不知道 mongoid，但对我来说，这就是验证该字段不是空白的魔力。对于为我工作的领域，我有这个：

```
validates_presence_of :title, :localeLanguage, :message => "can't be blank" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T10:57:51.810

我遇到了这个问题，我通过将它包含在我所有的简单表单中来修复它，然后我发现它可以正确呈现：

```
<%= f.error_notification %> 
```

# java - 如何将某些内容打印到输出文件？

> ID：10374751
> 
> 赞同：0
> 
> 时间：2012-04-29T18:25:27.730
> 
> 标签：java, file, input

具体来说，我已经设法创建（也许）一个程序，该程序读取文件并在每个段落的开头放置一个缩进。问题是，在我将字符计数器打印到输出文件之前，现在我完全没有打印到输出文件。然而，Java 表示它是从外部来源修改的。我曾经能够在我的 JGrasp IDE 中查看文件更改。有什么明显的我忽略了吗？

这是代码......以防万一它是我的代码：

```
public class ReadFile
{
static Scanner inFile;
static PrintWriter outFile;

public static void main(String[] args) throws IOException
{
  String inputString;
  final String indent = "     ";
  inFile = new Scanner(new FileReader("History.d1"));
  outFile = new PrintWriter(new FileWriter("History.d2"));
  inputString = indent + inFile.nextLine();
  outFile.println(inputString);

  while (inFile.hasNextLine())
  {
    inputString = inFile.nextLine();
  }

  if (inputString.length() < 1) 
  {
    outFile.print("/n");
  }
  else if (inputString.length() > 0)
  {
    inputString = indent + inputString;
  }
  outFile.println(inputString);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T19:14:33.777

每当您从外部修改已在 IDE* 中打开的文件时，系统都会要求您重新加载该文件。在 Eclipse 中，这可以通过按 F5 按钮来完成。这将使用所做的更改刷新文件显示。

如果刷新文件后显示正确的信息，您没有在问题中说明。我认为您遇到的问题是您将控制台视图中文本的实时显示与文件显示视图混淆了。

如果您将输出打印操作从 `System.out.println`statement 更改为`outFile.println`，这意味着输出将发送到指定的文件，而不是控制台。如果要验证输出是否确实正在打印，可以在语句`System.out.println(inputString)`之前或之后包含。`outFile.println(inputString)`

此外，正如 mazaneicha 建议的那样，最好在完成时执行该方法`close()`。尽管 Java 垃圾收集会自动关闭这些连接，但养成这个习惯仍然是一个好主意。 `inFile``outFile`

*适用于 Eclipse 和 Netbeans

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T19:15:16.350

您至少需要刷新编写器，在最后添加：

```
outFile.flush(); 
```

还记得在完成后关闭流：

```
outFile.close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T19:19:25.293

This segment of code will make the inFile reader read all the way to the end of the file, bypassing the if/else code block. I don't think you meant to have just this one line in the while loop.

```
 while (inFile.hasNextLine())
 {
     inputString = inFile.nextLine();
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T19:46:35.273

换行符是“\n”，而不是“/n”。这里有一些代码可以做你想做的事：

```
try(BufferedReader inFile = new BufferedReader(new FileReader("History.d1")); BufferedWriter outFile = new BufferedWriter(new FileWriter("History.d2"))){   
    String inputString;
    final String indent = "     ";

    while ((inputString=inFile.readLine())!=null)
    {   

        if (inputString.length() < 1)   
        {
            outFile.write("\n");
        }
        else if (inputString.length() > 0)
        {
            inputString = indent + inputString;
            outFile.write(inputString);
        }

    }   
} 
```

# c++ - C++/构建项目出错

> ID：10374753
> 
> 赞同：-1
> 
> 时间：2012-04-29T18:25:44.737
> 
> 标签：c++

我在 Visual Studio 2010 中有以下 c++ 文件：

```
stdafx.h

// stdafx.h : include file for standard system include files,
// or project specific include files that are used frequently, but
// are changed infrequently
//
#pragma once

#include "targetver.h"

#include <stdio.h>
#include <tchar.h>

void printHello();
// TODO: reference additional headers your program requires here 
```

inter.cpp

```
// Inter.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include <iostream>

int _tmain(int argc, _TCHAR* argv[])
{
    printHello();
} 
```

stdafx.cpp

```
// stdafx.cpp : source file that includes just the standard includes
// Inter.pch will be the pre-compiled header
// stdafx.obj will contain the pre-compiled type information

#include "stdafx.h"
#include <iostream>

// TODO: reference any additional headers you need in STDAFX.H
// and not in this file
void printHello() {
    std::cout << "Hello World!" << std::endl;  
} 
```

我明白了：

```
'Inter.exe': Loaded 'C:\Users\Adamsh\Documents\Visual Studio 2010\Projects\Inter\Debug\Inter.exe', Symbols loaded.
'Inter.exe': Loaded 'C:\Windows\System32\ntdll.dll', Cannot find or open the PDB file
'Inter.exe': Loaded 'C:\Windows\System32\kernel32.dll', Cannot find or open the PDB file
'Inter.exe': Loaded 'C:\Windows\System32\msvcp100d.dll', Symbols loaded.
'Inter.exe': Loaded 'C:\Windows\System32\msvcr100d.dll', Symbols loaded.
The program '[3636] Inter.exe: Native' has exited with code 0 (0x0). 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T18:34:38.897

AFAICS作为 Visual C++ 特定程序，您的程序在*技术上*没有任何问题。

但是，它是不必要的特定于编译器的。

特别是，替换您的 Visual C++ 特定且毫无意义的怪物

```
int _tmain(int argc, _TCHAR* argv[]) 
```

使用标准 C++

```
int main() 
```

要调试您的程序，请在 Visual Studio 中选择“调试”构建而不是“发布”。

**编辑**：休息室里的人评论说，对于 OP 来说，该程序可能完成得太快了？如果是这样，只需在 . 的右大括号上放置一个断点`main`。

# x11 - 使用 xdotool 或类似工具，如何更改窗口顺序？

> ID：10374761
> 
> 赞同：0
> 
> 时间：2012-04-29T18:26:20.023
> 
> 标签：x11

我需要告诉窗口 A 显示在窗口 B 上方，但在窗口 C 下方。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T05:23:38.147

使用[xdotool](http://www.semicomplete.com/projects/xdotool/xdotool.xhtml#windowraise_window_id_1)（并更改 C 的堆叠）：

```
xdotool windowraise window_id A
xdotool windowraise window_id C 
```

# ajax - 以自定义形式动态创建字段

> ID：10374764
> 
> 赞同：0
> 
> 时间：2012-04-29T18:27:07.497
> 
> 标签：ajax, drupal, form-submit

我正在为 Drupal 7 构建一个自定义模块。它包含一个巨大的表单。我创建了一个 jQuery 代码来修改表单并添加一些新的选择、文本字段和复选框。

当我提交表单时，我无法从 jQuery 添加的字段中读取数据。

我下载了开发人员示例 (http://drupal.org/project/examples)。有一个示例称为添加更多按钮 (ajax_example)。似乎是提交所有数据，增加一个计数器，用新字段重建整个表单，然后将呈现的表单发回。是否有可能避免将整个表单服务器发送到客户端？这不是最快的解决方案。

我想使用 jQuery 修改我的表单，提交它，重建它并验证它。每次更改都不需要向服务器发送数据。

谢谢你，马丁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T09:25:54.593

`I submit the form I am not able to read data from fields which were added by jQuery`

确保将`name`字段添加到`inputs`和`select`元素。

`$_POST['here_is_the_name_which_you_give_to_your_elements']`读取服务器端输入的表单字段的值。

我破译该表单将具有多个动态创建的输入和选择。要管理它：

在字段的`[]`后面添加。例如：`value``name`

```
 <input type='text' value='' name='my_custom_input[]' id='this_is_not_reqiured_1'>
 <input type='text' value='' name='my_custom_input[]' id='this_is_not_reqiured_2'> 
```

您可以通过或获取数组中服务器端所有`<input>`with `name`=的值。`my_custom_input``POST``GET`

注意：`ID`不是必需的，但如果您需要操作这些 DOM 元素，您可以使用和维护计数器。

# javascript - 页面上的 iFrame，在显示 iFrame 之前等待所有 iFrame 内容加载

> ID：10374772
> 
> 赞同：1
> 
> 时间：2012-04-29T18:29:05.680
> 
> 标签：javascript, html, iframe

问题说明了一切。

我在页面上有一个 iFrame。我想在 iFrame 显示之前等待 iFrame 的内容完全加载。

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T18:45:33.260

如果`completely`意味着等到所有`iframe`DOM 都加载完毕，那么对我来说最简单的方法是使用 jQuery：

```
$("iframe").ready(function() {
    $("iframe").show();
});​ 
```

在此处检查解决方案：http: [//jsfiddle.net/YTGaT/](http://jsfiddle.net/YTGaT/)

但是，如果您需要等到其中的所有图像/闪存/`iframe`等都*完全*加载，那么我相信该解决方案不会是确定和成功的。

# cakephp - JS 助手提交作品，但链接不会

> ID：10374777
> 
> 赞同：1
> 
> 时间：2012-04-29T18:29:40.027
> 
> 标签：cakephp, cakephp-1.3, cakephp-2.0

我需要使用链接而不是在 JS 助手中提交。不幸的是，我的提交代码工作正常，但是当我尝试通过将 $this->Js->submit 更改为 $this->Js->link 将相同的代码从提交切换到链接时，它不起作用

**这有效**

```
echo $this->Js->submit("Delete", array(
    'before'=>$this->Js->get('#sending')->effect('fadeIn'),
    'success'=>$this->Js->get('#sending')->effect('fadeOut'),
    'update'=>'#success',
    'url' => array(
    'action' => 'delete',$team['Team']['id']
    ),                      
)); 
```

**这不起作用**

```
 echo $this->Js->link("Delete", array(
        'before'=>$this->Js->get('#sending')->effect('fadeIn'),
        'success'=>$this->Js->get('#sending')->effect('fadeOut'),
        'update'=>'#success',
        'url' => array(
        'action' => 'delete',$team['Team']['id']
        ),                      
    )); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T19:51:04.950

好的，找到了解决方案

这行得通

```
<?php  
      echo $this->Js->link('Delete', 
                                array(
                                   'action' => 'edit_reload',
                                   'team_id'=>$team['Team']['id']
                                 ), 
                                 array(
                                   'update' => '#success'
                                 )
                          ); 
?> 
```

# css - 如何使用 CSS 将 div 背景分成“n”个色带

> ID：10374778
> 
> 赞同：0
> 
> 时间：2012-04-29T18:29:51.600
> 
> 标签：css

我有一张大桌子，需要将单元格的背景更改为 1 到 6 个色带，例如堆叠在一起的矩形（其他信息将出现在单元格内）。虽然这个例子是一个表格，但我猜这适用于任何 DIV。我希望能够（通过 javascript 即时）抓取 DOM 中的“cellcontainer”DIV 并创建子 DIV 以创建带状背景效果。

```
<table border=1 width=400 height=400>
    <tr>
        <td>
            <div class="cellcontainer">
                One
            </div>
        </td>
        <td>Two</td>
    </tr>
    <tr>
        <td>Three</td>
        <td>Four</td>
    </tr>
</table> 
```

对于这个简单的表格，我尝试使用第一个单元格（使用 div 'cellcontainer'）并将背景设置为三种不同的颜色，如浅蓝色、黄色和绿色。我尝试添加高度=33% 的子 div，并将 cellcontainer 的样式设置为相对，将子 div 设置为绝对等，但我还没有找到神奇的组合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T18:56:52.600

当您说要使单元格的背景具有3种不同的颜色时，您的意思是渐变吗？如果是这样试试[这个](http://www.colorzilla.com/gradient-editor/)

否则我不太清楚你所说的“让背景变成3种不同的颜色”是什么意思。

# php - PHP MYSQL 检查重复条目

> ID：10374780
> 
> 赞同：2
> 
> 时间：2012-04-29T18:30:06.020
> 
> 标签：php, mysql, database, duplicates

（这是我的第一篇文章）我编写了一个 PHP 脚本来将“数据集”输入到 MySQL 数据库中。在输入数据之前，我想检查“数据集”是否已经在数据库中。

我的问题：它只适用于几个数据集（是的，我确定我没有忘记大写和小写）所以这里是脚本（你不需要德语注释......）：

```
<!DOCTYPE html>
<html><head>
<meta charset="utf-8">
<title>Playlist</title>

<link rel="stylesheet" type="text/css" href="style.css" />

<script type="text/javascript">
setTimeout("self.location.href='index.php'",6000);
</script>

</head>
<body>
<div id="enterbody">
<?php
include ('conf.php');

mysql_select_db("$datenbank");

//Zeit
$date = date("d-m-Y");

//Post 2 var
$inp = $_POST["inp"];
$titel = $_POST["titel"];
$link = $_POST["link"];

//Länge der Strings
$l_inp = strlen($inp);
$l_titel = strlen($titel);
$l_link = strlen($link);

//eingabestrings in kleine zeichen umwandeln
$s_inp = strtolower($inp);
$s_titel = strtolower($titel);

//datenbankstrings in kleine zeichen umwandeln

//Ausgabe

echo "Länge des Interpreten: $l_inp (max: 50)</br>";
echo "Länge des Titels: $l_titel (max: 50)</br>";
echo "Länge des Links: $l_link (max: 42)</br>";

if ($inp == "" or $titel == "")
{
    echo "Bitte fülle die notwendigen Felder aus!";
}
else
{
    if ($l_inp > 50 or $l_titel > 50 or $l_link > 42)
    {
        echo "Der Interpret/Titel/Link ist zu Lange, deshalb wurde er nicht in die Datenbank eingetragen!";
    }
    else
    {       
            //stringkonvertierung nicht vergessen
            $inp_einlesen = mysql_query("SELECT inp FROM $tabelle WHERE inp='$inp'");
                $titel_einlesen = mysql_query("SELECT titel FROM $tabelle WHERE titel='$titel'");

                if (mysql_num_rows($inp_einlesen) == 1 and mysql_num_rows($titel_einlesen) == 1)
                {
                        echo "<b>$inp</b> mit dem Track <b>$titel</b> ist schon in der Datenbank vorhanden, deshalb wird der Datensatz nicht eingetragen";
                }
                else
                {

                $entry = "INSERT INTO playlist (inp, titel, link, date) VALUES('$inp','$titel','$link', NOW())";
                $enter_data = mysql_query($entry);

                if ($enter_data == true)
                {
                    echo "Deine Daten wurden gespeichert! Weiterleitung...";
                }
                else
                {
                                echo "Fehler beim Eintragen der Daten...";
                        }

                }
    }
}

mysql_close($connection);
?>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T18:37:03.987

```
 if (mysql_num_rows($inp_einlesen) == 1 and mysql_num_rows($titel_einlesen) == 1) 
```

这意味着只有且仅当存在一个记录但必须有多个记录。替换 `==1`为`!=0`

这是一个检查变量是否为空而不是使用`$var == ''`use的建议`empty($var)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T18:38:14.183

或者，重组表并使用[ON DUPLICATE KEY UPDATE](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T18:40:32.097

在这条线上：

```
if (mysql_num_rows($inp_einlesen) == 1 and mysql_num_rows($titel_einlesen) == 1) 
```

你只是测试一个结果。也许你有多个结果？也许两条记录有“inp_einlesen”匹配，只有一个匹配“titel_einlesen”？换句话说，如果您的数据集已经有重复项，除非每个字段只有一个重复项，否则此行将找不到它们。

除了大写/小写之外的另一件事是尾随空格。请务必使用 trim() 删除尾随空格。

您可能想要标准化的另一件事是您如何处理转义。如果有人在其中输入带有撇号的数据，您将需要手动转义它或在较低级别处理它，例如使用 magic_quotes。

此外，这里提供的代码很容易受到 MySQL 注入攻击。请务必阅读“mysql_real_escape_string”的 PHP 手册页。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-29T19:52:30.500

除了其他人在这里说的话，您可能做错了检查。首先，您的 2 个查询可以合并为一个：

```
$dup = mysql_query("SELECT TRUE FROM $tabelle WHERE inp='$inp' AND titel='$titel' LIMIT 1");
if (mysql_num_rows($dup)) {
    // duplicate playlist
} 
```

现在更容易看出只有两个字段都匹配时才会失败。不确定你是否真的打算`AND`在那里，但即使你这样做了——你宁愿用这种方式检查，在大桌子上节省很多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-29T18:43:04.307

也许这样的事情会起作用？如果已经有条目或者没有条目，您可以运行代码：

```
if($variable != '') {
    $qry = "SELECT * FROM table WHERE column='$variable'";
    $result = mysql_query($qry);
    if($result) {
        if(mysql_num_rows($result) > 0) {
        //Already exists
        }
        else {
        //Doesn't already exist
        }
    }
    else {
        die("Query failed");
    } 
```

}

# javascript - 尝试动态更改包含滑块的 div

> ID：10374781
> 
> 赞同：0
> 
> 时间：2012-04-29T18:30:07.997
> 
> 标签：javascript

我正在使用可以在[http://slidesjs.com/](http://slidesjs.com/)上找到的幻灯片插件。我测试了插件，它可以工作。我试图在 jquery 函数中设置它，如果单击菜单上的 div 更改并且滑块的图像发生更改，则 div 已更改但滑块变为静态。

HTML 代码

```
<script>
$(function(){
$('#slides').slides({
preload: true,
play: 9500,
pause: 3500,
hoverPause: true,
pagination: false           
});

});
</script>

<div class="auto-style1">
<div>
<a href="menu1.html" class="menuLink">Hotels</a>
<ul class="menu" id="menu1">
<li class="hotel" hotel="ogudu" id="DGH"><a href="#" >DATANOMICS GUEST HOUSE,OGUDU</a> </li>
<li hotel=""><a href="#" >DATANOMICS HOTEL, SHOMULU</a></li>
<li class="hotel" hotel="akure"><a href="#" >PARLIAMENT HOTEL AKURE</a></li>
<li class="hotel" hotel="ishua"><a href="#" >ISHUA HOTEL, ISHUA</a> </li>
<li><a href="index.php">Back to Main Menu</a></li>
</ul>       
</div>
</div>
<div class="detail_container" id="detail_container">
<div class="hotel_details">
</div>
</div>
<div class="hotel_details_container">
<div class="hotel_details" id="ogudu">
<div id="slides">
<div class="slides_container">
<a  target="_blank"><img image1 width="675" height="375" alt="Slide 1"></a>
<a target="_blank"><img image2 width="675" height="375" alt="Slide 2"></a>
<a target="_blank"><img image3 width="675" height="375" alt="Slide 3"></a>
<a target="_blank"><img image4 height="375" alt="Slide 4"></a>
<a target="_blank"><img image5 width="675" height="375" alt="Slide 5"></a>
<a target="_blank"><img image6 width="675" height="375" alt="Slide 6"></a>
<a target="_blank"><img image7 width="675" height="375" alt="Slide 7"></a>
</div>
</div><!--end of slides container-->
<div class="detail_containerinfo">
<h2>Datanomics Guest House</h2>
<p>Datanomics Guest House is one of the loveliest luxury hotels on the Lagos Mainland, an authentic Art Nouveau palace that offers a warm inviting welcome and the delights of a true 4-star vacation. </p>
<br />
<p>
Datanomics Guest House 
</p>
<br />
<p>Discover a world of temptations in what we call the D Vacation… experience the pleasures of a holiday with the unique atmosphere and flavours you will only find here at Datanomics.</p>

</div>
<div class="clear_both">
</div>
</div> 
```

jQuery

```
$('#DGH').click(function()
{
$('#DGH').removeClass('selected');
$(this).addClass('selected');
var hotel = '.hotel_details#' + $(this).attr('hotel');      
var htmlCode =$(hotel).html();
$('div.#detail_container').fadeOut(500,function(){
$('div.#detail_container').html(htmlCode);
$('div.#detail_container').fadeIn(500);     
});     
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T18:35:13.847

问题是 $('div.#detail_container').html(htmlCode); 将创建新内容，因此#slides 将被替换为新内容（不附加任何事件）。为了做你想做的事，你要么需要破解插件以某种方式使用实时模块（复杂），要么更简单地重新执行

```
$('#slides').slides({
preload: true,
play: 9500,
pause: 3500,
hoverPause: true,
pagination: false           
}); 
```

替换 html 后

# eclipse - Eclipse 无法识别包含文件中的断点

> ID：10374782
> 
> 赞同：2
> 
> 时间：2012-04-29T18:30:13.880
> 
> 标签：eclipse, cakephp, xdebug

我已经努力了一个月，现在让 xdebug 在 eclipse 中工作以调试 PHP 应用程序。我最终设法让 xdebug 工作，万岁！！！

现在，我在过去一两周内未能工作的是断点。它们适用于我正在调试的文件，但在包含的文件中设置断点时无法识别它们。

以前有没有人遇到过这个问题并且知道如何解决它？我几乎不知疲倦地在网上寻找解决方案，但没有成功。

我正在开发 CakePHP 应用程序，以防万一。

提前致谢。

缺口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-13T04:09:49.940

我在崇高的文本中遇到了类似的问题并解决了它。

我查看了 xdebug 日志并注意到在某一时刻如果试图以错误的路径访问我的文件。

要检查您的问题是否与我的相似，请查看异常是否使您的 ide 中断。我的打破了诸如未定义变量之类的异常（尝试 echo $totoNotDefined）但不是断点

在日志中寻找类似的东西：file:///

我能看到的是：file:///theFileBrowed.php

我的问题是该文件实际上在 d:/work/project/.../theFileBrowed.php

所以我得出结论，我的 xdebug 配置（在我的 ide 中：sublime text）一定是错误的

确实，我有这个：

"path_mapping": { "/":"D://work/project/test" },

但显然 D: 不被爱

我将其更改为：

"path_mapping": { **"/":"/D/work/project/test"** },

它工作得很好。

有时，如果您的路径位于带有空格或重音符号的文件夹中，它也会弄乱断点。

我希望它有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T15:58:57.787

我会研究 NetBeans。作为一个狂热的 Eclipse 用户，我发现它在处理 PHP 时更胜一筹。

# jsf - JSF 自定义组件错误 + ValueExpression

> ID：10374786
> 
> 赞同：2
> 
> 时间：2012-04-29T18:30:59.513
> 
> 标签：jsf, facelets, el, custom-component

我有两个大问题！

我正在尝试制作一个简单的 JSF 组件来扩展 h:outputText 的功能。

我已经尝试按照本[指南](http://www.winstonprakash.com/articles/netbeans/jsf_custom_component_part1.html)进行操作，但不知何故我做对了一些事情。

我可以成功导入我的 taglib，一切似乎都很好，但是当我使用它时，我得到了这个异常：

> javax.servlet.ServletException：表达式错误：命名对象：找不到 EmoticonOutputTextTag。

我能做些什么来解决这个问题？

我附上所有的代码。

由于这与我附加的代码有关，我该如何启用`ValueExpression`该`inputText`属性？Oracle 的指南没有帮助：/

META-INF/EmoticonOutputText.tld

```
<?xml version="1.0" encoding="UTF-8"?>
<taglib version="2.1" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-jsptaglibrary_2_1.xsd">
  <tlib-version>1.0</tlib-version>
  <short-name>eot</short-name>
  <uri>com.unilife.emoticonOutputText</uri>
  <tag>
    <name>EmoticonOutputText</name>
    <tag-class>com.unilife.emoticonOutputText.EmoticonOutputTextTag</tag-class>
    <body-content>scriptless</body-content>
    <attribute>
      <name>style</name>
      <rtexprvalue>true</rtexprvalue>
      <type>java.lang.String</type>
    </attribute>
    <attribute>
      <name>styleClass</name>
      <rtexprvalue>true</rtexprvalue>
      <type>java.lang.String</type>
    </attribute>
    <attribute>
      <name>inputText</name>
      <required>true</required>
      <rtexprvalue>true</rtexprvalue>
      <type>java.lang.String</type>
    </attribute>
  </tag>
</taglib> 
```

/META-INF/faces-config.xml

```
 <?xml version='1.0' encoding='UTF-8'?>
<faces-config version="1.2" 
                xmlns="http://java.sun.com/xml/ns/javaee" 
                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
                xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
         http://java.sun.com/xml/ns/javaee/web-facesconfig_1_2.xsd">
    <component>
        <component-type>
            com.unilife.emoticonoutputtext
        </component-type>
        <component-class>
            com.unilife.emoticonOutputText.EmoticonOutputText
        </component-class>
    </component>

    <render-kit>
        <renderer>
            <description>
                OutputText che permette il rendering di emoticons al posto delle combinazioni di tasti
            </description>
            <component-family>
                javax.faces.Output
            </component-family>
            <renderer-type>
                com.unilife.emoticonoutputtext
            </renderer-type>
            <renderer-class>
                com.unilife.emoticonOutputText.EmoticonOutputTextRenderer
            </renderer-class>
        </renderer>
    </render-kit>  
</faces-config> 
```

/META-INF/unilife.taglib.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE facelet-taglib PUBLIC
"-//Sun Microsystems, Inc.//DTD Facelet Taglib 1.0//EN"
"http://java.sun.com/dtd/facelet-taglib_1_0.dtd">
<facelet-taglib>
    <namespace>http://unilife.it/tags</namespace>
    <tag>
        <tag-name>EmoticonOutputText</tag-name>
        <description>
            OutputText con la possibilità di mostrare Emoticons
        </description>
        <component>
            <component-type>EmoticonOutputTextTag</component-type>
            <renderer-type>EmoticonOutputTextRenderer</renderer-type>
        </component>
        <attribute>
            <name>style</name>            
            <type>java.lang.String</type>
        </attribute>
        <attribute>
            <name>styleClass</name>            
            <type>java.lang.String</type>
        </attribute>
        <attribute>
            <name>inputText</name>
            <required>true</required>            
            <type>java.lang.String</type>
        </attribute>
    </tag>
</facelet-taglib> 
```

com.unilife.emoticonOutputText/EmoticonOutputText.java

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package com.unilife.emoticonOutputText;

import javax.faces.component.UIOutput;

/**
 *
 * @author stefano
 */
public class EmoticonOutputText extends UIOutput {

    private static final String COMP_FAMILY = "javax.faces.Output";

    /**
     * Get the value of COMPONENT_FAMILY
     *
     * @return the value of COMPONENT_FAMILY
     */
    @Override
    public String getFamily() {
        return COMP_FAMILY;
    }

    private static final String RENDERER_TYPE = "com.unilife.emoticonoutputtext";

    /**
     * Get the value of RENDERER_TYPE
     *
     * @return the value of RENDERER_TYPE
     */
    @Override
    public String getRendererType() {
        return RENDERER_TYPE;
    }

    private String style;

    /**
     * Get the value of style
     *
     * @return the value of style
     */
    public String getStyle() {
        return style;
    }

    /**
     * Set the value of style
     *
     * @param style new value of style
     */
    public void setStyle(String style) {
        this.style = style;
    }
    private String styleClass;

    /**
     * Get the value of styleClass
     *
     * @return the value of styleClass
     */
    public String getStyleClass() {
        return styleClass;
    }

    /**
     * Set the value of styleClass
     *
     * @param styleClass new value of styleClass
     */
    public void setStyleClass(String styleClass) {
        this.styleClass = styleClass;
    }
    private String inputText;

    /**
     * Get the value of inputText
     *
     * @return the value of inputText
     */
    public String getInputText() {
        return inputText;
    }

    /**
     * Set the value of inputText
     *
     * @param inputText new value of inputText
     */
    public void setInputText(String inputText) {
        this.inputText = inputText;
    }
} 
```

com.unilife.emoticonOutputText/EmoticonOutputTextRenderer.java

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package com.unilife.emoticonOutputText;

import java.io.IOException;
import java.util.HashMap;
import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;
import javax.faces.context.ResponseWriter;
import javax.faces.render.Renderer;
import javax.servlet.ServletContext;

/**
 *
 * @author stefano
 */
public class EmoticonOutputTextRenderer extends Renderer {

    //Contiene la corrispondenza tra la stringa da sostituire e il nome dell'emoticon
    private static final HashMap<String, String> emoticons = new HashMap<>();
    //Contiene il percorso dei files delle emoticon
    private final String basePath = ((ServletContext) (FacesContext.getCurrentInstance().getExternalContext().getContext())).getContextPath() + "/resources/images/emoticons/";

    public EmoticonOutputTextRenderer() {
        parseEmoticons();
    }

    private void parseEmoticons(){
        emoticons.put(":)", basePath + "smile");
        emoticons.put(":-)", basePath + "smile");
        emoticons.put("=)", basePath + "smile");
        emoticons.put(":(", basePath + "frown");
        emoticons.put(":-(", basePath + "frown");
        emoticons.put("=(", basePath + "frown");
        emoticons.put(":p", basePath + "tongue");
        emoticons.put(":-p", basePath + "tongue");
        emoticons.put("=p", basePath + "tongue");
        emoticons.put(":D", basePath + "grin");
        emoticons.put(":-D", basePath + "grin");
        emoticons.put("=D", basePath + "grin");
        emoticons.put(":o", basePath + "gasp");
        emoticons.put(":-o", basePath + "gasp");
        emoticons.put(";)", basePath + "wink");
        emoticons.put(";-)", basePath + "wink");
        emoticons.put("8)", basePath + "glasses");
        emoticons.put("8-)", basePath + "glasses");
        emoticons.put("8|", basePath + "sunglasses");
        emoticons.put("8-|", basePath + "glasses");
        emoticons.put(">:(", basePath + "grumpy");
        emoticons.put(">:-(", basePath + "grumpy");
        emoticons.put(":\\", basePath + "unsure");
        emoticons.put(":-\\", basePath + "unsure");
        emoticons.put(":/", basePath + "unsure");
        emoticons.put(":-/", basePath + "unsure");
        emoticons.put(":'(", basePath + "cry");
        emoticons.put("3:)", basePath + "devil");
        emoticons.put("3-:)", basePath + "devil");
        emoticons.put("O:)", basePath + "angel");
        emoticons.put("O-:)", basePath + "angel");
        emoticons.put(":*", basePath + "kiss");
        emoticons.put(":-*", basePath + "kiss");
        emoticons.put("<3", basePath + "heart");
        emoticons.put("^_^", basePath + "kiki");
        emoticons.put("-_-", basePath + "squint");
        emoticons.put("o.O", basePath + "confused");
        emoticons.put("O.o", basePath + "confused");
        emoticons.put(">:O", basePath + "upset");
        emoticons.put(">:-O", basePath + "upset");
        emoticons.put(":v", basePath + "pacman");
        emoticons.put(":3", basePath + "colonthree");
    }

    @Override
    public void encodeBegin(FacesContext context, UIComponent component) throws IOException {
        EmoticonOutputText eot = (EmoticonOutputText) component;
        ResponseWriter writer = context.getResponseWriter();
        //Aggiungiamo l'eventuale stile CSS o direttamente la classe
        writer.startElement("span", null);
        if(eot.getStyle()!=null && !eot.getStyle().isEmpty()){
            writer.writeAttribute("style", eot.getStyle(), null);
        }
        if(eot.getStyleClass()!=null && !eot.getStyleClass().isEmpty()){
            writer.writeAttribute("class", eot.getStyleClass(), null);
        }
        //Andiamo ad effettuare il parse vero e proprio, sostituendo le emoticons come le immagini
        for(String str : eot.getInputText().split(" ")){
            if(emoticons.containsKey(str)){ //Se riconosco l'emoticon allora scrivo l'immagine
                writer.startElement("img", null);
                writer.writeAttribute("src", emoticons.get(str) + ".gif", null);
                writer.endElement("img");
                writer.writeText(" ", null);
            } else { //Altrimenti aggiungo semplicemente la parola
                writer.writeText(str + " ", null);
            }
        }
    }
} 
```

com.unilife.emoticonOutputText/EmoticonOutputTextTag.java

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package com.unilife.emoticonOutputText;

import javax.faces.component.UIComponent;
import javax.faces.webapp.UIComponentELTag;

/**
 *
 * @author stefano
 */
public class EmoticonOutputTextTag extends UIComponentELTag {

    private static final String COMP_TYPE = "com.unilife.emoticonoutputtext";
    private static final String RENDERER_TYPE = "com.unilife.emoticonoutputtext";
    private String style;
    private String styleClass;
    private String inputText;

    public void setStyle(String style) {
        this.style = style;
    }

    public void setStyleClass(String styleClass) {
        this.styleClass = styleClass;
    }

    public void setInputText(String inputText) {
        this.inputText = inputText;
    }

    @Override
    public String getComponentType() {
        return COMP_TYPE;
    }

    @Override
    public String getRendererType() {
        return RENDERER_TYPE;
    }

    @Override
    protected void setProperties(UIComponent component) {
        super.setProperties(component);
        EmoticonOutputText eot = (EmoticonOutputText)component;
        if(style != null){
            eot.setStyle(style);
        }
        if(styleClass != null){
            eot.setStyleClass(styleClass);
        }
        if(inputText != null){
            eot.setInputText(inputText);
        }
    }
} 
```

如您所见，代码非常简单（实际上我什至不知道我错在哪里，因为我无法测试它，这是我第一次使用自定义组件！）

有没有人可以帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T17:40:18.693

> 表达式错误：命名对象：未找到 EmoticonOutputTextTag。

这意味着找不到给定的“组件类型”。标签的`getComponentType()`return `com.unilife.emoticonoutputtext`，但是您错误地在标签类名称上注册了它：

```
<component-type>EmoticonOutputTextTag</component-type> 
```

相应地修复它。我也会在命名约定上更加一致。我还将开始逐步**准确地**遵循本教程，并使用一个工作示例而不是做与本教程中提到的不同的事情。

# graphics - QGraphicsView::setScene() 中的分段错误

> ID：10374787
> 
> 赞同：0
> 
> 时间：2012-04-29T18:31:05.333
> 
> 标签：graphics, qt4

我有一个普通的小部件应用程序，它应该在图形视图小部件中显示一个有限自动机。我在主窗口中添加了一个 QGgraphicsView，它有一个 QGraphicsScene 的实例：

```
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    scene(new QGraphicsScene(this))
{
    setupUi(this);
    scene->addText("Hello");
    ui->graphicsView->setScene(scene); // bumb!
} 
```

程序在尝试为 graphicsView 设置场景时因分段错误而崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T07:25:55.507

您应该在从 ui 类继承和拥有 ui 成员之间进行选择。
那么代码应该是：

```
ui->setupUi(this);
...
ui->graphicsView->setScene(scene); 
```

或者：

```
setupUi(this);
...
graphicsView->setScene(scene); 
```

# android - MultipartEntity 使我的应用程序崩溃

> ID：10374789
> 
> 赞同：2
> 
> 时间：2012-04-29T18:31:42.507
> 
> 标签：android, crash

不确定为什么会这样，但是这行代码在调试或运行模式下使我的应用程序崩溃：

```
MultipartEntity multipartEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE); 
```

使用它是否有许可或其他我做错的事情？

我正在为 Android 2.1 构建并使用 apache-mime4j-dom-0.7.2.jar 和 httpmime-4.1.3.jar。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-29T18:50:49.097

这只是一个猜测，但我认为您的问题与新的 ADT 版本有关。从 ADT 开始，需要将 17 个 jar 放入 libs 文件夹，否则它们不会与 apk 一起打包。

因此，要么将它们放入库中，要么转到“配置构建路径..”->“订购和导出”，然后单击 jar 旁边的复选框。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T18:08:52.347

即使我的库已经正确放置在正确的文件夹中，我也遇到了同样的问题。编译很好，一切都很好。

我的解决方案是将我的 httpmime jar 更新到 4.2.3（我以前的版本是 4.0）。之后，一切都在应用程序中运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-04T11:14:38.570

我有这个完全相同的问题。我的库被正确放置。Java 版本根据需要是 1.6。仍然得到错误。所以将httpmime升级到4.2.5然后降级到4.2.3。仍然没有运气。

将罐子添加到构建路径（属性> Java 构建路径）然后在订单和导出选项卡上勾选罐子时，我的问题得到了解决。

这不是官方的方式。但这是它为我工作的方式：

minSdkVersion="7" targetSdkVersion="17"

ADT build v22.0.0-675183 平台工具17

Windows 7 专业版 64 位

# php - 如何在分层导航中隐藏过滤器？

> ID：10374791
> 
> 赞同：0
> 
> 时间：2012-04-29T18:31:58.497
> 
> 标签：php, magento, e-commerce

我有一个正在构建的 magento 商店，我需要在分层导航中显示的唯一过滤器是类别。如何隐藏其他过滤器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T04:03:02.583

转到后端的属性，然后选择要从过滤器中删除的属性。将类别的“用于分层导航”设置为 false。

# mips - MIPS 汇编语言：延迟

> ID：10374792
> 
> 赞同：1
> 
> 时间：2012-04-29T18:32:32.440
> 
> 标签：mips

我希望两个数字一个接一个地显示，它们之间有 3 秒的延迟，如何在 MIPS 中完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T21:19:57.337

如果您使用 MARS，请`syscall 32`让主 Java 线程休眠指定的毫秒数。

[MARS 系统调用](http://courses.missouristate.edu/KenVollmar/MARS/Help/SyscallHelp.html)

# asp.net - 如何将 Web 项目 (ASP.net) 发布到我的 PC 的 II？

> ID：10374793
> 
> 赞同：1
> 
> 时间：2012-04-29T18:32:41.753
> 
> 标签：asp.net, visual-studio-2010, iis

我正在运行 Windows 7，并且已经安装了 II。但是，当我尝试通过 Visual Studio（-Visual Web 开发人员）的 Web 部署发布我的项目时——尽管它告诉我它成功了——要么我不知道如何在浏览器中看到它，要么我将错误的数据放入对话。我输入的是：

1.  服务网址 - “本地主机”
2.  站点/应用程序 - “默认网站/我的站点”

但是当我打开浏览器并输入“mysite”甚至“默认网站/mysite”时，浏览器找不到它。

当我将 prpperties->web 设置为“使用 Visual Studio 开发服务器”并按 f5 时，它可以工作。但是当我将它设置为“使用本地 IIS Web 服务器”时——它没有。

我已经寻找解决方案，但没有找到。

那么它是如何*完成的*呢？

编辑：当我在浏览器中输入“localhost/mysite”时，我得到一个很长的错误。“'/WebApplication1' 应用程序中的服务器错误。无法从程序集 'System.ServiceModel, 版本......加载类型'System.ServiceModel.Activation.HttpModule'。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T20:26:14.507

看看这个：

[http://support.microsoft.com/kb/2015129](http://support.microsoft.com/kb/2015129)

要解决此问题，请运行以下命令行：

```
aspnet_regiis.exe /iru 
```

Aspnet_regiis.exe 文件位于以下位置之一：

%windir%\Microsoft.NET\Framework\v4.0.30319

%windir%\Microsoft.NET\Framework64\v4.0.30319（在 64 位计算机上）

更多信息在这里：

[http://devonenote.com/2010/06/could-not-load-type-system-servicemodel-activation-httpmodule/](http://devonenote.com/2010/06/could-not-load-type-system-servicemodel-activation-httpmodule/)

# ios - 为什么我需要 2 个或更多 Core Data 模型？

> ID：10374796
> 
> 赞同：10
> 
> 时间：2012-04-29T18:32:54.287
> 
> 标签：ios, core-data

我很想知道谁使用多个核心数据模型，为什么，有什么好处，我正在开发一个我认为可以从多个模型中受益的应用程序，但我不确定其他好处。

我即将推出的应用程序将适用于 iPad，另一个版本适用于 iPhone，iPad 有 3 个主要内容，iPhone 只有一个也在 iPad 上，因此通过将其隔离到不同的核心数据模型中，可能会保持该模型在整个我的两个应用程序会更容易。

虽然我确实有几个实体，我都需要，所以我可以复制它们或拥有一个大模型。

有什么建议么 ？

无论如何，这当然不是一种常见的情况，还有哪些其他情况可能会导致您创建多个 Core Data 模型？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-29T18:53:40.963

有时将不同类型的数据保存在不同的存储中是有意义的。例如，一个像产品目录一样工作的应用程序可能有一个商店作为产品数据库，另一个商店跟踪用户的收藏夹、当前订单和历史记录。这使得在不影响用户数据的情况下更新产品数据库变得相对容易，并且无需复制整个产品数据库即可备份用户数据。

另一种使用多个存储的场景是存储相​​同类型的数据。例如，基于文档的应用程序通常会为每个文档创建一个单独的存储区——存储区可能*就是*文档。

**更新：**我上面写的地址使用单独的*商店*，但你问的是使用单独的*模型*。Core Data 实际上会让您定义单独的模型，然后在运行时将它们合并在一起，以便在同一个存储（或多个存储）中使用。因此，为了清楚起见，*模型*定义了实体以及它们之间的关系。一家*商店*是使用模型中定义的模式实际保存数据的地方。您可能会将一个复杂的模型分解为几个较小的模型，以保持简单并在您随着时间的推移修改模型时帮助迁移数据，或者您可能会使用多个模型并将它们分开，因为您计划使用包含不同类型的数据，如上所述。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T18:53:32.950

我建议只使用 1 个核心数据模型。如果将它们分开，您将无法使用 Core Data 的很多特性，例如关系（数据存储中的对象之间）等。即使您现在看不到需要，也可能会来想出一个想法，以便稍后添加到需要它的应用程序中。

您仍然可以为 iPad 和 iPhone 使用相同的核心数据模型，只需忽略您不使用 iPhone 的部分（直到您收到添加缺失部分的功能请求，您很可能会这样做）。然后你就准备好了，并且已经有了可用的数据。

只有在极端情况下才值得使用单独的数据模型，例如，如果您要下载现有的只读数据集等。您可以将只读数据集与用户设置/数据等分开。

祝你好运！

# mysql - 在 MySQL 中搜索英镑/数字符号 (#)

> ID：10374798
> 
> 赞同：1
> 
> 时间：2012-04-29T18:33:41.520
> 
> 标签：mysql, search, numbers, sign

我需要在我的mysql数据库中搜索#。我尝试了以下方法：

```
SELECT * FROM table WHERE column LIKE '#%' 
```

我也试过这个：

```
SELECT * FROM table WHERE column LIKE '[#]%' 
```

它们都不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T18:42:34.073

也许`SELECT * FROM table WHERE column LIKE '%#%'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T01:55:55.710

你确定这`SELECT * FROM table WHERE column LIKE '#%'`不起作用吗？我测试了它，它确实如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T18:59:24.870

```
SELECT * FROM table WHERE column REGEXP '^[[.#.]]' 
```

或者

```
SELECT * FROM table WHERE column REGEXP '^[[.number-sign.]]' 
```

这个正则表达式只是意味着检查属性`#`值的开头`column`

您可以将正则表达式更改为类似这样的`'^[[.#.]]{1}[[:digit:]]+$'`OR `'^[[.number-sign.]]{1}[[:digit:]]+$'`，这意味着`#`后面应该跟数字（仅）

检查这个网址

```
http://dev.mysql.com/doc/refman/5.1/en/regexp.html 
```

并且搜索`[.characters.]`它还提供了几个示例供您理解。

# emacs - 如何在控制台模式下应用 Emacs 自定义颜色主题？

> ID：10374802
> 
> 赞同：12
> 
> 时间：2012-04-29T18:33:57.680
> 
> 标签：emacs, colors, console

当我加载自定义配色方案（通过 Mx load-theme 或 Mx customize-theme）时，结果似乎仅在 Emacs 在单独的窗口中运行时应用：

![GUI 中的 Emacs](../Images/6e65e5f58ad09289f5095ca49689ddbc.png)

但是当 Emacs 在带有 -nw 的终端中运行时，似乎使用了默认颜色：

[![终端中的 Emacs](../Images/8ffddb1762cb0fc72d0d57cc67115ac1.png)](https://i.stack.imgur.com/FwHL9.png)
[（来源：[www.ocf.berkeley.edu 上的 raghav](http://www.ocf.berkeley.edu/~raghav/images/console.png)）]

我是 Emacs 的新手，所以我不知道这是否是预期的行为——但似乎不是，因为谷歌搜索出现了几个人讨论在控制台模式下使用颜色主题。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-01-19T11:53:34.923

我很晚了，但是我遇到了同样的问题，我解决了它，将以下行添加到我的 ~/.zshrc

```
export TERM=xterm-256color 
```

如果您没有使用 zsh（例如您使用的是 bash），则必须将其添加到您的右侧控制台初始化文件中（例如 ~/.bashrc）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T21:14:26.537

看到这个问题： [如何使 Emacs 终端颜色与 Emacs GUI 颜色相同？](https://stackoverflow.com/questions/63950/how-to-make-emacs-terminal-colors-the-same-as-emacs-gui-colors)

控制台中的主题看起来与 GUI 中的主题非常接近，所以我敢打赌，您将不得不忍受它——或者使用 GUI。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-08-05T11:43:24.490

在 ~/.Xresources 中使用以下内容似乎可以消除导出 TERM=xterm-256color 后出现的蓝色背景：

```
emacs*Background: #002b36
emacs*Foreground: #839496 
```

# css - 包含 UL 列表的滚动条框

> ID：10374804
> 
> 赞同：0
> 
> 时间：2012-04-29T18:34:08.307
> 
> 标签：css

我有这个模板代码：

```
 <script type="text/javascript">
  $(function(){
    //submit new messages when the user hits enter if the message isnt blank

    now.receiveMessage = function(name, message, messagetime){
      $("#messages").append(
                    '<li class="message"><div class="sent"><a href="${path}"><img src="${gravatar}" alt="name" width="24px" height="24px" /></a><div class="display-name">'+messagetime+'<div class="body">'+ message +'</div></div></div></li>');
      }
      $("#text-input").keypress(function (e) {
          if (e.keyCode != 13 /* Return */) return;
           now.distributeMessage($("#text-input").val());
          $("#text-input").attr("value", ""); // clear the entry field.
        });
      $("#send-button").click(function(){
        now.distributeMessage($("#text-input").val());
      $("#text-input").val("");
      });
    now.name = "${user}";
  });
</script>

    <div id="chat_window">
        <div id="chat_title"><h2>Simple Chat</h2></div>
        <div id="chat_container" style="display: block">
            <div id="chat">
                <ul id="messages">
                    <li class="message notice" id="no_one_there">
                        Fix me, if there are no users!
                    </li>
                </ul>
            </div>
        </div>
        <div id="chat-form">
            <input type="text" id="text-input" />
    <input type="button" value="Send" id="send-button" />
        </div>
    </div> 
```

这个CSS

```
div#chat {
width:100%;
height:100px;
overflow:scroll;
} 
```

基本上它是一个聊天窗口，但我有一个障碍，我似乎无法弄清楚如何对齐

*   元素，以便#chat div 的滚动条始终位于框的底部。类似于谷歌聊天窗口，您需要向上滚动才能查看旧消息。

    谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T18:38:01.630

你只需要

```
now.receiveMessage = function (name, message, messagetime) {
                $("#messages").append(  '<li class="message"><div class="sent"><a href="/"><img width="24px" alt="name" height="24px"></a><div class="display-name">' + messagetime + '<div class="body">' + message + '</div></div></div></li>');
document.getElementById("chat").scrollTop = document.getElementById("chat").scrollHeight;
} 
```

完整的代码在这里。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
  "http://www.w3.org/TR/html4/strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
  <title>Welcome - Zeitgeist Movement Global Connect</title>
  <base href="http://zmgc.net/">
  <!-- Meta -->
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta lang="en" name="description" content="One back-office to bring them all and in the darkness bind them, in an anarchically scalable information system.">
  <!-- Canonical URL for search engines -->
  <link rel="canonical" href="http://zmgc.net/">
  <!-- CSS -->
  <link rel="stylesheet" href="/ui/core/css/yui/cssreset/reset-min.css" type="text/css"><link rel="stylesheet" href="/ui/core/css/yui/cssgrids/grids-min.css" type="text/css"><link rel="stylesheet" href="/ui/core/css/core.css" type="text/css"><link rel="stylesheet" href="/ui/core/css/flags-sprite.css" type="text/css"><link rel="stylesheet" href="/ui/core/css/widgets.css" type="text/css"><link rel="stylesheet" href="/ui/js_calendar/calendar-aruni.css" type="text/css"><link rel="stylesheet" href="/ui/wiki/style.css" type="text/css"><link rel="stylesheet" href="/ui/phoenix/style.css" type="text/css"><link rel="stylesheet" href="ui/phoenix/jquery/custom-theme/jquery-ui-1.8.16.custom.css" type="text/css"><link rel="stylesheet" href="/ui/core/css/jPlayer/jplayer.pink.flag.css" type="text/css"><link rel="stylesheet" href="/ui/core/css/jPlayer/zen.css" type="text/css"><link rel="stylesheet" href="/ui/core/css/jPlayer/ui.css" type="text/css"><link rel="stylesheet" href="/theme/style/;download" type="text/css">
  <!-- JavaScript -->
  <script src="/ui/core/js/jquery/jquery-1.6.2.min.js" type="text/javascript"></script><script src="/ui/core/js/javascript.js" type="text/javascript"></script><script src="/ui/core/js/raphaeljs/raphael-min.js" type="text/javascript"></script><script src="/ui/core/js/world.js" type="text/javascript"></script><script src="/ui/js_calendar/jquery.dynDateTime.pack.js" type="text/javascript"></script><script src="/ui/js_calendar/lang/calendar-en.js" type="text/javascript"></script><script src="ui/phoenix/jquery/jquery-ui-1.8.16.custom.min.js" type="text/javascript"></script><script src="/ui/core/js/jPlayer/jquery.jplayer.min.js" type="text/javascript"></script><script src="/ui/core/js/jPlayer/add-on/jplayer.playlist.min.js" type="text/javascript"></script><script src="/ui/core/js/jquery/add-on/jquery.rotate.js" type="text/javascript"></script><script src="/ui/core/js/tab.js" type="text/javascript"></script><script src="/ui/core/js/zplayer.js" type="text/javascript"></script>
  <!-- Icon -->
  <link rel="shortcut icon" href="/ui/phoenix/favicon.ico" type="image/x-icon">
</head>
<body>
    <div id="wrap">
  <!-- Add YUI3 grids-->
  <div id="hd" class="yui3-g">
      <div id="logo" class="yui3-u-1-12"><!-- logo width: 4.1666%-->
        <h1 title="Welcome - Zeitgeist Movement Global Connect">
          <a href="/" title="Welcome - Zeitgeist Movement Global Connect">Zeitgeist Movement Global Connect</a>
        </h1>
      </div> <!-- /logo-->
      <div class="yui3-u-11-12"><!-- width: 95.8333%-->
        <div class="yui3-g">
          <div id="menu" class="yui3-u-1-2"><!-- menu width: 66.6666%-->
                        <ul>
                            <li><a href="/projects">Projects</a></li>
                            <li><a href="/news">News</a></li>
                            <li><a href="/calendar">Calendar</a></li>
              <li><a href="/forums">Forums</a></li>
                            <li><a href="/;more">More »</a></li>
            </ul>
                    </div>
          <div id="user-menu" class="yui3-u-1-2"><!--  width: 33.33333%-->
                        <ul>

                        <li><a href="/./;login" class="login" title="Login">Login</a></li>

                      <li><a href="/;contact" class="contact" title="Contact">Contact</a></li>
                      <li><a href="/help" class="help" title="Help">Help</a></li>
                            <li><a href="/;advanced_search" class="advanced-search" title="Advanced Search">Advanced Search</a></li>
                            <li>
                                <form action=";browse_content" method="get">
                        <div class="search placeholder-field">
                          <input name="search_text" type="text">
                          <input value="Search" class="button" type="submit">
                        </div>
                      </form>
                            </li>
                    </ul>
                </div>
            </div> <!-- /yui3-g  search and user profile-->
        </div>
  </div><!-- /yui3-g id="hd"-->

  <div id="language">

    <ul>
    <li>
      <a id="lang-en" href="http://zmgc.net/?language=en" class="selected" title="English">English</a>
    </li><li>
      <a href="http://zmgc.net/?language=fr" id="lang-fr" title="Français">Français</a>
    </li>
    </ul>
  </div>

  <!-- Bread crumbs -->
  <div>
      <label>

  <!-- Location & Views-->
  <div id="location">
    <div id="breadcrumbs">
      location »  <span><a href="/" title="Zeitgeist Movement Global Connect">Zeitgeist Movement Global Conn…&lt;/a></span>
    </div>
  </div>
  <div id="submenu">
    <span class="menu active">
      <a href="/./;view">Welcome</a>
      |
    </span><span class="menu ">
      <a href="/./;browse_content">Browse Content</a>
      |
    </span><span class="menu ">
      <a href="/./;preview_content">Preview Content</a>
      |
    </span><span class="menu ">
      <a href="/./;links">Links</a>
      |
    </span><span class="menu ">
      <a href="/./;backlinks">Backlinks</a>
      |
    </span><span class="menu ">
      <a href="/./;control_panel">Advanced</a>

    </span>
  </div>

</label>
  </div><!-- /location-->
  <!-- /Bread crumbs -->
  <div id="page">

  <!-- body -->
    <div class="yui-g">
    <!-- all other templates go within this block -->

<div class="yui3-g"><!-- content -->
  <div class="yui3-u-1-2"><!-- welcome block 40%-->
    <div class="welcome">
      <h1>Welcome  to the Zeitgeist Movement portal!</h1>
      <p>
        Founded in 2008, The Zeitgeist Movement is a Sustainability Advocacy Organization which conducts community based activism and awareness actions through a network of Global/Regional Chapters, Project Teams, Annual Events, Media and Charity Work.</p>
    </div> <!-- / welcome block 40%-->
    <!-- latest activities-->
    <div class="box-holder">
      <div class="box">
        <div class="holder">
          <div class="frame">
            <div class="box-content">
              <h3>
                <span>All the latest activities ...</span>
              </h3>
              <ul class="supports-list">
                <li class="">
                  <img src="/ui/core/resources/ico-wrote-petition.gif" alt="wrote-petition">                                    
                  <p>
                    <strong>Katia</strong> signed up to help with the Z-Day Festival: London</p>
                    <a href="#" title="Sign up to help">Sign up to help</a>
                  </li>
                  <li class="">
                    <img src="/ui/core/resources/ico-donate.gif" alt="wrote-petition">                                    
                    <p>
                      <strong>Luisa</strong> donated 5 € towards the Occupy London Fund </p>
                      <a href="#/" title="Wish to donate...">Wish to donate...</a>
                    </li>
                    <li class="last">
                      <img src="/ui/core/resources/ico-wrote-petition.gif" alt="wrote-petition">                                    
                      <p>
                        <strong>Patricia</strong> signed up to help with the Z-Day Festival: London</p>
                        <a href="#/" title="Sign up to help">Sign up to help</a>
                      </li>
                    </ul>
                  </div> <!-- /box-content-->
                </div> <!-- /frame-->
              </div> <!-- /holder-->
            </div> <!-- /box-->
          </div> <!-- /box-holder-->
          <!-- /latest activities-->
    <!-- tabs-->

    <script type="text/javascript">
        $(function() {
          $('#container-1').tabs();
          $("#container-2 > ul").tabs({ 
              navClass: "ui-tabs-sub-nav",
              selectedClass: 'ui-tabs-sub-selected',
              unselectClass: 'ui-tabs-sub-unselect',
              disabledClass: 'ui-tabs-sub-disabled',
              panelClass: 'ui-tabs-sub-panel',
              loadingClass: 'ui-tabs-sub-loading'
            });
        });

    </script>
    <div id="container-1">
      <ul>
        <li><a href="#actions"><span>Actions</span></a></li>
        <li><a href="#news"><span>News</span></a></li>
        <li><a href="#events"><span>Events</span></a></li>
        <li><a href="#chapters"><span>Chapters</span></a></li>
        <li><a href="#forums"><span>Forums</span></a></li>
      </ul>
      <div id="actions">
        {actions}
                <ul>
            <li><a href="#actions"><span>Actions</span></a></li>
            <li><a href="#news"><span>News</span></a></li>
            <li><a href="#events"><span>Events</span></a></li>
            <li><a href="#chapters"><span>Chapters</span></a></li>
            <li><a href="#forums"><span>Forums</span></a></li>
          </ul>
      </div>
      <div id="news">
        {news}
      </div>
      <div id="events">
        {events}
      </div>
      <div id="chapters">
        <div id="container-2">
          <ul>
            <li><a href="#chapter-1"><span>Africa</span></a></li>
            <li><a href="#chapter-2"><span>Americas</span></a></li>
            <li><a href="#chapter-3"><span>Asia</span></a></li>
            <li><a href="#chapter-4"><span>Europe</span></a></li>
          </ul>
          <div id="chapter-1">
              Africa
          </div>
          <div id="chapter-2">
              Americas
          </div>
          <div id="chapter-3">
              Asia
          </div>
          <div id="chapter-4">
              Europe
          </div>
        </div>
      </div>
      <div id="forums">
        {forums}
      </div>
    </div>

    <!-- /tabs-->
  </div><!-- /welcome block 40%-->
  <div class="yui3-u-1-4 media"><!-- movies, radio and events block 40%-->

        <!-- player widget-->
        <input value="" id="tmp_duration" type="hidden">
        <div id="jquery_jplayer_1" class="jp-jplayer">
          <img id="jp_poster_0">
        </div>
        <div id="jp_container_1" class="jp-video">
          <div class="jp-video-play">
            <a href="javascript:;" class="jp-video-play-icon" tabindex="1">play</a>
          </div>
          <div class="jp-type-playlist">
            <div class="jp-gui jp-interface">
                <div class="jp-progress">
                  <div class="jp-seek-bar">
                    <div class="jp-play-bar"></div>
                  </div>
                </div>
                <div id="panel"><!-- /id="panel" -->
                <div class="jp-current-time">00:05</div>
                <div class="jp-duration">00:33</div>
                <div class="jp-title"><ul><li>Item Title</li></ul>
                </div>
                <div class="jp-controls-holder"> <!-- class="jp-controls-holder" -->
                  <ul class="jp-controls">
                    <li><a href="javascript:;" class="jp-previous" tabindex="1">previous</a></li>
                    <li><a href="javascript:;" class="jp-play" style="display: block;" tabindex="1">play</a></li>
                    <li><a href="javascript:;" class="jp-pause" style="display: none;" tabindex="1">pause</a></li>
                    <li><a href="javascript:;" class="jp-next" tabindex="1">next</a></li>
                    <li><a href="javascript:;" class="jp-stop" tabindex="1">stop</a></li>
                    <li><a href="javascript:;" class="jp-mute" tabindex="1" title="mute">mute</a></li>
                    <li><a href="javascript:;" class="jp-unmute" tabindex="1" title="unmute" style="display: none;">unmute</a></li>
                    <li><a href="javascript:;" class="jp-volume-max" tabindex="1" title="max volume">max volume</a></li>
                  </ul>
                  <div class="jp-volume-bar">
                    <div class="jp-volume-bar-value" style="width: 80%; "></div>
                  </div>
                </div> <!-- /class="jp-controls-holder" -->
              </div> <!-- /id="panel" -->
            </div>
            <a href="#" class="btn-slide">Slide bar</a>
            <div id="tab" class="tabsBlock">
              <ul class="tabs">
                <li><a index="1" href="#tabs-1" title="tabs-1">Video</a></li>
                <li><a index="2" href="#tabs-2" title="tabs-2">Audio</a></li>
                <li><a index="3" href="#tabs-3" title="tabs-3">Films</a></li>
              </ul>
              <div index="1" class="jp-playlist">
                <div id="tabs-1" class="tab-item default">
                  <ul>
                    <li class="list">
                      <a href="javascript:;" title="unselect" m4v="http://www.archive.org/download/Zeitgeist.Addendum/Zeitgeist.Addendum_512kb.mp4" ogv="http://www.archive.org/download/Zeitgeist.Addendum/Zeitgeist.Addendum.ogv" poster="http://www.archive.org/download/Zeitgeist.Addendum/Zeitgeist.Addendum.thumbs/Zeitgeist.Addendum_000060.jpg" class="track">
                      Zeitgeist: Addendum (2008)</a>
                    </li>
                  </ul>
                </div>
              </div>
              <div index="2" class="jp-playlist" style="display: none;">
                <div id="tabs-2" class="tab-item" style="display: none;">
                  <ul>
                    <li class="list"><a mp="http://www.archive.org/download/TzmDevPhoenixMeeting12-04-2011/ts3_recording_11_12155E7A5.mp3" href="javascript:;" title="unselect" poster="/ui/core/resources/jplayer-default0.jpg" class="track" oga="http://www.archive.org/download/TzmDevPhoenixMeeting12-04-2011/ts3_recording_11_12155E7A5.ogg">TZM Dev Phoenix Meeting 12-04-2011</a></li>
                    <li class="list"><a mp="http://www.archive.org/download/TzmDevPhoenixMeeting12-11-2011/Tzm-dev-phx12-11-11.mp3" href="javascript:;" title="unselect" poster="/ui/core/resources/jplayer-default0.jpg" class="track" oga="http://www.archive.org/download/TzmDevPhoenixMeeting12-11-2011/Tzm-dev-phx12-11-11.ogg">TZM Dev Phoenix Meeting 12-11-2011</a></li>
                    <li class="list"><a mp="http://www.archive.org/download/TzmDevPhoenixMeeting01-01-2012/ts3_recording_12_01.mp3" href="javascript:;" title="unselect" poster="/ui/core/resources/jplayer-default0.jpg" class="track" oga="http://www.archive.org/download/TzmDevPhoenixMeeting01-01-2012/ts3_recording_12_01.ogg">TZM Dev Phoenix Meeting 01-01-2012</a></li> 
                  </ul>
                </div>
              </div>    
              <div index="3" class="jp-playlist" style="display: none;">    
                <div id="tabs-3" class="tab-item" style="display: none;">
                  <ul>
                    <li class="list"><a href="javascript:;" title="unselect" m4v="http://www.archive.org/download/ZeitgeistTheMovie/Zeitgeist_512kb.mp4" ogv="http://www.archive.org/download/ZeitgeistTheMovie/Zeitgeist.ogv" poster="http://www.archive.org/download/ZeitgeistTheMovie/Zeitgeist.gif" class="track">Zeitgeist</a></li>
                    <li class="list">
                      <a href="javascript:;" title="unselect" m4v="http://www.archive.org/download/Zeitgeist.Addendum/Zeitgeist.Addendum_512kb.mp4" ogv="http://www.archive.org/download/Zeitgeist.Addendum/Zeitgeist.Addendum.ogv" poster="http://www.archive.org/download/Zeitgeist.Addendum/Zeitgeist.Addendum.thumbs/Zeitgeist.Addendum_000060.jpg" class="track">
                      Zeitgeist: Addendum (2008)</a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
        </div>
    </div>
    <!-- /player widget-->

    <div class="yui3-g">
      <div class="yui3-u-1-3" id="watch-related-container">
         <!--  <iframe width="300px"height="200" src="http://www.youtube.com/embed/QYLLFpNn4lM" frameborder="0"></iframe> -->
             <ul id="watch-related" class="video-list">
               <!-- video-list-item -->
               <li class="video-list-item">
                 <a href="videos/video-item" class="video-list-item-link">
                   <span class="ux-thumb-wrap contains-addto">
                     <span class="video-thumb">
                       <span class="clip">
                         <img src="/ui/core/resources/jplayer-default1.jpg" alt="clip-title">
                         <span class="uix-button-content">
                           <span class="addto-label">Add to</span>
                         </span>
                       </span><!-- /clip-->
                       <span class="video-time">14:30</span>
                       <button class="addto-button video-actions" type="button">
                         <img src="/ui/core/resources/pixel.gif" class="uix-addto-button">
                       </button>
                       <span dir="ltr" class="title" title="Video Title">Video Title</span>
                       <span class="stat">
                         by <span dir="ltr" class="yt-user-name ">username</span>
                       </span><!-- /stat-->
                     </span><!-- /video-thumb-->
                   </span><!-- /ux-thumb-wrap contains-addto-->
                 </a>
               </li>
               <!-- /video-list-item -->
             </ul><!-- /watch-related .video-list-->
         </div><!-- /watch-related-container-->
      <div class="yui3-u-2-3">
        <img src="../../ui/icons/48x48/skin.png" border="0">

        events table
      </div><!-- /yui3-u-2-3-->
    </div><!-- /yui3-g-->
  </div><!-- /movies, radio and events block 40%-->
  <div class="yui3-u-1-4 chat"><!-- right side bar 20%-->
    <!-- START DYNAMIC CONTENT -->
    <iframe src="//www.facebook.com/plugins/likebox.php?href=https%3A%2F%2Fwww.facebook.com%2FTheZeitgeistMovement&amp;width=290&amp;height=290&amp;colorscheme=light&amp;show_faces=true&amp;border_color&amp;stream=false&amp;header=true&amp;appId=119920878043766" frameborder="0" allowTransparency="true" style="border:none; overflow:hidden; width:290px; height:290px;" scrolling="no"></iframe>
    <!-- <script src="http://connect.facebook.net/en_US/all.js#xfbml=1"></script>
    <fb:like-box href="http://www.facebook.com/zeitgeist" width="300" connections="15"></fb:like-box> 
     END DYNAMIC CONTENT -->
    <div class="listings items">
    <h3>Follow us on...</h3>
    <a href="http://www.facebook.com/" target="_blank"><img src="/ui/core/resources/facebook.png" width="48" height="48" border="0"></a>
    <a href="http://twitter.com/Zeitgeist" target="_blank"><img src="/ui/core/resources/twitter.png" width="48" height="48" border="0"></a>
    <a href="http://feeds.feedburner.com/TheZeitgeistMovement" target="_blank"><img src="/ui/core/resources/rss_icon_48.jpg" width="48" height="48" border="0"></a>
    <a href="http://www.youtube.com/user/TZMOfficialChannel" target="_blank"><img src="/ui/core/resources/youtube.png" width="48" height="48" border="0"></a> 
    </div> <!-- END DYNAMIC CONTENT -->
    <!-- I LIKE IT -->
    <div class="thumb-rating">
        <form method="post" action="you-know-you-like-it" class="disabled">
            <span class="thumbs-up">
                <input alt="Please log in to rate this product" value="Like" disabled="disabled" name="lovinit" class="allowMultiSubmit like-button" type="submit"></span>
            <span class="thumbs-down">
                <input value="Ugh" disabled="disabled" name="hatedit" class="allowMultiSubmit dislike-button" type="submit"></span>
        </form>
        <div class="like-summary">
            <span class="total-thumbs-up">
                <span class="tally-total">0</span> likes,
            </span>
            <span class="total-thumbs-down">
                <span class="tally-total">0</span> dislikes
            </span>

        </div>
        <div class="discreet login-to-rate">
            <a href="/;login" class="link-overlay">Log in</a> to rate.
        </div>
    </div>
    <div class="button">
    <ul>
        <li class="forum"><a href="/forum">Forum</a></li>
    </ul>
    </div>
    <!-- /I LIKE IT -->

    <script src="http://zmgc.net:29080/nowjs/now.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(function () {
            //submit new messages when the user hits enter if the message isnt blank

            now.receiveMessage = function (name, message, messagetime) {
                $("#messages").append(
                        '<li class="message"><div class="sent"><a href="/"><img width="24px" alt="name" height="24px"></a><div class="display-name">' + messagetime + '<div class="body">' + message + '</div></div></div></li>');
                document.getElementById("chat").scrollTop = document.getElementById("chat").scrollHeight;
            }
            $("#text-input").keypress(function (e) {
                if (e.keyCode != 13 /* Return */) return;
                now.distributeMessage($("#text-input").val());
                $("#text-input").attr("value", ""); // clear the entry field.
            });
            $("#send-button").click(function () {
                now.distributeMessage($("#text-input").val());
                $("#text-input").val("");
            });

            now.name = "";

        });

    </script>

        <div id="chat_window">
            <div id="chat_title"><h2>Simple Chat</h2></div>
            <div id="chat_container" style="display: block">
                <div id="chat">
                    <ul id="messages">
                        <li class="message notice" id="no_one_there">
                            Fix me, if there are no users!
                        </li>
                    </ul>
                </div>
            </div>
            <div id="chat-form">
                <input id="text-input" type="text">
        <input value="Send" id="send-button" type="button">
            </div>
        </div>

  <ul id="status">
      <li><a href="#" id="usersLink">5 users</a></li>
      <li><a href="#" id="usersLink">uptime: <span id="uptime">?</span></a></li>
      <li><a href="#" id="usersLink">memory: <span id="rss">?</span>mb RSS</a></li>
    </ul>

  </div><!-- /right side bar 20%-->
</div><!-- /content -->

    <!-- /all other templates go within this block -->
    </div>
  <!-- /body -->
</div><!-- /YUI3 grids-->
</div> <!-- /end of wrap-->
<div id="footer">
    <div class="yui3-g" id="upper-footer"><!-- upper-footer -->

  <div class="yui3-u-3-4 upper_footer">
      <h4 id="tzm">Zeigeist Links</h4>
      <ul class="footer_nav">
        <h4>Zeigeist</h4>
        <li>
          <a href="/;about">About</a>
        </li>
        <li>
          <a href="/blog">Blog</a>
        </li>
        <li>
          <a href="/;contact">Contact &amp; Support</a>
        </li>
        <li>
          <a href="/training">Training</a>
        </li>
        <li>
          <a href="#">Site Status</a>
        </li>
      </ul>
      <ul class="footer_nav">
        <h4>Tools</h4>
        <li>
          <a href="/;create">Chapter Generator</a>
        </li>
        <li>
          <a href="#">Activies Board</a>
        </li>
      </ul>
      <ul class="footer_nav">
        <h4>Documentation</h4>
        <li>
          <a href="#">Chapter Sites</a>
        </li>
        <li>
          <a href="#">Developers</a>
        </li>
      </ul>
      <ul class="footer_nav">
        <h4>External Links</h4>
        <li>
          <a href="#">News</a>
        </li>
        <li>
          <a href="#">Media</a>
        </li>
      </ul>
  </div><!-- /yui3-u-3-4 -->
  <div id="worldmap" class="yui3-u-1-4"></div>

    </div><!-- /upper-footer -->
    <div id="lower-footer">
          <ul>
            <li class="space">
              <h1 title="Welcome - Zeitgeist Movement Global Connect">
                <a href="/" title="Welcome - Zeitgeist Movement Global Connect">
                  striving for a better future since 2008</a>
                </h1>
              </li>
              <li><a href="/;about">About</a></li>
              <li><a href="/;more">More</a></li>

              <li><a href="/;login_form">(not logged in)</a></li>

          </ul>
    </div><!-- /lower-footer -->
</div><!-- /footer -->
<!--[if !IE 7]>
    <style type="text/css">
        #wrap {display:table;height:100%}
    </style>
<![endif]-->
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T19:27:30.840

我看到你只想做这个 CSS，好吧，你可以，但它有它的缺点。让我们从一个如何使用 html/css 完成的简单示例开始。

[http://jsfiddle.net/sg3s/hkTaZ/](http://jsfiddle.net/sg3s/hkTaZ/)

这不使用JS。

**编辑：**

对于您提供的链接中的聊天框，您需要添加以下样式：

```
#chat {
    overflow: hidden;
    position: relative;
}

#messages {
    position: absolute;
    bottom: 0;
} 
```

但是，当你想滚动到顶部时，你必须实现一些东西才能滚动到顶部。那将需要一些 JS 来操作内容的底部属性。

您指向的库**确实**使用了 jQuery，尽管它不是很明显，因此您可以使用 jQuery 来实现此功能。

尽管看到您已经使用 JS，但每次将消息附加到聊天中时，滚动到底部会更容易，就像@jams 回答一样。

**编辑：**

看到您当前的实现使用 javascript，我建议您在每次将消息添加到`#messages`列表时都使用 @jams 建议滚动到底部。

# ruby-on-rails - 初学者 Rails 3：我在做这个“创建”方法对吗？

> ID：10374807
> 
> 赞同：0
> 
> 时间：2012-04-29T18:34:21.470
> 
> 标签：ruby-on-rails

我有一个`Product`模型`belongs_to`a`User`和 to a `Category`。在`new`产品表单中，我只有名称（文本）、类别（选择）和价格（文本）字段。

这就是我为类别创建选择字段的方式`products/new.html.haml`：

```
= f.collection_select :category, Category.all, :id, :name 
```

在`ProductsController`，我想我只需要这样做：

```
def create
  @product = Product.new(params[:product])
  if @product.save
    # do something
  else
    render 'new'
  end
end 
```

但我最终需要添加代码来加载 Category 对象并将价格的货币表示（取决于区域设置）转换为十进制。所以这就是我的工作：

```
def create
  params[:product][:category] = Category.find(params[:product][:category])
  # to_decimal is declared as a private method in ProductsController
  # and returns a decimal number or nil if the price is invalid
  params[:product][:price] = to_decimal(params[:product][:price])
  @product = Product.new(params[:product])
  if @product.save
    # do something
  else
    render 'new'
  end
end 
```

所以我的问题是：

**1)**有没有办法让 Rails 自动加载类别？

**2）**我是否正确地“格式化”了价格？看起来它应该在模型中，但我无法让它通过控制器工作。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T19:45:57.130

Rails 约定中有一条规则称为`skinny controller - fat model`.

您不需要任何转换为​​十进制，请考虑向您的模型添加验证：

```
validates :price, :numericality => true, :presence => true 
```

这意味着您的价格必须是一个数字并且不能为空。

品类呢？将字段添加`category_id`到您的`Product`表中，并在模型中放置：

```
# product.rb
belongs_to :category
# category.rb
has_many :products 
```

请向我们展示您的表格，并将此页面作为您的朋友记住：http: [//guides.rubyonrails.org/](http://guides.rubyonrails.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T19:31:26.653

我认为您的产品表需要一个名为“category_id”的列（整数）。这样，您的选择应该在没有额外的控制器代码的情况下工作。至于价格，应该有一种方法可以从 params 哈希中接受小数，但我认为我需要查看您的表格。

# c# - 如何使用 C# 连接到 MS Access 文件 (mdb)？

> ID：10374808
> 
> 赞同：16
> 
> 时间：2012-04-29T18:34:31.253
> 
> 标签：c#, ms-access, oledb

我正在尝试连接到 mdb 文件，并且我知道我需要`Microsoft.OLEDB.JET.4.0`数据提供程序。不幸的是，我没有在（大学）机器上安装它。由于他们不提供该提供商，我相信应该有办法解决。

如何在没有`Microsoft.OLEDB.JET.4.0`或有任何替代方法的情况下连接到文件？

我有以下提供者：

![可用的 Ole DB 提供程序](../Images/40e2db8ecfc1e3ef460148d995f6e084.png)

我尝试使用`OLE DB Provider for Microsoft Directory Services`，在测试连接时，我得到“测试成功，但提供者不接受某些设置”。无论如何，我拿了那个字符串并使用它，我得到了`ADsDSOObject' failed with no error message available, result code: DB_E_ERRORSINCOMMAND(0x80040E14)`.

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-29T19:25:44.490

最简单的连接方式是使用像这样的代码通过 OdbcConnection

```
using System.Data.Odbc;

using(OdbcConnection myConnection = new OdbcConnection())
{
    myConnection.ConnectionString = myConnectionString;
    myConnection.Open();

    //execute queries, etc

} 
```

myConnectionString 是这样的

```
myConnectionString = @"Driver={Microsoft Access Driver (*.mdb)};" + 
"Dbq=C:\mydatabase.mdb;Uid=Admin;Pwd=; 
```

请参阅[连接字符串](http://www.connectionstrings.com/access-2007)

或者，您可以创建一个 DSN，然后在连接字符串中使用该 DSN

*   打开控制面板 - 管理工具 - ODBC 数据源管理器
*   转到系统 DSN 页面并添加新的 DSN
*   选择 Microsoft Access 驱动程序 (*.mdb) 并按 END
*   设置 DSN 的名称（在此示例中选择 MyDSN）
*   选择要使用的数据库
*   尝试使用 Compact 或 Recover 命令查看连接是否正常

现在你的 connectionString 可以这样写

```
myConnectionString = "DSN=myDSN;" 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-04-23T19:56:28.283

以下是使用 Jet OLEDB 或 Ace OLEDB Access DB 的方法：

```
using System.Data;
using System.Data.OleDb;

string myConnectionString = @"Provider=Microsoft.Jet.OLEDB.4.0;" +
                           "Data Source=C:\myPath\myFile.mdb;" +                                    
                           "Persist Security Info=True;" +
                           "Jet OLEDB:Database Password=myPassword;";
try
{
    // Open OleDb Connection
    OleDbConnection myConnection = new OleDbConnection();
    myConnection.ConnectionString = myConnectionString;
    myConnection.Open();

    // Execute Queries
    OleDbCommand cmd = myConnection.CreateCommand();
    cmd.CommandText = "SELECT * FROM `myTable`";
    OleDbDataReader reader = cmd.ExecuteReader(CommandBehavior.CloseConnection); // close conn after complete

    // Load the result into a DataTable
    DataTable myDataTable = new DataTable();
    myDataTable.Load(reader);
}
catch (Exception ex)
{
    Console.WriteLine("OLEDB Connection FAILED: " + ex.Message);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-29T18:44:11.983

您应该使用“Microsoft OLE DB Provider for ODBC Drivers”来访问 Microsoft Access。这是使用它的示例教程

[http://msdn.microsoft.com/en-us/library/aa288452(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa288452(v=vs.71).aspx)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-08-29T10:20:38.323

什么访问文件扩展名或您使用？Jet OLEDB 或 Ace OLEDB。如果您的 Access DB 是 .mdb（又名 Jet Oledb）

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data.Oledb

namespace MembershipInformationSystem.Helpers
{
    public class dbs
    {
        private String connectionString;
        private String OleDBProvider = "Microsoft.JET.OLEDB.4.0"; \\if ACE Microsoft.ACE.OLEDB.12.0
        private String OleDBDataSource = "C:\\yourdb.mdb";
        private String OleDBPassword = "infosys";
        private String PersistSecurityInfo = "False";

        public dbs()
        {

        }

        public dbs(String connectionString)
        {
            this.connectionString = connectionString;
        }

        public String konek()
        {
            connectionString = "Provider=" + OleDBProvider + ";Data Source=" + OleDBDataSource + ";JET OLEDB:Database Password=" + OleDBPassword + ";Persist Security Info=" + PersistSecurityInfo + "";
            return connectionString;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-29T19:25:16.487

试试这个..

```
using System.Data.OleDb;

OleDbConnection dbConn;

dConn = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=Registration.accdb;"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-28T16:45:08.983

另一种最简单的连接方式是通过**OdbcConnection**使用**App.config**文件，如下所示

```
 <appSettings>  
    <add key="Conn" value="Provider=Microsoft.Jet.OLEDB.4.0;Data Source=|DataDirectory|MyDB.mdb;Persist Security Info=True"/>
  </appSettings> 
```

MyDB.mdb 是我的数据库文件，它与主 exe 文件一起存在于当前主应用程序文件夹中。

如果您的 mdf 文件有密码，则像这样使用

```
 <appSettings>
    <add key="Conn" value="Provider=Microsoft.Jet.OLEDB.4.0;Data Source=|DataDirectory|MyDB.mdb;Persist Security Info=True;Jet OLEDB:Database Password=Admin$@123"/>
  </appSettings> 
```

# regex - 使用 -replace 过滤

> ID：10374809
> 
> 赞同：1
> 
> 时间：2012-04-29T18:34:38.250
> 
> 标签：regex, powershell, replace

我正在努力解决问题`-replace`。有谁能够帮我？

作为练习，我试图简单地过滤：

```
@{processName=chrome} 
```

所以它`chrome`返回到我试图将其输出到的列表框。

到目前为止，我有：

```
$processnames = Get-Process | select ProcessName | -replace '^@{processname=','' 
```

我知道我做错了什么，有人可以指出我正确的方向并解释为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T19:57:46.943

试试这个没有最后的进程名称`}`：

```
$Processnames = Get-Process | Select ProcessName | foreach { $_ -replace '^@{processname=(.*)}' , '$1' } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T20:03:01.493

您可以在不使用替换操作的情况下获取进程名称：

```
Get-Process | Select-Object -ExpandProperty Name 
```

要获得 chrome 进程：

```
Get-Process chrome | Select-Object -ExpandProperty Name 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T19:42:20.320

使用 -replace 需要您将对象传递给它。因此，为了让您的命令正常工作：

```
 $Processnames = Get-Process | Select ProcessName | 
   foreach {$_ -replace '^@{processname=',''} 
```

请记住，当您将多个对象传递到管道中以进行操作时，您必须将它们传递到一个`foreach`循环中。你是在告诉它我想要获取`$_`价值并寻找`^@processname=`并替换它`blank`

# asp.net-mvc-3 - 如何在 ASP.NET MVC 3 (Razor) 中将值从视图传递到控制器？

> ID：10374812
> 
> 赞同：0
> 
> 时间：2012-04-29T18:34:52.227
> 
> 标签：asp.net-mvc-3, razor

我在数据库中有这个表：

[http://i.stack.imgur.com/C7CWX.png](http://i.stack.imgur.com/C7CWX.png)

我通过此代码（视图）显示“音乐”中的所有价值，而无需重复：

```
@foreach (var item in Model.Select(m => m.music).Distinct())
{
    <tr>
        <td>
            @Html.ActionLink(item, "Deep", ViewData["item"])
        </td>
    </tr>
} 
```

结果：

```
Jazz
Disko
Rock
Metal 
```

我想当我按下“Jazz”时，结果是“Miles”、“Kirk”等。怎么办？我想我可以将值从 View 传递给 Controller，但我不知道在我的情况下如何做。请帮我

控制器中的操作（例如）：

```
 public ActionResult Deep(string music)
    {

        var res = (from m in d.table where m.music == music select m);
        return View(res);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T18:51:43.757

无法将值从视图直接传递到控制器。当用户向 Web 服务器询问您的初始页面时，Web 服务器 (ASP.NET) 会计算出要调用的操作。该操作收集数据并将该数据（使用视图模型、ViewBag、ViewData 或 TempData）发送到视图以进行渲染。在这种情况下，渲染是将您的数据转换为 HTML（可以是任何真正的 CSS、JavaScript ......将其视为字节数组）发送到将其解释为网页的客户端（浏览器）的过程。用户看到你的链接，当他点击它时，他会向网络服务器发出新的请求，这个过程会重复。

您正在为以下链接创建代码：@Html.ActionLink(item, "Deep", ViewData["item"])

第一个参数项是链接文本。“Deep”是在当前控制器上调用的动作名称。第三个参数是对象类型。第三个参数应该与 Deep 操作中的参数类型相同，并且您应该使用下一个表示法来传递数据

@Html.ActionLink(item, "Deep", new { idItem = item.IdMusic, foo = "bar" })

在前面的示例中，ASP MVC 期望您的“深度”操作具有参数 idItem 和 foo。

需要注意的一件事是客户端/用户正在向 Web 服务器发出请求，他无法像您尝试的那样发送对象。相反，您发送对象的唯一标识符（idMusic）并根据数据库/缓存/会话的请求检索它。

希望这会有所帮助，兹拉蒂博尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T18:40:16.263

您的 Actionlink 并没有完全按照您的意愿行事。如果您将鼠标悬停在生成的链接上，我认为每个链接都会命名一个不同的控制器！

[http://msdn.microsoft.com/en-us/library/dd505070.aspx](http://msdn.microsoft.com/en-us/library/dd505070.aspx)

而是看这个版本

[http://msdn.microsoft.com/en-us/library/dd493066.aspx](http://msdn.microsoft.com/en-us/library/dd493066.aspx)

```
@Html.ActionLink(item, "Deep", "YourController", new {id= ViewData["item"]}) 
```

和一个控制器动作，比如

```
public ActionResult Deep(int id)
{
  //Do something
} 
```

# perl - 比较两个文本文件并返回对应的值

> ID：10374815
> 
> 赞同：-1
> 
> 时间：2012-04-29T18:35:19.697
> 
> 标签：perl

我有两个文件...第一个是包含 ids 的 .txt 文件...

```
245406
12432
2343576
213543
Ouad1234
evm.1234 
```

第二个文件在第一列中包含文本，在第二列中包含 ids。有什么方法可以比较两个 id，找到匹配项并在第一列中返回相应的文本？

```
AUX    2398432
AUL    245406 
```

所以当我解析这两个文件时，脚本应该匹配`245406`并返回相应的 text `AUL`。

这是我到目前为止所拥有的：

```
open FH_TF_IDS, "<$ARGV[0]" or die $!; 
while (<FH_TF_IDS>) {
    chomp; 
    @fields=split("\t",$_);
    $hash{$fields[1]}=$fields[0];
} 
close FH_TF_IDS;

open IDS, "<$ARGV[1]" or die $!;
@ids=<IDS>; 
close IDS; 

foreach $id (@ids){ 
    $hash_count{$hash{$id}}++;
} 

foreach $family (sort (keys %hash_count)) {
    print "$family\t$hash_count{$family}\n";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T03:42:16.397

用户1364517,

我认为您在尝试解决问题方面做得很好。但是，我看到了两个问题。

1.  添加`chomp @ids;`after`close IDS;`以删除每个数组元素末尾的 \n。
2.  更改`$hash_count{$hash{$id}}++;`为`$hash_count{$hash{$id}} = $id if $hash{$id};`

这些微小的变化将使您的程序能够工作。

这是一个更“hacky”（当然不那么惯用）的解决方案——只是为了好玩：

```
use strict;
use warnings;

my %hash;

{open my $file, "<$ARGV[0]" or die $!;
$hash{$2} = $1 while <$file> =~ /(.*)\t(.*)/;}

{open my $file, "<$ARGV[1]" or die $!;
map{print "$hash{$_}\t$_\n"}sort{$hash{$a} cmp $hash{$b}}
grep{$hash{$_}}map{s/\n\z//r}<$file>;} 
```

使用块以便在`my $file`超出范围时关闭文件。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T16:07:35.920

尝试这个...

```
 #!/usr/bin/perl
    use Data::Dumper;

    open a1, "<$ARGV[0]";
    while(<a1>) {
        my @a = split " ", $_;

        open b1, "<$ARGV[1]";
        while(<b1>) {
            my @b = split "\n", $_;
            my @test = (split " ", $b[0]);
            if($test[1] == $a[0]) {
                print $test[0]."\n";
            }
        }
        close b1;
    } 
```

在终端中输入以下命令

```
 perl test.pl a.txt b.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-23T19:27:59.613

几个建议：

*   拿起一本关于[Modern Perl](http://modernperl.net)的书。Perl 是一门充满蹩脚的古老语言。自 1980 年代首次出现以来，您使用 Perl 编程的方式已经发生了多年的变化。不幸的是，太多人从 Perl 5.0 之前的网站上学习 Perl。
*   在你的程序中使用`use strict;`和。`use warnings;`这将捕获您的大部分编程错误。
*   不要依赖`$_`。它是全球性的，可能会导致问题。`for (@people) {`看起来很整洁，但最好这样做`for my $person ( @people )`。
*   `/../`在`split`和`'...'`中使用`join`。
*   使用*变量*作为文件句柄。它们更容易传递给子程序：

这是你的程序：

我用更现代的风格重写了你的程序，它和你所拥有的差不多。我做了一些错误检查，但除此之外，它可以工作：

```
use strict;
use warnings;
use feature qw(say);  # Nicer that print.
use autodie;          # Will automatically die on open and close errors

if ( @ARGV < 2 ) {
    die qq(Not enough arguments);
}

my $tf_id_file = shift;   # Use variable names and not `@ARGV` directly
my $id_file    = shift;   # Makes your program easier to understand 

open my $tf_ids_fh, "<", $tf_id_file;

my %hash;                # Not a good name for the variable, but that's what you had.
while ( my $line = <$tf_ids_fh> ) {
    chomp $line;         # Always chomp after a read
    my ( $text, $id ) = split /\s+/, $line;  # Use variable names, not @fields
    if ( not defined $id ) {           # Error checking
        die qq(Missing id field in line $. of tf_ids file);
    }
    $hash{$text} = $id;
}
close $tf_ids_fh;

open my $ids_fh, "<", $id_file;
my @ids = <$ids_fh>;
chomp @ids;
close $ids_fh;

my %totals;
for my $id ( @ids ) {
    if ( not exists $totals{ $hash{$id} } ) {   #Initialize hash before adding to it
        $totals{ $hash{$id} } = 0;
    }
    $totals{ $hash{$id} }++;
}

for my $family ( sort keys %totals ) {
    printf "%10.10s %4d\n", $family, $totals{$family};
} 
```

我使用[printf](http://perldoc.perl.org/functions/printf.html)来格式化你的打印输出，它比普通的要好一些`print`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T23:10:05.410

我了解您是该语言的初学者。有些东西可以帮助您调试程序。

在脚本的顶部“使用 Data::Dumper;”

一旦你这样做了，你就可以输入像 print Dumper( $hash ) 和 print Dumper( $hash_count ) 这样的语句，这两个语句应该可以让你看到你程序中的错误。

作为旁注，通过 perl -d 运行它也是一种选择，如果您要继续使用该语言，您绝对应该学习。

# c++ - OpenCV如何写入RGB图像

> ID：10374817
> 
> 赞同：6
> 
> 时间：2012-04-29T18:35:34.560
> 
> 标签：c++, opencv

如何`RGB`使用该功能编写图像`cv::imwrite()`？到目前为止，我所有的尝试都导致改为编写`BGR`图像。

我的矩阵对象是一个`cv::Mat`.

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-29T21:32:47.867

如果输入按 BGR 顺序（如果您让 OpenCV 创建它就是这种情况），该`cv::imwrite()`函数会正确写入图像文件。`cv::Mat`如果您自己创建了图像，则必须先转换颜色顺序，例如，`cv::cvtColor(in, out, CV_RGB2BGR);`如果您创建了 RGB 图像，则按照竹子的建议调用。

（注意颜色转换码，和竹子的略有不同。）

# sql-server-2008 - 两个 SQL Azure 数据库的 EF 错误 - 部分方法可能没有多个定义声明

> ID：10374819
> 
> 赞同：0
> 
> 时间：2012-04-29T18:35:41.633
> 
> 标签：sql-server-2008, entity-framework, entity-framework-4, azure-sql-database

将两个不同的 SQL Azure 数据库添加到我的解决方案 - DB1.edmx 和 DB2.edmx。它们具有不同的连接字符串和初始化的对象上下文。数据库没有任何通用的表名。但是，在编译期间它返回错误“部分方法可能没有多个定义声明实体框架”。这是由于 SQL Azure 数据库中常见的一些表（federation_distribution_history、federation_member_distribution_history 等）。

解决这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T07:09:04.580

正如 GertArnold 所指出的，请使用两个不同的命名空间。即使名称相同，不同命名空间中的类也被认为是不同的。您可以参考[http://msdn.microsoft.com/en-US/library/z2kcy19k(v=vs.100).aspx](http://msdn.microsoft.com/en-US/library/z2kcy19k(v=vs.100).aspx)了解更多信息。

此致，

明旭。

# ruby-on-rails - 使用 twitter 设计/omniauth 登录 - 验证失败：电子邮件不能为空

> ID：10374827
> 
> 赞同：6
> 
> 时间：2012-04-29T18:36:33.047
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, omniauth, twitter-oauth

[按照本教程](http://railscasts.com/episodes/209-introducing-devise?view=asciicast)，我已经使用 devise 在 rails 应用程序中设置了身份验证。效果很好，用户可以注册，然后使用电子邮件和密码登录。

我现在想添加使用 twitter 注册/登录的功能。我正在遵循[设计 wiki中的指南](https://github.com/plataformatec/devise/wiki/OmniAuth%3a-Overview)

wiki 中的示例使用 facebook，我已将其更改为使用 twitter。它设法去推特并请求授权，所以我确信我有基础工作。但是，一旦它返回到我的应用程序，我就会收到以下错误。

```
Validation failed: Email can't be blank 
```

我想这是因为我没有提供电子邮件地址。

我使用的代码与教程中的代码相同（除了将 facebook 交换到 twitter），所以我没有发布任何示例。如果你想看什么，请告诉我。

我对rails很陌生，所以我不确定如何调试。关于我应该如何继续的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T21:22:47.683

嘿，只需从用户模型中删除“：validatable”，它将允许空白电子邮件。为我工作！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-19T15:46:02.307

我知道这个问题很老，但它仍然出现，快速的谷歌搜索发现了一些非常糟糕的建议。所以在这里...

使电子邮件成为可选的正确方法不是从用户模型中删除可验证的接口，而是将其添加到其中：

```
def email_required?
  false
end 
```

这会覆盖 'validatable' 类中的方法，向代码表明 email 是一个可选字段，但保留所有可验证的内容，例如，你知道......确保你有一个实际的密码并且方便像这样的东西。*你想保留的东西。*

当然，如果您需要任何真正古怪的东西，您应该查看可验证接口的源代码并复制相关验证并根据需要进行调整，但对于 99.99% 的人来说，我上面提供的代码可能是足够的。

希望对疲惫的谷歌用户有所帮助。

# javascript - 使用 JavaScript，从文本文件更改下拉列表中的填充复选框

> ID：10374828
> 
> 赞同：0
> 
> 时间：2012-04-29T18:36:41.057
> 
> 标签：javascript

我有一个名为 rcc 的下拉列表和一些复选框组。这是它的 HTML 代码。

```
<select id="rcc" name="rcc">
    <option value="Select Your Name">Select Your Name</option>
    <option value="p1">Person 1/option>
    <option value="p2">Person 2</option>
    <option value="p3">Person 3</option>                    
</select>

<input type="checkbox" name="time1[]" value="8:00am"/>8:00am
<input type="checkbox" name="time1[]" value="8:20am"/>8:20am
<input type="checkbox" name="time2[]" value="8:40am"/>8:40am
<input type="checkbox" name="time2[]" value="9:00am"/>9:00am
<input type="checkbox" name="time3[]" value="9:20am"/>9:20am
<input type="checkbox" name="time4[]" value="9:40am"/>9:40am 
```

我还生成了一个文本文件，其中包含当有人在下拉列表中选择其他人时我想要选择的时间。例如，如果我选择 Person 1，我想打开 p1times.txt，它看起来像：

```
time1
8:00am
time2
8:40am
9:00am
time4
9:40am 
```

然后运行一个脚本，该脚本会自动填充页面上的相应复选框。我正在考虑遍历文本文件，但我不确定逻辑将如何工作。任何帮助都会很棒:)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T20:09:48.290

我在[http://jsfiddle.net/RHUdR/1](http://jsfiddle.net/RHUdR/1)发布了一个示例。我建议将您的时间存储为 JSON。如果您想将它们放在不同的文件中，只需将该文件包含在您的 html 中，就像任何其他脚本文件一样。

数据：

```
var people = {
    p1: { time1: [ '8:00am', '8:20am'], time4: ['9:40am'] },
    p2: { time2: [ '8:40am'], time3: ['9:20am'] },
    p3: { time1: [ '8:00am'], time2: ['9:00am'], time4: ['9:40am' ]}    
}; 
```

和一个小 jquery 来设置值：

```
$('#rcc').change(function() {
    var person = $(this).val();
    var times = people[person] || [];

    $('input[type="checkbox"]').attr('checked', false);
    for (var name in times) {
        var bucket = times[name];
        for(var i = 0, len = bucket.length; i < len; i++ ) {
            $('input[name="' + name + '"][value="' + bucket[i] + '"]')
                .attr('checked', true);
        }
    }        
}); 
```

# php - 如何将结果从一个表消除到另一个表？

> ID：10374829
> 
> 赞同：2
> 
> 时间：2012-04-29T18:36:41.633
> 
> 标签：php, mysql

我知道标题真的很荒谬。我找不到如何描述这一点。

这是我的表结构 ![在此处输入图像描述](../Images/37f4b42dac930a563b58d81dbd86ef2e.png)

这是一个汽车租赁网页。我正在做的是我试图弄清楚一辆车是否被预订，特别是“pickup_date”和“dropoff_date”。我可以通过此查询获得预订的汽车

```
SELECT
cars.model,
reservations.pickup_date,
reservations.dropoff_date,
reservations.car_id
FROM
cars
INNER JOIN reservations ON cars.car_id = reservations.car_id
WHERE
reservations.pickup_date <= '2012-04-08 10:50:26' OR
reservations.dropoff_date >= '2012-04-20 10:50:26' 
```

但是，有一些汽车没有被预订并且它们没有显示在这个查询中，因为我没有预订所有车型。我把它们放在汽车桌子上。

最重要的是，我应该从包含所有汽车型号的表中消除从该查询中获得的那些。因此，我将拥有未预订的汽车 + 在预订日期之后可用的汽车。

**它会得到我从查询中得到的结果，并从*汽车*表中消除这个结果。之后它会告诉我。**

我可以用 PHP 做到这一点。但是，我想了解是否可以使用 mysql 进行一次查询。

这是我在@cbuckley 的帮助下提出的解决方案

```
SELECT
cars.*
FROM cars
LEFT JOIN (
    SELECT
    cars.car_id
    FROM
    cars
    INNER JOIN reservations
    ON cars.car_id = reservations.car_id
    WHERE
    (reservations.pickup_date <= '2012-04-08 10:50:26' AND reservations.dropoff_date >= '2012-04-20 10:50:26') OR
    (reservations.pickup_date >= '2012-04-08 10:50:26' AND reservations.pickup_date <= '2012-04-20 10:50:26') OR
    (reservations.dropoff_date <= '2012-04-20 10:50:26' AND reservations.dropoff_date >= '2012-04-08 10:50:26')
) AS reserved_cars
ON reserved_cars.car_id = cars.car_id
WHERE reserved_cars.car_id IS NULL; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T18:40:16.117

使用左连接而不是内连接

```
SELECT
cars.model,
reservations.pickup_date,
reservations.dropoff_date,
reservations.car_id
FROM
cars
LEFT JOIN reservations ON cars.car_id = reservations.car_id
WHERE
reservations.pickup_date <= '2012-04-08 10:50:26' OR
reservations.dropoff_date >= '2012-04-20 10:50:26' 
```

它也会给你所有尚未预订的汽车

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T19:05:08.300

您需要小心区分*在给定时间没有预订的汽车和在给定时间*以外*的时间有预订的汽车*。前者是你所追求的，可以通过一个`WHERE NOT IN`子句来实现。但是，随着您的汽车和预订系统的发展，这可能会变得非常缓慢。我建议如下：

```
SELECT
cars.*
FROM cars
LEFT JOIN (
    SELECT
    cars.car_id
    FROM
    cars
    INNER JOIN reservations
    ON cars.car_id = reservations.car_id
    WHERE
    reservations.pickup_date <= '2012-04-08 10:50:26' OR
    reservations.dropoff_date >= '2012-04-20 10:50:26'
) AS reserved_cars
ON reserved_cars.car_id = cars.car_id
WHERE reserved_cars.car_id IS NULL; 
```

内部查询是您指定的用于查找所有预留汽车的查询。然后，您将其连接回`cars`表以查找内部查询未返回的所有汽车。这是有效的，因为您对子查询执行 a`LEFT JOIN`并且只返回在子查询中没有匹配的行。

**编辑**：如果您希望查询查找在给定时间段内可用的所有汽车，您的内部查询需要搜索在该时间段内开始或结束的预订。因此，您将使用以下条件：

```
... WHERE
reservations.pickup_date  BETWEEN '2012-04-08 10:50:26' AND '2012-04-20 10:50:26' OR
reservations.dropoff_date BETWEEN '2012-04-08 10:50:26' AND '2012-04-20 10:50:26' 
```

# jquery - 如何从 JQuery Ajax 调用中更新 2 个文本框

> ID：10374832
> 
> 赞同：0
> 
> 时间：2012-04-29T18:36:59.147
> 
> 标签：jquery, ajax, json, return-value

自动完成列表用户选择成功后，我进行 Ajax 调用以填写一些值。我现在失去了情节，我想利用返回的 json 值。

有人可以向我解释我应该如何处理返回值和更新文本框。谢谢。

```
$("#txtProductName").autocomplete({
    source: "_ajprodlist.php",
    minLength: 2,
    select: function(event, ui) {
            $('#txtProductId').val(ui.item.id);
            var custid = $('#txtClientId').val();
            var postData = "prodid="+(ui.item.id)+"&custid="+custid;
            $.ajax({ type: "GET",
                    url: "_ajcustprice.php",
                    data: postData,
                    dataType: 'text',
                    success : function(data) {
                    // alert(data); returns values Ok
                    // [{"custid":"12","custprice":"500","lastqty":"20"}]
                    $("#txtClientPrice").val(data.custprice);    // **** not right
                    $("#txtLastQty").val(data.lastqty);          // **** is it !!!
                    },
                    complete : function() { alert('Complete: Do something.'); },
                    error : function() {alert('Error: Do something.'); }
              });
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T18:39:34.420

> 我想利用返回的 json 值。

那你为什么期待一个`text`？（`dataType: 'text'`而不是`json`）

**固定代码：**

```
$.ajax({
    type: "GET",
    url: "_ajcustprice.php",
    data: postData,
    dataType: 'json',  // <======= instead of 'text' 
    success: function(data) {
        $("#txtClientPrice").val(data.custprice);
        $("#txtLastQty").val(data.lastqty);
    },
    complete: function() {
        alert('Complete: Do something.');
    },
    error: function() {
        alert('Error: Do something.');
    }
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T19:17:14.810

返回的数据是一个带有 on 元素的数组，因此您需要执行以下操作：

```
$("#txtClientPrice").val(data[0].custprice); 
$("#txtLastQty").val(data[0].lastqty); 
```

当然假设您已经按照@gdoron 的建议更正了数据类型

# php - Twitter Bootstrap - 登录/注册/用户管理脚本

> ID：10374833
> 
> 赞同：1
> 
> 时间：2012-04-29T18:36:59.927
> 
> 标签：php, login, twitter-bootstrap

我正在为我的新网站使用 Twitter Bootstrap。我已阅读有关如何获得正确样式的有效登录框的教程。

我应该使用哪个登录脚本，或者我应该自己编写一个？我知道一些 PHP，但不确定哪个具有至少一些基本用户管理的登录脚本是最好的？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T06:39:09.477

2013 年 19 月 3 日更新：

*   修复了断开的链接，添加了新的示例页面。
*   添加了关于 SQL 漏洞/PDO 的提及。

* * *

Bootstrap 提供了一个带有相关 JavaScript 的 CSS 框架。它不处理服务器端代码，你需要自己做。

我最近在 PHP 中做了和你一样的事情，我发现以下两个链接很有用，解释清楚，简单易懂，非常适合初学者。将两者结合起来，您将拥有所需的一切。

[BuildInternet.com 的基本 PHP 后端设置，包括登录、会话管理等](http://buildinternet.com/2009/12/creating-your-first-php-application-part-1/)包括：

1.  设置项目，创建 OO 数据库类。
2.  构建后端、用户类、用户工具、登录/注销、注册。
3.  构建前端、表单、表单处理、显示会话数据。

[使用 Twitter Bootstrap 的简单注册页面](http://www.9lessons.info/2012/04/bootstrap-registration-form-tutorial.html)包含：

1.  [演示页面。](http://demos.9lessons.info/bootstrap/form.php)
2.  注册页面的基本标记。
3.  一点自定义 CSS。

**数据库安全注意事项**

BuildInternet.com 的上述教程使用标准的 mysql_* 函数。这些很容易受到攻击并且已被弃用。一旦您了解了您的登录页面，您应该使用[PDO](http://www.phpro.org/tutorials/Introduction-to-PHP-PDO.html)保护您的数据库功能。

享受！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-23T17:06:03.977

如果你愿意，我有一个建议，我在 codeigntier HMVC 中构建了一个很好的 php 脚本。可用作任何新项目的 kickstarter。它具有登录、注册、用户管理、权限、电子邮件模板、安装程序和许多令人兴奋的功能。愿它帮助你

[http://www.webprojectbuilder.com/item/user-login-and-management](http://www.webprojectbuilder.com/item/user-login-and-management)

# jquery - 关闭这个花哨的盒子并打开那个花哨的盒子

> ID：10374838
> 
> 赞同：0
> 
> 时间：2012-04-29T18:37:11.267
> 
> 标签：jquery, fancybox

我正在尝试制作一个脚本，允许我打开一个精美的盒子，并在关闭该盒子时打开一个新的精美盒子或淡入...

当我点击下面的链接时，它会打开包含视频的fancybox，当我关闭它时，它会打开当我点击演示链接时出现的fancybox。

```
<a id="various2" href="#divVideo" class="fl ml20"><img src="images/sites/img2.png" alt="" class="fl mr10" /></a> 
```

演示：当我单击以下链接时，它会打开一个带有一些演示信息的花式框。

```
<LI><A class="demo" id="example4" href="#demoView">Demo</A></LI> 
```

## 以下是我的一段代码，但我不知道为什么它的封闭部分没有打开另一个fancybox。请帮助.......

```
jQuery(document).ready(function() {     

        $("a#example4").fancybox({
                'opacity'       : true,
                'overlayShow'   : false,
                'transitionIn'  : 'elastic',
                'transitionOut' : 'none'
            });

        $("#various2").fancybox({
            'opacity'       : true,
                'overlayShow'   : false,
                'transitionIn'  : 'elastic',
                'transitionOut' : 'none',

                'onClosed'  :   function() {
                            $('#faier').fadeIn(10);

                },
                'onStart'       :   function() {
                                            document.getElementById('iframe-video');

                            //alert("hi");
                            //$('#banner-rotator').royalSlider({slideshowEnabled:false,slideshowDelay:20000 });
                }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T18:42:53.993

当您关闭第一个fancybox时，使用[触发器打开第二个fancybox](http://api.jquery.com/trigger/)

**`$("#faier").fancybox().trigger('click')`**

你的例子：

```
$("#various2").fancybox({
    'opacity'       : true,
    'overlayShow'   : false,
    'transitionIn'  : 'elastic',
    'transitionOut' : 'none',

    'onClosed'  :   function() {
                    $("#faier").fancybox().trigger('click');
        },
    'onStart'       :   function() {
                                    document.getElementById('iframe-video');

                    //alert("hi");
                    //$('#banner-rotator').royalSlider({slideshowEnabled:false,slideshowDelay:20000 });
        }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T18:43:15.480

将此用作您的js：

```
jQuery(document).ready(function() {     

$("a#example4").fancybox({
        'opacity'       : true,
        'overlayShow'   : false,
        'transitionIn'  : 'elastic',
        'transitionOut' : 'none'
    });

$("#various2").fancybox({
    'opacity'       : true,
        'overlayShow'   : false,
        'transitionIn'  : 'elastic',
        'transitionOut' : 'none',

        'onClosed'  :   function() {
                    $('#faier').fancybox().trigger('click');
        },
        'onStart'       :   function() {
                                    document.getElementById('iframe-video');

                    //alert("hi");
                    //$('#banner-rotator').royalSlider({slideshowEnabled:false,slideshowDelay:20000 });
        }
}); 
```

# visual-studio - 如何将 asm 代码移植到 VS 2008

> ID：10374839
> 
> 赞同：1
> 
> 时间：2012-04-29T18:37:12.740
> 
> 标签：visual-studio, x86, inline-assembly

以下代码应该可以在 Linux 上运行。我想将以下代码移植到 Visual Studio 2008，但我对 asm 代码不是很熟悉。你可以帮帮我吗？

```
#include <stdint.h>
static inline uint32_t log2(const uint32_t x) {
   uint32_t y;
   asm ( "\tbsr %1, %0\n"
     : "=r"(y)
     : "r" (x)
    );
    return y;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T19:01:32.377

GCC 使用[AT&T 语法](http://www.ibiblio.org/gferg/ldp/GCC-Inline-Assembly-HOWTO.html)。MSVC 使用 Intel 语法。该函数看起来像这样（使用 MSVC 2010 / 编译`16.00.40219.01`，但我看不出它在 2008 年失败的原因）：

```
static inline uint32_t log2(const uint32_t x) {
  uint32_t y;
  __asm {
    bsr eax, x
    mov y, eax
  }
  return y;
} 
```

# python - Matplotlib - _tkinter.TclError：屏幕距离错误“320.0”

> ID：10374841
> 
> 赞同：0
> 
> 时间：2012-04-29T18:37:29.163
> 
> 标签：python, windows, matplotlib, tkinter, 64-bit

```
File "main.py", line 52, in <module>
    r2n(name)

  File "C:\Users\Riki\Documents\Universita\Erasmus\Personalization and Metadata modeling 02817\Final Project\friends_followers__redis_to_networkx.py", line 69, in r2n

    **nx.draw_spring(g,node_size=50,node_color='#32CD32',node_shape='o',edge_color='.1',with_labels=True,width=0.5)**

  File "C:\Python27\lib\site-packages\networkx-1.6-py2.7.egg\networkx\drawing\nx_pylab.py", line 876, in draw_spring
    draw(G,spring_layout(G),**kwargs)

  File "C:\Python27\lib\site-packages\networkx-1.6-py2.7.egg\networkx\drawing\nx_pylab.py", line 124, in draw
    cf=pylab.gcf()

  File "C:\Python27\lib\site-packages\matplotlib\pyplot.py", line 369, in gcf
    return figure()

  File "C:\Python27\lib\site-packages\matplotlib\pyplot.py", line 343, in figure
    **kwargs)

  File "C:\Python27\lib\site-packages\matplotlib\backends\backend_tkagg.py", line 81, in new_figure_manager
    canvas = FigureCanvasTkAgg(figure, master=window)

  File "C:\Python27\lib\site-packages\matplotlib\backends\backend_tkagg.py", line 188, in __init__
    self._tkcanvas.create_image(w/2, h/2, image=self._tkphoto)

  File "C:\Python27\lib\lib-tk\Tkinter.py", line 2198, in create_image
    return self._create('image', args, kw)

  File "C:\Python27\lib\lib-tk\Tkinter.py", line 2189, in _create
    *(args + self._options(cnf, kw))))

**_tkinter.TclError: bad screen distance "320.0"** 
```

嗨，我正在为 Windows 64 位开发 Python 2.7。突然出现了这个问题，但我的代码应该没问题，因为以前可以工作（没有任何变化，图是可见的）。

我认为这是图书馆的问题，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T21:44:40.873

在创建画布项目之前尝试将坐标转换为 int。例如：

```
self._tkcanvas.create_image(int(w/2), int(h/2), image=self._tkphoto) 
```

* * *

我非常感谢这个答案，因为它对我帮助很大；我希望我可以添加一个单独的答案，但我不能因为它已关闭 - 所以发布一个编辑：

一个不需要更改`matplotlib`库文件的对我有用的解决方案是简单地创建一个新类来[覆盖一个方法](https://stackoverflow.com/questions/394770/override-a-method-at-instance-level)，两个有问题的方法是`__init__`和`resize`（奇怪的是，我需要的只是重载`resize`，甚至没有在那里进行修复，它开始为我工作？）

无论如何，请注意以下内容是从 Python2.7 Matplotlib 复制的——您最好先检查本地 matplotlib 版本，然后从那里复制：

```
# copy of /usr/lib/pymodules/python2.7/matplotlib/backends/backend_tkagg.py
# with fix:
class FigureCanvasTkAggFix(FigureCanvasTkAgg):
  def __init__(self, figure, master=None, resize_callback=None):
    matplotlib.backends.backend_tkagg.FigureCanvasAgg.__init__(self, figure)
    self._idle = True
    t1,t2,w,h = self.figure.bbox.bounds
    w, h = int(w), int(h)
    self._tkcanvas = tk.Canvas(
      master=master, width=w, height=h, borderwidth=4)
    self._tkphoto = tk.PhotoImage(
      master=self._tkcanvas, width=w, height=h)
    self._tkcanvas.create_image(int(w/2), int(h/2), image=self._tkphoto) # fix
    self._resize_callback = resize_callback
    self._tkcanvas.bind("<Configure>", self.resize)
    self._tkcanvas.bind("<Key>", self.key_press)
    self._tkcanvas.bind("<Motion>", self.motion_notify_event)
    self._tkcanvas.bind("<KeyRelease>", self.key_release)
    for name in "<Button-1>", "<Button-2>", "<Button-3>":
      self._tkcanvas.bind(name, self.button_press_event)
    for name in "<ButtonRelease-1>", "<ButtonRelease-2>", "<ButtonRelease-3>":
      self._tkcanvas.bind(name, self.button_release_event)
    for name in "<Button-4>", "<Button-5>":
      self._tkcanvas.bind(name, self.scroll_event)
    root = self._tkcanvas.winfo_toplevel()
    root.bind("<MouseWheel>", self.scroll_event_windows)
    self._master = master
    self._tkcanvas.focus_set()
    self.sourced = dict()
    def on_idle(*ignore):
      self.idle_event()
      return True
  def resize(self, event):
    width, height = event.width, event.height
    printse("WH", width, height, "\n")
    if self._resize_callback is not None:
      self._resize_callback(event)
    # compute desired figure size in inches
    dpival = self.figure.dpi
    winch = width/dpival
    hinch = height/dpival
    self.figure.set_size_inches(winch, hinch)
    self._tkcanvas.delete(self._tkphoto)
    self._tkphoto = tk.PhotoImage(
      master=self._tkcanvas, width=width, height=height)
    self._tkcanvas.create_image(width/2,height/2,image=self._tkphoto)
    self.resize_event()
    self.show() 
```

# php - 自定义页面模板上的 Wordpress 分页

> ID：10374842
> 
> 赞同：2
> 
> 时间：2012-04-29T18:38:00.887
> 
> 标签：php, wordpress

我正在尝试创建一个自定义页面模板来显示一个类别中的多个帖子，然后在底部进行分页，允许查看者转到该类别中的以前的帖子。

我的代码是：

```
$args = array ( 'category_name' => 'RAGEtothis', 'posts_per_page' => 2, 'paged' => get_query_var('page') );

query_posts( $args );

while ( have_posts() ) : the_post();
    the_content();
endwhile;

if(function_exists('wp_pagenavi')) { wp_pagenavi(); } 
```

我的问题是 pagenavi 列出了正确的页面数，但单击它们不会显示较旧的帖子，它只是刷新查询返回的第一个帖子。

我已经使用了[http://scribu.net/wordpress/wp-pagenavi/right-way-to-use-query_posts.html](http://scribu.net/wordpress/wp-pagenavi/right-way-to-use-query_posts.html) 帮助来执行此操作，但没有帮助。

我在这里做错了什么？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-10T02:27:50.880

`$paged`在设置查询之前，请通过设置查询变量来确定正在查看的页面。

```
<?php $paged = (get_query_var('paged')) ? get_query_var('paged') : 1; ?> 
```

这基本上是说获取一个分页变量或以其他方式默认为`1`. 之后，您需要将该变量传递到您的查询中以获取该页面的结果。

```
<?php
$args = array(
  'post_type' => 'post', // this is just an example query
  'paged' => $paged
);
query_posts($args);
?> 
```

并且以防万一您更深入地研究该主题，当您想要对不改变主循环的自定义查询进行分页时，您还可以将您的查询直接传递给`wp-pagenavi()`它，它也将帮助您为此提供一个分页界面。[Scribu 在这篇文章中写道。](http://scribu.net/wordpress/wp-pagenavi/wpn-2-74.html)

希望有帮助！

# java - 使用 DDD 的域服务和应用程序服务的命名约定

> ID：10374844
> 
> 赞同：7
> 
> 时间：2012-04-29T18:38:09.260
> 
> 标签：java, domain-driven-design, naming-conventions

在 DDD 方法中，命名域服务组件和应用程序服务组件的最佳实践是什么？

例如，我是否应该在我的应用程序层中有一个名为：RoomReservationService 的服务，而在我的域层中有一个名为 RoomReservationService 的服务；第一个委托给另一个？

实际上，当一个应用服务没有聚集很多领域服务时，这意味着我无法在它们之间找到不同的名称，我如何命名它而不引入任何混淆？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T11:31:04.407

在 DDD 中，您可以使用与远程服务应用程序相同的方法：

应用层服务名称：`RoomReservationService`
在包名称中：`com.my.package.service.RoomReservationService`

域层服务名称：`RoomReservationDomainService`
在包名称中：`com.my.package.domain.service.RoomReservationDomainService`

# security - 为什么在实现选民时要实现supportsClass和supportsAttribute方法？

> ID：10374846
> 
> 赞同：2
> 
> 时间：2012-04-29T18:38:19.450
> 
> 标签：security, symfony

正如您在以下链接中看到的，当我们调用 isGranted() 时，supportsClass 和 supportsAttribute 方法不会被调用：

*   [实施 Voter 时发现的陷阱](https://stackoverflow.com/a/7921844/539560)
*   [访问决策管理器](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Security/Core/Authorization/AccessDecisionManager.php)

这些方法是否在其他地方被调用？

为什么它们是界面的一部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:44:27.257

听起来这是一种正常的行为，因为选民必须检查班级。

这是检查课程的解决方案：

```
function vote(TokenInterface $token, $object, array $attributes)
{   
    $user = $token->getUser();

    //sometime the object is a class or a instance of Request
    if($object instanceOf \Symfony\Component\HttpFoundation\Request ){
        return VoterInterface::ACCESS_ABSTAIN;   
    }else{
        $class = $object->getType();
        if($class == 'Vendor\\MyBundle\\Entity\\MyEntity'){
           return VoterInterface::ACCESS_GRANTED; 
        }
    }

    return VoterInterface::ACCESS_DENIED;   
} 
```

# android - 有没有办法在 strings.xml 中存储带有标记的字符串？

> ID：10374847
> 
> 赞同：1
> 
> 时间：2012-04-29T18:38:21.673
> 
> 标签：android, html, textview

我需要用简单的标记`<b> <i>`等渲染一些文本，看起来[这](http://developer.android.com/reference/android/text/Html.html)应该可以显示它，但我想知道是否可以将字符串 * 与标记一起存储在 Strings.xml 中，或者我是否必须只需将此字符串保存在我的 Java 文件中即可。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T23:07:37.570

步骤#1：有一个`strings.xml`文件，如：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="welcome">Welcome to <b>Android</b>!</string>
</resources> 
```

您会注意到这是来自[Jason Robinson 链接到的文档](http://developer.android.com/guide/topics/resources/string-resource.html#FormattingAndStyling)。

第 2 步：没有第 2 步可以从布局、清单等中使用它作为`@string/welcome`. 你已经完成了。

步骤 #2b：如果您在 Java 中需要此值，请使用`getText()`而不是`getString()`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T18:40:39.533

您可以将字符串包装在

```
<![CDATA[ ...html... ]]> 
```

尝试这样的事情

```
<string name="html">
<![CDATA[
<p>paragraph</p>
<b>bold stuff</b>
]]>
</string> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-29T18:42:12.807

请参阅此链接：[格式化和样式](http://developer.android.com/guide/topics/resources/string-resource.html#FormattingAndStyling)，特别是“使用 HTML 标记进行样式设置”小节。

通过 获取文本后，使用该方法`Html.FromHtml()`将文本设置为 a ，传入第二个参数。`TextView`[`setText(CharSequence text, TextView.BufferType type)`](http://developer.android.com/reference/android/widget/TextView.html#setText%28java.lang.CharSequence,%20android.widget.TextView.BufferType%29)`TextView.BufferType.SPANNABLE`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-24T06:48:21.633

用 html 标签标记您的字符串，例如：

```
<big>Welcome to <b>Android</b></big>! <small>Enjoy marking up your text</small>
... 
```

然后在文本视图中将其设置为可跨文本，如下所示：

```
Spanned spannedText = Html.fromHtml(yourMarkedUpString);
yourTextView.setText(spannedText, TextView.BufferType.SPANNABLE); 
```

无论您的字符串文本是在常量字面量、变量还是`string.xml`资源文件中，以下标签都是开箱即用的：

```
<p>
<div> handled exactly like <p>
<br>
<b>
<i>
<strong> (bug on some Android versions: generates italic)
<em> (bug on some Android versions: generates bold)
<u>
<tt>
<dfn>
<sub>
<sup>
<blockquote>
<cite>
<big>
<small>
<font size="..." color="..." face="...">  (buggy font size sometimes gets ignored)
<h1>, <h2>, <h3>, <h4>, <h5>, <h6>
<a href="...">
<img src="..."> 
```

想要更多的标签，比如`<center>`and `<strike>`？

*   考虑使用[库](https://github.com/SufficientlySecure/html-textview)。

或者，也许你是一个[完整的文档](https://developer.android.com/guide/topics/resources/string-resource.html#FormattingAndStyling)迷？

# html - 如何将按钮的默认悬停样式从蓝色更改为黄色？

> ID：10374854
> 
> 赞同：1
> 
> 时间：2012-04-29T18:39:48.360
> 
> 标签：html, css

如果可能的话，我想将按钮的默认悬停蓝色样式效果更改为黄色，但我不知道该怎么做。

编辑：像这样[http://imageshack.us/photo/my-images/13/hoverbuttons.png/](http://imageshack.us/photo/my-images/13/hoverbuttons.png/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T18:42:41.873

# CSS

```
a.button:hover{
     background: #FFF;
} 
```

目前所有主流浏览器都支持

* * *

# 资源

**w3schools**：[http ://www.w3schools.com/cssref/sel_hover.asp](http://www.w3schools.com/cssref/sel_hover.asp)

**Aptana**： http: [//www.aptana.com/reference/html/api/CSS.element.Hover%20Link.html](http://www.aptana.com/reference/html/api/CSS.element.Hover%20Link.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T18:42:44.640

使用`:hover`伪类。

参考：[https ://developer.mozilla.org/en/CSS/%3Ahover](https://developer.mozilla.org/en/CSS/%3Ahover)

# javascript - Javascript / JQuery - 如果在一定大小时重定向窗口大小

> ID：10374855
> 
> 赞同：4
> 
> 时间：2012-04-29T18:39:48.940
> 
> 标签：javascript, redirect, jquery

我正在尝试编写一些脚本，当用户调整屏幕大小以满足特定阈值时将重定向。

我正在使用 JQuery 窗口调整大小功能，我编写的代码如下：

```
$(window).resize(function(){
    if ((window.width > 225px) && (window.width < 255px) && (window.height > 330px) && (window.height < 400px))
    {
    window.location = "URL GOES HERE"
    }; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T18:42:41.950

这些是 jQuery 函数，因此您必须包装`window`一个 jQuery 对象并在其上调用函数：`$(window).height()`和`$(window).width()`. 此外，您不需要`px`, 因为这些函数[只返回一个 number](http://api.jquery.com/width/)。

```
$(window).resize(function() {
    if (($(window).width() > 225) && ($(window).width() < 255) && ($(window).height() > 330) && ($(window).height() < 400))
    {
        window.location = "URL GOES HERE"
    };
}); 
```

您可以将它们保存在一个变量中，这样您就不需要查询它们两次。

```
$(window).resize(function() {
    var w = $(window).width();
    var h = $(window).height();
    if ((w > 225) && (w < 255) && (h > 330) && (h < 400)) {
        window.location = "URL GOES HERE";
    }
}); 
```

正如[@tdammers](https://stackoverflow.com/questions/10374855/javascript-jquery-redirect-on-window-resize-if-at-certain-size/10374883#comment13373387_10374855)在您的问题下的评论中所建议的那样，您的问题必须有比这更好的解决方案。

# ruby-on-rails - rails state_machine 不会改变状态

> ID：10374862
> 
> 赞同：1
> 
> 时间：2012-04-29T18:40:32.727
> 
> 标签：ruby-on-rails, state-machine

我正在尝试采用 state_machine 使我的用户能够在 Rails 3.1.3 应用程序的注册过程中拥有状态。我正在尝试制作一个非常简单的案例，但我无法通过事件更改其状态。在重新阅读文档几次之后，我还没有发现问题所在。

我的用户 ActiveRecord 模型是：

```
# == Schema Information
#
# Table name: users
#
#  id                 :integer         not null, primary key
#  name               :string(255)
#  email              :string(255)
#  created_at         :datetime
#  updated_at         :datetime
#  encrypted_password :string(255)
#  salt               :string(255)
#  admin              :boolean         default(FALSE)
#  notify_followers   :boolean         default(TRUE)
#  state              :string(255)
#

# MME per a utilitzar les Hash functions
require 'digest'

class User < ActiveRecord::Base

  attr_accessor :password # MME nomes dona acces a la instance var @password que no es guarda a la BBDD

  # MME si es posa, atributs (columnes) als que es podrà accedir via ActiveRecord
  attr_accessible   :name, :email, :password, :password_confirmation, :admin, :notify_followers
  # MME validacions
  validates :name, :presence => true,
                   :length=> {maximum: 50}

  validates :email, :presence => true,
                    :format => { :with => /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i },
                    :uniqueness => { :case_sensitive => false}

  validates :password, :presence => true,
                       :confirmation => true,   # crea un atribut password_confirmation i a la vegada confirma que sigui igual que password
                       :length => { :within => 6..40 }

    # validates :password_confirmation, :presence => true   # MME aixo exigigeix que al crear es passi un :password_confirmation, doncs amb nomes
                              #   l'anterior validator sol, pot crearse un usuari si no es passa :password_confirmation

  before_save :encrypt_password

  # MME a l'esborrar un User s'esborren tb els seus Micropost
  has_many :microposts, :dependent => :destroy

 # MME Afegim respostes als usuaris
  has_many :replies, :class_name => 'Micropost',
                     :foreign_key => "in_reply_to",
                     :inverse_of => :replied_user,
                     :dependent => :destroy

  # User com a seguidor (follower)

  # te molts :relationships apuntant-lo amb la clau follower_id. Si el User s'elimina tots aquests Relationship tambe seran eliminats.
  has_many :relationships, :foreign_key => "follower_id",
                           :dependent => :destroy

  # te molts seguits via :relationships als que s'apunta via :followed_id  (inferit gracies a :followed, que apunta a la vegada als User)
  has_many :following, :through => :relationships,
                       :source => :followed

  # User com a seguit (followed)

  # te molts :reverse_relationships apuntant-lo amb la clau followed_id. Si el User s'elimina tots aquests Relationship tambe seran eliminats.
  has_many :reverse_relationships, :class_name => "Relationship",
                                   :foreign_key => "followed_id",
                                   :dependent => :destroy

  # te molts seguidors via :reverse_relationships als que s'apunta via :follower_id  (inferit gracies a :follower, que apunta a la vegada als User)
  has_many :followers, :through => :reverse_relationships

  # Torna els microposts dels usuaris seguits per un user, per exemple:
  #    usr=User.find(12)
  #    usr.following_microposts
  # (no el faig anar finalment: Micropost.from_users_followed_by(user) ho he implementat sense aquests metode perque
  # em falten els microposts del propi user) 
  has_many :following_microposts, :through => :following, 
                                  :source => :microposts

  # Si n'hi ha, te un password_reminder
  has_one :password_reminder

  # Torna l'User de l'email si el password es correcte
  def self.authenticate(email, submited_pwd)
    if usr = find_by_email(email)
      usr.has_password?(submited_pwd) ? usr : nil
    else
      nil
    end
  end

  # Torna l'User del id si el salt es correcte (s'utilitza per les sessions)
  def self.authenticate_with_salt(id, salt)
    user = find_by_id(id)
    (user && user.salt == salt) ? user : nil
  end

  # verifica si el password correspon a l'User
  def has_password?(submited_pwd)
    self.encrypted_password == encrypt(submited_pwd)
  end

  def feed
    #Micropost.from_users_followed_by self
    # Microposts from
    #   self
    #   self.following
    #   self.replies
    Micropost.not_messages.from_users_followed_by_or_in_reply_to self
  end

  # Is usr being followed by self?
  def following? usr
    following.include? usr
    # MME segons el tutorial seria
    #relationships.find_by_followed_id(followed)
  end

  def follow! usr
    relationships.create! :followed_id => usr.id
  end

  def unfollow! usr
    relationships.find_by_followed_id(usr.id).destroy if following?(usr)
  end

  def replies_to(usr, content)
    microposts.create :content=>content, :in_reply_to=>usr.id, :private=>false
  end

  def sends_to(usr, content)
    microposts.create :content=>content, :in_reply_to=>usr.id, :private=>true
  end

  def messages_to usr
    microposts.messages.where(:in_reply_to => usr.id)
  end

  def messages_from usr
    usr.microposts.messages.where(:in_reply_to => self.id)
  end

  def messages_to_or_from usr
    Micropost.messages.between usr, self
  end
  alias conversation_with messages_to_or_from

  # MME generates a unique login name for a user
  def pseudo_login_name
    name.downcase.split.join("_")+"_"+ id.to_s
  end

  # MME generates a password reminder if it doesn't yet exist
  def generate_password_reminder
    #PasswordReminder.find_or_create_by_user_id_and_token :user_id=>self.id,
    #                                                     :token=>SecureRandom.hex(32)
    create_password_reminder!(:token=>SecureRandom.hex(32)) unless password_reminder
  end

  # MME removes its password reminder if exists
  def remove_password_reminder
    password_reminder.delete if password_reminder
  end

  # finds a user from a token (password reminder to change password)
  def self.find_by_token(token)
    pr=PasswordReminder.find_by_token(token, :include=>:user)
    pr.user if pr
  end

  # MME finds a user from a pseudo_login_name
  # first tries to get it from an id
  # last tries to get it from a name
  def self.find_by_pseudo_login_name(pln)
    nam=pln.split("_")
    id = nam.last.to_i
    if id>0 # First attempt: if it exists an id as the last part off the pln 
      User.find_by_id(id)
    else # Second attempt: try to generate a name from a pln
      User.find_by_name(nam.map(&:capitalize).join(" "))
    end
  end

  ## MME state_machine per a fer la inscripcio en passos
  state_machine :initial => :pending do
    event :email_confirm do
      transition :pending => :email_confirmed
    end
  end

  # FUNCIONS PRIVADES
  private

    def encrypt_password
      self.salt = make_salt unless has_password?(password)  # self.salt resets everytime user changes its password
      self.encrypted_password = encrypt(password)   # password refers to self.password
    end

    def make_salt
      Digest::SHA2.hexdigest "#{Time.now.utc}--#{password}"
    end

    def encrypt(str)
      Digest::SHA2.hexdigest "#{salt}--#{str}"
    end

end 
```

当然，我已经进行了迁移以使用户能够容纳状态机

```
$ rails g migration AddStateToUser state:string
$ rake db:migrate 
```

并检查了用户确实响应了来自 rails 控制台的状态属性。

当我尝试像在此控制台会话日志中那样简单地更改机器的状态时，就会出现问题：

```
1.9.2-p290 :006 > u=User.find 1
  User Load (0.5ms)  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
 => #<User id: 1, name: "Marcel", email: "mme@gmail.com", created_at: "2012-04-29 10:43:42", updated_at: "2012-04-29 10:43:42", encrypted_password: "d08c12c1cfb51fe5732f5e423b94dfdcaca1a1eb67821e3e37a...", salt: "78dfbecdfd4ffdd1fbcac5a878529b91a5200d563ebe3af23cf...", admin: false, notify_followers: true, state: "pendant"> 
1.9.2-p290 :007 > u.state
 => "pendant" 
1.9.2-p290 :008 > u.email_confirm
   (0.5ms)  SELECT 1 FROM "users" WHERE (LOWER("users"."email") = LOWER('mme@gmail.com') AND "users"."id" != 1) LIMIT 1
 => false 
1.9.2-p290 :009 > u.state
 => "pendant" 
```

您可能会注意到，从最后一个命令开始，我的用户并没有像预期的那样将他的状态更改为 :email_confirmed。我也不明白顺便说一下正在执行的 SQL 查询。在我看来这很可疑。

更多关于那个。如果我像往常一样尝试更新用户模型，则会出现相同的奇怪 SQL 查询并且不会更新模型。此会话日志显示：

```
1.9.2-p290 :001 > u=User.find 1
  User Load (55.3ms)  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
 => #<User id: 1, name: "Marcel Massana", email: "xaxaupua@gmail.com", created_at: "2012-04-29 19:32:26", updated_at: "2012-04-29 20:44:10", encrypted_password: "2ef5fec3287e2b26600521488060f698abed387e18e395d1331...", salt: "fa4d3ebb44c00237b66c95cc75ed5d1cda3b6e1535082def2a8...", admin: true, notify_followers: true, state: "pending"> 
1.9.2-p290 :002 > u.update_attributes(:name=>"Marcel")
   (0.1ms)  SAVEPOINT active_record_1
   (0.4ms)  SELECT 1 FROM "users" WHERE (LOWER("users"."email") = LOWER('xaxaupua@gmail.com') AND "users"."id" != 1) LIMIT 1
   (0.1ms)  ROLLBACK TO SAVEPOINT active_record_1
 => false 
```

谁能告诉我怎么了？有什么提示吗？

（当然我可以更改 user.state="email_confirmed" 但是为什么要使用 state_machine？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T22:03:31.987

额外的 SQL 查询是您验证的结果：

```
validates :email, :uniqueness => { :case_sensitive => false } 
```

它检查数据库以查看是否`id != 1`已存在具有该（小写）电子邮件的不同用户 ( )。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T15:16:08.430

好的，似乎我发现了发生了什么：

每次我对 进行更改时`state_machine`，例如：

```
$ u.email_confirm 
```

`state_machine`内部调用（我`User#update_attributes`的`u`用户实例），`state`属性是唯一要更新的。这意味着`User#save`调用该方法，顺便说一句，在此之前还会检查验证。至于其他属性没有更新，一些验证可能会禁止 save `u`，所以`u.state`没有明显改变。

为了克服这个问题，我只是将我所有的验证放在一个状态中。总结一下：

```
class User < ActiveRecord::Base
    ...
    state_machine :initial => :pending do

       event :email_confirm do
         transition :pending => :email_confirmed
       end

      state :pending do

        validates :name, :presence => true,
                         :length=> {maximum: 50}

        validates :email, :presence => true,
                          :format => { :with => /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i },
                          :uniqueness => { :case_sensitive => false}

        validates :password, :presence => true,
                             :confirmation => true,
                             :length => { :within => 6..40 }
      end
    end
    ...
  end 
```

验证总是在保存之前调用，因此，当从`:pending`to转换时`:email_confirmed`，`u.state`已经有一个值`:email_confirmed`并且不执行验证。

此外，奇怪的（至少对我而言）SQL 查询

```
SELECT 1 FROM "users" WHERE (LOWER("users"."email") = LOWER('xaxaupua@gmail.com') AND "users"."id" != 1) LIMIT 1 
```

仅在启用验证时执行。如果我禁用验证，则不会执行此查询。不知道 ActiveRecord 执行该查询的原因。尽管这对我来说现在不是问题，但我会感谢任何对这个问题有一点启发的人，或者向我指出任何解释这种行为的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-01T18:10:19.620

默认情况下，对模型上的 :create 和 :update 事件执行验证。我对 state_machine 有类似的问题。我的解决方案是简单地删除 :update 事件的验证，因为电子邮件和名称属性在创建记录后是只读的。例如 ：

```
validates(:name, :presence => true,
        :length => { :maximum => 50},
        :uniqueness =>true,
        :on => :create)
validates(:email, :presence => true,
        :format => {:with => email_regex},
        :uniqueness => { :case_sensitive => false},
        :on => :create)
validates(:password, :presence => true,
        :confirmation => true,
        :length => { :within => 6..40},
        :if => :password) 
```

请注意，如果密码属性已更改，则会执行密码验证。这也避免了您遇到的 state_machine 问题。如果您向用户提供更改名称和电子邮件的访问权限，您也可以将相同的逻辑应用于这些验证器。

# eclipse - Eclipse SDK 突然不见了？

> ID：10374864
> 
> 赞同：2
> 
> 时间：2012-04-29T18:40:48.003
> 
> 标签：eclipse, ubuntu

好吧，我使用 Eclipse 3.7 Indigo 在 Ubuntu 上运行，我曾经有用于 GAE 和 GWT 的 Google 插件，两者都运行良好，直到今天我发现了这个奇怪的场景

- 插件显示为已安装（帮助-->关于 Eclipse 平台---） - 使用这些插件构建项目时出现红色错误，提示“未安装 GWT SDK”尽管它们已安装 - 尝试创建一个谷歌网络应用程序和它显示 .eclipse 目录中缺少 sdk 文件！！！！！！！！！

我应该如何解决这个问题而不需要重新安装 eclipse 及其插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:30:20.900

退出eclipse，然后：

```
sudo cp ~/.eclipse/org.eclipse.platform_3.7.0_*/configuration/org.eclipse.equinox.simpleconfigurator/bundles.info /usr/lib/eclipse/configuration/org.eclipse.equinox.simpleconfigurator/bundles.info 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T00:32:29.837

关闭 Eclipse 并再次打开它。它不时发生在我身上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T01:13:33.187

尽管它们存在于 eclipse 目录中，但我只需要再次将所有插件导入 eclipse ！奇怪并解决了

# windows - 邮件服务器解决方案 IMAP/POP3

> ID：10374868
> 
> 赞同：0
> 
> 时间：2012-04-29T18:40:56.607
> 
> 标签：windows, outlook, imap, pop3, mail-server

我们在我们的域下的 hostmosnter 中有我们的电子邮件。我们想在工作的机器上使用 Outlook，所以 imap 是一种让它们保持同步的解决方案，但问题是我们使用不同的机器，我们想要一个邮件服务器来存储这些电子邮件，而不是每次都从 hostmonster.com 获取它们

什么样的软件可以从服务器获取这些电子邮件并保存它们，我们在内部依赖我们的邮件服务器来实现这一目的。请注意，MS 交换服务器不支持 IMAP 或 POP3 邮件获取

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:52:14.190

Exchange 不支持 POP3。唯一的解决方案是使用第三方插件：[http ://www.servolutions.com/popcon.htm](http://www.servolutions.com/popcon.htm)

# ruby-on-rails - 没有向 Rack::Session::Cookie 警告提供秘密选项？

> ID：10374871
> 
> 赞同：111
> 
> 时间：2012-04-29T18:41:21.967
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我在 Fedora 17 下运行 Rails 3.2.3、Ruby 1.9。我在运行时收到此警告，我`rails s`该如何解决？

> 安全警告：没有为 Rack::Session::Cookie 提供秘密选项。这构成了安全威胁。强烈建议您提供一个秘密，以防止可能来自精心制作的 cookie 的漏洞利用。未来版本的 Rack 将不支持此功能，未来版本甚至会使您现有的用户 cookie 无效。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-01-08T04:06:44.170

> 这是一个 Rails 错误，因为子类违反了超类 API 合同。
> 
> **Rails 用户可以安全地忽略该警告。**

（[https://github.com/rack/rack/issues/485#issuecomment-11956708](https://github.com/rack/rack/issues/485#issuecomment-11956708)，重点补充）

关于rails bug讨论的确认：[https ://github.com/rails/rails/issues/7372#issuecomment-11981397](https://github.com/rails/rails/issues/7372#issuecomment-11981397)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-01-07T07:47:20.590

阅读基于 tehgeekmeisters 答案的讨论，这个警告正在弹出，因为 Rails 使用 Rack cookie 的方式与预期不同。在就如何处理此问题和解决方案达成最终协议之前，暂时忽略此警告应该是可以的。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-01-08T20:44:25.077

这个问题已经在刚刚发布的 Rails 3.2.11 中得到解决。

日志：[https ://github.com/rails/rails/commits/v3.2.11](https://github.com/rails/rails/commits/v3.2.11)

提交：[https ://github.com/rails/rails/commit/95fe9ef945a35f56fa1c3ef356aec4a3b868937c](https://github.com/rails/rails/commit/95fe9ef945a35f56fa1c3ef356aec4a3b868937c)

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2013-02-12T10:52:23.387

*rails 3.2.9 - ruby​​ 1.9.3p125（2012-02-16 修订版 34643）[i686-linux]*

大家好，以下对我有用，它可能对你有用。

```
/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.9/lib/action_dispatch/middleware/session/abstract_store.rb
```

```
module Compatibility
          def initialize(app, options = {})
            options[:key]     ||= '_session_id'
            #fixed warning - SECURITY WARNING: No secret option provided to Rack::Session::Cookie.
            options[:secret] ||= Rails.application.config.secret_token
            super
          end
    end 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-01-07T06:50:28.297

现在降级到机架 1.4.1 应该足以解决这个问题。 ~~对此存在[一个问题](https://github.com/rails/rails/issues/8789)，我刚刚提交了一个似乎可以为我修复它的[拉取请求。](https://github.com/rails/rails/pull/8792)无论如何，请注意问题，在此问题修复后您应该能够升级到机架 1.4.2。~~

显然，关于如何在另一个[问题](https://github.com/rails/rails/issues/7372)上解决此问题的讨论正在进行中。您将不得不降级到 1.4.1，忽略它，或者找出您自己的修复方法，直到这个问题得到处理（如果发生这种情况，还要进行反向移植）。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-01-08T15:07:43.453

[Github https://github.com/rails/rails/issues/8789](https://github.com/rails/rails/issues/8789)中打开了一个问题。似乎是涉及带有 Rack 1.4.2 的 Rails 3.2.10 的错误导致了这种情况。IMO，在问题解决之前可以安全地忽略它。

**编辑**：此问题已在 Rails 3.2.11 中解决。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-03-25T02:52:42.173

rails 更新到 3.2.13 ，可以解决这个问题。

# asp.net-mvc - MVC DropDownList 导致表单提交异常

> ID：10374877
> 
> 赞同：0
> 
> 时间：2012-04-29T18:41:35.713
> 
> 标签：asp.net-mvc

我正在尝试将**DropDownList**添加到 MVC**视图**并不断收到以下错误。单击表单提交后会发生这种情况。任何人都可以帮助阐明这意味着什么以及我如何解决它？

**错误信息**

```
The ViewData item that has the key 'Amount' is of type 'System.String' but must be of type 'IEnumerable<SelectListItem>'. 
```

对于上下文，这是我设置导致上述错误的**模型**和**视图的方式**

**对于模型...**

```
[Required]
[DataType(DataType.Currency)]
[Display(ResourceType = typeof(Resources.Resources), Name = "ApplicationAmountLabel")]
public string Amount { get; set; }

public IEnumerable<SelectListItem> Amounts { get; set; } 
```

设置模型时，这是设置值的方式...

```
model.Amounts = GetAmounts();

...

private IEnumerable<SelectListItem> GetAmounts(List<int> amounts)
{
    var list = new List<SelectListItem>();

    list.Add(new SelectListItem { Text = string.Empty, Value = "0" });

    foreach (var amount in amounts)
    {
        list.Add(new SelectListItem { Text = amount.ToString("C"), Value = amount.ToString() });
    }

    return list;
} 
```

**最后，这是在视图中使用它的方式...**

```
@Html.LabelFor(m => m.Amount)
@Html.DropDownListFor(m => m.Amount, Model.Amounts, "-- Select One --")
@Html.ValidationMessageFor(m => m.Amount) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T18:48:09.037

在我看来，提交表单的控制器操作的签名的金额类型错误（它在您单击提交时发生）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T19:58:00.423

此错误消息的一个可能原因是`public IEnumerable<SelectListItem> Amounts { get; set; }`您的模型的属性在提交表单后为空。在将 POSTED 模型发送到视图之前，设置`Amounts`属性的值：

```
 model.Amounts = GetAmounts(); 
```

当参数为 null时，此异常由`Html.DropDownListFor()` 辅助方法引发。`selectList`如果`selectList`参数为 null，则帮助方法尝试通过属性表达式 ( )`selectList`的名称从 ViewData 中获取参数的项目，该名称位于此处。它将通过ViewData 的名称获取值，它是 type ，但它需要 type 。`m => m.Amount``Amount``Amount``String``IEnumerable<SelectListItem>`

# proxy - 在 Sencha ExtJS 或 Touch 中，通知商店代理已完成调用的最佳方式是什么？写事件？刷新？

> ID：10374880
> 
> 赞同：0
> 
> 时间：2012-04-29T18:42:21.920
> 
> 标签：proxy, sencha-touch, extjs, sencha-touch-2

对我来说，Store 类似乎缺少一些事件。即，id 喜欢在同步后收到商店已通过其代理远程加载数据的通知。写事件有效……但它是处理所有 CRUD 操作的适当事件吗？我很惊讶没有后同步事件。请注意，有一个 beforesync 事件。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T19:16:27.090

是的，你是对的。`aftersync()`在商店通过其代理远程加载数据后，Sencha Touch 中没有类似“ ”来通知我们。

类似链接：-

*   [从代理通知视图有关存储中的更改](http://www.sencha.com/forum/showthread.php?153824-Notify-View-about-changes-in-Store-from-Proxy)
*   [Sencha Touch 商店类似“aftersync”的事件](https://stackoverflow.com/questions/7672571/sencha-touch-store-aftersync-like-event)

# ruby-on-rails - rails中的数字格式

> ID：10374891
> 
> 赞同：1
> 
> 时间：2012-04-29T18:43:37.597
> 
> 标签：ruby-on-rails

我对 ruby​​ 和 rails 很陌生，我想在数据库中有一个属性，它是一个数字

-> 数字的最大长度为 10。
-> 数字分为 3 部分，每部分用“-”分隔。
-> 左起第一部分可以有 2-7 位，第二部分应该有 2 位，第三部分应该有 1 位。

例如 23-56-7
3454-54-3
3435464-54-3 是有效数字，
我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T18:53:29.513

好吧，这取决于，如果它包含'-'，它就不是一个数字，因此您可能希望将其存储为字符串并在创建时对其进行验证。

有两种方法可以做到这一点，从数据库或从 rails。我建议从 rails model 验证它。 [http://guides.rubyonrails.org/active_record_validations_callbacks.html](http://guides.rubyonrails.org/active_record_validations_callbacks.html)

您可能希望使用正则表达式进行验证。 [http://www.rubular.com](http://www.rubular.com)

如果你想对数字进行计算，你可以很容易地做这样的事情

```
yournumber.split('-').map { |x| x.to_i } 
```

这将返回一个包含 3 个整数的数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T19:06:31.860

首先，您需要设置一个字符串数据类型，您可以使用[http://www.rubular.com/](http://www.rubular.com/)使用适当的正则表达式进行验证 ，例如：23-56-7

```
validates_format_of     :number, :with => /^[1-9][1-9]-[1-9][1-9]-[1-9]$/ 
```

# hadoop - 在hadoop中，如何分别验证每个从节点上运行的map任务的数量？

> ID：10374894
> 
> 赞同：0
> 
> 时间：2012-04-29T18:43:54.790
> 
> 标签：hadoop, mapreduce, cloudera

我有一个 Hadoop 集群，头节点作为主节点，其他 7 个节点配置为从节点，每个节点都有 8 个内核和 8 GB 内存。我正在尝试改变从配置文件中的参数“mapred.tasktracker.map.tasks.maximum”和从属的数量。现在，如果我的程序必须运行 40 个任务，我可以在某个日志文件或某处查看每个从属节点上运行的任务数吗？基本上，我正在寻找不同节点之间的 Map 任务分布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T20:42:52.597

执行此操作的最简单方法是使用 Hadoop 系统附带的 Web 界面。

在您的网络浏览器中，输入：***jobtrack-machine-hostname:50030***例如：***localhost:50030***

你会得到你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T19:17:15.980

您可以安装 Ganglia 以监控来自 jobtracker 的统计信息。我在我的集​​群上做了这个，它很容易安装。它还允许您监控每个节点上的负载、交换、磁盘、内存使用情况等。

请参阅此处的说明：[http ://wiki.apache.org/hadoop/GangliaMetrics](http://wiki.apache.org/hadoop/GangliaMetrics)

GOTCHA ALERT：如果您正在安装 Ganglia，您可能会获得 3.1 版，请确保您使用`org.apache.hadoop.metrics.ganglia.GangliaContext31`的是该页面上的内容，而不是他们在该页面上的内容。

# django - 模型模板 - Django

> ID：10374898
> 
> 赞同：1
> 
> 时间：2012-04-29T18:44:17.760
> 
> 标签：django, django-templates

我有一个商业模型，用于存储有关特定城市的企业的列表信息。

这些业务将作为列表显示在网站的各个部分。

例如，选择特定业务类别时会显示企业列表，或者在显示搜索结果时也会出现企业列表。

我想知道是否有任何方法可以为业务列表创建模板，然后将该模板包含在类别模板和搜索模板中。

我不确定这是否是 django 的思考方式......

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T18:50:26.523

您可以创建带有企业列表的模板并将其包含在任何地方：

**公司/business_list.html**

```
<ul>
{% for object in object_list %}
    <li>{{ object }}</li>
{% endfor %}
</ul> 
```

**search_list.html**

```
...
{% include "inc/business_list.html" with object_list=search_list %}
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T18:51:12.930

是的，您可以在其他模板中包含模板

**片段**

```
<ul>
    <li>...</li>
</ul> 
```

**模板**

```
<html>
{% include "snippet.html" %}
</html> 
```

[https://docs.djangoproject.com/en/dev/ref/templates/builtins/#include](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#include)

# assembly - 为什么在带有 DC.W（定义常量）的数字之前不需要 #，只有指令？

> ID：10374899
> 
> 赞同：6
> 
> 时间：2012-04-29T18:44:24.553
> 
> 标签：assembly, motorola, 68000, immediate-operand

我有这行代码：

```
X   DC.W    5 
```

这基本上意味着`X = 5`但不应该`X DC.W #5`？

使用 MOVE 时，我总是需要`#`

```
MOVE.B  #1,VAR 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-29T19:15:57.973

`#1`表示立即值，即值 1。如果没有`#`，则表示内存位置 1 的内容。

随着`DC.*`您将值（我猜您可以将它们称为“立即”值）放入 X 指定的内存位置。它不是处理器指令，而是汇编器保留内存并用指定值填充它的指令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-27T03:32:38.160

通常 dc.(b/w/l) 用于将硬编码数据放入 ROM 中的表中。例如，如果你想创建一个四字节的表，它看起来像下面这样：

任何一个都可以：

*   dc.b 4, 2, $10, $1A

或者

*   直流.b 4
*   直流.b 2
*   直流 10 美元
*   dc.b $1A

它们的含义相同，因为它们声明了 4 个字节的数据。现在，使用 MOVE 有点不同，因为它将数据移动到数据寄存器或 RAM 中的位置。这些数据可以来自......比如说，我们在上面创建的表格，来自数据寄存器，或者以这个“#”开头的简单数值，如下所示：

*   move.b #$11,($FFFFFE00).w

这将值 $11 移动到我指定的 RAM 地址。希望能解决这个问题。

# c - C中的这个指针语法是什么意思？

> ID：10374900
> 
> 赞同：0
> 
> 时间：2012-04-29T18:44:33.290
> 
> 标签：c, pointers

我遇到了一位朋友的问题。

这些有什么区别？

```
* char ptr
char * ptr 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T18:47:31.437

这是一个错误：

```
* char ptr; 
```

这声明`ptr`为指针到字符类型的变量：

```
char * ptr; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T18:46:15.007

第一个声明`* char ptr`不是有效的 C 语法，这就是您收到编译时错误的原因。第二个声明`char * ptr`是有效的 C 语法，因为首先列出类型，然后是指针“*”符号和变量名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T18:47:28.003

第一行 ,`* char ptr;`无效。

第二行，`char * ptr;`声明一个*指向 char 类型指针*的变量。

# eclipse - 代码实验室练习 5：SOAP Web 服务

> ID：10374901
> 
> 赞同：0
> 
> 时间：2012-04-29T18:44:51.917
> 
> 标签：eclipse, google-app-engine, soap

我正在尝试做这个例子： http: [//googcloudlabs.appspot.com/codelabexercise5.html#section4](http://googcloudlabs.appspot.com/codelabexercise5.html#section4)

我在 appengine（服务器和客户端）中编写了整个代码，但是在两个项目中，我有这个错误： Project 'CodeLabEx5Client-Starter' is missing required library: '\Users\ravikumar\Desktop\suresh\gae \CodeLabEx5Part2\war\WEB-INF\lib\javax.xml.bind.jar'

另外，我不知道如何从终端运行我在文件中编写的 shell 脚本。

太感谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:19:49.363

我在 GAE codelab 练习 1 中遇到了类似的错误。我解决了它如下，希望它也可以解决你的错误。

1.  转到 Eclipse 调试控制台中的“问题”选项卡
2.  选择第一个错误，右键单击，选择快速修复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-12T03:05:25.527

我在[此处](https://docs.google.com/file/d/0B7eNn0CRewQ8MWo2cU43ZzM5czQ/edit?usp=sharing)提供了 .jar 的 2.0 版本。

您可以通过右键单击它并执行 Build Path->Configure Build Path... -> Libraries 选项卡将其添加到您的 Eclipse 项目中。然后添加外部 Jar 并指向这个 .jar 文件。然后切换到 Order and Export 选项卡并选中此 .jar 的复选框。

它将让您的项目正确构建。尽管经过数小时的调整和修复此练习的许多其他部分，但我仍然没有让它像描述的那样实际工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T15:34:09.793

嗯......在googcloudlabs中描述：“从这里下载xml所需的jar”

但链接（[http://www.java2s.com/Code/JarDownload/javax.xml.bind-2.0.jar.zip](http://www.java2s.com/Code/JarDownload/javax.xml.bind-2.0.jar.zip)）无效。

您可以从[http://search.maven.org/remotecontent?filepath=javax/xml/bind/jaxb-api/2.2.6/jaxb-api-2.2.6.jar下载它](http://search.maven.org/remotecontent?filepath=javax/xml/bind/jaxb-api/2.2.6/jaxb-api-2.2.6.jar)

还有......你为什么用'android'标记这个问题？:)

# mysql - MySQL 查询错误 - 无法弄清楚它可能是什么？

> ID：10374903
> 
> 赞同：0
> 
> 时间：2012-04-29T18:44:56.117
> 
> 标签：mysql, sql

```
$sql = 'SELECT track_id, track_title, track_num, al.album_name, g.genre_name, a.artist_name, length, track_rating '.
        'FROM album x, genre g, artist a, album al '.
        'WHERE x.genre = g.genre_id AND x.artist = a.artist_id AND x.album = al.album_id'; 
```

我得到的错误：“字段列表”中的未知列“track_id”

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T18:53:06.267

错误可能是您忘记包含表格。

xbonez 的回答是，它不知道从哪个表中使用`track_id`在这种情况下不适用，那么您将遇到另一个错误，例如`Column 'track_id' in field list is ambiguous ...`

你可能需要`FROM album x, genre g, artist a, track t ..`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T18:46:41.330

您需要限定列名。

```
$sql = 'SELECT x.track_id, x.track_title, x.track_num, al.album_name,... 
```

由于您引用了多个表，因此 MySQL 不知道该列`track_id`将存在于哪个表中。显式指定`x.track_id`告诉它该列在表中 aliased `x`，在这种情况下，`album`.

另外，您为什么要`album`两次引用该表？

`'FROM album x, genre g, artist a, album al '.`

# mysql - 在 MySql 中删除

> ID：10374907
> 
> 赞同：1
> 
> 时间：2012-04-29T18:45:26.567
> 
> 标签：mysql

我尝试从 mysql 中的表中删除，但它不允许我。我跑：

```
delete from mytable where sourceid=2; 
```

我得到：

```
ERROR 1146 (42S02): Table 'mydatabase.history_mytable' doesn't exist 
```

这里有什么问题？我认为应该有一个配置 mysql 的选项，以便不检查这个历史表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T18:53:01.017

运行此命令：

```
Show triggers like "%mytable%" 
```

来源：[http ://dev.mysql.com/doc/refman/5.0/en/show-triggers.html](http://dev.mysql.com/doc/refman/5.0/en/show-triggers.html)

然后如果存在一些触发器，

```
Drop trigger if exists mytable.[trigger_name] 
```

来源：[http ://dev.mysql.com/doc/refman/5.0/en/drop-trigger.html](http://dev.mysql.com/doc/refman/5.0/en/drop-trigger.html)

如果你不使用触发器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T18:52:54.413

运行命令

```
explain delete from ... 
```

然后你会看到数据库做了什么。

# java - java创建线程时出错

> ID：10374911
> 
> 赞同：0
> 
> 时间：2012-04-29T18:45:42.247
> 
> 标签：java, multithreading

创建线程时java中的错误。错误出现在“MainApp”中，而 RandomCharacterThread 是错误。线程 t1 期待一个 char 而我给它一个 int 值。这就是导致错误的原因。我添加了注释以使社区的代码更清晰。

```
//Main class.
//program to display random numbers and characters using threads.
public class MainApp 
{

    public static void main(String[] args)
    {
        new MainApp().start();
    }
    public void start()
    {
        Thread t1 = new Thread (new RandomCharacterThread("1"));
        t1.start();

    }

}

//RandomCharacterThread.
//Imports.
import java.util.Random;
//=====================================================================
public class RandomCharacterThread implements Runnable
{
//Variables.
    char letter;
    int repeats;
    Random rand = new Random();
//Constructor
//=====================================================================
public void RandomCharacterThread(char x)
{
    letter = x;
    repeats = rand.nextInt(999);
}
public void run()
{
    try
    {
        for(int i = 0;i < repeats; i++)
        {
            System.out.println("Character: " + letter);
        }

    }
    catch(Exception e)
    {

    }
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T18:48:04.943

您的“构造函数”将 a`char`作为参数；你正在传递一个`String`. 你想做类似的事情

```
 Thread t1 = new Thread (new RandomCharacterThread('1')); 
```

注意单引号而不是双引号，这使它成为一个`char`常量而不是`String`一个字符。

我用引号说“构造函数”是因为你实际上没有：你有一个方法返回与类同名的 void。删除“空白”，你会很好。构造函数根本没有返回类型：

```
public RandomCharacterThread(char x) 
{
    ... 
```

这是一个很常见的新手错误，但大多数人只会犯一次！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T18:55:05.180

类的构造`RandomCharacterThread`函数需要 char 类型的参数，当你传递一个字符串时，它会抛出错误。
这是正确的版本。

```
Thread t1 = new Thread (new RandomCharacterThread('1')); 
```

# android - 研究课题满足类别：平板/安全 2012

> ID：10374914
> 
> 赞同：-3
> 
> 时间：2012-04-29T18:46:01.093
> 
> 标签：android, ipad, security, blackberry

我已经在谷歌上搜索了一个月，之前已经搜索了 2 周，但现在我的研究主管告诉我，我的研究主题是“移动 AV 软件必须填补哪些安全漏洞才能满足当前工作站的安全标准”，太明显了，没有我想提供解决方案的真正问题。他建议我只关注平板电脑以及从当前的工作站到平板电脑的转变以及随之而来的安全风险，

我想要一个更清晰、更吸引我的话题，包括在平板电脑及其软件中寻找安全漏洞等，例如“使用平板电脑作为渗透网络的容器”或“将平板电脑作为黑客工具” ”。

但我正在尝试验证我的主题或找到我将在我的研究中解决的问题，当我这样做时，这样我就不会在我的演讲中失败。

谷歌没有给我任何帮助，与工作站/PC 安全相比，我有什么地方可以找到包括平板电脑在内的平板电脑/网络安全方面的当前问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T19:17:02.893

您的论文最终可能会类似于“在处理移动设备而不是台式机时，计算机和数据安全存在独特的问题......”在这一点上，您将得出结论是否使用移动设备胜过这样做的风险。请务必注意使用移动设备的成本优势/劣势。

这是一个有趣的话题，并且有大量的信息。

这里有一些有趣的事情需要研究：

*   [OAuth](http://oauth.net/)如何标准化 Web 服务和非本地客户端之间的通信。
*   [iOS越狱](http://en.wikipedia.org/wiki/IOS_jailbreaking)“现场”。
*   [Android生根](http://en.wikipedia.org/wiki/Rooting_%28Android_OS%29)“场景”。
*   病毒如何通过模仿其他应用程序的应用程序传播到移动设备。
*   移动应用程序如何轻松窃取无知用户的数据（位置、联系人，甚至短信）。您如何保护用户免于在不知不觉中放弃他们的数据？
*   选择 iOS、Android、Windows 或 Blackberry 移动设备的安全优缺点。（归根结底，没有一个平台是完美的）
*   如果您的移动设备丢失或被盗，如何保护和检索您的数据

从小处着手，逐步向上。通过一些努力，您应该能够对移动设备使用的安全实践进行全面、透彻的了解。你可能也会学到很多东西。祝你好运！

# algorithm - Prim算法针对已知边缘权重进行了优化？

> ID：10374915
> 
> 赞同：2
> 
> 时间：2012-04-29T18:46:07.027
> 
> 标签：algorithm, prims-algorithm

在您已经知道任何给定权重的最小值的情况下，如何修改 prim 的算法？例如，如果一个图由边权重 0 和 1 组成，如何让 prim 的算法更快？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T19:47:14.137

第一个策略似乎是改进优先级队列以利用您的数据。如果您知道权重是小于某个 C 的离散值，则可以将通常使用的二进制堆替换为基数堆。通过这种方式，您可以轻松获得与更难实现的斐波那契堆相同的算法复杂性，甚至可能更好。Dijkstra 的算法使用完全相同的数据结构，这里详细解释了如何为其实现基数堆：

[http://www.cosc.canterbury.ac.nz/tad.takaoka/alg/spalgs/radixheap.txt](http://www.cosc.canterbury.ac.nz/tad.takaoka/alg/spalgs/radixheap.txt)

示例代码 radixheap.cpp 可以在这里找到：

[http://www.cosc.canterbury.ac.nz/tad.takaoka/alg/spalgs/spalgs.html](http://www.cosc.canterbury.ac.nz/tad.takaoka/alg/spalgs/spalgs.html)

您可以简单地将与 Dijkstra 算法的文本解释的相同数据结构应用于 Prim 算法，以获得复杂度 O(m + n log C)，其中 m 是边，n 是顶点，C 是最大边权重。如果您的边权重只是小整数，这确实非常好。

总结一下基堆的概念，项目根据它们的优先级（必须是整数）放置在桶中。存储桶 N 覆盖的值范围大致为 2^N，因此找到正确的存储桶与最大可能数的对数成正比。当提取具有最小优先级的项目时，项目有时会重新分配到较低的桶中，摊销也适用于对数复杂度。

如果您的意思是边缘权重是 0 到 1 之间的任意浮点数，则不允许进行任何优化。显然，任何图都可以通过将所有边权重除以最大边权重来转换，使它们都在 0 和 1 之间。这种转换不可能使 Prim 算法运行得更快。您可以通过向所有边添加相同的数字或将它们与相同的正数相乘来变换所有边，而根本不会改变结果。

# sql - 键值对数据库

> ID：10374921
> 
> 赞同：3
> 
> 时间：2012-04-29T18:46:44.570
> 
> 标签：sql, database, mobile, key-value

哪个数据库最适合存储键/值对？并且数据库应该支持移动环境或设备。

应用程序旨在在 windows mobile 和 windows phone 上运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T18:51:24.730

在信息如此之少的情况下，真的没有简单的答案。在“No SQL”或“Document Databases”上搜索一下——应该会找到你需要的东西。

如果您在 WP7 之后，这里有一些很好的建议[http://nosql-database.org/](http://nosql-database.org/)

# c - C中结构中的填充量是编译器依赖的还是定义明确的？

> ID：10374922
> 
> 赞同：4
> 
> 时间：2012-04-29T18:47:12.277
> 
> 标签：c, padding

C 中的填充量是否`struct`在标准或编译器和/或目标体系结构中明确定义。我在标准中找不到答案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T18:48:10.530

它是实现定义的。从 C99 标准的第 6.7.2.1 节：

> ...结构或联合对象的每个非位域成员都以适合其类型的实现定义的方式对齐...
> 
> ...结构对象中可能有未命名的填充，但不是在其开头...

编译器通常会选择适合底层硬件的安排（对齐内容以易于从内存中读取等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T18:49:59.653

填充由实现决定，我们指的是用于编译代码的特定编译器。

在某些平台上，对于将使用什么填充有商定的约定。这就是使不同编译器编译的代码可以进行二进制互操作的原因。

因此，虽然理论上不同的编译器可以做出不同的选择，但只要所有代码都在单个进程中运行，不同的填充规则很少会成为问题。另一方面，如果您决定对`struct`通过网络发送的数据使用布局，那么您总是会遇到问题。不要将二进制布局结构用于传输线上的数据。

# python - Matplotlib：注释 3D 散点图

> ID：10374930
> 
> 赞同：67
> 
> 时间：2012-04-29T18:48:18.287
> 
> 标签：python, matplotlib, plot

我正在尝试使用 Matplotlib 生成 3D 散点图。我想在这里注释像 2D 案例这样的单个点： [Matplotlib: How to put individual tags for a scatter plot](https://stackoverflow.com/questions/5147112/matplotlib-how-to-put-individual-tags-for-a-scatter-plot)。

我尝试使用此功能并查阅了 Matplotlib 文档，但发现该库似乎不支持 3D 注释。有谁知道如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2015-12-07T17:12:39.913

通过 ax.text(...) 可能更容易：

```
from matplotlib import pyplot
from mpl_toolkits.mplot3d import Axes3D
from numpy.random import rand
from pylab import figure

m=rand(3,3) # m is an array of (x,y,z) coordinate triplets

fig = figure()
ax = fig.add_subplot(projection='3d')

for i in range(len(m)): #plot each point + it's index as text above
    ax.scatter(m[i,0],m[i,1],m[i,2],color='b') 
    ax.text(m[i,0],m[i,1],m[i,2],  '%s' % (str(i)), size=20, zorder=1,  
    color='k') 

ax.set_xlabel('x')
ax.set_ylabel('y')
ax.set_zlabel('z')
pyplot.show() 
```

![在此处输入图像描述](../Images/d4c517caf1184fc7db9caa137a61eaa7.png)

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-05-01T05:58:27.153

计算点的 2D 位置，并使用它创建注释。如果您需要与图形交互，您可以在鼠标释放时重新计算位置。

```
import pylab
from mpl_toolkits.mplot3d import Axes3D
from mpl_toolkits.mplot3d import proj3d
fig = pylab.figure()
ax = fig.add_subplot(111, projection = '3d')
x = y = z = [1, 2, 3]
sc = ax.scatter(x,y,z)
# now try to get the display coordinates of the first point

x2, y2, _ = proj3d.proj_transform(1,1,1, ax.get_proj())

label = pylab.annotate(
    "this", 
    xy = (x2, y2), xytext = (-20, 20),
    textcoords = 'offset points', ha = 'right', va = 'bottom',
    bbox = dict(boxstyle = 'round,pad=0.5', fc = 'yellow', alpha = 0.5),
    arrowprops = dict(arrowstyle = '->', connectionstyle = 'arc3,rad=0'))

def update_position(e):
    x2, y2, _ = proj3d.proj_transform(1,1,1, ax.get_proj())
    label.xy = x2,y2
    label.update_positions(fig.canvas.renderer)
    fig.canvas.draw()
fig.canvas.mpl_connect('button_release_event', update_position)
pylab.show() 
```

![在此处输入图像描述](../Images/3614202423c4d72ef8486c30efe28705.png)

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2017-03-20T22:52:20.820

在以下帖子[[1]](https://stackoverflow.com/a/11156353/7742341)、[[2]](https://stackoverflow.com/a/22867877/7742341)中讨论了在 matplotlib 中绘制 3D 箭头。

类似地，可以创建 Annotation3D 类（继承自 Annotation）：

```
from mpl_toolkits.mplot3d.proj3d import proj_transform
from matplotlib.text import Annotation

class Annotation3D(Annotation):
    '''Annotate the point xyz with text s'''

    def __init__(self, s, xyz, *args, **kwargs):
        Annotation.__init__(self,s, xy=(0,0), *args, **kwargs)
        self._verts3d = xyz        

    def draw(self, renderer):
        xs3d, ys3d, zs3d = self._verts3d
        xs, ys, zs = proj_transform(xs3d, ys3d, zs3d, renderer.M)
        self.xy=(xs,ys)
        Annotation.draw(self, renderer) 
```

此外，我们可以定义 annotate3D() 函数：

```
def annotate3D(ax, s, *args, **kwargs):
    '''add anotation text s to to Axes3d ax'''

    tag = Annotation3D(s, *args, **kwargs)
    ax.add_artist(tag) 
```

使用此函数注释标签可以添加到 Axes3d，如下例所示：

[![3D 图形示例](../Images/7548aa2e4bbcf14e38ec6d3e03c3f0eb.png)](https://i.stack.imgur.com/Sim6H.gif)

```
import matplotlib.pyplot as plt    
from mpl_toolkits.mplot3d import axes3d
from mpl_toolkits.mplot3d.art3d import Line3DCollection

# data: coordinates of nodes and links
xn = [1.1, 1.9, 0.1, 0.3, 1.6, 0.8, 2.3, 1.2, 1.7, 1.0, -0.7, 0.1, 0.1, -0.9, 0.1, -0.1, 2.1, 2.7, 2.6, 2.0]
yn = [-1.2, -2.0, -1.2, -0.7, -0.4, -2.2, -1.0, -1.3, -1.5, -2.1, -0.7, -0.3, 0.7, -0.0, -0.3, 0.7, 0.7, 0.3, 0.8, 1.2]
zn = [-1.6, -1.5, -1.3, -2.0, -2.4, -2.1, -1.8, -2.8, -0.5, -0.8, -0.4, -1.1, -1.8, -1.5, 0.1, -0.6, 0.2, -0.1, -0.8, -0.4]
group = [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 3, 2, 2, 2, 3, 3, 3, 3]
edges = [(1, 0), (2, 0), (3, 0), (3, 2), (4, 0), (5, 0), (6, 0), (7, 0), (8, 0), (9, 0), (11, 10), (11, 3), (11, 2), (11, 0), (12, 11), (13, 11), (14, 11), (15, 11), (17, 16), (18, 16), (18, 17), (19, 16), (19, 17), (19, 18)]
xyzn = zip(xn, yn, zn)
segments = [(xyzn[s], xyzn[t]) for s, t in edges]                

# create figure        
fig = plt.figure(dpi=60)
ax = fig.gca(projection='3d')
ax.set_axis_off()

# plot vertices
ax.scatter(xn,yn,zn, marker='o', c = group, s = 64)    
# plot edges
edge_col = Line3DCollection(segments, lw=0.2)
ax.add_collection3d(edge_col)
# add vertices annotation.
for j, xyz_ in enumerate(xyzn): 
    annotate3D(ax, s=str(j), xyz=xyz_, fontsize=10, xytext=(-3,3),
               textcoords='offset points', ha='right',va='bottom')    
plt.show() 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2018-03-05T17:43:08.420

如果您想让@msch 的答案轮换：

[![在此处输入图像描述](../Images/be294d68144a77f8ed8e8a55212dde9c.png)](https://i.stack.imgur.com/TERvR.gif)

```
from mpl_toolkits.mplot3d import axes3d
import matplotlib.pyplot as plt
from numpy.random import rand
from IPython.display import HTML
from matplotlib import animation

m = rand(3,3) # m is an array of (x,y,z) coordinate triplets

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')

for i in range(len(m)): # plot each point + it's index as text above
  x = m[i,0]
  y = m[i,1]
  z = m[i,2]
  label = i
  ax.scatter(x, y, z, color='b')
  ax.text(x, y, z, '%s' % (label), size=20, zorder=1, color='k')

ax.set_xlabel('x')
ax.set_ylabel('y')
ax.set_zlabel('z')

def animate(frame):
  ax.view_init(30, frame/4)
  plt.pause(.001)
  return fig

anim = animation.FuncAnimation(fig, animate, frames=200, interval=50)
HTML(anim.to_html5_video()) 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2016-02-05T19:06:37.477

如果你有很多数据点，如果你对它们都进行注释，图表会变得非常混乱。以下解决方案（建立在 HYRY 的答案之上）为 3d 图表中的数据点实现了鼠标悬停（弹出）解决方案。只有鼠标位置旁边的数据点才会被注释。每次鼠标移动后，计算鼠标指针到所有数据点的距离，并标注最近的点。 [![ ](../Images/f11927259f478cafea925d20a7845929.png)](https://i.stack.imgur.com/bTi72.png)

```
import matplotlib.pyplot as plt, numpy as np
from mpl_toolkits.mplot3d import proj3d

def visualize3DData (X):
    """Visualize data in 3d plot with popover next to mouse position.

    Args:
        X (np.array) - array of points, of shape (numPoints, 3)
    Returns:
        None
    """
    fig = plt.figure(figsize = (16,10))
    ax = fig.add_subplot(111, projection = '3d')
    ax.scatter(X[:, 0], X[:, 1], X[:, 2], depthshade = False, picker = True)

    def distance(point, event):
        """Return distance between mouse position and given data point

        Args:
            point (np.array): np.array of shape (3,), with x,y,z in data coords
            event (MouseEvent): mouse event (which contains mouse position in .x and .xdata)
        Returns:
            distance (np.float64): distance (in screen coords) between mouse pos and data point
        """
        assert point.shape == (3,), "distance: point.shape is wrong: %s, must be (3,)" % point.shape

        # Project 3d data space to 2d data space
        x2, y2, _ = proj3d.proj_transform(point[0], point[1], point[2], plt.gca().get_proj())
        # Convert 2d data space to 2d screen space
        x3, y3 = ax.transData.transform((x2, y2))

        return np.sqrt ((x3 - event.x)**2 + (y3 - event.y)**2)

    def calcClosestDatapoint(X, event):
        """"Calculate which data point is closest to the mouse position.

        Args:
            X (np.array) - array of points, of shape (numPoints, 3)
            event (MouseEvent) - mouse event (containing mouse position)
        Returns:
            smallestIndex (int) - the index (into the array of points X) of the element closest to the mouse position
        """
        distances = [distance (X[i, 0:3], event) for i in range(X.shape[0])]
        return np.argmin(distances)

    def annotatePlot(X, index):
        """Create popover label in 3d chart

        Args:
            X (np.array) - array of points, of shape (numPoints, 3)
            index (int) - index (into points array X) of item which should be printed
        Returns:
            None
        """
        # If we have previously displayed another label, remove it first
        if hasattr(annotatePlot, 'label'):
            annotatePlot.label.remove()
        # Get data point from array of points X, at position index
        x2, y2, _ = proj3d.proj_transform(X[index, 0], X[index, 1], X[index, 2], ax.get_proj())
        annotatePlot.label = plt.annotate( "Value %d" % index,
            xy = (x2, y2), xytext = (-20, 20), textcoords = 'offset points', ha = 'right', va = 'bottom',
            bbox = dict(boxstyle = 'round,pad=0.5', fc = 'yellow', alpha = 0.5),
            arrowprops = dict(arrowstyle = '->', connectionstyle = 'arc3,rad=0'))
        fig.canvas.draw()

    def onMouseMotion(event):
        """Event that is triggered when mouse is moved. Shows text annotation over data point closest to mouse."""
        closestIndex = calcClosestDatapoint(X, event)
        annotatePlot (X, closestIndex)

    fig.canvas.mpl_connect('motion_notify_event', onMouseMotion)  # on mouse motion
    plt.show()

if __name__ == '__main__':
    X = np.random.random((30,3))
    visualize3DData (X) 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-05-28T20:54:12.907

这是 HYRY 出色答案的稍微更一般的形式。它适用于任何点和标签列表。

```
import numpy as np
from matplotlib import pyplot as plt
from mpl_toolkits.mplot3d import Axes3D
from mpl_toolkits.mplot3d import proj3d

points = np.array([(1,1,1), (2,2,2)])
labels = ['billy', 'bobby']

fig = plt.figure()
ax = fig.add_subplot(111, projection = '3d')
xs, ys, zs = np.split(points, 3, axis=1)
sc = ax.scatter(xs,ys,zs)

# if this code is placed inside a function, then
# we must use a predefined global variable so that
# the update function has access to it. I'm not
# sure why update_positions() doesn't get access
# to its enclosing scope in this case.
global labels_and_points
labels_and_points = []

for txt, x, y, z in zip(labels, xs, ys, zs):
    x2, y2, _ = proj3d.proj_transform(x,y,z, ax.get_proj())
    label = plt.annotate(
        txt, xy = (x2, y2), xytext = (-20, 20),
        textcoords = 'offset points', ha = 'right', va = 'bottom',
        bbox = dict(boxstyle = 'round,pad=0.5', fc = 'yellow', alpha = 0.5),
        arrowprops = dict(arrowstyle = '->', connectionstyle = 'arc3,rad=0'))
    labels_and_points.append((label, x, y, z))

def update_position(e):
    for label, x, y, z in labels_and_points:
        x2, y2, _ = proj3d.proj_transform(x, y, z, ax.get_proj())
        label.xy = x2,y2
        label.update_positions(fig.canvas.renderer)
    fig.canvas.draw()

fig.canvas.mpl_connect('motion_notify_event', update_position)

plt.show() 
```

有一个烦人的名称空间问题，我只能通过（hackily）使用全局变量来解决。如果有人可以提供更好的解决方案或解释发生了什么，请告诉我！

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-11-28T06:43:38.890

此答案基于 user315582 先前的答案。我做了一些修改以提供不使用全局变量的解决方案。

```
import numpy as np
from matplotlib import pyplot as plt
from mpl_toolkits.mplot3d import Axes3D
from mpl_toolkits.mplot3d import proj3d

def main():
    fig = plt.figure()
    ax = fig.add_subplot(111, projection = '3d')
    points = np.array([(1,1,1), (2,2,2)])
    labels = ['billy', 'bobby']
    plotlabels = []
    xs, ys, zs = np.split(points, 3, axis=1)
    sc = ax.scatter(xs,ys,zs)

    for txt, x, y, z in zip(labels, xs, ys, zs):
        x2, y2, _ = proj3d.proj_transform(x,y,z, ax.get_proj())
        label = plt.annotate(
            txt, xy = (x2, y2), xytext = (-20, 20),
            textcoords = 'offset points', ha = 'right', va = 'bottom',
            bbox = dict(boxstyle = 'round,pad=0.5', fc = 'yellow', alpha = 0.5),
            arrowprops = dict(arrowstyle = '-', connectionstyle = 'arc3,rad=0'))
        plotlabels.append(label)
    fig.canvas.mpl_connect('motion_notify_event', lambda event: update_position(event,fig,ax,zip(plotlabels, xs, ys, zs)))
    plt.show()

def update_position(e,fig,ax,labels_and_points):
    for label, x, y, z in labels_and_points:
        x2, y2, _ = proj3d.proj_transform(x, y, z, ax.get_proj())
        label.xy = x2,y2
        label.update_positions(fig.canvas.renderer)
    fig.canvas.draw()

if __name__ == '__main__':
    main() 
```

# r - 在 if 语句中比较两个向量

> ID：10374932
> 
> 赞同：43
> 
> 时间：2012-04-29T18:48:36.697
> 
> 标签：r, loops, operators, dataframe

我想把停止条件放在一个函数中。条件是如果第一个和第二个元素在顺序和长度上应该完全匹配。

```
A <- c("A", "B", "C", "D")
B <- A
C <- c("A", "C", "C", "E")

> A == B
[1] TRUE TRUE TRUE TRUE 
```

这是前进的好形势

```
> A == C

[1]  TRUE  FALSE TRUE FALSE 
```

由于存在一个错误，因此该条件停止并输出该条件在第 2 列和第 4 列不成立。

```
if (A != B) {
           stop("error the A and B does not match at column 2 and 4"} else {
            cat ("I am fine") 
                }
Warning message:
In if (A != B) (stop("error 1")) :
  the condition has length > 1 and only the first element will be used 
```

我错过了一些明显的东西吗？我也可以输出错误位置在哪里？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-04-29T20:34:34.757

`all`是一种选择：

```
> A <- c("A", "B", "C", "D")
> B <- A
> C <- c("A", "C", "C", "E")

> all(A==B)
[1] TRUE
> all(A==C)
[1] FALSE 
```

但是您可能需要注意回收：

```
> D <- c("A","B","A","B")
> E <- c("A","B")
> all(D==E)
[1] TRUE
> all(length(D)==length(E)) && all(D==E)
[1] FALSE 
```

的文档`length`说它目前只输出一个长度为 1 的整数，但它将来可能会改变，所以这就是我将长度测试包装在`all`.

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-04-29T18:53:14.417

他们是一样的吗？

```
> identical(A,C)
[1] FALSE 
```

哪些元素不同意：

```
> which(A != C)
[1] 2 4 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-29T19:02:07.667

我可能会使用`all.equal`and`which`来获取您想要的信息。由于某种原因不建议`all.equal`在块中使用，因此我们将其包装在. 查看更多：`if...else``isTRUE()``?all.equal`

```
foo <- function(A,B){
  if (!isTRUE(all.equal(A,B))){
    mismatches <- paste(which(A != B), collapse = ",")
    stop("error the A and B does not match at the following columns: ", mismatches )
  } else {
    message("Yahtzee!")
  }
} 
```

并在使用中：

```
> foo(A,A)
Yahtzee!
> foo(A,B)
Yahtzee!
> foo(A,C)
Error in foo(A, C) : 
  error the A and B does not match at the following columns: 2,4 
```

# java - 如何实现没有标签的自定义菜单？

> ID：10374933
> 
> 赞同：2
> 
> 时间：2012-04-29T18:48:46.440
> 
> 标签：java, android, xml, menu

[http://i1254.photobucket.com/albums/hh620/Mike_Mccone/menu.png](http://i1254.photobucket.com/albums/hh620/Mike_Mccone/menu.png)

我有一个上面链接的菜单，我想出现在我的所有活动中。我显然可以在我的每个活动布局中包含菜单的 xml，并在每个活动中编写我的侦听器，但我宁愿不必对所有 15 个左右的活动都这样做。

我尝试创建和扩展自定义基础活动，但无济于事，因为我无法为每个活动设置不同的布局。

在不使用标签的情况下实现这样的菜单的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T19:22:16.600

除了使用 Fragments 或 Actionbar(Sherlock) 你还可以这样做：

```
public class MenuActivity extends Activity {
    private FrameLayout mContainer;
    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        // Layout that has menu on top and an empty
        // FrameLayout below
        setContentView(R.layout.main);
        mContainer = (FrameLayout) findViewById(R.id.frame_layout);
        // add click listeners to menu and let them call
        // onMenuItemClicked() or whatever you wish to do
    }

    @Override
    public void setContentView(View view) {
        mContainer.removeAllViews();
        mContainer.addView(view);
    }

    protected void onMenuItemClicked(){ /* or abstract */ }
} 
```

设置一个布局，其中包含顶部的菜单和下面的空内容（例如`FrameLayout`）并覆盖`setContentView`，以便它将内容设置在空布局内。

然后将您的活动基于此类并照常使用。也许添加菜单按钮处理。

# apache-flex - Flash Builder：如何验证日期选择器组件中是否选择了日期？

> ID：10374934
> 
> 赞同：0
> 
> 时间：2012-04-29T18:49:08.373
> 
> 标签：apache-flex, flash-builder

我正在尝试验证用户是否在我的日期选择器 spark 组件中选择了一个日期。我试过了：

```
if(dateChooserBegin.selectedDate){
..........
} 
```

我会得到一个运行时空对象错误。我想知道这里是否有人知道这样做。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T21:01:18.217

我能想到的最好的方法是补充说的话。在 dateChooser 上设置 onChange 事件以将全局布尔值更改为 true。然后在你的 if() 检查布尔值是否为真。我能想到的确保设置任何日期的唯一其他方法是在 dateChooser 本身上使用 selectedDate ，强制在那里设置默认日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T19:24:09.660

您可能需要从`CalendarLayoutChangeEvent`在选择特定日期时引发的事件对象中提取日期。请参阅Flex livedocs 上的[示例](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7d9b.html#WS2db454920e96a9e51e63e3d11c0bf63b33-7fd3)`useDate`（尤其是事件处理程序。

# ruby-on-rails - ruby on rails：如何在 select 语句中包含局部变量

> ID：10374940
> 
> 赞同：0
> 
> 时间：2012-04-29T18:50:24.490
> 
> 标签：ruby-on-rails, select

我正在尝试迭代从我的数据库中提取的食谱，从每个食谱中解析成分并将成分插入到他们自己的表中。问题是我不知道如何在我的内部选择中包含当前的成分变量：目前我收到以下错误：

*ExtractIngredients.rb:21：在“查询”中：“字段列表”中的未知列“ing”（Mysql::Error）*

你能告诉我如何在我的选择语句中包含“ing”吗？

谢谢，李

```
begin

db = Mysql.new 'localhost', 'root', 'pass', 'recs'
results = db.query "SELECT id, freeText FROM recipes"

nRows = results.num_rows

for i in 0..nRows-1
    curRow = results.fetch_row
recipeInd = curRow[0]
    recipeFreeText = curRow[1]

    ingredients = getIngredients(recipeFreeText).to_s.scan(/\'(\w+)\'/).flatten

    ingredients.each do |ing|
            db = Mysql.new 'localhost', 'root', 'pass', 'recs'

            # In the next awful select statement I'm trying to insert the current ingredient to the ingredient table if it isn't already there
         db.query "INSERT INTO ingredient(name, created_at, updated_at) SELECT ing, created_at, updated_at FROM dummytable WHERE (SELECT count(*) FROM ingredient WHERE Name = ing)=0"

        ingInd = db.query "SELECT id FROM ingredient WHERE name=ing"
            db.query "INSERT INTO ingredients_recipes(ingredient_id, recipe_id) ingInd, recipeInd"
    end     
end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T19:57:57.010

像任何其他 Ruby 字符串一样使用字符串插值：`#{ing}`

也就是说，如果这是 Rails，你为什么要做这样的事情？并为每种成分创建一个新的 MySQL？其中大部分都包含在框架中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T19:58:21.560

通过使用插值

```
"..... WHERE Name = '#{ing}' ...." 
```

* * *

If you are using Rails, why don't you use the Models for that task, instead of raw sql?

# sql - 特定场景的 SQL 查询

> ID：10374943
> 
> 赞同：7
> 
> 时间：2012-04-29T18:50:48.063
> 
> 标签：sql

考虑下面的示例表：

```
Profile_ID  Child_ID

1           1
1           2
1           3

2           1
2           2

3           1
3           2
3           3
3           5 
```

我想构建一个 SQL 查询，它为我提供适用于孩子 1 和 2 和 3 的配置文件 ID...这意味着 profile_ID 2 不会出现在结果中，因为配置文件 2 仅适用于孩子 1 和 2 ..但我希望包含配置文件 3。

我的想法与此类似

```
SELECT Profile_ID
FROM table
WHERE Child_ID IN (1 AND 2 AND 3) 
```

现在，我很清楚它`IN`作为一个函数......有没有类似的方法可以用一个而不是一个`OR`类似的方法来实现与`IN`子句类似的功能？`AND``OR`

提前感谢您的所有帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T18:57:37.950

试试这个：

```
select profile_id from t
where child_id in (1, 2 ,3)
group by profile_id
having count(distinct child_id) = 3 
```

这是玩的[小提琴。](http://sqlfiddle.com/#!2/85045/1)

注意：确保与子句`3`中的项目数量相匹配。`in`

# makefile - Makefile if 语句集 MFLAGS

> ID：10374948
> 
> 赞同：0
> 
> 时间：2012-04-29T18:51:16.820
> 
> 标签：makefile, gnu-make

我正在尝试检测 MFLAGS 中的用户设置（什么样的 var 类型）并添加适当的其他选项（printf 格式）：

```
CC:=gcc
CFLAGS:=-g3 -Wall -pedantic -std=c99
LDFLAGS:=
MFLAGS:=-Dcost_type="int"  < default MFLAGS
SOURCES:=...
OBJECTS:=$(SOURCES:.c=.o)
EXECUTABLE:=...

ifneq (,$(findstring "-Dcost_type=\"int\"",$(MFLAGS)))
        MFLAGS:="$(MFLAGS) -Dcost_fmt=\"%d\""
endif
ifneq (,$(findstring "double",$(MFLAGS)))
        MFLAGS:="$(MFLAGS) -Dcost_fmt=\"%f\""
endif
... 
```

但是该示例对任何输入都没有反应：

```
make MFLAGS:="-Dcost_type=\"int\""
make MFLAGS:="-Dcost_type=\"double\"" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T20:19:35.073

这里有几个问题，

1.  您将需要使用“覆盖”从命令行更改变量

2.  不要引用传递给 findstring 的字符串

改写成这样的东西，

```
ifneq (,$(findstring -Dcost_type="int",$(MFLAGS)))
override MFLAGS += " -Dcost_fmt=\"%d\""
endif
ifneq (,$(findstring double,$(MFLAGS)))
override MFLAGS += " -Dcost_fmt=\"%f\""
endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T16:01:16.807

我不得不再次寻求帮助。我写了那个makefile，它适用于“int”，但不适用于“short”（为什么？）。那么空间呢（例如long long），因为当我这样做时它使用“long”而不是“long long”：make MFLAGS=-Dcost_type="\"long long\""

```
ifneq (,$(findstring short,$(MFLAGS)))
        override MLAGS+=-Dcost_fmt=\"%hd\" -Dcost_max=SHRT_MAX
endif
ifneq (,$(findstring unsigned short,$(MFLAGS)))
        override MFLAGS+=-Dcost_fmt=\"%hd\" -Dcost_max=USHRT_MAX
endif
ifneq (,$(findstring int,$(MFLAGS)))
        override MFLAGS+=-Dcost_fmt=\"%d\" -Dcost_max=INT_MAX
endif
ifneq (,$(findstring unsigned int,$(MFLAGS)))
        override MFLAGS+=-Dcost_fmt=\"%d\" -Dcost_max=UINT_MAX
endif
ifneq (,$(findstring long,$(MFLAGS)))
        override MFLAGS+=-Dcost_fmt=\"%ld\" -Dcost_max=LONG_MAX
endif
ifneq (,$(findstring unsigned long,$(MFLAGS)))
        override MFLAGS+=-Dcost_fmt=\"%ld\" -Dcost_max=ULONG_MAX
endif
ifneq (,$(findstring long long,$(MFLAGS)))
        override MFLAGS+=-Dcost_fmt=\"%lld\" -Dcost_max=LLONG_MAX
endif
ifneq (,$(findstring unsigned long long,$(MFLAGS)))
        override MFLAGS+=-Dcost_fmt=\"%lld\" -Dcost_max=ULLONG_MAX
endif
ifneq (,$(findstring float,$(MFLAGS)))
        override MFLAGS+=-Dcost_fmt=\"%f\" -Dcost_max=FLT_MAX
endif
ifneq (,$(findstring double,$(MFLAGS)))
        override MFLAGS+=-Dcost_fmt=\"%f\" -Dcost_max=DBL_MAX
endif
ifneq (,$(findstring long double,$(MFLAGS)))
        override MFLAGS+=-Dcost_fmt=\"%Lf\" -Dcost_max=LDBL_MAX
endif 
```

# function - Mathematica：使用分段而不是 If

> ID：10374953
> 
> 赞同：1
> 
> 时间：2012-04-29T18:51:47.457
> 
> 标签：function, if-statement, wolfram-mathematica, plot, piecewise

我通过“如果”有这个定期定义的函数：

```
T = 1;

Tt[t_] := Quotient[t, T]*T
f[t_] := If[t >= Tt[t] && t < ((Tt[t] + T/2)), 1, -1] 
```

我需要用“Piecewise”重新定义它。我的尝试看起来像这样：

```
g[t_] := Piecewise[{
        {1, (t >= Tt[t] && t < ((Tt[t] + T/2)))}
    },
    -1
]; 
```

如果我绘制 f[t]，我会得到这个完美的周期图。如果我绘制 g[t]，我会在 y=1 处得到一条虚线，在 y=-1 处得到另一条虚线（转移到另一条虚线）。

看起来mathematica正确地绘制了函数的各个部分，但没有连接这些部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T18:57:06.587

您可以使用 ：

```
Plot[{g[t]},{t,-5,5}, Exclusions->None] 
```

# c# - 读取 hex 文件，转换为字符串并加载到 listBox

> ID：10374956
> 
> 赞同：6
> 
> 时间：2012-04-29T18:52:12.087
> 
> 标签：c#, listview, hex

我希望 listBox 显示存储在文件中的 ID。ID 为十六进制值。

我一直在尝试加载文件并将 HEX 转换为 ASCII，因此 listBox 可以加载它。该文件还包含更多信息，如项目名称、项目级别等......

这是该文件的示例：

```
00000000h: 50 12 00 00 2F D9 01 00 01 00 00 00 00 00 00 00 ; P.../Ù..........
00000010h: 46 65 61 74 68 65 72 20 45 61 72 72 69 6E 67 00 ; Feather Earring.
00000020h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000030h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000040h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000050h: 00 00 00 00 0A 00 00 00 07 00 02 00 00 00 00 00 ; ................
00000060h: 00 00 00 00 00 00 00 00 00 00 00 00 B8 88 00 00 ; ............¸ˆ..
00000070h: 00 0C 00 00 00 00 00 00 00 00 00 00 20 00 00 00 ; ............ ...
00000080h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000090h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
000000a0h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
000000b0h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
000000c0h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
000000d0h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
000000e0h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
000000f0h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000100h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000110h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000120h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000130h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000140h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000150h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000160h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000170h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000180h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000190h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
000001a0h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
000001b0h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
000001c0h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
000001d0h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
000001e0h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
000001f0h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000200h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000210h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000220h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000230h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000240h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000250h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000260h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000270h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000280h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000290h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
000002a0h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
000002b0h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
000002c0h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
000002d0h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
000002e0h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
000002f0h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000300h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000310h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000320h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000330h: 02 00 00 00 00 00 00 00 4A 61 64 65 20 45 61 72 ; ........Jade Ear
00000340h: 72 69 6E 67 00 00 00 00 00 00 00 00 00 00 00 00 ; ring............
00000350h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000360h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000370h: 00 00 00 00 00 00 00 00 00 00 00 00 0A 00 00 00 ; ................
00000380h: 07 00 02 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000390h: 00 00 00 00 20 A1 07 00 00 0C 00 00 00 00 00 00 ; .... ¡..........
000003a0h: 00 00 00 00 20 00 00 00 00 00 00 00 00 00 00 00 ; .... ...........
000003b0h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
000003c0h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
000003d0h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
000003e0h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
000003f0h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000400h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000410h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000420h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000430h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000440h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000450h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000460h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000470h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000480h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000490h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
000004a0h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
000004b0h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
000004c0h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
000004d0h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
000004e0h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
000004f0h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000500h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000510h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000520h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000530h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000540h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000550h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000560h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000570h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000580h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000590h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
000005a0h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
000005b0h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
000005c0h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
000005d0h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
000005e0h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
000005f0h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000600h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000610h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000620h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000630h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000640h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000650h: 00 00 00 00 00 00 00 00 03 00 00 00 00 00 00 00 ; ................ 
```

忽略开头的“50 12 00 00 2F D9 01 00”，即文件版本和其他不相关的数据，我要解析到列表框中的是文件版本之后的项目ID“01”。

下一个项目 ID 为“00000330h”，值为“02”。在文件末尾，您可以看到 ID 为“03”...

**编辑：**

OK, now I am loading the file and reading the Item's section inside of it, but I have no clue how to load the IDs into the listBox... The IDs are separated from each other by 807 bytes, so every 807 bytes there is an ID.

Here is how I am loading the file's section

```
 int itemSectionStart = 0x00000000;
    int itemSectionEnd = 0x002e11e0;

    FileStream fstream = new FileStream("C:\\Users\\xxx\\Desktop\\xxx\\xxx\\xxx.dec", FileMode.Open);
    BinaryReader breader = new BinaryReader(fstream);
    long length = fstream.Length;

    breader.BaseStream.Position = itemSectionStart;
    byte[] itemSection = breader.ReadBytes(itemSectionEnd); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T19:43:25.790

Assuming you know how to locate the IDs you want in the file, and you know their width (e.g. you know they're each 4 bytes comprising an Int32), you can use C#'s [BitConverter](http://msdn.microsoft.com/en-us/library/system.bitconverter.aspx) class, which takes a byte array and an index and gives you back the corresponding numeric type. You may have to swap things around if endianness is an issue.

Read your file into a byte array, use BitConverter at each offset you care about, convert the numbers to strings, and load up your ListView.

```
int startIndex = 8;
int recordStride = 128;
int numRecords = 4;

using (FileStream str = File.OpenRead("myfile.ext")) {
    for (int i = 0; i < numRecords; i++) {
        byte[] data = new byte[4];
        str.Seek(startIndex + recordStride * i, SeekOrigin.Begin);
        str.Read(data, 0, 4);
        if (NeedToByteSwap)
            Array.Reverse(data);

        int id = BitConverter.ToInt32(data, 0);
        AddToListView(id.ToString());
    }
} 
```

Fill in or calculate your starting parameters as needed.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T06:02:57.540

Finally accomplished what I was looking for! Here is the approach I took to make it work: (Might not be pretty, but it works!)

```
private string hex2dec(string hexString)
{
    StringBuilder sb = new StringBuilder();
    sb.Append(long.Parse(hexString, System.Globalization.NumberStyles.HexNumber));
    return sb.ToString();
}

private void button1_Click(object sender, EventArgs e)
{
    int numRecords = 3737;
    int itemSectionStart = 0x00000008;
    int itemSectionEnd = 0x002e11ec;

    using (FileStream str = File.OpenRead("C:\\Users\\xxx\\Desktop\\xxx\\xxx\\xxx.dec"))
    {
        BinaryReader breader = new BinaryReader(str);
        breader.BaseStream.Position = itemSectionStart;
        byte[] itemSection = breader.ReadBytes(itemSectionEnd);

        int j = 0;
        int k = j++;
        for (int i = 0; i < numRecords; i++)
        {
            string id = BitConverter.ToString(itemSection, 808 * k++, 7);
            string[] strArrayID = id.Split(new char[] { '-' });
            string reversedID = strArrayID[6] + strArrayID[5] + strArrayID[4] + strArrayID[3] + strArrayID[2] + strArrayID[1] + strArrayID[0];
            listBox1.Items.Add(this.hex2dec(reversedID));
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T19:53:29.267

Doesn't sound so much like the data is in Hex format - sounds more like that's just the representation that the editor gave you. Instead it seems more probably that the file is a straight binary dump with text encoded as ASCII byte stream.

In which case you'd want to isolate a byte[] range that represents the chars (is there a clear definition of what delimits records, names etc?). Feed that to System.Text.ASCIIEncoding (http://msdn.microsoft.com/en-us/library/system.text.asciiencoding.aspx)

One of the GetString overloads will convert the byte range to ASCII text. (http://msdn.microsoft.com/en-us/library/744y86tc.aspx)

# asp.net - 在服务层重新公开 BLL 方法？

> ID：10374960
> 
> 赞同：1
> 
> 时间：2012-04-29T18:52:35.503
> 
> 标签：asp.net, asp.net-mvc, wcf, soa

只是为我的下一个项目做一些研究，我想知道我们是否应该采用我们的 BLL 并将每个操作克隆到服务合同中？或者我们是否应该编写新方法......？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:03:56.483

您的最佳选择取决于您希望 BLL 与服务层的耦合程度。[松散耦合](http://en.wikipedia.org/wiki/Coupling_%28computer_programming%29)是强大软件设计的质量指标。出于这个原因，我建议您创建新方法来保持 BLL 松散耦合到您的服务层。

# mysql - 安装过程中的错误 1045 MySQL

> ID：10374962
> 
> 赞同：16
> 
> 时间：2012-04-29T18:52:41.073
> 
> 标签：mysql

`error 1045`任何人都可以在 MySQL 设置期间向我解释。重新安装后我收到此错误。我正在尝试在 Windows 7 上安装。在安装的最后阶段（即应用安全设置）我收到以下消息：

```
The security settings could not be applied. Error Number 1045.
Access denied for user 'root' @ 'loaclhost'(usinf password: NO). 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-18T11:19:00.707

在 64 位 Windows 7 上对我有用的是

1.  卸载
2.  删除 C:\Program Files\MySQL
3.  删除 C:\ProgramData\MySQL（此文件夹可能已隐藏）
4.  重新安装

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-03-22T12:01:20.123

重新安装时`MySQL`。在“**修改安全设置”**选项下，选中“**当前 root 密码**”字段。如果`MySQL`之前没有安装并且当前的 root 密码字段是可见的，请将其留空。在接下来的两个字段中填写您的新 root 密码。希望这可以解决您的问题。

[![在此处输入图像描述](../Images/32e856c2af730f24dd7fcf52eb335298.png)](https://i.stack.imgur.com/NGSvS.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-03T05:01:27.600

这是一个解决方案，错误 1045 MySql 安装。

1.  阻止 MySql 运行{控制面板 | 管理工具 | 服务}

2.  确保从控制面板卸载以前的 MySql

3.  从窗口资源管理器中删除所有 mysql 目录和名称，即使它们是隐藏的，如果有一些应用程序正在使用 mysql 并且始终在运行并且您无法从中删除 mysql 依赖项，则重命名它们。例如，您有 Ruby1.9，只需将其重命名为 RubyBack1.9 并在完成 mysql 安装后将它们重命名。或者其他替代方法是在到达第 9 步后终止该过程

4.  从控制面板转到防火墙，单击左侧面板中的高级设置。现在，单击入站规则。在名称下添加两个mysql，一个带有域配置文件，另一个带有私有配置文件。

5.  单击您刚刚添加的域配置文件。

6.  单击右侧面板中的“属性”

7.  在顶部的范围选项卡下，单击单选按钮并输入 127.0.0.1

8.  在协议和端口选项卡下选择协议 tcp 并键入端口 3306。确保单击确定以保存更改。

9.  重启你的电脑

10.  现在，转到任务管理器并杀死任何正在运行的 mysql 或其产品作业。

11.  最后，相应地重新安装 mysql-5.5.28-win32.msi 或 mysql-5.5.28-win64.msi。

祝你好运

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-03T15:31:30.187

这个解决方案对我有用（[http://dev.mysql.com/doc/refman/5.5/en/resetting-permissions.html](http://dev.mysql.com/doc/refman/5.5/en/resetting-permissions.html)）：

C.5.4.1.1。重置 Root 密码：Windows 系统

在 Windows 上，使用以下过程重置所有 MySQL root 帐户的密码：

以管理员身份登录您的系统。

如果 MySQL 服务器正在运行，请停止它。对于作为 Windows 服务运行的服务器，请转到服务管理器：从开始菜单中，选择控制面板，然后选择管理工具，然后选择服务。在列表中找到 MySQL 服务并停止它。

如果您的服务器没有作为服务运行，您可能需要使用任务管理器强制它停止。

创建一个包含以下语句的文本文件。将密码替换为您要使用的密码。

```
UPDATE mysql.user SET Password=PASSWORD('MyNewPass') WHERE User='root';
FLUSH PRIVILEGES; 
```

将 UPDATE 和 FLUSH 语句分别写在一行上。UPDATE 语句重置所有 root 帐户的密码，而 FLUSH 语句告诉服务器将授权表重新加载到内存中，以便它注意到密码更改。

保存文件。对于此示例，该文件将命名为 C:\mysql-init.txt。

打开控制台窗口以进入命令提示符：从“开始”菜单中，选择“运行”，然后输入 cmd 作为要运行的命令。

使用特殊的 --init-file 选项启动 MySQL 服务器（注意选项值中的反斜杠加倍）：

```
C:\> C:\mysql\bin\mysqld --init-file=C:\\mysql-init.txt 
```

如果您将 MySQL 安装到 C:\mysql 以外的位置，请相应地调整命令。

服务器在启动时执行由 --init-file 选项命名的文件的内容，更改每个 root 帐户密码。

如果您希望服务器输出显示在控制台窗口而不是日志文件中，您还可以将 --console 选项添加到命令中。

如果您使用 MySQL 安装向导安装 MySQL，您可能需要指定 --defaults-file 选项：

```
C:\> "C:\Program Files\MySQL\MySQL Server 5.5\bin\mysqld.exe"
         --defaults-file="C:\\Program Files\\MySQL\\MySQL Server 5.5\\my.ini"
         --init-file=C:\\mysql-init.txt 
```

可以使用服务管理器找到适当的 --defaults-file 设置：从开始菜单中选择控制面板，然后选择管理工具，然后选择服务。在列表中找到 MySQL 服务，右键单击它，然后选择 Properties 选项。Path to executable 字段包含 --defaults-file 设置。

服务器启动成功后，删除C:\mysql-init.txt。

您现在应该能够使用新密码以 root 身份连接到 MySQL 服务器。停止 MySQL 服务器，然后再次以正常模式重新启动它。如果您将服务器作为服务运行，请从 Windows 服务窗口启动它。如果您手动启动服务器，请使用您通常使用的任何命令。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-08T16:44:02.473

`MySQL`1) 使用服务器实例配置向导删除实例

2) 卸载`MySQL`

3）转到`C:\Program Files (x86)`或`C:\Program Files`删除`MySQL`文件夹

4）然后转到`C:\ProgramData`（有时它是一个隐藏文件夹），找到并删除`MySQL`文件夹

5）重启电脑

6）重新安装`MySQL`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-29T19:11:57.170

根据您提供的最少信息，听起来您正在使用之前安装的数据库，该数据库已经定义了 root 密码。

在首先*完全*删除之前安装 MySQL 的所有目录后重新安装 MySQL。

编辑：

另请查看[2.10.2.1.5。](http://dev.mysql.com/doc/refman/5.0/en/windows-install-wizard.html#mysql-install-wizard-changes)MySQL 在线手册中的[MySQL 安装向导所做的更改。](http://dev.mysql.com/doc/refman/5.0/en/windows-install-wizard.html#mysql-install-wizard-changes)您可能需要删除一些注册表项。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-20T00:27:01.647

1.  从控制面板停止 MySQL 服务>>管理服务>>服务
2.  从控制面板卸载
3.  从程序文件、程序数据和程序文件中删除文件夹（x86）
4.  从环境变量中删除路径（非常重要）
5.  必须卸载 MySQL Server、MySQL Workbench 和安装程序

如果让连接器卸载，它不会有任何区别。重新启动取决于您的机器的效率，然后再次安装，它将被配置并再次运行而不会出现任何错误。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-08T10:46:11.160

在安装之前禁用 Windows 防火墙对我有用！

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-08-29T08:56:19.980

*   卸载`mySQL`。
*   去`C:\Program Files`
*   删除`MySQL`文件夹。
*   重新安装`mySQL`。

它会起作用的。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2014-08-10T15:46:54.043

解决此错误

> 无法应用安全设置。错误号 1045。用户“root”@“loaclhost”的访问被拒绝（usinf 密码：否）。

请按照以下步骤操作：

1.  从控制面板卸载 MySl 服务器实例
2.  如果服务正在重新运行，请停止服务
3.  从 Program Files 中删除所有与 MySl 相关的文件夹
4.  从 MySl 安装驱动器中删除 ProgramData 文件夹。这是一个隐藏文件夹 - 您必须让它们可见。同时删除与 MySl 相关的所有文件夹
5.  下载 MySl 安装程序并检查您的系统类型 - 32 位安装程序应该是`mysql-essential-5.1win32`，64 位应该是`mysql-5.1.73-winx64`
6.  按照安装说明选择详细配置

如果您正确执行这些步骤，您应该能够解决问题

# facebook - API 错误代码：191，API 错误说明：指定的 URL 不属于应用程序

> ID：10374964
> 
> 赞同：7
> 
> 时间：2012-04-29T18:52:49.107
> 
> 标签：facebook, facebook-authentication

我刚刚在 justhost.com 上注册了 hostel6.in 域名，并且我在**/fb/hogwarts_team**文件夹中有 facebook 应用程序。

我在我的应用设置中使用以下设置

```
App Domain:         hostel6.in
Site URL:           http://hostel6.in/fb/hogwarts_team
Canvas URL:         http://hostel6.in/fb/hogwarts_team/
Secure Canvas URL:  https://secure.justhost.com/~hostelsi/fb/hogwarts_team/ 
```

当我通过 url 使用应用程序时

```
apps.facebook.com/hogwarts_team/ 
```

我收到错误

```
API Error Code: 191
API Error Description: The specified URL is not owned by the application
Error Message: Invalid redirect_uri: Given URL is not allowed by the Application configuration. 
```

但是当我通过 url 使用应用程序时：

```
hostel6.in/fb/hogwarts_team/ 
```

一切正常。

除了这些设置之外，我还在 fbmain.php 中使用了以下代码

```
$fbconfig['baseUrl']    =   "http://hostel6.in/fb/hogwarts_team/" 
```

我已经阅读了有关 stackoverflow 的类似问题的解决方案，但没有一个对我有用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T11:35:15.670

如果您在本地测试，只需添加

1.  `Localhost`在应用程序域框中

2.  `http://localhost:8080/`在网站网址框中。

这对我有用！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T05:04:21.787

您的应用会立即重定向到 Auth 对话框，`redirect_uri`参数设置为`https://173.254.28.28/~hostelsi/fb/hogwarts_team/`- 这与您在问题中列出的配置不匹配。

如果您使用的是 PHP SDK，请检​​查您对 getLoginUrl() 的调用，因为这可能是问题所在，否则请检查您在哪里检测到用户的会话，如果不存在则重定向到 Oauth 对话框，因为这样是你设置`redirect_uri`不正确的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-10T12:26:31.970

即使在正确输入后我也遇到了同样的问题：
1）应用程序域和
2）站点 URL
我没有在基本应用程序设置中设置联系人电子邮件。在花了几个小时并在 fb 中创建新应用程序后，我发现了这一点。这可能对像我这样犯同样错误的人有所帮助。

# php - 将php时间转换为天数，填空天数，然后统计结果

> ID：10374965
> 
> 赞同：2
> 
> 时间：2012-04-29T18:52:51.773
> 
> 标签：php, arrays, jqplot

```
<?php
function convertDates($timestamp) {
    return date('Y-d-m', $timestamp);
}

$days = array(); //store all the times in this array
$occurences = array(); //count all the occurences for each day
$complete = array(); //fill in missing days in this array
$zero = array(); //missing days mean zero

$query = mysql_query("SELECT `login` FROM `statistics` ORDER BY `login` ASC");
while($rows = mysql_fetch_array($query)) {
    $days[] = $rows['login'];
}
$days[] = time(); //append todays time in the array

for($i = 0; $i < count($days); $i++) {
    $complete[] = convertDates($days[$i]);
    $difference = isset($days[$i+1]) ? $days[$i+1] - $days[$i] : $days[$i] - $days[$i];
    if($difference > 86400) {
        $difference /= 86400;
        $fill = $days[$i];
        for($k = 0; $k < $difference; $k++) {
            $fill += 86400;
            $complete[] = convertDates($fill); //fill in missing days
            $zero[] = convertDates($fill); //count this day as a zero
        }
        echo ceil($difference).' days missing between '.convertDates($days[$i+1]).' and '.convertDates($days[$i]).'<br/>';
    }
    //echo convertDates($days[$i]).'<br/>';
}

$occurences = array_count_values($complete); //count all duplicates of days, here will be the count of days
$complete = array_unique($complete); //remove duplicate days from array
sort($complete); //sort it again

//print_r($zero);
//print_r($occurences);

/*Here checking the logins for each day, including days that did not exist, but filled in as zero. Note calling them duplicates just means occurrences.*/
for($i=0; $i < count($occurences); $i++) {
    if(in_array($complete[$i], $zero)) {
        echo "$i [".$complete[$i]."] has  0 duplicates (". $occurences[$complete[$i]] .")<br/>";
    } else {
        echo "$i [".$complete[$i]."] has ".$occurences[$complete[$i]] . " duplicates<br/>";
    }
}

echo "Days with empty days ".count($days)."<br/>";
echo "Days after being filled ".count($complete);
?> 
```

我正在用 jqplot 制作图表，但我的时间戳遇到了问题。我可以将时间戳转换为一天。但是，该图不知道何时有非连续天在该天表示为零。

此图用于登录统计信息。如果没有登录，它将不在数据库中。我必须在空白的日子里定义零登录。我做了一个循环来填补数据库中没有的空白。

但是我遇到了另一个问题。由于它们的存在，我填写的天数被计为登录。我试图创建另一个数组`$zero`来存储这些天，并检查这一天是否应该为零。我只是无法让它工作。

数据库中的值存储在 php 中，`time();`我使用一个函数`convertDates`将它们转换为天数。从这里开始有几天，所以要计算那天我使用了多少登录`array_count_values()`并将其存储到另一个数组中。然后我删除了重复的日期并将日期与相应的`array_count_values()`密钥配对。从这里我无法弄清楚如何确保在我填写的日子里，它显示为零。

jqplot 图不知道有零登录。我必须让 php 说那天是零。

有没有人有任何建议可以帮助我完成这项工作？

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T19:15:16.200

不要使用第二个数学计算日期/时间差异。PHP 为`DateTime`类提供了一种方便的[`DateTime::modify`](http://us.php.net/manual/en/datetime.modify.php)方法来执行此操作。我想你需要做这样的事情：

```
for($dt = $earliest_date; $dt <= $latest_date; $dt->modify('+1 day')) {
  $required_days []= $dt->format('Y-m-d');
} 
```

在此之后，`$required_days`将包含最早和最晚日期之间的所有日期。从那里开始你认为合适的。有一个数组可能更方便，其中*键*是日期，值是该日期的所有登录。

请注意，我用`Y-m-d`而不是`Y-d-m`你了。

**更新**：检测不在数据库中的日期：

正如我所建议的，您可以创建一个数组，其中该期间的每个日期作为键，并将该日期的所有登录作为值保存。

```
$logins_by_date = array();
foreach($required_days as $date) {
  $logins_by_date[$date] = array();
}

foreach($days as $login_datetime) {
  $dt = new DateTime($login_datetime);
  $key = $dt->format('Y-m-d');
  if(array_key_exists($key, $logins_by_date)) {
    $logins_by_date[$key] []= $login_datetime;
  } else {
    throw new Exception("Logical error - date {$key} does not exist in the login date map!");
  }
}

$empty_days = array();

foreach($logins_by_date as $date => $logins) {
  if(count($logins) == 0) {
    $empty_days []= $date;
  }
} 
```

这应该填写`$empty_days`有 0 次登录的所有日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-23T12:03:31.213

```
$logins_by_date = array();
foreach($required_days as $date) {
  $logins_by_date[$date] = array();
}

foreach($days as $login_datetime) {
  $dt = new DateTime($login_datetime);
  $key = $dt->format('Y-m-d');
  if(array_key_exists($key, $logins_by_date)) {
    $logins_by_date[$key] []= $login_datetime;
  } else {
    throw new Exception("Logical error - date {$key} does not exist in the login date map!");
  }
}

//$empty_days = array();

foreach($logins_by_date as $date => $logins) {
  if(count($logins) == 0) {
    $empty_days []= $date;
  }
} 
```

# xcode - 使用单击手势在 Xcode 中隐藏/取消隐藏按钮或插座

> ID：10374970
> 
> 赞同：0
> 
> 时间：2012-04-29T18:53:07.520
> 
> 标签：xcode, hide, show, uitapgesturerecognizer

这是我第一次在这里寻求帮助，尽管过去 6 个月我一直潜伏在这个论坛上。所以这里有一个简单的，我知道它以前被问过很多次，但没有一个提供真正有用的简单答案。希望这里有足够好心的人可以通过有用的提示帮助我和许多其他需要这个的人。

所以这就是我已经为隐藏网点所做的：

**在头文件中：**

```
@interface tapgestureViewController : UIViewController {

IBOutlet UIButton *btn1;
IBOutlet UIButton *btn2;
IBOutlet UITextView *text;

}

-(IBAction)hideOutlets;

@end 
```

**并在实现文件上：**

```
-(IBAction)hideOutlets:(UITapGestureRecognizer*)singleTap {

btn1.hidden = YES;
btn2.hidden = YES;
text.hidden = YES;

} 
```

我的简单问题是：如果用户再次点击屏幕，如何再次取消隐藏/显示网点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T18:58:11.893

我认为实现这一目标的最简单方法是使用：

```
-(IBAction)hideOutlets:(UITapGestureRecognizer*)singleTap 
{
    btn1.hidden = !btn1.hidden;
    btn2.hidden = !btn2.hidden;
    text.hidden = !text.hidden;
} 
```

这只会否定你当前的布尔状态，你就完成了:)

编辑：要检查触摸是否在表单上的某处但不在按钮或文本字段上，请尝试使用它。它应该工作。不需要再使用`UITapGestureRecognizer`了。

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    CGPoint loc = [touch locationInView:[touch view]];
    if (!(CGRectContainsPoint(btn1.frame, loc) || CGRectContainsPoint(btn2.frame, loc) || CGRectContainsPoint(text.frame, loc)))
    {
        btn1.hidden = !btn1.hidden;
        btn2.hidden = !btn2.hidden;
        text.hidden = !text.hidden;
    }
} 
```

# php - 如何使用条款一个查询加入帖子？

> ID：10374979
> 
> 赞同：1
> 
> 时间：2012-04-29T18:54:21.337
> 
> 标签：php, mysql, sql, join

我尝试将我的帖子表行与术语表连接起来，我的数据库帖子和数据库结构与 wordpress 相同，我不知道如何将一行与多行连接；

清除示例：

发布表：

```
post_id
post_title
post_content
post_dateline
post_owner 
```

术语表：

```
term_id
term_name
term_title
term_type 
```

term_relationships 表：

```
post_id
term_id 
```

现在我有：一个 id 值为 3 的帖子；具有 id 值的三个术语 (4,6,7)

term_relationships 行，如：

```
 post_id      term_id
     3            4
     3            6
     3            7 
```

是否可以通过一个查询获取所有这些信息，或者我应该先查询帖子，然后尝试获取术语信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:19:18.833

使用 mysql 的 GROUP_CONCAT 函数，它将多行连接到单行，但将结果作为逗号分隔的字段提供给您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T18:58:24.820

您要查找的联接类型是 LEFT JOIN。像这样的东西：

```
Select * from post p
left join term_relationships r on r.post_id = p.id
left join terms t on t.term_id = r.term_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T18:59:51.227

如果我正确理解您的要求，请尝试：

```
select * from post_table p
left join terms_table t on p.post_id = t.term_id 
```

或者，另一种选择可能是：

```
select *, (select term_id from term_table where term_id=p.post_id) from post_table p 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T19:00:08.703

与您的映射表开始连接并在两个表上使用左连接添加数据？

```
SELECT * FROM  term_relationships 
 LEFT OUTER JOIN terms ON term_relationships.term_id = terms.term_id 
 LEFT OUTER JOIN posts ON term_relationships.post_id = posts.post_id 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-29T19:07:08.290

你需要它做什么？我认为使用一个查询来获取它会适得其反。

为什么不使用两个查询？

```
SELECT * FROM posts;
SELECT * FROM terms WHERE term_id IN (SELECT term_id FROM term_relationships WHERE post_id = $post_id); 
```

> 对不起我的英语不好

# ruby-on-rails - 在联系人应用程序错误中编辑联系人

> ID：10374983
> 
> 赞同：0
> 
> 时间：2012-04-29T18:54:45.877
> 
> 标签：ruby-on-rails, ruby-on-rails-3, object

我不断收到错误

```
Couldnt find <object> without an ID 
```

我要做的就是让我的用户更新他们的联系人信息。

目前，我在控制器中对编辑和更新的定义是：

```
def edit
 @contact = current_user.contacts.find(params[:id])
end

def update
 @contact = current_user.contacts.find(params[:id])

 if @contact.update_attributes(params[:contact])
   redirect_to @contact
 else
   render action: "edit" 
end 
end 
```

在我看来，有一个表单调用对象@contact

```
<%= form_for (@contact) do |f| %>
<div class = "name-field">
    <%= f.label :name, f.text_field :name %>
</div>

<div class = "company-field">
    <%= f.label :company, f.text_field :company %>
</div>

<div class = "email-field">
    <%= f.label :email, f.text_field :email %>
</div>

<div class = "phone-field">
    <%= f.label :phone, f.text_field :phone %>
</div>

<div class = "mobile-field">
    <%= f.label :mobile, f.text_field :mobile %>
</div>  

<div class="actions"><%= f.submit "Update" %></div>
<% end %> 
```

获得有关如何解决此错误的任何建议会很棒:)谢谢汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T17:42:43.383

您可以尝试使用`.where`而不是`find`. 如果找不到指定`find`的，将引发。或者，如果找不到具有您指定的对象，您可以使用 which 将返回 nil。`Exception``id``find_by_id``id`

编辑：

*   `where``id`如果你只是给它 1或一个空数组，如果它找不到它会给你一个大小为 1的数组

*   `find_by_id`要么给你指定 id 的对象，要么`nil`如果你找不到它就找不到对象

# uitableview - 在 Xcode 4.3 中，使用 Interface Builder 制作 UITableviewCell 的选项消失了

> ID：10374992
> 
> 赞同：1
> 
> 时间：2012-04-29T18:55:16.710
> 
> 标签：uitableview, interface-builder, xcode4.3

在 Xcode 4.3 中，当创建一个新`UITableViewCell`的 时，“With Xib for user interface”选项现在被禁用。有谁知道我如何使用 IB 创建自定义单元格？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T17:51:05.740

1.  创建一个简单的视图XIB
2.  将表格视图单元格从右下角的对象浏览器拖到 XIB 中
3.  删除多余的视图

# mongodb - MongoDB 和集合中的递归

> ID：10374995
> 
> 赞同：0
> 
> 时间：2012-04-29T18:55:55.143
> 
> 标签：mongodb, infinite

阅读 MongoDB 的介绍我有点困惑。似乎数据库由集合组成，集合由文档组成，由字段组成，由键/值对组成。该值可以是一个文档。

对我来说，这似乎很奇怪。如果一个文档包含一个键/值对，其值就是文档本身，那么数据库似乎会爆炸，因为它是无限递归的。

我刚刚下载了数据库引擎和驱动程序，所以还没有开始练习monog，但我对这个说法有点困惑。

可以在这里找到[http://www.mongodb.org/display/DOCS/Introduction](http://www.mongodb.org/display/DOCS/Introduction)

谁能解释一下 mongodb 如何防止无限递归？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T21:36:18.427

您无法访问无限文档，因为单个顶级文档（包含嵌套文档）不能大于 16MB。MongoDB 没有文档之间的链接，所以不必担心无限递归，因为最终一个“文档”不能超过 16MB。此外，您在文档中存储的内容取决于您自己，最终这意味着您（和应用程序）不要过于深入地使用嵌套结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T19:30:14.383

您可能在谈论[DBRefs](http://www.mongodb.org/display/DOCS/Database+References)。它们只是指向其他文档的链接（另一个文档的“地址”，而不是文档本身。您不能像文档那样读取 DBRefs 的字段，所以它基本上是另一个文档的“地址”，而不是文档本身。

# mips - Mips 汇编语言错误检查

> ID：10374996
> 
> 赞同：0
> 
> 时间：2012-04-29T18:55:55.393
> 
> 标签：mips

我有一个程序，它接受一个整数作为用户的输入（使用系统调用 5）。当用户输入特殊字符时！@ # $ % ^ _ - ) （而不是整数它崩溃，我怎样才能修复程序以显示错误消息而不是崩溃？

这是我写的代码

```
 la $a0, prompt          # prompt the message ask for the answer n
li $v0, 4
syscall

li $v0, 5           # input the answer
syscall 

add $t1, $zero, $v0

                # store the answer in $t1

blt $t1, $s0, negative      # check for number entered < $s0
bgt $t1, $s1, exceed        # check for > $s1 number

la $a0, blank           # blank line
li $v0, 4
syscall 
```

样本输出：

```
This is a number guessing game between 0- 100\. Let's begin.
Chances remains: 6
Enter your guess: 56

The secret number is higher than : 56
Chances remains: 5
Enter your guess: 67

The secret number is higher than : 67
Chances remains: 4
Enter your guess: 75

The secret number is lower than : 75
Chances remains: 3
Enter your guess: 74

The secret number is lower than : 74
Chances remains: 2
Enter your guess: 72

The secret number is lower than : 72
Chances remains: 1
Enter your guess: 70

The secret number is lower than : 70
Chances remains: 0
Sorry...You lost.
The secret number is: 69
Do you want to play again?
1.Yes 
2.No 
Choice: 2
Your average guess: 3
-- program is finished running -- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T21:11:40.500

你无法阻止它崩溃。它总是会尝试从输入中解析一个整数。您可以显示错误消息并使用异常处理程序进行恢复。

[MARS 异常处理](http://courses.missouristate.edu/KenVollmar/MARS/Help/MarsExceptions.html)

**更新：**

> 上面的代码实际上是数字猜谜游戏的一部分，程序选择一个随机数（使用系统调用 42），用户输入他的猜测。用户有 6 次机会猜出正确答案。

编写处理程序的另一种方法是将用户输入读入缓冲区，`read_char`或者`read_string`自己执行提取。使用`read_char`要求您接受最多新行的字符。

当您遍历缓冲区时，确保每个字符的值在 48 到 57 之间（参见 ASCII 图表）。如果值超出范围，则显示错误。否则，从 48 中减去该值以获得数字，将数字乘以十位，然后将其添加到累加和中。我建议向后迭代缓冲区，以便计算十位的位置很简单。

该算法的伪代码可以在此[Casting in MIPS](https://stackoverflow.com/questions/10265639/casting-in-mips/10266085#10266085)主题中找到。

# html - Twitter的Bootstrap——关于简单页面的几个问题

> ID：10374997
> 
> 赞同：0
> 
> 时间：2012-04-29T18:55:57.793
> 
> 标签：html, css, twitter-bootstrap

我已经开始学习 Twitter 的 Bootstrap，我有几个问题。我正在尝试制作一个简单的页面。这是我正在写的：http: [//k-off.org/files/index.html](http://k-off.org/files/index.html)你能看一下代码吗？

1）据我了解，默认网格中的所有行都有 12 个单元格。所以，如果我让空 div class="span4" /div，然后 div class="span4" CONTENT /div 然后再空 div class="span4" /div，我的内容 div 将被放置在页面的中心， 是的？我在此示例中使用了一个示例代码，但它不起作用：

```
<!--ROW WITH INPUT TEXT FORM AND BUTTON. DIV SPAN3, FORM {DIV SPAN5, DIV SPAN1}, DIV SPAN3-->
<div class="row">
  <div class="span3"></div>

  <form>
    <div class="span5">
      <input type="text" class="span3" placeholder="Type something…">
    </div>
    <div class="span1">
      <input type="submit" class="btn btn-success" value="Lorem">
    </div>
  </form>

  <div class="span3"></div>
</div> 
```

2）如何在我的 div 中管理元素的宽度？在前面的示例中，我想制作一个包含 2 个 div 的表单。第一个是 span5，第二个是 span1。第一个包含文本输入，第二个包含一个按钮。所以，我想让这些文本输入和按钮的宽度分别为 span5 和 span1。我该怎么做？

3）我注意到在主引导页面[http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)上，当你调整它的大小时，元素（h1、p、按钮）改变了它们的样式——h1 和 p 变小了，而 2下载按钮位于一列中，宽度 = 100% 的小页面，已调整大小。我怎样才能做到这一点？

4）当我调整页面大小时，导航栏上的菜单会隐藏，并且导航按钮会显示在右上角。虽然，我已经在我的页面中包含了 jquery，但它不想工作。为什么？

提前致谢！

**更新：hovmand，感谢您的快速回复，**

1、2）我使用偏移做了一些改变。我用 offset4 创建了 div 并在里面放了 span3 的输入。然后是另一个带有指定 span1 按钮的 div。结果应该是这样的：offsetting_4_cells|input_for_3_cells|button_for_1_cell|other_cells。有我已经完成的代码：

```
<!--ROW WITH INPUT TEXT FORM AND BUTTON.-->
<div class="row">
  <!--<div class="offset3"></div>-->
  <form>
    <div class="offset4">
      <input type="text" class="span3" placeholder="Type something…">
    </div>
    <div>
      <input type="submit" class="btn btn-success span1" value="Go">
    </div>
  </form>
</div>
<!--ROW WITH ALERT.-->
<div class="row">
    <div class="alert alert-error span4 offset4">Alert</div>
</div> 
```

还是不行。有趣的是，在第二排的警报中，它工作得非常完美。也许我不应该为按钮的每个输入创建单独的 div 并为输入或按钮直接指定偏移样式？我的意思是：input type="text" class="offset4 span3" placeholder="Type something..."

3）好吧，我注意到我已经包含了 bootstrap-responsive.css，它会调整我的按钮大小（尽管以一种非常奇怪的方式），同时我的 h1 和 p 保持不变。我会读到这个，谢谢。

4）我已经修好了。现在它起作用了！另外，我想知道。现在我已将所有 16 个 js 文件包含到我的代码中。我真的需要所有这些下拉导航栏吗？

更新的代码可以在这里找到：http: [//k-off.org/files/index2.html](http://k-off.org/files/index2.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T19:08:16.493

1) 我不确定我是否理解 100% 但偏移列可能是您的解决方案：http: [//twitter.github.com/bootstrap/scaffolding.html#gridSystem](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)

2）不要把类`span5`放在div上，把它们放在输入字段上，把类`span1`放在按钮上。

3）该功能称为响应式设计：http: [//twitter.github.com/bootstrap/scaffolding.html#responsive](http://twitter.github.com/bootstrap/scaffolding.html#responsive)

4）我认为这是因为您的 js 文件放错了位置。例如文件： http: [//k-off.org/assets/js/bootstrap-tooltip.js](http://k-off.org/assets/js/bootstrap-tooltip.js)没有找到。

**回复编辑**

1）我不太确定你到底想达到什么目标，但你可能应该尝试使用不同类型的类组合。希望它对你有用。

4）我认为包含您单击首页上的下载按钮时获得的js文件就足够了。您可以单独下载它们的原因是您只需要一些功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T20:26:10.777

如果您使用的是网格系统（而不是流体网格系统），那么每个子项的跨度应该加起来为父项的跨度。您可能希望 span4 offset4 div 中的输入元素如下所示：

```
<!--ROW WITH INPUT TEXT FORM AND BUTTON.-->
<div class="row">
  <div class="span4 offset4">
  <form>
    <input type="text" class="span3" placeholder="Type something…">
    <input type="submit" class="btn btn-success span1" value="Go">
  </form>
</div>
<!--ROW WITH ALERT.-->
<div class="row">
    <div class="alert alert-error span4 offset4">Alert</div>
</div> 
```

此外，如果您只是在导航下拉列表之后，则不需要所有 js 文件。我相信只需要“工具提示”，因此请确保包含该文件。（或者，您可以只包含 bootstrap.min.js，它是所有 js 文件组合的缩小版本）。

# asp.net - 如何通过网站部署 clickonce 应用程序？

> ID：10374999
> 
> 赞同：1
> 
> 时间：2012-04-29T18:56:14.567
> 
> 标签：asp.net, visual-studio-2010, clickonce

我将应用程序发布到我的文件系统到 Web 应用程序的文件（我在 Visual Studio 2010 上运行它）并使应用程序“下载”“设置”文件到我的桌面。但是当我尝试执行设置时 - 它缺少文件。部署 clickonce 应用程序以让用户下载多个文件的唯一方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T09:14:28.640

无需下载任何文件 - 只需指向 setup.exe 文件（本地或 Web）。ClickOnce 只是一种能够从本地路径/网络备用或 URL 更新的打包格式。如果您希望能够从网站安装应用程序，只需将 clickonce 文件放在 IIS 上并从那里安装，例如 c:\inetpub\wwwroot\myclickonceapp 并指向 http://[IP 地址]/myclickonceapp/setup 。可执行程序 。请记住在项目属性中正确设置更新 URL/路径 - 这可能会导致您在本地安装时出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T00:20:14.240

ClickOnce 用于部署在客户端计算机上运行的应用程序，而不是 Web 应用程序。

你想达到什么目的？