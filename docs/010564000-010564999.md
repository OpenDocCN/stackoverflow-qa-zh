# StackOverflow 问答 10564000-10564999

# .net - 如何保存对象的副本并在以后恢复它

> ID：10564000
> 
> 赞同：1
> 
> 时间：2012-05-12T13:04:14.710
> 
> 标签：.net, vb.net, winforms

我有一个表单，它有一个 ListView 和按钮来从这个列表中添加/编辑/删除项目。它有一个保存和一个取消按钮。在按下取消按钮时，我想恢复在当前表单中所做的所有更改。因此，在加载表单时，我会保留一份原始列表的副本，如下所示。

```
backupMyListView = MyListView 
```

在取消按钮代码中，我做相反的事情。

```
MyListView = refMyListView 
```

发生的事情是，原始列表视图永远不会恢复，因为每次更新 MyListView 时，backupMyListView 也会更新。

如何在按下取消按钮时恢复原始 ListView？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T13:27:38.150

这两个列表显然都引用了同一个列表。

您基本上需要克隆或复制对象：

```
Dim backupMyListView As New ListView
For Each lv As ListViewItem In MyListView.Items
  backupMyListView.Items.Add(lv.Clone)
Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T13:45:25.600

您需要研究值类型和引用类型之间的区别。当您将一个变量设置为另一个变量的值时，如果该值是对象的值类型（TypeDef 结构），它只会复制数据。当值是对象（类）的引用类型时，它只是对同一对象进行另一个引用。因此，如果您创建一个新的 ListView 对象（引用类型）并为其设置两个不同的变量，它们将都指向同一个对象。通过一个变量所做的任何更改也会影响另一个变量。要复制数据，您需要使用 Clone 方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T03:03:14.053

像这样 ：

```
Private List<ListViewItem> ListViewStore As New List<ListViewItem>;
Sub Backup()
    For Each ListViewItem LItem in MyListView.Items
        ListViewStore.Add(LItem.Clone)
    Next
End Sub 
```

# c# - 默认的命令目标是什么？

> ID：10564002
> 
> 赞同：2
> 
> 时间：2012-05-12T13:04:33.940
> 
> 标签：c#, wpf, command

在“WPF控件开发”一书中，关于扮演默认命令目标的元素有两种不同的想法：

> *第 258 页»*命令目标是发出命令的对象。ICommandSource 接口包含一个可以设置为特定对象的 CommandTarget 属性。**默认情况下，命令源本身被视为命令目标。**
> 
> *第 262 页»* **默认情况下，当未设置 CommandTarget 时，使用具有键盘焦点的元素。**

此外，在本[教程](http://windowsclient.net/learn/video.aspx?v=288066)中，我们可以不定义菜单项和按钮命令目标，而只有菜单项（即不是按钮）可以真正检测命令目标。那么默认的命令目标是什么？！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T06:19:03.563

基于一些更多不同的测试用例以及关于@dowhilefor 和@hbarck 的答案，我得出结论，每种情况都有一条特定的行进路径。

**Specified CommandTarget：**从`CommandTarget`视觉树的根元素开始，寻找第一个（最近的）绑定了命令的元素。（它仅在此路径上查找此元素。）结论：

1.  *sender：*绑定命令的`CommandTarget`容器元素（带`CommandBinding`）。
2.  *e.source：*被指定为的元素`CommandTarget`。

**未指定的CommandTarget：**它从聚焦（在`CommandSource`范围内）的元素开始向可视树的根元素开始，找到第一个（最近的）绑定了命令的元素。在这种情况下，焦点元素将被确定为`CommandTarget`。结论：

1.  *sender：*已绑定命令（带`CommandBinding`标签）的焦点元素的容器。
2.  *e.Source：*焦点元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T13:23:16.023

断章取义，我不明白第一个突出显示的句子是什么意思，但我认为它是错误的。另一方面第二句话是对的

女士号码：

> 如果未定义命令目标，则将具有键盘焦点的元素用作命令目标。

如果您希望命令对某些内容进行操作，例如在当前聚焦的文本框上粘贴命令，这将非常有用。您希望粘贴命令始终有效，无论哪个文本框或哪个其他控件具有焦点，这使这成为可能。值得指出的是，关于菜单，还有另一个概念需要记住，称为[FocusScope](http://msdn.microsoft.com/en-us/library/aa969768.aspx)。WPF 中的命令有时可能很棘手，考虑一个不获取文本框焦点的保存按钮，因此不刷新 Text 属性（因为它只更新 focuslost 上的目标绑定）。但请记住，`CommandTarget`仅适用于`RoutedCommands`，而不适用于“简单”ICommands。

关于您的教程视频，还没有看过：这个概念适用于所有不采用键盘焦点本身的 CommandSource。

所以得出结论：CommandTarget 是，只要Command 是一个RoutedCommand，当前键盘聚焦的元素，否则它被忽略。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T15:15:30.317

这里似乎缺少一点：给定命令的 CommandTarget 只能是为该命令定义 CommandBinding 的对象。

*编辑：澄清和更正以下段落，以免在系统中留下误导性信息。*

命令路由是事件路由的一种特殊情况，即事件在逻辑树上上下移动：实现 ICommandSource 接口的控件，如 InputBindings、Buttons 或 MenuItems，是 CommandSources。如果他们提出命令，这会导致 RoutedEvent 在 CommandTarget 处开始。这通常是具有键盘焦点的元素。事件沿逻辑树向上传播，直到到达根。沿此方式，所有具有命令的 CommandBindings 的元素都有机会处理命令，尽管通常处理命令的第一个元素获胜并停止路由过程。这甚至可能是 CommandSource 本身，如果它有一个用于命令的 CommandBinding，那么这可能就是您的第一个引用。如果一个元素处理事件，

为了完全混淆，ICommandSource 接口定义了一个名为 CommandTarget 的属性。此属性适用于您想要短路命令路由的情况，并且想要一个特殊的控件来处理命令，无论键盘焦点在哪里。在这种情况下，您可以在相关的 Button 或 MenuItem 上编写类似 CommandTarget="{Binding ElementName=MyCommandTargetControl}" 的内容。同样，您必须确保此控件具有用于命令的 CommandBinding，否则该命令将被永久禁用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-13T12:16:25.733

我想我刚刚明白这意味着什么：

> 如果一个元素是可聚焦的，它不能自动检测未定义的路由命令目标。

如果一个元素是可聚焦的，这意味着当它被激活以发出命令时，它将始终具有键盘焦点。因此，如果它有一个用于命令的 CommandBinding，它总是会自己处理它，如果没有，它总是会被禁用。

但是，您可以通过在控件的容器上将 FocusManager.IsFocusScope 设置为 true 来解决此问题，就像在此 XAML 中一样：

```
<Window x:Class="MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:my="clr-namespace:CommandRouting"
    Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto"/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <Menu IsMainMenu="True">
            <MenuItem x:Name="TestMenuItem" Command="{x:Static my:MainWindow.TestCommand}"/>
        </Menu>
        <GroupBox x:Name="CommandBindingOnControlsGroupBox" Header="CommandBinding on Controls" Grid.Row="1">
            <StackPanel>
            <Button x:Name="CommandBindingOnButtonButton" Command="{x:Static my:MainWindow.TestCommand}" Content="CommandBinding on Button">
               <Button.CommandBindings>
                    <CommandBinding Command="{x:Static my:MainWindow.TestCommand}" Executed="CommandBinding_Executed" PreviewExecuted="CommandBinding_Executed"/>
                </Button.CommandBindings>
            </Button>
                <TextBox x:Name="CommandBindingOnTextBoxTextBox">
                    <TextBox.CommandBindings>
                        <CommandBinding Command="{x:Static my:MainWindow.TestCommand}" Executed="CommandBinding_Executed"/>
                    </TextBox.CommandBindings>
                    <TextBox.InputBindings>
                        <!-- provide alternate keyboard shortcut -->
                        <KeyBinding Key="{x:Static Key.P}" Modifiers="{x:Static ModifierKeys.Control}" Command="{x:Static my:MainWindow.TestCommand}"/>
                    </TextBox.InputBindings>
                </TextBox>
                <Button x:Name="CommandTargetOnButtonButton" Command="{x:Static my:MainWindow.TestCommand}" Content="CommandTarget on Button" CommandTarget="{Binding ElementName=CommandBindingOnControlsGroupBox}">
                    <Button.CommandBindings>
                        <CommandBinding Command="{x:Static my:MainWindow.TestCommand}" Executed="CommandBinding_Executed"/>
                    </Button.CommandBindings>
                </Button>
            </StackPanel>
        </GroupBox>
        <GroupBox x:Name="CommandBindingOnContainerGroupBox" Header="CommandBinding on Container" Grid.Row="2">
            <GroupBox.CommandBindings>
                <CommandBinding Command="{x:Static my:MainWindow.TestCommand}" PreviewExecuted="CommandBinding_Executed"/>
            </GroupBox.CommandBindings>
            <StackPanel x:Name="CommandBindingOnInnerContainerStackPanel">
                <StackPanel.CommandBindings>
                    <CommandBinding Command="{x:Static my:MainWindow.TestCommand}" Executed="CommandBinding_Executed"/>
                </StackPanel.CommandBindings>
                <Button x:Name="CommandBindingOnContainerButton" Command="{x:Static my:MainWindow.TestCommand}" Content="CommandBinding on Two Containers">
                </Button>
                <TextBox x:Name="CommandBindingOnContainerTextBox">
                    <TextBox.InputBindings>
                        <!-- provide alternate keyboard shortcut -->
                        <KeyBinding Key="{x:Static Key.P}" Modifiers="{x:Static ModifierKeys.Control}" Command="{x:Static my:MainWindow.TestCommand}"/>
                    </TextBox.InputBindings>
                </TextBox>
            </StackPanel>
        </GroupBox>
        <GroupBox x:Name="OtherFocusScopeGroupBox" FocusManager.IsFocusScope="True" Header="Other FocusScope, No CommandBindings" Grid.Row="3">
            <StackPanel >
                <Button x:Name="OtherFocusScopeButton" Command="{x:Static my:MainWindow.TestCommand}" Content="Other FocusScope">
                </Button>
                <TextBox x:Name="OtherFocusScopeTextBox">
                    <TextBox.CommandBindings>
                        <CommandBinding Command="{x:Static my:MainWindow.TestCommand}" Executed="CommandBinding_Executed"/>
                    </TextBox.CommandBindings>
                    <TextBox.InputBindings>
                        <!-- provide alternate keyboard shortcut -->
                        <KeyBinding Key="{x:Static Key.P}" Modifiers="{x:Static ModifierKeys.Control}" Command="{x:Static my:MainWindow.TestCommand}"/>
                    </TextBox.InputBindings>
                </TextBox>
            </StackPanel>
        </GroupBox>
    </Grid>
</Window> 
```

# c - 为什么 Perl 5.14 对 GvGC 使用 (0+GvGP(gv)->gp_cv) 定义？

> ID：10564006
> 
> 赞同：12
> 
> 时间：2012-05-12T13:05:02.850
> 
> 标签：c, perl, mod-perl

我正在做一些与 mod_perl-Apache-Perl 兼容性相关的研究。最近我尝试使用 Perl 5.14.2 构建 mod_perl 2.0.4。编译阶段因错误而提前终止：

```
modperl_perl.c: In function ‘modperl_perl_core_global_init’:
modperl_perl.c:58:9: error: lvalue required as left operand of assignment 
```

在这个地方编写了以下代码：

```
 GvCV(gv) = get_cv(cglobals->sub_name, TRUE); 
```

搜索可能产生此错误的原因，我发现 Perl 和 Perl 5.14 (CORE/gv.h) 的早期版本之间存在差异：

```
 #define GvCV(gv) (GvGP(gv)->gp_cv)   /* previous versions */ 
```

对比

```
 #define GvCV(gv) (0+GvGP(gv)->gp_cv)  /* in Perl 5.14 */ 
```

从定义中删除它`0+`允许 mod_perl 2.0.4 成功编译，这很好，因为与以前的版本相比， `0+...`它不被识别为*左值。*

为什么`0+`在 GvCV 的定义中使用，是否有必要？或者删除它并`GvCV(gv)`在以前的 Perl 版本中定义 like 是否安全？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-12T13:15:44.133

推动此更改的提交是[this](http://perl5.git.perl.org/perl.git/commit/c43ae56ff9cdb8e0fb3d1724f564378b031a4d49?f=gv.h)。

短日志：

> 添加 GvCV_set() 和 GvGP_set() 宏。
> 
> **并制作 GvCV() 和 GvGP() rvalue-only**。
> 
> 这是为了允许未来的提交消除 GV 和 CV 之间的一些反向引用魔法，这将需要完全控制分配给 gp_cv 插槽。

因此，这样做的目的`0+`正是使这些宏*成为 rvalues*。您最好等待`mod_perl`更新其代码以匹配新语义，因为在某些时候还原这些宏将是无效的。（我不知道“未来的提交”是否已经实现。）

相关讨论：[http ://www.nntp.perl.org/group/perl.perl5.porters/2011/01/msg167682.html](http://www.nntp.perl.org/group/perl.perl5.porters/2011/01/msg167682.html)

# c# - MVC 中的基本概念

> ID：10564008
> 
> 赞同：2
> 
> 时间：2012-05-12T13:05:24.980
> 
> 标签：c#, asp.net-mvc-3

我对一些事情有疑问......

由于我对这个 ASP.net MVC 概念完全陌生（在 MVC 中不到 15 天），并且由于对 MVC 中一些基本概念的知识湖，真的扰乱了我的工作......所以，

任何人都可以清楚简单地向我解释诸如此类的事情，

1.什么时候应该使用“IEnumerable”、“List”......

2.使用语句的主要用途是什么

@model IEnumerable

3.主要用途是什么

公共虚拟类名标识符{get; 放;}

4.主要用途是什么

公共 IEnumerable 标识符{get;set;}

5.public List Identifier{get;set;}的主要用途是什么

我会非常感谢你...

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T21:25:31.880

除了 2.) 之外的所有问题都与 ASP.NET MVC 完全无关。这些是关于数据结构和 OOP 的基本 .NET/C# 问题，您应该在进入 ASP.NET MVC 之前学习这些问题。

> 1）我们什么时候应该使用“IEnumerable”、“List”......

[`IEnumerable<T>`](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx)是集合层次结构中的最高接口。它不允许直接访问集合的每个元素。当消费者只需要迭代这个集合的元素时，它通常被使用。[`List<T>`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)当您需要对可变长度集合进行建模时，可以使用它允许您向其中添加和删除元素并使用索引直接访问元素。

> 2）使用语句的主要用途是什么
> 
> `@model IEnumerable<Namespace.Models.ModelClasses>`

此语句用于指示给定 Razor 视图中模型的类型。在这种情况下，它表明视图是强类型的`IEnumerable<Namespace.Models.ModelClasses>`接口，这意味着呈现此视图的相应控制器操作需要将此类型的实例传递给视图。

> 3）主要用途是什么
> 
> 公共虚拟类名标识符{get; 放;}

没有任何。这不是有效的 C#，它不会编译。另一方面，如果您的意思如下：

```
public virtual Classname Identifier { get; set; } 
```

那么这意味着您已将 Identifier 属性声明为虚拟，这意味着它可以在派生类中被覆盖。与 Java 不同，.NET 中的成员默认是密封的，除非您将它们标记为[`virtual`](http://msdn.microsoft.com/en-us/library/9fkccyh4.aspx).

> 4）主要用途是什么
> 
> `public IEnumerable<ClasseName> Identifier{get;set;}`

它声明了`Identifier`类型的属性，`IEnumerable<ClasseName>`它是一个接口。

> 5）主要用途是什么
> 
> `public List<ClasseName> Identifier{get;set;}`

它声明`Identifier`特定`List<ClasseName>`类型的属性。

# ruby-on-rails - 如何循环遍历具有不同间隔的日期范围？

> ID：10564011
> 
> 赞同：10
> 
> 时间：2012-05-12T13:06:30.860
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, intervals

我有一个日期范围（从，到），我想循环不同的时间间隔（每天，每周，每月，...）

我怎样才能遍历这个日期范围？

*更新*

感谢您的回答，我想出了以下内容：

```
interval = 'week' # month, year
start = from
while start < to
  stop  = start.send("end_of_#{interval}")
  if stop > to
    stop = to
  end
  logger.debug "Interval from #{start.inspect} to #{stop.inspect}"
  start = stop.send("beginning_of_#{interval}")
  start += 1.send(interval)
end 
```

这将遍历一个间隔为周、月或年的日期范围，并尊重给定间隔的开始和结束。

由于我没有在我的问题中提到这一点，我选择了将我推向正确方向的答案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T13:18:39.920

循环直到`from`日期加`1.day`, `1.week`, 或`1.month`大于`to`日期？

```
 > from = Time.now
 => 2012-05-12 09:21:24 -0400 
 > to = Time.now + 1.month + 2.week + 3.day
 => 2012-06-29 09:21:34 -0400 
 > tmp = from
 => 2012-05-12 09:21:24 -0400 
 > begin
?>   tmp += 1.week
?>   puts tmp
?> end while tmp <= to
2012-05-19 09:21:24 -0400
2012-05-26 09:21:24 -0400
2012-06-02 09:21:24 -0400
2012-06-09 09:21:24 -0400
2012-06-16 09:21:24 -0400
2012-06-23 09:21:24 -0400
2012-06-30 09:21:24 -0400
 => nil 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-02T02:42:16.017

在 Ruby 1.9 中，我在 Range 上添加了我自己的方法来遍历时间范围：

```
class Range
  def time_step(step, &block)
    return enum_for(:time_step, step) unless block_given?

    start_time, end_time = first, last
    begin
      yield(start_time)
    end while (start_time += step) <= end_time
  end
end 
```

然后，您可以这样调用，例如（我的示例使用 Rails 特定方法：15.minutes）：

```
irb(main):001:0> (1.hour.ago..Time.current).time_step(15.minutes) { |time| puts time }
2012-07-01 21:07:48 -0400
2012-07-01 21:22:48 -0400
2012-07-01 21:37:48 -0400
2012-07-01 21:52:48 -0400
2012-07-01 22:07:48 -0400
=> nil

irb(main):002:0> (1.hour.ago..Time.current).time_step(15.minutes).map { |time| time.to_s(:short) }
=> ["01 Jul 21:10", "01 Jul 21:25", "01 Jul 21:40", "01 Jul 21:55", "01 Jul 22:10"] 
```

请注意，此方法使用 Ruby 1.9 约定，如果没有给出块，枚举方法返回一个枚举器，这允许您将枚举器串在一起。

## 更新

我已将 Range#time_step 方法添加到[我的个人`core_extensions`"gem"](https://github.com/pdobb/core_extensions)中。如果您想在 Rails 项目中使用它，只需将以下内容添加到您的 Gemfile 中：

```
gem 'core_extensions', github: 'pdobb/core_extensions' 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-22T10:18:01.843

succ 方法在 1.9 范围内已弃用。想要每周做同样的事情，我找到了这个解决方案：

```
 def by_week(start_date, number_of_weeks)
    number_of_weeks.times.inject([]) { |memo, w| memo << start_date + w.weeks }
  end 
```

这将返回间隔中的周数组。轻松适应数月。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T13:24:00.863

您在 Range 对象上有 step 方法。[http://ruby-doc.org/core-1.9.3/Range.html#method-i-step](http://ruby-doc.org/core-1.9.3/Range.html#method-i-step)

# c++ - C++ 流混淆：istreambuf_iterator 与 istream_iterator？

> ID：10564013
> 
> 赞同：52
> 
> 时间：2012-05-12T13:06:35.523
> 
> 标签：c++, istream, streambuf

`istreambuf_iterator`和 和有什么不一样`istream_iterator`？一般来说，流和流缓冲区有什么区别？我真的找不到任何明确的解释，所以决定在这里问。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-05-12T13:16:48.687

IOstreams 使用 streambufs 作为输入/输出的源/目标。实际上，streambuf-family 完成了有关 IO 的所有工作，而 IOstream-family 仅用于格式化和 to-string / from-string 转换。

现在，[`istream_iterator`](http://en.cppreference.com/w/cpp/iterator/istream_iterator)接受一个模板参数，该参数说明来自 streambuf 的未格式化字符串序列应该被格式化为什么格式，就像`istream_iterator<int>`将所有传入文本（空格分隔）解释为`int`s。

另一方面，[`istreambuf_iterator`](http://en.cppreference.com/w/cpp/iterator/istreambuf_iterator)只关心原始字符并直接迭代`istream`它所传递的相关流缓冲区。

通常，如果您只对原始字符感兴趣，请使用`istreambuf_iterator`. 如果您对格式化的输入感兴趣，请使用`istream_iterator`.

我所说的所有内容也适用于[`ostream_iterator`](http://en.cppreference.com/w/cpp/iterator/ostream_iterator)and [`ostreambuf_iterator`](http://en.cppreference.com/w/cpp/iterator/ostreambuf_iterator)。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-12-24T21:23:05.283

这是一个非常保守的秘密：一个 iostream*本身*，几乎与实际读取或写入计算机上的文件无关。

iostream 基本上充当 streambuf 和语言环境之间的“媒人”：

[![在此处输入图像描述](../Images/3c3afac39f1169885da4ae36ac24b2ea.png)](https://i.stack.imgur.com/Dz28p.png)

iostream 存储一些关于应该如何进行转换的状态（例如，转换的当前宽度和精度）。它使用这些来指导语言环境如何以及在何处进行转换（例如，将此数字转换为该缓冲区中宽度为 8 和精度为 5 的字符串）。

尽管您没有直接询问它，但反过来，语言环境实际上只是一个容器——但（相当奇怪）一个类型安全的异构容器。它包含的东西是`facet`s。一个 facet 对象定义了整个语言环境的一个 facet。该标准为从读取和写入数字（`num_get`, `num_put`）到分类字符（ctype 方面）的所有内容定义了许多方面。

默认情况下，流将使用“C”语言环境。这是非常基本的——数字只是转换为数字流，它识别为字母的唯一内容是 26 个小写和 26 个大写英文字母，依此类推。但是，您可以`imbue`选择具有不同语言环境的流。您可以通过字符串中指定的名称选择要使用的语言环境。一个特别有趣的是由一个空字符串选择的。使用空字符串基本上告诉运行时库选择它“认为”最合适的语言环境，通常基于用户如何配置操作系统。这允许代码以本地化格式处理数据，而无需为任何特定语言环境明确编写。

`istream_iterator`因此，an和 an之间的基本区别在于`istreambuf_iterator`，来自 istreambuf_iterator 的数据没有经历（大部分）由语言环境完成的转换，但来自 an 的数据`istream_iterator`已经通过语言环境进行了转换。

值得一提的是，上一段中的“大部分”指的是当您从 istreambuf（通过迭代器或其他方式）读取数据时，*会*完成一点基于区域设置的转换：以及各种“格式化”类型的东西，语言环境包含一个 codecvt facet，它用于将一些外部表示转换为一些内部表示（例如，UTF-8 到 UTF-32）。

忽略它们都存储在语言环境中这一事实可能更有意义，而只考虑所涉及的各个方面：

[![在此处输入图像描述](../Images/ed3c7303bf5880444b63c9694380d669.png)](https://i.stack.imgur.com/RJX0x.png)

`istream_iterator`这就是 a和 an之间的真正区别`istreambuf_iterator`。（至少可能）对来自任何一个的数据进行了一点转换，但*对*来自`istreambuf_iterator`.

# go - 如何在 Go 中找到正在运行的程序的安装目录？

> ID：10564014
> 
> 赞同：1
> 
> 时间：2012-05-12T13:06:35.957
> 
> 标签：go

如何编写`demo.go`打印安装路径的程序`demo.exe`？

```
D:\>go build demo.go 
```

`demo.exe`在`D:\`. 移动`demo.exe`到后`C:\Windows`，然后在`D:\`路径下（它不在`C:\Windows`）运行`demo.exe`应该打印`C:\Windows`。

下图显示的不是这种情况下的工作（因为 demo.exe 总是得到它当前的执行路径，而不是它的真正路径）。这只是告诉您当前的执行目录，而不是包含文件 [https://github.com/axgle/go/blob/master/may_app_path_bug.jpg的目录](https://github.com/axgle/go/blob/master/may_app_path_bug.jpg)

**更新：window/linux 解决方案在这里** [https://github.com/axgle/app](https://github.com/axgle/app)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T13:35:20.123

```
package main

import (
    "fmt"
    "path/filepath"
    "os"
)

func main() {
    path, err := filepath.Abs(os.Args[0])
    if err != nil { panic(err) }
    fmt.Println(path)
} 
```

[`os.Args`](http://golang.org/pkg/os/#variables)通过阅读和了解更多信息[`filepath.Abs`](http://golang.org/pkg/path/filepath/#Abs)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T13:17:24.177

可以尝试从例如：

```
package main

import "os"

func main() {
        println(os.Args[0])
} 
```

* * *

```
$ go run main.go
/tmp/go-build135649844/command-line-arguments/_obj/a.out
$ 
```

（仅在 Linux 上测试，但 os 包应该是跨平台的，如果可能的话）

# objective-c - 诊断和仪器都缺少僵尸选项

> ID：10564018
> 
> 赞同：3
> 
> 时间：2012-05-12T13:07:18.357
> 
> 标签：objective-c, ios, xcode4, nszombie

运行 Xcode 4.0.2，在其他 SO 帖子建议找到它的两个地方都缺少 Zombie 选项。

产品 > 运行... 看起来像这样： ![在此处输入图像描述](../Images/bb7ceee09b649cf73f27a05f88cdb177.png)

产品 > 简介如下所示： ![在此处输入图像描述](../Images/a7691de720eb6713affff2af6809af89.png) ![在此处输入图像描述](../Images/607e3e747882195dc50bee633502cd4f.png)

奇怪的是，我之前在这个版本的 Xcode 中使用过 Zombies。我使用 Allocations 工具做了一个配置文件，单击左上角的 Allocations 信息按钮（“i”），然后检查了出现在那里的“Enable Zombie...”。但是当我现在尝试时，我得到了这个：

![在此处输入图像描述](../Images/7e0ebc36ce1ea9d46f8dea986fe314fe.png)

没有更多的僵尸。有没有可能我以某种方式删除了它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T13:46:27.760

再挖了一些之后，我在这里找到了答案：[zombie question](https://stackoverflow.com/questions/5386160/how-to-enable-nszombie-in-xcode)

Ehud B 的回答说您必须将模拟器用于 iOS 应用程序，而不是设备。当我切换到模拟器进行分析时，僵尸又回来了。

我应该注意到 Moshe Kravchik 的回答表明僵尸在 iOS 5 中可用。我仍在使用 iOS 4。

# python - 如何使用 GUI 在 python 中以编程方式运行 POST 请求？(spynner, webkit...)

> ID：10564022
> 
> 赞同：6
> 
> 时间：2012-05-12T13:07:33.023
> 
> 标签：Flash, python, user-interface, webkit, screen-scraping, spynner

我有一个网站，其中包含我需要*抓取的*[Flash](/questions/tagged/flash "显示标记为“闪光”的问题")表单。我不想填写表格，而是想为不支持请求的 URL 提供一些键/值。*`flash``POST``GET`*

 *我使用[spynner](https://github.com/makinacorpus/spynner)与站点交互，并且`spynner`可以有一个`GUI`.，但是我在 google、stackoverflow、spynner github 和 spynner 模块中的搜索不成功。

如果`spynner`不能做`POST`请求，也许`gtk`或`qt`+`webkit`可以做到吗？任何现实生活中的代码示例都将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T14:00:45.547

你可以用 Spynner 这样做：

```
import spynner
from PyQt4.QtCore import QUrl
from PyQt4.QtNetwork import QNetworkRequest, QNetworkAccessManager

url = "http://localhost:8080/niklas/test.php"
data = "foo=bar"
headers = { "Content-Type": "application/x-www-form-urlencoded" }

req = QNetworkRequest(QUrl(url))
for k, v in headers.items():
    req.setRawHeader(k, v)

browser = spynner.Browser()
browser.webframe.load(req, QNetworkAccessManager.PostOperation, data)
browser._wait_load()

print browser.html 
```*

# django - 在 Django 中扩展 social_auth 用户模型

> ID：10564023
> 
> 赞同：5
> 
> 时间：2012-05-12T13:07:57.897
> 
> 标签：django, django-socialauth

我是第一次使用 Django-social-auth，似乎所有新用户都在我的 Django 网站的 social_auth 应用程序的用户模型中注册。我有一个不同的模型，称为用户，它有一些特定的数据（与用户在站点中的活动以及与其他实体的关系），我想将从用户的 Facebook 个人资料（用户名、个人资料图片等）中获取的数据放入用户我自己制作的模型。有没有办法扩展 social_auth 用户？

**编辑** 阅读 Django-social-auth 文档后，我编辑了我的 User 类，如下所示：

```
# User model 
```

类用户（模型。模型）：

```
username = models.CharField(max_length=30)
last_login = models.DateTimeField(blank=True)
is_active = models.BooleanField(default=False)
playedHours = models.FloatField(default = 0)

userSlug = models.SlugField(unique = True)    

playedSongs = models.ManyToManyField(Song, blank=True, null = True)
invitedFriends = models.ManyToManyField('self', blank = True, null = True)

def __unicode__(self):
    return self.name 
```

另外，如何获取用户的头像、好友列表等？我不明白这个机制。

非常感谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T19:50:18.330

我根据需要创建了一个自定义的 Manager 类，并将其命名为`CustomUserManager`.

这是代码：

```
class CustomUserManager(models.Manager):
    def create_user(self, username, email):
        return self.model._default_manager.create(username=username) 
```

然后我将我的用户类更改为：

```
class User(models.Model):
    username = models.CharField(max_length=30)
    last_login = models.DateTimeField(blank=True, null=True)
    is_active = models.BooleanField(default=False)
    playedHours = models.FloatField(default = 0)

    objects = CustomUserManager()

    playedSongs = models.ManyToManyField(Song, blank=True, null = True)
    invitedFriends = models.ManyToManyField('self', blank = True, null = True)

def __unicode__(self):
    return self.username

def is_authenticated(self):
    return True 
```

在我的 settings.py 中：

```
SOCIAL_AUTH_USER_MODEL = 'myappname.User' 
```

感谢 ArgsKwargs 的帮助 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T13:14:35.187

来自文档：

> 如果需要，可以覆盖使用的用户模型：
> 
> `SOCIAL_AUTH_USER_MODEL = 'myapp.CustomUser'`

来源：[github](https://github.com/omab/django-social-auth#custom-user-model)

# javascript - 无法单击单选按钮控件

> ID：10564026
> 
> 赞同：1
> 
> 时间：2012-05-12T13:08:16.507
> 
> 标签：javascript, dom

我正在尝试动态复制一些单选按钮，但由于某种原因无法选择克隆的单选按钮......有人可以帮助我吗？

### HTML

```
 <div id="sGroup">
<div class="section" id="section1">
<input type="text" size = "16" id="section1" placeholder="Section Name"/>
<p id="par1"><textarea rows="2" cols="70" id="info1"/></textarea></p>
</div>
<div class="mediasection" id="mediasection1">
<input type="text" size ="50" id="url1" placeholder="Media URL"/>
<input type="radio" name ="media1" id="image1"/> Image
<input type="radio" name ="media1" id="video1"/> Video
</div>
</div> 
```

### JavaScript

```
function addMedia() {
var clonemedia = $("mediasection1").cloneNode(true);
clonemedia.setAttribute("id", "mediasection"+secCount);
//mediasection1 and mediasection2
var allRadio = clonemedia.querySelectorAll("input");
allRadio[0].setAttribute("id", "url"+secCount);
allRadio[1].setAttribute("name", "media"+secCount);
allRadio[1].setAttribute("id", "image"+secCount);   
allRadio[2].setAttribute("name", "media"+secCount);
allRadio[2].setAttribute("id", "video"+secCount);
clonemedia.appendChild(allRadio[0]);
clonemedia.appendChild(allRadio[1]);
clonemedia.appendChild(allRadio[2]);
$("sGroup").appendChild(clonemedia);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T05:58:33.943

抱歉，这是一个非常老的问题，但万一人们确实以某种方式发现了这个问题，那是因为我的 div 在我的单选按钮之上，所以我无法点击它们。没有提供的 CSS 隐藏了我的一个 div，所以我什至不知道（我的朋友做了 CSS，我做了 javascript）。

# command-line - 如何正确转义双百分比参数，即 %%x 以在回显输出中正确显示它们

> ID：10564033
> 
> 赞同：1
> 
> 时间：2012-05-12T13:09:04.697
> 
> 标签：command-line, windows-xp, cmd

我想做的是`echo`在控制台上放一条简单的消息说：

```
variable named %%x has value of 'this is text inside the variable 
```

所以我必须做的命令必须转义属于变量名的百分比，这样它就不会评估。通常，转义字符`%`是 another `%`。所以这有效：

```
echo %%variable%% has value: %variable% 
```

但这并没有，似乎`for`循环中使用的双百分比变量总是评估：

```
echo %%%%x has value: %%x 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T14:23:45.240

这是一个似乎有效的愚蠢技巧：

```
setlocal enabledelayedexpansion
set percent=%%
for %%a in (*) do (
    echo !percent!!percent!a is %%a
) 
```

或者你可以做`set dblpercent=%%%%`...`echo !dblpercent!a`

# image - 保护复制、检索和下载图像的密码

> ID：10564042
> 
> 赞同：0
> 
> 时间：2012-05-12T13:10:00.337
> 
> 标签：image, passwords, password-protection

我使用的一个网站有很多图片。每当我尝试复制图像（例如，复制到 MS Word 中）时，Word 都会请求用户名和密码。如果我没有给出正确的密码，那么它只会给出一个图像大小的空白框。我以前在任何其他网站上都没有看到过这种行为，但这似乎是一种不错的技术。我可以在我的网站上复制这个效果吗？

我会链接到该网站，但它需要一个帐户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T13:30:33.627

通过 ctrl+c、ctrl+v 或单击鼠标右键？我认为它是用 javascript 制作的，它会听一些键盘事件。它不安全，实际上很容易禁用它。

例如，到 ctrl+c/v

函数验证（）{ var ctrl=window.event.ctrlKey; var key=window.event.keyCode; if (ctrl && key==67) {alert("CTRL+C"); event.keyCode=0; event.returnValue=false;} if (ctrl && key==86) {alert("CTRL+V"); event.keyCode=0; event.returnValue=false;} }

function click() { if (event.button==2) { alert('不要这样做'); } }

# thread-safety - UniVerse 数据库 UniSession 实例 - 它可以被多个线程同时使用吗？

> ID：10564044
> 
> 赞同：1
> 
> 时间：2012-05-12T13:10:10.110
> 
> 标签：thread-safety, universe

UODOTNET 文档没有明确说明一个会话实例可以被多个线程使用，但它说“正如我们期望 UniObjects for .NET 可以在多线程环境中使用，......”。

我只想确认这实际上确实意味着我可以在同一个 UniSession 实例上同时激活两个 SELECT。

我想如果它确实像这样工作，那么这意味着 SELECT 将不得不引用不同的选择列表。那是对的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T15:18:35.170

UniObjects 不支持将同一会话用于多个并行操作。本质上，使用同一个会话进行并行操作就像在 TCL 尝试同时做两件事。当我在不同的线程上尝试两个长时间运行的选择时，我收到以下错误：

**无法从传输连接读取数据：阻塞操作被 WSACancelBlockingCall 调用中断。[IBM U2][UODOTNET - UNIRPC][ErrorCode=81009] RPC 失败**

UniObjects*确实*支持使用不同会话的并行线程。因为它们是不同的会话，除非您使用已保存的，否则选择列表不会发生冲突。

如果您担心许可问题，您可以利用幻像来执行这些并行操作。Phantom 允许异步运行基本程序。据我了解，幻影仅在某些情况下使用许可证（例如：执行 HTTP 请求）。您的单线程 .NET 应用程序可以调用一个基本进程两次，每次都会创建一个幻像来运行您的选择并将结果保存到某个任意位置。我们使用以下 PICK 基本代码来运行带有幻像的任意基本程序“PHANTOM.TEST”：

```
EXECUTE "PHANTOM PHANTOM.TEST ":RECORDID 
```

我尽量避免幻像，因为我还没有找到一种优雅的方法来确定幻像已经完成运行。

幻影许可参考：[https ://u2tc.rocketsoftware.com/documentation/PDF/1177927.pdf](https://u2tc.rocketsoftware.com/documentation/PDF/1177927.pdf)

# apache - 禁止访问具有特定名称的文件夹

> ID：10564051
> 
> 赞同：1
> 
> 时间：2012-05-12T13:11:16.023
> 
> 标签：apache, .htaccess

亲爱的 StackOverflowers，

我正在寻找一种方法来禁用对特定名称的所有文件夹的访问，我使用我的网络应用程序动态创建文件夹，但其中一些文件夹不得被其他人访问。

说我的应用程序创建文件夹：图像视频脚本

我想让所有创建的文件夹脚本都无法访问？我将如何去实现这一切？我对htaccess不太熟悉，我知道可以在每个目录中放置一个htaccess文件，但我想限制磁盘读/写以确保应用程序足够快，有没有通用的方法来做到这一点1个.htaccess文件？

一百万提前谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T13:17:13.617

使用[Apache 的`<DirectoryMatch>`指令](http://httpd.apache.org/docs/2.2/mod/core.html#directorymatch)，您可以轻松地*在服务器级别或 VirtualHost 级别进行*设置。但是，您需要访问核心配置文件才能执行此操作。

```
<DirectoryMatch "(Images|Videos|Scripts)" >
  Order deny,allow
  Deny from all
</DirectoryMatch> 
```

要在 .htaccess 文件中完成相同的操作，您可能需要`RewriteRule`在顶层创建一个。

```
RewriteEngine On
# Match directory names and forbid access with the F flag
RewriteRule  .*(Images|Videos|Scripts) - [F] 
```

以上应匹配请求，如：

```
http://example.com/stuff/Images/otherstuff
http://example.com/Images1234
http://example.com/dir/dir/dir/Videos/123.mpg 
```

# c++ - 以向量为成员的结构的 C++ 大小

> ID：10564052
> 
> 赞同：1
> 
> 时间：2012-05-12T13:11:28.033
> 
> 标签：c++, vector, struct, sizeof, std

我有一个结构，其中有一些向量作为成员：

```
struct my_struct
{
    std::vector<int> x;
//  more members here
}; 
```

和 my_struct 的一个实例：

```
my_struct A; 
```

结构中的向量在程序执行期间可以明显改变，例如

```
A.x.resize(...); 
```

或 Axpush_back(...);

我的问题是，有没有办法在程序的某个时候知道 A 的内存大小？由于向量成员，sizeof(A) 不会返回正确答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T13:21:06.147

向量的大小不会影响结构的大小，因为向量分配内存以保存堆上的对象，至少使用默认分配器。此外，将结构内容写入文件时，永远不会写入向量保存的对象，只会写入向量数据成员的值。这些对象由某种指针中的向量引用，因此写入文件的是指针的值（地址），而不是它指向的数据。要将向量及其对象写入文件，您需要自己实现。也许 boost serialize 在这里可能会有所帮助。

# xaml - 绑定到 ToString 以外的东西：如何？

> ID：10564053
> 
> 赞同：0
> 
> 时间：2012-05-12T13:11:30.823
> 
> 标签：xaml, binding, methods

[我对命名空间中PhysicalAddress](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.physicaladdress.aspx)类的默认`ToString()`输出不太满意。输出的格式类似于“AABBCCDDEEFF”，因此我编写了一个扩展方法，将其返回格式为“AA-BB-CC-DD-FF”。`System.Net.NetworkInformation``ToDelimitedString()`

到现在为止还挺好。现在我想通过使用数据绑定在我的 WPF 应用程序中显示它，但这就是我的路要走的地方。我真的不知道如何绑定到`ToString()`对象实例的默认值以外的任何东西。

有人请指出我正确的方向，我在理解 msdn 文档方面遇到了极大的困难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T13:36:30.377

在这种情况下，最简单的方法可能是编写一个转换器：

```
public class PhysicalAdressConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        var address = value as PhysicalAddress;
        if (address != null)
            return address.ToDelimitedString();
        return value;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotSupportedException();
    }
} 
```

并在绑定中指定此转换器`PhysicalAddress`

如果您使用的是 MVVM 模式，您还可以创建一个执行格式化并绑定到该属性的属性：

```
public string FormattedPhysicalAddress
{
    get { return this.PhysicalAddress.ToDelimitedString(); }
} 
```

顺便说一句，绑定不会`ToString()`像您假设的那样绑定到方法。它绑定到值本身，但如果目标类型是`string`，*那么*它调用`ToString()`使其成为字符串......

# wpf - 如何设置拆分按钮的样式

> ID：10564054
> 
> 赞同：4
> 
> 时间：2012-05-12T13:11:32.030
> 
> 标签：wpf, styles, custom-controls, split-button

使用超出[扩展的 wpf 工具包](http://wpftoolkit.codeplex.com/)中的 SplitButton ，我想使用我拥有的样式“blueButtonStyle”。

尝试直接应用样式是行不通的，因为按钮真的不是按钮！所以我想知道如何解决这个问题。

理想情况下，拆分按钮上有一个按钮属性，我可以将 blueButtonStyle 应用到该属性，但我没有看到。

我应该如何处理这个？

干杯，
贝里尔

# 想要的外观（blueButtonStyle）

![在此处输入图像描述](../Images/96a531c2e56530de7e0bd36fea96d2b8.png)

# 默认外观

![在此处输入图像描述](../Images/7465b4c3875097641f2ab9634ce5d1bd.png)

# 当前有错误的 xaml 定义（不适用的样式）

```
<toolkit:SplitButton DockPanel.Dock="Right" Content="{resx:Resx SplitButton_Add}" 
                     Height="25" Width="80" HorizontalAlignment="Right" Margin="15" 
                     Style="{StaticResource blueButtonStyle}"
                     >
    <toolkit:SplitButton.DropDownContent>
        <StackPanel Orientation="Vertical" >
            <StackPanel.Resources>
                <Style TargetType="{x:Type Button}" BasedOn="{StaticResource blueButtonStyle}">
                </Style>
            </StackPanel.Resources>
            <Button Content="Person" Command="{Binding AddNewPersonCommand}"/>
            <Button Content="Company" Command="{Binding AddNewOrganizationCommand}"/>
        </StackPanel>
    </toolkit:SplitButton.DropDownContent>
</toolkit:SplitButton> 
```

# 拆分按钮 xaml

```
<!-- =============================================================================== -->
<!-- SplitButton                                                                     -->
<!-- =============================================================================== -->
<Style TargetType="{x:Type local:SplitButton}">
    <Setter Property="BorderThickness" Value="1" />
    <Setter Property="IsTabStop" Value="False" />
    <Setter Property="HorizontalContentAlignment" Value="Center" />
    <Setter Property="VerticalContentAlignment" Value="Center" />
    <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}" />
    <Setter Property="Padding" Value="3" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:SplitButton}">
                <Grid x:Name="MainGrid" SnapsToDevicePixels="True">
                    <chrome:ButtonChrome x:Name="ControlChrome" Background="{TemplateBinding Background}" RenderEnabled="{TemplateBinding IsEnabled}" CornerRadius="2.75">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <Button x:Name="PART_ActionButton" Margin="0" 
                                    HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" 
                                    VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}" Padding="{TemplateBinding Padding}" >
                                <Button.Template>
                                    <ControlTemplate TargetType="Button">
                                        <ContentPresenter />
                                    </ControlTemplate>
                                </Button.Template>
                                <Grid>
                                    <chrome:ButtonChrome x:Name="ActionButtonChrome"
                                               CornerRadius="2.75, 0, 0, 2.75"                                                         
                                               RenderNormal="False"
                                               RenderEnabled="{TemplateBinding IsEnabled}"
                                                          RenderMouseOver="{Binding IsMouseOver, ElementName=PART_ActionButton}"
                                                          RenderPressed="{Binding IsPressed, ElementName=PART_ActionButton}">
                                        <ContentPresenter Name="ActionButtonContent" Margin="{TemplateBinding Padding}" Content="{TemplateBinding Content}" ContentTemplate="{TemplateBinding ContentTemplate}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" RecognizesAccessKey="true" />
                                    </chrome:ButtonChrome>
                                </Grid>
                            </Button>
                            <ToggleButton x:Name="PART_ToggleButton"
                                  Grid.Column="1"
                                  IsTabStop="False"
                                  IsChecked="{Binding IsOpen, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}"
                                  IsHitTestVisible="{Binding IsOpen, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource InverseBoolConverter}}">
                                <ToggleButton.Template>
                                    <ControlTemplate TargetType="ToggleButton">
                                        <ContentPresenter />
                                    </ControlTemplate>
                                </ToggleButton.Template>
                                <Grid>
                                    <chrome:ButtonChrome x:Name="ToggleButtonChrome"                                                         
                                               CornerRadius="0, 2.75, 2.75, 0"
                                               RenderNormal="False"
                                               RenderChecked="{TemplateBinding IsOpen}"
                                               RenderEnabled="{TemplateBinding IsEnabled}"
                                                          RenderMouseOver="{Binding IsMouseOver, ElementName=PART_ToggleButton}"
                                                          RenderPressed="{Binding IsPressed, ElementName=PART_ToggleButton}">
                                        <Grid x:Name="arrowGlyph" IsHitTestVisible="False" Margin="4,3,4,3">
                                            <Path Width="7" Height="4" Data="M 0,1 C0,1 0,0 0,0 0,0 3,0 3,0 3,0 3,1 3,1 3,1 4,1 4,1 4,1 4,0 4,0 4,0 7,0 7,0 7,0 7,1 7,1 7,1 6,1 6,1 6,1 6,2 6,2 6,2 5,2 5,2 5,2 5,3 5,3 5,3 4,3 4,3 4,3 4,4 4,4 4,4 3,4 3,4 3,4 3,3 3,3 3,3 2,3 2,3 2,3 2,2 2,2 2,2 1,2 1,2 1,2 1,1 1,1 1,1 0,1 0,1 z" Fill="#FF000000" />
                                        </Grid>
                                    </chrome:ButtonChrome>
                                </Grid>
                            </ToggleButton>
                        </Grid>
                    </chrome:ButtonChrome>

                    <Popup x:Name="PART_Popup" 
                     HorizontalOffset="1"
                     VerticalOffset="1"
                     AllowsTransparency="True"
                     StaysOpen="False"
                     Placement="Bottom"
                     Focusable="False"
                     IsOpen="{Binding IsChecked, ElementName=PART_ToggleButton}">
                        <!-- TODO: Create Popup Styles that can be reused on all popups in the toolkit-->
                        <Border BorderThickness="1" Background="{StaticResource PopupBackgroundBrush}" BorderBrush="{StaticResource ColorPickerDarkBorderBrush}">
                            <ContentPresenter Content="{TemplateBinding DropDownContent}" />
                        </Border>
                    </Popup>

                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

# 蓝色按钮样式

```
<!--BlueButtonStyle-->
<Style x:Key="BlueButtonStyle" TargetType="Button">
    <Setter Property="Padding" Value="20,0" />
    <Setter Property="Margin" Value="3" />
    <Setter Property="Height" Value="23" />
    <Setter Property="MinWidth" Value="75" />
    <Setter Property="Foreground" Value="White" />

    <Setter Property="FocusVisualStyle">
        <Setter.Value>
            <Style>
                <Setter Property="Control.Template">
                    <Setter.Value>
                        <ControlTemplate>
                            <Rectangle RadiusX="5" RadiusY="5" Stroke="Gold" StrokeThickness="1" />
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </Setter.Value>
    </Setter>

    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Button}">
                <Grid x:Name="rootGrid" RenderTransformOrigin=".5,.5">

                    <Grid.Resources>
                        <SolidColorBrush x:Key="borderBrush" Color="Transparent"/>
                    </Grid.Resources>

                    <Grid.RenderTransform>
                        <TranslateTransform X="0" Y="0"/>
                    </Grid.RenderTransform>
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>
                    <Rectangle Grid.RowSpan="2" x:Name="bottomBorder" RadiusX="5" RadiusY="5" 
                               Stroke="{StaticResource borderBrush}" StrokeThickness="2"
                               Fill="{StaticResource headerBrush}" />
                    <Rectangle x:Name="highlight" Margin="2.5" Fill="White" RadiusX="3" RadiusY="3">
                        <Rectangle.OpacityMask>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                <GradientStop Color="#D0FFFFFF" Offset="0"/>
                                <GradientStop Color="#00FFFFFF" Offset="1"/>
                            </LinearGradientBrush>
                        </Rectangle.OpacityMask>
                    </Rectangle>
                    <ContentPresenter Grid.RowSpan="2"
                        HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" 
                        VerticalAlignment="{TemplateBinding VerticalContentAlignment}" 
                        Margin="{TemplateBinding Padding}"
                        SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" 
                        RecognizesAccessKey="True" RenderTransformOrigin="0.5,0.5" x:Name="contentPresenter" />
                </Grid>
                <ControlTemplate.Resources>
                    <Storyboard x:Key="buttonDown_Animation">
                        <DoubleAnimation Storyboard.TargetName="rootGrid" 
                                         Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                                         From="0" To="0" Duration="0:0:0" 
                                         />
                    </Storyboard>
                </ControlTemplate.Resources>

                <ControlTemplate.Triggers>
                    <Trigger Property="IsFocused" Value="True">
                        <Setter TargetName="bottomBorder" Property="Stroke" Value="Black" />
                    </Trigger>

                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter TargetName="bottomBorder" Property="Stroke" Value="Black" />
                    </Trigger>

                    <Trigger Property="IsEnabled" Value="False">
                        <Setter TargetName="bottomBorder" Property="Fill" Value="DarkGray" />
                        <Setter TargetName="bottomBorder" Property="Stroke" Value="Silver" />
                        <Setter TargetName="bottomBorder" Property="StrokeThickness" Value="4" />
                        <Setter TargetName="highlight" Property="Fill" Value="#20FFFFFF" />
                    </Trigger>

                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T16:14:33.790

我要做的第一件事是确保 BlueButtonStyle 实际上适用于这种类型的控件。

样式具有需要设置的 TargetType 属性，该属性定义了它们可以影响的属性列表。你的风格应该是这样的：

```
<Style x:Key="blueButtonStyle" TargetType="{x:Type toolkit:SplitButton}">
    <!-- edit stuff here -->
</Style> 
```

现在，假设您已经这样做了，但是在您的样式中绑定背景元素和诸如此类的东西不起作用，您可能需要编辑 SplitButton 的 ControlTemplate 以允许这种样式。ControlTemplate 定义了构成给定控件的控件（让我换种说法：此 SplitButton 的 ControlTemplate 定义了哪些子控件一起构成了此 SplitButton）。如果 ControlTemplate 中的控件未设置为允许绑定背景和前景等属性，则任何样式都无法更改它们。

要获得 ControlTemplate，您需要某种反编译工具。为此，我使用 Blend。

进入 Blend 后，创建一个新项目并将 SplitButton 添加到画布。在左下角的 TreeView 窗格中，您应该会看到 SplitButton 出现。右键单击它，导航到“编辑模板...”，然后选择“编辑副本”。

这将为该控件创建一个精确的 ControlTemplate 副本，您现在可以像使用任何其他 WPF 资源一样使用它。

在该模板中，您需要查找构成您要设置样式的 SplitButton 的控件。在这些控件上，确保要设置样式的属性设置为 TemplateBindings。它们应该看起来像这样：

```
<ControlTemplate x:Key="splitButtonTemplate" TargetType="{x:Type toolkit:SplitButton}">
    <!-- some data here.... -->
    <Button Background="{TemplateBinding Background}" Foreground="{TemplateBinding Foreground}" />
</ControlTemplate> 
```

只要您要设置样式的属性以这种方式绑定，作为 TemplateBindings，它们就会获取您的样式所做的更改。

# c++ - OpenGL 绘制（颜色）的东西很奇怪，片段着色器把事情搞砸了？

> ID：10564063
> 
> 赞同：0
> 
> 时间：2012-05-12T13:12:36.740
> 
> 标签：c++, opengl, rendering, shader, lighting

我编写了一个小程序来简单地加载 Wavefront OBJ 网格文件并使用适当的照明（Phong 着色）显示几何图形，但是渲染似乎有问题，这很奇怪。当我简单地将片段着色器更改为均匀着色（没有照明）时，没关系，但是每当我将一些规范计算推入我的代码时，问题就开始出现。

我几乎可以肯定问题来自片段着色器和/或法线，因为几何坐标是一致的（转到 GL_POINT，点已正确定位），只有着色不能正常工作。

我会把我的代码放在这里；我也会上传渲染结果。我会感谢任何能找出问题所在的人。

这也是天际头盔的 OBJ 文件！： [helmet.obj](http://www.jurchin.com/helmet.obj)

注意：我使用 math32（包含在 GLTools 中）库进行透视和其他矩阵计算，可在此处获得： [GLTools.zip](http://jurchin.com/GLTools.zip)

**渲染功能：**

```
void render(HDC hdc)
{
    //Some matrix calculations start

    unsigned int tTime=GetTickCount();
    float angle=(tLastTime!=0)?(float(GetTickCount()-tLastTime)/(1.0f/speed)):(0);
    if(tLastTime==0) tLastTime=GetTickCount();

    float projection_matrix[16],rotation_matrix[16],MV_matrix[16],temp_matrix[16];

    m3dRotationMatrix44(rotation_matrix,angle,2.0f,4.0f,2.0f);
    Rotate(MV_matrix,angle,2.0f,4.0f,2.0f,CenterX,CenterY,CenterZ);

    m3dTranslationMatrix44(temp_matrix,-CenterX,-CenterY,(-CenterZ)-40.0f);

    Multiply(temp_matrix,MV_matrix);

    PerspectiveMatrix(projection_matrix,60.0f,1.0f,0.0001f,1000.0f);

    //Some matrix calculations end

    glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT|GL_STENCIL_BUFFER_BIT);

    glUseProgramObjectARB(pShaderProgram);

    glUniformMatrix4fvARB(uniMVMatrix,1,false,MV_matrix);
    glUniformMatrix4fvARB(uniProjectionMatrix,1,false,projection_matrix);
    glUniformMatrix4fvARB(uniRotationMatrix,1,false,rotation_matrix);
    glUniform3fvARB(uniLightPosition,1,light_position);

    glBindVertexArray(objVertexArray);

    glDrawArrays(GL_TRIANGLES,0,nVertices);

    glBindVertexArray(0);

    SwapBuffers(hdc);

    return;
} 
```

**主要功能（上下文创建/初始化）：**

```
int WINAPI WinMain(HINSTANCE hInstance,HINSTANCE hPrevInstance,LPSTR lpCmdLine,int nShowCmd)
{
    WNDCLASSEX wndcls;

    wndcls.cbSize=sizeof(WNDCLASSEX);
    wndcls.cbClsExtra=0;
    wndcls.cbWndExtra=0;
    wndcls.hbrBackground=(HBRUSH)(COLOR_WINDOW+1);
    wndcls.style=CS_HREDRAW|CS_VREDRAW|CS_OWNDC;
    wndcls.hCursor=(HCURSOR)LoadCursor(NULL,IDC_ARROW);
    wndcls.hIcon=LoadIcon(hInstance,IDI_APPLICATION);
    wndcls.hIconSm=NULL;
    wndcls.hInstance=hInstance;
    wndcls.lpfnWndProc=(WNDPROC)WndProc;
    wndcls.lpszClassName="Win32Class";
    wndcls.lpszMenuName=NULL;

    RegisterClassEx(&wndcls);
    HWND hwnd=CreateWindowEx(0,"Win32Class","OpenGL Projekt",WS_OVERLAPPEDWINDOW,CW_USEDEFAULT,CW_USEDEFAULT,1280,720,NULL,NULL,hInstance,NULL);

    HDC hdc=GetDC(hwnd);

    PIXELFORMATDESCRIPTOR pfd=
    {
        sizeof(PIXELFORMATDESCRIPTOR),
        1,
        PFD_DRAW_TO_WINDOW|PFD_SUPPORT_OPENGL|PFD_DOUBLEBUFFER,
        PFD_TYPE_RGBA,
        32,
        0,0,0,0,0,0,
        0,
        0,
        0,
        0,0,0,0,
        24,
        8,
        0,
        PFD_MAIN_PLANE,
        0,
        0,0,0
    };

    int pf=ChoosePixelFormat(hdc,&pfd);

    SetPixelFormat(hdc,pf,&pfd);
    HGLRC hglrc=wglCreateContext(hdc);
    wglMakeCurrent(hdc,hglrc);

    setup_extensions(); // using wglGetProcAddress

    wglMakeCurrent(hdc,NULL);
    DestroyWindow(hwnd); // that was just for getting function pointers!

    //Real window/context:
    hwnd=CreateWindowEx(0,"Win32Class","OpenGL Projekt",WS_OVERLAPPED|WS_SYSMENU|WS_MINIMIZEBOX|WS_CAPTION,CW_USEDEFAULT,CW_USEDEFAULT,700,722,NULL,NULL,hInstance,NULL);
    hdc=GetDC(hwnd);

    const int attribs[]={
        WGL_DRAW_TO_WINDOW_ARB,1,
        WGL_SUPPORT_OPENGL_ARB,1,
        WGL_DOUBLE_BUFFER_ARB,1,
        WGL_PIXEL_TYPE_ARB,WGL_TYPE_RGBA_ARB,
        WGL_COLOR_BITS_ARB,32,
        WGL_DEPTH_BITS_ARB,24,
        WGL_STENCIL_BITS_ARB,8,
        WGL_SAMPLE_BUFFERS_ARB,1, // MSAA enabled
        WGL_SAMPLES_ARB,8, // MSAA 8x
        0};
    int wpf[3];
    unsigned int nwpf;

    wglChoosePixelFormatARB(hdc,attribs,NULL,3,wpf,&nwpf);
    SetPixelFormat(hdc,wpf[0],&pfd);

    const int attribs_cc[]={
        WGL_CONTEXT_MAJOR_VERSION_ARB,3,
        WGL_CONTEXT_MINOR_VERSION_ARB,3,
        WGL_CONTEXT_PROFILE_MASK_ARB,WGL_CONTEXT_CORE_PROFILE_BIT_ARB,
        0
    };

    hglrc=wglCreateContextAttribsARB(hdc,NULL,attribs_cc);
    wglMakeContextCurrentARB(hdc,hdc,hglrc);

    setup();

    ShowWindow(hwnd,nShowCmd);

    MSG msg;
    bool done=false;

    while(!done)
    {
        if(PeekMessage(&msg,NULL,0,0,PM_REMOVE))
            if(msg.message==WM_QUIT)
                done=true;
            else
            {
                TranslateMessage(&msg);
                DispatchMessage(&msg);
            }
        else
            render(hdc);
    }

    return (int)msg.wParam;
} 
```

**设置：**

```
void setup()
{
    glClearColor(0.11,0.11,0.11,1.0);
    glEnable(GL_MULTISAMPLE_ARB);
    glEnable(GL_DEPTH_TEST);
    glDisable(GL_BLEND);

    glPolygonMode(GL_FRONT_AND_BACK,GL_FILL);

    //Shader loading start

    FILE *f;
    int fsize,status;
    char *shadersrc[1];
    unsigned int shVertexShader=0,shFragmentShader=0;

    shVertexShader=glCreateShaderObjectARB(GL_VERTEX_SHADER_ARB);
    shFragmentShader=glCreateShaderObjectARB(GL_FRAGMENT_SHADER_ARB);

    f=fopen("VShader","rb");
    fseek(f,0,SEEK_END);
    fsize=ftell(f);
    fseek(f,0,SEEK_SET);
    shadersrc[0]=new char[fsize];
    fread(shadersrc[0],sizeof(char),fsize,f);

    glShaderSourceARB(shVertexShader,1,(const char**)shadersrc,&fsize);

    free(shadersrc[0]);
    fclose(f);

    f=fopen("FShader","rb");
    fseek(f,0,SEEK_END);
    fsize=ftell(f);
    fseek(f,0,SEEK_SET);
    shadersrc[0]=new char[fsize];
    fread(shadersrc[0],sizeof(char),fsize,f);

    glShaderSourceARB(shFragmentShader,1,(const char**)shadersrc,&fsize);

    free(shadersrc[0]);
    fclose(f);

    glCompileShaderARB(shVertexShader);

    glGetObjectParameterivARB(shVertexShader,GL_OBJECT_COMPILE_STATUS_ARB,&status);
    if(!status)
    {
        char errinfo[512];

        glGetInfoLogARB(shVertexShader,511,NULL,errinfo);

        MessageBox(NULL,errinfo,"Error",MB_OK);

        exit(EXIT_FAILURE);
    }

    glCompileShaderARB(shFragmentShader);

    glGetObjectParameterivARB(shFragmentShader,GL_OBJECT_COMPILE_STATUS_ARB,&status);
    if(!status)
    {
        char errinfo[512];

        glGetInfoLogARB(shFragmentShader,511,NULL,errinfo);

        MessageBox(NULL,errinfo,"Error",MB_OK);

        exit(EXIT_FAILURE);
    }

    pShaderProgram=glCreateProgramObjectARB();

    glAttachObjectARB(pShaderProgram,shVertexShader);
    glAttachObjectARB(pShaderProgram,shFragmentShader);

    glBindAttribLocationARB(pShaderProgram,0,"vertices");
    glBindAttribLocationARB(pShaderProgram,1,"normals");

    glLinkProgramARB(pShaderProgram);

    glGetObjectParameterivARB(pShaderProgram,GL_OBJECT_LINK_STATUS_ARB,&status);
    if(!status)
    {
        char errinfo[512];

        glGetInfoLogARB(pShaderProgram,511,NULL,errinfo);

        MessageBox(NULL,errinfo,"Error",MB_OK);

        exit(EXIT_FAILURE);
    }

    glDeleteObjectARB(shVertexShader);
    glDeleteObjectARB(shFragmentShader);

    uniMVMatrix=glGetUniformLocationARB(pShaderProgram,"MV_matrix");
    uniProjectionMatrix=glGetUniformLocationARB(pShaderProgram,"projection_matrix");
    uniRotationMatrix=glGetUniformLocationARB(pShaderProgram,"rotation_matrix");
    uniLightPosition=glGetUniformLocationARB(pShaderProgram,"light_position");

    //Shader loading end

    //Loading from OBJ file start

    if(!LoadOBJFile(OBJFile,&vertices,&normals,&nVertices))
    {
        char msg[700];
        sprintf(msg,"Cannot open file \"%s\".",OBJFile);
        MessageBox(NULL,msg,"Error",MB_OK);
        exit(EXIT_FAILURE);
    }

    //Loading from OBJ file end

    GetCenter(vertices,nVertices,&CenterX,&CenterY,&CenterZ);

    light_position[0]=0.0f;
    light_position[0]=0.0f;
    light_position[0]=4000.0f;

    glGenVertexArrays(1,&objVertexArray);
    glBindVertexArray(objVertexArray);

    glGenBuffers(1,&buffVertexArray);
    glBindBuffer(GL_ARRAY_BUFFER,buffVertexArray);
    glBufferData(GL_ARRAY_BUFFER,sizeof(float)*3*nVertices,vertices,GL_DYNAMIC_DRAW);
    glGenBuffers(1,&buffNormalArray);
    glBindBuffer(GL_ARRAY_BUFFER,buffNormalArray);
    glBufferData(GL_ARRAY_BUFFER,sizeof(float)*3*nVertices,normals,GL_DYNAMIC_DRAW);

    glEnableVertexAttribArrayARB(0);
    glEnableVertexAttribArrayARB(1);

    glBindBuffer(GL_ARRAY_BUFFER,buffVertexArray);
    glVertexAttribPointerARB(0,3,GL_FLOAT,false,0,NULL);
    glBindBuffer(GL_ARRAY_BUFFER,buffNormalArray);
    glVertexAttribPointerARB(1,3,GL_FLOAT,false,0,NULL);

    glBindVertexArray(0);

    return;
} 
```

**顶点着色器：**

```
#version 330 core

uniform mat4 MV_matrix;
uniform mat4 projection_matrix;
uniform mat4 rotation_matrix;

in vec3 vertices;
in vec3 normals;

smooth out vec3 f_vertices;
smooth out vec3 f_normals;

void main(void)
{
    gl_Position=projection_matrix*MV_matrix*vec4(vertices,1.0);

    f_vertices=(MV_matrix*vec4(vertices,1.0)).xyz;

    f_normals=(rotation_matrix*vec4(normals,1.0)).xyz;

    return;
} 
```

**片段着色器：**

```
#version 330 core

uniform vec3 light_position;

smooth in vec3 f_vertices;
smooth in vec3 f_normals;

out vec4 fragcolor;

void main(void)
{
    vec3 to_light_dir=light_position-f_vertices;

    float diff=min(1.0,(dot(normalize(f_normals),normalize(to_light_dir))));

    fragcolor=diff*vec4(0.5,0.5,0.5,1.0);
} 
```

**OBJ 文件加载器：**

```
#include <string>
#include <fstream>
#include <vector>
#include "math3d.h"

struct vertex
{
    float x;
    float y;
    float z;
    float w;
};

struct normal
{
    float x;
    float y;
    float z;
};

struct texcoord
{
    float u;
    float v;
    float w;
};

struct face
{
    unsigned int vertices[3];
    unsigned int normals[3];
    unsigned int texcoords[3];
};

using namespace std;

bool LoadOBJFile(const char *path,float **vertices,float **normals,unsigned int *num_vertices)
{
    char id[1024];
    float fa[9];
    int nc;
    vertex tvertex;
    normal tnormal;
    texcoord ttexcoord;
    face tface;
    bool gotnormal=false;

    vector<vertex> _v;
    vector<normal> _vn;
    vector<texcoord> _vt;
    vector<face> _f;

    ifstream f(path);

    if(!f.is_open()) return false;

    for(string line;getline(f,line);)
    {
        if(line.c_str()[0]=='#' || line.c_str()[0]=='\x0A' || line.c_str()[0]=='\x0D' || line.size()==0) continue;

        sscanf(line.c_str(),"%s",id);

        if(strcmp(id,"v")==0)
        {
            if(sscanf(line.c_str(),"%s %f %f %f %f",id,fa,fa+1,fa+2,fa+3)==5)
            {
                tvertex.x=fa[0];
                tvertex.y=fa[1];
                tvertex.z=fa[2];
                tvertex.w=fa[3];
            }else if(sscanf(line.c_str(),"%s %f %f %f",id,fa,fa+1,fa+2)==4)
            {
                tvertex.x=fa[0];
                tvertex.y=fa[1];
                tvertex.z=fa[2];
                tvertex.w=1.0f;
            }else
            {
                return false;
            }
            _v.push_back(tvertex);
        }else if(strcmp(id,"vn")==0)
        {
            if(sscanf(line.c_str(),"%s %f %f %f",id,fa,fa+1,fa+2)==4)
            {
                tnormal.x=fa[0];
                tnormal.y=fa[1];
                tnormal.z=fa[2];
            }else
            {
                return false;
            }
            _vn.push_back(tnormal);
        }else if(strcmp(id,"vn")==0)
        {
            if(sscanf(line.c_str(),"%s %f %f %f",id,fa,fa+1,fa+2)==4)
            {
                ttexcoord.u=fa[0];
                ttexcoord.v=fa[1];
                ttexcoord.w=fa[2];
            }else if(sscanf(line.c_str(),"%s %f %f",id,fa,fa+1)==3)
            {
                ttexcoord.u=fa[0];
                ttexcoord.v=fa[1];
                ttexcoord.w=0.0f;
            }else if(sscanf(line.c_str(),"%s %f %f %f",id,fa)==2)
            {
                ttexcoord.u=fa[0];
                ttexcoord.v=0.0f;
                ttexcoord.w=0.0f;
            }else
            {
                return false;
            }
            _vt.push_back(ttexcoord);
        }else if(strcmp(id,"f")==0)
        {
            if(sscanf(line.c_str(),"%s %f/%f/%f %f/%f/%f %f/%f/%f",id,fa,fa+1,fa+2,fa+3,fa+4,fa+5,fa+6,fa+7,fa+8)==10)
            {
                for(int j=0;j<3;j++)
                {
                    tface.vertices[j]=fa[j*3];
                    tface.normals[j]=fa[j*3+2];
                    tface.texcoords[j]=fa[j*3+1];
                }
            }else if(sscanf(line.c_str(),"%s %f//%f %f//%f %f//%f",id,fa,fa+2,fa+3,fa+5,fa+6,fa+8)==7)
            {
                for(int j=0;j<3;j++)
                {
                    tface.vertices[j]=fa[j*3];
                    tface.normals[j]=fa[j*3+2];
                    tface.texcoords[j]=0;
                }
            }else if(sscanf(line.c_str(),"%s %f/%f %f/%f %f/%f",id,fa,fa+1,fa+3,fa+4,fa+6,fa+7)==7)
            {
                for(int j=0;j<3;j++)
                {
                    tface.vertices[j]=fa[j*3];
                    tface.normals[j]=0;
                    tface.texcoords[j]=fa[j*3+1];
                }
            }else if(sscanf(line.c_str(),"%s %f %f %f",id,fa,fa+3,fa+6)==4)
            {
                for(int j=0;j<3;j++)
                {
                    tface.vertices[j]=fa[j*3];
                    tface.normals[j]=0;
                    tface.texcoords[j]=0;
                }
            }else
            {
                return false;
            }
            _f.push_back(tface);
        }
    }

    *num_vertices=3*(_f.size());

    *vertices=new float[(*num_vertices)*3];
    *normals=new float[(*num_vertices)*3];

    if(_vn.size() && _f[0].normals[0])
        gotnormal=true;

    for(unsigned int i=0;i<(*num_vertices)*3;i+=3)
    {
        int iFc=int(float(i)/9.0f);
        int iVr=(i/3)%3;

        (*vertices)[i]=_v[_f[iFc].vertices[iVr]-1].x;
        (*vertices)[i+1]=_v[_f[iFc].vertices[iVr]-1].y;
        (*vertices)[i+2]=_v[_f[iFc].vertices[iVr]-1].z;

        if(gotnormal)
        {
            (*normals)[i]=_vn[_f[iFc].normals[iVr]-1].x;
            (*normals)[i+1]=_vn[_f[iFc].normals[iVr]-1].y;
            (*normals)[i+2]=_vn[_f[iFc].normals[iVr]-1].z;
        }
    }

    for(unsigned int i=0;i<(*num_vertices)*3 && !gotnormal;i+=9)
    {
        M3DVector3f norm;

        m3dFindNormal(norm,(*vertices)+i,(*vertices)+(i+3),(*vertices)+(i+6));

        for(unsigned short j=0;j<9;j+=3)
        {
            (*normals)[i+j]=norm[0];
            (*normals)[i+j+1]=norm[1];
            (*normals)[i+j+2]=norm[2];
        }
    }

    _v.~vector();
    _f.~vector();
    _vt.~vector();
    _vn.~vector();

    return true;
} 
```

**没有照明的结果（diff=1.0）：** ![在此处输入图像描述](../Images/7cb0badfd9c523dc92bab4a5671e8746.png)

**带照明的结果（下面的动画版本）：** ![在此处输入图像描述](../Images/fe0dca4b4b65ea13ad9d032963d1588f.png)

**动画版：** [1.avi (5.94MB)](http://www.jurchin.com/1.avi)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T14:29:56.670

在您的片段着色器中，两个归一化向量的点积不能大于 1，因此不需要将其限制为不大于 1：

```
float diff=min(1.0,(dot(normalize(f_normals),normalize(to_light_dir)))); 
```

相反，您可以将其钳制为不小于 0：

```
float diff=max(0.0,(dot(normalize(f_normals),normalize(to_light_dir)))); 
```

无论如何，我认为是其他原因导致了问题。它看起来不像是错误的法线，它可能是一些z-fighting。尝试将您的近平面和远平面设置得更近。或者你的几何形状太薄了？您是否启用了背面剔除？它也可以解决问题。您还应该仔细检查您的 OBJ 加载程序，以确保它 100% 正确，尤其是在读取法线时。

# android - 是否有任何 CustomView 可以让您选择任何颜色

> ID：10564067
> 
> 赞同：1
> 
> 时间：2012-05-12T13:13:27.987
> 
> 标签：android, colorbox, android-custom-view, color-picker

是否有任何可用于 android 的 CustomView 显示颜色盘（最好）或颜色网格并让您选择颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T13:15:09.390

您可以使用[API demoes](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/graphics/ColorPickerDialog.html)中的颜色选择器。

# php - php find emoji [更新现有代码]

> ID：10564068
> 
> 赞同：5
> 
> 时间：2012-05-12T13:13:28.530
> 
> 标签：php, regex, unicode, emoji

我正在尝试在我的 php 代码中检测表情符号，并阻止用户输入它。

我的代码是：

```
if(preg_match('/\xEE[\x80-\xBF][\x80-\xBF]|\xEF[\x81-\x83][\x80-\xBF]/', $value) > 0)
{
    //warning...
} 
```

但不适用于所有表情符号。有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-14T13:41:19.797

```
if(preg_match('/\xEE[\x80-\xBF][\x80-\xBF]|\xEF[\x81-\x83][\x80-\xBF]/', $value) 
```

您真的想在字符级别匹配 Unicode，而不是尝试跟踪 UTF-8 字节序列。使用`u`修饰符以字符为基础处理您的 UTF-8 字符串。

表情符号在 U+1F300–U+1F5FF 块中编码。然而：

*   日本运营商的“表情符号”集中的许多字符实际上都映射到现有的 Unicode 符号，例如卡片套装、十二生肖和一些箭头。你现在把这些符号算作“表情符号”了吗？

*   仍然有一些系统不使用新标准化的 Unicode 表情符号代码点，而是在私人使用区域中使用临时范围。每个运营商都有自己的编码。iOS 4 使用了 Softbank 套件。[更多信息。](http://code.iamcal.com/php/emoji/)您可能希望封锁整个私人使用区。

例如：

```
function unichr($i) {
    return iconv('UCS-4LE', 'UTF-8', pack('V', $i));
}

if (preg_match('/['.
    unichr(0x1F300).'-'.unichr(0x1F5FF).
    unichr(0xE000).'-'.unichr(0xF8FF).
']/u'), $value) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T17:58:00.060

来自维基百科：

> Unicode 6.0 的核心表情符号集由 722 个字符组成，其中 114 个字符映射到 6.0 之前的 Unicode 标准中的一个或多个字符序列，其余 608 个字符映射到 Unicode 6.0 中引入的一个或多个字符序列.[4] 没有专门为表情符号预留块——新符号被编码在七个不同的块中（一些是新创建的），并且存在一个名为 EmojiSources.txt 的 Unicode 数据文件，其中包含与日本供应商的旧字符集之间的映射。

这是[映射文件](http://www.unicode.org/Public/UNIDATA/EmojiSources.txt)。文件中有 722 行，每行代表 722 个表情符号之一。

这似乎不是一件容易的事情，因为没有为表情符号预留特定的块。您需要调整正则表达式以涵盖所有表情符号 unicode。

您可以像这样匹配单个 unicode：

```
\x{1F30F} 
```

1F30F 是地球表情符号的 unicode。

抱歉，我没有给你完整的答案，但这应该会让你朝着正确的方向前进。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T01:00:36.790

正确的答案是检测您在`Miscellaneous_Symbols_And_Pictographs`块中分配代码点的位置。在 Perl 中，你会使用

```
 /\p{Assigned}/ && \p{block=Miscellaneous_Symbols_And_Pictographs}/ 
```

要不就

```
/\P{Cn}/ && /\p{Miscellaneous_Symbols_And_Pictographs}/ 
```

您应该将它们组合成一个模式

```
/(?=\p{Assigned})\p{Miscellaneous_Symbols_And_Pictographs}/ 
```

我不记得 PHP 使用的 PCRE 库是否可以让您访问必要的 Unicode 字符属性。我的回忆是，它在那个特定领域相当薄弱。我认为您只有 Unicode 脚本属性和一般类别。叹。

有时你只需要使用真实的东西。

由于缺乏体面的 Unicode 支持，您可能必须自己枚举块：

```
/(?=\P{Cn})[\x{1F300}-\x{1F5FF}]/ 
```

对我来说，这就像一场维护噩梦，充满了神奇的数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-19T14:20:29.390

[这是我的解决方案，它是bobince](https://stackoverflow.com/a/10584493/623519)答案的更简单（感谢 php7）版本 。

```
<?php
if (preg_match("/[\u{1f300}-\u{1f5ff}\u{e000}-\u{f8ff}]/u", $text)) {
  // echo " oh no. Emojis not allowed!";
} 
```

**编辑**按照 bobnice 的回答的建议，这个正则表达式既排除了实际的表情符号范围（`1f300`- `1f5ff`），也排除了 bobnice 提出的您可能有兴趣阻止的其他范围。

**编辑 2**要明确：这种更简单的格式在 PHP 7.0+ 中是可能的。如果您仍在使用（现在不受支持的）PHP 版本，则需要使用原始答案。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-13T13:45:02.237

这就是我今天想出的。对于这个问题，这可能不是一个好的解决方案，但至少它有效；）

```
if(iconv('Windows-1250', 'UTF-8', iconv('UTF-8', 'Windows-1250', $value)) != $value) 
```

# mysql - SQL：选择所有匹配值'x'的记录，但当值'y'出现时停止

> ID：10564071
> 
> 赞同：0
> 
> 时间：2012-05-12T13:13:36.923
> 
> 标签：mysql, sql

我的表中有一个包含值 0 或 1 的列。现在我想选择最后一个 1 周期的开始。

想象一下，我有下一张有 2 列的表格。1 的最后一个周期是 ID 的 4 和 3。这个周期的开始是 ID = 3。

ID - 值

*   5 - 0
*   4 - 1 <-- 上一期
*   3 - 1 <-- 上一期
*   2 - 0
*   1 - 1 <-- 一段时间以前
*   0 - 0

但是如何通过一个查询（可能还有一点 PHP）选择这条记录而不选择所有记录？

**编辑：**

使用 MySQL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T13:54:19.123

您可以尝试查找值为 1 的最高 id，而最近的较低 id 的值为 0。在 sql 中，这将是：

```
SELECT p1.id FROM periods p1
WHERE p1.value = 1
AND ( SELECT p2.value FROM periods p2 
      WHERE p2.id<p1.id 
      ORDER BY p2.id DESC LIMIT 1 ) = 0
ORDER BY p1.id DESC LIMIT 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T13:26:52.950

在 mysql 中：

```
SELECT min(id)
FROM table_name
WHERE id > 3 AND value = 1 
```

在您的 php 中，您可以将数字“3”替换为您开始使用的值。

我相信这就是答案，尽管我可能不完全理解你的问题。

# objective-c - 需要内存管理帮助 - 静态类变量 Objective C

> ID：10564072
> 
> 赞同：1
> 
> 时间：2012-05-12T13:14:19.997
> 
> 标签：objective-c, ios, memory-management, static-variables

我想使用静态类变量来维护将在我的应用程序中的多个类之间共享的播放列表对象的状态。

我在我的 AppDelegate 中调用 getPlaylist，以便调用我的初始化类方法并设置 MSMutableArray。

但是，当我调用 addItemToPlaylist 时，内容变量不再是 NSMutableArray 的静态实例。相反，它指向内存中完全不同的地址——我每次调试时都指向不同的地址。

我在做任何明显错误的事情吗？提前致谢。

```
#import "Playlist.h"
static NSMutableArray *content;

@implementation Playlist

+ (void)initialize
{
    content = [NSMutableArray arrayWithCapacity:10]; 
}

+ (NSMutableArray *)getPlaylist
{
    if ([content count] == 0)
        return nil;

    return content;
}  

+ (void)addItemToPlaylist:(PlaylistTrack *)track; 
{
    [content addObject:track];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T13:20:08.263

`[NSMutableArray arrayWithCapacity]`返回一个自动释放的对象（在运行时应该抱怨没有当前的自动释放池）。

改为使用`[[NSMutableArray alloc] initWithCapacity]`并添加一个类方法以在完成后释放它。

编辑：干杯@Lvsti。

# sql - 基于文件的数据库和基于服务器的数据库有什么区别？

> ID：10564073
> 
> 赞同：13
> 
> 时间：2012-05-12T13:14:24.880
> 
> 标签：sql, database

我知道 SQL，也知道数据库的基本结构，但我不知道基于文件的数据库与基于服务器的数据库相比究竟是如何工作的。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-12T13:44:32.140

> 基于文件的数据库和基于服务器的数据库有什么区别

首先，数据库存储在文件中！所以一个简化的答案是没有区别。

但是当我们提到***基于文件的数据库****时，我们指的是我们直接*与之交互/更新的数据库（通过 JDBC 驱动程序提供的 SQL 抽象），但本质上我们只是直接读/写文件。例子是`SQLite`

当我们谈论***基于服务器的数据库***时，我们的意思是有一个服务器进程正在运行（绑定到某个端口），它接受请求（即 SQL 查询）。您的进程连接到服务器并向服务器发送查询，该服务器本身负责更新数据库文件。例子是`MS-SQL Server`.

基于服务器的数据库可以在任何地方（可以通过网络访问），而基于文件的数据库必须在本地文件系统的文件中。

选择哪一种取决于您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T13:23:24.127

基于文件的数据库只是文件中的一条记录，并且可能使用一些索引。

服务器数据库使用页面，其中每个页面内部包含多条记录，并且可能使用多个文件来存储数据。

服务器数据库针对高性能进行了高度优化。

# asp.net - 使用 ajax 从 webmethod ASP.net 检索数据

> ID：10564076
> 
> 赞同：0
> 
> 时间：2012-05-12T13:14:55.613
> 
> 标签：asp.net, ajax, json

我知道我的问题非常基本，但不知何故我的代码不起作用。我正在尝试更新文本框文本更改的标签值。下面是我在我的 aspx 页面上编写的 javascript 代码示例。

```
function UpdateDescription(ControlID) {//debugger;
    ControlID = "ctl00_CP_" + ControlID;
    UPCCode = document.getElementById(ControlID).value;
    //alert(UPCCode);
    $.ajax({ type: "POST",                    
        url:"ProductPhotoRequisitions.aspx/GetUPCJSon",
        //data: "{UPC:" + UPCCode + "}",
        data: "UPC=" + UPCCode,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (data) {alert(data.d);} 
    }); 
} 
```

我正在同一页面的代码隐藏中编写 webmethod，但不知何故没有调用此函数。

```
[WebMethod]
public string GetUPCJSon(String UPC) 
{ 
    //code to fetch label value
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T13:21:27.960

WebMethod 必须声明为静态，并且必须使用 [WebMethod] 属性进行修饰。

```
[WebMethod]
public static string GetUPCJSon(String UPC) 
{ 
   //code to fetch label value
} 
```

由于内容类型 json 将参数作为 jsonobject 发送

```
$.ajax({ type: "POST",                    
        url:"ProductPhotoRequisitions.aspx/GetUPCJSon",
        data: "{UPC:'" + UPCCode + "'}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (data) {alert(data.d);} 
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T13:22:39.463

如果你的 javascript 没问题，如果你唯一的问题是方法没有被调用，你应该尝试使用它，方法应该是静态的

```
 [WebMethod]
 public static string GetUPCJSon(String UPC) 
 { 
    //code to fetch label value
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T05:35:13.140

感谢您的回复。静态是一个问题，但主要问题是没有为参数提供单引号。应该是

```
 $.ajax({ type: "POST",                    
        url:"ProductPhotoRequisitions.aspx/GetUPCJSon",
        data: "{'UPC':'" + UPCCode + "'}",
                contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (data) {alert(data.d);} 
    }); 
```

# objective-c - 如何在 Vim 中运行匹配空格和特殊字符之间的单词的替换？

> ID：10564077
> 
> 赞同：1
> 
> 时间：2012-05-12T13:15:01.607
> 
> 标签：objective-c, regex, vim

我有以下代码：

```
@synthesize property1;
@synthesize property2;
@synthesize property3;
@synthesize property4; 
```

我希望他们像这样结束

```
@synthesize property1 = _property1;
@synthesize property2 = _property2;
@synthesize property3 = _property3;
@synthesize property4 = _property4; 
```

我正在使用 Vim 并一直在尝试提出一个解决方案，该解决方案将计算空格和 之间的属性名称`;`，但我尝试过的所有内容都给了我一个匹配项，包括两个分隔符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T13:19:05.897

试试这个：

```
:%s#^\(@synthesize\s\)\(.*\);#\1\2 = _\2;# 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T13:24:28.770

我猜这是最小的一个：

```
:1,4s/\([a-z0-9]\+\);/\1 = _\1;/g 
```

请注意，这`1,4`是应用此搜索和替换命令的行范围。

更多细节可以在[http://vim.wikia.com/wiki/Search_and_replace找到](http://vim.wikia.com/wiki/Search_and_replace)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-12T13:50:27.870

可以使用简洁的替换命令来解决该问题：

```
:%s/@synthesize \zs\w\+/& = _&/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T23:56:42.253

```
:perldo s/\@\w+\s\K(.*?);/ = _$1;/g 
```

# windows-phone-7 - 读取存储在手机windows phone7中的pdf文件

> ID：10564084
> 
> 赞同：0
> 
> 时间：2012-05-12T13:15:34.947
> 
> 标签：windows-phone-7

我想要做的是读取存储卡上存储的 PDF 文件，并像 Adob​​e acrobat 阅读器一样向用户显示内容。是否有人知道如何从 Windows Phone 7 的存储卡中读取 PDF 文件或将其转换为字符串，否则它可以转换为 HTML 格式，以便可以使用 webbrowser 控件显示其内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T15:13:55.340

首先，我认为当前的 Windows Phone 设备集不支持外部存储卡（microSD、SD），也无法从您的应用程序在设备上打开 Adob​​e Acrobat。

我建议您从 PDF 文件中创建一个 HTML 文件或“文本文件”。将其保存到隔离存储或作为应用程序的一部分，然后您将能够在应用程序中读取它并显示给用户。

这是在 Windows Phone 中显示 HTML 的[教程](http://blogs.msdn.com/b/mikeormond/archive/2010/12/16/displaying-html-content-in-windows-phone-7.aspx)。

# ios - 我们如何在 TableView 的两个给定单元格之间动态添加新单元格？

> ID：10564087
> 
> 赞同：3
> 
> 时间：2012-05-12T13:15:50.537
> 
> 标签：ios, xcode, ipad, uitableview

我需要在选择表格单元格时添加一个新单元格。新单元格应位于所选单元格的下方。我们能做到吗？

下面是我创建 4 个单元格并希望在 2 到 3 之间插入一个单元格的代码。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
cell= [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];

if(indexPath.row == 0){

    cell.textLabel.text = @"My Tweets";
    cell.textLabel.textColor = [UIColor whiteColor];
    cell.backgroundColor = [UIColor blackColor];
    cell.imageView.image = [UIImage imageNamed:@"tweets.png"];
}

if(indexPath.row == 1){

    cell.textLabel.text = @"Search";
    cell.backgroundColor = [UIColor blackColor];

    cell.textLabel.textColor = [UIColor whiteColor];
    cell.imageView.image = [UIImage imageNamed:@"search.png"];
}

if(indexPath.row == 2){

    cell.textLabel.text = @"Followers";
    cell.textLabel.textColor = [UIColor whiteColor];
    cell.backgroundColor = [UIColor blackColor];
    cell.imageView.image = [UIImage imageNamed:@"followers.png"];
}

if(indexPath.row == 3){

    cell.textLabel.text = @"Following";
    cell.textLabel.textColor = [UIColor whiteColor];
    cell.backgroundColor = [UIColor blackColor];
    cell.imageView.image = [UIImage imageNamed:@"following.png"];
}

return cell; 
```

}

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

//here I have to insert a new cell below on the click this existing cell.

if(indexPath.row == 1)
{

    NSIndexPath *newIndexPath = [NSIndexPath indexPathForRow:indexPath.row+1 inSection:0];
    NSArray *indexPaths = [NSArray arrayWithObject:newIndexPath]; 

    [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:indexPaths] withRowAnimation:UITableViewRowAnimationAutomatic];
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T13:24:13.543

你应该更新你的数据源，然后调用这个 UITableView 方法：

```
- (void)insertRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation:(UITableViewRowAnimation)animation 
```

这将调用

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

表视图数据源的方法，并使用您选择的动画更新您的表。

您不会像在发布的代码中那样在 didSelectRowAtIndexPath 方法中创建新单元格。

* * *

编辑以添加信息。

要设置 indexPaths 数组（对于您的情况），您可以这样做：

```
NSInteger row = [indexPath row];
NSInteger section = [indexPath section];    
NSIndexPath *newIndexPath = [NSIndexPath indexPathForRow:row+1 inSection:section];
NSArray *indexPaths = [NSArray arrayWithObject:indexPath]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-09T04:24:10.330

只需在开始更新和结束更新块中调用 insertrowsatindexpath 代表。例如，像这样尝试：

```
[tableViewForFinishRace beginUpdates];
        NSIndexPath *newIndexPath = [NSIndexPath    indexPathForRow:arrayForTitle.count-1 inSection:0];
        NSLog(@"index path for insertion =%@",newIndexPath);
        [tableViewForFinishRace insertRowsAtIndexPaths:@[newIndexPath] withRowAnimation:UITableViewRowAnimationTop];
        [arrayForTitle insertObject:@"Gearing Up for a" atIndex:arrayForTitle.count-1];
        [arrayForImage insertObject:@"gearing-up-icon.jpeg" atIndex:arrayForTitle.count-2];
[tableViewForFinishRace endUpdates]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T14:00:19.517

关于您的问题，在 indexpath 上创建数组时不要执行 indexpath.row+1 ，然后在 tableview 上调用 insertrowatindexpath ....alos 重新加载表，您就完成了。

您可以添加此方法以将行添加到您的 tableview

```
 - (void)setEditing:(BOOL)editing animated:(BOOL)animated
    {
        [super setEditing:editing animated:animated];

    NSArray *paths = [NSArray arrayWithObject:
                            [NSIndexPath indexPathForRow:1 inSection:0]];
        if (editing)
        {
            [[self tableView] insertRowsAtIndexPaths:paths
                                    withRowAnimation:UITableViewRowAnimationTop];
        }
        else {
           //Your Operation [[self tableView] deleteRowsAtIndexPaths:paths
                                    withRowAnimation:UITableViewRowAnimationTop];
        }
[tableView reloadData];
    } 
```

如果您有 UITableview 的子类，则可以使用上述方法，否则请阅读[教程](http://www.roseindia.net/tutorial/iphone/examples/iphone-DeleteandaddrowfromTableView.html)

还要提到要插入行的事件。只需插入行，您就可以实现以下逻辑：-

为路径创建数组：-

```
NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0]; 
```

您必须提供要插入行和部分的前一个行号，然后在 tableview 上调用方法 insertRowsAtIndexPaths:withRowAnimation: 并重新加载它。

# android - 为 Android 构建 vanilla 内核时出错

> ID：10564090
> 
> 赞同：1
> 
> 时间：2012-05-12T13:16:07.730
> 
> 标签：android, linux-kernel, android-source

我正在尝试为 Android（Nexus S）构建当前（来自 git）vanilla Linux 内核，我执行以下操作：

```
$ adb pull /proc/config.gz
$ cat config.gz | gunzip > .config
$ export PATH=$PATH:<...>/prebuilt/linux-x86/toolchain/arm-eabi-4.3.1/bin
$ export CROSS_COMPILE=arm-eabi-
$ make 
```

之后，我将所有新选项设为默认值。我收到以下错误：

```
 CC      arch/arm/mach-s5pv210/common.o
arch/arm/mach-s5pv210/common.c:169: error: expected identifier or '(' before 'void'
arch/arm/mach-s5pv210/common.c:169: error: expected ')' before numeric constant
arch/arm/mach-s5pv210/common.c:201: error: expected identifier or '(' before 'void'
arch/arm/mach-s5pv210/common.c:201: error: expected ')' before numeric constant
arch/arm/mach-s5pv210/common.c:239: error: expected identifier or '(' before 'void'
arch/arm/mach-s5pv210/common.c:239: error: expected ')' before numeric constant
arch/arm/mach-s5pv210/common.c:247: error: expected identifier or '(' before 'void'
arch/arm/mach-s5pv210/common.c:247: error: expected ')' before numeric constant
make[1]: *** [arch/arm/mach-s5pv210/common.o] Error 1
make: *** [arch/arm/mach-s5pv210] Error 2 
```

那就是那一行：

```
...
}

void __init s5pv210_map_io(void)
{
... 
```

如何解决？我没有更改源代码中的任何内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:52:03.990

[https://patchwork.kernel.org/patch/1940951/](https://patchwork.kernel.org/patch/1940951/)

这个网站可能会帮助你。^^

# dll - 从 msi 文件中提取自定义操作的 dll

> ID：10564092
> 
> 赞同：6
> 
> 时间：2012-05-12T13:16:28.813
> 
> 标签：dll, windows-installer, custom-action

如何从 msi 文件中提取托管自定义操作的 dll。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-12T13:33:19.927

您可以使用 Windows SDK 中提供的 Orca 工具。使用 Orca 打开 MSI 并转到 Binary table。双击我们自定义操作使用的资源对应的“数据”列。您将获得一个模式对话框，其中包含保存列内容或覆盖它的选项。

# android - 在 eclipce 中打开 XML 文件时出现 StackOverflowError

> ID：10564095
> 
> 赞同：1
> 
> 时间：2012-05-12T13:16:51.200
> 
> 标签：android, xml, eclipse, stack-overflow

嗨，当我在 eclipce 中使用我的 android 应用程序时，当我在布局文件中打开 XML 文件时，我收到此错误消息

```
edit_layout.xml: java.lang.StackOverflowError
java.lang.StackOverflowError 
```

现在我什至可以打开我昨天可以打开的那些布局，请帮助我:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T20:14:04.517

您使用自己的自定义视图吗？如果是这样，请尝试将其删除，看看它是否停止。如果它停止，请尝试检查自定义视图中是否执行了一些在编辑期间无法运行的逻辑。

请向我们展示 xml 文件内容，以便我们告诉您可能是什么原因造成的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T14:28:36.570

我解决了它我使用了 ActionbarSherlock 所以布局预览使用它来预览布局

```
android:theme="@style/Theme.Sherlock.Light.DarkActionBar.ForceOverflow" 
```

所以要修复它，我只需将其更改为原始 android 中的另一个主题 :)

# sql-server-2005 - SQL 根据另一张表的游标中的值更新一张表

> ID：10564096
> 
> 赞同：2
> 
> 时间：2012-05-12T13:16:52.323
> 
> 标签：sql-server-2005, cursor

我额头上墙上的印记太红了，所以贴出来听听......

我有两个表，需要根据另一个表的选择标准更新一个表的值。我知道我可以使用带有“存在位置”的更新，但是我有很多更新要循环。所以我试图使用游标将一个表中的值放入 vars 中，然后使用这些 vars 在另一个表上使用更新。没有发生错误，也没有更新。当我将代码更改为 Select 语句时，它会正确显示信息，但更新不起作用。我不确定它是否基于使用“for update”创建游标，因为我正在更新的表与游标从中选择记录的表不同。以下是我的查询。任何人都请告诉我我可能做错了什么。谢谢！

```
 DECLARE @so VARCHAR(50)
DECLARE @line VARCHAR(50)
DECLARE @pdate DATETIME
DECLARE @reason1 VARCHAR(50)
DECLARE @reason2 VARCHAR(50)
DECLARE @area VARCHAR(50)

DECLARE mycursor CURSOR FOR 
SELECT [bp_so_number],[bp_line],[bp_production_date],[bp_reason1],[bp_reason2],[bp_area]
 FROM [Workflow].[dbo].[v_OTD_PostSrc]

 OPEN mycursor
 FETCH NEXT FROM mycursor
 INTO @so, @line, @pdate, @reason1, @reason2, @area

 WHILE @@FETCH_STATUS = 0
 BEGIN
    FETCH NEXT FROM mycursor
    INTO @so, @line, @pdate, @reason1, @reason2, @area;
    UPDATE otd_data SET reason1=@reason1, reason2=@reason2, area=@area 
    WHERE [Order Number]=@so AND LI=@line AND [Schedule Date]=@pdate AND [Qty Open]>0
    --SELECT * FROM otd_data WHERE [Order Number]=@so AND LI=@line AND [Schedule Date]=@pdate
 END

CLOSE mycursor
DEALLOCATE mycursor 
```

就像我说的。没有错误，但也没有表更新...... :-(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T09:56:49.807

您在第一次更新之前进行两次提取。尝试将循环重组为：

```
DECLARE @so VARCHAR(50)
DECLARE @line VARCHAR(50)
DECLARE @pdate DATETIME
DECLARE @reason1 VARCHAR(50)
DECLARE @reason2 VARCHAR(50)
DECLARE @area VARCHAR(50)

DECLARE mycursor CURSOR LOCAL FAST_FORWARD FOR 
SELECT [bp_so_number],[bp_line],[bp_production_date],[bp_reason1],[bp_reason2],[bp_area]
 FROM [Workflow].[dbo].[v_OTD_PostSrc]

 OPEN mycursor
 -- Always true
 WHILE 1 = 1
 BEGIN
    -- Get next record from cursor
    FETCH NEXT FROM mycursor
               INTO @so, @line, @pdate, @reason1, @reason2, @area;
    -- If there was a record @@fetch_status will be 0; 
    -- if not, or in case of an error, break the loop
    IF @@FETCH_STATUS <> 0
       break
    UPDATE otd_data SET reason1=@reason1, reason2=@reason2, area=@area 
    WHERE [Order Number]=@so AND LI=@line AND [Schedule Date]=@pdate AND [Qty Open]>0
    --SELECT * FROM otd_data WHERE [Order Number]=@so AND LI=@line AND [Schedule Date]=@pdate
 END

CLOSE mycursor
DEALLOCATE mycursor 
```

我在光标中添加了[LOCAL 和 FAST_FORWARD选项。](http://msdn.microsoft.com/en-us/library/ms180169%28v=sql.90%29.aspx)FAST_FORWARD 文档：

> 指定启用了性能优化的 FORWARD_ONLY、READ_ONLY 游标。

# android - 开发 android 客户端应用程序以使用 BigBlueButton 服务器

> ID：10564111
> 
> 赞同：2
> 
> 时间：2012-05-12T13:19:33.707
> 
> 标签：android, bigbluebutton

不知道有没有人开始集成BigBlueButton

[http://demo.bigbluebutton.org/](http://demo.bigbluebutton.org/) 安卓视频会议应用程序。我已经开始开发一个简单的应用程序，它从我的应用程序中打开已安装的 BBB-android 应用程序。我在用

```
Uri ServerUrl = Uri.parse("bigbluebutton://api/create?name=Android&meetingID=TestBBB&checksum=5cacecd62666d26c051ac2846fdd37e1bb6bebaa"); 
```

但它不起作用。应用程序一打开，就会显示“无法加入会议”。任何人都可以请诊断此问题并尽快回复吗？问候..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-09T12:23:49.270

如果你有，试试这个`your_ip`：

```
Uri ServerUrl = Uri.parse("http://YOUR_IP/bigbluebutton/api/join?meetingID=fds%27s+meeting&fullName=fds&password=mp&checksum=50b6dcfe7111163a868e301c8efae03898de3a2f"); 
```

# sqlite - .db 文件保存在哪里？

> ID：10564123
> 
> 赞同：0
> 
> 时间：2012-05-12T13:21:08.477
> 
> 标签：sqlite, qt

我想在 Qt 中使用 SQLite 数据库。我对 SQLite 没有太多经验，我也遇到过这个问题。根据教程，以下命令创建一个 .db 文件： `>sqlite3 test.db` 我的问题是该文件存储在系统上的什么位置，因为我需要将它与我的 Qt 应用程序链接。

操作系统：Ubuntu 12.04

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T13:23:31.687

它在您调用命令的文件夹中创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T13:31:00.223

使用 python，以下代码在当前目录中创建示例数据库：

```
 import sqlite3
    import random

    N = 1000

    def build(name):

        connection = sqlite3.connect(name + ".db")
        cursor = connection.cursor()
        cursor.execute("""CREATE TABLE Data (question1 INTEGER, question2 Real)""")
        for i in range(N):
            vals = (random.choice((0,1,2,3)), round(random.gauss(0,1),2))
            cursor.execute("""INSERT INTO Data VALUES (?,?)""",vals)
        connection.commit()
        connection.close()
    for name in ["name1","name2","name3"]:
        build(name) 
```

# matlab - matlab中使用fminunc时如何获取成本历史

> ID：10564128
> 
> 赞同：0
> 
> 时间：2012-05-12T13:21:57.827
> 
> 标签：matlab, machine-learning, data-visualization

我有什么方法可以获取成本历史或成本函数在 matlab 中的每次迭代时返回给 fminunc 的值？我想用它来绘制成本与迭代图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T14:25:51.227

我建议您阅读[帮助](http://www.mathworks.com/help/toolbox/optim/ug/fminunc.html#f854831)文件，因为您可以使用 fminunc 选项做很多事情。如果您对绘制成本特别感兴趣，它可以自动为您执行此操作：

```
options = optimset('PlotFcns', @optimplotfval);
x = fminunc(fun,x0,options) 
```

# spring-mvc - Spring MVC 使用 maven 和 eclipse

> ID：10564136
> 
> 赞同：1
> 
> 时间：2012-05-12T13:23:08.370
> 
> 标签：spring-mvc

我被这个错误困住了。

在名称为“mvc-dispatcher”的 DispatcherServlet 中找不到带有 URI [/Smvc/welcome] 的 HTTP 请求的映射

当我运行这个例子时

[http://www.mkyong.com/spring3/spring-3-mvc-hello-world-example/](http://www.mkyong.com/spring3/spring-3-mvc-hello-world-example/)

请帮助任何人....谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T13:33:09.707

除非您重命名了战争或为上下文配置了不同的名称，否则正确的 URL 应该是`http://localhost:8080/SpringMVC/welcome`（而不是 Smvc/welcome）

# android - DatePickerDialog 软键盘类型无效

> ID：10564142
> 
> 赞同：3
> 
> 时间：2012-05-12T13:23:45.283
> 
> 标签：android, date

我在我的应用程序中实现了 DatePickerDialog，我的问题是当我尝试更改“Day”时，软键盘会弹出并显示数字，而插入符号位于数字之前。当我单击数字时，它不会替换“日”框中已有的内容。仅当我转到“日期”框中的数字末尾并将其删除（软键盘中的退格键）然后输入数字时，它才有效。

为什么会这样？为什么它不覆盖已经存在的东西？

此代码显示对话框：

```
protected Dialog onCreateDialog(int id)
{
    Dialog ReturnDialog = null;

    switch (id)
    {
    case DATE_DIALOG_ID:        
        ReturnDialog = new DatePickerDialog(this, mDateSetListener, Year, Month - 1,  Day );
        break;
    }
    return ReturnDialog;
} 
```

然后我从 onClickListener() 调用它

```
showDialog( DATE_DIALOG_ID ); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T14:35:44.857

你看到的是（我认为）正常的行为。A`DatePickerDialog`由单个小部件组成，该小部件由每个日期部分（日、月、年）的`DatePicker`三个小部件组成。`NumberPicker`这些`NumberPicker`是由`ImageViews`和`EditText`作为输入区域组成的。单击`EditText`以显示键盘以输入数据/文本*不会*删除旧数据，因此行为是正常的。

您将很难覆盖此行为，特别是如果您计划覆盖较旧的 android 版本，因为您将无法访问 input `EditTexts`。例如，您无法`DatePicker`在较旧的 android 版本上访问对话框的小部件，访问此小部件的方法仅在最近才添加到`DatePickerDialog`（在`Honeycomb`API 版本 11 中）。

当然，您可以选择重新创建`DatePickerDialog`来实现该行为，但我认为这不值得付出努力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T20:37:15.657

[`OnGlobalFocusChangeListener`](http://developer.android.com/reference/android/view/ViewTreeObserver.OnGlobalFocusChangeListener.html)您可以尝试通过添加以下内容来执行“当输入框具有焦点时自动选择其中的所有文本” `DatePickerDialog`：

```
private final OnGlobalFocusChangeListener mFocusCheck = new OnGlobalFocusChangeListener() {
    @Override
    public void onGlobalFocusChanged(View oldFocus, View newFocus) {
        if (newFocus != null && newFocus instanceof EditText) {
            final EditText editText = (EditText) newFocus;
            editText.selectAll();
        }
    }
};

@Override
protected Dialog onCreateDialog(int id) {
    Dialog dialog = null;

    switch (id) {
        case DIALOG_ID:
            dialog = new DatePickerDialog(this, mDateSetListener, year, month - 1, day) {
                @Override
                public void setView(View view) {
                    super.setView(view);
                    view.getViewTreeObserver().addOnGlobalFocusChangeListener(mFocusCheck);
                }
            };
            break;
    }

    return dialog;
} 
```

但是，请注意，这可能不适用于所有 Android 版本，因为我们依赖于一些假设（主要是`DatePicker`组件是使用`NumberPicker`具有嵌入的 a 在内部实现的事实`EditText`）。

在模拟器上进行比较，我注意到即使在 Android 4.0 和 4.1 之间，其行为`NumberPicker`也已经不同（您需要双击才能在 4.0 上显示软键盘，而在 4.1 上单击一次就足够了）。

# svg - 使用变换计算 SVG 形状的长度和面积

> ID：10564144
> 
> 赞同：2
> 
> 时间：2012-05-12T13:24:01.467
> 
> 标签：svg

我正在开发.NET 项目。我需要计算 SVG 文件中形状的长度和面积。

有两个困难：

a) 贝塞尔曲线 - 似乎公式并非微不足道

和

b）转换 - 在进行计算之前，我必须应用所有转换

谁能推荐一个对 SVG 文件进行几何计算的库？谁能推荐一个将转换应用于 SVG 文件并为每个形状中的每个点返回原始值的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:12:24.140

对于贝塞尔曲线，您可以通过将曲线转换为线段来计算长度。您可以使用 DeCastelJau 给出的算法。 [算法就像](http://en.wikipedia.org/wiki/De_Casteljau%27s_algorithm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T23:14:49.620

如果您在在线 SVG 编辑器 - 'SVG-Edit' 中打开并保存文件，它本身将删除任何转换（并将为您提供所需每个点的原始值）

此外，由于 SVG-Edit 是开源的，您甚至可以搜索其源代码以找到执行此操作的模块并使用它。

# oracle11g - 甲骨文不可用

> ID：10564145
> 
> 赞同：2
> 
> 时间：2012-05-12T13:24:01.757
> 
> 标签：oracle11g, ora-01034, ora-27101

我在我的 windows7 操作系统上安装了 Oracle 11g 速成版。

但我总是出错。

我的regedit.exe；

ORACLE_HOME：C:\oracleexe\app\oracle\product\11.2.0\server ORACLE_SID：XE

和

我的环境变量设置；

ORACLE_HOME：C:\oracleexe\app\oracle\product\11.2.0\server ORACLE_SID：XE

你看他们是一样的。

我检查了 listener.ora 文件，并且在该文件中也检查了...

最后开始->所有程序->Oracle Database 11g快捷版->启动我点击的数据库。

在我检查了服务之后；

OracleXETNSListener 已启动，OracleXEClrAgent 已启动，OracleServiceXE 已启动。并且所有服务都登录本地系统帐户

在cmd上我得到了这个错误......我不知道为什么:(

* * *

C:\Windows\system32>sqlplus

SQL*Plus：2012 年 5 月 12 日 16:17:51 Cmt 发布 11.2.0.2.0 生产版 版权所有 (c) 1982, 2010, Oracle。版权所有。

输入用户名：SYS 输入密码：

错误：ORA-01034：ORACLE 不可用

ORA-27101: 共享内存领域不存在

进程 ID：0

会话 ID：0 序列号：0

输入用户名：sys 输入密码：

错误：ORA-01034：ORACLE 不可用

ORA-27101: 共享内存领域不存在

进程 ID：0

会话 ID：0 序列号：0

输入用户名：

* * *

请帮助我..

我认为我的数据库无法打开。昨天我做了同样的事情，我得到了这个错误；

**错误：ORA-01034：ORACLE 不可用进程 ID：0 会话 ID：0 序列号：0**

另外我的：Oracle Database 11g Express Edition 入门也不起作用。始终找不到页面。

请帮助我..

# java - 通过 findbugs 对象使用 Findbugs 测试类

> ID：10564148
> 
> 赞同：1
> 
> 时间：2012-05-12T13:24:15.980
> 
> 标签：java, unit-testing, findbugs

我想通过代码使用 Findbugs，通过编码使用 findbug 来测试另一个类。我尝试了很多，但找不到通过编码测试类的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T04:04:53.727

在您的 taskdef 中，使用 classpath 属性来指定包含 findbugs 类 (FidBugsTask) 的 jar 的确切位置。尝试这样的事情：

```
<taskdef name="findbugs" classpath="C:\apache-ant-1.7.1\lib\findbugsant\findbugs-ant.jar" classname="edu.umd.cs.findbugs.anttask.FindBugsTask" /> 
```

我拥有的 findbugs jar 是 findbugs-ant.jar，因此请在建议的解决方案中查看它并使用适用于您的案例的 findbugs 文件名，您应该没问题。

# google-maps - 如何实现google maps 地形看INURL

> ID：10564152
> 
> 赞同：0
> 
> 时间：2012-05-12T13:24:35.377
> 
> 标签：google-maps, terrain

我正在使用这个网址：

[http://maps.google.com/maps?f=q&source=s_q&hl=en&geocode=&q=Zagreb,+Croatia&aq=&sll=45.808351,15.897484&sspn=0.010066,0.016544&vpsrc=0&ie=UTF8&hq=&hnear=Zagreb,+Croatia&t= m&z=14&ll=45.794222,16.048298&输出=嵌入](http://maps.google.com/maps?f=q&source=s_q&hl=en&geocode=&q=Zagreb,+Croatia&aq=&sll=45.808351,15.897484&sspn=0.010066,0.016544&vpsrc=0&ie=UTF8&hq=&hnear=Zagreb,+Croatia&t=m&z=14&ll=45.794222,16.048298&output=embed)

我需要添加什么以及在哪里使地形看起来不是默认显示的？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T13:33:38.437

更改一个参数。

代替

```
t=m 
```

利用

```
t=p 
```

[http://maps.google.com/maps?f=q&source=s_q&hl=en&geocode=&q=Zagreb,+Croatia&aq=&sll=45.808351,15.897484&sspn=0.010066,0.016544&vpsrc=0&ie=UTF8&hq=&hnear=Zagreb,+Croatia&t= p&z=14&ll=45.794222,16.048298&输出=嵌入](http://maps.google.com/maps?f=q&source=s_q&hl=en&geocode=&q=Zagreb,+Croatia&aq=&sll=45.808351,15.897484&sspn=0.010066,0.016544&vpsrc=0&ie=UTF8&hq=&hnear=Zagreb,+Croatia&t=p&z=14&ll=45.794222,16.048298&output=embed)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T23:33:12.577

我在寻找**Google Fusion Tables**答案时遇到了这个问题。
在这种情况下，参数需要是：

```
t=4 
```

在 Google 网上论坛上找到它
[https://groups.google.com/forum/?fromgroups#!topic/fusion-tables-users-group/Bj_u6QPohaA](https://groups.google.com/forum/?fromgroups#!topic/fusion-tables-users-group/Bj_u6QPohaA)
谢谢，Kathryn

# primes - 大数的素数分解

> ID：10564153
> 
> 赞同：3
> 
> 时间：2012-05-12T13:24:48.943
> 
> 标签：primes, prime-factoring

我试图找到大数分解的复杂性。哪个是最好的算法，找到一个数字的主要因素的复杂性是什么？假设数字的长度为n。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T13:46:48.287

用于分解大于 100 位的整数的最知名算法是[General number field sieve](http://en.wikipedia.org/wiki/General_number_field_sieve)。它的复杂性在链接链接到的页面上进行了解释。

维基百科有一篇关于其他算法的好文章：[http ://en.wikipedia.org/wiki/Integer_factorization](http://en.wikipedia.org/wiki/Integer_factorization)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-12T18:19:39.653

复杂性将是 sqrt(n)log(n)。但是对于 n<=19^7，如果您使用筛子，那么在筛子之后可以在 log(n) 中完成。你可以在这里看到-> [http://codeforces.com/blog/entry/7262](http://codeforces.com/blog/entry/7262)

# jquery - jquery简单的滑动动画

> ID：10564156
> 
> 赞同：0
> 
> 时间：2012-05-12T13:25:01.653
> 
> 标签：jquery, wordpress, slider, slidetoggle

....也许不是那么简单。

首先，我正在尝试在 Wordpress 中对此进行编码，但不确定是否与此有关。我希望博客页面显示所有博客的标题。然后，当用户单击博客标题时，内容会向下滑动。HTML 将如下所示。

```
<div id="titel>Title of Post</div>
<div id="meta">Meta data WP adds</div>
<div id="entry">The content of the blog post.</div> 
```

我使用 functions.php 中的一个函数来自动引用 Google 上的 jQuery。我正在使用 CSS 来隐藏#entry。

现在当我添加我的代码时：

```
<script type="text/javascript">

    $j=jQuery.noConflict();

    $j(document).ready(function(){

        $j('#title').click(function(){
            $j(this).next('#entry').slideToggle('1000');

        });

    });

</script> 
```

什么都没发生。您可以单击标题但没有内容。但奇怪的是，如果您将代码更改为：

```
<script type="text/javascript">

    $j=jQuery.noConflict();

    $j(document).ready(function(){

        $j('#title').click(function(){
            $j('#entry').slideToggle('1000');

        });

    });

</script> 
```

第一篇文章将获得动画。但不应该是（使用第二个代码）如果单击任何标题，所有的#entry 都被向下滑动？那是真正让我陷入循环的部分。

感谢所有的回复。这是它所代表的确切代码。这是HTML：

```
<div class="article-title"> <h2 class="entry-title"><a  title="Permalink to Similarities" rel="bookmark">Similarities</a></h2></div>

<div class="entry-content"><div class="article-entry"><p><span style="font-size: small;"> HERE IS THE BLOG CONTENT..... 
```

这是我现在拥有的代码：

```
<script type="text/javascript">

    $j=jQuery.noConflict();
    $j(document).ready(function(){
        $('.article-title').click(function(){
            $(this).siblings('.entry-content').slideToggle(1000);
        });
    });

</script>
</head> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T13:27:24.520

首先，您应该考虑页面上应该只有 1 个具有特定 ID 的元素。因此，请确保所有博客条目元素至少具有类或唯一 ID。这是一种选择：

```
<div class="title">Title of Post</div>
<div class="meta">Meta data WP adds</div>
<div class="entry">The content of the blog post.</div> 
```

然后，您使用[`next()`](http://api.jquery.com/next/)以下方法：

> 获取匹配元素集中每个元素的紧随其后的兄弟。

而您的下一个元素是`meta`块。您可以使用[`siblings()`](http://api.jquery.com/siblings/)方法来解决`entry`。

```
$j('.title').click(function(){
    $j(this).siblings('.entry').slideToggle('1000');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T13:38:26.737

第一个问题：ID 是唯一的。每个 ID 应该只有一个元素。

第二个问题：你弄乱了ID的名称：

```
<div id="titel">Title of Post</div> 
```

和

```
$j('#title').click(function(){ 
```

（标题！=标题）

第三个问题：jQuerys`next()`函数访问下一个元素，在您的情况下是元数据。

* * *

尝试这样的事情：

**HTML：**

```
<div class="post">
    <div class="title">Title of Post</div>
    <div class="meta">Meta data WP adds</div>
    <div class="entry">The content of the blog post.</div>
</div> 
```

**JS：**

```
<script type="text/javascript">
    $j=jQuery.noConflict();
    $j(document).ready(function(){
        $j('.title').click(function(){
            $j(this).siblings('.entry').slideToggle('1000');
        });
    });
</script> 
```

**CSS：**

```
.entry{
    display:none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T13:40:14.810

首先对 content 中大于 1 的元素使用 class。
您还可以在 jquery 中使用父母。

```
<div>
  <div class="title">Title of Post</div>
  <div class="meta">Meta data WP adds</div>
  <div class="entry">The content of the blog post.</div>
</div>

$j('.title').click(function(){
   $j(this).parents('div').find('.entry').slideToggle('1000');
}); 
```

# c# - 如何在 Panorama.ItemTemplate 中制作 PanoramaItem 的水平方向？

> ID：10564157
> 
> 赞同：0
> 
> 时间：2012-05-12T13:25:22.240
> 
> 标签：c#, silverlight, windows-phone-7, silverlight-4.0, silverlight-3.0

在我的 Windows Phone 应用程序中，我有：

```
 <controls:Panorama.ItemTemplate>
                <DataTemplate>
                    <Grid Visibility="{Binding ItemVisibility}" Margin="0,-60,0,0">
                        <ScrollViewer Margin="0,0,0,0"  VerticalAlignment="Top" Height="Auto">
                            <StackPanel Margin="0,0,0,0" Width="Auto"  >
                                <RichTextBox x:Name="Browser"  IsReadOnly="True" Foreground="Black" Height="Auto" cxi:WebBrowserHelper.Html="{Binding BrowserHtml}"  HorizontalAlignment="Left"   Width="460" Margin="0,0,0,0" AcceptsReturn="True" VerticalScrollBarVisibility="Visible" />
                                <Canvas Height="100" Width="0" />
                            </StackPanel>
                        </ScrollViewer>
                    </Grid>
                </DataTemplate>
            </controls:Panorama.ItemTemplate> 
```

如何使 PanoramaItem 的方向 - 方向 =“水平”？

我努力了：

```
<controls:Panorama.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal" />
                </ItemsPanelTemplate>
        </controls:Panorama.ItemsPanel> 
```

但是有 NullReference Exeption

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T15:04:47.573

首先，这听起来有点奇怪。全景控件内的项目宽度不应很大，也不应在此处进行水平滚动，因为它可能会破坏用户体验（用户将滚动 PanoramaItem 或全景本身的内容以切换到另一个全景项目）

无需修改 ItemsPanel 模板，只需修改 PanoramaItem 内容中的 StackPanel。像这样的东西：

```
<StackPanel Margin="0,0,0,0" Width="Auto" Orientation="Horizontal"  > 
                                    <RichTextBox x:Name="Browser"  IsReadOnly="True" Foreground="Black" Height="Auto" cxi:WebBrowserHelper.Html="{Binding BrowserHtml}"  HorizontalAlignment="Left"   Width="460" Margin="0,0,0,0" AcceptsReturn="True" VerticalScrollBarVisibility="Visible" /> 
                                    <Canvas Height="100" Width="0" />
</StackPanel> 
```

# linux - 为什么 pkg-config 不在库名称前输出“-l”？

> ID：10564159
> 
> 赞同：1
> 
> 时间：2012-05-12T13:25:24.230
> 
> 标签：linux, pkg-config

当我使用 pkg-config --libs 时，输出包含对库的许多引用。但是，其中一些库前面没有“-l”，因此链接器不知道如何处理该名称。例如，我将得到输出：stdc++ 而不是 -lstdc++

什么会导致 pkg-config 这样做？

另外，pkg-config 从哪里得到它的信息？手册页说它使用“前缀”目录中的 .ps 文件。但是这些前缀目录在哪里？

-安德烈斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T16:24:39.843

`$PKG_CONFIG_PATH`可以设置其他路径来搜索文件`*.pc`。您可以使用以下命令查询默认路径：

> pkg-config --variable pc_path pkg-config

`--libs`输出由文件中的行`Libs:`决定`.pc`；通常是这样的：

> 库：-L${libdir} -lfoo

也许`.pc`您引用的文件没有正确构造？

# windows - Unix/Windows 脚本帮助：将命令行参数从 Windows 传递到 Unix

> ID：10564160
> 
> 赞同：1
> 
> 时间：2012-05-12T13:25:46.453
> 
> 标签：windows, unix, scripting, putty, plink

所以我正在为我的工作做一个开发项目，基本上这个想法是我们有一个 Excel VBA 宏，它需要对文件进行一些解析，创建一个新文件并将文件位置发送到在大型机上运行的 Unix 脚本。

每次运行宏时文件的位置都不同，并且感谢 Samba，我可以在 Windows 中创建文件，并且可以立即访问 Unix 系统。

现在问题来了：如何传入文件的位置。问题是一个名为 plink 的程序（它是 putty 的一个版本，它允许配置文件与程序本身而不是在 PC 的注册表中）是完成这项工作的唯一被批准的选项（我知道 Cgywin 会很容易做到这一点) 并且该程序位于多个人的网络驱动器上，可能需要同时运行它。authorized_keys 文件有一个 exec 指向需要运行的 Unix 脚本，出于安全原因，我无法更改它。但是，我可以在 Unix 中编写一个脚本来获取未命名的参数并使用它来运行仅将参数（文件位置）作为命名参数（--file=/directory/datafile）的脚本。

我尝试使用（在cmd中）plink.exe serverIP /directory/datafile（登录已配置）运行该脚本，但显然无法以这种方式传递参数。

我也试过 plink.exe serverIP "/directory/datafile" 也没有运气。

我只是想知道是否有一种简短而简洁的方法来完成这项工作。我们有一个具有类似配置的示例项目，但执行此操作的脚本需要 10000 行，我不想阅读，我有点相信这应该像一个 10 或 20 行的短脚本一样完成。如果需要，我可以自由创建任何 Windows 脚本，前提是我可以同时运行具有不同参数的程序的多个会话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T16:54:39.363

您应该能够使用 plink 在 Unix 机器上运行命令，就像使用 ssh 在另一台 unix 机器上运行一个 unix 命令一样。例如

```
plink user@host "ls" 
```

将继续`ls`运行`host`

同样地：

```
plink user@host "/absolute/path/to/script/on/unix/machine/script.sh" 
```

应该运行`script.sh`在`host`. 您可以在本地构建要在 unix 机器上运行的命令（包括脚本的任何参数，如数据文件的路径名），然后使用 plink 运行命令，如上所述。

如果`script.sh`有参数，并且它们没有被读入，请尝试将脚本名称和参数放在单引号中：

```
plink user@host "'/absolute/path/to/script/on/unix/machine/script.sh arg1 arg2'" 
```

您可能想查看 plink 文档，可在此处找到：http: [//the.earth.li/~sgtatham/putty/0.62/puttydoc.txt](http://the.earth.li/~sgtatham/putty/0.62/puttydoc.txt)

请特别查看第 7.2.2 节 - “使用 Plink 进行自动连接”

# dynamic - 下载整个动态网站

> ID：10564161
> 
> 赞同：0
> 
> 时间：2012-05-12T13:25:58.177
> 
> 标签：dynamic

我用 cake-php 开发了一个网站。效果很好，就足球锦标赛而言，现在赛季结束了，不需要动态交互。我会下载所有站点以避免无用的 mysql 调用等。我能做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T13:29:54.713

使用`wget`- 这是[一篇](http://fosswire.com/post/2008/04/create-a-mirror-of-a-website-with-wget/)描述如何操作的文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T13:29:28.510

登录网站的 FTP，然后从那里下载所有内容。请注意，如果要保存 SQL 数据库，则需要登录数据库本身（通常——如果不是总是——通过主机的网站）。

编辑：对于静态副本，您可以使用 HTTrack。非常有用的工具，有很多选项，而且是免费的：http: [//www.httrack.com/](http://www.httrack.com/)

# r - 根据列号选择值

> ID：10564166
> 
> 赞同：2
> 
> 时间：2012-05-12T13:27:02.847
> 
> 标签：r, dataframe, matching

有一个 ID 和列 y1、y2、...的数据文件

```
> dat
   id y1 y2 y3 y4 y5
1   1  2  4  2  3  4
2   2  4  1  1  4  4
3   3  2  3  1  3  1
4   4  0  1  2  4  4
5   5  3  3  2  1  4
6   6  4  1  3  1  4
7   7  2  4  4  4  0
8   8  2  5  0  2  5
9   9  2  2  3  3  1
10 10  0  3  4  4  3 
```

有一个包含 ID 子集和周数的示例文件。

```
> sam
  id week
1  2    3
2  4    4
3  6    4
4  7    5
5  8    5 
```

我想根据周数为每个采样的 ID分配一个`y`值。`dat`这是我想要达到的结果：

```
> res
  id y
1  2 1
2  4 4
3  6 1
4  7 0
5  8 5 
```

可以通过一些循环来实现结果，但如果可能的话，我想避免它。

`dat`和的结构`sam`。

```
dat <- structure(list(id = 1:10,
    y1 = c(2, 4, 2, 0, 3, 4, 2, 2, 2, 0),
    y2 = c(4, 1, 3, 1, 3, 1, 4, 5, 2, 3),
    y3 = c(2, 1, 1, 2, 2, 3, 4, 0, 3, 4),
    y4 = c(3, 4, 3, 4, 1, 1, 4, 2, 3, 4),
    y5 = c(4, 4, 1, 4, 4, 4, 0, 5, 1, 3)),
  .Names = c("id", "y1", "y2", "y3", "y4", "y5"),
  row.names = c(NA, -10L),
  class = "data.frame")

sam <- structure(list(id = c(2L, 4L, 6L, 7L, 8L),
    week = c(3L, 4L, 4L, 5L, 5L)),
  .Names = c("id", "week"),
  row.names = c(NA, -5L),
  class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T13:37:23.030

```
data.frame(id = sam[,1], y = dat[cbind(sam[,1],(1+sam[,2]))]) 
```

# c - won´t print string. char array

> ID：10564170
> 
> 赞同：0
> 
> 时间：2012-05-12T13:27:16.653
> 
> 标签：c, avr

This is probably going to be embarrassing, but here we go! I have the following code (shown below), and it is suppose to take an int and convert it to an char string. (I know about itoa() and snprintf, but I wan't to make it work like this.) Everything seem's to work fine until I try to print it and it displays nothing for the inttochar string. It's probably just something stupid I've overlooked... I get the following result:

```
CHAR1: 4334321
CHAR2: 1234334
CHAR3: 
```

* * *

The code is here:

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>

int main(){
int tester = 1234334;   //Test value
char temp[10];          //Temporary string array.       
char inttochar[10];         
int t = 0;

//Reads int to array.
while(tester != 0){
    temp[t] = (tester % 10) + '0';
    tester /= 10;
    t++;    
}
temp[t] = '\0';
t = 0;
printf("CHAR1: %s\nCHAR2: ",temp);

//Reverses the string.
for(int j=strlen(temp); j>=0;j--){
    inttochar[t] = temp[j];
    printf("%c",inttochar[t]);
    t++;
}
inttochar[t] = '\0';
t = 0;
printf("\nCHAR3: %s\n",inttochar);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T13:33:08.183

```
t=0;
for(int j=strlen(temp); j>=0;j--){
    inttochar[t] = temp[j];
    t++;
    }
inttochar[t] = '\0'; 
```

Is off by one. A "better" (does not need j to be signed) way to write this loop would be:

```
t=0; 
for(size_t j=strlen(temp); j-- > 0;){
    inttochar[t++] = temp[j];
    }
inttochar[t] = '\0'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T13:33:17.040

You should start from `j=strlen(temp)-1`, otherwise you assign `\0` (which is what's in `temp[strlen(temp)]`) to `inttochar[0]`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T13:40:48.010

Reverse iteration using a for-loop is easier like this:

```
for(int j=strlen(temp); j--; ){
    inttochar[t] = temp[j];
    printf("%c",inttochar[t]);
    t++;
} 
```

Note the test-and-decrement in one.

This can be applied to reverse iteration in general.

# iphone - 无法识别的选择器发送到实例 0x6b61d10

> ID：10564175
> 
> 赞同：1
> 
> 时间：2012-05-12T13:28:09.207
> 
> 标签：iphone, ios, error-handling

我在 iphone 开发中练习委托，但有问题

2012-05-12 21:21:54.279 DelegatePractice[2924:f803]-[secondViewController viewControllers]：无法识别的选择器发送到实例 0x6b61d10 2012-05-12 21:21:54.281 DelegatePractice[2924:f803] *** 由于未捕获而终止应用程序异常'NSInvalidArgumentException'，原因是： ' - [secondViewController viewControllers]：无法识别的选择发送到实例0x6b61d10' ***第一掷调用堆栈：（0x13bb052 0x154cd0a 0x13bcced 0x1321f00 0x1321ce2 0x2596 0x436e1e 0x13bcec9 0x155c2 0x250d54 0x13bcec9 0x155c2 0x1555a 0xbab76 0xbb03f 0xba2fe 0x3aa30 0x3ac56 0x21384 0x14aa9 0x12a5fa9 0x138f1c5 0x12f4022 0x12f290a 0x12f1db4 0x12f1ccb 0x12a4879 0x12a493e 0x12a9b 0x1e98 0x1df5)

我想我正确地设置了代表：

委托视图控制器.m

```
- (void)secondViewControllerDidJump:
(secondViewController *)controller
{
    [self dismissViewControllerAnimated:YES completion:nil];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"jump"])
    {
        UINavigationController *navigationController = segue.destinationViewController;
        secondViewController *SecondViewController =[[navigationController viewControllers]objectAtIndex:0];
        SecondViewController.delegate = self;
    }
}

@end 
```

secondViewController.h

```
@class secondViewController;

@protocol SecondViewControllerDelegate <NSObject>
- (void)secondViewControllerDidJump: (secondViewController *)controller;

@end

@interface secondViewController : UITableViewController

@property (strong,nonatomic) NSArray *choices;
@property (nonatomic, weak) id <SecondViewControllerDelegate> delegate;

- (IBAction)jump:(id)sender;

@end 
```

secondViewController.m

```
- (IBAction)jump:(id)sender
{
    [self.delegate secondViewControllerDidJump:self];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-13T19:40:13.387

有同样的问题，我通过使用解决了：

```
secondViewController *SecondViewController = segue.destinationViewController; 
```

基本上 segue.destinationViewController 返回一个视图控制器，所以使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T13:35:46.477

您的应用程序在以下几行中崩溃：

```
UINavigationController *navigationController = segue.destinationViewController;
secondViewController *SecondViewController =[[navigationController viewControllers]objectAtIndex:0]; 
```

您要求`navigationController`它`viewControllers`，但日志清楚地表明`navigationController`不是a而是 a ，它**不**响应选择器。`UINavigationController``secondViewController``-viewControllers`

确保它`segue.destinationViewController`真的返回一个`UINavigationController`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T13:37:26.370

试试这个

```
secondViewController *SecondViewController =[[self.navigationController viewControllers]objectAtIndex:0]; 
```

# javascript - PhoneGap/Android：谷歌地图未在模拟器中完全显示

> ID：10564177
> 
> 赞同：1
> 
> 时间：2012-05-12T13:28:28.337
> 
> 标签：javascript, android, google-maps, cordova, android-emulator

我正在尝试运行具有 Google 地图的 Android 的 PhoneGap 应用程序（使用 Eclipse 和 PhoneGap for Andoroid 插件）。基本上它似乎工作。但是，在显示地图时会出现一些故障。我手头没有手机，只有模拟器。例如，该地图如下图所示：

![在此处输入图像描述](../Images/7fd48fa46ec93fdb749c5a7eabe3bb7e.png)

控件和此“使用条款”都在那里，但地图上缺少一些部分。当我移动地图时，它也会滑动空白/灰色区域。但是在刷新/重新加载后，地图的一部分又消失了。而且它并不总是相同的区域，有时更小，有时更大。但从来没有整个区域都被地图填满。

这是模拟器的错误/故障吗？在搜索问题时，我只是偶然发现地图根本不显示的问题（例如，布局为 0px/0px 或 API 密钥丢失）。我也有一个原生的 Android 应用程序，并且带有谷歌地图的 Activity 显示得很好。

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T09:00:05.937

好的，在网上搜索了一些之后，我发现了问题。当您尝试在隐藏的 DIV 元素中加载地图时，这似乎是一个常见问题。诀窍是在此 DIV 变得可见后简单地刷新地图。我发现并且对我有用的一种方法是手动触发调整大小事件：`google.maps.event.trigger(map, "resize");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T18:07:27.193

你能发布你的代码吗？当我遇到这样的问题时，我将其应用于保存地图的容器：

```
layout: {
   type: 'fit'
} 
```

# elf - 将 ELF 文件加载到不同于 0x0 的基地址中

> ID：10564178
> 
> 赞同：1
> 
> 时间：2012-05-12T13:28:37.083
> 
> 标签：elf

我想更改我的 $(LD) 命令，即我的 ELF 文件将从地址 0x1000 而不是 0x0 加载。我想将我的用户页表中的第一页设置为不可访问，这样用户就无法访问从 0x0 到 0x1000 的虚拟地址 strt 谢谢...

# javascript - JS中带有自定义数据的自定义事件？

> ID：10564180
> 
> 赞同：0
> 
> 时间：2012-05-12T13:28:43.417
> 
> 标签：javascript, events

我正在做一个孤立的上下文消息传递一个 Chrome 扩展。这并不重要，但重要的是它不适用于基本`$(document).trigger()`和`$(document).on()`（已经尝试在两边都包括 jQuery，但它不起作用）。

所以我们坚持使用标准 JS。现在在他们的示例中，他们说要收听自定义事件：

```
 document.addEventListener('POLL',function(event){ 
     chrome.extension.sendRequest({poll:true, at:(new Date().getTime())}); 
 }); 
```

并根据需要触发该事件：

```
var ce = document.createEvent('Event');
ce.initEvent('POLL',true,true);
document.dispatchEvent(ce);
delete ce; 
```

如您所见，`POLL`是我的自定义事件。现在，我如何将一些数据粘贴到它上面？

我用谷歌搜索了整个互联网并找到了 zilch，一定是在寻找错误的关键字，哈哈。

# c# - Need an efficient in-memory cache that can process 4k to 7k lookups or writes per second

> ID：10564181
> 
> 赞同：11
> 
> 时间：2012-05-12T13:28:44.387
> 
> 标签：c#, caching, hashtable, memorycache, concurrentdictionary

I have an efficient C# application that receives 80 bytes of data at a rate of 5k to 10k records per second on a multi threaded CPU.

I need to now set up a in memory-cache to detect and filter duplicate records so I can suppress them from travelling further in the pipeline.

**Cache specs (maximum thresholds)**

*   80 bytes of data
*   10,000 records / second
*   60 Seconds of cache = Key quantity = 60,000
*   (sub total 48000000 bytes = 48Mb )
*   Ideal cache size = 5 minutes (or 240Mb)
*   Acceptable runtime cache size bloat = 1 GB

**Question**

What is the best way to set up an in-memory cache, dictionary, hashtable, array, etc that will allow the most efficient lookups, purging of old cache data, and prevent expiration of data that is hit.

I looked at [ASP.Net Cache](http://www.hanselman.com/blog/UsingTheASPNETCacheOutsideOfASPNET.aspx), [System.Runtime.MemoryCache](http://msdn.microsoft.com/en-us/library/dd780572) but think I need something more lightweight and customized to achieve correct throughput. I'm also looking at the [System.Collections.Concurrent](http://msdn.microsoft.com/en-us/library/dd287108) as an alternative and [this related whitepaper](http://blogs.msdn.com/b/pfxteam/archive/2010/04/26/9997562.aspx).

Does anyone have suggestions on what the best approach would be?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-12T22:19:24.850

Remember, don't prematurely optimise!

There may be a reasonably concise way of doing this without resorting to unmanaged code, pointers and the like.

A quick test on my old, ordinary laptop shows that you can add 1,000,000 entries to a `HashSet` while removing 100,000 entries in ~100ms. You can then repeat that with the same 1,000,000 values in ~60ms. This is for working with just longs - 80 byte data structures are obviously larger, but a simple benchmark is in order.

My recommendations:

*   Implement the 'lookup' and 'duplicate detection' as a `HashSet`, which is extremely fast for inserting, removing and finding.

*   Implement the actual buffer (that receives new events and expires old ones) as a suitably large circular/ring buffer. This will avoid memory allocations and deallocations, and can add entries to the front and remove them from the back. Here are some helpful links including one (the second one) that describes algorithms for expiring items in the cache:

[Circular Buffer for .NET](http://circularbuffer.codeplex.com/)

[Fast calculation of min, max, and average of incoming numbers](https://stackoverflow.com/questions/10288076/fast-calculation-of-min-max-and-average-of-incoming-numbers)

[Generic C# RingBuffer](http://florianreischl.blogspot.com.au/2010/01/generic-c-ringbuffer.html)

[How would you code an efficient Circular Buffer in Java or C#](https://stackoverflow.com/questions/590069/how-would-you-code-an-efficient-circular-buffer-in-java-or-c-sharp)

*   Note that the circular buffer is even better if you want your cache to be bounded by number of elements (say 100,000) rather than time of events (say the last 5 minutes).

*   When items are removed from the buffer (which searches from the end first), they can be removed from the `HashSet` also. No need to make both data structures the same.

*   *Avoid multithreading until you need it!* You have a naturally 'serial' workload. Unless you know one of your CPU threads can't handle the speed, keep it in a single thread. This avoids contention, locks, CPU cache misses and other multithreading headaches that tend to slow things down for workloads that are not [embarrassingly parallel](http://en.wikipedia.org/wiki/Embarrassingly_parallel). My main caveat here is that you may want to offload the 'receiving' of the events to a different thread from the processing of them.

*   The above recommendation is the main idea behind [Staged event-driven architecture (SEDA)](http://en.wikipedia.org/wiki/Staged_event-driven_architecture) that is used as the basis for high-performance and stable-behaviour event-driven systems (such as messaging queues).

The above design can be wrapped cleanly, and attempts to achieve the raw performance required with a minimum of complexity. This only provides a decent baseline from which efficiency can now be extracted and measured.

(**Note**: If you need persistence for the cache, look at [Kyoto Cabinet](http://fallabs.com/kyotocabinet/). If you need the cache to be visible to other users or distributed, look at [Redis](http://redis.io/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T14:58:50.440

I don't have anything to back this up but I do like some weekend practice :)

To solve the purging you could use a circular cache where the latest values overwrite the oldest (you won't have an exact *n minutes* cache that way of course) so you only need to remember the offset where your last record went. You could initialize the cache by filling it with copies of the first record, to prevent it from matching a record with only 0's with the cache's uninitialized data.

You could then simply start matching from the first byte, if the record doesn't match, skip that record's remaining bytes and attempt to match the next until the end of the cache.

If the records contain a header followed by data you may want to match backwards to increase the speed at which you find nonmatching data.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T19:39:40.530

Here is a sample that will work with a single thread. The code uses two dictionaries to track the data. One dictionary is used to track records per interval `hashDuplicateTracker` and a second dictionary to age out certain values of the dictionary `HashesByDate`

Bugs: CheckDataFreshness has a few bugs in it relating to ElementAt()... I'm working through this.

Some improvements I should make

*   Replace the Linq operator ElementAt(x) with something else
*   Make sure CheckDataFreshness runs no more frequently than once per interval

To make this multithreaded

*   Replace Dictionary with ConcurrentDictionary for FrequencyOfMatchedHash, DecrementRecordHash,
*   Get a sorted version of ConcurrentDictionary or use locks for `HashesByDate`

* * *

```
 public class FrequencyOfMatchedHash : Dictionary<int,int>
{ 
    public void AddRecordHash(int hashCode)
    {
        if (this.ContainsKey(hashCode))
        {
            this[hashCode]++;
        }
        else
        {
            this.Add(hashCode, 1);
        }
    }
    public void DecrementRecordHash(int hashCode)
    {
        if (this.ContainsKey(hashCode))
        {
            var val = this[hashCode];
            if (val <= 1)
            {
                this.Remove(hashCode);
            }
        } 
    }

    public override string ToString()
    {
        return this.Count + " records";
    }
}

public class HashDuplicateTracker : Dictionary<int, int >
{

    internal void AddRecord(int recordHash)
    {
        if (this.ContainsKey(recordHash))
        {
            this[recordHash]++;
        }
        else
        {
            this.Add(recordHash, 1);
        }
    }
}

public class HashesByDate : SortedDictionary<DateTime, FrequencyOfMatchedHash>
{
    internal void AddRecord(DateTime dt, int recordHash)
    {
        if (this.ContainsKey(dt))
        {
            this[dt].AddRecordHash(recordHash);
        }
        else
        {

            var tmp = new FrequencyOfMatchedHash();
            tmp.AddRecordHash(recordHash);

            var tmp2 = new FrequencyOfMatchedHash();
            tmp2.AddRecordHash(recordHash);
            this.Add(dt, tmp);
        }
    }
}
public class DuplicateTracker
{
    HashDuplicateTracker hashDuplicateTracker = new HashDuplicateTracker();

    // track all the hashes by date
    HashesByDate hashesByDate = new HashesByDate();

    private TimeSpan maxRange;
    private int average;

    public DuplicateTracker(TimeSpan range)
    {
        this.maxRange = range;
    }

    public void AddRecordHash(DateTime dt, int recordHash)
    {
        if (hashesByDate.Count == 0)
        {
            hashDuplicateTracker.AddRecord(recordHash);
            hashesByDate.AddRecord(dt, recordHash);

            return;
        }
        else
        {
            // Cleanup old data
            DateTime maxDate = hashesByDate.ElementAt(hashesByDate.Count - 1).Key;
            DateTime oldestPermittedEntry = maxDate - maxRange;

            if (dt >= oldestPermittedEntry)
                try
                {
                    hashDuplicateTracker.AddRecord(recordHash);
                    hashesByDate.AddRecord(dt, recordHash);

                    CheckDataFreshness(oldestPermittedEntry);
                }
                catch (ArgumentException e)
                {
                    // An entry with the same key already exists.
                    // Increment count/freshness
                    hashesByDate[dt].AddRecordHash(recordHash);
                    hashDuplicateTracker[recordHash]++;
                    CheckDataFreshness(oldestPermittedEntry);
                }
        }
    }

    /// <summary>
    /// This should be called anytime data is added to the collection
    /// 
    /// If threading issues are addressed, a more optimal solution would be to run this on an independent thread.
    /// </summary>
    /// <param name="oldestEntry"></param>
    private void CheckDataFreshness(DateTime oldestEntry)
    {
        while (hashesByDate.Count > 0)
        {
            DateTime currentDate = hashesByDate.ElementAt(0).Key;

            if (currentDate < oldestEntry)
            {
                var hashesToDecrement = hashesByDate.ElementAt(0).Value;

                for (int i = 0; i < hashesToDecrement.Count; i++)
                {
                    int currentHash = hashesToDecrement.ElementAt(0).Key;
                    int currentValue = hashesToDecrement.ElementAt(0).Value;

                    // decrement counter for hash
                    int tmpResult = hashDuplicateTracker[currentHash] - currentValue;
                    if (tmpResult == 0)
                    {
                        // prevent endless memory growth.
                        // For performance this might be deferred 
                        hashDuplicateTracker.Remove(tmpResult);
                    }
                    else
                    {
                        hashDuplicateTracker[currentHash] = tmpResult;
                    }

                    // remove item
                    continue;
                }

                hashesByDate.Remove(currentDate);

            }
            else
                break;
        }
    }

 } 
```

# php - Joomla 表单创建

> ID：10564184
> 
> 赞同：0
> 
> 时间：2012-05-12T13:28:54.640
> 
> 标签：php, mysql, forms, joomla

再会，

我正在使用 Joomla 1.5 并想为一个大学项目制作一个房地产管理系统。我已经创建了数据库。我能够制作管理员插入/编辑/删除属性列表的后端部分。但是，我需要一些前端搜索部分的帮助。我还没有找到任何可以帮助我做前端的教程。我知道现有的扩展和软件可以为你做，但我想从头开始。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T13:37:04.513

很确定 Joomla 文档有您正在寻找的内容： [开发模型-视图-控制器组件 - 第 1 部分](http://docs.joomla.org/Developing_a_Model-View-Controller_Component_-_Part_1) 和 [为 Joomla 1.5 创建一个 Hello World 模块](http://docs.joomla.org/Creating_a_Hello_World_Module_for_Joomla_1.5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T13:42:38.087

所以你的意思是你不想自己编程前端，而是想使用一个工具来实现它？如果是这样，不要。我见过一些工具，它们都很糟糕，只有几个标准选项，没有什么特别的。我不认为你会绕过编码一些 html 和 php，特别是因为你在后端有自己的数据库。

有很多非常有用的教程。我最喜欢的是新波士顿，比如[这个 php 教程](http://thenewboston.org/list.php?cat=11)和[这个 html 初学者教程](http://thenewboston.org/list.php?cat=40)。

干杯

# opengl - GLSL imageLoad/imageStore & cubeMap

> ID：10564186
> 
> 赞同：0
> 
> 时间：2012-05-12T13:29:32.153
> 
> 标签：opengl, reflection, glsl

在 GLSL 中执行 textureCube() texturelookup 将反射射线作为查找坐标。

GLSL 4.2 引入了显然也适用于立方体贴图的 imageLoad/imageStore。

但是加载/存储功能

```
imageStore(gimagecube image, ivec3 p, vec4 data) 
```

取整数坐标来访问相应的纹素。

这些坐标是如何解释的，如何根据反射光线的方向计算它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T22:59:32.050

基本上，带有图像加载/存储的立方体贴图就像 6 元素阵列纹理一样工作。纹理坐标的 z 分量指定要查看的面。面的顺序与立方体贴图面的枚举器顺序相同，与[分层渲染](http://www.opengl.org/wiki/Framebuffer_Object#Layered_Images)相同。

至于如何计算它们的方向，您可以使用规范中详述的算法来做到这一点。GL 4.2 核心的第 3.9.10 节解释了 OpenGL 如何获取方向并将其转换为特定的面和纹理坐标。它比我想在帖子中解释的要复杂一些，而且它实际上只是一些文本的复制和粘贴。

总体思路是，最大的组件根据表 3.17 定义要使用的面。然后从该表中获取 S 和 T 纹理坐标，并对它们进行一些数学运算以将它们转换为 [0, 1] 纹理坐标。

# module - 模块化应用程序 C++Builder

> ID：10564189
> 
> 赞同：1
> 
> 时间：2012-05-12T13:29:52.170
> 
> 标签：module, c++builder

我正在尝试使用 C++ Builder XE2 创建一个模块化应用程序。

谁能给我举个例子。我需要能够将对象传入和传出模块。

例如，主机应用程序将有一个数据库连接，并且模块将需要能够使用此连接来运行查询，以及他们打开的任何项目，如果他们需要不同的模块，我想将其传递回主机对项目进行一些处理，而不是重新打开它。

我看过 hydra，但那是针对 Delphi 的。

# android - 仅查看注册 MotionEvent.ACTION_DOWN

> ID：10564200
> 
> 赞同：5
> 
> 时间：2012-05-12T13:32:16.510
> 
> 标签：android, ontouchlistener, motion-detection, touch-event

我遇到了一个有趣的问题……我似乎找不到解决方案。我正在使用 ObjectAnimator 来旋转 ImageView；但 onTouchListener 似乎只注册 MotionEvent.ACTION_DOWN。（我是从 Log Cats 中推断出来的，还有 MotionEvent.ACTION_MOVE 和 MotionEvent.ACTION_UP）。

我想也许这个问题与试图同时聆听和制作动画有关。我将 imageview 和线性布局（设置为 MATCH PARENT）包装在相对布局中，并注册线性布局以侦听触摸事件。线性布局也有同样的问题；只有 MotionEvent.ACTION_UP 正在处理。我需要做些什么来注册 MotionEvent.ACTION_MOVE 吗？

这是我的代码：

```
 touch_pad = (LinearLayout) findViewById(R.id.layout_touch_capture);
    touch_pad.setOnTouchListener(this);
    touch_pad.requestFocus();

            public boolean onTouch(View v, MotionEvent event) {
    switch(v.getId()) {
    case (R.id.layout_touch_capture):

    long end = 0;
    long start = 0;
    float y = event.getY();
    float y_sum = y;
    float x = event.getX();

    switch(event.getAction()) {
    case (MotionEvent.ACTION_UP): 
        end = animator.getCurrentPlayTime();
    Log.d("WheelActivity", "end location = " + end);
    break;
    case (MotionEvent.ACTION_MOVE):

    Log.d("WheelActivity", "event.getY() = " + y);
    y_sum += y;
    animator.setCurrentPlayTime((long) (start + y_sum));
    Log.d("WheelActivity", "animator play time = "                               animator.getCurrentPlayTime());
    Log.d("WheelActivity", "animator fraction = " +
          animator.getAnimatedFraction());

    break;
    case (MotionEvent.ACTION_DOWN): 
        start = animator.getCurrentPlayTime();
    Log.d("WheelActivity", "start location = " + start);
    break;
    }   
    }
    return false;
} 
```

（对不起，格式不正确的代码......）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-12T14:10:51.923

```
return false; 
```

变成 `return true;`

# c# - XPathDocument 无法加载

> ID：10564202
> 
> 赞同：0
> 
> 时间：2012-05-12T13:32:43.120
> 
> 标签：c#, xml

我创建 a`XPathDocumnet`并给它 a `xml file`，但它不加载文档。我的意思是加载需要无穷大，因为没有例外或类似的东西。这是代码：

```
string root = @"http://emtehan.roshd.ir";
WebClient webclient = new WebClient();
webclient.DownloadFile(root, "doc.xml");
XPathDocument document = new XPathDocument("doc.xml"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T16:04:48.717

问题是您的目标站点 - 它不使用标准标签，我的意思是解析 xml 时出现问题。看来您只想从代码中提取 url。因此，使用示例 httpclient 下载行 html 内容，然后使用 ereg 函数提取 url。另外，如果你只是想偷一个网站，有很多不错的应用程序，比如 websote 离线浏览器（试用版），甚至一些开源项目（参考：google.com！）

*ereg 方法比解析所有代码要快得多！检查一些开源项目代码，它们都是这样工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T14:00:39.650

您可以参考 System.Xml.Linq.dll

代码在这里

```
///Reference the namespace
using System.Xml.Linq;
try
{ 
    ///Read xml from url
    var doc = XDocument.Load("MyUrl");
    ///Write it to local file
    doc.Save("MyFile.xml");
}
catch(Exception exception)
{
    MessageBox.Show(exception.Message);
} 
```

它会解决问题吗？

**已编辑**

```
var response = HttpWebRequest.Create("http://emtehan.roshd.ir/").GetResponse() as HttpWebResponse;
var output = new StreamReader(response.GetResponseStream()).ReadToEnd(); 
```

它将 html 提供给字符串，然后您可以执行任何您想要的操作

# android - onCreate() 中的新处理程序

> ID：10564207
> 
> 赞同：2
> 
> 时间：2012-05-12T13:33:08.897
> 
> 标签：android, multithreading, handler, oncreate

我在我的 Activity 的 onCreate() 方法之一中为 UI 线程实例化我的处理程序。（为避免内存泄漏风险，Handler 不是内部类，而是普通类。）

由于一个 Handler 对应一个 Thread，但一个 Thread 可以有多个 handler（据我所知），每次调用 onCreate() 都会实例化一个新的 Handler 实例。因此，如果我的活动再次重新创建（在 onDestroy 之后，但同时没有任何进程终止），onCreate() 将添加另一个处理程序，而旧的处理程序不会被删除。（在 Android 源代码中，Handler 只请求线程的 Looper 并获取对其消息队列的引用。）

最佳解决方案是什么？我应该将一个 Handler 实例化为一个静态变量，然后在 onCreate() 中，我可以检查它是否为空。如果它是非空的，那么就不需要实例化一个新的，对吧？

（不用说，在 onDestroy() 中，我将 Handler 实例中的 Activity 引用设置为 NULL，因此 Handler 不会泄漏 Activity 或任何相关内容——我的处理程序的处理方法会检查它是否为 null，并在需要时丢弃消息.但我的问题是，由于我猜前面段落中详述的原因，仍然为线程保留了Handler，所以onCreate调用越多，附加到UI线程的Handler实例就越多。我的静态解决方案是否正确？如果这不是关键，那么Android如何检测到与当前线程关联的Handler应该是GC-d？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T13:22:15.060

Handler 不被 Thread、Looper 或其他任何东西引用。处理程序只是您将内容放入 Looper 的消息队列中的一种便捷方式。

如果您在 onCreate() 中实例化一个处理程序并将其分配给您的活动中的成员（实例）变量，那么当您的活动被垃圾收集时，处理程序也将被垃圾收集，因为没有任何东西引用它。

因此在 onCreate() 中创建 Handler 对象不会导致任何内存泄漏。

# refactoring - 什么是类型代码？

> ID：10564212
> 
> 赞同：2
> 
> 时间：2012-05-12T13:33:24.780
> 
> 标签：refactoring, terminology

我正在阅读[Martin Fowler](http://martinfowler.com/books.html)的[“重构”](https://rads.stackoverflow.com/amzn/click/com/0201485672)。

有一个我以前从未见过的术语“类型代码”。

什么是类型代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T15:36:13.507

可以出现类型代码的一个上下文是在 C 中具有`union`类型：

```
typedef enum Type { T_INT, T_FLOAT, T_DOUBLE, T_LONG } Type;

typedef struct Datum
{
    Type type;
    union
    {
        int     i;
        float   f;
        long    l;
        double  d;
    } u;
} Datum; 
```

这导致如下代码：

```
Datum v;

switch (v.type)
{
case T_INT:
    int_processing(v.u.i);
    break;
case T_FLOAT:
    float_processing(v.u.f);
    break;
case T_DOUBLE:
    double_processing(v.u.d);
    break;
} 
```

现在，开关中省略 T_LONG 是有意还是无意？它是最近添加的，并且此开关没有得到必要的更新吗？

当你得到很多这样的代码，并且你需要添加 T_UNSIGNED 时，你必须去寻找很多地方来纠正。使用 C，您没有像“创建一个类来表示类型”这样简单的解决方案。可以做到，但与使用更多面向对象的语言相比，它需要（很多）更多的努力。

但是，术语“类型代码”指的是类似于`Type`示例中的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-02T11:51:38.033

类型代码是当您出于某种目的想要拥有自己的有限类型时，作为一种解决方法，创建一堆数字或字符串常量，它们代表您的“类型”的所有可能值。

# python - Django 1.4 定义用户

> ID：10564215
> 
> 赞同：3
> 
> 时间：2012-05-12T13:34:01.370
> 
> 标签：python, django, django-models, sqlite

```
(pythonanywhere2)bash-3.2$ python manage.py syncdb
Creating tables ...
Creating table auth_permission
Creating table auth_group_permissions
Creating table auth_group
Creating table auth_user_user_permissions
Creating table auth_user_groups
Creating table auth_user
Creating table django_content_type
Creating table django_session
Creating table django_site
Creating table django_admin_log

You just installed Django's auth system, which means you don't have any superusers defined.
Would you like to create one now? (yes/no): yes
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/Users/huksy/Documents/virtualenv/pythonanywhere2/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/Users/huksy/Documents/virtualenv/pythonanywhere2/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/Users/huksy/Documents/virtualenv/pythonanywhere2/lib/python2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/Users/huksy/Documents/virtualenv/pythonanywhere2/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/Users/huksy/Documents/virtualenv/pythonanywhere2/lib/python2.7/site-packages/django/core/management/base.py", line 371, in handle
    return self.handle_noargs(**options)
  File "/Users/huksy/Documents/virtualenv/pythonanywhere2/lib/python2.7/site-packages/django/core/management/commands/syncdb.py", line 110, in handle_noargs
    emit_post_sync_signal(created_models, verbosity, interactive, db)
  File "/Users/huksy/Documents/virtualenv/pythonanywhere2/lib/python2.7/site-packages/django/core/management/sql.py", line 189, in emit_post_sync_signal
    interactive=interactive, db=db)
  File "/Users/huksy/Documents/virtualenv/pythonanywhere2/lib/python2.7/site-packages/django/dispatch/dispatcher.py", line 172, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/Users/huksy/Documents/virtualenv/pythonanywhere2/lib/python2.7/site-packages/django/contrib/auth/management/__init__.py", line 73, in create_superuser
    call_command("createsuperuser", interactive=True, database=db)
  File "/Users/huksy/Documents/virtualenv/pythonanywhere2/lib/python2.7/site-packages/django/core/management/__init__.py", line 150, in call_command
    return klass.execute(*args, **defaults)
  File "/Users/huksy/Documents/virtualenv/pythonanywhere2/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/Users/huksy/Documents/virtualenv/pythonanywhere2/lib/python2.7/site-packages/django/contrib/auth/management/commands/createsuperuser.py", line 70, in handle
    default_username = get_default_username()
  File "/Users/huksy/Documents/virtualenv/pythonanywhere2/lib/python2.7/site-packages/django/contrib/auth/management/__init__.py", line 105, in get_default_username
    default_username = get_system_username()
  File "/Users/huksy/Documents/virtualenv/pythonanywhere2/lib/python2.7/site-packages/django/contrib/auth/management/__init__.py", line 85, in get_system_username
    return getpass.getuser().decode(locale.getdefaultlocale()[1])
TypeError: decode() argument 1 must be string, not None 
```

网址.py

```
from django.conf.urls import patterns, include, url

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    # Examples:
    # url(r'^$', 'proyecto.views.home', name='home'),
    # url(r'^proyecto/', include('proyecto.foo.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    url(r'^admin/', include(admin.site.urls)),
) 
```

设置.py

```
# Django settings for proyecto project.

DEBUG = True
TEMPLATE_DEBUG = DEBUG

ADMINS = (
    # ('Your Name', 'your_email@example.com'),
)

MANAGERS = ADMINS

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'database.db',                      # Or path to database file if using sqlite3.
        'USER': '',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
}

# Local time zone for this installation. Choices can be found here:
# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name
# although not all choices may be available on all operating systems.
# On Unix systems, a value of None will cause Django to use the same
# timezone as the operating system.
# If running in a Windows environment this must be set to the same as your
# system time zone.
TIME_ZONE = 'America/Chicago'

# Language code for this installation. All choices can be found here:
# http://www.i18nguy.com/unicode/language-identifiers.html
LANGUAGE_CODE = 'en-us'

SITE_ID = 1

# If you set this to False, Django will make some optimizations so as not
# to load the internationalization machinery.
USE_I18N = True

# If you set this to False, Django will not format dates, numbers and
# calendars according to the current locale.
USE_L10N = True

# If you set this to False, Django will not use timezone-aware datetimes.
USE_TZ = True

# Absolute filesystem path to the directory that will hold user-uploaded files.
# Example: "/home/media/media.lawrence.com/media/"
MEDIA_ROOT = ''

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://media.lawrence.com/media/", "http://example.com/media/"
MEDIA_URL = ''

# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
STATIC_ROOT = ''

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/'

# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

# Make this unique, and don't share it with anybody.
SECRET_KEY = 'q(!n1k@^3kj$k9_ug^-x+a^^&amp;e%)3p9!2z4sce5+_p7lxx9u&amp;a'

# List of callables that know how to import templates from various sources.
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
#     'django.template.loaders.eggs.Loader',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
)

ROOT_URLCONF = 'proyecto.urls'

# Python dotted path to the WSGI application used by Django's runserver.
WSGI_APPLICATION = 'proyecto.wsgi.application'

TEMPLATE_DIRS = (
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
)

# A sample logging configuration. The only tangible logging
# performed by this configuration is to send an email to
# the site admins on every HTTP 500 error when DEBUG=False.
# See http://docs.djangoproject.com/en/dev/topics/logging for
# more details on how to customize your logging configuration.
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'filters': {
        'require_debug_false': {
            '()': 'django.utils.log.RequireDebugFalse'
        }
    },
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'filters': ['require_debug_false'],
            'class': 'django.utils.log.AdminEmailHandler'
        }
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
    }
} 
```

我正在尝试启动我的项目，但由于创建数据库的问题，这是不可能的。我已经擦除了数据库并再次创建了几次，但我无法继续。也许这是一个编码问题，但我不这么认为。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T13:59:57.350

看起来您的环境配置不正确。在运行之前尝试导出这些环境变量`python manage.py syncdb`：

```
export LANG=es_ES.UTF-8
export LC_ALL=es_ES.UTF-8

python manage.py syncdb 
```

如果您从 Debian 衍生版本（如 *buntu）运行该命令，请尝试以下操作：

```
sudo dpkg-reconfigure locales 
```

**编辑**：等等。现在我明白了`(pythonanywhere2)bash-3.2$`。您是否阅读过 tutorial.pythonanywhere.com 上有关在 Python Anywhere 上创建[新](http://tutorial.pythonanywhere.com)[Django 项目](http://tutorial.pythonanywhere.com/django#tutorial-setting-up-a-new-django-app-on-pythonanywhere)的相关文章？

# c# - 如何在 (.Where) 语句中检查多个值以选择相同的类型但具有不同的值

> ID：10564217
> 
> 赞同：0
> 
> 时间：2012-05-12T13:34:21.503
> 
> 标签：c#, entity-framework, linq-to-entities

```
 var results = _db.CatSchemas.FirstOrDefault(s => s.TypeName == "Programs")
            .Categories.Where(c => c.FilterValToCatMaps.Where
                (fm => fm.FilterValue.Value == age && fm.FilterValue.Value == ProgType).Count() > 0)
                    .Select(c => c.Category1); 
```

如果我删除`&& fm.FilterValue.Value == ProgType`查询工作，但当然只返回仅过滤的结果`age`。

`Categories`我只需要选择`FilterValToCatMaps`与`FilterValue.Value`参数`age`和`ProgType`. `FilterValues`只能包含一个值，并且所有相关的`FilterValToCatMaps`和各自`FilterValues` 的都应该出现在所需的类别中。

我假设的`(fm => fm.FilterValue.Value == age && fm.FilterValue.Value == ProgType)`语句尝试检查两个参数值是否**相同** `FilterValToCatMap.FilterValue`，而不检查`FilterValToCatMap.FilterValue`与类别相关的其他参数值是否包含**下一个**参数值。

FilterValToCatMaps - 表格

行号 | 筛选值 ID | **猫号**

FilterValues - 表

行号 | **价值**| 显示名称 | 过滤器ID

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T13:51:00.270

我认为你可以这样做：

```
 var results = _db.CatSchemas.FirstOrDefault(s => s.TypeName == "Programs")
        .Categories.Where(c => c.FilterValToCatMaps.Any
            (fm => fm.FilterValue.Value == age && fm.FilterValue.Value == ProgType)); 
```

因此，它将返回具有任何该查询的 FilterValToCapMaps 的类别。

顺便说一句，`fm.FilterValue.Value == age && fm.FilterValue.Value == ProgType`仅当年龄和 ProgType 相等时才成立。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T13:52:31.743

如果您想要一个类别列表作为结果，您通常应该以`_db.Categories`.

此外，因为您需要两个`FilterValues`，而不是两个或，您可以将子句拆分为 2 个`Where`子句。

```
var results = _db.Categories
  .Where( c => c.CatSchema.TypeName == "Programs" )
  .Where( c => c.FilterValToCatMaps.Any( fm => fm.FilterValue.Value == age ) )
  .Where( c => c.FilterValToCatMaps.Any( fm => fm.FilterValue.Value == ProgType ) ) 
```

# objective-c - 将对象添加到 NSMutableArray 属性会因无法识别的选择器而崩溃？

> ID：10564219
> 
> 赞同：0
> 
> 时间：2012-05-12T13:34:59.890
> 
> 标签：objective-c, properties, nsmutablearray, unrecognized-selector

当我尝试将对象添加到 NSMutableArray 时，我在这里收到“-[__NSArrayI addObject:]: unrecognized selector sent to instance 0x10dd15ee0”。我不确定为什么。

我有一组嵌套的自定义类。WTEvent 有一个名为 mats 的 NSMutableArray 属性，它由 WTMat 对象组成。mats 有一个称为 bouts 的 WTBout 对象的 NSMutableArray。

我希望能够在回合中更新一个回合，而让其余回合保持不变。在这里，我找到了需要分配回合的垫子。如果它没有初始化，我初始化它。然后，如果它是空的，我尝试向它添加一个 newBout，它会崩溃。

我不应该像这样更改 NSMutableArray 的元素吗？

```
// Locate the correct mat
WTMat* mat = [self getMatFromBoutKey:[updateData valueForKey:@"boutKey"]];
WTBout* newBout = [WTBout buildBoutFromDictionary:updateData];

// need to initialize bouts
if ([mat bouts] == nil) {
    NSLog(@"Initializing bouts");
    NSMutableArray* newBouts = [[NSMutableArray alloc] init ];
    [mat setBouts:newBouts];
}

if ([[mat bouts] count]) {
    // if bouts has bouts, then adjust the bout stack

    NSLog(@"bouts is not empty");
} else {
    // if bouts is empty, just add a bout

    NSLog(@"Adding a newBout");
    NSMutableArray* oldBouts = [mat bouts];
    NSLog(@"oldbouts: %@", [oldBouts description]);
    [oldBouts addObject:newBout]; // -[__NSArrayI addObject:]: unrecognized selector sent to instance 0x10dd15ee0

} 
```

WTMat.h:

```
#import <Foundation/Foundation.h>

@interface WTMat : NSObject
{
    NSString* matName;
    NSString* boutKey;
    NSString* multicastAddress;
    NSMutableArray* bouts;
}

@property (strong, nonatomic) NSString* matName;
@property (strong, nonatomic) NSString* boutKey;
@property (strong, nonatomic) NSString* multicastAddress;
@property (copy, nonatomic) NSMutableArray* bouts; 

@end 
```

日志：

```
2012-05-12 08:14:00.491 Wrestling Tools[12623:403] Initializing bouts
2012-05-12 08:14:00.492 Wrestling Tools[12623:403] Adding a newBout
2012-05-12 08:14:00.492 Wrestling Tools[12623:403] oldbouts: (
)
2012-05-12 08:14:00.492 Wrestling Tools[12623:403] -[__NSArrayI addObject:]: unrecognized selector sent to instance 0x10dd15ee0
2012-05-12 08:14:00.492 Wrestling Tools[12623:403] -[__NSArrayI addObject:]: unrecognized selector sent to instance 0x10dd15ee0
2012-05-12 08:14:00.494 Wrestling Tools[12623:403] (
    0   CoreFoundation                      0x00007fff96783fc6 __exceptionPreprocess + 198
    1   libobjc.A.dylib                     0x00007fff92375d5e objc_exception_throw + 43
    2   CoreFoundation                      0x00007fff968102ae -[NSObject doesNotRecognizeSelector:] + 190
    3   CoreFoundation                      0x00007fff96770e73 ___forwarding___ + 371
    4   CoreFoundation                      0x00007fff96770c88 _CF_forwarding_prep_0 + 232
    5   Wrestling Tools                     0x000000010dc49343 -[WTUpdater fullUpdate:] + 835 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T13:54:59.457

这是你的问题：

```
@property (copy, nonatomic) NSMutableArray* bouts; 
```

“copy”参数生成数组的*不可变*副本，这意味着当此行运行时：

```
NSMutableArray* oldBouts = [mat bouts]; 
```

您实际上得到了一个普通的`NSArray`，这就是为什么您会收到无法识别的选择器错误。

解决此问题的简单方法是将“复制”关键字更改为“强”。稍微难一点的是将其保留为副本，而是将属性的类型更改为 NSArray，尽管这会使修改数组变得复杂。

最后，您可以制作自己的实现，`setBouts:`使用该`-mutableCopy`方法执行副本，以确保它制作的副本是可变的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T13:45:11.953

我认为这都是关于你的`NSMutableArray* oldBouts = [mat bouts];`Alloc 的，看看会发生什么。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-12T14:04:49.860

尝试使用@dynamic 初始化属性。一个[非常相似的答案](https://stackoverflow.com/a/4893104/1169310)可能会对您有所帮助。

# android - 安装 Android SDK：软件包是否需要登录？

> ID：10564220
> 
> 赞同：0
> 
> 时间：2012-05-12T13:35:09.867
> 
> 标签：android, configuration, installation, android-sdk-2.3

我正在尝试安装 Android SDK 2.3.3。使用管理器。我已经选择了所有的软件包，但有些非常需要登录信息，例如`Open Sense`要求登录`htcdev.com`，与摩托罗拉的软件包相同，只是那里的站点不同。

因此我的问题是：是否有必要安装这些软件包才能开始为 Android 开发？它没有工作吗？不使用这些软件包会有什么缺点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T13:54:20.497

不，它们只包含一些自定义 AVD 仿真器。没有他们你很好！

如果您想在模拟器上进行测试，只需单击几下即可创建一个。

# c++ - 错误：“no match for operator+”，用于列表迭代器

> ID：10564222
> 
> 赞同：6
> 
> 时间：2012-05-12T13:35:15.723
> 
> 标签：c++, list, stl, iterator

对于下面的代码，我在行标题中收到错误

```
while((*(It2 + code)).exists){ 
```

```
void locatetohashtable(std::list<Element> elist,
                       int *m,std::list<Element>& table,
                       std::list<std::string>& keylist )
{        
    std::list<Element>::iterator It2=table.begin();
    int i=0;
    int k=0;
    std::list<Element>::iterator It;
    for(It = elist.begin(); It != elist.end(); ++It)
    {
        int code=hash_func(stringIntValue((*It).name),*m,i);
        while((*(It2 + code)).exists){
            i++;
        }
        table.insert(*(It2+i), (*It));
        keylist.insert(keylist.begin(),(*It).name);
        k++;
    }
} 
```

我没有得到同样的错误`++It`

问题是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-12T13:39:32.280

an `iterator`for an`std::list`是双向的，所以不支持`+(int)`. 唯一支持的移动操作是`++`和`--`。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-12T13:39:41.890

那是因为`std::list`的迭代器是[双向迭代器](http://en.cppreference.com/w/cpp/concept/BidirectionalIterator)，所以它们不支持您尝试执行的加法操作。在实践中，这是因为它不能作为一种有效的操作来实现，因为列表不提供随机访问，所以你必须从初始迭代器单步递增到目标迭代器。设计决策是不提供效率低下的操作。

您可以使用[`std::advance`](http://en.cppreference.com/w/cpp/iterator/advance)或[`std::next`](http://en.cppreference.com/w/cpp/iterator/next)避免编写自己的增量循环，但在幕后它将逐步递增。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-12T13:39:39.747

`std::list`迭代器只是双向的，不是随机访问的，所以你不能使用运算符`+`来推进它们。使用`std::next`(C++11) 或`std::advance`代替。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-12T13:41:02.590

这是一个“概念”的问题。

A`list`只能有效地[向前和向后](http://www.sgi.com/tech/stl/ReversibleContainer.html)遍历，因此它的迭代器模拟了双向迭代器的概念。

您可以使用`std::advance`一次将迭代器移动多个位置，但效率不高。

或者，您可以更改为使用`vector`或`deque`代替列表。由于它们是随机存取容器，它们的迭代器有效地支持加法和减法。

# ruby - 有没有办法将密钥发送到 Windowmanager

> ID：10564226
> 
> 赞同：1
> 
> 时间：2012-05-12T13:35:29.917
> 
> 标签：ruby, linux, archlinux, dwm

是否有 gem 可以使用 Ruby 将密钥发送到 Windowmanager？我想向窗口管理器发送命令（我使用 dwm）。就像是

```
windowmanager.send( "MOD-Shift-C" ) 
```

或者东西会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T19:04:05.770

它已经有一段时间没有更新了，但是试试`xdo`gem：

*   [http://rubygems.org/gems/xdo](http://rubygems.org/gems/xdo)
*   [http://auto.rubyforge.org/xdo/index.html](http://auto.rubyforge.org/xdo/index.html)
*   [https://github.com/Quintus/Automations/tree/master/xdo](https://github.com/Quintus/Automations/tree/master/xdo)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T19:16:14.683

这篇文章也部分回答了[这个](https://stackoverflow.com/a/1446617)问题，它提供了 Windows 和 Mac 的示例。[echristopherson 的答案](https://stackoverflow.com/a/10566573)仅适用于 Linux，这似乎就是您所指的。

# bazaar - bzr 如何知道启动板？

> ID：10564229
> 
> 赞同：0
> 
> 时间：2012-05-12T13:35:42.307
> 
> 标签：bazaar, launchpad

我是*git*用户，我想为*Launchpad*上托管的项目克隆一个存储库，该项目使用*bzr*代替。

在他们建议我运行的指南上`bzr branch lp:zim`（其中“zim”是项目）。我想知道*bzr*是如何知道“lp”是什么意思的。这要归功于我的*Mint Linux*上默认安装的一些插件（基本上是伪装的 Ubuntu，所以这很可能）？还有更多这些神奇的关键字吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T13:38:19.823

这是 bzr 的内置命令。请记住，bzr 和 Launchpad 都主要由同一家公司（规范）编写，并且 bzr 对 Launchpad 有大量支持。

另一个这样的关键字是`bzr branch ubuntu:package`，它从 Launchpad 获取当前 Ubuntu 版本中的软件包版本。

[此页面](http://doc.bazaar.canonical.com/beta/en/tutorials/using_bazaar_with_launchpad.html)包含有关 Launchpad 集成的更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T01:42:48.137

默认情况下，bzr 附带了一个插件（请参阅源代码中的 bzrlib/plugins/launchpad）。这为“lp:”URL 方案注册了一个自定义处理程序（对于“ubuntu:”方案也是如此）。

# c# - 将列表绑定到 WPF 中的数据网格时索引超出范围

> ID：10564231
> 
> 赞同：0
> 
> 时间：2012-05-12T13:36:00.753
> 
> 标签：c#, wpf, binding, datagrid

所以我有使用数据网格的 WPF 应用程序。Datagrid 绑定到自定义类型项的 BindingList。但是当我向列表中添加新项目时，我得到以下 wxception：

```
Index was out of range. Must be non-negative and less than the size of the collection.
Parameter name: index 
```

XAML：

```
<Window x:Class="DoctorApp3.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" Loaded="Window_Loaded"
        Closed="Window_Closed">
    <DataGrid AutoGenerateColumns="True" 
            Height="184" HorizontalAlignment="Left" Margin="12,12,0,0" 
            Name="dataGrid1" VerticalAlignment="Top" Width="479" 
            ItemsSource="{Binding}" /> 
```

窗口代码：

```
public BindingList<Patient> tableData;
public List<CompositeType> ntfList;
Listener listener;

public MainWindow()
{
    InitializeComponent();
    tableData = new BindingList<Patient>()
    {                
    };

    //Bind the DataGrid to the customer data
    dataGrid1.DataContext= tableData;

    dataGrid1.AutoGeneratedColumns += (a, b) =>
    {       
        try
        {
            dataGrid1.Columns.RemoveAt(0); //the place where exception appears
        }
        catch (Exception ex)
        {
        }
        dataGrid1.Columns.RemoveAt(1);
        dataGrid1.Columns.RemoveAt(2);
    };
    ntfList = new List<CompositeType>();
    dataGrid1.MouseDoubleClick += (a, b) => OpenPatientWindow();
    button1.Click += (a, b) => OpenPatientWindow();            
} 
```

添加新数据的地方：

```
public void OnMessageAdded(CompositeType message)
{
    if (((message as CompositeType).formTitle.Equals("Informing Doctor")) || ((message as CompositeType).formTitle.Equals("Informing about end therapy")))
    {
        Patient p = (message as CompositeType).patient;
        // (mainWindow as MainWindow).dataGrid1.
        (mainWindow as MainWindow).tableData.Add(p);
        (mainWindow as MainWindow).ntfList.Add(message as CompositeType);
        (mainWindow as MainWindow).dataGrid1.Items.Refresh();
    }
} 
```

我通过回调函数 OnMessageAdded 从 WCF 服务获取列表的新数据，但我从服务收到的数据完全没问题。

我使用的自定义类：

```
[Serializable]
public class Patient
{
    [DataMember]
    public String PatientId;   
    [DataMember]
    public String Surname;    
    [DataMember]
    public String Name;        
    [DataMember]
    public String Patronymic;       
    [DataMember]
    public String Adress;            
    [DataMember]
    public String Phone;            
    [DataMember]
    public String Birthday;     
    [DataMember]
    public String Diagnosis;  
    [DataMember]
    public String State;          
    [DataMember]
    public String TherapyStart;           
    [DataMember]
    public String TherapyEnd;
} 
```

任何想法为什么它不起作用？

编辑：我在一个类似的项目中，患者对象以下一种方式查看：![](../Images/98800de6414ec81ac8c2c1caf6ec06d8.png)

在我的项目中，它更像是：![](../Images/105ffbc3c2237d516170fc33ffcbdcf8.png)

我认为这是一个问题，但不知道这是什么意思。

# nhibernate - 注入同一个实例

> ID：10564238
> 
> 赞同：0
> 
> 时间：2012-05-12T13:37:03.927
> 
> 标签：nhibernate, dependency-injection, ninject

我已经为 nhibernate 实现了存储库和工作单元模式。我使用ninject作为DI。我有不止一个数据库，所以我有不同的工作单元实现和不同的存储库。我用来将 IDatabaseConnection 接口注入到工作单元：

```
public interface IDatabaseConnection
{
    ISessionFactory SessionFactory { get; }
} 
```

和工作单位：

```
public class SomeUnitOfWork : GenericUnitOfWork
{
    [Inject]
    public SomeUnitOfWork(IDatabaseConnection connection)
        : base(connection)
    {
    } 
```

和一些回购

```
 [Inject]
    public IRepository<Transaction> Transactions { get; private set; }

    [Inject]
    public IRepository<Paramdef> Paramdefs { get; private set; }

    [Inject]
    public IRepository<Transmap> Transmaps { get; private set; }

    [Inject]
    public IRepository<User> Users { get; private set; } 
```

我在 ninject 模块上绑定 IRepository 时使用的 GenericRepository 实现具有等待 ISession 的参数，而不是可以从 ISessionFactory 中检索到的参数。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T21:52:45.693

您必须将 ISession 注入您的 UoW 而不是工厂，它可以由 Ninject 创建。会话应该在某个范围内，例如用于 Web 应用程序的 InRequestScope。然后在会话绑定中添加一些条件来定义使用哪一个。例如

```
Bind<ISession>().ToMethod(context => context.Kernel.Get<ISessionFactory>("DB1")).WhenAnyAnchestorNamed("UoW1").InRequestScope();
Bind<SomeUnitOfWork>().ToSelf().Named("UoW1"); 
```

# java - 没有为 Cucumber runner 注入 Spring 依赖项

> ID：10564240
> 
> 赞同：5
> 
> 时间：2012-05-12T13:37:12.087
> 
> 标签：java, spring, dependency-injection, bdd, cucumber-jvm

我有使用 SpringJUnit4ClassRunner 的现有测试用例，它使用 @Resource 注释来标记变量以进行注入。

@Resource 用作将来可能使用的另一个 DI 框架。（[@Resource 与 @Autowired](https://stackoverflow.com/questions/4093504/resource-vs-autowired)）

现在我已经开始使用 Cucumber runner 编写 BDD 测试用例。然而，DI 似乎没有发生。（@Autowired 有效，但@Resource 无效）有人知道为什么不吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T21:08:05.090

（我假设您使用的是 Cucumber-JVM）

而不是使用**SpringJUnit4ClassRunner**，您应该使用**Cucumber** runner。

```
@RunWith(Cucumber.class) 
```

要使用它，您将需要以下依赖项：

```
 <dependency>
        <groupId>info.cukes</groupId>
        <artifactId>cucumber-java</artifactId>
        <version>${info.cukes.version}</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>info.cukes</groupId>
        <artifactId>cucumber-junit</artifactId>
        <version>${info.cukes.version}</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>info.cukes</groupId>
        <artifactId>cucumber-spring</artifactId>
        <version>${info.cukes.version}</version>
        <scope>test</scope>
    </dependency> 
```

这将在您的类路径中查找**cucumber.xml 。**这个 XML 只是一个 spring bean 配置 XML。我的很简单，包含：

```
<context:component-scan base-package="cucumber.runtime.java.spring"/>
<context:annotation-config/>

<!-- wire beans required for testing -->
<import resource="classpath*:/context.xml"/> 
```

当您运行测试时，您应该会看到 Spring 加载**cucumber.xml**，然后导入**context.xml**。

# php - 由于 htaccess 限制，PHP fopen() 和 is_file() 无法正常工作

> ID：10564241
> 
> 赞同：0
> 
> 时间：2012-05-12T13:37:17.950
> 
> 标签：php, file, .htaccess, fopen, file-exists

我将尽我所能解释这一点。我正在开发一个会员驱动的网站，会员可以上传文件以出售它们（他们拥有这些文件的权利）。

前提 1：我想确保每个成员的文件夹不能直接访问，只能通过站点本身的链接访问。

此链接仅在购买者的会员区域生成（用于多次下载文件......并且会员资料也不允许链接到这些文件夹）。

因此，每次成员加入时，他们都会获得一个文件，其中会自动创建一个 .htaccess。

```
RewriteEngine on
RewriteCond %{HTTP_REFERER} !^http://(www\.)?domain.com/.*$ [NC]
RewriteRule .* - [F] 
```

**前提 2：**当用户上传文件时，该过程的最后一步是确保文件确实已上传。

```
$uploadFullPath = 'http://www.domain.com/userfiles/'.$_SESSION['uniqueKey'].'/'.$_SESSION['userNumber'].'-'.$_SESSION['latestUpload'].'.'.$_SESSION['latestExt'];
 if(fopen($uploadFullPath,"r")!==0){
  // update member usages
  $query = "UPDATE memberUsage SET usageLicenses=usageLicenses+1 WHERE memberNumber=".$_SESSION['userNumber'];
  mysql_query($query) or die(reportError('Unable to increment licenses used'));
  echo 'Your file has been successfully updated. You can view your listing within <a href="/user-area/">Your Dashboard</a>';
}
else{
 echo 'There seems to have been a problem uploading your file. Please <a href="/user-area/">go back</a> and try again from your \'incomplete listings\' page. Upload Path Provided: <a href="' . $uploadFullPath .'">' . $uploadFullPath . '</a>';
} 
```

为清楚起见，reportError() 函数只是一个预加载的函数，它在需要报告错误时随时生成 mysql_error() 和 mysql_errno()，以节省每次输入的时间。

同样在上面我使用了 fopen() 的地方，我还尝试使用 is_file() 和 file_exists() 来测试文件是否存在。

**问题** 使用上述 htaccess 限制 fopen()、is_file() 和 file_exists() 都无法找到文件，即使单击生成的 $uploadFullPath 时它也可以工作。

但是，如果我删除 htaccess 限制，上述功能可以正常工作，但同样可以直接访问文件，而无需先购买或通过网站。

请问如何让这两个条件同时运行？我不确定它是否只是 htaccess，只是我的文件检测方法或两者的组合。

我提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T14:09:51.753

如果可能，只需使用本地文件系统而不是`http://`-wrapper。

因此，例如，如果您的 PHP 文件是`/var/www/kirby/myfile.php`并且您的上传文件存储在（再次作为示例）中`/var/www/kirby/useruploads/cooluserone/test.jpg`（假设 test.jpg 作为上传文件）。

在这种情况下，您可以使用相对路径`file_exists("useruploads/cooluserone/test.jpg")`或完整路径`file_exists("/var/www/kirby/useruploads/cooluserone/test.jpg")`。

这两个都将返回 true。

您必须确保您可能已经拥有文件夹/文件的读取权限。

# ios - iPad3 - 将相机拍摄的照片保存到应用程序的文档文件夹

> ID：10564243
> 
> 赞同：1
> 
> 时间：2012-05-12T13:37:23.647
> 
> 标签：ios, xamarin.ios, camera, uiimage, jpeg

从 iPad 3 上的相机拍摄的照片中，我需要保存到应用程序的文档文件夹中，并为图像提供自己的文件名。我可以看到一些提到使用`UIImageJPEGRepresentation`来执行此操作，但在 MonoTouch 中的任何地方都看不到此功能或任何地方的示例，并且不确定这是否是唯一的方法。我可以将它很好地保存到 PhotosAlbum 但希望能够为图像命名并在本地保存到应用程序，并且在主相册中不可见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T13:57:05.500

使用 MonoTouch`UIImageJPEGRepresentation`映射到`UIImage.AsJPEG`并将返回一个`NSData`可以保存（使用`Save`）在任何你想要的地方。

查看 Craig 的[博客](http://conceptdev.blogspot.ca/2009/10/monotouch-screen-capture-in-c-code.html)并替换`AsPNG`为`AsJPEG`，您应该可以立即使用它。

# umbraco - 无法在 LocalMachine 上安装 Umbraco

> ID：10564249
> 
> 赞同：0
> 
> 时间：2012-05-12T13:38:03.577
> 
> 标签：umbraco, webmatrix

我想在 WebMatrix 上安装 Umbraco 5.0。但我在第三步后发回给我，有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T14:25:04.260

你的问题太笼统了

从 codeproject 站点下载版本，您只需将其解压缩到一个文件夹并转到 webmatrix，从文件夹中打开网站，它会正常工作，如果您使用 IIS 部署您的站点，那么只会发生没有应用程序池中站点文件夹的读/写权限，

# mysql - mysql连接三个表不重复值

> ID：10564255
> 
> 赞同：0
> 
> 时间：2012-05-12T13:39:01.720
> 
> 标签：mysql, join, inner-join, no-duplicates

我有以下表格

```
--subscribers--

id
name
e-mail

--categories--

id
subscriber_id
cat1
cat2
... so on

--messages--

id
title
message
cat1
another field
... 
```

我的查询需要返回标题、消息和订阅者邮件。每个订阅者都可以收到许多消息。

我的查询返回重复的电子邮件。我想得到：

```
e-mail1 - title1, message1
e-mail2 - title1, message1, title2, message2 so on
e-mail3 - title1, message1, title2, message2, title3, message3 
```

我现在有：

```
e-mail1 - title1, message1
e-mail2 - title1, message1
e-mail2 - title2, message2
e-mail3 - title1, message1
e-mail3 - title2, message2 
```

如何处理它？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T13:41:51.797

使用 GROUP BY 电子邮件获取唯一的电子邮件 ID。

使用 GROUP_CONCAT(title), GROUP_CONCAT(message) 获取所有消息

# html - IE bug：按钮图片背景

> ID：10564259
> 
> 赞同：1
> 
> 时间：2012-05-12T13:39:29.837
> 
> 标签：html, css, internet-explorer, background-image

我正在处理一个我无法修复的奇怪错误。

这是一个已知的错误，事实上我在网上找到了几个解决方案，但不幸的是它们在我的情况下不起作用！

这是一个屏幕截图，显示了按钮在其他浏览器上的显示方式，而不是在 IE 上显示为完全白色。

![](../Images/0a0627678b311e5d31e25c71f1c2aa24.png)

我使用的 CSS 规则如下：

```
background:url('http://www.legrandclub.net/wp-content/uploads/2011/07/Send-Message.jpg');
width:113px;
height:25px;
border:0px; 
```

我应该使用哪个附加规则？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T14:16:03.373

问题来自`bp.css`~660 行：

```
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#ededed',GradientType=0 ); /* IE6-9 */ 
```

该渐变绘制在其他所有内容之上。按钮的其余部分隐藏在其下方。

既然你知道问题是什么，你应该能够解决它。您需要`filter: none`on `#send_reply_button`，或者您需要以其他方式覆盖/删除`filter`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T14:08:29.063

也许只是在css中构建一个按钮......

```
 <a href="send.htm" class="abutton">Send Message</a>

 a.dbutton {
    font-family: Verdana; font-size: 13pt; font-weight: bold;
    position: relative;
    background-color: #e60000; 
    margin-top: 3px;
    margin-bottom: 3px;
    margin-left: 21%;
    margin-right: 21%;
    text-decoration:none;
    display:block;
    padding:8px;
    border:1px solid #000;
    text-align:center;
    -moz-border-radius:5px;
    -webkit-border-radius:5px;
    -o-border-radius:5px;
    border-radius:5px;
} 
```

# objective-c - iOS 上的 libclang

> ID：10564266
> 
> 赞同：1
> 
> 时间：2012-05-12T13:40:21.903
> 
> 标签：objective-c, static-libraries

我似乎找不到任何关于在 iOS 项目中包含 libclang 以用于语法突出显示的内容。我在网上看到的只是如何将其编译为 dylib，而 iOS 不允许自定义 dylib，所以我需要一个可以包含的静态二进制文件。是否有不同的参数可以通过 make 来制作针对 ARM 和模拟器的静态库？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T14:49:51.227

[这个 makefile](https://github.com/loarabia/Clang-tutorial/blob/master/makefile)中包含了 clang 链接器标志，因为 Clang 的库跨越了大量的类。

# python - 在 Tkinter 窗口中调用包含“time.sleep()”的外部函数

> ID：10564267
> 
> 赞同：1
> 
> 时间：2012-05-12T13:40:22.813
> 
> 标签：python, tkinter

我试图通过按下 Tkinter GUI 中的按钮来调用外部函数；函数“插入”到文本元素中。这完美地工作；只要 time.sleep() 没有紧随其后。如果不遵循，则文本正确更新；如果是，则文本不会更新，尽管该函数似乎仍在循环运行，因为它会愉快地将文本打印到控制台。

这是我的示例脚本：

```
from Tkinter import *
from time import sleep

def test_function(gui_self):
    while True:
        print "Debug message"
        gui_self.main_.insert(END, "Test")

class GUI:
    def __init__(self, master):
        frame = Frame(master, width=300, height=500)
        frame.pack()
        self.main_ = Entry(frame, width=80, justify=CENTER)
        self.main_.pack()

        test_function(self)

root = Tk()
application = GUI(root)
root.mainloop() 
```

这很好用。但是，将 test_function 更改为以下内容似乎会使事情变得混乱：

```
def test_function(gui_self):
    while True:
        print "Debug message"
        gui_self.main_.insert(END, "Test")
        sleep(5) 
```

有什么建议可以解决我在这里做错的任何事情吗？我确信这只是一个问题，我作为一个相当基本的用户，没有使用正确的语法。

作为旁注，“睡眠”命令似乎也完全冻结了程序，我觉得这很烦人而且没有吸引力。除了“管道”线程之外​​，是否有一种方法可以将循环暂停可变设置（例如，var = 1（秒））的时间量，这将是有效的并且更......干净？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T13:56:58.553

一般来说，不要调用`time.sleep`单线程 GUI，否则你会发现它会阻塞。

处理睡眠的正确方法是使用 GUI 事件。

[请参阅另一个 Stack Overflow](https://stackoverflow.com/questions/2400262/code-a-timer-in-a-python-gui-in-tkinter)问题中的此示例，该问题显示如何使用`after`所有 TK 根窗口都有的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T14:37:37.963

我完全同意尼克克雷格伍德的回答——不要让你的 gui 的主线程进入睡眠状态。通常，您希望调用`after`which 注册要在（大约）X 毫秒后调用的函数。`test_function`这是一个每 5 秒调用一次的示例。每次调用 test_function 时，它都会重新注册自己以在 5 秒后调用。

```
def test_function(gui_self):
    print "Debug message"
    gui_self.main_.insert(END, "Test")
    gui_self.after(5000,test_function,gui_self)
    #the line below also should work.  As long as the item is a Tkinter widget
    #gui_self.main_.after(5000,test_function,gui_self) 
```

另外，完全不相关，（但就风格而言）-您使用`main_`in`GUI`而不是 just有什么原因`main`吗？通常，尾随下划线会附加到带有 python 关键字的 aviod 名称冲突中。据我所知，`main`不是关键字。

# php - 废话生成器php

> ID：10564271
> 
> 赞同：1
> 
> 时间：2012-05-12T13:41:05.403
> 
> 标签：php, random, generator

有没有人知道函数或类。这将在 php 中生成无意义的单词我不需要从包含单词列表的文件中获取随机行！

* * *

例子

[http://www.mygengen.com/gengens/view/nonsense-words](http://www.mygengen.com/gengens/view/nonsense-words)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T13:52:00.183

您可以使用以下代码来生成随机字符串：

```
<?php

function getRandomString($length = 6) {
            $validCharacters = "abcdefghijklmnopqrstuxyvwzABCDEFGHIJKLMNOPQRSTUXYVWZ+-*#&@!?";
            $validCharNumber = strlen($validCharacters);

            $result = "";

            for ($i = 0; $i < $length; $i++) {
                $index = mt_rand(0, $validCharNumber - 1);
                $result .= $validCharacters[$index];
            }

            return $result;
        }

        $randomString = getRandomString();

        echo $randomString;

?> 
```

记得调整 $length 和 $validCharacters 变量。

# c++ - 指向 glutDisplayFunc 函数的指针

> ID：10564272
> 
> 赞同：0
> 
> 时间：2012-05-12T13:41:08.720
> 
> 标签：c++, opengl, glut

我想制作 3 个窗口来表示围绕给定轴的旋转。为此，我制作了一个`XYZAxis`包含 function的类`render`。接下来，我从主函数调用`creatWindow`创建 GLUT 窗口的函数。但是我不知道如何正确地将函数渲染传递给`glutDisplayFunc`:( main 的片段

```
void (XYZAxis::* pmf)(void);
pmf = &XYZAxis::render;

XYZAxis *xaxis=&XYZAxis(origin,5,10);

glutDisplayFunc( void(xaxis->*pmf)() ) ;
glutIdleFunc(void(xaxis->*pmf)()); 
```

和 XYZAxis 类中的一个函数

```
void render(void) 
{

glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
glLoadIdentity();

this->orientation=this->orientation*(this->angle);
this->draw();

glutSwapBuffers();
} 
```

然而，当程序到达`glutMainLoop()`; 它抛出一个错误并关闭窗口

> GLUT：警告（未命名）：以下是 GLUT 3.0 的新检查；更新您的代码。GLUT：致命错误（未命名）：窗口 1 需要重新显示，但没有显示回调。

如何正确地做到这一点？有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T13:50:26.853

我认为您不能将指向 C++ 实例方法的指针传递给像 GLUT 这样的 C API。您需要使用指向您感兴趣的实例的全局指针将方法调用包装在 C 函数中。请参阅[http://www.parashift.com/c++-faq-lite/pointers-to-members.html](http://www.parashift.com/c++-faq-lite/pointers-to-members.html)

# linux - ffmpeg 编码播放速度非常快。Audio.mp4 和 Video.mp4 工作，但两者一起不

> ID：10564274
> 
> 赞同：1
> 
> 时间：2012-05-12T13:41:36.013
> 
> 标签：linux, ffmpeg

在下面的第 3 步和第 4 步中，`.mp4`播放正常。但是，尽管我在最后一步（音频+视频）中使用了似乎相同的设置，但该步骤不起作用。视频播放速度超过了 10 倍……而且音频也无法播放。

第 5 步的 ffmpeg 消息显示它包含音频。

```
Output #0, mp3, to '/tmp/test.mp4':
    Stream #0.0: Video: libx264, yuv420p, 720x480, q=2-31, 90k tbn, 23.98 tbc
    Stream #0.1: Audio: libmp3lame, 48000 Hz, stereo, s16, 128 kb/s 
```

随后的运行`ffmpeg -i`显示没有音频的痕迹，但它确实报告了视频......我错过了什么，让它正确混合？......

```
#!/bin/bash

# 1\. create Audio 
wine avs2pipe.exe audio "$src_avs" >"$temp_pcm"

# 2\. create Video 
wine avs2yuv.exe "$src_avs" - |
  x264 --stdin y4m --output "$temp_h264" - 2>/dev/null

# 3\. This works.  (audio only)
# encode `audio.mp4 
ffmpeg -acodec pcm_s16le -f u16le -ac 2 -ar 48000 -i "$temp_pcm" \
       -acodec libmp3lame -f mp3 -ar 48000 -ab 128k  -y "$audio_mp4"

# 4\. This works.  (video only)
# encode `video.mp4 
ffmpeg -i "$temp_h264" \
       -vcodec copy -y "$video_mp4"

# 5\. This DOES NOT work!  It plays very fast.
# encode `final.mp4' 
ffmpeg -acodec pcm_s16le  -f u16le  -ac 2 -ar 48000  -i "$temp_pcm" \
       -i "$temp_h264" \
       -acodec libmp3lame -f mp3 -ar 48000 -ab 128k \
       -vcodec copy \
       -y "$final_mp4" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T16:18:50.760

当我`-f mp3`从第 5 步中删除时它可以工作......
我不知道为什么，但它在没有其他更改的情况下工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:33:05.003

'-f fmt（输入/输出）'</p>

强制输入或输出文件格式。通常会自动检测输入文件的格式，并根据输出文件的文件扩展名猜测格式，因此在大多数情况下不需要此选项。

*   [FFMPEG 文档](http://ffmpeg.org/ffmpeg.html#Main-options)

# java - 3D 阵列还是动态 2D 阵列？

> ID：10564275
> 
> 赞同：0
> 
> 时间：2012-05-12T13:41:48.123
> 
> 标签：java, android, arrays, multidimensional-array

我正在开发一个将棋（将棋是国际象棋的日本变体）应用程序。拍摄一块后，我希望它移动到屏幕的单独部分，而不是板上。

我想知道是否最好使用 3D 数组（一个元素将存储类型，另一个元素将是片段的位置，第三个元素将存储该片段类型的数量）；

另一种选择是动态二维数组，用于存储片段类型和位置，然后将相同类型的片段保持在一起。

哪个最适合 Android 应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T14:03:51.250

这不是一个真正与android相关的问题，而更像是一个游戏设计问题。

无论如何，如果它类似于国际象棋，那么有一个二维数组如何，每个都有自己的属性：棋子类型和拥有棋子的玩家？

# sql-server - SQL Server - 具有hierarchyid的分区表

> ID：10564278
> 
> 赞同：1
> 
> 时间：2012-05-12T13:41:56.227
> 
> 标签：sql-server, sql-server-2008, hierarchical-data, hierarchyid

包含 hierarchyid 列的表是否有任何限制？它是否限制任何功能，如分区等？我似乎找不到任何说有的东西，但想与一些更有经验的用户核实一下，看看我是否正在查看某些东西。

谢谢，

小号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-23T19:26:09.890

没有内置的方法来对 hierarchyid 列值进行分区。如果您尝试执行类似下面的查询，那么您将收到错误“'hierarchyid' 类型对此操作无效”

```
CREATE PARTITION FUNCTION MyPartitionRange (hierarchyid) AS RANGE 
    LEFT FOR VALUES ('/20140101/','/20150101/','/20160101/')  
GO 
```

# ruby - 为什么压缩二进制文件时会损坏？

> ID：10564283
> 
> 赞同：3
> 
> 时间：2012-05-12T13:43:39.970
> 
> 标签：ruby, windows, heroku, zip, binary-data

我有一项通过网络提供压缩文件的服务。zip 包含适用于 Windows 平台的可执行文件。

我正在使用 RubyZip 库来压缩文件，但该过程会破坏二进制文件。在我的本地服务器上，我们通过系统调用使用 zip 命令，它工作正常。

Heroku 没有 zip 命令，我根本没有选择。

我正在使用这个类：

```
require 'zip/zip'

# This is a simple example which uses rubyzip to
# recursively generate a zip file from the contents of
# a specified directory. The directory itself is not
# included in the archive, rather just its contents.
#
# Usage:
#   directoryToZip = "/tmp/input"
#   outputFile = "/tmp/out.zip"   
#   zf = ZipFileGenerator.new(directoryToZip, outputFile)
#   zf.write()
class ZipFileGenerator

  # Initialize with the directory to zip and the location of the output archive.
  def initialize(inputDir, outputFile)
    @inputDir = inputDir
    @outputFile = outputFile
  end

  # Zip the input directory.
  def write()
    entries = Dir.entries(@inputDir); entries.delete("."); entries.delete("..") 
    io = Zip::ZipFile.open(@outputFile, Zip::ZipFile::CREATE); 

    writeEntries(entries, "", io)
    io.close();
  end

  # A helper method to make the recursion work.
  private
  def writeEntries(entries, path, io)

    entries.each { |e|
      zipFilePath = path == "" ? e : File.join(path, e)
      diskFilePath = File.join(@inputDir, zipFilePath)
      puts "Deflating " + diskFilePath
      if  File.directory?(diskFilePath)
        io.mkdir(zipFilePath)
        subdir =Dir.entries(diskFilePath); subdir.delete("."); subdir.delete("..") 
        writeEntries(subdir, zipFilePath, io)
      else
        io.get_output_stream(zipFilePath) { |f| f.puts(File.open(diskFilePath, "rb").read())}
      end
    }
  end

end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T15:05:06.923

[`theglauber`的答案](https://stackoverflow.com/a/10564302/512904)是正确的。如[class](http://www.ruby-doc.org/core-1.9.3/IO.html)[的文档中所述`IO`](http://www.ruby-doc.org/core-1.9.3/IO.html)，它是`File`的超类：

> 二进制文件模式。**在 Windows 上抑制 EOL <-> CRLF 转换**。除非明确指定，否则将外部编码设置为 ASCII-8BIT。

强调我的。在 Windows 上，当以文本模式打开文件时，本机换行符 ( `\r\n`) 会隐式转换为换行符 ( `\n`)，这可能是导致损坏的原因。

还有一个事实是[`IO#puts`](http://www.ruby-doc.org/core-1.9.3/IO.html#method-i-puts)确保输出以行分隔符结尾（`\r\n`在 Windows 上），这对于二进制文件格式来说是不可取的。

您也没有关闭由`File.open`. 这是一个优雅的解决方案，可以解决所有这些问题：

```
io.get_output_stream(zip_file_path) do |out|
  out.write File.binread(disk_file_path)
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T13:47:15.523

如果这是 Windows，您可能必须以二进制模式打开输出文件。

例如：`io = File.open('foo.zip','wb')`

# iphone - iPhone - gcdasyncsocket 委托 Didreceive 在其他视图中不起作用

> ID：10564286
> 
> 赞同：0
> 
> 时间：2012-05-12T13:44:26.150
> 
> 标签：iphone, ios, c, udp

我正忙于通过 UDP 发送和接收数据的应用程序。

当我在视图 A 中启动我的应用程序时，我初始化了一个新套接字并将委托设置为 self 和 bindtoport：12345。

我可以在这个视图中发送和接收。

现在，当我转到第二个视图时，我将视图 B 子类化为视图 A，我什至尝试不将 B 子类化为视图 A。当我在第一个视图中开始初始化时，我仍然无法在视图 B 中接收数据。所以当我读到这篇文章时，我认为问题在于我没有关闭套接字，并且还有一些事情仍在发生，这就是为什么我无法在第二个视图中收到任何东西的原因。

我试图把 [udpSocket close]; 在 viewDidUnload 中，但没有成功。

意见请...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:04:37.107

问题是在我需要添加的子类的 viewDidLoad 中：[udpsocket beginreceiving];

我认为通过调用 [super viewDidLoad];，这已经发生了，因为在我的父类中我已经声明这个方法确实被调用了。

# jquery - 上传文件并将其内容添加到网页上的表格中

> ID：10564290
> 
> 赞同：1
> 
> 时间：2012-05-12T13:45:20.117
> 
> 标签：jquery, ajax, asp.net-mvc, file-upload

我需要在网页上创建一个组件来导入一个 excel 文件，以便它包含的数据可以插入到一个表中。这需要我将文件发送到服务器，提取数据并将数据发送回以插入表中。我在服务器端使用 ASP.NET MVC3。

我在不使用 Ajax 的情况下完成了文件上传，并使用 OleDB 连接执行了数据提取以访问文件。问题围绕着将数据发送回以插入表中。我以为我可以使用 Ajax.BeginForm() 辅助方法来上传文件，但这显然不适用于文件上传（谁能告诉我为什么？）。所以我需要找到一种使用 Ajax 将数据发送回客户端的方法。谷歌搜索我发现了许多支持 ajax 的文件上传器的工具。我看过使用的是：

[http://valums.com/ajax-upload/](http://valums.com/ajax-upload/)

这通过在上传文件时返回 json 成功消息来工作。这不符合我正在尝试做的事情，因为我不想将文件存储在服务器上，而是想将数据传回。我只学习 JavaScript 和 JQuery，所以我想知道我是否可以只返回 json 格式的数据并在客户端创建一个处理程序以将其添加到表中？我将不胜感激任何代码片段或有关如何实现这一目标的指导。

或者，如果有更好的方法来做到这一点，我很乐意改变我的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T17:25:17.527

尝试这个：

1.  将文件上传到服务器中的某个自定义临时文件夹中，为其指定一个随机文件名

2.  上传完成后，使用 ASP 创建一个表（在指定页面本身。我的意思是使用从文件收集的数据修改您的主页）

3.  创建表后，删除文件并完成其余工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T14:00:05.707

我不熟悉你提到的ajax上传工具包。但是你的问题并没有真正解释你在哪里卡住了，而是你想要完成什么。您可以上传到服务器，但您能否返回正确的 JSON？

一旦你让那部分工作，看起来该工具包允许你设置一个`OnComplete`功能：

```
onComplete: function(id, fileName, responseJSON){}, 
```

这将允许您`responseJSON`按照您认为合适的方式使用并填充您的表格。例如（虽然不是最大的）：

```
onComplete: function(id, fileName, responseJson){
    $(responseJson).each(function(){    
        $('#yourTable').append('<tr><td>' + this + </td></tr>')
    });
} 
```

这是关于这个主题的另一个很好的链接：http: [//aspzone.com/tech/jquery-file-upload-in-asp-net-mvc-without-using-flash/](http://aspzone.com/tech/jquery-file-upload-in-asp-net-mvc-without-using-flash/)

这是一个 hanselman 链接，其中可能包含您正在寻找的更多详细信息：[http ://www.hanselman.com/blog/ABackToBasicsCaseStudyImplementingHTTPFileUploadWithASPNETMVCIncludingTestsAndMocks.aspx](http://www.hanselman.com/blog/ABackToBasicsCaseStudyImplementingHTTPFileUploadWithASPNETMVCIncludingTestsAndMocks.aspx)

# c - Linux 中的可执行堆栈示例（i386 架构）

> ID：10564298
> 
> 赞同：7
> 
> 时间：2012-05-12T13:46:50.180
> 
> 标签：c, linux, gcc, x86, elf

我发现当我们使用[嵌套函数](http://en.wikipedia.org/wiki/Nested_function)时，GCC 需要一个用于[蹦床代码](http://gcc.gnu.org/onlinedocs/gccint/Trampolines.html)的可执行堆栈。但是，以下代码在使用 gcc 编译时不显示可执行堆栈。（我使用[execstack](http://linux.die.net/man/8/execstack)来验证堆栈是否可执行）

```
#include <stdio.h>
#include <unistd.h>

int main()
{
        int add( int a, int b)
        {
                return a + b;
        }
        return add(2, 3);
} 
```

为什么这不会导致可执行堆栈？如果不应该这样做，那么有人可以举一个给出可执行堆栈的代码结构的例子*吗*？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T14:15:07.770

如果嵌套函数根本不依赖于其“父”的堆栈，那么它只是一个普通函数 - 嵌套是语法（和范围）糖。

如果不取嵌套函数的地址，也不需要蹦床代码。所以你需要更多的东西来触发这一切。

这是一个虚拟示例：

```
// file t.c
int doit(int (*fun)(int), int x)
{
    return fun(x);
}

int foo(int a)
{
        int add(int b)
        {
                return a + b;
        }
        return doit(&add, 2);
}

int main(void)
{
    return foo(1);
} 
```

```
$ gcc -Wtrampolines t.c
t.c: In function 'foo':
t.c:8:13: warning: trampoline generated for nested function 'add'
$ ./a.out 
$ echo $?
3
$ execstack a.out 
X a.out 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T14:13:59.300

如您的链接中所述[http://gcc.gnu.org/onlinedocs/gccint/Trampolines.html](http://gcc.gnu.org/onlinedocs/gccint/Trampolines.html)

> 蹦床是一小段代码，它在运行*时获取嵌套函数的地址时*创建。它通常驻留在堆栈上，在包含函数的堆栈框架中。

在您的示例地址中，未采用嵌套地址，并且 gcc 不需要使用 execstack。

这是一个带有蹦床的代码示例：http: [//www.win.tue.nl/~aeb/linux/hh/protection.html](http://www.win.tue.nl/~aeb/linux/hh/protection.html)

```
% cat trampoline.c
#include <stdio.h>
int main(int ac, char **av) {
        int localfn(int a) {
                return a+ac;
        }
        int (*fptr)(int) = localfn;

        printf("%d\n", fptr(-1));
        return 0;
} 
```

# asp.net-mvc-3 - 如何将会话设置为 MVC 3 应用程序

> ID：10564300
> 
> 赞同：0
> 
> 时间：2012-05-12T13:47:15.087
> 
> 标签：asp.net-mvc-3

我使用用户登录创建了 Empty 类型的 MVC 3 应用程序（不是 Internet 或 Intranet）

和

用户注册过程..

它工作正常，但现在让我们假设一个名为 Ravi 的用户登录应用程序并浏览页面一段时间，然后他没有做任何操作，甚至在应用程序中单击鼠标 3 分钟

然后，

拉维再次尝试浏览一些页面，应用程序必须再次将他带到登录页面......这是我的想法......我希望你明白我的意思......现在我们可以用什么方式......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T08:36:56.810

这就是[Forms Authentication](http://msdn.microsoft.com/en-us/library/ff647070.aspx)开箱即用的方式。您在问题中提到您创建了一个 Empty 应用程序，然后讨论了一些登录和注册过程，而没有解释您是如何实现它或显示一些代码的。所以想法是，您可以在 web.config 中将表单身份验证的超时属性设置为 3 分钟，然后您可以使用该`[Authorize]`属性来装饰您需要保护的控制器/操作，并只允许经过身份验证的用户访问。

[在ASP.NET/MVC 网站](http://www.asp.net/mvc)上有一些来自 PluralSight 的精彩视频，我邀请您观看。视频 7\. 介绍了 ASP.NET MVC 中的身份验证和授权。

# css - 悬停时的 CSS 子菜单在子菜单元素上更改颜色

> ID：10564301
> 
> 赞同：0
> 
> 时间：2012-05-12T13:47:15.130
> 
> 标签：css

我尝试使用来自 lwis.net 的一些代码为我的网站创建一个**基于 CSS 的菜单（我只使用一个小片段）**

菜单代码在这里：http: [//jsfiddle.net/hCwZ2/](http://jsfiddle.net/hCwZ2/)

我喜欢做的是将鼠标悬停在子级菜单项上以将颜色更改为黑色。但是我所做的是，当我将子元素悬停以使子元素的元素也变黑时。

我怎样才能只让鼠标悬停在巫婆上的项目变黑？

IE：

在“服务”>“网页设计”上：悬停一切都很好。在“服务”>“印刷设计”上：悬停出现错误，因为“服务”>“印刷设计”>“名片和服务”>“印刷设计”>“传单”也是黑色的。

我需要它们是黑色的，只需要单独悬停每个。

**注意**：我只需要子菜单的项目在悬停时改变颜色。顶级项目在悬停时必须为白色。

亲切的问候梅里亚诺斯尼科斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T14:00:07.937

您应该在“li a”元素上设置悬停或为子菜单 li 元素定义一个类：

替换这个：

```
#main_nav li:hover > ul li:hover a
 {
   color:#000;
 } 
```

有了这个

```
#main_nav li > ul li a:hover
 {
   color:#000;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T14:11:43.667

添加CSS：

```
#main_nav li ul li:hover
{
    background-color: Red;
} 
```

# javascript - 专门用于文本的幻灯片放映/不断播放/但带有“后退”、“停止”和“前进”按钮的图像文件

> ID：10564304
> 
> 赞同：0
> 
> 时间：2012-05-12T13:47:33.840
> 
> 标签：javascript, jquery, css, text, slideshow

我正在寻找专门用于附加到 css 的文本的幻灯片放映/不断播放/但带有“后退”、“停止”和“前进”按钮的图像文件。

我已经搜索了 3 天来寻找一些实用的幻灯片放映内容，这些内容可能只适用于文本场景。我发现主要是 javascript 幻灯片放映，主要用于图像，我没有足够的经验来修改它们以附加到 css 的文本。

我目前坚持的场景是 div css 溢出中的 4 段......不会像苦行僧一样飞行，也不会对我的目标受众有吸引力。

* ***我希望拥有的场景是 * 4 个段落（ss 中有 4 层，最好是 DIV 标签，这样我可以在外部样式表上添加 css） * 让幻灯片永久播放 * 左侧的图像文件右侧用于“后退”和“前进”按钮。* 底部的图像文件用于“停止”按钮** ***

如果有人可以给我一个功能代码并教育我在 HTML 中的何处插入代码的每个部分，我将不胜感激，我从星期四开始就一直在搜索，而星期六早上我仍在寻找！

哦，是的，我想我可以在烟花中做到这一点，但我看到的唯一选择是 FLASH，我不想走那条路。我刚刚下载了 adobe EDGE，也许我对此进行了实验……我希望有类似的 JavaScript，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T18:12:12.970

请检查此链接，[http://bxslider.com/](http://bxslider.com/)。然后这个[http://bxslider.com/examples/auto-show-start-stop-controls](http://bxslider.com/examples/auto-show-start-stop-controls)。我想这就是你需要的吗？创建以下html：

```
<div id="slider1">
  <div>Slide one content</div>
  <div>Slide two content</div>
  <div>Slide three content</div>
  <div>And so on...</div>
</div> 
```

然后在你的html头旁边添加：

```
<script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"></script>
<script src="jquery.bxSlider.min.js" type="text/javascript"></script>
<script type="text/javascript">
  $(document).ready(function(){
    $('#slider1').bxSlider({
      auto: true,
      autoControls: true
    });
  });
</script> 
```

# google-maps - 当位置返回多个结果时，在谷歌地图中选择第一个匹配静态

> ID：10564307
> 
> 赞同：1
> 
> 时间：2012-05-12T13:48:04.463
> 
> 标签：google-maps, google-maps-markers

我正在使用 Google Maps 静态界面在我的 Web 应用程序中显示地图。我正在使用地址来确定地点（例如：街道名称、邮政编码城市、国家/地区），使用 PHP 生成地图嵌入 URL。这很好用，但有时某些地址会返回多个结果，并且地图会在同一个地址放置多个 PIN（位置 A、B、C 等）！

示例 1：地址是一个地方 -> 一切正常，标记显示地点地址 [http://maps.google.com/maps?q=Skrita+ulica+5,+2000+Maribor,+Slovenija+(OAZA MIRU) &f=q&source=s_q&hl=sl&ie=UTF8&z=15&t=m&iwloc=addr&output=embed](http://maps.google.com/maps?q=Skrita%20ulica%205,%202000%20Maribor,%20Slovenija%20%28OAZA%20MIRU%29&f=q&source=s_q&hl=sl&ie=UTF8&z=15&t=m&iwloc=addr&output=embed)

示例 2：地址返回多个地点并且带有地点名称的标记不显示 [http://maps.google.com/maps?q=Ulica+Eve+Lovše+1,+2000+Maribor,+Slovenija+(Restavracija+in+Pizzeria+ %22MISTERIUM%22+墨卡托+中心+)&f=q&source=s_q&hl=sl&ie=UTF8&z=15&t=m&iwloc=addr&output=embed](http://maps.google.com/maps?q=Ulica%20Eve%20Lov%C5%A1e%201,%202000%20Maribor,%20Slovenija%20%28Restavracija%20in%20Pizzeria%20%22MISTERIUM%22%20Mercator%20Center%20%29&f=q&source=s_q&hl=sl&ie=UTF8&z=15&t=m&iwloc=addr&output=embed)

是否有可能自动选择匹配地址上的第一个位置并显示示例 1 中的标记？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T16:24:08.820

该`num`参数确定要显示多少个结果。添加`num=1`到 URL 以将结果限制为一个。[参考](http://mapki.com/wiki/Google_Map_Parameters#Search_Mode)。（你甚至可以指定`num=0`，但这似乎有点毫无意义）

注意：如果 URL 返回多个结果，这是因为搜索算法无法根据您的`q=`字符串确定正确的结果。将输出限制为仅第一个可能不会产生您想要的结果。

# c++ - 使用 SSE 进行比较和提取

> ID：10564309
> 
> 赞同：3
> 
> 时间：2012-05-12T13:48:29.420
> 
> 标签：c++, c, sse, simd

使用 SSE 指令对两个整数寄存器进行成对比较和提取相等元素的最佳方法是什么？例如，如果`a = [6 4 7 2]`and `b = [2 4 9 2]`（每个寄存器包含四个 32 位整数），结果应该是`[4 2 x x]`. 这个问题的另一种形式是如何获得相等元素的二进制掩码`..0101b`(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T14:16:29.390

不可能用一条指令提取和移动相等的元素。但是可以通过以下方式轻松实现相等元素的掩码`pcmpeqd`：

```
__m128i zero = _mm_set1_epi32(0);
__m128i a = _mm_set_epi32(6, 4, 7, 2);
__m128i b = _mm_set_epi32(2, 4, 9, 2);

__m128i mask = _mm_cmp_epi32(a, b);     // mask is now 0, -1, 0, -1
mask = _mm_sub_epi32(zero, mask);       // mask is now 0,  1, 0,  1 
```

编辑：如果你想要一个带有随机常量的查找表的索引，你需要额外的操作。像

```
static const __m128i zero = _mm_set1_epi32(0);
static const __m128i bits = _mm_set_epi32(1,2,4,8);

__m128i a = _mm_set_epi32(6, 4, 7, 2);
__m128i b = _mm_set_epi32(2, 4, 9, 2);

__m128i bitvector = _mm_and_si128(bits, _mm_cmp_epi32(a, b));
bitvector = _mm_hadd_epi32(bitvector, bitvector);
bitvector = _mm_hadd_epi32(bitvector, bitvector);
// now a index from 0...15 is the the low 32 bit of bitvector 
```

可能有比使用查找表计算 shuffle 更好的算法，可能直接使用 De Bruijn 乘法计算 shuffle。OTOH，如果要比较的整数超过 4 个，则额外的 4 个整数只会以额外的 1 个整数为*代价*`phaddd`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T12:54:56.433

我可能会使用`drhirsch`提议的变体：

```
int index = _mm_movemask_ps((__m128)_mm_cmp_epi32(a, b)); 
```

这为您提供了相同的索引，可用于仅使用两个操作查找 shuffle 掩码。

# java - Java 扫描程序问题 (JFrame)

> ID：10564311
> 
> 赞同：0
> 
> 时间：2012-05-12T13:48:58.283
> 
> 标签：java, image, file, jframe, java.util.scanner

我正在尝试使用扫描仪来编辑我的塔防游戏的级别。但是，它不会将级别（平铺图像）更新为自定义文件的级别（0 是草 1 是石头 -1 什么都不是，等等）。我发现了错误，但我该如何解决它，我需要添加/更改什么来摆脱它？

```
java.lang.NullPointerException
    at Levels.loadLevels(Levels.java:11)
    at Window.define(Window.java:28)
    at Window.paintComponent(Window.java:44) 
```

第 11`for(int y=0;y<Window.room.block.length;y++) {` 行： 第 28`levels.loadLevels(new File("levels/level1.level"));` 行： 第 44 行：`define();`

这是扫描仪文件：

```
import java.io.*;
import java.util.*;

public class Levels {
    public void loadLevels(File loadPath) {
        try {
            Scanner loadLevelsScanner = new Scanner(loadPath);

            while(loadLevelsScanner.hasNext()) {

                for(int y=0;y<Window.room.block.length;y++) {
                    for(int x=0;x<Window.room.block[0].length;x++) {
                        Window.room.block[y][x].groundID = loadLevelsScanner.nextInt();
                    }
                }

                for(int y=0;y<Window.room.block.length;y++) {
                    for(int x=0;x<Window.room.block[0].length;x++) {
                        Window.room.block[y][x].airID = loadLevelsScanner.nextInt();
                    }
                }    
            }               
            loadLevelsScanner.close();

        } catch(Exception e) {              
        }
    }
} 
```

这是窗口文件：

```
import javax.swing.*;
import java.awt.*;
import java.awt.image.*;
import java.io.*;

public class Window extends JPanel implements Runnable {

    public Thread thread = new Thread(this);        
    public static Image[] tileset_ground = new Image[100];
    public static Image[] tileset_air = new Image[100];     
    public static int myWidth, myHeight;        
    public static boolean isFirst = true;       
    public static Room room;
    public static Levels levels;

    public Window() {
        thread.start();
    }

    public void define() {
        room = new Room();
        levels = new Levels();          
        levels.loadLevels(new File("levels/level1.level"));

        for(int i=0;i<tileset_ground.length; i++) {
            tileset_ground[i] = new ImageIcon("resources/tileset_ground.png").getImage();
            tileset_ground[i] = createImage(new FilteredImageSource(tileset_ground[i].getSource(), new CropImageFilter(0, 32 * i, 32, 32)));
        }

        for(int i=0;i<tileset_air.length; i++) {
            tileset_air[i] = new ImageIcon("resources/tileset_air.png").getImage();
            tileset_air[i] = createImage(new FilteredImageSource(tileset_air[i].getSource(), new CropImageFilter(0, 32 * i, 32, 32)));
        }    
    }

    public void paintComponent(Graphics g) {
        if(isFirst) {
            define();               
            isFirst = false;
        }           
        g.clearRect(0, 0, getWidth(), getHeight());         
        room.draw(g);
    }

    public void run() { 
        while(true) {               
            if(!isFirst) {
                room.physic();
            }               
            repaint();              
            try {
                Thread.sleep(1);
            } catch(Exception e) {
            }               
        }           
    }       
} 
```

这是房间文件：

```
import java.awt.*;

public class Room {
    public int worldWidth = 40;
    public int worldHeight = 20;
    public int blockSize = 32;

    public Block[][] block;

    public Room () { }
    public void define () { }    
    public void physic () { }   

    public void draw(Graphics g) {

        block = new Block[worldHeight][worldWidth];         

        for(int y=0;y<block.length;y++) {
            for(int x=0;x<block[0].length;x++) {
                block[y][x] = new Block(x * blockSize, y * blockSize, blockSize, blockSize, Value.groundGrass, Value.airAir);
                block[y][x].draw(g);
            }
        }
    }    
} 
```

这是块文件：

```
import java.awt.*;

public class Block extends Rectangle {
    public int groundID;
    public int airID;

    public Block(int x, int y, int width, int height, int groundID, int airID) {
        setBounds(x, y, width, height);

        this.groundID = groundID;
        this.airID = airID;
    }

    public void draw(Graphics g) {
        g.drawImage(Window.tileset_ground[groundID], x, y, width, height, null);

        if(airID != Value.airAir) {
            g.drawImage(Window.tileset_air[airID], x, y, width, height, null);
        }           
    }       
} 
```

最后这是扫描仪应该读取的自定义文件：

```
1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0

-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 
```

对不起这个愚蠢的问题，我是初学者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T15:09:27.307

一个快速而肮脏的解决方案是，测试 Window.room 不为空，以及 .block：

```
 Scanner loadLevelsScanner = new Scanner (loadPath);
        if ((Window.room != null) && 
            (Window.room.block != null)) {
            // ... block until catch block 
        } 
```

到目前为止，我编写的一个简单的 Testapp 工作，如果这样做的话。

但是您需要了解什么是“静态”，以及为什么以及如何使用它。一个常见的初学者错误是，插入“静态”关键字只是为了让编译器保持沉默。

调查，以何种顺序初始化您的类及其属性。

在 Block 中，要访问 Window，您必须有一个参考。引用可以传递给 Block 的 ctor：

```
class Block extends Rectangle {
    public int groundID;
    public int airID;
    Window window; 

    public Block (int x, int y, int width, int height, int groundID, int airID, Window window) {
        setBounds (x, y, width, height);
        this.groundID = groundID;
        this.airID = airID;
        this.window = window;
    }
    public void draw (Graphics g) {
        g.drawImage (window.tileset_ground [groundID], x, y, width, height, null);
        if (airID != Value.airAir) {
            g.drawImage (window.tileset_air [airID], x, y, width, height, null);
        }
    }
} 
```

谁创建块？它是 Room，所以 Room 本身需要了解 Window（只要你不从根本上改变你的设计）。

```
public Room (Window w) {
    block = new Block [worldHeight] [worldWidth];
    for (int y=0; y <block.length; y++) {
        for (int x=0; x <block [0].length; x++) {
            block [y] [x] = new Block (x * blockSize, y * blockSize, blockSize, blockSize, Value.groundGrass, Value.airAir, w);
        }
    }
} 
```

块数组被创建、初始化，并且块被传递窗口参数。

在绘图中，您不会一遍又一遍地重新创建数组，也不会重新创建块，而只是重新绘制它们：

```
public void draw (Graphics g) {
    for (int y=0; y <block.length; y++) {
        for (int x=0; x <block [0].length; x++) {
            block [y] [x].draw (g);
        }
    }
} 
```

在 Window 中，您创建 Room，并将 window-reference 传递给它：

```
public void define () {
    room = new Room (this);
    levels = new Levels (); 
```

# zsh - 计算 zsh 提示的用户可见字符串的长度

> ID：10564314
> 
> 赞同：14
> 
> 时间：2012-05-12T13:49:48.810
> 
> 标签：zsh

我想将我当前的`git`分支放入我的多行 ZSH 提示符中。然而，这弄乱了两条线——我希望它们能很好地排列。

```
 ┌─(simont@charmander:s000)─[master *]────────────────
───(~  )─┐  
└─(127:15:44)──                       ──(Sat,May12)─┘ 
```

应该：

```
 ┌─(simont@charmander:s000)─[master *]─────────(~  )─┐  
└─(127:15:44)──                       ──(Sat,May12)─┘ 
```

`git`分支是从一个`oh-my-zsh`函数中获取的`git_prompt_info()`，它为我提供了分支、脏状态和一堆提示符，可以很好地为事物着色。

如何计算将*明显*插入 ZSH 提示符的字符 - 而不是提示符转义序列？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-12T14:04:08.117

假设提示转义的字符串存储在一个变量`FOO`中，这将只计算用户可见的字符：

```
 FOO=$(git_prompt_info)                                                                                                                     
local zero='%([BSUbfksu]|([FK]|){*})'
FOOLENGTH=${#${(S%%)FOO//$~zero/}} 
```

这来自[这个`.zshrc`](http://ruderich.org/simon/config/zshrc)。

这是对其工作原理的*粗略*解释，自由引用[`man zshexpn`](http://linux.die.net/man/1/zshexpn), 部分`PARAMETER EXPANSION`。我不能 100% 确定细节，因此，如果您使用它来开发自己的等价物，请阅读相关`man zshall`部分。

从生产线`FOOLENGTH=${#${(S%%)FOO//$~zero/}}`开始，我们有很多位。由内而外：

1.  `$~zero`:`~`确保`zero`我们定义为`'%([BSUbfksu]|([FB]|){*})'`的 被视为模式而不是纯字符串。

2.  `${(S%%)FOO//$~zero/}`：这匹配`${name//pattern/repl}`：

    > 用字符串repl替换参数名扩展中模式的最长可能匹配

    请注意，我们没有`repl`; 我们将最长可能的匹配项替换为空`pattern`，从而将其删除。在设置了几个标志的情况下
    `(S%%)FOO`进行扩展。`FOO`我不太明白。

3.  `${#${(S%%)FOO//$~zero/}}`:如果是`${#spec}`替换，将替换替换结果的字符长度。在我们的例子中，是替换的结果；所以这基本上返回了正则表达式on结果中的字符长度，上面的模式在哪里。`spec``spec``spec``${(S%%)FOO//$~zero/}``s/zero//``FOO``zero`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T15:04:29.000

不知道如何使用内置 zsh 命令执行此操作，但可以使用 sed 剥离颜色信息（如此[处](http://www.commandlinefu.com/commands/view/3584/remove-color-codes-special-characters-with-sed)所述）：

```
sed -r "s/\x1B\[([0-9]{1,2}(;[0-9]{1,2})?)?[m|K]//g" 
```

例如

```
plain_str=$(git_prompt_info | sed -r "s/\x1B\[([0-9]{1,2}(;[0-9]{1,2})?)?[m|K]//g") 
```

这将从字符串中删除所有转义序列。现在的长度很简单：

```
echo $#plain_str 
```

# c++ - OpenCV，C++：Delaunay 三角剖分中缺少三角形

> ID：10564316
> 
> 赞同：0
> 
> 时间：2012-05-12T13:49:53.820
> 
> 标签：c++, opengl, opencv, triangulation, delaunay

我在 Ubuntu 11.04 上使用 NetBeans 7.1，并希望使用 OpenCV 从一组点中获取三角形。我按如下方式构建 Delaunay 三角剖分。

```
vector< Triangle > CTwoDTriangulation::delaunayDiv(const vector< Point_<T> > & vP,   cv::Rect boundRect, vector<Triangle>& triangles, int& numTriangles)
{
    CvSubdiv2D* subdiv;
    int numPts=vP.size();
    CvPoint newPoint;

    CvMemStorage *storage;
    storage = cvCreateMemStorage(0);
    subdiv =  cvCreateSubdivDelaunay2D( boundRect, storage );
    for (size_t e = 0; e<numPts; e++)
    {
        newPoint=vP.at(e);
        if (newPoint.x>=boundRect.y && newPoint.y>=boundRect.y && newPoint.x<boundRect.width &&  newPoint.y<boundRect.height)
                cvSubdivDelaunay2DInsert(subdiv, vP.at(e));
    }

    CvSeqReader  reader;
    int i, total = subdiv->edges->total;
    int elem_size = subdiv->edges->elem_size;

    triangles.resize(2*total-5);    // Maximum number of triangles for number of edges
    numTriangles=0;

    cvStartReadSeq( (CvSeq*)(subdiv->edges), &reader, 0 );

    Triangle V;

    for( i = 0; i < total; i++ )
    {
        CvQuadEdge2D* edge = (CvQuadEdge2D*)(reader.ptr);

        if( CV_IS_SET_ELEM( edge ))
        {
            CvSubdiv2DEdge e = (CvSubdiv2DEdge)edge;
            if (FindTriangleFromEdge(e, V)) 
        {
            triangles.at(numTriangles++)=V;
        }
    }
    CV_NEXT_SEQ_ELEM( elem_size, reader );
}
cvReleaseMemStorage(&storage);

return triangles;
} 
```

FindTriangleFromEdge() 具有以下形式。

```
void CTwoDTriangulation::FindTriangleFromEdge(CvSubdiv2DEdge e, Triangle& V)
{
   CvSubdiv2DEdge t = e;    // Number of type size_t
   CvPoint buf[3];          // Triangle vertices
   int iPointNum = 3;
   int  j;
   CvPoint pts[3];

   for(j = 0; j < iPointNum; j++ )
   {
        CvSubdiv2DPoint* point = cvSubdiv2DEdgeOrg( t );
        if( !point ) break;
        pts[j].x=point->pt.x;
        pts[j].y=point->pt.y;
        buf[j] = cvPoint( cvRound(point->pt.x), cvRound(point->pt.y));
        t = cvSubdiv2DGetEdge( t, CV_NEXT_AROUND_LEFT );
   }
  AddTriangle(buf, pts, V);
} 
```

这让我得到了大部分的三角形，但有些不见了。例如，我设置了一组近似矩形网格的点。我得到以下 (5,1);(103,101);(1,101)
(106,1);(103,101);(5,1)
(5,1);(106,1);(103,101)
(204,101) ;(106,1);(208,1)
(208,1);(307,101);(204,101)
(309,1);(307,101);(204,101)

所以 (106,1);(204,1);(103,101) 缺失并且至少有一个三角形被复制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T23:42:03.167

您的 if 语句似乎有错误？为什么将 newPoint.x 与 boundRect.y 进行比较？

```
if (newPoint.x>=boundRect.y && newPoint.y>=boundRect.y && newPoint.x<boundRect.width &&  newPoint.y<boundRect.height)
            cvSubdivDelaunay2DInsert(subdiv, vP.at(e)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T04:33:12.773

When you use `CV_NEXT_AROUND_LEFT` the next edge to be chosen will be the one on LEFT facet of the specified edge. Now consider, for example, a triangle formed by vertices `V1`, `V2` and `V3`, whose sides are `Edge1`, `Edge2` and `Edge3`.

Additionally, imagine that `V1` is the Org Point of `Edge1`, `V2` is the Org Point of `Edge2` and `V3` is the Org Point of `Edge3` (like vectors connected in a clockwise orientation). In this case, the left facets are always outside the given triangle so, in your code, this triangle will be missing.

I could not realize another way of preventing this except by combining `CV_NEXT_AROUND_LEFT` with `CV_NEXT_AROUND_RIGHT` and removing the duplicate triangles that will be recorded.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T21:35:35.660

我有同样的问题。我的解决方案是检查

cvSubdiv2DGetEdge(t, CV_NEXT_AROUND_RIGHT);

看！有了这个，它找到了丢失的，但错过了其他一些。所以我的解决方案是暂时结合这两个结果。

# html - 如何在段落中插入列表？

> ID：10564317
> 
> 赞同：0
> 
> 时间：2012-05-12T13:50:01.683
> 
> 标签：html, html-lists

我有一个要插入段落的列表。然而，这不是有效的 HTML。我怎样才能至少模仿在段落中有一个列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T14:25:07.657

您可以将 nl2br() 与 \n 结合使用

```
<?php

echo nl2br("First paragraph \n\n Your Second paragraph \n\n Your third paragraph.\n\n");

echo "First paragraph <br/><br/> Your Second paragraph <br/><br/> Your third paragraph.";

echo "<p>First paragraph</p> <p>Your Second paragraph</p><p>Your third paragraph</p>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T14:44:48.827

您可以在不使用列表标记的情况下将文本显示为列表。最简单的，

```
<p>Paragraph text goes here. And then the list:<br>
• list item<br>
• another list item<br>
• yet another<br>
Paragraph text continues here.</p> 
```

当然，您可以在此处使用任何项目标记来代替项目符号。

如果您需要设置项目的样式，请将它们包装在内联标记中：

```
<span class=li>• list item</span><br> 
```

例如，要缩进项目，您可以设置 eg `.li { padding-left: em; }`。

# oracle - PCT（分区更改跟踪）是否可以用于列表范围分区表？

> ID：10564322
> 
> 赞同：2
> 
> 时间：2012-05-12T13:50:28.640
> 
> 标签：oracle, oracle11g, partitioning, materialized-views

我创建了列表范围分区表：

```
CREATE TABLE WHREST_PRT(
  RCNUM     NUMBER       NOT NULL,
  WHNUM     NUMBER       NOT NULL,
  WARE      VARCHAR2(10 CHAR) NOT NULL,
  DATEM     DATE         NOT NULL,
  QUANTITY  NUMBER       NOT NULL,
  DATEOPER  DATE         NOT NULL
)
PARTITION BY LIST( RCNUM )  
SUBPARTITION BY RANGE( DATEM )( 
    PARTITION P127 VALUES (127) COMPRESS FOR OLTP ( 
        SUBPARTITION P127_PRE_2003 VALUES LESS THAN (TO_DATE('01.01.2003','DD.MM.YYYY')) COMPRESS FOR OLTP, 
        SUBPARTITION P127_Q1_2003 VALUES LESS THAN (TO_DATE('01.04.2003','DD.MM.YYYY')) COMPRESS FOR OLTP
    ),
    ...
    PARTITION P997 VALUES (997) COMPRESS FOR OLTP ( 
        SUBPARTITION P997_PRE_2003 VALUES LESS THAN (TO_DATE('01.01.2003','DD.MM.YYYY')) COMPRESS FOR OLTP, 
        SUBPARTITION P997_Q1_2003 VALUES LESS THAN (TO_DATE('01.04.2003','DD.MM.YYYY')) COMPRESS FOR OLTP 
    )
) 
```

然后我手动向 13 个部门分区中的每一个添加了更多的季度子分区（截至 2015 年 1 月 1 日）。现在子分区的总数是 602。

然后用数据填充它。

现在我正在尝试创建物化视图：

```
CREATE MATERIALIZED VIEW MV_WHREST_SUM_QNT ( 
    RCNUM, WARE, DATEM, SUM_QNT, CNT_CNT, CNT 
) PARALLEL
BUILD IMMEDIATE 
REFRESH FAST ON DEMAND
ENABLE QUERY REWRITE
AS
SELECT RCNUM, 
  WARE, 
  DATEM, 
  SUM( QUANTITY ),
  COUNT( QUANTITY ),
  COUNT( * )
FROM WHREST_PRT 
WHERE WHNUM > 1
GROUP BY RCNUM, WARE, DATEM 
```

但是 DBMS_MVIEW.EXPLAIN_MVIEW 的结果表明 PCT 无法使用以下消息：

```
2070    PCT not supported with this type of partitioning 
```

我想知道为什么 PCT 在我的情况下是不可能的。与“列表范围复合分区”一起搜索该消息没有任何帮助。

Oracle 版本为 11.2.0.3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T04:48:18.093

这可能是一个错误。My Oracle Support 上的文章 ID 1281826.1 列出了符合分区更改跟踪条件的分区类型。它没有解释为什么不允许某些分区类型。尽管它确实包含了对同样不允许的不同类型分区的错误的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T07:50:45.013

我会尝试几件事：

1.  将 DATEM 转换为 group by 子句的第二列
2.  删除 WHNUM 谓词。
3.  添加 DBMS_MVIEW.PMARKER 列

老实说不太可能工作，但我会给他们一个赌注，看看你是否遇到了无证的东西。

# jquery - 随机图像并将其显示在 div 中

> ID：10564323
> 
> 赞同：0
> 
> 时间：2012-05-12T13:50:32.427
> 
> 标签：jquery

我发现了这个很棒的插件，它可以拉取随机图像并将其显示在一个 div 中。

Se作者链接，

[http://www.robwalshonline.com/posts/jquery-plugin-random-image-on-page-load/](http://www.robwalshonline.com/posts/jquery-plugin-random-image-on-page-load/)

是否可以让随机图像淡入？

```
(function($){

    $.randomImage = {
        defaults: {

            //you can change these defaults to your own preferences.
            path: 'images/', //change this to the path of your images
            myImages: ['containerBg.png', 'containerBg2.png'] //put image names in this bracket. ex: 'harold.jpg', 'maude.jpg', 'etc'

        }           
    }

    $.fn.extend({
            randomImage:function(config) {

                var config = $.extend({}, $.randomImage.defaults, config); 

                 return this.each(function() {

                        var imageNames = config.myImages;

                        //get size of array, randomize a number from this
                        // use this number as the array index

                        var imageNamesSize = imageNames.length;

                        var lotteryNumber = Math.floor(Math.random()*imageNamesSize);

                        var winnerImage = imageNames[lotteryNumber];

                        var fullPath = config.path + winnerImage;

                        //put this image into DOM at class of randomImage
                        // alt tag will be image filename.
                        $(this).attr( {
                                        src: fullPath,
                                        alt: winnerImage
                                    });

                }); 
            }

    }); 
```

如何修改代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T13:52:40.660

尝试替换最后几行：

```
 $(this).attr( {
                                    src: fullPath,
                                    alt: winnerImage
                                }); 
```

有了这个：

```
 $(this).css('opacity',0.01).attr( {
                                    src: fullPath,
                                    alt: winnerImage
                                }).fadeIn(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T14:48:38.797

我认为您不需要插件。非常短的[FIDDLE](http://jsfiddle.net/shehovn/XtXGm/1/)给你。

# javascript - 背后使用了什么样的技术：“http://abcde.com/#!download|”？

> ID：10564325
> 
> 赞同：2
> 
> 时间：2012-05-12T13:51:07.343
> 
> 标签：javascript, ajax, url

我见过这样的网址 [https://rapidshare.com/#!download|](https://rapidshare.com/#!download|) 并 在网络上多次[访问 http://www.facebook.de/#!xyz 。](http://www.facebook.de/#!xyz)它看起来像最先进的 ajax（我不是 JavaScript 人），但要找到这方面的教程并不容易。我的问题是：这种技术是如何命名的，我在哪里可以找到更多关于它的信息？顺便说一句，即使是“ajax”的（好的）维基百科文章也绝对没有这方面的信息。谢谢，人群！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T13:55:24.767

该`#!`语法是一种告诉 google bot，在删除 hashbang 并将 url 后面的 url 附加`!`到路径（如果它是绝对的，则在删除旧路径之后）时，该资源也可用于常规 HTTP 请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T13:55:34.863

> 这种技术怎么叫

哈希棒。[我不久前问过这个问题](https://stackoverflow.com/questions/10146165/in-url-hash-design)。

当您单独使用哈希时，它只会在较新的浏览器中触发哈希更改事件。使用哈希更改事件适用于现代 JS 样式应用程序（节点样式框架），因为它完全是异步的。问题是这些页面没有被谷歌索引。

但是，发现如果您在哈希内容前加上`!`，它*确实*会被 google 索引。惊人的！

> 我在哪里可以找到更多信息？

更多信息，请阅读： http: [//mtrpcic.net/2011/02/fragment-uris-theyre-not-as-bad-as-you-think-really/](http://mtrpcic.net/2011/02/fragment-uris-theyre-not-as-bad-as-you-think-really/)

# blackberry - 如何添加位图图像作为 BlackBerry 自定义对话框的背景

> ID：10564333
> 
> 赞同：0
> 
> 时间：2012-05-12T13:52:33.040
> 
> 标签：blackberry

我知道通过覆盖 Paint 和 sublayout 方法来创建自定义对话框。我想添加一个普通的位图图像作为我正在创建的自定义对话框的背景。任何人都知道任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T13:57:58.897

希望这是您正在寻找的

```
backgroundBitmap = Bitmap.getBitmapResource("background.png");
//Override the paint method to draw the background image.
    public void paint(Graphics graphics) {
        //Draw the background image and then call paint.
        graphics.drawBitmap(0, 0, 240, 240, backgroundBitmap, 0, 0);
        super.paint(graphics);
    } 
```

# .net - .NET 程序集文件附带的 XML 文件是什么？

> ID：10564336
> 
> 赞同：26
> 
> 时间：2012-05-12T13:53:01.540
> 
> 标签：.net, xml, .net-assembly

许多 .NET 程序集都附带一个 XML 文件。例如，`System.Web.WebPages.Razor.dll`附带`System.Web.WebPages.Razor.xml`包含以下内容：

```
<?xml version="1.0" encoding="utf-8" ?> 
<doc>
   <assembly>
       <name>System.Web.WebPages.Razor</name> 
   </assembly>
   <members>
       <member name="T:System.Web.WebPages.Razor.PreApplicationStartCode" /> 
       <member name="M:System.Web.WebPages.Razor.PreApplicationStartCode.Start" /> 
       <member name="T:System.Web.WebPages.Razor.RazorBuildProvider" /> 
       <member name="M:System.Web.WebPages.Razor.RazorBuildProvider.#ctor" />
        Much more elements follow...
   </members>
</doc> 
```

这个 XML 有什么用？我在运行时需要它吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-12T13:58:52.083

它是代码注释/IntelliSense 文件，由 IDE（即 Visual Studio）使用，而不是运行时 - 它是所有扩展方法/参数/类型描述等的来源。

您不需要将它与您的二进制文件一起部署，但它也没有害处。它在 IDE 中也是完全可选的 - 只是：如果没有它，IntelliSense 对您的信息将更少（它只会显示名称和类型等 - 而不是更详细的方法描述）。

在您自己的库中，使用 /// 语法编写您自己的代码注释，并在 project-properties 中启用 XML 文件生成。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-12T14:02:53.783

这是该程序集的 XML 文档。这仅用于 VisualStudio 中的 Intellisense。有关详细信息，请参阅[此答案](https://stackoverflow.com/questions/4356557/c-sharp-xml-documentation)。

# python - 如何将 GAE blobstore 与用户表一起使用？(EntityNotFoundError)

> ID：10564337
> 
> 赞同：0
> 
> 时间：2012-05-12T13:53:37.273
> 
> 标签：python, google-app-engine

我刚刚开始使用 GAE Blobstore 将图像文件上传到 Web 应用程序。我一直在使用这些资源作为教程：

[http://blog.notdot.net/2010/03/Implementing-a-dropbox-service-with-the-Blobstore-API-Part-1](http://blog.notdot.net/2010/03/Implementing-a-dropbox-service-with-the-Blobstore-API-Part-1) http://blueimp.github.com/jQuery-File-Upload/

在我下面的代码中，blob 将上传到数据存储区，我还可以检索 blob 信息。但是，经过可变延迟（可能超过 5 分钟）后，我在尝试读取 blob 信息时开始出现 EntityNotFoundErrors。blob 和 UserFile 数据仍然出现在 _ah/admin/datastore 界面中。

由于我是使用 blobstore 开发的新手，所以我想知道是否可以使用 blobstore.BlobReferenceProperty？

提前感谢您的任何建议，

布赖恩

我使用以下数据结构将用户记录链接到 blob：

```
class UserFile(db.Model):
  user = db.StringProperty(required=True)
  blob_key = blobstore.BlobReferenceProperty(required=True) 
```

我像这样将 blob 写入数据库（通过 self.get_username 检索用户名）：

```
def write_blob(self, data, info):
        blob = files.blobstore.create(
            mime_type=info['type'],
            _blobinfo_uploaded_filename=info['name']
        )
        with files.open(blob, 'a') as f:
            f.write(data)
        files.finalize(blob)

        # Add a userfile entry for this blob
        key =  files.blobstore.get_blob_key(blob)
        userFile = UserFile(blob_key = key, user = self.get_username()) 
        userFile.put() 
```

最后，我像这样检索 blob 信息：

```
 def get_userFileTable(self):
    username = self.get_username()
    userfiles = db.GqlQuery("SELECT * "
                            "FROM UserFile "
                            "WHERE user = :1",username)

    for userfile in userfiles:
        filename = userfile.blob_key.filename 
```

最后一行是抛出 EntityNotFoundError 的地方

```
File "\scripts\filemanager\upload_handler.py", line 188, in get_userFileTable filename = userfile.blob_key.filename
File "C:\Program Files (x86)\Google\google_appengine\google\appengine\ext\blobstore\blobstore.py", line 179, in filename return self.__get_value('filename')
File "C:\Program Files (x86)\Google\google_appengine\google\appengine\ext\blobstore\blobstore.py", line 243, in __get_value
self.kind(), str(self.__key), namespace=''))
File "C:\Program Files (x86)\Google\google_appengine\google\appengine\api\datastore.py", line 628, in Get
return GetAsync(keys, **kwargs).get_result()
File "C:\Program Files (x86)\Google\google_appengine\google\appengine\api\apiproxy_stub_map.py", line 592, in get_result
return self.__get_result_hook(self)
File "C:\Program Files (x86)\Google\google_appengine\google\appengine\datastore\datastore_rpc.py", line 1467, in __get_hook
entities = rpc.user_data(entities)
File "C:\Program Files (x86)\Google\google_appengine\google\appengine\api\datastore.py", line 597, in local_extra_hook
raise datastore_errors.EntityNotFoundError()
EntityNotFoundError 
```

我在 Windows 7 机器上使用应用引擎开发服务器 1.6.5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T17:52:05.280

当您查看 SDK 管理控制台时：您看到您的实体了吗？或者您是否清除每个 SDK 上以 --clear 标志开头的实体？

# sql - Excel VBA，执行后选择语句更改

> ID：10564349
> 
> 赞同：0
> 
> 时间：2012-05-12T13:54:46.703
> 
> 标签：sql, oracle, vba, excel

所以我遇到了一个问题，我尝试设置为 SQL 查询的任何长字符串在尝试从记录集复制到 Excel 时都会返回错误

例如，如果我使用这样的查询

```
select 
cdf.DAY_STAMP Day, b.ACCOUNT_NUMBER Acct#, cdf.CM_DESC MAC, 
b.STREET_NUMBER St#, b.STREET_NAME StName, b.CITY City,
b.TRANSPORT_ELEMENT_2 census,
i.ifalias node,
cdf.SUM_BYTES_UP, cdf.SUM_BYTES_DOWN, cdf.SUM_RESET_COUNT, cdf.AVG_TXPOWER_UP,
cdf.MAX_TXPOWER_UP, cdf.MIN_TXPOWER_UP, cdf.AVG_RXPOWER_DOWN, cdf.MAX_RXPOWER_DOWN,
cdf.MIN_RXPOWER_DOWN, cdf.AVG_RXPOWER_UP, cdf.MAX_RXPOWER_UP, cdf.MIN_RXPOWER_UP,
cdf.AVG_PATH_LOSS_UP, cdf.AVG_CER_DOWN, cdf.MAX_CER_DOWN, cdf.MIN_CER_DOWN,
cdf.AVG_CCER_DOWN, cdf.MAX_CCER_DOWN, cdf.MIN_CCER_DOWN, cdf.AVG_SNR_DOWN,
cdf.MAX_SNR_DOWN, cdf.MIN_SNR_DOWN, cdf.US_CER_MAX, cdf.US_CCER_MAX, cdf.US_SNR_MIN,
cdf.STATUS_VALUE_MIN, cdf.TIMING_OFFSET_LAST, cdf.ROWCOUNT, cdf.T3_TIMEOUTS,
cdf.T4_TIMEOUTS, cdf.SYSUPTIME
from cm_day_facts cdf
inner join int_attributes i 
on i.ifalias like '72F007%' and i.topologyid = cdf.up_id
inner join billing_data b
on b.equipment_mac = cdf.cm_desc
where cdf.DAY_stamp >= '12-MAY-12 00:00' 
```

我得到一个错误：关闭对象时不允许操作

但是，如果我使用如下查询： Select * from "DWRVWR"."CSOC_M_WIPMASTER"

我得到了没有问题的有效回复。

.

完整代码：

```
Sub CableData_SQLconn()

'Connect to Oracle server begin
Set sqlCon = New ADODB.Connection
Set sqlCommand = New ADODB.Command
Set sqlRecordSet = New ADODB.Recordset
Dim Conn As String
Dim sqlQuery As String
Dim sqlQuery2 As String
Dim sqlQuery3 As String

'grab node from user input box
node = InputBox("Node")

'Connection string
Conn = "Provider=MSDASQL; Driver={Microsoft ODBC for Oracle}; " & _
    "CONNECTSTRING=(DESCRIPTION=" & "(ADDRESS=(PROTOCOL=TCP)" & _ 
    "(HOST=myhost)(PORT=myport))" & "(CONNECT_DATA=(SID=mysid))); uid=user; pwd=pass;"

'Build SQL Query
sqlQuery = "A REALLY LONG STRING"
sqlQuery2 = sqlQuery & "A REALLY LONG STRING"
sqlQuery3 = sqlQuery2 & "A REALLY LONG STRING"

'This output is confirmed to have the full query - **VERIFIED OUTPUT IS CORRECT**
Range("A1").Select
ActiveCell.FormulaR1C1 = sqlQuery3

'---------------------------------------------------------------
' Set file details for SQL query
fileDir = "C:\temp\"
filePath = "C:\temp\" & node & "_SRO_TCs.sql"

'check if directory exists, if not create it
If Dir(fileDir, cbDirectory) = "" Then
MkDir fileDir
End If

' open the file output
Open filePath For Output As #1

'Write full SQL query to file - VERIFIED
outputText = sqlQuery3
Print #1, outputText
'-----------------------------------------------------------    

'open connection
sqlCon.ConnectionString = Conn
  'Cn.CursorLocation = adUseClient
sqlCon.Open

'set and execute sql command
Set sqlCommand.ActiveConnection = sqlCon
sqlCommand.CommandText = sqlQuery3
sqlCommand.CommandType = adCmdText
sqlCommand.Execute sqlQuery3

'open recordset
Set sqlRecordSet.ActiveConnection = sqlCon
sqlRecordSet.Open sqlCommand

'copy data to excel
'ActiveSheet.Range("A1").CopyFromRecordset (sqlRecordSet)
If Not sqlRecordSet.EOF Then    '<<<<<<<<<<<<<<<<<<<<<<<<<<< ERROR: Operation is not allowed when the object is closed
    ActiveSheet.Range("A1").CopyFromRecordset sqlRecordSet
Else: MsgBox "No records returned!"
End If

'close connections
sqlRecordSet.Close
sqlCon.Close

'Close file
Close #1

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T04:51:02.907

使用所需的任何参数将查询转换为存储过程，然后从 Excel 调用存储过程并将结果粘贴到工作簿中。在下面列出的示例中，我连接到 SQL Server，但如果您连接到 Oracle，它的工作方式相同。

以下是一些您可以修改以用于您的应用程序的代码：

```
 Public Sub RunStoredProcedureFromExcel()
    Dim rsData As ADODB.Recordset

    Dim ProductID, CategoryID, StoreNumber As Integer
    ProductID = Sheets("Variables").Range("nrProductID").Value
    CategoryID = Sheets("Variables").Range("nrCategoryID").Value
    StoreNumber = Sheets("Variables").Range("nrSelectedStore").Value

    ' Clear the destination worksheet
    Sheet39.UsedRange.Clear

    ' Set the ADODB Connection
    ConnectToSQLServer

    ' Create the Recordset object.
    Set rsData = New ADODB.Recordset

    ' Open the pooled connection
    mcnSQLServer.Open
    mcnSQLServer.espGetLookupData ProductID, CategoryID, StoreNumber, rsData

    If Not rsData.EOF Then

        ' Paste the results into workbook
        Sheet39.Range("a1").CopyFromRecordset rsData

    Else
        MsgBox "No data located.", vbCritical, "Error!"
    End If

    ' Close the pooled connection
    mcnSQLServer.Close

    End Sub 
```

[《专业 Excel 开发](https://rads.stackoverflow.com/amzn/click/com/0321508793)》一书中有一个关于这个主题的精彩章节，它是上面代码的起点。

# html - 如何在 Dart 中通过鼠标单击 HTML5 画布获得 X 和 Y？

> ID：10564350
> 
> 赞同：4
> 
> 时间：2012-05-12T13:54:48.040
> 
> 标签：html, canvas, html5-canvas, dart

我在网页上有一个 HTML5 画布。当用户单击画布时，我想获取相对于画布的 X 和 Y 坐标。我想在 Dart 中执行此操作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T13:58:02.093

# 此答案已过时，请参阅上面已接受的答案

创建一个简单的 Point 类：

```
class Point {
  final int x;
  final int y;

  Point(this.x, this.y);
} 
```

导入 dart:html 库：

```
import 'dart:html'; 
```

第一步，获取画布的客户端边界矩形：

```
Point clientBoundingRect;
Future<html.ElementRect> futureRect = ctx.canvas.rect;

futureRect.then((html.ElementRect rect) {
  clientBoundingRect = new Point(rect.bounding.left, rect.bounding.top);
}); 
```

接下来，定义从窗口到画布的偏移算法。

```
Point getXandY(e) {
    num x =  e.clientX - clientBoundingRect.x;
    num y = e.clientY - clientBoundingRect.y;
    return new Point(x, y);
} 
```

接下来，将单击事件处理程序附加到画布：

```
ctx.canvas.on.click.add((e) {
    click = getXandY(e);
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T12:14:52.877

如果 getBoundingClientRect 现在 Dart 有同步版本，你就不用再使用异步版本了。

```
var clientRect = ctx.canvas.getBoundingClientRect();

ctx.canvas.on.click.add((e) {
  var x = e.clientX - clientRect.left;
  var y = e.clientY - clientRect.top;
}); 
```

MouseEvent 中还有“offsetX”和“offsetY”getter，它们做同样的事情，但我不确定这些字段是否会永远存在，因为它们不在标准中。

# javascript - Javascript / Firefox 宽度问题

> ID：10564353
> 
> 赞同：0
> 
> 时间：2012-05-12T13:55:18.123
> 
> 标签：javascript, jquery, firefox

您可以在此处查看问题，使用左右箭头进行控制。 [http://onezeromany.com/cv/](http://onezeromany.com/cv/) （在 chrome/safari 中工作正常，在 Firefox 中不行）

我有 9 个 div，都是浏览器窗口的全尺寸。正如您在演示中看到的那样，它们充当幻灯片。现在，由于某种原因，在 Firefox 中，它们每次都会再次向左滑动一点。这是一个已知问题，有人知道解决方案吗？这是js代码：

```
$(document).ready(function() {
        var slide = 1;
        var browserwidth = -$(window).width() -1;
        $("body").children().not("#slide1").css("left",Math.abs(browserwidth));

        $(document).keydown(function(e){
            if(e.keyCode == 37) {
                if(slide > 1) {
                    slide--;
                    $("#slide" + slide).animate({left:"0px"}, 500, "linear");
                    $("#slide" + (slide + 1)).animate({left:Math.abs(browserwidth)}, 500, "linear");
                }
            }
            if(e.keyCode == 39) {
                if(slide < 9) {
                    $("#slide" + slide).animate({left:browserwidth}, 500, "linear");
                    $("#slide" + (slide + 1)).animate({left:0}, 500, "linear");
                    slide++;
                }
            }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-12T14:18:13.247

尝试在 $(window).load 而不是 $(document).ready 上执行

# mysql - 在 SQL 中迭代和更新表

> ID：10564355
> 
> 赞同：0
> 
> 时间：2012-05-12T13:55:26.470
> 
> 标签：mysql, sql

我有一张名为`person_relation`

```
Id  | ParentId    |  ChildId  | PersonId    
-------------------------------------------
1   |    null     |  2        |   null     
-------------------------------------------
2   |     1       |  3        |   null      
-------------------------------------------
3   |     2       |  4        |    122
-------------------------------------------
4   |     3       |  null     |    122
------------------------------------------- 
```

这 4 行属于 id 为 122 的一个人。我正在努力更新 PersonId 列；前 2 行应该有 122 作为 PersonId。

* * *

```
Id  | ParentId    |  ChildId  | PersonId    
-------------------------------------------
1   |    null     |  2        |   null     
-------------------------------------------
2   |     1       |  3        |   null      
-------------------------------------------
3   |     2       |  4        |    122
-------------------------------------------
4   |     3       |  null     |    122
-------------------------------------------
5   |    null     |  6        |   123
-------------------------------------------
6   |     5       |  7        |   null      
-------------------------------------------
7   |     6       |  8        |    123
-------------------------------------------
8   |     7       |  null     |    null   
------------------------------------------- 
```

现在这个表有两个人，他们的 id 是 122 和 123。它可能有很多人。所以上面的回复是行不通的。因此，我们需要一种迭代方法来更新这些行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T13:57:20.713

```
update person_relation 
set personid = 122
where personid is null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T07:53:56.247

parent_id 中应该有关系。如果其中 4 个属于家庭。然后他们的孩子应该将 parentID 列值作为他们的父母 ID 号......（在这种情况下为 1 或 2）。我想知道如果他们是同一个家庭，父母ID怎么可能为**空..？**

如果父母ID是正确的，那么你可以正确更新孩子的personID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T16:37:28.880

Juergen 的回答将完成工作，但我敢打赌，您的数据集不限于这四行。我会做一些更安全的事情：

```
update person_relation
set PersonId = 122
where Id IN (1,2) 
```

# php - 使用 PHP 和 MySQL 从登录用户中提取附加数据

> ID：10564361
> 
> 赞同：0
> 
> 时间：2012-05-12T13:56:09.103
> 
> 标签：php, mysql

我想修改下面的脚本，以便在重定向用户时从数据库中提取更多信息。

我想要提取的额外信息与*用户名*和*密码*在同一个表中，并标记为*fname*。我对 php 很陌生，因此非常感谢任何能帮助我指出正确方向的人。

我知道我可以使用*用户名*（如果我在重定向页面上的脚本中将*fname*替换为*用户名，这确实有效）但这是一封电子邮件，因此作为对**登录*用户的问候看起来不太好

**这是登录用户和重定向的脚本，它工作正常：**

```
<?php

session_start();
$host="localhost";  // Host name 
$username="";       // Mysql username 
$password="";       // Mysql password 
$db_name="trydata"; // Database name 
$tbl_name="users";  // Table name

mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB"); 

// username and password sent from form 
$myusername=$_POST['username']; 
$mypassword=$_POST['password']; 

// To protect MySQL injection (more detail about MySQL injection) 
$myusername = stripslashes($myusername); 
$mypassword = stripslashes($mypassword); 
$myusername = mysql_real_escape_string($myusername); 
$mypassword = mysql_real_escape_string($mypassword); 

$sql = "SELECT * 
        FROM $tbl_name 
        WHERE username='$myusername' 
        AND password='$mypassword'"; 
$result = mysql_query($sql); 

// Mysql_num_row is counting table row 
$count = mysql_num_rows($result); 

// If result matched $myusername and $mypassword,
// table row must be 1 row 
if($count == 1){ 
  // Register $myusername, $mypassword
  // and redirect to file"login_success.php" 
  $_SESSION['username'] = $myusername; 
  $_SESSION['password'] = $mypassword; 

  // get the result set from the query
  $result = mysql_fetch_array($result); 

  // get the redirect column's value
  $redirect = trim($result['redirect']);

  if ($redirect == '') {
    echo "No redirect value was set!";
  } else {
    header('Location: ' . $redirect);
    exit;
  }
} else { 
  echo "Wrong Username or Password"; 
} 

?> 
```

**这是重定向页面中未从数据库中提取 fname 的脚本：**

```
<?php 

// start up your PHP session! 
session_start();

if ($_SESSION["username"]) {
  echo "You are logged in as ".$_SESSION['fname'];
  echo "<p>";
  echo "<a href='aapage.php'>here is the aapage</a>";
  echo "<a href='logout.php'> Click here to logout<a/>";
} else {
  header ("Location: form.php");
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T14:02:31.990

首先，您需要将 fname 分配给一个变量。例如，在该行之后：

```
$result = mysql_fetch_array($result); 
```

您可以添加如下内容：

```
$_SESSION['fname'] = $result['fname']; 
```

然后，您可以在其他页面中使用此会话变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T14:05:07.117

您永远不会设置会话变量“框架”。您需要在您的登录脚本中设置它。

```
// If result matched $myusername and $mypassword, table row must be 1 row 
if($count == 1){ 
    // Register $myusername, $mypassword and redirect to file"login_success.php" 
    $_SESSION['username'] = $myusername; 
    $_SESSION['password'] = $mypassword; 
    $_SESSION['frame'] = mysql_result($result,0,"whateverfnamesrowisinyourdatabase");
} 
```

# php - 免费网络服务器 PHP

> ID：10564363
> 
> 赞同：-5
> 
> 时间：2012-05-12T13:56:28.200
> 
> 标签：php, webserver

谁能建议我一些免费的网络服务器，我可以在其中上传我的网站并进行测试。我目前的错误是给我和错误，这实际上不应该发生。也许它适用于另一台服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T14:00:04.293

当我需要快速托管时，我发现[izfree非常好。](http://izfree.com/)我不会推荐它用于生产中的任何东西，尽管它的正常运行时间不如它可能的那么好。

编辑：虽然看着它，它甚至可能不再被维护了。我最后一次使用它是在 2009 年...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T14:00:23.003

只需使用 xampp 等程序设置本地服务器。你可以在这里下载它：http: [//www.apachefriends.org/en/xampp.html](http://www.apachefriends.org/en/xampp.html) 比在实际服务器上测试更快、更灵活、更方便。

# google-maps - 如何移动谷歌地图控件INURL

> ID：10564364
> 
> 赞同：0
> 
> 时间：2012-05-12T13:56:35.987
> 
> 标签：google-maps, user-controls

我有这个链接：

[http://maps.google.com/maps?f=q&source=s_q&hl=en&geocode=&q=Zagreb,+Croatia&aq=&sll=45.808351,15.897484&sspn=0.010066,0.016544&vpsrc=0&ie=UTF8&hq=&hnear=Zagreb,+Croatia&t= p&z=14&ll=45.794222,16.048298&输出=嵌入](http://maps.google.com/maps?f=q&source=s_q&hl=en&geocode=&q=Zagreb,+Croatia&aq=&sll=45.808351,15.897484&sspn=0.010066,0.016544&vpsrc=0&ie=UTF8&hq=&hnear=Zagreb,+Croatia&t=p&z=14&ll=45.794222,16.048298&output=embed)

并希望将控件（当前位于 TOP LEFT 位置）置于 LEFT_CENTER 位置，如下所示： [https ://developers.google.com/maps/documentation/javascript/controls#ControlPositioning](https://developers.google.com/maps/documentation/javascript/controls#ControlPositioning)

什么要添加到 URL？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T14:45:16.530

TL;DR：你不能这样做。

* * *

这是 API 比 Google Maps 具有更多功能的一个实例。

[Mapki](http://mapki.com/wiki/Google_Map_Parameters)中有一个 Maps 参数列表——没有提到改变控件的位置。

如果您想做更多，您确实需要使用 API，这是您引用的文档所涵盖的内容：这不适用于 Google 地图。

# c++ - memcpy 定义的位置

> ID：10564366
> 
> 赞同：-1
> 
> 时间：2012-05-12T13:56:46.920
> 
> 标签：c++, c, visual-c++, low-memory

memcpy 函数的定义在哪里？它在 wchar.h 中声明，我可以在其中找到

```
/* memcpy and memmove are defined just for use in wmemcpy and wmemmove */ 
```

然后我在我的计算机上只找到 wmemcpy_s.c 并且那里有一个 wmemcpy_s 函数的定义，它使用的`wmemcpy`函数使用`memcpy`.

memcpy的定义在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T18:11:29.773

这取决于正在使用的编译器。对于 gcc，一个通用的 memcpy 位于 libgcc.a，通常是一个 rep movsb。如果打开优化，编译器将尝试发出内联版本，并且有多个版本的内置 memcpy 针对不同情况进行了优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T19:23:49.730

C:\ProgramFiles\MicrosoftVisualStudio10\VC\crt\src\memcpy.c

# sql - 在 SQL Server 中使用 With Union 构建 SQL 路径

> ID：10564367
> 
> 赞同：2
> 
> 时间：2012-05-12T13:56:51.640
> 
> 标签：sql, sql-server, recursion

**这是 SQL Server 问题**

我有一组类别，它们的关系导致嵌套类别。

我想建立一条保持关系并建立 SEF url 的途径。这是我正在寻找的：

```
Category table: 
ID, Name
1, Root
2, Cat1
3, Cat2
4, Cat1.1
5, Cat1.2
6, Cat2.1
7, Cat2,2

CategoryChild table: ParentCategoryID, ChildCategoryID
1, 2
1, 3
2, 4
2, 5
3, 6
3, 7 
```

它是一个无限的嵌套结构。这就是我正在做的事情（我知道它错了，但想要这样的东西）：

```
WITH  MenuItems
    AS (

        SELECT  

        CAST((ItemPath) AS VARCHAR(1000)) AS 'ItemPath',
        CategoryID, Category, ChildID
        FROM    #Mapping
        WHERE   CategoryID = 1
        UNION ALL
        SELECT  
                CAST((items.ItemPath + '-/' + MenuItem.Category) AS VARCHAR(1000)) AS 'ItemPath',
                MenuItem.CategoryID, MenuItem.Category, MenuItem.ChildID
        FROM     #Mapping AS MenuItem
                JOIN MenuItems AS items
                  ON items.ChildID = MenuItem.CategoryID 
       ) 
select * from MenuItems 
```

它给了我这样的东西：

```
根--------|1---|根---|2
根--------|1---|根---|3
根/Cat2---|3---|Cat2---|6
根/Cat2---|3---|Cat2---|7
根/Cat1---|2---|Cat1---|4
根/Cat1---|2---|Cat1---|5

```

所以理想情况下，路径应该是这样的：

根/父/子（等等）！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T05:51:59.873

我不确定这是否是您正在寻找的东西，但我过去曾使用过递归 cte，因此这可能有助于构建项目路径。

注意：我已经包含了附加信息，例如每个项目的 Root Id 和 Level，以便您可以更改输出的顺序。

```
declare @Category table (Id int, Name varchar(10))
insert into @Category values (1, 'Root'),(2, 'Cat1'), (3, 'Cat2'), (4, 'Cat1.1'), (5, 'Cat1.2'), (6, 'Cat2.1'), (7, 'Cat2.2')

declare @CategoryChild table (ParentCategoryID int, ChildCategoryID int)
insert into @CategoryChild values (1, 2), (1, 3), (2, 4), (2, 5), (3, 6), (3, 7)

;with cte as 
(
    -- root part
    select 
        ccParent.ChildCategoryID Id,
        ccParent.ParentCategoryID ParentId,
        c.Name Name,
        CAST(parentCategory.Name + '/' + c.Name as varchar(1000)) as Path,
        ccParent.ChildCategoryID Root,
        0 as Level
    from
        @CategoryChild ccParent
    inner join
        @Category c on c.Id = ccParent.ChildCategoryID
    inner join
        @Category parentCategory on parentCategory.Id = ccParent.ParentCategoryID
    where
        ccParent.ParentCategoryID = 1

    union all

    -- recursive part
    select
        ccChild.ChildCategoryID Id,
        ccChild.ParentCategoryID ParentId,
        c.Name Name,
        CAST((cte.Path + '/' + c.Name) as varchar(1000)) as Path,
        cte.Root Root,
        cte.Level + 1 as Level
    from
        @CategoryChild ccChild
    inner join
        @Category c on c.Id = ccChild.ChildCategoryID
    inner join
        cte on cte.Id = ccChild.ParentCategoryID
)
select cte.Path 
from cte 
order by cte.Root, cte.Level 
```

在我的环境中运行上述内容会产生以下结果

```
Root/Cat1
Root/Cat1/Cat1.1
Root/Cat1/Cat1.2
Root/Cat2
Root/Cat2/Cat2.1
Root/Cat2/Cat2.2 
```

如果您希望将 Root 类别作为独立项目包含在结果集中，则可以将 cte 的第一部分更改为对根项目的选择进行硬编码。

```
;with cte as 
(
    -- root part
    select 
        c.Id Id,
        null ParentId,
        c.Name Name,
        CAST(c.Name as varchar(1000)) as Path,
        c.Id Root,
        0 as Level
    from
        @Category c
    where 
        c.Name = 'Root'

    union all

    ... same as before 
```

给予关注

```
Root
Root/Cat1
Root/Cat1/Cat1.1
Root/Cat1/Cat1.2
Root/Cat2
Root/Cat2/Cat2.1
Root/Cat2/Cat2.2 
```

# c++ - 禁止来自 gcc init_priority 属性的警告

> ID：10564368
> 
> 赞同：1
> 
> 时间：2012-05-12T13:56:52.147
> 
> 标签：c++, linux, gcc, g++, warnings

G++ 给我关于 init_priority 属性的警告：

```
g++ -c -o src/core/ModuleManager.o -Wall -fPIC -imacros ./src/configs/config.hpp -O2 -I./src/include  src/core/ModuleManager.cpp
src/core/ModuleManager.cpp:27:29: warning: requested init_priority is reserved for internal use 
```

有没有办法抑制这个特定的警告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T16:01:41.077

> 有没有办法抑制这个特定的警告？

是：不要使用保留供内部使用的 init_priority（优先级 <= 100）。

保留它是有*原因*的，如果您忽略警告，您最终将不得不调试一个您将难以理解的问题。

永远不要对你的编译器撒谎——它会抓住你的！

# mysql - SELECT 但顺序由另一个表中的数据控制

> ID：10564369
> 
> 赞同：1
> 
> 时间：2012-05-12T13:56:53.783
> 
> 标签：mysql

我有一个查询

```
$STH_1 = $DBH_R->query("SELECT table_name                        
                         FROM information_schema.tables                        
                        WHERE table_name                        
                         LIKE 'v_c_ei\_9%'
                         ");

$stmts_1 = array();

while (($row_1 = $STH_1 -> fetch_assoc()) !== null){
$table_name = $row_1['table_name']; 
```

此查询的结果通常是按顺序排列的表列表：

```
v_c_ei_9001
v_c_ei_9002
...........
v_c_ei_9030 
```

在另一个表中`v_c_country`，我有 2 列：`table_name`和`country_name`，（例如， `v_ei_c_9001`是`Australia`、`v_ei_c_9012`是`Great Britain`等）

通常，因此，我需要来自上述查询的表（表名）列表，但在 ORDER ASC 中来自 table 的国家/地区名称`v_c_country`。

如何更改查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T16:47:00.740

```
SELECT t.table_name                        
  FROM information_schema.tables AS t
  JOIN v_c_country               AS c ON t.table_name = c.table_name
 WHERE t.table_name LIKE 'v_c_ei\_9%'
 ORDER BY c.country_name ASC; 
```

对于测试和验证，添加`c.country_name`到选择列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T14:02:56.927

你没有。MySQL 中的规则是，您永远不能混合**数据**（例如存储在表中的国家/地区名称）和**元数据**（例如表名）。

您可以做的是使用存储过程来滥用语句准备作为动态 SQL。这已在此处多次描述。

# c++ - 如何在 omnet++ 中模拟车辆运动？

> ID：10564372
> 
> 赞同：2
> 
> 时间：2012-05-12T13:57:13.427
> 
> 标签：c++, simulation, omnet++, traffic-simulation

我是 omnet++ 的新手，我需要在地图上写一个模拟车辆。我有一个名为“Vehicle”的复合模块，其中包含 2 个简单模块：

1.  移动（所有汽车都会在地图上移动）
2.  用于所有车辆之间的通信

有人知道如何实现运动部分吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T15:25:29.043

您可以使用[VEINS](http://veins.car2x.org/)框架，它提供了模拟车辆网络所需的一切。或者，[INETMANET](https://github.com/inetmanet/inetmanet)框架还包含几个移动和无线通信模型。

# jquery - 使用 replaceWith 填充 HTML 标签

> ID：10564376
> 
> 赞同：0
> 
> 时间：2012-05-12T13:57:59.010
> 
> 标签：jquery

我知道

```
$('p.heading').replaceWith('Welcome'); 
```

将用文本“欢迎”替换整个`<p>`标签

我如何只替换内容，所以我结束了`<p class="heading">Welcome</p>`？

也许 replaceWith 是错误的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T13:58:51.460

```
$('p.heading').html('Welcome'); 
```

该`.html()`函数将匹配元素的*内部 HTML替换为其参数（如果在没有参数的情况下调用匹配元素，则返回匹配元素的内部 HTML）。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T14:00:24.503

您可以为此使用[`text()`](http://api.jquery.com/text/)or[`html()`](http://api.jquery.com/html/)方法：

```
$("p.heading").text("Welcome"); 
```

# jquery - Jquery appendTo('body') 与 Greasemonkey 一起使用时进行多次插入

> ID：10564378
> 
> 赞同：0
> 
> 时间：2012-05-12T13:58:18.637
> 
> 标签：jquery, dom, greasemonkey, appendto

我制作了一个使用 jQuery 的 Greasemonkey 脚本`appendTo('body')`。
一切正常，但 HTML 还附加到其他 DOM 元素，例如我的 igoogle 页面上的 Google 广告和小工具。

有什么可以解决的吗？我认为这个问题不需要一些示例代码。相反，我上传了一张显示我的问题的图片：

[![我的 igoogle 页面](../Images/bcb2eb867a6dab9f1ad5c1eb1c97dc7e.png)](https://i.stack.imgur.com/Uv4tU.png)

如您所见，我附加的 HTML 出现在许多不同的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T14:02:20.037

您看到 HTML 附加到多个项目的原因很可能是因为您正在处理的标记中存在 iframe。

每个 iFrame（我怀疑小工具、广告都是 iFrame）都有自己的完整 HTML 结构，`<html></html>`并带有`<body></body>`标签。当 you 时`.appendTo('body')`，您的脚本会将内容附加到与`'body'`选择器匹配的任何元素。

您需要提供比`$('body')`.

* * *

除了通用选择器之外，您可能想要做的是尝试使用`$('body:first')`某种其他独特的选择`body`器。您可能需要稍微尝试一下，因为您依赖的 HTML 不受您的控制——我假设您希望 GM 脚本在任何页面上运行——因此您受限于该页面的结构。例如，不能保证`:first` `<body>`标签是正确的。

如果你问我，一个可靠的方法是遍历所有返回的`<body>`元素，`$('body')`并为每个元素查看它是否有一个 Iframe 的父元素。

像这样的东西-

```
var selectedElement = '';
$('body').each(function(index,elem){
  if ($(elem).closest('iframe').length){
    selectedElement = $(elem);
  }
});

if (selectedElement){
  // appendTo(selectedElement);
} 
```

* * *

*   我正在使用该[`.each()`函数](http://api.jquery.com/jQuery.each/)迭代与给定选择器匹配的所有元素 - 在这种情况下 - `body`。

*   我在这里使用该[`.closest()`函数](http://api.jquery.com/closest/)来浏览所有父元素并找到与给定选择器匹配的祖先 - 在这种情况下 - `iframe`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T23:09:31.673

是的，这是由于 Greasemonkey 将每个`frame`和`iframe`视为自己的页面（在某种程度上，确实如此），并按照`@include`、`@exclude`和/或`@match`指令指示的方式运行。
（请注意，没有`src`属性的 iframe 被认为来自与基本页面相同的 URL。）

要阻止脚本在 iframe 上触发，请将此代码放在脚本顶部附近：

```
if (window.top != window.self)  //-- Don't run on frames or iframes.
    return; 
```

* * *

如果您确实想在某些 iframe 上运行，而不是在其他 iframe 上运行，请尽可能调整`@include`、`@exclude`和/或`@match`指令，或链接到目标页面以帮助选择选择性阻止 iframe 的方法。

# c++ - 从 6 字节字段计算哈希？

> ID：10564380
> 
> 赞同：2
> 
> 时间：2012-05-12T13:58:36.327
> 
> 标签：c++, boost

我正在寻找一种有效的方法来散列一个 6 字节的字段，以便它可以用于`std::unordered_map`.

我认为这将是创建哈希的传统方式：

```
struct Hash {
    std::size_t operator()(const std::array<uint8_t, 6> & mac) const {
        std::size_t key = 0;
        boost::hash_combine(key, mac[0]);
        boost::hash_combine(key, mac[1]);
        boost::hash_combine(key, mac[2]);
        boost::hash_combine(key, mac[3]);
        boost::hash_combine(key, mac[4]);
        boost::hash_combine(key, mac[5]);
        return key;
    }
}; 
```

但是我注意到我可以使用这个技巧让它更快一点（~20%）：

```
struct Hash {
    std::size_t operator()(const std::array<uint8_t, 6> & mac) const {
        std::size_t key = 0;

        // Possibly UB?
        boost::hash_combine(key, reinterpret_cast<const uint32_t&>(mac[0]));
        boost::hash_combine(key, reinterpret_cast<const uint16_t&>(mac[4]));
        return key;
    }
}; 
```

这甚至更快：

```
struct Hash {
    std::size_t operator()(const std::array<uint8_t, 6> & mac) const {
        // Requires size_t to be 64-bit.
        static_assert(sizeof(std::size_t) >= 6, "MAC address doesn't fit in std::size_t!");

        std::size_t key = 0;

        // Likely UB?
        boost::hash_combine(key, 0x0000FFFFFFFFFFFF & reinterpret_cast<const uint64_t&>(mac[0]));
        return key;
    }
}; 
```

我的问题有两个：

1.  这些优化会导致 UB 吗？
2.  我的第一个解决方案是要走的路吗？或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T14:08:11.423

您的优化正在打破严格的别名规则，这会导致（标准而言）未定义的行为。

最后一个优化最让我担心，因为你实际上是在读取你不应该读取的内存，如果这个内存碰巧受到保护，这可能会引发陷阱。

您不使用的任何原因[`boost::hash_range`](http://www.boost.org/doc/libs/1_33_1/doc/html/hash_range.html)？

* * *

由于`boost::hash_range`结果不如要求的那么快，我会提出另一种基于混叠的解决方案。或者更确切地说，两个解决方案合二为一。

第一个想法是可以使用`char*`临时类型来抑制别名。

```
size_t key = 0;
char* k = &reinterpret_cast<char*>(&key);

std::copy(mac.begin(), mac.end(), k);

return key; 
```

因此是哈希的有效实现。

但是，我们可以更进一步。由于对齐和填充，存储一个`char[6]`和`char[8]`可能在一个映射节点内使用相同数量的内存。因此，我们可以通过使用来*丰富*类型`union`：

```
union MacType {
    unsigned char value[8];
    size_t hash;
}; 
```

现在，您可以将其正确封装在一个类中（并确保始终初始化字节`7`和`8`to `0`），并实现`std::array<unsigned char, 6>`您实际需要的接口。

我对小字符串（小于 8 个字符）使用了类似的技巧来进行散列和快速（非字母）比较，这真的很不错。

# validation - 交叉验证（Weka）中的自定义折叠

> ID：10564385
> 
> 赞同：0
> 
> 时间：2012-05-12T13:58:56.497
> 
> 标签：validation, weka, fold

是否可以在 Weka 中为交叉验证创建自定义折叠。我想要的是每个折叠只包含具有特定属性值的记录（例如邮政编码）。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T16:50:22.063

我认为实现这一目标的最佳方法是使用[R](http://www.r-project.org/)和 Weka 接口[RWeka](http://cran.r-project.org/web/packages/RWeka/index.html)之类的东西。Weka 不允许您创建自定义折叠，因此您必须以另一种方式执行此操作，并在将它们传递给 Weka 之前自己组装训练/测试拆分。这在 R 中相对容易完成。

# visual-studio-2010 - InstallShield 和 VS2010

> ID：10564386
> 
> 赞同：0
> 
> 时间：2012-05-12T13:59:02.820
> 
> 标签：visual-studio-2010, installshield, installshield-2012

我安装了 InstallShield 2012 Premier 并尝试在 VS2010 (Premium) 中创建 Basic MSI 项目。但由于出现错误，我无法创建项目：

> “InstallShield 2012 Package”软件包未正确加载。问题可能是由配置更改或安装另一个 > 扩展引起的。您可以通过在命令行上与 /log 参数一起运行应用程序来获取更多信息，然后检查文件“C:\Users\Administrator\AppData\Roaming\Microsoft\VisualStudio\10.0\ActivityLog.xml”。

如果我按照 ActivityLog.xml 中的说明进行操作，我会看到下一个错误：

> 包 [InstallShield 2012 包] C:\Program Files (x86)\InstallShield\2012\System\IsDevPkg.dll 的 LoadLibrary 失败

我已经尝试了 devenv.exe /resetskippkgs 并重新安装了 Visual Studio 和 InstallShield，但它没有帮助。

也许我没有安装一些先决条件？

谢谢，埃琳娜

更新：安装 InstallShield 2012 Spring 解决了这个问题。似乎在较新的版本中，这个包已经被修复了。

# cakephp - 提取 Cakephp 多维数组

> ID：10564387
> 
> 赞同：0
> 
> 时间：2012-05-12T13:59:22.537
> 
> 标签：cakephp

我需要从 id ( ) 数组中找到所有记录`$user_id = array();`以保存到通知表中，以告诉这些用户他们的帐户已激活。

执行完这些后，

```
$x = $this->User->find('all',array('conditions'=>array('User.id'=>$user_id)));
$find = Set::extract('/User', $x); 
```

我得到这个结果：

```
Array( 
       [0] => Array
       (
              [User] => Array
              (
                [id] => 2
                [name] => joe
                [age] => 13
                [class] => D
              )

       )
       [1] => Array
       (
               [User] => Array
               (
                [id] => 3
                [name] => lambert
                [age] => 14
                [class] => E
              )

       )
    ) 
```

我需要通过提取上面的数组来实现下面的数组

```
Array
{
   [id] => 2
   [name] => joe
   [age] => 13
   [class] => D
}
Array
{
   [id] => 3
   [name] => lambert
   [age] => 14
   [class] => E
} 
```

如何使用 CakePHP 实现这一点？那么，在我看来，如何根据上面提取的数组发送多条记录？是否可以在视图内创建一个 foreach 循环？

```
 echo $html->link(__('Send',true),array('controller'=>'users','action'=>'notifications',$user_id),array('class'=>'button')); 
```

显然，将链接放在循环中会导致两个具有不同 id 的链接（$user_id = 2 和 $user_id = 3）。我不希望这种情况发生。我想要一个可以一次性提交这些 id 的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T17:23:54.157

第一个问题的答案

```
 $data_final =array();
    foreach($findas $d)
    {
        $data_final[]  =$d['User'];
    } 
```

那么你会实现

```
Array
(
    [0] => Array
        (
            [id] => 2
            [name] => joe
            [age] => 13
            [class] => D
        )

    [1] => Array
        (
            [id] => 4
            [name] => lamber
            [age] => 23
            [class] => E
        )

) 
```

您使用 url 的方式回答第二个问题不是一个好习惯。你应该张贴记录

# python - 运行 Scrapy 的 Django 自定义管理命令：如何包含 Scrapy 的选项？

> ID：10564389
> 
> 赞同：11
> 
> 时间：2012-05-12T13:59:25.670
> 
> 标签：python, django, scrapy

我希望能够在 Django 中运行[Scrapy 网络爬虫框架](http://scrapy.org/)。Scrapy 本身只提供了一个命令行工具`scrapy`来执行它的命令，也就是说，该工具不是故意编写为从外部程序调用的。

用户[Mikhail Korobov](https://stackoverflow.com/users/114795/mikhail-korobov)提出了一个[不错的解决方案](https://stackoverflow.com/questions/4271975/access-django-models-inside-of-scrapy/9197627#9197627)，即从 Django 自定义管理命令调用 Scrapy。为方便起见，我在这里重复他的解决方案：

```
# -*- coding: utf-8 -*-
# myapp/management/commands/scrapy.py 

from __future__ import absolute_import
from django.core.management.base import BaseCommand

class Command(BaseCommand):

    def run_from_argv(self, argv):
        self._argv = argv
        return super(Command, self).run_from_argv(argv)

    def handle(self, *args, **options):
        from scrapy.cmdline import execute
        execute(self._argv[1:]) 
```

`scrapy crawl domain.com`我现在可以`python manage.py scrapy crawl domain.com`在 Django 项目中进行，而不是调用 eg 。但是，Scrapy 命令的选项根本不被解析。如果我这样做`python manage.py scrapy crawl domain.com -o scraped_data.json -t json`，我只会得到以下响应：

```
Usage: manage.py scrapy [options] 

manage.py: error: no such option: -o 
```

**所以我的问题是，如何扩展自定义管理命令以采用 Scrapy 的命令行选项？**

不幸的是，Django[这部分的文档](https://docs.djangoproject.com/en/1.4/howto/custom-management-commands/)不是很丰富。我还阅读了 Python 的[optparse 模块](http://docs.python.org/library/optparse.html)的文档，但之后对我来说并不清楚。任何人都可以在这方面帮助我吗？提前非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T12:47:27.657

好的，我找到了解决问题的方法。这有点难看，但它有效。由于 Django 项目的`manage.py`命令不接受 Scrapy 的命令行选项，因此我将选项字符串拆分为两个由`manage.py`. 成功解析后，我重新加入这两个参数并将它们传递给 Scrapy。

也就是说，而不是写

```
python manage.py scrapy crawl domain.com -o scraped_data.json -t json 
```

我在这样的选项之间放置空格

```
python manage.py scrapy crawl domain.com - o scraped_data.json - t json 
```

我的句柄函数如下所示：

```
def handle(self, *args, **options):
    arguments = self._argv[1:]
    for arg in arguments:
        if arg in ('-', '--'):
            i = arguments.index(arg)
            new_arg = ''.join((arguments[i], arguments[i+1]))
            del arguments[i:i+2]
            arguments.insert(i, new_arg)

    from scrapy.cmdline import execute
    execute(arguments) 
```

* * *

同时，Mikhail Korobov 提供了最佳解决方案。看这里：

```
# -*- coding: utf-8 -*- 
# myapp/management/commands/scrapy.py 

from __future__ import absolute_import
from django.core.management.base import BaseCommand

class Command(BaseCommand):

    def run_from_argv(self, argv):
        self._argv = argv
        self.execute()

    def handle(self, *args, **options):
        from scrapy.cmdline import execute
        execute(self._argv[1:]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T21:19:48.670

我认为您真的在寻找[POSIX 参数语法约定](http://pubs.opengroup.org/onlinepubs/009696699/basedefs/xbd_chap12.html)的**准则 10**：

> 参数 -- 应该被接受为指示选项结束的分隔符。任何以下参数都应被视为操作数，即使它们以“-”字符开头。-- 参数不应用作选项或操作数。

Python 的`optparse`模块以这种方式运行，即使在 Windows 下也是如此。

我将scrapy项目设置模块放在参数列表中，这样我就可以在独立的应用程序中创建单独的scrapy项目：

```
# <app>/management/commands/scrapy.py
from __future__ import absolute_import
import os

from django.core.management.base import BaseCommand

class Command(BaseCommand):
    def handle(self, *args, **options):
        os.environ['SCRAPY_SETTINGS_MODULE'] = args[0]
        from scrapy.cmdline import execute
        # scrapy ignores args[0], requires a mutable seq
        execute(list(args)) 
```

调用如下：

```
python manage.py scrapy myapp.scrapyproj.settings crawl domain.com -- -o scraped_data.json -t json 
```

*用scrapy 0.12和django 1.3.1测试*

# opengl - 什么是 OpenGL 作为计算机文件

> ID：10564390
> 
> 赞同：1
> 
> 时间：2012-05-12T13:59:27.967
> 
> 标签：opengl

好的，我知道网上有数百万个关于 OpenGL 是什么的答案，但我正试图从我的计算机上的文件中弄清楚它是什么。我研究并发现 OpenGL 充当不同计算机显卡的多平台转换器。那么，它是一个dll吗？
我想知道，如果它是一个 dll，那么我不能下载任何版本的 dll（最好是最新的），然后使用它，知道它有什么吗？

编辑：好的，所以如果它是一个 windows dll，并且我制作了一个使用较晚版本的 OpenGL 游戏，如果其他人的较早版本的计算机不支持它怎么办？我是否可以在我的游戏中携带 dll，以便其他 Windows 计算机支持它？或者 dll 是否设置为在特定计算机上严格与显卡通信？

OpenGL 不断更新（不管它是什么）。如果它所做的只是与一堆不同计算机上的显卡进行通信，而这些计算机的显卡自内置以来就永远不会更新，这怎么能做到呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T08:39:21.630

OpenGL 有两个“部分”——由 Khronos Group 每隔几个月更新一次的规范，以及由您的显卡制造商专门为您的显卡型号编写的驱动程序。

OpenGL 规范基本上详细说明了 OpenGL API 应该如何工作 - 预期的行为应该是什么，什么时候被认为是意外行为，什么时候抛出哪些错误等。该规范让驱动程序编写者确切地知道他们需要做什么，并且让应用程序编写者知道对驱动程序的期望。这就是 OpenGL 真正“是”的东西——将应用程序和驱动程序结合在一起的粘合剂。[您可以在此处阅读每个版本的所有规格。](http://www.opengl.org/registry/)

然后是实现 OpenGL API 并被认为符合规范的驱动程序。驱动程序完全符合您的预期 - 将数据复制到显卡内存或从显卡内存中复制数据，将数据写入显卡寄存器，跟踪状态，处理顶点，编译着色器，指示数百个流处理器同时转换顶点和填充像素等。如果没有 OpenGL，每个显卡模型都会有一个单独的、稍快的 API，由于它的结构方式，它只适用于那个显卡。使用 OpenGL，驱动程序都是针对相同的 API 编写的，应用程序的代码将在所有显卡上运行。

OpenGL 规范的合规性不会随着驱动程序更新而改变。大多数驱动程序更新将修复小错误或进行一些内部优化。

我知道有一次 ATI 驱动程序存在一个小错误，您必须调用`glEnable(GL_TEXTURE_2D);`它才能生成 OpenGL 3 方式 ( `glGenerateMipMaps()`) 的 mipmap，尽管`GL_TEXTURE_2D`已弃用`glEnable()`. 我不确定它现在是否已修复，但它肯定是驱动程序编写者很容易忽略的边缘案例类型。

至于优化，有很多需要优化的地方。也许还有另一种在编译着色器时优化着色器的方法，也许有一种更有效的方法可以在流处理器之间分配工作，我不知道。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T14:05:06.433

[OpenGL](http://en.wikipedia.org/wiki/OpenGL)是用于图形编程的跨平台[API 。](http://en.wikipedia.org/wiki/Application_programming_interface)就编译代码而言，它将作为特定于操作系统的库提供 - 例如 Windows 中的 DLL (opengl32.dll) 或 Linux 中的 SO。

[您可以从OpenGL.org](http://www.opengl.org/)获取 SDK 和二进制可再发行组件

根据您使用的语言，可能有可用的 OpenGL 包装器。这些是专门设计用于您的语言的类或 API 库。例如，有可供 C# / VB.NET 开发人员使用的 .NET OpenGL 包装器。对这个主题进行快速的谷歌搜索应该会给你一些结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T14:52:07.193

OpenGL API 偶尔会发布新版本，但这些更新本质上是向后兼容的。此外，新功能通常作为扩展添加，并且可以检测存在哪些扩展并仅使用本地可用且受支持的扩展......因此您可以构建您的软件以利用可用的新功能，但当他们不在时仍然可以运行。

API 与单个驱动程序无关——驱动程序可以在不更改 API 的情况下更新，因此驱动程序不断更新的事实对于与您的软件的兼容性而言并不重要。因此，您可以选择一个 API 版本进行开发，并且只要您的目标操作系统附带与该 API 兼容的 OpenGL 库版本，您就不必担心驱动程序更新会破坏您的软件的能力与本地可用的库动态链接。

# android - 多播锁在 Android 2.2 手机上不起作用

> ID：10564391
> 
> 赞同：1
> 
> 时间：2012-05-12T13:59:28.857
> 
> 标签：android, broadcast, multicast

我需要能够在这部手机的 Wifi 上接收广播。这是 HTC Desire，大约 2 岁，运行 Android 2.2。

我遵循了我找到的文档和一些示例代码，并最终使用了这段代码来启用多播：

```
mWifiManager = (WifiManager)getSystemService(Context.WIFI_SERVICE);
WifiManager.MulticastLock multicastLock = mWifiManager.createMulticastLock("net.inside.broadcast");
multicastLock.setReferenceCounted(true);
multicastLock.acquire();
Log.i("BCXXX", "multicastLock.isHeld() = " + multicastLock.isHeld());
Log.i("BCXXX", "multicastLock.toString() = " + multicastLock.toString()); 
```

日志输出如下：

```
I/BCXXX   ( 3302): multicastLock.isHeld() = true
I/BCXXX   ( 3302): multicastLock.toString() = MulticastLock{ 45fa2b88; held; refcounted: refcount = 1 } 
```

这似乎证实了应该保持多播锁定，这意味着多播应该可以工作。然而，事实并非如此。除了它自己的广播数据包，即它发送给其他应用程序的广播数据包，Android 应用程序根本不会收到任何广播数据包。我应该提到的其他机器可以很好地看到Android手机并接收它的广播消息。我尝试将数据包寻址到 255.255.255.255 和 192.168.0.255（192.168.0。显然是 LAN 中每个人都连接到的网络）。

这是一个使用 Unity 3.5 构建的项目，Windows 和 OS X 构建都按预期工作。Android 插件确实被调用（从日志条目中可以看出）。

有什么想法吗？

# shell - 通过 shell 脚本使用 sed 管理配置文件

> ID：10564393
> 
> 赞同：1
> 
> 时间：2012-05-12T13:59:55.763
> 
> 标签：shell, configuration, sed, read-write

我需要使用 shell 脚本在 Linux 中管理一个配置文件，该脚本将在文件中读取和写入设置`cfg`。我有以下功能可以在我的脚本中使用的现有配置文件中编写一个新`value`的。`key`

```
set_setting() {
    sed -i "s/$1=[^ ]*/$1=$2/" $3
} 
```

用法：

`set_setting keyname NewValue /home/Config.cfg`

因此，这将替换`keyname`in `Config.cfg`to的值`NewValue`。

我还有一个`get_setting`使用`source`命令读取配置文件的功能。它同样接受两个参数`keyname`和源配置文件，并返回`value`提供的密钥。

现在的问题是，我有如下配置文件。

```
name=Abc
surname=Xyz 
```

当我调用`set_setting`函数 as时`set_setting name Def /home/Config.cfg`，理想情况下它应该将`name`from的值更改`Abc`为`Def`，但随着 key`name`的值的更改，它也会更改`surname`from的值，`Xyz`从而`Def`导致配置文件中的以下内容。

```
name=Def
surname=Def 
```

我怀疑这是因为在两个键中都有术语“名称”，因为当我将键更改为 时`surname`，`surnames`它按预期工作，只有值`name`被更改。另请注意，键的值可以是除空格之外的任何值。

我是 shell 脚本的新手，也是最近发现的`sed`命令。

我还提到了 SO questions [this](https://stackoverflow.com/questions/8082102/how-to-serach-and-replace-a-content-of-a-file-using-shell-script)和[this](https://stackoverflow.com/questions/5891342/modify-conf-file-with-shell-script)。虽然他们俩都非常有帮助，但我仍然坚持上述情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T15:03:02.223

您应该将匹配锚定到该行的开头：

```
 sed -i "s/^$1=[^ ]*/$1=$2/" $3 
```

注意`^`前面的`$1`。此正则表达式运算符将表达式锚定到行首，有效地要求名称是从第一个字符到`=`符号的所有内容。还有一个称为行尾的锚`$`（您在这里不需要）。

# azure - Windows Phone 上的 Azure 服务总线中继

> ID：10564405
> 
> 赞同：1
> 
> 时间：2012-05-12T14:00:43.003
> 
> 标签：azure, windows-phone-7.1, servicebus

我有一个通过 Windows azure 中继的客户端/服务器应用程序。这在服务器和客户端都使用控制台应用程序时效果很好。

现在我想使用 Windows Phone 作为客户端，但由于某种原因，我无法调用服务总线。我无法添加 Web 引用，当在浏览器中定位 url 时，我收到以下消息：

```
<s:Fault xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><faultcode xmlns:a="http://schemas.microsoft.com/ws/2005/05/addressing/none">a:ActionNotSupported</faultcode><faultstring xml:lang="nl-NL">The message with Action 'GET' cannot be processed at the receiver, due to a ContractFilter mismatch at the EndpointDispatcher. This may be because of either a contract mismatch (mismatched Actions between sender and receiver) or a binding/security mismatch between the sender and the receiver.  Check that sender and receiver have the same contract and the same binding (including security requirements, e.g. Message, Transport, None).</faultstring></s:Fault> 
```

我在服务器 app.config 中输入了以下代码：

```
// sb:// binding
            Uri sbUri = ServiceBusEnvironment.CreateServiceUri("sb", serviceNamespace, "blabla");
            var sbBinding = new NetTcpRelayBinding(EndToEndSecurityMode.Transport, RelayClientAuthenticationType.None);
            serviceHost.AddServiceEndpoint(typeof(IMyContract), sbBinding, sbUri);

            // https:// binding (for Windows Phone etc.)
            Uri httpsUri = ServiceBusEnvironment.CreateServiceUri("https", serviceNamespace, "https/" + "blabla");
            var httpsBinding = new BasicHttpRelayBinding(EndToEndBasicHttpSecurityMode.Transport, RelayClientAuthenticationType.None);
            serviceHost.AddServiceEndpoint(typeof(IMyContract), httpsBinding, httpsUri); 
```

在打开主机之前，我将端点设置为公开的发现模式。

我还可以或需要做些什么才能使这项工作与 Windows Phone 一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T18:57:14.123

我认为你很接近。据我所知，您无法将网络引用添加到您的手机项目中。虽然通过该路径可以做到这一点，但我不建议努力通过中继公开元数据端点，因为您不会在运行时使用它。相反，将合同引用到您的 Windows Phone 项目中，并使用 BasicHttpBinding 和服务端的 BasicHttpRelatBinding 端点的目标地址创建 ChannelFactory。

据我所知，您已经完成了所有其他设置，包括关闭侦听器上的 ACS，以便您可以在手机上使用常规的 BasicHttpBinding。

编辑：

由于这可能并不完全清楚，这里有一个服务：

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)]
class Program : IEcho
{
    static void Main(string[] args)
    {
        var sh = new ServiceHost(new Program(), 
                    new Uri("http://clemensv.servicebus.windows.net/echo"));
        sh.Description.Behaviors.Add(
             new ServiceMetadataBehavior { 
                   HttpGetEnabled = true, 
                   HttpGetUrl = new Uri("http://localhost:8088/echowsdl")});
        var se = sh.AddServiceEndpoint(typeof(IEcho), 
             new BasicHttpRelayBinding(EndToEndBasicHttpSecurityMode.None, 
                                       RelayClientAuthenticationType.None), String.Empty);
        var endpointBehavior = new TransportClientEndpointBehavior(
               TokenProvider.CreateSharedSecretTokenProvider("owner", "...key ..."));
        se.Behaviors.Add(endpointBehavior);
        sh.Open();
        Console.WriteLine("Service is up");
        Console.ReadLine();
        sh.Close();
    }

    public string Echo(string msg)
    {
        return msg;
    }
} 
```

合同 IEcho 是微不足道的，没有显示。您会注意到，我有一个 ServiceMetadataBehavior 挂在“侧面”，通过 localhost 公开，如果您点击该 URI，它将为您提供 WSDL。您可以将该地址与 Visual Studio 中的“添加 Web 引用”客户端一起使用，以在 Windows Phone 上创建代理；该代理将在手机上使用 BasicHttpBinding。我只是这样做了，它在一个简单的电话应用程序中按预期工作（引用重命名为 MySvc）

```
 private void button1_Click(object sender, RoutedEventArgs e)
    {
        var client = new MySvc.EchoClient();
        client.EchoCompleted += OnClientOnEchoCompleted;
        client.EchoAsync("foo");
    }

    void OnClientOnEchoCompleted(object sender, EchoCompletedEventArgs c)
    {
        this.textBox1.Text = c.Result;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T07:52:09.310

Windows Phone 不支持 sb 协议。所以我们不能使用NetTcpRelayBinding。如果我们想在 Windows Phone 中使用 Service Bus，我们有两个选择：使用 BasicHttpRelayBinding 或 WebHttpRelayBinding。无论哪种情况，我们都需要通过将 RelayClientAuthenticationType 设置为 None 来禁用默认的 ACS 身份验证：http: [//msdn.microsoft.com/en-us/library/windowsazure/microsoft.servicebus.relayclientauthenticationtype.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.servicebus.relayclientauthenticationtype.aspx)。然后在 Windows Phone 上，我们可以使用内置的 BasicHttpBinding 来访问 SOAP 服务，使用 HttpWebRequest 来访问 REST 服务。

最好的祝福，

明旭。

# ios - 如何在我的服务器上注册用户并维护应用内购买状态

> ID：10564407
> 
> 赞同：0
> 
> 时间：2012-05-12T14:01:08.487
> 
> 标签：ios, in-app-purchase

我想让用户使用电子邮件和密码注册，以便我可以在我的 android 应用程序/网站和 PC 软件中提供他的应用程序内购买。（从我的服务器下载）

1A) 你会强迫用户注册吗？

或 1B) 如果他愿意，允许他跳过注册，并且购买仅适用于 Apple 设备。

2) 你如何防止某人通过 Apple 的恢复购买功能在同一设备上重新注册多封电子邮件，然后允许他们的朋友使用这些电子邮件登录并免费获取东西？

编辑-在2）我一直听到人们说将收据存储在服务器上然后检查它，但我从未见过代码。此外，当您恢复购买时，收据是不一样的，所以我不确定您如何知道如何防止用户在恢复购买时注册多个电子邮件。我正在寻找在服务器上实施收据检查的任何人的代码（伪？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T14:24:11.873

1.  我会和B一起去，让他们选择。毕竟，如果他们不打算使用 Android、Web 或 PC 版本，他们为什么要给你他们的电子邮件地址？

2.  就个人而言，我不会阻止人们使用多个电子邮件地址重新注册。是的，有些人会利用它，但归根结底，这些人中的大多数人都不会为此付出代价，所以你并没有真正失去销售。有关更多信息，请参阅[http://torrentfreak.com/piracy-is-theft-ridiculous-lost-sales-they-dont-exist-says-minecraft-creator-110303/](http://torrentfreak.com/piracy-is-theft-ridiculous-lost-sales-they-dont-exist-says-minecraft-creator-110303/)。

# c# - asp.net 缓存 css 和脚本，但不缓存页面

> ID：10564411
> 
> 赞同：1
> 
> 时间：2012-05-12T14:01:58.120
> 
> 标签：c#, asp.net

在 Page_Load 方法的母版页中，我有这一行：

```
Response.Cache.SetCacheability(HttpCacheability.NoCache); 
```

基本上，我不想缓存页面。我确实想缓存 .js 和 .css 文件，但是当我重新加载页面时，这些文件不会从浏览器缓存中加载，而是重新加载。

我需要解决什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T16:01:17.657

在 html 元部分中添加这些行

```
<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
<META HTTP-EQUIV="EXPIRES" CONTENT="0">
<META HTTP-EQUIV="PRAGMA" content="NO-CACHE"> 
```

在 ASP 页面中

```
// Stop Caching in IE
Response.Cache.SetCacheability(System.Web.HttpCacheability.NoCache);

// Stop Caching in Firefox
Response.Cache.SetNoStore(); 
```

本文可用于解决您的问题

[http://www.codeproject.com/Articles/11225/Disabling-browser-s-back-functionality-on-sign-out](http://www.codeproject.com/Articles/11225/Disabling-browser-s-back-functionality-on-sign-out)

PS如果它没有帮助。您可以像这样使用作弊： <%= 在这里您应该添加一些随机数，例如 Ticks %> - 为不应缓存的元素添加它。例如：

```
<link rel=stylesheet href="main.css?<%= ... %>"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T15:43:05.987

您需要为静态资源（.js 和 .css）文件设置缓存。默认情况下不启用此功能。

有关更多详细信息，请参阅此 SO 答案：[https ://stackoverflow.com/a/2196848/69868](https://stackoverflow.com/a/2196848/69868)

另请注意，当您使用 F5/Ctrl+F5 重新加载页面时，某些浏览器将忽略缓存指令，它们将始终获取新内容（例如 Firefox 和 Ctrl+F5）。如果要测试缓存，请通过在位置文本框中重新输入 URL 来重新加载页面。

# c++ - 使用 Visual Studio 10 编译 x64 EMMS

> ID：10564413
> 
> 赞同：1
> 
> 时间：2012-05-12T14:02:09.430
> 
> 标签：c++, visual-studio-2010, assembly

我需要在使用 Visual Studio 2010 编译的 64 位应用程序中执行`EMMS`or`_mm_empty`指令。

这可能吗？

在 64 位模式下`_mm_empty`未解析，不支持内联汇编。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T15:55:28.363

这是指 64 位 Windows 不支持的 MMX 指令。

来自[http://msdn.microsoft.com/en-us/library/ays9ef83.aspx](http://msdn.microsoft.com/en-us/library/ays9ef83.aspx)

**MMX 内部函数使用 __m64 数据类型，它在 x64 处理器上不受支持。**

# javascript - 在 ajax-jquery 函数中传递参数时遇到困难？

> ID：10564418
> 
> 赞同：0
> 
> 时间：2012-05-12T14:02:43.080
> 
> 标签：javascript, ajax, jquery-ui, jquery

我想将**i**的值作为自动建议的参数传递。我的意图是传递从 1960 年至今的**i值。**

```
 <script>

            var i=1960;
            var currentTime = new Date();
            var year = currentTime.getFullYear();
            //document.write("The year is " + year);
            while (i <= year)
            {
                //document.write("The year is " + i);
                //document.write("<br />");

                $("#txtYear").autocomplete([+i], {
                width: 100,
                //multiple: true,
                mustMatch: true,
                matchContains: true,
                //formatItem: formatItem,
                //formatResult: formatResult
                });
                i++;
            }
                      });
                    </script> 
```

请帮帮我。非常感谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T14:09:22.563

您的代码向元素添加了 40 多次自动完成功能！

无论如何，jQuery 自动完成接受数据数组。为什么不事先建立阵列？[这是一个示例](http://jsfiddle.net/JJMTA/)。我不得不说 jQuery 对数据很挑剔。它们必须是字符串。

```
var i = 1960,                          //first year
    currentTime = new Date(),          
    year = currentTime.getFullYear(),  //latest year
    data = [];                         //year array

while (i <= year){                     //construct year array
    data.push(''+i++);                 //minor string conversion by concatenating
}

$("#txtYear").autocomplete({
    source: data                       //use year array
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T14:10:01.750

您首先需要创建一个包含所需值的数组，然后在自动完成中设置它，如下所示：

```
 $( "#tags" ).autocomplete({
        source: years
    }); 
```

# python - lxml 创建没有根元素的 XML 片段？

> ID：10564419
> 
> 赞同：7
> 
> 时间：2012-05-12T14:02:47.073
> 
> 标签：python, xml, lxml

是否可以使用 lxml（或内置的 etree 库）创建一个表示 xml 片段的对象，但包含两个（或更多）不相交的树（即每棵树都有自己独立的根，但它们没有共同的祖先）？

也就是说，是否有任何东西可以代表以下内容而无需创建另一个元素来容纳它们：

```
<tree id="A"><anotherelement/></tree>
<tree id="B"><yetanotherelement/></tree> 
```

我在 lxml 文档中看不到任何允许这样做的内容，并且 stackoverflow 似乎没有任何直接的内容。

**这里的用例是我以编程方式生成 xml，片段将被组装到一个文档中以供输出。我想要一个不需要迭代/特殊情况的对象，只需传递给 lxml 方法，就好像它是一棵正确的树一样。**

（我知道这样的片段本身不会是一个完整和正确的 xml 文档；我想在组装成这样的文档之前存储中间产品）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T18:57:06.993

是的，`lxml.html`包中有这样一个功能，它被称为`fragment_fromstring`or `fragments_fromstring`，但在大多数情况下，html 解析器也可以很好地处理 xml：

```
from lxml import etree, html

xml = """
    <tree id="A"><anotherelement/></tree>
    <tree id="B"><yetanotherelement/></tree>
"""

fragments = html.fragments_fromstring(xml)

root = etree.Element("root")
for f in fragments:
    root.append(f)

print etree.tostring(root, pretty_print=True) 
```

输出：

```
<root>
  <tree id="A">
    <anotherelement/>
  </tree>
  <tree id="B">
    <yetanotherelement/>
  </tree>
</root> 
```

如果您查看幕后[发生的事情，](https://github.com/lxml/lxml/blob/901c891b37e9bc54834d0ba2396d33612e08b85f/src/lxml/html/__init__.py#L538)如果您对其他结果不满意，使用 xml 解析器执行相同操作可能不会太难。

# php - 自动用数据库信息填充文本框而不离开页面

> ID：10564423
> 
> 赞同：0
> 
> 时间：2012-05-12T14:03:34.897
> 
> 标签：php, javascript, sql, sql-server, ajax

我在一个页面上有几个表格，它们必须通过访问用户 ID 自动填写，然后用必要的信息填充其余的文本框。本质上是表单的自动填写，具体取决于在第一个文本框中输入的 RFID。

```
<html>
<head>
<?php
$con = mssql_connect("123", "abc", "pass");
if (!$con)
  {
 die('Could not connect: ' . mssql_get_last_message());
  }

mssql_select_db("db1", $con);

$result = mssql_query("SELECT * FROM Scrabble");
$row = array("RFID" => "", "Tile" => "", "TileScore" => "");

$row = mssql_fetch_row($result)

?>
</head>
<body>
    <form>
    <input type="text" name="RFID1"/> 
    <input type="text" name="Tile1"/> 
    <input type="text" name="TileScore1"/> 
    <input type ="button" value="submit" onclick="RFID1.disabled=true" />

    <td><input type="text" name="RFID2"/> 
    <input type="text" name="Tile2"/> 
    <input type="text" name="TileScore2"/> 
    <input type ="button" value="submit" onclick="RFID2.disabled=true" />

    <input type="text" name="RFID3"/> 
    <input type="text" name="Tile3"/> 
    <input type="text" name="TileScore3"/> 
    <input type ="button" value="submit" onclick="RFID3.disabled=true" />
    <form>
 </body>
 </html> 
```

我需要它从 RFID 与文本框中输入的内容相同的地方获取 Tile 和 TileScore。这是否可能无需提交页面以允许填写其他表格？我被告知使用 AJAX 可能是可能的，但我不知道有解决方案。

这是使用 MSSQL，遗憾的是没有 MSSQL 标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T14:10:45.753

由于您试图根据页面上另一个文本字段的输入来填充页面上的文本字段，因此您需要 AJAX 或将文本字段的所有可能性从 PHP (ew) 转储到页面上的 javascript 变量中。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

让它调用一个 PHP 脚本，该脚本返回一个 JSON 对象，该对象包含基于 RFID 文本字段的字段数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T03:42:28.320

## 免责声明

我假设您希望页面运行的方式是用户在`RFID`文本字段中键入。

为了使代码更简单、更灵活，我将三个类似表单的段更改为三个单独的表单。这还有一个额外的好处，如果浏览器不支持 JavaScript，页面会退回到提交表单。

我无法理解 SQL，所以我只是将其注释掉。

我还在整个页面中添加了一些额外的 PHP，以便在 javascript 不可用的情况下，提交的页面仍将正确响应表单。

要添加您的 SQL 查询代码，只需确保将结果`Tile`和`TileScore`分别放在变量`$tile`和`$tileScore`中。

## 代码

```
<?php
/*
function sqlStuff(){
$con = mssql_connect('123', 'abc', 'pass');
if(!$con){die('Could not connect: ' . mssql_get_last_message());}
mssql_select_db('db1', $con);
$result = mssql_query('SELECT * FROM Scrabble');
// Why is the following here?
$row = array('RFID' => '', 'Tile' => '', 'TileScore' => '');
$row = mssql_fetch_row($result)
}
*/
$rfid=$_GET['RFID'];
$tile='Tile for "'.$rfid.'"';
$tileScore='TileScore for "'.$rfid.'"';

$separ='/'; //separator

// if this is an ajax request do the following, if not print the page as normal
if($_GET['r']=='ajax'){
    $ajaxString=$separ.$tile;
    $ajaxString.=$separ.$tileScore;
    echo $ajaxString;
}else{
// which form was submitted, only used if form was submitted by browser.
$form=$_GET['form'];
// escape quote characters
$rfid=htmlentities($rfid);
$tile=htmlentities($tile);
$tileScore=htmlentities($tileScore);
?><?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>live-submitting form using javascript!</title>
<style type="text/css">
/*<![CDATA[*/
body{font:80% sans-serif;}
/*]]>*/
</style>
<script type="text/javascript">
//<![CDATA[
    window.onload=load;
    function load(){
        document.getElementById('form1').onsubmit=function(){if(submitWithJS(this)){return false;}};
        document.getElementById('form2').onsubmit=function(){if(submitWithJS(this)){return false;}};
        document.getElementById('form3').onsubmit=function(){if(submitWithJS(this)){return false;}};
    }

    function submitWithJS(thisForm){
        // setup ajax object
        var httpReq;
        if(window.XMLHttpRequest){// Non-IE
            httpReq=new XMLHttpRequest();
        }else if(window.ActiveXObject){ // IE
            try{httpReq=new ActiveXObject("Msxml2.XMLHTTP");}
            catch(e){
                try{httpReq=new ActiveXObject("Microsoft.XMLHTTP");}
                catch(e){
                    return false; // some other IE check?
                }
            }
        }else{
            return false; // submit without ajax
        }
        // Actual code:
        httpReq.onreadystatechange=function(){
            // basically readyState 4 is when reply is recieved
            if(this.readyState==4){responder(this,thisForm);}
        }
        // prepare args
        //beware "arguments" is a keyword
        var args="?r=ajax"; // type of request
        args+="&RFID="+thisForm.RFID.value;
        // begin request
        httpReq.open("GET",args);
        httpReq.send();
        return true;
    }
    function responder(httpResponse,form){
        // use the $separ variable from PHP
<?php echo '        var separator="'.$separ.'";'."\n";?>
        if(httpResponse.responseText[0]==separator){
            var returned=httpResponse.responseText.split(separator); // separation
            form.Tile.value=returned[1];
            form.TileScore.value=returned[2];
        }else{form.submit();}
    }
//]]>
</script>
</head>
<body>
<p class="notice">javascript required to use more than one form</p>
<form method="get" action="" id="form1">
<div>
<input type="hidden" name="form" value="1"/>
<input type="text" name="RFID"<?php if($form==1){echo ' value="'.$rfid.'"';}?>/>
<input type="text" readonly="readonly" name="Tile"<?php if($form==1){echo ' value="'.$tile.'"';}?>/>
<input type="text" readonly="readonly" name="TileScore"<?php if($form==1){echo ' value="'.$tileScore.'"';}?>/>
<input type ="submit" value="submit"/>
</div>
</form>
<form method="get" action="" id="form2">
<div>
<input type="hidden" name="form" value="2"/>
<input type="text" name="RFID"<?php if($form==2){echo ' value="'.$rfid.'"';}?>/>
<input type="text" readonly="readonly" name="Tile"<?php if($form==2){echo ' value="'.$tile.'"';}?>/>
<input type="text" readonly="readonly" name="TileScore"<?php if($form==2){echo ' value="'.$tileScore.'"';}?>/>
<input type ="submit" value="submit"/>
</div>
</form>
<form method="get" action="" id="form3">
<div>
<input type="hidden" name="form" value="3"/>
<input type="text" name="RFID"<?php if($form==3){echo ' value="'.$rfid.'"';}?>/>
<input type="text" readonly="readonly" name="Tile"<?php if($form==3){echo ' value="'.$tile.'"';}?>/>
<input type="text" readonly="readonly" name="TileScore"<?php if($form==3){echo ' value="'.$tileScore.'"';}?>/>
<input type ="submit" value="submit"/>
</div>
</form>
</body>
</html>
<?php }?> 
```

# delphi - Delphi XE2 IdTCPClient - 如何接收数据？

> ID：10564424
> 
> 赞同：-1
> 
> 时间：2012-05-12T14:03:39.217
> 
> 标签：delphi, indy

仅使用了 IdTCPClient。（服务器是网络聊天。那不是我的服务器）

EX) Winsock.GetData -> IdTCPClient.??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T14:37:57.150

使用socket属性，它有很多接收数据的功能，从“读取”开始。

像这样：

```
DataAsString := IDTCPClient1.IOHandler.ReadLn; 
```

# android - Mac OS X 经常与 Android 模拟器崩溃

> ID：10564428
> 
> 赞同：2
> 
> 时间：2012-05-12T14:04:08.757
> 
> 标签：android, eclipse, android-emulator, adt

我在 Mac OS X 上使用 Eclipse ADT，在使用 Android 模拟器时，我的 Mac 经常崩溃并请求关闭电源并重新启动。

我在用：

Mac OS X 10.7.4

日蚀靛蓝

ADT 18.0.0

所有软件都会在适当的时候更新到最新版本。

是否有人成功地在相同条件下工作或面临类似问题？请给我建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T20:28:26.853

**更新**：这对我不起作用......几个小时后我遇到了同样的崩溃。 **我现在安装了 Eclipse 4.2**，它很稳定，到目前为止它和模拟器都像冠军一样工作。

* * *

我现在正在尝试这个......将看看它是否会在接下来的一两天内有所作为。（Eclipse 靛蓝 3.7.2，Mac OSX 10.7.4）

从[第 19099 期开始](http://code.google.com/p/android/issues/detail?id=19099)：

> 在 eclipse.ini 中，我使用了以下值：

```
--launcher.XXMaxPermSize
256m
-Xms256m
-Xmx1024m 
```

*问题报告中的原始条目与 --launcher.XXMaxPermSize 在同一行上有“256m”，但 1) 看起来不正确，2) 导致 Eclipse 对我崩溃。到目前为止，移动到新行（就像在此更改之前一样）是可以的。

# c - GTK 页面内容小部件

> ID：10564429
> 
> 赞同：0
> 
> 时间：2012-05-12T14:04:18.583
> 
> 标签：c, gtk

在 Evince 文档查看器和 LibreOffice 上可以看到的“页面”小部件的名称是什么？我指的是文本区域/绘图区域后面的小部件，它看起来像一张纸。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T15:22:42.543

在埃文斯，那将是[`EvView`](http://developer.gnome.org/libevview/stable/libevview-ev-view.html).

在 LibreOffice 中，这将是完全不同的东西，可能是某种跨平台小部件。

# struts2 - 在 Struts2 中创建多个动作

> ID：10564430
> 
> 赞同：1
> 
> 时间：2012-05-12T14:04:22.930
> 
> 标签：struts2

如何在单个动作类中在 Struts2 中创建多个动作？请举例？我在搜索互联网时发现了以下代码，但它给出了错误或者我是否需要为每个请求编写单独的操作类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T15:53:38.457

除了@Quaternion 所说的，S2 动作本身就是 java 类，我不确定你在问什么（Struts2 中的多个动作在单个动作类中）。

我们有几种使用单个 S2 动作类的方法，这里只介绍几种

映射具有不同别名的单个动作类。

```
<action name="A" class="MyActionClass">
  <result type="redirectAction">Menu</result>
  <result name="input">/Logon.jsp</result>
</action>

<action name="B" class="MyActionClass">
  <result type="redirectAction">Menu</result>
  <result name="input">/Logon.jsp</result>
</action> 
```

但我相信您想将不同的操作请求映射到不同的操作方法。S2 提供了一种方法来定义任意数量的方法，我们可以告诉 S2 从 UI 调用哪个动作类的哪个方法。

例如，假设我们有一个 UserAction 类，它负责处理用户交互，例如

1.  登录
2.  登出
3.  登记

为此，我们不需要创建不同的动作类，但我们可以创建一个动作类，比如 UserAction，并且可以在其中定义不同的方法，并且可以配置 S2 以调用不同的方法，例如

```
<action name="Logon" class="UserAction" method="logon">
  <result type="redirectAction">Menu</result>
  <result name="input">/Logon.jsp</result>
</action>

<action name="Logout" class="UserAction" method="logout">
  <result type="redirectAction">Menu</result>
  <result name="input">/Logon.jsp</result>
</action>

<action name="Register" class="tUserAction" methood="register">
  <result type="redirectAction">Menu</result>
  <result name="input">/Logon.jsp</result>
</action> 
```

希望这可以帮助您消除疑虑

在上述用例`MyActionClass`中，已使用两个别名 A 和 B 进行映射，您可以映射到任何数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T04:51:29.873

我得到了您的确切问题，您想根据选择的操作（例如在单个位置添加/编辑/删除代码）在单个操作中编写多个重定向。您应该根据您的要求寻找[DispatchAction](http://struts.apache.org/1.2.x/api/org/apache/struts/actions/DispatchAction.html)。

以下是您可以查看的几个示例，所有示例都提供了如何实现 DispatchAction。

[链接1 链接2](http://www.vaannila.com/struts/struts-example/struts-dispatch-action-example-1.html) [链接](http://www.vaannila.com/struts/struts-example/struts-lookup-dispatch-action-example-1.html) [3](http://www.roseindia.net/struts/struts-dispatch-action.shtml)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T07:33:11.357

**另一种方法：**

这是具有 3 个动作（执行、动作 1、动作 2）的动作类

```
public class MyAction extends ActionSupport{

   public String execute(){
     return SUCCESS;
   }

   public String action1(){
     return SUCCESS;
   }

   public String action2(){
     return SUCCESS;
   }
} 
```

这是配置：

```
<action name="myAction" class="MyAction">
  <result>showMe.jsp</result>
  <result name="input">showMe.jsp</result>
</action> 
```

默认情况下将调用“执行”操作。要调用动作“action1”或“action2”，您必须在请求中输入名称为“method:action1”或“method:action2”的参数。

*   **调用默认操作（执行）：** /path_to_action/myAction.action
*   **调用 action1：** /path_to_action/myAction.action ?method:action1
*   **调用 action2：** /path_to_action/myAction.action ?method:action2

您可以更改默认方法：

```
<action name="myAction" class="MyAction" method="action1">
  <result>showMe.jsp</result>
  <result name="input">showMe.jsp</result>
</action> 
```

因此，当您调用 /path_to_action/myAction.action 时，将执行 action1。

# java - 模拟手机

> ID：10564436
> 
> 赞同：-3
> 
> 时间：2012-05-12T14:05:15.910
> 
> 标签：java, java-me, ios-simulator, emulation, simulator

考虑到我们有一个`Java Application`，有没有模拟手机环境的插头？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T14:08:05.130

不。J2ME 有一个不同的 JVM，它是标准 JVM 的精简版，因此许多类不能在 J2ME 上运行。

# c# - VB.NET 奇怪的 IF 语句行为，总是其他

> ID：10564438
> 
> 赞同：1
> 
> 时间：2012-05-12T14:05:50.763
> 
> 标签：c#, .net, vb.net, clr, nullable

我已经尝试过这两个块，但它返回相同的值。我不再赘述，我只是展示代码：

```
 Dim f As Nullable(Of Integer)
    If f = 1 Then
        Console.WriteLine("Equal")
    Else
        Console.WriteLine("Not Equal")
    End If 
```

它提示我“不相等”

我只是添加了一个NOT，我希望得到NOT答案，但我得到的和上面一样！！！

```
 Dim f As Nullable(Of Integer)
    If Not f = 1 Then
        Console.WriteLine("Equal")
    Else
        Console.WriteLine("Not Equal")
    End If 
```

它在 C# 中正确工作...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T14:08:26.583

TL;DR：它根据为 VB 指定的行为正常工作，这与为 C# 指定的行为不同。

比较“f = 1”`Nullable(Of Boolean)`在 VB 中产生 a。将任何值与 Nothing 进行比较的结果是 Nothing，Nothing 和“Not Nothing”都不是“True”，所以你总是会在 Else 子句中结束。

有关更多详细信息，请参阅[MSDN 页面以了解 VB 中的可为空值类型](http://msdn.microsoft.com/en-us/library/ms235245.aspx)。特别是，如果您查找“比较可空类型”，您会发现一个与您的情况非常相似的示例（带有解释）。尤其：

> 当布尔变量或表达式的值为 Nothing 时，它既不是真也不是假。

# javascript - 如何在javascript中找到嵌套数组的最大值/最小值？

> ID：10564441
> 
> 赞同：32
> 
> 时间：2012-05-12T14:06:03.050
> 
> 标签：javascript, d3.js

我想找到嵌套数组的最大值，如下所示：

```
a = [[1,2],[20,3]]
d3.max(d3.max(a)) // 20 
```

但我的数组包含一个我想丢弃的文本字段：

```
a = [["yz",1,2],["xy",20,3]]
d3.max(a) // 20 
```

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-05-12T20:15:26.657

如果您有一个嵌套的数字数组 ( `arrays = [[1, 2], [20, 3]]`)，请嵌套[d3.max](https://github.com/mbostock/d3/wiki/Arrays#wiki-d3_max)：

```
var max = d3.max(arrays, function(array) {
  return d3.max(array);
}); 
```

或者等效地，使用[array.map](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/map)：

```
var max = d3.max(arrays.map(function(array) {
  return d3.max(array);
})); 
```

如果要忽略字符串值，可以使用[array.filter](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/filter)忽略字符串：

```
var max = d3.max(arrays, function(array) {
  return d3.max(array.filter(function(value) {
    return typeof value === "number";
  }));
}); 
```

或者，如果您知道字符串始终位于第一个位置，则可以使用更高效的[array.slice ：](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/slice)

```
var max = d3.max(arrays, function(array) {
  return d3.max(array.slice(1));
}); 
```

另一种选择是使用访问器函数，该函数返回`NaN`不是数字的值。这将导致 d3.max 忽略这些值。方便的是，JavaScript 的内置`Number`函数正是这样做的，所以你可以说：

```
var max = d3.max(arrays, function(array) {
  return d3.max(array, Number);
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-12T14:25:10.057

用这个：

```
function arrmax(arrs) {
    var toplevel = [];

    var f = function(v) {
        return !isNaN(v);
    };

    for (var i = 0, l = arrs.length; i<l; i++) {
        toplevel.push(Math.max.apply(window, arrs[i].filter(f)));
    }
    return Math.max.apply(window, toplevel);
} 
```

或更好：

```
function arrmax(arrs) {
    if (!arrs || !arrs.length) return undefined;
    var max = Math.max.apply(window, arrs[0]), m,
        f = function(v){ return !isNaN(v); };
    for (var i = 1, l = arrs.length; i<l; i++) {
        if ((m = Math.max.apply(window, arrs[i].filter(f)))>max) max=m;
    }
    return max;
} 
```

有关 Array.filter 方法的详细信息，请参阅[MDN](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/filter)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-12T15:19:20.593

您可以展平数组并将函数应用于每个成员

```
Array.prototype.flatten= function(fun){
    if(typeof fun!= 'function') fun= '';
    var A= [], L= this.length, itm;
    for(var i= 0; i<L; i++){
        itm= this[i];
        if(itm!= undefined){
            if(!itm.flatten){
                if(fun) itm= fun(itm);
                if(itm) A.push(itm);
            }
            else A= A.concat(itm.flatten(fun));
        }
    }
    return A;
}

var a= [["yz", 1, 2], ["xy", 20, 3]], max=-Infinity;

var max=Math.max.apply(a, a.flatten(Number)); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-08T12:00:20.777

如果您现在确切地想要测试哪些列，您可以使用：

```
var columns = ["ColumnA", "ColumnB", "ColumnC"];

var max = selectedMax(columns,dataset);
var min = selectedMin(columns,dataset)

function selectedMax(columns, dataset) {
    var max;
    columns.forEach(function(element, index, array) {
        var tmpmax = d3.max(dataset, function(d) {
            return +d[element];
        });       
        max = (tmpmax > max || max === undefined) ? tmpmax : max;
    });
    return max;
}

function selectedMin(columns, dataset) {
    var min;
    columns.forEach(function(element, index, array) {
        var tmpmin = d3.min(dataset, function(d) {
            return +d[element];
        });
        min = (tmpmin < min || min === undefined) ? tmpmin : min;
    });  
return min;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-12T14:19:26.660

这是一个残酷的黑客攻击，但是查看 的[源代码](https://github.com/mbostock/d3/blob/master/src/core/max.js)，`d3.max`您最好的选择可能是定义 a`d3.max1`通过复制该代码丢弃第一个元素，但替换`i=-1`为`i=0`. 该链接上的代码摘录在这里。请注意，我不是 d3.js 的普通用户，但根据我对库的了解，您需要确保您的版本具有`f.call`与此功能类似的案例，以便它可以正确响应实时更新。

```
d3.max = function(array, f) {
  var i = -1,
      n = array.length,
      a,
      b;
  if (arguments.length === 1) {
    while (++i < n && ((a = array[i]) == null || a != a)) a = undefined;
    while (++i < n) if ((b = array[i]) != null && b > a) a = b;
  } else {
    while (++i < n && ((a = f.call(array, array[i], i)) == null || a != a)) a = undefined;
    while (++i < n) if ((b = f.call(array, array[i], i)) != null && b > a) a = b;
  }
  return a;
}; 
```

那么它只是`d3.max(d3.max1(a))`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-16T15:35:19.193

[`d3.array`](https://github.com/d3/d3-array)提供了[`d3.merge`](https://github.com/d3/d3-array/blob/master/README.md#merge)使数组变平的方法。

再加上[`d3.max`](https://github.com/d3/d3-array/blob/master/README.md#max)javascript`Number`作为访问器：

```
var max = d3.max(d3.merge(arrays), Number); 
```

例如：

```
var input = [["yz", 1, 2], ["xy", 20, 3]];

var max = d3.max(d3.merge(input), Number);

console.log(max);
```

```
<script src="https://d3js.org/d3-array.v2.min.js"></script>
```

# php - 避免一直将变量传递给类

> ID：10564443
> 
> 赞同：1
> 
> 时间：2012-05-12T14:07:08.983
> 
> 标签：php, oop, static, global-variables

我正在用 PHP5 创建一个网络应用程序。到目前为止，我有两个“全局”变量：$input 和 $sql。$input 是来自 $_GET、$_POST 和 $_COOKIE 的经过验证和清理的输入。$sql 是我的 mysql(i) 类的一个实例。

几乎所有其他课程都需要这两个。这可以通过将它们作为参数传递给每个类的 __construct 函数来相对容易地实现。但这似乎……笨拙。除了更多的类特定参数和潜在的未来全局变量外，它还提供了笨拙的函数调用。

据我了解，简单且 noobie 的替代方法是使用 global 关键字。我不想那样做。我得到了全局变量的缺点，尽管在我的场景（小应用程序）中它们并不重要。但是在再次使用它们之前明确地将它们标记为全局也很笨拙。

我想一种更优雅的方式：我有一个 webapp 类，我从中扩展了所有其他类。这个 webapp 类包含我在多个其他类中需要的常用功能，但不保证单独的类。如果我将 $input 和 $sql 作为静态变量存储在这个 webapp 主类中，它们将可以在所有子类中访问。但我知道静态变量与全局变量一样多，如果不是更多的话。

真的吗？我想我是那些想太多所有事情的人之一，但我喜欢优雅的代码，这在我（业余）眼中看起来很优雅。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T14:10:12.417

> 到目前为止，我有两个“全局”变量

呸！全局变量很糟糕。:-)

> $input 是来自 $_GET、$_POST 和 $_COOKIE 的经过验证和清理的输入

你为什么要把它变成全球性的。只需在您真正要使用它时进行消毒/标准化/任何事情。

> $sql 是我的 mysql(i) 类的一个实例。

再说一遍：没有必要把它变成全球性的。使用[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)。

> 据我了解，简单且 noobie 的替代方法是使用 global 关键字。我不想那样做。

你是对的：你不想那样做。

> 我想一种更优雅的方式：我有一个 webapp 类，我从中扩展了所有其他类。

这听起来也不太正确。一个类具有特定的功能（/职责）。

> 但我知道静态变量同样不受欢迎

静态的东西只是具有不同名称的全局变量。

如果你确实想让你的生活更轻松，你可以实现一个[依赖注入容器](http://martinfowler.com/articles/injection.html)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-12T14:12:11.743

[http://php.net/manual/en/language.oop5.patterns.php](http://php.net/manual/en/language.oop5.patterns.php)

此链接描述了单例模式，它是提供类的单个全局实例的OO方式。我敢肯定这已经足够优雅了，因为否则你会为了子类化而进行子类化，而不是要求它们作为参数传递。这就是我会做的:)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-12T14:14:51.430

我个人会在这个例子中使用单例。单例可能会令人不悦，但是在正确的情况下使用它们是完全可以的。

我会将您的“WebApp”类创建为单例，这意味着无论您需要这些变量，您都可以简单地访问“WebApp”。

如果您以前从未使用过单音，这里有一个示例：

```
class WebApp
{
    private static $instance = null;
    private $post_data = array();

    private function WebApp(){}

    public static function instance(){
        if(!isset(WebApp::$instance))
            WebApp::$instance = new WebApp();
        return WebApp::$instance;
    }
}

print_r(WebApp::instance()->post_data); 
```

# php - 在 html 中创建具有不同名称的动态控件

> ID：10564444
> 
> 赞同：1
> 
> 时间：2012-05-12T14:07:32.660
> 
> 标签：php, html, radio-button

我正在 HTML 中创建单选按钮。我正在从 SQL 数据库获取数据。我正在创建一个出席表单，在该表单中，**`student name,Present Radio button ,Absent Radio button.`** 我将“出席”和“缺席”单选按钮放在一个组中，（这样只能单击一个。问题是我不能创建多个广播组..我的代码是

```
<html>
<tr>
<td><?php echo $i;?></td> // Serial Number
<td> <label><?php echo $att['std_name'];?></label></td> //student name
<td><input type="radio" name="std_r[]" id="std_r[]"></td> // for present
<td><input type="radio" name="std_r[]" id="std_c[]"></td> // for absent
<td><input type="hidden" value="<?php echo $att['rollnum'];?>" > </td> //hidden field that will take roll number of student on next page

</tr>
</html>
<?php 
```

我希望每个学生都应该有一组单独的单选按钮。这就是为什么我要创建具有不同名称的按钮。任何可以帮助我的人谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T14:18:31.077

我想您要问的是同一页面中有几个学生，每个学生都有自己的出席/缺席选项。

你应该这样做：

```
<input type="radio" name="test[1]" value="present" />
<input type="radio" name="test[1]" value="absent" />

<input type="radio" name="test[2]" value="present" />
<input type="radio" name="test[2]" value="absent" />

<input type="radio" name="test[3]" value="present" />
<input type="radio" name="test[3]" value="absent" /> 
```

您也可以将 student_id 指定为索引，这将更容易在 PHP 中处理：

```
<input type="radio" name="test[33888]" value="present" />
<input type="radio" name="test[33888]" value="absent" />

<input type="radio" name="test[90909]" value="present" />
<input type="radio" name="test[90909]" value="absent" /> 
```

# ruby-on-rails - 如何使用 Test::Unit 在 Rails 中存根/模拟 original_filename 方法

> ID：10564446
> 
> 赞同：0
> 
> 时间：2012-05-12T14:07:33.353
> 
> 标签：ruby-on-rails, ruby, unit-testing, testing

我正在编写一个文件下载测试，在此期间我使用的是 original_filename。我能够使用`fixture_file_upload`. 但是如何存根/模拟 original_filename 调用。

```
def import_for_photo(picture_url, user)
  remote_photo = open(picture_url)
  remote_photo.original_filename = "#{user.id}.jpg"
  user.update_attributes({:picture => remote_photo})
end 
```

考试

```
def test_import_for_photo
  fixture_file = fixture_file_upload(File.join('files', 'test.jpg'), 'image/jpeg')
  OpenURI.expects(:open_uri).returns(fixture_file)
  import_for_photo("http://dummy_url.com/dummy.jpg", users(:one))
  assert_equal "1.jpg", users(:one).reload.picture_file_name
end 
```

测试输出，

```
NoMethodError: undefined method `original_filename=' for #<File:/tmp/test.jpg20120512-4253-x673nc-0> 
```

我知道为什么这个测试失败了，但是如何解决呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T19:37:03.720

您应该考虑使用 mocha 进行存根，或者更好（在我看来）切换到使用 rspec-rails。它们有很好的模拟/存根工具，它们允许您进行更好的测试，使用更简洁的语法，并为您的测试文件结构提供更多的组织。

这些 gem 中的每一个都有关于如何模拟/存根调用的现成文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T19:53:10.260

找到了解决方案。我没有尝试存根`:original_filename`，而是存根`:original_filename=`（注意'='）并且我的问题解决了！

这是代码

```
def test_import_for_photo
  fixture_file = fixture_file_upload(File.join('files', 'test.jpg'), 'image/jpeg')
  fixture_file.expects(:original_filename=)
  OpenURI.expects(:open_uri).returns(fixture_file)
  import_for_photo("http://dummy_url.com/dummy.jpg", users(:one))
  assert_equal "1.jpg", users(:one).reload.picture_file_name
end 
```

# c# - 删除一对多关系中的相关实体

> ID：10564452
> 
> 赞同：2
> 
> 时间：2012-05-12T14:08:24.193
> 
> 标签：c#, entity-framework, entity-relationship, one-to-many

我有这个域：

```
public class Phone {
    public int Id { get; set; }
    public string Number { get; set; }
    public Person Person { get; set; }
}
public class Person {
    public int Id { get; set; }
    public IList<Phone> Phones { get; set; }
} 
```

我加载`Person`并清除它的`Phones`. 但是操作会报错：

```
// actually loads person from repository...
var person = _personRepository.Include(p => p.Phones).Where(p => p.Id == 1).First();
person.Phones.Clear();
_personRepository.Update(person); 
```

上面你可以看到加载 a`Person`和清除它的简单逻辑`Phones`。但是会出现这个错误：

> 操作失败：无法更改关系，因为一个或多个外键属性不可为空。当对关系进行更改时，相关的外键属性将设置为空值。如果外键不支持空值，则必须定义新关系，必须为外键属性分配另一个非空值，或者必须删除不相关的对象。

实际上我想清除所有`Person.Phones`并添加一些新项目。但我想在一个查询中清除它们，而不是一一删除。

你有什么想法吗？你能帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T16:22:17.943

您不能在 EF 中生成基于集合的 SQL。因此，在 EF 中无法生成单个 SQL 语句来删除`Phone`给定的所有记录`Person.Id`。

您可以自己编写 SQL 并将其传递给[ObjectContext.ExecuteStoreCommand](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.executestorecommand.aspx)或[DbContext.Database.ExecuteSqlCommand](http://msdn.microsoft.com/en-us/library/system.data.entity.database.executesqlcommand%28v=VS.103%29.aspx)，具体取决于您的模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T17:15:27.730

```
foreach(var phone in person.Phones)
{
   context.DeleteObject(phone);
}
person.Phones.Clear(); 
```

可能会有所帮助。

# php - 找出大海捞针的数量

> ID：10564456
> 
> 赞同：0
> 
> 时间：2012-05-12T14:08:49.660
> 
> 标签：php, strpos

我需要找出一根针在大海捞针中出现的次数。到目前为止，我已经整理了以下代码：

```
<?php

$haystack = 'http://www.google.com';
$needle = 'a';
$contents = file_get_contents($haystack);

?> 
```

我想找出“a”（针）出现在 $contents（haystack - google.com 的源代码）中的次数。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T14:10:46.730

[`substr_count`](http://php.net/manual/en/function.substr-count.php)就是你要找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-02T03:11:25.367

[我在http://cscircles.cemc.uwaterloo.ca/8-remix/](http://cscircles.cemc.uwaterloo.ca/8-remix/)上为在线 CSC 滑铁卢课程回答了同样的问题

```
needle = 'sses'
haystack = 'assesses'
count = 0
if needle in haystack:
    index = haystack.index(needle)
    string1 = haystack[index:len(needle) + index]
    for position in range(0,len(haystack)):
        if haystack[position:len(needle) + position] == string1:
            count += 1
print (count) 
```

...输出为 2。

对于跨巴拿马香蕉...产量为 6

对于 o pneumonoultramicroscopicsilicovolcanoconiosis ...输出为 9

# javascript - JavaScript括号中的逗号分隔数字/函数？

> ID：10564463
> 
> 赞同：4
> 
> 时间：2012-05-12T14:10:07.927
> 
> 标签：javascript, dot.js

我从[doT.js](https://github.com/olado/doT)读了[一行](https://github.com/olado/doT/blob/e86a9681f770bc99ef562dada4884ebb5dee8e28/doT.js#L28)：

```
var global = (function(){ return this || (0||eval)('this'); }()); 
```

[缩小](https://github.com/olado/doT/blob/e86a9681f770bc99ef562dada4884ebb5dee8e28/doT.min.js)后：

```
l=function(){return this||(0,eval)("this")}(); 
```

那么是什么`(0,eval)`，我的意思是逗号有什么作用？

我在 Chrome 的控制台中玩过`(0,1)`, `(2,1)`, `(2,{})`,`2,1`等，它总是返回最后一个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T14:17:58.830

逗号运算符计算两者并始终返回最后一个。和你说的差不多。

您可以阅读逗号运算符：http: [//javascriptweblog.wordpress.com/2011/04/04/the-javascript-comma-operator/](http://javascriptweblog.wordpress.com/2011/04/04/the-javascript-comma-operator/)

即使我不知道 (0||eval) 的目的... (0,eval) 是等效的并且少一个字符。

# umbraco - 实现语言选择器

> ID：10564466
> 
> 赞同：1
> 
> 时间：2012-05-12T14:10:19.950
> 
> 标签：umbraco, multilingual, umbraco5

我有一个网站有两种语言，en-GB 和 fr-FR。我的网站结构如下

家

---zh

------子页面

---fr

------子页面

我想实现一个语言选择器，以便用户也可以在他想要这个页面的页面上选择英语或法语，任何想法如何实现它。我正在使用 Umbraco 5

问候 n 谢谢，

雪儿

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:32:44.680

我认为最好的方法是向您的文档类型添加一个属性（可能是下拉列表数据类型），该属性将为每个文档保存一个特殊的关键字。例如：创建具有属性“关键字”的文档类型，这将是文档其余部分的主文档类型，当您创建新文档时，将关键字设置为您想要的任何内容。然后您可以搜索想要的页面并根据关键字进行导航。

# c# - 返回一种以上的数据类型

> ID：10564467
> 
> 赞同：0
> 
> 时间：2012-05-12T14:10:29.070
> 
> 标签：c#, wcf, windows-phone-7, generics, casting

我使用 WCF 从实体框架查询这个，我想在手机客户端使用数据，我可以知道如何从 WCF 函数查询多个数据类型吗？

```
[OperationContract]
string LoginUser(string email, string password); 
```

IService.cs

```
 public string LoginUser(string email, string password)
    {
        string query = @"SELECT VALUE tblUser FROM MyEntities.tblUsers AS tblUser WHERE tblUser.email = @email AND tblUser.password = @password";
        ObjectParameter[] parameters = new ObjectParameter[2];
        parameters[0] = new ObjectParameter("email", email);
        parameters[1] = new ObjectParameter("password", password);

        using (var context = new SteamKingEntities())
        {
            ObjectQuery<string> results = context.CreateQuery<string>(query, parameters);
            foreach (string result in results)
            {
                if (result != null)
                {
                    return result;
                }
            }
        }
        return null;
    } 
```

IService.svc.cs

```
 public Login()
    {
        InitializeComponent();
        _serviceClient = new Service1Client();
        _serviceClient.LoginUserCompleted += new EventHandler<LoginUserCompletedEventArgs>(_serviceClient_LoginUserCompleted);

    }

    private void loginBtn_Click(object sender, RoutedEventArgs e)
    {
        _serviceClient.LoginUserAsync(txtEmail.Text, txtPassword.Password);
    }

    private void _serviceClient_LoginUserCompleted(object sender, LoginUserCompletedEventArgs e)
    {

        if (e.Error == null && e.Result != null)
        {
            MessageBox.Show("Welcome " + e.Result + "!");
        }
        else
        {
            MessageBox.Show(e.Error.Message + " Couldn't Login, Please try again =D");
        }
    } 
```

登录.xaml.cs

我想从 Entity Framework 返回整个表，并允许我在 Window Phone 端一一处理。

我想我需要对 IService 端做一些修改，但我真的不知道怎么做，因为我是电话开发的新手并且习惯于 Linq to SQL。请您指导我如何为退货制作类似类型的东西，拜托。谢谢你。

**更新**

我得到的错误`There was an error while trying to deserialize parameter http://tempuri.org/:LoginUserResult. Please see InnerException for more details.`

我将代码修改为[WCF 自定义对象](https://stackoverflow.com/questions/1974562/wcf-service-returning-custom-objects)中所述的方式，但我无法反序列化它......我猜问题来自 WP 部分，**我该如何反序列化结果**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T14:19:16.737

您需要使用数据合同：

```
[DataContract]
    public class ReturnType
    {
        [DataMember]
        public string Name { get; set; }

        [DataMember]
        public string Pass { get; set; }
    } 
```

在服务中它看起来像这样：

```
[OperationContract]
    Entities.ReturnType[] SelectTopUser(int countOfTop); 
```

返回类型可以是实体框架类型

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T14:20:43.373

您可以使用[ref](http://msdn.microsoft.com/en-us/library/ms733070.aspx)也可以使用[自定义对象](https://stackoverflow.com/questions/1974562/wcf-service-returning-custom-objects)

# c - 在C中添加字符串的字符

> ID：10564468
> 
> 赞同：0
> 
> 时间：2012-05-12T14:10:41.230
> 
> 标签：c

我有一个编程任务，我们被要求创建一个程序，用户可以在其中输入这种格式 dd/mm/year 的日期。然后我们必须找到一种方法来提取这些数字中的每一个，并将日、月和年字段放入一个结构中。

我想将用户的整个输入作为字符串读取，然后选择我想要的字符串的值。这是我的代码。

结构声明：

```
 struct datestructure{
    char day;
   char month;
   char year;
  };

struct prj{
   int ID;
   struct namestructure name;
   struct datestructure date;
   float price;    

 };

 struct prj project[MAX]; 
```

这是我编写的代码。

```
 char dateinput[11];
 scanf("%s", dateinput);

 printf("%s", dateinput); //making sure that the input is read correctly

 project[n].date.day = dateinput[0]+dateinput[1];

 printf("%s", project[n].date.day ); 
```

但是，这不起作用，我的想法已经不多了。你能给我一些关于如何解决这个问题的指导吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T14:19:05.093

如果要将它们保存为数字，请使用`int`：

```
struct datestructure{
    int day;
    int month;
    int year;
  }; 
```

至于转换，char to int ...

```
project[n].date.day = (dateinput[0] - '0') * 10 + dateinput[1] - '0'; 
```

了解这是如何工作的，并在同一月份和同一年进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T14:21:15.147

以下是一些建议：

1.  考虑将日、月和年的类型更改为 int。
2.  从完整的日期字符串中解析日、月和年
3.  使用系统函数之一（atoi 或 strtol 等）或您自己的逻辑代码将每一天、一月和一年转换为整数。

解析字符串的一些基本示例（只是一个示例供您理解。还有其他更好的方法）：

```
char day[3] = {0};
char month[3] = {0};
char year[5] = {0};

memcpy(day, dateinput,2);
memcpy(month,dateinput+3, 2);
memcpy(year,dateinput+5, 4); 
```

***注意：***上面的代码不处理错误输入，并认为具有个位数的日期和月份将在前面输入 0。例如输入：07/03/2012。注意前面的 0 在 7 和 3 之前。首先你可以这样尝试，然后你自己即兴发挥来处理所有的错误场景。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T14:31:57.013

您可以将 12/05/2012[今天] 作为输入字符串。现在写
i = 0;//考虑日期在 str
printf("%d", str[i]);//得到等价的 ascii char

现在您知道 char 2 的 acii char。从 int 2 的 ascii char 中减去它。存储在一个变量中并在整个数组中减去它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-12T18:53:09.343

您已经在使用`scanf`，它可以做的比您意识到的要多：

```
#include <stdio.h>

struct datestructure {
    int day;
    int month;
    int year;
};

int main() {
    struct datestructure date;
    int count = scanf("%d/%d/%d", &date.day, &date.month, &date.year);
    if (count != 3) {
        printf("Invalid input\n");
    } else {
        printf("You said %d-%d-%d\n", date.year, date.month, date.day);
    }
} 
```

还有`strftime`，这需要更多的努力来使用，但会根据对日历的了解来验证输入。

# c++ - Qt 库链接错误

> ID：10564472
> 
> 赞同：0
> 
> 时间：2012-05-12T14:10:56.957
> 
> 标签：c++, windows, qt

我班上有这个标题

```
#include <windows.h>
#include <mmreg.h>
#include <msacm.h>
#include <wmsdk.h>

#pragma comment(lib, "msacm32.lib")
#pragma comment(lib, "wmvcore.lib")
#pragma comment(lib, "winmm.lib")
#pragma intrinsic(memset,memcpy,memcmp) 
```

当我尝试使用该功能时，`CreateStreamOnHGlobal(mp3HGlobal, FALSE, &mp3Stream);`出现此错误：

```
playlist.obj:-1: error: LNK2019: unresolved external symbol __imp__CreateStreamOnHGlobal@12 referenced in function "public: int __thiscall Playlist::getLengthInSeconds(class QString)" (?getLengthInSeconds@Playlist@@QAEHVQString@@@Z) 
```

我试图添加，`msacm32.lib`但我发现它存在于名称下`MSAcm32.lib`并且 Qt 无法识别它；也与`winmm.lib`，谁有名`WinMM.lib`。我不知道要添加什么，要做什么才能使我的程序正常工作。我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T17:20:32.393

如果通过

> Qt 无法识别

您的意思是链接器错误未解决，以下可能会有所帮助。

根据[http://msdn.microsoft.com/en-us/library/windows/desktop/aa378980(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378980(v=vs.85).aspx)，您还应该链接到`Ole32.lib`for `CreateStreamOnHGlobal`. 如果在添加 ole32.lib 后出现其他链接器错误，快速 google 或 MSDN 搜索将显示哪些 lib 文件丢失。

此外，仅供参考的窗口不区分大小写。

# android - onActivityResult 中的 requestCode 错误

> ID：10564474
> 
> 赞同：348
> 
> 时间：2012-05-12T14:11:30.957
> 
> 标签：android, android-fragments, onactivityresult

我正在从我的片段开始一个新的活动

```
startActivityForResult(intent, 1); 
```

并希望在 Fragment 的父 Activity 中处理结果：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    Log.d(TAG, "onActivityResult, requestCode: " + requestCode + ", resultCode: " + resultCode);
    if (requestCode == 1) {
        // bla bla bla
    }
} 
```

问题是我从来没有收到`requestCode`我刚刚发布到的`startActivityForResult()`.

我得到了类似的东西`0x40001`，`0x20001`设置了随机的更高位。文档对此只字未提。有任何想法吗？

* * *

## 回答 #1

> 赞同：904
> 
> 时间：2012-05-12T14:13:31.563

您正在`startActivityForResult()`从您的`Fragment`. 执行此操作时，拥有 的`requestCode`会更改。`Activity``Fragment`

如果你想`resultCode`在你的活动中得到正确的，试试这个：

改变：

```
startActivityForResult(intent, 1); 
```

到：

```
getActivity().startActivityForResult(intent, 1); 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2016-06-15T13:20:57.593

请求代码没有错。使用 v4 支持库片段时，片段索引编码在请求代码的前 16 位中，您的请求代码在后 16 位中。片段索引稍后用于查找正确的片段以传递结果。

因此，对于从片段对象开始的活动，处理 onActivityResult 请求代码如下：

```
originalRequestCode = changedRequestCode - (indexOfFragment << 16)
      6             =      196614        -       (3 << 16) 
```

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2017-03-09T17:57:03.963

**更轻松：**

**爪哇**： `int unmaskedRequestCode = requestCode & 0x0000ffff`

**科特林**： `val unmaskedRequestCode = requestCode and 0x0000ffff`

检查低 16 位，只需在高 16 位归零的情况下进行逻辑与运算即可取消屏蔽

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    final int unmaskedRequestCode = requestCode & 0x0000ffff

    if(unmaskedRequestCode == ORIGINAL_REQUEST_CODE){
      //Do stuff

    }
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-02-26T21:22:05.800

如果您提供常量，请将其公开，然后在`startActivityResult`

例子：

```
public static final int REQUEST_CODE =1;
getActivity().startActivityForresult(intent, REQUEST_CODE); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-08-06T13:52:08.917

您也可以
`super.onActivityResult(requestCode, resultCode, data)`
在此处定义`Activity`（如果您覆盖`onActivityResult`）

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    switch (requestCode) {

        ...

        default:
            super.onActivityResult(requestCode, resultCode, data);
    }
} 
```

并`startActivityForResult(intent, requestCode)`在你的内部调用`Fragment`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-15T13:34:52.833

在片段中

```
 getActivity().startActivityForResult(builder.build(getActivity()), PLACE_PICKER_REQUEST); 
```

在主要活动中：

```
if (requestCode == PLACE_PICKER_REQUEST) {
            if (resultCode == RESULT_OK) {    
     //what ever you want to do
            } 
```

# objective-c - 调用委托方法不起作用

> ID：10564475
> 
> 赞同：1
> 
> 时间：2012-05-12T14:11:35.883
> 
> 标签：objective-c, ios, delegates

我有一个`UIButton`调用另一个方法的方法`UIViewController`，该方法调用了一个没有发生的委托方法。

就像是：

```
FirstViewController

-(void)viewWillAppear:(BOOL)animated {
//Submit Button
    UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [button addTarget:self 
               action:@selector(someMethod)
     forControlEvents:UIControlEventTouchDown];
    [button setTitle:@"Submit" forState:UIControlStateNormal];
    button.frame = CGRectMake(100.0, 120.0, 80.0, 40.0);
    [self addSubview:button];
}

- (void)someMethod {

 SecondViewController *viewC = [[SecondViewController alloc] init];
 [viewC otherMethod];

} 

SecondViewController

- (void)otherMethod {

 NSLog(@"Verification.....");
 [self.delegate foo:self Bar:self.text]; //not working when called the otherMethod from FirstViewController

} 
```

我知道我做错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T14:32:14.370

协议和委托在objective-c中工作方式的一个非常简单的例子

```
@class A;
@protocol DelegateName<NSObject>
@optional
  - (void)doSomething:(NSString *)text;
@end

@interface A: NSObject {
    NSString *bar;
    id <DelegateName> delegate;
}

@property (nonatomic, retain) NSString *bar;
@property (nonatomic, assign) id <DelegateName> delegate;

- (void)someAction;

@end 
```

这是您的协议声明。那么当你调用委托方法时，你需要一个类的对象来调用委托方法。在您的情况下，它是`vc`. 你这样设置委托：

```
[vc setdelegate: self]; 
```

然后你调用方法，就像你做的那样。

看看你是否错过了这个例子中的任何一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T14:17:50.600

尝试了解委托方法是如何工作的。

```
@protocol CPUPerformanceDelegate <NSObject>

-(void)getUsedCpuOperations:(float)percent;
-(void)getKernelCpuOperations:(float)percent;
-(void)getIdleCpuOperations:(float)percent;
-(void)getUserCpuOperations:(float)percent;
-(void)getNiceCpuOperations:(float)percent;

@end

@interface CPUPerformance : NSObject{

    processor_info_array_t          cpuInfo, prevCpuInfo;
    mach_msg_type_number_t          numCpuInfo, numPrevCpuInfo;
    unsigned                        numCPUs;

    NSLock                          *CPUUsageLock;

}
@property(nonatomic,assign)id<CPUPerformanceDelegate>delegate;
@property(nonatomic,retain)NSTimer                         *updateTimer;
@end 
```

然后

```
#import "CPUPerformance.h"

@implementation CPUPerformance
@synthesize delegate,updateTimer;
- (void)updateInfo
{
idlepercent = ((idle/total)*100);
                userpercent = (user/total)*100;
                syspercent = (sys/total)*100;
                nicepercent = (nice/total)*100;
                inUsepercent = (inUse/total)*100;
[delegate getIdleCpuOperations:idlepercent];
            [delegate getKernelCpuOperations:syspercent];
            [delegate getNiceCpuOperations:nicepercent];
            [delegate getUsedCpuOperations:inUsepercent];
            [delegate getUserCpuOperations:userpercent];
} 
```

最后

```
#import "CPUPerformance.h"
@interface SpecProjectFirstViewController : UIViewController<UITableViewDataSource,UITableViewDelegate,CPUPerformanceDelegate>{

    //Ivars

    NSMutableArray                  *processArray;
    //User Interface Object
    UILabel                         *cpuUsage;
    UILabel                         *cpuIdle;
    UILabel                         *cpuUser;
    UILabel                         *cpuNice;
    UILabel                         *cpuKernel;
    IBOutlet UITableView            *tableViews;
    CPUPerformance                  *cpuObject;

}
=================

#import "SpecProjectFirstViewController.h"

@implementation SpecProjectFirstViewController

-(void)getIdleCpuOperations:(float)percent{

     [cpuIdle setText:nil];

      [cpuIdle setText:[NSString stringWithFormat:@"Idle :%.0f %%",percent]];
     [cpuIdle setTextAlignment:UITextAlignmentCenter];
}

-(void)getKernelCpuOperations:(float)percent{
    [cpuKernel setText:nil];

    [cpuKernel setText:[NSString stringWithFormat:@"Kernel :%.0f %%",percent]];
    [cpuKernel setTextAlignment:UITextAlignmentCenter];
}

-(void)getNiceCpuOperations:(float)percent{
     [cpuNice setText:nil];

    [cpuNice setText:[NSString stringWithFormat:@"Nice :%.0f %%",percent]];
    [cpuNice setTextAlignment:UITextAlignmentCenter];
}

-(void)getUsedCpuOperations:(float)percent{

    [cpuUsage setText:nil];
    [cpuUsage setText:[NSString stringWithFormat:@"Used :%.0f %%",percent]];
    [cpuUsage setTextAlignment:UITextAlignmentCenter];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T14:39:46.823

习惯上验证委托是否响应了您要调用的方法，因此您的`otherMethod`方法应该像这样实现，添加更多日志记录以帮助调试：

```
- (void)otherMethod
{
    NSLog(@"delegate = %p", self.delegate);

    if ([self.delegate respondsToSelector:@selector(foo::)])
    {
        NSLog(@"Calling delegate foo");
        [self.delegate foo:self Bar:self.text];
    }
    else
    {
        NSLog(@"Delegate doesn't respond to foo");
    }
} 
```

# jaxb - 生成 java 对象的复杂 jaxb 场景

> ID：10564476
> 
> 赞同：2
> 
> 时间：2012-05-12T14:11:38.677
> 
> 标签：jaxb, xjc

我有一个使用 framework.xsd 生成 JAXB 的项目。这会生成一个包含 xsd 和 jaxb 对象以及围绕该内容的其他类的 jar。

然后另一组（两个不同的组）将扩展framework.xsd 并使用模式扩展内容进行subxmling 以扩展framework.xsd 中的对象。他们还希望生成 jaxb 对象，但他们希望 SomeClass.java 明显扩展我的 Framework.java 并且不希望以全新的层次结构结束。

1.  这甚至可能吗？
2.  如何做这样的事情？因为解决方案需要
    1.  告诉 jaxb 编译器名称空间 yy 已经生成，所以不要生成
    2.  告诉 jaxb 编译器它需要引用 zzzzzz 包中的类或者从框架 jar 文件中查看 xjb 文件什么的。

这可能吗？谢谢，院长

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T16:46:43.980

在为您的第一个模式生成 JAXB 类时，您想使用剧集文件：[http ://weblogs.java.net/blog/kohsuke/archive/2006/09/separate_compil.html。](http://weblogs.java.net/blog/kohsuke/archive/2006/09/separate_compil.html)

```
$ xjc -episode framework.episode framework.xsd 
```

然后使用您的 framework.jar 的其他组应该：

1）在他们自己的架构中导入您的架构，例如：

```
<xsd:import namespace="http://www.myorg.com/framework" schemaLocation="framework.xsd"/> 
```

2) 生成他们的 JAXB 类

```
$ xjc extend.xsd -b framework.episode 
```

（他们在 xjc 时需要您的 xsd 和剧集文件的副本，以及类路径中的 framework.jar）

请注意，根据上面的博客文章，您还可以将 framework.episode 文件放在您的 jar 中（例如，至少 JAXB RI 的 /META-INF/sun-jaxb.episode - 其他 JAXB impl 可能有其他方法来完成相同的操作事物），因此可以省略 -b framework.episode 选项。我个人觉得这有点不切实际，无论如何你仍然需要 XSD。

# ios - 移动到其他应用程序然后返回时应用程序崩溃

> ID：10564484
> 
> 赞同：0
> 
> 时间：2012-05-12T14:13:04.677
> 
> 标签：ios, memory-management, rect

我的应用程序出现问题。
当我使用主页按钮进行多任务处理以移动到另一个应用程序时，它崩溃了，当我想再次回到我的应用程序时它崩溃了，我收到以下消息：

```
*** -[UIView convertRect:toView:]: message sent to deallocated instance 0x81e4020 
```

自从我实施了“内部视图”广告以来，它就开始了。
我需要在我的代码中做些什么来让它消失吗？
我试图解决它但没有成功。
这是我的广告代码：

```
 CGRect frame = CGRectMake(0, 480, 320, 50);
    self.adBanner = [[UIView alloc] initWithFrame:frame];
    [self.view convertRect:adBanner.frame toView:nil];   --->This is a line i tried to put...
    [self.view addSubview:self.adBanner];

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(iaAdReceived:) name:@"iaAdReceived" object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(iaDefaultAdReceived:) name:@"iaDefaultAdReceived" object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(iaAdFailed:) name:@"IaAdFailed" object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(iaAdClicked:) name:@"IaAdClicked" object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(iaAdWillShow:) name:@"IaAdWillShow" object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(iaAdDidShow:) name:@"IaAdDidShow" object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(iaAdWillHide:) name:@"IaAdWillHide" object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(iaAdDidHide:) name:@"IaAdDidHide" object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(iaAdWillClose:) name:@"IaAdWillClose" object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(iaAdDidClose:) name:@"IaAdDidClose" object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(iaAdWillResize:) name:@"IaAdWillResize" object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(iaAdDidResize:) name:@"IaAdDidResize" object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(iaAdWillExpand:) name:@"IaAdWillExpand" object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(iaAdDidExpand:) name:@"IaAdDidExpand" object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(iaAppShouldSuspend:) name:@"IaAppShouldSuspend" object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(iaAppShouldResume:) name:@"IaAppShouldResume" object:nil];

    // Display ad
    if (![InneractiveAd DisplayAd:@"iOS_Test" withType:IaAdType_Banner withRoot:self.adBanner withReload:60 withParams:optionalParams])
    {
        [adBanner removeFromSuperview];
    }
}

    -(void) viewWillDisappear:(BOOL)animated
    {
            [super viewWillDisappear:animated];
            [adBanner removeFromSuperview];
    }

- (IBAction)iaAdReceived:(id)sender
   {
       // The ad view has finished loading a paid ad
   }

    - (IBAction)iaDefaultAdReceived:(id)sender
    {
        // The ad view has finished loading a default ad
    }

    - (IBAction)iaAdFailed:(id)sender
    {
        // The ad view has failed to load an ad
    }

    - (IBAction)iaAdClicked:(id)sender
    {
        // The ad has been clicked
    }

    - (IBAction)iaAdWillShow:(id)sender
    {
        // The ad is about to show
    }

    - (IBAction)iaAdDidShow:(id)sender
    {
        // The ad did show
    }

    - (IBAction)iaAdWillHide:(id)sender
    {
        // The ad is about to hide
    }

    - (IBAction)iaAdDidHide:(id)sender
    {
        // The ad did hide
    }

    - (IBAction)iaAdWillClose:(id)sender
    {
        // The ad is about to close
    }

    - (IBAction)iaAdDidClose:(id)sender
    {
        // The ad did close
    }

    - (IBAction)iaAdWillResize:(id)sender
    {
        // The ad is about to resize
    }

    - (IBAction)iaAdDidResize:(id)sender
    {
        // The ad did resize
    }

    - (IBAction)iaAdWillExpand:(id)sender
    {
        // The ad is about to expand
    }

    - (IBAction)iaAdDidExpand:(id)sender
    {
        // The ad did expand
    }

    - (IBAction)iaAppShouldSuspend:(id)sender
    {
        // The app should suspend (for example, when the ad expands)
    }

    - (IBAction)iaAppShouldResume:(id)sender
    {
        // The app should resume (for example, when the ad collapses)
    } 
```

我附上了一个截图......
它可能是什么？
谢谢...

![错误](../Images/f56b9ca05c68fa72ef54e86a7e4345ee.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T14:46:56.160

您的问题是运行时：

```
[self.view convertRect:adBanner.frame toView:nil]; 
```

你的观点不存在了。

在您的 appDelegate 中，您应该使用此方法：

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
/*
 Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
 */
} 
```

无论如何，你试图用这条线实现什么？因为它返回一个你没有使用的 CGRect 。

# iphone - applicationWillResignActive 可以用来暂停应用吗

> ID：10564487
> 
> 赞同：0
> 
> 时间：2012-05-12T14:13:28.550
> 
> 标签：iphone

在 MainViewController 中，我有一个播放/暂停按钮。我在为暂停功能编码时遇到问题，因为当我使用音频播放器暂停时，它只暂停了音频播​​放器，但在后台我的应用程序仍在执行。我已经用于`NSTimer`显示各种`UIViewControllers`. 当音频播放器暂停时，它仍在显示`UIViewControllers`，因为`NSTimer`我希望同时完全暂停音频播放器和应用程序执行。

我找到了这个`-applicationwillresignactive`。`-applicationwillresignactive`当我想要完全暂停音频播放器和应用程序暂停时，你认为这对我有帮助吗？

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T15:03:13.200

按下主页按钮时会调用 applicationWillResignActive 和 applicationDidEnterBackground。

# c - 计算 CRC16 校验和的函数

> ID：10564491
> 
> 赞同：56
> 
> 时间：2012-05-12T14:13:47.507
> 
> 标签：c, crc, crc16

我正在开发一个库，以通过 RS232 或 RS485 连接提供简单可靠的通信。此代码的一部分涉及对数据使用 CRC16 校验和来检测线路噪声造成的损坏。我创建了一个函数来计算 CRC16 校验和，但它似乎没有输出正确的值。

我写的相关代码如下（也可以在[这里](https://gist.github.com/2666368)找到）。

```
#include <stdint.h>

#define CRC16 0x8005

uint16_t gen_crc16(const uint8_t *data, uint16_t size)
{
    uint16_t out = 0;
    int bits_read = 0, bit_flag;

    /* Sanity check: */
    if(data == NULL)
        return 0;

    while(size > 0)
    {
        bit_flag = out >> 15;

        /* Get next bit: */
        out <<= 1;
        out |= (*data >> (7 - bits_read)) & 1;

        /* Increment bit counter: */
        bits_read++;
        if(bits_read > 7)
        {
            bits_read = 0;
            data++;
            size--;
        }

        /* Cycle check: */
        if(bit_flag)
            out ^= CRC16;
    }

    return out;
} 
```

我正在对照[这个在线 CRC 计算器](http://www.lammertbies.nl/comm/info/crc-calculation.html)检查我的输出。

我得出的结论要么是我对如何计算 CRC16 的理解是错误的，要么是在线计算器是错误的（前者似乎更有可能）。有人可以告诉我哪里可能出错了吗？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-05-13T06:59:49.587

对于特定的 CRC 实现，您需要“匹配”几个细节 - 即使使用相同的多项式，由于数据位的处理方式存在细微差异，使用 CRC 的特定初始值（有时它是零，有时是 0xffff），和/或反转 CRC 的位。例如，有时一种实现将从数据字节的低位向上工作，而有时它们将从高位向下工作（就像您目前所做的那样）。

此外，在运行完所有数据位后，您需要“推出”CRC 的最后一位。

请记住，CRC 算法是为在硬件中实现而设计的，因此从软件的角度来看，一些位排序的处理方式可能没有多大意义。

如果您想将 CRC16 与多项式 0x8005 匹配，如 lammertbies.nl CRC 计算器页面所示，您需要对您的 CRC 函数进行以下更改：

*   a) 从最低有效位而不是最高有效位开始通过 CRC 循环运行数据位
*   b) 完成输入数据后，将 CRC 的最后 16 位从 CRC 寄存器中推出
*   c）反转CRC位（我猜这个位是硬件实现的结转）

因此，您的函数可能如下所示：

```
#define CRC16 0x8005

uint16_t gen_crc16(const uint8_t *data, uint16_t size)
{
    uint16_t out = 0;
    int bits_read = 0, bit_flag;

    /* Sanity check: */
    if(data == NULL)
        return 0;

    while(size > 0)
    {
        bit_flag = out >> 15;

        /* Get next bit: */
        out <<= 1;
        out |= (*data >> bits_read) & 1; // item a) work from the least significant bits

        /* Increment bit counter: */
        bits_read++;
        if(bits_read > 7)
        {
            bits_read = 0;
            data++;
            size--;
        }

        /* Cycle check: */
        if(bit_flag)
            out ^= CRC16;

    }

    // item b) "push out" the last 16 bits
    int i;
    for (i = 0; i < 16; ++i) {
        bit_flag = out >> 15;
        out <<= 1;
        if(bit_flag)
            out ^= CRC16;
    }

    // item c) reverse the bits
    uint16_t crc = 0;
    i = 0x8000;
    int j = 0x0001;
    for (; i != 0; i >>=1, j <<= 1) {
        if (i & out) crc |= j;
    }

    return crc;
} 
```

`0xbb3d`当我传入时，该函数会为我返回`"123456789"`。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2014-05-18T19:43:03.197

下面是计算 crc16 CCITT 的工作代码。我对其进行了测试，结果与[http://www.lammertbies.nl/comm/info/crc-calculation.html](http://www.lammertbies.nl/comm/info/crc-calculation.html)提供的结果相匹配。

```
unsigned short crc16(const unsigned char* data_p, unsigned char length){
    unsigned char x;
    unsigned short crc = 0xFFFF;

    while (length--){
        x = crc >> 8 ^ *data_p++;
        x ^= x>>4;
        crc = (crc << 8) ^ ((unsigned short)(x << 12)) ^ ((unsigned short)(x <<5)) ^ ((unsigned short)x);
    }
    return crc;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-01-20T16:43:56.353

[crcany](https://github.com/madler/crcany)将为任何 CRC 生成高效的 C 代码，并包含一个包含一百多个已知 CRC 定义的库。

高效的 CRC 代码使用表格而不是按位计算。crcany 生成逐字节例程和逐字例程，后者针对生成它们的体系结构进行了调整。Word-wise 是最快的。Byte-wise 仍然比 bit-wise 快得多，但实现在架构上更容易移植。

您似乎没有需要匹配的具有特定 CRC 定义的协议定义。[在这种情况下，您可以选择目录](http://reveng.sourceforge.net/crc-catalogue/16.htm)中的任何 16 位 CRC ，您将获得良好的性能。

如果您的误码率相对较低，例如每个数据包的错误数为个位数，并且您希望最大限度地提高错误检测性能，则需要查看应用 CRC 的数据包大小，假设它是恒定的或有界，并查看[Philip Koopman 广泛研究](http://users.ece.cmu.edu/~koopman/crc/index.html)中的最佳多项式的性能。经典的 CRC，例如 CCITT/Kermit 16 位 CRC 或 X.25 16 位 CRC 并不是性能最好的。

CRC-16/DNP 是 Koopman 表中表现良好的 16 位执行器之一，也是在实践中使用的 CRC 目录中。它具有非常好的性能，可以检测数据包中多达 6 位的错误。以下是 crcany 为该 CRC 定义生成的代码。此代码假定逐字计算的小端架构，例如 Intel x86 和 x86-64，并且假定`uintmax_t`为 64 位。crcany 可用于为 big-endian 和其他字长生成替代代码。

*crc16dnp.h：*

```
// The _bit, _byte, and _word routines return the CRC of the len bytes at mem,
// applied to the previous CRC value, crc. If mem is NULL, then the other
// arguments are ignored, and the initial CRC, i.e. the CRC of zero bytes, is
// returned. Those routines will all return the same result, differing only in
// speed and code complexity. The _rem routine returns the CRC of the remaining
// bits in the last byte, for when the number of bits in the message is not a
// multiple of eight. The low bits bits of the low byte of val are applied to
// crc. bits must be in 0..8.

#include <stddef.h>

// Compute the CRC a bit at a time.
unsigned crc16dnp_bit(unsigned crc, void const *mem, size_t len);

// Compute the CRC of the low bits bits in val.
unsigned crc16dnp_rem(unsigned crc, unsigned val, unsigned bits);

// Compute the CRC a byte at a time.
unsigned crc16dnp_byte(unsigned crc, void const *mem, size_t len);

// Compute the CRC a word at a time.
unsigned crc16dnp_word(unsigned crc, void const *mem, size_t len); 
```

*crc16dnp.c：*

```
#include <stdint.h>
#include "crc16dnp.h"

// This code assumes that unsigned is 4 bytes.

unsigned crc16dnp_bit(unsigned crc, void const *mem, size_t len) {
    unsigned char const *data = mem;
    if (data == NULL)
        return 0xffff;
    crc = ~crc;
    crc &= 0xffff;
    while (len--) {
        crc ^= *data++;
        for (unsigned k = 0; k < 8; k++)
            crc = crc & 1 ? (crc >> 1) ^ 0xa6bc : crc >> 1;
    }
    crc ^= 0xffff;
    return crc;
}

unsigned crc16dnp_rem(unsigned crc, unsigned val, unsigned bits) {
    crc = ~crc;
    crc &= 0xffff;
    val &= (1U << bits) - 1;
    crc ^= val;
    while (bits--)
        crc = crc & 1 ? (crc >> 1) ^ 0xa6bc : crc >> 1;
    crc ^= 0xffff;
    return crc;
}

#define table_byte table_word[0]

static unsigned short const table_word[][256] = {
   {0xed35, 0xdb6b, 0x8189, 0xb7d7, 0x344d, 0x0213, 0x58f1, 0x6eaf, 0x12bc, 0x24e2,
    0x7e00, 0x485e, 0xcbc4, 0xfd9a, 0xa778, 0x9126, 0x5f5e, 0x6900, 0x33e2, 0x05bc,
    0x8626, 0xb078, 0xea9a, 0xdcc4, 0xa0d7, 0x9689, 0xcc6b, 0xfa35, 0x79af, 0x4ff1,
    0x1513, 0x234d, 0xc49a, 0xf2c4, 0xa826, 0x9e78, 0x1de2, 0x2bbc, 0x715e, 0x4700,
    0x3b13, 0x0d4d, 0x57af, 0x61f1, 0xe26b, 0xd435, 0x8ed7, 0xb889, 0x76f1, 0x40af,
    0x1a4d, 0x2c13, 0xaf89, 0x99d7, 0xc335, 0xf56b, 0x8978, 0xbf26, 0xe5c4, 0xd39a,
    0x5000, 0x665e, 0x3cbc, 0x0ae2, 0xbe6b, 0x8835, 0xd2d7, 0xe489, 0x6713, 0x514d,
    0x0baf, 0x3df1, 0x41e2, 0x77bc, 0x2d5e, 0x1b00, 0x989a, 0xaec4, 0xf426, 0xc278,
    0x0c00, 0x3a5e, 0x60bc, 0x56e2, 0xd578, 0xe326, 0xb9c4, 0x8f9a, 0xf389, 0xc5d7,
    0x9f35, 0xa96b, 0x2af1, 0x1caf, 0x464d, 0x7013, 0x97c4, 0xa19a, 0xfb78, 0xcd26,
    0x4ebc, 0x78e2, 0x2200, 0x145e, 0x684d, 0x5e13, 0x04f1, 0x32af, 0xb135, 0x876b,
    0xdd89, 0xebd7, 0x25af, 0x13f1, 0x4913, 0x7f4d, 0xfcd7, 0xca89, 0x906b, 0xa635,
    0xda26, 0xec78, 0xb69a, 0x80c4, 0x035e, 0x3500, 0x6fe2, 0x59bc, 0x4b89, 0x7dd7,
    0x2735, 0x116b, 0x92f1, 0xa4af, 0xfe4d, 0xc813, 0xb400, 0x825e, 0xd8bc, 0xeee2,
    0x6d78, 0x5b26, 0x01c4, 0x379a, 0xf9e2, 0xcfbc, 0x955e, 0xa300, 0x209a, 0x16c4,
    0x4c26, 0x7a78, 0x066b, 0x3035, 0x6ad7, 0x5c89, 0xdf13, 0xe94d, 0xb3af, 0x85f1,
    0x6226, 0x5478, 0x0e9a, 0x38c4, 0xbb5e, 0x8d00, 0xd7e2, 0xe1bc, 0x9daf, 0xabf1,
    0xf113, 0xc74d, 0x44d7, 0x7289, 0x286b, 0x1e35, 0xd04d, 0xe613, 0xbcf1, 0x8aaf,
    0x0935, 0x3f6b, 0x6589, 0x53d7, 0x2fc4, 0x199a, 0x4378, 0x7526, 0xf6bc, 0xc0e2,
    0x9a00, 0xac5e, 0x18d7, 0x2e89, 0x746b, 0x4235, 0xc1af, 0xf7f1, 0xad13, 0x9b4d,
    0xe75e, 0xd100, 0x8be2, 0xbdbc, 0x3e26, 0x0878, 0x529a, 0x64c4, 0xaabc, 0x9ce2,
    0xc600, 0xf05e, 0x73c4, 0x459a, 0x1f78, 0x2926, 0x5535, 0x636b, 0x3989, 0x0fd7,
    0x8c4d, 0xba13, 0xe0f1, 0xd6af, 0x3178, 0x0726, 0x5dc4, 0x6b9a, 0xe800, 0xde5e,
    0x84bc, 0xb2e2, 0xcef1, 0xf8af, 0xa24d, 0x9413, 0x1789, 0x21d7, 0x7b35, 0x4d6b,
    0x8313, 0xb54d, 0xefaf, 0xd9f1, 0x5a6b, 0x6c35, 0x36d7, 0x0089, 0x7c9a, 0x4ac4,
    0x1026, 0x2678, 0xa5e2, 0x93bc, 0xc95e, 0xff00},
   {0x740f, 0xdf41, 0x6fea, 0xc4a4, 0x43c5, 0xe88b, 0x5820, 0xf36e, 0x1b9b, 0xb0d5,
    0x007e, 0xab30, 0x2c51, 0x871f, 0x37b4, 0x9cfa, 0xab27, 0x0069, 0xb0c2, 0x1b8c,
    0x9ced, 0x37a3, 0x8708, 0x2c46, 0xc4b3, 0x6ffd, 0xdf56, 0x7418, 0xf379, 0x5837,
    0xe89c, 0x43d2, 0x8726, 0x2c68, 0x9cc3, 0x378d, 0xb0ec, 0x1ba2, 0xab09, 0x0047,
    0xe8b2, 0x43fc, 0xf357, 0x5819, 0xdf78, 0x7436, 0xc49d, 0x6fd3, 0x580e, 0xf340,
    0x43eb, 0xe8a5, 0x6fc4, 0xc48a, 0x7421, 0xdf6f, 0x379a, 0x9cd4, 0x2c7f, 0x8731,
    0x0050, 0xab1e, 0x1bb5, 0xb0fb, 0xdf24, 0x746a, 0xc4c1, 0x6f8f, 0xe8ee, 0x43a0,
    0xf30b, 0x5845, 0xb0b0, 0x1bfe, 0xab55, 0x001b, 0x877a, 0x2c34, 0x9c9f, 0x37d1,
    0x000c, 0xab42, 0x1be9, 0xb0a7, 0x37c6, 0x9c88, 0x2c23, 0x876d, 0x6f98, 0xc4d6,
    0x747d, 0xdf33, 0x5852, 0xf31c, 0x43b7, 0xe8f9, 0x2c0d, 0x8743, 0x37e8, 0x9ca6,
    0x1bc7, 0xb089, 0x0022, 0xab6c, 0x4399, 0xe8d7, 0x587c, 0xf332, 0x7453, 0xdf1d,
    0x6fb6, 0xc4f8, 0xf325, 0x586b, 0xe8c0, 0x438e, 0xc4ef, 0x6fa1, 0xdf0a, 0x7444,
    0x9cb1, 0x37ff, 0x8754, 0x2c1a, 0xab7b, 0x0035, 0xb09e, 0x1bd0, 0x6f20, 0xc46e,
    0x74c5, 0xdf8b, 0x58ea, 0xf3a4, 0x430f, 0xe841, 0x00b4, 0xabfa, 0x1b51, 0xb01f,
    0x377e, 0x9c30, 0x2c9b, 0x87d5, 0xb008, 0x1b46, 0xabed, 0x00a3, 0x87c2, 0x2c8c,
    0x9c27, 0x3769, 0xdf9c, 0x74d2, 0xc479, 0x6f37, 0xe856, 0x4318, 0xf3b3, 0x58fd,
    0x9c09, 0x3747, 0x87ec, 0x2ca2, 0xabc3, 0x008d, 0xb026, 0x1b68, 0xf39d, 0x58d3,
    0xe878, 0x4336, 0xc457, 0x6f19, 0xdfb2, 0x74fc, 0x4321, 0xe86f, 0x58c4, 0xf38a,
    0x74eb, 0xdfa5, 0x6f0e, 0xc440, 0x2cb5, 0x87fb, 0x3750, 0x9c1e, 0x1b7f, 0xb031,
    0x009a, 0xabd4, 0xc40b, 0x6f45, 0xdfee, 0x74a0, 0xf3c1, 0x588f, 0xe824, 0x436a,
    0xab9f, 0x00d1, 0xb07a, 0x1b34, 0x9c55, 0x371b, 0x87b0, 0x2cfe, 0x1b23, 0xb06d,
    0x00c6, 0xab88, 0x2ce9, 0x87a7, 0x370c, 0x9c42, 0x74b7, 0xdff9, 0x6f52, 0xc41c,
    0x437d, 0xe833, 0x5898, 0xf3d6, 0x3722, 0x9c6c, 0x2cc7, 0x8789, 0x00e8, 0xaba6,
    0x1b0d, 0xb043, 0x58b6, 0xf3f8, 0x4353, 0xe81d, 0x6f7c, 0xc432, 0x7499, 0xdfd7,
    0xe80a, 0x4344, 0xf3ef, 0x58a1, 0xdfc0, 0x748e, 0xc425, 0x6f6b, 0x879e, 0x2cd0,
    0x9c7b, 0x3735, 0xb054, 0x1b1a, 0xabb1, 0x00ff},
   {0x7c67, 0x65df, 0x4f17, 0x56af, 0x1a87, 0x033f, 0x29f7, 0x304f, 0xb1a7, 0xa81f,
    0x82d7, 0x9b6f, 0xd747, 0xceff, 0xe437, 0xfd8f, 0xaa9e, 0xb326, 0x99ee, 0x8056,
    0xcc7e, 0xd5c6, 0xff0e, 0xe6b6, 0x675e, 0x7ee6, 0x542e, 0x4d96, 0x01be, 0x1806,
    0x32ce, 0x2b76, 0x9cec, 0x8554, 0xaf9c, 0xb624, 0xfa0c, 0xe3b4, 0xc97c, 0xd0c4,
    0x512c, 0x4894, 0x625c, 0x7be4, 0x37cc, 0x2e74, 0x04bc, 0x1d04, 0x4a15, 0x53ad,
    0x7965, 0x60dd, 0x2cf5, 0x354d, 0x1f85, 0x063d, 0x87d5, 0x9e6d, 0xb4a5, 0xad1d,
    0xe135, 0xf88d, 0xd245, 0xcbfd, 0xf008, 0xe9b0, 0xc378, 0xdac0, 0x96e8, 0x8f50,
    0xa598, 0xbc20, 0x3dc8, 0x2470, 0x0eb8, 0x1700, 0x5b28, 0x4290, 0x6858, 0x71e0,
    0x26f1, 0x3f49, 0x1581, 0x0c39, 0x4011, 0x59a9, 0x7361, 0x6ad9, 0xeb31, 0xf289,
    0xd841, 0xc1f9, 0x8dd1, 0x9469, 0xbea1, 0xa719, 0x1083, 0x093b, 0x23f3, 0x3a4b,
    0x7663, 0x6fdb, 0x4513, 0x5cab, 0xdd43, 0xc4fb, 0xee33, 0xf78b, 0xbba3, 0xa21b,
    0x88d3, 0x916b, 0xc67a, 0xdfc2, 0xf50a, 0xecb2, 0xa09a, 0xb922, 0x93ea, 0x8a52,
    0x0bba, 0x1202, 0x38ca, 0x2172, 0x6d5a, 0x74e2, 0x5e2a, 0x4792, 0x29c0, 0x3078,
    0x1ab0, 0x0308, 0x4f20, 0x5698, 0x7c50, 0x65e8, 0xe400, 0xfdb8, 0xd770, 0xcec8,
    0x82e0, 0x9b58, 0xb190, 0xa828, 0xff39, 0xe681, 0xcc49, 0xd5f1, 0x99d9, 0x8061,
    0xaaa9, 0xb311, 0x32f9, 0x2b41, 0x0189, 0x1831, 0x5419, 0x4da1, 0x6769, 0x7ed1,
    0xc94b, 0xd0f3, 0xfa3b, 0xe383, 0xafab, 0xb613, 0x9cdb, 0x8563, 0x048b, 0x1d33,
    0x37fb, 0x2e43, 0x626b, 0x7bd3, 0x511b, 0x48a3, 0x1fb2, 0x060a, 0x2cc2, 0x357a,
    0x7952, 0x60ea, 0x4a22, 0x539a, 0xd272, 0xcbca, 0xe102, 0xf8ba, 0xb492, 0xad2a,
    0x87e2, 0x9e5a, 0xa5af, 0xbc17, 0x96df, 0x8f67, 0xc34f, 0xdaf7, 0xf03f, 0xe987,
    0x686f, 0x71d7, 0x5b1f, 0x42a7, 0x0e8f, 0x1737, 0x3dff, 0x2447, 0x7356, 0x6aee,
    0x4026, 0x599e, 0x15b6, 0x0c0e, 0x26c6, 0x3f7e, 0xbe96, 0xa72e, 0x8de6, 0x945e,
    0xd876, 0xc1ce, 0xeb06, 0xf2be, 0x4524, 0x5c9c, 0x7654, 0x6fec, 0x23c4, 0x3a7c,
    0x10b4, 0x090c, 0x88e4, 0x915c, 0xbb94, 0xa22c, 0xee04, 0xf7bc, 0xdd74, 0xc4cc,
    0x93dd, 0x8a65, 0xa0ad, 0xb915, 0xf53d, 0xec85, 0xc64d, 0xdff5, 0x5e1d, 0x47a5,
    0x6d6d, 0x74d5, 0x38fd, 0x2145, 0x0b8d, 0x1235},
   {0xf917, 0x3bff, 0x31be, 0xf356, 0x253c, 0xe7d4, 0xed95, 0x2f7d, 0x0c38, 0xced0,
    0xc491, 0x0679, 0xd013, 0x12fb, 0x18ba, 0xda52, 0x5e30, 0x9cd8, 0x9699, 0x5471,
    0x821b, 0x40f3, 0x4ab2, 0x885a, 0xab1f, 0x69f7, 0x63b6, 0xa15e, 0x7734, 0xb5dc,
    0xbf9d, 0x7d75, 0xfa20, 0x38c8, 0x3289, 0xf061, 0x260b, 0xe4e3, 0xeea2, 0x2c4a,
    0x0f0f, 0xcde7, 0xc7a6, 0x054e, 0xd324, 0x11cc, 0x1b8d, 0xd965, 0x5d07, 0x9fef,
    0x95ae, 0x5746, 0x812c, 0x43c4, 0x4985, 0x8b6d, 0xa828, 0x6ac0, 0x6081, 0xa269,
    0x7403, 0xb6eb, 0xbcaa, 0x7e42, 0xff79, 0x3d91, 0x37d0, 0xf538, 0x2352, 0xe1ba,
    0xebfb, 0x2913, 0x0a56, 0xc8be, 0xc2ff, 0x0017, 0xd67d, 0x1495, 0x1ed4, 0xdc3c,
    0x585e, 0x9ab6, 0x90f7, 0x521f, 0x8475, 0x469d, 0x4cdc, 0x8e34, 0xad71, 0x6f99,
    0x65d8, 0xa730, 0x715a, 0xb3b2, 0xb9f3, 0x7b1b, 0xfc4e, 0x3ea6, 0x34e7, 0xf60f,
    0x2065, 0xe28d, 0xe8cc, 0x2a24, 0x0961, 0xcb89, 0xc1c8, 0x0320, 0xd54a, 0x17a2,
    0x1de3, 0xdf0b, 0x5b69, 0x9981, 0x93c0, 0x5128, 0x8742, 0x45aa, 0x4feb, 0x8d03,
    0xae46, 0x6cae, 0x66ef, 0xa407, 0x726d, 0xb085, 0xbac4, 0x782c, 0xf5cb, 0x3723,
    0x3d62, 0xff8a, 0x29e0, 0xeb08, 0xe149, 0x23a1, 0x00e4, 0xc20c, 0xc84d, 0x0aa5,
    0xdccf, 0x1e27, 0x1466, 0xd68e, 0x52ec, 0x9004, 0x9a45, 0x58ad, 0x8ec7, 0x4c2f,
    0x466e, 0x8486, 0xa7c3, 0x652b, 0x6f6a, 0xad82, 0x7be8, 0xb900, 0xb341, 0x71a9,
    0xf6fc, 0x3414, 0x3e55, 0xfcbd, 0x2ad7, 0xe83f, 0xe27e, 0x2096, 0x03d3, 0xc13b,
    0xcb7a, 0x0992, 0xdff8, 0x1d10, 0x1751, 0xd5b9, 0x51db, 0x9333, 0x9972, 0x5b9a,
    0x8df0, 0x4f18, 0x4559, 0x87b1, 0xa4f4, 0x661c, 0x6c5d, 0xaeb5, 0x78df, 0xba37,
    0xb076, 0x729e, 0xf3a5, 0x314d, 0x3b0c, 0xf9e4, 0x2f8e, 0xed66, 0xe727, 0x25cf,
    0x068a, 0xc462, 0xce23, 0x0ccb, 0xdaa1, 0x1849, 0x1208, 0xd0e0, 0x5482, 0x966a,
    0x9c2b, 0x5ec3, 0x88a9, 0x4a41, 0x4000, 0x82e8, 0xa1ad, 0x6345, 0x6904, 0xabec,
    0x7d86, 0xbf6e, 0xb52f, 0x77c7, 0xf092, 0x327a, 0x383b, 0xfad3, 0x2cb9, 0xee51,
    0xe410, 0x26f8, 0x05bd, 0xc755, 0xcd14, 0x0ffc, 0xd996, 0x1b7e, 0x113f, 0xd3d7,
    0x57b5, 0x955d, 0x9f1c, 0x5df4, 0x8b9e, 0x4976, 0x4337, 0x81df, 0xa29a, 0x6072,
    0x6a33, 0xa8db, 0x7eb1, 0xbc59, 0xb618, 0x74f0},
   {0x3108, 0x120e, 0x7704, 0x5402, 0xbd10, 0x9e16, 0xfb1c, 0xd81a, 0x6441, 0x4747,
    0x224d, 0x014b, 0xe859, 0xcb5f, 0xae55, 0x8d53, 0x9b9a, 0xb89c, 0xdd96, 0xfe90,
    0x1782, 0x3484, 0x518e, 0x7288, 0xced3, 0xedd5, 0x88df, 0xabd9, 0x42cb, 0x61cd,
    0x04c7, 0x27c1, 0x2955, 0x0a53, 0x6f59, 0x4c5f, 0xa54d, 0x864b, 0xe341, 0xc047,
    0x7c1c, 0x5f1a, 0x3a10, 0x1916, 0xf004, 0xd302, 0xb608, 0x950e, 0x83c7, 0xa0c1,
    0xc5cb, 0xe6cd, 0x0fdf, 0x2cd9, 0x49d3, 0x6ad5, 0xd68e, 0xf588, 0x9082, 0xb384,
    0x5a96, 0x7990, 0x1c9a, 0x3f9c, 0x01b2, 0x22b4, 0x47be, 0x64b8, 0x8daa, 0xaeac,
    0xcba6, 0xe8a0, 0x54fb, 0x77fd, 0x12f7, 0x31f1, 0xd8e3, 0xfbe5, 0x9eef, 0xbde9,
    0xab20, 0x8826, 0xed2c, 0xce2a, 0x2738, 0x043e, 0x6134, 0x4232, 0xfe69, 0xdd6f,
    0xb865, 0x9b63, 0x7271, 0x5177, 0x347d, 0x177b, 0x19ef, 0x3ae9, 0x5fe3, 0x7ce5,
    0x95f7, 0xb6f1, 0xd3fb, 0xf0fd, 0x4ca6, 0x6fa0, 0x0aaa, 0x29ac, 0xc0be, 0xe3b8,
    0x86b2, 0xa5b4, 0xb37d, 0x907b, 0xf571, 0xd677, 0x3f65, 0x1c63, 0x7969, 0x5a6f,
    0xe634, 0xc532, 0xa038, 0x833e, 0x6a2c, 0x492a, 0x2c20, 0x0f26, 0x507c, 0x737a,
    0x1670, 0x3576, 0xdc64, 0xff62, 0x9a68, 0xb96e, 0x0535, 0x2633, 0x4339, 0x603f,
    0x892d, 0xaa2b, 0xcf21, 0xec27, 0xfaee, 0xd9e8, 0xbce2, 0x9fe4, 0x76f6, 0x55f0,
    0x30fa, 0x13fc, 0xafa7, 0x8ca1, 0xe9ab, 0xcaad, 0x23bf, 0x00b9, 0x65b3, 0x46b5,
    0x4821, 0x6b27, 0x0e2d, 0x2d2b, 0xc439, 0xe73f, 0x8235, 0xa133, 0x1d68, 0x3e6e,
    0x5b64, 0x7862, 0x9170, 0xb276, 0xd77c, 0xf47a, 0xe2b3, 0xc1b5, 0xa4bf, 0x87b9,
    0x6eab, 0x4dad, 0x28a7, 0x0ba1, 0xb7fa, 0x94fc, 0xf1f6, 0xd2f0, 0x3be2, 0x18e4,
    0x7dee, 0x5ee8, 0x60c6, 0x43c0, 0x26ca, 0x05cc, 0xecde, 0xcfd8, 0xaad2, 0x89d4,
    0x358f, 0x1689, 0x7383, 0x5085, 0xb997, 0x9a91, 0xff9b, 0xdc9d, 0xca54, 0xe952,
    0x8c58, 0xaf5e, 0x464c, 0x654a, 0x0040, 0x2346, 0x9f1d, 0xbc1b, 0xd911, 0xfa17,
    0x1305, 0x3003, 0x5509, 0x760f, 0x789b, 0x5b9d, 0x3e97, 0x1d91, 0xf483, 0xd785,
    0xb28f, 0x9189, 0x2dd2, 0x0ed4, 0x6bde, 0x48d8, 0xa1ca, 0x82cc, 0xe7c6, 0xc4c0,
    0xd209, 0xf10f, 0x9405, 0xb703, 0x5e11, 0x7d17, 0x181d, 0x3b1b, 0x8740, 0xa446,
    0xc14c, 0xe24a, 0x0b58, 0x285e, 0x4d54, 0x6e52},
   {0xffb8, 0x4a5f, 0xd90f, 0x6ce8, 0xb2d6, 0x0731, 0x9461, 0x2186, 0x6564, 0xd083,
    0x43d3, 0xf634, 0x280a, 0x9ded, 0x0ebd, 0xbb5a, 0x8779, 0x329e, 0xa1ce, 0x1429,
    0xca17, 0x7ff0, 0xeca0, 0x5947, 0x1da5, 0xa842, 0x3b12, 0x8ef5, 0x50cb, 0xe52c,
    0x767c, 0xc39b, 0x0e3a, 0xbbdd, 0x288d, 0x9d6a, 0x4354, 0xf6b3, 0x65e3, 0xd004,
    0x94e6, 0x2101, 0xb251, 0x07b6, 0xd988, 0x6c6f, 0xff3f, 0x4ad8, 0x76fb, 0xc31c,
    0x504c, 0xe5ab, 0x3b95, 0x8e72, 0x1d22, 0xa8c5, 0xec27, 0x59c0, 0xca90, 0x7f77,
    0xa149, 0x14ae, 0x87fe, 0x3219, 0x51c5, 0xe422, 0x7772, 0xc295, 0x1cab, 0xa94c,
    0x3a1c, 0x8ffb, 0xcb19, 0x7efe, 0xedae, 0x5849, 0x8677, 0x3390, 0xa0c0, 0x1527,
    0x2904, 0x9ce3, 0x0fb3, 0xba54, 0x646a, 0xd18d, 0x42dd, 0xf73a, 0xb3d8, 0x063f,
    0x956f, 0x2088, 0xfeb6, 0x4b51, 0xd801, 0x6de6, 0xa047, 0x15a0, 0x86f0, 0x3317,
    0xed29, 0x58ce, 0xcb9e, 0x7e79, 0x3a9b, 0x8f7c, 0x1c2c, 0xa9cb, 0x77f5, 0xc212,
    0x5142, 0xe4a5, 0xd886, 0x6d61, 0xfe31, 0x4bd6, 0x95e8, 0x200f, 0xb35f, 0x06b8,
    0x425a, 0xf7bd, 0x64ed, 0xd10a, 0x0f34, 0xbad3, 0x2983, 0x9c64, 0xee3b, 0x5bdc,
    0xc88c, 0x7d6b, 0xa355, 0x16b2, 0x85e2, 0x3005, 0x74e7, 0xc100, 0x5250, 0xe7b7,
    0x3989, 0x8c6e, 0x1f3e, 0xaad9, 0x96fa, 0x231d, 0xb04d, 0x05aa, 0xdb94, 0x6e73,
    0xfd23, 0x48c4, 0x0c26, 0xb9c1, 0x2a91, 0x9f76, 0x4148, 0xf4af, 0x67ff, 0xd218,
    0x1fb9, 0xaa5e, 0x390e, 0x8ce9, 0x52d7, 0xe730, 0x7460, 0xc187, 0x8565, 0x3082,
    0xa3d2, 0x1635, 0xc80b, 0x7dec, 0xeebc, 0x5b5b, 0x6778, 0xd29f, 0x41cf, 0xf428,
    0x2a16, 0x9ff1, 0x0ca1, 0xb946, 0xfda4, 0x4843, 0xdb13, 0x6ef4, 0xb0ca, 0x052d,
    0x967d, 0x239a, 0x4046, 0xf5a1, 0x66f1, 0xd316, 0x0d28, 0xb8cf, 0x2b9f, 0x9e78,
    0xda9a, 0x6f7d, 0xfc2d, 0x49ca, 0x97f4, 0x2213, 0xb143, 0x04a4, 0x3887, 0x8d60,
    0x1e30, 0xabd7, 0x75e9, 0xc00e, 0x535e, 0xe6b9, 0xa25b, 0x17bc, 0x84ec, 0x310b,
    0xef35, 0x5ad2, 0xc982, 0x7c65, 0xb1c4, 0x0423, 0x9773, 0x2294, 0xfcaa, 0x494d,
    0xda1d, 0x6ffa, 0x2b18, 0x9eff, 0x0daf, 0xb848, 0x6676, 0xd391, 0x40c1, 0xf526,
    0xc905, 0x7ce2, 0xefb2, 0x5a55, 0x846b, 0x318c, 0xa2dc, 0x173b, 0x53d9, 0xe63e,
    0x756e, 0xc089, 0x1eb7, 0xab50, 0x3800, 0x8de7},
   {0xc20e, 0x9d6c, 0x7cca, 0x23a8, 0xf2ff, 0xad9d, 0x4c3b, 0x1359, 0xa3ec, 0xfc8e,
    0x1d28, 0x424a, 0x931d, 0xcc7f, 0x2dd9, 0x72bb, 0x01ca, 0x5ea8, 0xbf0e, 0xe06c,
    0x313b, 0x6e59, 0x8fff, 0xd09d, 0x6028, 0x3f4a, 0xdeec, 0x818e, 0x50d9, 0x0fbb,
    0xee1d, 0xb17f, 0x08ff, 0x579d, 0xb63b, 0xe959, 0x380e, 0x676c, 0x86ca, 0xd9a8,
    0x691d, 0x367f, 0xd7d9, 0x88bb, 0x59ec, 0x068e, 0xe728, 0xb84a, 0xcb3b, 0x9459,
    0x75ff, 0x2a9d, 0xfbca, 0xa4a8, 0x450e, 0x1a6c, 0xaad9, 0xf5bb, 0x141d, 0x4b7f,
    0x9a28, 0xc54a, 0x24ec, 0x7b8e, 0x1a95, 0x45f7, 0xa451, 0xfb33, 0x2a64, 0x7506,
    0x94a0, 0xcbc2, 0x7b77, 0x2415, 0xc5b3, 0x9ad1, 0x4b86, 0x14e4, 0xf542, 0xaa20,
    0xd951, 0x8633, 0x6795, 0x38f7, 0xe9a0, 0xb6c2, 0x5764, 0x0806, 0xb8b3, 0xe7d1,
    0x0677, 0x5915, 0x8842, 0xd720, 0x3686, 0x69e4, 0xd064, 0x8f06, 0x6ea0, 0x31c2,
    0xe095, 0xbff7, 0x5e51, 0x0133, 0xb186, 0xeee4, 0x0f42, 0x5020, 0x8177, 0xde15,
    0x3fb3, 0x60d1, 0x13a0, 0x4cc2, 0xad64, 0xf206, 0x2351, 0x7c33, 0x9d95, 0xc2f7,
    0x7242, 0x2d20, 0xcc86, 0x93e4, 0x42b3, 0x1dd1, 0xfc77, 0xa315, 0x3e41, 0x6123,
    0x8085, 0xdfe7, 0x0eb0, 0x51d2, 0xb074, 0xef16, 0x5fa3, 0x00c1, 0xe167, 0xbe05,
    0x6f52, 0x3030, 0xd196, 0x8ef4, 0xfd85, 0xa2e7, 0x4341, 0x1c23, 0xcd74, 0x9216,
    0x73b0, 0x2cd2, 0x9c67, 0xc305, 0x22a3, 0x7dc1, 0xac96, 0xf3f4, 0x1252, 0x4d30,
    0xf4b0, 0xabd2, 0x4a74, 0x1516, 0xc441, 0x9b23, 0x7a85, 0x25e7, 0x9552, 0xca30,
    0x2b96, 0x74f4, 0xa5a3, 0xfac1, 0x1b67, 0x4405, 0x3774, 0x6816, 0x89b0, 0xd6d2,
    0x0785, 0x58e7, 0xb941, 0xe623, 0x5696, 0x09f4, 0xe852, 0xb730, 0x6667, 0x3905,
    0xd8a3, 0x87c1, 0xe6da, 0xb9b8, 0x581e, 0x077c, 0xd62b, 0x8949, 0x68ef, 0x378d,
    0x8738, 0xd85a, 0x39fc, 0x669e, 0xb7c9, 0xe8ab, 0x090d, 0x566f, 0x251e, 0x7a7c,
    0x9bda, 0xc4b8, 0x15ef, 0x4a8d, 0xab2b, 0xf449, 0x44fc, 0x1b9e, 0xfa38, 0xa55a,
    0x740d, 0x2b6f, 0xcac9, 0x95ab, 0x2c2b, 0x7349, 0x92ef, 0xcd8d, 0x1cda, 0x43b8,
    0xa21e, 0xfd7c, 0x4dc9, 0x12ab, 0xf30d, 0xac6f, 0x7d38, 0x225a, 0xc3fc, 0x9c9e,
    0xefef, 0xb08d, 0x512b, 0x0e49, 0xdf1e, 0x807c, 0x61da, 0x3eb8, 0x8e0d, 0xd16f,
    0x30c9, 0x6fab, 0xbefc, 0xe19e, 0x0038, 0x5f5a},
   {0x4a8f, 0x5c9d, 0x66ab, 0x70b9, 0x12c7, 0x04d5, 0x3ee3, 0x28f1, 0xfa1f, 0xec0d,
    0xd63b, 0xc029, 0xa257, 0xb445, 0x8e73, 0x9861, 0x66d6, 0x70c4, 0x4af2, 0x5ce0,
    0x3e9e, 0x288c, 0x12ba, 0x04a8, 0xd646, 0xc054, 0xfa62, 0xec70, 0x8e0e, 0x981c,
    0xa22a, 0xb438, 0x123d, 0x042f, 0x3e19, 0x280b, 0x4a75, 0x5c67, 0x6651, 0x7043,
    0xa2ad, 0xb4bf, 0x8e89, 0x989b, 0xfae5, 0xecf7, 0xd6c1, 0xc0d3, 0x3e64, 0x2876,
    0x1240, 0x0452, 0x662c, 0x703e, 0x4a08, 0x5c1a, 0x8ef4, 0x98e6, 0xa2d0, 0xb4c2,
    0xd6bc, 0xc0ae, 0xfa98, 0xec8a, 0xfbeb, 0xedf9, 0xd7cf, 0xc1dd, 0xa3a3, 0xb5b1,
    0x8f87, 0x9995, 0x4b7b, 0x5d69, 0x675f, 0x714d, 0x1333, 0x0521, 0x3f17, 0x2905,
    0xd7b2, 0xc1a0, 0xfb96, 0xed84, 0x8ffa, 0x99e8, 0xa3de, 0xb5cc, 0x6722, 0x7130,
    0x4b06, 0x5d14, 0x3f6a, 0x2978, 0x134e, 0x055c, 0xa359, 0xb54b, 0x8f7d, 0x996f,
    0xfb11, 0xed03, 0xd735, 0xc127, 0x13c9, 0x05db, 0x3fed, 0x29ff, 0x4b81, 0x5d93,
    0x67a5, 0x71b7, 0x8f00, 0x9912, 0xa324, 0xb536, 0xd748, 0xc15a, 0xfb6c, 0xed7e,
    0x3f90, 0x2982, 0x13b4, 0x05a6, 0x67d8, 0x71ca, 0x4bfc, 0x5dee, 0x653e, 0x732c,
    0x491a, 0x5f08, 0x3d76, 0x2b64, 0x1152, 0x0740, 0xd5ae, 0xc3bc, 0xf98a, 0xef98,
    0x8de6, 0x9bf4, 0xa1c2, 0xb7d0, 0x4967, 0x5f75, 0x6543, 0x7351, 0x112f, 0x073d,
    0x3d0b, 0x2b19, 0xf9f7, 0xefe5, 0xd5d3, 0xc3c1, 0xa1bf, 0xb7ad, 0x8d9b, 0x9b89,
    0x3d8c, 0x2b9e, 0x11a8, 0x07ba, 0x65c4, 0x73d6, 0x49e0, 0x5ff2, 0x8d1c, 0x9b0e,
    0xa138, 0xb72a, 0xd554, 0xc346, 0xf970, 0xef62, 0x11d5, 0x07c7, 0x3df1, 0x2be3,
    0x499d, 0x5f8f, 0x65b9, 0x73ab, 0xa145, 0xb757, 0x8d61, 0x9b73, 0xf90d, 0xef1f,
    0xd529, 0xc33b, 0xd45a, 0xc248, 0xf87e, 0xee6c, 0x8c12, 0x9a00, 0xa036, 0xb624,
    0x64ca, 0x72d8, 0x48ee, 0x5efc, 0x3c82, 0x2a90, 0x10a6, 0x06b4, 0xf803, 0xee11,
    0xd427, 0xc235, 0xa04b, 0xb659, 0x8c6f, 0x9a7d, 0x4893, 0x5e81, 0x64b7, 0x72a5,
    0x10db, 0x06c9, 0x3cff, 0x2aed, 0x8ce8, 0x9afa, 0xa0cc, 0xb6de, 0xd4a0, 0xc2b2,
    0xf884, 0xee96, 0x3c78, 0x2a6a, 0x105c, 0x064e, 0x6430, 0x7222, 0x4814, 0x5e06,
    0xa0b1, 0xb6a3, 0x8c95, 0x9a87, 0xf8f9, 0xeeeb, 0xd4dd, 0xc2cf, 0x1021, 0x0633,
    0x3c05, 0x2a17, 0x4869, 0x5e7b, 0x644d, 0x725f}
};

unsigned crc16dnp_byte(unsigned crc, void const *mem, size_t len) {
    unsigned char const *data = mem;
    if (data == NULL)
        return 0xffff;
    crc &= 0xffff;
    while (len--)
        crc = (crc >> 8) ^
              table_byte[(crc ^ *data++) & 0xff];
    return crc;
}

// This code assumes that integers are stored little-endian.

unsigned crc16dnp_word(unsigned crc, void const *mem, size_t len) {
    unsigned char const *data = mem;
    if (data == NULL)
        return 0xffff;
    crc &= 0xffff;
    while (len && ((ptrdiff_t)data & 0x7)) {
        crc = (crc >> 8) ^
              table_byte[(crc ^ *data++) & 0xff];
        len--;
    }
    if (len >= 8) {
        do {
            uintmax_t word = crc ^ *(uintmax_t const *)data;
            crc = table_word[7][word & 0xff] ^
                  table_word[6][(word >> 8) & 0xff] ^
                  table_word[5][(word >> 16) & 0xff] ^
                  table_word[4][(word >> 24) & 0xff] ^
                  table_word[3][(word >> 32) & 0xff] ^
                  table_word[2][(word >> 40) & 0xff] ^
                  table_word[1][(word >> 48) & 0xff] ^
                  table_word[0][word >> 56];
            data += 8;
            len -= 8;
        } while (len >= 8);
    }
    while (len--)
        crc = (crc >> 8) ^
              table_byte[(crc ^ *data++) & 0xff];
    return crc;
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-12T17:10:44.723

CRC-16 有几种不同的变体。见[维基页面](http://en.wikipedia.org/wiki/Cyclic_redundancy_check)。

每一个都会从相同的输入返回不同的结果。

因此，您必须为您的程序仔细选择正确的一个。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-05-12T06:39:32.353

```
for (pos = 0; pos < len; pos++) {
    crc ^= (uint16_t)buf[pos];     // XOR byte into least sig. byte of crc

    for (i = 8; i != 0; i--) {     // Loop over each bit
        if ((crc & 0x0001) != 0) { // If the LSB is set
            crc >>= 1;             // Shift right and XOR 0xA001
            crc ^= CRC16;
        } else {                   // Else LSB is not set
            crc >>= 1;             // Just shift right
        }
     }
}

return crc; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-19T16:44:21.603

我使用的代码示例来自： [http ://www.sunshine2k.de/articles/coding/crc/understanding_crc.html#ch5](http://www.sunshine2k.de/articles/coding/crc/understanding_crc.html#ch5)

还有这个实用程序来验证： [http ://www.sunshine2k.de/coding/javascript/crc/crc_js.html](http://www.sunshine2k.de/coding/javascript/crc/crc_js.html)

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2020-05-12T12:42:31.940

This function works for CRC-16 Modbus version. Not for CRC-16

# objective-c - 获取“最新”单个实体的最简单 Fetch 请求 - 核心数据

> ID：10564492
> 
> 赞同：1
> 
> 时间：2012-05-12T14:13:47.817
> 
> 标签：objective-c, core-data, nsfetchrequest

我有一个父子`<-->>`关系（对多）。关系是当我需要获取所有孩子时，`Parent.children = (NSSet *) child(s)`

有时我只需要一个基于子实体的 timeStamp 属性的**最新实体。**

我在徘徊什么是最简单的获取它的方法，比说创建获取请求并设置获取限制一并使用排序描述符根据时间戳对其进行排序要容易。

有没有更简单的方法？只是打电话也许：

```
[Parent.children firstObject]; 
```

原因是我需要在应用程序的整个生命周期中多次获取它。在某些情况下，尽管我必须在`-(void)awakeFromFetch() of a Parent Entity`.. 中获取最新的子实体，这就是为什么我想要一种比其他任何东西都更容易的方式，特别是在内存方面。

* * *

当获取子实体时，我有点使用这个谓词获取一堆它们是 2 个或更多父实体的子实体：

```
NSPredicate *pred = [NSPredicate predicateWithFormat:@"forParent IN %@", [Array of Parents]]; 
```

从生成的 NSSet 中，由于我会为所述对象获取所有必需的子实体，因此如果我可以根据其**timeStamp**属性（NSDate）分配一个指向**最新**子实体的指针，那将非常方便。

 **显然，在我得到 NSSet 结果之后，我可以遍历每个孩子并分配一个指向我在 NSSet 中找到的最新实体的指针，但它看起来非常费力，尽管我必须只分配一个指向最新实体的指针一个特定的**父**级，迭代一个可能有一百多个实体的 NSSet 似乎`bad programming`。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T01:27:26.457

你有几个选择。fetchLimit = 1，按时间排序的获取请求实际上不是一个坏选择。您甚至可以在模型 GUI 中将时间戳字段设置为 INDEX，查找速度会非常快。

如果数据库会不断变化，并且您总是希望访问最近的项目，请考虑在 NSManagedObjectContext 上注册 DidSave 通知。

您可以在保存上下文时调用（甚至在任何对象发生更改时）。在通知方法中，只需查看插入的项目，然后更新以获取最新值。

您可以搜索插入的对象，并获取具有最大时间戳的匹配实体。

保存和对象更改的通知是：

NSManagedObjectContextDidSaveNotification NSManagedObjectContextObjectsDidChangeNotification**

# android - 如何查看所有正在运行或被阻止的异步任务？

> ID：10564493
> 
> 赞同：1
> 
> 时间：2012-05-12T14:13:56.897
> 
> 标签：android, android-asynctask, blocking

根据[这个问题](https://stackoverflow.com/questions/9654148/android-asynctask-threads-limits)，正在运行的异步任务的数量是有限制的。我在多个活动中使用 asynctasks，并且在每个活动中，我在执行新任务之前取消正在运行的 asynctask（如果有）。但我仍然有阻塞问题，我怀疑异步任务被完全取消。我的问题是“有没有办法查看所有正在运行和阻塞的异步任务？”

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T14:17:15.977

1.  **AsyncTask 在 ThreadPool 中执行**。在 HoneyComb 之前默认大小是 5。在默认大小之后是 1。
2.  当您调用`AsyncTask.cancel()`. 线程没有完全取消。

# c++ - 没有被读取的空隙

> ID：10564498
> 
> 赞同：0
> 
> 时间：2012-05-12T14:14:50.960
> 
> 标签：c++, void

我正在开发一款类似 Arena 的主机游戏。我想要它，这样我就可以让你与某些怪物战斗，而不是每次都必须与怪物战斗。这是我的代码：

```
#include <iostream>
#include <conio.h>
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <fstream>

using namespace std;

char select;
int randnum;
int level=1;
int maxhp=10;
int hp=maxhp;
int mhp;
int exp;
int dmg;
int m_maxhp;
int req_exp=10;
int day;
char boot;
int a;

ifstream leveli;
ofstream levelo;

ifstream playerhpi;
ofstream playerhpo;

ifstream expi;
ofstream expo;

ifstream maxhpi;
ofstream maxhpo;

ifstream req_expi;
ofstream req_expo;

ifstream dayi;
ofstream dayo;

void wait( time_t delay )
{
time_t timer0, timer1;
time( &timer0 );
do {
time( &timer1 );
} while (( timer1 - timer0 ) < delay );
}

// This is the void that's not being called
void bat()
{

    m_maxhp=10;
    mhp=m_maxhp;
    do{
    dmg= rand() % 4 + 1;
    cout << "Batt attacks you for " << dmg;
    hp=hp-dmg;
    cout << ", leaving you with [" << hp << "/" << maxhp << "]" << endl;
    wait(1);

    if(hp<=0)
    {
        cout << "You've lose. Try harder next time.";
        exp=exp/2;
        day=day+1;

        dayo.open("daynumber.dat");
        dayo << day;
        dayo.close();
    }

    else if(mhp<=0)
    {
        cout << "You have killed the Bat. You gain 6 EXP." << endl;
        exp=exp+6;
        day=day+1;

        dayo.open("daynumber.dat");
        dayo << day;
        dayo.close();

        expo.open("experience.dat");
        expo << exp;
        expo.close();
    }

        }while(mhp>0);
    }

int main()
{

leveli.open("level.dat");
leveli >> level;
leveli.close();

playerhpi.open("health.dat");
playerhpi >> hp;
playerhpi.close();

expi.open("experience.dat");
expi >> exp;
expi.close();

maxhpi.open("maxhealth.dat");
maxhpi >> maxhp;
maxhpi.close();

req_expi.open("req_exp.dat");
req_expi >> req_exp;
req_expi.close();

cout << "Data successfully loaded. Start the game now? y/n" << endl;
boot=_getch();

if(boot=='n')
{

    cout << "Exiting..." << endl;
    wait(3);
    exit(0);
}

else if(boot=='y'){
do{
if (exp==req_exp)
{
    level=level+1;
    cout << "Level Up! You are now level " << level << "!" << endl;

    exp=0;
    req_exp=req_exp*1.5;

    req_expo.open("req_exp.dat");
    req_expo << req_exp;
    req_expo.close();

    levelo.open("level.dat");
    levelo << level;
    levelo.close();
}

else{
cout << endl << "Day " << day << " in The Arena." << endl << "1\. Fight" << endl << "2\. Stats" << endl << "3\. Full Heal" << endl << "4\. Half Heal" << endl;
select=_getch();

    if(select=='1')
    {
            srand((unsigned)time(0));
            randnum = rand() % 500 + 1;

         //   cout << "*DEBUG* " << randnum << endl;

           // This part doesn't work
            if(randnum<300 && level<4)
            {
                cout << "You've been chosen to fight a Bat!" << endl;
                wait(1.5);
                void bat();

}
            else
            {

            }
    }

    else if(select=='2')
    {
        cout << endl << "Health: [" << hp << "/" << maxhp << "]" << endl << "Level: [" << level << "]" << endl << "Experience: " << "[" << exp << "/" << req_exp << "]" << endl;
        wait(0.5);
    }

    else
    {
        cout << "Invalid Command";
    }

}

}while (boot=='y');

}

return 0;
} 
```

我是否错误地使用了空隙？如果是这样，有人可以指出我应该改变什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T14:24:13.443

```
if(randnum<300 && level<4)
{
    cout << "You've been chosen to fight a Bat!" << endl;
    wait(1.5);
    void bat(); // ?
} 
```

这里的预期行为是什么？`void bat();`是一个函数声明。这只是介绍了名称`bat`，没有做任何其他事情。它不调用名为`bat`. 如果你只需要打电话`bat`，你应该写：

```
bat(); // a call to "bat" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T14:22:50.627

当您调用该函数时，您省略了返回类型，例如您的代码：

```
 // This part doesn't work
        if(randnum<300 && level<4)
        {
            cout << "You've been chosen to fight a Bat!" << endl;
            wait(1.5);
            void bat(); 
```

...

应该读：

```
 // This part doesn't work
        if(randnum<300 && level<4)
        {
            cout << "You've been chosen to fight a Bat!" << endl;
            wait(1.5);
            bat(); 
```

...

# c++ - 删除char数组时c ++堆损坏

> ID：10564503
> 
> 赞同：1
> 
> 时间：2012-05-12T14:15:26.273
> 
> 标签：c++, arrays, char, heap-memory, heap-corruption

为什么我在尝试删除 char 数组时会出现堆损坏。

下面的代码在“main()”中

```
case 'r':
        char *StrTReverse = new char;
        std::cout << "Enter a string: " << std::endl;
        std::cin  >> StrTReverse;
        std::cout << "String reversed: " << ReverseString(StrTReverse) << std::endl;
        system("pause");
        delete[] StrTReverse; <- Here the is the crash
        break; 
```

下面是 ReverseString 函数

```
char* ReverseString(char string[])
{

int StringLength = std::strlen(string);
char *NewString = new char[StringLength];

for (int i = 0, j = StringLength-1; i < StringLength;i++,j--)
{
    NewString[i] = string[j];
}
NewString[StringLength] = '\0';
return NewString;

}; 
```

我不明白为什么会这样。我是 C++ 新手，所以请记住这一点。谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T14:16:33.810

```
char *StrTReverse = new char; 
```

您不分配数组，因此不要调用`delete[]`call`delete`

代替

```
delete[] StrTReverse; 
```

和

```
delete StrTReverse; 
```

规则是调用`delete`返回的地址`new`&
调用`delete []`返回的地址`new []`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T14:17:11.653

```
char *StrTReverse = new char; 
```

这不是一个字符数组。它是指向在堆上分配的单个字符的指针。如果是数组，您需要编写如下内容：

```
char* myString = new char[100]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T14:54:57.330

指出一些明显的事情：

```
char *NewString = new char[StringLength];
...
NewString[StringLength] = '\0'; 
```

如果你分配一个`StringLength`字符数组，你可以合法寻址的最后一个索引是`StringLength - 1`因为数组从 0 开始。

tl; dr：分配`StringLength + 1`字符。

# delphi - FireMonkey 有什么类似于 GetSystemMetrics 的吗？

> ID：10564505
> 
> 赞同：4
> 
> 时间：2012-05-12T14:16:05.273
> 
> 标签：delphi, firemonkey

我正在使用 Delphi 2010 重写一个旧应用程序，我想在我的代码中放置占位符，以便将其移植到 XE2。只是好奇 FireMonkey 是否具有 GetSystemMetrics 的等价物。我特别感兴趣：

*   GetSystemMetrics(SM_CXSCREEN)
*   GetSystemMetrics(SM_CYSCREEN)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T22:27:29.070

如果您只需要主监视器大小，而不是桌面大小（*n 个*监视器总和），则可以使用：

```
uses ..., FMX.Platform;

var
  p: TPointF;
begin
  p := Platform.GetScreenSize;
  ShowMessage(Format('X: %f' + LineFeed + 'Y: %f', [p.X, p.Y])); 
```

![视窗](../Images/d646270fb6f71a93fa8f835fc428bda6.png) ![操作系统](../Images/e94fa95001d152ad6a738bec5b330271.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T14:26:50.140

事实上`SM_CXSCREEN`，`SM_CYSCREEN`可能根本不应该使用。这只是告诉你主显示器的尺寸。在这些多显示器的日子里，这并不是非常有用。在 VCL 代码中，您应该使用`Screen.Monitors[]`相关属性来获取有关您的监视器的信息。

至于 FMX，没有多显示器支持，也没有独立于平台的方法来找出屏幕尺寸指标。在您的情况下，当您使用 FMX 端口时，我会简单地使用`Screen.Monitors[]`和处理它。无论如何，当您移植到 FMX 时，您将不得不重新编写所有 GUI 代码，而这个特定问题是您最不担心的问题。

最后，当你说

> 当我将其移植到 XE2 时，我想在我的代码中放置占位符

我相信您知道移植到 FMX 不是强制性的。VCL 在 XE2 中仍然受支持和可用，我看不到它在很长一段时间内会被删除。您可以移植到 XE2 而与 FMX 无关。

# python - 从 Mapqeustapi 获取 JSON 响应

> ID：10564509
> 
> 赞同：0
> 
> 时间：2012-05-12T14:16:48.073
> 
> 标签：python, json

我正在尝试从 MapquestAPI 以 JSON 格式获取响应。使用相同的 URL，我可以从 bash 调用时得到结果

```
wget -q -O - "http://www.mapquestapi.com/geocoding/v1/batch?key=F20%2C7a%3Do5-hrtl1&callback=renderBatch&json=%7B%27locations%27%3A+%5B%7B%27street%27%3A+%2711880+San+Pablo+Ave%2C+El+Cerrito%27%7D%2C+%7B%27street%27%3A+%271780+E+Buena+Vista+Dr%2C+Orlando%27%7D%2C+%7B%27street%27%3A+%2714+Greenway+Circle%2C+Sacramento%27%7D%2C+%7B%27street%27%3A+%27160+Kingsland+St%2C+Nutley%27%7D%2C+%7B%27street%27%3A+%27816+Western+Ave%2C+Glen+Ellyn%27%7D%5D%7D,options:{thumbMaps:false}}" 
```

这样做时python方式：

```
import urllib2, urllib
import json    

url = "http://www.mapquestapi.com/geocoding/v1/batch?key=Fmjtd%7Cluua2dua20%2C7a%3Do5-hrtl1&callback=renderBatch&json=%7B%27locations%27%3A+%5B%7B%27street%27%3A+%2711880+San+Pablo+Ave%2C+El+Cerrito%27%7D%2C+%7B%27street%27%3A+%271780+E+Buena+Vista+Dr%2C+Orlando%27%7D%2C+%7B%27street%27%3A+%2714+Greenway+Circle%2C+Sacramento%27%7D%2C+%7B%27street%27%3A+%27160+Kingsland+St%2C+Nutley%27%7D%2C+%7B%27street%27%3A+%27816+Western+Ave%2C+Glen+Ellyn%27%7D%5D%7D,options:{thumbMaps:false}}"
print url

data        =  json.dumps([1,2,3])
req         = urllib2.Request(url, data, {'Content-Type': 'application/json'})
f           = urllib2.urlopen(req)
response    = f.read

print f.read 
```

这是结果

```
 <bound method _fileobject.read of <socket._fileobject object at 0x1a41bd0>> 
```

任何建议如何在 PY 中获取 JSON 输出？

# mercurial - 如何使用 Mercurial 在源代码中嵌入版本信息

> ID：10564510
> 
> 赞同：5
> 
> 时间：2012-05-12T14:17:03.213
> 
> 标签：mercurial

我想在我的源代码文件顶部嵌入一些版本信息，其中包含版本号、作者和编辑日期等信息。

有没有一种简单的方法可以用 Mercurial 做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T22:12:33.197

这在 Stackoverflow 上被问了很多，简短的回答是：你不应该这样做。

您不希望文件随着每次提交而更改，合并成为一场噩梦。

更好的选择是：

*   将版本字符串写入文件`update`
*   你有没有构建/部署脚本运行 $(hg id) 并将其放入构建中

相信我，文件中的修订字符串是 CVS/SVN 的想法。它在 git / Mercurial 世界中没有位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T23:09:48.653

正如评论和其他答案所提到的，依赖类似 CVS 的自动扩展标签并不是一个好主意。特别是因为您可以随时提取所需的任何元信息，之后几乎可以提取任何粒度。

但是，如果您真的需要它（例如，因为您的老板这么说），您可以获得的最接近的方法是使用与 mercurial 捆绑在一起的[关键字扩展。](https://www.mercurial-scm.org/wiki/KeywordExtension)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T23:10:04.533

是的，这是可能的，但您需要启用它。您所要求的基本上是[关键字 extension](http://www.mercurial-scm.org/wiki/KeywordExtension)。第一次启用时要小心（阅读关于`kwshrink`,的部分`kwexpand`），因为您不希望实际扩展的关键字成为修订历史的一部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-08T17:54:25.220

我最喜欢的方法是使用[hgversioninfo 插件](https://bitbucket.org/dowski/mercurial-version-info-plugin/overview)。它会在“hg commit”、“hg update”等动态生成一个 version.py 文件。

# c++ - 在 C++ 中使用文本文件进行身份验证

> ID：10564512
> 
> 赞同：3
> 
> 时间：2012-05-12T14:17:13.027
> 
> 标签：c++, visual-c++

我有一个包含用户名和密码的 auth.txt 文件。我的目的是在进入下一个菜单之前使用这个文件来查看用户是否输入了有效的用户名和密码。例如。auth.txt 包含用户\n 通行证。当他们选择一个菜单时，它会要求他们登录。如果他们输入错误，它什么也不做。每个密码和 usrname 都存储在 auth.txt 文件中。我尝试使用以下代码，但一无所获。请提前帮助和感谢。

```
if(getline(inauth, line)){ 

    if(line==user&& line==password){ 
    //your in

    }else cout<<"bye";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T14:28:47.200

我不是 VC++ 开发人员，但这应该是您想要完成的正确逻辑。

```
// keep looping while we read lines
while (getline(inauth, line)) 
{
    // valid user
    if (line == user) 
    {
        // read the next line
        if (getline(inauth, line2))
        {
            if (line2 == password)
            {
                // successfully authenticated
                cout << "Success!";
            } 
            else 
            {
                // valid user, invalid password
                // break out of the while loop
                break;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T14:34:31.223

您只阅读一行，然后尝试与“用户”和“密码”进行比较。那肯定行不通。您需要调用 getline 两次。不要忘记检查错误，用户身份验证永远不会太安全。尝试这样的事情：

```
ifstream inauth("Secret password herein.txt");

if (inauth) {
    string usr, psw;

    if (getline(inauth, usr) && getline(inauth, psw) {
        if (usr == user && psw == password) {
            cout << "Phew, everything's fine.";
        } else {
            cout << "Wrong password/username.";
        }
    } else {
        cout << "I guess somebody opened the file in notepad and messed it up."
    }
} else {
    cout << "Can't open file, sorry.";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T14:41:21.330

如果您的用户名和密码存储在由空格分隔的同一行中，那么您必须这样做

```
#include <sstream>

string line, username, password;
istringstream instream;
while (getline(inauth, line))
{
    // extract username and password from line using stringstream
    instream.clear();
    instream.str(line);
    instream >> username >> password;
    // do something here
} 
```

# javascript - 在框架集上显示 div 层？

> ID：10564516
> 
> 赞同：-2
> 
> 时间：2012-05-12T14:17:22.660
> 
> 标签：javascript, jquery, html, frameset

我有两个框架集，如下所示

```
<FRAMESET ROWS="*, 0">   
   <FRAME SRC="index.php" FRAMEBORDER=0 id="contentfrm" name="contentfrm">
   <FRAME SRC="music.php" FRAMEBORDER=0 id="musicfrm" name="musicfrm" NORESIZE SCROLLING="no" >  
  </noframes>    
</FRAMESET><noframes></noframes> 
```

我的第一帧是全屏网站，第二帧有一些音乐播放器，

所以当用户点击第一帧链接时，我需要为整页添加一些加载动画，

我可以在第二帧中跟踪第一帧站点的点击事件。

但我不知道如何将一些内容附加到页面的 html 4-5 秒（当前页面的 html 不是框架）。

当我点击第一个框架集链接时，谁能告诉我如何在 5-6 秒内覆盖页面（将一些 html 附加到页面上）谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T14:31:50.707

您可以在 jquery 上使用延迟 - 但如果您想允许用户取消加载第二帧，您应该使用以下代码：

```
$('#contentfrm').click(function(){
   $('.animationgif').show();
   time = setTimeout(function() {
        $('.animationgif').hide();
        $('#musicfrm').show();
    },500);
});
$('.cancel').click(function(){
   $('.animationgif').hide();
   clearTimeout(time);
}); 
```

# python - python中的简单网络开发

> ID：10564523
> 
> 赞同：0
> 
> 时间：2012-05-12T14:18:07.610
> 
> 标签：python

我曾经认为 Django 让一切都变得简单，让您快速安装服务器，编写干净的代码几乎没有任何麻烦。

在用 node.js 和 OPA 语言做了一些修修补补和小项目之后，我不再相信。相比之下，Django 感觉就像一个 Java 堆栈。然而，我仍然喜欢 python-the-language，并且想更多地使用它。

对于 python，是否有任何像 node.js 或 OPA 这样简单的 Web 框架？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T15:35:28.277

像[Flask](http://flask.pocoo.org/)这样的东西可能就在你的大街上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T16:04:20.723

也许看看[Bottle](http://bottlepy.org/docs/dev/)或[Werkzeug](http://werkzeug.pocoo.org/)

# c++ - 将ip解析为主机名

> ID：10564525
> 
> 赞同：6
> 
> 时间：2012-05-12T14:18:14.227
> 
> 标签：c++, c, sockets

我正在尝试从 IP 地址解析主机名。我尝试过使用`gethostbyaddr()`，`getnameinfo()`但在许多情况下，主机名根本没有解析。有没有更好的方法将 IP 地址转换为有效的主机名？

```
char* ip = argv[1];
// using gethostbyaddr()
hostent * phe = gethostbyaddr(ip, strlen(ip), AF_INET);
if(phe) {
  cout << phe->h_name << "\n";
}

// using getnameinfo()
char hostname[260];
char service[260];
sockaddr_in address;
memset(&address, 0, sizeof(address));
address.sin_family = AF_INET;
address.sin_addr.s_addr = inet_addr(ip);
int response = getnameinfo((sockaddr*)&address, 
                            sizeof(address), 
                            hostname, 
                            260, 
                            service, 
                            260, 
                            0);
if(response == 0) {
  cout << hostname << "\n";
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T14:47:40.793

> 我尝试过使用`gethostbyaddr()`和`getnameinfo()`[...]。有没有更好的方法将 IP 地址转换为有效的主机名？

不，`getnameinfo()`是选择的方法。

* * *

您可以检查`getnameinfo()`反对的结果`EAI_AGAIN`，如果相等，则重试请求。

* * *

也收到`EAI_OVERFLOW`并不意味着你没有得到回应。无论如何，当您提供 259 个字符来放置结果时，您很可能不会得到`EAI_OVERFLOW`... ;-)

* * *

顺便说一句：[*excanoe*](https://stackoverflow.com/users/474967/excanoe)对坚持和... [的评论](https://stackoverflow.com/questions/10564525/resolve-ip-to-hostname/10564726#comment13675669_10564525)是正确的-并且以某种方式被弃用。处理它们的结果也很复杂，并且容易引发编程错误。`getaddrinfo()``getnameinfo()``gethostbyaddr()``gethostbyname()`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-12T14:53:59.823

我使用的是 Windows 很抱歉（如果你使用 *nix，你可以跳过 WSADATA 部分）关于这个版本:)

```
 #include <stdio.h>
  #include <stdlib.h>
  #include <stdint.h>

  #include <winsock2.h>

  int main(){
    struct addrinfo    hints;
    struct addrinfo   *res=0;
    int       status;

    WSADATA   wsadata;
    int statuswsadata;
    if((statuswsadata=WSAStartup(MAKEWORD(2,2),&wsadata))!=0){
      printf("WSAStartup failed: %d\n",statuswsadata);
    }

    hints.ai_family   =AF_INET;

    status=getaddrinfo("87.250.251.11",0,0,&res);

    {
      char host[512],port[128];

      status=getnameinfo(res->ai_addr,res->ai_addrlen,host,512,0,0,0);

      printf("Host: %s",host);

      freeaddrinfo(res);
    }
  } 
```

我明白了：

```
d:\temp\stack>ip
Host: yandex.ru 
```

87.250.251.11是主机yandex.ru的网络地址：

```
C:\Users\user>ping yandex.ru

Pinging yandex.ru [87.250.251.11] with 32 bytes of data:
Reply from 87.250.251.11: bytes=32 time=21ms TTL=56
Reply from 87.250.251.11: bytes=32 time=21ms TTL=56
Reply from 87.250.251.11: bytes=32 time=21ms TTL=56

Ping statistics for 87.250.251.11:
    Packets: Sent = 3, Received = 3, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
    Minimum = 21ms, Maximum = 21ms, Average = 21ms 
```

希望这可以帮助。

# c# - 使用 C# 在 asp.net 中发布多个数据并取回响应

> ID：10564538
> 
> 赞同：0
> 
> 时间：2012-05-12T14:20:43.463
> 
> 标签：c#, asp.net, post, response

我正在尝试使用带有 C# 的 asp.net 在“http://www.indianrail.gov.in/cgi_bin/inet_srcdest_cgi_time.cgi”上发布数据。问题是我使用的代码无法发布多个数据。当我在“http://www.indianrail.gov.in/cgi_bin/inet_trnnum_cgi.cgi”上仅发布一个数据时，此代码可以正常工作，但是当我尝试发布多个数据时，这不起作用。每个输入数据还附加一个隐藏字段，那么我与该隐藏字段有什么关系。

```
 ASCIIEncoding encoding = new ASCIIEncoding();
    string postData = "lccp_src_stncode=" + src;
    postData += ("&lccp_dstn_stncode=" + des);
    byte[] data = encoding.GetBytes(postData);
    HttpWebRequest myRequest =  (HttpWebRequest)WebRequest.Create("http://www.indianrail.gov.in/cgi_bin/inet_srcdest_cgi_time.cgi");
    myRequest.Method = "POST";
    myRequest.UserAgent = "Mozilla/5.0 (Windows NT 6.1; rv:11.0) Gecko/20100101 Firefox/11.0";
    myRequest.ContentType = "application/x-www-form-urlencoded";
    myRequest.ContentLength = data.Length;
    Stream newStream = myRequest.GetRequestStream();
    // Send the data.
    newStream.Write(data, 0, data.Length);
    newStream.Close();

    HttpWebResponse response = (HttpWebResponse)myRequest.GetResponse();

    //Get the stream containing content returned by the server.
    newStream = response.GetResponseStream();

    // Open the stream using a StreamReader for easy access.
    StreamReader reader = new StreamReader(newStream,Encoding.UTF8);

    // Read the content.
    string responseFromServer = reader.ReadToEnd();

    File.WriteAllText(@"C:\Users\Zohaib\Documents\Visual Studio 2010\WebSites\WebSite4\App_Data\data.txt", responseFromServer);
    // Clean up the streams.
    reader.Close();
    newStream.Close();
    response.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T15:27:59.263

在 POST 中，您只需提供数据流。该流是否包含“两个”事物，您只需将两者序列化到流中。在您的情况下，如果您想发送多个查询字符串参数，只需在调用 GetBytes 之前将其添加到字符串中

# php - Wordpress 多个循环 - 查询单个最近的帖子 - 每个帖子的单独类

> ID：10564542
> 
> 赞同：0
> 
> 时间：2012-05-12T14:21:44.227
> 
> 标签：php, wordpress, loops

我的目标是使用多个 wordpress 循环分别为给定类别中的每个帖子设置样式。我确实相信除了实际查询外，我大部分都已经弄清楚了。

我需要能够在第一个循环中查询一个类别中的 {MOST RECENT} 帖子，然后在第二个循环中查询一个类别中的第二个最近的帖子，然后在下一个循环中查询第三个最近的帖子，使我能够每个都有单独的类和样式。

任何帮助都会很棒+++！！

```
<?php if (have_posts()) : ?>
           <?php query_posts('category_name=Main&posts_per_page=1&={MOST RECENT}'); ?>
               <?php while (have_posts()) : the_post(); ?>    

                            <div class="row1">
                                <div class="one">
                                    <div class="post_data">
                                        <div class="icons_right"><img src="pop_out_icon.png" alt="pop out icon" /></div>
                                        <h1 class="post_title"><a href="<?php the_permalink() ?>" rel="bookmark" title="Permanent Link to <?php the_title_attribute(); ?>"><?php the_title(); ?></a></h1>
                                        <h2 class="post_snippet">Lorem Ipsum Dolar Sit Amet.</h2>
                                        <p class="post_date"><?php the_time('F jS, Y') ?> by <?php the_author_posts_link() ?></p>
                                    </div> <!-- post_data //-->
                                <?php the_content(); ?>
                            </div>  <!-- 1 //-->
               <?php endwhile; ?>

                 <?php query_posts('category_name=Main&posts_per_page=1&={SECOND MOST RECENT}'); ?>
               <?php while (have_posts()) : the_post(); ?>    

                            <div class="row2">
                                <div class="two">
                                    <div class="post_data">
                                        <div class="icons_right"><img src="pop_out_icon.png" alt="pop out icon" /></div>
                                        <h1 class="post_title"><a href="<?php the_permalink() ?>" rel="bookmark" title="Permanent Link to <?php the_title_attribute(); ?>"><?php the_title(); ?></a></h1>
                                        <h2 class="post_snippet">Lorem Ipsum Dolar Sit Amet.</h2>
                                        <p class="post_date"><?php the_time('F jS, Y') ?> by <?php the_author_posts_link() ?></p>
                                    </div> <!-- post_data //-->
                                <?php the_content(); ?>
                            </div>  <!-- 2 //-->
               <?php endwhile; ?>

     <?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T15:26:49.063

我注意到虽然您想使用不同的循环来定义独特的类，但您的循环块在很大程度上是相同的。如果您只想更改元素的类，则无需使用三个单独的循环，因为这会使您的模板混乱并最终比使用单个循环慢得多。

您还应该避免使用 query_posts，因为它会覆盖默认的 Wordpress 循环，并且可能会产生意想不到的后果，尤其是在您忘记重置查询时。

循环中帖子的顺序默认为最近的帖子，因此您无需担心设置排序参数。

使用您的示例，我重新设计了所有内容以将动态类应用于您的包装器，具体取决于循环经历了多少次迭代。请记住，您可以使用帖子本身的属性来定义您的类以使其唯一（在这种情况下，使用帖子 ID）：

```
<?php
$count = 0;
$postsPerRow = 4; //<-- This will help set your top wrapper
$query = new WP_Query('category_name=Main&posts_per_page=3');
if ($query->have_posts()) : while ($query->have_posts()) : $query->the_post();
if($count<(floor($query->found_posts/$postsPerRow)*$postsPerRow)){
    $open = !($count%$postsPerRow) ? '<div class="row row-'.(floor($count/$postsPerRow)+1).'">' : '';
    $close = !($count%$postsPerRow) && $count ? '</div>' : '';
    echo $close.$open;
?>    
    <div class="<?php echo "loop-$count post-".get_the_ID(); ?>">
        <div class="post_data">
            <div class="icons_right">
                <img src="pop_out_icon.png" alt="pop out icon" />
            </div>
            <h1 class="post_title">
                <a href="<?php the_permalink() ?>" rel="bookmark" title="Permanent Link to <?php the_title_attribute(); ?>"><?php the_title(); ?></a>
            </h1>
            <h2 class="post_snippet">Lorem Ipsum Dolar Sit Amet.</h2>
            <p class="post_date"><?php the_time('F jS, Y') ?> by <?php the_author_posts_link() ?></p>
        </div> <!-- post_data //-->
        <?php the_content(); ?>
    </div>  <!-- 1 //-->
<?php
$count++;
}
endwhile;endif;
echo $count ? '</div>' : ''; //<-- Close row wrapper
?> 
```

**更新：**现在您的顶级包装器将每行存储 4 个帖子。这可以根据需要通过 $postsPerRow 变量进行调整，并且您可以随时根据需要增加 Posts_per_page 参数。

**编辑 2：**使用[WP Query](http://codex.wordpress.org/Class_Reference/WP_Query)具有分离出您可能需要的值的额外好处。查看代码以更新您的最新问题。

# c++ - C++ 编译器问题

> ID：10564544
> 
> 赞同：-1
> 
> 时间：2012-05-12T14:22:05.963
> 
> 标签：c++, compiler-construction

我只是想知道 C++ 编译器如何处理某些事情：
首先，我如何找出我拥有的 C++ 编译器？（gcc？gnu？或其他东西......）
那么，当我编写windows gui时，编译器如何隐藏控制台窗口？
（或者是在代码中隐藏控制台？）
另外，编译时如何包含 dll？
还有什么地方可以让我了解有关我的编译器的所有其他信息吗？

编辑：@StuartGolodetz 我想我有 minGW，实际上（我正在使用 DevCpp）；当我问如何隐藏控制台窗口或如何包含 dll 时，我的意思不是如何在我正在使用的 IDE 中进行设置，而是如何*在命令行中进行设置？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T14:29:21.127

很难回答的问题，因为您的系统上可能有许多不同的编译器，这实际上是您*使用*哪个编译器的问题:) 也就是说，`gcc`/`g++`是基于 UNIX 的系统上`Visual C++`的通用编译器，并且是Windows - 您很有可能会使用其中之一。

如果你在一个基于 UNIX 的系统上，并且你想知道你是否有`g++`，比如说，你可以这样做：

```
which g++ 
```

要找出哪个版本（如果有的话），请执行以下操作：

```
g++ --version 
```

* * *

就在您编写 Windows GUI 时 Visual C++ 隐藏控制台窗口而言，如果您在项目设置中将子系统设置为 Windows，它就不会显示它。

* * *

编译时不包含 DLL，链接`.lib`对应于它们的文件，然后确保可以在运行时找到它们。请注意编译和链接之间的（重要）区别。这似乎是一个合理的链接：

[http://edmulroy.portbridge.com/oview.htm](http://edmulroy.portbridge.com/oview.htm)

* * *

假设您的编译器是 Visual C++（听起来就是这样），您只需阅读 MSDN。

* * *

编辑：

针对您的新问题，请参见此处：

[如何停止 Mingw (g++) 在 Windows 中打开控制台窗口](https://stackoverflow.com/questions/4441551/how-to-stop-mingw-g-opening-a-console-window-in-windows)

关于。DLL，您不包含它们 - 您使用 DLL 链接到 DLL 的导入库，`-l<libname>`然后确保 DLL 本身与可执行文件位于同一目录中，或者在运行时位于系统路径中。

# javascript - 表单提交错误

> ID：10564545
> 
> 赞同：0
> 
> 时间：2012-05-12T14:22:11.493
> 
> 标签：javascript, jquery, forms, submission

在提交表单之前，我正在使用脚本来验证一些表单字段。如果验证失败，脚本应该返回 false。在 linux 上，该脚本在 FF、Chrome 和 Opera 中运行良好。在 Windows 上，脚本失败，表单在 Chrome、Safari 和 IE 上提交。您的想法将不胜感激。

```
$(document).ready(function(){    
    // Place ID's of all required fields in the array.
    required=["formname","formemail"];
    email = $("#formemail");
    name = $("#formname");
    errornotice = $("#error");
    // The text to show up within a field when it is incorrect
    emptyerror = "Please fill out this field.";
    emailerror = "Please enter a valid e-mail.";

    $("#suggestionform").submit( function(){
         //validate required fields
         for(i =  0; i < required.length; i++){
             var input = $('#'+required[i]);
             if( (input.val() == "") || (input.val() == emptyerror)){
                 input.addClass("needsfilled");
                 input.val(emptyerror);
                 errornotice.fadeIn(750);
             }else {
                 input.removeClass("needsfilled");
             }
         }         
         if( !/^([a-zA-Z0-9_.-])+@(([a-zA-Z0-9-])+.)+([a-zA-Z0-9]{2,4})+$/.test(email.val())){
             email.addClass("needsfilled");
             email.val(emailerror);
         }         
         if ( "" == name.val()){
             name.addClass("needsfilled");
             name.val(emptyerror);
         }
         if( $("#link1").val() + $("#link2").val() + $("#link3").val() + $("#link4").val() +  $("#textarea1").val() + $("#textarea2").val() == "") {
             errornotice.fadeIn(750);
             alert("returning fail")
             return false;
         }
         if( $(":input").hasClass("needsfilled")){
             alert("returning fail here")
             return false;
         }else{errornotice.hide();return true;}      
    });   

    $(":input").focus( function(){
        if ($(this).hasClass("needsfilled")){
            $(this).val("");
            $(this).removeClass("needsfilled");
        }
    })    
});

Version 2
 var required=["formname","formemail"];
var email = $("#formemail");
var name = $("#formname");
var errornotice = $("#error");
// The text to show up within a field when it is incorrect
var emptyerror = "Please fill out this field.";
var emailerror = "Please enter a valid e-mail.";

function suggestionSubmit(theform){
    required=["formname","formemail"];
    email = $("#formemail");
    name = $("#formname");
    errornotice = $("#error");
    // The text to show up within a field when it is incorrect
    emptyerror = "Please fill out this field.";
    emailerror = "Please enter a valid e-mail.";    

    for(i =  0; i < required.length; i++){
             var input = $('#'+required[i]);
             if( (input.val() == "") || (input.val() == emptyerror)){
                 input.addClass("needsfilled");
                 input.val(emptyerror);
                 errornotice.fadeIn(750);
             }else {
                 input.removeClass("needsfilled");
             }
         }         
     if( !/^([a-zA-Z0-9_.-])+@(([a-zA-Z0-9-])+.)+([a-zA-Z0-9]{2,4})+$/.test(email.val())){
         email.addClass("needsfilled");
         email.val(emailerror);
     }         
     if ( "" == name.val()){
         name.addClass("needsfilled");
         name.val(emptyerror);
     }
     if( $("#link1").val() + $("#link2").val() + $("#link3").val() + $("#link4").val() +  $("#textarea1").val() + $("#textarea2").val() == "") {
         errornotice.fadeIn(750);
         return false
     }
     if( $(":input").hasClass("needsfilled")){
         return false;
     }
     else{errornotice.hide();return true;}     
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T14:28:01.527

你可以试着这样写

```
$(document).ready(function(){    
// Place ID's of all required fields in the array.
required=["formname","formemail"];
email = $("#formemail");
name = $("#formname");
errornotice = $("#error");
// The text to show up within a field when it is incorrect
emptyerror = "Please fill out this field.";
emailerror = "Please enter a valid e-mail.";

$("#suggestionform").submit( function(event){
     //validate required fields
     for(i =  0; i < required.length; i++){
         var input = $('#'+required[i]);
         if( (input.val() == "") || (input.val() == emptyerror)){
             input.addClass("needsfilled");
             input.val(emptyerror);
             errornotice.fadeIn(750);
         }else {
             input.removeClass("needsfilled");
         }
     }         
     if( !/^([a-zA-Z0-9_.-])+@(([a-zA-Z0-9-])+.)+([a-zA-Z0-9]{2,4})+$/.test(email.val())){
         email.addClass("needsfilled");
         email.val(emailerror);
     }         
     if ( "" == name.val()){
         name.addClass("needsfilled");
         name.val(emptyerror);
     }
     if( $("#link1").val() + $("#link2").val() + $("#link3").val() + $("#link4").val() +  $("#textarea1").val() + $("#textarea2").val() == "") {
         errornotice.fadeIn(750);
         alert("returning fail")
         event.preventDefault();
         return false;
     }
     if( $(":input").hasClass("needsfilled")){
         alert("returning fail here")
         event.preventDefault();
         return false;
     }else{errornotice.hide();return true;}      
}); 
```

希望能帮助到你。

# javascript - Lightbox to 和 Flexslider 之间的冲突

> ID：10564546
> 
> 赞同：0
> 
> 时间：2012-05-12T14:22:15.787
> 
> 标签：javascript, jquery, lightbox, conflict, flexslider

我对 JavaScript 相当陌生，所以很难理解。但是我正在制作一个主页，我想要一个图像幻灯片和 Lightbox，我猜不同的 Js 库之间存在冲突。我还阅读了 jQuery 网站上的 No.Conflict 脚本之类的内容，但我不知道如何在我的 HTML 上实现。这是代码。

```
 <link rel="stylesheet" href="flexslider.css" type="text/css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
<script src="jquery.flexslider.js"></script>

<script type="text/javascript" charset="utf-8">
  $(window).load(function() {
    $('.flexslider').flexslider();
  });
</script>

<script src="js/jquery-1.7.2.min.js"></script>
<script src="js/lightbox.js"></script>
<link href="css/lightbox.css" rel="stylesheet" /> 
```

如果有人可以帮助我，那将是惊人的。并把它放在最简单的形式中也将是超级的，就像我说的我很新。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T16:10:17.073

从 google 中删除第一个脚本库并在您的站点中仅添加 .js jQuery 文件

# c# - IOC 与 MVC 多个注册相同的接口

> ID：10564550
> 
> 赞同：2
> 
> 时间：2012-05-12T14:22:38.440
> 
> 标签：c#, asp.net-mvc, dependency-injection, inversion-of-control, ninject

一个人如何为 IOC 的某个接口注册多个数据提供者（我使用 Ninject，但您一般可以回答），例如`ISettingsRepository`由`JsonSettingsProvider`and实现`XmlSettingsProvider`。

我正在将我的数据（在这种情况下为设置）从 XML 迁移到 JSON，并且需要在应用程序中同时使用它们（不是在其中一个之间选择，而是在运行时同时使用）。所以我需要基于 XML 的提供程序来读取序列化的内容并使用 JSON 提供程序将其序列化为 JSON。

```
public class WebSettings
{
    [Inject] 
    private ISettingsRepository _repository;

    private void Load()
    {
        _repository = DependencyResolver.Current
            .GetService<ISettingsRepository>();

        ... 
```

现在我将进行注册，例如：

```
kernel.Bind<ISettingsRepository>()
    .To<XmlSettingsProvider>()
    .InRequestScope(); 
```

希望你明白我的意思。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T15:45:33.710

我尝试过但无法使用 Factory 做到这一点。

**但是你可以看看stackoverflow上的这个线程**

[Ninject：通过类型解析对象_and_注册名称/标识符](https://stackoverflow.com/questions/533260/ninject-resolving-an-object-by-type-and-registration-name-identifier)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T15:32:23.990

我知道统一（[msdn 上的链接](http://msdn.microsoft.com/en-us/library/ee649707%28v=pandp.20%29)）支持多个相同类型的命名实例：

```
public IUnityContainer RegisterInstance(
    Type t,
    string name,
    Object instance,
    LifetimeManager lifetime
) 
```

然后当你解决时，只需传递所需实例的名称。

# android - 安卓设备之间的通信

> ID：10564553
> 
> 赞同：0
> 
> 时间：2012-05-12T14:23:33.217
> 
> 标签：android, sockets, tcp, communication

我正在编写一个基本上已经完成并且在单个设备上运行良好的 android 应用程序。我现在需要在两台不同的机器之间建立通信并来回发送信息。

问题是我对如何做到这一点知之甚少，而且所有不同的指南都没有向初学者提供任何有关它的信息。

我知道我需要使用第三方服务器，但找不到在哪里购买以及如何与之通信的信息。

你能告诉我我应该询问哪些技术吗？我应该学习什么？哪些 API 应该对我有帮助？

问候，弗拉基米尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T14:25:40.763

我认为 App Engine 是您的最佳选择。

[应用引擎](https://appengine.google.com/)

# login - 注销主窗口后，弹出窗口链接仍然有效

> ID：10564555
> 
> 赞同：1
> 
> 时间：2012-05-12T14:23:49.630
> 
> 标签：login, struts2, logout, interceptor

我正在使用 struts 2 登录拦截器。代码工作正常。在我的应用程序中使用了许多弹出窗口。当我打开我的弹出窗口并从我的主窗口中注销时，弹出窗口显示我编码时的登录页面但仅适用于这种情况，我希望它会显示任何消息（会话已过期或你有已注销）而不是登录页面。

如果需要任何修改，请通过我的代码

# 登录拦截器.java

```
public class LoginInterceptor extends AbstractInterceptor implements
        StrutsStatics{

        private AdminUserSessionInfo objAdminUserSessionInfo = new AdminUserSessionInfo();

    private static final long serialVersionUID = 1L;

    private static final Log log = LogFactory.getLog(LoginInterceptor.class);

    private static final String LOGIN_ATTEMPT = "loginAttempt";

    private static final String LOGIN_OUT = "loginOut";

    private static final String USER_HANDLE = "loggedInUser";

    Map sessionMap = null;

    public void init() {
        log.info("Intializing LoginInterceptor");
    }

    public void destroy() {
    }

    public String intercept(ActionInvocation invocation) throws Exception {

        final ActionContext context = invocation.getInvocationContext();

        HttpServletRequest request = (HttpServletRequest) context
                .get(HTTP_REQUEST);

        HttpServletResponse response = (HttpServletResponse) context
        .get(HTTP_RESPONSE);

        response.setHeader("Cache-Control", "no-store");

        response.setHeader("Pragma", "no-cache");

        response.setDateHeader("Expires", 0);

        HttpSession session = request.getSession(true);

        Object user = session.getAttribute(USER_HANDLE);

        String loginOut = request.getParameter(LOGIN_OUT);  

        if (user == null) {         

            String loginAttempt = request.getParameter(LOGIN_ATTEMPT);              

            System.out.println("loginAttemp---->"+loginAttempt);

            /* The user is attempting to log in. */
            if (!StringUtils.isBlank(loginAttempt)) {   

                return invocation.invoke();
            }
            return "login";
        } else {

            return invocation.invoke();
        }

    } 
```

# web.xml

```
<interceptors>  
        <interceptor class="org.iaf.aos.common.LoginInterceptor"
            name="loginInterceptor"></interceptor>          
        <interceptor-stack name="loginStack">
            <interceptor-ref name="loginInterceptor" />
            <interceptor-ref name="defaultStack" />
        </interceptor-stack>        
    </interceptors>

    <default-interceptor-ref name="loginStack"></default-interceptor-ref>
    <global-results><result name="login">aos.jsp</result></global-results>  
        <action name="checkUserLogin" class="org.iaf.aos.web.login.action.AdminUserAction" method="checkUserLogin">
                        <!-- <result name="success">index.jsp</result> -->
                        <interceptor-ref name="loginStack"></interceptor-ref>
                        <result name="success" type="chain">HomePage</result>
                        <result name="error">WEB-INF/jsp/admin/Error.jsp</result>
                        <result name="selectRole">aos1.jsp</result>
                        <!--<result name="selectRole">WEB-INF/jsp/admin/SelectRole.jsp</result>-->
                    </action>

                <action name="home">
                    <!--  <result>index.jsp</result>-->
                    <interceptor-ref name="loginStack"></interceptor-ref>
                    <result name="success" type="chain">HomePage</result>
                </action>

                <action name="logOutUser" class="org.iaf.aos.web.login.action.LogOutUserAction">                    
                    <interceptor-ref name="loginStack"></interceptor-ref>                   
                    <result name="logout">WEB-INF/jsp/admin/LoggedOut.jsp
                    </result>
                </action> 
```

# LogOutUserAction.java

```
public class LogOutUserAction extends ActionSupport {

    private static final long serialVersionUID = 1L;

public String execute() throws Exception { 
      System.out.println("inside :: LogOutUserAction------");

      Map session = ActionContext.getContext().getSession();

  session.remove("loggedInUser"); 
  return "logout";
  }
} 
```

# 注销.jsp

```
<td width="*" align="right" valign="top">                                   
                                    <s:url var="urlLogOut" action="logOutUser.action">                              
                                        <s:param name="loginOut" value="%{'2'}"/>                                       
                                    </s:url>
                                    <sx:a href="%{#urlLogOut}" targets="divAddEditUser">
                                        <font color="white">Log Out</font>
                                    </sx:a>
                                        <!--<a href="logOutUser.action"><font color="white">Log Out</font></a>
                                    --></td>
                                </tr> 
```

# AdminUserAction.java

```
 ServletActionContext.getRequest().getSession().setAttribute("loggedInUser", loginId);

    return "selectRole"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T18:47:01.060

您必须明确地编写该逻辑，默认情况下不会这样做。

在从会话中删除用户后的注销操作中，也将其无效。

```
session.remove("loggedInUser"); 
session.invalidate();
session = null; 
```

然后在您的拦截器中检查会话是否有效，如果不是，则添加一个属性，说明您的会话已过期或您已注销。

所以你的拦截器代码变成了这样：

```
HttpSession session = request.getSession(true);
if(session == null){
   request.setAttribute("SessionExpired","Your session has expired or you have logged out");
}
Object user = session.getAttribute(USER_HANDLE); 
```

然后，如果您的 jsp 页面在您显示登录屏幕时检查请求是否具有“SessionExpired”属性，如果是则向用户显示。

# ajax - ASP.NET MVC3 ajax 局部视图刷新

> ID：10564556
> 
> 赞同：2
> 
> 时间：2012-05-12T14:24:10.317
> 
> 标签：ajax, asp.net-mvc-3, partial-views

我在 asp.net mvc3 中遇到 ajax 更新 div 的问题。

我有一个包含内容的视图

```
<div id="post_comments">
   @{Html.RenderPartial("_RefreshComments", Model);}
 </div>
<div id="commentForm">
@using (Ajax.BeginForm("Details", new { id = Model.Post.PostId }, new AjaxOptions
           {
              HttpMethod = "POST",
              InsertionMode = InsertionMode.InsertAfter, 
              UpdateTargetId = "post_comments"
            }
          ))
{
// form content goes here
<p id="buttons">
    <input type="submit" value="@Strings.Save" />
</p>
} 
```

这是我的部分观点

```
@model Project.Models.Posts.PostDetailsViewModel   

@{ 
    foreach (var c in Model.ApprovedComments)
    { 
        @Html.DisplayFor(x => c)        
    } 
} 
```

我有一个控制器

```
public ActionResult Details(int id, FormCollection form )
{
    var model = new PostDetailsViewModel(UnitOfWork, id);
    return PartialView("_RefreshComments", model);

} 
```

我的布局cshtml中包含以下脚本

```
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script> 
```

并且

```
 <appSettings>
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings> 
```

它确实有效，我可以添加评论，但控制器只返回 PartialView，不包含在布局中。我发现[ASP.net MVC3 - Razor Views and PartialViews with Ajax Postbacks](https://stackoverflow.com/questions/4888521/asp-net-mvc3-razor-views-and-partialviews-with-ajax-postbacks)但从那里没有任何帮助。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T17:48:09.613

我会使用 jquery ajax 来调用操作，然后从控制器返回部分视图。然后使用 jquery 将返回的 html 重新加载到容器中。

首先，添加一个刷新按钮或可以触发 ajax 事件的东西......然后执行以下 javascript。

做这样的事情：

```
<div id="post_comments">     
  @{Html.RenderPartial("_RefreshComments", Model);}    
</div>
<div id="commentForm">
  @using (Ajax.BeginForm("Details", new { id = Model.Post.PostId }, new AjaxOptions    
  {
     HttpMethod = "POST",
     InsertionMode = InsertionMode.InsertAfter, 
     UpdateTargetId = "post_comments"
  }
))
{
// form content goes here
<p id="buttons">
  <input type="submit" value="@Strings.Save" />
  <input type="button" id="refreshButton" value="Refresh" />"
</p>
}

$('#refreshButton').click(function(){
   $.ajax({
      url: 'controller/Details.aspx',
      datatype: 'html',
      success: function(data) {
         $('#post_comments').empty().html(data);
      }
   }); 
}); 
```

显然，url 需要成为您操作的路径。除此之外，这对你来说应该很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-04T19:53:42.003

用法：

```
 function onUploadComplete()
    {
        @Ajax.Update("targetId", helper => helper.Action("ActionName"))
    } 
```

和代码：

```
 /// <summary>
    /// I'd rather stab myself in the eye with a fork than bothering with php ever again and living without extension methods
    /// </summary>
    /// <param name="helper">makes sense to make it available here. who likes dozens of new helper classes</param>
    /// <param name="updateTargetId">simple enough</param>
    /// <param name="actionUrlFactory">resharper will show if we're messing stuff up. hurray.</param>
    /// <param name="isAsync">speaks for itself</param>
    /// <param name="options">might as well reuse that one for callbacks</param>
    /// <returns>generated code with compile time checks</returns>
    public static IHtmlString Update(this AjaxHelper helper, string updateTargetId, Func<UrlHelper, string> actionUrlFactory, bool isAsync = true, AjaxOptions options = null)
    {
        var requestUrl = actionUrlFactory(new UrlHelper(helper.ViewContext.RequestContext));
        if (options == null)
        {
            options = new AjaxOptions()
            {
                AllowCache = false,
                HttpMethod = "GET"
            };
        }

        string cache = options.AllowCache ? "true" : "false";
        string success = options.OnSuccess.Length > 0 ? ".done(" + options.OnSuccess + ")" : "";
        string fail = options.OnFailure.Length > 0 ? ".fail(" + options.OnFailure + ")" : "";
        string always = options.OnComplete.Length > 0 ? ".always(" + options.OnComplete + ")" : "";
        string isAsyncString = isAsync ? "true" : "false";

        // of course you can go way further here, but this is good enough for me. just sharing since i didn't find a nice solution here that doesnt involve writing js manually every time.
        string js = string.Format(@"
            $.ajax({{
                cache : {7},
                async : {6},
                url : '{0}',
                type : '{1}'
            }})
            .done(function(data){{
                $('#{5}').html(data);
            }});
            {2}
            {3}
            {4}
        ", requestUrl, options.HttpMethod, success, fail, always, updateTargetId, isAsyncString, cache);

        return new HtmlString(js);
    } 
```

# android - Android XML：为什么我们不能输入@drawable-mdpi，而必须输入@drawable？

> ID：10564560
> 
> 赞同：1
> 
> 时间：2012-05-12T14:24:19.580
> 
> 标签：android, xml, resources, drawable, qualifiers

我看到文件夹：

```
drawable-hdpi
drawable-mdpi
drawable-ldpi 
```

我见过无数“Type @drawable/some_image.png”和“在 res 中创建可绘制文件夹”的线程。

但是我从来没有看到关于 XML 引用任何带有限定符名称的可绘制文件夹的问题。或者基本上编写 XML 来引用具有限定符名称的任何文件夹。

为什么这没有记录？为什么 XML 不能使用限定符引用受支持的资源目录名称？是不是因为 XML 在连字符方面的限制？

我只是一个新手。我只是问问。没什么大不了的，我只是好奇。谢谢回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T14:27:34.707

因为 hdpi、mdpi、ldpi 中的资源会使用相同的 Resource ID。

操作系统确定将使用哪个资源的设备。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T14:30:42.910

这样做是为了支持多种屏幕尺寸/分辨率。

您将相同的图像（具有相同的名称）放在不同的文件夹中，修改为最适合该分辨率（通常是不同的像素密度）。当调用该图像名称时，系统会遍历这些文件夹并为正在使用的设备的屏幕分辨率选择最佳图像（在您提供的图像中）。

# c - fwrite() - 大小和计数对性能的影响

> ID：10564562
> 
> 赞同：25
> 
> 时间：2012-05-12T14:24:22.320
> 
> 标签：c, performance, io, fwrite

关于 fwrite() 中两个参数“size”和“count”的用途似乎有很多混淆。我试图弄清楚哪个会更快-

```
fwrite(source, 1, 50000, destination); 
```

或者

```
fwrite(source, 50000, 1, destination); 
```

这是我的代码中的一个重要决定，因为该命令将被执行数百万次。

现在，我可以直接跳到测试并使用能提供更好结果的那个，但问题是该代码适用于许多平台。

所以，

*   我如何才能获得跨平台哪个更好的明确答案？

*   fwrite() 的实现逻辑会因平台而异吗？

我意识到有类似的问题（[什么是 fread/fwrite 将大小和计数作为参数的理由？](https://stackoverflow.com/questions/295994/what-is-the-rationale-for-fread-fwrite-taking-size-and-count-as-arguments)，[fwrite 和写入大小的性能](https://stackoverflow.com/questions/4350785/performance-of-fwrite-and-write-size)），但请理解这是关于同一问题的不同问题。在这种情况下，类似问题的答案是不够的。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-12T15:01:21.927

**如果您考虑返回值**，则两个参数的目的会更清楚，它是成功写入/读取到流/从流中读取的对象的计数：

```
fwrite(src, 1, 50000, dst); // will return 50000
fwrite(src, 50000, 1, dst); // will return 1 
```

速度可能取决于实现，但我预计不会有任何显着差异。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-12T14:35:46.933

性能不应该取决于任何一种方式，因为任何实现 fwrite 的人都会乘以 size 和 count 来确定要执行多少 I/O。

这以 FreeBSD 的 libc 实现为例`fwrite.c`，它的整体内容如下（包括省略的指令）：

```
/*
 * Write `count' objects (each size `size') from memory to the given file.
 * Return the number of whole objects written.
 */
size_t
fwrite(buf, size, count, fp)
    const void * __restrict buf;
    size_t size, count;
    FILE * __restrict fp;
{
    size_t n;
    struct __suio uio;
    struct __siov iov;

    /*
     * ANSI and SUSv2 require a return value of 0 if size or count are 0.
     */
    if ((count == 0) || (size == 0))
        return (0);

    /*
     * Check for integer overflow.  As an optimization, first check that
     * at least one of {count, size} is at least 2^16, since if both
     * values are less than that, their product can't possible overflow
     * (size_t is always at least 32 bits on FreeBSD).
     */
    if (((count | size) > 0xFFFF) &&
        (count > SIZE_MAX / size)) {
        errno = EINVAL;
        fp->_flags |= __SERR;
        return (0);
    }

    n = count * size;

    iov.iov_base = (void *)buf;
    uio.uio_resid = iov.iov_len = n;
    uio.uio_iov = &iov;
    uio.uio_iovcnt = 1;

    FLOCKFILE(fp);
    ORIENT(fp, -1);
    /*
     * The usual case is success (__sfvwrite returns 0);
     * skip the divide if this happens, since divides are
     * generally slow and since this occurs whenever size==0.
     */
    if (__sfvwrite(fp, &uio) != 0)
        count = (n - uio.uio_resid) / size;
    FUNLOCKFILE(fp);
    return (count);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-24T00:58:17.370

我想向您指出[我的问题](https://stackoverflow.com/questions/21947743/fwrite-performance-well-below-disk-capacity/21956256)，它最终暴露了调用`fwrite`一次和`fwrite`多次调用以“分块”写入文件之间的一个有趣的性能差异。

我的问题是微软的 fwrite 实现中存在一个错误，因此无法在一次调用中写入大于 4GB 的文件（它挂在`fwrite`）。所以我不得不通过分块写入文件来解决这个问题，`fwrite`循环调用直到数据被完全写入。我发现后一种方法总是比单次`fwrite`调用返回得更快。

我在具有 32 GB RAM 的 Windows 7 x64 中，这使得写入缓存非常激进。

# google-apps-script - 来自格式化屏幕的用户确认

> ID：10564565
> 
> 赞同：0
> 
> 时间：2012-05-12T14:25:03.053
> 
> 标签：google-apps-script

我开发了一个从电子表格运行的应用程序。它有一个格式化的屏幕，即。doc.show（应用程序）。有质量变化功能。我想提示用户“您确定...可以继续”。

理想的解决方案是带有“OK to continue”响应的弹出表单。

我找不到提示用户并接受不会同时删除格式化屏幕的响应的方法。

我知道必须有一个简单的方法来做到这一点。我搜索了这个论坛和其他论坛，但找不到适用于 Google 电子表格的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T13:12:24.437

使用 GUI Builder 时，我发现了一个非常简单的解决方案，即创建一个面板或标签，它实际上掩盖了整个 UI（或它的一部分）并且通常是不可见的。当我让它可见时，我可以点击它，它再次变为不可见，我又回到了标准 UI。它使用 GUI 构建器中的功能来前后移动元素，因此遮罩非常容易（一种多层设计）。我想脚本定义的 UI 可以实现相同的行为，但我不确定如何......问候，Serge

编辑：有关信息：我刚刚使用这种技术设置了一个界面，我注意到必须恢复已变得不可见的面板及其所有元素，否则它们会重新出现空。此处使用 Clienthandlers 是一个示例，其中有两个面板和两个按钮来完成这项工作：

```
 var panhandler0 = app.createClientHandler()
     .forTargets(panel1).setVisible(false);// hide panel1 when button 'ENTER'on panel1 is pressed
   enter.addClickHandler(panhandler0);
  var panhandler1 = app.createClientHandler()
     .forTargets(panel2,msg,grid2).setVisible(true);// show panel2 when button 'ENTER' on panel1 is pressed
   enter.addClickHandler(panhandler1);
  var panhandler2 = app.createClientHandler()
     .forTargets(panel2,msg,grid2).setVisible(true);// re-show panel2 when button 'retry'on panel2 is pressed
  retry.addClickHandler(panhandler2);
  var panhandler3 = app.createClientHandler()
     .forTargets(panel2).setVisible(false);// hide panel2  when button 'retry'on panel2 is pressed
  retry.addClickHandler(panhandler3);
  var panhandler4 = app.createClientHandler()
     .forTargets(panel1,txt,grid,hpanel).setVisible(true);// re-show panel1 when button 'retry'on panel2 is pressed 
```

效果很好！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T14:46:44.223

您可以使用 Browser.MsgBox() 并在其中添加按钮以供用户确认。参考网址 [https://developers.google.com/apps-script/class_browser](https://developers.google.com/apps-script/class_browser)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T15:09:39.167

这确实不是一件容易的事情。您必须使用自己的 GUI（格式化屏幕）来显示消息。这样您就可以再次恢复 GUI 的状态。这是一个例子：

```
function uiTest() {
  var app = UiApp.createApplication().setTitle("UI");
  app.add(app.createGrid(1,1).setId('main'));
  createGUI(app,{});
  SpreadsheetApp.getActive().show(app);
}

function createGUI(app,p) {
  var panel = app.createVerticalPanel();
  var handler = app.createServerHandler('handler').addCallbackElement(panel);
  panel.add(
    app.createTextBox().setName('text').setId('text').setText(p.text ? p.text : "")).add(
    app.createButton('Do it').addClickHandler(handler));
  app.getElementById('main').setWidget(0,0, panel);
}

function handler(e) {
  var app = UiApp.getActiveApplication();
  var hidden = app.createHidden('oldValues', JSON.stringify(e.parameter));
  app.getElementById('main').setWidget(0,0, app.createVerticalPanel().add(
    hidden).add(
    app.createLabel("Question message")).add(
    app.createButton('Ok').addClickHandler(app.createServerHandler('after').addCallbackElement(hidden))));
  return app;
}

function after(e) {
  var app = UiApp.getActiveApplication();
  createGUI(app,JSON.parse(e.parameter.oldValues));
  return app;
} 
```

难度实际上取决于您需要恢复多少状态。如果没有，那就容易多了。在这个例子中，我恢复了文本框的值。您可以在那里输入任何内容，以查看它在弹出窗口后是否会出现。

# javascript - 具有值和键的数组中的语法错误

> ID：10564570
> 
> 赞同：-3
> 
> 时间：2012-05-12T14:25:18.783
> 
> 标签：javascript

这条线有什么问题。它`uncaught syntax error`在控制台中说。

```
 var aqar= new Array(1:'1_2',2:'5_1',3:'3_3'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T14:26:49.420

你在 JavaScript 中混合数组和对象。

定义数组时，数组没有键：

```
var aqar = new Array('1_2', '5_1', '3_3');  // These lines
                                            // do the same
var aqar = ['1_2', '5_1', '3_3'];           // things 
```

否则，您需要定义一个对象：

```
var aqar = { 1 : '1_2', 2 : '5_1', 3 : '3_3' }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T14:26:26.343

这是构造数组的一种奇怪方式。尝试：

```
var aqar = ['1_2','5_1','3_3'];
aquar[0]; //1_2
aquar[1]; //5_1
aquar[2]; //3_3 
```

或者如果您打算使用对象：

```
var aquar = {
    "1": "1_2",
    "2": "5_1",
    "3": "3_3"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T14:27:17.687

这不是有效的数组语法，而且从来都不是。

如果要使数组基于一个，请`null`用作第一个元素。另外，不要`new Array()`在不需要时使用：

```
var aqar = [null,'1_2','5_1','3_3]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T14:32:56.090

如果你真的想创建一个数组，通常 JavaScript 数组是`0`基于的，而不是`1`基于的，这就是你现在初始化它们的方式。

这是一个从零开始的数组

```
var aqar = ['1_2', '5_1', '3_3']; 
```

或者您可能更喜欢使用非数组对象：

```
var aqar = {
    1: '1_2',
    2: '5_1',
    3: '3_3'
}; 
```

...但那样你就不会拥有所有伟大的`Array`东西。

如果你真的想要，你可以创建一个没有元素的 JavaScript 数组，`0`如下所示：

```
var aqar = [];
aqar[1] = '1_2';
aqar[2] = '5_1';
aqar[3] = '3_3'; 
```

这将创建一个*稀疏*数组（其中有孔的数组）。它没有元素`0`。`0`（与具有value的元素相反`null`，这是另一个答案在这里所做的。）但除非你有充分的理由，否则我不会。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-12T14:33:11.437

您将数组与哈希混合。大批：

```
var a = ['1_2','5_1','3_3']; //a[0] = '1_2' 
```

哈希：

```
var a = {1:'1_2',2:'5_1',3:'3_3'}; //a[1] = '1_2' 
```

# opengl - 由于 mipmapping，GLSL 程序重复纹理坐标导致可见接缝

> ID：10564573
> 
> 赞同：1
> 
> 时间：2012-05-12T14:25:45.433
> 
> 标签：opengl, glsl, textures

我有一个无缝平铺的纹理。

在片段着色器中，我使用在某个点从 1.0 跳转到 0.0 的函数以程序方式计算纹理坐标 UVproc（此处纹理应该很好地重复）。

问题是在这个接缝处，查找似乎从最小的 mipmap 级别返回像素值。

如果我调试输出

```
out = vec4(dFdx(UVproc.x), dFdy(UVproc.y),0,1); 
```

然后我可以看到在这些像素上，这些纹理坐标的有限差异非常高，因此访问了一个小的 mipmap 级别（有道理 - 因为在这些像素处从 1 跳到 0，所以有限差异会很大）。

如果我使用 textureLod() 手动访问 mipmaplevel 0，那么我没有这个问题，但我也松散了 mipmap，一切都变得粗糙。

所以问题是：

如果在片段着色器中程序计算纹理坐标（在 0-1 范围内），如何避免可见的 mipmap 相关接缝？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T14:47:02.170

您应该使用渐变纹理采样，手动设置导数。这是它的一个功能：

```
gvec textureGrad(gsampler sampler, vec texCoord, gradvec dTdx, gradvec dTdy); 
```

# windows - 有 FlushFileBuffers 和 FILE_FLAG_NO_BUFFERING 不同用途的对比或性能表吗？

> ID：10564575
> 
> 赞同：2
> 
> 时间：2012-05-12T14:25:52.523
> 
> 标签：windows, winapi, io, flush

我将选择在每次写入文件后使用 FlushFileBuffers 或每次需要打开同一个文件时使用 FILE_FLAG_NO_BUFFERING 。

但是我没有找到任何关于使用一个或另一个选项的性能比较表。好吧，除了[MSDN 中的](http://msdn.microsoft.com/en-us/library/aa364439%28VS.85%29.aspx)这个建议：

> 如果应用程序正在对磁盘执行多次写入，并且还需要确保将关键数据写入持久媒体，则应用程序应使用无缓冲 I/O，而不是频繁调用 FlushFileBuffers。要为无缓冲 I/O 打开文件，请使用 FILE_FLAG_NO_BUFFERING 和 FILE_FLAG_WRITE_THROUGH 标志调用 CreateFile 函数。这可以防止文件内容被缓存，并在每次写入时将元数据刷新到磁盘。

所以我假设：对于会多次读写的应用程序，最好不要使用 FlushFileBuffers。但是有没有比较文章，博客，论坛帖子关于它们的使用？如果文件在写入后被关闭？我的 google-fu 还没有得到任何东西。

# azure - 使用 azure acs 和 mvc3 时检测用户登录的最佳位置是什么？

> ID：10564576
> 
> 赞同：3
> 
> 时间：2012-05-12T14:25:54.570
> 
> 标签：azure, acs, windows-identity

我希望能够检测用户何时使用被动 acs 登录我的应用程序，以便如果这是第一次使用我的应用程序，我可以将它们添加到我的数据库中。现在我正在订阅 WSFederationAuthenticationModule.SignedIn 但我觉得我错过了一些东西。主要是我不确定订阅该事件的最佳位置，我让它在 PostAuthenticateRequest 中工作，但它有点 hacky。有什么建议么？

此代码来自 global.asax

```
 public override void Init()
    {

        base.Init();

        PostAuthenticateRequest += (s, e) =>
        {
            try
            {
                FederatedAuthentication.WSFederationAuthenticationModule.SignedIn -= SignedIn;
            }
            finally
            {
                FederatedAuthentication.WSFederationAuthenticationModule.SignedIn += SignedIn;
            }

        };

    }

    private void SignedIn(object sender, EventArgs e)
    {
       //do something
    } 
```

**编辑：**

现在我将使用一个标志变量来确保我只订阅一次 SignedIn。除非有人有任何其他建议：) 感谢 Sandrino 的帮助。这是我目前所拥有的。

```
 private static bool isFirstRequest = true;

    public override void Init()
    {

        base.Init();

        PostAuthenticateRequest += (s, e) => { 
        if (isFirstRequest)
        {
             FederatedAuthentication
                 .WSFederationAuthenticationModule.SignedIn += SignedIn;
             isFirstRequest = false;
        }

        };

    }

    private void SignedIn(object sender, EventArgs e)
    {

        //do something   

    } 
```

**编辑：** 更多信息。如果我使用的是 azure 模拟器，则会出现此问题，部署时也可能会出现此问题，但我没有尝试过。我已经测试了我是否无法通过尝试写入文本文件进行调试并且没有创建文本文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T15:43:37.760

为什么每次引发 PostAuthenticateRequest 事件时都订阅**SignedIn事件？**您可以在应用程序启动时（在 Global.asax 中）简单地订阅它，它将为每个登录的用户提出：

```
public class MvcApplication : System.Web.HttpApplication
{
    ...

    protected void Application_Start()
    {
        ...

        FederatedAuthentication.ServiceConfigurationCreated += (s, e) =>
        {
            FederatedAuthentication.WSFederationAuthenticationModule.SignedIn += new EventHandler(OnUserSignedIn);
        };
    }

    private void OnUserSignedIn(object sender, EventArgs e)
    {
        // Custom logic here.   
    }
} 
```

**SignedIn**事件是在应用程序继续之前检测用户登录的最佳方式。看看下面的图表。在重定向回页面之前，会引发 SignedIn 事件以允许您检测用户登录：

![联合认证模块图](../Images/761b1210bc3d17d4d12cb936795827cc.png)

参考：http: [//msdn.microsoft.com/en-us/library/ee517293.aspx](http://msdn.microsoft.com/en-us/library/ee517293.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T22:16:28.210

我创建了一个派生自 ClaimsAuthenticationManager 的类。只有一种方法必须重写，即

```
public virtual IClaimsPrincipal Authenticate(string resourceName, IClaimsPrincipal incomingPrincipal); 
```

在我的应用程序中，我使用此方法检查已成功通过身份验证的用户是否真的是我的应用程序的用户（即它们存在于我的数据库中）。如果没有，我会将他们引导至注册页面。

我的班级看起来像这样：

```
public override IClaimsPrincipal Authenticate(string resourceName, IClaimsPrincipal incomingPrincipal)
    {
        if (incomingPrincipal.Identity.IsAuthenticated)
        {
            var identity = incomingPrincipal.Identity as IClaimsIdentity;                
            User user = null;

            // Get name identifier and identity provider
            var nameIdentifierClaim = identity.Claims.SingleOrDefault(c => c.ClaimType.Equals(ClaimTypes.NameIdentifier, StringComparison.OrdinalIgnoreCase));
            var identityProviderClaim = identity.Claims.SingleOrDefault(c => c.ClaimType.Equals(CustomClaimTypes.IdentityProviderClaimType, StringComparison.OrdinalIgnoreCase));

            if (nameIdentifierClaim == null || identityProviderClaim == null)
            {
                throw new AuthenticationErrorException("Invalid claims", "The claims provided by your Identity Provider are invalid. Please contact your administrator.");
            }

            try
            {
                //checking the database here...
                using (var context = new CloudContext())
                {
                    user = (from u in context.Users
                            where u.IdentityProvider == identityProviderClaim.Value &&
                                  u.NameIdentifier == nameIdentifierClaim.Value &&
                                  !u.Account.PendingDelete
                            select u).FirstOrDefault();
                }
            }
            catch (System.Data.DataException ex)
            {
                Console.WriteLine(ex.Message);
                if (ex.InnerException != null)
                    Console.WriteLine(ex.InnerException);
                throw;
            }

        }

        return incomingPrincipal;
    } 
```

然后，在您的 web.config 中，向该`<microsoft.identitymodel>`区域添加一个部分，如下所示：

```
 <claimsAuthenticationManager type="CloudAnalyzer.UI.Security.CloudAnalyzerClaimsAuthenticationManager" /> 
```

我从位于此处的示例应用程序中学到了这个技巧：[Windows Azure Marketplace](http://msdn.microsoft.com/en-us/WAZPlatformTrainingCourse_IntroToWAzMarketplace)。即使您不打算在 Window Azure Marketplace 中发布它也是一个很好的示例，其中包含一些可用于 ACS 集成的有用代码片段。

# jquery - HTML/Jquery mousemove 图像序列

> ID：10564577
> 
> 赞同：2
> 
> 时间：2012-05-12T14:25:57.290
> 
> 标签：jquery, html

我想制作一个全屏背景的网站。这个想法是一个图像序列正在播放，跟随鼠标位置（动画页面开始的左侧，动画页面结束的右侧）。因此，当您向左 - 向右 - 向左移动鼠标时，图像序列就像时间线一样向前和向后播放。

我尝试使用 HTML 中的区域映射来构建它，只是我必须创建 240 个地图，但坐标变得混乱（全屏/浏览器）。我知道在 jquery 中制作它会容易得多，但我不知道如何开始。

任何人都可以帮助我开始吗？预先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T14:31:01.697

## *[jsFiddle 演示](http://jsfiddle.net/DEB5C/)*

只需使用 CSS 即可使其全屏显示。

HTML：

```
<div id="mmGallery_container">
    <div id="mmGallery">
        // images here
    </div>
</div> 
```

jQuery：

```
$(window).load(function(){
    // roXon mmGallery   
    MouseRelXpos = 0;  
    sumW = 0;

    // auto-SET mmGallery_container WIDTH ()
    $('#mmGallery img').each(function(){
        sumW += $(this).width(); // collect all images widths
        $('#mmGallery').width(sumW);//SET gallery WIDTH!
    });        
    // Calculate 'compensation speed': width difference between the gallery container and the gallery
    wDiff1 = $('#mmGallery_container').width();
    wDiff2 = $('#mmGallery').width();
    wDiff = (wDiff2/wDiff1)-1;  //(-1 is for the already existant container width)        
    //#

    $("#mmGallery_container").mousemove(function(e) {
        MouseRelXpos = (e.pageX - this.offsetLeft); // = mouse pos. 'minus' offsetLeft of this element       
    });

    var xSlider = $("#mmGallery");     // cache
    var posX = 0;
    setInterval(function(){
        posX += (- MouseRelXpos - posX) / 14; // 14 = speed (higher val = slower animation)
        xSlider.css({marginLeft:  Math.round(posX * wDiff) +'px' }); // instead 'marginLeft' use 'left' for absolute pos. #mmGallery
    }, 10); // 10 = loop timeout
}); 
```

# delphi - Delphi 扩展类

> ID：10564590
> 
> 赞同：0
> 
> 时间：2012-05-12T14:28:07.507
> 
> 标签：delphi

首先，对不起，如果标题有点混乱。

我正计划开发一个小型 erp 应用程序。此应用程序将使用插件/插件。此插件可能会添加或扩展基本应用程序的某些模块。

例如，我有带有属性“id”和“name”的 TCustomer 类。插件 1 将添加一个属性“dateofbirth”。插件 2 将添加一个属性“balance”和一个方法“GetBalance”。

插件 1 和插件 2 彼此不知道。可能会安装插件 1 而不是插件 2，反之亦然。所以两个插件都必须继承基类 tcustomer 。

问题是两个插件都安装了。如何在两个插件中获得扩展属性？我还必须扩展表单以添加控件以显示新属性。

可以用delphi完成吗？实现这一目标的最佳方法是什么？也许你可以给我一些例子的文章？

感谢并为我糟糕的英语 Reynaldi 感到抱歉

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T16:53:28.467

好吧，正如您已经知道的那样，您不能有多个插件通过继承来扩展现有类。它会混淆任何应用程序，包括任何程序员处理代码。

您需要的是 TCustomer 类中的某种类型的注册机制，其中每个插件都可以注册其特定属性，或者在创建（初始化）、加载、存储或删除 TCustomer 实例时提供几个回调函数。毕竟，核心 TCustomer 真的不需要了解更多关于插件的信息，而不是它们可能存在的事实。

根据您打算如何加载/存储数据，核心 TCustomer 类甚至不必知道扩展。使持久性机制了解插件并提供一种方法来注册回调函数就足够了，以便在 TCustomer / TOrder / TWhatever 被初始化/加载/保存/删除时调用。

您还必须让 GUI 了解插件并为它们提供注册 UI 片段的方法，以便让主 GUI 为每个插件的特定控件创建一个额外的选项卡或类似的选项卡。

抱歉没有代码示例。我自己还没有实现这个，虽然我考虑过这个设计并且它在我的列表中。

也就是说，为了给您一个想法，基本机制可能如下所示：

```
TBaseObject = class; // forward declaration

// Class that each plug-in's extensions of core classes needs to inherit from.
TExtension = class(TObject)
public
  procedure Initialize(aInstance: TBaseObject);
  procedure Load(aInstance: TBaseObject);
  procedure Store(aInstance: TBaseObject);
  procedure Delete(aInstance: TBaseObject);
end;

// Base class for all domain classes
TBaseObject = class(TObject)
private
  MyExtensions: TList<TExtension>;
public
  procedure RegisterExtension(const aExtension: TExtension);
  procedure Store;
end;

procedure TBaseObject.RegisterExtension(const aExtension: TExtension);
begin
  MyExtensions.Add(aExtension);
end;

procedure TBaseObject.Store;
var
  Extension: TExtension;
begin
  // Normal store code for the core properties of a class.
  InternalStore; 
  // Give each extension the opportunity to store their specific properties.
  for Extension in MyExtensions do
    Extension.Store(Self);
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T15:36:16.520

这样的“进化”类是某种多继承。

我认为你应该更好地使用接口而不是类。

也就是说，每个插件都将提供一个类实现，但您将使用接口和接口工厂。

请参阅[这篇关于“我们为什么需要接口”](http://sergworks.wordpress.com/2011/12/08/why-we-need-interfaces-in-delphi/)的文章，或者[我们博客中关于接口和与类的比较的这篇文章](http://blog.synopse.info/post/2012/02/29/Delphi-and-interfaces)。

您可以测试一个类是否实现了接口：对于像您这样的插件系统，这可能是实现开放实现的最佳方式。[鸭打字](https://stackoverflow.com/questions/9497708/duck-typing-in-delphi-2007)非常适合插件。整个 Delphi IDE（和 Windows 本身）都在为其插件系统使用接口（通过 COM for Windows）。对于不太强大的实现模式，您可以不使用接口，而是使用后期绑定：请参阅此 SO 问题的答案。

看看[SOLID 原则](http://blog.synopse.info/post/2011/11/27/SOLID-design-principles)，尤其是*单一责任原则*。你的问题直接打破了这个原则：你试图混合客户个人信息（如姓名）和会计（如余额）。如果你的项目长大了，你可能会被这样的设计卡住。

# c++ - 在 C++ 的编译时初始化派生结构类型的变量

> ID：10564591
> 
> 赞同：3
> 
> 时间：2012-05-12T14:28:28.137
> 
> 标签：c++

我有下一个结构：

```
struct B
{
   int a;
   int b;
};

struct D: public B
{
   int c;
}; 
```

我想在编译时初始化 struct D 的一些变量，就像我要初始化 struct B 它看起来像：

```
B b1 = { value_of_a, value_of_b }; 
```

我尝试通过以下方式执行此操作，但没有编译：

```
D d1 = { { value_of_a, value_of_b } , value_of_c };
D d2 = { value_of_a, value_of_b , value_of_c }; 
```

如果我将结构更改为：

```
struct D
{
   B bb;
   int c;
}; 
```

它使用“d1”和“d2”初始化进行编译。

那么，问题是如何初始化派生结构？如果现在有初始化派生结构的规则，原因是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T14:39:53.300

您`D`派生自`B`的不是聚合（因为它有一个基类），因此您无法使用聚合初始化语法对其进行初始化。您需要使用构造函数和初始化列表。

# java - 使用 servlet 将动态图像传递给 JSP

> ID：10564594
> 
> 赞同：2
> 
> 时间：2012-05-12T14:28:46.533
> 
> 标签：java, image, jsp, servlets

我有一个桌面应用程序，它创建一个图形 2D 对象，将其粘贴在面板中并绘制它。我正在尝试使用 servlet 和 jsps 将此应用程序转换为网页。我已经在网上阅读了 2 天，无法理解如何做到这一点，我发现的每个示例似乎都遗漏了一个重要的部分。我不想将图像保存到文件，因为每个用户都会得到一个新的/不同的图像。

我可以在 servlet 中创建图像以及其他响应变量并同时将它们传递给 jsp 吗？然后使用 ${response.image} 之类的东西调用图像。这似乎更可取，但似乎不起作用。

或者我是否需要一个单独的 servlet 只用于图像（这似乎更难）？另外，如何准备 Graphics2D 对象以用作 HTML 中的图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T14:36:53.627

您需要了解的是网络浏览器必须根据`<img>`检索到的 HTML 代码中的元素的 URL 下载单个图像，而**不是**网络服务器必须以某种方式将图像的原始内容内联到生成的 HTML 代码中.

您确实需要为此创建一个独立的图像 servlet，它侦听`<img>`元素的那些特定 URL。您可以通过在生成 HTML 代码期间在请求查询字符串或请求路径信息中提供唯一的图像标识符来使 servlet 可重用。

例如

```
<img src="imageServlet?param1=value1&param2=value2" /> 
```

与

```
@WebServlet("/imageServlet")
public class ImageServlet extends HttpServlet {

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // Create image based on request.getParameter() information.
        // Set proper content type by response.setContentType().
        // Write image to response.getOutputStream().
    }

} 
```

### 也可以看看：

*   [如何在 JSP 页面中从数据库中检索和显示图像？](https://stackoverflow.com/questions/2340406/how-to-retrieve-and-display-images-from-a-database-in-a-jsp-page/2341322#2341322)- 遵循类似的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T14:37:58.133

我只回答问题的第一部分。要将图像嵌入 HTML 页面，您首先需要生成 HTML 页面，该页面将包含以下标记：

```
<img src="somePath" /> 
```

此 HTML 标记将在对请求的响应中发送，浏览器将对其进行解析。然后它将向`somePath`, 发送第二个 HTTP 请求以下载图像的字节。

因此，您需要以某种方式将生成的图像存储在内存中并等待第二个请求，然后将字节发送到响应，或者您需要延迟图像生成直到第二个请求到来。我更喜欢第二种解决方案。因此，处理第一个请求的代码的目标只是生成包含`img`指向适当 URL 的标记的标记。此 URL 应包含实际生成图像所需的所有参数。

对于第二部分，您肯定需要创建一个 BufferedImage 实例，绘制到它的 Graphics2D 对象，并使用 ImageIO 将此 BufferedImage 写入响应输出流。

# mysql - SQL 根据经纬度选择半径搜索

> ID：10564600
> 
> 赞同：6
> 
> 时间：2012-05-12T14:29:44.673
> 
> 标签：mysql, sql

我有 2 张桌子：

```
Events:
 - id
 - name
 - place

Places:
 - id
 - name
 - lat
 - lng 
```

我想从and中检索`10KM radius`（基于位置`lat`& `lng`）中的所有事件。我怎样才能做到这一点？`current` `lat``lng`

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-12-25T00:23:30.063

如果您愿意使用扩展，MySQL 5.6 及更高版本中的地理空间扩展旨在解决此类问题。您将需要在您的位置表上建立一个空间索引：

```
ALTER TABLE places ADD SPATIAL INDEX lat, lng

select name from places
order by st_distance(point(@lng, @lat), point(lng, lat))
limit 10 
```

实际距离的实际发现有点计算量大。以下帖子列出了您可能想尝试的一些方法：[http ://www.plumislandmedia.net/mysql/using-mysqls-geospatial-extension-location-finder/](http://www.plumislandmedia.net/mysql/using-mysqls-geospatial-extension-location-finder/)

有关更多详细信息，请查看[http://www.percona.com/blog/2013/10/21/using-the-new-spatial-functions-in-mysql-5-6-for-geo-enabled-applications /](http://www.percona.com/blog/2013/10/21/using-the-new-spatial-functions-in-mysql-5-6-for-geo-enabled-applications/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T14:32:32.023

也许这可以帮助你[http://www.scribd.com/doc/2569355/Geo-Distance-Search-with-MySQL](http://www.scribd.com/doc/2569355/Geo-Distance-Search-with-MySQL)

基本上问题在于 lat/lng 是球坐标（lat 和 lng 是角度），并且您想使用球面上的线性距离进行搜索。然后，你试图比较两个不同的东西，我的意思是，角度和公里。为此，您必须进行坐标变换，然后进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-23T05:16:28.427

Hope this simple query helps

```
SELECT 
    *
FROM 
    `locator`
WHERE
    SQRT(POW(X(`center`) - 49.843317 , 2) + POW(Y(`center`) - 24.026642, 2)) * 100 < `radius` 
```

details here [http://dexxtr.com/post/83498801191/how-to-determine-point-inside-circle-using-mysql](http://dexxtr.com/post/83498801191/how-to-determine-point-inside-circle-using-mysql)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-31T16:04:18.343

您必须使用 st_distance_sphere，它将给出的两个点解释为 lat/lng 的地理点，而不是二维坐标系中的两个点。

结果以米为单位。

```
mysql> SET @pt1 = ST_GeomFromText('POINT(0 0)');
mysql> SET @pt2 = ST_GeomFromText('POINT(180 0)');
mysql> SELECT ST_Distance_Sphere(@pt1, @pt2);
+--------------------------------+
| ST_Distance_Sphere(@pt1, @pt2) |
+--------------------------------+
|             20015042.813723423 | 
```

结果以米为单位。

这是文档： [在此处输入链接描述](https://dev.mysql.com/doc/refman/5.7/en/spatial-convenience-functions.html#function_st-distance-sphere)

# mysql - 查询表是否存在已验证

> ID：10564602
> 
> 赞同：0
> 
> 时间：2012-05-12T14:30:06.357
> 
> 标签：mysql

我有表 v_c_country 列 table_name

我可以进行查询，结果是从 table_names 列中获得所有表的列表。一般是指。我将它作为另一个查询的来源。但是，当 table_names 列表与原始存在表 f.ex 列表不同时，会发生什么情况。来自 information_schema.tables？（例如，我们准备有关将来创建的表的信息）。

如何对表 v_c_country 进行查询，结果是 table_names 列表，但通过 f.ex 验证。信息架构表？（仅列出真实现有表的名称）示例请。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T14:32:50.617

```
select c.table_name from v_c_country c
inner join INFORMATION_SCHEMA.TABLES i on i.TABLE_NAME = c.table_name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T14:33:11.537

这里有两种等效的方法来做到这一点：

```
select *
from v_c_country c join
     information_schema.tables t
     on c.table_name = t.table_name 
```

或者

```
select *
from v_c_country c
where c.table_name in (select table_name from information_schema.tables t) 
```

# c# - 如何在 C# 中使用 ref 到属性

> ID：10564603
> 
> 赞同：2
> 
> 时间：2012-05-12T14:30:08.463
> 
> 标签：c#, properties, ref

我使用 WPF 来编写我的界面。我使用 ListView 作为我的任务列表。任务列表包含两列，文件名，进度。每一行绑定到一个 TaskInfo：

```
public class TaskInfo : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    public TaskInfo(string fp)
    {
        FileSystemInfo fsi= new DirectoryInfo(fp);
        FileName = fsi.Name;   
        FilePath = fp;     
        PbValue = 0;

    }
    private int pbvalue;
    public int PbValue
    {
        get { return pbvalue; }
        set
        {
            pbvalue = value;
            onPropertyChanged("PbValue");
        }
    }
    private string filename;
    public string FileName
    {
        get { return filename;}
        set
        {
            filename = value;
            onPropertyChanged("FileName");
        }
    }
    private string filepath;
    public string FilePath
    {
        get { return filepath;}
        set
        {
            filepath = value;
            onPropertyChanged("FilePath");
        }
    }

    private void onPropertyChanged(string name)
    {
        if (this.PropertyChanged != null)
        {
            this.PropertyChanged.Invoke(this, new PropertyChangedEventArgs(name));
        }
    }
} 
```

在 Progress 列中，它包含一个 ProgressBar，将其 Value 绑定到 PbValue。但是由于某种原因，我应该使用C语言编写的Dll。我使用的功能是：

```
WaterErase(char * filepath, int * pbvalue) 
```

我在 c# 中确定了它：

```
public extern static void WaterErase(string filepath, ref int pbvalue) 
```

为了执行多任务，我写了一个线程：

```
class TaskThread
{
    private TaskInfo taskinfo = null; //task information
    private Thread thread;
    public TaskThread(TaskInfo _taskinfo)
    {
        taskinfo = _taskinfo;
    }
    private void run()
    {   

        WaterErase(taskinfo.FilePath, ref taskinfo.PbValue);

    }       
    public void start()
    {
        if (thread == null)
        {
            thread = new Thread(run);
            thread.Start();
        }
    }
} 
```

但这条线：

```
WaterErase(taskinfo.FilePath, ref taskinfo.PbValue); 
```

有问题：

> 属性、索引器或动态成员访问不能作为 out 或 ref 参数传递

我知道为什么会出现这个问题，但是如何解决这个问题以实现实时更改 PbValue 的功能。这样我就可以直观的在ProgressBar中执行任务进度了

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T14:31:52.100

正如错误所说，你不能这样做。但是您可以为此使用局部变量：

```
int temp = taskinfo.PbValue;
WaterErase(taskinfo.FilePath, ref temp);
taskinfo.PbValue = temp; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T14:35:02.940

你不能。ref 值的语义不同于“setter”的语义。考虑通过一个`Action<T>`代替。

```
Action<int> setter = x => ctrl.SomeProp = x;
Something(setter); 
```

然后：

```
{some loop} {
    ...
    callback(latestValue);
} 
```

然而！还要记住，UI 通常不会在循环内更新，除非您使用多个线程并在线程之间进行适当的传递（以上不是）。

# windows - DOS 批处理文件 - 显示带有两个选项的弹出消息

> ID：10564605
> 
> 赞同：1
> 
> 时间：2012-05-12T14:30:39.667
> 
> 标签：windows, popup, dos, multiple-choice

使用 DOS 批处理文件，我想在 XP 和 Windows 7 中显示一个弹出窗口，在其中显示一条消息并让用户选择按下两个按钮之一 - 一个会停止 DOS 批处理文件，而另一个按钮会让它继续。关于我可以使用什么批处理命令/pgm 的任何提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T14:46:25.710

以下 WSH/VBscript 片段提示用户单击是/否，之后您可以根据响应建立逻辑：

```
'enter this text into ask.vbs
dim input
input = MsgBox ("Do you want to continue?", 4)
'wscript.echo input

If input = 7 Then
   'answer was no
End If

If input = 6 Then
   'answer was yes
End If 
```

然后在您的批处理文件中，调用`wscript ask.vbs`.

但是，如果可以的话，我建议您留在纯控制台中执行此任务，因为`choice`并且`set`可以按照 Anders 的建议很好地处理此问题。 `pause`效果也很好，这通常是我用于像您这样的二元选择的方法，因为它是最简单的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T14:39:25.370

要显示一个实际的窗口，您必须调用一些外部的东西，一个 .exe 或一个 Windows Scripting Host[脚本](http://ss64.com/vb/popup.html)。

如果您想保持纯批处理，`echo`则选择和使用[`SET /P`](http://ss64.com/nt/set.html)等待用户输入。（要支持 DOS 和 Win9x，您必须使用`choice`而不是`set`在这些系统上）

# opengl - 在 DMD2 下使用 Derelict3 (D)

> ID：10564608
> 
> 赞同：0
> 
> 时间：2012-05-12T14:31:02.053
> 
> 标签：opengl, sdl, d

在使用其他语言（如 C++ 和 Java）之后，我已经使用 D 大约一个月了。我一直想将我的简单游戏平台从 Java 迁移到 D，我想使用 Derelict3 库来做到这一点。我已经编译了位于这里的 github 存储库[https://github.com/aldacron/Derelict3](https://github.com/aldacron/Derelict3)

运行 Linux，如果有帮助的话。

我已将 .a 文件放在**/usr/lib/..**中，并将 .d 文件（来自 Derelict 根目录的导入文件夹）放在**/usr/include/i386-linux-gnu/dmd/druntime /进口**

我的代码如下：

```
import std.stdio;

import derelict.opengl3.gl3;
import derelict.glfw3.glfw3;

pragma(lib, "/usr/lib/libDerelictUtil.a");
pragma(lib, "/usr/lib/libDerelictGL3.a");
pragma(lib, "/usr/lib/libDerelictGLFW3.a");

void main() {
    DerelictGL3.load();
    writeln("This is a line");
} 
```

这是基于 stackoverflow 上回答的其他问题和 dlang.org 论坛中的一些主题，但是当我编译时终端向我吐出这个：

```
kevin@kevin-Latitude-D620:~$ dmd main.d
/usr/include/D/Derelict/libDerelictGL3.a(gl3.o): In function `_D8derelict7opengl33gl318_sharedStaticDtor2FZv':
../import/derelict/opengl3/gl3.d:(.text._D8derelict7opengl33gl318_sharedStaticDtor2FZv+0x4): undefined reference to `_D8derelict4util6loader15SharedLibLoader19isAutoUnloadEnabledOFNdZb'
/usr/include/D/Derelict/libDerelictGL3.a(gl3_d1_649.o):(.data+0x38): undefined reference to `_D8derelict4util6loader15SharedLibLoader7__ClassZ'
/usr/include/D/Derelict/libDerelictGL3.a(gl3_d1_649.o):(.rodata+0x4418): undefined reference to `_D8derelict4util6loader15SharedLibLoader4loadMFZv'
(MORE of the above)
collect2: ld returned 1 exit status
--- errorlevel 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T17:31:38.727

*ld*，链接器维护一个未解析符号的列表，因为它首先通过库进行链接，试图减少其未解析的列表。这意味着任何依赖项都应该列**在**依赖它们的代码之后。因此，请尝试像这样重新安排您的 pragma(libs...)：

```
pragma(lib, "DerelictGL3"); 
pragma(lib, "DerelictGLFW3"); 
pragma(lib, "DerelictUtil"); 
pragma(lib, "dl"); 
```

# javascript - jQuery提交表单

> ID：10564609
> 
> 赞同：2
> 
> 时间：2012-05-12T14:31:02.333
> 
> 标签：javascript, jquery, html, validation

# html代码

```
<div id="signup">
    <form  id="suform" method="POST" action="roma/roma">
        <p>
            <label>Frist Name</label>
            <input type="text" id="sufName"/>
            <span class="errorMessage"></span>
        </p>
        <p>
            <label>Last Name</label>
            <input type="text" id="sulName"/>
            <span class="errorMessage"></span>
        </p>
        <p>
            <label>Email</label>
            <input type="text" id="suEmail"/>
            <span class="errorMessage"></span>
        </p>
        <p>
            <label>Mobile Number</label>
            <input type="text" id="suMNumber"/>
            <span class="errorMessage"></span>
        </p>
        <p>
            <label>Password</label>
            <input type="password" id="suPassword"/>
            <span class="errorMessage"></span>
        </p>
        <p>
            <label>Re Password</label>
            <input type="password" id="suRePassword"/>
            <span class="errorMessage"></span>
        </p>
        <p>
            <input type="submit" class="button" value="sign up"/>
        </p>
    </form>
</div> 
```

**注册页面只有六个输入字段** ，这是确保没有输入字段为空的 jQuery 代码，如果没有输入字段为空，我想提交表单。

# jQuery代码

```
$(document).ready(function(){
    $('#suform').on('submit', function(e){
        e.preventDefault();
        var errorCount = 0;
        $('span.errorMessage').text(''); // reset all error mesaage
        $('input').each(function(){
            var $this = $(this);
            if($this.val() === ''){
                var error = 'Please fill ' + $this.prev('label').text(); // take the input field from label
                $this.next('span').text(error);
                errorCount = errorCount + 1;   
            }
        });
        if(errorCount === 0){
            $(this).submit(); // submit form if no error
        }
    });
}); 
```

该代码确保没有输入字段为空，它找到一个空的然后会出现错误消息，否则应该提交，但提交不起作用。

[代码](http://jsfiddle.net/Wiliam_Kinaan/h9njC/22/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T14:33:17.967

尝试使用`$(this)[0].submit();`. 使用 $(this) 是指对表单的 jQuery 对象引用。我不知道 jQuery 的`submit()`方法实际上做了什么，但它显然*没有*提交表单。Using`$(this)[0]`指的是实际的 DOM 元素，它将使用标准的 DOM 提交方法，这就是您要查找的内容。

我相信你已经知道这一点，但你应该使用服务器端*和*客户端验证，因为有些用户没有 JS，有些用户会故意篡改你的表单。只是一个快速的“不要忘记”！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T14:37:34.717

查看[jQuery 验证插件](http://docs.jquery.com/Plugins/Validation)。为此，您`class = "required"`为所需的任何输入字段添加一个，然后调用`validation`它：

```
$('form').validation({
  // any options you want
}); 
```

它还会做一些方便的事情，比如显示错误消息、进行条件验证等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T14:35:13.067

您可以删除`e.preventDefault()`并使用`return`insead：

```
$('form').on('submit', function(e){
    var errorCount = 0;
    $('span.errorMessage').text('');
    $('input').each(function(){
        var $this = $(this);
        if($this.val() === ''){
            var error = 'Please fill ' + $this.prev('label').text();
            $this.next('span').text(error);
            errorCount = errorCount + 1;   
        }
    });
    return errorCount === 0;
}); 
```

**演示：http:** [//jsfiddle.net/h9njC/27/](http://jsfiddle.net/h9njC/27/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T15:13:13.093

```
$('form').on('submit',function(e){
    var errorCount = 0;
    $('span.errorMessage').text('');
    $('input').each(function(){
        var $this = $(this);
        if($this.val() === ''){
            var error = 'Please fill ' + $this.prev('label').text();
            $this.next('span').text(error);
            errorCount = errorCount + 1;   
        }
    });
    if(errorCount === 0){
        alert('done'); // just an alert to notice when everything OK [remove it]
        $this.submit(); // submit the form on success
    } else e.preventDefault(); // halt the submission on default
  }); 
```

**[演示](http://jsfiddle.net/h9njC/30/)**

# xcode - NSCalendar - 自定义日历

> ID：10564610
> 
> 赞同：3
> 
> 时间：2012-05-12T14:31:08.587
> 
> 标签：xcode, macos, cocoa, nsdate, nscalendar

在 Mac OS X 上，如果您转到系统首选项 > 日期和时间 > 打开语言和文本 > 在顶部单击格式 > 然后在日历下拉菜单中，有一个科普特日历选项。如何在 Mac 应用程序中显示此日历？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-12T15:38:58.387

> 如何在 Mac 应用程序中显示此日历？

好吧，你说的*display*是什么意思？您只想在计算中使用科普特日历吗？如果是这种情况，那么您所需要的只是一个适当的`NSCalendar`实例。由于`NSCalendar`（和朋友）由 ICU 支持，您可以使用[ICU 支持的任何标识符](http://unicode.org/reports/tr35/tr35-6.html#Identifiers)（在“键/类型定义”下）。这意味着您可以选择：

*   `gregorian`- （默认）
*   `islamic`- 天文阿拉伯语
*   `chinese`- 繁体中文日历
*   `islamic-civil`- 民用（算法）阿拉伯日历
*   `hebrew`- 传统的希伯来日历
*   `japanese`- 帝国历（除年份外与公历相同，每个皇帝一个时代）
*   `buddhist`- 泰国佛教日历（除年份外与公历相同）
*   `persian`- 波斯历
*   `coptic`- 科普特日历
*   `ethiopic`- 埃塞俄比亚日历

所以要获得`NSCalendar`实例，这将是一个问题：

```
NSCalendar *coptic = [[NSCalendar alloc] initWithCalendarIdentifier:@"coptic"]; 
```

但是，如果您真的想绘制一些 UI（à la iCal），那么您需要更多信息。幸运的是，您也可以从中获得`NSCalendar`。

例如，您需要知道日历有多少个月：

```
NSRange minMonthRange = [coptic minimumRangeOfUnit:NSMonthCalendarUnit]; // {1,13}
NSRange maxMonthRange = [coptic maximumRangeOfUnit:NSMonthCalendarUnit]; // {1,13} 
```

所以看起来每年有13个月。好的，一个月的几天呢？

```
NSRange minDayRange = [coptic minimumRangeOfUnit:NSDayCalendarUnit]; // {1,5}
NSRange maxDayRange = [coptic maximumRangeOfUnit:NSDayCalendarUnit]; // {1,30} 
```

哇！看起来你可以有一个只有 5 天的月份！（但没有一个月超过 30 天）让我们看看我们是否能找到更多：

```
NSDateComponents *firstDayOfMonth = [[NSDateComponents alloc] init];
[firstDayOfMonth setDay:1];
for (NSInteger y = 1500; y < 1520; ++y) {
    [firstDayOfMonth setYear:y];
    for (NSInteger m = 1; m <= 13; ++m) {
        [firstDayOfMonth setMonth:m];

        NSDate *date = [coptic dateFromComponents:firstDayOfMonth];

        NSRange rangeOfDaysInMonth = [coptic rangeOfUnit:NSDayCalendarUnit inUnit:NSMonthCalendarUnit forDate:date];
        NSLog(@"%d - %d => %@", y, m, NSStringFromRange(rangeOfDaysInMonth));
    }
} 
```

这将迭代 20 年，并构建`NSDate`对应于每年每个月的第一天的一个。然后它会查看该月有多少天，并记录结果。（注意`1500`和`1520`是我选择的任意年份）

这记录：

```
1500 - 1 => {1, 30}
1500 - 2 => {1, 30}
1500 - 3 => {1, 30}
1500 - 4 => {1, 30}
1500 - 5 => {1, 30}
1500 - 6 => {1, 30}
1500 - 7 => {1, 30}
1500 - 8 => {1, 30}
1500 - 9 => {1, 30}
1500 - 10 => {1, 30}
1500 - 11 => {1, 30}
1500 - 12 => {1, 30}
1500 - 13 => {1, 5}
1501 - 1 => {1, 30}
1501 - 2 => {1, 30}
1501 - 3 => {1, 30}
1501 - 4 => {1, 30}
1501 - 5 => {1, 30}
1501 - 6 => {1, 30}
1501 - 7 => {1, 30}
1501 - 8 => {1, 30}
1501 - 9 => {1, 30}
1501 - 10 => {1, 30}
1501 - 11 => {1, 30}
1501 - 12 => {1, 30}
1501 - 13 => {1, 5}
1502 - 1 => {1, 30}
1502 - 2 => {1, 30}
1502 - 3 => {1, 30}
1502 - 4 => {1, 30}
1502 - 5 => {1, 30}
1502 - 6 => {1, 30}
1502 - 7 => {1, 30}
1502 - 8 => {1, 30}
1502 - 9 => {1, 30}
1502 - 10 => {1, 30}
1502 - 11 => {1, 30}
1502 - 12 => {1, 30}
1502 - 13 => {1, 5}
1503 - 1 => {1, 30}
1503 - 2 => {1, 30}
1503 - 3 => {1, 30}
1503 - 4 => {1, 30}
1503 - 5 => {1, 30}
1503 - 6 => {1, 30}
1503 - 7 => {1, 30}
1503 - 8 => {1, 30}
1503 - 9 => {1, 30}
1503 - 10 => {1, 30}
1503 - 11 => {1, 30}
1503 - 12 => {1, 30}
1503 - 13 => {1, 6}
1504 - 1 => {1, 30}
1504 - 2 => {1, 30}
1504 - 3 => {1, 30}
1504 - 4 => {1, 30}
1504 - 5 => {1, 30}
1504 - 6 => {1, 30}
1504 - 7 => {1, 30}
1504 - 8 => {1, 30}
1504 - 9 => {1, 30}
1504 - 10 => {1, 30}
1504 - 11 => {1, 30}
1504 - 12 => {1, 30}
1504 - 13 => {1, 5}
1505 - 1 => {1, 30}
1505 - 2 => {1, 30}
1505 - 3 => {1, 30}
1505 - 4 => {1, 30}
1505 - 5 => {1, 30}
1505 - 6 => {1, 30}
1505 - 7 => {1, 30}
1505 - 8 => {1, 30}
1505 - 9 => {1, 30}
1505 - 10 => {1, 30}
1505 - 11 => {1, 30}
1505 - 12 => {1, 30}
1505 - 13 => {1, 5}
1506 - 1 => {1, 30}
1506 - 2 => {1, 30}
1506 - 3 => {1, 30}
1506 - 4 => {1, 30}
1506 - 5 => {1, 30}
1506 - 6 => {1, 30}
1506 - 7 => {1, 30}
1506 - 8 => {1, 30}
1506 - 9 => {1, 30}
1506 - 10 => {1, 30}
1506 - 11 => {1, 30}
1506 - 12 => {1, 30}
1506 - 13 => {1, 5}
1507 - 1 => {1, 30}
1507 - 2 => {1, 30}
1507 - 3 => {1, 30}
1507 - 4 => {1, 30}
1507 - 5 => {1, 30}
1507 - 6 => {1, 30}
1507 - 7 => {1, 30}
1507 - 8 => {1, 30}
1507 - 9 => {1, 30}
1507 - 10 => {1, 30}
1507 - 11 => {1, 30}
1507 - 12 => {1, 30}
1507 - 13 => {1, 6}
1508 - 1 => {1, 30}
1508 - 2 => {1, 30}
1508 - 3 => {1, 30}
1508 - 4 => {1, 30}
1508 - 5 => {1, 30}
1508 - 6 => {1, 30}
1508 - 7 => {1, 30}
1508 - 8 => {1, 30}
1508 - 9 => {1, 30}
1508 - 10 => {1, 30}
1508 - 11 => {1, 30}
1508 - 12 => {1, 30}
1508 - 13 => {1, 5}
1509 - 1 => {1, 30}
1509 - 2 => {1, 30}
1509 - 3 => {1, 30}
1509 - 4 => {1, 30}
1509 - 5 => {1, 30}
1509 - 6 => {1, 30}
1509 - 7 => {1, 30}
1509 - 8 => {1, 30}
1509 - 9 => {1, 30}
1509 - 10 => {1, 30}
1509 - 11 => {1, 30}
1509 - 12 => {1, 30}
1509 - 13 => {1, 5}
1510 - 1 => {1, 30}
1510 - 2 => {1, 30}
1510 - 3 => {1, 30}
1510 - 4 => {1, 30}
1510 - 5 => {1, 30}
1510 - 6 => {1, 30}
1510 - 7 => {1, 30}
1510 - 8 => {1, 30}
1510 - 9 => {1, 30}
1510 - 10 => {1, 30}
1510 - 11 => {1, 30}
1510 - 12 => {1, 30}
1510 - 13 => {1, 5}
1511 - 1 => {1, 30}
1511 - 2 => {1, 30}
1511 - 3 => {1, 30}
1511 - 4 => {1, 30}
1511 - 5 => {1, 30}
1511 - 6 => {1, 30}
1511 - 7 => {1, 30}
1511 - 8 => {1, 30}
1511 - 9 => {1, 30}
1511 - 10 => {1, 30}
1511 - 11 => {1, 30}
1511 - 12 => {1, 30}
1511 - 13 => {1, 6}
1512 - 1 => {1, 30}
1512 - 2 => {1, 30}
1512 - 3 => {1, 30}
1512 - 4 => {1, 30}
1512 - 5 => {1, 30}
1512 - 6 => {1, 30}
1512 - 7 => {1, 30}
1512 - 8 => {1, 30}
1512 - 9 => {1, 30}
1512 - 10 => {1, 30}
1512 - 11 => {1, 30}
1512 - 12 => {1, 30}
1512 - 13 => {1, 5}
1513 - 1 => {1, 30}
1513 - 2 => {1, 30}
1513 - 3 => {1, 30}
1513 - 4 => {1, 30}
1513 - 5 => {1, 30}
1513 - 6 => {1, 30}
1513 - 7 => {1, 30}
1513 - 8 => {1, 30}
1513 - 9 => {1, 30}
1513 - 10 => {1, 30}
1513 - 11 => {1, 30}
1513 - 12 => {1, 30}
1513 - 13 => {1, 5}
1514 - 1 => {1, 30}
1514 - 2 => {1, 30}
1514 - 3 => {1, 30}
1514 - 4 => {1, 30}
1514 - 5 => {1, 30}
1514 - 6 => {1, 30}
1514 - 7 => {1, 30}
1514 - 8 => {1, 30}
1514 - 9 => {1, 30}
1514 - 10 => {1, 30}
1514 - 11 => {1, 30}
1514 - 12 => {1, 30}
1514 - 13 => {1, 5}
1515 - 1 => {1, 30}
1515 - 2 => {1, 30}
1515 - 3 => {1, 30}
1515 - 4 => {1, 30}
1515 - 5 => {1, 30}
1515 - 6 => {1, 30}
1515 - 7 => {1, 30}
1515 - 8 => {1, 30}
1515 - 9 => {1, 30}
1515 - 10 => {1, 30}
1515 - 11 => {1, 30}
1515 - 12 => {1, 30}
1515 - 13 => {1, 6}
1516 - 1 => {1, 30}
1516 - 2 => {1, 30}
1516 - 3 => {1, 30}
1516 - 4 => {1, 30}
1516 - 5 => {1, 30}
1516 - 6 => {1, 30}
1516 - 7 => {1, 30}
1516 - 8 => {1, 30}
1516 - 9 => {1, 30}
1516 - 10 => {1, 30}
1516 - 11 => {1, 30}
1516 - 12 => {1, 30}
1516 - 13 => {1, 5}
1517 - 1 => {1, 30}
1517 - 2 => {1, 30}
1517 - 3 => {1, 30}
1517 - 4 => {1, 30}
1517 - 5 => {1, 30}
1517 - 6 => {1, 30}
1517 - 7 => {1, 30}
1517 - 8 => {1, 30}
1517 - 9 => {1, 30}
1517 - 10 => {1, 30}
1517 - 11 => {1, 30}
1517 - 12 => {1, 30}
1517 - 13 => {1, 5}
1518 - 1 => {1, 30}
1518 - 2 => {1, 30}
1518 - 3 => {1, 30}
1518 - 4 => {1, 30}
1518 - 5 => {1, 30}
1518 - 6 => {1, 30}
1518 - 7 => {1, 30}
1518 - 8 => {1, 30}
1518 - 9 => {1, 30}
1518 - 10 => {1, 30}
1518 - 11 => {1, 30}
1518 - 12 => {1, 30}
1518 - 13 => {1, 5}
1519 - 1 => {1, 30}
1519 - 2 => {1, 30}
1519 - 3 => {1, 30}
1519 - 4 => {1, 30}
1519 - 5 => {1, 30}
1519 - 6 => {1, 30}
1519 - 7 => {1, 30}
1519 - 8 => {1, 30}
1519 - 9 => {1, 30}
1519 - 10 => {1, 30}
1519 - 11 => {1, 30}
1519 - 12 => {1, 30}
1519 - 13 => {1, 6} 
```

分析这一点，我们看到每个月都有 30 天，除了第 13 个月（通常）有 5 天。似乎每4年一次，第13个月有6天。这一定是它处理闰日的方式。这肯定是一个不错的日历！一切都很好而且很规律。

让我们再看看：

```
NSRange minHourRange = [coptic minimumRangeOfUnit:NSHourCalendarUnit]; // {0,24}
NSRange maxHourRange = [coptic maximumRangeOfUnit:NSHourCalendarUnit]; // {0,24} 
```

所以每天有 24 小时（夏令时时间跳跃不反映在这个范围内。公历还报告最小小时范围`{0,24}`和最大小时范围`{0,24}`，尽管有些日子有 23 小时或 25 小时，具体取决于 DST 转换）。

分秒级也正常（各60）。

因此，如果您想自己显示日历，您将需要一个可以在一年中处理 13 个月的 UI，其中一个时间不到一周。在次日级别，事情是我们习惯的。

* * *

当然，您也可以阅读科普特日历上的[维基百科文章。](http://en.wikipedia.org/wiki/Coptic_calendar)

* * *

**编辑**（基于评论）

如果您只想将日期格式化为字符串，那么您（当然）会转向`NSDateFormatter`：

```
NSDateFormatter *f = [[NSDateFormatter alloc] init];
NSCalendar *coptic = [[NSCalendar alloc] initWithCalendarIdentifier:@"coptic"];
[f setCalendar:coptic];
[f setDateStyle:NSDateFormatterLongStyle];

NSDate *rightNow = [NSDate date];
NSString *formattedDate = [f stringFromDate:rightNow];
NSLog(@"%@", formattedDate); // logs "Bashans 4, 1728" 
```

# windows - 网站的桌面图标

> ID：10564611
> 
> 赞同：0
> 
> 时间：2012-05-12T14:31:48.037
> 
> 标签：windows, web, wsh

我有两个托管在本地网络上的网站。我想将桌面图标部署到用户计算机（桌面）上的两个站点。我已经在我的电脑上设置了图标来测试它们，但是有一些问题。

1.  他们在图标上有快捷箭头，我宁愿没有这个。
2.  我必须将图标图像保存在不会移动的某个位置。
3.  在计算机上设置图标有很多步骤。有没有办法设置在网站端使用的图标，这样当我在桌面上创建快捷方式时，它会自动使用该图标图像？

如果您可以回答上述任何问题或对您如何执行上述内容提供任何见解，我很想听听。谢谢！

# java - JCombobox.setVisible(false);

> ID：10564616
> 
> 赞同：-1
> 
> 时间：2012-05-12T14:32:05.610
> 
> 标签：java, swing, visibility, jcombobox

即使它是一种有效的方法，`JComboBox#setVisible`也不会隐藏我的`JComboBox`. 难道我做错了什么？如果没有，是否有任何替代方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T15:59:40.077

[由于您对发布SSCCE](http://sscce.org)没有表现出任何兴趣，因此这是我的，表明您所说的内容是错误的，在您发布代码之前什么都做不了。

这对我来说很好，

```
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class FrameTest extends JFrame implements ActionListener {

    JComboBox test;

    public FrameTest() {
        setLayout(new FlowLayout());
        setSize(550, 100);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JButton hideJCombo = new JButton("Hide my JCombobox!");
        JButton showJCombo = new JButton("Show my JCombobox!");

        String course[] = {"This", "is", "a", "sample", "for", "StackOverflow"};
        test = new JComboBox(course);

        add(hideJCombo);
        add(test);
        add(showJCombo);

        hideJCombo.setActionCommand("hide");
        showJCombo.setActionCommand("show");

        hideJCombo.addActionListener(this);
        showJCombo.addActionListener(this);

    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new FrameTest().setVisible(true);

            }
        });
    }

    @Override
    public void actionPerformed(ActionEvent e) {

        if ("hide".equals(e.getActionCommand())) {
            test.setVisible(false);
            System.out.println("hide");
        } else if ("show".equals(e.getActionCommand())) {
            test.setVisible(true);
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T15:58:50.670

甚至不确定我为什么要花时间创建[SSCCE](http://sscce.org)，但是这段代码可以按预期工作。我建议您将其与您的代码进行比较并寻找差异

```
import javax.swing.JCheckBox;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;

public class ComboboxDemo {
  private static JFrame createFrame(){
    JFrame result = new JFrame( "ComboboxDemo" );

    final JComboBox<String> combobox = createCombobox();
    result.add( combobox, BorderLayout.CENTER );

    JCheckBox toggleVisibility = new JCheckBox( "Toggle visibility" );
    toggleVisibility.setSelected( combobox.isVisible() );
    toggleVisibility.addItemListener( new ItemListener() {
      @Override
      public void itemStateChanged( ItemEvent e ) {
        combobox.setVisible( e.getStateChange() == ItemEvent.SELECTED );
      }
    } );
    result.add( toggleVisibility, BorderLayout.SOUTH );

    result.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
    result.pack();
    return result;
  }

  private static JComboBox<String> createCombobox(){
    return new JComboBox<>( new String[]{"foo", "bar", "StackOverflow", "Hello World"} );
  }

  public static void main( String[] args ) {
    EventQueue.invokeLater( new Runnable() {
      @Override
      public void run() {
        createFrame().setVisible( true );
      }
    } );
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T17:27:25.863

在您发布代码之前，没有人可以回答您的问题。但是，对于“替代方案”的问题，我会回答。

1.  您可以使用“setEnabled(false)”禁用它

2.  如果它在 JPanel 内，您可以使用“remove()”方法和该方法的其他重载版本将其删除

3.  您也许可以使用“setEditable(false)”将其设置为不可编辑。反正我还没试过

# c# - 获取远程 XML 副本的最佳方式？

> ID：10564618
> 
> 赞同：2
> 
> 时间：2012-05-12T14:32:25.703
> 
> 标签：c#, javascript, asp.net, xml

我需要访问远程服务器上的几个 XML 文件。由于跨域策略，我不能单独使用 jQuery，但需要一个小的 c# .aspx 页面，它将充当我的 jQuery 从本地文件获取远程 xml 的网关。但是我最好如何处理这个页面 - 这种文件的最简单结构是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T14:33:58.163

您可以使用“[通用处理](http://www.dotnetperls.com/ashx)程序”（ASHX 文件）。

在向浏览器发送文件时，我会经常使用这类文件，而不需要 UI（即没有可见的页面内容）。

据我了解，我将 ASHX 处理程序视为“没有 UI 的页面”，与普通[`Page`](http://msdn.microsoft.com/en-us/library/system.web.ui.page.aspx).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T14:35:21.857

为什么不是网络服务？

```
client code (jQuery) -> your server (WCF) -> external xml 
```

[您可以使用此模板](http://visualstudiogallery.msdn.microsoft.com/fbc7e5c1-a0d2-41bd-9d7b-e54c845394cd)快速创建 REST Web 服务。

# c++ - 使用模板类时似乎无法包含除 main.cpp 之外的任何 cpp 文件

> ID：10564627
> 
> 赞同：0
> 
> 时间：2012-05-12T14:33:21.443
> 
> 标签：c++, templates

我决定将必要的代码减少到显示此错误所需的最低限度。我有一个存在于 hc_list.h 文件中的 STL 列表包装模板类。整个代码如下：

```
// hc_list.h file
#ifndef HC_LIST_H
#define HC_LIST_H

#include <cstdlib>
#include <list>

template <typename T>
class hcList
{
    private:
    std::list<T> selfList ; // a single internal STL list to hold the values

    public:
    hcList(void) {} ;
    ~hcList(void){} ;
    // The error occurs on the line below
    template <typename U> friend std::ostream& operator<<(std::ostream &, const hcList<U> &) ;
} ;
#endif // HC_LIST_H 
```

此代码包含在 main.cpp 文件中，其中 main 函数如下：

```
// main.cpp file
#include <iostream>
#include "hc_list.h"
int main()
{
    std::cout << "Begin Test" << std::endl;
    return 0;
} 
```

此代码在输入到 CodeBlocks 项目时将按原样编译，出现 0 个错误或警告。但是，然后我包含另一个 cpp 文件并尝试包含列表标题，如下所示：

```
// anyNamedFile.cpp file
#include "hc_list.h" 
```

当我将任何 cpp 文件包含到项目中时，我得到一个编译器错误：

```
error: expected initializer before '&' token 
```

我不明白我做错了什么，并且真的可以使用一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T16:09:15.987

您的头文件使用`std::ostream`, （就在 之前`&`）但不包含任何可能声明它的头文件。

尝试添加

```
#include <iosfwd> 
```

在你的标题中。

# java - org.hibernate.cfg.Configuration 添加注释类所在的包

> ID：10564629
> 
> 赞同：3
> 
> 时间：2012-05-12T14:33:53.550
> 
> 标签：java, configuration, annotations, package, hibernate-4.x

我正在通过以下代码创建数据库表：

```
public void createSchema() {
    Configuration configuration = new Configuration();
    configuration.setProperty("hibernate.connection.driver_class", driverClassName);
    configuration.setProperty("hibernate.connection.url", url);
    configuration.setProperty("hibernate.connection.username", username);
    configuration.setProperty("hibernate.connection.password", password);
    configuration.setProperty("hibernate.dialect", hibernateDialect);

    configuration.addAnnotatedClass(Base.class);
    configuration.addAnnotatedClass(User.class);
    logger.info("begin database schema creation =========================");
    new SchemaUpdate(configuration).execute(true, true);
    logger.info("end database schema creation ===========================");
} 
```

在这里，我按`configuration.addAnnotatedClass`方法指定了带注释的类名称。如果我有 50 节课，那真的会很乱。

有没有办法指定包名称以扫描带注释的类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T18:13:18.593

您可以使用反射加载所有注释为 @Entity 的实体并将它们添加到休眠配置。检查链接以获取示例代码 [Hibernate 4 Annotation Configuration](https://stackoverflow.com/questions/11895205/hibernate-4-annotation-configuration)

麦迪

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T14:54:49.350

我不熟悉 Hibernate 4 中的许多更改，但在 Hibernate 3 中没有办法做到这一点。我建议使用[Spring 出色的 Hibernate 支持](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/orm.html#orm-hibernate)，它[可以让你扫描包中的实体](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/orm/hibernate4/LocalSessionFactoryBean.html#setPackagesToScan%28java.lang.String...%29)，就像你要求的那样，并且如果你在 Spring 容器中运行你的应用程序，它也可以为你管理很多其他的东西。

# maven - Maven - 将工件安装到 Nexus 存储库

> ID：10564631
> 
> 赞同：2
> 
> 时间：2012-05-12T14:34:18.977
> 
> 标签：maven, build, build-process, nexus

我目前在运行命令 mvn install 时遇到问题，该工件安装在我的本地存储库中（即在 %HOME/.m2 文件夹中），但未安装在 Nexus 存储库中。

我知道使用 Nexus 我可以使用 GUI 手动添加工件，但是有没有办法将工件安装为 mvn 命令的一部分？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T14:47:38.950

您看到的是[标准 Maven 生命周期](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html)中的正常行为。该`install`阶段只应该在本地安装工件。你需要运行`deploy`，它紧随其后`install`。那是 maven 将工件上传到远程存储库的时候。用于部署的远程 repo[在 pom 的分发管理部分中](http://maven.apache.org/pom.html#Distribution_Management)配置。

# python - 有没有办法使用 psycopg2 copy_from 批量加载 XML？

> ID：10564632
> 
> 赞同：0
> 
> 时间：2012-05-12T14:34:30.473
> 
> 标签：python, postgresql, psycopg2

我有一个这样的 XML 文件：

```
<Library>
  <Book id="123">
    <Title>Python Does Everythig</Title>
    <Author>Smith</Author>
  </Book>

  <Book id="456">
    <Title>Postgres is Neat</Title>
    <Author>Wesson</Author>
  </Book>
</Library> 
```

我有一个不错的 Python 小程序，它使用 XSL 将 XML 转换为管道分隔格式，然后使用 批量加载它`psycopg2.copy_from`，每本书创建一条记录。一切都很好。

但我还想将用于创建图书记录的实际 XML 添加到图书记录本身。换句话说，我希望我的书桌看起来像：

```
create table book (
    id       integer      not null primary key,
    title    varchar(100) not null,
    author   varchar(100) not null,
    xml_data xml          not null
); 
```

如果我使用 SQL 插入行，这很简单：我只需使用 `XMLPARSE ( CONTENT ?)`.

有没有办法在使用时做同样的事情`copy_from`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:15:29.017

Copy_from 包装 PostgreSQL 批量 COPY 语句，这是不支持的（顺便支持 csv）。

老实说，我只会在您的应用程序中解析 XML，然后将数据发送到数据库。

# sql-server-2008 - 我可以安全地更改目标计算机上复制的 SQL Server 表中的数据吗？

> ID：10564634
> 
> 赞同：1
> 
> 时间：2012-05-12T14:34:46.653
> 
> 标签：sql-server-2008, replication

我将一个表从一个 SQL Server 2008 实例复制到另一个已经正常工作的表。我还想在 SQL Server 的**目标实例**上的复制表中设置一个字段，但我不太确定这是否允许（即使它似乎有效）。

这背后的原因：从服务器 A 复制到 B，在服务器 B 上处理行，然后在处理该行时设置（例如“已处理”之类的标志）。此信息在服务器 A 上不可用，只能在服务器 B 上设置。

更麻烦的方法是在服务器 B 上创建一个单独的表，该表必须在已处理的复制表中保留 ID 条目，但也许这不是必需的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T15:51:36.503

使用事务复制，默认情况下订阅服务器应被视为只读。这是因为如果订阅服务器上的数据已更改——无论是插入、更新还是删除——它不仅会导致数据一致性错误，而且重新初始化可能会擦除订阅服务器数据，因为文章**@pre_creation_cmd**默认设置为**删除**.

如果您要在订阅者处更新数据，那么我建议使用[可更新订阅进行事务复制](http://msdn.microsoft.com/en-us/library/ms151718.aspx)、[对等复制](http://msdn.microsoft.com/en-us/library/ms151196.aspx)或[合并复制](http://msdn.microsoft.com/en-us/library/ms152746.aspx)。

# networking - 虚拟机连接

> ID：10564635
> 
> 赞同：1
> 
> 时间：2012-05-12T14:34:49.787
> 
> 标签：networking, virtualbox

我想在网络上将 ubuntu 虚拟盒相互连接。我想在上面使用hadoop。所以我需要把它们放在一个网络中。它需要**ssh**进行通信。任何人都可以帮助解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T14:42:46.970

最简单的方法是将您的适配器更改为“桥接网络”而不是默认的“Nat”。这样来宾系统将在您的本地网络上获得一个 ip，您可以直接连接到它。

# c# - 展开收藏并保存一些字段。

> ID：10564636
> 
> 赞同：1
> 
> 时间：2012-05-12T14:34:51.990
> 
> 标签：c#, linq, collections

我有以下课程：

```
class Item
{
    public string[] field1;
    public int field2;
} 
```

好吧，我收集了一些物品。我怎样才能将这些集合转换为

```
class Item
{
    public string field1;
    public int field2;
} 
```

我的意思是，`Items.SelectMany(x => x.field1)`但我需要为`filed2`我收藏的每个元素保存价值。

例子

```
field1:{"asd","asdf","fscsd"}
field2:123

->

field1:{"asd"}
field2:123

field1:{"asdf"}
field2:123

field1:{"fscsd"}
field2:123 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T14:38:34.720

试试这个：

```
var res = Items.SelectMany(x => x.field1.Select(s => new {field1=s, x.field2})); 
```

您将返回一个可枚举的*匿名对象*，每个对象都有两个字段 -`field1`和`field2`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T14:54:12.227

我认为这符合其目的：

首先，将您的课程更改为：（两个不同的名称）

```
class Items
{
    public string[] field1;
    public int field2;
}

class Item
{
    public string field1;
    public int field2;
} 
```

然后，此功能会将您的第一个班级分为两个（或更多）其他班级

```
public Item[] splitItems(Items item)
{
    Item[] items = new Item[item.field1.length];
    for(int i=0;i<item.field1.length;i++)
    {
        items[i].field1 = item.field1[i];
        items[i].field2 = item.field2;
    }
    return items;
}

Items mainItem = new Items();
mainItem.field1 = {"asd","asdf","fscsd"};
mainItem.field2 = 123;

Item[] tempItems = splitItems(mainItem); 
```

现在你应该看到：

tempItems[0].field1 = "asd";
tempItems[1].field1 = "asdf";
tempItems[2].field1 = "fscsd";

他们所有的 field2 将等于 123

# c# - 在表格单元格中显示按钮 悬停/鼠标悬停

> ID：10564637
> 
> 赞同：1
> 
> 时间：2012-05-12T14:35:02.420
> 
> 标签：c#, javascript, jquery, asp.net, css

我正在 asp.net 中构建仪表板应用程序。我在 div 标签内放置了 3 个输入按钮。当用户将鼠标悬停在表格单元格上时，我希望显示按钮。如何使用 .css、javascript 或 jQuery 来完成此任务？

我的 HTML 如下所示：

```
<td id="bold_cell1" valign="top" width="33%" Height="33%">
    <div id="buttonBlock">
        <input type="button" id="btnAdd" value="Add" style="font-size:8px" />
        <input type="button" id="btnEdit" value="Edit" style="font-size:8px" />
        <input type="button" id="btnDelete" value="Delete" style="font-size:8px" />
    </div>
</td> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T14:40:22.800

老式的方式：CSS：

```
#buttonBlock input{
   display:none;
}
#bold_cell1:hover #buttonBlock input{
   display:block;
} 
```

**[演示链接](http://jsbin.com/ewolul/edit#javascript,html,live)**

# nosql - 澄清不同 NoSQL 数据库的用途

> ID：10564639
> 
> 赞同：0
> 
> 时间：2012-05-12T14:35:08.727
> 
> 标签：nosql

我知道这似乎是一个多余的问题，但我希望它能澄清我和其他用户的所有疑问。

这是我正在谈论的noSQL，有人可以解释一下吗：

1.  最佳用例（什么时候应该使用它）
2.  优点和缺点（包括限制）
3.  它们的附加值（为什么它更好，可能是数学/科学解释）

MongoDB、Redis、CouchDB、Hadoop

谢谢

G

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T14:33:24.860

MongoDb 和 CouchDb**不是**键值存储，而是文档存储。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T17:18:03.753

澄清疑虑的最佳方法 - 阅读技术文档和概述 =)

简而言之 - MongoDb 和 CouchDb 是足够快、可靠的键值存储，可以将数据保存到磁盘。MongoDb 通过自定义 TCP/IP 协议工作，CouchDb 通过 HTTP 使用 REST 方法

Redis 是另一种 ket/value 存储，它将所有数据存储在内存中，所有写入和读取都直接进入内存。这种方法也有一些缺点和好处。它也会在磁盘上保留更改

Hadoop 不仅仅是一个键/值存储。它是分布式处理大数据的引擎。如果你要编写谷歌，你可以使用 Hadoop。

在我看来，如果您不打算构建特定的东西（我认为您不会），请继续使用 MongoDB。

# ruby-on-rails - 为什么 Rails 给我一个关于“创建”操作不在我的控制器中的错误？

> ID：10564640
> 
> 赞同：0
> 
> 时间：2012-05-12T14:35:11.270
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

当我在我的 Jobs 表单上按 new 时看到一个错误，它在我的 JobsController 中找不到“create”。

```
Unknown action

The action 'create' could not be found for JobsController 
```

这是我的控制器：

```
class JobsController < ApplicationController

  private
  def load_clients
        @clients = collection_select :client, :client_id
  end

  def index
    @job = Job.find(:all)

    respond_to do |format|
      format.html # index.html.erb
      format.xml { render :xml => @job }
    end
  end

  def create
    @job = Job.new(params[:job])

    respond_to do |format|
      if @job.save
        format.html { redirect_to @job, notice: 'Job was successfully created.' }
        format.json { render json: @job, status: :created, location: @job }
      else
        format.html { render action: "new" }
        format.json { render json: @job.errors, status: :unprocessable_entity }
      end
    end
  end

  def show
    @job = Job.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @job }
    end
  end
end 
```

如你看到的。它显然在那里。为什么 Rails 看不到它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T14:37:56.683

这是因为您将 create 方法分配为私有。

尝试以这种方式重新定义您的控制器。

这是我的控制器：

```
class JobsController < ApplicationController

  def index
    ...
  end

  def create
    ...
  end

  def show
    ...
  end

  private

  def load_clients
    @clients = collection_select :client, :client_id
  end

end 
```

# android - 带有级别列表的android通知setSmallIcon

> ID：10564650
> 
> 赞同：4
> 
> 时间：2012-05-12T14:37:04.513
> 
> 标签：android, statusbar, android-notifications

我正在使用 Notification.Builder 创建通知。对于此通知，我使用级别列表作为小图标

```
mNotificationBuilder.setSmallIcon(R.drawable.icon_levellist, levelInt); 
```

这会将图标设置为状态栏中的正确级别，但是当下拉通知时，图标会设置为默认级别。

我尝试使用自定义布局来显示它并且它可以工作，但是我希望能够使用 Notification.Builder 附带的默认布局。

这是一个错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T21:51:13.877

我认为这是一个错误，因为我遇到了同样的事情您可以为这个问题加注星标： [http ://code.google.com/p/android/issues/detail?id=43179&q=setSmallIcon&colspec=ID%20Type%20Status%20Owner %20总结%20颗星](http://code.google.com/p/android/issues/detail?id=43179&q=setSmallIcon&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars)

# android - 2 IDEA 的窗口打开时尝试附加调试器时出现 IDEA 11 adb I/O 错误

> ID：10564652
> 
> 赞同：4
> 
> 时间：2012-05-12T14:37:23.870
> 
> 标签：android, intellij-idea

此时，此错误从 IDEA 11 开始。我仍然没有找到正确的模式，但是如果设备或模拟器在特定时间段内（不长）空闲，然后我尝试将项目推送到设备/模拟器并附加调试器，首先出现一条消息，表明 IDEA 正在尝试连接到 ADB（几个消息窗口），然后开始上传，应用程序被上传，然后失败并出现错误：

```
Launching application: com.xxx/com.xxx.sMain.
DEVICE SHELL COMMAND: am start -D -n "com.xxx/com.xxx.Main"
I/O Error: Connection refused 
```

唯一的解决方案是关闭模拟器和 IDEA 或断开真实设备与 USB 电缆的连接。

任何想法为什么会发生这种情况？正如我所说，它发生在设备和模拟器上，所以我不能说它取决于设备/模拟器。

**编辑**

我尝试通过 shell 重新启动 ADB，它也没有帮助。当我只是项目时不会发生这种情况`run`，但只有当我按下时才会发生这种情况`debug`。

**编辑 2（5 月 18 日）**

我注意到当**两个 IDEA 的屏幕**同时打开时会发生这种情况。例如，我打开另一个项目并选择在新窗口中打开它。我首先在窗口 1 中运行该应用程序，然后在窗口 2 中运行该应用程序，但随后弹出窗口“尝试附加到 ADB”不断打开和关闭。我看到每次创建新弹出窗口时内存都会增加几 MB。这导致 IDEA 停止响应，我必须杀死它。

我认为这是一个新的错误。

# iphone - popviewcontroller 重置滚动视图内容偏移量

> ID：10564655
> 
> 赞同：0
> 
> 时间：2012-05-12T14:37:39.820
> 
> 标签：iphone, objective-c, ios

我有一个滚动视图，里面有一个 UITextfield。当键盘出现时，我使用 setContentOffset: animated: 滚动滚动视图。但是，当按下返回按钮到 popViewControllerAnimated: 时，滚动视图会向下滚动。我希望在弹出视图时滚动位置保持不变。知道如何让它正常工作吗？

谢谢！

```
// Called when the UIKeyboardDidShowNotification is sent.
- (void)keyboardWasShown:(NSNotification*)aNotification
{

...

// If active text field is hidden by keyboard, scroll it so it's visible
CGRect aRect = CGRectMake(0, 0, 320, 460-44-215);
aRect.size.height -= kbSize.height;
if (!CGRectContainsPoint(aRect, activeField.frame.origin) ) {
    CGPoint scrollPoint = CGPointMake(0.0, activeField.frame.origin.y-80);
    [sv setContentOffset:scrollPoint animated:YES];
}
} 
```

# xcode - NSLog 在 Xcode 4.3 中没有显示输出

> ID：10564661
> 
> 赞同：1
> 
> 时间：2012-05-12T14:38:18.010
> 
> 标签：xcode, debugging, gdb, nslog, lldb

NSLog 突然在 4.3 中完全没有给我控制台输出。我已经看到将调试器从 LLDB 切换到 GDB 的建议。

不幸的是，GDB 显示了一些输出，但仍然没有显示来自 NSLog 的输出。

任何建议表示赞赏。

# operating-system - UNIX Fork() 函数

> ID：10564666
> 
> 赞同：-2
> 
> 时间：2012-05-12T14:39:16.963
> 
> 标签：operating-system

Child 进程如何使用 Fork() 函数生成。

例如：一个进程执行代码 fork() fork() fork()

创建的“子”进程总数是/是？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T20:32:10.493

假设您在 Main 中执行了如下所示的总数 fork，那么将创建总共 2power(3) = 8 个进程，因此，8-1 =7 个子进程

要查看进程，请在 linux 上使用 ps

例如：

```
#include <unistd.h>    
#include <sys/types.h>  
#include <errno.h>      
#include <stdio.h>      
#include <sys/wait.h>   
#include <stdlib.h>     

int main()
{
/*-------------your code part------------*/
    fork();
    fork();
    fork();
/*-------------your code part------------*/
} 
```

# c++ - 有没有办法在运行时用 C 或 C++ 编译附加代码？

> ID：10564670
> 
> 赞同：21
> 
> 时间：2012-05-12T14:39:51.360
> 
> 标签：c++, c, linux, gcc, runtime-compilation

这是我想做的事情：

1.  运行一个程序并初始化一些数据结构。
2.  然后编译可以访问/修改现有数据结构的附加代码。
3.  根据需要重复步骤 2。

我希望能够在类 Unix 系统（尤其是 Linux 和 Mac OS X）上同时使用`C`和`C++`使用`gcc`（并最终）来做到这一点。`Java`这个想法基本上是为这些语言实现一个 read-eval-print 循环，在输入表达式和语句时编译它们并使用它们来修改现有的数据结构（在脚本语言中一直都在这样做）。我正在编写这个工具`python`，它会生成`C`/`C++`文件，但这不应该是相关的。

我已经探索过使用共享库来执行此操作，但了解到修改共享库不会影响已经运行的程序。我也尝试过使用共享内存，但找不到将函数加载到堆上的方法。我也考虑过使用汇编代码，但还没有尝试这样做。

我宁愿不使用任何编译器，`gcc`除非绝对没有办法在`gcc`.

如果有人有任何想法或知道如何做到这一点，我们将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-12T15:42:13.410

有一个简单的解决方案：

1.  创建自己的具有特殊功能的库
2.  加载创建的库
3.  执行该库中的函数，将结构作为函数变量传递

要使用您的结构，您必须包含与主机应用程序中相同的头文件。

**结构体.h：**

```
struct S {
    int a,b;
}; 
```

**主.cpp：**

```
#include <iostream>
#include <fstream>
#include <dlfcn.h>
#include <stdlib.h>

#include "structs.h"

using namespace std;

int main ( int argc, char **argv ) {

    // create own program
    ofstream f ( "tmp.cpp" );
    f << "#include<stdlib.h>\n#include \"structs.h\"\n extern \"C\" void F(S &s) { s.a += s.a; s.b *= s.b; }\n";
    f.close();

    // create library
    system ( "/usr/bin/gcc -shared tmp.cpp -o libtmp.so" );

    // load library        
    void * fLib = dlopen ( "./libtmp.so", RTLD_LAZY );
    if ( !fLib ) {
        cerr << "Cannot open library: " << dlerror() << '\n';
    }

    if ( fLib ) {
        int ( *fn ) ( S & ) = dlsym ( fLib, "F" );

        if ( fn ) {
            for(int i=0;i<11;i++) {
                S s;
                s.a = i;
                s.b = i;

                // use function
                fn(s);
                cout << s.a << " " << s.b << endl;
            }
        }
        dlclose ( fLib );
    }

    return 0;
} 
```

**输出：**

```
0 0
2 1
4 4
6 9
8 16
10 25
12 36
14 49
16 64
18 81
20 100 
```

您还可以创建**可变程序**来改变自身（源代码），重新编译自己，然后**`execv`**用共享内存替换它的实际执行并节省资源。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-12T14:46:29.670

我认为您可以使用动态库并在运行时加载它们（使用`dlopen`和朋友）来完成此操作。

```
void * lib = dlopen("mynewcode.so", RTLD_LAZY);
if(lib) {
    void (*fn)(void) = dlsym(lib, "libfunc");

    if(fn) fn();
    dlclose(lib);
} 
```

您显然必须在进行过程中编译新代码，但是如果您继续替换，`mynewcode.so`我认为这对您有用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-12T15:01:49.027

尽管 LLVM 现在主要用于编译中的优化和后端角色，但它的核心是低级虚拟机。

LLVM 可以 JIT 代码，即使返回类型可能非常不透明，所以如果您准备好将自己的代码包装在它周围并且不要太担心将要发生的强制转换，它可能会对您有所帮助。

然而，C 和 C++ 对这种事情并不友好。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-02-13T09:55:07.233

是的 - 您可以使用[Runtime Compiled C++](https://github.com/RuntimeCompiledCPlusPlus/RuntimeCompiledCPlusPlus)（或查看[RCC++ 博客和视频](http://runtimecompiledcplusplus.blogspot.com/)）或其[替代方案](https://github.com/RuntimeCompiledCPlusPlus/RuntimeCompiledCPlusPlus/wiki/Alternatives)之一来执行此操作。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-08-11T18:12:08.487

# 这可以通过 OpenCL 轻松完成

[OpenCL](http://khronos.org/opencl)是一种[广泛支持](http://khronos.org/conformance/adopters/conformant-products#opencl)的标准，主要用于将计算卸载到 GPU 等专用硬件。但是，它在 CPU 上也能正常工作，并且实际上执行 C99 类代码的运行时编译作为其核心功能之一（这就是实现硬件可移植性的方式）。较新的版本（2.1+）也接受 C++14 的一个大子集。

这种运行时编译和执行的基本示例可能如下所示：

```
#ifdef __APPLE__
#include<OpenCL/opencl.h>
#else
#include<CL/cl.h>
#endif
#include<stdlib.h>
int main(int argc,char**argv){//assumes source code strings are in argv
    cl_int e = 0;//error status indicator
    cl_platform_id platform = 0;
    cl_device_id device = 0;
    e=clGetPlatformIDs(1,&platform,0);                                      if(e)exit(e);
    e=clGetDeviceIDs(platform,CL_DEVICE_TYPE_ALL,1,&device,0);              if(e)exit(e);
    cl_context context = clCreateContext(0,1,&device,0,0,&e);               if(e)exit(e);
    cl_command_queue queue = clCreateCommandQueue(context,device,0,&e);     if(e)exit(e);
    //the lines below could be done in a loop, assuming you release each program & kernel
    cl_program program = clCreateProgramWithSource(context,argc,(const char**)argv,0,&e);
    cl_kernel kernel = 0;                                                   if(e)exit(e);
    e=clBuildProgram(program,1,&device,0,0,0);                              if(e)exit(e);
    e=clCreateKernelsInProgram(program,1,&kernel,0);                        if(e)exit(e);
    e=clSetKernelArg(kernel,0,sizeof(int),&argc);                           if(e)exit(e);
    e=clEnqueueTask(queue,kernel,0,0,0);                                    if(e)exit(e);
    //realistically, you'd also need some buffer operations around here to do useful work
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-12T15:17:19.660

如果没有其他方法有效 - 特别是，如果在您的运行时平台上最终不支持卸载共享库，您可以通过艰难的方式做到这一点。

1) 使用 system() 或其他任何东西来执行 gcc 或 make 或其他任何东西来构建代码

2）要么将其链接为平面二进制文件，要么自己解析链接器在您的平台上输出的任何格式（elf？）

3）通过 mmap()'ing 一个可执行文件或使用设置的执行位执行匿名 mmap 并在那里复制/解压缩您的代码（并非所有平台都关心该位，但假设您有一个）

4）刷新任何数据和指令缓存（因为通常不能保证两者之间的一致性）

5）通过函数指针或其他方式调用它

当然还有另一种选择 - 根据您需要的交互级别，您可以构建一个单独的程序并启动它并等待结果，或者分叉并启动它并通过管道或套接字与其通信。如果这能满足您的需求，那就不会那么棘手了。

# jqgrid - jqGrid subGridRowExpanded 参数

> ID：10564673
> 
> 赞同：1
> 
> 时间：2012-05-12T14:39:53.623
> 
> 标签：jqgrid

我在哪里设置传递给 subGridRowExpanded 方法的值。例如，我有一个父行 A，我想获取 A 的子行，所以我想将此值传递给 subGridRowExpanded 方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-05T00:37:38.630

@SBel：这些天我在升级到 jqGrid v. 4.6.0 后遇到了同样的问题。通过指向“错误”的 id 规范，Oleg 一如既往地是正确的。当您的 JSON-String 的生成来自较旧的 jqGrid-Installation 时，有时会发生这种情况......但是，这些行帮助了我：

```
[...],
subGridRowExpanded: function(subgrid_id, row_id) {
    var rowData = $(this).getRowData(row_id);
    var uid = rowData['id'];
    [...]
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T14:50:22.770

`subGridRowExpanded`是*回调函数*。例如，使用它来将[Subgrid 实现为 Grid](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3asubgrid_as_grid#definition)。jqGrid 设置所有参数，然后调用你的回调函数，如果你实现了它。

您应该更清楚地描述您的原始问题：您想要做什么以及在哪种情况下（在哪种情况下或在哪个回调内部）。

# jquery - 如何通过单击 div 中的任何锚标记来选择 div 中的兄弟姐妹

> ID：10564675
> 
> 赞同：0
> 
> 时间：2012-05-12T14:40:03.670
> 
> 标签：jquery

我正在尝试创建喜欢/不喜欢的功能，例如stackoverflow的赞成票和反对票功能。这是我迄今为止尝试过的示例代码[http://jsfiddle.net/Dd9Qa/3/](http://jsfiddle.net/Dd9Qa/3/)但我没有得到想要的结果当我单击特定 div 中的喜欢或不喜欢按钮时我应该得到在 span 字段中带有数字的警报（将在此处使用 ajax 完成对增加或减少喜欢的进一步处理）

当我单击喜欢/不喜欢按钮时，我想获取跨度字段中的值，以便我可以处理它请帮助我该怎么做..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T14:43:16.003

您必须指定`span`要访问的内容。

试试这个：http: [//jsfiddle.net/Dd9Qa/9/](http://jsfiddle.net/Dd9Qa/9/)

```
$(document).ready(function(){
    $('body').on('click','a',function(){
        var a = $(this).closest('div').find('.votes').data('vote');
        alert(a);
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T14:43:39.660

你应该使用`data()`而不是`attr()`：

```
$(document).ready(function(){
       $('a').on('click',function(e){
       e.preventDefault();
       a = $(this).parent().parent().find('span').data('vote');
       alert(a);
      });
  }); 
```

[http://jsfiddle.net/Dd9Qa/11/](http://jsfiddle.net/Dd9Qa/11/)

# magento - Magento：如何在最新版本中获得价格过滤器的范围

> ID：10564679
> 
> 赞同：0
> 
> 时间：2012-05-12T14:40:39.973
> 
> 标签：magento

例如，最新版本的 Magento 允许我仅在固定平板上过滤价格

```
price=1,1000 
```

表示，在 0 到 1000 的范围内，并且

```
price=2,1000 
```

表示，在 1000 到 2000 等范围内，

但我希望为用户提供一个选项来选择最低和最高价格来过滤产品......就像价格的结果，200 美元到 3000 美元或 300 美元到 2000 美元，我怎样才能做到这一点？

新版本有不同的url参数吗？或其他方式来实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T05:00:36.337

**解决方案 1.**这是Magento 论坛上讨论的自定义价格过滤[的主题。](http://www.magentocommerce.com/boards/viewthread/65135/)在这里，人们共享了自我修改的代码以过滤掉产品。尽管代码可能取决于版本。希望这对你有用..

**解决方案2。**另一个对我也有用的解决方案：

您可以通过管理面板配置价格范围的步骤。登录到管理面板并转到系统->配置->目录->目录->分层导航。在“价格导航步骤计算”下拉菜单中选择“手动”，然后在接下来的两个输入字段中输入首选值。

# javascript - 在javascript中获取div位置（顶部）？

> ID：10564680
> 
> 赞同：6
> 
> 时间：2012-05-12T14:40:53.357
> 
> 标签：javascript, jquery, html

我使用一个 div 在 css 中设置高度`top:-26px;`。我有其他 div 其他地方我想与该 div 对齐。我注意到在 jquery 写作中`.css('top')`得到了我的 css 而不是 div 的 y 坐标。如何使用 javascript 获得绝对 x,y 位置？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-12T14:49:59.750

我会给你香草解决方案..不要抱怨..在你的元素中添加一个 [0] 并且它是固定的！:P 希望这会有所帮助。

```
function getOffset( el ) {
    var _x = 0;
    var _y = 0;
    while( el && !isNaN( el.offsetLeft ) && !isNaN( el.offsetTop ) ) {
        _x += el.offsetLeft - el.scrollLeft;
        _y += el.offsetTop - el.scrollTop;
        el = el.offsetParent;
    }
    return { top: _y, left: _x };
}
var x = getOffset( document.getElementById('yourElId') ).left; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-12T14:42:42.140

您可以使用`jQuery(element).offset().top`

希望能帮助到你。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-12T14:49:07.460

试试这个代码：

```
function getElementPosition(id) {
    var offsetTrail = document.getElementById(id);
    var offsetLeft = 0;
    var offsetTop = 0;
    while (offsetTrail) {
        offsetLeft += offsetTrail.offsetLeft;
        offsetTop += offsetTrail.offsetTop;
        offsetTrail = offsetTrail.offsetParent;
    }

    return {
        left: offsetLeft,
        top: offsetTop
    };
}​ 
```

它将返回一个带有`left`和`top`变量的对象。

如果您使用 JQuery 尝试[`offset()`](http://api.jquery.com/offset/)方法：

```
var pos = $("#element").offset();
console.log(pos.left)
console.log(pos.top) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-05-09T07:46:54.023

跨浏览器安全到 IE 8，甚至可能是 7 或 6：

```
function offset(el) {
    var rect = el.getBoundingClientRect(),
    scrollLeft = window.pageXOffset || document.documentElement.scrollLeft,
    scrollTop = window.pageYOffset || document.documentElement.scrollTop;
    return { top: rect.top + scrollTop, left: rect.left + scrollLeft }
}
var offsetEl = offset(document.getElementById('some_id'));
console.log(offsetEl.left, offsetEl.top); 
```

短而快，不需要 jQuery。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-28T11:02:19.660

使用 jQuery(element).offset()

希望能帮助到你。

例如

```
var elementPosition = jQuery(element).offset();
var elementTopPositon = elementPosition.top; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-12T14:44:30.427

使用标准 JavaScript：

```
var elem=document.getElementById("elemID");
var top=elem.offsetTop;
var left=elem.offsetLeft; 
```

使用 jQuery：

```
var top=$("#elemID").offset().top;
var left=$("#elemID").offset().left; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-06T06:37:30.040

> ```
> var MyElement = document.getElementById("...Your_DIV_Control...");
> 
> var top = MyElement.getBoundingClientRect().top; 
> ```

# eclipse - 如何修复错误“更新 Maven 项目”。不支持的 IClasspathEntry kind=4？

> ID：10564684
> 
> 赞同：413
> 
> 时间：2012-05-12T14:42:12.833
> 
> 标签：eclipse, maven, m2eclipse, eclipse-wtp

我在 STS 中导入了 maven 项目，当我运行更新更新项目时，我收到：

```
"Updating Maven Project". Unsupported IClasspathEntry kind=4 
```

有解决方法吗？

* * *

## 回答 #1

> 赞同：613
> 
> 时间：2012-05-14T00:48:55.213

**此问题已在 m2e 1.5.0 中修复，可用于 Eclipse Kepler (4.3) 和 Luna (4.4)**

请参阅[https://bugs.eclipse.org/bugs/show_bug.cgi?id=374332#c14](https://bugs.eclipse.org/bugs/show_bug.cgi?id=374332#c14)

问题是由于 STS（Spring IDE/Eclipse）以及 Eclipse 和其他基于 Eclipse 的 IDE 使用 m2e(clipse) 插件但 eclipse:eclipse 可能已在项目上运行。当 m2e 遇到“var”.classpath 条目时，它会抛出此错误。

更新站点在以下 url 中指定： http:
[//eclipse.org/m2e/m2e-downloads.html](http://eclipse.org/m2e/m2e-downloads.html)

如果您因任何原因不能使用 m2e 1.5.0，那么：

1.  禁用项目的 Maven 特性（通过右键菜单）

2.  运行`mvn eclipse:clean`（当您的项目在 STS/eclipse中*打开时）。*根据时间的不同，您可能需要在重新启用 Maven 特性之前对项目进行一两次刷新。您应该能够看到您的项目已经失去了它的 Maven 特性。（`eclipse:clean`目标只是删除`.project`,`.classpath`和`.settings/`文件/目录。您也可以只删除这些文件（再次*在项目打开时*）而不是运行`mvn eclipse:clean`。）

3.  重新启用 Maven 自然。
    （大多数情况下，这可以通过在包资源管理器窗格中右键单击有问题的项目，然后选择“配置”->“转换为 Maven 项目”来完成）

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2012-10-15T09:06:37.987

1.  右键单击您的项目，选择 Maven -> Remove Maven Nature。

2.  打开您的终端，转到您的项目文件夹并执行`mvn eclipse:clean`

3.  右键单击您的项目并选择“配置 -> 转换为 Maven 项目”</p>

现在“Unsupported IClasspathEntry kind=4 Eclipse Scala”消失了。

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2014-03-24T12:44:32.173

有时，即使重新导入 Maven 项目也不起作用。在 Eclipse 中正确更新项目不是一个确定性的过程。我发现的唯一 100% 故障安全程序是：

1.  禁用 Maven Nature，运行`mvn eclipse:clean`，重新启动，交叉手指和**祈祷**3 次。
2.  如果这不起作用，请删除项目，运行`mvn eclipse:clean`，重新导入刷新，祈祷并**使用原力**。
3.  如果这仍然不起作用，请**重新启动 Eclipse**，或者甚至更好地使用您的**计算机**。在等待重新启动时，您可以进行随机**捐赠**以修复您的 Karma。重复步骤 2，不要忘记祈祷并控制你的愤怒。愤怒导致仇恨。仇恨导致痛苦。
4.  尝试此线程中发布的所有其他答案。在放弃之前，您可能需要至少尝试 3 次。
5.  **格式化**您的计算机，**重新安装 Eclipse 和 Maven**。不用再祈祷了，反正所有的神都恨你
6.  删除您的 git 项目，**刻录**存储远程存储库的物理驱动器，然后从头开始编写您的项目。
7.  找一**台时光机**，穿越到过去，说服自己从事另一个非编程职业，或者至少避免使用 Java

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-08-21T13:40:23.913

1.  确保您正在运行的 m2e(clipse) 插件的版本至少为 1.1.0

2.  关闭 maven 项目 - 右键单击​​“关闭项目”

3.  手动删除 .classpath 文件中所有带有 kind="var" 的类路径条目
4.  打开项目

或者

1.  删除 Maven 项目
2.  Manualy rmeove .classpath 4 重新导入项目

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-08-26T08:46:36.993

你有没有尝试过：

1.  如果您已经将项目导入 eclipse 4，请将其删除。
2.  在 maven consol 中，运行： mvn eclipse:clean
3.  在 Eclipse 4 中：文件 -> 导入 -> Maven -> 现有的 Maven 项目

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-03-11T09:13:08.473

看到所有其他答案。我为我找到了一种更简单的方法。

我刚刚删除了包含 var 的 .classpath （用 eclipse 编辑）中的所有行，并使用 maven -> update project 没有错误。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-26T15:04:52.387

如果在使用 Clover 检测代码覆盖率的项目上使用更新命令，也会引发此错误。

在这种情况下解决：取消仪器您要更新的项目文件夹。运行 Maven 更新，然后再次检测代码覆盖率。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-02T08:06:51.073

我尝试了 Marco 的步骤，但没有运气。相反，如果您只是从他提供的链接中获取最新的 m2e 插件，并一一右键单击每个项目 -> Maven -> 更新依赖项，错误仍然会弹出，但问题已解决。也就是说，警告在标记视图中消失了。我在将一些项目导入 SpringSource Tool Suite (STS) 后遇到了这个问题。当我返回我的 Eclipse Juno 安装时，正在显示警告。看到我已经安装了 m2e 1.1，我尝试了 Marco 的步骤，但无济于事。但是，获取最新版本已修复它。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-10-01T14:40:50.393

我无法让 mvn eclipse:clean 等与开普勒一起工作。

但是，我将创建和扩展变量更改为仅在 Eclipse 类路径中使用外部 jar。这反映在我的 .classpath 中没有 var。

这纠正了问题。我能够进行 Maven 更新。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-05-10T13:37:32.973

此问题 ( [https://bugs.eclipse.org/394042](https://bugs.eclipse.org/394042) ) 已在 m2e 1.5.0 中修复，此 p2 repo 可用于 Eclipse Kepler 和 Luna：

[http://download.eclipse.org/technology/m2e/releases/1.5](http://download.eclipse.org/technology/m2e/releases/1.5)

如果您还使用 m2e-wtp，则还需要安装 m2e-wtp 1.1.0：

[http://download.eclipse.org/m2e-wtp/releases/luna/1.1](http://download.eclipse.org/m2e-wtp/releases/luna/1.1)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-09-08T10:33:22.843

从 Kepler 升级到 Luna 对我有用。

我刚刚为 Java 1.8 支持添加了一些组件。似乎它们不像我想要的那样兼容，或者我混合了错误的。确实带来了很多问题。尝试更新系统报告错误，因为它们无法满足某些依赖项。Maven 升级不起作用。尝试了很多东西。

因此，如果没有理由避免升级，只需将 luna 存储库添加到可用的软件站点（Luna [http://download.eclipse.org/releases/luna/](http://download.eclipse.org/releases/luna/) ）并“检查更新”。最好让所有组件都具有相同的版本，并且有一些不错的新功能。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-10-20T09:12:02.803

我尝试了此处提到的所有步骤以及类似问题，但无法解决此问题。我既不能解决问题也不能更新我的 m2eclipse。所以我安装了 Eclipse Luna，它解决了我的问题……尽管这意味着我必须花费大约 45 分钟来配置我工作区中的所有环境。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-01-07T11:30:48.753

在 DOS 命令提示符下尝试 mvn clean install eclipse:eclipse -Dwtpversion=2.0 命令。建议你，因为它对我有用！

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-03-18T15:31:01.940

我正在使用带有 M2E 1.4.x 的 Eclipse 4.3.2 (Kepler) 并且多次遇到这个问题！

在我的例子中，“mvn eclipse:eclipse”命令还会生成 Checkstyle、PMD 和 Findbugs 配置，所以“mvn eclipse:clean”对我没有帮助，因为它会再次删除所有这些配置文件。

对我来说最好的解决方案是删除所有“.classpath”文件：

```
find . -name ".classpath" -delete 
```

然后将项目导入eclipse。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-06-01T09:21:12.360

导入项目前要先转换成eclipse项目 mvn eclipse: eclipse 然后发现如下错误。在“导入 Maven 项目”期间发生内部错误。不支持的 IClasspathEntry kind=4

M2E 无法识别并因此引发错误的值 kind = "var" 在哪里。

现在输入这个。mvn eclipse: 清洁

现在在eclipse中刷新项目或重新导入。

# javascript - JQuery隐藏鼠标，如果它不移动

> ID：10564690
> 
> 赞同：7
> 
> 时间：2012-05-12T14:43:03.800
> 
> 标签：javascript, jquery, html

如果鼠标一段时间没有移动，我会尝试隐藏鼠标。

这是我正在使用的代码：

```
$(document).ready(function() {
    var j;
    $(document).mousemove(function() {
        clearTimeout(j);
        $('html').css({cursor: 'default'});
        j = setTimeout('hide();', 1000);
    });
});

function hide() {
    $('html').css({cursor: 'none'});
} 
```

当调用 hide() 函数时，光标被隐藏，但稍后会取消隐藏。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T15:02:50.930

您最初的问题是隐藏鼠标触发器`mousemove`并因此立即将其重置为默认值。所以你可以像这样解决这个问题......

```
var justHidden = false;

$(document).ready(function() {
    var j;
    $(document).mousemove(function() {
        if (!justHidden) {
            justHidden = false;
            console.log('move');
            clearTimeout(j);
            $('html').css({cursor: 'default'});
            j = setTimeout('hide();', 1000);
        }
    });
});

function hide() {
    $('html').css({cursor: 'none'});
    justHidden = true;
}​ 
```

## ...呜呜呜...

您在这里面临一个问题，目前对我来说似乎无法解决。也就是说，隐藏的鼠标永远不会触发`mousemove`，所以一旦它被隐藏，据我所知，你将无法取消隐藏它。

我会继续调查，看看是否有我遗漏的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-11T19:40:09.977

我迟到了 8 年，但我有一个解决方案：

• 首先从互联网上下载一个光标图像或复制我的 svg 代码：

```
<svg id="cursor" width="20" height="20" viewBox="0 0 95 92" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M84.6925 46.0105L40.25 20.3516C35.25 17.4648 29 21.0733 29 26.8468L29 78.1645C29 84.9879 37.3721 88.2664 42.0056 83.2575L58.1424 65.8134C58.4853 65.4427 58.9324 65.1846 59.4249 65.0729L82.6003 59.8201C89.255 58.3118 90.6017 49.4222 84.6925 46.0105Z" fill="black" stroke="white" stroke-width="5"/></svg> 
```

并将其添加到您的 html 文件中。

•当然，如果你想用jQuery制作，你需要在你的js文件上面添加这个脚本：

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> 
```

•然后添加这个（在你的JavaScript文件中）：

```
let timedelay = 1;

function delayCheck() {
  if (timedelay == 2) { //Here you can change this value which changes the time it takes the mouse to hide
    $('#cursor').fadeOut();
    timedelay = 1;
  }
  timedelay += 1;
}
$(document).mousemove(function() {
  $('#cursor').fadeIn();
  timedelay = 1;
  clearInterval(_delay);
  _delay = setInterval(delayCheck, 1000);
});
_delay = setInterval(delayCheck, 1000);
```

现在您将在屏幕左上角看到一个光标，它可以执行您所要求的操作，但它不是您的光标，要使用 svg 替换光标，请执行以下操作：

```
//in the same js file as before
$(document).mousemove(function (e) {
    $('#cursor').offset({
        left: e.clientX,
        top: e.clientY
    });
});
```

```
/* on the css */
html {
cursor: none;
}
```

如果它不起作用，请确保将 jquery 文件放在您编写的文件之上。我希望我帮助了某人！您可能想检查这是否真的有效，这里是[演示](https://cursor-hide.netlify.app/)。（对不起，如果我的英语不好，我是意大利人）。

（提示）你会注意到有两个相同的函数，如果你想合并它们，只需将它们替换为：

```
$(document).mousemove(function(e) {
  $('#cursor').fadeIn();
  timedelay = 1;
  clearInterval(_delay);
  _delay = setInterval(delayCheck, 1000);
  $('#cursor').offset({
    left: e.clientX,
    top: e.clientY
  });
});
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-29T09:57:58.260

当我在 2019 年为这一挑战寻找解决方案时，我发现了这个线程。根据此处的答案和[“使用 JavaScript 空闲时隐藏鼠标光标”，](https://stackoverflow.com/questions/3354239/hiding-the-mouse-cursor-when-idle-using-javascript)我提出了一个略有不同的解决方案：

```
var DEMO = {
  INI: {
    MOUSE_IDLE: 3000
  },
  hideMouse: function() {
    $("#game").css('cursor', 'none');
    $("#game").on("mousemove", DEMO.waitThenHideMouse);
  },
  waitThenHideMouse: function() {
    $("#game").css('cursor', 'default');
    $("#game").off("mousemove", DEMO.waitThenHideMouse);
    setTimeout(DEMO.hideMouse, DEMO.INI.MOUSE_IDLE);
  },
  showMouse: function() {
    $("#game").off("mousemove", DEMO.waitThenHideMouse);
    $("#game").css('cursor', 'default');
  },
};
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
```

这个简单明了的示例为您提供了开始隐藏鼠标 ( `DEMO.hideMouse()`) 和关闭鼠标 ( ) 的选项`DEMO.showMouse()`。它不会在同一元素上创建多个事件。此示例显示将鼠标指针隐藏在`#game`div 元素上。只需将其更改为您选择的 div 或`body`.

从 2019 年 10 月全面更新的 Chrome 和 FF 开始：它适用于两者。

# php - 刷新 php 输出而不重新加载页面

> ID：10564692
> 
> 赞同：0
> 
> 时间：2012-05-12T14:43:14.743
> 
> 标签：php, javascript, jquery, ajax

php 脚本解析 xml 文件并在 div 内的页面上打印输出：

```
<?php
$playlistUrl = 'http://url/to/playlist.xml';
$xmldata = file_get_contents($playlistUrl);

$xml = new SimpleXMLElement($xmldata);

foreach( $xml->trackList->track as $track ) {
    echo $track->title .' - '. $track->annotation .'<br>';
}
?> 
```

我想使用某种 AJAX 方法每 25 秒更新一次输出而不重新加载页面。我找到了一些设置时间间隔的代码示例：

```
// Poll the server each 60 seconds
window.setInterval(function() 
}, 60000); 
```

还

```
setInterval(function(){
SomeAjaxFunction();
}, 1000); 
```

在我的情况下如何正确实施？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T14:47:32.133

在这里查看我的答案。

[在特定时间后刷新页面元素](https://stackoverflow.com/questions/10328427/refresh-page-element-after-specific-time/10328559#10328559)

我已经回答了如何在特定时间后重新加载 div，您可以稍微调整一下以在一段时间后继续重新加载。

基本情况如下。

```
<div id="reload">
//your PHP code and content are here.
</div> 
```

和你的 jQuery 代码。

```
<script>
setInterval(function() {
    $('#reload').fadeOut("slow").load('reponse.php').fadeIn("slow");
}, 10000);
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T15:00:16.983

setTimeout 在 X 秒后执行函数......然后如果你让它递归，你将在代码执行***后总是有 X 秒等待。***这优于每 X 秒执行一次的 setInterval。

考虑一下服务器何时滞后并且 load() 需要几秒钟才能实际加载...现在*动画*已超时一半并且正在重新加载/再次淡出...。

```
function loopy_function() {
    // ajax call
    // on success 
    setTimeout(loopy_function, 1000 * 10 );

} 
```

这里的关键是仅在完成响应时调用您的 setTimeout。

# mysql - MySQL - 瓶颈 - 加入一对多, 新闻文章标签

> ID：10564695
> 
> 赞同：0
> 
> 时间：2012-05-12T14:43:41.360
> 
> 标签：mysql, join

我有一个新闻栏目。文章被标记并存储在 3 个表中：

**帖子：**

```
posts_id,title,body 
```

**标签：**

```
tags_id,name 
```

**帖子标签：**

```
posts_id,tags_id 
```

目前的问题是新闻部分的首页显示前10篇文章的预览。每个预览都会显示标签列表。显示标签列表意味着我必须再次查询每个帖子以获取标签列表。

因此，例如，10 个预览需要 1 个查询（从帖子中获取 10 个帖子）+10 个查询（每个帖子上的标签 1 个，posts_tags 获取标签列表）。加载页面的 11 个查询似乎最终可能成为瓶颈。

我应该放弃标记预览吗？PIVOT 会产生相同数量的查询吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T14:51:27.387

我看到您可以尝试 2 个主要解决方案：

*   使您的代码在一个查询中完成所有操作（使用连接返回带有相关标签的每个帖子）

*   在 Web 服务器和脚本语言之间使用[缓存层](http://php.net/manual/en/book.apc.php)，因此如果页面没有更改，它不会再次进行所有查询

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T14:58:49.153

您可以使用“加入”将其全部保存在一个查询中。但是：这类查询可能会变得非常“昂贵”，特别是如果您要进行某种分组。所以我建议尝试子选择。例如：

```
SELECT (
    SELECT GROUP_CONCAT(name)
    FROM   tags, posts_tags
    WHERE  posts_tags.posts_id = posts.posts_id
    AND    tags.tags_id = posts_tags.tags_id
) FROM posts LIMIT 10 
```

使用这种子选择，您通常可以获得比进行普通连接和分组更好的结果。

缓存当然仍然是一个好主意......

# wpf - Wpf Datagrid删除行问题

> ID：10564699
> 
> 赞同：2
> 
> 时间：2012-05-12T14:43:55.417
> 
> 标签：wpf, datagrid, delete-row

我是 WPF 的新手。我想从数据网格运行时删除行。当我尝试像这样删除行时

Datagrid.Items.Remove(eRow);

它给了我一个错误“错误是：使用 ItemsSource 时操作无效。改为使用 ItemsControl.ItemsSource 访问和修改元素。”

我在网上看到你可以使用 ObservationCollection 和 InotifyPropertyChangedEvent 但我不知道如何实现它。

我有这样的删除按钮

![在此处输入图像描述](../Images/bb5da82e39b4fa7bb2f3f5447081fc48.png)

这是数据网格

```
 <ctrls:RhinoDataGrid x:Name="dataGrid" Grid.Row="1" Margin="5" ItemsSource="{Binding Model.CurrentDataTable}"   
                             Style="{StaticResource RhinoDataGridBaseStyle}" IsReadOnly="{Binding Model.IsLinkFile}"
                             SelectedValue="{Binding Model.CurrentDataRow}" SelectedValuePath="Row"
                              >

            </ctrls:RhinoDataGrid> 
```

请帮助我。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T15:18:52.077

您的 DataGrid 的 ItemsSource 在 Model.CurrentDataTable 上有一个绑定。如果要删除一行，则必须删除该集合中的项目。[但是，如果集合没有实现INotifyCollectionChanged](http://msdn.microsoft.com/en-us/library/system.collections.specialized.inotifycollectionchanged.aspx)，DataGrid 不会注意到该修改。

.NET 有一个内置的[ObservableCollection](http://msdn.microsoft.com/en-us/library/ms668604.aspx)，它实现了 INotifyCollectionChanged。如果将此集合类型用于 CurrentDataTable，则 DataGrid 将在修改集合时自行更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T17:16:09.650

WPF 数据绑定意味着您很少直接操作用户界面。您尝试做的是直接从 UI 上的网格控件中删除该行，这可能是您在 Winforms 中处理事物的方式。

使用 WPF 数据绑定，用户界面会对基础数据做出反应。因此，在您的情况下，网格被绑定到（或“观看”）绑定指定的 ItemsSource 的内容：`Binding Model.CurrentDataTable`

要删除一行，您需要将其从基础数据中删除，UI 将自动反映更改。

这就是[ObservableCollection](http://msdn.microsoft.com/en-us/library/ms668604.aspx)和[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/ms229614.aspx)的​​全部意义所在——如果您正在进行 WPF 开发，您**真的需要阅读它们！**

# objective-c - 自定义核心数据删除操作

> ID：10564700
> 
> 赞同：1
> 
> 时间：2012-05-12T14:44:25.570
> 
> 标签：objective-c, core-data, cascading-deletes

我有三个实体对象。这些实体之间的关系有点像三角恋！

`Company <<----->> Department`（多对多）（例如，人力资源部门对所有公司都是通用的）

`Department <---->> Employee`

`Company <----->> Employee`

树立榜样，

John (employee1) 属于 BSKYU 公司，从事市场营销工作) Jason (employee2) 属于 IBC Compnay，从事财务工作) **注意：市场营销对 John 和 Jason 来说都是通用的。

我想开发一个删除例程，这样，

`deleting` **公司**将删除所有它`Employees` 我也想摆脱不属于任何“其他公司”的部门。因此，如果我删除 IBC 公司，它应该删除 Jason（我猜是通过级联），并且仅当 IBC 是唯一拥有财务部门的公司时，才能摆脱财务部门。我不知何故需要检查 Finance.company == [零结果] 如果是，请将其删除。

`DELETING`**DEPARTMENT**将删除`its Employees`之前选择的属于 A 公司的所有内容！假设一家公司已被选中，我会如果我删除一个部门，比如人力资源部，我还想删除该部门内**属于选定公司的所有员工**

我的问题是，“在哪里”我应该处理这样的删除规则，这会遇到，但我不知道如何处理它：

```
- (BOOL)validateForDelete:(NSError **)error 
```

处理删除的最有效方法是什么，根据上述规则检查是否需要删除的所有内容应该是。

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T14:53:25.060

您必须自己使用正确的谓词，您可以使用下面的示例代码作为起点，但您必须提供上下文、谓词等。

删除规则可以很好地确保数据完整性，但如果您有特殊情况，您必须获取对象并手动删除它们。

> `// 创建获取请求

```
NSFetchRequest *request = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:entityName inManagedObjectContext:managedObjectContext];
[request setEntity:entity]; 

// Ignore property values for maximum performance
[request setIncludesPropertyValues:NO];

// If a predicate was specified then use it in the request
if (predicate != nil)
    [request setPredicate:predicate];

// Execute the count request
NSError *error = nil;
NSArray *fetchResults = [managedObjectContext executeFetchRequest:request error:&error];

// Delete the objects returned if the results weren't nil
if (fetchResults != nil) {
    for (NSManagedObject *manObj in fetchResults) {
        [managedObjectContext deleteObject:manObj];
    } 
```

`

除此之外，在关系的数据模型检查器中，您可以指定删除规则：

![在此处输入图像描述](../Images/a570bd031de3f5ba9624675393120e51.png)

但是，如果您开始说，我希望仅在“员工是一条腿，在工作，但在咖啡厅，除非大老板在假期，否则您必须对其进行编码”时才将其删除。

从核心数据编程指南：

> 关系删除规则
> 
> 关系的删除规则指定如果尝试删除源对象会发生什么。请注意前一句中的措辞——“如果尝试……”。如果关系的删除规则设置为拒绝，则可能不会删除源对象。再次考虑一个部门的员工关系，以及不同删除规则的影响。
> 
> 否定
> 
> 如果关系目的地至少有一个对象，则无法删除源对象。例如，如果您要删除一个部门，您必须确保该部门的所有员工都首先转移到其他地方（或解雇！）否则无法删除该部门。
> 
> 无效化
> 
> 将目标对象的反向关系设置为空。例如，如果您删除一个部门，请将所有当前成员的部门设置为空。仅当员工的部门关系是可选的，或者您确保在下一次保存操作之前为每个员工设置了一个新部门时，这才有意义。
> 
> 级联
> 
> 删除关系目标处的对象。例如，如果您删除一个部门，请同时解雇该部门的所有员工。
> 
> 无动作
> 
> 对关系目的地的对象不做任何事情。例如，如果您删除一个部门，请让所有员工保持原样，即使他们仍然认为自己属于该部门。
> 
> 应该清楚的是，这些规则中的前三个在不同的情况下是有用的。对于任何给定的关系，您可以根据业务逻辑选择最合适的关系。使用无操作规则的原因不太明显，因为如果使用它，您可能会使对象图处于不一致的状态（员工与已删除的部门有关系）。
> 
> 如果您使用 No Action 规则，则由您来确保保持对象图的一致性。您负责将任何反向关系设置为有意义的值。在您具有一对多关系并且目的地可能有大量对象的情况下，这可能会有所帮助。

来源：[核心数据编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdRelationships.html)

# objective-c - 如何在图像视图中应用触摸事件

> ID：10564701
> 
> 赞同：-2
> 
> 时间：2012-05-12T14:44:30.430
> 
> 标签：objective-c

我是 iPhone 的初学者，我正在处理触摸事件。我已经放了这段代码，但是在图像视图中没有执行触摸我还在 imageView 上使用了滚动视图，因此不应用触摸事件的原因。

我的代码是

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event 
{
    // get touch event
    UITouch *touch = [[event allTouches] anyObject];
    CGPoint touchLocation = [touch locationInView:self.view];

    if ([touch view] == imagedisplay) {
        // move the image view
        imagedisplay.center = touchLocation;
    }

} 
```

但在那不执行触摸事件中给出任何建议任何源代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T15:30:47.920

您可以使用 UIGestureRecognizer。

```
UITapGestureRecognizer* Tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(imageViewTapDetected:)];
[Tap setDelegate:self];
[Tap setNumberOfTapsRequired:1];
[ImageView addGestureRecognizer:Tap]; 
```

之后，在您的函数中，您可以使用 state 函数确定当前的点击状态：

```
-(void)imageViewTapDetected:(UItapGestureRecognizer*)Tap{

    switch ([Tap state]) {
        case UIGestureRecognizerStatePossible:

            break;
        case UIGestureRecognizerStateBegan:

            break;
        case UIGestureRecognizerStateChanged:

            break;
        case UIGestureRecognizerStateEnded:

            break;
        default:

            break;
    }
} 
```

# android - xml布局文件Android缺少图形布局

> ID：10564703
> 
> 赞同：0
> 
> 时间：2012-05-12T14:44:48.660
> 
> 标签：android, eclipse

我打开了一个 android 项目，但没有显示 xml 文件图形布局..我搜索了堆栈溢出，发现可以通过单击右上角的创建来修复它..但它是灰色的并且没有出现...即使我填写了语言环境的所有详细信息，编辑配置，将 android API 级别更改为 2.2/3.0 ..文件在 xml 视图中打开..附有屏幕截图..谁能让我知道问题所在及其解决方案。如果答案在堆栈溢出的某个地方..请提供链接..我将删除问题..我自己无法找到答案..

![图形布局](../Images/abcdee90261f22a2e447a795843c61ae.png)

![在此处输入图像描述](../Images/9c849b7f1fa33f59b925dbe393cc34a3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T06:20:09.167

打开方式 > Android 通用 XML 编辑器将不起作用。

由于主题，两个选项卡丢失了。尝试将您的主题设置回默认主题。**Eclipse > 首选项 > 常规 > 外观 > 主题组合框 > Mac**

# c++ - 需要“一个”对象，如何使用“新”

> ID：10564706
> 
> 赞同：-2
> 
> 时间：2012-05-12T14:45:04.537
> 
> 标签：c++, new-operator

我写;

```
Element element=new Element; 
```

我有错误；

```
homework.cpp: In function 'int main(int, char**)':
homework.cpp:227:29: error: conversion from 'Element*' to non-scalar type 'Element' requested

*** 1 errors, 0 warnings 
```

我不想要一个指针或元素数组，

我应该写`Element *element= new Element;`。有人解释一下吗？

编辑：

元素类：

```
class Element{
  public:
      Element():exists(false){};

      std::string name;
      std::string full_path_name;
      ElementType element_type;
      long element_size;
      bool exists;

  }; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T14:49:29.277

如果你想分配一个动态对象，它会是

```
Element* element = new Element; 
```

因为`new`返回一个指向自由存储中对象的指针。您必须`delete element`在使用完对象后调用以防止内存泄漏。如果您想避免手动管理内存，可以使用`std::unique_ptr`：

```
std::unique_ptr<Element> element = new Element; 
```

并且会在超出范围时自动`element`调用指针。`delete`但是，您确定不想只创建一个自动对象吗？

```
Element element; 
```

这会在自动存储中创建对象，您不必手动释放它*或*使用智能指针，而且速度要快得多；这是最好的方法。（但请确保您不要`Element element();`使用函数原型，而不是变量声明。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T14:47:37.147

如果您的对象不需要任何参数，您可以这样做

```
Element * element=new Element(); 
```

如果您的对象在构造函数中需要参数，则它们需要通过创建传递

```
Element * element=new Element(argument1, argument2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T14:49:20.250

来电：

`Element * element = new Element;`

会给你一个指向堆上一个元素的指针，你以后需要`delete`。您可以将 this 的成员与`element->my_member`.

校准：

`Element element;`将在堆栈上创建一个不需要删除的对象，并且在超出范围时将失效。您可以将 this 的成员与`element.my_member`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T14:48:43.693

通过调用`new`，您是在堆内存中分配对象，而不是在堆栈中（`Element element;`例如，在这种情况下）。

正确的方法是使用`Element *element= new Element();`

这不会为多个对象分配内存（在这种情况下你写过`new[]`）

# jquery - 添加用户界面。垃圾桶图标到按钮

> ID：10564709
> 
> 赞同：0
> 
> 时间：2012-05-12T14:45:20.237
> 
> 标签：jquery, css, jquery-ui

我想知道是否有人可以帮助我。

我正在使用下面的代码创建一个带有图标的删除按钮，当与 Javascript 结合使用时，它允许用户从图库页面中删除图像。

我目前正在使用已下载的图标，但如果可能的话，我想使用的是 ui.Trash 图标。

我是第一个承认我不是特别精通应用 .css 文件和设置的人，而且我花了相当长的时间来整理当前的脚本。

从我一直在阅读的内容来看，我认为我说图像是通过跨度类调用的是正确的？我试着用这个来代替，`url`但这会导致我的画廊风格有点不对劲。

```
<style>

         .galleria-thumbnails .btn-delete {    
          display: block;  
          position: absolute; bottom : 0px;  
          width: 80px;     
          height: 80px;    
          cursor: pointer;     
          background: url(trashout.png) no-repeat bottom; } 

        </style>

    <script type="text/javascript"> 
        Galleria.ready(function() {
            this.$('thumblink').click();

        $(".galleria-image").append( 
        "<span class='btn-delete ui-icon ui-icon-trash'></span>"); 
        $(".btn-delete").live("click", function(){
        var img = $(this).closest(".galleria-image").find("img"); 

        // send the AJAX request
        $.ajax({
        url : 'delete.php',
        type : 'post',
        data : { image : img.attr('src') },
        success : function(){
        alert('Deleting image... ');
        img.parent().fadeOut('slow');
        }
        });

        return false;
        });

        });

    </script> 
```

我已经在我的 AJAX 脚本中包含了图标名称，但我无法实际创建图标，而且我不确定下一步该做什么。我只是想知道是否有人可以看看这个并就如何更改图标提供一些帮助。

非常感谢和问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T21:40:35.410

这是一个仅显示垃圾桶图标的 jQuery UI 按钮示例：

```
<button class="table-delete-link" title="Delete" href="delete-example.php?id=17">
    <span class="ui-icon ui-icon-trash"></span>
    <span class="ui-button-text">Delete</span>
</button>

$(document).ready(function() {
    $('button.table-delete-link').click(function () {
        var targetUrl = $(this).attr('href');
        $.ajax({
            url: targetUrl,
            type: 'GET',
            success: function (data, textStatus, xhr) {
                alert('Item successfully deleted!');
            },
            error: function (xhr, textStatus, errorThrown) {
                var errorMessage = xhr.responseText;
                errorMessage = errorMessage.substring(errorMessage.indexOf('<title>') + 7, errorMessage.indexOf('</title>'));
                alert('Unable to delete item: ' + errorMessage);
            }
        });
        return false;
    });
}); 
```

在 jsFiddle 上查看此操作：http: [//jsfiddle.net/jimmym715/qpDha/](http://jsfiddle.net/jimmym715/qpDha/)

# jquery - YouTube Iframe API to handle multiple players is not working on IE/Opera

> ID：10564712
> 
> 赞同：1
> 
> 时间：2012-05-12T14:46:04.403
> 
> 标签：jquery, youtube-api

**jsFiddle:** [http://jsfiddle.net/krU9K/4/](http://jsfiddle.net/krU9K/4/)

My WordPress posts will have embed youtube and vimeo videos beneath the post thumbnail, after user clicks on the thumbnail I want it to fadeout and video should start playing.

All embed iframe ids are of this structure `"youtube-{postid}"` or `"vimeo-{postid}"`. So on page load I can check for the id prefix and use youtube/vimeo player api initialization and put them into global `var players - {};` object to hold all players.

Firefox/Chrome works OK, but not on Opera/IE. Operas console gives an error `Uncaught exception: TypeError: Cannot convert 'players[iframeID]' to object`. So it looks like on Opera the object is empty while on FF/Chrome it has all players and works.

Any tips/ideas?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T06:08:26.727

It turns out the **jQuery .each() function** is occurring before the iframes are ready on the page, so wrap a standard jQuery Document Ready Function for that.

Updated jsfiddle:
[http://jsfiddle.net/krU9K/17/](http://jsfiddle.net/krU9K/17/)

# java - Android中的通用网络管理器

> ID：10564713
> 
> 赞同：0
> 
> 时间：2012-05-12T14:46:08.503
> 
> 标签：java, android, multithreading, http, networking

我正在开发一个需要向/从服务器发送和接收 http 消息的 Android 项目（API 级别 10）。

我实现了一个名为 NetworkManager 的类，它提供了不同的方法，每个 http 请求一个方法（例如： loginRequest(user pass), RegistrationRequest(user.....) ）。

所有这些方法都会生成一个 JSON 对象，该对象会传递给名为 sendMessage 的方法，该方法是实际建立连接、发送和接收响应的方法（也是一个 json 对象）。

当然网络调用很耗时，所以我首先决定在执行网络操作时使用 AsyncTask 来显示 progressDialog。

问题是我需要在执行任何其他涉及由主线程完成的结果本身的操作之前从后台线程检索响应值。同时，我想做一个通用且可重用的 AsyncTask 实现。

例如：我有一个登录活动，它显示 2 EditText（用户名、密码）和一个名为 Login 的按钮。当我按下登录按钮时，progressDialog 必须出现，并且必须在 doInBackground 任务完成后释放。当然我可以这样做：

```
onClick(View v) //called when the login button is pressed
{
    onPreExecute()
    {
        //Show the progress dialog
    }

    doInBackground()
    {
        //Retreive the login response (an integer containing a message code) using sendLoginRequest(username, password);
        //return the response
    }

    onPostExecute(int response)
    {
        //Dispose the progress dialog, then loginSucessfull ? start new activity : show error toast
    }
} 
```

但是，这样做我应该为我需要发送的每个请求实现一个异步任务，这是我想要避免的，因为如果我有 N 个请求，我应该创建 N 个扩展 AsyncTask 的类。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T15:51:27.673

我建议你使用**INTERFACES**来处理 http 请求的响应。

后台线程要么是 AysncTask 要么是 Thread 需要同时处理

*   回复

*   例外

这样想

**MainThread** - 嘿后台线程执行此操作，并在您完成时通知我。

**MainThread** - 好的，直到后台线程执行它的操作让我显示进度对话框。

**BackGroundThread** - 我的工作已经完成。嘿 MainThread 在这里捕捉到你的响应或异常

**MainThread** - 让我停止显示进度条。

所以我们需要通过代码来模拟这个回调机制，并且还需要注意我们实现了一个可重用的架构。

像这样的东西

定义接口

```
public interface HttpRequestResponse {
    public void onSuccess(HttpResponse response);
    public void onException(Exception exception); 
}     

class HttpRequestResponseHandler {

   private ActionItem action;
   private HttpRequestResponse hrr;
   private Executor executor; 

   public enum ActionItem {
      LOGIN_REQUEST ,
      REGISTRATION_REQUEST            
   } 

   public HttpRequestResponseHandler(ActionItem action, HttpRequestResponse hrr) {
      this.action = action;
      this.hrr = hrr;       
   }

   public void execute(){
     executor = new Executor();
     executor.execute();       
   }

   private class Executor extends AsyncTask<Void,Void,Void> {

      @Override
      public Void doInBackground() {
         switch(action) {

            case LOGIN_REQUEST : doLogin();
                                 break;   

            case REGISTRATION_REQUEST : doRegistration();
                                        break; 
         }
      }
   }

   private void doLogin() {

      HttpResponse response = null;
      Exception exception = null;
      try {
         response = makeHttpRequestHere();
      } catch (Exception e) {
         exception = e;
      }

      if(exception != null) {
         hrr.onException(exception);
      } else {
         hrr.onSuccess(response);
      }

   }   

} 
```

现在在你的活动代码文件的某个地方做这样的事情。

```
 HttpRequestResponse hrr = new HttpRequestResponse(){

    @Override
    public void onSuccess(HttpResponse response) {
       hideProgressDialog();
       handleResponse(response);
    }

    @Override
    public void onException(Exception exception) {
       hideProgressDialog();
       showErrorDialog(exception.getMessage());
    } 
 }

 HttpRequestResponseHandler hrrh = new HttpRequestResponseHandler(ActionItem.LOGIN_REQUEST,hrr);
 hrrh.execute();
 showProgressDialog(); 
```

希望这一切都能带来你想要的。这是一个很长的答案，我费了很大的力气才弄清楚。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-29T22:03:37.760

为什么不直接使用 AsyncTask.THREAD_POOL_EXECUTOR(Runnable run);

它包装了一个基于线程池的 #cores + 1 并行度级别的执行器。

然后你可以简单地调用：

```
AsyncTask.THREAD_POOL_EXECUTOR(new Runnable(){
    public void run(){
       doLogin();
}); 
```

# php - 字符串编码、数组解码

> ID：10564722
> 
> 赞同：0
> 
> 时间：2012-05-12T14:47:17.083
> 
> 标签：php

我是 PHP 新手，大约 3 周前开始。

我有一个字符串，它与 $_POST 一起使用以将其传递到另一个页面，第二个页面使用 $_GET 来获取这些 url 并根据需要拆分它。

我的问题是，在我的第一页中，我使用了一个字符串，并且我想对其进行加密，以便我可以将其作为计划文本传递。在第二页中，我必须对其进行解密并将其作为数组获取。

那么有没有我可以使用的与 $_POST 兼容的加密方法或函数（所以我可以将它发送到另一个页面）并将其解密为数组？

我需要这种方法，因为第二页实际上是连接到网站并且是一种付款方式。所以我不希望用户手动编辑 url 并降低他们获得的产品的 $ 金额。

tnx 为您提供帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T14:49:28.160

你在想这个错误。您永远不会相信来自用户方面的信息。

例如，如果您的用户发送了一份说明他们想要什么商品的表单，请不要在表单中包含价格。相反，从可以信任的服务器（数据库）获取价格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T14:49:38.217

尽管不完全了解您要实现的目标，但您可以使用 base64 编码：

```
$encoded_string = base64_encode ($string);

$decoded_string = base64_decode ($encoded_string); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T15:09:33.423

您可能想要做的是将用户购物车的内容（即他想要订购的物品）传递给支付站点。因此，您应该创建一个类似的表单：

```
<form action="URL/to/paymentPage.php" method="post">
<!-- Item 1 -->
<input type="hidden" name="items[0]" value="productID1"/>
<input type="hidden" name="quantity[0]" value="quantity1"/>
<!-- Item 2 -->
<input type="hidden" name="items[1]" value="productID2"/>
<input type="hidden" name="quantity[1]" value="quantity2"/>
<!-- ... -->
<!-- Item n -->
<input type="hidden" name="items[n]" value="productIDn"/>
<input type="hidden" name="quantity[n]" value="quantityn"/>

<input type="submit" value="Order"/>
</form> 
```

在“URL/to/paymentPage.php”文件中的服务器上，您可以使用以下代码访问这些项目：

```
<?php
$items = $_POST['items']; // Array of items ..
$quantities = $_POST['quantity']; // The array of quantities for each item ..

// Calculate the total price ..
$totalPrice = 0;
foreach($items as $idx => $itemID) {
  if($quantities[$idx]>0) {
    totalPrice += getPriceFromDB($itemID) * $quantities[$idx];
  }
}

echo 'Total Price to pay: '.$totalPrice;
?> 
```

其中 getPriceFromDB 函数实际上从您的数据库或其他地方检索 ID 为 $itemID 的商品/产品的价格...... :)

However, the user items are usually stored in the session, and, therefore, there is no need to submit the again.. ;)

# php - MySQL 从 IPBoard 帐户授权用户

> ID：10564728
> 
> 赞同：1
> 
> 时间：2012-05-12T14:47:56.187
> 
> 标签：php, mysql, sql, single-sign-on, invision-power-board

我最近为我的游戏社区获得了 IPBoard 板软件，我从 SMF 转换了它。

当我使用 smf 时，我使用了一个系统来授权玩家在我的游戏服务器中注册，这个脚本称为 php 脚本，它对玩家在游戏中输入的密码进行哈希 (sha1) 并将其发送回运行的脚本游戏。然后我在让他玩之前检查了玩家是否在论坛中注册。好吧，IPBoard 使用不同的哈希：

```
$hash = md5( md5( $salt ) . md5( $password ) ); 
```

在哪里：

```
$hash is the value stored in the database column members_pass_hash.
$salt is the value stored in the database column members_pass_salt.
$password is the plaintext password. 
```

我正在尝试制作一个 php 脚本，该脚本将返回游戏中的脚本正确的哈希值，稍后我会将其从游戏中比较到数据库中。这是我的代码：

```
 <?php

include("mta_sdk.php");
$input = mta::getInput();

 // Configuración de la aplicación

$DB_SERVIDOR = 'localhost:3306';

$DB_USUARIO = 'root';

$DB_CLAVE = 'xxx';

$DB_BASEDATOS = 'ipboard';

$conexion = mysql_connect($DB_SERVIDOR, $DB_USUARIO, $DB_CLAVE);

mysql_select_db($DB_BASEDATOS, $conexion);

mysql_query("SET NAMES 'utf8'");

$sql = "SELECT members_pass_salt FROM ipb_members WHERE name = '".$input[2]."'";

$Res = mysql_query($sql, $conexion);

$rowRes = mysql_fetch_assoc($Res);

$salt = $rowRes['members_pass_salt']
$hash = md5( md5( $salt ) . md5( $input[3] ) );
//$hash = $salt;
// Return encrypted string using MD5
mta::doReturn($hash,$input[1],$input[2],$input[3],$input[4]); 
```

?>

$input 变量返回尝试玩游戏的用户给出的信息。它是一个数组，如下所示：

```
$input[2] - the username; 
$input[3] - the password (plain text) 
```

其他值是游戏正在使用的东西，不需要。

我成功地从游戏中调用了 php 脚本，并且 php 正在发回信息，但它返回的哈希是：“错误”

我尝试了许多不同的方法，但总是得到相同的错误消息而不是哈希。

一些可能有趣的额外信息：

我正在谈论的游戏是 Multi Theft Auto，它是对 GTA:SA 的多人游戏修改（也许有人知道），它使用 LUA 作为脚本。

mta_sdk.php 文件是为此游戏开发的 php sdk（能够使用外部 php 脚本从游戏中发送和接收信息。

也许这不是一个传统的问题。我试图尽可能地解释这一点，因为我知道你不会习惯这个游戏以及它是如何工作的。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T23:54:13.977

我有点困惑 - 你为什么将密码存储为明文，然后使用盐将它们转换为 md5？如果我错了，请原谅我，但这似乎不是一个非常明智的方法。

尝试将一些数据回显到网页，或将其存储在调试文本文件中；一个简单的方法是在您的服务器上设置一个文本文件，将其更改为 777，并包含此代码以写入它；

```
$debug_txt = fopen('debug.txt', 'w');
fwrite($debug_tx, $error_here);
fclose($debug_tx); 
```

要获取 $error_here，最简单的方法就是添加一些 if 语句。IE：

```
if (mysql_select_db($DB_BASEDATOS, $conexion))    
{    
$sql = "SELECT members_pass_salt FROM ipb_members WHERE name = '".$input[2]."'";    
$Res = mysql_query($sql, $conexion); 
// Write out the results to the debugger
// Use a foreach loop with mysql_fetch_assoc if there might be more than one entry.
}
else
{
$error_here = mysql_error();
} 
```

等等等等

有了上面的内容，您至少应该能够看到错误到底是什么，并能够解决它。

# mysql - 需要编写一个高效的查询

> ID：10564730
> 
> 赞同：-3
> 
> 时间：2012-05-12T14:48:18.067
> 
> 标签：mysql, sql

您好，我在编写查询时需要帮助。

下面是我的数据库结构

```
id  name    key    value
1   book1   key1    abc
2   book2   key2    aaa
3   book3   key5    abc
4   book4   key3    abc
5   book5   key2    aaa
6   book6   key2    aab
7   book7   key1    abc
8   book8   key2    abc
9   book9   key1    abc
10  book10  key1    abc 
```

而且我需要那些键组合key1与值abc和key2与值aaa的书。

所以它应该返回

```
1   book1   key1    abc
2   book2   key2    aaa
5   book5   key2    aaa
7   book7   key1    abc
9   book9   key1    abc
10  book10  key1    abc 
```

具有 key2 和值 aab 的书不会返回。

Ps 这只是我为了证明我的需要而制作的一个示例结构。实际上，我正在研究 wordpress 后元表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T14:50:06.530

```
select id, name, key, value from <yourTable> 
where key = "key1" 
or (key = "key2" and value = "aaa"); 
```

您可能还想查看[文档](https://dev.mysql.com/doc/refman/5.0/en/searching-on-two-keys.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T14:52:05.413

```
select 
    id, name, key, value from <table> 
where 
    (key = "key1" and value="abc")
or 
    (key = "key2" and value = "aaa"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T14:55:30.210

```
SELECT * FROM mytable
WHERE key='key1' AND value='abc'
UNION ALL
SELECT * FROM mytable
WHERE key='key2' AND value='aaa' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-12T16:30:07.767

我认为根据您的设计，在某个时间点，每本书会有几双`key`。`value`这意味着您可能希望选择几个特定键具有某些特定值的书籍。

这可以通过以下 SQL 来实现（对于给定的示例）：

```
SELECT t.id,t.name,k.key1,k.key2
  FROM test t
  JOIN (SELECT t.id,k1.value AS key1,k2.value AS key2
          FROM test t
          LEFT JOIN test k1 ON t.id=k1.id AND k1.`key`='key1'
          LEFT JOIN test k2 ON t.id=k2.id AND k2.`key`='key2'
  ) k ON t.id = k.id
WHERE k.key1='abc' OR k.key2 = 'aaa'; 
```

内部部分将创建一个带有主题键的透视表，而外部部分将执行结果过滤。您可以在[此处](http://www.sqlfiddle.com/#!2/deb21/6)使用此设置。

不过，对于这种设计，我建议将主题中的表格分成 2 个单独的表格：`books`和`params`. [您可以在此处](http://www.sqlfiddle.com/#!2/0b0ac/1)观察此类设置。请注意，如果您将过滤条件更改为`k.key1='abc' AND k.key2 = 'aaa'`，那么您将只有`book10`匹配。

这个例子很简单，但它给出了想法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-12T14:50:24.737

这是为了检查值是否有 key1 和 abc 或 key2 和 aaa，所以它可以返回 key1 和 key2

```
SELECT * FROM table WHERE key = 'key1' AND value ='abc' OR key = 'key2' AND value = 'aaa' 
```

# delphi - 使用 Windows AVIFile 功能的 Delphi 6 应用程序提高压缩率？

> ID：10564736
> 
> 赞同：2
> 
> 时间：2012-05-12T14:49:02.990
> 
> 标签：delphi, winapi, video-encoding, avi

我有一个 Delphi 6 应用程序，它从机器人传入的视频和音频流中制作电影。PC 将视频流作为一系列 JPEG 帧接收，将音频作为 PCM 音频数据块接收。我正在使用 Windows AVIFile 函数（AVIStreamCreate 等）来创建电影。对于视频压缩器的选择，我使用 AVISaveOptions() 函数并让用户从系统上可用的压缩器中选择一种可用的压缩器。例如：Microsoft Video 1、Radius 的 Cinepak Code 等。请注意其他几个可用的，如 Microsoft H.263 或 H.261 因 AVIERR_BADFORMAT 错误而失败，因此我无法对其进行测试。使用 GSM 6.10 压缩器压缩音频。

问题是我似乎无法接近使用 Adob​​e Premiere 等工具进行比较的压缩率。请注意，我知道 Premiere 使用与我不同的整体过程进行压缩，并使用不同的文件格式（如 MPEG 或 Quicktime 等）进行压缩。但如果可以的话，我希望获得可比较的压缩率。

无论我从 AVISaveOptions() 中选择哪个压缩器，无论我将压缩器的可用压缩质量设置调到多低（例如，Microsoft Video 1 的时间质量比和压缩质量），一分钟的视频总是结束创建一个大小约为 14MB 的 AVI 文件。作为比较，我可以使用 Adob​​e Premiere 创建的文件大小小于 1 MB，并且看起来几乎相同的*视觉*质量（换句话说，对于我的目的来说已经足够了。我不关心这里的实际质量损失。）。

如果我检查使用 Windows AVI API 的文件输出，我会发现我使用压缩器更改的所有设置都不会影响帧速率。它始终与输入帧速率相同。现在，如果有必要，显然我可以在输入端丢帧，但这会有点混乱，因为它与音频同步，如果可以的话，我想避免这种情况。

但更重要的是数据速率。无论我将压缩器设置调到多低，我都无法将其降低到大约 2.3 kbps。我使用 Premiere 创建的视频，以及我玩过的其他视频文件大小与时长的比例都正常，都在 1.2 kbps 左右。

总的来说，我的 AVI 文件的文件大小与我使用 Premiere 或其他人发送给我的压缩良好的文件大小之间的差异是**10 比 1**。因此，我的压缩率比其他视频文件差 10 倍，而其他文件的视频质量没有令人不快的差异。

我该怎么做才能获得可比较的压缩比？

**更新**：David Heffernan 的回复包含一个对我有用的快速解决方案。我之所以强调它，是因为它还包含一个**重要的许可警告**。对于像我一样希望让您的用户尽可能方便地使用 XVid 编解码器的人，请阅读下面的文章。它包含有关如何在以后的会话中*重新使用*用户的压缩器选择以及他们选择的压缩配置选项的说明，而不会再次打扰用户：

[http://msdn.microsoft.com/en-us/magazine/hh580739.aspx](http://msdn.microsoft.com/en-us/magazine/hh580739.aspx)

出于好奇，从我之前的输出 AVI 文件大小到使用 XVid 编解码器创建的文件大小的变化是 12.231 MB 到 632 **KB**，视频质量非常合理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T15:01:45.630

真正简单的答案是安装[XVID](http://www.xvid.org)编码器。随 Windows 提供的编解码器都不适合您的用途。XVID 既高质量又免费。

关于分发和许可的影响，[XVID FAQ](http://www.xvid.org/FAQ.42.0.html)有这样的说法：

> **我可以将 Xvid 与我的专有程序一起分发吗？**
> 
> 如果您的程序在运行时调用 Xvid 功能，则它是派生作品，因此，GPL 的条款适用于包括您的程序在内的整个作品。所以不，您不能将 Xvid 与您的专有程序一起分发。如果你想分发，你也必须在 GPL 下发布你的程序。这还需要提供完整的应用程序源代码。有关更多信息，请参阅 GPL 许可文本。
> 
> **我们根本不链接到 Xvid，只是在运行时通过 VfW 接口调用——我们可以使用我们的专有软件进行分发吗？**
> 
> 不，您以何种方式链接到 Xvid 或您认为是链接的方式以及不链接的方式都没有关系。GPL 根本不关注“链接”一词，而是要求根据 GPL 的条款将组合/衍生作品作为一个整体发布。基本上，任何两个（或更多）作品在被分发以供组合使用时构成一个组合作品。因此，如果您的程序在运行时调用 Xvid 功能，它将构成派生工作 - 无论您如何在技术上实现对 Xvid 的调用。如果您不想在 GPL 下发布您的程序，请避免与 Xvid 一起分发它。

这对您意味着，如果您的程序也获得 GPL 许可，您只能随您的程序分发 XVID。但是你建议你的用户为自己获取 XVID 是完全没问题的。

# python - 如何向远程 Pyro 对象发送函数

> ID：10564740
> 
> 赞同：3
> 
> 时间：2012-05-12T14:49:21.373
> 
> 标签：python, function, callable, pyro

我正在尝试使用 Pyro 设置一些代码来处理远程主机上的 python 代码函数并返回结果。启动名称服务器后，我将在远程主机上执行此代码（实际上仍在本地主机上）：

```
import Pyro4

class Server(object):
    def evaluate(self, func, args):
        return func(*args)

def main():
    server = Server()
    Pyro4.Daemon.serveSimple(
            {
                server: "server"
            },
            ns=True)

if __name__ == '__main__':
    main() 
```

在客户端我有这个代码，这是我试图设置的行为的一个例子。

```
import Pyro4

remoteServer = Pyro4.Proxy('PYRONAME:server')

def square(x): 
    return x**2

print remoteServer.evaluate(square, 4) 
```

但是，此代码会导致以下异常：

```
/usr/lib/python2.7/site-packages/Pyro4/core.py:155: UserWarning: HMAC_KEY not set,
protocol data may not be secure
warnings.warn("HMAC_KEY not set, protocol data may not be secure")
Traceback (most recent call last):
  File "/home/davide/Projects/rempy/example-api-pyro.py", line 7, in <module>
    print remoteServer.evaluate(square, 4)
  File "/usr/lib/python2.7/site-packages/Pyro4/core.py", line 149, in __call__
    return self.__send(self.__name, args, kwargs)
  File "/usr/lib/python2.7/site-packages/Pyro4/core.py", line 289, in _pyroInvoke
    raise data
AttributeError: 'module' object has no attribute 'square' 
```

在我看来，函数对象被正确腌制并被发送到远程主机上的服务器实例，但命名空间存在一些问题。

我怎么解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T19:27:41.200

我想我知道你的问题：

函数定义的模块被调用

```
'__main__' 
```

它存在于所有正在运行的python版本中。

pickle 不传输源代码而是参考

```
__main__.square 
```

所以你有两种可能性：

source square out 并使主模块尽可能短，例如：

```
# main.py

def square(x): 
   return x**2

import Pyro4
def main():
    remoteServer = Pyro4.Proxy('PYRONAME:server')

    print remoteServer.evaluate(square, 4) 
```

和：

```
# __main__.py
import main
main.main() 
```

然后服务器可以从文件中导入完全相同的模块。

或使用我的代码创建一个模块：

```
class ThisShallNeverBeCalledError(Exception):
    pass

class _R(object):
    def __init__(self, f, *args):
        self.ret = (f, args)
    def __reduce__(self):
        return self.ret
    def __call__(self, *args):
        raise ThisShallNeverBeCalledError()

    @classmethod
    def fromReduce(cls, value):
        ret = cls(None)
        ret.ret = value
        return ret

def dump_and_load(obj):
    '''pickle and unpickle the object once'''
    s = pickle.dumps(obj)
    return pickle.loads(s)

# this string creates an object of an anonymous type that can
# be called to create an R object or that can be reduced by pickle
# and creates another anonymous type when unpickled
# you may not inherit from this MetaR object because it is not a class
PICKLABLE_R_STRING= "type('MetaR', (object,), " \
                    "       {'__call__' : lambda self, f, *args: "\
                    "          type('PICKLABLE_R', "\
                    "               (object,), "\
                    "               {'__reduce__' : lambda self: (f, args), "\
                    "                '__module__' : 'pickleHelp_', "\
                    "                '__name__'   : 'PICKLABLE_R', "\
                    "                '__call__'   : lambda self: None})(), "\
                    "        '__reduce__' : lambda self: "\
                    "           self(eval, meta_string, "\
                    "                {'meta_string' : meta_string}).__reduce__(), "\
                    "        '__module__' : 'pickleHelp_', "\
                    "        '__name__' : 'R'})()".replace('  ', '')
PICKLABLE_R = _R(eval, PICKLABLE_R_STRING, \
                {'meta_string' : PICKLABLE_R_STRING})
R = dump_and_load(PICKLABLE_R)
del PICKLABLE_R, PICKLABLE_R_STRING

PICKLABLE___builtins__ = R(vars, R(__import__, '__builtin__'))
PICKLABLE_FunctionType = R(type, R(eval, 'lambda:None'))

##R.__module__ = __name__
##R.__name__ = 'PICKLABLE_R'

def packCode(code, globals = {}, add_builtins = True, use_same_globals = False, \
             check_syntax = True, return_value_variable_name = 'obj',
             __name__ = __name__ + '.packCode()'):
    '''return an object that executes code in globals when unpickled
use_same_globals
    if use_same_globals is True all codes sent through
    one pickle connection share the same globals
    by default the dont
return_value_variable_name
    if a variable with the name in return_value_variable_name exists
    in globals after the code execution
    it is returned as result of the pickling operation
    if not None is returned
__name__

'''
    if check_syntax:
        compile(code, '', 'exec')
    # copying locals is important
    # locals is transferred through pickle for all code identical
    # copying it prevents different code from beeing executed in same globals
    if not use_same_globals:
        globals = globals.copy()
    if add_builtins:
        globals['__builtins__'] = PICKLABLE___builtins__
    globals.setdefault('obj', None)
    # get the compilation code
    # do not marshal or unmarshal code objects because the platforms may vary
    code = R(compile, code, __name__, 'exec')
    # the final object that can reduce, dump and load itself
    obj = R(R(getattr, tuple, '__getitem__'), (
            R(R(PICKLABLE_FunctionType, code, globals)),
            R(R(getattr, type(globals), 'get'), globals, \
              returnValueVariableName, None)
            ), -1)
    return obj 
```

然后将其发送到另一端：

```
packCode('''
def square(...):
    ...
''', return_value_variable_name = 'square') 
```

并且该函数将在另一端出现，无需模块代码即可将此python函数传输到另一端服务器端。

如果有什么不成功，请告诉我。

# delphi - Delphi中经过/时间间隔？

> ID：10564741
> 
> 赞同：4
> 
> 时间：2012-05-12T14:49:21.837
> 
> 标签：delphi, date, time, vcl

我需要计算从**现在**到**文件的最后修改日期/时间**之间经过的时间（格式很好） ，[即。像这样](https://stackoverflow.com/questions/4515544/how-to-get-elapsed-time-format-it)的东西，仅在我的情况下，差异可能是几天，几个月甚至几年。

我试过这个：

```
var
   TimeDiff : Double;
begin
     TimeDiff := Now - FileAgeEx('C:\my-file.txt');
     if (TimeDiff >= 1) then
        Caption  := FormatDateTime('dd hh:nn:ss', TimeDiff)
     else
         Caption := FormatDateTime('hh:nn:ss', TimeDiff);
end; 
```

但是（1）它不起作用，（2）我想要更好的格式。

最终我的目标是拥有这样的东西：

*   Time Diff < 1 天 ==> 显示： 12:00: **01**
*   时差 >= 1 天 ==> 显示： **25 天，12:00:01**
*   时差 >= 1 年 ==> 显示： **2 年，3 个月，10 天，12:00:01**

任何人都知道我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-12T14:59:10.347

主要问题似乎是获取文件的最后修改时间。我使用以下代码：

```
function LastWriteTime(const FileName: string): TFileTime;
var
  AttributeData: TWin32FileAttributeData;
begin
  if not GetFileAttributesEx(PChar(FileName), GetFileExInfoStandard, @AttributeData) then
    RaiseLastOSError;
  Result := AttributeData.ftLastWriteTime;
end;

function UTCFileTimeToSystemTime(const FileTime: TFileTime): TSystemTime;
//returns equivalent time in current locality, taking account of daylight saving
var
  LocalFileTime: Windows.TFileTime;
begin
  Windows.FileTimeToLocalFileTime(FileTime, LocalFileTime);
  Windows.FileTimeToSystemTime(LocalFileTime, Result);
end;

function UTCFileTimeToDateTime(const FileTime: TFileTime): TDateTime;
begin
  Result := SystemTimeToDateTime(UTCFileTimeToSystemTime(FileTime));
end; 
```

您调用`LastWriteTime`以获取文件时间格式的最后修改时间。然后调用`UTCFileTimeToDateTime`转换为`TDateTime`占本机当地时区的占主导地位。然后，您可以将该值与`Now`.

至于格式，您似乎已经知道如何做到这一点。您的基本方法将起作用，您只需要充实细节。

* * *

在评论中你说

```
FormatDateTime('dd hh:nn:ss', 2.9); 
```

显示 a 表示`1`您期望 a 的那一天`2`。问题是这个函数格式化日期而不是时间间隔。该值`2.9`不被视为经过的时间，而是被视为绝对日期/时间，`2.9`在 Delphi 纪元之后的几天。我会使用`Trunc`and`Frac`分别获取天数和天数，然后从那里开始工作。

```
Days := Trunc(TimeDiff);
Time := Frac(TimeDiff); 
```

以下代码直接从我的代码库中提取，可能会给您一些指示。请注意，它的输入以秒为单位，但它应该让您走上正确的道路。

```
function CorrectPlural(const s: string; Count: Integer): string;
begin
  Result := IntToStr(Count) + ' ' + s;
  if Count<>1 then begin
    Result := Result + 's';
  end;
end;

function HumanReadableTime(Time: Double): string;
//Time is in seconds
const
  SecondsPerMinute = 60;
  SecondsPerHour = 60*SecondsPerMinute;
  SecondsPerDay = 24*SecondsPerHour;
  SecondsPerWeek = 7*SecondsPerDay;
  SecondsPerYear = 365*SecondsPerDay;

var
  Years, Weeks, Days, Hours, Minutes, Seconds: Int64;

begin
  Try
    Years := Trunc(Time/SecondsPerYear);
    Time := Time - Years*SecondsPerYear;
    Weeks := Trunc(Time/SecondsPerWeek);
    Time := Time - Weeks*SecondsPerWeek;
    Days := Trunc(Time/SecondsPerDay);
    Time := Time - Days*SecondsPerDay;
    Hours := Trunc(Time/SecondsPerHour);
    Time := Time - Hours*SecondsPerHour;
    Minutes := Trunc(Time/SecondsPerMinute);
    Time := Time - Minutes*SecondsPerMinute;
    Seconds := Trunc(Time);

    if Years>5000 then begin
      Result := IntToStr(Round(Years/1000))+' millennia';
    end else if Years>500 then begin
      Result := IntToStr(Round(Years/100))+' centuries';
    end else if Years>0 then begin
      Result := CorrectPlural('year', Years) + ' ' + CorrectPlural('week', Weeks);
    end else if Weeks>0 then begin
      Result := CorrectPlural('week', Weeks) + ' ' + CorrectPlural('day', Days);
    end else if Days>0 then begin
      Result := CorrectPlural('day', Days) + ' ' + CorrectPlural('hour', Hours);
    end else if Hours>0 then begin
      Result := CorrectPlural('hour', Hours) + ' ' + CorrectPlural('minute', Minutes);
    end else if Minutes>0 then begin
      Result := CorrectPlural('minute', Minutes);
    end else begin
      Result := CorrectPlural('second', Seconds);
    end;
  Except
    Result := 'an eternity';
  End;
end; 
```

# php - 根据需要获取结果所需的 MySql Query 帮助

> ID：10564742
> 
> 赞同：4
> 
> 时间：2012-05-12T14:49:22.287
> 
> 标签：php, mysql, sql

有人可以帮助我编写确切的查询，这可以为我提供以下所需的结果，

![](../Images/c6835188d304a393170cb6cb56295aa2.png)

我写，

```
 SELECT tbl_order_detail.order_id, 
          tbl_order_detail.order_title, 
          tbl_order_detail.dealer_id
     FROM tbl_order_detail
LEFT JOIN tbl_order_lead_send_detail ON tbl_order_detail.order_id=tbl_order_lead_send_detail.order_id
    WHERE tbl_order_detail.order_status = 'Active' 
```

并从一个接受dealer_id并返回dealer_name（使用另一个mysql查询）的php函数中找到经销商名称，并从另一个mysql查询中计数

但它没有给出我想要的输出。它的输出为

![](../Images/5a826b686411d299bc30f92b67f24786.png)

但我只希望上面圈出的那些在一行中，因为它们中的一切都是一样的，但它们在输出中显示了很多次（为什么不是一个）。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T14:51:55.297

如果你[GROUP BY](http://www.w3schools.com/sql/sql_groupby.asp) order_id，你应该很高兴

**编辑：**

要获取经销商名称，只需加入经销商表并选择经销商名称列。

*未经测试，可能包含错误*

```
SELECT
    tbl_order_detail.order_id, 
    tbl_order_detail.order_title, 
    dealer.dealer_name,
    COUNT(tbl_order_lead_send_detail.order_id) AS total_customers_count
FROM tbl_order_detail
JOIN dealers ON (tbl_order_detail.dealer_id = dealers.dealer_id)
LEFT JOIN tbl_order_lead_send_detail ON (tbl_order_detail.order_id = tbl_order_lead_send_detail.order_id)
WHERE tbl_order_detail.order_status = 'Active'
GROUP BY tbl_order_detail.order_id, tbl_order_detail.order_title, dealer.dealer_name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T14:52:35.243

要获得计数，请使用`COUNT()`. 要按订单 ID 对结果进行分组，请使用`GROUP BY tbl_order_detail.order_id`- MySQL（或一般的 SQL）的优点之一是它非常接近简单的英语。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T14:56:07.827

试试这个：

```
SELECT OD.order_id,        
       OD.order_title, 
       OD.dealer_id,
       SD.customer_id, 
       COUNT(SD.id) AS NumCustomers
FROM      tbl_order_detail OD
LEFT JOIN tbl_order_lead_send_detail SD
      ON OD.order_id=SD.order_id
WHERE OD.order_status='Active'
GROUP BY OD.order_id,        
         OD.order_title, 
         OD.dealer_id,
         SD.customer_id 
```

# django - TurnKey Django -- 如何将 Django 升级到 1.4

> ID：10564757
> 
> 赞同：1
> 
> 时间：2012-05-12T14:51:09.953
> 
> 标签：django, ubuntu, upgrade, ubuntu-10.04

我找不到关于如何在 TurnKey Django（基于 Ubuntu 10.04）上将 Django 升级到 1.4 的良好信息来源。我很长时间没有在Unix机器上工作，我有点迷茫。一些IRC频道？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T12:57:43.483

最好的方法是在虚拟环境中安装 django 1.4。

首先，安装 virtualenv（如果尚未安装`sudo apt-get install python-virtualenv`）

然后，安装 django 1.4：

```
$ virtualenv --no-site-packages django_1_4
$ source django_1_4/bin/activate
(django_1_4) $ pip install django
(django_1_4) $ python
Python 2.7.3 (default, Apr 20 2012, 22:44:07) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import django
>>> django.get_version()
'1.4' 
```

在你的评论之后，我有另一个建议。由于这是一台单一用途的机器，您可以简单地在您的机器上升级 django 的*全局*版本。

首先，为避免冲突，如果 django 是从 apt 安装的，请*卸载它：*

`apt-get remove --purge python-django`

然后，由于您已经`python-virtualenv`从上面安装，您可以这样做：

`$ sudo pip install -U django`

这会将 django 升级（或安装）到全局站点包目录可用的最新版本。

然后你可以做同样的事情`import django`然后`django.get_version()`它应该返回`1.4`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T15:57:42.010

虽然我很难找到包含版本信息的官方来源，但在我看来，TurnKey Linux 的最新 Django 版本（截至 2011 年 12 月）最高版本为 1.3.1。

查看[此邮件存档问题](http://www.mail-archive.com/django-users@googlegroups.com/msg129620.html)并单击线程以获取更多信息。他们讨论了使用 virtualenv 等工具为 TurnKey Linux 设置最新版本的 Django，以确保您能够在需要时继续使用旧的（过时的）包。

# android - Android 布局编辑器在预览自定义视图时抛出异常

> ID：10564758
> 
> 赞同：1
> 
> 时间：2012-05-12T14:51:19.983
> 
> 标签：android, custom-component

Android 布局编辑器无法实例化自定义视图，这使我无法在布局编辑器中看到正确的预览。这是在我的构造函数中：

```
TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.PinCodeView);
    try {
        int n = a.length();
        for (int i = 0; i < n; i++) {
            int attr = a.getIndex(i);

            switch (attr) {
            case R.styleable.PinCodeView_pinLength:
                pinLength = a.getInt(attr, 0);
                break;
            /* more case statements */
            }
        }
    } finally {
        a.recycle();
    } 
```

它在抱怨线路 `int attr = a.getIndex(i);`

奇怪的是，如果我做这样的事情，我就不会遇到这个问题：

```
TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.PinCodeView);
    try {

        pinLength = a.getInt(R.styleable.PinCodeView_pinLength, 0);
        /* and so on for other attrs */

    } finally {
        a.recycle();
    } 
```

这是来自 Eclipse 的堆栈跟踪：

```
java.lang.ArrayIndexOutOfBoundsException: 2
at android.content.res.TypedArray.getIndex(TypedArray.java:71)
at com.example.pincode.PinCodeView.<init>(PinCodeView.java:52)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at com.android.ide.eclipse.adt.internal.editors.layout.ProjectCallback.instantiateClass(ProjectCallback.java:402)
at com.android.ide.eclipse.adt.internal.editors.layout.ProjectCallback.loadView(ProjectCallback.java:166)
at android.view.BridgeInflater.loadCustomView(BridgeInflater.java:207)
at android.view.BridgeInflater.createViewFromTag(BridgeInflater.java:135)
at android.view.LayoutInflater.rInflate_Original(LayoutInflater.java:739)
at android.view.LayoutInflater_Delegate.rInflate(LayoutInflater_Delegate.java:64)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:711)
at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
at android.view.LayoutInflater.inflate(LayoutInflater.java:372)
at com.android.layoutlib.bridge.impl.RenderSessionImpl.inflate(RenderSessionImpl.java:321)
at com.android.layoutlib.bridge.Bridge.createSession(Bridge.java:324)
at com.android.ide.common.rendering.LayoutLibrary.createSession(LayoutLibrary.java:325)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.RenderService.createRenderSession(RenderService.java:372)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.renderWithBridge(GraphicalEditorPart.java:1361)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.recomputeLayout(GraphicalEditorPart.java:1115)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.activated(GraphicalEditorPart.java:941)
at com.android.ide.eclipse.adt.internal.editors.layout.LayoutEditorDelegate.partActivated(LayoutEditorDelegate.java:477)
at com.android.ide.eclipse.adt.internal.editors.layout.LayoutEditorDelegate.partBroughtToTop(LayoutEditorDelegate.java:487)
at org.eclipse.ui.internal.PartListenerList$2.run(PartListenerList.java:87)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
at org.eclipse.core.runtime.Platform.run(Platform.java:888)
at org.eclipse.ui.internal.PartListenerList.fireEvent(PartListenerList.java:57)
at org.eclipse.ui.internal.PartListenerList.firePartBroughtToTop(PartListenerList.java:85)
at org.eclipse.ui.internal.PartService.firePartBroughtToTop(PartService.java:208)
at org.eclipse.ui.internal.WorkbenchPagePartList.firePartBroughtToTop(WorkbenchPagePartList.java:76)
at org.eclipse.ui.internal.WorkbenchPagePartList.fireActiveEditorChanged(WorkbenchPagePartList.java:52)
at org.eclipse.ui.internal.PartList.setActiveEditor(PartList.java:162)
at org.eclipse.ui.internal.WorkbenchPage.makeActiveEditor(WorkbenchPage.java:1281)
at org.eclipse.ui.internal.WorkbenchPage.setActivePart(WorkbenchPage.java:3530)
at org.eclipse.ui.internal.WorkbenchPage.requestActivation(WorkbenchPage.java:3077)
at org.eclipse.ui.internal.PartPane.requestActivation(PartPane.java:279)
at org.eclipse.ui.internal.EditorPane.requestActivation(EditorPane.java:98)
at org.eclipse.ui.internal.PartPane.setFocus(PartPane.java:325)
at org.eclipse.ui.internal.EditorPane.setFocus(EditorPane.java:127)
at org.eclipse.ui.internal.PartStack.presentationSelectionChanged(PartStack.java:844)
at org.eclipse.ui.internal.PartStack.access$1(PartStack.java:827)
at org.eclipse.ui.internal.PartStack$1.selectPart(PartStack.java:137)
at org.eclipse.ui.internal.presentations.util.TabbedStackPresentation$1.handleEvent(TabbedStackPresentation.java:133)
at org.eclipse.ui.internal.presentations.util.AbstractTabFolder.fireEvent(AbstractTabFolder.java:269)
at org.eclipse.ui.internal.presentations.util.AbstractTabFolder.fireEvent(AbstractTabFolder.java:278)
at org.eclipse.ui.internal.presentations.defaultpresentation.DefaultTabFolder.access$1(DefaultTabFolder.java:1)
at org.eclipse.ui.internal.presentations.defaultpresentation.DefaultTabFolder$2.handleEvent(DefaultTabFolder.java:88)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Display.sendEvent(Display.java:3783)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1375)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1398)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1383)
at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:1195)
at org.eclipse.swt.custom.CTabFolder.setSelection(CTabFolder.java:2743)
at org.eclipse.swt.custom.CTabFolder.onMouse(CTabFolder.java:1429)
at org.eclipse.swt.custom.CTabFolder$1.handleEvent(CTabFolder.java:257)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Display.sendEvent(Display.java:3783)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1375)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1398)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1383)
at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:1195)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3629)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3284)
at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2640)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2604)
at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2438)
at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:671)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:664)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:115)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:369)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:620)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:575)
at org.eclipse.equinox.launcher.Main.run(Main.java:1408) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T14:59:57.460

试试这个：

```
TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.PinCodeView);  
int n = a.getIndexCount();  
for(int i =0;i < n;i++){ 
    int attr = a.getIndex(i);   
    switch(attr){  
      case R.styleable.PinCodeView_pinLength:  
         String strtext=a.getString(R.styleable.PinCodeView_pinLength);  
      break;  

      default:  
      break;  
    }              
}  
a.recycle(); 
```

# internet-explorer - 错误 Internet Explorer 8 及更低版本（Internet Explorer 已停止工作）

> ID：10564759
> 
> 赞同：1
> 
> 时间：2012-05-12T14:51:25.080
> 
> 标签：internet-explorer, internet-explorer-8, asp.net-mvc-4

在某些情况下浏览网站letsgofestas.com.br 会在IE 中出现错误：

[http://i.imgur.com/FGvvf.png](https://i.imgur.com/FGvvf.png)

![在此处输入图像描述](../Images/ff5c8e3ea10c9a7df3ae22c7e716c7b3.png)

我无法追踪错误的原因。遵循一种模式，而用户在某个给定时间导航时会发生错误。没有特定页面或特定代码....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T04:32:35.520

我能够让该站点两次使 IE 崩溃——尽管我怀疑 IE 可能是由于站点上使用了多少内存而导致自身死亡。它两次都以大约 85mb 的内存使用量死亡。这使我怀疑您有一些脚本问题正在消耗内存。

虽然我不能告诉你关于哪些脚本需要重新审视，也许是重新考虑的细节，但我确实专注于 Infantil 和 Adulto 页面，以获得两次崩溃所需的内存增长。

您可能会考虑将您的一些 JavaScript 带到[Code Review](https://codereview.stackexchange.com/)中，看看是否可以进行任何优化，从而在 IE7 中实现更好的内存管理。我无法让网站在 IE10 中崩溃。

![在此处输入图像描述](../Images/b72b9f1c0858b7cefe86121700e3db3a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-23T04:11:44.640

IE8崩溃的原因有很多

如果 IE8 对所有网站都崩溃，那么您可以按照可用的一般[故障排除](http://www.howtogeek.com/136193/how-to-troubleshoot-internet-explorer-crashes/)说明进行操作，但如果崩溃仅发生在您的网站中，则代码存在一些问题

一般使用`@font-face`崩溃IE8。如果您在网页中使用@font-face，请尝试[此处提到的解决方案](https://stackoverflow.com/questions/10294206/font-face-crashes-ie8)

有时甚至缩小包含 @font-face 的 css 也会导致崩溃

# windows - 在 windows *.cmd 文件中使用 for 命令迭代文件时如何处理可能的特殊字符？

> ID：10564761
> 
> 赞同：0
> 
> 时间：2012-05-12T14:51:36.300
> 
> 标签：windows, for-loop, cmd, special-characters

代码是：

```
setlocal EnableDelayedExpansion
FOR /f "usebackq tokens=*" %%X in (`dir /a-d /s /b "!search_path!" 2^>^&1`) DO @(
  set file_path=%%X
  rem do other stuff
) 
```

延迟扩展是打开的，因为源路径可能有特殊字符，如反引号百分比感叹号和 ^ 转义唱。Windows 路径中允许所有这些字符，我不知道它们是否会出现以及出现在哪里。问题出现了如何处理双百分比参数 %%X，如何将其传递给另一个变量而不进行扩展。如果 DE 在感叹号上，则 sings 将被视为变量，这将导致一系列奇怪的错误。同样的事情是如果我禁用 DE - 同样的情况，但这次是百分比。

任何想法如何使这些行对于可以在 Windows 系统中找到的每个可能的允许路径都安全，无论字符多么奇怪？

问题归结为如何将数据从参数的双百分比安全传递到正常状态`%variable%`，以便从那一刻起数据可以安全地通过延迟扩展传递。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T14:57:33.460

我会尽量适应`FOR /R`您的需求，这将解决您的一些逃生努力。您可以检查循环中文件列表与`dir`.

`FOR /R`将遍历您的目录树（无论如何您都在这样做）并返回与您提供的模式匹配的文件。

列出目录中所有 TXT 类型文件的快速示例及其子目录如下所示：

更新：

这将打印我的目录中包含感叹号的两个文件的内容：

```
@echo off
for /r %%i in (ex*!*.txt) do (
   type %%~i
) 
```

注意没有延迟的变量扩展。Add'l 变量引用位于`for /?`列表的底部。

# c# - 如何在 CUBRID 数据库中使用 C# 调用 Java 存储过程

> ID：10564762
> 
> 赞同：0
> 
> 时间：2012-05-12T14:51:54.867
> 
> 标签：c#, java, database, cubrid

我正在使用以下代码来使用 CUBRID 数据库 java 存储过程。

```
string ConnectionString = "server=localhost;database=demodb;port=30000;user=dba;password=123456";
DataTable dt = new DataTable();
DataSet ds = new DataSet();
CUBRIDConnection con = new CUBRIDConnection(ConnectionString);
CUBRIDCommand com = new CUBRIDCommand();
com.CommandType = CommandType.StoredProcedure;
com.Connection = con;
com.CommandText = "select rset()";
CUBRIDParameter pan = new CUBRIDParameter();
pan.Direction = ParameterDirection.Output;
pan.CUBRIDDataType = CUBRIDDataType.CCI_U_TYPE_RESULTSET;
pan.ParameterName = "?p1";
CUBRIDDataAdapter dap = new CUBRIDDataAdapter(com);
con.Open();
int val =  dap.Fill(ds);
con.Close(); 
```

并在服务器中使用服务器中的下一个函数和存储过程

```
public class JavaSP3 {
public static ResultSet TResultSet(){
try {
Class.forName("cubrid.jdbc.driver.CUBRIDDriver"); 
Connection con = DriverManager.getConnection("jdbc:default:connection:"); 
String sql = "select * from athlete"; 
Statement stmt=con.createStatement(); 
ResultSet rs = stmt.executeQuery(sql); 
((CUBRIDResultSet)rs).setReturnable(); 
return rs;
}
catch (Exception e) 
{
e.printStackTrace();
}
return null;        
}
} 
```

功能代码是这样的

```
CREATE FUNCTION "rset"() RETURN CURSOR
AS LANGUAGE JAVA 
NAME 'JavaSP3.TResultSet() return cubrid.jdbc.driver.CUBRIDResultSet' 
```

我使用产生字符串并返回值的函数运行它，但是当我更改为 CUBRIDResultSet 值时不起作用并且 CUBRID 说>

```
execute error:-911
line 1 is not executed (error)
Error description:
Invalid call: it can not return ResultSet. 
```

拜托，我有 3 天的时间试图解决这个问题，任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T17:21:47.340

ADO.NET 不提供对 ResultSet 的支持。

[http://www.cubrid.org/?mid=forum&category=195532&document_srl=358924](http://www.cubrid.org/?mid=forum&category=195532&document_srl=358924)

```
using System.Data;
using CUBRID.Data.CUBRIDClient;
using System.Data.Common;
using System;

namespace ConsoleApplication1
{
class Program
{
    static void Main(string[] args)
    {

        string ConnectionString = "server=localhost;database=demodb;port=30000;user=dba;password=123456";
        DataTable dt = new DataTable();
        DataSet ds = new DataSet();
        CUBRIDConnection con = new CUBRIDConnection(ConnectionString);

        CUBRIDCommand com = new CUBRIDCommand();
        com.CommandType = CommandType.Text; //Important ADO.NET driver crash using call convention
        com.Connection = con;
        com.CommandText = "select rset();";
        CUBRIDParameter pan = new CUBRIDParameter();
        con.Open();
        DbDataReader reader = com.ExecuteReader();
        CustomAdapter da = new CustomAdapter();
        da.FillFromReader(dt, reader);
        con.Close();

        DataRow fila = dt.Rows[0];
        Console.WriteLine(fila[0].ToString());
        Console.ReadKey();            

    }
}

public class CustomAdapter : System.Data.Common.DbDataAdapter
{
    public int FillFromReader(DataTable dataTable, IDataReader dataReader)
    {
        return this.Fill(dataTable, dataReader);
    }
    protected override System.Data.Common.RowUpdatedEventArgs CreateRowUpdatedEvent(DataRow a, IDbCommand b, StatementType c, System.Data.Common.DataTableMapping d)
    {
        return (System.Data.Common.RowUpdatedEventArgs)new EventArgs();
    }

    protected override System.Data.Common.RowUpdatingEventArgs CreateRowUpdatingEvent(DataRow a, IDbCommand b, StatementType c, System.Data.Common.DataTableMapping d)
    {
        return (System.Data.Common.RowUpdatingEventArgs)new EventArgs();
    }

    protected override void OnRowUpdated(System.Data.Common.RowUpdatedEventArgs value)
    {

    }
    protected override void OnRowUpdating(System.Data.Common.RowUpdatingEventArgs value)
    {

    }
} 
```

java类

```
import java.sql.*;

import cubrid.jdbc.driver.*;
import java.sql.Connection;
import java.sql.Statement;
import java.sql.Driver;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.ResultSetMetaData;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.transform.*;
import javax.xml.transform.stream.*;
import javax.xml.transform.dom.*;
import org.w3c.dom.Document;
import org.w3c.dom.Element;

public class JavaSP3 {
public static String TResultSet(){
ResultSet rs = null;
Statement stmt = null;
String sql;
try {
           Class.forName("cubrid.jdbc.driver.CUBRIDDriver"); 
           Connection con = DriverManager.getConnection("jdbc:default:connection:"); 
          ((CUBRIDConnection)con).setCharset("euc_kr"); 

                  DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
                  DocumentBuilder builder =factory.newDocumentBuilder();
                  Document doc = builder.newDocument();
                  Element results = doc.createElement("Results");
                  doc.appendChild(results);

                  sql = "select * from athlete"; 
                   stmt=con.createStatement(); 
                   rs = stmt.executeQuery(sql); 
                  ResultSetMetaData rsmd = rs.getMetaData();
                  int colCount = rsmd.getColumnCount();

                 while (rs.next()) {
                    Element row = doc.createElement("Row");
                    results.appendChild(row);
                    for (int ii = 1; ii <= colCount; ii++) {
                       String columnName = rsmd.getColumnName(ii);
                       Object value = rs.getObject(ii);
                       Element node = doc.createElement(columnName);
                       node.appendChild(doc.createTextNode(value.toString()));
                       row.appendChild(node);
                    }
                  }

                 String valor = getDocumentAsXml(doc);
                 return valor;

    } 
    catch (Exception e) 
    {
        e.printStackTrace();
    }
    return null;
}

public static String getDocumentAsXml(Document doc)
      throws TransformerConfigurationException, TransformerException {
    DOMSource domSource = new DOMSource(doc);
    TransformerFactory tf = TransformerFactory.newInstance();
    Transformer transformer = tf.newTransformer();
    //transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION,"yes");
    transformer.setOutputProperty(OutputKeys.METHOD, "xml");
    transformer.setOutputProperty(OutputKeys.ENCODING,"ISO-8859-1");
    transformer.setOutputProperty
       ("{http://xml.apache.org/xslt}indent-amount", "4");
    transformer.setOutputProperty(OutputKeys.INDENT, "yes");

    java.io.StringWriter sw = new java.io.StringWriter();
    StreamResult sr = new StreamResult(sw);
    transformer.transform(domSource, sr);
    return sw.toString();
 }

} 
```

立方函数

```
CREATE FUNCTION "rset"() RETURN STRING
AS LANGUAGE JAVA 
NAME 'JavaSP3.TResultSet() return java.lang.String' 
```

这允许您使用 ADO.NET 从 CUBRID 中的 Java 存储过程中获取数据

# android - 单击按钮时如何显示小部件？

> ID：10564771
> 
> 赞同：-1
> 
> 时间：2012-05-12T14:53:34.117
> 
> 标签：android, layout, widget

单击 GUI 中的按钮时，我想显示/隐藏小部件？是否可以以语法方式控制主屏幕中小部件的外观？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T15:25:17.503

如果您的意思是位于主屏幕上的应用程序小部件，除非主屏幕应用程序也是您的，否则我认为这是不可能的。App-widgets 在主屏幕应用程序的进程中运行，它们的 API 非常紧凑，它们使用远程视图而不是视图，并且您可以用远程视图做的事情很少。

位置和可见性等应用程序小部件的外观基础由主屏幕应用程序控制。虽然可以更改 app-widget 内元素的可见性或外观，但不能更改 app-widget 本身。

例如，您可以隐藏 app-widget 的所有元素，这样用户就看不到它，但它占用的空间将不可用于其他小部件。我也很确定您无法控制应用程序小部件在主屏幕上的位置，我已经开发了其中一些，但我无法找到一种方法来知道用户将它们定位在哪里。

希望这可以帮助...

# php - 网页上每 1/10 秒随机出现一个单词

> ID：10564772
> 
> 赞同：3
> 
> 时间：2012-05-12T14:53:44.333
> 
> 标签：php, javascript, mysql, ajax, web-applications

我正在为一个艺术项目开发一个基于 Web 的小型（javascript）“应用程序”。这个东西叫做“诗歌生成器”，它是一个根据用户输入生成随机诗歌的脚本。

该脚本必须每 1/10 秒向用户显示一个随机单词。使用的词表有 109.582 个词。

我已经尝试过不同的解决方案：

1.  将所有单词放在一个文本文件中，并获得文本文件的随机行 -> 太慢（用户必须下载 3MB 的文本文件才能使用该应用程序）
2.  将所有单词放在 Javascript 中的数组中。-> javascript 数组显然无法处理 109.585 个项目
3.  使用带有 Javascript 间隔函数的 jQuery 的 Ajax 函数从数据库中提取单词 -> 这个解决方案在我的本地主机上测试时效果很好，但是一旦上传到真实的 Web 环境，这种方法被证明太慢了。（而且我可以想象，如果我每秒对他们的服务器执行 10 个查询，我的托管服务提供商不会那么高兴。）

所以.. 有没有人知道我可以用另一种方法在网页上每 1/10 秒显示一个随机单词？它不一定必须使用 php 或 javascript，只要它在浏览器中运行，我很高兴！

提前致谢

泰斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T14:57:03.903

没有理由必须每十分之一秒提取整个数据集。每分钟从数据库中提取合理的数量（大约 600 个单词），将其加载到本地 javascript 对象中，然后遍历它。

当数组索引变得足够高或计时器达到一分钟时，轮询另一组 600。

在处理低至十分之一秒的时间时，您不希望每次都调用服务器！您甚至可以将整个数据集加载到`memcached`随机词中并轮询，从而跳过昂贵的数据库调用，因为整个数据集都加载到内存中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-12T14:57:51.703

您可以尝试仅将一部分单词加载到 JS 数组中。也许您可以尝试从数据库中仅加载 1000 个（随机）单词并显示它们。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-12T14:58:00.657

只要您不需要生成非常长的文本，您就可以将随机化分为两个步骤：

**首先**预选一些服务器端的词（比如说——5000？）

**然后**，在客户端，使用 JS 从预先选择的单词中随机选择更多。

优点：不需要额外的请求；JS 应该处理那么大的数组

# java - 使用 HQL 从它们之间具有一对多关系的连接表中进行选择

> ID：10564773
> 
> 赞同：1
> 
> 时间：2012-05-12T14:53:51.493
> 
> 标签：java, hibernate, hql, hibernate-mapping

我被这个休眠的东西困住了，不知道如何解决。请帮忙 ！

所以我有这两张表：

```
POSITION
positionid(PK), description

JOB
jobid(PK),positionid(FK),description 
```

如何在 Hibernate 中使用 HQL 来获取具有相应职位描述的所有工作？

编辑：所以这就是我想要实现的：

```
JOBID     POSITION.DESCRPTION     JOB.DESCRIPTION
  1        Teacher                Science Teacher
  2        Coach                  Football Coach 
```

以此类推，适用于 JOB 表中的所有工作。我试图弄清楚这将是什么 HQL。

到目前为止，我已经整理了以下代码：

位置.hbm.xml

```
<hibernate-mapping>
  <class name="com.XXXX.model.Position" table="POSITION">
   <id name="positionID" type="int" column="POSITIONID" >
   <generator class="assigned"/>
  </id>

  <property name="description">
   <column name="DESCRIPTION" />
  </property>

  <set name="jobs">
    <key column="positionID" />
    <one-to-many class="com.XXXX.model.Job" />
  </set>

 </class>
</hibernate-mapping> 
```

作业.hbm.xml

```
<hibernate-mapping>

  <class name="com.XXXX.model.Job" table="JOB">
   <id name="jobID" type="int" column="JOBID" >
   <generator class="assigned"/>
  </id>

  <property name="description">
   <column name="DESCRIPTION" />
  </property>

  <many-to-one name="position" class="com.XXXX.model.Position" column="positionID" />

 </class>
</hibernate-mapping> 
```

位置.java

```
public class Position {

    private int positionID;
    private String description;
    private Set<Job> jobs = new HashSet<Job>();

    // Getters and Setters for all the above three follows...

} 
```

作业.java

```
public class Job {

    private int jobID;
    private String description;
    private Position position;

    // Getters and Setters for all the above three follows...
} 
```

现在在我的代码中我使用

```
session.createQuery("from Position as p left join p.positionID as pid").list(); 
```

我知道它不完全正确，我收到以下错误：

```
java.lang.NullPointerException
    at org.hibernate.hql.ast.HqlSqlWalker.createFromJoinElement(HqlSqlWalker.java:317)
    at org.hibernate.hql.antlr.HqlSqlBaseWalker.joinElement(HqlSqlBaseWalker.java:3268)
    at org.hibernate.hql.antlr.HqlSqlBaseWalker.fromElement(HqlSqlBaseWalker.java:3060)
    at org.hibernate.hql.antlr.HqlSqlBaseWalker.fromElementList(HqlSqlBaseWalker.java:2938)
    at org.hibernate.hql.antlr.HqlSqlBaseWalker.fromClause(HqlSqlBaseWalker.java:688)
    at org.hibernate.hql.antlr.HqlSqlBaseWalker.query(HqlSqlBaseWalker.java:544)
    at org.hibernate.hql.antlr.HqlSqlBaseWalker.selectStatement(HqlSqlBaseWalker.java:281)
    .........................
    ........................... 
```

有人可以告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T20:33:36.043

如果你只想要这三列，那么 HQL 应该是

```
select job.id, position.decription, job.description 
from Job job
left join job.position position 
```

此查询将返回一个`List<Object[]>`并且列表中的每个 Object 数组将包含这三个元素。

然而，使用这个查询会更自然：

```
select job from Job job
left join fetch job.position 
```

这将加载所有职位及其职位。该查询将返回一个列表，您将能够使用`job.getId()`、`job.getPosition().getDescription()`和访问您想要的三个信息`job.getDescription()`。

HQL 的语法在[参考文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#queryhql)中通过示例进行了描述，必读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T15:33:58.010

我认为您可以从 Position 对象中获取乔布斯（）

# java - TreeMap Java 返回的 Null ArrayList

> ID：10564778
> 
> 赞同：0
> 
> 时间：2012-05-12T14:54:47.313
> 
> 标签：java, dictionary, arraylist, treemap

我必须使用 TreeMap 做一个同义词词典。TreeMap 是`<Word, ArrayList<Word>>`类型。这意味着对于由 Word 表示的每个键，都会有一个同义词列表。当我想列出字典的内容时，通过使用下面的方法，我发现返回的 ArrayList 为空。我能做些什么？我尝试跟踪代码，但似乎没有发现错误。方法是：

```
public String listContent() {
    Set set = wordList.keySet();
    Iterator it = set.iterator();
    String result = new String();
    ArrayList<Word> words = new ArrayList<Word>();
    while (it.hasNext()) {
        Word temp = (Word) it.next();
        words = wordList.get(temp);
        if (words != null) {
            Iterator it2 = words.iterator();
            result += temp.getContent();
            result += " - ";
            int size = words.size();
            while (it2.hasNext()) {
                result += ((Word) it2.next()).getContent();
                if (size != 1)
                    result += ", ";
                size--;
            }
            result += "\n";
        }
    }
    return result;
} 
```

wordList.get(temp) 返回的 ArrayList 对于某些插入的元素为空。我检查了手表，但那里没有。我应该怎么办 ？

wordList 是一个`TreeMap<Word, ArrayList<Word>>;`

**编辑 - addWord 方法**

```
public void addWord(String content1, String content2)
{
  Word w1 = new Word(content1);
  Word w2 = new Word(content2);
  Set set = wordList.entrySet();
  Iterator it = set.iterator();
  boolean ok=false;
  while(it.hasNext())
  {
    Map.Entry<Word,ArrayList<Word>> temp = (Map.Entry<Word,ArrayList<Word>>) it.next();
    if(temp.getKey().getContent().matches(content1))
    {
      ArrayList<Word> words = temp.getValue();
      Iterator it2 = words.iterator();
      if(words.isEmpty()) words.add(w2);
      else
      {
        boolean ok2=true;
        while(it2.hasNext())
        {
          Word tempy = (Word) it2.next();
          if(tempy.getContent().equals(content2))
          {
            ok2=false;
            break;
          }
        }
        if(ok2) words.add(w2);
      }
      ok=true;
    }
  }
  if(!ok) {
    ArrayList<Word> tempys = new ArrayList<Word>();
    tempys.add(w2);
    wordList.put(w1,tempys);
  }

} 
```

**编辑 2 - 单词类**

```
 public class Word implements Serializable,Comparable {

private String content;

public Word (String content)
{
    this.content = content;
}

public void setContent(String content)
{
    this.content=content;
}

public String getContent()
{
    return content;
}

@Override
public int compareTo(Object o) {
    if(((Word)o).getContent().equals(this.getContent())) return 0;
    return 1;
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T15:24:51.760

您的 compareTo 方法是错误的。约定是如果 A > B，那么你必须有 B < A。如果内容不相等，你的实现总是返回 1。

你应该像这样实现它：

```
@Override
public int compareTo(Word w) {
    return this.content.compareTo(w.content);
} 
```

（并且 Word 类应该实现`Comparable<Word>`，而不是 Comparable）。

由于 TreeMap 使用此方法来判断某个单词是大于还是小于另一个单词，并且由于该方法返回不连贯的结果，因此 Map 也返回不连贯的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T15:06:04.790

您是否检查过插入同义词时一切正常吗？顺便说一句，您应该使用 StringBuilder 连接字符串（性能更好），并且您最好使用 worklist.entrySet() 同时迭代键和值，而不是几个 get 和迭代器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T15:11:33.670

我已经清理了您现有的代码以使用正确的 Java 习惯用法，例如 for-each 循环、StringBuilder 而不是连接字符串、避免这种`size--`黑客攻击等。

```
public String listContent() {
  final StringBuilder result = new StringBuilder();
  for (Map.Entry<Word, List<Word>> e : wordList.entrySet()) {
    final List<Word> words = e.getValue();
    if (words != null) {
      result.append(e.getKey().getContent()).append(" - ");
      final Iterator<Word> it = words.iterator();
      result.append(it.next().getContent());
      while(it.hasNext()) result.append(", ").append(it.next().getContent());
      result.append("\n");
    }
  }
  return result.toString();
} 
```

这也是一个经过清理的 addWord 版本，但仍然是一团糟的程序逻辑。如果有人对此有耐心，我鼓励他窃取并改进这一点。

```
public void addWord(String content1, String content2) {
  final Word w1 = new Word(content1), w2 = new Word(content2);
  final Set<Map.Entry<Word, List<Word>>> set = wordList.entrySet();
  for (Map.Entry<Word, List<Word>> temp : set) {
    if (!temp.getKey().getContent().matches(content1)) {
      final List<Word> newList = new ArrayList<Word>();
      newList.add(w2);
      wordList.put(w1,newList);
      break;
    }
    final List<Word> words = temp.getValue();
    if (words.isEmpty()) words.add(w2);
    else {
      for (Word w : words) {
        if (w.getContent().equals(content2)) {
          words.add(w2);
          break;
        }
      }
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T15:19:35.237

addWord 方法是一个可怕的混乱，当我尝试查看它时，我感到头疼，但我有根据的猜测是系统无法正常工作，因为 Word 类既没有实现该`equals`方法也没有实现该`hashCode`方法。尝试将这些添加到其中：

```
@Override
public int hashCode() {
    return this.content.hashCode();
}

@Override
public boolean equals(Object o) {
    return this.content.equals(o);
} 
```

使用这些方法，TreeMap 和其他结构能够识别出表示相同单词的 Word 类的两个实例实际上是相等的。

# r - 从字符和数字的数据框中子集字符列

> ID：10564781
> 
> 赞同：11
> 
> 时间：2012-05-12T14:55:06.673
> 
> 标签：r, dataframe

我有一个由数字和非数字列组成的数据框。

我想只提取（子集）非数字列，所以字符列。虽然我能够使用字符串对数字列进行子集化：`sub_num = x[sapply(x, is.numeric)]`，但我无法使用`is.character`表单执行相反的操作。谁能帮我？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-12T15:12:28.087

好的，我对我的想法做了一个简短的尝试。

我可以确认以下代码片段正在运行：

```
str(d)
 'data.frame':  5 obs. of  3 variables:
  $ a: int  1 2 3 4 5
  $ b: chr  "a" "a" "a" "a" ...
  $ c: Factor w/ 1 level "b": 1 1 1 1 1

# Get all character columns
d[, sapply(d, class) == 'character']

# Or, for factors, which might be likely:
d[, sapply(d, class) == 'factor']

# If you want to get both factors and characters use
d[, sapply(d, class) %in% c('character', 'factor')] 
```

使用正确的类，您的`sapply`-approach 应该也可以工作，至少只要您`,`在函数之前插入缺失的内容`sapply`。

如果您有不属于该组的类，则使用的方法`!is.numeric`不能很好地扩展`numeric, factor, character`（例如，我经常使用的类是`POSIXct`）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-11-01T14:08:04.980

如果您尝试仅选择字符列，则可以使用`dplyr::select_if()`和来完成`is.character()`。以`dplyr::starwars`样本数据为例：

```
library(dplyr)
starwars %>% 
  select_if(is.character) %>% 
  head(2)
# A tibble: 2 x 7
  name           hair_color skin_color eye_color gender homeworld species
  <chr>          <chr>      <chr>      <chr>     <chr>  <chr>     <chr>  
1 Luke Skywalker blond      fair       blue      male   Tatooine  Human  
2 C-3PO          NA         gold       yellow    NA     Tatooine  Droid 
```

或者，如果您尝试否定某个列类型，请注意语法略有不同：

```
starwars %>%  
  select_if(~!is.numeric(.)) %>% 
  head(2)

# A tibble: 2 x 10
    name           hair_color skin_color eye_color gender homeworld species films     vehicles  starships
    <chr>          <chr>      <chr>      <chr>     <chr>  <chr>     <chr>   <list>    <list>    <list>   
  1 Luke Skywalker blond      fair       blue      male   Tatooine  Human   <chr [5]> <chr [2]> <chr [2]>
  2 C-3PO          NA         gold       yellow    NA     Tatooine  Droid   <chr [6]> <chr [0]> <chr [0]> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-12T15:13:15.743

尝试：

```
x[sapply(x, function(x) !is.numeric(x))] 
```

因为它会拉出任何非数字的因素和字符。

**编辑：**

```
x <- data.frame(a=runif(10), b=1:10, c=letters[1:10], 
    d=as.factor(rep(c("A", "B"), each=5)), 
    e=as.Date(seq(as.Date("2000/1/1"), by="month", length.out=10)),
    stringsAsFactors = FALSE)

# > str(x)
# 'data.frame':   10 obs. of  5 variables:
#  $ a: num  0.814 0.372 0.732 0.522 0.626 ...
#  $ b: int  1 2 3 4 5 6 7 8 9 10
#  $ c: chr  "a" "b" "c" "d" ...
#  $ d: Factor w/ 2 levels "A","B": 1 1 1 1 1 2 2 2 2 2
#  $ e: Date, format: "2000-01-01" "2000-02-01" ...

x[sapply(x, function(x) !is.numeric(x))] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-10T02:35:58.807

之前的其他答案不是那么清楚。所以我发布了这种方法。要获取字符列的名称，您可以执行以下操作：

```
chrs <- sapply(df_data, is.character)
chrCols <- names(df_data[, chrs]) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-05T12:17:00.973

根据最近的`dplyr`更新：

```
starwars %>% 
  select(where(is.character)) 
```

你可以切换`is.character`到`is.numeric`/`is.factor`等等。

另一种方法是使用包中的`keep`or`discard`函数`purrr`：

```
starwars %>% 
  purrr::keep(~is.character(.)) 

starwars %>% 
  purrr::discard(~!is.character(.)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-07T07:40:24.360

使用@Tyler 示例

```
x <- data.frame(a=runif(10), b=1:10, c=letters[1:10], 
    d=as.factor(rep(c("A", "B"), each=5)), 
    e=as.Date(seq(as.Date("2000/1/1"), by="month", length.out=10)),
    stringsAsFactors = FALSE)

In Base R

base::Filter(Negate(is.numeric),x)

   c d          e
1  a A 2000-01-01
2  b A 2000-02-01
3  c A 2000-03-01
4  d A 2000-04-01
5  e A 2000-05-01
6  f B 2000-06-01
7  g B 2000-07-01
8  h B 2000-08-01
9  i B 2000-09-01
10 j B 2000-10-01 
```

# c# - Any suggestions for better function to get data from DataBase

> ID：10564785
> 
> 赞同：0
> 
> 时间：2012-05-12T14:55:58.903
> 
> 标签：c#, database, firebird

To get my data(users and books) from Firebird base I am using the following methods:

```
public static Dictionary<string, Users> getUsersFromDB()
{
  Dictionary<string, Users> users_list = new Dictionary<string, Users>();
  string reqestCommand = "SELECT id, user_type, user_nick, user_pass, user_fname, user_lname, user_identify, e_mail,address, registered FROM USERS";
  string connectionString = connectionPath();
  using (FbConnection fbDB = new FbConnection(connectionString))
  {
    fbDB.Open();
    FbCommand reqest = new FbCommand(reqestCommand, fbDB);
    using (FbDataReader reader = reqest.ExecuteReader())
    {
      while (reader.Read())
      {
        string key;
        Users user = new Users();
        user.ID = reader.GetInt32(0);
        user.type = reader.GetString(1).Trim();
        key = reader.GetString(2).Trim();
        user.nick = key;
        user.password = reader.GetString(3).Trim();
        user.fName = reader.GetString(4).Trim();
        user.lName = reader.GetString(5).Trim();
        user.identify = reader.GetString(6).Trim();
        user.email = reader.GetString(7).Trim();
        user.address = reader.GetString(8).Trim();
        user.registerDate = reader.GetString(9).Trim();
        user.localOrInDb = "inDatabase";
        users_list.Add(key, user);
      }
    }
    fbDB.Close();
  }
  return users_list;
}

public static Dictionary<Guid, Books> getBooksFromDB()
{
  Dictionary<Guid, Books> books_list = new Dictionary<Guid, Books>();
  string reqestCommand = "SELECT book_id, book_title, book_author, book_genre, book_language, book_rel_date, book_page_number, book_available_amount, book_type FROM BOOKS";
  string connectionString = connectionPath();
  using (FbConnection fbDB = new FbConnection(connectionString))
  {
    fbDB.Open();
    FbCommand reqest = new FbCommand(reqestCommand, fbDB);
    using (FbDataReader reader = reqest.ExecuteReader())
    {
      while (reader.Read())
      {
        Guid key;
        Books book = new Books();
        Guid theGuid = new Guid(reader.GetString(0).Trim());
        key = book.ID = theGuid;
        book.title = reader.GetString(1).Trim();
        book.author = reader.GetString(2).Trim();
        book.genre = reader.GetString(3).Trim();
        book.language = reader.GetString(4).Trim();
        book.rel_date = reader.GetString(5).Trim();
        book.page_number = reader.GetInt32(6);
        book.amount = reader.GetInt32(7);
        book.type = reader.GetString(8).Trim();
        book.localOrInDb = "inDatabase";
        books_list.Add(key, book);
      }
    }
    fbDB.Close();
  }
  return books_list;
} 
```

How can we see, they are almost same, so question:

Is it possible to make from them one function? Or would it be better to leave them separate?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T15:08:02.107

You can pass a parameter that makes an instance of your target class from `Reader`:

```
public static Dictionary<K,T> GetFromDb<K,T>(Func<Reader,KeyValuePair<K,T> maker) {
    var res = new Dictionary<K,T>();
    // ... your code ...
        while (reader.Read()) {
            res.Add(maker(reader));
        }
    return res;
} 
```

Now you can call your `GetFromDb` like this:

```
var users = GetFromDb<string,User>(reader => {
    string key;
    Users user = new Users();
    user.ID = reader.GetInt32(0);
    user.type = reader.GetString(1).Trim();
    key = reader.GetString(2).Trim();
    user.nick = key;
    user.password = reader.GetString(3).Trim();
    user.fName = reader.GetString(4).Trim();
    user.lName = reader.GetString(5).Trim();
    user.identify = reader.GetString(6).Trim();
    user.email = reader.GetString(7).Trim();
    user.address = reader.GetString(8).Trim();
    user.registerDate = reader.GetString(9).Trim();
    user.localOrInDb = "inDatabase";
    return new KeyValuePair<string,User>(key, user);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T15:10:33.780

Check this post

[https://stackoverflow.com/a/1464929/988830](https://stackoverflow.com/a/1464929/988830)

You can abstract the reader using extension method.

However you have to create the FBconnection everytime. If you try to put it in a function and access it from another one then you will get exception that reader is closed.

using uses IDisposible [http://msdn.microsoft.com/en-us/library/system.idisposable.aspx](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx) which closes the connection.

**Another option** Start using orm like Entity framework or NHibernate which will map the table with your object.

# irc - mIRC bot - 在 2 个通道中复制/粘贴行

> ID：10564789
> 
> 赞同：1
> 
> 时间：2012-05-12T14:56:14.100
> 
> 标签：irc, mirc, chatbot

我是 mirc 脚本的菜鸟，我需要一些帮助。

1.  有2个irc频道。让我们调用#channel1和#channel2；
2.  有2个机器人。一个是我的，我们称他为“mybot”（我的机器人在两个频道中）。另一个机器人来自第三人，我们称他为“otherBot”；

我需要的是……让我举个例子来更好地解释。

a) 在#channel1 中一些用户类型：

```
[14:38:48] <@someuser> !user xpto 
```

此时，“mybot”在两个通道中。他读取命令“!user*”并将其复制/粘贴到#channel2，“otherBot”将识别命令“!user*”并粘贴有关该命令的一些信息。

b）因此，在#channel2 中它将附加如下内容：

```
[14:38:50] <@ mybot > !user xpto
[14:38:52] <@ otherBot > User name is xpto and he likes popatos. 
```

现在我想让“mybot”读取“otherBot”提供的信息，然后将其粘贴到#channel1

c) 所以，在#channel1 中：

```
[14:38:54] <@ mybot > User name is xpto and he likes popatos. 
```

到目前为止，我的遥控器中有打鸟代码：

```
on *:TEXT:!user*:#channel1 {
  /msg # channel2 $1-
}

on *:TEXT:User name*:#channel2 {
  if $address($nick,2) == *!*@otherBot.users.gameea {
    /msg # channel1 $1-
   }
 } 
```

这工作正常，但有一个问题：如果其他人（不是“mybot”）在#channel2 中键入“！user kakaka”，“mybot”也会复制/粘贴“otherBot”提供的信息，然后将其粘贴到 #频道 1。我只希望“mybot”只复制/粘贴“mybot”向“otherBot”询问的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T22:58:18.683

一个非常简单（但不是特别好）的方法是当有人在#channel1 中键入!user 时设置一个全局变量，并检查是否在#channel2 上侦听的另一部分中设置了该变量。例如：

```
on *:TEXT:!user *:#channel1: {
  set %repeatUser 1
  msg channel2 $1-
}

on *:TEXT:User name*:#channel2: {
  if ($address($nick,2) == *!*@otherBot.users.gameea && %repeatUser == 1) {
    unset %repeatUser
    msg #channel1 $1-
  }
} 
```

这不是一个完美的解决方案，因为如果机器人在脚本发送 '!user' 到另一个频道和机器人响应的时间之间说了其他内容，那么它将打印出该回复而不是一个用于您的请求，但这仅在#channel2 非常繁忙，otherbot 非常滞后，或者您的机器人和其他人都在 #channel2 上键入 !user 时才相关。

# cdi - RESTEasy 在 TJWS 上与 CDI

> ID：10564790
> 
> 赞同：0
> 
> 时间：2012-05-12T14:56:18.903
> 
> 标签：cdi, resteasy, tjws

我尝试使用 TJWS Embeddable Servlet Container 使用此用户指南[http://docs.jboss.org/resteasy/docs/2.3.3.Final/userguide/html/RESTEasy_Embedded_Container.html#d0e2640启动 RestEasy 应用程序](http://docs.jboss.org/resteasy/docs/2.3.3.Final/userguide/html/RESTEasy_Embedded_Container.html#d0e2640)

JBOSS7-AS 中的应用程序工作正常。我想使用 TJWS 进行调试和单元测试，但是依赖注入有问题。

我创建资源类 UserResource，它使用 CDI 注入实用程序类 UserManager：

```
@Path("users")
@SessionScoped
class UserResource {

  @Inject
  UserManager userManager; // simple interface and imlementation

  public UserResource() {} // constructor with no parameters for bean

    @Path("list")
    @GET
    public List<User> list() {
       List<User> userList = userManager.getList(); // NullPointerException
       return userList;
    }
} 
```

在 main 中启动 TJWS：

```
public static void main(String[] args) throws IOException {
    TJWSEmbeddedJaxrsServer tjws = new TJWSEmbeddedJaxrsServer();
    tjws.setPort(9997);
    tjws.start();

    tjws.getDeployment().getRegistry().addPerRequestResource(User.class);
} 
```

当我尝试`http://localhost/users/list`通过浏览器获取时，我在 UserResource.list() 方法中得到 NullPointerException，因为 userManager 未注入并且为空。

有没有办法注入userManager？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:53:02.157

TJWS 是一个独立的 servlet 容器和 Web 服务器，不支持像 @Inject 这样的 EE 注释。要使代码正常工作，您必须使用 EE 容器，例如 JBoss AS。

# java - 将具有依赖关系的 Maven 项目部署到在 Eclipse 中运行的 Tomcat 或 Jboss

> ID：10564797
> 
> 赞同：2
> 
> 时间：2012-05-12T14:57:42.843
> 
> 标签：java, eclipse, tomcat, maven, jboss

我在 Eclipse 中有几个相互依赖的 Maven 项目。其中一些依赖于 Spring 库（Spring 核心、Spring MVC 等）。

当我使用“mvn clean install”构建项目时，maven 会生成一个 war 文件并将其放在 ./target/ 文件夹中。然后，我可以获取这个 war 文件并将其部署在任何正在运行的应用程序服务器上。我已经在 Tomcat 7 和 Jboss 7.1.0 上测试了 war 文件，它工作正常。

如果我尝试直接从 Eclipse 运行项目，我会遇到问题。我希望能够调试服务器代码，我知道这可能的唯一方法是在 Eclipse 中运行的 appserver 中运行项目。

我在 Eclipse 上配置了 Tomcat 应用程序服务器。当我然后选择 Maven 项目并右键单击它并选择“在服务器上运行”时，该项目部署在正在运行的 Tomcat 实例上，但由于某种原因它会产生以下错误：

```
12-May-2012 15:48:22 org.apache.catalina.core.StandardContext listenerStart
SEVERE: Error configuring application listener of class org.springframework.web.context.ContextLoaderListener
java.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListener
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1701)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1546)
    at org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:525)
    at org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:507)
    at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:124)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4715)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1568)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1558)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:885)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
    at java.lang.Thread.run(Thread.java:619)
12-May-2012 15:48:22 org.apache.catalina.core.StandardContext listenerStart
SEVERE: Skipped installing application listeners due to previous error(s) 
```

我也尝试了同样的方法，即在 Eclipse 中的 Jboss 实例上运行该项目，它还抱怨它找不到多个库。它抱怨的大多数库都是在 Maven POM 文件中称为依赖项的库。

我怀疑当我将项目部署到 Tomcat 或 Jboss（使用 Jboss 工具）时，没有部署依赖项，因此会出现错误。我是否需要任何其他配置来指示 Eclipse 也部署所有依赖项？

请注意，如果我手动部署战争文件，它可以工作。如果我使用 Eclipse 中的“在服务器上运行”选项部署它，它只是不起作用。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T19:31:42.197

我假设您的项目中有一个 WEB-INF 文件夹。这是否有一个名为 lib 的子文件夹，其中包含您的项目所依赖的所有 jar？

如果没有，您应该确保将它们复制到那里。您可以使用 maven 依赖插件执行此操作，如下所示：

```
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-dependency-plugin</artifactId>
<version>2.4</version>
<executions>
    <execution>
        <phase>process-resources</phase>
        <goals>
            <goal>copy-dependencies</goal>
        </goals>
    </execution>
</executions>
<configuration>
    <outputDirectory>${project.basedir}/src/main/webapp/WEB-INF/lib</outputDirectory>
</configuration> 
```

如果你的WEB-INF-文件夹的位置和上面不一样，记得改一下。您还应该配置 clean 插件以在您清理时清空此目录。否则，如果您删除依赖项，jar 文件仍将位于 lib 文件夹中。

# android - 有目的地传递数据计算

> ID：10564799
> 
> 赞同：1
> 
> 时间：2012-05-12T14:57:57.633
> 
> 标签：android, android-intent

我遇到了一些问题，我确实知道如何传递值数据。例如在 Activity1 中：我正在使用方法 `int kalorivalue1 = calculateBreakfast(food1, drink1); public int calculateBreakfast(int food1, int drink1) { return (int) (food1 + drink1);`

在活动 2

```
 int kalorivalue2 = calculateLunch(food2 , drink2);
public int calculateLunch(int food2, int drink2) {
        return (int) (food2 + drink2); 
```

在活动 3 >

```
 int kaloriValue3 = calculateDinner(food3, drink3);
public int calculateDinner(int food3, int drink3) {
        return (int) (food3 + drink3); 
```

问题是，我想如何在一项新活动下计算 all = kaloriValue1 + kaloriValue2 + kaloriValue3？我必须使用意图还是其他方式？先感谢您。非常感谢您的帮助。:)

```
package lynn.calculate.KaunterKalori;

import lynn.calculate.KaunterKalori.R;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Spinner;
import android.widget.TextView;
//import android.content.Intent;

public class Breakfast extends Activity {

    public int totalKalori;

    ArrayAdapter<String> FoodType1Adapter;
    ArrayAdapter<String> DrinkType1Adapter;
    String FoodTypeArray[] = { "nasi lemak", "roti canai",
            "Roti(2kpg-White Bread)", "nasi kerabu", "tosei", "nasi goreng" };
    int[] valueFoodTypeArray = { 389, 301, 140, 20, 1, 637 };
    String[] DrinkTypeArray = { "teh panas", "teh 0 panas", "teh tarik" };
    int[] valueDrinkTypeArray = { 201, 101, 51 };

    Spinner FoodTypeSpinner;
    Spinner DrinkTypeSpinner;
    TextView SarapanTotalKalori;

    public void onCreate(Bundle savedInstancesState) {
        super.onCreate(savedInstancesState);
        setContentView(R.layout.breakfast);

        FoodTypeSpinner = (Spinner) findViewById(R.id.spinner1);
        DrinkTypeSpinner = (Spinner) findViewById(R.id.spinner2);
        SarapanTotalKalori = (TextView) findViewById(R.id.JumlahKalori);

        initializeSpinnerAdapters();
        // load the default values for the spinners
        loadFoodValue1Range();
        loadDrinkValue1Range();

    }

    // nk handle button --> refer calculate button
    public void calculateClickHandler(View view) {
        if (view.getId() == R.id.button1) {

            // nk bace dkat spinner
            int food1 = getSelectedFood();
            int drink1 = getSelectedDrink();

            // kira kalori sarapan
            // view kalori sarapan

            int kaloriValue1 = calculateSarapan(food1, drink1);
            SarapanTotalKalori.setText(kaloriValue1 + "");
            totalKalori = kaloriValue1;
        //  Bundle extras = getIntent().getExtras();
            //if (extras != null) {
            //  int sarapanKalori = extras.getInt("kaloriValue1");
                //setCurrentSarapanKalori(kaloriValue1);
                //CurrentSarapanKalori();
            }
        }

        //Intent i= new Intent(this, CalculateAll.class);
        //i.putExtra("sarapanKalori", kaloriValue1);
    //}

    public int getSelectedFood() {
        String selectedFoodValue = (String) FoodTypeSpinner.getSelectedItem();
        int index = 0;

        for (int i = 0; i < FoodTypeArray.length; i++) {
            if (selectedFoodValue.equals(FoodTypeArray[i])) {
                index = i;
                break;
            }
        }
        return valueFoodTypeArray[index];
    }

    public int getSelectedDrink() {
        String selectedDrinkValue = (String) DrinkTypeSpinner.getSelectedItem();
        int index = 0;
        for (int i = 0; i < DrinkTypeArray.length; i++) {
            if (selectedDrinkValue.equals(DrinkTypeArray[i])) {
                index = i;
                break;
            }
        }
        return valueDrinkTypeArray[index];

    }

    public int calculateSarapan(int food1, int drink1) {
        return (int) (food1 + drink1);
    }

    public void loadFoodValue1Range() {
        FoodTypeSpinner.setAdapter(FoodType1Adapter);
        // set makanan b4 pilih
        FoodTypeSpinner.setSelection(FoodType1Adapter.getPosition("400"));

    }

    public void loadDrinkValue1Range() {
        DrinkTypeSpinner.setAdapter(DrinkType1Adapter);
        DrinkTypeSpinner.setSelection(DrinkType1Adapter.getPosition("77"));
    }

    public void initializeSpinnerAdapters() {

        FoodType1Adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_spinner_item, FoodTypeArray);

        DrinkType1Adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_spinner_item, DrinkTypeArray);

    }

} 
```

这是一项活动，另外两项活动相同，只是变量不同，现在我不知道如何计算一项新活动下的所有结果？感谢：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T15:02:11.210

我会`public static long kaloriResult`在您的最终活动中创建一个来保存结果，并从每个活动中添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T15:07:38.590

您还可以创建一个名为的变量`totalKalori`，并且在每个活动中，您可以发送`totalKalori`到另一个活动。`totalKalori`从上一个 Intent获取后，您可以`totalKalori=+calculateLunch(food,drink)`在将其发送到下一个 Activity 之前调用

# python - 如何在函数调用中解包多个元组

> ID：10564801
> 
> 赞同：21
> 
> 时间：2012-05-12T14:58:04.583
> 
> 标签：python, tuples

如果我有一个函数`def f(a, b, c, d)`和两个元组，每个元组都有两个元素，有没有办法解压缩这些元组，以便我可以将它们的值发送给函数？

```
f(*tup1, *tup2) 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-12T15:00:46.367

在[Python 3.5.0 发布时](https://www.python.org/downloads/release/python-350/)，[PEP 448 “Additional Unpacking Generalizations”](http://www.python.org/dev/peps/pep-0448/)为这个有效的 Python 提供了自然语法：

```
>>> f(*tup1, *tup2)
1 2 2 3 
```

在旧版本的 Python 中，您可能需要将元组连接在一起以提供单个扩展参数：

```
>>> tup1 = 1, 2
>>> tup2 = 2, 3
>>> def f(a, b, c, d):
        print(a, b, c, d)

>>> f(*tup1+tup2)
1 2 2 3 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-12T15:02:50.247

另一种方法使用`chain`

```
>>> from itertools import chain
>>> def foo(a,b,c,d):
        print a,b,c,d

>>> tup1 = (1,2)
>>> tup2 = (3,4)
>>> foo(*chain(tup1,tup2))
1 2 3 4 
```

# java - Android Paint 应用程序数组

> ID：10564802
> 
> 赞同：0
> 
> 时间：2012-05-12T14:58:06.067
> 
> 标签：java, android, android-canvas

我正在尝试制作一个简单的绘画应用程序。我在存储颜料的阵列上遇到问题，我找不到解决方案。如果我注释掉与它运行的数组有关的部分，但是（显然）该应用程序无法按预期工作。当我打开应用程序时，它会因以下代码而崩溃：

```
package com.example.paint.views;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Paint.Style;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.view.SurfaceHolder;
import android.view.SurfaceHolder.Callback;
import android.view.SurfaceView;

public class PaintView extends SurfaceView implements Callback {

PaintCircle[] circles = new PaintCircle[10000];

@Override
public boolean onTouchEvent(MotionEvent event) {
    // When touched

    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        Paint blue = new Paint();
        blue.setColor(Color.BLUE);
        blue.setStyle(Style.FILL);
        circles[circles.length] = new PaintCircle(event.getX(),
                event.getY(), 20, blue);
        break;
    case MotionEvent.ACTION_MOVE:
        Paint green = new Paint();
        green.setColor(Color.GREEN);
        green.setStyle(Style.FILL);
        circles[circles.length] = new PaintCircle(event.getX(),
                event.getY(), 20, green);
        break;
    }

    return true;
}

@Override
public void draw(Canvas c) {
    // Draw to the canvas
    super.draw(c);
    c.drawARGB(255, 255, 255, 255);
    for (int i = 0; i < circles.length; i++) {
        c.drawCircle(circles[i].cx, circles[i].cy, circles[i].radius,
                circles[i].paint);
    }
}

public PaintView(Context context, AttributeSet attrs) {
    super(context, attrs);
    getHolder().addCallback(this);
}

@Override
public void surfaceCreated(SurfaceHolder holder) {
    // When the surface view is created
    Canvas c = getHolder().lockCanvas();
    draw(c);
    getHolder().unlockCanvasAndPost(c);
}

@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) {
    // TODO Auto-generated method stub
    Canvas c = getHolder().lockCanvas();
    draw(c);
    getHolder().unlockCanvasAndPost(c);
}

@Override
public void surfaceDestroyed(SurfaceHolder holder) {
    // TODO Auto-generated method stub

}

} 
```

这是我的 PaintCircle 课程：

```
package com.example.paint.views;

import android.graphics.Paint;

public class PaintCircle {
public Paint paint;
public float cx, cy;
public int radius;

public PaintCircle() {

}

public PaintCircle(float cx, float cy, int radius, Paint paint) {
    cx = this.cx;
    cy = this.cy;
    radius = this.radius;
    paint = this.paint;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T15:17:40.533

`circles[circles.length]`是数组的第 10001 个元素，因为长度是静态的。

最好使用动态增长的`List`like an `ArrayList`：

```
List<PaintCircle> circles = new ArrayList<PaintCircle>();

@Override
public boolean onTouchEvent(MotionEvent event) {
    // When touched

    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        Paint blue = new Paint();
        blue.setColor(Color.BLUE);
        blue.setStyle(Style.FILL);
        circles.add(new PaintCircle(event.getX(),
                event.getY(), 20, blue));
     // ...

@Override
public void draw(Canvas c) {
    // Draw to the canvas
    super.draw(c);
    c.drawARGB(255, 255, 255, 255);
    for (PaintCircle circle : circles) {
        c.drawCircle(circle.cx, circle.cy, circle.radius,
                circle.paint);
    }
} 
```

另一种可能性是存储数组的单独索引，告诉您哪个是数组的最后一个元素。当您添加一个圆圈时，增加索引并仅绘制那些已分配的。

# javascript - HTML“链接”（样式表）禁用属性

> ID：10564806
> 
> 赞同：14
> 
> 时间：2012-05-12T14:58:51.980
> 
> 标签：javascript, html, stylesheet

我正在使用 JavaScript 启用/禁用样式表，使用以下内容：

```
document.styleSheets[0].disabled = true|false; 
```

这个 JS 工作正常，但是我希望默认情况下禁用样式表。虽然我可以使用上面的 JS 在页面加载时立即禁用样式表，但这显然不适用于关闭 JavaScript 的用户。

我试过这样做：

```
<link rel="stylesheet" href="style.css" disabled /> 
```

虽然这会禁用样式表，但 JavaScript（或至少我正在使用的方法）无法再次启用它。我还尝试了“禁用”属性的所有这些变体：和`disabled="disabled"`，但这些都产生了同样的问题——我无法使用 JavaScript 再次启用它们。`disabled="true"``disabled=true`

简而言之，我需要一种使用 JavaScript 启用/禁用外部样式表的方法，但默认情况下禁用该样式表但不依赖于 JavaScript。

任何帮助将不胜感激。谢谢。

注意这个效果可以通过使用两个样式表来实现，第二个覆盖第一个，因此不需要“禁用”属性。但是，如果可能的话，显然最好只使用一个样式表，因此我的问题在上面。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-12T15:12:19.597

您可以为此使用 JavaScript 的 removeAttribute 方法。

```
<html>
    <head>
        <link id="first_style" rel="stylesheet" href="#" disabled />

        <script type="text/javascript">
            window.onload = function()
            {
                document.getElementById('first_style').removeAttribute('disabled');
            }
        </script>
    </head>
    <body>
        <p>something</p>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T15:09:02.033

为什么不解决问题：仅在启用 JavaScript 时才加载 CSS？

从[这个例子](http://www.javascriptkit.com/javatutors/loadjavascriptcss.shtml)中，你可以使用类似的东西：

```
var fileref=document.createElement("link")
fileref.setAttribute("rel", "stylesheet")
fileref.setAttribute("type", "text/css")
fileref.setAttribute("href", filename) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T15:08:13.567

我认为在这种情况下你可能不得不依赖 JavaScript。

如果您想更多地考虑在需要时提供样式表而不是默认禁用，那么您应该确定它。

# javascript - 使用坐标变量

> ID：10564807
> 
> 赞同：1
> 
> 时间：2012-05-12T14:58:54.253
> 
> 标签：javascript, geolocation

我的用户坐标的 javascript 存在一些问题。在所有示例中，他们在地理定位的返回回调中打印一条警报消息，但我想使用纬度、经度坐标来打印或设置其他值。这段代码有什么问题？任何人都可以善良并解释一下：:)

```
<script type="text/javascript">
navigator.geolocation.getCurrentPosition(success);

function success(position) {
 var lat = position.coords.latitude;
 var long = position.coords.longitude;
}

document.write(lat);
</script> 
```

这是phonegap的错误代码：

> 05-12 16:40:35.486：E/Web 控制台（15962）：ReferenceError：找不到变量：lat at file:///android_asset/www/showMap/showMap.html:31

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T15:02:44.820

你已经在函数内部声明了`lat`，所以这就是它们的作用域。您不能在函数之外访问它们。`long``success``success`

您可以将代码更改为：

```
navigator.geolocation.getCurrentPosition(success);

function success(position) {
 var lat = position.coords.latitude;
 var long = position.coords.longitude;
 // lat is accessible inside "success", we can write out the variable here:
 document.write(lat);
} 
```

需要明确的是，即使*您*在这里制作`lat`和`long`全球，它也不会帮助您。运行完成后**异步**`success`执行。**`getCurrentPosition`**

# spring - Spring Autowire 不适用于 GenericApplicationContext

> ID：10564810
> 
> 赞同：1
> 
> 时间：2012-05-12T14:59:12.173
> 
> 标签：spring, jakarta-ee, dependency-injection, autowired

我在尝试构建 GenericApplicationContext 时遇到了一些问题，所有用 @Autowired 注释的字段都是空的。以下是构建应用程序上下文的代码：

```
GenericApplicationContext context = new GenericApplicationContext(
            new DefaultListableBeanFactory());
XmlBeanDefinitionReader lXmlReader = new XmlBeanDefinitionReader(
            context);
lXmlReader.loadBeanDefinitions(new FileSystemResource(      "/applicationContext.xml")); 
```

我确定在 applicationContext.xml 中正确配置了注释配置和组件扫描，所以我需要更多处理来显式连接依赖关系吗？任何建议表示赞赏。

# android - 激活列表视图上的项目

> ID：10564812
> 
> 赞同：-2
> 
> 时间：2012-05-12T14:59:37.830
> 
> 标签：android, listview, colors, background, listadapter

我是一名新的 android 开发人员，我正在尝试在 apiDemos 中构建与“List17.java”类似的应用程序，无论如何，我创建了自己的列表项，而不是“simple_list_item_activated_1”并添加了行：android:background= “？android:attr/activatedBackgroundIndicator”为了让选定的项目在被选中后保持彩色，就像在list17中一样，但由于某种原因它确实发生了，选定项目的背景在你点击它后立即变回，我试着放一个使用： android:background="#FF0000" 为所有项目添加静态背景颜色并且它有效，知道我错过了什么吗？ [List17.java](http://source-android.frandroid.com/development/samples/ApiDemos/src/com/example/android/apis/view/List17.java)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T19:47:33.023

您需要设置一个选择器 XML 文件并将其设置为 android:background 在您的布局 XML 中。

# android - 上下文不是上下文？（不启动对话框）

> ID：10564813
> 
> 赞同：0
> 
> 时间：2012-05-12T14:59:44.130
> 
> 标签：android, android-activity, android-context

-- 这可能不是问题 -- 在修复设备并尝试恢复后，我现在无法使用设备重现此问题。

所以我有点困惑，但这里有一些代码。我更改了代码以简化它，所以我可能有错字，但这是我所看到的“要点”。但基本上在某些设备上示例 1 不会启动对话框，而选项 2 在所有设备上启动它：

1.  为什么设备/安卓版本不同？
2.  上下文不应该相同吗？我知道应用程序上下文和视图上下文是不同的。但不确定为什么这应该起作用。我知道我不应该使用`getApplicationContext()`视图..但仍然有点困惑。

（请注意 MyTestActivity 是 MyActivity 的子类）

编辑：在选项 #1 中，MyActivity 从类变量中获取上下文并使用它来启动对话框。在选项#2 MyTestActivity 中获取上下文（应该与 MyActivity 相同的上下文？）并将其传递给 showMessage。（showMessage 在示例 #2 中采用了一个新参数）

示例 #1

```
///////////////////////////////////////////
// THIS Example works on Galaxy Nexus, but not on some other devices, such as : 
// SAMSUNG-SGH-I997\. (infuse) - this just simply does not display anything.

public class MyTestActivity extends MyActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.my_layout);
        Intent i = new Intent(MyTestActivity.this, ActivityTwo.class);
        startActivityForResult(i, Constants.FROM_ACTIVITY);
    }

    @Override 
    public void onActivityResult(int requestCode, int resultCode, Intent data) {     
        super.onActivityResult(requestCode, resultCode, data); 
        IntentResult intentResult = IntentIntegrator.parseActivityResult(requestCode, 
                   resultCode, data);
        if ((intentResult != null) && (resultCode == RESULT_OK)) {
             playsound(SOUND_DING); // User hears this - SoundPool
             showMessage("Test Title","Test Message"); // User does not see message
        }
    }
}

public class MyActivity extends Activity {
    private Context mContext;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mContext=this;
    }

    public void showMessage(String title, String message) {
        AlertDialog.Builder builder = new AlertDialog.Builder(mContext);
    builder.setTitle(title);
    builder.setMessage(message)
               .setPositiveButton(mContext.getString(R.string.ok), 
                new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {

                            finish();

                   }
               });
    AlertDialog alert = builder.create();
    alert.show();
    }
} 
```

示例#2

```
/////////////////////////////////////////////////////////////
// This works on all devices
    public class MyTestActivity extends MyActivity {
        private Context context;
        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.my_layout);
            context = this;
        Intent i = new Intent(MyTestActivity.this, ActivityTwo.class);
        startActivityForResult(i, Constants.FROM_ACTIVITY);
        }

        @Override 
        public void onActivityResult(int requestCode, int resultCode, Intent data) {     
            super.onActivityResult(requestCode, resultCode, data); 
            IntentResult intentResult = IntentIntegrator.parseActivityResult(requestCode, 
                       resultCode, data);
            if ((intentResult != null) && (resultCode == RESULT_OK)) {
                 playsound(SOUND_DING); // user hears this
                 showMessage("Test Title","Test Message", context); // user sees this
            }
        }
    }

    public class MyActivity extends Activity {
        private Context mContext;
        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            mContext=this;
        }

        public void showMessage(String title, String message, Context context) {
            AlertDialog.Builder builder = new AlertDialog.Builder(context);
        builder.setTitle(title);
        builder.setMessage(message)
                   .setPositiveButton(context.getString(R.string.ok), 
                    new DialogInterface.OnClickListener() {
                       public void onClick(DialogInterface dialog, int id) {

                                finish();

                       }
                   });
        AlertDialog alert = builder.create();
        alert.show();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T16:07:41.367

答案很简单。如果你不调用`super.onCreate(savedInstanceState);`你的覆盖，`onCreate()`你会得到一个垃圾而不是`context`. 如果你打电话`super.onCreate(savedInstanceState);`，你会得到一个工作`context`。

# facebook - wp7 应用程序工作正常发布到墙上，但是，自动包含的应用程序链接是错误链接？

> ID：10564821
> 
> 赞同：0
> 
> 时间：2012-05-12T15:01:08.457
> 
> 标签：facebook, windows-phone-7

windows phone 7应用程序添加到所有帖子的链接是： [http ://www.facebook.com/#!/apps/application.php?id=341481639238665](http://www.facebook.com/#!/apps/application.php?id=341481639238665)

我在哪里可以调整这个链接？我在 facebook 应用程序设置中尝试过，但没有看到调整 URL/URI 的地方。

这是一个例子：nigel wuz here from my custom free tv windows phone app

点赞 · · 分享 · 3 分钟前通过 Free TV Windows Phone ·

为该行添加的链接：Free TV Windows Phone 指向一个不存在的页面，我在哪里可以自定义这个？

未找到您所请求的页面..

您可能单击了过期的链接或输入了错误的地址。一些网址区分大小写。■ 回家

■ 返回上一页

我有所有困难的部分，只需要调整这部分，作为某种设置选项应该相当容易？

感谢您提供的任何帮助，非常感谢，并且还可以帮助其他人进行 Windows Phone 和 Facebook 集成...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T15:32:47.167

此链接实际上并不是已发布故事的一部分，而是 Facebook 为您的应用程序提供的链接（一旦更新，它也会针对每个旧故事进行更正）。

该链接的实际 URL 可能会根据应用程序设置而有所不同，例如：

*   页面网址
*   画布网址
*   网站网址

请参阅我对类似问题的[更详细回答：](http://facebook.stackoverflow.com/a/10469716/155033) [Facebook 应用程序将“通过 {APP_NAME}”重定向到现有页面](http://facebook.stackoverflow.com/q/10467644/155033)

# c# - 如何返回不同类型的参数？

> ID：10564826
> 
> 赞同：0
> 
> 时间：2012-05-12T15:01:46.953
> 
> 标签：c#, silverlight, windows-phone-7, xaml

**我有什么：**
1\. XAML 中的文本块
2\. 来自包含 DateTime 的数据库的查询？类型数据。

**我做什么：**
1\. 我用 DateTime 声明一个类“myClass”？名为“myDate”的参数

**我想要什么**
1\. 在文本块中显示 MyDate [我知道]
2\. 当“myDate”的值为空时，在文本块中显示一个字符串。【不知道，因为Get方法只能返回一个DateTime？类型值但不是字符串类型。]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T15:10:31.237

尝试将 Binding 与您的文本块一起使用，如下所示：

```
<TextBlock Text="{Binding myDate, TargetNullValue='Your null message'"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T15:05:10.023

声明一个字符串变量；如果`myDate`不为空，则为其分配日期值 - 否则将其设置为默认值。例子：

```
string stringToShow = null;
if(myDate.HasValue)
{
  stringToShow = myDate.Value.ToString();
}
else
{
  stringToShow = "other string";
} 
```

或者，更简洁地使用三元

```
string stringToShow = myDate.HasValue ? myDate.Value.ToString() : "other string"; 
```

然后`stringToShow`在文本块中显示而不是`myDate`. 最后，您可以将其包装在扩展方法中，以使其超级容易调用：

```
public static string ToSpecialString(this DateTime? date)
{
  return myDate.HasValue ? myDate.Value.ToString() : "other string";
} 
```

然后你可以`myDate.ToSpecialString()`在前端调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T15:05:11.903

您应该编写一个转换器，它将执行“为空”检查并在返回信息字符串时返回。

这将允许您使用标准数据绑定直接从 XAML 执行此操作，而无需在代码隐藏文件中添加任何其他代码。

# java - Hibernate 查询多次给出相同的记录

> ID：10564832
> 
> 赞同：20
> 
> 时间：2012-05-12T15:02:46.597
> 
> 标签：java, hibernate

我正在研究 Eclipse 中的休眠。我正在执行简单的“来自”查询。这是代码

```
 List list = sess1.createQuery("From Myview").list();
    System.out.println("Records Found :"+list.size());

    Iterator<Myview> i = list.iterator();

    while(i.hasNext())
    {
        Myview nS = i.next();
        System.out.println(nS.getFirstName()+" -- "+nS.getLastName()+" -- "+nS.getAddressLine1());
    } 
```

问题是 list.size() 返回 11，这是正确的，因为我的表中有 11 条记录。但是当我在 while 循环中时，相同的记录会显示多次，并且循环在第 11 次迭代后终止。这是我的输出

![在此处输入图像描述](../Images/2f0d1e357eca9990dc8c7a05d6fe85b0.png)

这就是我想要的

![在此处输入图像描述](../Images/4de85aa1bf3502796ac790e62848d4ae.png)

现在您可以看到，在我的输出中，记录显示了 11 次，但同一记录一次又一次地重复。我需要的是后面图像中显示的输出。

请在这方面帮助我，因为我是冬眠新手

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-30T08:31:18.730

当您的 hbm 文件中的 id 元素不是 DB 表中的 PK 时，就会发生这种情况。Hibernate 将所有具有相同 ID 的行视为同一个对象。

将您的 id 元素更改为指向 PK 列或使用复合 id 元素以防您的表只有复合主键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T16:16:53.603

您确定表格已正确填写吗？尝试 ：

```
List list = sess1.createQuery("SELECT * FROM Myview").list(); 
```

此外，您是从视图中获取此列表吗？你确定你正确地制作了这个视图吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T16:17:05.683

您应该使用 distinct 关键字过滤相同的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-15T08:39:44.697

您的实体 Myview 必须实现 java.io.Serializable 接口

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-29T10:13:50.307

把Hibernate返回的对象放到一个LinkedHashSet中，返回LinkedHashSet。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-01-08T19:27:19.670

如果您在映射中有关联，请检查是否 `fetch=FetchType.EAGER`. 如果是，则使用其他提取类型或 fetchMode。

# c# - 寻找更好的方法来处理大量参数

> ID：10564842
> 
> 赞同：1
> 
> 时间：2012-05-12T15:04:26.787
> 
> 标签：c#

我已经为游戏实现了一种转向行为形式，并且每次使用编辑器时，设计师应该能够选择（当前）七个参数，无论它们应该是 0、随机还是设定数量，以及在以下情况下后两者，随机应该落在哪个范围内或变量应该得到哪个设定量。设置将保存在文件中，并且必须能够随时加载。

我最终看到的是构造函数和一大堆字段和属性是痛苦的。 *我正在寻找一种更智能的方法来解决这个问题，尤其是在以后添加更多参数时。*

```
public enum SteerType
{
    None,
    Random,
    Variable
}

public IdleSteering(SteerType rotationOnIntervalType, int rotationOnInterval, 
                    SteerType rotationOnCollisionType, int rotationOnCollision,
                    SteerType breakIntervalType, int breakInterval,  
                    SteerType breakTimeType, int breakTime, 
                    SteerType rotationOnBreakType, int rotationOnBreak, 
                    SteerType rangeFromSpawnType, int rangeFromSpawn, 
                    SteerType speedType, int speed)
    {
        _rotationOnIntervalType = rotationOnIntervalType;
        _rotationOnInterval = rotationOnInterval;

        _rotationOnCollisionType = rotationOnCollisionType;
        _rotationOnCollision = rotationOnCollision;

        <...> //And this five more times
    } 
```

以及每个参数的以下块，因此也是七次。

```
private SteerType _rotationOnIntervalType;
    private float _randomRotationOnInterval;
    private float _rotationOnInterval;
    public float RotationOnInterval
    {
        get
        {
            switch (_rotationOnIntervalType)
            {
                case SteerType.None:
                    return 0;
                case SteerType.Random:
                    if (_randomRotationOnInterval.Equals(0))
                        _randomRotationOnInterval =
                            MathHelper.ToRadians((float)(-Static.Random.NextDouble() + Static.Random.NextDouble()) * _rotationOnInterval);
                    return _randomRotationOnInterval;
                case SteerType.Variable:
                    return _rotationOnInterval;
            }
            return 0;
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T15:09:36.463

使用设置对象 - 将这些参数重构为一个类并将该类传入。您可以添加其他参数而不会出现问题。

这称为[参数对象重构](http://www.refactoring.com/catalog/introduceParameterObject.html)，并且已在 BCL 中的多个地方使用 -[`ProcessStartInfo`](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.aspx)类就是其中之一。

这种方法的另一个好处是您可以将设置与使用它们的类分开序列化和反序列化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T15:11:37.383

建议创建一个类来保存 2/paired 值，然后分组为一个集合：

```
public class Steering
{
    public SteerType SteerType{get;set}
    public int Amount{get;set}
}

List<Steering> userSteering = new List<Steering>
  {
     //initialize your list
  };

//pass that list into a constructor. 
```

在您的 IdleSteering 课程中：

```
private List<Steering> steeringValues;

public IdleSteering(List<Steering> userSteering)
{
    steeringValues = userSteering;
}

//we can now use LINQ to find any particular steering value.
int braking = steeringValues.SingleOrDefault(x=>x.SteerType==Random).Amount; 
```

在所有方法之间传递和使用该集合。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-12T15:12:23.807

最明显的解决方案是在参数中寻找模式。我看到的是，你有`SteerType`和`int`代表速度的组合。然后，您可以多次使用这种组合，每次用于几种不同的状态。

鉴于此，您可以将这两件事组合成一个类：

```
public class SteerSettings
{
    public SteerType Type { get; private set; }
    public int Interval { get; private set; }

    public SteerSettings(SteerType type, int interval)
    {
        Type = type;
        Interval = interval;
    }
} 
```

然后将您的构造函数更改为如下所示：

```
public IdleSteering(SteerSettings rotationOn, SteerSettings collision, 
                    SteerSettings break,  SteerSettings breakTime, 
                    SteerSettings rotationOnBreak, SteerSettings rangeFromSpawn, 
                    SteerSettings speed)
    {
        ...
    } 
```

一种更激进的方法是采用它并创建一个代表您的各种状态的新枚举，并在 a 中使用它`Dictionary`来指定每个状态的各种设置。

```
public enum SteerState
{
    RotationOn,
    Collision,
    Break,
    BreakTime,
    RotationOnBreak,
    RangeFromSpawn,
    Speed
}

public IdleSteering(IDictionary<SteerState, SteerSettings> settings)
{
    ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T15:14:57.883

看起来您有一个可能无限长的集合，由不同的参数组成。

为什么不用字典来做，像这样：

```
public IdleSteering(IDictionary<SteerType,int> steerSettings) 
```

然后通过字典键设置和获取值。

？！？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-12T15:19:39.003

我会使用 SteerType 和 RotationValue （以及你的 getter，如果需要的话是虚拟的）进行另一个 Rotation，并将在构造函数中使用默认参数，如下所示（.NET 4.0 req'ed）：

```
public IdleSteering(Rotation interval=null, Rotation collission=null)
    {

        _rotationOnIntervalType = rotationOnIntervalType??new Rotation(...);
        _rotationOnInterval = rotationOnInterval??new Rotation(...);
        ...
    } 
```

那么您只需致电：

```
var idleSteering = new IdleSteering(); 
```

当然，如果可以默认属性...

# android - Android 应用程序无法连接到 2 台以上的设备

> ID：10564844
> 
> 赞同：-1
> 
> 时间：2012-05-12T15:04:39.797
> 
> 标签：android, bluetooth

我正在创建一个连接 4 个设备的应用程序。其中一个充当服务器，另外三个充当客户端。服务器还充当客户端。这是一个纸牌游戏。我给了它 7 个 UUID。当我创建服务器时，3 个客户端中的 2 个能够连接，但是当第三个客户端加入时，应用程序崩溃。这是第三个设备尝试连接时 logcat 的一部分。

```
 05-12 15:41:55.453: E/ConnectionService(10793): getConnectedSocket : 503c7432-bc23-11de-8a39-0800200c9a66
05-12 15:41:55.463: I/net.clc.bt.ConnectionService(10793): IOException in getConnectedSocket
05-12 15:41:55.463: I/net.clc.bt.ConnectionService(10793): java.io.IOException: Service discovery failed
05-12 15:41:55.463: I/net.clc.bt.ConnectionService(10793):  at android.bluetooth.BluetoothSocket$SdpHelper.doSdp(BluetoothSocket.java:377)
05-12 15:41:55.463: I/net.clc.bt.ConnectionService(10793):  at android.bluetooth.BluetoothSocket.connect(BluetoothSocket.java:201)
05-12 15:41:55.463: I/net.clc.bt.ConnectionService(10793):  at net.clc.bt.ConnectionService.getConnectedSocket(ConnectionService.java:191)
05-12 15:41:55.463: I/net.clc.bt.ConnectionService(10793):  at net.clc.bt.ConnectionService.access$5(ConnectionService.java:185)
05-12 15:41:55.463: I/net.clc.bt.ConnectionService(10793):  at net.clc.bt.ConnectionService$1.connect(ConnectionService.java:225)
05-12 15:41:55.463: I/net.clc.bt.ConnectionService(10793):  at net.clc.bt.Connection.connect(Connection.java:191)
05-12 15:41:55.463: I/net.clc.bt.ConnectionService(10793):  at net.dillen.satat.Satat.onActivityResult(Satat.java:308)
05-12 15:41:55.463: I/net.clc.bt.ConnectionService(10793):  at android.app.Activity.dispatchActivityResult(Activity.java:3835)
05-12 15:41:55.463: I/net.clc.bt.ConnectionService(10793):  at android.app.ActivityThread.deliverResults(ActivityThread.java:3332)
05-12 15:41:55.463: I/net.clc.bt.ConnectionService(10793):  at android.app.ActivityThread.handleSendResult(ActivityThread.java:3378)
05-12 15:41:55.463: I/net.clc.bt.ConnectionService(10793):  at android.app.ActivityThread.access$2700(ActivityThread.java:123)
05-12 15:41:55.463: I/net.clc.bt.ConnectionService(10793):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1900)
05-12 15:41:55.463: I/net.clc.bt.ConnectionService(10793):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-12 15:41:55.463: I/net.clc.bt.ConnectionService(10793):  at android.os.Looper.loop(Looper.java:123)
05-12 15:41:55.463: I/net.clc.bt.ConnectionService(10793):  at android.app.ActivityThread.main(ActivityThread.java:4370)
05-12 15:41:55.463: I/net.clc.bt.ConnectionService(10793):  at java.lang.reflect.Method.invokeNative(Native Method)
05-12 15:41:55.463: I/net.clc.bt.ConnectionService(10793):  at java.lang.reflect.Method.invoke(Method.java:521)
05-12 15:41:55.463: I/net.clc.bt.ConnectionService(10793):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-12 15:41:55.463: I/net.clc.bt.ConnectionService(10793):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-12 15:41:55.463: I/net.clc.bt.ConnectionService(10793):  at dalvik.system.NativeStart.main(Native Method)

minSdkVersion="7" 
device OS = 2.3.3 , 2.3.3, 2.1.1, 2.1.1 
```

操作系统版本似乎没有出现问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T15:32:48.153

我对您提供的堆栈跟踪没有评论，但是当您尝试添加第三个对等方时出现问题的事实让我怀疑您遇到了核心蓝牙限制。让我解释。

蓝牙通信发生在具有 1 个主设备（设置时间）和多达 7 个从设备的微微网中。一个设备参与多个微微网是棘手且低效的，因为它必须在不同微微网的时钟周期之间来回跳转。根据我的经验，一个设备只能是 2 个微微网中的从属设备，因此当您尝试进入第三个微微网时它会失败（当然，它应该比这更优雅和更有信息地失败）。

一般的解决方案是将一台设备指定为微微网主设备，所有其他设备应仅连接到这台设备。在实践中，我只在允许比 Android 更多控制的系统上尝试过这个（例如，我可以显式控制主从控制）所以我​​不能说这将如何在 Android 上工作，但你应该开始根据经验，启动连接的设备将是主设备。

或者我可能会过度思考整个事情。我发现 Android 上的蓝牙堆栈非常有问题，所以你可能只是遇到了一个错误。顺便说一句，我假设您测试过的四款手机来自不止一家制造商？

# ios - NSInvalidArgument 错误 - 来自 CIImage 的 CGImageRef

> ID：10564853
> 
> 赞同：0
> 
> 时间：2012-05-12T15:05:40.927
> 
> 标签：ios, core-image, nserror, cgimageref

我在两天前运行良好的某些代码上遇到错误。错误是：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFType extent]: unrecognized selector sent to instance 0x1bc8f0' 
```

它指向 main.m 上的这一行：

```
return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])); 
```

使用日志查看我的代码到达的位置似乎这条线引发了错误：

```
greySave = [context createCGImage:greyscaleImage fromRect:[greyscaleImage extent]]; 
```

graySave 是一个 CGImageRef，在我的视图控制器开始时声明。获取 CIImage 输出并将其转换为 CGImageRef 以进行保存很简单：

```
desaturate = [CIFilter filterWithName:@"CIColorMonochrome" keysAndValues:kCIInputImageKey, colourSave, @"inputIntensity", [NSNumber numberWithFloat:0.00], nil];

greyscaleImage = [desaturate valueForKey:@"outputImage"];

greySave = [context createCGImage:greyscaleImage fromRect:[greyscaleImage extent]]; 
```

我认为（尽管不明白为什么）可能导致问题的唯一更改是添加一个额外的条件语句，该语句将应用第二个过滤器是用户希望这样做：

```
if ([_alphaButtonSavedState isEqualToString:@"ON"]) {
             NSLog(@"user does want alpha on greyscale");
            //user wants alpha mask also  
        } else {
             NSLog(@"user does not want alpha on greyscale");
            //convert to CGImage for saving
            greySave = [context createCGImage:greyscaleImage fromRect:[greyscaleImage extent]];
             NSLog(@"greySave cgimage created");

            //save the grey image
            [library writeImageToSavedPhotosAlbum:greySave metadata:[greyscaleImage properties] completionBlock:^(NSURL *assetURL, NSError *error){
                if (error) {
                    NSLog(@"ERROR in greyscale save: %@", error);
                } else
                {
                    NSLog(@"SUCCESS in greyscale save");
                    //in here we'll put a nice animation or something
                    //CGImageRelease(greyscaleImage);
                }
            }]; 
```

任何想法为什么会发生这种情况？

谢谢。

编辑：

这是整个代码块，以防万一。

```
[stillImage captureStillImageAsynchronouslyFromConnection:videoConnection completionHandler:^(CMSampleBufferRef imageSampleBuffer, NSError *error) {

    NSData *imageData = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageSampleBuffer];  //get the raw image data from the session
    UIImage *startImage = [[UIImage alloc] initWithData:imageData];  //create a UIImage from that image data, let's us work with it

    //resizing of image to take place before anything else
    UIImage *image = [UIImage imageWithImage:startImage scaledToSize:_exportSSize];  //scale the image so it's shortest side is the size given in prefs

    NSLog(@"image width post scale: %g", image.size.width);
    NSLog(@"image height post scale is: %g", image.size.height);

    //change the context to render using cpu, so on app exit renders get completed
    context = [CIContext contextWithOptions: [NSDictionary dictionaryWithObject:[NSNumber numberWithBool:YES] forKey:kCIContextUseSoftwareRenderer]];

    //new crop testing - not using CIImage - seems to work, just need to sort out crop region
    CGRect cropRect = CGRectMake(0, 0, _exportSize, _exportSize);
    UIImage *cropper = [self imageByCropping:image toRect:cropRect];

    //the colour image is always saved so create a CGImage to save later
    colourSave = [cropper CGImage];
    NSLog(@"coloursave image created");

    //now we convert and create CGImages based upon chosen export options
    if ([_greyButtonSavedState isEqualToString:@"ON"]) {
        NSLog(@"inside the greyscale conditional");
        //user wants greyscale image
        //create a CIMonochrome filter 
        desaturate = [CIFilter filterWithName:@"CIColorMonochrome" keysAndValues:kCIInputImageKey, colourSave, @"inputIntensity", [NSNumber numberWithFloat:0.00], nil];
         NSLog(@"desat ci filter created");
        //get the output
        greyscaleImage = [desaturate valueForKey:@"outputImage"];
         NSLog(@"dest output image created");

        //if the user wants to add the alpha
        if ([_alphaButtonSavedState isEqualToString:@"ON"]) {
             NSLog(@"user does want alpha on greyscale");
            //user wants alpha mask also  
        } else {
             NSLog(@"user does not want alpha on greyscale");
            //convert to CGImage for saving
            greySave = [context createCGImage:greyscaleImage fromRect:[greyscaleImage extent]];
             NSLog(@"greySave cgimage created");

            //save the grey image
            [library writeImageToSavedPhotosAlbum:greySave metadata:[greyscaleImage properties] completionBlock:^(NSURL *assetURL, NSError *error){
                if (error) {
                    NSLog(@"ERROR in greyscale save: %@", error);
                } else
                {
                    NSLog(@"SUCCESS in greyscale save");
                    //in here we'll put a nice animation or something
                }
            }];
        }
    } 
```

-- 这里还有两个条件，目前都是空的

-- 然后保存 colourSave 图像，这很好用。

-- 然后方法结束。

还有一件事，这就是我裁剪图像的方式。以下方法返回的图像是我从中创建 CIImage 的内容：

```
-(UIImage *)imageByCropping:(UIImage *)imageToCrop toRect:(CGRect)rect 
```

{ CGImageRef imageRef = CGImageCreateWithImageInRect([imageToCrop CGImage], rect);

```
UIImage *cropped = [UIImage imageWithCGImage:imageRef];
CGImageRelease(imageRef);

return cropped; 
```

}

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-13T07:52:05.767

Adding the answer in case it helps anyone else.

I was passing a UIImage into the CIFilter, this was causing the problem. Converting the UIImage into a CIImage and passing that in resolved the issue.

# serialization - Fluent Nhibernate 实体列表序列化错误

> ID：10564859
> 
> 赞同：0
> 
> 时间：2012-05-12T15:06:42.660
> 
> 标签：serialization, error-handling, fluent-nhibernate, entity

我正在尝试在 asp.net 页面的视图状态中保存一些流利的 nhibernate 实体。\ 实体类已经是带有 [Serializable] 属性的标记，但我仍然在页面上收到错误：

```
Sys.WebForms.PageRequestManagerServerErrorException: Sys.WebForms.PageRequestManagerServerErrorException: Error serializing value 'System.Collections.Generic.List`1 
```

这个错误是由 nhibernate 的代理类引起的吗？有任何想法吗？谢谢。

PS：添加了一些代码

```
[Serializable]
public class ExcludedGroup : BaseEntity
{
    public virtual int ID { get; set; }
    public virtual string Name { get; set; }
    public virtual bool IsMatch { get; set; }
    public virtual bool CalculatedField { get; set; }
}

public ExcludedGroupMap()
{
    Table("Groups");

    Id(x => x.ID).GeneratedBy.Identity();
    Map(x => x.Name);
    Map(x => x.IsMatch);
    Map(x => x.CalculatedField).Not.Update();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:14:46.980

错误在基实体类中。所有类的层次结构都应该用可序列化的属性来标记。

# coq - 错误：在 Lion 10.7 下链接 ocaml 项目时不支持动态链接

> ID：10564864
> 
> 赞同：1
> 
> 时间：2012-05-12T15:07:32.287
> 
> 标签：coq, ocamlbuild

我希望这是我的问题的正确位置。实际上我是 coq 用户，我正在尝试在“Mac OS X Lion 10.7.4”下使用 ocaml 实现一种新策略。我已经安装了我可能需要的所有库。编译我的 ocaml 文件并尝试在 coq 中导入它时（我使用 Proofgenral 和 Aquamacs）我收到此错误错误：不支持动态链接。经过长时间的搜索，我发现这是链接库的问题，但我还没有找到解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T05:59:29.363

您可以尝试[构建一个新的 coqtop](http://manpages.ubuntu.com/manpages/hardy/man1/coqmktop.1.html)。

# java - java字符串分隔符，将分隔符保留在令牌中

> ID：10564867
> 
> 赞同：1
> 
> 时间：2012-05-12T15:07:54.407
> 
> 标签：java, string, delimiter

我试图拆分一个字符串，但将分隔符保留在下一个标记的开头（如果可能的话）

示例：我正在尝试将字符串拆分`F120LF120L`为

```
F120
L
F120
L 
```

我试过了

```
StringTokenizer st = new StringTokenizer(str, "F,L"); 
```

但这只是返回

```
120
120 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T15:16:13.030

[`split()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split(java.lang.String))出于所有实际目的使用, 已`StringTokenizer`被[弃用](https://stackoverflow.com/questions/6983856/why-is-stringtokenizer-deprecated)（它仍然存在只是为了向后兼容）。这将起作用：

```
String delimiter = "L";
String str = "F120LF120L";
String[] splitted = str.split(delimiter);

for (String s : splitted) {
    System.out.println(s);
    System.out.println(delimiter);
}

> F120
> L
> F120
> L 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T15:18:01.913

从[文档](http://docs.oracle.com/javase/6/docs/api/java/util/StringTokenizer.html)中，您可以使用`StringTokenizer st = new StringTokenizer(str, "L", true);`最后一个参数是一个布尔值，它指定也必须返回分隔符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T17:02:45.933

用蛮力怎么办？

```
String del = "L";
String str = "F120LLF120LLLLF12L";
int i = 0;

while (true) {
    i = str.indexOf(del, i);
    if (i == -1) break;
    String a = str.substring(0, i);
    String b = str.substring(i + del.length());
    str = a + " " + del;
    str += b.startsWith(del) || b.length() == 0 ? b : " " + b;
    i = a.length() + del.length() + 1;
}

System.out.println(str);
// Will print: F120 L L F120 L L L L F12 L 
```

# python - 在 imap 连接期间 PyQt GUI 冻结 (imaplib)

> ID：10564868
> 
> 赞同：0
> 
> 时间：2012-05-12T15:07:56.857
> 
> 标签：python, user-interface, pyqt, freeze, imaplib

我用 PyQt GUI 编写了一个 python 程序，它使用 imaplib 检查我是否有新邮件，下面是部分代码：

```
def getAccountStatus(self, accountIndex):
   # some not interesting code
   mail = imaplib.IMAP4_SSL(currentHost)
   # some not interesting code
   mail.login('user', 'pass')
   mailCount = int(mail.select("INBOX", True)[1][0])
   # some not interesting code
   serverResponse, data = mail.uid('search', None, 'UNSEEN')
   # some not interesting code
   unseenUidList = data[0].split()
   # some not interesting code
   self.emailAccountsWidget.setText("<BR>".join(self.accountStatusString))
   return [mailCount, len(unseenUidList)] 
```

问题是，在从 imap 服务器检索数据的过程中，GUI 冻结，如果我没有显式调用窗口的重绘事件，即使 TextEdit (self.emailAccountsWidget) 也不会更新其文本。有什么办法可以避免这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T15:48:05.927

这是 Qt 中预期和记录的行为。解决方案是将工作移出 GUI 线程，例如通过使用`QThread`子类。

如果您想了解更多信息，您应该阅读：[Qt 线程基础知识](http://doc.trolltech.com/4.7/thread-basics.html)

# jquery - jquery验证器下拉菜单验证在选择并提交后不断添加必填字段

> ID：10564870
> 
> 赞同：0
> 
> 时间：2012-05-12T15:08:06.840
> 
> 标签：jquery, html, jquery-validate

我在 HTML 中创建了一个表单和调查，用户将在其中填写信息并选择下拉菜单项作为问题的答案。

问题是在没有选择所需的下拉菜单后，系统会提示用户该字段是必需的。如果他们现在选择该下拉菜单并点击提交，则会打印另一个所需的帖子，并且表格不会发送到感谢页面。如果您继续点击提交，它只会一个接一个地发布必填字段。下面是我服务器上表格的链接。

**表格链接：http:** [//amckeedesignportfolio.com/eLearningModule/newForm.php](http://amckeedesignportfolio.com/eLearningModule/newForm.php)

**这是我的 HTML**

```
<h3>
  1\. How often do you have a patient who resists oral care? 
  <span style="padding-left:25px;"></span>
</h3>
<br/>
<select name="question1" class="surveySelection1_class">
  <option value=""selected="selected">--select--</option>
  <option value="Never">Never</option>
  <option value="Rarely">Rarely</option>
  <option value="Sometimes">Sometimes</option>
  <option value="Always">Always</option>
</select>

<h3>
  2\. How often do you have a patient bite on oral swabs with oral care? 
  <span style="padding-left:25px;"></span>
</h3>
<select name="question2" class="surveySelection2_class">
  <option value=""selected="selected">--select--</option>
  <option value="Never">Never</option>
  <option value="Rarely">Rarely</option>
  <option value="Sometimes">Sometimes</option>
  <option value="Always">Always</option>
</select> 
```

**这是 JAVASCRIPT**

```
<script type="text/javascript">
$(document).ready(function(){
  // validate signup form on keyup and submit
  $("#contactForm").validate({
    rules: {
      fName: "required",
      lName: "required",
      telephone: "required",
      email: {
        required: true,
        email: true
      },
      telephone: {
        required: true,
        phoneUS: true
      },
      position      : "required",
      hospital      : "required",
      hospitalCity  : "required",
      hospitalState : "required",
      floor         : "required",
      experience    : "required",
      question1     : "required",
      question2     : "required",
      question3     : "required",
      question4     : "required",
      question5     : "required",
      question6     : "required",
      question7     : "required",
      question8     : "required",
      question9     : "required",
      question10    : "required",
      question11    : "required",
    },

    messages: {
      fName        : "Please enter your firstname.",
      lName        : "Please enter your lastname.",
      telephone    : "Please enter a valid telephone number.",
      email        : "Please specify a valid email address.",
      position     : "Please enter your current position.",
      hospitalCity : "Please enter your current hospital.",
      floor        : "Please enter the current floor or area you work.",
    }
  });

  /* state validation*/
  $validator.addMethod(
    "state_class",
    function(value, element) {
      return this.optional(element) || ( value.indexOf("") == -1);
    },
    "Please select a state."); 

  /* experience validation*/
  $validator.addMethod(
    "selection_class",
    function(value, element) {
      return this.optional(element) || ( value.indexOf("") == -1);
    },
    "Please share your experience with us."); 

  /* question1 validation*/
  $validator.addMethod(
    "surveySelection1_class",
    function(value, element) {
      return this.optional(element) || ( value.indexOf("") == -1);
    },
    "Please choose an answer."); 

  /* question2 validation*/
  $validator.addMethod(
    "surveySelection2_class",
    function(value, element) {
      return this.optional(element) || ( value.indexOf("") == -1);
    },
    "Please choose an answer.");

  /* question3 validation*/
  $validator.addMethod(
    "surveySelection3_class",
    function(value, element) {
      return this.optional(element) || ( value.indexOf("") == -1);
    },
    "Please choose an answer.");

  /* question4 validation*/
  $validator.addMethod(
    "surveySelection4_class",
    function(value, element) {
      return this.optional(element) || ( value.indexOf("") == -1);
    },
    "Please choose an answer.");

  /* question5 validation*/
  $validator.addMethod(
    "surveySelection5_class",
    function(value, element) {
      return this.optional(element) || ( value.indexOf("") == -1);
    },
    "Please choose an answer.");

  /* question6 validation*/
  $validator.addMethod(
    "surveySelection6_class",
    function(value, element) {
      return this.optional(element) || ( value.indexOf("") == -1);
    },
    "Please choose an answer.");

  /* question7 validation*/
  $validator.addMethod(
    "surveySelection7_class",
    function(value, element) {
      return this.optional(element) || ( value.indexOf("") == -1);
    },
    "Please choose an answer.");

  /* question8 validation*/
  $validator.addMethod(
    "surveySelection8_class",
    function(value, element) {
      return this.optional(element) || ( value.indexOf("") == -1);
    },
    "Please choose an answer.");

  /* question9 validation*/
  $validator.addMethod(
    "surveySelection9_class",
    function(value, element) {
      return this.optional(element) || ( value.indexOf("") == -1);
    },
    "Please choose an answer.");

  /* question10 validation*/
  $validator.addMethod(
    "surveySelection10_class",
    function(value, element) {
      return this.optional(element) || ( value.indexOf("") == -1);
    },
    "Please choose an answer.");

  /* question11 validation*/
  $validator.addMethod(
    "surveySelection11_class",
    function(value, element) {
      return this.optional(element) || ( value.indexOf("") == -1);
    },
    "Please choose an answer.");
}); 
</script> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-12T15:58:36.670

看来您已经编写了很多代码来验证您的表单...使用 jquery-validation 插件验证选择非常简单。您必须确保有一个带有空值的选项。然后您只需将“必需”类添加到选择中。

```
<select id="mySelect" class="required">
  <option value="">--select--</option>
  <option value="value1">option 1</option>
  <option value="value2">option 2</option>
  <option value="value3">option 3</option>
</select> 
```

请参阅示例：[选择验证示例](http://jquery.bassistance.de/validate/demo/multipart/)

尝试像这样进行验证，它应该可以解决您的问题。

# .htaccess - mod_rewrite 如果存在则返回文件，如果不存在则返回 CMS

> ID：10564872
> 
> 赞同：0
> 
> 时间：2012-05-12T15:08:43.770
> 
> 标签：.htaccess, mod-rewrite

我正在尝试`mod_rewrite`在内容目录中查找文件并在找不到它时调用我的 CMS，但我无法让它工作。我在这里尝试了几个类似问题的答案，但似乎没有一个能正常工作。

我的`.htaccess`文件如下所示：

```
RewriteEngine on
RewriteBase /

RewriteCond %{DOCUMENT_ROOT}/content/$1 -f
RewriteRule ^(.*)$ %{DOCUMENT_ROOT}/content/$1 [QSA,L]

RewriteRule ^.*$ index.php [QSA,L] 
```

我认为将`[L]`后缀添加到我的第一条规则意味着它不会执行进一步的规则，但无论文件是否存在，它似乎都会调用我的 CMS。如果我注释掉第二条规则，则会返回文件，但显然不是 CMS。我也尝试添加

```
RewriteCond %{DOCUMENT_ROOT}/content/$1 !-f 
```

在第二条规则之前，但它似乎没有任何区别。

我还想检查目录是否存在（即`-d`），但我还没有放入该代码，因为我什至无法让文件工作！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T17:55:31.643

```
RewriteEngine on
RewriteBase /

RewriteRule ^content/ - [L]

RewriteCond %{DOCUMENT_ROOT}/content/$1 -f [OR]
RewriteCond %{DOCUMENT_ROOT}/content/$1 -d
RewriteRule ^(.*)$ /content/$1 [L]

RewriteRule ^.*$ index.php [QSA,L] 
```

# ruby-on-rails - 即使安装了正确的 gem，rails 中的 NoMethodError

> ID：10564873
> 
> 赞同：3
> 
> 时间：2012-05-12T15:08:45.337
> 
> 标签：ruby-on-rails, ruby, string, rubygems, nomethoderror

在我的 gemfile 中，我有`gem 'stringex'`. 运行后`bundle install`，我添加了一个路径助手，并使用了来自 stringex 的方法。我应该能够`to_url`直接在字符串上使用，就像 stringex 自述文件中的示例：`"simple English".to_url => "simple-english"`。

但是，当我尝试在路径助手中的字符串上使用方法 .to_url 时，我得到：

`undefined method 'to_url' for "fake title":String`

我的辅助方法看起来像：

```
module PostsHelper
  def post_path(post)
      "/posts/#{post.id}/#{post.title.to_url}"
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T19:07:09.587

您可以尝试的一件事是运行`bundle exec irb`，然后尝试`require "stringex"`. 如果您不能正确地要求 gem，那么它就没有安装在包中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-10T18:31:35.233

您将需要添加`require 'stringex'`到文件的顶部`posts_helper.rb`。

# c# - 将依赖关系从 BusinessLogic 层注入到 DataAccessLayer 的外观

> ID：10564876
> 
> 赞同：0
> 
> 时间：2012-05-12T15:09:18.003
> 
> 标签：c#, class

我的 WCF 应用程序从 UI 接收 RequestContext，并且在从 DB 获取数据之前我有三层。即BusinessLogicLayer、FacadeLayer和DataAccessLayer。我在每一层都有不同的类来处理那个 RequestContext 对象。我通过其构造函数将 RequestContext 对象传递给每个层的类，例如`new Facade(RequestContext rqstContext)`

由于我有具体的类来接收对象，最好的做法是有类似的东西`new Facade(IRequestContext rqstContext)`，我的 RequestContext 将实现 IRequestContext/或任何抽象类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T15:20:17.473

您将 BusinessLogicLayer、FacadeLayer 和 DataAccessLayer 与前端是 Web 应用程序这一事实相结合？这违背了分层的目的。最佳实践是抽象的事实，即您的前端是 Web 并仅传递您需要的 RequestContext 属性的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T05:11:50.120

不要混淆 OO（面向对象）和 SO（面向服务）。根据您的解释，请求上下文类似乎是一个 DTO（数据传输对象）。如果您的实体纯粹用于传输数据，则无需对其进行重构和接口。

# playframework - 在播放结果上设置 HTTP 标头（如过期） - 以及如何处理 ETag？

> ID：10564889
> 
> 赞同：3
> 
> 时间：2012-05-12T15:10:54.780
> 
> 标签：playframework

如何在 play 2.0 的结果对象中设置 Http 标头？

我想设置缓存控制（过期）ala this：Cache-Control PUBLIC, max-age=2592000

检查 ET 标签并返回正确响应的最佳方法是什么？

一直在看这里，但什么也没看到： [http ://www.playframework.org/documentation/2.0.1/JavaActions](http://www.playframework.org/documentation/2.0.1/JavaActions)

在此先感谢 thomas vervik

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T17:02:21.973

您需要查看 JavaResponse 部分...

[http://www.playframework.org/documentation/2.0.1/JavaResponse](http://www.playframework.org/documentation/2.0.1/JavaResponse)

从文档中设置缓存控制的一个例子是

```
public static Result index() {
  response().setContentType("text/html");
  response().setHeader(CACHE_CONTROL, "max-age=3600");
  response().setHeader(ETAG, "xxx");
  return ok("<h1>Hello World!</h1>");
} 
```

# c# - 如何使用 EF 4.3.1 映射列名？

> ID：10564895
> 
> 赞同：1
> 
> 时间：2012-05-12T15:12:03.627
> 
> 标签：c#, asp.net-mvc

我遇到了简单映射的问题（使用 EF 4.3.1 - 代码优先方法）

```
public class Someclass
    {
        public virtual int ID { get; set; }
        public virtual string Name { get; set; }
    } 
```

并使用 int **ID**和 varchar **someclass_name表****someclass**。现在我想做的是用**someclass_name映射****名称**

 ******```
 modelBuilder.Entity<Someclass>()
             .Property(r => r.Name).HasColumnName("someclass_name"); 
```

但是 id 不起作用并且异常说：“自创建数据库以来，上下文已更改。考虑使用 Code First 迁移来更新数据库 (http://go.microsoft.com/fwlink/?LinkId=238269)。”

我也试过这样做：

```
modelBuilder.Configurations.Add(new SomeclassMap());

public class SomeclassMap : EntityTypeConfiguration<Someclass>
    {
        public SomeclassMap() {
          //  this.Property(r => r.Name).HasColumnName("someclass_name");
            Map(r =>
            {
                Property(m => m.Name).HasColumnName("restaurant_name");
            });
        }
    } 
```

有人可以告诉我我做错了什么吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T15:19:49.620

您将需要使用 EF 4.3 的迁移实用程序。该错误通知您模型在数据库构建后已更改并且需要更新。查看此链接：http: [//blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T16:56:22.623

不确定它是否会避免迁移通知，但您可以尝试将 [Column("someclass_name")] 添加到您的 Name 属性。

请参阅名为[将属性映射到具有不同名称的列的部分](http://msdn.microsoft.com/en-us/library/gg197525%28VS.103%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T08:41:15.930

我安装了 EF 5 并遇到了同样的问题。我“发现”的是

> > [Column("Name")]
> > 公共字符串 Name1 { get; 放; }

表示**Name1**指向**DB中的字段“** **Name** ” 。所以我没有更改字段名称，我在我的类中更改了属性名称，我让 EF 知道这个“Name1”指向“Name”。这是一个有点奇怪的方法，但它是这样工作的。DB 可能会在某处写下 DB 哈希并检查它是否更改。但我还不知道在哪里可以找到它。

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T11:02:26.557

我找到了解决方案：

```
Database.SetInitializer<SomeDB>(null); 
```

我们需要打开**数据库上下文检查**。********

# command-line - 从另一个目录列出目录

> ID：10564896
> 
> 赞同：1
> 
> 时间：2012-05-12T15:12:14.530
> 
> 标签：command-line, batch-file, windows-vista, cmd

所以我目前正在尝试`dir`在我的目录中使用该命令`c:/`，但是，我不想查看我的目录中的`c:/`内容，我想从子目录中查看某些内容，例如`/users`等等。我目前正在运行 Windows Vista。

我曾尝试在命令 ( ) 上使用该`help`命令，但它没有说明我正在尝试做什么。我最终试图这样做，这样我就不必做以下事情：`dir``dir /h`

```
cd /the/directory/i/want
dir
cd / 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T15:20:42.807

如果您的当前目录是 C:\ 并且您想列出 c:\temp 的内容，这将在 windows XP cmd 实用程序上列出 c:\temp。

目录 c:\temp

# html - 位置：相对，内联 VS .css 文件（IE7）

> ID：10564903
> 
> 赞同：0
> 
> 时间：2012-05-12T15:12:49.720
> 
> 标签：html, css, internet-explorer, internet-explorer-7

我在 IE7 中遇到了一些非常奇怪的行为。我想定位我的`<body>`-tag 相对位置。

如果我输入

```
body { position: relative; } 
```

在我的 css 文件中，我的菜单（位置：绝对）不起作用。但如果我使用

```
<body style="position: relative;"> 
```

有用。这怎么可能有所作为？没有 javascript 正在删除 css 属性或类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T21:20:13.220

对此感到好奇，但就问题而言，@thirtydot 的评论似乎是正确的：答案是没有区别。我已经创建了[这个在 IE7 中按预期呈现的 jsfiddle](http://jsfiddle.net/3EWeX/2/)（老实说：我在 IE9 中使用 IE7 模式对其进行了测试）。

这是代码：

```
<html><head></head>
    <body>
        <div class="menu">HOME | PRODUCTS | ABOUT</div>
        <p>Testing!</p><p>Testing!</p><p>Testing!</p><p>Testing!</p>
    </body>
</html> 
```

相关的 CSS，用一些颜色来可视化事物：

```
html {
    background-color: green;
}

div.menu {
    border: 1px solid blue;
    background-color: silver;
    position: absolute;
    right: 10px;
    top: 10px;
}

body {
    background-color: pink; 
    width: 90%;
    position: relative;
    left: 10px;
    top: 10px;
} 
```

正如预期的那样给了我：

![来自 jsfiddle 的屏幕截图](../Images/dd7585971caa2e19cf8c50c9066ad4bc.png)

对我来说，它在 IE9 和 FF 中呈现相似。

# javascript - Xml 解析器/从 XML 节点列表创建 XML DOM 文档

> ID：10564904
> 
> 赞同：0
> 
> 时间：2012-05-12T15:12:59.193
> 
> 标签：javascript, dom

我正在努力找出如何在 JavaScript 中构建一个全新的 DOM 文档，添加它并从我已经拥有的 DOM 节点列表中加载它。我发现的只是愚蠢的循环方式，但我很确定这样的架构有适当的 API。但是我一个也找不到！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-12T17:42:08.477

尝试这样的事情：

```
// Define a base XML document.
var xmlString = "<root>" +
    "<node id='1'>One</node>" +
    "<node id='2'>Two</node>" +
    "<node id='3'>Three</node>" +
    "<node id='4'>Four</node>" +
    "</root>";

// Use jQuery to parse it to a DOM document in a cross-browser fashion.
​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​var xmlDoc = $.parseXML(xmlString);

// Grab some elements that we will write to a new document.
var node1 = xmlDoc.getElementById("1");
var node3 = xmlDoc.getElementById("3");

// Use jQuery to create the new document, then get a reference
// to the root element.
var newXmlDoc = $.parseXML("<newRoot></newRoot>");
var newRoot = newXmlDoc.getElementsByTagName("newRoot")[0];

// Clone the two elements into the new document.
newRoot.appendChild(node1.cloneNode(true));
newRoot.appendChild(node3.cloneNode(true));

// This will write out the text content of the two nodes
// we have cloned into the new document.
// Should write: "OneThree".
document.write(newXmlDoc.documentElement.textContent); 
```

这是在 jsFiddle 中运行的代码：http: [//jsfiddle.net/sajaraki/JnSzK/](http://jsfiddle.net/sajaraki/JnSzK/)

它结合使用 JavaScript XML DOM 实现和 jQuery 来解决加载和创建 XML 文档时所涉及的浏览器不兼容问题。

# javascript - 如果修改原型有什么不好的副作用吗？

> ID：10564907
> 
> 赞同：2
> 
> 时间：2012-05-12T15:13:27.790
> 
> 标签：javascript, node.js

我正在尝试编写nodejs的路由框架，我需要为ServerRequest和ServerResponse添加一些帮助方法。我注意到快递已经改变了从修改原型到

快递/response.js

```
var res = module.exports = {
  __proto__: http.ServerResponse.prototype
};

res.redirect = function (url) {
  ...
} 
```

和 express/middlewares.js

```
expressInit = function(req, res, next) {
  // ...
  res.__proto__ = app.response;
  next()
} 
```

但在我的框架中，我只是喜欢做简单的事情：

```
http.ServerResponse.prototype.redirect = function(url) {
  ...
} 
```

我不知道是否有什么我不知道为什么要更改覆盖的样式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:15:09.453

请注意，[`__proto__`伪属性是非标准的，](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/Proto)因此它的使用从来都不是真正合适的；此外，根据 Mozilla 开发者网络 (MDN)，它现在被视为“已弃用”。

然而，[`prototype`函数的属性](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/prototype)是语言的标准部分，它的使用总是安全的。

永远使用`MyFunction.prototype`，永远不要使用`myObject.__proto__`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-08T00:03:20.803

以 Express 方式执行此操作只会修改该 ServerResponse 实例的响应对象。您的方法会将重定向功能全局添加到节点进程中任何服务器创建的每个响应中。

如果您在节点进程中运行多个框架和服务器，或者想与可能这样做的其他人共享您的代码，这可能是一个问题，因为另一个框架也可能添加重定向功能并且会发生冲突。通常，修改您不拥有的对象被认为是不好的风格。

Express 方式确实会带来[性能损失](https://stackoverflow.com/a/24833201/563811)，但可能会以任何其他方式带来更糟糕的性能损失。

# java - 如何使用 android 应用程序发布推文？

> ID：10564910
> 
> 赞同：0
> 
> 时间：2012-05-12T15:14:02.373
> 
> 标签：java, android, exception, twitter, twitter4j

我正在开发一个安卓应用程序。我正在寻找教如何在 android 应用程序中发送推文的教程。我找到了[这些教程。](http://blog.doityourselfandroid.com/2011/02/13/guide-to-integrating-twitter-android-application//)我复制了所有代码并更改了 consumer_key 和 consumer_secret 但我有以下异常：

OAuthRequestTokenTask(17191)：在 java.util.concurrent.ThreadPoolExecutor$Worker.run (ThreadPoolExecutor.java:581)

如果有人知道其他可行的方法并且更好，请告诉我，我不想要分享按钮，我只想发推文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T20:06:40.700

您是否在将示例放入您正在制作的应用程序之前尝试过该示例？它在那里运作良好吗？如果是这样，您的应用可能会尝试同时运行多个请求，从而导致此异常。

# c# - 提醒数组的内容

> ID：10564912
> 
> 赞同：-2
> 
> 时间：2012-05-12T15:14:12.563
> 
> 标签：c#

我有一个二维数组，我想在带有表格的消息框中显示它的内容。我会用`MessageBox.Show()`. 当我使用它时，它只是给了我整个事情的语法。

如何将其放入消息框中，如何将其放入表格中？

第一行是随机数，第二行是平方根。

```
static void Main(string[] args)
{

     double[,] numbersArray = {{4,2},
                               {64,8},
                               {81,9},
                               {24,4.8},
                               {9,3},
                               {100,10},
                               {43,6.5},
                               {8,2.8},
                               {45,6.7},
                               {16,4}}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T17:51:22.200

循环遍历这些内容并将所有数字设为 1 字符串或创建您自己的警报框。

# c# - 在 Microsoft Surface Window 上模拟触摸输入

> ID：10564914
> 
> 赞同：2
> 
> 时间：2012-05-12T15:14:46.350
> 
> 标签：c#, touch, device, pixelsense, inkcanvas

我正在尝试使用 Anoto-Pen 作为`TouchDevice`with `SurfaceInkCanvas`。
笔使用打印在一张纸上的坐标系来推导出它的位置，然后这个位置数据被发送到我的应用程序。在那里，我尝试`TouchInput`通过子类`TouchDevice`化并将发送位置数据和事件转换为 .NET Touch-Events 使用`TouchDevice.ReportDown();`,`TouchDevice.ReportMove()`等来转换它`ScatterViewItems`。到目前为止，四处移动和处理按钮“点击”有效。

现在的问题是，当我尝试写上`InkCanvas`唯一的点时。观察触发的事件后，似乎`InkCanvas`没有收到`OnTouchMove`事件。

我注册了事件处理程序`TouchDown`，`TouchMove`并`TouchUp`在我的`SurfaceInkCanvas`. `TouchDown`永远不会触发。只有当我从外面开始`TouchMove`然后移动到里面的一个点时。`TouchUp``SurfaceInkCanvas`

这是我的代码`TouchDevice`：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Input;
using System.Text.RegularExpressions;
using System.Windows;
using PaperDisplay.PenInput;
using System.Windows.Media;
using System.Windows.Threading;

namespace TouchApp
{
public class PenTouchDevice : TouchDevice
{
    public Point Position { get; set; }
    public Person Person { get; set; }

    public PenTouchDevice(Person person)
        : base(person.GetHashCode())
    {
        Person = person;
    }

    public override TouchPointCollection GetIntermediateTouchPoints(System.Windows.IInputElement relativeTo)
    {
        return new TouchPointCollection();
    }

    public override TouchPoint GetTouchPoint(System.Windows.IInputElement relativeTo)
    {
        Point point = Position;
        if (relativeTo != null)
        {
            point = this.ActiveSource.RootVisual.TransformToDescendant((Visual)relativeTo).Transform(Position);
        }
        return new TouchPoint(this, point, new Rect(point, new Size(2.0, 2.0)), TouchAction.Move);
    }

    public void PenDown(PenPointInputArgs args, Dispatcher dispatcher)
    {
        dispatcher.BeginInvoke((Action)(() =>
        {
            SetActiveSource(PresentationSource.FromVisual(Person.Window));
            Position = GetPosition(args);
            if (!IsActive)
            {
                Activate();
            }
            ReportDown();
        }));
    }

    public void PenUp(PenPointInputArgs args, Dispatcher dispatcher)
    {
        dispatcher.BeginInvoke((Action)(() =>
        {
            Position = GetPosition(args);
            if (IsActive)
            {
                ReportUp();
                Deactivate();
            }
        }));

    }

    public void PenMove(PenPointInputArgs args, Dispatcher dispatcher)
    {
        dispatcher.BeginInvoke((Action)(() =>
        {
            if (IsActive)
            {
                Position = GetPosition(args);
                ReportMove();
            }
        }));
    }

    public Point GetPosition(PenPointInputArgs args)
    {
        double adaptedX = args.Y - 0.01;
        double adaptedY = (1 - args.X) - 0.005;
        return new Point(adaptedX * Person.Window.ActualWidth, adaptedY * Person.Window.ActualHeight);
    }
}
} 
```

我的代码中有以下代码，`App.xaml.cs`每次出现笔输入时都会调用它：

```
public void HandleEvent(object sender, EventArgs args)
    {
        if (typeof(PointInputArgs).IsAssignableFrom(args.GetType()))
        {
            PenPointInputArgs pointArgs = (PenPointInputArgs)args;
            switch (pointArgs.EventType)
            {
                case InputEvent.Down: touchDevice1.PenDown(pointArgs, this.Dispatcher); break;
                case InputEvent.Up: touchDevice1.PenUp(pointArgs, this.Dispatcher); break;
                case InputEvent.Move:
                case InputEvent.MoveDown: touchDevice1.PenMove(pointArgs, this.Dispatcher); break;
            }

        }
    } 
```

先感谢您。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-21T16:36:36.500

`GetIntermediateTouchPoints`不能返回一个空数组，它应该至少包含一个点

```
public override TouchPointCollection GetIntermediateTouchPoints(System.Windows.IInputElement relativeTo)
{
    TouchPointCollection refCollection = new TouchPointCollection();
    refCollection.Add(GetTouchPoint(relativeTo));
    return refCollection;
} 
```

# c# - 如何最好地处理包含 0 到 3 个参数/过滤器但使用单个 LinQ to Entities 表达式的搜索查询

> ID：10564917
> 
> 赞同：1
> 
> 时间：2012-05-12T15:15:16.603
> 
> 标签：c#, asp.net-mvc, linq, entity-framework

这些值都来自下拉列表，可以为空，也可以不为空。需要编写一个无论任何参数值是否为空都可以工作的查询。`.Where`仅当所有参数都有值并且所有语句分别为真时，以下内容才会起作用/返回结果。我正在考虑一些通配符正则表达式来指定允许空参数匹配任何内容。因此，参数越多，搜索精度就越高，但如果只提供一些参数或不提供一些参数，它仍然可以工作。

```
 public ActionResult GetResults(string age, string ProgType, string Country)
        {

                    var results = _db.Categories
          .Where(c => c.CatSchema.TypeName == "Programs")
          .Where(c => c.FilterValToCatMaps.Any(fm => fm.FilterValue.Value == age))
          .Where(c => c.FilterValToCatMaps.Any(fm => fm.FilterValue.Value == ProgType))
          .Where(c => c.RootCat.Name == Country)
          .Select(c => c.RootCat);

            return View();
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T16:45:08.713

您可以有条件地应用“Where”子句 - 例如：

```
public ActionResult GetResults(string age, string ProgType, string Country)
{
    var query = _db.Categories
        .Where(c => c.CatSchema.TypeName == "Programs");

    if (String.IsNullOrWhiteSpace(age) == false)
    {
        query = query
            .Where(c => c.FilterValToCatMaps.Any(fm => fm.FilterValue.Value == age));
    }

    if (String.IsNullOrWhiteSpace(ProgType) == false)
    {
        query = query
            .Where(c => c.FilterValToCatMaps.Any(fm => fm.FilterValue.Value == ProgType));
    }

    if (String.IsNullOrWhiteSpace(Country) == false)
    {
        query = query
            .Where(c => c.RootCat.Name == Country);
    }

    var result = query
        .Select(c => c.RootCat);

    return View();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T15:35:19.977

您始终可以在 where 子句中检查有效性

```
.Where(c => IsInvalidParam() || Check()) 
```

或者你的例子可能是

```
.Where(c => String.IsNullOrEmpty(Country) || c.RootCat.Name == Country) 
```

或者看看[Predicate](http://msdn.microsoft.com/en-us/library/bfcke1bz.aspx)。这可能导致类似于

```
public ActionResult GetResults(List<Predicate<CTYPE>> predicates)
    {
    var results = _db.Categories
      .Where(c => predicates.All(pred => pred(c)))
      .Select(c => c.RootCat);

    return View();
    } 
```

在这里，您只需在列表中包含有效的谓词，或者让谓词自己检查其输入的有效性，如果它们无法过滤，则返回 true。

# java - 使用吸气剂但不分配返回值是不好的做法吗？

> ID：10564925
> 
> 赞同：0
> 
> 时间：2012-05-12T15:16:48.177
> 
> 标签：java, methods, junit, getter

我目前正在编写单元测试来测试客户端和服务器之间的连接。目前我有以下测试；isConnectionSuccessful、isDisconnectionSuccesful 和 isReconnectionSuccesful。

为了尝试减少重复，我为连接的客户端创建了一个吸气剂。当 getter 测试客户端是否已连接时，我决定也只在 isConnectionSuccesful 中调用它，但这意味着不必要地返回客户端。不过，对于其他测试，这种方法似乎非常适合。

是否可以采用这种方法，只是简单地不为 isConnectionSuccessful 分配 getter 的值，还是这是一个设计缺陷？

只是为了澄清我有以下测试/方法：

```
isConnectionSuccessful
//call getConnectedClient

isDisconnectionSuccessful
//call getConnectedClient and assign it
//disconnect logic....

isReconnectionSuccessful
//call getConnectionClient and assign it
//disconnect
//reconnect

getConnectedClient
//instantiate client
//check it is connected
//return client 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T15:34:46.180

我认为您在这里谈论的是单元测试设计。如果是这样，测试遵循与主要来源有些不同的规则。您在测试中的主要目标是使测试易于理解并提供“安全网”来支持对其测试代码的更改。要将这些目标应用于您的问题，对`getConnectedClient`进行连接检查的读者来说可能不会立即显而易见，因此是测试中唯一需要的`isConnectionSuccessful`。这可能是以不同方式编写该测试的论据。另一方面，如果您觉得测试更容易理解它的方式，那么也许您只需将名称更改为`getConnectedClient`类似`connectClientAndVerifyConnection`.

# ios - 如何让应用程序在第二代 iPod 上运行

> ID：10564928
> 
> 赞同：0
> 
> 时间：2012-05-12T15:16:52.203
> 
> 标签：ios, xcode

我目前正在尝试在我的第二代 iPod Touch 上测试我的应用程序，该 iPod Touch 在最新版本的 xCode 中运行 IOS 4.1，即使在我的管理器中，在设备下，当我运行应用程序时，我的 iPod 旁边有绿点我的设备，它说“构建成功”，但我的 iPod 上没有运行任何东西。我已在 xCode 中指定在此设备上运行，正确设置代码签名，并且在我指定 armv6 的架构中，基础 SDK 为 5.0。所有帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T15:22:04.757

部署目标就是问题所在。部署目标应为 4.0 或 4.1，并且您的 plist 应删除对 armv7 的所有引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T15:34:26.860

默认情况下，有三件事会阻止新项目在第二代 iPod touch 上工作。

*   部署目标应设置得足够低，以支持 iPod touch 运行的 iOS 版本。
*   构建设置中的体系结构应包括`armv6`.
*   该`Info.plist`文件不应包含`armv7`作为必需的设备功能。

由于如果第一个问题是 Xcode 不会尝试在设备上安装应用程序，并且您已经修复了第二个问题，那么您的问题可能是第三个问题。

# c# - List.Max(x =>x.ID) 不工作

> ID：10564933
> 
> 赞同：0
> 
> 时间：2012-05-12T15:17:33.920
> 
> 标签：c#, list, asp.net-membership, max

我有一张表，其中有一个名为 ID_client 的属性，其中是主键。我必须从该属性中搜索最大值并执行 +1 以分配给新客户端。我有以下代码..

```
public int IDuser()
    {

        MembershipUserCollection iduser = Membership.GetAllUsers();

        foreach (MembershipUser member in iduser)
        {

            UserEntity entity = new UserEntity();
            entity.Username = member.UserName;
            entity.Roles = "Users";
            entity.Email = member.Email;
            for (int i = 1; i <=iduser.Count; i++)
            {
                entity.ID_client = i;
            }
            _entities.Add(entity);

        }

        int maxID = _entities.Max(x => x.ID_client) +1;

        return maxID;

    } 
```

例如，如果我创建四个用户都可以，1、2、3 和 4。但是如果我删除第三个用户，我有 1、2 和 4 作为 ID_client，而下一个新用户，我想分配 5，但是这个函数返回我 4，而不是 5。就像函数做计数 + 1 而不是最大值 +1。

有人能帮我吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T15:37:18.037

您的代码在所有实体上重置 ID_client。因此，如果您删除一个用户，剩下的用户将 ID_client 设置为 1、2、3 或 4。因此 List.Max() 正确返回 4

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T16:26:09.977

您为方法命名的名称并不反映该方法应该做什么。给它一个会说话的名字。我看不到内部循环应该做什么。算了吧。在添加新记录之前获取最大 id。也许你想要这样的东西

```
public int CopyMembershipUsersToUserEntities()
{
    int lastID = _entities.Max(x => x.ID_client); 
    foreach (MembershipUser member in Membership.GetAllUsers()) 
    { 
        UserEntity entity = new UserEntity(); 
        entity.Username = member.UserName; 
        entity.Roles = "Users"; 
        entity.Email = member.Email; 
        entity.ID_client = ++lastID; 
        _entities.Add(entity); 
    } 
    return lastID; 
} 
```

正如其他人已经说过的，您还可以使用自动增量列。这在多用户环境中更安全。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T15:31:02.867

在数据库级别启用字段“ID”的自动递增 - 所有这些代码都是多余的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T08:20:54.060

很奇怪，但我在这里解决了我的错误..

在存储membershipUser之前，我将它存储在一个列表中..

```
 uentity.Username = username;
            for(int i=1;i<1000;i++) 
            {
                uentity.ID_client = i;
            }
            _entities.Add(uentity); 
```

然后创建一个membershipUser..

```
 userDataSource.Insert(new UserEntity(
      GetPartitionKeyFromUsername(username).ToString(),
      String.Empty)
            {
                Username = username,
                Password = EncodePassword(password),
                CreationDate = DateTime.Now,
                IsDeleted = DefaultValues.IsDeleted,
                IsLockedOut = DefaultValues.IsLockedOut,
                IsApproved = DefaultValues.IsApproved,
                ApplicationName = applicationName,
                Email = email,
                PasswordQuestion = passwordQuestion,
                PasswordAnswer = passwordAnswer,
                Gender = DefaultValues.Gender,
                LastProfileUpdatedDate = DateTime.Now,
                LastActivityDate = DateTime.Now,
                LastPasswordChangedDate = DateTime.Now,
                LastLoginDate = new DateTime(1970, 1, 1),
                LastLockedOutDate = new DateTime(1970, 1, 1),
                FailedPasswordAttemptWindowStart = new DateTime(1970, 1, 1),
                FailedPasswordAnswerAttemptWindowStart = new DateTime(1970, 1, 1),
                Birthday = new DateTime(1970, 1, 1),
                Roles = Roles(username),
                ID_client = IDuser(username)
            }); 
```

以及始终给我一个自动增量 ID 的方法，因为如果我删除会员用户，我不会从列表中删除..

```
 public int IDuser(string username)
    {

        int lastID;

        if (username=="Admin")
        {
            lastID=1;

        }

        else
        {

            lastID = _entities.Count();
        }

        return lastID;
    } 
```

但我有一个答案，我用

```
 lastID = _entities.Count(); 
```

代替

```
 lastID = _entities.Max(x => x.ID_client) 
```

因为第二个用户的 _entities.Max 给了我 999，而不是数字 2。它给了我剩余容量，而不是 ID_client(2) 的最大值。

谁能告诉我为什么会这样？

谢谢。

# c# - C#/水晶报表错误

> ID：10564935
> 
> 赞同：0
> 
> 时间：2012-05-12T15:17:42.157
> 
> 标签：c#, .net-4.0, crystal-reports

我使用 C# 2010 创建了一个 WinForms 应用程序。它包含使用 Crystal Reports for C# 2010 创建的报表。目标框架是 .Net Framework 4，目标平台是 x86。

当我在客户的计算机上运行应用程序时，它会显示此错误：

[http://img824.imageshack.us/img824/6223/errorro.png](http://img824.imageshack.us/img824/6223/errorro.png)

在我的电脑上它工作得很好。他的操作系统是 Windows Vista x64。我的操作系统是 Windows 8 x64。我尝试安装 x86 和 x64 运行时，但没有一个工作。我已经安装了 x86 框架并尝试清除临时文件夹，安装所有更新，安装可分发的 .Net Framework 4 以及我在互联网上找到的几乎所有建议，但此错误一直出现。

该程序还有一个配置文件，内容如下，没有它，报告在任何计算机上都不起作用（我认为这是一个已知的错误）：

```
<?xml version="1.0"?>
<configuration>
    <configSections>
    </configSections>
    <startup useLegacyV2RuntimeActivationPolicy="true">
        <supportedRuntime version="v4.0"/>
    </startup>
<startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup>
</configuration> 
```

它可以在另一台运行 Windows 7 x64 和 x86 CR Runtime 的计算机上运行，​​它也可以在我的计算机上运行，​​但我无法让它在他的计算机和另一台运行 Windows 7 x64 的计算机上运行。我一直试图让它工作好几天，但无济于事。该程序运行良好，除了包含 Crystal Report 的表单。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T23:01:36.497

该图像上的错误消息是关于“System.Web”丢失。因此，如果您正在运行 WinForms 应用程序，那么我怀疑您使用的是“.Net Framework 4 Client Profile”，而不是完整的“.Net Framework 4”。

在您的项目设置中，将目标框架更改为“.Net Framework 4”而不是“.Net Framework 4 Client Profile”。这至少可能会修复无法加载程序集 System.Web 错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T13:58:44.333

我找到了解决方案。尽管客户端安装了 .Net Framework 4 版本 [不是客户端配置文件]，但它需要此处找到的扩展版本：

[http://www.microsoft.com/en-us/download/details.aspx?id=17851](http://www.microsoft.com/en-us/download/details.aspx?id=17851)

希望我浪费的所有时间都能对遇到同样问题的人有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T15:47:46.930

如果缺少 .net 程序集，您可以使用 fusion log [msdn](http://msdn.microsoft.com/en-us/library/e74a18c4%28v=VS.100%29.aspx)检查缺少的库，如果 .net 部分正常，请使用 dependency walker [link](http://www.dependencywalker.com/)检查。

如果所有依赖项都很好 - 检查 Windows 事件日志是否有错误，可能会有一些关于安全部分的提示。

它可能不完全是这样，但我用这个[链接](http://scn.sap.com/thread/1802638)解决了我的问题。

# gwt - GWT 服务器端代码在生产模式下不起作用

> ID：10564938
> 
> 赞同：0
> 
> 时间：2012-05-12T15:17:57.757
> 
> 标签：gwt, amazon-web-services, amazon-elastic-beanstalk

这是我第一次尝试部署具有大量服务器端功能的 GWT 应用程序 - 所以我可能在做一些愚蠢的事情。

我无法让我的 GWT Web 应用程序在生产模式下工作。它在开发模式下运行良好，但是当我将编译后的 .war 文件上传到 Elastic Beanstalk 并尝试运行该程序时，服务器端代码会失败。

我收到以下浏览器错误：

-- [16:07:33.342] POST [http://campusmap.elasticbeanstalk.com/qmap/sside](http://campusmap.elasticbeanstalk.com/qmap/sside) [HTTP/1.1 500 内部服务器错误 106ms]

我已经使用基于本教程的 ant 脚本编译了我的项目： [http ://www.rubiconred.com/blog/build-package-a-gwt-app-to-war-using-ant/](http://www.rubiconred.com/blog/build-package-a-gwt-app-to-war-using-ant/)

```
<?xml version="1.0" encoding="utf-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"  
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" version="2.5">
    <!-- TODO: Add <servlet> tags for each servlet here. -->
    <!-- TODO: Add <servlet-mapping> tags for each <servlet> here. -->
    <!-- TODO: Optionally add a <welcome-file-list> tag to display a welcome file. -->
<!-- Default page to serve -->
  <!-- Servlets -->
  <servlet>
    <servlet-name>serverSide</servlet-name>
    <servlet-class>com.qmap.core.server.ServerSideImpl</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>serverSide</servlet-name>
    <url-pattern>/qmap/sside</url-pattern>
  </servlet-mapping>    

  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
  </welcome-file-list>

</web-app> 
```

任何帮助或指示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:11:55.857

我通过从 elasticbeanstalk 中删除 Web 应用程序并在专用的 apache 服务器上运行它解决了这个问题 - 这使我能够访问日志文件和堆栈跟踪，并且我能够解决问题。确切的错误是我的代码中与 apache 服务器相关的 uri 不正确。

# c# - 当我尝试创建文件流时出现安全异常

> ID：10564942
> 
> 赞同：0
> 
> 时间：2012-05-12T15:18:33.083
> 
> 标签：c#, silverlight, filestream

尝试创建文件流时出现安全异常

```
FileStream f = new FileStream(filename, FileMode.Create); 
```

即使我将文件名设置为 D:\filename.xml（甚至不在光盘 C: 上）。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T15:35:14.167

可能 Silverlight 应用程序无法访问磁盘 D 进行写入。通常，SL 应用程序以部分信任的方式运行。您可以尝试使用所需的提升信任。

有类似的问题 - [Silverlight 4.0 FileStream](https://stackoverflow.com/questions/2406216/silverlight-4-0-filestream)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T15:42:16.760

如果您正在构建浏览器外的 Silverlight 应用程序，请转到您的项目属性并选中“启用浏览器外运行的应用程序”。

在“浏览器外设置”中选中“在浏览器外运行时需要提升信任”。

此外，请确保运行应用程序的用户有权创建/写入目标路径。

# jquery - jQuery foreignObject 选择失败

> ID：10564954
> 
> 赞同：1
> 
> 时间：2012-05-12T15:20:02.000
> 
> 标签：jquery

无法使用 getElementsByTagName 或 jQuery 选择 foreignObject。根据我的理解，这可能是因为foreignObject 不是 jQuery 中 HTML DOM 的一部分。这是真的吗？我该如何解决这个问题？

谢谢。

# javascript - 用图像文件替换 javascript 幻灯片放映按钮，对我不起作用

> ID：10564959
> 
> 赞同：0
> 
> 时间：2012-05-12T15:20:26.770
> 
> 标签：javascript, button, slideshow

如何将此幻灯片放映上的后退和停止按钮更改为图像文件？任何时候我尝试过，图像文件都不能作为按钮正常工作（我按照 w3 网站上的说明进行操作......

```
<DIV align="center">
              <INPUT type=button onClick="Oneprevious();" value="<<" title="Previous">
              <INPUT type=button name="Oneslidebutton" onClick="Oneap(this.value);" value="Start" title="AutoPlay">
              <INPUT type=button onClick="Onenext();" value=">>" title="Next">
      </DIV> 
```

这对我不起作用，`<input type="image" src="submit.gif" alt="Submit" />`我非常感谢任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T15:24:58.213

你可以这样做：

```
<div align="center">
     <img src="previous.jpg" onclick="Oneprevious();" title="Previous">
     <img src="play.jpg" onclick="Oneap('Start');" title="Play">
     <img src="next.jpg" onclick="Onenext();" title="Next">
</div> 
```

# php - 试图用php获取网页的内容

> ID：10564961
> 
> 赞同：-2
> 
> 时间：2012-05-12T15:20:36.753
> 
> 标签：php, xml, curl

我正在尝试从下面的页面获取内容。出于我自己的目的，我只是对标签感兴趣，所以我可以将它放入一个数组中，以便当我使用适当的方法将机器人响应发送回 Twitter API 时。这是我尝试过的：

```
 <?xml version="1.0" encoding="ISO-8859-1"?>
         <conversation convo_id="$convo_id">
         <bot_name>infobot2012</bot_name>
         <user_name>User</user_name>
         <user_id value='2' />
         <usersay>$say</usersay>
         <botsay>Internal error detected. Please inform my botmaster. </botsay>
         </conversation>

         $url = "http://localhost/Program-O/chatbot/conversation_start.php?say=$say&  
         hello&convo_id=$convo_id&bot_id=$bot_id&format=xml";

         get_url_contents($url)
         $crl = curl_init(); //getting Parse error: syntax error, unexpected T_VARIABLE
         $timeout = 5;
         curl_setopt ($crl, CURLOPT_URL,$url);
         curl_setopt ($crl, CURLOPT_RETURNTRANSFER, 1);
         curl_setopt ($crl, CURLOPT_CONNECTTIMEOUT, $timeout);
         $ret = curl_exec($crl);
         curl_close($crl);
         return $ret; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T15:22:55.397

您在其上方的行中缺少一个分号：

```
get_url_contents($url) 
```

应该

```
get_url_contents($url); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T15:22:58.000

尝试这个：

```
function get_url_contents($url) {
    $crl = curl_init();
    $timeout = 5;
    curl_setopt ($crl, CURLOPT_URL,$url);
    curl_setopt ($crl, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt ($crl, CURLOPT_CONNECTTIMEOUT, $timeout);
    $ret = curl_exec($crl);
    curl_close($crl);
    return $ret;
}

$url = "http://localhost/Program-O/chatbot/conversation_start.php?say=" . $say . "&hello&convo_id=" . $convo_id . "&bot_id=" . $bot_id . "&format=xml";

echo get_url_contents ($url); 
```

# sql - 优化或重写使用多个公用表表达式的数据透视查询

> ID：10564964
> 
> 赞同：0
> 
> 时间：2012-05-12T15:20:54.350
> 
> 标签：sql, sql-server-2008, query-optimization, pivot

我需要帮助优化或重写这个复杂的查询。该查询非常适合具有 50 行的测试数据，但实际数据现在有超过 700,000 行，并且查询需要超过 5 分钟才能运行。我在两个表的主键上有索引。我相信年龄函数的成本很高，如果我把它拿出来它可以节省大约 2 ½ 分钟。任何建议表示赞赏。提前致谢。

```
WITH T AS (
        SELECT TOP 2000
          A.Residence_City, 
          CASE 
             WHEN A.Gender = 'M' then 'Male'
             WHEN A.Gender = 'F' then 'Female'
             WHEN A.Gender = 'U' then 'Unknown'
        END AS Gender,
count(case when voterData.dbo.ufn_GetAge ( convert(datetime,[Date_of_Birth]), GETDATE() ) between 18 and 24 and voterData.dbo.GeneralVoting (V.[G10EC], V.[G08EC],V.[G06EC]) = 0 then 1 else null end) as [0_3_18],
count(case when voterData.dbo.ufn_GetAge ( convert(datetime,[Date_of_Birth]), GETDATE() ) between 18 and 24 and voterData.dbo.GeneralVoting (V.[G10EC], V.[G08EC],V.[G06EC]) = 1 then 1 else null end) as [1_3_18],
count(case when voterData.dbo.ufn_GetAge ( convert(datetime,[Date_of_Birth]), GETDATE() ) between 18 and 24 and voterData.dbo.GeneralVoting (V.[G10EC], V.[G08EC],V.[G06EC]) = 2 then 1 else null end) as [2_3_18],
count(case when voterData.dbo.ufn_GetAge ( convert(datetime,[Date_of_Birth]), GETDATE() ) between 18 and 24 and voterData.dbo.GeneralVoting (V.[G10EC], V.[G08EC],V.[G06EC]) = 3 then 1 else null end) as [3_3_18],
count(case when voterData.dbo.ufn_GetAge ( convert(datetime,[Date_of_Birth]), GETDATE() ) between 18 and 24 and voterData.dbo.GeneralVoting (V.[G10EC], V.[G08EC],V.[G06EC]) = 0 then 1 else null end) as [Unknown_18],

count(case when voterData.dbo.ufn_GetAge ( convert(datetime,[Date_of_Birth]), GETDATE() ) between 25 and 34 and voterData.dbo.GeneralVoting (V.[G10EC], V.[G08EC],V.[G06EC]) = 0 then 1 else null end) as [0_3_25],
count(case when voterData.dbo.ufn_GetAge ( convert(datetime,[Date_of_Birth]), GETDATE() ) between 25 and 34 and voterData.dbo.GeneralVoting (V.[G10EC], V.[G08EC],V.[G06EC]) = 1 then 1 else null end) as [1_3_25],
count(case when voterData.dbo.ufn_GetAge ( convert(datetime,[Date_of_Birth]), GETDATE() ) between 25 and 34 and voterData.dbo.GeneralVoting (V.[G10EC], V.[G08EC],V.[G06EC]) = 2 then 1 else null end) as [2_3_25],
count(case when voterData.dbo.ufn_GetAge ( convert(datetime,[Date_of_Birth]), GETDATE() ) between 25 and 34 and voterData.dbo.GeneralVoting (V.[G10EC], V.[G08EC],V.[G06EC]) = 3 then 1 else null end) as [3_3_25],
count(case when voterData.dbo.ufn_GetAge ( convert(datetime,[Date_of_Birth]), GETDATE() ) between 25 and 34 and voterData.dbo.GeneralVoting (V.[G10EC], V.[G08EC],V.[G06EC]) = 0 then 1 else null end) as [Unknown_25],

count(case when voterData.dbo.ufn_GetAge ( convert(datetime,[Date_of_Birth]), GETDATE() ) between 35 and 49 and voterData.dbo.GeneralVoting (V.[G10EC], V.[G08EC],V.[G06EC]) = 0 then 1 else null end) as [0_3_35],
count(case when voterData.dbo.ufn_GetAge ( convert(datetime,[Date_of_Birth]), GETDATE() ) between 35 and 49 and voterData.dbo.GeneralVoting (V.[G10EC], V.[G08EC],V.[G06EC]) = 1 then 1 else null end) as [1_3_35],
count(case when voterData.dbo.ufn_GetAge ( convert(datetime,[Date_of_Birth]), GETDATE() ) between 35 and 49 and voterData.dbo.GeneralVoting (V.[G10EC], V.[G08EC],V.[G06EC]) = 2 then 1 else null end) as [2_3_35],
count(case when voterData.dbo.ufn_GetAge ( convert(datetime,[Date_of_Birth]), GETDATE() ) between 35 and 49 and voterData.dbo.GeneralVoting (V.[G10EC], V.[G08EC],V.[G06EC]) = 3 then 1 else null end) as [3_3_35],
count(case when voterData.dbo.ufn_GetAge ( convert(datetime,[Date_of_Birth]), GETDATE() ) between 35 and 49 and voterData.dbo.GeneralVoting (V.[G10EC], V.[G08EC],V.[G06EC]) = 0 then 1 else null end) as [Unknown_35],

count(case when voterData.dbo.ufn_GetAge ( convert(datetime,[Date_of_Birth]), GETDATE() ) between 50 and 64 and voterData.dbo.GeneralVoting (V.[G10EC], V.[G08EC],V.[G06EC]) = 0 then 1 else null end) as [0_3_50],
count(case when voterData.dbo.ufn_GetAge ( convert(datetime,[Date_of_Birth]), GETDATE() ) between 50 and 64 and voterData.dbo.GeneralVoting (V.[G10EC], V.[G08EC],V.[G06EC]) = 1 then 1 else null end) as [1_3_50],
count(case when voterData.dbo.ufn_GetAge ( convert(datetime,[Date_of_Birth]), GETDATE() ) between 50 and 64 and voterData.dbo.GeneralVoting (V.[G10EC], V.[G08EC],V.[G06EC]) = 2 then 1 else null end) as [2_3_50],
count(case when voterData.dbo.ufn_GetAge ( convert(datetime,[Date_of_Birth]), GETDATE() ) between 50 and 64 and voterData.dbo.GeneralVoting (V.[G10EC], V.[G08EC],V.[G06EC]) = 3 then 1 else null end) as [3_3_50],
count(case when voterData.dbo.ufn_GetAge ( convert(datetime,[Date_of_Birth]), GETDATE() ) between 50 and 64 and voterData.dbo.GeneralVoting (V.[G10EC], V.[G08EC],V.[G06EC]) = 0 then 1 else null end) as [Unknown_50],

count(case when voterData.dbo.ufn_GetAge ( convert(datetime,[Date_of_Birth]), GETDATE() ) between 65 and 120 and voterData.dbo.GeneralVoting (V.[G10EC], V.[G08EC],V.[G06EC]) = 0 then 1 else null end) as [0_3_65],
count(case when voterData.dbo.ufn_GetAge ( convert(datetime,[Date_of_Birth]), GETDATE() ) between 65 and 120 and voterData.dbo.GeneralVoting (V.[G10EC], V.[G08EC],V.[G06EC]) = 1 then 1 else null end) as [1_3_65],
count(case when voterData.dbo.ufn_GetAge ( convert(datetime,[Date_of_Birth]), GETDATE() ) between 65 and 120 and voterData.dbo.GeneralVoting (V.[G10EC], V.[G08EC],V.[G06EC]) = 2 then 1 else null end) as [2_3_65],
count(case when voterData.dbo.ufn_GetAge ( convert(datetime,[Date_of_Birth]), GETDATE() ) between 65 and 120 and voterData.dbo.GeneralVoting (V.[G10EC], V.[G08EC],V.[G06EC]) = 3 then 1 else null end) as [3_3_65],
count(case when voterData.dbo.ufn_GetAge ( convert(datetime,[Date_of_Birth]), GETDATE() ) between 65 and 120 and voterData.dbo.GeneralVoting (V.[G10EC], V.[G08EC],V.[G06EC]) = 0 then 1 else null end) as [Unknown_65],

count(case when voterData.dbo.ufn_GetAge ( convert(datetime,[Date_of_Birth]), GETDATE() ) = '' or voterData.dbo.ufn_GetAge ( convert(datetime,[Date_of_Birth]), GETDATE() )is null and voterData.dbo.GeneralVoting (V.[G10EC], V.[G08EC],V.[G06EC]) = 0 then 1 else null end) as [0_3_],
count(case when voterData.dbo.ufn_GetAge ( convert(datetime,[Date_of_Birth]), GETDATE() ) = '' or voterData.dbo.ufn_GetAge ( convert(datetime,[Date_of_Birth]), GETDATE() )is null and voterData.dbo.GeneralVoting (V.[G10EC], V.[G08EC],V.[G06EC]) = 1 then 1 else null end) as [1_3_],
count(case when voterData.dbo.ufn_GetAge ( convert(datetime,[Date_of_Birth]), GETDATE() ) = '' or voterData.dbo.ufn_GetAge ( convert(datetime,[Date_of_Birth]), GETDATE() )is null and voterData.dbo.GeneralVoting (V.[G10EC], V.[G08EC],V.[G06EC]) = 2 then 1 else null end) as [2_3_],
count(case when voterData.dbo.ufn_GetAge ( convert(datetime,[Date_of_Birth]), GETDATE() ) = '' or voterData.dbo.ufn_GetAge ( convert(datetime,[Date_of_Birth]), GETDATE() )is null and voterData.dbo.GeneralVoting (V.[G10EC], V.[G08EC],V.[G06EC]) = 3 then 1 else null end) as [3_3_],
count(case when voterData.dbo.ufn_GetAge ( convert(datetime,[Date_of_Birth]), GETDATE() ) = '' or voterData.dbo.ufn_GetAge ( convert(datetime,[Date_of_Birth]), GETDATE() )is null and voterData.dbo.GeneralVoting (V.[G10EC], V.[G08EC],V.[G06EC]) = 0 then 1 else null end) as [Unknown_]

from Personal as A INNER JOIN Voting_History V 
on A.Vuid = V.Vuid 
group by Residence_City, Gender with rollup
Order by Residence_City, Gender 
)
, temp1 as (
    SELECT  *,([3_3_18] + [3_3_25] + [3_3_35] + [3_3_50] + [3_3_65] + [3_3_]
              +[2_3_18] + [2_3_25] + [2_3_35] + [2_3_50] + [2_3_65] + [2_3_]
              +[1_3_18] + [1_3_25] + [1_3_35] + [1_3_50] + [1_3_65] + [1_3_]
              +[0_3_18] + [0_3_25] + [0_3_35] + [0_3_50] + [0_3_65] + [0_3_]
            +[Unknown_18]+ [Unknown_25]+ [Unknown_35] + [Unknown_50]+ [Unknown_65] + [Unknown_]) Total
FROM T
where NULLIF(Residence_City,'') IS NOT NULL
), temp2 as (
    SELECT * FROM temp1
UNION ALL
select 
'grand Total',
SUM([0_3_18])/2,SUM([1_3_18])/2,SUM([2_3_18])/2,SUM([3_3_18])/2,SUM([Unknown_18])/2,
SUM([0_3_25])/2,SUM([1_3_25])/2,SUM([2_3_25])/2,SUM([3_3_25])/2,SUM([Unknown_25])/2,
SUM([0_3_35])/2,SUM([1_3_35])/2,SUM([2_3_35])/2,SUM([3_3_35])/2,SUM([Unknown_35])/2,
SUM([0_3_50])/2,SUM([1_3_50])/2,SUM([2_3_50])/2,SUM([3_3_50])/2,SUM([Unknown_50])/2,
SUM([0_3_65])/2,SUM([1_3_65])/2,SUM([2_3_65])/2,SUM([3_3_65])/2,SUM([Unknown_65])/2,
SUM([0_3_])/2,SUM([1_3_])/2,SUM([2_3_])/2,SUM([3_3_])/2,SUM([Unknown_])/2,
sum(Total)/2

FROM temp1
)

SELECT Residence_City, Gender,
    [0_3_18]     as [0_3],  
    [1_3_18]     as [1_3], 
    [2_3_18]     as [2_3], 
    [3_3_18]     as [3_3], 
    [Unknown_18] as [Unknown],

    [0_3_25]     as [0_3],  
    [1_3_25]     as [1_3], 
    [2_3_25]     as [2_3],  
    [3_3_25]     as [3_3],  
    [Unknown_25] as [Unknown], 

    [0_3_35]     as [0_3],  
    [1_3_35]     as [1_3], 
    [2_3_35]     as [2_3], 
    [3_3_35]     as [3_3], 
    [Unknown_35] as [Unknown], 

    [0_3_35]     as [0_3],  
    [1_3_35]     as [1_3], 
    [2_3_35]     as [2_3], 
    [3_3_35]     as [3_3], 
    [Unknown_35] as [Unknown], 

    [0_3_35]     as [0_3],  
    [1_3_35]     as [1_3], 
    [2_3_35]     as [2_3], 
    [3_3_35]     as [3_3], 
    [Unknown_35] as [Unknown], 

    [0_3_35]     as [0_3],  
    [1_3_35]     as [1_3], 
    [2_3_35]     as [2_3], 
    [3_3_35]     as [3_3], 
    [Unknown_35] as [Unknown], 
    Total
   FROM temp2 
```

这些是功能

```
 ALTER FUNCTION [dbo].[GeneralVoting] ( @one varchar, @two varchar,@three varchar)
    RETURNS INT
    AS
    BEGIN

        DECLARE @vAge         INT

        SET @vAge = (CASE WHEN @one IS NOT NULL THEN 1 ELSE 0 END)
                        +(CASE WHEN @two IS NOT NULL THEN 1 ELSE 0 END)
                        +(CASE WHEN @three IS NOT NULL THEN 1 ELSE 0 END)
     RETURN @vAge
    END 
```

和

```
 ALTER FUNCTION [dbo].[ufn_GetAge] ( @pDateOfBirth DATETIME, @pAsOfDate DATETIME )
    RETURNS INT
    AS
    BEGIN
        DECLARE @vAge         INT
        IF @pDateOfBirth >= @pAsOfDate
            RETURN 0

        SET @vAge = DATEDIFF(YY, @pDateOfBirth, @pAsOfDate)

        IF MONTH(@pDateOfBirth) > MONTH(@pAsOfDate) OR
          (MONTH(@pDateOfBirth) = MONTH(@pAsOfDate) AND
           DAY(@pDateOfBirth)   > DAY(@pAsOfDate))
            SET @vAge = @vAge - 1
      RETURN @vAge
    END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T16:27:42.840

连接结构看起来很合理。我不确定您是否需要汇总，但它可能不会影响性能。

我怀疑用户定义的功能正在影响性能。SQL Server 不够聪明，无法优化对 ufn_GetAge() 的多次调用，因此该函数被一遍又一遍地调用。相反，将年龄放在子查询中：

```
(select *, voterData.dbo.ufn_GetAge( convert(datetime,[Date_of_Birth]), GETDATE() ) as age
 from VoterData
) age 
```

该函数非常简单，因此您也可以直接替换它以消除这个调用。

您也可以对其他功能采用相同的方法。

另外，投票和个人历史记录表有多大？特别是城市和性别有多少种组合？您可以通过预先选择前 2000 个然后对不同的组进行计算来提高查询效率。但是，在不知道尺寸的情况下，很难判断这是否有效。另外，您真的是要按 Residence_City, Gender 订购吗？. . 还是您想按其他字段之一订购？照原样，查询只是按字母顺序选择第一个。

# matlab - Matlab 集成

> ID：10564968
> 
> 赞同：0
> 
> 时间：2012-05-12T15:21:04.650
> 
> 标签：matlab, integration

我在 matlab 中编写了一个代码来使用 Gauss-Chebyshev 正交计算积分，但它不起作用：

```
function int = chebquad('-1i*exp(x+3)',1e-8,-1,1); 
f=inline('-1i*exp(x+3)','x')  
old_int = inf; 
for n=1:1000    
    x = cos(((2*(1:n) - 1)/(2*n))*pi);    
    w = pi/n;    
    fx = f(x);    
    int = sum(w.*fx);    
    if abs(int_old-int) < tol 
        break    
    end    
    old_int = int;   
end 
```

有什么建议么？

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T17:22:01.737

以供将来参考，这将帮助我们解决您没有将指定变量显示为常量的函数：

所以显示：

```
function hv= someName(firstVar, secondVar) 
```

并不是：

```
function hv= someName(1, 'some string') 
```

我不知道为什么你同时拥有 -1 和 1，但我假设 tol = 1e-8。话虽如此，您在代码中犯了一个小错误，使用`int_old`而不是`old_int.`

编辑：所以起初我想，你只是为了“我们的利益”而显示了这个函数，现在我认为你甚至没有正确定义一个 Matlab 函数。请[阅读本文](http://www.mathworks.com/help/techdoc/ref/function.html)并了解基本的 Matlab 编码。Chebyshev–Gauss 正交定义在 上`-1 to 1`，因此不需要在函数代码中，以下是修改后的代码：

```
function intV = chebquad(funC,tol)

f=inline(funC,'x');
old_int = inf; 
for n=1:1000    
    x = cos(((2*(1:n) - 1)/(2*n))*pi);    
    w = pi/n;    
    fx = f(x);    
    intV = sum(w.*fx);    
    if abs(old_int - intV) < tol 
        break    
    end    
    old_int = intV ;   
end 
```

在命令提示符下，您可以使用以下命令调用它：

```
intV = chebquad('-1i*exp(x+3)', 1e-8) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T15:41:58.103

在开始之前了解答案以及函数的外观会有所帮助。以下是 Wolfram Alpha 关于您的功能的说明：

[http://www.wolframalpha.com/input/?i=+-i+*exp%28x%2B3%29%2Fsqrt%281-x%5E2%29](http://www.wolframalpha.com/input/?i=%20-i%20%2aexp%28x%2b3%29/sqrt%281-x%5E2%29)

这就是答案应该是什么：

[http://www.wolframalpha.com/input/?i=int++-i+*exp%28x%2B3%29%2Fsqrt%281-x%5E2%29%2C+x%3D-1..1](http://www.wolframalpha.com/input/?i=int%20%20-i%20%2aexp%28x%2b3%29/sqrt%281-x%5E2%29,%20x=-1..1)

看看是否有帮助。

# c# - 处理两个 XML 文档以查找结果

> ID：10564969
> 
> 赞同：-1
> 
> 时间：2012-05-12T15:21:12.293
> 
> 标签：c#, xml

我有一些 XML 文档：

事件.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<events>
  <event>
    <id>9</id> 
    <region>3</region> 
    <region>12</region> 
    <region>29</region> 
  </event>
  <event> 
    <id>7</id> 
    <region>1</region>
    <region>12345</region>
  </event>
  <event> 
    <id>3</id> 
    <region>12</region>
    <region>39</region> 
    <region>56</region> 
  </event>
  <event> 
    <id>8</id> 
    <region>8</region> 
    <region>123</region> 
    <region>456</region>
  </event>
  <event> 
    <id>4</id> 
    <region>999</region> 
    <region>888</region> 
    <region>777</region> 
  </event>
</events> 
```

曝光.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<companies>
  <company> 
    <id>6</id>
    <region>3</region>
    <region>9</region> 
    <region>8</region>
    <region>11111</region> 
    <region>12</region> 
  </company>
  <company> 
    <id>4</id> 
    <region>3</region> 
    <region>6</region> 
    <region>7</region> 
    <region>12345</region> 
  </company>
  <company> 
    <id>9</id> 
    <region>1</region> 
    <region>2</region> 
    <region>3</region> 
  </company>
</companies> 
```

我需要编写一个程序来处理这两个文件：

> 对于事件文件中的每个事件，程序应在曝光文件中写出事件编号，然后是它影响的公司集。公司名单应按公司编号升序排列。

给定示例文件，输出应该是这样的：

```
9 4 6 9

 8 6

 7 4 9

 3 6

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T16:18:25.900

在你的生活中拥有一点 LINQ。

```
var eventsDoc = XDocument.Load(@"events.xml");
var exposureDoc = XDocument.Load(@"exposure.xml");

var companies =
   (from c in exposureDoc.Descendants("company")
    let id = (int)c.Element("id")
    orderby id
    select new
    {
        Id = id,
        Regions = new HashSet<int>(
            from r in c.Elements("region")
            select (int)r),
    }).ToList();
var events =
    from e in eventsDoc.Descendants("event")
    let id = (int)e.Element("id")
    orderby id descending
    select new
    {
        Id = id,
        Regions = from r in e.Elements("region")
                  select (int)r,
    };
foreach (var evnt in events)
{
    var affectedCompanies =
        from c in companies
        where c.Regions.Overlaps(evnt.Regions)
        select c.Id;
    if (affectedCompanies.Any())
        Console.WriteLine("{0} {1}", evnt.Id, String.Join(" ", affectedCompanies));
} 
```

如果您使用的是 .NET 3.5，则需要稍微更改循环主体中的查询。

```
var affectedCompanies =
   (from c in companies
    where c.Regions.Overlaps(evnt.Regions)
    select c.Id.ToString()).ToArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T16:00:46.940

您可以使用 XInclude 将这两者有效地组合成一个文档，如下所示：

```
<?xml version="1.0" ?>
<combination xmlns:xi="http://www.w3.org/2001/XInclude">
    <xi:include href="events.xml" />
    <xi:include href="exposure.xml" />
</combination> 
```

在那之后，

1.  使用 XmlDocument 读入“组合”文档
2.  使用 SelectNodes 拉入事件列表（XPath: `//event/id./'）
3.  使用 SelectNodes 拉入每个事件的区域列表
4.  使用 SelectNodes 拉入受每个区域影响的公司

有大量关于如何使用 XmlDocument 框架和 XPath 的文档。比如这个[问题](https://stackoverflow.com/questions/2544391/xmldocument-selectnodesxpath-order-of-result)。

# wpf - 无法删除文件，因为它被另一个进程使用

> ID：10564971
> 
> 赞同：1
> 
> 时间：2012-05-12T15:21:25.710
> 
> 标签：wpf, multithreading, file-io

我得到了这个例外

> 该进程无法访问文件“myfile.zip”，因为它正被另一个进程使用。

当我尝试删除文件时。我了解该错误，但我不确定其他进程可能正在使用该文件。

我正在通过[WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.110%29.aspx)异步下载文件，但我在尝试删除它之前取消了下载，这意味着该进程应该放弃它，不是吗？

以下是相关方法。这是一个简单的文件下载器：

```
private void textBox1_KeyUp(object sender, KeyEventArgs e)
{
    string downloadFile = textBox1.Text.Trim();
    if (e.Key == Key.Return && downloadFile != "")
    {
        var dlg = new SaveFileDialog();
        dlg.FileName = Path.GetFileName(downloadFile);
        dlg.DefaultExt = Path.GetExtension(downloadFile);
        var result = dlg.ShowDialog();
        if(result.Value)
        {
            textBox1.Text = "";
            textBox1.Focus();
            _saveFile = dlg.FileName;
            progressBar1.Dispatcher.Invoke(DispatcherPriority.Normal, new Action(() => progressBar1.Foreground = new SolidColorBrush(Color.FromRgb(0, 255, 0))));
            _webClient.DownloadFileAsync(new Uri(downloadFile), _saveFile);
        }
    }
}

private void Window_Closing(object sender, System.ComponentModel.CancelEventArgs e)
{
    if (_webClient.IsBusy && _saveFile != null)
    {
        var result = MessageBox.Show("Download in progress. Are you sure you want to exit?", "Exit?", MessageBoxButton.YesNo, MessageBoxImage.Warning);
        if (result == MessageBoxResult.Yes)
        {
            _webClient.CancelAsync();
            File.Delete(_saveFile);
        }
        else
        {
            e.Cancel = true;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T15:25:22.807

下载真正取消时需要等待。当调用 _webClient.CancelAsync(); next 运算符在 webClient 取消之前立即执行。

可能您需要在 CancelAsync(...) 的回调中删除文件

# mysql - 如何将这两个 Select 查询与 OR 案例结合起来

> ID：10564973
> 
> 赞同：0
> 
> 时间：2012-05-12T15:21:45.240
> 
> 标签：mysql, sql

我想选择从下面的查询 2`WHERE (uid = {$uid} OR uid = **HERE** )`中检索到的`**HERE**`所有行。`cid`

查询一：

```
 SELECT * FROM `t_activities`
    WHERE (`uid` = {$uid} OR `uid` = **HERE** )
    AND `del` = 0
    GROUP BY `fid`
    ORDER BY `time` DESC 
    LIMIT 10 
```

和查询2：

```
SELECT `cid` FROM `t_con` WHERE `uid` = {$uid} AND `flag` = 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T15:25:11.607

```
SELECT * FROM `t_activities`
WHERE (`uid` = {$uid} OR `uid` in (SELECT `cid` 
                                   FROM `t_con` 
                                   WHERE `uid` = {$uid} AND `flag` = 1))
AND `del` = 0
GROUP BY `fid`
ORDER BY `time` DESC 
LIMIT 10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T16:08:17.980

您也可以将其作为联接执行：

```
SELECT *
FROM `t_activities` ta left outer join
     (SELECT `cid` 
      FROM `t_con` 
      WHERE `uid` = {$uid} AND `flag` = 1)
     ) tc
     on ta = tc.cid
WHERE (`uid` = {$uid} OR tc.`uid` is not null) AND `del` = 0
GROUP BY `fid`
ORDER BY `time` DESC 
LIMIT 10 
```

顺便说一句，作为 SQL 语句，“GROUP BY fid”看起来很奇怪。这在 mysql 中是允许的，但我认为这是一个不好的做法。明确说明您在做什么会更好：

```
SELECT fid, min(<field1>) as Field1, . . . 
```

这有助于在您返回查询或尝试修改查询时防止错误。

# linq-to-entities - 如何在 Linq to Entities 中将 T-Sql 的“not in”构造编写为子查询？

> ID：10564976
> 
> 赞同：1
> 
> 时间：2012-05-12T15:22:16.433
> 
> 标签：linq-to-entities, entity-framework-4.1

查询：-

```
 select * from Product.Barcodes where Barcode='00A000000O' and  
 Barcode not in(select Barcode from Sales.SalePointItem) 
```

我尝试了以下方法，但这些方法不起作用：-

```
db.Barcodes.SingleOrDefault(b => b.Barcode.Equals(ItemBarcode) &&  
  !db.SalePointItems.Select(m=>m.Barcode).Contains(b.Barcode));

db.Barcodes.SingleOrDefault(b => b.Barcode.Equals(ItemBarcode) &&  
  !db.SalePointItems.Any(m=>m.Barcode.Equals(b.Barcode))); 
```

我在运行上述两个时遇到以下异常：-

> 无法创建“SalePointItemModel”类型的常量值。此上下文仅支持原始类型（“例如 Int32、String 和 Guid”）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T15:57:56.643

试试这个：

```
var item = (from b in db.Barcodes
            where b.Barcode == ItemBarcode
            where !db.SalePointItems.Any(m => m.Barcode == b.Barcode)
            select b).SingleOrDefault(); 
```

方法语法 -

```
var item = db.Barcodes.Where(b => b.Barcode == ItemBarcode)
                      .Where(b => !db.SalePointItems.Any(m => m.Barcode == b.Barcode))
                      .SingleOrDefault(); 
```

# ruby-on-rails - bootstrap-sass gem 在 Hartl 的 rails 教程中的步骤 5.1.2 中打破我的 rails 3.2.3

> ID：10564977
> 
> 赞同：0
> 
> 时间：2012-05-12T15:22:35.023
> 
> 标签：ruby-on-rails, railstutorial.org

到目前为止，一切都很好，包括上传到 github 和 heroku，以及使用 postgres 进行 dev/test 和 prod/heroku。

我一添加

> 宝石'bootstrap-sass'，'2.0.0'

到我的 Gemfile 并运行`bundle install`（或`bundle install --without assets`）、spork、guard 和 rails（以及独立乘客）都抱怨以下内容：

```
/var/lib/rails/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:74:in `require': cannot load such file -- bootstrap/sass (LoadError)
    from /var/lib/rails/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:74:in `rescue in block in require'
    from /var/lib/rails/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:62:in `block in require'
    from /var/lib/rails/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:55:in `each'
    from /var/lib/rails/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:55:in `require'
    from /var/lib/rails/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler.rb:119:in `require'
    from /var/lib/rails/sample_app/config/application.rb:13:in `<top (required)>'
    from /var/lib/rails/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/commands.rb:53:in `require'
    from /var/lib/rails/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/commands.rb:53:in `block in <top (required)>'
    from /var/lib/rails/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/commands.rb:50:in `tap'
    from /var/lib/rails/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

这是我的 Gemfile 和 Gemfile.lock 的相关部分：

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'
gem 'jquery-rails', '2.0.0'
gem 'bootstrap-sass', '2.0.0'
gem 'bcrypt-ruby', '3.0.1'
#gem 'faker', '1.0.1'
#gem 'will_paginate', '3.0.3'
#gem 'bootstrap-will_paginate', '0.0.5'

group :development, :test do
  #gem 'sqlite3', '1.3.5'
  gem 'rspec-rails', '2.9.0'
  gem 'guard-rspec', '0.5.5'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '3.2.4'
  gem 'coffee-rails', '3.2.2'
  gem 'uglifier', '1.2.3'
end

group :test do
  gem 'capybara', '1.1.2'
  #gem 'factory_girl_rails', '1.4.0'
  #gem 'cucumber-rails', '1.2.1', require: false
  #gem 'database_cleaner', '0.7.0'
  gem 'guard-spork', '0.3.2'
        gem 'spork', '0.9.0'
        # gem 'rb-fsevent', '0.4.3.1', require: false
        # gem 'growl', '1.0.3'
end

#group :production do
  gem 'pg', '0.12.2'
#end 
```

$ egrep "bootstrap|sass" Gemfile.lock

```
bootstrap-sass (2.0.0)
sass (3.1.17)
sass-rails (3.2.4)
  sass (>= 3.1.10)
bootstrap-sass (= 2.0.0)
sass-rails (= 3.2.4) 
```

该平台是一个 Gentoo OpenVZ 容器，使用专用的、非特权的“rails”帐户。

我已经检查了我的工作好几次，移除了宝石并重新捆绑，仍然没有爱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T16:58:09.533

尝试将 bootstrap-sass 放入 Gemfile 的资产组？

```
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
  gem 'bootstrap-sass', '~> 2.0.2'
end 
```

# javascript - 按日期合并两个列表jquery

> ID：10564983
> 
> 赞同：1
> 
> 时间：2012-05-12T15:23:08.247
> 
> 标签：javascript, jquery, list, merge

假设我们有这个标记：

```
<div id="container">
    <ul></ul>
    <ul></ul>
</div> 
```

其中的格式`<li>`如下：

```
<ul>
   <li>
     <span class="title">Title of the article</span>
     <span class="date" data-value="[TIMESTAMP]">Pretty Date</span>
   </li>
</ul> 
```

我需要做的是：

*   如果视口宽度足够大：显示两个列表

*   如果视口宽度很小：按日期合并两个列表

    > 变量最小值 = 760; $(window).resize(function(){ var width = $(window).width(); if(width <= min){ merge_lists(); } });

我在弄清楚如何做时遇到了一些麻烦：

```
function merge_lists(){
     /* shall i run 2 .each function and store it in an array, order by date (how?) and
        regenerate a new list?
      */
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T15:40:00.030

我想你喜欢这样的东西：

**HTML：**

```
<div id="container">
    <ul>
        <li>
         <span class="title">Title of the article</span>
         <span class="date" data-value="2012/05/01">2012/05/01</span>
       </li>
    </ul>
    <ul>
        <li>
         <span class="title">Title of the article</span>
         <span class="date" data-value="2012/05/05">2012/05/05</span>
       </li>
    </ul>
    <ul>
        <li>
         <span class="title">Title of the article</span>
         <span class="date" data-value="2012/04/10">2012/04/10</span>
       </li>
    </ul>
</div> 
```

**jQuery：**

```
var mainlists = $('#container ul'),
    min = 550;

function merge_lists() {
     if (!$('#container').hasClass('merged')) {
        var temp = mainlists.clone(true),
            lists = $('li', temp);
        lists.sort(function(a, b) {
            var d1 = $('span.date', a).data('value'),
                d2 = $('span.date', b).data('value');
            if (new Date(d1).getTime() > new Date(d2).getTime()) return 1;
        });
        $('#container').empty().append($('<ul>', {
            html: lists
        }));
        $('#container').addClass('merged');
    }
}

function restore_lists() {
    if ($('#container').hasClass('merged')) {
       $('#container').empty().append(mainlists.clone(true));
       $('#container').removeClass('merged');
    }
}

$(window).resize(function() {
    var winWidth = $(window).width(),
        winHeight = $(window).height();
    $('#resolution').html(winWidth + 'px x ' + winHeight + 'px');
    if (winWidth < min) {
        merge_lists();
        $('body').css('background', '#ddd');
    } else {
        restore_lists();
        $('body').css('background', '#fff');
    }
}); 
```

*   **[排序（）函数](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/sort)**
*   **[jQuery 数据（）](http://docs.jquery.com/Data)**
*   **[获取时间（）](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/getTime)**

**[演示](http://jsfiddle.net/5whus/15/)**

# java - 字节码序列反编译

> ID：10564986
> 
> 赞同：2
> 
> 时间：2012-05-12T15:23:28.483
> 
> 标签：java, bytecode, decompiling

我有`byte[]`一个数组，我知道它是类文件中方法的字节码序列。有没有办法对这个`byte[]`数组进行选择性反编译？我无权访问实际`.class`文件。我查看了有很多方法（`javassist.bytecode.CodeAttribute`类）的 Javassist 库，但我找不到这样的特定方法。
有人有线索吗？

我可以`byte[]`使用 JVM 参考手册获取这个数组并生成 JavaByte 代码助记符的实际字节码，但我需要生成反编译的 Java 源代码。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T15:54:28.207

我从未听说过处理单个方法的字节码。我想你会发现你不能用它做任何事情。你有什么字节码？你是从哪里弄来的？您熟悉[类文件格式](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html)以及[方法的存储方式](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.6)吗？例如，[方法的名称](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.6-200-A.9)存储在[常量池中](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.4)，它是整个类文件的一部分，而不是任何方法的一部分。继续阅读方法格式，看看还有什么。我非常怀疑要么你没有你认为你拥有的东西，要么你`byte[]`没有足够的信息来做出任何事情。

免责声明：我只涉足字节码操作，所以不要把我说的话当作权威。相信规范所说的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T05:01:26.367

仅使用特定方法的字节码是不可能生成有效的 Java 源代码的，因为所有名称都存储在类范围的常量池中，等等。您可以期望的最好的结果是生成字节码助记符。

# javascript - 在javascript中制作全局私有变量的方法？

> ID：10564988
> 
> 赞同：3
> 
> 时间：2012-05-12T15:23:45.073
> 
> 标签：javascript

有没有办法在 JavaScript 中创建私有全局变量？我试着环顾四周，我不断地谈论构造函数——这似乎不太全球化。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T16:17:51.900

不确定您的用例是什么。我假设您有一个包含一些函数和变量的 js 脚本文件，并且您希望全局公开其中的一些，但将其余部分保留为您的脚本文件私有。您可以通过闭包来实现这一点。基本上，您创建一个立即执行的函数。在函数内放置原始代码。然后，您将需要的函数导出到全局范围。

```
// Define a function, evaluate it inside of parenthesis
// and execute immediately.
(function(export) {

   var myPrivateVariable = 10;

   function myPrivateFunction(param) {
     return param + myPrivateVariable;
   }

   export.myGlobalFunction = function(someNumber) {
      return myPrivateFunction(someNumber);
   };
})(this);  // The *this* keyword points to *window* which
           // is *the* global scope (global object) in a web browser
           // Here it is a parameter - the *export* variable inside the function.

// This is executed in the global scope
myGlobalFunction(2);  // yields 12 (i.e. 2 + 10)
myPrivateVariable;    // Error, doesn't exist in the global scope
myPrivateFunction(2)  // Error, doesn't exist in the global scope 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T15:28:27.270

要回答您的问题，不，这是不可能的，因为 javascript 中没有访问修饰符。任何函数都可以访问在全局范围内声明的变量。

正如对此答案的评论中所指出的，您可以创建具有私有成员的对象。Crockford[在 Javascript 中有一个关于私人成员](http://javascript.crockford.com/private.html)的页面。他使用以下代码来说明他的观点：

```
function Container(param) {

    // private method
    function dec() {
        if (secret > 0) {
            secret -= 1;
            return true;
        } else {
            return false;
        }
    }

    this.member = param;
    var secret = 3;
    var that = this;

    // privileged method
    this.service = function () {
        return dec() ? that.member : null;
    };
} 
```

在上面的示例中，param、secret 和它们都是私有的，因为它们不能从外部访问。更清楚地说，这些变量只能通过特权或私有方法访问，区别在于可以从对象的任何实例调用特权方法。正如评论中所建议的，这可以通过使用闭包来实现。

引用 Crockford 的关于闭包的快速解释，但你可以找到很多[相关的问题](https://stackoverflow.com/search?q=javascript%20closures)。

> 这意味着内部函数始终可以访问其外部函数的变量和参数，即使在外部函数返回之后也是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-26T18:55:43.197

为了拥有私人成员。你需要使用闭包。

以下代码可帮助您理解该概念。

```
function CustomArray () {
    this.array = [];

    var privateData = 'default data';
    this.getPrivateData = function () {
        return privateData;
    };
    this.setPrivateData = function (data) {
        privateData = data;
    }; 
};

CustomArray.prototype.push = function (data) {
    this.array.push(data);
};

CustomArray.prototype.unshift = function (data) {
    this.array.unshift(data);
};

CustomArray.prototype.pop = function () {
    this.array.pop();
};

CustomArray.prototype.shift = function () {
    this.array.shift();
};

CustomArray.prototype.print = function () {
    console.log(this.array.join(','));
};

var array = new CustomArray();

array.push(10);
array.push(20);
array.push(30);
array.push(5);

array.unshift(3);
array.unshift(2);
array.unshift(1);
array.unshift(0);

array.pop();
array.shift();

array.print();
console.log(array.getPrivateData());// default data 
array.setPrivateData('am new private data');
console.log(array.getPrivateData());//am new private data 
```

# c# - 将委托从一个班级传递到另一个班级

> ID：10564991
> 
> 赞同：1
> 
> 时间：2012-05-12T15:24:05.607
> 
> 标签：c#, delegates

我有两节课，首先：

```
 public class A
    {
        public delegate void Function();

        public string name;
        public Function function;

        public A(string name, Function function)
        {
            this.name = name;
            this.function = function;
        }
    } 
```

在第二个：

```
 public class B
    {
        public delegate void Function();
        List<A> ListA;

        // somewhere in function
        void F()
        {
            ListA[i].function();
        }
        // ---

        public void AddA(string name, Function function)
        {
            ListA.Add(new A(name, function)); // error here
        }
    } 
```

它抛出这些错误：

```
Error   2   Argument 2: cannot convert from 'App.B.Function' to 'App.A.Function'
Error   1   The best overloaded method match for 'App.A.A(string, App.A.Function)' has some invalid arguments 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T15:28:56.107

您已经声明`Function`了两次委托，一次在 A 类中，一次在 B 中。
所以它们是两种不同的类型，一种被称为`App.B.Function`，另一种被称为`App.A.Function`。

如果您想与两个类共享此委托，只需将其声明一次并超出类的范围（即在程序集范围内），例如：

```
public delegate void Function();

public class A
{
    public string name;
    ...
}

public class B
{
    List<A> ListA;
    ...
} 
```

但是，`System`命名空间中存在一定数量的通用委托，可用于表示各种功能。看看`System.Action<>`和`System.Func<>`类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T15:29:28.780

它发生的原因是它`Function`被声明了两次，每个类一次

# google-app-engine - 有没有更好的方法来模拟这种关系？

> ID：10564992
> 
> 赞同：0
> 
> 时间：2012-05-12T15:24:21.103
> 
> 标签：google-app-engine, google-cloud-datastore, mode

我有这些模型：

```
class Assignment(db.Model):
    title = db.StringPeoperty(required=True)
    ...other stuff...

class TeamScore(db.Model):
    assignment = db.ReferenceProperty(Assignment, 
                                      collection_name="teamScores",
                                      required=True)
    teamID = db.IntegerProperty(required = True)
    score = db.IntegerProperty(required = True)
    ...other stuff... 
```

这是人们的问题。在主页中，我想显示每个作业的前三名（基于分数）团队工作。所以，我将它传递给我的模板：

```
assignments = Assignment.all() 
```

在模板中：

```
{% for assignment in assignments%}
    **<!--How to implement showing the top three-->**
    {% for score in assignment.teamScores%}
         {{score.teamID}}
         {{score.score}}
         ...............
    {% endfor%}
{%endfor%} 
```

使用此数据存储模型。我需要在模板中排序，这是不可能的。所以，我认为它可能有更好的模型来处理这个问题。但我无法弄清楚。我想到了这个想法，添加一个 ListProperty 来存储前三个。每次生成新的 TeamScore 时，我都会将其与列表中的分数进行比较，以保持前三名的新鲜度。但我认为这种方式并不优雅。

你能给我一些建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T05:48:13.520

这不是数据建模问题，而是模板问题。您需要获取分配并执行查询以获取代码中的分数列表，并将结果传递到模板中，而不是仅传递分配模型并在模板中完成其余工作。

# regex - 使用正则表达式查找参数

> ID：10564993
> 
> 赞同：0
> 
> 时间：2012-05-12T15:24:49.713
> 
> 标签：regex, sip

我有一个 SIP 消息。我必须为这个 SIP 消息设置一些参数。

SIP 消息：

```
INVITE sip:103@192.168.1.33:5002 SIP/2.0
Via: SIP/2.0/UDP 192.168.1.33:5060;branch=z9hG4bK-d8754z-be6b8b6e6a23b03f-1---d8754z-;rport
Max-Forwards: 70
Contact: <sip:102@192.168.1.33:5060>
To: <sip:103@192.168.1.33:5060>
From: "102"<sip:102@192.168.1.33:5060>;tag=653bd245
Call-ID: NjY1NzU1YTZhZjIzMTYwM2MxMWY5YWNlZDM1MmEwZTg.
CSeq: 1 INVITE
Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REGISTER, SUBSCRIBE, NOTIFY, REFER, INFO, MESSAGE
Content-Type: application/sdp
Supported: replaces
User-Agent: 3CXPhoneSystem 10.0.23053.0
Content-Length: 855

v=0
o=3cxPS 257748369408 287175606273 IN IP4 192.168.1.33
s=3cxPS Audio call
c=IN IP4 192.168.1.33
t=0 0
m=audio 5007 RTP/AVP 8 0 101 98 9 3 100 97 103 15 4 104 105 106 107 18
a=rtpmap:8 PCMA/8000
a=rtpmap:0 PCMU/8000
a=rtpmap:101 telephone-event/8000
a=rtpmap:98 iLBC/8000
a=fmtp:98 mode=30
a=rtpmap:9 G722/8000
a=fmtp:9 bitrate=64000
a=rtpmap:3 GSM/8000
a=rtpmap:100 SPEEX/16000
a=rtpmap:97 SPEEX/8000
a=rtpmap:103 L16/8000
a=rtpmap:15 G728/8000
a=rtpmap:4 G723/8000
a=rtpmap:104 G726-16/8000
a=rtpmap:105 G726-24/8000
a=rtpmap:106 G726-32/8000
a=rtpmap:107 G726-40/8000
a=rtpmap:18 G729/8000
a=fmtp:18 annexb=no
a=sendrecv
m=video 5009 RTP/AVP 102 99 34
a=rtpmap:102 H263-1998/90000
a=fmtp:102 QCIF=1;CIF=1
a=rtpmap:99 H264/90000
a=fmtp:99 packetization-mode=1
a=rtpmap:34 H263/90000
a=fmtp:34 QCIF=1;CIF=1
a=sendrecv 
```

İn消息，在'From'参数，'"102"'处。

而在 'Contact' 参数中，'102@192.168.1.33' 位置由。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T17:15:37.230

这是正则表达式：

```
From: +"(.+?)" 
```

这会将 102 放入捕获组 1。

```
Contact: +<sip:(.+)?:.+> 
```

这会将“102@192.168.1.33”放入捕获组 1。

# php - 如何将 PHP 数组重置为其默认键和值

> ID：10564996
> 
> 赞同：0
> 
> 时间：2012-05-12T15:25:01.060
> 
> 标签：php, arrays, defaults

我有 PHP 数组：

```
$curl_options = array(
    CURLOPT_PORT => 80,
    CURLOPT_CONNECTTIMEOUT => 10,
    CURLOPT_TIMEOUT => 30
); 
```

然后我添加新元素并更改一些值：

```
$curl_options[CURLOPT_USERAGENT] = "Opera/9.02 (Windows NT 5.1; U; en)";

$curl_options[CURLOPT_PORT] = 90; 
```

在此更改后数组变为

```
$curl_options = array(
    CURLOPT_PORT => 90,
    CURLOPT_CONNECTTIMEOUT => 10,
    CURLOPT_TIMEOUT => 30,
    CURLOPT_USERAGENT => Opera/9.02 (Windows NT 5.1; U; en)
); 
```

如何将数组重置为默认值？到

```
$curl_options = array(
    CURLOPT_PORT => 80,
    CURLOPT_CONNECTTIMEOUT => 10,
    CURLOPT_TIMEOUT => 30
); 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T15:27:07.767

您需要制作数组的副本：

```
$curl_options = array(
CURLOPT_PORT => 80,
CURLOPT_CONNECTTIMEOUT => 10,
CURLOPT_TIMEOUT => 30);

$copy = $curl_options;

$curl_options[CURLOPT_USERAGENT] = "Opera/9.02 (Windows NT 5.1; U; en)";
$curl_options[CURLOPT_PORT] = 90;

// Reset
$curl_options = $copy; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T15:27:18.870

这样做的唯一方法是用原始数组覆盖数组，所以只需再次运行它：

```
$curl_options = array(
CURLOPT_PORT => 80,
CURLOPT_CONNECTTIMEOUT => 10,
CURLOPT_TIMEOUT => 30); 
```

PHP 不存储任何修订数据或类似的东西，因此您不能反转数组更改。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-12T15:29:43.510

“真正”的方式是创建一个返回所需数组的函数 getDefaultOptions。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T16:23:51.217

制作 2 个单独的数组 - 1) 默认 2) 扩展。

```
$curl_options_default = array(
    CURLOPT_PORT => 80,
    CURLOPT_CONNECTTIMEOUT => 10,
    CURLOPT_TIMEOUT => 30
);

$curl_options[CURLOPT_USERAGENT] = "Opera/9.02 (Windows NT 5.1; U; en)";
$curl_options[CURLOPT_PORT] = 90;

$curl_options_new = array_replace($curl_options_default, $curl_options); 
```

现在您有 2 个数组：未触及`$curl_options_default`的和新的（带有扩展/替换元素）`$curl_options_new`

# javascript - Dust.js 输出 JSON 密钥

> ID：10564997
> 
> 赞同：1
> 
> 时间：2012-05-12T15:25:07.307
> 
> 标签：javascript, json, dust.js

使用[dust.js](http://akdubya.github.com/dustjs/)，是否可以输出JSON键？

即如何在我的模板中不硬编码它们的情况下输出键“名称”和“配置文件”？

```
{
name: "Foo",
profile: {
           name: "Bar"
         }
} 
```

最终文本、JSON 密钥名称和配置文件没有条形码。

```
name Foo
profile - name - Bar 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T22:37:20.910

你当然可以。像这样定义一个部分：

```
{@keyvalue:cont}
  {key} - {value}
{/keyvalue} 
```

然后像这样重新定义 JSON 上下文：

```
cont:{
    name: "Foo",
    profile: "Bar" //I'm simplifying this a bit for the sake of this example
} 
```

这是为了使上面 keyvalue 部分的上下文被限制为仅“cont”。然后你可以像这样定义键值助手：

```
"keyvalue": function(chunk, context, bodies){
  var items = context.current(), //this gets the current context hash from the Context object (which has a bunch of other attributes defined in it)
      ctx;

  for (key in items) {
    ctx = {"key" : key, "value" : items[key]};
    chunk = chunk.render(bodies.block, context.push(ctx));
  }

  return chunk
} 
```

应该做的伎俩。在dustjs网站上对此进行了测试。希望您可以添加到此以进入嵌套哈希。

例如，如果您需要在上下文中定义 HTML 标记属性，这将特别有用 - 我不想必须定义一组属性，然后在单独的键中定义它们相应的一组值。我希望他们在一起。更易于阅读，更易于管理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-13T16:18:37.813

下面的方法和@asyraf9 的回答几乎一样，只是没有重新定义JSON和一个使用示例。

```
dust.helpers.iterate = function(chunk, context, bodies, params) {
    params = params || {};
    var obj = params['on'] || context.current();
    for (var k in obj) {
        chunk = chunk.render(bodies.block, context.push({key: k, value: obj[k]}));
    }
    return chunk;
} 
```

来源：[https ://github.com/rashad612/dustjs-helpers/commit/9039130dc060a4bf3e93856601891a7da9047bac](https://github.com/rashad612/dustjs-helpers/commit/9039130dc060a4bf3e93856601891a7da9047bac)

在模板中使用它，例如：

```
{#myobject.myarray}
    {@iterate on=.}
        {key} - {value}
    {/iterate}
{/myobject.myarray} 
```

它显示数组内对象的所有键和值。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-30T22:54:53.040

Dust 没有内置此功能，因为从哲学上讲，JSON 永远不应该在密钥中包含数据。考虑将您的数据模型更改为：

```
{
  name: "Foo",
  profile: {
    fields: [
      {
        title: "name",
        value: "Bar"
      }
    ]
  }
} 
```