# StackOverflow 问答 12393000-12393999

# java - 与另一个 NASA Worldwind 相交 SurfaceEllipse

> ID：12393003
> 
> 赞同：0
> 
> 时间：2012-09-12T16:55:37.697
> 
> 标签：java, osgi, worldwind

我这里有一个可渲染层，上面有一堆 SurfaceEllipses。现在我想将每个椭圆与其他所有椭圆相交。

据我所知，WorldWind 中没有这样的方法。但是，有什么办法可以得到边界的交叉点？

谈论 NASA WorldWind

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:57:04.363

AbstractSurfaceShape 对象对其 Sector 对象具有评估器方法。扇区有几种不同的比较方法，包括相交。

您的 SurfaceEllipses 的扇区比较将使您获得出色的第一次通过。在那条射线相交之后，您可以获得相交点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T16:43:12.253

悲伤的答案：不可能。叹。

# r - 解析回“混乱”的 API 结构

> ID：12393004
> 
> 赞同：3
> 
> 时间：2012-09-12T16:55:39.810
> 
> 标签：r, api, parsing, formatting, redcap

我通过 API 从在线数据库 (REDCap) 中获取数据，数据以逗号分隔的字符串形式传递，如下所示，

```
RAW.API <- structure("id,event_arm,name,dob,pushed_text,pushed_calc,complete\n\"01\",\"event_1_arm_1\",\"John\",\"1979-05-01\",\"\",\"\",2\n\"01\",\"event_2_arm_1\",\"John\",\"2012-09-02\",\"abc\",\"123\",1\n\"01\",\"event_3_arm_1\",\"John\",\"2012-09-10\",\"\",\"\",2\n\"02\",\"event_1_arm_1\",\"Mary\",\"1951-09-10\",\"def\",\"456\",2\n\"02\",\"event_2_arm_1\",\"Mary\",\"1978-09-12\",\"\",\"\",2\n", "`Content-Type`" = structure(c("text/html", "utf-8"), .Names = c("", "charset"))) 
```

我有这个脚本可以很好地将其解析为数据框，

```
(df <- read.table(file = textConnection(RAW.API), header = TRUE, 
sep = ",", na.strings = "", stringsAsFactors = FALSE))
  id     event_arm name        dob pushed_text pushed_calc complete
1  1 event_1_arm_1 John 1979-05-01        <NA>          NA        2
2  1 event_2_arm_1 John 2012-09-02         abc         123        1
3  1 event_3_arm_1 John 2012-09-10        <NA>          NA        2
4  2 event_1_arm_1 Mary 1951-09-10         def         456        2
5  2 event_2_arm_1 Mary 1978-09-12        <NA>          NA        2 
```

然后我进行一些计算并将它们写入`pushed_text`，`pushed_calc`然后我需要将数据格式化回它进来的混乱的逗号分隔结构。

我想象这样的事情，

```
API.back <- `some magic command`(df, ...)

identical(RAW.API, API.back)
[1] TRUE 
```

一些命令可以从我制作的数据框中格式化我的数据`df`，回到原始 API 对象进来的结构，`RAW.API`.

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T07:17:43.853

这似乎有效：

```
some_magic <- function(df) {
    ## Replace NA with "", converting column types as needed
    df[] <- lapply(df, function(X) {
                if(any(is.na(X))) {X[is.na(X)] <- ""; X} else {X}
            })

    ## Print integers in first column as 2-digit character strings
    ## (DO NOTE: Hardwiring the number of printed digits here is probably
    ## inadvisable, though needed to _exactly_ reconstitute RAW.API.) 
    df[[1]] <- sprintf("%02.0f", df[[1]])

    ## Separately build header and table body, then suture them together 
    l1 <- paste(names(df), collapse=",")
    l2 <- capture.output(write.table(df, sep=",", col.names=FALSE, 
                                     row.names=FALSE))
    out <- paste0(c(l1, l2, ""), collapse="\n")

    ## Reattach attributes
    att <- list("`Content-Type`" = structure(c("text/html", "utf-8"), 
                .Names = c("", "charset")))
    attributes(out) <- att
    out
}

identical(some_magic(df), RAW.API)
# [1] TRUE 
```

# jquery - html下拉与javascript，Jquery

> ID：12393005
> 
> 赞同：0
> 
> 时间：2012-09-12T16:55:41.793
> 
> 标签：jquery

我正在使用下拉菜单，并且在更改下拉菜单时正在调用 javascript。在 javascript 中，我正在使用 jquery 更改表类的内容。现在的问题是，如果我的下拉菜单需要再次更改，这还不是全部，因为我正在更改javascript 中的内容。

```
 function filterbyaptno(){
         var idno = document.getElementById("aplist").value;
         alert(idno);
          $.ajax({
           url:address ,
           type: 'POST',                    
           data:"idno="+idno,
           success:function(result) { 
               var numRecords = parseInt(result.rows.length);
               if(numRecords>0)
                {
                   var html = '';
                   for(var i = 0; i<numRecords;i++)
                   {
                     html +='<div><table class="support" width="700" cellpadding="10px;">
                      <tr bgcolor="#E8E8E8"><td width="7";>'+result.rows[i].firstname+'</td>'
                     +'<td width="350">'+result.rows[i].advicetoowners+'</td>'
                     +'<td width="7">'+result.rows[i].customdata+'</td><tr></table></div>'
                    }
                      $('.detais').replaceWith(html);//here i change the content of div
                }            
                 $(function() {
                        $('.droplist').change(function(){
                             filterbyaptno();//here i call javascript while dropdown change
                      });
                 });     

                }
           });  } 
```

谁能建议我应该怎么做才能将内容相应地更改为下拉值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:05:32.227

从您的成功 ajax 调用中删除它。它不应该在那里。

```
$(function() {
   $('.droplist').change(function(){
      filterbyaptno();//here i call javascript while dropdown change
   });
}); 
```

并将其放在函数之外`filterbyaptno`，改为使用`.live`。

```
$('.droplist').live('change', function(){
   filterbyaptno();//here i call javascript while dropdown change
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T17:06:55.227

尝试更多类似的东西：

```
function filterbyaptno() {
    var idno = $("#aplist").val();
    $.ajax({
        url: address,
        type: 'POST',
        data: {
            idno: idno
        }
    }).done(function(result) {
        if (result.rows.length) {
            var html = '';
            for (var i = 0; i < result.rows.length; i++) {
                html += '<div><table class="support" width="700" cellpadding="10px;">';
                html += '<tr bgcolor="#E8E8E8"><td width="7";>'+result.rows[i].firstname+'</td>';
                html += '<td width="350">'+result.rows[i].advicetoowners+'</td>';
                html += '<td width="7">'+result.rows[i].customdata+'</td><tr></table></div>';
            }
            $('.detais').replaceWith(html);
        }
    });
}

$(function() {    
    $(document).on('change', '.droplist', filterbyaptno);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T16:59:51.340

很难说没有显示的任何 html（尤其是具有类详细信息的元素） 猜测一下，似乎

```
html +='<div><table cla 
```

应该

```
html +='<div class='details'><table cla 
```

* * *

编辑：

我看到您最初是从一个包含课程详细信息的表开始的。第一次触发该函数时，它会被一个包含类支持表的 div 替换。

因此，您的 html 将从

```
<table class='details'>
...
...
...
</table> 
```

至

```
<div>
 <table class='support'>
 ...
 ...
 ...
 </table>
</div> 
```

这真的是你想要的吗？

# c# - 在代码隐藏中设置 RadPane 的 PaneGroup？

> ID：12393006
> 
> 赞同：1
> 
> 时间：2012-09-12T16:55:49.467
> 
> 标签：c#, silverlight, xaml, telerik, code-behind

我在我的 XAML 中创建了一个带有 rad 窗格的窗格组，如下所示：

```
 <telerik:RadSplitContainer InitialPosition="DockedBottom" telerik:RadDocking.SerializationTag="RaddySplit">
              <telerik:RadPaneGroup telerik:RadDocking.SerializationTag="PaneGroup">
                 <telerik:RadPane Header="WW2 Adventure" telerik:RadDocking.SerializationTag="WW2">
                        <vws:ww2gamegrid  />
                 </telerik:RadPane>
                <telerik:RadPane Header="WW1 Adventure" telerik:RadDocking.SerializationTag="WW1">
                           <vws:ww1gamegrid  />
                </telerik:RadPane>
             </telerik:RadPaneGroup>
            </telerik:RadSplitContainer> 
```

然而，这有一个问题，telerik RadDocking 序列化中存在一个错误，因此当您部署带有附加选项卡的站点时，选项卡的数量会保留在客户端的浏览器隔离存储中。

因此，当我尝试部署我的新 Silverlight 页面时，`WW3gamegrid`在（另一个`RadPane`）中添加了“”，用户仍然返回与上面相同的代码。

在谷歌上搜索了一下，似乎在后面的代码中添加它可以解决我的问题。`RadPane`考虑到这一点`RadPaneGroup`，我如何在`.xaml.cs`后面的代码中添加一个？

当然，该问题的任何其他解决方案都会很乐意听取:)

非常感谢。

我在后面的代码中的代码是从另一个网站偷来的，由于我不明白，所以没有完全实现。我已将它放在 xaml.cs 文件的构造函数中

：

```
InitializeComponent();

 RadPane pane = new RadPane();
 pane.Title = "Pane2";
 pane.Header = "Pane2";
 pane.CanUserClose = false;
 pane.CanDockInDocumentHost = false;
 pane.Content = new Button() { Content = "button2" };
 pane.Tag = "tag";
 pane.PaneGroup();
 RadDocking.SetSerializationTag(pane, "abc"); 
```

本质上，我怎样才能使它与上面的 xaml 等效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T14:43:02.450

要将 RadPane 添加到 RadPaneGroup 只需使用该`AddItem`方法（请参阅[Telerik 文档](http://www.telerik.com/help/silverlight/m_telerik_windows_controls_radpanegroup_additem_1.html)）。

```
RadPaneGroup paneGroup = new RadPaneGroup();

RadPane pane = new RadPane();
pane.Header = "WW1 Adventure";
pane.Content = new ww1gamegrid();
paneGroup.AddItem(pane, Telerik.Windows.Controls.Docking.DockPosition.Center); 
```

# java - Java Runtime.exec() 从参数中删除换行符

> ID：12393010
> 
> 赞同：4
> 
> 时间：2012-09-12T16:56:03.710
> 
> 标签：java, process, runtime.exec, processbuilder

我有一个 Java 类，它使用从数据库中检索到的几个参数之一`Runtime.exec()`来执行一个`cscript`进程 。`String`这些参数之一包括需要保留`Runtime.exec()`的换行符，但会删除换行符。使用时不存在问题`ProcessBuilder`，但我宁愿不必担心解析我的参数列表。

有没有办法在调用时保留换行符`exec()`？

如果有人想看到它，这里有一个调用的简化示例`exec()`：

```
Process proc = Runtime.getRuntime().exec("cscript test.vbs \"line1\r\nline2\""); 
```

我的脚本将“line1 line2”作为一个参数，换行符被空格替换。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T17:11:57.580

您的问题中几乎没有信息，但我猜测您的问题如下。

请注意，[`Runtime.exec(...)`带有字符串命令参数](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#exec%28java.lang.String,%20java.lang.String%5b%5d,%20java.io.File%29)的形式最终将使用 a[`StringTokenizer`](http://docs.oracle.com/javase/6/docs/api/java/util/StringTokenizer.html)来生成实际的命令标记，这可能解释了意外删除换行符的原因。尝试使用[`Runtime.exec(...)`带有*字符串数组*命令参数](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#exec%28java.lang.String%5b%5d%29)的形式，以便不会对字符串命令参数进行解析。

当然，这样做可能需要您自己解析参数，但这可能是确保程序执行您期望的唯一方法。

# r - 图例从 ggplot 图表中溢出

> ID：12393014
> 
> 赞同：1
> 
> 时间：2012-09-12T16:56:21.440
> 
> 标签：r, ggplot2

我正在使用 ggplot2 在一个图表中绘制一堆项目。真诚的可能有 1 到 60 个或更多项目，我正在使用

```
ggplot(df, aes(Date, Value, colour=item, group=item)) + geom_point(size=0.4)    + guides(col = guide_legend(nrow = 30, byrow=TRUE)) 
```

确保我有 30 行。如果大于 30 项，则下一个图例项显示在第二列，依此类推。

但是如果我有更少的项目，比如 2 或 3，图例就会从图表窗口中被推翻。

是否可以选择强制图例使用 ggplot 垂直证明？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T17:18:20.727

```
+ opts(legend.justification=c(0,0.8)) 
```

为我做的。从 0.9.2 版开始，`opts`已被[替换](http://docs.ggplot2.org/current/theme.html)为`theme`：

```
+ theme(legend.justification = c(0,0.8)) 
```

# javascript - JavaScript 错误：Microsoft JScript 运行时错误：预期对象

> ID：12393015
> 
> 赞同：1
> 
> 时间：2012-09-12T16:56:23.377
> 
> 标签：javascript, asp.net

下面是我用于网页的 Ajax TabContainer 的“截断”代码。我需要在 JavaScript 函数中找到容器的选项卡索引，但是当在 JavaScript 中调用这行代码时，我继续收到错误消息“Microsoft JScript 运行时错误：预期对象”：

```
 function doValidate() {
            var tabIndex = $('#tabs_header span.ajax_tab_active').index() 
```

如果我注释掉“var tabIndex ...”部分，我不会得到错误，所以我想知道是否有人可以告诉我这里发生了什么。下面是 tabContainer 的代码。我已经“截断”了，因为它是一个非常大的表单，有超过 12 个文本框输入。两个选项卡代表两种不同的搜索方法。通过单击“搜索”按钮，doValidate() 方法是第一个调用的操作，甚至在站点进入后面的代码之前。此外，无论哪个选项卡处于活动状态，我都会在同一行代码上收到相同的错误消息。

```
 <asp:TabContainer ID="AdvOrBasicSearch" runat="server" ActiveTabIndex="0">
    <div id="tabs_header">
        <span id="tab1" class="ajax_tab_active">
        <asp:TabPanel ID="basicSearch" runat="server" HeaderText="Basic Search">.../asp:TabPanel>                

        </span>
        <span id="tab2" class="ajax_tab_active">
        <asp:TabPanel ID="advSearch" runat="server" HeaderText="Advanced Search">...</asp:TabPanel>
        </span>
    </div>
    </asp:TabContainer> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:02:01.077

我很快就找到了这个问题的答案。我需要创建一个 JS 变量，它是 tabContainer 本身。然后，我只需要进入并获取 _activeTabIndex 属性值。下面是修改后的代码

```
 function doValidate() {
            var tabIndex = $find("AdvOrBasicSearch");
            var i = tabIndex._activeTabIndex; 
```

# android - 铃声选择器 - 单选按钮集

> ID：12393016
> 
> 赞同：21
> 
> 时间：2012-09-12T16:56:28.733
> 
> 标签：android, radio-button

我可以成功调出铃声选择器并使用以下代码获得结果 uri...

```
 selsound_button.setOnClickListener(new OnClickListener()
    {   
        public void onClick(View arg0)
        {
            Intent intent = new Intent(RingtoneManager.ACTION_RINGTONE_PICKER);
            intent.putExtra(RingtoneManager.EXTRA_RINGTONE_TITLE, "Select ringtone for notifications:");
            intent.putExtra(RingtoneManager.EXTRA_RINGTONE_SHOW_SILENT, false);
            intent.putExtra(RingtoneManager.EXTRA_RINGTONE_SHOW_DEFAULT, true);
            intent.putExtra(RingtoneManager.EXTRA_RINGTONE_TYPE,RingtoneManager.TYPE_ALARM);
            startActivityForResult( intent, 999);   
        }
    }); 
```

...但我未能弄清楚如何执行以下操作：

鉴于我已经知道当前的 uri，我希望告诉选择器它当前已被选中，以便它可以突出显示正确的单选按钮。目前，在我按下其中一个之前，根本没有选择任何单选按钮。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-18T12:25:01.113

您需要添加

```
 intent.putExtra(RingtoneManager.EXTRA_RINGTONE_EXISTING_URI, currenturi); 
```

设置单选按钮

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-10-06T09:13:50.077

这是适合您的确切代码。

```
selsound_button.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {
            final Uri currentTone= RingtoneManager.getActualDefaultRingtoneUri(YourActivity.this, RingtoneManager.TYPE_ALARM);
            Intent intent = new Intent(RingtoneManager.ACTION_RINGTONE_PICKER);
            intent.putExtra(RingtoneManager.EXTRA_RINGTONE_TYPE, RingtoneManager.TYPE_ALARM);
            intent.putExtra(RingtoneManager.EXTRA_RINGTONE_TITLE, "Select Tone");
            intent.putExtra(RingtoneManager.EXTRA_RINGTONE_EXISTING_URI, currentTone);
            intent.putExtra(RingtoneManager.EXTRA_RINGTONE_SHOW_SILENT, false);
            intent.putExtra(RingtoneManager.EXTRA_RINGTONE_SHOW_DEFAULT, true);
            startActivityForResult(intent, TONE_PICKER);
        }

    }); 
```

# java - 在java桌面应用程序中将图像文件保存到本地系统

> ID：12393019
> 
> 赞同：0
> 
> 时间：2012-09-12T16:56:31.620
> 
> 标签：java

我想保存由 JFileChooser 选择的图像文件。该文件应保存到我在 java 桌面应用程序中的本地系统中。怎么可能？？请帮我做这件事..我正在使用以下代码来选择图像文件

```
public static String Filechooser(Component parent)
    {
        JFileChooser fcProductImage = new JFileChooser();
        int returnVal = fcProductImage.showOpenDialog(parent);

    if (returnVal == fcProductImage.APPROVE_OPTION) 
    {
        java.io.File file = fcProductImage.getSelectedFile();
        return file.getAbsolutePath();
    } 
    else 
    {
        return "";
    }
} 
```

先感谢您！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:00:29.137

利用`ImageIO.write(image,extension,file);`

**请参阅下面的代码片段：**

```
JFileChooser FC=new JFileChooser("C:/");
FC.addChoosableFileFilter(new jpgSaveFilter());
FC.addChoosableFileFilter(new jpegSaveFilter());
FC.addChoosableFileFilter(new PngSaveFilter());
FC.addChoosableFileFilter(new gifSaveFilter());
FC.addChoosableFileFilter(new BMPSaveFilter());
FC.addChoosableFileFilter(new wbmpSaveFilter()); 

int retrival=m_fileChooser_save.showSaveDialog(null);

if (retrival == m_fileChooser_save.APPROVE_OPTION) 
   {

        String ext="";

        String extension=m_fileChooser_save.getFileFilter().getDescription();

       if(extension.equals("*.jpg,*.JPG"))
      { 
          ext=".jpg";
      }
      if(extension.equals("*.png,*.PNG"))
      { 
          ext=".png";
      }
      if(Extension.equals("*.gif,*.GIF"))
      { 
          ext=".gif";
      }
      if(extension.equals("*.wbmp,*.WBMP"))
      { 
          ext=".wbmp";
      }
      if(Extension.equals("*.jpeg,*.JPEG"))
      { 
          EXT=".jpeg";
      }
      if(extension.equals("*.bmp,*.BMP"))
      { 
          ext=".bmp";
      } 
```

**示例过滤器：**

```
 import java.io.*;
 import java.io.File;
 import java.util.*;
 import javax.swing.filechooser.FileFilter;   
 class jpgSaveFilter extends FileFilter
 { 
    public boolean accept(File f)
   {
        if (f.isDirectory())
          {
            return false;
          }

         String s = f.getName();

        return s.endsWith(".jpg")||s.endsWith(".JPG");
   }

   public String getDescription() 
  {
       return "*.jpg,*.JPG";
  }

} 
```

# grails - Grails：将堆栈跟踪记录到标准输出

> ID：12393020
> 
> 赞同：3
> 
> 时间：2012-09-12T16:56:43.980
> 
> 标签：grails, grails-2.0

当我启动我的 grails 应用程序时，我收到以下错误：

> java.io.FileNotFoundException：stacktrace.log（权限被拒绝）

我知道这可以通过 chowning 一些文件/目录或更改日志转到的文件来解决，但我不希望这样：我只想将 stracktraces 记录到标准输出。

该[文档](http://grails.org/doc/2.1.0/guide/conf.html)指出：

> 例如，如果您希望将完整的堆栈跟踪信息转到控制台，请添加以下条目：
> 
> 错误标准输出：“StackTrace”

但是：它还指出：

> 这不会阻止 Grails 尝试创建 stacktrace.log 文件——它只是重定向堆栈跟踪的写入位置。

然后：

> 或者，如果您根本不想使用“stacktrace”附加程序，请将其配置为“空”附加程序：

```
log4j = {
    appenders {
        'null' name: "stacktrace"
    }
} 
```

我结合2并得到以下配置：

```
// log4j configuration
environments {
    production {
        log4j = {
            appenders {
                console name:'stdout', layout:pattern(conversionPattern: '%c{2} %m%n')
                // Don't use stacktrace.log
                'null' name: "stacktrace"
            }
        }

    }
}

log4j = {
    // print the stacktrace to stdout
    error stdout:"StackTrace"
} 
```

不幸的是，这不起作用：

> 信息：部署 Web 应用程序存档 MyBackend.war
> 
> 2012 年 9 月 12 日下午 4:46:11 org.apache.catalina.core.StandardContext 开始
> 
> 严重：错误 listenerStart
> 
> 2012 年 9 月 12 日下午 4:46:11 org.apache.catalina.core.StandardContext 开始
> 
> 严重：上下文 [/MyBackend2] 启动因先前的错误而失败

诚然，它不再尝试写入 stacktrace.log，因此不再抛出 Permission denied 错误，但我不知道为什么应用程序无法启动，因为它记录的唯一内容是“Error listenerStart”

谁能帮我配置我的应用程序以将堆栈跟踪记录到标准输出？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-12T17:43:17.040

Grails 错误报告： http: [//jira.grails.org/browse/GRAILS-2730](http://jira.grails.org/browse/GRAILS-2730) （包含一些解决方法）

如果您希望堆栈跟踪到标准输出：

```
log4j = {
  appenders {
    console name:'stacktrace'
    ...
  }
...
} 
```

禁用 stacktrace.log：

```
log4j = {
  appenders {
    'null' name:'stacktrace'
    ...
  }
...
} 
```

堆栈跟踪到 Tomcat 日志目录中的应用程序特定日志文件

```
log4j = {
  appenders {
    rollingFile name:'stacktrace', maxFileSize:"5MB", maxBackupIndex: 10, file:"${System.getProperty('catalina.home')}/logs/${appName}_stacktrace.log", 'append':true, threshold:org.apache.log4j.Level.ALL
    ...
  }
...
} 
```

感谢这篇博文：http: [//haxx.sinequanon.net/2008/09/grails-stacktracelog/](http://haxx.sinequanon.net/2008/09/grails-stacktracelog/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T18:27:27.343

Here is what I have to deal with this:

```
log4j = {
    appenders {
        // Be smart if we are running in tomcat or not 
        String logDir = Environment.warDeployed ? 
                System.getProperty('catalina.home') + '/logs' : 
                'target'

        // Handle the stacktrace log correctly
        rollingFile name:'stacktrace',
                maxFileSize: "5MB",
                maxBackupIndex: 10,
                file: "${logDir}/${appName}_stacktrace.log",
                layout: pattern(conversionPattern: "'%d [%t] %-5p %c{2} %x - %m%n'"),
                'append': true,
                threshold: org.apache.log4j.Level.ALL
    }
} 
```

This lets us gracefully handle being deployed as a WAR in Tomcat, as well as in development. It also has the advantage of allowing multiple grails applications to run within the same container without mushing all of their stacktrace logs together.

Inspiration for this comes from @FlareCoder's [answer above](https://stackoverflow.com/a/12393628/20770), as well as from @BurtBeckwith's [mailing list post](http://grails.1312388.n4.nabble.com/stacktrace-log-tt4635524.html#a4635533).

# jquery - 如何更改 DIV 中某些内联块元素的对齐方式？

> ID：12393022
> 
> 赞同：0
> 
> 时间：2012-09-12T16:56:59.877
> 
> 标签：jquery, css, alignment

我试图实现一个内联块元素，将左对齐，另一个将右对齐，而不改变它们的显示类型。

我想要一个 CSS 版本，否则我也可以使用 jQuery 方法。

我的意思是，我只想显示前两个按钮在左侧对齐，第三个按钮在右侧对齐。

[jsBin 不工作的例子](http://jsbin.com/ibifoq/8/edit)

```
<table>
    <thead>
      <tr>
        <th>
          <div style="background-color: lightblue; width: 600px;">
            <span style="display: inline-block; height:20px; background-color: red; margin: 5px 3px;float: left;">
              Button
            </span>

            <span style="display: inline-block; height:20px; background-color: red; margin: 5px 3px; float:right;">
              Button right
            </span>
        </div>
        </th>
      </tr>
    </thead>
    <tbody>
      <tr><td>where did the background of the header cell go? the background is still there if the elements do not float.</td></tr>
    </tbody>
  </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:25:56.513

只需将属性设置`float:right`为您的`span`元素。

[工作示例](http://jsbin.com/ibifoq/10/edit)

在您在评论中提供的第二个示例中，即带有表格的示例中，您只是遇到了这个问题，因为您没有将样式设置为`th`标签，而是设置了`div`标签。如果你设置标签的`background-color`和属性，你会得到你想要的`width`。`th`

[另一个工作示例](http://jsfiddle.net/MwZc8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T18:08:25.510

`<span>`'s 是本机的内联块元素——所以声明是不必要的。您还可以将 CSS 应用于`<th>`元素，而不是将所有内容都包装在其中`<div>`，然后使用`:last-child`. 从技术上讲，你可以去掉`float:left`，但它会导致额外的 CSS 垂直对齐按钮。

```
CSS
    th { background-color:lightblue; width:600px; }
    th span { background-color:red; float:left; height:20px; margin:5px 3px; }
    th span:last-child { float:right }

HTML
    <th>
        <span>Button</span>
        <span>Button</span>
        <span>Button right</span>
    </th> 
```

# ruby-on-rails - 不返回数组 - Rails 模型函数

> ID：12393024
> 
> 赞同：0
> 
> 时间：2012-09-12T16:57:13.240
> 
> 标签：ruby-on-rails, ruby, mailchimp

我的模型中有这样的方法`Post`：

```
def self.post_template
    posts = Post.all
    result = []

    posts.each do |post|
        single_post = {}
        single_post['comment_title'] = post.comment.title
        single_post['comment_content'] = post.comment.content

        result << single_post
    end

    # return the result
    result
end 
```

在我的一项 rake 任务中，我调用了该函数：

```
namespace :post do
    task :comments => :environment do
        comments = Post.post_template
        puts comments
    end
end 
```

在控制台中，返回值不是`Array`; 相反，它打印由换行符分隔的所有哈希：

```
{ 'comment_title' => 'stuff', 'comment_content' => 'content' }
{ 'comment_title' => 'stuff', 'comment_content' => 'content' }
{ 'comment_title' => 'stuff', 'comment_content' => 'content' } 
```

但是，当我在我的 中运行它时`rails console`，我得到了预期的行为：

```
> rails c
> comments = Post.post_template
-- [{ 'comment_title' => 'stuff', 'comment_content' => 'content' }, 
   { 'comment_title' => 'stuff', 'comment_content' => 'content' }] 
```

不用说，我很困惑，会喜欢任何形式的指导！谢谢你。

**编辑：**

似乎 rake 任务只是像这样打印出数组，但是当我将数组的结果设置为另一个哈希时，它似乎并没有保持数组的完整性：

```
namespace :post do
    task :comments => :environment do
        comments = Post.post_template

        data = {}
        data['messages'] = comments
    end
end 
```

我正在使用`Mandrill`(plugin for `Mailchimp`) 创建这些消息，它会抛出一个错误，指出我传入的不是`Array`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:03:33.413

我认为这就是 rake 打印数组的方式。尝试这个：

```
task :array do
    puts ["First", "Second"]
end 
```

现在：

```
> rake array
First
Second 
```

# c# - 如何知道在 WP7 的 Grid 中单击了哪一行（并访问其数据）？

> ID：12393025
> 
> 赞同：1
> 
> 时间：2012-09-12T16:57:19.770
> 
> 标签：c#, wpf, silverlight, windows-phone-7

我有以下 XAML：

```
<Grid x:Name="ContentPanelDaily"
  Grid.Row="1"
  <Grid.RowDefinitions>
    <RowDefinition Height="40" />
  </Grid.RowDefinitions>
  <Grid.ColumnDefinitions>
     <ColumnDefinition Width="60" />
     <ColumnDefinition Width="80" />
  </Grid.ColumnDefinitions>

  <TextBlock Grid.Row="0"
     Grid.Column="0"
     Style="{StaticResource PhoneTextAccentStyle}"
     Margin="0,0,0,0">
            First
   </TextBlock>
   <TextBlock Grid.Row="0"
     Grid.Column="1"
     Style="{StaticResource PhoneTextAccentStyle}"
     Margin="0,0,0,0">
          Second
   </TextBlock>
</Grid> 
```

如何检测在 Tap 事件中单击了哪一行？我试图找到`SelectedRow`或类似的东西，但似乎网格中没有类似的东西。非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:26:43.550

将您的数据放入一个按钮，并订阅`OnClick`事件。

```
<Button OnClick="evetnHandler">
<TextBlock Grid.Row="0"
     Grid.Column="0"
     Style="{StaticResource PhoneTextAccentStyle}"
     Margin="0,0,0,0">
            First
   </TextBlock>
</Button> 
```

此外，正如@Rachel 所说：您可以使用 ListBox。

```
<ListBox ItemsSource="{Binding Items}" 
  SelectedItem="{Binding Selected, Type=TwoWay}">
<ListBox.ItemTemplate>
<DataTemlate>
    <TextBlock
         Style="{StaticResource PhoneTextAccentStyle}"
         Margin="0,0,0,0" Text="{Binding Name}"/>
</DataTemplate>
</ListBox.ItemTemplate>
</ListBox> 
```

并在代码隐藏中创建

```
public ObservableCollection<DataItem> Items {get;set;}

private DataItem _selected;
public DataItem Selected
{
  get {return _selected;}
  set 
{
  _selected = value;
  //ha! item selected!!! handle it
}

}

public class DataItem 
{
   public string Name {get;set;}
} 
```

# excel - 有没有办法查看一个单元格是否在公式中使用并用条件格式标记它

> ID：12393028
> 
> 赞同：2
> 
> 时间：2012-09-12T16:57:30.167
> 
> 标签：excel, vba, excel-formula

我已经设置了使用零件号作为参考的库存表，当它与零件号匹配时，有一个过时的*注销*表进入当前库存表的公式。

由于人为错误和输入部件号的错误，我想知道是否使用了被注销的值，如果使用了绿色检查或灯，如果未使用，则可能带有红色 X 或灯。

所以我需要一些可以做以下事情的东西：

```
=IF cell A1 is used in any formula in Sheet1!B:B THEN mark with green check, IF cell A1 is not used in any formula in Sheet1!B:B THEN mark it with a red X 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:02:22.587

[这个微软帮助](http://office.microsoft.com/en-in/excel-help/display-the-relationships-between-formulas-and-cells-HP005201110.aspx)可以让你非常接近你的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T03:39:38.593

这段代码：

*   测试第一张工作表的 A1:A10 中的每个单元格是否直接依赖于第二张工作表（需要进一步细化以测试是否存在其他工作表上的中间参考）
*   如果存在依赖于 sheet2，则将这些单元格着色为红色，否则清除内部格式

**设置要测试的区域**

```
 Sub test()
    Dim rng1 As Range
    Dim rng2 As Range
    Set rng1 = Sheets(1).[a1:a10]
    Application.ScreenUpdating = False
    For Each rng2 In rng1.Cells
    If oneCellsDependents(rng2) Then
    rng2.Interior.Color = vbRed
    Else
    rng2.Interior.Color = xlNone
    End If
    Next
    Application.ScreenUpdating = True
    End Sub 
```

**依赖查找器**

```
 Function oneCellsDependents(rng1 As Range) As Boolean
 ' written by Bill Manville
 ' With edits from PaulS
 ' this procedure  finds the  cells which are the direct precedents of the active cell
Dim rLast As Range, iLinkNum As Long, iArrowNum As Long
Dim bNewArrow As Boolean
Application.ScreenUpdating = False
rng1.ShowDependents
Set rLast = rng1
iArrowNum = 1
iLinkNum = 1
bNewArrow = True
Do
If oneCellsDependents Then Exit Do
    Do
        Application.Goto rLast
        On Error Resume Next
        rng1.NavigateArrow TowardPrecedent:=False, ArrowNumber:=iArrowNum, LinkNumber:=iLinkNum
        If Err.Number > 0 Then Exit Do
        On Error GoTo 0
        If rLast.Address(external:=True) = ActiveCell.Address(external:=True) Then Exit Do
        bNewArrow = False
                   If ActiveCell.Parent.Name = Sheets(2).Name Then
            oneCellsDependents = True
               Exit Do
        End If
        iLinkNum = iLinkNum + 1 ' try another  link
    Loop
    If bNewArrow Then Exit Do
    iLinkNum = 1
    bNewArrow = True
    iArrowNum = iArrowNum + 1 'try another arrow
Loop
rLast.Parent.ClearArrows
Application.Goto rLast
End Function 
```

# magento - Magento - 如何以编程方式将多个项目添加到购物车？

> ID：12393031
> 
> 赞同：2
> 
> 时间：2012-09-12T16:57:49.750
> 
> 标签：magento, cart, product

我正在尝试使用如下查询字符串同时将多个简单产品添加到购物车，但是它只将最后一个产品添加到购物车而不是两者：

有人可以让我知道我做错了什么吗？

```
http://www.domain.co.uk/checkout/cart/add?product=9916&qty=4&product=15749&qty=4 
```

我也试过这个：

```
http://www.domain.co.uk/checkout/cart/add?product[]=9916&qty[]=4&product[]=15749&qty[]=4 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-24T17:27:43.447

**使用查询字符串将产品添加到购物车**

*   在购物车中添加没有属性的简单产品。

    ```
    http://yourserver.com/checkout/cart/add?product=PRODUCT_ID&qty=PRODUCT_QUANTITY
    ```

    这里 PRODUCT_ID = '产品 ID',PRODUCT_QUANTITY = '要购买的产品数量'。
*   使用单一客户选项将产品添加到购物车中。

    ```
    http://yourserver.com/checkout/cart/add?product=PRODUCT_ID&qty=PRODUCT_QUANTITY&super_attribute[OPTION_ID]=OPTION_VALUE
    ```

    这里 OPTION_ID = '自定义属性选项 id',OPTION_VALUE = '自定义属性选项值'。
*   使用多客户选项将产品添加到购物车中。

    ```
    http://yourserver.com/checkout/cart/add?product=PRODUCT_ID&qty=PRODUCT_QUANTITY&super_attribute[OPTION_ID_1]=OPTION_VALUE_1&super_attribute[OPTION_ID_2]=OPTION_VALUE_2
    ```

    这里 OPTION_ID_1 & OPTION_ID_1 = '自定义属性选项 ids',OPTION_VALUE_1 & OPTION_VALUE_2 = '自定义属性选项值'。这里在 `super_attribute` 数组中添加更多选项
*   使用仅 1 个数量的邮件产品添加额外产品。

    ```
    http://yourserver.com/checkout/cart/add?product=PRODUCT_ID&qty=PRODUCT_QUANTITY&related_product=PRODUCT_ID_1,PRODUCT_ID_2
    ```

    这里 PRODUCT_ID_1 和 PRODUCT_ID_2 是其他产品 ID。使用 `,` 分隔符通过 id 添加更多产品。示例：- &related_product=1,2,3,4。

默认magento没有设置将相关产品数量添加到购物车中。所以如果您想添加此代码而不是打开`app/code/core/Mage/Checkout/controllers/CartController.php`find `public function addAction()`。

```
if (!empty($related)) {
                $cart->addProductsByIds(explode(',', $related));
            }
```

用。。。来代替

```
$rel_qty = $this->getRequest()->getParam('related_qty');
            if (!empty($related)) {
                $relatedproducts = explode(',', $related);
                $relatedqtys = explode(',',$rel_qty);
                $i = 0;
                foreach($relatedproducts as $relatedproduct)
                {
                    $cart->addProduct($relatedproduct, array('qty'=>$relatedqtys[$i]));
                $i++;
                }
            }
```

现在使用查询字符串添加相关产品的数量。

```
http://yourserver.com/cart/add?product=PRODUCT_ID&qty=PRODUCT_QUANTITY&related_product=PRODUCT_ID_1,PRODUCT_ID_2&related_qty=PRODUCT_ID_1_QUANTITY,PRODUCT_ID_2_QUANTITY
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T17:19:54.833

如果您不想更改任何代码，可以尝试通过在请求中添加相关产品参数**来利用***相关*产品功能。所以你的网址看起来像这样：

 **```
http://www.domain.co.uk/checkout/cart/add?product=9916&qty=4&related_product=15749 
```

如果您想添加更多产品，只需使用逗号分隔符列出它们：`related_product=1,2,3` 唯一的缺点是您实际上无法指定相关产品的数量。看看它是如何工作的 -`Mage_Checkout_Model_Cart::addProductsByIds(array_of_ids)`

如果后续产品的数量对您来说是强制性的，您将需要创建自己的控制器，或覆盖该`Mage_Checkout_CartController::addAction`方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-02T08:45:12.303

我发现了一种厚颜无耻的方法，可以绕过上述其他答案中提到的相关产品查询字符串字段的数量限制。如果您只是将 SAME ID MULTIPLE TIMES 放在related_products 的值中，与您需要的数量一样多，那么这将达到与每个相关产品都有一个明确的数量字段相同的效果。因此，采用上面 himansu 的答案并对其进行调整，我们得到：
[http://yourserver.com/checkout/cart/add?product=PRODUCT_ID&qty=PRODUCT_QUANTITY&related_product=PRODUCT_ID_1,PRODUCT_ID_1,PRODUCT_ID_1,PRODUCT_ID_2,PRODUCT_ID_2](http://yourserver.com/checkout/cart/add?product=PRODUCT_ID&qty=PRODUCT_QUANTITY&related_product=PRODUCT_ID_1,PRODUCT_ID_1,PRODUCT_ID_1,PRODUCT_ID_2,PRODUCT_ID_2)

这会将 PRODUCT_ID 的 PRODUCT_QUANTITY、PRODUCT_ID_1 的 3 个和 PRODUCT_ID_2 的 2 个添加到购物车。

因此，只要您愿意做一些工作来多次生成相同的 ID，这就是一种享受。并且您的 magento 服务器上不需要更改自定义代码。**

# ios - 关闭 UIPopoverController 的最快方法是什么？

> ID：12393032
> 
> 赞同：1
> 
> 时间：2012-09-12T16:57:56.247
> 
> 标签：ios, ipad, uipopovercontroller

我将来自 UIPopoverController 的通知发布回我的主视图，然后立即调用dismissPopoverAnimated，然后开始做一些相当繁重的工作来加载 Web 视图。所有这些代码都有效；问题在于，在一些较旧的 ipad 上，直到 CPU 密集型工作完成（在调试器中验证）之后，popover 才会真正解除。这会导致弹出框在被解雇后似乎挂起一秒钟。如何确保立即关闭弹出窗口而不是先执行密集代码？

响应通知的方法如下：

```
- (void)changeDefaultView:(NSNotification *)note
{
    [self closePopover];

    int i;
    for(i = 0; i < [arrWebViewControllers count]; i++)
    {
        WebViewController *wvc = [arrWebViewControllers objectAtIndex:i];
        [[wvc webview] stopLoading];
        [[wvc webview] removeFromSuperview];
        [[wvc imageview] removeFromSuperview];
        wvc = nil;
    }

    [arrWebViewControllers removeAllObjects];
    [arrLinks removeAllObjects];
    [arrImageViews removeAllObjects];

    [self loadCategory:[note object]];

    [self addWidgetsToView];
} 
```

而 closePopover 是：

```
- (void)closePopover
{
    if(popover != nil)
    {
        [popover dismissPopoverAnimated:YES];
        popover = nil;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:18:00.523

消失的弹出框的动画发生在主运行循环上；如果您在主线程上执行繁重的 CPU 工作，那么循环将没有机会运行。所以你需要做的是在后台线程上执行你的工作。

目前首选的方法是使用 Grand Central Dispatch，如下所示：（我假设这`loadCategory:`是 CPU 密集型操作）

```
- (void)changeDefaultView:(NSNotification *)note
{
    [self closePopover];

    int i;
    for(i = 0; i < [arrWebViewControllers count]; i++)
    {
        WebViewController *wvc = [arrWebViewControllers objectAtIndex:i];
        [[wvc webview] stopLoading];
        [[wvc webview] removeFromSuperview];
        [[wvc imageview] removeFromSuperview];
        wvc = nil;
    }

    [arrWebViewControllers removeAllObjects];
    [arrLinks removeAllObjects];
    [arrImageViews removeAllObjects];

    // perform the expensive operation on a background thread
    dispatch_async(dispatch_get_global_queue(0, 0), ^{

        [self loadCategory:[note object]];

        // now get back onto the main thread to perform our UI update
        dispatch_async(dispatch_get_main_queue(), ^{

            [self addWidgetsToView];

        });

    });
} 
```

# algorithm - 您如何在代码中获得各种算法分析因素？

> ID：12393035
> 
> 赞同：3
> 
> 时间：2012-09-12T16:58:02.377
> 
> 标签：algorithm, analysis

我正在尝试准备一个演示文稿，向我的同事解释算法分析的基础知识——他们中的一些人以前从未有过关于这个主题的讲座，但每个人都至少有几年的编程经验和良好的数学背景，所以我想我可以教这个。我可以很好地解释这些概念，但我需要一些导致因素的代码结构或模式的具体示例，以便我可以演示它们。

几何因素（n、n^2、n^3 等）很简单，嵌入循环使用相同的标记，但我迷失了如何描述和展示一些不太常见的因素。

我想在演示文稿中加入*指数*（2^n 或 c^n）、*对数*（n log(n) 或只是 log(n)）和*因子*（n！）因素。有哪些简短的、可教的方法可以在代码中获取这些内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T17:04:31.730

一个分而治之的算法，每次将问题一分为二，都会做一定的工作量`O(log n)`。例如二分查找。

一种分治算法，每次将问题分成两半时都会做线性工作`O(n * log n)`。例如合并排序。

通过分别迭代集合的所有子集或集合的所有排列，可能最好地说明指数和阶乘。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T17:05:05.260

嗯！问题很简单。有许多 NP-完全 n! [旅行商问题](http://en.wikipedia.org/wiki/Travelling_salesman_problem)等时间问题

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T17:06:08.170

指数：[天真的斐波那契实现](http://homepage.cs.uiowa.edu/~sriram/80/spring2009/notes/exponentialRunningTime.html)。

n log(n) 或只是 log(n)：[排序](http://en.wikipedia.org/wiki/Quicksort)和[二进制搜索](http://en.wikipedia.org/wiki/Binary_search_algorithm)

Factorial：天真的旅行推销员解决方案。NP完全问题的许多幼稚解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T17:09:09.217

毫无疑问，选择一种排序算法 - 每个人都知道他们应该做什么，因此它们很容易解释与复杂性相关的东西：[维基百科有一个很好的概述](http://en.wikipedia.org/wiki/Sorting_algorithm)

# php - 插件“jfdatabase”已经存在 joomfish

> ID：12393038
> 
> 赞同：0
> 
> 时间：2012-09-12T16:58:28.813
> 
> 标签：php, mysql, joomla, joomfish

我的 joomla 版本是 1.5.24 和 joomfish 2.2.3。在我安装 joomfish 后，它说错误：插件“jfdatabase”已经存在。我已经删除了所有包含“joomfish”和“jf”的文件。我对数据库表做了同样的事情。但错误仍然存​​在。是否有一些我没有删除的文件/表格

欧梅里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:23:52.063

备份数据库，在（例如）Notepad ++中打开它，打开“jf”过滤器，它与JoomFish有任何关系，删除它，然后重新上传数据库。

您可能还需要仔细检查 FTP，以获取对 JoomFish 的任何引用。

希望这可以帮助

# c# - 使用 ReSharper 以与实现的接口相同的顺序排列成员

> ID：12393043
> 
> 赞同：16
> 
> 时间：2012-09-12T16:59:11.317
> 
> 标签：c#, resharper

是否可以使用 ReSharper 的类型布局功能以与接口中声明的顺序相同的顺序对实现接口的成员进行排序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T13:45:03.260

不，不幸的是你不能直接这样做。但是，就像基里尔所说的那样，您可以使用相同的规则让他们订购。

此外，您可以通过修改 CodeCleanup 配置文件让 Resharper 将接口的成员分组到一个区域：

```
<Group>
    <ImplementsInterface Immediate="true" Region="${ImplementsInterface} Members"/>
</Group> 
```

另请参阅：[Resharper 文档](http://www.jetbrains.com/resharper/webhelp/Code_Cleanup__Usage_Scenarios__Reordering_Type_Members.html)

自动分组和排序后，您可以通过 Resharper“文件结构”调整结果。

# python - VisualStudio 2012 中的 IronPython

> ID：12393044
> 
> 赞同：5
> 
> 时间：2012-09-12T16:59:16.047
> 
> 标签：python, visual-studio, visual-studio-2012, ironpython, ptvs

VisualStudio 2012 中是否支持 IronPython？我没有在模板中找到 IronPython 项目。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T03:42:38.590

是的：http: [//pytools.codeplex.com/](http://pytools.codeplex.com/)。在 PTVS 1.5 RC [2012 年 9 月] 中添加了支持。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-03T17:22:43.373

适用于 Visual Studio 的 Python 工具、[PTVS 2.0 Beta 或 1.5 RTM](https://pytools.codeplex.com/)都内置了用于针对 IronPython 进行开发的模板。要使用这些模板，您需要先安装 IronPython。查看 PTVS 上的[安装页面](https://pytools.codeplex.com/wikipage?title=PTVS%20Installation)，其中包含有关如何安装解释器的说明。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T18:11:34.957

默认情况下，没有。据推测， [PTVS 不久](http://pytools.codeplex.com/)就会出现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T13:56:52.397

似乎 PTVS（Visual Studio 的 Python 工具）2.0 默认不会安装 IronPython。我成功地将[PTVS 2.0 Alpha](http://pytools.codeplex.com/releases/view/72638)和[IronPython 2.7.3](http://ironpython.codeplex.com/releases/view/81726)从其单独的项目页面安装到 Visual Studio 2012 中。

# c# - 调试/发布模式与已安装程序之间是否存在差异？

> ID：12393045
> 
> 赞同：-1
> 
> 时间：2012-09-12T16:59:16.707
> 
> 标签：c#, .net, nlog

我有一个 c# 桌面应用程序（.Net4），当我在调试/发布模式下运行它时一切正常，当我安装程序并运行它时，**除了**日志模块之外一切正常。

我的日志模块与 NLog 一起使用，它在网格中显示日志消息并将它们写入 csv 文件。

我在具有管理员权限的win7上工作

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:02:45.503

查看您的日志记录配置。很有可能，您的日志记录被配置为在发布模式下跳过非关键消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T19:41:05.443

确保所有配置都有正确的设置。调试、构建和发布通常都因环境而异。因此，请确保您的发布配置实际上与安装环境匹配。

# python - python - 子进程Windows批处理命令？

> ID：12393066
> 
> 赞同：0
> 
> 时间：2012-09-12T17:00:56.090
> 
> 标签：python, windows, batch-file, subprocess

我想使用格式化驱动器`subprocess`并让窗口命令提示符弹出以查看结果，但是这样做时：

```
subprocess.Popen(["FORMAT", drive, "/FS:FAT32", "/A:32K"], shell=True).communicate() 
```

我收到此错误：

```
WindowsError: [Error 2] The system cannot find the file specified 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:09:16.507

```
subprocess.Popen(["format.com", drive, "/FS:FAT32", "/A:32K"], shell=True).communicate() 
```

您可以通过输入`where FORMAT`您的 cmd shell（不是 python shell ... obv。）

# sql - Rails 生成的查询结果为空，但在 Postgres 中返回值

> ID：12393069
> 
> 赞同：0
> 
> 时间：2012-09-12T17:01:09.500
> 
> 标签：sql, ruby-on-rails-3, postgresql-9.1

我在使用 Postgres 查询的 Rails 中遇到了一个奇怪的问题。

查询看起来像这样：

```
WeeklyPlanner.find_or_create_by_user_id(current_user.id).recipes.find(:all, 
:conditions => ["
    weekly_planner_events.time_start = 
    date_part('epoch', to_timestamp(?)::timestamptz at time zone 'CDT')",
    Time.local(Time.now.year, Time.now.month, Time.now.day).to_i  
]) 
```

这会生成（我可以在控制台中查看）以下 SQL 语句：

```
SELECT "recipes".* FROM "recipes" 
INNER JOIN "weekly_planner_events" ON "recipes"."id" = "weekly_planner_events"."recipe_id" 
WHERE "weekly_planner_events"."weekly_planner_id" = 2 
AND (weekly_planner_events.time_start = date_part('epoch', to_timestamp(1347426000)::timestamptz at time zone 'CDT')) 
```

我的问题是生成的 SQL 语句在 psql 或 pgAdmin 上运行良好，但在 rails 上它返回一个空数组。也就是说，如果我在 postgres 控制台上按原样复制并粘贴它，它工作得非常好，但是当我在 Rails 控制台上运行它时，它什么也没有返回，我不知道它为什么会发生。

我尝试了以下方法：

*   参数化 'epoch' 和 'CDT'/timezone（为了删除`'`s
*   切换到`where`语句，条件相同
*   `#{}`用s传递变量

在 Rails 中*不*使用该函数进行搜索可以正常工作，但显然不是我需要的结果。`date_part('epoch', [float])`

我发现这个问题很混乱，如果您需要任何其他数据，请告诉我，我会编辑帖子。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:08:32.153

也许当您使用该`find_or_create`方法时，它正在使用创建操作，因此您`WeeklyPlanner`为用户创建了一个新的，并且这个全新的`WeeklyPlanner`没有附加到它的食谱，因为它刚刚创建。
当你去的时候`psql`，你可能会使用一个存在的`WeeklyPlanner`。
但这只是一个猜测。

# stata - 使用stata合并文件时出现日期格式错误

> ID：12393070
> 
> 赞同：0
> 
> 时间：2012-09-12T17:01:12.037
> 
> 标签：stata

我对**stata**完全陌生。*我正在尝试使用格式(d-mmm-yy)*合并 3 个不同的数据集，其中包含日期。在尝试合并时我遇到一个错误说

```
date is str 9 in using data stata
r(106) 
```

我不知道这个错误是关于什么的。需要一些帮助。如果需要，我可以提供任何其他信息。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T20:33:27.673

这可能意味着在某些数据集中，日期存储为数字（Stata 的格式类似于 Unix，自 1960 年 1 月 1 日以来经过的天数），而在其他数据集中，它是一个字符串（这正是 Stata 告诉你的）。您需要将它们全部转换为相同的格式，例如

```
generate long n_date = date(date, "DMY", 2050) 
```

见`help date()`或`help date functions`。

# html - Rails 3 仅在 Pre+Code 标签内转义 BBCode 解析的 HTML

> ID：12393073
> 
> 赞同：1
> 
> 时间：2012-09-12T17:01:17.180
> 
> 标签：html, ruby-on-rails-3, bbcode

我正在尝试使用[bb-ruby](https://github.com/cpjolicoeur/bb-ruby) gem 在我的 Rails 应用程序中实现标记系统。目前我正在研究类似于 Stackoverflow 如何处理它的代码降价的东西，我遇到了一些困难。

本质上我想要用户输入的文本：

> [code]<h1>标题</h1>[/code]

以纯文本形式吐出代码，可能在 pre 和 code 标记块中。将该文本字符串传递给我的代码解析器会将代码包装在 pre 和 code 块中，但 HTML 也会被渲染。我将字符串传递给我的代码解析器，如下所示：

```
sanitize(text.bbcode_to_html(formats, false).html_safe) 
```

当然，如果我从调用中删除 .html_safe 助手，我的视图会吐出：

> <pre><code><br /> <h1>Hello World</h1><br /> </code></pre>

显然这不是我们想要的结果。**所以我的问题是，如何在维护 html_safe 辅助方法的同时仅在 pre + code 标记内完成纯文本代码？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T19:10:57.817

我知道这是一个老问题，但您可以尝试使用`strip_tags`after the `bbcode_to_html`one。

# jquery - 基于元素高度添加类 - jquery

> ID：12393074
> 
> 赞同：0
> 
> 时间：2012-09-12T17:01:22.193
> 
> 标签：jquery

我很难让这个脚本正常工作：

```
$(window).(function(){
var maxHeight = 330;
if  (maxHeight < 331)
$('.ui-lightbox-mid').addClass('addScroll');
else 
$('.ui-lightbox-mid').removeClass('addScroll'); 
}); 
```

我想要做的是将灯箱限制在 330 像素高，而不一直添加滚动条。当内容大于 330px 时，我正在添加一个类（'addScroll' //这只是溢出-y：scroll css），以便向灯箱添加滚动。

任何人都可以帮忙吗？

谢谢乔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T17:03:00.780

`$(window).function(){ .. })`不是适当的结构。而不是它使用：

`$(window).load(function() { .. })`

但是以正确的***jQuery***方式：

`$(document).ready(function() { .. })`.

**或者**

`$(function() { .. })`

***完整代码***

```
$(document).ready(function() {
    var maxHeight = 330,
        lightbox = $('.ui-lightbox-mid'), // caching reference
        lightboxHeight = lightbox.height(); // get the current height
                                            // of lightbox, to compare
                                            // with maxHeight

    if ( maxHeight < lightboxHeight ) 
       lightbox.addClass('addScroll');
    else 
       lightbox.removeClass('addScroll');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T17:05:28.983

改变这个：

```
$(window).(function(){ 
```

至：

```
$(window).load(function(){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T17:04:13.493

我认为你应该等到文档就绪事件被触发，然后再检索高度没有意义。这可以通过`$(document).ready(function() { ... })`

# mongodb - 猫鼬替代品？

> ID：12393077
> 
> 赞同：9
> 
> 时间：2012-09-12T17:01:33.423
> 
> 标签：mongodb, mongoose

MongoDB 是否有 Mongoose 替代品，就像我在 WebMatrix 2 中使用它时一样，它似乎一直导致它崩溃，但我真的很喜欢 mongoose 的想法，那么周围有替代品吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-08-19T15:30:09.407

披露：我是迷彩的创造者。

我建议使用[Camo](https://www.npmjs.com/package/camo)，它是 Mongo 的基于类的 ES6 ODM。

一些特点：

*   基于 ES6（类、promise、生成器/迭代器等）
*   支持[NeDB](https://github.com/louischatriot/nedb)，这是 Mongo 的 SQLite 等价物
*   简单的模式继承

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-12-06T00:33:42.970

你也可以试试[waterline](https://github.com/balderdashy/waterline)，它最近有了很大的发展。确保使用[MongoDb 适配器](https://github.com/balderdashy/sails-mongo)。

# entity-framework - 实体框架标量函数映射

> ID：12393085
> 
> 赞同：3
> 
> 时间：2012-09-12T17:02:07.493
> 
> 标签：entity-framework, tsql, entity-framework-4, user-defined-functions

我有标量函数：

```
CREATE FUNCTION [dbo].[CheckLocation]
(
    @locationId Int
)
RETURNS bit
AS
BEGIN
    //code
END 
```

我想在实体框架上下文中使用它。

我在 *.edmx 文件中添加了这个：

```
<Function Name="CheckLocation" ReturnType="bit" Aggregate="false" BuiltIn="false" NiladicFunction="false" IsComposable="true" ParameterTypeSemantics="AllowImplicitConversion" Schema="dbo" >
<Parameter Name="locationId" Type="int" Mode="In" />
</Function> 
```

我还创建了一个带有 EdmFunctionAttribute 装饰的方法的部分类：

```
public partial class MainModelContainer
{
    [EdmFunction("MainModel.Store", "CheckLocation")]
    public bool CheckLocation(int locationId)
    {
        throw new NotSupportedException("Direct calls not supported");
    }
} 
```

我尝试像这样使用这个功能：

```
Context.CheckLocation(locationId); 
```

并得到 NotSupportedException（“不支持直接调用”）。它适用于 Select 方法，但它不适合我。请帮忙！如何在没有选择方法的情况下调用此函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T17:16:27.033

您需要作为选择访问它

```
var students = context.Locations
    .Select ( new  {  location= CheckLocation(locationId)}): 
```

# mysql - 从版本控制的审核日志中查询每天的状态更新？

> ID：12393086
> 
> 赞同：0
> 
> 时间：2012-09-12T17:02:20.043
> 
> 标签：mysql

我目前正在编写一个审计日志，以跟踪各种项目的版本历史记录，即跟踪实际更改以及说明更改类型（创建、更新或删除）的标记。

现在，每个*项目*还有一个“状态”列，显示该项目的状态（打开，同意，也许）。

**必填查询**：获取到现在每天的物品状态计数。所以输出应该是这样的：

```
day | status | count
---------------------
 1  |  open  |  3
 2  |  open  |  4
 2  |  maybe |  1
 2  |  agree |  2
 3  |  open  |  2
 3  |  agree |  2 
```

等等。我一直在努力从`wc_audit_log`如下图所示的审核日志表 () 中构建此查询。还有其他列，但大多是文本，与此查询无关（恕我直言：）

![在此处输入图像描述](../Images/6fc440afec1f7f4fd09ee4d724829310.png)

我尝试过使用 和 的各种组合以及`group by`函数，但似乎无法理解如何构建这个查询。最棘手的部分是关于版本控制的“日”边界和重复项。也就是说，完全有可能在同一天多次更新一个项目而没有任何状态更新，或者在同一天内转换多个状态。`order by``year, dayofmonth, month`

因此，在基于状态的重复项的情况下，将选择最新的时间戳项。即，如果一个项目被更新了两次并且两次状态都是“打开”，那么只需选择最后一个。重复计数很好，即如果该项目在同一天打开并同意，则可以在两个地方都计算它。

但是，我仍然无法弄清楚如何构建这样的查询。上面的图像应该只显示表的一部分，这些列是相关的，但也应该给出重复项等的想法。在我看来，这是一个不平凡的查询。

PS：标记为已删除的项目将不被考虑，因此不属于上表的一部分。但是，即使该项目已被删除但“过去”存在，上述情况仍然适用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:10:37.410

我认为这可以满足您的要求。它计算每天具有任何给定状态的 wc_id 的数量。它不计算一天内的重复项。

```
select extract(year from timestamp), extract(month from timestamp),
       extract(day from timestamp),
       status, count(distinct wc_id)
from a
group by extract(year from timestamp), extract(month from timestamp),
         extract(day from timestamp), status
order by 1, 2, 3, 4 
```

但是，如果几天内有重复，则 id 在两天内以相同的状态计算两次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T17:14:23.023

我重读了几次你的描述。不就是：

```
select datediff(now(), timestamp), status, count(distinct wc_id)
from foo
group by 1,2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T17:14:26.080

你可以试试这个：

```
SELECT `day`, status, COUNT(wc_id) as `count`
FROM
    (SELECT DATE(timestamp) as `day`, wc_id, status, MAX(timestamp) as `max_time`
    FROM table_name
    GROUP BY `day`, wc_id, status) AS max_timestamp_per_wcid_and_status
GROUP BY `day`, status
ORDER BY `day` ASC, status DESC 
```

# optimization - 优化 Haskell 文本处理

> ID：12393088
> 
> 赞同：2
> 
> 时间：2012-09-12T17:02:28.397
> 
> 标签：optimization, haskell, nlp

我在 Haskell 中编写了一些简单的字符计数例程，将统计信息存储在一个新的数据类型中：

```
data Stat = Stat {
    stChars    :: !Int,
    stVowels   :: !Int,
    stPairEL   :: !Int,
    stWords    :: !Int
} 
```

我在成百上千个纯文本文件上运行它，每个文件大约 50K--100K。

```
tabulateFile :: FilePath -> IO Stat
tabulateFile path = do
  putStrLn path
  contents <- L.readFile path
  return $! tabulateText ' ' contents defaultStat 
```

我没有使用左折叠，而是使用原始递归，这样我就可以保留前一个字符。

```
tabulateText :: Char -> L.ByteString -> Stat -> Stat
tabulateText lastChr bs stat =
  case U.uncons bs of
    Nothing -> stat
    Just (chr, newBs) ->
      tabulateText lchr newBs (countChar lastChr lchr stat)
        where lchr = toLower chr

{-# INLINE countChar #-}
countChar :: Char -> Char -> Stat -> Stat
countChar !lastChr !chr !(Stat stChars stVowels stPairEL stWords) =
  Stat
    (stChars  + 1)
    (stVowels + (countIf $ isVowel chr))
    (stPairEL + (countIf (lastChr == 'e' && chr == 'l')))
    (stWords  + (countIf ((not $ isLetter lastChr) && isLetter chr)))

isVowel :: Char -> Bool
isVowel c = Set.member c vowels

vowels = Set.fromAscList ['a', 'e', 'i', 'o', 'u', ...] -- rest of vowels elided 
```

现在，它的速度是 running 的两倍多`cat * | wc`，但我的直觉告诉我，文件 I/O 应该远远超过所需的 CPU 时间。简单地使用`cat * | wc`大约 20MB/s 的进程和热缓存，但使用我的 Haskell 程序（用 编译`-O`）运行速度低于 10MB/s，即使经过一些基本优化也是如此。分析告诉我，大部分时间都花在了`tabulateText`和`countChar`.

有什么我可以在这里优化的东西吗？

**编辑：**粘贴到[http://hpaste.org/74638的完整文件](http://hpaste.org/74638)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-12T17:13:52.727

您应该提供导入，以便有人可以编译代码。但是，这里有几件事看起来很可能：

*   编译`-O2 -funbox-strict-fields`（以获得严格字段的​​好处）
*   tabulateText 在`lastChr`, 和`stat`
*   Set.member 似乎是进行相等比较的一种非常昂贵的方法。使用跳表。

例如

```
isSpaceChar8 :: Char -> Bool
isSpaceChar8 c =
    c == ' '     ||
    c == '\t'    ||
    c == '\n'    ||
    c == '\r'    ||
    c == '\f'    ||
    c == '\v'    ||
    c == '\xa0' 
```

这将很好地内联和优化。

不知道是什么`countIf`，但它看起来很糟糕。我怀疑它是一个`if`，你返回0？怎么样：

```
Stat
   (a + 1)
   (if isVowel c then a + 1 else a)
   ... 
```

然后看核心。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T18:28:52.347

```
{-# LANGUAGE BangPatterns #-}
import qualified Data.ByteString.Lazy.Char8 as U
import qualified Data.ByteString.Lazy as L
import Data.Word
import Data.Char
import Control.Applicative 

data Stat = Stat {
    stChars    :: !Int,
    stVowels   :: !Int,
    stPairEL   :: !Int,
    stWords    :: !Int
} deriving Show
defaultStat = Stat 0 0 0 0

{-# INLINE  tabulateFile #-}
tabulateFile :: FilePath -> IO Stat
tabulateFile path = newTabulate <$> L.readFile path

{-#  INLINE newTabulate #-}
newTabulate :: L.ByteString -> Stat 
newTabulate = snd . U.foldl' countIt (' ',defaultStat) 
    where 
        {-#  INLINE countIt #-}
        countIt :: (Char,Stat) -> Char -> (Char,Stat)
        countIt (!lastChr,!Stat stChars stVowels stPairEL stWords) !chr = 
            (chr,Stat
                (stChars  + 1)
                (if isVowel chr then stVowels + 1 else stVowels)
                (if (lastChr == 'e' && chr == 'l') then stPairEL + 1 else stPairEL)
                (if ((isSpace lastChr) && isLetter chr) then stWords+1 else stWords))

{-# INLINE isVowel #-}
isVowel :: Char -> Bool
isVowel c = 
    c == 'e' ||
    c == 'a' ||
    c == 'i' ||
    c == 'o' ||
    c == 'u' 

main:: IO ()
main = do 
    stat <- tabulateFile "./test.txt"
    print stat 
```

Don 建议的大多数优化都包含在使用有效的 foldl' 中。性能比 cat + wc 稍慢，但没关系，因为您正在进行更多计算。我没有在非常大的文件上测试过它，但它应该可以与 cat + wc 媲美。

编译`-O2 -funbox-strict-fields`以获得优化的代码。

我会在查看核心后对其进行更多更改，看看是否可以进行更多优化。一个可能的优化点是在构造 stat 时将 if 条件排除在构造函数之外，例如，如果`chr`是元音，那么它已经是 a`letter`所以你不需要另一个 if 在 stWords 等，但这真的会炸毁你的代码，但是您可以尝试看看它是否真的对大文件有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T19:42:09.530

在测试了其他替代方案后，似乎 CPU 使用率高主要是因为我使用的是 Data.ByteString.Lazy.UTF8。通过修改数据结构以在 UTF8 ByteString`tabulateText`上使用，我节省了可以忽略不计的运行时间。`foldl`

鉴于此，我在文件上并行化了程序，并且有时能够在我的机器上获得 7 倍的加速。

我首先用`tabulateFile`一个包裹`unsafePerformIO`：

```
unsafeTabulateFile :: FilePath -> Stat
unsafeTabulateFile f =
  unsafePerformIO $ tabulateFile f 
```

然后用来`Control.Parallel.Strategies`做`parMap rseq unsafeTabulateFile files`。

# java - Eclipse：Ctrl+Shift+Right 不正确

> ID：12393091
> 
> 赞同：3
> 
> 时间：2012-09-12T17:02:31.983
> 
> 标签：java, eclipse, key-bindings

考虑这个简单的类：

```
package net.zomis.test;

public class Test {
    public Test() {

    }

    public void registerSomething(String key) {

    }

} 
```

当我将光标放在前面`registerSomething`并按下`Ctrl``Shift``→`时，我习惯于 Eclipse`register`一开始只选择。但是现在，它选择了整个`registerSomething`文本，当我再次按下它时，它选择了整个方法（从`public void`to `}`），当我再次按下它时，它选择了整个类，最后一次选择了整个文件。如果我按 ，会发生完全相同的事情`Ctrl``Shift``←`。

此外，当我简单地单击该`End`键时，我可以选择：*Line End*或*Text End*。

我的设置出了什么问题导致这种情况发生？我在哪里可以找到这些键绑定？

如果重要的话，我的 Dropbox 文件夹中有这个工作区，可以在我的 PC 和 Mac 之间同步它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T13:43:54.593

事实证明，我的 Dropbox 文件夹中有工作区这一事实**非常**重要。其他人请注意：**不要在计算机之间共享您的工作空间**。我如何解决这个问题如下：

*   在每台计算机上创建一个新工作区
*   在特定于计算机的工作区中，从您的共享 Dropbox/其他文件夹中导入项目

我注意到，当计算机上有一个共享工作区时，Mac 以某种方式将键绑定更改为 Mac 版本，这使得它们无法在 PC 上运行。Mac上正确的`Ctrl`++键绑定是`Shift`++ 。`→``Alt``Shift``→`

因此，通过在每台计算机上使用单独的工作区，我可以使用该计算机的特定键绑定，而不会混淆它们。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-12T17:13:27.657

从主菜单打开首选项对话框：*Window->Preferences*。

在对话框中，打开*General->Keys*。您将看到一个键绑定表，其中包含一个*类型为 filter text*的字段。在该字段中，键入：`Ctrl+Shift+Right`，您将把表格缩小到这个键。

您期望的行为 - 仅`register`在第一次按键时选择 - 是我在使用*Ctrl+Shift+Right*时看到的行为，对我来说键绑定是：*Select Next Word*。

如果此绑定已更改，则有一个*恢复命令按钮应重置此绑定。*

# python - 搜索在线 Python IDE

> ID：12393093
> 
> 赞同：-3
> 
> 时间：2012-09-12T17:02:45.463
> 
> 标签：python, ide

主题。我正在寻找具有以下功能的 IDE：

*   支持 Python 标准库（至少大部分）
*   支持文件和从文件导入模块
*   访问网络
*   轻巧快速

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T17:15:14.430

如果您想在线使用它，您可以尝试

[http://ideone.com/](http://ideone.com/)

udacity使用的python在线IDE，也许也值得一试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T17:04:10.923

几年前，我在为 Google App Engine 开发 Python 时使用了 Wingware：

[http://wingware.com/](http://wingware.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T17:05:32.107

我使用[Aptana](http://www.aptana.com)，它基于 Eclipse，但开箱即用 pydev 用于 Python 集成，如果您想开发 Django/GAE 应用程序，这很好

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T17:11:44.430

ninja ide 是轻量级和快速的，并且可以做到这一切......而且它是免费的

（但 Eclipse+PyDev 因其出色的性能和强大的功能而胜出，但在轻量级和快速方面却输了..）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-12T18:39:23.513

我曾经使用[Cloud9](https://c9.io/)，但认为桌面 IDE 更方便

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-05-25T07:22:57.943

我了解您正在寻找类似[PythonAnywhere](http://www.pythonanywhere.com/)的东西。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-12T17:05:38.373

安装 Eclipse
安装 PyDev [http://pydev.org/](http://pydev.org/)
享受吧！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-12T17:13:18.787

Python 附带的 IDLE 通常可以用于我的用例。当你第一次打开它时，你会得到 repl，但是 File > New Window 会给你一个文件来编辑。将该文件另存为 .py 文件并 f5 运行。

我认为它解决了您的轻量级和快速要求。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-12T17:24:45.840

JetBrains 制造市场上最好的 IDE，毫无疑问。查看[PyCharm](http://www.jetbrains.com/pycharm/)。

# html - 编码过滤器，struts 仅在使用 html:form 标签时工作

> ID：12393094
> 
> 赞同：1
> 
> 时间：2012-09-12T17:02:52.167
> 
> 标签：html, encoding, filter, struts

我面临这个问题。我有一个过滤器，它根据过滤器的配置（例如，UTF-8）设置请求的字符编码。这适用于使用 struts html:form 标签编码的表单。但是，如果我使用普通的 HTML 表单标签，数据编码不正确。

这是 web.xml 中的过滤器定义：

```
<filter>
    <filter-name>Encoding Filter</filter-name>
    <filter-class>EncodingFilter</filter-class>
    <init-param>
        <param-name>encoding</param-name>
        <param-value>UTF-8</param-value>
    </init-param>
 </filter>
 <filter-mapping>
    <filter-name>Encoding Filter</filter-name>
    <url-pattern>/*</url-pattern>
 </filter-mapping> 
```

这是过滤器：

```
public class EncodingFilter implements javax.servlet.Filter {
private String encoding;
public void init(FilterConfig filterConfig) throws ServletException {
    this.encoding = filterConfig.getInitParameter("encoding");
}
public void doFilter(ServletRequest request, ServletResponse response, FilterChain filterChain) throws IOException, ServletException {
    request.setCharacterEncoding(encoding);
    filterChain.doFilter(request, response);
}
public void destroy() {
} 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T15:30:51.223

如果您使用 Struts 标记`<html:form>`并省略 METHOD 属性，则默认为 POST。如果您使用标准 HTML`<form>`并省略 METHOD 属性，则默认为 GET。

Tomcat 将以不同的方式处理您的 POST 和 GET 参数：

**POST：**将使用您的过滤器。请注意，如果客户端未指定请求字符编码，您实际上应该只设置请求字符编码（您的过滤器始终将其设置为 UTF-8）。Tomcat 附带了一个过滤器 SetCharacterEncodingFilter.java 来执行此操作。

**GET**：Tomcat 将使用 ISO-8859-1 作为默认字符编码。有两种方法可以指定如何解释 GET 参数：

*   将 server.xml 中元素的 URIEncoding 属性设置为特定的内容（例如 URIEncoding="UTF-8"）。
*   将 server.xml 中元素的 useBodyEncodingForURI 属性设置为 true。这将导致连接器将请求正文的编码用于 GET 参数。

这都在：[http ://wiki.apache.org/tomcat/FAQ/CharacterEncoding](http://wiki.apache.org/tomcat/FAQ/CharacterEncoding)

# iphone - 如何连接文本字段和选取器视图

> ID：12393095
> 
> 赞同：0
> 
> 时间：2012-09-12T17:02:53.803
> 
> 标签：iphone, ios, xcode

又是烦人的菜鸟！

所以我试图开发一个小应用程序来检查文件夹中的文件。

文本字段是您的搜索字段。

您有一个包含 3 个选项的选择器视图

文件夹 A

文件夹 B

在谷歌上搜索。

我有一个问题：

1：如何将搜索字段和用户选择的按钮连接到按钮，以便当用户单击按钮时，假设该按钮搜索用户在谷歌上的输入？

我已经申请了 2 个视图。

一个是用户输入信息，另一个是显示该信息。

我的代码是这样的..

```
- (IBAction)buttonSearch:(id)sender {

self.userSearch = self.searchField.text; ///Users input on the search field

NSString *searchString = self.userSearch;

///I know Im missing the connection to the button with the pickView, how could I do that too?////

///Here should be something like go to google(or whatever choice the user made on pickview) and put the string on the search bar and hit search/// <---How do I do this too..? *****

}
@end 
```

感谢您的帮助，我知道回答这些愚蠢的问题很痛苦……：/祝您有美好的一天！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T19:04:09.287

如果您使用界面构建器来创建视图，请确保为文本字段/选择器/等创建 IBOutlets。这样你就可以得到他们的价值观。

```
@property (nonatomic, strong) IBOutlet UITextfield *myTextField; 
```

现在在界面生成器中右键单击您的文本字段并选择“NewReferenceOutlet”并拖动到“文件的所有者”，您应该会看到“myTextField”作为选项。附加后，您就可以像这样获取文本字段的值。

```
self.myTextField.text 
```

对于 pickerView 将是类似的，除了你将使用 UIDatePIcker 或类似的东西而不是 UITextField ......

希望有帮助；）

# haskell - Haskell 集合保证每个操作的最坏情况界限？

> ID：12393104
> 
> 赞同：11
> 
> 时间：2012-09-12T17:03:24.333
> 
> 标签：haskell, collections, amortized-analysis

这种结构对于实时应用程序是必要的——例如用户界面。（用户不关心单击按钮需要 0.1 秒还是 0.2 秒，但他们确实关心第 100 次单击是否会强制执行出色的惰性计算并需要 10 秒才能继续。）

我正在阅读冈崎的论文[纯功能数据结构](http://www.cs.cmu.edu/~rwh/theses/okasaki.pdf)，他描述了一种有趣的通用方法，用于将具有摊销边界的惰性数据结构转换为***每个*****操作都具有相同的****最坏情况边界的***结构。这个想法是分配计算，以便在每次更新时强制执行一些未评估的 thunk。*

 *我想知道，在 Haskell 中是否有任何标准集合（`Map`、`Set`等）的实现？

容器[包装](http://hackage.haskell.org/package/containers-0.5.0.0)说

> 每个操作的声明成本要么是最坏情况，要么是摊销的，但即使结构是共享的，它仍然有效。

因此不能保证单个操作的最坏情况界限。有严格的变体，例如`Data.Map.Strict`，但它们的键和值是严格的：

> 键和值参数被评估为 WHNF；键和值在存储到映射之前会被评估为 WHNF。

它的结构没有（可能的）严格性。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-12T17:53:18.357

> 它的结构没有（可能的）严格性。

去寻找来源，例如[`Data.Map.Map`](http://hackage.haskell.org/packages/archive/containers/0.5.0.0/doc/html/src/Data-Map-Base.html#Map)

```
-- See Note: Order of constructors
data Map k a  = Bin {-# UNPACK #-} !Size !k a !(Map k a) !(Map k a)
              | Tip 
```

您会看到 a`Map`完全是脊椎严格的（并且在键中是严格的，即使使用`Data.Map.Lazy`），如果您将其评估为 WHNF，则强制执行完整的脊椎。`IntMap`s、`Set`s 和s 也是如此`IntSet`。

因此，您可以通过在每次操作之前将容器强制为 WHNF 来轻松地防止构建大型 thunk（映射到/包含的值除外）。防止包含值的大 thunk [时间（和空间）泄漏的常见原因] 对于`Data.XYZ.Strict`变体是自动的（警告：这些值仅评估为 WHNF，如果您需要更多，您必须自己做，例如`deepseq`在操作后立即更改任何值），您需要自己处理`Data.XYZ.Lazy`变体。

因此

> 用户并不关心单击按钮需要 0.1 秒还是 0.2 秒，但他们确实关心第 100 次单击是否会强制执行出色的惰性计算并需要 10 秒才能继续。

是这些容器很容易避免的问题。

但是，第 100 次点击的处理时间仍然可能比平均时间*长得多*，这不是由于出色的延迟计算，而是由于算法（考虑具有两个列表的经典队列实现，前面，您通过`dequeue (Q (x:xs) ys) = (x, Q xs ys)`in O(1)，后面你`enqueue y (Q xs ys) = Q xs (y:ys)`在 O(1) 中，好吧，除了当前面列表为空并且后面需要先反转时，出队需要 O(size)，但它仍然是 O(1) 摊销）在不改变摊余成本的情况下。

我不知道[容器](http://hackage.haskell.org/package/containers)中使用的算法是否有这种情况，但这是需要注意的。*

# .net - 简单服务上的 ServiceStack 异常

> ID：12393107
> 
> 赞同：1
> 
> 时间：2012-09-12T17:03:43.427
> 
> 标签：.net, servicestack

我只是想创建一个像 HelloWorld 这样的简单服务。但是，AppHost 正在抛出：

```
Method 'Add' in type 'ServiceStack.ServiceHost.ServiceRoutes' from assembly 'ServiceStack, Version=3.9.4.0, Culture=neutral, PublicKeyToken=null' does not have an implementation. 
```

代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.SessionState;

using ServiceStack.WebHost.Endpoints;
using Funq;

namespace Eagle
{
  public class Global : System.Web.HttpApplication
  {

      public class TestAppHost : AppHostBase
      {
          //Tell Service Stack the name of your application and where to find your web services
          public TestAppHost() : base("Test Web Services", typeof(TestService).Assembly) { }

          public override void Configure(Container container)
          {
              //register user-defined REST-ful urls
              Routes
                .Add<Test>("/test")
                .Add<Test>("/test/{Name}");
          }
      }

      protected void Application_Start(object sender, EventArgs e)
      {
          try
          {
              new TestAppHost().Init();
          }
          catch (Exception ex)
          {
          }
      }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T17:59:48.447

`Routes.Add<T>`是命名空间中的扩展方法`ServiceStack.ServiceInterface`，为了能够使用它，您需要添加：

```
using ServiceStack.ServiceInterface; 
```

我建议使用 ReSharper，它会自动解析缺失的 C# 命名空间。

# python - 如何调用已经在当前运行的测试用例范围内的库实例的方法

> ID：12393108
> 
> 赞同：0
> 
> 时间：2012-09-12T17:03:43.803
> 
> 标签：python, robotframework

我有一个与外部工具接口的库，并公开了一些基本关键字以从机器人框架中使用；这个库是作为一个 python 包实现的，我想在这个包的模块中实现实现复杂逻辑并公开更多关键字的扩展功能。该软件包具有测试用例范围，但我不完全确定它是如何工作的。如果我提出一些我想到的方法，那么有更多知识的人可以让我知道我在正确的轨道上，以及我在哪里吠叫错误的树......

1.  使用实例变量 - 如果范围是这样的，python 解释器将看到当前测试用例导入的包（即，这在不同的测试用例中被视为单独的包，而不是同一包的单独实例），然后在初始化时，我可以设置一个全局变量`INSTANCE`，`self`然后从包中的另一个模块导入`INSTANCE`并使用它。

2.  使用实例字典 - 如果范围是所有导入都将包视为相同，我可以使用 robots.running.context 设置字典键，以便在实例字典中为包所在的每个上下文都有一个项目已导入 - 这意味着我可以在基于此的模块中使用相同的上下文变量作为查找键。（这个的缺点是它会阻止垃圾收集，直到包本身超出范围，并且依赖于它持久地在范围内。）

3.  我尚未意识到的上下文变量将为我提供范围内的实例。这些文档很难搜索，因此完全有可能我遗漏了一些东西，这会使这变得微不足道。同样好的是允许我调用范围内的关键字。

4.  一些我没有考虑过的极好的可能性......

那么有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:26:57.570

这要归功于robotframework用户组的Kevin O.，但本质上`robot.libraries.BuiltIn.BuiltIn().get_library_instance(library_name)`可以像这样使用魔法：

```
from robot.libraries.BuiltIn import BuiltIn
class SeleniumTestLibrary(object):
  def element_should_be_really_visible(self):
    s2l = BuiltIn().get_library_instance('Selenium2Library')
    element = s2l._element_find(locator, True, False) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T07:16:02.333

听起来您正在谈论对导入的代码进行[猴子修补](http://en.wikipedia.org/wiki/Monkey_patch)，以便导入该包的其他模块也将看到您的运行时修改。（如果我错了，请纠正我；您的问题中有几处我不太关注）

对于简单的包导入，这应该有效：

```
import my_package

def method_override():
    return "Foo"

my_package.some_method = method_override 
```

`my_package`，在这种情况下，指的是导入的模块，而不仅仅是本地名称，因此其他模块将看到覆盖的方法。

这在其他代码已经完成的情况下不起作用

```
from my_package import some_method 
```

因为在这种情况下，它`some_method` *是*导入位置的本地名称。如果您在其他地方替换该方法，则不会看到该更改。

如果发生这种情况，那么您需要更改源以导入整个模块，或者通过替换方法内部来更深入地修补：

```
import my_package

def method_override():
    return "Foo"

my_package.some_method.func_code = method_override.func_code 
```

那时，如何在任何其他模块中导入该方法都无关紧要；与该方法关联的代码对象已被替换，您的新代码将运行而不是原始代码。

在这种情况下，唯一需要担心的是，在每种情况下，模块都是从同一路径导入的。Python 解释器将尝试重用现有模块，而不是重新导入和重新初始化它们，只要它们是从同一路径导入的。

但是，如果您的 python 路径设置为包含两个目录，例如：'/foo' 和 '/foo/bar'，那么这两个导入

```
from foo.bar import baz 
```

和

```
from bar import baz 
```

最终会加载模块两次，并在模块中定义任何对象（方法、类等）的两个版本。如果发生这种情况，那么修补一个不会影响另一个。

如果您需要防范这种情况，那么您可能必须遍历 sys.modules，查找导入的包，并修补您找到的每个版本。当然，这只有在所有其他导入都已经发生的情况下才有效，您不能先发制人地这样做（不编写导入钩子，但这又是另一个更深的层次:)）

你确定你不能只分叉原始包并直接扩展它吗？那会容易得多:)

# javascript - jquery遍历表元素

> ID：12393112
> 
> 赞同：0
> 
> 时间：2012-09-12T17:04:14.960
> 
> 标签：javascript, jquery, jquery-ui

我正在使用 Jquery 来动态填充表格元素。我的表格将包含三列 - 标签、文本区域和一个按钮。我在单击按钮时绑定了一个单击事件。下面是我的 Jquery 代码。

```
var rowElem = $('<tr id="'+ key + '" class="queryRow"> </tr>');
rowElem.append($('<td class="queryTitleCol">' + key + '</td>')); 
var colElem = $('<td class="queryValueCol"></td>');
var textAreaElem = $('<textarea rows="10" cols="75"/>');
colElem.append(textAreaElem);
rowElem.append(colElem);
textAreaElem.val(value);
var btnCol = $(
            '<td valign="top">'
            + '<button style="width:42px; vertical-align:middle; margin:2px;" title="delete">'
            +   '<span class="ui-icon ui-icon-trash" style="float:left;"/>'
            + '</button>'
            +'</td>');
    rowElem.append(btnCol);
    $("button", btnCol).click(action);
} 
```

在按钮事件中，我使用 Jqury.closest 来获取 TR 标签和标签元素。下面是我的按钮点击代码。

```
function action() { 
var rowElem = $(this).closest("tr");
var labelTD = $(".queryTitleCol", rowElem);
} 
```

但是 labelTD ，我总是把 [td.queryTitleCol] 作为一个数组。我无法获取 td 元素来获取标签元素。我尝试使用 find()，但我仍然得到 td 数组。

```
rowElem.find('td.queryTitleCol'); 
```

如何在按钮的单击功能上遍历并获取标签名称。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:07:50.543

尝试

```
var label = $(".queryTitleCol", rowElem)[0].innerHTML; 
```

或者

```
var label = $(".queryTitleCol", rowElem).text(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T17:22:38.057

你可以试试这个

```
function action() { 
     var titleCol = $(this).parent().parent().find('td:eq(0)').text();
} 
```

检查这个[小提琴](http://jsfiddle.net/sushanth009/n7aSb/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T17:08:08.363

你可以尝试类似的东西

```
$('button').click(function(){
  $(this).prev('.queryTitleCol').text();
}); 
```

这将始终将前一个元素`queryTitleCol`作为其类。它只返回一个元素，所以你不应该遇到你一直在描述的问题。

# iphone - ios中的HTML到PDF转换

> ID：12393113
> 
> 赞同：0
> 
> 时间：2012-09-12T17:04:18.780
> 
> 标签：iphone, html, ios, pdf

我有一个巨大的 html 文件，其中数据以编程方式更改。我想将此 html 转换为 PDF 并将其作为附件通过电子邮件发送。有人可以建议我能做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:10:41.627

如果您想创建所有“图像”PDF，这意味着所有文本都将是图像（无矢量），这非常容易。基本上它就像下面

在 UIWebView 中打开 HTML

通过将 Web 视图部分渲染到图像上下文中来捕获 Web 视图。换句话说，我们将拍摄 Web 视图的快照，将其渲染到图像上下文中，并将其保存到我们的文档目录中。然后，我们将以编程方式滚动 Web 视图，再次截屏并保存，然后重复该过程，直到到达 Web 视图的末尾。

[在此处](http://www.ioslearner.com/convert-html-uiwebview-pdf-iphone-ipad/)查看详细信息

# java - 按排序顺序获取树的所有叶子

> ID：12393116
> 
> 赞同：3
> 
> 时间：2012-09-12T17:04:29.667
> 
> 标签：java, sorting, data-structures, tree

对于树结构如下

```
public class Node implements Comparable<Node> {
    private List<Node> nodes=new ArrayList<Node>();
    private String name="";
    private List<String> leaves=new ArrayList<String>();
    private Node parent=null;

    public List<Node> getNodes() {
        return nodes;
    }

    public void setNodes(List<Node> nodes) {
        this.nodes = nodes;
    }

    public List<String> getLeaves() {
        return leaves;
    }

    public void setLeaves(List<String> leaves) {
        this.leaves = leaves;
    }

    @Override
    public int compareTo(Node o) {
        return this.getName().compareTo(o.getName());
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public Node getParent() {
        return parent;
    }

    public void setParent(Node parent) {
        this.parent = parent;
    }

    public int getDepth() {
        int depth = 0;
        Node parent = this.getParent();
        while (parent != null) {
            depth++;
            parent = parent.getParent();
        }
        return depth;
    }
} 
```

从一个节点，我希望有一个方法可以返回所有不同的直接和间接叶子（在上述情况下，字符串`leaves` 将是叶子），用于该节点按排序顺序。

上面是一个**高度**分解的数据结构，便于测试和演示。我尝试了以下3种方法，

方法 A 当深度很大时非常慢~20，因为最深的叶子被遍历了几次，每个祖先一次，因此多次遍历相同的路径。

```
 public List<String> getLeavesDeep1() {
        Set<String> leaves = new TreeSet<String>();
        leaves.addAll(getLeaves());
        for (Node node : getNodes()) {
            leaves.addAll(node.getLeavesDeep1());
        }
        return new ArrayList<String>(leaves);
    } 
```

平均：12694 毫秒/无排序/区别>平均：471 毫秒

方法 B 比 A 快一点，因为节点的数量相对比叶子少得多，所以使用方法 A 但是对于节点，然后对于每个节点，只获得直接叶子。

```
 private List<Node> getNodesDeep2() {
        Set<Node> nodes = new TreeSet<Node>();
        nodes.addAll(getNodes());
        for (Node node : getNodes()) {
            nodes.addAll(node.getNodesDeep2());
        }
        return new ArrayList<Node>(nodes);
    }

    public List<String> getLeavesDeep2() {
        Set<String> leaves = new TreeSet<String>();
        leaves.addAll(getLeaves());
        for (Node node : getNodesDeep2()) {
            leaves.addAll(node.getLeaves());
        }
        return new ArrayList<String>(leaves);
    } 
```

平均：4355 毫秒/没有排序/区别>平均：2406 毫秒

方法 C 在返回之前避免使用 TreeSet，使用 ArrayList 并排序和过滤（虽然不是排序/区分的最佳方式）

```
 private List<Node> getNodesDeep3() {
        List<Node> nodes = new ArrayList<Node>();
        nodes.addAll(getNodes());
        for (Node node : getNodes()) {
            nodes.addAll(node.getNodesDeep3());
        }
        return new ArrayList<Node>(new TreeSet<Node>(nodes));
    }

    public List<String> getLeavesDeep3() {
        List<String> leaves = new ArrayList<String>();
        leaves.addAll(getLeaves());
        for (Node node : getNodesDeep3()) {
            leaves.addAll(node.getLeaves());
        }
        return new ArrayList<String>(new TreeSet<String>(leaves));
    } 
```

平均：4400

寻找更快的东西，我知道可以使用某些树遍历，但如果存在，我更喜欢更简单的东西。*PS 这些目前没有用于搜索的用例*。在我的真实课堂中，时间比上述情况高出大约 3 倍，因为结构要复杂得多，叶子不是简单的字符串，而是 POJO

以下是我用来获取时间的测试

```
private static final int NODES = 5;
private static final int LEAVES = 25;
private static final int DEPTH = 8;

public void addChildren(Node parent) {
    List<Node> nodes = new ArrayList<Node>();
    List<String> leaves = new ArrayList<String>();
    for (int i = 0; i < LEAVES; i++) {
        leaves.add(String.format("%s_leaf_%s", parent.getName(), i));
    }
    for (int i = 0; i < NODES; i++) {
        Node child = new Node();
        child.setParent(parent);
        child.setName(String.format("%s_%s", parent.getName(), i));
        nodes.add(child);
        if (child.getDepth() < DEPTH) {
            addChildren(child);
        }
    }
    parent.setNodes(nodes);
    parent.setLeaves(leaves);
}

@Test
public void testCase() {
    long start, tot=0;
    long t = 0;
    List<String> leaves;
    Node target = new Node();
    target.setName("Root");
    addChildren(target);
    for (int i = 0; i < 10; i++) {
        start = System.currentTimeMillis();
        leaves = target.getLeavesDeep5();
        t = System.currentTimeMillis() - start;
        tot += t;
        System.out.println(leaves.size() + " " + t);
    }

    System.out.println("Avg: " + (tot / 10));
} 
```

任何语言的答案都是可以接受的，包括伪代码，只要它没有将解决方案与该语言紧密联系起来（*例外：纯 java 代码被禁止使用第二个子句*）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:31:56.990

我运行了您的测试，它给了我以下结果（我使用了您的版本 3，一个稍作修改的版本 3 和一个新版本）

```
2441400 8038
...
2441400 7890
Avg: 7872

2441400 4850
...
2441400 3990
Avg: 4165

2441400 980
...
2441400 710
Avg: 786 
```

我第一次改变

```
return new ArrayList<String>(new TreeSet<String>(leaves)); 
```

至

```
Collections.sort(leaves);
return leaves; 
```

请参阅[添加到集合然后对其进行排序或添加到已排序的集合是否更快？](https://stackoverflow.com/questions/3607593/is-it-faster-to-add-to-a-collection-then-sort-it-or-add-to-a-sorted-collection)

这使执行时间减少了近 50%。注意：**TreeSet 将删除重复项，排序不会。**

然后，我编写了一个新的迭代器方法，将您的 2 个方法合二为一，并一起消除了递归。我还摆脱了 ArrayLists 以避免我们不需要的大小调整和复制，因为我们只迭代并且从不通过索引访问。

**编辑**：使用 ArrayList 存储叶子将时间从 800 毫秒增加到大约 1400 毫秒。

```
public List<String> getLeavesDeepX()
{
    final Deque<Node> nodes = new LinkedList<Node>();
    final Collection<String> leaves = new LinkedList<String>();
    //final Collection<String> leaves = new LinkedHashSet<String>(); -- use for removing dupes
    nodes.add(this);
    do
    {
        final Node current = nodes.pop();
        leaves.addAll(current.getLeaves());
        nodes.addAll(current.getTreeNodes());
    }
    while(nodes.isEmpty() == false);

    final ArrayList<String> result = new ArrayList<String>(leaves);
    Collections.sort(result);
    return result;
} 
```

我将所有结果放入不同的列表中，并在最后进行了比较。

```
 System.out.println(Arrays.equals(leaves1.toArray(), leaves2.toArray()));
    System.out.println(Arrays.equals(leaves1.toArray(), leaves3.toArray()));
    System.out.println(Arrays.equals(leaves2.toArray(), leaves3.toArray())); 
```

输出：

```
true
true
true 
```

所以至少在我的系统上它的速度提高了大约 10 倍。

**Edit2**：在案例 3 中跳过排序使其达到 140 毫秒。所以 600ms 用于比较和排序。任何进一步的重大改进都需要在那里进行。

**Edit3**：消除递归还有一个好处是树的深度对性能的影响较小。将 TestTree 更改为 2/2/20 (N/L/D) 会产生大约相同数量的叶子 (2m)，但在使用递归 (>70k) 时性能要差得多，但没有慢很多（从 1200 到 2500）。

# objective-c - KVO 产生错误/未收到通知

> ID：12393128
> 
> 赞同：2
> 
> 时间：2012-09-12T17:05:30.417
> 
> 标签：objective-c, key-value-observing

我有一个类（称之为classA），它包含一个名为`info`（一个模型类，包含大量信息）的属性，而它又包含一个名为`name`（一个字符串）的属性。`name`当classA中的字符串发生变化时，我希望另一个类（classB）接收KVO通知。

这就是我现在在 B 类上所做的事情：

```
[classA addObserver: self forKeyPath: @"info.name" options: 0 context: nil]; 
```

classA 上的值变化有两种方式`name`：直接设置为like`classA.info.name = ...`和`info`设置为like时`classA.info = ...`

当`name`直接更改时，KVO 可以完美运行。但是，当`info`属性设置并`name`间接更改时，我收到此错误：

```
Cannot update for observer <classB> for the key path "info.name" from <classA>, most likely because the value for the key "info" has changed without an appropriate KVO notification being sent. Check the KVO-compliance of the classA class. 
```

我应该在 classA 上进行什么更改才能完成这项工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-18T04:46:10.683

此问题的原因来自您正在实现`-setInfo:`信息的设置器并调用`willChangeValueForKey:`| `didChangeValueForKey:`在里面。

我见过很多情况，认为`will|didChange...`需要执行调用才能触发 KVO 通知。仅当未显式调用 setter 时才如此。当您调用 setter 时，KVO 机制负责触发通知。

大多数情况下，将这些调用留在 setter 中是无害的，只会导致额外的通知，但在这种情况下，它确实会在更新 keypath 时引起问题——而不是 key。

简而言之，如果您确实实现了 setter，请不要`will|didChangeValueForKey:`在其中调用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-27T16:56:14.950

我认为选项不能为0。

它是一个旧的 API，早在 Apple 致力于 API 设计之前，你必须给它*一些东西*。

# csv - 修改复杂的 Makefile 以安装 OCaml 包的一个模块中使用的库

> ID：12393134
> 
> 赞同：0
> 
> 时间：2012-09-12T17:05:56.803
> 
> 标签：csv, makefile, ocaml

我需要在 OCAML 包的一个模块 compute.ml 中添加 csv 模块。（参见[mysql 中的讨论 ocaml hash](https://stackoverflow.com/questions/12350982/ocaml-hash-from-mysql)）

你知道修改makefile的简单方法（在我的情况下这是一个复杂的文档，我认为我不能完全重写它或切换到ocamlfind安装）以启用没有“Unbound value Csv.load”的编译错误信息？

即我可以在现有的稳定 Ocaml 包中包含一个新库吗？

修改模块：compute.ml，

修改;

```
 let data = Csv.load ("foo.csv")
         .... 
```

* * *

编译期间的错误消息：

```
camlp5r ../wserver/pa_macro5.cmo -DUNIX -o compute.ppo compute.ml
ocamlopt.opt -warn-error A -I ../wserver -I ../sally -I +camlp5 -c -impl compute.ppo
File "compute.ml", line 110, characters 13-21:
Error: Unbound value Csv.load 
```

感谢帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T17:41:24.207

您必须使用适当的 -I 选项告诉 ocamlopt 在哪里查找 csv.cm{i,x} 文件，就像您在命令行末尾已有的文件一样。如果该库位于 OCaml 标准库的子目录中（由 ocamlc -where 给出），您可以使用 -I +csv_dir，就像在您的示例中对 camlp5 所做的那样。否则，您必须提供完整路径。

请注意，这不是您必须做的唯一修改：您还必须在执行应用程序/库的最终链接的命令行上添加 csv.cmx（或 .cmxa）。

# arrays - 用 ImageJ 宏中的值填充数组

> ID：12393138
> 
> 赞同：0
> 
> 时间：2012-09-12T17:06:10.430
> 
> 标签：arrays, macros, imagej

我有一个二维数组，我想用数字填充，一次一行。例如，如果我的数组大小为 nxm，我将编写循环 m 次以用 n 个值填充每一行。我该如何为 ImageJ 宏编写这个？我通常会写如下内容：

```
n=10;
m=5;
array=newArray(n,m);
FOR (i=0;i<m;i+=1){
numbers=newArray(m);
array[*,i]=numbers;
} 
```

但是，`array[*,i]`显然不起作用，`array[j][i]`如果我在循环“i”中添加另一个循环“j”也不起作用。有人可以帮忙吗？我对在 ImageJ 中编写宏非常陌生。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:03:38.880

根据[Wayne Rasband（ImageJ 的开发者）](http://imagej.1557.n6.nabble.com/Two-Dimensional-Arrays-td3704799.html%3E)的说法，宏语言不支持二维数组。

我建议您考虑用 Java 编写一个插件。[这里](http://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=8&ved=0CFwQFjAH&url=http://www.gm.fh-koeln.de/~konen/WPF-BV/tutorial-ImageJ_V1.71.pdf&ei=NK5RUJvrA-mw0QWiu4CgAg&usg=AFQjCNFHS15Tn323YiG6srGOm7-raALGtw&cad=rja)有一个很好的指南，它还比较了宏和插件。图像处理越复杂，您就越应该考虑使用 Java。

其他选项包括使用斐济的 python 界面。

# javascript - 使用 jQuery 对伪元素进行动画处理

> ID：12393140
> 
> 赞同：9
> 
> 时间：2012-09-12T17:06:12.000
> 
> 标签：javascript, jquery, css

我正在使用`a:after`，它包含`right: Ypx`.

我想使用`animate`jQuery 中的方法将元素 ( `a:after`) 从 Ypx 移动到 Zpx，我该怎么做？

例如：

```
[link-text][after]
[link-text]-- moving > --[after] 
```

我知道如何在没有动画的情况下做到这一点，只是在做，`a:hover:after { right: Zpx }`但如何使用动画？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T20:22:11.107

您正在尝试做的事情非常hacky，我强烈建议您制作真实元素，而不是尝试为伪元素设置动画。但是，供将来参考：为伪元素设置动画的唯一方法是插入`style`标签并更改实际 CSS 中的值，例如...

```
var styles = document.getElementById("pseudo-mover")
var distance = 100;

var move = function(){
    styles.innerHTML = ".box:after {left: " + distance + "px}";
    distance++;
    if (distance < 200) 
        setTimeout(move, 30);    
}

move() 
```

[http://jsfiddle.net/X7aTf/](http://jsfiddle.net/X7aTf/)

这是 vanilla js，但您可以使用`step`jquery 中的回调`animate`来挂钩 jquery 的缓动和计时功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T17:17:08.683

您可以使用 CSS3 过渡来完成此操作，但遗憾的是（据我所知）目前仅在 FireFox 4+ 中支持它们。

[http://jsfiddle.net/XT6qJ/1/](http://jsfiddle.net/XT6qJ/1/)

```
#foo:after{
    content:'!';
    display:inline-block;
    border:solid 1px #f00;
    padding:3px;
    width:25px;
    text-align:center;
    -webkit-transition:margin-left 1s;
    -moz-transition:margin-left 1s;    
    -ms-transition:margin-left 1s;
    -o-transition:margin-left 1s;    
    transition:margin-left 1s;    
}
#foo:hover:after{
    margin-left:100px;    
} 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-09-12T19:42:25.447

使用 next() 代替。[这是](http://jsfiddle.net/izaiasdotcom/ps2YG/10/)您如何实现这一目标的方法。

# jquery - 防止锚标记触发 Chrome 状态栏

> ID：12393147
> 
> 赞同：1
> 
> 时间：2012-09-12T17:06:41.120
> 
> 标签：jquery, html, css, jquery-ui, google-chrome

我正在开发一个 Web 应用程序，它有一个用作工具栏的页脚，它还显示信息。应用程序的布局是弹性的，因此页脚始终在页面底部可见；没有滚动。由于与此问题无关的原因，我们认为页面底部是工具栏元素的理想位置。

我在使用 Chrome 时遇到的问题是，在两种情况下状态栏会妨碍并覆盖正在显示的一些信息。第一个是悬停在吸盘式菜单上时。将鼠标悬停在菜单元素上时状态栏会显示目的地（到目前为止还不错），但在某些情况下，它会卡住并且在页面刷新之前永远不会消失（Chrome 错误？）。

第二个问题可以在这个[jsfiddle](http://jsfiddle.net/v9RRs/1/)中看到。由于 Jquery UI 滑块使用锚标记，因此移动它会触发显示当前位置的状态栏（恕我直言，非常无用）。问题是页脚上的某些信息在移动滑块时会更新，因此 Chrome 的状态栏会阻止我以这种方式呈现信息。状态栏也卡住了，因为锚标签获得焦点，但我可以用这段代码来防止它：

```
$("#slider").on("slidestop", function(event, ui)
{
    $("a.ui-slider-handle").blur();
}); 
```

状态栏在滑动时仍然会妨碍，这打破了我们目前的设计。我可以对这些标签做些什么来防止它们触发状态栏吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T17:20:53.450

您可以通过从链接中删除 href 属性并在单击处理程序中重新应用它们的链接功能来做到这一点。

这是一个例子：http: [//jsbin.com/ikated/1/edit](http://jsbin.com/ikated/1/edit)

但这是一个糟糕的设计，并且破坏了用户的重要浏览器功能。它隐藏了链接的作用，隐藏了链接的内容（除非您重新设置它以使用`text-decoration: underline; cursor: pointer;`或用于链接的任何样式，并破坏中键单击功能。您可以将其替换为另一个处理程序，但隐藏链接目标仍然是一个欺骗性和用户敌对模式 IMO。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T19:51:12.580

你可以使用

```
$("#slider > a").removeAttr("href"); 
```

​并且当滑块按钮悬停/聚焦时，状态栏将不再显示。这是最好的解决方案吗？可能不是，但它有效，而且我认为它对可用性没有任何严重影响。

# git - 如何使用 Github - hg-Git - Mercurial 创建选择性拉取请求？

> ID：12393156
> 
> 赞同：6
> 
> 时间：2012-09-12T17:07:14.903
> 
> 标签：git, mercurial, github

我想为 Github 上的一个开源项目做出贡献。在我的工作流程如下之前（未使用 VCS）：

1.  我在硬盘上保留了一个“工作”文件夹和一个“干净”文件夹。当有变化时，我已经更新了参考版本，并继续使用我的“工作”版本。
2.  当我想做一个拉取请求时，我在一个可视化比较程序中比较了文件，然后转到 Github.com/source/edit 文件，手动编辑不同的文件并在 Web 界面上发送拉取请求。

现在我想对这个工作流程进行现代化改造（同时避免使用 Git），但经过 5 个小时的反复试验后，我完全陷入了困境。我做了以下事情：

1.  将 Github 复制复制到我自己的
2.  克隆了分叉的 repro 并编辑了 url 以`git+ssh://git@github.com`使推送成为可能。Github - hg-Git - Mercurial 到目前为止工作完美。
3.  像往常一样开始在分叉的复制品上进行编辑。修改文件等
4.  现在，如果我想为我编辑的**一些文件提交拉取请求，我该怎么办？**我已经尝试克隆到另一个复制品中并且只在那里修改，但我没有看到这对我有什么帮助。

到目前为止，我能想到的唯一想法是在硬盘驱动器上保留两个分叉的复制品，一个“干净”，一个“工作”。然后我会物理地将文件从“工作”复制到“干净”，并且只在这些文件的“干净”复制中创建一个提交。但这似乎是一种“hackish”的做事方式，我敢肯定，书签/克隆复制品或其他优雅的东西必须有一种干净的方式。

**你能告诉我使用 Mercurial 发送选择性拉取请求的最佳工作流程是什么吗？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-13T00:04:55.380

你不能做一个只有部分变更集的拉取请求——变更集在 Mercurial 和 Git 中都是不可分离的。

您也不能在不拉动*所有*祖先的情况下推送或拉动（或请求拉动）变更集，因此即使提交两次不同的时间，每次使用不同的文件，如果您提交这些东西，也不会得到您想要的你不想在你做的事情之前推/拉/提交。

这就是为什么您需要使用**功能分支**将您的提交分成逻辑上不同的开发线。

如果上游仓库看起来像这样：

```
[A]---[B]---[C]---[D] 
```

然后你克隆它，所以现在你有了这个：

```
[A]---[B]---[C]---[D] 
```

然后你创建一个变更集，其中包含一些你想作为拉取请求提交的东西，而一些你不想提交的东西：

```
[A]---[B]---[C]---[D]---[E] 
```

你不走运。你不能推动 E 的一部分而不推动它的全部。您需要将要推送到一个变更集 (F) 的内容和您不想（还？）想要推送（或请求拉入）另一个变更集 (E) 的内容分开：

```
[A]---[B]---[C]---[D]---[E]---[F] 
```

您仍然不走运，因为您不能在不包括 E 的情况下推动（或请求拉动 F），因为 E 是 F 的祖先。

相反，您需要让您的 E 和 F 工作兄弟姐妹，而不是父母孩子。像这样：

```
[A]---[B]---[C]---[D]---[E]
                     \
                      --[F] 
```

**现在**你可以在没有 E 的情况下将 F 推到你的分叉上，并且可以在他们甚至没有看到 E 的情况下请求拉入 F。

无论您使用 Mercurial，该分支命令看起来都不同：

```
hg clone THEIRS # now you have A through D
... work ...
hg commit # now you created E, which you don't want to push
hg update D  # current directory no longer shows E
... work ...
hg commit # now you have F which is a child of D and a sibling of E
hg push -r .    # send F (but not E) 
```

或混帐：

```
git clone THEIRS # now you have A through D
git checkout -b feature_e
... work ...
git commit # now you have created E, which you don't want to push
git checkout master # current directory no longer shows E
git checkout -b feature_f
... work ...
git commit # now you have created F, which you do want to share
git push -u origin feature_f  # send F but not E 
```

现在你将在那里有一个只有 F 工作而不是 E 工作的分支，并且可以发出你想要的拉取请求。

**TL;DR：当你在同一个提交或**分支中混合了贡献和非贡献时，你就不走运了。您需要将它们分开或创建补丁并提交补丁而不是拉取请求。

# assembly - 调用子程序时的汇编堆栈

> ID：12393158
> 
> 赞同：0
> 
> 时间：2012-09-12T17:07:19.947
> 
> 标签：assembly, x86

所以如果我有这样的东西

```
rout:
pop eax
pop ecx
add ecx,2
push ecx
ret 
```

然后就

```
push 3
call rout 
```

我注意到第一次弹出不会像我想象的那样给我 3 的值，而是在第一次弹出后得到它。

我的问题是，当我调用它时，推送到堆栈的最后一个值是什么？（在本例中的寄存器 eax 中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:10:41.847

假设您正在使用 80x86 架构：

它是 proc 的返回地址（如果它是近调用）。如果是 NEAR 调用，下一个 POP 将给您值 (3)，如果是 FAR 调用，则返回地址的段。

检查[此](http://css.csail.mit.edu/6.858/2012/readings/i386/CALL.htm)站点以了解发出 CALL 时实际发生的情况的伪代码。

# ruby-on-rails - 读取文件内容并在视图上显示行号

> ID：12393166
> 
> 赞同：0
> 
> 时间：2012-09-12T17:08:11.997
> 
> 标签：ruby-on-rails, ruby, jruby

我正在尝试编写代码来读取用户输入的 Ruby 脚本并将其存储在临时文件中，然后将该临时文件传递`jruby -c temp_file`给进行语法验证。

如果发现任何错误，我必须显示错误以及用户输入的带有行号的脚本。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T20:16:27.643

如果我正确理解您要实现的目标，您可以将`jruby-parser`(install `gem install jruby-parser`) 与 JRuby 一起使用来查找发生错误的行号：

```
require 'jruby-parser'

# Read script file into a String
script = File.open('hello.rb', 'r').read

begin
  JRubyParser.parse(script)
rescue Exception => e
  # Display line number
  puts e.position.start_line
  # Display error message
  puts e.message
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T17:13:01.470

如果存在语法错误，您会看到失败的行号：

`blah.rb:2: syntax error, unexpected '.'`

因此，只需在换行符 ( ) 上拆分您的脚本`\n`，这就是您的错误行（当然基于 1 个索引）。

# string - Powershell字符串到数字函数？

> ID：12393172
> 
> 赞同：1
> 
> 时间：2012-09-12T17:08:49.077
> 
> 标签：string, powershell, format

我正在寻找一种将数字字符串（例如“1.78M”“1.47B”）转换为整数变量的简单方法。

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T17:47:11.533

您在寻找`M`==`MB`还是`M`== `1E6`？如果是前者，PowerShell 可以理解 KB、MB、GB 和 TB，例如：

```
C:\PS> Invoke-Expression "2MB"
2097152 
```

`Invoke-Expression`如果您从用户、文件（即不受信任的来源）获取字符串，请注意这里。你必须小心执行它。假设字符串是`"2MB; Remove-Item C:\ -Recurse -Force -Whatif -EA 0"`，你会`Invoke-Expression`在那个字符串上使用糟糕的一天。顺便说一句，我在这里通过添加 -Whatif 很好。:-)

如果是后者，您可以执行 regex -replace 后跟强制，例如：

```
C:\PS> [long]("3.34 B" -replace '(\d+)\s*(B)','$1E9')
3340000000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T17:56:33.800

没有内置支持 M 表示百万、B 表示十亿等后缀。例如，只有内置支持“文件大小”后缀`32KB -> 32768`

这是我尝试使用基本脚本版本来解决您的问题。如果需要，这支持多字符后缀，或者根本不支持后缀。它总是会返回一个`[int]`，所以要小心溢出（例如`5.5B`，由于它不适合 int，所以会导致错误）。您可以稍微修改类型以支持更大的数字。

```
function ToNumber
{
   param([string] $NumberString)

   # add other multiplier suffixes to this table
   $multipliers = @{ 'B' = 1000000000; 'M' = 1000000; 'K' = 1000; '' = 1 }

   switch -regex ($numberString)
   {
      '^(?<base>[\d\.]+)(?<suffix>\w*)$'
      {
         $base = [double] $matches['base']
         $multiplier = [int] $multipliers[$matches['suffix']]

         if($multiplier)
         {
            [int]($base * $multiplier)
         }
         else
         {
            throw "$($matches['suffix']) is an unknown suffix"
         }
      }
      default
      {
         throw 'Unable to parse input'
      }
   }
}

C:\> ToNumber '1.7B'
1700000000
C:\> ToNumber '1.7K'
1700 
```

# iphone - 我可以在 iTunes 中更改应用程序状态吗？

> ID：12393174
> 
> 赞同：0
> 
> 时间：2012-09-12T17:08:57.283
> 
> 标签：iphone, ios, ipad, app-store-connect

我有一个应用程序，其中有 9 个应用程序内购买。我已经创建了它们并且都准备好提交，但不幸的是我已经准备好上传二进制文件而没有选择应用内购买项目。现在应用程序的状态是**Waiting for Upload**，但我忘了选择应用内购买。有什么办法可以重新提交应用程序吗？有谁能够帮助我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T17:19:19.717

只需拒绝您的二进制文件并提交一个新的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T17:54:32.787

**使用Application Loader**或通过 Xcode提交（上传）您的应用程序的二进制文件。状态将更改为**Waiting For Review**。

然后从 iTunes 主页，单击**管理您的应用程序 -> 选择您的应用程序（您刚刚上传） -> 查看详细信息 -> 二进制详细信息 -> 拒绝此二进制文件**

在此之后，您可以将应用内购买连同应用一起提交以供审核

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T17:40:02.557

提交任何二进制文件，然后拒绝它。这将允许您进入并添加 IAP。然后提交您的应用程序。

# c# - 垃圾收集器的世代是什么意思？

> ID：12393176
> 
> 赞同：9
> 
> 时间：2012-09-12T17:09:07.117
> 
> 标签：c#, .net

C#中垃圾收集器的世代是什么意思？它与概念不同还是 GENERATION 只是一个用于表示时间段的术语？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-12T17:10:48.673

GC 生成与对象存活的垃圾收集次数有关。

所有对象都从第 0 代开始。当发生垃圾回收时，无法收集第 N 代对象，则将其移至第 N+1 代。

这些代用于性能优化垃圾收集。一般情况下，第 0 代：

1.  是整个堆大小的一小部分
2.  有很多短命的对象。

因此，当垃圾收集发生时，垃圾收集器从收集第 0 代开始，这将很快。如果可以释放足够的内存，则无需查看旧代，因此可以快速进行收集。

可以写有关该主题的书籍；[但首先，本文](http://msdn.microsoft.com/en-us/library/ms973837.aspx)中有一些很棒的细节，或者[参考这里](http://msdn.microsoft.com/en-us/library/0xy59wtx.aspx)。

# java - playOrm - 初始测试文件运行 - TestManyToOne.java

> ID：12393179
> 
> 赞同：1
> 
> 时间：2012-09-12T17:09:10.193
> 
> 标签：java, eclipse, playorm

开始使用测试文件 - TestManyToOne.java，我想我会在 Eclipse 中运行该文件，看看会发生什么，或者我应该期待什么？？？这样做时，我在控制台中获得了大量信息，...

请参阅下面的信息，

...以及几个**Java 异常断点。**

*   这有什么好担心的吗？

*   在调试领域，*我想在哪里放置行断点？*

提前感谢您的洞察力，
瑞恩

**控制台信息很丰富，所以只发布最后几行；如果需要更多信息，请告知...**

```
 `CF=DboColumnMeta persist rowkey=PartSecurity:id
     CF=DboTableMeta persist rowkey=PartSecurity
    `CF=DboColumnMeta persist rowkey=PartSecurity:id
     CF=DboColumnMeta persist rowkey=StringIndice:id
    `CF=DboColumnMeta persist rowkey=PartSecurity:id
     CF=DboTableMeta persist rowkey=StringIndice
    `CF=DboColumnMeta persist rowkey=PartSecurity:id
     CF=DboColumnMeta persist rowkey=DecimalIndice:id
    `CF=DboColumnMeta persist rowkey=PartSecurity:id
     CF=DboTableMeta persist rowkey=DecimalIndice
    `CF=DboColumnMeta persist rowkey=PartSecurity:id
     CF=DboColumnMeta persist rowkey=IntegerIndice:id
    `CF=DboColumnMeta persist rowkey=PartSecurity:id
     CF=DboTableMeta persist rowkey=IntegerIndice
    `CF=DboColumnMeta persist rowkey=PartSecurity:id
     CF=DboDatabaseMeta persist rowkey=nosqlorm
    `CF=DboColumnMeta persist rowkey=PartSecurity:id
     2012-09-12 09:52:06,830         `CF=DboColumnMeta persist rowkey=PartSecurity:id
     com.alvazan.orm.layer9z.spi.db.inmemory.InMemorySession
    `CF=DboColumnMeta persist rowkey=PartSecurity:id
     `CF=DboColumnMeta persist rowkey=PartSecurity:id
     `CF=DboColumnMeta         `CF=DboColumnMeta persist rowkey=PartSecurity:id
     persist rowkey=PartSecurity:id
     lookupColFamily
    INFO: CREATING column family=DboColumnMeta in the in memory nosql store
    2012-09-12 09:52:06,830         `CF=DboColumnMeta persist rowkey=PartSecurity:id
     com.alvazan.orm.layer9z.spi.db.inmemory.InMemorySession          lookupColFamily
    `CF=DboColumnMeta persist rowkey=PartSecurity:id
    `CF=DboColumnMeta persist rowkey=PartSecurity:id
     INFO: CREATING column family=DboTableMeta in the in memory nosql store
    `CF=DboColumnMeta persist rowkey=PartSecurity:id
     2012-09-12 09:52:06,850         `CF=DboColumnMeta persist rowkey=PartSecurity:id
     com.alvazan.orm.layer9z.spi.db.inmemory.InMemorySession                 `CF=DboColumnMeta persist rowkey=PartSecurity:id
     `CF=DboColumnMeta         `CF=DboColumnMeta persist rowkey=PartSecurity:id
     persist rowkey=PartSecurity:id
     lookupColFamily
    `CF=DboColumnMeta persist rowkey=PartSecurity:id
     INFO: CREATING column family=DboDatabaseMeta in the in memory nosql store
    `CF=DboColumnMeta persist rowkey=PartSecurity:id
     2012-09-12 09:52:06,851 com.alvazan.orm.logging.NoSqlRawLogger sendChanges
    INFO: [rawlogger] Sending Changes to server took(including spi plugin)=21 ms` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:46:37.670

如果您在 TestManyToOne.java 中，一个好的断点将在简单的 testReadWrite 方法或此版本中的第 79 行

[https://github.com/deanhiller/playorm/blob/6f5ed41d2d284902c194b843ac90876da55bab0b/input/javasrc/com/alvazan/test/TestManyToOne.java](https://github.com/deanhiller/playorm/blob/6f5ed41d2d284902c194b843ac90876da55bab0b/input/javasrc/com/alvazan/test/TestManyToOne.java)

然后你可以进入 readWriteBasic 方法。我不确定“几个 java 异常断点”是什么意思？也许是你的意思的截图？

此外，您的控制台意味着您可能正在一个类或整个测试套件中运行每个测试。相反，我只需右键单击要运行/调试“testReadWrite”的方法并运行/调试该方法（在控制台中也不会有那么多）。

院长

# file-upload - 将远程文件上传到谷歌驱动器

> ID：12393180
> 
> 赞同：7
> 
> 时间：2012-09-12T17:09:10.513
> 
> 标签：file-upload, remote-server, google-drive-api

我想知道是否可以将远程文件直接上传到谷歌驱动器？（远程文件：与php脚本不在同一服务器的文件）

如果我们的文件存在于[http://www.example.com/path/to/file](http://www.example.com/path/to/file)我希望它直接上传（不下载到我自己的服务器并稍后上传）到谷歌驱动器

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T12:26:55.403

这是目前无法直接实现的。但是，有一些服务，如 SMEStorage，可以帮助您通过某些服务器远程上传。此服务不支持所有文件托管。它们主要支持云服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T00:47:32.043

你可以这样做，但你必须用谷歌浏览器这样做，这样：将你的文件链接远程上传到[http://www.sidecloudload.com/](http://www.sidecloudload.com/)他们可以远程上传到保管箱或通过电子邮件发送文件（发送到你的gmail）有一个用于 google chrome 的插件，可让您将附件从 gmail 保存到 google 驱动器，您可以[在此处](https://chrome.google.com/webstore/detail/gmail-attachments-to-driv/epoohehjbaenldfbahgcegdmlogakgin)下载， 但该网站有大小限制（每个文件 25MB）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-28T20:52:19.013

在这里您可以上传到 drobox（最大 300 MB）和谷歌驱动器（100 MB） [uploadcloud.net](http://uploadcloud.net)

# javascript - jQuery 中的十几个倒计时每秒刷新一次。

> ID：12393184
> 
> 赞同：-1
> 
> 时间：2012-09-12T17:09:23.963
> 
> 标签：javascript, countdown

我想做十几个动态倒计时。我在 php 表中有倒计时的时间结束：“timeend []”和文件 timeend.php 返回如下：2012-12-31 04:00:00;2012-12-30 02:00:00;... 我有 javascript代码，但它适用于一个倒计时： http: [//pastebin.com/2dih5XVC](http://pastebin.com/2dih5XVC) 谁知道如何进行许多动态倒计时？？？

Ps 抱歉英语不好，但我是波兰人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:11:36.783

使用[这个 jQuery 插件](http://keith-wood.name/countdown.html)，你可以用来`$(selector).countdown({since: new Date(2010, 12-1, 25)});`添加一个新的倒计时。使用不同的选择器会导致不同的倒计时。

# android - 日历视图中的颜色单元格

> ID：12393189
> 
> 赞同：1
> 
> 时间：2012-09-12T17:10:08.533
> 
> 标签：android, calendarview

我使用 calendarView，现在我想更改某些日历单元格中的背景颜色。我怎样才能做到这一点？或者也许有人知道如何在视图中的某个单元格中设置监听器？我试过这样：

```
(ListView) calendar.findViewById(android.R.id.list); 
```

在小部件中查找列表，一些 id 回来了，但监听器不起作用。当我想在视图中单击当前日期时，同样的问题。

# asp.net-mvc - 修改实体框架映射

> ID：12393191
> 
> 赞同：0
> 
> 时间：2012-09-12T17:10:18.050
> 
> 标签：asp.net-mvc, entity-framework, mapping

我在表中有一个列，该列的类型是`nvarchar(50)`，并且有实体框架来为 asp mvc 项目从该表生成 te 映射和模型，但是在出现棘手的错误之后，我发现 50 长度是字段类型的缩写。我已经将列修改为`nvarchar(100)`映射文件夹，并且 Table.cs 文件有一行`this.Property(t => t.AColumn).HasMaxLength(50)`，我可以猜测将值修改为 100 应该可以完成工作，这就是我需要的全部还是我需要 Entity Framework 重新 -做所有事情，另一个问题是如何制作 Razor、Entity 或任何工具来显示与映射约束相关的某种消息。

**编辑：**

错误是`AColumn`对于表单字段来说太短了，但它没有显示错误消息，它只显示来自模型属性或类型约束的错误，而不是映射上定义的东西，例如`HasMaxLength(50)`，我希望能够显示长度如果可能的话，视图上的错误。该应用程序刚刚因 EntityFramework 异常而失败，并带有相当复杂的回溯。

谢谢。

# c# - 当用户关闭表单时，我是否必须关闭正在运行的 BackgroundWorkers？

> ID：12393195
> 
> 赞同：2
> 
> 时间：2012-09-12T17:10:33.423
> 
> 标签：c#, backgroundworker

从这里[关闭应用程序是否会停止所有活动的BackgroundWorkers？](https://stackoverflow.com/questions/1687677/does-closing-the-application-stops-all-active-backgroundworkers)似乎没有。

但是从这里[如何在 Form 的 Closing 事件中停止 BackgroundWorker？](https://stackoverflow.com/questions/1731384/how-to-stop-backgroundworker-on-forms-closing-event)似乎是的。

那么它是哪一个？

（编辑：我意识到`BackgroundWorker`s 可能会出现异常退出。但这有什么问题？这里的重点不是不要让正在运行的线程占用资源吗？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T17:25:25.733

关闭 a`Form`并**不会**停止由该表单启动的所有后台工作人员。

当整个应用程序结束时，**它将**停止所有后台线程。

关闭主窗体（除非您已修改该`Main`方法以执行其他操作）将结束整个应用程序。

您引用的每个问题都是正确的。如果关闭主窗体，则整个应用程序将结束，后台工作人员将自行关闭。如果正在关闭的表单不是主表单，而是其他表单，并且您希望后台工作程序开始停止，那么您需要自己这样做。

还值得注意的是，您提供的[第二个链接](https://stackoverflow.com/questions/1731384/how-to-stop-backgroundworker-on-forms-closing-event)要求一些更复杂的东西。在那篇文章中很清楚，关闭表单（如果它是主表单）将停止后台线程的执行。OP 正在尝试做的是告诉后台线程，“嘿，是时候完成了，我们在这里完成了”，然后让表单等待，直到后台线程可以很好地完成清理工作，而不仅仅是在执行某些操作时退出并强制中止线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T17:13:49.143

当程序关闭时，您提供的两个具有正确答案`BackgroundWorker`的链接都将关闭。*非托管*资源是您必须担心显式关闭的资源。

# spring - 使用spring将持久化实体映射到mongo

> ID：12393201
> 
> 赞同：0
> 
> 时间：2012-09-12T17:10:44.997
> 
> 标签：spring, mongodb, mapping, entities

在春季文档中谈论**自定义类型映射** [参考](http://static.springsource.org/spring-data/data-mongo/docs/1.1.0.M1/reference/html/)

使用 @TypeAlias 和 TypeInformationMapper .. 但我找不到任何实际示例
，有人可以参考吗？

定义**MappingMongoConverter**时，它与实体持久性有关吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T18:08:44.823

当您使用 spring-data 持久化实体时，创建的 mongo 文档将具有 _class 属性，该属性存储类的完全限定名称。@TypeAlias 是自定义保存在 _class 属性中的值。

这个来自 spring[参考](http://static.springsource.org/spring-data/data-mongo/docs/1.1.0.M1/reference/html/#mongo-template.type-mapping)的示例显示了如何将 _class 属性添加到 mongo 文档中。如果附加 @TypeAlias("sample) 则 _class 属性将具有值“sample”而不是完全限定名称。

```
public class Sample {
  Contact value;
}

public abstract class Contact { … }

public class Person extends Contact { … }

Sample sample = new Sample();
sample.value = new Person();

mongoTemplate.save(sample);

{ "_class" : "com.acme.Sample",
  "value" : { "_class" : "com.acme.Person" }
} 
```

# java - 如何在eclipse中将我的maven项目导出到war文件

> ID：12393207
> 
> 赞同：6
> 
> 时间：2012-09-12T17:11:06.237
> 
> 标签：java, eclipse, spring, maven

一段时间以来，我一直在使用 Eclipse 在 springs 中编写 Web 项目，但我也刚刚开始研究 maven。我在 Eclipse 中使用 maven 制作了一个不错的示例 Web 项目，但是如果我右键单击该项目，我将无法再导出到 WAR 文件。如何让我的战争文件放在服务器上？我必须在我的 pom.xml 中放一些东西吗？

请帮助我....我的 pom.xml 如下：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>org.springsource.greenbeans.maven</groupId>
    <artifactId>WebFlowTemplate</artifactId>
    <packaging>war</packaging>
    <version>0.0.1-SNAPSHOT</version>
    <name>WebFlowTemplate Maven Webapp</name>
    <url>http://maven.apache.org</url>
    <dependencies>

        <dependency>
            <groupId>jstl</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>3.6.3.Final</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-validator</artifactId>
            <version>4.3.0.Final</version>
        </dependency>

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.1</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjtools</artifactId>
            <version>1.6.2</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aspects</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.webflow</groupId>
            <artifactId>spring-webflow</artifactId>
            <version>2.3.1.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-web</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aop</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.17</version>
        </dependency>

    </dependencies>
    <build>
        <finalName>WebFlowTemplate</finalName>
    </build>
</project> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T17:21:36.183

使用 maven 插件 maven-compiler-plugin、maven-war-plugin，例如：

```
<build>
    <plugins>
        ...
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.0.2</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
                <encoding>${project.build.sourceEncoding}</encoding>
                <showWarnings>true</showWarnings>
                <showDeprecation>true</showDeprecation>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.1-beta-1</version>
            <configuration>
                <failOnMissingWebXml>false</failOnMissingWebXml>
                <webappDirectory>${project.build.directory}/${project.artifactId}</webappDirectory>
                <warName>${project.artifactId}_${noVer}</warName>
                <archive>
                    <addMavenDescriptor>false</addMavenDescriptor>
                    <manifest>
                        <addClasspath>false</addClasspath>
                    </manifest>
                    <manifestEntries/>
                    <manifestFile/>
                </archive>
            </configuration>
        </plugin>
        ...
    </plugins>
    <finalName>${project.artifactId}-${project.version}</finalName>
</build> 
```

然后简单地说：

```
mvn install 
```

将创建 WAR 文件。

您可以从 eclipse 运行配置中执行 mvn install 目标...

# python - 将 Eclipse PyDev 的搜索功能与外部库一起使用

> ID：12393209
> 
> 赞同：3
> 
> 时间：2012-09-12T17:11:12.003
> 
> 标签：python, eclipse, search, pydev

我发现 PyDev 的搜索功能非常有用，并经常使用它来浏览我的项目。我已经正确设置了我的解释器，因此 PyDev 知道我的代码使用的外部库，甚至可以让我跟踪对库模块的引用。很明显，这很好，但我也希望能够像搜索自己的代码一样搜索外部库。

这里有一个与 Java 开发有关的类似问题：[How do I search Libraries in eclipse?](https://stackoverflow.com/questions/8969503/how-do-i-search-libraries-in-eclipse)

PyDev 有什么东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T06:54:59.557

我使用两种不同的方法来允许在我的库代码中进行搜索：

*   当我使用[virtualenv](http://www.virtualenv.org/)时，我将所有代码保存在下面`myproject/src`并将其添加`myproject/lib/python2.7/site-packages/`为 pydev 源文件夹。（一定要设置你的python解释器`myproject/bin/python`）
*   在其他情况下，我使用两个不同的 pydev 项目。第一个 ( `myproject`) 包括我的代码。第二个被调用`myproject-lib`并包含库作为它的源路径（`.../site_packages`）。第一个项目引用了第二个项目（通常我将它们都保存在一个工作区中）。这适用于 virtualenv，但我相信您实际上可以在系统范围的 python 中创建一个 pydev 项目。确保在两个项目中使用相同的 python 解释器。

现在您可以快速轻松地使用**开放资源**( `CTRL`+ `T`) 和**全局浏览器**( `CTRL`++ `Shift`)`T`来查找您的库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T21:40:13.393

恐怕 PyDev 还不支持这个。[我在https://jira.appcelerator.org/browse/APSTUD-7405](https://jira.appcelerator.org/browse/APSTUD-7405)为此创建了功能请求同时您可以将外部库的文件夹链接到您的项目。

# jquery - Bootstrap-collapse 无法与自定义隐藏/显示 Jquery 一起正常工作

> ID：12393211
> 
> 赞同：0
> 
> 时间：2012-09-12T17:11:25.857
> 
> 标签：jquery, twitter-bootstrap, collapse

我正在使用 Twitter 的 Bootstrap 框架和他们的 JQuery 折叠插件。我正在创建一个表单，当单击 Timeframe 时，例如通过折叠命令显示 ul。然后，用户将单击显示的 UL 上的一个选项，例如 7 天前。这会初始化自定义代码以显示隐藏的 li 并关闭原始 ul。在我添加以下代码之前，这一直很好：

```
$('filter-reset').click(function() {
    $('.7days-select:not('.filter-selection-hidden').addClass('filter-selection-hidden');
    }); 
```

现在编码已经损坏，并且 ul（过滤器选择时间）或过滤器选择问题在不应该显示的页面加载时显示，现在隐藏的 li 选择即使单击适当的元素以取消隐藏它们也不会显示。

广泛的编码可以在这里找到：

[http://jsfiddle.net/rsxavior/Gj4Dg/](http://jsfiddle.net/rsxavior/Gj4Dg/)

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:20:41.633

您那里的代码已损坏，应该是：

```
$('.filter-reset').click(function() {
    $('.7days-select').addClass('filter-selection-hidden');
}); 
```

# mysql - 对于包含 OR 的查询，什么是有效的索引策略？

> ID：12393214
> 
> 赞同：0
> 
> 时间：2012-09-12T17:11:37.753
> 
> 标签：mysql

下面是示例查询，如何使用 or 子句添加索引？

```
select fild1,fld2
  from tablename 
 where (field3='XXXX' or field4='YYYY') and field6='xdffgfd'; 
```

下面的索引会起作用吗？

```
ALTER TABLE tablename ADD INDEX ind_name(field3,field4,field6); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T17:23:18.210

不，这不是一个好的索引策略。您建议的复合索引适用于`field3`查找，但不适用于`field4`查找。

为此，您将需要一个单独的索引`field4`。如果`(field4, field6)`除了索引之外还提供复合索引，`(field3,field6)`您将优化`OR`子句的两个部分以进行查找，但您会在插入和更新方面产生开销。

# mysql - MySQL 计算两个日期之间的差异，但有一个转折

> ID：12393216
> 
> 赞同：0
> 
> 时间：2012-09-12T17:11:40.403
> 
> 标签：mysql, sql, join, datediff

我有 2 张桌子：`Product`, `User`.

```
Product:
    Date(Datetime)
    Phone_Number(Number).

User: 
    Date (Datetime)
    Phone_Number(Number)
    Type(Value of N or C). 
```

当一个新用户被添加到`User`表中时，它会被赋予一个日期、电话号码和“N”值（N 表示新用户）。当用户被取消时，会给出一个日期、电话号码和“C”值（C 表示已取消）。

使用 MySQL，我需要找出用户创建日期和用户被取消日期之间的日期差异，以及他们在创建日期和创建日期之间是否有产品（可以通过电话号码将用户与产品匹配）取消日期。

任何帮助将不胜感激，因为我的查询写作并不糟糕，但这我无法解决。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:18:10.673

```
SELECT
    /* Anything you want from the User table */
    /* CASE statement that checks if prod.phone_number is not null which means a product was present */
FROM
    User user_new
    JOIN User user_can
    ON user_new.phone_number = user_can.phone_number
    LEFT JOIN Product prod
    ON prod.phone_number = user_new.phone_number
WHERE
    (prod.Date IS NULL) OR -- Either there was no record.
    (prod.Date BETWEEN user_new.Date AND user_can.Date) -- or a product existed between the two dates. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T17:19:55.113

您需要首先自联接 User 表以查找创建和取消的日期。然后加入 Product 表以查看是否有任何内容。

```
SELECT u.Phone_Number, u.Created, u.Cancelled, p.Date as 'ProductDate'
FROM (
    SELECT u1.Phone_Number, u1.Date as 'Created', u2.Date as 'Cancelled'
    FROM User u1
      JOIN User u2 on u1.Phone_Number=u2.Phone_Number
    WHERE u1.Type = 'N'
      and u2.Type = 'C'
  ) u
  LEFT JOIN Product p on u.Phone_Number = p.Phone_Number
                     and p.Date between u.Created and u.Cancelled 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T17:20:23.907

如果您只存储一个日期字段，听起来您的表将没有必要的数据来确定用户创建日期和取消日期之间的差异。但是，如果您有 2 列 user.createdDate 和 user.cancelledDate 您可以使用 SELECT DATEDIFF(user.createdDate, user.cancelledDated) AS DiffDate 我不知道 DATEDIFF 是否适用于日期时间对象，我已经将它与普通日期一起使用格式为“year-mm-dd”，它将为您提供一个带有 DiffDate 的查询结果对象，这是天数的整数。如果 user.cancelledDate 在 user.createdDate 之前，你会得到一个负整数。

# r - 密度错误。默认值.....需要至少 2 个点才能自动选择带宽

> ID：12393219
> 
> 赞同：1
> 
> 时间：2012-09-12T17:11:44.607
> 
> 标签：r

我正在使用`mice`包来获取完整的数据。我认为问题在于我没有对所有数据进行插补，因此其中一些数据具有 NA。（一些数据缺失的变量仅用于预测其他变量的缺失，所以我不想估算这些变量。

我可以用这段代码复制问题：

```
require(mice)
impute <- mice(
    nhanes, 
    imputationMethod = c(
        "",        # age
        "pmm",     # bmi
        "pmm",  # hyp
        ""         # chl
    ),
    seed = 101)
x11()
densityplot(impute)

Error in density.default(x = c(NA_real_, NA_real_, NA_real_, NA_real_,  : 
  need at least 2 points to select a bandwidth automatically 
```

我怎样才能得到密度图？如果我`""`用`"pmm"`for替换`chl`或者只是运行，`impute <- mice(nhanes)`那么它将与这个例子一起工作，产生这个： ![在此处输入图像描述](../Images/510675c09024788d738c0d933713745d.png)

但我不能用我自己的数据做到这一点，所以我正在寻找另一种方法....只是为了得到 和 的密度图`bmi`，`hyp`在上面运行`mice`我的代码之后，它不会估算值`chl`

**编辑：** 我知道我可以使用我[之前的](https://stackoverflow.com/questions/12056989/density-plots-with-multiple-groups)问题的答案中的方法使用`ggplot`，但在这种情况下，我真的需要使用`densityplot`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T17:55:34.180

'chl' 列中仍然会有大量缺失数据。您可以使用鼠标功能`complete`将原始非缺失值和估算值组合在一起。但是，如果您将数据和公式的角色颠倒过来（最终）在 hte 帮助页面的详细信息中描述，则 densitplot.mids 函数将执行此操作。

```
densityplot( x=impute , data= ~ bmi+hyp) 
```

![在此处输入图像描述](../Images/cbd42ea6fabc2380a737d1476d603560.png)

# ms-access - 在 Access 2007 中更新 + 追加查询

> ID：12393226
> 
> 赞同：1
> 
> 时间：2012-09-12T17:12:03.133
> 
> 标签：ms-access, ms-access-2007

我现在正在研究一个数据库，我有一个非常具体的问题，我正在努力解决：

我的数据库中有一个大型主表，其中包含我们收集的所有信息。我们正在根据公司各个团队成员返回给我们的 Excel 文件更新此主表中的记录 - 所有记录都有唯一的 ID 号，因此我们知道要更新主表中的哪些字段。我们也在通过将文件名更新到主表中来跟踪谁做出了响应。我想用文件名更新它；但是，如果两个来源给我相同的数据，我想将第二个文件附加到第一个文件而不是用更新替换它。

问题是，我需要查询“知道”何时更新和何时追加。是否有一些我可以使用的 IF 语句 - 也许在 Null 时更新，在 Not Null 时追加？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:55:13.353

您可以在查询中引用 Excel 工作表或范围：

```
INSERT INTO Table1 ( ADate ) 
SELECT SomeDate FROM [Excel 8.0;HDR=YES;DATABASE=Z:\Docs\Test.xls].[Sheet1$a1:a4]
WHERE SomeDate Is Not Null 
```

这意味着您可以根据 Excel 文件中是否存在数据来运行查询。

# javascript - 从 Javascript 的文件夹中提取图像

> ID：12393228
> 
> 赞同：0
> 
> 时间：2012-09-12T17:12:10.533
> 
> 标签：javascript, html, css

我的问题很简单，但我不知道该怎么做，例如，在我的代码中，我从正在使用的网站中提取图像`icon: 'http://i45.tinypic.com/2yua8ns.png'`我想使用这样的东西：`icon: '\images/image.png'`

我如何在 HTML dreamweaver 脚本上使用 javascript 调用它？

编辑：解决，开始时不需要“\”，正确的方法是： `icon: 'images/image.png'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:14:32.463

```
var imagelocation = window.location.hostname + foo.icon; 
```

`foo`包含属性的对象在哪里`icon`。

# java - 两个while循环内的break语句

> ID：12393231
> 
> 赞同：28
> 
> 时间：2012-09-12T17:12:25.697
> 
> 标签：java, while-loop, break

假设我有这个：

```
while (a) {
  while (b) {
    if (b == 10) {
      break;
    }
  }
} 
```

**问题：** break 语句会将我带出两个循环还是仅从内部循环？谢谢你。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-12T17:16:25.540

在您的示例中，break 语句将带您退出 while(b) 循环

```
while(a) {

   while(b) {

      if(b == 10) {
         break;
      }
   }  
   // break will take you here.
} 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-09-12T17:13:25.150

它只会中断最直接的 while 循环。使用标签可以打破两个循环：看看这个例子取自[这里](https://stackoverflow.com/questions/886955/breaking-out-of-nested-loops-in-java)

* * *

```
public class Test {
  public static void main(String[] args) {
    outerloop:
    for (int i=0; i < 5; i++) {
      for (int j=0; j < 5; j++) {
        if (i * j > 6) {
          System.out.println("Breaking");
          break outerloop;
        }
        System.out.println(i + " " + j);
      }
    }
    System.out.println("Done");
  }
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-09-12T17:13:39.753

只从内心。如果您希望中断到特定循环，请使用**标记中断**

```
label1:
for(){
  label2:
  for(){
      if(condition1)
      break label1;//break outerloop

      if(condition2)
      break label2;//break innerloop
  }
} 
```

**另见**

*   [标记中断](https://stackoverflow.com/questions/3821827/loop-in-java-code-what-is-this-why-does-it-compile-and-generally-wtf/3821841#3821841)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-09-12T17:19:53.223

```
while (a) {

   while (b) {

      if (b == 10) {
          break;
      }
   }
} 
```

在上面的代码中，您将打破使用where (ie. ) where的**最内层循环**。`immediate loop``break`

您可以使用with**一次中断两个循环**`break``label`

```
label1: 
while (a) {

   while (b) {

      if (b == 10) {
          break label1;
      }
   }
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-09-13T12:50:38.477

@Abhishekkumar

Break 关键字源自C 和Assembly，Break 的唯一目的是将控制权从复合语句（即循环、条件、方法或过程）中传递出去。

请参考这些...

[http://tigcc.ticalc.org/doc/keywords.html#break](http://tigcc.ticalc.org/doc/keywords.html#break)

[http://www.functionx.com/cpp/keywords/break.htm](http://www.functionx.com/cpp/keywords/break.htm)

[http://en.wikipedia.org/wiki/Break_statement#Early_exit_from_loops](http://en.wikipedia.org/wiki/Break_statement#Early_exit_from_loops)

因此，如果您想同时退出两个循环，那么您必须使用两个中断，即一个在内部循环中，一个在外部循环中。

但是你想同时停止两个循环，那么你必须使用退出或返回。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-09-12T17:13:53.430

它将跳出立即包围它的循环。

但是，您可以打破标签：

```
myLabel:

while(a) {    
    while(b) {    
        if(b == 10)
            break myLabel;
    }
} 
```

我一般不喜欢使用这种模式，因为它很容易导致意大利面条式代码。使用未标记的中断或标志来终止循环。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-09-12T17:21:09.193

奇怪的是，在 PHP 中，break 语句接受一个数字参数，该参数告诉您要中断多少个外部循环，如下所示：

```
$i = 0;
while (++$i) {
   switch ($i) {
      case 5:
         echo "At 5<br />\n";
         break 1;  /* Exit only the switch. */
      case 10:
         echo "At 10; quitting<br />\n";
         break 2;  /* Exit the switch and the while. */
      default:
         break;
  }
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-09-11T13:57:49.033

您可以提出一个标志以将信息传递到外部 while 循环。在这种情况下，信息可以存储在一个变量中`breakOuterLoopFlag`，并且外部 while 循环根据该信息进行操作。见下面的伪代码：

```
int breakOuterLoopFlag = 0;

while(a){

  while(b){
      if(b == 10) {
        breakOuterLoopFlag = 1;
        break;
      }
    }

   if(breakOuterLoopFlag == 1) {
     break;
   }
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-09-12T17:14:03.803

一条`break`语句将带您脱离包含该`break`语句的最内层循环。

在示例中，内部 while 循环。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-09-12T17:13:44.710

java break 语句**不会**让你脱离多个嵌套循环。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-09-12T17:14:19.987

当然只有内循环。

# php - 在文本框中显示š

> ID：12393233
> 
> 赞同：0
> 
> 时间：2012-09-12T17:12:32.073
> 
> 标签：php, javascript, ajax

我试图在文本框中显示字符š，但它只显示单词中的其他字母。我正在从数据库中获取数据，并使用 json_encode 通过 xmlhttp.responseText 发送数据。执行 alert(xmlhttp.responseText) 时，字符将显示为 \u009a，但在 Unicode 中，它表示 U+0161 用于 š。也许这就是它无法正确显示的原因？我正在使用 Cpanel，并且我已将 DB 的所有编码设置为 utf8，但它不会让我从 ascii 更改实际页面的编码。也许这导致字母不显示？

主页代码：

```
function loadDoc()
{
   var xmlhttp;

   // code for IE7+, Firefox, Chrome, Opera, Safari
   if (window.XMLHttpRequest)
   {
      xmlhttp=new XMLHttpRequest();
   }
   // code for IE6, IE5
   else
   {
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
   }

   xmlhttp.onreadystatechange=function()
   {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
      {
         alert(xmlhttp.responseText);
         var a = JSON.parse(xmlhttp.responseText);
         document.getElementById("textbox").value=a.first;
         document.getElementById("textbox2").value=a.second;
         document.getElementById("textbox3").value=a.third;
         document.getElementById("textbox4").value=a.fourth;
         document.getElementById("textbox5").value=a.fifth;
         document.getElementById("textbox6").value=a.sixth;
      }
   }

   xmlhttp.open("GET","loadTextBox.php?id=4",true);
   xmlhttp.send();
} 
```

loadTextBox.php 代码：

```
<?php
header("Content-type: application/json");

---Placeholder for correct DB login info---

$result = $mysql->query(---Placeholder for correct SQL query---);

while ($row = $result->fetch_object())
{
   $queryResult[] = $row->present_tense;
}
$textboxValue = $queryResult[0];
$textboxValue2 = $queryResult[1];
$textboxValue3 = $queryResult[2];
$textboxValue4 = $queryResult[3];
$textboxValue5 = $queryResult[4];
$textboxValue6 = $queryResult[5];
echo    
json_encode(array('first'=>utf8_encode($textboxValue),'second'=>
utf8_encode($textboxValue2),'third'=>utf8_encode($textboxValue3),'fourth'=>
utf8_encode($textboxValue4),'fifth'=>utf8_encode($textboxValue5),'sixth'=>
utf8_encode($textboxValue6)));
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:30:34.730

U+009A 是单字符介绍器，与 Caron 非常相似，您可以在此处看到：[http](http://www.fileformat.info/info/unicode/char/9a/index.htm) ://www.fileformat.info/info/unicode/char/9a/index.htm 。

U+0161 是真正的 Caron Unicode 代码 ( [http://www.fileformat.info/info/unicode/char/161/index.htm](http://www.fileformat.info/info/unicode/char/161/index.htm) )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T05:03:54.073

在行中添加

```
$mysql->query("SET CHARACTER SET 'utf8'"); 
```

在`loadTextBox.php`连接到数据库之后和 SQL 查询之前并使用**utf8_encode**删除行修复它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-27T15:40:31.417

您使用的 db 或 json 编码器**都说**它具有 Unicode 数据，但实际上输出的是[Windows-1252](https://en.wikipedia.org/wiki/Windows-1252)；

# asp.net-mvc-3 - asp.net mvc 绑定到没有模型的 Telerik 网格

> ID：12393234
> 
> 赞同：0
> 
> 时间：2012-09-12T17:12:39.983
> 
> 标签：asp.net-mvc-3, telerik-mvc

是否可以在不定义模型的情况下将对象集合绑定到 Telerik mvc 控件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T19:54:36.523

没有模型你到底是什么意思？

如果您正在谈论为视图定义的模型 - 强类型视图，那么可以绑定它。您需要像这样指定模型的类型`Html.Telerik().Grid<YourType>((IEnumerable<YourType>)Model)`

如果您正在谈论省略此处声明的 Grid 类型 - 那么您可以在此处指定**动态**类型并使用此代码库中涵盖的方法来成功绑定网格。 [http://www.telerik.com/community/code-library/aspnet-mvc/grid/binding-to-a-collection-of-dynamic-objects-with-mvc3-razor.aspx](http://www.telerik.com/community/code-library/aspnet-mvc/grid/binding-to-a-collection-of-dynamic-objects-with-mvc3-razor.aspx)

我希望这就是您要搜索的内容。

# ruby - 黄瓜测试的步骤定义应该能够处理“a”和“an”[正则表达式相关]

> ID：12393236
> 
> 赞同：2
> 
> 时间：2012-09-12T17:12:59.937
> 
> 标签：ruby, regex, cucumber

我有这两个测试。他们几乎做同样的事情，所以我不想写两个独立的步骤来做几乎同样的事情。

```
Scenario: I delete a question link
  Given   I am on the home page
    When  I "delete" a "question" link
    Then  A "question" link should be "deleted"

Scenario: I delete a account link
  Given   I am on the home page
    When  I "delete" an "account" link
    Then  An "account" link should be "deleted" 
```

如果我想编写一个与`I "delete" a "question" link`and一起使用的步骤，`I "delete" an "account" link`我将如何修改以下正则表达式来处理“a”和“an”。

```
/^I "([^"]*)" a/an?? "([^"]*)" link$/ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T17:16:25.347

这应该这样做：

```
/^I "([^"]*)" an? "([^"]*)" link$/ 
```

问号表示“n”字符可以是字符串的一部分，但不必

如果类型中有任何“值”，您也可以使用：

```
/^I "([^"]*)" (a|an) "([^"]*)" link$/ 
```

# php - 卷曲下载网页与符号错误

> ID：12393242
> 
> 赞同：2
> 
> 时间：2012-09-12T17:13:26.940
> 
> 标签：php, curl

我正在尝试下载网页，例如：

[http://www.site.com/savings/thispage?OneId=88&SecondId=185](http://www.site.com/savings/thispage?OneId=88&SecondId=185)

CURL 在此页面上失败；我怀疑是因为与号。如何转义这个 & 以允许下载完成？

错误是`Unable to resolve host`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T17:22:54.627

看看：[`url_encode();`](http://php.net/manual/en/function.urlencode.php)和[`rawurlencode();`](http://php.net/manual/en/function.rawurlencode.php)。

> 返回一个字符串，其中包含除 -_ 之外的所有非字母数字字符。已替换为百分号 (%) 后跟两个十六进制数字和编码为加号 (+) 的空格。它的编码方式与 WWW 表单中发布的数据的编码方式相同，即与 application/x-www-form-urlencoded 媒体类型中的方式相同。这与 » RFC 3986 编码（参见 rawurlencode()）的不同之处在于，由于历史原因，空格被编码为加号 (+)。

**更新**：由于错误是`Unable to resolve host`，请确保您的`/etc/resolv.conf`文件具有`0644`. 这将确保安全并允许 Apache/PHP 读取和解析主机名。

您可以通过调用检查 PHP 和 Apache 是否可以访问 DNS 服务[`gethostbyname();`](http://php.net/manual/en/function.gethostbyname.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T18:07:08.473

如果你正在做类似的事情

```
<?php

$url = "http://www.site.com/savings/thispage?OneId=88&SecondId=185";
$encoded = urlencode($url);

// use cURL to fetch $encoded

?> 
```

那么您实际上是在要求 cURL 获取`http%3A%2F%2Fwww.site.com%2Fsavings%2Fthispage%3FOneId%3D88%26SecondId%3D185`. 这被视为主机名，因为没有“/”字符将主机名与请求路径分开。

你是如何启动 cURL 的？您是在使用[PHP 库](http://www.php.net/cURL)[`system()`](http://www.php.net/system)，还是通过类似或运行它[`shell_exec()`](http://www.php.net/shell_exec)？您可能需要以不同的方式（或根本不需要）转义它，具体取决于您启动它的方式。

如果您实际上是从命令行运行它（而不是从 PHP 运行），那么类似以下的内容应该可以很好地完成：

```
curl 'http://www.site.com/savings/thispage?OneId=88&SecondId=185' 
```

# android - 如何查看微调器内的数据库值？

> ID：12393247
> 
> 赞同：1
> 
> 时间：2012-09-12T17:13:40.110
> 
> 标签：android, database, spinner

我有一个微调器和一个数据库，所以当我单击微调器时，我想在其中显示联系人的值（名称），但使用简单的代码。所以它们是分离的 javas 和 xml 布局，微调器位于（Novamensagem.java novamensagem.xml）中，而 contacs 数据库位于（Adicionarcontato.java adicionarcontato.xml）中，如果您可以指定并且代码更好，谢谢

```
 final TextView spinnerContato = (TextView) findViewById(R.id.spinner);
    String[] campos = new String[] {"nome", "telefone"};

    Cursor c = db.query("contatos", campos, null, null, null, null, null);
    c.moveToFirst();
    String lista = "";
    if(c.getCount() > 0) {
        while(true) {
            lista = lista + c.getString(c.getColumnIndex("nome")).toString() + "";
            if(!c.moveToNext()) break;
        }

        spinnerContato.setText(lista);
    } 
```

这就是代码，但它给出了错误（在评论中有更多解释）//

整个代码：

```
ArrayList<String>() list = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.novamensagem);

    db = openOrCreateDatabase("banco.db", Context.MODE_WORLD_WRITEABLE, null);

     SalvaMensagem();

    //Data e Hora
    setCurrentDateOnView();
    addListenerOnButton();
    setCurrentTimeOnView();
    addListenerOnButton2();

    //Spinner
    DadosSpinner();

}

private void DadosSpinner() {
    // TODO Auto-generated method stub

    final TextView spinnerContato = (TextView) findViewById(R.id.spinner);
    String[] campos = new String[] {"nome", "telefone"};

    list = new ArrayList<String>();
    Cursor c = db.query("contatos", campos, null, null, null, null, null);
    c.moveToFirst();
    String lista = "";
    if(c.getCount() > 0) {
        while(true) {
           list.add(c.getString(c.getColumnIndex("nome")).toString());
            if(!c.moveToNext()) break;
        }
    }

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, list);

    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

    spinner.setAdapter(adapter);        
    }` 
```

有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:41:10.447

要从 SQLite 数据库加载微调器数据，您必须：

1.  从数据库中读取联系人并将其保存到列表中（例如）
2.  为微调器创建一个适配器

方法如下所示：

```
 private void loadSpinnerData() 
 {
    // database handler
    DatabaseHandler db = new DatabaseHandler(getApplicationContext());

    // Spinner Drop down elements
    List<String> contacts = db.getAllContacts();

    // Creating adapter for spinner
    ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, contacts);

    // Drop down layout style - list view with radio button
    dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

    // attaching data adapter to spinner
    spinner.setAdapter(dataAdapter);
 } 
```

getAllContacts() 方法将返回所有联系人：

```
public List<String> getAllConatcts(){
    List<String> contacts = new ArrayList<String>();

    // Select All Query
    String selectQuery = "SELECT  * FROM " + TABLE_CONTACTS;

    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

    // looping through all rows and adding to list
    if (cursor.moveToFirst()) {
        do {
            contacts.add(cursor.getString(1));
        } while (cursor.moveToNext());
    }

    // closing connection
    cursor.close();
    db.close();

    // returning contatcs
    return contacts;
} 
```

有关更多信息，请查看本教程：[http ://www.androidhive.info/2012/06/android-populating-spinner-data-from-sqlite-database/](http://www.androidhive.info/2012/06/android-populating-spinner-data-from-sqlite-database/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T18:08:47.210

检查这个

```
list = new ArrayList<String>();
Cursor c = db.query("contatos", campos, null, null, null, null, null);
c.moveToFirst();
String lista = "";
if(c.getCount() > 0) {
    while(true) {
       list.add(c.getString(c.getColumnIndex("nome")).toString());
        if(!c.moveToNext()) break;
    }

} 
```

这可以帮助您获取项目的arrayList。

接下来做这个

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
        android.R.layout.simple_spinner_item, list);

adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

spinner.setAdapter(adapter); 
```

如果您有任何问题，请回来

# google-apps-script - 使用 SSO 的谷歌应用脚 本

> ID：12393251
> 
> 赞同：1
> 
> 时间：2012-09-12T17:13:48.703
> 
> 标签：google-apps-script, single-sign-on

我是 SSO 的初学者，我想使用基于 Google Apps 帐户的 SSO 来登录我的 Google Apps 脚本应用程序（HTML 服务）。那可能吗？我能怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T02:07:51.917

Apps 脚本网络应用程序已经使用 Google 的登录系统。只是无事可做。

你需要不同的东西吗？您是否尝试过默认行为？

# c# - FindControl recursive - 在 GridView 中找到我的 FileUpload 控件时出错

> ID：12393254
> 
> 赞同：0
> 
> 时间：2012-09-12T17:13:54.053
> 
> 标签：c#, asp.net, gridview, file-upload, findcontrol

我一直在尝试解决这个问题，希望有人能给我答案！（请记住，我是这个编码的初学者）。我有一个数据库，其中一个字段是`imageurl`. 我必须能够更新这个字段，并认为我可以使用 a`GridView`和`UpdateItemTemplate`. 我很快发现你必须使用`FindControl`递归方法来这样做 - 所以我实现了代码，现在我遇到了另一个错误。

我想我知道为什么会出现错误，但不知道如何解决它。似乎在 tools.cs 文件中，控件的标识符设置为数据类型`String`，但我不知道如何处理`FileUpload`.

这是错误消息：

> 无法从“System.Web.UI.WebControls.FileUpload”转换为“字符串”

ASP.NET GridView 控件：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
  DataKeyNames="DrinkCategoryID" DataSourceID="ObjectDataSource1">
  <Columns>
    <asp:CommandField ShowDeleteButton="True" ShowEditButton="True" />
    <asp:BoundField DataField="DrinkCategoryID" HeaderText="DrinkCategoryID" 
      InsertVisible="False" ReadOnly="True" SortExpression="DrinkCategoryID" />
    <asp:TemplateField HeaderText="DrinksCategoryName" 
      SortExpression="DrinksCategoryName">
    <EditItemTemplate>
      <asp:FileUpload ID="FileUpload1" runat="server" />
    </EditItemTemplate>
    <ItemTemplate>
      <asp:Label ID="Label1" runat="server" 
        Text='<%# Bind("DrinksCategoryName") %>'></asp:Label>
    </ItemTemplate>
    </asp:TemplateField>
  </Columns>
</asp:GridView> 
```

工具 (FindControl)

```
public static Control FindControlRecursive(Control Root, string Id)
{
  if (Root.ID == Id)
    return Root;

    foreach (Control Ctl in Root.Controls)
    {
      Control FoundCtl = FindControlRecursive(Ctl, Id);
      if (FoundCtl != null)
        return FoundCtl;
    }

    return null;
} 
```

以及 Web 表单背后的代码（保存按钮的单击事件）

```
protected void btnGem_Click(object sender, EventArgs e)
{
  FileUpload FileUpload1 = (FileUpload)Tools.FindControlRecursive(
    GridView1, FileUpload1);
  //This seems to work fine
  TextBox txtBox = (TextBox)Tools.FindControlRecursive(GridView1, txtBox.Text);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:19:38.797

在按钮处理程序的第一行，您将控件本身作为 FindControlRecursive 的第二个参数传递 - 您需要传入要查找的控件的字符串 ID。换句话说：

```
 protected void btnGem_Click(object sender, EventArgs e)
    {
        FileUpload FileUpload1 = (FileUpload)Tools.FindControlRecursive(GridView1, "FileUpload1");
TextBox txtBox = (TextBox)Tools.FindControlRecursive(GridView1, txtBox.Text); //This seems to work fine

    } 
```

# javascript - 如何确保插入的日期保持插入，直到取消选中复选框？

> ID：12393255
> 
> 赞同：0
> 
> 时间：2012-09-12T17:13:59.440
> 
> 标签：javascript

根据下面的这段代码，当用户选中一个框时，日期会自动插入一个名为 cDate 的文本框控件中。这很好用：

```
function ClickBox(cb) { 
    var tr = cb; 
    while (tr.tagName != "TR") { 
        tr = tr.parentNode; 
        if (tr == null) return; // something went wrong 
    } 
    var inps = tr.getElementsByTagName("input"); 
    for (var i = 0; i < inps.length; ++i) { 
        var inp = inps[i]; 
        if (inp.name.indexOf("cDate") >= 0) { 
            inp.value = rightDate(); 
            break; 
        } 
    } 
} 
```

这些是受影响的控件：

```
 <ItemTemplate> 
     <asp:CheckBox ID="myrecord" runat="server" onclick="ClickBox(this)" /> 
    </ItemTemplate>  

   <ItemTemplate> 
    <asp:TextBox runat="server" style="border: none;" ID="cDate"></asp:TextBox> 
   </ItemTemplate> 
```

用户当前遇到的问题是，一旦选中复选框并插入日期，删除插入日期的唯一方法是单击“重置”按钮。

一旦取消选中复选框，他们更愿意让插入的日期消失。

下面这个修改后的代码不起作用。我没有收到任何错误，但是，每当我选中或取消选中某个框时，什么都没有发生 - 不再插入任何日期。

```
function ClickBox(cb) { 
        var tr = cb;
        var inps = tr.getElementsByTagName("input"); 
        if(cb.checked == 1){ // CheckBox checked condition 

                while (tr.tagName != "TR") { 
                        tr = tr.parentNode; 
                        if (tr == null) return; // something went wrong 
                } 
                for (var i = 0; i < inps.length; ++i) { 
                        var inp = inps[i]; 
                        if (inp.name.indexOf("cDate") >= 0) { 
                                inp.value = rightDate(); 
                                break; 
                        } 
                } 
        } 
        else{ 
                for (var i = 0; i < inps.length; ++i) { 
                        var inp = inps[i]; 
                        inp.value = ''; 
                } 
        } 
} 
```

我不确定我做错了什么。

感谢你的协助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T18:36:40.273

这是一个对我有用的非常简单的解决方案：

ASP.NET 标记：

```
<div>
  <asp:CheckBox ID="cbDate" runat="server" onclick="ClickBox(this)" />
  <br />
  <asp:TextBox ID="txtDate" runat="server"></asp:TextBox>
</div> 
```

JavaScript：

```
function ClickBox(checkbox) {
  var dateCheckbox = checkbox;
  var dateTextBox = document.getElementById("txtDate");

  if (dateCheckbox.checked === true) {
    dateTextBox.value = "TODAY";
  } else {
    dateTextBox.value = "";
  }
} 
```

希望这可以帮助。

# netbeans - netbeans 海量 ftp

> ID：12393260
> 
> 赞同：3
> 
> 时间：2012-09-12T17:14:13.103
> 
> 标签：netbeans, ftp

我熟悉 netbeans 中的 ftp，我将我的项目发送到多个服务器，所以我有多个远程连接。进行更改后，将项目重新配置到下一个远程连接并将项目发送到服务器上的位置需要一段时间。此外，每个远程连接设置都是完全相同的，当然除了 IP 地址。

我想知道，有没有办法一次对我所有的远程连接进行大规模 ftp？

或者

是否有允许此操作的 netbeans 插件？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-14T16:50:25.583

上传主机取决于实际运行配置。您可以使用不同**的运行配置**在不同的服务器设置之间轻松切换。但是您只能同时使用一种配置。

要将文件上传到不同的主机，请为每个主机添加配置。更改菜单栏下工具栏中的配置并再次上传所有文件）

![在此处输入图像描述](../Images/156614e513ac1d7122ba3cf16787a478.png)

# wordpress - 使用正则表达式进行 301 重定向

> ID：12393267
> 
> 赞同：1
> 
> 时间：2012-09-12T17:14:46.160
> 
> 标签：wordpress, redirect, migration, permalinks

找不到答案，并认为这可能是一个快速的答案。

我的公司是一家本地新闻网站，正在努力从专有 CMS 迁移到 WordPress。部分挑战是我们正在重组 URL。我将使用 301 重定向，但我的问题如下：

示例页面名称：故事名称：是“this”示例旧 CMS 页面 URL：/story-name--is--this-/ 新 CMS 页面 URL：/news/2012/09/12/story-name-is-this /

旧的 CMS 将特殊字符和空格变成连字符。WordPress 将被配置为忽略特殊字符，而只是将空格变成连字符。此外，旧的 CMS 没有在 URL 中包含日期，我不确定添加日期的最佳途径。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:34:09.423

不清楚你真正的问题是什么？我也不确定正则表达式与该问题有什么关系。

没有关于您的旧 CMS 能够做什么的信息，假设您可以在通过浏览器访问旧文章时拦截对旧文章的调用，但在它们被呈现之前，您可以形成并将重定向发送回浏览器动态生成url 使用专有 CMS 中可用的编程机制。

同样，假设您可以访问 Java：

A. 生成重定向 URL 时，您可以访问文章的日期并从日期形成 2012/09/12，您可以使用 SimpleDateFormatter 将日期格式化为字符串表示形式，如 YYYY/MM/DD。
B. 您可以对标题使用类似的方法，并将标题字符串中的特殊字符列表替换为空格。例如，Apache StringUtils 库可以让您指定一组要查找的字符，如果找到任何字符，它们将被替换为目标字符。
C. 您连接 A 和 B 的输出以创建目标重定向 URL 并将其发送回浏览器而不是文章本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T17:26:12.110

您要么必须编写一个脚本来获取所有旧链接，然后在数据库中查找以将其转换为新链接，然后将浏览器重定向到新链接。或者您必须枚举旧链接的整个映射 -> 新链接并为每个链接创建一个 301 重定向（在您的 vhost/server 配置或 htaccess 文件中）：

```
Redirect 301 /story-name--is--this-/ /news/2012/09/12/story-name-is-this/ 
```

# java - 执行存储过程

> ID：12393268
> 
> 赞同：4
> 
> 时间：2012-09-12T17:14:50.027
> 
> 标签：java, oracle

我正在尝试执行一个具有记录表输入输出参数的 oracle 存储过程：

```
TYPE RECORD_TYP IS RECORD (
    CAT_CD                 VARCHAR2(4),
    MOD_ID       NUMBER(6)
); 
```

我发现这个例子谈论`List<String>`和`List<Integer>`：http: [//viralpatel.net/blogs/java-passing-array-to-oracle-stored-procedure/](http://viralpatel.net/blogs/java-passing-array-to-oracle-stored-procedure/)。

但是呢`List<MyRecordDTO>`？

编辑：我在这里找到了一个答案，海报使用了 oracle.sql.STRUCT 类型。 [http://betteratoracle.com/posts/32-passing-arrays-of-record-types-between-oracle-and-java](http://betteratoracle.com/posts/32-passing-arrays-of-record-types-between-oracle-and-java)

使用这个例子，我发现了异常`java.sql.SQLException: Internal Error: Inconsistent catalog view`。谷歌搜索这个异常，我打电话给 DBA 授予我访问“ `RECORD_TYP`”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-04T15:50:35.360

我知道这是一个非常古老的问题。但我希望这会有所帮助。在这里，我传递了一个自定义类型数组，并期望得到一个自定义类型数组。

```
 myJavaRequest req = new myJavaRequest();
        req.setEmpId("940006614");
        myJavaReqArray[0] = req;
        List<myJavaResp> myJavaRespLst = new ArrayList<myJavaResp>();

        try {

            //fetch connection (this should be a OracleConnection class).
            OracleConnection oraConn = (OracleConnection) getConnectionFromDB();

            //Set the mappings -- what is the SQL Object type to Java class mappings when it comes to response.
            Map map = oraConn.getTypeMap();
            map.put("MYSCHEMA.SQLRESPDTO", Class.forName("com.myhome.myJavaResp")); 

            //Create the Array descriptor for the input array
            ArrayDescriptor inputArrayDescr = ArrayDescriptor.createDescriptor("MYSCHEMA.MYREQDTOLIST", oraConn);
            ARRAY inputArray = new ARRAY(inputArrayDescr, oraConn, spgPrefReqArray); //This is an Oracle ARRAY

            //Prepare the Stored procedure call
            OracleCallableStatement stmt  = (OracleCallableStatement)oraConn.prepareCall("{ ? = call MYSCHEMA.PKG.SOME_SP(?) }");
            stmt.registerOutParameter(1, OracleTypes.ARRAY, "MYSCHEMA.SQLRESPDTOLIST");
            stmt.setArray(2, inputArray);

            //Lets execute
            stmt.execute();

            //Fetch the Array of Objects that will have the set of expecting response java objects.
            ARRAY outArray = ((OracleCallableStatement)stmt).getARRAY(1);
            Object[] objects = (Object[])outArray.getArray(map);

            if(null != objects && objects.length > 0){
                for(int iIndex=0; iIndex<objects.length; iIndex++){
                    myJavaRespLst.add((myJavaResp)objects[iIndex]);
                }
            }
        } 
```

# php - 来自本地主机 PHP 应用程序的 Heroku Postgres 连接

> ID：12393269
> 
> 赞同：4
> 
> 时间：2012-09-12T17:14:50.027
> 
> 标签：php, postgresql, heroku

是否可以从本地运行的 PHP 应用程序连接到 Heroku postgres（免费）数据库实例。我能够成功连接 pgAdminIII，但是通过连接到同一个 Db 的应用程序连接字符串没有运气？

联系

```
$dbconn = pg_connect("host=xxxxxx.compute-1.amazonaws.com port=5432 dbname=xxxxxxx user=xxxxxx password=xxxxxx sslmode=require options='--client_encoding=UTF8'"); 
```

PHP代码抛出的错误：

```
 Warning: pg_connect(): Unable to connect to PostgreSQL server: sslmode value &quot;require&quot; invalid when SSL support is not compiled in in 
```

我在 Heroku 的网站上找到了以下内容，但我希望有人能澄清我是否正在处理 postgres php 问题（在 Apache 上运行 PHP，在 Mac OS X Lion 10.7.4 上运行 PHP 5.3）或者这只是一个环境限制在 Heroku 的以下声明中指出：

> 如何连接到 Heroku Postgres？Heroku Postgres 上的数据库接受标准的 PostgreSQL 连接。可以从任何地方通过 SSL 从 PostgreSQL 客户端应用程序（例如 psql 或 PGAdmin）、应用程序框架（例如 Ruby-on-Rails 或 Django）或任何其他 libpq 兼容客户端进行连接。
> 
> 然而，共享数据库只能从运行在 Heroku 上的应用程序连接。

有人还可以解释为什么 pgAdminIII 能够连接但我的应用程序不能连接吗？

谢谢你。

进一步发现：PHPINFO->

*   启用 OpenSSL 支持
*   OpenSSL 库版本 OpenSSL 0.9.8r 2011 年 2 月 8 日
*   OpenSSL 标头版本 OpenSSL 0.9.8r 2011 年 2 月 8 日

*   已启用 PostgreSQL 支持

*   PostgreSQL(libpq) 版本 8.2.23
*   ***SSL 支持已禁用***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T21:29:27.150

So I spoke with a representative at Heroku. They confirmed for me that it does not require any specific tier of account to connect to a Heroku Postgres database, the only stipulation is that the connection uses ssl when connecting remotely. So my issue is the result of pgsql not having ssl support in my build of php.

# jquery - 我已经使用 jQuery 切换了我的博客文章，但是我希望在单击一个帖子时关闭所有其他帖子

> ID：12393271
> 
> 赞同：0
> 
> 时间：2012-09-12T17:14:54.990
> 
> 标签：jquery

我已经使用 jQuery 切换了我的博客文章。目前我可以同时打开所有帖子，但我更希望在点击一个帖子时关闭所有帖子。我需要在我的 jQuery 代码中添加什么来执行此操作？

这是我的代码：

```
<script type="text/javascript">
$(document).ready(function() {
$('.toggle-section').hide();
});
</script>

<script type="text/javascript">
$(function() {
$('.entry-title').click(function() {
$(this).closest('.post').find('.toggle-section').slideToggle();     
return false;
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:17:39.160

```
$(function() {
    $('.entry-title').click(function() {
        var clicked = this;  // take a reference of clicked element
                             // to use it within hide() callback scope

        // hide all visible sections
        $('.toggle-section:visible').hide(function() {
            // show the clicked
            $(clicked).closest('.post').find('.toggle-section').slideDown();
        });
        return false;
    });
}); 
```

您应该将所有代码汇总为两部分：

```
<script type="text/javascript">
  $(function() {
      $('.toggle-section').hide();  // initial hide

      $('.entry-title').click(function() {
        var clicked = this;  // take a reference of clicked element
                             // to use it within hide() callback scope

        // hide all visible sections
        $('.toggle-section:visible').hide(function() {
            // show the clicked
            $(clicked).closest('.post').find('.toggle-section').slideDown();
        });
        return false;
     });
  });
</script> 
```

# google-apps-script - 带有未定义参数的函数

> ID：12393275
> 
> 赞同：-1
> 
> 时间：2012-09-12T17:15:05.103
> 
> 标签：google-apps-script, google-sheets, google-spreadsheet-api

我正在使用日历电子表格。本文档使用背景颜色来指定不同的事件。例如会议是蓝色的，庭院是红色的。

我正在尝试创建一个（sum if bg color）方法，该方法查看谷歌电子表格中的给定范围，计算具有特定背景颜色的单元格，为每个块分配权重（即 30 分钟）并返回时间量在该背景颜色的活动/周上花费。

我的基本问题是我的参数是未定义的（即使它们是范围），并且不能对未定义的对象类型调用范围方法。

这是代码：

```
 //this function sums cells of a given color having assigned each cell a given value.
    //it inspects a range and compares each cell's background color to a given background color
    //returns given title and calculated sum
    function sumifcolor(theRangeToInspect, valueOfCellInRangeToInspect, colorAndTitleCell) {
        var doc = SpreadsheetApp.getActiveSheet();
        var color = colorAndTitleCell.getBackgroundColor(); //get color
        var title = colorAndTitleCell.getInputvalueOfCellInRangeToInspect(); //get title
        theRangeToInspect.activate();
        var firstRow = theRangeToInspect.getRow();
        var lastRow = theRangeToInspect.getLastRow();
        var firstCol = theRangeToInspect.getColumn();
        var lastColumn = theRangeToInspect.getLastColumn();
        var result;

        //for loops iterate through every cell in a row
        for (var yy=firstRow; xx<=lastRow; xx++) {
           for (var xx=firstCol; yy<=lastCol; yy++) {
                if (doc.getRange(xx,yy).getBackgroundColor() = color) {result += valueOfCellInRangeToInspect} 
           };
        };
      return title + ": " + result;    
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:44:23.550

我假设您正在尝试将您的函数用作电子表格中的公式。

在这种情况下，范围对象将不会传递给函数，而是将传递范围中的值。所以，

```
theRangeToInspect.getRow(); 
```

不管用。theRangeToInspect 将包含范围的内容。

# zend-framework - Zend Framework：从表列中选择最大的数字

> ID：12393279
> 
> 赞同：0
> 
> 时间：2012-09-12T17:15:31.947
> 
> 标签：zend-framework, zend-db-table, zend-db-select

如何从表列中选择最大的数字，exp。那是我的桌子：

> id|名称|查看次数|
> 1|测试|42|
> 2|测试1|89|
> 3|测试2|4|
> 4|测试3|35|

我需要选择行 id 2 的所有值，因为视图是其他视图中最大的数字？我试试这个，但不工作：

```
$q = $this->select()->from($this->_name, array(new Zend_Db_Expr('MAX(views)'), 'id', 'name'))->order('name DESC')->limit(1)->group('name');

return $this->fetchRow($q); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T17:21:48.400

尝试...

```
$q = $this->select()
        ->from($this->_name, array('id', 'name'))
        ->order('views DESC')
        ->limit(1);
return $this->fetchRow($q); 
```

**暗示：**

*`Apply ORDER BY views DESC, and then LIMIT 1`*

# c++ - 字符串到字节的转换

> ID：12393281
> 
> 赞同：0
> 
> 时间：2012-09-12T17:15:39.373
> 
> 标签：c++, visual-studio-2010, mfc

我正在开发 Visual Studio C++。

我有这些代码：

```
 CString str; 
    BYTE byBuffer[10000] = { 0 };
    str ="Invalid Command. Spaces are not allowed too!!";
    strcpy_s(reinterpret_cast<LPSTR>(byBuffer), 10000, T2CA(str )); 
```

问题是 byBuffer = "Invalid Command. Spaces are not allowed too!!"; 但在下一行之后，字符串发生了变化。LPBYTE lp=byBuffer ; 虽然它适用于像 OK, GOOD JOB 这样的小字符串。ETC..

我通过设置断点来调试整个代码。此外，该函数已被调用到另一个函数，其中 (LPBYTE lpBuffer) 收到了该值。

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T18:09:22.130

您向我们展示的代码看起来不错，所以我冒险出去猜测一下。

我猜你正试图从一个函数中返回这个缓冲区：

```
LPBYTE lp = byBuffer;
return lp; 
```

如果是这种情况，那么局部变量`byBuffer`将在函数末尾被销毁，并且指针不再指向有效内存。如果你能在输出中看到任何可识别的东西，你就很幸运了。

# javascript - 从字符串中查找并提取缩短的 url

> ID：12393284
> 
> 赞同：-1
> 
> 时间：2012-09-12T17:15:56.613
> 
> 标签：javascript

我想从如下所示的字符串中删除一个 url：

# Guardian #Tech #News：“Hillsborough 报告：数据新闻可以告诉我们关于文件的哪些信息” [http://t.co/kplfDhLE](http://t.co/kplfDhLE)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:19:06.720

您可以使用正则表达式来挑选网址：

```
var reg = /(\bhttps?:\/\/[\w|\d|\.|-|\/]+\b)/gi,
    result = reg.exec(tweet)[0]; 
```

[http://jsfiddle.net/4rtEb/](http://jsfiddle.net/4rtEb/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T17:20:38.623

```
var url = str.match(/\bhttps?:[^\s]+\b/i)[0]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T17:27:07.853

RegEx 是一种处理字符串的方法，只是不是我喜欢的。如果你也有同样的情况，那么试试这个：

```
var text = 'Guardian #Tech #News: ...snipped... http://t.co/kplfDhLE';
text.substring(0, text.indexOf("http"));    // Gives only the text
text.substring(text.indexOf("http"));       // Gives only the URL 
```

如果 URL 不在字符串的末尾，那么它会有点棘手，但仍然比使用正则表达式杀死自己要好得多。

# java - 在不指定队列管理器名称的情况下连接到队列

> ID：12393285
> 
> 赞同：5
> 
> 时间：2012-09-12T17:16:01.947
> 
> 标签：java, jakarta-ee, ibm-mq, mq

我是 MQ 的新手。我有一个要求。我可以在不指定队列管理器名称的情况下使用 java 连接到服务器上的特定队列吗？我有所有详细信息，例如主机名、端口号、请求、响应队列名称等，

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T17:28:03.710

是的。如果应用程序指定了 QMgr 名称，则指定的名称必须与连接的 QMgr 实际匹配。但是，如果应用程序将 QMgr 名称留空，则接受该主机、端口和通道上的任何 QMgr 响应。

例如，如果您定义一个托管对象，它可能如下所示：

```
DEFINE  CF(JMSDEMOCF) +
        SYNCPOINTALLGETS(YES) +
        TRAN(client) +
        HOST(127.0.0.1) CHAN(MYAPP.SVRCONN) PORT(1414) +
        QMGR( ) 
```

如果不使用 JNDI，请省略 QMgr 名称的环境哈希表条目。

# python - 处理扑克手时如何在python中使用类？

> ID：12393286
> 
> 赞同：4
> 
> 时间：2012-09-12T17:16:02.180
> 
> 标签：python

我正在上python的第一门课程，由于我的教科书很浅，我试图通过亲身体验来熟悉课程。

我想编写一个程序来处理一些德州德州扑克手牌（一手牌开始），然后在桌子上处理五张牌，然后再查看所有可能的手牌排列与 5 张牌桌和 2 手牌牌。（一个人的两张牌可以与桌子上五张牌中的三张结合起来）。最终我想扩展它来比较和评估手牌，并提名获胜者。但这将是以后的事情。

我很想知道用类来构造这个问题的好方法。

制作一个包含发牌功能并包含发牌的不同手牌的 Hand 类并让 Deck 成为全局变量是否明智？

```
#The hand-class is a class for the dealt poker-hands. 

import random

deck = [i for i in range (102, 115)]
deck += [i for i in range(202, 215)]
deck += [i for i in range(302, 315)]
deck += [i for i in range(402, 415)]
# I define a card by a prefix number - the suit - and the card value. Jack of     spades = 111 if spades corresponds to 1\. 

class Hand:
    def __init__(self):
        return None
    def deal_hand(self):
        self.hand = []
        for i in range (0,2):
            card = random.choice(deck)
            self.hand.append(card)
            deck.remove(card) 

    #def score():
        #a function to determine the sore of the hand.. 
```

我要问的是：为此目的使用类的正确方法是什么？我是否应该创建另一个类来保存发到扑克桌上的五张牌，再创建一个类来保存不同的排列？

还是两手牌、手牌的分数、牌桌的发牌以及牌桌牌的不同排列都属于同一类？

我不是要求任何人给我写任何代码，但如果你有时间给我一个快速提示我应该往哪个方向看，我将非常感激！谢谢！马吕斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T17:42:06.693

首先，没有“正确”的方法来解决这个问题。这完全取决于个人喜好和设计考虑。

就个人而言，我会这样做的方式是创建 3 个数据类：

`Deck`发牌，并跟踪哪些牌已经发过

我会给这个类一个通用`draw`方法，它从可用卡片中返回一张随机卡片

`Player`跟踪玩家的每张牌，可以通过调用`Deck.draw()`两次来确定

`Table`跟踪桌上的牌

然后，我会将这一切都包装在一个`Game`处理所有游戏逻辑的类中，比如确保桌子上的牌是在正确的时间绘制的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T17:42:36.677

您不需要为了使用类而使用类（除非您使用的是 Java）

我处理类的方式是，我首先考虑我需要什么“对象”或“事物”，然后定义将定义该事物的属性和方法。如果我要创建同一事物的多个实例，那么一个类很有用。如果我只需要 1 个实例，那么一个模块或全局变量很可能就足够了。

例如，在您的示例中，您实际上并不*需要*类。但是，如果您想要为您的游戏支持多个套牌，那么您可能需要定义一个**Deck**类，该类可以包含和控制有关其自己的卡牌的所有信息。

想想扑克本身——它是如何运作的？

你有一个庄家，你有玩家，一个庄家有一副或多副牌。庄家洗牌，然后向玩家和牌桌发牌。您希望如何将这些过程中的每一个定义为对象？

我会查看现实世界的示例并将其分解为可重用的部分，这将成为您的类。例如，我可能会看着它说：

```
class Deck(object):
    """ class for managing a deck of cards """

class Player(object):
    """ defines properties and methods that an individual player would have """
    def __init__( self ):
        self._cards = []  # hold a player current cards
        self._chips = 10  # define how much money a player has

    def clearCards( self ):
        self._cards = []        

    def dealCard( self, card ):
        self._cards.append(card)

class Dealer(object):
    """ defines properties and methods that a dealer would have """
    def __init__( self ):
        self._decks = []    # hold multiple decks for playing with
        self._stack = []    # holds all the shuffled cards as a

    def nextCard( self ):
        """ pop a card off the stack and return it """
        return self._stack.pop()        

    def shuffle( self ):
        for deck in self._decks:
            deck.shuffle()  # shuffle each individual deck

        # re-populate a shuffled stack of cards
        self._stack = [] 
        # randomly go through each deck and put each card into the stack

    def deal( self, *players ):
        """ Create a new hand based on the current deck stack """
        # determine if i need to shuffle
        if ( len(self._stack) < self._minimumStackCount ):
            self.shuffle()

        return Hand(self, *players)

class Hand(object):
    def __init__( self, dealer, *players ):
        self._dealer  = dealer   # points back to the dealer
        self._players = players  # defines all the players in the hand
        self._table   = []       # defines the cards on the table
        self._round   = 1

        for player in players:
            player.clearCards()

        self.deal()

    def deal( self ):
        # in holdem, each round you get a different card combination per round
        round = self._round
        self._round += 1

        # deal each player 2 cards in round 1
        if ( round == 1 ):
            for i in range(2):
                for player in players:
                    player.dealCard( self._dealer.nextCard() )

        # deal the table 3 cards in round 2 (flop)
        elif ( round == 2 ):
            self._table = [self._dealer.nextCard() for i in range(3)]

        # deal the table 1 card in round 2 (turn)
        elif ( round == 3 ):
            self._table.append(self._dealer.nextCard())

        # deal the table 1 card in round 3 (river)
        else:
            self._table.append(self._dealer.nextCard()) 
```

等等等等。

所有这些代码通常都是伪代码，用于说明如何在心理上可视化分解事物的方式。真正最简单的方法是考虑现实生活中的场景并用简单的英语写下它是如何工作的，然后课程将开始可视化自己。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T17:19:26.280

如果你想使用类，一个常用的经验法则是让类成为执行动作的事物或完成动作的事物。

例如，一手牌不会自己发牌，而你不会用那手牌发牌；一手牌处理一副牌。因此，您可以创建一个`Deck`类，该类具有一个`.deal_hand()`返回`Hand`.

该类`Hand`将有一个`.score()`方法，任何与您实际*用手*操作相关的任何其他内容。

* * *

也就是说，您*不需要*为此使用类。如果你愿意，那很好——但是甲板和手牌都可以很容易地用 . 来表示`set`。

# c - C语言的Linux系统编程

> ID：12393287
> 
> 赞同：0
> 
> 时间：2012-09-12T17:16:13.510
> 
> 标签：c, linux, system

我想知道下面的代码是什么意思......

```
...
{
    const char *etc; = SYSCONF_DIR; 
... 
```

我很抱歉无法正确解决此类问题，

我真的不知道该怎么称呼它...在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:25:01.393

上面的代码为[宏](http://gcc.gnu.org/onlinedocs/cpp/Macros.html)分配了一个名为`etc`. 到目前为止，您的代码存在语法错误。代替

```
const char *etc; = SYSCONF_DIR; 
```

它应该是

```
const char *etc = SYSCONF_DIR; 
```

我知道这可能不是一个很有启发性的答案，但答案的深度取决于问题的质量。你基本上拿了一行代码，然后问我们它做了什么。这就像拿起一本书，抽出一句话，给朋友看，问他这是出自哪本书……

编辑：

在 google 上快速搜索你的 snipet 发现它取自[这里](http://books.google.ca/books?id=k_ocKY0iegsC&pg=PA267&lpg=PA267&dq=const%20char%20%2aetc;%20=%20SYSCONF_DIR;&source=bl&ots=VgFOHahEHt&sig=PfHyZ_Fdc1p49unbjKUKkOi0kSI&hl=en#v=onepage&q=const%20char%20%2aetc;%20=%20SYSCONF_DIR;&f=false)。我知道这是事实，因为语法错误也出现在本书中。快速浏览会发现 MACRO`SYSCONF_DIR`等同于 string `"/etc/"`。这本书还非常广泛地解释了该功能的作用......

# outlook - Outlook for Mac 2011：接受会议邀请的键盘快捷键（不加评论地回复）

> ID：12393290
> 
> 赞同：12
> 
> 时间：2012-09-12T17:16:25.783
> 
> 标签：outlook, keyboard-shortcuts

我想知道 Outlook for Mac 2011 中是否有接受会议邀请的键盘快捷键？具体来说，如何仅使用键盘“不加评论地回复”？

我找到了这个，但只有任务接受： http: [//office.microsoft.com/en-us/outlook-help/keyboard-shortcuts-for-outlook-HP001230396.aspx](http://office.microsoft.com/en-us/outlook-help/keyboard-shortcuts-for-outlook-HP001230396.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-18T15:10:27.497

您可以使用内置的 Mac OS X 键盘快捷键机制来编程键盘快捷键以接受。打开“系统偏好设置”>“键盘”>“快捷方式”>“应用程序快捷方式”，然后为“Microsoft Outlook”添加一个新条目。您想要的菜单选项是“会议->接受->不发送响应”（没有引号，不要在箭头之前或之后放置空格。专业提示：-> 让您深入了解子菜单）。

但是让我转过身来问这个问题：有时，我这里的捷径不起作用。我不知道失败的条件是什么。为什么？！

# java - Scala：读取 excel 文件并根据不同的模板方法/模式创建输出

> ID：12393292
> 
> 赞同：1
> 
> 时间：2012-09-12T17:16:28.717
> 
> 标签：java, excel, scala

一方面，我在 Scala 中编写了一个读取 Excel 文件的函数。另一方面，我有不同格式的报告：第一个报告将输出某些信息，第二个报告将根据定义的规则汇总几个单元格。

我很难模拟这些对象将如何相互作用。我目前所做的是 ExcelReader 将采用两个参数：文件输入（文件流）和报告特征。

我正在考虑注入报告类并在 Excel 阅读器中使用常见特征 createReport。这是一个好习惯吗？

我的另一个问题是我应该将哪个对象传递给这个 createReport 方法。通过列表会更好吗？数组？我不太确定哪个是为 Excel 工作表建模的最佳对象，或者创建自己的对象是否更好。

谢谢

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:00:29.817

你从 Excel 解释什么？我猜这可能很复杂，但首先你可以尝试：

```
type ColIndex = String // maybe Int
type RowIndex = Int

sealed trait Cell
case class TextCell(text: String) extends Cell
case class NumericCell(value: BigDecimal) extends Cell
// maybe later if needed:
// case class FunctionCell(function: SomeExcelExpressionType) extends Cell

type ExcelData = Map[(ColIndex, RowIndex), Cell] 
```

# c# - 如何从 int c# 中获取正确的枚举值

> ID：12393297
> 
> 赞同：0
> 
> 时间：2012-09-12T17:17:04.770
> 
> 标签：c#, enums

我有一个 int，我想知道相应的枚举值。

实际上有一个枚举，我想为另一个枚举返回相应的值。

我可能只使用一个大开关，但我想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T17:18:37.080

像这样的东西？

```
 MyEnum m = (MyEnum)((int)otherEnum);

  var en = (StringSplitOptions)SeekOrigin.Begin; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-12T17:19:16.347

这两种类型如何`enum`“对应”？如果没有直接链接，那么是的，需要一个大的`switch`声明。否则，如果它们具有相同的基础值，那么您可以简单地从一种类型转换为另一种类型。如果您有`int`，您也可以将其转换为所需的`enum`类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T17:41:35.813

有两种情况，一种是枚举共享值，另一种是它们共享名称。您可以转换值并解析名称，如此处所示。如果名称和值都不相同，您当然不能这样做。

```
public void Test() {
    var one = FirstEnumWithSameValues.Two;
    var two = (SecondEnumWithSameValues) one;

    var three = FirstEnumWithSameName.Two.ToString();
    var four = (SecondEnumWithSameName) Enum.Parse(typeof(SecondEnumWithSameName), three);
}

public enum FirstEnumWithSameValues
{
   One = 1,
   Two = 2,
   Three = 3
}

public enum SecondEnumWithSameValues
{
    Uno = 1,
    Due = 2,
    Trez = 3
}

public enum FirstEnumWithSameName
{
    One = 1,
    Two = 2,
    Three = 3
}

public enum SecondEnumWithSameName
{
    One = 4,
    Two = 5,
    Three = 6
} 
```

# python - 从文件中读入并绘图

> ID：12393300
> 
> 赞同：0
> 
> 时间：2012-09-12T17:17:11.557
> 
> 标签：python

我遇到的问题涉及从文件中读取，并使用 python 的海龟根据读取的内容绘制形状。

文本文件如下所示（但两行之间没有空格）：

r 0.0 200.0 50.0 100.0 蓝色

c 0.0 200.0 40.0 红色

p 0.0 200.0 3 40.0 黑色

问题是从文件中的一行到 r = Rectangle(0.0,200.0,50.0,100.0,"blue")

如果该行以“r”开头，请使用我的 Rectangle 方法，如果它以“c”开头，请使用我的 Circle 方法（或“p”使用 Polygon()）

我有所有的形状方法我只是不知道如何从文件中获取它来说在这些坐标处用这些边长和这种颜色绘制一个矩形（或圆形/多边形）。这是我到目前为止所拥有的，但它似乎太复杂并且变得混乱。任何帮助或想法表示赞赏，谢谢。

```
shapeCollection=[]
with open(name,"r") as f:
    for line in f:
        for i in line.split():
            shapeCollection.append(i)
print(shapeCollection)
for each in shapeCollection:
    if each == "r":
        #(xCor) = each+1
    elif each == "c":
        #
    elif each == "p":
        # 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:23:58.590

做这样的事情

```
for line in f:
 inp = line.split()
 x = float(inp[1])
 y = float(inp[2])

 if(inp[0] == 'r'):
  DrawRectangle(x,y,float(inp[3]),float(inp[4]),inp[5]) 
```

这基本上显示了如何解析输入。它非常简单，您会看到它是如何轻松应用于其他两种情况的。

# javascript - 在 JavaScript“窗口”对象中存储变量是使用该对象的正确方法吗？

> ID：12393303
> 
> 赞同：65
> 
> 时间：2012-09-12T17:17:15.003
> 
> 标签：javascript, jquery, dom, window

（也许）我刚刚通过在 JavaScript对象中“存储”/“保存”一个变量解决了我的问题（[如何在从对话框窗口成功提交表单后更新前端内容？ ）。](https://stackoverflow.com/questions/12388987/how-to-update-front-end-content-after-that-a-form-is-successfully-submitted-from)`window`但是，由于我是 JavaScript 方面的新手，*我怀疑在 JavaScript`window`对象中存储/保存变量是否是使用该对象的“常见”/“正确”方式*。是吗？

例如，使用以下代码

```
$('.trigger').click(function() {
  window.trigger_link = this;
}); 
```

可取吗？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-09-12T17:20:36.607

在 JavaScript 中，任何全局变量实际上都是`window`对象的属性。使用一个等同于（并且可以互换）使用另一个。

使用全局变量当然是“常见的”，所以问题是它是否“正确”。[通常，不鼓励使用全局变量](https://stackoverflow.com/q/9115560/901048)，因为它们可以从任何函数访问，并且您可能面临多个函数尝试读取和写入相同变量的风险。（这适用于任何环境中的任何编程语言，而不仅仅是 JavaScript。）

* * *

通过为您的应用程序创建[一个唯一的名称空间来](http://www.javascripttoolbox.com/bestpractices/#namespace)解决这个问题。最简单的方法是创建一个具有唯一名称的全局对象，并将变量作为该对象的属性：

```
window.MyLib = {}; // global Object container; don't use var
MyLib.value = 1;
MyLib.increment = function() { MyLib.value++; }
MyLib.show = function() { alert(MyLib.value); }

MyLib.value=6;
MyLib.increment();
MyLib.show(); // alerts 7 
```

* * *

另一种方法是使用[`.data()`](http://api.jquery.com/data)将变量附加到相关的 DOM 元素。这并非在所有情况下都实用，但它是获取可以全局*访问*的变量而不将它们留在全局命名空间中的好方法。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-08-12T10:44:01.937

这里实际上没有提到的，并且可能是**为什么不用** `window` **作全球范围载体**的最大交易破坏者是它在某些情况下**可以被冻结**（不可写）（我说的是基于生产的经验）。

一个好的模式实际上只是创建一个全局变量，它将用于您应用程序中的所有常见内容

```
var Application = {};
Application.state = { name: 'Application' }
.
. 
```

我发现在 javascript 中对我来说最好的模式是使用[Redux](https://redux.js.org/%22redux%22)拥有一个全局状态。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-16T05:38:03.653

在应用程序中创建唯一命名空间的另一种模式。

```
(function myApp()
{
    var value = 5;
    function addToValue(x)
    {
         value += x;
    }
})() 
```

如果您希望以后可以访问函数/值，可以将它们存储在这样的对象中：

```
function myApp()
{
    this.value = 5;
    this.addToValue = function(x)
    {
         this.value += x;
    }
}
var myInstance = new myApp(); 
```

# image-processing - 进行 HDR 重建时避免粗糙的边缘

> ID：12393307
> 
> 赞同：0
> 
> 时间：2012-09-12T17:17:55.770
> 
> 标签：image-processing, open-source, hdr

给定 N 个具有不同曝光剂量的 X 射线图像，我必须将它们组合成一个单一的图像，以浓缩来自 N 个源图像的信息。如果我的研究是正确的，那么这个问题就属于[HDRI](http://en.wikipedia.org/wiki/High_dynamic_range_imaging#Tone_mapping)范畴。

我的第一种方法是加权平均。对于初学者，我将只使用两个框架。

让我们`A`成为第一张图像，这是曝光度最低的图像，因此设置为更重以突出细节。让`B`是第二张曝光过度的图像，`C`得到的图像和`M`最大可能的像素值。因此，对于每个像素`i`：

w[i] = A[i]/M

C = w[i] * A[i] + ( 1 - w[i] ) B[i]

应用此想法的示例结果：

![在此处输入图像描述](../Images/d56777fea40cba8d52cebb2d723a3c9d.png)

请注意结果（第三张图像）如何很好地从两个源图像中捕获信息。

问题是第二张图像在对象边缘周围有不连续性（这在曝光过度的图像中是不可避免的），并且会影响结果。仔细看...

![在此处输入图像描述](../Images/38fa579e451fa2e0b42a4f7848ceb87c.png)

最有名的 HDR 软件似乎是[Photomatix](http://www.hdrsoft.com/)，所以我玩弄了它，无论我如何调整它，不连续性总是出现在结果中。

我认为我应该以某种方式忽略第二张图像的边缘，但我必须以“顺利的方式”进行。我尝试使用一个简单的阈值，但结果看起来更糟。

你有什么建议？（只欢迎开源库）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:27:54.117

这里的问题是每个图像都有不同的相关曝光剂量。任何 HDR 算法都必须考虑到这一点。

我询问了创建 X 射线图像的人，第二张图像的曝光剂量大约`4.2`是第一张的几倍。我给 Photomatix 提供了错误的 EV 值，因为我不知道 EV 是用停止表示的，1 停止表示参考值的两倍。因此，分配`0 EV`给第一个图像和`+2.1 EV`第二个图像，不连续性消失了，保留了所有信息。

下一个问题是我不知道 Photomatix 是如何做到的。因此，我尝试使用开源的[Luminance HDR，又名 qtpfsgui](http://qtpfsgui.sourceforge.net/)来做同样的事情。

总而言之，包围曝光的图像必须输入到 HDR 压缩算法，该算法会创建 HDR 图像。基本上，这是一个包含所有图像信息的浮点图像。有很多算法可以做到这一点。Luminance HDR 将此称为**HDR 创建模型**，并提供其中两个：Debevec 和 Robertson。

但是，HDR 图像无法直接显示在传统显示器（即监视器）上。因此，我们需要将其转换为“正常”（LDR）图像，同时保留尽可能多的颜色信息。这称为[色调映射](http://en.wikipedia.org/wiki/Tone_mapping)，还有各种可用的算法；Luminance 将这些**Tonemap Operators**称为并提供了几个。它还会选择最合适的一个。Pattanaik 算子非常适合这些图像。

所以现在我正在阅读 Luminance 的代码以理解它并进行自己的实现。

# python - Python 2.6 - 通过 | 在 for 循环中将字符写入 os.system

> ID：12393308
> 
> 赞同：0
> 
> 时间：2012-09-12T17:17:56.220
> 
> 标签：python, for-loop, os.system

我有一个 IP 列表，我想针对这些 IP 运行 whois（使用 linux 工具 whois），并且只看到 Country 选项。

这是我的脚本：

```
import os
import time

iplist = open('ips.txt').readlines()

for i in iplist:
        time.sleep(2)
        print "Country: IP {0}".format(i)
        print os.system("whois -h whois.arin.net + {0} | grep Country ".format(i)) 
```

所以我想显示正在运行的 IP，然后我只想使用 grep 查看 Country 信息。当我运行它并且 grep 没有运行时，我看到了这个错误：

```
sh: -c: line 1: syntax error near unexpected token `|'
sh: -c: line 1: ` | grep Country ' 
```

下面的代码有效，所以它一定是我的 for 循环的问题：

```
 print os.system("whois -h whois.arin.net + {0} | grep Country ".format('8.8.8.8')) 
```

我究竟做错了什么？谢谢！！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T17:31:11.880

您不会从从文件中读取的行中删除尾随换行符。结果，您将传递给`os.system`像`"whois -h whois.arin.net + a.b.c.d\n | grep Country"`. shell 将字符串解析为两个命令并抱怨“意外的令牌 |” 在第二个开头。这就解释了为什么使用手工制作的字符串如`"8.8.8.8"`.

睡眠后添加`i = i.strip()`，问题就会消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T17:43:53.103

user4815162342 对您遇到的问题是正确的，但我可以建议您替换`os.system`为`subprocess.Popen`? 捕获`system`呼叫的输出并不直观.. 如果您希望结果转到屏幕以外的任何地方，您可能会遇到问题

```
from subprocess import Popen, PIPE

server = 'whois.arin.net'

def find_country(ip):
    proc = Popen(['whois', '-h', server, ip], stdout = PIPE, stderr = PIPE)
    stdout, stderr = proc.communicate()

    if stderr:
        raise Exception("Error with `whois` subprocess: " + stderr)

    for line in stdout.split('\n'):
        if line.startswith('Country:'):
            return line.split(':')[1].strip() # Good place for regex

for ip in [i.strip() for i in open('ips.txt').readlines()]:
    print find_country(ip) 
```

Python 在字符串处理方面非常出色——应该没有理由创建一个`grep`子进程来模式匹配单独子进程的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T21:11:37.050

试试[sh](http://amoffat.github.com/sh/index.html)：

```
import os
import time
import re
import sh

iplist = open('ips.txt').readlines()

for i in iplist:
    time.sleep(2)
    print "Country: IP {0}".format(i)
    print sh.grep(sh.whois(i, h="whois.arin.net"), "Country") 
```

# mysql - 如何恢复大 mysql .sql 备份

> ID：12393309
> 
> 赞同：0
> 
> 时间：2012-09-12T17:17:57.990
> 
> 标签：mysql, mysqldump, mysqlimport

sql mysql备份当我尝试恢复它时

```
mysql -u x -p xx < x.sql 
```

方法它只是卡住并需要很多时间

有什么建议吗？

# sharepoint - 使用外部项目选择器时，“infopath 无法提交表单，因为它包含错误”

> ID：12393316
> 
> 赞同：0
> 
> 时间：2012-09-12T17:18:23.663
> 
> 标签：sharepoint, sharepoint-2010, infopath, bcs, sharepoint2010-bcs

尝试在外部列表中创建新项目时，我得到“infopath 无法提交表单，因为它包含错误”。此列表所基于的外部内容类型引用了另一个外部内容类型。

外部类型是阶段和项目。阶段使用 ProjectID 字段引用项目。在为阶段列表的“新项目”操作生成的 InfoPath 表单上，有一个外部项目选取器。如果我用 ProjectID 的简单文本框替换此控件 - 问题就会消失。但我需要使用“外部项目选择器”。

有任何想法吗？

# c++ - wxWidgets 大量未定义的引用

> ID：12393322
> 
> 赞同：0
> 
> 时间：2012-09-12T17:18:59.467
> 
> 标签：c++, wxwidgets

我将源下载到最新的 wx 并设法编译它没有任何问题。

配置：

```
../configure --enable-optimise --enable-stl --enable-unicode --enable-threads --enable-static --disable-shared --prefix=/usr/local 
```

当我尝试使用以下命令编译[此](http://docs.wxwidgets.org/trunk/overview_helloworld.html)示例时：

```
g++-4.8 `wx-config --libs` `wx-config --cxxflags` test.cpp 
```

我得到了很多未定义的参考（完整列表[在这里](http://pastebin.com/k2p9U9MR)）

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T19:48:35.163

当你使用静态库时（因为`--disable-shared`在配置命令行中），库必须**在**引用它们的目标文件之后（这是所有 Unix-ish 链接器的一般规则，肯定是 GNU ld）。所以正确的命令行是

```
g++-4.8 `wx-config --cxxflags` test.cpp `wx-config --libs` 
```

或者，只是为了保持简短，因为编译标志出现在哪里*并不重要：*

```
g++-4.8 test.cpp `wx-config --cxxflags --libs` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T17:32:30.567

您需要指定 wx 库，以便链接器可以解析引用。

# javascript - Javascript表单innerHTML

> ID：12393329
> 
> 赞同：0
> 
> 时间：2012-09-12T17:19:26.837
> 
> 标签：javascript

我对 innerHTML 和 getElementsById() 有疑问；方法，但我不确定这两种方法是否是我遇到的问题的根源。

这是我的代码：

```
<script type="text/javascript">

     function clearTextField(){
         document.getElementsById("commentText").value = "";
     };

     function sendComment(){
         var commentaire = document.getElementById("commentText").value;
         var htmlPresent = document.getElementById("posted");

         htmlPresent.innerHTML = commentaire;
         clearTextField();
     };
</script> 
```

我的 HTML 代码是这样的：

```
<!doctype html>
<html>
 <head></head>
  <body>

   <p id="posted"> 
   Text to replaced when user click Send a comment button
   </p>

   <form>

  <textarea id="commentText" type="text" name="comment" rows="10" cols="40"></textarea> 
  <button id="send" onclick="sendComment()">Send a comment</button> 

   </form>
  </body>
 </html> 
```

所以理论上，这段代码将从文本区域获取用户输入并替换`<p>`标记之间的文本。它实际上工作了半秒钟：我看到文本迅速变为用户在 textarea 中输入的内容，标记之间的文本`<p>`被用户输入替换，`<textarea>`并立即返回到原始文本。

之后，当我检查源代码时，html 代码并没有改变一点，因为 html 应该已经被 textarea 中的任何用户输入所替换。

我尝试了三种不同的浏览器，我也尝试过 getElementByTagName(); 方法没有成功。

我错过了什么吗？我的代码看起来合法且干净，但有些东西正在逃脱我的掌握。

我想要的这段代码是用`<p>`文本区域中的用户输入替换给定标记（如）之间的 HTML 代码，但它只替换它几毫秒并返回到原始 html。

任何帮助，将不胜感激。

编辑：我想将文本添加到 html 页面。更改页面上可见的文本。不一定在源头。. .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:23:14.533

没有，`document.getElementsById`但是*有*`document.getElementById`。这可能是您问题的根源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T17:23:29.020

我认为没有任何`document.getElementsById`功能。应该是`document.getElementById`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-12T17:27:20.600

“要设置或获取 input 或 textarea 元素的文本值，请使用 .val() 方法。”

查看 jquery 站点... [http://api.jquery.com/val/](http://api.jquery.com/val/)

# c# - 每当我将 UserControl 添加到表单时，Visual Studio 就会崩溃

> ID：12393333
> 
> 赞同：15
> 
> 时间：2012-09-12T17:19:52.223
> 
> 标签：c#, winforms, visual-studio-2010, user-controls

我写了一个小的[System.Windows.Forms.UserControl](http://msdn.microsoft.com/en-us/library/system.windows.forms.usercontrol.aspx)，调用它`userControl1`，它似乎按照我想要的方式工作。

在 Visual Studio 2010 的设计器中，我可以`userControl1`从工具栏中拖放到我将调用的 Windows 窗体上`testForm1`。我可以接线`userControl1`，它应该可以正常工作。

但是， 的目的`userControl1`是能够在另一个[UserControl](http://msdn.microsoft.com/en-us/library/system.windows.forms.usercontrol.aspx)中使用它，我们称之为`userControl2`。

在 Visual Studio 2010 的设计器中，如果我`userControl1`从工具栏拖放到 上`userControl2`，Visual Studio 2010 将崩溃，除了正在重新启动之外没有任何消息。

![截屏](../Images/de4323639c8afcb0ff57ae7e2b2a49d3.png)

同时，在事件查看器中记录了一个应用程序错误，事件 ID 为 1000：

```
Faulting application name: devenv.exe, version: 10.0.40219.1, time stamp: 0x4d5f2a73
Faulting module name: unknown, version: 0.0.0.0, time stamp: 0x00000000
Exception code: 0xc00000fd
Fault offset: 0x0965f816
Faulting process id: 0x1580
Faulting application start time: 0x01cd90f84338e443
Faulting application path: C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\devenv.exe
Faulting module path: unknown
Report Id: 49ddcedf-fcf8-11e1-8016-00248103a942 
```

我该如何尝试调试此错误？我应该在`userControl1`or中查看某些内容`userControl2`吗？

几点注意事项：

*   1）我也可以将`userControl2`工具栏上的 a 拖到 上`testForm1`，它在 VS2010 Designer 和运行测试应用程序时都可以正常工作（即显示）。

*   2）我已成功进入`userControl2`我声明并设置所有值的设计器`userControl1`，但`userControl1`在运行时不会显示`testForm1`。如果我`userControl1`从`userControl2`VS2010 设计器的“属性”窗口中选择，Visual Studio 将崩溃。

*   3）如果有帮助，我很乐意发布代码。您更喜欢`userControl1`or的代码`userControl2`吗？虽然这两个控件都很小，但仍然有很多代码（特别是因为这个错误很可能发生在 Designer 中，所以我也必须发布它。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-13T15:53:31.763

似乎这有助于解决问题，所以我将其发布为答案。

为了在 Visual Studio 设计器中使用时调试您的控件，请运行两个 Visual Studio 实例并在这两个实例中打开您的项目。然后，在其中一个实例中使用***Attach to process...***选项并附加到第二个实例以对其进行调试（*devenv.exe*进程）。这样，您应该能够看到异常是什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T17:28:57.203

您的控件的构造函数中可能有一些东西试图访问另一个不可用的东西，或者正在创建一个 IDE 无法捕获的异常（StackOverflow、OutOfMemory 等）

# .net - EF 5 中的可插拔约定？

> ID：12393337
> 
> 赞同：3
> 
> 时间：2012-09-12T17:19:59.497
> 
> 标签：.net, entity-framework, entity-framework-5

是否从 EF 5 版本中删除了可插拔约定，我在预发行版中看到了它？寻找一种强制 ef 代码按约定使用 datetime2 的方法，因此不需要显式映射每个实体的每一列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T22:48:22.350

遇到了类似的问题。我有一个通用存储库，它的 BaseEntity 与您的相似。

```
public abstract class BaseEntity
{
    public int Id { get; set; }
    public DateTime Created { get; set; }
    public DateTime Updated { get; set; } 
} 
```

然后每个实体都是从基础派生的。

```
public class MyEntity: BaseEntity
{
    public string Name{ get; set; }
    public int prop1 { get; set; }
    public int prop2 { get; set; }
} 
```

我最终使用这样的列属性设置了 BaseEntity 的 Created 和 Updated 属性：

```
public abstract class BaseEntity
{
    [Key, Column(Order = 0)]
    public int Id { get; set; }
    [Column(TypeName = "datetime2")]
    public DateTime Created { get; set; }
    [Column(TypeName = "datetime2")]
    public DateTime Updated { get; set; } 
} 
```

我在（http://dreadjr.blogspot.com/2012/09/entity-framework-5-code-first-datetime2.html）查看了您的解决方案，它看起来也不错，但它需要有一个特定的配置类对于每个实体。不管怎样，我想我会和你分享这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T17:39:03.910

最终创建了 EntityTypeConfiguration 的派生类。

```
public class CustomEntityTypeConfiguration<T> : EntityTypeConfiguration<T> where T : EntityBase
{
    public TEntityTypeConfiguration()
    {
        this.Property(t => t.CreatedDate).HasColumnType("datetime2");
    }
} 
```

然后每个实体配置都只是从这里继承而不是 EntityTypeConfiguration。

# mysql - mysql：如果未找到匹配项，则希望 case 查询返回 null 或空

> ID：12393342
> 
> 赞同：0
> 
> 时间：2012-09-12T17:20:19.587
> 
> 标签：mysql

Expertz 请帮助 :(

我有一个关系表

```
r_id    usera   userb   active
13       5         1      0
16       1         2      0 
```

现在我想检查其他用户是否是 id 为 1 的朋友，并给我除 1 之外的其他 id

就像这个查询一样，我希望 ans 为空，因为不满足条件 active=1

如果条件返回真而不是我预期的结果为 5,2

所以我形成了这个查询

注意：user_id 会根据会话不断变化

```
$user_id = 1
SELECT CASE 
        WHEN `usera`=$user_id 
        THEN `userb` 
        ELSE `usera` END  
FROM  `relationship`  
WHERE `usera`=$user_id 
    OR `userb`=$user_id and `active`='1' 
```

现在的问题是即使不满足条件（即 active=1）它仍然给我 userb 我希望查询返回为空或 null

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:22:18.663

您缺少一些括号：

```
SELECT CASE 
        WHEN `usera`=$user_id 
        THEN `userb` 
        ELSE `usera` END  
FROM  `relationship`  
WHERE `usera`=$user_id 
    OR (`userb`=$user_id and `active`='1') 
```

甚至这可能是您正在寻找的：

```
SELECT CASE 
        WHEN `usera`=$user_id 
        THEN `userb` 
        ELSE `usera` END  
FROM  `relationship`  
WHERE (`usera`=$user_id OR `userb`=$user_id) 
  and `active`='1' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T17:27:50.600

你的括号是错误的：

```
$user_id = 1
SELECT CASE 
        WHEN `usera`=$user_id 
        THEN `userb` 
        ELSE `usera` END  
FROM  `relationship`  
WHERE (`usera`=$user_id  OR `userb`=$user_id) and `active`='1' 
```

您似乎只关心活跃用户，但您只将条件放在条件表达式的第二部分。

# java - Java 在创建由给定循环命名的变量时创建一个 for 循环

> ID：12393343
> 
> 赞同：0
> 
> 时间：2012-09-12T17:20:23.133
> 
> 标签：java

我想知道如何执行以下操作。制作 10 个名为 , `var_0`, `var_1`,`var_2`等的 int 变量。所有变量都为 0。我正在想象这样的事情......

```
for(int i=0;i>10;i++){
   int var_i = 0;
} 
```

但它当然行不通。如何在不手动执行每个变量的情况下完成这项工作？

它适用于任意数量的变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T17:21:30.340

在 Java 中这是不可能的，没有宏可以让你做到这一点。通常，如果您需要 10 个同名变量，您只需使用数组。

```
int vars[] = new vars[10]; 
```

默认情况下它将被初始化为零。

* * *

如果您事先不知道元素的数量，您可以声明数组并稍后构造它：

```
int vars[];
...
int numVars = 10;
vars = new int[numVars]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T17:21:22.643

> 它适用于任意数量的变量。

听起来你真的想要一个10的*数组*`int`：

```
int vars[] = new int[10]; 
```

元素将被初始化为 0。如果您需要初始化为特定的东西，除了零：

```
for (int i = 0; i < vars.length; i++)
{
    int vars[i] = 7;
} 
```

您还可以声明 10 `int`，并在单个语句中初始化它们：

```
int var1, var2, var3, ...;
var1 = var2 = var3 = ... = 0; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T17:21:35.037

这是不可能的，即使它创建它也是循环的，所以为什么不在`List`那里填充

```
List<Integer> numbers = new ArrayList<Integer>();
for(int i=0;i>10;i++){
   numbers.add(0);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T17:22:28.023

那是不可能的，所以最好去`arrays`......

```
int[] arr = new int[10];

for(int i=0 ; i<10 ; i++){

      int[0] = 0;

 } 
```

# perl - 无法理解 Perl 中的 HTML::Element 文档

> ID：12393345
> 
> 赞同：-1
> 
> 时间：2012-09-12T17:20:33.537
> 
> 标签：perl, perl-module

我正在查看`HTML:Element`文档并遇到[attr_get_i](http://search.cpan.org/~cjm/HTML-Tree-5.02/lib/HTML/Element.pm#attr_get_i)方法，根据文档指出：

> 在列表上下文中，返回一个列表，该列表由 $h 的给定属性的值及其从 $h 开始并向上工作的所有祖先的值组成。

现在，根据那里给出的例子：

```
<html lang='i-klingon'>
     <head><title>Pati Pata</title></head>
     <body>
       <h1 lang='la'>Stuff</h1>
       <p lang='es-MX' align='center'>
         Foo bar baz <cite>Quux</cite>.
       </p>
       <p>Hooboy.</p>
     </body>
   </html> 
```

如果`$h`是`<cite> element`，`$h->attr_get_i("lang")`在列表上下文中将返回列表`('es-MX', 'i-klingon')`。

现在，根据我的不理解，返回的列表应该`('es-MX', 'la', 'i-klingon')`是它也应该考虑`<h1 lang='la'>Stuff</h1>`但根据文档它没有。

现在，为什么我在这里错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T17:26:18.807

这里的“lang”属性是：

```
+-------------+------------------+
|    lang     |       path       |
+-------------+------------------+
| i-klingon   | /html            |
| la          | /html/body/h1    |
| es-MX       | /html/body/p     |
+-------------+------------------+ 
```

The `<cite>` node does not have `<h1>` as its parent (path is `/html/body/p/cite`), so `<h1>` is not its ancestor. This is why the method does not return it.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T17:25:03.933

`<h1 lang='la'>Stuff</h1>`不是 的祖先 `<cite>`，是兄弟姐妹。

# javascript - 在 mongodb 更新中使用变量

> ID：12393351
> 
> 赞同：27
> 
> 时间：2012-09-12T17:20:57.293
> 
> 标签：javascript, mongodb, meteor

使用 Meteor，我正在尝试执行如下更新：

```
Items.update(Session.get('selectedItem'), {'$set': {'directions.0.name': area.value}}) 
```

但我正在努力解决如何动态设置方向的数组索引，如下所示：

```
var index = //a value determined dynamically
Items.update(Session.get('selectedItem'), {'$set': {'directions[index]name': area.value}}) 
```

这不起作用，因为 [index] 被包裹在一个字符串中。我还尝试形成一个自定义字符串，如下所示：

```
var string = 'directions.'+itemIndex+'.name'
Items.update(Session.get('selectedItem'), {'$set': {string: area.value}}) 
```

但这不起作用。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-09-12T17:30:09.890

`$set`您需要以编程方式构建对象：

```
var setModifier = { $set: {} };
setModifier.$set['directions.' + index + '.name'] = area.value;
Items.update(Session.get('selectedItem'), setModifier); 
```

**更新**

如果您的 JavaScript 环境支持[计算属性名称](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Object_initializer#Computed_property_names)（例如 node.js 4+），您可以一步完成：

```
Items.update(Session.get('selectedItem'), { $set: {
    ['directions.' + index + '.name']: area.value
}}); 
```

# vb.net - OleDbException：ORDER BY 子句中的语法错误

> ID：12393352
> 
> 赞同：2
> 
> 时间：2012-09-12T17:20:58.640
> 
> 标签：vb.net, ms-access, select, oledb, oledbexception

我在测试如何通过选择所需的列然后指定唯一的 id 来获取最新的数据库条目时遇到此错误，该唯一 ID 是按主 ID 排序的房间号，ID。

这是我的代码：

```
 Private Sub Form5_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Conn.ConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|\patientinfo.accdb"
    Conn.Open()

  Dim statement As String = " SELECT room_number, patient_name,patient_age,date_confinement,type_sickness, type_fluid, bottle_used, drop_rate FROM tblPatientInfo WHERE room_number=1 ORDER BY ID DESC LIMIT 1"
  RetrieveInfos(statement)

  End Sub

  Public Sub RetrieveInfos(ByRef statement As String)
    Dim cmd As OleDbCommand = New OleDbCommand
    With cmd
        .CommandText = statement
        .CommandType = CommandType.Text
        .Connection = Conn
        .ExecuteNonQuery()

        '--read records in access database----------------
        Dim reader As OleDbDataReader = cmd.ExecuteReader
        While reader.Read
            lblName.Text = (reader.GetString(0))
            lblAge.Text = (reader.GetInt32(1).ToString)
            lblDate.Text = (reader.GetDateTime(2).ToString)
            lblSickness.Text = (reader.GetString(3))
            lblFluid.Text = (reader.GetString(4))
            lblBottle.Text = (reader.GetInt32(5).ToString)
            lbldrops.Text = (reader.GetInt32(6).ToString)

        End While
      reader.Close()

    End With
End Sub 
```

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T18:02:30.600

“LIMIT 1”子句是可疑的。建议修改查询以使用“SELECT TOP 1 .....”

```
Dim statement As String = " SELECT TOP 1 room_number, patient_name,patient_age,
                            date_confinement,type_sickness, type_fluid, bottle_used, drop_rate FROM 
                            tblPatientInfo WHERE room_number=1 ORDER BY ID DESC" 
```

（为清楚起见，此处用硬返回包裹查询）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T18:14:07.147

限制特定于 MySql。

对于 Access 或 SQL Server：

```
Select top 1 from ...
Order by ... 
```

对于甲骨文：

```
Select *
from
(
    Select ...
    Order by ...
)
Where row_num = 1 
```

# android - android中的自由手字符识别

> ID：12393358
> 
> 赞同：4
> 
> 时间：2012-09-12T17:21:25.997
> 
> 标签：android, image-processing, ocr, tesseract

我们正在开发一个涉及徒手字符识别的 android 应用程序。该应用程序要求学生在安卓屏幕上绘制一个字母的手绘图像，应用程序处理绘制的图像并返回所写字母的准确性。

我们正在考虑两种选择 使用正方体。湾。使用我们仍在研究的我们自己的算法

**问题**

一种。Tesseract 根本无法帮助识别徒手字符。任何有关如何训练 tesseract 的指针都将受到高度赞赏。

湾。我们的算法都没有达到我们的预期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T17:30:46.623

Tesseract 实际上是识别写入屏幕的字符的错误方法，因为它不必要地丢弃了一些非常有价值的信息：图像最初是如何绘制的。它如何分解为笔画、每个笔画的顺序/方向等 - 当您的软件已经知道每个字符的底层结构时，Tesseract 必须花费大量时间来试图找出每个字符的底层结构。

你想要的是一个真正的“手写识别”库，而不仅仅是像 Tesseract 这样的 OCR 库；您特别想要一个“在线”手写识别库，“在线”意味着您可以捕获用户在屏幕上绘制的实际点序列。有许多可用的开源库，例如[Unipen](http://unipen.nici.kun.nl)和[LipiTk](http://lipitk.sourceforge.net)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T17:58:48.497

您可能想查看对手势识别和训练工具的内置支持：

[http://developer.android.com/reference/android/gesture/package-summary.html](http://developer.android.com/reference/android/gesture/package-summary.html)

它们提供了一个可插入的覆盖层，以使用预定义形状的“字典”来检测和识别手势。它不像 OCR 那样自动，需要培训，但目前（自 Android 1.6 起可用）可能有免费或商业的手写手势词典可用。

# php - 将图像保存到 mySQL 数据库并打印

> ID：12393370
> 
> 赞同：-1
> 
> 时间：2012-09-12T17:22:04.857
> 
> 标签：php, mysql, image, escaping, store

要保存我正在使用的图像：

```
$image_bin = addslashes(file_get_contents($img_url));
mysql_query('INSERT INTO images
        (image_filename, image_type, image_bin)
    VALUES
        ("file.jpg", "image/jpeg", "'.$image_bin.'")'); 
```

以显示：

```
$qry = 'SELECT image_filename, image_type, image_bin
    FROM images
    WHERE image_id = 1';
$result = mysql_query($qry);
$row = mysql_fetch_row($result);
header('Content-type: '.$row['image_type']);
echo stripslashes($row['image_bin']); 
```

图像保存到数据库，但图像尺寸变大。并且图像颜色变得有些损坏。

例如，打开开发者工具的 Chrome 中的图像截图： [screensho url](http://www.imagetoo.com/?v=snapshot1b.jpg)

有谁知道我可能做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T17:28:44.867

尝试...

```
//use mysql real escape
$image_bin = mysql_real_escape_string(file_get_contents($img_url));
mysql_query('INSERT INTO ' . PREFIX . 'news_images
    (image_filename, image_type, image_bin)
    VALUES
    ("file.jpg", "image/jpeg", "' . $image_bin . '")');

$qry = 'SELECT image_filename, image_type, image_bin
    FROM images
    WHERE image_id = 1';
$result = mysql_query($qry);
$row = mysql_fetch_row($result);
header('Content-type: ' . $row['image_type']);
echo $row['image_bin']; //no stripslashes 
```

# jquery - 使用 Jquery 通过扫描内容中的地址来自动显示 Google 地图

> ID：12393375
> 
> 赞同：0
> 
> 时间：2012-09-12T17:22:23.640
> 
> 标签：jquery, google-maps

他们是否可以通过扫描页面内容并从内容中提取地址并使用该地址来显示地图来显示谷歌地图。如果您可以建议或他们提供一些 jQuery 技巧，那就太好了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T18:14:36.977

因此，这可能不是最好的解决方案，但我建议您利用字符串函数 search()。你可以做这样的事情......

```
var myRegExp = /RegEx for Address/;
var result = $("body").text().match(myRegExp);
if(result) {
    // A match was found and is now stored in the result var. Use that to
    // display the map.
} 
```

获得该结果后，您就可以利用[Google Maps API](https://developers.google.com/maps/documentation/javascript/)在地图上显示该位置。

我将把它作为练习留给您提出适当的 RegEx（即，因为根据您所使用的语言环境，邮政地址的正则表达式可能会有很大的不同）。

# jquery - Fancybox 2.1 覆盖淡入（speedIn）无法正常工作/颠簸

> ID：12393378
> 
> 赞同：1
> 
> 时间：2012-09-12T17:22:31.317
> 
> 标签：jquery, fancybox, fancybox-2

在谈到 JS 和 CSS 时有点新手，并且已经尝试解决我的问题几天了，希望有人可以帮助我......

我刚刚从 Fancybox 2.0.5 更新到 2.1.0。当 iframe 打开以显示来自 Vimeo 的视频时，设置为淡入（speedIn 为 1000）的叠加层以 100% 进入而不是淡入。就在 iframe 完成加载之前，叠加层会短暂闪烁关闭并再次打开。通过助手，我可以控制 speedOut、不透明度和颜色，但不能控制叠加层的 speedIn。

我已经在我的 Mac 上的 Safari (v5.1.2) 和 Firefox (v12) 中尝试过，两者都遇到了同样的问题。这是我正在开发的网站的链接。（点击图片）：

[http://www.steinstie.com/Test/index.html](http://www.steinstie.com/Test/index.html)

任何想法将不胜感激！

这是助手的代码：

```
$(document).ready(function() {
        $(".fancybox-iframe").fancybox({
            openEffect  : 'fade',
            closeEffect : 'fade',
            openSpeed   : 1000,
            closeSpeed  : 1000,
            padding     : 0,
            width       : 600,
            height      : 360,
            type        : 'iframe',
            autoSize    : false,
            fitToView   : false,
            // NICK H
            afterLoad: function(){
                  this.title = $(this.element).next('.newTitle').html();
            },
            // END NICK H
            helpers: {
            overlay: {
                    speedIn: 1000, //<-- here you control the overlay speedIn
                    speedOut: 1000,//<-- here you control the overlay speedOut
                    css: {'background' : 'rgba(0, 0, 0, 0.6)'}
                    }, // overlay

                title : {
                    type : 'inside'
                }

                    } // helpers
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-03T08:52:39.037

不幸的是，似乎没有`beforeOpen`/`afterOpen`对应的回调`beforeClose`（`afterClose`参见[http://fancyapps.com/fancybox/](http://fancyapps.com/fancybox/)上的文档），但我们可以克隆覆盖创建函数并在创建覆盖后添加自定义淡入：

```
// Alter fancyBox functions.
(function ($, F) {

  // Clone of original overlay creation function, but with overlay fade in animation.
  F.helpers.overlay.create = function(opts) {
    var parent;

    opts = $.extend({}, this.defaults, opts);

    if (this.overlay) {
      this.close();
    }

    parent = F.coming ? F.coming.parent : opts.parent;

    this.overlay = $('<div class="fancybox-overlay"></div>').appendTo( parent && parent.lenth ? parent : 'body' );
    this.fixed   = false;

    if (opts.fixed && F.defaults.fixed) {
      this.overlay.addClass('fancybox-overlay-fixed');

      this.fixed = true;
    }

    // Custom fade in.
    this.overlay.stop(true).hide().fadeIn();
  }

}(jQuery, jQuery.fancybox)); 
```

请注意，在解锁模式下使用覆盖时，这可能效果最好。使用锁定模式（非触摸设备的默认设置）时，`.fancybox-wrap`元素放置在覆盖元素内，这可能会导致双淡入淡出动画（取决于您的动画设置）：覆盖和子包装元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T17:42:48.233

您的自定义脚本看起来不错......[我之前已经回答过，](https://stackoverflow.com/a/9913999)所以试试这些：

1.  加载fancybox的单个实例......当您只需要其中一个（但不是两者）时，您现在正在加载[普通](http://www.steinstie.com/Test/source/jquery.fancybox.js)版本和[打包版本。](http://www.steinstie.com/Test/source/jquery.fancybox.pack.js)

2.  **在媒体、拇指和按钮助手 js 文件之前**加载 fancybox js文件，否则你会得到这些 js 错误：

    ```
    Timestamp: 12/09/2012 10:25:58 AM
    Error: TypeError: F is undefined
    Source File: http://www.steinstie.com/Test/source/helpers/jquery.fancybox-buttons.js
    Line: 25 
    ```

和

```
Timestamp: 12/09/2012 10:25:58 AM
Error: TypeError: F is undefined
Source File: http://www.steinstie.com/Test/source/helpers/jquery.fancybox-thumbs.js
Line: 28 
```

和

```
Timestamp: 12/09/2012 10:25:58 AM
Error: TypeError: F is undefined
Source File: http://www.steinstie.com/Test/source/helpers/jquery.fancybox-media.js
Line: 87 
```

这些错误可能会破坏您的fancybox 代码。

**编辑**：至于 Fancybox 2.1，覆盖的`speedIn`选项**似乎已被删除**。现在引入了覆盖的固定位置（可能这个新属性与`speedIn`选项冲突）

发布的脚本 ( `overlay speedIn`) 将适用于 fancybox 2.0.6 及以下版本。

# html - 当图像大小改变时相对于图像定位文本

> ID：12393382
> 
> 赞同：4
> 
> 时间：2012-09-12T17:22:49.230
> 
> 标签：html, css, image, position

我正在尝试一种聪明的方法来处理网页的一部分，其中图像将被不同的图像（不同宽度，最大为 620px 宽）换出，并且文本标题绝对定位在它上面. 我希望文本根据图像的宽度而不是相对定位的容器的宽度来绝对定位。

我在想可能是背景图像，而不是图像本身，但是我必须处理它是一个带有背景图像的空 div 的事实，所以我必须硬编码一个高度，这是行不通的因为其中一些图像会比其他图像高。

你们能想到的任何解决方案都将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T17:44:54.460

我不确定我是否 100% 关注，但这里是我*认为*你正在尝试做的事情。

使用相对位置创建容器，设置宽度和高度，并将溢出设置为隐藏：

```
.container-outer {
  position: relative;
  width: 200px;
  height: 200px;
  overflow: hidden;
} 
```

接下来，在其中创建一个内部容器，其中包含 position: absolute

```
.container-inner {
  position: absolute;
} 
```

最后，将覆盖文本样式创建为 100% 宽度并水平居中（或者您希望它定位）

```
.overlay {
  position: absolute;
  text-align: center;
  width: 100%;
  margin: 0;
} 
```

这是带有示例的 jsfiddle：http: [//jsfiddle.net/BGvca/1/](http://jsfiddle.net/BGvca/1/)

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T17:42:36.053

我用更多的 CSS 提出了先前的答案

```
<div class="imageholder">
    <div class="caption">Simon &amp; Garfunkel</div>
    <img src="http://greenobles.com/data_images/simon-and-garfunkel/simon-and-garfunkel-03.jpg">
</div>​ 
```

```
.imageholder{
    position: relative;
    float: left;
}
.caption{
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    font-family: Helvetica,sans-serif;
    font-size: 1em;
    background: rgba(0,0,0,0.5);
    color: #fff;
    padding: 1em 2em;
} 
```

​ 参考[jsFiddle](http://jsfiddle.net/WnLuh/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T17:47:00.743

如果您使 div 包含图像`inline-block`，它的宽度将缩放到其内容的大小，即您的图像。

一旦容器的大小正确，您可以使用带有 的包装器将其他子元素（例如标题）居中，或者没有包装器，并且左右边距的`text-align: center`值为。`auto`

这是一个例子： http: [//jsbin.com/uyajaw/3/edit](http://jsbin.com/uyajaw/3/edit)（带有丑陋的边框和背景来显示东西在哪里）

单击图像以调整其大小并看到标题仍居中。

请注意，如果您的标题可能比您的图像大，它可能会扩大容器 div 的宽度，从而偏离中心对齐。您可以通过在标题上进行设置来避免这种情况`position: absolute; left: 0; right: 0;`，或者通过给它一个您知道将始终小于图像的宽度来避免这种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T18:20:39.983

I don't know if I'm over-thinking this, but here's a way to do it. If you specifically don't want to align the caption with the wrapper div, then you'll need to also account for the `imagesLoaded` event ([jQuery plugin](http://desandro.github.com/imagesloaded/)). Otherwise, you will either have an `img` width of 0 if not loaded, or you'll have the previously loaded `img` width in there (unless you go back to it).

Take a look at this [Fiddle](http://jsfiddle.net/scrimothy/e5WsD/11/) that shows a fixed width wrapper div and the caption centered on it.

# python - Python Pandas：如何在不编写辅助函数的情况下使用 apply 广播操作

> ID：12393387
> 
> 赞同：2
> 
> 时间：2012-09-12T17:23:17.373
> 
> 标签：python, numpy, pandas, apply

我有一列包含字符串的数据，我想创建一个新列，该列仅采用相应数据字符串中的前两个字符。

为此使用该`apply`功能似乎是合乎逻辑的，但它并不像预期的那样工作。它甚至似乎与`apply`. 见下文。

```
In [205]: dfrm_test = pandas.DataFrame({"A":np.repeat("the", 10)})

In [206]: dfrm_test
Out[206]:
     A
0  the
1  the
2  the
3  the
4  the
5  the
6  the
7  the
8  the
9  the

In [207]: dfrm_test["A"].apply(lambda x: x+" cat")
Out[207]:
0    the cat
1    the cat
2    the cat
3    the cat
4    the cat
5    the cat
6    the cat
7    the cat
8    the cat
9    the cat
Name: A

In [208]: dfrm_test["A"].apply(lambda x: x[0:2])
Out[208]:
0    the
1    the
Name: A 
```

基于此，似乎`apply`除了执行内部调用的 NumPy 等效项之外什么都不做。也就是说，`apply`似乎执行与`arr + " cat"`第一个示例相同的操作。如果 NumPy 恰好广播了它，那么它将起作用。如果没有，那么它不会。

但这似乎`apply`违背了文档中的承诺。以下是 pandas.Series.apply 应该期待的报价：

> 对 Series 的值调用函数。可以是 ufunc 或 Python 函数，只需要单个值（[链接](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.apply.html?highlight=apply#pandas.Series.apply)）

它明确表示它可以接受只需要单个值的 Python 函数。不工作的功能 ( `lambda x: x[0:2]`) 绝对可以满足这一点。它并不是说单个参数必须是一个数组。鉴于诸如此类`numpy.sqrt`的东西通常用于单个输入（因此不仅仅是数组），期待 Pandas 与任何此类功能一起工作似乎很自然。

有什么方法可以使用`apply`我在这里缺少的吗？

**注意：**我确实在下面编写了自己的额外函数：

```
def ix2(arr):
    return np.asarray([x[0:2] for x in arr]) 
```

我验证了这个版本*确实*适用于 Pandas `apply`。但这是无关紧要的。编写在 Series 对象之上进行外部操作的东西比必须不断编写使用列表推导来有效循环 Series 内容的包装器要容易得多。这不是具体`apply`应该从用户那里抽象出来的吗？

我使用的是 Pandas 0.7.3 版，它位于工作场所共享网络上，因此无法升级到最新版本。

**添加：**

我能够确认此行为从 0.7.3 版更改为 0.8.1 版。在 0.8.1 中，它按预期工作，没有 NumPy ufunc 包装器。

我的猜测是，在代码中，有人试图使用`numpy.vectorize`或`numpy.frompyfunc`在 try-except 语句中。也许它与我正在使用的特定 lambda 函数无法正常工作，因此在`except`部分代码中，它默认仅依赖于通用 NumPy 广播。

如果可能的话，最好从 Pandas 开发人员那里得到一些确认。但与此同时，ufunc 解决方法就足够了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T18:09:32.177

我能想到的一种解决方法是将 Python 函数转换为`numpy.ufunc`with [`numpy.frompyfunc`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.frompyfunc.html#numpy.frompyfunc)：

```
numpy.frompyfunc((lambda x: x[0:2]), 1, 1) 
```

并将其用于`apply`：

```
In [50]: dfrm_test
Out[50]:
     A
0  the
1  the
2  the
3  the
4  the
5  the
6  the
7  the
8  the
9  the

In [51]: dfrm_test["A"].apply(np.frompyfunc((lambda x: x[0:2]), 1, 1))
Out[51]:
0    th
1    th
2    th
3    th
4    th
5    th
6    th
7    th
8    th
9    th
Name: A

In [52]: pandas.version.version
Out[52]: '0.7.3'

In [53]: dfrm_test["A"].apply(lambda x: x[0:2])
Out[53]:
0    the
1    the
Name: A 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T22:25:19.500

尝试`dfrm_test.A.map(lambda x: x[0:2])`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T16:19:17.057

这适用于 pandas 0.8.1：

```
In [47]: dfrm_test.A.str[:2]
Out[47]: 
0    th
1    th
2    th
3    th
4    th
5    th
6    th
7    th
8    th
9    th
Name: A 
```

# vbscript - 复制和重命名文件 VBScript

> ID：12393389
> 
> 赞同：12
> 
> 时间：2012-09-12T17:23:24.020
> 
> 标签：vbscript

我需要将名称基于日期的文件移动到另一个文件夹。

文件结构为：
**来源：** `\\network_location\folder\Filename_09-11-2012.txt`

**目的地：** `C:\Dump\Filename.txt`

源文件总是落后 1 天。我希望在复制文件时重命名文件。
我尝试使用的代码是：

```
Sub Copy_And_Rename()
    Name "\\network_location\folder\Filename_"+Month(Now())+"-"+Day(Now()-1)+"-"+Year(Now())+".txt" As "C:\Dump\Filename.txt"
End Sub 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-14T16:08:21.293

您可以使用以下方式复制和重命名文件`FileSystemObject`：

```
Set objFSO = CreateObject("Scripting.FileSystemObject")
' First parameter: original location\file
' Second parameter: new location\file
objFSO.CopyFile "C:\Test\folder1\name1.txt", "C:\Test\folder2\name2.txt" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-30T08:31:41.433

复制和重命名文件的代码

```
sourceFilePath = "C:\filePath\source.xlsx"
destinationFilePath = "C:\filePath\destination.xlsx"

Set objFSO = CreateObject("Scripting.FileSystemObject")
objFSO.CopyFile sourceFilePath, destinationFilePath 
```

# javascript - BrowserId 登录请求在文档加载时被调用

> ID：12393392
> 
> 赞同：0
> 
> 时间：2012-09-12T17:23:47.700
> 
> 标签：javascript, browserid

我的 browserId 登录代码几乎是从[这里](https://developer.mozilla.org/en-US/docs/Persona/Quick_Setup?redirectlocale=en-US&redirectslug=BrowserID%2FQuick_Setup#Step_3.3A_Watch_for_login_and_logout_actions)逐字记录的。但是当我打开 Route 时，请求会自动发送，无论是否`loggedInEmail`设置或其他任何内容，都会导致永久刷新循环。我的 Javascript 代码在[生成](https://gist.github.com/842c678aa9ff76428069)时是：

```
navigator.id.watch({
    'loggedInEmail': null,
    'onlogin': (function (jmId_1_0) {
        $.ajax({
            'data': {
                'assertion': jmId_1_0
            },
            'error': (function (jmId_1_1, jmId_1_2, jmId_1_3) {
                alert(("login failure" + jmId_1_1));
            }),
            'success': (function (jmId_1_4, jmId_1_5, jmId_1_6) {
                console.log(jmId_1_4);
            }),
            'type': "POST",
            'url': "\/login"
        });
    }),
    'onlogout': (function () {
        $.ajax({
            'error': (function (jmId_1_7, jmId_1_8, jmId_1_9) {
                alert(("logout failure" + jmId_1_7));
            }),
            'success': (function (jmId_1_10, jmId_1_11, jmId_1_12) {
                window.location.reload();
            }),
            'type': "POST",
            'url': "\/logout"
        });
    })
});
$((function () {
    $("#loginBtn").click((function (jmId_1_13) {
        jmId_1_13.preventDefault();
        navigator.id.request();
        return false;
    }));
})); 
```

`onlogin`无论用户是否点击了按钮，这些函数都会被调用。它必须在 browserId 本身的某个地方，或者我做错了什么。

完整的模板代码可以在[这里](https://github.com/scan/neighr/blob/master/src/Template.hs#L38)找到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T20:14:07.883

似乎这个问题是由不正确的设置引起的`loggedInEmail`。

# entity-framework - 实体框架检查本地列表

> ID：12393397
> 
> 赞同：4
> 
> 时间：2012-09-12T17:24:08.100
> 
> 标签：entity-framework, entity-framework-5

我有一个本地值列表，我需要实体框架对数据库进行检查并返回它们。

如果该列表已经在数据库中，则以下内容将起作用：

```
var list = /* some ef query */;
var myList = context.Logs.Where(l => list.Any(li => l.LogNumber == li.LogNumber)); 
```

但是如果列表是本地的，它会抛出一个错误：

```
var list = new List<Log>();
var myList = context.Logs.Where(l => list.Any(li => l.LogNumber == li.LogNumber)); 
```

例外：`Unable to process the type 'Data.Log[]', because it has no known mapping to the value layer.`

那么如何使用 EF 将本地列表与数据库列表进行匹配呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T18:53:54.427

我在代码示例中遇到了与您不同的错误，但我相信这是相同的想法。EF 不知道如何转换`List<Log>`为 SQL 存储表达式。当您仍在查询中时它可以工作，因为它还没有被序列化。

我意识到这不太理想，但我能够通过提取 LogNumber 的标量值然后在查询中使用它来使这个查询工作。

```
 var list = new List<Log>();
    list.Add(new Log()
       {
           LogNumber = 1
       });
    var numbers = list.Select(l => l.LogNumber);
    var myList = m.Logs.Where(l => numbers.Contains(l.LogNumber)); 
```

# java - java中getter setter的空指针异常

> ID：12393399
> 
> 赞同：3
> 
> 时间：2012-09-12T17:24:25.480
> 
> 标签：java, android, getter-setter

我有一个名为 SharedData.java 的 getter setter 类。当我要在我的代码中暗示它时，我得到了空指针异常。这是 SharedData 类：

```
public class SharedData {
private static SharedData instance = null;

public SharedData() {
    // randomizeServers();
}

// data to be shared
private double src_latitude = -1;
private double src_longitude = -1;
private double end_latitude = -1;
private double end_longitude = -1;

//Getter-Setters
public static SharedData getInstance() {
    return instance;
}
public static void setInstance(SharedData instance) {
    SharedData.instance = instance;
}

public double getSrc_latitude() {
    return src_latitude;
}
public void setSrc_latitude(double src_latitude) {
    this.src_latitude = src_latitude;
}
public double getSrc_longitude() {
    return src_longitude;
}
public void setSrc_longitude(double src_longitude) {
    this.src_longitude = src_longitude;
}
public double getEnd_latitude() {
    return end_latitude;
}
public void setEnd_latitude(double end_latitude) {
    this.end_latitude = end_latitude;
}
public double getEnd_longitude() {
    return end_longitude;
}
public void setEnd_longitude(double end_longitude) {
    this.end_longitude = end_longitude;
}

} 
```

这是我的代码：

```
 SharedData sharedData ;  
       sharedData = SharedData.getInstance();
       sharedData.setSrc_latitude(latitude);
   sharedData.setEnd_longitude(longitude); 
```

有人可以帮我吗？谢谢 。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T17:26:38.020

你从来没有初始化过`sharedData`，所以它的值是`null`，在它上面调用一个方法会让你的程序崩溃。

我认为您正在尝试使用`Singleton Pattern`. 试试下面的：

```
private static SharedData instance = new SharedData();   \\ Initialize here

private SharedData() {        // Make it private....
    // randomizeServers();
}

// data to be shared
private double src_latitude = -1;
private double src_longitude = -1;
private double end_latitude = -1;
private double end_longitude = -1;

//Getter-Setters
public static SharedData getInstance() {
    return instance;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T17:26:47.090

```
SharedData.getInstance(); 
```

退货`null`。稍后您尝试在其上调用方法：

```
sharedData.setSrc_latitude(latitude); 
```

这是非法的，因为对 object 的引用仍然是`null`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T17:25:31.787

你没有实例化这个类，所以`getInstance()`返回`null`。

在课程开始时，替换：

```
private static SharedData instance = null; 
```

经过 ：

```
private static SharedData instance =  new SharedData() ; // creates a new instance 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T17:27:28.510

即使使用 ，您也应该至少`singleton pattern`实例化对象一次。`SharedData`

试试这个

```
SharedData sharedData = new SharedData();  
       sharedData = SharedData.getInstance();
       sharedData.setSrc_latitude(latitude);
   sharedData.setEnd_longitude(longitude); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-12T17:28:16.700

改变`private static SharedData instance = null;`

到`private static SharedData instance = this;`

并使您的班级静态

`public static class SharedData {`

另外，使吸气剂二传手静态..

# winapi - 读取 mbr 时 Createfile 失败

> ID：12393403
> 
> 赞同：0
> 
> 时间：2012-09-12T17:24:55.890
> 
> 标签：winapi, mbr

在 WinXP 上读取 mbr 时 Createfile 失败。返回 -1 即`INVALID_DEVICE_HANDLE`

```
HANDLE hDisk = CreateFile((LPCWSTR)"\\\\.\\PhysicalDrive0", GENERIC_READ| GENERIC_WRITE, FILE_SHARE_READ| FILE_SHARE_WRITE, NULL, OPEN_EXISTING, 0,NULL ); 
```

知道为什么吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:35:23.100

您忘记将“L”添加到字符串常量“\\.\PhysicalDrive0”。

```
HANDLE hDisk = CreateFile(L"\\.\PhysicalDrive0", GENERIC_READ | GENERIC_WRITE,
    FILE_SHARE_READ | FILE_SHARE_WRITE, NULL, OPEN_EXISTING, 0, NULL); 
```

仅当您使用 API 的 unicode 版本时才正确，即 CreateFileW()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-07T11:12:13.443

用这个：

```
HANDLE hDisk = CreateFile(L"\\\\.\\PhysicalDrive0", GENERIC_READ | GENERIC_WRITE, FILE_SHARE_READ | FILE_SHARE_WRITE, NULL, OPEN_EXISTING, 0, NULL); 
```

它对我有用。

# wordpress - 需要正确的方法在 wordpress 中设置cookie

> ID：12393404
> 
> 赞同：2
> 
> 时间：2012-09-12T17:24:58.390
> 
> 标签：wordpress, cookies, setcookie

我整天都在寻找如何在 wordpress 中设置cookies。以我的方式，我发现（使用开发人员工具栏）cookie 已设置但仍无法正常工作。我有 2 个文件，第一个包含重定向到另一个页面以设置 cookie 并返回到另一个页面以检查它是否工作的登录表单。测试的域是这样的：blog.mydomain.com。这是 setcookie 文件：

```
<?php
setcookie("user_name","test",time()+3600);
?> 
```

并像这样检查cookie：

```
if(isset($_COOKIE["user_name"])){
echo "cookie exists";
}
else{
echo "cookie doesn't exist";
} 
```

我已经阅读了很多关于这个问题的主题，但没有明确的答案。提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T21:36:27.273

当您在将输出发送到浏览器后尝试设置 cookie 时，通常会发生这种情况。要在 WP 中设置 cookie，您应该使用“init”钩子在 init 上设置 cookie。

```
function set_username_cookie() {
    if (!isset($_COOKIE['user_name'])) {
        setcookie("user_name","test",time()+3600);
    }
}
add_action( 'init', 'set_username_cookie'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-11T11:20:42.513

好吧，我在 wordpress 中使用 cookie 的最佳方式是这样，

```
function set_my_cookie() {
global $post;
$post_id  = $post->ID;  
$cookie_name = "my_cookie";
$cookie_value = "my_cookie_val";
if (!isset($_COOKIE['my_cookie'])) {
{
    setcookie($cookie_name, $cookie_value, time() + (86400 * 30), "/"); 
}}add_action( 'wp', 'set_my_cookie'); 
```

我用这个函数在 wordpress 的 wp 钩子中设置cookie。主要原因是我们可能需要某个当前页面或帖子，我们无法在 init 挂钩上访问，但我们可以在 wp 挂钩中访问。

现在，在简码或其他插件/主题功能中，我们可能只需要检查 cookie 是否存在。而已

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-29T21:42:52.837

另一种选择是使用 PHP`ob_start();`和`ob_end_flush();`.

[您可以在此处找到有关这两个功能的文档](http://php.net/manual/en/ref.outcontrol.php)

我解决问题的方法是在打开和关闭 html 标记之前和之后调用这两个函数，如下所示：

```
<?php ob_start(); ?>
<!DOCTYPE html>
<html>
  <head>
  </head>
<body>
  <?php /* Wordpress loop and other tempate code here */ ?>
</body>
</html>
<?php ob_end_flush(); ?> 
```

我遇到的问题是调用一个使用 PHP 的全局函数，`setcookie();`并且因为 WordPress 逐步处理页面，由于页面的标题已经发送，无法创建 cookie。

PHP 的输出缓冲功能强制在 WordPress 处理页面之前发送标头。

希望这可以帮助。

# objective-c - 当返回值是不可变对象时，返回可变对象是不好的做法吗？

> ID：12393407
> 
> 赞同：3
> 
> 时间：2012-09-12T17:25:03.720
> 
> 标签：objective-c, nsdictionary, immutability, nsmutabledictionary

如果我有这个方法：

```
+ (NSDictionary *)dictionaryFromQueryString:(NSString *)queryString
{
    NSMutableDictionary *this = [[NSMutableDictionary alloc] init];

    NSArray *fields = [queryString componentsSeparatedByString:@"&"];

    for(NSString *field in fields)
    {
        NSArray *fieldParts = [field componentsSeparatedByString:@"="];

        NSString *value = @"";

        if(fieldParts.count > 1)
        {
            value = [[fieldParts subarrayWithRange:NSMakeRange(1, fieldParts.count - 1)] componentsJoinedByString:@"="];
        }

        [this setObject:unescape(value) forKey:unescape(fieldParts[0])];
    }

    return this;
} 
```

那么我返回 a`NSMutableDictionary`而不是 a是不好的做法`NSDictionary`吗？

我应该将其转换为`NSDictionary`with`return [this copy];`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T17:32:19.387

这取决于。

塞尔吉奥的回答是正确的，除了一个非常重要的问题：

当包含可变字典的对象在另一个对象检索字典后对其进行变异时会发生什么？除非另一个对象是专门为支持字典可能发生变异的可能性而编写的，否则另一个对象现在将处于不一致的状态。

鉴于`copy`字典是一个浅的不可变副本，因此它的速度很快，因此通常总是返回一个副本比返回对可变版本的引用要好得多。如果您发现您的代码正在使用创建副本的方法，则在您的对象中缓存一个不可变副本并出售它，只要可变后备存储发生更改，它就会使其无效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T17:26:48.993

我不认为这是不好的做法。这样做的最终效果是您的接收者`NSDictionary`不会尝试修改对象（尽管对象是可变的）。这是非常安全的，而且很有意义，因为您的使用者方法保持更通用（它可以与可变和非可变对象一起使用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T17:32:55.207

以这种方式返回一个不可变对象并不是*一个*坏习惯，因为`NSMutableDictionary`它是`NSDictionary`. 这是多态性，所以“一切都好”。

但无论如何，我可能会返回一个这样的自动发布副本：

```
return [NSDictionary dictionaryWithDictionary:this]; 
```

# mysql - SQL - 如何连续选择特定元素？

> ID：12393412
> 
> 赞同：-2
> 
> 时间：2012-09-12T17:25:22.710
> 
> 标签：mysql, sql, sql-server-2008, oracle11g

我想连续获取/选择特定元素。我如何为 Oracle 11g、sql server 和 mysql 做到这一点？

```
eg. id - name - address
    1  - abc  - def
    2  - adl  - eio
    3  - yuc  - pwr 
```

选择/显示adl，即第二行名称列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T17:35:11.580

带有特定元素的意思是字段吗？

在所有这些中，都是相同的方式：标准 ANSI SQL。例如：

```
select TheFieldYouWant from YourTable where RowIdYouWant = 1 
```

这将从表格中获得 Id = 1 的行，然后显示您想要的字段。如果您想显示更多或`*`显示所有字段，您可以放置​​更多字段

# c++ - OpenGL32 库

> ID：12393416
> 
> 赞同：3
> 
> 时间：2012-09-12T17:25:34.107
> 
> 标签：c++, opengl

我缺少 opengl32 库（更多详细信息：[mingw32 w64 missing OpenGL32 lib](https://stackoverflow.com/questions/12390317/mingw32-w64-missing-opengl32-lib)）。我有几个与这个库有关的问题：

1.  为什么我需要 opengl32 静态库（我有 .dll）？
2.  为什么显卡厂商不提供这个库？
3.  谁应该提供？
4.  有opengl32库的源代码吗？
5.  如果有 opengl32，为什么我需要 GLEW 或其他 GL 库实现（以使用 OpenGL 的所有功能）？为什么 opengl32 不能拥有所有必需的 GL 实现？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T17:33:20.330

> 为什么我需要 opengl32 静态库（我有 .dll）？

它为链接器提供符号表。符号表告诉链接器库提供了哪些函数，以便链接器知道如何将程序中使用的符号与链接的库联系起来。

请注意，在 Windows 以外的其他操作系统上，“DLL”也提供符号表。

> 为什么显卡厂商不提供这个库？

因为库是驱动系统的操作系统接口的一部分

> 谁应该提供？

DLL：操作系统供应商。符号表库：编译器供应商。

> 有opengl32库的源代码吗？

OpenGL 本身只是一个规范。您在计算机上拥有的是一个实现和一个接口。该接口是操作系统的一部分。因此，在闭源操作系统上没有可用的源代码，但在开源操作系统上却有。

> 如果有 opengl32，为什么我需要 GLEW 或其他 GL 库实现（以使用 OpenGL 的所有功能）？

opengl32.dll 只是驱动系统的一个接口。该接口需要是 OpenGL 功能的最小公分母，以便可以通过一个通用接口提供广泛的 OpenGL 版本和功能。但是，您还希望能够访问存在扩展机制的更新和最前沿的功能。

> 为什么 opengl32 不能拥有所有必需的 GL 实现？

opengl32.dll 是操作系统的一部分，如果它是操作系统的一部分，那么每个新版本的 OpenGL 都需要更新操作系统。这实际上就是 MacOS X 的情况。

此外，OpenGL**实现**是驱动程序的一部分，而不是 DLL。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T17:32:29.130

1.  它不是静态库，而是动态链接到 DLL 的库。
2.  因为它或多或少是操作系统的一部分。从 OpenGL32.dll 导出的符号往往是标准的（一组特定的`gl...`函数）和 Microsoft 特定`wgl`的（至少是一个）。众所周知的供应商之间没有差异。
3.  微软确实提供了它，以及他们的编译器。任何其他编译器供应商也应该这样做，因为库可能在某种程度上是特定于编译器的。
4.  Mesa 是一个开源的 OpenGL 实现，所以你会得到最接近的。
5.  你没有，你可以手动获取字符串和函数指针，这非常乏味。GLEW 等人为您完成了大部分功能检查和初始化。它们不能做任何你可以直接用 OpenGL32.dll 做的事情，但它们确实让生活变得更轻松。

# jquery-tools - jQueryTools Scrollable - 以循环模式跳转到最后一张图片

> ID：12393417
> 
> 赞同：0
> 
> 时间：2012-09-12T17:25:44.100
> 
> 标签：jquery-tools

[jQuery Scrollable](http://jquerytools.org/documentation/scrollable/)（带有导航器插件）在首次加载时显示错误的幻灯片。

当我像这样使用它时，它的行为正常：

`$(".scrollable").scrollable({}).navigator();`

…但是一旦我启用“循环”模式（允许从最后一张幻灯片循环回到第一张幻灯片）：

`$(".scrollable").scrollable({ circular: true }).navigator();`

在页面加载时，*最后*一项是*第*一个显示，即使第 1 项在导航**器中**突出显示。如果您浏览图像，当您到达最后一个图像时，它会再次显示，并且您只会在*第二个*循环开始时看到实际的第一张图像。

有什么建议么？

为了完整起见，这是我的 HTML：

```
<div class="column two-thirds scrollable" id="scrollable">

<a class="prev browse left">Previous</a>

<div class="items">
        <div><img src="1.jpg" alt="" /></div>
        <div><img src="2.jpg" alt="" /></div>
        <div><img src="3.jpg" alt="" /></div>
        <div><img src="4.jpg" alt="" /></div>
</div>

<a class="next browse right">Next</a>

<div class="naviWrapper">
 <div class="navi"></div>
</div>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T22:10:38.967

这是指向同一问题的链接，建议您将`<img>`标签替换`<div>`为具有背景图像的标签。 [https://github.com/jquerytools/jquerytools/issues/47](https://github.com/jquerytools/jquerytools/issues/47)

我不能这样做，因为我的一些图像有图像映射。但是，我所有的图像都有相同的尺寸，所以我输入了图像尺寸，即

```
<img width=730 height=360 alt="first image" src="/images/my-image.jpg" /> 
```

这似乎已经解决了。

# jquery - $.each 不适用于 JavaScriptSerialized 字符串数组

> ID：12393419
> 
> 赞同：0
> 
> 时间：2012-09-12T17:25:49.853
> 
> 标签：jquery, arrays, string, each, javascriptserializer

尝试使用 WebMethods 用 sql 结果填充选择。

我可以获取和传递数据，但我注意到格式是 [["",""],["",""]] 而不是 [{"",""},{"","" }]。

当我使用 $.each 时，我得到单个字符作为选择的选项，输出中的每个字符，包括 JSON 分隔符。

**VB**

```
Dim MArray()() As String = New String(sqlDataset.Tables(0).Rows.Count)() {}
Dim i As Integer = 0

For Each rs As DataRow In sqlDataset.Tables(0).Rows
    MArray(i) = New String() {rs("suppliername").ToString(), rs("supplierid").ToString()}
    i = i + 1
Next

Dim js As JavaScriptSerializer = New JavaScriptSerializer()
Dim sJSON As String = js.Serialize(MArray)
Return sJSON 
```

**jQuery**

```
$(document).ready(function () {

$.ajax({
    type: "POST",
    url: "SupplierAdmin.aspx/PopulateSupplierSelectDropDownList",
    data: "{}",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (msg) {
        $("#supplierSelect").empty();
        $.each(msg.d, function(name, value) {
                $('#supplierSelect').append($('<option>').text(name).attr('value', value));
            });
    }
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:32:26.200

而不是 .each 循环，请尝试：

```
for(var i=0; i < msg.d.length; i++) {
  $('#supplierSelect').append($('<option>').text(msg.d[i].name).attr('value', msg.d[i].value));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T22:57:38.337

同样的事情也可以使用 $.each 函数来完成

```
$.each(msg.d , function(i){
  $('#supplierSelect').append($('<option>').text(msg.d[i].name).attr('value', msg.d[i].value));
} 
```

# asp.net-mvc-3 - 负载平衡简单的 MVC3 应用程序

> ID：12393424
> 
> 赞同：1
> 
> 时间：2012-09-12T17:25:58.733
> 
> 标签：asp.net-mvc-3, load-balancing

我在 .NET 4.0 框架中有一个简单的 MVC3 应用程序，它不使用会话。它使用 Windows 集成（AD 组）进行身份验证。它部署在 2 台服务器上（Windows 2003 和 IIS 6）。为了让 MVC3 在 IIS 6 下工作，我有一个解决方法，其中我添加了一个通配符映射。当我直接访问它们时，该应用程序在两台机器上都可以正常工作。

我想使用一个硬件负载均衡器，这样我就可以在两个服务器之间无缝地轮换。而且由于我的应用程序没有任何会话，这应该相当容易（我希望）。我想做的是确保应用程序在 LB 将请求发送到该应用程序之前在服务器上运行。它可以像检查该应用程序中是否存在keepalive.htm 文件一样简单。由于这个特定应用程序的用户数量非常少，我不想使用非常复杂的解决方案。我尝试实施 keepalive 解决方案，但我不断收到 401 错误。即使我让每个人都可以读取文件并给它匿名访问（因此不需要身份验证），它仍然给我同样的错误。我有一种让 MVC3 为 IIS 6 工作的解决方法正在妨碍我的感觉。

关于如何对简单的 MVC3 应用程序进行负载平衡以便 Loadbalancer 可以在转发请求之前检查应用程序是否启动的任何想法？

谢谢您的帮助。

# mono - 在带有 MonoDevelop 的 OSX 上，从终端/命令行运行 NUnit 测试

> ID：12393425
> 
> 赞同：9
> 
> 时间：2012-09-12T17:26:00.367
> 
> 标签：mono, nunit, monodevelop

鉴于我`TryTesting`在 OSX 上创建了一个名为 MonoDevelop(MD) (3.0.4.6) 的 C# NUnit 测试库，我应该如何从终端/命令行运行这些测试（以便我可以将它们添加到自动构建中）？

我知道一般公式是：

```
nunit-console .../TryTesting/bin/Debug/TryTesting.dll 
```

或者

```
mono nunit-console.exe .../TryTesting/bin/Debug/TryTesting.dll 
```

但是，鉴于安装 MonoDevelop 时创建的环境，仅此一项是不够的。

我得到以下输出和错误：

```
NUnit version 2.4.8
Copyright (C) 2002-2007 Charlie Poole.
Copyright (C) 2002-2004 James W. Newkirk, Michael C. Two, Alexei A. Vorontsov.
Copyright (C) 2000-2002 Philip Craig.
All Rights Reserved.

Runtime Environment - 
OS Version: Unix 12.1.0.0
CLR Version: 2.0.50727.1433 ( 2.10.9 (tarball Mon May  7 20:25:51 EDT 2012) )

Missing method .ctor in assembly /private/var/folders/r6/wqmfjz8142z0z9vcg_7k9y140000gn/T/nunit20/ShadowCopyCache/3688_634830482326369170/Tests/assembly/shadow/52c5f76b/6c545c94_3e91abff_00000001/TryTesting.dll, type NUnit.Framework.TestFixtureAttribute
Can't find custom attr constructor image: /private/var/folders/r6/wqmfjz8142z0z9vcg_7k9y140000gn/T/nunit20/ShadowCopyCache/3688_634830482326369170/Tests/assembly/shadow/52c5f76b/6c545c94_3e91abff_00000001/TryTesting.dll mtoken: 0x0a000003
Could not load file or assembly 'nunit.framework, Version=2.6.0.12051, Culture=neutral, PublicKeyToken=96d09a1eb7f44a77' or one of its dependencies. 
```

经过实验，这个问题似乎是由 /usr/bin 和 MD 之间的 nunit 版本不匹配引起的。如果我下载最新的 NUnit 二进制文件并将我的项目中的 nunit.framework 引用替换为指向下载的副本，那么我可以使用下载的 nunit-console.exe 让它运行。

所以，也许问题是：

*   我应该删除对 nunit.framework 的自动引用并在我的源代码树中包含我自己的 NUnit 分布吗？
*   或者，MonoDevelop 是否有我应该调用的匹配版本的 nunit-console？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-13T16:53:30.923

经过在多个环境中运行单元测试的丰富经验后，我建议不要引用`nunit.framework`MonoDevelop（或 Xamarin Studio）附带的。如果您只在该 IDE 中运行测试，那很好。但是，如果您从命令行、不同的环境或构建框运行测试，那么您应该可以控制您的 NUnit 版本。

因此，如果您从 New Project 对话框创建一个新的 NUnit 库，您应该删除提供的`nunit.framework`引用并将其替换为您自己的。

另请注意，NUnit 测试运行程序对程序集版本非常敏感。因此，您应该将所有 NUnit 二进制文件放在源代码树中。（NUnit-2.6.1/bin 大小为 7 MB）

还值得注意的是，还有其他方法可以运行测试，例如[NAnt `<nunit2>`Task](http://nant.sourceforge.net/release/latest/help/tasks/nunit2.html)，它将对 NUnit 版本敏感。

因此，将 NUnit 2.6.1* 下载到我的解决方案目录下的 packages 目录后，命令将是：

```
mono packages/NUnit-2.6.1/bin/nunit-console.exe TryTesting/bin/Debug/TryTesting.dll 
```

*脚注：由于 NotImplementedException，我无法使用 NUnit 2.6.2。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-04T06:58:42.593

我也遇到这个问题。然后我升级了 NUnit Dll 的版本。最后，我可以使用它了。请参考以下链接： [http ://nunit.org/?p=download](http://nunit.org/?p=download)

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-12T12:15:22.047

我有一个类似的问题。

我删除了显式引用（.dll）并通过 Nuget 包安装了 NUnit。

为我工作。

# tsql - 为什么 SQL JOIN 允许重复但 IN 不允许

> ID：12393427
> 
> 赞同：0
> 
> 时间：2012-09-12T17:26:02.860
> 
> 标签：tsql, sybase

示例场景：

TABLE_A 包含一个名为 ID 的列，并且还包含重复的行。还有一个名为 ID_TABLE 的表，其中包含 ID。假设 ID_TABLE 中没有重复项 -

如果我做：

```
SELECT * FROM TABLE_A
INNER JOIN ID_TABLE ON ID_TABLE.ID = TABLE_A.ID 
```

结果集中会有重复。但是，如果我这样做：

```
SELECT * FROM TABLE_A
WHERE TABLE_A.ID IN (SELECT ID_TABLE.ID FROM ID_TABLE) 
```

结果集中不会有任何重复。

有谁知道为什么该`JOIN`子句允许重复而该`IN`子句不允许？我原以为他们做了同样的事情。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T17:49:22.257

这并不是说它允许重复。通过连接这两个表，您将从表 1 和表 2 创建一个产品，因此如果 TABLE_A 有两条 ID=1 的记录，而 ID_Table 有 1 条记录，则生成的产品是两条记录。即使在 IN 子句中多次列出该值，使用 IN 也不会导致记录相乘，因为您只会获得与 IN 子句中的值匹配的唯一记录。

# html - 在从 html4 网络应用程序迁移到 html5 之前，我们需要记住什么？

> ID：12393428
> 
> 赞同：0
> 
> 时间：2012-09-12T17:26:02.923
> 
> 标签：html, web-applications

我是一个相对较新的网络应用程序程序员。

当 HTML 5 成为（比如说）新的 HTML 标准时，我已经完成了不同的网络应用程序。

所以我想知道将其中一些应用程序迁移到 HTML 5 是否是个好主意。

顺便说一句，我从未在任何 Web 应用程序中使用过 HTML 5。

在进行迁移或启动新的 Web 应用程序之前，我必须记住哪些事项？

我的意思是：浏览器、框架、javascript 库等。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:28:01.363

HTML5 与以前的 HTML 版本完全向后兼容。有些东西已弃用或过时，但浏览器仍会接受它们，直到您可以将它们更改为更新的东西。

要开始使用 HTML5，只需将您的文档类型替换为`<!DOCTYPE html>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T17:38:08.520

在我看来，进入 HTML5 世界的最佳方式是使用可靠的库/框架，以确保您的代码在旧浏览器上[优雅地降级。](http://en.wikipedia.org/wiki/Fault-tolerant_system)

[HTML5 Rocks](http://www.html5rocks.com)是一个很酷的站点，可以获取一些技巧和提示。

我是一位经验丰富的[GWT](https://developers.google.com/web-toolkit/overview)开发人员（我向 Java 开发人员推荐了它），但我认为“下一件大事”可能来自[Dart](http://www.dartlang.org/)。

在 Javascript 世界中，没有什么比[jQuery](http://jquery.com/)库更好的了。当然，在我看来=）

# .net - 文件和文件夹同步应用程序 .net C#

> ID：12393436
> 
> 赞同：0
> 
> 时间：2012-09-12T17:26:50.097
> 
> 标签：.net, c#-4.0, windows-services

我正在开发一个基于 .Net 4.0 C# Windows 服务（类似 Dropbox）的应用程序，该应用程序连续运行并监视特定文件夹的内容和更新，并通知数据库的更改，类似的客户端应用程序也将安装在其他机器上它将对其主机中的同一文件夹执行适当的更新。我已经开发了具有多个线程和递归调用的整个应用程序，它们将继续执行并通知更改。应用程序在 3 小时后运行良好 3 小时，它引发堆栈溢出异常并崩溃。

更具体地说，我有 9 个线程，其中一些线程执行以下工作

1) threadFSWToDB - 将任何文件更改（添加、重命名、删除）写入 DB。

2) threadDBToUploadLogList - 在服务器上创建一个文件夹，其他客户端将从那里下载文件。

3) threadDoUpload - 将文件上传到网络服务器。

4) threadDBToDownloadList - 将通过轮询数据库上传要执行的更改列表。

我的问题是，这是可行的解决方案还是我需要重新考虑整个应用程序的设计。如果是，那么执行上述任务（顺序或并行）的最佳方式是什么。什么是执行像这样的永无止境和连续的任务的最基本方法。

我的代码如下，我不知道要放多少才能把事情弄清楚

```
Thread threadFSWToDB = new Thread(() => WriteFSWLogListToDatabase());

private static void WriteFSWLogListToDatabase()
    {
        try
        {
            using (var objEntities = new ShareBoxEntities()) // EF class instantiation
            {
// this DB class constructor call later on throws stack overflow exception not necessarily from this method
                var objConnector = new DBConnector(objEntities); 
                var objConnector = new DBConnector();
                List<string> directories = objConnector.GetAllSharedDirectoryRelativePaths();
                if (FSWLogList != null && FSWLogList.Count() > 0)
                {
                    for (int i = 0; i <= FSWLogList.Count - 1; i++)
                    {

            // some file changes being written to Database
                            FSWLogList[i].SavedInDB = true;
                        }
                    }
                }
            }
        }
        catch (Exception ex)
        {
    // write to event log and mail to administrator
        }
        finally
        {
            if (FSWLogList != null && FSWLogList.Count > 0)
            {
                FSWLogList.RemoveAll(item => item.SavedInDB == true);
            }
            Thread.Sleep(5000);
            WriteFSWLogListToDatabase();
        }
    } 
```

如果递归是主要原因，那么为什么应用程序在一两天内运行良好，然后开始表现出上述行为

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:41:13.000

不知道细节很难说，但是堆栈溢出错误通常意味着您对递归的深入了解

简单的例子

```
public void ThrowStackOverflow()
{
    ThrowStackOverflow()
} 
```

总是会抛出堆栈溢出，因为递归没有出口。调用堆栈越来越深，直到没有空间。

我怀疑您的程序存在类似的自我参照主义问题。

如果你有一个递归调用，在结束之前可能会变得太深，你就有堆栈溢出的风险。

或者，如果您的线程在没有终止的情况下创建自己，或者即使您只是继续创建新线程而没有清理它们，那么某些东西将不可避免地出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:04:48.290

感谢大家宝贵的时间。

我找到了解决我的问题的方法，递归函数调用已被替换为**while(true) //loop** 仍在各自的线程上被调用 这确保了我的监视文件夹的函数在 a try and catch 确保即使在异常发生后它也会继续。我在使用**while(true)**时遇到的问题是函数中使用的任何资源都可用于在单独线程上运行的其他函数，这是通过在特定时期调用 thread.sleep 来处理的。它可能不是针对类似问题的通用解决方案，但它符合我的要求，因此我希望其他人在类似情况下实施所述解决方案之前要小心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T21:16:40.350

对我来说听起来你很高兴。对于数据库，您有 BeginExecuteNonQuery 用于没有线程的异步数据库。要从数据库获取通知，您有查询通知。对于文件，您有 FileSystemWatcher。我只会使用 BackGroundWorker 来上传和下载文件。如果您要上传/下载到一台服务器，那么并行执行文件将无济于事，因为您很可能受到带宽的限制。

# bash - 简单的 bash 脚本按名称计算正在运行的进程

> ID：12393437
> 
> 赞同：5
> 
> 时间：2012-09-12T17:26:51.843
> 
> 标签：bash, ssh, cron

我正在研究一个小型 bash 脚本，它计算具有特定名称的脚本运行的频率。

```
ps -ef | grep -v grep | grep scrape_data.php | wc -l 
```

是我使用的代码，通过 ssh 它输出 scrape_data.php 运行的次数。例如，当前输出为 3。所以这很好用。

现在我正在尝试制作一个小脚本，当计数小于 1 时它会做**一些事情。**

```
#!/bin/sh

if [ ps -ef | grep -v grep | grep scrape_data.php | wc -l ] -lt 1; then
        exit 0

 #HERE PUT CODE TO START NEW PROCESS

else

        exit 0
fi 
```

上面的脚本是我到目前为止所拥有的，但它不起作用。我收到此错误：

```
[root@s1 crons]# ./check_data.sh
./check_data.sh: line 4: [: missing `]'
wc: invalid option -- e 
```

我在 if 语句中做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T17:30:32.037

您的测试语法不正确，`lt`应该在测试括号内：

```
if [ $(ps -ef | grep -v grep | grep scrape_data.php | wc -l) -lt 1 ]; then

  echo launch

else
  echo no launch

  exit 0
fi 
```

或者您可以测试的返回值`pgrep`：

```
pgrep scrape_data.php &> /dev/null

if [ $? ]; then
  echo no launch
fi 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T17:38:06.187

如果您使用`Bash`then drop `[`and`-lt`并`((`用于算术比较。

`ps`提供`-C`开关，它接受要查找的进程名称。
`grep -v`诡计只是黑客。

```
#!/usr/bin/env bash

proc="scrape_data.php"
limit=1

numproc="$(ps hf -opid,cmd -C "$proc" | awk '$2 !~ /^[|\\]/ { ++n } END { print n }')"

if (( numproc < limit ))
then
    # code when less than 'limit' processes run
    printf "running processes: '%d' less than limit: '%d'.\n" "$numproc" "$limit"
else
    # code when more than 'limit' processes run
    printf "running processes: '%d' more than limit: '%d'.\n" "$numproc" "$limit"
fi 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T17:38:15.920

不需要计算行数。只需检查以下的返回值`grep`：

```
if ! ps -ef | grep -q '[s]crape_data.php' ; then 
    ...
fi 
```

[s] 技巧避免了`grep -v grep`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-08T22:37:18.867

虽然投票率最高的答案确实有效，但我有一个用于刮板的解决方案，它对我有用。

```
<?php

/**
 *  Go_Get.php
 *  -----------------------------------------
 *  @author Thomas Kroll
 *  @copyright Creative Commons share alike.
 *  
 *  @synopsis:
 *      This is the main script that calls the grabber.php
 *      script that actually handles the scraping of 
 *      the RSI website for potential members
 *
 *  @usage:  php go_get.php
 **/

    ini_set('max_execution_time', 300); //300 seconds = 5 minutes

    // script execution timing
    $start = microtime(true);

    // how many scrapers to run
    $iter = 100;

    /**
     * workload.txt -- next record to start with
     * workload-end.txt -- where to stop at/after
     **/

    $s=(float)file_get_contents('./workload.txt');
    $e=(float)file_get_contents('./workload-end.txt');

    // if $s >= $e exit script otherwise continue
    echo ($s>=$e)?exit("Work is done...exiting".PHP_EOL):("Work is not yet done...continuing".PHP_EOL);

    echo ("Starting Grabbers: ".PHP_EOL);

    $j=0;  //gotta start somewhere LOL
    while($j<$iter)
    {
        $j++;
        echo ($j %20!= 0?$j." ":$j.PHP_EOL);

        // start actual scraping script--output to null
        // each 'grabber' goes and gets 36 iterations (0-9/a-z)
        exec('bash -c "exec nohup setsid php grabber.php '.$s.' > /dev/null 2>&1 &"');

        // increment the workload counter by 36 characters              
        $s+=36;
    }
    echo PHP_EOL;
    $end = microtime(true);
    $total = $end - $start;
    print "Script Execution Time: ".$total.PHP_EOL;

    file_put_contents('./workload.txt',$s);

    // don't exit script just yet...
    echo "Waiting for processes to stop...";

    // get number of php scrapers running
    exec ("pgrep 'php'",$pids);
    echo "Current number of processes:".PHP_EOL;

    // loop while num of pids is greater than 10
    // if less than 10, go ahead and respawn self
    // and then exit.
    while(count($pids)>10)
    {
        sleep(2);
        unset($pids);
        $pids=array();
        exec("pgrep 'php'",$pids);
        echo (count($pids) %15 !=0 ?count($pids)." ":count($pids).PHP_EOL);
    }

    //execute self before exiting
    exec('bash -c "exec nohup setsid php go_get.php >/dev/null 2>&1 &"');
    exit();
?> 
```

现在虽然这看起来有点矫枉过正，但我​​已经在使用 PHP 来抓取数据（就像 OP 中的 php 脚本一样），那么为什么不使用 PHP 作为控制脚本呢？

基本上，你会这样调用脚本：

`php go_get.php`

然后等待脚本的第一次迭代完成。之后，它在后台运行，您可以查看是否使用命令行中的 pid 计数，或类似的工具，如`htop`.

这并不迷人，但它确实有效。:)

# php - 如何创建从多个表中检索数据的查询，并且表之间没有关系

> ID：12393439
> 
> 赞同：0
> 
> 时间：2012-09-12T17:27:06.707
> 
> 标签：php, mysql

如标题中所述。

如何创建从多个表中检索数据的查询，并且表之间没有关系。

**示例：**
我有两个如下表：

```
Table (Categories)          Table (Pic_files)
-------------------  |  ---------------------- 
 Cat_id | cat_name   |   pic_id  | pic_title 
-------------------  |  ----------------------
   1    |  Animals   |      1    | Dog_Walks
-------------------  |  ----------------------
   2    |  Nature    |      2    | red_flower
------------------   |  ----------------------
                     |      3    | blue_flower
                     |  ----------------------
 so on  |  so on     |    so on  |   so on
------------------   |  ---------------------- 
```

我想要的是接下来的两个查询组合在一个查询中

**查询一：**

```
("SELECT cat_name FROM Categories WHERE Cat_id='2'") 
```

**查询 2：**

```
("SELECT pic_title FROM Pic_files WHERE Cat_id='2' LIMIT 5 ") 
```

如果我想打印出特定表的数据，我会做下一个

```
foreach($data as $pic){
  echo $pic['pic_title']; // to get the data from Categories table
} 
```

如果那也

```
foreach($data as $cat){
  echo $cat['cat_name']; // to get the data from Pic_files table
} 
```

**简而言之，我想在一个查询中组合 2 个或多个查询，并按列名处理它们，不要忘记所有表与某些表没有任何关系**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:30:03.313

您可以使用交叉连接来做到这一点：

```
select *
from (SELECT cat_name FROM Categories WHERE Cat_id='2') cat cross join
     (SELECT pic_title FROM Pic_files WHERE Cat_id='2' LIMIT 5) t 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T18:27:31.347

我认为人们在这里为您提供答案而苦苦挣扎的是了解您在寻找什么。

肯定有 PHP 库允许您通过一次调用数据库来执行多个 SQL 查询。以 mysqli_multi_query 为例。但是，听起来这不是您要寻找的。似乎您想找到一种神奇的方法，将不相关的表上的多个查询作为单个查询执行，然后以某种方式神奇地能够独立地获取数据集。如果您要在不相关的表上执行笛卡尔连接等操作，您的结果集中的结果将比您正在寻找的结果大几个数量级，从而在数据库和应用程序上引入性能问题。

听起来您想减少查询数量以减少查询数量，这听起来像是一种糟糕的设计方法 IMO。当然，您可以使用连接最小化对相关表的查询。但是尝试以某种方式连接不相关的表可能会给您的系统带来更多的复杂性和性能问题，而不是您想要的。减少对数据库的查询并不是数据库性能优化的全部。您需要确保为查询正确索引表。您需要确保您存储的数据具有适当的数据类型和大小。您需要确保您有正确分配的内存以将索引保存在内存中。您需要确保拥有正确配置的服务器，以满足您的内存、磁盘容量和磁盘 I/O 要求。

# linux - 将文件夹内容递归移动到嵌套文件夹中

> ID：12393441
> 
> 赞同：0
> 
> 时间：2012-09-12T17:27:17.563
> 
> 标签：linux, bash, unix, gnu-coreutils

我没想到这会是个问题。因为我认为 coreutils 支持这些东西，然后 cp ls 和 rm 的肮脏组合就足够了。

但是，事实并非如此，如果您现在向我解释为什么我的方法失败了，以及我应该如何以适当的方式做到这一点，我将不胜感激。

*代码*

```
function CheckoutFolder {
    local dir=$1

    mkdir "$dir/.CheckoutFolderTmp"
    (
        cd "$dir" \
        && cp -R $(ls -Q -A "$dir" --ignore=".CheckoutFolderTmp") "$dir/.CheckoutFolderTmp" \
        && rm -Rf  $(ls -Q -A "$dir" --ignore=".CheckoutFolderTmp")
    )
    mv "$dir/.CheckoutFolderTmp" "$dir/src"
    mkdir -p "$dir/"{build,log}
} 
```

*样本输出*

```
++ CheckoutFolder /home/tobias/Develop/src/thelegacy/RCMeta
++ local dir=/home/tobias/Develop/src/thelegacy/RCMeta
++ mkdir /home/tobias/Develop/src/thelegacy/RCMeta/.CheckoutFolderTmp
++ cd /home/tobias/Develop/src/thelegacy/RCMeta
+++ ls -Q -A /home/tobias/Develop/src/thelegacy/RCMeta --ignore=.CheckoutFolderTmp
++ cp -R '"build"' '"buildmythli.sh"' '"CMakeLists.txt"' '".directory"' '".libbuildmythli.sh"' '"log"' '"RCMeta"' '"RCMetaTest"' '"src"' /home/tobias/Develop/src/thelegacy/RC
cp: cannot stat `"build"': No such file or directory
cp: cannot stat `"buildmythli.sh"': No such file or directory
cp: cannot stat `"CMakeLists.txt"': No such file or directory
cp: cannot stat `".directory"': No such file or directory
cp: cannot stat `".libbuildmythli.sh"': No such file or directory
cp: cannot stat `"log"': No such file or directory
cp: cannot stat `"RCMeta"': No such file or directory
cp: cannot stat `"RCMetaTest"': No such file or directory
cp: cannot stat `"src"': No such file or directory
++ mv /home/tobias/Develop/src/thelegacy/RCMeta/.CheckoutFolderTmp /home/tobias/Develop/src/thelegacy/RCMeta/src
++ mkdir -p /home/tobias/Develop/src/thelegacy/RCMeta/build /home/tobias/Develop/src/thelegacy/RCMeta/log
++ return 0 
```

神话

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T17:52:29.440

正如 Les 所说，`ls -Q`在文件名周围加上引号，这些引号在参数中传递给`cp`and `rm`。（使用引号来引用和分隔参数是 Bash 命令行的一个方面，当您实际键入命令时；当您将一个命令的输出传递给另一个命令时，它不起作用。）一般来说，解析的输出`ls`通常不是一个好主意。

这是另一种方法：

```
function CheckoutFolder() (
    cd "$1"

    mkdir .CheckoutFolderTmp

    find -mindepth 1 -maxdepth 1 -not -name .CheckoutFolderTmp \
         -exec mv {} .CheckoutFolderTmp/{} \;

    mv .CheckoutFolderTmp src

    mkdir build log
) 
```

（请注意，我用括号`(...)`而不是花括号包围了函数体`{...}`。这会导致整个函数在子shell中运行。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T17:33:23.163

$(ls ...) 命令在名称周围加上不需要的引号。考虑改用 xargs 和反引号。例如...

```
(cd "$dir" && cp -R `ls -Q -A "$dir" --ignore=".CheckoutFolderTmp"` "$dir/.CheckoutFolderTmp" && ls -Q -A "$dir" --ignore=".CheckoutFolderTmp" | xargs rm -Rf  ) 
```

cp 输出不太友好，但它确实提供了您需要的信息。

```
cp:  cannot stat '"build"': No such file or directory 
```

跳到最后的陈述“没有这样的文件或目录”。“cannot stat” 很神秘，但这意味着“cp”使用“stat”来获取有关它试图复制的文件或目录的一些信息。“统计”失败。它在名为“build”的文件（或目录）上出现“没有这样的文件或目录”的 errno 失败。这是因为，cp 内部的实际参数是“build”（注意）引号），而您想要的文件名是 build（注意没有引号）。

使用 -Q 调用 $(ls... ) 以添加引号（大概是为了处理带有空格和逗号以及其他违规字符的文件名）。但是 $(ls...) 已经为您添加了引号。如果您使用 -0，xargs 也可以处理时髦的文件名。

# jquery - 如何将循环数据推送到 js 数组多维中

> ID：12393443
> 
> 赞同：1
> 
> 时间：2012-09-12T17:27:22.393
> 
> 标签：jquery, multidimensional-array, push

我想将循环数据推送到格式看起来像的数组`Array([2001,6],[2002,7],[2003,5])`

**我来自 JSON 的数据：**

```
myDatas = new Array([]);

                $.each(data, function(d) {  
                    var w =parseInt(data[d].datetime_end) ;
                    var c =parseInt(data[d].bor);

                    }); 
```

我想推`w`到`c`哪个`myDatas`样子...请高手帮帮我...

# jquery - jQueryUI autoComplete 返回空列表

> ID：12393449
> 
> 赞同：3
> 
> 时间：2012-09-12T17:27:45.410
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, jquery-ui, autocomplete

在我的 asp.net mvc3 应用程序中，我为我的搜索框添加了 autoComplete。当我对其进行测试时，该操作返回了 3 个结果。你可以看到一个列表出现了，然而，这是一个空列表，你只看到3个<li></li>，并且li标签之间什么都没有。

我很确定，行动很好，因为，它确实返回了 3 个结果。我可以通过查看 3 个空的 <li> 标签来验证这一点。怎么添加名字<li>apple</li>

```
 $("#searchbox").autocomplete({
            source:"/Home/SearchIngredients",
            minLength: 2

        });

    public virtual JsonResult SearchIngredients(string term)
    {
        var ingredients = _smoothieService.GetIngredients(term);

        var data = ingredients.Select(x => new {Id = x.NDB_No, Value = x.Name}).Take(25).ToArray();
        return Json(data, JsonRequestBehavior.AllowGet);
    } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-12T17:38:20.887

像这样的东西：

```
$('#search').autocomplete({
    source: function (request, response) {
        $.ajax({
            url: "/Home/SearchIngredients",
            dataType: 'json',
            data: request,
            success: function (data) {
                response(data.map(function (value) {
                    return {
                        'label': '<li>' + value.Id + '</li>',
                        'value': value.Value
                    };  
                }));
            }   
        }); 
    },  
    minLength: 2
}) 
```

# php - 在 codeigniter 中集成正常的 php 会话

> ID：12393456
> 
> 赞同：0
> 
> 时间：2012-09-12T17:28:12.377
> 
> 标签：php, facebook, codeigniter, session-cookies, codeigniter-2

我一直在 codeigniter 中体验会话，但由于有时我需要在不使用控制器的情况下注册会话，所以我遇到了一些失败。例如，当 facebook 用户使用 FACEBOOK SDK 在我的应用程序中登录时，此插件使用正常的 php 会话，因此当我尝试在 codeigniter 控制器中获取它们时我失败了；另一方面，当我在控制器中注册会话时，我需要在其他控制器中调用相同的会话或注册基本控制器。终止 codeIgniter 会话不会删除 SDK 会话和 cookie。那么如何在 CodeIgniter 中使用正常会话，以免丢失 SDK 功能。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T19:08:02.933

已经可以替换 codeigniter 的会话，它称为 Native Sessions 类，您只需将文件放在它们的位置，一切都应该按预期工作。

[https://github.com/appleboy/CodeIgniter-Native-Session](https://github.com/appleboy/CodeIgniter-Native-Session)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:17:54.020

正是出于这个原因，facebook 包装器就是这样编写的。在这个包装器中管理与基类一起使用或由基类使用的数据。

在构造函数中将 CI 超全局分配给 facebook 类之后

```
$this->ci =& get_instance(); 
```

替换所有实例

```
$_SESSION 
```

和相关信息，因为它以前会进入 $_SESSION

```
//Add data to the session
$this->ci->session->set_userdata();

//Remove data from the session
$this->ci->session->unset_userdata(); 
```

# c# - 如何检查 dll 是否为 .net 库“该模块应包含程序集清单。”

> ID：12393457
> 
> 赞同：2
> 
> 时间：2012-09-12T17:28:14.950
> 
> 标签：c#, .net, reflection

如何验证 dll 是否是用 .net 编写的？我正在使用如下代码：

```
Assembly assembly = null;
try
{    
   foreach (string fileName in Directory.GetFiles(Environment.CurrentDirectory.ToString(), "*.dll", SearchOption.TopDirectoryOnly))
   {
     try
     {
        assembly = Assembly.LoadFrom(fileName);
        Console.WriteLine(fileName);
     }
     catch (Exception ex)
     {
       ...               
     }
     finally
     {
       ...
     }
    }              
}
catch (ReflectionTypeLoadException ex)
{
  ..              
} 
```

当我要加载`assembly = Assembly.LoadFrom(fileName)`非.net dll时，会出现异常：

> 无法加载文件或程序集“file:///...”或其依赖项之一。该模块应包含程序集清单。

我想在 if-else 子句中使用 verify。你能帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T18:05:49.697

您可以使用 .NET 引导程序 DLL 中的辅助函数。Mscoree.dll 导出[GetFileVersion()](http://msdn.microsoft.com/en-us/library/ms232525%28v=vs.100%29.aspx)，这是一个帮助程序，它返回程序集所需的 CLR 版本。当文件不是程序集并且不会引发异常时，该函数将失败。

它应该如下所示：

```
using System;
using System.Text;
using System.Runtime.InteropServices;

public class Utils {
    public static bool IsNetAssembly(string path) {
        var sb = new StringBuilder(256);
        int written;
        var hr = GetFileVersion(path, sb, sb.Capacity, out written);
        return hr == 0;
    }

    [DllImport("mscoree.dll", CharSet = CharSet.Unicode)]
    private static extern int GetFileVersion(string path, StringBuilder buffer, int buflen, out int written);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T17:32:48.290

您可以执行以下技巧：

```
try {
   Assembly assem = Assembly.LoadFile(filePath);
}
catch (BadImageFormatException e) {
      //NOT .NET ASSEMBLY
} 
```

实际上，如果在程序集加载时收到[BadImageFormatException](http://msdn.microsoft.com/en-us/library/system.badimageformatexception.aspx)，这意味着程序集未以 CLR 程序集方式格式化。

海因表 MSDN 链接：

> 动态链接库 (DLL) 或可执行程序的文件映像无效时引发的异常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T17:48:41.470

如果您不需要在当前域中加载程序集，我建议使用：

```
using System.Reflection;

  public class AssemblyName_GetAssemblyName
{
   public static void Main()
   {
      // Replace the string "MyAssembly.exe" with the name of an assembly,
      // including a path if necessary. If you do not have another assembly
      // to use, you can use whatever name you give to this assembly.
      //
     try     
     {   
            AssemblyName myAssemblyName = AssemblyName.GetAssemblyName("MyAssembly.exe");
     }       
     catch (BadImageFormatException ex)       
     {       
       ...                      
     } 
   }
} 
```

在不抛出异常的情况下，最好的方法是解析 PE 的 OptionalImageFileHeader 并查看 CLR Header 的 DataDirectory。

目前我正在研究它，因为我有同样的问题..

# php - 如何验证此函数是 PHPUnit 中的字符串？

> ID：12393461
> 
> 赞同：0
> 
> 时间：2012-09-12T17:28:46.060
> 
> 标签：php, phpunit

这是我的原始 PHP 代码的代码：

```
public function outputText() {   
    $i = 1;   
    foreach($this->sorted_data as $this->data) {   
        echo "$i. ".$this->data[0]."<br/>";   
        $i++;  
    }  
} 
```

这是 PHPUnit 的代码：

```
public function testVerify() {
    $yn = new SortThisData();
    $yn->readFile("input.txt");
    $output = $yn->outputText();
    $this->assertTrue(is_string($output));

    //if(!is_string($yn->get()))
    //    return false;
    //$this->assertNotEmpty($yn->get());
    } 
```

该类在原始 PHP 文件中称为 SortThisData。当我使用 gettype() 时，它说它是空的。我正在尝试验证它是否是一个字符串，以便它可以传入 PHPUnit。有没有办法我可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T17:32:45.967

你正在寻找`[assertInternalType()](http://www.phpunit.de/manual/current/en/writing-tests-for-phpunit.html#writing-tests-for-phpunit.assertions.assertInternalType)`.

**更新：**我没有意识到您正在回显输出。您可能需要使用[输出缓冲](http://php.net/manual/en/book.outcontrol.php)来捕获文本。

```
public function testVerify() {
    $yn = new SortThisData();
    $yn->readFile("input.txt");

    // start output buffering and capture the output
    ob_start();
    $yn->outputText();
    $output = ob_get_clean();

    $this->assertInternalType('string', $output);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T00:23:43.130

对贝勒的回答没有异议。要回答这个问题，如所问，你所拥有的也足够好：

```
$this->assertTrue(is_string($output)); 
```

或者你可以这样做：

```
$this->assertEquals('string',gettype($output)); 
```

（后者的好处是，当它失败时，它也会告诉你 ; 的类型，`$output`只会`assertTrue`告诉你某事失败了。）

`assertInternalType()`正是这样做的，但仅在 PHPUnit 3.5 中引入，您仍然会发现 PHPUnit 3.4 在某些机器上使用。

# java - javaw在Swing上下文中的作用是什么？

> ID：12393462
> 
> 赞同：1
> 
> 时间：2012-09-12T17:28:53.547
> 
> 标签：java, swing

我创建了一个简单的swing程序，在其中创建了一个jframe，当我们关闭jframe时它关闭但cmd上没有提示，所以我们使用ctrl+c终止程序。但是当我使用javaw运行程序时& 关闭 jframe 提示出现在 cmd 上，不使用 ctrl+c。但我想知道它是如何运作的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T17:30:56.910

[`java`— Java 应用程序启动器](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html)：

> 该`javaw`命令与 java 相同，只是`javaw`没有关联的控制台窗口。`javaw`当您不想显示命令提示符窗口时使用。如果`javaw`启动失败，启动器会显示一个带有错误信息的窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T17:38:42.477

尝试为 JFrame[示例](http://www.exampledepot.com/egs/javax.swing/CloseExit.html)设置适当的关闭选项：

```
// Create a frame
JFrame frame = new JFrame();

// Get default close operation
int op = frame.getDefaultCloseOperation(); // HIDE_ON_CLOSE

// Set to exit on close
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
```

你也可以用你自己的函数覆盖 WindowListener 调用关闭操作，然后是 System.exit(0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T17:40:41.130

javaw.exe 专门用于 Windows 平台（w 代表 Windows）。如果我们使用 java.exe 启动 java 应用程序，则会有与之关联的控制台窗口 - 如果您关闭控制台应用程序也会关闭。javaw.exe 是 JVM 启动器，无需控制台即可在后台运行。

当您在 java 应用程序中关闭 jFrame 时，它​​不会退出应用程序 - 您应该捕获应用程序主窗口 (jFrame) 的窗口关闭事件并在需要清理后退出应用程序 - 此行为在 java.exe 和 javaw 中是相同的。可执行程序。当您使用 java.exe 启动应用程序时，控制台会显示应用程序状态，即使您关闭 jframe，您也可以确定该应用程序没有退出。在 javaw.exe 的情况下，没有控制台 - 如果关闭 GUI 应用程序的所有窗口，可能会误认为应用程序已退出 - 而应用程序在后台作为 javaw.exe 进程运行。为了通知用户（开发人员），在 javaw.exe 的情况下会有提示

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T17:32:04.620

它特定于 Windows。Windows 上有两种类型的应用程序：控制台和非控制台。`javaw`是非控制台版本，`java`这就是您看不到控制台出现的原因。如果您的应用程序是图形应用程序，那么您应该使用`javaw`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T17:34:21.530

用 javaw 启动程序不会显示 java 控制台，而用 java 启动会显示 java 控制台。

但是，我建议您的程序应该很好地处理应用程序退出：

```
// option 1
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

// option 2
frame.setDefaultCloseOperation(DO_NOTHING_ON_CLOSE);
frame.addWindowListener(new WindowAdapter() {
  public void windowClosing(WindowEvent e) {
    // do something here and then
    System.exit(0);
  }
}); 
```

# r - 层次聚类大稀疏距离矩阵R

> ID：12393466
> 
> 赞同：3
> 
> 时间：2012-09-12T17:29:07.493
> 
> 标签：r, distance, sparse-matrix, bigdata, hierarchical-clustering

我试图在非常大的距离上执行 fastclust，但遇到了问题。

我有一个非常大的 csv 文件（大约 9100 万行，所以 for 循环在 R 中花费的时间太长）关键字（大约 50,000 个唯一关键字）之间的相似性，当我读入 data.frame 时看起来像：

```
> df   
kwd1 kwd2 similarity  
a  b  1  
b  a  1  
c  a  2  
a  c  2 
```

这是一个稀疏列表，我可以使用 sparseMatrix() 将其转换为稀疏矩阵：

```
> myMatrix 
  a b c  
a . . .
b 1 . .
c 2 . . 
```

但是，当我尝试使用 as.dist() 将其转换为 dist 对象时，我收到来自 R 的“问题太大”的错误。我已阅读此处的其他 dist 问题，但其他人建议的代码不适用于我上面的示例数据集。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T02:47:25.513

虽然首先使用稀疏矩阵似乎是个好主意，但我认为这种方法存在一些问题：您丢失的距离将被编码为`0`s，而不是`NA`s（请参阅[创建（和访问）稀疏矩阵带有 NA 默认条目](https://stackoverflow.com/questions/1274171/creating-and-accessing-a-sparse-matrix-in-r)）。如您所知，在聚类时，零差异与缺失差异具有完全不同的含义......

所以无论如何，你需要的是一个 dist 对象，其中有很多`NA`s 来表示你缺少的差异。不幸的是，您的问题太大以至于需要太多内存：

```
d <- dist(x = rep(NA_integer_, 50000))
# Error: cannot allocate vector of size 9.3 Gb 
```

这只是处理输入......即使使用具有大量内存的 64 位机器，我也不确定聚类算法本身不会阻塞或无限期运行。

你应该考虑把你的问题分解成更小的部分。

# c# - 一致地生成对象的哈希

> ID：12393467
> 
> 赞同：20
> 
> 时间：2012-09-12T17:29:11.377
> 
> 标签：c#, .net, hash

我正在尝试获取对象的哈希（md5 或 sha）。

我已经实现了这个： [http ://alexmg.com/post/2009/04/16/Compute-any-hash-for-any-object-in-C.aspx](http://alexmg.com/post/2009/04/16/Compute-any-hash-for-any-object-in-C.aspx)

我正在使用 nHibernate 从数据库中检索我的 POCO。
在此运行 GetHash 时，每次从数据库中选择和补充它时，它都是不同的。我想这是意料之中的，因为底层代理会改变。

反正，

有没有办法每次都一致地获取对象上所有属性的哈希值？

我玩弄过在 this.GetType().GetProperties 上使用 StringBuilder 并在其上创建哈希的想法，但这似乎效率低下？

作为旁注，这是为了将这些实体从一个数据库 (RDBMS) 更改跟踪到 NoSQL 存储（比较哈希值以查看对象是否在 rdbms 和 nosql 之间更改）

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-13T03:48:10.800

如果你不覆盖`GetHashCode`你只是继承`Object.GetHashCode`。 `Object.GetHashCode`基本上只是返回实例的内存地址，如果它是一个引用对象。当然，每次加载一个对象时，它很可能会被加载到内存的不同部分，从而产生不同的哈希码。

这是否是正确的做法值得商榷。但这就是“过去”实施的，所以现在不能改变。

如果您想要一致的东西，那么您必须`GetHashCode`根据对象的“值”（即属性和/或字段）覆盖并创建代码。这可以像分布式合并所有属性/字段的哈希码一样简单。或者，它可能像您需要的那样复杂。 ~~如果您正在寻找的只是区分两个不同对象的东西，那么在对象上使用唯一键可能对您有用。~~如果您正在寻找更改跟踪，则使用哈希的唯一键可能不起作用

我只是使用字段的所有哈希码为父对象创建一个合理分布的哈希码。例如：

```
public override int GetHashCode()
{
    unchecked
    {
        int result = (Name != null ? Name.GetHashCode() : 0);
        result = (result*397) ^ (Street != null ? Street.GetHashCode() : 0);
        result = (result*397) ^ Age;
        return result;
    }
} 
```

素数 397 的使用是为一个值生成一个唯一的数字，以更好地分布散列码。有关在哈希码计算中使用素数的更多详细信息，请参阅[http://computinglife.wordpress.com/2008/11/20/why-do-hash-functions-use-prime-numbers/](http://computinglife.wordpress.com/2008/11/20/why-do-hash-functions-use-prime-numbers/)。

当然，您可以使用反射来获取所有属性来执行此操作，但这会更慢。或者，您可以使用[CodeDOM](http://msdn.microsoft.com/en-us/library/y2k85ax6.aspx)动态生成代码，以根据属性的反射生成散列并缓存该代码（即生成一次并在下次重新加载它）。但是，这当然非常复杂，可能不值得付出努力。

MD5 或 SHA 哈希或 CRC 通常基于数据块。如果你想要这样，那么使用每个属性的哈希码是没有意义的。正如 Henk 所描述的，可能将数据序列化到内存并以这种方式计算哈希值会更适用。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-12T18:02:53.327

如果此“哈希”仅用于确定实体是否已更改，则以下算法可能会有所帮助（注意，它未经测试并假设在生成哈希时将使用相同的运行时（否则对“简单”类型的 GetHashCode 的依赖是不正确的））：

```
public static byte[] Hash<T>(T entity) 
{
  var seen = new HashSet<object>();
  var properties = GetAllSimpleProperties(entity, seen);
  return properties.Select(p => BitConverter.GetBytes(p.GetHashCode()).AsEnumerable()).Aggregate((ag, next) => ag.Concat(next)).ToArray();
}

private static IEnumerable<object> GetAllSimpleProperties<T>(T entity, HashSet<object> seen)
{
  foreach (var property in PropertiesOf<T>.All(entity))
  {
    if (property is int || property is long || property is string ...) yield return property;
    else if (seen.Add(property)) // Handle cyclic references
    {
      foreach (var simple in GetAllSimpleProperties(property, seen)) yield return simple;
    }
  }
}

private static class PropertiesOf<T>
{
  private static readonly List<Func<T, dynamic>> Properties = new List<Func<T, dynamic>>();

  static PropertiesOf()
  {
    foreach (var property in typeof(T).GetProperties())
    {
      var getMethod = property.GetGetMethod();
      var function = (Func<T, dynamic>)Delegate.CreateDelegate(typeof(Func<T, dynamic>), getMethod);
      Properties.Add(function);
    }
  }

  public static IEnumerable<dynamic> All(T entity) 
  {
    return Properties.Select(p => p(entity)).Where(v => v != null);
  }
} 
```

这将可以像这样使用：

```
var entity1 = LoadEntityFromRdbms();
var entity2 = LoadEntityFromNoSql();
var hash1 = Hash(entity1);
var hash2 = Hash(entity2);
Assert.IsTrue(hash1.SequenceEqual(hash2)); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-12T20:28:32.137

GetHashCode() 返回一个 Int32（不是 MD5）。

如果您使用基本或系统 GetHashCode() 创建两个具有所有相同属性值的对象，它们将不会具有相同的 Hash。

String 是一个对象，也是一个例外。

```
string s1 = "john";
string s2 = "john";
if (s1 == s2) returns true and will return the same GetHashCode() 
```

如果要控制两个对象的相等比较，则应覆盖 GetHash 和 Equality。

如果两个对象相同，那么它们也必须具有相同的 GetHash()。但是具有相同 GetHash() 的两个对象不一定相同。比较将首先测试 GetHash()，如果它在那里匹配，它将测试 Equals。好的，有一些比较直接进入 Equals，但您仍然应该覆盖两者并确保两个相同的对象产生相同的 GetHash。

我用它来同步客户端和服务器。您可以使用所有属性，也可以让任何属性更改更改 VerID。这里的优点是更简单更快的 GetHashCode()。在我的情况下，我已经使用任何属性更改来重置 VerID。

```
 public override bool Equals(Object obj)
    {
        //Check for null and compare run-time types.
        if (obj == null || !(obj is FTSdocWord)) return false;
        FTSdocWord item = (FTSdocWord)obj;
        return (OjbID == item.ObjID && VerID == item.VerID);
    }
    public override int GetHashCode()
    {
        return ObjID ^ VerID;
    } 
```

我最终只使用 ObjID，所以我可以执行以下操作

```
if (myClientObj == myServerObj && myClientObj.VerID <> myServerObj.VerID)
{
   // need to synch
} 
```

[Object.GetHashCode 方法](http://msdn.microsoft.com/en-us/library/system.object.gethashcode.aspx)

具有相同属性值的两个对象。他们平等吗？它们产生相同的 GetHashCode() 吗？

```
 personDefault pd1 = new personDefault("John");
            personDefault pd2 = new personDefault("John");
            System.Diagnostics.Debug.WriteLine(po1.GetHashCode().ToString());
            System.Diagnostics.Debug.WriteLine(po2.GetHashCode().ToString()); 
            // different GetHashCode
            if (pd1.Equals(pd2))  // returns false
            {
                System.Diagnostics.Debug.WriteLine("pd1 == pd2");
            }
            List<personDefault> personsDefault = new List<personDefault>();
            personsDefault.Add(pd1);
            if (personsDefault.Contains(pd2))  // returns false
            {
                System.Diagnostics.Debug.WriteLine("Contains(pd2)");
            }

            personOverRide po1 = new personOverRide("John");
            personOverRide po2 = new personOverRide("John");
            System.Diagnostics.Debug.WriteLine(po1.GetHashCode().ToString());
            System.Diagnostics.Debug.WriteLine(po2.GetHashCode().ToString());  
            // same hash
            if (po1.Equals(po2))  // returns true
            {
                System.Diagnostics.Debug.WriteLine("po1 == po2");
            }
            List<personOverRide> personsOverRide = new List<personOverRide>();
            personsOverRide.Add(po1);
            if (personsOverRide.Contains(po2))  // returns true
            {
                System.Diagnostics.Debug.WriteLine("Contains(p02)");
            }
        }

        public class personDefault
        {
            public string Name { get; private set; }
            public personDefault(string name) { Name = name; }
        }

        public class personOverRide: Object
        {
            public string Name { get; private set; }
            public personOverRide(string name) { Name = name; }

            public override bool Equals(Object obj)
            {
                //Check for null and compare run-time types.
                if (obj == null || !(obj is personOverRide)) return false;
                personOverRide item = (personOverRide)obj;
                return (Name == item.Name);
            }
            public override int GetHashCode()
            {
                return Name.GetHashCode();
            }
        } 
```

# python - python gnupg 时间戳

> ID：12393469
> 
> 赞同：0
> 
> 时间：2012-09-12T17:29:24.333
> 
> 标签：python, pickle, gnupg

我在使用 python gnupg 时注意到，如果我签署一些数据并使用 pickle 将签署的数据保存到文件中，大量数据会与签署的数据一起保存。其中之一是unix时间的时间戳，例如以下行是时间戳的一部分：

```
p24
sS'timestamp'
p25
V1347364912 
```

文档没有提到任何这些，这让我有点困惑。使用pickle加载文件后，我看不到任何提及时间戳或任何返回值的方式。但如果 pickle 正在保存它，它必须是 python 对象的一部分。这是否意味着我应该有一种方法可以在 python 中获取这些信息？我也想利用这些数据，我可以通过读取文件本身来做到这一点，但我正在寻找一种更简洁的方法来使用 gnupg 模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T18:57:48.790

gnupg 没有很好的文档记录，但是如果您[检查](http://docs.python.org/library/inspect.html)它，您会看到除了通常使用的属性之外还有其他属性...

```
#234567891123456789212345678931234567894123456789512345678961234567897123456789

# core
import inspect
import pickle
import datetime

# 3rd party
import gnupg

def depickle():
    """ pull and depickle our signed data """
    f = open('pickle.txt', 'r')
    signed_data = pickle.load(f)
    f.close()
    return signed_data

# depickle our signed data
signed_data = depickle()
# inspect the object
for key, value in inspect.getmembers(signed_data):
    print key 
```

其中之一是您的时间戳……恰如其分地命名为时间戳。既然你知道它，你可以很容易地使用它......

```
# use the attribute now that we know it
print signed_data.timestamp
# make it pretty
print datetime.datetime.fromtimestamp(float(signed_data.timestamp)) 
```

这感觉很啰嗦，但我认为这个讨论将受益于记录使用检查来识别未记录的属性，而不是仅仅说“使用 signed_data.timestamp”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T19:10:27.317

我发现文档中没有描述 python-gnupg`Sign`和`Verify`类的某些字段。您将不得不查看 python-gnupg 源代码：`[PYTHONDIR]/Lib/site-packages/gnupg.py`. 有一个`Sign`类`handle_status()`填充与签名相关的所有变量/字段，包括`timestamp`字段。

# objective-c - 通过 CocoaPods 在 github 上使用 Restkit 的一个分支？

> ID：12393470
> 
> 赞同：32
> 
> 时间：2012-09-12T17:29:36.123
> 
> 标签：objective-c, ios, restkit, cocoapods

restkit 以不同的方式使用 oauth2 协议，我需要更改代码才能以我的方式使用它：

从：

```
// OAuth 2 valid request
if (self.authenticationType == RKRequestAuthenticationTypeOAuth2) {
    NSString *authorizationString = [NSString stringWithFormat:@"OAuth2 %@", self.OAuth2AccessToken];
    [_URLRequest setValue:authorizationString forHTTPHeaderField:@"Authorization"];
} 
```

至：

```
// OAuth 2 valid request
if (self.authenticationType == RKRequestAuthenticationTypeOAuth2) {
    NSString *authorizationString = [NSString stringWithFormat:@"Bearer %@", self.OAuth2AccessToken];
    [_URLRequest setValue:authorizationString forHTTPHeaderField:@"Authorization"];
} 
```

使用“Bearer”而不是“Oauth2”....

我正在使用 CocoaPods 在我的项目中导入 restkit。

我可以在 github 上 fork Restkit 存储库并通过 CocoaPod 使用 fork 而不是官方版本吗？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-09-12T18:01:03.753

你当然可以。看看[https://github.com/CocoaPods/CocoaPods/wiki/Dependency-declaration-options](https://github.com/CocoaPods/CocoaPods/wiki/Dependency-declaration-options)

如果 RestKit 将其`.podspec`文件包含在存储库中，那么您只需将您的文件更改`Podfile`为指向您的 fork 即

```
pod 'RestKit', :git => 'https://github.com/you/RestKit.git' 
```

不幸的是，RestKit 不包括它的`.podspec`. `RestKit.podspec`而是从[https://github.com/CocoaPods/Specs/blob/master/RestKit/0.10.2/RestKit.podspec](https://github.com/CocoaPods/Specs/blob/master/RestKit/0.10.2/RestKit.podspec)复制并将其添加到您的项目中。编辑`.podspec`以使用您的 fork 作为其源。然后，您可以`.podspec`在您的`Podfile`:

```
pod 'RestKit', :podspec => 'local/path/to/RestKit.podspec' 
```

或者，您可以将其添加`.podspec`到您的 fork 并使用以前的依赖项声明。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-22T13:40:00.000

尽管这个问题有一个公认的答案，但我想添加一种替代方法。在某个时间（我相信在提出这个问题之后）在 Podfiles（而不仅仅是 Podspecs）中具有本地引用的能力被添加到 Cocoapods 中。

与其在 Github 和自定义 Podspecs 中创建自定义创建公共分支，我发现它更容易：

1.  在本地克隆 Github 库。
2.  创建一个新的本地分支，我在该库中进行我需要的特定于我的项目的更改。
3.  修改我的 Podfile 以指向该本地目录和本地分支：

    ```
    pod 'FXForms', :path => '~/Documents/Projects/RestKit', :branch => 'mybranch' 
    ```

这使我可以轻松地合并任何新版本的库（只需将它们从源中拉出，然后将它们合并到我的本地分支中）。

# phpmyadmin - 在 PHP.ini 中没有配置的 MYSQL Web 客户端（如 PHPMYADMIN）

> ID：12393473
> 
> 赞同：1
> 
> 时间：2012-09-12T17:29:51.353
> 
> 标签：phpmyadmin, mysql, web-client

是否有任何不需要对 PHP.ini 进行任何配置的 MySQL 网络客户端我无权访问服务器配置文件并且想要任何不需要修改 PHP.INI 的 PHPMYADMIN

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T19:36:05.887

你可以试试[Adminer](http://www.adminer.org/)。这是一个单独的 PHP 文件。

# php - 有没有办法获得与特定用户相关的新/未读推文计数？

> ID：12393478
> 
> 赞同：0
> 
> 时间：2012-09-12T17:30:04.197
> 
> 标签：php, twitter

我想获取用户的新推文计数，并且我正在使用以下文档

[https://dev.twitter.com/docs/api/1/get/statuses/user_timeline](https://dev.twitter.com/docs/api/1/get/statuses/user_timeline)

但我在这里没有看到与任何参数相关的新计数，任何人指导我是否可能？

提前致谢。

# php - 在 PHP 中高效地使用单一注册表

> ID：12393487
> 
> 赞同：0
> 
> 时间：2012-09-12T17:30:48.807
> 
> 标签：php, mysql, performance

我有一个系统，我在其中**使用 PHP 多次读取和写入单个注册表**，并且在一段时间（几分钟）后消失。

基本上，一种带有计数器（只是一个整数）的投票系统，可以增加和减少（1 倍）。

因此，我必须在用户每次访问此页面时阅读它并在大多数情况下（当用户交互时）在其上书写。

目前，我正在使用一个数据库（MySQL），一个表和一个带有一列的注册表。

但我认为它的效率很低。

而且我担心如果网站继续增长，它会崩溃，因为其余的内容可以被缓存，但这不能，因为它应该是实时的。

我曾想过使用文件，但可能更糟，对吧？

我托管在共享服务中，并且..，因此，**我不能使用 MemCached 或 Redis**。

**关于如何有效地做到这一点的任何想法？**

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:29:01.980

我担心在共享主机环境中，这会很困难。您可能无法访问`/dev/shm`，因此文件缓存不是一种选择。APC 和 memcached 也不起作用。

所以只剩下一个选择：优化您的查询。一方面，我建议你只`INSERT`在一张你写得很多的桌子上使用。然后，制作第二个表，它只保存聚合值。此处您需要`UPDATE`，但更新频率应以一分钟或 2 分钟为基础（同时从表 1 中删除原始数据）。因此，您的数据仍将是近乎实时的，但性能要好得多，而且它会随着更新时间的增加而直接扩展。

# compression - 使用一张图像的jpeg量化矩阵压缩另一张图像

> ID：12393489
> 
> 赞同：1
> 
> 时间：2012-09-12T17:30:57.397
> 
> 标签：compression, jpeg, libjpeg

我有两个图像，A 和 B，我需要估计 B 的量化表并使用此表压缩 A。使用 libjpeg 或者甚至更好的 opencv 来做到这一点的最佳方法是什么？

我使用 libjpeg 的实用程序 'djpeg' 来查找图像的量化表，但我不确定如何解释其输出并将其与 libjpeg 一起使用。此外，我需要找到这个矩阵并从我的程序内部进行压缩，这会导致（我认为）“djpeg”在这种情况下无法使用。

以下是测试图像的“djpeg”输出，运行它：

djpeg -v -v cat1.jpg > /dev/null

```
Start of Image
JFIF APP0 marker: version 1.01, density 96x96  1
Define Quantization Table 0  precision 0
           5    3    3    5    7   12   15   18
           4    4    4    6    8   17   18   17
           4    4    5    7   12   17   21   17
           4    5    7    9   15   26   24   19
           5    7   11   17   20   33   31   23
           7   11   17   19   24   31   34   28
          15   19   23   26   31   36   36   30
          22   28   29   29   34   30   31   30
Define Quantization Table 1  precision 0
           5    5    7   14   30   30   30   30
           5    6    8   20   30   30   30   30
           7    8   17   30   30   30   30   30
          14   20   30   30   30   30   30   30
          30   30   30   30   30   30   30   30
          30   30   30   30   30   30   30   30
          30   30   30   30   30   30   30   30
          30   30   30   30   30   30   30   30
Start Of Frame 0xc0: width=450, height=320, components=3
    Component 1: 2hx2v q=0
    Component 2: 1hx1v q=1
    Component 3: 1hx1v q=1
Define Huffman Table 0x00
          0   1   5   1   1   1   1   1
          1   0   0   0   0   0   0   0
Define Huffman Table 0x10
          0   2   1   3   3   2   4   3
          5   5   4   4   0   0   1 125
Define Huffman Table 0x01
          0   3   1   1   1   1   1   1
          1   1   1   0   0   0   0   0
Define Huffman Table 0x11
          0   2   1   2   4   4   3   4
          7   5   4   4   0   1   2 119
Start Of Scan: 3 components
    Component 1: dc=0 ac=0
    Component 2: dc=1 ac=1
    Component 3: dc=1 ac=1
  Ss=0, Se=63, Ah=0, Al=0
End Of Image 
```

提前致谢！

# java - 清理与对象关联的外部资源的可靠方法

> ID：12393493
> 
> 赞同：9
> 
> 时间：2012-09-12T17:31:13.833
> 
> 标签：java, garbage-collection

具体用例：二进制数据有一个抽象，广泛用于处理任意大小的二进制 blob。由于抽象是在不考虑VM*之外*的事物的情况下创建的，因此现有实现依赖于垃圾收集器的生命周期。

现在我想添加一个使用堆外存储（例如在临时文件中）的新实现。由于有很多使用抽象的现有代码，因此为显式生命周期管理引入额外的方法是不切实际的，我无法重写每个客户端用例以确保它们管理新的生命周期需求。

我可以想到两种解决方案，但无法确定哪一种更好：

a.) 使用 finalize() 来管理相关资源的生命周期（例如，在 finalize 中删除临时文件。这*似乎*很容易实现。

b.) 使用引用队列和 java.lang.Reference （但哪个，弱或幻像？）与一些额外的对象，当引用入队时删除文件。这似乎需要更多的工作来实现，我不仅需要创建新的实现，还需要分离出它的清理数据*，并*确保清理对象在暴露给用户的对象之前不能被 GC .

c.) 我还没有想到的其他方法？

我应该采用哪种方法（为什么我更喜欢它）？也欢迎实施提示。

* * *

编辑：所需的可靠性程度 - 就我的目的而言，如果在 VM 突然终止的情况下*不*清理临时文件，则它非常好。主要担心的是，当 VM 运行时，它很可能会用临时文件（在几天的过程中）填满本地磁盘（这在我身上发生过 apache TIKA，它在提取文本时创建了临时文件在某些文档类型中，我认为 zip 文件是罪魁祸首）。我在机器上安排了定期清理，因此如果文件因清理而丢失，这并不意味着世界末日 - 只要它不会在短时间内定期发生。

据我所知，finalize() 适用于 Oracale JRE。而且，如果我正确解释了 javadocs，则引用*必须*按记录工作（在抛出 OutOfMemoryError 之前，不可能不清除仅软/弱可访问的引用对象）。这意味着虽然 VM 可能决定在很长一段时间内不回收特定对象，但它必须在堆满时才这样做。反过来，这意味着堆上只能存在有限数量的基于文件的 blob。虚拟机必须在某个时候清理它们，否则它肯定会耗尽内存。或者是否有任何漏洞允许VM在不清除引用的情况下运行OOM（假设它们不再被引用）？

* * *

Edit2：据我目前所见，finalize() 和 Reference 对于我的目的来说应该足够可靠，但我认为 Reference 可能是更好的解决方案，因为它与 GC 的交互不能恢复死对象，因此它的性能影响应该更小吧？

* * *

Edit3：依赖于 VM 终止或启动（关闭挂钩或类似）的解决方案方法对我没有用，因为通常 VM 运行时间较长（服务器环境）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T20:27:16.840

这是来自*Effective Java*的相关项目：[避免终结器](http://www.informit.com/articles/article.aspx?p=1216151&seqNum=7)

该项目中包含的建议是执行@delnan 在评论中建议的建议：*提供显式终止方法*。还提供了大量示例：`InputStream.close()`、`Graphics.dispose()`等。了解奶牛可能已经离开了那个谷仓......

无论如何，这里有一个关于如何使用参考对象来完成的草图。一、二进制数据的接口：

```
import java.io.IOException;

public interface Blob {
    public byte[] read() throws IOException;
    public void update(byte[] data) throws IOException;
} 
```

接下来，基于文件的实现：

```
import java.io.File;
import java.io.IOException;

public class FileBlob implements Blob {

    private final File file;

    public FileBlob(File file) {
        super();
        this.file = file;
    }

    @Override
    public byte[] read() throws IOException {
        throw new UnsupportedOperationException();
    }

    @Override
    public void update(byte[] data) throws IOException {
        throw new UnsupportedOperationException();
    }
} 
```

然后，创建和跟踪基于文件的 blob 的工厂：

```
import java.io.File;
import java.io.IOException;
import java.lang.ref.PhantomReference;
import java.lang.ref.Reference;
import java.lang.ref.ReferenceQueue;
import java.util.Timer;
import java.util.TimerTask;
import java.util.concurrent.ConcurrentHashMap;
import java.util.concurrent.ConcurrentMap;

public class FileBlobFactory {

    private static final long TIMER_PERIOD_MS = 10000;

    private final ReferenceQueue<File> queue;
    private final ConcurrentMap<PhantomReference<File>, String> refs;
    private final Timer reaperTimer;

    public FileBlobFactory() {
        super();
        this.queue = new ReferenceQueue<File>();
        this.refs = new ConcurrentHashMap<PhantomReference<File>, String>();
        this.reaperTimer = new Timer("FileBlob reaper timer", true);
        this.reaperTimer.scheduleAtFixedRate(new FileBlobReaper(), TIMER_PERIOD_MS, TIMER_PERIOD_MS);
    }

    public Blob create() throws IOException {
        File blobFile = File.createTempFile("blob", null);
        //blobFile.deleteOnExit();
        String blobFilePath = blobFile.getCanonicalPath();
        FileBlob blob = new FileBlob(blobFile);
        this.refs.put(new PhantomReference<File>(blobFile, this.queue), blobFilePath);
        return blob;
    }

    public void shutdown() {
        this.reaperTimer.cancel();
    }

    private class FileBlobReaper extends TimerTask {
        @Override
        public void run() {
            System.out.println("FileBlob reaper task begin");
            Reference<? extends File> ref = FileBlobFactory.this.queue.poll();
            while (ref != null) {
                String blobFilePath = FileBlobFactory.this.refs.remove(ref);
                File blobFile = new File(blobFilePath);
                boolean isDeleted = blobFile.delete();
                System.out.println("FileBlob reaper deleted " + blobFile + ": " + isDeleted);
                ref = FileBlobFactory.this.queue.poll();
            }
            System.out.println("FileBlob reaper task end");
        }
    }
} 
```

最后，一个包含一些人工 GC“压力”的测试来让事情顺利进行：

```
import java.io.IOException;

public class FileBlobTest {

    public static void main(String[] args) {
        FileBlobFactory factory = new FileBlobFactory();
        for (int i = 0; i < 10; i++) {
            try {
                factory.create();
            } catch (IOException exc) {
                exc.printStackTrace();
            }
        }

        while(true) {
            try {
                Thread.sleep(5000);
                System.gc(); System.gc(); System.gc();
            } catch (InterruptedException exc) {
                exc.printStackTrace();
                System.exit(1);
            }
        }
    }
} 
```

这应该产生一些输出，如：

```
FileBlob reaper task begin
FileBlob reaper deleted C:\WINDOWS\Temp\blob1055430495823649476.tmp: true
FileBlob reaper deleted C:\WINDOWS\Temp\blob873625122345395275.tmp: true
FileBlob reaper deleted C:\WINDOWS\Temp\blob4123088770942737465.tmp: true
FileBlob reaper deleted C:\WINDOWS\Temp\blob1631534546278785404.tmp: true
FileBlob reaper deleted C:\WINDOWS\Temp\blob6150533076250997032.tmp: true
FileBlob reaper deleted C:\WINDOWS\Temp\blob7075872276085608840.tmp: true
FileBlob reaper deleted C:\WINDOWS\Temp\blob5998579368597938203.tmp: true
FileBlob reaper deleted C:\WINDOWS\Temp\blob3779536278201681316.tmp: true
FileBlob reaper deleted C:\WINDOWS\Temp\blob8720399798060613253.tmp: true
FileBlob reaper deleted C:\WINDOWS\Temp\blob3046359448721598425.tmp: true
FileBlob reaper task end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T16:40:55.837

这是我在基于 kschneids 参考的示例之后制定的解决方案（以防万一有人需要通用可用的实现）。它记录在案并且应该易于理解/适应：

```
import java.lang.ref.PhantomReference;
import java.lang.ref.Reference;
import java.lang.ref.ReferenceQueue;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

/**
 * Helper class for cleaning up resources when an object is
 * garbage collected. Use as follows (both anonymous subclass or
 * public subclass are fine. Be extra careful to not retain
 * a reference to the trigger!):
 * 
 * new ResourceFinalizer(trigger) {
 * 
 *     // put user defined state relevant for cleanup here
 *     
 *     protected void cleanup() {
 *         // implement cleanup procedure.
 *     }
 * }
 *
 * Typical application is closing of native resources when an object
 * is garbage collected (e.g. VM external resources).
 * 
 * You must not retain any references from the ResourceFinalizer to the
 * trigger (otherwise the trigger can never become eligible for GC).
 * You can however retain references to the ResourceFinalizer from the
 * trigger, so you can access the data relevant for the finalizer
 * from the trigger (no need to duplicate the data).
 * There is no need to explicitly reference the finalizer after it has
 * been created, the finalizer base class will ensure the finalizer
 * itself is not eligible for GC until it has been run.
 * 
 * When the VM terminates, ResourceFinalizer that haven't been
 * triggered will run, regardless of the state of their triggers
 * (that is even if the triggers are still reachable, the finalizer
 * will be called). There are no guarantees on this, if the VM
 * is terminated abruptly this step may not take place.
 */
public abstract class ResourceFinalizer {

    /**
     * Constructs a ResourceFinalizer that is triggered when the
     * object referenced by finalizationTrigger is garbage collected.
     * 
     * To make this work, you must ensure there are no references to
     * the finalizationTrigger object from the ResourceFinalizer.
     */
    protected ResourceFinalizer(final Object trigger) {
        // create reference to trigger and register this finalizer
        final Reference<Object> reference = new PhantomReference<Object>(trigger, referenceQueue);
        synchronized (finalizerMap) {
            finalizerMap.put(reference, this);
        }
    }

    /**
     * The cleanup() method is called when the finalizationTrigger
     * has been garbage collected.
     */
    protected abstract void cleanup();

    // --------------------------------------------------------------
    // ---
    // --- Background finalization management
    // ---
    // --------------------------------------------------------------

    /**
     * The reference queue used to interact with the garbage collector.
     */
    private final static ReferenceQueue<Object> referenceQueue = new ReferenceQueue<Object>();

    /**
     * Global static map of finalizers. Enqueued references are used as key
     * to find the finalizer for the referent.
     */
    private final static HashMap<Reference<?>, ResourceFinalizer> finalizerMap =
            new HashMap<Reference<?>, ResourceFinalizer>(16, 2F);

    static {
        // create and start finalizer thread
        final Thread mainLoop = new Thread(new Runnable() {
            @Override
            public void run() {
                finalizerMainLoop();
            }
        }, "ResourceFinalizer");
        mainLoop.setDaemon(true);
        mainLoop.setPriority(Thread.NORM_PRIORITY + 1);
        mainLoop.start();

        // add a shutdown hook to take care of resources when the VM terminates
        final Thread shutdownHook = new Thread(new Runnable() {
            @Override
            public void run() {
                shutdownHook();
            }
        });
        Runtime.getRuntime().addShutdownHook(shutdownHook);
    }

    /**
     * Main loop that runs permanently and executes the finalizers for
     * each object that has been garbage collected. 
     */
    private static void finalizerMainLoop() {
        while (true) {
            final Reference<?> reference;
            try {
                reference = referenceQueue.remove();
            } catch (final InterruptedException e) {
                // this will terminate the thread, should never happen
                throw new RuntimeException(e);
            }
            final ResourceFinalizer finalizer;
            // find the finalizer for the reference
            synchronized (finalizerMap) {
                finalizer = finalizerMap.remove(reference);
            }
            // run the finalizer
            callFinalizer(finalizer);
        }
    }

    /**
     * Called when the VM shuts down normally. Takes care of calling
     * all finalizers that haven't been triggered yet.
     */
    private static void shutdownHook() {
        // get all remaining resource finalizers
        final List<ResourceFinalizer> remaining;
        synchronized (finalizerMap) {
            remaining = new ArrayList<ResourceFinalizer>(finalizerMap.values());
            finalizerMap.clear();
        }
        // call all remaining finalizers
        for (final ResourceFinalizer finalizer : remaining) {
            callFinalizer(finalizer);
        }
    }

    private static void callFinalizer(final ResourceFinalizer finalizer) {
        try {
            finalizer.cleanup();
        } catch (final Exception e) {
            // don't care if a finalizer throws
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T16:24:48.010

如果您不是特别担心快速清理文件，那么`finalize`就是要走的路。不能保证任何特定对象都会被 GC，即使内存不足（理论上 VM 只能收集堆的一部分）。但是，如果一个对象经过 GC，它将被最终确定，因此您知道您最多会有 sizeof(heap) / sizeof(in-memory handle) 未最终确定的 blob，这对您的磁盘使用造成了一定的限制。这是一个非常弱的界限，但听起来它对你来说可能已经足够好了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T16:58:17.700

在紧要关头，仅在终结器中执行此操作并不是一个糟糕的解决方案，它可能至少会关闭大部分文件。如果这足够好，我会沿着这条路走，因为它会容易得多。

另一方面，如果您正在寻找任何确定性，那么使用终结器是非常糟糕的。你不能依赖它们一直运行，更不用说及时运行了，同样的论点也更松散地适用于清理各种特殊类型的引用。这取决于您的应用程序和硬件的详细信息，但通常您不能保证在磁盘填满之前清除引用。

如果您保存在内存中的数据（占用大部分空间）很大但寿命很短，而文件引用的持续时间更长，则更有可能发生这种情况。这会导致大量次要垃圾回收，这将清理年轻代空间，删除死数据并最终提升许多文件引用，但不会导致重大垃圾回收，这将清除旧的终身对象，例如文件引用，所以那些然后无限期地活着。看看[这个](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html)以获得更多的 GC 背景。你可以通过增加年轻代的大小来提高你的终结器实际受到攻击的数量，以换取稍微慢一点的 GC。

如果您确实想要更多确定性，我会稍微不同地解决问题。首先，在终结器中实施清理作为一种快速的简单案例解决方案。然后也建立一个后备；决定您准备让文件占用的最大空间量，最好比您预期实际使用的空间大得多，每 X 分钟监控一次您使用的总空间，如果超过此界限，则删除选择最旧的（按最后写入时间）文件，例如最旧的 10%。这为您提供了一个相当硬的上限，并且您可以在这里将检查频率保持在非常低的水平，因为终结器应该有望捕获大多数问题。

我认为可能是半相关的另一个注意事项是[deleteOnExit](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html#deleteOnExit%28%29)。在创建临时文件时调用它们将保证在 JVM 成功退出时自动删除它们。但是，这确实有[缺点](http://puneeth.wordpress.com/2006/01/23/filedeleteonexit-is-evil/)：JVM 必须保持对这个文件的引用，直到它关闭，这会给你留下一个小的内存泄漏（我相信每个文件 1K）。不确定这是否对您有价值，但可能会有所帮助！

# c# - 如何配置我的 ASP.NET 目录以允许写入日志文件？

> ID：12393494
> 
> 赞同：6
> 
> 时间：2012-09-12T17:31:20.940
> 
> 标签：c#, asp.net, iis

好的，所以我相信我在这里做的事情很容易。我写了一个 ASP.NET 网页，它只是试图写入本地目录。

我正在使用以下代码：

```
System.IO.File.WriteAllLines("log.txt", messages); 
```

我抛出以下异常。

```
Access to the path 'c:\windows\system32\inetsrv\log.txt' is denied. 
```

我的 ASP.NET 应用程序位于以下目录中。

```
c:\inetpub\wwwroot\sites\mysite\ 
```

所以我很困惑为什么当我不提供该目录本身时它试图写入 c:\windows\system32\inetsrv\ 目录。

我尝试将代码更改为以下代码，但它给了我与新目录相同的错误消息。

```
System.IO.File.WriteAllLines("c:\\inetpub\\wwwroot\\sites\mysite\log.txt", messages); 
```

**编辑 1**

很难接受这个答案，因为每个人都帮了我很多忙。我接受了 tom_yes_tom 的回答，因为他是第一个发表他的回复的人，这是我问题的前半部分。我的问题的另一半与 Fabio 指出的 hbrock 的解决方案有关。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T17:43:40.960

创建文件夹“C:\inetpub\wwwroot\sites\mysite\App_Data”并将您的数据保存在那里。

```
System.IO.File.WriteAllLines(Server.MapPath("~/App_Data/log.txt")) 
```

如果您绝对必须将其保存到 mysite 目录，请注意将日志文件放在那里并适当设置目录权限的安全后果。运行 IIS 的用户需要能够读取和写入该目录。

完整的合格路径：`System.Web.HttpContext.Current.Server`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T18:03:47.903

您收到“对路径 'c:\windows\system32\inetsrv\log.txt' 的访问被拒绝”。当您执行 System.IO.File.WriteAllLines("log.txt", messages) 时，因为 c:\windows\system32\inetsrv 是 IIS 可执行文件所在的目录 (w3wp.exe)。

您必须使用 Server.MapPath 以便它为您提供虚拟目录的物理路径。

查看哪个用户正在运行您的虚拟目录的应用程序池，并授予他对您的虚拟目录文件夹的写入权限。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T17:57:58.890

这应该有助于：

授予对特定文件的读取、写入和修改权限

在 Windows 资源管理器中，找到并选择所需的文件。

右键单击该文件，然后单击“属性”。

在“属性”对话框中，单击“安全”选项卡。

在安全选项卡上，检查用户列表。如果未列出网络服务帐户，请添加它。

在“属性”对话框中，单击“网络服务”用户名，然后在“网络服务的权限”部分中，选择“读取”、“写入”和“修改”权限。

单击应用，然后单击确定

信息来自：http: [//msdn.microsoft.com/en-us/library/ff647402.aspx#paght000015_fileaccess](http://msdn.microsoft.com/en-us/library/ff647402.aspx#paght000015_fileaccess)

# iphone - 奇葩三20的TTTableViewController框架属性

> ID：12393496
> 
> 赞同：5
> 
> 时间：2012-09-12T17:31:25.620
> 
> 标签：iphone, objective-c, ios, xcode, three20

我正在将 a 添加`TTTableViewController`到现有的`UIViewController`，我发现的一件奇怪的事情是`frame`初始化的 TTTableViewController 的属性是有线的，例如在 iOS 布局中。

**我有：**

1.  `UIStatusBar`
2.  `UINavigationController`
3.  `UIViewController`
4.  `UITabBar`

为了设置`TTTableViewController`所有剩余空间的填充，我需要将高度设置为**460 而不是 367。**（367 = 480-20-44-49）

例如

```
self.tableViewController.view.frame = CGRectMake(0, 0, 320, 460.0f); 
```

代替

```
self.tableViewController.view.frame = CGRectMake(0, 0, 320, 367.0f); 
```

## 为什么会这样？

*编辑澄清：我的意思是TTViewController顶部的TTTableViewController（使用[self.view addSubview:self.tableViewController.view];），我需要设置self.tableViewController.view.frame = CGRectMake(0, 0, 320, 460.0f); 而不是 367

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T21:03:45.890

我认为这取决于您何时设置框架。例如，我很确定当您在 viewDidLoad 中设置框架时，您将在考虑状态栏和其他事情之前设置它。可能还有其他类似的情况。如果您将其设置为 320:460，它将调整大小以考虑状态栏和其他内容，使其填满屏幕的其余部分。如果您将其设置为 320:367，因为您已经考虑了这些内容，它将再次调整大小并被挤压（基本上缩小了两次），使其仅填充屏幕的一部分。如果您使用的是 viewDidLoad，您可以尝试将其粘贴在另一种方法中（可能是 viewWillAppear？），或者继续使用 320:460。

很高兴知道您何时设置了框架。还要记住，我可能会走得很远。我的脑子现在感觉有点模糊。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T08:02:08.073

据我了解，仅扣除状态栏的大小，即 480-20 = 460。实际上状态栏为 22 分，但大约为 22 分。

就像您将视图控制器添加到导航控制器或标签栏控制器时，大小会自动呈现。这里的情况也是如此，three20 会自动调整视图的大小，如果您尝试将其设置为更小，那么它的行为会有所不同。

这是一个很好的问题。快乐编码。干杯！！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T21:13:23.317

我不会将不同视图控制器的视图添加到当前视图的主视图中。

您应该`TTTableViewController`使用控制器的呈现/关闭功能呈现。如果您不想包含上滑效果，因此用户不会看到它是“不同的屏幕”，请在呈现控制器时使用布尔标志。

```
 [self presentModalViewController:vc animated:NO]; 
```

或者，使用`TTTableView`不带控制器的 a：

```
tableView = [[TTTableView alloc] initWithFrame:CGRectMake(0, kScrollViewHeight + kSignupLabelHeight, 320, kTableViewHeight) style:UITableViewStyleGrouped];
[tableView setBackgroundColor:[UIColor clearColor]];

tableView.delegate = self;
tableView.dataSource = [TTSectionedDataSource dataSourceWithObjects:
                                 @"",
                                 [TTTableTextItem itemWithText:@"Sign Up" URL:@"tt://signupController"],
                                 nil];
[self.view addSubview:tableView]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T03:53:03.860

喜欢这个代码。如果使用 iOS6 ，获取当前设备。如果（）;

```
-(void)viewdidLoad{ 
```

`TTTableViewController ＊tt = [TTTableViewController new];` `CGRect frame = [UIScreen mainScreen].bounds;` `tt.frame = frame;` `tt.delegate = self;`

`[self.view addsubview:tt];`

`}`

# jquery - jQuery Tabs - 加载选项卡时更改选项卡之外的内容

> ID：12393497
> 
> 赞同：1
> 
> 时间：2012-09-12T17:31:30.353
> 
> 标签：jquery

我一直在环顾四周，我似乎无法弄清楚如何做到这一点。基本上我的设置是这样的：

```
<script>
    $(function() {
        $( ".tabs" ).tabs();

    });

</script>

<div class="tabs">
<div class="Content">

<div id="tab-image1">   
    <div class="plusIcon"></div><img src="attachments/images/testImage.jpg" width="255" height="283" alt="Test Image" />
    <div class="description">
        Info
    </div>
</div>

<div id="tab-image2">   
    <div class="plusIcon"></div><img src="attachments/images/testImage2.jpg" width="255" height="283" alt="Test Image" />
    <div class="description">
        Info
    </div>
</div>      

</div> <!-- end .Content -->

<div class="Nav">

<ul>
<li class="text">Select a cartoon:</li>
<li><a href="#tab-image1"><img src="attachments/images/testThumbnail.jpg" width="71" height="71" alt="Test Thumbnail" /></a></li>
<li><a href="#tab-image2"><img src="attachments/images/testThumbnail2.jpg" width="71" height="71" alt="Test Thumbnail" /></a></li>
</ul>

</div> <!-- end .Nav -->

</div> <!-- end .tabs -->

<div class="Container" id="uptEPT">

<div class="Header">

<div class="uptTitle"></div>
<div class="number">3</div>
<div class="title">         

<div class="plusIcon"></div><img id="replace" src="attachments/images/testThumbnail.jpg" width="71" height="71" alt="Test Thumbnail" />

</div>  

</div> <!-- end .Header -->
</div> <!-- end .Container --> 
```

我想要做的是，当我单击 tab-image1 或 2 时，sectionHeader 中的缩略图也会发生变化。这可能吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:39:06.967

```
$('.tabs').tabs({
    select: function(event, ui) {
        $('#replace').attr('scr', $('img', ui.tab).attr('scr')); 
    }
}); 
```

或者

```
$('.tabs').tabs({
 select: function(event, ui) {
     switch (ui.index) {
       case 0:
         // first tab selected, replace with image 1
         $('#replace').attr('scr', 'path-to-image1');
         break;
       case 1:
         // second tab selected, replace with image 2
         $('#replace').attr('scr', 'path-to-image1');
         break;
     }
 }
}); 
```

# vb.net - 在 Visual Basic 中仅允许数字和小数的正确文本框

> ID：12393498
> 
> 赞同：0
> 
> 时间：2012-09-12T17:31:36.390
> 
> 标签：vb.net, textbox, decimal

我真的需要视觉基础方面的帮助。

我有 3 个文本框，允许使用以下代码进行数字和小数：

```
If Not Char.IsDigit(e.KeyChar) AndAlso Not Char.IsControl(e.KeyChar)
                               AndAlso Not e.KeyChar = "." Then
    e.Handled = True
End If 
```

但是我遇到了几个问题：

1.  我可以把“。” 任何地方
2.  当我尝试添加每个文本框时，结果是一团糟。示例 1.2 + 3 =15

你能修复我的代码，以便它可以进行正确的十进制计算吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-31T08:33:39.313

这可能会有所帮助

```
 Private Sub txtrate_TextChanged(ByVal sender As System.Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles txtmarks.KeyPress
            If InStr(txtmarks.Text, ".") Then
                e.Handled = Not (Char.IsDigit(e.KeyChar) Or Char.IsControl(e.KeyChar))
            Else
                e.Handled = Not ((Char.IsDigit(e.KeyChar) Or e.KeyChar = ".") Or Char.IsControl(e.KeyChar))
            End If
    End Sub 
```

# c# - 如何在 Nancy 中针对 Active Directory 进行身份验证？

> ID：12393503
> 
> 赞同：12
> 
> 时间：2012-09-12T17:32:21.920
> 
> 标签：c#, active-directory, forms-authentication, nancy

这是一篇过时的文章，但[http://msdn.microsoft.com/en-us/library/ff650308.aspx#paght000026_step3](http://msdn.microsoft.com/en-us/library/ff650308.aspx#paght000026_step3)说明了我想要做什么。我选择[Nancy](http://nancyfx.org/)作为我的 Web 框架，因为它简单且不那么正式。因此，我需要一种使用[Nancy](http://nancyfx.org/)对 Active Directory 进行身份验证的方法。

在 ASP.NET 中，您可以通过 web.config 文件中的一些设置在基于 db 的成员资格提供程序和 Active Directory 之间切换。我并不特别需要那个，但是在开发和生产之间切换的能力会很棒。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-28T17:06:39.410

确实，解决方案比看起来要简单得多。只需将 Active Directory 视为用户的存储库（就像数据库一样）。您需要做的就是查询 AD 以验证输入的用户名和密码是否有效。所以，只需使用 Nancy 的表单验证并在您的 IUserMapper 实现中处理与 AD 的连接。这是我为我的用户映射器想到的：

```
public class ActiveDirectoryUserMapper : IUserMapper, IUserLoginManager
{
    static readonly Dictionary<Guid, long> LoggedInUserIds = new Dictionary<Guid, long>(); 

    readonly IAdminUserValidator _adminUserValidator;
    readonly IAdminUserFetcher _adminUserFetcher;
    readonly ISessionContainer _sessionContainer;

    public ActiveDirectoryUserMapper(IAdminUserValidator adminUserValidator, IAdminUserFetcher adminUserFetcher, ISessionContainer sessionContainer)
    {
        _adminUserValidator = adminUserValidator;
        _adminUserFetcher = adminUserFetcher;
        _sessionContainer = sessionContainer;
    }

    public IUserIdentity GetUserFromIdentifier(Guid identifier, NancyContext context)
    {
        _sessionContainer.OpenSession();
        var adminUserId = LoggedInUserIds.First(x => x.Key == identifier).Value;
        var adminUser = _adminUserFetcher.GetAdminUser(adminUserId);
        return new ApiUserIdentity(adminUser);
    }

    public Guid Login(string username, string clearTextPassword, string domain)
    {
        var adminUser = _adminUserValidator.ValidateAndReturnAdminUser(username, clearTextPassword, domain);
        var identifier = Guid.NewGuid();
        LoggedInUserIds.Add(identifier, adminUser.Id);
        return identifier;
    }
} 
```

我在我的数据库中保存记录以处理角色，因此此类处理使用 AD 进行验证并从数据库中获取用户：

```
public class AdminUserValidator : IAdminUserValidator
{
    readonly IActiveDirectoryUserValidator _activeDirectoryUserValidator;
    readonly IAdminUserFetcher _adminUserFetcher;

    public AdminUserValidator(IAdminUserFetcher adminUserFetcher,
                              IActiveDirectoryUserValidator activeDirectoryUserValidator)
    {
        _adminUserFetcher = adminUserFetcher;
        _activeDirectoryUserValidator = activeDirectoryUserValidator;
    }

    #region IAdminUserValidator Members

    public AdminUser ValidateAndReturnAdminUser(string username, string clearTextPassword, string domain)
    {
        _activeDirectoryUserValidator.Validate(username, clearTextPassword, domain);

        return _adminUserFetcher.GetAdminUser(1);            
    }

    #endregion
} 
```

这个类实际上验证了 Active Directory 中是否存在用户名/密码组合：

```
public class ActiveDirectoryUserValidator : IActiveDirectoryUserValidator
{
    public void Validate(string username, string clearTextPassword, string domain)
    {
        using (var principalContext = new PrincipalContext(ContextType.Domain, domain))
        {
            // validate the credentials
            bool isValid = principalContext.ValidateCredentials(username, clearTextPassword);
            if (!isValid)
                throw new Exception("Invalid username or password.");
        }

    }
} 
```

# jakarta-ee - JRebel 有什么好处？

> ID：12393509
> 
> 赞同：17
> 
> 时间：2012-09-12T17:32:46.773
> 
> 标签：jakarta-ee, jrebel

我一直在检查 JRebel。根据他们的网站：

> *“JRebel 是一个任何 Java 插件，它通过将工作区中所做的更改重新加载到正在运行的 JVM 中来加速基于 JVM 的开发（Java、Scala、Groovy），无需重新启动或重新部署，在您编码时保持应用程序的状态。”*

这似乎与我们已经使用 Eclipse、Netbeans 和 IntelliJ 实现的目标相同：我们保存并立即部署我们的更改。JRebel 会给我们带来哪些额外的好处？

有人可以向我解释吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-12T22:40:49.753

如果这样配置， IDE（Eclipse、NetBeans 或 IntelliJ）会自动**重新部署**应用程序，这不是即时的。基本上，只是自动化仍然会导致应用程序的真正重新部署，包括创建新的类加载器和初始化过程中涉及的所有补充内容。

在某些情况下，IDE 结合一些容器可以保留会话状态——如果这对你有用，那就太棒了。如果不是 - 给你 - JRebel 就是答案。

在打包部署的情况下，构建阶段会增加，但使用 JRebel，您只需一次性消除所有这些。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-12T21:42:09.767

某些更改无法重新加载，尤其是在更改 jar 文件类而无需重新加载或重新启动服务器（无论您使用什么服务器）时。它会自动更改服务器中已编译的类，并在您的类路径中自动重新加载。

当您在 IDE 中保存和刷新更改时，您基本上是在重建 war 文件并将其重新部署到服务器上。这个过程仍然会变慢，尤其是在重新部署具有多个 jar 文件和 war 文件的大型应用程序并且必须刷新所有类路径时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-08T19:54:55.713

JRebel 不是 IDE 插件。JRebel 预先捆绑了 Eclipse、IntelliJ IDEA、NetBeans 和 JDeveloper 的插件，但是，JRebel 代理被设计为与 IDE 无关，并且可以在 IDE 之外使用。

如果您有疑问 JRebel 是什么，不是什么？这是一个链接，可以提供您正在寻找的所有答案：

[JRebel 是什么，不是什么？](http://zeroturnaround.com/software/jrebel/learn/faq/)

这是一个关于 JRebel 的视频：

[JRebel 视频](https://vimeo.com/57526200)

# jquery - 使用 AJAX 触摸条件加载

> ID：12393514
> 
> 赞同：0
> 
> 时间：2012-09-12T17:33:10.273
> 
> 标签：jquery, ajax, touch

我正在尝试根据 isTouchDevice 是否为真有条件地加载 .js 文件。在向#slider 添加一个类之后，该类定义了显示的滑块类型以及每个滑块所需的选项。我不知道我做错了什么，我愿意接受其他有关如何完成此操作的建议。

**更新：** [https ://github.com/woothemes/FlexSlider](https://github.com/woothemes/FlexSlider) [http://swipejs.com/](http://swipejs.com/)

JS：

```
$(document).ready(function() {
function isTouchDevice() {
return (typeof(window.ontouchstart) != 'undefined') ? true : false;
};

if (isTouchDevice == true) {//Hook up Swipe

    $.ajax({
      type: "GET",
      url: "swipe.min.js",
      dataType: "script"
    }).done(function() { //Hook up Swipe
        $("#slider").addClass("swipe");
        var slider = new Swipe(document.getElementById('slider'));
    });
};

else {//Hook up Flexslider

    $.ajax({
      type: "GET",
      url: "jquery.flexslider.js",
      dataType: "script"
    }).done(function() { //Hook up Flexslider
        $("#slider").addClass("flexslider");
        $('.flexslider').flexslider({directionNav: false});
};
}); 
```

HTML 标记：

```
<div id="slider">

     <ul class="slides">

         <li>
             <img src="images/loch-nevis.jpg" alt="" />
         </li>

         <li>
             <img src="images/snow.jpg" alt="" />
         </li>

         <li>
             <img src="images/iceland.jpg" alt="" />
         </li>

     </ul><!-- end slides -->

</div><!-- end slider --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:57:52.457

使用 jQuery getScript 方法怎么样？

```
if (isTouchDevice == true) {//Hook up Swipe
    $.getScript("swipe.min.js", 
        function() {
            $("#slider").addClass("flexslider");
            $('.flexslider').flexslider({directionNav: false })  // Removed errant ","
        }
    );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T18:10:32.160

如果 isTouchDevice 工作正常，你可以试试 lab.js 或 yepnope

lab.js 示例：

```
if (isTouchDevice===true) {
  $LAB
    .script('swipe.min.js')
    .wait(function() {
      // do some stuff
    })
} 
```

yepnope：（这可能是错误的，从未真正使用过 yepnope）

```
yepnope({
  test:isTouchDevice,
  yep:'swipe.min.js',
  callback: function (testResult,key) {
    // do some stuff
  }
}); 
```

# jquery - 使用 jQuery 比较图像 alt

> ID：12393518
> 
> 赞同：0
> 
> 时间：2012-09-12T17:33:36.907
> 
> 标签：jquery, compare, alt

我正在用简单的 hmtl 和 jquery 做一个小项目，我希望目前很难解决这个问题：在 html 上，我有这样的简单图像：

```
<img src="color.png" alt="color" width="44" height="46" /> 
<img src="gray.png" alt="gray" width="44" height="46" /> 
```

但有时 alt 是相同的，所以我想在 jquery 中创建一个“检查函数”来比较和检查图像的 alt 以及它们是否相等以执行警报。我来到这里但它不起作用

```
 jQuery(document).ready(function(){

        var grayBall = $("img[alt*='gray']");
        var colorBall = $("img[alt*='color']");

        if(colorBall.attr('alt') = grayBall.attr('alt')){
        alert("They are matching !");
        };  
    }); 
```

像将 jquery 添加到 html 之类的一切都可以，只是这个功能不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T17:37:08.083

尝试使用`==`(equality) 而不是`=`(assignment)

```
if(colorBall.attr('alt') == grayBall.attr('alt'))
{
    alert("They are matching !");
}; 
```

**更新**你试过了吗？更改一个 img 的 alt 标签并更改脚本中的选择器：

```
<img src="color.png" alt="color" width="44" height="46" /> 
<img src="gray.png" alt="color" width="44" height="46" />

jQuery(document).ready(function(){

    var grayBall = $("img[alt*='color']");
    var colorBall = $("img[alt*='color']");

    if(colorBall.attr('alt') == grayBall.attr('alt')) {
        alert("They are matching !");
    };  
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T18:05:17.240

你可以试试这个

**HTML**

```
<img src="gray.png" alt="gray" width="44" height="46" />
<img src="color.png" alt="color" width="44" height="46" />
<img src="gray.png" alt="gray" width="44" height="46" />
<img src="gray.png" width="44" height="46" /> 
```

**JS**

```
jQuery(document).ready(function(){
    var exists = {};
    $("img[alt]").each(function(){
        var alt = $(this).attr('alt');
        if (exists[alt]) alert($(this).attr('alt')+" is matching !");
        else exists[alt] = true;
    });
});​ 
```

[**演示**](http://jsfiddle.net/brBTe/)。

# jquery - 如何将一个 DIV 滑到另一个 DIV 后面

> ID：12393521
> 
> 赞同：1
> 
> 时间：2012-09-12T17:33:47.953
> 
> 标签：jquery, animation

这是我的 HTML 标记：

```
Text Text
Text Text

<div class="main_navi">
    NAVIGATION GOES HERE
</div>
<div class="sub_navi">
    SUBNAVIGATION GOES HERE
</div> 
```

我想躲在`sub_navi`后面`main_navi`，点击 时`main_navi`，`sub_navi`DIV 应该向下滑动。

我想知道如何`sub_navi`正确定位 DIV 以便滑动？负的最高位置，也许？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:40:59.230

这是您正在寻找的简单示例：

```
$(document).ready(function() {
    $('.main_navi').click(function() {
       $('.sub_navi').show(1200);
    });
  });​ 
```

### [工作示例 1](http://jsfiddle.net/ZubAb/)

另一个例子，是有点复杂的延迟，使它更平滑：

```
$(document).ready(function() {
    $('.main_navi').toggle(function() {
        setTimeout(function() {
            $('.sub_navi').show();
        }, 250);
        $('.sub_navi').animate({
            top: '+=15'
        }, 600);
    }, function() {
        setTimeout(function() {
            $('.sub_navi').hide();
        }, 200);
        $('.sub_navi').animate({
            top: '-=15'
        }, 500);
    });
});​ 
```

### [工作示例 2](http://jsfiddle.net/t9xTS/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T17:52:29.700

检查这个[小提琴](http://jsfiddle.net/sushanth009/xcBfy/)

```
$('.sub_navi').slideDown(); 
```

应该为你完成工作..

# excel - 如果列包含来自 to-remove-list 的值，则 excel 删除行

> ID：12393524
> 
> 赞同：48
> 
> 时间：2012-09-12T17:33:56.530
> 
> 标签：excel, excel-2007, office-2007

1.  假设我有一张表 -**第一**- 超过 5000 行（例如，列 ' **A** ' - ' **H** ' 每列）。
2.  在另一张表中 -**第二个**- 我有一个“要删除列表” - 一个包含 400 个值的单列“ **A** ”，每个值都包含字母数字字符串（例如：xxx1234）。
3.  如果列“ **E** ”包含“to-remove-list”中的任何值（来自第二张表的“ A ”列）**，****我**必须从第一张表中**删除***每一*行。
*******   通过*删除*整行，我的意思是删除该行并将其向上移动（不留下空白）******

 ******我该如何做到这一点？任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-09-12T22:23:18.987

给定表 2：

```
ColumnA
-------
apple
orange 
```

您可以在工作表 1 中标记工作表 2 中存在值的行：

```
ColumnA  ColumnB
-------  --------------
pear     =IF(ISERROR(VLOOKUP(A1,Sheet2!A:A,1,FALSE)),"Keep","Delete")
apple    =IF(ISERROR(VLOOKUP(A2,Sheet2!A:A,1,FALSE)),"Keep","Delete")
cherry   =IF(ISERROR(VLOOKUP(A3,Sheet2!A:A,1,FALSE)),"Keep","Delete")
orange   =IF(ISERROR(VLOOKUP(A4,Sheet2!A:A,1,FALSE)),"Keep","Delete")
plum     =IF(ISERROR(VLOOKUP(A5,Sheet2!A:A,1,FALSE)),"Keep","Delete") 
```

结果数据如下所示：

```
ColumnA  ColumnB
-------  --------------
pear     Keep
apple    Delete
cherry   Keep
orange   Delete
plum     Keep 
```

然后，您可以轻松过滤或排序工作表 1，并删除标记为“删除”的行。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-01-20T16:57:36.987

我发现了一种更可靠的方法（至少在 Excel 2016 for Mac 上）是：

假设您的长列表在 A 列中，并且要从中删除的内容列表在 B 列中，然后将其粘贴到 C 列的所有行中：

= IF(COUNTIF($B$2:$B$99999,A2)>0,"删除","保留")

然后只需按 C 列对列表进行排序，即可找到要删除的内容。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-01-31T14:00:39.993

如果使用大量需要很长时间才能手动删除的“删除”值，我会这样做。

*   - 将原始列表放入 A 列 - 将删除列表放入 B 列 - 选择两列，然后选择“条件格式”
    - 选择“突出显示单元格规则”-> “重复值”
    - 应在两列中
    突出显示重复项 - 然后选择A列，然后“排序和过滤”--->“自定义排序”
    -在出现的对话框中，选择中间选项“排序”并选择“单元格颜色”-然后
    选择下一个选项“排序顺序”并选择“无单元格颜色”“在底部”
    -所有突出显示的单元格都应位于列表的顶部。- 通过向下滚动列表选择所有突出显示的单元格，然后单击删除。******

# jquery - jQuery .change() 函数绑定到选择不起作用（在 Smarty 模板中）

> ID：12393531
> 
> 赞同：0
> 
> 时间：2012-09-12T17:34:48.210
> 
> 标签：jquery, smarty, prestashop

我有以下问题。在电子商务网站上（使用 Prestashop 制作，因此使用 Smarty），产品分类不起作用。这是一个 SELECT 字段，当用户选择某个选项（站点重新加载）时会动态更改。请看下面的代码：

首先，聪明的：

```
{if isset($orderby) AND isset($orderway)}
<!-- Sort products -->
{if isset($smarty.get.id_category) && $smarty.get.id_category}
    {assign var='request' value=$link->getPaginationLink('category', $category, false, true)}
{elseif isset($smarty.get.id_manufacturer) && $smarty.get.id_manufacturer}
    {assign var='request' value=$link->getPaginationLink('manufacturer', $manufacturer, false, true)}
{elseif isset($smarty.get.id_supplier) && $smarty.get.id_supplier}
    {assign var='request' value=$link->getPaginationLink('supplier', $supplier, false, true)}
{else}
    {assign var='request' value=$link->getPaginationLink(false, false, false, true)}
{/if} 
```

然后，jQuery：

```
<script type="text/javascript">
//<![CDATA[
{literal}
$(document).ready(function()
{
    $('#selectPrductSort').change(function()
    {
        var requestSortProducts = '{/literal}{$request}{literal}';
        var splitData = $(this).val().split(':');
        document.location.href = requestSortProducts + ((requestSortProducts.indexOf('?') < 0) ? '?' : '&') + 'orderby=' + splitData[0] + '&orderway=' + splitData[1];
    });
});
//]]>
{/literal}
</script> 
```

和 HTML：

```
<form id="productsSortForm" action="{$request|escape:'htmlall':'UTF-8'}">
    <p class="select">
        <label for="selectPrductSort">{l s='Sortuj wg'}&nbsp;</label>
        <select id="selectPrductSort">
            <option value="{$orderbydefault|escape:'htmlall':'UTF-8'}:{$orderwaydefault|escape:'htmlall':'UTF-8'}" {if $orderby eq $orderbydefault}selected="selected"{/if}>{l s='--'}</option>
            {if !$PS_CATALOG_MODE}
                <option value="price:asc" {if $orderby eq 'price' AND $orderway eq 'asc'}selected="selected"{/if}>{l s='ceny - od najniższej'}</option>
                <option value="price:desc" {if $orderby eq 'price' AND $orderway eq 'desc'}selected="selected"{/if}>{l s='ceny - od najwyższej'}</option>
            {/if}
            <option value="name:asc" {if $orderby eq 'name' AND $orderway eq 'asc'}selected="selected"{/if}>{l s='nazwy produktu - od A do Z'}</option>
            <option value="name:desc" {if $orderby eq 'name' AND $orderway eq 'desc'}selected="selected"{/if}>{l s='nazwy produktu - od Z do A'}</option>
            {if !$PS_CATALOG_MODE}
                <option value="quantity:desc" {if $orderby eq 'quantity' AND $orderway eq 'desc'}selected="selected"{/if}>{l s='dostępności'}</option>
            {/if}
        </select>
    </p>
</form> 
```

在此链接下 - [http://skleppatrioty.pl/category.php?id_category=5](http://skleppatrioty.pl/category.php?id_category=5) - 您可以看到一个工作示例。它是一个 SELECT 字段，紧挨着文本“Sortuj wg”，位于主右侧列的上部。

我错过了什么吗？感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T02:03:05.407

我检查了现场，上面的代码看起来不错。

我建议首先摆脱轮播错误。

# c++ - 立即终止线程

> ID：12393532
> 
> 赞同：0
> 
> 时间：2012-09-12T17:34:56.283
> 
> 标签：c++, multithreading, pthreads, thread-synchronization

我已经实现了一个并行运行的线程。我想要的是，每当用户按下一个按钮，比如“p”，线程应该立即停止。

我的代码是：

```
bool b=false;
pthread_t thread1=0;

void handlerforfunc3(void* arg)
{
b=true;
cout<<"Handler exited"<<endl;  //this was not output when 'in the while loop' stopped printing' 
}

void handler()   
{
cout<<"PROCESS HAS ENTERED THE HANDLER"<<endl;

rrscheduler(ready, job);
}

void* func3(void *arg)
{
 pthread_cleanup_push(handlerforfunc3, NULL);
 timer(arg); //timer() is a function called in the thread
 handler();  
 pthread_cleanup_pop(0);
}

void rrscheduler()
{
  pthread_create(&thread1, NULL, func3, (void*)(arg1));
}

int main()
{
  while(1)
  {
     char c=cin.get();
     switch(c)
     {
     case 'p':
     if(thread1!=0)
     {
     pthread_cancel(thread1);
     while(!b)
     {
      cout<<"in the while loop"<<endl;
     }
     } //thread1!=0

     b=false;
     rrscheduler();

     }//switch ends
  } //while ends
} 
```

发生的事情是，每当我尝试通过按“p”来中断时，*屏幕上都会充满“在 while 循环中”*，它会连续显示，然后在 3-4 秒*后*停止。之后既不显示“处理程序退出”，也不显示调用了 rrscheduler。此外，同时显示*“在 while 循环中*”，还显示了来自 timer() 函数的语句。

我的问题是： 1.
我怎样才能使线程立即完成执行
2.为什么在我们退出 while 循环后（在 b 为真之后）主中的 rrscheduler 没有执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:38:37.450

当您尝试取消它时，看起来线程正在调用 timer() 。计时器完成后，它应该取消。根据[pthread_cancel() 手册页](http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_cancel.html)：

> pthread_cancel() 函数请求取消该线程。目标线程可取消状态和类型确定取消何时生效。当取消被执行时，线程的取消清理处理程序被调用......

因此，取消不是立即的。根据 timer() 的实现，可能无法立即取消线程。

退出 while 循环后，main() 中的 rrscheduler() 函数不会执行，因为`thread1`它从未分配给 0。您应该按如下方式分配它：

```
if(thread1!=0)
{
   pthread_cancel(thread1);
   while(!b)
   {
     cout<<"in the while loop"<<endl;
   }
   thread1 = 0;  // <== assigning to 0 here
} //thread1!=0 
```

# ruby-on-rails - 如何在运行时访问 Ruby 类的源文件位置？

> ID：12393535
> 
> 赞同：1
> 
> 时间：2012-09-12T17:35:14.820
> 
> 标签：ruby-on-rails, ruby, metaprogramming

我想像这样访问一个类的源代码：

```
# Module inside file1.rb
module MetaFoo
  class << Object
    def bar
      # here I'd like to access the source location of the Foo class definition
      # which should result in /path/to/file2.rb
    end
  end
end

# Class inside another file2.rb
class Foo
  bar
end 
```

我可以做一些不好的事情，比如：

```
self.send(:caller) 
```

并尝试解析输出，甚至：

```
class Foo
  bar __FILE__
end 
```

但这不是我想要的，我希望有一个更优雅的解决方案。

欢迎任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T17:55:41.340

两者`$0`都会`__FILE__`对你有用。

`$0`是正在运行的应用程序的路径。

`__FILE__`是当前脚本的路径。

因此，`__FILE__`将是脚本或模块，即使它是`required`.

另外，`__LINE__`可能对你有用。

有关更多信息，请参阅“ Ruby 中的含义是[什么`__FILE__`？](https://stackoverflow.com/questions/224379/what-does-file-mean-in-ruby) ”、“ [Ruby 中的含义是](https://stackoverflow.com/questions/4687680/what-does-if-file-0-mean-in-ruby)[什么`if __FILE__ == $0`](https://stackoverflow.com/questions/4687680/what-does-if-file-0-mean-in-ruby)”和“ Ruby 中的含义是[什么`class_eval <<-“end_eval”, __FILE__, __LINE__`？](https://stackoverflow.com/questions/2496102/what-does-class-eval-end-eval-file-line-mean-in-ruby?rq=1) ” 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T22:44:52.530

您可以尝试调用：

`caller.first`

这将打印出文件名和行号。使用上面的演示文件（稍作修改：

*文件 1.rb：*

```
module MetaFoo
  class << Object
    def bar
      puts caller.first # <== the magic...
    end
  end
end 
```

*文件2.rb：*

```
require './file1.rb'

class Foo
  bar
end 
```

当我运行时`ruby file2.rb`，我得到以下输出：

```
nat$ ruby file2.rb 
file2.rb:4:in `<class:Foo>' 
```

这就是你想要的，对吧？

# r - R中按索引的多项式样本

> ID：12393536
> 
> 赞同：1
> 
> 时间：2012-09-12T17:35:16.497
> 
> 标签：r

我正在尝试从多项式中进行采样，以便通过它们的权重提取向量的元素。

例如，给定向量 v <- c(10, 30, 60) 我想要类似： [ 3, 3, 2, 3, 1, 2, 3, 2, 3, 3 ]

这是迄今为止我能想到的最好的：

```
v <- c(10, 30, 60)
apply(rmultinom(10,1,v),2,function(x) which(x==1)) 
```

这适用于小的 N 和 K，但我实际上需要从 1 到 100k 的索引集中生成 100k 个样本，因为这种方法需要一个 NxK 临时矩阵，它显然是行不通的。我也可以使用 for 循环，但我希望有现有的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T17:41:34.033

您可以只使用`sample`prob 参数

```
sample(length(v), 10, replace = T, prob = v) 
```

一些示例输出：

```
v <- c(10, 30, 60)
out <- sample(length(v), 100, replace = T, prob = v)
out
#  [1] 3 3 3 3 3 3 3 2 2 2 2 3 3 1 3 3 3 3 2 2 3 2 1 3 3 2 3 3 3 2 2 3 2 3 1 2 2 3 3
# [40] 3 2 2 2 2 3 2 1 3 3 3 3 3 3 3 3 1 2 2 3 3 3 2 3 3 3 1 3 3 3 2 1 3 3 3 2 2 3 3
# [79] 3 3 1 3 2 3 3 3 3 2 3 3 2 2 3 2 3 2 2 2 2 3
table(out)
#out
# 1  2  3 
# 8 33 59 
```

# wcf - 序列化对象和反序列化对象

> ID：12393538
> 
> 赞同：0
> 
> 时间：2012-09-12T17:35:23.630
> 
> 标签：wcf, windows-phone-7.1

我使用以下代码，但它给出了错误

**服务1.svc.cs**

```
 public static byte[] SerializeObject<T>(T obj)
    {
        using (MemoryStream ms = new MemoryStream())
        {
            using (XmlDictionaryWriter writer = XmlDictionaryWriter.CreateBinaryWriter(ms))
            {
                DataContractSerializer dcs = new DataContractSerializer(typeof(T));
                dcs.WriteObject(writer, obj); writer.Flush();
                return ms.ToArray();
            }
        }
    } 
```

客户端代码 Windows phone

```
public static T DeserializeObject<T>(byte[] xml) 
    { 
        using (MemoryStream memoryStream = new MemoryStream(xml)) 
        {
            using (XmlDictionaryReader reader = XmlDictionaryReader.CreateBinaryReader(memoryStream, XmlDictionaryReaderQuotas.Max)) 
            {
                DataContractSerializer dcs = new DataContractSerializer(typeof(T)); 
                return (T)dcs.ReadObject(reader); 
            } 
        } 
    } 
```

我从下面的代码中调用这个**DeserializeObject**

```
 void svc_Get_Conn(object send, GetConnCompletedEventArgs e)
    {  
        CookieContainer con =DeserializeObject<CookieContainer>(e.Result);
    } 
```

这给出了以下**错误**

```
Message = "Type 'System.Net.PathList' with data contract name 'PathList:http://schemas.datacontract.org/2004/07/System.Net' is not expected. Consider using a DataContractResolver or add any types not known statically to the list of known types - for example, by using... 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:14:14.047

CookieContainer 不能序列化。检查[此](https://stackoverflow.com/questions/1777203/c-writing-a-cookiecontainer-to-disk-and-loading-back-in-for-use)解决方法

干杯

# jquery - 将文本从一个输入复制到另一个输入时，使用 Jquery 去除非 alpha 字符

> ID：12393544
> 
> 赞同：9
> 
> 时间：2012-09-12T17:35:58.553
> 
> 标签：jquery

在我的网站上，我有两个输入字段：标题和股票代码。我有两个目标：

1.  当用户在标题字段中输入文本时，应将标题字段中的文本复制到股票代码字段。

2.  我还希望在复制过程中去除非字母数字字符。

我发现[本教程](https://stackoverflow.com/questions/8515265/jquery-clone-element-altering-id-then-use-keyup-not-working)解释了如何实现第一个目标。这是我的工作示例：

[http://jsfiddle.net/2gezC/1/](http://jsfiddle.net/2gezC/1/)

对于第二部分，我发现很难找到关于在 Jquery 中剥离字符的教程，因为大多数教程都是针对 JavaScript 的。

我找到[了本教程](http://php.refulz.com/validations-with-jquery-%E2%80%93-strip-whitespaces-special-characters-and-html-tags/)并尝试将其集成到我的代码中，如下所示：

```
(function ($) {
    $(document).ready(function () {

        $('input#edit-title-fragment').keyup(function () {
            var str = $(this).val();
            str = str.replace(/[^a-zA-Z 0-9]+/g, '');
            var txtClone = $(this).val();
            $('input#edit-sku-fragment').val(txtClone);
        });
    });

})(jQuery); 
```

但是，它不起作用。有人可以告诉我我做错了什么。谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-12T17:38:21.770

这就是你正在做的事情：

```
// Get the user input from "this" and put it in str variable
var str = $(this).val();
// Remove all non alpha-nums from str and store it back in the str variable
str = str.replace(/[^a-zA-Z 0-9]+/g, '');
// Get the user input from "this" (yes, again) and put it in the txtClone variable
var txtClone = $(this).val();
// Set your other textbox to be the value in txtClone
$('input#edit-sku-fragment').val(txtClone); 
```

你发现错误了吗？您应该将其设置为`str`。

```
$('input#edit-sku-fragment').val(str); 
```

现在可以使用：http: [//jsfiddle.net/2gezC/2/](http://jsfiddle.net/2gezC/2/)

此外，正如评论所指出的，jQuery 是一个**基于**JavaScript 构建的库。它是用 JavaScript 本身编写的，您可以通过浏览它的源代码看到；[https://github.com/jquery/jquery](https://github.com/jquery/jquery)

# mysql - 如何在 MySQL 查询中为每个日期添加值

> ID：12393546
> 
> 赞同：3
> 
> 时间：2012-09-12T17:36:14.207
> 
> 标签：mysql, sql

我有以下 sql 查询：

```
 SELECT DATE(time), ROUND(AVG(out_temp),2)
    FROM data_table
    WHERE id= 1 AND time BETWEEN '2012-08-18' AND '2012-08-30'
    GROUP BY DATE(time)
    ORDER BY time ASC 
```

这将返回：

```
 date         avg_temp
    2012-08-18   11.41
    2012-08-19   5.90
    2012-08-28   11.22
    2012-08-29   10.07 
```

到目前为止一切正常......但我想添加具有恒定值的缺失日期，如下所示：

```
 date         avg_temp
    2012-08-18   11.41
    2012-08-19   5.90
    2012-08-20   <value>
    ...          ...
    2012-08-27   <value>
    2012-08-28   11.22
    2012-08-29   10.07 
```

我应该如何修改我的查询？有人可以帮我解决这个问题吗？我阅读了一些关于使用预填充日期值创建单独的日历表的帖子，但我仍然没有让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:42:20.983

如果您的数据表实际上有每个日期的数据，您可以这样做：

```
SELECT thedate, coalesce(ROUND(AVG(out_temp),2), <value>)
FROM (select distinct date(time) as thedate
      from data_table
     ) dates left outer join
     data_table dt
     on date(time) = thedates.date
WHERE id= 1 AND thedate BETWEEN '2012-08-18' AND '2012-08-30'
GROUP BY thedate
ORDER BY time ASC 
```

您需要的是一个驱动表来生成您需要的日期。然后，您可以左连接到此表，以获取所需的摘要。COALESCE 函数允许您输入默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T17:44:14.300

创建一个包含您需要的所有日期的表，然后执行 LEFT JOIN。例如

```
CREATE TABLE calendar ( day DATE PRIMARY KEY ); 
```

然后插入表中，可能在您的编程语言上使用循环（伪代码）：

```
for day in day_range( start_date, end_date ):
   query( 'INSERT INTO calendar VALUES ( ' + day + ' );' ); 
```

然后做一个左连接：

```
SELECT DATE(day), ROUND(AVG(out_temp),2)
FROM data_table LEFT JOIN calendar ON data_table.time = calendar.day
WHERE id= 1 AND day BETWEEN '2012-08-18' AND '2012-08-30'
GROUP BY DATE(day)
ORDER BY day ASC 
```

# javascript - Eclipse JavaScript 开发工具有奇怪的“全部折叠”折叠行为

> ID：12393553
> 
> 赞同：1
> 
> 时间：2012-09-12T17:36:57.037
> 
> 标签：javascript, eclipse, folding, jsdt

当我折叠所有折叠时（如 Window > Preferences > General > Keys 中的键命令“Collapse All”），JSDT 中的折叠有一些奇怪的事情（可能是一个错误）。如果我然后只展开一个折叠，它会展开并在展开区域内不应该出现的地方留下许多折叠标记，如下图所示：

[http://i.imgur.com/XGeky.png](http://i.imgur.com/XGeky.png)

更糟糕的是，有时当我折叠所有折叠然后通过单击 (+) 符号来切换它们时，折叠会变得疯狂并折叠并展开完全错误的线，而这些线根本不应该是任何折叠。

如果我将光标放在其中一个额外的折叠标记上并输入任何内容，所有额外的折叠标记都会消失。

自 JSDT 1.2 以来，这种行为似乎没有改变（我使用 1.4.0.v20111109）。这是一个已知的错误，是否有任何修复或解决方法？

# c - 在 beaglebone 中创建服务器套接字

> ID：12393554
> 
> 赞同：1
> 
> 时间：2012-09-12T17:36:58.653
> 
> 标签：c, serversocket

我是使用 beaglebone 的新手，我需要一些关于我面临的一些问题的帮助。

我用 c 编写了一个代码（在带有 ubuntu 的笔记本电脑上运行），其中打开了一个服务器套接字（运行一个 apache 服务器），然后另一个设备通过互联网连接到它。

我想在 beaglebone 中使用 ansgtrom 发行版（板附带的发行版）做同样的事情。我读过 angstrom 发行版附带 cloud9（据我了解，它充当服务器，如 apache）。

那么，如何在 cloud9-beaglebone 中创建/打开/使用服务器套接字（通过用 c 编写的程序）？

另外，如何配置 cloud9 来存储某些网页？这种配置与apache中的配置相似吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T16:27:33.307

Cloud9 IDE 是用于开发 Node.JS 代码的 IDE。

今天使用的 Node.JS 版本是 0.6.20。nodejs.org 主页上有示例，特定版本位于[http://nodejs.org/docs/v0.6.20/](http://nodejs.org/docs/v0.6.20/)。

为了提供网页，我建议你研究一下 ExpressJS 之类的框架。您可以使用 Cloud9 IDE 或命令行下的“npm”实用程序来安装 ExpressJS。

由于 Cloud9 IDE 允许您编辑 C 代码，因此您可以创建打开和服务套接字的典型 C 代码。安装 pkg-config 是为了帮助您链接库。您需要访问[https://beaglebone.local](https://beaglebone.local)以使用 Gate One ssh 进入开发板（用户名：root，密码：）并从命令行运行 C 编译器。您可以使用在 Ubuntu 下使用的相同工具，例如“make”和“g++”。

# core-data - 核心数据模型

> ID：12393556
> 
> 赞同：0
> 
> 时间：2012-09-12T17:37:05.110
> 
> 标签：core-data, entity, nsmanagedobject

我在寻找建立核心数据模型的最佳方法时遇到了一些麻烦......让我解释一下我目前的情况......

我有四个实体

1) 比赛 2) 球队 3) 球员 4) 球员统计

每支**球队**都有**球员**，球队进行**比赛**。

**PlayerStats**包括诸如 pointsScored、minutesPlayed 等基本上与某个游戏中的事物直接相关的统计数据。

我需要弄清楚在何处/何时在 ManagedObjectContext 中插入 PlayerStats 实体。显然，每个**PlayerStats**实体都必须保留对它来自的**Player实体的引用。**

需要建立数据库，以便我可以回去查看团队，然后查看其球员，然后查看其参加过的球员比赛，然后查看该特定比赛的球员统计数据......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T19:04:37.507

我不确定我是否关注了整个讨论，但我确实有足够的能力为您提供这个建议作为答案。

不要独立思考你的核心数据模型。Core Data 提供完整的对象图管理，包括持久性。

如果我是你，我会坐下来进行我的设计，设计对象、它们的关系以及整个事物**，甚至不考虑核心数据或数据库**。首先为您的所有对象、数据、交互、API 等进行适当的设计。

然后，当您完成设计时，您应该能够立即确定您的实体、关系和属性。基本上，如果您的核心数据模型没有明显超出您的设计，那么您的设计可能是缺乏的。返回并迭代您的设计。

您应该能够完成整个设计，甚至无需将 Core Data 视为实现细节。

# .net - How do I handle this Metro app's async exception?

> ID：12393561
> 
> 赞同：0
> 
> 时间：2012-09-12T17:37:41.740
> 
> 标签：.net, asynchronous, exception-handling, microsoft-metro, async-await

I'm having some trouble with an exception I am getting from some async code. I don't want to block my thread while the

```
private async Task ThrowSomeExceptionAsync()
{
    //Some long running process would go here...

    throw new Exception();
} 
```

This is the method I want to call, and to catch the exception. I am using the [Application.UnhandledException](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.application.unhandledexception) event to catch my exceptions, but in this case it's not being caught.

I tried waiting for the Exception property on the returned Task object to be populated, but that blocks while the task is being completed.

Using the ContinueWith method prevented blocking, but any exceptions thrown from the delegate weren't caught by the UndhandledException event.

How can I execute this code in an async fashion, yet still use my UnhandledException event for error handling? Am I missing some fundamental concept about that event?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T19:20:25.880

The reason the exception isn't being sent to the UnhandledException event is that the event only covers exceptions raised in the XAML framework. The delegate that's throwing the exception exists outside of the XAML framework, and doesn't pass it along so that the event can be raised. The solutions appears to be in the form of a static class that will handle exceptions, and call that from both the delegate and within the UnhandledException event.

# c++ - c++ access_once

> ID：12393562
> 
> 赞同：2
> 
> 时间：2012-09-12T17:37:45.773
> 
> 标签：c++, c++11

我正在尝试`ACCESS_ONCE`在 c++11 中实现相当于 Linux 宏的功能。 `ACCESS_ONCE(x)`获取 x 的地址，转换为指向与 x 相同类型的 volatile 的指针，然后取消引用它。这会强制编译器不优化通过此宏对 x 的访问（并使访问仅在此处发生一次）。

我在 c++11 中的尝试包括`decltype`：

```
#define ACCESS_ONCE(x) (*static_cast<decltype(x) volatile *>(&(x))) 
```

这适用于大多数情况，但我像这样使用它一次：

```
void foo(void **bar) {
  while (ACCESS_ONCE(*bar) != NULL)
    ;
} 
```

这失败并出现错误：

```
'volatile' qualifiers cannot be applied to 'void*&' 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T19:38:08.187

```
template<typename T>
inline T volatile &access_once(T &t) {
    return static_cast<T volatile &>(t);
} 
```

这避免了宏，更简单，因为模板签名中隐含了类型推导和引用删除，并且它避免了冗余的地址和引用运算符（引用类型之间的静态转换被定义为与获取地址、转换和然后取消引用）。它同样高效，我认为它不依赖于 C++11 中的任何内容。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-12T17:42:19.600

将宏更改为：

```
#define ACCESS_ONCE(x) (*static_cast<std::remove_reference<decltype(x)>::type volatile *>(&(x))) 
```

取消引用指针会导致引用。宏正在尝试将其转换为 a`void *& volatile`而不是`void * volatile`您想要的。您不能将 volatile 限定符应用于引用类型，因此您必须使用 std::remove_reference 将其更改为正常的非引用类型。

# asp.net-mvc - 如果没有客户端代码（MVC）没有子项，如何隐藏内容占位符

> ID：12393563
> 
> 赞同：0
> 
> 时间：2012-09-12T17:37:51.170
> 
> 标签：asp.net-mvc, master

我在 MasterPageView 中有一个 ContentPlaceholder。我所有的其他页面都来自同一个母版，我有一个页面需要这个母版中大约 70% 的行为。母版中有一个导航面板，即使页面留空，它也会吐出不必要的 html。看起来像这样：

```
<div class="span3">
    <div class="side_navigation">
        <ul>
            <asp:ContentPlaceHolder ID="SideNavigation" runat="server" />
        </ul>
    </div>
</div><%-- /master sub-navigation --%> 
```

每当我的占位符（SideNavigation）有 0 个孩子时，我只想隐藏所有这些标记。我不想使用 javascript。我宁愿在服务器上完成这项工作，并以较少的责任和标记将其交付给客户端。我已经尝试过执行“this.Sid​​eNavigation.Controls.Count”，但它最终总是为 0。如果有办法我可以绑定到加载的事件，然后测试这个逻辑，那就太好了。我可以为我的主人制作一个代码隐藏文件，但如果能够仅在 .master 文件中完成我的目标，那就太好了。

让我知道你的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T17:25:47.037

我可能会建议为没有导航的页面使用不同的母版页。您可以拥有嵌套的母版页，因此您不一定需要复制代码来执行此操作。
但是，如果您确实希望保持这样，我个人会使用一些 javascript（使用 jquery），如下所示

```
$(function(){
  if($('.span3 .side_navigation ul li').length() == 0){
    $('.span3').hide(); 
  }
}); 
```

显然我会给 span3 一个 ID，让它不会隐藏每个 span3，但希望你能明白。

# java - 如何将不同的列表分组到另一个列表中？

> ID：12393565
> 
> 赞同：0
> 
> 时间：2012-09-12T17:38:00.237
> 
> 标签：java, jpa, collections

我的列表包含三个级别的列表。我使用 JPA 从三个不同的数据库表中获取这些数据。

关于更多细节，我有三个不同的对象（组、类型、项目）：一个包含类型列表的组，其中包含项目列表。

我只想从不同的类型和组中获取几个项目，然后像列表一样返回这些项目。

问题是：有没有一种优雅而简单的方法来做到这一点？还是我真的需要获取所有项目并逐级分组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:53:52.667

Guava 可能会提供一个很好的解决方案：

```
 Predicate<Group> matchingGroup = ...;
 Predicate<Type> matchingType = ...;

 Function<Group, Type> getType = new Function<Group, Type>(){};
 Function<Type, Item> getItem = new Function...;

 // starting point
 List<Group> myGroups;
 Iterable<Item> filteredItems =
    Iterables.transform(
       Iterables.filter( 
          Iterables.transform(
              Iterables.filter(myGroups, matchingGroup),
              getType),
          matchingType),
       getItem); 
```

或扩展：

```
 // starting point
 List<Group> myGroups;
 Iterable<Type> types = Iterables.transform(
              Iterables.filter(myGroups, matchingGroup),
              getType);
 Iterable<Item> items = Iterables.transform(
              Iterables.filter(types, matchingType),
              getItem); 
```

可能有一种方法可以使用 Predicates / Functions compose 方法来缩短它。

番石榴来[了](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/index.html)

# erlang - Erlang gen_server 如何 start_link 另一个节点上的 gen_server？

> ID：12393568
> 
> 赞同：1
> 
> 时间：2012-09-12T17:38:05.810
> 
> 标签：erlang, nodes, distributed, erlang-otp, gen-server

我有一个 Erlang 应用程序，它有点太消耗资源而无法留在一个节点上。我正在让 gen_servers 从一个进程移动到另一个进程——结果证明这相对容易。我遇到了最后一个障碍：让创建这些 gen_servers 的工厂进程在远程节点而不是本地节点上生成它们。start_link 的默认行为显然是仅在本地启动，但我看不到任何更改它的选项。

看来我将不得不对解决方案具有创造性，并想看看那里是否有人已经成功地实施了类似的东西。IOW，推荐的解决方案是什么？

**编辑**

我正在查看由调用触发的调用链：

```
gen_server:start_link(?Module, Args, []) 
```

gen_server:start_link/3:

```
start_link(Mod, Args, Options) ->
    gen:start(?MODULE, link, Mod, Args, Options). 
```

创：开始/ 5：

```
start(GenMod, LinkP, Mod, Args, Options) ->
    do_spawn(GenMod, LinkP, Mod, Args, Options). 
```

gen:do_spawn/5:

```
do_spawn(GenMod, link, Mod, Args, Options) ->
    Time = timeout(Options),
    proc_lib:start_link(?MODULE, init_it,
                        [GenMod, self(), self(), Mod, Args, Options], 
                        Time,
                        spawn_opts(Options)); 
```

proc_lib:start_link/5:

```
start_link(M,F,A,Timeout,SpawnOpts) when is_atom(M), is_atom(F), is_list(A) ->
    Pid = ?MODULE:spawn_opt(M, F, A, ensure_link(SpawnOpts)),
    sync_wait(Pid, Timeout). 
```

**这最终让我们来到了有趣的地方。**有一个 spawn_opt/4 匹配：

```
spawn_opt(M, F, A, Opts) when is_atom(M), is_atom(F), is_list(A) ->
    ...
    ... 
```

**但是**，有一个实际上对我有用：

```
spawn_opt(Node, M, F, A, Opts) when is_atom(M), is_atom(F), is_list(A) ->
    ...
    ... 
```

令人难以置信的是，这没有暴露。我意识到粗心的程序员可能会尝试 gen_server:start_link 恰好在火星上运行的 erlang 节点上的进程，从而阻塞调用半小时，但可以肯定的是，这是程序员的注意。我真的坚持修改 OTP 或编写某种临时解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T07:37:25.940

我们不`start_link`直接在远程节点上使用服务器。为了良好的程序结构和简单性，我们在远程节点上启动一个单独的应用程序，并将远程进程的创建委托给远程应用程序中运行的某个进程。

由于链接到一个进程主要是为了监督或监控，我们更喜欢与本地监督者而不是远程进程进行链接。如果您需要任何远程进程的活动状态，我建议使用[`erlang:monitor`](http://www.erlang.org/doc/man/erlang.html#monitor-2)和[`erlang:demonitor`](http://www.erlang.org/doc/man/erlang.html#demonitor-1).

典型的分布式设置：

```
Node1
+---------------+                          Node2
| App1          |                          +---------------+
|   Supervisor1 |  Proc Creation Request   | App2          |
|     Processes | -----------------------> |   Supervisor2 |
|     ......    |                          |      |
|     ......    |                          |      | Create Children
|     ......    |       Monitor            |      V
|     ......    | -----------------------> |     Processes |
+---------------+                          |     ......    |
                                           +---------------+ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T01:00:12.833

也许`rpc`模块可以帮助你。特别是功能[async_call](http://www.erlang.org/doc/man/rpc.html#async_call-4)。

# c# - 获取 datacontext.ExecuteQuery 返回的动态对象的属性

> ID：12393570
> 
> 赞同：2
> 
> 时间：2012-09-12T17:38:13.310
> 
> 标签：c#, sql, asp.net-mvc, asp.net-mvc-3, model-view-controller

我正在尝试从数据库中获取数据。

我的控制器代码：

```
var data = datacontext.executequery<dynamic>("select id, name from sometable");
return View(data); 
```

我的视图代码：

```
@model IEnumerable<dynamic>

@foreach(var item in Model)
{
@item.name
} 
```

所以当我运行它时，我得到错误“对象”不包含“名称”的定义

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T21:39:01.587

这与工作无关，因为当您告诉 LINQ to SQL 执行时，`datacontext.executequery<dynamic>`您实际上是在告诉它执行`datacontext.executequery<object>`

因此，您的查询返回的所有内容都是`object`类型。

原因是返回类型的映射是通过反射检查编译类型传递的 T 来发生的，并且由于您传递了*dynamic*，因此在编译时它等同于*object*。

如果你真的想做这样的事情（动态 API），你可能想看看 Dapper - [http://code.google.com/p/dapper-dot-net/](http://code.google.com/p/dapper-dot-net/)

# oracle - ORA-12899，而实际值长度小于最大值

> ID：12393579
> 
> 赞同：1
> 
> 时间：2012-09-12T17:38:57.410
> 
> 标签：oracle, ora-12899

我使用 SQL*Loader 加载了一些数据并获得了以下奇怪的错误消息：

ORA-12899: 列 AELS_AENDBESCHR 的值太大（实际值：69，最大值：70）

ORA-12899: 列 AELS_AENDBESCHR 的值太大（实际值：70，最大值：70）

实际上这些值没有超过最大值，那么这些消息到底在做什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T07:32:46.530

实际上，问题出在数据库的字符集中。我试图将假定为 1 字节字符集的数据放入具有 UTF-8 编码的数据库中，其中德语符号“äöü”占用 2 个字节而不是 1 个。[我使用这个wikibooks](http://de.wikibooks.org/wiki/Oracle%3a_CharacterSet_%C3%A4ndern)更改了字符集，现在它可以工作了。唯一的问题是我不能在它之后使用 APEX。

# ruby-on-rails - 安装 tzinfo (0.3.33) 时出错，Bundler 无法继续

> ID：12393580
> 
> 赞同：1
> 
> 时间：2012-09-12T17:38:59.893
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, tzinfo

您好，我正在运行 bundle install 并收到以下错误消息。我正在使用 rails 安装工具包@ [http://railsinstaller.org/](http://railsinstaller.org/)

Errno::EINVAL：无效参数 - C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9。1/cache/tzinfo-0.3.33.gem 安装 tzinfo (0.3.33) 时出错，Bundler 无法继续。

`gem install tzinfo -v '0.3.33'`在捆绑之前确保成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:42:04.373

I'm on windows and use PIK for ruby version control. I ran

```
pik gem install tzinfo 
```

that installed gem on all versions of ruby.

then ran bundle install... Had a few other similar errors that I resolved in the same manner.

Bottom line: install gem per the error description.

if you don't use PIK or RVM just run: gem install tzinfo

good luck

# google-chrome - 无法根据特定条件动态更改 chrome 扩展的图标满足

> ID：12393585
> 
> 赞同：3
> 
> 时间：2012-09-12T17:39:16.367
> 
> 标签：google-chrome, google-chrome-extension, google-chrome-devtools

我想在满足特定条件时自动更改 Chrome 扩展程序的图标。我尝试了以下功能：

```
chrome.browserAction.setIcon({path: 'image path'}) 
```

我通过单击图标按钮来实现我的功能，当弹出窗口出现并且图标动态更改时，如果满足特定条件。

问题是，我想要这个功能自动，不需要点击图标。

实际上我是 chrome 开发的新手，可能需要在“manifest.json”文件中注册该方法，该方法会自动触发更改图标的功能，并且当我们的条件满足时，它会更改图标。

提前致谢。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-31T02:22:32.543

我认为背景页面可以帮助您解决这个问题。 [http://developer.chrome.com/extensions/background_pages.html](http://developer.chrome.com/extensions/background_pages.html) 它是一个长时间运行的脚本，用于在后台管理某些任务或状态。您可以使用 setInterval 来检查特定条件。希望这个参考可以帮助到你！

# javascript - jQuery Tools Validator 自定义效果 - 添加和删除效果

> ID：12393586
> 
> 赞同：0
> 
> 时间：2012-09-12T17:39:25.313
> 
> 标签：javascript, jquery, forms, validation

我已经为此工作了很长一段时间，并且很难过。我希望有人能给我一些指导。首先是代码：

jQuery：

```
$("#paperwork").bind("onFail", function(e, errors)  {
if (e.originalEvent.type == 'submit') {

    $.each(errors, function()  {
        var input = this.input;
        input.parent().css({color: 'red'}).change(function()  {
            input.parent().css({color: '#444'});
        });
    });
} 
```

});

以及 HTML 的示例：

```
<input id="group_1" required="required" type="radio" name="attending" value="Yes"  />Yes
<input id="group_1" type="radio" name="attending" value="No"  />No
<input id="group_1" type="radio" name="attending" value="Not Provided" />Not Provided

<input id="group_1" class="single_text_input" type="text" name="primary_referral"  />
<input id="group_1" class="single_text_input" type="text" name="secondary_referral" />
<span class="group_1">Referrals</span> 
```

有几个部分看起来很像上面。每个都有一个对应的`<span>`（例如“2”，“3”等......）我想要完成的是：

当验证器运行时，`.parent()`每个输入的元素变为红色。那是有效的。当用户对输入进行更改时，`.parent()`元素将返回其原始颜色。这也行得通。

除此之外，我想将每个`input`部分的相应`<span>`红色（文本或背景）。然后，当该部分中的所有输入都更改时，对应的输入将`<span>`返回到其原始外观。一个问题（至少对我而言）是`div`包含输入和对应的输入`<span>`似乎并不相互关联，无论是通过`.parent()`、`.child()`还是`.closest`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:45:06.903

> 一个问题（至少对我而言）是包含输入的 div 和对应的 div 似乎并不相互关联，无论是通过 .parent()、.child() 还是 .closest。

通过尝试在像 Google Chrome Inspector 这样的实时控制台中达到跨度来检查这是否属实。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T17:45:09.790

只需为这些 div 设置一个通用的类，以便您稍后可以通过该类选择它们。

# google-app-engine - 泽西岛链接支持与 Google App Engine 问题

> ID：12393589
> 
> 赞同：2
> 
> 时间：2012-09-12T17:39:33.907
> 
> 标签：google-app-engine, jersey, hateoas

我没有设法将 Jersey 链接支持与 Google App Engine 一起使用，我在尝试访问应用程序时遇到了这些异常：

```
Caused by: javax.el.ELException: Could not find expression factory class
...
Caused by: java.lang.ClassNotFoundException: de.odysseus.el.ExpressionFactoryImpl 
```

如文档中所述，我将其放在 web.xml 的 Jersey servlet 部分：

```
<init-param>
 <param-name>com.sun.jersey.spi.container.ContainerResponseFilters</param-name>
 <param-value>com.sun.jersey.server.linking.LinkFilter</param-value>
</init-param> 
```

我还将 jersey-server-linking-1.13.jar 添加到我的项目的 WEB-INF/lib 目录中。

我尝试先添加 el-api.jar，然后将 juel-2.1.0.jar 添加到 WEB-INF/lib 目录，但我仍然收到这些错误。

我想知道是否有人可以给我一些关于如何处理这个问题的提示。当我不使用 Jersey 链接 jar 时，一切都按预期工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-19T22:01:38.480

我的 GAE 应用程序也有类似的问题。它与 el-api 和 el-impl 工作正常，但随着开发的进展开始要求 de.odysseus.el.E​​xpressionFactoryImpl。我进行了切换，但是当我将 JUEL 添加到我的 pom.xml 时，我得到了与 John Prince 相同的错误 (java.security.AccessControlException)。

GAE 用户的解决方案是使用 JUEL 2.2.7。

在撰写本文时，2.2.7 在 maven Central 中不可用。但是，您可以在

```
<repository>
    <id>repo-id</id>
    <name>repo-name</name>
    <url>https://oss.sonatype.org/content/repositories/snapshots/</url>
</repository> 
```

并链接到您需要的任何内容

```
<dependency>
    <groupId>de.odysseus.juel</groupId>
    <artifactId>juel-api</artifactId>
    <version>2.2.7-SNAPSHOT</version>
</dependency>

<dependency>
    <groupId>de.odysseus.juel</groupId>
    <artifactId>juel-impl</artifactId>
    <version>2.2.7-SNAPSHOT</version>
</dependency>

<dependency>
    <groupId>de.odysseus.juel</groupId>
    <artifactId>juel-spi</artifactId>
    <version>2.2.7-SNAPSHOT</version>
</dependen 
```

来源：[https ://github.com/beckchr/juel/issues/73](https://github.com/beckchr/juel/issues/73)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-06T14:22:27.270

这个问题是（或者更确切地说是）由于缺少统一表达式语言的实现。EL API 定义了一个静态方法来查找`ExpressionFactory`类的实现。有多种方法可以定义要使用的实现：

> *   使用服务 API（详见 JAR 规范）。如果名称为 META-INF/services/javax.el.E​​xpressionFactory 的资源存在，则其第一行（如果存在）用作实现类的 UTF-8 编码名称。
> *   使用 JRE 目录中的属性文件“lib/el.properties”。如果该文件存在并且可以通过 java.util.Properties.load(InputStream) 方法读取，并且它包含一个键为“javax.el.E​​xpressionFactory”的条目，则该条目的值用作实现类。
> *   使用 javax.el.E​​xpressionFactory 系统属性。如果定义了具有此名称的系统属性，则将其值用作实现类的名称。
> *   使用平台默认实现。
> 
> （来源：[http://docs.oracle.com/javaee/7/api/javax/el/ExpressionFactory.html#newInstance()](http://docs.oracle.com/javaee/7/api/javax/el/ExpressionFactory.html#newInstance())）

App Engine 似乎已将 JUEL 定义为默认实现，但未提供相应的包。

为了解决这个问题，您需要**(1)**提供 EL API 和实现包，以及**(2)**使用上述方法之一来链接它。有关详细信息，请参阅[https://stackoverflow.com/a/19814199/2099217](https://stackoverflow.com/a/19814199/2099217)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T17:50:22.760

问题是由于找不到 de.odysseus.el.E​​xpressionFactoryImpl 类。我将假设您已将提到的 jar 添加到 WEB-INF\lib 文件夹中。

我建议您通过 Project Explorer 查看 JAR 文件，在 Eclipse 中简单地展开它们，看看您是否可以在您添加的任何 JAR 文件中找到 de.odysseus.el.E​​xpressionFactoryImpl 类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T20:25:14.120

我通过添加“juel”和“juel-impl”作为我的项目的依赖项“解决”了这个问题（我们使用的是 Maven；如果您手动执行此操作，您可能必须弄清楚这些项目包含的确切内容）。

然而，一旦我这样做了，我就开始得到一个不同的例外：

```
java.security.AccessControlException: access denied (java.io.FilePermission C:\Program Files (x86)\Java\jdk1.6.0_33\jre\lib\el.properties read)
    at java.security.AccessControlContext.checkPermission(AccessControlContext.java:374)
    at java.security.AccessController.checkPermission(AccessController.java:546)
    at java.lang.SecurityManager.checkPermission(SecurityManager.java:532)
    at com.google.appengine.tools.development.DevAppServerFactory$CustomSecurityManager.checkPermission(DevAppServerFactory.java:289)
... 
```

我很确定这是因为它违反了 GAE 限制。

我在原来的 ClassNotFound 异常中注意到它试图使用 URLClassLoader；我还想知道这个问题最终是否也是 GAE 问题。

此时，Jersey 链接支持似乎与 GAE 不兼容。

# spring - Maven + Spring 3 大型 Web 应用程序中的 Proguard

> ID：12393590
> 
> 赞同：3
> 
> 时间：2012-09-12T17:39:34.863
> 
> 标签：spring, jakarta-ee, maven, proguard

我整天都在尝试混淆我们正在开发的 Web 应用程序（我们将允许大客户将其托管在他们的服务器上），并且在浏览、搜索和尝试了很多之后，我无法减少收到的错误数量： “有 7283 个未解析的类或接口引用”

我从 20K 开始，所以我设法得到了一些改进......

这是我正在使用的 pom 配置：

```
<plugin>
                <groupId>com.github.wvengen</groupId>
                <artifactId>proguard-maven-plugin</artifactId>
                <executions>
                    <execution>
                        <phase>package</phase>
                        <goals>
                            <goal>proguard</goal>
                        </goals>
                    </execution>
                </executions>
                <dependencies>
                    <dependency>
                        <groupId>net.sf.proguard</groupId>
                        <artifactId>proguard-base</artifactId>
                        <version>4.8</version>
                        <scope>runtime</scope>
                    </dependency>
                </dependencies>             
                <configuration>
                    <obfuscate>true</obfuscate>
                    <includeDependency>true</includeDependency>
                    <options>
                        <option>-target 1.6</option>                    
                        <option>-allowaccessmodification</option>
                        <option><![CDATA[
                            -keep public class * {
                                public <init>(...);  
                                public void set*(...); 
                                public void init*(...); 
                                public void close*(...); 
                                public ** get*(...); 
                                public boolean is*(...); 
                                public boolean can*(...); 
                            } 
                            ]]></option>
                        <option><![CDATA[
                            -keepclassmembers class * { 
                                @javax.inject.Inject *; 
                                @javax.inject.Named *; 
                                @org.springframework.beans.factory.annotation.Autowired *; 
                                @org.springframework.beans.factory.annotation.Qualifier *; 
                                @org.springframework.beans.factory.annotation.Value *; 
                                @org.springframework.beans.factory.annotation.Required *;
                            }
                            ]]></option>                            
                        <option>-keep @org.springframework.stereotype.Service class *</option>
                        <option>-keep @org.springframework.stereotype.Controller class * </option>
                        <option>-keep @org.springframework.stereotype.Component class * </option>
                        <option>-keep @org.springframework.stereotype.Repository class *</option>
                    </options>
                    <inFilter>com/proton/**,!com/proton/protocol/**</inFilter>
                    <injar>${build.warname}.${project.packaging}</injar>
                    <outjar>${build.warname}-proguarded.${project.packaging}</outjar>
                    <outputDirectory>${project.build.directory}</outputDirectory>
                    <addMavenDescriptor>false</addMavenDescriptor>
                    <libs>
                        <lib>${java.home}/lib/rt.jar</lib>
                        <lib>${java.home}/lib/jce.jar</lib>                      
                        <lib>${java.home}/lib/jsse.jar</lib>
                    </libs>
                    <proguardVersion>4.8</proguardVersion>
                </configuration>
            </plugin> 
```

结果日志的很大一部分： [https ://raw.github.com/gist/3708235/37b4cada40fa4742fd1e3ef0f24efd69fa232b28/Proguard](https://raw.github.com/gist/3708235/37b4cada40fa4742fd1e3ef0f24efd69fa232b28/Proguard)

似乎至少有很大一部分错误来自 Spring 库，我确信我必须大量使用 keep 规则来修复一些动态调用，但如果有人可以帮助解决所有这些错误，我会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-04T15:06:48.730

我忘了我有这个问题，这是我们现在使用的设置：

```
<plugin>
            <groupId>com.github.wvengen</groupId>
            <artifactId>proguard-maven-plugin</artifactId>
            <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>proguard</goal>
                    </goals>
                </execution>
            </executions>
            <dependencies>
                <dependency>
                    <groupId>net.sf.proguard</groupId>
                    <artifactId>proguard-base</artifactId>
                    <version>4.8</version>
                    <scope>runtime</scope>
                </dependency>
            </dependencies>             
            <configuration>
                <obfuscate>true</obfuscate>
                <includeDependency>true</includeDependency>
                <options>
                    <option>-target 1.6</option>                    
                    <option>-dontoptimize</option>
                    <option>-keepdirectories</option>
                    <option>-renamesourcefileattribute SourceFile</option>
                    <option>-keepparameternames</option>
                    <option>-keepattributes Exceptions,InnerClasses,Signature,Deprecated,SourceFile,LineNumberTable,*Annotation*,EnclosingMethod</option>
                    <option><![CDATA[
                        -keep public class com.proton.commons.** { public protected *; }
                        ]]></option>    
                            <!-- Here comes a lot of interface packages, public classes, etc as the last one -->    
                    <option><![CDATA[
                        -keepclassmembers enum * {
                            public static **[] values();
                            public static ** valueOf(java.lang.String);
                        }                       
                        ]]></option>        
                    <option><![CDATA[
                        -keepclassmembers class * { 
                            @org.springframework.beans.factory.annotation.Autowired *; 
                            @org.springframework.beans.factory.annotation.Qualifier *; 
                            @org.springframework.beans.factory.annotation.Value *; 
                            @org.springframework.beans.factory.annotation.Required *;
                            @org.springframework.context.annotation.Bean *;
                            @javax.annotation.PostConstruct *;
                            @javax.annotation.PreDestroy *;
                            @org.aspectj.lang.annotation.AfterReturning *;
                            @org.aspectj.lang.annotation.Pointcut *;
                            @org.aspectj.lang.annotation.AfterThrowing *;
                            @org.aspectj.lang.annotation.Around *;
                        }
                        ]]></option>                            
                    <option>-keep @org.springframework.stereotype.Service class *</option>
                    <option>-keep @org.springframework.stereotype.Controller class * </option>
                    <option>-keep @org.springframework.stereotype.Component class * </option>
                    <option>-keep @org.springframework.stereotype.Repository class *</option>
                    <option>-keep @org.springframework.cache.annotation.EnableCaching class *</option>
                    <option>-keep @org.springframework.context.annotation.Configuration class *</option>
                 <!-- Custom annotation -->
                    <option>-keep @com.proton.ks.aop.ProtonLogging class *</option>
                    <option>-keep @org.aspectj.lang.annotation.Aspect class *</option>
                    <option>-keep @java.lang.annotation.Retention class *</option>
                    <option>-keep @java.lang.annotation.Target class *</option>
                    <option>-dontwarn javax.**</option>
                    <option>-dontnote com.proton.ks.preferences.PreferenceFactory</option>
                </options>
                <addMavenDescriptor>false</addMavenDescriptor>
                <libs>
                    <lib>${java.home}/lib/rt.jar</lib>
                    <lib>${java.home}/lib/jce.jar</lib>                      
                    <lib>${java.home}/lib/jsse.jar</lib>
                    <lib>${java.home}/lib/ext/sunjce_provider.jar</lib>
                </libs>
                <proguardVersion>4.8</proguardVersion>
            </configuration>
        </plugin> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T19:00:09.340

我已经使用 -dontskipnonpubliclibraryclasses 解决了很多问题。

# symfony - Symfony2 从 cron 作业执行脚本

> ID：12393595
> 
> 赞同：4
> 
> 时间：2012-09-12T17:40:17.817
> 
> 标签：symfony, cron

我需要创建一个脚本来定期向某些用户发送电子邮件。例如，我曾考虑在控制器中创建一个函数，并在路由和 cron 作业调用 www.mydomain.com/send 中创建一个路径。

但我认为这不是最好的方法，因为任何用户都可以调用脚本.. 这样做的正确方法是什么？

```
class UserController extends Controller{

    public function sendAction(){
            $em = $this->getDoctrine()->getEntityManager();
            ...
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-12T18:32:38.307

您的感觉是对的，使用 Controller 操作并不是解决任务的最佳方式。

有一个更好的方法 -[控制台命令](http://symfony.com/doc/2.0/cookbook/console/console_command.html)。它更安全（没有外部人调用它的风险）和更快（加载速度更快）。

# database - 查找时间比较：外键存在或不存在

> ID：12393596
> 
> 赞同：2
> 
> 时间：2012-09-12T17:40:22.690
> 
> 标签：database, performance, oracle, join

一位同事最近向我描述了重新构建数据库的计划。新数据库将符合简单的[星型模式](http://en.wikipedia.org/wiki/Star_schema)：父表将包含一个键和一些上下文信息，该键将用作其他表中的外键字段。外键字段可能多次出现在同一个子表中。

伪代码：

```
TABLE Parent
   INT key PRIMARY_KEY
   INT foo
   ...

TABLE Child1
   INT key FOREIGN_KEY REFERENCES Parent.key
   BLOB bar
   ...

TABLE Child2
   INT key FOREIGN_KEY REFERENCES Parent.key 
   VARCHAR tar
   ... 
```

设计背后的动机是简化 和 之间的 JOIN `Parent`，`Child<n>`这在以前的模式中很复杂。

为了进一步加快 JOIN，我的同事希望尽量减少 OUTER JOIN 的使用。具体来说，她想通过使用 JOINS 并通过以特定方式维护子表中的数据来模拟 OUTER JOIN：填充所有子表，以便对于每个`key`in `Parent`，至少有一行 in`Child<n>`具有该`key`值，即使该行否则充满`null`s。这样，在`Parent`和`Child<n>`on之间执行的任何 JOIN 都会为每个in`key`返回至少一个结果，更像是 OUTER JOIN。`key``Parent`

撇开以这种方式维护数据是否值得付出努力的问题不谈，假设所有`key`字段都已正确索引并且大约一半的子行被`null`淘汰，这种方法是否比执行 OUTER JOINS 更高效？

这个问题似乎可以归结为“对索引中存在的值而不是不存在的值进行索引查找更快？” 假设索引像 B 树或散列一样运行，我的答案是“否”，但我知道的不够多，无法确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T22:05:41.950

就个人而言，我没有注意到外连接和内连接之间的主要性能差异。为什么你的同事认为他们比较慢？

添加额外的记录对性能有两个影响。原始数据变大，需要更多的页面来存储数据。这会对性能产生很大的影响，特别是如果额外的页面（没有有用的数据）正在与更有用的结构（比如索引）竞争空间。

第二个影响是对指数的影响。它需要更大，这可能会导致更深的索引和更多的索引页面。这两者都会对性能产生影响。

还有另一个问题，与性能无关。编写查询的用户/开发人员需要充分了解这些空记录的存在。执行 COUNT(*) 或 COUNT() 并期望结果准确反映包含数据的记录数非常容易。如果不是这种情况，您可能会在未来导致编码问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T07:15:57.810

我认为这种方法不会提高性能。

内连接*通常*比外连接快。这是因为内部连接的限制性更强，使优化器有更多机会在计划的早期减少结果集。

但是，如果您人为地添加数据，您的内部连接将不再受到更多限制。

# c# - 如何禁用特定属性的 ReSharper ConvertToAutoProperty 警告？

> ID：12393598
> 
> 赞同：4
> 
> 时间：2012-09-12T17:40:34.300
> 
> 标签：c#, resharper

我想做类似的事情：

```
public class TaskDto : IDto
{
    //ReSharper disable ConvertToAutoProperty
    private int _id;
    public int ID { get { return _id; }}
    //ReSharper enable ConvertToAutoProperty
} 
```

ConvertToAutoProperty 不是规则的正确名称——我只是在尝试一下。谷歌没有出现任何东西。我看不到通过 ReSharper 上下文菜单抑制警告的能力。我仍然希望看到这条规则，只是不适用于我的 DTO 类中的 ID。

有任何想法吗？

![在此处输入图像描述](../Images/150251a3ed6404f10dbb5d80748baa62.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T20:19:20.270

试试这个：

```
// ReSharper disable ConvertToAutoPropertyWithPrivateSetter
private int _id;
public int ID { get { return _id; } }
// ReSharper restore ConvertToAutoPropertyWithPrivateSetter 
```

ReSharper 应该为您提供了一个自动生成它的选项。这里似乎是一个错误，所以在这里创建了一个请求[http://youtrack.jetbrains.com/issue/RSRP-329913](http://youtrack.jetbrains.com/issue/RSRP-329913)

# c - 为什么有些算术运算比平时花费更多时间？

> ID：12393600
> 
> 赞同：10
> 
> 时间：2012-09-12T17:40:50.750
> 
> 标签：c, performance, time

在执行具有小精度浮点数的算术运算时，我检测到异常的计算时间。以下简单代码展示了这种行为：

```
#include <time.h>
#include <stdlib.h>
#include <stdio.h>

const int MAX_ITER = 100000000;

int main(int argc, char *argv[]){
    double x = 1.0, y;
    int i;
    clock_t t1, t2;
    scanf("%lf", &y);
    t1 = clock();
    for (i = 0; i < MAX_ITER; i++)
        x *= y;
    t2 = clock();
    printf("x = %lf\n", x);
    printf("Time: %.5lfsegs\n", ((double) (t2 - t1)) / CLOCKS_PER_SEC);
    return 0;
} 
```

这是程序的两种不同运行：

*   y = 0.5

    > x = 0.000000
    > 时间：1.32000segs

*   y = 0.9

    > x = 0.000000
    > 时间：19.99000segs

我正在使用具有以下规格的笔记本电脑来测试代码：

*   **CPU** : Intel® Core™2 Duo CPU T5800 @ 2.00GHz × 2
*   **内存**：4 GB
*   **操作系统**：Ubuntu 12.04（64 位）
*   **型号**：戴尔工作室 1535

有人可以详细解释为什么会发生这种行为吗？我知道 y = 0.9 时 x 值变为 0 的速度比 y = 0.5 时要慢，所以我怀疑问题与此直接相关。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-12T17:44:57.543

非正规（或者更确切地说是次正规）数字通常会影响性能。`0`根据您的第二个示例，缓慢收敛到将产生更多的次常态。[在此处](http://en.wikipedia.org/wiki/Denormal_number)和[此处](https://blogs.oracle.com/d/entry/subnormal_numbers)阅读更多信息。如需更认真的阅读，请查看经常被引用（并且非常密集）的[What Every Computer Scientist Should Know About Floating-Point Arithmetic](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

从第二个来源：

> 在 IEEE-754 下，浮点数以二进制表示为：
> 
> `Number = signbit \* mantissa \* 2exponent`
> 
> 可能有多种表示相同数字的方式，以十进制为例，数字 0.1 可以表示为 1*10-1 或 0.1*100 甚至 0.01 * 10。标准规定数字始终与第一位作为一个。对应于 1*10-1 示例的十进制。
> 
> 现在假设可以表示的最低指数是-100。所以可以用范式表示的最小数是1*10-100。但是，如果我们放宽前导位为 1 的约束，那么我们实际上可以在同一空间中表示较小的数字。以十进制为例，我们可以表示 0.1*10-100。这称为次正规数。具有次正规数的目的是为了平滑最小正规数和零之间的差距。
> 
> 认识到次正规数的表示精度低于正规数是非常重要的。事实上，他们正在以较小的尺寸换取较低的精度。因此，使用次正规数的计算不会具有与正规数计算相同的精度。因此，对次正规数进行大量计算的应用程序可能值得研究，以查看重新缩放（即将数字乘以某个缩放因子）是否会产生更少的次正规数和更准确的结果。

我正在考虑自己解释它，但上面的解释写得非常好和简洁。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T19:31:35.830

您得到可测量的差异不是因为`0.9^n`收敛到 0 的速度比`0.5^n`数学上慢，而是因为在 IEEE-754 浮点实现中，它根本不会收敛到 0。

`double`IEEE-754 表示中最小的正数是 2 -1074 ^，最小的正数是 2 ^(-1021)，所以对于`y = 0.5`，循环遇到 53 个次正规数。一旦达到最小的正次正规，下一个乘积将是 2 ^(-1075)，但由于舍入到最后一位零的默认舍入模式，舍入为 0。（浮点数的IEEE-754*表示*并且默认的 round-ties-to-last-bit-zero 舍入模式在标准消费类硬件上几乎无处不在，即使标准没有完全实现。）从那时起，你就有了一个乘法`0*y`，它是一个普通的浮点乘法（即使`y`是次等数也很快）。

使用`0.5 < y < 1`，一旦您达到（正）次正常范围的下限，结果将再次舍入`x*y`到 的值`x`（对于`y = 0.9`，迭代的固定点是 5*2 ^(-1074)）。由于这是在几千次迭代 ( `0.9^7 < 0.5`) 之后达到的，因此对于整个循环，您基本上是在将一个次正规数与一个非零数相乘。在许多处理器上，这样的乘法不能直接处理，必须在微码中处理，这要慢得多。

如果速度比 IEEE-754 语义更重要（或者如果出于其他原因不希望这样做），许多编译器会提供选项来禁用该行为并将次正规数刷新为 0（如果硬件支持）。我在我的 gcc 的手册页中找不到明确的选项，但`-ffast-math`在这里做了诀窍。

# asp.net-mvc - 在 MVC 中突出显示或更改当前菜单项 CSS 类的最佳方法

> ID：12393603
> 
> 赞同：0
> 
> 时间：2012-09-12T17:41:00.470
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3, razor

在寻找解决方案时，我已经阅读了几篇文章。他们似乎都支持硬编码或 HTML Helper 替代方案。但是，我想要一些简单且由数据库驱动的东西。这是**我**最好的解决方案（由我作为答案提交）。

以下是一些其他文章的解决方案：

*   [在 ASP.NET MVC 中使用控制器和用户控件设置活动选项卡的简单方法？](https://stackoverflow.com/questions/287679/an-easy-way-to-set-the-active-tab-using-controllers-and-a-usercontrol-in-asp-net)
*   [asp.net mvc 和 css：让菜单选项卡在选择时保持突出显示](https://stackoverflow.com/questions/475278/asp-net-mvc-and-css-having-menu-tab-stay-highlighted-on-selection)
*   [ASP.NET MVC：标签 ASCX - 根据当前页面调整 CSS 类？](https://stackoverflow.com/questions/1210900/asp-net-mvc-tabs-ascx-adjust-css-class-based-on-current-page?rq=1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:41:00.470

只需从您的其中一个控制器传递一个 TempData ，如下所示：

```
TempData("CurrentPage") = "Nutrition" 
```

然后，在您的视图中添加这样的条件：

```
<ul>

@For Each item In Model
    Dim currentItem = item

    If (Not String.IsNullOrEmpty(TempData("CurrentPage")) And TempData("CurrentPage") = currentItem.NAV_Element) Then
        @<li><a class="current" href="@Html.DisplayFor(Function(modelItem) currentItem.NAV_Destination)">@Html.DisplayFor(Function(modelItem) currentItem.NAV_Element)</a></li>

    Else
        @<li><a href="@Html.DisplayFor(Function(modelItem) currentItem.NAV_Destination)">@Html.DisplayFor(Function(modelItem) currentItem.NAV_Element)</a></li>
    End If

Next

</ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T11:58:41.787

我过去通过使用路由值生成一个href然后将父选项卡设置为活动状态来实现这一点。

这是一个引导风格的版本：

```
 <ul class="nav nav-tabs">
     <li><a href="/somepage">Some page</a></li>
     <li><a href="/someotherpage">Some other Page</a></li>
 </ul>

 <script type="text/javascript">
     $(function(){
          $('a[href="@Url.Action(ViewContext.RouteData.Values)"]').parents("li").addClass("active");
     };

 </script> 
```

硅

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-26T23:41:44.313

我知道我回答这个问题为时已晚，但如果您使用 ASP MVC 并使用控制器和操作寻找突出显示菜单项，这里的解决方案对我来说非常好 -

```
<li> <a href='@Url.Action("<action name>", "<controller name>")' class="@(ViewContext.RouteData.Values["Controller"].ToString() + ViewContext.RouteData.Values["Action"].ToString() == "ControllerAction" ? "active" : "" )"> <i class="fa fa-user-plus"></i> <span>Signup</span> </a> </li> 
```

* * *

# apache-flex - 在 Flex 4.6 中创建棋盘

> ID：12393605
> 
> 赞同：0
> 
> 时间：2012-09-12T17:41:06.090
> 
> 标签：apache-flex, flash-builder

我在 Flash Builder 4.6 中开始了一个新项目，在朝着一个方向而不是正确的方向前进之前需要一些建议。

基本上，我在 Flash Builder 中的应用程序是用于移动设备和平板电脑的，所以我需要知道如何创建一个能够精确固定任何设备宽度的棋盘。我不知道我怎么能在 Flex 中做到这一点。

任何人都可以给出一个想法或提供一个我可以使用的例子吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T00:16:55.067

为什么不使用 100% 高度和宽度的 TileGroup/TileLayout？然后将 rowHeight 设置为 {this.height / ROWS}（ROWS 是棋盘上的行数）并对 columnWidth 执行相同的操作。您甚至可以使用 Horizo​​ntalGap 和 verticalGap 属性来显示黑色背景，该背景可以用作每个框之间的分隔符（尽管您必须在 rowHeight 和 columnWidth 计算中考虑这一点，显然）

我会通过 AS3 填充屏幕，而不是 Flex。这样的事情是我的想法。

```
var columnCount:int = 0;
var rowCount:int = 0;
var boxes:int = 64; //however many boxes on a chess board goes here
for ( var i:Number = 0; i < boxes; i+ ){
    var rect:Rect = new Rect();
    var color:SolidColor;
    rect.percentHeight = 100;
    rect.percentWidth = 100;
    rect.name = i.toString(); //this will make it easier to keep track of which box is which later on
    if ( rowCount % 2 == 1 ) {
        if ( i % 2 == 1 ) color = 0x000000;
        else color = 0xffffff;
    }
    else {
        if ( i % 2 == 1 ) color = 0xffffff;
        else color = 0x000000;
    }
    this.rect.fill = color;
    this.tileGroup.addElement(rect);

    if ( columnCount == 7 ) {
        columnCount = 0;
        rowCount++;
    }
    else {
        columnCount++;
    }
} 
```

这完全不在我的脑海中并且未经测试，所以我确信有一两个错误，但你知道它是如何工作的。

**编辑**：作为事后的想法，您可能可以在不使用 rowCount/columnCount 变量的情况下以数学方式 100% 执行颜色，尽管这样做可能要容易得多。

# android - SQLite 数据库无法打开

> ID：12393606
> 
> 赞同：0
> 
> 时间：2012-09-12T17:41:06.967
> 
> 标签：android, database, sqlite

我对创建和操作数据库非常陌生，我似乎被卡住了，我的 logcat 一直告诉我它无法打开数据库？

> 09-12 13:02:31.823: I/SqliteDatabaseCpp(7213): sqlite 返回：错误代码 = 14，msg = 无法在 [8609a15dfa] 的第 27701 行打开文件，db=/data/data/net.learn2develop.Database/数据库/数据库

我猜它找不到它，但我知道为什么。感谢你们中的许多人，到目前为止，我已经按照自己的方式工作了，但仍然卡住了，我的代码正在做的是导入我从资产文件夹中创建的数据库。这是我的数据库助手类：

```
public class DatabaseHelper extends SQLiteOpenHelper {

public static final String KEY_ROWID = "_id";
public static final String KEY_ALCOHOL = "alcohol";
public static final String KEY_TYPE = "type";
public static final String KEY_BRAND = "brand";
public static final String KEY_PRICE = "price";
private static final String TAG = "DatabaseHelper";

private static String DB_PATH = "/data/data/net.learn2develop.Database/databases/";

private static String DB_NAME = "database";
private static final String DB_TABLE = "booze";

private SQLiteDatabase myDataBase; 

private final Context myContext;

/**
 * Constructor
 * Takes and keeps a reference of the passed context in order to access to the application assets and resources.
 * @param context
 */
public DatabaseHelper(Context context) {

    super(context, DB_NAME, null, 1);
    this.myContext = context;

}

/**
 * Creates a empty database on the system and rewrites it with your own database.
 * */
public void createDataBase() throws IOException{

    boolean dbExist = checkDataBase();

    if(dbExist){
        //do nothing - database already exist
    }else{

        //By calling this method and empty database will be created into the default system path
           //of your application so we are gonna be able to overwrite that database with our database.
        this.getReadableDatabase();

        try {

            copyDataBase();

        } catch (IOException e) {

            throw new Error("Error copying database");

        }
    }

}

/**
 * Check if the database already exist to avoid re-copying the file each time you open the application.
 * @return true if it exists, false if it doesn't
 */
private boolean checkDataBase(){

    SQLiteDatabase checkDB = null;

    try{
        String myPath = DB_PATH + DB_NAME;
        checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

    }catch(SQLiteException e){

        //database does't exist yet.

    }

    if(checkDB != null){

        checkDB.close();

    }

    return checkDB != null ? true : false;
}

/**
 * Copies your database from your local assets-folder to the just created empty database in the
 * system folder, from where it can be accessed and handled.
 * This is done by transfering bytestream.
 * */
private void copyDataBase() throws IOException{

    //Open your local db as the input stream
    InputStream myInput = myContext.getAssets().open(DB_NAME);

    // Path to the just created empty db
    String outFileName = DB_PATH + DB_NAME;

    //Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(outFileName);

    //transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer))>0){
        myOutput.write(buffer, 0, length);
    }

    //Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();

}

public void openDataBase() throws SQLException{

    //Open the database
    String myPath = DB_PATH + DB_NAME;
    myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

}

@Override
public synchronized void close() {

        if(myDataBase != null)
            myDataBase.close();

        super.close();

}

@Override
public void onCreate(SQLiteDatabase myDataBase) {

}

@Override
public void onUpgrade(SQLiteDatabase myDataBase, int oldVersion, int newVersion) {
    Log.w(TAG, "Upgrading database from version " + oldVersion 
            + " to "
            + newVersion + ", which will destroy all old data");
      myDataBase.execSQL("DROP TABLE IF EXISTS titles");
      onCreate(myDataBase);

}

//---insert a title into the database---
public long insertTitle(String alcohol, String type, String brand, int price) 
{
    ContentValues initialValues = new ContentValues();
    initialValues.put(KEY_ALCOHOL, alcohol);
    initialValues.put(KEY_TYPE, type);
    initialValues.put(KEY_BRAND, brand);
    initialValues.put(KEY_PRICE, price);
    return myDataBase.insert(DB_TABLE, null, initialValues);
}

//---retrieves a particular title---
public Cursor getTitle(long rowId) throws SQLException 
{
    Cursor mCursor =
            myDataBase.query(true, DB_TABLE, new String[] {
                    KEY_ROWID,
                    KEY_ALCOHOL, 
                    KEY_TYPE,
                    KEY_BRAND,
                    KEY_PRICE
                    }, 
                    KEY_ROWID + "=" + rowId, 
                    null,
                    null, 
                    null, 
                    null, 
                    null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;
} 
```

这是我在活动中调用的内容，以测试我是否可以读取数据库：

```
public class DatabaseActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_database);
    DatabaseHelper myDbHelper = new DatabaseHelper(this);

  //---get a title---
    myDbHelper.openDataBase();
    Cursor c = myDbHelper.getTitle(2);
    if (c.moveToFirst())        
        DisplayTitle(c);
    else
        Toast.makeText(this, "No title found", 
                Toast.LENGTH_LONG).show();
    myDbHelper.close();
}

public void DisplayTitle(Cursor c)
{
    Toast.makeText(this, 
            "id: " + c.getString(0) + "\n" +
            "ALCOHOL: " + c.getString(1) + "\n" +
            "TYPE: " + c.getString(2) + "\n" +
            "BRAND:  " + c.getString(3) + "\n" +
            "PRICE:  " + c.getString(4),
            Toast.LENGTH_LONG).show();        
} 

} 
```

我创建的数据库的名称只是“数据库”，活动是“DatabaseActivity.java”，帮助文件是“DatabaseHelper.java”

这是我的数据库的样子 ![在此处输入图像描述](../Images/a4946dbae27e9565a273fb7489542bc0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:49:35.927

您应该始终发布所有 Logcat 错误，但我想我看到了问题所在。

您已经在 DatabaseHelper 构造函数中在后台打开了 SQLiteDatabase，现在您想要访问它。试试这个：

```
public void openDataBase() throws SQLException{
    myDataBase = getWritableDatabase();
} 
```

* * *

您是否曾经从资产文件夹中复制过您的数据库？

```
DatabaseHelper myDbHelper = new DatabaseHelper(this);

if(!myDbHelper.checkDataBase())
    myDbHelper.copyDataBase();
myDbHelper.openDataBase(); 
```

如果您还没有这样做，那么该数据库将不存在于`database/`文件夹中并且无法打开...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T17:48:49.937

这是我使用的示例数据库助手，它可以工作，

```
import java.util.ArrayList;
import java.util.LinkedHashMap;
import java.util.List;
import java.util.Set;

import org.example.db.R;
import org.example.model.contact;

import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class SQLiteHelper extends SQLiteOpenHelper {

// Attributes
private Context context;
private SQLiteDatabase database;

@SuppressWarnings("unused")
private interface Table {
    public static final String CONTACT = "contact";
/**
 * Constructor
 * @param context
 */
public SQLiteHelper(Context context) {
    this(context, context.getString(R.string.db_name), null, 33);

    this.context = context;
    database = getReadableDatabase();
}

public SQLiteHelper(Context context, String name, CursorFactory factory,
        int version) {
    super(context, name, factory, version);
}

public Contact getContact(long contactId) {
    String sql = "SELECT * FROM " + Table.CONTACT +
        " WHERE " + Contact.Column.ID + " = " + contactId;

    Contact contact = null;
    Cursor cursor = database.rawQuery(sql, null);
    if(cursor.moveToNext()) {
        contact = getContactFromCursor(cursor);
    }
    cursor.close();

    return contact;
}

public List<contact> getContacts() {
    String sql = "SELECT * FROM " + Table.CONTACT+ " ORDER BY " + 
        Contact.Column.NAME + " ASC";

    List<Contact> contacts = new ArrayList<Contact>();
    Cursor cursor = database.rawQuery(sql, null);
    while(cursor.moveToNext()) {
        Contact contact= getContactFromCursor(cursor);
        if(contact!= null) {
            contacts.add(baby);
        }
    }
    cursor.close();

    return contacts;
}

private Baby getContactFromCursor(Cursor cursor) {
    long id = cursor.getLong(cursor.getColumnIndex(Contact.Column.ID));
    String name = cursor.getString(cursor.getColumnIndex(Contact.Column.NAME));
    int gender = cursor.getInt(cursor.getColumnIndex(Contact.Column.GENDER));

    Contact contact= new Contact(id, name, gender);

    return contact;
}

@Override
public void onCreate(SQLiteDatabase database) {

}

@Override
public void onUpgrade(SQLiteDatabase database, int oldVersion, int newVersion) {

}

public void close() {
    if(database != null && database.isOpen()) {
        database.close();
    }
}

public boolean isOpen() {
    return database != null ? database.isOpen() : false;
}

} 
```

# c# - 使用 MySQL Connector for .net 打开 MySQL 连接非常慢

> ID：12393614
> 
> 赞同：1
> 
> 时间：2012-09-12T17:41:55.707
> 
> 标签：c#, mysql, c#-4.0, azure, mysql-connector

我正在尝试解决使用 MySQL Connector for .net 打开连接时 MySQL 响应时间很长的问题。

我已经使用--skip-name-resolve 安装了在 Azure VM（Server 2008）上运行的 MySQL 5.5，并且数据库用户帐户的主机限制使用 IP 地址。我在 Azure 上运行的 WCF 服务中使用最新的 MySQL 连接器 for .net（在美国东部的同一位置，我一直在使用试用订阅，没有关联集）。我在 WCF 服务中的连接字符串使用托管 MySQL 的 VM 的内部 IP 地址作为服务器参数值。我也有“pooling = true;Min Pool Size=2;” 以防万一（我也尝试过不使用这些参数）。

跟踪 WCF 时，一旦服务运行和处理请求，查询响应时间非常好（即使每个查询结果都是唯一的，因此没有被缓存），而且我对 MySQL 的性能没有任何问题，因为它经常受到打击。

但是我无法解决的一个大问题是**在大约 3 或 4 分钟没有调用数据库后，连接到 MySQL Open 所需的时间很长**。如果**几分钟内没有进行数据库调用，则需要 8 或 9 秒或更长时间才能再次打开连接**。我包装了实际的“conn.open();” 在调用之前和之后使用跟踪语句，这是我在几分钟不活动后一次又一次地看到记录的行为。

顺便说一句，我也尝试过（并且仍在使用）连接处理的“使用”风格，以确保 MySQL 连接器正在管理连接池。

例如：使用 (var conn = new MySqlConnection(Properties.Settings.Default.someConnectionString)) { ... statements ..}

我觉得我在这个问题上已经走到了死胡同，所以任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T19:14:42.267

我可以解释您的问题**“在大约 3 或 4 分钟未调用数据库后，连接到 MySQL Open 所需的时间。如果几分钟内未进行数据库调用，则需要 8 或 9 秒或更多以再次打开连接。”** 为什么会发生：

Windows Azure 网站使用热（活动）和冷（非活动）站点的概念，如果网站没有活动连接，则站点进入冷状态意味着主机 IIS 进程退出。当与该网站建立新连接时，需要几秒钟才能使该网站准备就绪并正常工作。虽然您将 MySQL 后端关联到该网站，但由于 IIS 主机进程需要一些时间才能启动，因此需要多几秒钟才能获得请求的服务。这就是在活动几分钟后响应时间更长的原因。

有关 Windows Azure 热（活动）和冷（非活动）网站的更多详细信息，您可以查看以下演示文稿：http: [//video.ch9.ms/teched/2012/na/AZR305.pptx](http://video.ch9.ms/teched/2012/na/AZR305.pptx)

这一次，我不确定也不知道如何才能让网站始终保持热门，即使转移到共享网站或根本不可能。我可以建议您将您的问题写到[Windows Azure 网站论坛](http://social.msdn.microsoft.com/Forums/en-US/windowsazurewebsitespreview/threads)，该团队中的某个人将为您提供适当的答案。

# wordpress - 修改 url 永久链接 wordpress

> ID：12393624
> 
> 赞同：0
> 
> 时间：2012-09-12T17:42:37.810
> 
> 标签：wordpress, permalinks

我使用wordpress，我有以下问题，

我使用 URL： - www.mysite.com/page - www.mysite.com/cat/page - www.mysite.com/custompostype/post

permalinks 的值是`%category%/%postname%`，一切正常，除了现在我必须使用两种语言并且我想配置如下：

*   www.mysite.com/EN/page
*   www.mysite.com/ES/cat/page
*   www.mysite.com/BR/custompostype/post

我想更改第一条规则是语言的 wordpress url 的结构，并将其作为变量值。如同`/%lang%/%category%/%postname%/`

我使用了 wp_rewrite 并没有成功，知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T16:58:00.037

现在我刚刚找到了我的问题的解决方案，我处理了会话

```
 <?php function init_sessions() {
     if (!session_id()) {
         session_start();
     } } add_action('init', 'init_sessions'); ?> <?php function detecta_idioma() {  if($_SESSION["IDIOMA"]["actual"]=="")   {
        $_SESSION["IDIOMA"]["actual"]="ES";
        $_SESSION["IDIOMA"]["abreviatura"]="";
        $_SESSION["IDIOMA"]["nombre"]="Español";
        $_SESSION["IDIOMA"]["tag"]="ES";    }   if($_GET["action"]=="idioma" &&
 $_GET["lang"])     {       unset($_SESSION["IDIOMA"]);
        switch($_GET["lang"])       {           case "EN":
                $_SESSION["IDIOMA"]["actual"]="EN";
                $_SESSION["IDIOMA"]["abreviatura"]="_en";
                $_SESSION["IDIOMA"]["nombre"]="Ingles";
                $_SESSION["IDIOMA"]["tag"]="EN";            break;          case "ES":          default:
                $_SESSION["IDIOMA"]["actual"]="ES";
                $_SESSION["IDIOMA"]["abreviatura"]="";
                $_SESSION["IDIOMA"]["nombre"]="Español";
                $_SESSION["IDIOMA"]["tag"]="ES";            break;
                    }   }   $IDIOMA=array("actual"=>$_SESSION["IDIOMA"]["actual"],"ab"=>$_SESSION["IDIOMA"]["abreviatura"],"nombre"=>$_SESSION["IDIOMA"]["nombre"],"tag"=>$_SESSION["IDIOMA"]["tag"]);
    global $wp_rewrite;
     $wp_rewrite->set_permalink_structure($_SESSION["IDIOMA"]["tag"].'/%category%/%postname%');
    return $IDIOMA; }  add_action('init', 'detecta_idioma'); ?> 
```

适用于路线条目，例如 www.misitio.com/en/post-demo，不适用于页面或类别或分类法，例如：www.misite.com/es/category/, www.site.com/es /page/subpage 或 www.site.com/br/taxonomy <----- 不工作，显示错误 404 页面

我不能使用插件 qTranslate 和 CMS 插件多语言或者它们不能很好地使用插件高级自定义字段和自定义帖子类型 UI。

谢谢

# perl - 更改文件扩展名（ods 为 csv）并获取每个文件的输出

> ID：12393629
> 
> 赞同：0
> 
> 时间：2012-09-12T17:43:29.200
> 
> 标签：perl

我有许多 ods 格式的文件，我想通过 perl 代码将它们转换为 csv 格式。另外，我有一个 perl 代码，可以用其他字符替换一些字符，但是对于每个文件，我必须记录它的名称，所以我希望能够同时处理一堆文件，并为每个文件提供一个输出与修改。到目前为止，我的代码如下所示：

```
#!/usr/bin/perl

use strict;
use warnings;
use Data::Dumper;

my @repertoire =glob('/home/test/Desktop');

# warn Dumper \@repertoire;
foreach my $fileName (@repertoire)
{
    open(IN, "<$fileName") or die "Can't read file '$fileName' [$!]\n";
    print "$fileName\n" ;
    @files=<IN>;
    close(IN);

    foreach $file (@files)
    {
     $file =~ /(\x{0625}\x{0646}\b.+?)\./[[    ]]/g)
     my $new=$file;
   print $new;
   print "\n";
   system("cp @repertoire/$file @repertoire/$new") # copy output of each file in  '/home/test/Desktop'
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:47:32.700

`"`除了在调用中缺少关闭之外`glob`，您还应该在路径中添加一个通配符，以便 glob 可以真正返回一个列表：

```
my @repertoire = glob '/home/test/Desktop/*.ods'; 
```

另外，尝试使用更“有说服力”的变量名称：`@files`建议文件列表，但实际上是文件行列表。

你的问题到底是什么？

# java - 如何阻止 Webstart 锁定？

> ID：12393634
> 
> 赞同：2
> 
> 时间：2012-09-12T17:44:02.350
> 
> 标签：java, swing, deployment, java-web-start

我们最近将[我们的一个项目](http://quantumleapbuzz.com/)转换为 java webstart 并且遇到了各种问题。我们之前使用的是安装程序，并且该应用程序在安装程序中运行得非常好。该应用程序会从互联网上获取大量网页以进行分析。有时在运行应用程序时，我们会看到以下弹出窗口。更糟糕的是，当这种情况发生时，用户界面会被锁定，唯一的恢复方法是启动任务管理器并终止应用程序。这只会发生几次，而且似乎有些随机。

![在此处输入图像描述](../Images/6511cb30500daef63d9316ca20b7d377.png)

我认为这可能是由于[这里提到](https://stackoverflow.com/questions/11050202/why-is-java-7-requesting-network-permissions-for-a-signed-application)的问题，但是当我们升级到最新版本的 Java 时仍然会发生这种情况。有没有什么办法解决这一问题？小程序是更好的方法还是会导致同样的问题？我喜欢 Webstart 的想法，因为它提供自动更新。

这是jnlp文件：

```
<?xml version="1.0" encoding="utf-8"?>
<!-- JNLP File for Quantum Leap Buzz-->
<jnlp spec="1.6+" codebase="http://pbafiles.quantumleapinnovations.com/Buzz/Webstart" href="QuantumLeapBuzz.jnlp">
    <information>
        <title>Quantum Leap Buzz</title>
        <vendor>Quantum Leap Innovations</vendor>
        <homepage href="http://www.quantumleapbuzz.com"/>
        <description kind="one-line">Quantum Leap Buzz</description>
        <description kind="short">Quantum Leap Buzz</description>
        <icon href="http://pbafiles.quantumleapinnovations.com/Buzz/Webstart/Logo_32x32.jpg" />
        <icon kind="splash" href="splash2copyright.png" />
        <offline-allowed/>
        <shortcut online="true">
            <desktop/>
            <menu submenu="Quantum Leap Innovations">
                <menu submenu="Quantum Leap Buzz"/>
            </menu>

        </shortcut>
    </information>
    <security>
        <all-permissions/>
    </security>
    <resources>
        <j2se version="1.6.0+"  initial-heap-size="256m" max-heap-size="900m"/>
        <jar href="jars/activation-1.1.jar"/>
        <jar href="jars/antlr-2.7.6.jar"/>
        <jar href="jars/bcprovs-131.jar"/>
        <jar href="jars/c3p0-0.9.1.jar"/>
        <jar href="jars/commons-beanutils-1.7.0.jar"/>
        <jar href="jars/commons-codec-1.5.jar"/>
        <jar href="jars/commons-collections-3.1.jar"/>
        <jar href="jars/commons-digester-1.6.jar"/>
        <jar href="jars/commons-httpclient-3.1.jar"/>
        <jar href="jars/commons-io-1.3.2.jar"/>
        <jar href="jars/commons-lang-2.4.jar"/>
        <jar href="jars/commons-logging-1.0.4.jar"/>
        <jar href="jars/commons-math-2.1.jar"/>
        <jar href="jars/commons-pool-1.5.6.jar"/>
        <jar href="jars/commons-validator-1.3.1.jar"/>
        <jar href="jars/concurrentlinkedhashmap-lru-1.0.jar"/>
        <jar href="jars/dom4j-1.6.1.jar"/>
        <jar href="jars/fest-assert-1.2.jar"/>
        <jar href="jars/fest-reflect-1.2.jar"/>
        <jar href="jars/fest-swing-1.2.jar"/>
        <jar href="jars/fest-swing-junit-1.2.jar"/>
        <jar href="jars/fest-util-1.1.2.jar"/>
        <jar href="jars/geonames-1.0.jar"/>
        <jar href="jars/hibernate-annotations-3.5.6-Final.jar"/>
        <jar href="jars/hibernate-c3p0-3.5.6-Final.jar"/>
        <jar href="jars/hibernate-commons-annotations-3.2.0.Final.jar"/>
        <jar href="jars/hibernate-core-3.5.6-Final.jar"/>
        <jar href="jars/hibernate-jpa-2.0-api-1.0.0.Final.jar"/>
        <jar href="jars/itext-2.1.7.jar"/>
        <jar href="jars/jackson-core-asl-1.7.3.jar"/>
        <jar href="jars/jackson-jaxrs-1.5.5.jar"/>
        <jar href="jars/jackson-mapper-asl-1.7.3.jar"/>
        <jar href="jars/jackson-xc-1.5.5.jar"/>
        <jar href="jars/jasperreports-4.1.1.jar"/>
        <jar href="jars/javassist-3.15.0-GA.jar"/>
        <jar href="jars/jaxb-api-2.1.jar"/>
        <jar href="jars/jaxb-impl-2.1.12.jar"/>
        <jar href="jars/jcip-annotations-1.0.jar"/>
        <jar href="jars/jcommon-1.0.12.jar"/>
        <jar href="jars/jdom-1.0.jar"/>
        <jar href="jars/jersey-client-1.6.jar"/>
        <jar href="jars/jersey-core-1.9.jar"/>
        <jar href="jars/jersey-json-1.4.jar"/>
        <jar href="jars/jersey-multipart-1.6.jar"/>
        <jar href="jars/jettison-1.1.jar"/>
        <jar href="jars/jfreechart-1.0.9.jar"/>
        <jar href="jars/jgeocoder-0.4.1.jar"/>
        <jar href="jars/jide-common-3.3.8.jar"/>
        <jar href="jars/jsoup-1.6.1.jar"/>
        <jar href="jars/jsr311-api-1.1.1.jar"/>
        <jar href="jars/jta-1.1.jar"/>
        <jar href="jars/junit-4.8.1.jar"/>
        <jar href="jars/leapworks-core-3.2.48.jar"/>
        <jar href="jars/leapworks-util-3.2.48.jar"/>
        <jar href="jars/log4j-1.2.16.jar"/>
        <jar href="jars/lucene-analyzers-3.3.0.jar"/>
        <jar href="jars/lucene-core-3.3.0.jar"/>
        <jar href="jars/machine_learning_data_utilities-3.2.48.jar"/>
        <jar href="jars/mimepull-1.4.jar"/>
        <jar href="jars/oauth-client-1.8-ea04.jar"/>
        <jar href="jars/oauth-signature-1.8-ea04.jar"/>
        <jar href="jars/poi-ooxml-3.8-beta2.jar"/>
        <jar href="jars/prefuse-beta-20071021.jar"/>
        <jar href="jars/qlbuzz-2.0.19.jar"/>
        <jar href="jars/restfb-1.6.9.jar"/>
        <jar href="jars/slf4j-api-1.5.8.jar"/>
        <jar href="jars/slf4j-log4j12-1.5.8.jar"/>
        <jar href="jars/sqlite-jdbc-3.7.2.jar"/>
        <jar href="jars/statistics_utilities-3.2.48.jar"/>
        <jar href="jars/stax-api-1.0-2.jar"/>
        <jar href="jars/swingx-core-1.6.2-2.jar"/>
        <jar href="jars/swingx-ws-1.0.jar"/>
        <jar href="jars/timingframework-1.0.jar"/>
        <jar href="jars/trove-2.1.0.jar"/>
        <jar href="jars/twitter-text-1.4.3.jar"/>
        <jar href="jars/twitter4j-core-2.2.6.jar"/>
        <jar href="jars/xml-apis-1.0.b2.jar"/>
    </resources>
     <application-desc main-class="us.quantumleap.galaxy.social.ui.AdvancedAppFrame"/>
</jnlp> 
```

# r - 如何选择某列有完整案例的数据？

> ID：12393635
> 
> 赞同：18
> 
> 时间：2012-09-12T17:44:07.967
> 
> 标签：r

我正在尝试获取一个数据框（`just.samples.with.shoulder.values`例如）仅包含具有非`NA`值的样本。我尝试使用该`complete.cases`函数来完成此操作，但我想我在下面的语法上做错了：

```
data <- structure(list(Sample = 1:14, Head = c(1L, 0L, NA, 1L, 1L, 1L, 
0L, 0L, 1L, 1L, 1L, 1L, 0L, 1L), Shoulders = c(13L, 14L, NA, 
18L, 10L, 24L, 53L, NA, 86L, 9L, 65L, 87L, 54L, 36L), Knees = c(1L, 
1L, NA, 1L, 1L, 2L, 3L, 2L, 1L, NA, 2L, 3L, 4L, 3L), Toes = c(324L, 
5L, NA, NA, 5L, 67L, 785L, 42562L, 554L, 456L, 7L, NA, 54L, NA
)), .Names = c("Sample", "Head", "Shoulders", "Knees", "Toes"
), class = "data.frame", row.names = c(NA, -14L))

just.samples.with.shoulder.values <- data[complete.cases(data[,"Shoulders"])]
print(just.samples.with.shoulder.values) 
```

我也很想知道其他路线（`subset()`例如使用 ）是否是一个更明智的想法。非常感谢你的帮忙！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-03-02T00:12:55.907

您也可以尝试`complete.cases`返回一个逻辑向量，该向量允许通过以下方式对数据进行子集化`Shoulders`

```
data[complete.cases(data$Shoulders), ] 
#    Sample Head Shoulders Knees Toes
#  1      1    1        13     1  324
#  2      2    0        14     1    5
#  4      4    1        18     1   NA
#  5      5    1        10     1    5
#  6      6    1        24     2   67
#  7      7    0        53     3  785
#  9      9    1        86     1  554
# 10     10    1         9    NA  456
# 11     11    1        65     2    7
# 12     12    1        87     3   NA
# 13     13    0        54     4   54
# 14     14    1        36     3   NA 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-09-12T17:48:43.647

您可以尝试使用`is.na`：

```
data[!is.na(data["Shoulders"]),]
   Sample Head Shoulders Knees Toes
1       1    1        13     1  324
2       2    0        14     1    5
4       4    1        18     1   NA
5       5    1        10     1    5
6       6    1        24     2   67
7       7    0        53     3  785
9       9    1        86     1  554
10     10    1         9    NA  456
11     11    1        65     2    7
12     12    1        87     3   NA
13     13    0        54     4   54
14     14    1        36     3   NA 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-13T21:04:53.993

There is a subtle difference between using is.na and complete.cases. is.na will remove actual na values whereas the objective here is to only control for a variable not deal with missing values/na's those which could be legitimate data points

# perl - 从 Perl 中的多维数组中收集子数组

> ID：12393641
> 
> 赞同：1
> 
> 时间：2012-09-12T17:44:39.813
> 
> 标签：perl, multidimensional-array, slice

假设我构建了以下多维数组：

```
my @array;  # don't need the empty list
my @other_array = (0 ... 10);

foreach my $i ( 0 .. 10 ) {
$array[$i] = [ @other_array[1..$#other_array] ];
} 
```

我想将这个多维数组的“列”收集到一个单独的数组中，

例如，如果我想收集第一列中的项目，我想要类似

```
my @other_array = ();
@other_array = $array[:][1]; # This does NOT work in Perl 
```

有没有办法在 Perl 中做到这一点而无需循环？

最终我想要做的是获取`max`我的多维数组的每一列的数组。

PS：这个问题的灵感来自另一个问题：[Building and printing a multidimensional list in Perl without looping](https://stackoverflow.com/questions/12392127/building-and-printing-a-multidimensional-list-in-perl-without-looping/12392340#12392340)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T17:48:08.900

我想你想要：

```
my @other_array = map { $_->[1] } @array; 
```

另一种语言可能对此操作有特殊的语法，但它仍然会在后台执行循环。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T17:48:40.893

交友[`map`](http://perldoc.perl.org/functions/map.html)：

```
my @other_array = map $array[$_][1], 0 .. $#array; 
```

中的[切片部分`perldoc perllol`](http://perldoc.perl.org/perllol.html#Slices)有更多示例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T19:06:46.917

对于您的示例，这可能是一个矫枉过正的解决方案，但假设您打算使用巨大的多维数组（矩阵）来执行此操作，请使用`PDL`并执行`transpose`然后切出所需的行。

# mobile - 如果我使用 Kendo-UI 制作网站，我需要付费吗

> ID：12393642
> 
> 赞同：15
> 
> 时间：2012-09-12T17:44:47.613
> 
> 标签：mobile, kendo-ui

抱歉，如果这与此论坛无关。

假设我想在 Kendo-UI 中创建一个站点，那么这是一个免费的东西（开源）还是我需要付费。

从下载页面看起来它不是免费的[http://www.kendoui.c​​om/](http://www.kendoui.com/download.aspx) download.aspx 。

免费的东西只适用于桌面类的东西。有人可以让我清楚我应该付钱给他们在剑道移动用户界面中制作网站吗

我的方法是免费提供移动网站开发与否。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-08T11:53:25.617

我找到了一个剑道论坛对管理员帖子的[回答，这可能会有所启发。](http://www.kendoui.com/forums/ui/general-discussions/open-source-license-gplv3.aspx#2055583)

> 如果您正在构建供内部使用的应用程序或具有与 GNU GPL v3 兼容的许可证的开源应用程序，则 Kendo UI Web 的开源版本是一个合适的选择。
> 
> 如果您的应用程序以任何方式包含不符合 GPL 许可的**商业、非开源部分**，或者您对全年支持和/或访问次要更新感兴趣，那么您将需要使用商业版本Kendo UI Web 的。
> 
> 但是，由于 GPL 的复杂性和版权法固有的模糊性，**我们不适合就您**的具体许可决定向您提供建议。最好和最安全的选择是联系法律顾问，以确保您获得所需的权利。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-13T18:02:43.457

如果您想使用 Kendo UI 移动版，则必须购买许可证。Kendo UI web 控件是在 GPL 许可下开源发布的，但这不包括 Kendo UI mobile。

所以是的，你必须为 Kendo UI Mobile 付费。

# java - Google Guice 中的条件匹配

> ID：12393643
> 
> 赞同：2
> 
> 时间：2012-09-12T17:44:48.653
> 
> 标签：java, dependency-injection, aop, guice

我有一个 MethodInterceptor 绑定到类中的方法，以便在类接触数据之前对数据执行一些简单的逻辑。然而，类本身会调用它自己的一些拦截方法，但那时我不再需要重新运行该逻辑。

```
public class MyModule extends AbstractModule  { 
  @Override
  public void configure() {
    bindInterceptor(Matchers.any(), Matchers.annotatedWith(MyAnnotation.class), new MyInterceptor());
  }
}

public class MyInterceptor implements MethodInterceptor  { 
  @Override
  public Object invoke(MethodInvocation invocation) throws Throwable {
    // logic 
  }
}

public MyClass {
  @MyAnnotation
  void foo() {
    bar();
  }

  @MyAnnotation
  void bar() {
  }
} 
```

有没有办法不接受 foo 中的 bar 调用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T18:18:56.103

老实说，最简单的解决方案是通过从不从类中调用同一类的另一个公共/注释方法来简单地避免该问题：

```
public class MyClass {
  @MyAnnotation
  public void foo() {
     doBar();
  }

  @MyAnnotation
  public void bar() {
     doBar();
  }

  private void doBar() {
     //doesn't go through interceptor
  }
} 
```

如果由于某种原因这不是一种选择，那么您可能会考虑这种方法。更具表现力的 AOP 库（如 AspectJ）为您定义切入点提供了更高级别的灵活性。

在 Guice 中，切入点只是一个带有注释的方法，该注释属于由 Guice 实例化的实例。所以这个逻辑必须转移到拦截器本身。

这样做的一种方法可能是使用 a`ThreadLocal`来跟踪进入拦截器的条目。扩展这样的东西可能是一个开始：

```
public abstract class NonReentrantMethodInterceptor implements MethodInterceptor {

    private final ThreadLocal<Deque<Object>> callStack = new ThreadLocal<>();

    @Override
    public final Object invoke(MethodInvocation invocation) throws Throwable {
        Deque<Object> callStack = this.callStack.get();
        if (callStack == null) {
            callStack = new LinkedList<>();
            this.callStack.set(callStack);
        }

        try {
            return invokeIfNotReentrant(callStack, invocation);
        } finally {
            if (callStack.isEmpty()) {
                this.callStack.remove();
            }
        }
    }

    private final Object invokeIfNotReentrant(Deque<Object> callStack, MethodInvocation invocation) throws Throwable {
        Object target = invocation.getThis();
        if (callStack.isEmpty() || callStack.peek() != target) {
            //not being called on the same object as the last call
            callStack.push(target);
            try {
                return doInvoke(invocation);
            } finally {
                callStack.pop();
            }
        } else {
            return invocation.proceed();
        }
    }

    protected abstract Object doInvoke(MethodInvocation invocation) throws Throwable;
} 
```

这使用线程本地堆栈来跟踪对拦截器的调用*堆栈*。当对该拦截器的最后一次调用针对同一个对象时，它会调用`proceed()`并绕过该拦截器。当这是第一次调用拦截器时，或者如果最后一次调用不是针对同一个对象，它会应用拦截器。

然后，当拦截器处于活动状态时，您想要应用的实际逻辑将进入`doInvoke()`.

**示例用法：**

```
public class NonReentrantTester {

    public static void main(String[] args) {
        Injector injector = Guice.createInjector(new Module());
        MyClass instance = injector.getInstance(MyClass.class);
        instance.foo();
    }

    static class Module extends AbstractModule {

        @Override
        protected void configure() {
            bindInterceptor(Matchers.any(), Matchers.annotatedWith(PrintsFirstInvocation.class), 
                    new PrintsFirstInvocationInterceptor());
        }
    }

    public static class MyClass {
        @PrintsFirstInvocation
        void foo() {
            bar();
        }

        @PrintsFirstInvocation
        void bar() {
        }
    }

    public static class PrintsFirstInvocationInterceptor extends NonReentrantMethodInterceptor {

        @Override
        protected Object doInvoke(MethodInvocation invocation) throws Throwable {
            System.out.println(invocation.getMethod());
            return invocation.proceed();
        }
    }

    @BindingAnnotation
    @Target({FIELD, PARAMETER, METHOD})
    @Retention(RUNTIME)
    public @interface PrintsFirstInvocation {
    }

} 
```

# c# - 在 ASP.NET MVC 中将 Redis 与 SQL 数据库一起使用的可能性有哪些

> ID：12393654
> 
> 赞同：2
> 
> 时间：2012-09-12T17:45:27.887
> 
> 标签：c#, asp.net, asp.net-mvc, nosql, redis

Redis 作为主数据库和缓存。以及如何实施？

使用这种架构的其他优点和缺点是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T17:48:53.897

我可以说 redis 非常快，但我不能说出自己的优点/缺点。

对于 C# 语言绑定，我可以推荐[ServiceStack.Redis](http://www.servicestack.net/docs/redis-client/redis-client)。

如果您阅读文档，您将立即弄清楚如何实现“它”。

另见此处：[https ://github.com/ServiceStack/ServiceStack.Redis](https://github.com/ServiceStack/ServiceStack.Redis)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T17:49:06.567

您选择的数据库实际上取决于您要解决的问题以及解决方案的数据需求。

优点将是高可扩展性和随之而来的性能。

缺点是增加了痛苦，并且您失去了传统 sql/oracle 提供的一些一致性保证。

如果您需要更多信息，我可以尝试提供帮助

# jquery - 创建jquery插件是一件好事吗

> ID：12393656
> 
> 赞同：-1
> 
> 时间：2012-09-12T17:45:35.867
> 
> 标签：jquery

所以假设我正在建立一个巨大的网站，接近 facebook 的大小，并且我正在使用 jquery 来处理大多数客户端的东西，现在显然可能会有至少 4k 行代码和数千个 ajax 请求ETC..

所以我的问题很简单，构建基于 jquery 的脚本的最佳方法是什么，我应该为我要多次使用的东西创建插件，还是应该只使用函数并在需要时调用它们？

**编辑**好吧，也许我做得过火了，`facebook size`但无论如何它都会很大..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:48:36.410

无论哪种方式，插件或功能都可以很好地完成任务。如果您有一个像其他 jQuery 方法一样对一个或多个 DOM 对象进行操作的操作，那么插件是有意义的。

插件的优势在于您可以更轻松地将其链接起来，如下所示：

```
$(".myClass").myPlugin("x").addClass("foo"); 
```

而且，它是一种在 jQuery 命名空间中创建许多函数而根本不使用全局命名空间的方法。除此之外，它与函数之间没有太大区别。

如果您有一个常用的 jQuery 操作，那么将其制作为插件没有任何缺点，并且您可以获得链接方法调用的能力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T17:50:03.317

在任何类型的大型、厚客户端（即 javascript-heavy）Web 应用程序中，您可能需要真正掌握有关命名空间、范围等方面的 javascript 代码库。

我认为插件可能是您工具箱中的一个工具，可以帮助保持全局命名空间清洁，但您也可以研究诸如骨干网之类的框架，它可以让您完全从 DOM 中释放一些 javascript 代码结构。

underscore.js 等其他工具也可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T17:52:17.287

如果您的网站是如此大的网站，我建议您在 jquery 旁边使用[Knockout.js](http://knockoutjs.com/)库，它在 java 脚本中实现 MVVM 模式。正如您提到的，在大型网站上使用 jQuery 会导致大量代码行。我认为knockout.js 你可以减少它们并更好地管理你的函数和回调。
这只是一个建议。

# python - Powershell中有一个函数可以转换为Webappliction，有没有办法在Python中做到这一点？

> ID：12393660
> 
> 赞同：0
> 
> 时间：2012-09-12T17:45:53.417
> 
> 标签：python, web-applications, powershell

PowerShell 脚本的问题在于它们必须经过签名才能在其他计算机上运行。Python 没有，它只需要安装即可。有没有办法使用 Python实现[ConvertTo-WebApplication ？](http://technet.microsoft.com/en-us/library/ee807827.aspx)

PS命令：

```
ConvertTo-WebApplication "IIS:\Sites\Default Web Site\name\Name" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:59:50.643

这可能可以通过[pexpect](http://www.noah.org/wiki/pexpect#Description_of_Pexpect)来完成。

# c# - 在 C# 中如何分配给动态对象？

> ID：12393661
> 
> 赞同：2
> 
> 时间：2012-09-12T17:45:57.223
> 
> 标签：c#

在 ASP.NET MVC 中，该属性`ViewBag`是动态类型的。

[通过代码](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/adding-a-view)，将各种“属性”`ViewBag`分配给：

```
ViewBag.Message = "Hello world";
ViewBag.Title = "Page title"; 
```

这是如何运作的？通过阅读[文档](http://msdn.microsoft.com/en-us/library/dd264736.aspx)，我`ViewBag`可以得到任何东西，但是为什么（或如何）将某些东西分配给动态类型的“成员”？

这是`ViewBag`在类中定义的方式`public abstract class ControllerBase : IController`：

```
 [Dynamic]
 public dynamic ViewBag { get; }
 //
 // Summary:
 //     Gets or sets the dictionary for view data.
 //
 // Returns:
 //     The dictionary for the view data.
 public ViewDataDictionary ViewData { get; set; } 
```

只是好奇。

*相关问题：* [在哪里可以找到 DynamicViewDataDictionary 的官方文档？](https://stackoverflow.com/questions/6735423/where-can-i-find-the-official-documentation-for-dynamicviewdatadictionary)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T17:49:27.830

[`ViewBag`](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/087a8e54f9de#src%2fSystem.Web.Mvc%2fControllerBase.cs)是一个[`ExpandoObject`](http://msdn.microsoft.com/en-us/library/system.dynamic.expandoobject.aspx)或类似的东西。这基本上只是一个以“属性”为键的美化字典。

**更新**：
实际上，它是[`DynamicViewDataDictionary`](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/087a8e54f9de#src%2fSystem.Web.Mvc%2fDynamicViewDataDictionary.cs)ASP.NET MVC 源代码内部的一个类。此类继承自[`DynamicObject`](http://msdn.microsoft.com/en-us/library/system.dynamic.dynamicobject.aspx)a 并且只是 a 的包装器，`ViewDataDictionary`以防. 正如你所看到的，调用被委派给没有任何逻辑的。`ViewBag``ViewData``ControllerBase`
`TryGetMember``TrySetMember``ViewData`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T18:15:55.477

“Visual C# 2010 引入了一种新类型，动态。该类型是静态类型，但动态类型的对象绕过静态类型检查。在大多数情况下，它的功能就像它具有类型对象一样。在编译时，类型化的元素因为动态假设支持任何操作。因此，您不必担心对象是否从 COM API、从 IronPython 等动态语言、从 HTML 文档对象模型 (DOM)、从反射获取其值，或来自程序中的其他地方。但是，如果代码无效，则会在运行时捕获错误。

[http://msdn.microsoft.com/en-us/library/dd264736.aspx](http://msdn.microsoft.com/en-us/library/dd264736.aspx)

# php - PHP日期时区错误

> ID：12393662
> 
> 赞同：0
> 
> 时间：2012-09-12T17:46:01.227
> 
> 标签：php, apache

首先，这是我关于日期的 php.ini 配置：

```
 [Date]
 date.timezone = 'America/Sao_Paulo' 
```

当我得到 ini_get('date.timezone') 时，我会看到以下 America/Sao_paulo **（注意小写的 P）**

每次使用时都会出现以下错误`date()`

> 依赖系统的时区设置是不安全的。您 *需要*使用 date.timezone 设置或 date_default_timezone_set() 函数。如果您使用了这些方法中的任何一种，但仍然收到此警告，您很可能拼错了时区标识符。我们为“BRT/-3.0/no DST”选择了“America/Sao_Paulo”

如果我使用

```
date_default_timezone_set('America/Sao_Paulo'); 
```

一切都很顺利，所以我猜有些东西搞砸了我的时区配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:49:05.777

你确定你在正确的 php.ini 中设置它吗？

调用 phpinfo() 并确保您正在修改“加载的配置文件”下列出的 ini 文件

编辑：当您查看 phpinfo() 时，您还可以通过查看 Date->Default timezone 来查看是否实际设置了时区

# php - PHP 简单 HTML DOM 解析器中的用户代理

> ID：12393664
> 
> 赞同：1
> 
> 时间：2012-09-12T17:46:04.660
> 
> 标签：php, parsing

如何在 PHP Simple HTML DOM Parser 中添加用户代理，这样它就会使用每个用户代理浏览一个网站，为每个访问者提供他/她的 ip 地址。任何例子或想法..谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:56:41.740

您可以在流上下文的选项中设置用户代理

```
<?php
$opts = array(
    'http' => array(
        'user_agent' => 'Enter agent here',
    )
);

$context = stream_context_create($opts);
libxml_set_streams_context($context);
$doc = DOMDocument::load('URL'); 
```

?>

# c# - 将 varchar 数据类型转换为 datetime 数据类型导致超出范围的值错误

> ID：12393665
> 
> 赞同：4
> 
> 时间：2012-09-12T17:46:09.757
> 
> 标签：c#, .net, sql-server-2008, visual-c#-express-2010

将 varchar 数据类型转换为 datetime 数据类型导致超出范围的值错误

我正在尝试使用表单将数据输入到我的表中，表单验证和 sql server 中的日期格式都是 dd/mm/yy，但是当我尝试从表单提交数据时，日期高于 12 （例如 13/12/2012）它抛出一个异常，其原因是“将 varchar 数据类型转换为 datetime 数据类型导致超出范围的值错误”，并且如果我尝试将数据输入表单在 mm/dd/yy 格式中，它指出“错误的日期格式”，这意味着 dd/mm/yy 格式是正确的格式

下面是我的表单的代码：

```
 private void btnAddProject_Click(object sender, EventArgs e)
    {
        DateTime startDate;
        DateTime endDate;

        if (txtProjectName.Text == "") //client side validation
        {
            MessageBox.Show("Enter Project Name");
            return;
        }

        try
        {
            startDate = DateTime.Parse(txtProjectStart.Text);
            endDate = DateTime.Parse(txtProjectEnd.Text);
        }
        catch (Exception)
        {
            MessageBox.Show("Wrong Date Format");
            return;
        }
        fa.CreateProject(txtProjectName.Text, startDate, endDate, (int)cbCustomers.SelectedValue, ptsUser.Id);
        txtProjectName.Text = "";
        txtProjectStart.Text = "";
        txtProjectEnd.Text = "";
        cbCustomers.SelectedIndex = 0;
        MessageBox.Show("Project Created");
        adminControl.SelectTab(2);
    }// end btnAddProject 
```

这是我的 DAO 中的代码：

```
public void CreateProject(string name, DateTime startDate, DateTime endDate, int customerId, int administratorId)
    {
        string sql;
        SqlConnection cn;
        SqlCommand cmd;
        Guid projectId = Guid.NewGuid();

        sql = "INSERT INTO Project (ProjectId, Name, ExpectedStartDate, ExpectedEndDate, CustomerId, AdministratorId)";
        sql += String.Format("VALUES('{0}', '{1}', '{2}', '{3}', {4}, {5})", projectId, name, startDate, endDate, customerId, administratorId);

        cn = new SqlConnection(Properties.Settings.Default.WM75ConnectionString);
        cmd = new SqlCommand(sql, cn);

        try
        {
            cn.Open();
            cmd.ExecuteNonQuery();
        }
        catch (SqlException ex)
        {
            throw new Exception("Error Creating Project", ex);
        }
        finally
        {
            cn.Close();
        }

    }//end CreateProject Method 
```

这是我的门面代码：

```
public void CreateProject(string name, DateTime startDate, DateTime endDate, int customerId, int administratorId)
    {
        dao.CreateProject(name, startDate, endDate, customerId, administratorId);
    }//end CreateProject 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-12T18:18:36.847

您可以像 [sqldatetime一样进行 sqldatetime 转换](https://stackoverflow.com/questions/2191120/net-datetime-to-sqldatetime-conversion)

```
 var sqlFormattedDate = myDateTime.Date.ToString("yyyy-MM-dd HH:mm:ss"); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-12T17:51:33.940

基本上，您根本不应该在 SQL中将`DateTime`值作为*字符串传递。*使用参数化SQL，直接设置参数值即可。您应*始终*尽可能使用参数化 SQL：

*   它提供了更好的代码/数据分离
*   它避免了有问题的转换（比如这个）
*   它避免了 SQL 注入攻击

此外，您的异常处理是毫无意义的复杂。只需使用一个`using`声明，然后`SqlException`直接让气泡升起——为什么还要费心把它包在香草里`Exception`呢？

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-12T17:53:14.023

```
sql = "INSERT INTO Project (ProjectId, Name, ExpectedStartDate, ExpectedEndDate, CustomerId, AdministratorId)";
sql += String.Format("VALUES('{0}', '{1}', '{2}', '{3}', {4}, {5})", projectId, name, startDate.toString("dd-MMM-yyyy"), endDate.toString("dd-MMM-yyyy"), customerId, administratorId); 
```

一个建议：你为什么`Insert`在你的代码中使用语句？您可以改为使用存储过程。

# javascript - /undefined 在我的 404 错误日志中出现了很多时间

> ID：12393667
> 
> 赞同：6
> 
> 时间：2012-09-12T17:46:23.580
> 
> 标签：javascript

基本上在我的错误日志中，我看到很多：

```
mysite.com/undefined (with referer coming from random pages of the website)

User-Agent: Mozilla/5.0 (Windows NT 6.0) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1 
```

（和其他一些用户代理）

我当然已经检查了 HTML 或 DOM 中的链接`/undefined`或类似的东西，但什么都没有。我已经使用开发人员工具检查了网络选项卡，并且在这些页面上没有任何请求`/undefined`（使用我的 chrome）。

然后我设置了一个[javascript 记录器](https://stackoverflow.com/a/11168326/496223)来保存出现的任何错误。而且在日志中没有任何东西会抛出 undefined 或类似的东西......

这真让我抓狂。当然，如果我用我的 chrome 进入 tihs 页面，javascript 不会打印任何错误

注意：我已经阅读[了这里的所有内容](https://stackoverflow.com/questions/11017609/undefined-randomly-appended-in-1-of-requested-urls-on-my-website-since-12-jun)

## 编辑

注意2：除了那个javascript错误记录器之外，我还添加了一个事件监听器（如链接的答案中所述）

```
$("body").on("click", "a[href$='undefined']", function() {
    window.onerror('Bad link: ' + $(this).html()); //alert home base
}); 
```

这永远不会被触发。（我已经使用手动/未定义的链接对其进行了测试，并且记录器可以正常工作）

我也在谷歌群组上找到[了这个主题。](http://productforums.google.com/forum/#!topic/chrome/G1snYHaHSOc)那里的网站管理员遇到了同样的问题，但没有人设法确定原因。

也许是 chrome 或任何其他浏览器上的一些**扩展**导致了这个请求。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T12:43:39.577

大概您正在使用`window.onerror`并在该函数中记录错误。

如果 javascript 错误发生在不同的域（例如，来自某些社交按钮、iframe、跨域 javascript 或可能的浏览器扩展），window.onerror 实际上可能会泄露错误报告中的敏感信息。所以出于安全原因，跨域错误仍然会调用该函数，但所有参数（包括 url）将是未定义的，并且消息将只是一个通用的“脚本错误”。我猜你有跨域错误，它们被记录为未定义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T17:27:20.390

再看看您链接到的那个 Google Group 线程。就在最近，其中一名成员[设法找到一种方法来禁用](https://productforums.google.com/d/msg/chrome/G1snYHaHSOc/pmuCFDrSFxsJ)似乎导致错误的插件/恶意软件：

> 要禁用恶意软件并停止“不受约束”的请求，请将其应用于您网站上具有搜索字段的每个页面：
> 
> ```
> <script type="text/javascript">
>      window.suggestmeyes_loaded = true;
> </script> 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T18:01:07.940

听起来这很可能是一个 ajax 请求，`"/" + variable`并且`variable`恰好是 undefined 而不是 say `user`。您是否使用库进行 AJAX 调用？也许您也可以尝试在其中捕获无效的 url。

# javascript - 子字符串/正则表达式以获取保存在字符串中的 src 值

> ID：12393671
> 
> 赞同：12
> 
> 时间：2012-09-12T17:46:38.543
> 
> 标签：javascript

我有一个带有值的字符串：

```
var string = "<img alt='' src='http://api.com/images/UID' /><br/>Some plain text<br/><a href='http://www.google.com'>http://www.google.com</a>" 
```

如果可能的话，我想在字符串的属性部分中`URL`保留。`src`

如何使用 JavaScript 做到这一点？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-12T17:50:49.887

一种方法是使用正则表达式。

```
var str = "<img alt='' src='http://api.com/images/UID' /><br/>Some plain text<br/><a href='http://www.google.com'>http://www.google.com</a>";

var regex = /<img.*?src='(.*?)'/;
var src = regex.exec(str)[1];

console.log(src);
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-12T17:52:36.050

替代方法，如果它总是 html 数据。

```
var string ="<img alt='' src='http://api.com/images/UID' /><br/>Some plain text<br/><a href='http://www.google.com'>http://www.google.com</a>";

var elem= document.createElement("div");
elem.innerHTML = string;

var images = elem.getElementsByTagName("img");

for(var i=0; i < images.length; i++){
   console.log(images[i].src);   
}
​ 
```

**[现场演示](http://jsfiddle.net/loktar/Zaaqy/)**

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-12T18:00:16.963

一种方法如下：

```
var string = "<img alt='' src='http://api.com/images/UID' /><br/>Some plain text<br/><a href='http://www.google.com'>http://www.google.com</a>",
    srcWithQuotes = string.match(/src\=([^\s]*)\s/)[1],
    src = srcWithQuotes.substring(1,srcWithQuotes.length - 1);
console.log(src);​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/DmhZb/)。

这有效地匹配以`src=`（`=`用反斜杠转义的字符序列，否则它在正则表达式中具有特殊含义），后跟一系列非空白字符 ( `^\s*`)，后跟一个空白字符 ( `\s`)。

此表达式显式捕获用于分隔`src`属性的引号，`src`通过获取`srcWithQuotes`变量的子字符串返回，从`1`（第一个，第零个字符应该是属性分隔符）开始直到最后一个字符之前的索引（最终引号定界属性）。

使用文档片段有一种稍微复杂（但可能更可靠）的方法：

```
var string = "<img alt='' src='http://api.com/images/UID' /><br/>Some plain text<br/><a href='http://www.google.com'>http://www.google.com</a>",
    temp = document.createElement('div'),
    frag = document.createDocumentFragment();

temp.innerHTML = string;
frag.appendChild(temp);
console.log(temp.getElementsByTagName('img')[0].src);​​​​​​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/DmhZb/1/)。

当然，在本例中，您可以使用任何您喜欢的方法在`temp`节点 ( `getElementById()`, `getElementsByClassName()`...) 中查找图像。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-12T18:03:14.370

本机 DOM（将导致 GET）

```
var str = "<img alt='' src='http://api.com/images/UID' /><br/>Some plain text<br/><a href='http://www.google.com'>http://www.google.com</a>",
d = document.createElement('div'),
srcs = [];
d.innerHTML = str;
srcs = Array.prototype.slice.call(d.querySelectorAll('[src]'),0);
while( srcs.length > 0 ) console.log( srcs[0].src ), srcs.shift(); 
```

或正则表达式

```
var str = "<img alt='' src='http://api.com/images/UID' /><br/>Some plain text<br/><a href='http://www.google.com'>http://www.google.com</a>",
re = /\ssrc=(?:(?:'([^']*)')|(?:"([^"]*)")|([^\s]*))/i, // match src='a' OR src="a" OR src=a
res = str.match(re),
src = res[1]||res[2]||res[3]; // get the one that matched

src; // http://api.com/images/UID 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-02-10T22:11:13.967

假设您要专门匹配标签`src`中的属性。`<img>`您可以使用此正则表达式，因为它将匹配标签，仍然保留它可能具有的其他属性以及`src`属性内的其他内容：

`var matches = string.match(/<img([^>]+)src="[/]?([^"]+)"([^>]*)>|<( *)img( *)[/>|>]/g);`

它可以改进，但适用于某些类型的打字。

例如，如果你想匹配`<img>`甚至`<img src="/200px-Unofficial_JavaScript_logo_2.svg.png" alt="" width="100" height="172" />`添加一些东西到 url，你可以做以下替换：

`string.replace(/<img([^>]+)src="[/]?([^"]+)"([^>]*)>|<( *)img( *)[/>|>]/g, '<img $1src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/99/Unofficial_JavaScript_logo_2.svg/$2" $3>');`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-20T06:44:48.057

您可以使用 jQuery 来执行此操作，使用 find 方法，获取图像的 src 属性。

```
var str = '<img src="/uploads/thumbnail/79a23278ec18b2fc505b06ab799d5ec672094e79.jpg">';

var result = $(str).find('img').eq(0).attr('src');  //  get a image src 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2015-03-25T18:10:37.910

Facciy 2015：通过 DOM 使用 jQuery 和 CofeeScript

```
str = '<img alt='' src='http://api.com/images/UID' /><br/>Some plain text<br/><a href='http://www.google.com'>http://www.google.com</a>'

img = $(@.content).find('img').each ()->
  srcimg = $(@).attr('src')
  console.log srcimg 
```

# c# - 文件系统 TtreeView

> ID：12393675
> 
> 赞同：0
> 
> 时间：2012-09-12T17:47:00.080
> 
> 标签：c#, wpf, winforms, treeview

[我在这里](http://code.msdn.microsoft.com/windowsdesktop/File-system-TreeView-72549a6f)找到了一个在 MSDN 上显示文件系统树（如在 Windows Explorer 中）的示例。你知道在 WinForms 中有什么替代方法吗？提前致谢！

上面链接的示例，在运行时报告以下错误： ![在此处输入图像描述](../Images/55cb71fd12a07c78041b1f006f8ac545.png)

有人遇到同样的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:50:13.727

好吧，WinForms 有它自己的内置[TreeView](http://msdn.microsoft.com/en-us/library/system.windows.forms.treeview.aspx)控件，您可以使用它。从那里您可以手动填充它。使用[System.IO](http://msdn.microsoft.com/en-us/library/system.io.aspx)命名空间

# c - 使用 C 进行 gdbm 编程

> ID：12393680
> 
> 赞同：0
> 
> 时间：2012-09-12T17:47:52.187
> 
> 标签：c, gdbm

我正在尝试使用 C 学习 gnu gdbm 编程，但由于 gdbm 教程、书籍等的缺乏而无法继续，所以我唯一需要遵循的是 w3 上可用的几个简单的 gdbm c api 代码。我在两个单独的 .c 文件的帮助下编写并编译了以下代码，但**它无法**从数据库“testdb”中获取数据，所以请告诉我哪里出错了。首先它存储一个字符串，然后在第二部分中获取数据。输出是；未找到密钥。

```
#include <stdio.h>
#include <gdbm.h>
#include <stdlib.h>
#include <string.h>

int
main(void)
{
  GDBM_FILE dbf;
  datum key = { "testkey", 7 };     /* key, length */
  datum value = { "testvalue", 9 }; /* value, length */

  printf ("Storing key-value pair... \n");

  dbf = gdbm_open("testdb", 0, GDBM_NEWDB,0666, 0);
  gdbm_store (dbf, key, value, GDBM_INSERT);
  printf ("key: %s size: %d\n", key.dptr, key.dsize);
  gdbm_close (dbf);
  printf ("done.\n\n");

   dbf = gdbm_open("testdb", 0, GDBM_READER, 0666, 0);
   if (!dbf)
   {
      fprintf (stderr, "File %s either doesn't exist or is not a gdbm file.\n", "testdb");
      exit (1);
   }

   key.dsize = strlen("testkey") + 1;

   value = gdbm_fetch(dbf, key);

   if (value.dsize > 0) {
      printf ("%s\n", value.dptr);
      free (value.dptr);
   } 
    else {
      printf ("Key %s not found.\n", key.dptr);
   }
   gdbm_close (dbf);

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T18:12:36.833

包括尾随 '\0' 的长度。

```
 datum key = { "testkey", 8 };     /* key, length */
  datum value = { "testvalue", 10 }; /* value, length */ 
```

* * *

- 编辑：

关于您评论的链接：[http ://www-rohan.sdsu.edu/doc/gdbm/example.html](http://www-rohan.sdsu.edu/doc/gdbm/example.html)

仔细阅读第一个要点：*“我假设编写密钥和数据的过程包括终止空字符。......”*

所以; **要么**：

```
datum key = { "testkey", 8 }; /* Include \0 in length */
datum value = { "testvalue", 10 }; 
```

和：

```
key.dsize = strlen("testkey") + 1; /* +1 for the trailing \0 */ 
```

**或者**

```
datum key = { "testkey", 7 }; /* Skip \0 in length */
datum value = { "testvalue", 9 }; 
```

和：

```
key.dsize = strlen("testkey"); /* Do not +1 */ 
```

第一个*版本*通常是首选，因为不以 null 结尾的 c 字符串可能很难使用。

希望能帮助到你。

* * *

-- 编辑 2（对不起，继续思考新事物）：

另请注意，如果您说 ie：

```
datum value = { "testvalue", 5 }; /* value, length */ 
```

存储的值将是“testv”。

# php - 文件存在于 Amazon S3

> ID：12393681
> 
> 赞同：0
> 
> 时间：2012-09-12T17:48:02.237
> 
> 标签：php, amazon-s3

我有一个网页，其中列出了数以千计的图像文件链接。目前处理这种情况的方式是使用一个非常大的 HTML 文件，该文件使用图像名称和指向图像文件的链接进行手动编辑。图像管理得不是很好，所以很多链接经常被破坏或名称错误。

这是 HTML 文件中数千行中的一行的示例：

```
 <h4>XL Green Shirt<h4>
<h5>SKU 158f15 </h5>
    [<a href="http://website.com/images/products/TIFF/158f15.tif" target="_blank">TIFF</a>] 
    [<a href="http://website.com/images/products/158f15.jpg" target="_blank">JPEG</a>]
    [<a href="http://website.com/images/products/PNG/158f15.png" target="_blank">PNG</a>]
    <br /> 
```

我在数据库中有关于图像的产品信息，所以我的解决方案是在 PHP 中编写一个页面来遍历数据库中的每个产品编号，并查看是否存在具有相同 id 的文件，然后显示适当的链接和信息。

我使用 PHP 函数 file_exists() 执行此操作，因为产品 ID 与文件名相同，并且它在我的本地计算机上运行良好。问题是所有图像都托管在 AmazonS3 上，因此在 S3 上运行此功能数千次总是会导致请求超时。我已经尝试过类似的 PHP 函数以及 ping URL 并测试 200 或 404 响应，所有超时。

是否有一种解决方案可以检查远程 URL 上的文件是否存在并消耗很少的资源？或者有没有更新颖的方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T18:07:13.020

我认为您最好确保在将记录放入数据库时​​强制执行文件的存在，而不是尝试在每次页面加载时检查数千个文件的存在。

话虽如此，另一种解决方案可能会`s3fs`与本​​地存储缓存目录一起使用，以检查文件是否存在。这比直接检查 S3 存储要快得多。`s3fs`还将提供一种将新文件写入 S3 存储的便捷方式。

# eclipse - 自动化生成 Web 服务客户端的过程

> ID：12393683
> 
> 赞同：1
> 
> 时间：2012-09-12T17:48:04.913
> 
> 标签：eclipse, web-services, automation, rad

我正在使用 RAD 7.5（基于 Eclipse）从 web 服务 WSDL 生成客户端代码。实际上需要同时生成 2 或 3 个才能生成一个客户端。有没有一种方法可以自动化逐步完成 Web 服务客户端向导、为所有 WSDL 选择 JAX-WS 绑定文件的过程？理想情况下，此过程还将在生成 Java 代码后创建 Jar 文件。

是否可以在 RAD/Eclipse 中自动执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T18:07:30.550

您可以将 Maven 与 Eclipse 一起使用。

Maven有一个插件

[http://jax-ws-commons.java.net/jaxws-maven-plugin/examples/using-wsdlLocation.html](http://jax-ws-commons.java.net/jaxws-maven-plugin/examples/using-wsdlLocation.html)

```
<project>
  ...
  <dependencies>
      ...
    <dependency>
      <groupId>com.sun.xml.ws</groupId>
      <artifactId>jaxws-rt</artifactId>
      <version>2.2.6</version>
    </dependency>
    ...
  </dependencies>
  ...
  <build>
    ...
    <plugins>
      <plugin>
        <groupId>org.jvnet.jax-ws-commons</groupId>
        <artifactId>jaxws-maven-plugin</artifactId>
        <version>2.2</version>
        <executions>
          <execution>
            <goals>
              <goal>wsimport</goal>
            </goals>
            <!-- Following configuration will invoke wsimport once for each wsdl. -->
            <configuration>
              <wsdlLocation>http://example.com/mywebservices/*</wsdlLocation>
              <wsdlDirectory>src/mywsdls</wsdlDirectory>
              <wsdlFiles>
                <wsdlFile>a.wsdl</wsdlFile>                         <!-- produces wsdlLocation = http://example.com/mywebservices/a.wsdl -->
                <wsdlFile>b/b.wsdl</wsdlFile>                       <!-- produces wsdlLocation = http://example.com/mywebservices/b/b.wsdl -->
                <wsdlFile>${basedir}/src/mywsdls/c.wsdl</wsdlFile>  <!-- produces wsdlLocation = /path/to/basedir/src/mywsdls/c.wsdl -->
              </wsdlFiles>
            </configuration>
          </execution>
        </executions>
      </plugin>
      ...
    </plugins>
    ...
  <build>
  ...
</project> 
```

# scala - 我应该报告这个断言失败吗？$asInstanceOf 到底是什么？

> ID：12393687
> 
> 赞同：3
> 
> 时间：2012-09-12T17:48:20.213
> 
> 标签：scala, scala-2.9, scala-2.10

如果你用这个非常糟糕的代码片段打扰 Scala 编译器（2.9.1 或 2.10.0-M7）......

```
null.$asInstanceOf[Int] 
```

...它引发断言失败。问题：什么是`$asInstanceOf`？我应该将此报告为错误吗？

这是堆栈跟踪：

```
java.lang.AssertionError: assertion failed: null.$asInstanceOf[Int]()
        at scala.tools.nsc.backend.icode.GenICode$ICodePhase.scala$tools$nsc$backend$icode$GenICode$ICodePhase$$genLoad(GenICode.scala:754)
        at scala.tools.nsc.backend.icode.GenICode$ICodePhase.scala$tools$nsc$backend$icode$GenICode$ICodePhase$$genLoad(GenICode.scala:850)
        at scala.tools.nsc.backend.icode.GenICode$ICodePhase$$anonfun$genLoadArguments$1.apply(GenICode.scala:1226)
        at scala.tools.nsc.backend.icode.GenICode$ICodePhase$$anonfun$genLoadArguments$1.apply(GenICode.scala:1224)
        at scala.collection.LinearSeqOptimized$class.foldLeft(LinearSeqOptimized.scala:111)
        at scala.collection.immutable.List.foldLeft(List.scala:76)
        at scala.tools.nsc.backend.icode.GenICode$ICodePhase.genLoadArguments(GenICode.scala:1224)
        at scala.tools.nsc.backend.icode.GenICode$ICodePhase.scala$tools$nsc$backend$icode$GenICode$ICodePhase$$genLoad(GenICode.scala:924)
        at scala.tools.nsc.backend.icode.GenICode$ICodePhase.gen(GenICode.scala:114)
        at scala.tools.nsc.backend.icode.GenICode$ICodePhase$$anonfun$gen$1.apply(GenICode.scala:69)
        at scala.tools.nsc.backend.icode.GenICode$ICodePhase$$anonfun$gen$1.apply(GenICode.scala:69)
        at scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59)
        at scala.collection.immutable.List.foreach(List.scala:76)
        at scala.tools.nsc.backend.icode.GenICode$ICodePhase.gen(GenICode.scala:69)
        at scala.tools.nsc.backend.icode.GenICode$ICodePhase.gen(GenICode.scala:136)
        at scala.tools.nsc.backend.icode.GenICode$ICodePhase.gen(GenICode.scala:88)
        at scala.tools.nsc.backend.icode.GenICode$ICodePhase$$anonfun$gen$1.apply(GenICode.scala:69)
        at scala.tools.nsc.backend.icode.GenICode$ICodePhase$$anonfun$gen$1.apply(GenICode.scala:69)
        at scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59)
        at scala.collection.immutable.List.foreach(List.scala:76)
        at scala.tools.nsc.backend.icode.GenICode$ICodePhase.gen(GenICode.scala:69)
        at scala.tools.nsc.backend.icode.GenICode$ICodePhase.gen(GenICode.scala:79)
        at scala.tools.nsc.backend.icode.GenICode$ICodePhase.gen(GenICode.scala:65)
        at scala.tools.nsc.backend.icode.GenICode$ICodePhase.apply(GenICode.scala:61)
        at scala.tools.nsc.Global$GlobalPhase.applyPhase(Global.scala:329)
        at scala.tools.nsc.Global$GlobalPhase$$anonfun$run$1.apply(Global.scala:297)
        at scala.tools.nsc.Global$GlobalPhase$$anonfun$run$1.apply(Global.scala:297)
        at scala.collection.Iterator$class.foreach(Iterator.scala:772)
        at scala.collection.mutable.ListBuffer$$anon$1.foreach(ListBuffer.scala:318)
        at scala.tools.nsc.Global$GlobalPhase.run(Global.scala:297)
        at scala.tools.nsc.backend.icode.GenICode$ICodePhase.run(GenICode.scala:54)
        at scala.tools.nsc.Global$Run.compileSources(Global.scala:953)
        at scala.tools.nsc.Global$Run.compile(Global.scala:1041)
        at xsbt.CachedCompiler0.run(CompilerInterface.scala:90)
        at xsbt.CachedCompiler0.liftedTree1$1(CompilerInterface.scala:72)
        at xsbt.CachedCompiler0.run(CompilerInterface.scala:72)
        at xsbt.CompilerInterface.run(CompilerInterface.scala:26)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:616)
        at sbt.compiler.AnalyzingCompiler.call(AnalyzingCompiler.scala:73)
        at sbt.compiler.AnalyzingCompiler.compile(AnalyzingCompiler.scala:35)
        at sbt.compiler.AnalyzingCompiler.compile(AnalyzingCompiler.scala:29)
        at sbt.compiler.AggressiveCompile$$anonfun$4$$anonfun$compileScala$1$1.apply$mcV$sp(AggressiveCompile.scala:71)
        at sbt.compiler.AggressiveCompile$$anonfun$4$$anonfun$compileScala$1$1.apply(AggressiveCompile.scala:71)
        at sbt.compiler.AggressiveCompile$$anonfun$4$$anonfun$compileScala$1$1.apply(AggressiveCompile.scala:71)
        at sbt.compiler.AggressiveCompile.sbt$compiler$AggressiveCompile$$timed(AggressiveCompile.scala:101)
        at sbt.compiler.AggressiveCompile$$anonfun$4.compileScala$1(AggressiveCompile.scala:70)
        at sbt.compiler.AggressiveCompile$$anonfun$4.apply(AggressiveCompile.scala:88)
        at sbt.compiler.AggressiveCompile$$anonfun$4.apply(AggressiveCompile.scala:60)
        at sbt.inc.IncrementalCompile$$anonfun$doCompile$1.apply(Compile.scala:24)
        at sbt.inc.IncrementalCompile$$anonfun$doCompile$1.apply(Compile.scala:22)
        at sbt.inc.Incremental$.cycle(Incremental.scala:39)
        at sbt.inc.Incremental$.compile(Incremental.scala:26)
        at sbt.inc.IncrementalCompile$.apply(Compile.scala:20)
        at sbt.compiler.AggressiveCompile.compile2(AggressiveCompile.scala:96)
        at sbt.compiler.AggressiveCompile.compile1(AggressiveCompile.scala:44)
        at sbt.compiler.AggressiveCompile.apply(AggressiveCompile.scala:31)
        at sbt.Compiler$.apply(Compiler.scala:79)
        at sbt.Defaults$$anonfun$compileTask$1.apply(Defaults.scala:571)
        at sbt.Defaults$$anonfun$compileTask$1.apply(Defaults.scala:571)
        at sbt.Scoped$$anonfun$hf2$1.apply(Structure.scala:578)
        at sbt.Scoped$$anonfun$hf2$1.apply(Structure.scala:578)
        at scala.Function1$$anonfun$compose$1.apply(Function1.scala:49)
        at sbt.Scoped$Reduced$$anonfun$combine$1$$anonfun$apply$12.apply(Structure.scala:311)
        at sbt.Scoped$Reduced$$anonfun$combine$1$$anonfun$apply$12.apply(Structure.scala:311)
        at sbt.$tilde$greater$$anonfun$$u2219$1.apply(TypeFunctions.scala:40)
        at sbt.std.Transform$$anon$5.work(System.scala:71)
        at sbt.Execute$$anonfun$submit$1$$anonfun$apply$1.apply(Execute.scala:232)
        at sbt.Execute$$anonfun$submit$1$$anonfun$apply$1.apply(Execute.scala:232)
        at sbt.ErrorHandling$.wideConvert(ErrorHandling.scala:18)
        at sbt.Execute.work(Execute.scala:238)
        at sbt.Execute$$anonfun$submit$1.apply(Execute.scala:232)
        at sbt.Execute$$anonfun$submit$1.apply(Execute.scala:232)
        at sbt.ConcurrentRestrictions$$anon$4$$anonfun$1.apply(ConcurrentRestrictions.scala:159)
        at sbt.CompletionService$$anon$2.call(CompletionService.scala:30)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:679) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T15:00:44.673

问题与您`$`在名称中包含一美元有关。来自 Scala 语言规范（第 1.1 节标识符）：

> '$' 字符是为编译器合成的标识符保留的。用户程序不应定义包含“$”字符的标识符。

尽管它没有明确说明，但暗示用户程序也不应该使用这样的标识符。

我想这是一个关于结果应该有多糟糕的判断问题，当你偏离保留并使用这样的东西时，以及编译器崩溃是否包含在这样的允许结果中。

# angularjs - 如何在不创建新范围的情况下将一个部分包含到另一个中？

> ID：12393703
> 
> 赞同：21
> 
> 时间：2012-09-12T17:49:48.920
> 
> 标签：angularjs

我有这条路线。

```
// index.html
<div ng-controller="mainCtrl">
    <a href='#/one'>One</a>
    <a href='#/two'>Two</a>
</div>​​​​​​​​​
<div ng-view></div> 
```

这就是我将部分加载到我的`ng-view`.

```
// app.js
​var App = angular.module('app', []);​​​​​​​
App.config(['$routeProvider', function($routeProvider) {
    $routeProvider.when('/one', {template: 'partials/one.html', controller: App.oneCtrl});
    $routeProvider.when('/two', {template: 'partials/two.html', controller: App.twoCtrl});
  }]); 
```

当我单击链接时，它会在 ng-view 中显示适当的标记。但是，当我尝试将using包含`partials/two.html`在内时，它会正确显示它，但会创建不同的范围，因此我无法与之交互。`partials/one.html``ng-include`

```
// partials/two.html - markup
<div ng-controller="twoCtrl">I'm a heading of Two</div>

// partials/one.html - markup
<div ng-controller="oneCtrl">I'm a heading of One</div>
<div ng-include src="'partials/two.html'"></div> 
```

​ 我该如何解决这个问题？或者有没有其他方法可以达到同样的效果？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-06-27T09:57:17.370

您可以编写自己的包含指令，该指令不会创建新范围。例如：

```
MyDirectives.directive('staticInclude', function($http, $templateCache, $compile) {
    return function(scope, element, attrs) {
        var templatePath = attrs.staticInclude;
        $http.get(templatePath, { cache: $templateCache }).success(function(response) {
            var contents = element.html(response).contents();
            $compile(contents)(scope);
        });
    };
}); 
```

您可以像这样使用它：

```
<div static-include="my/file.html"></div> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-12T18:14:16.913

[ngInclude](http://docs.angularjs.org/api/ng.directive:ngInclude)的文档指出**“此指令创建新范围”。**所以这是设计使然。

根据您正在寻找的交互类型，您可能希望查看[这篇文章](https://stackoverflow.com/questions/12008908/pass-variables-between-controllers)，了解一种通过[自定义服务](http://docs.angularjs.org/guide/dev_guide.services.creating_services)在两个控制器之间共享数据/功能的方法。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-10-06T21:29:40.783

所以这不是这个问题的答案，但我在这里寻找类似的东西，希望这对其他人有帮助。

该指令将包含一个部分而不创建新范围。例如，您可以在部分中创建一个表单并从父控制器控制该表单。

这是我为它创建[的 Repo 的链接。](https://github.com/jamesharrington/angular-static-include)

祝你好运 ：-）

——詹姆斯·哈灵顿

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-21T18:42:20.870

您实际上可以在不使用共享服务的情况下执行此操作。$scope.$emit(...) 可以将事件发送到 $rootScope，它可以监听它们并重新广播到子作用域。

演示：http: [//jsfiddle.net/VxafF/](http://jsfiddle.net/VxafF/)

**参考：** [http](http://www.youtube.com/watch?v=1OALSkJGsRw) ://www.youtube.com/watch?v=1OALSkJGsRw （见第一条评论）

# asp.net-mvc - 无法在中等信任下编辑 Web.Config 中的 AppSetting？

> ID：12393704
> 
> 赞同：0
> 
> 时间：2012-09-12T17:49:50.643
> 
> 标签：asp.net-mvc, asp.net-mvc-3, web-config, medium-trust

我正在尝试在以中等信任度运行的 MVC3 应用程序中更新 web.config 中的 appSetting。我一尝试打电话就失败了？

```
var config = WebConfigurationManager.OpenWebConfiguration("~"); 
```

尝试了其他变体，但它们似乎都抛出了这个错误。

```
System.Security.Permissions.FileIOPermission, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089′ failed. 
```

任何人都知道如何在中等信任下做到这一点？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T18:23:28.670

简短的回答：在中等信任中是不可能的。

长答案：web.config 实际上从机器级 web.configs 继承了一堆设置。因此，当您通过打开给定的 .config 文件访问 Configuration 和 AppSettings 类时，它是只读的（因为这是系统允许您执行的操作），但在尝试写入时会抛出 FileIO 权限，因为这些类有在编写新设置（取决于设置在继承层次结构中设置的*位置*）之前，确定调用堆栈的某处他们有权写入正确的配置（文件夹、继承或机器级别）。注意 这本来是要在 .NET4 中修复的……我记得在 Microsoft Connect 站点上的某个地方看到过一个关于它的链接。

总结：使用 XML/XSLT 解析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T04:26:12.273

这是一种中等信任度的方法

[http://www.mvcforum.com/blog/2012/9/updating-appsettings-in-the-webconfig-in-medium-trust/](http://www.mvcforum.com/blog/2012/9/updating-appsettings-in-the-webconfig-in-medium-trust/)

# c# - 如何播放非 PCM 文件或即时将其转换为 PCM？

> ID：12393707
> 
> 赞同：4
> 
> 时间：2012-09-12T17:49:58.870
> 
> 标签：c#, delphi, audio, wav, pcm

以下代码适用于一些 wav 文件，但我得到的其他代码，“InvalidOperationException 未处理。Message=Sound API 仅支持播放 PCM 波形文件。”

```
var webClient = new WebClient();
webClient.DownloadFile(url, fileName);
var fileSound = new SoundPlayer(fileName);
fileSound.PlaySync(); 
```

有没有办法以编程方式检查 wav 文件是否“坏”（不是 PCM 波形文件），然后根据需要进行转换？

奇怪的是，代码在旧版 Delphi 应用程序中工作 - 所有 wav 文件都可以正常播放。这是德尔福代码：

```
filename := GetEnvironmentVariable('TEMP')+'\archieAndDingbat.wav';
URLDownloadToFile(nil, PChar(url), PChar(filename), 0, nil);
PlaySound(filename); 
```

我在资源管理器中查看了这两个文件的属性，发现确实存在差异。对于播放的文件，其音频格式为 PCM；不会玩的是CCITT u-Law。

所以......我需要一种方法在下载这些文件后即时从 CCITT u-Law 转换为 PCM（它们是从 url 下载然后在本地播放），或者可能是与 PlaySync() 不同的播放这些文件的方式...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T21:08:43.000

查看 mitov 的 audiolab 库。效果很好

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T07:51:43.453

那么，你想播放文件还是转换它？首要目标是什么？你玩它是为了证明你可以转换它，还是因为你不知道如何播放未转换的文件而转换它？ [http://www.catb.org/esr/faqs/smart-questions.html#goal](http://www.catb.org/esr/faqs/smart-questions.html#goal)

您的问题标题声称“转换”，但正文声称“播放”

这个答案是关于播放文件的。

* * *

您也可以尝试直接使用 FFDShow 编解码器而无需 DirectX 中间。 [http://en.wikipedia.org/wiki/Libavcodec](http://en.wikipedia.org/wiki/Libavcodec)和[http://libav.org/](http://libav.org/)和[http://ffmpeg.org/](http://ffmpeg.org/)（他们最近有分裂）

谷歌搜索“FFDShow dotnet”、“libav dotnet”、“ffmpeg dotnet”显示了一堆使用它的库，例如

*   [https://github.com/ermau/libav.net](https://github.com/ermau/libav.net)
*   [从 .Net 控制 ffdshow](https://stackoverflow.com/questions/245232)
*   [用于 C#/.NET 的实体 FFmpeg 包装器](https://stackoverflow.com/questions/2163036)

* * *

还有 BASS 库。它的目标是在游戏过程中播放声音，因此它可能具有较少的格式范围并且用于重新编码的内容不多。仍然有许多音乐播放器是建立在它之上的。有人说它是最简单易用的 API。所以值得考虑。[http://www.un4seen.com/](http://www.un4seen.com/)

* * *

[http://MediaInfo.sf.net](http://MediaInfo.sf.net) is a library (native win32/win64 DLL) allowing to check most multimedia formats content. I don't know if using tis C or C++ APis is easy from C# side.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T16:35:41.510

The way to do it is to use newkie's code at: [http://www.codeproject.com/Articles/175030/PlaySound-A-Better-Way-to-Play-Wav-Files-in-C?msg=4366037#xx4366037xx](http://www.codeproject.com/Articles/175030/PlaySound-A-Better-Way-to-Play-Wav-Files-in-C?msg=4366037#xx4366037xx)

In my case, at least, I had to change all of the lowercase x's to uppercase x's, though, to get it to work.

# java - 移除智能卡后会话断开客户端

> ID：12393711
> 
> 赞同：0
> 
> 时间：2012-09-12T17:50:10.230
> 
> 标签：java, ssl, session-state, smartcard

我在 apache、tomcat 和 IIS 7.5 上使用 cac 智能卡实现了强大的身份验证，但问题是当客户端从读卡器中移除智能卡时，他仍然可以完全访问服务器。那么如何在智能卡被移除后创建身份验证器管理器或会话断开客户端。

会话可以处于以下两种状态之一：已连接或已断开：

**已连接**：每个具有已连接状态的会话都会显示在客户端上。当用户移除智能卡或明确地将客户端切换到不同的会话时，会话会自动断开。

**Disconnected**：这些会话仍在服务器上执行，但未连接到客户端，因此不会显示。但是，用户可以重新连接到断开的会话，例如通过将包含适当令牌的智能卡插入客户端的读卡器中。这会将会话的状态更改为已连接，并使其显示在该客户端上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:16:00.393

我认为以前曾问过类似的问题，但我找不到链接（可能类似于“单击注销时刷新 ssl 会话”）。这里的关键是 SSL（重新）协商和 SSL 会话缓存。

您有两个选择：要么减少服务器的 SSL 会话缓存（减慢连接速度），从而在移除卡时尽快强制重新协商失败（Apache mod_ssl 中的默认会话缓存超时为 IIRC 300 秒）或实施浏览器插件（除非您有专用的客户端软件），它检测卡移除并因此使客户端的会话无效（或者甚至可能向服务器发送信号以刷新服务器端的会话）。

如果您谈论的是 Web 服务，那么您永远无法使用标准工具“完全控制”......

# scala - 关于斯卡拉的问题

> ID：12393713
> 
> 赞同：1
> 
> 时间：2012-09-12T17:50:15.620
> 
> 标签：scala

我目前正在学习scala。我正在为不耐烦的人阅读 Scala。

1.)

**警卫**

有区别吗？

```
for (i <- 0 to 10)if (i % 2 == 0) println(i)

for (i <- 0 to 10 if i % 2 == 0) println(i) 
```

2.)

我总是看到下面的符号`=>`，但他们从不解释它的作用。

有时我认为这是一个演员表，但它是完全不同的东西，我希望你能把事情弄清楚。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T17:59:09.570

1.）是的，有一个区别，第一个 if`if`闭包内的正常语句传递给 for-comprehension。第二个是真正的后卫。它实际上会`withFilter`在调用之前调用范围`foreach`。所以这两件事的翻译会是这样的：

```
0.to(10).foreach(i => if(i % 2 == 0) println(i) )
0.to(10).withFilter(x => x % 2 == 0).foreach(i => println(i)) 
```

要添加更多上下文，调用`withFilter`甚至只是`filter`代替使用普通的 if 语句有一些好处。在 for comprehension 中，您可以对 map、flatmap、filter、collect 等进行嵌套调用，因此如果添加警卫，您可以防止实际发生大量 af 调用。例如：

```
for {
  x <- 0 until 10
  y <- 10 until 20
} {
  if(x % 2 == 0) println(x*y)
} 
```

将调用实际关闭 100 次

```
for {
  x <- 0 until 10
  if x % 2 == 0
  y <- 10 until 20
} println(x*y) 
```

这只会调用它 50 次，而结果保持不变。

2.)

`=>`将函数/闭包的参数列表与主体分开。

这`case e: NumberFormatException => None`是偏函数的一部分。这里 将`=>`“论点”`e`与 body分开`None`。

在类似 in 的类型签名中，`someFunction(i: (A) => Int)`它意味着`i`属于 type `Function1[A,Int]`，读作“function from `A`to `Int`”。

# vb.net - 如何拥有一个看不见的启动表格？

> ID：12393715
> 
> 赞同：13
> 
> 时间：2012-09-12T17:50:19.810
> 
> 标签：vb.net, winforms, visual-studio-2010

我有一个应用程序，它是项目解决方案的一部分。在这个项目中，我希望它启动表单是不可见的，但在此表单可见的托盘中仍然有一个通知图标。

我知道添加`me.hide`到 中`form_load`是行不通的。我尝试添加一个实例化启动表单的模块，并将其设置为启动对象。虽然那也没用。我已经没有想法让这种形式不可见了。有人可以帮忙吗？我正在使用 VB.NET。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-12T18:18:08.610

将此粘贴到您的表单代码中：

```
Protected Overrides Sub SetVisibleCore(ByVal value As Boolean)
    If Not Me.IsHandleCreated Then
        Me.CreateHandle()
        value = False
    End If
    MyBase.SetVisibleCore(value)
End Sub 
```

工作方式是显示表单的第一个请求，由 Application 类完成，此代码将 Visible 属性覆盖回 False。此后表单将正常运行，您可以调用 Show() 使其可见，并调用 Close() 将其关闭，即使它从不可见。请注意，Load 事件在您显示它之前不会触发，因此请确保将事件处理程序中的任何代码（如果有）移动到构造函数或此覆盖。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-12T17:57:36.793

把它放在表单的 Shown 事件中

```
Me.Visible = False 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-09-14T16:05:56.333

最简单的方法是将表单的不透明度设置为 0%。当您希望它出现时，将其设置回 100%

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-06-28T17:25:59.453

这是我发现的另一种方法。

设置表单属性

```
ShowInTaskbar = False 
```

然后在表单的构造函数中添加

```
WindowState = FormWindowState.Minimized 
```

这很容易实现并且没有闪烁。在我的情况下，我还使用 NotifyIcon 从通知托盘访问程序并设置

```
WindowState = FormWindowState.Normal
Show()
BringToFront() 
```

在 Notify_MouseClick 事件处理程序中。

要在显示表单后再次隐藏表单，再次最小化并不能很好地完成这项工作。在我的情况下，我使用 Form_Closing 事件并隐藏表单。

```
Hide() 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-02-02T13:39:58.137

用于`Me.Opacity = 0`在加载事件时隐藏表单。

然后在 form.Shown 事件中使用下面的代码

```
Me.Hide()
Me.Opacity = 100 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-12T18:31:39.430

只是为了抛弃一种完全不同的方法，你有没有考虑过**不**使用 a 的重载`Application.Run()`（并自动显示）`Form`？如果您使用传入一个`ApplicationContext`（或更确切地说，您自己的子类`ApplicationContext`）的那个，那么您可以选择您的行为是什么。有关更多详细信息，请参见此处：

[http://msdn.microsoft.com/en-us/library/ms157901](http://msdn.microsoft.com/en-us/library/ms157901)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-11T12:24:40.453

尝试这个：

```
Sub New()
    MyBase.SetVisibleCore(False)
End Sub 
```

# forms - Spring portlet 表单：@ModelAttribute 未填充

> ID：12393717
> 
> 赞同：0
> 
> 时间：2012-09-12T17:50:30.197
> 
> 标签：forms, spring-mvc, jstl, liferay, portlet

我是 Spring 的初学者，我想知道为什么我的 ModelAttribute 没有填充（所有值都是空的）

我想创建一个允许我上传 csv 文件以及 CSV 文件类型的多部分。

我的代码是这样的：

**在 CSVUpload-portlet.xml 中：**

```
<bean class="org.springframework.web.portlet.mvc.annotation.DefaultAnnotationHandlerMapping"/>
<bean class="org.springframework.web.portlet.mvc.annotation.AnnotationMethodHandlerAdapter">

<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
    <property name="maxUploadSize" value="100000000"></property>
</bean>

<bean id="viewResolver"
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="viewClass"
        value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/WEB-INF/jsp/" />
    <property name="suffix" value=".jsp" />
</bean> 
```

**CSVUploadPortlet.java（控制器）**

```
*All imports 

@Controller("uploadCsvToDatabase")
@RequestMapping(value = "VIEW")
public class CSVUploadPortlet {
  private static final Logger log = Logger.getLogger(CSVUploadPortlet.class);
  private static IWBCSVUploadRemote csvupload;

  @RenderMapping
  public String viewCSVUploadBase(Model model, RenderRequest request) {
    try {

    } catch (Exception e) {
      e.printStackTrace();

      log.info("problem in retrieving the CSV Upload service" + e);
    }
    return "csvupload/csvupload_view";
  }

  @ModelAttribute("csvFileUploadVO")
  public CSVFileUploadVO getCommandObject() 
  {
    System.out.println("SpringFileController -> getCommandObject -> Building VO");
    return new CSVFileUploadVO();
  }

  @ActionMapping(params="action=uploadCsvToDatabase")
  public void uploadCsvToDatabase(
      @ModelAttribute("csvFileUploadVO") CSVFileUploadVO csvFileUploadVO, BindingResult result, ActionRequest request, ActionResponse response, SessionStatus sessionStatus){
    try{
      System.out.println("FileType:"+csvFileUploadVO.getFileType()); //This returns null
      System.out.println("CSVFile Size:"+csvFileUploadVO.getCsvFile().getSize());  //This returns a null-pointer exception
    } catch (Exception e) {
      log.info("Problem in retrieving the CSVUpload configuration list " + e);
      e.printStackTrace();
    }
  }
} 
```

**CSVFileUploadVO.java**

```
import org.springframework.web.multipart.commons.CommonsMultipartFile;

public class CSVFileUploadVO {
  private String fileType;
  private CommonsMultipartFile csvFile;
  private String message;

  public CSVFileUploadVO() {
  }

  public String getFileType() {
    return fileType;
  }

  public void setFileType(String fileType) {
    this.fileType = fileType;
  }

  public String getMessage() {
          return message;
  }

  public void setMessage(String message) {
          this.message = message;
  }

  public CommonsMultipartFile getCsvFile() {
          return csvFile;
  }

  public void setCsvFile(CommonsMultipartFile csvFile) {
          this.csvFile = csvFile;
  }
} 
```

**表单 JSP**

```
All taglibs imported...
<portlet:actionURL var="fileUploadURL">
    <portlet:param name="action" value="uploadCsvToDatabase" />
</portlet:actionURL>

<form:form method="post" action="${fileUploadURL}"
    commandName="csvFileUploadVO" enctype="multipart/form-data">
    <table>
        <tbody>
            <tr>
                <td><label>Department:</label></td>
                <td><form:select path="fileType">
                        <form:option value="BRMAdd" label="BRM Add" />
                        <form:option value="FOSAdmin" label="FOS Admin" />
                        <form:option value="FOSRM" label="FOS RM" />
                        <form:option value="FOSTeam" label="FOS Team" />
                        <form:option value="ITRelationships" label="IT Relationships" />
                        <form:option value="HRAttendance" label="HR Attendance" />
                        <form:option value="iCareCallReport" label="iCare Call Report" />
                    </form:select></td>
            </tr>
            <tr>
                <td><label>Specify your File:</label></td>
                <td><form:input path="csvFile" type="file" /></td>
            </tr>
            <tr>
            <tr>
                <td colspan="100%"><input type="submit" value="Submit" /></td>
            </tr>
            <tr>
                <td colspan="100%">${csvFileUploadVO.message}</td>
            </tr>
        </tbody>
    </table>
</form:form> 
```

我知道这似乎是在要求你帮我解决一个问题，但我已经坚持了 8 个小时，阅读了我可以用谷歌搜索的所有资源和 stackoverflow 网站。但尽管如此，我什么也找不到。

感谢您在这方面的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T16:15:41.657

您必须在 JSP 表单中定义 ModelAttribute，如下所示：

```
<form:form method="post" action="${fileUploadURL}"
modelAttribute="csvFileUploadVO" enctype="multipart/form-data"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T11:04:05.907

Liferay 6.0.5 和 Spring 3.2.2.RELEASE：

我尝试编辑弹簧类，但这个问题有更简单的解决方案。只需检查您的 CommonsPortletMultipartResolver 是否真的已被初始化。它在 spring.xml 中声明的事实并不意味着它已被加载。

如果未初始化，则请求的文件部分将永远不会转换为 CommonsMultipartFile，因为您的请求不会是 commons Multipart 请求。

CommonsPortletMultipartResolver 将被 org.springframework.web.portlet.DispatcherPortlet 生命周期调用，如果它被加载并且 spring 使用这个类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T16:56:54.410

您将需要查看[http://static.springsource.org/spring/docs/3.0.x/reference/mvc.html#mvc-multipart-resolver](http://static.springsource.org/spring/docs/3.0.x/reference/mvc.html#mvc-multipart-resolver)特别是`RequestMapping`参数所在的位置`MultipartFile`

```
@RequestMapping(value = "/form", method = RequestMethod.POST)
  public String handleFormUpload(@RequestParam("name") String name,
    @RequestParam("file") MultipartFile file) { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-19T12:06:59.813

您的多部分解析器必须具有 id`portletMultipartResolver`并且是类型`org.springframework.web.portlet.multipart.CommonsPortletMultipartResolver`

```
<bean id="portletMultipartResolver" class="org.springframework.web.portlet.multipart.CommonsPortletMultipartResolver">
</bean> 
```

# android - 如何编译AndEngine？1300 多个错误？

> ID：12393720
> 
> 赞同：1
> 
> 时间：2012-09-12T17:50:44.647
> 
> 标签：android, eclipse, andengine

我知道[这个问题](https://stackoverflow.com/questions/9479139/how-to-compile-the-andengine-sources)，但我有来源，我在编译它时遇到了很多问题。

我已经从 GLES2 分支下载了最新版本，提交 7b6e842498。我已将其导入 Eclipse。我希望我可以立即开始使用它，但是我得到了超过 1300 个错误，其中包含一些最愚蠢的废话。诸如“方法必须覆盖超类方法”之类的东西，超类具有相同的方法，或者枚举上的“无法解析或不是字段”但绝对是一个字段，我自己检查了它，智能感知实际上将该字段提供为选择。我尝试将其设置为 Android 2.1 和 4.0 版本，没有明显差异。我试过右键单击它并选择 Android 工具 > 修复项目属性，但什么也没做。我对此感到非常恼火，因为大约一个月前它还在工作，但从那以后我就失去了它。

我觉得我在某些配置文件中遗漏了一些非常简单但找不到的东西。我对 AndEngine 的 master 分支也有类似的问题，但我还是想要 GLES 2 版本。我正在运行 Windows 7 x64，并且安装了最新的 Eclipse、JDK、ADT 和 SDK，并且运行良好。我几天前刚刚格式化，所以它们都是全新的。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T19:02:09.640

当您使用与编写项目不同版本的 JDK 来编译项目时，就会发生这种情况。可以通过右键单击手动选择编译器来修复它，转到 Properties -> Java Compiler 并使用 1.5 或 1.6，具体取决于已在使用的版本。

# javascript - 全局对象是哪个类的对象？

> ID：12393721
> 
> 赞同：4
> 
> 时间：2012-09-12T17:50:46.447
> 
> 标签：javascript

我想知道 JavaScript 中的全局对象是什么以及这个对象属于哪个类。

以及如何`Infinity`，`NaN`以及`undefined`全局对象的一部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T18:35:23.860

变量作用域在 JavaScript 中由函数定义，函数可以嵌套在其他函数中。

```
function foo() {
    // new variable scope in here
    var a = "a";

    function bar() {
       // another nested variable scope
       var b = "b";
    }
    bar();
}
foo(); 
```

除了在程序运行时定义的默认“全局”变量范围之外。它是所有函数创建的范围都嵌套在其中的基本变量范围。

*所以呢？*

好吧，每个变量范围都有一个变量对象*（或更准确地说，是一个“绑定”对象）*。它是一个内部对象，您创建的所有局部变量都绑定到该对象。

此变量对象不可直接访问。您只能通过声明局部变量*（或函数参数或函数声明）*来为其添加属性。而且您只能通过变量名访问属性。

*再说一次，那又怎样？*

那么“全局”变量范围是唯一的。它通过在对象上自动定义一个引用回对象本身的属性来*公开这个内部变量对象。*在浏览器中，该属性被命名为`window`。

因为在对象上放置了一个属性来引用该对象，并且因为对象上的属性变成了变量，所以我们现在可以直接访问全局变量对象。

您可以通过观察该属性是对变量`window.window`的相等引用来测试这一点。`window`

```
alert(window.window === window); // true 
```

结果，我们可以为对象添加一个属性`window.foo = "bar";`，它显示为一个全局变量`alert(foo); // "bar"`。

请注意，公开此内部对象的唯一变量范围是全局范围。没有任何功能范围公开它。

另请注意，ECMAScript 规范不*要求*公开全局变量对象。由实施决定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T17:57:52.103

没有真正的类，但如果你的意思是全局对象的原型链，[规范并没有说太多](http://es5.github.com/#x15.1)：

> 全局对象的 [[Prototype]] 和 [[Class]] 内部属性的值是依赖于实现的。

*（[[Class]] 用于例如`window.toString()`，以便您可以得到`"[object global]"`。）*

您提到的三个值是全局对象的属性，例如：

```
Infinity === window.Infinity;  // true (in a browser the global object is window) 
```

您无法覆盖这些变量，因此您可以将它们视为文字。但实际上它们是全局对象的属性，因此您可以将它们称为变量（“全局变量”）。

# javascript - 为生成的 html中的标签设置默认的 onclick 行为

> ID：12393722
> 
> 赞同：1
> 
> 时间：2012-09-12T17:50:47.543
> 
> 标签：javascript, html, css, extjs, sencha-touch

所以我有一个我一直在构建的网络应用程序，我从服务器接收生成的 html 用于发布帖子，并将其放置在正文中。我的问题是：有没有办法为该消息中的标签设置默认的点击行为？我宁愿避免解析 html 并为每个标签设置行为。我可能只是在放屁，但最好只是问一下。这背后的目标是启用卡片开关以全屏显示图像。我只是不知道如何设置点击行为。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T17:59:35.750

大多数js库都有绑定服务功能...

在 extJS 中显然是

```
Ext.select('img').on('click', function); 
```

使用 css 选择器代替“img”，您可以制作具有特定类别、特定 ID 或任何您喜欢的图像。

[文档](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.EventManager-method-on)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T18:19:43.597

您可以通过多种方式执行此操作，但如果您要添加点击事件的图像存储在中心元素中，检索该元素（通过 document.getElementByTagName、byId、byClassName 等），那么您可以执行以下操作：

```
// Create a few variables to help us out
var index = 0,
    imgs = centerEle.getElementsByTagName("img"),
    eventType = "addEventListener", // Default event listener function
    eventPrefix = ""; // default prefix for event names

// IE event model support:
if (!document.hasOwnProperty("addEventListener")) {
    eventType = "attachEvent";
    eventPrefix = "on";
}

// Loop through images in the central element
for (var a = 0; a < imgs.length; a += 1) {
    /* if you wanted to exclude certain iamges:
    if (img[a].src !== "http://somesite.com/img.jpg" && 
        img[a].src !== "http://somesite.com/img2.jpg") { */

    img[a][eventType](eventPrefix + "click",function(evnt) {
        // 'this' is the img
        // evnt is the event that was raised
        // everything within this function will be called when the image is clicked
    });
    // }
} 
```

几点注意事项：

我没有采取简单的方法，而是使用事件侦听器而不是`onclick`这样，因为如果元素已经指定了一个`onclick`事件，那么任何以后指定`onclick`的属性都将覆盖前一个。

除了使用事件侦听器而不是事件属性之外，我还加入了 IE 支持。这就是我包含`eventType`and`eventPrefix`变量的原因

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T23:54:15.100

您可以使用 Ext JS 组件来执行此操作。任何数量的 Ext 组件都可以以这种方式工作，但只需要基本组件即可。

一旦服务器返回 html 数据，使用组件的更新方法。绑定到组件的 html 元素的 click 事件，然后在组件内单击的任何 html 元素都会触发 click 事件。在绑定到事件的函数中，事件对象将可用，并会告诉您点击了什么。

```
 Ext.onReady(function() {
        var htmlContainer,
            htmlFromServer;

        /*
         * you can create a component that will be 
         * be used to set the html into the page
         * while allowing it to be managed from Ext JS
         */
        htmlContainer = Ext.create('Ext.Component', {
            renderTo: Ext.getBody(),
            width: 400,
            height: 400
        });

        /*
         * this would be html from your service call
         * this is just a simplified example
         */
        htmlFromServer = '<div>Click this Div and this will be the event target. Click the image and that will be the value of the event target.</div><img src="http://www.sencha.com/img/apple-touch-icon.png" /><span>And this is some span-wrapped content.</span>';

        /* update the component with the html you want it to contain */
        htmlContainer.update(htmlFromServer);

        /* bind to the click event of the components html element */
        htmlContainer.getEl().on('click', function (event) { console.log('event object and html element that was clicked:', event, event.target)});

    });​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T17:56:43.463

您可以使用`document.getElementsByTagName("IMG")`或使用 jquery 选择器获取页面中的所有 IMG，并将默认单击处理程序与`onclick`每个 IMG 元素上的事件相关联。（有关如何使用 jquery 执行此操作的确切语法，您可以参考手册）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T18:55:06.597

我相信这就是 jQuery 的`.live()`( [< jq 1.7](http://api.jquery.com/live/) ) 和`.on()`( [>= jq 1.7](http://api.jquery.com/on/) ) 方法的用途。您可以使用它来将事件绑定到绑定时不存在的元素。

# django - 用户组和权限

> ID：12393726
> 
> 赞同：35
> 
> 时间：2012-09-12T17:51:03.070
> 
> 标签：django, django-permissions

我需要为用户组实现用户权限（非常类似于 facebook 组）。例如，每个组可以拥有具有以下权限的成员：can_post、can_delete、can_ban 等。当然，一个用户可以是多个组的成员，并且组可以拥有多个具有不同权限的不同用户。

我需要哪些型号才能实现此功能？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-09-12T17:59:49.617

Django 有一个内置的组系统。每当您有这样的问题时，我建议[您搜索 Django 文档](https://docs.djangoproject.com/search/?q=groups&release=1)，这些文档内容广泛、有用且写得很好。

只要您使用该`django.contrib.auth`应用程序，您就可以访问群组。然后，您可以为这些组分配权限。

```
from django.contrib.auth.models import User, Group, Permission
from django.contrib.contenttypes.models import ContentType

content_type = ContentType.objects.get(app_label='myapp', model='BlogPost')
permission = Permission.objects.create(codename='can_publish',
                                       name='Can Publish Posts',
                                       content_type=content_type)
user = User.objects.get(username='duke_nukem')
group = Group.objects.get(name='wizard')
group.permissions.add(permission)
user.groups.add(group) 
```

# c# - 如何在构建服务器上运行 specflow 测试？

> ID：12393727
> 
> 赞同：0
> 
> 时间：2012-09-12T17:51:12.913
> 
> 标签：c#, specflow

如何在构建服务器上使用 Nunit 2.6.1 运行 specflow 测试？

另外，您如何维护和组织这些测试以在构建服务器上成功运行多个自动化程序员编写单独的测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T05:51:55.760

我现在将尝试回答您问题的第二部分：

“你如何维护和组织这些测试以在构建服务器上成功运行多个自动化程序员编写单独的测试？”

这类测试很有可能变成无法维护的烂摊子，原因如下：

*   步骤用于创建上下文（用于场景测试）
*   可以以任何顺序从任何场景调用步骤

由于这两个简单的事实，很容易将此模型与过程/结构化编程进行比较。场景上下文和一些全局变量没有什么区别，步骤是一些可以随时随地调用的方法。

我的团队为避免步骤文件中的巨大混乱所做的就是让它们尽可能地愚蠢。一个步骤所做的一切都是解析和调用将完成真正有意义的工作并保存当前测试的上下文的服务。我们将这些服务称为“xxxxDriver”（其中 xxxx 是我们正在处理的域对象）。

一个愚蠢的例子：

```
[Given("a customer named (.*)")]
public void GivenACustomer(string customerName)
{
  _customerDriver.CreateCustomer(customerName);
}

[Given("an empty schedule for the customer (.*)")]
public void GivenEmptySchedule(string customerName)
{
  var customer = _customerDriver.GetCustomer(customerName);
  _scheduleDriver.CreateForCustomer(customer);
} 
```

'xxxxxDriver' 将包含所有存储库、网络网关、存根、模拟或与相关域对象相关的任何内容。另一个重要的细节是，如果您在步骤文件中注入这些驱动程序，specflow 将为每个场景创建一个实例，并在所有步骤文件中使用它。

这是我们发现的最好的方法，可以在维护和扩展步骤的方式上保持一定的一致性，而无需与一个大团队接触相同的代码库。另一个巨大的优势是它可以帮助我们找到类似的步骤来浏览驱动程序类中方法的用法。

specflow 代码库本身有一个明显的例子。（查看驱动程序文件夹） [https://github.com/techtalk/SpecFlow/tree/master/Tests/TechTalk.SpecFlow.Specs](https://github.com/techtalk/SpecFlow/tree/master/Tests/TechTalk.SpecFlow.Specs)

# java - 如何使用 Java 中的 PDFBOX 裁剪 pdf 中的每一页？

> ID：12393730
> 
> 赞同：2
> 
> 时间：2012-09-12T17:51:19.620
> 
> 标签：java, pdf, pdfbox

我想删除 PDF 中每个页面的底部，但不更改页面大小，在 PDFBOX 中的 java 中执行此操作的推荐方法是什么？如何从PDF中的每一页中删除页脚？

有没有办法使用 PDRectangle 来删除其中的所有文本/图像？

我尝试过的片段，使用带有 setCropBox 的矩形似乎会丢失页面大小，也许cropBox 不适合这个？

```
 PDRectangle rectangle = new PDRectangle();
            rectangle.setUpperRightY(mypage.findCropBox().getUpperRightY());
            rectangle.setLowerLeftY(50);
            rectangle.setUpperRightX(mypage.findCropBox().getUpperRightX());
            rectangle.setLowerLeftX(mypage.findCropBox().getLowerLeftX());                  
            mypage.setCropBox(rectangle);
            croppedDoc.addPage(mypage);
            croppedDoc.save(filename);              
            croppedDoc.close(); 
```

我能找到的 pdfbox 食谱示例中最接近的示例是关于如何删除整个页面，但这不是我想要的，我只想从页面中删除一些元素：http: [//pdfbox.apache.org /userguide/cookbook.html](http://pdfbox.apache.org/userguide/cookbook.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T00:53:33.117

我也是新手，但是看看[这个页面](http://www.prepressure.com/pdf/basics/page_boxes)，特别是TrimBox的描述。如果页面上没有 TrimBox，则默认为 CropBox，这将导致您看到的内容。

一般来说，不要指望 PDFBox 文档会告诉你很多关于 PDF 本身的信息——要很好地使用 PDFBox，我认为你需要去其他地方——AFAIK，主要是为了 PDF 规范。不过，我什至还没有浏览它！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T18:26:48.360

如果您想删除页面的一部分同时保持矩形区域可见，那么 CropBox 是您的最佳选择。如果您希望页面大小保持不变，则需要 MediaBox 保持不变。

从 PDF 规范：

> **CropBox - 矩形**（可选；可继承）以默认用户空间单位表示的矩形，定义默认用户空间的可见区域。当页面显示或打印时，其内容将被剪裁（裁剪）到这个矩形，然后以某种实现定义的方式施加到输出介质上（参见第 10.10.1 节，“页面边界”）。默认值：MediaBox 的值。
> 
> **MediaBox - 矩形**（必需；可继承）一个矩形（参见第 3.8.4 节，“矩形”），以默认用户空间单位表示，定义了要在其上显示或打印页面的物理介质的边界（参见第 3.8.4 节，“矩形”） 10.10.1，“页面边界”）。

A 已经看到（错误的）应用程序和库强制 CropBox 和 MediaBox 相同，请仔细检查这不是您的情况发生的情况。

还要考虑到 PDF 中的坐标原点 (0,0) 是左下角，有些库会为您翻译到左上角，有些则不会，您可能还想在您的库上仔细检查正在使用。

# jquery - 在响应式布局中排除 jQuery 脚本

> ID：12393735
> 
> 赞同：1
> 
> 时间：2012-09-12T17:51:43.647
> 
> 标签：jquery, html, css

我有一个“返回顶部”按钮的 jQuery 脚本，如下所示：

```
<script type="text/javascript">
$(document).ready(function(){

// hide #back-top first
$("#TopButton").hide();

// fade in #back-top
$(function () {
    $(window).scroll(function () {
        if ($(this).scrollTop() > 100) {
            $('#TopButton').fadeIn();
        } else {
            $('#TopButton').fadeOut();
        }
    });

    // scroll body to 0px on click
    $('#TopButton, #logo').click(function () {
        $('body,html').animate({
            scrollTop: 0
        }, 800);
        return false;
    });
});

});
</script> 
```

我有两个样式表，一个用于桌面，一个用于移动。当移动样式表被这样使用时，我试图隐藏返回顶部按钮：

```
#TopButton {
display: none;
} 
```

但它仍然出现。无论如何，在没有与 HTML 混淆的情况下，这是否存在？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:56:35.047

您当前的方法有问题，因为您的 javascript 代码`.fadeIn()`将覆盖您的`display: none;`

您需要设置一个不受 jquery 代码影响的 CSS 值。我假设您的#TopButton 绝对定位？如果是，请尝试设置一个属性，例如

```
left: -9999px; 
```

这将使它远离页面，并且当 jQuery 尝试淡入它时它根本不会受到影响。

希望对您有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T18:02:54.353

如果您不想更改 HTML 或 CSS，您的代码可能看起来像

```
if ($('#TopButton').css('display')!='none')
{
    // hide #back-top first
    $("#TopButton").hide();

    // fade in #back-top
    $(function () {
        $(window).scroll(function () {
            if ($(this).scrollTop() > 100) {
                $('#TopButton').fadeIn();
            } else {
                $('#TopButton').fadeOut();
            }
        });

        // scroll body to 0px on click
        $('#TopButton, #logo').click(function () {
            $('body,html').animate({
                scrollTop: 0
            }, 800);
            return false;
        });

    }); 
```

# uitableview - 使用 FBProfilePictureView 重用 UITableViewCells 时出现延迟

> ID：12393736
> 
> 赞同：7
> 
> 时间：2012-09-12T17:51:54.760
> 
> 标签：uitableview, facebook-ios-sdk

我有一个应用程序，我在 UITableView 中显示来自用户新闻提要的帖子。我使用 FBProfilePictureView 来显示发帖人的个人资料图片。它适用于下拉和显示个人资料图片，滚动时除外。在图片视图显示新用户的图片之前滚动时有一个非常明显的延迟，其中视图显示来自回收单元格的图片。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-25T23:43:59.200

如果在将 profileID 设置为新的 profileID 字符串之前将其设置为 nil，则 FBProfilePictureView 将在获取预期的 Facebook 个人资料图片时显示默认的 Facebook 个人资料图片。这样，您至少不会显示上一个单元格中的图像。

请注意，将 profileID 设置为空字符串 @"" 不会产生与显示默认 Facebook 个人资料图片相同的效果。

编辑：我刚刚更新到 FB SDK 3.7，并且不再显示默认的个人资料图片，如上所述。相反，当给出 nil 时，它根本不显示任何图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T08:08:02.393

我实现了一个改进的 facebook 个人资料图片视图，我在 UITableViewCells 中成功使用了该视图。我只是将它提交给[github](https://github.com/combinatorial/DBFBProfilePictureView)。如果您决定尝试一下，我很乐意得到反馈。

# r - 在 R 中键入联合符号

> ID：12393738
> 
> 赞同：3
> 
> 时间：2012-09-12T17:52:06.217
> 
> 标签：r, union

我正在尝试在 R 图中键入联合符号，如 A \cup B。你知道该怎么做吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T18:16:05.273

这应该有效：

```
plot(1:10, main = expression(A*union(B))) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-12T18:11:35.290

你需要使用`expression`. 这有点繁琐，但试试这个：

```
plot.new()
text(0.5,0.5,expression(paste("A",union(B)))) 
```

有关`?plotmath`更多详细信息，请参阅。

# c# - 如何使用 pt 或 px 正确更改 font-size:x%？

> ID：12393739
> 
> 赞同：0
> 
> 时间：2012-09-12T17:52:05.660
> 
> 标签：c#, .net, html, css

假设我们有一个标签`font-size:65%;`

我们如何用`pt`or改变它`px`？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T18:22:22.363

看起来这篇文章[在这里](https://stackoverflow.com/questions/6389914/pixels-vs-points-in-html/6390169#6390169)是一个很好的资源。

[这里](http://devblog.ailon.org/devblog/post/2008/03/07/Converting-HTML-font-sizes-to-pixels.aspx)的代码似乎接近你需要的，特别是：

```
switch (unitSize.Unit.Type)
        {
            case UnitType.Pixel:
                result = (int)Math.Round(unitSize.Unit.Value);
                break;
            case UnitType.Point:
                result = (int)Math.Round(unitSize.Unit.Value*1.33);
                break;
            case UnitType.Em:
                result = (int)Math.Round(unitSize.Unit.Value * 16);
                break;
            case UnitType.Percentage:
                result = (int)Math.Round(unitSize.Unit.Value * 16 / 100);
                break;
            default:
                // other types are not supported. just return the medium
                result = 16;
                break;
        } 
```

乍一看，似乎这样的东西更准确，但我并没有真正测试过它。

```
 public int PercentToPoint(int percent)
    {
        return (int)Math.Round(Convert.ToDouble(percent * 12 / 100));
    }

    public int PercentToPixel(int percent)
    {
        return (int)Math.Round(Convert.ToDouble(percent * 16 / 100));
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T21:12:08.333

你不能，就像你不能将米转换为秒一样。

`font-size: 65%`如果您知道某个单位元素中父元素的字体大小，那么您可以通过将父字体大小的数值乘以数字 0.65 来计算在同一单位中对应的计算值。但这只是意味着在特定情况下计算值，而不是将相对值 65% 转换为绝对值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T17:55:16.453

我怀疑这是 .net 中的一个预构建函数，它可以轻松地帮助您完成它而无需编写自己的转换器，但这个 jquery 转换器可能会帮助您：

[http://www.headcrash.us/blog/2011/10/jquery-plugin-to-convert-css-pixels-to-em-pt-percent-and-other-units/](http://www.headcrash.us/blog/2011/10/jquery-plugin-to-convert-css-pixels-to-em-pt-percent-and-other-units/)

为了帮助你更多，如果你知道宽度，你可以使用下面的公式来计算 px。

假设您有一个 800px 宽的容器 div，如果容器中有一个 384px 宽的 col div，则为 48%：

```
384 / 800 = 48% 
```

# php - 如何对 MySQL 的结果进行分组

> ID：12393744
> 
> 赞同：0
> 
> 时间：2012-09-12T17:52:24.867
> 
> 标签：php, mysql, grouping

MySQL是我的弱点。我的页面上有以下 MySQL 查询。变量 $this_groupMembers 和 $this_groupInvites 都是预先确定的字符串，格式为 '1,2,3' 等：

```
SELECT
    username
FROM
    chat_users
WHERE
    ID IN($this_groupMembers) OR
    ID IN($this_groupInvites) 
```

我需要做的是对结果进行分组，以便我可以与受邀成员分开访问现有成员。即根据 MySQL 查询的结果创建变量 $groupMembers_usernames 和 $groupInvites_usernames，而无需使用 PHP 剖析结果。

有没有办法让 MySQL 完成所有工作？

谢谢你，
乔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T18:17:29.890

您可以使用带有常量的 UNION 对返回的行进行分类：

```
SELECT
    username, 'member'
FROM
    chat_users
WHERE
    ID IN($this_groupMembers)
UNION
SELECT
    username, 'invitee'
FROM
    chat_users
WHERE
    ID IN($this_groupInvites) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T18:03:28.570

最简单的事情是有两个单独的查询，但是，如果 - 无论出于何种原因 - 你真的需要一个，你可以：

```
SELECT
    username, ID IN($this_groupMembers) AS member
FROM
    chat_users
WHERE
    ID IN($this_groupMembers) OR
    ID IN($this_groupInvites) 
```

如果成员为 1，如果被邀请，则为 0

# javascript - 使用 jQuery 以红色和黑色闪烁文本

> ID：12393747
> 
> 赞同：2
> 
> 时间：2012-09-12T17:52:29.450
> 
> 标签：javascript, jquery

我在某些部分使用javascript来修改页面上的信息，当信息发生变化时，我想将修改后的信息闪烁几次。

我已经尝试过了，但由于某种原因它不起作用。

```
$('.item_price').css("color" , "red").delay(500).css("color" , "black").delay(500).css("color" , "red").delay(500).css("color" , "black"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T17:56:04.377

[`delay()`](http://api.jquery.com/delay)是一个很奇怪的功能；在您使用它时使用它，它只会延迟添加到`fx`队列中的任务（并且`css()`不会排队到*任何*队列）。

要强制`css()`排队到`fx`队列，请使用该[`queue()`](http://api.jquery.com/queue)功能；

```
$('.item_price').queue(function (next) {
    $(this).css("color" , "red");
    next();
}).delay(500).queue(function (next) {
    $(this).css("color" , "black");
    next();
}).delay(500).queue(function (next) {
    $(this).css("color" , "red");
    next();
}).delay(500); 
```

...等等。一定要调用`next()`函数（传递给回调）来继续队列。

欲了解更多信息，我写了一篇博文，准确地解释了这一点，您可能会发现它对进一步阅读（以及 jQuery 文档）很有用：http: [//www.mattlunn.me.uk/blog/2012/06 /jquery-delay-not-working-for-you/](http://www.mattlunn.me.uk/blog/2012/06/jquery-delay-not-working-for-you/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T18:03:27.473

如果您已经在使用 jQuery UI，则可以使用`.animate`which 使用队列来执行此操作（并且`.delay`不需要，因为您可以将延迟指定为参数）。这可能具有实际动画颜色变化而不是仅仅闪烁的额外优势。

[http://jsfiddle.net/2PfL4/](http://jsfiddle.net/2PfL4/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T17:56:58.137

下面相当丑陋的代码将为您完成此操作。

```
var item_price = $('.item_price').;

item_price.css("color" , "red");
window.setTimeout(function(){
    item_price.css("color" , "black");
    window.setTimeout(function(){
        item_price.css("color" , "red"
            window.setTimeout(function(){
                item_price.css("color" , "black");
            }, 500););
    }, 500);
}, 500); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T19:19:00.740

我写了一个带有可配置参数的小闪烁插件..

**演示：http:** [//jsfiddle.net/9rU5A/3/](http://jsfiddle.net/9rU5A/3/)

```
 $.fn.blink = function(o) {
        var cfg = {
            bcount: 1,       /* blink count*/
            color: 'orange', /* blink color*/
            delay: 500       /* blink delay*/
        }
       var lc = {                
            timer: null,     /* internal  */
            tCount: 0,       /* internal  */
            oColor: 'black'  /* internal  */
        };

        $.extend(cfg, o);
        lc.oColor = $(this).css('color');

        var that = this;

        var blinker = function() {
            lc.tCount++;

            if (lc.tCount > (cfg.bcount * 2)) {
                clearInterval(lc.timer);
            }
            $(that).css('color', ((lc.tCount % 2) ? lc.oColor : cfg.color));
        };

        lc.timer = setInterval(blinker, cfg.delay);
    }; 
```

**呼叫者**

```
$('button').click(function() {
    $('#test').blink({
        bcount: 2,
        color: 'red',
        delay: 200
    });
}); 
```

# haskell - 如何配置 cabal 以对 32 位和 64 位软件包使用不同的文件夹？

> ID：12393750
> 
> 赞同：4
> 
> 时间：2012-09-12T17:53:04.897
> 
> 标签：haskell, cabal

我正在 Windows 上对 64 位 GHC 进行一些测试，同时将代码向前迁移到 GHC 7.6.1。这意味着我安装了 32 位和 64 位版本的 GHC 7.6.1，因此我可以区分 64 位特定问题和 7.6.1 的一般问题。

我的 cabal 配置文件 ( `$APPDATA/cabal/config`) 包含

```
libsubdir: $pkgid\$compiler 
```

这意味着我安装的 32 位和 64 位版本的软件包都以 zip-archive-0.1.1.8/ghc-7.6.1 结尾，并相互覆盖。

是否有任何变量，`$compiler`但可以区分 32 位和 64 位，或者我可以使用其他技术来使其保持包分开？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T13:12:47.247

您可以将`$arch`(and/or `$os`) 与[足够近的 Cabal 版本](https://github.com/haskell/cabal/commit/5c2082d210e1c8f796e89c4f0382fb46fb500115)一起使用，它将被一个字符串替换，例如`x86_64`（有关更多详细信息，请参阅 Cabal 文档部分[“简单构建系统中的路径变量”](http://www.haskell.org/cabal/users-guide/installing-packages.html#path-variables-in-the-simple-build-system)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T18:29:22.333

这可能不是正确的方法，但是在我启动到 32 位和 64 位操作系统的笔记本电脑上，我设置了一个 hack 来处理这个问题。基本上，我有两个目录，.cabal-i386 和 .cabal-x86_64，我通过符号链接来回切换。在我的 .zshrc 中：

```
CabalDir=$HOME/.cabal-`uname -m`
if [ ! -d $CabalDir]; then
    echo WARNING: no cabal directory yet for `uname -m`, creating one.
    mkdir -p $CabalDir/{bin,lib,logs,share}
fi
ln -sft $HOME/.cabal $CabalDir/{bin,lib,logs,share} 
```

也许您可以采用一些类似的策略，给自己一个简短的命令来切换一些符号链接（或任何 Windows 的符号链接模拟）。

# c# - Richtext 的第一行未显示.. 工具条控件

> ID：12393754
> 
> 赞同：0
> 
> 时间：2012-09-12T17:53:19.103
> 
> 标签：c#

这是我的应用程序的结果输出表单。我正在使用我加载结果文件的富文本框。结果以以前的形式计算并保存到文件中。此文件在结果表单中的 Richtextbox 控件中加载

```
private void frmResults_Load(object sender, EventArgs e)
        {

            this.Icon = Program.AppIcon;
            _mode = Mode.Load;
            richTabular.Left = 0;
            richTabular.Top = 0;
            richTabular.Size = this.ClientSize;
            this.Location = new Point(0, 0);
            this.Location = new Point(0, 0);
  FileInfo fil = new FileInfo(Program.caseFile + ".rpt");
            if (fil.Exists)
            {
                try
                {

                    if (fil.Length < 64000000)
                    {
                        richTabular.LoadFile(Program.caseFile + ".rpt", RichTextBoxStreamType.PlainText);
                        toolStripStatusLabel2.Text = Program.caseFile + ".rpt";
                        //  richTabular.LoadFile("RVEST.rpt", RichTextBoxStreamType.PlainText);
                    }
                }

    } 
```

这就是输出在屏幕上的显示方式。 ![在此处输入图像描述](../Images/0745ac24879b804fa395380815efd798.png) 现在可以保存、打印此输出......所有这些命令都可供用户使用。我为此使用了工具条控件。看起来 Menustrip-ToolStripMenuItem 覆盖了前一种情况下的第一行输出。这就是保存的文件的样子，应该是这样的。第一个（上一个）屏幕截图中缺少第一行。

![在此处输入图像描述](../Images/821d7c92bca3698d943449aa58f11634.png)

输出不同（见快照）。

第一个屏幕截图中缺少“RVT Software Alpha 1.00.25”。可能是 Menustrip- ToolStripMenuItem 控件留下了一个空行吗？

有什么建议么

# objective-c - 带有动画的iOS方法调用，完成时执行操作？

> ID：12393758
> 
> 赞同：2
> 
> 时间：2012-09-12T17:53:34.847
> 
> 标签：objective-c, ios, animation

在为 iOS 编程时，我经常发现自己面临以下情况：

```
- (void)someMethod
{
    [self performSomeAnimation];

    //below is an action I want to perform, but I want to perform it AFTER the animation
    [self someAction];
}

- (void)performSomeAnimation
{
    [UIView animateWithDuration:.5 animations:^
    {
        //some animation here
    }];
} 
```

面对这种情况，我通常只是复制/粘贴我的动画代码，以便我可以使用完成块处理程序，如下所示：

```
- (void)someMethod
{
    [self performSomeAnimation];

    //copy pasted animation... bleh
    [UIView animateWithDuration:.5 animations:^
    {
        //same animation here... code duplication, bad.
    }
    completion^(BOOL finished)
    {
        [self someAction];
    }];
}

- (void)performSomeAnimation
{
    [UIView animateWithDuration:.5 animations:^
    {
        //some animation here
    }];
} 
```

解决这个问题的正确方法是什么？我是否应该将一段代码传递给我的`-(void)performSomeAction`方法，如下所示，并在动画完成时执行该代码块？

```
- (void)someMethod
{
    block_t animationCompletionBlock^{
        [self someAction];
    };

    [self performSomeAnimation:animationCompletionBlock];
}

- (void)performSomeAnimation:(block_t)animationCompletionBlock
{
    [UIView animateWithDuration:.5 animations:^
    {
        //some animation here
    }
    completion^(BOOL finished)
    {
        animationCompletionBlock();
    }];
} 
```

这是解决这个问题的正确方法吗？我想我一直在避免它，因为我不熟悉块的使用（甚至不确定我是否正确地声明了该块），这似乎是一个简单问题的复杂解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T18:26:33.077

你也可以这样做：

```
- (void)performSomeAnimationWithCompletion:(void(^)(void))animationCompletionBlock
{
    [UIView animateWithDuration:.5 animations:^
    {
        //some animation here
    }
    completion^(BOOL finished)
    {
        animationCompletionBlock();
    }];
} 
```

而不是显式定义一个块并将其作为参数传递，您可以像这样直接调用它（例如，这就是块动画在 UIView 中的工作方式）：

```
- (void)someMethod
{
    [self performSomeAnimationWithCompletion:^{

        [self someAction];

    }];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T18:35:47.593

据我所知，您似乎已经有了答案，您只需要删除对 performSomeOperation 的第一个调用：

```
- (void)someMethod 
```

{

```
[UIView animateWithDuration:.5 animations:^
{
    //Your animation block here
}
completion: ^(BOOL finished)
{
    //Your completion block here
    [self someAction];
}]; 
```

}

# c# - 无法将数据更新到 SQL 表中

> ID：12393759
> 
> 赞同：3
> 
> 时间：2012-09-12T17:53:35.537
> 
> 标签：c#, asp.net, sql

我有一个问题。当我把这段代码

```
protected void Page_Load(object sender, EventArgs e)
{
    string email = Membership.GetUser(User.Identity.Name).Email;
    MembershipUser currentUser = Membership.GetUser();
    string UserId = currentUser.ProviderUserKey.ToString();

    **TextBox2.Text = email;
    TextBox3.Text = UserId;**
} 
```

我的数据不会保存到数据库中。

```
 {
    SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["Connection"].ConnectionString);
    SqlCommand cmd = new SqlCommand("UPDATE aspnet_Membership SET Email = @email WHERE UserId = @id1", conn);

    cmd.Connection = conn;
    cmd.CommandType = CommandType.Text;
    cmd.Parameters.AddWithValue("@email", TextBox2.Text);
    cmd.Parameters.AddWithValue("@id1", TextBox3.Text);
    try
    {
        conn.Open();
        cmd.ExecuteNonQuery();

    }
    catch (Exception ex)
    {
        throw ex;
    }
    finally
    {
        conn.Close();
    } 
```

但是当我删除

```
 **TextBox2.Text = email;
TextBox3.Text = UserId;** 
```

数据将使用上述代码保存到数据库中。有人能告诉我为什么吗？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T17:56:37.503

~~鉴于您从不执行命令，我无法解释。~~

添加

```
cmd.ExecuteNonQuery(); 
```

~~到您的点击方法结束~~

因为您在页面加载事件中设置值，所以当您的按钮在回发时，它们会覆盖控件中更改的值。用一个包裹你的页面加载代码

```
if (!Page.IsPostback)
{
    string email = Membership.GetUser(User.Identity.Name).Email; 
    MembershipUser currentUser = Membership.GetUser(); 
    string UserId = currentUser.ProviderUserKey.ToString(); 

    TextBox2.Text = email; 
    TextBox3.Text = UserId; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T17:57:41.397

您永远不会执行您的 SQL，所以我很惊讶您的数据库正在更新。

看一下[ExecuteNonQuery](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)方法。使用您当前的查询，您正在创建一个 SQLCommand，然后从不运行 SQL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T17:57:56.107

尝试以下

```
cmd.Connection = conn;
cmd.Connection.Open() 
```

在你分配它之后

```
cmd.ExecuteNonQuery(); 
```

# java - 什么是修补使用 XAMPP 部署的 web 应用程序的好方法？

> ID：12393761
> 
> 赞同：3
> 
> 时间：2012-09-12T17:53:45.330
> 
> 标签：java, installation, xampp, upgrade, patch

我有一个 Spring webapp。它使用 XAMPP 分发（通常部署在 Windows 上），以便非技术用户可以方便地安装它。现在，如果我想在 XAMPP 软件中单独修补 webapp。如果我可以减少补丁的下载占用并应用它会很方便。

我可以双击的可执行文件。关闭数据库。它会自动检查预配置 URL 处的更新，并在 XAMPP 安装中修补 web 应用程序，而不会影响 MySQL 数据库。

是否有一些开箱即用的解决方案，或者我需要构建一个定制的解决方案？

此外，一种在不删除任何数据的情况下将架构更改（如添加新列）应用到 MySQL 数据库的简洁方法也将很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T15:06:19.767

为了升级数据库，我们使用 Flyway，这是一个库，它允许您使用单个命令将数据库升级到应用程序的特定版本。它还跟踪您的数据库版本，并允许您在需要时执行降级/回滚。

[http://flywaydb.org](http://flywaydb.org)

# c# - 无法渲染 umbraco 自定义树

> ID：12393762
> 
> 赞同：0
> 
> 时间：2012-09-12T17:53:46.423
> 
> 标签：c#, umbraco

我正在 umbraco 4.8 中创建一个新部分，所以现在我想为该部分创建一个自定义树。这是该部分的寄存器

```
sortOrder | appAlias | appIcon   | appName   | appInitWithTreeAlias
9         |importer  |import.gif |  Importer | NULL 
```

这是该部分的树的寄存器

```
treeSilent = False
treeInitialize = True
treeSortOrder = 0
appAlias = importer
treeAlias = importer
treeTitle = Importer
treeIconClosed = legacy
treeIconOpen = legacy
treeHandlerAssembly = asm.ssu.importer // My DLL Name
treeHandlerType = site.com.clients.ssu.importer.loadImporter // Namespace.ClassName
actionn = NULL 
```

这是我的课

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using umbraco.cms.presentation.Trees;

namespace site.com.clients.ssu.importer
{
    public class loadImporter : BaseTree
    {
        public loadImporter(String application)
            : base(application)
        {

        }

        protected override void CreateRootNode(ref XmlTreeNode rootNode)
        {
            rootNode.Icon = FolderIcon;
            rootNode.OpenIcon = FolderIconOpen;
            rootNode.NodeType = TreeAlias;
            rootNode.NodeID = "init";
        }

        public override void RenderJS(ref System.Text.StringBuilder Javascript)
        {
            Javascript.Append(
            @"
                function openImporter(id)
                {
                    parent.right.document.location.href = '#' ;
                }    
            ");
        }

        public override void Render(ref XmlTree tree)
        {
            XmlTreeNode xNode = XmlTreeNode.Create(this);
            xNode.NodeID = "1";
            xNode.Text = "Import Site";
            xNode.Icon = "importer.gif";
            xNode.Action = "javascript:openImporter(1)";
            tree.Add(xNode);      
        }
    }
} 
```

如您所见，我只需要渲染它，但是当我单击该部分并触摸配置时，它应该只渲染一个孩子，但什么也不渲染，知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:51:59.107

当它什么都不渲染时，通常是因为错误被抛出但被抑制。这很可能是以下情况之一：

*   由于指定类型和程序集不匹配，它无法加载树
*   该类引发了一个被抑制的错误。

如果你检查数据库中的 umbracoLog 表，实际的错误应该记录在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:24:57.157

事情在 4.8 中发生了变化。您可能会发现这很有用：http: [//blog.mattbrailsford.com/2012/07/18/creating-custom-applications-and-trees-in-umbraco-4-8/](http://blog.mattbrailsford.com/2012/07/18/creating-custom-applications-and-trees-in-umbraco-4-8/)

从理论上讲，它应该是我所听到的向后兼容的。您的配置看起来正确。唯一的区别是我只输入了 treeHandlerType 的类名而不是完全限定名。

# wpf - 将焦点设置为 Listview 上的列表项

> ID：12393763
> 
> 赞同：0
> 
> 时间：2012-09-12T17:53:46.173
> 
> 标签：wpf, mvvm

我有一个 Listview，她的 ItemsSource 属性绑定到 ViewModel，当我将新项目添加到列表（ObservableCollection）时，我需要将焦点设置为新项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T18:13:40.327

将 ListView 的属性绑定[`SelectedItem`](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selecteditem.aspx)到 ViewModel 中的属性，当您将新项目添加到集合中时，将 ViewModel 中的属性设置为引用该新项目，然后绑定将处理其余部分。

# ruby-on-rails - Rails：在两次之间每小时循环一次

> ID：12393767
> 
> 赞同：1
> 
> 时间：2012-09-12T17:54:09.777
> 
> 标签：ruby-on-rails, loops, time

如果我定义以下内容：

```
 timetogoback = Time.zone.local(2012,8,01,0,0)

    timeupto = Time.zone.local(2012,9,12,12,0) 
```

作为两次，我如何创建一个在这些时间之间每小时迭代一次的循环？

我正在尝试运行一个一次性任务以从现有数据创建按小时汇总表。所以我想循环并将 created_at 设置为正确的时间，以便计算和保存的数据对于那个确切的时间是正确的。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T18:03:30.703

这是一个`while`递增的循环，`timetogoback`直到大于`timeupto`

```
while timeupto > timetogoback do
  timetogoback += 1.hour
  print "#{timetogoback}\n"
end 
```

# ajax - 如何在 Rails 3 中使用 ajax 创建和获取活动记录？

> ID：12393772
> 
> 赞同：1
> 
> 时间：2012-09-12T17:54:38.920
> 
> 标签：ajax, ruby-on-rails-3, activerecord

在 Rails 3.2 中，我试图弄清楚如何使用 ajax 创建 ActiveRecord 模型实例。基本上我想获取表单字段，使用 ajax 将它们发送到服务器，然后取回模型实例。令人惊讶的是，我在 stackoverflow 或其他地方找不到一个这样的例子。

有没有人有这方面的例子？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T18:07:52.360

您需要在控制器中添加一个操作，以响应两种格式（html 和 json）：

```
# app/controllers/bananas_controller.rb
class BananasController < ApplicationController
  def create
    @banana = Banana.new(params[:banana])

    respond_to do |format|
      if @banana.save
        format.html { redirect_to @banana, notice: 'Banana was successfully created.' }
        format.json { render json: @banana, status: :created, location: @banana }
      else
        format.html { render action: "new" }
        format.json { render json: @banana.errors, status: :unprocessable_entity }
      end
    end
  end
end 
```

您还需要添加路线：

```
# config/routes.rb
resources :bananas, :only => [:create] 
```

对于一个完整的例子，使用脚手架命令（可能在另一个应用程序上）来创建模型、视图和控制器：

```
rails generate scaffold banana 
```

# jquery - 检查 jQuery UI 选项卡是否已初始化（不检查类）

> ID：12393773
> 
> 赞同：20
> 
> 时间：2012-09-12T17:54:40.697
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs

使用 jQuery UI 选项卡 - 我编写了一个与 ui 选项卡集成的插件。如果`.tabs()`没有调用它，我已经安装了插件设置来启动 jQuery UI 选项卡，但这只是做一个简单的类检查：

```
 if(!$globalTabs.hasClass("ui-tabs")){
    $globalTabs.tabs();
 } 
```

但这是有问题的，因为通常为了避免 FOUC，开发人员将 UI 类添加到选项卡中，以便在 document.ready 之前获得更好的初始渲染。

我可以检查不同的类，例如`ui-widget1，但想知道是否有另一种/更好的方法？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-09-12T18:27:27.203

[您可以使用data()](http://api.jquery.com/data/)查询附加的小部件：

```
if (!$globalTabs.data("tabs")) {
    $globalTabs.tabs();
} 
```

此行为记录在jQuery UI 的[Development & Planning Wiki的](http://wiki.jqueryui.com/w/page/12137947/FrontPage)[Widget factory](http://wiki.jqueryui.com/w/page/12138135/Widget%20factory)页面中：

> *   插件实例可通过`$( "#something" ).data( "pluginname" )`
>     
>     
>     *   对包含 DOM 元素的 jQuery 对象的引用可用作实例的属性 as `this.element`，因此很容易在对象和元素之间来回切换。

**更新：**从 jQuery UI 1.9 开始，[小部件键成为小部件的完全限定名称，点替换为破折号](http://jqueryui.com/upgrade-guide/1.9/#changed-naming-convention-for-data-keys)，如下所示：

```
if (!$globalTabs.data("ui-tabs")) {
    $globalTabs.tabs();
} 
```

1.9 中仍然支持使用非限定名称，但已弃用，并且将在 1.10 中删除支持。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-09T12:42:37.900

当我尝试检查实例时，它会以某种方式导致一些错误。

我需要重新初始化选项卡，对我来说，try catch 成功了：

```
try {
    $('.mytabs').tabs('destroy');
} catch (exception) {} 
```

然后再次初始化：

```
$('.mytabs').tabs(); 
```

# perl - 如何在 Perl 5.8 中使用 Net::Telnet::Cisco 忽略警告？

> ID：12393779
> 
> 赞同：0
> 
> 时间：2012-09-12T17:54:58.127
> 
> 标签：perl, perl5.8

我安装了。Perl 5.8 中的 Net::telnet::cisco 模块并尝试执行以下操作：

```
my $session = Net::Telnet::Cisco->new(Host=>'192.168.1.1',Ignore_warnings=>1); 
```

但这似乎不起作用并给出以下错误：

```
bad named parameter "Ignore_warnings" given to Net::Telnet::Cisco::new() 
```

任何想法是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T18:18:13.623

把它分开：

```
my $session = Net::Telnet::Cisco->new(Host => $host);
$session->ignore_warnings(1); 
```

对我来说，这看起来像是 NTC 中的一个错误。我希望它应该在调用 SUPER::new 之前从列表中删除它的参数。

# paypal - 为存储在 PayPal 的按钮实现 PayPal 折扣代码的快速而肮脏的方法是什么？

> ID：12393782
> 
> 赞同：0
> 
> 时间：2012-09-12T17:55:11.787
> 
> 标签：paypal

我想在不使用购物车的情况下实施一个不太复杂的解决方案。

我在自己对这个问题的回答中详细介绍了一个解决方案，但如果有人能提出更好的方法，我会很高兴。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-17T18:52:27.013

我实际上最近不得不这样做。毫无疑问，我的解决方案是“肮脏”和“快速”。

基本上，我创建了 2 个几乎相同的单独 HTML 页面，除了一个具有打折的价格选项和一条消息，上面写着“成功的折扣代码！”

然后，您为这 2 个购买页面创建一个首页。此页面要求他们输入折扣代码。下面的示例代码：

```
 <form action="check-their-discount-code.php" method="POST" enctype="multipart/form-data">
  Enter discount code below: <input type="text" name="Discount-code" >
 <input type="submit" value="Submit">
 </form> 
```

然后是一个非常简单的 PHP 脚本：

```
<?php
     // Collect Information from form
 $discount_code = $_POST['Discount-code'];

     // See if the Discount Code is correct

 if($discount_code === "DISCOUNT_CODE") { 
     // Code is correct, redirect to discount page!! Yay!

 header("Location: ../page-with-discounted-prices.html");
} else {
     // Code is incorrect, redirect them to non-discounted page

 header("Location: ../page-with-regular-prices.html");
}
?> 
```

在我看来，这是最快、最肮脏的方法！它工作得很好。

*注意*使用这种方法，页面实际上并没有受到任何保护，因此如果您的客户发现了折扣页面的 URL，那么他们可以轻松地以折扣价购买该商品。但是，就我而言，这并没有发生。此外，用户无法查看 PHP 文件，因此您不会被任何人发现您的折扣代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T17:55:11.787

有一个包含以下内容的表格：

```
 <tr><td><input type="hidden" name="dcode" value="Discount Code">Discount Code</td></tr><tr><td>

<input type="text" name="dcode2" maxlength="200"></td></tr> 
```

并将表单操作重定向到 PHP 表单。

```
 <form name =form action="register2.php" class="emailform" method="post" style ="" onsubmit="return verify()" > 
```

在我的代码中，verify() 是一个 JS 函数，它返回表单是否有效，但您需要的最基本的代码很简单

```
<form name =form action="yourphp.php" method="post"> 
```

然后在您的 PHP 表单中执行以下操作。从 PayPal 粘贴按钮代码

它应该是这样的：

```
 <form action="https://www.paypal.com/cgi-bin/webscr" method="post" style="margin-left:30px;">
 <input type="hidden" name="discount_" value="medium"> 
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="some value">
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form> 
```

无论参数如何，都不要根据需要创建尽可能多的 PayPal 按钮。您有 2 个选项 - 根据需要设置按钮的价格 - 或设置额外变量：discount_amount、discount_amount2、discount_rate、discount_rate2 和 discount_num 根据 PayPal 上要求您输入额外变量的框中的要求。

现在代替线

```
<input type="hidden" name="hosted_button_id" value="some value"> 
```

有以下PHP

```
<?php
$dcode=$_POST["dcode2"];
if ($dcode === "discount code 1") {
echo "<input type=\"hidden\" name=\"hosted_button_id\" value=\"hosted button value 1\">\n";
} 
else if ($dcode === "discount code 2") {
echo "<input type=\"hidden\" name=\"hosted_button_id\" value=\"hosted button value 2\">\n";
} 
else {
echo "<input type=\"hidden\" name=\"hosted_button_id\" value=\"hosted button value 3\">\n";
}
?> 
```

现在这可能，不——绝对是一种糟糕的方法，但我可以在几分钟内破解；特别是因为 PayPal 让我可以轻松创建类似的按钮。

你会怎么做。

让我知道。

谢谢

# jquery - jQuery部分表单重置为初始值

> ID：12393786
> 
> 赞同：3
> 
> 时间：2012-09-12T17:55:20.417
> 
> 标签：jquery

我有一个表单，其中包含一堆输入 type="text" 框，这些框加载了数据库中的值。然后我可以更改这些值并 POST。这个表格有几个小节，我用框架集装箱了。我想做的是给用户一个按钮来撤消他们对特定成名集中的输入所做的任何更改。我知道我可以使用：

```
$('#myForm').get(0).reset(); 
```

重置整个表单。我希望我可以做类似的事情：

```
$('#myForm #myFrameset').get(0).reset(); 
```

或者

```
$('#myForm input').get(0).reset(); 
```

重置特定框架集中的输入框。但是，（对于这个菜鸟来说，这是一天中的宝贵一课）.reset() 只是一个表单选择器，所以当我 ('#myForm #myFrameset') 选择一个元素而不是一个表单时。

我不想从数据库中重新加载，因为在我看来我想要的数据就在那里。我只是不知道如何在不重置整个表单的情况下访问它。我将处理一个函数，我将值存储在输入占位符中，并将输入值设置为重置按钮单击时的占位符值。它应该可以工作，但我想知道在 jQuery 中有没有更简单的方法来做到这一点？一般来说，有没有更好的方法来做到这一点？

# ios - UIColor colorWithPatternImage 改变图像的颜色

> ID：12393788
> 
> 赞同：0
> 
> 时间：2012-09-12T17:55:24.207
> 
> 标签：ios, uicolor

我有以下代码。

```
//Create a view to place repeated arrow in.
UIView *rootView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 60)];

//Add Repeated Arrows to the top of the view using a color pattern.
UIImage *arrowImage = [UIImage imageNamed:@"arrow-down"];
UIColor *repeatedArrowColor = [UIColor colorWithPatternImage:arrowImage];
CGRect repeatedArrowFrame = CGRectMake(0, 0, 320.0, [arrowImage size].height);
UIView *repeatedArrowView = [[UIView alloc] initWithFrame:repeatedArrowFrame];
[repeatedArrowView setBackgroundColor:repeatedArrowColor];

[rootView addSubview:repeatedArrowView]; 
```

使用的图像是带有彩色箭头的 png #323232。我通过右键单击 .app 文件并选择显示包内容来验证这一点。

![用于生成图案的图像。](../Images/898cc81b851af7b352af49e1e194f67a.png)

然而，当图案出现在 iOS 模拟器屏幕上时，箭头的颜色是 #262626 或 #252525。

![iOS 模拟器中的错误颜色箭头](../Images/8376077a2907e4858d4c860df8128513.png)

有没有人遇到过这个问题？如果是这样，您是如何解决的，或者您是否解决了它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T22:52:17.537

总之每个人都有这些问题。如果您在预览中打开该图像并使用 pixie（开发工具），您肯定会看到与文件中不同的像素值。该值与您在模拟器中看到的不同吗？

您的 png 是否嵌入了颜色配置文件？如果您删除它，它可能会有所帮助（pngcrush 将这样做作为一个选项）。如果没有，或者不能修复它，那么您可能需要首先将图像加载为 CGImageRef 使用：

```
CGImageRef CGImageCreateWithPNGDataProvider (
   CGDataProviderRef source,
   const CGFloat decode[],
   bool shouldInterpolate,
   CGColorRenderingIntent intent
); 
```

并使用颜色意图（第一个）和作为最后一个选项的解码数组。

# php - 使用 javascript 存储变量的最安全方法

> ID：12393791
> 
> 赞同：0
> 
> 时间：2012-09-12T17:55:33.913
> 
> 标签：php, javascript, html, ajax, variables

我正在尝试找出最佳实践以及最安全的方法，以便为我正在开发的 Web 应用程序使用 javascript 存储变量。

我有使用 php、$_GET 和 mod_rewrite 生成的页面。它们是从通过 url 给出的 id 生成的。例如：[http](http://example.com/1125/) ://example.com/1125/ （因为 mod_rewrite 实际发生的是：[http](http://example.com?id=1125) ://example.com?id=1125 ）。php 采用 $_GET['id'] 并根据给定的 id 等从数据库中检索信息......你明白了要点。

我遇到的问题是，我在该页面上有一个表单，用户可以在其中发布问题，该问题是通过 ajax 发送的。而且我不知道存储页面 id ($_GET['id']) 的最佳方式。

现在，我将 id 存储在表单中的隐藏输入中（例如：“ />”）。当表单提交到服务器并且 php 查看 $_POST 时，它包含 ["id"] = > 1125\. 当通过页面中的表单提交问题时，这就是我发送页面 id 的方式。

我认为这不安全的原因是，任何人都可以编辑 html（例如通过 Chrome 的检查元素）并将隐藏输入的 (id) 值更改为任何其他 id。

所以我的问题是，我可以用 javascript 存储该 id 的最安全方法是什么，所以当提交该问题表单时，它可以安全地将正确​​的 id 发送到服务器？或者通过最佳实践方法提出的任何其他建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T18:09:23.190

您只需要`id`在接收ajax的php页面中验证，如果`id`有效并且用户有权使用它，那么没关系，他是否通过chrome或其他方式更改它并不重要，但你需要进行验证，因为如果他为`id`属于其他用户的用户更改了它，那么您必须检测到它并在这种情况下出错。

这只是根据应用程序中的权限验证您的输入的问题。

# ajax - MathJax 在我的后期编辑页面中呈现奇怪的 AJAX 预览后功能

> ID：12393794
> 
> 赞同：0
> 
> 时间：2012-09-12T17:55:46.060
> 
> 标签：ajax, math, mathjax

我有类似 StackOverflow 的“提问”页面的内容，其中一个文本框用于放置源标记代码，而在下面，另一个文本框（不可编辑）用于呈现正在输入的帖子/问题的预览.

考虑到我的应用程序不仅让我可以为帖子内容使用简单的小型标记语言；它还为我提供了使用[MathJax](http://www.mathjax.org/)在其中输入数学的可能性。但是语法是简单的 Latex 语法（不过这不是问题，所以不要让这件事太打扰你）。

### 问题

问题如下。该页面与 StackOverflow 的页面略有不同，因为它使用带有 AJAX 的 ASP.NET 来调用在 HTML 中执行标记语言翻译的服务器端过程（这是我的选择，我有代码服务器端，那里在标记翻译代码的 javascript 中没有实现）。

当异步脚本运行时（每 10 秒），不可编辑的文本框会重新填充翻译后的标记。Latex 代码也放在那里（不对其执行翻译），并且每次 AJAX 过程返回时都会调用 MathJax 脚本（因此，latex 代码将在标记语言之后呈现，这种 Latex 呈现发生在客户端）。

问题是，有时渲染的数学很奇怪，尤其是考虑到方程编号。数字确实会增加每个新的 AJAX 调用。我想必须有一种方法可以完全重置页面中实例化的 MathJax 对象的状态或其他任何东西......有没有办法重置 MathJax？

我认为这里的 AJAX 是问题...谢谢您的帮助，希望我很清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T22:47:07.000

如果你加载了一个包含 AMSmath 扩展的配置文件，你可以使用

```
MathJax.InputJax.TeX.resetEquationNumbers() 
```

重置方程式编号和用于 和 的`\ref`标签`\eqref`。如果要从特定的方程式编号开始编号，请使用

```
MathJax.InputJax.TeX.resetEquationNumbers(n) 
```

其中`n`是起始数字减 1（默认为 0）。

# stored-procedures - Sql server 突然停止识别我的新列

> ID：12393816
> 
> 赞同：2
> 
> 时间：2012-09-12T17:57:08.370
> 
> 标签：stored-procedures, intellisense, sql-server-2012

我正在做一个`stored procedure`in `SQL SERVER 2012`。

突然，我的存储过程无法编译。

它`invalid column name`在我尝试添加的每一列上都有说明。

但是我可以运行查询并且列在那里

```
SELECT FirstName FROM dbo.Contacts 
```

另外，我没有更改代码。

*   我试图重新启动

*   我重新创建了列

*   我刷新了`intelliSense`缓存

没运气...

这是代码的一部分

```
DECLARE curContact Cursor

FOR SELECT dbo.Contacts.ContactID, dbo.Contacts.FirstName, dbo.Contacts.MiddleName, dbo.Contacts.LastName, dbo.Contacts.ContactName FROM dbo.Contacts
FOR UPDATE OF  dbo.Contacts.FirstName, dbo.Contacts.MiddleName, dbo.Contacts.LastName
OPEN curContact 
```

这是表结构

```
CREATE TABLE [dbo].[Contacts](
    [ContactID] [int] NOT NULL,
    [MillID] [int] NULL,
    [ClientID] [int] NULL,
    [FirstName] [nvarchar](64) NULL,
    [MiddleName] [nvarchar](64) NULL,
    [LastName] [nvarchar](64) NULL,
    [Gender] [bit] NULL,
    [ContactName] [nvarchar](50) NULL,
    [ContactTitle] [nvarchar](50) NULL,
    [ContactPhoneNo] [nvarchar](50) NULL,
    [ContactPhoneExt] [nvarchar](50) NULL,
    [ContactFaxNo] [nvarchar](50) NULL,
    [ContactEmail] [nvarchar](50) NULL,
    [Comment] [nvarchar](max) NULL,
    [CreatedBy] [nvarchar](50) NULL,
    [CreatedDate] [datetime] NULL,
    [ModifiedBy] [nvarchar](50) NULL,
    [ModifiedDate] [datetime] NULL,
    [ContactCellNo] [nvarchar](50) NULL,
    [ContactPageNo] [nvarchar](50) NULL,
    [ContactHomeNo] [nvarchar](50) NULL,
    [ContactOtherNo] [nvarchar](50) NULL,
    [Language] [nvarchar](15) NULL,
    [CalendarQuantityEnglish] [smallint] NULL,
    [CalendarQuantityFrench] [smallint] NULL,
    [CalendarKeepBy] [nvarchar](50) NULL,
    [CalendarComment] [nvarchar](250) NULL,
    [OtherQuantityEnglish] [smallint] NULL,
    [OtherQuantityFrench] [smallint] NULL,
    [OtherKeepBy] [nvarchar](50) NULL,
    [OtherComment] [nvarchar](250) NULL,
    [Validated] [date] NULL,
    [ValidedByWho] [nvarchar](64) NULL
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY] 
```

任何的想法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-05-09T18:46:42.007

您需要刷新 SSMS Intellisense 缓存（CTRL + SHIFT + R 或编辑 -> Intellisense -> 刷新本地缓存）。

# php - Chrome 加载旧版本的 Javascript 文件

> ID：12393819
> 
> 赞同：5
> 
> 时间：2012-09-12T17:57:22.940
> 
> 标签：php, javascript, apache, google-chrome

我正在使用 CodeIgniter 构建一个 Web 应用程序。

我遇到的问题是 chrome 正在加载我的 javascript 文件 main.js 的旧版本

我的代码：

```
$(document).load(function(){

/******************************************
*                                         *
*              AJAX FUNCTIONS             *
*                                         *
******************************************/    

function deactivate_dept_member(user_id, token_name, token_hash, callback)
{
    $.post(
        site_url('/ajax/deactivate_dept_member'),
        {
            'user_id':usr_id,
            token_name:token_hash
        },

        function(result){
            var response = jQuery.parseJSON(result);
            callback(response);
        }
    );
}

function activate_dept_member(usr_id, token_name, token_hash, callback)
{
    $.post(
        site_url('/ajax/activate_dept_member'),
        {
            'user_id':usr_id,
            token_name:token_hash
        },

        function(result){
            var response = jQuery.parseJSON(result);
            callback(response);
        }
    );
}

function get_dept_users_for_session(dept_id, token_name, token_hash, callback)
{
    $.post(
        site_url('ajax/get_dept_users_for_session'),
        {
            "dept_id":dept_id,
            token_name:token_hash

        },

        function(result){
            var response = jQuery.parseJSON(result);
            callback(response);
        }
    );

}

function invite_dept_user(email_address, first_name, last_name, admin, token_name, token_hash, callback)
{
    $.post(
        site_url('ajax/invite_dept_user'),
        {
            "email_address":email_address,
            "first_name":first_name,
            "last_name":last_name,
            "admin":admin,
            token_name:token_hash
        },
        function(result){
            var response = jQuery.parseJSON(result);
            callback(response);
        }
    );
}

function get_department_members(dept_id, token_name, token_hash, callback)
{
    $.post(
        site_url('ajax/det_department_members'),
        {
            "dept_id":dept_id,
            token_name:token_hash
        },
        function(result){
            var response = jQuery.parseJSON(result);
            callback(response);
        }
    );
}

/******************************************
*                                         *
*              UTILITY FUNCTIONS          *
*                                         *
******************************************/
function site_url(add_on)
{
    return 'http://localhost:8080/app/index.php'+add_on;
}

function getUserTypeString(user_status)
{
    switch(user_status)
    {
        case "1":
            return "Invited";
        case "2":
            return "Active";
        case "3":
            return "Inactive";
        default:
            return "";
    }
}

function isDepartmentAdmin(user_role)
{
    if(user_role == 2){
        return true;
    }
    return false;
}

function get_error_message(error_code)
{
    switch(error_code)
    {
        case "20130":
            return 'The username already exists';
        default:
            return 'A general error occured';
    }
}

}) 
```

Chrome 所说的是我的来源：

```
/******************************************
*                                         *
*              AJAX FUNCTIONS             *
*                                         *
******************************************/    

function deactivate_dept_member(user_id, token_name, token_hash, callback)
{
    $.post(
        site_url('/ajax/deactivate_dept_member'),
        {
            'user_id':usr_id,
            token_name:token_hash
        },

        function(result){
            var response = jQuery.parseJSON(result);
            callback(response);
        }
    );
}

function activate_dept_member(usr_id, token_name, token_hash, callback)
{
    $.post(
        site_url('/ajax/activate_dept_member'),
        {
            'user_id':usr_id,
            token_name:token_hash
        },

        function(result){
            var response = jQuery.parseJSON(result);
            callback(response);
        }
    );
}

function get_dept_users_for_session(dept_id, token_name, token_hash, callback)
{
    $.post(
        site_url('ajax/get_dept_users_for_session'),
        {
            "dept_id":dept_id,
            token_name:token_hash

        },

        function(result){
            var response = jQuery.parseJSON(result);
            callback(response);
        }
    );

}

public function invite_dept_user(email_address, first_name, last_name, admin, token_name, token_hash, callback)
{
    $.post(
        site_url('ajax/invite_dept_user'),
        {
            "email_address":email_address,
            "first_name":first_name,
            "last_name":last_name,
            "admin":admin,
            token_name:token_hash
        },
        function(result){
            var response = jQuery.parseJSON(result);
            callback(response);
        }
    );
}

public function get_department_members(dept_id, token_name, token_hash, callback)
{
    $.post(
        site_url('ajax/det_department_members'),
        {
            "dept_id":dept_id,
            token_name:token_hash
        },
        function(result){
            var response = jQuery.parseJSON(result);
            callback(response);
        }
    );
}

/******************************************
*                                         *
*              UTILITY FUNCTIONS          *
*                                         *
******************************************/
function site_url(add_on)
{
    return 'http://localhost:8080/app/index.php'+add_on;
}

function getUserTypeString(user_status)
{
    switch(user_status)
    {
        case "1":
            return "Invited";
        case "2":
            return "Active";
        case "3":
            return "Inactive";
        default:
            return "";
    }
}

function isDepartmentAdmin(user_role)
{
    if(user_role == 2){
        return true;
    }
    return false;
}

function get_error_message(error_code)
{
    switch(error_code)
    {
        case "20130":
            return 'The username already exists';
        default:
            return 'A general error occured';
    }
}

 ����������������� 
```

我为尝试解决问题所做的事情

*   使用 Chrome 开发者工具禁用缓存
*   使用 LiveReload 扩展程序/应用程序
*   重新启动 Apache
*   验证 Vagrant 的共享是否正常工作（该文件在我运行的虚拟 centos 实例中与我的 Mac 上的文件相同）
*   试图让 chrome 加载不同版本的文件（在文件的 url 末尾添加 ?2：localhost:8080/app/assets/js/main.js?2）

其他注意事项：

*   这也发生在 Firefox 和 Safari 中，因此问题可能出在 Apache 上，但我无法测试这个理论，因为我无法获得 php 的 oci8 扩展来为任何其他操作系统编译。

编辑：

我尝试过的更多事情

*   重命名文件（将工作一点，但问题再次开始发生。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T19:57:27.657

如果它在重命名时起作用，然后*停止工作*，那么*它就不能是*任何类型的缓存（可能是“严重损坏的缓存”除外），也不能是文件修改的东西（例如 BOM、流氓 CR 等）。

但我猜该文件可以工作，然后*它停止工作*不是“一段时间后”而是“在你再次保存它之后，这似乎是一个非常微小且不相关的变化”。

如果是这种情况，您可能正在处理流氓 CR 或奇怪的 EOF 处理：尝试使用不同的编辑器（理想情况下为十六进制编辑器）检查磁盘上的文件，和/或使用您拥有的*最简单*的文本编辑器打开它。

如果你有一个裸 CR 作为文件的最后一个字符，那么每次你再次读/写文件时，一些编辑器和平台会添加两个“奇怪的字符”（实际上是另一个 LF 和另一个流氓 CR）。那些相同的编辑器*不会*向您显示这些字符，因此您将无法从这些编辑器中删除它们。

**更新**：另一个明显的可能性是您有一个未正确检测到的“隐藏”UTF-8 字符（或其片段）。然后发生了非常类似的事情：

[由于意外的编码更改，Visual Studio 2008 项目文件无法加载](https://stackoverflow.com/questions/2498959/visual-studio-2008-project-file-does-not-load-because-of-an-unexpected-encoding)

...并注意您得到的奇怪字符*正是**编码错误*的 UTF8 表示，这也可以解释为什么 Chrome 检测到*输入的意外结束*。

尝试从最后几行代码到文件末尾盲目选择并*删除*选择，然后将其写回：

```
 return 'A general error occurred';
        }
    }
})
/* END OF FILE */ 
```

并保存。这*应该*可以解决问题。如果出现任何奇怪的字符，请从“发生”开始使用十六进制编辑器进行检查。

# shopify - 应用代理的 411 Length required 错误

> ID：12393820
> 
> 赞同：0
> 
> 时间：2012-09-12T17:57:26.887
> 
> 标签：shopify

我为部署在普通共享托管服务器（不是 Heroku 或类似服务器）上的应用设置了应用代理。在我将内容类型设置为应用程序/液体之前，它就像一个魅力（就像我的其他应用程序一样）。

一旦我这样做了，我就会得到一个 411 Length Required 错误，这是由我的服务器生成的（我的猜测）。我试图通过将内容长度设置为 0 来解决它。它工作了一段时间，但后来停止了。我尝试了其他值，它取决于它的心情。有趣的是，有时输出会在内容长度处被截断，有时我会得到整个输出（简单的页面刷新可以给出不同的输出）。此外，有时它根本不起作用，shopify 会抛出“我们遇到技术困难”错误。

总而言之，内容长度根本不可靠。

现在我不确定导致 411 错误的确切原因以及我能做些什么。以及为什么仅在内容类型为液体时才抛出它。此外，内容长度不会导致一致的输出（无输出/可预测的输出/截断的输出/shopify 错误）。

有谁知道怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:35:58.583

也许您的响应正在使用[分块传输编码](http://en.wikipedia.org/wiki/Chunked_transfer_encoding)。我不认为 nginx 默认支持这个，所以在这种情况下会返回 411 错误，因为分块编码不使用 Content-Length 标头。

如果您确实想使用分块响应，那么[http://wiki.nginx.org/HttpChunkinModule](http://wiki.nginx.org/HttpChunkinModule)模块应该会添加对此的支持。否则，请在您的应用中禁用分块编码，并确保 Content-Length 标头与响应正文的长度一致。

# jquery - JQuery UI 选择菜单没有样式

> ID：12393821
> 
> 赞同：2
> 
> 时间：2012-09-12T17:57:31.410
> 
> 标签：jquery, ruby-on-rails, jquery-ui, select-menu

有点愚蠢的问题，但我已经下载了 JqueryUI 选择菜单小部件，即使 Firebug 显示正在加载的相关 CSS 和 JavaScript 文件，它也无法正常工作。

**页面脚本**：

```
<script type="text/javascript">
   $('#brand_color').selectmenu({style:'popup'});
</script> 
```

**生成的表单标记**：

```
<label for="brand_color">Color</label><br />
<select id="brand_color" name="brand[color]">
   <option value="red">red</option>
   <option value="green">green</option>
   <option value="blue">blue</option>
   <option value="black">black</option>
</select><br /> 
```

**Rails 表单代码**：

```
<%= f.label :color %><br />
<%= f.select(:color, Brand::COLORS) %><br /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T18:12:35.227

嗨，这肯定与包含所有必需的脚本有关。[从这个演示](http://view.jqueryui.com/selectmenu/demos/selectmenu/default.html)中准确地说出你需要什么有点困难，但我确保包含所有相同的脚本并做了一个例子：http: [//jsfiddle.net/8WWMT/7/](http://jsfiddle.net/8WWMT/7/)

以下是所有脚本：

```
<link rel="stylesheet" href="http://view.jqueryui.com/selectmenu/themes/base/jquery.ui.all.css">
<script src="http://view.jqueryui.com/selectmenu/jquery-1.8.0.js"></script>
<script src="http://view.jqueryui.com/selectmenu/ui/jquery.ui.core.js"></script>
<script src="http://view.jqueryui.com/selectmenu/ui/jquery.ui.widget.js"></script>
<script src="http://view.jqueryui.com/selectmenu/ui/jquery.ui.position.js"></script>
<script src="http://view.jqueryui.com/selectmenu/ui/jquery.ui.menu.js"></script>
<script src="http://view.jqueryui.com/selectmenu/ui/jquery.ui.selectmenu.js"></script>
<link rel="stylesheet" href="http://view.jqueryui.com/selectmenu/demos/demos.css">​ 
```

此外，您必须确保在呈现 HTML 元素后调用您的 JS。您可以通过将`<script>`标签放置在 HTML 元素之后来执行此操作，[例如](http://jsfiddle.net/8WWMT/9/). 或者通过将 JS 包含在 中`$(function(){});`，如下所示：

```
<script type="text/javascript">
    $(function(){
        $('#brand_color').selectmenu({style:'popup'});
    });
</script> 
```

[http://jsfiddle.net/8WWMT/10/](http://jsfiddle.net/8WWMT/10/)

如果您将脚本部分放在 HTML 元素上方而不使用`$(function(){});`（就绪功能），请注意样式如何不起作用：http: [//jsfiddle.net/8WWMT/11/](http://jsfiddle.net/8WWMT/11/)

# c# - C# 正则表达式匹配特殊字符

> ID：12393826
> 
> 赞同：1
> 
> 时间：2012-09-12T17:57:41.880
> 
> 标签：c#, regex

我知道这个东西已经被谈论了很多，但我在尝试匹配以下内容时遇到了问题......

示例输入：“测试测试 310-315”

我需要一个正则表达式，它识别一个数字后跟一个破折号，并返回 310。不过，我如何在正则表达式中包含破折号。所以最终的匹配结果将是：“310”。

非常感谢 - kcross

编辑：另外，除了前面的破折号，我将如何做同样的事情，*但*还要考虑到破折号后面的数字可能是负数......当我立即写下这个问题时，我没有想到这个。例如：“test test 310--315”返回 -315，“test 310-315”返回 315。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T18:13:14.073

```
Regex regex = new Regex(@"\d+(?=\-)"); 
```

`\d+`- 寻找一位或多位数字

`(?=\-)`- 确保它后面跟着一个破折号

这`@`只是消除了转义反斜杠以使编译器满意的需要。

此外，您可能想要这个：

```
\d+(?=\-\d+) 
```

这将检查一个或多个数字，后跟一个破折号，后跟一个或多个数字，但只匹配第一组。

* * *

**作为对您的评论的回应**，这里有一个正则表达式，它将检查 a 之后的数字`-`，同时考虑潜在的负 (-) 数字：

```
Regex regex = new Regex(@"(?<=\-)\-?\d+"); 
```

`(?<=\-)`- 否定的lookbehind，它将检查并确保前面有`-`

`\-?`- 检查零或一个破折号

`\d+`- 一位或多位数字

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T18:00:22.067

`(?'number'\d+)-`将工作（无需逃避）。在此示例中，包含单个数字的组是命名组`'number'`。如果您想将两个组与可选符号匹配，请尝试：

```
@"(?'first'-?\d+)-(?'second'-?\d+)" 
```

[看到它在这里工作](http://refiddle.com/40t)。只是为了描述，没有什么复杂的，只是`-?`用来匹配一个可选的`-`并`\d+`匹配一个或多个数字。文字`-`匹配本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T17:59:44.437

这是我使用的一些文档：

[http://www.mikesdotnetting.com/Article/46/CSharp-Regular-Expressions-Cheat-Sheet](http://www.mikesdotnetting.com/Article/46/CSharp-Regular-Expressions-Cheat-Sheet)

在该页面的评论部分，它建议使用`'\-'`

确保您逃脱了您的转义字符`\`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T18:00:11.623

您可以`-`使用`backslash (\)`. 由于反斜杠在 C# 文字中具有特殊含义，可以转义引号或成为某些字符的一部分，因此您需要使用另一个`backslash(\)`. 所以本质上是这样`\d+\\-`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T18:05:40.457

`\b\d*(?=\-)` 你会想要向前看破折号

\b = 从单词边界开始 \d = 匹配任何十进制数字 * = 根据需要多次匹配前一个 (?=\-) = 向前看破折号

编辑格式问题，发布后斜线未显示

# asp.net-mvc-3 - Autofac - 将 ModelState 注入服务

> ID：12393827
> 
> 赞同：2
> 
> 时间：2012-09-12T17:57:44.363
> 
> 标签：asp.net-mvc-3, autofac

我希望能够将模型状态注入服务。

**服务**

```
public ThirdPartyService(IValidationDictionary dict)
{
    // IValidationDictionary, in this case is a ModelStateWrapper object 
    // I created to wrap model state
} 
```

**登记**

```
builder.Register(x => new ModelStateWrapper(x.Resolve<ControllerType>().ViewData.ModelState))
       .As<IValidationDictionary>().InstancePerHttpRequest(); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T11:16:04.260

这作为 InstancePerHttpRequest 没有意义。

在单个 Http 请求期间可以有很多控制器，并且可以有很多模型状态。即使您`ControllerContext`通过say中的引用访问当前对象，`HttpContext.Current`您将生成的代码也容易因设计而出现错误和故障。

我的建议是创建一个类似内存服务的存储库来存储所有当前的 ModelState 并通过控制器操作键检索它们，例如（简单的愚蠢示例）：

```
interface IHttpRequestModelStates
{
   ICollection<string, ModelState> ModelStates {get; set;}
   // you can retrieve Controller:Home / Index  model state 
   // using  ModelStates["HomeIndex"]
} 
```

# grammar - 与上下文相关的语法相关的混淆

> ID：12393833
> 
> 赞同：0
> 
> 时间：2012-09-12T17:58:35.933
> 
> 标签：grammar, context-free-grammar

我想知道我是否有以下规则

AB -> BA。

它是上下文敏感的吗？

另一个规则 A -> aAB

它是否也是上下文敏感的。

我认为它们都不是上下文敏感的。有什么见解或指导吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T18:37:15.183

两种语法都是上下文无关的。但是上下文无关文法是上下文相关文法的子集。（[语法层次结构](http://upload.wikimedia.org/wikipedia/commons/thumb/9/9a/Chomsky-hierarchy.svg/200px-Chomsky-hierarchy.svg.png)）所以是的，它们是上下文相关的语法。

# ios - 从 cocoaPod 上传 github 分支

> ID：12393839
> 
> 赞同：1
> 
> 时间：2012-09-12T17:59:23.283
> 
> 标签：ios, cocoapods

我正在尝试从我的 PodFile (CocoaPod) 上传 restkit 的一个分支，我不知道我是否使用了正确的语法：

```
pod 'RestKit' , :git => 'https://github.com/nhenin/RestKit.git' 
```

无论如何它都不起作用，我有这个错误：

```
### Error

```
undefined method `top_level_parent' for nil:NilClass
/Librar 
```

# ruby-on-rails - FactoryGirl 和acts_as_tree 使用after_create

> ID：12393841
> 
> 赞同：0
> 
> 时间：2012-09-12T17:59:42.877
> 
> 标签：ruby-on-rails, rspec, factory-bot, rspec-rails

我有一个名为 MenuHeader 的类，具有以下内容：

```
class MenuHeader < ActiveRecord::Base
  acts_as_tree :parent_id
  belongs_to :menu 
```

我想创建几个级别的 menu_headers 但不知道如何做到这一点：

```
FactoryGirl.define do
  factory :menu_header do
    name "my menu header"
    menu
    after(:create) { |menu_header| do_something_else_to(user) }
  end
end 
```

我会创建一个 :menu_header2 还是我可以如何扩展上面的内容。如何将 :parent_id 设置为最近创建的 menu_header 的值？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:26:56.280

我会使用创建不同级别的 menu_header 工厂`build`及其子级`after(:build)`。顺便说一句，我更喜欢`after :build`，因为我可以轻松创建非持久对象进行测试。

```
FactoryGirl.define do
  factory :menu_header do
    name "my menu header"
    menu

    factory :menu_header_level1 do
      after(:build) do |m|
        m.children << FactoryGirl.build(:menu_header, :name => 'level0 submenu0', :parent => m)
        m.children << FactoryGirl.build(:menu_header, :name => 'level0 submenu1', :parent => m)
      end
    end

    factory :menu_header_level2 do
      after(:build) do |m|
        m.children << FactoryGirl.build(:menu_header_level1, :name => 'level1 submenu0', :parent => m)

      end
    end   
  end
end 
```

# javascript - Sencha Touch 构建 - 排除文件

> ID：12393843
> 
> 赞同：2
> 
> 时间：2012-09-12T17:59:45.530
> 
> 标签：javascript, sencha-touch, sencha-touch-2

在我的 Sencha 应用程序中，我有一个 Config.js 文件，其中包含一些服务 URL：

```
Ext.define('MyApp.utils.Config', {
    singleton : true,

    config : {
        authBaseUrl : '...',
        serviceBaseUrl : '...',
        reportsBaseUrl : '...',
        imagesUrl : '...'
    },    

    constructor : function (config) {
        this.initConfig(config);
    }
}); 
```

在部署之前，我使用

```
sencha app build 
```

来自 Sencha Touch SDK 的命令来缩小和连接文件等。

我的问题是构建过程也会将 config.js 添加到缩小的 app.js 文件中，尽管如果我可以在不需要重建/重新部署整个应用程序的情况下对其进行编辑，这将非常有用。我还没有找到任何方法来改变构建过程的行为。

所以在构建应用程序之后，我想要这三个 js 文件：

*   sdk/sencha-touch.js（第一次下载后连接，缩小，缓存在本地存储中）
*   app.js（第一次下载后连接、缩小、缓存在本地存储中）

*   config.js（保持不变，没有将其缓存在本地存储中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T20:24:18.123

将其从应用程序中分离出来，使其不被捆绑，然后在 app.json 中引用它，这在类似情况下对我来说效果很好。

我还有一个 config.js 在我的开发过程中被反复修改，所以在我的 app.json 中它看起来像这样：

```
"js": [
    {
        "path": "sdk/sencha-touch-all.js"
    },
    {
        "path": "config.js"
    },
    {
        "path": "app.js",
        "bundle": true, 
        "update": "full"
    }
], 
```

这可确保您的 config.js 文件包含在构建中。

然后你需要将脚本添加到你的 app.html 文件中，只要确保它在你的主 app.js 之前被加载。我的看起来像这样（从 Sencha Architect 自动生成）：

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>llm</title>
    <link rel="stylesheet" href="resources/css/llm.css">
    <script src="http://maps.google.com/maps/api/js?sensor=true"></script>
    <script src="sdk/sencha-touch-all.js"></script>
    <script src="config.js"></script>
    <script src="cordova-2.0.0.js"></script>
    <script type="text/javascript" src="app.js"></script>
</head>
<body></body>
</html> 
```

希望这对你有帮助！

# android - FragmentPagerAdapter 与 FragmentStatePager。真正的区别是什么

> ID：12393850
> 
> 赞同：1
> 
> 时间：2012-09-12T17:59:58.600
> 
> 标签：android

这两种适配器之间的真正区别是什么？我已经多次使用 FragmentPagerAdapter 和片段页面。我看到它还保留了上一个和下一个片段页面。我认为 FragmentStatePager 不会这样做。但是现在我使用了 FragmentStatePager 并且我注意到了同样的事情。

# .net - Excel VSTO 加载项错误 - 无法创建应用程序域

> ID：12393854
> 
> 赞同：2
> 
> 时间：2012-09-12T18:00:14.720
> 
> 标签：.net, excel, .net-3.5, vsto

我有一个 Excel VSTO 加载项没有安装在我的一台用户计算机上。到目前为止，它在其他所有人的机器（8 台机器）上都可以正常安装，但在这台特定的机器上，它会给出以下错误消息。

```
Customization could not be loaded because the application domain could not be created.

************** Exception Text **************
Microsoft.VisualStudio.Tools.Applications.Runtime.CannotCreateCustomizationDomainException: Customization could not be loaded because the application domain could not be created. ---> System.TypeLoadException: Could not load type 'System.AddIn.Pipeline.QualificationDataAttribute' from assembly 'System.AddIn.Contract, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a'.
   at System.ModuleHandle.ResolveType(Int32 typeToken, RuntimeTypeHandle* typeInstArgs, Int32 typeInstCount, RuntimeTypeHandle* methodInstArgs, Int32 methodInstCount)
   at System.ModuleHandle.ResolveTypeHandle(Int32 typeToken, RuntimeTypeHandle[] typeInstantiationContext, RuntimeTypeHandle[] methodInstantiationContext)
   at System.Reflection.Module.ResolveType(Int32 metadataToken, Type[] genericTypeArguments, Type[] genericMethodArguments)
   at System.Reflection.CustomAttribute.FilterCustomAttributeRecord(CustomAttributeRecord caRecord, MetadataImport scope, Assembly& lastAptcaOkAssembly, Module decoratedModule, MetadataToken decoratedToken, RuntimeType attributeFilterType, Boolean mustBeInheritable, Object[] attributes, IList derivedAttributes, RuntimeType& attributeType, RuntimeMethodHandle& ctor, Boolean& ctorHasParameters, Boolean& isVarArg)
   at System.Reflection.CustomAttribute.GetCustomAttributes(Module decoratedModule, Int32 decoratedMetadataToken, Int32 pcaCount, RuntimeType attributeFilterType, Boolean mustBeInheritable, IList derivedAttributes)
   at System.Reflection.CustomAttribute.GetCustomAttributes(RuntimeType type, RuntimeType caType, Boolean inherit)
   at System.RuntimeType.GetCustomAttributes(Type attributeType, Boolean inherit)
   at System.Runtime.Remoting.Metadata.RemotingCachedData.GetSoapAttribute()
   at System.Runtime.Remoting.InternalRemotingServices.GetCachedSoapAttribute(Object reflectionObject)
   at System.Runtime.Remoting.SoapServices.GetXmlTypeForInteropType(Type type, String& xmlType, String& xmlTypeNamespace)
   at System.Runtime.Remoting.RemotingServices.DetermineDefaultQualifiedTypeName(Type type)
   at System.Runtime.Remoting.Metadata.RemotingTypeCachedData.get_QualifiedTypeName()
   at System.Runtime.Remoting.Activation.ActivationServices.IsCurrentContextOK(Type serverType, Object[] props, ConstructorCallMessage& ctorCallMsg)
   at System.Runtime.Remoting.Activation.ActivationServices.CreateInstance(Type serverType)
   at System.Runtime.Remoting.Activation.ActivationServices.IsCurrentContextOK(Type serverType, Object[] props, Boolean bNewObj)
   at System.RuntimeMethodHandle._InvokeConstructor(Object[] args, SignatureStruct& signature, IntPtr declaringType)
   at System.RuntimeMethodHandle.InvokeConstructor(Object[] args, SignatureStruct signature, RuntimeTypeHandle declaringType)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.VisualStudio.Tools.Office.Runtime.DomainCreator.DomainInitializer.ActivatePipeline(String addInAssembly, String addInClass, String[] pipelineInfo)
   at Microsoft.VisualStudio.Tools.Office.Runtime.DomainCreator.DomainInitializer.StartAddIn(IntPtr hostServiceProvider, String[] pipeline, String assemblyName, String[] entryPoints)
   at Microsoft.VisualStudio.Tools.Office.Runtime.DomainCreator.DomainInitializer.StartAddIn(IntPtr hostServiceProvider, String[] pipeline, String assemblyName, String[] entryPoints)
   at Microsoft.VisualStudio.Tools.Office.Runtime.DomainCreator.LoadMafPipeline(AppDomain newDomain, IntPtr hostServiceProvider, String fullAssemblyName, String[] entryPoints, OfficeApp officeApplication, OfficeVersion officeVersion, IntPtr& executor)
   at Microsoft.VisualStudio.Tools.Office.Runtime.DomainCreator.CreateCustomizationDomainInternal(String solutionLocation, String manifestName, String documentName, Boolean showUIDuringDeployment, IntPtr hostServiceProvider, Boolean useFastPath, IntPtr& executor)
   --- End of inner exception stack trace ---

************** Loaded Assemblies **************
mscorlib
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5456 (Win7SP1GDR.050727-5400)
    CodeBase: file:///C:/Windows/Microsoft.NET/Framework/v2.0.50727/mscorlib.dll
----------------------------------------
Microsoft.VisualStudio.Tools.Office.Runtime.v10.0
    Assembly Version: 10.0.0.0
    Win32 Version: 10.0.31007.0
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/Microsoft.VisualStudio.Tools.Office.Runtime.v10.0/10.0.0.0__b03f5f7f11d50a3a/Microsoft.VisualStudio.Tools.Office.Runtime.v10.0.dll
----------------------------------------
System
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5456 (Win7SP1GDR.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System/2.0.0.0__b77a5c561934e089/System.dll
----------------------------------------
System.Core
    Assembly Version: 3.5.0.0
    Win32 Version: 3.5.30729.5420 built by: Win7SP1
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Core/3.5.0.0__b77a5c561934e089/System.Core.dll
----------------------------------------
Microsoft.VisualStudio.Tools.Applications.Hosting.v10.0
    Assembly Version: 10.0.0.0
    Win32 Version: 10.0.31007.0
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/Microsoft.VisualStudio.Tools.Applications.Hosting.v10.0/10.0.0.0__b03f5f7f11d50a3a/Microsoft.VisualStudio.Tools.Applications.Hosting.v10.0.dll
----------------------------------------
System.AddIn
    Assembly Version: 3.5.0.0
    Win32 Version: 3.5.30729.5446 built by: Win7SP1GDR
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.AddIn/3.5.0.0__b77a5c561934e089/System.AddIn.dll
----------------------------------------
Microsoft.VisualStudio.Tools.Applications.ServerDocument.v10.0
    Assembly Version: 10.0.0.0
    Win32 Version: 10.0.31007.0
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/Microsoft.VisualStudio.Tools.Applications.ServerDocument.v10.0/10.0.0.0__b03f5f7f11d50a3a/Microsoft.VisualStudio.Tools.Applications.ServerDocument.v10.0.dll
----------------------------------------
Microsoft.VisualStudio.Tools.Applications.Runtime.v9.0
    Assembly Version: 9.0.0.0
    Win32 Version: 9.0.30729.4130
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/Microsoft.VisualStudio.Tools.Applications.Runtime.v9.0/9.0.0.0__b03f5f7f11d50a3a/Microsoft.VisualStudio.Tools.Applications.Runtime.v9.0.dll
---------------------------------------- 
```

我不确定为什么会收到此错误。通过谷歌搜索，没有任何来自可靠来源的返回。我让用户验证已安装 .NET 3.5，以管理员身份运行它，但似乎没有任何帮助。

我有一个安装程序，它会自动将加载项从注册表中挂接到 excel，但如果安装了 VSTO，则会出现相同的错误消息。

我无法理解此错误消息告诉我什么。谁能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-14T19:30:21.813

在 Windows 7 64 位上，我们遇到了类似的问题。一些参考错误是：

```
Not loaded. A runtime error occurred during the loading of the COM Add-in.

Microsoft.VisualStudio.Tools.Applications.Runtime.CannotCreateCustomizationDomainException: Customization could not be loaded because the application domain could not be created.

System.TypeLoadException: Could not load type 'System.AddIn.Pipeline.QualificationDataAttribute' from assembly 'System.AddIn.Contract, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a'. 
```

此问题是由 Microsoft .NET Framework 3.5.1（操作系统的一项功能）损坏引起的。

如何修复或重新安装 .NET Framework 3.5 [http://www.adminarsenal.com/admin-arsenal-blog/how-to-repair-or-reinstall-net-framework-3-5/](http://www.adminarsenal.com/admin-arsenal-blog/how-to-repair-or-reinstall-net-framework-3-5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:56:16.360

[这篇文章](http://social.msdn.microsoft.com/Forums/en-US/sqlkjpowerpivotforexcel/thread/456dc09a-2b17-4d50-997c-aaebbe02996f)声称遇到此异常时必须安装*完整的 .NET 框架（而不是客户端配置文件）。*有几个人说这解决了他们的问题。

（理想情况下，您的 VSTO 应该只需要客户端配置文件框架。您是否在 VSTO 中做一些需要完整框架的事情，或者这是先决条件之一？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T15:38:11.123

好的 - 事实证明这是用户机器出了问题。如果用户卸载我的加载项并在他的机器上启用其他加载项，错误消息仍然出现。是时候对他的机器而不是我的加载项进行故障排除了！

作为其他人的注释，您可以通过将变量添加到环境变量 - > 系统变量中取消抑制错误消息来查看错误消息

> 变量名称：**VSTO_SUPPRESSDISPLAYALERTS**
> 
> 变量值：**0**

**最后更新：**

结果发现用户拥有 Microsoft Office Professional Plus 2010，而 Visual Studio 无法为该版本的 Microsoft Office 生成插件。

[https://connect.microsoft.com/VisualStudio/feedback/details/687449/vsto-not-compatible-with-office-professional-plus-2010](https://connect.microsoft.com/VisualStudio/feedback/details/687449/vsto-not-compatible-with-office-professional-plus-2010)

# xpath - xpath - 使用包含通配符

> ID：12393858
> 
> 赞同：9
> 
> 时间：2012-09-12T18:00:21.940
> 
> 标签：xpath, pattern-matching

我有以下内容，并试图看看是否有更好的方法。我知道它可以使用starts-with/contains来完成。我正在使用 Firefox 10 进行测试，我相信它实现了 xpath 2.+。

测试节点是

```
<a id="foo">
.
.
.
<a id="foo1">
.
<a id="foo2"> 
```

有没有办法使用通配符来获取 foo1/foo2 节点..

就像是

```
//a[@id =* 'foo'] 

or 

//a[contains(@id*,'foo')] 
```

也就是说，给我一个“a”，其中 id 以“foo”开头但有额外的字符......然后这将跳过第一个节点与“foo”

我以为我看过这方面的文章，但找不到！

我记得，文章指出 xpath 有一组运算符，可用于指定字符串中给定模式的开始/结束。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-13T05:32:48.960

**使用**：

```
//a[@id[starts-with(., 'foo') and string-length() > 3]] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-12T18:05:48.790

不是通配符，但可能您仍然需要：

```
//a[(@id!='foo') and starts-with(@id,'foo')] 
```

请参阅[W3C XPath 规范](http://www.w3.org/TR/xpath/#function-starts-with)。

# android - 集成了 facebook 登录的 android 应用程序，如何生成发布密钥？

> ID：12393860
> 
> 赞同：1
> 
> 时间：2012-09-12T18:00:40.817
> 
> 标签：android, facebook, publish, sign, release-mode

当我想发布集成了 fb 的应用程序 android 时遇到问题。我用 Eclipse 签署了我的应用程序，并在终端中使用**“keytool -exportcert -alias androidreleasekey -keystore MyReleaseKeystore.keystore | openssl sha1 -binary | openssl base64”**生成发布密钥，并在“Native Android App”配置中添加。

我测试了l'app，当我想登录时出现错误：“为facebook登录配置错误......”

当我使用 debugkey 进行测试时，一切正常。当我为 FB 生成释放密钥时，keytool 并没有要求我输入密码。我觉得应该有？“-alias androidreleasekey”是否应该有另一个别名？还是随便我喜欢的？

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:56:46.140

我检查了所有步骤，一切都正确。我的问题只是在安装应用程序 facebook 时出现；未安装应用程序 facebook 时，一切正常。

我通过浏览器强制所有登录FB完成了它，而不是通过facebook应用程序。

感谢大家！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T17:57:20.780

遵循以下几点，它可以保证工作：

1.  确保您的密钥库文件的路径正确。即使路径不正确，keytool 命令也会生成密钥。你怎么知道它是正确的？系统要求您输入密码。
2.  别名很关键。如果您不确定别名是什么，请从 Eclipse 中导出一次 apk（右键单击项目 -> Android 工具 -> 导出签名的应用程序包）。插入密码后，您需要从下拉列表中选择一个别名。确保这与您应该在命令行中使用的别名完全相同。
3.  复制生成的哈希，包括末尾的“=”符号。并将其粘贴到 facebook 应用程序控制台。不要忘记单击“保存更改”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T12:08:22.053

您必须为您的密钥库文件提供了错误的路径，请确保您的路径有效

[如此处](https://developers.facebook.com/docs/mobile/android/build/#sig)所述：一般规则：如果该工具不要求输入密码，则您的密钥库路径不正确。

关于别名，我很确定您应该编写与使用 .. 签署应用程序相同的别名，因为我已经看到使用不同的别名生成了不同的密钥。

# javascript - 将图像转换为 DataURL 以进行本地存储时删除了 EXIF？

> ID：12393861
> 
> 赞同：3
> 
> 时间：2012-09-12T18:00:45.950
> 
> 标签：javascript, local-storage, exif, data-url

将图像转换为 DataURL 格式时是否会删除/删除 EXIF 元数据，以便将其存储在浏览器本地存储中？特别是 Chrome，如果它有所作为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T18:26:45.203

当您将任何图像转换为数据 URL 时，您只需对图像文件的二进制流进行 base64 编码。所以，简而言之，没有。

编辑：如果您专门将图像绘制到 HTML5 Canvas，然后使用其`toDataUrl`方法将其数据转换为数据 URL，那么原始图像的 EXIF 数据当然会被删除，因为 Canvas 实例只使用像素它包含的数据及其像素尺寸以生成该数据 url（如果它使用其他任何东西，它对我来说并不明显）。生成的任何数据 URL 甚至不一定看起来像从原始文件生成的数据 URL，因为即使在生成无损 PNG 时，文件的压缩方式也可能不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T18:31:20.870

这取决于您如何进行转换。只要您只是对整个图像文件进行 base64 编码，那么所有元数据都将被保留。但是，如果您使用 canvas 方法（[https://gist.github.com/1875132](https://gist.github.com/1875132)）转换图像元素，那么我相信您只会存储原始图像数据。

# jquery - 动态数据表分页和排序与变化/动态内容

> ID：12393862
> 
> 赞同：2
> 
> 时间：2012-09-12T18:00:50.383
> 
> 标签：jquery, pagination, datatables, tablesorter, jquery-pagination

[http://www.datatables.net/releases/DataTables-1.9.3.zip](http://www.datatables.net/releases/DataTables-1.9.3.zip)

我正在尝试使用上面的插件。我调用函数`paging()`，`onload`它工作正常

```
<body id="dt_example" onload='paging()'> 
```

但是，当我在单击按钮时使用相同的数据（我在表中拥有的静态数据）重新加载表的 innerHTML 时（示例是 mytable 的 id）

```
<input type ='button' value='click To reload Table contents' onclick='remake()'/>

function remake() 
{
    var ht='<thead><tr><th>dfsdd</th><th>Browser</th></tr></thead>';
    ht = ht + '<tbody>';
    ht = ht + '<tr><td> shjhds</td><td></td></tr>';
    ht = ht + '<tr><td>dsdsd</td><td>xsax</td></tr>';
    ht = ht + '<tr><td>dasdd</td><td>bdsffa</td></tr>';
    ht = ht + '<tr><td>fsdfsd</td><td></td></tr>';
    ht = ht + '<tr><td>kghfagh</td><td>xzxz</td></tr>';
    ht = ht + '<tr><td></td><td>kghfagh</td></tr>';
    ht = ht + '<tr><td>rgsg</td><td>bnfjf</td></tr>';
    ht = ht + '<tr><td></td><td>fsdfs</td></tr>';
    ht = ht + '</tbody>';

    $("#example").html(ht);
    paging();
 }

 function paging()
 {
     $('#example').dataTable();
 } 
```

动态更改表格内容后没有任何效果，既没有排序也没有分页

datatables.net 已明确指导使用**，当我动态加载内容时，我**`$('#example').dataTable();`仍然无法正常工作。我需要知道我做错了什么？

 ****可选择查看（我的完整代码）**

```
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />

        <title>DataTables example</title>
        <style type="text/css" title="currentStyle">
            @import "css/demo_page.css";
            @import "css/demo_table.css";
        </style>
        <script type="text/javascript" language="javascript" src="js/jquery.js">
</script>
<script type="text/javascript" language="javascript" src="js/jquery.dataTables.js">
</script>

<script type="text/javascript" charset="utf-8">
function paging()
{
    $('#example').dataTable();
}

 function remake()
 {
    var ht='<thead><tr><th>dfsdd</th><th>Browser</th></tr></thead>';
    ht = ht + '<tr><td> shjhds</td><td></td></tr>';
    ht = ht + '<tr><td>dsdsd</td><td>xsax</td></tr>';
    ht = ht + '<tr><td>dasdd</td><td>bdsffa</td></tr>';
    ht = ht + '<tr><td>fsdfsd</td><td></td></tr>';
    ht = ht + '<tr><td>kghfagh</td><td>xzxz</td></tr>';
    ht = ht + '<tr><td></td><td>kghfagh</td></tr>';
    ht = ht + '<tr><td>rgsg</td><td>bnfjf</td></tr>';
    ht = ht + '<tr><td></td><td>fsdfs</td></tr>';
    ht = ht + '</tbody>';
    $("#example").html(ht);
    paging();
    }
</script>
</head>

<body id="dt_example" onload='paging()'>
    <div id="container">
    <input type ='button' value='click To reload Table contents' onclick='remake()' />
            <div id="demo">
            <table cellpadding="0" cellspacing="0" border="5" class="display" id="example" width="100%">
                <thead>
                    <tr>
                        <th>dfsdd</th>
                        <th>Browser</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td> shjhds</td><td></td></tr>
                    <tr><td>dsdsd</td><td>xsax</td></tr>
                    <tr><td>dasdd</td><td>bdsffa</td></tr>
                    <tr><td>fsdfsd</td><td></td></tr>
                    <tr><td>kghfagh</td><td>xzxz</td></tr>
                    <tr><td></td><td>kghfagh</td></tr>
                    <tr><td>rgsg</td><td>bnfjf</td></tr>
                    <tr><td></td><td>fsdfs</td></tr>
                    <tr><td>dfsas</td><td>caadada</td></tr>
                </tbody>
            </table>
            </div>
            </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T19:25:50.990

快速浏览[API](http://www.datatables.net/api)表明您可以销毁/重新制作表格或对其进行操作。我将向您展示销毁和重制方法。但是您可以使用 javascript 删除/清除表格并向表格添加新行，而无需直接编辑 DOM。

```
var myTable;
function paging() {
    myTable = $('#example').dataTable();
}
function remake() {
myTable.fnDestroy();
var ht='<thead><tr><th>dfsdd</th><th>Browser</th></tr></thead>';
ht = ht + '<tr><td> shjhds</td><td></td></tr>';
ht = ht + '<tr><td>dsdsd</td><td>xsax</td></tr>';
ht = ht + '<tr><td>dasdd</td><td>bdsffa</td></tr>';
ht = ht + '<tr><td>fsdfsd</td><td></td></tr>';
ht = ht + '<tr><td>kghfagh</td><td>xzxz</td></tr>';
ht = ht + '<tr><td></td><td>kghfagh</td></tr>';
ht = ht + '<tr><td>rgsg</td><td>bnfjf</td></tr>';
ht = ht + '<tr><td></td><td>fsdfs</td></tr>';
ht = ht + '</tbody>';
$("#example").html(ht);
paging();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T20:03:35.303

而不是使分页成为一个单独的功能，只需在您的重制功能中使用

```
 function remake() {
    var ht='<thead><tr><th>dfsdd</th><th>Browser</th></tr></thead>';
    ht = ht + '<tr><td> shjhds</td><td></td></tr>';
    ht = ht + '<tr><td>dsdsd</td><td>xsax</td></tr>';
    ht = ht + '<tr><td>dasdd</td><td>bdsffa</td></tr>';
    ht = ht + '<tr><td>fsdfsd</td><td></td></tr>';
    ht = ht + '<tr><td>kghfagh</td><td>xzxz</td></tr>';
    ht = ht + '<tr><td></td><td>kghfagh</td></tr>';
    ht = ht + '<tr><td>rgsg</td><td>bnfjf</td></tr>';
    ht = ht + '<tr><td></td><td>fsdfs</td></tr>';
    ht = ht + '</tbody>';
    $("#example").html(ht);
    $('#example').dataTable();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-23T13:04:40.287

让您的生活更轻松。只需重新加载整个表而不是`thead`然后`tbody`使用

```
$('#demo').html(tableHtml); //Demo is id container of your table
$('#example').dataTable();//example is id of table 
```

而tableHtml就像

```
vr tableHtml ='';
function remake() {
var ht = '<table id="example">';
ht = ht + '<thead><tr><th>dfsdd</th><th>Browser</th></tr></thead>';
ht = ht + '<tr><td> shjhds</td><td></td></tr>';
ht = ht + '<tr><td>dsdsd</td><td>xsax</td></tr>';
ht = ht + '<tr><td>dasdd</td><td>bdsffa</td></tr>';
ht = ht + '<tr><td>fsdfsd</td><td></td></tr>';
ht = ht + '<tr><td>kghfagh</td><td>xzxz</td></tr>';
ht = ht + '<tr><td></td><td>kghfagh</td></tr>';
ht = ht + '<tr><td>rgsg</td><td>bnfjf</td></tr>';
ht = ht + '<tr><td></td><td>fsdfs</td></tr>';
ht = ht + '</tbody>';
ht = ht + '</table>';
tableHtml = ht;
$("#demo").html(tableHtml);
$('#example').dataTable();
} 
```**

# java - 当数据连续出现时如何使用jfreechart绘制图表

> ID：12393869
> 
> 赞同：0
> 
> 时间：2012-09-12T18:01:21.670
> 
> 标签：java, swing, jfreechart

我想绘制一个数据动态出现的折线图。可以说每一秒我都有一组新的值，这些值要绘制在包含先前值的现有图表中。时间序列图提供了这样的机制，但它需要有时间作为参数之一。但是，对于我来说，时间不是一个变量。如何使用连续传入的数据不断更新此折线图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T18:04:30.333

你可以

1.  为每个新数据点传递一个递增的值。或者，您可以查看 DynamicTimeSeriesCollection 的源代码，了解它们如何使其动态化。这导致：

2.  似乎如果您创建自己的扩展`org.jfree.data.general.Series`类的数据类型，那么在您可以调用的任何更改`fireSeriesChanged`都会触发图形更新。

3.  当我阅读图书馆时，我看到了更多选择。你试过了吗`XYSeries`，它有一个叫做 add() 的方法，我检查了它调用这个方法的源触发了更改侦听器的通知。因此，对于您的情况，使用此类应该就足够了。

# android - 为 PlayBook 自定义布局文件夹构建 Android 应用程序？

> ID：12393871
> 
> 赞同：3
> 
> 时间：2012-09-12T18:01:44.853
> 
> 标签：android, android-layout, blackberry-playbook

我目前正在为 Blackberry playbook 重新打包我的 Android 应用程序，但我在布局方面遇到了一些问题。我有一个 Nexus 7 的自定义布局，我想在 Playbook 上使用它。此布局包含在 layout-sw600dp 中。我知道这个文件夹命名约定只在 Android 3.0+ 中出现，并且由于 Playbook 使用的是 Android 2.3.3，所以没有使用它。

该剧本目前似乎正在使用 layout-xlarge 文件夹中的资源。此文件夹中的布局面向 10 英寸平板电脑，在 Playbook 上看起来很差。

无论如何我可以测试设备是否是 Playbook 并使其加载与 nexus 7 相同的布局而不更改 xlarge 布局。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:51:28.713

我正在使用 layout-xlarge-v9 （按姜饼的版本，应该（1）不在任何 xlarge 平板电脑中）

编辑以添加有关限定符优先级和版本限定符的注释

您需要在最后使用版本限定符。

```
layout-xlarge-v9
layout-xlarge-land-v9 
```

此外，这将获得版本 9 及更高版本，因此您的旧 layout-xlarge 现在应该是：

```
layout-xlarge-v11
layout-xlarge-land-v11 
```

我同意它认为自己很烦人 xlarge

(1) 应该，因为 Honeycomb 就是为此而设计的，但是您可能会发现一些低端 Android 平板电脑可以，但您可能不太关心该细分市场

# sql - 如何通过查询检测 MS Access 数据库或 SQL Server Compact Edition (MSSQL CE)？

> ID：12393874
> 
> 赞同：0
> 
> 时间：2012-09-12T18:02:05.027
> 
> 标签：sql, ms-access, sql-server-ce

我需要通过查询检测 MS Access 数据库或 SQL Server Compact Edition (MSSQL CE)。如果我正在查询 Access 或 Compact Edition，我必须能够通过查询结果知道。该应用程序有时从 Windows Mobile 运行并使用 SQL Server Compact Edition，有时在桌面上运行使用 MS Access。

我已经知道我可以通过读取数据库文件的第一个字节来检测 SQL Server Compact Edition 版本，就像[这里](http://erikej.blogspot.mx/2010/08/sql-server-compact-version-detector.html "sql-server-compact-version-detector")和[这里所说的一样](http://nativemobile.blogspot.mx/2007/12/detecting-sdf-file-version.html "检测-sdf-file-version")

我也知道我可以检测到 SQL 2005 或 2008 的服务器版本，就像[这里解释的一样](http://beyondrelational.com/modules/2/blogs/70/posts/10916/different-ways-to-know-sql-servers-version-information.aspx "不同的方式来知道-sql-servers-version-信息")

我也知道我可以检查 Windows 注册表并查找特定密钥。

这些选项都不适用于我，因为我正在从 Windows Mobile 中运行的应用程序执行查询。

**注意：**不幸的是，我无法执行 shell 命令或从 App 调用外部应用程序。

任何建议都非常受欢迎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T18:14:34.763

试着打电话

```
select @@version 
```

SQL 服务器将返回一个值。访问将返回错误

# c# - LinqToSql：无法插入记录

> ID：12393875
> 
> 赞同：0
> 
> 时间：2012-09-12T18:02:15.853
> 
> 标签：c#, linq-to-sql

我正在学习 Linq-to-SQL。我想添加一条记录，但在以下方面出现异常`InsertOnSubmit()`：

> *无法对“表（GuestbookEntry）”执行创建、更新或删除操作，因为它没有主键。*

但是我的数据库确实有一个主键。

这是我的代码：

```
[Table(Name = "GuestbookEntry")]
public class GuestbookEntry
{
    [Column(DbType = "int not null, IsPrimaryKey=true, IsDBGenerated=true")]
    public int Id { get; set; }
    [Column]
    public string Name { get; set; }
    [Column]
    public string Message { get; set; }
    [Column]
    public DateTime DateAdded { get; set; }
}

public class GuestbookContext : DataContext
{
    public Table<GuestbookEntry> GuestBookEntries;
    //public Table<Order> Orders;
    public GuestbookContext(string connection) : base(connection) { }
}

...

private GuestbookContext dbGuestbook = new GuestbookContext("GuestBookConnection");

...

dbGuestbook.GuestBookEntries.InsertOnSubmit(entry);
dbGuestbook.SubmitChanges(); 
```

你能告诉我有什么问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T18:06:58.423

看起来你需要为你的表定义一个主键

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T19:10:07.737

当我学习 LINQ-to-SQL 时，我遵循的最简单的方法是专门使用 LINQ-to-SQL 设计器，而不是尝试手动编码数据模型。这样，我只需确保完全按照我想要的方式设置数据库模式。一旦我这样做了，只需遵循以下步骤：

1.  在服务器资源管理器中创建与数据库的数据连接。
2.  从解决方案资源管理器上下文菜单中创建一个新的 LINQ-to-SQL 类项（**添加... | 数据 | LINQ to SQL 类**。将其命名为*GuestBook.dbml*。
3.  将表从数据连接拖到设计器。我假设您的一张表名为*GuestBookEntry*。

然后，在您的代码中，执行插入：

```
using (GuestBookContext dc = new GuestBookContext())
{
    GuestBookEntry entry = new GuestBookEntry();
    ...
    (populate required fields, BUT DON'T TOUCH THE PRIMARY KEY FIELD)
    ...
    dc.GuestBookEntries.InsertOnSubmit(entry);
    dc.GuestBookEntries.SubmitChanges();
} 
```

# c - GCC 存储的字符串常量在哪里以及这些指针从哪里映射？

> ID：12393888
> 
> 赞同：9
> 
> 时间：2012-09-12T18:03:41.390
> 
> 标签：c, linux, string, gcc, compiler-construction

当我在我的 Linux x86_64 机器上编译并运行以下由 GCC 编译的 C 程序时：

```
#include <stdio.h>

int main(void)
{
    char *p1 = "hello";               // Pointers to strings
    char *p2 = "hello";               // Pointers to strings
    if (p1 == p2) {                   // They are equal
    printf("equal %p %p\n", p1, p2);  // equal 0x40064c 0x40064c
                                      // This is always the output on my machine
    }
    else {
    printf("NotEqual %p %p\n", p1, p2);
    }
} 
```

我总是得到输出：

> 等于 0x40064c 0x40064c

我知道字符串存储在一个常量表中，但与动态分配的内存相比，地址太低了。

与以下程序进行比较：

```
#include <stdio.h>

int main(void)
{
    char p1[] = "hello";                // char arrar
    char p2[] = "hello";                // char array
    if (p1 == p2) {
    printf("equal %p %p\n", p1, p2);
    }
    else {                              // Never equal
    printf("NotEqual %p %p\n", p1, p2); // NotEqual 0x7fff4b25f720 0x7fff4b25f710
                                        // Different pointers every time
                                        // Pointer values too large
    }
} 
```

这两个指针不相等，因为它们是两个可以独立操作的数组。

我想知道 GCC 是如何为这两个程序生成代码的，以及它们在执行过程中是如何映射到内存的。由于这已经记录了很多次，因此也欢迎任何指向文档的链接。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-12T18:15:37.347

在这两种情况下，编译器都会在程序部分（*rodata*代表*只读数据*）中只发出`"hello"`一次字符串的实际字节。`.rodata`

 **它们实际上是直接从可执行文件映射到内存中，有点类似于代码部分。这就是为什么它们与动态分配的相差甚远的原因。

然后：

```
char *p = "hello"; 
```

简单地初始化`p`到这个（只读）数据的地址。显然：

```
char *q = "hello"; 
```

获取相同的地址。这称为*字符串池*，是编译器的可选流行优化。

但是当你写：

```
char p[] = "hello"; 
```

它可能会产生这样的东西：

```
char p[6];
memcpy(p, "hello", 6); 
```

`"hello"`实际上是只读池字符串的地址。

调用`memcpy`仅用于说明目的。它可能很好地复制到内联，而不是用函数调用。

如果以后你这样做：

```
char q[] = "hello"; 
```

它将定义另一个数组和另一个`memcpy()`. 所以相同的数据，但不同的地址。

但是这些数组变量将驻留在哪里？嗯，这取决于。

*   如果它们是本地的、非静态的变量：在堆栈中。
*   如果它们是全局变量：那么它们将在`.data`可执行文件的部分中，并且它们将被保存在那里，其中已经存在正确的字符，因此`memcpy`在运行时不需要。这很好，因为那`memcpy`必须在`main`.
*   如果它们是局部静态变量：与全局变量完全相同。他们都被称为`variables of static duration`或类似的东西。

关于文档链接，对不起，我不知道。

但是，如果您可以自己进行实验，谁需要文档呢？最好的工具是`objdump`，它可以反汇编程序，转储数据部分等等！

我希望这能回答你的问题...**

# php - PHP基于查询数组添加前导零

> ID：12393893
> 
> 赞同：0
> 
> 时间：2012-09-12T18:04:02.973
> 
> 标签：php, mysql

我正在尝试为表中的所有 skus 添加前导零。我需要每个 sku 前面都有一个 3 位数字。对于 1-9 sku，将是 001$row['sku'], 002$row['sku'], 009$row['sku'], 010$row['sku'], 011$row['sku' ],...等我正在使用 $n=sizeof($row)。但是每次我回显这个时，我都会得到 22 个 sku（大约有 50 个），并且只返回 sku 的第一个字母。我不明白如何解决这个问题，我正在尝试从我的查询中构建一个数组，以确定有多少 skus 以添加前导零。任何帮助深表感谢。

```
$result = mysql_query("SELECT * FROM temp_table WHERE po='ABCD'");

$row = mysql_fetch_array($result);

    for ($i=0, $n=sizeof($row); $i<$n; $i++) {
               if ($i < 9) {
                 $Zeros="00";
               }
               elseif ($i < 99) { 
                 $Zeros="0";
                }
               else{
                 $Zeros="";
                }
               $num=$i+1;    
echo   $Zeros.$num. "=" . $row[$i]['sku'] . "`<br />`"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T18:09:03.460

我不完全理解上下文，但听起来好像您想使用[str_pad](http://php.net/manual/en/function.str-pad.php)函数。

例如

```
$num1 = str_pad(1, 3, '0', STR_PAD_LEFT); // = 001
$num2 = str_pad(10, 3, '0', STR_PAD_LEFT); // = 010
// etc... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T18:10:33.307

您没有完全正确地遍历结果数据集，或者我不完全理解这种情况。

假设您想根据每一行的 SKU 构建一个三位数的 SKU，这里有一个更好的方法：

```
// query the database
$result = mysql_query("SELECT * FROM temp_table WHERE po='ABCD'");

$count = 0;

// Loop through every row in the data result set
while ( $row = mysql_fetch_assoc( $result ) ){ 
    $count++; // Increment SKU #

    // Build integer SKU based on count of item in order and pad with zeros
    $this_sku = str_pad( $count, 3, '0', STR_PAD_LEFT);

    // Build onto integer SKU based on row data and pad with zeros
    $this_sku .= str_pad( $row['sku'], 3, '0', STR_PAD_LEFT);

    echo "This product SKU is $this_sku<br/>";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T18:11:06.527

您正在寻找[str_pad 功能](http://php.net/manual/en/function.str-pad.php)。

例子：

```
$num = str_pad($input, 4, "0", STR_PAD_LEFT); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T18:15:15.260

最优雅的方法是使用 sprintf() [http://php.net/manual/en/function.sprintf.php](http://php.net/manual/en/function.sprintf.php)

```
sprintf(%'0'3d=%d`<br />`, $num, $row[$i]['sku']); 
```

# linq - 如何格式化数据值

> ID：12393900
> 
> 赞同：0
> 
> 时间：2012-09-12T18:04:35.187
> 
> 标签：linq

我有以下 Linq to Sql：

```
var subscribers = (from s in dataContext.Employees
                               where s.RowType == "Edit"
                               select new SubscriberExportData
                                          {
                                              ID = s.ID.ToString(),
                                              GroupNum = s.GroupNumber,
                                              DivisionNum = s.DivisionNumber,
                                              HireDate = s.HireDate != null ? Convert.ToDateTime(s.HireDate).ToShortDateString() : string.Empty,
                                              EffDate = s.EffectiveDate != null ? Convert.ToDateTime(s.EffectiveDate).ToShortDateString() : string.Empty
                                           } 
```

本质上，如果日期值不为空，则将它们转换为短日期格式。但我收到以下错误：

> System.InvalidOperationException 未处理 Message=Could not translate expression 'Table(Employee).Where(s => (s.RowType == "Edit")).Select(s => new SubscriberExportData() { HireDate = IIF((s .HireDate != null), ToDateTime(Convert(s.HireDate)).ToShortDateString(), Invoke(value(System.Func`1[System.String]))), EffDate = IIF((s.EffectiveDate != null ), ToDateTime(Convert(s.EffectiveDate)).ToShortDateString)' 转换为 SQL 并且不能将其视为本地表达式。Source=System.Data.Linq

请让我知道如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T19:15:48.397

可以将查询一分为二，第一个是sql可以理解的操作，第二个是本地执行的字符串转换

```
var list = (from s in dataContext.Employees
                           where s.RowType == "Edit"
                           select new
                                      {
                                          s.ID 
                                          s.GroupNumber,
                                          s.DivisionNumber,
                                          s.HireDate 
                                          s.EffectiveDate  
                                       }).ToList();

var subscribers = (from s in list
                           select new SubscriberExportData
                                      {
                                          ID = s.ID.ToString(),
                                          GroupNum = s.GroupNumber,
                                          DivisionNum = s.DivisionNumber,
                                          HireDate = s.HireDate != null ? Convert.ToDateTime(s.HireDate).ToShortDateString() : string.Empty,
                                          EffDate = s.EffectiveDate != null ? Convert.ToDateTime(s.EffectiveDate).ToShortDateString() : string.Empty
                                       } 
```

# c# - 在按钮单击事件之前获得返回确认以触发的问题

> ID：12393903
> 
> 赞同：1
> 
> 时间：2012-09-12T18:04:48.423
> 
> 标签：c#, javascript, telerik

我正在使用 radbutton。在 onclick 事件中，我有一段代码运行 SQL 查询以删除记录。

我想为此返回一个确认消息框，但我没有任何运气让它运行。

*   我尝试将其添加到 onclientclick 事件中，
*   当按钮单击事件触发时，我尝试将其添加到代码中的属性中，
*   我试过了`Page.RegisterStartupScript("clientScript", message)`。

其中每一个都是在执行返回确认之前删除帐户。

我已经注释掉了我的删除代码，然后该消息将触发。在将它添加到属性的情况下，它在我按下删除按钮两次后起作用。我已经研究了几天，还没有找到合适的代码。任何帮助，将不胜感激。

更新 - 添加代码。

我试过的代码：

```
 string message = "<script language=JavaScript> alert( ' The ' );</script>";

    if (!Page.IsStartupScriptRegistered("clientScript"))
    {
        Page.RegisterStartupScript("clientScript", message);
    } 
```

和

```
 RadButton btn = (RadButton)sender;

    string strMessage = "Are you sure?";

    btn.Attributes.Add("onclick", "return confirm('" + strMessage + "');"); 
```

这是按钮

```
 <telerik:RadButton ID="btnDeleteAccount" runat="server" Font-Bold="True" Font-Names="Arial"
    Font-Size="11px" Skin="WebBlue" Text="Delete Account" OnClick="btnDeleteAccount_Click"
    Width="150px">
    </telerik:RadButton> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T18:49:24.827

我终于找到了一段有效的代码。我一定输入了一些不正确的javascript。

这是我发现对我有用的代码。

```
OnClientClicking="function (sender, args){args.set_cancel(!window.confirm('Are you sure you want to delete this account?'));}" 
```

# iphone - 如何为新的 iPhone 分辨率更新应用程序

> ID：12393905
> 
> 赞同：1
> 
> 时间：2012-09-12T18:05:07.147
> 
> 标签：iphone, ios

新 iPhone 正在展示中。它具有新的分辨率纵横比。(1136 x 640)

有谁知道如何升级应用程序以支持新分辨率？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T18:09:09.860

像按钮等普通 UI 组件应该使用新的 SDK 进行更新 - 就像在 MBP Retnia 上一样。但是您制作的图形像图像一样，需要使用更大的 dpi 进行更新 - 这只是一个猜测，但这就是 MBP Retnia 的工作方式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:06:00.910

我们正在使用[Canappi](http://www.ebpml.org/blog2/index.php/2012/09/13/easy-iphone-5-screen-resolution)生成适用于两种分辨率（也适用于 iPad）的 Objective-C 代码。Canappi 像 Interface Builder 一样工作，但以文本形式（如果你问我，它更容易使用）。这是您为每个分辨率和/或外形尺寸指定控件位置的方式：

```
layout myTabletLayout {

     text name (10,60,100,30) { ... }

}

layout myPhoneLayout {

    text name (10,60,100,30 + 0,10,0,2) { ... }

    tablet myTabletLayout ;

} 
```

+0,10,0,2 是当应用程序在 iPhone 5 上运行时应用于原始坐标的移位。这意味着您可以轻松调整表格大小、空间控制甚至，这真的很酷，带上控制在 iPhone 4 上显示在屏幕外，回到 iPhone 5 的视图边界。

# wpf - 生成动画线

> ID：12393908
> 
> 赞同：4
> 
> 时间：2012-09-12T18:05:35.530
> 
> 标签：wpf, animation, graphics

(x,y) =(10,20),(50,30),(20,20),(40,22),(45,20),(50,35),........ .

我想用 .Net 创建一个动画。通常我使用的是 windows 窗体。但如果需要，我可以使用 WPF。

它从 (10,20) 点开始。实际上，一条线从 (10,20) 开始，然后以 10 毫秒的延迟到达 (50,30) 点。然后，在 10 毫秒后从 (50,30) 到 (20,20)，依此类推。

该值将从文本文件中读取。我可以简单地制作两个 ArrayList x&y，从文本文件中放入值。我只需要知道如何从这个 x,y 生成动画线，每个节点到另一个节点有 10 毫秒的延迟？

如果我的问题难以理解，请告诉我。我会尽量让它更容易。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-12T20:53:20.867

如果我理解正确，您想要为刚绘制的线条制作动画。这是一个包含您的价值观的简单示例。

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">

    <Canvas Name="lineCanvas" MouseLeftButtonDown="lineCanvas_MouseLeftButtonDown" Background="White" />
</Window> 
```

事件处理程序稍后将启动动画。首先，我们将定义数据：

```
List<Point> Points = new List<Point>();
Storyboard sb;

public MainWindow()
{
    InitializeComponent();

    Points.Add(new Point(10, 20));
    Points.Add(new Point(50, 30));
    Points.Add(new Point(20, 20));
    Points.Add(new Point(40, 22));
    Points.Add(new Point(45, 20));
    Points.Add(new Point(50, 35));

    InitAnimation();
} 
```

`sb`是`Storyboard`包含动画的那个。`Points`可以很容易地用文件中的值填充。

让我们初始化动画。将为每个段添加一个新行。然后线的端点将被动画化。

```
public void InitAnimation()
{
    sb = new Storyboard();

    for (int i = 0; i < Points.Count - 1; ++i)
    {
        //new line for current line segment
        var l = new Line();
        l.Stroke = Brushes.Black;
        l.StrokeThickness = 2;

        //data from list
        var startPoint = Points[i];
        var endPoint = Points[i + 1];

        //set startpoint = endpoint will result in the line not being drawn
        l.X1 = startPoint.X;
        l.Y1 = startPoint.Y;
        l.X2 = startPoint.X;
        l.Y2 = startPoint.Y;
        lineCanvas.Children.Add(l);

        //Initialize the animations with duration of 1 second for each segment
        var daX = new DoubleAnimation(endPoint.X, new Duration(TimeSpan.FromMilliseconds(1000)));
        var daY = new DoubleAnimation(endPoint.Y, new Duration(TimeSpan.FromMilliseconds(1000)));
        //Define the begin time. This is sum of durations of earlier animations + 10 ms delay for each
        daX.BeginTime = TimeSpan.FromMilliseconds(i * 1010);
        daY.BeginTime = TimeSpan.FromMilliseconds(i * 1010);

        sb.Children.Add(daX);
        sb.Children.Add(daY);

        //Set the targets for the animations
        Storyboard.SetTarget(daX, l);
        Storyboard.SetTarget(daY, l);
        Storyboard.SetTargetProperty(daX, new PropertyPath(Line.X2Property));
        Storyboard.SetTargetProperty(daY, new PropertyPath(Line.Y2Property));
    }
} 
```

动画的持续时间可以根据线条的长度轻松更改，使其看起来更好。

最后一个任务，显示动画：

```
private void lineCanvas_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
{
    sb.Begin(this);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T09:00:31.813

这是 Nico 出色答案的变体。我用来为a`PointAnimation`设置动画，作为 a 的a 。`EndPoint``LineGeometry``Data``Path`

```
using System;
using System.Collections.Generic;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;

namespace SoGeneratingAnimatedLine
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            var canvas = new Canvas();

            Content = canvas;

            var points =
                new List<Point>()
                {
                    new Point(10, 10),
                    new Point(90, 10),
                    new Point(90, 90),
                    new Point(10, 90),
                    new Point(10, 10)
                };

            var sb = new Storyboard();

            for (int i = 0; i < points.Count - 1; i++)
            {
                var lineGeometry = new LineGeometry(points[i], points[i]);

                var path =
                    new Path()
                    {
                        Stroke = Brushes.Black,
                        StrokeThickness = 2,
                        Data = lineGeometry
                    };

                canvas.Children.Add(path);

                var animation =
                    new PointAnimation(points[i], points[i + 1], new Duration(TimeSpan.FromMilliseconds(1000)))
                    {
                        BeginTime = TimeSpan.FromMilliseconds(i * 1010)
                    };

                sb.Children.Add(animation);

                RegisterName("geometry" + i, lineGeometry);
                Storyboard.SetTargetName(animation, "geometry" + i);
                Storyboard.SetTargetProperty(animation, new PropertyPath(LineGeometry.EndPointProperty));                
            }

            MouseDown += (s, e) => sb.Begin(this);
        }
    }
} 
```

# sql - 如果所有 SQL 都在做 SELECT，那么使用视图与 SPROC 是否有优势

> ID：12393914
> 
> 赞同：1
> 
> 时间：2012-09-12T18:05:58.927
> 
> 标签：sql, stored-procedures, view

如果所有 SQL 都在做 SELECT，那么使用视图与 SPROC 是否有优势。从我的角度来看，它纯粹是组织性的，但我想知道当 SPROC 所做的只是 SELECT 并且没有写入数据库时​​，是否有充分的理由使用视图。我在 Sql Server 2008 上，但这可能适用于其他 SQL Server 产品

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T18:10:11.610

视图旨在抽象出基础表的详细信息并为数据提供一个窗口，以您希望它出现的方式。

存储过程实现特定的任务，并且可以选择在任务执行期间使用将使用的参数。

如果您想通过从用户那里获取参数来运行特定任务，那么您可以创建一个存储过程。

如果您只想以给定的方式公开数据并在需要时将进一步的过滤留给用户，您可以创建一个视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T18:10:15.747

除了为特定角色封装特定数据的安全优势之外，还有能够[在视图上创建索引](http://msdn.microsoft.com/en-us/library/dd171921%28v=sql.100%29.aspx)的优势。

以下是一些特定的性能优势，来自 MSDN 链接：

> *   聚合可以预先计算并存储在索引中，以最大限度地减少查询执行期间的昂贵计算。
> *   可以预先加入表并存储结果数据集。
> *   可以存储连接或聚合的组合。

# jquery - 突出显示代码语法 标签？

> ID：12393915
> 
> 赞同：0
> 
> 时间：2012-09-12T18:06:03.530
> 
> 标签：jquery, html, syntax

是否有任何语法高亮器可以突出显示里面的代码`<pre>`？我在互联网上搜索了很多，但大多数语法荧光笔都需要将代码包装在`<pre><code>`.

我的问题是我无法更改语法并在`<code>`内部添加，`<pre>`或者我无法为 pre 定义任何类。所以我正在寻找一些荧光笔，它可以自动突出显示`<pre>`. 任何语法荧光笔都可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:42:18.897

试试[SyntaxHighlighter](http://alexgorbatchev.com/SyntaxHighlighter/manual/configuration/)。您可以配置要使用哪个标签作为突出显示的标志。

# asp.net - ASP.NET：如何从链接按钮访问父列表项元素？

> ID：12393916
> 
> 赞同：1
> 
> 时间：2012-09-12T18:06:03.713
> 
> 标签：asp.net, css, vb.net, linkbutton

我有以下情况...

```
<li><asp:LinkButton ID="LinkButton1" runat="server">Link</asp:LinkButton></li> 
```

当我单击按钮时，我希望能够设置列表项的类（或添加到类属性）。因此，一旦我单击 LinkBut​​ton，我希望代码更改为以下内容...

```
<li class="selected"><asp:LinkButton ID="LinkButton1" runat="server">Link</asp:LinkButton></li> 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T18:15:58.470

最好在服务器上执行此操作，因为响应将重新呈现页面。因此，使 JavaScript 更改不适用：

```
Dim parent As HtmlControl = LinkButton1.Parent
parent.Attributes("class") = "selected" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T18:12:48.310

使用 jquery 可以像这样简单  

```
$(document).ready(function() {
  $("#<%=LinkButton1.ClientId %>").addClass(localStorage.style);
});

    $("#<%=LinkButton1.ClientId %>").click(function () {
          $(this).parent("li").addClass("selected");
           localStorage.style="selected";
        }); 
```

# java - 正则表达式将模式与java中的子域匹配

> ID：12393918
> 
> 赞同：1
> 
> 时间：2012-09-12T18:06:11.377
> 
> 标签：java, regex

我正在尝试匹配子域和域。我用了这段代码。

```
public static void main(String[] args) {
        String s = "http://aaa.example.com";
        Pattern pattern = Pattern.compile("http://([a-z0-9]*.)example.com");
        Matcher matcher = pattern.matcher(s);
        if (matcher.find()) {
            System.out.println("match");
        }

    } 
```

这适用于`http://aaa.example.com`也适用于`http://aaa.example.commm`. 只需要匹配 example.com 的子域更新：感谢您的回答，现在它可以工作我面临另一个问题，这个正则表达式不匹配`http://example.com`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T18:08:37.210

使用 matcher.matches() 而不是 find()。匹配项会将整个区域与模式匹配。

# regex - 使用 Reg Exp 替换 Perl 中唯一的字符串

> ID：12393923
> 
> 赞同：0
> 
> 时间：2012-09-12T18:06:22.527
> 
> 标签：regex, perl

我正在尝试在 Perl 中编写此脚本，以从我的查询结果中检查变量 $summary 中的唯一字符串。有多个类似的条目，但其中一部分是唯一的（db1node1web1 可能是不同的节点，但结果类型相同）。这只是检查我是否正确使用 Reg Ex 的代码的一小部分（目前不正确）。

我包括以下代码：

```
$summary = "NFW - CRITICAL CPU_Load_db1node1web1 CRITICAL - load average: 114.49, 48.55, 29.17 Sept 01 00:10:16 PDT 2012";
if ( $summary =~ "NFW - CRITICAL CPU_Load_[a-z]* CRITICAL - load average: 114.49, 48.55, 29.17 Sept 01 00:10:16 PDT 2012") {
    print "True\n";
}else {
    print "False\n";
} 
```

我对 Perl 很不满意，并试图让它工作，这样我就可以剖析我的查询结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T18:11:22.893

如果您只需要匹配一个子字符串，则只指定那个，例如

```
$summary =~ /NFW - CRITICAL CPU_Load_/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T18:12:27.417

自从我用 perl 编码以来已经有几年了，但是 IIRC，你不必指定它是匹配还是替换？你需要包括数字

我相信你的代码应该是：

```
$summary = "NFW - CRITICAL CPU_Load_db1node1web1 CRITICAL - load average: 114.49, 48.55, 29.17 Sept 01 00:10:16 PDT 2012";
if ( $summary =~ m/NFW - CRITICAL CPU_Load_[a-z0-9]* CRITICAL - load average: 114.49, 48.55, 29.17 Sept 01 00:10:16 PDT 2012/) {
    print "True\n";
}else {
    print "False\n";
} 
```

参考：[http ://www.troubleshooters.com/codecorn/littperl/perlreg.htm](http://www.troubleshooters.com/codecorn/littperl/perlreg.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T18:10:04.457

`[a-z]`不包括数字。您的示例字符串包含几个`1`'s。将班级调整为

```
[a-z0-9] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T18:10:56.043

您需要使用斜杠来引用正则表达式而不是双引号。此外，您的输入`db1node1web1`包含数字和字符：

```
if ( $summary =~ /NFW - CRITICAL CPU_Load_[a-z0-9]* CRITICAL - load average: 114.49, 48.55, 29.17 Sept 01 00:10:16 PDT 2012/) {

  print "True\n";

}else {

  print "False\n";

} 
```

# android - calendar.set(Calendar.HOUR_OF_DAY, alarmHour); 不管用。我究竟做错了什么？

> ID：12393925
> 
> 赞同：5
> 
> 时间：2012-09-12T18:06:31.653
> 
> 标签：android, android-alarms, android-calendar

我正在设置一个闹钟，我从 a`TextView`和 AM/PM 通过 a获取小时和分钟`Spinner`。这是我初始化`Calendar`对象的方式：

```
Calendar calen = Calendar.getInstance();
calen.set(Calendar.HOUR_OF_DAY, alarmHour); //alarmHour from TextView
calen.set(Calendar.MINUTE, alarmMinute); //alarmMinute from TextView
calen.set(Calendar.SECOND, 0);
calen.set(Calendar.MILLISECOND, 0);

if(amorpm.equals("PM") //amorpm from Spinner
{
    calen.set(Calendar.AM_PM, Calendar.PM);
}
else
{
    calen.set(Calendar.AM_PM, Calendar.AM);
} 
```

问题是这个对象的**Hour**值`Calendar`有时是正确的，即用户输入的值`TextView`（它总是 1 到 12）。但有时，该值等于当前小时。例如，如果当前时间是**11:30 pm**，而我将闹钟设置为**9:30 am**，则**Hour**字段的值为**11**。一件奇怪的事情是，当我将`Calendar`对象的名称更改为其他名称时，例如**cal**，它可以工作。但是以后就不行了。有什么问题？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-12T18:36:55.700

我认为解决方案是打电话`calen.set(Calendar.HOUR, alarmHour);`而不是`calen.set(Calendar.HOUR_OF_DAY, alarmHour);`

问题是您要设置`Calendar.HOUR_OF_DAY`字段，**然后**设置 AM/PM 字段。“一天中的小时”是全天 24 小时中的小时，因此将其与 AM/PM 结合使用没有意义。根据 Java 文档 ( [http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html) )，在设置一天中的时间时，如果出现冲突的信息，那么最近设置信息将根据以下组合使用：

> HOUR_OF_DAY
> 
> AM_PM + HOUR

因为您是在小时后设置 AM/PM 字段，所以小时是从该`Calendar.HOUR`字段中获取的，当您创建实例时，它当然会初始化为当前小时。

变量的命名当然是一个红鲱鱼。这不可能影响它。

# java - 如何使用 Java 在 JSP 中异步显示/隐藏 div

> ID：12393928
> 
> 赞同：2
> 
> 时间：2012-09-12T18:06:49.287
> 
> 标签：java, javascript, jquery, html, jsp

我想在渲染 JSP 时完成一些处理后以编程方式显示 div 标记。使用 Java 执行此操作的最佳方法是什么？使用 jQuery 我会这样做：

```
$('#mydiv').removeClass("hide_me"); 
```

...或者...

```
$('#mydiv').show(); 
```

在呈现页面时如何在 Java 中以编程方式执行此操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T18:17:34.233

假设您拥有包括 JSTL 在内的标准 JSP 设置并将其映射到“c”，您可以这样做：

```
<c:if test="${myCondition}">
  <div id="mDiv">
    content
  </div>
</c:if> 
```

从评论看来，在服务器上呈现 JSP 与在浏览器中呈现内容之间存在一些混淆。JSP 中发生的一切都是服务器端工作，必须在浏览器接收到生成的文档并开始绘制它之前完全完成。您不能使用 JSP 来更改已经在用户屏幕上的内容。为此，您需要 javascript、html5 等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T18:17:23.447

使用 JSP，Java 在服务器上运行（与在浏览器中运行的 JavaScript 不同），因此有条件地`<DIV>`在 JSP 中呈现您的 using Java if 语句：

```
<% if( test="true" ) { %>
  <DIV>....</DIV>
<% } %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T18:27:01.087

我想你正在寻找这样的东西：

```
<div id="loader">Loading / GIF animation</div>
<div id="result" style="display:none;">
  Lots of data.
  Should be flushed to the browser every now and then.
  This will take seconds...
</div>
<script type="text/javascript">
  $("#loader").hide();
  $("#result").show();
</script> 
```

# c++ - 将数据发送到 IP 地址列表 - C++

> ID：12393934
> 
> 赞同：2
> 
> 时间：2012-09-12T18:07:14.507
> 
> 标签：c++, networking, enet

目前，我正在使用[enet](http://enet.bespin.org/)将每秒更新多次的信息流式传输到提供的 IP 地址/端口列表。我正在为这些地址中的每一个创建一个客户端连接（并且在这些计算机上运行着服务器 enet 主机连接）。

我想知道是否有更有效的方式来发送这些消息（或者只是更好地解决问题）？某种方式我不必为每个连接创建一个 enet 主机？我确实需要可靠的交货。

我只使用 enet，因为它很方便并且在我使用的系统中已经可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T18:11:08.537

这个问题的一个很好的解决方案是[ZeroMQ](http://www.zeromq.org/)。

它是一个具有 C++ 绑定的网络库，专门用于以各种配置可靠地传递消息，例如看起来像您正在尝试做的 pub/sub 模型。

ZeroMQ 将有效地让您甚至不需要列出订阅者的 IP，因为他们确实会通过连接到您的发布者来订阅。然后发布者将发送数据而不管订阅者的数量（参见[http://zguide.zeromq.org/page:all#Getting-the-Message-Out](http://zguide.zeromq.org/page:all#Getting-the-Message-Out)）。

# jquery - 克隆时，更改 jQuery 中的选定选项

> ID：12393935
> 
> 赞同：0
> 
> 时间：2012-09-12T18:07:21.880
> 
> 标签：jquery

这就是我得到的：

[http://jsfiddle.net/XSX8G/1/](http://jsfiddle.net/XSX8G/1/)

现在，您可以看到所有选定的选项都是蓝色的。

这应该只适用于第一个选择。

那么剩下 3 个，我希望从 ChosenOptions 数组中加载：

```
var chosenOptions = ['Black', 'Red', 'Black']; 
```

因此，第一个循环应采用值为“Black”的选项并标记为 SELECTED。

然后第二个循环应该选择“红色”，第三个循环应该再次选择黑色。

当它完成加载时，它会在 4 个选择中将这些标记为：

```
Blue, Black, Red, Black 
```

我怎样才能做到这一点？这不应仅针对 3 个数组键设为静态，并且当您从 4 增加到 5 时不应忘记所选值。

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T19:39:45.367

我会计算你的选择选项数组，然后在你克隆时迭代。如果用于克隆的循环大于选项数组，我们只需重置计数器。[http://jsfiddle.net/XSX8G/3/](http://jsfiddle.net/XSX8G/3/)

```
 var chosenOptions = ['Black', 'Red', 'Black'];
        var optionsCount = chosenOptions.length
            var y =0

        for (var i = 0; i < Math.abs(amount - selectCount); i++) {
               var clone = $orig.clone(true, true);
               $orig.after(clone);
            if(y >= optionsCount){y= 0}
                    //reset counter to start at the beginning
            clone.val(chosenOptions[y])
                ++y
        } 
```

# spring - Spring mvc - WebArgumentResolver 的实现

> ID：12393937
> 
> 赞同：2
> 
> 时间：2012-09-12T18:07:32.827
> 
> 标签：spring, spring-mvc, annotations

我想创建自定义控制器方法参数注释。

遵循这个问题[How to pass a session attribute as method argument (parameter) with Spring MVC](https://stackoverflow.com/questions/3621266/how-to-pass-a-session-attribute-as-method-argument-parameter-with-spring-mvc)并遵循@Bozho的建议，我有这样的事情：

我的解析器

```
public class SessionAttributeAnnotationResolver implements WebArgumentResolver {

    public Object resolveArgument(MethodParameter parameter,
            NativeWebRequest request) throws Exception {
        System.out.println("I am here");
        Annotation[] parameterAnnotations = parameter.getParameterAnnotations();
        Class<?> parameterType = parameter.getParameterType();

        for (Annotation parameterAnnotation : parameterAnnotations) {
            if (SessionAttribute.class.isInstance(parameterAnnotation)) {
                SessionAttribute sessionAttribute = (SessionAttribute) parameterAnnotation;
                String parameterName = sessionAttribute.value();
                boolean required = sessionAttribute.required();
                HttpServletRequest httprequest = (HttpServletRequest) request
                        .getNativeRequest();
                HttpSession session = httprequest.getSession(false);
                Object result = null;
                if (session != null) {
                    result = session.getAttribute(parameterName);
                }
                if (result == null && required && session == null)
                    raiseSessionRequiredException(parameterName, parameterType);
                if (result == null && required)
                    raiseMissingParameterException(parameterName, parameterType);
                return result;
            }
        }
        return WebArgumentResolver.UNRESOLVED;
    }

    protected void raiseMissingParameterException(String paramName,
            Class<?> paramType) throws Exception {
        throw new IllegalStateException("Missing parameter '" + paramName
                + "' of type [" + paramType.getName() + "]");
    }

    protected void raiseSessionRequiredException(String paramName,
            Class<?> paramType) throws Exception {
        throw new HttpSessionRequiredException(
                "No HttpSession found for resolving parameter '" + paramName
                        + "' of type [" + paramType.getName() + "]");
    }
} 
```

注释

```
@Target(ElementType.PARAMETER)
@Retention(RetentionPolicy.RUNTIME)
public @interface SessionAttribute {
    String value();
    boolean required() default true;
} 
```

简单的控制器来测试一切

```
@Controller
@RequestMapping("/test")
public class TestController {

    @RequestMapping(method= RequestMethod.GET)
    public String t(@SessionAttribute("userEntity") UserEntity e2,Model model,HttpServletRequest req){
        System.out.println(req.getSession().getId());
        UserEntity e=(UserEntity) req.getSession().getAttribute("userEntity");
        System.out.println(e.getName());
        System.out.println(e2.getName());
        return "login";
    }
} 
```

最后，Spring配置

```
<beans:bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">     
    <beans:property name="customArgumentResolver" ref="sessionAttributeAnnotationResolver"/>
</beans:bean>
<beans:bean id="sessionAttributeAnnotationResolver" class="pl.meble.taboret.utils.SessionAttributeAnnotationResolver"/> 
```

现在，一切对我来说似乎都是为了，但我可能犯了一些愚蠢的错误，因为当控制器被执行时，我得到

```
F0B282C93B74F8FA3F21A51F46D4D4D5
username
null 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-12T20:27:17.590

在 Spring 3.1.0 中，ArgumentResolver 现在已更改为`HandlerMethodArgumentResolver`- 在此之前它曾经是`WebArgumentResolver`- 相关答案在[这里](https://stackoverflow.com/questions/12357817/upgrading-to-spring-3-1-seems-to-break-my-customwebargumentresolver/12358370#12358370)

一旦你编写了一个新的 HandlerMethodArgumentResolver ，它与你当前的实现没有太大的不同，你可以这样注册它：

```
<mvc:annotation-driven>
    <mvc:argument-resolvers>
        <bean id="sessionAttributeAnnotationResolver" class="..SessionAttributeAnnotationResolver ">
        </bean>            
    </mvc:argument-resolvers>
</mvc:annotation-driven> 
```

# vtiger - 用户权限未保存在 vtiger CRM 中

> ID：12393938
> 
> 赞同：0
> 
> 时间：2012-09-12T18:07:33.617
> 
> 标签：vtiger

我已经安装了 Vtiger CRM 并开始使用它。我正在尝试在**CRM Settings->Profiles中更改管理员和其他配置文件的权限，但在****WASP**之后没有保存任何内容，在此之前直到**PBX Manager**保存。

有人请帮助我为什么会这样。找到解决方案已经 3 天了。但帮不上忙。请帮我 。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-31T16:31:03.657

它通常必须与 php 配置，在 php.ini 文件中有一个选项：“max_input_vars”，更改默认值并增加它。我猜默认是1000，试试3000。

如果您使用的是 php 5.3，则该选项不存在，只需将其添加到 php.ini 文件中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T09:43:24.153

你的服务器上安装了 Suhosin 补丁吗？如果是，问题是**suhosin.request.max_array_depth**或**suhosin.request.max_vars**

# python - 在 Python 中获取 Windows 进程/文件描述

> ID：12393939
> 
> 赞同：0
> 
> 时间：2012-09-12T18:07:38.550
> 
> 标签：python, windows

到目前为止，我有以下代码，每次创建新进程时都会告诉我。

```
import wmi
c = wmi.WMI()
process_watcher = c.Win32_Process.watch_for("creation")
while True:
    new_process = process_watcher()
    print(new_process.Caption)
    print(new_process.ExecutablePath) 
```

这很好用，但我真正想做的是获取进程描述，因为虽然我正在寻找的文件名可能会改变，但描述不会。我在 Win32_Process 或 win32file 中找不到任何可以让我得到文件描述的东西。有人知道怎么做这个吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-30T00:14:26.897

```
while True:
try:
    new_process = process_watcher()

    proc_owner = new_process.GetOwner()
    proc_owner = "%s\\%s" % (proc_owner[0],proc_owner[2])
    create_date = new_process.CreationDate
    executable = new_process.ExecutablePath
    cmdline = new_process.CommandLine
    pid = new_process.ProcessId
    parent_pid = new_process.parentProcessId
    privileges = "N/A"
    process_log_message = "%s,%s,%s,%s,%s,%s,%s,\r\n" % (create_date,proc_owner,executable,cmdline,pid,parent_pid,privileges)
    print "1"
    print process_log_message
    log_to_file(process_log_message)
except:
    print "2"
    pass 
```

希望这可以帮助 ：）

# python - PCA 跨 numpy 3 维数组中的一组空间网格...特征向量排序？

> ID：12393943
> 
> 赞同：3
> 
> 时间：2012-09-12T18:07:56.320
> 
> 标签：python, numpy, scipy, linear-algebra, pca

我很困惑试图在一组已读入 numpy 数组的空间网格上运行 PCA。作为数组，它们看起来像这样，其中 mdata[0] 表示单个网格中的行和列的集合，每个值代表一个网格单元：

```
mdata = np.array([ [[3, 4, 6, 4],
                    [4, 9, 2, 7],
                    [8, 7, 2, 2]],

                   [[1, 3, 7, 9],
                    [3, 1, 8, 8],
                    [2, 6, 7, 5]],

                   [[1, 8, 5, 2],
                    [6, 4, 7, 3],
                    [3, 1, 4, 6]],

                   [[5, 8, 2, 4],
                    [3, 7, 7, 7],
                    [1, 4, 8, 2]],

                   [[4, 5, 6, 4],
                    [1, 7, 5, 7],
                    [2, 1, 3, 3]] ]) 
```

然后我将数组展平，以便可以在整个集合中正确计算协方差，因此输入数组如下所示：

```
[[3 4 6 4 4 9 2 7 8 7 2 2]
 [1 3 7 9 3 1 8 8 2 6 7 5]
 [1 8 5 2 6 4 7 3 3 1 4 6]
 [5 8 2 4 3 7 7 7 1 4 8 2]
 [4 5 6 4 1 7 5 7 2 1 3 3]] 
```

我需要生成一组代表主成分的输出数组（最终转换回网格）。输出数组是通过将特征向量与输入网格集（即输入数组）上的每个数组元素相乘并将它们加在一起而产生的。每个输出网格将代表一个主成分，按解释方差的降序排列。

所以最终的方程看起来像这样：

```
First principal component (uses first eigenvector array row??):
  (input_grid_1 * evec_row_1_val_1) + (input_grid_2 * evec_row_1_val_2) ... (input_grid_n * evec_row_1_val_n)

Second principal component (uses second eigenvector array row??):
  (input_grid_1 * evec_row_2_val_1) + (input_grid_2 * evec_row_2_val_2) ... (input_grid_n * evec_row_2_val_n)

etc... 
```

我的问题是......通过 numpy.linalg.eig 生成特征向量后，我不确定它们的顺序。evec[0] 中的值（见下面的输出）是否代表我应该用来计算第一个主成分输出数组的特征向量？或者我应该从底行开始（即，下面的 evec[11]）？或者特征向量是否在 numpy.linalg.eig 的输出中按列排列？

感谢您的帮助，对于本文的篇幅，我深表歉意。

这是我正在使用的一些示例代码，以及结果输出：

```
print "flattened mdata:\n", mdata2, "\n"
mdata2 -= np.mean(mdata2, axis=0)
print "mean centered data:\n", mdata2, "\n"
covar = np.cov(mdata2, rowvar=0)
print "covariance matrix:\n", covar, "\n"
eval, evec = la.eig(covar)
print "eigenvectors:\n", evec, "\n"

flattened mdata:
[[3 4 6 4 4 9 2 7 8 7 2 2]
 [1 3 7 9 3 1 8 8 2 6 7 5]
 [1 8 5 2 6 4 7 3 3 1 4 6]
 [5 8 2 4 3 7 7 7 1 4 8 2]
 [4 5 6 4 1 7 5 7 2 1 3 3]]

mean centered data:
[[ 0 -1  0  0  0  3 -3  0  4  3 -2 -1]
 [-1 -2  1  4  0 -4  2  1 -1  2  2  1]
 [-1  2  0 -2  2 -1  1 -3  0 -2  0  2]
 [ 2  2 -3  0  0  1  1  0 -2  0  3 -1]
 [ 1  0  0  0 -2  1  0  0 -1 -2 -1  0]]

covariance matrix:
[[ 1.7   0.95 -1.65 -0.6  -1\.    2\.   -0.3   0.6  -1\.   -0.55  0.65 -1.3 ]
 [ 0.95  3.2  -1.9  -3.1   1\.    1.25  0.7  -1.9  -1.5  -2.8   0.9   0.2 ]
 [-1.65 -1.9   2.3   1.2   0\.   -1.75 -0.15  0.05  1.25  0.6  -1.55  1.1 ]
 [-0.6  -3.1   1.2   4.8  -1\.   -3.5   1.4   2.7  -1\.    2.9   1.8  -0.1 ]
 [-1\.    1\.    0\.   -1\.    2\.   -1\.    0.5  -1.5   0.5   0\.    0.5   1\.  ]
 [ 2\.    1.25 -1.75 -3.5  -1\.    7\.   -4.25 -0.25  3.25  0.25 -3\.   -2.5 ]
 [-0.3   0.7  -0.15  1.4   0.5  -4.25  3.7  -0.15 -4\.   -1.8   3.15  1.45]
 [ 0.6  -1.9   0.05  2.7  -1.5  -0.25 -0.15  2.3  -0.25  2.1   0.7  -1.15]
 [-1\.   -1.5   1.25 -1\.    0.5   3.25 -4\.   -0.25  5.5   3\.   -3.75 -0.75]
 [-0.55 -2.8   0.6   2.9   0\.    0.25 -1.8   2.1   3\.    5.2  -0.1  -1.3 ]
 [ 0.65  0.9  -1.55  1.8   0.5  -3\.    3.15  0.7  -3.75 -0.1   4.3   0.15]
 [-1.3   0.2   1.1  -0.1   1\.   -2.5   1.45 -1.15 -0.75 -1.3   0.15  1.7 ]]

eigenvectors:
[[-0.05226275 +0.00000000e+00j  0.14243804 +0.00000000e+00j
   0.40669907 +0.00000000e+00j -0.08874805 +0.00000000e+00j
   0.24983235 +0.00000000e+00j -0.07788035 +0.00000000e+00j
  -0.20417938 +8.64129842e-02j -0.20417938 -8.64129842e-02j
   0.17142025 -1.53009928e-02j  0.17142025 +1.53009928e-02j
  -0.07359380 -5.42353843e-02j -0.07359380 +5.42353843e-02j]
 [ 0.01313939 +0.00000000e+00j  0.46207747 +0.00000000e+00j
   0.04053819 +0.00000000e+00j  0.24412764 +0.00000000e+00j
  -0.29669270 +0.00000000e+00j -0.11848560 +0.00000000e+00j
  -0.00129189 -1.08527235e-01j -0.00129189 +1.08527235e-01j
   0.24951441 -4.06744086e-02j  0.24951441 +4.06744086e-02j
  -0.08613229 -4.16143549e-02j -0.08613229 +4.16143549e-02j]
 [ 0.01212470 +0.00000000e+00j -0.23533069 +0.00000000e+00j
  -0.38627976 +0.00000000e+00j -0.29050062 +0.00000000e+00j
  -0.04031410 +0.00000000e+00j  0.11914628 +0.00000000e+00j
  -0.03397920 -4.04899870e-01j -0.03397920 +4.04899870e-01j
  -0.02317506 +1.11224412e-01j -0.02317506 -1.11224412e-01j
   0.16309959 +1.28363333e-02j  0.16309959 -1.28363333e-02j]
 [ 0.25764595 +0.00000000e+00j -0.49039161 +0.00000000e+00j
   0.17582472 +0.00000000e+00j -0.08694414 +0.00000000e+00j
  -0.49772683 +0.00000000e+00j  0.04915654 +0.00000000e+00j
  -0.22312499 +1.60190725e-02j -0.22312499 -1.60190725e-02j
  -0.13318403 -2.09741709e-01j -0.13318403 +2.09741709e-01j
  -0.06711105 +1.03673483e-01j -0.06711105 -1.03673483e-01j]
 [ 0.04158039 +0.00000000e+00j  0.08806516 +0.00000000e+00j
  -0.28689676 +0.00000000e+00j  0.55985795 +0.00000000e+00j
   0.16139009 +0.00000000e+00j -0.31020587 +0.00000000e+00j
   0.06748141 -1.77634044e-02j  0.06748141 +1.77634044e-02j
  -0.06824769 -3.42630421e-01j -0.06824769 +3.42630421e-01j
  -0.01037536 -1.65831604e-01j -0.01037536 +1.65831604e-01j]
 [-0.55737468 +0.00000000e+00j  0.20542936 +0.00000000e+00j
   0.32117797 +0.00000000e+00j -0.04132469 +0.00000000e+00j
  -0.38616878 +0.00000000e+00j -0.07888938 +0.00000000e+00j
  -0.18663356 -2.26138514e-01j -0.18663356 +2.26138514e-01j
  -0.48555065 +0.00000000e+00j -0.48555065 +0.00000000e+00j
  -0.05777089 +8.39094379e-02j -0.05777089 -8.39094379e-02j]
 [ 0.44645722 +0.00000000e+00j  0.09345400 +0.00000000e+00j
  -0.01958382 +0.00000000e+00j  0.00350717 +0.00000000e+00j
  -0.49307361 +0.00000000e+00j -0.19705809 +0.00000000e+00j
  -0.26393665 +1.65676777e-01j -0.26393665 -1.65676777e-01j
  -0.07097582 +1.77803457e-01j -0.07097582 -1.77803457e-01j
   0.31461793 -8.41424299e-02j  0.31461793 +8.41424299e-02j]
 [ 0.03562756 +0.00000000e+00j -0.29183500 +0.00000000e+00j
   0.34969990 +0.00000000e+00j -0.16770853 +0.00000000e+00j
   0.18499349 +0.00000000e+00j -0.27031753 +0.00000000e+00j
   0.04149287 -1.82755302e-01j  0.04149287 +1.82755302e-01j
   0.27944344 -1.37299309e-01j  0.27944344 +1.37299309e-01j
  -0.09637630 -4.39851477e-01j -0.09637630 +4.39851477e-01j]
 [-0.46659969 +0.00000000e+00j -0.23849866 +0.00000000e+00j
  -0.26877609 +0.00000000e+00j  0.24093339 +0.00000000e+00j
  -0.35050288 +0.00000000e+00j  0.44403480 +0.00000000e+00j
  -0.43610595 +0.00000000e+00j -0.43610595 +0.00000000e+00j
   0.37131095 +1.81269636e-01j  0.37131095 -1.81269636e-01j
   0.29146786 -2.22035640e-01j  0.29146786 +2.22035640e-01j]
 [-0.13939660 +0.00000000e+00j -0.51461522 +0.00000000e+00j
   0.15383834 +0.00000000e+00j  0.51033734 +0.00000000e+00j
   0.13867222 +0.00000000e+00j -0.36401539 +0.00000000e+00j
   0.19655716 +8.68943320e-02j  0.19655716 -8.68943320e-02j
  -0.16900231 +9.74521096e-02j -0.16900231 -9.74521096e-02j
  -0.20194713 +1.85123869e-01j -0.20194713 -1.85123869e-01j]
 [ 0.39116291 +0.00000000e+00j  0.04835035 +0.00000000e+00j
   0.32293099 +0.00000000e+00j  0.42167036 +0.00000000e+00j
  -0.04351453 +0.00000000e+00j  0.61425451 +0.00000000e+00j
  -0.20683758 -3.83249003e-01j -0.20683758 +3.83249003e-01j
  -0.02544963 +2.31011753e-01j -0.02544963 -2.31011753e-01j
   0.13276711 -1.26161298e-04j  0.13276711 +1.26161298e-04j]
 [ 0.16560064 +0.00000000e+00j  0.04924581 +0.00000000e+00j
  -0.38012669 +0.00000000e+00j -0.03145605 +0.00000000e+00j
   0.06088502 +0.00000000e+00j -0.20480777 +0.00000000e+00j
  -0.23192947 -1.44999255e-01j -0.23192947 +1.44999255e-01j
  -0.27861106 -9.88363770e-05j -0.27861106 +9.88363770e-05j
  -0.60558363 +0.00000000e+00j -0.60558363 +0.00000000e+00j]] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T21:02:15.710

特征向量按列排列。例如，如果你得到一个特征向量矩阵 `[[0, 1], [-1, 0]]`

你的特征向量是 V1 = [0, -1]; V2 = [1, 0]。

只需在斐波那契数字上尝试一下：

```
>>> fib = numpy.array([[1, 1],[1, 0]])
>>> numpy.linalg.eig(fib)
(array([ 1.61803399, -0.61803399]), array([[ 0.85065081, -0.52573111],
       [ 0.52573111,  0.85065081]])) 
```

第一个数组是特征值，下一个包含列中的特征向量。比较： http: [//mathproofs.blogspot.com/2005/04/nth-term-of-fibonacci-sequence.html](http://mathproofs.blogspot.com/2005/04/nth-term-of-fibonacci-sequence.html)

祝你好运！

# php - 使用下拉列表选择作为 mySQL 查询参数

> ID：12393945
> 
> 赞同：0
> 
> 时间：2012-09-12T18:08:14.313
> 
> 标签：php, javascript, jquery, mysql, ajax

几天前我曾问过一个类似的问题，但我认为我一次尝试做很多事情。我希望有人可以帮助我开始这件事。

我有两个下拉列表，一个将填充年份（2012、2011 等），我有一些名为“db_2012”、“db_2011”等的 mySQL 数据库。在这些数据库中是代表月份的表。

我希望用户选择一年，然后使用该选择来查询正确的数据库并返回一个表名列表，该列表将用于填充第二个下拉列表。然后单击“查看结果”按钮以查询所选表并显示结果。

我将其放在 wordpress 网站上，并使用我创建的 php 模板文件。这对我来说仍然是新的，到目前为止我所拥有的也没有像我想要的那样工作，它基本上是设置现在你选择一年并选择一个月（不是从数据库填充）并单击一个按钮。它进行查询并显示我的表，但我需要这个解决方案更加动态并且如上所述工作。谢谢您的帮助。

```
echo '<form action="" method="post">';
echo'<select name="years" id="years">';
foreach($yearList as $year){
    echo'<option value="'.$year.'">'.$year.'</option>';
}
echo'</select><br />';

echo '<select name="monthList" id="months">';
foreach($monthList as $month) {
    echo'<option value="'.$month.'">'.$month.'</option>';
}
echo '</select>';
echo '<input type=\'submit\' value=\'See Results\'>';
echo '</form'> 
```

$yearList 和 $monthList 只是预先填充的数组。所以现在从这里我想点击查看结果按钮并使用下拉选择中的参数查询我的 sql 数据库。

```
$database = $_POST['yearList'];
$month = $_POST['monthList'];

$wpdbtest_otherdb = new wpdb('Username', 'Password', $database, 'localhost');

$qStr = "SELECT * FROM $month";
$myResults = $wpdbtest_otherdb->get_results($qStr, OBJECT); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T19:20:28.413

听起来您想将 AJAX 调用发送到单独的 php 页面以进行安全和处理，然后让 PHP 返回 XML，您通过 AJAX 回调将其解析回第二个选择框。它可能有点混乱，但它允许您检查用户可能注入的奇怪表单值。

编辑：PHP 将接收您的 AJAX 参数作为 $_GET 或 $_POST 数组的一部分。从那里，您可以进行检查和 db 调用（或不调用），然后添加`header("Content-Type:text/xml");`以便服务器将其发送回正确的标头。之后，您需要回显您希望 JavaScript 接收的 XML 格式的数据。如果请求应该通过，请记住不要回显除 XML 之外的任何内容。

# jquery - 如何设置我的点击回调函数

> ID：12393948
> 
> 赞同：0
> 
> 时间：2012-09-12T18:08:32.030
> 
> 标签：jquery

我正在尝试在单击时添加回调函数（当用户第二次单击按钮时）。

我有

```
$('#toggle').live('click', function(){
        $this=$(this);
        $this.attr('id', 'detail')
        turn()
    }, function(){
        $this.attr('id','detail_close')
        turn()
    }) 
```

我似乎无法将 id 更改为 detail_close 并在第二次单击后再次调用 turn() 。有小费吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T18:12:42.983

```
 var count = 0; // a counter
   $(document).on('click', '#toggle', function(){

        $this = $(this);
        $this.prop('id', 'detail');  // may use prop(), instead of attr()

        count++;  // increase counter value

        // checking for counter value
        if(count > 1) {
             // do something on second click

             $this.prop('id', 'detail_close'); // change id
             turn();  // call turn()

             count = 0; // reset the counter
        }
    }); 
```

由于`.live()`已弃用，因此为了使委托事件处理使用`.on()`如下方法：

```
$(StaticParent).on(eventName, target, handlerFunction) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T18:09:52.553

```
$(document).on('click', '#toggle', function(){
    $this=$(this);
    if($this.prop('id') == 'detail'){
        $this.prop('id', 'detail_close');
        turn();
    }else{
        $this.prop('id', 'detail');
        turn();
    }
}); 
```

我们在最新版本的 jQuery 中使用 .on 和 .prop。

# actionscript-3 - onSeekPoint 怪异

> ID：12393952
> 
> 赞同：1
> 
> 时间：2012-09-12T18:08:45.177
> 
> 标签：actionscript-3, flash, apache-flex, netstream

我有一个 NetStream，它被正确地置于数据生成模式......一切正常，当我执行以下操作时，我得到 onSeekPoint() 事件：

**例 1**

```
public function setupStream() {
     netStream.client = {};
     netStream.client.onSeekPoint = this.onSeekPoint;
     netStream.client.onMetaData = this.onMetaData;
}

public function onSeekPoint(... args) {...}
public function onMetaData(... args) {...} 
```

但是，我需要为也具有 onSeekPoint 的客户端创建一个新类，而不是将其全部保存在该父类中。它不起作用。奇怪的是，onMetaData 回调确实......它是这样的：

**例 2**

```
package {
   public class CustomClient {
       public function CustomClient() {
       }
       public function onSeekPoint(... args) {...}
       public function onMetaData(... args) {...}
   }
}

public function setupStream() {
   var myClient:CustomClient = new CustomClient();
   netStream.client = CustomClient;
} 
```

我想也许我错过了一些小问题 - 但真正让我害怕的是，这完全可以正常工作......

**例 3**

```
package {
   public class CustomClient {
       public function CustomClient() {
       }
       public function onSeekPoint(... args) {...}
       public function onMetaData(... args) {...}
   }
}

public function setupStream() {
   var myClient:CustomClient = new CustomClient();
   netStream.client = {};
   netStream.client.onSeekPoint = myClient.onSeekPoint;
   netStream.client.onMetaData = myClient.onMetaData
} 
```

我想“如果它没有坏就不要修复它”可能适用于此，但我有点担心让一些我不理解的代码消失，并担心它可能会在我最不期待的时候回来咬我;)

我的问题是：

1.  为什么第二个示例不适用于 seekPoints？
2.  *那么*，为什么第二个示例适用于元数据？
3.  为什么第三个示例解决了所有问题？

**编辑**：如果不清楚，不同的类正确地位于单独的文件中，等等。它们只是在此处的示例中组合在一起，以使其更容易消化

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:46:05.997

在你的第二个例子中，你有这个：

```
var myClient:CustomClient = new CustomClient();
netStream.client = CustomClient; 
```

但不应该是这样的：

```
var myClient:CustomClient = new CustomClient();
netStream.client = myClient; 
```

# ruby - 树莓派上的 ruby 和 selenium-webdriver -> 协议不支持的地址系列 - socket(2) (Errno::EAFNOSUPPORT)

> ID：12393953
> 
> 赞同：1
> 
> 时间：2012-09-12T18:08:45.237
> 
> 标签：ruby, exception, selenium-webdriver, raspberry-pi

我想在我的 Raspberry Pi 上运行一个 ruby​​ 脚本。我已经通过 rvm 安装了 ruby​​。我确定，我使用的是正确的版本：

```
$ rvm current
ruby-1.9.3-p194 
```

当我运行我的脚本时，我得到以下信息：

```
./test.rb 
/home/pi/.rvm/gems/ruby-1.9.3-p194/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/common/port_prober.rb:25:in `initialize': Address family not supported by protocol - socket(2) (Errno::EAFNOSUPPORT)
from /home/pi/.rvm/gems/ruby-1.9.3-p194/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/common/port_prober.rb:25:in `new'
from /home/pi/.rvm/gems/ruby-1.9.3-p194/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/common/port_prober.rb:25:in `block in free?'
from /home/pi/.rvm/gems/ruby-1.9.3-p194/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/common/port_prober.rb:23:in `each'
from /home/pi/.rvm/gems/ruby-1.9.3-p194/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/common/port_prober.rb:23:in `free?'
from /home/pi/.rvm/gems/ruby-1.9.3-p194/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/common/port_prober.rb:5:in `above'
from /home/pi/.rvm/gems/ruby-1.9.3-p194/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/chrome/service.rb:33:in `default_service'
from /home/pi/.rvm/gems/ruby-1.9.3-p194/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/chrome/bridge.rb:14:in `initialize'
from /home/pi/.rvm/gems/ruby-1.9.3-p194/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/common/driver.rb:37:in `new'
from /home/pi/.rvm/gems/ruby-1.9.3-p194/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/common/driver.rb:37:in `for'
from /home/pi/.rvm/gems/ruby-1.9.3-p194/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver.rb:65:in `for'
from ./test.rb:82:in `block in <main>'
from ./test.rb:54:in `each'
from ./test.rb:54:in `<main>' 
```

任何想法，有什么问题？我试过重新启动，这并不能解决问题...

# php - 比较数组的元素并基于比较检索数组数据

> ID：12393959
> 
> 赞同：0
> 
> 时间：2012-09-12T18:09:18.713
> 
> 标签：php, arrays, multidimensional-array, foreach

我有两个数组，有一个元素是第一个和第二个数组中常见的“名称”。现在，如果第一个数组值与第二个匹配，我想从第二个数组中检索值。

第一个数组的代码：

```
 $rs = array();
    foreach ( $ex_array as $data ) {

                $rs[] = array( 'name' => $data['name'] );

            } 
```

第二个数组：

```
$entries_data = array();
foreach ( $array as $entry ) {

            $name = $entry['name']['value'];
            $email = $entry['email']['value'];

            $entries_data[] = array(
                'name' => $name,
                'email' => $email
            );
        } 
```

问题是，第一个数组中只有多个名称，然后我必须将第一个数组名称与第二个数组进行比较，如果匹配，则从第二个数组中检索整个数据以获取特定名称。我试图通过`in_array`在第二个数组中使用搜索名称的函数来做到这一点，但无法获取整个值。任何建议或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-09T13:17:51.837

`is_array()`用于不是您的情况的一维数组使用此函数取自 php 文档注释并由我编辑为您的示例工作

```
function in_multiarray($elem, $array)
    {
        $top = sizeof($array) - 1;
        $bottom = 0;
        while($bottom <= $top)
        {
            if($array[$bottom]['name'] == $elem)
                return true;
            else 
                if(is_array($array[$bottom]['name']))
                    if(in_multiarray($elem, ($array[$bottom]['name'])))
                        return true;

            $bottom++;
        }        
        return false;
    } 
```

# emacs - 键绑定不起作用？如何配置

> ID：12393964
> 
> 赞同：2
> 
> 时间：2012-09-12T18:09:30.147
> 
> 标签：emacs, octave

我在 Linux Mint Maya 上使用 Emacs 24\. 和 Octave 3.6.3

我已经设置了我的初始化文件，一切正常。Mx run-octave 给了我劣质的八度，.m 文件在八度模式下自动打开。

但我似乎无法让键绑定工作？当我处于八度模式时，我同时按“Ctrl”和“c”，然后按“i”，emacs 告诉我 Cc i 未定义？

有人可以帮忙吗？我只想轻松发送线路

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T18:18:44.857

最好查看源文件。以下是为八度模式定义快捷键的方式：

```
(defvar octave-mode-map
  (let ((map (make-sparse-keymap)))
    (define-key map "`" 'octave-abbrev-start)
    (define-key map "\e\n" 'octave-indent-new-comment-line)
    (define-key map "\M-\C-q" 'octave-indent-defun)
    (define-key map "\C-c\C-b" 'octave-submit-bug-report)
    (define-key map "\C-c\C-p" 'octave-previous-code-line)
    (define-key map "\C-c\C-n" 'octave-next-code-line)
    (define-key map "\C-c\C-a" 'octave-beginning-of-line)
    (define-key map "\C-c\C-e" 'octave-end-of-line)
    (define-key map [remap down-list] 'smie-down-list)
    (define-key map "\C-c\M-\C-h" 'octave-mark-block)
    (define-key map "\C-c]" 'smie-close-block)
    (define-key map "\C-c/" 'smie-close-block)
    (define-key map "\C-c\C-f" 'octave-insert-defun)
    ;; FIXME: free C-h so it can do the describe-prefix-bindings.
    (define-key map "\C-c\C-h" 'info-lookup-symbol)
    (define-key map "\C-c\C-il" 'octave-send-line)
    (define-key map "\C-c\C-ib" 'octave-send-block)
    (define-key map "\C-c\C-if" 'octave-send-defun)
    (define-key map "\C-c\C-ir" 'octave-send-region)
    (define-key map "\C-c\C-is" 'octave-show-process-buffer)
    (define-key map "\C-c\C-ih" 'octave-hide-process-buffer)
    (define-key map "\C-c\C-ik" 'octave-kill-process)
    (define-key map "\C-c\C-i\C-l" 'octave-send-line)
    (define-key map "\C-c\C-i\C-b" 'octave-send-block)
    (define-key map "\C-c\C-i\C-f" 'octave-send-defun)
    (define-key map "\C-c\C-i\C-r" 'octave-send-region)
    (define-key map "\C-c\C-i\C-s" 'octave-show-process-buffer)
    ;; FIXME: free C-h so it can do the describe-prefix-bindings.
    (define-key map "\C-c\C-i\C-h" 'octave-hide-process-buffer)
    (define-key map "\C-c\C-i\C-k" 'octave-kill-process)
    map)
  "Keymap used in Octave mode.") 
```

如您所见，您必须使用`C-c C-i l`发送一条线

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T18:16:05.437

我认为您阅读的文档`octave-mode`已经过时。您可能需要`C-c C-i`用作前缀而不是`C-c i`. 要获得完整的命令，您需要输入另一个字符，例如`r`或`C-r`发送区域。

此更改很可能是为了符合 emacs 规范。Emacs为用户保留任何一个字符`C-c <char>`的键。`<char>`因此`octave-mode`，首先不应该使用这样的密钥。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T21:56:32.703

禁用一些次要模式，也许有一些代码定义喜欢`(define-key xx-map "\C-c i" nill)`并受模式挂钩影响

# javascript - CSS中带有垂直文本的垂直标签

> ID：12393967
> 
> 赞同：0
> 
> 时间：2012-09-12T18:09:40.250
> 
> 标签：javascript, html, css

我有一系列 .jpeg 菜单选项卡，其中包含垂直文本，并且垂直定向（高度 > 宽度）。尝试创建垂直选项卡，使它们从屏幕的顶部依次排列到底部，但是在阅读了一些文档之后，我仍然不确定从哪里开始。有小费吗？抱歉这个非常模糊的问题，但大多数搜索结果都假设您想要一个带有水平文本的垂直菜单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T19:40:06.987

您可以`word-wrap: break-word;`结合使用窄`width`值来强制您的文本为每个字母换行：http: [//jsbin.com/ominus/1/edit](http://jsbin.com/ominus/1/edit)

旋转会更好看，但这是另一种选择！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T18:20:33.887

如果浏览器兼容性不是优先考虑的，您可以尝试使用 CSS3：

```
.rotated-text {
    -webkit-transform: rotate(-90deg); 
    -moz-transform: rotate(-90deg); 
    -o-transform: rotate(-90deg);   
    transform: rotate(-90deg);  
    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3); /* Should work on IE9+ */
} 
```

工作示例：http: **[//jsfiddle.net/C3qrT/](http://jsfiddle.net/C3qrT/)**

然后，您必须根据需要对齐文本。

# smalltalk - 如何在 Morphic 中制作行进的蚂蚁边界？

> ID：12393970
> 
> 赞同：3
> 
> 时间：2012-09-12T18:09:42.687
> 
> 标签：smalltalk, squeak, pharo, morphic, marching-ants

我正在寻找 Morphic 中的行军蚂蚁边界或线：

![行军蚂蚁样本](../Images/905577b7a47d109e3fb363e6d9b38088.png)

[维基百科描述了一种可能的算法](http://en.wikipedia.org/wiki/Marching_ants)：

> 实现此动画的最简单方法是使用包含对角线的钢笔图案绘制选区。如果选区轮廓只有一个像素厚，则图案中的切片将看起来像一条虚线，只需将图案横向移动一个像素并重新绘制轮廓即可轻松实现动画效果。

由于可能没有现成的，有没有人提示我如何创建这样的边界或线？

（作为 GIF 动画的行军蚂蚁图案[由 Uli Kusterer 在 CC 下授权](http://en.wikipedia.org/wiki/File:Marching_ants_sample_anim.gif)）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T15:19:29.637

实际上，Morphic 确实有它：

```
(PolygonMorph
    vertices: Rectangle fromUser corners
    color: Color transparent
    borderWidth: 2
    borderColor: Color black)
            dashedBorder: {10\. 10\. Color white. 0\. 1};
            openInHand 
```

由于这是基于多边形的，它不仅可以是矩形，还可以是任何形状。

# jquery - JQuery日期类型，Sybase日期类型发送到CF函数

> ID：12393971
> 
> 赞同：0
> 
> 时间：2012-09-12T18:09:42.863
> 
> 标签：jquery, sql, coldfusion, sybase

我有一个 Sybase SP，它将日期作为唯一参数并返回有关订单的信息。我从 CF 页面上的 JQuery 日期选择器获取日期 - 格式为 yy-mm-dd。当没有输入时，SP 默认为 getDate()。当我在表格上输入日期时，一切正常。当我不发送日期时 - 日期字段留空 - 我收到一个 CF 错误，告诉我参数不是日期类型。我知道 SP 正在发送一个日期时间值，但我怎样才能让 CF 函数识别它？

在 SP...

```
declare @order_dt datetime 

If @order_dt IS NULL
BEGIN
SELECT @order_dt = getDate()
END 
```

在cfc...

```
<cfargument name="order_dt" type="date" required="true" hint="order date to search for" > 
```

和

```
 <cfprocparam type="In" cfsqltype="CF_SQL_DATE" dbvarname="@order_dt" value="#order_dt#" null="No"> 
```

在 .cfm 页面上...

```
<!--JQuery datepicker  -->
<script type="text/javascript">
   $(function() {
           $("#datepicker").datepicker({ dateFormat: "yy-mm-dd" }).val()
   }); 
```

表格如下所示：

```
<form id="xxxxForm">
<label for="date1">Pick a Date... </label>
<br>
<p><input type="text" id="datepicker" value="" name="date1"></p>
Then choose 'Search'...<br>
<input type="submit" name="submit" value="Search">
<br>
<br>

</form> 
```

我怎样才能让 CF 认识到这是一个很好的价值？我在想，如果我将@order_dt 声明为只是一个日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T19:17:57.590

```
> <cfargument name="order_dt" type="date" required="true" 
```

当您将日期字段留空时，提交的值为空字符串“”。空字符串不是有效的`date`。这就是为什么当您尝试调用该函数时 CF 会抱怨的原因。

如评论中所述，您可以使用`required="false"`or `default="#now()#"`。但要使其按预期工作，您*还*必须在日期留空时省略参数。如果您将任何内容传递给函数，即使是空字符串，`default`也不会启动。但验证会。所以你仍然会得到同样的错误。

另一种选择是将参数类型更改为`string`. 然后在函数内部进行验证。如果提供的值不是有效日期，请将其替换为`now()`

```
 <cfargument name="order_dt" type="string" default="">

   <!--- simplistic date validation for illustration --->
   <cfif NOT isDate(arguments.order_dt)>
       <cfset arguments.order_dt = now()>
   </cfif> 
```

或者只是传递`NULL`给存储过程

```
 <cfargument name="order_dt" type="string" default="">
   ...

   <cfprocparam type="In" value="#arguments.order_dt#" 
         null="#not isDate(arguments.order_dt)#" ....> 
```

顺便说一句，`dbvarname`不久前被弃用了。在最近的版本中，它什么也不做。仅支持位置参数。

# android - Android - 有没有办法拥有 2 列行布局并告诉用户按下哪一列？

> ID：12393973
> 
> 赞同：0
> 
> 时间：2012-09-12T18:09:51.150
> 
> 标签：android, android-layout

在 2 列行布局中，有没有办法判断用户单击或按下了哪些列？

如果第二列可以是一个按钮，那就更好了，但我不知道如何把它变成一个按钮。这是我正在做的事情：

```
private List<HashMap<String, String>> fillMaps;
private SimpleAdapter simple_adapter;
ListView list = null; 
```

然后：

```
 list = (ListView) findViewById(android.R.id.list);
    ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

    // My data
    fillMaps = new ArrayList<HashMap<String, String>>();

    simple_adapter = new SimpleAdapter(this, fillMaps, R.layout.comment_list,
            new String[] {"train", "from"}, 
            new int[] {R.id.TRAIN_CELL,  R.id.FROM_CELL });

    // This was the middle item R.id.FROM_CELL,
    list.setAdapter(simple_adapter);        
    list.setTextFilterEnabled(true); 
```

我像这样填充列表：

```
for ( int i = 0; i < obj.length(); i++ )
                            {
                                JSONObject o = obj.getJSONObject(i);
                                HashMap<String, String> map = new HashMap<String, String>();

                                ... Some variables set here...

                                map.put("train", comment);
                                map.put("from", "Edit");

                                fillMaps.add(map);

                                discussion.add( d );
                            }
                        }

                        simple_adapter.notifyDataSetChanged(); 
```

这是comment_list.xml

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout
 xmlns:android="http://schemas.android.com/apk/res/android"
 android:paddingTop="4dip"
 android:paddingBottom="6dip"
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"
 android:textSize="13sp"
 android:weightSum="1.0"
 android:orientation="horizontal">

 <TextView android:id="@+id/TRAIN_CELL"
     android:textSize="16sp"
     android:layout_height="wrap_content"
     android:layout_width="275dip"/>

  <TextView android:id="@+id/FROM_CELL"
     android:textSize="16sp"
     android:textStyle="bold"
     android:layout_height="wrap_content" 
     android:layout_width="50dip"/>

</LinearLayout> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T18:36:10.580

你可以使用这样的东西

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
 xmlns:android="http://schemas.android.com/apk/res/android"
 android:paddingTop="4dip"
 android:paddingBottom="6dip"
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"
   android:textSize="13sp"
 android:weightSum="1.0"
 android:orientation="horizontal">
    <Button
        android:id="@+id/TRAIN_CELL"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
         android:textSize="16sp"
 android:layout_height="wrap_content" />

    <Button
        android:id="@+id/FROM_CELL"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/label_grid_view" />
</LinearLayout> 
```

如果您有任何问题，请回来

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T18:12:03.870

尝试在行的两列中使用一些可点击的项目并处理这些点击事件。

假设在这两列中给出两个按钮并向它们添加 setOnClickListeners，最后检查在活动中单击哪个按钮

# objective-c - AFNetworking - 跟踪我的查询

> ID：12393975
> 
> 赞同：0
> 
> 时间：2012-09-12T18:09:54.537
> 
> 标签：objective-c, ios, uiviewcontroller, afnetworking

如何跟踪我的 UIViewControllers 之间的所有 AFNetworking 查询。

我必须在我的 AppDelegate 文件上创建一个 NSOperationQueue 吗？

/ 莫腾

# arcgis - 在 ArcGIS Server 10 中将 Near 工具发布为 GP 服务

> ID：12393976
> 
> 赞同：0
> 
> 时间：2012-09-12T18:10:00.460
> 
> 标签：arcgis, arcgis-server

我很好奇是否有人成功地将 Near Tool 发布为服务。此工具位于分析工具 > 接近度中。该工具会更新它没有输出层的输入层。我不确定这是否可能或是否有解决方法。

欣赏任何想法。

谢谢杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T18:21:12.963

杰伊，

所有工具都有输出。如果您在用户界面中看不到一个，那是因为它被认为是派生参数/输出。有关更多信息，请查看[http://resources.arcgis.com/en/help/main/10.1/index.html#//018z00000063000000](http://resources.arcgis.com/en/help/main/10.1/index.html#//018z00000063000000)。

将工具放入模型后，您可以明确指定输入和输出。完整的共享工作流程在[http://resources.arcgis.com/en/help/main/10.1/index.html#//005700000047000000上通过屏幕截图进行了概述和详细说明](http://resources.arcgis.com/en/help/main/10.1/index.html#//005700000047000000)

*   托马斯

# javascript - 如何使纯文本在单击时充当按钮？

> ID：12393990
> 
> 赞同：3
> 
> 时间：2012-09-12T18:10:58.603
> 
> 标签：javascript, html, button

我想知道将纯文本用作按钮（使用最少的 html）的最简单方法是什么。文本： `<li class="indiv-nav" ><a target="_blank" href="/">About</a></li>`

我需要即将执行的文本：

`<div id="button"><input type="submit" value="Press me please!" /></div>`

抱歉，如果这是一个“愚蠢”的问题，但我仍在学习，我发现没有比我从谷歌搜索中找到的解决方案更“简单”的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T18:16:18.733

尝试

```
<a href="javascript: void(0)" id="button">Submit</a> 
```

jQuery

```
$(function(){
    $("#button").bind("click",function(){
        $("#idOfYourForm").submit();  // consider idOfYourForm `id` of your form which you are going to submit
    });
}); 
```

JavaScript

```
document.getElementById("button").onclick = function(){
    document.getElementById("idOfYourForm").submit();
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T18:19:45.050

你可以尝试这样的事情（没有 jQuery），但你需要一个**表单**标签：

```
<form name="myform">
<span onclick="document.myform.submit();">submit this</span> 
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T18:20:55.047

取决于您想做什么以及您可以使用什么解决方案。

常规按钮：

```
$("li.indiv-nav a").click(function(){
          /* do something here*/
          window.location = 'about.html';
    }); 
```

或提交表格：

```
$("li.indiv-nav a").click(function(){
          $('#formid').submit();  
    }); 
```

查看一个[jsFiddle](http://jsfiddle.net/WPXmX/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-12T18:14:05.510

您可以使用 CSS`appearance`属性。

将其设置`appearance:button;`为您的链接。

[**工作演示**](http://jsfiddle.net/suw8R/2/)

或者

（备用）=> [**使按钮看起来像一个链接**](http://jsfiddle.net/suw8R/6/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-12T18:17:58.970

```
form.submit() 
```

您需要找到一种方法来引用您要提交的表单，但是一旦您有了表单对象，您就可以调用`.submit()`来提交它。

然后您可以将其添加为`onclick`属性，或稍后绑定它，但这基本上是您想要的。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-12T18:18:02.713

我不确定你所说的像一个按钮是什么意思，但你总是可以使用 CSS 来设置它的样式。如果这就是你的意思，只需给它圆角和悬停效果。[你可以在这里](http://www.usabilitypost.com/2012/01/10/pressed-button-state-with-css3/)了解更多。

但是，如果您的意思是要禁用链接并执行其他操作，则可以使用 javascript 执行此操作。只需包含一个 javascript 文件，并防止链接的默认操作。像：

```
$(function(){
  $('a').click(function(event){
    event.preventDefault();
    //do what you want here
  }):
}); 
```

# vb.net - 在 vb.net 中获取客户端 IP

> ID：12393995
> 
> 赞同：3
> 
> 时间：2012-09-12T18:11:09.290
> 
> 标签：vb.net

我正在尝试使用 vb.net 获取客户端 ID。我的代码如下：

```
Partial Class foo
  Inherits System.Web.UI.Page
  Private ipv4 As New clsIPv4
  Dim ref As String = 0   

  Dim client_ip As String
  client_ip = Request.UserHostAddress()
  Dim myHost As String = System.Net.Dns.GetHostName()
  client_ip = ipv4.ResolveAddress(myHost) 
```

此代码正在返回我的IP地址列表（即182.50.130.143; 118.139.172.1; 118.139.172.3; 118.139.172.4; 118.139.172.5; 118.139.172.7; 118.139.172.8; 118.139.172.9; 118.139.172.9; 118.139.172.9 ; 118.139.172.10; 118.139.172.11; 118.139.172.12; 118.139.172.13; 118.139.172.14; 118.139.172.15; 118.139.172.16; 118.139.172.17; 118.139.172.18; 118.139.172.19; 118.139.172.20; 118.139.172.21; 118.139 .172.22;118.139.172.23;118.139.172.24;118.139.172.25;118.139.172.26;118)。

请指导我哪里错了

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-12T18:23:07.370

如果您使用的是 ASP.NET，则可以使用：`Request.UserHostAddress` 来获取您的客户端 IP 地址。

但是如果你使用windows应用程序获取本地IP地址，实际上你可能会收到多个IP地址！在这种情况下，如果您想获得一个您知道 IP 地址的 netid 部分的特定地址，您可以将所有 IP 地址与相应的 netid 地址进行比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-22T18:56:24.430

这对我来说非常有用

System.Net.Dns.GetHostAddresses(System.Net.Dns.GetHostName()).GetValue(0).ToString()

# javascript - 循环表单中的所有文本字段并转换为十进制/货币

> ID：12393997
> 
> 赞同：0
> 
> 时间：2012-09-12T18:11:16.963
> 
> 标签：javascript, jquery

我在一个表单中有 12 个字段，我想遍历所有这 12 个文本字段并将这些字段中的值转换为十进制/货币。这 12 个（1 月到 12 月）字段仅为数字（货币 US$）。

最后，在另一个字段中显示：

```
txtPendingBalance.value = TotalValue.text - (Sum(Field1..12)) 
```

最好的方法是什么？jQuery？纯js？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T18:19:08.103

下面的代码应该做到这一点。“totalbuttonID”应该是按下按钮的 ID 以合计输入。总计的输入需要具有 addToTotal 类。

```
$('#totalbuttonID').click(function() {
    val total=0.0;
    $('.addToTotal').each(function(){
         total+=parseFloat($(this).val())
    })
    $('#txtPendingBalance').val(parseFloat($('#TotalValue').val())-total);
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T19:53:40.600

检查这个示例[FIDDLE](http://jsfiddle.net/sushanth009/uThjm/)

```
$(function() {
    $('#btn1').on('click', function() {
        var $textboxes = $('.a input[type=text]');
        var $balance = $('#totalbalance') ;
        var $pending = $('#pendingbalance');

        var tot = 0;
        $.each($textboxes , function(i){
           tot += parseFloat($(this).val());           
        })
        var pending = parseFloat( parseFloat($balance.val()) - tot );    
        $pending.val( parseFloat(pending).toFixed(2));

    });
});​ 
```

# html - onchange 处理程序阻止调用 href 方法

> ID：12393998
> 
> 赞同：0
> 
> 时间：2012-09-12T18:11:16.917
> 
> 标签：html, javascript-events

我有一个带有一个输入字段的简单表单。输入字段有一个 onchange 事件处理程序。如果我在字段中输入一个值，然后直接单击完成按钮以使输入字段不会失去焦点，我的 onchange 处理程序会被调用，但我的 href 方法不会。

任何想法为什么？我花了几个小时试图弄清楚这一点，但到目前为止还没有任何运气。

下面是示例代码。

```
<html>
   <head>
      <script language="Javascript">
      function validateInput()
      {
         alert("validateInput()");
        return true;
      }

      function setEdited()
      {
         alert("setEdited()");
         return true;
      }
      </script>
   </head>

   <body>
      <form name="my_form" method="post" action="next_page.html">
         <table width="100%" border="0" cellspacing="2" cellpadding="5">
            <tr>
              <td>field 1</td>
              <td><input type="text" name="field_1" size="20" value="abc" onchange="setEdited()"/></td>
            </tr>
         </table>
         <table border="0" cellspacing="0" cellpadding="0" width="100%" >
            <tr>
               <td align="right" nowrap >&nbsp;<a href="javascript:validateInput()">Done</a>        </td>
               <td align="right" nowrap >&nbsp;<a href="javascript:window.close()" >Cancel</a>&nbsp;</td>
            </tr>
          </table>
      </form>
   </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T18:13:33.450

如果我理解正确，您想在单击链接时调用这些方法。href 是一个带有 url 的属性。href 属性不是事件处理程序。试试 onclick 属性。

```
<td align="right" nowrap="nowrap" > <a onclick="validateInput()">Done</a> </td>
<td align="right" nowrap="nowrap" > <a onclick="window.close()" >Cancel</a> </td> 
```

# powershell - 在命令中使用变量 (PowerShell)

> ID：12393999
> 
> 赞同：8
> 
> 时间：2012-09-12T18:11:21.630
> 
> 标签：powershell, variables, string-interpolation, quoting

```
$computer = gc env:computername

# Argument /RU '$computer'\admin isn't working.
SchTasks /create /SC Daily /tn "Image Verification" /ST 18:00:00 /TR C:\bdr\ImageVerification\ImageVerification.exe /RU '$computer'\admin /RP password 
```

基本上我需要在计划任务中提供计算机名称...

先感谢您！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-12T18:14:27.937

单引号字符串不会扩展 PowerShell 中的变量。尝试使用双引号字符串，例如：

```
"$computer\admin" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-19T21:54:52.377

为了补充[Keith Hill 的有用答案](https://stackoverflow.com/a/12394041/45375)，提供更多信息：

**`"$computer\admin"`和不带*引号*的形式 ,都`$computer\admin`可以工作**，因为不带引号的字符串参数被*隐式*处理为好像它们被**`"..."`- 括起来**（*双*引号），即作为**执行*****字符串插值的*****[*可扩展字符串*](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_Quoting_Rules#double-quoted-strings)***（用它们的值替换嵌入的变量引用和表达式），如与*不*解释其内容的[*逐字字符串*](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_Quoting_Rules#single-quoted-strings)（**`'...'`**,*单*引号）相反。*

 ****如有疑问，请`"..."`显式**使用，尤其是当字符串包含元字符`|`时`<`

有关如何将不带*引号*的标记解析为命令参数的完整规则，请参阅[此答案](https://stackoverflow.com/a/41254359/45375)。

**陷阱**：

您尝试的***部分*引用：**

> `'$computer'\admin`

即使纠正为**`"$computer"\admin`**使插值工作，**也*不会*起作用**，因为 PowerShell - 也许令人惊讶 - 然后将值`$computer`和逐字字符串`\admin`作为***两个*参数**传递。**只有当带有部分引用的复合字符串以未引用*的字符串开头时，*它才会被识别为*单个*参数**（例如`$computer"\admin"`可以工作） - 请参阅[此答案](https://stackoverflow.com/a/65380907/45375)以获取更多信息。

另一个值得注意的缺陷是，**只有*独立的*变量引用（例如`$computer`和`$env:COMPUTERNAME`）才能按原样嵌入`"..."`**; 要**嵌入一个*表达式***（包括属性访问和索引访问）**或*命令***，您需要**将它们包含在`$(...)`**子[表达式运算符](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_Operators#subexpression-operator--)中。例如，要嵌入表达式的值`$someArray[0]`或`$someObj.someProp`可扩展的字符串，您必须使用`"$($someArray[0])"`或`"$($someObj.someProp)"`- 请参阅[此答案](https://stackoverflow.com/a/40445998/45375)以获取完整规则。**