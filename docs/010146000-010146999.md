# StackOverflow 问答 10146000-10146999

# css - 如何在 Ext Js 面板中旋转三角形折叠图标？

> ID：10146006
> 
> 赞同：0
> 
> 时间：2012-04-13T18:06:08.147
> 
> 标签：css, icons, panel, collapse, extjs4.1

有没有办法在面板（[http://i.imgur.com/2ZvKd.png](http://i.imgur.com/2ZvKd.png)）中旋转折叠图标？由于方向有点误导，因为面板折叠的方向与图标指示的方向相反。

```
 defaults: {
            collapsible: true,
            animFloat: true,
            autoHide: true,
            cmargins: '5 5 5 5'
        },
        items:
        [{
            xtype: 'createreportview',
            bodyStyle:{ padding: '10px'},
            minHeight:280,
            flex: 0.40
         },
         {
             xtype: 'splitter',
             collapseTarget:'prev'
         },
         {
             xtype: 'resultsview',
             flex: 0.60
        }]
} 
```

有 2 个面板，第二个面板（结果视图）上的折叠图标是上面发布的图像中显示的一个，也是我试图修复的那个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T18:31:32.630

父容器的布局是什么？我认为您可以使用`layout: border`, 并`region: south`为您指定底部面板，它将具有向下箭头。

至于尝试修复您的确切样本 - 尝试`collapsible: true`从`defaults`底部面板定义内部移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T18:53:50.463

您可以更改图像的背景位置。这是所有工具图像的精灵：http: [//dev.sencha.com/deploy/ext-4.0.7-gpl/resources/themes/images/default/tools/tool-sprites.gif](http://dev.sencha.com/deploy/ext-4.0.7-gpl/resources/themes/images/default/tools/tool-sprites.gif)

如果您访问[http://dev.sencha.com/deploy/ext-4.0.7-gpl/examples/layout/border.html](http://dev.sencha.com/deploy/ext-4.0.7-gpl/examples/layout/border.html)并检查箭头元素（面板上的向上和向下箭头，您可以看到背景 -在 css 中设置的位置值。

对于向下箭头的位置：

```
x-tool-expand-top, .x-tool-collapse-top {
    background-position: 0 -210px;
} 
```

向上箭头的位置：

```
.x-tool-over .x-tool-expand-bottom, .x-tool-over .x-tool-collapse-bottom {
    background-position: -15px -195px;
} 
```

您可以将 css（使用在 ext 的 css 文件之后加载的样式表）更新为以下内容以切换它们（只需切换背景位置）：

```
.x-tool-expand-top, .x-tool-collapse-top {
    background-position: -15px -195px;
}

.x-tool-over .x-tool-expand-bottom, .x-tool-over .x-tool-collapse-bottom {
    background-position: 0 -210px;
} 
```

# c++ - MinGW的C ++链接器编程错误

> ID：10146013
> 
> 赞同：0
> 
> 时间：2012-04-13T18:06:31.453
> 
> 标签：c++

我的代码中遇到链接器错误，我无法检测到它。我认为错误在`addressBookType`课堂上，但我无法检测到它！

有什么问题`main`吗？

或者问题出在类定义中？

~请帮忙

```
Compiler: MinGW GCC 4.6.2 32-bit
Executing  g++.exe...
g++.exe "D:\New Folder\Cpp\Assignment 4\q4\main.cpp" -o "D:\New Folder\Cpp\Assignment 4\q4\main.exe"    -I"E:\Program Files\Dev-Cpp\MinGW32\include"  -I"E:\Program Files\Dev-Cpp\MinGW32\include"   -L"E:\Program Files\Dev-Cpp\MinGW32\lib" -L"E:\Program Files\Dev-Cpp\MinGW32\lib" -static-libstdc++ -static-libgcc 
E:\DOCUME~1\@$L@()V)\LOCALS~1\Temp\ccHC7fsV.o:main.cpp:(.text+0x7a8): undefined reference to `addressBookType::addressBookType()'
E:\DOCUME~1\@$L@()V)\LOCALS~1\Temp\ccHC7fsV.o:main.cpp:(.text+0x7d6): undefined reference to `addressBookType::addressBookType()'
collect2: ld returned 1 exit status 
```

代码是：

```
#include<iostream>
#include<cstdlib>
#include<fstream>
#include<string>

using namespace std;

//////////////////////////////"personType" is from D.S Malik Course Website
////////////***Class person Start

class personType
{
public:
     void print() const;
       //Function to output the first name and last name
       //in the form firstName lastName.

    void setName(string first, string last);
      //Function to set firstName and lastName according 
      //to the parameters.
      //Postcondition: firstName = first; lastName = last

    string getFirstName() const;
      //Function to return the first name.
      //Postcondition: The value of firstName is returned.

    string getLastName() const;
      //Function to return the last name.
      //Postcondition: The value of lastName is returned.

    personType(string first, string last);
      //Constructor
      //Sets firstName and lastName according to the parameters.
      //The default values of the parameters are null strings.
      //Postcondition: firstName = first; lastName = last  

 private:
    string firstName; //variable to store the first name
    string lastName;  //variable to store the last name
};
/////////Class person End***///////////
// IMPLEMENTATION OF "PersonType" CLASS  //

///////////////// IMP START ////////////////////
personType::personType(string first="",string last=""){

}

void personType::setName(string first,string last){
    firstName=first;
    lastName=last;

}

string personType::getFirstName() const{

return firstName;
}

string personType::getLastName () const{
return lastName;
}

void personType::print() const{
    cout<<firstName<<" "<<lastName<<endl;
}
////////////////// IMP END ////////////////////

/////////////////////////////////////////////////////////////////////////////////////////////

////////***class addressType Start

class addressType{

    private:
    string stAddress;
    string city;
    string state;
    string zipcode;

    public:
        addressType();
        addressType(string,string,string,string);
        void setAddress(string);
        string getAddress();
        void setCity(string);
        string getCity();
        void setState(string);
        string getState();
        void setZipcode(string);
        string getZipcode();

};

// IMPLEMENTATION OF "addressType" CLASS  //

///////////////// IMP START ////////////////////
addressType::addressType(string=" ",string=" ",string=" ",string=" "){

}

void addressType::setAddress(string addr){
    stAddress=addr;
}

string addressType::getAddress(){
    return stAddress;
}

void addressType::setCity(string cit){
    city=cit;
}

string addressType::getCity(){
    return city;
}

void addressType::setState(string sta){
    state=sta;
}

string addressType::getState(){
    return state;
}

void addressType::setZipcode(string zip){
    zipcode=zip;
}

string addressType::getZipcode(){
    return zipcode;
}
///////////////// IMP END ////////////////////

//////////class addressType End***
/////////////////////////////////

//////////////////////////////////
//////***class extPersonType Start
class extPersonType {

    private:
        string relation;
        string phNo;

    public:
        extPersonType();
        extPersonType(string,string);
        void setRelation(string);
        string getRelation();
        void setphNo(string);
        string getphNo();

};

// IMPLEMENTATION OF "extPersonType" CLASS   //
///////////////// IMP START ////////////////////

extPersonType::extPersonType(string =" " ,string = " "){

}

void extPersonType::setRelation(string rel){
    relation=rel;
}

string extPersonType::getRelation(){
    return relation;
}

void extPersonType::setphNo(string ph){
    phNo=ph;
}

string extPersonType::getphNo(){
    return phNo;
}

///////////////// IMP END ////////////////////
//////////class extPersonType End***

///////////////////////////////////////////////////////////////////////////////////////////

//////////////////////////////"dateType" is from D.S Malik Course Website
////////***class DateType Start

class dateType
{
public:
    void setDate(int month, int day, int year);
      //Function to set the date.
      //The member variables dMonth, dDay, and dYear are set 
      //according to the parameters.
      //Postcondition: dMonth = month; dDay = day;
      //               dYear = year

    int getDay() const;
      //Function to return the day.
      //Postcondition: The value of dDay is returned.

    int getMonth() const;
      //Function to return the month.  
      //Postcondition: The value of dMonth is returned.

    int getYear() const;
      //Function to return the year.     
      //Postcondition: The value of dYear is returned.

    void printDate() const;
      //Function to output the date in the form mm-dd-yyyy.

    dateType(int month = 1, int day = 1, int year = 1900);
      //Constructor to set the date
      //The member variables dMonth, dDay, and dYear are set 
      //according to the parameters.
      //Postcondition: dMonth = month; dDay = day; dYear = year;
      //               If no values are specified, the default 
      //               values are used to initialize the member
      //               variables.

private:
    int dMonth; //variable to store the month
    int dDay;   //variable to store the day
    int dYear;  //variable to store the year
};
//////////class dateType End***
/////////////////////////////////

// IMPLEMENTATION OF "DateType" CLASS   //
///////////////// IMP START ////////////////////

void dateType::setDate(int month, int day, int year)
{
    dMonth = month;
    dDay = day;
    dYear = year;
}

int dateType::getDay() const 
{
    return dDay;
}

int dateType::getMonth() const 
{
    return dMonth;
}

int dateType::getYear() const 
{
    return dYear;
}

void dateType::printDate() const
{
    cout << dMonth << "-" << dDay << "-" << dYear;
}

    //Constructor with parameters
dateType::dateType(int month, int day, int year) 
{ 
    dMonth = month;
    dDay = day;
    dYear = year;
}
//////////////// IMP END /////////////////////

////////////////////////////////////////////////////////////////////////////////

//////***class addressBookType Start

class addressBookType {

private:
    string FirstName; //variable to store the first name
    string LastName;  //variable to store the last name
    string StAddress;

    string City;
    string State;
    string Zipcode; 
    string Relation;
    string PhNo;
    int DMonth; //variable to store the month
    int DDay;   //variable to store the day
    int DYear;  //variable to store the year

protected:

    addressType obj1;
    dateType obj2;
    extPersonType obj3;

public:
    addressBookType();
    static int count;
    void loadData(addressBookType *&ptr);

};

//////////class addressType End***
/////////////////////////////////

// IMPLEMENTATION OF "addressBookType" CLASS   //
///////////////// IMP START ////////////////////

void addressBookType::loadData(addressBookType *&ptr){

    ifstream fin;
    ifstream fout;

    string tempName;
    cout<<"Enter file name:"<<endl;

            if(!fin){

                cout<<"Cannot open the image file : "<<endl;
                cout<<"Input Failure"<<endl;
                system("pause");

            }

            else{

                for(int i=0;!fin.eof();i++){

                    fin>>FirstName;
                    fin>>LastName;
                    fin>>DDay;
                    fin>>DMonth;
                    fin>>DYear;
                    getline(fin,StAddress);
                    getline(fin,City);
                    getline(fin,State);
                    fin>>Zipcode;
                    fin>>PhNo;
                    fin>>Relation;

                    cout<<FirstName<<LastName<<DDay<<DMonth<<DYear<<StAddress<<City<<State<<Zipcode<<PhNo<<Relation<<endl;

                }

            }   

}

int main (){

     addressBookType *ptr;
     addressBookType obj;
     ptr=new addressBookType[500];
     obj.loadData(ptr);

     system("pause");
     return(0);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T18:07:35.213

Well, it's quite clear, you haven't implemented the default constructor for `addressBookType`:

```
class addressBookType {
//...
    addressBookType();                      //declare constructor
    void loadData(addressBookType *&ptr);   //declare method
};

//missing constructor implementation

void addressBookType::loadData(addressBookType *&ptr){ //implement method
//...
} 
```

To solve the error, just add

```
addressBookType::addressBookType() { } 
```

Note that this will initialize your `string` members to the empty string, the objects

```
addressType obj1;
dateType obj2;
extPersonType obj3; 
```

with their respective default constructors, and POD types will remain uninitialized.

# qt - 如何让 C 函数有效地等待 Qthread 完成工作？

> ID：10146014
> 
> 赞同：1
> 
> 时间：2012-04-13T18:06:32.547
> 
> 标签：qt

我有一个有趣的问题。使用 Qt 处理 C++ 项目。跨平台项目，但在 Win 上开发。

我有一个 C 风格的回调函数。它必须是C风格，我别无选择。在 C 风格的回调函数中完成的工作是重要且时间敏感的。因此，我有一些 Qthread 线程可以帮助处理工作量。

我没有使用 Qt 线程的运行方案，而是按照 QThread 文档底部的说明使用 QThreads。[http://qt-project.org/doc/qt-5.0/qthread.html#wait](http://qt-project.org/doc/qt-5.0/qthread.html#wait)

为了清楚起见，我这样使用 QThread：

```
QThread *thread = new QThread;
Worker *worker = new Worker;
worker->moveToThread(thread);
thread->start();
QMetaObject::invokeMethod(worker, "doWork", Qt::QueuedConnection); 
```

线程是在应用程序开始时创建的，并由 QMetaObject::invokeMethod 提供。

挑战是在 QThread 线程完成它们的工作之前，不让 C 回调函数做“任何事情”（以一种有效的方式）。我想让回调函数等待它不会与工作线程竞争 cpu（所以没有繁忙的虚拟循环）。我也可以使用 sleep() 之类的东西，但这效率不高，因为如果线程“提前”完成，就会浪费睡眠。我想从工作人员那里发送一个信号，但问题是我的回调是一个 C 函数，所以我看不到它如何捕获 Qt 信号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-08T22:30:47.153

这个问题很古老，但它出现在“相关问题”中。由于这个问题很有趣，而且答案对 Qt 用户很有用，所以我决定给出一个详细的答案。

要等待不同 QThread 中的函数完成，可以使用多种策略：

1.  使用`Qt::BlockingQueuedConnection`.
2.  使用天真的`while(anAtomicBoolean){}`循环。
3.  使用更聪明的`while(anAtomicBoolean){QThread::yieldCurrentThread();}`循环。
4.  使用`QWaitCondition`.
5.  使用`QSemaphore`.

策略 2 和 3 看起来像个坏主意，因为等待线程在等待检查循环条件时必须处于活动状态。然而，策略 3 的优势在于为其他线程和进程释放 CPU 时间。

其他 3 种策略的优点是在等待时让线程停止，并且应该是相当的。但是，解决方案 1 和 4 不允许您（或至少很容易）同时在不同线程中运行多个工作程序。所以最好的解决方案是使用信号量。

```
QSemaphore semaphore(2)
worker1.sem = &semaphore;
worker2.sem = &semaphore;
semaphore.acquire(2);
QMetaObject::invokeMethod(&worker1, "doWork", Qt::QueuedConnection);
QMetaObject::invokeMethod(&worker2, "doWork", Qt::QueuedConnection);
semaphore.acquire(2); // each worker release(1) when done
semaphore.release(2); 
```

为了证明我的主张，我做了一个小基准测试（如果有人感兴趣，我稍后会提供代码）。我曾经`QueryThreadCycleTime()`获取等待线程消耗的周期数。像这样：

```
QueryThreadCycleTime(hThread, &start);
QMetaObject::invokeMethod(&worker, "doWork", Qt::BlockingQueuedConnection);
QueryThreadCycleTime(hThread, &stop); 
```

基准测试结果如下图所示： [![结果图](../Images/ff58f632e6846c4d27d3b95ad3a55870.png)](https://i.stack.imgur.com/ihThb.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T18:46:30.020

好的，考虑这种方法。让您的回调函数除了设置一些全局标志（或增加一些计数器）并显示您的函数是否（或多少次）被调用之外什么都不做。然后实现从 QObject 继承的类（要有槽）。您将其订阅到线程完成信号。发出信号时，您只需调用另一个函数（带有回调函数的逻辑）就被lib调用了很多次。它会起作用吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T18:46:48.487

如果您“手头”有线程，并且您完全确定线程将在完成工作后自行退出。

[http://qt-project.org/doc/qt-4.8/qthread.html#wait](http://qt-project.org/doc/qt-4.8/qthread.html#wait)

但！

如果你不想让你的线程退出，只想等到 worker 发出一些信号，你可以这样做：

```
QEventLoop loop;
connect(worker, SIGNAL(workFinished()), &loop, SLOT(quit()));
QMetaObject::invokeMethod(worker, "doWork", Qt::QueuedConnection);
loop.exec(); 
```

# javascript - 如何使用箭头键实现导航？

> ID：10146015
> 
> 赞同：4
> 
> 时间：2012-04-13T18:06:34.390
> 
> 标签：javascript, jquery, html, forms

我正在制作自己的组合框，以获得比`<select>`标签更好的设计。

顺便说一句，我想知道，如何使用`<span>`（或其他`<p>`...）之间的键盘箭头键进行导航，并使用“tab”键显示建议。就像`<option>`一个`<select>`标签。

这是我想让它工作的地方：

HTML

```
<input type="text" id="myInput" value=""/>
<div id="myDiv">
    <span>Value 1</span>    
    <span>Value 2</span>
    <span>Value 3</span>
</div> 
```

​ CSS

```
#myDiv {display:none;border:1px solid #000;}
span  {display:block;background:#EDEDED;cursor:pointer;}
span:hover {background:#555;color:#FFF;} 
```

JS

```
$(document).ready(function(){
    $('#myInput').focus(function(){
        $('#myDiv').slideDown();
    });    

    $('span').click(function(){
         $('#myInput').val($(this).html());
         $('#myDiv').slideUp();
    });
});​ 
```

你可以在这里测试它：http: [//jsfiddle.net/eHpKX/2/](http://jsfiddle.net/eHpKX/2/)

*编辑示例：例如，在输入中单击或制表符，然后使用箭头键导航...它不起作用。*

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T18:40:04.527

我编写了一个 keydown 处理程序，`uparrow`它`downarrow`的作用类似于选择下拉菜单。但是`tab`键在跳出到下一个字段中具有特定的作用，所以我不想`prevtDefault`浏览器行为。请参阅下面的代码，您可以从那里构建更多，

[**演示**](http://jsfiddle.net/eHpKX/7/)

**CSS：**

```
span.active {background:#555;color:#FFF;} 
```

JS：

```
$(document).ready(function() {
    $('#myInput').focus(function() {
        if ($('#myDiv span.active').length == 0) {
            $('#myDiv span:first').addClass('active');
        }
        $('#myDiv').slideDown();
    }).focusout(function() {
        $('#myDiv').slideUp();
    });
    $('span').click(function() {
        $('#myInput').val($(this).html());
    }).mouseenter(function() {
        $('#myDiv span').removeClass('active');
    }).keydown(function(e) {
        alert(e.which);

    });

    //keydown event
    $('#myInput').keydown(function(e) {
        var $actvOpt = $('#myDiv span.active');
        if (e.which == 13) { //enter key
            if ($actvOpt.length != 0) {
                $(this).val($actvOpt.text());
                $('#myDiv').slideUp();
            }
            return;
        }

        var actvIndex = $actvOpt.removeClass('active').index();
        var optCount = $('#myDiv span').length;

        if (e.which == 40) { //keydown
            actvIndex += 1;
        } else if (e.which == 38) { //keydown
            actvIndex -= 1;
        }

        if (actvIndex < 0) actvIndex = optCount - 1;
        else if (actvIndex >= optCount) actvIndex = 0;

        $('#myDiv span:eq(' + actvIndex + ')').addClass('active');

        $actvOpt = $('#myDiv span.active');
        $(this).val($actvOpt.text());        
    });
}); 
```

# javascript - 尝试使用 jQuery 动态验证字段 - 自定义函数

> ID：10146018
> 
> 赞同：0
> 
> 时间：2012-04-13T18:06:45.687
> 
> 标签：javascript, jquery, forms, validation, function

我正在研究 jQuery 中的验证功能，但有点卡住了。我有一个工作版本非常冗长，并且充满了我试图避免的硬编码表单值。这是目前有效的方法：

```
$(document).ready(function(){
  var fname = $("#formFName");
  var lname = $("#formLName");

  fname.blur(validateFName);
  lname.blur(validateLName);

  function validateFName(){
    if(fname.val().length > 0){
      fname.removeClass("req_error");
      return true;
    }
    else {
      fname.addClass("req_error");
      return false;
    }
  }

  function validateLName(){
    if(lname.val().length > 0){
      lname.removeClass("req_error");
      return true;
    }
    else {
      lname.addClass("req_error");
      return false;
    }
  }
}); 
```

这部分适用于这两个领域，但我想将整个事情封装在一个更容易维护的函数中。像这样的东西：

```
$(document).ready(function(){

  $("#first_name").blur(validateField("first_name","text"));
  $("#last_name").blur(validateField("last_name","text"));
  $("#email_address").blur(validateField("email_address","email"));

  function validateField(formfield, type){
    var field = $("#" + formfield);
    switch(type) {
      case "text":
        if(field.val().length > 0){
          field.removeClass("req_error");
          return true;
        }
        else {
          field.addClass("req_error");
          return false;
        }
        break;
      case "email":
        var filter = /^[a-zA-Z0-9]+[a-zA-Z0-9_.-]+[a-zA-Z0-9_-]+@[a-zA-Z0-9]+[a-zA-Z0-9.-]+[a-zA-Z0-9]+.[a-z]{2,4}$/;
        if(filter.test(field.val())) {
          field.removeClass("req_error");
          return true;
        else {
          field.addClass("req_error");
          return false;
        }
        break;
    }
  }
}); 
```

但是，当我这样做时，我在 Firefox 的 JS 错误日志中收到以下错误：

错误：((f.event.special[r.origType] || {}).handle || r.handler).apply 不是函数源文件：/scripts/jquery-1.7.1.min.js 行： 3

不幸的是，针对该错误的快速谷歌并没有产生任何对我有意义的东西。我已经在各个地方尝试过警报，这样做已经验证了正确的表单字段名称确实在应该的地方传递，但是由于我对 jQuery 相当陌生（并且不擅长 JavaScript），所以我处于这里有点损失。

感谢任何可以为我指明正确方向的人。另外，如果有人认为我以错误的方式处理这件事，我很乐意改变。我尝试使用 jQuery 验证插件，但我也在使用一些动态创建的字段，不幸的是，当涉及隐藏的必填字段时，该插件会阻止访问者提交表单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T18:15:50.703

听起来您可以通过附加行为而不是特定元素来简化这一点：

```
<input type="text" id="someId" class="validate-text" />
<input type="text" id="someOtherId" class="validate-email" />

$('.validate-text').live('blur', function()
{
    $(this).removeClass('req_error');
    if($.trim(this.value).length < 1)
       $(this).addClass('req_error');
});

$('.validate-email').live('blur', function()
{
    // Same thing with the email validation logic
}); 
```

这样，您不需要将特定的事件处理程序附加到您的元素，而是使用这些处理程序来检查您想要的行为。然后你只需用特定的类标记 HTML 元素来标记你想要的验证模式。

假设我正确理解了你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T18:24:11.823

您不能将函数调用表达式传递给 .blur()。您可以传递一个匿名函数构造函数：

```
$("#first_name").blur(function () {validateField("first_name","text");}); 
```

或者传递一个函数的名称：

```
function validateFirstName() {
    validateField("first_name","text");
}

* * *

$("#first_name").blur(validateFirstName)); 
```

@Tejs 使用类来附加验证器的建议也是一个很好的建议。

# gwt - GWT - RichTextArea - 如何设置其内部字体系列

> ID：10146019
> 
> 赞同：0
> 
> 时间：2012-04-13T18:06:48.387
> 
> 标签：gwt

我只是想知道如何更改 RichTextArea 内部字体系列或字体大小？我试图将它的 CSS 修改为

```
 border: 1px solid black;
  background-color: white;
  font-family: verdana; 
```

...但它不起作用:(字体仍然像times new roman或这样的东西:S

那么有没有办法手动设置它的字体属性呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:27:03.227

创建一个`Formatter`，记录在这里： http: [//google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/user/client/ui/RichTextArea.Formatter.html#setFontName(java.lang.字符串](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/user/client/ui/RichTextArea.Formatter.html#setFontName(java.lang.String)）。

它抽象了所有样式内容，因此您不必手动编写 CSS。

# jquery - Unobtrusive Mode for jQuery Mobile

> ID：10146020
> 
> 赞同：1
> 
> 时间：2012-04-13T18:06:55.993
> 
> 标签：jquery, css, jquery-mobile

Is there an unobtrusive mode for jQuery Mobile?

I'd like to use the styles and functionality of the lists, inputs, buttons, alerts, toolbars, etc. without it taking over the entire site. Similar to the way jQuery UI works - just pick components.

For example, when I add jQuery Mobile, it completely changes the way my page looks & works. The background is gone, the markup is restructured, links & forms become ajax, etc.

I tried disabling ajax (see code) but jQuery mobile still completely restructured & restyled my page.

```
$.mobile.ajaxLinksEnabled = false; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T19:05:21.320

您是否尝试过设置`data-role="none"`元素？ [原生表单元素和按钮](http://jquerymobile.com/demos/1.1.0/docs/forms/forms-all-native.html)

# core-graphics - Xcode如何制作曲线？

> ID：10146025
> 
> 赞同：0
> 
> 时间：2012-04-13T18:07:09.113
> 
> 标签：core-graphics

我正在制作一个 iPhone 应用程序，我想知道如果我得到 3 个点如何制作曲线

```
(3,2)
(4,3)
(5,4) 
```

我怎样才能做出曲线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T18:12:24.760

如果您使用的是 CoreGraphics，那么像`CGPathAddCurveToPoint`, `CGContextAddCurveToPoint`, `CGContextAddArc`,等API将是一个开始。`CGPathAddArc`

# javascript - JavaScript 中的空单元格如何存储在稀疏数组中？

> ID：10146026
> 
> 赞同：4
> 
> 时间：2012-04-13T18:07:11.003
> 
> 标签：javascript, memory

我有一种情况，我可能正在设置一个高索引的数组单元格，而没有设置它之前的任何单元格。

```
>>> var arr = [];
undefined
>>> arr[5] = 'value';
"filled"
>>> arr
[undefined, undefined, undefined, undefined, undefined, "filled"] 
```

这样的数组是如何存储在内存中的？是否为每个未定义的值分配了空间？

在我的实际项目中，我可能会使用非常大的索引。例如，我可以设置单元格 500-800 和 900-1000。我不能使用哈希，因为我需要遍历这些非空单元格并注意它们的索引。我想知道像这样分割数组是否会为空单元格占用大量内存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:11:46.073

> 我不能使用哈希，因为我需要遍历这些非空单元格并注意它们的索引。

`for (x in ...)`语言结构有什么问题？

**编辑**以适应*vol7ron*的评论：

```
var x = {2: "foo", 999: "bar"};

for ( var n in x ) {
    if ( x.hasOwnProperty(n) ) {
        console.log(n);
        console.log(x[n]);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T18:37:33.783

绑在 aefxx 的答案上，您仍然可以迭代：

```
var obj = {500: "foo",  10923: "bar"};
var max = 0;

for (var key in obj)
   max=key>max?key:(max||key);         // get max key

for (var i=0; i<=max; i++)
   console.log(obj[i]);                // output even the undefined 
```

* * *

正如 Phrogz 评论的那样，它不会为数组的未声明元素分配。`arr[somenum] = undefined;`如果您将元素值显式设置为未定义（例如），我不确定是否是这种情况

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T18:13:43.153

您可能应该简单地将最大索引存储在一个变量中，然后像这样访问您的地图：

```
for (var i=0; i<=maxIndex; i++) {
 console.log(myMap[i]);
} 
```

然后，您将拥有地图的（相对）紧凑性以及遍历未设置索引的能力。

# android - for循环内的动态按钮onclick事件

> ID：10146028
> 
> 赞同：0
> 
> 时间：2012-04-13T18:07:20.033
> 
> 标签：android

我正在使用此代码在 for 循环中创建动态按钮..

```
LinearLayout linearLayout =  (LinearLayout)findViewById(R.id.linearLayout2);
for (int i=0 ; i<10; i++){
LinearLayout l = new LinearLayout(this);
l.setOrientation(LinearLayout.HORIZONTAL);

TextView textview = new TextView(this);
textview.setText("Text view" + i);
textview.setId(i);

l.addView(textview);
Button button = new Button(this);
button.setText("View");
button.setId(i);
button.setWidth(90);
button.setHeight(60);
l.addView(button);
linearLayout.addView(l);//if you want you can layout params linearlayout
} 
```

现在我想根据迭代的 i 值向每个按钮添加 onclick 事件.. 任何人都可以建议我如何实现这个...提前谢谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T18:24:45.193

创建一个按钮阵列...

```
Button[] buttons=new Button[10]; 
```

而不是这条线

```
Button button = new Button(this); 
```

在你的 for 循环中..使用

```
 button[i] = new Button(this); 
```

并在同一个循环中设置您的 onclicklistener 像这样..并根据您提出的问题，**根据迭代 i 值将 onclick 事件添加到每个按钮，**我认为您对所有按钮都有相同的 onclicklistener..

```
 button[i].setOnClickListener(new Button.OnClickListener() {
public void onClick(View v) {
        //your onclicklistener code
} 
```

});

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T18:23:05.933

创建一个`List`of `Button`，然后在创建后将每个添加`Button`到该列表中...

```
List<Button> list = new ArrayList<Button>();
for (int i=0 ; i<10; i++){
LinearLayout l = new LinearLayout(this);
l.setOrientation(LinearLayout.HORIZONTAL);

TextView textview = new TextView(this);
textview.setText("Text view" + i);
textview.setId(i);

l.addView(textview);
Button button = new Button(this);
button.setText("View");
button.setId(i);
button.setWidth(90);
button.setHeight(60);
l.addView(button);
linearLayout.addView(l);//if you want you can layout params linearlayout
list.add(button);
} 
```

然后使用高级 for 循环遍历列表并为每个按钮添加点击侦听器..

```
for(Button btn : list){
btn.setOnClickListener(this);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T18:16:01.837

在你的循环之外创建一个新的`View.OnClickListener`：

```
OnClickListener ocl = new OnClickListener(){
    @Override
    public void onClick(View v){
        switch(v.getId()){
        case 1:
            // click action
            break;
        case 2: 
            // click action
            break;
        }
        // ...etc
    }
} 
```

根据您的按钮的 ID，在这种情况下的迭代`i`，您可以执行各种操作。但是，这可以是任何东西，例如`if...else`按钮文本上的块或您设置的标签。

然后在你的循环中，在你之前`addView(l)`，分配它：

```
button.setOnClickListener(ocl); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T18:29:18.933

添加 button.setOnClickListener(this); 在forloop中

并在 oncreate()::: 下面添加这些代码

```
@Override
public void onClick(View v){
switch(v.getId()){
case 0:
// click action for first btn
break;
case 1: 
// click action for 2nd btn
break;
soon upto 
case 9: 
// click action for 9th btn
break;
}
} 
```

ypur 活动也必须实现 onClickListerner。

# google-app-engine - Maven + App Engine + Google Eclipse 插件

> ID：10146029
> 
> 赞同：19
> 
> 时间：2012-04-13T18:07:20.080
> 
> 标签：google-app-engine, maven, google-eclipse-plugin

有没有办法让我拥有一个兼容 Maven 的 Google App Engine (Java) 项目，它也与 Eclipse 中的 Google Eclipse 插件兼容？

谢谢！

**编辑：**

现在对 Maven 插件的原生支持：

[https://developers.google.com/appengine/docs/java/tools/maven](https://developers.google.com/appengine/docs/java/tools/maven)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T18:20:33.180

取决于您所说的“兼容”是什么意思，这取决于您使用 GAE 插件的哪些功能。我们使用 appengine maven 插件[http://code.google.com/p/maven-gae-plugin/](http://code.google.com/p/maven-gae-plugin/)和 eclipse，它们似乎可以很好地协同工作，但我们没有使用 GWT 或 JDO。与大多数 maven/eclipse 一样，我发现最好从命令行运行你的东西，只使用 eclipse 作为编辑器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T12:39:02.430

我使用 maven 和 GAE 使用 JDO 一年以来没有任何问题。这是我在 MacOSX Snow Leopard 上的配置：

*   阿帕奇 Maven 3.0.3
*   Eclipse 版本：3.7.1
*   m2e - Eclipse 1.0.100.20110804-1717 的 Maven 集成

将 Eclipse 与 Maven 完全集成（从命令行“mvn test”和 Eclipse 中的 JUnit 接口运行所有测试）的重要一点是以这种方式拥有 .project 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<projectDescription>
    <name>PROJECT_NAME</name>
    <comment></comment>
    <projects>
    </projects>
    <buildSpec>
        <buildCommand>
            <name>org.eclipse.jdt.core.javabuilder</name>
            <arguments>
            </arguments>
        </buildCommand>
        <buildCommand>
            <name>org.eclipse.m2e.core.maven2Builder</name>
            <arguments>
            </arguments>
        </buildCommand>
    </buildSpec>
    <natures>
        <nature>org.eclipse.m2e.core.maven2Nature</nature>
        <nature>org.eclipse.jdt.core.javanature</nature>
    </natures>
</projectDescription> 
```

该插件已移至此处： [https ://github.com/maven-gae-plugin/maven-gae-plugin](https://github.com/maven-gae-plugin/maven-gae-plugin)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T18:32:40.073

+1 对 Rick 的回答，但我想补充一点：

谷歌对此有一个教程：[http ://code.google.com/p/google-web-toolkit/wiki/WorkingWithMaven](http://code.google.com/p/google-web-toolkit/wiki/WorkingWithMaven)

也就是说，我们从来没有让它 100% 工作。`maven-gwt-plugin`Eclipse 似乎有问题，如果由于 APT 而使用 RequestFactory，情况会变得更糟。`maven-gae-plugin`似乎玩得很好。从 cmdline 运行要容易**得多。**此外，Eclipse 3.7/m2e 中有一个已知的错误[需要引用]，它会阻止很多事情正常工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-20T01:06:55.213

如前所述，谷歌为 maven 提供支持： [https ://developers.google.com/appengine/docs/java/tools/maven](https://developers.google.com/appengine/docs/java/tools/maven)

但看起来它不能完全与 Eclipse 一起工作（如评论之一所述：“SDK location '.m2\repository\com\google\appengine\appengine-api-1.0-sdk\1.7.2\appengine-api-‌ ​1.0-sdk-1.7.2.jar'不是目录”）

为了解决它，我使用了 maven-eclipse-plugin，并为 GAE/JRE 指定了容器：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-eclipse-plugin</artifactId>
    <version>2.9</version>
    <configuration>
    <classpathContainers>              
<classpathContainer>org.eclipse.jdt.launching.JRE_CONTAINER</classpathContainer>
<classpathContainer>com.google.appengine.eclipse.core.GAE_CONTAINER</classpathContainer>
    </classpathContainers>
    </configuration>
</plugin> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-20T03:23:16.640

**我对 GAE + Maven + Eclipse 的一般发现。**

**规则 1：**使用 GAE 原型生成您的 GAE 项目：[https ://developers.google.com/appengine/docs/java/tools/maven](https://developers.google.com/appengine/docs/java/tools/maven)

**规则 2：**如果你想用 Eclipse 开发——不要做“mvn eclipse:eclipse”然后导入——这会导致很多问题。而是导入为“Maven 项目”

**规则 3：**简单/有效的解决方案如何创建 YouTube **[http://www.youtube.com/watch?v=oC6bJp5X3LI上描述的 MVN/GAE/Eclipse 项目](http://www.youtube.com/watch?v=oC6bJp5X3LI)**

PS。我正在使用单独的 Web/DAO/Domain 模块进行项目 - 我稍后会发布我的发现和线索。

# php - matching file extension in the document via javascript

> ID：10146031
> 
> 赞同：0
> 
> 时间：2012-04-13T18:07:24.323
> 
> 标签：php, javascript

This is continued from my original question (http://stackoverflow.com/questions/10133976/getelementsbytagname-specific-links-only) which I got resolved but now facing different issue.

I'm implementing Anarchy player on my site and problem is that script stores files outside the domain root so links to them are in format like ( http: // mysite.com/mod/file/download.php?file_guid=fileID) which is fine for the player, it still plays the file but I need to separate files by type.

Look at the javascript code below, "if(o.href.match(/.mov$|.mp4$|.m4v$|.m4b$|.3gp$/i)" part, if I understand it correctly it says if file extension is .mov, .mp4, etc. than include that player. But since link is not in standard format with file name and extension it does not recognize it. How to change that "if(o.href.match" to something that would distinguish what type of file it is? I can pull file full name with extension in text format via PHP code and maybe wrap it in or div and that use if...div.match(...? Link to video file is already inside div block id "video"

```
<div id="video">
        <a href="<?php echo $file_url;?>"></a>
        </div> 
```

Here is javascript:

```
var all = document.getElementById ( "video" ).getElementsByTagName ( "a" );
        for (var i = 0, o; o = all[i]; i++) {
            if(o.href.match(/\.mov$|\.mp4$|\.m4v$|\.m4b$|\.3gp$/i) && o.className!="amplink") { 
```

Thank you so much for any suggestions.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T18:14:31.813

仅通过查看文件名并不总是可以确定文件的文件类型。更好的方法是查看`Content-Type`标头（在 HTTP 资源的情况下）或`MIME-type`（本质上是相同的）。

仍然有可能发送一个错误`Content-Type`，所以也许有一种方法可以通过查看前几个字节来识别文件类型？我知道 PNG 从一个非常明显的指标开始。

# junit - 使用 assertTrue 而不是 assertNull 时缺少分支

> ID：10146032
> 
> 赞同：17
> 
> 时间：2012-04-13T18:07:25.247
> 
> 标签：junit, code-coverage, bytecode, emma, jacoco

在 Java/Junit 中，我需要使用一些对象来测试 null。有多种方法可以测试条件，但我一直在使用 assertTrue 进行大多数测试。当我在 assertTrue 中检查空值时，EclEmma 声明它只测试一个分支。

当我手动将语句解析为变量时（例如将结果设置为布尔值并将其传递给 assertTrue），代码覆盖在断言上被认为是完整的，但在变量初始化行上没有。

为什么会这样？这是否与 Java 显然添加的额外字节码有关，如[http://sourceforge.net/apps/trac/eclemma/wiki/FilteringOptions](http://sourceforge.net/apps/trac/eclemma/wiki/FilteringOptions)所述？任何解决方案（除了使用其他断言语句）。

**断言真：**

```
assertTrue( myObject == null ); //1 of 2 branches 
```

**断言真：**

```
boolean test = (myObject == null); //1 of 2 branches missing
assertTrue(test); // complete 
```

**断言空：**

```
assertNull( myObject ) //complete; 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-13T20:29:15.337

对于大多数布尔表达式，Java 编译器会在字节码中生成额外的分支。JaCoCo 基于生成的字节码生成“分支覆盖率”，而不是基于原始 Java 代码，因此为您将使用的几乎所有布尔表达式显示额外的分支覆盖率信息。

在您的代码中，您使用的布尔表达式是`myObject == null`.

为了计算这个值，Java 编译器生成将两个参数压入堆栈的代码，然后执行条件跳转以将 1（真）或 0（假）压入堆栈。JaCoCo 报告此条件跳转的分支覆盖率。

因此，您使用的事实`myObject == null`会触发您描述的行为。

作为其他一些例子，试试这个：

```
boolean t = true;
boolean f = false;
boolean result1 = (t && f) || f; // 3 out of 6 missed.
boolean result2 = !t;            // 1 out of 2 missed. 
```

例如，如果布尔表达式由函数返回，这将很有用，该函数在其他地方的 if-then-else 语句中用作条件。虽然主要是 Java 编译器工作方式的结果，但它有助于评估原始 Java 代码的*条件*覆盖率（而不仅仅是*分支*覆盖率）。

此功能没有很好的文档记录，但这里有一些提示：

*   布尔表达式的 JaCoCo[测试用例](http://eclemma.svn.sourceforge.net/viewvc/eclemma/jacoco/trunk/org.jacoco.core.test/src/org/jacoco/core/test/validation/BooleanExpressionsTest.java?revision=1639&view=markup)
*   JaCoCo[论坛上关于为语句生成的分支的讨论`a = !a`](http://sourceforge.net/projects/eclemma/forums/forum/614869/topic/5022145)
*   *有人有指向更多文档的指针吗？*

因此，它确实与生成的额外字节码有关，但与过滤选项所针对的合成字节编译器构造的具体示例无关。

注意：由于最初的答案太过猜测，因此进行了重大编辑。感谢@ira-baxter 的精彩和批判性讨论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T14:58:51.220

Emma 将条件表达式视为（分支）覆盖率计数恕我直言的“带有分支的东西”这一事实似乎完全被打破了。它不是条件分支。

我们可以对 Assert 进行更多的争论；如果它被定义为“断言失败时抛出异常”，那么它确实有一个条件分支；如果它被定义为 [正如我认为的那样，我不是 Java 专家] 为“在断言失败时终止我的程序”，那么它并不是一个真正的分支。方法调用也很晦涩。这些*是*条件分支，如果被调用的方法抛出异常，控制流不会继续到“语句的其余部分”。

我们的[Java 测试覆盖率](http://www.semanticdesigns.com/Products/TestCoverage/JavaTestCoverage.html)工具对此类条件“正确”进行（分支）覆盖率分析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-04T00:20:06.870

要获得布尔方法 100% 的代码覆盖率，请执行以下操作

```
Class RecordService{

    public boolean doesRecordExist(String id){

    return id!=null;

    }

    }

    //Method inside your mock
    @Test
    public boolean testDoesRecordExist(){
    RecordService recordService = mock(RecordService.class);
    when(recordService.doesRecordExists()).thenReturn(
                    anyString()).thenReturn(null);

    } 
```

# objective-c - iOS: CGPDFDocumentGetMediaBox unavailable

> ID：10146034
> 
> 赞同：0
> 
> 时间：2012-04-13T18:07:35.857
> 
> 标签：objective-c, ios

I created a simple view based application using Xcode and I tried using CGPDFDocumentGetMediaBox method as below:

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

// Override point for customization after application launch.

// Set the view controller as the window's root view controller and display.
CGPDFDocumentRef r;
CGRect cg = CGPDFDocumentGetMediaBox(r, 0);
self.window.rootViewController = self.viewController;
[self.window makeKeyAndVisible];

return YES;
} 
```

However, I get a compile error saying that the method is unavailable:

> /Users/s/Documents/test/Classes/testAppDelegate.m:27:0 /Users/s/Documents/test/Classes/testAppDelegate.m:27: error: 'CGPDFDocumentGetMediaBox' is unavailable (declared at /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator4.3.sdk/System/Library/Frameworks/CoreGraphics.framework/Headers/CGPDFDocument.h:117)

I can see from the Apple documents- Deprecated in Mac OS X version 10.3 and later. But doesn't deprecated mean that the methods should no be used but are still available? I can see the declaration in the header file: CGPDFDocument.h

Mac version: 10.6.8 Xcode version: 3.2.6 iOS SDK: 4.3

Am I missing something here?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:26:05.893

改为使用`CGPDFPageGetBoxRect(page, kCGPDFMediaBox)`。请注意，它需要 a`CGPDFPageRef`而不是 a `CGPDFDocumentRef`。这是因为不同的页面可能有不同的媒体框。如果您确定文档的页面大小相同且布局相同，则可以只使用文档的第一页（通过`CGPDFDocumentGetPage(document, 1)`.）

# ravendb - Raven DB：如何删除给定类型的所有文档

> ID：10146035
> 
> 赞同：17
> 
> 时间：2012-04-13T18:07:36.210
> 
> 标签：ravendb

更具体地说，在 Raven DB 中，我想创建一个带有类似签名的通用方法；

```
public void Clear<T>() {... 
```

然后让 Raven DB 清除给定类型的所有文档。

我从 Ayende 的其他帖子中了解到类似的问题，您需要一个索引才能批量执行此操作。

我认为这将涉及创建一个映射每种文档类型的索引——这似乎需要做很多工作。

有谁知道一种有效的方法来创建像上面这样直接在数据库中执行 set delete 的方法？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-24T12:25:17.237

我假设您想从 .NET 客户端执行此操作。如果是这样，请使用标准`DocumentsByEntityName`索引：

```
var indexQuery = new IndexQuery { Query = "Tag:" + collectionName };
session.Advanced.DocumentStore.DatabaseCommands.DeleteByIndex(
   "Raven/DocumentsByEntityName", 
   indexQuery, 
   new BulkOperationOptions { AllowStale = true });

var hilo = session.Advanced.DocumentStore.DatabaseCommands.Get("Raven/H‌​ilo/", collectionName);
if (hilo != null) {
    session.Advanced.DocumentStore.DatabaseCommands.Delete(hilo.‌​Key, hilo.Etag);
} 
```

`collectionName`您的收藏的实际名称在哪里。

第一个操作删除项目。第二个删除[HiLo 文件](http://www.ravendb.net/docs/article-page/3.5/csharp/client-api/document-identifiers/hilo-algorithm)。

另请查看官方文档 -[如何使用 index 删除或更新文档](https://ravendb.net/docs/article-page/3.5/csharp/client-api/commands/documents/how-to/delete-or-update-documents-using-index)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-19T06:30:00.843

经过大量实验，我发现答案很简单，虽然远非显而易见；

```
public void Clear<T>()
{
    session.Advanced.DocumentStore.DatabaseCommands.PutIndex(indexName, new IndexDefinitionBuilder<T>
    {
        Map = documents => documents.Select(entity => new {})
    });

    session.Advanced.DatabaseCommands.DeleteByIndex(indexName, new IndexQuery());
} 
```

当然，您几乎肯定不会一次性定义索引并删除，为了简洁起见，我将其作为单一方法。

我自己的实现按照文档的建议定义了应用程序启动时的索引。

如果您想使用这种方法来实际索引 T 的属性，那么您需要约束 T。例如，如果我有一个 IEntity，我的所有文档类都从该 IEntity 继承，并且该类指定了一个属性 Id。然后一个 'where T : IEntity' 将允许您在索引中使用该属性。

其他地方也说过，但同样值得注意的是，一旦你定义了一个静态索引，Raven 可能会使用它，这可能会导致你的查询似乎没有返回你插入的数据：

[RavenDB 保存到磁盘查询](https://stackoverflow.com/questions/10126360/ravendb-saving-to-disk-query)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-01-09T17:59:15.313

我也遇到了这个问题，这是对我有用的解决方案。我只在一个测试项目中工作，所以对于更大的数据库来说这可能会很慢，但是 Ryan 的回答对我不起作用。

```
 public static void ClearDocuments<T>(this IDocumentSession session)
    {
        var objects = session.Query<T>().ToList();
        while (objects.Any())
        {
            foreach (var obj in objects)
            {
                session.Delete(obj);
            }

            session.SaveChanges();
            objects = session.Query<T>().ToList();
        }
    } 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-14T15:00:18.987

你可以这样做： [http ://blog.orangelightning.co.uk/?p=105](http://blog.orangelightning.co.uk/?p=105)

# javascript - Any JS polyfills out there that will take properties like RGBA and convert them to rough IE equivalents?

> ID：10146037
> 
> 赞同：0
> 
> 时间：2012-04-13T18:07:45.110
> 
> 标签：javascript, html, css, rgba

So lately I've been enjoying using [-prefix-free](http://leaverou.github.com/prefixfree/) and while for awhile I didn't believe in doing post-processing using JS, I'm a bit of a believer now.

Now I enjoy using newer properties like 'rgba' and 'text-shadow', but throwing in filters in my CSS file is always unnerving, even if it is pre-processed in PHP.

Are there any tools out there that will take care of applying MS filters and the like for me, while still leaving my CSS untainted from the evil of MS filters?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T19:58:23.630

有一些限制[css3pie](http://css3pie.com)应该做你需要的。文档也很清楚。

# php - Symfony2 service structure

> ID：10146038
> 
> 赞同：0
> 
> 时间：2012-04-13T18:08:01.113
> 
> 标签：php, symfony, soa

I am having a hard time understanding Symfony2 services. I have read lots of stuff everywhere (including some here in SO) but none seems to fully explain it.

Suppose I have a bundle A and a separated bundle B. I want B functionality available to the A bundle. I want to inject B in the service container so A will be able to use it.

Which bundle should have a Services directory? Which one should have a configuration file? Both if needed? And where the Extension goes? Why?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T19:55:58.690

Bundle B will require an Extension in order to load it's services.xml file.

Bundle B will require an entry in it's services.xml file to define the service.

Bundle B will have the Services directory containing your service class which exposes the desired functionality.

Bundle A does not require anything special. It will be able to use the container to access the service exposed by Bundle B. Just needs to know the service id.

It's confusing until you make a few services.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T18:44:52.280

首先阅读这两个问题和我对它们的回答：

*   [Symfony2 概念问题：一般捆绑包与特定捆绑包](https://stackoverflow.com/questions/8012191/symfony2-conceptual-issue-general-bundles-vs-specific-ones)，
*   [Symfony 2 中的所有东西都应该是一个捆绑包吗？](https://stackoverflow.com/questions/9999433/should-everything-really-be-a-bundle-in-symfony-2)

假设您正在谈论特定于应用程序的捆绑包，我建议只使用一个捆绑包并将服务排除在外。然后，您可以通过多种方式注册您的服务：

*   直接在`config.yml`,
*   在[您](http://symfony.com/doc/current/book/service_container.html#importing-configuration-via-container-extensions)的`AppBundle`, 或
*   通过来自的注释[`JMSDiExtraBundle`](https://github.com/schmittjoh/JMSDiExtraBundle)——这是我个人更喜欢的。

# java - Java SQL "syntax error or access violation"

> ID：10146040
> 
> 赞同：1
> 
> 时间：2012-04-13T18:08:08.337
> 
> 标签：java, mysql, hibernate

I'm trying to learn how to use Java hibernate with mysql, and I'm having troubles running the example I've downloaded. I'm getting the following error:

```
Exception in thread "main" org.hibernate.exception.GenericJDBCException: Cannot open connection
    at org.hibernate.exception.ErrorCodeConverter.handledNonSpecificException(ErrorCodeConverter.java:92)
    at org.hibernate.exception.ErrorCodeConverter.convert(ErrorCodeConverter.java:80)
    ....
    at org.hibernate.persister.entity.BasicEntityPersister.insert...

**Caused by: java.sql.SQLException: Syntax error or access violation message from        server: "Access denied for user 'web'@'localhost' to database 'hibernatetutorial'"**
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:1997)
    ...
    at org.hibernate.connection.DriverManagerConnectionProvider.getConnectio... 
```

My configuration file includes the following code:

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
"-//Hibernate/Hibernate Configuration DTD//EN"
"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
<session-factory>
      <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
      <property name="hibernate.connection.url">jdbc:mysql://localhost/hibernatetutorial</property>
      <property name="hibernate.connection.username">web</property>
      <property name="hibernate.connection.password">web</property>
      <property name="hibernate.connection.pool_size">10</property>
      <property name="show_sql">true</property>
      <property name="dialect">org.hibernate.dialect.MySQLDialect</property>
      <property name="hibernate.hbm2ddl.auto">update</property>
      <!-- Mapping files -->
      <mapping resource="contact.hbm.xml"/>
</session-factory>
</hibernate-configuration> 
```

and the main function (which was downloaded from: [http://www.roseindia.net/hibernate/runninge-xample.shtml](http://www.roseindia.net/hibernate/runninge-xample.shtml)) includes the following code:

```
public static void main(String[] args) {
    Session session = null;

    try{
        // This step will read hibernate.cfg.xml and prepare hibernate for use
        SessionFactory sessionFactory = new Configuration().configure().buildSessionFactory();
         session =sessionFactory.openSession();
            //Create new instance of Contact and set values in it by reading them from form object
            System.out.println("Inserting Record");
            Contact contact = new Contact();
            contact.setId(6);
            contact.setFirstName("Deepak");
            contact.setLastName("Kumar");
            contact.setEmail("deepak_38@yahoo.com");
            session.save(contact);
            System.out.println("Done");
    }catch(Exception e){
        System.out.println(e.getMessage());
    }finally{
        // Actual contact insertion will happen at this step
        session.flush();
        session.close();

        } 
```

I've created the new "web" user with all the required permissions using:

```
CREATE USER 'web'@'localhost' IDENTIFIED BY 'web';

GRANT ALL PRIVILEGES ON hibernatetutorial.* TO web@localhost IDENTIFIED BY 'web'; 
```

And I've created the "hibernatetutorial" database. Any idea what I'm doing wrong? I don't even know how to debug this.

Thanks, Li

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:16:24.213

`ON mydb.* TO web@localhost`

不应该 `ON hibernatetutorial.* TO web@localhost`

# java - 用线程代码替换标准同步的并行java“actor”代码是什么

> ID：10146041
> 
> 赞同：5
> 
> 时间：2012-04-13T18:08:09.160
> 
> 标签：java, scala, concurrency, actor, akka

如果我有这个同步代码，我想用没有同步的演员替换它，怎么办？

```
public synchronized int incrementAndGet() {
  i = i + 1;
  return i;
} 
```

我在网站上有一群用户，我需要为每个用户返回一个递增的数字......我如何用没有同步的演员代码替换该代码，因此没有阻塞同步代码。我猜这将能够在多核等上运行它（这不是演员的目的吗？）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T18:27:08.923

一个简单的actor包裹`i`在它的内部状态中：

```
case object Inc

class IncrementingActor extends Actor {
    var i = 0

    protected def receive = {
        case Inc =>
            i += 1
            sender ! i
    }
} 
```

并阻止使用（您需要以`incrementAndGet`某种方式获得）：

```
import akka.pattern.ask

def incrementAndGet() = 
  Await.result((incrementingActor ? Inc).mapTo[Int], 1 seconds) 
```

这段代码是：缓慢、复杂且不习惯。怎么样`AtomicInteger`？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T12:01:02.310

并发是一个具有多个问题和陷阱的广阔领域。没有一种方法能够解决所有问题，真正的并发专家能够结合多种方法来获得最佳结果。

目前在 JVM 世界中，我认为没有比原子整数更好的替代方法来增加计数器，尤其是在争用非常高的情况下。

话虽如此，如果你想使用actors，获得性能和可伸缩性的诀窍是尽可能避免*ask* ( `?`) 操作。改用*tell* ( `!`) 然后yield。当结果可用时，actor 将接收它并恢复控制。没有任何阻塞，线程池同时能够处理其他参与者。只有当你们中的大多数代码都在演员内部时，这才有效。

从 Thomas 解决方案开始，您可以编写如下内容：

```
case object Inc
case class Count(i)

class IncrementingActor extends Actor {
   var i = 0
   protected def receive = {
     case Inc =>
        i += 1
        sender ! Count(i)
  }
}

class FooActor( counter: ActorRef ) extends Actor {
  protected def receive = {
    case DoSomething() => {
      // Perform some work
      counter ! Inc
    }
    case Count(i) => {
      // Do something with the counter result   
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T00:27:49.563

`incrementAndGet()`如果您想使用一个演员，同步递增一个计数器（如）几乎没有什么好处。*从视图中*隐藏，实际上演员的邮箱中存在同步。此外，[AtomicInteger](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicInteger.html)类在多核架构上也能正常工作。

# jquery - 找不到另一个文件中的jquery方法

> ID：10146044
> 
> 赞同：0
> 
> 时间：2012-04-13T18:08:15.480
> 
> 标签：jquery, asp.net-mvc

我有一个文件-“Site.js”，方法如下：

```
function Init() {
  $(document).ready(function() {
    //some init actions here
  });
}
function jQuery.fn.DivToggle(div) {
  $(div).toggle('fast');
  //some other animation code here
} 
```

在我的 Index.cshtml 文件中（我使用的是 asp.net mvc），我有这个：

```
<!DOCTYPE html>
<html>
  <head id="Head1" runat="server">
    <script src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/Site.js")" type="text/javascript"></script>
  </head>
  <body>
    <script type="text/javascript">
      $(function () {
        Init();
      });
    </script>
  </body>
</html> 
```

运行项目时出现此错误：“Microsoft JScript 运行时错误：'Init' 未定义”

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T18:32:01.930

`Init`未定义，因为`Site.js`.

```
function jQuery.fn.DivToggle(div) {
  $(div).toggle('fast');
  //some other animation code here
} 
```

你实际上不能那样做。它应该是：

```
jQuery.fn.DivToggle = function(div) {
  $(div).toggle('fast');
  //some other animation code here
}; 
```

PS`$(function(){`是一样的`$(document).ready(function(){`。您不需要函数`$(document).ready(function(){`内部。`Init`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T18:33:50.917

我认为真正的问题在于您的 DivToggle() 函数。您应该将该代码更改为以下内容：

```
(function( $ ) {
  $.fn.DivToggle = function() {
     $(this).toggle('fast');
  };
})( jQuery ); 
```

然后，您可以通过创建选择器并调用它来调用 DivToggle。因此，如果您想在页面中的所有 div 标签上运行它，请执行以下操作：

```
$('div').DivToggle(); 
```

以下是有关创建自定义插件的一些文档：http: [//docs.jquery.com/Plugins/Authoring](http://docs.jquery.com/Plugins/Authoring)

您可能需要更改调用 Init() 和 document.ready() 的方式。实际上 Init() 函数现在并没有真正做任何事情。我认为您可以将代码更改为此，它会完成您想要的：

```
<script type="text/javascript">

//create the DivToggle() function
(function( $ ) {
  $.fn.DivToggle = function() {
     $(this).toggle('fast');
  };
})( jQuery );

$(function () {
    //call DivToggle() on all <div> tags when the page loads
    $('div').DivToggle();
});

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T18:40:42.000

尝试命名你的javascript：

```
 StackOverflow = {

      function Init(){

      }

      return {
        Init: Init
      };
 }(); 
```

调用你的函数

```
$(function(){
     StackOverflow.Init();
}); 
```

# asp.net - Crystal Reports ASP.NET Web Viewer - Trigger event when Print

> ID：10146045
> 
> 赞同：0
> 
> 时间：2012-04-13T18:08:22.373
> 
> 标签：asp.net, crystal-reports

How can I trigger and event or detect a postback is for printing purposes when the user "prints" the report?

I'd like to update a field in the Database for LastPrintedDate.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T06:15:42.397

用这个

```
if(IsPostBack)
{
.....update your db..
} 
```

**编辑**

也看看这个

[***水晶报表查看器打印***](https://stackoverflow.com/a/5722796/1268469)

# c - 如何在代码块中设置或避免多个函数返回检查

> ID：10146046
> 
> 赞同：1
> 
> 时间：2012-04-13T18:08:27.417
> 
> 标签：c, design-patterns, coding-style

在我的代码中很多时候我都有这样的块：

```
close(READ);
dup(fd[READ]);
close(fd[READ]);
execl("ay", "bee", NULL); 
```

如何避免一堆

```
if (close(READ) == -1) {
    perror("close");
    exit(EXIT_FAILURE);
}
...repeat for each function... 
```

或者有什么好的做法来处理这个问题？

我试过这样的事情：

```
void test_returns(int result, char * err) {
    if (result == -1) {
        perror(err);
        exit(EXIT_FAILURE);
    }
}

/* code */
test_returns(close(READ), "close");
test_returns(dup(fd[READ]), "dup");
test_returns(close(fd[READ]), "close");
test_returns(execl("ay", "bee", NULL), "execl"); 
```

但我认为这不是一个好方法。对此有什么好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T20:30:20.187

到目前为止，这个问题的最佳解决方案是在这里偶然遇到的：http: [//c.learncodethehardway.org/book/learn-c-the-hard-waych21.html#x26-10500021](http://c.learncodethehardway.org/book/learn-c-the-hard-waych21.html#x26-10500021)

我认为其他答案中建议的每个函数的宏要干净得多。也许有人有更好的解决方案，但现在这是我将使用的。

# sql-server-2008 - View to return row duplicated the # of times represented by amount field value

> ID：10146048
> 
> 赞同：3
> 
> 时间：2012-04-13T18:08:38.303
> 
> 标签：sql-server-2008, tsql

I have an accounting table that contains a dollar amount field. I want to create a view that will return one row per penny of that amount with some of the other fields from the table.

So as a very simple example let's say I have a row like this:

```
PK     Amount     Date
---------------------------
123    4.80       1/1/2012 
```

The query/view should return 480 rows (one for each penny) that all look like this:

```
PK      Date
-----------------
123     1/1/2012 
```

What would be the most performant way to accomplish this? I have a solution that uses a table valued function and a temp table but in the back of my head I keep thinking there has got to be a way to accomplish this with a traditional view. Possibly a creative cross join or something that will return this result without having to declare too many resources in the form of temp tables, and tbf's etc. Any ideas?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T18:12:32.763

您可以使用[CTE](http://msdn.microsoft.com/en-us/library/ms190766.aspx)，如下所示：

```
WITH duplicationCTE AS 
(
    SELECT PK, Date, Amount, 1 AS Count
    FROM myTable
    UNION ALL
    SELECT myTable.PK, myTable.Date, myTable.Amount, Count+1
    FROM myTable
         JOIN duplicationCTE ON myTable.PK = duplicationCTE.PK
    WHERE Count+1 <= myTable.Amount*100
)
SELECT PK, Date
FROM duplicationCTE
OPTION (MAXRECURSION 0); 
```

[这是 SqlFiddle](http://sqlfiddle.com/#!3/5c9b71/1)

并且，请注意 0。这意味着它可以无限运行（危险的顺便说一句）否则，32676 是您可以设置的最大递归数（默认为 100）。但是，如果您运行超过 32676 个循环，那么您可能需要重新考虑您的逻辑 :)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T18:18:35.133

在[数字表](https://stackoverflow.com/questions/10819/sql-auxiliary-table-of-numbers)的帮助下，您可以这样做：

```
select PK, [Date]
from YourTable as T
  inner join number as N
    on N.n between 1 and T.Amount * 100 
```

如果您周围没有并且想要测试它，您可以使用 master..spt_values。

```
declare @T table
(
  PK int,
  Amount money,
  [Date] date
)

insert into @T values
(123,    4.80,       '20120101')

;with number(n) as
(
  select number 
  from master..spt_values
  where type = 'P'
)
select PK, [Date]
from @T as T
  inner join number as N
    on N.n between 1 and T.Amount * 100 
```

**更新：**
来自 Jeff Moden 的一篇文章。
[“数字”或“Tally”表：它是什么以及它如何替换循环。](http://www.sqlservercentral.com/articles/T-SQL/62867/)

> Tally 表只不过是一个表，其中包含从 0 或 1 开始（我的从 1 开始）并上升到某个数字的非常好的索引序列号的单列。Tally 表中的最大数字不应该只是一些随意的选择。它应该基于您认为您将使用它的目的。我将 VARCHAR(8000) 与我的分开，所以它必须至少有 8000 个数字。由于我偶尔需要生成 30 年的日期，因此我将大部分生产 Tally 表保持在 11,000 或更多，即超过 365.25 天乘以 30 年。

# java - How can I write simple custom Android Handler class?

> ID：10146050
> 
> 赞同：1
> 
> 时间：2012-04-13T18:08:43.513
> 
> 标签：java, android

It's interesting for me how it's possible to write simple Android Handler class using only pure java to send signals from one thread to another?

I saw the source code: [http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.1_r2/android/os/Handler.java](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.1_r2/android/os/Handler.java)

But how for example to write class (Handler class) that can send for example int value from one thread to another(not using share data(like in Android Handler?))?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T18:18:08.520

如果您的线程与接收消息的处理程序具有相同的方法，您可以这样做：

```
final Handler handler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
             // do something
    }
}

final Thread th = new Thread() {
    public void run() {
            // do something than send an integer - x in our case
            int x = 0;         
            final Message msg = Message.obtain(handler, x, null);
            handler.dispatchMessage(msg);
        }
    };
th.start(); 
```

如果您的处理程序不能直接从线程访问，则创建一个扩展 Thread 的类并将处理程序传递给该类的构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-05T14:40:04.370

这就是您如何通过仅使用 Java Api 的 .

```
private class CustomHandler {

private final Runnable POISON = new Runnable() {
    @Override
    public void run() {}
};

private final BlockingQueue<Runnable> mQueue = new LinkedBlockingQueue<>();

public CustomHandler() {
    initWorkerThread();
}

private void initWorkerThread() {
    new Thread(new Runnable() {
        @Override
        public void run() {
            Log.d("CustomHandler", "worker (looper) thread initialized");
            while (true) {
                Runnable runnable;
                try {
                    runnable = mQueue.take();
                } catch (InterruptedException e) {
                    return;
                }
                if (runnable == POISON) {
                    Log.d("CustomHandler", "poison data detected; stopping working thread");
                    return;
                }
                runnable.run();
            }
        }
    }).start();
}

public void stop() {
    Log.d("CustomHandler", "injecting poison data into the queue");
    mQueue.clear();
    mQueue.add(POISON);
}

public void post(Runnable job) {
    mQueue.add(job);
}
} 
```

我想指出问题本身，即您不使用处理程序将 int 值从一个线程传递到另一个线程。处理程序用于在另一个线程中运行任务。如果要在两个线程之间共享变量，请考虑使用 volatile 关键字和原子变量。

# android - android eclipse using string resource for text size in layouts

> ID：10146057
> 
> 赞同：5
> 
> 时间：2012-04-13T18:09:13.637
> 
> 标签：android, eclipse, resources, text-size

I want to be able to store a font size (18sp) in a resource so that a lot of my layouts will use so that I can easily change the size in the future if I need to. I've a string in a string resource file with "18sp" as the value, and I can call it in the layout editor by setting the text size to "@strings/string_name". At that point everything is fine, and the text is changed to the correct font. The problem is once I try to test that on an actual device I get :

```
04-13 12:01:01.210: E/AndroidRuntime(17114): Caused by: android.view.InflateException:    Binary XML file line #50: Error inflating class <unknown>

04-13 12:01:01.210: E/AndroidRuntime(17114):    at 

android.view.LayoutInflater.createView(LayoutInflater.java:606)
04-13 12:01:01.210: E/AndroidRuntime(17114):    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
04-13 12:01:01.210: E/AndroidRuntime(17114):    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
04-13 12:01:01.210: E/AndroidRuntime(17114):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
04-13 12:01:01.210: E/AndroidRuntime(17114):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
04-13 12:01:01.210: E/AndroidRuntime(17114):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
04-13 12:01:01.210: E/AndroidRuntime(17114):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
04-13 12:01:01.210: E/AndroidRuntime(17114):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
04-13 12:01:01.210: E/AndroidRuntime(17114):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
04-13 12:01:01.210: E/AndroidRuntime(17114):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
04-13 12:01:01.210: E/AndroidRuntime(17114):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
04-13 12:01:01.210: E/AndroidRuntime(17114):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
04-13 12:01:01.210: E/AndroidRuntime(17114):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
04-13 12:01:01.210: E/AndroidRuntime(17114):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
04-13 12:01:01.210: E/AndroidRuntime(17114):    at android.app.Activity.setContentView(Activity.java:1835)
04-13 12:01:01.210: E/AndroidRuntime(17114):    
04-13 12:01:01.210: E/AndroidRuntime(17114):    at android.app.Activity.performCreate(Activity.java:4465)
04-13 12:01:01.210: E/AndroidRuntime(17114):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-13 12:01:01.210: E/AndroidRuntime(17114):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
04-13 12:01:01.210: E/AndroidRuntime(17114):    ... 11 more
04-13 12:01:01.210: E/AndroidRuntime(17114): Caused by: java.lang.reflect.InvocationTargetException
04-13 12:01:01.210: E/AndroidRuntime(17114):    at java.lang.reflect.Constructor.constructNative(Native Method)
04-13 12:01:01.210: E/AndroidRuntime(17114):    at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
04-13 12:01:01.210: E/AndroidRuntime(17114):    at android.view.LayoutInflater.createView(LayoutInflater.java:586)
04-13 12:01:01.210: E/AndroidRuntime(17114):    ... 29 more
04-13 12:01:01.210: E/AndroidRuntime(17114): Caused by: java.lang.UnsupportedOperationException: Can't convert to dimension: type=0x3
04-13 12:01:01.210: E/AndroidRuntime(17114):    at android.content.res.TypedArray.getDimensionPixelSize(TypedArray.java:463)
04-13 12:01:01.210: E/AndroidRuntime(17114):    at android.widget.TextView.<init>(TextView.java:786)
04-13 12:01:01.210: E/AndroidRuntime(17114):    at android.widget.TextView.<init>(TextView.java:442) 
```

Is this because I am using a string resource as a text size, or would it be some other underlying problem? If it is because i am using a string resource, is there a different / more proper way to have a global text size that I can call on so that I can change everything by modifying 1 value?

Also to note: My app worked just fine before I tried using a string resource as a text size, so I'm relatively certain it can't be something unrelated that is causing the error.

THanks!

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-13T18:13:36.363

在 res 目录中创建一个 dimens.xml 文件，其内容类似于：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <dimen name="some_text_size">18dp</dimen>
</resources> 
```

然后不要像@string/blah 那样引用它，而是使用@dimen/blah。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T18:15:05.720

将其用作您的 XML 资源并从您想要的任何地方调用它...

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <dimen name="textview_height">25dp</dimen>
    <dimen name="textview_width">150dp</dimen>
    <dimen name="ball_radius">30dp</dimen>
    <dimen name="font_size">16sp</dimen>
</resources> 
```

然后在代码中调用它：

```
Resources res = getResources();
float fontSize = res.getDimension(R.dimen.font_size); 
```

# eclipse - Eclipse RCP - Programmatically setting a view to not be closeable

> ID：10146058
> 
> 赞同：1
> 
> 时间：2012-04-13T18:09:15.103
> 
> 标签：eclipse, rcp

I'm trying to create an RCP view that is not closeable. I need a way to set this property programmatically because I'm creating views with secondary IDs in in the code. I can't do it through the extension editor dialogs because of this.

Is there a way to remove the x from a view programmatically?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T15:52:57.993

我终于能够弄清楚这一点。

在您的透视`createInitialLayout()`函数中，您可以获取视图的布局并设置其可关闭属性：

```
IViewLayout vLayout = layout.getViewLayout(View.ID);
vLayout.setCloseable(false); 
```

这也适用于具有辅助 ID 的视图。在这种情况下，代码将完全相同，因为它将 closeable 属性应用于共享相同主 ID 的所有辅助视图。

我发现以下方法不起作用：

```
IViewLayout vLayout = layout.getViewLayout(View.ID + ":1");
vLayout.setCloseable(false); 
```

因此，您不能根据辅助 ID 使单个视图可关闭。整个组要么是，要么不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-08T08:24:20.177

你可以很容易地做到这一点。

只需将 view 的可关闭属性设置为 False 即可。

```
IViewLayout layout= layout.getViewLayout(View.ID);
layout.setCloseable(false); 
```

# javascript - hoverstate on diagonal jquery grid

> ID：10146061
> 
> 赞同：0
> 
> 时间：2012-04-13T18:09:36.787
> 
> 标签：javascript, jquery, grid, rotation, diagonal

I'm trying to create this grid:

![grid example](../Images/f4b9c12c98a69f424039dce2e4bd27bb.png)

I've made some html generated with jQuery and rotated that with jQuery.rotate. Now my div's are overlapping each other causing a problem to my hover state.

Couldn't find any question that looks like this, has anybody done something like this before?

If you need to look into the code I can post the html / css and javascript. Because it's quite a lot of code I'll do that by request.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:24:59.437

好吧，将太多的潜水叠加在一起并不是我认为的好主意..你为什么不尝试使用 svg 来代替..那些是为这种情况而设计的..但是如果你仍然想使用 div 那么请向我们展示您项目的代码.. :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T14:28:05.440

为什么不对具有**绝对**定位的每个块使用 css **transform-rotate**，然后您可以使用 jQuery 将所有的顶部和左侧属性设置到网格上。我在[http://neolab.no/](http://neolab.no/)上找到了类似的东西，他们还使用媒体查询来重新定位每个块。

# c# - 获取PDF文件页面开始和结束的索引？

> ID：10146062
> 
> 赞同：0
> 
> 时间：2012-04-13T18:09:38.940
> 
> 标签：c#, c++, pdf, itext

在pdf文件的页面上，我想获得开始偏移量和结束偏移量。如何得到它？或者在pdf结构中，我们可以识别这个位置是页面开始还是页面结束的字段是什么？非常感谢。

# c# - 制定公式并在读取用户输入的标签上显示值

> ID：10146066
> 
> 赞同：0
> 
> 时间：2012-04-13T18:09:43.293
> 
> 标签：c#, winforms

基本上我希望用户在文本框中输入 3 个值，并有一个按钮来计算 3 个输入值的总和。我以为我可以读取用户输入，然后将其转换为整数，然后应用公式计算出 fnum+snum+tnum = total; 到目前为止我所做的一切都不起作用，任何人都可以指导我谢谢。

```
 int num1 = int.Parse(weighting1.Text);
         int num2 = int.Parse(weighting2.Text);
         int num3 = int.Parse(weighting3.Text);
         total = num1+num2+num3;
         int total = int.parse(lTotal.Text);
         // Code to display the variable 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T18:14:40.950

而不是 int.parse(lTotal.Text) 您需要将总计的字符串值分配给标签

```
lTotal.Text = total.ToSTring(); 
```

您的代码应该是：

```
 int num1 = int.Parse(weighting1.Text);
 int num2 = int.Parse(weighting2.Text);
 int num3 = int.Parse(weighting3.Text);
 int total = num1+num2+num3;
 lTotal.Text = total.ToSTring(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T18:13:03.607

如果我理解正确，`lTotal`是你的标签，你想把值`total`放入标签的文本中吗？如果是这样的话：

```
lTotal.Text = total.ToString() 
```

您当前的代码朝另一个方向发展……它读取当前标签 lTotal 的文本，尝试将该文本解析为整数，并将其分配给总计。您还在该行（`int total`，而您`total`在前一行中使用）重新声明了不应编译的总数。

# html - 溢出：隐藏没有像我预期的那样工作

> ID：10146068
> 
> 赞同：0
> 
> 时间：2012-04-13T18:10:01.810
> 
> 标签：html, css

我有一个显示由服务器生成的图像列表的 html 页面，但我不想显示图像的底部 2%。我的解决方案是在包含图像的 div 上使用溢出：隐藏，然后在将图像设置为 display:inline-block 后为图像提供 2% 的 margin-top。这对于我构建的一个简单的概念验证页面非常有用，但对于实际页面却不是那么好。我在[这里](http://singularity-id.com/overflowIssues.zip)上传了两个页面。

编辑：jsbin页面：

[在职的](http://jsbin.com/otaduk)

[非工作](http://jsbin.com/eqiwax)

我已经尝试过 chrome 和 IE9，但在任何一个浏览器中都没有运气

这是它不起作用的页面的 html。

```
<!DOCTYPE html>
<html>
<head>
    <title>Test</title>
    <link rel="stylesheet" type="text/css" href="./Test_files/ci.css">
</head>
<body>
    <div id="StockListTable" class="ListTable">
        <div class="PreviewCell"> <img style="border-style:none" alt="Preset 1" src="./Test_files/GetPreviewImage"/></div>
        <div class="PreviewCell"> <img style="border-style:none" alt="Preset 2" src="./Test_files/GetPreviewImage(1)"/></div>
        <div class="PreviewCell"> <img style="border-style:none" alt="Preset 3" src="./Test_files/GetPreviewImage(2)"/></div>
        <div class="PreviewCell"> <img style="border-style:none" alt="Preset 4" src="./Test_files/GetPreviewImage(3)"/></div>
        <div class="PreviewCell"> <img style="border-style:none" alt="Preset 5" src="./Test_files/GetPreviewImage(4)"/></div>
        <div class="PreviewCell"> <img style="border-style:none" alt="Preset 6" src="./Test_files/GetPreviewImage(5)"/></div>
        <div class="PreviewCell"> <img style="border-style:none" alt="Preset 7" src="./Test_files/GetPreviewImage(6)"/></div>
        <div class="PreviewCell"> <img style="border-style:none" alt="Preset 8" src="./Test_files/GetPreviewImage(7)"/></div>
        <div class="PreviewCell"> <img style="border-style:none" alt="Preset 9" src="./Test_files/GetPreviewImage(8)"/></div>
        <div class="PreviewCell"> <img style="border-style:none" alt="Preset 10" src="./Test_files/GetPreviewImage(9)"/></div>
        <div class="PreviewCell"> <img style="border-style:none" alt="Preset 11" src="./Test_files/GetPreviewImage(10)"/></div>
        <div class="PreviewCell"> <img style="border-style:none" alt="Preset 12" src="./Test_files/GetPreviewImage(11)"/></div>
        <div class="PreviewCell"> <img style="border-style:none" alt="Preset 13" src="./Test_files/GetPreviewImage(12)"/></div>
        <div class="PreviewCell"> <img style="border-style:none" alt="Preset 14" src="./Test_files/GetPreviewImage(13)"/></div>
        <div class="PreviewCell"> <img style="border-style:none" alt="Preset 15" src="./Test_files/GetPreviewImage(14)"/></div>
        <div class="PreviewCell"> <img style="border-style:none" alt="Preset 16" src="./Test_files/GetPreviewImage(15)"/></div>
        <div class="PreviewCell"> <img style="border-style:none" alt="Preset 17" src="./Test_files/GetPreviewImage(16)"/></div>
        <div class="PreviewCell"> <img style="border-style:none" alt="Preset 18" src="./Test_files/GetPreviewImage(17)"/></div>
        <div class="PreviewCell"> <img style="border-style:none" alt="Preset 19" src="./Test_files/GetPreviewImage(18)"/></div>
        <div class="PreviewCell"> <img style="border-style:none" alt="Preset 20" src="./Test_files/GetPreviewImage(19)"/></div>
    </div>
</body>
</html> 
```

和 CSS

```
html
{
    margin:0;
    padding:0;
    width:100%;
}

body
{
    margin:0;
    padding:0;
    font-family:sans-serif;
    color:white;
    background-color:black;
    width:100%;
    overflow-x:hidden;
}

.PreviewCell
{   
    width:12%;
    height:20%;
    overflow:hidden;
    float:left;
    padding-left:1px;
    padding-right:1px;
}

.ListTable
{ 
    margin:0;
    width:104%;
    height:86%;
}

.PreviewCell img
{ 
    display:inline-block;
    width:100%;
    height:100%;
    margin-top:2%;
} 
```

它确实将边距添加到图像的顶部，但它不会隐藏溢出，它只是使图像行之间有更多的空间。

这是它适用的页面。

```
<html>
<head>
    <style type="text/css">
        .testimage
        {
            display:inline-block;
            width:100%;
            height:100%;
            margin-top:2%;
        }
        .container
        {
            width:12%;
            height:20%;
            overflow:hidden;
            float:left;
            padding-left:1px;
            padding-right:1px;
        }
    </style>
</head>
<body bgcolor="#000000">
    <div class="container">
        <img class="testimage" src="http://192.168.0.76/ImprovCollection/GetPreviewImage?URL=sspci://StockPresets/1&Width=75&Height=76&Color=%23000000" onclick="alert('test');"/>
    </div>
    <div class="container">
        <img class="testimage" src="http://192.168.0.76/ImprovCollection/GetPreviewImage?URL=sspci://StockPresets/1&Width=75&Height=76&Color=%23000000" onclick="alert('test');"/>
    </div>
    <div class="container">
        <img class="testimage" src="http://192.168.0.76/ImprovCollection/GetPreviewImage?URL=sspci://StockPresets/1&Width=75&Height=76&Color=%23000000" onclick="alert('test');"/>
    </div>
    <div class="container">
        <img class="testimage" src="http://192.168.0.76/ImprovCollection/GetPreviewImage?URL=sspci://StockPresets/1&Width=75&Height=76&Color=%23000000" onclick="alert('test');"/>
    </div>
</body>
</html> 
```

我很困惑为什么这不起作用，我什至验证了页面（我从来没有做过）并检查了它。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T20:05:40.430

如果您想要移除底部边距，您可以使用[负边距裁剪技术。](http://coding.smashingmagazine.com/2009/07/27/the-definitive-guide-to-using-negative-margins/)

```
.PreviewCell img
{  
display:inline-block;
width:100%;
height:100%;
margin-bottom: -4%;
} 
```

如果您要删除白线，则最小百分比会随浏览器宽度而变化。

# android - Android 告诉服务在其他服务完成之前不要启动

> ID：10146072
> 
> 赞同：0
> 
> 时间：2012-04-13T18:10:13.760
> 
> 标签：android, service

我的应用程序中有两个后台服务，它们由 AlarmManager 定期安排。每项服务的时间间隔不同。我想每两分钟运行一项服务，每 15 分钟运行另一项服务。

**如何防止它们同时运行？**

如果一个服务在另一个服务运行时被调用，我希望它在第一个服务完成后立即运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T19:00:40.293

> 我想每两分钟运行一项服务，每 15 分钟运行另一项服务。
> 
> 如何防止它们同时运行？

您将它们组合成一个服务，每 N 分钟运行一次，每 M 次执行一次频率较低的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T18:17:03.417

只安排一个您想首先启动的服务，当该服务完成时，在`onDestroy`第一个服务中启动另一个服务。

# c++ - 从按值返回创建 const lvalue-reference：它是如何工作的？

> ID：10146073
> 
> 赞同：2
> 
> 时间：2012-04-13T18:10:18.520
> 
> 标签：c++, memory-management, g++, stack, rvalue-reference

我从[这里](https://stackoverflow.com/questions/7340925/return-by-value-assigned-to-const-reference)了解到，一个 const 引用可以由函数的值返回的对象构成。但现在我问自己：把这个对象放在哪里，这样它是安全的，不会被未来的函数调用堆栈覆盖？

考虑这段代码：

```
#include <iostream>
using namespace std;

struct A{};

A returnsmt(){
    int avariable;
    cout<<"returnsmt stack: "<<&avariable<<endl;
    return A();
}

const A& proxyreturnsmt(){
    int avariable;
    const A& middle=returnsmt();
    cout<<"proxyreturnsmt stack: "<<&avariable<<" A ptr: "<<&middle<<endl;
    return middle;
}

int main(){
    int avariable;
    const A& a=proxyreturnsmt();
    cout<<"main stack: "<<&avariable<<" A ptr: "<<&a<<endl;
} 
```

现在，知道它将从堆栈对象创建引用甚至是不可行`main`的，因此诀窍不可能是它将隐藏指针传递给它自己的空闲堆栈桶。g++ 上的这段代码打印：

```
returnsmt stack: 0x7fff3718bc0c
proxyreturnsmt stack: 0x7fff3718bc28 A ptr: 0x7fff3718bc2f
main stack: 0x7fff3718bc4c A ptr: 0x7fff3718bc2f 
```

所以看起来，如果堆栈向下增长，那么对象所在的位置实际上`proxyreturnsmt`就是 的堆栈。如果在得到这个引用之后，你怎么会不会遇到麻烦，比方说，`function_with_big_stack_alloc`，所以肯定会回收旧`proxyreturnsmt`的堆栈以供新的使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T18:12:29.053

该程序表现出未定义的行为。在`proxyreturnsmt`中，您绑定`middle`到一个临时对象。该临时对象的生命周期只会延长到`middle`超出范围。

然后返回对`middle`;的引用 但它所引用的对象在函数返回时被销毁。因此，在`main`绑定`a`到调用结果的地方`proxyreturnsmt`，`a`是一个悬空引用（它所引用的对象不再存在）。

当您尝试使用引用时（通过获取不再存在的被引用对象的地址），程序会表现出未定义的行为。

# ruby-on-rails - 为什么在向哈希添加哈希时，Ruby 似乎嵌套了添加的哈希？

> ID：10146074
> 
> 赞同：0
> 
> 时间：2012-04-13T18:10:19.283
> 
> 标签：ruby-on-rails, ruby

我正在尝试创建一个二维哈希，如下所示：

```
permissions['enrollment'] = ['read' => true, 'create' => true, 'update' => true]
permissions['invoices'] = ['read' => true, 'create' => false, 'update' => false] 
```

这就是我所做的...

```
permissions = Hash.new
permissions['enrollment'] = ['read' => true, 'create' => true, 'update' => true]
permissions['invoices'] = ['read' => true, 'create' => false, 'update' => false] 
```

当我在 irb 中“放置”权限时，我得到了这个......

```
{
   "enrollment"=>[{"read"=>true, "create"=>false, "edit"=>false}],
   "invoices"=>[{"read"=>true, "create"=>false, "update"=>false}]
 } 
```

从上面的输出可以看出，权限['enrollment'] 的另一个散列中似乎有一个散列`[{}]`！！！

我想像这样访问注册的读取权限：`permissions['enrollment']['read']`但根据`puts permission`它不起作用，我收到此错误`TypeError: can't convert String into Integer`

为了让我访问注册的读取权限，我必须这样做：`permissions['enrollment'][0]['read']`.

我怎样才能像这样使注册读取权限... `permissions['enrollment']['read']`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T18:11:59.970

您的语法已关闭。哈希由花括号分隔。方括号用于数组。如果您来自 PHP 世界，您可能会混淆这两者。尝试这个：

```
permissions = Hash.new
permissions['enrollment'] = {'read' => true, 'create' => true, 'update' => true}
permissions['invoices'] = {'read' => true, 'create' => false, 'update' => false} 
```

# android - 如何在更改应用程序的主背景时保持 ActionBar 项目的背景相同？

> ID：10146078
> 
> 赞同：1
> 
> 时间：2012-04-13T18:10:43.157
> 
> 标签：android, android-theme, android-actionbar

我正在尝试更改应用程序的背景，但是当我执行以下操作（sdk 14）时，操作栏中的项目也会更改以匹配新的背景颜色。操作栏*本身*具有正确的背景，但操作栏中的项目没有。我能够让 actionbarmenuitems 正确，但标题和搜索视图以及主页图标和后退按钮都在自定义主题上设置了背景。我究竟做错了什么？

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
   <style name="Theme.Holo.DarkerBack" parent="@android:style/Theme.Holo.Light.DarkActionBar">
      <item name="android:background">@color/background</item>
      <item name="android:actionBarStyle">@android:style/Widget.Holo.Light.ActionBar.Solid.Inverse</item>
   </style>
</resources> 
```

![有错误的主页视图](../Images/3334956ebbbdb5a7003e3a2d3dd1f827.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T18:21:01.030

尝试更换

```
<item name="android:background">@color/background</item> 
```

和

```
 <item name="android:windowBackground">@color/background</item> 
```

# javascript - CoffeeScript 中的三元运算

> ID：10146080
> 
> 赞同：331
> 
> 时间：2012-04-13T18:10:51.657
> 
> 标签：javascript, coffeescript, ternary-operator

我需要根据`a`条件设置值。

使用 CoffeeScript 执行此操作的最短方法是什么？

例如，这就是我在 JavaScript 中的做法：

```
a = true  ? 5 : 10  # => a = 5
a = false ? 5 : 10  # => a = 10 
```

* * *

## 回答 #1

> 赞同：559
> 
> 时间：2012-04-13T18:14:05.740

由于一切都是表达式，因此会产生一个值，因此您可以使用`if/else`.

```
a = if true then 5 else 10
a = if false then 5 else 10 
```

[您可以在此处](http://coffeescript.org/#expressions)查看有关表达式示例的更多信息。

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2012-04-13T18:15:48.143

```
a = if true then 5 else 10
a = if false then 5 else 10 
```

请参阅[文档](http://coffeescript.org/#conditionals)。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-03-27T15:27:44.080

在几乎任何语言中，这都应该起作用：

```
a = true  && 5 || 10
a = false && 5 || 10 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2016-08-23T05:34:50.083

Coffeescript**不支持**javascript 三元运算符。这是**咖啡脚本作者**的原因：

> 我和下一个家伙一样喜欢三元运算符（实际上可能更多一点），但语法并不是让它们变得好的原因——它们很棒，因为它们可以将 if/else 放在一行中作为表达。
> 
> 它们的语法只是另一种难以记忆的神秘魔法，与该语言中的其他任何东西都没有相似之处。结果是相等的，我宁愿`if/elses`看起来总是一样的（并且总是被编译成一个表达式）。
> 
> 因此，在 CoffeeScript 中，即使是多行 if 也会在适当的时候编译成三元组，就像没有 else 子句的 if 语句一样：
> 
> ```
> if sunny   
>   go_outside() 
> else   
>   read_a_book().
> 
> if sunny then go_outside() else read_a_book() 
> ```
> 
> 两者都成为三元组，都可以用作表达式。它是一致的，不需要学习新的语法。所以，感谢您的建议，但我将这张票关闭为“wontfix”。

请参考github问题：[https ://github.com/jashkenas/coffeescript/issues/11#issuecomment-97802](https://github.com/jashkenas/coffeescript/issues/11#issuecomment-97802)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-08-02T19:57:30.227

如果它主要是真正的用途，您也可以将它写在两个语句中：

```
a = 5
a = 10 if false 
```

如果您需要更多可能性，或者使用 switch 语句：

```
a = switch x
  when true then 5
  when false then 10 
```

使用布尔值可能会过大，但我发现它非常易读。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-09-18T07:29:15.087

多行版本（例如，如果您需要在每行之后添加注释）：

```
a = if b # a depends on b
then 5   # b is true 
else 10  # b is false 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-13T16:21:34.750

`CoffeeScript`没有三元运算符。这就是文档所说的。

您仍然可以使用类似的语法

```
a = true then 5 else 10 
```

就清楚多了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-08-26T17:12:29.710

类似于 quoteBro 的[answer](https://stackoverflow.com/a/46273847/6207208)，但没有`then`关键字。这是一个使用普通的多行 if 语句的版本。对我来说，这个格式很好。

考虑这个正常的 if 语句

```
if true
    # do stuff
else
    # do stuff 
```

然后将其用于赋值（同样，没有`then`关键字）

```
value = if true
    5
else
    10

value = if false
    5
else
    10 
```

这编译为 javascript 就像一个普通的三元

```
value = true ? 5 : 10;
value = false ? 5 : 10; 
```

# ruby-on-rails - 我在运行 Rails Web 服务器时遇到问题

> ID：10146081
> 
> 赞同：0
> 
> 时间：2012-04-13T18:10:54.263
> 
> 标签：ruby-on-rails, configuration, webserver

我已经安装了 ruby​​193 并通过命令提示符安装了 rails（我还安装了 DevKit）。但是，每当我尝试命令时：

```
rails server 
```

我收到此错误：

```
←[31mCould not find gem 'jquery-rails (>= 0) x86-mingw32' in the gems available
on this machine.←[0m
←[33mRun `bundle install` to install missing gems.←[0m 
```

我尝试了捆绑安装，但在尝试安装 json gem 时出现错误。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T18:20:48.903

确保在您的 Gemfile 中包含正确的 gem（没有拼写错误等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T18:24:34.283

看起来你在 Windows 上。

`Gemfile`通过从( `gem install gem_to_install`)手动安装我的 gem，我在 Windows 上解决了同样的问题。在成功安装了一个特定的 gem 之后，我跑去`bundle check`看看我还需要安装什么。这样，在安装了几个 gem 之后，我`bundle check`再次运行并看到了输出`The Gemfile's dependencies are satisfied`。

然后服务器启动。我希望你也一样！

PS您可以一次安装几个gem `gem install gem1 gem2`：.

# matlab - 未知维度矩阵的索引

> ID：10146082
> 
> 赞同：10
> 
> 时间：2012-04-13T18:10:59.210
> 
> 标签：matlab, multidimensional-array, matrix-indexing

我有一个非固定维度矩阵 M，我想从中访问单个元素。元素的索引包含在向量 J 中。

例如：

```
M = rand(6,4,8,2);
J = [5 2 7 1];

output = M(5,2,7,1) 
```

这次 M 有 4 个维度，但这是事先不知道的。这取决于我正在编写的算法的设置。也可能是这样

```
M = rand(6,4);
J = [3 1];

output = M(3,1) 
```

所以我不能简单地使用

```
output=M(J(1),J(2)) 
```

我正在考虑使用[sub2ind](http://www.mathworks.nl/help/techdoc/ref/sub2ind.html)，但这也需要它的变量逗号分隔..

@gnovice

这行得通，但我打算大量使用这种从矩阵中提取的元素`M`。`cellJ`因此，如果我每次访问时都必须创建一个临时变量`M`，这不会极大地减慢计算速度吗？

我也可以写一个单独的函数

```
function x= getM(M,J)
    x=M(J(1),J(2));
    % M doesn't change in this function, so no mem copy needed = passed by reference
end 
```

并使其适应算法的不同配置。这当然是速度与灵活性的考虑，我的问题中没有包含。

但是：这仅可用于获取元素，用于设置除了实际使用索引（最好是线性索引）之外别无他法。我仍然认为 sub2ind 是一种选择。我想要的最终结果是这样的：

```
function idx = getLinearIdx(J, size_M)
    idx = ...
end 
```

* * *

## 结果：

```
function lin_idx = Lidx_ml( J, M )%#eml
%LIDX_ML converts an array of indices J for a multidimensional array M to
%linear indices, directly useable on M
%
% INPUT
%   J       NxP matrix containing P sets of N indices
%   M       A example matrix, with same size as on which the indices in J
%           will be applicable.
%
% OUTPUT
%   lin_idx Px1 array of linear indices
%

% method 1
%lin_idx = zeros(size(J,2),1);
%for ii = 1:size(J,2)
%    cellJ = num2cell(J(:,ii)); 
%    lin_idx(ii) = sub2ind(size(M),cellJ{:}); 
%end

% method 2
sizeM = size(M);
J(2:end,:) = J(2:end,:)-1;
lin_idx = cumprod([1 sizeM(1:end-1)])*J;

end 
```

方法 2 比方法 1 快 20（少量索引集（`=P`）转换）到 80（大量索引集（`=P`））倍。容易选择

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-13T18:28:05.740

对于可以是任何长度的一般情况`J`（我假设它总是与 中的维数匹配`M`），您有几个选项：

1.  您可以`J`使用该函数将 的每个条目放在元胞数组的一个元胞中，然后使用[冒号运算符](https://www.mathworks.com/help/matlab/ref/colon.html)从此元胞数组[`num2cell`](https://www.mathworks.com/help/matlab/ref/num2cell.html)创建一个[逗号分隔的列表](https://www.mathworks.com/help/matlab/matlab_prog/comma-separated-lists.html)：

    ```
    cellJ = num2cell(J);
    output = M(cellJ{:}); 
    ```

2.  您可以回避该函数并通过一些数学自己[`sub2ind`](https://www.mathworks.com/help/matlab/ref/sub2ind.html)计算[线性索引：](https://www.mathworks.com/help/matlab/math/array-indexing.html#MatrixIndexingExample-2)

    ```
    sizeM = size(M);
    index = cumprod([1 sizeM(1:end-1)]) * (J(:) - [0; ones(numel(J)-1, 1)]);
    output = M(index); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-19T20:32:05.737

这是 gnovices 选项 2) 的一个版本，它允许处理整个下标矩阵，其中每一行包含一个下标。例如对于 3 个下标：

```
J = [5 2 7 1 
     1 5 2 7
     4 3 9 2];

sizeM = size(M);
idx = cumprod([1 sizeX(1:end-1)])*(J - [zeros(size(J,1),1) ones(size(J,1),size(J,2)-1)]).'; 
```

# c# - 每天上午 9 点到 10 点之间的 CronExpression

> ID：10146085
> 
> 赞同：0
> 
> 时间：2012-04-13T18:11:11.917
> 
> 标签：c#, quartz-scheduler, quartz.net, cronexpression

如何安排每天早上 8 点到 11 点之间的任务，每 5 分钟一次？这将是什么配置条目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:31:53.877

你也可以使用 Quartz Scheduler DailyTimeIntervalScheduleBuilder 类：

```
Trigger trigger = (Trigger) newTrigger().withSchedule(DailyTimeIntervalScheduleBuilder.dailyTimeIntervalSchedule().startingDailyAt(new TimeOfDay(8,0)).endingDailyAt(new TimeOfDay(11,0)).withInterval(5, IntervalUnit.MINUTE)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T17:04:27.353

`0 0/5 9 * * ?`

有关如何构造石英调度程序的 cron 表达式的含义，请参见[this 。](http://www.quartz-scheduler.org/documentation/quartz-2.x/tutorials/tutorial-lesson-06)你也可以通过这个[网站测试 cron 表达式](http://www.cronmaker.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T18:18:36.570

如果我对您的要求理解正确，您将在您的 crontab 中创建一个如下所示的行：

0,5,10,15,20,25,30,35,40,45,50,55 8,9,10 * * **命令执行你想做的*

希望有帮助！

这是解释 crontabs的[另一个信息来源-](http://www.thegeekstuff.com/2009/06/15-practical-crontab-examples/)

[http://www.thegeekstuff.com/2009/06/15-practical-crontab-examples/](http://www.thegeekstuff.com/2009/06/15-practical-crontab-examples/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-28T10:59:02.757

```
 ITrigger trigger = TriggerBuilder.Create()
                     .WithIdentity("trigger1")
                     .StartNow()
                     .WithSchedule(
                     DailyTimeIntervalScheduleBuilder.Create()
                     .StartingDailyAt(TimeOfDay.HourAndMinuteOfDay(8,0)).EndingDailyAt(TimeOfDay.HourAndMinuteOfDay(10,0)))
                      .Build(); 
```

# python - 无法在 django 中发布未选中的复选框值

> ID：10146086
> 
> 赞同：0
> 
> 时间：2012-04-13T18:11:21.753
> 
> 标签：python, django, checkbox, web

我在 Django 表单（**Django v1.2**）中发布复选框的状态时遇到了麻烦。

这是我模型中的字段：

`subscribe = models.BooleanField(default=False, verbose_name="Subscribe")`

在相关的模板文件中：

`{{ form.subscribe }}`

这会使复选框最初处于未选中状态。但是当我发布表单时（不涉及其他任何内容），django会发送`u'subscribe': [u'on']`. `request.POST`也就是说，`u'subscribe': [u'on']`无论复选框是否被选中，响应总是包含。

当复选框未选中时，`<input>`模板中的标签呈现为
`<input type="checkbox" name="subscribe" id="id_subscribe" />`

并且，当复选框被选中时，它呈现为
`<input type="checkbox" name="subscribe" id="id_subscribe" checked="checked" />`

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T19:40:49.337

您的浏览器将值发布为“on”。这是未设置 value="blah" 属性的复选框输入的正常行为。如果即使未选中复选框，它也总是发布为“打开”，那么浏览器端可能有一些东西正在设置它。

# django - 在 MongoDB 存储中使用 sorl-thumbnail

> ID：10146087
> 
> 赞同：2
> 
> 时间：2012-04-13T18:11:23.130
> 
> 标签：django, mongodb, python-imaging-library, sorl-thumbnail

我扩展了 sorl-thumbnail 的 KVStoreBase 类，并制作了一个使用单个 MongoDB 集合的键值对后端。这样做是为了避免安装离散键值存储（例如 Redis）。

我应该每隔一段时间清除一次收藏吗？

**有什么缺点？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:19:58.130

仅当低磁盘使用率对您而言比快速访问时间更重要时，才清除集合。

# 缺点是您的用户都会同时点击未缓存的拇指（并同时开始重新计算它们）。

赶紧跑`python manage.py thumbnail cleanup`

> 这会从陈旧的缓存中清除键值存储。它会删除对不存在的图像的引用和缩略图引用以及它们对不存在的图像的实际文件。它会删除未知图像的缩略图。

# testing - Codility 极大数错误

> ID：10146093
> 
> 赞同：0
> 
> 时间：2012-04-13T18:11:57.493
> 
> 标签：testing

我有一个 Codility 测试要尽快进行。我试图通过使用 LONG 而不是 INT 在代码中找到一个修改以避免 EXTREME LARGE NUMBERS ERROR ......但这没有用。

有没有人尝试过使用 CODILITY 演示测试并获得 100 分？

我浏览了以前的帖子，但没有解决这个特定问题。

我的代码：复杂度 O(N)……我还是得到了 94。

```
 // you can also use includes for example:
// #include <algorithm>
#include<iostream>
#include<vector>
#include<math.h>

int equi ( const vector<int> &A ) {
if((int)A.size()==0)
    return -1;

long int sum_l = A[0];
long int total_sum =0;

for(int i =0; i<(int)A.size();i++){
    total_sum = total_sum + A[i];
    }

    int flag =0;
    total_sum = total_sum -A[0];

    if(total_sum == 0)
        return 0;

for(int i=1; i<(int)A.size()-1;i++){
    total_sum = total_sum - A[i];
    if(sum_l ==total_sum){
        flag=1;
        return i;
        }
    sum_l= sum_l + A[i];
    }
if(sum_l ==0)
    return (int)A.size()-1;

if(flag ==0)
    return -1;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-15T01:50:39.503

我用过`long long`，没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-27T23:33:10.520

试试这个。

```
 int left = A[0];
    int right = 0;

    for(int i: A){
        right += i;
    }
    right -= left;

    int diff = Math.abs(left - right);
    for (int i = 1; i < A.length-1; i++) {
        left += A[i];
        right -= A[i];
        int a = Math.abs(left - right);
        if(diff > a){
            diff = a;
        }
    }
    return diff; 
```

# javascript - 传递函数作为参数和弹出窗口阻止程序

> ID：10146094
> 
> 赞同：2
> 
> 时间：2012-04-13T18:11:57.910
> 
> 标签：javascript

我有树函数：

```
var a = function (f)
{
    // some code
    window.open("")
    f();
};

var b = function (f)
{
   // some code
   f();
}

var c = function()
{
} 
```

我正在使用带有匿名函数的链调用函数：

```
a(function () {
    b(function () {
        c();
    });
}); 
```

如果我直接调用 a 函数，弹出窗口阻止程序不会阻止我的弹出窗口，因为 window.open 是由用户单击触发的。但是使用链，弹出窗口阻止程序阻止了我的弹出窗口。

我怎样才能避免它？

ps：这是facebook弹出窗口，我不想做我不应该做的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T18:19:17.693

不同的浏览器表现不同。我认为 Firefox 是最严格的，只允许在与 onclick 相同的事件循环中直接生成弹出窗口。在 Chrome 中，您可以在两者之间进行异步调用，它仍然可以工作。- 至少那是我记忆中的记忆。

问题是，你几乎无法控制它。是否允许弹出窗口取决于浏览器。您可以为每个浏览器开发一些启发式方法，但这并不理想。

尝试找到一个解决方案，该解决方案将`window.open`在最有可能工作的同一个偶数循环中调用（如果这不起作用，则可以安全地假设什么都不起作用）。也许是`a()`异步的？通过闭包，您可以将引用传递`var my_window = window.open`给任何后续函数，以防您稍后需要向 DOM 添加内容。

例子：

```
var a = function (f) {
    var my_window = window.open("");
    f(my_window);
};

var b = function (f) {
   f();
};

var c = function() {};

a(function (my_window) {
    my_window.innerHTML = "hello";
    b(function () {
        c();
    });
}); 
```

# css - 将叠加层添加到图像

> ID：10146097
> 
> 赞同：1
> 
> 时间：2012-04-13T18:12:08.623
> 
> 标签：css

如果他们将鼠标悬停在图像上，我想为图像添加叠加层。

我尝试了很多方法，但图像似乎消失或保持不变。

这就是它的样子

```
<a id="icon"
  style="background: url(/images/layout/top/icon.gif); height:23px; width:23px; float:left; margin-right:3px;"
  href="page.php?pageid=123" title="Icon">
</a> 
```

确实，我所追求的是一种快速更改图像而无需制作更多图像的方法。

所以当不悬停在图像上时 - 原始图像 当悬停在图像上时 - 40% 的颜色覆盖？

先谢谢了。

**我尝试了什么：**

```
a.thumbnail {
background-color:orange;
filter: Alpha(Opacity=40, Style=0); 
-moz-opacity: 40%; 
opacity: 0.4; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T19:21:52.920

我创建了一个小小提琴，它不会覆盖，但仅使用 CSS 就能产生相同的效果。另外，为了好玩，我还加入了一些 CSS 过渡。基本上在通过伪元素悬停显示的图像后面创建一个 div。这样，您仍然可以放入标签，而无需疯狂地创建 CSS 背景图像。只需换掉 alpha 的东西以使覆盖以另一种方式工作。

[http://jsfiddle.net/wesleyterry/jwXvA/#base](http://jsfiddle.net/wesleyterry/jwXvA/#base)

希望这就是你要找的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T18:17:20.953

基本上，如果它是一个叠加层，您可以假设高度和宽度可能是相同的。

在这个演示中，我不小心使用了 25 大小的图像。更改为 23

[http://jsfiddle.net/raU2J/7/](http://jsfiddle.net/raU2J/7/)

```
<div class="overlay_wrapper">
   <a href="#"></a>
   <div class="overlay"></div>
   <img src="cake.jpg" />
</div>​

.overlay,
.overlay_wrapper a,
.overlay_wrapper {
  width: 25px;
  height: 25px;
  position: relative;
}

.overlay_wrapper a {
  position: absolute;
  z-index: 10;
  display: block;
}

.overlay {
  display: none;
  background: red;
  position: absolute;
  top: 0;
  left: 0;
  filter: Alpha(Opacity=40, Style=0); 
  -moz-opacity: 40%; 
  opacity: 0.4; 
  z-index: 9;
}​ 
```

jQuery：

```
$(".overlay_wrapper").hover(
  function () {
    $(this).find('.overlay').fadeIn();
  }, 
  function () {
    $(this).find('.overlay').fadeOut();
  }
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T18:37:12.347

示例演示：

`html`

```
<div class="img"><div class="overlap"></div></div> 
```

`css`

```
.img {width:100px;height:100px;background:red;position:relative;}
.overlap { visibility:hidden;}
.hover .overlap {position:absolute;top:0;left:0;width:100px;height:100px;background:#333;filter:alpha(opacity=40); /* for IE */  -moz-opacity:0.4; opacity: 0.4;-khtml-opacity: 0.4; visibility:visible;} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T18:19:06.350

仅使用单个 是不可能的`<a>`，但您可以将其`<a>`放入容器（跨度或 div）中。为容器提供所需的背景，并提供`a:hover`类似的背景颜色`rgba(255, 255, 255,.4)`。

如果这不能如您所愿，请详细说明您的要求。

# html - 将 CGI 脚本放入 HTML 页面

> ID：10146104
> 
> 赞同：1
> 
> 时间：2012-04-13T18:12:43.880
> 
> 标签：html, shell, cgi

我对网络编程知之甚少，非常感谢您对此的帮助。

我有一个带有输入字段的 HTML 页面：

```
<input type="text" size=20 /> 
```

我想运行一个将返回一个值的 CGI 脚本，以便在页面首次加载时将其作为默认值放在输入字段中。

所以我猜它看起来像这样：

```
<input type="text" size=20 value=Run CGI script /> 
```

该脚本是一个我命名为 hostname.cgi 的 shell 脚本，它包含以下内容：

```
#!/bin/sh

printf "Content-type: text/html\n\n"
printf $REMOTE_ADDR 
```

当我尝试使用

```
value=<!--include virtual="hostname.cgi" --> 
```

我在 HTML 页面上收到一个错误，指出运行此指令（或类似指令）时发生错误。

我究竟做错了什么？此外，该脚本与 html 文件位于同一目录中。页面上的其他 CGI 脚本工作得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:49:18.500

不确定您要在这里做什么，我真的必须查看整个代码。但是，我怀疑这与您的格式和定义的操作有关：

```
<form action="/some_script_name" method="post">
<input type="text" name="ab" value="">
<input type="submit" value="Submit">
</form> 
```

您还需要用引号将属性括起来：

```
<input type="text" size="20" value="Run CGI script" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T21:08:17.033

要将某些默认值放在某个由 CGI 脚本生成的位置，您需要使整个页面由 CGI 脚本生成。这意味着页面的地址将是对此类脚本的引用。详细信息取决于用于 CGI 脚本的编程语言。

# python - Django 数据库查询。在数据库中查找重复项并阻止它们被提交

> ID：10146106
> 
> 赞同：0
> 
> 时间：2012-04-13T18:13:01.330
> 
> 标签：python, database, django

我正在尝试进入我的数据库，查看之前是否已提交过某个提交，以及是否已阻止它再次提交。目前我有这段代码测试表单的每个字段（显然每个字段都会更改，但我认为为了简单起见我只显示一个字段）

```
if request.method == 'POST':
    Cashtexts.objects.filter(cashTexts=request.POST['cashTexts']).exists() == False: 
```

然后，如果它不存在，它会继续并将提交的内容保存到数据库中。如果它返回 true，它会转到 else 语句，告诉用户他们输入的内容已经被输入。以前这种类型的东西有效，但我更改了一些变量名，现在它停止工作了。我已经浏览了几次代码，所以我认为这种类型的过滤器可能存在根本性的问题，但在我看来这是有道理的。

```
def submit_win(request):
    if request.method == 'POST':
        if Cashtexts.objects.filter(cashTexts=request.POST['cashTexts']).exists() or Cashtexts.objects.filter(superPoints=request.POST['superPoints']).exists() or Cashtexts.objects.filter(varolo= request.POST['varolo']).exists() or Cashtexts.objects.filter(swagbucks = request.POST['swagbucks']).exists() or Cashtexts.objects.filter(neobux = request.POST['neobux']).exists() or Cashtexts.objects.filter(topline=request.POST['topline']).exists() or Cashtexts.objects.filter(Paidviewpoint=request.POST['Paidviewpoint']).exists() or Cashtexts.objects.filter(cashcrate=request.POST['cashcrate']).exists() == False:
            form = CashtextsForm(request.POST)
            if form.is_valid():
                form.save()
                ref_create = Cashtexts.objects.filter(cashTexts=request.POST['cashTexts'])
                return render_to_response('submitted_page.html', {'ref_create': ref_create})
        else: #Error message reading wither you didnt insert codes or you enter the same code twice
            error = 'That code has already been submitted'
            ref_create = CashtextsForm()
            return render_to_response('submit.html', {'ref_create': ref_create,'error':error}, context_instance=RequestContext(request))
    else: #displays the page when the user asks to go to the submit page
        ref_create = CashtextsForm()
        return render_to_response('submit.html', {'ref_create': ref_create}, context_instance=RequestContext(request)) 
```

此外，我将 Cashtexts.objects.filter(cashTexts=request.POST['cashTexts']) 转换为变量并将其传递给我的模板以查看它返回的内容以及它返回的对象应该告诉声明 True。但它似乎只是忽略了它们并提交了它们。

我想我可以删除与他们在提交时输入的内容匹配的所有以前的对象，但这会降低安全性，并可能导致用户一遍又一遍地提交，以为他们在那里得到了更多。我宁愿在它发生之前停止它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:19:44.230

您可以在模型定义中将 cashTexts 字段的定义设置为唯一：

```
def Cashtexts(models.Model):
    name = CharField(max_length=50, unique = True) 
```

只需为您想要唯一的每个字段设置“唯一”参数为 true，然后您就完成了。Django 表单 API 的工作方式，表单字段将接管所有必要的错误处理。

* * *

在必要时将模型字段设置为唯一的，您可以更轻松地完成以下操作：

```
def view(request):

    if request.method == 'POST':
        form = CashtextsForm(request.POST)

        """ the next line is going to check uniqueness for each
            of the models fields where you have set unique = True
            If the field is not unique, it s field will have an
            attribute error, which you can then render to the template """
        if form.is_valid():
            form.save()
    else:
        form = CashtextsForm()

    context = RequestContext(request)

    # now i pass the form to the template as 'ref_create'
    context.update( {'ref_create':form} )
    return render_to_response('submit.html',context) 
```

然后，您只需在模板中呈现该表单（使用 form.as_p()、form.as_table() 或使用类似这样的一些自定义代码）：

```
{% for field in ref_create %}
    {{ field.label_tag }}
    {{ field }}
    {{ field.errors }}
{% endfor %} 
```

每个在模型定义中设置为唯一的字段，如果您的表单被保存，它在数据库中将不再是唯一的，现在将有一条错误消息说“具有此名称的 Cashtext 已经存在”。

* * *

自定义错误消息可以通过两种方式完成：1：自定义表单（我不建议这样做，除非您对 Django 的工作方式有更好的理解）2：而不是`{{ field.errors }}`写这样的东西：

```
{% if field.errors %}
     The Cashtext field {{field.name}} value should be unique.
{% endif %} 
```

# jquery - JQuery & Html：如何在 JQuery 中用另一个动态包装 DIV？

> ID：10146108
> 
> 赞同：0
> 
> 时间：2012-04-13T18:13:06.573
> 
> 标签：jquery, html, css, xml

我有一个`xml`这样的文件：

```
<posts>
    <post id="123">
        <title>UN meets on North Korean missile launch - </title>
        <link>index2.htm</link>
    </post>
    <post id="124">
        <title>UN meets on North Korean missile launch - </title>
        <link>index2.htm</link>
    </post>
</posts> 
```

我的`html`文件中有一个 div，`id='contact'`我想从我的`xml`文件中提取数据到我的 div 中`html`，所以我会从中选择`<post>`标签`xml`并从中提取`<link>`标签，然后将它们中的每一个放在一行中`<div class="line">`，这样当这个`div`s 宽度等于页面宽度，`<div class="line">`将关闭，其余`<link>`的将附加到`<div class="line">`将生成的新页面。

```
<div id="container">

<div id="top-nav">
    <ul>
        <li><a href="#">Website.com</a></li>
        <li><a href="#">About Me</a></li>
        <li><a href="#">News</a></li>
        <li><a href="#">Services</a></li>
        <li><a href="#">Abilities</a></li>
        <li><a href="#">Ideas</a></li>
    </ul>
</div>

<div id="content">
<!-- Content Will Goes Here! -->
</div>

<div id="bottom-nav">
    <ul>
        <li><a href="#">Contact</a></li>
        <li><a href="#">Branches</a></li>
        <li><a href="#">Jobs</a></li>
        <li><a href="#">Privacy Policy</a></li>
        <li><a href="#">Publishs</a></li>
    </ul>
</div>

</div> 
```

我想这样做`JQuery`：

```
$(document).ready(function() {

    $.ajax({
        type:"GET",
        url:"posts.xml",
        dataType:"xml",
        success:function(xml){

            var line = '<div class="line"></div>';
            $(line).appendTo('#content');
            $(xml).find('post').each(function(index, element) {

                var postLink = $(element).find('link').text();
                var postFont = $(element).find('font').text();

                var Link = '';
                Link += '<div class="link '+postFont+'"><a href="'+postLink+'">';
                Link += $(element).find('title').text(); 
                Link += '</a></div>';

                var lastLine = $('.line')[$('.line').length-1];
                var lineHeightBefore = parseInt($(lastLine).css('height'));
                //alert(lineHeightBefore);
                    console.log(lineHeightBefore);
                $(Link).appendTo(lastLine);
                var lineHeightAfter = parseInt($(lastLine).css('height'));

                if(lineHeightAfter > lineHeightBefore){
                    $('.link').last().remove();
                    $(line).appendTo('#content');
                    lastLine = $('.line')[$('.line').length-1];
                    $(Link).appendTo(lastLine);
                }

            });

        }
    });
}); 
```

但是效果不好。
请查看并测试我的代码以找到问题
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:18:31.307

如果您想将内容放入该 DIV。

$("#content").html(-你想要什么-);

前任。$("#content").html("一些东西");

# r - R 2.15 中 scale_continuous 中的格式化程序参数引发错误

> ID：10146109
> 
> 赞同：15
> 
> 时间：2012-04-13T18:13:07.550
> 
> 标签：r, ggplot2

自升级到 R 2.15 以来，格式化程序参数似乎正在引发错误。这是我 2 年来每天都在使用的论点，真是太糟糕了。

R 版本 2.15.0 (2012-03-30)

ggplot2 版本 0.9.0

```
> library(ggplot2)
> x <- 1:100
> y <- 1/x
> p <- qplot(x,y)
> p + scale_y_continuous(formatter = "percent")
Error in continuous_scale(c("y", "ymin", "ymax", "yend", "yintercept",  : 
  unused argument(s) (formatter = "percent") 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-13T18:23:00.427

0.9.0 版本的语法已更改。请参阅此处的过渡指南：[https ://github.com/downloads/hadley/ggplot2/guide-col.pdf](https://github.com/downloads/hadley/ggplot2/guide-col.pdf)

```
library(ggplot2)
library(scales)
x <- 1:100
y <- 1/x
p <- qplot(x,y) + scale_y_continuous(labels  = percent) 
```

# java - 在 NetBeans 7.1.1 中创建 UML 类图

> ID：10146111
> 
> 赞同：12
> 
> 时间：2012-04-13T18:13:12.420
> 
> 标签：java, netbeans, uml, netbeans-7.1

我想安装/启用用于创建和查看 UML 图的 NetBeans 插件，如此[处所示](http://wiki.netbeans.org/wiki/images/b/b8/Vista_Nimbus_Uml_Screenshot_NBLookAndFeels.JPG)。然而，相当广泛的搜索已经找到了 NetBeans 6.5 和更低版本的结果，而我使用的是 NetBeans 7.1.1。（虽然我尝试了这些解决方案，但无济于事；他们所说的应该在 IDE 中没有，例如更新管理器）**有谁知道如何让 NetBeans 7.1.1 显示 Java 项目的 UML 图？**

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-28T06:05:39.033

以下是如何在 7.1 上安装

向更新中心添加新配置：工具 -> 插件 -> 设置 -> 添加

作为 URL，将以下内容复制到文本框中： http: [//dlc.sun.com.edgesuite.net/netbeans/updates/6.9/uc/m1/dev/catalog.xml](http://dlc.sun.com.edgesuite.net/netbeans/updates/6.9/uc/m1/dev/catalog.xml)

现在，在可用插件选项卡上，UML 类别中应该有 UML。安装插件，就完成了..!!

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-13T18:30:57.350

Netbeans 6.7 是支持 UML 的最后一个版本。对于 7.1，有 (1) 一个半损坏的解决方法和 (2) [yWorks UML Doclet](http://www.yworks.com/en/downloads.html#yDoc)，它可以让您生成图表。有关更多详细信息，请参阅[此](http://michelelepri.blogspot.com/2012/03/netbeans-70-and-71-uml-plugin.html)内容。

**编辑**：您可以在 7.1 上手动[安装 UML 插件。](https://stackoverflow.com/questions/6944002/uml-plugin-for-netbeans-7-0/8987726#8987726)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-18T21:26:50.137

如何使用与 Net Beans 集成的 Visual Paradigm

[http://www.visual-paradigm.com/tutorials/modelinginnetbeans.jsp](http://www.visual-paradigm.com/tutorials/modelinginnetbeans.jsp)

# php - 使用之前在其他类中声明的对象

> ID：10146112
> 
> 赞同：2
> 
> 时间：2012-04-13T18:13:18.177
> 
> 标签：php, pdo

这是我的一般 php 页面：

```
<?php
require_once('includes.php');
require_once('cms.class.php');
.....
rest of the page
?> 
```

在`includes.php`一个名为 $db 的 pro 对象中启动，我想在指定的类中使用它`cms.class.php`

包括.php：

```
$db = new PDO('mysql:host=localhost;dbname=xxxxx','xxxxx','xxxxxx'); 
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
$db->setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE, PDO::FETCH_ASSOC); 
```

如何在我的类中使用此数据库对象，而无需在多个地方存储我的凭据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T18:35:14.580

你~~需要~~ 一个依赖管理器或一个引导程序或任何你想称呼它的东西**。**

```
class Dependency_Manager {

    private $db;

    public function __construct($settings) {
        $this->db = new PDO('mysql:host=localhost;dbname=' . settings["dbname"],settings["username"],$setings["password"]); 
        $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
        $db->setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE, PDO::FETCH_ASSOC);
    }

    public function getDB() {
        return $db;
    }

}

class CMS {
    public function __construct(PDO $db) {
        /* .. */
    }
}

$setting = array(/* etc */);

$dm = new Dependency_Manager($settings);
$cms = new CMS($dm->getDB()); 
```

这种方法可以很好地扩展并且可以处理任何依赖。它还旨在将所有设置放在一个地方，这样您就不会到处乱扔配置设置。是唯一知道设置的`$dm`人，如果你需要根据设置构建一些东西，把它放在`$dm`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T18:38:39.380

有两种方法可以解决这个问题。

第一种方式，注射，越来越受欢迎。注入意味着您将为您的班级提供 $db 。你可以做这样的事情。

注射：

```
class CMS_class {
  protected static $db;

  public function __construct($db) {
    if ( ! isset(self::$db))
      self::$db = $db;
  }

  public function __get($name) {
    if ($name === 'db')
      return self::$db;
  }
} 
```

现在，当您构建 CMS 类时，您将 $db 变量传递给它，该变量可通过 ->db 访问，但只有一个实例。

第二种方法是在您使用它的每个函数中全局调用它。

全球的：

```
class CMS_class {
  function hello_world() {
    global $db;
    var_dump($db);
  }
} 
```

这种方式正在失去流行，因为全局变量通常不受欢迎，并且您必须在需要 $db 的每个函数中声明它。

还有其他与您的问题相关的好答案。 [如何在简单的 php 函数中使用“依赖注入”，我应该打扰吗？](https://stackoverflow.com/questions/2255771/how-can-i-use-dependency-injection-in-simple-php-functions-and-should-i-bothe)

# vb.net - SeriesCollection.Add() 和 SeriesCollection.NewSeries() 之间有什么细微差别吗？

> ID：10146117
> 
> 赞同：2
> 
> 时间：2012-04-13T18:13:54.083
> 
> 标签：vb.net, excel

我正在使用 vb.net 来控制一个 Excel 工作簿。

我注意到有两个选项可以在图表的系列集合中创建系列，或者使用`SeriesCollection.Add()`一些指定为参数的起始参数，或者使用`SeriesCollection.NewSeries()`不初始化参数。

我想知道，除了它们初始化不同的明显区别之外，我应该注意两者之间是否有任何区别？

我想知道，因为我过去曾使用`SeriesCollection.Add()`过，但现在想要比该方法允许的更具体地指定 x 和 y 值。这使我找到了`SeriesCollection.NewSeries()`方法，但是我不确定是否有任何不明显的重要差异。

我的目的是创建一个新系列，并将该系列分配给类型变量以`excel.series`供将来操作。我真的不想在开始时指定任何内容，但我不知道这是否会导致其他问题。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T03:33:19.120

NewSeries 命令返回新系列。即使 Add 声明它返回一个它添加到集合中的系列，但它没有。文档可能是导致您混淆的原因。查看有关该主题的 MSDN 文章：http: [//msdn.microsoft.com/en-us/library/ff194065.aspx](http://msdn.microsoft.com/en-us/library/ff194065.aspx)

# php - 使用 MySQL LOAD_FILE() 将 XML 添加到列

> ID：10146122
> 
> 赞同：1
> 
> 时间：2012-04-13T18:13:58.207
> 
> 标签：php, mysql

我想使用 MySQL 将 xml 文件加载到表列中。如何使用 INSERT 语句而不是 UPDATE 语句来执行此操作？

此代码执行 INSERT 以创建新行，获取最后插入行的 id，然后尝试执行更新以加载 xml 文件。但它不会使用 xml 信息更新该行。

我想知道要解决什么问题才能将 xml 放入数据库列中。我还想简化代码并在一个 INSERT 语句中执行 LOAD_FILE。

MySQL数据库表结构

```
Field         Datatype       Attributes            Extra

userid        INT(6)         unsigned              auto_increment
user_events   LONGTEXT 
```

PHP代码添加xml文件

```
<?php
ini_set('display_errors', 1);
error_reporting(E_ALL);

$con = mysql_connect("hostname","adminuser","adminpassword");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
mysql_select_db("test_db", $con);

$qinsert = "INSERT INTO load_xml (`user_events`) VALUES ('user events')";
$result_insert = mysql_query($qinsert);

$qtext = "SELECT * FROM load_xml";
$result = mysql_query($qtext);
$numrows = mysql_num_rows ( $result );

while ($row = mysql_fetch_row($result)) {
    echo 'user id '.$row[0].' user_events '.$row[1].'<br/>';
}

$insert_id = "SELECT LAST_INSERT_ID()";
$rin_id = mysql_query($insert_id);
$row = mysql_fetch_row($rin_id);
$userid = $row[0];
echo 'last added id '.$userid.'<br/>';

$update_xml = "UPDATE load_xml SET user_events=LOAD_FILE('my_events.xml') WHERE userid='$userid'";
$result_update = mysql_query($update_xml);

$qtext = "SELECT * FROM load_xml";
$result = mysql_query($qtext);
$numrows = mysql_num_rows ( $result );

echo $numrows.'<br/>';

while ($row = mysql_fetch_row($result)) {

    echo 'user_id '.$row[0].' user_events '.$row[1].'<br/>';

}

mysql_close($con);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T19:47:05.230

只需将文件添加到原始插入中即可。文件路径是服务器上文件的路径。用于连接的 mysql 用户必须具有文件权限。它必须是完整路径。在 Windows 上，您需要用正斜杠替换反斜杠 -

```
<?php
ini_set('display_errors', 1);
error_reporting(E_ALL);

$con = mysql_connect("hostname","adminuser","adminpassword");
if (!$con) {
    die('Could not connect: ' . mysql_error());
}
mysql_select_db("test_db", $con);

$qinsert = "INSERT INTO load_xml (`user_events`) VALUES (LOAD_FILE('/full/path/to/my_events.xml'))";
$result_insert = mysql_query($qinsert);

$userid = mysql_insert_id();
echo 'last added id '.$userid.'<br/>';

$qtext = "SELECT * FROM load_xml";
$result = mysql_query($qtext);
$numrows = mysql_num_rows ( $result );

while ($row = mysql_fetch_row($result)) {
    echo 'user id '.$row[0].' user_events '.$row[1].'<br/>';
}

mysql_close($con);

?> 
```

**更新- 这是使用**[PDO 准备语句](http://php.net/manual/en/pdo.prepare.php)和[file_get_contents()](http://uk3.php.net/manual/en/function.file-get-contents.php)的另一个版本-

```
<?php
ini_set('display_errors', 1);
error_reporting(E_ALL);

$db = new PDO('mysql:dbname=test_db;host=hostname', 'adminuser', 'adminpassword');

$qinsert = "INSERT INTO load_xml (`user_events`) VALUES (?)";
$stmt = $db->prepare($qinsert);

$stmt->execute(array(file_get_contents('my_events.xml')));

?> 
```

# facebook - Friendsselector 的变化在哪里？

> ID：10146133
> 
> 赞同：0
> 
> 时间：2012-04-13T18:15:11.047
> 
> 标签：facebook, multi-friend-selector

我们正在制作 Facebook 应用程序并希望集成 Facebook Friendsselector。

制作应用程序的人告诉我，从 2012 年 1 月 4 日开始，我们一次只能邀请 1 个朋友。这是真的？我们能做些什么呢？我们要选择多个朋友。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T18:25:29.760

我不确定那些“家伙”从哪里得到他们的信息，但是在[Developer Roadmap](http://developers.facebook.com/roadmap/)或[Requests Dialog](http://developers.facebook.com/docs/reference/dialogs/requests/)本身的文档中都没有关于此的内容。

也许他们指的是[发送对话框](http://developers.facebook.com/docs/reference/dialogs/send/)，它确实只能用于一个朋友（尽管用户可以自己添加更多），但即使他们在谈论这个对话框，你也不必使用这个，您可以继续使用“请求”对话框。

# jquery - jQuery：选择与该类没有兄弟姐妹的类 X 的元素

> ID：10146136
> 
> 赞同：10
> 
> 时间：2012-04-13T18:15:33.513
> 
> 标签：jquery, jquery-selectors

我只想选择与 X 类匹配的元素，并且没有*任何*同级也具有 X 类的元素。在我的情况下，`X = hasDatepicker`. 这是我想出的：

```
$('.hasDatepicker:not(.hasDatepicker ~ .hasDatepicker)') 
```

但是，这并不排除第一个元素，因此在任何一组日期选择器中，这仍然会选择第一个元素。我不想包括任何在一个组中，只有单打。

**1**场比赛的示例：

```
<div class="input text">
<input name="data[Goal][date_started]" type="text" value="" class="hasDatepicker" style="display: none; ">
<button type="button" class="ui-datepicker-trigger"><img src="/themed/mocha/images/btn_calendar.png" alt="..." title="..."></button>
</div> 
```

匹配**0**次的示例：

```
<div class="input text">
<input type="text" value="" id="GoalDateStarted" class="hasDatepicker"><input type="text" value="" class="hasDatepicker" style="display: none; ">
<input type="text" value="" class="hasDatepicker" style="display: none; ">
<input name="data[Goal][date_started]" type="text" value="" class="hasDatepicker" style="display: none; ">
<button type="button" class="ui-datepicker-trigger"><img src="/themed/mocha/images/btn_calendar.png" alt="..." title="..."></button>
</div> 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T18:29:17.877

它不是那么优雅，但它使用[:first-child](http://api.jquery.com/first-child-selector/)伪选择器并使用[.filter()](http://api.jquery.com/filter/)过滤结果集来解决问题：

*   `:first-child`将有助于仅选择可能的多个同级列表中的第一个 .test 元素

*   用于`.filter()`实际检查是否没有同级的兄弟姐妹

这是代码：

```
var a = $('.test:first-child').filter(function() {
    //return $(this).parent().find('.test').not(this).length == 0;
    return !$(this).siblings('.test').length
}); 
```

**[演示](http://jsfiddle.net/didierg/vAkuj/)**

# scala - Scala 包对象与 Predef

> ID：10146138
> 
> 赞同：6
> 
> 时间：2012-04-13T18:15:42.357
> 
> 标签：scala, predef

`scala`在包对象中定义的东西和在中定义的东西有什么区别`Predef`？

当包对象不存在时，它只是`Predef`2.8 之前的遗物，还是我们需要两者的其他原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T18:59:57.627

根据 ScalaDoc，

> “该`Predef`对象提供了可在所有 Scala 编译单元中访问的定义，无需明确限定”

因此，它本身不是一个包对象，而是在为“所有 Scala 编译单元”提供功能方面充当一个对象

至于为什么会出现这种情况，我认为您是对的，看起来是[遗留问题](http://www.scala-lang.org/docu/files/packageobjects/packageobjects_2.html)

至于为什么它仍然存在，可能会继续存在阻止 PreDef 合并[的包对象的限制。](http://www.scala-lang.org/docu/files/packageobjects/packageobjects_3.html)

# python - Python 创建列表 C = A + B 以便对 C 的更改影响 A 和 B

> ID：10146146
> 
> 赞同：0
> 
> 时间：2012-04-13T18:16:21.437
> 
> 标签：python, reference

我不确定我所问的是否可能，但如果是的话，对于特定的应用程序会很方便。我正在为一个实验建立一个试验列表，其中一个目标可以完全匹配一个素数，或者它可以是一种特定方式的不匹配，它与目标保持一定的关系。更明确地说，我所有的刺激都属于 3 级分类法，形式如下：

```
H = {
    'A1':{
        'B1':{
            'C1':[],'C2':[],'C3':[] },
        'B2':{
            'C1':[],'C2':[],'C3':[] },
        'B3':{
            'C1':[],'C2':[],'C3':[] }
    },
    'A2':{
        'B1':{
            'C1':[],'C2':[],'C3':[] },
        'B2':{
            'C1':[],'C2':[],'C3':[] },
        'B3':{
            'C1':[],'C2':[],'C3':[] }
    }
} 
```

“树”底部的每个列表都是一组特定的刺激。如果素数和目标匹配，那很简单。如果他们不这样做，我想从同一个 B 组下的不同 C 组中随机抽取，无需替换。

我的预期解决方案是利用（我认为）python 如何处理引用并制作一个临时列表，我可以从中弹出（）一个刺激。因此，如果试验不一致，并且质数来自 H[A1][B1][C1]，我想从列表中弹出（）：

```
tempList = H[A1][B1][C2] + H[A1][B1][C3] 
```

但是，大概是因为我附加了两个列表，对字典中列表的引用被破坏了，所以如果我从临时列表中删除一个同义词，它不会反映在字典中。有没有办法保持参考？谢谢！

编辑：这个玩具示例不能按预期工作：

```
>>> d = {'A':[1,2,3],'B':[4,5,6]}
>>> l = d['A'] + d['B']
>>> l
[1, 2, 3, 4, 5, 6]
>>> l.pop(2)
3
>>> l
[1, 2, 4, 5, 6]
>>> d
{'A': [1, 2, 3], 'B': [4, 5, 6]} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T18:19:34.833

创建一个新类，该类`H`在初始化程序中获取子列表的路径，并覆盖[`__*item__()`](http://docs.python.org/reference/datamodel.html#object.__getitem__)，这样底层列表将受到影响。

**编辑：**

部分示例：

```
class listxer(object):
  def __init__(self, structure, paths):
    self.structure = structure
    self.paths = paths

  def _descend(self, path):
    return reduce(lambda x,y: x[y], path, self.structure)

  def __len__(self):
    return sum(len(self._descend(path)) for path in self.paths)

  def __getitem__(self, item):
    if item < 0:
      raise ValueError('negative indices not supported!')
    for path in self.paths:
      cur = self._descend(path)
      if item > len(cur):
        item -= len(cur)
        continue
      else:
        return cur[item]
    else:
      raise IndexError('list index out of range')

H = [[[1, 2], [3, 4, 5]]]

mystruct = listxer(H, ((0, 0), (0, 1)))
print len(mystruct)
print mystruct[3] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T18:28:58.877

虽然我很难给出一个专门的解决方案，但我会尽量给你下划线问题的答案

给定两个列表 A 和 B，如何生成列表 C 使得

如果 C = A + B

改变 C 最终会改变 A 或 B。

举个例子

我创建了两个列表 A 和 B，它们本身就是数字列表。

```
>>> A=[[i] for i in range(0,10)]
>>> B=[[i] for i in range(10,20)] 
```

然后我把它们加起来。

```
>>> C=A+B 
```

现在，如果我改变它的任何元素，`C`要么改变`A`要么`B`

```
>>> C[1][0]=-1
>>> C
[[0], [-1], [2], [3], [4], [5], [6], [7], [8], [9], [10], [11], [12], [13], [14], [15], [16], [17], [18], [19]]
>>> A
[[0], [-1], [2], [3], [4], [5], [6], [7], [8], [9]]
>>> C[11][0]=-1
>>> C
[[0], [-1], [2], [3], [4], [5], [6], [7], [8], [9], [10], [-1], [12], [13], [14], [15], [16], [17], [18], [19]]
>>> B
[[10], [-1], [12], [13], [14], [15], [16], [17], [18], [19]]
>>> 
```

# asp.net-mvc - 2次调用具有不同参数的mixinless函数，结果相同

> ID：10146148
> 
> 赞同：0
> 
> 时间：2012-04-13T18:16:27.210
> 
> 标签：asp.net-mvc, less, dotless

我用不同的参数调用了一个 mixinless 函数两次，但结果是相同的，并且是由第一个参数创建的。有一个例子：

**输入：**

```
.font-face (@fontName, @fontFileName)
{
    @font-face {
        font-family: @fontName;
        src: url("../../fonts/@{fontFileName}.eot");
        src: url("../../fonts/@{fontFileName}.eot?#iefix") format("embedded-opentype"),
             url("../../fonts/@{fontFileName}.woff") format("woff"),
             url("../../fonts/@{fontFileName}.ttf") format("truetype");
        font-weight: normal;
        font-style: normal;
    }
}

.font-face ("BMitra", "BMitra");
.font-face ("BMitraBold", "BMitraBold"); 
```

**输出：**

```
@font-face {
  font-family: "BMitra";
  src: url("../../fonts/BMitra.eot");
  src: url("../../fonts/BMitra.eot?#iefix") format("embedded-opentype"), url("../../fonts/BMitra.woff") format("woff"), url("../../fonts/BMitra.ttf") format("truetype");
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: "BMitra";
  src: url("../../fonts/BMitra.eot");
  src: url("../../fonts/BMitra.eot?#iefix") format("embedded-opentype"), url("../../fonts/BMitra.woff") format("woff"), url("../../fonts/BMitra.ttf") format("truetype");
  font-weight: normal;
  font-style: normal;
} 
```

有什么问题？我在 ASP .Net MVC 3.0 应用程序中使用 dotless。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T07:56:08.020

在当前版本中，less.js 和 dotless 都支持 @media 和 @font-face。

然而，通过 mixin 放入 @font-face 块是相对较新的领域 - 看起来像一个错误。

[编辑]

[less.js](https://github.com/cloudhead/less.js/issues/699)已经有一个错误，它有一个[解决](https://github.com/cloudhead/less.js/issues/699#issuecomment-5193515)方法。

[编辑 2]

这现在已在 dotless main 中修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T21:38:31.697

坏消息：[在 LessCSS 中支持 @media 和 @font-face](https://stackoverflow.com/questions/4474477/media-and-font-face-support-in-lesscss)。LESS CSS 还没有真正支持'@font-face' :(

# hadoop - Hadoop分布式缓存不起作用

> ID：10146149
> 
> 赞同：0
> 
> 时间：2012-04-13T18:16:27.873
> 
> 标签：hadoop, mapreduce, distributed-cache

我是 Hadoop 新手。我正在使用 Hadoop 0.22。在驱动程序中，我使用了以下代码：

```
 Job job = Job.getInstance(configuration);
    ...
    job.addArchiveToClassPath(new Path(JAR_DIR);
    ... 
```

在 Map 类中，我必须使用什么代码将 jar 添加到本地类路径中？

更多细节

我有一个工作需要在地图和减少阶段 htmlunit.jar。我使用上面的代码将此 jar 添加到类路径中，但是当我提交工作时，我在使用 htmlunit 引用的行中有一个 ClassNotFoundException。如果上面的代码没关系，DistributedCache 会自动在 tasktrackers 类路径中添加 jar，可能是什么问题？提交作业时还必须使用选项 -libjars htmlunit.jar 吗？我必须使用另一个 hadoop 组件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T17:02:26.337

你不需要做任何事情。

将 jar 添加到作业类路径后，您要说的是

> “将其包含在地图的类路径中并减少作业”

只要您的映射器和缩减器从映射器和缩减器基类扩展，那么它就会“正常工作”。

值得注意的是，您可能应该为您需要的每个 Jar 使用 addFileToClassPath。

另一种方法（我们这样做）是创建一个包含您的源代码和依赖项的单个 jar。

像往常一样构建您的代码 jar，然后在 jar 中创建一个名为“lib”的子目录，并在此处添加所有依赖项 jar。然后你的整个工作是独立的，你不需要担心将其他 jars 添加到分布式缓存中。

因此，例如，您将有一个包含以下内容的 jar：

```
/com/example/Something.class
/com/example/SomethingElse.class
/lib/dependency.jar
/lib/dependency2.jar 
```

（jar 只是一个 zip 文件，因此您可以使用常规的 zip 创建实用程序来构建它）

由于各种原因，这也比将依赖项的 .class 文件直接添加到 jar 中执行得更好。

# ruby-on-rails - 在 Rails 3.2.3 MongoID 模型方法中使用 Struct.new() 的问题

> ID：10146155
> 
> 赞同：0
> 
> 时间：2012-04-13T18:16:56.257
> 
> 标签：ruby-on-rails, ruby, mongodb, mongoid

我有一个类似以下的 mongoid 模型和方法：

```
class Category
  include Mongoid::Document
  field :name, :type => String
  ...

  def self.custom_find
    ...
    Str = Struct.new(:arg1, :arg2)
    array << Str.new(one, two)
    ...
  end
end 
```

我收到以下错误：

```
dynamic constant assignment (SyntaxError)
    Str = Struct.new(:arg1, :arg2) 
```

我尝试`Str = Struct.new(:arg1, :arg2)`进入 config/initializers/categories.rb 但后来我得到：

```
BSON::InvalidDocument in TrendsController#index

Cannot serialize an object of class Category into BSON. 
```

通过删除 custom_find 违规方法，其他一切都可以正常工作，那么我猜是与`"Struct"`.

任何想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T18:23:34.630

您可以通过多种方式解决动态常量分配错误：

```
array = Struct.new(:arg1, :arg2).new(one, two) 
```

或者

```
Object.const_set :Str, Struct.new(:arg1, :arg2)
Str # => Str 
```

不过，这不应该解决序列化问题。

# c# - 正则表达式性能问题

> ID：10146158
> 
> 赞同：2
> 
> 时间：2012-04-13T18:17:14.710
> 
> 标签：c#, .net, regex

我们遇到以下正则表达式的问题：

```
(.*?)\|\*\|([0-9]+)\*\|\*(.*?) 
```

它应该匹配以下内容：`|*25 *|`

我们正在使用 .Net Framework 4 RegEx 类，代码如下：

```
string expression = "(.*?)" + 
       Regex.Escape(Constants.FIELD_START_DELIMITER_BACK_END) + 
       "([0-9]+)" + 
       Regex.Escape(Constants.FIELD_END_DELIMITER_BACK_END) + 
       "(.*?)";
Regex r = new Regex(expression);
r.Matches(contentText) 
```

40.000 个字符的文本花费的时间太长（例如 60 秒）。

但是对于 180.000 的文本，它的速度是可以接受的（3 秒或更短）

文本之间的唯一区别在于第一个文本（速度较慢的文本）全部包含在一行中，没有换行符。这可能是一个问题吗？那是影响性能吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T23:45:48.263

@David Gorsline 的解决方案（来自[评论](https://stackoverflow.com/questions/10146158/regex-performance-issue#comment13010531_10146158)）是正确的：

```
string expression =
    Regex.Escape(Constants.FIELD_START_DELIMITER_BACK_END) + 
    "([0-9]+)" + 
    Regex.Escape(Constants.FIELD_END_DELIMITER_BACK_END); 
```

具体来说，它是`(.*?)`在一开始让你进入。它所做的是接管做正则表达式引擎应该做的事情——扫描正则表达式可以匹配的下一个位置——并且做起来效率要低得多。在每个位置，`(.*?)`有效地执行前瞻以确定正则表达式的下一部分是否可以匹配，只有当匹配失败时，它才会继续并消耗下一个字符。

但即使你使用了更高效的东西，比如`[^|]*`，你仍然会减慢它的速度。但是，不要使用该部分，正则表达式引擎可以扫描正则表达式的第一个常量部分，可能使用像 Boyer-Moore 或 Knuth-Morris-Pratt 这样的算法。所以不要担心你想要匹配的位*周围有什么；*只需告诉正则表达式引擎您要查找的内容并避开它。

另一方面，*尾随* `(.*?)`几乎没有影响，因为它从来没有真正做任何事情。`?`转身不情愿，`.*`那么要让它继续前进并消耗下一个角色需要什么？*只有在正则表达式中有一些东西迫使*它这样做时，它才会这样做。例如，`foo.*?bar`消耗从下一个“foo”到下一个“bar”的所有内容，但在消耗完“foo”后`foo.*?`立即停止。将不情愿的量词作为正则表达式中的最后一件事是*没有*意义的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T19:35:48.183

您已经回答了您的问题：问题在于`.`无法匹配换行符（默认情况下不匹配），这导致许多失败的尝试 - 几乎每个位置都有一个 40000 字符串。
在长但单行的文件上，引擎可以在文件上**一次通过**匹配模式（假设存在成功的匹配 - 如果不存在，我怀疑它需要很长时间才能失败......）。
在包含许多行的较短文件上，引擎尝试从第一个字符开始匹配。它匹配`.*?`到第一行的末尾（这是一个惰性匹配，所以会发生更多事情，但让我们忽略它），然后失败。现在，它再次从**第二个字符开始统计**，不是第二行！即使在匹配数字之前，这也会导致 n² 复杂度。

一个简单的解决方案是`.`匹配换行符：

```
Regex r = new Regex(expression, RegexOptions.Singleline); 
```

您还可以确保使用绝对开始和结束锚点从头到尾匹配，`\A`并且`\z`：

```
string expression = "\\A(.*?)" + 
   Regex.Escape(Constants.FIELD_START_DELIMITER_BACK_END) + 
   "([0-9]+)" + 
   Regex.Escape(Constants.FIELD_END_DELIMITER_BACK_END) + 
   "(.*?)\\z"; 
```

另一个注意事项：正如大卫在评论中建议的那样，`\|\*\|([0-9]+)\*\|\*`应该工作得很好。即使您需要“捕获”匹配前后的所有文本，您也可以使用匹配的位置轻松获取它。

# android - 定位 ImageView

> ID：10146163
> 
> 赞同：0
> 
> 时间：2012-04-13T18:17:30.743
> 
> 标签：android, android-linearlayout, android-relativelayout

我需要将 ImageView 定位在用户名的同一级别（示例中为 vito）。

这就是我所拥有的：

![在此处输入图像描述](../Images/f0053aaa81e26d28fe8f05bb5d317aed.png)

我想要这个（看第二个图标）：

![在此处输入图像描述](../Images/7137383a50b9f40971b2a4115c5f6740.png)

我的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_height="wrap_content" 
android:layout_width="fill_parent" 
android:paddingBottom="5px"
android:paddingTop="5px" 
android:paddingLeft="5px"
android:orientation="horizontal"
style="@style/ListRow">

<ImageView
    android:id="@+id/imagenItem"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_marginRight="6dip"
    android:layout_gravity="top"
    android:gravity="top"
    android:layout_alignParentTop="true"
    style="@style/iconLISTA" />

<LinearLayout
    android:orientation="vertical"
    android:layout_width="0dip"
    android:layout_weight="1"
    android:layout_height="fill_parent">

    <RelativeLayout
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"
        android:orientation="horizontal">

        <TextView
            android:id="@+id/idUsuario"
            android:textSize="@dimen/font_size_small" 
            android:textStyle="bold" 
            android:textColor="@color/list_item_text"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"/>

        <TextView
            android:id="@+id/hora" 
            android:textSize="@dimen/font_size_small" 
            android:textStyle="bold" 
            android:textColor="@color/list_item_secondary_text"
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content"
            android:layout_marginLeft="215px" />
    </RelativeLayout>

    <TextView
        android:id="@+id/comentarios" 
        android:textSize="@dimen/font_size_small" 
        android:color="@color/list_item_text"
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"
        android:layout_marginLeft="0px" />
</LinearLayout>
</LinearLayout> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:31:16.737

将 ImageView 和以下 LinearLayout 的高度属性更改为 wrap_content。

ImageView 当前是 fill_parent ，这使得它占据了所有可用的垂直空间并垂直居中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T18:51:57.750

试试这个，有点简化：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:padding="5dp" >

    <ImageView
        android:id="@+id/imagenItem"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_gravity="top"
        android:scaleType="fitCenter"
        android:src="@drawable/avatar_default" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="5dp"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/idUsuario"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="left"
                android:text="usuario"
                android:textStyle="bold" />

            <TextView
                android:id="@+id/hora"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="right"
                android:text="hora"
                android:textStyle="bold" />
        </LinearLayout>

        <TextView
            android:id="@+id/comentarios"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="commmmment" />
    </LinearLayout>

</LinearLayout> 
```

而且你不应该使用 px，总是使用 dp/dip。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T18:33:42.177

添加：

```
android:scaleType="fitStart" 
```

到 ImageView 布局。

例如

```
<ImageView
    android:id="@+id/imagenItem"
    android:scaleType="fitStart"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_marginRight="6dip"
    android:layout_gravity="top"
    android:gravity="top"
    android:layout_alignParentTop="true"
    style="@style/iconLISTA" /> 
```

# android - Android 一些资产文件/目录未包含在 apk 中

> ID：10146164
> 
> 赞同：1
> 
> 时间：2012-04-13T18:17:31.103
> 
> 标签：android, assets

似乎名为 private 的目录和以 __ 开头的文件名没有被包含或被assetManager.list(path) 看到。这是安卓规则吗？这是特定于 eclipse 行为的东西吗？或者？？有没有解决的办法？我真的，不想重命名东西。

例如：

```
assets->dir1->private->*

assets->dir2->__test__.txt 
```

私人不会有 `__test__.txt`不会有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T22:31:43.893

如果文件名以 _ 开头，它将不是 APK 的一部分。如果一个目录只包含以 _ 开头的文件或没有文件，则它不会成为 APK 的一部分。我确信还有更多规则，但我没有看到它们在任何地方定义。

# javascript - ！在 url 哈希设计中

> ID：10146165
> 
> 赞同：2
> 
> 时间：2012-04-13T18:17:36.330
> 
> 标签：javascript, url, asynchronous, routes

> **可能重复：**
> [为什么 Twitter 在 URL 中使用井号和感叹号，以及它们如何重写搜索 URL？](https://stackoverflow.com/questions/4739667/why-does-twitter-use-a-hash-and-exclamation-mark-in-urls-and-how-do-they-rewrit)

在为异步网站处理哈希路由时，我看到网站使用前导感叹号，如下所示：`#!/some/route`

在哈希之后直接包含感叹号有什么好处？它是否意味着什么？

# django - 如何在 apache 中使用 django-compressor？

> ID：10146170
> 
> 赞同：5
> 
> 时间：2012-04-13T18:17:56.833
> 
> 标签：django, apache, django-compressor

我一直在使用 Django Compressor 来管理我的 coffee/less 文件，它非常适合开发，但是我遇到了一些问题来使它适用于我的生产部署。

我的想法是让 apache 托管静态文件，可能在另一台服务器上。我正在设置`COMPRESS_OFFLINE = True`文件`settings.py`。

然后我执行以下操作

*   `python manage.py compress`- 这会填充`CACHE`我的目录中的`static`目录，其中将收集所有静态文件。
*   `python manage.py collectstatic`- 这会将我项目中所有应用程序（其中一些不使用压缩器）的静态文件收集到我的`static`目录中。
*   将`static`目录复制到某个地方以使用 apache 托管。并设置 apache 来提供文件。
*   修改文件中的`static_url`变量`settings.py`指向静态服务器。

如果我打开任何页面，我的服务器上会出现以下错误，这似乎只在我有文件时`DEBUG = False`才会`COMPRESS_OFFLINE = True`发生`settings.py`：

> TemplateSyntaxError：渲染时捕获 OfflineGenerationError：您启用了离线压缩，但离线清单中缺少密钥“777ba26736d046ab043dc151e7e9a060”。您可能需要运行“python manage.py compress”。

当我检查`static/CACHE`目录时，我确认错误内容，这是我的`manifest.json`文件：

```
{
  "6189b8598993d1cbdbd35d4dfd1a6711": "<script type=\"text/javascript\" src=\"http://192.168.1.123/CACHE/js/2f6ca6616bd6.js\"></script>",
  "5c66dbed0e5b766c6e32773cd8585f3c": "<link rel=\"stylesheet\" href=\"http://192.168.1.123/CACHE/css/154d95903951.css\" type=\"text/css\" />"
} 
```

如果我删除 CACHE 目录并重新运行`python manage.py compress`，我会在错误消息和清单文件中获得一组新的 ID，但清单上仍然缺少错误上的 ID。

所以，我想这里有两个问题。为什么它不起作用？实现这一目标的正确方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-21T17:41:14.497

如果你运行了压缩，你仍然会收到消息

> OfflineGenerationError：您启用了离线压缩，但离线清单中缺少密钥“4971a40e3b459a8cda8287a7f7caa96d”。您可能需要运行“python manage.py compress”

那么很可能你在压缩标签中有动态内容。确保 compress 始终是最里面的块，并且 compress 块内没有标签。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T12:21:26.960

我猜你正在使用不支持静态模板标签 {% static "..." %} 的 django-compressor 1.1.2。

尝试使用以下命令安装 django-compressor 的开发版本：

> pip install django_compressor==dev

它应该可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-25T06:22:40.613

David Wolfe 是绝对正确的：必须深入挖掘我的所有代码才能摆脱 {% trans... 等。我是这样写的：

```
<script>
window.__enter_email = "{% trans "Enter correct email" %}"
window.__url = "{% url "shop:go" %}"
</script>
{% compress js %}
<script>
$("#bla")..... window.__enter_email ...
</script>
{% endcompress %} 
```

希望，帮助某人！

# objective-c - 将单词列表字典加载到数组中的最快方法？

> ID：10146171
> 
> 赞同：2
> 
> 时间：2012-04-13T18:18:07.963
> 
> 标签：objective-c, ios, memory

我正在开发一个基于单词的游戏，我需要将我的 180,000 个单词词典 (1.9MB) 加载到一个数组中，以便求解算法可以使用它。字典只是每行一个单词，如下所示：

```
a
ab
abs
absolutely
etc
... 
```

现在我正在使用以下代码将该文件加载到数组中：

```
NSString *txtPath = [[NSBundle mainBundle] pathForResource:@"dict" ofType:@"txt"];
        NSString *stringFromFile = [[NSString alloc]
                                    initWithContentsOfFile:txtPath
                                    encoding:NSUTF8StringEncoding
                                    error:&error ];       
for (NSString *word in [stringFromFile componentsSeparatedByString:@"\r\n"]) {
            [wordsArray addObject:word];
        } 
```

这在 iPhone 4 上大约需要 3-4 秒。在较旧的 iOS 设备上可能会更慢。有没有更快的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T18:25:27.970

您可以使用 Grand Central Dispatch 或 GCD 在后台轻松执行此操作，离开主线程。

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0),^(void){
        NSString *txtPath = [[NSBundle mainBundle] pathForResource:@"dict" ofType:@"txt"];
        NSString *stringFromFile = [[NSString alloc]
                                    initWithContentsOfFile:txtPath
                                    编码：NSUTF8StringEncoding
                                    错误：&错误];       
        for (NSString *word in [stringFromFile componentsSeparatedByString:@"\r\n"]) {
            [wordsArray addObject:word];
        }
});

```

我从内存中编写了封闭的调度代码，但它很接近（如果不正确），我想你明白了。

**编辑：**您可以在主线程上执行此代码，但发生的是非主线程调度队列是您的代码执行的地方，因此不会阻塞 UI。

`for`您可以通过将循环替换为以下代码来稍微提高代码的性能：

```
[wordsArray setArray:[stringFromFile componentsSeparatedByString:@"\r\n"]]; 
```

应该不需要迭代`-componentsSeparatedByString:`（一个数组）的结果，只是将它们放入*另一个*数组中。有了 180K 字，这应该可以节省大量时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T18:45:36.617

将单词列表预加载到 SQLite 数据库中可能会更快，然后使用 SQL 查询使用您拥有的任何模式进行搜索。您可以利用索引使其更快。

# android - Android OpenGL ES 1.0 光照位置、方向和截止

> ID：10146173
> 
> 赞同：1
> 
> 时间：2012-04-13T18:18:09.950
> 
> 标签：android, opengl-es, lighting

我正在尝试使用以下代码在我的 2D 游戏中创建聚光灯

```
float[] ambient = {0.1f, 1, 1, 1};
float[] position = {45, 20, 0, 1};
float[] direction = {0, -1, 0};

gl.glEnable(GL10.GL_LIGHT1);
gl.glLightfv(GL10.GL_LIGHT1, GL10.GL_AMBIENT, ambient, 0 );
gl.glLightfv(GL10.GL_LIGHT1, GL10.GL_POSITION, position, 0);
gl.glLightfv(GL10.GL_LIGHT1, GL10.GL_SPOT_DIRECTION, direction, 0);
gl.glLightf(GL10.GL_LIGHT1, GL10.GL_SPOT_CUTOFF, 30.0f); 
```

一般来说，该点正在工作，但我不能移动它，也不能改变方向和截止。当我更改位置向量时，它会保持在同一位置或完全消失。方向和截止也是如此。它总是以 45 度角向左/向上发光。当我将 GL_AMBIENT 更改为 GL_DIFFUSE 或 GL_SPECULAR 时，灯光也会消失。我唯一能改变的是光的颜色。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T18:27:42.840

请注意，在固定管道中，灯光的位置由调用时矩阵堆栈的顶部进行变换`glLightf(GL_POSITION)`。

因此，如果您想在世界坐标中定义灯光的位置，您必须已经在堆栈顶部有 ViewProjection 矩阵。

这是一个常见的错误，许多人在设置相机/投影矩阵之前在世界坐标中定义了灯光的位置，因此它实际上是在屏幕空间坐标中定义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T10:47:43.700

问题是gles10只做逐顶点光照。必须实现每像素照明才能正常工作。

# backbone.js - Backbone.js 嵌套视图：参考还是事件？

> ID：10146178
> 
> 赞同：2
> 
> 时间：2012-04-13T18:18:49.580
> 
> 标签：backbone.js

更有效的是，使用事件在嵌套视图之间进行通信，或者保持引用以调用方法。以下示例显示了两个视图。外部 View 响应单击事件，然后可以使用事件或方法调用来使 InnerView 做出适当的响应。

```
InnerView = Backbone.View.extend({

    initialize: function() {
        this.model.bind('doSomethingEvent', this.doSomething);
    },

    doSomething: function() {
        // This could have been called from event/trigger
        // or from direction method invocation using reference.
    }
});

OuterView = Backbone.View.extend({

    events = {
        'click' : 'handleOutViewClick'
    },

    render: function() {

        // Create InnerView to render some model
        var innerView = new InnerView({model:this.model });

        $(this.el).append(innerView.render().el);

        // Could store a reference to the View?
        this.viewRef = innerView;
    },

    handleOutViewClick: function(e) {

        // Should this function use a reference to the InnerView instance:
        this.viewRef.doSomething();

        // Or should it trigger an event on this.model that 
        // the InnerView is bound to?
        this.someCollection.trigger('doSomethingEvent');
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T18:30:51.880

可能单个方法调用将比事件调度更有效，事件调度将涉及至少 2 个方法调用。但我认为你不需要关心技术上哪个更“有效”。除非这种情况在一秒钟内发生多次，否则您可以只关心如何使代码更清晰、更正确。我认为最简洁的模式取决于所传达的细节。这是我的偏好：

1.  如果外部视图自然适合操作模型和集合，并通过正常的主干模型/集合事件让内部视图响应，那是最干净的。

2.  如果发生的事情与模型无关，请考虑一种“视图模型”模式，在该模式中，您可以将视图的有趣状态位建模为后端模型，即使您无意让该模型交互与服务器。然后将你的两个视图绑定到来自视图模型的事件，并通过改变一个通用的“视图模型”实例来让它们协调。这是我用于复杂视图的模式，这些视图具有许多与服务器的底层模型没有直接关联的相互依赖的状态。

3.  如果发生的事情并没有真正改变模型/集合并且更多的是特定于视图的事情，那么直接方法分派将更直接但也更紧密耦合。由事件分派提供的松散耦合何时值得额外的复杂性和更难遵循的控制流取决于您的判断。

# php - iFrame 提交后，Firefox 的“加载”轮子一直在旋转

> ID：10146182
> 
> 赞同：1
> 
> 时间：2012-04-13T18:19:04.733
> 
> 标签：php, javascript, ajax, firefox, dom

我对 Firefox 有一个非常特殊的问题，我一直无法找出原因。基本上我有一个使用 AJAX 向 PHP API 提交数据的系统，但是当使用文件上传时，它不会使用 XMLHttpRequest() 而是回退到提交表单。

这就是发生的事情：

*   请求文件上传
*   Javascript 找到用于上传的表单并将其分配给变量**apiSubmitForm**
*   隐藏 iFrame 使用 DOM appendChild() 方法使用随机 ID 创建并分配给变量**hiddenWindow**
*   **apiSubmitForm**方法改为POST，action改为API URL，enctype改为'multipart/form-data'，target改为**hiddenWindow的ID**
*   **hiddenWindow**将设置一个 onload() 方法，其中包括将**apiSubmitForm**值重置为开始时的值，以及在 onload() 结束时删除创建的**hiddenWindow**。

现在，一切正常。没有 JavaScript 错误。数据被提交，我实际上可以连续多次提交数据而没有问题。

但是**Firefox 上的绿色和旋转的加载轮**保持不变。我假设它在 onload 事件之后也被调用以关闭自身，除非由于**hiddenWindow**在它的末尾被删除，它不起作用？

如果我从 iFrame 的 onload 事件中注释掉这一行，则不会发生这种情况：

```
apiSubmitForm.removeChild(hiddenWindow); 
```

我测试过的所有其他浏览器*（Chrome、Opera、Safari 和 Internet Explorer）*都不会运行加载轮。并且每个浏览器*（包括 Firefox）*都能正常工作，表单被正确提交，并且代码的所有其他部分都按预期工作。

我能做些什么来更好地关闭窗口吗？我不能在 apiSubmitForm.submit() 之后立即调用该方法，因为该表单提交是“异步”的，它会中断加载。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T18:32:36.750

好吧，这是我得到的最接近的，虽然它是一个完整的黑客：

```
setTimeout(function(){apiSubmitForm.removeChild(hiddenWindow);},1); 
```

（把它放在 iFrame onload 事件中）

# java - 十进制到二进制转换的函数不正确？

> ID：10146185
> 
> 赞同：0
> 
> 时间：2012-04-13T18:19:13.563
> 
> 标签：java, math, binary, decimal, converter

我正在尝试创建一种将十进制转换为二进制的方法。这是我到目前为止写的（不能正常工作）：

```
public static String D2B(int decimal){
    String binaryValue="";
    for (int tempDecimal=decimal;0==tempDecimal;tempDecimal/=2){
        binaryValue=tempDecimal%2+binaryValue;
    }
    return binaryValue;
} 

public static void main(String[]args){
    int myValue=127;
    System.out.println(D2B(myValue));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T18:21:30.560

我认为您循环中的条件不正确：

```
for(int tempDecimal=decimal;0==tempDecimal;tempDecimal/=2) 
```

请注意，此循环在 tempDecimal 等于 0 时循环，这意味着对于非零输入，循环根本不应该循环，并且对于零输入将永远循环。尝试将其重写为

```
for(int tempDecimal = decimal; 0 != tempDecimal; tempDecimal /= 2) 
```

另外，注意输入 0 和输入负数；您当前的方法无法正确显示它们。

其他一些小细节：

*   我强烈建议正确缩进你的代码并在运算符之间放置空格以提高可读性。它使代码更易于阅读，而且我认为如果您有更多空间，您会更容易发现错误。
*   没有理由`tempDecimal`在此函数中创建第二个变量。Java 参数是按值传递的，因此您对参数所做的更改不会显示在调用者中。由于您没有`decimal`在其他任何地方使用该值，因此额外的变量是多余的。

希望这可以帮助！

# java - Android 带键的值列表

> ID：10146195
> 
> 赞同：1
> 
> 时间：2012-04-13T18:19:54.133
> 
> 标签：java, android

我正在尝试确定是否可以在开发我的 android 应用程序时使用资源文件来保存使用字符串值作为键的数字列表。例如

数字（“英国”）= 999 数字（“美国”）= 911

正如我所说，理想情况下这将在资源文件中而不是在 Java 类中，因为它更易于维护

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T18:30:17.450

您想在资源中定义字典。没有办法直接做到这一点。但是，您可以将键和值定义为数组，然后构建字典。

在`res/values/arrays.xml`，有类似的东西，

```
<string-array name="emergency_keys">
    <item>UK</item>
    <item>US</item>
            ....
</string-array>
<integer-array name="emergency_values">
    <item>999</item>
    <item>911</item>
            ...
</integer-array> 
```

然后在你的代码中你有这个实用方法，

```
Map<String,Integer> getDict(int keyId, int valId) {
  String[] keys = getResources().getStringArray(keyId);
  int[] values = getResources().getIntArray(valid); 

  Map<String,Integer> dict = new HashMap<String,Integer>();
  for (int i = 0, l = keys.length; i < l; i++) {
    dict.put(keys[i], vals[i]);
  }

  return dict;
} 
```

当您在代码中需要字典时，请执行此操作，

```
Map<String,Integer> emergencyNumbers = getDict(R.array.emergency_keys, R.array.emergency_values); 
```

# sharepoint - 如何从 Sharepoint 中的文档库中删除/移动旧表单/文档？

> ID：10146199
> 
> 赞同：0
> 
> 时间：2012-04-13T18:20:19.700
> 
> 标签：sharepoint, sharepoint-2007, sharepoint-designer

我支持一个 Sharepoint 2007 站点，其中包含与某些文档库相关的几个工作流。客户希望将 3 个月内未修改的文件自动移至特定文档库。有没有办法自动使用 Sharepoint 工具，还是我必须创建某种自定义 Web 部件（如果可能的话）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:32:32.627

您可以创建一个计时器作业。您将其设置为每天运行，例如，该作业将使用 CAML 查询从 doclib 中获取旧文档并执行移动操作。

--- 费尔达

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T10:11:07.557

推荐的方法是使用内置的信息管理策略框架。对于每个列表或文档库，您可以为每个项目设置计划检查点。在这些检查点，您可以“淘汰”一个项目，将其删除，或者将其归档到归档列表中。此外，您可以简单地调用预定义的 SharePoint 工作流来确定应该发生什么。

一个典型的例子是每周检查列表项并调用自定义工作流的信息管理策略。然后，您可以关联一个检查当前项目的修改日期的工作流，检查它是否大于 3 个月，然后简单地移动该项目。

[在此处](http://sharepointrecordsmanagement.com/tag/sharepoint-expiration/)查看共享记录管理

# c# - C# 通用扩展方法编译但无法使用？

> ID：10146202
> 
> 赞同：1
> 
> 时间：2012-04-13T18:20:32.480
> 
> 标签：c#, .net, generics, methods

我正在尝试编写一个通用扩展方法，用于将固定矩阵添加到“弹性”矩阵。扩展方法编译并且（我假设）它的代码在常规方法中运行良好。知道我会在各种类型中大量使用这个函数，我更愿意解决这个问题，而不是用创可贴一瘸一拐：

```
 public void AddMatrix<T>(this List<T[]> MyList, T[,] Matrix)
    {
        if (MyList == null) throw new ArgumentNullException("MyList");
        if (Matrix == null) throw new ArgumentNullException("Matrix");

        for (int i = 0; i < Matrix.GetLength(0); i++)
        {
            T[] aLine = new T[Matrix.GetLength(1)];
            for (int j = 0; j < Matrix.GetLength(1); j++)
                aLine[j] = Matrix[i, j];
            MyList.Add(aLine);
        }
    }
    public void testAddMatrix()
    {
        List<string[]> aMyBigMatrix = new List<string[]>();
        string[,] aSmallerMatrix = 
        {
        {
            "foo",
            "bar", 
            "what"
        }
        };

        aMyBigMatrix.AddMatrix(aSmallerMatrix);               // .AddMatrix is not showing up here in Intellisense?
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T18:23:10.300

来自[MSDN](http://msdn.microsoft.com/en-us/library/bb311042.aspx)：

> 定义和调用扩展方法
> 
> 1.  定义一个静态类来包含扩展方法。该类必须对客户端代码可见。
>     
>     
> 2.  将扩展方法实现为至少与包含类具有相同可见性的静态方法。
>     
>     
> 3.  方法的第一个参数指定方法操作的类型；它必须以 this 修饰符开头。

您的方法不是静态的（2.）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T18:33:21.563

正如每个人都很快指出的那样，扩展方法必须是静态的。

当我试图复制您的错误时，我收到了一个编译器错误“扩展方法必须是静态的”，因此您报告您的代码可以编译对我来说似乎很奇怪。当您尝试编译它时，请查看错误列表以查看它是否实际上是空的。我怀疑您会发现以前没有注意到的错误消息。如果您能够看到编译器错误，那么您的这种性质的错误将很容易识别和修复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T18:23:01.013

您正在编写扩展方法，`AddMatrix<T>`需要是静态的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T18:24:14.210

扩展方法必须是静态的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-13T18:24:14.460

扩展方法必须是静态的。

将其更改为： public static void AddMatrix(this List MyList, T[,] Matrix)

并确保该类也是静态的。

# symfony1 - 用于管理员的 Symfony 1.4 后端应用程序在 Prod 环境中失败

> ID：10146204
> 
> 赞同：0
> 
> 时间：2012-04-13T18:20:34.557
> 
> 标签：symfony1, symfony-1.4, admin

我的开发环境中有一个完美运行的管理后端，但在生产环境中却惨遭失败。具体会出现一堆问题：

1.  它无法读取 symfony/web/sf/ 目录，因此没有加载所需的图像，尽管它表明项目已成功创建。然而，前端的情况并非如此，这让我相信这个问题比眼前所见更险恶。

2.  尽管它加载了管理页面，但没有加载 css，即使 admin.css 存在于 web/css 目录中。

我做了一个检查元素，问题似乎是这样，而不是路由到 /web/css 或 /sfDoctrinePlugin 或 /web/js 它将应用程序的名称[在我的情况下为控制中心]添加到所有内容的前面，基本上将 HTML 呈现为: href = "/controlcenter/web/css" 或 href = "/controlcenter/js" 或 href = "/controlcenter/js" 。这在我的开发环境中根本不会发生，事情会按照它们的方式呈现。

修理任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T03:42:39.633

我发布这个完全是荒谬的。我只是想去控制中心/模块，对于大多数人来说，它基本上可以转换为后端/模块。

在这种情况下，索引文件是 controlcenter.php，在访问该文件时，我让网站以应有的方式呈现。很抱歉让人们感到困惑。希望有人过来看看自己的答案。

我应该在我的 routing.yml 中设置默认值，以便它自动重定向而无需我输入 controlcenter.php 谢谢

# c# - 如何将两列中的值插入到数组中以供以后与自动完成一起使用？

> ID：10146211
> 
> 赞同：0
> 
> 时间：2012-04-13T18:21:11.903
> 
> 标签：c#, sql-server

我正在用 C#（windows 窗体）和 SQL-Server 编写一个程序，我需要从两列中获取字符串并将它们放入一个数组中。稍后我将使用该数组来实现某些文本框的自动完成。规则是：

*   该数组应该能够容纳我在列中的字符串数量，这个数量可能超过 500 个字符串并且是可变的。
*   我将需要列中的不同值，没有重复。

我想在将字符串放入数组时，我应该使用“UNION”将两列中的所有字符串和 SqlDataReader 与“while”循环放在一起。

这是一个示例表，用它来向我解释：

```
----------------------------
|    name    |   surname   |
----------------------------
|    John    |   Jackson   |
----------------------------
|   Michael  |    Jones    |
----------------------------
|   Amanda   |    Lopez    |
----------------------------
|  Christina |    Lopez    |
---------------------------- 
```

那么查询的外观如何以及如何将结果放入数组中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:22:58.843

如果你想要一个连接使用这个：

```
SELECT DISTINCT name + surname FROM MyTable 
```

如果你不想要一个连接，你可以这样做：

```
 SELECT Col1 FROM MyTable
    UNION
    SELECT Col2 FROM MyTable 
```

只要具有相同的数据类型`Col1`，联合就可以工作。`Col2`获得数据后，您可以将其带回客户端（通过存储过程）到数据集、数据表或 sqldatareader 中。

其余的应该很简单，获取数据并将其存储在某种数组中。要么通过某种循环

```
reader = GetData();
while(reader.read())
 {
  //store into an array...
 } 
```

复制粘贴到 sql server management studio

```
CREATE TABLE #Test
(
 col1 varchar(10),
 col2 varchar(10)
)

INSERT INTO #Test(col1, col2) VALUES('jon', 'jane')
INSERT INTO #Test(col1, col2) VALUES('jane', 'jane')
INSERT INTO #Test(col1, col2) VALUES('bob', 'phil')
INSERT INTO #Test(col1, col2) VALUES('marc', 'phil')
INSERT INTO #Test(col1, col2) VALUES('jon', 'jon')
INSERT INTO #Test(col1, col2) VALUES('jon', 'Jon')
INSERT INTO #Test(col1, col2) VALUES('jane1', 'jane')
INSERT INTO #Test(col1, col2) VALUES('bob2', 'phil')
INSERT INTO #Test(col1, col2) VALUES('marc2', 'phil')
INSERT INTO #Test(col1, col2) VALUES('ste', 'jane') 
```

从 #test 中选择 col1 并从 #test 中选择 col2

```
DROP TABLE #Test 
```

结果是：

```
bob
bob2
jane
jane1
jon
marc
marc2
phil
ste 
```

# proxy - NSIS NTLM 代理身份验证

> ID：10146216
> 
> 赞同：0
> 
> 时间：2012-04-13T18:21:24.930
> 
> 标签：proxy, installation, nsis, ntlm

我将 NSIS 用于安装程序。我们必须在安装过程中从我们的服务器下载一些包，为此我们使用 NSISdl 库。

问题是我们需要将软件安装在具有 NTLM 身份验证代理的网络中。正如 NSISdl 的文档所说（[http://nsis.sourceforge.net/Docs/NSISdl/ReadMe.txt](http://nsis.sourceforge.net/Docs/NSISdl/ReadMe.txt)），不可能将配置与代理身份验证一起使用。

如何进行 NTLM 身份验证？我为 NSIS ( [http://nsis.sourceforge.net/Inetc_plug-in](http://nsis.sourceforge.net/Inetc_plug-in) ) 找到了一个插件 Inetc，它接受代理身份验证，但没有指示 NTLM。有人有解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T19:10:40.097

INetC 使用 WinINet，它与您可能会得到的 IE 一样接近。[此页面](http://pilif.github.com/2004/06/wininet-proxies-and-ntlm/)声称`INTERNET_FLAG_KEEP_CONNECTION`NTLM 需要该标志。我不知道这个插件是否使用了那个标志。如果没有，您可以要求作者添加它或编译您自己的版本...

# c# - 使用 LINQ，在集合中，在字典中查找项属性的最小值

> ID：10146218
> 
> 赞同：3
> 
> 时间：2012-04-13T18:21:27.470
> 
> 标签：c#, linq, linq-to-objects

```
public class Item
{
  public double findMe{ get; set; } 
  public int? iMayBeNull { get; set; }
}

public Dictionary<int, ICollection<Item>> TheDictionary{ get; set; }

...

TheDictionary dict = new Dictionary<int, ICollection<Item>>(); 
```

我试图在所有“dict”的集合中找到“iMayBeNull”**为空的“findMe”的最小值。**

我似乎无法绕过这个。

任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T18:24:00.217

用于`.SelectMany`将所有集合合并为一个大序列，然后只需使用标准`.Where`和`.Min`运算符：

```
TheDictionary.Values
    .SelectMany(x => x)
    .Where(x => x.iMayBeNull == null)
    .Min(x => x.findMe); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T08:00:12.167

与该`SelectMany`方法并行的 LINQ 表达式是多重 from 子句。

**例子：**

```
var seq = from col in dict.Values
            from item in col
            where item.iMayBeNull == null
            select item.findMe;

var min = seq.Min(); 
```

# c# - 在静态多线程实例中调用

> ID：10146220
> 
> 赞同：0
> 
> 时间：2012-04-13T18:21:36.433
> 
> 标签：c#, .net, multithreading, invoke

我想要做的是在当前表单的某个位置获取像素颜色。但是，我调用该方法的点是在一个单独的线程中。当我运行应用程序时，我收到一个错误：

> 跨线程操作无效：控件“Form1”从创建它的线程以外的线程访问。

线程代码：

```
Thread drawThread;
drawThread = new Thread(drawBikes); 
```

画笔代码：

```
public void drawBikes()
{
    MessageBox.Show("Bike "+bike.color.ToString()+": "+Form1.ActiveForm.GetPixelColor(bike.location.X, bike.location.Y).ToString());
} 
```

这是 GetPixelColor 方法（在单独的静态类中）：

```
public static class ControlExts
{
    public static Color GetPixelColor(this Control c, int x, int y)
    {
        var screenCoords = c.PointToScreen(new Point(x, y));
        return Win32.GetPixelColor(screenCoords.X, screenCoords.Y);
    }
} 
```

我在哪里调用调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:30:30.087

您需要从与 UI 交互的任何其他线程调用 Invoke。在您的情况下， drawBikes() 正在尝试更新 UI。尝试这个：

```
 public void drawBikes()
    {
        if (InvokeRequired)
        {
            this.Invoke(new MethodInvoker(drawBikes));
            return;
        }
        // code below will always be on the UI thread
        MessageBox.Show("Bike "+bike.color.ToString()+": "+Form1.ActiveForm.GetPixelColor(bike.location.X, bike.location.Y).ToString());

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T18:31:20.287

将您的代码放入 [BeginInvoke](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.begininvoke.aspx)

就像是

```
 public static class ControlExts
            {
                      public static Color GetPixelColor(this Control c, int x, int y)
                      {
                         this.BeginInvoke(new Action(() =>
                          {
                          var screenCoords = c.PointToScreen(new Point(x,y));
                          return Win32.GetPixelColor(screenCoords.X, screenCoords.Y);
                         }));

                       }
           } 
```

# jquery - 图像源更改后的 jQuery 调用函数

> ID：10146221
> 
> 赞同：0
> 
> 时间：2012-04-13T18:21:40.983
> 
> 标签：jquery, image, function, image-resizing

我有一个拇指列表和一个大图像的大区域。如果我单击每个拇指，则大图像的来源会根据单击的拇指而变化。

我还有一个调整大区域内图像大小的功能

```
$('#thumbImg').click(function(){
  var newSrc = $(this).attr('src');             
  $('#bigArea img').attr('src',newSrc);
  resizeImage();
}); 
```

我可以进入该功能，因为我有一个警报，并且每次单击拇指时都会显示它。但我认为问题在于该函数读取了前一张图像的宽度和高度。有什么办法可以在图像更改后调用该函数？

谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T18:23:08.250

将函数绑定为`.load()`处理程序。

```
$('#thumbImg').click(function() {

    var newSrc = $(this).attr('src'); 

    $('#bigArea img').one('load', resizeImage).attr('src',newSrc);

}); 
```

*编辑：更改为使用`.one`，以便在单击/加载后删除处理程序。我认为您也可以将处理程序绑定到`#bigArea img`最初的处理程序，因此每当加载新图像时它都会触发。*

# jquery - 谷歌浏览器中没有显示滚动条

> ID：10146223
> 
> 赞同：3
> 
> 时间：2012-04-13T18:21:52.023
> 
> 标签：jquery, html, css

我正在为客户创建一个网站。该设计有一个 ipad，内容将显示在屏幕内。这很好，直到他们要求我更改它，因为溢出 CSS 属性在 ipad 上并不能很好地工作（他们告诉我）。

内容动态变化。大约一分钟后，我显示了一个包含大量文本的 div。滚动条未显示，因此用户将无法移动。![谷歌浏览器没有滚动条](../Images/c385b25a56c73341e39036989a297fbd.png)

按下 F12 后，控制台会出现，如果我再次按下它，控制台会隐藏并出现滚动条。

这是html

[http://pastebin.com/9PkyeaVr](http://pastebin.com/9PkyeaVr)

CSS

[http://pastebin.com/e0YMfxLM](http://pastebin.com/e0YMfxLM)

我尝试在 css 表上设置溢出属性，并且在出现问题的 div 时也尝试设置。

这些问题是在加载时使用 vb.net 生成的。我正在使用 jQuery 来操作 DOM。

任何想法都有帮助！...或者也许有人知道如何使溢出：滚动；在 ipad 上工作。有人告诉我，当您使用 3 个手指时这很有效，但有些人不知道。

顺便说一句，我做了我的研究和一切；）

![在此处输入图像描述](../Images/96430c8a1d35b47dea9f4b4019911d90.png)

我检查了这是否发生在 IE、Firefox 上。Chrome 和 Safari 有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T18:50:57.657

看看这个：[How to get the scroll bar with CSS overflow on iOS](https://stackoverflow.com/questions/3845445/how-to-get-the-scroll-bar-with-css-overflow-on-ios)也许`-webkit-overflow-scrolling: touch`提到的属性会对你有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T19:35:41.273

简单的解决方案（不是我想要的......）

设置身体高度 == 容器高度

```
jQuery('body').css('height', jQuery('#contenedorPrincipal').css('height')) 
```

# c++ - 枚举到无符号整数

> ID：10146226
> 
> 赞同：3
> 
> 时间：2012-04-13T18:22:06.823
> 
> 标签：c++, casting, enums

我有以下代码：

```
class mph {
public:
enum minute_periods {five, ten, fifteen, thirty}; 
   std::vector<minute_periods> factors;
  minute_periods fac;

void setUpFactors(void) { 
    factors.resize(4);
    factors[five] = 5;
    factors[ten] = 10;
    factors[fifteen] = 15;
    factors[thirty] = 30;
  } 
```

我收到以下错误：

```
error: invalid conversion from ‘int’ to ‘mph::minute_periods’ 
```

我如何解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T18:26:55.767

`int`'s 不会隐式转换为`enum`s，您必须明确地执行此操作，这就是您收到错误的原因。我不认为这段代码会做你想做的事，但是看起来你想要这样的东西。

```
 std::map<minute_periods, int> factors; 
```

这种方式`factors[five]`会给你一个int，而不是`enum`像vector那样。我从您的代码中猜测这就是您想要的，因为值 5、10、15 和 30 超出了您`enum`的范围（从 0 到 3）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T18:25:01.587

在 C++ 中，您可以从 an 隐式`enum`转换为 an `int`，但反之则不行。您可以通过使用显式强制转换来解决此问题：

```
factors.resize(4);
factors[five] = minute_period(5);
factors[ten] = minute_period(10);
factors[fifteen] = minute_period(15);
factors[thirty] = minute_period(30); 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T18:28:57.357

您的代码会导致在两个地方生成该错误：

*   当您使用您的`enum`值作为`vector`
*   当您将`enum`值用作该向量中的值时

你的逻辑有缺陷。`vector`总是由整数索引。一个疯狂的猜测是你想要`map<minute_period, int>`的，但再想一想 - 这没有任何意义。

要将`enum`值用作整数，只需执行以下操作：

```
enum minute_periods 
{
    five = 5, 
    ten = 10, 
    fifteen = 15, 
    thirty = 30
}; 
```

这是将`enum`值用作整数的正确方法 - 不是一些将标签转换为值的愚蠢数据结构。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T18:27:14.120

您只能将枚举转换为整数，而不能将整数转换为枚举。由于您的向量是 minute_periods 的列表，因此您应该只将分钟周期分配给因子。你可能想要

```
factors[five] = five;
factors[ten] = ten;
factors[fifteen] = fifteen;
factors[thirty] = thirty; 
```

这将解决您的编译错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T18:32:35.830

你需要声明你的向量，就`std::vector<unsigned int> factors;`好像你想那样做。如果您通过向量将枚举转换为不同的值，则向量的值类型应该是您要转换的类型。可以通过隐式转换将枚举作为索引进行查找。

我还建议将计数枚举值定义为枚举值列表中的最后一个条目。它可以替换硬编码的大小。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-13T18:33:20.757

你想使用 a`map`而不是 a `vector`。因为它看起来你正在存储的是从枚举到整数的映射 - 而不是一个向量`minute_periods`

```
class mph {
public:
enum minute_periods {five, ten, fifteen, thirty}; 
   std::map<minute_periods, int> factors;

void setUpFactors(void) { 
    factors[five] = 5;
    factors[ten] = 10;
    factors[fifteen] = 15;
    factors[thirty] = 30;
  }
}; 
```

您也可以简单地明确设置枚举值：

```
class mph {
    public:
    enum minute_periods {five = 5, ten = 10, fifteen = 15, thirty = 30}; 
}; 
```

# c# - C# 使用可枚举范围作为 int

> ID：10146227
> 
> 赞同：0
> 
> 时间：2012-04-13T18:22:09.617
> 
> 标签：c#, linq, ienumerable

我需要从 xml 文件中获取一些值到图表中。我正在尝试使用可枚举范围。

```
IEnumerable<Int32> seq = Enumerable.Range(0, 3).ToArray();
chart.Series["Series1"].Points.AddY(package[seq].value1); 
```

但是它说它不能转换为int'。当我尝试

```
var seq = Convert.ToInt32(Enumerable.Range(0, 3).ToArray()); 
```

我知道它无法将类型为 'System.Int32[]' 的对象转换为类型 'System.IConvertible' 。

该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T18:24:20.483

`chart.Series["Series1"].Points.AddY`似乎只需要一个`int`，而不是一个`int[]`。您需要遍历范围并分别添加点。

# jquery - jQuery在点击时上下滑动

> ID：10146228
> 
> 赞同：2
> 
> 时间：2012-04-13T18:22:13.133
> 
> 标签：jquery, jquery-ui

我有一个可以上下滑动面板的设施，它使用`.mousedown`，`.mouseup`并且`draggable`我遇到了一些问题。

1.  可拖动的不会在它的容器中向上移动，但指针会记录下降（可能与它在所有东西滑出时所做的移动有关。

2.  滑出面板应该在周围的内容之上。position:absolute 有效，但尾随词折叠以填充它应该占据的空间。我希望它保持内联。

[编辑]`hoverClass`也没有激活。

[http://jsfiddle.net/monsto/tDt2M/](http://jsfiddle.net/monsto/tDt2M/)（概述的词是菜单词）

和代码...

```
$(function() {
$('#word').mousedown(function(ev, ui) {
    $("#save").slideDown(100);
    $("#del").slideDown(100);
});    
$('#word').mouseup(function(ev, ui) {
    $("#save").slideUp(100);
    $("#del").slideUp(100);
});    
$('#word').draggable({
    containment: 'parent'
    ,revert: true, revertDuration: 100
});
$('#del').droppable({
    tolerance: 'pointer'
    ,hoverClass: 'over'
    ,drop: function() {
        var vote = alert("Delete action goes here");
    }
});
$('#save').droppable({
    tolerance: 'pointer'
    ,hoverClass: 'over'
    ,drop: function() {
        var vote = alert("SAVE");
    }
});
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T21:04:14.880

对于悬停 css 类，将 css 动态设置为可放置函数的一部分，而不是使用 css 类...

```
$('.del').droppable({
    tolerance: 'pointer'
    ,hoverClass: 'over'
    ,over: function() {
        $(this).css('background-color', '#fff');
    }
    ,drop: function() {
        var vote = alert("Delete action goes here");
    }
}); 
```

对于这些事件，我得到了很好的结果。如果您必须先单击单词才能看到选项（或者您可以将其移动到鼠标上方），则不同。这样，当您开始拖动时，div 已经扩展...

```
$(function() {
    $('#word').draggable({
        revert: true, revertDuration: 100
    });
    $('#del').droppable({
        tolerance: 'pointer'
        ,over: function() {
            $(this).css('background-color', '#f88');
        }
        ,drop: function() {
            var vote = alert("Delete action goes here");
        }
    });
    $('#save').droppable({
        tolerance: 'pointer'
        ,over: function() {
            $(this).css('background-color', '#8f8');
        }
        ,drop: function() {
            var vote = alert("SAVE");
        }
    });

    $('#word').click(function(e, u){
        $("#save").slideDown(100);
        $("#del").slideDown(100);
    });

    $("#word").bind('dragstop', function(e, u){
        $("#save").slideUp(100);
        $("#del").slideUp(100);
    });
}); 
```

# visual-studio-2010 - 有没有办法让 Visual Studio 2010 将评论放在最左边的列中？

> ID：10146230
> 
> 赞同：0
> 
> 时间：2012-04-13T18:22:22.170
> 
> 标签：visual-studio-2010, comments

我喜欢将`//`'s 注释掉的代码放在最左边的列中，因为这样可以更容易地区分被注释掉的代码和实际注释。Xcode 使用`cmd`+`slash`快捷方式执行此操作。

但是，VS2010 中的等效快捷方式++`ctrl`始终将 插入到行中第一个字符的左侧。例如`k``c``//`

![在此处输入图像描述](../Images/b724686d12b1cc76496ad05ae07b21bd.png)

有什么方法可以让 VS 按我的意愿行事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T21:19:33.267

我使用以下宏。如果您选择了很多行进行评论，那会很慢，而且我对编写宏不太熟悉，所以它可能会改进很多，但它对我有用。

```
Public Module Module1
    Sub CodeBlocksComment()
        Dim start_line, end_line, temp As Integer
        Dim selection As EnvDTE.TextSelection
        selection = DTE.ActiveDocument.Selection

        start_line = selection.TopLine
        end_line = selection.BottomLine
        If end_line < start_line Then
            temp = start_line
            start_line = end_line
            end_line = temp
        End If

        If Not start_line = end_line And selection.BottomPoint.AtStartOfLine Then
            end_line -= 1
        End If

        DTE.UndoContext.Open("Comment Region")
        Try
            For i = start_line To end_line
                selection.GotoLine(i)
                selection.StartOfLine(vsStartOfLineOptions.vsStartOfLineOptionsFirstColumn)
                selection.Text = "//"
            Next
            selection.GotoLine(start_line)
            selection.StartOfLine(vsStartOfLineOptions.vsStartOfLineOptionsFirstColumn)
            selection.LineDown(True, end_line - start_line + 1)
        Finally
            DTE.UndoContext.Close()
        End Try
    End Sub
End Module 
```

然后，您可以设置所需的任何键盘快捷键。该命令将被列为`Macros.MyMacros.Module1.CodeBlocksComment`

# objective-c - 将整个 uiview 保存为 PDF

> ID：10146232
> 
> 赞同：1
> 
> 时间：2012-04-13T18:22:31.010
> 
> 标签：objective-c, xcode, user-interface, uiviewcontroller, xcode4.2

我知道如何将 uiview 保存为 PDF，但我的问题是如何将整个 uiview 保存为 PDF，例如，如果您有一个比 iPad 显示更长的页面并且您需要滚动它，我只能将活动视图保存在PDF 文件，但其他文件不存在。我正在寻找帮助或任何对我有帮助的教程。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T23:49:38.070

您可以像这样将视图呈现为 PDF：

```
#define kDefaultPageHeight 1024
#define kDefaultPageWidth  768
#define kMargin 5

CGRect origframe = someView.frame;
NSString *heightStr = origFrame.size.height;
int height = [heightStr intValue];

// Size of the view in the pdf page
CGFloat maxHeight   = kDefaultPageHeight - 2*kMargin;
CGFloat maxWidth    = kDefaultPageWidth - 2*kMargin;
int pages = ceil(height / maxHeight); // or use 1 if you only have 1 page.

UIGraphicsBeginPDFContextToFile(@"some/full/path.pdf", CGRectZero, nil);
UIGraphicsBeginPDFPageWithInfo(CGRectMake(0, 0, kDefaultPageWidth, kDefaultPageHeight), nil);
CGContextRef currentContext = UIGraphicsGetCurrentContext();
CGContextTranslateCTM(currentContext, kMargin, kMargin);

/* this is the view that you will render to the PDF */
[someView.layer renderInContext:currentContext];

UIGraphicsEndPDFContext(); 
```

*当然这是一个粗略的代码片段，您需要根据自己的需要进行调整*

# css - 获取 CSS 背景以覆盖众多 div

> ID：10146233
> 
> 赞同：0
> 
> 时间：2012-04-13T18:22:36.193
> 
> 标签：css, background, height, css-float

目前，我有两个设置为“float:left;”的 div 标签 我想对两者都应用背景颜色，但每个都可以根据内容的大小而有所不同。我尝试添加一个额外的 div 并为其应用背景颜色但没有高度？这是我的测试页面：http: [//joshblease.co.uk/wp-content/themes/rounded/test.php](http://joshblease.co.uk/wp-content/themes/rounded/test.php)

谢谢，乔希。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T18:29:03.837

我懂了。您希望背景是浮动 div 的极端周围的一个框吗？

默认情况下，父 div 不会扩展以包含浮动子级。有一些解决方法：

*   将父 div 设置为具有`overflow: hidden`或`overflow: auto`。
*   在父元素 ( ) 之后添加一个空元素`#back`，并将其设置为`clear: both`。
*   使用 css 自动执行上述操作：

```
#back:after {
   content: ".";
   visibility: hidden;
   display: block;
   height: 0;
   clear: both;
} 
```

其中任何一个都应该适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T18:31:32.677

以下方法避免了该`overflow`方法在某些情况下可能出现的一些问题。根据我对您的测试页标记的理解，此 CSS 使用您的 div ID。

```
#back {
    *zoom: 1;
}
#back:after {
    content: "";
    display: table;
    clear: both;
} 
```

如果您希望搜索和阅读更多内容，这称为清除浮动或“clearfix”。

# iphone - Ipad/Iphone 版本，2 个目标，1 个代码库

> ID：10146235
> 
> 赞同：1
> 
> 时间：2012-04-13T18:22:54.850
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我目前正在为 iOS 开发 cocos2d 游戏。目前我正在运行时检查它是否是运行和调整坐标等的 ipad 或 iphone。为了这。

但现在我想要两个版本，一个用于 iPad，一个用于 iPod touch/iPhone。所以我想要两个目标，但仍然使用相同的代码库。

目前我检查

```
UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad 
```

以确定是否使用了哪个设备。但现在我想检查使用了哪个应用程序/目标。如果有人在 iPad 上使用 iPhone 版本，我不希望它针对 iPad 进行调整（iPhone 版本成本较低，因此不应针对 ipad 进行调整）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T22:25:28.807

在使用完全相同的代码库的同时更改您在不同目标中的行为的一个好方法是创建一个预处理器定义并在其中一个目标中省略它，或者在每个目标中进行不同的设置。然后可以根据此定义以不同方式编译代码以更改其行为（例如，如果您使用`#ifdef`指令，则通过条件编译）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T22:16:52.160

如果对于 iPhone 应用程序目标，您将目标设备系列设置为 iPhone，`UI_USER_INTERFACE_IDIOM()`将始终返回 UIUserInterfaceIdiomPhone，即使在 iPad 上也是如此。

# windows-runtime - 在winrt（地铁风格应用程序）中将事件连接到视图模型

> ID：10146247
> 
> 赞同：0
> 
> 时间：2012-04-13T18:23:31.493
> 
> 标签：windows-runtime, windows-store-apps, winrt-xaml

Metro 风格的 Winrt 应用程序中不存在行为。我正在尝试将我的视图中的事件连接到我的视图模型。[jarrey 在codeproject](http://www.codeproject.com/Articles/319855/Attached-Command-for-Windows-8-Metro-Style-in-C?msg=4220634#xx4220634xx)中有一个帖子。以前有人用过这个吗？如果你有，我的问题是：我可以联系任何活动吗？在命令绑定仅可用于按钮单击之前。

如果您有除 eventtocommand 之外的其他事件连接方式，请随时发表评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T21:13:53.587

不确定事件，但在[http://winrtbehaviors.codeplex.com/上可以快速实现 WinRT 的行为](http://winrtbehaviors.codeplex.com/)

# c# - 在 Visual Studio 项目中使用我自己的 .cs 类

> ID：10146248
> 
> 赞同：0
> 
> 时间：2012-04-13T18:23:34.147
> 
> 标签：c#, class, import, using

我敢肯定这个问题是相当愚蠢的......

我有一个 Visual Studio 2010 项目 (Project1)。在这个项目中，我有一个表单（FormPrincipal）和一个类（ClassAux）。我想在 FormPrincipal 的代码中使用 ClassAux 的方法。

我试过：

```
 using ClassAux; 
```

并且：

```
 using Project1.ClassAux; 
```

但是当我尝试使用一种方法时（ClassAux 有一个使用单例模式的 getInstance() 方法）说“当前上下文中不存在该名称”。

我还检查了两个类（表单和类）使用相同的命名空间。

我应该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T18:28:18.027

看起来你混合了不同的想法，关键字**using**用于从命名空间访问类型。要访问类 X 的方法，要么创建此类的对象，要么将方法设为静态并通过类名直接访问它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T18:32:02.023

由于您使用的是 VS 2010，因此我建议您使用 IDE 的功能。如果这两个文件都是您的项目的一部分，它可以帮助创建使用。

你说你有`getInstance()`方法。`.cs`如果这是公共和静态的，则在表单文件的方法中键入以下内容。

```
var instance = ClassAux.getInstance(); 
```

然后将光标放在单词 ClassAux 上，然后单击**`Ctrl`+`.`** 几个选项将出现在名称下方的智能标签中。第一个将提供在文件顶部创建正确的使用。

顶部的`using`语句只提供了一种缩短文件中类型名称的方法，它不能包含类的名称，只能包含命名空间。

# wpf - 将 VS2010 项目加载到 Expression Blend 时出现属性无法识别或无法访问的错误

> ID：10146250
> 
> 赞同：9
> 
> 时间：2012-04-13T18:23:36.177
> 
> 标签：wpf, visual-studio, visual-studio-2010, expression-blend, expression-blend-4

我在 VS2010 中有一个使用 XAML 的项目，现在我需要将其加载到 Expression Blend 4 中。该项目在 VS2010 中构建并运行，这是它第一次加载到 Blend 中。即使成员未被识别，它也会在 Blend 中构建和运行。

为什么 Scale 属性无法识别，为什么它在功能正常工作时显示为错误？

**编辑**虽然这会构建并运行，但 XAML 不会在 Blend 中以图形方式显示，因此非技术用户无法修改。

在许多包含对用户控件的引用的 .xaml 文件中，有一个 Blend 无法识别的属性并出现以下错误：

```
The member "XXXX" is not recognized or is not accessible 
```

该属性存在于文件后面的 .cs 代码中，并且在每种情况下，错误消息都是相同的。

我在互联网上查看了很多可能的答案，但没有一个是解决方案。引用的项目不是只读的。各种类和属性是公共的。我还在 .csproj 文件中添加了以下 WPF 引用，但该引用已丢失。

```
<ProjectTypeGuids>{60dc8134-eba5-43b8-bcc9-bb4bc16c2548};{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}</ProjectTypeGuids> 
```

在以下代码中，无法识别 Scale 特性，即使它作为属性存在于用户控件中。

这是 MyLogo.xaml 中的 UserControl：

```
<UserControl x:Class="NamespaceX.NamespaceY.UI.Shapes.MyLogo"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" Height="132" Width="105">
<Canvas>
    <Canvas.LayoutTransform>
        <ScaleTransform x:Name="st" CenterX="0" CenterY="0" />
    </Canvas.LayoutTransform>
    <Image Source="/Client;component/Images/MyLogo.png"/>
</Canvas> 
```

这是 MyLogo.xaml.cs 中的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace NamespaceX.NamespaceY.UI.Shapes
{
/// <summary>
/// Interaction logic for MyLogo.xaml
/// </summary>
public partial class MyLogo : UserControl
{
    public double Scale
    {
        get
        {
            return st.ScaleX;
        }
        set
        {
            st.ScaleX = value;
            st.ScaleY = value;
        }
    }

    public MyLogo()
    {
        InitializeComponent();
    }
}
} 
```

在我的 Navigation.xaml 文件中，我有这个：

```
<UserControl x:Class="NamespaceX.NamespaceY.UI.UserControls.Navigation"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:shape="clr-namespace:NamespaceX.NamespaceY.UI.Shapes"    
Height="185" Width="1280" Loaded="UserControl_Loaded">
<FrameworkElement.Resources>
    <ResourceDictionary Source="../Resources/Main.xaml" />
</FrameworkElement.Resources>
<Canvas>
    <shape:MyLogo Scale="1.2" Height="181.483" Canvas.Left="38" Canvas.Top="4" Width="188" />
    <StackPanel Canvas.Left="205" Canvas.Top="-2" Width="1062">

    </StackPanel>
</Canvas> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-13T21:02:46.727

这是解决方案。在应用程序的 .csproj 文件中，更改以下内容：

```
<Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
<Platform Condition=" '$(Platform)' == '' ">x86</Platform> 
```

对此：

```
<Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
<Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform> 
```

不要被 Visual Studio 报告您在配置管理器中更多地在 AnyCPU 中运行的事实所迷惑。您必须手动编辑 .csproj 文件。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-06-25T02:57:08.693

它们的相关之处在于更改平台会更改缓存的程序集。接受的答案是不可接受的。

这是我推荐的：

1.  关闭所有文件
2.  清洁溶液
3.  重建解决方案

受影响的 XAML 现在应该没有生成错误。

这对我有用，你的结果可能会有所不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-17T13:01:54.083

将项目的构建属性更改为“任何 CPU”为我解决了这个问题。我仍然无法理解这与问题有什么关系。但它当然有魔力。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-25T14:59:14.767

正如其他人所说，将目标从 x64 更改为 AnyCPU 修复了设计器中的错误，这看起来很奇怪。

我在 Visual Studio 论坛上找到了以下内容：

(Q) 当文档包含自定义元素（例如，带有用户控件的 XAML）时，设计视图对于 x64 和 ARM 目标平台不可用。

(A) 从 Visual Studio 2015 开始，我们使您能够设计/创作您的 XAML，即使您的目标是 x86 以外的任何东西。Visual Studio 2015 Update 2 应该汇集了一些修复和更改，以使这种体验更好地工作。

但是，值得注意的是，当项目针对 x86 以外的任何对象时，我们将无法执行您可能在设计器中编写的任何代码。这是因为 x86 进程（XAML 设计器是）无法运行 ARM 或 x64 代码的限制。您应该能够查看和编辑页面上的所有 XAML，并将任何自定义类型替换为替换项，以尽可能保留所见即所得的体验（并在您真正关心在设计器中运行代码时切换到 x86）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-01T01:40:46.560

我在 Silverlight 上遇到了同样的问题，原来是我的用户控件上的命名空间太长了，我只是把它缩短了，它可以工作。希望能帮助到你！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-07T16:51:47.217

我能够通过 VS2012 中的 vb.net 项目一致地重现/修复此问题。在 Project ... Properties ... Compile ... Target CPU 中设置为 AnyCPU（默认）。一切正常。

将目标 CPU 更改为 x64，保存并构建

关闭并重新打开解决方案。

您现在收到“成员“XXXX”无法识别或无法访问”错误

将目标 CPU 改回任何 CPU，保存并构建

窗口现在可以正确显示。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-09T16:47:49.963

我也有同样的例外。我的问题是，该属性的类型在一个程序集中，在我使用 UserControl 的项目中没有引用它。

# sharepoint - 与映射关联的列已被删除/重命名

> ID：10146254
> 
> 赞同：0
> 
> 时间：2012-04-13T18:23:55.443
> 
> 标签：sharepoint, sharepoint-2010, linq-to-sharepoint

我有一个名为 Activity 的内容类型，它继承表单 Event，我有一个名为 Activities 的列表实例，它的内容类型是 Activity 当 SPMetal 生成实体时，我看到以下类

公共部分类活动：事件和公共部分类活动活动：活动

当我编写以下代码来保存新实体时

```
 public void Save(Activity activity)
    {
        var context = new MACEntitiesDataContext("http://localhost:8088");
        var activities = context.GetList<Activity>("Activity");
        activities.InsertOnSubmit(activity);
        context.SubmitChanges();
    } 
```

它抛出

与映射关联的列已被删除/重命名

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:53:10.547

另一个解决方案 - 我试图从 InfoPath 表单中*设置*一个可为空的 bool 值。我的经验是更新 xml 值并将表单内容保存回库是可以的，但在这种情况下更新提升的列是不行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:12:24.717

我知道这是一个旧线程，但我只是遇到了这个问题，这就是我解决它的方法。

我有一个分配了内容类型的列表。我添加了一些项目，然后生成了 SPMetal。嗯，内容类型发生了变化，我在列表中更新了它并重新运行了 SPMetal。完成所有测试后，我们部署到生产环境，这就是错误发生的时候。我们在 LinqPAD 中运行了相同的查询，一切正常。只是不是来自我们的工作流程。

事实证明，因为我更新了列表中的内容类型（生成 SPMetal 的那个），所以它创建了一些奇怪的虚拟成员来表示更改。另一个列表（生产列表）从来没有原始的内容类型，所以它不识别虚拟成员，它爆炸了。

我修复它的方法是删除表，重新创建它（同名），然后重新为其分配内容类型，然后运行 ​​SPMetal。

# c++ - 读取通过 libcurl 下载的文件

> ID：10146255
> 
> 赞同：0
> 
> 时间：2012-04-13T18:23:56.113
> 
> 标签：c++, curl, libcurl

如何使用 libcurl 下载文件而不是将其保存到磁盘，而只需读取其文件内容？我看到我可以使用 WRITEFUNCTION 将文件写入磁盘，但是我看不到如何在不先保存到磁盘的情况下从服务器中提取并读取。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T18:28:23.917

您可以使用 WRITEFUNCTION 写入任何您想要的地方，甚至只将内容保存在内存中而不写入磁盘。看看`libcurl`网站上的例子：

[http://curl.haxx.se/libcurl/c/getinmemory.html](http://curl.haxx.se/libcurl/c/getinmemory.html)

该示例是 C-ish，但您可以轻松地将分配替换为 a`vector<byte>`或 a`string`

# java - 获取 Jar 文件的路径：不同项目的不同结果

> ID：10146257
> 
> 赞同：0
> 
> 时间：2012-04-13T18:24:07.843
> 
> 标签：java, path, jar

我有一个获取当前 jar 文件路径的代码。但是有一个奇怪的事情：我有两个 jar 文件（两个不同的项目）。在项目 A：当我运行它并打印到控制台时，我看到它打印正确。但是，在项目 B：它只是打印当前 jar 文件的驱动器，而不是文件夹。

例如：文件夹 D:\temp 中的 A.jar 和 B.jar：

B的结果：`/D:/temp/`

A的结果：（`./`前面有一个点！！！）

这是我的代码：

```
 String path = getClass().getProtectionDomain().getCodeSource().getLocation().getPath();
        String decodedPath = URLDecoder.decode(path, "UTF-8");
        String RealPath = decodedPath.substring(0, decodedPath.lastIndexOf("/") + 1);

        System.out.println("path: " + path);
        System.out.println("decodePath: "+decodedPath);
        System.out.println("Real path not include file name: "+RealPath); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:43:56.873

据我所知，当我在 java 中使用目录时，句号（ . ）表示当前目录。可能只是java表现得很奇怪？或者你同时运行两个罐子？尝试在 B 之前运行 A，反之亦然，看看它是否有所不同。（我会将此作为评论，但我认为我没有足够的声誉这样做:(）

# html - 浮动 div 使用 % 宽度，最小/最大宽度和 100% 高度（响应式）

> ID：10146262
> 
> 赞同：5
> 
> 时间：2012-04-13T18:24:18.817
> 
> 标签：html, css

我有 2 个 div，一个需要固定宽度，另一个需要响应用户设备。目前，当低于某个宽度时，浮动 div 会跳到单独的行上。有没有办法...

1) 使它们都达到身体的 100% 高度

2）保持在同一条线上，这样右侧的 div 可以缩小宽度，而左侧的 div 保持它的最小/最大宽度？

此外，70% 的正确 div 永远不会填满 70% 的可用空间。

我意识到我正在尝试做的事情有点矛盾，但我想不出办法来解决它。

[http://jsfiddle.net/建立/fxQfv/](http://jsfiddle.net/establish/fxQfv/)

**HTML**

```
<article>
</article>

<section>
</section> 
```

**CSS**

```
article  { 
background: blue;
float: left;
height: 100px;
width: 30%;
min-width: 200px;
max-width: 200px;
}

section  { 
background: red;
float: left;
height: 100px;
width: 70%;
} 
```

​ ​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T18:37:56.123

[http://jsfiddle.net/fxQfv/3/](http://jsfiddle.net/fxQfv/3/)

```
article  { 
    background: blue;
    height: 100px;
    width: 30%;
    float:left;
    min-width: 200px;
    max-width: 200px;
}

section  { 
    background: red;
    height: 100px;
    width: auto;
} 
```

对于您的身高问题，请查看这篇文章：[http](http://www.alistapart.com/articles/fauxcolumns/) ://www.alistapart.com/articles/fauxcolumns/ ​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T18:40:22.813

你的问题是这两行：

```
min-width: 200px;
max-width: 200px; 
```

他们与这条线相矛盾：

```
width: 30%; 
```

将`section`始终为宽度的 70%，但`article`始终为`200px`. 如果您删除这两行，它将起作用。

如果您需要文章是`200px`，则该部分应该是`width: auto`，尽管我不知道是否所有浏览器都保证了这种行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T18:51:11.827

我不认为你的想法可以分别使用这两个元素来实现。相反，我会将其`<article>`放入`<section>`，然后制作该部分

```
section  {
width: 100%;
}​ 
```

这样， the`<section>`将始终适合行，并且`<article>`仍然可以具有固定宽度。此外，您不需要为 输入百分比宽度`<article>`，因为设置`max-width = max-height`将替换它。

[http://jsfiddle.net/fxQfv/4/](http://jsfiddle.net/fxQfv/4/)

# windows-phone-7 - xml容器溢出隐藏模拟

> ID：10146266
> 
> 赞同：3
> 
> 时间：2012-04-13T18:24:27.827
> 
> 标签：windows-phone-7, xaml

是否有类比溢出：xaml 中的 html 隐藏？我只是尝试了不同类型的容器（网格、画布等），但仍然无法模拟这种行为。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T18:46:09.850

使用类似的东西：

```
<Grid Width="200" Height="100">       
  <Grid.Clip>
    <RectangleGeometry Rect="0, 0, 200, 100"/>
  </Grid.Clip>
</Grid> 
```

# java - jSpinner 不显示月份

> ID：10146267
> 
> 赞同：2
> 
> 时间：2012-04-13T18:24:34.067
> 
> 标签：java, swing, jspinner

我在我的 JFrame 上放置了一个微调器（拖放 GUI）。当我点击它时，我已经在里面写了这个事件

```
 private void jSpinner1MouseClicked(java.awt.event.MouseEvent evt) {

          String months[] = { "January", "February", "March", "April", "May",
          "June", "July", "August", "September", "October", "November",
         "December" };
         SpinnerModel model = new SpinnerListModel(months);
         jSpinner1.setModel(model);

         } 
```

当我单击微调器时，它不显示月份。请给我一个想法。可能是我第一次使用它，所以犯了一些愚蠢的错误：P

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T18:43:10.297

*   我从来没有创建 custom `SpinnerModel`，因为 API 中实现的方法对我有用，正如我预期的那样，

*   use [`SpinnerDateModel`](http://www.java2s.com/Tutorial/Java/0240__Swing/UsingSpinnerDateModeltocreateJSpinner.htm), rest 是在[教程中关于`JSpinner`](http://docs.oracle.com/javase/tutorial/uiswing/components/spinner.html)包含代码示例的。

# c# - 设置wpf图片的imagesource

> ID：10146269
> 
> 赞同：1
> 
> 时间：2012-04-13T18:24:37.093
> 
> 标签：c#, wpf, image, imagesource

我知道有一些类似的问题，但它们对我没有帮助：

有以下代码在后面的代码中显示图像：

```
BitmapImage logo = new BitmapImage();
logo.BeginInit();
logo.UriSource = new `Uri("pack://application:,,,/ApplicationName;component/Images/Klar.JPG");`
logo.EndInit(); 
```

图像位于与文件夹相同级别的图像文件`bin`夹中。

我的错误是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T18:35:31.820

有关 Pack URI 的信息，请参见[此处](http://msdn.microsoft.com/en-us/library/aa970069.aspx)。我相信你的应该是：

```
logo.BeginInit();
logo.UriSource = new Uri("pack://application:,,,/Images/Klar.JPG");
logo.EndInit(); 
```

它假设在项目级别您有一个名为 Images 的文件夹，其中包含一个名为 Klar.JPG 的 jpg。

# facebook - Facebook iframe 样式

> ID：10146273
> 
> 赞同：0
> 
> 时间：2012-04-13T18:24:46.547
> 
> 标签：facebook, iframe, styling

我无法为页面上的 facebook likebutton 应用 z-index 样式。

例如：http: [//jsbin.com/ogupen/4/edit](http://jsbin.com/ogupen/4/edit)

希望将样式应用于#LikePluginPagelet

```
$("#LikePluginPagelet").contents().find("a").css("z-index","-999999"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T19:14:22.810

玩插件不是一个好方法，因为你完全无法控制它们是如何实现的，所以明天 facebook 可以决定改变一些东西，他们可以突然将“LikePluginPagelet”更改为“LikePlugin”，然后你的代码将有没有效果。

诚然，您可以尝试了解 Facebook 正在进行的当前更改，但这些类型的事情并没有被他们在路线图中报告，因此这会让您的事情变得更加困难。

然而，你可以做的是控制包含 fb 插件的元素，因为它在你的页面中，你可以用它做任何你想做的事情。如果“fb like 按钮与我页面上的某些内容重叠”，那么只需确保包含 fb like 按钮的元素具有正确的 z-index，而不是尝试破解 like 按钮本身。

# linq - 使用 LINQ 方法的 NavigationProperty 实体框架简单过滤器

> ID：10146274
> 
> 赞同：0
> 
> 时间：2012-04-13T18:24:46.923
> 
> 标签：linq, entity-framework, linq-to-entities, linq-method-syntax

我正在学习 EF 和 LINQ to EF。我们使用的是 LINQ 方法而不是 LINQ 表达式。

我正在尝试从我的 2 个实体中进行非常简单的查询。

NavigationGroup 是与 NavigationGroupLocation 的一对多关系。NavigationGroup 中的导航属性称为“NavigationGroupLocations”

在我看来，这段代码应该可以工作：

```
 List<NavigationGroup> groups = db.DataModel.NavigationGroups.Where(g => g.NavigationGroupLocations.Location == 1).ToList(); 
```

Location 是我的 NavigationGroupLocation 实体中的一个 int。

有人可以解释为什么这不起作用以及通过导航属性过滤的正确方法是什么？我在表达式语法中看到了很多示例，但似乎无法将其与方法语法相关联。

我正在使用 C# 4 和 EF 4。

谢谢您的帮助！

编辑

我看到，由于我的导航属性是一个集合，我无法访问单个属性。所以我正在尝试这段代码：

```
 .Where(g => g.NavigationGroupLocations.Any(l => l.Location == 1)); 
```

当我尝试运行它时，我收到此错误：

```
 Cannot implicitly convert type 'System.Linq.IQueryable<ME.Data.ECom.NavigationGroup>' to 'System.Data.Objects.ObjectSet<ME.Data.ECom.NavigationGroup>'. An explicit conversion exists (are you missing a cast?) 
```

我应该做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T19:09:40.023

看起来像这样有效：

```
 var query = db.DataModel.NavigationGroups.Where(g => g.NavigationGroupLocations.Any(l => l.Location == selectedLocation)); 
```

用作条件语句时它不起作用。

```
 var query = db.DataModel.NavigationGroups;
 if (selectedLocation > 0)
 {
    query = query.Where(g => g.NavigationGroupLocations.Any(l => l.Location == selectedLocation));
 } 
```

那是我得到错误的时候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T18:44:17.070

你需要做一个加入。`NavigationGroupLocations`是项目列表，因此您无法访问`.Location`where 子句中的属性。

# jquery - jQuery Tooltips 插件 qtip2 - 如何定义自定义样式，如 qtip1？

> ID：10146276
> 
> 赞同：4
> 
> 时间：2012-04-13T18:24:52.320
> 
> 标签：jquery, qtip2

我正在使用出色的 jquery 工具提示插件 qtip 2。如果您还没有，请检查一下。 [http://craigsworks.com/projects/qtip2/](http://craigsworks.com/projects/qtip2/)

有谁知道如何为工具提示定义自己的自定义 CSS（工具提示颜色、边框、背景、半径等），而不是使用他们预定义的工具提示样式？

我尝试了什么：

*   我查看了他们的风格指南，但它没有定义你自己的风格。[http://craigsworks.com/projects/qtip2/docs/style/](http://craigsworks.com/projects/qtip2/docs/style/)
*   尝试了他们的论坛，但他们失败了（现在备份）
*   创建我自己的工具提示类并引用它们
*   转换我的 qtip 版本 1 样式定义（失败）

如果这个问题对你有帮助，请告诉我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T18:35:44.453

我个人有 5 个主题到我的网站。我碰巧使用[jQuery UI 的 ThemeRoller](http://jqueryui.com/themeroller/)来做到这一点。jQuery UI 和 qTip2 使用相同的类名。

我发现的唯一警告是您包含 CSS 文件的顺序。您需要覆盖 qTip2 样式，因此只需在 qTip2 CSS 文件*之后*包含 jQuery UI CSS文件。

这样做可以让您下载对 qTip2 的更新，而不必担心您的自定义 qTip2 样式被覆盖，并且为您提供了一个很好的 GUI 来创建您的主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T18:30:37.963

我只是把它放在我的样式表中。使用您需要的任何属性...

```
.ui-tooltip .ui-tooltip-content,
.ui-tooltip p,
.ui-tooltip ul,
.ui-tooltip li,
.ui-tooltip,
.qtip {
    max-width: 280px;
    min-width: 50px;
    font-size: 17px;
    line-height: 19px;
    text-align: center;
    border-color: #666;
} 
```

`jquery.qtip.css`您也可以通过从工作表中拉出一个并编辑它来创建自己的。使用`mystyle`与预定义 qTip2 样式之一相同的方式。

```
/*! mystyle tooltip style */
.ui-tooltip-mystyle .ui-tooltip-titlebar,
.ui-tooltip-mystyle .ui-tooltip-content{
    border-color: #303030;
    color: #f3f3f3;
}
.ui-tooltip-mystyle .ui-tooltip-content{
    background-color: #505050;
}

.ui-tooltip-mystyle .ui-tooltip-titlebar{
    background-color: #404040;
}

.ui-tooltip-mystyle .ui-tooltip-icon{
    border-color: #444;
}

.ui-tooltip-mystyle .ui-tooltip-titlebar .ui-state-hover{
    border-color: #303030;
} 
```

# php - UTF-8 换行符出现在 phpMyAdmin 中，但不在网页上

> ID：10146277
> 
> 赞同：1
> 
> 时间：2012-04-13T18:24:55.210
> 
> 标签：php, mysql, encoding, utf-8

我有一个最初以`latin1_swedish_ci`. 由于我的应用程序使用 unicode 字符，我更新了存储 utf8 数据的列以使用`utf8_unicode_ci`排序规则，并且表排序规则也更改为`utf8_unicode_ci`（所有其他不处理 utf_8 的列在`latin1_swedish_ci`排序规则中保持不变）。

输入以带有 utf-8 字符（如项目符号）的 XML 形式出现 - 由于 PHP 的 DomDocument 的 loadXML() 函数需要对输入进行 utf-8 编码，因此我在解析为之前对 XML 进行编码

```
$doc->loadXML(utf8_encode($Input)); 
```

现在，在表格列中插入 utf-8 数据之前，我正在使用 PHP 的`utf8_decode()`函数，以便正确存储数据。（如果我不这样做，当我在网页上显示时，项目符号字符会显示为垃圾字符）。

问题是`&#x0D;`换行符在网页中不显示换行符我正在回显输出但是当我在 phpMyAdmin 中查看记录时，换行符显示（使用萤火虫，我可以`<br>`在文本中看到标签）。

我究竟做错了什么？我尝试使用以下元标记为我的 html 页面设置编码，但这也不起作用。

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T18:27:21.443

如果你使用 nl2br() 会发生什么？

```
echo nl2br($output); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T18:25:56.173

您忘记了[`nl2br()`](http://php.net/manual/en/function.nl2br.php)将换行符转换为换行符。

# sql - 你能在 SQL 中进行这样的查询吗？

> ID：10146282
> 
> 赞同：1
> 
> 时间：2012-04-13T18:25:18.470
> 
> 标签：sql, relational-database

我有三张桌子：

```
tbl_customers
tbl_users
tbl_reviews 
```

我有一个应用程序，客户在其中为用户提交评论。我想要做的不是同一客户对同一用户进行多次评论。这就是我想做的。

```
SELECT
  *
FROM
  tbl_customers
WHERE
  tbl_customer.CustomerID != tbl_review.CustomerID
  AND tbl_user.UserID != tbl_reviews.UserID 
```

*   CustomerID 是 tbl_customer 的 p_id
*   UserID 是 tbl_users 的 p_id。
*   tbl_review 中两者的外键关系。

提前致谢。

如果需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T18:33:38.730

对使用两列的 tbl_reviews 表设置唯一约束。这将完全禁止多个条目，这将允许您进行简单的连接。您只需要在添加条目时添加验证，这样当用户尝试为同一个人输入多个评论时，它就不会出错。

```
alter table tbl_reviews add unique index(reviewid, userid);

select *
from tbl_users as u
join tbl_reviews as r on r.userid = u.userid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T18:34:20.867

如果您不希望 tbl_customer 对同一个 tbl_user 有多个评论，那么您可以根据 CustomerID 和 UserID 为 tbl_review 创建一个唯一索引。这将确保您不可能有两个具有相同链接的评论。

除此之外，您可以在发布之前进行简单的计数以查看评论是否已经存在： `SELECT COUNT(*) FROM tbl_reviews WHERE CustomerID = @CustomerID AND UserID = @UserID`

如果您说您想在数据库中有多个评论但只从每个客户中选择一个，那么您只需按客户 ID 分组并选择第一个/最后一个评论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T19:14:07.617

我同意唯一约束的想法。我想在 SQL Server（可能还有其他数据库）中添加它，您可以使用 MERGE 语句而不是 INSERT 语句，它将更新现有记录或插入新记录。但是，您可能只想检查是否存在评论，以及是否确实询问他们是否要更新它。在此人做的不仅仅是指定评论所在的用户之前，这样做，这样他们就可以调用现有的评论并进行更改，而不是重写所有内容。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-13T18:29:38.080

```
SELECT * FROM
tbl_users tu
 INNER JOIN 
tbl_reviews tr
ON tu.UserID=tr.UserID; 
```

# android - Android Activity 强制关闭问题

> ID：10146292
> 
> 赞同：0
> 
> 时间：2012-04-13T18:26:46.537
> 
> 标签：android, progressdialog, logcat

`enter code here`我正在尝试在我的 Android 应用程序中放置一个进度对话框，但我遇到了一些麻烦。我是 Android 新手，所以我正在关注本教程： http: [//p-xr.com/android-tutorial-how-to-make-a-progress-dialog/](http://p-xr.com/android-tutorial-how-to-make-a-progress-dialog/)

当我在手机上测试我的应用程序时，它所做的只是强制关闭。有人可以帮忙吗？这是我的 .Java 活动：

```
public class XXXXXActivity extends Activity {
private ProgressDialog progressDialog;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    WebView myWebView=(WebView)findViewById(R.id.webview);
    myWebView.addJavascriptInterface(new JavaScriptInterface(this),"Android");
    WebSettings websettings =
            myWebView.getSettings();
    websettings.setJavaScriptEnabled(true);
    myWebView.setWebViewClient(new MyWebViewClient());
    myWebView.loadUrl("http://XXXXX.com");
}

private void runDialog(final int seconds)
{
    progressDialog = ProgressDialog.show(this, "Please wait...", "Loading...");
    new Thread(new Runnable(){
        public void run(){
           try {
                        Thread.sleep(seconds * 1000);
                progressDialog.dismiss();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }).start();
}
public class JavaScriptInterface {
    Context mContext;
    /** Instantiate the interface and set the context*/
    JavaScriptInterface(Context c) {
        mContext = c;
    }
    /** Show a toast from the web page*/
    public void showToast(String toast) {
        Toast.makeText(mContext, toast, Toast.LENGTH_SHORT).show();
    }
}
private class MyWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading (WebView view, String url) {
        view.loadUrl(url); 
        if
        (Uri.parse(url).getHost().equals("XXXXX.com")) {
            // This is my web site, so do not override; let my WebView load the page
            return false;
        }
        // Otherwise, the link is not for a page on my site, so launch another Activity that handles URLs
        Intent intent=new
                Intent (Intent.ACTION_VIEW,Uri.parse(url));
        startActivity(intent);
        return true;
    }
} 
```

日志猫：

```
[2012-04-13 19:44:55 - XXXXX] ------------------------------
[2012-04-13 19:44:55 - XXXXX] Android Launch!
[2012-04-13 19:44:55 - XXXXX] adb is running normally.
[2012-04-13 19:44:55 - XXXXX] No Launcher activity found!
[2012-04-13 19:44:55 - XXXXX] The launch will only sync the application package   on the device!
[2012-04-13 19:44:55 - XXXXX] Performing sync
[2012-04-13 19:44:55 - XXXXX] Automatic Target Mode: Preferred AVD 'MY-PHONE' is not available. Launching new emulator.
[2012-04-13 19:44:55 - XXXXX] Launching a new emulator with Virtual Device 'MY-PHONE'
[2012-04-13 19:45:08 - Emulator] emulator: WARNING: Unable to create sensors port: Unknown error
[2012-04-13 19:45:08 - XXXXX] New emulator found: emulator-5554
[2012-04-13 19:45:08 - XXXXX] Waiting for HOME ('android.process.acore') to be launched...
[2012-04-13 19:46:05 - XXXXX] emulator-5554 disconnected! Cancelling 'sync'! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T18:34:34.993

我看到一个问题：您在非 gui 线程中关闭对话框：

```
new Thread(new Runnable(){
        public void run(){
           try {
                        Thread.sleep(seconds * 1000);
                progressDialog.dismiss();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }).start(); 
```

这段代码很奇怪，我认为你应该重写逻辑。

# mysql - PDO 事务提交而不是回滚

> ID：10146293
> 
> 赞同：0
> 
> 时间：2012-04-13T18:26:49.777
> 
> 标签：mysql, transactions, pdo, innodb, commit

所以有2个InnoDB表，员工和公司。我使用 try/catch 块在事务中插入 2 个查询。但是，当我在第一个查询中犯了一个明确的错误（我输入了一个不正确的表名，员工而不是员工）时，数据库当然不会插入该查询的行，但是第二个查询运行并被提交给数据库而不是回滚（因为第一个查询插入失败）。

结果是emply employees 表，但company 表带有新记录。我在这里想念什么？由于没有插入第一个查询，它不应该回滚吗？

```
$employee_id = 2;
$employee_name = 'Marky Mark';

try {
   $dbh->beginTransaction();
   $query = "INSERT INTO employee (employee_name) VALUES (:employee_name)";
   $insert_emp = $dbh->prepare($query);
   $insert_emp->execute(array(':employee_name' => $employee_name));

   $Employee_id = $dbh->lastInsertId();

   $query = "INSERT INTO companies (company_name,employee_id) VALUES ('SO',:Employee_id)";
   $insert_emp_comp = $dbh->prepare($query);
   $insert_emp_comp->execute(array(':Employee_id' => $Employee_id));
   $dbh->commit();
} catch (Exception $e) {
   $dbh->rollBack();
   echo "Failed: " . $e->getMessage();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T18:30:52.307

PDO 默认不抛出异常。您必须将其配置为抛出异常：

```
$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

查看[此页面](http://php.net/manual/en/pdo.error-handling.php)以获取有关 PDO 如何处理错误的更多信息。

# c# - 如何按多个通用 linq 表达式分组

> ID：10146295
> 
> 赞同：3
> 
> 时间：2012-04-13T18:26:56.513
> 
> 标签：c#, .net, linq, lambda, linq-expressions

我正在尝试使用 Linq 表达式来构造查询，并且试图按多列进行分组。假设我有一个基本集合：

```
IEnumerable<Row> collection = new Row[]
{
    new Row() { Col1 = "a", Col2="x" },
    new Row() { Col1 = "a", Col2="x" },
    new Row() { Col1 = "a", Col2="y" },
}; 
```

我知道您可以使用 lambda 表达式对它们进行分组：

```
foreach (var grp in collection.GroupBy(item => new { item.Col1, item.Col2 }))
{
    Debug.Write("Grouping by " + grp.Key.Col1 + " and " + grp.Key.Col2 + ": ");
    Debug.WriteLine(grp.Count() + " rows");
} 
```

如您所见，此分组正确：

```
Grouping by a and x: 2 rows
Grouping by a and y: 1 rows 
```

但是现在，假设我收到一组要分组的选择器，它作为我的方法中的参数传递给我，并且实体类型是通用的：

```
void doLinq<T>(params Expression<Func<T,object>>[] selectors)
{
    // linq stuff
} 
```

调用该方法的人会这样调用：

```
doLinq<Row>(entity=>entity.Col1, entity=>entity.Col2); 
```

我将如何构建 group-by 表达式？

```
foreach (var grp in collection.GroupBy(
      item => new { 
          // selectors??
      }))
{
    // grp.Key. ??
} 
```

**编辑**

我在上面进行了更新，希望能阐明为什么我需要这组选择器。

**编辑#2**

*使doLinq*中的实体类型成为通用的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T21:21:36.067

我对 linq-to-sql 的了解非常有限，但是 GroupBy 里面的内容真的很重要吗？因为如果不是，您可以推出自己的 keySelector。无论如何，我用 Sql Server CE 和 Sql Server Express 都试过了，这似乎可行：

```
using System;
using System.Linq;
using System.Collections.Generic;
using System.Data.Linq;
using System.Linq.Expressions;

namespace ConsoleApplication1 {
    class Props {
        public List<object> list = new List<object>();
        public override bool Equals(object obj) {
            return Enumerable.SequenceEqual(list, (obj as Props).list);
        }
        public override int GetHashCode() {
            return list.Select(o => o.GetHashCode()).Aggregate((i1, i2) => i1 ^ i2);
        }
    }
    class Program {
        static void Main(string[] args) {
            Lol db = new Lol(@"Data Source=.\SQLExpress;Initial Catalog=Lol;Integrated Security=true");
            db.Log = Console.Out;
            doLinq(db.Test, row => row.Col1, row => row.Col2);
            Console.ReadLine();
        }
        static void doLinq<T>(Table<T> table, params Func<T, object>[] selectors) where T : class {
            Func<T, Props> selector = item => {
                var props = new Props();
                foreach (var sel in selectors) props.list.Add(sel(item));
                return props;
            };
            foreach (var grp in table.GroupBy(selector)) {
                Console.Write("Grouping by " + string.Join(", ", grp.Key.list) + ": ");
                Console.WriteLine(grp.Count() + " rows");
            }
        }
    }
} 
```

Lol 数据库有一个三行表“测试”。输出是这样的：

```
SELECT [t0].[Col1], [t0].[Col2]
FROM [dbo].[Test] AS [t0]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.0.30319.1

Grouping by a, x: 2 rows
Grouping by a, y: 1 rows 
```

我检查了查询，似乎 linq-to-sql 足够聪明，不能在不能为 groupBy 生成 sql 时，所以它会遍历表的所有行，然后在客户端对它们进行分组。

**编辑：**为了完成而进行的少量添加，连接字符串现在假定为 Sql Server Express。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T09:17:07.927

好吧，我假设你使用 linq-to-sql 或类似的东西，所以你需要表达式树。如果没有，可能还有其他可能性。

我可以看到的可能解决方案：

*   动态链接

请参阅 Vladimir Perevalovs 的回答。

*   手动构建整个 groupby 表达式树

请参阅 [http://msdn.microsoft.com/en-us/library/bb882637.aspx](http://msdn.microsoft.com/en-us/library/bb882637.aspx)

*   丑陋的解决方法

好吧，那是我的部门：）

未经测试的代码：

```
 void doLinq(params string[] selectors) // checking two expressions for equality is messy, so I used strings
     foreach (var grp in collection.GroupBy(
          item => new { 
              Col1 = (selectors.Contains("Col1") ? item.Col1 : String.Empty),
              Col2 = (selectors.Contains("Col2") ? item.Col2 : String.Empty)
              // need to add a line for each column :(
          }))
     {
          string[] grouping = (new string[]{grp.Key.Col1, grp.Key.Col2 /*, ...*/ }).Where(s=>!s.IsNullOrEmpty()).ToArray();
          Debug.Write("Grouping by " + String.Join(" and ", grouping)+ ": ");
          Debug.WriteLine(grp.Count() + " rows");
     }
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T18:44:27.100

你应该看看动态 Linq：http: [//blogs.msdn.com/b/mitsu/archive/2008/02/07/linq-groupbymany-dynamically.aspx](http://blogs.msdn.com/b/mitsu/archive/2008/02/07/linq-groupbymany-dynamically.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T20:33:33.607

该解决方案对我有用。它涉及两个部分：

*   给定行值和选择器集，创建一个分组对象（我不雅地实现为 object[]）。这涉及编译和调用行项目上的每个选择器的 lambda 表达式。
*   为分组对象类型实现 IEquality（在我的例子中是 IEqualityComparer）。

*第一部分*

```
foreach (System.Linq.IGrouping<object[], T> g in collection.GroupBy(
    new Func<T, object[]>(
        item => selectors.Select(sel => sel.Compile().Invoke(item)).ToArray()
    ),
    new ColumnComparer()
)
{ ... } 
```

*第二部分*

```
public class ColumnComparer : IEqualityComparer<object[]>
{
    public bool Equals(object[] x, object[] y)
    {
        return Enumerable.SequenceEqual(x, y);
    }

    public int GetHashCode(object[] obj)
    {
        return (string.Join("", obj.ToArray())).GetHashCode();
    }
} 
```

这适用于基本的 Linq，而 Linq 则适用于 MySql 连接器。其他哪些 Linq 提供程序，以及它适用于哪种表达式类型是另一个问题......

# c# - 使用 SQLDataReader 时出现“不存在数据时尝试读取无效”

> ID：10146296
> 
> 赞同：8
> 
> 时间：2012-04-13T18:27:00.570
> 
> 标签：c#, asp.net

这是我的通用功能：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Configuration;
using System.Data;
using System.Data.SqlClient;

/// <summary>
/// Summary description for GeneralFunctions
/// </summary>
public class GeneralFunctions
{
    public GeneralFunctions ()
    {
        //
        // TODO: Add constructor logic here
        //
    }

    public static DataTable GetData ( string query )
    {
        SqlDataAdapter dataAdapter;
        DataTable table;

        try
        {
            dataAdapter = new SqlDataAdapter( query, GetConnectionString() );
            table = new DataTable();

            dataAdapter.Fill( table );
            return table;
        }
        catch ( Exception ex )
        {
        }
        finally
        {
            dataAdapter = null;
            table = null;
        }

        return table;
    }

    private static string GetConnectionString ()
    {
        string connectionString = ConfigurationManager.ConnectionStrings[ "CAPortalConnectionString" ].ConnectionString;

        return connectionString;
    }

    public static int? AuthenticateLogin ( string username, string password )
    {
        using ( var conn = new SqlConnection( GetConnectionString() ) )
        using ( var cmd = conn.CreateCommand() )
        {
            conn.Open();
            cmd.CommandText =
            @"SELECT 
                 DistID 
             FROM 
                 Distributor
             WHERE 
                 Username = @username 
             AND 
                 Password = @password";
            cmd.Parameters.AddWithValue( "@username", username );
            cmd.Parameters.AddWithValue( "@password", password );
            using ( var reader = cmd.ExecuteReader() )
            {
                if ( !reader.Read() )
                {
                    // no results found
                    return null;
                }
                return reader.GetInt32( reader.GetOrdinal( "DistID" ) );
            }
        }
    }

    public static string GetDistInfo ( int distID )
    {
        using ( var conn = new SqlConnection( GetConnectionString() ) )
        using ( var cmd = conn.CreateCommand() )
        {
            conn.Open();
            cmd.CommandText =
            @"SELECT 
                 FName + ' ' + LName AS Name
             FROM 
                 Distributor
             WHERE 
                 DistID = @distid";
            cmd.Parameters.AddWithValue( "@distid", distID );
            using ( var reader = cmd.ExecuteReader() )
            {
                return reader.GetString( reader.GetOrdinal( "Name" ) );
            }
        }
    }

} 
```

这是我的登录页面：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class index : System.Web.UI.Page
{
    protected void Page_Load ( object sender, EventArgs e )
    {

    }
    protected void but_login_Click ( object sender, EventArgs e )
    {
        if ( username_id.Text != "" || password.Text != "" )
        {
            // Verify the username and password match the database
            var distId = GeneralFunctions.AuthenticateLogin( username_id.Text, password.Text );

            if ( distId != null )
            {
                // User is authenticated
                var name = GeneralFunctions.GetDistInfo( (int)distId );
                Session[ "DistName" ] = name;
                Session[ "DistID" ] = distId;

                Response.Redirect( "dashboard.aspx", false );
            }
            else
            {
                // provide error label here username and password do not match
                authentFailed.Text = "Username / Password did not match our records";
            }
        }
        else
        {
            // Username or Password blank error lable
            authentFailed.Text = "Please Input Username / Password";
        }
    }
} 
```

在我添加 GetDistInfo 方法之前，它工作得很好，登录了用户。然后我尝试添加 Session 变量和 GetDistInfo 方法。我将从 AuthenticateLogin 返回的 DistID 传递给 GetDistInfo 方法。它出现以下错误：

异常详细信息：System.InvalidOperationException：不存在数据时尝试读取无效。

```
Source Error:

Line 95:             using ( var reader = cmd.ExecuteReader() )
Line 96:             {
Line 97:                 return reader.GetString( reader.GetOrdinal( "Name" ) );
Line 98:             }
Line 99:         }

Source File: c:\inetpub\wwwroot\Base\ClientAccessPortal\App_Code\GeneralFunctions.cs    Line: 97 
```

当我对数据库运行 SQL 时，它正确地拉回了客户端名称。我不确定为什么它不在代码中这样做。任何人都能够看到我错过了什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-13T18:32:10.667

请尝试更换这个。实际上`Read()`在您的代码中丢失了。

```
using ( var reader = cmd.ExecuteReader() )
{
     return reader.GetString( reader.GetOrdinal( "Name" ) );
} 
```

有以下

```
using ( var reader = cmd.ExecuteReader() )
{
     if(reader.Read())
     {
          return reader.GetString( reader.GetOrdinal( "Name" ) );
     }
     return null;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T18:37:28.980

您需要先阅读（在代码中使用上面的阅读器时您正在这样做）：

```
using ( var reader = cmd.ExecuteReader() )
{
    // you haven't positioned yourself on a record yet.
    while (reader.Read())
    {
        return reader.GetString( reader.GetOrdinal( "Name" ) );
    }
    return string.Empty;
} 
```

**编辑** 回应你得到的错误；因为你定义了你的功能

```
public static string GetDistInfo ( int distID ) 
```

“超出功能”的所有可能方式都必须返回一些东西。在您的情况下，您应该返回一个字符串或可能为 null，具体取决于您想要做什么。

# asp.net - 使用标记在 ASP Web 窗体上布局控件

> ID：10146304
> 
> 赞同：-1
> 
> 时间：2012-04-13T18:27:22.070
> 
> 标签：asp.net

![在此处输入图像描述][1]我是 ASP.NET 的新手，我正在尝试在 ASP.NET 中重新创建现有的 Winform 计算器应用程序。它基本上是两个不同标签页上的一堆文本框。我无法在网页上布置文本框控件。我有 Telerik UI 控件库可用。我应该使用网格、表格吗？

我已经包含了现有 Winforms 应用程序的屏幕截图。

谢谢你的帮助。

对不起，我是新成员，所以我不能发布图像。它由六组文本框组成；表格左侧有 3 个，右侧有 3 个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T19:52:04.947

转到表格菜单以插入表格。请看图片。![桌子](../Images/871cfba67b8c7f3d2ee98584356d8f6b.png)

然后从工具箱中选择文本框（双击它或下拉到单元格）。 ![文本框](../Images/f251b1405f9982be461aa969f21581ca.png)

# java - 类设计最小化内存使用：如果对象实例变量（非原始）为空，它是否仍使用必要的引用字节？

> ID：10146311
> 
> 赞同：3
> 
> 时间：2012-04-13T18:28:08.370
> 
> 标签：java, memory, memory-management, jvm

我目前正在设计一个数据结构，我试图将内存消耗保持在最低限度。我有一些实例变量可能为空，具体取决于节点在 Trie 中的位置。我开始创建单独的类（一个有实例变量，一个没有），这样我就不会用空引用浪费大量空间......但后来我开始想知道 jvm 是如何工作的. 如果对象引用为空，它是否仍会占用完整的 8 个字节（假设 x64 架构），或者它是否有更优化的方式来存储空引用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T18:34:42.827

我几乎可以肯定 JVM 将使用与`null`其他任何参考一样多的空间。如果您有一个具有 3 个引用字段的对象，并且您将中间的那个无效，我认为任何虚拟机都无法移动第三个并保存 4 或 8 个字节（然后当您更改到`null`别的东西，它必须再次移动东西）。如果这在技术上是可行的，那就不值得了——额外的计算成本和代码复杂性会扼杀任何潜在的收益。此外，部分由于 C 的传统，在大多数机器上，按位等于 0 的指针在非常低的级别上作为 NULL 工作，因此`null`引用具有相当明显的表示。

在 Oracle/Sun JDK上，如果您的堆小于 16 GB（无论引用是否存在），您可以使用[-XX:+UseCompressedOops](http://docs.oracle.com/javase/7/docs/technotes/guides/vm/performance-enhancements-7.html#compressedOop)`null`命令行参数在 64 位上进行 4 个字节的引用而不是 8 个字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T18:32:39.633

答案是肯定的，它仍然使用必要的字节。在 Java 中，null 只是一个引用可以具有的值。这意味着引用什么都没有。在这种情况下，您仍然会占用参考空间。这是 32 位系统上的 4 个字节或 64 位系统上的 8 个字节。

请参见[空变量是否需要内存空间](https://stackoverflow.com/questions/2430655/java-does-null-variable-require-space-in-memory)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T18:33:55.280

类和超类也使用一些字节。

如果你真的想避免大部分内存使用，我建议使用**FlyWeight**模式

（想法：重用相同的不可变对象；让工厂创建和缓存它们）。

您的代码变得有点复杂，这很糟糕。但是你可以节省很多内存。

* * *

另一种选择是处理更简单的类型（不是对象）。但是，它不太实用，您必须在外部对数据进行所有操作……所以我更喜欢 FlyWeight。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T06:54:18.543

我们可以应用简单的数学运算：假设您有一个具有 type 字段的对象，`int`在任何架构上都是 4 个字节，它可以是未定义的（这取决于用例该字段必须取什么值，您可以理解它是未定义的）。现在，如果已定义，则使用 4 个字节。如果未定义，则浪费 4 个字节。

假设您将其包装到对象中。现在，如果定义了该字段，它将使用 4 或 8 个字节（取决于 JVM 位数和使用 开启或关闭的指针压缩`-XX:+UseCompressedOops`）作为指针。具有单个 4 字节字段的对象将消耗 16 字节，无论位数如何（对象在 32 位和 64 位 Java 运行时都将占用 16 字节，因为它包含 8 或 12 字节的对象头和 4 字节的值，并且使用的内存对齐最接近的 8 个字节）。

总而言之，如果您坚持使用原语，您将使用 4 个字节。如果您将单个包装`int`到一个对象中，如果该字段具有值，您将使用 20 或 24 个字节；如果值为空，则为 4 或 8 个字节。

# asp.net - 如何在水平对齐的 asp.net tabstrip 上获得更多的垂直间距

> ID：10146312
> 
> 赞同：0
> 
> 时间：2012-04-13T18:28:13.877
> 
> 标签：asp.net, visual-studio-2008

我有一个水平对齐的 asp.net tabstrip。有时选项卡占据两行，底行似乎就在顶行的顶部。我需要使用哪些属性来使第二行远离第一行？我们尝试在后面的代码中创建一定数量的选项卡后手动插入分页符，但在较小的屏幕尺寸上，选项卡不能很好地堆叠。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T19:31:49.247

屏幕截图或一些示例代码会有所帮助，但听起来您需要`CssClass`为每一行设置属性，并为类添加边距：

```
.toprow {
    margin-bottom: 10px !important;
} 
```

# jquery-validate - jQuery 验证和 WP 指针

> ID：10146315
> 
> 赞同：0
> 
> 时间：2012-04-13T18:28:19.283
> 
> 标签：jquery-validate

我正在研究使用 WP-Pointers 显示 jQuery 验证插件生成的验证错误的可能性。

这就是 WP-Pointer javascript 的样子：

```
$('.selector').pointer({
    content: '<h3>Error</h3><p>Lorem Ipsum.</p>',
    position: 'right',
    close: function() {

    }
}).pointer('open'); 
```

这就是验证 javascript 的样子：

```
$('.registration-form').validate({
debug                   : true,
rules                   : { username    : {required: true, minlength: 4},
                            email       : {required: true, email: true}
},
messages                : { username    : 'Username must be atleast 4 characters long.',
                            email       : 'Please enter a valid email address.'
},
errorLabelContainer     : '.message-box',
submitHandler           : function(form) {
    $(form).ajaxSubmit({
        success         : show_registration_response,
        url             : ajaxVars.ajaxurl,
        type            : 'POST',
        timeout         : 10000,
        clearForm       : true,
        resetForm       : true
    }); 
}
}); 
```

我想知道是否可以将 WP-Pointer 脚本作为函数或验证脚本中的某些东西传递以将错误消息显示为 WP-Pointers？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T03:11:31.510

将 WP-Pointer 脚本包装为 jQuery Validate 的 invalidHandler 选项内的回调。此外，指定了没有回调的 errorPlacement 选项以停止在元素旁边显示错误。

```
$('.registration-form').validate({
debug           : true,
rules           : { username    : {required: true, minlength: 4},
                    email       : {required: true, email: true}
},
messages        : { username    : 'Username must be atleast 4 characters long.',
                    email       : 'Please enter a valid email address.'
},
invalidHandler  : function(form, validator) {
                    var errors = validator.numberOfInvalids();
                    if (errors) {
                        $(validator.errorList[0].element).pointer({
                            content: '<h3>Error</h3><p>' + validator.errorList[0].message + '</p>',
                            position: 'top',
                            close: function() {
                                // This function is fired when you click the close button
                            }
                        }).pointer('open');

                        validator.errorList[0].element.focus(); //Set focus
                    }
},
errorPlacement  : function(error, element) {

},
submitHandler   : function(form) {
                    $(form).ajaxSubmit({
                        success         : show_registration_response,
                        url             : ajaxVars.ajaxurl,
                        type            : 'POST',
                        timeout         : 10000,
                        clearForm       : true,
                        resetForm       : true
                    });
}
}); 
```

# java - Java GC CMS 收集器时间

> ID：10146317
> 
> 赞同：3
> 
> 时间：2012-04-13T18:28:45.897
> 
> 标签：java, garbage-collection, concurrent-mark-sweep

我们为我们的应用程序启用了垃圾收集日志。我看到一些行，它打印了一些 CMS 步骤的时间。任何人都可以解释或指向一些解释 CMS 日志的链接，例如

9657.238：[CMS 并发标记：17.199/17.396 秒] [时间：**用户 = 80.61 系统 = 10.00，实际 = 17.40 秒**]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T16:54:34.063

CMS 及其阶段在[http://blog.griddynamics.com/2011/06/understanding-gc-pauses-in-jvm-hotspots_02.html](http://blog.griddynamics.com/2011/06/understanding-gc-pauses-in-jvm-hotspots_02.html)中有很好的解释。

对于打印的时间，这是 Unix 进程时间，正如 Lithium 所指出的，您可以阅读[time(1) 的输出中的“real”、“user”和“sys”是什么意思？](https://stackoverflow.com/questions/556405/what-do-real-user-and-sys-mean-in-the-output-of-time1)为了那个原因。

# c# - 需要在没有导航属性的实体框架中做相当于 .Any 的操作

> ID：10146321
> 
> 赞同：3
> 
> 时间：2012-04-13T18:28:39.607
> 
> 标签：c#, entity-framework

我的数据库有两个表，`Reads`并且`Alarms`. `Reads`从(1) 到`Alarms`(many) 表存在一对多关系。由于种种原因，表上的外键约束`Alarms`被删除了。我无法恢复此约束。因此，我的实体框架模型中的`Read`对象没有`Alarms`导航属性。

我的`ReadViewModel`班级中有一个布尔属性，名为`HasAlarms`. 如果表`true`中至少有一行`Alarms`与`Read`. 我知道如果`Alarms`导航属性在那里，我可以这样做：

```
var reads = from read in context.Reads
            select new ReadViewModel { . . . };

foreach ( ReadViewModel read in reads ) {
    read.HasAlarms = read.Alarms.Any();
} 
```

但是，我不再拥有警报导航属性。在我目前的情况下，最有效的方法是什么？

托尼

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T18:40:23.953

你需要这样的东西：

```
foreach ( ReadViewModel read in reads ) {
    read.HasAlarms = context.Alarms.Any(a => a.ReadId == read.Id);
} 
```

您还可以执行连接，以在一个查询中获取状态：

```
var results = from r in reads
join a in context.Alarms on r.Id equals a.ReadId into ra // perform a left join
from a in ra.DefaultIfEmpty()                            // on Alarms
select new { Read = r, HasAlarm = a != null };

foreach (var res in results)
   res.Read.HasAlarm = res.HasAlarm; 
```

# c - C 是否支持函数表达式？

> ID：10146328
> 
> 赞同：7
> 
> 时间：2012-04-13T18:29:07.047
> 
> 标签：c, syntax, functional-programming

是否可以在 C 中使用函数表达式？例如，我有以下代码片段（在`main`函数内部）：

```
void print_line(char *data) {
  printf("%s\n", data);
}

// print all elements in my_list
list_foreach(&my_list, print_line); 
```

我想做这样的事情：

```
list_foreach(&my_list, void (char *data) {
  printf("%s\n", data);
}); 
```

在 C 中可能有这样的事情吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T18:32:04.287

总之，不。至少不是类似 Javascript 的语法。函数指针与您将要获得的一样接近。两者在语法上几乎没有区别。如果您正在寻找闭包或内部函数的行为，那么您肯定不会很快看到它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T18:34:05.057

不在标准 C 中，不。Apple 引入了一个名为 blocks 的功能，可以让你做到这一点，它已经提交标准化，但它还没有（如果它能够通过的话）。Apple 的语法如下所示：

```
list_foreach(my_list, ^(char *data) {
    printf("%s\n", data);
}); 
```

它基本上是函数指针语法，`*`替换为`^`（以及表达式中返回类型的推断）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T21:11:47.030

你不能在纯 C 中做到这一点。但是你可以用宏来伪造它：

```
#define FOR_EACH(type, x, array, size, code) \
                 do { \
                      int i; \
                      for (i=0; i<size; ++i) { \
                        type x = array[i]; \
                        code \
                      } \
                 } while(0)

int main()
{
  int arr[] = {0,1,2,3,4,5,6};
  FOR_EACH(int, x, arr, 7, printf("%d ", 1 << x); );

  return 0;
} 
```

**编辑**
我已经重新编码示例以更便携 - 不使用 GCC 块扩展。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T18:33:29.103

绝对不是 Objective-C 块、闭包等。但是使用**函数指针**呢？

# objective-c - Objective-C 从 CCTMXTiledMap (Cocos2d) 获取瓦片位置

> ID：10146333
> 
> 赞同：0
> 
> 时间：2012-04-13T18:29:24.487
> 
> 标签：objective-c, cocos2d-iphone

我正在尝试创建一个简单的循环，该循环遍历 CCTMXTiledMap 中 CCTMXLayer 中的所有图块。我想要实现的只是打印出每个图块的位置，但对于我的生活，我无法弄清楚如何循环通过图块或如何访问它们的容器。我是一个objective-c新手，所以请温柔:)

请停下来！

到目前为止我所拥有的：

```
CGSize mapSize = [_tileMap mapSize];
CCTMXLayer *backgroundLayer = [_tileMap layerNamed:@"Background"];
int h = 0;
int w = 0;
NSInteger i = 0;
for(h = 0; h < mapSize.height; h++)
{
    for(w = 0; w < mapSize.width; w++)
    {
        i = h * mapSize.width + w;
        // I tried the following but none of it worked:
        //CCArray* tiles = [backgroundLayer  children];
        //CCSprite *tile = [backgroundLayer tileAt:tileCoord];
        //CCSprite*tile = [tiles objectAtIndex:i];
        //CCNode* tile = [backgroundLayer children getChildByTag:i];
        CGPoint position = [tile position];
        [_debugHud addTileId:i at:position];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:50:21.940

`CCSprite *tile = [backgroundLayer tileAt:tileCoord];`应该可以正常工作，假设`tileCoord = CGPointMake(h,w);`或类似的东西。

你确定你`CCTMXLayer *backgroundLayer`不是`nil`并且是正确的层吗？

# jquery - jcarousel 滚动属性

> ID：10146338
> 
> 赞同：0
> 
> 时间：2012-04-13T18:29:47.920
> 
> 标签：jquery, jcarousel

[http://sorgalla.com/projects/jcarousel/#Getting-Started](http://sorgalla.com/projects/jcarousel/#Getting-Started)

我一直在测试 jCarousel 滚动一些图像，我注意到一些奇怪的行为。如果我将 Scroll 属性设置为 3，只要剩余项目可被 3 整除，它将一次滚动 3 个项目。一旦你说 2 个剩余项目，它将单独滚动每个项目，而不是滚动的预期行为剩下两个。

有人遇到过这个和/或有修复吗？

# javascript - 来自一个外部站点的 Javascript 应用程序未在 iframe 中运行

> ID：10146342
> 
> 赞同：1
> 
> 时间：2012-04-13T18:30:00.760
> 
> 标签：javascript, iframe, external

我正在使用 iframe 将我公司人力资源部门网站的访问权限添加到我们的部门网站。一切正常，除非用户尚未登录，否则 javascript 密码应用程序不会运行。我读到这是由于同源政策，但未能找到成功的处理方法。是否有一些代码片段我可以添加到 iframe 以防止它阻止其他网站的 javascript？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T18:39:55.683

两个页面必须共享相同`document.domain`的内容才能相互编写脚本。

[https://developer.mozilla.org/en/document.domain](https://developer.mozilla.org/en/document.domain)

[https://developer.mozilla.org/en/Same_origin_policy_for_JavaScript](https://developer.mozilla.org/en/Same_origin_policy_for_JavaScript)

如果您的父页面在域“myArea.myCompany.net”下，并且 iframe 中的 HR 页面在“theirArea.myCompany.net”下，您可以将两者都设置`document.domain`为“myCompany.net”，然后他们就可以脚本相互。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T18:40:57.027

同源策略意味着不能从另一个域访问一个帧。无论是 iframe，还是您上方的框架或窗口中的其他任何地方。

目的是保护用户。任何网站都可以添加加载 www.facebook.com 的 iframe，如果您已登录，只需阅读 HTML 即可提取您的真实姓名和朋友等。相同的原产地政策可以防止这种情况发生。

**没有办法绕过它**（如果有，那就是一个错误）。唯一的解决方案是通过将两个页面托管在同一个域上来避免该问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T18:42:32.173

你必须使用和 IFRAME 吗？为什么不能简单地从部门网站链接到人力资源网站或在弹出窗口中显示它。

没有代码片段会转向相同的来源策略，但也许 CORS (http://en.wikipedia.org/wiki/Cross-origin_resource_sharing) 可以帮助您。

干杯

# mysql - 如何将随机值插入表字段？

> ID：10146345
> 
> 赞同：-1
> 
> 时间：2012-04-13T18:30:16.800
> 
> 标签：mysql, database

> **可能重复：**
> [SQL 用随机数据填充表](https://stackoverflow.com/questions/3371503/sql-populate-table-with-random-data)

如何将随机值插入表字段？就像我想输入 100 个学生的 100 个虚拟电话号码，我该怎么做？谢谢。ps：应该是9位随机数吧？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-13T18:40:11.100

您可以使用以下站点生成样本随机数据：[http ://www.generatedata.com](http://www.generatedata.com)

转到 Generator 选项卡，选择 ResultType 作为 SQL，提供字段名称并单击 Generate 按钮。

# java - Java用引号解析字符串

> ID：10146347
> 
> 赞同：1
> 
> 时间：2012-04-13T18:30:26.287
> 
> 标签：java, android, string, parsing

我正在尝试解析一个字符串，但我不确定如何解析它，因为它不是简单的逗号解析或类似的东西。我拥有的字符串与此类似：

```
String s = "[\"142.5,106.1\",\"142.5,112.1\",\"143.5,119.1\",\"144.5,128.1\",\"146.5,138.1\",\"147.5,148.1\"]"; 
```

该字符串来自一个 jsonarray，所以为什么格式是这样的，但我的目标是将它解析为一个列表。所以 142.5,106.1 是一个点的 x,y 坐标，依此类推。有人为我指出正确的方向吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T18:33:03.067

您可以简单地使用 StringTokenizer("\"[,]")，然后一次读取两个值（x、y、x、y 等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T18:33:55.533

我不知道我是否理解你，但我认为你错过的只是特殊字符转义。与您一起使用内部双引号，使用像这样的反斜杠 \"。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T18:49:49.833

这是我想出的，如果你可以清理括号，它应该会更快。可能更好和其他方法可以做到这一点，但我使用 split 来分隔所有逗号。所以列表按顺序包含它们，即 list.get[0] 和 list.get[1] 是一对，等等。

公共静态无效主要（字符串[]参数）{

```
 String s ="[\"142.5,106.1\",\"142.5,112.1\",\"143.5,119.1\",\"144.5,128.1\",\"146.5,138.1\",\"147.5,148.1\"]";
    String[] set= s.split(",");
    ArrayList<Double> list = new ArrayList<Double>();
    for(int i=0; i<set.length;i++){
        System.out.println(set[i]);
        list.add(Double.parseDouble(set[i].replaceAll("\\[", "").replaceAll("\"", "").replaceAll("\\]", "")));

    }
    for(int i=0;i<list.size();i++){
        System.out.println(list.get(i));
    }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T18:41:05.293

我知道这完全不是您要问的问题，但我想讨论您任务中的正确方法，而不是立即回答您发布的问题。

如果您收到一个 json 数组对，我们可以假设它的序列化版本将是这样的（我在这里推测，因为我很确定该字符串看起来不像您共享的字符串）：

```
 "[[123, 234], [234, 456],...]" 
```

如果您使用著名的[Gson 库](http://code.google.com/p/google-gson/)将此字符串解析为 java 对象，您可以这样做：

```
 String json = "[[123.3, 234.5], [234.1, 456.5]]";
    Gson gson = new Gson();
    double [][] points = gson.fromJson(json, double[][].class);
    System.out.println(points[1][1]); 
```

这输出：`456.5`正如预期的那样，您不需要自己处理解析 json。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T18:45:03.900

如果它始终采用相同的格式，您可以像这样转换它。

```
 String s ="[\"142.5,106.1\",\"142.5,112.1\"]";

            s=s.replace("[", "");
            s=s.replace("]", "");

            String[] ss=s.split("\"");
        List list=   Arrays.asList(ss);

list.get(0);=142.5,106.1 // so on ..... 
```

据我了解您的要求。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-13T18:58:18.873

一个简单但低效的解决方案将使用这样的 String 方法：

```
 //(being s your example's String)
    String[] coordinates = s.substring(2, s.length() - 2).split("\",\"");
    //the two at the beginning and end of the substring is to eliminate braces ([]) and the first and last quotes (") 
```

坐标字符串数组将包含 120.1,140.4 等数据。

# r - R包依赖

> ID：10146348
> 
> 赞同：12
> 
> 时间：2012-04-13T18:30:29.480
> 
> 标签：r, dependencies, package, r-package, cran

我正在尝试构建一个 R 包，但似乎包依赖项存在一些问题。如果我在 R 中运行代码，我需要包“rgdal”和“rgeos”，所以要从中创建包，我：

*   在 NAMESPACE 文件中添加了“import(rgdal, rgeos)”行
*   将“取决于：rgeos，rgdal”行添加到说明文件中

当我运行 R CMD 检查（构建后）时，我收到一条错误消息：

```
* checking package dependencies ... ERROR
Benötigte, aber nicht verfügbare Pakete:
  'rgeos' 'rgdal'

See the information on DESCRIPTION files in the chapter 'Creating R
packages' of the 'Writing R Extensions' manual. 
```

错误的德语部分：“Benötigte，aber nicht verfügbare Pakete：”=“需要，但不可用的包”。

我已阅读上述手册并了解使用导入、建议或增强的选项，但我很确定这取决于我必须使用的选项，因为在我的代码函数中，我使用的是外部函数这两个包。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-13T18:36:11.283

R 认为您的系统上没有这些软件包。

现在你当然知道你知道了。有什么区别？

好吧，您可能已将它们安装在另一个`R CMD check`不看的目录中。解决此问题的一种方法在“R Internals”手册（引用自“编写 R 扩展”）的第 7 节“工具”中进行了描述，并使用该文件`~/.R/checkEnviron`设置要在`R CMD check`.

例如，我有

```
# edd Apr 2003  Allow local install in /usr/local, also add a directory for
#               Debian packaged CRAN packages, and finally the default dir 
# edd Jul 2007  Now use R_LIBS_SITE, not R_LIBS
R_LIBS_SITE=${R_LIBS_SITE-'/usr/local/lib/R/site-library:'
                          '/usr/lib/R/site-library:/usr/lib/R/library'} 
```

我刚刚打破了一条长线（中间没有两个撇号）。

# android - Android Lint 是否在某处缓存旧结果，如果是，我该如何清除它？

> ID：10146351
> 
> 赞同：1
> 
> 时间：2012-04-13T18:30:32.273
> 
> 标签：android, android-lint

我一直在清理我的 Android 项目上的 Lint 警告，但即使在我修复它们之后，它们中的一些似乎仍然存在。

例如，我收到以下警告：

`Use android.util.FloatMath#sqrt() instead of java.lang.Math#sqrt to avoid argument float to double conversion`

嘿，很高兴知道。我学到了一些东西。所以我纠正了错误（我尝试将我的数学转换为 use`double`和更改`Math`for `FloatMath`）并重新运行我的 Lint 报告。警告仍然出现！更重要的是，HTML 报告中出现的小代码片段与之前的行相同，但由于我移动了一些代码，因此显示的内容不再相关。因此，Lint 似乎以某种方式缓存了先前运行的结果，但我还没有弄清楚如何清除它。

我正在使用命令行 Lint 并根据结果生成 HTML 报告（如果相关）。`lint_report`我正在使用以下命令，该命令在目录中输出多文件 HTML 报告，并在`project_directory`.

```
$ lint --html lint_report/ project_directory/ 
```

我可以以某种方式清除 Android Lint 的旧结果，还是这是一个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T18:27:30.570

事实证明，Android Lint 使用编译后的类文件来进行报告。答案只是在运行 Lint 报告之前重新构建应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T19:47:29.257

**在 Eclipse 中：**

*第一的*

右键单击项目 > Android 工具 > 清除 Lint Markers

*然后*

右键单击项目 > Android 工具 > 运行 Lint：检查常见错误

**命令行：（**按照上面的示例）

*第一的*

```
rm -rf ./project_directory/lint_report 
```

*然后*

再次运行 Lint

# linux - GNU 屏幕：设置名称或标题

> ID：10146357
> 
> 赞同：2
> 
> 时间：2012-04-13T18:30:53.253
> 
> 标签：linux, gnu-screen

我有很多`screen`会话打开，我无法识别哪个是哪个。

我开始`screen`：

```
# screen -d -m -t "myscreen" ./myscript.sh 
```

但`screen -ls`只是显示了这一点：

```
# screen -ls
There are screens on:
    1167..lh18758   (04/13/2012 09:20:49 PM)        (Detached)
    32040..lh18758  (04/13/2012 09:20:05 PM)        (Detached)
    27775..lh18758  (04/13/2012 09:18:27 PM)        (Detached)
    27751..lh18758  (04/13/2012 09:18:27 PM)        (Detached)
    26604..lh18758  (04/13/2012 09:18:01 PM)        (Detached)
    6879..lh18758   (04/13/2012 09:10:28 PM)        (Detached)
    6347..lh18758   (04/13/2012 09:10:15 PM)        (Detached)
    6371..lh18758   (04/13/2012 09:10:15 PM)        (Detached) 
```

可以将名称设置为`screen`会话以看不到`6371..lh18758`标题或名称吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T18:35:08.007

您可以在创建会话时指定名称。

从手册页：

> -S 会话名称
> 
> 创建新会话时，此选项可用于为会话指定一个有意义的名称。此名称标识“screen -list”和“screen -r”操作的会话。它替代了默认的 [tty.host] 后缀。

所以你会做命令行

```
$ screen -d -m -t "myscreen" -S "MeaningfulName" ./myscript.sh 
```

# javascript - jQuery的奇怪问题

> ID：10146360
> 
> 赞同：-2
> 
> 时间：2012-04-13T18:30:58.463
> 
> 标签：javascript, jquery, html

我有这个非常基本的 HTML 页面：

```
<textarea id='carmodeldescription' name="carmodeldescription"></textarea>

<br/>

<button id='#booboo'>button</button> 
```

而这个jQuery：

```
$('#booboo').click(function(e){
    e.PreventDefault;
    var texttosubmit = $('#carmodeldescription').html();
    alert(texttosubmit);
    return false;
}); 
```

当我在中输入`<textarea>`内容并单击按钮时，它`alert()`是一个空字符串。

**但是**，如果在`e.PreventDefault;`我输入这行代码之后：

```
$("#carmodeldescription").html('texttosubmit'); 
```

它可以工作（将“texttosubmit”添加到 textarea 然后提醒它）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T18:33:52.893

您应该使用`val`而不是`html`获取 textarea 的值：

```
$('#carmodeldescription').val() 
```

此外，`e.preventDefault;`没有括号后什么都不做：`e.preventDefault();`@Phrogz 指出 javascript 区分大小写并且`PreventDefault`不存在......`preventDefault`改用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T18:33:38.950

使用`$('#carmodeldescription').val()`而不是`.html()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T18:34:00.033

尝试使用：

```
 $("#carmodeldescription").val(); 
```

我认为这就是你要找的。

# database-design - 物理数据模型表示是否有标准文件格式？

> ID：10146368
> 
> 赞同：3
> 
> 时间：2012-04-13T18:31:38.233
> 
> 标签：database-design, standards, file-format

物理数据模型表示是否有标准文件格式？我的意思是我可以从其中**以图形方式**查看数据表之间关系的文件。

例如，在我的工作中，我们使用“Toad Data Modeler”从现有数据库创建物理数据模型。这些文件是带有“txp”扩展名的 XML。因为我无法在任何地方使用 Toad（许可证成本 $），我查看了如何将模型导出为其他格式，但它的唯一选项是图像，这是有问题的，因为我无法在图像中搜索文本，也无法搜索大型数据库是不可能快速找到东西的。

如果该文件格式不存在，是否至少有某种可以从多个软件解释的事实上的标准？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T09:21:50.437

[不幸的是，实体关系模型](http://en.wikipedia.org/wiki/Entity-relationship_model)没有这样的标准。

为使用[XMI](http://en.wikipedia.org/wiki/XML_Metadata_Interchange)创建[UML 标准需要做](https://stackoverflow.com/q/7930199/1140748)一些工作。

顺便说一句，如果您的问题是**Toad Data Modeler**是专有的，您可以使用[免费软件版本](http://toadworld.com/Freeware/ToadDataModelerFreeware/tabid/637/Default.aspx)。也许它足以满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T12:35:07.410

据我所知，数据库模型的图形表示没有标准（正如 alain janinm 所写）。这可能没关系 - 对于标准机构而言，它太详细了，无法关注。

当然，有一个定义数据库模型的标准：SQL DDL 做得相当不错。因此，您可以做的一件事是从 TOAD 导出 DDL，然后将其导入另一个工具。

您会丢失很多信息 - 注释、布局决策等 - 而且您肯定没有“往返”功能（在其他工具中修改设计，然后将其重新导入 TOAD）。

我认为你在这里受制于市场力量——如果你想使用 TOAD 的功能，你必须使用 TOAD；免费或付费。

# tfs - 变更集应该与哪个工作项相关联？

> ID：10146370
> 
> 赞同：1
> 
> 时间：2012-04-13T18:31:48.000
> 
> 标签：tfs

是将您的变更集与描述要在变更集中完成的工作的任务相关联，还是应该与要求变更的用户故事/错误/需求相关联？对我来说，我认为这将是任务，因为任务将汇总到创建任务的父工作项。但是，我被告知要将变更集与父工作项相关联。如果我这样做，我将无法确定我的任务影响了哪些代码。有人告诉我，出于某些报告原因或测试要求，我必须针对父工作项执行此操作...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T22:47:55.250

两者都做。没有什么可以阻止您将签入与多个工作项相关联，真正的问题是您打算如何处理可追溯性信息。

正如@Dylan Smith 所提到的，在较低级别进行跟踪可以提高信息的粒度，如果您只想选择一个要关联的工作项，那么这也是我的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T21:03:52.667

将其与任务相关联仍然可以让您追溯回用户故事/错误。最终，它将在您的数据仓库中产生更丰富、更细粒度的数据。仍然可以报告数据，如果有人希望报告显示用户故事/错误和相关变更集，则所有数据都可以执行此操作（查找所有子工作项以及与子工作项关联的所有变更集），代表报表设计者可能需要做更多的工作。

就我个人而言，如果合适的话，我倾向于通过将其与任务相关联来捕获更丰富的信息。

# google-chrome - Blogger 上的内联安装不起作用

> ID：10146372
> 
> 赞同：2
> 
> 时间：2012-04-13T18:31:53.503
> 
> 标签：google-chrome, google-chrome-extension, google-chrome-devtools

我有一个由 Blogger [[PhysicsGames.tk]提供支持的博客](http://www.physicsgames.tk)

我在 Chrome Web Store 上也有一个应用程序[THIS ONE](https://chrome.google.com/webstore/detail/hnmdbeamhkbhfobfmoaemhpfcgejlbif)

因此，不幸的是，我一直在使用[内联安装，它运行良好。](https://developers.google.com/chrome/web-store/docs/inline_installation)我今天意识到不再起作用了...

在网站主模板中，我添加了以下代码：

```
<link href='https://chrome.google.com/webstore/detail/hnmdbeamhkbhfobfmoaemhpfcgejlbif'
      rel='chrome-webstore-item'/> 
```

我创建了一个按钮：

```
<a onclick="chrome.webstore.install()" href="#">
  <img src="http://i.imgur.com/D8ul8.png"/>
</a> 
```

所以它应该像这样工作：

1.  在网站上，我点击“按钮”，应该会出现一个这样的对话框[，](https://developers.google.com/chrome/web-store/images/imageAssets/inline_install_dialog.png)这是一个应用程序安装验证对话框。

2.  然后，如果您单击“添加”，则应安装该应用程序。

在我的情况下，停留在第 1 步，对话框永远不会出现。我做错了什么？

提前谢谢，对不起我的英语。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T00:35:44.637

`<link href="..." rel="chrome-webstore-item">`需要在页面的部分`<head>`中。您的页面实际上在`<head>`and`</head>`标记之间有它，但是如果您检查页面的 DOM，您会看到该`<link>`标记实际上显示在正文中：

![DOM 截图](../Images/4c7c1bdd5634675801b990f2d52bd67b.png)

这是因为您`<itemscopetag>`在标记之前有一个（可能由 Blogger 生成）`<link>`，这是未知的，并导致该`<head>`部分提前结束（此行为[由 HTML 规范定义](http://www.whatwg.org/specs/web-apps/current-work/multipage/tree-construction.html#parsing-main-inhead)）。

在某些方面，这是一个 Blogger 错误（它不应该将未知标签放入`<head>`中），但与此同时，一种解决方法是移动`<link>`标签，使其位于标签之上`<itemscopetag>`。

# android - 显示对话框并更新地图视图覆盖

> ID：10146374
> 
> 赞同：0
> 
> 时间：2012-04-13T18:32:01.070
> 
> 标签：android, multithreading, progressdialog, mapactivity

我有一个扩展 MapActivity 的类。

我使用名为 updateMap 的函数在地图上放置了大头针。大头针放置在基于加载的巴士站列表的位置。

我想在下载停止数组时显示一个加载对话框，但我的代码出现错误。我目前弹出对话框并生成一个线程来加载公交路线并更新地图。

经过一些研究，我开始意识到 UI 层不能从单独的线程更新。我试过移动东西，但似乎没有任何效果。

任何帮助表示赞赏！

```
private void updateMap(final int selectedRoute, final boolean isMajor, final boolean isMinor)
{
    dlg = ProgressDialog.show(TransitMap.this, "Updating Map", "Processing... Please wait...");
    new Thread()
    {
        public void run()
        {
            try 
            {
                TransitMap.this.removePins();
                TransitMap.this.addRoutePins(selectedRoute, isMajor, isMinor);
                TransitMap.this.addBusPins(selectedRoute);

                map.post(new Runnable()
                {   
                    public void run()
                    {
                        TransitMap.this.map.postInvalidate();
                    }
                });
            }
            catch(Exception ex)
            {
        }
            // processing done, hide progress dialog
            dlg.dismiss();
        }
    }.start();
} 
```

修改类以使用 AsyncTask 后，我的程序仍然崩溃！

这是 logCat 错误

```
04-13 15:16:49.217: E/AndroidRuntime(21898): FATAL EXCEPTION: main
04-13 15:16:49.217: E/AndroidRuntime(21898): java.util.ConcurrentModificationException
04-13 15:16:49.217: E/AndroidRuntime(21898):    at java.util.ArrayList$ArrayListIterator.next(ArrayList.java:576)
04-13 15:16:49.217: E/AndroidRuntime(21898):    at com.google.android.maps.OverlayBundle.draw(OverlayBundle.java:44)
04-13 15:16:49.217: E/AndroidRuntime(21898):    at com.google.android.maps.MapView.onDraw(MapView.java:530)
04-13 15:16:49.217: E/AndroidRuntime(21898):    at android.view.View.draw(View.java:6971)
04-13 15:16:49.217: E/AndroidRuntime(21898):    at android.view.ViewGroup.drawChild(ViewGroup.java:1710)
04-13 15:16:49.217: E/AndroidRuntime(21898):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1437)
04-13 15:16:49.217: E/AndroidRuntime(21898):    at android.view.ViewGroup.drawChild(ViewGroup.java:1708)
04-13 15:16:49.217: E/AndroidRuntime(21898):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1437)
04-13 15:16:49.217: E/AndroidRuntime(21898):    at android.view.View.draw(View.java:6974)
04-13 15:16:49.217: E/AndroidRuntime(21898):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
04-13 15:16:49.217: E/AndroidRuntime(21898):    at android.view.ViewGroup.drawChild(ViewGroup.java:1710)
04-13 15:16:49.217: E/AndroidRuntime(21898):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1437)
04-13 15:16:49.217: E/AndroidRuntime(21898):    at android.view.ViewGroup.drawChild(ViewGroup.java:1708)
04-13 15:16:49.217: E/AndroidRuntime(21898):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1437)
04-13 15:16:49.217: E/AndroidRuntime(21898):    at android.view.ViewGroup.drawChild(ViewGroup.java:1708)
04-13 15:16:49.217: E/AndroidRuntime(21898):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1437)
04-13 15:16:49.217: E/AndroidRuntime(21898):    at android.view.ViewGroup.drawChild(ViewGroup.java:1708)
04-13 15:16:49.217: E/AndroidRuntime(21898):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1437)
04-13 15:16:49.217: E/AndroidRuntime(21898):    at android.view.ViewGroup.drawChild(ViewGroup.java:1708)
04-13 15:16:49.217: E/AndroidRuntime(21898):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1437)
04-13 15:16:49.217: E/AndroidRuntime(21898):    at android.view.View.draw(View.java:6974)
04-13 15:16:49.217: E/AndroidRuntime(21898):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
04-13 15:16:49.217: E/AndroidRuntime(21898):    at android.view.ViewGroup.drawChild(ViewGroup.java:1710)
04-13 15:16:49.217: E/AndroidRuntime(21898):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1437)
04-13 15:16:49.217: E/AndroidRuntime(21898):    at android.view.View.draw(View.java:6974)
04-13 15:16:49.217: E/AndroidRuntime(21898):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
04-13 15:16:49.217: E/AndroidRuntime(21898):    at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1929)
04-13 15:16:49.217: E/AndroidRuntime(21898):    at android.view.ViewRoot.draw(ViewRoot.java:1590)
04-13 15:16:49.217: E/AndroidRuntime(21898):    at android.view.ViewRoot.performTraversals(ViewRoot.java:1290)
04-13 15:16:49.217: E/AndroidRuntime(21898):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1939)
04-13 15:16:49.217: E/AndroidRuntime(21898):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-13 15:16:49.217: E/AndroidRuntime(21898):    at android.os.Looper.loop(Looper.java:143)
04-13 15:16:49.217: E/AndroidRuntime(21898):    at android.app.ActivityThread.main(ActivityThread.java:4196)
04-13 15:16:49.217: E/AndroidRuntime(21898):    at java.lang.reflect.Method.invokeNative(Native Method)
04-13 15:16:49.217: E/AndroidRuntime(21898):    at java.lang.reflect.Method.invoke(Method.java:507)
04-13 15:16:49.217: E/AndroidRuntime(21898):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-13 15:16:49.217: E/AndroidRuntime(21898):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 
04-13 15:16:49.217: E/AndroidRuntime(21898):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:33:54.030

删除此行

```
dlg.dismiss(); 
```

从它现在所在的地方开始，然后放在它下面。

或如下所示

```
runOnUiThread(new Runnable() {
    public void run() {
        dlg.dismiss();
    }
}); 
```

最后，如果这也不起作用，那么最好使用异步任务，您可以参考此[链接](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T18:34:29.040

`run() non UI-Thread so you cant dismiss it in run`使用`AsyncTask`或`Handler`

在 AsyncTask ....

```
onpreExecute()= ProgressDialog dialog = new ProgressDialog(this);dialog.show(); 
inBackground(...)=put your run code here ..... 
onpostExecute =dialog.dismiss(); 
```

# java - 在 Java 中获取 FTP 文件的 MD5 校验和

> ID：10146382
> 
> 赞同：1
> 
> 时间：2012-04-13T18:32:18.940
> 
> 标签：java, ftp, md5

如何在 JAVA 中读取 FTP 文件（无需下载）时直接获取文件的 MD5 校验和？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T18:36:30.783

你不能那样做。要计算**MD5**哈希，您需要访问文件中的每个字节。因此，您需要先下载它。在 Java 或任何其他编程语言中。

# facebook - 确定 Facebook OpenGraph 结果的对象类型

> ID：10146383
> 
> 赞同：0
> 
> 时间：2012-04-13T18:32:28.077
> 
> 标签：facebook, facebook-opengraph

可以通过 FB OpenGraph 访问的对象在[此处列出](https://developers.facebook.com/docs/reference/api/)

但是 JSON 结果不包含像“object_type”这样的参数。有没有办法确定任何查询的对象类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T18:48:26.850

抱歉，我正在努力更好地理解您的问题。在我看来，你确切地知道你在查询什么。

例如，如果您这样做[https://graph.facebook.com/me/home，JSON结果实际上包括如下类型：](https://graph.facebook.com/me/home)

```
 "type": "link",
     "created_time": "2012-04-13T18:40:59+0000",
     "updated_time": "2012-04-13T18:45:33+0000",
     "shares" 
```

但是，如果您使用以下方式查询：[https](https://graph.facebook.com/me/links) ://graph.facebook.com/me/links JSON 结果不包括类型，因为您知道此时您只会获得“链接”。

我希望我正在回答你的问题。

编辑：

您可以执行以下操作： [http ://graph.facebook.com/1234567890?metadata=1](http://graph.facebook.com/1234567890?metadata=1)

# jquery - jQuery ajax 调用重置所有表单字段

> ID：10146384
> 
> 赞同：1
> 
> 时间：2012-04-13T18:32:31.160
> 
> 标签：jquery, ajax, forms

我一直在使用验证码在我的网站上开发联系表格。可以在这里看到一个例子：

[联系表](http://www.avoidtherisk.com/contact_us.html)

几年前，如果用户需要重新加载验证码图像，我当时唯一的选择就是重新加载整个表单。

自从我开始使用 jquery 以来，是时候将这种方法替换为只刷新图像的方法了。

所以我写了这个小片段：

```
$(document).ready(function() {
    $('#creload').click(function() {
        $.ajax({
            type: "POST",
            url: "/en/KDpg_Captcha.html",
            async: true,
            success: function(ret) {
                $('#cimg').attr('src', ret);
            }
        });
    });
});​ 
```

其中`#creload`是请求重新加载的链接`#cimg`的 id，是实际图像的 id。

我发现如果一个人填写了其他表单字段然后请求重新加载，其他字段将被重置。这不是一个理想的结果。

我会错过什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T18:37:56.653

如果#creload 是一个链接，您需要阻止它执行默认操作，即打开 href 属性中的内容。添加[e.preventDefault() 会](http://api.jquery.com/event.preventDefault/)停止此操作。不要忘记添加**e**作为参数：

```
$('#creload').click(function(e) {
    e.preventDefault();
    // ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T18:39:10.130

当您单击以下链接时：

```
<a href id="creload">here</a> 
```

当前页面被解释为`href`并且页面被重新加载。

您可以按照 TJ 的描述，通过添加`function(e)`和`e.preventDefault()`到您的处理程序以编程方式防止这种情况发生，或者更简单地通过将链接更改为：`click`

```
<a href="#" id="creload">here</a> 
```

或者，如果您不希望`#`链接将访问者带到页面顶部：

```
<a href="javascript:" id="creload">here</a> 
```

# http - Wireshark 保存过滤结果

> ID：10146385
> 
> 赞同：0
> 
> 时间：2012-04-13T18:32:32.847
> 
> 标签：http, filter, wireshark

我有一个从网络捕获的 pcap 文件。现在，每次我尝试查看 HTTP 数据包时，我都会在过滤器中放置“http”。有没有办法只能保存 HTTP 过滤的数据包，而不是数据包中包含的较低级别的协议，例如 TCP、IP、以太网、帧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:37:53.730

尝试[导出](http://www.wireshark.org/docs/wsug_html_chunked/ChIOExportSection.html)而不是保存。有一个选项用于仅导出选定的数据包。

# android - Android Bitmap 大于 heapSize

> ID：10146393
> 
> 赞同：1
> 
> 时间：2012-04-13T18:32:55.327
> 
> 标签：android, bitmap, out-of-memory

我收到错误：`java.lang.OutOfMemoryError: bitmap size exceeds VM budget(Heap Size=12295KB, Allocated=3007KB, Bitmap Size=15621KB)`

位图大小大于我的 heapSize .. 那么如何使位图更小？这是它崩溃的代码：

```
private Bitmap getPicture(int position) {
    Bitmap bmpOriginal = BitmapFactory.decodeFile(mFileLocations.get(position));
    Bitmap bmResult = Bitmap.createBitmap(bmpOriginal.getWidth(), bmpOriginal.getHeight(), Bitmap.Config.RGB_565);
    Canvas tempCanvas = new Canvas(bmResult);
    tempCanvas.rotate(90, bmpOriginal.getWidth()/2, bmpOriginal.getHeight()/2);
    tempCanvas.drawBitmap(bmpOriginal, 0, 0, null);
    bmpOriginal.recycle();
} 
```

它在行崩溃：

```
 Bitmap bmResult = Bitmap.createBitmap(bmpOriginal.getWidth(), bmpOriginal.getHeight(), Bitmap.Config.RGB_565); 
```

和我的解码文件：

```
private Bitmap decodeFile(String f){
    try {
        //Decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(f),null,o);

        //The new size we want to scale to
        final int REQUIRED_SIZE=70;

        //Find the correct scale value. It should be the power of 2.
        int scale=1;
        while(o.outWidth/scale/2>=REQUIRED_SIZE && o.outHeight/scale/2>=REQUIRED_SIZE)
            scale*=2;

        //Decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize=scale;
        return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
    } catch (FileNotFoundException e) {
        Log.d(LOG_TAG, "Failed to decode file");
    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T18:39:42.797

将您的映像缩小到 VM 预算中...

```
BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeFile( filename, options );
        options.inJustDecodeBounds = false;
        options.inSampleSize = 4; 

        bitmap = BitmapFactory.decodeFile( filename, options );
        if ( bitmap != null ) {
            bitmap = Bitmap.createScaledBitmap( bitmap, width, height, false );
        } 
```

将样本大小更改为您想要的任何值，例如 2、4、6、8 等。

有关完整的详细信息，请参阅最近发布的 Android 开发人员网站上的此内容，它清楚地说明了您需要做什么才能达到 VM 预算[。](http://developer.android.com/training/displaying-bitmaps/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T18:42:24.993

两件事情：

看来您正在使用该`BitmapFactory.decodeFile`方法而不是您发布的方法。

此外，您要保留的唯一信息似乎`bmpOriginal`是它的尺寸。那么为什么`BitmapFactory.inJustDecodeBounds`不像你在你的`decodeFile`方法中那样使用。或者在创建新位图之前回收位图，同时保留其尺寸，如下所示：

```
int width = bmpOriginal.getWidth();
int height = bmpOriginal.getHeight();
bmpOriginal.recycle();
Bitmap bmResult = Bitmap.createBitmap(width, height, Bitmap.Config.RGB_565); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T18:38:13.610

最近在 AndroidDevelopers+ 中对此进行了介绍：

[https://plus.google.com/103125970510649691204/posts/1oSFSyv3pRj](https://plus.google.com/103125970510649691204/posts/1oSFSyv3pRj)

# grep - 是否可以通过 grep 找出 grep 完成查询所花费的时间？

> ID：10146397
> 
> 赞同：1
> 
> 时间：2012-04-13T18:33:14.293
> 
> 标签：grep

有时，我使用组 grep 进行可能需要几分钟的广泛搜索。grep 中是否有一个选项可以让我找出 grep 完成查询所需的时间？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T18:37:10.597

不是内置的，但您可以在大多数 Unix-ish 系统上`grep`用命令包装它。`time`

```
$ time grep 'test' *

... results ...
real    0m0.191s
user    0m0.002s
sys     0m0.009s 
```

`real`时间可能是您想要查看的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T18:36:43.937

不通过`grep`；Unix shell 提供了一个`time`内置的（也有一个外部版本，通常不太详细）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T18:36:49.613

与其尝试在内部做这件事，不如`grep`利用[时间](http://ss64.com/bash/time.html)。这就是它的确切目的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T18:37:22.113

不是我知道的，但是您可以使用其他命令（取决于平台）来执行此操作。例如，在 Unix 中你可以使用类似的东西`timex`，在 linux 中它会像`time -p`，在 Windows 中......嗯......不确定那个

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T18:37:36.650

看起来不像

```
grep --help 
```

使用以下命令创建别名或简单脚本：

> echo $(date +%s) : 开始/结束

# git - ssh-keygen' 未被识别为内部或外部命令

> ID：10146398
> 
> 赞同：59
> 
> 时间：2012-04-13T18:33:18.807
> 
> 标签：git, ssh, windows-xp, key

我正在尝试添加 ssh 密钥以在 github 上使用，但在我的 xp 上的命令提示符 ssh-keygen 不起作用。它给了我以下错误

```
ssh-keygen' is not recognized as an internal or external command. 
```

是否有在 xp 上生成密钥的替代方法？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-04-14T11:25:24.083

您正在运行[msysgit](http://code.google.com/p/msysgit/)还是其他形式的 Windows git 安装？msysgit 只是在 Windows 上运行 git 的一种可能方式，但它可能也是最简单的一种。这也是 git 网站[http://git-scm.org/](http://git-scm.org/)推荐的方式。

如果您使用*的是*msysgit，那么您需要在 Git Bash 中运行该命令，而不是在标准的 Windows 命令行提示符中。Git Bash 是由 msysgit 为您安装的提示符，基本上是为 Windows 打包的最常见的 Linux 命令行 shell (bash)，以方便 git 的命令行使用。msysgit 还应该将 ssh-keygen 程序安装在可以从 Git Bash 访问的位置，但不一定要从通常的 Windows 命令行提示符访问。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2013-11-22T14:14:16.883

**步骤 1**安装[Git](http://git-scm.com/download/win)。

**第 2步将****git**的路径添加到环境变量中，例如**C:\Program Files (x86)\Git\bin**。

**步骤 3**打开新的终端会话并尝试**ssh-keygen**。它会起作用的。

**注意**新的终端窗口是必须的！

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2016-10-07T18:22:11.903

如果您之前安装了 Git，请打开 git-bash 并尝试从那里执行命令。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-02-07T20:21:58.720

如果您已经安装了 git，请搜索您的 git 目录

使用 git bash 应该在你的 C:\Program Files\Git\bin 取决于你的安装位置

如果您已经添加了路径，只需在您的**cmd上运行****sh**或打开**sh.exe**

 ****键入**ssh-keygen**

然后只需插入名称和密码（您可以输入空字符串）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-12-15T13:19:45.467

适用于所有 Windows 操作系统

```
cd C:\Program Files (x86)\Git\bin
ssh-keygen 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-09-10T07:24:06.680

以管理员身份运行 git bash 对我有用！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-08-28T11:17:10.267

*   安装 msysgit
*   右键单击任何文件
*   从菜单中选择“**在此处选择 Git Bash ”**
*   从 git bash 终端运行**ssh-keygen命令**

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-13T18:34:49.307

ssh-keygen 是一个通常在 Linux 发行版上找到的实用程序。您可以在 Windows 上使用 Cygwin 来获得 Linux 命令行的大部分功能。

[http://www.cygwin.com/](http://www.cygwin.com/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-05-13T21:03:07.857

如果您在 Windows 上从 cmd 运行，请检查路径系统变量值必须在 C:\Program Files\Git\bin 内或在 cmd 类型上设置的 git 安装路径以查看变量****

# asp.net-mvc - 当视图模型进行所有输入验证时，为什么我仍然需要 asp.net mvc 中的业务模型？

> ID：10146405
> 
> 赞同：1
> 
> 时间：2012-04-13T18:33:40.993
> 
> 标签：asp.net-mvc, model, viewmodel, validation

这不是视图模型与模型的问题！

这可能是典型的 viewmodel 的属性：

```
 [Required]
    [StringLength(6, MinimumLength = 3)]
    [Remote("IsUID_Available", "Validation")]
    [RegularExpression(@"(\S)+", ErrorMessage = "White space is not allowed.")]
    [Editable(true)]
    public String UserName {get;set;} 
```

那么除了将数据传输到我的数据访问层之外，我还需要我的模型做什么？那么它不是商业模式。它是一个数据访问对象：[http ://en.wikipedia.org/wiki/Data_transfer_object](http://en.wikipedia.org/wiki/Data_transfer_object)

如果你不遵循 MVC 或 MVVM。将所有属性废话放在模型上似乎是完全有效的。

但是当我们做 UI 模式时，使用模型进行输入验证总是不好的。

那看起来...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T20:18:51.360

领域模型通常是防止无政府状态的最后一道防线。您可以在不同的应用程序和视图之间重用它。它代表了您最宝贵的资产：域数据。如果您不对域模型进行验证而仅依赖于视图模型，您可能会发现自己处于开发人员可以添加视图而根本不对视图模型执行任何验证的情况下，您将获得损坏的数据。当然，所有这些都依赖于一些更大的代码库，在这些代码库中，您可以重用大部分代码，并且有多个开发人员同时在系统的不同层上工作。

如果您只是构建一个小型应用程序，而您的域没有任何重用，那么您可以不对其进行验证。

因此，恕我直言，这实际上取决于许多因素，例如您正在构建的系统的性质、其特定的上下文和要求。

# c++ - LNK2019：未解析的外部符号，但我已对函数进行了编码

> ID：10146407
> 
> 赞同：2
> 
> 时间：2012-04-13T18:33:44.893
> 
> 标签：c++, lnk2019

有人可以帮我吗？我正在使用 Visual Studio 2010 我收到此消息，但我不知道如何解决此问题。

> 1> 生成代码...
> 
> 1>dct.obj : 错误 LNK2019: 无法解析的外部符号“public: __thiscall Amostras::Amostras(class std::basic_string,class std::allocator >)” (??0Amostras@@QAE@V?$basic_string@DU? $char_traits@D@std@@V?$allocator@D@2@@std@@@Z) 在函数_main中引用
> 
> 1>C:\Users\redneck\documents\visual studio 2010\Projects\dct\Debug\dct.exe : 致命错误 LNK1120: 1 unresolved externals

这是一些 *.cpp 文件：

```
class Amostras {
public:
    int original[10][257];
    int idct[10][257];
    float dct[10][257];
    int grupos;

Amostras::Amostras(void)
    {
    for (int i=0;i<10;i++)
    {
        this->original[i][0]=0; 
        this->dct[i][0]=0.0;
        this->idct[i][0]=0;
        }
        this->grupos=0;
    }

Amostras::Amostras(string arquivo)
{
    int n_samples=0,linha=0,coluna=0;
    int cont;
.. 
```

这是 *.h

```
class Amostras {
public:
    int original[10][257];
    int idct[10][257];
    float dct[10][257];
    int grupos;

    Amostras::Amostras();
    Amostras::Amostras(string arquivo);
    void Amostras::mostra(void);
}; 
```

主要的

```
int main(void)
{
    Amostras *amostra = new Amostras("in.txt");
    dct(amostra,0);
    show(amostra,0);
    amostra->mostra();
    return 0;
} 
```

希望它有帮助，我在这里没有选择:(

* * *

解决方案：

所以我所做的只是将类放在 *.h 中，然后将 *.h 包含在仅具有该类的方法和功能的类 *.cpp 中。有效！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:36:39.757

此链接器错误通常意味着您已经对函数进行了原型化，但忘记定义它。确保您已实现该功能

```
Amostras::Amostras(string arg); 
```

某处，当您链接包含该实现的目标文件的代码时。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T18:45:15.730

您忘记定义`Amostras::Amostras(string arg);` 在 *.h 文件中声明的尽管

```
Amostras::Amostras(string arg)
{
} 
```

将上述代码复制到您的 *.cpp 文件中

或者

您也可以通过注释 *.h 文件中的行来做到这一点。

```
//Amostras::Amostras(string arg); 
```

哇！你有 *.h 文件吗？如果您只在 *.cpp 中工作，那么请让我知道。

# c# - 在 StackPanel wpf 中包装内容

> ID：10146428
> 
> 赞同：19
> 
> 时间：2012-04-13T18:35:13.113
> 
> 标签：c#, wpf, wpf-controls

是否可以将内容包装在一个中`StackPanel`？

我知道我们可以使用 a`WrapPanel`来代替。但是出于修改代码的原因，我必须使用`StackPanel`.

那么，有没有办法`StackPanel`在说 5 件物品后将物品包装起来......谢谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2016-12-12T17:14:16.567

对我来说，一个简单的`WrapPanel`作品就好了：

```
<WrapPanel Orientation="Horizontal" Width="500" /> 
```

不在一个`StackPanel`或任何其他容器内。在某些情况下，将**Width**设置为常数值可能会更好，因为将其绑定到**ActualWidth**可以防止缩小尺寸*（例如，当父控件缩小尺寸时，WrapPanel 不会）*

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-13T18:37:09.753

`StackPanel`创建包含所需数量项目的嵌套s。

在下面的示例中，您有两行，分别由元素占据`<StackPanel Orientation="Horizontal">`，而每行又包含五个项目，这些项目将水平并排显示。

```
<StackPanel Orientation="Vertical">
    <StackPanel Orientation="Horizontal">
        <Item1 />
        <Item2 />
        <Item3 />
        <Item4 />
        <Item5 />
    </StackPanel>
    <StackPanel Orientation="Horizontal">
        <Item1 />
        <Item2 />
        <Item3 />
        <Item4 />
        <Item5 />
    </StackPanel>
</StackPanel> 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-13T22:30:32.363

```
<StackPanel>
        <StackPanel.Style>
            <Style TargetType="{x:Type StackPanel}">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type StackPanel}">
                            <WrapPanel/>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </StackPanel.Style>
    </StackPanel> 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-13T18:56:18.183

根据您的情况，您可以使用[UniformGrid](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.uniformgrid.aspx)。也可以在[此处](http://www.c-sharpcorner.com/uploadfile/raj1979/uniformgrid-in-wpf/)找到一些示例。

您可以将其定义为像这样在 5 个项目之后包装。

```
<UniformGrid Columns="5">
 <Button />
 <Button />
 <Button />
</UniformGrid> 
```

但是，每个项目将获得完全相同的宽度，因此不确定这是否适合您。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T19:34:23.843

我认为没有包装面板就无法做到这一点。也许您可以尝试在堆栈面板中放置一个 wrapPanel - 将其宽度设置为堆栈面板的实际宽度。你可以像这样绑定它`Width="{Binding ActualWidth, ElementName=StackPanel1}"`

但这只是一个技巧 - 我认为包装面板最适合您的需求。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-02T16:11:41.460

我在按钮上放了一个堆栈面板。它不会影响按钮背景。然后在我使用的 VB 代码中`Chr(12)`，表示换行：

```
Button1.Content = "first line" + Chr(12) + "second line" 
```

您可以使用添加更多行`Chr(12)`。

# eclipse - ADT 插件无法在 Eclipse、PowerPC、Ubuntu 上安装

> ID：10146431
> 
> 赞同：0
> 
> 时间：2012-04-13T18:35:16.733
> 
> 标签：eclipse, ubuntu, installation, adt, powerpc

我正在尝试在从 PowerPC Ubuntu 存储库获得的 Eclipse 3.5.2 中安装 ADT 插件。ADT 16.0.0 或更高版本需要 Eclipse 3.6 或更高版本，所以我尝试了 15.0.1 和 9.0.0。
ADT 15.0.1 安装完成 100%，我单击“立即应用”并收到一堆错误。从错误[日志](http://pastebin.com/wZwSETWN)：

```
Invalid preference page path: com.android.ide.eclipse.preferences.main
Problems occurred when invoking code from plug-in: "org.eclipse.ui.intro".
Undefined context while filtering dialog/window contexts
Unable to access file "plugins/org.eclipse.emf.ecore_2.5.0.v200906151043.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.wst.common.environment_1.0.301.v200908101600.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.wst.xml.ui_1.1.2.v201001222130.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.emf.ecore.edit_2.5.0.v200906151043.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.equinox.concurrent_1.0.1.R35x_v20100209.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.wst.common.project.facet.core_1.4.1.v200911141735.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.apache.xml.resolver_1.2.0.v200902170519.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.jem.util_2.0.201.v201001252130.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.emf.common_2.5.0.v200906151043.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.wst.sse.ui_1.1.102.v200910200227.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.wst.common.uriresolver_1.1.301.v200805140415.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.emf.edit_2.5.0.v200906151043.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.wst.common.emfworkbench.integration_1.1.301.v200908101600.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.apache.xerces_2.9.0.v200909240008.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.wst.common.emf_1.1.301.v200908181930.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/javax.xml_1.3.4.v200902170245.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.emf.ecore.change_2.5.0.v200906151043.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.wst.xml.core_1.1.402.v201001222130.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.wst.common.frameworks_1.1.300.v200904160730.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.emf.ecore.xmi_2.5.0.v200906151043.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.apache.xml.serializer_2.7.1.v200902170519.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.wst.common.ui_1.1.402.v200901262305.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.wst.validation_1.2.104.v200911120201.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.wst.sse.core_1.1.402.v201001251516.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.wst.common.core_1.1.201.v200806010600.jar!META-INF/MANIFEST.MF".
Invalid preference page path: DDMS
Invalid preference page path: LogCat 
```

ADT 9.0.0 安装过程相同。从错误[日志](http://pastebin.com/32TMwWZK)：

```
Invalid preference page path: com.android.ide.eclipse.preferences.main
Undefined context while filtering dialog/window contexts
Unable to access file "plugins/org.eclipse.emf.ecore_2.5.0.v200906151043.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.wst.common.environment_1.0.301.v200908101600.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.wst.xml.ui_1.1.2.v201001222130.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.emf.ecore.edit_2.5.0.v200906151043.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.equinox.concurrent_1.0.1.R35x_v20100209.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.wst.common.project.facet.core_1.4.1.v200911141735.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.apache.xml.resolver_1.2.0.v200902170519.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.jem.util_2.0.201.v201001252130.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.emf.common_2.5.0.v200906151043.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.wst.sse.ui_1.1.102.v200910200227.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.wst.common.uriresolver_1.1.301.v200805140415.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.emf.edit_2.5.0.v200906151043.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.wst.common.emfworkbench.integration_1.1.301.v200908101600.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.apache.xerces_2.9.0.v200909240008.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.wst.common.emf_1.1.301.v200908181930.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/javax.xml_1.3.4.v200902170245.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.emf.ecore.change_2.5.0.v200906151043.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.gef_3.5.1.v20090910-2020.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.wst.xml.core_1.1.402.v201001222130.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.wst.common.frameworks_1.1.300.v200904160730.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.emf.ecore.xmi_2.5.0.v200906151043.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.apache.xml.serializer_2.7.1.v200902170519.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.wst.common.ui_1.1.402.v200901262305.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.wst.validation_1.2.104.v200911120201.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.wst.sse.core_1.1.402.v201001251516.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.wst.common.core_1.1.201.v200806010600.jar!META-INF/MANIFEST.MF".
Unable to access file "plugins/org.eclipse.draw2d_3.5.2.v20091126-1908.jar!META-INF/MANIFEST.MF".
Invalid preference page path: DDMS
Invalid preference page path: LogCat 
```

Android 选项卡未出现在“窗口”>“首选项”中。
此外，两次安装都需要 2 个小时。
那么，是否可以在 PowerPC Ubuntu 上安装 ADT 插件到 Eclipse 上？有什么方法可以在我的系统上安装 Eclipse 3.6 或 3.7？我的电脑是 PowerPC G4、Emac (ATI Graphics)、Ubuntu 10.04。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:23:16.413

首先，永远不要从 Linux 包管理器或存储库安装 Eclipse；总是从 www.eclipse.org 下载

PowerPC linux 版本仅适用于 Eclipse SDK，不适用于 Eclipse 下载主页面上列出的软件包。这是最新版本 Eclipse (3.7.2/Indigo) 的链接：http: [//download.eclipse.org/eclipse/downloads/drops/R-3.7.2-201202080800/index.php](http://download.eclipse.org/eclipse/downloads/drops/R-3.7.2-201202080800/index.php)

要确保的另一件事是您拥有 Oracle JDK 并已配置 Eclipse 以使用它，如此[处](http://wiki.eclipse.org/Eclipse.ini)所述。大多数 Linux 发行版在系统路径上都有 gcj，它不能与 Eclipse 配合使用。

从那里您应该能够按照[说明](http://developer.android.com/sdk/eclipse-adt.html#downloading)安装 ADT 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T04:06:39.600

我会在这里抛出以防有人遇到我的问题

Mint 32 位，已应用所有更新和升级

sudo apt-get 更新

sudo apt-get 升级）

Eclipsed Indigo Classic - sudo apt-get eclipse

java - sudo apt-get install sun-java6-jdk

尝试安装 Android Eclipse Plugin r18 不断失败，同时出现 org.eclipse.wst.sse.core 缺失错误，该错误似乎很常见而且是随机的。请注意，使用 64 位 mint/eclipse 等不会发生这种情况。请看图。并且从不在窗户上。

这是我在尝试了在 Stack 上找到的许多不同模式并尝试在虚拟盒子上使用 snap 以找到适合我的配方后所做的事情。

1.  Fresh eclipse classic indigo install 3.7.0 (sudo apt-get eclipse) 如上所述
2.  从命令启动 eclipse (sudo eclipse)
3.  在 Help/Install New Software 部分添加存储库[http://download.eclipse.org/releases/indigo](http://download.eclipse.org/releases/indigo)
4.  从步骤 3 的选项列表中安装 Linux 工具
5.  [重新启动后，尝试从http://dl-ssl.google.com/android/eclipse/](http://dl-ssl.google.com/android/eclipse/)存储库再次安装 android 工具（成功！！！）
6.  重启后关闭 eclipse（不要让它安装 sdk 等）
7.  正常启动 Eclipse 并让工具为您安装 SDK，或者如果在重启后没有立即执行此操作，请单击“窗口”菜单以安装基本 sdk 包
8.  转到窗口菜单下的 Android SDK 管理器并下载您需要的任何其他 api 等

这对我有用，许多类似的事情没有，不知道在哪里有什么区别等等。还请注意我使用 64 位薄荷糖有零问题（考虑到亚行在 64 位上的问题，这有点反直觉）

不是答案，但肯定是我遇到相同问题的人的答案（希望如此）

# libjpeg - 高性能 jpeglib-turbo 实现能否在 <100 毫秒内解压缩/压缩？

> ID：10146434
> 
> 赞同：4
> 
> 时间：2012-04-13T18:35:29.677
> 
> 标签：libjpeg, libjpeg-turbo

我目前正在使用[jpeglib-turbo](http://libjpeg-turbo.virtualgl.org/)库在 C++ 中实现 jpeg resizer。

使用该库进行 JPEG 解压缩和重新压缩的目标是 100 毫秒。使用推荐的优化设置（记录在 jpeglib-turbo usage.txt 中）我能想到的最好的设置大约是 320 毫秒，所以我想知道 100 毫秒是否可能/现实？这会将 3000x4000 像素的图像从大约 6Mb 的大小解压缩/重新压缩到 130Kb。

我用于快速解压的代码是：

```
 dinfo.dct_method = JDCT_IFAST;
    dinfo.do_fancy_upsampling = FALSE;
    dinfo.two_pass_quantize = FALSE;
    dinfo.dither_mode = JDITHER_ORDERED;
    dinfo.scale_num = 1/8; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T09:28:28.500

感谢您的回答。

实际上可以在 100ms 左右解压和重新压缩。在联系了 libjpeg-turbo 的作者后，他告诉我我使用的 dinfo.scale_num 属性是错误的。此属性是比例**分子**- 我还需要设置**scale_denom**（分母）属性。

所以好的代码是：

```
 dinfo.dct_method = JDCT_IFAST;
 dinfo.do_fancy_upsampling = FALSE;
 dinfo.two_pass_quantize = FALSE;
 dinfo.dither_mode = JDITHER_ORDERED;
 dinfo.scale_num = 1;
 dinfo.scale_denom = 8; 
```

我希望代码如此之快，因为图像缩放对于用户来说应该是难以察觉的，因为它位于速度/用户体验是最重要的客户端应用程序中。

# wpf - 为什么我的绑定在 ObservableCollection 上不起作用

> ID：10146439
> 
> 赞同：0
> 
> 时间：2012-04-13T18:35:52.407
> 
> 标签：wpf, binding, observablecollection

您好我正在尝试将 ItemsSource 绑定到 ObservableCollection。如果 ObservableCollection 是公开的，那么 IntelliSense 事件似乎看不到 ObservableCollection。

我是否在 XAML 中声明了某些内容以使其可见？就像在`Window.Ressources`.

我的 XAML 代码

```
<Window x:Class="ItemsContainer.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">

    <StackPanel Orientation="Horizontal">
        <ListBox ItemsSource="{Binding StringList}" />
    </StackPanel> </Window> 
```

我的 C# 代码

```
using System.Collections.ObjectModel;
using System.Windows;

namespace ItemsContainer
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {

        private ObservableCollection<string> stringList = new ObservableCollection<string>();

        public ObservableCollection<string> StringList
        {
            get
            {
                return this.stringList;
            }
            set
            {
                this.stringList = value;
            }
        }

        public MainWindow()
        {
            InitializeComponent();
            this.stringList.Add("One");
            this.stringList.Add("Two");
            this.stringList.Add("Three");
            this.stringList.Add("Four");
            this.stringList.Add("Five");
            this.stringList.Add("Six");
        }
    }
} 
```

据我所知，绑定应该绑定到当前 DataContext 的属性 StringList，即 MainWindow。

感谢您的任何指示。

编辑：

这在 XAML 中对我有用

```
<Window x:Class="ItemsContainer.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">

    <StackPanel Orientation="Horizontal">
        <ListBox ItemsSource="{Binding RelativeSource={RelativeSource AncestorType=Window},Path=StringList}" />
    </StackPanel>
</Window> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T18:42:14.497

`DataContext`不默认为，`MainWindow`您必须明确设置它。像这样：

```
public MainWindow() {
    InitializeComponent();
    this.stringList.Add("One");
    this.stringList.Add("Two");
    this.stringList.Add("Three");
    this.stringList.Add("Four");
    this.stringList.Add("Five");
    this.stringList.Add("Six");
    this.DataContext = this;
} 
```

# silverlight - 与 Silverlight 媒体播放器的跨方案通信

> ID：10146440
> 
> 赞同：2
> 
> 时间：2012-04-13T18:36:04.253
> 
> 标签：silverlight, http, ssl, https

我们正在使用 Sliverlight 播放器在 .Net 网站上播放视频。该播放器可在 Codeplex 上获得，网址为[http://slvideoplayer.codeplex.com/releases/view/21749](http://slvideoplayer.codeplex.com/releases/view/21749)。此播放器播放来自通过 http 提供的另一个网站的视频（例如：[http://ThirdpartyWesbite.com/video1.wmv]）。我们目前正在我们的网站上实施 SSL，并使用 SSL 配置我们的开发环境，结果发现 Silverlight 视频播放器无法再播放视频。一些研究似乎表明 Silverlight 不允许跨方案 (https -> http) 通信。更具体地说，MSDN 上的信息[http://msdn.microsoft.com/en-us/library/bb820909.aspx](http://msdn.microsoft.com/en-us/library/bb820909.aspx)似乎表明 Silverlight 几乎禁止跨方案通信。

如果第三方网站通过 https 提供文件，那么我的问题可能会消失。不幸的是，我不能让他们在他们的网站上实施 SSL。我只是想知道社区中是否有人面临类似情况并能够找到任何解决方法。任何帮助是极大的赞赏。

# c++ - 为什么我的窗口在自己处理 WM_KEYDOWN 时没有得到 WM_SIZE 命令？

> ID：10146442
> 
> 赞同：0
> 
> 时间：2012-04-13T18:36:12.410
> 
> 标签：c++, windows, winapi, visual-c++

如果我使用此方法（或 WM_KEYUP`return 0`最终相同），我将无法获得 WM_SIZE 命令：

```
case WM_KEYDOWN: {
    keys[wParam] = 1;
    return 0;
} 
```

但是当我使用它时它给了我 WM_SIZE 命令：

```
case WM_KEYDOWN: {
    keys[wParam] = 1;
    break;
} 
```

有人可以解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T20:14:40.083

在没有看到整个代码的情况下，我的猜测是该`return`语句阻止`WM_KEYDOWN`消息被传递给默认消息处理程序，例如`DefWindowProc()`，因此窗口实际上并没有处理击键并采取它需要生成的任何操作`WM_KEYUP`和`WM_SIZE`消息。

# android - android:state_activated 用于水平滚动视图中的文本视图

> ID：10146443
> 
> 赞同：0
> 
> 时间：2012-04-13T18:36:22.233
> 
> 标签：android, xml, textview, horizontalscrollview

我有一个包含许多动态添加的文本视图的水平滚动视图。当我按下一个文本视图时，我希望它的背景保持蓝色，直到我点击另一个文本视图。在列表视图中，您会使用`android:state_activated`，但 Android 不会让我将其用于文本视图。我也尝试在 onclicklistener 中设置背景，但也没有用。

我怎么能这样做？

活动

```
public class HorizontaltextscrollerActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        LinearLayout menu = (LinearLayout) findViewById(R.id.menu);

        for (int i = 0; i < 20; i++) {
            TextView t = (TextView) getLayoutInflater().inflate(R.layout.text, null);
            t.setId(i);
            t.setText("item" + i);
            t.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    Toast.makeText(getApplicationContext(), "hi " + v.getId(), Toast.LENGTH_SHORT).show();
                    v.setBackgroundColor(R.color.background_selected);
                }
            });

            menu.addView(t);
        }

    }
} 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#000000" >

    <LinearLayout
        android:id="@+id/menu"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"

        android:orientation="horizontal" >
    </LinearLayout>

</HorizontalScrollView>

<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/text_selector"
    android:textSize="24sp"
    android:padding="30dp"
    android:clickable="true" >

</TextView> 
```

text_selector.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@color/selected" android:state_pressed="true"/>

</selector> 
```

**编辑1**

```
public class HorizontaltextscrollerActivity extends Activity {
    TextView[] t = new TextView[20];

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        LinearLayout menu = (LinearLayout) findViewById(R.id.menu);

        for (int i = 0; i < 20; i++) {
            t[i] = (TextView) getLayoutInflater().inflate(R.layout.text, null);

            t[i].setId(i);
            t[i].setText("item" + i);
            t[i].setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    Toast.makeText(getApplicationContext(), "hi " + v.getId(), Toast.LENGTH_SHORT).show();
                    t[v.getId()].setBackgroundColor(R.color.background_selected);
                }
            });

            menu.addView(t[i]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T18:56:17.393

创建一个TextViews数组...

```
 TextView[] t=new TextView[20]; 
```

而不是这个..

```
 TextView t = (TextView) getLayoutInflater().inflate(R.layout.text, null); 
```

采用

```
 t[i] = (TextView) getLayoutInflater().inflate(R.layout.text, null);
  t[i].setId(i);
 //similarly..
  t[i].setOnClickListener(new OnClickListener() {
     for(int m=0;m<20;m++){
   if(m!=i){
    t[m].setBackgroundColor(R.color.putdefaultcolor here)
    }

     }
    t[i].setBackgroundColor(R.color.background_selected);

 ..... 
```

我想那它会工作得很好..

# php - 来自 php/mysql 的有效 json 文件

> ID：10146449
> 
> 赞同：0
> 
> 时间：2012-04-13T18:37:00.133
> 
> 标签：php, json

我在网上花了很多时间从 php /mysql 学习 google api v3 但没办法。所以我再次开始要求验证所有过程 首先我的 json 文件看起来像这样

```
{"lat":"46.8529510","lng":"0.5433920","ec_nom":"ANTRAN","ec_type":"ECOLE ELEM","ec_adresse":"PLACE DE L EGLISE","ec_ville":"ANTRAN","ec_cp":"86100"} 
```

所有的 json 文件，我见过的看起来像

```
**name[**{"lat":"46.8529510","lng":"0.5433920","ec_nom":"ANTRAN","ec_type":"ECOLE ELEM","ec_adresse":"PLACE DE L EGLISE","ec_ville":"ANTRAN","ec_cp":"86100"}**]** 
```

我的代码

```
 $cherch_coordon=mysql_query("SELECT lat, lng,      ec_nom,ec_type,ec_adresse,ec_ville,ec_cp from mouv_0910 WHERE type_nomin='TD' AND oui_mouvement>0  ORDER BY ec_ville ");
$combien=mysql_num_rows($cherch_coordon) ;

  while ($trouv=mysql_fetch_object($cherch_coordon))
        {

          $en_jason=json_encode($trouv) ;
       //$erreur_json=last_error($en_jason);
         echo"$en_jason" ; 
```

那么我的 json 文件有效吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:41:04.920

`json_encode` *总是*打印有效的 JSON。

`{}`用于对象，`[]`用于数组。

附言

```
name[{"lat":"46.8529510","lng":"0.5433920","ec_nom":"ANTRAN","ec_type":"ECOLE ELEM","ec_adresse":"PLACE DE L EGLISE","ec_ville":"ANTRAN","ec_cp":"86100"}] 
```

不是有效的 JSON，或为此*而无效。*

你的意思是这个（注意`()`代替`[]`）？

```
name({"lat":"46.8529510","lng":"0.5433920","ec_nom":"ANTRAN","ec_type":"ECOLE ELEM","ec_adresse":"PLACE DE L EGLISE","ec_ville":"ANTRAN","ec_cp":"86100"}) 
```

这是 JSONP，不是 JSON。

# asp.net - 使用 MySQL 的 ASP.NET

> ID：10146450
> 
> 赞同：0
> 
> 时间：2012-04-13T18:37:00.253
> 
> 标签：asp.net, mysql, sqldatasource

好的，我这几天一直在尝试编写一个相当简单的应用程序！我的背景：我已经做了 30 年的程序员，但谈到 ASP.NET，我所拥有的只是我多年前上的一门课，尽管这对我来说很容易而且我在班上名列前茅，但我已经忘记了很多。

然而，我 80% 的问题都来自使用 MySQL。似乎 MS 只是不太喜欢使用非 MS 数据库。

每次我遇到一个新问题，我都需要几个小时才能找到解决方案。存在 SQLDataSource 将方括号括在所有表和字段名称周围的问题（就像 MSSQL 喜欢的那样）。我解决了。还有一个问题是它放一个？在构建更新和插入查询时，而不是 @param-name。我在这里找到的唯一解决方案是进入代码并手动更正查询。我仍然无法让参数查询工作。每次我转身，都有一个新问题似乎指向我使用 MySQL。我不再相信我在隧道尽头看到的光。

现在，使用我并不熟悉的 RAD 环境，我完全预计这个项目会花费我更长的时间。实际上我预算的时间是原来的两倍。但是我本可以在 VB6 中在 1-2 天内完成的东西，到目前为止，我在 ASP.NET 中花了 2 周时间。我远远落后于计划。

所以，我的问题是：

1.  我应该放弃使用 MySQL 并将我的数据库转换为 MSSQL 吗？

2.  是否有对 MySQL 更友好的 3rd 方数据源控件？我用谷歌搜索了这个，但找不到任何东西。我什至查看了 Telerik 的 Radcontrols，他们告诉我，我所要做的就是将他们的控件连接到内置的 MS SQLDataSource，完全忽略了我的问题所在。

# c++ - C++ 使用 wstring/wchar_t

> ID：10146459
> 
> 赞同：1
> 
> 时间：2012-04-13T18:37:26.997
> 
> 标签：c++, string, wchar-t, wstring

很多时候，每当我与人交谈时，他们都会让我从使用（在 DLL 项目中）wstring 和字符串中重生，因为它们比 wchar_t 数组消耗更多的内存。怎么样？相同`L"qweqweqweqweqwe"`的 wchar_t 数组是否需要比 wstring 更多的内存或不明显？`new wchar_t temp`现在，当我必须在 Ansi 和 Unicode（很多和`delete`）之间转换时，我有点困惑

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T19:41:44.283

“许多新的 wchar_t 临时和删除”

这通常是一个非常糟糕的主意。正如 Stroustrup 所说，您通常应该依靠对象为您进行内存管理（查找 RAII）。*仅在确实*有必要并且仅在您的实现中深入使用时才使用原始指针。更喜欢 STL，更喜欢智能指针，使用 boost、write new 和 delete，只有当你真的需要并且关心异常安全时。否则，您将花费大部分时间调试代码。

答案是：除非您有充分的理由，否则请使用字符串类。内存使用的差异通常是微不足道的。只有在探查器告诉您时才进行优化。“过早的优化是万恶之源” (Don Knuth)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T18:40:15.777

在典型用法中，您不会看到`string`/`wstring`和字符数组的内存使用量有显着差异。另一方面，如果您使用字符数组，您的代码很可能充满错误和泄漏，您将花费所有时间来处理这些问题。

它被整个 C++ 社区所接受，这`std::string`是处理字符串的方式。任何想要使用字符数组的特立独行者都应该被迫用基准来证明他们的观点。怪胎们有责任证明他们的观点。

# javascript - 将 "oscif" 设置为 false，或在 FB.ui 调用中省略 dev_purchase_params:{"oscif":true} 仍以当地货币显示价格

> ID：10146460
> 
> 赞同：2
> 
> 时间：2012-04-13T18:37:27.700
> 
> 标签：javascript, facebook, facebook-javascript-sdk, facebook-credits

根据文档： [https ://developers.facebook.com/docs/reference/dialogs/pay/](https://developers.facebook.com/docs/reference/dialogs/pay/)

> dev_purchase_params - 配置支付对话框是否以当地货币（例如美元）显示价格。如果使用 JavaScript SDK 提供 {'oscif': true}，则支付对话框以当地货币显示价格。

无论我对 oscif 做什么，将其设置为 false 还是完全忽略它，我仍然在 Facebook 支付对话框中得到这个：

> 价格：0.10 美元（1 个学分）

而不是这个：

> 价格：1 个积分（0.10 美元）

还有其他我不知道的事情吗？*似乎*是一个错误，但我知道永远不要假设这一点。

我很感激这方面的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:48:02.237

我想你已经错过了 fb 将取消 fb 信用的事情，它只会是当地货币。 [http://developers.facebook.com/docs/payments/local_currency_faq/](http://developers.facebook.com/docs/payments/local_currency_faq/)

# php - 在 PHP 中的 'mysql_fetch_row' 中通过 'foreach' 更改 'while'

> ID：10146471
> 
> 赞同：1
> 
> 时间：2012-04-13T18:38:08.727
> 
> 标签：php, mysql, foreach, while-loop

是否可以在PHP`while`中更改？`foreach``mysql_fetch_row`

例如

```
$result = mysql_query("SELECT * FROM test");

while ($row = mysql_fetch_row($result)) {
    print_r($row);
} 
```

这将从查询中获取所有记录（行）`SELECT * FROM test`。

但是，如果使用 foreach

```
foreach (mysql_fetch_row($result) as $row) {
    print_r($row);
} 
```

这将只从查询中获取第一条记录（行）`SELECT * FROM test`。

`foreach`使用 with 时是否可以通过循环获取所有记录`mysql_fetch_row`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T18:40:59.020

您只能在以下情况下使用`foreach`：

*   您创建一个实现[`ArrayAccess`](http://php.net/manual/en/class.arrayaccess.php)or的类[`Iterator`](http://php.net/manual/en/class.iterator.php)，或
*   您在一个数组中获得整个结果集，并将该数组与`foreach`.

您*可以*使用`for`循环，但代码可读性较差：

```
for ($row = mysql_fetch_row($result); $row !== false; $row = mysql_fetch_row($result)) {
    print_r($row);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T18:42:30.927

不，因为`foreach`需要一个数组。在这里，[`mysql_fetch_row()`](http://php.net/mysql_fetch_row)一次只返回一行。

# javascript - 异步谷歌广告与同步

> ID：10146478
> 
> 赞同：11
> 
> 时间：2012-04-13T18:38:33.217
> 
> 标签：javascript, asynchronous, ads, synchronous, google-dfp

我正在使用谷歌 DFP。

如果我使用来自谷歌的同步广告，我的网站加载速度很慢，因为它需要在加载网站的同时加载广告，如果广告需要很长时间才能响应，那么页面的加载就会暂停。

如果我使用异步广告，这不是问题，因为无论是否加载广告，页面都会加载。换句话说，它使网站加载速度更快。问题是，无论是否显示广告，使用异步广告都会创建一个具有固定宽度和高度的 div。所以通常这会在我的网站上创建很多空白空间，因为并非所有广告位置都被使用。同步广告也是如此。

Google 提供了第三种选择，它不创建 div，它只是使用 javascript 来显示广告，如果该空间中没有发布任何广告，那么它就不会显示任何空白空间，这很好，但是它的行为是同步的......

我想要的是一些使用异步广告的方法，并且在没有广告发布的情况下不会出现空格。

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-24T20:06:37.683

我想你要找的是

```
googletag.pubads().collapseEmptyDivs(); 
```

当没有广告可显示时，这将隐藏空的 div。在此行之前调用它：

```
googletag.enableServices(); 
```

此处提供更多文档以供参考： http: [//support.google.com/dfp_premium/bin/answer.py ?hl=en&answer=1650154](http://support.google.com/dfp_premium/bin/answer.py?hl=en&answer=1650154)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T09:58:34.160

试试这个：

```
<div id='div-gpt-ad-YOURDFPIDGOESHERE-1' style='width:auto; height:auto; margin:0px auto; text-align:center;'> 
```

这应该拉伸或缩小 div 以匹配广告素材尺寸（甚至将较小的广告放在较大的广告位中）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-29T18:49:28.793

> 在包含的 div 中添加`display: none;`as inline 样式。

该`collapseEmptyDivs`方法将内联样式添加`display: none;`到父容器 div。为了防止多余空白的闪烁，我首先尝试`display: none;`在我的样式表中添加一个 css 样式，但是当广告成功加载到目标广告单元空间时，该样式没有被删除。移动显示：无；inline 似乎解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T18:49:47.800

好吧..你可以尝试一个解决方法..我不太确定。但你可以试一试..

您有一个 DIV，您的广告将在其中异步加载，因此您可以在其中添加一个元素、任何虚拟项目并附加事件侦听器，以了解何时将其替换为您的广告。

您可以收听删除节点时触发的**DOMNodeRemoved**事件，然后您可以相应地调整 div 的大小......让我知道它是否有效或有任何进展。

# php - 检查数组键是否存在

> ID：10146488
> 
> 赞同：0
> 
> 时间：2012-04-13T18:39:19.383
> 
> 标签：php, html, arrays

我有以下代码循环遍历数组并构建我的 html 结构：

```
<?php foreach ($view->result as $id => $row): ?>
    <?php 
        $data = $row->field_field_slider_image;
        if (!count($data)) {
            continue;
        }
        //dpm($row);
        // add captions to an empty array
        if (isset($row->field_data_field_slider_image_field_slider_image_title)) {
            $captions["caption-fid-" . $row->field_data_field_slider_image_field_slider_image_fid] = '<div class="header"><h3>' 
            .   l($row->node_title, $row->field_field_slider_link[0]['raw']['url']) . '</h3></div><div class="body">'  
            .   drupal_render($row->field_body)
            . '</div>'
            . l(t('read more'), $row->field_field_slider_link[0]['raw']['url'], array('attributes' => array('class' => array('button_link'))));
        }

        $file = $data[0]['rendered'];
        // assign iamge style
        $style = isset($file['#image_style']) && !empty($file['#image_style']) ? $file['#image_style'] :
        variable_get('glossy_style_ff_slideshow', 'front_featured_slideshow_image');
    ?>
  <a href="<?php print url($row->field_field_slider_link[0]['raw']['url']); ?>"><img src="<?php print image_style_url($style, $file['#item']['uri']); ?>" alt="<?php print $row->field_data_field_slider_image_field_slider_image_alt; ?>" title="#caption-fid-<?php print $row->field_data_field_slider_image_field_slider_image_fid; ?>"/></a>

<?php endforeach;?> 
```

问题是链接：`$row->field_field_slider_link[0]['raw']['url']`不是必需的字段，因此并不总是存在。

如何首先检查该值是否已设置并打印替代行/如果没有则省略？

例如，如果没有链接值：

```
.   l($row->node_title, $row->field_field_slider_link[0]['raw']['url']) . '</h3></div><div class="body">' 
```

将会：

```
.   print $row->node_title . '</h3></div><div class="body">' 
```

和：

```
. l(t('read more'), $row->field_field_slider_link[0]['raw']['url'], array('attributes' => array('class' => array('button_link')))); 
```

根本不会打印。

和：

```
<a href="<?php print url($row->field_field_slider_link[0]['raw']['url']); ?>"><img src="<?php print image_style_url($style, $file['#item']['uri']); ?>" alt="<?php print $row->field_data_field_slider_image_field_slider_image_alt; ?>" title="#caption-fid-<?php print $row->field_data_field_slider_image_field_slider_image_fid; ?>"/></a> 
```

将会：

```
<img src="<?php print image_style_url($style, $file['#item']['uri']); ?>" alt="<?php print $row->field_data_field_slider_image_field_slider_image_alt; ?>" title="#caption-fid-<?php print $row->field_data_field_slider_image_field_slider_image_fid; ?>"/> 
```

任何帮助将不胜感激。

谢谢

# tridion - 从 Eclipse 运行自定义部署程序

> ID：10146490
> 
> 赞同：7
> 
> 时间：2012-04-13T18:39:26.373
> 
> 标签：tridion

我已经阅读了[Jaime 的部署器教程](http://www.sdltridionworld.com/articles/sdltridion2011/tutorials/Deployer_Extensions_With_Eclipse_1.aspx)。

我已经成功创建了我的部署程序扩展，当它与 SDL Tridion 集成时，该功能可以完全按照要求工作。

但是，我无法开始工作的是本地调试/在 eclipse 中使用部署程序运行（[在此处](http://www.sdltridionworld.com/articles/sdltridion2011/tutorials/Deployer_Extensions_With_Eclipse_7.aspx)记录）

基于 Eclipse 的部署程序确实运行。如果我将 zip 文件放入我的测试传入文件夹中，则会提取并处理 zip。但是，我编写的 customdeployer 代码从未输入或执行过。

我在“eclipse”部署程序日志中没有收到任何错误，但它总是在以下行停止：

> 2012-04-13 20:24:51,642 调试 QueueLocationHandler - 删除部署包上的排他锁：tcm:0-1026-66560，类型：内容。

由于我们这里有三位开发人员在他们所有的机器上也遇到了同样的问题，我想知道（希望！）这是一个常见问题，有人知道我们做错了什么。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:52:19.110

你能检查它`cd_deployer_conf.xml`是由 Deployer 加载的吗？只需检查 Deployer 启动日志（在调试模式下）。

我怀疑您在调试/运行时的 Eclipse 项目没有`cd_*_config.xml`从`config`Eclipse 的文件夹中加载文件。`cd_deployer_conf.xml`这将阻止加载和调用您的部署程序模块（我假设您在 中配置）。

我通常做的是将此`config`文件夹声明为 Eclipse *Source Folder*。然后在调试/运行时，Eclipse 将自动包含在类路径中。这使得来自[http://www.sdltridionworld.com/articles/sdltridion2011/tutorials/Deployer_Extensions_With_Eclipse_3.aspx](http://www.sdltridionworld.com/articles/sdltridion2011/tutorials/Deployer_Extensions_With_Eclipse_3.aspx)的第 8 点变得多余。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:12:41.607

我遇到了这个问题，最初它的工作方式略有不同，但后来它停止工作。结果发现部署包在此过程中以某种方式损坏（锁定？），因为当我尝试备份前一天的部署包时，它工作得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T18:21:07.893

在遵循相同的部署程序扩展教程后，我遇到了完全相同的问题。

我设法通过将我的模块所在的包的名称更改为 com.tridion.deployer.extensions 来解决它

以前我的模块位于我命名为 com.yourcompany.tridion.deployer.extensions 的包中，这似乎会阻止部署程序加载我的扩展模块。

# python - 带有模板包含标签的 TemplateSyntaxError 和 SyntaxErrors

> ID：10146493
> 
> 赞同：0
> 
> 时间：2012-04-13T18:39:41.193
> 
> 标签：python, django, include, django-views

这是我以前的帖子。[模板包括和 django 视图/网址。他们如何（做/应该）工作？](https://stackoverflow.com/questions/10130676/template-includes-and-django-views-urls-how-do-should-they-work/10130996#10130996).

再次，迷你盒子工作正常。我已经接受了给出的建议并尝试使用它。

所以我有一个`profile(request, profile_type, username)`看法。我正在尝试从中获取“profile_intros”上下文并将其放入包含的 mini_profile.html 模板中。

我试过制作一个包含标签（因为我将在整个网站的其他地方需要它）：

```
@register.inclusion_tag('includes/profile_info.html', takes_context=True)(profile_info)
     def profile_info(context):
         profile_intros = FundRecommendation.objects.filter(investor=profile).count()
         return{
             'profile_intros' : context['profile_intros'],
         } 
```

并`{% profile_info %}`放入包含的 mini_profile.html 模板中。我已经按照 django doc 示例进行操作，但我真的不知道我做错了什么。

我越来越 ：

```
Exception Type:     TemplateSyntaxError
Exception Value:    Invalid block tag: 'profile_info' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T19:03:55.250

你忘了使用`{% load ... %}`加载模板标签库。

# jquery - VB ASP.Net jQuery：动态更改行跨度

> ID：10146495
> 
> 赞同：0
> 
> 时间：2012-04-13T18:39:45.187
> 
> 标签：jquery, asp.net, vb.net, html-table

我有一个 jQuery 函数，可以在单击 CheckBox 时删除一行。但是，我还需要调整 rowspan 属性，因为现在表中的行更少了。我怎样才能在 jQuery 中做到这一点？提前致谢！

```
<head runat="server">
    <script src="../../Scripts/jquery-1.6.1.min.js" type="text/javascript"></script>
    <script language="javascript"  type="text/javascript">
        $(document).ready(function () {
            $('#chkDebtProtect').click(
                function () {
                    alert("hello world");
                    $('.HideMe').hide();
                });
        });
    </script>
</head>
<body>
<form>
<table>
        <tr  class="tableDataBorder">
            <td rowspan="3" class="leftBorder">
            </td>
            <td rowspan="3" class = "leftMargin">
            </td>
            <td colspan="2" class="TableHeader">
                Online Products
            </td>
        </tr>
           <tr>
                <td colspan="2" class="tableDataBorder">
                    <asp:CheckBox ID="chkProduct" CssClass="boldIt" style="font-size:.8em; font-style: italic" Text="Are you interented in learning about our product?" runat="server" />
                </td>
            </tr>
                <td>
                    Product <br />
                   Info
                </td>
                <td>
                    $&nbsp;<asp:TextBox ID="txtProductPrice" BorderColor="Silver" Width="80" runat="server" BorderWidth="1px" BorderStyle="Inset"></asp:TextBox>.00<br />
                </td>
            </tr>      
</table>
</form>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:45:59.423

你有没有尝试过

```
$("td.leftBorder").attr("rowspan","2"); 
```

# javascript - 动画拉绳

> ID：10146498
> 
> 赞同：1
> 
> 时间：2012-04-13T18:39:52.953
> 
> 标签：javascript, jquery, html, animation, jquery-animate

[我正在尝试在 jQuery 中创建类似于本教程http://buildinternet.com/live/curtains/](http://buildinternet.com/live/curtains/)的拉线效果。我一直在玩这个演示中的代码，并添加了一个动画来拉线备份。

但是我想知道是否可以通过用鼠标向下拖动然后自动回弹来创建“拉”动作。

作为额外的一点，是否可以限制可以拉动的次数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:31:54.610

所以，这就是你想要的？

[http://jsfiddle.net/DerekL/GyfSQ/](http://jsfiddle.net/DerekL/GyfSQ/)

# iphone - 在 UIView 中添加按钮

> ID：10146511
> 
> 赞同：0
> 
> 时间：2012-04-13T18:40:31.287
> 
> 标签：iphone, cocoa-touch, cocoa

我正在尝试向 UIview 添加一个按钮，以覆盖视图的整个区域。像这样：

```
-(MBNHomeScreenButton*) initWithImage:(UIImage*)image 
              andHighlightedImage:(UIImage*)highlightedImage 
                         andTitle:(NSString*)aTitle 
                     withSelector:(SEL)actionButton
                      forDelegate:(UIViewController*)viewController{
self = [super init];
if (self) {
    self.frame = CGRectMake(0, 0, 100, 120);

    self.imageView = [[UIImageView alloc] initWithImage:image highlightedImage:highlightedImage];
    self.imageView.center = self.center;
    self.imageView.frame = CGRectMake(10, 0, HS_BUTTON_IMAGE_WIDTH, HS_BUTTON_IMAGE_HEIGHT);
    self.imageView.contentMode = UIViewContentModeScaleAspectFit;
    self.imageView.highlighted = NO;
    [self addSubview:self.imageView];

    self.title = [[UILabel alloc] initWithFrame:CGRectMake(0, HS_BUTTON_IMAGE_HEIGHT, HS_BUTTON_IMAGE_WIDTH + 20, 30)];
    self.title.text = aTitle;
    self.title.textAlignment = UITextAlignmentCenter;
    self.title.textColor = [UIColor whiteColor];
    self.title.backgroundColor = [UIColor clearColor];

    [self addSubview:self.title];

    // This creates a transparent button over the view
    UIButton *button  = [UIButton buttonWithType:UIButtonTypeCustom];
    //button.backgroundColor = [UIColor redColor];
    [button setFrame:self.frame];
    [button addTarget:viewController action:actionButton forControlEvents:UIControlEventTouchUpInside];
    [self addSubview: button];
}
return self;} 
```

在 ViewController 我这样创建视图：

```
m_newsHSButton = [[MBNHomeScreenButton alloc] initWithImage:[UIImage imageNamed:NEWS_SHADED_IMAGE]
                                        andHighlightedImage:[UIImage imageNamed:NEWS_HIGHLIGHTED_IMAGE]
                                                   andTitle:@"News" 
                                               withSelector:@selector(newsButtonPressed)
                                                forDelegate:self];

m_newsHSButton.center = CGPointMake(m_backgroundView.frame.size.width / 4, m_backgroundView.frame.size.height / 4);
[backgroundImgView addSubview:m_newsHSButton]; 
```

仍然...... newsButtonPressed 没有被调用。

你能帮我吗？谢谢！

==================== [编辑]好的...想通了..谢谢大家。这是我试图将视图作为子视图添加到最后一行的 UIImageView 的事实：

```
[backgroundImgView addSubview:m_newsHSButton]; 
```

显然，它不会再接触了。

感谢小伙伴们的努力！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:12:06.683

尝试在您的自定义视图中将按钮设为@property 或实例变量。然后`[m_newsHSButton.button addTarget:self action:actionButton forControlEvents:UIControlEventTouchUpInside];`从 viewController 调用。

# objective-c - NSArrayController vs NSMutableArray - 你什么时候使用 NSArrayController？

> ID：10146512
> 
> 赞同：2
> 
> 时间：2012-04-13T18:40:39.693
> 
> 标签：objective-c, arrays, cocoa, nsmutablearray, nsarraycontroller

通过我的第一个 Cocoa OS X 项目，我正在获取远程 XML 数据并将对象存储在 NSMutableArray 中。

今天，当我在项目中第一次打开 IB 时，我发现了对象 NSArrayController。

相当基本的问题 - 我什么时候会使用其中一个？我**没有**在我的应用程序中使用 TableView，而且我读到的大部分内容都在谈论将它绑定到表格视图。

我正在做一些数组操作，因为我随意从数组中添加/删除/修改对象。一个比另一个有好处吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T04:14:42.963

根据您的描述，创建一个自定义数据类。因此，该类的每个对象都可以根据需要操作数据，并且每个对象都代表数据记录。现在有了这个，如果你想显示你的数据，那么子类 nsarraycontroller 并绑定到这个。该控制器可以设置为使用自定义数据类。如果您在内部使用数据，只需创建您希望的任意数量并使用 NSSet。我推荐 NSSet，因为它保证了唯一性。

希望这可以帮助。

PS NSMutableSet 也存在。

# java - 将 int 作为布尔值返回

> ID：10146522
> 
> 赞同：1
> 
> 时间：2012-04-13T18:41:06.993
> 
> 标签：java, android, eclipse, apk, aapt

我是初学者，所以请多多包涵。我反编译了一个专业应用程序的源代码。当我将源代码复制到eclipse中时，出现以下代码错误（错误与返回类型有关）：

```
public boolean method(){
...
...
   for(int i = 0; ; i = 1){
       return i;
} 
```

如何更改代码以保持正确但保持功能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T18:45:57.317

您可以转换`i`为 a`boolean`或更改`return i;`为`return i != 0;`，这对于 的所有非零值都为真，如果为`i`则为假`i == 0`。

作为旁注，我真的认为*没有理由*将 a 包装`return`在一个`for`循环中。在这种情况下，您不妨将这两行都替换为`return 0;`（或`return false;`，以匹配方法签名）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T18:41:52.390

将返回类型从 更改`boolean`为`int`。

如您所见，您的方法正在返回，它在循环`i`中声明为 an ，因此您的方法的返回类型必须与它返回的变量的类型相同。`int``for`

# c# - 序列不包含任何元素

> ID：10146523
> 
> 赞同：1
> 
> 时间：2012-04-13T18:41:20.473
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我正在使用一个类来存储数据，然后使用控制器和视图在使用 MVC3 的网站上的屏幕上显示数据，但是我遇到了一个错误，不胜感激。

班级：

```
public class SampleData : DropCreateDatabaseIfModelChanges<TicketBookingEntities>
    {
        protected override void Seed(TicketBookingEntities context)
        {
            var productions = new List<Production>
            {
                new Production { Name = "Peter Pan" },
                new Production { Name = "Mary Poppins" },
                new Production { Name = "Pirates of the Carribean" },
                new Production { Name = "Joseph" },
                new Production { Name = "Billy Elliot" },

            };

            var directors = new List<Director>
            {
                new Director { Name = "Jason Brown" },
                new Director { Name = "Dan Elish" },
                new Director { Name = "Lee Hall" },
                new Director { Name = "Billie Armstrong" },
                new Director { Name = "Willy Russell" },

            };

            new List<Performance>
            {

                new Performance {Title = "Test", Genre = productions.Single(g => g.Name == "Peter Pan"), Director = directors.Single(a => a.Name == "Jason Brown"), Price = 9.99M, AlbumArtUrl = "/Content/Images/placeholder.gif" },

            }.ForEach(a => context.Performances.Add(a));
        }
    }
} 
```

控制器：

```
 public ActionResult Browse(string genre)
        {
            var productionModel = storeDB.Productions.Include("Performances")
                .Single(g => g.Name == genre);

            return View(productionModel);

        } 
```

看法：

```
@model Assignment2.Models.Production

@{
    ViewBag.Title = "Browse";
}

<h2>Browsing Production: @Model.Name</h2>
<ul>
    @foreach (var performance in Model.Performances)
    {
        <li>
            @performance.Title

        </li>
    }

</ul> 
```

错误：

```
Sequence contains no elements 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:48:25.387

你没有一个列表，你只有一个元素。取出 foreach 循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T10:23:36.863

设法解决了问题，将类型更改为控制器上的生产

# actionscript-3 - AS3 多个文本字段变得容易

> ID：10146524
> 
> 赞同：0
> 
> 时间：2012-04-13T18:41:22.657
> 
> 标签：actionscript-3, textfield

我正在为我的游戏制作结果页面以及升级页面，并寻找一种简单的方法来处理许多文本字段。我有一种处理字体、颜色和大小的文本格式，但正在寻找一种简单的方法来同时增加文本字段的宽度和高度。

我被告知一个“with”关键字可能有效，但不明白如何在我的程序中实现它，并且基本上希望尽可能缩短我的结果类。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T09:25:52.987

最好的方法是创建一个自定义函数来生成文本字段。

该示例可以在[livedocs](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/TextField.html)本身中找到。

因此，类似以下内容就足够了：

```
private function createCustomTextField(x:Number, y:Number, width:Number, height:Number):TextField {

        var result:TextField = new TextField();

        result.x = x; 

        result.y = y;

        result.width = width; 

        result.height = height;

        return result;
    } 
```

您还可以为函数中的每个属性设置默认值。

```
private function createCustomTextField ( x:Number= <Default Value>,  ... 
```

使用它在容器表单中添加一个文本字段。

```
var container:Sprite = new Sprite();  // New form container

container.addChild(createCustomTextField (20,20,50,50)); // Text Filed 1

container.addChild(createCustomTextField (20,50,50,50)); // Text Filed 2

addChild(container);  // Add to current class 
```

您可能希望修改函数以接受名称，以便以后可以访问每个变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T19:23:19.093

据我所知，您不能使用“with”关键字来定位多个对象。这是它的文档：http: [//help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/statements.html#with](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/statements.html#with)

我过去所做的只是将所有目标组成一个数组，然后编写一个循环将属性应用于每个目标：

```
var textFormat:TextFormat = generateMyCustomTextFormat();
var textField1:TextField = new TextField();
var textField2:TextField = new TextField();
//...
var textField3:TextField = new TextField();
var targets:Array = [textField1, textField2, textField3];
for(var i:int=0; i<targets.length; i++)
{
    targets[i].defaultTextFormat = textFormat;
    targets[i].width = 250;
    //...
} 
```

# php - 使用全选获取多个复选框值并将值更新到数据库中

> ID：10146537
> 
> 赞同：0
> 
> 时间：2012-04-13T18:43:01.593
> 
> 标签：php, jquery, mysql

你好朋友我正在尝试制作一个收件箱系统，我们在一个复选框的帮助下选择所有复选框，然后通过 ajax 将值传递给所有复选框并更新数据库。但问题是他们重视并被一一选择然后形成一个数组

例如

第一次 2 第二次 2,3 第三次 2,3,4

在 sql 查询中，我试图获取数组列表并打破它们，以便我可以更新数据库中的值，它也没有发生，任何人都可以帮忙吗？这是我编码的。

获取复选框的值

```
 $(function(){
   $('.massmsgdelbutton').click(function(){
    var val = [];
  $('.sltchk:checked').each(function(i){
   val[i] = $(this).val();
  var dataString = 'massmsgdel='+ val;
  if(confirm("Sure you want move all these messages to Trash? There is NO undo!"))
  {

$.ajax({
 type: "POST",
 url: "modules/messages/sql_ex.php",
data: dataString,
 cache: false,

 success: function(html){
 alert(html);
  }
 });

  }

});
 });
}); 
```

我的 sql 代码使用 expode 来爆炸数组

```
 if(isset($_REQUEST['massmsgdel']))
         {
     $id=$_REQUEST['massmsgdel'];
        $myArray[] = explode(',', $id);
     echo $id;
        $sql=mysql_query("update message set trash='1' where message_id='$myArray'");
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:49:36.597

好吧，您可以在这里使用两种方法。反正根据我的经验。

您可以遍历您拥有的数组（foreach 循环）并每次执行更新，如下所示：

```
$sql=mysql_query("update message set trash='1' where message_id='$messageID'"); 
```

[或者您可以尝试使用 IN SQL 运算符（您可以在此处](http://www.w3schools.com/sql/sql_in.asp)找到更多信息），如下所示：

```
$sql=mysql_query("update message set trash='1' where message_id IN ('$messageID1', '$messageID2', '$messageID3', '$messageID4')"); 
```

IN 运算符会将 message_id 与括号中的任何参数匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T19:03:38.773

它有效吗？

```
if(isset($_REQUEST['massmsgdel']))
{
     $id=$_REQUEST['massmsgdel'];
        $myString = implode(',', $id);
     echo $id;
        $sql=mysql_query("update message set trash='1' where message_id IN ($myString)");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T19:18:48.050

伙计们，我找到了解决方案。

在我不得不使用的jQuery中

```
 var dataString = 'massmsgdel='+ val[i]; 
```

代替

```
 var dataString = 'massmsgdel='+ val; 
```

在 sql 中我不得不使用

```
 $sql=mysql_query("update message set trash='1' where message_id IN ('$myArray')"); 
```

感谢@Frank Allenby 帮助我走出困境

# c++ - 使用 OpenSSL 实现密文窃取

> ID：10146539
> 
> 赞同：1
> 
> 时间：2012-04-13T18:43:11.143
> 
> 标签：c++, encryption, cryptography, openssl, aes

我正在使用 OpenSSL 的 EVP_* API 在 CBC 模式下实现 AES 加密。

我正在尝试实现密文窃取以保持加密文本与纯文本的长度相同。我找到了一种关闭填充的方法（EVP_CIPHER_CTX_set_padding()），但这似乎并没有打开密文窃取而不是填充。

有没有人有一个如何进行密文窃取的例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T07:40:47.010

我从 2007 年发现了一个用于实现密文窃取的 OpenSSL[补丁。](http://rt.openssl.org/Ticket/Display.html?id=1482&user=guest&pass=guest)它尚未包含在内，但将代码包含到我的应用程序中没有问题。

# php - 减少会话大小长度

> ID：10146540
> 
> 赞同：0
> 
> 时间：2012-04-13T18:43:15.697
> 
> 标签：php, codeigniter, session

我让一个程序员开发了一个框架，他目前离开了一个星期。基本上他使用 CodeIgniter 来开发一个框架。

每当我访问开发环境时，它都会存储一个冗长的 cookie。我应该在哪里查看以减少会话大小？

> 的Set-Cookie：mysite_session = AjgDOFk％2FXDoPelgiAm8ENVs％2BUjlQIwNzUDMAIFB3BWoFawFpAQpROFRrCygHbl1yAzcONAdiU2lUIwFkVT0DNgRgAzEHagRgDDVWMwg％2BUTcCbQMyWTpcYg9iWGACMwRmWzlSYlA4AzRQZgAyUDQFYAU9AWEBNFE1VDoLKAduXXIDNw42B2BTaVQjATlVdANfBGMDNAc3BHAMaFYjCC9RcwJiA3FZMVwxDzNYawJ3BDVbNlI7UC8DOVBlAH1QNQUzBSoBMgFjUXNUNAt5B29dMAM9Dj0HclMmVHIBNVV2A18EYwM3BzYEbAx5VnIIZ1EiAmMDNlk％2BXDoPI1gGAjAEZlsjUnBQbwNpUDAANVBhBXEFKwE2AXtRYVQhCzkHYl0hAyUOLAc4UydUdQEgVT4DLwQtAycHNgRgDCBWIwgyUTgCPwNkWW5ccg8vWD8CMARwWyFSKlAjAztQJQBpUDUFMAU％2BASUBOVEwVHwLfgcKXWADbg5zBzlTJVRoASRVfQMiBDkDOQdpBDMMPlZjCGhRYgJtAzBZP1w0DzVYagIo; 路径=/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:26:38.343

出于兴趣，为什么这是一个问题？

你可以进去看看

应用程序/config/config.php

搜索 $config['sess_encrypt_cookie']，如果设置为 TRUE，请尝试将其设置为 FALSE。这将减小 cookie 的大小，但显然顾名思义，它不会加密会话数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T18:44:06.287

不太确定，但尝试寻找这个：

```
ini_set('session.hash_function', 'sha512');
ini_set('session.hash_function', '1');
ini_set('session.hash_bits_per_character', '6'); 
```

这可以并且可以减少长度，也可以安全加密。[查看更多信息](http://php.net/manual/en/session.configuration.php)

# php - 特定除数的最优算法

> ID：10146541
> 
> 赞同：-1
> 
> 时间：2012-04-13T18:43:19.970
> 
> 标签：php, algorithm

**[不是寻找唯一除数的最佳算法](https://stackoverflow.com/questions/10061108/optimal-algorithm-for-finding-unique-divisors)**的重复****

 **我遇到了这个问题。我无法找到最佳算法。

**问题是 ：**

给定一个`L`自然数列表（数字可以非常大）和一个数字`N`，确定除数的数量`N`不会除以列表中存在的任何数字的最佳算法是什么`L`。列表中的数字可以是重复的，即一个数字可以出现不止一次。

**观察：**

的某个除数`d`的除数`N`也是 的除数`N`。

**我的方法是：**

1.  求 的除数`N`。
2.  以相反的顺序对 L 进行排序（最大的元素是第一个元素）。
3.  的foreach 除数`d`，`N`我检查它是否划分列表中的任何元素。（当您检查小于`d`列表中的元素时停止，因为列表已排序）
4.  如果`d`除以列表中的某个数字`L`，那么我不检查 的任何除数`d`，也就是说，我跳过此检查。
5.  最终，既未除列表中的任何数字也未跳过的左除数被计算在内。这个计数是最终的答案。

但是这个算法对于这个问题并不是最优的。

有更好算法的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T04:07:19.147

```
<?php

class Divisors {
  public $factor = array();

  public function __construct($num) {
    $this->num = $num;
  }

  // count number of divisors of a number
  public function countDivisors() {
    if ($this->num == 1) return 1;

    $this->_primefactors();

    $array_primes = array_count_values($this->factor);
    $divisors = 1;
    foreach($array_primes as $power) {
      $divisors *= ++$power;
    }
    return $divisors;
  }

  // prime factors decomposer
  private function _primefactors() {
    $this->factor = array();
    $run = true;
    while($run && @$this->factor[0] != $this->num) {
      $run = $this->_getFactors();
    }
  }

  // get all factors of the number
  private function _getFactors() {
    if($this->num == 1) {
      return ;
    }
    $root = ceil(sqrt($this->num)) + 1;
    $i = 2;
    while($i <= $root) {
      if($this->num % $i == 0) {
        $this->factor[] = $i;
        $this->num = $this->num / $i;
        return true;
      }
      $i++;
    }
    $this->factor[] = $this->num;
    return false;
  }
} // our class ends here

    $example = new Divisors(4567893421);
    print $example->countDivisors();
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T18:57:17.000

首先，分解 n 并用以下方式表示它： p1:k1, p2:k2,..., pm:km 使得 p1,p2,... 都是素数并且 n=p1^k1 * p2^k2 。 ...

现在，迭代 r1, r2, r3,..., rm 使得 r1<=k1, r2<=k2, ..., rm<=km 并检查 p1^r1*p2^r2...*pm ^rm 将 L 中的任何数字相除。如果不是，则将 count 加 1。

优化：为 r1 选择一个值。查看 p1^r1 是否除以 L 中的任何数字。如果是，则为 r2 选择一个数字，依此类推。如果 p1^r1 不除 L 中的任何数字，则将 count 增加 (k2+1) *(k3+1)* ..*(km+1)。

示例 N=72, L=[4, 5, 9, 12, 15, 20]：将 N 写为原始积：2:3, 3:2 (2^3*3*2 = 72)。

```
p1=2, p2=3, k1=3, k2=2
count=0
r1=0:
    r2=0:
        Divides 4
r1=0:
    r2=1:
        Divides 9
r1=0:
    r2=2:
        Divides 9
r1=1:
    r2=0:
        Divides 4
r1=1:
    r2=1:
        Divides 12
r1=1:
    r2=2:
        L not divisible by 18\. Count+=1 = 1
r1=2:
    r2=0:
        Divides 4
r1=2:
    r2=1:
        Divides 12
r1=2:
    r2=2:
        L not divisible by 36\. Count+=1 = 2
r1=3:
    r2=0:
        L not divisible by 8\. Count+=(k2+1) +=(2+1) = 5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T18:49:13.183

您需要研究的是：**[共素数](http://en.wikipedia.org/wiki/Coprime)**（或**相对素数**）

> 在数论（数学的一个分支）中，两个整数 a 和 b 被称为互质数（也拼写为互质数）或互质数，如果唯一能将这两个整数整除的正整数是 1。

**所以要“转码”你的问题：**

您基本上想`N`从`L`列表中找到互质数。

**什么时候`a`和`b`是共同质数？**

![在此处输入图像描述](../Images/d433a403e1e8bfa39acc861978cf9ec3.png)

> 如果两个数互质，则它们的最大公约数 (GCD) 为 1

**PHP 中的示例代码（用于 GCD）：**

```
<?php
$gcd = gmp_gcd("12", "21");
echo gmp_strval($gcd) . "\n";
?> 
```

**简单的说 ：**

*   `$count = 0`
*   `e`foreach列表中的元素`L`：计算`GCD(e,N)`
*   他们的 GCD = 1 吗？如果是，它们是互质的（所以`N`没有`e`公约数）。数一数。`$count++`

这就是它的全部。**

# java - 向下转换会产生 ClassCastException。我怎样才能解决这个问题？

> ID：10146544
> 
> 赞同：0
> 
> 时间：2012-04-13T18:43:49.723
> 
> 标签：java, inheritance, downcast

我正在尝试实现一个私人消息系统。让我知道这是否是糟糕的设计，但我有两个类`User`和`Recipient`. `Recipient`是一个`User`所以它继承`User`。`Recipient`具有附加属性，例如`messageId`, `readDate`, `keepMessage`.

我的代码如下：

```
//This line gives me ClassCastException
recipient = (Recipient) user; 
```

.

```
 //GET id of user to send message to
String receiverId = request.getParameter("id");

//GET title of message
String title = request.getParameter("title");

//Get content of message
String content = request.getParameter("content");

//Retrieve logged in user from session
HttpSession session = request.getSession();     
User sender = (User) session.getAttribute("user");

//Instantiate a new User to hold receiver
User user = new User();
//Retrieve object of user to send message to
UserService userService = new UserService();
user = userService.getUserById(Integer.valueOf(receiverId));

//Instantiate a new Recipient (extends User)
Recipient recipient = new Recipient();
//Cast User as a Recipient
recipient = (Recipient) user;

//Instantiate a message
Message message = new Message();
//message related stuff here....

//Pass the message content and Recipient to messageService
MessageService messageService = new MessageService();
messageService.sendPrivateMessage(message, recipient); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T18:48:21.953

除了您的类层次结构（这是另一个问题）之外，您还有多个语法问题。正如我所指出的，您使用 2 个不同的类定义了两次接收者变量。此外，您似乎正在尝试将用户投射到收件人，这将失败 - 收件人是用户，但用户不一定是收件人

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T18:52:19.823

你不能用Java真正做到这一点。根据您上面所说的，您不能将收件人投射到用户。你真的需要这样做吗？在上面的实例中，您应该能够将其实例化为收件人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T18:56:20.297

您不能将超类强制转换为派生类。额外的子类数据应该从哪里来？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T19:05:45.937

你不能用演员表来做到这一点。你最好的选择是添加一个构造函数来`Recipient`接受一个`User`参数。然后你可以做

```
Recipient recipient = new Recipient(user); 
```

要么接受，要么`sendPrivateMessage()`接受 a`User`而不是 a `Recipient`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T19:19:04.290

我认为沮丧是不好的，请检查您的班级层次结构。如果该对象确实是子对象，则可以使用 dynamic_cast

# ios - Firemonkey iOS 应用程序的嵌入式数据库？

> ID：10146545
> 
> 赞同：1
> 
> 时间：2012-04-13T18:44:04.697
> 
> 标签：ios, database, delphi, delphi-xe2, firemonkey

是否有任何占用空间小的嵌入式数据库可用于创建 iOS 应用程序？

# c++ - 输入/输出从命令行可执行文件重定向到文件

> ID：10146552
> 
> 赞同：0
> 
> 时间：2012-04-13T18:44:29.173
> 
> 标签：c++, linux

如何保存从文件中获取输入（使用“<”）的程序的所有输入（cin）和输出（cout，cerr）？我希望输入和输出是有序的（**所以每个输入后面都有相应的输出，就好像我在自己输入输入一样**）。

我尝试“>”将所有内容输出到文件中，但这只会保存标准输出（无输入/cerr），并且只是简单地复制命令行输出仍然只给出没有输入的输出（因为“<”如何工作） .

*有没有办法按顺序*将所有内容（输出+输入）写入文件？

编辑：为清楚起见进行了编辑

EDIT2：我刚刚意识到不可能做我想做的事情，因为控制台不知道何时实际输入命令。我将不得不手动输入命令并使用“脚本”命令来实际记录所有输入/输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T18:49:47.880

您需要将 cerr 添加到流中

命令 > 文件 2&>1

这意味着也将 2 (stderr) 放入 1 (stdout)。

# r - 在 R 中根据时间绘制数据

> ID：10146555
> 
> 赞同：9
> 
> 时间：2012-04-13T18:44:52.123
> 
> 标签：r, datetime, plot, ggplot2

我有一个数据框，其中一列作为日期/时间（内部存储为数字），其他列作为数字/整数，我想根据日期/时间绘制数据。

使用以下内容填充数据框中的日期/时间。

```
as.POSIXct(strptime(time, '%H:%M:%S %p %m/%d/%Y',tz='GMT')) 
```

`class(table$time)`是`numeric`。

1.  如何以某种格式将 x 轴上的数据绘制和显示为可读的日期时间。
2.  如何绘制行的子集而不是所有行 例如：行之间`dateTime1`和`dateTime2`位置之间的行`dateTime1`以及`dateTime2`以某种格式给出的日期。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-08T09:29:05.320

您也可以使用`ggplot2`，更具体地说，`geom_point`或者`geom_line`（请注意，我使用来自@plannapus 的示例数据）：

```
require(ggplot2)
theme_set(theme_bw()) # Change the theme to my preference
ggplot(aes(x = time, y = variable), data = data) + geom_point() 
```

![在此处输入图像描述](../Images/bce6d419dacb4f8dbb3e115f8270ba78.png)

或使用线几何：

```
ggplot(aes(x = time, y = variable), data = data) + geom_line() 
```

![在此处输入图像描述](../Images/b0cf7bd2f740ce174e951717df598b78.png)

`ggplot2`自动识别 x 轴的数据类型是日期，并相应地绘制轴。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-08T09:10:28.280

这是一些虚拟数据：

```
data <- structure(list(time = structure(c(1338361200, 1338390000, 1338445800, 1338476400, 1338532200, 1338562800, 1338618600, 1338647400, 1338791400, 1338822000), class = c("POSIXct", "POSIXt"), tzone = ""), variable = c(168L, 193L, 193L, 201L, 206L, 200L, 218L, 205L, 211L, 230L)), .Names = c("time", "variable"), row.names = c(NA, -10L), class = "data.frame")
data
              time variable
1  2012-05-30 09:00:00      168
2  2012-05-30 17:00:00      193
3  2012-05-31 08:30:00      193
4  2012-05-31 17:00:00      201
5  2012-06-01 08:30:00      206
6  2012-06-01 17:00:00      200
7  2012-06-02 08:30:00      218
8  2012-06-02 16:30:00      205
9  2012-06-04 08:30:00      211
10 2012-06-04 17:00:00      230 
```

要在轴中显示日期和时间，您可以使用函数`axis.POSIXct`：

```
plot(data, xaxt="n")
axis.POSIXct(side=1, at=cut(data$time, "days"), format="%m/%d") 
```

您可以控制刻度线的位置`at`（对于常规函数，`axis`除了这里它将提供 POSIXct 类的对象）并控制它们将如何出现`format`。

就子集而言，只要您的 dateTime1 和 dateTime2 对象也是 POSIXct 对象，您就可以像进行任何其他类型的子集一样进行操作。

```
dateTime1 <- strptime("00:00 05/31/2012", format="%H:%M %m/%d/%Y")
dateTime2 <- strptime("3 Jun 2012 05-30", format="%d %b %Y %H-%M")
data[data$time < dateTime2 & data$time > dateTime1, ]
                 time variable
3 2012-05-31 08:30:00      193
4 2012-05-31 17:00:00      201
5 2012-06-01 08:30:00      206
6 2012-06-01 17:00:00      200
7 2012-06-02 08:30:00      218
8 2012-06-02 16:30:00      205 
```

# regex - 两个正则表达式字符 \b 和 \< 有什么区别

> ID：10146559
> 
> 赞同：2
> 
> 时间：2012-04-13T18:45:09.147
> 
> 标签：regex, bash

在我正在阅读有关正则表达式的脚本中，它说：

*   `'\b'`击中单词的前边界
*   `'\<'`击中单词的开头

那么使用以下有什么区别

*   `\b`超过`\<`
*   `\b`超过`\>`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T18:53:08.967

`\b`就像`\<`并`\>`结合：

*   `\<`在单词的开头匹配，
*   `\>`在词尾匹配，
*   `\b`在单词的开头或结尾匹配，
*   `\B`匹配单词的开头或结尾除外。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T18:52:14.437

我`man grep`告诉我`\b`：

> 符号 `\<` 和 `\>` 分别匹配单词开头和结尾的空字符串。该符号`\b`与单词边缘的空字符串匹配，[...]

所以`\bfoo\b`会匹配任何匹配的地方`\<foo\>`。

另一方面：正则表达式的变体太多了，很难说出你的`\b`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-13T20:07:11.227

您的来源似乎是错误的，或者至少是不完整的。`\b`匹配*任何*边框，而不仅仅是前面的边框。报价`man grep`：

> 符号`\<`和`\>`分别匹配单词开头和结尾的空字符串。该符号`\b`与单词边缘的空字符串匹配

* * *

*   `grep`'s`\b`等价于`grep`'s`\(\<\|\>\)`

如果您熟悉 Perl 正则表达式，

*   `grep`'s`\<`等价于 Perl 的`(?<!\w)(?=\w)`
*   `grep`'s`\>`等价于 Perl 的`(?<=\w)(?!\w)`
*   `grep`'s`\b`等价于 Perl 的`\b`
*   `grep`'s`\b`等价于 Perl 的`(?:(?<!\w)(?=\w)|(?<=\w)(?!\w))`

# xml - 在 Delphi 7 Pro 中用于解析和验证 XML 的最佳库

> ID：10146567
> 
> 赞同：1
> 
> 时间：2012-04-13T18:45:56.353
> 
> 标签：xml, delphi, xslt, xsd, delphi-7

用于解析和验证 XML 的最佳 Delphi 7 Pro 库是什么？Delphi 7 似乎不支持越来越多的 XML 库。

我希望 XML 库：

1.  像使用 C# 一样从 XSD 文件自动生成 Delphi 7 类代码。

2.  从类代码中自动创建 XML 文件，就像在 C# 中一样。

3.  最终使用 XSLT 进行 XML 转换。

4.  理想情况下使用像 Schematron 这样的业务规则验证。

5.  其他标准的东西，比如只获取一个 XML 节点或附加一个节点......

如果不太贵，我愿意购买图书馆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T19:18:12.187

如果我没记错的话，我相信 Delphi7 包含`XML databinding wizard`. 该向导涵盖第 1,2 和 5 点。确保您使用[的是最新版本](http://www.google.be/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CDQQFjAA&url=http://cc.embarcadero.com/Item/21989&ei=HXuIT_6VN4WUOquRyccJ&usg=AFQjCNFRsIhhcLw_jTogpdbcX29ES-G3Pg&sig2=fa7dYDOop7wPT6ZjNdPdeQ)

第 3 点可以通过[微软的 MsXML 工具等免费工具来完成](http://msdn.microsoft.com/en-us/data/bb190600.aspx)

**编辑**

我相信我的答案可能会被丢弃，因为它与 OP 的 delphi 版本无关......

# c# - 如何读取、替换和写入非常大的文件？

> ID：10146573
> 
> 赞同：6
> 
> 时间：2012-04-13T18:46:14.937
> 
> 标签：c#

> **可能重复：**
> [如何在 .NET 中读取大 (1 GB) txt 文件？](https://stackoverflow.com/questions/4273699/how-to-read-a-large-1-gb-txt-file-in-net)

C# 中读取文件、替换一些字符串并写入另一个新文件的最佳方式是什么？我需要对 8GB 或 25GB 等非常大的文件执行此操作。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-13T20:12:45.583

关于 I/O 没有太多可以优化的地方，大部分优化应该是在字符串比较上，以确定字符串是否应该被替换，基本上你应该这样做

```
protected void ReplaceFile(string FilePath, string NewFilePath)
{
   using (StreamReader vReader = new StreamReader(FilePath))
   {
      using (StreamWriter vWriter = new StreamWriter(NewFilePath))
      {
         int vLineNumber = 0;
         while (!vReader.EndOfStream)
         {
            string vLine = vReader.ReadLine();
            vWriter.WriteLine(ReplaceLine(vLine, vLineNumber++));
         }
      }
   }
}
protected string ReplaceLine(string Line, int LineNumber )
{
   //Do your string replacement and 
   //return either the original string or the modified one
   return Line;
} 
```

您查找和替换字符串的标准是什么？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T19:29:03.273

我之前做了200GB的文件。请使用 StreamReader 和 StreamWriter。

[流阅读器](http://msdn.microsoft.com/en-us/library/system.io.streamreader.aspx)

[StreamWriter](http://msdn.microsoft.com/en-us/library/system.io.streamwriter.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T18:51:37.940

是否有不太大的线条？如果是这样，您可以逐行读取文件，对该行进行替换，然后将该行写出到新文件中。由于它是流式传输的，因此只需要很少的内存。

# php - fwrite 创建新页面

> ID：10146574
> 
> 赞同：0
> 
> 时间：2012-04-13T18:46:16.053
> 
> 标签：php, mysql, html

我对 php 非常陌生，到目前为止，在我想做的所有事情中，我都能够在网上搜索解决方案。经过数小时阅读我能找到的内容但仍然无法弄清楚我来找你..

这就是我正在做的我正在创建一个表单，有人可以在其中上传一些信息，然后该信息会填充到库存页面以及自己的页面中，并为每个提交创建一个更深入的完整页面在模板上。所有表单信息都存储在 mysql 数据库中。

除了最后一块，我已经完成了所有工作。我正在尝试使用 fwrite 来执行此操作。我将发布该部分的内容。我知道我在这里遗漏了一些主要步骤。任何指导或正确方向的观点都会很好。

谢谢！

```
<?php

// For use in creating individual page
$tpl_file = "properties.php"; // template
$tpl_path = "pages/"; // where template is stored
$submissions_path = "new-pages/"; // where new file will be stored

$fp = fopen($submissions_path, "w");
fwrite($fp, $tpl_file);
fclose($fp);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T18:49:35.700

您正在使用文件操作打开一个目录，这是行不通的。fopen() 适用于文件，而不是目录。

最有可能你所追求的是

```
$path = $submissions_path . $tpl_path . $tpl_file;
$fp = fopen($path, 'w') or die("Failed open $path for writing"); 
```

请注意添加的`or die()`业务 - 在继续之前验证文件系统操作是否成功（或失败）始终是一个好主意。假设成功会在某个时候咬你的屁股。

# rdf - 使用 SPARQL 查询的 UNION 和交集

> ID：10146576
> 
> 赞同：3
> 
> 时间：2012-04-13T18:46:25.007
> 
> 标签：rdf, sparql, jena, arq, redland

我正在将用户定义的查询转换为 SPARQL。例如，当用户说“abc”时，这意味着给我一个给定类型的所有节点，这些节点具有一些名为“abc”的属性。作为对此的扩展，如果用户说“abc or (pqr and lmn)”，我需要找到某个属性为“abc or (pqr and lmn)”的给定类型的所有节点。以下是我提出的查询：

```
SELECT DISTINCT ?node, ?type                                                 
WHERE                                                                          
{
  {                                                                              
    ?node a ?type .                                                          
    FILTER ( ?type != <sometype>)
  }
{           
  {                                                                              
    ?node ?reln0 ?obj0 .                                                     
    FILTER ( regex(str(?obj0), 'abc', "i") )                           
  }                                                                              
  UNION                                                                          
  {                                                                              
    {                                                                              
      ?node ?reln1 ?obj1 .                                                     
      FILTER ( regex(str(?obj1), 'pqr', "i") )                                
    }
    {                                                                             
      ?node ?reln2 ?obj2 .                                                     
      FILTER ( regex(str(?obj2), 'lmn', "i") )                               
    }                                                                              
  }
}                                                                              
}                                                                              
ORDER BY ?node 
```

但它不会返回正确的结果。上面给出的查询有问题吗？我不想使用以下内容，因为我需要动态生成条件并且每个子句都需要分开。

```
FILTER (regex(str(?obj2), 'abc', "i") || regex(str(?obj2), 'pqr', "i") && regex(str(?obj2), 'lmn', "i")) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-29T15:16:22.183

我将您的查询具体如下（为第一个过滤器输入明确的类型）：

```
PREFIX : <http://example.org/>

SELECT DISTINCT ?node ?type                                                 
WHERE                                                                          
{
    {                                                                              
        ?node a ?type .                                                          
        FILTER ( ?type != :Type1 )
    }
    {           
        {                                                                              
            ?node ?reln0 ?obj0 .                                                     
            FILTER ( regex(str(?obj0), 'abc', "i") )                           
        }                                                                              
        UNION                                                                          
        {                                                                              
            {                                                                              
                ?node ?reln1 ?obj1 .                                                     
                FILTER ( regex(str(?obj1), 'pqr', "i") )                                
            }
            {                                                                             
                ?node ?reln2 ?obj2 .                                                     
                FILTER ( regex(str(?obj2), 'lmn', "i") )                               
            }                                                                              
        }
    }                                                                              
}                                                                              
ORDER BY ?node 
```

然后我生成了以下数据：

```
@prefix : <http://example.org/> .

:n1 a :Type2 ;    # keep
    :r0 :NodeABC .

:n2 a :Type2 ;
    :r0 :NodeBCD .

:n3 a :Type2 ;     # keep
    :r1 :NodePQR ;
    :r2 :NodeLMN .

:n4 a :Type2 ;
    :r1 :NodeQRS ;
    :r2 :NodeLMN .

:n5 a :Type2 ;
    :r1 :NodePQR ;
    :r2 :NodeMNO .

:n6 a :Type2 ;
    :r1 :NodeQRS ;
    :r2 :NodeMNO . 
```

只有`:n1`并且`:n3`应该保留。我可以使用[Jena 的命令行 ARQ](http://jena.apache.org/documentation/query/cmds.html)或[基于 Redland`roqet`](http://librdf.org/rasqal/roqet.html)的命令行运行它，并且在这两种情况下我都会得到这些规则。

使用 ARQ：

```
$ arq --data data.n3 --query query.sparql
-----------------
| node | type   |
=================
| :n1  | :Type2 |
| :n3  | :Type2 |
-----------------

$ arq --version
Jena:       VERSION: 2.10.0
Jena:       BUILD_DATE: 2013-02-20T12:04:26+0000
ARQ:        VERSION: 2.10.0
ARQ:        BUILD_DATE: 2013-02-20T12:04:26+0000 
```

与`roqet`：

```
$ roqet query.sparql -D data.n3 -r table
roqet: Querying from file query.sparql
--------------------------------------------------------------
| node                       | type                          |
==============================================================
| uri<http://example.org/n1> | uri<http://example.org/Type2> |
| uri<http://example.org/n3> | uri<http://example.org/Type2> |
--------------------------------------------------------------

$ roqet -v
0.9.28 
```

# jquery - 在 ul 和 li 列表中显示数据

> ID：10146580
> 
> 赞同：0
> 
> 时间：2012-04-13T18:46:39.797
> 
> 标签：jquery, jquery-mobile

我在 ul 和 li 列表中显示我的新闻数据时遇到问题。代码是：

```
$('#NewsPage').live('pagebeforeshow',function(event, ui){ 
    Newslist = "";
    $.each(NewsObject, function(k,v){ 
        Newslist += "<li><a href='#'>" + v.news_title + "</a></li>"; 
    }); 
    $("ul#displayNews").html(Newslist); 
}); 
```

在我的 html 文件中，我有：

```
<div data-role="content"> 
<div id="displayNews"> 
    <ul data-role="listview" data-inset="true" data-filter="true"> </ul> 
</div> 
</div> 
```

请注意，Newslist 是我在名为 gv_file.js 的文件中定义的全局变量，并包含在 html 文件的头部

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T18:55:38.183

您的选择器不正确。`ul#displayNews`寻找`<ul id="displayNews">`，不`ul`包含在内`#displayNews`。

`.append`试试这个（为了方便起见，有点好处）：

```
$('#NewsPage').live('pagebeforeshow',function(event, ui){ 
    $.each(NewsObject, function(k,v){ 
        $('#displayNews ul').append('<li><a href="#">' + v.news_title + '</a></li>'; 
    }); 
}); 
```

或者更好的是，使用更现代`on()`的而不是`live()`（需要 jQuery 1.7 或更高版本）：

```
$(document).on('pagebeforeshow','#NewsPage', function(event, ui){ 
    $.each(NewsObject, function(k,v){ 
        $('#displayNews ul').append('<li><a href="#">' + v.news_title + '</a></li>'; 
    }); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T05:49:43.940

HTML：

```
<div data-role="content"> 
  <div id="displayNews"> 
      <ul data-role="listview" data-inset="true" data-filter="true"> </ul> 
  </div> 
</div> 
```

jQuery：

```
$('#NewsPage').live('pagebeforeshow',function(event, ui){ 
    Newslist = "";
    $.each(NewsObject, function(k,v){ 
        Newslist += "<li><a href='#'>" + v.news_title + "</a></li>"; 
    }); 
    $("#displayNews ul").html(Newslist).listview("refresh"); 
}); 
```

# eclipse - 更改“已完成”的定义

> ID：10146581
> 
> 赞同：1
> 
> 时间：2012-04-13T18:46:42.687
> 
> 标签：eclipse, bugzilla, mylyn

我正在使用带有 MyLyn 插件的 Eclipse Helios，与外部 Bugzilla 服务器连接。

我不希望系统向我显示“已完成”的任务。否则，窗格很快就会被完成的东西填满。

不幸的是，当我将 Bugzilla 中的错误标记为“已解决”时，MyLyn 将其等同于“已完成”。问题就在于此。对我来说，Bugzilla 任务在“关闭”之前不会完成。对于我们特定的工作流程，在将 Bugzilla 任务标记为“已解决”后，我仍然需要做一些事情。

有什么方法可以告诉 MyLyn 中的 Bugzilla 连接器将“CLOSED”等同于“Completed”而不是“RESOLVED”？

和平

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:43:30.667

您需要在 Mylyn 中为您的 Bugzilla 存储库定义[自定义工作流配置。](http://wiki.eclipse.org/Mylyn/Bugzilla_Connector#Custom_Transitions)

# java - 具有对象的队列对于 isEmpty() Java 返回 true

> ID：10146586
> 
> 赞同：1
> 
> 时间：2012-04-13T18:47:12.750
> 
> 标签：java, queue, is-empty

我有一个程序，它创建一个队列，将对象排入队列，然后如果队列不为空，则将它们一一出列。我遇到的问题是每次检查队列时都是空的。在将每个对象排入队列后，在队列上调用打印，它可以很好地打印队列的内容。

```
import java.util.*;
import java.io.*;
public class Processor2
{
private LinkedQueue queue = new LinkedQueue();
private int time = 0;
private int count = 100;
private int amount = 0;
private PrintWriter out;
private Person temp;
private boolean var;
private Random randomNum = new Random();;
private String turn;
private int popCount=0;
private int loopCount =0;

public void start()
{
    amount = randomNum.nextInt(5);
    amount += 5;
    pop(amount, time);
    sim();
}

public void pop(int num, int time)
{

        for(int i=1; i<=num; i++)
        {
            Person pe = new Person(i, time, 0);
            queue.enqueue(pe);
            System.out.println(queue);
        }   
        popCount += num;
}

public void sim()
{
    try
    {
        out = new PrintWriter(new FileWriter("output.txt")); 

        while(loopCount<=100)
        {
            var = queue.isEmpty();
            if(var=true)
            {
                System.out.println("queue is empty");
            }

            if(var=false)
            {
                Object temp = queue.dequeue();
                double rand = Math.random();

                if(rand < 0.5)
                {
                    System.out.println("inside if else statement");
                    // does stuff with object //
                    loopCount++;
                }
                else
                {
                    System.out.println("inside if else statement");
                    // does stuff with object //
                    loopCount++;
                }
            }
        }
        out.close();
    }
    catch (IOException ioe)
    {
        System.out.println("Error Writing to File: " + ioe);
    }
}
} 
```

队列的 isEmpty() 方法似乎没有任何问题，但这里是：

```
public boolean isEmpty() 
{
    if(count == 0)
    {
        return true;
    }
    else
    {
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-13T19:00:57.013

```
var = queue.isEmpty();
if(var=true) // this line *sets* var to true
{
    System.out.println("queue is empty");
} 
```

如果您更改`if (var=true)`为`if(var==true)`或只是`if(var)`您应该看到不同的结果

# performance - Netty 作为游戏服务器的适用性

> ID：10146587
> 
> 赞同：1
> 
> 时间：2012-04-13T18:47:15.217
> 
> 标签：performance, netty, latency

我正在开发一个多人 2D 游戏，玩家和其他对象在屏幕上以简单的坐标系移动。所以玩家的客户端将它的动作发送到服务器，根据这些动作，服务器的游戏室线程会定期（可能是 50-100 毫秒）为每个对象计算新的速度、坐标和角度。然后它将有关这些更改的数据发送给每个玩家。

例如，我们有十个玩家可以在一秒钟内发送三次他们的动作，服务器必须将这些动作转发给每个人。考虑到除了移动之外的其他玩家动作，一秒钟内可能会出现数十条小消息，而这只是在一个房间里。

所以这里有一堆问题：

1) Netty 是我正在寻找的框架吗？这是一款实时游戏，所以每一毫秒都很重要。低延迟是最重要的要求。如果玩家的 ping 超过 30，则游戏非常糟糕和滞后。

2）如果是这样，我也想听听你对这种服务器的优化和设置的每一个建议，它发送小数据包，但有很多。我估计并发玩家的峰值将是大约 2000-3000 名用户在 100-200 个房间里玩，所以如果服务器能够无延迟地处理这么多玩家玩游戏，我会非常高兴。

3）每个游戏房间都有某种自己的线程来循环和运行游戏。有没有合适的方法来做这种线程，所以它对服务器的正常功能影响不大？

感谢您的回答！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T01:14:24.960

看看这个来自 github的[netty 游戏服务器。](https://github.com/menacher/java-game-server)你可以在这里得到一些好的指针和模式。也许您也可以直接将其用于您的目的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T19:12:04.813

Netty 可以完成这项工作。它非常适合高吞吐量和低延迟。所以我你应该试一试。我认为它应该为您“开箱即用”；）

Netty 带有 NIO（非阻塞）和 OIO（阻塞）实现。如果您要使用 NIO（我推荐），那么我建议您尝试将您的 api 设计为基于事件并使用尽可能少的线程。否则，如果您有数千个“游戏室”，则可能难以扩展。

# c# - 异步写入套接字线程是否安全？

> ID：10146588
> 
> 赞同：12
> 
> 时间：2012-04-13T18:47:17.870
> 
> 标签：c#, sockets, asynchronous, io, thread-safety

考虑`Socket.BeginSend()`方法。如果两个线程池线程同时调用此方法，它们各自的消息最终会相互混合还是套接字类会阻止这种情况发生？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-20T23:28:59.110

.NET Socket 实例不是线程安全的，因为同时调用某些方法（相同或不同的方法）可能会导致状态不一致。但是，**`BeginSend()`and`BeginReceive()`方法相对于它们自身来说是线程安全的**。

**对每个（或两者）都有多个未完成的调用是安全的。**

在 的情况下`BeginReceive()`，当数据按调用顺序可用时，它们将得到服务。例如，如果您的处理时间很长，但您希望其他接收尽快发生，这可能很有用。当然，在这种情况下，您的代码可能会同时处理多个收据，并且您可能需要自己的同步逻辑来保护您的应用程序状态。

在 的情况下`BeginSend()`，每次调用都会尝试将发送的数据推送到套接字缓冲区中，一旦在那里被接受，您的回调将被调用（您将调用的地方`EndSend()`）。如果任何调用没有足够的缓冲空间，它将阻塞。

注意：不要假设默认的 8k 缓冲区意味着“我可以`BeginSend()`用正好 8k 的数据快速调用，然后它会阻塞”，如下所示：

1.  8K 是一个“标称大小”的数字，缓冲区可能会缩小并有所增长

2.  当您排队等待 8K 的呼叫时，将在网络上发送数据，从而减少 8K 的排队数据

一般来说：

*   如果您`BeginSend()`在一个线程中多次调用，您可以确保发送将按照它们被调用的顺序离开机器。

*   如果您`BeginSend()`从多个线程调用，则无法保证顺序，除非您使用其他一些阻塞机制来强制实际调用以某种特定顺序发生。然而，每个调用都将在一个连续的网络字节流中正确发送其数据。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-13T18:58:53.583

我[在 MSDN 论坛上找到了一个类似的帖子](http://social.msdn.microsoft.com/Forums/en-US/netfxnetcom/thread/53aa930e-ce51-4993-a23b-040905aed46f/)，似乎可以回答您的问题。

> 1.  您可以同时对多个 BeginSend 进行排队。你不需要锁定

编辑：

更有趣的信息：

[如果您在 MSDN 文档 BeginSend() 的 Remark 部分](http://msdn.microsoft.com/en-us/library/38dxf7kt.aspx)向下滚动一点，您会发现可能与您相关的回调方法的有趣用法。

> [...] 如果您希望在调用 BeginSend 方法后阻止原始线程，请使用 WaitHandle.WaitOne 方法。[...]

# regex - 正则表达式在末尾抓取带有空格的字符串

> ID：10146589
> 
> 赞同：0
> 
> 时间：2012-04-13T18:47:18.833
> 
> 标签：regex

我正在尝试从 LOG 文件中的 URL 中提取一些数据，我几乎就在那里，但最后一部分我被困住了。

这是我到目前为止提出的正则表达式，

```
(\?.*\s+) 
```

我正在使用的 URL 示例

```
json?userId=1234&email=blahblah@blah.com HTTP/1.1 
```

我想退出

```
userId=1234&email=blahblah@blah.com 
```

跨越多行类似的 URL 行。上面的正则表达式在开始时得到正确的东西，但在空格之后不会停止。我错过了什么使它不包括？并在空白处正确结束？

编辑：澄清一点问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:50:05.827

我曾经这样做过：

```
\?([^ ]*) -> \1 
```

我不知道你的实现，但它在[http://regexpal.com/](http://regexpal.com/)上“工作” （这个测试器不能替换）

编辑：忘记了“？”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T18:59:54.613

这适用于 sed。

echo "json?userId=1234&email=blahblah@blah.com HTTP/1.1" | sed 's/.*?\(.*\)\s.*$/\1/

你也可以试试。(\?[^\s]+) 在 ? 之后匹配尽可能多的非空格字符

# android - Phonegap Cordova 同时触发：resume、deviceready

> ID：10146590
> 
> 赞同：0
> 
> 时间：2012-04-13T18:47:20.287
> 
> 标签：android, cordova, resume

为什么当我调用 navigator.app.loadUrl() 时，Android 上的 Phonegap 会触发这两个事件（设备就绪、恢复）？？？？

我在 Android 上使用 cordova-1.5.0。

loadUrl() 调用的页面有这个 javaScript：

```
<head>
<script type="text/javascript">
 function onDeviceReady() {
    alert('Ready');
}

function onLoad() {
    alert('onLoad');
    document.addEventListener("deviceready", onDeviceReady, false);
    document.addEventListener("resume", onResume, false);

}

function onResume() {
    alert('OnResume');   
}

</script>
</head>
<body onload="onLoad();"> 
```

我尝试使用 href.location 但不会调用“deviceready”。

有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T01:25:20.973

它被调用但不显示消息框。尝试重播警报

```
navigator.notification.alert("Ready"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T23:52:55.980

该版本的 Cordova 中有一个错误，已修复

# c - C 编程：跨 fork() 的受保护内存

> ID：10146592
> 
> 赞同：0
> 
> 时间：2012-04-13T18:47:25.697
> 
> 标签：c, fork, mmap, mprotect

我需要保护父页面免受子页面的影响

*   我尝试过在 mmap 中不使用带有 MAP_ANONYMOUS 标志和 fd = -1 的 shm_open。
*   我试过用 fchmod 保护底层内存。

我目前正在使用以下设置：

```
shm_unlink("/mymem");
int fd = shm_open("/mymem", O_RDWR | O_CREAT,0777);

printf("FD is :%d\n", fd);
ftruncate(fd, numberPages*getpagesize());

int *z = mmap(NULL, getpagesize()*numberPages, PROT_WRITE|PROT_READ, MAP_SHARED,fd,0);
printf("Memory is at : %p\n", z);

if(fork()){
   printf("Protecting %d\n",mprotect(z, getpagesize(), PROT_NONE));
   printf("(1)No issues, apparently\n");

   sleep(2);
   exit(1);
 }else{
   sleep(1);
   *z = 3;
   printf("(2)No issues, apparently\n");
   sleep(5);
   printf("Value of z: %d\n",*z);
 } 
```

我需要子进程能够保护页面（使用 mprotect 或其他方式），以便父进程无法再读取/写入页面。

收到的输出是：

```
FD is :3
Memory is at : 0xf581a000
Protecting 0
(1)No issues, apparently
(2)No issues, apparently
Value of z: 3 
```

当我期望（或者更确切地说，想要）在 *z = 3 行发生分段错误时。

不幸的是，孩子必须具有此功能，因为它还充当 TCP 服务器，并且将通过 TCP 连接接收阻止页面的请求（除非有另一种我没有想到的方法？）。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T19:21:49.423

当然，`mrotect()`在您的子进程中更改页面的权限是在子进程本身中，而不是在父进程中。这是记录在案的：

> mprotect() 更改***调用进程的***内存页的保护

（重点补充）

您的问题归结为如何更改另一个进程（而不是调用进程）的内存映射的权限。如果没有目标进程（要更改其内存映射的进程）的参与，我认为没有任何可移植的方式来做到这一点。我能想到的唯一方法是作为调试器附加到目标进程（`ptrace()`例如，参见 Linux）。这是一个复杂的解决方案。您是否考虑过向父进程发送消息（例如通过管道）以要求其`mprotect()`自行运行？

# javascript - jQuery中的CSS垂直居中

> ID：10146593
> 
> 赞同：0
> 
> 时间：2012-04-13T18:47:31.363
> 
> 标签：javascript, html, jquery, css

我在使用 CSS 垂直居中项目时遇到问题。如果有人可以在下面的代码中提出问题，我将不胜感激。

```
<head>
    <style>
        #container {
            height: 500px;
            background-color: yellow;
        }
        #test {
            height: 300px;
            background-color: blue;
            vertical-align: middle;
            margin: 0 auto;
        }
    </style>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <!-- <script type="text/javascript">

        function initialize() { /*
         $("div#container").css("background-color","yellow");
         $("div#container").height("500px");

         $("div#test").css("vertical-align","middle");
         $("div#test").css("background-color","blue");
         $("div#test").height("300px");
         */
         }
   </script>
   -->
</head>

<body onload="initialize()">
    <div id="container">
        <div id="test">test</div>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T19:11:01.273

## *[jsBin 演示](http://jsbin.com/apewiv/10/edit)*

（CSS `body{height:100%;}`：）

在这里，如果你想使用 jQuery，那么你肯定还需要一个 on window resize 函数：

```
function initialize() {
   var divH = $('#test').innerHeight()/2;
   var pageH = $(window).innerHeight()/2;
   $('#test').css({top: (pageH-divH)});
}

initialize();

$(window).on('resize',function(){
  initialize();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T19:03:13.563

根据[W3C](http://www.w3.org/)，垂直对齐规则可以采用以下值：

> *   **基线** 将框的基线与父框的基线对齐。如果框没有基线，则将底部边距边缘与父项的基线对齐。
> *   **将框的垂直中点** 与父框的基线加上父框 x 高度的一半对齐。
> *   **sub** 将框的基线降低到父框下标的正确位置。（此值对元素文本的字体大小没有影响。）
> *   **super** 将框的基线提高到父框上标的正确位置。（此值对元素文本的字体大小没有影响。）
> *   **text-top** 将框的顶部与父内容区域的顶部对齐（参见 10.6.1）。
> *   **text-bottom** 将框的底部与父级内容区域的底部对齐（参见 10.6.1）。
> *   **<percentage>** 将框升高（正值）或降低（负值）此距离（“行高”值的百分比）。值“0%”与“基线”的含义相同。
> *   **<length>** 将框升高（正值）或降低（负值）该距离。值“0cm”与“基线”的含义相同。

请参阅[http://www.w3.org/wiki/CSS/Properties/vertical-align#Values](http://www.w3.org/wiki/CSS/Properties/vertical-align#Values)和[http://www.w3.org/TR/CSS2/visudet.html#propdef-vertical-align](http://www.w3.org/TR/CSS2/visudet.html#propdef-vertical-align)

我也会在没有 jQuery 的情况下只使用 html 和 css，直到你确定你的 css 工作正常，然后在你确定你的 css 没问题时让 jQuery 为你的文档设置样式。

# java - 找不到共享库 (java.lang.UnsatisfiedLinkError)

> ID：10146595
> 
> 赞同：0
> 
> 时间：2012-04-13T18:47:44.680
> 
> 标签：java, eclipse

我需要在另一台笔记本电脑上运行我的 Eclipse 项目。运行代码时出现以下错误：

**线程“主”java.lang.UnsatisfiedLinkError 中的异常：找不到共享库 C:\Archivos de programa\ECLiPSe 6.0\lib\i386_nt\ec_java_load.dll。**

如何配置“ec_java_load.dll”的正确路径？它应该是“C：\ Program Files ...”而不是当前的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:00:14.270

在移动 Eclipse 项目时，我经常看到这一点。我还看到您的错误字符串中提到了 eclipse，所以我认为我走在正确的轨道上。

要解决此问题，您必须进入项目设置 - 构建路径，删除旧的非工作库并为您所在的环境添加正确的库

# zend-framework - isValid 在 zend 框架形式中返回 FALSE

> ID：10146596
> 
> 赞同：10
> 
> 时间：2012-04-13T18:47:49.003
> 
> 标签：zend-framework, zend-form

我有 zend 框架控制器。在 init 方法中，我创建一个表单并在下拉框中填写

```
$form = new FORM_NAME();
$form->getElement('ZdGroup')->addMultiOptions($zendesk_groups); 
```

然后在行动中我检查

```
$formData = $this->getRequest()->getParams();
    if ($form->isValid($formData)) {
        ...
} 
```

但是 如果我删除这一行 ，它就会`isValid()`返回。`FALSE``$form->getElement('ZdGroup')->addMultiOptions($zendesk_groups);``TRUE`

我不明白为什么，有人有想法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-14T03:05:06.460

要回答“为什么”的问题，您是否已转储表单错误消息？

```
$form->getMessages(); //error messages
$form->getErrors(); //error codes
$form->getErrorMessages(); //any custom error messages 
```

这至少可以让您更好地了解“为什么”。

# php - apache php 虚拟主机

> ID：10146605
> 
> 赞同：1
> 
> 时间：2012-04-13T18:48:46.590
> 
> 标签：php, apache, virtualhost, virtual-hosts

我正在尝试在我的系统中实现虚拟主机。

我为此使用了以下代码。

```
NameVirtualHost *:80
<VirtualHost *:80>
    ServerAdmin webmaster@dummy-host.example.com
    DocumentRoot "/Users/shanker/Documents/content_booking/"  
    ServerName content.boking
    Alias /booking "/Users/shanker/Documents/content_booking/public/"
</VirtualHost> 
```

我也将主机文件更新为

127.0.0.1 content.booking

但我收到以下错误：

```
---------------------------------------------------------
Access forbidden!

You don't have permission to access the requested directory. There is either no index document or the directory is read-protected.

If you think this is a server error, please contact the webmaster.
Error 403
--------------------------------------------------------- 
```

任何人都可以解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T22:12:11.880

首先在 Apache 中检查您的 httpd.conf 文件并确保虚拟主机已打开。（删除“#”以打开/取消注释）。

```
 #Virtual hosts
 Include conf/extra/httpd-vhosts.conf 
```

接下来使用一些`Directory`选项更新您的 vhosts 文件。

```
<VirtualHost *:80>
ServerAdmin webmaster@dummy-host.example.com
DocumentRoot "/Users/shanker/Documents/content_booking/"  
ServerName content.boking
<Directory "C:/Users/shanker/Documents/content_booking/">
  Options Indexes FollowSymLinks ExecCGI
  AllowOverride All
  Order allow,deny
  Allow from all
</Directory>
Alias /booking "/Users/shanker/Documents/content_booking/public/" 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T18:59:09.063

您的 ServerName 带有一个“o”，您的主机文件条目带有“oo”（两个）。

一旦你修复了那个错字，它会起作用吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T19:05:37.327

如果您没有在目录中包含 index.[html|htm|php]，则默认操作可能是列出该目录中的所有文件或更常见的安全性，以引发此错误。

[http://127.0.0.1/](http://127.0.0.1/)导致 Apache 查找 index.[html|htm|php] 文件，如果没有，并且您的安全性不允许列出目录（它不应该列出），则此是错误。

在正确的目录中创建一个 index.html 文件，看看是否有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T19:03:25.783

OS X 的权限等已设置（开箱即用）以提供 Web 文档，`/Users/shanker/Sites`因此，如果这是与权限相关的问题，您可以尝试将代码移至`/Users/shanker/Sites/content_booking/`目录并更新`DocumentRoot`指令以避开任何权限问题.

# mysql - 在mysql中查找平均列的总和

> ID：10146606
> 
> 赞同：1
> 
> 时间：2012-04-13T18:48:47.223
> 
> 标签：mysql, aggregate-functions

我如何找到平均值的总和？例如：

```
select avg(app_loan_amnt) 
from receipt_history
union 
select sum(avg(app_ln_amnt)) 
```

*我知道最后一个联合声明是不正确的，但我该怎么做呢？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T19:07:20.993

如果我理解正确，您想要：

1.  以某种方式对数据进行分组时，获得某个值的平均值
2.  将这些平均值相加

您可以使用子查询来完成此操作：

```
select
  sum(group_avg) as total
from (
  select avg(<some_value>) as group_avg
  from receipt_history
  group by <column>
) q; 
```

您需要填写平均数据以及数据分组方式。

# javascript - 在 JSP 页面中从 Javascript 调用 Applet 方法

> ID：10146614
> 
> 赞同：0
> 
> 时间：2012-04-13T18:49:20.507
> 
> 标签：javascript, jsp, applet

我一直在尝试在 JSP 页面中嵌入一个小程序来调用一些需要的方法。小程序已正确初始化，但方法调用不起作用。

使用 HTML，类似的示例运行良好，但使用 JSP，方法调用似乎不起作用。

这是我的 JS 函数：

```
function myFunc() {
  alert('begin');
  (document.applets['MyApplet'].getName1()); 
  alert("done");
  return true;
} 
```

这是 JSP 部分：

```
<body >
<script src="http://www.java.com/js/deployJava.js"></script>
<button onclick="return myFunc();" >button</button>
<jsp:plugin align="middle" height="500" width="500" type="applet"  code="MyClass.class"  
name="MyApplet" codebase="."/>
</body> 
```

我尝试过使用小程序标签，但它也不起作用。如果有人对此有任何经验，那将非常有帮助。

谢谢你。

# ruby-on-rails - 运行初始化程序，除了 rake 任务

> ID：10146615
> 
> 赞同：8
> 
> 时间：2012-04-13T18:49:20.970
> 
> 标签：ruby-on-rails, rake

这个问题的反面：[仅为 Rake 任务运行初始化程序](https://stackoverflow.com/questions/4323632/run-initializer-only-for-rake-tasks)

是否可以在 rake 任务期间排除初始化程序？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-15T19:31:20.350

您可以将初始化程序包装在这样的块中：

```
unless ( File.basename($0) == 'rake')
   # Initializer code
end 
```

直接来自这个答案：[https ://stackoverflow.com/a/24159563/1867481](https://stackoverflow.com/a/24159563/1867481)

# ruby-on-rails - 获取按唯一字段值分组的最新行

> ID：10146625
> 
> 赞同：3
> 
> 时间：2012-04-13T18:49:54.677
> 
> 标签：ruby-on-rails, postgresql, activerecord

我有一个带有`author_id`字段的书籍表。

我想获取一组书籍，其中仅包含每位作者的一本书。具有最新`updated_at`字段的那个。

像 Postgres 这样的直接方法的问题`Books.all.group('author_id')`是它需要在其`GROUP BY`块中的所有请求字段。（见[https://stackoverflow.com/a/6106195/1245302](https://stackoverflow.com/a/6106195/1245302)）

但是我需要为每个作者获取所有 Book 对象，最近的一个，忽略所有其他字段。在我看来，DBMS 有足够的数据来准确找到我想要的行，至少我可以自己做到这一点，而无需任何其他字段`GROUP BY`。:)

是否有任何简单的 Rails 3 + Postgres（版本 < 9）或独立于 SQL 实现的方法来获得它？

**更新** Postgres 的不错的解决方案：

```
books.unscoped.select('DISTINCT ON(author_id) *').order('author_id').order('updated_at DESC') 
```

但！仍然存在问题 - 结果`author_id`首先排序，但我需要`updated_at`在相同的`author_id`-s 内排序（例如，查找前 10 位最近的书籍作者）。

而且 Postgres 不允许您更改查询中的`ORDER BY`参数顺序`DISTINCT`:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:30:05.893

我不了解 Rails，但希望向您展示您想要的 SQL 将帮助您找到一种生成正确 SQL 的方法。

```
SELECT DISTINCT ON (author_id) *
  FROM Books
  ORDER BY author_id, updated_at DESC; 
```

该`DISTINCT ON (author_id)`部分不应与结果列列表的一部分混淆——它只是说每个 author_id 将有一行。子句中的列表`DISTINCT ON`必须是`ORDER BY`此类查询中子句的前导部分，并且保留的行是根据子句的*其余部分*首先排序的行`ORDER BY`。

对于大量行，这种编写查询的方式通常比任何基于`GROUP BY`或窗口函数的解决方案快得多，通常快一个数量级或更多。不过，它是 PostgreSQL 扩展；所以它不应该用在旨在可移植的代码中。

如果您想在另一个查询中使用此结果集（例如，查找 10 个最近更新的作者），有两种方法可以做到这一点。您可以使用子查询，如下所示：

```
SELECT *
  FROM (SELECT DISTINCT ON (author_id) *
          FROM Books
          ORDER BY author_id, updated_at DESC) w
  ORDER BY updated_at DESC
  LIMIT 10; 
```

您也可以使用 CTE，如下所示：

```
WITH w AS (
  SELECT DISTINCT ON (author_id) *
    FROM Books
    ORDER BY author_id, updated_at DESC)
SELECT * FROM w
  ORDER BY updated_at DESC
  LIMIT 10; 
```

关于 CTE 的通常建议在这里成立：仅在没有其他方式编写查询或需要通过引入优化障碍来强制规划器时使用它们。这些计划非常相似，但通过 CTE 扫描传递中间结果会增加一点开销。在我的小型测试集上，CTE 表格慢了 17%。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-17T19:18:44.860

这是迟到的，但在回答有关覆盖/重置默认顺序的问题时，请使用`.reorder(nil).order(:whatever_you_want_instead)`

（我无法发表评论，所以现在发布作为答案）

# text - 简单的 html dom 和文本

> ID：10146631
> 
> 赞同：0
> 
> 时间：2012-04-13T18:50:18.857
> 
> 标签：text, simple-html-dom

假设一个简单的 html dom 对象包括以下内容

```
text1
<br />
<br />
<br />
text2
<br /> 
```

如何使用简单的 html dom 获取任一文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T01:49:28.417

要获取所有纯文本元素，您可以使用以下命令：

```
$string="text1
<br />
<br />
<br />
text2
<br />";

$html = str_get_html($string);
$texts=$html->find('text');
foreach($texts as $elem_index => $text){
    echo $elem_index."=>".$text."<br>";
} 
```

您的输出应如下所示：

```
0=>text1
1=>
2=>
3=> text2 
```

在 foreach 循环中，您显然可以进行所需的任何过滤。例如，如果您要查找与特定字符串匹配的文本，您可以简单地执行以下操作：

```
if (trim($text) == "text2")
    //do something 
```

所以，如果你想替换找到的文本，你可以使用：

```
if (trim($text) == "text2")
    $texts[$elem_index]->innertext = "something else";
$html->save(); 
```

并将`$html`包含新的 html。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-30T06:06:40.513

**只需使用纯文本从html**获取文本值。

```
$opts = array(
'http' => array(
    'method' => "GET",
    'header' => "Accept-language: en\r\n" .
        "User-Agent:    Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; 
         rv:1.9.1.6) Gecko/20091201 Firefox/3.5.6\r\n" .
        "Cookie: foo=bar\r\n"
     )
  );

$context = stream_context_create($opts);

$html1 = new simple_html_dom();
$html1->load_file($url, false, $context);
$appName1 = $html1->find('tagname.classname or id', 0)->plaintext; 
```

类使用 ( `tagname.classname`) 和 id 使用 ( `tagname#id`) 来获取文本。

如果任何网站获得移动版本，$context 用于设置浏览器支持的标题，因此您可以添加标题以获取浏览器支持内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T20:06:18.377

使用 jquery 尝试 $(document.body).contents();

这应该是一个节点数组，其中 text1 和 text2 作为文本节点。

# c++ - 当多个 Python 模块共享一个 C++ .so 时捕获 C++ 异常

> ID：10146632
> 
> 赞同：2
> 
> 时间：2012-04-13T18:50:19.000
> 
> 标签：c++, exception-handling, cpython

我有一段结构如下的python代码：

```
import A
import B

A.throw()
B.throw() 
```

两者都是用 C++ 编写的模块`A`。`B`当我编译它们时，它们都链接到一个公共库`exception.so`，其中包括一个异常和一个引发它的函数：

```
class MyException {};
void raise_exception() {
    throw MyException(); 
} 
```

和文件在 python 包装函数`A.cxx`中`B.cxx`包含以下行`throw()`：

```
try {
    raise_exception(); 
} catch (const MyException& ) { 
    std::cout << "caught" << std::endl; 
} 
```

一切都编译得很好，两者都`A`可以`B`自己正常工作。

当我加载两个模块时发生了奇怪的事情：该异常仅被`A`if`import A`首先捕获。同样，只有在首先加载`B`时才能捕获异常。`B`我需要两个模块同时工作，显然我希望在 C++ 例程中捕获 C++ 异常，这样它们就不会终止覆盖的 python 脚本。关于如何做到这一点的任何想法？

**编辑：**可能可以包含`raise_exception()`在 python [capsule](http://docs.python.org/extending/extending.html#using-capsules)中，但这似乎有点过分，因为它`exception.so`从未作为 python 模块加载（但是，它确实使用了 libpython.so 中的一些代码）。鉴于许多 python 模块使用系统头文件，似乎包含一个用户构建的 C++ 库将是微不足道的。

# c - 处理结构数组时出现分段错误

> ID：10146637
> 
> 赞同：0
> 
> 时间：2012-04-13T18:50:49.997
> 
> 标签：c

我创建了一个结构，它有它的 id 号、它的值和它的状态。我有一个由数据组成的文件（1 199 0 2 199 1...）1 它的数字，199 是值，0 是状态并继续这样......我使用了 1 个名为 filldata（ ) 一次读取 3 个数字，例如 1 199 0，然后将其放入结构数组的传递元素中。然后，我使用另一个函数调用 this 函数来填充结构数组。fillAll 函数会将已从文件复制到结构数组的数据集返回但我收到了分段错误。知道为什么吗？代码解释得更好：

```
int filldata(struct Data_point *a, const char *filelocation)  
    {

        FILE *f;
        if((f=fopen(filelocation,"r"))==NULL)
            printf("You cannot open");

        if( fscanf(f, "%ld%lf%d", &(a->sampleNumber), &(a->value), &(a->status)) == 3)
            return 1;   
        else
            return 0;
    }

    int fillAll(struct Data_point *a, const char *filelocation)// I will pass the struct array and the location of my file string
    {
        int index=0;
        while(filldata(&a[index], filelocation))
            index++;

        return index;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T19:12:58.173

您反复打开文件名`filelocation`但从不关闭文件句柄`f`。您将一遍又一遍地阅读第一行并最终用完文件句柄。

您可以更改填充数据以获取文件指针检查下面的片段我添加了一些额外的检查，您还需要`size of Data_point *a`在填充时检查分配范围内

```
int filldata(struct Data_point *a, File *f) 

    if( fscanf(f, "%ld%lf%d", &(a->sampleNumber), &(a->value), &(a->status)) == 3)
        return 1;   
    else
        return 0;
}

int fillAll(struct Data_point *a, const int data_point_size,const char *filelocation)// I will pass the struct array and the location of my file string
{

    FILE *f;
    if((f=fopen(filelocation,"r"))==NULL) {
        printf("You cannot open");
       return 0;
    }

    int index=0;
    while(index < data_point_size &&  filldata(&a[index]))  {
        index++;
    } 
    fclose(f);
    return (index != data_point_size);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T19:22:13.510

由于您的 while 循环，您遇到了分段错误。在填充数据返回 0 之前，它永远不会停止。在此之前，您的程序在传递 &a[index] 时已经越过了数组边界。另外，我相信无法保证 filldata 会在发生这种情况时返回 0，因为程序将首先尝试访问 fscanf() 中的超出范围的内存，从而导致运行时错误或获取垃圾值并将其视为成功。

如果我错了，请纠正我。

# javascript - $(someelement).text().length 和计数字符编码？

> ID：10146638
> 
> 赞同：4
> 
> 时间：2012-04-13T18:50:54.447
> 
> 标签：javascript, jquery

可以说我有这个。

```
<div id="somediv"> 
hello, my friend&#39;s &amp; dog are good friends!
</div> 
```

我认为这`$(somediv).text().length`是计算编码而不是渲染视图。如果字符串太长，我会对字符串进行一些截断，并且因为某些字符串（动态）可能有`&amp;`（而不是 & ），我如何正确计算 a`div`在其渲染视图中的总文本，而不是编码视图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T18:56:40.710

`length`将把`&amp;`和相似的字符计为一个字符。可能导致混乱的是，您还将在字符串之前和之后获得空格。如果你修剪它，你会发现它是正确的。

[http://jsfiddle.net/u3byj/](http://jsfiddle.net/u3byj/)

```
$.trim($(somediv).text()).length 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T19:01:13.967

如果没有可用的 jQuery，您可以执行以下操作：

```
innerHTML.replace(/&(#x?[0-9a-f]+|[a-z]+);/gi,"X").length; 
```

# malloc - strlen of char* malloc

> ID：10146642
> 
> 赞同：2
> 
> 时间：2012-04-13T18:51:15.413
> 
> 标签：malloc, strlen

我有以下代码

```
char *new_str;
int size_in_bytes;
int length;

size_in_bytes = 2*sizeof(char);
new_str = (char *)malloc(size_in_bytes);
length = strlen(new_str); 
```

期望长度为2，实际上是16。有人可以解释为什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T18:59:30.930

strlen() 返回第一个空字节 ('\0') 的索引，从您传递的地址开始。C 中的字符串通常总是以这个字符结尾，以标记字符串的结尾。

strlen() 不返回实际内存块的长度。

在您的示例中，内存未初始化，并且 strlen() 正在读取内存块的末尾并进入程序堆的其他部分，直到找到一个空字节。

# sql-server-2008 - 每个组 SQL Server 的前 n 个平均值

> ID：10146643
> 
> 赞同：2
> 
> 时间：2012-04-13T18:51:19.080
> 
> 标签：sql-server-2008, group-by, average, top-n

我正在解决寻找平均处理时间的问题。我试图通过仅对最好的 80% 数据进行平均来消除异常数据。

我正在努力调整现有的每组前 N 个解决方案以执行每组的平均。使用 SQL Server 2008。

以下是该表的示例：

```
 OpID  |  ProcessMin  |  Datestamp
    2     |  234         |  2012-01-26 09:07:29.000
    2     |  222         |  2012-01-26 10:04:22.000
    3     |  127         |  2012-01-26 11:09:51.000
    3     |  134         |  2012-01-26 05:02:11.000
    3     |  566         |  2012-01-26 05:27:31.000
    4     |  234         |  2012-01-26 04:08:41.000 
```

我希望它为**每个**OpID 取最低 80% 的 ProcessMin，并取该数组的平均值。任何帮助，将不胜感激！

*** 更新 ***

给定下表：

```
OpID  ProcessMin   Datestamp
602   33           46:54.0
602   36           38:59.0
602   37           18:45.0
602   39           22:01.0
602   41           36:43.0
602   42           33:00.0
602   49           03:48.0
602   51           22:08.0
602   69           39:15.0
602   105          59:56.0
603   13           34:07.0
603   18           07:17.0
603   31           57:07.0
603   39           01:52.0
603   39           01:02.0
603   40           40:10.0
603   46           22:56.0
603   47           11:03.0
603   48           40:13.0
603   56           25:01.0 
```

我希望这个输出：

```
OptID   ProcessMin
602     41
603     34.125 
```

请注意，由于每个 OpID 有 10 个数据点，因此它只会平均最低的 8 个值 (80%)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T19:27:10.373

您可以使用[ntile](http://msdn.microsoft.com/en-us/library/ms175126.aspx)

```
select OpID,
       avg(ProcessMin) as ProcessMin
from
  (
    select OpID,
           ProcessMin,
           ntile(5) over(partition by OpID order by ProcessMin) as nt
    from YourTable
  ) as T
where nt <= 4
group by OpID 
```

[SE-数据](https://data.stackexchange.com/stackoverflow/query/66746/average-of-top-n-per-group-sql-server)

如果 ProcessMin 是一个，`integer`你可以做得到`avg(cast(ProcessMin as float)) as ProcessMin`十进制平均值。

# java - 当 JUnit 类有多个导入时，如何从 Windows CMD 窗口运行 JUnit 测试？

> ID：10146647
> 
> 赞同：0
> 
> 时间：2012-04-13T18:51:43.573
> 
> 标签：java, selenium, junit, classpath

这是我的 JUnit 测试类：package com.bynarystudio.tests.storefront；

```
import java.util.List;

import org.junit.Assert;
import org.junit.Test;
import org.openqa.selenium.By;
import org.openqa.selenium.WebElement;

import com.bynarystudio.tests.BaseWebTest;

public class SmokeTests extends BaseWebTest {

@Test
public void StoreFrontMegaNavTest(){
    webDriver.get(default_homepage);

    String source = webDriver.getPageSource();

    Assert.assertTrue(source.contains("some text"));    
}
} 
```

如何从命令行运行此测试？当我尝试使用从其目录中运行它时

```
java -cp junit.textui.TestRunner SmokeTests.java 
```

我收到以下错误

```
Could not find the main class: SmokeTests.java.  Program will exit. 
```

我认为这与我的类路径设置不正确有关。但我不知道，因为我是 Java 新手。来自 .NET、C# 和 Visual Studio，整个类路径毫无意义。即使我已将所有文件正确添加到 Eclipse 中的项目中（我知道是因为测试在 Eclipse 内部运行良好），但它绝对不会从命令行运行或编译。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T19:27:52.897

首先，你混合了两件事：

1.  首先，您必须使用 javac 命令编译项目。结果，您将获得一组 .class 文件（不是 .java -> 这是源代码）

2.  然后您可以使用 java 命令运行代码： java -cp classPath yourpackage.SmokeTests

在哪里：

*classPath* - 是您编译的类所在的目录或 jar 文件的列表，如果您使用“;”将它们分隔开多个条目 （Windows）或“：”（Linux）

所以你的classPath可以是： -cp .;c:/jars/*;deps

这意味着您的类路径将包含：

*   当前目录
*   来自 c:/jars/* 的所有 jar 文件
*   工作目录中的 deps 目录中的所有 jar 文件

所以完整的命令可以是：

java -cp .;c:/jars/*;deps SmokeTests

*yourpackage* - 是 SmokeTests 类的包，如果您没有在 SmokeTests.java 中定义包，请将其留空

# c++ - 为什么睡眠功能会禁用我的互斥锁

> ID：10146650
> 
> 赞同：0
> 
> 时间：2012-04-13T18:51:53.620
> 
> 标签：c++, windows, multithreading, winapi, mutex

我在 redKyle 的教程中找到了显示如何使用线程的在线代码。在“竞争条件”教程中，他基本上展示了如何将两个线程发送到一个函数。该函数的目标是打印 '.' 和 '#' 依次排列一百次。他提供了使它工作的代码，他没有提供互斥锁的代码。我已经修改了代码以包含互斥锁，以防止一个线程访问保存打印的最后一个字符的变量，而另一个线程正在访问它。我得到了工作的代码。伟大的！但是，我一直在 1 到 50 之间更改睡眠值。互斥锁代码工作正常。然而，

以下是代码：

```
#include "stdafx.h"

#include <iostream>
#include <windows.h>
using namespace std;

static char lastChar='#';

//define a mutex
HANDLE mutexHandle = NULL;

//flag to specify if thread has begun
bool threadStarted = false;

void threadProc(int *sleepVal, int *threadID)
{

    cout<<"sleepVal: "<<*sleepVal<<endl;

    for (int i=0; i<100; i++)
    {

        char currentChar;

        threadStarted = true;

        while(!threadStarted){}

        //lock mutex
        WaitForSingleObject(mutexHandle, INFINITE);

        if (lastChar == '#')
            currentChar = '.';
        else
            currentChar = '#';

        Sleep(*sleepVal);

        lastChar = currentChar;

        ReleaseMutex(mutexHandle);

        threadStarted = false;

        //      cout<<"\nSleepVal: "<<*sleepVal<<" at: "<<currentChar;
        cout<<currentChar;
    }//end for
}//end threadProc

int main()
{
    cout<<"Race conditions by redKlyde \n";

    int sleepVal1 = 50;
    int sleepVal2 = 30;

    //create mutex
    mutexHandle = CreateMutex(NULL, false, NULL);

    //create thread1
    HANDLE threadHandle;
    threadHandle = CreateThread(NULL, 0, (LPTHREAD_START_ROUTINE) threadProc, &sleepVal1, 0, NULL);

    //create thread2
    HANDLE threadHandle2;
    threadHandle2 = CreateThread(NULL, 0, (LPTHREAD_START_ROUTINE) threadProc, &sleepVal2, 0, NULL);

    WaitForSingleObject(threadHandle, INFINITE);
    WaitForSingleObject(threadHandle2, INFINITE);

    cout<<endl<<endl;

    CloseHandle(mutexHandle);

    system("pause");

    return 0;

} 
```

所以我的问题是：为什么将睡眠设置为 0 会使互斥代码无效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:56:14.453

请注意，您的打印语句不受互斥锁的保护，因此一个线程可以自由打印，而另一个线程可以自由修改。通过不休眠，您允许调度程序根据线程的数量来确定打印顺序。

有一些地方不对：

1）你不应该睡在一个持有的锁里。这几乎是不正确的。2）任何你的数据被共享的地方，你应该用锁守卫。这意味着打印语句也应该处于锁定状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T17:21:41.890

此外，作为将来使用互斥的提示，在 Windows 上，最好的用户模式互斥锁是 SRWLock，然后是 CriticalSection。使用基于句柄的同步对象要慢得多。

# algorithm - 如何检查网格上选定的单元格是否形成“隧道”？

> ID：10146654
> 
> 赞同：0
> 
> 时间：2012-04-13T18:52:07.513
> 
> 标签：algorithm, language-agnostic, grid

给定一个网格图，其中每个单元格可以用一对来描述`(x, y)`，以及这些单元格的向量，我如何（很好地）检查该向量中的单元格是否形成“隧道”，即。它们都是*垂直*排列还是水平排列？但是，如果我只想查看它们中的*大多数*是否排成一列（而不是*全部*）怎么办？

```
All are lines up             Most are lined up      Not lined up

                             C                       C C C
 C C C C C C C C             C C C C C C C C         C   C C C
                                 C                   C C C C
                                                         C C 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T19:01:25.127

您可以制作单元格的 x 和 y 坐标的直方图。如果所有单元格水平排列，则在直方图中您只会得到一个 y 值和许多连续的 x 值，这些都只出现一次。垂直与 x 和 y 翻转相同。

如果要检查，如果它们中的大多数都排成一行，请在直方图中搜索出现次数最多（可能的隧道最长）的值，并检查具有该 x 或 y 坐标的单元格，如果它们排成一行（也就是说：它们的 y 或 x 坐标（取决于上一步中使用的是 x 还是 y）是连续的，没有间隙（可能首先对它们进行排序））如果不是，则搜索第二高的出现值，.. .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T18:58:47.143

您可以通过首先检查它们的`y`坐标是否相等来检查它们是否构成水平隧道，然后按`x`坐标排序并从左到右遍历以检查间隙。使用相反的坐标检查垂直隧道。

对于近似检查，您必须澄清“大多数”的含义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T19:05:36.593

您可以计算 X 和 Y 坐标的[标准偏差](http://en.wikipedia.org/wiki/Standard_deviation)。您的单元格越“隧道”，X 或 Y 的标准偏差就越低。

例如，在 Python 中：

```
import numpy

def is_tunnelled(cells):
    # given cells=[(x,y), (x,y),...]
    x_values, y_values = zip(*cells)
    lowest_std_dev = min(numpy.std(x_values), numpy.std(y_values))
    return lowest_std_dev < STD_DEVIATION_THRESHOLD 
```

由您决定 STD_DEVIATION_THRESHOLD 的值应该是多少。

# android - 如何将我的数据库加载到我的网站以在我的 android 应用程序中使用？

> ID：10146659
> 
> 赞同：1
> 
> 时间：2012-04-13T18:52:20.360
> 
> 标签：android, database, sqlite, web

好的，我正在学习在 android 中使用数据库，并遵循了几个教会了我很多的教程，现在我知道如何在第一次安装和打开应用程序时包含预填充的数据库并将其复制到应用程序，在列表视图中显示其内容。我已经使用 SQLite 数据库浏览器创建了数据库，所以我的问题是如何不将这个预填充的数据库包含在我的应用程序资产文件夹中，而是将它上传到我的网站并从那里获取它，以便我可以在那里更新数据库而不是每次数据库中的项目更改时都必须更新应用程序？我可以继续使用 SQLite 数据库浏览器来创建我的数据库吗？非常感谢您的任何评论，如果您可以分享一个可以帮助我完成此任务的教程，也非常受欢迎。提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T03:10:59.333

我的解决方案来自 YouTube 和 mimirsoft 的一些教程。第一次我使用 mysql 向导创建了一个数据库，第二次在 phpadmin 中我创建了一个包含我在应用程序中需要的所有信息的表第三次创建了一个 php 文件，该文件从数据库中查询数据并创建一个我可以从我的应用程序调用的 json 字符串. 第 4 在我的应用程序中，我从 ky 网站创建了对 php 文件的调用，设置了一个适配器和持有者，以便在我的列表视图中显示信息。就是这样！如果想实现类似的要求，它可以工作，我可以提供一些代码。另外，您可以查看下一个链接，您可以在其中找到有关此主题的 mimirsoft 教程。第 1 部分[http://m.youtube.com/watch?v=P3CwlckiLTU](http://m.youtube.com/watch?v=P3CwlckiLTU)第 2 部分 [http://m.youtube.com/watch?v=HTIYt07NDRo](http://m.youtube.com/watch?v=HTIYt07NDRo)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T21:07:46.563

生成一个 sqlite 转储文件并将其导入数据库，替换必要的表和数据。

这是我在 Web 应用程序中所做的，而不是本机应用程序，但它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T21:26:38.550

有几种方法可以做到这一点。

一种方法是让 SQLite 数据库位于您的 Web 服务器上。然后，您可以进行某种检查，看看它是否与您设备上已有的数据库不同。例如，也许您的服务器上也有一个文本文件，其中有一行，即数据库的版本。在您的数据库中，您可能有一个表，其中一行包含您当前的本地版本。然后，您可以在数据库中查询版本并将其与文本文件中的版本进行比较。如果本地数据库版本小于文本文件中列出的版本，则废弃本地版本并获取新版本。

您可以通过执行以下操作来读取远程文件：

```
URL myFileURL = null;
InputStream is = null;
String version = "";
try {
    myFileURL = new URL("http://www.mywebsite.com/dbversionfile.txt");
    is = myFileURL.openStream();
    BufferedReader br = new BufferedReader(new InputStreamReader(is, "UTF-8"));
    String line = "";
    while((line = br.readLine()) != null) {
        version = line;
    }
} catch (Exception e) { } 
```

比这更好的解决方案是在应用程序中包含数据库的骨架版本。只是一个包含所有适当表的空数据库。然后，您可以与 Web 服务器上的 PHP/Java/etc 页面进行通信，并获取数据库中当前不存在的任何数据的 JSON 字符串。如果选择此方法，您可能希望在数据的每一行中包含时间戳。这样，您可以在设备本地数据库上查询具有最新时间戳的行。如果此时间戳小于从服务器上的数据库返回的 1，则返回大于 JSON 格式的所有行。

如果您想使用此方法，您可能需要研究 Android JSONObject 类。

我敢肯定还有其他方法。

# objective-c - 滚动表格视图时点击后退按钮时应用程序崩溃

> ID：10146660
> 
> 赞同：4
> 
> 时间：2012-04-13T18:52:22.527
> 
> 标签：objective-c, ios, uitableview, crash

我在带有后退按钮的导航视图中呈现模式表视图。后退按钮向模态视图的委托发送消息以关闭模态视图。如果我滚动表格视图，然后在表格视图仍在滚动时点击导航栏上的后退按钮，应用程序将崩溃并显示以下消息：

```
*** -[UILayoutContainerView setUseFastMode:]: message sent to deallocated instance 0xef74650 
```

当我 PO 0xef74650 我得到这个：

```
(int) $1 = 251086416 [no Objective-C description available] 
```

以前有人经历过吗？什么是解决方法或修复？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T23:10:11.720

我相信这是 iOS 5.1 中的一个错误，在动画解除当前正在滚动的模式时会发生。我收到用户报告说我的应用程序崩溃了，当我调查时我遇到了同样的错误。

我用最少的代码/视图创建了一个新项目，并且能够重现这个崩溃。到目前为止，我发现的唯一解决方法是在关闭模式时禁用动画。我已经向 Apple 提交了错误报告。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T14:26:57.090

我有一个类似的问题，如果表格仍在滚动，我的应用程序会崩溃，并且我触发了一个模式视图以显示在表格上方。我的实例中发生了崩溃`cellForRowAtIndexPath`，indexPath 已被释放。

我通过停止滚动方法来修复它`viewWillDisappear`： -

```
- (void) viewWillDisappear:(BOOL)animated {
    [self.tableView setContentOffset:self.tableView.contentOffset animated:NO];
} 
```

希望这可以帮助研究相关问题的人！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T06:57:04.797

iOS 5 在 UIView 上的 FastModeAdditions 类别中有一个错误。如果您有一个滚动视图的子视图，该子视图在与模态视图控制器被解除的相同运行循环中滚动，则会出现此错误。

```
 Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0xa0000008
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libobjc.A.dylib                 0x34bdef78 objc_msgSend + 16
1   UIKit                           0x35309f9e -[UIView(FastModeAdditions) _setContainerLayoutViewForFastMode:] + 98
2   UIKit                           0x351701cc -[UIView dealloc] + 568
3   UIKit                           0x3545a39e -[UIDropShadowView dealloc] + 86
4   libobjc.A.dylib                 0x34be016e _objc_rootRelease + 30
5   CoreFoundation                  0x32b882e0 CFRelease + 88 
```

我们发现最好的解决方法是执行Selector:afterDelay: 解雇。这会强制在以后的运行循环中解除，并且不再发生崩溃。

这在 iOS 6 上不会发生。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T23:43:59.230

检查`setUseFastMode:`以确保您没有发布您稍后尝试访问的内容。

```
[someObject release]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T15:26:42.227

当我点击模态框内的一个按钮时，我正在关闭一个模态框，如果它的表格仍在滚动，则会出现此崩溃。这是不正确的：在将关闭代码移动到呈现视图控制器并将其作为委托方法的一部分调用后，不再发生崩溃。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-24T01:54:07.143

这对我有用：

```
NSIndexPath *myIP = [NSIndexPath indexPathForRow:0 inSection:0]
[self.tblChildProducts scrollToRowAtIndexPath:myIP atScrollPosition:UITableViewScrollPositionTop animated:NO]
[self dismissModalViewControllerAnimated:YES] 
```

^([@Slee 2012 年](https://stackoverflow.com/questions/10146660/app-crashes-when-back-button-tapped-while-scrolling-table-view#comment13948054_10307268)5 月 24 日 11:18)

# wpf - WPF 数据上下文场景

> ID：10146662
> 
> 赞同：0
> 
> 时间：2012-04-13T18:52:33.013
> 
> 标签：wpf, mvvm-toolkit

我使用此数据绑定语句在 XAML 代码（数据网格）中有一个用户控件：

```
<WpfToolkit:DataGrid ItemsSource="{Binding Path=MyCollection}" x:Name="lvItems" 
```

我在演示者类中使用此用户控件，我在其中创建了模型视图类并将数据上下文设置为视图中的对象

...所以 MyCollection 对象是在可能视图类中定义的，而不是在我的控件后面的代码中

但我想从代码隐藏中访问这个 MyCollection 属性，因为我想实现一个按钮事件来过滤我的集合源

如何在代码隐藏中访问 MyCollection 或我错了...？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T19:42:11.597

也许是这样的？

把它放在你的按钮点击事件或按钮命令中

```
var yourModelView = this.DataContext as IYourModelView;
if (yourModelView != null) {
  var yourColl = yourModelView.MyCollection;
  // do something with this collection
} 
```

**编辑**

```
public IYourModelView
{
  ICollection MyCollection {get; set;}
}

public class YourModelView1 : IYourModelView
{}

public class YourModelView2 : IYourModelView
{} 
```

希望这可以帮助

# c# - 代码冻结了我的应用程序

> ID：10146665
> 
> 赞同：0
> 
> 时间：2012-04-13T18:52:45.410
> 
> 标签：c#, .net, wpf, screenshot

此代码极度冻结 WPF 应用程序。

有没有机会修复它？

```
var getScreenshot = Task.Factory.StartNew(() => 
{                       
    Dispatcher.BeginInvoke(DispatcherPriority.ApplicationIdle, new ThreadStart(() => {                        
    #region Main
    try
    {
        Graphics gfx;
        Bitmap bmp = new Bitmap(Screen.PrimaryScreen.Bounds.Width, Screen.PrimaryScreen.Bounds.Height);
        gfx = Graphics.FromImage(bmp);
        WindowInteropHelper windowInteropHelper = new WindowInteropHelper(this);
        Screen screen = Screen.FromHandle(windowInteropHelper.Handle);
        gfx.CopyFromScreen(screen.Bounds.X, screen.Bounds.Y, 0, 0, screen.Bounds.Size, CopyPixelOperation.SourceCopy);
         MemoryStream ms = new MemoryStream();
        byte[] bitmapData = null;
        using (bmp)
        {
            bmp.SetResolution(72, 72);
            ImageCodecInfo myImageCodecInfo;
            myImageCodecInfo = GetEncoderInfo("image/jpeg");
            System.Drawing.Imaging.Encoder myEncoder;
            myEncoder = System.Drawing.Imaging.Encoder.Quality;
            EncoderParameters encoderParameters = new EncoderParameters();
            EncoderParameter encoderParameter = new EncoderParameter(myEncoder, 25L);
            encoderParameters.Param[0] = encoderParameter;
            bmp.Save(ms, myImageCodecInfo, encoderParameters);                               
            bitmapData = ms.ToArray();
        }
        if (bitmapData != null)
            DataProvider.UpdateScreen(((PlayerConfiguration)App.Current.Properties["PlayerConfig"]).InstallationKey, bitmapData);
    }
    catch (Exception ex)
    {
        #region Error
        LogEntry l = new LogEntry();
        l.Message = string.Format("{0}", ex.Message);
        l.Title = "GetScreen() Error";
        l.Categories.Add(Category.General);
        l.Priority = Priority.Highest;

        CustomLogger.WriteErrorLog(l, "GetScreen");

        #endregion
    }
    #endregion
  }));

}, TaskCreationOptions.LongRunning)
.ContinueWith(x => x.Dispose()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T18:56:54.367

是的，只是不要为整个事情分派给 UI 线程。只将最少量的代码放入`Invoke`您可以逃脱的调用中。应该是在您实际更新 UI 时。由于整个事情都在代码中的调用调用中，因此 UI 被阻塞，直到整个事情完成。

# asp.net-mvc-3 - 如何从 jQuery 编写 JSON 对象并将其发布到 MVC3 操作方法？

> ID：10146668
> 
> 赞同：0
> 
> 时间：2012-04-13T18:52:53.563
> 
> 标签：asp.net-mvc-3, model-view-controller, jquery, kendo-ui

我有以下 JavaScript 代码，它`Id`从 Kendo UI 网格中的每个用户行获取属性 (Guid)。现在我想知道如何最好地将这些 Id 和所有者 roleId 组合成一个 JSON 对象，我可以将其传递给 MVC3 操作方法。与我愚蠢的字符串连接相比。

```
$("#command-add-selected").click(function () {
    var json = "roleId: '51FC554E-353C-4D55-BE52-1B4BF9D2F17F', users: [";
    var avail = $("#availableUsersGrid").data().kendoGrid._data;
    for (var i = 0; i < avail.length; i++) {
        json += "{ Id: '" + avail[i].Id + "'},";
    }
    json = json.slice(0, -1);
    json += "]";
    alert(json);
    return false;
}); 
```

action 方法可以是 GET 或 POST 并且不需要返回任何值（这是另一个难题，没有返回视图）。它所做的只是由上述代码之后的其他 ajax 代码获取的域更新。

如何将上述类型的 JSON 传递给本质上为 void 返回类型的操作方法？

**编辑：** [这个](https://stackoverflow.com/questions/2250953/how-do-i-create-javascript-arrayjson-format-dynamically)问题很好地回答了我的问题的一小部分，如何使用`push`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T19:06:07.157

1.首先你不需要创建完整的 json 你自己使用`JSON.Stringify()`的方法来将 javascript 对象更改为 JSON 字符串。
2.在你创建了 JSON 字符串之后，你可以将它`GET`或`POST`它用于任何可见性公共的 MVC 控制器中的任何普通方法。即使动作方法的签名就像`public ActionResult MehodName(string jsonString)`你总是可以返回null。
3.您可以使用命名空间中的内置`JavaScriptSerializer`类`System.Web.Script.Serialization`来反序列化您在操作中收到的json字符串，以创建具有相同属性的对象
编辑：-
创建一个javascript数组名称`users`，然后在javascript的for循环使用`.push()`函数中插入对象这

```
var users = [];
for(something)
{
var user = {"Id":"YOUR ID VALUE"};
users.push(user)
}
var objectToSerialize = {"roleId":"YOUR ROLE GUID","Users":users};
var jsonString = JSON.stringify(objectToSerialize); 
```

编辑 2：-
所以根据您之前的评论，您不希望您需要反序列化整个 JSON 对象。即使您的操作方法具有这样的签名，也要遵循您的对象架构

```
public ActionResult GetUsersByRole(Users users)
{
//some code 
} 
```

和像这样的用户类

```
class Users
{
public string RoleId{get; set;}
public User[]{get; set;}
} 
```

和这样的用户类

```
class User
{
string Id{get; set;}
} 
```

它会自动将属性与您的复杂用户对象绑定

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T19:36:53.330

结合 Parv Sharma 的解决方案：

```
function User(id) { this.Id=id; }

$("#command-add-selected").click(function () {

    var avail = $("#availableUsersGrid").data().kendoGrid._data;
    var userArray = array();
    for (var i = 0; i < avail.length; i++) {
        userArray.push(new User(avail[i].Id));
    }
    var obj = {roleId:'51FC554E-353C-4D55-BE52-1B4BF9D2F17F',users:userArray};
    alert(JSON.stringify(obj));
    return false;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T19:10:58.463

应该可以使用 Url.Action("NameofAction","nameofcontroller", json); 您可能还必须将 AcceptVerbs 属性添加到操作方法，具体取决于您希望它是 GET 还是 POST。就构建部分而言，我建议根本不使用字符串。Json 是对象，而不是字符串，所以我会继续使用您的 foreach 循环构建一个“用户”对象，然后将该对象放入您的 json 返回对象中。

编辑：忘了提stringify。是的。用那个。

# wpf - 如何读取 HTML 文档并提取图像名称？

> ID：10146671
> 
> 赞同：0
> 
> 时间：2012-04-13T18:53:10.183
> 
> 标签：wpf

我正在 WPF、C# 和 VS2010 中开发一个应用程序，但不知道如何继续...

我对获取 html 文件中引用的所有 .jpg 和 .bmp 图像的算法感兴趣。如何从 html 文件中提取正文？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T19:11:29.273

你可以用正则表达式来做到这一点。

[http://msdn.microsoft.com/en-us/library/ms228595.aspx](http://msdn.microsoft.com/en-us/library/ms228595.aspx)

以下模式应该有效：

```
(http?:\/\/.*\.(?:png|jpg|gif)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T19:14:38.797

[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)是一个非常可靠的库，用于从 HTML 文档中提取元素。一个简单的观点是将其视为 XPATH 的包装器，并带有一个不错的 API。

# asp.net-mvc-3 - 是否可以在 _layout.cshtml 上添加视图模型？

> ID：10146677
> 
> 赞同：0
> 
> 时间：2012-04-13T18:53:38.393
> 
> 标签：asp.net-mvc-3, viewmodel

场景是我想用 Mvc.Sitemap 填充导航栏、菜单。

我应该如何实现这一目标？

在布局页面上添加 View Model 感觉很奇怪。这可能会导致一个视图拥有多个视图模型。

有人可以帮忙吗？谢谢你。

更新： ---------- 我有 Home/_Menu 作为使用 MenuViewModel 的部分视图。但是如何在 _layout 中包含该视图？

我不能简单地`@Html.Partial("_Menu")`在我的内部使用，`_Layout.cshtml`因为我需要指定构建视图模型的控制器和操作。这样做的正确方法是什么？

如果我这样做`@Html.RenderAction("_Menu", "Home")`了，我会在模型上得到一个`Object reference not set to an instance of an object.`错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:57:15.813

你的布局中不应该有模型，因为默认情况下你从那里调用的每个视图都会有这个模型。相反，您应该使用模型创建一个 Menu 视图，并在调用它时将新的 MenuModel 作为模型传递给它。

编辑：您可以有一个类，它将数据从您存储菜单值的位置中提取出来。然后你像这样调用你的部分：

```
@Html.Partial("_Menu_", menuobject.Root) 
```

和班级：

```
partial class menuobject
{
    public static menuobject Root
    {
        // MenuRoots are all roots that have ID -1 - which will be the root
        return MenuRoots.Single(x => x.Something == "Topnavi"); // this will return the root above all your menus
    }
} 
```

在您看来，您可以在每个级别的菜单上使用 foreach() 来填充它们。

# android - 我们如何通过专有的 Wifi 网络安装/推送 Android 应用程序？

> ID：10146680
> 
> 赞同：2
> 
> 时间：2012-04-13T18:53:56.597
> 
> 标签：android, push, google-play, publishing

我们正在开发一个 android 应用程序，该应用程序将安装在场所内的约 500 台设备上。我怎样才能通过 wifi 网络一次性集中完成。

每季度三次，以下为必填项

*   需要安装应用程序（可升级版本）。
*   经常卸载（旧版本）。

我知道在设备上我们可以默认设置**“允许未知来源”**。但是是否可以推送/安装应用程序（比如最近姜饼手机上的ICS推送）

我已经浏览了这篇[文章](https://stackoverflow.com/questions/4522630/non-market-content-publishing)，但没有确切的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:02:53.567

除非您在设备上安装了自定义版本的 Android，否则您无法将 APK 发送到设备并在不使用 Android Market 的情况下自动安装。

但是，您可以使用 ADB 将应用程序部署到单个设备而无需用户交互。使用以下命令：

```
adb install /Path/ToFile/ApkFile.apk 
```

此外，您可以将 apk 放在手机上，然后使用包管理器进行安装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T19:05:23.707

对于初始安装，您不能。您别无选择，只能通过一种或另一种方式手动安装应用程序（例如，通过内部网的链接下载）。

对于更新，应用程序可以检查可用的更新，下载它，然后在用户准备好时启动安装。但是，您不能强制升级应用程序——用户必须参与其中。

您也不能“已安装（可升级版本）-卸载（旧版本）”，除非手动 - 一旦应用程序被卸载，它就无法触发其他应用程序的安装。此外，通过卸载，您会丢失所有数据，这通常是不受欢迎的。就地升级是更典型的方法。

# facebook - 我怎样才能使它注销不会使我的 Facebook 访问令牌无效？

> ID：10146686
> 
> 赞同：0
> 
> 时间：2012-04-13T18:54:22.660
> 
> 标签：facebook, facebook-graph-api, logout, access-token, invalidation

我正在制作一个返回各种 Facebook 内容并需要在数据库中存储长期访问令牌的应用程序。我知道不建议使用 offline_access 权限，因为它很快就会被删除。

Facebook 文档本身似乎很混乱......有一篇 2011 年的博客文章（https://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/ ) 指示如何在用户注销时处理无效的访问令牌，但是：

1 - 从 2011 年开始，这意味着它是在引入这些新的 60 天代币之前很久就编写的。

2 - 它在答案的“用户注销”部分提到了 offline_access 权限，这让我相信在使用这种较新的方法时不能完全依赖它。

我见过许多与我类似的问题，所有答案似乎都指向上述帖子，这对我没有任何用处（出于上述原因）。

我已经制定了将令牌交换为 60 天令牌的方法，这似乎正在工作（直到用户注销 - 并使令牌无效）。

但是，我发现某些帐户（尽管很少）可以注销并且令牌保持有效，而对于其他人（大多数）注销会使它无效。

我想知道是否有一些权限或设置允许您“关闭”注销使访问令牌无效？

# ios - 为 Ad Hoc 归档时出现 RestKit 链接错误

> ID：10146687
> 
> 赞同：3
> 
> 时间：2012-04-13T18:54:31.700
> 
> 标签：ios, linker-errors, restkit

我正在使用 RestKit 并且应用程序在调试模式下运行良好，但是当我尝试创建存档时，我收到一大堆链接错误：

_RKRequestCacheDateHeaderKey 在 ... /Release-iphoneos/theCamera.build/Objects-normal/armv7/ClientListViewController.o 中具有不同的可见性（默认）

_RKRequestCacheHeadersExtension 在 .../Release-iphoneos/theCamera.build/Objects-normal/armv7/ClientListViewController.o 中具有不同的可见性（默认）

_RKRequestCacheMIMETypeKey 在 .../Release-iphoneos/theCamera.build/Objects-normal/armv7/ClientListViewController.o 中具有不同的可见性（默认）。. . 有人可以帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T16:51:17.757

我解决了这个问题。就是这样：

1.  在 Project Navigator 中选择 RestKit.xcodeproj
2.  在 PROJECT 下选择 ResKit
3.  选择构建设置
4.  搜索其他 C 标志
5.  输入 -fvisibility=hidden

# firefox - Firefox 不支持 xhrPost 中的 Content-type 标头

> ID：10146688
> 
> 赞同：4
> 
> 时间：2012-04-13T18:54:32.027
> 
> 标签：firefox, post, dojo, content-type, request-headers

我正在尝试将 json 字符串发布到 REST 服务。正在使用以下代码：

```
dojo.xhrPost( {
    url: REST_URL,
    postData: jsonData, 
    handleAs: "json",
    headers: {"Content-Type": "application/json"},    
    load: function(response, ioArgs) { 
    alert(response);
  },    
  error: function(response, ioArgs) {
        alert(response);
    }
  }); 
```

我使用 fiddler 拦截浏览器（IE/Firefox）发送的请求。当我从 IE 提交请求时，fiddler 显示 Content-type 标头设置为“application/json”。

但是，当使用 Firefox 提交相同的请求时，Content-type 标头在请求标头中不可见（意味着 Firefox 未添加）。我的服务器设置为验证内容类型为“应用程序/json”。因此，请求被服务器拒绝。

问题：

1.  我现在该怎么做才能在 Firefox 中完成这项工作
2.  最重要的是，为什么 firefox 不将 Content-type 的标头添加到请求标头中？环境详情：操作系统：Win7 32 位，浏览器：IE8/9 & Firefox 11

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T08:07:11.620

你的测试可能有错误。Firefox 还会添加您指定的 Content-type 标头。IE/Chrome 和 Firefox 之间的唯一区别是 FF 附加字符集信息，如下所示。

```
Content-Type: application/json; charset=UTF-8 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-02T16:16:28.137

我知道这个问题已经死了，但是有一个类似的问题我发现了这个[错误报告](https://bugzilla.mozilla.org/show_bug.cgi?id=918742)

如果您正在寻找[古人的智慧，](https://xkcd.com/979/)我希望这会有所帮助；）

# sql - Access 97 外部连接问题

> ID：10146690
> 
> 赞同：0
> 
> 时间：2012-04-13T18:54:39.267
> 
> 标签：sql, ms-access, join

我有两个要加入的表。

表 A 有一列，名为“周”，包含 52 行：1、2、3、4、5、6 等。表 2 有三列，名为“名称”、“周”和“总”，并且包含 10 行：

```
'Bob', 1, 1
'Bob', 3, 1
'Joe', 4, 1
'Bob', 6, 1 
```

我想将这些连接在一起，以便我的数据看起来像：

```
NAME|WEEK|TOTAL
'Bob', 1, 1
'Bob', 2, 0
'Bob', 3, 1
'Bob', 4, 0
'Bob', 5, 0
'Bob', 6, 1 
```

如您所见，一个简单的外连接。但是，当我尝试这样做时，无论我使用哪种联接，我都没有得到预期的结果。

我的查询如下：

```
SELECT a.WEEK, b.Total
FROM Weeks a LEFT JOIN Totals b ON (a.Week = b.Week and b.Name ='Bob') 
```

这个查询的结果是

```
NAME|WEEK|TOTAL
'Bob', 1, 1
'Bob', 3, 1
'Bob', 6, 1 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T19:04:47.547

我知道它的访问权限，但您的加入不正确。这里我们进入 sql server.. 相同的概念只看连接条件：

```
--dont worry about this code im just creating some temp tables

--table to store one column (mainly week number 1,2..52)
CREATE TABLE #Weeks
(
  weeknumber int
)

--insert some test data
--week numbers...I'll insert some for you
INSERT INTO #Weeks(weeknumber) VALUES(1)
INSERT INTO #Weeks(weeknumber) VALUES(2)
INSERT INTO #Weeks(weeknumber) VALUES(3)
INSERT INTO #Weeks(weeknumber) VALUES(4)
INSERT INTO #Weeks(weeknumber) VALUES(5)
INSERT INTO #Weeks(weeknumber) VALUES(6)

--create another table with two columns storing the week # and a total for that week
CREATE TABLE #Table2
 ( 
  weeknumber int,
  total int
 )

--insert some data
INSERT INTO #Table2(weeknumber, total) VALUES(1, 100)
--notice i skipped week 2 on purpose to show you the results
INSERT INTO #Table2(weeknumber, total) VALUES(3, 100)

--here's the magic
SELECT t1.weeknumber as weeknumber, ISNULL(t2.total,0) as total FROM 
#Weeks t1 LEFT JOIN #Table2 t2 ON t1.weeknumber=t2.weeknumber

--get rid of the temp tables
DROP TABLE #table2
DROP TABLE #Weeks 
```

结果：

```
1   100
2   0
3   100
4   0
5   0
6   0 
```

拿你的周数表（只有一列的表：

`SELECT t1.weeknumber as weeknumber`

添加一个空检查以用 0 替换空值。我认为访问中有一些内容，例如`ISNULL`：

`ISNULL(t2.total, 0) as total`

并从您的第一个表开始您的连接，并在 weeknumber 字段上左连接到您的第二个表。结果很简单：

```
SELECT t1.weeknumber as weeknumber, ISNULL(t2.total,0) as total FROM 
#Weeks t1 LEFT JOIN #Table2 t2 ON t1.weeknumber=t2.weeknumber 
```

**不要注意我发布的所有其他代码，它们只是用于创建临时表并将值插入表中。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T19:20:15.070

你在正确的轨道上，但只需要使用左连接。如果 total 为空，则 NZ 函数也会输入 0。

```
SELECT Totals.Person, Weeks.WeekNo, Nz(Totals.total, 0) as TotalAmount
FROM Weeks LEFT JOIN Totals 
ON (Weeks.WeekNo = Totals.weekno and Totals.Person = 'Bob'); 
```

编辑：您现在的查询甚至不会给出您显示的结果，因为您遗漏了 Name 字段（这对于字段来说是一个错误的名称，因为它是一个保留字。）。您仍然没有提供所有信息。此查询有效。

**另一种方法：**在 Totals 表上创建一个单独的查询，其中包含 where 子句：Name = 'Bob'

```
Select Name, WeekNo, Total From Totals Where Name = 'Bob'; 
```

并将该查询替换为该查询中的 Totals 表。

```
Select b.Name, w.WeekNo, b.total
from Weeks as w 
LEFT JOIN qryJustBob as b
on .WeekNo = b.WeekNo; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T10:01:22.423

```
SELECT b.Name, b.Week, b.Total
  FROM Totals AS b 
 WHERE b.Name ='Bob'
UNION
SELECT 'Bob' AS Name, a.Week, 0 AS Total
  FROM Weeks AS a 
 WHERE NOT EXISTS ( SELECT * 
                      FROM Totals AS b 
                     WHERE a.Week = b.Week
                           AND b.Name ='Bob' ); 
```

# java - 如何使用 DefaultHttpClient 写入 OutputStream？

> ID：10146692
> 
> 赞同：14
> 
> 时间：2012-04-13T18:54:48.830
> 
> 标签：java, httpclient, outputstream

如何获得`OutputStream`using `org.apache.http.impl.client.DefaultHttpClient`？

我正在寻找将长字符串写入输出流。

使用`HttpURLConnection`你会像这样实现它：

```
HttpURLConnection connection = (HttpURLConnection)url.openConnection();
OutputStream out = connection.getOutputStream();
Writer wout = new OutputStreamWriter(out);
writeXml(wout); 
```

有没有使用`DefaultHttpClient`类似于我上面的方法？我将如何写入`OutputStream`using`DefaultHttpClient`而不是`HttpURLConnection`？

例如

```
DefaultHttpClient client = new DefaultHttpClient();

OutputStream outstream = (get OutputStream somehow)
Writer wout = new OutputStreamWriter(out); 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-14T09:52:15.410

我知道另一个答案已经被接受，只是为了记录，这就是人们如何使用 HttpClient 写出内容而无需在内存中进行中间缓冲。

```
 AbstractHttpEntity entity = new AbstractHttpEntity() {

        public boolean isRepeatable() {
            return false;
        }

        public long getContentLength() {
            return -1;
        }

        public boolean isStreaming() {
            return false;
        }

        public InputStream getContent() throws IOException {
            // Should be implemented as well but is irrelevant for this case
            throw new UnsupportedOperationException();
        }

        public void writeTo(final OutputStream outstream) throws IOException {
            Writer writer = new OutputStreamWriter(outstream, "UTF-8");
            writeXml(writer);
            writer.flush();
        }

    };
    HttpPost request = new HttpPost(uri);
    request.setEntity(entity); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-13T19:50:05.017

您无法直接从 BasicHttpClient 获取 OutputStream。您必须创建一个`HttpUriRequest`对象并为其提供一个`HttpEntity`封装您要发送的内容的对象。例如，如果您的输出足够小以适合内存，您可以执行以下操作：

```
// Produce the output
ByteArrayOutputStream out = new ByteArrayOutputStream();
Writer writer = new OutputStreamWriter(out, "UTF-8");
writeXml(writer);

// Create the request
HttpPost request = new HttpPost(uri);
request.setEntity(new ByteArrayEntity(out.toByteArray()));

// Send the request
DefaultHttpClient client = new DefaultHttpClient();
HttpResponse response = client.execute(request); 
```

如果数据足够大以至于您需要对其进行流式传输，则变得更加困难，因为没有`HttpEntity`接受 OutputStream 的实现。您需要写入临时文件并使用`FileEntity`或可能设置管道并使用`InputStreamEntity`

**编辑**请参阅 oleg 的答案以获取演示如何流式传输内容的示例代码 - 毕竟您不需要临时文件或管道。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-25T09:12:00.590

这在安卓上运行良好。它也应该适用于大文件，因为不需要缓冲。

```
PipedOutputStream out = new PipedOutputStream();
PipedInputStream in = new PipedInputStream();
out.connect(in);
new Thread() {
    @Override
    public void run() {
        //create your http request
        InputStreamEntity entity = new InputStreamEntity(in, -1);
        request.setEntity(entity);
        client.execute(request,...);
        //When this line is reached your data is actually written
    }
}.start();
//do whatever you like with your outputstream.
out.write("Hallo".getBytes());
out.flush();
//close your streams 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-07T17:03:59.480

我写了一个 Apache 的 HTTP 客户端 API [[PipedApacheClientOutputStream]](https://github.com/robertjchristian/piped-apache-client-outputstream)的反转，它使用 Apache Commons HTTP Client 4.3.4 为 HTTP POST 提供了一个 OutputStream 接口。

调用代码如下所示：

```
// Calling-code manages thread-pool
ExecutorService es = Executors.newCachedThreadPool(
  new ThreadFactoryBuilder()
  .setNameFormat("apache-client-executor-thread-%d")
  .build());

// Build configuration
PipedApacheClientOutputStreamConfig config = new      
  PipedApacheClientOutputStreamConfig();
config.setUrl("http://localhost:3000");
config.setPipeBufferSizeBytes(1024);
config.setThreadPool(es);
config.setHttpClient(HttpClientBuilder.create().build());

// Instantiate OutputStream
PipedApacheClientOutputStream os = new     
PipedApacheClientOutputStream(config);

// Write to OutputStream
os.write(...);

try {
  os.close();
} catch (IOException e) {
  logger.error(e.getLocalizedMessage(), e);
}

// Do stuff with HTTP response
...

// Close the HTTP response
os.getResponse().close();

// Finally, shut down thread pool
// This must occur after retrieving response (after is) if interested   
// in POST result
es.shutdown(); 
```

**注意**-*实际上，相同的客户端、执行器服务和配置可能会在应用程序的整个生命周期中重复使用，因此上述示例中的外部准备和关闭代码可能会存在于引导/初始化和终结代码中，而不是直接内联OutputStream 实例化。*

# jpa-2.0 - 孤儿移除约束违反

> ID：10146693
> 
> 赞同：2
> 
> 时间：2012-04-13T18:55:08.593
> 
> 标签：jpa-2.0, eclipselink, cascade, orphan

我正在使用 EclipseLink 并具有以下实体类（我试图尽可能简化场景，但经过进一步简化后，不会发生错误）：

```
@Entity
public class A {
    @Id
    @GeneratedValue
    private long id;
    @OneToOne(cascade = CascadeType.ALL, orphanRemoval=true)
    private AbstractB b;
}

@Entity
@Inheritance(strategy = InheritanceType.JOINED)
public abstract class AbstractB {
    @Id
    @GeneratedValue
    protected long id;   
}

@Entity
public class BImpl extends AbstractB {
    @OneToOne(cascade = CascadeType.ALL, orphanRemoval=true)
    private D d;
}

@Entity
public class D {
    @Id
    @GeneratedValue
    private long id;
    @OneToMany(cascade = CascadeType.ALL, orphanRemoval = true)
    @Size(min = 1)
    private Set<C> cs = new HashSet<C>();
}

@Entity
public class C {
    @Id
    @GeneratedValue
    private long id;
} 
```

A 的实例引用了一个 BImpl，它引用了一个 D，而 D 又在一个集合中保存了一个 C 的实例。

正如您在代码中看到的，所有引用都将 orphanremoval 设置为 true 和 CascadeType.ALL。

当我将 A->AbstractB 的引用设置为 null 并合并回 A 的实例时，会发生以下约束冲突：

```
20:05:03,388 INFO  [STDOUT] [EL Fine]: 2012-04-13 20:05:03.388--ClientSession(2132156535)--Connection(1281180651)--Thread(Thread[http-0.0.0.0-443-2,5,jboss])--UPDATE A SET B_ID = ? WHERE (ID = ?)
20:05:03,388 INFO  [STDOUT]     bind => [null, 1]
20:05:03,390 INFO  [STDOUT] [EL Fine]: 2012-04-13 20:05:03.39--ClientSession(2132156535)--Connection(1281180651)--Thread(Thread[http-0.0.0.0-443-2,5,jboss])--DELETE FROM BIMPL WHERE (ID = ?)
20:05:03,390 INFO  [STDOUT]     bind => [2]
20:05:03,391 INFO  [STDOUT] [EL Fine]: 2012-04-13 20:05:03.391--ClientSession(2132156535)--Connection(1281180651)--Thread(Thread[http-0.0.0.0-443-2,5,jboss])--DELETE FROM ABSTRACTB WHERE (ID = ?)
20:05:03,391 INFO  [STDOUT]     bind => [2]
20:05:03,392 INFO  [STDOUT] [EL Fine]: 2012-04-13 20:05:03.392--ClientSession(2132156535)--Connection(1281180651)--Thread(Thread[http-0.0.0.0-443-2,5,jboss])--DELETE FROM C WHERE (ID = ?)
20:05:03,393 INFO  [STDOUT]     bind => [4]
20:05:03,393 INFO  [STDOUT] [EL Fine]: 2012-04-13 20:05:03.393--ClientSession(2132156535)--Thread(Thread[http-0.0.0.0-443-2,5,jboss])--SELECT 1
20:05:03,394 INFO  [STDOUT] [EL Warning]: 2012-04-13 20:05:03.394--UnitOfWork(2142376869)--Thread(Thread[http-0.0.0.0-443-2,5,jboss])--Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.DatabaseException
20:05:03,394 INFO  [STDOUT] Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Cannot delete or update a parent row: a foreign key constraint fails (`db`.`D_C`, CONSTRAINT `FK_D_C_cs_ID` FOREIGN KEY (`cs_ID`) REFERENCES `C` (`ID`))
20:05:03,394 INFO  [STDOUT] Error Code: 1451
20:05:03,395 INFO  [STDOUT] Call: DELETE FROM C WHERE (ID = ?)
20:05:03,395 INFO  [STDOUT]     bind => [4] 
```

谁能向我解释一下，为什么 D_C 条目在 C 实例之前没有被删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:14:17.177

添加@CascadeOnDelete 可能会解决您的问题

```
@OneToMany(cascade = CascadeType.ALL, orphanRemoval = true)
@CascadeOnDelete
@Size(min = 1)
public Set<TestChild> childrenSet = new HashSet<TestChild>(); 
```

另请参阅：[EclipseLink DeleteCascade](http://wiki.eclipse.org/EclipseLink/Examples/JPA/DeleteCascade)

HTH 丹尼

# javascript - jquery $(window).height() 未实现

> ID：10146695
> 
> 赞同：0
> 
> 时间：2012-04-13T18:55:09.233
> 
> 标签：javascript, jquery, window, height

在准备好文档的情况下运行下面的 jquery 时，我在顶部的分配上得到一个未实现的错误。如果删除该行，left 的分配就可以了。我正在IE7环境中开发。这是浏览器实现问题吗？

```
top = $(window).height();
left = $(window).width(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T19:10:30.963

哦，它与jQuery代码无关。窗户。[`top`](https://developer.mozilla.org/en/DOM/window.top)意味着 JavaScript 中的某些内容，并且由于您没有 delcare var，因此您正在尝试覆盖它！因此，您应该始终确定变量的范围，如果它需要是全局的，请更改您的变量名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T19:10:00.540

放在`var`变量之前。

因为`top`是`==`顶级的`window`。

信贷去[`@travmckinney`](https://stackoverflow.com/questions/10146695/jquery-window-height-not-implemented/10146890#comment13011333_10146695)

# objective-c - 自定义 NSObject 类，实例化如 [CustomObj customObjWithData:data]

> ID：10146696
> 
> 赞同：0
> 
> 时间：2012-04-13T18:55:17.823
> 
> 标签：objective-c, ios, memory-management, nsobject

> **可能重复：**
> [创建新实例的类方法](https://stackoverflow.com/questions/5987969/class-methods-which-create-new-instances)

我想知道如何模拟 NSString、NSArray 等类的实例化：[NSArray arrayWithObject:object] ... 希望消除初始化和分配。

我可能不熟悉它的实际作用。根据文档， [NSSArray array] 创建并返回一个空数组。这到底是什么意思，任何分配？

我希望能够拥有一个自定义 NSObject 类并执行以下操作：[CustomObj customObjWithData:data]

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T19:08:22.913

先写一个对应的自定义`init...`方法：

```
- (id)initWithFoo:(Foo *)aFoo
{
     // Do init stuff.
} 
```

然后添加一个调用的自定义工厂方法`alloc`和您的自定义`init...`方法：

```
+ (id)customObjWithFoo:(Foo *)aFoo
{
    return [[[self alloc] initWithFoo:aFoo] autorelease];
} 
```

如果使用 ARC 编译，则省略`autorelease`调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T19:06:23.860

这些是类方法。通常，它们也有实例 init* 方法。例如...

```
- (id)initWithData:(NSData*)data
{
  // Call appropriate super class initializer
  if (self = [super init]) {
    // Initialize instance with the data
  }
  return self;
}

+ (id)customObjWithData:(NSData*)data
{
  return [[self alloc] initWithData:data];
} 
```

现在，你可以称之为...

```
CustomObj *obj = [CustomObj customObjWithData:data]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-13T20:15:39.910

这里的很多答案都是正确的。我总是自己创建一个通过 Storyboard-instantiation 轻松进行 alloc en 实例化的方法：

//FooViewController.m

```
+ (id)create
{
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"Storyboard" bundle:nil];

    return [storyboard instantiateViewControllerWithIdentifier:@"FooViewController"];
}

+ (UINavigationController *)createWithNavagionController
{
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"Storyboard" bundle:nil];

    FooViewController *fooViewController = [storyboard instantiateViewControllerWithIdentifier:@"fooViewController"];

    UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:fooViewController];

    return navigationController;
} 
```

如果您需要参数，请创建类方法，例如： createWithName:(NSString *)name

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-13T19:04:59.620

你需要做类似的事情......

```
+ (CustomObj *)customObjWithData:(NSData *)data {
    return [[[CustomObj alloc] initWithData:data] autorelease];
} 
```

...并实现一个 initWithData: 来处理变量的初始化。

# iphone - 可怕的 Facebook IOS 集成内存泄漏

> ID：10146698
> 
> 赞同：0
> 
> 时间：2012-04-13T18:55:33.183
> 
> 标签：iphone, objective-c, xcode, memory-leaks, dispatch

我们已将 facebook 集成到应用程序中以上传照片。这一直很好，但最近使用 XCode Alloc 工具来追踪我们发现的任何内存泄漏似乎很糟糕。我们正在一个单独的调度线程中运行一个上传过程。然后我们在自动发布池中加载我们的 facebook 上传方法。当上传被调用时，图像会继续发送到相应的 FB 配置文件。但是，在上传 NSKeyValueMethodForPattern 时，会创建并保存大约 500KB。然后，创建大的 -[NSConcreteMutableData appendBytes:length] 并根据图像大小消耗大约 4.5MB。这两个是为每个上传的图像创建的，永远不会发布！我对此感到茫然。alloc 工具指向下面是罪魁祸首

```
- (FBRequest*)openUrl:(NSString *)url params:(NSMutableDictionary *)params 
           httpMethod:(NSString *)httpMethod delegate:(id<FBRequestDelegate>)delegate 
{
    [params setValue:@"json" forKey:@"format"];
    [params setValue:kSDK forKey:@"sdk"];
    [params setValue:kSDKVersion forKey:@"sdk_version"];
    if ([self isSessionValid]) {
        [params setValue:self.accessToken forKey:@"access_token"];
    }

    [_request release];
    _request = [[FBRequest getRequestWithParams:params
                                     httpMethod:httpMethod
                                       delegate:delegate
                                     requestURL:url] retain];
    [_request connect]; // <<<< SAYING THIS IS 100% cause
    return _request;
} 
```

这是我们用来创建线程和“释放”池以处理和上传图像的代码。

```
backgroundQueue = dispatch_queue_create("com.somecomp.appnameo.bgqueue", NULL);  

dispatch_async(backgroundQueue, ^(void) {
    NSAutoreleasePool *loopPool = [[NSAutoreleasePool alloc] init];
    NSData *imageNSData = [NSData dataWithContentsOfFile:[NSString stringWithFormat:@"%@/%@", docDir, self.fileName]];
    UIImage *img  = [[UIImage alloc] initWithData:imageNSData];

    fbResponse = 0;
    //[facebook requestWithGraphPath:@"me" andDelegate:self];
    [[delegate facebook] requestWithGraphPath:@"me/permissions" andDelegate:self];
    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   //@"Sent From Some APP!", @"name",
                                   self.postTitle, @"caption",
                                   // string, @"description",
                                   img, @"picture",
                                   //@"my photo's caption text here.", @"message",
                                   nil];

    [img release];

    [[delegate facebook] requestWithMethodName:@"photos.upload"
                                     andParams:params
                                 andHttpMethod:@"POST"
                                   andDelegate:self];
    [loopPool drain];
}); 
```

我还能做些什么来释放这些内存猪吗？我不是这个东西的新手，但我对此感到茫然。这里的任何帮助都会很棒！

谢谢！- 吉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T00:01:13.503

请参阅我关于 FBConnect 代码已过时的评论，但我怀疑旧版本是否存在如此严重的泄漏（对于每个连接）。

引起怀疑的是异步调用。FB 的连接已经在异步运行，所以我认为你应该把这个请求放在主服务器上。您的块正在立即完成，因为 requestWithMethod 正在立即返回。

# git - 通过挂断从上游 github 存储库获取失败

> ID：10146700
> 
> 赞同：7
> 
> 时间：2012-04-13T18:55:41.200
> 
> 标签：git, github

为什么我的 git fetch 失败并显示：

```
fatal: The remote end hung up unexpectedly 
```

我是一个私人项目的合作者，并已成功分叉该项目。我已经使用 github 示例设置了一个遥控器：

```
git remote add upstream git://github.com/{upstream owner}/{upstream project}.git 
```

我可以看到遥控器是使用“git -v show -n upstream”添加的

```
Fetch URL: git://github.com/{upstream owner}/{upstream project}.git
Push  URL: git://github.com/{upstream owner}/{upstream project}.git 
```

我知道我的 ssh 密钥有效：

```
ssh -T git@github.com
Hi miketempleman! You've successfully authenticated, but GitHub does not provide shell access. 
```

然而，当我尝试从上游存储库更新我的本地存储库时：

```
mike@ununtu-11:~/{directory}$ git fetch upstream
fatal: The remote end hung up unexpectedly 
```

为这么愚蠢的问题道歉。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-13T21:24:33.747

我认为`git://`只读 URI 不适用于私有存储库，因此它们不是世界可读的（即，只有获得授权，您才能在存储库中获取）。

尝试使用不同的远程 URI：

```
git remote set-url upstream git@github.com:{upstream owner}/{upstream project}.git 
```

或者，或者使用 HTTPS：

```
git remote set-url upstream https://{your username}@github.com/{upstream owner}/{upstream project}.git 
```

# c# - 尝试调试使用 IBM WMQ (amqmdnet.dll) 的 VS2010 C# 代码

> ID：10146701
> 
> 赞同：1
> 
> 时间：2012-04-13T18:55:42.247
> 
> 标签：c#, .net, ibm-mq

我正在使用 IMB WMQ 库连接到队列管理器。

这是一个我用了很久的代码，它是朋友在VS2005中创建的，我更新后可以在VS2010中使用。当我使用与 LoadRunner 集成的工具来运行一些性能脚本时，它工作正常。但是，当我尝试调试时，它会返回以下错误：

```
{"Unable to load DLL '**amqxcs2.dll**': The handle is invalid. (Exception from HRESULT: 0x80070006 (E_HANDLE))"} 
```

这与调试外部 DLL 有关，但我没有找到解决方法。

我使用以下命令将 dll 注册到 GAC 中：

```
gacutil /I "C:\Program Files\IBM\WebSphere MQ\bin\amqmdnet.dll" 
```

当我尝试添加 amqxcs2.dll 时，它返回一个错误：

```
gacutil /I "C:\Program Files\IBM\WebSphere MQ\bin\amqxcs2.dll"
Failure adding assembly to the cache:   The module was expected
to contain an assembly manifest. 
```

我在 Windows Server 2003 上运行 VS2010 Ultimate。

在 Loadrunner 中运行代码时，我可以从队列中放置和获取消息，但无法调试。

这里有一个[类似的帖子](https://stackoverflow.com/questions/5039466/unable-to-connect-ibm-mq-via-asp-net-unable-to-load-dll-amqxcs2-dll-the-spe)，但它没有解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T23:00:17.133

这可能是 COM 错误。IBM 程序集可能是本机 dll，因此您无法在 GAC 中注册它，它仅适用于 .NET dll。可以使用[Regsvr32](http://technet.microsoft.com/en-us/library/bb490985.aspx)注册本机 COM dll 。如果本机 dll 依赖于另一个缺少的 dll，也会发生此错误。另请参阅[了解 Visual C++ 应用程序](http://msdn.microsoft.com/en-us/library/ms235265.aspx)的依赖关系，它提供了有关可用于确定本机 dll 依赖关系的 Dependency Walker 工具的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T19:01:21.150

为什么您认为“确保库位于应用程序需要的位置”不是解决方案？

您需要在您计划使用它的机器上正确安装您正在使用的任何产品，或者通过手动将必要的文件复制到正确的位置（并手动计算“正确的位置”）来欺骗自己[。SysInternals](http://technet.microsoft.com/en-us/sysinternals/bb545021)工具可能有助于跟踪应用程序尝试使用的文件）。

# height - 当内容扩展超过窗口大小时，在绝对定位的元素上设置 100% 高度

> ID：10146703
> 
> 赞同：9
> 
> 时间：2012-04-13T18:55:57.407
> 
> 标签：height, css-position, css

因此，在阅读了 Stack Overflow 和网络之后，我总结了实现 100% 高度的两个主要技巧：

1.  在 HTML 和 BODY 上设置 height:100%
2.  将您的元素设置为：
    *   高度：100%，或
    *   顶部：0，底部：0，位置：绝对

但是，即使使用这些技巧，我也很难将绝对定位的 DIV 的高度设置为真正的 100%。我可以获得 100% 的视口大小，但如果用户向下滚动，很明显 div 并没有真正具有 100% 的高度。

我在这里做了一个简单的 JS Fiddle：http: [//jsfiddle.net/9FEne/](http://jsfiddle.net/9FEne/)

我的问题是：有没有人知道任何进一步的技巧来获得一个真正的（即内容高度，而不是视口高度）100% 高度绝对定位的 div？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-13T19:12:42.843

抱歉，我之前错过了真正的问题，并认为你想要填满窗口。如果问题是内容比窗口长，那么您需要添加`position:relative`到正文中。 [http://jsfiddle.net/9FEne/7/](http://jsfiddle.net/9FEne/7/)

发生的事情是，当您绝对定位某些东西时，它相对于最近的定位元素定位（和大小）。如果您不告诉它定位到身体，那么它将定位到窗口。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-13T18:58:27.187

你可以使用 jQuery 来实现这个技巧

```
var h = $(window).height();
$('#yourdiv').height(h); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-13T19:01:27.037

我会使用 javascript 将高度和宽度分别指定为文档的高度和窗口的宽度；我已经修改了您的 jsfiddle 以在此处进行演示：

[http://jsfiddle.net/9FEne/1/](http://jsfiddle.net/9FEne/1/)

# java - Twitter4j getOAuthRequestToken() 方法引发 ILLEGALSTATEEXCEPTION

> ID：10146715
> 
> 赞同：2
> 
> 时间：2012-04-13T18:56:48.697
> 
> 标签：java, jakarta-ee, twitter, twitter-oauth, twitter4j

我是 twitter4j 的新手，我刚刚完成了以下教程

[http://www.java-tutorial.ch/framework/twitter-with-java-tutorial](http://www.java-tutorial.ch/framework/twitter-with-java-tutorial)

在此之后，我根据需要对该代码进行了一些更改...

在eclipse中我有以下目录结构

![Eclipse 目录结构](../Images/669af52758d054e1a78e9595e71103bb.png)

问题是 getOAuthRequestToken() 方法引发异常并告诉我未设置客户密钥/秘密......但我已经在该文件中设置了它......事实上我已经在 twitter4j.properties 文件中设置了所有属性……

谁能告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T21:32:09.290

您应该将 twitter4j.properties 添加到您的类路径中。例如，将其添加到文件夹“Java Ressources”中，您的问题将得到解决:)

# ios - performSegueWithIdentifier 不显示新视图

> ID：10146719
> 
> 赞同：0
> 
> 时间：2012-04-13T18:57:10.763
> 
> 标签：ios, xcode, ios5, storyboard, segue

我制作了在显示初始化视图时显示第二个视图的测试应用程序。我的代码是这样的：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    [self performSegueWithIdentifier:@"showSecondView" sender:self];
} 
```

但是没有显示第二个视图。有人能帮我吗。非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:44:43.733

将其移至 viewDidAppear。在它出现之前不会执行segue。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-02T12:49:15.937

如果您想知道在 viewDidLoad 中它对您不起作用的原因，您可以在[此处查看我的回答](https://stackoverflow.com/a/10413993/761135)

# wordpress - 如何仅在主页上显示 wordpress BlogRoll （左栏）上方的链接？

> ID：10146723
> 
> 赞同：0
> 
> 时间：2012-04-13T18:57:25.237
> 
> 标签：wordpress, wordpress-theming

我正在寻找如何在我的网站左侧菜单上显示一个链接，该链接仅在我们位于主页时才会出现。

它应该看起来像这样，但仅限于主页（查看名为“推荐 VoIP 服务”的链接）：[http ://abvoip.com/](http://abvoip.com/)

可以直接在管理面板中这样做吗？否则，我必须修改哪个文件？因为我在小部件函数中的 default-widgets.php 文件中工作，但我知道这不是它应该的方式......

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:06:44.503

您可以使用条件标记轻松完成此操作。条件标签，如`is_home()`函数，测试提供的条件是否为真。在这种情况下，我们正在测试我们是否在主页上。`is_home()`如果将其放在 if 语句中，则该语句中的代码仅在为 true时才会执行。

使用以下代码将“推荐的 VoIP 服务”添加到侧边栏：

```
<?php 
    if ( is_home() ) {
        echo '<div style="font-size:16px; font:black; margin-bottom:20px;"><a href="http://www.axvoice.com">Recommended VoIP Service</a></div>';  
    }
?> 
```

当您实际上在主页上时，这只会有效地显示“推荐的 VoIP 服务”列表项。

您可以在此处找到有关 wordpress 条件标签的更多信息：http: [//codex.wordpress.org/Conditional_Tags](http://codex.wordpress.org/Conditional_Tags)

# html - HTML 表单覆盖方法 GET

> ID：10146724
> 
> 赞同：-2
> 
> 时间：2012-04-13T18:57:25.953
> 
> 标签：html, forms

如果我们没有设置方法属性`<form>`然后提交，那么它将使用方法`GET`

```
<form>
    <input type="submit" name="foo" value="test" />
</form> 
```

`POST`如果我们不设置方法属性，如何将默认方法更改为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T19:02:29.497

没有通用的方法可以避免这种情况。如果你想避免它真的很糟糕，你可能想要使用模板语言或者这样编译成 HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T19:06:36.063

无法更改`<form>`-Tag 的默认行为。您可以键入 method="post" （或使用编辑器的搜索和替换功能来替换`<form`或`<form method='post'`使用 JavaScript，这会将这个属性放在任何地方（这在禁用 JavaScript 的浏览器上不起作用）。您也可以使用服务器如果您的页面已生成，请使用 PHP 等语言进行替换。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-04-13T19:02:21.053

你不应该，[规范说 get 是默认方法](http://www.w3.org/TR/1999/REC-html401-19991224/interact/forms.html#h-17.3)，你不能真正改变它......

如果您想以牺牲最佳实践和一般体面为代价而变得懒惰，您可以使用 jQuery 来做到这一点：

```
$("form").attr("method","post"); 
```

但这真的很懒惰，我永远不会建议使用它。一开始就对它进行编码并没有太多的工作`method="post"`

此方法的主要问题是**必须**激活 JS 才能正确提交表单，因为您的服务器正在等待`POST`数据，如果 JS 失败，它可能不知道如何处理`GET`数据，除非您将其设置为同时获取，这可能与首先编写正确的 html 一样多……

# xpath - XPath 获取所有具有特定属性的子节点的父节点

> ID：10146727
> 
> 赞同：1
> 
> 时间：2012-04-13T18:58:08.860
> 
> 标签：xpath

我有一个没有一致结构的 XML。我需要看看是否有一种简单的方法来搜索所有父节点，这些父节点至少有一个属性为 modified="yes" 的子节点。有没有一种简单的方法可以用 XPath 做到这一点？我将要处理的 XML 非常庞大，我将使用一种 4GL 语言，它不具备 Visual Studio 的所有功能，但它确实提供了一些 COM 对象来帮助导航 XML DOM。该代码看起来与我在 Visual Studio 中所做的非常相似（请参见下面的示例 xml）

示例 XML（为了便于阅读而大大简化）：

```
<RootNode>
   <BOOK>
      <PRICE modified="yes">15</PRICE>
      <COPIES>10</COPIES>
   </BOOK>
   <MAGAZINE>
      <PRICE>8</PRICE>
      <COPIES modified="yes">100</COPIES>
   </MAGAZINE>
   <NEWSPAPER modified="yes">
      <PRICE>2</PRICE>
      <COPIES>75</COPIES>
   </NEWSPAPER>
   <KINDLE_SUB>
      <PRICE modified="yes">6</PRICE>
      <COPIES/>
   </KINDLE_SUB>
   <EMAIL_SUB>
      <UNSUBSCRIBE modified="yes">1</UNSUBSCRIBE>
   </EMAIL_SUB>
</RootNode> 
```

在 Visual Studio 中，您可能会这样做：

```
XmlDocument xmldoc = new XmlDocument();
xmldoc.LoadXml( [above xml] );

XmlNodeList nodelist = xmldoc.SelectNodes(" *XPATH HERE* "); 
```

应该希望返回给我：XmlNodeList 对象中的BOOK、MAGAZINE、KINDLE_SUB 和EMAIL_SUB 节点。

不应选择 NEWSPAPER 节点，因为它没有具有属性 modified="yes" 的子节点，即使 NEWSPAPER 节点本身具有此属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T19:20:05.290

大概是这样的：`/*//*[*[@modified='yes']]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T19:09:04.443

尝试：

```
//*[descendant::*[@modified='yes']] 
```

或更准确地说：

```
/*/*[descendant::*[@modified='yes']] 
```

* * *

**编辑**：使用上述 XPath 和修改后的示例 XML 返回的示例。

**XML**

```
<RootNode>
  <BOOK>
    <PRICE modified="yes">15</PRICE>
    <COPIES>10</COPIES>
  </BOOK>
  <foo>
    <bar>
      <baz>
        <yabba>
          <dabba>
            <doo modified="yes"/>
          </dabba>
        </yabba>
      </baz>
    </bar>
  </foo>
  <MAGAZINE>
    <PRICE>8</PRICE>
    <COPIES modified="yes">100</COPIES>
  </MAGAZINE>
  <NEWSPAPER modified="yes">
    <PRICE>2</PRICE>
    <COPIES>75</COPIES>
  </NEWSPAPER>
  <KINDLE_SUB>
    <PRICE modified="yes">6</PRICE>
    <COPIES/>
  </KINDLE_SUB>
  <EMAIL_SUB>
    <UNSUBSCRIBE modified="yes">1</UNSUBSCRIBE>
  </EMAIL_SUB>
</RootNode> 
```

`//*[descendant::*[@modified='yes']]`会返回：

```
RootNode
BOOK
foo
bar
baz
yabba
dabba
MAGAZINE
KINDLE_SUB
EMAIL_SUB 
```

`/*/*[descendant::*[@modified='yes']]`会返回：

```
BOOK
foo
MAGAZINE
KINDLE_SUB
EMAIL_SUB 
```

# antlr - Antlr3 关于 IS 这个词的混淆

> ID：10146728
> 
> 赞同：0
> 
> 时间：2012-04-13T18:58:10.747
> 
> 标签：antlr, antlr3

我想问一下“IS”这个词是否是保留字。这就是我问的原因。我试图为其创建解析器的语言是一种优先语言。我有一个看起来像这样的作业：

```
%VARIABLE    IS STRING 
```

使用 Antlr 解释器，我输入上面的语句，我收到一条错误消息，指出“MisMatchedSetException”。

如果我输入：

```
%VARIABLE    AND STRING 
```

一切都按预期工作。

我花了一些时间四处寻找解决方案，但到目前为止还没有。

这是我的语法的一部分：

```
assignis :  '%' IDENT logical_operator types ;

types    : ('FIXED' | 'STRING' | 'FLOAT');

logical_operator : 'IS' | 'AND';

IDENT    : ('a'..'z' | 'A'..'Z' | '0'..'9' | DOT)+; 
```

# rally - 为什么我的故事选择器上的查询不起作用？

> ID：10146730
> 
> 赞同：1
> 
> 时间：2012-04-13T18:58:20.573
> 
> 标签：rally

我正在尝试创建一个可以选择分配给所选迭代的工作产品的选择器。

以下代码创建的选择器只显示“没有可显示的内容”。即使我知道迭代中有几个用户故事。

注释掉查询规范会生成一个选择器，该选择器显示项目整个历史中的 200 个工作产品。

```
 function addChooser() {
        var rallyDataSource = new rally.sdk.data.RallyDataSource('__WORKSPACE_OID__',
                             '__PROJECT_OID__',
                             '__PROJECT_SCOPING_UP__',
                             '__PROJECT_SCOPING_DOWN__');

        var iterDropdown;
        var wpChooser;

        function onWPSelected(wpChooser, eventArgs) {
        var selectedItem = eventArgs.selectedItem;

        console.log(selectedItem);
        };

        function displayChooser(iterSelectedName) {
        var chooserConfig = {
            type : 'HierarchicalRequirement',
            title : 'Choose a Work Product',
            fetch : 'FormattedID,Name',
            width : 600
        };

        chooserConfig.query = '(Iteration.Name = "' + iterSelectedName + '")';

        wpChooser = new rally.sdk.ui.Chooser(chooserConfig, rallyDataSource);
        wpChooser.display(onWPSelected);
        };

        function onIterationSelected(dropdown, eventArgs) {
        var selectedName = dropdown.getSelectedName();

        displayChooser(selectedName);
        };

        function showDropdown() {
        var iterConfig = {
            rememberSelection : false
        };
        iterDropdown = new rally.sdk.ui.IterationDropdown(iterConfig, rallyDataSource);
        iterDropdown.display(document.getElementById('iterationDiv'), onIterationSelected);
        };

        //Load initial data
        showDropdown();
        };

    rally.addOnLoad(addChooser); 
```

我尝试将迭代添加到选择器的 fetch 属性中，但这没有影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T15:07:47.860

如果您查看发送给 Rally 的请求（在 Chrome 调试器或 Firebug 中），您会注意到它有一组额外的括号：

```
((Iteration.Name = "My Iteraton")) 
```

此外，从 Wsapi 返回以下错误字符串：

```
[Could not parse: Unknown operator ")"] 
```

看起来这是我们的选择[器](http://developer.rallydev.com/help/chooser)文档中的一个错误。根据您使用的组件，何时以及何时不使用带有查询参数的括号存在一些不一致之处。在这种情况下，您不应该：

```
chooserConfig.query = 'Iteration.Name = "' + iterSelectedName + '"'; 
```

请注意，您还可以使用[IterationDropdown 的 getQueryFromSelected](http://developer.rallydev.com/help/iteration-dropdown)方法：

```
chooserConfig.query = iterDropdown.getQueryFromSelected(); 
```

我将确保更新文档以在示例中不使用括号。

# c++ - C++“重载函数的调用不明确”编程错误

> ID：10146732
> 
> 赞同：0
> 
> 时间：2012-04-13T18:58:32.397
> 
> 标签：c++

我在我的代码中面临“模棱两可的调用错误”，我无法检测到它我认为该错误在 addressBookType 类中，但我能够检测到它！

由于这些错误，我必须重新发布这个问题？"

```
Compiler: MinGW GCC 4.6.2 32-bit
Executing  g++.exe...
g++.exe "D:\New Folder\Cpp\Assignment 4\q4\main.cpp" -o "D:\New Folder\Cpp\Assignment 4\q4\main.exe"    -I"E:\Program Files\Dev-Cpp\MinGW32\include"  -I"E:\Program Files\Dev-Cpp\MinGW32\include"   -L"E:\Program Files\Dev-Cpp\MinGW32\lib" -L"E:\Program Files\Dev-Cpp\MinGW32\lib" -static-libstdc++ -static-libgcc 
D:\New Folder\Cpp\Assignment 4\q4\main.cpp: In constructor 'addressBookType::addressBookType()':
D:\New Folder\Cpp\Assignment 4\q4\main.cpp:318:34: error: call of overloaded 'addressType()' is ambiguous

D:\New Folder\Cpp\Assignment 4\q4\main.cpp:318:34: note: candidates are:
D:\New Folder\Cpp\Assignment 4\q4\main.cpp:104:1: note: addressType::addressType(std::string, std::string, std::string, std::string)

D:\New Folder\Cpp\Assignment 4\q4\main.cpp:88:3: note: addressType::addressType()
D:\New Folder\Cpp\Assignment 4\q4\main.cpp:318:34: error: call of overloaded 'extPersonType()' is ambiguous

D:\New Folder\Cpp\Assignment 4\q4\main.cpp:318:34: note: candidates are:
D:\New Folder\Cpp\Assignment 4\q4\main.cpp:168:1: note: extPersonType::extPersonType(std::string, std::string)
D:\New Folder\Cpp\Assignment 4\q4\main.cpp:154:3: note: extPersonType::extPersonType()

Execution terminated 
```

这是我的代码：

```
#include<iostream>
#include<cstdlib>
#include<fstream>
#include<string>

using namespace std;

//////////////////////////////"personType" is from D.S Malik Course Website
////////////***Class person Start

class personType
{
public:
     void print() const;
       //Function to output the first name and last name
       //in the form firstName lastName.

    void setName(string first, string last);
      //Function to set firstName and lastName according 
      //to the parameters.
      //Postcondition: firstName = first; lastName = last

    string getFirstName() const;
      //Function to return the first name.
      //Postcondition: The value of firstName is returned.

    string getLastName() const;
      //Function to return the last name.
      //Postcondition: The value of lastName is returned.

    personType(string first, string last);
      //Constructor
      //Sets firstName and lastName according to the parameters.
      //The default values of the parameters are null strings.
      //Postcondition: firstName = first; lastName = last  

 private:
    string firstName; //variable to store the first name
    string lastName;  //variable to store the last name
};
/////////Class person End***///////////
// IMPLEMENTATION OF "PersonType" CLASS  //

///////////////// IMP START ////////////////////
personType::personType(string first="",string last=""){

}

void personType::setName(string first,string last){
    firstName=first;
    lastName=last;

}

string personType::getFirstName() const{

return firstName;
}

string personType::getLastName () const{
return lastName;
}

void personType::print() const{
    cout<<firstName<<" "<<lastName<<endl;
}
////////////////// IMP END ////////////////////

/////////////////////////////////////////////////////////////////////////////////////////////

////////***class addressType Start

class addressType{

    private:
    string stAddress;
    string city;
    string state;
    string zipcode;

    public:
        addressType();
        addressType(string,string,string,string);
        void setAddress(string);
        string getAddress();
        void setCity(string);
        string getCity();
        void setState(string);
        string getState();
        void setZipcode(string);
        string getZipcode();

};

// IMPLEMENTATION OF "addressType" CLASS  //

///////////////// IMP START ////////////////////
addressType::addressType(string=" ",string=" ",string=" ",string=" "){

}

void addressType::setAddress(string addr){
    stAddress=addr;
}

string addressType::getAddress(){
    return stAddress;
}

void addressType::setCity(string cit){
    city=cit;
}

string addressType::getCity(){
    return city;
}

void addressType::setState(string sta){
    state=sta;
}

string addressType::getState(){
    return state;
}

void addressType::setZipcode(string zip){
    zipcode=zip;
}

string addressType::getZipcode(){
    return zipcode;
}
///////////////// IMP END ////////////////////

//////////class addressType End***
/////////////////////////////////

//////////////////////////////////
//////***class extPersonType Start
class extPersonType {

    private:
        string relation;
        string phNo;

    public:
        extPersonType();
        extPersonType(string,string);
        void setRelation(string);
        string getRelation();
        void setphNo(string);
        string getphNo();

};

// IMPLEMENTATION OF "extPersonType" CLASS   //
///////////////// IMP START ////////////////////

extPersonType::extPersonType(string =" " ,string = " "){

}

void extPersonType::setRelation(string rel){
    relation=rel;
}

string extPersonType::getRelation(){
    return relation;
}

void extPersonType::setphNo(string ph){
    phNo=ph;
}

string extPersonType::getphNo(){
    return phNo;
}

///////////////// IMP END ////////////////////
//////////class extPersonType End***

///////////////////////////////////////////////////////////////////////////////////////////

//////////////////////////////"dateType" is from D.S Malik Course Website
////////***class DateType Start

class dateType
{
public:
    void setDate(int month, int day, int year);
      //Function to set the date.
      //The member variables dMonth, dDay, and dYear are set 
      //according to the parameters.
      //Postcondition: dMonth = month; dDay = day;
      //               dYear = year

    int getDay() const;
      //Function to return the day.
      //Postcondition: The value of dDay is returned.

    int getMonth() const;
      //Function to return the month.  
      //Postcondition: The value of dMonth is returned.

    int getYear() const;
      //Function to return the year.     
      //Postcondition: The value of dYear is returned.

    void printDate() const;
      //Function to output the date in the form mm-dd-yyyy.

    dateType(int month = 1, int day = 1, int year = 1900);
      //Constructor to set the date
      //The member variables dMonth, dDay, and dYear are set 
      //according to the parameters.
      //Postcondition: dMonth = month; dDay = day; dYear = year;
      //               If no values are specified, the default 
      //               values are used to initialize the member
      //               variables.

private:
    int dMonth; //variable to store the month
    int dDay;   //variable to store the day
    int dYear;  //variable to store the year
};
//////////class dateType End***
/////////////////////////////////

// IMPLEMENTATION OF "DateType" CLASS   //
///////////////// IMP START ////////////////////

void dateType::setDate(int month, int day, int year)
{
    dMonth = month;
    dDay = day;
    dYear = year;
}

int dateType::getDay() const 
{
    return dDay;
}

int dateType::getMonth() const 
{
    return dMonth;
}

int dateType::getYear() const 
{
    return dYear;
}

void dateType::printDate() const
{
    cout << dMonth << "-" << dDay << "-" << dYear;
}

    //Constructor with parameters
dateType::dateType(int month, int day, int year) 
{ 
    dMonth = month;
    dDay = day;
    dYear = year;
}
//////////////// IMP END /////////////////////

////////////////////////////////////////////////////////////////////////////////

//////***class addressBookType Start

class addressBookType {

private:
    string FirstName; //variable to store the first name
    string LastName;  //variable to store the last name
    string StAddress;

    string City;
    string State;
    string Zipcode; 
    string Relation;
    string PhNo;
    int DMonth; //variable to store the month
    int DDay;   //variable to store the day
    int DYear;  //variable to store the year

protected:

    addressType obj1;
    dateType obj2;
    extPersonType obj3;

public:
    addressBookType();
    static int count;
    void loadData(addressBookType *&ptr);

};

//////////class addressType End***
/////////////////////////////////

// IMPLEMENTATION OF "addressBookType" CLASS   //
///////////////// IMP START ////////////////////
addressBookType::addressBookType(){

}
void addressBookType::loadData(addressBookType *&ptr){

    ifstream fin;
    ifstream fout;

    string tempName;
    cout<<"Enter file name:"<<endl;

            if(!fin){

                cout<<"Cannot open the image file : "<<endl;
                cout<<"Input Failure"<<endl;
                system("pause");

            }

            else{

                for(int i=0;!fin.eof();i++){

                    fin>>FirstName;
                    fin>>LastName;
                    fin>>DDay;
                    fin>>DMonth;
                    fin>>DYear;
                    getline(fin,StAddress);
                    getline(fin,City);
                    getline(fin,State);
                    fin>>Zipcode;
                    fin>>PhNo;
                    fin>>Relation;

                    cout<<FirstName<<LastName<<DDay<<DMonth<<DYear<<StAddress<<City<<State<<Zipcode<<PhNo<<Relation<<endl;

                }

            }   

}

int main (){

     addressBookType *ptr;
     addressBookType obj;
     ptr=new addressBookType[500];
     obj.loadData(ptr);

     system("pause");
     return(0);
}

~Please help 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-13T19:01:02.740

这就是问题：

```
addressType();
addressType(string,string,string,string);
...

addressType::addressType(string=" ",string=" ",string=" ",string=" "){ 
```

您声明了两个构造函数，但第二个具有所有参数的默认值。因此，如果您调用`addressType()`，它可能是第一个无参数构造函数，也可能是第二个，所有参数都设置为默认值。

由于您似乎永远不会实现第一个构造函数，因此简单的解决方法就是删除声明。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T19:01:26.577

您已经声明了一个不带参数的构造函数和一个所有参数默认为`null`. 当您调用构造函数并且不传递任何参数时，编译器不知道您是否想要无参数的一，或者您是否想要多参数的一，但`null`传递所有参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T19:01:16.460

问题是您的`addressType`类中有 2 个冲突的构造函数：

```
addressType();
addressType(string,string,string,string); 
```

您在定义中为第二个声明了默认值：

```
addressType::addressType(string=" ",string=" ",string=" ",string=" "){

} 
```

你应该删除它们：

```
addressType::addressType(string,string,string,string){

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T19:03:09.760

这两个函数原型是无法区分的：

```
addressType::addressType(); 
addressType::addressType(string=" ",string=" ",string=" ",string=" "); 
```

`addressType`当您通过默认构造函数创建对象时（与 相同`extPersonType`）

该`=" "`符号表示如果未显式提供参数，`=`则使用后面的值（也称为默认参数值）。因此，在这种情况下，调用`addressType()`可能是没有参数的函数，也可能是其他所有参数都设置为的函数`" "`——编译器无法确定您的意思并抛出错误。

要修复，请从（至少）第二个函数的第一个参数中删除默认值

# php - 什么是客户端准备好的语句？

> ID：10146733
> 
> 赞同：21
> 
> 时间：2012-04-13T18:58:42.703
> 
> 标签：php, mysql, pdo, mysqli, prepared-statement

尝试学习新的东西——特别是在使用 MySQL 时尝试为未来的项目选择使用[MySQLi](http://php.net/mysqli)还是[PDO——](http://php.net/pdo)我偶然发现了[这个页面](http://php.net/manual/en/mysqli.overview.php)，它显示了对我可用的选项的概述。

本页底部是一个表格，比较了与 mysql 通信的三种主要方法的功能。在“ *API 支持客户端准备语句*”行中，它说 PDO 支持这一点，而 MySQLi 不支持。

我知道准备好的陈述是什么。[这个问题](https://stackoverflow.com/a/6379483/486900)的答案是我认为是服务器端准备语句的一个简单示例。而 PHP 是一种服务器端语言，这反过来意味着客户端准备好的语句是否可用并不重要。但这让我想知道为什么那甚至在 PHP 手册中列出。

那么什么是客户端准备好的语句呢？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-13T19:12:12.577

显然，客户端准备好的语句是由客户端而不是服务器准备的语句。

PDO 是一个支持多个 DBMS 接口（驱动程序）的数据访问抽象层，其中一些支持服务器端准备好的语句（例如：MySQL 4.1+），其中一些不支持（例如：MySQL 3）。

如果 PDO 驱动程序不支持服务器端准备好的语句，PDO 将在客户端*模拟它们并使用通用查询接口来执行它们。*

MySQLi 不支持它们的原因很简单：MySQLi 是 MySQL 特定的扩展，是一个确实支持服务器端准备语句的 RDBMS，因此没有理由模拟它们。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-13T19:08:25.113

就像评论中所说的那样，在这种情况下，“客户端”指的是 PHP，“服务器”指的是 MySQL。PDO 支持 MySQL 以外的数据库。并非所有这些数据库/数据库驱动程序本身都支持准备好的语句，在这些情况下，PDO 将自己模拟这些语句。MySQLi 不会（我不确定它什么时候必须这样做——也许是在它处理旧的 MySQL 驱动程序时？）。

您可能要考虑的另一个因素 - 某些 PHP 框架需要 PDO 并且不支持 mysqli。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T19:53:06.680

使用 PDO，您可以使用准备好的语句（在代码中），无论您使用 PDO 连接到的数据库是否支持它们。

如果服务器处理准备好的语句，那么 PDO 将让服务器处理它们（服务器端）。如果不是，那么 PDO 只是在 PDO（客户端）中模拟准备好的语句，但最终必须将每个查询发送到服务器。

# mongodb - 从现有 MongoDB 条目中删除键/值

> ID：10146735
> 
> 赞同：58
> 
> 时间：2012-04-13T18:58:48.437
> 
> 标签：mongodb

我需要从特定集合中的每个条目中删除某个键和值。我已经研究过删除，这似乎只适用于整个条目。查看更新，我不相信用 null 或空字符串更新特定键会实现我想要做的事情。我是mongodb的初学者，所以请原谅我的无知。

长话短说，我该怎么转

```
{
  "_id" : 1234,
  "name" : "Chris",
  "description" : "Awesome"
} 
```

进入

```
{
  "_id" : 1234,
  "name" : "Chris"
} 
```

不删除条目并创建一个新条目，或者使用任何非 mongodb 命令？谢谢！

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2012-04-13T19:04:50.837

尝试[`$unset`](http://docs.mongodb.org/manual/reference/operator/update/unset/)调用`update()`.

像这样：

```
db.collection_name.update({ _id: 1234 }, { $unset : { description : 1} }) 
```

而且，正如[vikneshwar](https://stackoverflow.com/users/1318969/vikneshwar)评论的那样，如果您想从所有（或多个）文档中删除一个字段，您可以`updateMany()`像这样使用：

```
db.collection_name.updateMany({}, { $unset : { description : 1} }) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-24T16:48:15.680

要引用一个包并删除各种“键”，试试这个

```
db['name1.name2.name3.Properties'].remove([ { "key" : "name_key1" }, { "key" : "name_key2" }, { "key" : "name_key3" } )] 
```

* * *

## 回答 #3

> 赞同：-9
> 
> 时间：2012-04-14T09:12:41.147

还要考虑一下，如果不存在`upsert()`，则将您的行作为新文档插入或更新现有文档（如果有）。`_id`

# php - 必填字段错误消息

> ID：10146737
> 
> 赞同：-1
> 
> 时间：2012-04-13T18:58:58.683
> 
> 标签：php

当字段为空时，我正在使用这段代码显示错误，但它只是将我返回到该位置。

```
$err = array();
if(empty($native) )
{
$err[] = "ERROR - Enter Native Language";
//header("Location: language.php?msg=$err");
//exit();

 if(!empty($err))  {
   echo "<div class=\"msg\">";
  foreach ($err as $e) {
    echo "* $e <br>";
    }
  echo "</div>";    
   } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T19:02:08.153

方括号是怎么回事？如果（空（$本机**]**））

您还需要`$err`使用索引引用数组元素。

这应该工作

```
$err = array();
if(empty($native))
{
  $err[] = "ERROR - Enter Native Language";
  header("Location: language.php?msg=$err[0]");
  ... 
```

此外，按照@Lawrence 的建议对字符串进行 url 编码是个好主意：)

# apache - 搜索引擎优化友好的网址，以避免重复的内容

> ID：10146743
> 
> 赞同：1
> 
> 时间：2012-04-13T18:59:40.400
> 
> 标签：apache, mod-rewrite, url-rewriting, seo

我现在几乎完成了我的 .htaccess 文件，这样我的网址就可以正常工作了。但是我有一个快速的问题：

我有一个看起来像这样的重写：

```
 RewriteRule ^fishing/([^/]*)/?$ region.php?region=$1 [L] 
```

这是因为如果我输入fishing/fife/ 它会加载region.php 文件。然而，我不知道也不期望的是，如果我输入 region.php?region=fife 那么这也有效。

我相信这会给我重复的内容，并且我的 SEO 评级会受到影响。我该怎么做才能让如果我输入 region.php?region=fife 它会自动更改为 fishing/fife/ ????

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T15:27:20.683

更好的解决方案是[规范 URL](http://googlewebmastercentral.blogspot.com/2009/02/specify-your-canonical.html)。这告诉搜索引擎哪个 URL 是您要在搜索结果中显示的 URL，并且到达该页面的所有其他 URL 都是它的副本，并将其计入该 [页面的排名（包括传入链接）。

您不应该*只*希望搜索引擎找不到其他页面。如果他们这样做，那就是重复的内容，显然是你应该避免的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T19:05:32.383

只要您不链接到非重写 URL 结构（即 region.php?region=fife），那么网络爬虫就无法发现该 URL，您也不会获得重复的内容。

如果一个人输入该 URL 并获得结果，就 SEO 而言，这是可以的。

因此，请确保只在您的应用程序中使用漂亮的 URL 结构。

# python - 为了良好的风格，当数学运算符作为参数在内部时，是否应该用空格包围它？

> ID：10146745
> 
> 赞同：0
> 
> 时间：2012-04-13T18:59:41.407
> 
> 标签：python, styles

我阅读了[PEP 8: Style Guide for Python](http://www.python.org/dev/peps/pep-0008/)，但我不太确定如何在参数中设置数学运算符的样式。

例如，对于`=`标志 PEP 8 说

```
Yes:
    x = 3
    y = foo(bar=3)
No:
    x=3
    y = foo(bar = 3) 
```

但是其他数学运算符，如`-`, `+`,`/`等呢？哪种风格好？

```
foo_bar = bar[i - 3][j + 2]
z = foobar(y=i - 1, z=k + 2) 
```

或者

```
foo_bar = bar[i-3][j+1]
z = foobar(y=i-1, z=k+2) 
```

?

老实说，我认为后者看起来更好。

**从 PEP 8：**

其他建议

*   始终在这些二元运算符两边加上一个空格：赋值 (=)、扩充赋值（+=、-= 等）、比较（==、<、>、!=、<>、<=、>= , in, not in, is, is not), 布尔值 (and, or, not)。

*   在算术运算符周围使用空格：

*   当用于指示关键字参数或默认参数值时，请勿在 = 符号周围使用空格。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T19:01:57.170

运算符应始终被空格包围。`=`当用于关键字参数时，不被视为运算符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T19:06:05.767

在 Pep 8 的顶部是这个建议：

> 但最重要的是：知道何时不一致——有时风格指南并不适用。如有疑问，请使用您的最佳判断。

有两个明确的例外，我认为参数传递属于这一点：

> 1.  应用规则会使代码的可读性降低，即使对于习惯于阅读遵循规则的代码的人也是如此。

我会省略参数中的空格，以作为示例：

```
foo_bar = bar[i - 3][j + 2]
z = foobar(y=i-1, z=k+2) 
```

# apache-flex - 关于 Flex 树本地化

> ID：10146746
> 
> 赞同：0
> 
> 时间：2012-04-13T18:59:47.577
> 
> 标签：apache-flex, localization

我使用 mx:XML 作为 mx:Tree 的数据源，并希望显示本地化值。

XML 看起来像：

```
<myTag label="component.mytextKey.txt"/> 
```

. 我在我的属性文件中定义了属性，比如

```
component.mytextKey.txt=Translated Text for my textKey. 
```

然后在 mx:Tree 中，我指定 labelField="@label" 来显示值。

mx:Tree 将“component.mytextKey.txt”显示为未翻译的文本。

我尝试使用`@Resource(key='@label`,`bundle='mybundle')`和`{resourceManager.getString('mybundle',@label)}`作为 mx:Tree 中 labelFIeld 的值。都没有运气。

我还尝试将值指定为： 仍然没有运气，树正试图按原样显示标签，而不是显示评估值。

有什么建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T23:47:46.427

@Resource 是一个构建时命令。您可以尝试使用 labelFunction 和 ResourceManager 来加载您的本地化数据，如下所示：

```
<mx:Tree labelFunction="{myLabelFunction}" />

function myLabelFunction(item:XML):String{ 
    return ResourceManager.getInstance().getString("BundleName", item.@label.toString());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T02:23:50.230

也不要忘记任何不被视为字符串文字的东西，需要包裹在绑定大括号中（例如{}）。这告诉编译器它是来自方法、属性等的派生值......

# c - 在C中获取子进程的CPU（用户和系统）和实际使用时间

> ID：10146747
> 
> 赞同：0
> 
> 时间：2012-04-13T18:59:51.710
> 
> 标签：c, linux, time, exec, cpu-usage

因此，在列出我正在运行的命令的进程 ID 和名称、CPU 时间和相同命令的实际使用时间时，我为我的 OS 类和一个增加值选项添加了一项工作。问题是，我只能在它们完成后使用 times() 函数获取它们，并且信息应该**在**它们运行时出现。有没有办法做到这一点？

我通过分叉父进程然后`execlp("xterm","xterm","-hold", "-e", command, NULL)`在子进程上运行来启动命令。如您所见， -hold 可防止窗口立即关闭，例如，这使我能够看到 date 命令的输出，但另一方面使 xterm 挂起，直到我关闭它kill() 或直接在 xterm 窗口上。

感谢所有帮助。谢谢你。:)

注意：操作系统是 Linux（我使用的是 Ubuntu 11.04，但代码应该适用于所有发行版）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:13:12.243

您可以从 中读取此信息，您感兴趣的进程 ID 在哪里。`/proc/*pid*/stat`*`pid`*

有关详细信息，请参见[proc 手册页](http://www.kernel.org/doc/man-pages/online/pages/man5/proc.5.html)。

另请查看，它允许您选择应显示的字段。再次，请参阅[手册页](http://linux.die.net/man/1/ps)以获取详细信息。`ps -o *format*``ps`

# regex - 正则表达式 [Az] 在 grep 中的行为

> ID：10146757
> 
> 赞同：1
> 
> 时间：2012-04-13T19:00:41.330
> 
> 标签：regex, grep

我认为 [xy] 匹配从 x 的 ascii 代码到 y 的 ascii 代码的所有字符。因此，[Az] 应该是 65 到 122 之间的任何字符。但是 bash 中的 grep 表示“无效范围”，并且 [aZ] 对所有字母都是正确的，在 ascii 代码中的范围从 97 到 90。

在这种情况下，grep 的行为究竟如何？通常， [xy] 与正则表达式中的 ascii 代码无关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T19:11:08.740

regex(5) 没有说明任何关于实现的内容。`[a-Z]`也可以用其他方式解释（参见 joe 的评论） => 如果有人按照您想要的方式`(122-65+1)= 58 != 26*2`实现，您将包括其他字符。`[a-Z]`

无论如何，底线是 grep 不允许它， regex(5) 不强制它。

所以只需使用`[a-zA-Z]`.

# linq - 将 LINQ 与 IList 一起使用时出错

> ID：10146759
> 
> 赞同：1
> 
> 时间：2012-04-13T19:00:50.900
> 
> 标签：linq, c#-4.0

我正在尝试使用 LINQ，但我不断收到此错误消息：

> 运算符“<”不能应用于“Ilistprac.Location”和“int”类型的操作数

我尝试了覆盖，但收到一条错误消息：

> 'Ilistprac.Location.ToInt()'：找不到合适的方法来覆盖

所有的 IList 接口也是用 IEnurmerable 实现的（除非有人希望我在此列出）。

```
class IList2
{
    static void Main(string[] args)
    {

     Locations test = new Locations();
     Location loc = new Location();
     test.Add2(5);
     test.Add2(6);
     test.Add2(1);
     var lownumes = from n in test where (n < 2) select n;

     }
 }

public class Location
{
    public Location()
    {

    }
    private int _testnumber = 0;
    public int testNumber
    {
        get { return _testnumber; }
        set { _testnumber = value;}
    }

public class Locations : IList<Location>
{
    List<Location> _locs = new List<Location>();

    public Locations() { }

  public void Add2(int number)
    {
        Location loc2 = new Location();
        loc2.testNumber = number;
        _locs.Add(loc2);
    }

 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T19:03:31.180

您可能想将 n.testNumber 与 2 进行比较

```
var lownumes = from n in test where (n.testNumber < 2) select n; 
```

编辑：如果您想重载运算符，请查看本教程：

[http://msdn.microsoft.com/en-us/library/aa288467%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/aa288467%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T19:04:47.233

尝试

```
var lownumes = from n in test where (n.testNumber < 2) select n; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T19:07:40.007

您要么想要比较`n.testNumber`，要么需要重载类`<`中的运算符，`Location`以便实际将其与`int`.

```
public class Location
{
    public Location()
    {

    }

    private int _testnumber = 0;
    public int testNumber
    {
        get { return _testnumber; }
        set { _testnumber = value;}
    }

    public static bool operator <(Location x, int y) 
    {
        return x.testNumber < y;
    }

    public static bool operator >(Location x, int y) 
    {
        return x.testNumber > y;
    }
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T20:44:47.433

另一种选择是在 Location 类上创建一个隐式转换运算符，如下所示：

```
public class Location
{
    // ...
    public static implicit operator int(Location loc)
    {
        if (loc == null) throw new ArgumentNullException("loc");
        return loc.testNumber;
    }
} 
```

`Location`有了上面的内容，编译器将在将实例与 int 进行比较时尝试在实例上调用此转换运算符。

# ruby-on-rails - OS X Lion 上的 Rubymine 4：如何访问捆绑的数据库支持？

> ID：10146760
> 
> 赞同：0
> 
> 时间：2012-04-13T19:00:51.647
> 
> 标签：ruby-on-rails, ruby, database, plugins, rubymine

这一定很明显，但是我在 OSX Lion 上的全新 Rubymine 4.0.2 中找不到任何访问捆绑数据库支持的方法。查看 Preferences|Plugins，Database Support 被选中并标记为“Bundled”，这大概意味着它已安装。此外，具有新数据库要求的 Rails 项目会提示安装适当的 JDBC 连接器（即 mysql、sqlite 等），这些连接器安装良好。困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T22:09:07.797

不知道我是怎么错过它的，虽然它肯定不明显：要访问 DB UI，请选择 View | 工具窗口 | 数据源。在紧要关头可以正常工作，但不能真正替代一个好的数据库工具——许多免费工具要好得多。

# visual-studio-2010 - Visual Studio 2010 停止格式化我的 javascript...？

> ID：10146773
> 
> 赞同：0
> 
> 时间：2012-04-13T19:01:25.783
> 
> 标签：visual-studio-2010

所以 CTRL E + D 自动格式化我的页面，我喜欢它！

通常，如果我的代码中有错误，格式将不再有效......我明白了。

但我的 javascript 中没有错误（由 IE 和 Chrome 验证），它突然退出格式化......

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:29:09.517

^(应OP的要求促进评论以回答：)

您可能会遇到一个错误，它被 IE 和 Chrome 忽略，但在 VS 中无法通过 JScript 验证（缺少分号、额外的括号等）。您是否尝试过重新启动 Visual Studio？

另外，它是一个网站还是一个 Web 应用程序项目？是否禁用了 JScript 验证？您可以尝试通过 JSLint 或其他验证工具运行您的 JavaScript。

* * *

**编辑：**根据 OP（见下面的评论），他在属性列表中有一个多余的尾随逗号，阻止了 VS 中的自动格式化。例如：

```
var culprit = {
    property1 = "23",
    property2 = "43", // <-- Extraneous comma
}; 
```

# c# - 重新定位丢弃的 TFS 构建

> ID：10146783
> 
> 赞同：2
> 
> 时间：2012-04-13T19:02:03.817
> 
> 标签：c#, tfs

我需要移动包含 TFS 构建的文件共享，因此我编写了一些代码来遍历构建集合并更新它们的放置位置。我知道代码做*了一些事情*，因为当我在第二次运行时调试代码时，droplocation 现在显示新的 unc 路径。但是，当我进入团队资源管理器并单击“放置位置”进行构建时，我会被带到旧位置。

我错过了什么？

```
var buildServer = tpc.GetService<IBuildServer>();
                        foreach (var build in buildServer.QueryBuilds(projectName))
                        {
                            string newDropLocation = FixPath(build.DropLocation);
                            string newLogLocation = FixPath( build.LogLocation);

                            build.DropLocation = newDropLocation;
                            if(!String.IsNullOrEmpty(newLogLocation))
                            {
                                build.LogLocation = newLogLocation;
                            }
                            build.Save();

                            Console.WriteLine("------------");
                            Console.WriteLine(newDropLocation);
                            Console.WriteLine(newDropLocationRoot);
                            Console.WriteLine(newLogLocation);
                        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T14:29:03.647

似乎此功能现在已内置到[Community TFS Build Extensions](http://tfsbuildextensions.codeplex.com/releases/view/92255)中。社区 TFS 构建管理器能够搜索和替换现有构建的更新。

# java - 如何在不关闭主程序的情况下关闭 jframe？

> ID：10146804
> 
> 赞同：0
> 
> 时间：2012-04-13T19:03:36.833
> 
> 标签：java, jframe

我在该应用程序中设计了 java 桌面应用程序，当我按下一个按钮时，另一个 Jframe 会显示绘制一棵树，但是当我关闭 Jframe 时，整个操作已关闭，但我只想关闭那个 Jfarme 我该怎么办？这是jframe代码：

```
public  class DrawTree extends JFrame{
 public int XDIM, YDIM;
public Graphics display;

@Override
public void paint(Graphics g) {} // override method

// constructor sets window dimensions
public DrawTree(int x, int y)
{
XDIM = x;  YDIM = y;
this.setBounds(0,0,XDIM,YDIM);
this.setVisible(false); 
    this.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
display = this.getGraphics();
// draw static background as a black rectangle
display.setColor(Color.black);
display.fillRect(0,0,x,y);
    display.setColor(Color.red);
try{Thread.sleep(500);} catch(Exception e) {} // Synch with system
}  // drawingwindow

public static int depth(BinaryNode N)  // find max depth of tree
{
if (N==null) return 0;
    int l = depth(N.left);
    int r = depth(N.right);
    if (l>r) return l+1; else return r+1;
}

// internal vars used by drawtree routines:
private int bheight = 50; // branch height
private int yoff = 30;  // static y-offset

// l is level, lb,rb are the bounds (position of left and right child)
private void drawnode(BinaryNode N,int l, int lb, int rb)
{
if (N==null) return;
try{Thread.sleep(100);} catch(Exception e) {} // slow down
    display.setColor(Color.green);
display.fillOval(((lb+rb)/2)-10,yoff+(l*bheight),20,20);
display.setColor(Color.red);
display.drawString(N.element+"",((lb+rb)/2)-5,yoff+15+(l*bheight));
display.setColor(Color.blue); // draw branches
    if (N.left!=null)
    {
       display.drawLine((lb+rb)/2,yoff+10+(l*bheight),((3*lb+rb)/4),yoff+(l*bheight+bheight));
           drawnode(N.left,l+1,lb,(lb+rb)/2);
    }
    if (N.right!=null)
    {
           display.drawLine((lb+rb)/2,yoff+10+(l*bheight),((3*rb+lb)/4),yoff+(l*bheight+bheight));
           drawnode(N.right,l+1,(lb+rb)/2,rb);
    }
} // drawnode

public void drawtree(BinaryNode T)
{
    if (T==null) return;
int d = depth(T);
bheight = (YDIM/d);
display.setColor(Color.white);
display.fillRect(0,0,XDIM,YDIM);  // clear background
    drawnode(T,0,0,XDIM);
}} 
```

还有一个问题

当我从树类中新建一个对象时，我想在我的所有按钮代码中访问该对象，所以我应该在哪里定义它或者更好地说，我应该如何定义可以在我的所有代码中访问的对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T19:09:54.507

您应该将默认关闭操作设置为 HIDE_ON_CLOSE

```
 this.setDefaultCloseOperation(JFrame.HIDE_ON_CLOSE); 
```

建议：请注意，使用 DISPOSE_ON_CLOSE，如果这不是打开的最后一个 JFrame，您仍然可以保持程序运行：（取自 javadocs）注意：当 Java 虚拟机 (VM) 中的最后一个可显示窗口是处理后，VM 可能会终止。有关详细信息，请参阅 AWT 线程问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T19:04:51.980

您可以简单地隐藏 JFrame。

```
this.hide(); 
```

编辑：对于上述内容：Youssef G 的答案更好。

对于问题的第二部分。创建你的树类并在你的程序中传递对象，所以它是同一个树对象。不要创建一个新的。

例如：

```
Class A {
     B b;    //B object inside class A
     Tree t;  //Tree object inside class A
}
Class B {
     Tree t;    //Tree object inside class B
} 
```

现在您在两个类中都有一个树对象。当代码在 A 类中运行时，您可以创建一个新树，它是 B 类的树。然后说 this.t = bt;

希望这可以帮助。

# c# - 是否使用扩展方法向接口 Anti-OOP 添加实现？

> ID：10146807
> 
> 赞同：1
> 
> 时间：2012-04-13T19:03:40.477
> 
> 标签：c#, oop

我有一个接口。由于新的要求，接口现在有一个可以实现的方法。

```
public static string ToEntityConnectionString(this IEnvironmentProvider provider)
//Converts a standard connection string to EntityFramework compatible string 
```

我可以将接口转换为抽象类，尽管我现在将自己限制为这个类作为继承类。虽然，这个接口目前仅用于依赖注入。

经过一番思考，我意识到我可以通过扩展方法将功能附加到接口。这似乎是真的。向接口添加实现？做这样的事情是否被认为是一种不好的做法？如果是这样，为什么？考虑到这种情况，应该改用什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T19:12:51.457

当您在接口上有扩展方法时，您不应该将其视为向该接口添加实现。它只是一个接受接口的静态辅助方法，并根据接口的公开成员完成所有工作。这是您在 OO 设计中经常看到的东西；这并不违反 OO 原则。“扩展”部分只是让它看起来更漂亮，更容易找到/输入。如果您开始真正将扩展方法视为接口的一部分，您将遇到更大的问题，因为事实并非如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T19:06:58.650

我将扩展方法视为简单的辅助方法，类的用户可以通过复制粘贴代码轻松完成。如果可以在不访问非公共属性的情况下执行该功能，那么是否真的提供了任何新的东西来证明将其添加到接口是合理的，那么没有。

# matlab - 我们如何在 Matlab 中使用 Arrayfun 访问多个元素？

> ID：10146808
> 
> 赞同：1
> 
> 时间：2012-04-13T19:03:54.240
> 
> 标签：matlab, cuda, parallel-processing, gpu

谁能帮助我从函数（fun.m）内部访问数组的多个元素（此处为 xGrid 和 yGrid）。性能是我的关键点。这是函数（被调用）：

```
function count = fun(x0,y0,maxIter)
z0 = complex(x0,y0);
z = z0;
count = 1;
while count <= maxIter && (real(z)*real(z) + imag(z)*imag(z)) <= 4
    count = count + 1;
    z = z*z + z0;
end
count = log(count); 
```

主要：

```
x = parallel.gpu.GPUArray.linspace( xlim(1), xlim(2), gridSize );
y = parallel.gpu.GPUArray.linspace( ylim(1), ylim(2), gridSize );
[xGrid,yGrid] = meshgrid( x, y );
count = arrayfun(@fun,xGrid, yGrid, maxIter); 
```

我知道我只能访问 x0 和 y0（在 fun/arrayfun 中，当 i=1，j=1 时），但我也可以在同一个位置访问 x1、x2... 和 y1、y2..（i= 1 和 j=1) 并且没有在参数中传递它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:25:53.840

（抱歉之前的答案，我误读了这个问题）

如果你想从 fun 内部访问 xGrid 和 yGrid 的其他元素，为什么不将 xGrid 和 yGrid 传递给函数呢？Matlab 使用[copy-on-write](http://www.mathworks.com/matlabcentral/answers/152-can-matlab-pass-by-reference)，因此除非您写入它们，否则将它们传入不应影响代码的效率。

# php - Kohana 2.3.4 ORM - 从数据透视表访问数据

> ID：10146811
> 
> 赞同：0
> 
> 时间：2012-04-13T19:04:01.810
> 
> 标签：php, orm, relational-database, kohana-2

我试图访问存储在数据透视表上的数据但没有成功...

我的表格和模型是这些：

*国家
-id
-name
-code_name
-active

*网站
-id
-season_id
-title
-active

国家站点：
-country_id
-site_id
-year

```
class Site_Model extends ORM {

  protected $has_and_belongs_to_many = array('countries');
}

class Country_Model extends ORM {

  protected $has_and_belongs_to_many = array('sites');
} 
```

我想知道是否有内置方法或其他东西可以访问数据透视表的“年份”值。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:37:50.683

您需要一个 has_many“通过”关系。见这里：[http ://docs.kohanaphp.com/libraries/orm/advanced#has_many_through_relationships](http://docs.kohanaphp.com/libraries/orm/advanced#has_many_through_relationships)

# facebook - 邀请多个朋友使用应用程序的最佳方式是什么？

> ID：10146812
> 
> 赞同：-1
> 
> 时间：2012-04-13T19:04:03.333
> 
> 标签：facebook

我们正在构建一个应用程序。在我们的应用程序上，您可以将应用程序链接发送给您的朋友，我们希望将此作为个人信息发送。最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T19:16:02.120

如果您使用 facebook JS SDK，那么使用 Facbeook 请求对话框实际上非常容易（https://developers.facebook.com/docs/reference/dialogs/requests/）

以下是我过去使用过的一些代码：

```
<div id="fb-root"></div>
<script src="//connect.facebook.net/en_US/all.js"></script>
<script>
  FB.init({
    channelUrl : 'http://www.yoursite.com/channel.php',
    appId: 'yourfacebookappid',
    status: true,
    cookie: true,
    xfbml: true,
    oauth: true
  });

  function sendRequestViaMultiFriendSelector() {
    FB.ui({method: 'apprequests',
      title: 'Select Friends To Invite',
      message: 'Join me in playing this app!'
    }, inviteCallback);
  }

  function inviteCallback(response) {
    if (response==undefined) {
      // user didn't invite anyone
    } else {
      // user invited someone
    }
  }
</script> 
```

基本上，一旦您将 Javascript SDK 安装到您的应用程序中，您只需在页面上使用链接或某些操作调用 sendRequestViaMultiFriendSelector 函数，请求对话框就会弹出。然后您可以在另一个函数中处理回调，它将确定用户是否邀请了某人，以便您可以根据需要向他们显示其他副本。

# asp.net-mvc-3 - 具有流畅验证的 MVC3 ReCaptcha

> ID：10146813
> 
> 赞同：2
> 
> 时间：2012-04-13T19:04:14.907
> 
> 标签：asp.net-mvc-3, recaptcha, fluentvalidation, mvcrecaptcha

我正在尝试使用 FluentValidation 验证 ReCaptcha，但我遇到了一些问题。即使 ReCaptcha.Validate 返回 true，ModelState 也是无效的。为了验证 ReCaptcha，我在视图模型中添加了一个字段。在检查 ModelState 是否有效之前，我将 ReCaptcha 字段设置为从 ReCaptcha.Validate 返回的任何内容。

```
 [HttpPost]
    [ValidateAntiForgeryToken]
    public ActionResult Index(Over18Model model)
    {
        model.ReCaptcha = Microsoft.Web.Helpers.ReCaptcha.Validate("XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX");

        if (ModelState.IsValid)
        {
            var table = new Prospect();
            dynamic o = new ExpandoObject();
            {
                o.FirstName = model.FirstName;
                o.LastName = model.LastName;
                o.Email = model.Email;
            }
            table.Save(o);
            return RedirectToAction("ThankYou", "Public");
        }
        ModelState.AddModelError(string.Empty, "Errors:  " + string.Join(" ; ", ModelState.Values.SelectMany(x => x.Errors).Select(x => x.ErrorMessage)));
        return View(model); 
    }

    [Validator(typeof(Over18ModelValidator))]
    public class Over18Model
    {
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public string Email { get; set; }
        public bool ReCaptcha { get; set; }
    }

    public class Over18ModelValidator : AbstractValidator<Over18Model>
    {
        public Over18ModelValidator()
        {
            RuleFor(x => x.FirstName).NotEmpty().WithMessage("First Name is Required");
            RuleFor(x => x.LastName).NotEmpty().WithMessage("Last Name is Required");
            RuleFor(x => x.Email).NotEmpty().WithMessage("Email is Required");
            RuleFor(x => x.Email).EmailAddress().WithMessage("Invalid Email");
            RuleFor(x => x.ReCaptcha).Equal(true).WithMessage("ReCaptcha error");
        }
    } 
```

Razor 代码如下所示...

```
<div class="signUpOver18">
    @using (Html.BeginForm())
    {
        @Html.AntiForgeryToken()         
        @Form.TextBox(name: "FirstName", value: @Model.FirstName, labelText: "First Name:", containerClass: "fname", txtfldClass: "standard names", maxLength: 50) 
        @Form.TextBox(name: "LastName", value: @Model.LastName, labelText: "Last Name:", containerClass: "lname", txtfldClass: "standard names", maxLength: 100) 
        </div>
        @Form.Submit(value: "Enter The Sweepstakes", myClass: "btnSubmit")

        <div class="recaptchaHolder">
            @ReCaptcha.GetHtml(theme: "red", publicKey: "XXX-XXXX_XXXX-XX_") 
        </div>

        @Html.ValidationSummary(true)  
    }
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:28:23.293

如果不强制使用 fluentvalidation 来验证验证码...尝试使用 microsoft web helpers..它可以完美运行..

# android - 从链接下载图片并在 Android 自定义图库中显示

> ID：10146818
> 
> 赞同：1
> 
> 时间：2012-04-13T19:04:52.377
> 
> 标签：android, android-gallery

我想从一堆 .jpeg 链接下载图像，然后在自定义图库中显示它们。

我能够下载图像、创建位图和所有...

为了在 android 厨房中输入图像，我使用

```
MediaScannerConnection.scanFile(obContext, new String[] { f.getAbsolutePath() }, null, null); 
```

并且要在我的自定义图库中仅查看那些特定图像，我使用以下代码

```
Cursor imagecursor=managedQuery( MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
        columns, 
            MediaStore.Images.Media.DATA + " like ? ",
            new String[] {"%myDesiredDirectory%"},  
            null); 
```

但现在

扫描时，它正在为新下载的图像创建缩略图。这些缩略图在画廊中也可见。所以同一张照片可见两次。这是不希望的。

谁能帮我**避免**创建缩略图，如果无法避免，我们可以在删除原始文件时也删除缩略图吗？

提前谢谢客栈....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T09:01:44.490

存储缩略图的一种方法是创建自定义对象，该对象将具有缩略图数据、对原始文件的引用以及有关缩略图的其他一些数据，然后将对象序列化为二进制文件。从单个二进制文件重新加载缩略图会非常快。缩略图很小，因此内存消耗也不应该成为问题。

如果您不想创建缩略图，那么只需将图像缩小到您的大小`ImageView`，这样图像就会看起来不错，您不必创建缩略图，但是此操作可能会占用时间和内存。

# netbeans - 在 NetBeans 中如何更改默认 JDK？

> ID：10146819
> 
> 赞同：47
> 
> 时间：2012-04-13T19:04:52.897
> 
> 标签：netbeans, default, java

> **可能重复：**
> [更改运行 Netbeans 的 Java 平台](https://stackoverflow.com/questions/2809366/changing-the-version-on-which-netbeans-runs)

这是我的默认 JDK（1.6）和我想设置为默认 JDK（1.7）的图像

[http://tinypic.com/view.php?pic=35ldlye&s=5](http://tinypic.com/view.php?pic=35ldlye&s=5)

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-04-13T19:10:05.967

如果我没记错的话，您需要`netbeans_jdkhome`在您的 netbeans 配置文件中设置该属性。应该在你的`etc/netbeans.conf`文件中。

# time - ColdFusion - 从分钟数创建时间

> ID：10146820
> 
> 赞同：8
> 
> 时间：2012-04-13T19:04:57.220
> 
> 标签：time, coldfusion, formatting

我有用户输入的分钟数（即 25、120、300 等），我需要以 ah:mm:ss 格式显示。是否有任何内置的 ColdFusion 函数可以为我做到这一点，或者是否有人对构建字符串的最简单方法有任何建议？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-13T19:26:11.623

```
<cfset totaltime = "#totalminutes\60#:#numberformat(totalminutes % 60, "00")#:00" /> 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-18T20:07:15.013

游戏有点晚了，但这很好用：

```
TimeFormat(CreateTimeSpan(0,0,minutes,0)) 
```

# sql - 多次更新同一行的 XML

> ID：10146822
> 
> 赞同：1
> 
> 时间：2012-04-13T19:05:02.470
> 
> 标签：sql, xml, sql-server-2008, xmlupdate

我有一个 XML 列需要为同一个 ID 多次更新。当我运行查询时，它只会为第一个匹配的 ID 更新 XML。这是查询

```
Update  Quote 
Set     [XML].modify('replace value of (/Document/LineItems/LineItem[@ID=sql:column("QLines")]/LineItemStatus/text())[1] with "DELETED"')
From    Quote Qt
    Inner Join @QuoteLines Q on Qt.QuoteID=Q.QtID

@QuoteLines Table
QLines  QtID
30  111645001
40  111645001

Quote Table
QuoteID         XML
111645001   '<Document ID="111645001">' 
```

在报价表中，第 30 和第 40 行的 XML 状态应为“已删除”，但它只为第 30 行更新。

我不必使用游标或类似迭代的东西。谢谢

# iphone - iPhone iOS UIFont 转换为 CTFontRef 导致大小不对齐

> ID：10146823
> 
> 赞同：2
> 
> 时间：2012-04-13T19:05:07.280
> 
> 标签：iphone, objective-c, ios, pdf-generation, ctfontref

我知道 UIFont 和 CTFont 是不同的东西，但我能够让它发挥作用。

我正在尝试生成 PDF 并使用 UIView 作为模板，但是要绘制可编辑的 PDF，我需要让 CTFontRef 在某个帧中呈现自身。下面是我在 PDF 上下文中绘制 UILabel 的方法。**该方法使用 UILabel 作为字体名称、字体大小和位置的模板**，而 CTFontRef 将字符呈现为 PDF。

该方法有效，但有怪癖。

我注意到下面的代码可能无法在一个大到足以容纳使用 UIFont 编写的文本的框架中呈现。例如，我有一个适合某种字体的 80x21 UILabel。如果我尝试使用 CTFontRef 渲染该字体，我会得到一个空格，除非我将标签的高度增加到 80x30。简单地说，CTFontRef 不会渲染没有水平或垂直剪辑框架的文本。

另外，我注意到有些字体有不同的宽度，所以一个 80x21 的标签适合 UIFont 的 20 个字符可能只适合 CTFontRef 的 15 个字符。我的猜测是这是因为 CTFontRef 不会截断文本，并且根本不会渲染从框架中任一方向伸出的单词。

几个问题： **什么可能导致我的字体大小错位？我需要复制一些其他属性吗？有没有办法让 CTFontRef 截断标签末尾的长词？**

```
//xOriginOffset, yOriginOffset is the X of the origin of the container view that holds the label.

+(void)drawTextLabel:(UILabel*)label WithXOriginOffset:(int)xOriginOffset YOffset:(int)yOriginOffset
{

    NSString* textToDraw = label.text;
    CFStringRef stringRef = (__bridge CFStringRef)textToDraw;

    UIFont* uiFont = label.font;

    // Prepare font

   CTFontRef font = CTFontCreateWithName((__bridge CFStringRef)uiFont.fontName, uiFont.pointSize, NULL);

    // Create an attributed string
    CFStringRef keys[] = { kCTFontAttributeName,kCTForegroundColorAttributeName };
    CFTypeRef values[] = { font,[[UIColor redColor]CGColor] };
    CFDictionaryRef attr = CFDictionaryCreate(NULL, (const void **)&keys, (const void **)&values,
                                              sizeof(keys) / sizeof(keys[0]), &kCFTypeDictionaryKeyCallBacks, &kCFTypeDictionaryValueCallBacks);

    // Prepare the text using a Core Text Framesetter
    CFAttributedStringRef currentText = CFAttributedStringCreate(NULL, stringRef, attr);

    NSAssert(currentText!=nil,@"current text is nil!");
    CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString(currentText);

    //account for the view's superview
    CGRect frameRect = CGRectMake(xOriginOffset+label.frame.origin.x,
                                  yOriginOffset+label.frame.origin.y,
                                  label.frame.size.width,
                                  label.frame.size.height);

    CGMutablePathRef framePath = CGPathCreateMutable();
    CGPathAddRect(framePath, NULL, frameRect);

    // Get the frame that will do the rendering.
    CFRange currentRange = CFRangeMake(0, 0);
    CTFrameRef frameRef = CTFramesetterCreateFrame(framesetter, currentRange, framePath, NULL);
    CGPathRelease(framePath);

    // Get the graphics context.
    CGContextRef currentContext = UIGraphicsGetCurrentContext();

     NSAssert(currentContext!=nil,@"currentContext is nil!");

    // Draw the frame.
    CTFrameDraw(frameRef, currentContext);

    CFRelease(frameRef);
    CFRelease(stringRef);
    CFRelease(framesetter);
} 
```

更新：

我重构了代码，现在正在使用这种方法来生成功能齐全的 PDF 文本。

```
+(void)drawTextLabel:(UILabel*)label WithXOriginOffset:(int)xOriginOffset YOffset:(int)yOriginOffset
{

    NSString* textToDraw = label.text;

    UIFont* uiFont = label.font;
        // Prepare font
    CGRect frameRect = CGRectMake(xOriginOffset+label.frame.origin.x,
                                  yOriginOffset+label.frame.origin.y,
                                  label.frame.size.width,
                                  label.frame.size.height);

    [textToDraw drawInRect:frameRect withFont:uiFont lineBreakMode:UILineBreakModeTailTruncation];
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T21:34:44.350

1）您不能将绘制的`UIKit`文本与绘制的文本混合`CoreText`。Apple 文档中提到了这一点（请参阅[“核心文本和 UIKit 框架”部分中的 iOS 文本、Web 和编辑编程](http://developer.apple.com/library/ios/#DOCUMENTATION/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/CustomTextProcessing/CustomTextProcessing.html)）。（似乎正在发生的事情是 UIKit 会进行一些舍入并采取一些捷径来提高性能，并且默认情况下也不进行字距调整。）

2）不，你没有错过一些财产。

3) CoreText does not provide a simple means of truncating the text, you would have to write your own code to do it.

# php - 一个简单的文本文档需要一个相当复杂的正则表达式

> ID：10146824
> 
> 赞同：2
> 
> 时间：2012-04-13T19:05:12.770
> 
> 标签：php, regex, perl

我更喜欢使用 php 或 perl 的答案，因为我可以轻松使用它们

文件格式如下：

```
Name : ...
INSERT INTO (...) Values (...)
Name : ...                         <--- These are the lines I need
INSERT INTO (...) Values (...)     <--- 
<span style='color:red;'>FAILED to INSERT ...</span>
Name : ...
INSERT INTO (...) Values (...)
... 
```

“FAILED to INSERT”跨度后面的行是我感兴趣的行。我想删除所有成功的插入，只留下 Name: 和 INSERT INTO 部分失败的行。

“名称：”和“插入...”部分不一定在一行。

这是我认为我需要匹配的伪模式：

```
(/Name:/)(any character)(/INSERT INTO/)(anything but not /Name:/)(/FAILED to INSERT/) 
```

这会让我留下

```
Name: ...
INSERT INTO ...
<span ...> FAILED to INSERT 
```

对于每个失败的插入

我熟悉一些正则表达式基础知识，但可以使用一些帮助。我怎么能在 perl 或 php 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T19:23:56.457

我认为这不是正则表达式的适当任务。通读文件并逐行累积所需的信息会更清晰。

这是一个使用您提供的示例数据的 Perl 解决方案。

```
use strict;
use warnings;

my $info;

while (<DATA>) {
  $info = '' if /Name :/;
  $info .= $_;
  print $info if /FAILED to INSERT/;
}

__DATA__

Name : ...
INSERT INTO (...) Values (...)
Name : ...                         <--- These are the lines I need
INSERT INTO (...) Values (...)     <--- 
<span style='color:red;'>FAILED to INSERT ...</span>
Name : ...
INSERT INTO (...) Values (...)
... 
```

**输出**

```
Name : ...                         <--- These are the lines I need
INSERT INTO (...) Values (...)     <--- 
<span style='color:red;'>FAILED to INSERT ...</span> 
```

我希望清楚如何从文件中读取数据。如果您在命令行上传递文件名，那么您只需将循环更改为`while (<>) { ... }`.

* * *

**编辑**

对于单行命令解决方案，这个怎么样

```
perl -0777 -ne"/FAILED to INSERT/ and print for split /(?=Name :)/" myfile 
```

**输出**

```
Name : ...                         <--- These are the lines I need
INSERT INTO (...) Values (...)     <---
<span style='color:red;'>FAILED to INSERT ...</span> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T19:51:33.437

我相信@FritsvanCampen 是在正确的轨道上。与使用正则表达式不同，逐行遍历整个文件同样容易。这是使用多维数组的稍微修改的版本。（仅供参考，我不太了解 php，因此可能需要一两次调整）。

```
$handle = fopen("strangefile.txt", "r");

$names = array();
$name = array();
while($line = fgets($handle)) {
    if (substr($line, 0, 5) === "Name:") {
      // start a new name array
      $name = array($line);
    }
    else
    {
      // append to existing name array
      $name[] = $line;

      // check to see if the current name array is type 'error'
      if (substr($line, 0, 31) === "<span style='color:red;'>FAILED to INSERT") {
        $names[] = $name;
      }
    }
}
var_dump($names); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T19:09:20.790

正则表达式很痛苦，这样的事情怎么样？

```
$handle = fopen("strangefile.txt", "r");

$collect = true;
$names = array();
while($line = fgets($handle)) {
    if (substr($line, 0, 31) === "<span style='color:red;'>FAILED to INSERT") {
        $collect = false;
    } else if ($collect && substr($line, 0, 5) === "Name:") {
        $names[] = $line;
    }
}
var_dump($names); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-13T19:20:02.827

像[Frits van Campen](https://stackoverflow.com/users/722762/frits-van-campen)一样，如果您想快速解决，正则表达式只能是解决方案的一部分，而不是整个解决方案。[我在他的回答](https://stackoverflow.com/a/10146884)中使用了其他一些逻辑，因为它并不完全正确：

```
$file = new SPLFileObject("strangefile.txt");

foreach($file as $line)
{
    if (isset($buffer) && substr($line, 0, 25) === "<span style='color:red;'>") {
        echo $buffer . $line;
        unset($buffer);
        continue;
    }

    if (substr($line, 0, 5) === "Name:") {
        $buffer = '';
    }
    isset($buffer) && $buffer .= $line;
} 
```

# php - yii dropDownList 使用 Javascript 发布空值动态填充数据

> ID：10146831
> 
> 赞同：1
> 
> 时间：2012-04-13T19:05:31.603
> 
> 标签：php, javascript, jquery, forms, yii

如何检索在`yii`框架中使用 Javascript 动态填充数据的值？当我发布数据时，它会将数据库插入为`null`

在视野中

```
<ul class="birthday">
    <li><?php echo $form->dropDownList($model, 'otherdate',array());?></li>
    <li><?php echo $form->dropDownList($model, 'othermonth',array());?></li>
    <li><?php echo $form->dropDownList($model, 'otheryear',array());?></li>
<script type="text/javascript">
    date_populate("EmailForm_otherdate", "EmailForm_othermonth", "EmailForm_otheryear");
</script>
</ul> 
```

在控制器中

```
$model = new EmailForm;
if (isset($_POST['EmailForm'])) {
$model->attributes = $_POST['EmailForm'];
echo $model->otherdate; //value null
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T19:39:08.323

您是否在模型规则中添加了“其他日期”、“其他月份”和“其他年份”？

```
public function rules() 
{
    return array(
        array('otherdate, othermonth, otheryear', 'safe'),
    );
} 
```

# java - 使用 deployJava.js 来检查/自动安装最新的 JRE 版本的 web 小程序

> ID：10146836
> 
> 赞同：4
> 
> 时间：2012-04-13T19:05:55.657
> 
> 标签：java, applet, version, auto-update, deployjava

我想使用 deployJava.js 工具让 Java 自动检测当前安装的 JRE 并在必要时安装更新版本。在阅读 deployJava.js 时，我最初的印象是，当您简单地将版本号设置为“runApplet”函数的函数参数时，它会立即执行此操作。但这似乎从未奏效。

甚至有可能做到这一点，如果可以，怎么做？

这是我当前启动小程序的代码：

```
<script type="text/javascript" src="https://www.java.com/js/deployJava.js"></script>
<script type="text/javascript">
    var attributes = {id:"applet", name:"TheApplet", code:"TheApplet"}; 
    var parameters = {jnlp_href: "http://localhost/TheApplet.jnlp"};
    deployJava.runApplet(attributes, parameters, "1.6.0_31");
</script> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T15:02:01.443

我确信有一些方法可以让 deployJava.installLatestJRE() 工作，但在我的测试中它似乎完全没有做任何事情。

但作为一个可行的解决方案，我只是使用 deployJava.versionCheck() 函数来检查所需的版本，然后使用 JavaScript 将用户转发到他们可以的“http://java.com/en/download/testjava.jsp”然后下载最新版本（如有必要）。

```
<script type="text/javascript" src="https://www.java.com/js/deployJava.js"></script>
<script type="text/javascript">
    if (deployJava.versionCheck("1.6.0_31+") == false) {                   
        userInput = confirm(
                "You need the latest Java(TM) Runtime Environment. " +
                "Would you like to update now?");        
        if (userInput == true) {  
            window.location = "http://java.com/en/download/testjava.jsp";
        }
    }
    else
    {
        var attributes = {id:"applet", name:"TheApplet", code:"TheApplet"}; 
        var parameters = {jnlp_href: "http://localhost/TheApplet.jnlp"};
        deployJava.runApplet(attributes, parameters, "1.6.0_31");
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T22:39:34.220

我在稍有不同的上下文（应用程序而不是小程序）中对其进行了测试，这对我有用。所以你可以尝试使用 '' 而不是 "" 并通过 1.6 看看会发生什么

```
deployJava.createWebStartLaunchButton('http://localhost:8080/file.jnlp', 1.7) 
```

# sharepoint-2010 - Excel vba根据条件删除Excel中的重复列

> ID：10146840
> 
> 赞同：2
> 
> 时间：2012-04-13T19:06:11.790
> 
> 标签：sharepoint-2010, excel, vba

我发现此链接[https://sharepoint.stackexchange.com/questions/29021/import-sharepoint-list-into-excel-using-vba-only](https://sharepoint.stackexchange.com/questions/29021/import-sharepoint-list-into-excel-using-vba-only) 人们已成功使用该链接自动将 SharePoint 2010 列表项导出到 Excel 2010 . 我可以用我的 SharePoint 数据获取 Excel 工作表。问题是我已经将 ID 作为我的 SharePoint 列表中的一个字段。vba代码自动生成ID（自动增量）并将其添加到excel文件中。现在我的 excel 中有两个 ID 字段名称。我想摆脱 excel vba 自动生成的 ID，并且只有我的 SharePoint 列表中的字段名称（ID 是其中之一）。我该怎么做？谢谢。

```
Sub TestMacro() 
Dim objMyList As ListObject 
Dim objWksheet As Worksheet 
Dim strSPServer As String 
Const SERVER As String = "http://abcd/" 
Const LISTNAME As String = "{A486016E-80B2-44C3-8B4A-8394574B9430}" 
Const VIEWNAME As String = "" 
' The SharePoint server URL pointing to 
' the SharePoint list to import into Excel. 
strSPServer = "http://" & SERVER & "/_vti_bin" 
' Add a new worksheet to the active workbook. 
Set objWksheet = Worksheets.Add 
' Add a list range to the newly created worksheet 
' and populated it with the data from the SharePoint list. 
    Set objMyList = objWksheet.ListObjects.Add(xlSrcExternal, _ Array(strSPServer,    LISTNAME, VIEWNAME),  
True, , Range("a1")) 
Set objMyList = Nothing 
Set objWksheet = Nothing 
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-20T18:51:58.373

我正在做与您正在做的类似的事情，并添加了以下代码行：

```
Application.DisplayAlerts = False
ActiveWorkbook.Save
ActiveWorkbook.RefreshAll
ActiveWorkbook.Save
Application.DisplayAlerts = True 
```

.RefreshAll 刷新表的数据，刷新时，它会删除该列。我目前仍在试图找出原因，但它确实解决了摆脱该列的问题。

编辑：我知道这是在回答 3 年前的一个问题，但认为它可能会帮助那些偶然发现这个问题的人。

# iphone - 在我的应用程序中加载 Twitter 数据的问题

> ID：10146842
> 
> 赞同：0
> 
> 时间：2012-04-13T19:06:24.283
> 
> 标签：iphone, objective-c, twitter, nsxmlparser

在我的应用程序中，我使用以下方式从 twitter 句柄获取状态：http://api.twitter.com/1/statuses/user_timeline/ABCD.xml 但有时它在我的表格视图中没有显示任何内容。我正在使用 NSXMLParser。这是代码：

```
Class A : 
 xmlParser = [[XMLParser alloc] loadXMLByURL:@"http://api.twitter.com/1/statuses/user_timeline/ABCD.xml"];

XMLParser.m

    -(id) loadXMLByURL:(NSString *)urlString
    {
        //spinnerControl = [[SpinnerController alloc]init];
        //[spinnerControl getAlertViewWithSpinner];
        tweets          = [[NSMutableArray alloc] init];
        NSURL *url      = [NSURL URLWithString:urlString];
        NSData *data    = [[NSData alloc] initWithContentsOfURL:url];
        parser          = [[NSXMLParser alloc] initWithData:data];
        NSString * result = [[NSString alloc]initWithData:data encoding:NSUTF8StringEncoding];
        NSLog(@"Complete:%@",result);
        parser.delegate = self;
        [parser parse];
        return self;
    }

    -(void) parser:(NSXMLParser *)parser didStartElement:(NSString *)elementname namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
    {
        if ([elementname isEqualToString:@"status"])
        {
            currentTweet = [Tweet alloc];
        }
    }

    -(void) parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
    {

            currentNodeContent = (NSMutableString *) [string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

    }

    -(void) parser:(NSXMLParser *)parser didEndElement:(NSString *)elementname namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
    {
        if ([elementname isEqualToString:@"text"])
        {
            currentTweet.content = currentNodeContent;
        }
        if (alreadyHaveDate != 1)
        {
            if ([elementname isEqualToString:@"created_at"])
            {
            currentTweet.dateCreated = currentNodeContent;
                alreadyHaveDate = 1;
            }
        }
        if ([elementname isEqualToString:@"profile_image_url"]) {

            currentTweet.artistImage = currentNodeContent;
        }
        if ([elementname isEqualToString:@"name"]) {
            currentTweet.artistName = currentNodeContent;
        }
        if ([elementname isEqualToString:@"screen_name"]) {
            currentTweet.screenName = currentNodeContent;
        }
        if ([elementname isEqualToString:@"status"])
        {
            [tweets addObject:currentTweet];
            alreadyHaveDate = 0;
        }
        //[spinnerControl  removeAlertView];
    }

Tweet.h :
@interface Tweet : NSObject
{
    NSString     *content;
    NSString     *dateCreated;
    NSString     *artistImage;
    NSString     *artistName;
    NSString     *screenName;
}

@property (nonatomic, retain) NSString   *content;
@property (nonatomic, retain) NSString   *dateCreated;
@property (nonatomic, retain) NSString   *artistImage;
@property (nonatomic, retain) NSString   *artistName; 
@property (nonatomic, retain) NSString     *screenName;
@end

Tweet.m

@implementation Tweet

@synthesize content, dateCreated,artistImage,artistName,screenName;

@end 
```

特别是在设备使用 3G 的情况下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:07:38.107

我没有看到您的 parse 函数代码，但是您怎么知道您实际上是从 API 获取一些数据？

您说这尤其是在设备使用 3G 的情况下，因此您可能希望在尝试解析之前验证您可以访问 API 并且您没有空数据。

# google-app-engine - 当查询结果数量很大时使用 qry.map_async() 是否安全？

> ID：10146844
> 
> 赞同：1
> 
> 时间：2012-04-13T19:06:38.000
> 
> 标签：google-app-engine, app-engine-ndb

我有一个 AppEngine cron 作业来查询数据存储，然后需要对查询返回的每个实体做一些工作。查询返回的实体数量有时会很大（>1000）。

我的目标是最大限度地提高并发性并保持较低的内存使用率 - 由于预期的结果数量很大，它们可能不适合内存。

鉴于大量的结果，我是否应该像这样迭代它们：

```
qry = Model.query()
qit = qry.iter()
while (yield qit.has_next_async()):
    entity = qit.next()
    # Do something with entity 
```

...或者使用更快的 map_async() 对任意大的结果集进行操作是否安全？

```
@ndb.tasklet
def callback(entity):
    # Do something with entity

qry = Model.query()
yield qry.map_async(callback) 
```

我已经阅读了所有文档，甚至查看了实现的核心内容，但并不完全清楚这些操作对于大型结果集的限制是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T04:31:00.997

该映射一次读取一个批次，然后为批次中的每个实体调用回调。所以应该没问题。您也可以尝试批量大小。

不同之处在于回调本身是否执行更多 IO。然后 for 循环版本大概会等待每个项目被完全处理，而 map 只是启动所有回调并且只在最后等待它们。因此，更多的并行性，机器人也可能使用更多的内存。

# mobile - symfony 应用程序的移动版本 - 部分

> ID：10146847
> 
> 赞同：0
> 
> 时间：2012-04-13T19:06:47.873
> 
> 标签：mobile, symfony1, partials

我想做这样的事情

[我的 Symfony 项目的移动版本](https://stackoverflow.com/questions/5500488/mobile-version-of-my-symfony-project/5506791)

当文件 xxxSuccess.mobile.php 不存在时，它应该加载 xxxSuccess.php。它工作正常。但它不适用于局部。我想加载_partialfilename.mobile.php，但如果它不存在，它应该加载_partialfilename.php。如何让它发挥作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:56:00.447

You need to make your own `PartialView` class from `sfPartialView` and change the `render()` method in a similar way like you did with the template. You can do it per module, with [module.yml](http://www.symfonyreference.com/module-yml). Have a look at the `get_partial` function in PartialHelper.php to see how it works. Same thing for components, if you need it in the future .

# c++ - C++：如何创建动态模板类型

> ID：10146850
> 
> 赞同：5
> 
> 时间：2012-04-13T19:07:03.707
> 
> 标签：c++

我有以下代码，我创建它是为了改变 OpenCV 图像（Cv::Mat 类）中像素的强度。

如您所见，我在这两种情况下都在循环，但模板类型不同。

“转移”功能可以重载。

因此，我的问题是，如何创建动态模板类型以使其看起来更好..

```
Mat mat = _mat.clone() ;
int channels = mat.channels();

switch(channels)
{
case 1: 
    for (int i=0; i<mat.rows; i++)
    {
        for (int j=0; j<mat.cols; j++)
        {
            uchar src = mat.at<uchar>(i,j);
            uchar dst = mat.at<uchar>(i,j);

            t.transfer(src, dst);
        }
    }
    break;

case 3: 
    for (int i=0; i<mat.rows; i++)
    {
        for (int j=0; j<mat.cols; j++)
        {
            Vec3b src = mat.at<Vec3b>(i,j);
            Vec3b dst = mat.at<Vec3b>(i,j);

            t.transfer(src, dst);
        }
    }
    break;
}

return mat ; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-13T19:17:59.223

像这样的东西怎么样：

```
template <typename U, typename T>
void transfer_mat(Mat & mat, T & t)
{
    for (int i = 0, r = mat.rows; i != r; ++j)
    {
        for (int j = 0, c = mat.cols; j != c; ++j)
        {
            U src = mat.at<U>(i, j);
            U dst = mat.at<U>(i, j);

            t.transfer(src, dst);
        }
    }
} 
```

然后你可以说：

```
switch(channels)
{
case 1:
    transfer_mat<uchar>(mat, t);
    break;
case 2:
    transfer_mat<Vec3b>(mat, t);
    break;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T19:18:07.650

目前尚不清楚您的代码范围（看起来像一个成员函数）以及什么类型`t`，但这应该可以帮助您入门：

```
template<typename AtT>
Mat& transfer_impl(Mat& mat, T& t)
{
    for (int i = 0; i < mat.rows; ++i)
        for (int j = 0; j < mat.cols; ++j)
            t.transfer(mat.at<AtT>(i, j), mat.at<AtT>(i, j));
    return mat;
};

Mat transfer(Mat const& _mat, T& t)
{
    Mat mat = _mat.clone();
    switch (mat.channels())
    {
    case 1:  return transfer_impl<uchar>(mat, t);
    case 3:  return transfer_impl<Vec3b>(mat, t);
    default: throw std::runtime_error(/*...*/);
    }
} 
```

# c# - 为任意一组键（任意数据类型）获取可散列对象的最有效方法

> ID：10146854
> 
> 赞同：3
> 
> 时间：2012-04-13T19:07:23.017
> 
> 标签：c#, .net, performance, dictionary, hash

我编写了一个方法，该方法需要能够获取任意数量的数据字段，以某种方式将它们组合成一个可散列对象，然后在字典中散列该对象以供以后查找。

到目前为止，我想出的最佳算法是对每个字段采用 ToHashCode()，然后使用某种分隔符（例如“|”）将生成的哈希码连接成一个字符串，然后使用这个生成的字符串作为字典的唯一键。

有谁知道更有效的方法来做到这一点？我在想也许有某种方法可以获取每个字段的哈希码，并进行一些数学运算以将它们组合成一个唯一的可哈希数字，但这只是一个猜测。

谢谢你的帮助。

编辑：我认为人们可能会对我的意思感到困惑。元组在这种情况下不起作用，因为我需要将*任意*数量的字段组合成一个可散列对象。字段的数量仅在运行时才知道，而不是在设计时。

关于将所有哈希码以数学方式组合成新哈希码的另一种解决方案也不起作用，因为我需要一个可以用作字典键的*对象。*我相信使用哈希码作为字典的键是非常危险的。

编辑2：在考虑了更多之后，我认为我原来的解决方案不是一个好的解决方案。在存在单个字段的限制情况下，我的解决方案已退化为将哈希码的字符串版本放入字典中。

我认为也许更好的解决方案是创建一个新类型，该类型在其构造函数中采用可枚举，并实现 GetHashCode()。GetHashCode() 函数然后将遍历可枚举的每个值，并在哈希码函数中执行通常类型的累加器逻辑。通过这种方式，对象可以嵌入到字典、哈希集等中，并按照您的预期运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:13:38.007

最简单的方法是使用 Tuple<> 来组合字段的哈希码。

```
var dict = new Dictionary<Tuple<int, string>, MyClass>();
dict[Tuple.Create(myObj.Num, myObj.Str)] = myObj; 
```

您也可以自己组合哈希，但您可能会弄错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T17:37:57.353

这里的关键是意识到任何任意大小的对象集合都可以通过简单地将其视为一个 IEnumerable 来进行散列，该 IEnumerable 的散列码取决于枚举的内容。

为此，我简单地创建了一个实现 IEnumerable 的 ValueAwareEnumerable 类。此类在其唯一的构造函数中采用可枚举。然后它会覆盖 GetHashCode() 和 Equals() 以便它们依赖于可枚举的内容。GetHashCode 方法很简单：

```
public override int GetHashCode()
{
    unchecked
    {
        int hash = 983;
        foreach (var item in _wrappedEnumerable)
           if(item != null)
              hash = hash * 457 + item.GetHashCode();
        return hash;
    }
} 
```

和等于：

```
 public override bool Equals(object obj)
 {
     if (ReferenceEquals(null, obj)) return false;
     if (ReferenceEquals(this, obj)) return true;
     if (obj.GetType() != typeof (ValueAwareEnumerable<T>)) return false;
     return Equals((ValueAwareEnumerable<T>) obj);
 }

 public bool Equals(ValueAwareEnumerable<T> other)
 {
     if (ReferenceEquals(null, other)) return false;
     if (ReferenceEquals(this, other)) return true;

     return _wrappedEnumerable.SequenceEqual(other);                               
 } 
```

这里需要注意的是，它取决于可枚举的*顺序*。如果需要，可以通过简单地使 GetHashCode() 和 Equals() 在迭代之前对可枚举进行排序来使其与顺序无关。

要完成它，只需在某处添加一个扩展方法即可：

```
public static IEnumerable<T> ToValueAwareEnumerable<T>(this IEnumerable<T> enumerable)
{
   return new ValueAwareEnumerable<T>(enumerable);
} 
```

您可以执行以下操作：

```
var dictionary = new Dictionary<IEnumerable<int>>();
var veryImportantNumbers = new[] { 5, 8, 13, 20, 3, 100, 55, -5, 0 };
dictionary[veryImportantNumbers.ToValueAwareEnumerable()] = "Pastrami"; 
```

这适用于任何数据类型，甚至是混合数据类型，如果您将它们视为`IEnumerable<Object>`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T19:15:49.237

> 我在想也许有某种方法可以获取每个字段的哈希码，并进行一些数学运算以将它们组合成一个唯一的可哈希数字，但这只是一个猜测。

是的，这正是你应该做的。这是一个常见的实现：

```
unchecked
{
    int hash = 983;
    hash = hash * 457 + x.GetHashCode();
    hash = hash * 457 + y.GetHashCode();
    hash = hash * 457 + (z != null ? z.GetHashCode() : 0);
    return hash;
} 
```

请注意，您**不**应该将哈希码用作字典键，因为它不会是唯一的（冲突通常很少见，但并非不可能）。如果您想使用对象本身作为键，您还必须重写`Equals`以便 if `x.Equals(y)`, then `x.GetHashCode() == y.GetHashCode()`（反之不必为真）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T20:29:37.470

在这种情况下，您不能安全地使用标准 has 表（除非您可以提供额外的限制）。

需要额外的信息才能提供一个好的替代方案，但我在下面有一个建议。其他信息可能包括：

*   用例（您如何使用查找系统，为什么需要键的字段部分）
*   是否在设计时定义了可以组合的字段（注意：这不是组合了多少或哪些字段。相反，它与定义这些字段的位置/时间/方式有关，以便它们可以组合）。
*   如果字段是在运行时定义的，那么总共有多少个字段（所有字段的数量）。
*   这个奇怪的密钥存储了哪些数据？
*   数据的写入/读取频率是多少？

**快速解决方案**：
使用嵌套哈希表。对于此解决方案，您需要对字段进行排序。第一个字段是第一个表的键。这将指向另一个哈希表，其中第二个字段将是键。这将发生在每个字段，直到您最后一个字段。最后一个字段将是您要查找的数据的关键。
要完成这项工作，您需要定义一个自定义对象，该对象具有数据属性和哈希表属性。

虽然这是一个使用现有 .net 数据结构的好的解决方案，但它的效率不会很高。如需更有效的解决方案，请提供更多信息。

# android - 点击按钮开始从 NFC 设备传输数据

> ID：10146856
> 
> 赞同：0
> 
> 时间：2012-04-13T19:07:24.157
> 
> 标签：android, nfc

我正在开发一个基于 NFC 的应用程序，我们在其中从 NFC 设备获取数据。但它的工作原理是，当我们将启用 NFC 的 Android 设备与 NFC 设备相邻时，会出现一个对话框，其中列出了所有基于 NFC 的应用程序，所以其中一个也是我的。当我们从列表中单击我们的应用程序图标时，它会从我的应用程序（命名为 NfcActivity）中打开一个 Activity 并开始将数据传输到**我不想要**的 Android 手机。在那个活动中有两个按钮也更新和取消。**我希望**当我们单击更新按钮时，NFC 设备开始使用进度条将数据传输到手机，如果数据将完全传输，则进度条会自动关闭。我不能这样做，如果您对此有任何建议，请建议我。

提前致谢。

**Nfc活动：**

```
package com.a1technology.impak;

import java.io.IOException;
import java.io.UnsupportedEncodingException;
import java.math.BigInteger;
import java.nio.ByteBuffer;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.PendingIntent;
import android.content.ComponentName;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.ServiceConnection;
import android.nfc.NfcAdapter;
import android.nfc.tech.IsoDep;
import android.os.Bundle;
import android.os.IBinder;
import android.util.Log;
import android.view.View;
import android.widget.Toast;

import com.a1technology.impak.db.DBAdapter;
import com.cypak.mobile.bridge.android.CypakDevice;
import com.cypak.mobile.bridge.android.CypakDeviceListener;
import com.cypak.mobile.bridge.android.NfcTransportService;
import com.cypak.mobile.bridge.android.TransportBinder;

public class NfcActivity extends Activity implements CypakDeviceListener {

    private boolean update = false;

    private String TAG = "NfcExampleActivity";

    List<EventByteGetSet> eventList = new ArrayList<EventByteGetSet>();

    // Required for foreground dispatch
    private String[][] techListsArray = new String[][] { new String[] { IsoDep.class.getName() } };

    private NfcAdapter mAdapter;

    private PendingIntent pendingIntent;

    // Required when binding to NfcTransportService
    private NfcTransportService mService;

    private boolean bound = false;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.nfc_activity);

        findViewById(R.id.cancel_button).setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {

                finish();
            }
        });
        findViewById(R.id.update_button).setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {

                update = true;
            }
        });
        // Required for foreground dispatch
        pendingIntent = PendingIntent.getActivity(getApplicationContext(), 0, new Intent(getApplicationContext(), NfcActivity.class).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), 0);
        mAdapter = NfcAdapter.getDefaultAdapter(getApplicationContext());// Connecting
                                                // to
                                                // the
                                                // adapter

        resolveIntent(getIntent());

        Intent intent = new Intent(this, NfcTransportService.class);
        // Bind to the service
        if (!bindService(intent, mConnection, Context.BIND_AUTO_CREATE)) {
            Log.e(TAG, "Failed to bind service");
        }
    }

    @Override
    protected void onPause() {

        super.onPause();
        // finish();
        // Required for foreground dispatch
        mAdapter.disableForegroundDispatch(this);

    }

    @Override
    protected void onDestroy() {

        super.onDestroy();

        if (bound) {
            unbindService(mConnection);
            bound = false;
        }
    }

    @Override
    protected void onResume() {

        super.onResume();

        // Required for foreground dispatch
        mAdapter.enableForegroundDispatch(this, pendingIntent, null, techListsArray);
    }

    @Override
    protected void onNewIntent(Intent intent) {

        super.onNewIntent(intent);
        setIntent(intent);
        resolveIntent(intent);
    }

    private void resolveIntent(Intent intent) {

        if (NfcAdapter.ACTION_TECH_DISCOVERED.equals(intent.getAction())// need
                                                // to
                                                // find
                                                // what
                                                // action
                                                // is
                                                // coming
            && mService != null) {
            // Let NfcTransportService handle the Nfc Intent
            try {
                mService.handleIntent(intent);
            }
            catch (IOException e) {
                Log.w(TAG, "Failed to detect device", e);
            }

        }
    }

    /**
     * Defines callbacks for service binding, passed to bindService(). Only
     * needed if binding to MyMaxTransportService
     * */
    private ServiceConnection mConnection = new ServiceConnection() {

        @Override
        public void onServiceConnected(ComponentName className, IBinder service) {

            // We've bound to NfcTransportService, cast the IBinder and
            // get NfcTransportService instance
            Log.v(TAG, "Service connected");
            TransportBinder binder = (TransportBinder) service;
            mService = (NfcTransportService) binder.getService();
            bound = true;

            mService.registerDeviceListener(NfcActivity.this);
        }

        @Override
        public void onServiceDisconnected(ComponentName name) {

            Log.v(TAG, "Service disconnected");
            bound = false;
        }
    };

    @Override
    public void deviceDiscovered(CypakDevice device) {

        // String hex = "1";
        // byte[] byteClear= hex.getBytes();
        //

        if (!update) {
            return;
        }
        else
            try {
                // byte[] byteData= device.sendAppCommand((byte)
                // 0x11, byteClear);
                NFCDataHandler mNfcDataHandler = new NFCDataHandler(this);
                byte[] byteStatusData = device.sendAppCommand((byte) 0x00, new byte[0]);
                String stateHCC = mNfcDataHandler.getStatus(byteStatusData);
                if (stateHCC.equalsIgnoreCase("04")) {
                    byte[] byteQueLogData = device.sendAppCommand((byte) 0x05, new byte[0]);
                    if (byteQueLogData.length < 6) {
                        ShowMessage("Warning", "Card is Empty");
                        return;
                    }
                    mNfcDataHandler.getQueLog(byteQueLogData);
                }
                else {
                    ShowMessage("Warning", "Card is not Active");
                    return;

                }

                Log.v("Value", "");
            }
            catch (com.cypak.mobile.bridge.android.AppCommandErrorCodeException e) {
                Log.e(TAG, "AppCommandErrorCodeException, error code " + e.getErrorCode(), e);
            }
            catch (com.cypak.mobile.bridge.android.AppCommandException e) {
                Log.e(TAG, "AppCommandException", e);
            }
            catch (IllegalArgumentException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        // Toast.makeText(getApplicationContext(), "Device found! " +
        // device, Toast.LENGTH_LONG).show();
    }

    @Override
    public void invalidDeviceDiscovered(CypakDevice device) {

        Toast.makeText(getApplicationContext(), "Invalid device!", Toast.LENGTH_SHORT).show();
    }

    @Override
    public void deviceLost() {

        Toast.makeText(getApplicationContext(), "Device lost!", Toast.LENGTH_SHORT).show();
    }

    protected Date dateFromlongBuffer(long bb) {

        return new Date((long) 1000 * (long) bb);
    }

    protected Date dateFromByteBuffer(ByteBuffer bb) {

        return new Date((long) 1000 * (long) bb.getInt());
    }

    static final byte[] HEX_CHAR_TABLE = { (byte) '0', (byte) '1', (byte) '2', (byte) '3', (byte) '4', (byte) '5', (byte) '6', (byte) '7', (byte) '8', (byte) '9', (byte) 'a', (byte) 'b',
            (byte) 'c', (byte) 'd', (byte) 'e', (byte) 'f' };

    public static String getHexString(byte[] raw) throws UnsupportedEncodingException {

        byte[] hex = new byte[2 * raw.length];
        int index = 0;

        for (byte b : raw) {
            int v = b & 0xFF;
            hex[index++] = HEX_CHAR_TABLE[v >>> 4];
            hex[index++] = HEX_CHAR_TABLE[v & 0xF];
        }
        return new String(hex, "ASCII");
    }

    public static int hex2decimal(String s) {

        String digits = "0123456789ABCDEF";
        s = s.toUpperCase();
        int val = 0;
        for (int i = 0; i < s.length(); i++) {
            char c = s.charAt(i);
            int d = digits.indexOf(c);
            val = 16 * val + d;
        }
        return val;
    }

    private void ShowMessage(String title, String message) {

        AlertDialog.Builder b = new AlertDialog.Builder(this);
        AlertDialog a = b.create();
        a.setTitle(title);
        a.setMessage(message);
        a.setButton("Ok", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface arg0, int arg1) {

                finish();
            }
        });

        a.show();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T19:19:51.357

看起来你在`resolveIntent()`打电话`onCreate()`。当您从应用程序选择器中选择您的应用程序时，NFC Discovered`Intent`将传递给您的`Activity`via `onCreate()`，我假设您在调用时立即处理它`mService.handleIntent(intent);`。因此，每次您的应用程序从 NFC Discovery 启动时，您都会立即将 Intent 传递给您的`Service`. 从您的问题来看，您似乎想在收到 NFC 数据时将`Intent`其取出，存储它，然后在按下更新按钮时调用您的服务。

```
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.nfc_activity);

    findViewById(R.id.cancel_button).setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {

            finish();
        }
    });
    findViewById(R.id.update_button).setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {

            update = true;
        }
    });
    // Required for foreground dispatch
    pendingIntent = PendingIntent.getActivity(getApplicationContext(), 0, new Intent(getApplicationContext(), NfcActivity.class).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), 0);
    mAdapter = NfcAdapter.getDefaultAdapter(getApplicationContext());// Connecting
                                            // to
                                            // the
                                            // adapter
    // HERE, this could be the Intent from the NFC Discovery
    **resolveIntent(getIntent());**

    Intent intent = new Intent(this, NfcTransportService.class);
    // Bind to the service
    if (!bindService(intent, mConnection, Context.BIND_AUTO_CREATE)) {
        Log.e(TAG, "Failed to bind service");
    }
} 
```

因此您最终会立即将 NFC Intent 传递给您的服务：

```
private void resolveIntent(Intent intent) {

    if (NfcAdapter.ACTION_TECH_DISCOVERED.equals(intent.getAction())// need
                                            // to
                                            // find
                                            // what
                                            // action
                                            // is
                                            // coming
        && mService != null) {
        // Let NfcTransportService handle the Nfc Intent
        try {
            // HERE: you are handling the NFC Intent via onCreate()
            mService.handleIntent(intent);
        }
        catch (IOException e) {
            Log.w(TAG, "Failed to detect device", e);
        }

    }
} 
```

难道你不想等到用户点击你的回调方法之前的按钮，`deviceDiscovered()`被调用？

# python - 使用python检查字典中是否存在键时出现AttributeError

> ID：10146858
> 
> 赞同：2
> 
> 时间：2012-04-13T19:07:30.817
> 
> 标签：python, attributeerror

我正在使用 Python 2.7.2+，当试图查看字典是否包含给定的字符串值（名为 func）时，我得到了这个异常：

```
Traceback (most recent call last):
  File "Translator.py", line 125, in <module>
    elif type == Parser.C_ARITHMETIC : parseFunc()
  File "Translator.py", line 95, in parseFunc
    if unary.has_key(func) : 
AttributeError: 'function' object has no attribute 'has_key' 
```

这是我定义字典的地方：

```
binary = {"add":'+', "sub":'-', "and":'&', "or":'|'}
relational = {"eq":"JEQ" , "lt":"JLT", "gt":"JGT"}
unary = {"neg":'-'} 
```

这是引发异常的函数：

```
def parseFunc():
    func = parser.arg1 
    print func  
    output.write("//pop to var1" + endLine)
    pop(var1)
    if unary.has_key(func) : // LINE 95
        unary()
        return
    output.write("//pop to var2" + endLine)
    pop(var2)
    result = "//"+func + endLine
    result += "@" + var1 + endLine
    result += "D=M" + endLine
    result += "@" + var2 + endLine
    output.write(result)
    if binary.has_key(func) : 
        binary()
    else : relational() 
```

另外，我尝试更改`if unary.has_key(func)`为，`if func in unary`但后来我得到了

```
Traceback (most recent call last):
  File "Translator.py", line 126, in <module>
    elif type == Parser.C_ARITHMETIC : parseFunc()
  File "Translator.py", line 95, in parseFunc
    if func in unary:
TypeError: argument of type 'function' is not iterable 
```

PS我也用python 3.2厌倦了它

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T19:09:25.110

在 Python 3 中，`dict.has_key()`它已经消失了（并且已经被弃用了很长一段时间）。改为使用`x in my_dict`。

不过，您的问题是另一回事。虽然您的定义显示`unary`应该是字典，但回溯显示它实际上是一个函数。因此，您未显示的代码中的某处`unary`被重新定义。

即使`unary`是字典，你也无法调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T19:16:40.487

从您的跟踪来看，您似乎用函数覆盖了一元的值（您有任何称为“一元”的函数吗？）。因此，您试图在显然没有这种方法的函数上调用“has_key”方法。注意变量名，如果变量 x 放在代码中，它会覆盖 def x()，反之亦然。

# java - 有没有可以像这样解析地址的Java解析器

> ID：10146864
> 
> 赞同：9
> 
> 时间：2012-04-13T19:08:22.407
> 
> 标签：java, parsing, street-address

我正在使用 Java 6。我正在寻找一种自动解析地址的方法。我不关心地址是否存在。我发现的最好的东西是 JGeocoder (v 0.4.1)，但是 JGeocoder 无法解析这样的地址

```
16th Street Theater, Berwyn Cultural Center,  6420 16th St. 
```

有谁知道可以应对挑战的免费 Java 地址解析器？“解析”是指区分街道、城市、州、邮政编码和可能的场地名称的能力（上面的场地名称是“16th Street Theatre, Berwyn Cultural Center”）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T19:38:46.370

**更新：**[这个 StackOverflow 问题](https://stackoverflow.com/questions/11160192/how-to-parse-freeform-street-postal-address-into-components)更详尽地涵盖了这个主题。

* * *

我在[SmartyStreets](http://smartystreets.com)工作，在那里我们解析和处理地址，我们有一个答案。这就是我们所说的“ [SLAP](https://github.com/smartystreets/LiveAddressSamples/blob/master/jQuery/slap.html) ”或[单行地址解析（或处理）](https://smartystreets.com/archive/parse-and-verify-freeform-street-addresses)。正式术语是[命名实体识别 (NER)](http://en.wikipedia.org/wiki/Named-entity_recognition)。

我不是 Java 库方面的专家，但我知道任何内部实现都不会达到预期。以下是我帮助过的人以前遇到困难的一些常见原因：

*   谷歌/雅虎！/Bing 地图网络服务不允许自动查询，也不验证解析地址的准确性。

*   内部代码也只能做出最佳猜测，而无需了解现有地址（数据库）或其他类型的官方来源。我知道您想要一个可以在内部执行此操作的库，但您最多只能猜测...

*   顺便说一句，正则表达式*不是*答案。我见过的解析地址的最佳正则表达式是通过数百行代码和几个类动态生成的。这是一团糟，并且仅对您*期望*的地址类型是正确的，而不是实际上存在的所有有效（美国）格式。

这是一项极其复杂的任务……除非您拥有正确的工具。我们的一项服务称为[LiveAddress API](http://smartystreets.com/products/liveaddress-api)，它与 Google Maps 类似，它解析地址并对其进行地理编码，但更进一步，它通过了 CASS 认证并仅返回*有效*地址，几乎不管输入格式如何。

我鼓励你自己做一些研究，但这可能是最有效和最可靠的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-06T02:08:07.557

[https://code.google.com/p/usaddressparser/](https://code.google.com/p/usaddressparser/)解析美国地址字符串并将其拆分为字段（号码、街道、套房、城市、zip 等）。Java jar 和源

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T19:11:34.513

如果允许使用网络服务，您可以尝试使用谷歌地图。

# java - 无法将文本文件参数传递到数组中并将文件操作到 Java 中的文本输出中

> ID：10146867
> 
> 赞同：0
> 
> 时间：2012-04-13T19:08:27.390
> 
> 标签：java

对不起，如果我的标题令人困惑。我有一个与 Java 相关的作业。该任务的目标是创建一个程序，该程序将读取省和市的输入文件并将数据存储到二维数组中，一个用于省，一个用于城市（无重复）。之后，它将按字母顺序输出。如果这令人困惑，这里是它应该是什么样子的示例。

示例输入文件

```
Hamilton, Ontario
Montreal, Quebec
Vancouver, British Columbia
Sarnia, Ontario
Sherbrooke, Quebec
Winnipeg, Manitoba
Red Deer, Alberta
Edmonton, Alberta
Niagara Falls, Ontario
Port Elgin, Ontario
Victoria, British Columbia
Truro, Nova Scotia
Regina, Saskatchewan
Kingston, Ontario
Fredricton, New Brunswick
Grand Prarie, Alberta
Calgary, Alberta
Collingwood, Ontario 
```

示例输出文件

```
 British Columbia: Vancouver, Victoria
 Alberta: Calgary, Edmonton, Grand Prarie, Red Deer
 Saskatchewan: Regina
 Manitoba: Winnipeg
 Ontario: Collingwood, Hamilton, Kingston, Niagara Falls, Port Elgin, Sarnia
 Quebec: Montreal, Sherbrooke
 New Brunswick: Fredricton
 Nova Scotia: Truro 
```

这是我的主要课程

导入 java.io.IOException；

```
public class Main {

    public static void main(String[] args) throws IOException {
        if (args.length < 2) {
            System.err.println("Usage: java -jar lab5.jar infile outfile");
            System.exit(99);
        }

        Munge dataSorter = new Munge(args[0], args[1]);

        dataSorter.openFiles();
        dataSorter.readRecords();
        dataSorter.writeRecords();
        dataSorter.closeFiles();
    }
} 
```

到目前为止，这是我的 Munge 课程。

```
import java.io.FileNotFoundException;
import java.util.Arrays;
import java.util.Formatter;
import java.util.Scanner;

public class Munge {

    private String inputFileName, outputFileName;
    private Scanner inputFile;
    private Formatter outputFile;
    private int line = 0;
    private String[] data;

    public Munge(String inFileName, String outFileName) {
        this.inputFileName = inFileName;
        this.outputFileName = outFileName;

        data = new String[100];
    }

    public void openFiles() throws FileNotFoundException {
    File newFile = new File(inputFileName);
    }

    public void readRecords() {
        while (inputFile.hasNext()) {
            data[line] = inputFile.nextLine();
            System.out.println(data[line]);
            line++;
        }
    }

    public void writeRecords() {
        for (int i = 0; i < line; i++) {
            String done[] = data[i].split(", ");
            Arrays.sort(done);

            for (int j = 0; j < done.length; j++) {
            outputFile.format("%s\r\n", done[j]);
            }
        }
    }

    public void closeFiles() {
        if (inputFile != null) {
            inputFile.close();
        }

        if (outputFile != null) {
            outputFile.close();
        }
    }
} 
```

我的问题主要发生在我尝试运行程序时。我不断收到仅在 args.length < 2 时才会出现的消息。为什么会这样以及如何解决这个问题？我是否将 args[0] 和 args[1] 设置为相同的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T19:20:02.557

您要么在运行程序时不提供两个文件名参数，要么只提供其中一个。例如：

```
java -jar lab5.jar infile 
```

将仅设置第一个参数（到字符串“infile”），第二个参数丢失

# jquery-ui - jQuery UI 滑块与 jQuery Mobile 滑块冲突

> ID：10146868
> 
> 赞同：4
> 
> 时间：2012-04-13T19:08:28.013
> 
> 标签：jquery-ui, jquery-mobile, sliders

我正在构建一个 jQuery 移动网站，但还需要使用 jQuery UI 小部件——尤其是滑块。

问题是这些功能冲突。我真的希望 jQm 用“mobile-”前缀编写他们的 ui 内容，但我认为现在可能为时已晚。

这是我遇到的问题。如果我在 jquery mobile jquery ui 滑块工作后加载 jquery ui - 很好但是我的自定义页面转换不起作用，毫无疑问 jQm 中的其他内容的负载被覆盖，我还不知道。

如果我以另一种方式执行 jQuery 移动自定义转换工作，但是 jquery ui 滑块不会，因为它们使用 jQm 滑块代替。

我不能使用 jQm 滑块，因为我需要 jQuery UI 滑块的垂直选项和其他功能。

我正在寻找的是某种不涉及我破解 jQuery UI 或 jQuery Mobile 的解决方案，因为如果可能的话，我不想在每次更新 jQm/jUI 时都进行这些更改。那么有没有一种方法可以加载jquery ui，以便我调用以'ui-'或jQuery mobile为前缀的函数，以便其冲突函数以'mobile'为前缀-也许在我的jqm自定义js中的移动初始化函数中？

我在这里找到了一些东西[https://github.com/aFarkas/jMediaelement/issues/17](https://github.com/aFarkas/jMediaelement/issues/17) 并尝试了代码，但无法使其在我的函数中工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-18T08:26:24.263

这对我有用。如果其他人有同样的问题。我必须在 jquery ui 之后和 jquery mobile 之前添加下一行

```
$.fn.uislider = $.fn.slider; 
```

代码示例将是：

```
<script type="text/javascript"  src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
<script>  
    // rename to avoid conflict with jquery mobile
    $.fn.uislider = $.fn.slider;
  </script>
<script src="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.js"></script> 
<script>
  $(function() {
    $( "#slider" ).uislider();
  });
  </script> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-01T13:24:07.907

这是一种解决方法，而不是完全修复。我使用了 JQM 下载生成器，除了滑块之外，所有选项都被选中，因为我使用的是 jQ-ui 滑块。问题解决了，除了我现在不能使用 JQM 滑块。不是我需要。

# c# - 使用 .NET 4.0 WCF 通过用户/密码连接到 WSE 2.0 WebService

> ID：10146869
> 
> 赞同：0
> 
> 时间：2012-04-13T19:08:29.387
> 
> 标签：c#, wcf, web-services, .net-4.0, wse2.0

我希望你能帮助我。我正在尝试连接到第 3 方 Web 服务，不幸的是它是 WSE 2.0 服务。我正在尝试使用 WCF 在 C# .NET 4.0 中编写客户端。我根本找不到任何关于此的信息。该服务需要一个字符串作为用户名和密码。这是他们的样本的样子

```
Using webServiceObject As Microsoft.Web.Services2.WebServicesClientProtocol = New WSOData.Webservices.TransactionWebService()
https = ConcatenateWebserviceAddress(request.Server.Https, request.Service.Extension)
epr = New EndpointReference(New Uri(https))
webServiceObject.Destination = epr

Dim WebserviceContext As SoapContext = webServiceObject.RequestSoapContext

''''' Set the security settings
 ' Set the timeout value for how long issued SecurityContextToken security tokens are valid
WebserviceContext.Security.Timestamp.TtlInSeconds = -1

'Instantiate a new UsernameToken object.
Dim userNameToken As New UsernameToken(userName, password, PasswordOption.SendHashed)

'Add the token to the SoapContext.
WebserviceContext.Security.Tokens.Add(userNameToken)

'Generate a signature using the username token, and add the signature to the SoapContext.
 WebserviceContext.Security.Elements.Clear()
 WebserviceContext.Security.Elements.Add(New MessageSignature(userNameToken)) 
```

有没有办法在 .NET 4.0 中使用 WCF 来实现这一点？如果可以的话，我真的不想求助于使用 WSE 2.0。我也无法控制我们连接的服务。任何帮助将不胜感激，我绝不是 WCF 专家或新手。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:06:54.973

从理论上讲，您可能可以创建正确的扩展和行为来让 WCF 生产和使用 WSE 2.0 肥皂，但在这里您只能靠自己。WSE 3.0 和 WCF 之间存在一些互操作，如本[博文中所述。](http://devlicio.us/blogs/ziemowit_skowronski/archive/2007/07/18/interoperability-between-wcf-and-wse-3-0.aspx)您可以将其作为尝试使用 WSE 2.0 服务的起点。

如果您能找到 Visual Studio 2003 的副本，您最好直接使用原始 WSE 2.0 组件。我依稀记得 WSE 2.0 有 3**个不**向后兼容的服务包，因此您应该确保匹配正确的服务包. *祝你好运和最良好的祝愿！！*:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T21:23:30.693

我不建议您使用 WSE2。在更糟糕的情况下——Wcf 无法与此服务互操作——你最好自己创建用户名标头，这并不难。但要确定最佳方法，请发布完整的工作肥皂样品（供应商应提供一个）

# ruby-on-rails-3 - Rails 3 应用程序中的 IMGKit/wkhtmltoimage。元标记选项不起作用。包含完整的代码示例

> ID：10146873
> 
> 赞同：4
> 
> 时间：2012-04-13T19:08:39.460
> 
> 标签：ruby-on-rails-3, image

由于 IMGKit 的代码示例不多，所以我在下面发布了我的代码示例。

我研究了[IMGKit 文档](https://github.com/csquared/IMGKit)，它说您可以通过元标记将选项传递给 wkhtmltoimage。所以我创建了一个带有以下元标记的页面，但它不起作用：

```
<!DOCTYPE html>
<html>
    <head>
        ...
        <meta name="imgkit-height" content="420" />
        ...
    </head>
    <body>
        ...
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-14T04:47:14.447

两周内有 127 次观看没有评论或回答，所以我努力寻找答案。此外，由于这个 gem 上的内容太少了，我想我应该将我的整个过程和代码添加为示例。

## 开发安装：MAC OSX

1.  '宝石安装 imgkit'
2.  '捆绑安装'
3.  安装 wkhtmltoimage 有点棘手，因为我使用的是 rvm。'rvmsudo' 安装方法对我不起作用。[我在这里](http://code.google.com/p/wkhtmltopdf/downloads/detail?name=wkhtmltoimage-OSX-0.10.0_rc2-static.tar.bz2&can=4&q=)下载了 Mac OSX 的 wkhtmltoimage-OSX-0.10.0_rc2-static.tar.bz2 ，解压缩并将 wkhtmltoimage 文件复制到 usr/local/bin。我们的服务器使用 Ubuntu……希望一切顺利……我会告诉你的。
4.  我使用命令 wkhtmltoimage [http://www.google.com](http://www.google.com) test.jpg 测试了 wkhtmltoimage ，一切正常。
5.  根据 IMGKit 文档，我添加了 png 和 jpeg 的 mime 类型。

## 生产安装：Ubuntu 10.04 LTS

1.  '宝石安装 imgkit'
2.  '捆绑安装'
3.  'sudo imgkit --install-wkhtmltoimage' 没有飞。wkhtmltoimage 有 AMD64 和 i386 版本。我曾经`cat /proc/cpuinfo`发现我的服务器 CPU 是 Intel 所以手动将 i386 版本安装到 /usr/local/bin。我更改了 wkhtmltoimage-i386 文件的权限以允许执行。此外，为了让 IMGKit 识别文件，我必须重命名文件，去掉“-i386”。

## 调用 IMGKit 函数的控制器。

```
 def email_profile
    ...
    filename = current_user.username + "_" + cur_date + '.jpg'

    kit = IMGKit.new("https://www.myapp.com/applet/?auth_token=" + token)
    img = kit.to_img(:jpg)
    file = kit.to_file(Rails.root + "public/profile_images/" + filename)
    ...
  end 
```

## “小程序”控制器

此视图永远不会在浏览器中呈现。专供 IMGKit/wkhtmltoimage 阅读。请注意，呈现了不同的 rails 布局文件：

```
class AppletController < ApplicationController
    def index
        render(:layout => "layouts/applet_lo")
    end
end 
```

## 布局文件

布局文件具有新的元标记，它们调用 wkhtmltoimage 选项以通过 IMGKit gem 裁剪图像。它仍然不起作用。gem 的作者回信说这个功能很挑剔。我正在使用 minimagick 进行裁剪，直到解决此问题。

```
<!DOCTYPE html>
<html>
    <head>
    <meta name="imgkit-crop-h" content="990">
    <meta name="imgkit-crop-w" content="635">
    </head>
    <body>
        <%= yield %>
    </body>
</html> 
```

# solr - 在 Plone 4.1.3 实例上安装collective.solr 后启动Solr 时出错

> ID：10146875
> 
> 赞同：0
> 
> 时间：2012-04-13T19:08:46.440
> 
> 标签：solr, plone

通过 buildout 安装collective.solr 后，尝试运行bin/solr-instance start 时出现以下错误

```
Traceback (most recent call last):
File "bin/solr-instance", line 110, in <module>
 start(True)
File "bin/solr-instance", line 43, in start
 stdout=logfp, stderr=logfp).pid
File "/usr/local/Plone/Python-2.6/lib/python2.6/subprocess.py", line 633, in __init__
 errread, errwrite)
File "/usr/local/Plone/Python-2.6/lib/python2.6/subprocess.py", line 1139, in _execute_child
 raise child_exception
OSError: [Errno 2] No such file or directory 
```

这是一个 Plone 4.1.3 zeoserver 安装。有任何想法吗？

我尝试了两种不同的方法来安装它。我首先尝试按照 pypi 说明中的说明扩展构建。我还尝试将这些位直接插入到我的 buildout.cfg 文件中。

这是 buildout.cfg 文件，其中直接包含 solr 位。 [http://pastie.org/3798794](http://pastie.org/3798794)

这是一个开发版本，请原谅混乱......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T15:27:18.033

关于这个问题的更新。

事实证明，该问题与服务器有关。我的 Red Hat 安装没有安装 java。在系统上安装java之后：

百胜安装 java-1.6.0-openjdk*

运行 bin/solr-instance start 导致 Solr 按预期启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T04:29:42.523

我无法重现这个；使用以下构建配置对我来说效果很好：

```
[buildout]
extends = 
    http://build.pythonpackages.com/buildout/plone/4.2.x-dev
    https://raw.github.com/Jarn/collective.solr/master/buildout/solr.cfg 
```

例如：

```
$ bin/solr-instance start
Solr started with pid 12987 
```

# css - 如何使应用了边框半径的元素的径向部分在 chrome 和 safari 中无法选择？

> ID：10146880
> 
> 赞同：1
> 
> 时间：2012-04-13T19:09:05.177
> 
> 标签：css

在这个圈子中，我注意到只有当光标在 IE9 和 firefox 的圈子内时才会出现指针。`div`但是，在 safari 或 chrome 中，如果您位于元素内部的任何位置，即使您在圆圈之外，光标也是一个指针。

```
div#circle {
   width: 200px;
   height: 200px;
   -moz-border-radius:100px;
   -webkit-border-radius:100px;
   border-radius:100px;
   background: red;
   cursor:pointer }

<div id = "circle"></div> 
```

看看 IE9 和 Firefox 中的这个小提琴，并与 Safari 和 Chrome 进行比较。 [http://jsfiddle.net/GC4yU/](http://jsfiddle.net/GC4yU/)

有什么方法可以使此代码的功能与 ie9 和 chrome 和 safari 中的 firefox 相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:51:23.703

差异可能是由于 HTML 引擎的工作方式。我不知道是什么原因造成的。但您可以考虑以下替代方案：

*   您可以使用`<img>`标签并使用图像映射。它在这里解释：http: [//www.w3schools.com/tags/tag_area.asp](http://www.w3schools.com/tags/tag_area.asp)。演示[在这里](http://www.w3schools.com/tags/tryit.asp?filename=tryhtml_areamap)。

*   您可以使用[raphaelJS 库](http://raphaeljs.com/)来生成 SVG。Raphaël 目前支持 Firefox 3.0+、Safari 3.0+、Chrome 5.0+、Opera 9.5+ 和 Internet Explorer 6.0+。

*   您也可以自己绘制 SVG。[jsFiddle 在这里](http://jsfiddle.net/ZUkPV/)。

```
<svg  xmlns="http://www.w3.org/2000/svg" version="1.1">
       <circle style="cursor:pointer" cx="100" cy="50" r="40" 
               stroke="black" stroke-width="2" fill="red" />
</svg> 
```

# javascript - 从视图传递多个值

> ID：10146889
> 
> 赞同：0
> 
> 时间：2012-04-13T19:10:00.383
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-3

在我的 MVC 应用程序中，我需要在下拉列表中加载硬编码的值列表，并在用户单击“取消”按钮时将它们传递给控制器​​。

在我看来，我现在有以下几点：

```
<%=Html.DropDownList("Cancellation Reason", new List<SelectListItem>
                     {
                        new SelectListItem{ Text="Text1", Value = "Reason1" }, 
                        new SelectListItem{ Text="Text2", Value = "Reason2" },
                        new SelectListItem{ Text="Text3", Value = "Reason3" },                        
}) %> 
<input type="button" value="Cancel" id="Cancel" onclick="CancelProgram('<%= Model.Id %>');"/> 
```

如何将两个值（Model.ID 和用户在下拉列表中选择的值）传递给 CancelProgram 方法，该方法又会（在 .js 文件中）调用控制器操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T21:00:38.343

您可以使用 javascript 填充两个隐藏字段并将它们映射然后传递给操作。

```
<input type="hidden" id="value1" name="value1" value="" />
<input type="hidden" id="value2" name="value2" value="" />

public ViewResult PostAction(string value1, string value2)
{ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T19:51:45.897

您可以使用 jQuery 使用以下语句轻松获取 DropDownList 的选定值： **$('#Cancellation_Reason').val()** 获得值后，您可以将其添加到提交给控制器的数据中。

# php - 如何从 foreach 循环创建这个多维数组？

> ID：10146891
> 
> 赞同：2
> 
> 时间：2012-04-13T19:10:01.383
> 
> 标签：php, multidimensional-array, foreach

我无法解决这个问题......我有一个看起来像这样的数组：

```
 Array
(
    [0] => Array
        (
            [0] => 20120412
            [1] => United States
            [2] => Illinois
            [3] => Marion
            [4] => 2
        )

    [1] => Array
        (
            [0] => 20120412
            [1] => United States
            [2] => Illinois
            [3] => Carbondale
            [4] => 2
        )

    [2] => Array
        (
            [0] => 20120412
            [1] => United States
            [2] => Illinois
            [3] => Carbondale
            [4] => 2
        )
) 
```

我希望它像：

```
array("United States" => array("Illinois" => array("Carbondale" => "4"))); 
```

所以它先是国家，然后是州，然后将城市的所有数字加在一起。

到目前为止，我所拥有的是：

```
foreach($location_google_data3 as $location_google_data4){
    if($location_google_data4[0]==date("Ymd")){
         $today_visitsbycountry[$location_google_data4[1]]+=$location_google_data4[4];  
    }
} 
```

这给了我一个包含国家和访问次数的数组，以便我以后可以遍历它，但不知道如何继续其余的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:20:14.070

像这样的东西...

```
$result=array();
foreach ($a as $item)
    $result[$item[1]][$item[2]][$item[3]]+=$item[4]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T19:21:01.343

我就是这样做的（假设你的数组被调用`$input`）：

```
$output = array();

foreach ($input as $city) {
    if (!isset($output[$city[1]])) {
        $output[$city[1]] = array();
    }

    if (!isset($output[$city[1]][$city[2]])) {
        $output[$city[1]][$city[2]] = array();
    }

    if (isset($output[$city[1]][$city[2]][$city[3]])) {
        $output[$city[1]][$city[2]][$city[3]] += $city[4];
    } else {
        $output[$city[1]][$city[2]][$city[3]] = $city[4];
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T19:22:58.190

```
$resultArray = array();
foreach($yourArray as $data)
{
    if(!isset($resultArray[$data[1]])) {
        $resultArray[$data[1]] = array();
    }

    if(!isset($resultArray[$data[1]][$data[2]])) {
        $resultArray[$data[1]][$data[2]] = array();
    }

    if(!isset($resultArray[$data[1]][$data[2]][$data[3]])) {
        $resultArray[$data[1]][$data[2]][$data[3]] = 0;
    }

    $resultArray[$data[1]][$data[2]][$data[3]] += $data[4];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T19:36:35.900

为此，您可以从数组中选取值，将它们用作新数组的键，然后添加数字。此示例使用变量别名（引用），因此变量的长版本只需要编写一次：

```
$filterDate = '20120412';
$build = array();
foreach ($array as $item)
{
    list($date, $country, $state, $city, $number) = $item;
    if ($date != $filterDate) continue;
    $alias = &$build[$country][$state][$city];
    $alias += $number;
}
unset($alias); 
```

结果（`$build`）：

```
array(1) {
  ["United States"]=>
  array(1) {
    ["Illinois"]=>
    array(2) {
      ["Marion"]=>
      int(2)
      ["Carbondale"]=>
      int(4)
    }
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T19:21:08.270

我希望这会奏效，如果没有的话——这样的事情会奏效：

```
$result = array();
foreach( $your_array as $arr ) {
    if( !isset( $result[ $arr[1] ] ) ) {
        $result[ $arr[1] ] = array();
    }
    if( !isset( $result[ $arr[1] ][ $arr[2] ] ) ) {
        $result[ $arr[1] ][ $arr[2] ] = array();
    }
    if( !isset( $result[ $arr[1] ][ $arr[2] ][ $arr[3] ] ) ) {
        $result[ $arr[1] ][ $arr[2] ][ $arr[3] ] = 0;
    }
    $result[ $arr[1] ][ $arr[2] ][ $arr[3] ] += (int)$arr[4];
} 
```

# jqgrid - jQGrid 拖放行检查

> ID：10146892
> 
> 赞同：3
> 
> 时间：2012-04-13T19:10:02.267
> 
> 标签：jqgrid, drag-and-drop, jquery-ui-draggable

我有我的主网格将行正确拖放到辅助网格中。我的问题是，如何在将行放入辅助网格之前执行检查，以确定我尝试删除的行是否已经存在？如果它已经在二级网格中，不要让用户将它放在那里，基本上停止拖放功能。

我想我可以从我试图删除的行中获取关键值。然后，检查该值是否已经作为我已经删除的行之一中的键值存在。我假设我将不得不以某种方式使用此功能：

```
beforedrop : function(e,ui,data,source,target) { } 
```

或者这个函数：

```
ondrop: function (ev, ui, getdata) { } 
```

有人有想法么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T19:39:45.750

用法示例可能如下

```
$("#grid1").jqGrid('gridDnD', {
    connectWith: '#grid2',
    beforedrop: function (ev, ui, getdata, $source, $target) {
        var names = $target.jqGrid('getCol', 'name2');
        if ($.inArray(getdata.name2, names) >= 0) {
            // prevent data for dropping
            ui.helper.dropped = false;
            alert("The row is already in the destination grid");
        }
    }
}); 
```

在[演示](http://www.ok-soft-gmbh.com/jqGrid/gridDnD-and-sortableRows1.htm)中，您将**无法**将行“test1”从第一个网格删除到第二个：

![在此处输入图像描述](../Images/41e0eb5d2d8cc33517fb243386dfcc20.png)

其他行将被删除而没有任何问题。

# apache - Apache mod_rewrite 到域/IP

> ID：10146894
> 
> 赞同：0
> 
> 时间：2012-04-13T19:10:21.337
> 
> 标签：apache, mod-rewrite, dns, debian

我想用 Apache 做一个简单的 passthru。当我打开[http://www.abc.com/45.34.81.171](http://www.abc.com/45.34.81.171)时，Apache 应该使用以下规则在内部代理 URL [http://45.34.81.171/](http://45.34.81.171/)

```
RewriteRule ^(.+)$ http://$1:80/ [P] 
```

但事实并非如此。相反，我收到“400 Bad Request”。启用模块并在编辑 htaccess 后重新启动 Apache。当我输入静态 IP 时，它可以工作，如下所示：

```
RewriteRule ^(.*)$ http://85.17.26.104:80/ [P] 
```

有任何想法吗？

感谢您的回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T22:45:50.370

您是否在未指定端口 80 的情况下尝试过（默认为 80）？此外，它可能会在末尾添加额外的斜杠，给出类似[http://45.34.81.171/:80/](http://45.34.81.171/:80/)的内容（因此，如果是这种情况，如果没有端口，它应该可以工作）

# html - 如何使 DIV 标签拉伸到它的孩子的大小？

> ID：10146903
> 
> 赞同：0
> 
> 时间：2012-04-13T19:11:13.707
> 
> 标签：html, css

我有一个 div 标签，里面有内容，我希望它展开，所以我的页脚总是跟在它后面。事实上，我的内容标签没有扩展，我的页脚与我的内容重叠。如何使 div 展开并向下推我的页脚？

这是我的 HTML：

```
 <!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head runat="server">
        <title></title>
        <link rel="Stylesheet" href="images/Main.css"" />
    </head>
    <body>
        <form id="form1" runat="server">
        <div class="container">
            <div class="header">
                <div class="logo" id="logo"></div>
                <div class="socialNetworkingButtons"> </div>
                <div class="languageSelector"><a href="#"></a></div>
                <div class="headerBanner"></div>
                <div class="icons"></div>
                <div class="hr"><hr /></div>
            </div>
            <div class="content" id="home">
                <div class="videoBox"><img class="largeBlock" height="500" /></div>
                <div class="description"></div>
                <div class="keyFeatures"></div>
            </div>
            <br class="clear" />
            <div class="footer">
                <div class="copyright"><p>Here is some text</p></div>
            </div>
        </div>
        </form>
    </body>
    </html> 
```

还有我的 CSS：

```
 html, body {
    width: 100%;
    height: 100%;
    font-family: Verdana, Arial, Helvetica, Sans-Serif;
    background: #fff;
    margin: 0;
    padding: 0;
}

img, div {
    border: none;
}

span {
    margin:0;
    padding: 0;
}

a {
    color: #000;
    text-decoration: none;
}

a:hover {
    color: #000;
    text-decoration: underline;    
}

.clear {
    clear: both;
}

/* contains all content on the page */
.container {
    width: 100%;
    height: 100%;
    position: relative;
    top: 0px;
    clear:both;
}

/* begin header css */
.header {
    position: relative;
    top: 0px;
    left: 33px;
    width: 956px;
    height: 290px;
    display: block;
}

.logo {
    position: relative;
    top: 0px;
    left: 0px;
    width: 143px;
    height: 83px;
}

.socialNetworkingButtons {
    position: absolute;
    top: 9px;
    left: 836px;
    width: 120px;
    height: 42px;
    text-align:right;
}

.languageSelector {
    position: absolute;
    top: 51px;
    left: 646px;
    width: 310px;
    height: 32px;
    text-align: right;
}

.headerBanner {
    position: absolute;
    top: 83px;
    left: 0px;
    width: 956px;
    height: 127px;
}

.icons {
    position: absolute;
    width: 956px;
    height: 64px;
    left: 0px;
    top: 210px;
    text-align:center;
}

.icon {
    width: 149px;
    height: 47px;
    display: inline;
    position: relative;
}

hr {
    color: #AF0837;
    background-color: #AF0837;
    height: 7px;
    width: 939px;
    margin: 0 auto;
    border: 0px;
}

div.hr {
    position : absolute;
    top: 275px;
    left: 0px;
    width: 956px;
    height: 6px;
}

/* end header css */

/* begin content css */
.content {
    position: relative;
    margin-top: 6px;
    width: 956px;
    display: block;
    float: left;
    margin-left: 43px;
    clear:both;
}

.videoBox {
    position: relative;
    float:left;
    width: 615px;
    height: 328px;
}

.title {
    position: relative;
    float:right;
    top: 0px;
    width: 341px;
    height: 30px;
    font-size: 16px;
    font-weight: bold;
}

.description {
    position: relative;
    float:right;
    top: 30px;
    width: 341px;
    height: 206px;
}

.keyFeatures {
    position: relative;
    float:right;
    width: 341px;
    height: 102px;
}

/* end content css */

/* begin footer css */

.footer {
    position: relative;
    width: 956px;
    height: 170px;
    left: 33px;
    top: 20px;
    display:block;
    clear:both;
}   

.copyright {
    background-color: #AF0837;
    width: 100%;
    height: 45px;
}

.copyright p{
    width: 100%;
    height: 45px;
    text-align: right;
    margin-top: 10px;
    color: #fff;
}
/* end footer css*/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T19:39:14.047

您为内容中的“videoBox”使用了两个单独的高度。一个在 CSS 中，一个在 HTML 中。

只需`height: 328px;`从`videoBox`您的 css 中删除即可停止重叠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T19:16:37.833

你可以尝试改变这个

```
<div class="content" id="home">
    <div class="videoBox"><img class="largeBlock" height="500" /></div>
    <div class="description"></div>
    <div class="keyFeatures"></div>
</div> 
```

到

```
<div class="content" id="home">
    <div class="videoBox"><img class="largeBlock" height="500" /></div>
    <div class="description"></div>
    <div class="keyFeatures"></div>
    <div class="clear"></div>
</div> 
```

编辑：修正了一个错字..我的错

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T19:18:20.613

您在 .description 和 .keyFeatures 类的样式中定义了明确的高度，我猜它们是变量内容所在的容器。这就是为什么它没有扩大，移除那些高度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T19:21:01.777

如果您不需要设置明确的高度，Redlena 是正确的。如果您确实需要设置显式高度并且需要父级拉伸，那么您应该在 CSS 中使用 'min-height' 属性。只需将您的“高度”声明更改为使用“最小高度”即可解决您的问题。

编辑：您也可以尝试将页脚固定到窗口底部。[这是实现此目的的一种方法。](http://ryanfait.com/resources/footer-stick-to-bottom-of-page/)

# android - 在 onPause() 中调用 onDestroy()：保证活动销毁的好主意？

> ID：10146906
> 
> 赞同：1
> 
> 时间：2012-04-13T19:11:30.163
> 
> 标签：android

我有一个以单实例模式启动的活动。它仅在调用时才起作用，之后就没有任何作用。

现在当然我已经操纵了它，所以从理论上讲，用户不能在不终止活动的情况下离开活动。也就是说，我知道允许绕过此类行为的应用程序，例如离合器垫。

问题：如果我想非常非常确定我的活动在远离它时死亡（即，如果它落入后台），是否保存/建议在 onPause 内调用 onDestroy，或者这是一个坏主意。

如果一个坏主意，那么实现这一目标的正确方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T19:19:09.453

`onDestroy()`不会结束您的活动，它会在活动被销毁时由系统调用。您覆盖它，以便您可以在活动结束时清理您的活动（例如停止您从中启动的其他线程）。您可能应该避免调用它，而是让系统在需要时为您调用它。如果您想结束您的活动，请致电`finish()`。

# android - 如何使用首选项活动来存储shakeeventlistener 类的变量？

> ID：10146909
> 
> 赞同：0
> 
> 时间：2012-04-13T19:11:37.450
> 
> 标签：android, variables, android-layout, android-intent, sharedpreferences

我所拥有的给了我这些错误。

```
04-13 15:01:41.600: E/AndroidRuntime(8431): FATAL EXCEPTION: main
04-13 15:01:41.600: E/AndroidRuntime(8431): java.lang.RuntimeException: Unable to start activity ComponentInfo    {com.omnilabs.alexandernapoles.hl2sticl/com.example.example.example.MainClass}: java.lang.NullPointerException
04-13 15:01:41.600: E/AndroidRuntime(8431):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
04-13 15:01:41.600: E/AndroidRuntime(8431):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
04-13 15:01:41.600: E/AndroidRuntime(8431):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
04-13 15:01:41.600: E/AndroidRuntime(8431):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
04-13 15:01:41.600: E/AndroidRuntime(8431):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-13 15:01:41.600: E/AndroidRuntime(8431):     at android.os.Looper.loop(Looper.java:137)
04-13 15:01:41.600: E/AndroidRuntime(8431):     at android.app.ActivityThread.main(ActivityThread.java:4424)
04-13 15:01:41.600: E/AndroidRuntime(8431):     at java.lang.reflect.Method.invokeNative(Native Method)
04-13 15:01:41.600: E/AndroidRuntime(8431):     at java.lang.reflect.Method.invoke(Method.java:511)
04-13 15:01:41.600: E/AndroidRuntime(8431):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
04-13 15:01:41.600: E/AndroidRuntime(8431):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
04-13 15:01:41.600: E/AndroidRuntime(8431):     at dalvik.system.NativeStart.main(Native Method)
04-13 15:01:41.600: E/AndroidRuntime(8431): Caused by: java.lang.NullPointerException
04-13 15:01:41.600: E/AndroidRuntime(8431):     at android.content.ContextWrapper.getPackageName(ContextWrapper.java:127)
04-13 15:01:41.600: E/AndroidRuntime(8431):     at android.preference.PreferenceManager.getDefaultSharedPreferencesName    (PreferenceManager.java:371)
04-13 15:01:41.600: E/AndroidRuntime(8431):     at android.preference.PreferenceManager.getDefaultSharedPreferences    (PreferenceManager.java:366)
04-13 15:01:41.600: E/AndroidRuntime(8431):     at com.example.example.example.ShakeEventListener.<init>(ShakeEventListener.java:24)
04-13 15:01:41.600: E/AndroidRuntime(8431):     at com.example.example.example.MainClass.onCreate(StunBatton.java:38)
04-13 15:01:41.600: E/AndroidRuntime(8431):     at android.app.Activity.performCreate(Activity.java:4465)
04-13 15:01:41.600: E/AndroidRuntime(8431):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-13 15:01:41.600: E/AndroidRuntime(8431):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
04-13 15:01:41.600: E/AndroidRuntime(8431):     ... 11 more 
```

这是我的shakevent监听器类的一部分，涉及偏好

```
public class ShakeEventListener extends Application implements SensorEventListener {
public void onCreate(Bundle savedInstanceState) {

    super.onCreate();

}
SharedPreferences preferences =
         PreferenceManager.getDefaultSharedPreferences(this);

private String editTextPref = getString(R.string.preference_key);
int nVar = preferences.getInt(editTextPref, MODE_PRIVATE);
int MIN_FORCE = nVar;
/**
* Minimum times in a shake gesture that the direction of movement needs to
* change.
*/
private static final int MIN_DIRECTION_CHANGE = 15;

/** Maximum pause between movements. */
private static final int MAX_PAUSE_BETHWEEN_DIRECTION_CHANGE = 50000; 
```

等等等等

首选项.java

```
package com.example.example.example;

import android.os.Bundle;
import android.preference.PreferenceActivity;

public class Preferences extends PreferenceActivity {
        @Override
        protected void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                addPreferencesFromResource(R.layout.preferences);

        }
} 
```

首选项.xml

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
        <PreferenceCategory
                android:title="First Category">
        <EditTextPreference
                android:name="Stun Swing Sensitivity"
                android:summary="This allows you to custom fit your sensitivity."
                android:defaultValue="10"
               android:numeric="integer"
                android:maxLength="200"
                android:title="Sensitivity Level"
                android:key="@string/preference_key" />
        </PreferenceCategory>

</PreferenceScreen> 
```

在strings.xml里面我把editTextPref

所以基本上我只想知道如何在一个活动要求摇动的类文件中使用一个变量，然后它使用 onShake(); 从摇动活动中调用，但我想将 MIN_FORCE 保存为变量 nVar 并且 nVar 是首选项文件中的设置，即整数。

请帮忙！！！！！！！！！

编辑：我知道这与这段代码有关

```
 SharedPreferences preferences =
             PreferenceManager.getDefaultSharedPreferences(this);
 String editTextPref = getString(R.string.preference_key);
nVar = preferences.getInt(editTextPref, 10); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:43:35.037

您必须将呼叫移至`getDefaultSharedPreferences`内部`onCreate`（或稍后的回调）。它在外部不起作用，因为在对象构建时您的 Activity 没有完全设置。

```
public class ShakeEventListener extends Application implements SensorEventListener {

int nVar = 0;
public void onCreate(Bundle savedInstanceState) {

    super.onCreate();
    SharedPreferences preferences =
         PreferenceManager.getDefaultSharedPreferences(this);

    private String editTextPref = getString(R.string.preference_key);
    nVar = preferences.getInt(editTextPref, MODE_PRIVATE);
    int MIN_FORCE = nVar;
} 
```

# ios - 确定应用程序是否正在与 APNS 沙箱或生产环境通信

> ID：10146911
> 
> 赞同：20
> 
> 时间：2012-04-13T19:12:02.093
> 
> 标签：ios, push-notification, apple-push-notifications

我在我的应用程序中设置了推送通知。我正在尝试确定我在该`application:didRegisterForRemoteNotificationsWithDeviceToken:`方法中从 APNS 收到的设备令牌是否来自沙盒或开发环境。如果我可以区分哪个环境初始化了令牌，我就可以告诉我的服务器向哪个环境发送推送通知。

我尝试使用`DEBUG`宏来确定这一点，但我看到了一些奇怪的行为，并且不相信它是 100% 正确的。

```
#ifdef DEBUG
BOOL isProd = YES;
#else
BOOL isProd = NO;
#endif 
```

理想情况下，我可以检查`aps-environment`代码中的权利（值是开发或生产），但我不确定这是否可能。

确定您的应用程序是否与 APNS 沙箱或生产环境通信的正确方法是什么？我假设服务器首先需要知道这一点。如果这是假设不正确，请纠正我。

**已编辑**：Apple 关于[Provider Communication with APNS](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingWIthAPS/CommunicatingWIthAPS.html#//apple_ref/doc/uid/TP40008194-CH101-SW1)的文档详细介绍了与沙箱和生产环境进行通信的区别。但是，该文档没有提供有关如何与注册令牌（从 iOS 客户端应用程序）和与服务器通信保持一致的信息。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-05-28T10:44:36.567

您可以阅读和检查嵌入式配置文件。

[https://github.com/tcurdt/TCMobileProvision](https://github.com/tcurdt/TCMobileProvision)

这就是我所做的：

```
NSString *mobileprovisionPath = [[[NSBundle mainBundle] bundlePath]
        stringByAppendingPathComponent:@"embedded.mobileprovision"];
TCMobileProvision *mobileprovision = [[TCMobileProvision alloc] initWithData:[NSData dataWithContentsOfFile:mobileprovisionPath]];
NSDictionary *entitlements = mobileprovision.dict[@"Entitlements"];
NSString *apsEnvironment = entitlements[@"aps-environment"];
BOOL production = entitlements && apsEnvironment && [apsEnvironment isEqualToString:@"production"]; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-11-02T15:51:07.963

这是一个黑客，但它正在`XCode 8`使用`Swift 3`

我们基本上是打开`embedded.mobileprovision`文件，将其转换为字符串，然后检查表明应用程序正在使用开发应用程序环境的字符串。

```
func isDevelopmentEnvironment() -> Bool {
    guard let filePath = Bundle.main.path(forResource: "embedded", ofType:"mobileprovision") else {
        return false
    }
    do {
        let url = URL(fileURLWithPath: filePath)
        let data = try Data(contentsOf: url)
        guard let string = String(data: data, encoding: .ascii) else {
            return false
        }
        if string.contains("<key>aps-environment</key>\n\t\t<string>development</string>") {
            return true
        }
    } catch {}
    return false
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-13T23:43:07.077

1.  APNS 环境是根据与您的代码签名身份匹配的代码签名权利确定的（[在此处](https://stackoverflow.com/questions/5681172/bundle-identifier-and-push-certificate-aps-environment-entitlement-error)发布好帖子） - 虽然识别您的构建配置可能有效，但如果您将该构建配置与不匹配的权利匹配，它也可能是错误的。

2.  请记住这一点，使用 DEBUG 作为确定您的权利的方法应该有效（如果您发现 DEBUG 很棘手，您可以在“Apple LLVM ...”->“Other C Flags”->下添加自己的链接器标志“调试”）例如，添加 -DDEBUGGING 然后使用：

`#ifdef DEBUGGING BOOL isProd = YES; #else BOOL isProd = NO; #endif`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-11-09T21:11:41.640

我想确保反序列化配置文件中的 plist，而不是搜索字符串。

```
import UIKit

public extension UIDevice {
    enum PushEnvironment: String {
        case unknown
        case development
        case production
    }

    var pushEnvironment: PushEnvironment {
        guard let provisioningProfile = try? provisioningProfile(),
              let entitlements = provisioningProfile["Entitlements"] as? [String: Any],
              let environment = entitlements["aps-environment"] as? String
        else {
            return .unknown
        }

        return PushEnvironment(rawValue: environment) ?? .unknown
    }

    // MARK: - Private

    private func provisioningProfile() throws -> [String: Any]? {
        guard let url = Bundle.main.url(forResource: "embedded", withExtension: "mobileprovision") else {
            return nil
        }

        let binaryString = try String(contentsOf: url, encoding: .isoLatin1)

        let scanner = Scanner(string: binaryString)
        guard scanner.scanUpToString("<plist") != nil, let plistString = scanner.scanUpToString("</plist>"),
              let data = (plistString + "</plist>").data(using: .isoLatin1)
        else {
            return nil
        }

        return try PropertyListSerialization.propertyList(from: data, options: [], format: nil) as? [String: Any]
    }
} 
```

您可以使用它来执行以下操作：

```
UIDevice.current.pushEnvironment == .production 
```

当我告诉我的 API 关于我的设备时，我包括`UIDevice.current.pushEnvironment.rawValue`并且 API 可以使用适当的证书和网关来发送设备通知。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-05T13:32:39.567

正如@tcurdt 的回答中提到的，确定是否使用沙箱的唯一安全方法是检查配置文件。这是使用 TCMobileProvision 的 Swift 代码：

```
func isAPNSandbox() -> Bool {
    if let mobileProvisionURL = NSBundle.mainBundle().URLForResource("embedded", withExtension: "mobileprovision"),
    let mobileProvisionData = NSData(contentsOfURL: mobileProvisionURL),
    let mobileProvision = TCMobileProvision(data: mobileProvisionData) {
        if let entitlements = mobileProvision.dict["Entitlements"],
        let apsEnvironment = entitlements["aps-environment"] as? String
        where apsEnvironment == "development" {
            return true
        }
    }

    return false
} 
```

要安装 TCMobileProvision，请将其添加到您的 Podfile：

```
pod 'TCMobileProvision', :git => 'https://github.com/tcurdt/TCMobileProvision.git' 
```

# backbone.js - 在 Backbone.js 中访问模型的视图

> ID：10146915
> 
> 赞同：0
> 
> 时间：2012-04-13T19:12:30.440
> 
> 标签：backbone.js

如何访问与模型对象相关的视图元素？

例如，我有一个`Products`. 每个产品都有`color`属性。我想“隐藏”（即删除视图表示）每个`color`等于`"red"`.

到目前为止我知道的唯一方法是通过调用`destroy()`模型对象的（例如）方法（下面的代码）。但我不想破坏模型的对象。是否可以在不更改其模型的情况下删除视图的元素？

```
// App
hide_red_products: function() { 
  Product.each(function(x) {
    if (x.attributes.color == "red") { x.destroy() }
  })
}

// Products' view
initialize: function() {
  this.model.bind('destroy', this.remove_element, this);
}

remove_element: function() {
  return $(this.el).remove();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T23:34:09.800

模型不应该控制视图在做什么。

您应该使用该`trigger`方法来触发事件。假设颜色从某种颜色变为红色，您应该使用该`change`事件。如果您监听 change 事件，您甚至不需要该`hide_red_products`方法。

```
// App
hide_red_products: function() { 
  Product.each(function(x) {

    //if (x.attributes.color == "red") { x.trigger() }
    // you should never access a models attributes using the attributes key
    if (x.get('color') === 'red') { x.trigger('change'); } // shouldn't actually need this.
  })
}

// Products' view
initialize: function() {
  //this.model.bind('destroy', this.remove_element, this);
  this.model.bind('change', this.remove_element, this);
}

remove_element: function(model) {
  if (model.get('color') === 'red') {
     $(this.el).remove();
  }
} 
```

就像我之前说的，如果视图侦听更改事件，则不必调用方法来删除元素。如果您觉得有必要，您可以自己使用`change`或自定义事件触发它`x.trigger('changedToRed');`

# git - Git Glob 语法：忽略任何地方或特定文件夹中的文件

> ID：10146916
> 
> 赞同：3
> 
> 时间：2012-04-13T19:12:38.520
> 
> 标签：git, gitignore, glob

我想从 myfolder 和**所有子文件夹**`.DS_Store`中排除跟踪。我还想从 myfolder 中排除一个文件（但**不是**从它的**子文件夹**中）。**`.project`**

 ******我应该在 .gitignore （位于我的文件夹中）中写什么？

```
.DS_Store # or *.DS_Store ? I mean, is the asterisk necessary?
./.project # is this syntax correct? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T19:23:08.427

这应该可以解决问题：

```
.DS_Store
/.project 
```

当您提供 .gitignore 的路径时，它会根据 .gitignore 文件的位置应用它（如果您愿意，可以使用 chroot）。所以第二行的 / 意味着只忽略`myfolder/.project`文件。******

# html - 为什么铬在相对定位的元素之后将底部元素向上拉？

> ID：10146917
> 
> 赞同：2
> 
> 时间：2012-04-13T19:12:42.453
> 
> 标签：html, css, google-chrome

这是我从未想过我会输入的内容：chrome 会破坏布局，但 IE（或任何其他浏览器）不会...

有一个带有位置的特色滑块：相对；里面有元素，位置：绝对；

javascript循环遍历元素以创建旋转图像

见： http: [//guardianweb.edulence.com/model10/](http://guardianweb.edulence.com/model10/)

我为特色滑块下方的两个元素添加了 304px 的边距顶部，但除了谷歌浏览器之外，每个浏览器的差距都很大

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T19:22:20.920

发生的事情是其他浏览器错误地将 305px 的高度和 940px 的宽度应用于您的`#featured`分区。我不知道他们为什么要这样做。Chrome**正确地**渲染了高度为 0 的元素，因为元素内部没有内容（绝对定位的元素不会占用文档流中的任何空间）。

**在 Chrome 中：**

![铬元素](../Images/544407e806a3d6291112a3de2c571c8f.png)

**在火狐中：**

![火狐元素](../Images/44734fcbd5916f63bc91d835e1a81beb.png)

我想您可以解决此问题的一种方法*是*手动指定元素的宽度和高度，`#featured`以便所有浏览器（包括 Chrome）的行为都相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T19:27:07.630

我相信问题在这里：

```
// stretch container
var reshape = opts.containerResize && !$cont.innerHeight();
if (reshape) { // do this only if container has no size http://tinyurl.com/da2oa9
    var maxw = 0, maxh = 0;
    for(var j=0; j < els.length; j++) {
        var $e = $(els[j]), e = $e[0], w = $e.outerWidth(), h = $e.outerHeight();
        if (!w) w = e.offsetWidth || e.width || $e.attr('width');
        if (!h) h = e.offsetHeight || e.height || $e.attr('height');
        maxw = w > maxw ? w : maxw;
        maxh = h > maxh ? h : maxh;
    }
    if (maxw > 0 && maxh > 0)
        $cont.css({width:maxw+'px',height:maxh+'px'});
} 
```

`!$cont.innerHeight()`在 chrome 中似乎是错误的，但在其他浏览器中是正确的。这导致插件为 div 设置特定的高度和宽度，而在 chrome 中没有设置高度，这意味着它仍然是 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T19:22:21.153

这不是 Chrome 的错。如果您检查该`#featured`元素，您会注意到该元素在 Firefox 中通过 CSS 内联样式设置了高度和宽度，但在 Chrome 中没有。

火狐：`<div id="featured" style="width: 940px; height: 305px;">`

铬合金：`<div id="featured">`

该 DIV 的高度在 Chrome 中为零。

该`style`属性是通过 JavaScript 添加到 DIV 中的，因此您必须弄清楚为什么它是为 Firefox 添加的，而不是为 Chrome 添加的...

# python - 求函数的最大值

> ID：10146924
> 
> 赞同：21
> 
> 时间：2012-04-13T19:13:10.430
> 
> 标签：python, numpy

如何在 Python 中找到函数的最大值？我可以尝试将一个导数函数组合在一起并找到它的零，但是`numpy`（或其他库）中是否有一种方法可以为我做到这一点？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-13T19:17:45.493

您可以[`scipy.optimize.fmin`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.fmin.html)在函数的负数上使用。

```
def f(x): return -2 * x**2 + 4 * x
max_x = scipy.optimize.fmin(lambda x: -f(x), 0)
# array([ 1.]) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-19T13:54:32.127

如果您的函数可以解析求解，请尝试 SymPy。我将使用上面的 EMS 示例。

```
In [1]: from sympy import *
In [2]: x = Symbol('x', real=True)

In [3]: f = -2 * x**2 + 4*x

In [4]: fprime = f.diff(x)
In [5]: fprime
Out[5]: -4*x + 4

In [6]: solve(fprime, x) # solve fprime = 0 with respect to x
Out[6]: [1] 
```

当然，您仍然需要检查 1 是否是 f 的最大值而不是最小值

```
In [7]: f.diff(x).diff(x) < 0
Out[7]: True 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-03T09:41:33.040

我认为`scipy.optimize.minimize_scalar`并且`scipy.optimize.minimize`是现在的首选方式，可以让您访问各种技术，例如

```
solution = scipy.optimize.minimize_scalar(lambda x: -f(x), bounds=[0,1], method='bounded') 
```

对于必须位于 0 和 1 之间的单个变量函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T20:50:58.217

你可以试试[SymPy](http://sympy.org/en/index.html)。SymPy 可能能够象征性地为您提供导数，找到它的零点，等等。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-12-05T16:16:11.167

带参数的函数的最大值。

```
import scipy.optimize as opt

def get_function_max(f, *args):
    """
    >>> round(get_function_max(lambda x, *a: 3.0-2.0*(x**2)), 2)
    3.0

    >>> round(get_function_max(lambda x, *a: 3.0-2.0*(x**2)-2.0*x), 2)
    3.5

    >>> round(get_function_max(lambda x, *a: a[0]-a[1]*(x**2)-a[1]*x, 3.0, 2.0), 2)
    3.5
    """
    def func(x, *arg):
        return -f(x, *arg)
    return f(opt.fmin(func, 0, args=args, disp=False)[0], *args) 
```

# jquery - 不使用 jQuery-Mobile 的 jQuery-Mobile listview 插件

> ID：10146925
> 
> 赞同：2
> 
> 时间：2012-04-13T19:13:10.917
> 
> 标签：jquery, listview, jquery-mobile

我在这个搜索中遇到了最困难的时间，并且只能一般地询问它。

我想知道是否有一个独立的 jQuery 插件，它基本上具有与 jQuery Mobile 列表视图相同的功能。我真的在寻找类似的功能选项（可滚动、计数气泡、缩略图/图标、拆分列表），但我不想使用框架的其余部分或手动构建它。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T08:36:33.907

[2012 年 7 月编辑] 下载生成器现已上线：http: [//jquerymobile.com/download-builder/](http://jquerymobile.com/download-builder/)

您可以选择您想要的任何功能，并为您构建一个包！

# java - java中的数组的get（）类似的东西？

> ID：10146927
> 
> 赞同：-2
> 
> 时间：2012-04-13T19:13:26.023
> 
> 标签：java, arrays

有没有类似于我可以用于数组的 arrayList 的 get() 方法的东西？我正在尝试从 array1 中获取第一个值，将其添加到数组 2 中的第一个值中，然后将其添加到数组 3 中的第一个值中，然后除以 3 以找到平均值。我有一次我重复了第二个，依此类推，然后将它们放置在一个新数组中。

```
String[] Array1=
{
new String("Adam  "),new String("Smith "),new String("Jones "),new String("Becky   "),new String("Taylor")
};

Integer[] Array2=
{
new Integer(90),new Integer(89),new Integer(86),new Integer(76),new Integer(95)
};

Integer[] Array3=
{
    new Integer(92),new Integer(79),new Integer(85),new Integer(90),new Integer(87)
};

Integer[] Array4=
{
    new Integer(93),new Integer(80),new Integer(90),new Integer(87),new Integer(92)
};

Integer[] Array5=
{
    new Integer(90),new Integer(77),new Integer(86),new Integer(92),new Integer(89)
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T19:15:26.150

您可以通过索引访问它：

```
array1[0] // first element of array1
array1[1] // second element of array1
..... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T19:15:28.447

我认为您正在寻找以下内容：

```
String adam = Array1[0]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T19:17:07.257

```
(Array2[0] + Array3[0] + Array4[0] + Array5[0])/4 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T09:24:37.900

您的示例代码非常适合构造函数。这在功能上应该是等效的：

```
String[] Array1 = {"Adam  "), "Smith ", "Jones ", "Becky   ", "Taylor" };
Integer[] Array2 = { 90, 89, 86, 76, 95 };
Integer[] Array3 = { 92, 79, 85, 90, 87 };
Integer[] Array4 = { 93, 80, 90, 87, 92 };
Integer[] Array5 = { 90, 77, 86, 92, 89 }; 
```

正如其他人所说，您希望 array[index] 运算符从数组中获取项目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T19:15:36.927

数组的`get(index)`方法就是`[index]`：

```
String s = anArray[0];
// equivalent to
String s = anArraylist.get(0); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-13T19:16:18.430

内置`[]`运算符相当于`List.get`. 就像是

```
array4[i] = (array1[i] + array2[i] + array3[i]) / 3; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-13T19:22:10.750

```
for(int i = 0; i < cantArrays;i++)
{
     int sum = 0;
     double avg;
     for(int j = 0; j < Array1.lenght;j++)
     {
         sum = Array2[j] + Array3[j] + Array4[j] + Array5[j];
         avg = sum / 4;
     }

} 
```

# c++ - Qt foreach 在 Eclipse 中给了我语法错误突出显示

> ID：10146929
> 
> 赞同：5
> 
> 时间：2012-04-13T19:13:27.407
> 
> 标签：c++, eclipse, qt

Qt foreach 在 Eclipse 中给了我语法错误突出显示。

我正在使用 Qt 框架在 C++ 中编程。

我使用 Eclipse SDK (3.5.2) 作为我的文本编辑器/IDE。

我使用 GCC 在 Eclipse 之外的控制台中编译。

当我在 Eclipse 中编辑文件时，我发现 Qt 的“foreach”突出显示为语法错误。

有谁知道如何解决这一问题？这不是特别重要或其他任何事情，但它开始让我烦恼。就好像它没有识别命令或什么的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-28T19:03:08.217

如果您在 Eclipse 中启用了 c++11 支持，则可以将“foreach”重新定义为基于范围的 for 循环。在项目属性中，选择左侧窗格中的“路径和符号”，然后选择“符号”选项卡。添加一个带有 'Name'= foreach(a,b) 'Value'=for(a:b) 的新符号 选择“添加到所有配置”和“添加到所有语言”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T15:12:07.190

foreach 不是标准的 C++ 关键字。我认为 Qt moc 编译器将其转换为生成的代码，就像它对 Q_OBJECT 标记类中的信号/插槽所做的那样。因此可以预料 Eclipse 无法识别这一点。如果你使用这些 Qt 特有的特性，你最好使用 Qt creator。

# ios - 使用核心数据中的新数据升级应用

> ID：10146936
> 
> 赞同：0
> 
> 时间：2012-04-13T19:14:25.510
> 
> 标签：ios, core-data, upgrade

我在 App Store 中升级我的应用时遇到问题。这个应用程序有一个包含 100 条记录的核心数据数据库。在我的新版本中，我想上传一个具有相同架构但有 101 条记录的新数据库，并且我希望在用户更新应用程序时显示新数据。

据我了解，如果我只是简单地更新核心数据中的数据，则旧数据库会得到维护，访问新数据的唯一方法是卸载应用程序并重新安装。

您有什么建议可以强制手机上安装的应用升级后使用新的核心数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:48:41.067

该应用程序是否包含捆绑软件的 sqlite 文件部分？如果是这样，您只需检查核心数据中有多少行。如果为 100，则将新的 sqlite 文件从包复制到 Documents 目录。 [此链接可能会有所帮助。](https://stackoverflow.com/questions/4743317/iphone-how-to-copy-a-file-from-resources-to-documents)

# javascript - 使用帖子打开从 iFrame 到其父级的窗口

> ID：10146940
> 
> 赞同：0
> 
> 时间：2012-04-13T19:14:54.657
> 
> 标签：javascript, jquery, html

我在这个网站上发现了类似的问题，但似乎没有一个解决方案适用于我的具体问题。

我的网站上嵌入了一个 iFrame。在这个 iFrame 内部是一个带有使用 3rd 方邮件服务的输入字段的表单。提交此表单后，会弹出一条确认消息。

我需要此消息出现在另一个 iFrame 内的主页中，其 ID 为 mailingIframe。以下是我目前拥有的代码：

```
<form action="http://blockdot.us4.list-manage.com/subscribe/post?u=434e0b545d0c86c1ccd5aee9c&amp;id=5a445105c5" method="post" id="mc-embedded-subscribe-form" class="validate" **target="parent.document.getElementById('mailingIframe')"** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:00:29.453

您需要替换您的表单操作，`action="javascript:;"`然后创建一个在您的提交按钮的 onclick 事件上调用的 javascript 函数。这个函数基本上会进行验证和数据提交，它的返回是将你的验证/程序消息放到你的“mailingIframe”区域的内容中，比如`$("#mailingIframe").html('YOUR MESSAGE!');`

# reporting-services - 如何显示“无可用数据”。当报告中没有行可显示时？

> ID：10146944
> 
> 赞同：22
> 
> 时间：2012-04-13T19:15:21.707
> 
> 标签：reporting-services, reportingservices-2005, bids

我正在使用 BIDS 构建 SSRS 2005 报告。我的报告按日期过滤。当所选日期没有返回数据行时，报告为空白，仅显示标题，没有表或列标题。

如何更改它以显示类似*`No data available.`*or的消息*`Report is empty.`*？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-04-13T19:59:13.510

您可以`NoRowsMessage`像这样在报表的表格控件上设置可用的属性：

*   选择`Tablix`控件并按下`F4`以查看“属性”窗格。
*   找到`NoRowsMessage`属性并将值设置为您想要的任何消息。
*   您还可以使用`Font`和`TextAlign`属性来格式化消息。
    *   ![设置无行消息](../Images/e8a9b6641413eeb4609d34b6aff04a27.png)

以下是报告在各种设置下的外观示例：

![例子](../Images/7a4f294142628023f59189751eff667b.png)

**进一步阅读**：这是一篇关于如何[为数据区域设置无数据消息的 Technet 文章](http://technet.microsoft.com/en-us/library/dd220407.aspx)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-08-31T16:49:24.387

### 避免`NoRowsMessage`并建立自己的条件空行

一个问题（或功能，如果这是你想要的）`NoRowsMessage`是它会用一个普通的旧消息字符串替换整个表。

在我看来，这提供了一种相对违反直觉的最终用户体验。通常，当系统没有找到数据时，我们想知道正在寻找什么数据以及它的样子。

相反，基于[如何在没有数据显示时保持 Tablix 的结构](https://dba.stackexchange.com/a/48846/31340)，您可以执行以下操作：

1.  **在组外和详细信息记录上方 **插入新标题行。**![插入新标题行](../Images/3b885a787aae1fb600feb4b8b24cc9c0.png)**

***   右键单击新行的一侧并**设置行可见性** ![设置行可见性](../Images/6c8d9bfe0d80c18e88db2167963fc746.png)

    *   将**Visibility 设置为以下表达式**，它将[计算当前 Tablix 中的行数，](https://stackoverflow.com/a/10948672/1366033)并且仅在没有数据时将 Visibility 设置为 True。

    ```
    =CountRows() > 0 
    ```

    ![可见性表达](../Images/4211cefa8b410d41792e6c327f790bee.png)

    *   **或者**，合并单元格并添加您自己的消息或只显示一个空行 ![合并单元格](../Images/d5cb15f726e477dda0535738e9d89ef6.png) ![自定义消息](../Images/2823776e512b6ac35d9cc479f8c608be.png)** 

 **### 以下是各种选项如何呈现的比较：（
^(*选择您认为最适合您的数据和用例的外观）*)

![输出示例](../Images/d510aa719ec78e60565a70af12b15e4a.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-13T19:49:13.957

右键单击您在报告中使用的任何数据绑定元素，应该有一个属性`NoDataMessage`。那里有很多选项，但标题是我要查看的第一个元素。**

# php - php代码md5哈希解释

> ID：10146951
> 
> 赞同：1
> 
> 时间：2012-04-13T19:15:37.100
> 
> 标签：php

我正在使用moodle系统，但事实证明它使用md5 salt hashing。我找到了一些，所以也许你可以向我解释一下，因为我只有基本的 php 知识。

```
function validate_internal_user_password($user, $password) {
global $CFG;

if (!isset($CFG->passwordsaltmain)) {
    $CFG->passwordsaltmain = '';
}

$validated = false;

if ($user->password === 'not cached') {
    // internal password is not used at all, it can not validate

} else if ($user->password === md5($password.$CFG->passwordsaltmain)
        or $user->password === md5($password)
        or $user->password === md5(addslashes($password).$CFG->passwordsaltmain)
        or $user->password === md5(addslashes($password))) {
    // note: we are intentionally using the addslashes() here because we
    //       need to accept old password hashes of passwords with magic quotes
    $validated = true;

} else {
    for ($i=1; $i<=20; $i++) { //20 alternative salts should be enough, right?
        $alt = 'passwordsaltalt'.$i;
        if (!empty($CFG->$alt)) {
            if ($user->password === md5($password.$CFG->$alt) or $user->password === md5(addslashes($password).$CFG->$alt)) {
                $validated = true;
                break;
            }
        }
    }
}

if ($validated) {
    // force update of password hash using latest main password salt and encoding if needed
    update_internal_user_password($user, $password);
}

return $validated; 
```

}

输入简单文本后会变成散列，这很难改变吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:28:08.800

这是一个密码验证，其中包含一些旧密码。

它允许使用 5 种形式的密码：

*   md5（密码）
*   md5（添加斜杠（密码））
*   md5（密码+通用盐）
*   md5(addslashed) + 通用盐)
*   md5（密码 + saltX）

首先，什么是md5？md5 是“消息摘要 5”。长话短说，它是一个将字符串转换为 32 个字符的字符串调用 a 的函数`hash`。的主要属性`hash`是很难（如计算上的困难）取回原始字符串。存储密码的理想选择，对吧？:)

但是只有密码是不够的。想象一下您的密码是“dragon”（顺便说一句，密码非常糟糕）。如果你碰巧知道 md5 中的“dragon”是“8621ffdbc5698829397d97767ac13db3”，你只需查看`hash`. 因此，您添加了所谓的“盐”。这只是在散列之前添加到密码中的另一个词。

如果您的盐是“notsob1gs3cret”，则密码本质上是“dragonnotsob1gs3cret”，结果为：“c47948e6b966357f1b9a3732c4ee7c72”，它看起来不像“8621ffdbc5698829397d97767ac13db3”。这是哈希的另一个属性，相似的输入应该产生完全不相似的输出，足以与任何随机词几乎一样相似。

如果您的攻击者从未见过盐“notsob1gs3cret”，他就不会那么容易猜出原始密码。

所以关于你的代码。忽略addlashes，这可能来自一些遗留错误。看起来有人后来试图添加一个加盐机制，但仍然希望所有旧密码都能正常工作，但看起来有点笨拙。理想情况下，您只有一种有效的密码机制并升级您较弱的安全性。

有 20 种不同的盐，我想这是一个不错的主意 .. 但代码似乎不知道使用了哪一种 .. 所以它会尝试所有的盐吗？这很奇怪，可能不安全。

要散列一些文本，只需执行以下操作：

```
$text = "a bit of text";
var_dump(md5($text)); 
```

# apache - 在 Apache 上为 mod_jk 设置 SSL 到 JBoss As

> ID：10146953
> 
> 赞同：2
> 
> 时间：2012-04-13T19:15:44.293
> 
> 标签：apache, jboss, apache2, jboss5.x, mod-jk

我已将 Apache 配置为负载均衡器，以向 JBoss 发送 http 请求。然而，尝试添加 https 被证明是困难的。我相信我需要使用虚拟主机。我有所需的证书和密钥文件，如果有人知道该怎么做，请分享...

这是我的httpd（相关部分）：

```
#************************************************************ 
Listen 80
# For SSL configuration, add below line also.
Listen 443
# Include mod_jk configuration file
Include conf/mod-jk.conf
#************************************************************ 
```

这是我的 mod-jk.conf ：

```
#************************************************************      
LoadModule jk_module modules/mod_jk.so

LoadModule ssl_module modules/mod_ssl.so

JkWorkersFile conf/workers.properties

JkLogFile logs/mod_jk.log

JkLogLevel info

JkLogStampFormat "[%a %b %d %H:%M:%S %Y]"

JkOptions +ForwardKeySize +ForwardURICompatUnparsed -ForwardDirectories

JkRequestLogFormat "%w %V %T"

JkMount /__application__/* loadbalancer

JkUnMount /__application__/images/* loadbalancer

JkMountFile conf/uriworkermap.properties

JkShmFile run/jk.shm

<Location /jkstatus>
JkMount status
Order deny,allow
Deny from all
Allow from 127.0.0.1
Allow from 192.168.140.128
</Location>
#************************************************************ 
```

这是我的workers.properties：

```
 #************************************************************ 
    worker.list=loadbalancer,status

    worker.node1.port=8009
    worker.node1.host=192.168.140.128
    worker.node1.type=ajp13
    worker.node1.lbfactor=1
    worker.node1.prepost_timeout=10000 #Not required if using ping_mode=A
    worker.node1.connect_timeout=10000 #Not required if using ping_mode=A
    worker.node1.ping_mode=A #As of mod_jk 1.2.27

    worker.loadbalancer.type=lb
    worker.loadbalancer.balance_workers=node1
    worker.status.type=status
#************************************************************ 
```

这是我的 server.xml（在 JBoss 中）：

```
 <Server>

   <Listener className="org.apache.catalina.core.AprLifecycleListener" SSLEngine="on" />
   <Listener className="org.apache.catalina.core.JasperListener" />
 <Service name="jboss.web">
      <Connector protocol="HTTP/1.1" port="8080" address="${jboss.bind.address}" 
               connectionTimeout="20000" redirectPort="8443" URIEncoding="UTF-8"/>
         <Connector port="8009" address="${jboss.bind.address}"
      emptySessionPath="true" enableLookups="false" redirectPort="8443" 
      protocol="AJP/1.3" connectionTimeout="600000" maxThreads="200"/>

     <Engine name="jboss.web" defaultHost="v-77-if-vm.us.nohsib.com" jvmRoute="node1">
         <Realm className="org.jboss.web.tomcat.security.JBossWebRealm"
            certificatePrincipal="org.jboss.security.auth.certs.SubjectDNMapping"
            allRolesMode="authOnly"
            />

         <Host name="v-77-if-vm.us.nohsib.com"> 
            <Valve className="org.jboss.web.tomcat.service.jca.CachedConnectionValve"
                cachedConnectionManagerObjectName="jboss.jca:service=CachedConnectionManager"
                transactionManagerObjectName="jboss:service=TransactionManager" />

         </Host>
      </Engine>
   </Service>
</Server> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T19:22:31.997

您必须将您的 https 配置添加到 apache：

```
<IfModule ssl_module>
SSLProtocol all
SSLCipherSuite HIGH:MEDIUM

#CA certificates for root and intermediate
SSLCACertificateFile "C:/production/certs/provider/providerRoot.crt"
SSLCertificateChainFile "C:/production/certs/provider/providerIntermediate.crt"

#Generated first via openssl; Server public and private keys.
SSLCertificateFile    "C:/production/certs/provider/your.crt"
SSLCertificateKeyFile "C:/production/certs/provider/your.key"
</IfModule> 
```

然后，在对应的虚拟主机下，添加以下内容：

```
<VirtualHost *:443>
SSLEngine On 
```

您可能还想研究使用 Rewrite 启用 https 重定向：

```
RewriteEngine on
ReWriteCond %{SERVER_PORT} !^443$
RewriteRule ^/(.*) https://%{HTTP_HOST}/$1 [NC,R,L] 
```

# java - JVM 使用不同的 file.enconding 打开另一个 JVM

> ID：10146956
> 
> 赞同：0
> 
> 时间：2012-04-13T19:16:03.137
> 
> 标签：java, jvm

如果使用参数 file.enconding 启动我的应用程序，然后我的 JVM 创建另一个 JVM file.enconding 参数将不会被第二个 JVM 继承。第二个 JVM 将使用系统编码。

我可以将 JVM 设置为使用相同的 file.enconding 打开另一个 JVM 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T19:21:19.847

您可以将`-Dfile.encoding=YOURENCODING`命令行参数作为命令行参数传递给第二个 JVM。

# python - GeoDjango + PostGIS 计算错误的距离

> ID：10146959
> 
> 赞同：1
> 
> 时间：2012-04-13T19:16:20.747
> 
> 标签：python, django, postgis, geodjango, srid

我刚刚用 GeoDjango 安装了 PostGIS。一切正常，但现在我遇到了问题，无法找出原因。

我有这样的模型：

```
from django.contrib.gis.db import models

class Shop(models.Model):
    name = models.CharField(max_length=80)
    point = models.PointField(null=True, blank=True)
    objects = models.GeoManager() 
```

我将其指向这个位置（49.794254,9.927489）。然后我创建一个这样的点：

```
pnt = fromstr('POINT(50.084068 8.238381)') 
```

这些点之间的距离应该约为 125 公里，但是当我这样做时：

```
results = Shop.objects.distance(pnt)
print results[0].distance.km 
```

我的结果总是超过 60 公里，所以它返回 190 公里！我这两点的 SRID 都是 4326 ......可能有什么问题吗？

当我这样做时，也许还有另一个有趣的事实：

```
pnt.distance(shop.point) 
```

它返回 1.713790... 结果。

我究竟做错了什么？我可以使用 python + django 的任何替代方案吗？如果有更好的解决方案，我不需要使用 PostGIS。

希望你能帮我！

克里斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T20:59:29.580

我刚刚在[postgis](http://postgis.refractions.net/docs/ST_Distance_Spheroid.html)中运行了这个查询：

```
select round(CAST(ST_Distance_Sphere(ST_GeomFromText('POINT(49.794254 9.927489)',4326), ST_GeomFromText('POINT(50.084068 8.238381)',4326)) As numeric)/1000.0,2) as distance_km;
 distance_km 
-------------
      190.50 
```

结果实际上是 190.50，所以您的 190 公里结果似乎没有问题

这个很棒的[页面](http://www.movable-type.co.uk/scripts/latlong.html)的结果相同，简要说明了如何计算这个距离。

1.713790... 结果似乎与 srid 的单位相同，或者换句话说，该数字不是以米为单位的。

**编辑** 哦，我刚刚看到你的问题，你放错了纬度和经度，在 WKT 格式中，经度排在第一位，所以真正的查询应该是：

```
select round(CAST(ST_Distance_Sphere(ST_GeomFromText('POINT(9.927489 49.794254)',4326), ST_GeomFromText('POINT(8.238381 50.084068)',4326)) As numeric)/1000.0,2) as distance_km;
 distance_km 
-------------
      125.10 
```

所以应该像这样创建点

```
POINT(9.927489 49.794254)
POINT(8.238381 50.084068) 
```

# signalr - 向组中的所有客户端发送消息，当前客户端除外

> ID：10146961
> 
> 赞同：12
> 
> 时间：2012-04-13T19:16:24.637
> 
> 标签：signalr

我想在服务器上所有连接的客户端上执行一个方法，当前客户端除外。如果我不维护自己的客户端 ID 列表，有什么方法可以做到这一点？

蒂亚！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-01-06T01:16:50.420

您可以使用**Clients.OthersInGroup()**方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T12:42:04.623

此功能已在项目的 github 问题列表中提出和讨论，但尚未实现[http://goo.gl/pyMwF](http://goo.gl/pyMwF)。

现在，您需要自己过滤客户。

# regex - 日志文件的百分比差异

> ID：10146962
> 
> 赞同：2
> 
> 时间：2012-04-13T19:16:33.983
> 
> 标签：regex, perl, grep

在浏览日志文件时，我经常会一次又一次地遇到相同的错误消息。当然，由于时间戳、用户名、IP 地址等原因，两条线永远不会相同。

我正在寻找一种方法来设置“百分比差异”，并忽略任何与已报告的错误消息相似 90% 的行。另一个想法是也*总是*忽略时间戳差异。

程序：

1.  用户输入搜索词（正则表达式或简单文本）
2.  用户输入差异的容差
    [开始]
3.  Grep 找到与搜索词匹配的字符串并发送到新的文本文件
4.  Grep 继续搜索日志，并找到相同的错误消息。差异可能是时间戳、日期和可能的用户名。由于该行与新文件中已有的内容至少有 90% 相似，因此 grep 不会将其复制并继续搜索
5.  Grep 找到与搜索词匹配的新行。行的相似度低于 90%，因此它被复制到新文件并成为 grep 匹配未来结果的另一行。

*编辑：对不起，如果我第一次不清楚。如果需要，我很乐意解释更多。

谢谢。

*   Log.1 - DD:MM:YYYY HH:MM:SS:MS 错误 - 用户无法在 IPADDRESS 登录
*   Log.1 - DD:MM:YYYY HH:MM:SS:MS 启动时硬件失败
*   Log.2 - DD:MM:YYYY HH:MM:SS:MS 资源被拉伸稀薄，警告 - 检查 RAM

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T19:21:06.053

我不知道有任何开箱即用的完整解决方案，但[Text::Levenshtein](http://search.cpan.org/dist/Text-Levenshtein/Levenshtein.pm)和类似算法可以帮助您找出一个通用字符串与另一个通用字符串的相似程度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T20:25:20.523

另一个想法是使用时间戳缓存您的日志消息，这样您就不会重复您在最后一分钟看到的消息。

```
my %msg_cache = ();
sub log_filter {
    my $msg = shift;
    if (defined($msg_cache{$msg}) && $msg_cache{$msg} < time-60) {
        # we've logged this message in the last minute - skip
        return;
    }
    $msg_cache{$msg} = time;
    return 1;
} 
```

# ruby-on-rails - 我的 Rails 设置有什么问题？

> ID：10146966
> 
> 赞同：0
> 
> 时间：2012-04-13T19:16:41.793
> 
> 标签：ruby-on-rails, mongodb, rubygems, ubuntu-11.04

我正在努力让自己继续从事开源项目：[KiungoWiki](https://github.com/M2i3/KiungoWiki)

几个月前，我可以简单地启动数据库

```
mongod 
```

启动服务器

```
$ rails s 
```

并转到 localhost:3000 以查看一切正常运行。

现在，由于某种原因，情况发生了变化。我仍然可以启动数据库：

```
$ mongod

mongod --help for help and startup options
Fri Apr 13 15:09:45 MongoDB starting : pid=2803 port=27017 dbpath=/data/db/ 64-bit 
Fri Apr 13 15:09:45 db version v1.6.5, pdfile version 4.5
Fri Apr 13 15:09:45 git version: 0eb017e9b2828155a67c5612183337b89e12e291
Fri Apr 13 15:09:45 sys info: Linux domU-12-31-39-06-79-A1 2.6.21.7-2.ec2.v1.2.fc8xen #1 SMP Fri Nov 20 17:48:28 EST 2009 x86_64 BOOST_LIB_VERSION=1_41
Fri Apr 13 15:09:45 [initandlisten] waiting for connections on port 27017
Fri Apr 13 15:09:45 [websvr] web admin interface listening on port 28017 
```

但是当我尝试启动服务器时，会发生奇怪的事情：

```
$ rails s

Invalid gemspec in [/var/lib/gems/1.8/specifications/mongo-1.6.0.gemspec]: Illformed requirement ["#<YAML::Syck::DefaultKey:0x7f55abbd6c78> 1.6.0"]
Invalid gemspec in [/var/lib/gems/1.8/specifications/libv8-3.3.10.4-x86_64-linux.gemspec]: invalid date format in specification: "2011-11-15 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/bson_ext-1.6.0.gemspec]: Illformed requirement ["#<YAML::Syck::DefaultKey:0x7f55ab9b6d08> 1.6.0"]
Invalid gemspec in [/var/lib/gems/1.8/specifications/jquery-rails-1.0.19.gemspec]: invalid date format in specification: "2011-11-26 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/tilt-1.3.3.gemspec]: invalid date format in specification: "2011-08-25 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/factory_girl_rails-1.7.0.gemspec]: Illformed requirement ["#<YAML::Syck::DefaultKey:0x7f55aba7e290> 3.0.7"]
Invalid gemspec in [/var/lib/gems/1.8/specifications/orm_adapter-0.0.6.gemspec]: invalid date format in specification: "2012-01-10 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/mongo-1.6.0.gemspec]: Illformed requirement ["#<YAML::Syck::DefaultKey:0x7f55abbd6c78> 1.6.0"]
Invalid gemspec in [/var/lib/gems/1.8/specifications/libv8-3.3.10.4-x86_64-linux.gemspec]: invalid date format in specification: "2011-11-15 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/bson_ext-1.6.0.gemspec]: Illformed requirement ["#<YAML::Syck::DefaultKey:0x7f55ab9b6d08> 1.6.0"]
Invalid gemspec in [/var/lib/gems/1.8/specifications/jquery-rails-1.0.19.gemspec]: invalid date format in specification: "2011-11-26 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/tilt-1.3.3.gemspec]: invalid date format in specification: "2011-08-25 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/factory_girl_rails-1.7.0.gemspec]: Illformed requirement ["#<YAML::Syck::DefaultKey:0x7f55aba7e290> 3.0.7"]
Invalid gemspec in [/var/lib/gems/1.8/specifications/orm_adapter-0.0.6.gemspec]: invalid date format in specification: "2012-01-10 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/mongo-1.6.0.gemspec]: Illformed requirement ["#<YAML::Syck::DefaultKey:0x7f55abbd6c78> 1.6.0"]
Invalid gemspec in [/var/lib/gems/1.8/specifications/libv8-3.3.10.4-x86_64-linux.gemspec]: invalid date format in specification: "2011-11-15 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/bson_ext-1.6.0.gemspec]: Illformed requirement ["#<YAML::Syck::DefaultKey:0x7f55ab9b6d08> 1.6.0"]
Invalid gemspec in [/var/lib/gems/1.8/specifications/jquery-rails-1.0.19.gemspec]: invalid date format in specification: "2011-11-26 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/tilt-1.3.3.gemspec]: invalid date format in specification: "2011-08-25 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/factory_girl_rails-1.7.0.gemspec]: Illformed requirement ["#<YAML::Syck::DefaultKey:0x7f55aba7e290> 3.0.7"]
Invalid gemspec in [/var/lib/gems/1.8/specifications/orm_adapter-0.0.6.gemspec]: invalid date format in specification: "2012-01-10 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/mongo-1.6.0.gemspec]: Illformed requirement ["#<YAML::Syck::DefaultKey:0x7f55abbd6c78> 1.6.0"]
Invalid gemspec in [/var/lib/gems/1.8/specifications/libv8-3.3.10.4-x86_64-linux.gemspec]: invalid date format in specification: "2011-11-15 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/bson_ext-1.6.0.gemspec]: Illformed requirement ["#<YAML::Syck::DefaultKey:0x7f55ab9b6d08> 1.6.0"]
Invalid gemspec in [/var/lib/gems/1.8/specifications/jquery-rails-1.0.19.gemspec]: invalid date format in specification: "2011-11-26 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/tilt-1.3.3.gemspec]: invalid date format in specification: "2011-08-25 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/factory_girl_rails-1.7.0.gemspec]: Illformed requirement ["#<YAML::Syck::DefaultKey:0x7f55aba7e290> 3.0.7"]
Invalid gemspec in [/var/lib/gems/1.8/specifications/orm_adapter-0.0.6.gemspec]: invalid date format in specification: "2012-01-10 00:00:00.000000000Z"
Could not find tilt-1.3.3 in any of the sources
Run `bundle install` to install missing gems. 
```

我已经尝试了错误消息提示的所有方法，但均无济于事。现在，我想开始了解问题的真正含义。有什么帮助吗？

顺便说一句：我正在尝试使用来自 github 的最新代码，它非常适合项目中的其他开发人员。

**更新** 我尝试运行

```
gem update --system 
```

但得到以下结果：

```
Invalid gemspec in [/var/lib/gems/1.8/specifications/mongo-1.6.0.gemspec]: Illformed requirement ["#<YAML::Syck::DefaultKey:0x7f55abbd6c78> 1.6.0"]
Invalid gemspec in [/var/lib/gems/1.8/specifications/libv8-3.3.10.4-x86_64-linux.gemspec]: invalid date format in specification: "2011-11-15 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/bson_ext-1.6.0.gemspec]: Illformed requirement ["#<YAML::Syck::DefaultKey:0x7f55ab9b6d08> 1.6.0"]
Invalid gemspec in [/var/lib/gems/1.8/specifications/jquery-rails-1.0.19.gemspec]: invalid date format in specification: "2011-11-26 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/tilt-1.3.3.gemspec]: invalid date format in specification: "2011-08-25 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/factory_girl_rails-1.7.0.gemspec]: Illformed requirement ["#<YAML::Syck::DefaultKey:0x7f55aba7e290> 3.0.7"]
Invalid gemspec in [/var/lib/gems/1.8/specifications/orm_adapter-0.0.6.gemspec]: invalid date format in specification: "2012-01-10 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/mongo-1.6.0.gemspec]: Illformed requirement ["#<YAML::Syck::DefaultKey:0x7f55abbd6c78> 1.6.0"]
Invalid gemspec in [/var/lib/gems/1.8/specifications/libv8-3.3.10.4-x86_64-linux.gemspec]: invalid date format in specification: "2011-11-15 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/bson_ext-1.6.0.gemspec]: Illformed requirement ["#<YAML::Syck::DefaultKey:0x7f55ab9b6d08> 1.6.0"]
Invalid gemspec in [/var/lib/gems/1.8/specifications/jquery-rails-1.0.19.gemspec]: invalid date format in specification: "2011-11-26 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/tilt-1.3.3.gemspec]: invalid date format in specification: "2011-08-25 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/factory_girl_rails-1.7.0.gemspec]: Illformed requirement ["#<YAML::Syck::DefaultKey:0x7f55aba7e290> 3.0.7"]
Invalid gemspec in [/var/lib/gems/1.8/specifications/orm_adapter-0.0.6.gemspec]: invalid date format in specification: "2012-01-10 00:00:00.000000000Z"
ERROR:  gem update --system is disabled on Debian, because it will overwrite the content of the rubygems Debian package, and might break your Debian system in subtle ways. The Debian-supported way to update rubygems is through apt-get, using Debian official repositories.
If you really know what you are doing, you can still update rubygems by setting the REALLY_GEM_UPDATE_SYSTEM environment variable, but please remember that this is completely unsupported by Debian. 
```

甚至`gem --version`吐出错误

```
Invalid gemspec in [/var/lib/gems/1.8/specifications/mongo-1.6.0.gemspec]: Illformed requirement ["#<YAML::Syck::DefaultKey:0x7f55abbd6c78> 1.6.0"]
Invalid gemspec in [/var/lib/gems/1.8/specifications/libv8-3.3.10.4-x86_64-linux.gemspec]: invalid date format in specification: "2011-11-15 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/bson_ext-1.6.0.gemspec]: Illformed requirement ["#<YAML::Syck::DefaultKey:0x7f55ab9b6d08> 1.6.0"]
Invalid gemspec in [/var/lib/gems/1.8/specifications/jquery-rails-1.0.19.gemspec]: invalid date format in specification: "2011-11-26 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/tilt-1.3.3.gemspec]: invalid date format in specification: "2011-08-25 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/factory_girl_rails-1.7.0.gemspec]: Illformed requirement ["#<YAML::Syck::DefaultKey:0x7f55aba7e290> 3.0.7"]
Invalid gemspec in [/var/lib/gems/1.8/specifications/orm_adapter-0.0.6.gemspec]: invalid date format in specification: "2012-01-10 00:00:00.000000000Z"
1.7.2 
```

**更新**问题已更改

按照@Andreas 的建议，我删除了我的 gem 文件夹并重新安装了所有内容

```
bash -s stable < <(curl -s https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer )
rvm requirements
rvm reload
gedit .bashrc &
rvm reinstall 1.9.2
rvm gemset create rails3
rvm 1.9.2@rails3 gem update --system
rvm 1.9.2@rails3 gem install rails --version 3.1.1
cd Documents/Projets/KiungoWiki
bundle install 
```

没有任何错误。`mongod`工作正常，但`rails s`说：

```
=> Booting WEBrick
=> Rails 3.1.1 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
DEPRECATION WARNING: Change Factory.define to FactoryGirl.define
Exiting
/home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/factory_girl-2.6.1/lib/factory_girl/syntax/default.rb:6:in `define': wrong number of arguments (1 for 0) (ArgumentError)
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/factory_girl-2.6.1/lib/factory_girl/deprecated.rb:5:in `method_missing'
    from /home/shawn/Documents/Projets/KiungoWiki/spec/factories/albums.rb:3:in `<top (required)>'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:234:in `load'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:234:in `block in load'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:223:in `block in load_dependency'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:640:in `new_constants_in'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:223:in `load_dependency'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:234:in `load'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/factory_girl-2.6.1/lib/factory_girl/find_definitions.rb:20:in `block (2 levels) in find_definitions'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/factory_girl-2.6.1/lib/factory_girl/find_definitions.rb:19:in `each'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/factory_girl-2.6.1/lib/factory_girl/find_definitions.rb:19:in `block in find_definitions'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/factory_girl-2.6.1/lib/factory_girl/find_definitions.rb:15:in `each'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/factory_girl-2.6.1/lib/factory_girl/find_definitions.rb:15:in `find_definitions'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/factory_girl_rails-1.7.0/lib/factory_girl_rails/railtie.rb:26:in `block in <class:Railtie>'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.1.1/lib/active_support/lazy_load_hooks.rb:34:in `call'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.1.1/lib/active_support/lazy_load_hooks.rb:34:in `execute_hook'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.1.1/lib/active_support/lazy_load_hooks.rb:43:in `block in run_load_hooks'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.1.1/lib/active_support/lazy_load_hooks.rb:42:in `each'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.1.1/lib/active_support/lazy_load_hooks.rb:42:in `run_load_hooks'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.1.1/lib/rails/application/finisher.rb:56:in `block in <module:Finisher>'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.1.1/lib/rails/initializable.rb:30:in `instance_exec'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.1.1/lib/rails/initializable.rb:30:in `run'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.1.1/lib/rails/initializable.rb:55:in `block in run_initializers'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.1.1/lib/rails/initializable.rb:54:in `each'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.1.1/lib/rails/initializable.rb:54:in `run_initializers'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.1.1/lib/rails/application.rb:96:in `initialize!'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.1.1/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /home/shawn/Documents/Projets/KiungoWiki/config/environment.rb:5:in `<top (required)>'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:240:in `require'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:240:in `block in require'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:223:in `block in load_dependency'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:640:in `new_constants_in'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:223:in `load_dependency'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:240:in `require'
    from /home/shawn/Documents/Projets/KiungoWiki/config.ru:4:in `block in <main>'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/rack-1.3.6/lib/rack/builder.rb:51:in `instance_eval'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/rack-1.3.6/lib/rack/builder.rb:51:in `initialize'
    from /home/shawn/Documents/Projets/KiungoWiki/config.ru:1:in `new'
    from /home/shawn/Documents/Projets/KiungoWiki/config.ru:1:in `<main>'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/rack-1.3.6/lib/rack/builder.rb:40:in `eval'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/rack-1.3.6/lib/rack/builder.rb:40:in `parse_file'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/rack-1.3.6/lib/rack/server.rb:200:in `app'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.1.1/lib/rails/commands/server.rb:46:in `app'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/rack-1.3.6/lib/rack/server.rb:301:in `wrapped_app'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/rack-1.3.6/lib/rack/server.rb:252:in `start'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.1.1/lib/rails/commands/server.rb:70:in `start'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.1.1/lib/rails/commands.rb:54:in `block in <top (required)>'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.1.1/lib/rails/commands.rb:49:in `tap'
    from /home/shawn/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.1.1/lib/rails/commands.rb:49:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:24:27.970

您可能需要升级 RubyGems：

```
gem update --system 
```

然后`bundle install`再次运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T16:16:57.147

尝试删除您的 gem 文件夹并更新 ruby​​gems，然后重新安装 gem。

# xcode4 - Apple PrefPane 示例无法构建，并出现同时反对 -fobjc-arc 和 -fobjc-gc 的 clang 错误

> ID：10146970
> 
> 赞同：4
> 
> 时间：2012-04-13T19:16:52.500
> 
> 标签：xcode4, garbage-collection, osx-lion, automatic-ref-counting, clang

我正在尝试构建一个首选项窗格作为学习 OS X 开发的一部分。下载 Apple 的[首选项窗格示例代码](https://developer.apple.com/library/mac/#samplecode/PrefsPane/Introduction/Intro.html#//apple_ref/doc/uid/DTS10004306-Intro-DontLinkElementID_2)并尝试构建项目后，我收到以下错误：

clang：错误：不能同时指定“-fobjc-arc”和“-fobjc-gc”

在构建设置中关闭垃圾收集允许项目正确构建，但是一旦在本地计算机上安装了首选项窗格示例，它就不会开始说，

“您无法打开 PrefsPane 首选项，因为它不适用于基于 Intel 的 Mac。”

我已经尝试过架构（10.6、10.7）和 Objective-C 自动引用计数（是、否）和 Objective-C 垃圾收集（支持 (-fobjc-gc)、不支持、必需（仅 -fobjc-gc）的所有组合）可用。虽然某些组合确实允许构建项目，但我无法加载首选项窗格。

使用 Xcode 4.3.2 为 OS X 10.7 构建和部署首选项窗格所需的正确架构、ARC 和 GC 设置是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T21:47:13.510

PrefsPane 在关闭垃圾收集并在构建设置中启用 ARC 的情况下在 Mac OS X 10.8.2 上运行。“System Preferences.app”只显示一条消息：

```
 To use this preferences pane, System Preferences must quit and reopen. 
```

这是因为系统偏好设置是在默认启用垃圾收集的情况下启动的，如果它试图在没有 GC 的情况下打开偏好设置窗格，它也应该在没有 GC 的情况下重新启动。因此 ARC 可以在 10.8 上用于开发首选项窗格。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T01:26:36.153

我自己偶然发现了这个。事实证明（根据 Apple 开发文档）：

> 所有 64 位首选项窗格都应使用垃圾收集。在大多数情况下，使用垃圾收集将简化您的代码并减少内存泄漏的可能性。
> 
> 在 Snow Leopard 中，系统首选项应用程序将运行启用垃圾收集的 64 位首选项窗格和禁用垃圾收集的 32 位窗格。

有关更多信息，请转到[更新 Snow Leopard 及其他版本的首选项窗格](http://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/PreferencePanes/Articles/UpdatingPreferencePanesforSnowLeopardandBeyond.html)。

所以你不能使用ARC。只有GC。

# bash - Bash - 根据特定特征从表中提取信息

> ID：10146974
> 
> 赞同：0
> 
> 时间：2012-04-13T19:17:07.520
> 
> 标签：bash

我的数据表如下所示：

```
chr4    124097568       124098568       337
chr4    159597106       159598106       1000   
chr4    159597106       159598106       1000 
chr4    164361532       164362532       455
chr4    164361532       164362532       74
chr4    164361532       164362532       2
chr4    170360150       170361150       0 
```

我想：提取唯一行 - 如果 col#2 和 col#3 中的数据相同 -> 应该只提取最高值 (col#4) 行。如果 #2,#3 & #4 相同，则应提取其中一行。

首选输出是：

```
chr4    124097568       124098568       337
chr4    159597106       159598106       1000 
chr4    164361532       164362532       455
chr4    170360150       170361150       0 
```

如果有不清楚的地方，我会尝试更多地解释它（因为我现在真的需要解决这个问题）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T19:30:09.667

```
$ cat example.txt
chr4    124097568       124098568       337
chr4    159597106       159598106       1000   
chr4    159597106       159598106       1000 
chr4    164361532       164362532       455
chr4    164361532       164362532       74
chr4    164361532       164362532       2
chr4    170360150       170361150       0

$ sort --key=2 -g -u example.txt 
chr4    124097568       124098568       337
chr4    159597106       159598106       1000   
chr4    164361532       164362532       455
chr4    170360150       170361150       0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T19:22:26.633

如果最后一列（COL#4）是“右空格填充”，那会更容易，如下所示：

```
chr4    124097568       124098568        337
chr4    159597106       159598106       1000   
chr4    159597106       159598106       1000 
chr4    164361532       164362532        455
chr4    164361532       164362532         74
chr4    164361532       164362532          2
chr4    170360150       170361150          0 
```

这样， sort 和 uniq 的组合就可以解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T19:47:22.840

```
awk '
    {key = $2 SUBSEP $3}
    !(key in max) || $4 > max[key] {max[key]=$4; line[key]=$0}
    END {for (key in line) print line[key]}
' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T20:59:03.893

这可能对您有用：

```
 sort -k4nr file | sort -uk2,3n 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T19:32:02.000

一种可能的解决方案是对输入的行进行排序，然后终止多次出现的行。在 Python 中，您可以执行类似的操作

```
f = open("table.dat", "r")
lines = f.read().split()
lines.sort()

old = lines[0]
singles = [old]
for line in lines:
    if old != line:
        singles.append(line)
        old = line
    else:
        pass

f.close() 
```

我不知道如何在 bash 中执行此操作。

最好的问候，斯文

# java - 输出字符串字符的总数

> ID：10146977
> 
> 赞同：6
> 
> 时间：2012-04-13T19:03:48.337
> 
> 标签：java

我的问题是如果我想获取用户输入的字符总数应该使用什么方法？在不使用数组的情况下，我尝试使用 .length() 但它没有返回名字和姓氏中的所有字符，它只返回名字。

这是我的代码示例。（请不要笑我真的是编程新手:)）

```
System.out.print("Enter your first and last name: ");
String yourName = keyboard.next();
System.out.println("Your name has a total of " + yourName.length() + " numbers"); 
```

发生的事情是，如果我输入“Neo Matrix”，它只会返回 3。

我很感激任何帮助。谢谢你！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-13T19:19:38.023

该方法`next()`只读取您名字的第一个单词。试试`nextLine()`吧。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T19:20:26.613

您可能想使用[`Scanner.nextLine()`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#nextLine%28%29)来读取整行。

`next()``String`根据空格标记，所以你只得到第一个单词 - 正如预期的那样。

# c# - 重用SqlConnection和SqlDataReader

> ID：10146979
> 
> 赞同：16
> 
> 时间：2012-04-13T19:17:49.063
> 
> 标签：c#, .net, sqldatareader

如果我想在不同的表上运行多个 SELECT 查询，我可以对所有表使用相同的 SqlDataReader 和 SqlConnection 吗？以下是明智的吗？（我输入得很快，所以它缺少 try/catch）：

```
MySqlCommand myCommand = new MySqlCommand("SELECT * FROM table1", myConnection);

myConnection.Open();
SqlDataReader myDataReader = myCommand.ExecuteReader();

while(myReader.Read())
{
    //Perform work.
}

myCommand.commandText = "SELECT * FROM table2";

myReader = myCommand.ExecuteReader();

while(myReader.Read())
{
    //Perform more work
}

myReader.Close();
myConnection.Close(); 
```

非常感谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-13T19:22:26.037

您可以对它们中的每一个使用相同的连接，只要您不尝试在来自不同线程的同一连接上同时执行多个查询。

至于数据阅读器，您实际上并没有重用阅读器，每次调用都`ExecuteReader`返回一个新阅读器的新实例，您重用的只是维护对阅读器的引用的变量。这里存在一个问题，您只是显式地关闭最后一个阅读器，并让第一个阅读器在以后的某个时间进行 GC。

您也可以重用命令，但请记住，如果您提供参数等，您将需要为下一个查询清除它们，除非它们也适用于下一个查询。

您应该使用`try/finally`块来确保清理资源，或者在这里快速更改代码以使用`using`语句来确保资源清理，即使存在阻止其余代码执行的异常也是如此。

```
using (var myConnection = GetTheConnection())
{
  myConnection.Open();

  var myCommand = new MySqlCommand("SELECT * FROM table1", myConnection))
  using (var myDataReader = myCommand.ExecuteReader())
  {
    while(myReader.Read())
    {
      //Perform work.
    }
  } // Reader will be Disposed/Closed here

  myCommand.commandText = "SELECT * FROM table2";
  using (var myReader = myCommand.ExecuteReader())
  {
    while(myReader.Read())
    {
      //Perform more work
    }
  } // Reader will be Disposed/Closed here
} // Connection will be Disposed/Closed here 
```

注意：`GetTheConnection`对于您用来获取连接实例的任何机制，它只是一个占位符功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T19:29:03.197

我通常使用适配器，所以我对读者的细节生疏，但我认为你走在正确的轨道上。

您的代码中需要注意的一点是，每次调用都`ExecuteReader`应该生成一个新的数据读取器。您可能正在重用变量名称，但对现有阅读器的引用将被丢弃，并在每次调用时被新的阅读器替换。重点是，在使用 ExecuteReader 获取新阅读器之前关闭前一个阅读器。

# mysql - 使用 bash 脚本连接远程服务器，制作并下载 mysql 数据库副本

> ID：10146987
> 
> 赞同：0
> 
> 时间：2012-04-13T19:18:22.730
> 
> 标签：mysql, bash

我看过下面的例子：

```
ssh server 'mysqldump -u root -p'mypassword' --single-transaction wordpress_database > wordpress_database.sql' && scp me@myserver.com:~/wordpress_database.sql /Users/me/Downloads/wordpress_database.sql && /Applications/MAMP/Library/bin/mysql -u root -p'mylocalpassword' wordpress_database < /Users/me/Downloads/wordpress_database.sql 
```

如果我只有只读数据库凭据，它会起作用吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T06:38:37.760

这个脚本做了 3 件事：

1）连接到远程服务器进行转储，这意味着如果您只有 db 凭据，则需要 ssh 用户名/密码，这还不够

```
 ssh server 'mysqldump -u root -p'mypassword' --single-transaction wordpress_database > wordpress_database.sql' && 
```

2）下载与上面相同的文件，您需要 ssh 凭据

```
scp me@myserver.com:~/wordpress_database.sql /Users/me/Downloads/wordpress_database.sql 
```

3）在本地注入它，所以你只需要你的本地数据库用户名 pwd

```
/Applications/MAMP/Library/bin/mysql -u root -p'mylocalpassword' wordpress_database < /Users/me/Downloads/wordpress_database.sql 
```

干杯。

# php - 文件从android上传到php服务器不起作用

> ID：10146989
> 
> 赞同：0
> 
> 时间：2012-04-13T19:18:38.643
> 
> 标签：php, android, http

我正在尝试从我的 android 设备（2.3.3）上传一个 mp3 文件，但失败了。我在这里看到了很多类似的查询，但找不到任何解决我的问题的方法。我不是很擅长 php

以下是我从 Activity 开始的服务中的实现

```
import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.net.HttpURLConnection;
import java.net.URL;

import android.app.IntentService;
import android.content.Intent;
import android.content.SharedPreferences;
import android.util.Log;

public class SendFileService extends IntentService {
private boolean mFileSent = false;

public SendFileService() {
    super("SendFileService");

}

@Override
protected void onHandleIntent(Intent arg0)
{
    if(arg0 != null)
    {
        final String path = arg0.getStringExtra("path");
        if(path != null & path.length() > 0)
        {
            Thread t = new Thread()
            {
                public void run()
                {
                    try
                    {
                        sendFilewithHTTP(path);
                        while(mFileSent == false)
                        {
                            Thread.sleep(1000 * 60 * 10);// 10 minutes
                            sendFilewithHTTP(path);
                        }   

                    }
                    catch (InterruptedException e)
                    {
                        e.printStackTrace();
                    }
                }
            };
            t.start();
        }
    }
}

@Override
public void onDestroy()
{
    mFileSent = true;
    super.onDestroy();
}

private void sendFilewithHTTP(String filePath)
{
    //Set a global flag to check
    SharedPreferences settings = getSharedPreferences("INFO", MODE_PRIVATE);

    HttpURLConnection connection = null;
    DataOutputStream outputStream = null;
    DataInputStream inStream = null;
    if(filePath == null || filePath.length() <3)
    {
        mFileSent = true;
        return;
    }

    String pathToOurFile = filePath;
    String urlServer = "https://www.xxxx.xx/xxx/xxxxxxxx/xxxxxx.php?lang=en&val=" + settings.getString("val", getString(R.string.VAL));
    String lineEnd = "\r\n";
    String twoHyphens = "--";
    String boundary =  "*****";

    int bytesRead, bytesAvailable, bufferSize;
    byte[] buffer;
    int maxBufferSize = 1*1024*1024;

    FileInputStream fileInputStream = null;

    try
    {
        fileInputStream = new FileInputStream(new File(pathToOurFile) );

        URL url = new URL(urlServer);
        connection = (HttpURLConnection) url.openConnection();
        Log.i("Connecting to: ", urlServer);

        // Allow Inputs & Outputs
        connection.setDoInput(true);
        connection.setDoOutput(true);
        connection.setUseCaches(false);

        // Enable POST method
        connection.setRequestMethod("POST");

        connection.setRequestProperty("Connection", "Keep-Alive");
        connection.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary);

        outputStream = new DataOutputStream( connection.getOutputStream() );
        outputStream.writeBytes(twoHyphens + boundary + lineEnd);
        outputStream.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\"" + pathToOurFile +"\"" + lineEnd);
        outputStream.writeBytes(lineEnd);

        bytesAvailable = fileInputStream.available();
        bufferSize = Math.min(bytesAvailable, maxBufferSize);
        buffer = new byte[bufferSize];

        // Read file
        bytesRead = fileInputStream.read(buffer, 0, bufferSize);

        while (bytesRead > 0)
        {
            outputStream.write(buffer, 0, bufferSize);
            bytesAvailable = fileInputStream.available();
            bufferSize = Math.min(bytesAvailable, maxBufferSize);
            bytesRead = fileInputStream.read(buffer, 0, bufferSize);
        }

        outputStream.writeBytes(lineEnd);
        outputStream.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

        // Responses from the server (code and message)
        int serverResponseCode = connection.getResponseCode();
        String serverResponseMessage = connection.getResponseMessage();
        Log.i("File sent to: " + filePath, "Code: " + serverResponseCode + " Message: " + serverResponseMessage);

        mFileSent = true;
        fileInputStream.close();
        outputStream.flush();
        outputStream.close();
        //connection.disconnect();
        }
        catch (Exception ex)
        {
            Log.i("File sent status ", "Connection Failed");
            ex.printStackTrace();
            try
            {
                if(fileInputStream != null)
                    fileInputStream.close();
                if(connection != null)
                    connection.disconnect();
                if(outputStream != null)
                {
                    outputStream.flush();
                    outputStream.close();
                }

            }
            catch(Exception e)
            {

            }
        }

        try {
            inStream = new DataInputStream ( connection.getInputStream() );
            String str;

            while (( str = inStream.readLine()) != null)
            {
                Log.d("Server response: ", str);
            }
            inStream.close();

      }
      catch (IOException ioex){

      }

      if(connection != null)
        connection.disconnect();

}

} 
```

清单中添加了以下权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

这是我在服务器上运行的 PHP 脚本：

```
 //check if we have a language and val
    $lang=$_GET['lang'];
    $val=$_GET['val'];

if ( (!isset($val)) || (!isset($lang)) ) die('false');
if ( ($val="") || ($lang="") ) die('false');

//get the file
$fn="data/mydata-".uniqid()."-". date("YmdHis") . ".mp3";

if (!move_uploaded_file($_FILES['userfile']['tmp_name'], $fn)) 
{
    die('false: There was no file in the post request');
}

//check if it's am MP3
$mp3_mimes = array('audio/mpeg3', 'audio/x-mpeg-3', 'audio/mpeg'); 
if (!in_array(mime_content_type($fn), $mp3_mimes)) {
  echo "false: Content type not MP3";
    unlink($fn);        

} else 
{

    //now let's check the file size:
    if (filesize($fn)<(1024*1024*10))
    {
        //Do Something      
    }
    else echo "false: File size too big";   
} 

?> 
```

我能够连接到服务器并且 HTTP 服务器正在发送消息代码 = 200 和消息 = OK。但是，php 脚本没有获取任何文件。函数 move_uploaded_file() 返回 false ，因此我的设备中的值 false 。我尝试过各种文件大小但失败了。

但是，我能够从我的桌面浏览器将 mp3 文件上传到相同的 php 脚本。我相信这排除了任何 ini 文件错误或安全设置问题的可能性。

请帮我找到解决方案。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:24:37.427

您尚未检查上传是否成功：

```
if ($_FILES['userfile']['error'] !== UPLOAD_ERR_OK) {
   die("Upload failed with error code " . $_FILES['userfile']['error']);
} 
```

HTTP 进程的其余部分可以正常工作，但由于各种原因仍然存在文件上传失败，因此永远不要假设上传成功。

错误代码在[这里定义](http://php.net/manual/en/features.file-upload.errors.php)。

# blackberry - setMargin 和 setPadding 黑莓 API

> ID：10146992
> 
> 赞同：1
> 
> 时间：2012-04-13T19:18:44.387
> 
> 标签：blackberry, blackberry-simulator

我一直在 BB 设备上尝试一些 UI 的东西，我对 Field 类的 setMargin 和 setPadding 函数有点困惑。我知道他们的定义，但是当我应该将其中任何一个用于任何领域时，我不明白。任何帮助，示例将不胜感激！

谢谢！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T04:45:06.890

`setMargin()`和之间的区别`setPadding()`将由图清楚。以下

![在此处输入图像描述](../Images/f7f756cd302d9fcb4238dc7abd90c8d2.png) `setMargin()`设置一个字段与另一字段的边距，如图 1 所示

并`setPadding()`增加要设置填充的字段区域。如图 2 所示，**Button2**的范围变大了，而在 中`setMargin()`，字段的*范围*保持不变，字段之间的间距发生了变化。

# android - 如何在移动应用程序中设置持久身份验证？

> ID：10146996
> 
> 赞同：1
> 
> 时间：2012-04-13T19:19:04.820
> 
> 标签：android, ios, authentication

各种移动应用程序——Gmail、Facebook、Pandora——都有一些持久的身份验证机制，使用户能够设置一次凭据，然后使用它们在未来通过远程服务自动进行身份验证。我可能是盲人，但我似乎无法在任何地方找到一个教程，简单地解释如何在移动应用程序上正确执行此操作。

如何构建此功能？一个简单教程的链接会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T19:33:03.467

正如 Deva 所说，SharedPreferences 是创建此功能的完美快捷解决方案。通常当我想实现这个时，我遵循这个简单的流程：

登录：当用户登录时，将用户 ID（它实际上可以是任何唯一标识符）保存到共享首选项中。此信息现在应该可用，以便您的应用稍后可以调用它

重新启动：当应用程序重新启动时，它应该检查是否有任何用户 ID 保存在共享首选项中。如果没有，则没有人自动登录。如果有，则使用来自服务器的用户 ID 或其他方式重新加载用户信息。

注销：当用户注销时，请确保您从共享首选项中删除键/值对。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T19:23:25.210

为此，您可能可以尝试[SharedPrefrence](http://developer.android.com/reference/android/content/SharedPreferences.html)。用户第一次输入他的详细信息时，如果用户已通过身份验证，则值将存储在本地，并且如果值已经存在，则每次连续都可以检查相同的优先级，直接选择值并调用服务进行身份验证。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T23:48:28.477

Apple 的[KeyChain](https://developer.apple.com/library/mac/#documentation/security/Conceptual/keychainServConcepts/iPhoneTasks/iPhoneTasks.html)正是针对这种情况的服务。它支持持久、安全且易于使用的存储。好的教程（+演示应用程序）[在这里](http://iphonedevelopertips.com/core-services/using-keychain-to-store-username-and-password.html)

# java - Java：字符串拆分为多个元素

> ID：10146998
> 
> 赞同：0
> 
> 时间：2012-04-13T19:19:15.197
> 
> 标签：java, string, file, text, split

我很难弄清楚如何拆分如下字符串：

```
String str = "hi=bye,hello,goodbye,pickle,noodle 
```

该字符串是从文本文件中读取的，我需要将字符串拆分为逗号之间的每个元素。因此，无论文本文件读取什么内容，我都需要将每个元素拆分为自己的字符串。请记住，每个元素可以是任意长度，并且可以有任意数量的 'hi' 等于的元素。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T19:20:43.387

使用拆分！

```
String[] set=str.split(","); 
```

然后根据需要从 set[...] 访问每个字符串（假设您想要第三个字符串，您会说：set[2]）。

作为测试，您可以将它们全部打印出来：

```
for(int i=0; i<set.length;i++){
    System.out.println(set[i]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T19:32:26.747

如果您需要更高级的方法，我建议使用番石榴的[Splitter](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Splitter.html)类：

```
Iterable<String> split = Splitter.on(',')
                                 .omitEmptyStrings()
                                 .trimResults()
                                 .split(" bye,hello,goodbye,, , pickle, noodle  "); 
```

这将消除前导或尾随空格并省略空白匹配。该类中有一些更酷的东西，例如将您的字符串拆分为键/值对。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T19:32:42.553

```
str = str.subString(indexOf('=')+1); // remove "hi=" part
String[] set=str.split(","); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T19:26:06.113

我想知道：你的意思是这样拆分它：

```
"hi=bye"
"hi=hello"
"hi=goodbye"
"hi=pickle"
"hi=noodle" 
```

因为一个简单的 split(",") 不会这样做。在给定字符串中包含“hi=”的目的是什么？

可能，如果您要从字符串的前面删除 hi=，请改为执行以下操作：

```
String input = "hi=bye,hello,goodbye,pickle,noodle";
String hi[] = input.split(",");
hi[0] = (hi[0].split("="))[1];
for (String item : hi) {
    System.out.println(item);
} 
```