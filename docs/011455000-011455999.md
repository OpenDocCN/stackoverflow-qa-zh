# StackOverflow 问答 11455000-11455999

# jquery - 通过jquery ajax请求传递数组？

> ID：11455000
> 
> 赞同：0
> 
> 时间：2012-07-12T15:14:34.343
> 
> 标签：jquery, ajax, arrays

尝试使用 ajax 请求将数组传递给 php 页面。当前的响应`ction Array() { [native code] }`与实际的数组内容相反（即时响应不是空的）。这是我的代码：

```
 function GetPaginationPage(array1) {
    var jsonString = JSON.stringify(array1);

    $.ajax({
        type: "POST",
        url: "includes/get_pagination_page.php",
        data: {data : jsonString},
        success: function(data){ 
        $('.contestants_list').append(data);
        }
        });
}; 
```

用 json 更新，它现在传递“未定义”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:26:17.387

没有理由在`JSON.stringify`这里使用。只需将数组正常发送到 PHP。

```
function GetPaginationPage(array1) {
    $.ajax({
        type: "POST",
        url: "includes/get_pagination_page.php",
        data: {
            data: array1
        },
        success: function (data) {
            $('.contestants_list').append(data);
        }
    });
} 
```

现在在 PHP 中，`$_POST['data']`将是一个数组。

更新：你说你是这样打电话`GetPaginationPage`的：

```
GetPaginationPage(<?php echo $contestants_array; ?>); 
```

您需要将其更改为：

```
GetPaginationPage(<?php echo json_encode($contestants_array); ?>); 
```

当您`echo`在 PHP 中使用数组时，它会被转换为字符串`"Array"`，由 JavaScript 解释为`Array`对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:16:43.673

在传递它之前将数组转换为字符串，如下所示：

```
array1.join(','); 
```

或者，如果它是一个复杂的数组，请考虑 JSON：

```
JSON.stringify(array1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T15:16:51.270

我这样做的方法是在 JavaScript 中将数组创建为分隔 (~) 字符串，然后我使用 explode php 函数加载到数组中。

# objective-c - 无法访问另一个班级的自我

> ID：11455002
> 
> 赞同：0
> 
> 时间：2012-07-12T15:14:35.373
> 
> 标签：objective-c

我有一个关于 XML 请求的课程。在一个方法 ( ) 中，我在( )`xmlRequest`中调用另一个函数并将其传递给. 关键是将 设置为 self 的属性，以便我可以在不同的文件中访问它，主要是 ViewController。我可以打印出来，但是当我尝试在 ViewController 中打印出来时，它说。难道我做错了什么？`Request``returnXML``DDXMLDocument``returnXML``xmlDocument``self->xmlDocument``returnXML``NULL`

在 Request.m 中：

```
-(void)returnXML: (DDXMLDocument *) xmldoc
 {
    self->xmlDocument =xmldoc;
    NSLog(@"%@", [self->xmlDocument XMLStringWithOptions:DDXMLNodePrettyPrint]); //prints doc
    return xmldoc; 
 } 
```

在视图控制器中：

```
Request *http=[[Request alloc] init];
[http xmlRequest:@"http://legalindexes.indoff.com/sitemap.xml"];
NSLog(@"%@",[http->xmlDocument XMLStringWithOptions:DDXMLNodePrettyPrint]); //prints doc 
```

这就是我调用 returnXML 的地方

```
 -(void)xmlRequest:(NSString *)xmlurl
{
    AFKissXMLRequestOperation* operation= [AFKissXMLRequestOperation XMLDocumentRequestOperationWithRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:xmlurl]] success:^(NSURLRequest *request, NSHTTPURLResponse *response, DDXMLDocument *XMLDocument) {
       // self.XMLDocument=XMLDocument;
        [self returnXML:XMLDocument];

    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, DDXMLDocument *XMLDocument) {
        NSLog(@"Failure!");
    }];
    [operation start]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:21:20.327

你没有保留`xmldoc`，所以它被释放了。

您需要创建一个`@property`以及`@synthesize`getter 和 setter 方法：

在 Request.h 中：

```
@interface Request : NSObject
{
   DDXMLDocument *_xmlDocument;
}

@property (retain, nonatomic, readwrite) DDXMLDocument *xmlDocument;

...

@end 
```

在 Request.m 中：

```
@implementation Request

@synthesize xmlDocument = _xmlDocument;

-(void)returnXML: (DDXMLDocument *) xmldoc
{
    self.xmlDocument = xmldoc;    // Use the setter!
    NSLog(@"%@", [self.xmlDocument XMLStringWithOptions:DDXMLNodePrettyPrint]);
    // No return from void!!!
}

@end 
```

在视图控制器中：

```
Request *http=[[Request alloc] init];
[http xmlRequest:@"http://legalindexes.indoff.com/sitemap.xml"];
NSLog(@"%@",[http.xmlDocument XMLStringWithOptions:DDXMLNodePrettyPrint]); 
```

但是`returnXML`，如果您的方法定义为`void`. 我会把它留给你解决。

# ruby - 如何使用回形针禁用图像后处理但允许自定义后处理器？

> ID：11455010
> 
> 赞同：3
> 
> 时间：2012-07-12T15:14:49.507
> 
> 标签：ruby, paperclip

我需要为 Paperclip 启用自定义后处理器，但要防止发生常规图像后处理。（我正在使用 Paperclip 上传不是图像的文件，因此不需要图像后处理，但我有一个特定于我的文件的后处理例程，它确实需要运行。）

我见过的禁用回形针后期处理的典型方法是使用 before_post_process 回调禁用所有后期处理。

有没有办法可以禁用图像后处理但仍然运行我的？

# xquery - 如何在xquery中对结果进行分组

> ID：11455011
> 
> 赞同：0
> 
> 时间：2012-07-12T15:14:51.583
> 
> 标签：xquery

抱歉标题，我不知道这个问题的最佳标题是什么

我遇到了困难`XQUERY`。结果不是我预期的

这是xml

```
<Equipes>
        <Equipe>
            <equipeId>1</equipeId>
            <equipeNom>Equipe A</equipeNom>
            <JoueurEquipe>  
                <dateDebut>2011-01-01</dateDebut>
                <dateFin>2013-01-01</dateFin>
                <numero>1</numero>
                <joueurId>1</joueurId>
            </JoueurEquipe>
            <JoueurEquipe>
                <dateDebut>2010-01-01</dateDebut>
                <dateFin>2012-01-01</dateFin>
                <numero>2</numero>
                <joueurId>2</joueurId>
            </JoueurEquipe>
        </Equipe>
        <Equipe>
            <equipeId>2</equipeId>
            <equipeNom>Equipe B</equipeNom>
            <JoueurEquipe>  
                <dateDebut>2009-01-01</dateDebut>
                <dateFin>2012-01-01</dateFin>
                <numero>1</numero>
                <joueurId>3</joueurId>
            </JoueurEquipe>
            <JoueurEquipe>
                <dateDebut>2010-01-01</dateDebut>
                <dateFin>2014-01-01</dateFin>
                <numero>2</numero>
                <joueurId>4</joueurId>
            </JoueurEquipe>
        </Equipe>
    </Equipes> 
```

这是查询

```
for $b in doc("ligue.xml")/ligue/Equipes
    return 
    <Equipes>
    {
        $b/Equipe/equipeId, 
        $b/Equipe/equipeNom
    }
    </Equipes> 
```

结果是

```
<equipes>
       <equipeId>1</equipeId>
       <equipeId>2</equipeId>
       <equipeNom>Equipe A</equipeNom>
       <equipeNom>Equipe B</equipeNom>
</equipes> 
```

我需要的是

```
<equipes>
           <equipeId>1</equipeId>
           <equipeNom>Equipe A</equipeNom>
           <equipeId>2</equipeId>
           <equipeNom>Equipe B</equipeNom>
 </equipes> 
```

我不知道我错过了什么

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T15:22:10.790

迭代你真正希望你的输出迭代的东西：

```
<Equipes>{
for $b in doc("ligue.xml")/ligue/Equipes/Equipe[equipeId][equipeNom]
    return ($b/equipeId, $b/equipeNom)
}</Equipes> 
```

现在，让我们探讨一下*为什么*您之前的查询会这样。这：

```
for $b in doc("ligue.xml")/ligue/Equipes
    return 
    <Equipes>
    {
        $b/Equipe/equipeId, 
        $b/Equipe/equipeNom
    }
    </Equipes> 
```

...找到`Equipes`元素，其中只有一个（使 for 循环无用）。然后它搜索`$b/Equipe/equipeId`and `$b/Equipe/equipeNom`，两者都计算为包含多个元素的列表，并将这两个列表连接起来以获得输出。

# eventkit - 使用 EventKit Mountain Lion 将事件添加到日历

> ID：11455014
> 
> 赞同：0
> 
> 时间：2012-07-12T15:15:11.410
> 
> 标签：eventkit, ekevent, osx-mountain-lion

我添加了框架 EventKit 并且我有这个代码。我无法在默认日历中添加活动。

```
#import "Calendar.h"
#import <EventKit/EventKit.h>

@implementation Calendar

-(IBAction)addCal:(id)sender
{
    EKEventStore *store = [[EKEventStore alloc] initWithAccessToEntityTypes:EKEntityMaskEvent];
    EKEvent *evento = [EKEvent eventWithEventStore:store];

    [evento setStartDate:[NSDate date]];
    [evento setTitle:@"Title"];   
    [evento setCalendar:[store defaultCalendarForNewEvents]];

    NSError *error;
    [store saveEvent:evento span:EKSpanThisEvent commit:YES error:&error];    
} 
```

在控制台中我有这个：“我们正在包含和获取事件，因为这个应用程序做了一些与事件相关的事情。如果这个应用程序不关心事件，那么这可能是一个昂贵的调用。”

我是初学者。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T19:06:22.517

我成功地使用了这段代码：

```
 //Calendar Test:
    [self setEventStore:[[EKEventStore alloc] initWithAccessToEntityTypes:EKEntityMaskEvent]];
    NSCalendar *calendar = [NSCalendar currentCalendar];
    NSDateComponents *dc = [[NSDateComponents alloc] init];
    [dc setHour:1];
    NSDate *startDate = [NSDate date];
    NSDate *endDate = [calendar dateByAddingComponents:dc toDate:[NSDate date] options:0];
    EKEvent *anEvent = [EKEvent eventWithEventStore:eventStore];
    [anEvent setTitle:@"event1"];;
    [anEvent setCalendar:[[eventStore calendarsForEntityType:EKCalendarTypeLocal]objectAtIndex:0]];
    [anEvent setLocation:@"Somewhere"];
    [anEvent setStartDate:startDate];
    [anEvent setEndDate:endDate];
    [eventStore saveEvent:anEvent span:EKSpanThisEvent commit:YES error:nil]; 
```

它在我的第一个日历中为我提供了一个一小时的活动，但我仍然收到了消息。我怀疑该消息是一次性调试消息，但我没有使用该程序的发布版本进行测试。在文档中也找不到任何关于此的内容。

希望有帮助。

# javascript - javascript调用后如何重新加载样式？

> ID：11455017
> 
> 赞同：1
> 
> 时间：2012-07-12T15:15:22.423
> 
> 标签：javascript, css, ajax

我有以下html：

```
<div class="sk-toolbar-tools-primary">
   <span class="sk-custom-select">
      <select name="music-sort-select" id="music-sort-select">
          <option value="option1">Company 1</option>
          <option value="option2">Company 2</option>
          <option value="option3">Company 3</option>
     </select>
  </span>
</div> 
```

如您所见，此选择元素使用 CSS 样式设置样式，现在如果我使用 AJAX 调用从数据库中发布公司并使用此 Javascript 函数将响应注入到选择中：

```
 function loadCompanies(){
    var companies= getCompanies();
    var select = document.getElementById("music-sort-select");
    for(var i = 0; i<companies.length; i++) {
        select.options[select.options.length] = new Option(companies[i].name,companies[i].id);
    }

} 
```

在哪里`getCompanies()`进行 AJAX 调用，发生的情况是 Javascript 函数工作正常，我可以看到使用 chrome 中的开发人员工具发布的 DB 中的数据，但是选择停止工作并且它没有打开并显示选项。我猜这是因为新选项在页面加载后加载时没有采用 CSS 样式。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:16:52.310

浏览器应该立即应用 CSS，即使新的东西被添加到 DOM 中。您是否使用选择框替换脚本通过 CSS 设置选择框样式？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T16:17:47.873

可以使用 Jquery 完成
给你的样式，按钮 ids

```
jQuery(function($) {
var $output = $('#output')
  , $style = $('#styles')
  , $button = $('#preview')
;
$ed.val($style.html());
$button.click(function() {
    $style.html($output.val());
    return false;
});
}); 
```

# google-analytics - Web 应用程序中的电子客户行为

> ID：11455020
> 
> 赞同：6
> 
> 时间：2012-07-12T15:15:53.467
> 
> 标签：google-analytics, e-commerce, analytics

我想知道市场上用于分析/实施 Web 应用程序中电子客户行为的主要工具是什么。

我只知道跟踪客户端活动的谷歌分析，但也许有很多使用客户端和服务器端脚本的替代方案。

我已经在 webmasters.stackexchange.com [E-customer behavior in a Web application](https://webmasters.stackexchange.com/questions/31993/e-customer-behaviour-in-a-web-application)上发布了这个问题，但它已被关闭，无法理解为什么！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-15T11:08:04.377

有大量工具可以分析网站上的用户行为。电子商务或其他。

## 谷歌分析有如下选项：

*   [电子商务](http://cutroni.com/blog/2012/02/09/pimping-out-google-analytics-for-ecommerce-websites/)
*   [电子商务自定义变量](http://www.cardinalpath.com/advanced-google-analytics-e-commerce-tracking-just-in-time-for-the-holidays/)
*   [目标和渠道](http://sixrevisions.com/tools/google-analytics-in-depth-goals-and-funnels/)
*   [目标流](http://cutroni.com/blog/2011/10/19/path-analysis-in-google-analytics-with-flow-visualization/)

等等，这有助于理解诸如下车点、转化率、典型客户路径和其他购物者指标等内容。

## 其他对电子商务/网站行为有用的分析包：

*   [点击故事](http://clicktale.com)
*   [疯狂的鸡蛋](http://crazyegg.com)
*   [获取点击](http://getclicky.com)

和更多。其中一些具有实时/间谍功能，可让您实时查看用户在做什么。

最好的方法是实际观看用户行为的记录，包括击键和鼠标点击/移动。

## 用户录音工具：

*   [鼠标统计](http://www.mousestats.com/)
*   [幽灵记录](http://ghostrec.com)
*   [检查](http://inspectlet.com)
*   [鼠标流](http://mouseflow.com)

以上大部分内容还进行了汇总的热图和叠加，以让您深入了解用户点击最多的内容或吸引他们眼球的内容等。

## 逐步改进您的网站：

A/B 测试或多变量测试现在风靡一时。通过 A/B 测试，请注意[局部最大值](http://52weeksofux.com/post/694598769/the-local-maximum)，并避免人们在测试中犯的[常见错误。](http://www.getelastic.com/5-common-ab-multivariate-testing-mistakes/)谷歌内容过期（以前称为谷歌网站优化器）现在是谷歌分析的一部分，你可以用它来做测试。

### 用于分析和设置电子商务用户行为的参考/更多阅读：

*   [跟踪用户](http://ui-patterns.com/blog/Stalk-your-users-Clicktale-userfly-and-mouseflow-review)
*   [推动在线销售](http://www.slideshare.net/investni/driving-online-sales-craig-sullivan-22-march-2012)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T05:50:18.327

# 网络分析解决方案

首先，您需要选择一个通用的建议 Web 分析解决方案。由于您是电子商务，因此您想选择一个对跟踪电子商务数据有良好支持的电子商务。

[谷歌分析](http://www.google.com/analytics/)在这里是显而易见的选择，不仅因为它是免费的，而且因为它有更好的文档记录并且更容易实施。

根据您的规模，实施更多的企业级电子商务解决方案可能是有意义的。您可能想看看[Adob​​e Omniture](http://www.omniture.com/)和[IBM CoreMetrics](http://www-01.ibm.com/software/marketing-solutions/coremetrics/)。它们要贵得多，不仅因为许可证，而且从实施的角度来看。实施这些其他工具之一可能需要数月时间，实施成本可能与许可证成本几乎相同。不过，如果您需要更多的企业级分析以及与其他 BI 解决方案的集成，那么可能值得看看这些。

请注意，谷歌分析也有一个[高级版](http://www.google.com/analytics/premium/)。这是一个相当新的替代方案，并提供了一些额外的功能和对 beta 功能的早期访问。

# 产品推荐

根据您的电子商务平台，您可能已经有了某种产品推荐或追加销售。您通常可以根据分析数据改进这些系统。市场上只有几种选择，大多数这样做的公司倾向于开发自己的推荐引擎。

如果您刚刚开始使用它，可能值得一看[LiftSuggest](http://www.liftsuggest.com/)。我还没有尝试过，但它们似乎很容易实施和利用谷歌分析数据来改善交叉销售。

# 热图

它很容易实现，并且可以提供一些不错的功能。我发现它们通常更让人分心，但时不时你可以充分利用它们。最常见的是[CrazyEgg](http://www.crazyegg.com/)和[ClickTale](http://www.clicktale.com/)。

# 行为定位

这是一种根据您对访问者的先前了解来定制您的网站的技术，以提高他的转化率。工具在这里对您没有多大帮助，因为您必须自定义您的网站，并且没有工具可以预测如何做到这一点。一种常见的方法是根据您可以推断的因素创建存储桶。例如：使用 Internet Explorer 的用户可能不太懂技术，因此可能对非技术产品更感兴趣。另一方面，Linux 用户可能在技术领域。因此，您可以根据用户来自哪个国家/地区、他们使用的浏览器或他们是否已登录，您可以使用他们在个人资料中输入的信息或根据之前的购买记录将用户放在存储桶中。一种可以帮助您做到这一点的工具称为[BTBuckets](http://btbuckets.com/)。

# A/B 和多变量测试

谷歌分析有一个与该工具集成的 A/B 测试工具。另一个同时提供 A/B 和多变量测试的好工具是[Unbounce](http://unbounce.com/)、[Optimizely](https://www.optimizely.com/)和[Webtrends Optimize](http://webtrends.com/products/optimize/)。

# 定制解决方案

如今，每个人都在开发定制解决方案。如果您在用尽其他选项后仍有金钱和时间花在 Web Analytics 上，您可以考虑构建自己的选项。以您想要的方式收集数据并分析粒度数据。这里的解决方案范围从服务器端到客户端集合，但对于分析，它们通常使用[Hadoop](http://hadoop.apache.org/)或像[Microstrategy](http://www.microstrategy.com/)这样的 OLAP 商业智能工具来完成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T18:43:14.617

您正在寻找的是一种称为[客户关系管理](http://en.wikipedia.org/wiki/Customer_relationship_management)软件或**CRM**的软件。它们差异很大，因此如果没有深入了解您的确切需求，就不可能推荐特定的需求。任何好的 CRM 都可以让您以各种方式分析您的网站访问者。例如，您可以查看客户是否购买了*X* ，他们经常会在一个月后回来购买*Y。*

困难的部分是集成，因为这些系统需要有关订单和其他用户操作的信息。如果您使用的是现成的电子商务包，通常有现成的 CRM 选项可用。

对于“更轻”的系统，您可以使用 Google Analytics 或类似系统，因为它可以让您从浏览器发送跟踪、转换和销售信息。它非常适合分析网站的整体成功和跨页面跟踪用户操作，但对于特定于销售的报告和分析来说功能较弱。

# ruby-on-rails - Rails 2 - 实现这种范围的好方法

> ID：11455026
> 
> 赞同：1
> 
> 时间：2012-07-12T15:16:01.017
> 
> 标签：ruby-on-rails, ruby, scope

我在**routes.rb** `in Rails 3`应用程序中有这样的代码：

```
 scope 'robokassa' do
    match 'paid'    => 'robokassa#paid',    :as => :robokassa_paid    # to handle Robokassa push request
    match 'success' => 'robokassa#success', :as => :robokassa_success # to handle Robokassa success redirect
    match 'fail'    => 'robokassa#fail',    :as => :robokassa_fail    # to handle Robokassa fail redirect
  end 
```

我想在`Rails 2`应用程序中写这样的范围。实现这一点的正确方法是什么？rails 2 是否支持范围？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:13:59.357

这应该在 Rails 2 中工作。

```
map.resources :robokassa do |robokassa|
  robokassa.match 'success' => 'robokassa#success'
  robokassa.match 'paid' => 'robokassa#paid'
  robokassa.match 'fail' => 'robokassa#fail'
end 
```

或者您可以像这样单独声明每条路线：

```
map.connect 'robokassa/success', :controller => 'robokassa', :action => 'success' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:14:34.670

老实说，我不记得了，但如果一切都失败了，我认为你总是可以这样做：

```
match 'robokassa/paid' => 'robokassa#paid', :as => :robokassa_paid 
```

等等。

# c# - 将代码/bin 文件（重新）部署到（多个）Windows Azure 虚拟机的方法

> ID：11455027
> 
> 赞同：9
> 
> 时间：2012-07-12T15:16:01.877
> 
> 标签：c#, azure, deployment, virtual-machine, azure-configuration

这个问题可能与 Azure 虚拟机无关，但我希望 Azure 提供了比 Amazon EC2 更简单的方法。

我在多个 Azure 虚拟机（即不是 Azure 网站或 [Paas] 角色）上运行了长时间运行的应用程序。它们是简单的控制台应用程序/Windows 服务。有时，我会刷新代码并需要**停止这些进程**，**更新代码/二进制文件**，然后**重新启动这些进程**。

过去，我曾尝试使用 PSTools ( **psexec** ) 远程执行此操作，但这似乎是一种 hack。有没有更好的方法来远程杀死应用程序，刷新部署，重新启动应用程序？

理想情况下，Visual Studio 中应该有一个等效的“**发布控制台应用程序**”，它允许我像部署 Azure 网站一样部署代码，但我猜这是不可能的。

非常感谢您的任何建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T16:02:32.233

有许多“正确”的方法可以执行您的任务。

如果您正在运行 Windows Azure 应用程序 - [MSDN](http://msdn.microsoft.com/en-us/library/windowsazure/ff683668)上有一个简单的指南。但是，如果您必须使用常规控制台应用程序执行此操作 - 您就有问题了。

微软的方式是使用[WMI——](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394582%28v=vs.85%29.aspx)一种适用于任何远程 Windows 服务器管理的好技术。我想 WMI 应该可以满足您的目的。

最后一种方法：在每个 Azure VM 上安装 Git，并编写简单的服务器端脚本，计划每 5 分钟运行一次，以更新存储库中的代码，构建它，杀死旧进程并启动新进程。将您的更新发布到存储库，仅此而已。绝对破解，但它甚至适用于非 Windows 机器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T17:45:57.730

一种常见的模式是将项目（例如命令行应用程序）存储在 Windows Azure Blob 存储中。我经常这样做（例如：我将所有 MongoDB 二进制文件存储在一个 blob 中，压缩后，每个版本一个 zip #）。在 VM 启动时，我有一个任务将 zip 从 blob 下载到本地磁盘，解压缩到本地文件夹，然后启动 mongod.exe 进程（这同样适用于其他控制台应用程序）。如果您有更复杂的安装，则需要获取 MSI 或其他类型的自动安装程序。将这些应用程序存储在 blob 存储中的两个好处：

*   减少部署包大小
*   不再需要重新部署整个云应用程序只是为了更改它的一个组件

更新控制台应用程序时：您可以将新版本上传到 Blob 存储。现在您有几种方法可以通知我的虚拟机进行更新。例如：

*   修改我的配置文件（也许我有一个键/值对引用我的应用程序名称 + 版本号）。当这种情况发生变化时，我可以在我的 web/worker 角色中处理该事件，从而允许我的代码采取适当的行动。此操作可能是停止 exe，从 blob 中获取新的，然后重新启动。或者......如果它比这更复杂，我什至可以让虚拟机实例简单地重新启动，清除内存/临时文件/等。并干净地开始一切。
*   向自己发送某种类型的命令来更新应用程序。我可能会使用服务总线队列来执行此操作，因为我的“软件更新”主题可以有多个订阅者。每个实例都可以订阅队列，并在出现*更新*消息时进行相应的处理（可能消息包含应用程序名称和版本号，就像我们在配置中的键/值对）。我也可以为此使用 Windows Azure 存储队列，但是我可能需要每个实例一个队列（我不喜欢这个）。
*   创建我的角色实例侦听的某种类型的 wcf 服务，以便更新命令。与 Windows Azure 队列相同的问题：要求我找到一种方法将相同的消息推送到我的 web/worker 角色的每个实例。

这些都适用于独立 exe（或 xcopy-deployable exe）。对于需要管理员级别权限的 MSI，这些需要通过启动脚本运行。在这种情况下，您可能有一个配置更改事件，该事件将由您的角色实例处理（如上所述），但您只需重新启动实例，允许它们通过启动脚本运行 MSI。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-25T13:11:33.787

你可以

1.  构建您的源并将*包内容*存储在*打包文件夹中*
2.  *从打包文件夹*中的二进制文件生成一个*包*并上传到 Blob 存储
**   使用 PowerShell Remoting 将`host`包下拉（并解包）*到*远程*文件夹中**   使用 PowerShell Remoting 根据`host`需要`install.ps1`从*包内容*（即下载和配置）中运行。*

 *您可以使用相同的方法来`Enter-PSSession -ComputerName $env:COMPUTERNAME` 快速部署本地构建策略，这意味着您对开发、生产和测试使用相同的策略，例如[持续交付](http://continuousdelivery.com)。

您可以稍后（如有必要）进行的潜在优化是（对于本地构建）删除第 2 步和第 3 步，即假装您已经打包、上传、下载和解包，只需将*打包文件夹*提供给您的 install.ps1 为*远程文件夹*并`install.ps1`在非远程会话中以交互方式运行。

上述主题的一个常见变体是使用有效的文件传输和版本控制机制，例如 git（或（颤抖）TFS！）来实现“在构建结束时推送某处”和“在部署开始时拉取”部分练习（Azure 网站提供了一个内置的 TFS 或 git 端点，这使得每个“推送”都隐含地在远端包含一个“拉动”）。

如果您的代码是 xcopy 可部署的（并且是影子复制的），您甚至可以在 git 中拥有一个完整的应用程序映像，然后简单地执行 git pull 来更新您的站点（有或没有由 PowerShell Remoting 执行的第 4 步`install.ps1`）。*

# xml - 按名称查找兄弟节点

> ID：11455028
> 
> 赞同：1
> 
> 时间：2012-07-12T15:16:06.770
> 
> 标签：xml, visual-studio-2010, visual-studio-2008, iis, iis-7

我正在阅读 IIS 的 applicationHost.xml.config 文件。我在站点中获取每个站点的虚拟目录，然后从那时获取我需要的信息。物理路径和路径等信息。***然后我需要获取绑定。***

当我有两个应用程序节点时，我无法弄清楚如何有效地到达“绑定”元素节点。*（下面显示了一个示例）*但是，如果有一个应用程序节点，我可以使用“site.ParentNode.NextSibling.ChildNodes”来获取相应绑定的列表。

在此先感谢您的帮助！

**我的代码：**

```
XDocument.Load(@"C:\\windows\\system32\\inetsrv\\config\\applicationHost.config");
XmlNodeList siteList = XDocument.SelectNodes("/configuration/system.applicationHost/sites/site/application/virtualDirectory");

foreach (XmlNode site in siteList)
{
    XmlAttribute XmlAttributeParentParentName = (XmlAttribute)site.ParentNode.ParentNode.Attributes.GetNamedItem("name");
    XmlAttribute XmlAttributePath = (XmlAttribute)site.Attributes.GetNamedItem("path");
    XmlAttribute XmlAttributePhysicalPath = (XmlAttribute)site.Attributes.GetNamedItem("physicalPath");
    XmlNodeList BindingList = (XmlNodeList)site.ParentNode.NextSibling.ChildNodes;

    string path = XmlAttributePath.Value.ToString();
    string siteName = XmlAttributeParentParentName.Value.ToString();
    string physicalPath = XmlAttributePhysicalPath.Value.ToString();
    string firstBindingElement = BindingList[0].Attributes.GetNamedItem("bindingInformation").Value.ToString();

    //do something with the variables.
    //rest of code is here
} 
```

**以下是站点节点的示例：**

```
<site name="Site Name" id="20" serverAutoStart="true">
  <application path="/" applicationPool="SiteAppPool">
      <virtualDirectory path="/" physicalPath="C:\inetpub\wwwroot\SiteName" />
  </application>
  <application path="/store" applicationPool="SiteAppPool">
      <virtualDirectory path="/" physicalPath="C:\inetpub\wwwroot\SiteName\store" />
  </application>
  <bindings>
      <binding protocol="http" bindingInformation="*:80:sitename.com" />
  </bindings>
</site> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T20:49:58.990

我希望我不会在这里遗漏任何东西，但是您不能像这样在迭代的 XmlNode 上使用 SelectNodes：

```
XmlNodeList BindingList = (XmlNodeList)site.SelectNodes("../../bindings/binding"); 
```

这应该将您从迭代节点的根（即 virtualDirectory 节点）带到其父节点（即应用程序节点），再到其父节点（即站点节点），再到绑定节点，最后到绑定列表这里面的节点？

# c# - 重载基础构造函数

> ID：11455031
> 
> 赞同：1
> 
> 时间：2012-07-12T15:16:19.943
> 
> 标签：c#, asp.net, c#-4.0

我有这样的课：

```
public class foo
{
    public foo(string a, string b) { ... }
} 
```

我想做这样的事情：

```
public class bar : foo
{
    public bar()
    {
        base = base("apple", "banana");
    }
} 
```

Visual Studio 对我大喊：

```
'foo' does not contain a constructor that takes 0 arguments 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T15:17:35.620

这是这样做的方法：

```
public class foo
{
    public foo(string a, string b) { ... }
}

public class bar : foo
{
    public bar(): base("apple", "banana") // call base constructor
    {

    }
} 
```

参考：[使用构造函数（C# 编程指南）](http://msdn.microsoft.com/en-us/library/ms173115%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T15:17:31.843

像这样重写：

```
public bar() :
    base("apple", "banana");
{
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T15:17:50.863

试试这个：

```
public class bar : foo
{
    public bar() : base("apple", "banana")
    {
    }
} 
```

问候

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T15:19:20.330

您需要执行以下操作。本质上，您是在告诉编译器要使用哪个构造函数，因为没有可用的默认构造函数。

```
public class foo
{
    public foo(string a, string b) { }
}

public class bar : foo
{
    public bar()
        : base("apple", "banana")
    {
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-12T15:24:18.187

您只需要更改 bar 构造函数即可正确调用基本构造函数。

```
public class bar : foo 
{ 
  public bar() :  base("apple", "banana")
  { 
  }
} 
```

# django - 找不到页面错误django注册

> ID：11455032
> 
> 赞同：2
> 
> 时间：2012-07-12T15:16:21.957
> 
> 标签：django, django-forms, django-registration

我正在使用带有默认 url 配置的 django-registration。当我指向 url mysite/accounts/register 时，我可以看到注册表单，但是当我单击提交按钮时，它会继续处理一段时间，然后返回“找不到页面错误”。尽管如果我在本地主机的开发服务器上尝试相同的操作，它工作正常。我通过触发 python 的邮件服务器在 localhost 检查电子邮件。这是生产服务器的设置

```
 ACCOUNT_ACTIVATION_DAYS = 7
    EMAIL_HOST = 'smtp.gmail.com'
    EMAIL_PORT = 465
    EMAIL_USE_TLS = True

    EMAIL_HOST_USER = 'myemail@gmail.com' 
    EMAIL_HOST_PASSWORD = 'mypassword'

    DEFAULT_FROM_EMAIL = 'myemail@gmail.com'
    LOGIN_REDIRECT_URL = '/' 
```

这是本地主机上的开发服务器设置

```
 ACCOUNT_ACTIVATION_DAYS = 7
    EMAIL_HOST = "localhost"
    EMAIL_PORT = 1025 
```

我正在使用默认 urls 配置，

```
 url(r'^accounts/', include('registration.backends.default.urls')), 
```

我错过了一些配置/设置吗？任何帮助，将不胜感激 。

# android - 安卓。放置 ImageView

> ID：11455045
> 
> 赞同：0
> 
> 时间：2012-07-12T15:17:07.040
> 
> 标签：android, imageview

我需要将 10 个 ImageView 并排放置（在水平行中），它​​们需要从左到右填满整个屏幕。所以如果屏幕的总宽度是 100px，那么每个 ImageView 的宽度都是 10px。让我们忽略每个 ImageView 的高度。

在世界上，我怎么能用`dp`价值而**不是** `pixels`用价值来实现呢？我在每个 ldpi、mdpi 和 hdpi 文件夹中放置了一个 .jpg 图像，每个图像的尺寸都与这个人的回答有关：[*请参阅此处*](https://stackoverflow.com/questions/6930031/how-do-i-convert-ppi-into-dpi-for-android-images)

我试过这样做：

```
<ImageView 
  android:id="@+id/caca1" 
  android:src="@drawable/tile_11" 
  android:layout_width="wrap_content"  
  android:layout_height="wrap_content" />
<ImageView 
  android:id="@+id/caca2" 
  android:src="@drawable/tile_11" 
  android:layout_toRightOf="@+id/caca1" 
  android:layout_width="wrap_content"  
  android:layout_height="wrap_content" />

... and so on, 'til the 10th ImageView. Each one is place on the right side of the previous. 
```

上面的代码**确实**从屏幕的左边距开始连续显示它们......但我没有到达右边距。

有没有一种方法可以拉伸每个图块以适应屏幕的宽度，而无需以像素为单位定义每个图像视图的宽度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:21:53.360

您想使用 a`LinearLayout`水平显示它们：

```
<LinearLayout
  android:layout_width="match_parent"
  android:layout_height="wrap_content"
  android:orientation="horizontal">
  <ImageView
    android:layout_width="0"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:src="@drawable/image" />
  <ImageView
    android:layout_width="0"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:src="@drawable/image2" />
  etc..
</LinearLayout> 
```

如果`layout_weight`每个 的 相同`ImageView`，它们在 中的大小将相同`LinearLayout`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:53:44.820

将图像宽度设置为 0，权重设置为 1，并将它们的[比例类型](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)设置为`CENTER_CROP`或`FIT_XY`

```
<ImageView
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:src="@drawable/image"
    android:scaleType="CENTER_CROP" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T16:17:28.543

关于动态调整高度，我认为您必须在 Acivitities OnCreate() 中以编程方式执行此操作：

对于每个图像：

```
// image layout adjustment
LayoutParams lp = mImage.getLayoutParams();
float width = (float)mImage.getDrawable().getIntrinsicWidth();
int height = (int)(((float)mContext.getWindowManager().getDefaultDisplay().getWidth() / 10.0f) * ((float)mImage.getDrawable().getIntrinsicHeight() / width));

lp.height = height;
mImage.setLayoutParams(lp); 
```

高度 = 屏幕宽度 / 10（因为假设 0 边距，您有 10 张图像）然后乘以图像的高度/宽度之比。这应该使您的图像保持比例。

# sql - 带有分页 vb.net 的 Sql SELECT 语句

> ID：11455051
> 
> 赞同：0
> 
> 时间：2012-07-12T15:17:28.960
> 
> 标签：sql, vb.net, select, paging

我查看了许多其他类似的问题，但无法让这适用于我的陈述。这是当前有效的 SELECT 语句，我需要添加分页。

```
 "SELECT TOP 15 * FROM  tblEvents WHERE (dbo.fnEventSearchDistance(@CityLat, " & _
      "@CityLong, latitude, longitude) <= @Radius AND (StartDate >= GETDATE())) " 
```

这是我能得到的最接近的。

```
 "SELECT ROW_NUMBER() OVER(ORDER BY StartDate) AS RowNum, * FROM tblEvents " & _
      "WHERE RowNum BETWEEN ((@PageNum - 1) * @PageSize + 1) " & _
      "AND (@PageNum * @PageSize) " & _
      "ORDER BY StartDate"

      comm2.Parameters.AddWithValue("@PageSize", 25)
      comm2.Parameters.AddWithValue("@PageNum", 2) 
```

我需要一个 SELECT 语句来重写第一个 SELECT 语句以合并分页，我可以在其中添加 pageSize 和 pageNum 参数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:26:26.357

假设 SQL Server 2008 和更早版本，你应该试试这个：

```
"SELECT col1, col2 FROM (SELECT ROW_NUMBER() OVER(ORDER BY StartDate) AS RowNum, * FROM tblEvents) AS E " & _
"WHERE RowNum BETWEEN ((@PageNum - 1) * @PageSize + 1) " & _
"AND (@PageNum * @PageSize) " & _
"ORDER BY StartDate" 
```

请注意，我放`col1, col2`了选择，你应该把你需要的列放在那里。对于 SQL Server 2012，这非常简单：

```
"SELECT * FROM tblEvents ORDER BY StartDate " & _ 
"OFFSET (@PageNum - 1) * @PageSize ROWS FETCH NEXT @PageNum ROWS ONLY" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:29:15.577

```
CREATE  PROCEDURE [dbo].[usp_PageResults_NAI] 
(
    @startRowIndex int,
    @maximumRows int
)
AS

DECLARE @first_id int, @startRow int

-- A check can be added to make sure @startRowIndex isn't > count(1)
-- from employees before doing any actual work unless it is guaranteed
-- the caller won't do that

-- Get the first employeeID for our page of records
SET ROWCOUNT @startRowIndex
SELECT @first_id = employeeID FROM employees ORDER BY employeeid

-- Now, set the row count to MaximumRows and get
-- all records >= @first_id
SET ROWCOUNT @maximumRows

SELECT e.*, d.name as DepartmentName 
FROM employees e
   INNER JOIN Departments D ON
       e.DepartmentID = d.DepartmentID
WHERE employeeid >= @first_id
ORDER BY e.EmployeeID

SET ROWCOUNT 0

GO 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T15:25:24.053

试试这个：

```
;With ranked AS
(
   SELECT ROW_NUMBER() OVER(ORDER BY StartDate) AS RowNum,  * 
   FROM tblEvents
)
SELECT * FROM Ranked
WHERE RowNum BETWEEN ((@PageNum - 1) * @PageSize + 1)
    AND (@PageNum * @PageSize)
    ORDER BY StartDate 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T15:31:11.063

您不能在子句中引用[ROW_NUMBER](http://msdn.microsoft.com/en-us/library/ms186734.aspx)`WHERE`，使用[公用表表达式 (CTE)](http://msdn.microsoft.com/en-us/library/ms175972.aspx)可以帮助进行分页。

```
WITH Paging AS
(
   SELECT ROW_NUMBER() OVER (ORDER BY StartDate) AS RowNum
    , *
   FROM tblEvents
)
SELECT *
FROM Paging AS p
WHERE p.RowNum BETWEEN ((@PageNum - 1) * @PageSize + 1)
   AND (@PageNum * @PageSize)
ORDER BY p.StartDate ASC; 
```

从 SQL 2012 开始，您将可以访问[OFFSET FETCH](http://msdn.microsoft.com/en-us/library/ms188385.aspx)以`ORDER BY`帮助更轻松、更高效地进行分页。

# c# - C# 代码在本地主机与实时服务器中的行为不同

> ID：11455058
> 
> 赞同：0
> 
> 时间：2012-07-12T15:17:44.063
> 
> 标签：c#, asp.net, refresh, publish, pageload

对于常规 Web 应用程序，我的代码中有以下 C# 代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!validTime())
    {
        btnEdit.Enabled = false;
        btnSubmit.Enabled = false; btnSubmit2.Enabled = false;
        lblSuccess.Text = "It is not currently the time to edit picks for this week.";
        lblSuccess.ForeColor = System.Drawing.Color.Red;
        if (picksMade())
        {
            displayCurrentPicks();
        }
    }
    else
    {
        if (picksMade())
        {
            btnEdit.Enabled = true;
            btnSubmit.Enabled = false; 
            btnSubmit2.Enabled = false;
            displayCurrentPicks();
            lblSuccess.Text = "Viewing your current picks";
            lblSuccess.ForeColor = System.Drawing.Color.Green;
            if (Session["Success"] != null && Session["Success"].ToString() != String.Empty)
            {
                lblSuccess.Text = Session["Success"].ToString();
                lblSuccess.ForeColor = System.Drawing.Color.Green;
                Session.Remove("Success");
            }
        }
        else
        {
            btnEdit.Enabled = false;
            btnSubmit.Enabled = true; btnSubmit2.Enabled = true;
            displayCreatePicks();
            lblSuccess.Text = "Create your picks for this week";
            lblSuccess.ForeColor = System.Drawing.Color.Green;
        }
    }
} 
```

问题是，当我使用 ASP.NET 开发服务器对其进行测试时，这段代码运行良好。当我将它发布到我的实时服务器时，它有一些不同的行为。

我有一个使用此签名将数据插入数据库的 Web 方法：

```
[WebMethod]
public static void savePicks(List<string> Points, List<string> Teams, List<string> TieBreaker) 
```

同样，它在测试服务器上运行并且运行良好。问题是，当方法返回时，它应该刷新页面，并且确实如此，但是在实时服务器上，我的 page_load 事件中的代码没有运行？还是以不同的方式运行？它从不调用 displayCurrentPicks() 方法？或者如果确实如此，它运行不正确？除了它在测试服务器上完美运行。

我无法通过代码检查此单步执行，因为当我这样做时，它在测试服务器上运行良好。实时服务器托管在 Godaddy 上。

我已经尝试了一切。我已经尝试在正确的方法之后进行页面刷新，并在我的 javascript 中强制 page_load 事件再次运行。没有任何效果。我已经在这几天了。而且我确信我的所有代码都在发布。我已经完成了所有通常的“愚蠢检查”。数据正在进入数据库，当有数据时，picksMade() 函数返回 true。页面刷新时数据就在那里。

为什么实时服务器不运行我发布到它的代码？为什么它运行不同的东西？还是表现不同？我知道它是不同的服务器，但它不应该运行相同的代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:25:56.357

函数 validTime() 究竟做了什么？如果您正在检查特定的时间限制，则可能是您的开发服务器设置为您的本地时区，这就是它工作的原因，但在您的实时服务器上，时区可能不同。不过只是猜测。

# php - 插入 MySQL 数据库

> ID：11455060
> 
> 赞同：1
> 
> 时间：2012-07-12T15:17:50.613
> 
> 标签：php, mysql

我正在尝试将数据插入 MySQL 数据库。对于插入的每个数据，我希望添加用户名，以便跟踪用户插入该数据。下面是我的示例查询，但用户名没有插入。

```
$username = $_SESSION['log']['username'];

$Query = "INSERT INTO core_modules 
          (username,courseID,title,credits) 
           VALUES ('$username',SELECT ID,title,credits FROM module 
               WHERE ID IN ('CS4150','CS4403','CS4407','CS4501','CS4504','CS4614'))";
mysql_query($Query);
echo $Query. '<br />'; 
```

这就是我的数据库的样子，我需要将用户名插入到插入的每条记录中。

![在此处输入图像描述](../Images/f6dca0f625bcf26a1bd17cfc8af2eeb9.png)

请问我该怎么办？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T15:19:31.097

```
 INSERT INTO core_modules (username,courseID,title,credits) 
 SELECT '$username', ID, title, credits 
 FROM module 
 WHERE ID IN ('CS4150','CS4403','CS4407','CS4501','CS4504','CS4614') 
```

# objective-c - 仪器/泄漏显示 [_NSCoreManagedObjectID allocateBatch:Count:]

> ID：11455062
> 
> 赞同：0
> 
> 时间：2012-07-12T15:17:52.873
> 
> 标签：objective-c, ios, core-data

当我在一个有表格视图的导航控制器中来回移动时，我遇到了崩溃。我使用仪器查看发生了什么，我发现当我回到第一个视图控制器时，我得到了
`[_NSCoreManagedObjectID allocateBatch:Count:]`泄漏。这是 Instruments 的屏幕截图![在此处输入图像描述](../Images/69ab892972dd9cad2a795ea739b028f7.png) 我来回走动的次数越多，泄漏的次数就越多。这会是什么原因？我在 viewdidunload 中将 nsfetchedresultcontroller 设置为 nil，但是当我在选项卡之间切换时，我没有将它设置为 nil。

谢谢！更新：我做了一些测试，我发现如果我评论

```
 Person *person = [self.fetchedResultsController objectAtIndexPath:indexPath]; 
```

在

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"personCell";
    PeopleListTableViewCell *cell = (PeopleListTableViewCell *) [tableView 

    dequeueReusableCellWithIdentifier:CellIdentifier];
        if (cell == nil) {
            cell = [[PeopleListTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        }

        // Configure the cell...

          Person *person = [self.fetchedResultsController objectAtIndexPath:indexPath];
           cell.personName.text = person.fullname;
            NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
            [dateFormatter setDateFormat:@"MM-dd-yyyy"];
           NSDate *tmpDate = person.dateofbirth;
            NSString *strDate = [dateFormatter stringFromDate:tmpDate];
            cell.personDateOfBirth.text = strDate;
            NSString *imgURL=[person.imageurl stringByAppendingString:@"?maxheight=120&maxwidth=156"];
            [cell.personImage setImageWithURL:[NSURL URLWithString:imgURL] placeholderImage:[UIImage imageNamed:@"placeholder.png"]];

            return cell;
    } 
```

泄漏消失。我将此 tableviewcontroller 用作不同 uivewcontroller 中 tableview 的委托。

这就是我在单击按钮以显示此表时设置它的方式

```
- (void)signPeople
{
    self.signInfoView.hidden = YES;
    self.pplTableView.hidden = NO;

    self.hud = [[ATMHud alloc]initWithDelegate:self];

    [self.hud setActivity:YES];
    self.hud.shadowEnabled = YES;
    [self.view addSubview:self.hud.view];
    [self.hud show];

    if(!self.pplListTableViewController){
        self.pplListTableViewController = [[PeopleListTableViewController alloc]init];
    }

    self.pplListTableViewController.delegate = self;
    self.pplTableView.delegate = self.pplListTableViewController;
    self.pplTableView.dataSource = self.pplListTableViewController;
        //shows the People List 
    [self.pplListTableViewController setupFetchResultsController];
    [self.pplTableView reloadData];
    [self.pplTableView scrollRectToVisible:CGRectMake(0, 0, 1, 1) animated:YES]; //scroll to top
} 
```

我试图在这里和那里消除表格视图，并且还释放标签和人员类没有任何帮助。是什么让人民阶层无法获得自由。谢谢！

# html - 无法居中 div

> ID：11455064
> 
> 赞同：1
> 
> 时间：2012-07-12T15:17:54.137
> 
> 标签：html, css, xhtml

我在为网站设置菜单时遇到问题。整个网站以margin: auto为中心。由于某种原因，菜单不集中，因为它是一个包含链接、按钮的 div。每个按钮链接都有一个背景图像。这是因为按钮的图像宽度为 315 像素，并且包含覆盖图像。例如，当用户按住此图像时，图像向左移动 105px 并显示鼠标悬停选项。（查看代码）

这是 .html ：（不要介意按钮的 id 名称，不想改变 :D 是的，我是瑞典人）

```
 <body>
    <!--Banner-->
    <img src="/header/picture.png" />
    <img src="/header/banner.png" />

    <!--Pre-loads the images for menu-->
    <img src="/header/start.png" style="display: none;" />
    <img src="/header/bestall.png" style="display: none;" />
    <img src="/header/priser.png" style="display: none;" />
    <img src="/header/omoss.png" style="display: none;" />
    <img src="/header/support.png" style="display: none;" />
    <img src="/header/filarkiv.png" style="display: none;" />

    <!--Menu-->
    <div id="menu">
    <a href="index.php" id="startknapp"></a>
    <a href="index.php" id="priserknapp"></a>
    <a href="index.php" id="bestallknapp"></a>
    <a href="index.php" id="omossknapp"></a>
    <a href="index.php" id="supportknapp"></a>
    <a href="index.php" id="filarkivknapp"></a>
    <img src="/header/box.png" id="box" />
    </div>

    <div id="content">
    <p>Hi!</p>
    <p>This is one paragraph</p>
    <p>And this is another.</p>
    </div>
    </body> 
```

这就是我在 CSS 中为菜单设置按钮的方式：

```
 /*Startknappen*/
    #startknapp
    {
        position: absolute;
        left: 0px;
        width: 105px;
        height: 35px;
        text-decoration: none;
        background-image:url(start.png);
    }

    #startknapp:hover 
    {
        background-position: -105px 0; 
    }

    #startknapp:active 
    {
        text-decoration: none;
    }

    /*Priserknappen*/
    #priserknapp
    {
        position: absolute;
        left: 105px;
        width: 105px;
        height: 35px;
        text-decoration: none;
        background-image:url(priser.png);
    }

    #priserknapp:hover 
    {
        background-position: -105px 0;
    }

    #priserknapp:active 
    {
        text-decoration: none;
    }

    ... and so on for the other buttons... 
```

这是一些.css：

```
 #html, body 
    {
        top: 0px;
        right: 0px;
        bottom: 0px;
        left: 0px;
        width: 800px;
        height: 800px;
        margin: auto;
    }

    #menu
    {
        height: 35px;
        width: 800px;
    }

    #content
    {
        position: absolute;
        width: 800px;
        background-color: ;
    } 
```

现在的问题是，如上所述，菜单不会集中。但是，当我做 position: absolute; 对于#menu，它确实集中。唯一的问题是内容与菜单重叠，我不希望这样。我希望内容在菜单底部之后开始 0px。以下是它的外观图片：

不会集中：http: [//imageshack.us/photo/my-images/15/leftra.png](http://imageshack.us/photo/my-images/15/leftra.png)

位置：绝对：http: [//imageshack.us/photo/my-images/443/centerh.png](http://imageshack.us/photo/my-images/443/centerh.png)

希望有人可以帮助我解决这个问题。提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:23:59.517

还没有关闭，我不知道您是否还没有关闭正文标签，或者只是将其从复制粘贴中删除。

此外，如果您将菜单项设置为绝对位置，则#menu 的样式应包括“位置：相对”，这样它们将相对于菜单容器而不是页面主体定位。

另外，我不确定这段代码会做什么：

```
#html, body 
    {
        top: 0px;
        right: 0px;
        bottom: 0px;
        left: 0px;
        width: 800px;
        height: 800px;
        margin: auto;
    } 
```

您试图将其以宽度居中定位，但随后说它应该延伸到每个角落，其中部分显示“顶部：0；右侧：0 等”

有这样的包装器会更好：

HTML：

```
<div id="wrapper">
    All content in here
</div> 
```

CSS：

```
#wrapper { margin: 0 auto; width: 800px; } 
```

*编辑*：也刚刚注意到，很高兴看到其他人使用 Ubuntu；）

*Edit2*：如果您使用浮动而不是“位置：绝对”定位导航项目会更好，有关更多信息，请参见[此处](http://www.alistapart.com/articles/css-floats-101/)

有关您可能还需要的定位的更多信息，请参见[此处](http://www.alistapart.com/articles/css-positioning-101/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T17:01:56.830

正如 Sean Dunwoody 所说，您需要添加 position: relative to div.menu。使用 position: absolute 时，项目定位到要赋予位置属性的最后一个项目。由于除了菜单项之外您没有定位任何 div，它们正在通过 div 的层次结构向上移动并相对于 body 标签定位自己。通过添加 position: relative to div.menu，你告诉 div.menu 它需要在哪里（即，相对于其他所有内容），然后按钮知道它们需要在哪里（绝对定位于它们的父 div，div 。菜单）

# sqlite - 如何在 Fluent NHibernate + SQLite 中使用批处理

> ID：11455065
> 
> 赞同：0
> 
> 时间：2012-07-12T15:17:56.333
> 
> 标签：sqlite, nhibernate, fluent-nhibernate, batch-processing

有人尝试使用 Fluent NHibernate 与 SQLite 配对启用批处理支持吗？我试过了

```
Fluently.Configure()
.Database(SQLiteConfiguration.Standard
.UsingFile(CreateOrGetDataFile()).AdoNetBatchSize(128))
.Mappings( 
m => m.FluentMappings.AddFromAssembly(Assembly.Load("Sauron.Core"))
.Conventions.Add(PrimaryKey.Name.Is(p => "Id"), ForeignKey.EndsWith("Id")))
.BuildSessionFactory(); 
```

但没有用。

我也尝试在 ISession 和 IStatelessSession 上设置批处理大小，但我收到异常说批处理被禁用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T01:12:08.203

SQLite 尚不支持批处理。它仅适用于 SQLServer 和 Oracle。

不过，您不一定要等待这种情况发生。您可以实现`IBatcherFactory`和`IBatcher`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:04:44.740

您使用什么 id 生成策略？服务器生成的（身份、序列）不允许批处理。

# css - 自动高度 div 保持到其内容

> ID：11455075
> 
> 赞同：1
> 
> 时间：2012-07-12T15:18:34.433
> 
> 标签：css, html

我有一个 div 持有人，其中有一组 div 作为孩子。问题是内容随高度而变化，具体取决于其子项的内容，那么如何将持有人 div 的 css 属性设置为自动调整为其子项的高度总和？

我已经尝试了 div 持有者 css 的几种配置，例如 min-height、padding:auto 等。但没有成功。

我在这里放置了代码：http: [//jsfiddle.net/nuAQY/](http://jsfiddle.net/nuAQY/)

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T15:20:59.393

只需删除 child`div`的高度。

当您声明高度时，它表示无论内容是什么，它始终是那个高度，所以当内容改变时，孩子的高度不会改变，所以持有人的高度也不会改变。

```
.holder {
    width:250px;
    min-height:50px;
    border:1px solid #EDEDED;
}

.header {
    width:100%;
}
.body {
    width:100%;
}
.footer {
    width:100%;
} 
```

​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T15:20:36.027

创建一个名为 clear 的类，并将其放在您的最后一个 div 孩子之后，但仍位于持有人中。

像这样：

```
.clear { width: 100%; height: 0px; clear: both; display: block; } 
```

然后...

```
<div class="holder">
<div class="child"></div>
<div class="child"></div>
...
<div class="child"></div>
<div class="clear"></div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T15:30:53.577

问题是您已在所有 DIV 上设置了高度，但内容超过了该高度，因此它用完了。您要么必须删除高度，要么`overflow:auto`为每个 DIV 设置，但随后您将获得一个滚动条。如果要隐藏多余的内容，可以使用`overflow: hidden`

# java - 解析文本以查找地理名称

> ID：11455076
> 
> 赞同：2
> 
> 时间：2012-07-12T15:18:35.743
> 
> 标签：java, parsing, gis

我想编写一个解析器，在大量文本中搜索一些城市名称或其他地理主题。例如`Sydney`，, ... `Tower Bridge`_`Munich`

我的想法是向本地数据库请求一些带有地理信息的单词（例如[http://www.geonames.org/](http://www.geonames.org/)，我可以在那里下载一些城市信息），如果有命中，数据库会响应一些 lan 和 lon 坐标。单词必须以大写字母开头并且长度必须>2

但我认为表现非常糟糕。一篇文章包含 10 到 100 个单词。有没有更好的方法来查找有关文本的地理信息？

也许有一个更好的数据库，包含更多的地理信息？

问候，命运

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:22:08.910

您可能希望使用诸如[Lucene](http://lucene.apache.org/core/)之类的库来索引文本文件，然后搜索列表中的每个城市。结果将为您提供文件名和术语的位置（带有周围的文本片段）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:25:41.113

也许尝试使用谷歌 JSON API：[搜索 Baltimore MD](http://maps.googleapis.com/maps/api/geocode/json?address=Baltimore%20MD&sensor=true)

# c++ - PoDoFo 从pdf中提取文本+坐标

> ID：11455081
> 
> 赞同：2
> 
> 时间：2012-07-12T15:19:01.697
> 
> 标签：c++, pdf, coordinates, podofo

我一直在尝试使用 PoDoFo C++ 库来提取文本和行（以及它们各自的坐标）。但我没有办法做到这一点。

这是我到目前为止所拥有的：

```
#include <iostream>
#include <stdio.h>
#include <vector>
#include <podofo/podofo.h>
using namespace PoDoFo;
using namespace std;

int main( int argc, char* argv[] )
{
    const char* filename = "hello.pdf";
    PdfVecObjects *x = new PdfVecObjects();
    PdfParser parser(x, filename);
    parser.ParseFile("hello.pdf");

    for (TIVecObjects obj = x->begin(); obj != x->end(); obj++){
        PdfObject * a = x->RemoveObject(obj);
        // THIS IS MY PROBLEM VVVVVVVVVV
        cout << a->Reference().ToString() << endl;
    }

    return 0;
} 
```

然而，这只给了我难以置信的基本信息（似乎是对象编号）

```
DEBUG: Size=12
DEBUG: Reading numbers: 0 12
DEBUG: Reading XRef Section: 0 with 12 Objects.
DEBUG: Size=12
DEBUG: Reading numbers: 0 12
DEBUG: Reading XRef Section: 0 with 12 Objects.
1 0 R
2 0 R
3 0 R
4 0 R
5 0 R
6 0 R
7 0 R
8 0 R
9 0 R
10 0 R
11 0 R 
```

我想打印出一个对象的坐标，以及它是一行还是文本。如果是文本，我也希望能够打印出文本。有没有比我更了解这个库的人知道我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-28T13:42:52.863

此[答案](https://stackoverflow.com/a/11719431/4086)将向您展示如何提取文本。

要获取文本定位信息，您还必须处理以下命令：

`Tc`, `Tw`, `Tz`, `TL`, `T*`,`Tr`和`Tm`.

您肯定需要从 Adob​​e 下载[PDF 规范](http://www.adobe.com/devnet/pdf/pdf_reference.html)以获取所有详细信息。有一章专门介绍文本处理。值得您花时间打印出该章节，因为您会经常提及*它*。你需要知道的一切都在那里，但并不总是显而易见的。

您还需要使用一点线性代数。不过，没什么太复杂的。

由于有许多方法可以实现相同的结果，因此彻底实施所有命令非常重要，即使您要处理的文档似乎不需要某些功能。例如：我遇到了一个将所有文本大小设置为一个点的文档，这导致我所有的计算都失败了，直到我意识到它正在使用文本缩放因子来设置实际的字体大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-13T02:39:02.197

使用 PoDoFo 工具“podofotxtextract”它为您提供 x,y 坐标（PoDoFo 包的工具文件夹）。从 Pdf 中提取文本。

# c# - 在 FTP 上的现有网站下部署 asp.net 网站？

> ID：11455095
> 
> 赞同：1
> 
> 时间：2012-07-12T15:19:42.450
> 
> 标签：c#, asp.net, ftp

我在下面有一个网站，我想部署另一个 Web 应用程序。所以我在 ftp 站点中创建了一个文件夹，并将我的所有文件都转储到其中。

例子：

![在此处输入图像描述](../Images/332c1ddaf34797e4f4e7423ff5ba91a6.png)

现在尝试访问我的应用程序 default.aspx 文件时出现以下错误

```
Configuration Error

Description: An error occurred during the processing of a configuration file required to service this request. Please review the specific error details below and modify your configuration file appropriately. 

Parser Error Message: It is an error to use a section registered as allowDefinition='MachineToApplication' beyond application level.  This error can be caused by a virtual directory not being configured as an application in IIS.

Source Error: 

Line 33:       </assemblies>
Line 34:     </compilation>
Line 35:     <authentication mode="Forms">
Line 36:       <forms loginUrl="~/Account/Login.aspx" timeout="2880" />
Line 37:     </authentication> 
```

我不知道根站点asp.net版本，但我在asp.net 3.5上开发

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:22:25.417

您需要将子文件夹设置为 IIS 应用程序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:22:28.350

我相信您需要进入 IIS 并确保将“OnlineReport”文件夹配置为应用程序

# php - Codeigniter 函数跳过

> ID：11455102
> 
> 赞同：0
> 
> 时间：2012-07-12T15:20:05.120
> 
> 标签：php, codeigniter

嗨，这是一个简单的问题，但是我现在已经盯着它看了足够长的时间，意识到我根本没有看到错误。如果有人能看到哪里出了问题，我将非常感激。

```
public function create()
{
$this->load->model('ticket_model');

if($_POST)
    {
    // validate form
    if($this->_validate())
        {
        // save updates                                 
        foreach($_POST as $key => $value){if(!is_array($value)) $_POST[$key] = htmlspecialchars($value);}

        if ($_POST['subject'] == '')    $body_data['error'][] = "You did not enter a subject.";
        if ($_POST['priority'] == '')   $body_data['error'][] = "You did not select a priority.";
        if ($_POST['status'] == '')     $body_data['error'][] = "You did not select a status.";
        if ($_POST['ipAddress'] == '')  $body_data['error'][] = "You did not enter a ipAddress.";
        if ($_POST['text_area'] == '') $body_data['error'][] = "You did not enter a message.";
        else
            {
            if (filter_var($_POST['ipAddress'], FILTER_VALIDATE_IP,  FILTER_FLAG_IPV4) == FALSE) $body_data['error'][] = "IP Address is not valid IPV4 Address.";
            if (filter_var($_POST['ipAddress'], FILTER_VALIDATE_IP,  FILTER_FLAG_NO_PRIV_RANGE) == FALSE) $body_data['error'][] = "IP Address cannot be from RFC1918 private space.";
            if (filter_var($_POST['ipAddress'], FILTER_VALIDATE_IP,  FILTER_FLAG_NO_RES_RANGE) == FALSE) $body_data['error'][] = "IP Address cannot be from reserved range.";
            }
        if ($_FILES['filename']['name'] != '')
            {
            if ($_FILES['filename']['size'] > '1024000')
                {
                $body_data['error'][]                       = "The file you uploaded is too large.";

                unlink($_FILES['filename']['tmp_name']);

                $body_data['ticket_list']       = $this->ticket_model->list_ticket();
                $body_data['ticket_details']    = $this->ticket_model->get_ticket($ticket_id);
                $body_data['ticket_summary']    = $this->ticket_model->list_ticket_summary($ticket_id);

                $body_data['precan_list']       = $this->ticket_model->list_messages();
                $body_data['users_list']        = $this->ticket_model->list_users();
                $foot_data['accordian_active'] = 5;

                $this->load->view('head',$head_data);
                $this->load->view('sidebar/service',$head_data);
                $this->load->view('ticket/edit',$body_data);
                $this->load->view('foot',$foot_data);
                return;
                }
            else
                {
                //the file is under the specified size. so copy it from temp to import folder and proccess
                $thisFileHumanName      = $_FILES['filename']['name'];
                $thisFileSize           = $_FILES['filename']['size'];
                $thisServerFileName     = strtoupper(uniqid('A'));
                $thisFileType           = $_FILES['filename']['type'];

                $temp_file_location = $this->config->item('rootpath').'/assets/ticketuploads/'.$thisServerFileName;

                if (!move_uploaded_file($_FILES['filename']['tmp_name'], $temp_file_location))
                    {
                    $body_data['error'][]                       = "File could not be moved due to a permissions error.";

                    unlink($_FILES['filename']['tmp_name']);

                    $body_data['ticket_list']       = $this->ticket_model->list_ticket();
                    $body_data['ticket_details']    = $this->ticket_model->get_ticket($ticket_id);
                    $body_data['ticket_summary']    = $this->ticket_model->list_ticket_summary($ticket_id);

                    $body_data['precan_list']       = $this->ticket_model->list_messages();
                    $body_data['users_list']        = $this->ticket_model->list_users();
                    $foot_data['accordian_active'] = 5;

                    $this->load->view('head',$head_data);
                    $this->load->view('sidebar/service',$head_data);
                    $this->load->view('ticket/edit',$body_data);
                    $this->load->view('foot',$foot_data);
                    return;
                    }
                }
            }

        //clean error array
        $body_data['error']                     = array_filter($body_data['error']);

        if ($body_data['error'])
            {
            $body_data['ticket_list']       = $this->ticket_model->list_ticket();
            $body_data['ticket_details']    = $this->ticket_model->get_ticket($ticket_id);
            $body_data['ticket_summary']    = $this->ticket_model->list_ticket_summary($ticket_id);

            $body_data['precan_list']       = $this->ticket_model->list_messages();
            $body_data['users_list']        = $this->ticket_model->list_users();

            unlink($_FILES['filename']['tmp_name']);

            $foot_data['accordian_active'] = 5;

            $this->load->view('head',$head_data);
            $this->load->view('sidebar/service',$head_data);
            $this->load->view('ticket/edit',$body_data);
            $this->load->view('foot',$foot_data);
            return;
            }
        else
            {   

            $_POST['userId'] = $this->session->get_user_id();

            $thisMessageId = $this->ticket_model->save_message($_POST);

            if ($_FILES['filename']['name'] != '')
                {
                //set variables for save
                $_POST['file_path'] = $temp_file_location;
                $_POST['file_name'] = $thisFileHumanName;

                $_POST['file_size'] = $thisFileSize;
                $_POST['file_type'] = $thisFileType;
                $_POST['messageId'] = $thisMessageId;

                $this->ticket_model->save_upload($_POST);
                }
            $this->ticket_model->save_ticket($_POST);

            redirect(base_url().'ticket/');
            return;
            }
        }
    }
$body_data['ticket_list']        = $this->ticket_model->list_ticket();
$body_data['message_list']       = $this->ticket_model->list_message($ticket_id);
$body_data['customer_list']      = $this->ticket_model->list_customers();
$body_data['users_list']         = $this->ticket_model->list_users();

$foot_data['accordian_active'] = 5;
$foot_data['contact_search']   = true;
$this->load->view('head',$head_data);
$this->load->view('sidebar/service',$head_data);
$this->load->view('ticket/create',$body_data);
$this->load->view('foot',$foot_data);
return;
} 
```

这是我的代码，一切进展顺利，除了我保存上传的部分，因为似乎没有任何东西在触发模型，即使从提交中发布了一个文件并且那里发布的文件名是`!= ''`……例如

```
if ($_FILES['filename']['name'] != '')
{
    //set variables for save
    $_POST['file_path'] = $temp_file_location;
    $_POST['file_name'] = $thisFileHumanName;

    $_POST['file_size'] = $thisFileSize;
    $_POST['file_type'] = $thisFileType;
    $_POST['messageId'] = $thisMessageId;

    $this->ticket_model->save_upload($_POST);
} 
```

如果这是愚蠢的错误，我深表歉意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:32:52.320

你为什么这样做？Codeigniter 有一个用于上传文件的内置[类。](http://codeigniter.com/user_guide/libraries/file_uploading.html)您还应该使用[输入类](http://codeigniter.com/user_guide/libraries/input.html)而不是`$_POST`. 它会让事情变得容易很多！

至于你的代码。您实际上是在设置 $_POST 变量并尝试在`save_ticket`. 你不能那样做。

> 预定义的 $_POST 变量用于从使用 method="post" 发送的表单中收集值

您正试图以相反的方式使用它。

因此，要使其工作，将 $_POST 更改为 $something 并且它应该可以工作，但它仍然不是要走的路。

```
//set variables for save
$something['file_path'] = $temp_file_location;
$something['file_name'] = $thisFileHumanName;

$something['file_size'] = $thisFileSize;
$something['file_type'] = $thisFileType;
$something['messageId'] = $thisMessageId;

$this->ticket_model->save_upload($something); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T16:00:07.070

没有这一套…………`enctype="multipart/form-data"`

脸红到此为止。

# uiimageview - Photoshop png背景显示分层在iPhone模拟器

> ID：11455104
> 
> 赞同：0
> 
> 时间：2012-07-12T15:20:05.777
> 
> 标签：uiimageview, interface-builder, background-image, photoshop

我在 Photoshop CS6 中创建了一个渐变 png，它在我的 windows 盒子上看起来很完美。[我有 mac 作为远程盒子，所以在那个盒子上照片编辑是一个耗时的选项]

然而，当我把它放在我的开发 mac 上时，我看到了很多以前从未见过的层。

它看起来没有像素化，但肯定不是很好。这张图片看起来像土星环，渐变的层次让美丽岌岌可危。它看起来很丑。

它的尺寸为 320X640，ppi 为 326。我还为ratina制作了@2x（640X960），但结果相同。

[我也尝试了一些已经可用的在线背景，但它们看起来都一样。最终，我想要我自己的背景，因为它有徽标，并且一切都按照我的意愿放置]

我该怎么办？

（我已经尝试过 XCode IB 查看模式选项（重绘、方面适合等整个列表） - 我直接在 IB 中设置它，从那时起它本身就很难看，所以请不要问我如何在 XCode 中调用它. 它在 mac Core Image Fun House 软件预览上也同样丑陋。）

# html - 直接从浏览器中的 URL 联系 API

> ID：11455105
> 
> 赞同：1
> 
> 时间：2012-07-12T15:20:09.083
> 
> 标签：html, api, url, post

我试图了解 POST 和/或 GET 方法在实际浏览器中的工作方式。

我正在尝试联系需要 API 密钥、您希望在他们身边使用的方法以及至少一个 IP 地址的 API。

我最初的想法是做这样的事情：

我觉得我在正确的轨道上，它做了一些事情并得到一个错误，而不是告诉我页面不存在。我期待 JSON 或 XML 作为响应，因为 API 支持两者，但我得到了这个错误：

```
This page contains the following errors:
error on line 1 at column 1: Document is empty
Below is a rendering of the page up to the first error. 
```

在进一步研究 API 的文档后，我发现一些方法是使用 HTML 表单 application/x-www-form-urlencoded 调用的，并且资源模型作为表单元素给出。

我试图研究这意味着什么，看看问题是什么，并找到了这个网站[http://www.w3.org/TR/xforms11/](http://www.w3.org/TR/xforms11/)但我仍然不清楚。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:38:06.960

这似乎意味着应用程序需要一个 POST 方法，但您正在使用 GET 方法进行请求（当您使用查询字符串时）。

由于您不能只使用地址栏使用 POST 进行浏览器请求，因此您可能需要：

*   构造一个简单的 JS 函数，改为使用该方法执行 xmlhttprequest 请求，并从控制台运行它；
*   创建一个简单的 HTML 页面，自动执行上述过程，允许您进行 POST 调用；
*   [改用 CURL](http://curl.haxx.se/)，它是测试这类请求的好工具。

# java - 是否可以通过在重新安装后保存并重新加载插件目录来重新加载 MyEclipse 的插件？

> ID：11455107
> 
> 赞同：0
> 
> 时间：2012-07-12T15:20:19.377
> 
> 标签：java, plugins, ide, myeclipse

设置场景...所以我使用的是 MyEclipse 10 (Spring) 版本 | Windows 7的

我的 MyEclipse 安装不正常。我开始加载，出现对话框……我指向我的工作区……然后它开始加载。在大约 1/3 的加载方式后挂起。它只是坐在那里，就像它仍在加载一样，但它不会继续。所以看来我必须重新安装。我害怕必须重新安装我拥有的所有插件，所以问题是......

是否可以通过在重新安装后保存并重新加载插件目录来重新加载 MyEclipse 的插件？

理想情况下，我只想复制插件目录，重做安装，将旧插件“粘贴”回新安装，然后完成..或者至少完成插件。然后显然从工作区导入我的项目。

还是我要解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T04:34:42.010

如果您再次运行安装程序，您将获得修复安装的选项，然后，如果选择修复，则还有一个修复或恢复安装的选项。尝试修复选项，它将尝试保留附加组件。

# javascript - 有没有办法从浏览器中检测用户的 Mac 硬件型号？

> ID：11455108
> 
> 赞同：1
> 
> 时间：2012-07-12T15:20:30.833
> 
> 标签：javascript, jquery, browser, user-agent

我想看看是否有人知道是否可以直接从浏览器检测用户的 Mac 计算机型号。又名“MacBook Pro（2007 年中/末）”或“MacBook Air（2008 年末或更新）”。

这可能是一个长镜头，但由于 Mac 浏览器通过 userAgent (http://www.quirksmode.org/js/detect.html) 提供操作系统，我认为可能会有机会。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:24:24.813

没有。标题`User-Agent`提供了*一些*信息，但不多：

> Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.47 Safari/536.11

您可以通过访问[http://whatsmyuseragent.com/](http://whatsmyuseragent.com/)或将`User-Agent`标头转储为您最喜欢的服务器端语言来自行测试。

类似的信息可以在`navigator`JavaScript 的对象中找到：

```
appCodeName: "Mozilla"
appName: "Netscape"
appVersion: "5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.47 Safari/536.11"
cookieEnabled: true
geolocation: Geolocation
language: "en-US"
mimeTypes: MimeTypeArray
onLine: true
platform: "MacIntel"
plugins: PluginArray
product: "Gecko"
productSub: "20030107"
userAgent: "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.47 Safari/536.11"
vendor: "Google Inc."
vendorSub: ""
__proto__: Navigator 
```

获取更多信息的唯一方法是使用某种浏览器插件。

# ios - 从自定义表格单元中实例化图像选择器

> ID：11455113
> 
> 赞同：0
> 
> 时间：2012-07-12T15:20:48.080
> 
> 标签：ios, uitableview, uiimagepickercontroller, modalviewcontroller

在我的应用程序中，我有一个表格视图控制器，它创建了几个自定义单元格，我已经为其创建了视图控制器 (.xib) 和类。在其中一个单元格中，有一个按钮触发一种方法（在“内部触摸”），该方法假定向用户呈现图像选择器。我已经使用文档中的苹果标准代码来展示媒体选择器，但它似乎不起作用。我尝试将单元格用作创建媒体选择器的委托和视图控制器，以及作为媒体选择器的委托，但它似乎不起作用。我还尝试过隐含创建单元格的 UITableView 的对象，并将其用作委托和视图控制器，这也不起作用。我已经添加了相关方法的代码。关于如何做到这一点的任何建议？

处理“内部修饰”按钮的方法（在自定义单元格类中使用他的方法）：

```
- (IBAction)TakeNewPicture:(id)sender {
    [self startCameraControllerFromViewController:self usingDelegate:self];
} 
```

startCameraController... 方法（也在单元的类中）：

```
- (BOOL) startCameraControllerFromViewController: (UIViewController*) controller
                                   usingDelegate: (id <UIImagePickerControllerDelegate,
                                                   UINavigationControllerDelegate>) delegate {

    if (([UIImagePickerController isSourceTypeAvailable:
          UIImagePickerControllerSourceTypeCamera] == NO)
        || (delegate == nil)
        || (controller == nil))
        return NO;

    UIImagePickerController *cameraUI = [[UIImagePickerController alloc] init];
    cameraUI.sourceType = UIImagePickerControllerSourceTypeCamera;

    // Displays a control that allows the user to choose picture or
    // movie capture, if both are available:
    cameraUI.mediaTypes =
    [UIImagePickerController availableMediaTypesForSourceType:
     UIImagePickerControllerSourceTypeCamera];

    // Hides the controls for moving & scaling pictures, or for
    // trimming movies. To instead show the controls, use YES.
    cameraUI.allowsEditing = YES;

    cameraUI.delegate = delegate;

   [controller presentModalViewController: cameraUI animated: YES];
    //[[[[UIApplication sharedApplication] keyWindow] rootViewController] presentModalViewController:cameraUI animated:YES];
    return YES;
} 
```

谢谢你的时间！非常感谢任何支持：]（Objective-c 风格的笑脸）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:57:12.040

显然这是行不通的，因为 a `UITableViewCell`or`UITableView`不是`UIViewController`你需要调用的对象`presentModalViewController:animated:`。我认为最好的解决方案是让您的视图控制器处理单元格按钮上的所有触摸事件。

因此，您应该将`takeNewPicture:`（方法应以小写字母开头）操作方法放在视图控制器类中，并将视图控制器指定为按钮的目标。在 action 方法中，您需要使用`sender`参数来识别用户点击的单元格。最好的方法是`tag`为每个按钮分配一个等于表格视图中该单元格行索引的按钮。然后，您可以使用`[sender tag]`标识包含被点击按钮的单元格的索引路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:58:53.967

首先我希望你不要在模拟器中运行它，因为你知道它没有摄像头:)

您说这`TakeNewPicture`是在自定义单元格类中，并且在其中您调用`[self startCameraControllerFromViewController:self usingDelegate:self];`
Were self 是自定义单元格而不是 UIViewController..

我建议将此代码移动到 viewController，当您创建一个单元格时，只需执行

```
[[cell button] addTarget:self action:@selector(TakeNewPicture:) forControlEvents:UIControlEventTouchUpInside]; 
```

# jquery - Twitter Bootstrap 模式 - 隐藏任何

> ID：11455118
> 
> 赞同：6
> 
> 时间：2012-07-12T15:21:03.467
> 
> 标签：jquery, html, twitter-bootstrap

我目前正在使用 Bootstrap 将视频放入模态。一切都是通过 cms 生成的（所以我无法控制将显示多少视频。）

一切都很好（我必须给每个模态自己的 ID 并且一切正常）。问题是，当您关闭模式并且视频正在运行时，视频（和声音）继续在后台运行。

为了避免这种情况，当使用 x 按钮关闭模式时，我会刷新模式中的 html，如下所示：

```
$('button.close').click(function(){
    var divcible=$(this).parent().parent().find(".modal-body");
    var html = divcible.html()
    divcible.html("")
    divcible.html(html)
}) 
```

我的问题是，如果用户单击背景，Html 将不会重置。在boostrap的网站上，他们称之为

```
$('#myModal').on('hidden', function () {
  // do something…
}) 
```

监视一个模态何时关闭，但我想知道是否有办法监视任何模态何时关闭。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-17T08:26:19.237

```
$('#myModal').on('hidden.bs.modal', function (e) {
  // do something...
}) 
```

来自 bootstrap 3.x 文档 [http://getbootstrap.com/javascript/#modals](http://getbootstrap.com/javascript/#modals)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-12T15:24:34.413

向您的模态添加一个类并使用它：

```
$('.myModal').on('hidden', function () {
   // do something…

   // edit for clarity: "that" will now reference the modal that was hidden
   var that = this;          
}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T15:38:31.327

默认情况下，大多数事件从原始事件目标[冒泡](http://www.quirksmode.org/js/events_order.html "活动顺序")`document`到元素。这也是`hidden`当模式对用户隐藏完毕时触发的事件的情况。因此，监视任何模式何时关闭的一种方法是将事件处理程序附加到`document`元素，如下所示：

```
$(document).on('hidden', function () {
  // a modal closes, so do what you want :)
}) 
```

# tcsh - tcsh：别名“which”会破坏“which cd”

> ID：11455123
> 
> 赞同：0
> 
> 时间：2012-07-12T15:21:29.220
> 
> 标签：tcsh

许多年前，我做了“which cd”，它告诉我“cd: shell built-in command”。

最近，我尝试了一下，得到：

/usr/bin/which: no cd in ([路径太长了，我不会在这里重现])

我调查并发现有人使用了别名：

```
> which which 
which   alias | /usr/bin/which --tty-only --read-alias --show-dot --show-tilde 
        /usr/bin/which 
```

一旦我取消了其中的别名，“哪个 cd”又可以正常工作了。我的问题：

*   如何让“which”同时使用别名和 shell 内置插件？

*   我找不到创建“哪个”别名的位置（例如，它不在 /etc/cshrc、~/.cshrc 等中）。这是在哪里发生的，所以我可以永久地击败/编辑它？

编辑：感谢所有帮助过的人。我想我已经弄清楚了：

*   "which" 是 tcsh 内置的，与 "/usr/bin/which" 不同：

```
> unalias which; 哪个哪个
其中：shell 内置命令。

```

*   “unalias which”几乎可以解决问题。它适用于内置函数（如上）和别名（并正确地将反斜杠识别为别名转义），如下所示：

```

> 别名 foo bar; 哪个富
foo：别名为 bar

> 其中\foo
foo：找不到命令。

```

*   别名似乎来自我系统上的 /etc/profile.d/which2.csh，这很奇怪，因为我认为 profile.d 仅适用于 sh/bash，而不适用于 csh/tcsh

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:31:57.233

至少你可以添加`alias which which`到 ~/.cshrc :P

```
:~> alias which /usr/bin/which
:~> which which
/usr/bin/which
:~> which cd
/usr/bin/which: no cd in [...]
:~> alias which which
:~> which which
which:   aliased to which
:~> which cd
cd: shell built-in command. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:33:28.820

在 Redhat 系统上，它看起来像是在 /etc/profile.d/which.sh 中定义的

要尝试我所做的无别名命令：

```
 /usr/bin/which cd
/usr/bin/which: no cd in (/usr/lib64/ccache:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin) 
```

所以我不确定你的内置输出来自哪里。

# ffmpeg - ffmpeg：转换前后的视频长度不同

> ID：11455128
> 
> 赞同：1
> 
> 时间：2012-07-12T15:21:48.623
> 
> 标签：ffmpeg, mp4, mov

我有一组需要转换为 .mp4 格式的 .mov 视频。我正在使用 ffmpeg 并运行以下命令：

```
ffmpeg -i Banking.mov -vsync -async -sameq -ac 1 -ab 64k -ar 44100 Banking.mp4 
```

输入和输出视频在时间长度上略有不同（00:03:35.407 和 00:03:35.582）。这是一个问题——我将时间提示设置在一个文件中，程序使用该文件指向特定的场景。0.1 秒的差异导致它指向错误的场景，因此使 cue set 无用。有没有可能以不同的格式保存完全相同的时间？

```
 FFmpeg version CVS, Copyright (c) 2000-2004 Fabrice BellardMac OSX universal build for ffmpegX
  configuration:  --enable-memalign-hack --enable-mp3lame --enable-gpl --disable-vhook --disable-ffplay --disable-ffserver --enable-a52 --enable-xvid --enable-faac --enable-faad --enable-amr_nb --enable-amr_wb --enable-pthreads --enable-x264 
  libavutil version: 49.0.0
  libavcodec version: 51.9.0
  libavformat version: 50.4.0
  built on Apr 15 2006 04:58:19, gcc: 4.0.1 (Apple Computer, Inc. build 5250)
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x5597b8]negative ctts, ignoring
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'Banking.mov':
  Duration: 00:03:35.6, start: 0.000000, bitrate: 1400 kb/s
  Stream #0.0(eng): Audio: pcm_s16be, 24000 Hz, stereo, 768 kb/s
  Stream #0.1(eng), 29.97 fps(r): Video: h264, yuv420p, 720x480
Output #0, mp4, to 'Banking.mp4':
  Stream #0.0, 29.97 fps(c): Video: mpeg4, yuv420p, 720x480, q=2-31, 200 kb/s
  Stream #0.1: Audio: aac, 44100 Hz, mono, 64 kb/s
Stream mapping:
  Stream #0.1 -> #0.0
  Stream #0.0 -> #0.1
Press [q] to stop encoding
frame= 6461 q=0.0 Lsize=   53181kB time=215.3 bitrate=2023.3kbits/s    
video:51437kB audio:1618kB global headers:0kB muxing overhead 0.237816% 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T22:32:47.820

从您的 FFmpeg 输出来看，输入文件的长度为 3:35.6 分钟：

> **输入#0**，mov，mp4，m4a，3gp，3g2，mj2，来自“Banking.mov”：**持续时间：00:03:35.6**

因此，时间上的差异似乎是 FFmpeg 如何看待您的文件，而不是与其转码直接相关的任何内容。您如何测量获得 00:03:35.407 的持续时间？

也就是说，一些观察结果：

*   既然您的总体目标只是转换容器格式，为什么不简单地复制视频和音频数据：

    ```
    ffmpeg -i Banking.mov -codec copy Banking.mp4 
    ```

    那应该很好地保存一切。

*   根据[文档](http://ffmpeg.org/ffmpeg.html#Advanced-options)，每个参数都有一个参数`-vsync`，`-async`所以没有任何参数可能没有任何帮助。（虽然您的 FFmpeg 版本有点旧，所以也许这对那个版本来说是正确的用法；我在输出中看不到任何错误。）

*   在那张纸条上，您使用六年前的 FFmpeg 构建有什么原因吗？您肯定会获得更好的支持，并且使用更新的版本可能会获得更好的结果。

# winforms - 如何在窗口窗体应用程序中将多个面板附加到单个 VScrallbar？

> ID：11455129
> 
> 赞同：0
> 
> 时间：2012-07-12T15:21:48.997
> 
> 标签：winforms

我在一个表单中有 5 个面板，我想将这 5 个面板添加到垂直滚动条，如果我滚动，它会从第一个面板跳到第二个面板。请建议我用 c# 编写代码。

谢谢， 兰詹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:31:34.033

尝试将五个面板放在一个面板内，其中单个面板已`AutoScroll=true;`设置。

# jqgrid - jqGrid - destroyfrozenColumns 和排序停止工作

> ID：11455132
> 
> 赞同：0
> 
> 时间：2012-07-12T15:21:53.640
> 
> 标签：jqgrid

我有一个对所有列进行排序的 jqGrid。然后我使用菜单项冻结列。然后我使用 destroyFrozenColumns 解冻网格并调用重新加载，网格上的排序已停止工作。那会是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T09:02:12.337

According to jQgrid's documentation and forum you cannot use frozen columns and sorting at the same time, so I suppose that if you are using one of the features, the other one becomes disabled no matter if you call "destroyFrozenColumns". I debugged frozen columns and it seems that the way this feature works is - it is creating a second table on top of the main one with the column you chose as frozen ones. So you cannot make a synchronized sorting between your table and the one that is dynamically created when you use frozen columns. To your question: my guess is that the second dynamically created table remains even if you use "destroyFrozenColumns".

# c++ - 向上转换到超类或接口？

> ID：11455134
> 
> 赞同：0
> 
> 时间：2012-07-12T15:22:04.983
> 
> 标签：c++, visual-c++, inheritance, dynamic-cast, upcasting

我正在尝试确认我已经在实践中工作的东西背后的理论。完整的设置有点扭曲，因为功能在不同的 dll 之间分割，但我将尝试描述这种情况：

```
class __declspec( dllexport ) BaseClass
/** This class' definition is available to everything,
 *  via .h file, .dll and .lib. */
{
    protected:
        std::string name;

    public:
        std::string GetName();
        /** This is implemented in BaseClass, and just returns this->name. */
} 
```

* * *

```
class DerivedClass: public BaseClass
/** This class is created within the executable, but is not 'visible' to other
 *  dlls - either through .h files, .lib, or anything else. */
{
    public:
        DerivedClass();
        /** This sets this->name based on its own propertied. */
} 
```

这种向上转换有效，但它需要完全访问 DerivedClass 的定义：

```
void* pointer;
DerivedClass* derived_pointer = reinterpret_class<DerivedClass*>(pointer);
BaseClass* base_pointer = dynamic_cast<BaseClass*>(derived_pointer);
base_pointer->GetName(); 
```

但是，以下内容不起作用：

```
void* pointer;
BaseClass* base_pointer = reinterpret_class<BaseClass*>(pointer);
base_pointer->GetName(); 
```

为了解决这个问题，我实现了一个接口：

```
class __declspec( dllexport ) IBaseClass
/** Fully virtual 'interface' class, in same file as BaseClass. */
{
    public:
        virtual std::string GetName() = 0;
}

class __declspec( dllexport ) BaseClass: public IBaseClass
/** This class' definition is available to
 *  everything, via .h file, .dll and .lib. */
{
    protected:
        std::string name;

    public:
        std::string GetName();
        /** This is implemented in BaseClass, and just returns this->name. */
} 
```

* * *

```
class DerivedClass: public BaseClass
/** This class is created within the executable, but is not 'visible'
 *  to other dlls - either through .h files, .lib, or anything else. */
{
    public:
        DerivedClass();
        /** This sets this->name based on its own propertied. */
} 
```

现在下面的代码*确实*有效：

```
void* pointer;
IBaseClass* ibase_pointer = reinterpret_class<IBaseClass*>(pointer);
ibase_pointer->GetName(); 
```

我有一些模糊的记忆，有人告诉我强制转换为完全虚拟的类是一种特殊情况 - 但我不记得为什么，或者在网上找到任何关于它的信息。

请帮助我 - 为什么我的代码有效？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:52:50.767

这完全依赖于类布局，它是实现定义的，不能依赖。特别是对于 MSVC，类布局的一个很好的介绍是[http://www.openrce.org/articles/full_view/23](http://www.openrce.org/articles/full_view/23)并且值得知道您可以要求带有`/d1reportSingleClassLayout`标志的类布局。

在您的情况下，由于第一个`BaseClass`没有虚拟成员，它将被放置在内部`DerivedClass`未指定的位置。我猜这`DerivedClass`有一些虚拟成员，否则我希望`BaseClass`在开始`DerivedClass`和开始`reinterpret_cast`工作。如果它有虚拟成员，您将拥有：

```
+--------------------+
|DerivedClass vtable |
|BaseClass::name     |
|DerivedClass members| 
```

通过添加接口 IBaseClass 没有任何改变；DerivedClass 仍然布局为：

```
+--------------------+
|DerivedClass vtable |
|BaseClass::name     |
|DerivedClass members| 
```

但是`DerivedClass`vtable 以 vtable 开头`IBaseClass`：

```
+---------------------+
|IBaseClass::GetName  |
|DerivedClass virtuals| 
```

所以通过`DerivedClass`vtable 调用是有效的。

# c - QUEUE 宏用法

> ID：11455136
> 
> 赞同：0
> 
> 时间：2012-07-12T15:22:07.753
> 
> 标签：c, queue

我有如下一行：

```
static STAILQ_HEAD(, my_struct) _myqueue; 
```

我以前从来没有理由使用 QUEUE 宏。是否必须在进行此调用时声明“my_struct”？

我只是问，因为稍后当我稍后在我的代码中尝试使用 my_struct 时，我得到了一个指向不完整类型消息的 derferencing 指针。我实际上是在这里编辑别人的代码，但我在任何地方都找不到 my_struct 定义

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:50:26.340

不， my_struct 不必事先声明。

当你在声明中提到一些未知的结构名称时，没有指定结构的内容，它有一个*不完整的类型*：它只是告诉编译器会有一些具有该名称的结构，但还不知道其中有什么。

您可以声明指向不完整类型的指针（这发生在 STAILQ_HEAD 宏中），因为编译器不需要知道它的大小或内容。但是在实际声明完整结构之前，您不能实例化不完整类型或取消引用指向不完整类型的指针。

# javascript - 回发后如何保持状态以突出显示 JQuery Treeview 的选定节点？

> ID：11455138
> 
> 赞同：0
> 
> 时间：2012-07-12T15:22:08.380
> 
> 标签：javascript, jquery, treeview

我在 sample.html 文件中有这样的 HTML 代码：

```
<ul id='topics' class='filetree'>
<li><span class='folder'><a href='?Lang=en&TopicID=#'>Topics</a></span>
<ul>
<li><span class='folder'><a href='?Lang=en&TopicID=1'>Topic 1</a></span>
<ul>
<li><span class='file'><a href='?Lang=en&TopicID=1.1'>Topic 1.1</a></span></li>
<li><span class='file'><a href='?Lang=en&TopicID=1.2'>Topic 1.2</a></span></li>
<li><span class='file'><a href='?Lang=en&TopicID=1.3'>Topic 1.3</a></span></li>
</ul>
</li> 
```

使用**JQuery.load**我加载 html 文件以生成 Treeview

```
<div id="LtrLeftContent">
  <script language="javascript" type="text/javascript">  
    $('#LtrLeftContent').load('sample.html', function () {  
    $("#topics").treeview();  
    $("li span").click(function () {  
    alert($(this).text());    // Get the current node text
    });  
});                 
  </script>  
</div> 
```

# 现在问题描述如下

单击任何节点后，就像下面的节点一样

```
<li><span class='folder'><a href='?Lang=en&TopicID=1'>Topic 1</a></span></li> 
```

回发发生 & 树视图无法维护所选节点的状态。

我尝试下面的代码但没有成功

**过程1：**

```
$("li span").bind('click', function() {
  //clear all clicked items if any
  $('.selected').removeClass('select');
  //set this clicked
  $(this).addClass('select');
}); 
```

**过程2：**

```
$("li span").click(function() {
  //clear all clicked items if any
  $('.selected').removeClass('selected');
  //set this clicked
  $(this).addClass('selected');
}); 
```

**问题一：** post back后如何保持选中节点的状态。用于突出显示该特定节点。

有什么用途

```
persist: "cookie",
cookieId: "navigationtree" 
```

为什么它无法维持状态？

**问题解决了**

```
$("#topics").treeview({
    persist: "location"
}); 
```

非常有用的链接，详细的描述

**网址：** [jQuery TreeView v1.4 文档](http://www.dynamicdrive.com/dynamicindex1/treeview/index.htm)

**注意：** 但不知道为什么使用波纹管代码不能正常工作

```
persist: "cookie",
cookieId: "navigationtree" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:33:37.810

回发后，一切都消失了。您需要将所选节点的 ID 存储在 cookie 中。

但是，您的节点没有 ID，因此您可以将文本或 href 存储在 cookie 中，然后在页面加载时查找 cookie，如果找到，使用 jQuery 查找节点并选择它。

# ipad - ARC环境下iPad上的UIPopoverController和UIImagePickerController

> ID：11455141
> 
> 赞同：0
> 
> 时间：2012-07-12T15:22:11.187
> 
> 标签：ipad, crash, uiimagepickercontroller, uipopovercontroller

我正在尝试在 iPad 上使用相机，为此我必须在 iPad 上使用 UIPopoverController。无论 UIPopoverController 声明是否强大，我都会遇到以下错误！

```
*** Terminating app due to uncaught exception 'NSGenericException', reason: '-[UIPopoverController dealloc] reached while popover is still visible.' 
```

以下是我的代码。谁能告诉我我做错了什么？我已经解决了关于 SO 的大多数相关问题，但其中大多数都说声明 UIPopoverController strong 我已经在做！

```
#import "ImagePickerController.h"

@interface ImagePickerController()
    @property(nonatomic, strong) UIPopoverController *popoverController;
@end

@implementation ImagePickerController

@synthesize imageName;
@synthesize popoverController;

- (void)didReceiveMemoryWarning
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
}

#pragma mark - UIImagePickerController Delegate

-(void) captureImageFromCamera:(UIViewController*)view
{

        UIImagePickerController *imagePickerController = [[UIImagePickerController alloc] init];
        imagePickerController.delegate = self;
        self.popoverController = [[UIPopoverController alloc] initWithContentViewController:imagePickerController];
        self.popoverController.delegate = self;
        [self.popoverController presentPopoverFromRect:view.view.bounds inView:view.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
}

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info 
{
    [picker dismissModalViewControllerAnimated:YES];
}

- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker 
{
    [picker dismissModalViewControllerAnimated:YES];
}

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)image editingInfo:(NSDictionary *)editingInfo
{
[picker dismissModalViewControllerAnimated:YES];
}

#pragma mark - UIPopoverController Delegate

- (void)popoverControllerDidDismissPopover:(UIPopoverController *)popoverController
{

}

- (BOOL)popoverControllerShouldDismissPopover:(UIPopoverController *)popoverController
{
    return YES;
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:59:24.470

在这种情况下，PopoverController 拥有 ImagePicker，因此问题（可能）是您正在解除 ImagePicker 而不是容器 PopoverController。

你打电话的地方

`[picker dismissModalViewControllerAnimated:YES];`

采用

`[self.popoverController dismissPopoverAnimated:YES];`

无需显式关闭 ImagePicker

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:34:15.030

尝试添加`@property(nonatomic, strong) UIImagePickerController *imagePickerController;`

合成它 `@synthesize imagePickerController;`

并像这样更改`imagePickerController`方法`captureImageFromCamera`：

```
imagePickerController = [[UIImagePickerController alloc] init]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T15:55:30.907

我无法解决我的问题，但这[在](http://www.techotopia.com/index.php/An_Example_iOS_4_iPad_Camera_and_UIImagePickerController_Application_%28Xcode_4%29)iOS 5 上也很有效。感谢[http://www.techotopia.com](http://www.techotopia.com)！

# java - Glassfish 中的部署模式

> ID：11455147
> 
> 赞同：0
> 
> 时间：2012-07-12T15:22:27.070
> 
> 标签：java, glassfish

我有一个 glassfish 应用程序，我希望有几种部署模式。IE：开发、生产、demo1等。我该如何指定这些配置？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:43:26.533

您可以在 Glassfish 中配置一些 JVM 选项，然后在您的应用程序中检索它们。

例子：

在 Glassfish JVM 选项中：

**-Dapp.env=生产**

在您的应用程序中：

```
System.getProperty("app.env"); 
```

# wcf - 尝试使用字体作为 WCF 服务参数

> ID：11455149
> 
> 赞同：0
> 
> 时间：2012-07-12T15:22:34.903
> 
> 标签：wcf

我有一个需要字体数据的 WCF 服务。所以我创建了自己的类，它有一个 System.Drawing.Font 类型的成员。我检查了，字体类被标记为可序列化。当我尝试调用该方法并传入我的对象时，出现以下错误：

> {“不应使用数据合同名称‘FontStyle:http://schemas.datacontract.org/2004/07/System.Drawing’键入‘System.Drawing.FontStyle’。将任何未知类型静态添加到已知列表类型 - 例如，通过使用 KnownTypeAttribute 属性或将它们添加到传递给 DataContractSerializer 的已知类型列表中。"}

注意它在抱怨 FontStyle，它实际上是 Font 类的一个属性。FontStyle 是一个简单的标志枚举，我什至没有设置它（但我想它有一个默认值）。

那么是否有可能/最佳实践为此重用 Font 类，还是我需要以不同的方式实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:28:15.363

例外只是意味着当序列化程序检查您正在序列化的类时，它无法确定它需要包含 FontStyle 枚举。尝试使用 [KnownType(typeof(System.Drawing.FontStyle))] 属性标记您的类（具有 Font 属性的类）。

此外，请查看您生成的客户端并确保 KnownType 属性在其中。svcutil 存在一些问题，当顶级参数类中未使用该类型时，它有时会忽略已知类型。

# jsp - 如何从 JSP 访问静态操作属性？班级

> ID：11455153
> 
> 赞同：0
> 
> 时间：2012-07-12T15:22:53.480
> 
> 标签：jsp, struts2

我正在使用 Struts2 框架。我不知道为什么我无法在 JSP 页面中获取 Action 类的静态属性的值。在我的代码中，我的意思是静态属性是 : `nbreAppelAction`。结果，我得到了映射到方法`aa`的所有动作调用。我第一次打开我的.`stayIndexAction``execute()``index.jsp`

这是 Action 类：

```
public class UserAction extends ActionSupport{   
    private static int nbreAppelAction = 0;

        public String execute(){
            utilisateur = new User();   
            nbreAppelAction++;
            return SUCCESS;
        }

    public static int getNbreAppelAction() {
        return nbreAppelAction;
    }

    public static void setNbreAppelAction(int nbreAppelAction) {
        UserAction.nbreAppelAction = nbreAppelAction;
    }       
} 
```

这里是 index.jsp ：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<%@ taglib prefix="s" uri="/struts-tags" %> 

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <body>
        <p>
            <a href="<s:url action='stayIndexAction' />" >Stay in index.jsp </a>
        </p>

        <p>a<s:property value="nbreAppelAction" />a</p>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:29:37.793

您需要使用静态属性 OGNL 表示法，并允许访问静态属性：

```
@some.package.ClassName@FOO_PROPERTY
@some.package.ClassName@someMethod() 
```

[http://struts.apache.org/2.x/docs/ognl-basics.html](http://struts.apache.org/2.x/docs/ognl-basics.html)

我也不确定您要在这里完成什么。IMO 如果您想保留应用程序范围的数据，请将其保存在它所属的应用程序上下文中，并同步访问。

# sql - SQL Server 2012 LocalDb 共享访问

> ID：11455154
> 
> 赞同：1
> 
> 时间：2012-07-12T15:22:53.890
> 
> 标签：sql, sql-server, tsql, sql-server-2012, localdb

我正在考虑在我的应用程序中添加用于数据存储的 LocalDB。

背景：

1）我的应用程序有 2 个部分。一种。桌面客户端。（在登录计算机的用户下运行） b．新台币服务。（作为本地系统运行）

NT 服务： 1) 对我们的后端服务器进行 Web 服务调用，以获取客户端特定的设置和配置选项。
2) 上传客户端创建的记录。

桌面应用程序： 1) 加载 NT 服务下载的设置并根据这些设置运行。2) 创建客户记录。

LocalDB 在这里看起来很合适，但是这两个项目可以同时访问 LOCALDB 吗？经过一些在线调查后，看起来 LOCALDB 共享实例可能是可能的。然而，这是否意味着 NT 服务必须始终保持 LOCALDB 连接处于活动状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T22:27:24.960

完成了与您所描述的非常相似的部署，是的，可以这样做。但是，我强烈建议不要这样做。

一些想法：

1.  LocalDB ' **instances** ' 需要加载用户配置文件。始终加载的唯一使用配置文件是本地系统，即**NT Authority\SYSTEM**帐户。
2.  只有“**实例**”的所有者才能启动或停止它。' **automagic** ' 实例可以设置为忽略自动摊牌超时，但它仍然必须至少启动一次。我通过创建一个 Windows 任务解决了这个问题，该任务启动了一个引导程序，该引导程序在引导时会输出“ *sqllocaldb start v11.0* ”。Windows 任务以“低于正常”进程优先级执行，因此启动的引导程序实际上将**SQLEnv.exe**优先级提高到了我的用例的高。
3.  假设您使用**NT Authority\SYSTEM**作为实例配置文件，使用 SQL Management Studio 之类的东西可能需要系统上的 PsExec。这是一个安全风险，因为它使您可以交互式访问作为本地系统运行的进程。不要这样做。
4.  我们使用组来访问我们的客户端部分，因此我们授予这些组对实际数据库/实例的访问权限。否则，几乎不可能授予新用户访问实例/数据库的权限。

你真的需要一个数据库，还是胖客户端可以为每个记录写出一个文件到一个特定的位置，然后服务检查（或构建一个缓冲区）并在其途中发送？

Another alternative is to remove the NT Service and make its functionality the a part of the Client start up process. Why have a long running process that constantly checks for config changes and only pushes data if the user is actively using the system? Assuming you don't have requirements/an existing system.

# javascript - html5 演示文稿

> ID：11455156
> 
> 赞同：0
> 
> 时间：2012-07-12T15:23:00.817
> 
> 标签：javascript, html, navigation, presentation

我一直在查看[http://html5slides.googlecode.com/svn/trunk/template/index.html#1](http://html5slides.googlecode.com/svn/trunk/template/index.html#1)并且想知道是否可以修改此代码以便可能不止一行。

例如，现在它只能左右滑动，但如果我想按向下箭头向下？它需要一个单独的行，带有单独的左/右导航等等。

我一直在尝试这样做，但脚本会计算所有`<article>`标签并最终将它们放在一行中。

有没有人知道如何尝试它或者其他一些可以像上面描述的那样工作的脚本？主要思想是最终得到一种可以使用箭头在各个方向导航的网格。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T15:31:36.977

```
 function nextSlide() {
      if (buildNextItem()) {
         return;
      }

      if (curSlide < slideEls.length - 1) {
         curSlide++;
         updateSlides();
      }
   }

   function prevSlide() {
       if (curSlide > 0) {
           curSlide--;
           updateSlides();
        }
   }

   function updateSlides() {
       for (var i = 0; i < slideEls.length; i++) {
          switch (i) {
            case curSlide - 2:
              updateSlideClass(i, 'far-past');
              break;
            case curSlide - 1:
              updateSlideClass(i, 'past');
              break;
            case curSlide: 
              updateSlideClass(i, 'current');
              break;
            case curSlide + 1:
              updateSlideClass(i, 'next');      
              break;
            case curSlide + 2:
              updateSlideClass(i, 'far-next');      
              break;
            default:
              updateSlideClass(i);
              break;
            }
         } 

         triggerLeaveEvent(curSlide - 1);
         triggerEnterEvent(curSlide);

         window.setTimeout(function() {
         // Hide after the slide
            disableSlideFrames(curSlide - 2);
         }, 301);

         enableSlideFrames(curSlide - 1);
         enableSlideFrames(curSlide + 2);

         if (isChromeVoxActive()) {
             speakAndSyncToNode(slideEls[curSlide]);
         }  

         updateHash();
     }
  } 
```

这些似乎是驱动滑动翻转的主要功能。没有理由您不能将其扩展为`curSlideX`并且`curSlideY` 可以`updateSlide`横向或垂直移动，具体取决于两者中的哪一个发生了变化。

在您拥有的 html 中

```
 <section id=slides>
      <atricle></article>
      <atricle></article>
      <atricle></article>
  </section> 
```

文章被赋予动态类以确定它们是大的，还是变小并偏向一边。

您将通过更多部分添加更多行，并让更新更改它们的类，就像文章类移动以适应选择了哪个文章和行一样。

# c++ - 模仿boost lexical_cast操作

> ID：11455161
> 
> 赞同：1
> 
> 时间：2012-07-12T15:23:26.550
> 
> 标签：c++, boost

不幸的是，在我当前的项目中，我不能使用 boost，所以我试图模仿`boost::lexical_cast`（减去大多数错误检查 boost 的行为）。我有以下功能，它们有效。

```
// Convert a string to a primitive, works
// (Shamelessly taken from another stack overflow post)
template <typename T>
T string_utility::lexical_cast(const string &in)
{
    stringstream out(in);

    T result;
    if ((out >> result).fail() || !(out >> std::ws).eof())
    {
        throw std::bad_cast();
    }

    return result;
}

// Convert a primitive to a string
// Works, not quite the syntax I want
template <typename T>
string string_utility::lexical_cast(const T in)
{
    stringstream out;
    out << in;

    string result;
    if ((out >> result).fail())
    {
        throw std::bad_cast();
    }

    return result;
} 
```

我希望能够为两者使用相同的语法以保持一致性，但我无法弄清楚。

将字符串转换为原语很好。

`int i = lexical_cast<int>("123");`

然而，另一方面，看起来像这样：

```
string foo = lexical_cast(123);

// What I want
// string foo = lexical_cast<string>(123); 
```

**编辑：感谢ecatmur** ，我不得不切换模板参数，但以下正是我想要的。

```
template<typename Out, typename In> Out lexical_cast(In input)
{
    stringstream ss;
    ss << input;

    Out r;
    if ((ss >> r).fail() || !(ss >> std::ws).eof())
    {
        throw std::bad_cast();
    }

    return r;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T15:26:07.807

的基本模板代码`lexical_cast`是：

```
template<typename In, typename Out> Out lexical_cast(In in) {
    stringstream ss;
    ss << in;
    if (ss.fail()) throw bad_cast();
    ss >> out;
    return out;
} 
```

根据需要为 (In == string) 等添加错误检查和特化。

# sqlite - 如何在 Debian 上安装 sqlite

> ID：11455164
> 
> 赞同：21
> 
> 时间：2012-07-12T15:23:41.793
> 
> 标签：sqlite, installation, debian, vps

我需要在我的 Debian VPS 服务器上安装 SQLite。有人可以帮我吗？请给我步骤，因为我是这里的新手并且不知道。

谢谢

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-12T15:26:02.903

```
$ sudo apt-get install sqlite3 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-01-02T17:50:12.783

我从您上面的评论中了解到您希望将 sqlite 与 PHP 一起使用。虽然这是一个老问题，但这里是如何做以供将来参考。

PHP 可以在 pdo-sqlite 扩展的帮助下与 SQLite 数据库进行通信。在当前的 Debian 上，您需要安装 package `php5-sqlite`。这将在您的 php.ini 中安装并激活模块：

```
sudo aptitude install php5-sqlite 
```

您可以使用包中提供的工具`sqlite`或`sqlite3`. 您可以类似地安装这些。请注意，这些工具**不**提供任何 PHP 扩展。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-06-11T02:07:17.257

如果您只想安装 SQLite3（在您的情况下，在服务器上）：

```
$ sudo apt-get install sqlite3 
```

如果您需要开发包（基于 sqlite3 库构建程序）：

```
$ sudo apt-get install libsqlite3-dev 
```

对于 PHP 使用：

```
$ sudo apt-get install php5-sqlite3 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-30T18:08:17.327

在 Linux Mint 上使用 linuxbrew，执行以下操作：

```
brew install sqlite
sudo cp /home/linuxbrew/.linuxbrew/opt/sqlite/bin/sqlite3 /usr/bin 
```

这导致：

```
➜  kata_tdd_php_symfony git:(master) ✗ sqlite3
SQLite version 3.30.1 2019-10-10 20:19:45
Enter ".help" for usage hints.
Connected to a transient in-memory database.
Use ".open FILENAME" to reopen on a persistent database.
sqlite> 
```

# zend-framework - 我的函数对 SQL 注入安全吗？

> ID：11455165
> 
> 赞同：2
> 
> 时间：2012-07-12T15:23:44.553
> 
> 标签：zend-framework, zend-db

```
 function update_page($page_id, $page_title, $page_content, $seo_title, $seo_keywords, $seo_desc) {

    $pagedata = array('page_title' => $page_title,
                      'page_content' => $page_content,
                      'seo_title' => $seo_title,
                      'seo_keywords' => $seo_keywords,
                      'seo_desc' => $seo_desc);             
    $this-> dbo -> update('zp_mobile_page', $pagedata, 'page_id = '.$page_id);
    $return_message = "Page Updated!";
    return $return_message;

} 
```

嗨，我正在使用 Zend DB，我阅读了这个关于 Zend 的论坛，但我仍然不知道 zend 的更新插入选择是否可以防止 sql 注入，或者我是否需要再次清理它们。

任何人都可以用外行的方式指导我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:54:45.263

请参阅@Nemanja 的评论，但除非您在`$page_id`其他地方手动逃逸，否则注射并不是真正安全的。

您需要使用[quoteInto](http://framework.zend.com/manual/en/zend.db.adapter.html#zend.db.adapter.quoting.quote-into)来保护数据：

```
 $this->dbo->update('zp_mobile_page',
                    $pagedata,
                    $this->dbo
                         ->getAdapter()
                         ->quoteInto('page_id = ?', $page_id)); 
```

[您还可以使用Zend_Db_Adapter::quote()](http://framework.zend.com/manual/en/zend.db.adapter.html#zend.db.adapter.quoting.quote)转义单个值。

# c# - 用 C# 计算 XML 字符串的叶子

> ID：11455166
> 
> 赞同：4
> 
> 时间：2012-07-12T15:23:45.723
> 
> 标签：c#, .net, xml

有没有一种简单的方法可以使用 C# 获取 XML 字符串（XML 文档作为字符串提供）**的所有叶子的数量？**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-12T15:26:30.420

```
XDocument xDoc = XDocument.Parse(xml);
var count = xDoc.Descendants().Where(n => !n.Elements().Any()).Count(); 
```

或如@sixlettervariables 建议的那样

```
var count = xDoc.Descendants().Count(e => !e.HasElements); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T15:28:43.953

以下是使用 XPath 的方法（借用 helio）：

```
XmlDocument doc = new XmlDocument();
doc.LoadXml("...");
int count = doc.SelectNodes("//*[not(*)]").Count; 
```

*   `//`表示匹配所有后代
*   `*`表示任何 XML 元素
*   `[]`表示一个条件
*   `not(*)`表示当前元素没有子元素

# jquery - jQuery focus() 和 select() 在 Firefox 中不起作用，但在 Chrome 中起作用

> ID：11455168
> 
> 赞同：1
> 
> 时间：2012-07-12T15:23:46.893
> 
> 标签：jquery, firefox, focus

我正在尝试验证输入语句，如果输入错误，用户会收到一个 Bubble Div 通知输入不正确。我正在尝试将焦点恢复到错误的输入元素并选择其中的文本。该代码适用于 Chrome，但不适用于 Firefox。谁能帮我这个？. 我在这里发布代码：

```
$("#inner-tbl").on('blur', 'input[type=text]', function(e) {
    var checkval = $(this).val();
    checkval = checkval.replace(/\s/g,'');
    $(this).val(checkval);
    console.log(checkval);
    var numericReg = /^\d*[0-9](|.\d*[0-9]|,\d*[0-9])?$/;
    if(!numericReg.test(checkval)) {
        $(this).addClass("error");
        $(this).focus().select();
        console.log("Not an integer");
        var ip_width, ip_height, x;
        ip_width = $(this).outerWidth();
        ip_height = $(this).outerHeight();
        x = $(this).offset();
        console.log("Width :"+ip_width+" Height :"+ip_height+" Top :"+x.top+" Left :"+x.left);
        $("body").append("<div class='error_bubble'><span class='errordiv'>Numeric value.</span></div>");
        $(".error_bubble").css({
            position: 'absolute',
            top: (x.top+30)+'px',
            left: (x.left-30)+'px'
        });
    } 
}); 
```

这是jsfiddle：http: [//jsfiddle.net/neoragex/Wk35w/](http://jsfiddle.net/neoragex/Wk35w/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-15T09:14:01.637

您可以使用 return false 和它为 firefox 工作。

```
 $(this).focus().select();
        return false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-15T11:54:37.337

在 Chrome 和 IE 中，文本输入字段被聚焦并突出显示

在 Firefox 中，文本输入字段被聚焦，但光标位于未突出显示文本的开头

```
$("#surname").focus();
$("#surname").select(); // for Firefox 
```

# sql-server-2008 - SQL Server 中的表统计信息会影响 INSERT、UPDATE 性能吗？

> ID：11455171
> 
> 赞同：1
> 
> 时间：2012-07-12T15:24:02.600
> 
> 标签：sql-server-2008, statistics, query-optimization

我有一个关于 SQL Server 中表统计信息的一般查询。

*背景：*
在我正在进行的一个项目中，我有几个正在使用的数据库——每个数据库都包含具有各自索引和约束的表。因此，我执行了几个测试用例，并使用 SQL Server Profiler 创建跟踪，以便可以将它们与 Tuning Advisor 一起使用来生成建议。顾问为我生成的唯一建议是一堆统计数据。

在创建这些统计信息后，我测试了`statistics io`设置为 on 的存储过程，我注意到逻辑读取有一个小的改进。

*问题：*
我的问题是：插入了许多顾问为我生成的统计信息（每个表大约 3-4 个），这些统计信息如何影响 INSERT、UPDATE 或 DELETE 的性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T16:15:39.793

如果有聚集索引，那么任何插入/更新/删除都需要执行基于索引的操作。这意味着统计信息可用于提高查询引擎确定如何插入/更新/删除行的能力。

我不能肯定地说它们是，但它们有可能提高性能。

然而，一个问题是，当表发生许多小更新时，统计信息可能不会更新；在自动更新它们之前，它需要超过一定数量的行。你们很多人都想看看这个。

# python - 在 Django 中为通用视图定义一组关系字段

> ID：11455172
> 
> 赞同：1
> 
> 时间：2012-07-12T15:24:08.540
> 
> 标签：python, django, relationship, django-models

好吧，我正在使用通用视图来显示定义我的方法**字段**的选定字段，它可以工作，但我正在尝试做的事情如下，在我的一个自定义字段中，我想检索“代理”的名称值在我的班级'Tareas'中与他的'idagente'相匹配，

```
class Tareas(models.Model):
    fechatarea = models.DateTimeField(null=True, db_column='fechaTarea', blank=True) # Field name made lowercase.
    horainicio = models.DateTimeField(null=True, db_column='horaInicio', blank=True) # Field name made lowercase.
    horafin = models.DateTimeField(null=True, db_column='horaFin', blank=True) # Field name made lowercase.
    observaciones = models.TextField(blank=True)
    unidades = models.BigIntegerField(null=True, blank=True)
    validar = models.IntegerField()
    idtipotarea = models.ForeignKey(Tipotarea, db_column='idtipotarea')
    idtarea = models.IntegerField(primary_key=True, db_column='idTarea')
    idagente = models.ForeignKey(Agentes, db_column='idagente',blank=True, null=True)
    def __fields__(self,profile):        
        fields=[]
        fields.append( ('idagente'), _('Tipo de Agente')) )
        fields.append( ('fechatarea', _('Fecha de Tarea') ) )
        fields.append( ('horainicio', _('Inicio') ) )
        fields.append( ('horafin', _('Fin') ) )
        fields.append( ('unidades', _('Unidades') ) )    

        return fields 
```

在我的模型类 por Agentes 中，我定义了一个**unicode**方法，它返回我的员工姓名但总是打印他的 ID，当我与我的领域建立关系时我忘记了什么？

# python - 连接到腻子，通过 python 使用相同的会话登录到第二个 linux 服务器

> ID：11455177
> 
> 赞同：0
> 
> 时间：2012-07-12T15:24:30.203
> 
> 标签：python, putty

有没有办法：
1\. 打开 putty/plink 会话并通过 python 登录到 linux 服务器
2\. 在当前会话中通过 python 登录到另一个 linux 服务器
3\. 让 putty 会话保持打开状态并可供用户手动运行其他命令？

注意：
- 脚本需要在通过 putty 访问 linux 服务器的 Windows 机器上运行。
- 1 很容易使用 subprocess.Popen()。
- 我一直在为下一次服务器登录发送密码。RSA ssh 密钥在我们的服务器上受到限制。

有任何想法吗？可能是python脚本的其他替代品吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:27:19.640

是的，你可以这样做。使用`pexpect`.

但我必须注意，如果不安装 cygwin，就不能在 Windows 上使用 pexpect。当您想在没有 cygwin 的情况下直接在 Windows 上运行程序时，您需要使用`winexpect`( [https://bitbucket.org/geertj/winpexpect/wiki/Home](https://bitbucket.org/geertj/winpexpect/wiki/Home) )。

Pexpect/Winexpect 使用[示例](http://linux.byexamples.com/archives/346/python-how-to-access-ssh-with-pexpect/)：

```
#!/usr/bin/env python
import pexpect

ssh_newkey = 'Are you sure you want to continue connecting'
# my ssh command line
p=pexpect.spawn('ssh mysurface@192.168.1.105 uname -a')

i=p.expect([ssh_newkey,'password:',pexpect.EOF])
if i==0:
    print "I say yes"
    p.sendline('yes')
    i=p.expect([ssh_newkey,'password:',pexpect.EOF])
if i==1:
    print "I give password",
    p.sendline("mypassword")
    p.expect(pexpect.EOF)
elif i==2:
    print "I either got key or connection timeout"
    pass
print p.before # print out the result 
```

在您的情况下，您必须使用`plink`代替`ssh`和`winexpect`代替`pexpect`。

# rhino-servicebus - 通过 MSMQ 使用 Rhino 服务总线发送消息

> ID：11455178
> 
> 赞同：1
> 
> 时间：2012-07-12T15:24:33.737
> 
> 标签：rhino-servicebus

我刚刚开始使用 Rhino 服务总线，我正在尝试使用 MSMQ 作为传输在 2 个服务器之间中继消息。由于某种原因，当后端/主机位于不同的服务器上时，Rhino 客户端不会收到消息，但在位于同一台机器上时可以正常工作。

如果我使用 Rhino 队列而不是 MSMQ 作为传输，那么消息将通过服务器发送。

我什至关掉了防火墙。我还确保消息端点指向正确的服务器，而总线端点始终是本地的。

有任何想法吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T05:12:15.157

原来是防火墙问题。服务总线和客户端的端口（在 rhino.config 中指定）应该是开放的。呃！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:38:42.773

消息无法通过网络到达另一台服务器的原因有很多。我建议您编写一个简单的应用程序来向另一台服务器发送消息。这将确定 Rhino 是否存在问题（我对此表示怀疑）。

要检查的另一件事是不同机器上的分布式事务控制器是否可以通信。这是确保消息的事务完整性所必需的。您可以使用[DTCPing](http://www.microsoft.com/en-za/download/details.aspx?id=2868)来测试两台服务器之间的 DTC 连接。

我发现这篇[博文](http://blogs.msdn.com/b/johnbreakwell/archive/2007/12/13/what-publically-available-tools-are-available-for-troubleshooting-msmq-problems.aspx)列出了调试 MSMQ 问题时使用的工具。有些链接有点旧，但似乎很有用。

最后，您还可以尝试[MQPing](http://technet.microsoft.com/en-us/library/cc731852%28v=ws.10%29.aspx)。它不适用于 MSMQ 的工作组模式，但它可能会有所帮助。

# makefile - 当多个模式规则匹配一个目标时

> ID：11455182
> 
> 赞同：19
> 
> 时间：2012-07-12T15:24:43.250
> 
> 标签：makefile, gnu-make

GNU [make 手册](http://www.gnu.org/software/make/manual/make.html#Pattern-Match)说

> 多个模式规则可能会满足这些标准。在这种情况下，make 将选择具有最短词干的规则（即最具体匹配的模式）。

所以让我吃惊的是：

```
$ touch make_specific.cpp

$ cat Makefile.general_first
%.o: %.cpp
@echo using general rule
$(CXX) -c $< -o $@

%_specific.o: %_specific.cpp
@echo using specific rule
$(CXX) -c $< -o $@

$ make -B -f Makefile.general_first make_specific.o
using general rule
g++44 -c make_specific.cpp -o make_specific.o 
```

多个模式规则与目标匹配，并且由于`%_specific.o : %_specific.cpp`规则的词干（在本例中为“make”）比规则的词干短`%.o : %.cpp`，我希望选择特定的规则，但事实并非如此。

我错过了什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-13T04:25:05.653

您可能正在使用低于`3.82`.

在版本`3.81`及更低版本中，选择标准不同；`make`将选择与模式匹配的第一条规则。您所指的文档适用于 version `3.82`。该版本确实会根据您的期望选择具有最具体词干的规则。

从源代码树[`NEWS`](http://cvs.savannah.gnu.org/viewvc/%2acheckout%2a/make/NEWS?revision=2.120&root=make)中的文件：`make`

```
Version 3.82
...
* WARNING: Backward-incompatibility!
  The pattern-specific variables and pattern rules are now applied in the
  shortest stem first order instead of the definition order (variables
  and rules with the same stem length are still applied in the definition
  order). This produces the usually-desired behavior where more specific
  patterns are preferred. To detect this feature search for 'shortest-stem'
  in the .FEATURES special variable. 
```

# javascript - 从自定义 JS 函数激活 Sencha Touch 选项卡

> ID：11455185
> 
> 赞同：0
> 
> 时间：2012-07-12T15:25:07.043
> 
> 标签：javascript, ios, cordova, sencha-touch-2

我在 iOS 上有一个 Cordova 项目，我想在事件“X”之后切换到特定选项卡。

假设事件“X”刚刚发生，我的目标 C 进行以下调用以运行 JS 函数`openNotificationTab()`，如下所示：

```
NSString *goToNotification = [NSString stringWithFormat:@"openNotificationTab()"];
[viewController.webView stringByEvaluatingJavaScriptFromString:goToNotification]; 
```

该`openNotificationTab()`函数位于 filename.js 中，我验证它在范围内并且可以通过使用`alert()`.

现在我的js函数的定义如下：

```
function openNotificationTab(){
    Ext.Viewport.setActiveItem({
    xtype: 'notificationtabview'
    });
} 
```

问题是这个函数打开了正确的面板，但将它覆盖在其他所有面板之上。因此，整个选项卡菜单不再可见，因此无法访问。

我也试过

```
"Ext.Viewport.setActiveItem(1)" and  "Ext.Viewport.setActiveItem('notificationtabview')" 
```

但也不做任何事情。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T15:33:53.050

您需要在 TabPanel 上调用 setActiveItem，使用要显示的选项卡的索引或要显示的项目。

您可以通过以下方式检查视口的类别：

```
Ext.Viewport.$className 
```

您可能会在这里了解到视口不是您的选项卡面板。

```
var tabPanel = Ext.Viewport.down("tabpanel");
tabPanel.setActiveItem(tabPanel.down("notificationtabview")) 
```

或者

```
var tabPanel = Ext.Viewport.down("tabpanel");
tabPanel.setActiveItem(1) 
```

两者都有效。

# facebook - Facebook Like 按钮显示 0

> ID：11455186
> 
> 赞同：0
> 
> 时间：2012-07-12T15:25:15.933
> 
> 标签：facebook

有谁知道为什么喜欢这个链接时按钮会自动刷新为0？

[http://notable.ca/toronto/event-detail/Ad-Clubs-Summer-Party/](http://notable.ca/toronto/event-detail/Ad-Clubs-Summer-Party/)

我想我使用的是正确的 FB 代码，它似乎在所有其他文章上都可以正常工作......

想法将不胜感激

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:28:11.523

尝试确保您使用的 URL 编码正确 - 我刚刚通过 facebook 开发人员页面尝试过并且工作正常 - 并且也从页面中显示了我的喜欢。

你的代码显示了这一点

`http://www.facebook.com/plugins/like.php? href=http://notable.ca/toronto/Ad%20Clubs%20Summer%20Party`

尝试

`http://www.facebook.com/plugins/like.php?href=http://notable.ca/toronto/Ad-Clubs-Summer-Party`

# javascript - 从原型子对象访问对象的属性

> ID：11455198
> 
> 赞同：2
> 
> 时间：2012-07-12T15:25:57.433
> 
> 标签：javascript, prototype

鉴于以下代码，是否可以从“子”对象内部访问对象的属性？

我想我这样做是完全错误的，但我不确定这里的正确模式是什么。任何帮助将非常感激。

```
function MainObject(){
    this.someProperty = "asdf";
    return this;
}

MainObject.prototype.subClass = {};
MainObject.prototype.subClass.sayHi = function(){
    // 'this' refers to the instance of MainObject.subClass
    // How do I get to the instance's MainObject.someProperty property from here,
    // without calling "widget.someProperty"?
};

widget = new MainObject(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T15:30:23.627

你不能，因为没有对实际实例的引用。您必须`subClass`为构造函数中的每个实例进行初始化：

```
function MainObject(){
    var self = this;
    this.someProperty = "asdf";
    this.subClass = {};
    this.subClass.sayHi = function(){
        //self.someProperty
    }
}; 
```

但这复制了功能。看来您应该完全选择其他方法。

也许使用**组合**会更好，但这实际上取决于您要做什么以及“类”如何相互关联。

```
function SubClass(instance) {
    this.instance = instance;
}

SubClass.prototype.sayHi = ...;

function MainObject(){
    this.someProperty = "asdf";
    this.subClass = new SubClass(this);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T15:28:44.910

没有对实际父级的引用，因此您必须在子类中手动存储一个。这是一个例子：

```
function MainObject() {
    // your code

    this.subClass = {
        parent: this
    }
} 
```

# javascript - ajax刷新后保留选择下拉值

> ID：11455199
> 
> 赞同：2
> 
> 时间：2012-07-12T15:25:57.817
> 
> 标签：javascript, jquery, drop-down-menu

这可能是一个重复的问题，但请告诉我。我有一个如下的下拉菜单，我选择黄色选项，我有 onclick 可以执行操作，这会执行 ajax 调用。因此，在 ajax 调用之后，下拉菜单默认返回红色选项，而不是保持黄色。我还在学习jquery

```
<select onChange="this.options[this.selectedIndex].onclick();>
<option value="red" onclick="">red</option>
<option value="yellow" onclick="">yellow</option>
<option value="blue" onclick="">blue</option>
<option value="green" onclick="">green</option>
</select> 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:32:50.573

尝试这个：

```
$('input[value=red]').ajaxSuccess(function(){
   $(this).prop('selected', true)
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:28:47.823

关于如何实现这一目标的粗略示例：

```
// before ajax
var selected_item = $('select').val(); // use a better selector

// do some ajax
$.ajax({
    url: '/',
    data: {
        foo: 'bar'
    }
    success: function(data) {

        // update the select
        $('select').html(data);

        // reapply the originally selected element
        $('select').val(selected_item);

    }
}); 
```

# html - 如何避免边界崩溃

> ID：11455200
> 
> 赞同：3
> 
> 时间：2012-07-12T15:25:58.743
> 
> 标签：html, css, border

这是一个让我忙了一阵子的问题。

正如您在[小提琴](http://jsfiddle.net/35qgP/1/)中看到的那样，我正在尝试为单元格顶部设置边框。我想实现单元格的边框看起来像我给 div 的边框。你知道怎么做吗？我已经尝试设置边框图像，但它也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:29:46.867

你是说这是你所期待的：http: [//jsfiddle.net/35qgP/4/](http://jsfiddle.net/35qgP/4/)

```
table {
    width: 50%;
}
.border1 td {
    border-top: 3px solid red;
}
.border2 td {
    border-top: 1px dotted blue;
}
.border3 td {
    border-top: 1px dashed blue;
} 
```

或者以这种方式`border-collapse: collapse;`对所有`td`s 使用 a：

```
td {border-collapse: collapse;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:29:15.017

试试这个？

[http://jsfiddle.net/35qgP/2/](http://jsfiddle.net/35qgP/2/)

# php - .htaccess 重定向 /sub_dir/img 以改用 /img

> ID：11455205
> 
> 赞同：0
> 
> 时间：2012-07-12T15:26:13.023
> 
> 标签：php, .htaccess

我在一个名为`www/sub_dir`. 该`sub_dir`目录中的索引文件调用`img/logo.png`.

我可以只放置一个`.htaccess`将在`www/img`目录中而不是文件中查找的文件，而不是为我的所有图像使用完整路径`www/sub_dir/img`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:58:01.170

在 /www/sub_dir/img/ 目录中试试这个 .htaccess 文件

```
Options +FollowSymlinks
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule (.*)$ /www/img/$1 [QSA,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:43:42.343

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule /(img/.+)$ $1 [NC,L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T15:35:29.390

如果 www 是您的 web 根目录，您可以`/`在图像的 uri 上放置一个前导。例如，如果您的图像位于`http://www.yoursite.com/img/logo.png`，则您可以放置​​网站上的任何子目录`/img/logo.png`来访问它。领先`/`只是意味着“顶级”。所以`/img/logo.png`意思是“顶层，然后是`img`文件夹，然后是文件`logo.png`”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T15:37:00.440

1.  `<base href="...">`如果适用，请考虑使用。这样，无论您在哪个子目录中，您仍然可以使用`img/`,`css/`等。

2.  如果这是单个特定文件夹，请考虑使用`symlinks`. 只需`ln -s ../img .`添加`Options +FollowSymLinks`到 apache 配置或 .htaccess。

3.  您可以轻松地使用`/img/logo.png`或`../img/logo.png`在子文件夹中的文件中...

4.  如果上述建议均不可行，请将以下重写规则添加到您的 Web 根目录 .htaccess 中：

    `RewriteEngine on`

    `RewriteBase /`

    `RewriteRule ^sub_folder/(img/.*) $1 [L]`

# infopath - infopath 2010 个人和组检索电子邮件

> ID：11455207
> 
> 赞同：0
> 
> 时间：2012-07-12T15:26:15.310
> 
> 标签：infopath

我想让代码发送从文本框中的活动目录中挑选的电子邮件

```
XPathNavigator dataSource;
dataSource = this.MainDataSource.CreateNavigator();
string toAddress = dataSource.SelectSingleNode
("/my:myFields/my:toAddress/pc:Person/pc:AccountId",NamespaceManager).Value;
dataSource.SelectSingleNode("//my:field1",NamespaceManager).SetValue(this.User.UserName); 
```

那么我如何检索个人和群组电子邮件并将其放在文本框中以及我应该使用哪一个（帐户 ID 或帐户类型、显示名称）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T16:57:50.930

您可以尝试使用 AccountId 属性 - 根据您的 AuthenticationProvider 它是用户的电子邮件或域帐户。如果是域帐户，它可能仍然有效，因为 IIS 可以自动解析它。

如果它不适用于 AccountId，您必须查询 GetUserProfileByName WebService 并检索所有属性（包括电子邮件）。[这](http://claytoncobb.wordpress.com/2009/06/21/userprofileservice-extended/)是一篇很棒的文章，如何在不编写代码的情况下做到这一点。

# selenium - Selenium WebDriver 无需等待页面加载即可转到页面

> ID：11455210
> 
> 赞同：12
> 
> 时间：2012-07-12T15:26:16.963
> 
> 标签：selenium, webdriver

我正在使用 python api 将一些 Selenium RC 测试转换为 Selenium WebDriver。在 Selenium WebDriver 中，我注意到`driver.get( 'http://...' )`在继续之前似乎要等待整个页面加载。有没有办法不等待页面加载？我请求的一些页面有很多外部资源，可能需要很长时间才能加载。我宁愿等待 DOM 上的元素出现，也不愿等待所有内容加载。由于这个原因，我的一些测试在 WebDriver 中似乎花费了两倍的时间。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-12T15:37:41.197

是和不是。从 Selenium 2.24.1 开始，[仅在 Firefox 中对此提供支持 - 您必须以特殊的“模式”运行它](http://code.google.com/p/selenium/wiki/FirefoxDriver#-Beta-_load_fast_preference)：

```
FirefoxProfile fp = new FirefoxProfile();
fp.setPreference("webdriver.load.strategy", "unstable");
WebDriver driver = new FirefoxDriver(fp); 
```

[如果您愿意，](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.Timeouts.html#pageLoadTimeout%28long,%20java.util.concurrent.TimeUnit%29)您甚至可以设置超时。此方法在 Firefox 以外的任何浏览器中都失败，并且在没有不稳定策略的情况下在 Firefox 中什么也不做：

```
driver.manage().timeouts().pageLoadTimeout(5, TimeUnit.SECONDS); 
```

# iphone - 在 UITableViewCell 中设置图像时，我得到 ：CGAffineTransformInvert：奇异矩阵

> ID：11455214
> 
> 赞同：1
> 
> 时间：2012-07-12T15:26:19.637
> 
> 标签：iphone, ios, ios5

我正在使用存储在 Core Data 中的 Person 对象填充 UITableView。每个人都有一个名字、姓氏和图像。图像是与单独的 Image 实体的关系，该实体具有称为可转换类型数据的属性。这是我存储与每个人关联的图像的地方。

我在表格中填充：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"PersonCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Configure the cell...
    Person *person = [self.fetchedResultsController objectAtIndexPath:indexPath];

    NSMutableString *nameString = [[NSMutableString alloc] init];

    if (person.firstName)
    {
        [nameString appendString:[NSString stringWithFormat:@"%@ ",person.firstName]];
    }
    if (person.lastName)
    {
        [nameString appendString:person.lastName];
    }

    cell.textLabel.text = nameString;

    UIImage *image = person.image.data;
    cell.imageView.image = image;

    return cell;
} 
```

当我运行我的应用程序时，我收到错误：

：CGAffineTransformInvert：奇异矩阵。

表或数据库中的每个项目一次。

如果我注释掉这一行：

```
cell.imageView.image = image; 
```

错误消失了。

有任何想法吗？这是我第一次在 Core Data 中存储二进制数据，也许它没有转换吧？

这就是我存储图像的方式：

```
UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];
self.person = [Person personWithImage:image inManagedObjectContext:self.context]; 
```

和

```
+ (Person *)personWithImage: (UIImage *)image inManagedObjectContext:(NSManagedObjectContext *)context
{
    Image *newImage = [NSEntityDescription insertNewObjectForEntityForName:@"Image" inManagedObjectContext:context];
    newImage.data = image;

    Person *newPerson = [NSEntityDescription insertNewObjectForEntityForName:@"Person"
                                                    inManagedObjectContext:context];
    newPerson.image = newImage;

    return newPerson;
} 
```

谢谢，

格里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T22:19:23.453

好的，我很幸运地发现了这一点。我的 uitableview 使用单元格中的图像，我将全尺寸相机图像放在那里，当然遇到了一些内存问题。一旦我开始将图像大小调整为 960x640，随机 CGAffineTransformInvert 错误就消失了！

我仍然不知道为什么它首先会发生，但我想这并不重要，因为它现在已经消失了。

# python - 检查索引对象值类型

> ID：11455216
> 
> 赞同：1
> 
> 时间：2012-07-12T15:26:23.820
> 
> 标签：python, dictionary

我有一本字典：`dict = {"key":[None, "item 2", "item 3"]}`

我如何检查`dict["key"][0] is None` **“密钥”是否未知**。

到目前为止我有这个：

```
{k: dict[k][0] for k in dict.viewkeys()} 
```

这给了我：

```
{"key":None} 
```

在我的应用程序中，我正在测试是否`dict["key"][0]`已填充，其默认值为无。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:30:52.547

你很亲密。如果您想要所有键值对，例如值列表中的第一项是`None`，您可以这样做：

```
unassigned_items = {k:v for k, v in mydict.viewitems() if v[0] is None} 
```

请注意，您不应该将`dict`其用作变量名，因为它掩盖了`dict`内置 - 即使在示例代码中，如果只是因为它可能会误导人们。

一旦你得到了`unassigned_items`，你可以简单地测试看看是否`'key'`在`unassigned_items`：

```
if key in unassigned_items:
    do_something() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:33:07.970

不是最安全/最干净的：

```
if d[d.keys()[0]][0] is None: print "Empty" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T15:47:10.333

也许试试 filter(lambda k: dict[k][0] == None, dict.keys())

应该返回 dict.keys() 的所有成员的列表（键列表），其第一个元素是 None （也就是说，他们返回 True 为 dict[k][0] == None）

# c# - 表单提交后如何更改页面内容 ASP.net C#

> ID：11455217
> 
> 赞同：1
> 
> 时间：2012-07-12T15:26:24.510
> 
> 标签：c#, asp.net, forms, panel

我有一个用户填写的主表单，底部有一个“提交”和“重置”按钮。截至目前，有一个单独的 .aspx 确认页面，用户在按下提交后会被定向到该页面。基本上，我希望能够将confirm.aspx页面合并到我的default.aspx表单页面中，并在提交default.aspx页面后自行加载confirm.aspx页面上的内容，而不需要两个单独的页面. 我觉得这可能很简单，但我仍然是 ASP.net 的初学者，不知道如何处理这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:29:54.610

我相信这个请求的最佳解决方案是使用 a`MultiView`来分隔内容。使用视图时，非活动视图不会发送到客户端，因此不会影响页面的大小。

看看这个[小教程](http://asp-net-example.blogspot.com.br/2008/10/multiview-example-how-to-use-multiview.html)。

希望这可以帮助。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:30:07.673

使用 ASP.NET 面板控件并切换可见性。有一个表单面板、一个成功面板和一个错误面板。用适当的消息填充后两者。错误面板将通过 try/catch 设置中的 catch 出现。

# python - python，argparse：在指定另一个输入参数时启用输入参数

> ID：11455218
> 
> 赞同：14
> 
> 时间：2012-07-12T15:26:26.310
> 
> 标签：python, parameters, arguments, argparse

*在我的 python 脚本中，我希望只有*在指定了另一个可选参数时才能使用可选输入参数。例子：

```
$ python myScript.py --parameter1 value1
$ python myScript.py --parameter1 value1 --parameter2 value2 
```

但不是：

```
$ python myScript.py --parameter2 value2 
```

如何使用 argparse 执行此操作？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-12T15:38:22.593

使用自定义操作：

```
import argparse

foo_default=None    

class BarAction(argparse.Action):
    def __call__(self,parser,namespace,values,option_string=None):
        didfoo=getattr(namespace,'foo',foo_default)
        if(didfoo == foo_default):
            parser.error( "foo before bar!")
        else:
            setattr(namespace,self.dest,values)

parser=argparse.ArgumentParser()
parser.add_argument('--foo',default=foo_default)
parser.add_argument('--bar',action=BarAction,help="Only use this if --foo is set")

#testing.
print parser.parse_args('--foo baz'.split())
print parser.parse_args('--foo baz --bar cat'.split())
print parser.parse_args('--bar dog'.split()) 
```

如果您可以依赖 argparse 的一些未记录的行为，这甚至可以以更容易维护的方式完成：

```
import argparse

parser=argparse.ArgumentParser()
first_action=parser.add_argument('--foo',dest='cat',default=None)

class BarAction(argparse.Action):
    def __call__(self,parser,namespace,values,option_string=None):
        didfoo=getattr(namespace,first_action.dest,first_action.default)
        if(didfoo == first_action.default):
            parser.error( "foo before bar!")
        else:
            setattr(namespace,self.dest,values)

parser.add_argument('--bar',action=BarAction,
                    help="Only use this if --foo is set")

#testing.
print parser.parse_args('--foo baz'.split())
print parser.parse_args('--foo baz --bar cat'.split())
print parser.parse_args('--bar dog'.split()) 
```

在此示例中，我们从返回的操作对象中获取默认值`foo`及其目标`add_argument`（add_argument 的返回值在我能找到的任何地方都没有记录）。这仍然有点脆弱（例如，如果您想为参数指定`type=`关键字`--foo`）。

最后，您可以`sys.argv`在解析之前进行检查。

```
import sys
if ("--parameter2" in sys.argv) and ("--parameter1" not in sys.argv):
    parser.error("parameter1 must be given if parameter2 is given") 
```

`--parameter1`如果也可以由 触发，这会变得有点棘手`--p1`，但你明白了。然后你可以使用

```
if (set(sys.argv).intersection(('--p2',...)) and 
    not set(sys.argv).intersection(('--p1',...))) 
```

这里的优点是它不需要任何特定的顺序。（`--p2`不需要`--p1`在命令行上遵循）。`option_strings`而且，和以前一样，您可以通过返回的属性获取将触发您的特定操作的命令字符串列表`parser.add_argument(...)`。例如

```
import argparse
import sys   
parser=argparse.ArgumentParser()
action1=parser.add_argument('--foo')
action2=parser.add_argument('--bar',
                            help="Only use this if --foo is set")

argv=set(sys.argv)
if (( argv & set(action2.option_strings) ) and 
      not ( argv & set(action1.option_strings) )):
                #^ set intersection
     parser.error(' or '.join(action1.option_strings)+
                  ' must be given with '+
                  ' or '.join(action2.option_strings)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-25T20:24:02.863

您可以使用[parse_known_args()](http://docs.python.org/dev/library/argparse.html#argparse.ArgumentParser.parse_known_args)`--parameter1`在添加`--parameter2`到解析器之前检查是否已给出。

```
import argparse

parser = argparse.ArgumentParser()
parser.add_argument('--parameter1', dest='p1')
args = parser.parse_known_args()[0]
if args.p1:
  parser.add_argument('--parameter2', dest='p2')
args = parser.parse_args()

if args.p1:
  print args.p1
if args.p2:
  print args.p2 
```

结果：

```
$ python myScript.py --parameter1 a
a
$ python myScript.py --parameter1 a --parameter2 b
a
b
$ python myScript.py --parameter2 b
usage: myScript.py [-h] [--parameter1 P1]
myScript.py: error: unrecognized arguments: --parameter2 b 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-12T15:39:10.377

一种想法是手动检查调用的输出`parser.parse_args()`并引发异常，否则如果`--parameter2`使用但未使用则失败`--parameter1`。

您还可以尝试设置[自定义操作](http://docs.python.org/library/argparse.html#action)（向下滚动一点）以`--parameter2`检查`--parameter1`名称空间内是否存在。

最后，您可以尝试使用[subparsers](http://docs.python.org/library/argparse.html#other-utilities)，尽管我不知道它是否会让您为`--parameter1`.

# spring - Spring JDBC RowMapper 用于急切获取

> ID：11455220
> 
> 赞同：14
> 
> 时间：2012-07-12T15:26:26.933
> 
> 标签：spring, spring-jdbc

问题是关于 RowMapper 在我们希望使用 spring jdbc 急切获取详细信息的主/详细信息场景中的最佳实践用法。

假设我们有 Invoice 和 InvoiceLine 类。

```
public class Invoice{
    private BigDecimal invId;
    private Date invDate;
    private List<InvoiceLine> lines;
}
public class InvoiceLine{
    private int order;
    private BigDecimal price;
    private BigDecimal quantity;
} 
```

当使用带有行映射器的 Spring Jdbc 时，我们通常有一个

```
public class InvoiceMapper implements RowMapper<Invoice>{
    public Invoice mapRow(ResultSet rs, int rowNum) throws SQLException {
         Invoice invoice = new Invoice();
         invoice.setInvId(rs.getBigDecimal("INVID"));
         invoice.setInvDate(rs.getDate("INVDATE"));
         return invoice;
    }
} 
```

现在的问题是我想急切地获取与此发票实例相关的 InvoiceLine。如果我在 rowmapper 类中查询数据库可以吗？还是有人喜欢另一种方式？我使用下面的模式，但对此并不满意。

```
public class InvoiceMapper implements RowMapper<Invoice>{
    private JdbcTemplate jdbcTemplate;
    private static final String SQLINVLINE=
            "SELECT * FROM INVOICELINES WHERE INVID = ?";

    public Invoice mapRow(ResultSet rs, int rowNum) throws SQLException {
         Invoice invoice = new Invoice();
         invoice.setInvId(rs.getBigDecimal("INVID"));
         invoice.setInvDate(rs.getDate("INVDATE"));
         invoice.setLines(jdbcTemplate.query(SQLINVLINE, 
                          new Object[]{invoice.getInvId},new InvLineMapper());

         return invoice;
    }
} 
```

我觉得这种方法有问题，但找不到更好的方法。如果有人能告诉我为什么这是一个糟糕的设计，我会非常高兴，如果是这样，正确的用法是什么。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-12T17:11:11.463

[ResultSetExtractor](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/jdbc/core/ResultSetExtractor.html)是执行此操作的更好选择。执行一个连接两个表的查询，然后遍历结果集。您将需要一些逻辑来聚合属于同一发票的多行 - 通过按发票 ID 排序并检查 ID 何时更改或使用如下示例所示的映射。

```
jdbcTemplate.query("SELECT * FROM INVOICE inv JOIN INVOICE_LINE line " +
   + " on inv.id = line.invoice_id", new ResultSetExtractor<List<Invoice>>() {

    public List<Invoice> extractData(ResultSet rs) {
        Map<Integer,Invoice> invoices = new HashMap<Integer,Invoice>();
        while(rs.hasNext()) {
            rs.next();
            Integer invoiceId = rs.getInt("inv.id");
            Invoice invoice = invoces.get(invoiceId);
            if (invoice == null) {
               invoice = invoiceRowMapper.mapRow(rs);
               invoices.put(invoiceId,invoice);
            }
            InvoiceItem item = invLineMapper.mapRow(rs);
            invoice.addItem(item);  
        }
        return invoices.values();
    }

}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-09-21T14:01:02.213

公认的基于 的解决方案[`ResultSetExtractor`](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/jdbc/core/ResultSetExtractor.html)可以变得更加模块化和可重用：在我的应用程序中，我创建了一个`CollectingRowMapper`接口和一个抽象实现。请参阅下面的代码，它包含 Javadoc 注释。

## CollectingRowMapper 接口：

```
import org.springframework.jdbc.core.RowMapper;

/**
 * A RowMapper that collects data from more than one row to generate one result object.
 * This means that, unlike normal RowMapper, a CollectingRowMapper will call
 * <code>next()</code> on the given ResultSet until it finds a row that is not related
 * to previous ones.  Rows <b>must be sorted</b> so that related rows are adjacent.
 * Tipically the T object will contain some single-value property (an id common
 * to all collected rows) and a Collection property.
 * <p/>
 * NOTE. Implementations will be stateful (to save the result of the last call
 * to <code>ResultSet.next()</code>), so <b>they cannot have singleton scope</b>.
 * 
 * @see AbstractCollectingRowMapper
 * 
 * @author Pino Navato
 **/
public interface CollectingRowMapper<T> extends RowMapper<T> {
    /**
     * Returns the same result of the last call to <code>ResultSet.next()</code> made by <code>RowMapper.mapRow(ResultSet, int)</code>.
     * If <code>next()</code> has not been called yet, the result is meaningless.
     **/
    public boolean hasNext();
} 
```

## 抽象实现类：

```
import java.sql.ResultSet;
import java.sql.SQLException;

/**
 * Basic implementation of {@link CollectingRowMapper}.
 * 
 * @author Pino Navato
 **/
public abstract class AbstractCollectingRowMapper<T> implements CollectingRowMapper<T> {

    private boolean lastNextResult;

    @Override
    public T mapRow(ResultSet rs, int rowNum) throws SQLException {
        T result = mapRow(rs, null, rowNum);
        while (nextRow(rs) && isRelated(rs, result)) {
            result = mapRow(rs, result, ++rowNum);
        }           
        return result;
    }

    /**
     * Collects the current row into the given partial result.
     * On the first call partialResult will be null, so this method must create
     * an instance of T and map the row on it, on subsequent calls this method updates
     * the previous partial result with data from the new row.
     * 
     * @return The newly created (on the first call) or modified (on subsequent calls) partialResult.
     **/
    protected abstract T mapRow(ResultSet rs, T partialResult, int rowNum) throws SQLException;

    /**
     * Analyzes the current row to decide if it is related to previous ones.
     * Tipically it will compare some id on the current row with the one stored in the partialResult.
     **/
    protected abstract boolean isRelated(ResultSet rs, T partialResult) throws SQLException;

    @Override
    public boolean hasNext() {
        return lastNextResult;
    }

    protected boolean nextRow(ResultSet rs) throws SQLException {
        lastNextResult = rs.next();
        return lastNextResult;
    }
} 
```

## ResultSetExtractor 实现：

```
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.List;

import org.springframework.jdbc.core.ResultSetExtractor;
import org.springframework.util.Assert;

/**
 * A ResultSetExtractor that uses a CollectingRowMapper.
 * This class has been derived from the source code of Spring's RowMapperResultSetExtractor.
 * 
 * @author Pino Navato
 **/
public class CollectingRowMapperResultSetExtractor<T> implements ResultSetExtractor<List<T>> {
    private final CollectingRowMapper<T> rowMapper;
    private final int rowsExpected;

    /**
     * Create a new CollectingRowMapperResultSetExtractor.
     * @param rowMapper the RowMapper which creates an object for each row
     **/
    public CollectingRowMapperResultSetExtractor(CollectingRowMapper<T> rowMapper) {
        this(rowMapper, 0);
    }

    /**
     * Create a new CollectingRowMapperResultSetExtractor.
     * @param rowMapper the RowMapper which creates an object for each row
     * @param rowsExpected the number of expected rows (just used for optimized collection handling)
     **/
    public CollectingRowMapperResultSetExtractor(CollectingRowMapper<T> rowMapper, int rowsExpected) {
        Assert.notNull(rowMapper, "RowMapper is required");
        this.rowMapper = rowMapper;
        this.rowsExpected = rowsExpected;
    }

    @Override
    public List<T> extractData(ResultSet rs) throws SQLException {
        List<T> results = (rowsExpected > 0 ? new ArrayList<>(rowsExpected) : new ArrayList<>());
        int rowNum = 0;
        if (rs.next()) {
            do {
                results.add(rowMapper.mapRow(rs, rowNum++));
            } while (rowMapper.hasNext());
        }
        return results;
    }

} 
```

上面的所有代码都可以作为库重用。您只需子类`AbstractCollectingRowMapper`化并实现这两个抽象方法。

## 使用示例：

给定如下查询：

```
SELECT * FROM INVOICE inv 
         JOIN INVOICELINES lines
      on inv.INVID = lines.INVOICE_ID
order by inv.INVID 
```

您可以只为两个连接的表编写一个映射器：

```
public class InvoiceRowMapper extends AbstractCollectingRowMapper<Invoice> {

    @Override
    protected Invoice mapRow(ResultSet rs, Invoice partialResult, int rowNum) throws SQLException {
        if (partialResult == null) {
            partialResult = new Invoice();
            partialResult.setInvId(rs.getBigDecimal("INVID"));
            partialResult.setInvDate(rs.getDate("INVDATE"));
            partialResult.setLines(new ArrayList<>());
        }

        InvoiceLine line = new InvoiceLine();
        line.setOrder(rs.getInt("ORDER"));
        line.setPrice(rs.getBigDecimal("PRICE"));
        line.setQuantity(rs.getBigDecimal("QUANTITY"));
        partialResult.getLines().add(line);

        return partialResult;
    }

    /** Returns true if the current record has the same invoice ID of the previous ones. **/
    @Override
    protected boolean isRelated(ResultSet rs, Invoice partialResult) throws SQLException {
        return partialResult.getInvId().equals(rs.getBigDecimal("INVID"));
    }

} 
```

最后说明：我主要使用 Spring Batch，在一个自定义子类中`CollectingRowMapper`：我在[另一个答案](https://stackoverflow.com/a/46346438/685806)中描述了这个解决方案。使用 Spring Batch，您可以在获取下一组相关行之前处理每组相关行，因此您可以避免加载可能很大的整个查询结果。`AbstractCollectingRowMapper`[`JdbcCursorItemReader`](https://docs.spring.io/spring-batch/apidocs/org/springframework/batch/item/database/JdbcCursorItemReader.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-12T15:56:40.577

你在这里重现的`1 + n`问题。

要解决它，您需要使用将外部查询更改为连接，然后手工制作一个循环来将平面连接结果集解析到您的`Invoice 1 -> * InvLine`

```
List<Invoice> results = new ArrayList<>();
jdbcTemplate.query("SELECT * FROM INVOICE inv JOIN INVOICE_LINE line on inv.id = line.invoice_id", null, 
    new RowCallbackHandler() {
    private Invoice current = null;
    private InvoiceMapper invoiceMapper ;
    private InvLineMapper lineMapper ;

    public void processRow(ResultSet rs) {
        if ( current == null || rs.getInt("inv.id") != current.getId() ){
            current = invoiceMapper.mapRow(rs, 0); // assumes rownum not important
            results.add(current);
        }
        current.addInvoiceLine( lineMapper.mapRow(rs, 0) );
    }
} 
```

我显然没有编译这个......希望你明白这个想法。还有另一种选择，使用休眠或任何 JPA 实现，他们开箱即用地做这种事情，将为您节省大量时间。

更正：应该真正使用`ResultSetExtractor`@gkamal在他的答案中使用的，但总体逻辑仍然存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-09T05:32:45.667

## **最简单的方法**

你可以**简单地**使用这个库[——SimpleFlatMapper](https://simpleflatmapper.org/0104-getting-started-springjdbc.html)已经解决了这个问题。您需要做的就是`ResultSetExtractor`使用`JdbcTemplateMapperFactory`.

```
import org.simpleflatmapper.jdbc.spring.JdbcTemplateMapperFactory;

private final ResultSetExtractor<List<Invoice>> resultSetExtractor = 
    JdbcTemplateMapperFactory
        .newInstance()
        .addKeys("id") // the column name you expect the invoice id to be on
        .newResultSetExtractor(Invoice.class);

String query = "SELECT * FROM INVOICE inv JOIN INVOICE_LINE line on inv.id = line.invoice_id"

List<Invoice> results = jdbcTemplate.query(query, resultSetExtractor); 
```

将此依赖项添加到`pom.xml`

```
<dependency>
    <groupId>org.simpleflatmapper</groupId>
    <artifactId>sfm-springjdbc</artifactId>
    <version>8.2.1</version>
</dependency> 
```

这是一篇可供参考的文章 - [https://arnaudroger.github.io/blog/2017/06/13/jdbc-template-one-to-many.html](https://arnaudroger.github.io/blog/2017/06/13/jdbc-template-one-to-many.html)

以下是不同用法的示例 - [https://github.com/arnaudroger/SimpleFlatMapper/blob/master/sfm-springjdbc/src/test/java/org/simpleflatmapper/jdbc/spring/test/JdbcTemplateMapperFactoryTest.java](https://github.com/arnaudroger/SimpleFlatMapper/blob/master/sfm-springjdbc/src/test/java/org/simpleflatmapper/jdbc/spring/test/JdbcTemplateMapperFactoryTest.java)

# mysql - mySQL查询多个分组依据

> ID：11455221
> 
> 赞同：0
> 
> 时间：2012-07-12T15:26:28.813
> 
> 标签：mysql, group-by

我如何将这两个查询组合成 1 并在大表上高效运行？

```
SELECT  field1, count(1) as requestCount
FROM table1
WHERE date_complete >= '2012-06-12 00:00:00' 
      AND date_complete <= '2012-07-12 23:59:59' 
GROUP BY field1

SELECT field2, count(1) as completeCount
FROM table1
WHERE date_complete >= '2012-06-12 00:00:00' 
      AND date_complete <= '2012-07-12 23:59:59' 
GROUP BY field2 
```

表包含涉及多个用户的进程的信息。例如，假设第一人创建请求，第二人完成请求，第三人通过提交来关闭请求。

我想计算每个用户在特定时间范围内请求、完成和归档的数量

我希望这两个结合起来看起来像

```
+----------------+--------------+
| field1         | requestCount |
+----------------+--------------+
| PJB            |            1 |
| RFD            |            6 |
| YAS            |            4 |
+----------------+--------------+

+

+---------+---------------+
| field2  | completeCount |
+---------+---------------+
| PJB     |            4  |
| YAS     |            5  |
+---------+---------------+

=

+----------------+--------------+---------------+
| Username       | requestCount | completeCount |
+----------------+--------------+---------------+
| PJB            |            1 |             4 |
| RFD            |            6 |             0 |
| YAS            |            4 |             5 |
+----------------+--------------+---------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:56:51.653

只是在这里猜测，但我认为您需要：

```
SELECT
    u .Username
  , t1.requestCount
  , t2.completeCount
FROM
        ( SELECT field1 AS Username
          FROM table1
          UNION
          SELECT field2
          FROM table2
        ) AS u
    LEFT JOIN
        ( SELECT field1
               , COUNT(*) AS requestCount
          FROM table1
          WHERE date_complete >= '2012-06-12' 
            AND date_complete < '2012-07-13' 
          GROUP BY field1
        ) AS t1  
            ON t1.field1 = u.Username
    LEFT JOIN
        ( SELECT field2
               , COUNT(*) AS completeCount
          FROM table1
          WHERE date_complete >= '2012-06-12' 
            AND date_complete < '2012-07-13' 
          GROUP BY field2 
        ) AS t2
            ON t2.field2 = u.Username   
; 
```

如果您有一个`user`表，只需将第一个派生表替换为`user AS u`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:04:04.247

```
select  o.USERNAME, a.requestCount , b.completeCount from (SELECT  USERNAME
FROM owner_login_pass )
 as o left join (SELECT field1, count(1) as requestCount
FROM table1
WHERE date_complete between '2012-06-12 00:00:00' and '2012-07-12 23:59:59' 
GROUP BY field1) as a on o.USERNAME=a.field1
left join (SELECT field2, count(1) as completeCount
FROM table1
WHERE date_complete between '2012-06-12 00:00:00' and '2012-07-12 23:59:59' 
GROUP BY field2) as b on o.USERNAME=b.field2 
```

您需要确保 field1 拥有您需要为其显示数据的所有用户。否则，您还需要加入用户表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T15:29:42.757

我不认为你可以将它们结合起来（除了 with `UNION`），但你可以通过使用来稍微改进它：`WHERE date_complete BETWEEN '2012-06-12 00:00:00' AND '2012-07-12 23:59:59'`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T15:30:10.290

你需要 ：：：

```
Select * from 
(
   SELECT  field1, count(1) as requestCount
FROM table1
WHERE date_complete between '2012-06-12 00:00:00' and '2012-07-12 23:59:59'  
GROUP BY field1 ) tab1
left join
(
SELECT fied2, count(1) as completeCount
FROM table1
WHERE date_complete between '2012-06-12 00:00:00' and '2012-07-12 23:59:59' 
GROUP BY field2) tab2 on (tab1.field1 = tab2.field2) 
```

# twitter-bootstrap - 我应该一起包含 bootstrap.css 和 bootstrap-responsive.css 吗？

> ID：11455222
> 
> 赞同：44
> 
> 时间：2012-07-12T15:26:29.437
> 
> 标签：twitter-bootstrap, twitter-bootstrap-2

我应该包含两个 css 文件还是一个就足够了？

```
<link rel="stylesheet" href="bootstrap/css/bootstrap.min.css" media="all" />
<link rel="stylesheet" href="bootstrap/css/bootstrap-responsive.min.css" media="all" /> 
```

或者

```
<link rel="stylesheet" href="bootstrap/css/bootstrap-responsive.min.css" media="all" /> 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-07-12T15:34:48.947

**引导程序 2**

您应该包括两者，第一个定义了 html 元素的所有样式，而第二个添加了对布局的响应性。

**引导程序 3**

只会包含一个 css 文件。

快乐编码！

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2013-05-04T21:33:52.653

**自 Bootstrap 2**起，这两个文件都应包含在内。

* * *

但是使用**Bootstrap 3**只会包含一个 css 文件。

> 响应式 CSS 不再是独立的，所有响应式功能现在都编译到附近的核心 bootstrap.css 文件中。不再需要单独的文件，因此已被删除

来源：[https ://github.com/twitter/bootstrap/pull/6342](https://github.com/twitter/bootstrap/pull/6342)

编辑：如果你想包含 bootstrap 3 css，你可以使用这个 CDN 版本：

```
<link rel="stylesheet" type="text/css" 
   href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css"/> 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-07-12T15:44:33.053

您可以使用官方[Twitter Bootstrap 下载帮助](http://twitter.github.com/bootstrap/customize.html)程序来创建一个名为`bootstrap.css`(resp. `bootstrap.min.css`) 的 CSS 文件，该文件将包含以下 CSS 部分：

*   脚手架
*   基础 CSS
*   组件
*   JS 组件
*   各种各样的
*   响应式

# git - 混帐并合并。将一个目录从一个分支检出到另一个分支

> ID：11455226
> 
> 赞同：0
> 
> 时间：2012-07-12T15:26:49.523
> 
> 标签：git, github

我有例如两个分支。掌握和发展。我创建了一个名为 master_fix 的分支。

我有一个位于主分支和开发分支中的目录。在我创建的 master_fix 分支中，我只想从开发分支更新一个文件夹。我怎么做？

例如，所有分支都有文件夹A，但处于不同的阶段。我只想使用开发分支中的文件夹 A 并更新 master_fix 分支中的文件夹 A。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T15:33:52.007

如果您想使用`development`的版本更新您的工作树`folder1`，请确保您在`master_fix`分支中，然后运行：

```
$ git checkout development -- folder1 
```

然后，如果您希望它保留在`master_fix`分支上，则必须添加并提交该更改。

# url - Orchard 我可以根据投影仪小部件的 url 或页面 ID 进行查询吗？

> ID：11455227
> 
> 赞同：3
> 
> 时间：2012-07-12T15:26:49.703
> 
> 标签：url, widget, orchardcms, projector

我想知道我是否可以为投影仪小部件创建查询，如果它在某个页面上（通过 url 或 id）过滤带有特定标签的内容类型？因此，如果在 Page1 上显示用 Tag1 标记的项目，如果 Page2 显示用 Tag2 等标记的项目......？我已经尝试了一段时间，似乎无法到达任何地方。

我有 3 种内容类型，称为“产品”，它们显示在投影页面上。每个产品都有自己的页面，该页面有一个投影仪小部件，该小部件查询以显示称为“功能”的内容类型，并相应地标记。例如 home/products/Product1 应该只显示标记为“prod1”的“功能”。

我正在尝试做的事情可能吗？如果是这样，如何以及如果没有，是否有（更好的）替代方案？我知道我可以用图层来做到这一点，但是我有太多的产品必须为每个产品生产一个图层。

我真的很感激一个答案，因为我已经坚持了 2 天了！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T15:05:06.387

您可能可以创建一个令牌，为您提供当前显示的产品。然后，您可以为您的投影小部件编写自定义过滤器。在过滤器中，您可以过滤带有令牌标记的“功能”（当前显示的产品。）。

您应该观看 Bertrand Le Roy 的预测视频，以更好地理解预测。 [http://www.youtube.com/watch?v=Ka55wTTXZg8](http://www.youtube.com/watch?v=Ka55wTTXZg8)

# sql - SQL：内部联接 + 不存在

> ID：11455229
> 
> 赞同：5
> 
> 时间：2012-07-12T15:26:58.420
> 
> 标签：sql, inner-join, not-exists

我正在尝试创建一个需要加入 3 个表的 SQL 语句

**注册学生**

```
EnrollID     UserID     SubjID
1            1          1
2            1          2
3            1          3
4            3          1
5            7          2 
```

**学生**

```
StudentID     UserID     YearID
1             1          1
2             3          1
3             7          1 
```

**科目**

```
SubjID     SubjCode     YearID
1          English      1
2          Math         1
3          Science      1 
```

输出应该是......

```
UserID
2
3 
```

因为`User 1`已经注册了所有科目，而`User 3`和`User 7`仍然显示，因为一些科目仍未注册。

我有以下 SQL 语句没有运气：

```
SELECT Students.UserID 
FROM Students 
WHERE Students.YearID = 1 
    AND Students.UserID NOT IN (SELECT EnrollStudents.UserID 
                                FROM EnrollStudents) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T15:34:29.570

```
SELECT s.UserID
FROM Students AS s
LEFT OUTER JOIN EnrollStudents AS es ON s.UserID = es.UserID
GROUP BY s.UserID
HAVING COUNT(DISTINCT(es.SubjID)) < (SELECT COUNT(*) FROM Subjects) 
```

...等一下。我认为您在示例输出和`EnrollStudents`表格中混淆了“StudentID”和“UserID”。

[http://sqlfiddle.com/#!3/61618/1](http://sqlfiddle.com/#!3/61618/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:46:44.887

看起来您正在尝试让所有第一年没有参加所有第一年必修课程的学生获得资格，因此只希望获得学生 2 和 3。您的数据包含单个 yearID 组中的每个人，但我怀疑您实际上拥有跨越多年的数据，并且您明确关注的是第一年的那些学生，以及那些也与第一年要求相关的科目。

第一个查询 (YrSubjects) 结果将预先汇总相关单年的班级数量，因此不必为每个学生重复执行此操作。只有一次......作为未分配的 JOIN 到查询的其余部分将是笛卡尔，但每人一条记录，无论如何都没有重复。

接下来是其余的表/连接。获取仅与第一年相关的科目注册的学生。 where 子句明确限制为仅那些“第一年”学生。

最后的 HAVING 子句应用的入学人数少于第一年要求的总科目数。使用此查询，您不会“固定”到您期望的某个硬编码数量的主题中......

```
SELECT 
      S.StudentID 
   FROM 
      ( select count(*) as YrClasses 
           from 
              Subjects 
           where YearID = 1 ) YrSubjects,
      Students S
         JOIN EnrollStudents ES
            on S.UserID = ES.UserID
            JOIN Subjects S
               ON ES.SubjID = S.SubjID
              AND S.YearID = 1
   WHERE 
      S.YearID = 1 
   HAVING
      count(*) < YrSubjects.YrClasses 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T15:30:08.263

```
select s.UserID
from Students s
left outer join (
    select UserID
    from EnrollStudents
    group by UserID
    having count(distinct SubjID) = 3
) a on s.UserID = a.UserID
where a.UserID is null 
    and s.YearID = 1 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!3/1a9e8/2/0)

# sql - FULLTEXT - 通过匹配单词 1st 然后通过出现 2nd 得分

> ID：11455230
> 
> 赞同：2
> 
> 时间：2012-07-12T15:27:00.013
> 
> 标签：sql

我正在努力寻找一种按特定顺序排列我的 MySQL FULLTEXT 结果的方法。假设我有这些记录：

```
ID  |   Title                              
----+-----------------------------------
1   |   Test test test truck from a test company.
2   |   Test car from Germany.
3   |   A car from London. 
```

现在，如果我运行以下查询：

```
SELECT id, MATCH (title,keywords) AGAINST ('test car') AS score
FROM titles_tbl
WHERE MATCH (title,keywords) AGAINST ('test car')
ORDER BY score DESC 
```

（注意：在我的应用程序中，我在标题和关键字两列中使用 FULLTEXT。在这个问题中，我仅以查询一列为例。）

它按应有的方式返回所有记录，但顺序让我感到困惑。我可以理解分数是什么以及它来自哪里，但我希望它以不同的顺序排列。上面的查询会返回类似这样的结果：

```
ID  |   Title                                            | Score
----+----------------------------------------------------+---------
1   |   Test test test truck from a test company.        | 1.5
2   |   Test car from Germany.                           | 1.0
3   |   A car from London.                               | 0.5 
```

在第 1 行中，它发现“测试”的次数比其他任何东西都多，即使在该行中根本没有找到“汽车”，它的得分也更高。我实际上希望它在“测试”和“汽车”两个词都匹配的地方得分更高。因此，实际上，第 2 行，“Test car from Germany”实际上应该排名较高，因为它包含两个词，而第 2 和 3 行应该排名较低，因为它们不包含这两个词，但应该按它们的次数排序被提及。

所以，简而言之，我想对我的结果进行排序，从所有匹配的单词开始，以一个或多个匹配的单词结尾，然后按单词实际被提及的次数排序。

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T05:06:18.137

在布尔模式下尝试：

```
mysql> select id, title, MATCH(title) against ('test car' in boolean mode) m  
         from titles_tbl 
        order by MATCH(title) against ('test car' in boolean mode) desc\G 
*************************** 1\. row ***************************
id: 2
title: Test car from Germany
m: 2
*************************** 2\. row ***************************
id: 1
title: Test test test truck from a test company.
m: 1
*************************** 3\. row ***************************
id: 3
title: A car from London
m: 1
3 rows in set (0.00 sec) 
```

我在 MySQL 5.5 上对此进行了测试。如果 IN BOOLEAN MODE 未正确评分您的搜索，请确保您运行的是最新版本。

# sql - 涉及 CHAR 的 SQL 域定义

> ID：11455233
> 
> 赞同：0
> 
> 时间：2012-07-12T15:27:02.167
> 
> 标签：sql, dns

我是 DB 和 SQL 的新手。我有以下作为起点：

```
CREATE DOMAIN student_numbers AS CHAR(4)
CHECK (SUBSTR(VALUE, 1, 1) = 'S' 
```

我想做的是只检查“S”，我想检查“A”到“Z”。

如果我想检查“AAAA”到“ZZZZ”，还需要做什么？我认为有可能假设 AAA1 是范围内的有效值，这不是正确的行为。

任何指导或进一步阅读资源都将受到欢迎。

感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:35:23.143

我认为您可以在 CREATE DOMAIN 语句中使用正则表达式，例如：

```
CREATE DOMAIN student_numbers AS CHAR(4)
CHECK SUBSTR(VALUE, 1, 1) ~ '[A-Z]' 
```

或第二个：

```
CREATE DOMAIN student_numbers AS CHAR(4)
CHECK VALUE ~ '^[A-Z]{4}$' 
```

# android - 制作android布局，宽度错误

> ID：11455234
> 
> 赞同：0
> 
> 时间：2012-07-12T15:27:06.797
> 
> 标签：android, layout

谁能告诉我如何创建这样的布局？我对中间元素有问题。 ![在此处输入图像描述](../Images/57bec4718f347638a4babaab76b4dbc8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:33:29.117

你只需要中间视图还是三个？

对于前者，只需在左右两侧创建一个具有 60dp 填充的视图。

对于后者，创建边缘视图，固定，宽度为 60dp，对于中间视图，设置以下属性：layout_width 的 0dp，layout_weight 的 1。

并将所有这些视图放在一个 LinearLayout 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:30:23.237

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="60dp"
   android:orientation="horizontal" >

   <FrameLayout
    android:layout_width="60dp" 
    android:layout_height="fill_parent"
    android:background="#333333"
    />

   <FrameLayout
    android:layout_width="0dp" 
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:background="#FF3333"
    />

   <FrameLayout
    android:layout_width="60dp" 
    android:layout_height="fill_parent"
    android:background="#333333"
    />

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T15:31:03.317

内部包含 3 个元素的线性布局：

左右元素将具有 android:layout_width="60dp" 而中央元素将具有：

```
android:layout_width="0dp"
android:layout_weight="1" 
```

这样它会适应设备屏幕宽度

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T15:32:51.410

只需`layout_margin`在任何元素中使用该属性，例如 TextView：

```
<TextView
    android:id="@+id/text"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="60dp"
    android:layout_marginRight="60dp"
    android:background="#ff0000" /> 
```

# symfony - Symfony2，KnpPagination Bundle：使用图标排序

> ID：11455235
> 
> 赞同：0
> 
> 时间：2012-07-12T15:27:13.500
> 
> 标签：symfony, twig, knppaginator

我正在使用 KNPPanginator Bundle，对它非常满意。

但我不知道如何用图标而不是文本替换顶部的分拣机。这是我的树枝代码：

```
 {% block pagination_head %}
    <thead>
    <tr>

        <th>{{ pagination.sortable('likes', 'u.likePoints')|raw }}</th>
        <th>{{ pagination.sortable('title', 'u.title')|raw }}</th>
        <th>{{ pagination.sortable('date', 'u.created')|raw }}</th>

    </tr>
    </thead>
    {% endblock %} 
```

那么我需要做什么来获得一个重击图标，而不是“喜欢”这个词？我尝试`<img src...>`在那里粘贴，但没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T16:04:56.673

Well, first of all you need to have an image asset of a thumb-up. Let's say you do get one and put it here: `web/images/like.png`

Then all you need to do is this (assuming `pagination.sortable('likes', 'u.likePoints')` returns the string "like"):

```
<th>{{ asset( "images/" ~ pagination.sortable('likes', 'u.likePoints') ~ ".png" }}</th> 
```

Of course, you'll probably want to put the image resource in your bundle and publish it with `assets:install web`, for encapsulations/organizational purposes.

## EDIT

There are a lot of ways to solve what you're talking about. One would be to make a [macro](http://twig.sensiolabs.org/doc/tags/macro.html).

In Your\Bundle\Resources\views\Macros\bootstrap.html.twig

```
{% macro icon_class( type ) %}
  {% set type_class_map = {
    like: 'icon-user'
  } %}
  {{ type_class_map[type] }}
{% endmacro %} 
```

Then, in the template you need it in

```
{% import "YourBundle:Macros:bootstrap.html.twig" as bootstrap %}

{% set heading = pagination.sortable('likes', 'u.likePoints') %}
<th class="{{ bootstrap.icon_class(heading) }}">{{ heading }}</th> 
```

# algorithm - 是否可以实现 O(1) 空间复杂度的快速排序？

> ID：11455242
> 
> 赞同：10
> 
> 时间：2012-07-12T15:27:31.787
> 
> 标签：algorithm, sorting, complexity-theory, quicksort, space-complexity

从我在[维基百科对快速排序空间复杂度的解释中](http://en.wikipedia.org/wiki/Quicksort#Space_complexity)了解到，快速排序的空间复杂度来自于它的递归性质。我很好奇是否有可能以非递归方式实现快速排序，并且在这样做的过程中，以恒定的空间复杂度实现它。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-13T01:35:29.760

维基百科并不总是错误的。而且，正如该部分所建议的，有一种方法可以使用常量空间进行快速排序或类似的操作。重要的一点。快速排序本身可以定义为递归分区算法。如果是这样，那么根据定义，它将需要 O(n) 堆栈空间。但是，我假设您没有使用这种迂腐的定义。

只是快速回顾一下分区是如何工作的。给定一个数组、一个起点和一个终点，选择一个分区值。然后拆分数组中的数据元素，因此小于分区值的所有内容都在左侧，而大于分区值的所有内容都在右侧。这样做的一个好方法是从每一端开始，找到第一个不属于的值，然后交换它们。顺便说一下，这使用了常量空间。

因此，算法的每一步都在遍历数组。让我们记住这个事实。

现在，我们可以做一个有趣的观察。如果我们以深度优先的方式进行递归分区，那么我们只需要存储每个范围的端点。在下降的过程中，数组的左边缘始终是开始。终点逐渐接近起点，直到只有两个可以交换的元素。此时，开始移动了两个槽，但我们不知道结束。因此，查找结尾并继续该过程。然后在下一步“向上”中，我们需要下一个端点，以此类推。

问题是：除了将实际值存储在堆栈中之外，我们还能通过其他方式找到终点吗？

嗯，答案是“是”。

递归分区算法中的每一步都会读取所有数据。我们可以对数据做一些额外的计算。特别是，我们可以计算最大值和第二大值。（我也会计算最小值，但这是一种优化。）。

我们对值所做的是标记范围。在第一次拆分时，这意味着将第二个最大值放在拆分点，将最大值放在范围的末尾。在返回树的路上，你知道范围从哪里开始。范围的结尾是第一个大于该值的值。

瞧！您可以在不存储任何数据的情况下向上移动“递归”树。您只是使用所提供的数据。

完成此操作后，您只需将算法从递归算法更改为 while 循环。while 循环重新排列数据，在每一步设置起点和终点。它选择一个拆分器，拆分数据，标记起点和终点，然后在数据的左侧重复。

当它下降到最小单位时，它会检查它是否完成（它是否到达数据的末尾）。如果不是，它会查看一个单位的数据点以找到第一个标记。然后它通过数据寻找终点。顺便说一下，这种搜索在复杂性上等同于数据的分区，因此它不会增加复杂性的顺序。然后它遍历这个数组，继续这个过程直到它完成。

如果数据中有重复项，则该过程会稍微复杂一些。但是，如果有 log(N) 重复项，我几乎会主张删除重复项，使用剩余的插槽作为堆栈对数据进行排序，然后将它们重新合并。

为什么这是快速排序。快速排序算法是一种分区交换算法。该算法通过选择一个拆分器值、在两侧划分数据并重复此过程来进行。正如杰弗里在他的回答中指出的那样，递归不是必需的。这是一个很大的方便。

该算法以完全相同的方式进行。分区遵循相同的基本规则，左侧记录较小，右侧记录较大。唯一的区别是在每个分区内，特定的值被选择在分区的边缘。通过仔细放置这些值，不需要额外的“每步”存储。由于这些值属于分区，因此根据分区和重复的快速排序原则，这是一个有效的分区。

如果有人争辩说快速排序*必须*使用递归，那么这将无法通过严格的测试（并且原始问题的答案是微不足道的）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T15:31:38.497

完全有可能以非递归方式实现它，但是您可以通过实现与正常函数调用/返回堆栈分开的堆栈来实现。它可以通过只存储基本信息而不是大量（大部分相同的）函数返回地址来节省一些空间，但它的大小仍然是对数的，而不是恒定的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-08-30T11:52:55.567

Branislav Ďurian 在 1986 年提出了 Quicksort 的恒定空间版本。参见他的论文“Quicksort without a stack”。在 J. Gruska、B. Rovan 和 J. Wiedermann，编辑，计算机科学数学基础论文集，计算机科学讲义第 233 卷，第 283-289 页。施普林格出版社，1986 年。

其他几位作者对此进行了跟进。你可以找 Bing-Chao 和 Knuth (1986)；韦格纳（1987）；Kaldewaij 和 Udding（1991 年）；格里斯 (1994)。

# jira - 有没有办法在 Jira 中拥有跨项目的 fixVersions？

> ID：11455245
> 
> 赞同：6
> 
> 时间：2012-07-12T15:27:45.923
> 
> 标签：jira

我们有几个独立的团队，他们有自己的优先事项和工作。然而，这些团队都在同一个代码库上，所以当我们部署时，每个人的代码都会同时发布。

你是如何使用 Jira 处理这个问题的？

我想到了几种可能性：

*   如果有跨项目的 fixVersions，那将是理想的，因为每个版本都会同步
*   我们可以使用标签并更新每个人用来细分人们看到的所有过滤器
*   我们可以手动保持 fixVersions 同步，ug
*   我们可以使用他们的 API 来管理 fixVersions，让它们保持同步
*   完全不同的东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-20T07:51:05.440

对于那些感兴趣的人：我们刚刚将 JIRA 的 Version Sync 插件发布到 Marketplace 中，这正是这样做的。它将自动在多个项目之间保持版本同步，其中您有一个“主”项目和无限数量的链接项目，版本更改会传播到这些项目。

[https://marketplace.atlassian.com/plugins/net.collabsoft.plugins.jira.jira-version-sync](https://marketplace.atlassian.com/plugins/net.collabsoft.plugins.jira.jira-version-sync)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T04:39:00.423

在[https://jira.atlassian.com/browse/JRA-2698](https://jira.atlassian.com/browse/JRA-2698)有一个现有的 JIRA ，您可以投票并耐心等待直到时间结束。

有几种方法可以在不编码的情况下做到这一点：

*   让他们共享同一个项目，但使用“组件”下拉菜单来分隔工作。
*   使用新的 Greenhopper 至少您可以进行跨项目冲刺，然后您只需要手动同步跨项目的版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T22:17:18.337

我不确定是否有针对此问题的开箱即用解决方案，但您可以通过[Jira Command Line Tool](https://bobswift.atlassian.net/wiki/display/JCLI/JIRA+Command+Line+Interface)跨项目自动创建版本。

# php - php - 邮件附件不同

> ID：11455252
> 
> 赞同：0
> 
> 时间：2012-07-12T15:28:17.197
> 
> 标签：php, function, email, attachment

这是我用来发送邮件的 php 函数（在这里找到的，不是我的）：

```
function send_email($to, $subject, $msg, $from, $file){

$separator = md5(time());

$eol = PHP_EOL;

$attachment = chunk_split(base64_encode($file));

$headers  = "From: ".$from.$eol;
$headers .= "MIME-Version: 1.0".$eol; 
$headers .= "Content-Type: multipart/mixed; boundary=\"".$separator."\"";

$body = "--".$separator.$eol;
$body .= "Content-Transfer-Encoding: 7bit".$eol.$eol;

$body .= "--".$separator.$eol;
$body .= "Content-Type: text/html; charset=\"iso-8859-1\"".$eol;
$body .= "Content-Transfer-Encoding: 8bit".$eol.$eol;
$body .= "<pre>".$msg."</pre>".$eol;

$body .= "--".$separator.$eol;
$body .= "Content-Type: application/octet-stream; name=\"".$file."\"".$eol; 
$body .= "Content-Transfer-Encoding: base64".$eol;
$body .= "Content-Disposition: attachment".$eol.$eol;
$body .= $attachment.$eol;
$body .= "--".$separator."--";

mail($to, $subject, $body, $headers); 
```

}

正文是正确的，但附件文件不同。我不知道为什么，但我认为它被覆盖了......

这就是我调用函数的方式：

```
send_email( $_POST['email'], 'Your CV file', $msg, 'admin@mydomain.com', basename( $_FILES['file']['name']) ) 
```

附件文件应由用户上传。我检查了上传的文件，和我上传的文件是一样的，但是发送后就不一样了。我不知道该怎么办。

谢谢！

# jquery - Imagemapster 取消选择问题

> ID：11455253
> 
> 赞同：1
> 
> 时间：2012-07-12T15:28:22.237
> 
> 标签：jquery, imagemapster

我已经阅读了我能找到的所有内容，也许我忽略了一些简单的东西。我有一张我的校园地图，所有内容都突出显示并正确选择。我遇到的唯一问题是：单击时，每个建筑物都会弹出一个信息气泡。这些气泡上有一个“X”关闭按钮。我试图让建筑物在单击时取消选择。（不幸的是，我无法提供实时链接，目前仅限员工/学生访问）。

这是地图设置：

```
<img id="campus" style="top:420px; right:600px;" class=map src="localhost/display/images/map_off.jpg" usemap="#world" >

<map id="world" name="world" >                                                                                                                                

<area data-name="12" id="22" onclick="show_me(''12'')" shape="poly" coords="717,219,725" href="#/" alt="Building 1" />
<area data-name="22" id="22" onclick="show_me(''22'')" shape="poly" coords="693,459,699,459,693,472" href="#/" />
<area data-name="1" id="1" onclick="show_me(''1'')" shape="poly" coords="50,103,303,103,303,154,50,154,50,103" href="#/" alt="Building 2 /">
<area data-name="2" id="2" onclick="show_me(''2'')" shape="poly" coords="311,103,455,103,476,123,476,194,315,194" href="#/" alt="Building 3" /> 
```

等等...

设置：

```
$(document).ready(function() {
      map = $("#campus");
      map.mapster({
              fillOpacity: 1,
              singleSelect: true,
              render_highlight: {
                 altImage: "localhost/display/images/map_on.jpg"
              },
              render_select: {
                 altImage: "localhost/display/images/map_on.jpg"
              }
      });    
}); 
```

和我的关闭功能：

关闭功能：

```
function closeWindow() {
          var selected_area = map.mapster(''get'');
          alert(selected_area); //this shows the correct map_key

          var select_status = map.mapster("get",map_key);
          alert(select_status); //but this shows 'false'

          $("#display_bubble").css("display","none");

        } 
```

有任何想法吗？我觉得我在俯瞰一些小东西，但我就是找不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T00:37:50.320

如果其他人发生这种情况，我在 options: 下设置了“mapKey”，而不是：

```
$(document).ready(function() {
  map = $("#campus");
  map.mapster({
          fillOpacity: 1,
          ...
  });
 options:({   
   mapKey: "data-name",
   ... 
```

});

它必须是：

```
$(document).ready(function() {
  map = $("#campus");
  map.mapster({
          mapKey: "data-name",
          fillOpacity: 1,
          ...
  }); 
  options:({
          ... 
```

});

# html - 离线时 HTML5 缓存清单链接断开

> ID：11455264
> 
> 赞同：0
> 
> 时间：2012-07-12T15:28:53.807
> 
> 标签：html, offline, cache-manifest, broken-links

我已经成功实现了一个 HTML5 缓存清单文件，以在本地存储我的 Web 应用程序的页面和资源，以便在用户离线时可以查看其中的一部分。

我遇到的问题是，如果用户从那里开始`www.example.com/`然后从那里导航到`www.example.com/products/`，页面上的链接`www.example.com/products/`被破坏（缺少 URL 路径的一部分）并恢复到我的`FALLBACK`离线页面，表明它们不是存储在 中`CACHE`，尽管我明确告诉他们要存储。

这是我的 cache.manifest 文件的一部分：

```
CACHE MANIFEST
# Version 0.0.1

http://www.example.com/
http://www.example.com/products/
http://www.example.com/products/item-page/

FALLBACK:
/ http://www.example.com/offline.php 
```

当我从主页导航到产品页面时，一切正常。当我然后单击链接导航到 时`item-page`，浏览器会显示我的`offline.php`页面，表明该页面`http://www.example.com/products/item-page/`未存储在缓存中。

我错过了什么吗？或者为什么这不起作用？请帮忙，并提供代码/解释:)

**编辑**- 我有`.htaccess`文件将我的`index.php`页面重定向到`directory/`（`index.php`从 URL 中删除）。这似乎是导致缓存问题的原因，因为当我将 HTML 中的链接从 更改`item-page/index.php`为时，`item-page/`它可以工作。有任何想法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-28T11:34:56.463

您的服务器将 item-page/ 重定向到 item-page/index.php，并且不会自动缓存重定向。

你应该

1.  除了 item-page （它们实际上是两个页面）之外，将 item-page/index.php 添加到您的清单中，或者
2.  使 item-page/ 加载 index.php 的内容，无需重定向

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:16:29.360

如果将此部分添加到清单文件中，它应该可以工作

```
NETWORK:
* 
```

# ios - Ios - 当开关打开/关闭时如何显示/隐藏字段

> ID：11455267
> 
> 赞同：0
> 
> 时间：2012-07-12T15:29:10.410
> 
> 标签：ios, storyboard

我的屏幕上有一个开关，当用户希望打开该选项时，我需要从该用户那里收集更多信息。所以我需要展示两个文本字段。如果用户不想使用该功能，那么他们选择关闭开关，我不需要收集联系信息，我想隐藏收集信息的文本字段。

这是我的场景：

![在此处输入图像描述](../Images/f2adbab8a941d94376c8d3d14ada20ad.png)

当用户切换开关时，我需要将“侦听器”和隐藏/显示额外文本字段和标签的代码放在哪里？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:47:58.787

在 IB 中使用`Value changed`你的 UISwitch 来检测从`OFF`到的变化，`ON`反之亦然（并链接到你自己的`IBAction`方法！）。`UITextField`然后你可以通过使用这个setter来隐藏： `[textField setHidden:YES];`。希望这对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:49:15.410

`UIViewController`包含交换机是处理来自交换机的事件的逻辑位置。从图像中我看到你已经连接了开关。您可以声明一个 IBAction 方法并将开关的 valueChanged 事件连接到它：

```
- (IBAction)switchValueChanged:(id)sender; 
```

在该方法的实现中，您可以隐藏/显示标签和文本字段。快速而简单的方法是让那些额外的标签和字段始终出现在视图上，但隐藏起来。您可以切换`hidden`属性以响应用户切换开关。

您还可以将这些额外的标签和字段包装在您动态添加到主视图或从主视图中删除以响应切换的视图中。

# linux - 找出符号链接的位置，Linux？

> ID：11455268
> 
> 赞同：1
> 
> 时间：2012-07-12T15:29:12.860
> 
> 标签：linux, unix

我知道有一些方法可以通过遵循符号链接来找出文件的实际物理位置。但是，如果您知道文件的物理位置并且确定存在符号链接，是否有可能知道符号链接在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:32:37.310

好吧，是的，但是您必须遍历所有已安装的文件系统[`find(1)`](http://linux.die.net/man/1/find)才能找到任何链接。

另请参阅：[https ://stackoverflow.com/a/4535344/140740](https://stackoverflow.com/a/4535344/140740)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:32:38.273

`ls -l`不显示？它应该，否则看手册。

编辑：

看看这个线程：[Linux：查找给定“原始”文件的所有符号链接？（反向“阅读链接”）](https://stackoverflow.com/questions/4532241/linux-find-all-symlinks-of-a-given-original-file-reverse-readlink)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T15:33:24.047

据我所知，文件系统根本不包含该信息。这意味着您唯一的方法是遍历文件系统，查看所有符号链接并标记指向所需文件的符号链接。

不理想，我知道。符号链接工具（apt-get install symlinks）将帮助您做到这一点。小心，它不会跨越文件系统边界！

# iphone - 带有动画启动画面的 iPhone/iPad 应用程序

> ID：11455272
> 
> 赞同：1
> 
> 时间：2012-07-12T15:29:32.140
> 
> 标签：iphone, objective-c, ios, animation, splash-screen

我正在寻找一种方法来为 iOS 应用程序的 Splashscreen 设置动画。我搜索了很多，但我发现的只是伪解决方案，在应用程序加载后添加一个屏幕（`applicationDidFinishLoading:`）。对我来说，这似乎不是一个合适的解决方案，因为用户必须等待额外的几秒钟。在我看来，这不是启动画面的目的——增加加载时间。

所以我正在寻找的是：有没有一种方法可以在不增加加载时间的情况下真正为启动画面设置动画？当应用程序启动时，我正在考虑一个小的旋转圆圈。

我想答案是否定的...... :-/

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:42:47.087

[iOS 人机界面指南](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/UEBestPractices/UEBestPractices.html)强烈建议尽快打开应用程序，这意味着没有启动画面：

> **避免显示关于窗口或闪屏。**一般来说，尽量避免提供任何类型的启动体验，阻止人们立即使用您的应用程序。

Apple 打算让您使用静态图像，使您的应用在打开时看起来像是立即准备就绪。因此，如果你真的想要动画，你必须等待`applicationDidFinishLaunching:`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:35:49.743

不可以。启动画面必须是 PNG 图像，并且 PNG 图像不能动画。我认为您曾经能够使用 JPG 图像，但那里的故事相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T15:41:32.907

简单的答案是“不。这是不可能的，因为‘启动画面’必须是 PNG 图像。” 但是，我想知道该应用程序需要多长时间才能启动？只要您能够向应用程序添加子视图，Default.png 启动屏幕就会消失，这通常在`applicationDidFinishLaunching:`方法中完成。如果您在实际挂钩以启动视图链之前在该方法中进行了大量设置，那么这里有机会使用@George 在评论中描述的相同方法。

您可以添加作为默认图像的子视图作为带有活动指示器的背景。然后，设置您的所有应用程序（例如，如果您正在从 Internet 检索数据），当设置完成和/或数据已完成加载时，删除该子视图并像往常一样显示您的主视图。

因此，不，您不能在应用程序启动时为 Default.png 启动屏幕设置动画，但是如果您在该`applicationDidFinishLaunching:`方法中进行了大量设置，请在该设置之前添加一个子视图，向用户提供一些反馈，然后执行需要一段时间的代码。

***编辑***

我应该注意，它不一定是 PNG 文件，但就您关于动画的问题而言没有区别。当我说“Default.png”文件时，我主要是在谈论约定。

# c# - 从 WCF 中的 HTTP 响应中删除服务器

> ID：11455273
> 
> 赞同：4
> 
> 时间：2012-07-12T15:29:33.160
> 
> 标签：c#, wcf, iis-7.5

我有一个在 IIS 7.5 上运行的 Internet 公开 WCF 服务，我需要保护它。我想删除 HTTP 响应中的“服务器”标头。

我已经使用如下代码实现了 IDispatchMessageInspector。

```
public void BeforeSendReply(ref Message reply, object correlationState)
{
    var context = WebOperationContext.Current;
    if (context != null)
    {
        context.OutgoingResponse.Headers.Remove(
            HttpResponseHeader.Server);
    }
} 
```

但是，Server 标头仍在响应中。在调试时，我可以看到`OutgoingResponse.Headers`不包括`HttpResonseHead.Server`，如果我编写自己的值，它显然会被 IIS 管道中的某些东西覆盖。

**编辑 1**

试过以下，也不好

```
public class SecureServerHeaderModule : IHttpModule
{
    #region Implementation of IHttpModule

    public void Init(HttpApplication context)
    {
        context.PreSendRequestHeaders += OnPreSendRequestHeaders;
    }

    public void Dispose() { }

    #endregion

    private static void OnPreSendRequestHeaders(object sender, EventArgs e)
    {
        var context = HttpContext.Current;
        if (context != null)
        {
            context.Response.Headers.Remove("Server");                
        }
    }
}

<system.web>
  <httpModules>
    <add "snip" />
  </httpModlules>
</system.web>
<system.webServer>
  <modules>
    <add "snip" />
  </modlules>
</system.webServer> 
```

**编辑 2**

也没有工作。

```
public void BeforeSendReply(ref Message reply, object correlationState)
{
    var context = OperationContext.Current;
    if (context != null)
    {
        context.OutgoingMessageProperties.Remove(
            HttpResponseHeader.Server.ToString());
        context.OutgoingMessageProperties.Add(
            HttpResponseHeader.CacheControl.ToString(), "no-store");
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T14:07:07.347

这使用`IDispatchMessageInspector`

```
public class SecureBehaviour : IDispatchMessageInspector
{
    public object AfterReceiveRequest(ref Message request,
        IClientChannel channel, InstanceContext instanceContext)
    {
        return null;
    }

    public void BeforeSendReply(ref Message reply, object correlationState)
    {

        var httpCtx = HttpContext.Current;
        if (httpCtx != null)
        {
            httpCtx.Response.Headers.Remove(
                HttpResponseHeader.Server.ToString());
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T21:40:17.800

您是否尝试过编辑 web.config 并使用[system.webServer下的](http://www.iis.net/ConfigReference/system.webServer)[customHeaders](http://www.iis.net/ConfigReference/system.webServer/httpProtocol/customHeaders)标签。

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.webServer>
    <httpProtocol>
      <customHeaders>
        <remove name="Server" />
        <remove name="X-Powered-By" />
        <remove name="X-AspNet-Version" />
      </customHeaders>
    </httpProtocol>
  </system.webServer>
</configuration> 
```

这导致我的 C# ASP.NET 应用程序仅具有以下响应标头：

```
HTTP/1.1 200 OK
Cache-Control: max-age=3600, public
Content-Length: 20992
Content-Type: text/html; charset=utf-8
Content-Encoding: gzip
Last-Modified: Tue, 15 May 2012 18:01:11 GMT
ETag: "HHktEL5IWA6rspl4Bg2ZxNmnV3gTUCLt2cTldSsl05A="
Vary: Accept-Encoding
Date: Tue, 17 Jul 2012 21:38:38 GMT 
```

虽然我承认我没有尝试过使用“服务器”标头，但这种方法似乎效果很好。我没有尝试使用“Server”标头的原因是我的 IHttpModule 中的以下代码可以正常工作。

```
 void PreSendRequestHeaders(object sender, EventArgs e)
    {
        HttpApplication application = (HttpApplication)sender;
        if(HttpRuntime.UsingIntegratedPipeline)
        {
            application.Response.Headers.Remove("Server");
            application.Response.Headers.Remove("Expires");
            application.Response.Headers.Remove("Cache-Control");
            application.Response.AddHeader("Cache-Control", "max-age=3600, public");
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T20:59:05.210

由于您在 IIS 中托管您的服务并且已经启动了一个 HttpModule，因此请尝试设置 ASP.NET 兼容模式，以便您可以访问 HttpContext.Current。您将需要进行以下更改：

修改您的 web.config 并将以下内容添加到 System.ServiceModel

```
<system.serviceModel>
  ...
  <serviceHostingEnvironment aspNetCompatibilityEnabled="true"/>
</system.serviceModel> 
```

使用此属性装饰您的服务类：

```
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Required)] 
```

再给 HttpModule 一个机会，你应该有更好的运气。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T15:40:18.543

您有权访问注册表吗？如果是这样你可以试试

```
HKLM\SYSTEM\CurrentControlSet\Services\HTTP\Parameters\DisableServerHeader 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-16T11:02:39.360

工作正在进行中。

这篇[博](http://blogs.msdn.com/b/tmarq/archive/2007/08/30/iis-7-0-asp-net-pipelines-modules-handlers-and-preconditions.aspx)文就不同的管道以及 ASP.NET 模块为何不能正常工作的原因提供了更多答案。

更多关注。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-03T07:24:57.590

对于我的自托管 WCF 服务，来自 M Afifi 的答案不起作用。我必须设置一个空标题：

```
httpCtx.OutgoingResponse.Headers.Add(HttpResponseHeader.Server.ToString(), string.Empty); 
```

这会从响应中删除标头：

```
access-control-allow-headers →Content-Type, Authorization, Accept
access-control-allow-methods →GET, POST
access-control-allow-origin →*
content-type →application/json; charset=utf-8
date →Mon, 03 Jul 2017 07:22:17 GMT
status →200 
```

# keyboard - 当 UIPopoverViewController 与 UITextField 第一响应者一起关闭时崩溃

> ID：11455286
> 
> 赞同：0
> 
> 时间：2012-07-12T15:30:16.177
> 
> 标签：keyboard, uitextfield, uipopovercontroller

当为 UITextField 显示键盘时，每当通过在另一个视图中触摸来解除我的弹出框时，我的应用程序就会因此错误而崩溃 -

`[NSISObjectiveLinearExpression coefficientForVariable:]: unrecognized selector sent to instance 0x1cd93850`

我找到[了这篇文章](https://stackoverflow.com/questions/4061788/storing-uitextfield-contents-before-view-pops)，解释说我应该`endEditing`进入`viewWillDisappear`，但它没有帮助，在调试时它甚至在进入之前就崩溃了`viewWillDisappear`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:30:16.737

我发现这`popoverControllerShouldDismissPopover`是在`UIPopoverViewControllerDelegate`坠机前调用的，所以我`endEditing`在那边种了，它起作用了。

这是代表的代码 -

```
- (BOOL)popoverControllerShouldDismissPopover:(UIPopoverController *)popoverController
{
    [self.view.window endEditing: YES];

    return YES;
} 
```

# .net - 为什么我的 vb 代码没有在 stop 语句上停止？

> ID：11455293
> 
> 赞同：1
> 
> 时间：2012-07-12T15:30:35.490
> 
> 标签：.net, vb.net

我正在维护一些似乎不会在停止语句上停止的 VB 代码。

当我在某些条件下运行程序时，此代码会从代码的最后一行抛出 System.Exception("Timed out")。

但是，如果您逐行浏览代码，似乎它永远无法达到此语句。首先它尝试返回 MyBase.Save。如果它不能，那么它将命中停止语句并停止。

但似乎程序只是跳过了 stop 语句。

如何调试此代码？具体来说，它如何跳过停止语句以到达语句 Throw New System.Exception("Timed out")

```
Public Overrides Function Save() As Uber

    If IsDeleted AndAlso Not CanDeleteObject() Then
        Throw New System.Security.SecurityException("User is not authorized to remove a Uber")
    ElseIf IsNew AndAlso Not CanAddObject() Then
        Throw New System.Security.SecurityException("User is not authorized to add a Uber")
    ElseIf Not IsNew AndAlso Not CanEditObject() Then
        Throw New System.Security.SecurityException("User is not authorized to update a Uber")
    End If

    Try
        Return MyBase.Save
    Catch ex As Exception

        Stop   //why is the code not stopping here?
    End Try

    Throw New System.Exception("Timed out")  //this line executes, but I don't see how the code gets there

End Function 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T15:38:36.627

我认为 Stop 只会为调试创建一个断点。

代码的执行将继续。

我认为 Return MyBase.Save 中引发了异常。它被 Catch 块捕获，但它实际上被该块忽略，因为 ex 从未使用过。

# c++ - 在 gcc 中将目录的包含顺序设置为最后

> ID：11455295
> 
> 赞同：1
> 
> 时间：2012-07-12T15:30:47.443
> 
> 标签：c++, c, gcc, include, directory

在 gcc 中包含带有 -I 命令行选项的目录会将目录附加到包含目录的头部。我想在系统包含目录之后添加一个要搜索的目录。在 gcc 中有没有办法做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:41:13.333

-nostdinc -I/first/include ... -I/last/include （请注意，您还需要正常的包含）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-21T08:51:51.023

Gcc 有一个`-idirafter`标志，它将包含目录添加到最后搜索的目录（在每个用 指定的目录之后`-I`）

# c++ - 如果存储字符串的 char 数组小于字符串，C++ 真正在哪里存储字符串？

> ID：11455302
> 
> 赞同：4
> 
> 时间：2012-07-12T15:31:10.633
> 
> 标签：c++, arrays, string, char, strlen

我正在测试“C++ Premiere”书中关于 C++ 中字符串的示例。

```
const int size = 9;
char name1[size];
char name2[size] = "C++owboy";   // 8 characters here

cout << "Howdy! I'm " << name2 << "! What's your name?" << endl;

cin >> name1;  // I input "Qwertyuiop" - 11 chars. It is more than the size of name1 array;

// now I do cout
cout << "Well, your name has " << strlen(name1) << " letters";  // "Your name has 11 letters".
cout << " and is stored in an array of " << size(name1) << " bytes"; // ...stored in an array of 9 bytes. 
```

11 个字符如何存储在一个数组中，仅用于 8 个字符 + '\0' 字符？编译时会变宽吗？还是字符串存储在其他地方？

另外，我不能这样做：

```
const int size = 9;
char name2[size] = "C++owboy_12345";   // assign 14 characters to 9 chars array 
```

但可以做我上面写的：

```
cin >> name1;   // any length string into an array of smaller size 
```

这里的诀窍是什么？我使用 NetBeans 和 Cygwin g++ 编译器。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T15:34:21.903

将比数组大小更多的条目写入数组允许调用*未定义的行为*。计算机可能将该数据存储在任何地方，或者根本不存储它。

通常，数据存储在内存中接下来发生的任何内容中。这可能是另一个变量、指令流，甚至是椅子下方炸弹的控制寄存器。

简而言之：您编写了一个缓冲区溢出错误。不要那样做。

* * *

*只是为了好玩*：**未定义的行为**是 C++ 标准没有评论的行为。它可以是任何东西，因为标准对它没有任何限制。

在一个特殊情况下，这种行为将我的银行余额从 10 美元增加到 18 亿美元：http: [//ideone.com/35FQW](http://ideone.com/35FQW)

你能明白为什么那个程序会这样吗？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T15:35:14.800

name1 被赋予一个内存地址。如果您向其写入 80 个字节，它将从该位置开始在内存中写入超过 80 个字节。如果有一个变量存储在 name1 的地址 + 20，那么它的数据将被您写入 name1 的 80 个字节覆盖。这就是 C/C++ 中的工作方式，这些被称为缓冲区溢出，可用于破解程序。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-12T16:07:11.827

这是典型的缓冲区溢出。这就是为什么如果你将输入放在缓冲区中，你总是应该检查输入的大小。这是正在发生的事情：

在 C++（和 C）中，数组名只是指向数组第一个元素的指针。编译器知道数组的大小并且会做一些编译时检查。但是，在运行时，它只会将其视为 char*。

当你这样做时`cin >> name1`，你将一个 char* 传递给`cin`. `cin`不知道分配的空间有多大——它只有一个指向某个内存的指针。因此，它假定您分配了足够的空间，写入所有内容，并超过了数组的末尾。这是一张图片：

```
Bytes   1  2  3  4  5  6  7  8  9  10 11 12 13 14 15
Before  |-----name1 array-------|  |--- other data-|
After   Q  w  e  r  t  y  u  i  o  p  \0 |-er data-| 
```

如您所见，您已经覆盖了存储在数组之后的其他数据。有时这些其他数据只是垃圾，但有时它很重要并且可能意味着一个棘手的错误。更不用说，这是一个安全漏洞，因为攻击者可以用用户输入覆盖程序内存。

关于大小的混淆是因为`strlen`它将计算字节直到它找到一个`'\0'`（空终止符），这意味着它找到了 10 个字符。另一方面`size(name1)`，使用编译器提供的数组的实际大小。

由于这些问题，每当您看到一个将数组作为参数的 C 函数时，它也会使用数组大小​​。否则无法判断它有多大。为了避免这些问题，最好使用像 std::string 这样的 C++ 对象。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-12T15:35:06.917

这里没有技巧:)您正在写入缓冲区之外的内存，这是一种未定义的行为

# c# - 为什么 double.Parse("0.05") 返回 5.0？

> ID：11455306
> 
> 赞同：6
> 
> 时间：2012-07-12T15:31:18.460
> 
> 标签：c#, .net, parsing, double

我正在从我的 App.config 中读取一个值；这是：

```
 <add key="someValue" value="0.05"/> 
```

我尝试通过执行以下操作将其转换为双倍：

```
 var d = double.Parse(ConfigurationManager.AppSettings["someValue"]); 
```

我得到 5.0 而不是 0.05。

你能建议吗？我做错了什么，我应该如何解析这个？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T15:33:46.123

那是针对您的文化设置的，测试相同，但用逗号代替点，您将看到该工作

```
var d = double.Parse("0,05"); 
```

要解决此问题，您可以使用解析函数的跟随重载

```
var d = double.Parse(ConfigurationManager.AppSettings["someValue"], CultureInfo.InvariantCulture); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-12T15:34:04.797

也许问题出在文化环境中。它们可能存在许多问题，例如逗号作为数字分隔符。当您使用非文化值时，例如配置文件，您应该明确指定您需要 InvariantCulture。尝试

```
var d = double.Parse(ConfigurationManager.AppSettings["someValue"],
                     CultureInfo.InvariantCulture); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-12T15:37:33.597

这段代码：

```
var nfi = new NumberFormatInfo {
    NumberGroupSeparator = ".",
    NumberDecimalSeparator = ","
};
Console.WriteLine(double.Parse("0.05", nfi)); 
```

打印`5`也是如此，因此问题出在您的文化设置中。

尝试

```
var d = double.Parse(
    ConfigurationManager.AppSettings["someValue"], 
    CultureInfo.InvariantCulture); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T15:33:58.297

使用 double.Parse 时始终传递您的文化信息。在比利时，它是“0,05”。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-12T15:38:36.623

这是因为文化背景。请确保 ”。” 是您当前文化中的分隔符。

# objective-c - Cocos2d 2.x CCGLView 在 UITabBarViewController 上选项卡时停止渲染

> ID：11455308
> 
> 赞同：0
> 
> 时间：2012-07-12T15:31:24.843
> 
> 标签：objective-c, cocos2d-iphone, uitabbarcontroller

我有一个包含两个视图控制器的 UITabBarController。一种是 Xcode 创建新的“选项卡式应用程序”时创建的默认视图控制器。另一个，我称之为 cocos2d 视图控制器，是一个 UIViewController，它包含一个 CCGLView，它占据了整个 nib。它在该场景中有一个 CCScene 和一个 CCLayer，在该 CCLayer 中有一个 CCSprite，它在图层中来回移动。

我运行程序，首先显示 cocos2d 视图控制器，精灵快乐地移动。当我选择第二个选项卡并返回时，精灵不再移动。更多地来回敲击不会使它再次移动。我在 didSelectViewController 中设置了一个断点并检查了 sharedDirector。它没有暂停，它有一个帧率和一切。

我还有一个单独的选项卡式应用程序，它实现 ccTouchesBegan 并根据用户手势移动图层。在那个应用程序中，仍然检测到触摸，图层的位置发生了变化，但设备/模拟器上的视图永远不会改变。即使我改变位置，标签离开和返回，原始未移动的图像也会显示。

问题：为什么 cocos2d 视图明显停止了它的渲染循环？

这是我在我的测试应用程序的 cocos2d 视图控制器中得到的：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    director = [CCDirector sharedDirector];
    [director setDisplayStats:YES];

    [self runCocos2d];
}

- (void) runCocos2d
{
    glView.multipleTouchEnabled = YES;
    [[CCDirector sharedDirector] setView:self.glView];

    scene = [TestScene node];
    [[CCDirector sharedDirector] pushScene:scene];
    [scene startScene];
} 
```

StartScene 只是在我的图层中调用此方法

```
- (void) start
{
    CGSize winSize = [CCDirector sharedDirector].winSize;

    CCSprite *seeker = [CCSprite spriteWithFile:@"seeker.png"];
    seeker.position = ccp(0, winSize.height/2);

    [self addChild: seeker z:0];

    // move the table constantly so we can see if anything it rendering
    id moveToPosition1 = [CCMoveTo actionWithDuration: 3
                                         position: ccp(winSize.width, winSize.height/2)];
    id moveToPosition2 = [CCMoveTo actionWithDuration: 3
                                         position: ccp(0, winSize.height/2)];
    id sequence = [CCSequence actions:moveToPosition1, moveToPosition2, nil];

    id moveOverAndOver = [CCRepeatForever actionWithAction:sequence];

    [seeker runAction: moveOverAndOver];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:01:08.410

我摸索着在共享导向器上调用不同的方法，发现在选择 cocos2d 视图控制器时调用 startAnimation 可以使其正常工作。我用谷歌搜索了一段时间，但没有想到，所以希望这能节省一些时间。

# mysql - MYSQL Workbench 导出将无法在 mysql (Ubuntu) 中正确获取

> ID：11455309
> 
> 赞同：1
> 
> 时间：2012-07-12T15:31:27.183
> 
> 标签：mysql, mysql-workbench

我在使用 mysql 中的 source 命令从 mysql 工作台导入创建脚本时遇到问题。

如果我将它粘贴到 PhpMYAdmin 上的 sql 框中，导出工作正常，但是当我在 ubuntu 上的 mysql 中使用源代码时，它看起来正在工作，但没有任何表存在。

```
SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL';

DROP SCHEMA IF EXISTS `techforceapp` ;
CREATE SCHEMA IF NOT EXISTS `techforceapp` DEFAULT CHARACTER SET latin1 COLLATE latin1_swedish_ci ;
USE `techforceapp` ;

-- -----------------------------------------------------
-- Table `techforceapp`.`techs`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `techforceapp`.`techs` ;

CREATE  TABLE IF NOT EXISTS `techforceapp`.`techs` (
  `idtechs` INT NOT NULL AUTO_INCREMENT ,
  `firstname` VARCHAR(45) NULL ,
  `lastname` VARCHAR(45) NULL ,
  `address` VARCHAR(45) NULL ,
  `city` VARCHAR(45) NULL ,
  `state` VARCHAR(45) NULL ,
  `zip` VARCHAR(45) NULL ,
  `phone` VARCHAR(45) NULL ,
  `email` VARCHAR(45) NULL ,
  `sms` VARCHAR(45) NULL ,
  `password` VARCHAR(45) NULL ,
  `twitter` VARCHAR(45) NULL ,
  `facebook` VARCHAR(45) NULL ,
  `linkedin` VARCHAR(45) NULL ,
  `dateadded` TIMESTAMP NULL DEFAULT now() ,
  `enddate` DATETIME NULL ,
  `paylevel1` FLOAT NULL ,
  `paylevel2` FLOAT NULL ,
  `paylevel3` FLOAT NULL ,
  `admin` INT NULL ,
  PRIMARY KEY (`idtechs`) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `techforceapp`.`customers`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `techforceapp`.`customers` ;

CREATE  TABLE IF NOT EXISTS `techforceapp`.`customers` (
  `idcustomers` INT NOT NULL AUTO_INCREMENT ,
  `firstname` VARCHAR(45) NULL ,
  `lastname` VARCHAR(45) NULL ,
  `address` VARCHAR(45) NULL ,
  `city` VARCHAR(45) NULL ,
  `state` VARCHAR(45) NULL ,
  `zip` VARCHAR(45) NULL ,
  `phone1` VARCHAR(45) NULL ,
  `email` VARCHAR(45) NULL ,
  `phone2` VARCHAR(45) NULL ,
  `referral` VARCHAR(45) NULL ,
  `discount` INT NULL ,
  `sms` VARCHAR(45) NULL ,
  `password` VARCHAR(45) NULL ,
  `twitter` VARCHAR(255) NULL ,
  `facebook` VARCHAR(255) NULL ,
  `linkedin` VARCHAR(255) NULL ,
  `dateadded` TIMESTAMP NULL DEFAULT now() ,
  `role` VARCHAR(45) NULL ,
  `notes` TEXT NULL ,
  PRIMARY KEY (`idcustomers`) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `techforceapp`.`status`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `techforceapp`.`status` ;

CREATE  TABLE IF NOT EXISTS `techforceapp`.`status` (
  `idstatus` INT NOT NULL AUTO_INCREMENT ,
  `status` VARCHAR(45) NULL ,
  PRIMARY KEY (`idstatus`) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `techforceapp`.`jobs`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `techforceapp`.`jobs` ;

CREATE  TABLE IF NOT EXISTS `techforceapp`.`jobs` (
  `idjobs` INT NOT NULL AUTO_INCREMENT ,
  `customers_idcustomers` INT NOT NULL ,
  `invoiceprice` FLOAT NULL ,
  `discount` INT NULL ,
  `milage` INT NULL ,
  `locations_idlocations` INT NULL ,
  `redo` VARCHAR(45) NULL ,
  `redojobid` VARCHAR(45) NULL ,
  `date` DATETIME NULL ,
  `dateadded` TIMESTAMP NULL DEFAULT now() ,
  `assignedtechid` INT NULL DEFAULT 0 ,
  `description` TEXT NULL ,
  `nextaction` VARCHAR(255) NULL ,
  `nextactiondate` DATETIME NULL ,
  `status_idstatus` INT NOT NULL ,
  `taxes` FLOAT NULL ,
  `quotedamount` FLOAT NULL ,
  PRIMARY KEY (`idjobs`) ,
  INDEX `fk_jobs_customers` (`customers_idcustomers` ASC) ,
  INDEX `fk_jobs_status1` (`status_idstatus` ASC) ,
  CONSTRAINT `fk_jobs_customers`
    FOREIGN KEY (`customers_idcustomers` )
    REFERENCES `techforceapp`.`customers` (`idcustomers` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_jobs_status1`
    FOREIGN KEY (`status_idstatus` )
    REFERENCES `techforceapp`.`status` (`idstatus` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `techforceapp`.`devices`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `techforceapp`.`devices` ;

CREATE  TABLE IF NOT EXISTS `techforceapp`.`devices` (
  `iddevices` INT NOT NULL AUTO_INCREMENT ,
  `type` VARCHAR(45) NULL ,
  `os` VARCHAR(45) NULL ,
  `serial` VARCHAR(45) NULL ,
  `notes` TEXT NULL ,
  `customers_idcustomers` INT NOT NULL ,
  PRIMARY KEY (`iddevices`) ,
  INDEX `fk_devices_customers1` (`customers_idcustomers` ASC) ,
  CONSTRAINT `fk_devices_customers1`
    FOREIGN KEY (`customers_idcustomers` )
    REFERENCES `techforceapp`.`customers` (`idcustomers` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `techforceapp`.`accessories`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `techforceapp`.`accessories` ;

CREATE  TABLE IF NOT EXISTS `techforceapp`.`accessories` (
  `idaccessories` INT NOT NULL AUTO_INCREMENT ,
  `description` VARCHAR(140) NULL ,
  `quantity` INT NULL ,
  `jobs_idjobs` INT NOT NULL ,
  `devices_iddevices` INT NULL ,
  PRIMARY KEY (`idaccessories`) ,
  INDEX `fk_accessories_jobs1` (`jobs_idjobs` ASC) ,
  CONSTRAINT `fk_accessories_jobs1`
    FOREIGN KEY (`jobs_idjobs` )
    REFERENCES `techforceapp`.`jobs` (`idjobs` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `techforceapp`.`lineitems`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `techforceapp`.`lineitems` ;

CREATE  TABLE IF NOT EXISTS `techforceapp`.`lineitems` (
  `idlineitems` INT NOT NULL AUTO_INCREMENT ,
  `jobs_idjobs` INT NOT NULL ,
  `type` VARCHAR(45) NULL ,
  `price` FLOAT NULL ,
  `tax` FLOAT NULL ,
  `description` VARCHAR(140) NULL ,
  PRIMARY KEY (`idlineitems`) ,
  INDEX `fk_lineitems_jobs1` (`jobs_idjobs` ASC) ,
  CONSTRAINT `fk_lineitems_jobs1`
    FOREIGN KEY (`jobs_idjobs` )
    REFERENCES `techforceapp`.`jobs` (`idjobs` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `techforceapp`.`joblogs`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `techforceapp`.`joblogs` ;

CREATE  TABLE IF NOT EXISTS `techforceapp`.`joblogs` (
  `idjoblogs` INT NOT NULL AUTO_INCREMENT ,
  `text` TEXT NULL ,
  `jobs_idjobs` INT NOT NULL ,
  `techs_idtechs` INT NOT NULL ,
  `entrydate` TIMESTAMP NULL DEFAULT now() ,
  `techtime` VARCHAR(45) NULL ,
  PRIMARY KEY (`idjoblogs`) ,
  INDEX `fk_joblogs_jobs1` (`jobs_idjobs` ASC) ,
  INDEX `fk_joblogs_techs1` (`techs_idtechs` ASC) ,
  CONSTRAINT `fk_joblogs_jobs1`
    FOREIGN KEY (`jobs_idjobs` )
    REFERENCES `techforceapp`.`jobs` (`idjobs` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_joblogs_techs1`
    FOREIGN KEY (`techs_idtechs` )
    REFERENCES `techforceapp`.`techs` (`idtechs` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `techforceapp`.`locations`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `techforceapp`.`locations` ;

CREATE  TABLE IF NOT EXISTS `techforceapp`.`locations` (
  `idlocations` INT NOT NULL AUTO_INCREMENT ,
  `customers_idcustomers` INT NOT NULL ,
  `address` VARCHAR(45) NULL ,
  `city` VARCHAR(45) NULL ,
  `state` VARCHAR(45) NULL ,
  `zip` VARCHAR(45) NULL ,
  `notes` TEXT NULL ,
  `phone` VARCHAR(45) NULL ,
  PRIMARY KEY (`idlocations`) ,
  INDEX `fk_locations_customers1` (`customers_idcustomers` ASC) ,
  CONSTRAINT `fk_locations_customers1`
    FOREIGN KEY (`customers_idcustomers` )
    REFERENCES `techforceapp`.`customers` (`idcustomers` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `techforceapp`.`bookmarks`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `techforceapp`.`bookmarks` ;

CREATE  TABLE IF NOT EXISTS `techforceapp`.`bookmarks` (
  `idbookmarks` INT NOT NULL AUTO_INCREMENT ,
  `description` VARCHAR(50) NULL ,
  `url` VARCHAR(255) NULL ,
  PRIMARY KEY (`idbookmarks`) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `techforceapp`.`company`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `techforceapp`.`company` ;

CREATE  TABLE IF NOT EXISTS `techforceapp`.`company` (
  `idcompany` INT NOT NULL AUTO_INCREMENT ,
  `name` VARCHAR(45) NULL ,
  `address` VARCHAR(45) NULL ,
  `city` VARCHAR(45) NULL ,
  `state` VARCHAR(45) NULL ,
  `zip` VARCHAR(45) NULL ,
  `phone` VARCHAR(45) NULL ,
  `email` VARCHAR(45) NULL ,
  `website` VARCHAR(45) NULL ,
  PRIMARY KEY (`idcompany`) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `techforceapp`.`payments`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `techforceapp`.`payments` ;

CREATE  TABLE IF NOT EXISTS `techforceapp`.`payments` (
  `idpayments` INT NOT NULL AUTO_INCREMENT ,
  `type` VARCHAR(45) NULL ,
  `amount` FLOAT NULL ,
  `jobs_idjobs` INT NOT NULL ,
  PRIMARY KEY (`idpayments`) ,
  INDEX `fk_payments_jobs1` (`jobs_idjobs` ASC) ,
  CONSTRAINT `fk_payments_jobs1`
    FOREIGN KEY (`jobs_idjobs` )
    REFERENCES `techforceapp`.`jobs` (`idjobs` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `techforceapp`.`techs`
-- -----------------------------------------------------
START TRANSACTION;
USE `techforceapp`;
INSERT INTO `techforceapp`.`techs` (`idtechs`, `firstname`, `lastname`, `address`, `city`, `state`, `zip`, `phone`, `email`, `sms`, `password`, `twitter`, `facebook`, `linkedin`, `dateadded`, `enddate`, `paylevel1`, `paylevel2`, `paylevel3`, `admin`) VALUES (0, 'Admin', 'Admin', '', '', '', '', '', 'admin', NULL, '$1$TdrF#$WPr2kmoMgPunETRV0KMtA0', '', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1);

COMMIT;

-- -----------------------------------------------------
-- Data for table `techforceapp`.`status`
-- -----------------------------------------------------
START TRANSACTION;
USE `techforceapp`;
INSERT INTO `techforceapp`.`status` (`idstatus`, `status`) VALUES (1, 'New');
INSERT INTO `techforceapp`.`status` (`idstatus`, `status`) VALUES (2, 'In Progress');
INSERT INTO `techforceapp`.`status` (`idstatus`, `status`) VALUES (8, 'Waiting For Customer Info');
INSERT INTO `techforceapp`.`status` (`idstatus`, `status`) VALUES (4, 'Waiting For Parts');
INSERT INTO `techforceapp`.`status` (`idstatus`, `status`) VALUES (5, 'Waiting For Spot On Bench');
INSERT INTO `techforceapp`.`status` (`idstatus`, `status`) VALUES (6, 'Waiting For Payment');
INSERT INTO `techforceapp`.`status` (`idstatus`, `status`) VALUES (7, 'Waiting For Pickup');
INSERT INTO `techforceapp`.`status` (`idstatus`, `status`) VALUES (3, 'Completed');

COMMIT;

-- -----------------------------------------------------
-- Data for table `techforceapp`.`company`
-- -----------------------------------------------------
START TRANSACTION;
USE `techforceapp`;
INSERT INTO `techforceapp`.`company` (`idcompany`, `name`, `address`, `city`, `state`, `zip`, `phone`, `email`, `website`) VALUES (0, 'PC Repair Place', '1 Yemen St', 'Yemen', 'MI', '48195', '555-555-1234', 'us@pc.com', 'www.wefixcomputers.com');

COMMIT; 
```

![在此处输入图像描述](../Images/0dbe702dc75502ceccd360ff2ed4efd9.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:14:08.237

您的屏幕截图看起来好像执行了五个语句（在 SHOW TABLES 语句之前）。如果您运行上面显示的脚本，这比我们预期的要少得多。

检查该 init.sql 脚本的内容。

尝试：

```
SELECT * FROM information_schema.tables WHERE table_schema = 'techforceapp' ; 
```

或者

```
SELECT * FROM information_schema.tables WHERE table_name = 'customers'; 
```

sql_mode 设置为什么？当前的数据库是什么？

```
SELECT @@sql_mode ;
SELECT DATABASE() ; 
```

# hibernate - 使用 JAXB 生成的类的一对多休眠双向映射

> ID：11455310
> 
> 赞同：1
> 
> 时间：2012-07-12T15:31:30.637
> 
> 标签：hibernate, jaxb

是否可以告诉 JAXB 创建 Hibernate 双向映射？
举行班级可以有许多政策孩子。
要将父母的 PK 传递给孩子的 FK，我必须设置

```
policy.setHolding(holding) 
```

然后我可以说

```
session.save(holding) 
```

但是当我使用 JAXB 将 XML 编组为持有对象时它不起作用。更多细节可以在[这里找到](https://stackoverflow.com/questions/11452388/hibernate-mapping-one-to-many-relationshipparents-pk-to-childs-fk/11453445)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:45:20.713

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

您可能对`@XmlInverseReference`EclipseLink JAXB (MOXy) 中用于支持此用例的扩展感兴趣。下面是一个例子：

**顾客**

```
import javax.persistence.*;

@Entity
public class Customer {

    @Id
    private long id;

    @OneToOne(mappedBy="customer", cascade={CascadeType.ALL})
    private Address address;

} 
```

**地址**

```
import javax.persistence.*;
import org.eclipse.persistence.oxm.annotations.*;

@Entity
public class Address implements Serializable {

    @Id
    private long id;

    @OneToOne
    @JoinColumn(name="ID")
    @MapsId
    @XmlInverseReference(mappedBy="address")
    private Customer customer;

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/07/jpa-entities-to-xml-bidirectional.html](http://blog.bdoughan.com/2010/07/jpa-entities-to-xml-bidirectional.html)

# javascript - 将现有的点击功能重新附加到元素

> ID：11455314
> 
> 赞同：1
> 
> 时间：2012-07-12T15:31:52.560
> 
> 标签：javascript, jquery, onclick, click

在我的网站上，我有一个内联编辑，用于快速编辑/保存。它在第一次运行时工作正常，但是，在 jQuery 重新创建`<a>`标记后，它停止工作。这是jQuery：

```
$('form#notice').submit(function(e){
    e.preventDefault();
    var a = $('form#notice input[name=\'act\']').val();
    var n = $('input[name=\'notice\']').val();
    $('span#form').hide(); $('span#adminnotice').html(n).show(); $('span#edit').show();
    $.ajax({
        type: 'POST',
        data: { act:a, set:n },
        success: function(result){
            $('span#edit').html('<img src=\'./images/check.png\' />').delay(1000).fadeOut('slow',     function(){
            $(this).html('<a href=\'#\'>[edit]</a>').fadeIn('fast');
            });
        }
    });
    return false;
});

$('span#edit a').click(function(e){
    e.preventDefault();
    var input = $('span#adminnotice').text();
    var lngth = input.length;
    $('form#notice').html(
    \"<input type='text' name='notice' value='\"+input+\"' style='width:\"+((lngth+1)*6)+\"px' onkeyup=\\\"this.style.width=((this.value.length+1)*6)+'px';\\\" maxlength='256' />\" +
    \"<input type='hidden' name='act' value='adminnotice' />\" +
    \"<input type='submit' value='Update' />\"
    );
    $('span#adminnotice').hide();$('span#edit').hide().html('<img src=\'./images/saving2.gif\' />');$('span#form').show();
    return false;
}); 
```

在第一次运行后，该`.click()`功能停止工作，因为我删除了`<a>`，然后重新添加它。`.click()`如果我复制整个并将其放入 AJAX 的一部分，我可以让它工作`success:`，但是，我知道肯定有一些我不知道的东西，因为我非常怀疑 jQuery 的开发人员会要求程序员复制两次相同的代码。

感谢您的帮助：D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T15:34:41.237

您不需要复制代码，您可以将点击处理程序分配给局部变量并重新使用它：

```
var onClick = function(e) { ... };
$('span#edit a').click(onClick); 
```

或者只是将处理程序应用于未删除的元素（处理程序仍将在事件传播时被触发）：

```
$('#containerDiv').on('click', 'span#edit a', function(e) { ... }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T15:38:08.770

尝试使用 jquery 的委托。

[http://api.jquery.com/delegate/](http://api.jquery.com/delegate/)

描述：基于一组特定的根元素，为现在或将来匹配选择器的所有元素附加一个处理程序到一个或多个事件。

所以你的提交可以被重写为......

```
$('body').delegate('#notice','submit',function(e){
//do stuff here
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T15:40:17.043

```
$('body')on('click', 'span#edit a', function(e){
  e.preventDefault();
  var input = $('span#adminnotice').text();
  var lngth = input.length;
  $('form#notice').html(
  \"<input type='text' name='notice' value='\"+input+\"' style='width:\"+((lngth+1)*6)+\"px' onkeyup=\\\"this.style.width=((this.value.length+1)*6)+'px';\\\" maxlength='256' />\" +
  \"<input type='hidden' name='act' value='adminnotice' />\" +
  \"<input type='submit' value='Update' />\"
);
  $('span#adminnotice').hide();$('span#edit').hide().html('<img src=\'./images/saving2.gif\' />');$('span#form').show();
  return false;
}); 
```

# c - 为已释放的指针重新分配内存？

> ID：11455317
> 
> 赞同：0
> 
> 时间：2012-07-12T15:32:01.087
> 
> 标签：c, pointers, memory-management, malloc

当我尝试使用`realloc`为已被分配的指针分配内存时，`free`出现分段错误。虽然如果我使用它，我不会遇到这个问题`malloc`。

根据我对变量的理解，`free`它相当于一个`NULL`指针，那么为什么会出现这种意外行为呢？我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T15:34:41.753

> 根据我的理解，在变量被释放后它相当于一个 NULL 指针。

指针是一个`NULL`指针，其值为`NULL`; 像`realloc`知道如何解释这个值的标准函数。

指向已释放内存的指针现在是无效指针；它的价值不会改变。 `realloc`不知道它是无效的，并会尝试访问它，从而导致 seg-fault。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T15:33:20.910

已被`free`'d的指针**不**等同于`NULL`指针。调用后，`free`您需要将指针设置为`NULL`自己。

如果您传递一个指向`realloc`已`free`'d 但未**明确**设置为的指针`NULL`，则您可能传递`realloc`了一个无效地址，它将尝试使用该地址，从而导致未定义的行为，从而导致您的段错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-12T15:33:56.277

否`free()`不将指针设置为0，您必须自己做。

如果传递给 realloc 的指针为空，它将为您分配它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T15:33:50.363

不，`free`'d 指针不等同于空指针。 `free`不修改传入的指针，所以指针继续指向同一个内存位置，现在是未分配的内存。

如果您尝试这样`realloc`做，那么内存分配器将变得混乱并破坏其内部结构，这就是您得到段错误的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T15:35:16.120

这个来自 Debian Linux 机器的 man realloc(3) 应该告诉你所有你需要知道的 - 在使用 realloc() 之前基本上不要释放

> realloc() 将 ptr 指向的内存块的大小更改为 size 字节。内容将不变为新旧尺寸中的最小值；新分配的内存将未初始化。如果 ptr 为 NULL，则对于所有 size 值，调用等效于 malloc(size)；如果 size 等于 0，并且 ptr 不为 NULL，则调用等效于 free(ptr)。除非 ptr 为 NULL，否则它一定是由先前对 malloc()、calloc() 或 realloc() 的调用返回的。如果指向的区域被移动，则执行 free(ptr)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-12T15:36:33.393

您传入的指针`realloc`必须是以下两种情况之一：先前从`malloc`/ `calloc`/返回的有效指针`realloc`，或者空指针。

如果释放内存，则需要将指针设置为 NULL，然后再将其传递给它`realloc`。`free`不会将指针设置为 NULL（也不会以任何其他方式修改指针本身——它不能因为它接收指针的副本，而不是指针本身）。

# ruby-on-rails-3 - 尝试使用 rake db:structure:load 加载结构时出错，“schema_migration”不存在

> ID：11455322
> 
> 赞同：5
> 
> 时间：2012-07-12T15:32:16.803
> 
> 标签：ruby-on-rails-3, rails-migrations, rails-postgresql

我正在运行`rake db:structure:load`，但在加载所有结构后，它无法在 schema_migrations 中插入版本。

看起来 PostgreSQL 不知道最近创建的表。已经用谷歌搜索了，但没有发现任何有用的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-02T08:56:28.177

您是否更改或删除了任何迁移？

反正。您可以查看 postgres 控制台并尝试：

获取所有数据库的列表（找到你的）

```
\list 
```

在那之后

```
\c yourdatabasename_yourenvironment 
```

和

```
\dt 
```

查看 postgres 数据库中的所有表。

# android - 如何在phonegap应用程序中下载apk

> ID：11455323
> 
> 赞同：5
> 
> 时间：2012-07-12T15:32:25.753
> 
> 标签：android, cordova, apk

我们正在开发一个 PhoneGap 应用程序，并希望在新版本可用时提供指向新 apk 文件的链接。

例如：

```
<a href="http://myserver.com/myapp.apk">Download</a> 
```

它是一个内部应用程序，所以我们不能将它放在安卓市场上。它在 PhoneGap 1.5 上运行良好，但在升级到 1.9 版后它停止工作。如果您单击链接，则不会发生任何事情。

我已将我们的服务器添加到 cordova.xml（`<access origin="http://myserver.com"/>`也尝试过`<access origin="*"/>`）并在 AndroidManifest.xml 中授予 INSTALL_PACKAGES 权限

有谁知道我错过了什么？是权限问题吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-27T06:56:50.177

使用此功能在 phonegap 中下载文件

```
function downloadFile(){

window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, 

    function onFileSystemSuccess(fileSystem) {
        fileSystem.root.getFile(
        "dummy.html", {create: true, exclusive: false}, 
        function gotFileEntry(fileEntry) {
            var sPath = fileEntry.fullPath.replace("dummy.html","");
            var fileTransfer = new FileTransfer();
            fileEntry.remove();

            fileTransfer.download(
                "http://www.w3.org/2011/web-apps-ws/papers/Nitobi.pdf",
                sPath + "theFile.pdf",
                function(theFile) {
                    console.log("download complete: " + theFile.toURI());
                    showLink(theFile.toURI());
                },
                function(error) {
                    console.log("download error source " + error.source);
                    console.log("download error target " + error.target);
                    console.log("upload error code: " + error.code);
                }
            );
        }, fail);
    }, fail);
}; 
```

}

# android - Android - 我需要这样的布局建议

> ID：11455325
> 
> 赞同：0
> 
> 时间：2012-07-12T15:32:30.853
> 
> 标签：android, android-layout

我正在尝试做这样的事情：

![http://postimage.org/image/p06lj1vdf/](../Images/cc48c1f87886ec3291feae531306c237.png)

我应该使用什么布局来做到最好？一些特殊的组合？我正在考虑使用 GridLayout，但我不确定。也许是 LinearLayout（顶部）和 Grid（用于按钮）的组合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:18:24.503

我会在顶部说一个RelativeLayout，因为您可以使用这样的属性，例如：

```
 android:layout_toRightOf="@+id/logo" 
```

这意味着您可以添加彼此相关的所有内容，而不必担心每个项目每一侧的大量填充。

然后我会在底部使用 GridView，以便按钮的布局完全相同。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:39:01.337

我会使用表格布局，以便它可以针对不同尺寸的屏幕正确缩放。

# java - 屏幕锁定后计时器重置

> ID：11455326
> 
> 赞同：1
> 
> 时间：2012-07-12T15:32:35.050
> 
> 标签：java, android

我为扑克盲人创建了一个带有倒数计时器的小应用程序，但我注意到当锁屏打开时，计时器将从开始重置。

我该如何解决这个问题？

这是该类的代码：

```
public class timer extends Activity {
        /** Called when the activity is first created. */

        TextView contoallarovescia;
        TextView clicca;
        public boolean touchattivo=false;
        public int giro=1;
        public int girosecondi=8*60;

        @Override
        public void onCreate(Bundle savedInstanceState) {

            this.requestWindowFeature(Window.FEATURE_NO_TITLE);

             super.onCreate(savedInstanceState);
             setContentView(R.layout.timer);

            contoallarovescia = (TextView) this.findViewById(R.id.contoallarovescia);
            Typeface typeFace=Typeface.createFromAsset(getAssets(),"font/LCDMB___.TTF");
            contoallarovescia.setTypeface(typeFace);

            clicca = (TextView) this.findViewById(R.id.clicca);
            chiamatimer(girosecondi*1000,1000);

        }

        @Override
        public boolean onTouchEvent(MotionEvent event) {
            // MotionEvent object holds X-Y values

            if (touchattivo)
            {

                chiamatimer(girosecondi*1000,1000);

            }

            return super.onTouchEvent(event);
        }

        public void chiamatimer(int secondi, int ciclo)
        {

            touchattivo=false;
            clicca.setVisibility(View.INVISIBLE);

            new CountDownTimer(secondi, ciclo) {

                 public void onTick(long millisUntilFinished) {

                     int sec =(int) (millisUntilFinished / 1000);

                     String result = String.format("%02d:%02d", sec / 60, sec % 60);

                     contoallarovescia.setText(result);
                 }

                 public void onFinish() {

                     String result = String.format("%02d:%02d", 0,  0);
                     giro++;

                     if (giro==5)
                     {

                         girosecondi=6*60;

                     }

                     contoallarovescia.setText(result);

                     clicca.setVisibility(View.VISIBLE);
                     touchattivo=true;

                     try {
                            Uri notification = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
                            Ringtone r = RingtoneManager.getRingtone(getApplicationContext(), notification);
                            r.play();
                        } catch (Exception e) {}

                 }
              }.start();

        }

} 
```

天呐！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T07:09:51.250

```
pm = (PowerManager)getApplicationContext().getSystemService(Context.POWER_SERVICE);
        pmWL = pm.newWakeLock(PowerManager.SCREEN_BRIGHT_WAKE_LOCK | PowerManager.FULL_WAKE_LOCK | PowerManager.ACQUIRE_CAUSES_WAKEUP, "My Tag");
        pmWL.acquire();

        mKeyguardManager = (KeyguardManager) getSystemService(KEYGUARD_SERVICE);
        mKeyguardLock = mKeyguardManager.newKeyguardLock("activity_classname");
        mKeyguardLock.disableKeyguard(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T16:00:08.703

您需要查看 android 文档中的应用程序生命周期 - 如果您建议我认为您的应用程序只是被 android 关闭并重新启动 - 因此您的 onCreate 会再次被调用并重置计时器。

Android 应用程序不是简单的对象，您必须处理的部分问题是 opsys 在需要时将您推来推去。

具体看一下 onPause 以及如何将结束时间存储在稍后传递给 onCreate 的包中。这将解决您当前的错误。

# jquery - jquery 使 2 列高度相等仅在 alert() 时有效

> ID：11455331
> 
> 赞同：2
> 
> 时间：2012-07-12T15:32:45.473
> 
> 标签：jquery, css, html

嘿伙计们希望你们能帮助我

我有一个奇怪的问题。我正在处理一个有两个浮动 div（以及许多其他内容）的网页。为了使浮动 div 的高度相等，我添加了以下代码

```
$(document).ready(function(){

   alert($('#body-left').height());
    if($('#body-left').height()>$('#sidebar').height()){
     $('#sidebar').height($('#body-left').height());

    }
    else{

    $('#body-left').height($('#sidebar').height());

    }

}); 
```

请参阅“alert($('#body-left').height());”行，当我删除该行时，它停止工作：/。IE ：

这是我不添加 alert() 行时发生的情况： ![在此处输入图像描述](../Images/ff28f747833cee5e9324ece9273a09d2.png)

这就是我添加警告行时发生的情况

![在此处输入图像描述](../Images/f4de87b6abfd0e375d7cf388a32f9281.png)

任何想法为什么会这样？：/

* * *

抱歉，回复晚了，但我得到了它的使用

```
if($('#body-left').height()>$('#sidebar').height()){
    setTimeout(function(){
     $('#sidebar').height($('#body-left').height());
    },100);

}
else{
    setTimeout(function(){
    $('#body-left').height($('#sidebar').height());
    },100);
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:07:10.570

如果你想要相等的高度......试试这个插件：

```
$.fn.setMinHeight = function(setCount) {
  for(var i = 0; i < this.length; i+=setCount) {
    var curSet = this.slice(i, i+setCount), 
        height = 0;
    curSet.each(function() { height = Math.max(height, $(this).height()); })
          .css('height', height);
  }
  return this;
}; 
```

将上面的代码复制并粘贴到一个 JS 文件中并链接到它。然后这样称呼它...

```
$(".theItems").setMinHeight(2); // Pass in number of items to include. 
```

希望这可以帮助。

迈克尔。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T18:27:16.120

以[这个问题](https://stackoverflow.com/q/1418569/901048)为基础，您可以快速获取任意数量元素的最大高度。如果你给他们所有的课程`equalheight`，你可以这样做：

```
$(document).ready(function() {
    var maxheight = $.map($('.equalheight'), function(val, i) {
        return $(val).height();
    }).max();
    $('.equalheight').height(maxheight);
});

Array.prototype.max = function() {
    return Math.max.apply(Math, this);
}; 
```

[http://jsfiddle.net/mblase75/NR9TZ/](http://jsfiddle.net/mblase75/NR9TZ/)

# sql-server-2008 - 将所有身份重置为 1

> ID：11455337
> 
> 赞同：0
> 
> 时间：2012-07-12T15:33:00.147
> 
> 标签：sql-server-2008, identity, reset

我已经编写了将所有表的身份重置为 1 的代码，但在某些表中，身份不会重置为 1，否则将重置为 0 或 2 或其他数字，这是我的代码

```
 declare @Count int 
    declare @C int 
    declare @Str varchar(20)
    set @C=1
    set @Count=(select  COUNT(*) TABLE_NAME from INFORMATION_SCHEMA.TABLES )
    while @C<@Count
    BEGIN
        with Records AS(select row_number() over(order by TABLE_NAME) as 'row1', *  
                    from INFORMATION_SCHEMA.TABLES)
        select  @Str=   TABLE_NAME from records
        where row1=@C
        set @C=@C+1
        DBCC CHECKIDENT (@Str , reseed, 0)
    END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T09:23:44.137

假设您的所有表格实际上都是空的，这应该适合您。它遍历所有`IDENTITY(1,1)`已定义的表并重新播种它们，除了那些从未插入过行或已被截断且不需要重新播种的表。

```
DECLARE @Name NVARCHAR(1000)
DECLARE @C1 AS CURSOR;

SET @C1 = CURSOR FAST_FORWARD
FOR SELECT Quotename(Object_schema_name(object_id)) + '.' 
                 + Quotename(Object_name(object_id))
    FROM   sys.identity_columns
    WHERE  Objectpropertyex(object_id, 'IsUserTable') = 1
           AND seed_value = 1
           AND increment_value = 1
           AND last_value IS NOT NULL;

OPEN @C1;

FETCH NEXT FROM @C1 INTO @Name;

WHILE @@FETCH_STATUS = 0
  BEGIN
      DBCC CHECKIDENT (@Name, reseed, 0)

      FETCH NEXT FROM @C1 INTO @Name;
  END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T06:39:23.990

国[标](https://stackoverflow.com/users/27535/gbn) 已经说过 **如果自创建表以来没有向表中插入任何行，或者使用 TRUNCATE TABLE 语句删除了所有行，则在运行 DBCC CHECKIDENT 后插入的第一行使用 new_reseed_value 作为标识。否则，插入的下一行使用 new_reseed_value + 当前增量值** ，但我们想将所有标识重置为 1。有人做过吗？

# php - 将 csv 附加到 php 数组

> ID：11455338
> 
> 赞同：1
> 
> 时间：2012-07-12T15:33:05.433
> 
> 标签：php, arrays

我无法让这个 PHP 数组为我返回任何值。CSV 表由 10 个数字组成。我得到的唯一输出是“ `array`”

```
$data = array();
if (($handle = fopen("fullbox.csv", "r")) !== FALSE) {
    while(($row = fgetcsv($handle, 1000, ",")) !== FALSE) {
        $data[] = $row;
    }
}

echo $data[1]; 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T15:34:58.647

您的代码已经正确。

`$data`是多维数组，每个元素本身就是一个数组。当您`echo $data[1]`要求 PHP 编写更复杂的数组变量的字符串表示形式时，PHP 通过输出`array`而不是其内容来处理该变量。

相反，`var_dump()`它查看它包含的内容。

```
var_dump($data); 
```

可以通过以下方式访问单个值：

```
echo $data[1][0]; 
```

**评论后编辑**：

如果 CSV 每行仅包含一个值，请在附加到输出数组时直接访问它`$row[0]`，以便将其作为一维数组获取：

```
if (($handle = fopen("fullbox.csv", "r")) !== FALSE) {
  while(($row = fgetcsv($handle, 1000, ",")) !== FALSE) {
    $data[] = $row[0];
  }
}
// $data is now a 1D array.
var_dump($data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:36:01.523

$data[1] 是 $data 变量中的第二个元素（$data[0] 将是第一个）。

你得到的是一个数组而不是一个值，这就是 PHP 回显单词数组的原因。

这应该会更好。

```
$data[0][0] 
```

您的 $data 变量是一个多维数组，您只需要深入一层。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T15:36:26.433

那是因为 $data[1]**是**CSV 行中 10 个数字的数组，所以 $data 现在是一个多维数组。 `echo $data[1][0]`将输出其中一个数字

# javascript - JavaScript 适用于 IE + Chrome 但不适用于 FF

> ID：11455342
> 
> 赞同：0
> 
> 时间：2012-07-12T15:33:23.943
> 
> 标签：javascript, cross-browser

以下适用于 IE 和 Chrom，但不适用于 FF。谢谢

```
<script>
    Element.setStyle(('table'), {
        'background-image': 'none'
    });
    Element.setStyle(('panel'), {
        'background-image': 'url(/pic.jpg)',
        'background-repeat': 'no-repeat'
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:51:50.160

我不熟悉您使用的 setStyle 函数，但是在使用 JavaScript 时，Firefox 比其他浏览器更注重 CSS 属性名称中的连字符。

在样式属性名称有连字符的地方，您应该改用小写骆驼大写字母 - 所以“背景图像”应该是“背景图像”等。像“不重复”这样的属性值就可以了。

# selenium - 如何将记录器值添加到测试报告？

> ID：11455346
> 
> 赞同：0
> 
> 时间：2012-07-12T15:33:31.347
> 
> 标签：selenium, junit, testng

我有用于比较两个报告页面的硒测试用例，在测试结束时我只收到通过或失败。但另外我需要用于比较的值。我怎样才能做到这一点？谢谢，玛西拉玛尼。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T06:02:14.550

[Reporter.log](http://testng.org/doclava/reference/org/testng/Reporter.html)可用于在 html 报告中记录消息。除了登录报告之外，它还为您提供了登录标准控制台的参数。

# eclipse-gmf - 选择的 Eclipse GMF 模型 Wizward 无法启动

> ID：11455347
> 
> 赞同：0
> 
> 时间：2012-07-12T15:33:34.110
> 
> 标签：eclipse-gmf

在 Eclipse GMF 中，我定义了我的 .ecore .genmodel .gmfgraph .gmfmap .gmftool .gmfgen 模型，并生成了模型、编辑器和图表代码。

当我将它作为 Eclipse 应用程序运行时，我可以创建一个标准模型，我还可以看到生成的图表类型，但是当我启动它（创建图表）时，会出现以下错误消息：

```
The selected wizard could not be started. Plug-in SmartAdaPro.diagram was unable to load class smartadapro.SmartAdaPro.diagram.part.SmartAdaProCreationWizard. smartadapro.SmartAdaPro.diagram.part.SmartAdaProCreationWizard 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:53:23.370

我通过删除所有生成的代码、plugin.xml 和 MANIFEST.MF、.genmodel 和 .gmfgen 模型来解决它，并按以下顺序重新生成：

1.  .genmodel
2.  建模和编辑代码
3.  .gmfgen
4.  图表代码

然后它起作用了。

# coded-ui-tests - 如何在编码的 ui 中实现对自定义控件的可访问性支持？

> ID：11455349
> 
> 赞同：-1
> 
> 时间：2012-07-12T15:33:40.557
> 
> 标签：coded-ui-tests, infragistics

我使用的应用程序是由 Infragistics XAML 控件开发的，这些是第三方控件。

如何在编码的 UI 测试中为此自定义控件提供辅助功能支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T23:14:02.173

我认为这就是你要找的：

[http://msdn.microsoft.com/en-us/library/hh552522.aspx](http://msdn.microsoft.com/en-us/library/hh552522.aspx)

您也可以在这里阅读一下 [http://blogs.msdn.com/b/mathew_aniyan/archive/2011/05/17/enabling-ui-testing-for-third-party-winforms-custom-controls-1.aspx](http://blogs.msdn.com/b/mathew_aniyan/archive/2011/05/17/enabling-ui-testing-for-third-party-winforms-custom-controls-1.aspx)

# php - codeigniter 中的图像保护

> ID：11455351
> 
> 赞同：-2
> 
> 时间：2012-07-12T15:33:48.227
> 
> 标签：php, html, image, codeigniter

我在我的控制器中使用以下代码：

```
//function to protect images from being accessed directly.
function getImage($img_id){

      //code to authenticate user goes here then...
$url = $this->data['base_url'].'system/application/images/c/thumbs/';

$filepath = $url.$img_id;

    header("Content-type: image/jpeg");
  if(file_exists($filepath)){
    echo "we are here";
        $img_handle = imagecreatefromjpeg($filepath) or die("");
    echo $img_handle;
        ImageJpeg($img_handle);
    }

    } 
```

在我看来，要获取图像，我使用了以下代码：

```
<img src='<?php echo base_url(); ?>index.php/Controller/getImage/obama.jpg' width="100px"> 
```

现在即使它进入控制器，它也不会显示图像。Obama 文件位于正确的目录中。我不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:05:26.433

您的问题是您将文本输出到浏览器，然后是图像。浏览器会尝试渲染图像，但会损坏。

```
header("Content-type: image/jpeg");
if(file_exists($filepath)){
    echo "we are here";
    $img_handle = imagecreatefromjpeg($filepath) or die("");
    echo $img_handle;
    ImageJpeg($img_handle);
} 
```

此外，如果你想做一个`echo`你不能发送`header`说“嘿，这是一个 jpeg 图像”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T05:38:01.373

您确定可以通过 $this->data['base_url'].'system/application/images/c/thumbs/obama.jpg 访问图像，您尝试在浏览器上访问它，对吗？

此外，避免在渲染图像之前打印文本，这可能会损坏图像。

如果仍然不起作用，请告诉我们错误页面截图，它在说什么。

# android - 确保在扩展 Activity 后调用事件侦听器

> ID：11455352
> 
> 赞同：0
> 
> 时间：2012-07-12T15:33:48.870
> 
> 标签：android, inheritance, android-activity, extend, super

如果我扩展 Activity 并在我的基类中实现一个事件处理程序（对不起，如果这不是正确的 OOP 术语），我如何确保我的事件处理程序总是从扩展我的类中运行。

```
public class MyActivity extends Activity{

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
//Stuff that I need to do.
}

}//MyActivity class

public class MainActivity extends MyActivity{

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
   super.onActivityResult(requestCode, resultCode, data);
}

}//MainActivity class 
```

目的是 MyActivity 最终将出现在其他用户将使用的代码库中。我的类和扩展我的类的 Activity 实例对 `onActivityResult`. 我显然不能`onActivityResult` 最终阻止人们覆盖它。

现在，如果用户忘记添加该超级语句，我的代码将不会运行。有什么方法可以强制扩展 MyActivity 的类的实例在与我在父类中定义的方法重叠的方法中运行 super。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:38:58.790

如果后来的程序员选择不调用`super`，那么这是他们的决定，他们将失去从您的类继承的好处。据我所知，没有办法保证`super`会被调用或以任何方式强迫他们调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:17:56.307

据我所知，您不能强制调用 super 方法。

但是，您可以以这样一种方式开发 MyActivity，以便更容易理解开发人员应该如何使用它。

如果您的父类 MyActivity 永远不会被实例化，您可以将其设为抽象类。

抽象类可以包含可以调用抽象方法的方法。

抽象方法**必须**在扩展它的类中实现。

所以你可以写类似

```
public abstract class MyActivity extends Activity{

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
   //Stuff that I need to do.
   onMyActivityResult(requestCode, resultCode, data);
}

public abstract void onMyActivityResult(int requestCode, int resultCode, Intent data);

}//MyActivity class

public class MainActivity extends MyActivity{

@Override
public void onMyActivityResult(int requestCode, int resultCode, Intent data) {
}

}//MainActivity class 
```

# javascript - 将元素与窗口底部对齐，但允许滚动到下方的内容

> ID：11455353
> 
> 赞同：0
> 
> 时间：2012-07-12T15:33:49.420
> 
> 标签：javascript, window, alignment

我现在正在编写一个 jquery 滑块，我将宽度设置为 100%，无论窗口大小如何调整，我都希望它与窗口底部对齐。我已经找到了让它在你向下滚动的整个过程中一直保持在底部的方法，但我不想要这个。我希望能够在此滑块下方滚动以获取更多内容。

这个网站显示了我正在寻找的那种功能。我试图用萤火虫检查它以找出它是如何发生的部分，但我无法弄清楚。

[http://pixelthemes.net/immersion/](http://pixelthemes.net/immersion/)

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:47:22.593

您可以简单地通过计算大小而不将画廊与底部对齐来实现这一点。

```
var resize = function () {
    var availHeight = window.innerHeight;
    // you need to either calculate
    // or set a fixed offset from the top for content above
    var offset = 80;

    document.getElementById("slider").style.height = availHeight - offset + "px";
}

window.addEventListener("resize", resize, false);
window.addEventListener("load", resize, false); 
```

假设您的滑块具有 100% 的宽度，它应该完全符合您的要求。如果滑块上方的内容是 80 像素高，那么如果它一直向上滚动，它应该正好粘在窗口的底部。

# wordpress - 如何将我的数组查询转换为 wordpress 中的字符串查询？

> ID：11455355
> 
> 赞同：1
> 
> 时间：2012-07-12T15:33:51.123
> 
> 标签：wordpress

由于我设置模板的方式，我需要以字符串 url 格式包含以下内容：

```
$the_query = array( 'post_type' => 'product', 'taxonomy' => 'product_types', 'term' => 'solar-panel' ) 
```

我想像

```
$the_query = new WP_Query( 'post_type=product&taxonomy=product_types&term=solar-panel&showposts=2' ) 
```

但这不起作用，因为分类法本身就是一个数组。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:05:58.853

您的模板是否允许您在 WP_Query 之外设置选项？

```
$args=array(
  'post_type' => 'product',
  'taxonomy' => 'product_types',
  'term' => 'solar-panel',
);

$the_query = new WP_Query($args); 
```

如果没有，您的模板不允许您这样做怎么办？你能发布一些代码吗？

# sql - SQL 从年份和数字字段创建日期时间

> ID：11455360
> 
> 赞同：0
> 
> 时间：2012-07-12T15:33:57.463
> 
> 标签：sql, sql-server, sql-server-2008, reporting-services, ssrs-2008

我在一个视图中有两列给我日期部分。

它们是月份和年份。

我需要一个新列，它是一个日期/时间字段。它必须是其他两列提供的月份和年份的第一天。

即`4, 2011`需要

```
2011-04-01 00:00:00.000 
```

在新列中

当前设置如下所示：

```
month_number    incident_year
4   2011
5   2011
6   2011
7   2011
8   2011
9   2011
10  2011
11  2011
12  2011
1   2012
2   2012
3   2012
4   2012
5   2012
6   2012 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T15:43:08.343

```
SELECT 
  incident_year, month_number,
  dt = DATEADD(MONTH, (incident_year-1900)*12+month_number-1, '19000101') 
  FROM dbo.view_name; 
```

您还可以使用 0-date 使其更简洁：

```
SELECT 
  incident_year, month_number,
  dt = DATEADD(MONTH, (incident_year-1900)*12+month_number-1, 0) 
  FROM dbo.view_name; 
```

在 SQL Server 2012 中，您将能够更简单地执行此操作：

```
SELECT DATEFROMPARTS(incident_year, month_number, 1)
  FROM dbo.view_name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:39:23.360

```
 Select CAST(CAST( incident_year AS varchar(4)) + '-' + 
        CAST(month_number AS varchar(2)) + '-01' AS DATETIME) as incident_Year
 from YourView 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T15:42:37.133

```
Alter table yourTable add newDateColumn datetime NULL

update yourTable set newDateColumn = 
   CONVERT(datetime, CAST(incident_year as varchar(4)) +'-' CAST(month_number as varchar(2))+'-01 00:00:00.000', varchar(30)) 
   from YourTable 
```

# google-maps-api-3 - 时间图和地图绘制地理编码

> ID：11455361
> 
> 赞同：0
> 
> 时间：2012-07-12T15:33:57.793
> 
> 标签：google-maps-api-3

我无法调用远程操作并将 JSON 数据转换为 Timemap 所需的数据格式。

*   数据集的类型值应该是什么：“remote”或“jsonp”？
*   远程 URL 中的回调是什么？是必需的吗？
*   在转换方法中，我拥有的数据只有地址（没有纬度值），我如何将此地址转换为纬度值？有地图绘制的例子吗？我不想用 mapstraction 或 google v3 地图创建另一个地图？

代码片段：

```
tm = TimeMap.init({
        mapId: "map",               // Id of map div element (required)
        timelineId: "timeline",     // Id of timeline div element (required) 
        datasets: [
            {
                id: "fdmdata",
                title: "FDM Data",
                theme: "green",
                type: "remote", // or is it type: "jsonp"
                options: {    
                    //query: fdmMapQuery,
                    url: "loadFdmMapData.ge?" +
                    "orderby=starttime&sortorder=ascending&callback=?",
                    preloadFunction: preloadData,                        
                    transformFunction: transformData,
                }
            },
        ],
        bandInfo: [    
            {
                     width:          "85%", 
                     intervalUnit:   Timeline.DateTime.MONTH, 
                     intervalPixels: 200,
                     theme:          theme
            },
            {
                     width:          "15%", 
                     intervalUnit:   Timeline.DateTime.DAY, 
                     intervalPixels: 300,
                     overview:       true
            }
        ]
    });
});

function transformData(data) {      
    var title, description, start, end, lat, lon, infoHtml;
    var newData = {
        "title" : title,
        "start" : start,
        "end" : end,
        "options" : {
            "description" : description
        }
    };
    newData["point"] = {
       "lat" : lat,
        "lon" : lon
    };            
    newData["options"]["infoHtml"] = infoHtml;
    return newData;
}

function preloadData(result) {
    var entries = (result.feed.entry);
    var events = [];
    // delete events without geotags
    for (var x=0; x<entries.length; x++) {
        entry = entries[x];
        var location = entry['gd$where'][0].valueString;
        var pattern = new RegExp(/@\s*([\-0-9.]+)\s*,\s*([\-0-9.]+)\s*/);
        var matches = pattern.exec(location);
        if (matches != null) events.push(entry);
    }
    return events;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T19:35:14.897

老问题，但是：

*   您可能需要 loader`type: "jsonp"`或`type: "json"`. `"remote"`是所有异步加载器的抽象基础。如果您只是加载本地 JSON，而不是从启用 JSONP 的服务器加载，请使用`"json"`.

*   远程 URL 中的回调是 JSONP 工作方式的一部分。有关详细信息，请参阅`dataType`参数[`jQuery.ajax`](http://api.jquery.com/jQuery.ajax/)。回调名称将由 Timemap.js（使用 jQuery）自动生成 - 您无需担心回调函数，但*如果*您使用 JSONP，则需要在 URL 中包含参数。

*   将地址字符串转换为纬度/经度称为地理编码，而不是 Timemap.js 中内置的内容。通常，在将数据加载到 Timemap 之前，您需要对数据进行预处理以对地址进行地理编码 - 有各种在线工具和 API 可以为您执行此操作。[请参阅有关 SO 的相关问题。](https://stackoverflow.com/search?q=geocoding%20tools)

# google-chrome - 溢出的奇怪CSS行为？

> ID：11455363
> 
> 赞同：0
> 
> 时间：2012-07-12T15:33:59.557
> 
> 标签：google-chrome, joomla, mobile-safari, css

我正在编码的 Joomla 模板有一些问题。我认为这是因为我应用了溢出来避免浮动问题，但根本不确定。

首先，页面在 Chrome 的 X 轴上获得一个滚动条。虽然在 IE 和 Firefox 上工作得很好。最奇怪的部分是，如果您更改窗口大小或仅打开开发工具，它会自行修复...我知道我可以执行以下操作：

```
body { overflow-x: hidden; } 
```

但我想我不应该需要它。

另外（我认为它真的相关）在 iOS Mobile Safari 和 Chrome 上真的很奇怪......

![截屏](../Images/84a3ef62c8c8bbdaf12e4b92dd246732.png)

怎么了？

[http://www.reconstrucciondeaccidentes.es/web/](http://www.reconstrucciondeaccidentes.es/web/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:07:03.517

Mobile Safari 假定页面为 980px 宽。由于您的是 990 像素，因此标题似乎位于视口之外。

你可以通过在你的 :

`<meta name="viewport" content="width=990" />`

# algorithm - 查找您在 Twitter 上关注的数百万人的 20 条最新推文

> ID：11455365
> 
> 赞同：2
> 
> 时间：2012-07-12T15:34:04.800
> 
> 标签：algorithm, scalability, bigdata

问题是通过您在 Web 应用程序中所做的各种事情的整个设计方法，以便如果您在 Twitter 上关注数百万人，并且当您检查最新的 20 条推文时，您可以用最少的时间和最少的负载找到它资源。这是一个关于整个堆栈的开放式设计问题。

我的答案不完整（因为我无法完全回答这个问题）

1.  由于我们谈论的是数百万用户，因此我们必须根据用户的地理位置对数据库进行分片，这个答案不被接受，因为在 twitter 中你真的不关注同一位置的人。有什么更好的方法可以实现这一目标？

2.  由于大多数情况下 20 条最新推文是最重要的，因此每个用户维护一个缓存（链表），其中包含根据它们到达时间的最新推文。这也不被接受。

一般来说，我在这类设计问题上很弱，想知道你将如何解决它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T12:30:48.253

Twitter 已经发展了几年，我相信它是设计最复杂的数据系统之一。在这样一个复杂的系统中，可能已经针对不同类型的用户进行了许多优化（取决于他们的推文频率、关注者数量和关注者数量）。

关注数百万人的用户无疑是一种很特殊的类型，可能不会太多。我认为对于这些用户来说，一个明智的设计是在您的关注者每次发布推文时更新缓存中的时间线数据，并将非常旧的数据存档。因此，每次您请求时间线时，它都会立即返回缓存。

以上只是使系统为您工作的最简单直接的方法。在现实中，设计中要考虑更多的衡量标准，比如有多少用户关注了数百万人，这些用户的刷新频率等。

# list - 替换列表元素是反模式吗？

> ID：11455367
> 
> 赞同：13
> 
> 时间：2012-07-12T15:34:09.240
> 
> 标签：list, f#, anti-patterns

我有一个适用于以列表表示的路径的模块。大多数函数都进行典型的递归列表处理，但现在我需要一个有时会改变路径的函数。所以，我写了这个`replace`函数：

```
module List =
  let replace f sub xs = 
    let rec finish acc = function
      | [] -> acc
      | x::xs -> finish (x::acc) xs
    let rec search acc = function
      | [] -> None
      | x::xs -> 
        if f x then Some(finish ((sub x)::xs) acc)
        else search (x::acc) xs
    search [] xs 
```

像这样工作：

```
let xs = List.init 10 id
let res = List.replace ((=) 5) (fun _ -> -1) xs
//Some [0; 1; 2; 3; 4; -1; 6; 7; 8; 9] 
```

通常，当我觉得需要扩充一个内置模块时，我最终会发现我在做一些古怪或低效的事情。替换列表元素是其中之一吗？有没有更简单（同样有效）的方法来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-14T21:29:40.240

如果`O(N)`您的应用程序可以接受复杂性，那么您的代码就是完美的。为了获得更好的复杂性，您需要解决进行线性搜索的需要，例如通过对元素施加顺序并使用二叉​​搜索树。

一个不涉及搜索的相关问题是用已知索引替换列表元素：

```
val replaceAt : int -> 'a -> 'a list -> 'a list 
```

对于这个问题，存在比标准列表更好的持久数据结构。在文献中搜索纯功能随机访问列表。

奇怪的是，没有 ML 系列语言（OCaml、F#、SML）定义`replace`或`replaceAt`在标准列表库中。这可能是为了鼓励用户重新设计他们的代码以避免`O(N)`这些操作的复杂性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T15:55:30.183

您可以使用以下方式编写它`List.fold`：

```
let replace f sub xs = 
  let processItem (found,list) x =
    if found then (true,x::list) 
    elif f x then (true,(sub x)::list) 
    else (false,x::list)
  let (found, list) = xs |> List.fold processItem (false,[])
  if found then Some(List.rev list)
  else None 
```

它稍微简单一些并且具有相似的性能（对列表元素进行一个循环）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T23:47:33.670

```
let replace pf el xs =
  let c = ref 0
  let xs = List.map (fun x -> if pf x then incr c;el else x) xs
  if !c = 0 then None else Some xs

(*
> replace ((=)5) -1 [0..9];;
val it : int list option = Some [0; 1; 2; 3; 4; -1; 6; 7; 8; 9]
> replace ((=)10) -1 [0..9];;
val it : int list option = None
*) 
```

**更新**

```
let replace pf sf xs =
  let find = ref false
  let rec aux = function
    | [] -> []
    | x::xs -> if pf x then find := true;(sf x) :: xs else x :: (aux xs)
  let xs = aux xs
  if !find then Some xs else None
(*
> let xs = [0..9];;
val xs : int list = [0; 1; 2; 3; 4; 5; 6; 7; 8; 9]
> let subf = fun _ -> -1;;
val subf : 'a -> int

> replace ((=) 5) subf xs;;
val it : int list option = Some [0; 1; 2; 3; 4; -1; 6; 7; 8; 9]
> replace ((<) 5) subf xs;;
val it : int list option = Some [0; 1; 2; 3; 4; 5; -1; 7; 8; 9]
> replace ((=) 50) subf xs;;
val it : int list option = None
*) 
```

# visual-studio-2010 - 如何在调试模式下隐藏开发工作室工具栏？

> ID：11455368
> 
> 赞同：0
> 
> 时间：2012-07-12T15:34:14.563
> 
> 标签：visual-studio-2010, debugging, menu, toolbar

当我在 DevStudio 中调试时，我会看到额外的以调试为中心的工具栏，这很棒。

我还想关闭一个或多个标准工具栏，因为我在调试模式下不需要它们。这可能吗？

我尝试在调试时删除它们，但一旦我完成调试，它们仍然不可用。

**编辑**：我试图隐藏测试工具工具栏，但我刚刚尝试隐藏文本编辑器工具栏并获得完全相同的行为。在调试时移除会导致在设计模式下移除。

我认为我正在运行的唯一非标准的东西是 VS10 Power Tools，但我不知道与工具栏有什么关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:03:17.430

正如彼得所说，这两种布局是独立的。如果您在调试模式下隐藏工具栏并在设计模式下显示它，则这两种状态应保持为您设置的状态。如果不是，您需要指出我们正在讨论的具体工具栏，以确保所有者没有做一些有问题的事情，例如强制同步他们在所有布局中的可见性。

# javascript - 如何确定当前元素是窗口

> ID：11455378
> 
> 赞同：0
> 
> 时间：2012-07-12T15:34:45.753
> 
> 标签：javascript, javascript-events

我将一些事件处理程序附加到不同的元素，例如输入、选择...和窗口。如果当前元素是窗口或常见的 html 元素，我需要检查内部处理程序。我应该怎么做那个检查？

例子：

> inputTextEl.attachEvent("某个事件", handler);
> 
> inputButtonEl.attachEvent("某个事件", handler);
> 
> window.attachEvent("某个事件", handler);

```
 var handler = function (eventName) {
    return function () {
    var message = '[' + eventName + ']';
     if (window.event) {
        message += ' eventType: ' + window.event.type;

        var target = window.event.srcElement || window.event.target;
        var id = target.id;
        if (id == '') {
                  id = target.parentNode.id;
        }
        message += ' ;eventTarget: ' + id;
     } else {
           message += ' window.event - undefined';
     }
     console.log(message); 
}; }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:37:16.530

您可以在函数处理程序中为 IE 使用以下代码

```
alert(Window.event.srcElement.tagName ); 
```

对于 Firefox 和 Chrome 使用

```
 alert(this.tagName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:40:43.613

一些浏览器使用`event.target`，其他浏览器使用`event.srcElement`：

```
function handler(ev) {
    var event = window.event || ev;
    var target = event.srcElement || event.target;
    // event has the lowest-level element that is the target of the event
} 
```

大多数事件永远不会`window`作为它们的目标，因为您不能单击/鼠标悬停/等窗口本身；相反，您对窗口中的特定元素执行这些操作。

# java - 基于超类型查询Hibernate

> ID：11455380
> 
> 赞同：0
> 
> 时间：2012-07-12T15:34:49.610
> 
> 标签：java, hibernate, jpa

我有一个类似于下面使用 Hibernate 持久化到数据库的类。有什么方法可以根据objectType的超类在objectType上查询Hibernate。

例如，如果您持久化了两个对象，一个与`Integer.class`另一个与`Float.class`作为 objectType 我可以编写一个查询，如果我要求 objectType =`Number.class`

```
@Entity
public class ToPersist
{
    public String name
    public Class<?> objectType
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:52:01.920

不会。HQL/JPQL 查询总是转换为 SQL 查询，数据库不知道 Java 类之间的继承关系。

# django - 修改行为 和测试 collectstatic 管理

> ID：11455383
> 
> 赞同：0
> 
> 时间：2012-07-12T15:35:10.587
> 
> 标签：django, django-staticfiles

我有一个我正在编写的应用程序，当 DEBUG 设置为 true 时需要包含未压缩的 javascript 文件，当 DEBUG 设置设置为 false 时需要包含压缩的 javascript 文件。
为了做到这一点，我想修改 collectstatic 的行为以仅收集*文件名*.*debug/release*.js 并将它们重命名为我的应用程序中的*文件名*.js 。
怎么做到呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T16:56:06.987

只需使用[django-compressor 之](http://django_compressor.readthedocs.org/en/latest/index.html)类的东西。它会在生产中自动为您压缩和缩小您的 CSS 和 Javascript ( `DEBUG=False`)，并在 dev ( ) 中为它们提供服务`DEBUG=True`。

# javascript - 从 javascript 设置 RadComboBox 值

> ID：11455388
> 
> 赞同：2
> 
> 时间：2012-07-12T15:35:23.660
> 
> 标签：javascript, asp.net, telerik, radcombobox

我在用户控件中有一个 RadCombobox，我试图从 Javascript 将值设置为 null 或 0。以下代码不起作用。但它也没有显示任何错误。

```
function OnClientSelectedIndexChanged(sender, eventArgs) {
    var item = eventArgs.get_item();
        var ddl = document.getElementById('ctl00_plh1_Test1_Dropdown2_RadComboBox1_DropDown');
        ddl.selectedIndex = 0;

}

<telerik:RadComboBox ID="Dropdown1" runat="server" 
                             NoWrap="true" Width="250" OnClientSelectedIndexChanged="OnClientSelectedIndexChanged">
                            <CollapseAnimation Duration="200" Type="OutQuint" />
                        </telerik:RadComboBox>

<uc2:RadComboBox ID="Dropdown2" runat="server" DdlAutoWidth="true"></uc2:RadComboBox> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T16:28:21.457

尝试这个。

```
var mycombobox = $find("<%= MyUserControl.FindControl("RadComboBox1").ClientID %>"); 
```

或者

```
var mycombobox = $find("<%= RadComboBox1").ClientID %>");

mycombobox.clearSelection(); 
```

你可能需要这个

```
<rad:RadScriptBlock runat="server" ID="RadCodeBlock">
   <script type="text/javascript">

   </script>
</rad:RadScriptBlock> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T16:11:12.293

I assume the `RadComboBox` that will trigger the `OnClientSelectedIndexChanged` event will have 2 or more `RadCombBoxItem`s, otherwise the event will never be fired as the selected index can never change.

When the event fires, you must get a reference to the `RadComboBox` control inside your `UserControl`. To set it's SelectedIndex property to 0 you call the `set_selectedIndex()` function on the client-side control. Keep in mind that this only sets the SelectedIndex, and does not update the text in the input field of the `RadComboBox`. If you want to clear that out as well you must call the client-side control's `set_text()` function.

```
function onComboBoxSelectedIndexChanged(s, e) {
    var ctrl = '<%= Dropdown2.FindControl("RadComboBox1").ClientID %>';
    if (ctrl) {
        ctrl.set_selectedIndex(0);
        ctrl.set_text('');
    } 
} 
```

Please refer to the [documentation](http://www.telerik.com/help/aspnet-ajax/combobox-client-side-radcombobox.html) on Telerik's website for more information regarding the JavaScript API for the RadCombBox control.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T22:31:05.567

尝试：

```
var radComboBox = <%=YourComboBox.ClientID %>;  

radComboBox.SetValue("someValue"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T09:43:10.267

您要设置什么`0`或`null`选择的值或选择的索引？
试试这个选定的值：

```
$find("<%=ctl00_plh1_Test1_Dropdown2_RadComboBox1_DropDown.ClientID%>").set_text("0"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-06T12:55:24.043

试试这个在javascript中选择的值：

```
var SelectdVal=1;
$find("<%= YourRadComboBox.ClientID %>").findItemByValue(SelectdVal).select(); 
```

# jquery - 粘性 jquery-ui 对话框不会让鼠标指针离开

> ID：11455389
> 
> 赞同：2
> 
> 时间：2012-07-12T15:35:28.783
> 
> 标签：jquery, jquery-ui

似乎 Jquery 对话框爱上了我的鼠标指针。

我在一个 div 中有一个 jqgrid 和几个文本框，我将其用作对话框。

每当我尝试通过拖动来移动对话框时，它都会粘在鼠标指针上并且不会放开。

这是代码

```
$("#Applon").dialog({
    autoOpen: false,
    height: 370,
    width: 710,
    modal: true,
    buttons: {
        //'Create an account': function() { },
        Close: function() {
            $(this).dialog('close');
            //$('input:visible:enabled:first').focus();
        }
    },
    close: function() {
    }
}); 
```

我该如何解决这个问题？

谢谢

**编辑**

此外，当我打开对话框时，滚动条会出现在我的页面上。当我第二次打开对话框时，滚动条也出现在对话框中。

**编辑 2**

这是网格

```
jQuery('#jgrid2').jqGrid({
    autowidth: true,
    altRows: true,
    altclass: 'grdAltRwClr',
    datatype: 'local',
    forceFit: true,
    gridview: true,
    mtype: 'post',
    height: 190,
    //width: 350,
    rowNum: 0,
    postData: { p_hdrid: function() { return $('#p_hdrid').val(); } },
    url: window.rootPath + 'Invoice/JGridDtlData',
    beforeSelectRow: function() { return false; },
    gridComplete: function() {
        GridComplete2();
    },
    colModel: [
        { name: 'act', label: 'View', resizable: false, search: false, sortable: false, title: false, width: 8, index: 'act' }
        , { name: 'p_slabid', label: 'Slab ID', width: 15, index: 'p_slabid' }
        , { name: 'p_fslab', label: 'From', width: 15, index: 'p_fslab', sortable: false }
        , { name: 'p_tslab', label: 'Upto', width: 15, index: 'p_tslab', sortable: false }
        , { name: 'p_amt', label: 'Amount', width: 15, index: 'p_amt', sortable: false }

         ]
}); 
```

**HTML**

```
 <div id="Applon" title="Edit Slab Details" style="border-style: 1px; width: 680px; height:370px; background-color: #00CC99; z-index: 999; display: block; padding-left: 10px;">
    <div class="content">
        <table cellpadding="0" cellspacing="0">
            <tr>
                <td>
                <form action="\" id="frmDtl">
                    <table cellpadding="0" cellspacing="0">
                       ....controls go here

                    </table>
                </form>
                </td>

            </tr>
        </table>
    </div>
    <div class="content" style="width: 690px">
        <table id="jgrid2">
        </table>
        <div id="pager2">
        </div>
    </div>

    </div> 
```

**编辑**：3这是CSS

```
element.style {
    -moz-user-select: none;
}
.ui-helper-clearfix:after {
    clear: both;
    content: ".";
    display: block;
    height: 0;
    visibility: hidden;
}
jquery...s?v=5.3 (line 12)
.ui-draggable .ui-dialog-titlebar {
    cursor: move;
}
jquery...s?v=5.3 (line 417)
.ui-dialog .ui-dialog-titlebar {
    font-size: 1.1em;
    padding: 2px 2px 2px 10px;
    position: relative;
}
jquery...s?v=5.3 (line 391)
.ui-dialog-titlebar {
    background-color: #5D81AB;
    background-image: url("../../Images/ThkStrip.jpg");
    background-repeat: repeat-x;
}
Sales_...s?v=5.3 (line 1436)
.ui-corner-all {
    border-radius: 6px 6px 6px 6px;
}
jquery...s?v=5.3 (line 282)
.ui-widget-header {
    border: 1px solid #C4D1E7;
    color: #222222;
    font-weight: bold;
}
jquery...s?v=5.3 (line 55)
.ui-helper-clearfix {
    display: block;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:49:53.187

这是一个使用您提供的代码的工作[jsfiddle 。](http://jsfiddle.net)

[http://jsfiddle.net/6FWPc/](http://jsfiddle.net/6FWPc/)

这适用于 chrome 和 IE ......

你能确认它也适合你吗？

**编辑** 正如 Monkieboy 所说，鼠标向上事件发生在浏览器之外，所以在您再次单击之前，对话框认为您仍然处于鼠标向下事件中。

我能想到的就是让可拖动为假：

```
$("#Applon").dialog({
    autoOpen: false,
    height: 370,
    width: 710,
    modal: true,
    draggable: false,
    buttons: {
        //'Create an account': function() { },
        Close: function() {
            $(this).dialog('close');
            //$('input:visible:enabled:first').focus();
        }
    },
    close: function() {
    } 
```

});

[http://jsfiddle.net/cumsL/](http://jsfiddle.net/cumsL/)

**编辑 2** 您可以使用 mouseleave() 事件来注册 mouseup() 参见小提琴

```
$('document').ready(function() {
     $("#main").mouseleave(function()
                           {
                               $(this).mouseup();
                           });
}); 
```

[http://jsfiddle.net/s5D6J/](http://jsfiddle.net/s5D6J/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:40:38.700

从Craftyfellas的答案延伸......

```
$('document').ready(function() {
     $("#main").mouseleave(function()
                           {
                               $(this).mouseup();
                           });
}); 
```

这实际上很酷，您实际上可以将它与`live()`函数绑定，以便所有其他对话框也捕获此行为。像这样：

```
$('document').ready(function() {
    $("#main").live("mouseleave", function() {
       $(this).mouseup();
    });
}); 
```

或者，您可以扩展`dialog`, 以便它解释不需要的行为。

# c - 半随机交织器的设计

> ID：11455392
> 
> 赞同：0
> 
> 时间：2012-07-12T15:35:36.130
> 
> 标签：c

我正在设计一个半随机交织器。有时它可以工作，但有时即使是小的矢量长度也需要很多时间。谁能帮我写代码？

```
int i, j, s1 = 2, s2 = 5;
for (int i = 0; i < vecLen; i++) {
    IM[i] = rand() % vecLen;
    for (j = 0; j < i; j++) {
        if (IM[i] == IM[j]) {
            IM[i] = rand() % vecLen;
            j = -1;
        }
        if ((i - j) <= s1) {
            if (sqrt((IM[i] - IM[j]) * (IM[i] - IM[j])) <= s2) {
                IM[i] = rand() % vecLen;
                j = -1;
            }
        }
    }
}

for (i = 0; i < vecLen; i++) {
    DM[IM[i]] = i;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:00:53.023

[点击演示](http://ideone.com/6WMWO)

```
#include <stdio.h>
#include <stdlib.h>

#define BOOL int
#define TRUE (-1)
#define FALSE (0)

int *Generate(int n, int s1, int s2);
BOOL GenerateNext(int i, int *xs, int n, int s1, int s2);
void Shuffle(int *arr, int n);

int main(void)
{
    int n = 20, s1 = 2, s2 = 5;
    int i;
    int *xs = Generate(n, s1, s2);
    if (xs == NULL)
    {
        printf("No valid permutations.\n");
    }
    else
    {
        printf("Permutation: [ ");
        for (i = 0; i < n; i++)
        {
            if (i > 0) printf(", ");
            printf("%d", xs[i]);
        }
        printf(" ]\n");

        free(xs);
    }
}

int *Generate(int n, int s1, int s2)
{
    int *xs = (int *) malloc(sizeof(int) * n);
    if (GenerateNext(0, xs, n, s1, s2))
    {
        return xs;
    }
    free(xs);
    return NULL;
}

BOOL GenerateNext(int i, int *xs, int n, int s1, int s2)
{
    int candidates[n];
    int nCandidates = 0, candidate, j, delta;
    BOOL ok;

    if (i == n) return TRUE;

    for (candidate = 0; candidate < n; candidate++)
    {
        ok = TRUE;
        for (j = 0; j < i && ok; j++)
        {
            if (xs[j] == candidate) ok = FALSE;
            else if ((i - j) <= s1)
            {
                int delta = xs[j] - candidate;
                if (delta < 0) delta = -delta;
                if (delta <= s2) ok = FALSE;
            }
        }
        if (ok)
        {
            candidates[nCandidates++] = candidate;
        }
    }

    if (nCandidates == 0) return FALSE;

    Shuffle(candidates, nCandidates);

    for (j = 0; j < nCandidates; j++)
    {
        xs[i] = candidates[j];
        if (GenerateNext(i + 1, xs, n, s1, s2))
        {
            return TRUE;
        }
    }

    return FALSE;
}

void Shuffle(int *arr, int n)
{
    int i, j, tmp;
    for (i = 0; i < n; i++)
    {
        j = i + rand() % (n - i);
        if (j != i)
        {
            tmp = arr[i];
            arr[i] = arr[j];
            arr[j] = tmp;
        }
    }
} 
```

**编辑：**重写答案以确定是否有任何有效的排列。

# php - PDO 和自定义数据库包装类：静态还是实例？

> ID：11455394
> 
> 赞同：3
> 
> 时间：2012-07-12T15:35:48.807
> 
> 标签：php, mysql, oop, pdo

我在 PHP 中寻找一个好的 PDO 包装类；由于在我见过的类中没有一个类适合我的需要，我决定编写自己的类，增强我之前编写的类，使用现在可怕的`mysql_*`函数来集成本机转义、db-agnosticity、prepared statements 等。

我想知道的一件事是，开发和使用这样的类的最佳方法是什么？一种选择是通过实例：

```
$db = new Database();
$db->query("SELECT this FROM that"); 
```

另一种是使用静态方法：

```
DB::query("SELECT foo FROM bar WHERE answer=42"); 
```

我见过一些喜欢使用第一种方法的框架（例如 Joomla API），但我不确定第二种方法可能存在哪些缺陷。

你有什么见解吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T15:41:45.607

我个人认为不需要 PDO 包装类（PDO 本身就是一个数据库包装类）。

但是，如果您想这样做，请作为一个实例进行，原因如下：

1.  这更有意义，您可能需要多个数据库连接。
2.  它更容易使用。
3.  它使用较少的全局空间，**[这是邪恶的](https://softwareengineering.stackexchange.com/questions/148108/why-is-global-state-so-evil)**。
4.  这让我开心。

所以是的，实例是要走的路，尽管我只会使用本机 PDO 来完成大多数任务。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-12T15:40:56.277

数据库类的静态实例很方便，因为不必将对象作为参数或调用传递给函数/方法，`global($db)`您可以简单地调用`$db = Database::instance()`，而不是实例化一个您可以访问单例的新对象。

仅取决于您希望应用程序如何工作。

# mysql - MySQL：在一个查询中加入多行并计算出现次数

> ID：11455401
> 
> 赞同：0
> 
> 时间：2012-07-12T15:36:18.430
> 
> 标签：mysql

我正在尝试实现一个 SQL 查询，它连接多行并返回相等值的出现次数。

```
ID    Row_1    Row_2    Row_3
1     Value    NULL     NULL
2     NULL     Value    Value
3     NULL     Value    NULL
4     NULL     Value2   NULL 
```

查询应返回两行

```
ID    Row     Count
1*    Value   3
4     Value2  1 
```

第一个返回行的 ID 无关紧要。如果 value 在所有三个原始行中都是唯一的，则应返回原始 ID（如结果集的第 2 行所示）。我不得不提一下，表中有超过 50.000 行。它不应该花费太多时间。

我尝试了几种方法，例如将表格与自身连接起来。没有什么能真正解决问题。

提前致谢。

马可

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:14:27.683

首先，您可以创建一个组合所有非空值列表的子查询，然后加入该列表。

值列表的子查询：

```
SELECT row_1 AS val FROM mytable WHERE row_1 IS NOT NULL
UNION
SELECT row_2 AS val FROM mytable WHERE row_2 IS NOT NULL
UNION
SELECT row_3 AS val FROM mytable WHERE row_3 IS NOT NULL 
```

*（`UNION`隐式执行 a `DISTINCT`，因此结果列表不会有重复值。）*

然后我们可以加入它来获得我们的计数：

```
SELECT m.id, v.val AS `row`, COUNT(*) AS `count`
FROM mytable m
INNER JOIN (
  SELECT row_1 AS val FROM mytable WHERE row_1 IS NOT NULL
  UNION
  SELECT row_2 AS val FROM mytable WHERE row_2 IS NOT NULL
  UNION
  SELECT row_3 AS val FROM mytable WHERE row_3 IS NOT NULL
) v
  ON v.val = m.row_1
    OR v.val = m.row_2
    OR v.val = m.row_3
GROUP BY v.val 
```

这是一个[关于 SQL Fiddle 的工作示例](http://sqlfiddle.com/#!2/86328/3)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:40:26.537

我们可以这样做::

```
Select 
ID, 
CONCAT(ifnull(ROW_1,''), ifnull(ROW_2,''), ifnull(ROW_3,'')) as `temp_ROW`,
count(1) as count

from table group by temp_ROW; 
```

# python - 是否可以使用 Blackboard WebServices 以编程方式向 Blackboard 提交作业

> ID：11455404
> 
> 赞同：6
> 
> 时间：2012-07-12T15:36:29.023
> 
> 标签：python, web-services, blackboard

谁能确认是否可以使用 Blackboard WebServices 以编程方式向 Blackboard 提交作业？（如此[处所述](http://library.blackboard.com/ref/836129ce-27bf-44b3-b664-7feff2f40646/blackboard/ws/gradebook/AttemptVO.html#setStudentSubmission(java.lang.String))）。具体来说，我想知道使用 Gradebook.WS、AttemptVO 和 studentSubmission 方法提交作业的正确方法。到目前为止，这是我尝试过的主要方法，因为尝试可以在 Bb Gradebook 中看到，除了在 Blackboard Gradebook 中看不到尝试VO.studentSubmission：

```
from suds.client import Client 
from suds.plugin import MessagePlugin 
from suds.wsse import Timestamp, UsernameToken, Security 

WS_BASE_URL = 'http://bbdev.bangor.ac.uk/webapps/ws/services/' 

class Learn9Plugin(MessagePlugin): 
    def marshalled(self, context): 
        password = context.envelope.childAtPath('Header/Security/UsernameToken/Password') 
        password.set('Type', 'http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText') 

security = Security() 
security.tokens.append(Timestamp()) 
security.tokens.append(UsernameToken('session', 'nosession')) 
plugin = Learn9Plugin() 

context = Client(   WS_BASE_URL + 'Context.WS?wsdl', 
location = WS_BASE_URL + 'Context.WS', 
autoblend = True, 
wsse = security, 
plugins = [plugin]) 

context.options.wsse.tokens[1].password = context.service.initialize() 

result = context.service.loginTool('xxxxx', 'xxxx', 'xxxxx', '', 500) 

course_id = '_15877_1' 

gradebook = Client(WS_BASE_URL + 'Gradebook.WS?wsdl', 
    location=WS_BASE_URL + 'Gradebook.WS', 
    autoblend=True, 
    wsse=security, 
    plugins=[plugin]) 

attemptVO = gradebook.factory.create('ns0:AttemptVO') 

attemptVO.override = False 
attemptVO.publicFeedbackToUser = False 
attemptVO.score = 0 
attemptVO.gradeId = '_169_1' # Smith
attemptVO.studentSubmission = 'Some sample text representing an assignment'
attemptVO.studentSubmissionTextType = 'PLAIN_TEXT'
print attemptVO
attempt_result = gradebook.service.saveAttempts(course_id, [attemptVO,])
print attempt_result 
```

结果：

```
(AttemptVO){
   attemptDate = None
   creationDate = None
   displayGrade = None
   exempt = None
   expansionData[] = <empty>
   feedbackToUser = None
   grade = None
   gradeId = "_169_1"
   groupAttemptId = None
   id = None
   instructorNotes = None
   override = False
   publicFeedbackToUser = False
   score = 0
   status = None
   studentComments = None
   studentSubmission = "Some sample text representing an assignment"
   studentSubmissionTextType = "PLAIN_TEXT"
 }
[_586_1] 
```

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T08:32:55.970

Blackboard 的一位开发人员回复我说不可能使用 web 服务提交作业，因为“studentSubmission”和“setStudentSubmissionTextType”方法是只读属性。

已向 Blackboard 提出更新文档的请求。

# windows-phone-7 - 我是否需要成为内部应用程序的应用程序中心成员

> ID：11455405
> 
> 赞同：1
> 
> 时间：2012-07-12T15:36:30.467
> 
> 标签：windows-phone-7

我正在为我们公司创建一个小型 Windows 7 Phone 应用程序。它是一个内部应用程序，不会投放市场。首先，我需要在真机上进行测试。通过测试后，工作人员会将其安装到手机上。我是否需要成为 App Hub 成员才能测试和部署我的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:41:19.380

如果您不想越狱您的 Windows Phone：**是**的。

您将需要此帐户才能将（加载非市场应用程序）侧加载到您的手机并对其进行调试。请注意，开发帐户可以链接到的手机数量有限（记忆中的 5 个）。

与往常一样，您可以通过越狱绕过这一点，但您需要在每部手机上都这样做。

# c# - 加载库 998 错误

> ID：11455409
> 
> 赞同：2
> 
> 时间：2012-07-12T15:36:47.577
> 
> 标签：c#, winapi, error-handling, loadlibrary

我有一个 .NET C# 控制台应用程序，它在运行时加载了几个 Win32 DLL-s。当这个应用程序在我的开发人员机器上运行时（我的笔记本电脑上是 32 位 Win7，我的台式机上是 64 位 Win7），有时它会导致 998 错误。重新启动开发人员机器后，此问题消失。这发生在测试服务器（Linux 上的虚拟机，Win Server 2008 R2）上，但重新启动后它也消失了。由于这个原因，不容易复制。

很难理解原因，当我的DLL-s加载dependecy walker时，它显示它们绝对没有问题，两个依赖是Kernel32.DLL和MSVCRT.DLL。今天这个错误发生在从命令行启动我的应用程序。我将应用程序加载到 VS2010 中，然后启动，加载相同的 dll-s 没有任何问题。停止它，我再次从命令行启动了我的应用程序，它也加载了 DLL-s。

这些 DLL-s 不是我开发的，而是第三家公司开发的，所以我看不到 DLL-s 的源代码。知道发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-17T16:10:55.390

将您的dll设置在您的应用程序所在的同一文件夹中。您的应用程序必须以管理员访问权限运行。只需以管理员身份运行 VS 或以管理员身份运行 cmd，然后将 cmd 路径更改为您的应用程序位置，如本例

```
c:\cd /d your_application_path 
```

然后在命令提示符中写入您的应用程序的名称。那么您的应用程序可以拥有管理员令牌来成功执行工作。

# asp.net-web-api - IIS 6 上的 ASP.NET Web API：HTTP 状态代码 500 内部服务器错误

> ID：11455411
> 
> 赞同：0
> 
> 时间：2012-07-12T15:36:57.263
> 
> 标签：asp.net-web-api, .net-4.0, iis-6, windows-server-2003

尽管关闭并调试了自定义错误，但由于我没有更多详细信息，因此我没有更多要说的。以下是一些兴趣点：

*   常规 ASP.NET MVC /controller/action URL 在 iis 6 上工作
*   我已将通配符 isapi 过滤器添加到 iis 6，尽管我认为 .net 4 不需要它
*   WebAPIs 在本地 IISExpress 服务器上工作，所以它不应该是一个序列化错误

有谁知道可能是什么问题？如果没有，至少找到一种方法来获得更详细的错误消息会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:11:53.497

我从来没有找到如何解决我的问题，但我最终通过在同一台服务器上运行 WebAPI 自托管服务来解决这个问题，并且它运行良好。实现它所需的所有文档都在这里： [http ://www.asp.net/web-api/overview/hosting-aspnet-web-api/self-host-a-web-api](http://www.asp.net/web-api/overview/hosting-aspnet-web-api/self-host-a-web-api)

# jquery - 使用 jQuery 解析 XML 时传递变量/参数

> ID：11455412
> 
> 赞同：2
> 
> 时间：2012-07-12T15:36:59.400
> 
> 标签：jquery, jquery-mobile

我目前正在开发一个使用 jQuery、jQuery mobile 和大量 XML 的 PhoneGap 应用程序。这已经交给了我，因为开始研究这个的人已经不在了（但我不会去谈那个）。好的，概述... 我有一个从 XML 文件读取的页面，然后使用返回的数据来注入可用产品的图像和信息。当用户单击其中一个图像时，我希望显示一个对话框......这很简单，我只使用以下内容（对话框是我页面中的一个 div，而不是一个单独的文件）

```
$('#entry_level_phones img').live("click", function(){
    $.mobile.changePage("#popupEntry", { role: "dialog"});    
}); 
```

好的，我现在希望扩展它，以便在单击特定图像时读取相同的 XML 文件并检索有关所选产品的更多信息。此信息被格式化，作为 innerHTML 注入到对话框 div 中并显示......就像这样......

```
$('#entry_level_phones img').live("click", function(){
    // I know the ID of what was clicked using this.id!
    $.ajax({
        type : 'GET',
        url : 'hardware.xml',
        dataType : 'xml',
        success : getProduct(this.id)
    });
});

function getProduct(productID){

    productContent = "";
    // code to parse through XML and format using the passed productID to locate the relevent info 
    productContent = outFromParsingData;
    $("#popupEntry").html(productContent); 
    $.mobile.changePage("#popupEntry", { role: "dialog", "test":"test" });    
} 
```

现在的问题是我需要将相关的 id (this.id) 传递给成功回调。通常，您只需声明函数名称，然后通过 ajax 调用返回的 xml（我仍然不明白如何以及为什么）。

```
success : getProduct // this is ajax call

getProduct(xml) // here's the returned xml passed as an argument 
```

通过上面的修改，我可以读取返回的 XML，但我没有选择的 ID...所以最后我的问题...如何将 id 和 xml 传递给我的 getProduct 函数？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:48:52.437

每次单击图像时重新加载相同 XML 的方法对我来说效率很低。如果您已经加载了 XML 来创建图像和相关内容，那么使用数据属性将与每个图像相关联的相关信息存储在元素本身上，或者将 XML 数据存储在变量中，这不是更有意义吗？并在单击图像时查找带有 ID 的相关条目？

但是要回答您的问题，如果您在请求中定义处理程序，则可以使用闭包，并且在单击处理程序范围内声明的变量将在 AJAX 处理程序范围内可用：

```
$('#entry_level_phones img').live("click", function() {
    var $this = $(this);     
    $.ajax({
        type : 'GET',
        url : 'hardware.xml',
        dataType : 'xml',
        success : function(data) {
             // $this should be within scope here
             console.log($this);
        }
    });
} 
```

# c# - IXmlSerializable 在类中使用时不会反序列化

> ID：11455414
> 
> 赞同：0
> 
> 时间：2012-07-12T15:37:00.350
> 
> 标签：c#, xml, serialization, xml-serialization, ixmlserializable

```
[XmlRoot("company"), DataContract(Name = "company")]
public class Company : IProvideSerialization
{
    /// <summary>
    /// Stock exchange the company is in.
    /// </summary>
    /// <see cref="https://developer.linkedin.com/documents/company-lookup-api-and-fields"/>
    /// <remarks>Available only for public companies.</remarks>
    [XmlElement("stock-exchange"), DataMember(Name = "stock-exchange", EmitDefaultValue = false, IsRequired = false), EditorBrowsable(EditorBrowsableState.Never), Browsable(false)]
    protected SerializableEnum<StockExchange> StockExchangeForXML;
    public static Company FromXml(String XML)
    {
        XmlSerializer x = new XmlSerializer(typeof(Company));
        return (Company)x.Deserialize(new StringReader(XML));
    }
} 
```

SerializableEnum 实现 IXmlSerializable。

SerializableEnum 也有一个有效的 FromXml；它看起来如下：

```
 public static SerializableEnum<T> FromXml(string XML)
    {
        XmlRootAttribute XR = (XmlRootAttribute)System.Attribute.GetCustomAttribute(typeof(T), typeof(XmlRootAttribute));
        XmlSerializer x = new XmlSerializer(typeof(SerializableEnum<T>), new XmlRootAttribute() { ElementName = XR.ElementName, IsNullable = true });
        return (SerializableEnum<T>)x.Deserialize(new StringReader(XML));
    } 
```

当我做：

```
 String StockXML = "<stock-exchange><code>NMS</code><name>NASDAQ</name></stock-exchange>";
        String CompanyXML = "<company><stock-exchange><code>NMS</code><name>NASDAQ</name></stock-exchange></company>";

        SerializableEnum<StockExchange> Stock = SerializableEnum<StockExchange>.FromXml(StockXML);
        Company Cmp = Company.FromXml(CompanyXML); 
```

Stock 将填充数据，但 Cmp 不会填充 Stock 数据（看起来 ReadXml 永远不会被调用）......

我尝试向 XmlSerializer 添加其他类型（例如，new Type[] {typeof(SerializableEnum)}），但这无济于事。

我在这里想念什么？谢谢。

我认为它可能类似于我必须在 SerializableEnum 类的 FromXml 中添加的 RootElementAttribute。IXmlSerializable 忽略了枚举具有的 XmlRoot 属性，因此我添加了该代码以在反序列化时添加它。有没有不同的方法可以让这一切一起工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T16:24:25.807

我认为 Company 类没有*实现*IXmlSerializable。

默认 Xml 序列化忽略所有非公共和只读成员，因此它忽略`protected StockExchangeForXML`.

# java - 是否可以捕获所有可能的错误/异常？

> ID：11455416
> 
> 赞同：4
> 
> 时间：2012-07-12T15:37:05.910
> 
> 标签：java, swing, exception, try-catch

我有一个包含许多类的 Java Swing 程序。我确实在需要的地方使用了 try-catch，但没有在其他地方使用。我还有一个记录器类，它在捕获到异常时写入文件。它打印出堆栈跟踪和消息。

我希望能够记录每个异常，但又不会到处都放 try-catch。这可能吗？

-- 编辑（我的主要方法） --

```
public class Bacon extends Thread implements UncaughtExceptionHandler {
    public static Bacon instance = null;
    private JFrame main;

    private Bacon() {
        main = new JFrame("Bacon");
        main.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
        main.addWindowListener(new WindowEventHandler());
        setLAF();
        main.setSize(Constants.MAIN_DIMENSION);
        main.setLocationRelativeTo(null);
        main.setExtendedState(JFrame.MAXIMIZED_BOTH);
        main.setIconImage(getIcon());
        setUserName();
        setUncaughtExceptionHandler(this);

        main.setJMenuBar(Menu.getInstance());
        main.setContentPane(getMainPanel());
        main.setVisible(true);
    }

    public static Bacon getInstance() {
        if(instance == null)
            instance = new Bacon();

        return instance;
    }

    private JPanel getMainPanel() {
        JPanel main = new JPanel(new BorderLayout());

        main.add(Tabs.getInstance(), BorderLayout.CENTER);
        main.add(StatusBar.getInstance(), BorderLayout.SOUTH);

        return main;
    }

    .
    .
    .
    .
    .
    .
    .

    public static void main(String[] args) {
        try {
            getInstance();
        } catch (Throwable t) {
            ErrorLogging.log(t.getStackTrace(), t.getMessage());
        }
    }

    @Override
    public void uncaughtException(Thread t, Throwable e) {
        ErrorLogging.log(e.getStackTrace(), e.getMessage());
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T15:40:16.470

绝对地！

查看 Thread 类的方法 setDefaultUncaughtExceptionHandler。

[Thread.setDefaultUncaughtExceptionHandler](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#setDefaultUncaughtExceptionHandler%28java.lang.Thread.UncaughtExceptionHandler%29)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T15:40:16.930

您可以捕获尽可能多的 try 封装，因此在您的 main 方法中放置一个周围的 try 块和 catch(Throwable) 以确保您捕获所有可以抛出的东西。

不过，在异常发生时单独处理它们通常是一个更好的主意。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-12T15:39:19.777

您需要处理不希望程序崩溃的异常，否则您可以在 main 方法中 catch(Throwable) 。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-12T15:39:22.983

可能，不建议。

您可以让每个方法都抛出一个`Exception`，并且每个调用该方法的方法也必须抛出一个。

使用这些 try catch 块的目的是让您可以准确缩小问题的出处。他们的目的是帮助你，而不是伤害你。

# iphone - 如何让 iOS 与 .NET Web 服务通信

> ID：11455418
> 
> 赞同：0
> 
> 时间：2012-07-12T15:37:10.603
> 
> 标签：iphone, objective-c

我在连接到这个网络服务时遇到问题，有什么想法我做错了什么吗？

```
- (void)startRetrievingHotels 
{    
    //Create the web service URL
    NSURL *url = [NSURL URLWithString:@"https://www.stratexlive.com/tenants/commercialbank/_vti_bin/stratexws.asmx"];

    //Create the web service request
    ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];

    NSString *requestString = [self buildHotelListRequest];
    NSLog(@"%@", requestString );

    [request setDelegate:self]; 
    [request setUsername:@"asdfasdf@asdfasdf.com"];
    [request setPassword:@"asdfasdfasdfasdf$"];
    [request appendPostData:[[self buildHotelListRequest] dataUsingEncoding:NSUTF8StringEncoding]]; //Set the xml request
    [request startAsynchronous];
}

- (NSString *)buildHotelListRequest
{

    NSString *result = [NSString stringWithFormat: @"<?xml version=\"1.0\"?>"
    @"<GetUserName xmlns=\"https://www.sdf.com/\" />"];

    NSLog(@"HOTEL LIST REQUEST: %@", result);

    return result;
} 
```

这是我得到的回应：

```
> <?xml version="1.0" encoding="utf-8"?><soap:Envelope
> xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
> xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
> xmlns:xsd="http://www.w3.org/2001/XMLSchema"><soap:Header><soap12:Upgrade
> xmlns:soap12="http://www.w3.org/2003/05/soap-envelope"><soap12:SupportedEnvelope
> qname="soap:Envelope"
> xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" />
> 
> <soap12:SupportedEnvelope qname="soap12:Envelope"
> xmlns:soap12="http://www.w3.org/2003/05/soap-envelope" />
> 
> </soap12:Upgrade></soap:Header><soap:Body><soap:Fault>
> 
> <faultcode>soap:VersionMismatch</faultcode><faultstring>Possible SOAP
> version mismatch: Envelope namespace https://www.stratexsystems.com/
> was unexpected. Expecting
> http://schemas.xmlsoap.org/soap/envelope/.</faultstring>
> 
> <detail /></soap:Fault></soap:Body>
> 
> </soap:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:09:43.973

我读到了肥皂，发现你遗漏了一些东西。
这是一些信息，但我不确定在哪里放置用户名和密码。
希望你能弄清楚。

```
NSString *soapMessage = @"<?xml version=\"1.0\" encoding=\"utf-8\"?>\
<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">\
<soap:Body>\
<GetUserName xmlns=\"https://www.stratexsystems.com/\" />\
</soap:Body>\
</soap:Envelope>";
NSURL *url = [NSURL URLWithString:@"https://www.stratexlive.com/tenants/commercialbank/_vti_bin/stratexws.asmx"];
NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:url];
NSString *msgLength = [NSString stringWithFormat:@"%d", [soapMessage length]];
[theRequest addValue: @"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
[theRequest addValue: @"https://www.stratexsystems.com/GetUserName" forHTTPHeaderField:@"SOAPAction"];
[theRequest addValue: msgLength forHTTPHeaderField:@"Content-Length"];
[theRequest setHTTPMethod:@"POST"];
[theRequest setHTTPBody: [soapMessage dataUsingEncoding:NSUTF8StringEncoding]];

NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self]; 
```

# c++ - 如何使用键盘分别绘制网格

> ID：11455419
> 
> 赞同：0
> 
> 时间：2012-07-12T15:37:11.580
> 
> 标签：c++, opengl, glut

我目前正在使用带有 GLUT 库的 Microsoft Visual C++2010 express，我可以在我的`void draw()`函数中轻松地绘制不同的网格。在此之后，我尝试在动画函数中创建不同的“阶段”，每个阶段都调用不同的 - `model.draw("object1")`-。然后，当我尝试使用keyboardown函数更改当前阶段时，它首先工作，但是一旦我使用鼠标移动对象，窗口就会变黑。有什么提示吗？

这是有效的绘图功能：

```
void draw() 
{
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    gluLookAt(  2, 2, -250, 0, 0, 0, 0, 1, 0);
    glRotatef(spin_y, 1.0, 0.0, 0.0);
    glRotatef(spin_x, 0.0, 1.0, 0.0);      

    model.Draw("object1");
    model.Draw("object2");

    glutSwapBuffers();
} 
```

这就是删除 model.Draw("..."); 后动画不起作用 从绘图功能：

```
void animation(int t)
{
    switch (phase) {
        case 0:
            break;
        case 1:
            model.Draw("object2");
            glutSwapBuffers();
            break;
        case 2:
            model.Draw("object1");
            glutSwapBuffers();
            break;
    }
    glutTimerFunc((int) 1000/FPS, animation, 0);
} 
```

这就是键盘功能：

```
void keyboardDown(unsigned char key, int x, int y) {

  switch(key) {
  case '1':phase=1;break;
  case '2':phase=2;break;
  case 'Q':
  case 'q':
  case  27:
    exit(0);
  }
} 
```

这个函数应该让我使用鼠标移动来移动对象，更新 draw() 中使用的 spin_x spin_y 的值：

```
void mouseMotion(int x, int y) 
{
    spin_x = x - old_x;
    spin_y = y - old_y;

    glutPostRedisplay();
} 
```

`model.draw(...)`并且在删除`draw()`函数之前它可以完美运行，但是当我尝试使用动画时，它们就会消失。我也试过在func 中添加`glutPostRedisplay()`after但它仍然不起作用。`model.draw(...)``animation()`

这是主要的：

```
 int main(int argc, char** argv) 
{
    int width = 800;
    int eight = 600;

glutInit(&argc, argv);

glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH);
glutInitWindowSize(width, eight);
glutInitWindowPosition(100, 100);
glutCreateWindow("Perspective's GLUT Template");

glutKeyboardFunc(keyboardDown);
glutKeyboardUpFunc(keyboardUp);
glutMouseFunc(mouseClick);
glutMotionFunc(mouseMotion);
glutReshapeFunc(reshape);
glutDisplayFunc(draw);  
glutIdleFunc(idle);
glutTimerFunc((int) 1000/FPS, animation, 0);
glutIgnoreKeyRepeat(false); 

int subMenu = glutCreateMenu(menu);
glutAddMenuEntry("Do nothing", 0);
glutAddMenuEntry("Really Quit", 'q');

glutCreateMenu(menu);
glutAddSubMenu("Sub Menu", subMenu);
glutAddMenuEntry("Quit", 'q');
glutAttachMenu(GLUT_RIGHT_BUTTON);

initGL(width, eight);

glutMainLoop();
return 0;
} 
```

我也加`glutSwapBuffers()`了animation func，不知道为什么我没有先写。

# javascript - 确认框后如何停止页面刷新？

> ID：11455423
> 
> 赞同：0
> 
> 时间：2012-07-12T15:37:30.367
> 
> 标签：javascript, extjs, gwt, dom-events, jsni

我在一个方法中有这个代码，它在 Ext 中形成一个菜单：

```
 handler: function() {
     var r = $wnd.confirm("Are you sure?");
  } 
```

当我使用`$wnd.alert`时，它只显示一个弹出窗口。当替换为确认时，它可以工作，但会导致整个页面在选择后刷新。理想情况下，我想使用`$wnd.Ext.MessageBox.confirm`，但是当我使用它时，我得到错误 cb.defer is not a function。弄清楚如何让 Javascript 确认工作将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:10:40.087

我会建议以下选项中的一个（或组合）：

```
event.cancelBubble = true;
event.stopPropagation();
return false; 
```

# ruby-on-rails - 使用 RestKit 和 RKObjectManager 时如何添加一些默认参数？

> ID：11455427
> 
> 赞同：1
> 
> 时间：2012-07-12T15:37:40.073
> 
> 标签：ruby-on-rails, ios, devise, restkit

我正在使用 RestKit、RKObjectManager 和服务器端设计进行身份验证。我需要在每个请求上发送我的身份验证令牌。有没有一种方法可以轻松地为所有请求添加它？

目前，对于 GET，我正在执行以下操作：

```
NSString *path = [NSString stringWithFormat:@"/%@/%i", [self pluralizedName], identifier];
path = [path stringByAppendingQueryParameters:[self appendAuthenticationToken:params]];
[[RKObjectManager sharedManager] loadObjectsAtResourcePath:path delegate:delegate]; 
```

这很好用。但是，对于 PUT，我尝试了以下方法：

```
[[RKObjectManager sharedManager] putObject:resource usingBlock:^(RKObjectLoader *loader) {
    loader.delegate = delegate;
    loader.params = [RKParams paramsWithDictionary:[self appendAuthenticationToken:params]];
}]; 
```

这正确发送了我的身份验证令牌，但服务器没有收到我试图更新的资源。有谁知道这样做的正确方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T06:55:50.200

这是我第一次看到将身份验证令牌附加到这样的路径。您不能将其添加到标题中吗？我有一种感觉，这是更标准的做法。

如果您这样做，您可以在您的 RKObjectManager 提供的客户端上使用 [RKClient setValue:forHTTPHeaderField:]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T01:43:45.737

在 RestKit .2 中，您可以将这个问题解决为：

```
 [[[RKObjectManager sharedManager] HTTPClient] setAuthorizationHeaderWithToken:self.user.token]; 
```

# javascript - javascript存储for循环结果

> ID：11455430
> 
> 赞同：3
> 
> 时间：2012-07-12T15:37:42.390
> 
> 标签：javascript, for-loop

有没有办法将“for循环”的结果存储在变量中？

例如，我想在 div 中显示两个名字 kevin 和 elsa。

我知道我可以做 john.friends[0].nom, john.friends[1].nom;

但是如果约翰有很多朋友，那就很难了……

现在变量friendName只给了我名字，我明白为什么但看不到解决方案......

谢谢 ！

```
function Person(name, age, friends) {
    this.name = name;
    this.age = age;
    this.friends = friends;

};

var john = new Person('john', 28, [new Person('elsa', 29, []), new Person('kevin', 31, [])]);

for (var i = 0; i < john.friends.length; i++) {
    var friendName = john.friends[i].name;
}

alert(friendName); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T15:40:48.150

```
var friendNames = []; // store their names within a local array

for(var i = 0; i < john.friends.length; i++){
    friendNames.push(john.friends[i].name);
}

console.log(friendNames); // log to the browser (readability) instead of alert 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T15:40:39.240

```
var friendNames = []; // create array to hold friend names

for(var i=0; i < john.friends.length; i++){    
    friendNames.push(john.friends[i].name); // add friend's name to the array
}

console.log(friendNames); // an array containing all of John's friends' names. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T15:40:13.640

由于您的`friends`变量是一个数组，因此您可以只使用[该类型上可用的一些方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/)：

```
var friendString = john.friends.map(function(f) { return f.name; }).join(' '); 
```

在上面的示例中，[map 方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/map)仅将朋友映射到他们的姓名，然后[join 方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/join)将生成一个空格分隔的所有 johns 朋友的字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T15:41:45.060

您可能需要一个名称数组（**所有名称的列表**）。声明`friendName = new Array()`和`friendName.push(john.friends[i].name);`

```
var friendName = new Array();
for (var i = 0; i < john.friends.length; i++) {
    friendName.push(john.friends[i].name);
    //or friendName[i] = john.friends[i].name;
}
//friendName is now an array of names. Use it as you need (the last line is useful for debugging)
for (i = 0; i < friendName.length; i++) alert(friendName[i]); 
```

* * *

旧代码的问题是循环的每次迭代都会重新分配friendName。时`i = 0`，“elsa”被分配给friendName。时`i = 1`，'kevin' 被重新分配给friendName。

此外，javascript 没有**块**作用域；这就像打电话一样`var friendName = 'elsa'; var friendName = 'kevin';`。不会破坏 javascript 引擎，但请注意这一点。最好将friendName声明为循环上方的数组，就像我提到的其他人一样。

# android - 无法安装 SDK 并显示“未安装任何内容”消息！

> ID：11455432
> 
> 赞同：0
> 
> 时间：2012-07-12T15:37:59.043
> 
> 标签：android, windows, sdk, installation

我已下载 Android SDK，并在 SDK 管理器中收到此消息：

> “什么也没做”。

在程序检测JDK的开始，我有：

> 位置：C:\Program Files(86)\Java\jre7\bin\java.exe

**关于我的系统：**

*   我使用的是 Windows 7 和 JDK 1.7 版。

*   我以管理员身份运行。

*我在 Android SDK 管理器中选择了 Android 2.2 到 Android 4.1。*

有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:48:55.157

您是否从 Windows 开始菜单手动运行**SDK 管理器？**如果是，在我使用**Run as administrator运行****SDK Manager**之前，我在安装更新时遇到了问题，**没有安装任何东西**。我还收到了与在 directory 上**拒绝访问**相关的错误消息。******`c:\Program Files\Andriod\android-sdk\temp`******

 ******使用**以管理员身份运行**对我有用。

![在此处输入图像描述](../Images/3de75e615fed2529b0fdcfd7e715f9b5.png)******

# syntax - Crystal 语法 - 在字符串中“提取”字符串的一部分

> ID：11455433
> 
> 赞同：0
> 
> 时间：2012-07-12T15:38:06.357
> 
> 标签：syntax, crystal-reports

我在 i-net Designer（另一个 Crystal Report 类型程序）中执行此操作。
我的问题有两个部分...

我正在尝试从字符串中“提取”部分字符串。我需要的字符串将始终位于主字符串的中间。但永远不会处于相同的位置。描述和长度总是会改变。

下面是一个例子。
**描述（这是我从中“提取”的主要字符串）：**

```
 The Name of my Book Here CD CTN1234-5678-9 2-1 CD Carton 
```

**第 1 部分**
我要提取的字符串是 Part#, **CTN1234-5678-9**。这将始终是 14 个字符长（3 个字母、9 个数字和 2 个破折号）。

**第 2 部分**
我只需要描述部分。这是本书的标题，从左至 Part#(CTN1234-5678-9)。所以我只需要 **我的书名 CD**

在“公式编辑器”中为我的公式字段 @PartNumber 和 @Description 执行此操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:01:07.453

我敢肯定有一种更简单的方法-但这有效：

```
local stringVar myString   := 'The Name of my Book Here CD CTN1234-5678-9 2-1 CD Carton';
local numberVar myPosition := len(myString);

while not(mid(myString, myPosition - 14, 14) like '???????-????-?') and myPosition > 14
 do myPosition := myPosition - 1;

mid(myString, myPosition - 14, 14); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:09:52.023

对于**第 2 部分 - 描述**我想出了这个（只是修改了最后一行代码）：
再次感谢@Lee Tickett
感谢您的帮助！

```
local stringVar myString := 'The Name of my Book Here CD CTN1234-5678-9 2-1 CD Carton';
local numberVar myPosition := length(myString);

while not(mid(myString, myPosition - 14, 14) like '???????-????-?') and myPosition > 14
 do myPosition := myPosition - 1;

uppercase(trim(left(myString, myPosition - 15))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T17:48:21.367

您可以使用正则表达式：

```
// {@Book Title}
// ([A-Z]{3}[0-9]{4}-[0-9]{4}-[0-9]{1}) - matches the part #
// (.*?) - a non-greedy captured group
// (?= ) - a look-ahead
RegexMatch( "(.*?)(?=([A-Z]{3}[0-9]{4}-[0-9]{4}-[0-9]{1}))" ) 
```

您将需要[Crystal Reports 正则表达式库](http://sourceforge.net/projects/cruflregex/develop/)。

# mysql - 如何显示顶部用户列表和当前登录用户位置

> ID：11455437
> 
> 赞同：0
> 
> 时间：2012-07-12T15:38:16.800
> 
> 标签：mysql, sql

表

```
**Posts:**
| id | userID | title |

| 1  |    6   | text1 |
| 2  |    5   | text2 |
| 3  |    8   | text3 |

**Votes:**
    | id | userID | postID |

    | 1  |    6   |   2    |
    | 2  |    5   |   2    |
    | 3  |    8   |   1    |
    | 4  |    8   |   3    |
    | 5  |    8   |   2    |

**Sql**

SELECT p.*,(SELECT count(*) FROM votes AS v WHERE v.postID=p.id AS count)
FROM posts AS p WHERE p.userID = 6
ORDRER BY count DESC 
```

这将成为前 3 名列表，但如果列表中有类似的内容，我希望名列前茅

```
Your position is 3 
```

如果用户登录。如何计算用户位置？基于他的帖子有多少票

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:32:51.657

尝试这个 ：：

```
Select rank, temp_p.userID from
(
select @rownum:=@rownum+1 ‘rank’, userId, count(1) as count
from
 (SELECT @rownum:=0) r, 
 votes v 
 inner join posts p on (v.postID=p.id)

 ) temp_p
ORDER BY temp_p.count DESC 
WHERE temp_p.userID.userID = 6 
```

# c# - 在 GridView asp.net 4 c# 中的 TemplateField 中将变量读入 NavigateUrl

> ID：11455441
> 
> 赞同：2
> 
> 时间：2012-07-12T15:38:26.797
> 
> 标签：c#, asp.net, gridview, templatefield, navigateurl

我是编程新手。我创建了一个 GridView 并使用 SqlDataSource 进行绑定。网格显示来自 SQL Server 数据库的几个变量，包括超文本链接。

对于特定字段，我需要： - 评估数据库字段“Journal_title” - 将其作为较长字符串的一部分插入到 TemplateField.NavigateUrl - 如果另一个字段（“Indexed_NIH”）为 NULL，则隐藏链接

字符串的语法是正确的，如果我插入一个标题就可以工作，但是我需要从数据库中读取所有标题并将它们插入到 URL 中。

我当前的代码成功地在适当的记录中显示了链接文本（即当“Indexed_NIH！= NULL”时），但 NavigateUrl 没有正确显示。

欢迎任何建议 - 请记住我是新手！

```
<asp:TemplateField HeaderText="PubMed">
<ItemTemplate>
        <asp:HyperLink ID="lnkPubMed" runat="server" Text="S" Target="_blank" NavigateUrl='http://www.ncbi.nlm.nih.gov/pubmed?term="<%# Eval("Journal_title") %>"[Journal]) AND ("last 3 years" [PDat])"' Visible='<%# Convert.ToString(Eval("Indexed_NIH")) == "True" ? true : false %>' >
    </asp:HyperLink>
</ItemTemplate>
</asp:TemplateField> 
```

代码隐藏中没有任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:30:49.737

非常感谢你们俩的帮助。

最后我能够保留我当前的代码，并且经过多次试验和错误（！！！）我发现这给了我想要的东西：

```
<asp:TemplateField HeaderText="PubMed">
<ItemTemplate>
<asp:HyperLink ID="lnkPubMed" runat="server" Text="S" Target="_blank" NavigateUrl='<%# "http://www.ncbi.nlm.nih.gov/pubmed?term=" + (Eval("Journal_title")) + "[Journal] (\"Last 3 years\"[PDat])" %>' Visible='<%# Convert.ToString(Eval("Indexed_NIH")) == "True" ? true : false %>' >
</asp:HyperLink>
</ItemTemplate>
</asp:TemplateField> 
```

我的问题似乎包括：转义引号；正确地将字符串添加到 URL 中；当然还有经验不足！

再次衷心感谢！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:42:58.887

好的方法是利用`RowDataBound`网格控件的事件并将链接分配给超链接按钮

```
protected void Gv_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        object[] dataitems = ((DataRowView)e.Row.DataItem).Row.ItemArray;
        HyperLink hl = (HyperLink)e.Row.FindControl(ControlName);
        if(hl!=null)
        {
          //write code to assing value to link
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T15:45:22.703

您可以在行数据绑定事件中读取 GridView 的每个项目。将行数据绑定事件添加到您的网格视图。

```
void CustomersGridView_RowDataBound(Object sender, GridViewRowEventArgs e)
{

if(e.Row.RowType == DataControlRowType.DataRow)
{
  //Here in cell specify the index of link button
    string text = e.Row.Cells[0].Text 

 }

} 
```

# php - 使用 CakePHP 从特定相册返回图像

> ID：11455451
> 
> 赞同：0
> 
> 时间：2012-07-12T15:39:07.713
> 
> 标签：php, mysql, sql, cakephp, model

考虑我有两个数据库表：`images`和`albums`. 他们有这些模式：

```
images:
id, orig_name, hash, filename, uploaded, views, album_id, user_id, server_id

albums:
id, hash, name, description, user_id 
```

表中的`album_id`字段`images`指向表中的`id`字段`albums`。非常简单的一对多的东西。一张图片可以属于一个相册，一个相册可以有很多张图片。我感到困惑的是如何从我的 CakePHP`Image`模型中的指定相册中获取图像。目前这是我的模型：

```
class Image extends AppModel {
    public $name = 'Image';
    public $belongsTo = array('Server', 'Album');

    public function getImages($options) {
        $params = array('conditions' => array());

        // Specific user
        if (!empty($options['userID'])) {
            array_push($params['conditions'], array('Image.user_id' => $options['userID']));
        }

        // Specific album
        if (!empty($options['albumHash'])) {
            array_push($params['conditions'], array('Image.album_id' => $options['albumHash']));
        }

        // Order of images
        $params['order'] = 'Image.uploaded DESC';
        if (!empty($options['order'])) {
            $params['order'] = $options['order'];
        }

        return $this->find('all', $params);
    }
} 
```

我想要它做的是根据专辑哈希（`hash`表中的字段）从特定专辑中返回图像。如果我有专辑 ID，我知道如何完成这项工作，但我不知道，我只有哈希。

我已经有一个专辑模型，就是这样：

```
class Album extends AppModel {
    public $name = 'Album';
} 
```

但我什至不确定这是否相关。:p

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:42:49.467

试试这个：

```
if (!empty($options['albumHash'])) {
    array_push($params['conditions'], array('Album.hash' => $options['albumHash']));
} 
```

# android - Android中的启动画面Alpha动画

> ID：11455455
> 
> 赞同：2
> 
> 时间：2012-07-12T15:39:15.550
> 
> 标签：android, android-animation, splash-screen, thread-sleep

我想显示一个闪屏动画，其中图像淡入然后淡出。我希望在图像淡出后加载第二个活动。

1.  淡入时间（1000 毫秒）
2.  等待（1000 毫秒）
3.  淡出时间（1000 毫秒）
4.  等待（1000 毫秒）
5.  加载第二个活动

我该怎么做？我目前使用的代码是：

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.animation.AccelerateInterpolator;
import android.view.animation.AlphaAnimation;
import android.view.animation.Animation;
import android.widget.ImageView;
public class Splash extends Activity
{
    ImageView img;
    Thread timer;
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash);
        img = (ImageView) findViewById (R.id.imgSplash);
        img.startAnimation(FadeIn(1000));
        try
        {
            Thread.sleep(1000);
        }
        catch (InterruptedException e1)
        {
            e1.printStackTrace();
        }

        img.startAnimation(FadeOut(1000));

        try
        {
            Thread.sleep(1000);
        }
        catch (InterruptedException e1)
        {
            e1.printStackTrace();
        }
        timer.start();
        Intent intent = new Intent();
        intent.setClass(Splash.this,MainScreen.class);
        startActivity(intent);
    }
    public void onPause()
    {
        super.onPause();
        finish();
    }
    private Animation FadeIn(int t)
    {
        Animation fade;
        fade = new AlphaAnimation(0.0f,1.0f);
        fade.setDuration(t);
        fade.setInterpolator(new AccelerateInterpolator());
        return fade;
    }
    private Animation FadeOut(int t)
    {
        Animation fade;
        fade = new AlphaAnimation(1.0f,0.0f);
        fade.setDuration(t);
        fade.setInterpolator(new AccelerateInterpolator());
        return fade;
    }
} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T16:14:00.890

您可以使用 AnimationSet 来完成。该`Animation.setStartOffset()`方法允许说明动画应该何时开始（0 表示淡入，2000 表示淡出）。下一个 Activity 在 3 秒后使用`Handler.postDelayed()`.

```
private final Handler handler = new Handler();

private final Runnable startActivityRunnable = new Runnable() {

    @Override
    public void run() {
        Intent intent = new Intent();
            intent.setClass(Splash.this,MainScreen.class);
        startActivity(intent);
    }
}; 

public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);
    img = (ImageView) findViewById (R.id.imgSplash);

    setContentView(img);
}

@Override
protected void onResume() {
    super.onResume();

    AnimationSet set = new AnimationSet(true);

    Animation fadeIn = FadeIn(1000);
    fadeIn.setStartOffset(0);
    set.addAnimation(fadeIn);

    Animation fadeOut = FadeOut(1000);
    fadeOut.setStartOffset(2000);
    set.addAnimation(fadeOut);

    img.startAnimation(set);

    handler.postDelayed(startActivityRunnable, 3000);
}

public void onPause()
{
    super.onPause();
    handler.removeCallbacks(startActivityRunnable);
} 
```

# ejb-3.1 - JUnit 测试用例中@EJB 注入的空值

> ID：11455462
> 
> 赞同：1
> 
> 时间：2012-07-12T15:39:54.577
> 
> 标签：ejb-3.1

我在 MyEclipse 10.0 中使用 WAS 8.0、EJB 3.1、CDI 和 EJB 可嵌入容器。还在类路径中定义了 beans.xml 和可嵌入的容器 jar。在测试类中的 EJB 引用（课程）上获取运行时 null。

公共类 CourseTest 扩展 TestCase {

```
@EJB    
private Course course;

@Before
public void setUp() throws Exception {
    EJBContainer.createEJBContainer().getContext().bind("inject", this);
}

@Test
public void test() {

    // Was the EJB injected?
    assertTrue(course != null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T14:18:48.603

您的测试用例类不是由容器构造的，因此不会执行注入。您需要手动从`EJBContainer.createEJBContainer().getContext()`.

（顺便说一句，EJBContainer API 只允许每个进程有一个活动的 EJB 容器。我建议将结果存储`EJBContainer.createEJBContainer()`在一个字段中并从`@After`方法中关闭它。）

# ckeditor - 在 CKEditor 中完成上传后显示完整的 FileURL

> ID：11455463
> 
> 赞同：0
> 
> 时间：2012-07-12T15:39:56.607
> 
> 标签：ckeditor, ckfinder

当我使用 CKFinder（集成在 CKEditor 中）上传或浏览器文件时，如何让它在输入框中显示完整的 FileURL？

也就是说，我想要：`http://www.mydomain.com/userfile/filename.ext`

但不是：`/userfile/filename.ext`。

（我正在使用 CKEditor.NET 3.6.2 和 CKFinder 2.2.2 。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T19:54:05.740

使用 CKFinder 创建图像选择器非常容易！集成后只需输入此代码即可创建 Image Picker

```
<input type="text" name="n_thumb_url" id="n_thumb_url"/>
<input id="n_browseServer" value="Browse Server" type="button">
<script>
function SetFileField(fileUrl) {
    jQuery('#n_thumb_url').val(fileUrl);
}
$("#n_browseServer").on("click", function(){
    var finder = new CKFinder();
    finder.basePath = 'http://localhost/integrated/ckfinder';
    finder.selectActionFunction = SetFileField;
    finder.popup();
});
</script> 
```

# ms-access - 将参数传递给存储过程

> ID：11455465
> 
> 赞同：0
> 
> 时间：2012-07-12T15:40:01.630
> 
> 标签：ms-access, vba

下面的代码返回一个带有硬值编码的存储过程。我需要允许 74(@catcode in Stored Procedure) 更改为从组合框中选择的任何内容。任何帮助是极大的赞赏。我在 Access 中使用直通查询。

```
Private Sub ok_Click()

Dim objConnection As New ADODB.Connection

Dim objCom As ADODB.Command

Dim provStr As String

Dim objConnection As New ADODB.Connection

Dim objCom As ADODB.Command

Dim provStr As String

Set objCom = New ADODB.Command

objConnection.Provider = "sqloledb"

provStr = "Data Source=***;" & "Initial Catalog=***;User Id=***;Password=***;"

objConnection.Open provStr

With objCom

.ActiveConnection = objConnection

.CommandText = "dbo.ix_spc_planogram_match " & ("@catcode=") & Me.cat_code.Value

.CommandType = adCmdStoredProc

.Parameters.Refresh     

.Parameters("@catcode").Value = me.cat_code.value 
   .Execute

    End With

    End Sub 
```

存储过程：

```
execute dbo.ix_spc_planogram_match @catcode 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:46:20.313

我想你的意思是在这些方面：

```
.CommandText = "dbo.ix_spc_planogram_match " &  me.cat_code
.CommandType = adCmdStoredProc
.cmd.Parameters("@catcode") =  me.cat_code

.Execute 
```

这是假设组合的绑定列包含所需的值。

# file - 如何在 Linux Ubuntu 上对任何 txt、php、css 或其他文件类型创建文件锁定？

> ID：11455468
> 
> 赞同：0
> 
> 时间：2012-07-12T15:40:11.973
> 
> 标签：file, ubuntu, locking

在办公室，我们是几个一直在开发同一个项目的开发人员。有时，我们正在修改一个文件（PHP 或 CSS 或 JS 或 ...），但我们不知道其他人是否正在同时修改同一个文件。当然，我们将 GIT 用于较大的项目，但是当它是一个小项目时，我们只是在本地服务器上进行。

因此，我想知道是否存在某种锁定，类似于我们对 Openoffice 文档的锁定，当文件在计算机上打开并且另一台计算机尝试打开同一个文件时，它会收到一条警告消息，提示“计算机 X 已打开的文档。您要以只读方式打开文件还是打开本地副本？”。

我想这是一个在打开文件时创建锁的应用程序，而不是 Ubuntu 的东西？我们习惯与 Kate 一起工作，所以也许还有另一个文本编辑器可以为我们提供 lock ？或者我们是否可以编写某种持久性脚本来检查我们何时打开文件并创建锁（并在关闭文件时销毁锁）？

提前感谢您对此事的看法！:o)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T13:01:50.353

您应该始终使用版本控制系统（如 git），尤其是当有多个开发人员时。来吧，创建一个 git repo 需要几秒钟。

为了最高效的工作，您还应该为每个程序员设置一个单独的开发环境（apache 虚拟主机和 MySQL 数据库）。我不希望在我的屏幕上显示其他人的 var_dump'ed 输出。

# google-maps-api-3 - 更改谷歌地图折线上符号的默认值

> ID：11455474
> 
> 赞同：2
> 
> 时间：2012-07-12T15:40:18.357
> 
> 标签：google-maps-api-3

我对 google.maps.Symbol 有疑问`polyline`。我无法更改默认值（如颜色）。

这是我的代码：

```
var lineSymbol = {
        path: google.maps.SymbolPath.FORWARD_CLOSED_ARROW
};
var arrow = {
    icon: lineSymbol,
    offset: '100%',
    strokeColor: "#000000",
    strokeOpacity :1,
};
flightPath = new google.maps.Polyline({
    path : somePath,
    strokeColor: "#ff0000",
    strokeOpacity: 1,
    icons : [arrow],
});
flightPath.setMap(map); 
```

在此之后，我希望箭头是黑色的 ( `#000000 color`)，但它们仍然是`#ff0000`。
我也试图改变符号的比例，但什么也没发生。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T17:05:17.330

在您的代码中，lineSymbol 是 Symbol 对象，arrow 是 IconSequence，flightPath 是 Polyline。您将符号的 strokeColor 和 strokeOpacity 放在 IconSequence 上，但它属于 Symbol。

```
var lineSymbol = {
        path: google.maps.SymbolPath.FORWARD_CLOSED_ARROW
        strokeColor: "#000000",
        strokeOpacity: 1
};
var arrow = {
    icon: lineSymbol,
    offset: '100%'
};
flightPath = new google.maps.Polyline({
    path : somePath,
    strokeColor: "#ff0000",
    strokeOpacity: 1,
    icons : [arrow]
});
flightPath.setMap(map); 
```

# sql - SSRS 2008 R2 - 从报表服务器链接以纵向而不是横向打印

> ID：11455476
> 
> 赞同：3
> 
> 时间：2012-07-12T15:40:22.393
> 
> 标签：sql, report, reporting-services

我的一份 SSRS 报告有问题，如果我直接从服务器打印，它会纵向打印，从而切断报告的左侧，基本上它似乎打印在右侧 OK 并尽可能向左打印页面内。报告的其余部分并没有打印在单独的页面上。

如果我导出为 PDF 并打印它工作正常，它似乎只在从报表服务器打印时这样做。

交互尺寸和页面尺寸均为宽 29.7 厘米高 21 厘米。

有什么建议吗？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T03:22:49.713

如果它是报表中的链接，则这是一个已知错误，其中属性不会从父报表传播到链接报表。

[点击这里查看链接](http://connect.microsoft.com/SQLServer/feedback/details/225025/linked-report-makes-a-landscape-report-appear-portrait-in-print-preview#details)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T00:38:05.593

在报表设计器中，确保*报表 -> 报表属性 -> 纸张大小 -> 方向*设置为横向。

此外，确保报告*正文*的宽度加上*左右**边距*的宽度（在上面的同一*报告属性*对话框中）不超过*纸张大小 Width*和*Height*。

最后，再次在设计器中单击“*预览*”选项卡并单击“*打印布局*”以确保打印预览以横向呈现报表。

# c# - 用c#链接wek a中的模型

> ID：11455478
> 
> 赞同：0
> 
> 时间：2012-07-12T15:40:28.697
> 
> 标签：c#, java, weka

我正在研究在 Weka“Model1.model”中构建的模型，然后当我使用这个语句在 c# 中运行我的应用程序时 weka.core.SerializationHelper.read("Model1.model");

我收到此错误 ***无法将“java.util.ArrayList”类型的对象转换为“weka.core.FastVector”类型。***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:05:21.630

您是否使用 Weka 3.7 构建模型？

尝试使用 Weka 3.6 构建您的模型。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T03:54:51.530

我也有同样的问题。

我使用 Weka 构建了一个 MLP 模型，并将其保存为 MLPModel.model。

当我尝试在下面的 C# 代码中阅读它时：

```
weka.classifiers.functions.MultilayerPerceptron cl = (weka.classifiers.functions.MultilayerPerceptron)weka.core.SerializationHelper.read("..\\..\\MLPModel.model"); 
```

它输出以下错误：**Unable to cast object of type 'java.util.ArrayList' to type 'weka.core.FastVector'**。

# joomla - Joomla 的 A/B 测试扩展？

> ID：11455480
> 
> 赞同：1
> 
> 时间：2012-07-12T15:40:37.367
> 
> 标签：joomla, joomla-extensions, joomla2.5, ab-testing

我们正在寻求开始在我们的 Joomla 网站上进行 A/B 测试。我们正在寻找：

*   一个 Joomla 扩展（商业是可以的）
*   带有 Joomla 插件的第三方服务。
*   解决方法的推荐策略

补充说明：

是的，我检查了 Joomla 扩展的目录，发现一个选项超过一年没有评论或更新——不是一个巨大的信心建设者。

是的，我读了这个问题： http: [//goo.gl/qZhU4](http://goo.gl/qZhU4)，它提出了一个不同的问题并导致了不同的结果。

我们正在运行 Joomla 2.5，需要一个能够跟上最新版本的解决方案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T08:47:13.333

Visual Website Optimizer 有一个 Joomla 插件。您可以在[http://visualwebsiteoptimizer.com/split-testing-blog/ab-testing-joomla-plugin/看到它](http://visualwebsiteoptimizer.com/split-testing-blog/ab-testing-joomla-plugin/)

-悉达多（我为 VWO 工作）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T22:56:11.650

我的公司 Polished Geek 最近发布了两个新的 Joomla！2.5 用于 A/B 测试的插件。他们使用 Convert.com Experiments 工具集 (http://www.convert.com/)。有一个通用的 Joomla 插件和一个 VirtueMart 2 电子商务专用插件，用于捕获订单和产品信息。

Joomla 扩展目录链接（也有文档链接） -

**J!Convert：为 Joomla! 转换实验！**- [http://extensions.joomla.org/extensions/site-management/analytics/site-analytics-cloud-based/22493](http://extensions.joomla.org/extensions/site-management/analytics/site-analytics-cloud-based/22493)

**为 VirtueMart 转换实验**- [http://extensions.joomla.org/extensions/extension-specific/virtuemart-extensions/virtuemart-stats/22414](http://extensions.joomla.org/extensions/extension-specific/virtuemart-extensions/virtuemart-stats/22414)

我希望你觉得这些有用！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T16:31:18.123

我们只尝试了一对，[JED](http://extensions.joomla.org/extensions/miscellaneous/development/12729)上的一个和[这个](http://visualwebsiteoptimizer.com/split-testing-blog/ab-testing-joomla-plugin/)。我没有直接参与这个项目，所以不能告诉你更多，但我敢肯定，如果它们不是你所需要的，它们是可以适应的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-17T11:10:20.930

刚刚研究了这个问题的答案，发现了一个更新的扩展，“DM A/B 测试”，因为这些答案已经发布：

[http://extensions.joomla.org/extensions/extension/authoring-a-content/planned-content/dm-ab-test](http://extensions.joomla.org/extensions/extension/authoring-a-content/planned-content/dm-a-b-test)

39.90 欧元起，Joomla 2.5 和 3.x 兼容并且可以安装在多个域上。

# sql - 如何查询数据库，并使用第二个查询连接结果（VB.NET）

> ID：11455482
> 
> 赞同：1
> 
> 时间：2012-07-12T15:40:39.787
> 
> 标签：sql, vb.net, join

我对 VB.NET 还很陌生，我希望这是一个简单的问题。我正在尝试查询数据库，将结果存储到数据集，然后查询同一个数据库，并加入 DELETE 任务的结果。这是我到目前为止所拥有的，如果有人有时间可以提供帮助的话。提前致谢。 *还; 我更喜欢了解我做错了什么，而不是有人告诉我如何解决它。*

```
 Private Sub cmdDelete_Click(sender As System.Object, e As System.EventArgs) Handles cmdDelete.Click
    'Set/Open Connection
    Dim con As OleDbConnection = New OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\youngje\Documents\SQL Server Management Studio\Projects\Nwind.accdb")
    con.Open()

    'Set TIMEID
    Dim Yr, Mnth, fRng As String
    Yr = Year(Now)
    Mnth = Format(Month(Now), "00")
    fRng = Yr + Mnth + "00"

    'Query 1/Fill Temp Table (tmp)
    Dim cmdA As OleDbCommand = New OleDbCommand("SELECT PRODUCT, SHIPTO, TIMEID " & _
                                                "FROM tblFactSales " & _
                                                "WHERE (BILLTO = 'INPUT_BILLTO') AND (BRANCHPLANT = 'INPUT_BRANCHPLANT') AND (FRTHANDLE = 'INPUT_FRTHANDLE') AND (DATATYPE = 'FORECAST') AND (TIMEID > '" & fRng & "' )" & _
                                                "AND (SIGNEDDATA >= - .01) AND (SIGNEDDATA <= .01) AND (SALESDATA = 'short_tons')", con)

    'Query 2, joined with Query 1
    Dim cmdB As OleDbCommand = New OleDbCommand("DELETE FS " & _
                                                "FROM tblFactSales as FS INNER JOIN tmp T" & _
                                                "ON FS.PRODUCT=T.PRODUCT AND FS.SHIPTO=T.SHIPTO AND FS.TIMEID=T.TIMEID " & _
                                                "WHERE (FS.DATATYPE = 'FORECAST') AND (FS.TIMEID > '" & fRng & "' )", con)

    'Execute Queries
    cmdA.ExecuteNonQuery()
    cmdB.ExecuteNonQuery()

    'Clean Up
    cmdA.Dispose()
    cmdB.Dispose()
    con.Close()
    GC.Collect()

    'Confirmation
    MessageBox.Show("Records Removed Successfully.", "Clear Complete", _
        MessageBoxButtons.OK, MessageBoxIcon.Information, MessageBoxDefaultButton.Button1)
End Sub 
```

* * *

还没有完全修复它，但我想我越来越近了。我现在在 cmdB.ExecuteNonQuery 上收到“记录已删除”错误。它创建/填充 tmp 表，但没有任何内容被删除。

更新代码：

```
 Private Sub cmdDelete_Click(sender As System.Object, e As System.EventArgs) Handles cmdDelete.Click
    'Set/Open Connection
    Dim con As OleDbConnection = New OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\youngje\Documents\SQL Server Management Studio\Projects\Nwind.accdb")
    con.Open()

    'Set TIMEID
    Dim Yr, Mnth, fRng As String
    Yr = Year(Now)
    Mnth = Format(Month(Now), "00")
    fRng = Yr + Mnth + "00"

    'SELECT, to find unique IDs (PRODUCT, SHIPTO, TIMEID, DATATYPE)
    Dim cmdA As OleDbCommand = New OleDbCommand("SELECT PRODUCT, SHIPTO, TIMEID, DATATYPE INTO tmp IN 'C:\Users\youngje\Documents\SQL Server Management Studio\Projects\Nwind.accdb'" & _
                                                "FROM tblFactSales " & _
                                                "WHERE (BILLTO = 'INPUT_BILLTO') AND (BRANCHPLANT = 'INPUT_BRANCHPLANT') AND (FRTHANDLE = 'INPUT_FRTHANDLE') AND (DATATYPE = 'FORECAST') AND (TIMEID >= '" & fRng & "' )" & _
                                                "AND (SIGNEDDATA >= - .01) AND (SIGNEDDATA <= .01) AND (SALESDATA = 'short_tons')", con)

    'DELETE, joined with cmdA results
    Dim cmdB As OleDbCommand = New OleDbCommand("DELETE tblFactSales.* " & _
                                                "FROM tblFactSales INNER JOIN tmp T " & _
                                                "ON tblFactSales.PRODUCT=T.PRODUCT AND tblFactSales.SHIPTO=T.SHIPTO AND tblFactSales.TIMEID=T.TIMEID", con)

    'Execute Queries
    cmdA.ExecuteNonQuery()
    cmdB.ExecuteNonQuery()

    'Clean Up
    cmdA.Dispose()
    cmdB.Dispose()
    con.Close()
    GC.Collect()

    'Confirmation
    MessageBox.Show("Records Removed Successfully.", "Clear Complete", _
        MessageBoxButtons.OK, MessageBoxIcon.Information, MessageBoxDefaultButton.Button1)

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:17:21.427

我有几件事错了，但我终于让它工作了。这就是我的结果。

```
Private Sub cmdDelete_Click(sender As System.Object, e As System.EventArgs) Handles cmdDelete.Click

    Dim Con As SqlConnection = New SqlConnection("Server = OVP-L-R8MXE5M\SQLEXPRESS;" & "Database = dbTest;" & "Trusted_Connection=TRUE")
    Con.Open()

    Dim Yr, Mnth, fRng As String
    Yr = Year(Now)
    Mnth = Format(Month(Now), "00")
    fRng = Yr + Mnth + "00"

    Dim cmdA As SqlCommand = New SqlCommand("SELECT PRODUCT, SHIPTO, TIMEID, DATATYPE INTO tmp " & _
                                                "FROM tblFactSales " & _
                                                "WHERE (BILLTO = 'INPUT_BILLTO') AND (BRANCHPLANT = 'INPUT_BRANCHPLANT') AND (FRTHANDLE = 'INPUT_FRTHANDLE') AND (DATATYPE = 'FORECAST') AND (RPTCURRENCY = 'USD') AND (TIMEID >= '" & fRng & "') " & _
                                                "AND (SIGNEDDATA >= - .01) AND (SIGNEDDATA <= .01) AND (SALESDATA = 'short_tons')", Con)

    Dim cmdB As SqlCommand = New SqlCommand("DELETE tblFactSales " & _
                                                "FROM tblFactSales RIGHT JOIN tmp " & _
                                                "ON tblFactSales.PRODUCT=tmp.PRODUCT AND tblFactSales.SHIPTO=tmp.SHIPTO AND tblFactSales.TIMEID=tmp.TIMEID AND tblFactSales.DATATYPE=tmp.DATATYPE", Con)

    cmdA.ExecuteNonQuery()
    cmdB.ExecuteNonQuery()

    MessageBox.Show("Records Removed Successfully.", "Clear Complete", _
        MessageBoxButtons.OK, MessageBoxIcon.Information, MessageBoxDefaultButton.Button1)

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T19:57:33.053

我已经使用 SSMS 重新编写了您的查询，以提高格式和可读性。将它们重新集成到您的代码中，看看它们是否有帮助。

```
 INSERT  INTO tmp
        (
         PRODUCT
        ,SHIPTO
        ,TIMEID
        ,DATATYPE
        )
        SELECT  PRODUCT
               ,SHIPTO
               ,TIMEID
               ,DATATYPE
        FROM    tblFactSales
        WHERE   (BILLTO = 'INPUT_BILLTO')
                AND (BRANCHPLANT = 'INPUT_BRANCHPLANT')
                AND (FRTHANDLE = 'INPUT_FRTHANDLE')
                AND (DATATYPE = 'FORECAST')
                AND (TIMEID >= ' & fRng & ')
                AND (SIGNEDDATA >= -.01)
                AND (SIGNEDDATA <= .01)
                AND (SALESDATA = 'short_tons')

DELETE  tblFactSales
WHERE   EXISTS ( SELECT 'True'
                 FROM   tmp T
                 WHERE  tblFactSales.PRODUCT = T.PRODUCT
                        AND tblFactSales.SHIPTO = T.SHIPTO
                        AND tblFactSales.TIMEID = T.TIMEID ) 
```

我会说我仍然对您为什么使用 tmp 表或为什么要以这种方式删除数据感到困惑。但是试一试这些查询，看看它们是否有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T18:30:22.843

我并不肯定，但在查看 DataAdapter.Fill 的函数原型时，我无法想象这会填充数据库中的表，而是可以在 .NET 中迭代的客户端数据集。

与其尝试对客户端结果集执行连接，不如使用 SQL 创建临时表？许多 RDBMS 都支持这样的特性。特别是想到的方言是：

```
SELECT * INTO #tempTable FROM table; 
```

这不会返回结果集，而是在连接上填充临时表（可能在基于数据库系统的事务中）。然后可以将临时表与该连接的其他表连接起来，并在 SQL/DML 语句中使用。

除此之外，在选择和稍后执行的删除之间的目标并不完全清楚。两个查询中的 where 子句是相同的，因此如果在 select 和 delete 之间没有执行任何处理或数据更改，那么加入两者的想法是没有必要的。您可能能够简单地使用 WHERE 子句而不是连接执行 DELETE 语句，并实现相同的目标。

希望这可以帮助！

# javascript - 如何访问javascript Number 类型属性

> ID：11455489
> 
> 赞同：2
> 
> 时间：2012-07-12T15:40:52.053
> 
> 标签：javascript, object

在 JavaScript 对象中。

```
var person = {
  name: "bengen",
  age: 27,
  5: true
} 
```

请问我怎样才能进入5号楼？

-_-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:42:14.863

尝试使用`[]`. 例如，`person[5]`或`person["5"]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:42:28.937

只需通过以下方式使用访问权限`[]`：

```
alert( person[ 5 ] ); 
```

可以使用`.`或访问 JavaScript 对象的属性`[]`。后者对于数字键或在将键标识符存储在另一个变量中的情况下特别有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T15:42:32.807

只需使用方括号访问器而不是点：

```
if(person[5]){
    // if the value is true, do something
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T15:42:55.580

```
var person = {
  name: "bengen",
  age: 27,
  5: true
}

console.log(person['5']); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-12T15:44:41.533

据我记得，这应该有效：`person["5"]`

# c# - 如何在目录中查找子文件夹的名称

> ID：11455492
> 
> 赞同：3
> 
> 时间：2012-07-12T15:41:02.833
> 
> 标签：c#, file, path, directory, substring

我以前问过这种类型的问题，但这个问题不同。我需要找到一个文件夹的根文件夹。

例如：

我得到的是

```
C:\Program Files (x86)\EdisonFactory\NetOffice
C:\Program Files (x86)\EdisonFactory\NetOffice
C:\Program Files (x86)\EdisonFactory\NetOffice
C:\Program Files (x86)\EdisonFactory\NetOffice
C:\Program Files (x86)\EdisonFactory\NetOffice\Plugins
C:\Program Files (x86)\EdisonFactory\NetOffice\Plugins
C:\Program Files (x86)\EdisonFactory\NetOffice\Plugins 
```

我之前使用过这段代码：

```
DsVersions.ASSEMBLY2Row row = dsVersions.ASSEMBLY2.NewASSEMBLY2Row();
row.FOLDER = Path.GetDirectoryName(fileName); 
```

然后我找到了这段代码，并认为这就是答案：

```
DsVersions.ASSEMBLY2Row row = dsVersions.ASSEMBLY2.NewASSEMBLY2Row();
DirectoryInfo directoryName = new DirectoryInfo(Path.GetDirectoryName(fileName));
row.FOLDER = directoryName.Name; 
```

在这段代码之后，我得到了这个：

```
NetOffice
NetOffice
NetOffice
NetOffice
Plugins
Plugins
Plugins 
```

它很接近，但我需要的只是插件。我试过做路径和文件，但它不起作用，我总是得到一个错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T16:41:29.503

根据问题和各种评论，我推断：

*   你手头有一个文件路径
*   该文件位于上述级别*，* `Plugins`即：

`C:\Program Files (x86)\EdisonFactory\NetOffice`

*   您需要获取该目录*下*的目录，而不是该目录本身

如果这些假设成立，那么这将满足您的要求：

```
var directoryName = "C:\Program Files (x86)\EdisonFactory\NetOffice";

var directory = new DirectoryInfo(directoryName);

row.FOLDER = directory
    .GetDirectories()
    .Select(subDirectory => subDirectory.Name)
    .Single(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T20:17:15.557

```
 string rootDir = folderBrowserDialog.SelectedPath;
            string fileDir = Path.GetDirectoryName(fileName);
            if (rootDir.Length < fileDir.Length)
                row.FOLDER = fileDir.Substring(rootDir.Length + 1); 
```

那成功了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-19T12:06:11.240

例如：您在文件夹 NetOffice 中有子文件夹插件，路径为：

> C:\Program Files (x86)\EdisonFactory\NetOffice\Plugins。

并且您试图仅获取文件夹插件的名称，您可以尝试以下代码：

```
string path = @"C:\Program Files (x86)\EdisonFactory\NetOffice";
DirectoryInfo Dictiontory = new DirectoryInfo(path);
DirectoryInfo []Dir = Dictiontory.GetDirectories();// this get all subfolder //name in folder NetOffice.
string dirName = Dir[0]; //var dirName get name from array Dir; 
```

# c# - 正则表达式仅匹配第一个标签

> ID：11455493
> 
> 赞同：0
> 
> 时间：2012-07-12T15:41:02.957
> 
> 标签：c#, java, xml, regex, parsing

我正在尝试编写一个正则表达式来在一个长长的 xml 字符串中找到一个选择，并拉出它找到的标签的第一个实例。

我当前的代码（拉出每场比赛）：`(<action>(.*?)</action>)`

示例代码：

```
<request guid="58004a1e-0c32-4002-a101-59fc28af5836">
<action>Sample/Action</action><date>"7/12/12"</date> 
```

我已经尝试使用多种我发现的方法来匹配第一个实例并忽略其他所有内容，检查并确保在当前匹配之前没有匹配，将其设置为完全匹配等等，但它们都返回两个匹配。我无法设置正则表达式来查找特定的前导或尾随标签，因为这些标签可能会发生变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:49:19.660

简单的答案：停止。

你问错了问题，因为在确定正则表达式是否是解决问题的合适方法之前，你已经决定要使用正则表达式来解决你的问题。

C# 和 Java 都有 XML 解析库，最好使用其中的一个，而不是尝试使用正则表达式复制它们的功能，因为 XML 不是常规语言，所以这通常是不可能的任务。

另请参阅[此答案](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)，尽管该问题是关于 HTML 的。

# oracle - PL/SQL 中的子程序事务行为

> ID：11455494
> 
> 赞同：1
> 
> 时间：2012-07-12T15:41:03.243
> 
> 标签：oracle, plsql

我在 PL/SQL 中有一个子程序

```
PRAGMA AUTONOMOUS_TRANSACTION 
```

指示。

似乎只有在这个子程序中（有一组以相同方式使用的过程，但它们没有这个 pragma）调用这个过程的事务中的变化是不可见的！

我不明白。

其他过程会看到事务中所做的更改，但那些具有此 pragma 指令的过程除外。能够进行单独的提交是否会造成损失？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T15:47:54.513

是的，自治事务就是这样——自治的并且与调用它的事务分开；在提交之前，双方都无法看到对方的更改。使用自治事务的充分理由很少：想到的主要有效用途是错误日志记录。它们经常被滥用，特别是在触发器中以避免“表正在变异”异常。在您的程序中进行自主交易的目的是什么？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T15:49:13.393

具有`AUTONOMOUS_TRANSACTION`编译指示的代码不仅仅是执行一些您不想在父事务失败时回滚的日志记录，这几乎总是一个错误。

自治事务是真正自治的。它们完全独立于父事务。预计自治事务内的代码无法看到任何其他事务中未提交的更改，包括在自治事务启动之前当前会话中正在进行的事务。

如果您来自 SQL Server 背景，则自治事务与嵌套事务完全不同。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-12T15:49:00.357

[自治事务](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/autotransaction_pragma.htm#LNPLS01302)子程序运行在自己独立的事务中。它们的行为方式与您打开一个额外的连接并在返回主事务之前运行程序逻辑完全相同。

由于它们是独立的，因此它们不会看到来自其父事务的未提交更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T15:51:58.880

在 Oracle 中，当您使用 PRAGMA AUTONOMOUS_TRANSACTIONS 时，它允许存储过程作为“即发即弃”过程运行。如果您要在某些过程中进行提交，这也是必要的，因为它不允许回滚。

通常，如果您要引用包含来自触发器的提交的存储过程，则需要在开头有这一行。如果我们的存储过程包含提交，我们也遇到了需要从 Web 服务调用的存储过程。

# matlab - 映射随机样本

> ID：11455495
> 
> 赞同：0
> 
> 时间：2012-07-12T15:41:05.730
> 
> 标签：matlab, random, dataset, random-sample

我有一个小问题，我无法从我的过程中反转奇异值分解，但我想知道我是否可以事先映射数据。

我的一个数据集名为 fulldata。我将 svds 应用于这些数据，如下所示：

```
%% dimensionality reduction 
columns = 6
[U,S,V]=svds(fulldata,columns); 
```

然后我从数据集中随机选择 1000 行：

```
rows = 1000;
columns = 6;

%# pick random rows
indX = randperm( size(fulldata,1) );
indX = indX(1:rows);

%# pick random columns
indY = indY(1:columns);

%# filter data
data = U(indX,indY); 
```

我需要找到一种方法来判断它从 fulldata 中选择了哪些 1000 行？可能输出 1 - 1000 的数据，行号来自 fulldata。有谁知道可以做到的方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:49:26.210

实际上你几乎就在那里：

```
rows = 1000;
indX = randperm( size(fulldata,1) );
indX = indX(1:rows);

dataSample = fulldata(indX, :); 
```

dataSample 现在将包含 indX 中指定的所有 fulldata 行。

# checkout - 大礼包结账 - 删除步骤

> ID：11455498
> 
> 赞同：4
> 
> 时间：2012-07-12T15:41:11.393
> 
> 标签：checkout, spree

我正在尝试删除 2 个结帐步骤。我试图按照网站[http://guides.spreecommerce.com/checkout.html](http://guides.spreecommerce.com/checkout.html)中的文档进行操作， 但仍然没有任何反应。

我正在使用 Spree 1.1.2 ruby​​ 1.9.2p318 Rails 3.2.6 Ubuntu 12.04（精确）32 位

我会告诉你我做了什么，你会告诉我要解决什么。我应该更改文件的名称或位置吗？还是我也应该更改其他文件？我该如何调试它？

我创建了一个新文件“app/models/spree/order_decorator.rb”（也在“app/models/order_decorator.rb”下尝试过）

```
module SpreeCustomExtension

  class Engine < Rails::Engine

    def self.activate

      Spree::Order.class_eval do

        StateMachine::Machine.ignore_method_conflicts = true   # I HAVE ADDED THOSE 2 LINES LATER, HOPING IT WOULD HELP ME,

        Spree::Order.state_machines.clear                                # IT DIDN'T.

        # customize the checkout state machine

        Order.state_machines[:state] = StateMachine::Machine.new(Order, :initial => 'cart') do

          after_transition :to => 'complete', :do => :complete_order

          before_transition :to => 'complete', :do => :process_payment

          event :next do

            transition :from => 'cart', :to => 'payment'

            transition :from => 'payment', :to => 'complete'

          end

          event :cancel do

            transition :to => 'canceled', :if => :allow_cancel?

          end

          event :return do

            transition :to => 'returned', :from => 'awaiting_return'

          end

          event :resume do

            transition :to => 'resumed', :from => 'canceled', :if => :allow_resume?

          end

          event :authorize_return do

            transition :to => 'awaiting_return'

          end

          before_transition :to => 'complete' do |order|

            begin

              order.process_payments!

            rescue Core::GatewayError

              !!Spree::Config[:allow_checkout_on_gateway_error]

            end

          end

          before_transition :to => ['delivery'] do |order|

            order.shipments.each { |s| s.destroy unless s.shipping_method.available_to_order?(order) }

          end

          after_transition :to => 'complete', :do => :finalize!

          after_transition :to => 'delivery', :do => :create_tax_charge!

          after_transition :to => 'payment',  :do => :create_shipment!

          after_transition :to => 'resumed',  :do => :after_resume

          after_transition :to => 'canceled', :do => :after_cancel 

        end

      end

    end

  end

end 
```

* * *

然后我用不同的代码尝试了同一个文件，仍然没有发生任何事情

* * *

```
Spree::Order.class_eval do 

  StateMachine::Machine.ignore_method_conflicts = true 

  Spree::Order.state_machines.clear 

  state_machine :initial => 'cart', :use_transactions => false do 

    event :next do 

      transition :from => 'cart',     :to => 'payment', :if => :payment_required? 

      transition :from => 'cart',     :to => 'complete' 

      transition :from => 'confirm',  :to => 'complete' 

      # note: some payment methods will not support a confirm step 

      transition :from => 'payment',  :to => 'confirm', 

                                      :if => Proc.new { |order| order.payment_method && order.payment_method.payment_profiles_supported? } 

      transition :from => 'payment', :to => 'complete' 

    end 

    event :cancel do 

      transition :to => 'canceled', :if => :allow_cancel? 

    end 

    event :return do 

      transition :to => 'returned', :from => 'awaiting_return' 

    end 

    event :resume do 

      transition :to => 'resumed', :from => 'canceled', :if => :allow_resume? 

    end 

    event :authorize_return do 

      transition :to => 'awaiting_return' 

    end 

    before_transition :to => 'complete' do |order| 

      begin 

        order.process_payments! 

      rescue Core::GatewayError 

        if Spree::Config[:allow_checkout_on_gateway_error] 

          true 

        else 

          false 

        end 

      end 

    end 

    before_transition :to => ['delivery'] do |order| 

      order.shipments.each { |s| s.destroy unless s.shipping_method.available_to_order?(order) } 

    end 

    after_transition :to => 'complete', :do => :finalize! 

    after_transition :to => 'delivery', :do => :create_tax_charge! 

    after_transition :to => 'payment',  :do => :create_shipment! 

    after_transition :to => 'resumed',  :do => :after_resume 

    after_transition :to => 'canceled', :do => :after_cancel 

  end 

end 
```

* * *

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-21T17:31:32.563

好的，所以我终于找到了
——Spree 发布了一个新版本 #1.2.0，对这个确切的问题进行了重大修复。

[大礼包 1.2.0 发行说明](http://guides.spreecommerce.com/release_notes_1_2_0.html)

> 在 Spree 中，结账流程一直很难定制，这在过去引起了投诉。我们很高兴地在 Spree 的 1.2 版本中报告，这实际上变得更加容易......

所以现在的解决方案很简单——
只需撤消所有以前的结帐操作尝试，
通过更新 gem 文件和捆绑安装将 spree 升级到 1.2.0，
按照他们的文档处理所有代码中断（我猜你会有一些） .
并在 app/models/spree/ 下创建一个简单的 order_decorator.rb

```
Spree::Order.class_eval do
  checkout_flow do
    go_to_state :address
    go_to_state :payment, :if => lambda { |order| order.payment_required? }
    go_to_state :confirm, :if => lambda { |order| order.confirmation_required? }
    go_to_state :complete
  end

  # If true, causes the payment step to happen during the checkout process
  def payment_required?
    return false
  end

  # If true, causes the confirmation step to happen during the checkout process
  def confirmation_required?
    return true
  end

end 
```

请享用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-08T04:46:46.177

在 spree >= 2.0.0 中，您可以使用以下辅助方法删除任何结帐步骤。请按照以下步骤操作。

第 1 步：在 app/models/spree/ 中创建名为 order_decorator.rb 的新文件

第2步：复制并粘贴以下代码。

```
Spree::Order.class_eval do
#replace :delivery to any other state 
remove_checkout_step :delivery  
end 
```

感谢狂欢社区。[http://guides.spreecommerce.com/developer/](http://guides.spreecommerce.com/developer/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-24T09:55:26.257

Spree 中的默认结帐步骤

1.  地址
2.  交货
3.  支付
4.  确认

Spree(2.0) 允许您使用相应的帮助程序修改结帐过程以添加或删除步骤。

```
insert_checkout_step
remove_checkout_step 
```

需要记住 remove_checkout_step 一次只会删除一个结帐步骤：

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-03T02:12:51.877

它也适用于 Spree [Solidus](https://solidus.io)的新分支

# asp.net - 在服务器上安装 WinDBG

> ID：11455503
> 
> 赞同：1
> 
> 时间：2012-07-12T15:41:24.123
> 
> 标签：asp.net, vb.net, debugging, windbg

在生产服务器上安装 WinDBG 是否有优势？

我已经阅读了 AdPlus 和 WinDBG 之间的区别。另一位开发人员表示，他们在服务器上使用 AdPlus 创建转储文件，并在客户端 PC 上使用 WinDBG 对其进行分析。

我知道 ADPlus 是 CDB 的包装器，而 WinDBG 更多。我的问题是：在生产服务器上安装 WinDBG 是不是有点矫枉过正？我对在 Visual Studio 之外进行调试比较陌生。我正在调试一个使用 VB.NET（客户端应用程序）和 ASP.NET 的系统。存在内存泄漏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:38:03.663

您不需要安装 WinDbg/AdPlus。如果您需要它，您可以简单地将文件 xcopy 到服务器，甚至可以从共享/USB/其他任何地方运行应用程序。

AdPlus 是一个脚本（它曾经是，现在它是一个托管应用程序）。我不会称它为 CDB 的包装器。它只是自动使用 CDB 执行各种任务，例如在某些条件下创建内存转储。它做得很好，但您可能还想看看[ProcDump](http://technet.microsoft.com/en-us/sysinternals/dd996900.aspx)，因为它提供了一些额外的非常有用的选项。

CDB、WinDbg 和 NTSD 都是包含在 Windows 调试工具包中的调试器。CDB 和 NTSD 是命令行工具，而 WinDbg 提供图形用户界面（不是很花哨的用户界面，但这是题外话）。他们在下面使用相同的调试引擎。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:53:45.863

在服务器上安装 WinDbg 将允许您在现场调试实时系统，此外，您可以通过在服务器上运行 WinDbg 调试服务来执行远程调试，如果您有一些独特的条件来重现难以重现的错误，这可能会更好在您的开发环境中重现。

除此之外，如果您只是分析故障转储或内存转储，那么安装 WinDbg 没有任何优势，因此出于这个原因，这将是矫枉过正。

这里有一个链接告诉您何时使用 AdPlus：http: [//support.microsoft.com/kb/286350](http://support.microsoft.com/kb/286350)

我个人的想法是，如果它满足你的需要，那么你就不需要 WinDbg，说如果你安装了 WinDbg，你可以启用 gflags，获取堆栈跟踪，处理跟踪，创建特定异常的转储，将附加信息转储到日志内存转储不包含等等。所以基本上我只会在需要时安装 WinDbg，否则 Adplus 很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T15:48:17.890

如果您安装了 ADPlus，您将能够在应用程序崩溃或挂起或其他问题（内存泄漏）的情况下生成转储文件。然后你需要分析这个转储文件。WinDBG 将帮助您做到这一点。无需将其安装在生产服务器上。您可以将转储文件复制到开发机器并在那里进行分析。无论如何，WinDBG 不会是多余的。如果出现严重问题，您将能够尽快了解根本原因。如果 WinDBG 没有运行，它本身不会对性能产生任何影响。此外，您可以使用 WinDBG 附加到进程并在运行时对其进行调试。

# javascript - JavaScript：For-Loop 无法正常工作

> ID：11455504
> 
> 赞同：0
> 
> 时间：2012-07-12T15:41:27.060
> 
> 标签：javascript, jquery, loops, for-loop

我得到了以下代码（我从[这里](https://stackoverflow.com/questions/5754450/wrap-each-char-in-except-tags-with-jquery)得到的）：

```
$( "p" ).children().andSelf().contents().each( function () {
  if ( this.nodeType == 3 ) {
    var $this = $( this );
    var regEx = /(\w)/g;

    for(i = 0; i < 5; i++){
      $this.replaceWith( $this.text().replace( regEx, "<span class='numbers"+ i +"'>$&</span>" ));
     }
   }
}); 
```

它是运行良好的功能的一部分。只有当我添加那个 for-Loop 时它才会失败。

问题：当我`console.log(i)`按预期增加时。当 I 时`alert(i)`，它会提示 0-4 六次。此外，`i`不会添加到`numberX`类中。查看 DOM，`i`始终为零。循环有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:54:20.330

在您的`for`循环中`i==0`，`this`在 DOM 中已被您的新`<span>`元素替换，但在 JavaScript 上下文中，`this`仍然指的是您的原始元素。这就是为什么进一步更换不起作用并且课程卡在`0`.

例如，假设您的原始元素是 a `<div>`：

```
i     | this  | The same place in DOM
======|=======|======================================
-     | <div> | <div>
0     | <div> | replaced by <span class="number0">
1...5 | <div> | <span class="number0"> (not affected) 
```

因为在 之后`i==0`，这已经脱离了 DOM。所以进一步更换不起作用。

更正代码的一种方法是：

```
$("div").children().andSelf().contents().each(function(index,item){
    if (this.nodeType == 3) {
        var $this = $(item);
        var arr=$this.text().match(/(\w)/g);
        arr.forEach(function(item,i,a){a[i]=item.replace(/(.*)/, "<span class='number"+i+"'>$&</span>");});
        $this.replaceWith(arr.join(""));
    }
}); 
```

[http://jsfiddle.net/KVm9C/](http://jsfiddle.net/KVm9C/)

# visual-studio - 在 vs2010 上安装 vs2008

> ID：11455505
> 
> 赞同：0
> 
> 时间：2012-07-12T15:41:30.340
> 
> 标签：visual-studio, bitset

由于 vs2010 中的 bitset 问题，我还将安装没有该错误的 vs2008。但我记得，在我以前的经验中，windows sdk 中存在一些冲突。我不完全记得，但我该如何解决这些冲突？还是有什么冲突？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T16:02:57.187

您可能指的问题是 Windows SDK for Visual Studio 2008 附带的 Windows SDK 配置工具有一个严重的错误，即无法在注册表中正确设置 SDK 版本。

您可以在此处阅读有关该问题的信息：http: [//blogs.msdn.com/b/windowssdk/archive/2008/03/01/integrating-windows-sdk-and-vs-with-new-sdk-configuration-tool。 aspx](http://blogs.msdn.com/b/windowssdk/archive/2008/03/01/integrating-windows-sdk-and-vs-with-new-sdk-configuration-tool.aspx)

如帖子中所述，有多种解决方案可确保您针对正确的 SDK 版本进行构建。

我个人安装了 Visual Studio 2008、2010 和 2012 RC1，到目前为止没有任何问题。

当我在 2010 之上安装 Visual Studio 2008 时，我遇到的一个小问题是它更改了我所有的文件关联指向 2008 而不是 2010。要解决这个问题，您可以打开 2010 并转到工具->设置->环境-> 常规并按“恢复文件关联”。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:48:00.940

就个人而言，我在 Win7 x64 上并排安装了 MSVC6、2003、2005、2008 和 2010，完全没有问题。它们都可以使用 GUI (IDE)、调试器等。但是，我只使用 C/C++，因此使用其他语言的经验可能会有所不同。

另请参阅对相同或类似问题的回复：

*   [将 Visual Studio 2010 与 VS2008 并排安装会导致问题吗？](https://stackoverflow.com/questions/879913/will-installing-visual-studio-2010-side-by-side-with-vs2008-cause-problems)
*   [在 Visual Studio 2010 Beta 1 之后安装 Visual Studio 2008 TS](https://stackoverflow.com/questions/1448937/installing-visual-studio-2008-ts-after-visual-studio-2010-beta-1)
*   [在 VS2008 旁边安装 Visual Studio 2010 Beta 2](https://stackoverflow.com/questions/1609235/install-visual-studio-2010-beta-2-beside-vs2008)

# validation - TabControl 上的剩余验证工具提示

> ID：11455507
> 
> 赞同：6
> 
> 时间：2012-07-12T15:41:33.280
> 
> 标签：validation, tooltip, tabcontrol, silverlight-toolkit, silverlight-5.0

我对 a `TabControl`、 a`TextBox`和 a validation 有疑问`ToolTip`。

想象一下有一个带有两个 TabItem 的 TabControl。第一项上有一个简单的`TextBox`. 此属性使用和`TextBox` `Text`绑定到`UserControl`自身的字符串属性。每当设置某些内容时，该属性的设置器都会引发异常。`Mode=TwoWay``ValidatesOnExceptions=True``Text`

的`Resources`部分`UserControl`包含一个新的默认样式`TextBox`和验证`ToolTip`（但是这些样式和模板取自[MSDN](http://msdn.microsoft.com/en-us/library/cc645061%28v=vs.95%29.aspx)）。

现在输入一些内容`TextBox`并让验证`ToolTip`出现：

![在此处输入图像描述](../Images/447ca8a91f0ede796bcb8c04d82d93c4.png)

然后切换到第二个选项卡。验证工具提示仍然存在：

![在此处输入图像描述](../Images/e0162886890baf9a14f6f7ec35158464.png)

我已经制作了一个包含 Silverlight 应用程序的 VS 解决方案来演示该问题。VS 解决方案 zip 存档可[在此处](http://spontifixus.de/silverlight.net/645107/OrphanedValidationTooltip.zip)获得。

有没有人遇到过类似的问题，甚至有解决该问题的方法？

[免责声明： StackOverflow](https://stackoverflow.com/questions/4347891/validation-tooltip-on-textbox-becomes-orphaned-when-changing-tabs)上有一个关于 Silverlight 4的类似问题，大约一年半以来一直没有答案。[我已经在silverlight.net](http://forums.silverlight.net/p/258384/645261.aspx/)上发布了这个问题，但好几天都没有得到回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T11:57:25.823

我认为这是 - 实现的错误`TabControl`。我已经在我们的应用程序中实现了这个行为来解决这个问题：

```
public class TabControlFixBehavior: Behavior<TabControl>
{
    protected override void OnAttached()
    {
        AssociatedObject.SelectionChanged += AssociatedObjectOnSelectionChanged;
        base.OnAttached();
    }

    protected override void OnDetaching()
    {
        AssociatedObject.SelectionChanged -= AssociatedObjectOnSelectionChanged;

        base.OnDetaching();
    }

    private void AssociatedObjectOnSelectionChanged(object sender, SelectionChangedEventArgs args)
    {
        if (args.RemovedItems.Count > 0)
        {
            var oldTabItem = args.RemovedItems[0] as TabItem;
            if (oldTabItem != null)
            {
                var popups = VisualTreeHelper.GetOpenPopups();
                foreach (var popup in popups)
                {
                    var toolTip = popup.Child as ToolTip;
                    if (toolTip != null)
                    {
                        if (VisualTreeHelper.GetRoot(toolTip.PlacementTarget) == oldTabItem.Content)
                        {
                            popup.IsOpen = false;
                        }
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T15:51:20.487

验证工具提示是 silverlight 5 中的隐式功能。请清除“主页”用户控件中的“UserControl.Resources”节点，您将获得预期的行为。

[编辑]我没有读到你问题的结尾，对不起:)

# php - 让 PHP 更改随机生成的 CSS 背景颜色

> ID：11455509
> 
> 赞同：0
> 
> 时间：2012-07-12T15:41:40.913
> 
> 标签：php, css, hex

我意识到这种类型的问题已经有几个线程，但似乎没有一个与我的匹配。我有正确显示 CSS 背景的一系列 6 个数字的代码。然后将这 6 个数字存储到一个数组中，并将该数组的内容与前面的“#”符号连接起来。然后将其存储为另一个变量。这里：

```
$v = 0;
$array = array();
$tot;
$other0 = null;
$other1 = null;
$other2 = null;
$other3 = null;
$other4 = null;
$other5 = null;
$color;

for ($i=0;$i<6;$i++){ //loops 6 times to create 5 numbers
    $tot = rand(0, 15);

    if (($tot>9) && ($tot<16)){ //assigns 10 to "a" in hex
        if ($tot == 10){
            $tot = $other0;
            $other0 = "a";
            //echo $other0;
            $array[$v++] = $other0;
        }
        elseif ($tot == 11){ //assigns 11 to "b" in hex
            $tot = $other1;
            $other1 = "b";
            //echo $other1;
            $array[$v++] = $other1;
        }
        elseif ($tot == 12){ //assigns 12 to "b" in hex
            $tot = $other2;
            $other2 = "c";
            //echo $other2;
            $array[$v++] = $other2;
        }
        elseif ($tot == 13){ //assigns 13 to "b" in hex
            $tot = $other3;
            $other3 = "d";
            //echo $other3;
            $array[$v++] = $other3;
        }
        elseif ($tot == 14){ //assigns 14 to "b" in hex
            $tot = $other4;
            $other4 = "e";
            //echo $other4;
            $array[$v++] = $other4;
        }
        elseif ($tot == 15) { //assigns 15 to "b" in hex
            $tot = $other5;
            $other5 = "f";
            //echo $other5;
            $array[$v++] = $other5;
        }

    }
    else {
        //echo $tot;
        $array[$v++] = $tot; //if not, then just assign to array
    }
}
$var = "";
$color = "";
for ($t=0; $t<6;$t++){
    $var .= (string) $array[$t]; //displays the 6 numbers as one string
}
//var_dump($var); //for more visual reference, uncomment the var_dump
$color = "#" . $var;
echo $color; 
```

以上是在PHP中。

如何使用 CSS 显示该变量？是否像（在同一个 PHP 文件中）：`echo "<style>color:$color</style>";`

还是我必须制作一个 style.php 才能被引用？如果我这样做，我该怎么做？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:44:15.980

它应该是

```
<style>
body {
   background-color: "<?php echo $color; ?>";
}
</style> 
```

这需要在您的`<head>`元素内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:44:36.813

```
<body style="background-color:<?php echo $color; ?>;">

content

</body> 
```

style 属性允许您为元素定义自定义 css，css 属性 background-color 基本上定义了该元素的背景颜色......不言自明，我知道！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T15:44:47.930

好吧，它看起来`"<style>color:$color</style>";`会输出损坏的 html/css。

尝试修改

```
echo '<style type="text/css"> body { background: '.$color.' } </style>'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T15:48:00.567

你为什么不看看这些链接。

[使用php更改页面的背景颜色](https://stackoverflow.com/questions/5475422/change-background-color-of-a-page-using-php)

所以不要这样做：

```
if blablabla {
    echo '<body style="background-color:white">'; 
}
else {  
    echo '<body style="background-color:orange">'; 
} 
```

做这个：

```
echo '<body style="background-color:(variable)">'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T11:40:17.863

```
<?php
    $alpha = ["a","b","c","d","e","f","0","1","2","3","4","5","6","7","8","9"];
    $color = "#";
    for ($i=0; $i<6; $i++) {
        $index = rand(0,count($alpha)-1);
        $color .= $alpha[$index];
    }
?>
<html>
    <body style="background:<?php echo $color ?>">
        <?php echo $color ?>
    </body>
</html> 
```

看起来你让事情变得比它可能的复杂一点。这是一个带有 html 集成的示例，正​​如您首先要求的那样。:)

您在一个数组中声明您需要的所有元素，然后循环 6 次以：生成一个随机索引，从数组中获取相应的元素并将其连接到您的颜色变量。

最后，您可以在 html 文件中任何您需要的地方回显它，如前所述。

# javascript - 如何检查动态附加的事件监听器是否存在？

> ID：11455515
> 
> 赞同：170
> 
> 时间：2012-07-12T15:42:01.957
> 
> 标签：javascript, testing, addeventlistener, dom-events

这是我的问题：是否有可能检查动态附加的事件侦听器是否存在？或者如何检查 DOM 中“onclick”（？）属性的状态？我已经像 Stack Overflow 一样在互联网上搜索解决方案，但没有运气。这是我的html：

```
<a id="link1" onclick="linkclick(event)"> link 1 </a>
<a id="link2"> link 2 </a> <!-- without inline onclick handler --> 
```

然后在 Javascript 中，我将动态创建的事件侦听器附加到第二个链接：

```
document.getElementById('link2').addEventListener('click', linkclick, false); 
```

代码运行良好，但我所有检测附加侦听器的尝试都失败了：

```
// test for #link2 - dynamically created eventlistener
alert(elem.onclick); // null
alert(elem.hasAttribute('onclick')); // false
alert(elem.click); // function click(){[native code]} // btw, what's this? 
```

[jsFiddle 在这里](https://jsfiddle.net/qv0k7Lor/)。如果您单击“为 2 添加 onclick”，然后单击“[链接 2]”，则事件会很好地触发，但“测试链接 2”总是报告错误。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2017-11-16T12:56:24.943

我做了这样的事情：

```
const element = document.getElementById('div');

if (element.getAttribute('listener') !== 'true') {
     element.addEventListener('click', function (e) {
         const elementClicked = e.target;
         elementClicked.setAttribute('listener', 'true');
         console.log('event has been attached');
    });
} 
```

附加侦听器时为元素创建特殊属性，然后检查它是否存在。

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2012-07-12T15:58:14.463

无法检查是否存在动态附加的事件侦听器。

您可以查看是否附加了事件侦听器的唯一方法是附加事件侦听器，如下所示：

```
elem.onclick = function () { console.log (1) } 
```

`onclick`然后，您可以通过返回`!!elem.onclick`（或类似的东西）来测试是否附加了事件侦听器。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2013-01-16T18:10:37.327

我要做的是在你的函数之外创建一个布尔值，它以 FALSE 开始，并在你附加事件时设置为 TRUE。在您再次附加事件之前，这将作为您的某种标志。这是这个想法的一个例子。

```
// initial load
var attached = false;

// this will only execute code once
doSomething = function()
{
 if (!attached)
 {
  attached = true;
  //code
 }
} 

//attach your function with change event
window.onload = function()
{
 var txtbox = document.getElementById('textboxID');

 if (window.addEventListener)
 {
  txtbox.addEventListener('change', doSomething, false);
 }
 else if(window.attachEvent)
 {
  txtbox.attachEvent('onchange', doSomething);
 }
} 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2018-07-04T06:52:26.677

可能重复：[检查元素上是否有事件监听器。没有 jQuery](https://stackoverflow.com/questions/28056716/check-if-an-element-has-event-listener-on-it-no-jquery/41137585#41137585) 请在那里找到我的答案。

基本上这里是 Chromium (Chrome) 浏览器的窍门：

```
getEventListeners(document.querySelector('your-element-selector')); 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-11-21T13:42:48.240

**tl; dr**：不，您不能以任何本机支持的方式执行此操作。

* * *

我知道实现这一点的唯一方法是创建一个自定义存储对象，您可以在其中记录添加的侦听器。大致如下：

```
/* Create a storage object. */
var CustomEventStorage = []; 
```

**第 1 步：**首先，您需要一个可以遍历存储对象并返回给定元素（或 false）的元素记录的函数。

```
/* The function that finds a record in the storage by a given element. */
function findRecordByElement (element) {
    /* Iterate over every entry in the storage object. */
    for (var index = 0, length = CustomEventStorage.length; index < length; index++) {
        /* Cache the record. */
        var record = CustomEventStorage[index];

        /* Check whether the given element exists. */
        if (element == record.element) {
            /* Return the record. */
            return record;
        }
    }

    /* Return false by default. */
    return false;
} 
```

**第 2 步：**然后，您将需要一个可以添加事件侦听器但也可以将侦听器插入存储对象的函数。

```
/* The function that adds an event listener, while storing it in the storage object. */
function insertListener (element, event, listener, options) {
    /* Use the element given to retrieve the record. */
    var record = findRecordByElement(element);

    /* Check whether any record was found. */
    if (record) {
        /* Normalise the event of the listeners object, in case it doesn't exist. */
        record.listeners[event] = record.listeners[event] || [];
    }
    else {
        /* Create an object to insert into the storage object. */
        record = {
            element: element,
            listeners: {}
        };

        /* Create an array for event in the record. */
        record.listeners[event] = [];

        /* Insert the record in the storage. */
        CustomEventStorage.push(record);
    }

    /* Insert the listener to the event array. */
    record.listeners[event].push(listener);

    /* Add the event listener to the element. */
    element.addEventListener(event, listener, options);
} 
```

**第三步：**根据您的问题的实际需求，您将需要以下函数来检查元素是否已添加指定事件的事件侦听器。

```
/* The function that checks whether an event listener is set for a given event. */
function listenerExists (element, event, listener) {
    /* Use the element given to retrieve the record. */
    var record = findRecordByElement(element);

    /* Check whether a record was found & if an event array exists for the given event. */
    if (record && event in record.listeners) {
        /* Return whether the given listener exists. */
        return !!~record.listeners[event].indexOf(listener);
    }

    /* Return false by default. */
    return false;
} 
```

**第 4 步：**最后，您将需要一个可以从存储对象中删除侦听器的函数。

```
/* The function that removes a listener from a given element & its storage record. */
function removeListener (element, event, listener, options) {
    /* Use the element given to retrieve the record. */
    var record = findRecordByElement(element);

    /* Check whether any record was found and, if found, whether the event exists. */
    if (record && event in record.listeners) {
        /* Cache the index of the listener inside the event array. */
        var index = record.listeners[event].indexOf(listener);

        /* Check whether listener is not -1\. */
        if (~index) {
            /* Delete the listener from the event array. */
            record.listeners[event].splice(index, 1);
        }

        /* Check whether the event array is empty or not. */
        if (!record.listeners[event].length) {
            /* Delete the event array. */
            delete record.listeners[event];
        }
    }

    /* Add the event listener to the element. */
    element.removeEventListener(event, listener, options);
} 
```

* * *

**片段：**

```
window.onload = function () {
  var
    /* Cache the test element. */
    element = document.getElementById("test"),

    /* Create an event listener. */
    listener = function (e) {
      console.log(e.type + "triggered!");
    };

  /* Insert the listener to the element. */
  insertListener(element, "mouseover", listener);

  /* Log whether the listener exists. */
  console.log(listenerExists(element, "mouseover", listener));

  /* Remove the listener from the element. */
  removeListener(element, "mouseover", listener);

  /* Log whether the listener exists. */
  console.log(listenerExists(element, "mouseover", listener));
};
```

```
<!-- Include the Custom Event Storage file -->
<script src = "https://cdn.rawgit.com/angelpolitis/custom-event-storage/master/main.js"></script>

<!-- A Test HTML element -->
<div id = "test" style = "background:#000; height:50px; width: 50px"></div>
```

* * *

*尽管自 OP 发布问题以来已经过去了 5 年多，但我相信将来偶然发现它的人将从这个答案中受益，因此请随时提出建议或改进。*

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2019-10-28T22:20:10.500

这种方法不存在似乎很奇怪。最后是时候添加它了吗？

如果你想你可以像下面这样：

```
var _addEventListener = EventTarget.prototype.addEventListener;
var _removeEventListener = EventTarget.prototype.removeEventListener;
EventTarget.prototype.events = {};
EventTarget.prototype.addEventListener = function(name, listener, etc) {
  var events = EventTarget.prototype.events;
  if (events[name] == null) {
    events[name] = [];
  }

  if (events[name].indexOf(listener) == -1) {
    events[name].push(listener);
  }

  _addEventListener(name, listener);
};
EventTarget.prototype.removeEventListener = function(name, listener) {
  var events = EventTarget.prototype.events;

  if (events[name] != null && events[name].indexOf(listener) != -1) {
    events[name].splice(events[name].indexOf(listener), 1);
  }

  _removeEventListener(name, listener);
};
EventTarget.prototype.hasEventListener = function(name) {
  var events = EventTarget.prototype.events;
  if (events[name] == null) {
    return false;
  }

  return events[name].length;
}; 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-05-12T15:12:25.193

例如，您始终可以使用 Chrome 检查器手动检查您的 EventListener 是否存在。在元素选项卡中，您有传统的“样式”子选项卡并靠近它另一个：“事件侦听器”。这将为您提供所有 EventListener 及其链接元素的列表。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-05-16T16:10:03.470

这是我用来检查动态附加事件侦听器是否存在的脚本。我使用 jQuery 将事件处理程序附加到元素，然后触发该事件（在本例中为“单击”事件）。这样，我可以检索和捕获仅在附加事件处理程序时才存在的事件属性。

```
var eventHandlerType;

$('#contentDiv').on('click', clickEventHandler).triggerHandler('click');

function clickEventHandler(e) {
    eventHandlerType = e.type;
}

if (eventHandlerType === 'click') {
    console.log('EventHandler "click" has been applied');
} 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-09-29T17:40:46.117

似乎没有跨浏览器功能来搜索在给定元素下注册的事件。

但是，可以使用某些浏览器的开发工具查看元素的回调函数。这在尝试确定网页的功能或调试代码时很有用。

**火狐**

首先，在开发人员工具的*Inspector*选项卡中查看元素。可以这样做：

*   *在页面上*右键单击要检查的网页上的项目并从菜单中选择“检查元素”。
*   *在控制台*中通过使用函数来选择元素，例如*document.querySelector*，然后单击元素旁边的图标以在*Inspector*选项卡中查看它。

如果向元素注册了任何事件，您将在元素旁边看到一个包含单词*Event的按钮。*单击它将允许您查看已在该元素中注册的事件。单击事件旁边的箭头可以查看它的回调函数。

**铬合金**

首先，在开发人员工具的*Elements选项卡中查看元素。*可以这样做：

*   *在页面上*右键单击要检查的网页上的项目并从菜单中选择“检查”
*   *在控制台*中通过使用函数来选择元素，例如*document.querySelector*，右键单击该元素，然后选择“在元素面板中显示”以在*Inspector*选项卡中查看它。

在显示包含网页元素的树的窗口部分附近，应该有另一个部分带有标题为“事件侦听器”的选项卡。选择它以查看已注册到元素的事件。要查看给定事件的代码，请单击其右侧的链接。

在 Chrome 中，也可以使用*getEventListeners*函数找到元素的事件。但是，根据我的测试，当将多个元素传递给它时， *getEventListeners*函数不会列出事件。如果要查找页面上所有具有侦听器的元素并查看这些侦听器的回调函数，可以在控制台中使用以下代码来执行此操作：

```
var elems = document.querySelectorAll('*');

for (var i=0; i <= elems.length; i++) {
    var listeners = getEventListeners(elems[i]);

    if (Object.keys(listeners).length < 1) {
        continue;
    }

    console.log(elems[i]);

    for (var j in listeners) {
        console.log('Event: '+j);

        for (var k=0; k < listeners[j].length; k++) {
            console.log(listeners[j][k].listener);
        }
    }
} 
```

* * *

如果您知道在给定浏览器或其他浏览器中执行此操作的方法，请编辑此答案。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-09-15T07:59:17.250

// 只需要这个并在匿名函数之外分配属性

```
const element = document.getElementById('div');
if (element && !element.hasAttribute('listenerOnClick')) {
    element.addEventListener('click', function () {
        const elementClicked = this;
        // fnDoAnything(this); // maybe call a function with the elementClicked...
        console.log('event has been attached');
    });
}
element.setAttribute('listenerOnClick', 'true'); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-04-29T16:13:31.767

我只是通过尝试查看我的活动是否已附加才发现这一点....

如果你这样做：

```
item.onclick 
```

它将返回“空”

但如果你这样做：

```
item.hasOwnProperty('onclick') 
```

那么它是“真”

所以我认为当您使用“addEventListener”添加事件处理程序时，访问它的唯一方法是通过“hasOwnProperty”。我希望我知道为什么或如何，但是，经过研究，我还没有找到解释。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-05-29T21:00:14.267

如果我理解得很好，您只能检查是否已检查听众，但不能检查具体是哪个听众。

因此，一些临时代码将填补处理您的编码流程的空白。一种实用的方法是创建一个`state`使用变量。例如，附加一个侦听器的检查器，如下所示：

```
var listenerPresent=false 
```

那么如果你设置了一个监听器，只需更改值：

```
listenerPresent=true 
```

然后在 eventListener 的回调中，您可以在内部分配特定的功能，并以同样的方式，根据某些状态作为变量分配对功能的访问，例如：

```
accessFirstFunctionality=false
accessSecondFunctionality=true
accessThirdFunctionality=true 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-10-15T09:06:25.917

只需在添加之前删除事件：

```
document.getElementById('link2').removeEventListener('click', linkclick, false);
document.getElementById('link2').addEventListener('click', linkclick, false); 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-04-15T21:16:35.530

我编写了一个 Chrome 扩展程序，它需要确定页面上的哪些元素响应了点击。我是这样做的：

(1) 在 manifest.json 中，将“run_at”属性设置为“document_start”。（我们需要在页面开始运行之前注入一个脚本。）

(2) 在您的内容脚本中，添加一些代码以将脚本注入页面，该脚本将覆盖 EventTarget.prototype.addEventListener 以标记所有动态分配的点击侦听器的元素：

```
let flagClickHandledElements = function() {
    let oldEventListener = EventTarget.prototype.addEventListener;
    EventTarget.prototype.addEventListener = function(event_name, handler_func) {
        if (event_name === 'click') {
            if (this.setAttribute) {
                this.setAttribute('data-has_click_handler', true);
            }
        }
        if (oldEventListener)
            oldEventListener(event_name, handler_func);
    }
}

function injectScript(func) {
    let codeString = '(' + func + ')();';
    let script = document.createElement('script');
    script.textContent = codeString;
    (document.head||document.documentElement).appendChild(script);
}

injectScript(flagClickHandledElements); 
```

(3) 在 manifest.json 中将“webNavigation”添加到您的“权限”列表中

(4) 在后台脚本中添加一些代码，以在页面加载完成时通知内容脚本：

```
function onPageDoneLoading(details)
{
    chrome.tabs.sendMessage(details.tabId, {"action": "doneloading"});
}

chrome.webNavigation.onCompleted.addListener(onPageDoneLoading); 
```

(5) 当页面完成加载时，让您的内容脚本将另一个脚本注入页面，扫描页面上的所有元素以查找旧式“onclick”处理程序：

```
let gatherOldStyleClickHandledElements = function() {
    let all_elements = document.getElementsByTagName("*");
    for (let i = 0; i < all_elements.length; i++) {
        let el = all_elements[i];
        if (el.setAttribute && el.onclick) {
            el.setAttribute('data-has_click_handler', true);
        }
    }
}

function onReceiveMessage(request) {
    if (request.action === 'doneloading') {
        injectScript(gatherOldStyleClickHandledElements);
    } else {
        console.log('Unrecognized message');
    }

    return Promise.resolve("Dummy response to keep the console quiet");
} 
```

(6) 最后，你可以在你的内容脚本中测试一个元素，看看它是否有这样的点击处理程序：

```
if (el.getAttribute('data-has_click_handler'))
    console.log('yep, this element has a click handler'); 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2021-07-21T16:37:24.930

```
var listenerPaste = pasteAreaElm.hasOwnProperty('listenerPaste');
if (!listenerPaste) {
    pasteAreaElm.addEventListener("paste", onPasteEvent, false);
    pasteAreaElm.listenerPaste = true;
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-06-10T10:33:53.943

我刚刚编写了一个脚本，可以让您实现这一目标。它为您提供了两个全局功能：`hasEvent(Node elm, String event)`您`getEvents(Node elm)`可以使用它们。请注意，它会修改`EventTarget`原型方法`add/RemoveEventListener`，并且不适用于通过 HTML 标记或 javascript 语法添加的事件。`elm.on_event = ...`

[更多信息在 GitHub](https://github.com/GaurangTandon/checkEventAdded)

**[现场演示](http://jsfiddle.net/vo51y90y/8/)**

**脚本：**

```
var hasEvent,getEvents;!function(){function b(a,b,c){c?a.dataset.events+=","+b:a.dataset.events=a.dataset.events.replace(new RegExp(b),"")}function c(a,c){var d=EventTarget.prototype[a+"EventListener"];return function(a,e,f,g,h){this.dataset.events||(this.dataset.events="");var i=hasEvent(this,a);return c&&i||!c&&!i?(h&&h(),!1):(d.call(this,a,e,f),b(this,a,c),g&&g(),!0)}}hasEvent=function(a,b){var c=a.dataset.events;return c?new RegExp(b).test(c):!1},getEvents=function(a){return a.dataset.events.replace(/(^,+)|(,+$)/g,"").split(",").filter(function(a){return""!==a})},EventTarget.prototype.addEventListener=c("add",!0),EventTarget.prototype.removeEventListener=c("remove",!1)}(); 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-12-25T19:44:21.450

我通常将一个类附加到元素然后检查该类是否存在，如下所示：

```
let element = document.getElementsById("someElement");

if(!element.classList.contains('attached-listener'))
   element.addEventListener("click", this.itemClicked);

element.classList.add('attached-listener'); 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-03-29T19:24:30.780

像这样的东西应该有助于文件：

```
var listeners = window.getEventListeners(document);
Object.keys(listeners).forEach(event => {
    console.log(event, listeners[event]);
}); 
```

或使用选择器：

```
getAllEventListeners = function(el) {
 var allListeners = {}, listeners;

 while(el) {
  listeners = getEventListeners(el);

  for(event in listeners) {
   allListeners[event] = allListeners[event] || [];
   allListeners[event].push({listener: listeners[event], element: el});  
  }

  el = el.parentNode;
 }

 return allListeners;
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2022-02-24T05:46:49.193

**2022年更新：**

我在 TypeScript 中编写了实用程序方法来根据[这个答案](https://stackoverflow.com/a/47330239/6789999)附加和分离事件，但是一个更正的答案。希望有人觉得它有帮助。

```
export const attachEvent = (
  element: Element,
  eventName: string,
  callback: () => void
) => {
  if (element && eventName && element.getAttribute('listener') !== 'true') {
    element.setAttribute('listener', 'true');
    element.addEventListener(eventName, () => {
      callback();
    });
  }
};

export const detachEvent = (
  element: Element,
  eventName: string,
  callback: () => void
) => {
  if (eventName && element) {
    element.removeEventListener(eventName, callback);
  }
}; 
```

像这样导入并在任何地方使用它

```
 attachEvent(domElement, 'click', this.myfunction.bind(this));
  detachEvent(domElement, 'click', this.myfunction); 
```

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2018-05-10T03:06:44.477

理论上，您可以搭载 addEventListener 和 removeEventListener 将删除标志添加到“this”对象。丑陋的，我没有测试...

# objective-c - 使用 Restkits RKObjectMapping 构造自定义 json

> ID：11455517
> 
> 赞同：1
> 
> 时间：2012-07-12T15:42:02.737
> 
> 标签：objective-c, ios, json, restkit

我正在尝试使用 Restkit 从我的 ios 应用程序中通过 RESTful API 创建一个所谓的数据流。为此，API 需要以下 json POST：

```
{"version":"1.0.0",
  "datastreams" : [
    {
      "current_value" : "100",
      "id" : "1"
    }
  ]
} 
```

如您所见，API 接受数据流数组，但我想做的是从单个数据流对象生成此 json 代码。

我要创建的数据流在我的应用程序中表示为具有以下属性的对象：

*   版本
*   标识符
*   当前值

我应该如何设置 RKObjectMapping 对象，以便下面的代码构造并将上面的 json 发送到我的 API？（假设路线和所有其他初始内容已经设置）

```
Datastream *datastream = [[ZCCDatastream alloc] init];
datastream.version = @"1.0.0";
datastream.currentValue = @"100";
datastream.identifier = @"1";
[[RKObjectManager sharedManager] postObject:datastream delegate:self]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T06:52:12.967

您需要为 Datastream 配置序列化映射。尝试这样的事情：

```
[[RKObjectManager sharedManager] postObject: datastream usingBlock: ^(RKObjectLoader *loader) {
    RKObjectMapping* mapping = [RKObjectMapping mappingForClass: [Datastream class]];
    [mapping mapAttributes: @"version", nil];

    //etc.

    loader.delegate = self;
    loader.serializationMapping = mapping inverseMapping];
}]; 
```

# c# - 奇怪的 InvalidCastException 在 if 括号上触发，无论内部代码如何

> ID：11455518
> 
> 赞同：0
> 
> 时间：2012-07-12T15:42:02.853
> 
> 标签：c#, wpf, .net

我在 C# WPF 应用程序中遇到的 InvalidCastException 是如何发生的？

我尝试从“cacheConsumptionStatus = ConsumptionStatusType.GetByKey(Convert.ToInt32(value));”更改应该有问题的行 到“cacheConsumptionStatus = (ConsumptionStatusType.)value;”，结果是一样的。

结果甚至与完全注释掉的那行相同。

“cache”是 BitArray 类型，“hasValue”是 bool，“value”是 object。

相关代码：

*消息.cs*

```
...
switch(propID)
{
...
case 968:
    cache[9] = hasValue;

    if (hasValue)
        {    <-- InvalidCastException -- Unable to cast object of type 'System.Int32' to type 'Enumerations.ConsumptionStatusType'.
            cacheConsumptionStatus = ConsumptionStatusType.GetByKey(Convert.ToInt32(value));
        }

        videoManagerRef.events.FireOnMessageConsumptionStatus(this, cacheConsumptionStatus);
        break;
... 
```

*消费状态类型.cs*

```
using System.Collections.ObjectModel;

namespace Enumerations
{
    public class ConsumptionStatusType : EnumBase<ConsumptionStatusType>
    {
        public static readonly ConsumptionStatusType CONSUMED = new ConsumptionStatusType(0, "CONSUMED");
        public static readonly ConsumptionStatusType UNCONSUMED_SUPPRESSED = new ConsumptionStatusType(1, "UNCONSUMED_SUPPRESSED");
        public static readonly ConsumptionStatusType UNCONSUMED_NORMAL = new ConsumptionStatusType(2, "UNCONSUMED_NORMAL");
        public static readonly ConsumptionStatusType UNCONSUMED_ELEVATED = new ConsumptionStatusType(3, "UNCONSUMED_ELEVATED");

        public ConsumptionStatusType(int key, string value)
        : base(key, value)
        {
        }

        public static ReadOnlyCollection<ConsumptionStatusType> GetValues()
        {
            return GetBaseValues();
        }

        public static ConsumptionStatusType GetByKey(int key)
        {
            return GetBaseByKey(key);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:26:41.503

你还没有展示你`EnumBase`课堂上的内容，但我怀疑`GetBaseByKey`在某些时候你正在尝试做与`(ConsumptionStatusType)value`你直接尝试相同的演员。像这样的强制转换适用于普通的`enum`，但是你在这里拥有`ConsumptionStatusType`的是一个试图表现得像一个`enum`但不提供任何类型转换的类`Int32`。从这里显示的内容来看，您最好只制作`ConsumptionStatusType`一个真实的`enum`而不是使用`EnumBase`该类，这似乎没有做任何枚举上不可用的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T13:03:37.887

这个问题是一个参考问题，而不是代码问题：我正在处理调试引用的库，而项目正在引用发布 .dll，这就是为什么我在调试 .dll 中进行的更改并不重要。

# extjs4.1 - ExtJS 4.0.7 到 4.1 迁移：动态添加组件失败

> ID：11455522
> 
> 赞同：1
> 
> 时间：2012-07-12T15:42:08.767
> 
> 标签：extjs4.1

我有一个要求，用户必须能够动态地将给定的面板分成两部分（水平/垂直）。我使用这段代码在 ExtJS 4.0.7 中实现了同样的效果

```
splitPanel: function(direction)
{
    var subWizard1 = Ext.create('Ext.ux.SplitPanel', {
        contextMenuItems: this.contextMenuItems
    });

    var subWizard2 = Ext.create('Ext.ux.SplitPanel', {
        contextMenuItems: this.contextMenuItems
    });

    this.layout = {
        type: direction,
        align: 'stretch'
    };

    this.add([ subWizard1, subWizard2]);

    subWizard1.on({
        userSelection:
        {
            scope: this,
            fn : function(sourceEvent,sourceObject,options)
            {
                this.fireEvent('userSelection',sourceEvent,sourceObject,options);
            }
        }
    });
    subWizard2.on({
        userSelection:
        {
            scope: this,
            fn : function(sourceEvent,sourceObject,options)
            {
                this.fireEvent('userSelection',sourceEvent,sourceObject,options);
            }
        }
    });
} 
```

Ext.ux.Split Wizard 的定义：-

```
Ext.define('Ext.ux.SplitPanel', {
    extend : 'Ext.panel.Panel',

    mixins: {
        splitPanelController: 'Ext.ux.SplitPanel.Controller'
    },

    initComponent : function() {    
        var config = {
            flex: 1,
            autoDestroy: true,
            autoRender: true,
            listeners: 
            {
               render: function() 
               {
                   //Adding a Context Menu Click Event Listener. Since this is a simple plain panel without any items (unlike grid,tree etc) 
                   // we need to add the contextmenu listener on the body DOM . Ext.getBody() returns the current document body as an Ext.element
                   this.body.on({
                       contextmenu: 
                       {
                           scope: this,
                           // disable the browser's default context menu
                           stopEvent: true,                    
                           fn:function(sourceEvent, sourceObject, options)
                           {
                               this.genContextMenu(sourceEvent, sourceObject , options);
                           }
                       } 
                   });
               }
            }
        };

        this.elemRepID = "";

        Ext.apply(this, Ext.apply(this.initialConfig, config));
        Ext.ux.SplitPanel.superclass.initComponent.apply(this, arguments);

        this.addEvents('userSelection');
    },
    onRender: function()
    {
        Ext.ux.SplitPanel.superclass.onRender.apply(this, arguments);
    }

}); 
```

'Ext.ux.SplitWizard' 中混合的'Ext.ux.SplitWizard.Controller' 具有从面板上的上下文菜单调用的“splitPanel”方法。这样，用户可以右键单击弹出上下文菜单的面板，使用它可以水平/垂直拆分面板，相应地调用“splitPanel”方法。

genContextMenu 方法：

```
genContextMenu : function(sourceEvent, sourceObject , options) {

    var menuItems = new Array();

    menuItems.push({
        text : 'Split',
        iconCls : 'ContextMenu-Split-icon',
        menu : {
            items : [ {
                text : 'Horizontally',
                scope : this,
                iconCls : 'ContextMenu-Split-Vertical-icon',
                handler : this.splitPanel.bind(this,'vbox')
            }, {
                text : 'Vertically',
                scope : this,
                iconCls : 'ContextMenu-Split-Horizontal-icon',
                handler : this.splitPanel.bind(this,'hbox')
            }, {
                text : 'UndoSplit',
                scope:    this,
                iconCls : 'ContextMenu-Undo',
                handler : this.undoSplit
            } ]
        }
    });

    var wizardContextMenu = Ext.create('Ext.menu.Menu', {
        margin : '0 0 10 0',
        floating : true,
        renderTo : Ext.getBody(),
        items : menuItems,
        listeners: 
        {
           render: function() 
           {
               // Disabling browser context menu from popping when right clicked on menu body.
               this.body.on({
                   contextmenu: 
                   {
                       scope: this,
                       stopEvent: true,                    
                       fn:    Ext.emptyFn                           
                   } 
               });
           }
        }
    });

    wizardContextMenu.showAt(sourceEvent.getXY());
} 
```

这在 4.0.7 中运行良好。但是当我迁移到 4.1

```
this.add([ subWizard1, subWizard2]); 
```

因“容器未定义”而失败。这是正确的方法吗？还是有更好的方法？

# java - 为什么我的通用方法需要强制转换？

> ID：11455526
> 
> 赞同：1
> 
> 时间：2012-07-12T15:42:24.720
> 
> 标签：java

我有一个我想公开的服务层方法，它应该返回一个扩展 CMSContent 的对象的实例（例如交货时间、价格）。但是，在方法**getCMSContent**中，编译器坚持要我对**T**进行强制转换。这个演员表是否可以接受，还是我违背了泛型的目的？

我使用“-Xlint:unchecked”进行编译，没有收到任何警告，它的功能与我预期的一样。

```
 public <T extends CMSContent> T getCMSContent(String cmsKey, Class<T> clazz) {
        T cmsInstance = (T) CMSObjectCache.getCachedCMSObject(cmsKey, clazz);
        return cmsInstance;
    } 
```

这是getCachedCMSObject的整个方法

```
public static <T> T getCachedCMSObject(String objectKey, Class<T> cls) {
    init();
    CMSObject cmsObject = cmsObjectCache.get(objectKey);
    if (cmsObject != null) {
        return cmsObject.getCMSObject(cls);
    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:46:42.237

由于的签名`getCachedCMSObject`是：

```
T getCachedCMSObject(String cmsKey, Class<T> clazz) 
```

`T`尽管您可能想要抛出异常而不是返回 null，但您的演员表是不必要的。

# php - 使用“时间前”功能和日期差异的时间戳

> ID：11455530
> 
> 赞同：1
> 
> 时间：2012-07-12T15:42:32.130
> 
> 标签：php, sql, time, timeago

我的主机使使用 MySQL 变得异常困难；为了避免使用 MySQL，有没有办法通过使用无表的“时间前”功能为文章添加时间戳，然后使用`echo`显示当前日期和“时间前”日期之间的差异？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:46:08.897

在您的文章表中添加一`DATETIME`列。然后，当您插入/更新文章时，您可以设置时间

```
$row = array(
    'title' => 'My Article',
    ...
    'date' => date("Y-m-d H:i:s")
);

$db->insert('article', $row); 
```

当您将文章拉出时，您会发现不同之处：

```
$row = $db->get('article', 32);

$diff = time() - strtotime($row['date']); 

print $diff . ' in seconds'; 
```

然后，您可以使用秒 $diff 执行某些操作，例如除以分钟、小时、天等。以显示您想要的时间类型。

# php - 读取文件问题 PHP

> ID：11455534
> 
> 赞同：0
> 
> 时间：2012-07-12T15:42:34.990
> 
> 标签：php

我正在尝试使用 php 标头和 readfile 函数强制下载，这是我的代码：

```
if(file_exists($file_url)){header('Content-Type: '.$ftype);
header('Content-Transfer-Encoding: binary');
header('Content-Transfer-Encoding: binary'); 
header('Expires: 0'); 
header('Cache-Control: must-revalidate, post-check=0, pre-check=0'); 
header('Pragma: public');
header("Content-Length: " . filesize($dir.$fname));
header("Content-disposition: attachment; filename=\"".$fname."\""); 
ob_clean(); 
flush(); 
readfile($dir.$fname);
exit;} 
```

问题是大于 37mb 的文件以 0 字节下载。我检查了 php 配置并`memory_limit`设置为 200mb，我尝试用这个块下载：

```
$filename = $dir.$fname;
$filesize = filesize($filename);

    $chunksize = 4096;
    if($filesize > $chunksize)
    {
        $srcStream = fopen($filename, 'rb');
        $dstStream = fopen('php://output', 'wb');

        $offset = 0;
        while(!feof($srcStream)) {
            $offset += stream_copy_to_stream($srcStream, $dstStream, $chunksize, $offset);
        }

        fclose($dstStream);
        fclose($srcStream);   
    }
    else 
    {
        // stream_copy_to_stream behaves() strange when filesize > chunksize.
        // Seems to never hit the EOF.
        // On the other handside file_get_contents() is not scalable. 
        // Therefore we only use file_get_contents() on small files.
        echo file_get_contents($filename);
    } 
```

但不是强制下载，而是显示文件。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:07:16.640

```
function readfile_chunked($filename,$retbytes=true) { 
   $chunksize = 1*(1024*1024); // how many bytes per chunk 
   $buffer = ''; 
   $cnt =0; 
   // $handle = fopen($filename, 'rb'); 
   $handle = fopen($filename, 'rb'); 
   if ($handle === false) { 
       return false; 
   } 
   while (!feof($handle)) { 
       $buffer = fread($handle, $chunksize); 
       echo $buffer; 
       ob_flush(); 
       flush(); 
       if ($retbytes) { 
           $cnt += strlen($buffer); 
       } 
   } 
       $status = fclose($handle); 
   if ($retbytes && $status) { 
       return $cnt; // return num. bytes delivered like readfile() does. 
   } 
   return $status; 
}
header('Content-Type: '.$ftype);
header('Content-Transfer-Encoding: binary'); 
header('Expires: 0'); 
header('Cache-Control: must-revalidate, post-check=0, pre-check=0'); 
header('Pragma: public');
header("Content-Length: " . filesize($dir.$fname));
header("Content-disposition: attachment; filename=\"".$fname."\""); 
readfile_chunked($filen); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:54:48.520

试试这个。

```
header ("Content-Disposition: attachment; filename=".$filename."\n\n");
header ("Content-Type: application/octet-stream");
@readfile($link); // Path to file 
```

# database - 带索引的sqlserver表的复制结构

> ID：11455537
> 
> 赞同：1
> 
> 时间：2012-07-12T15:42:45.777
> 
> 标签：database, sql-server-2008-r2, indexing, alter

我需要一个每天运行多次的脚本来在新数据库中构建表（数十个）并从旧数据库中复制某些信息，我将其称为“上一个”数据库。

我想将每个表的结构从“上一个”数据库复制到新数据库。这很容易做到（谢谢，谷歌）。我还希望能够在新表中索引相同的信息。索引有时在列上，有时在列的组合上。我可以很容易地手动构建这些索引——即使它们有很多。但是，我想知道是否有一种 SQL 脚本方式来告诉 SQL，“来吧，伙计，看看那个 'prev' 表中的索引，并将相同的索引放在这个新表中。”

```
-- rename underlying files of old db.
ALTER DATABASE abc SET OFFLINE
alter database abc
modify file (name=abc,
filename = 'D:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\DATA\xyz.mdf')
GO
ALTER DATABASE abc
modify file (name=abc_log,
filename = 'D:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\DATA\xyz_log.ldf')
GO

ALTER DATABASE abc SET ONLINE

-- give new logical name to the prev database
-- not sure this will work, but I think it will
USE master
GO
ALTER DATABASE abc MODIFY NAME = xyz
GO

-- make a new database
CREATE DATABASE abc
GO

-- note that prev db is xyz, new one is abc but has no tables yet
USE abc
GO

-- for each table, copy the structure into table of new db with same name
SELECT TOP 0 INTO dbo.atab FROM xyz.dbo.atab
GO
  -- for each index in THIS table
  CREATE INDEX idx_field1 ON db.atab  (field1)
  GO
  CREATE INDEX idx_combined ON db.atab  (field2, field3)
  GO
  -- etc. 
```

无论如何，我认为这样的事情会奏效。有没有更好的方法来完成最后一部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:23:08.243

你没有提到谷歌提供的伟大洞察力。

但是，由于您使用的是 SQL Server，因此您应该了解脚本。在 SQL Server Management Studio 中，您可以右键单击数据库并选择*Tasks --> Generate Scripts ...*。这会将您带到一个向导，该向导将为数据库中的部分或所有对象生成脚本，包括表上的索引和约束。

# php - 用PHP中的一组数据在mysql的多列中查找匹配项

> ID：11455544
> 
> 赞同：2
> 
> 时间：2012-07-12T15:43:08.630
> 
> 标签：php, mysql, arrays, pattern-matching

我有一个 PHP 数组：`Array(keyword1,blah0,blah1,blah2)`和一个 SQL 查询。

在查询中，我想查找 Array 中的数据之一是否存在于选定的少数列之一中`(columnA|columnB|columnC)`，如果为真则获取该行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:53:59.723

我想这就是你想要的。我不知道您是否要检查数组中每个值的每一列。

```
SELECT * FROM tableName
WHERE columnA = $phpArray[0] OR
columnA = $phpArray[0] OR
columnB = $phpArray[0] OR
columnC = $phpArray[0] OR
columnA = $phpArray[1] OR
columnB = $phpArray[1] OR
columnC = $phpArray[1] OR
columnA = $phpArray[2] OR
columnB = $phpArray[2] OR
columnC = $phpArray[2] OR 
... 
columnC = $phpArray[n]; 
```

您可以使用 PHP 在循环中创建此语句

```
$sql = "SELECT * FROM tableName WHERE ";
for($i=0;$i<count(phpArray)-1;$i++){
   $sql .= "columnA = "+"'"+$phpArray[$i]+"'"+ OR "
   $sql .= "columnB = +"'"+$phpArray[$i]+"'"+ OR "
   $sql .= "columnC = +"'"+$phpArray[$i]+"'"+ OR "
}
$sql .= "columnA = +"'"+$phpArray[$i]+"'"+ OR "
$sql .= "columnB = +"'"+$phpArray[$i]+"'"+ OR "
$sql .= "columnC = +"'"+$phpArray[$i]+"'"+;"
*send sql query 
```

**编辑：**修复了代码中的错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:57:33.573

您需要这样的查询：

```
$instring = implode("','", $array);
$sql = "SELECT `xy` FROM `z` WHERE (`columnA` IN ('".$instring."')
OR `columnB` IN ('".$instring."')
OR `columnC` IN ('".$instring."'))"; 
```

# sql - .sql 脚本的 PostgreSQL 查询/错误日志记录

> ID：11455548
> 
> 赞同：6
> 
> 时间：2012-07-12T15:43:25.093
> 
> 标签：sql, postgresql, logging, tee, spool

这是问题所在：我需要知道如何从执行的 .sql 脚本中获取所有 PostgreSQL 输出以记录到文件中，包括错误和查询结果。

我已经用 \o 和 \o 开始和结束标签包围了我的脚本，但这只会记录查询的结果，这并不能告诉我什么成功和失败。我尝试使用 Unix 工具将调用的结果传递给 PostgreSQL，如下所示：

```
 $~: psql < filename.sql | tee &> filename.log 
```

...没有成功。在这种情况下，Filename.log 最终完全为空。

我不想激活通用日志记录，因为我只关心我编写的脚本的成功/失败，并记录下来以备将来参考。

在 Oracle 中，我使用 SPOOL，在 MySQL 中我使用 TEE。这两个都足以满足我的需求，但是 \o 没有此功能，激活日志记录也没有，因为此日志记录到单个文件，我希望根据导致这些日志的文件来分离我的日志。

任何帮助，将不胜感激。

编辑：我使用的版本是 9.1

编辑：我遇到的问题是使用 -f 和使用 < 来执行 .sql 文件给了我基本相同的结果；它不记录错误，只记录查询结果。我需要以某种方式获取stderr（如果使用的是）将它的消息打印到文件而不仅仅是命令行，这样文件看起来基本上与运行文件的命令行结果相同，查询结果和错误混合在一起我需要这样做的原因是因为它使调试 .sql 文件变得更加容易，并且它允许我保留有针对性的记录，同时避免通用错误日志记录。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-14T03:45:44.043

我在命令行上使用了错误的重定向语法。虽然在我看来这不是一个理想的解决方案（我必须记住修改我曾经运行的任何命令以将输出重定向到文件），但它可以工作，这就是我所关心的。

要将 stdout 和 stderr 重定向到一个文件以仅记录一个 .sql 文件的结果，包括错误和查询，可以执行以下操作：

```
psql -f scriptname.sql &> logname.txt 
```

以下是细分： -f （正如 Frank Heikens 的回答中提到的那样）比 < 用于读取 .sql 脚本是一个更好的命令，因为它显示了触发错误的行号。&> 是一个 Linux 命令行技巧，它将 stdout 和 stderr 都放入后面的文件中。要将日志限制为仅错误（仅 sdterr 输出），只需使用 2> 而不是 &>。不需要管道，因为两条流都流向同一个地方。

但是，您会注意到，上述命令获取了命令的所有输出并将其放入文件中，因此您在命令行中看不到任何输出。这对于调试 .sql 脚本并不理想，因此可以使用以下命令：

```
psql -f scriptname.sql 2>&1 | tee logname.txt 
```

这里的故障是 2>&1 是 &> 的长形式，但是在使用管道时，2>&1 避免了 BASH 将语法解释为错误（不要问我为什么）。tee 只是允许输出到控制台和给定文件。上述所有命令中的文件名都可以是完整路径，并且可以包括 ~ （用于主目录），以及 Linux 可以解释为有效文件名和/或路径的任何其他内容。

尽管如此，这个解决方案并不理想，因为它在我需要记录的 .sql 脚本之外。但是，这种方法确实有效。我认为 PostgreSQL 在 Linux 上的历史部分归咎于依赖命令行工具来完成这类事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-15T20:02:29.713

这也有效 - 为“详细日志记录”使用 -a -b 和 -e 选项：

```
psql -f scriptname.sql -a -b -e &> logname.text 
```

psql --help 显示：

```
Input and output options:
  -a, --echo-all           echo all input from script
  -b, --echo-errors        echo failed commands
  -e, --echo-queries       echo commands sent to server 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T16:11:40.617

使用 -f （和其他设置）来提供[psql](http://www.postgresql.org/docs/current/static/app-psql.html)。

# ruby-on-rails - 如何将 Javascript 文件导入 Haml 视图？

> ID：11455551
> 
> 赞同：16
> 
> 时间：2012-07-12T15:43:29.917
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想在 Haml 视图中包含一些 Javascript 功能，但我不希望它插入到每个视图中。我是否必须将 Javascript 文件放在 public/javascripts 中，或者我可以将它放在 app/assets/javascripts 中以使其对用户隐藏，并且仍然从 haml 视图文件中引用？

如果可能的话，你会怎么做这两个选项？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-12T15:47:18.857

你应该只使用

```
!!!
%html
  %head
    = javascript_include_tag "my_js_file" 
```

如果它特定于一个地方，你应该使用`content_for`

```
!!!
%html
  %head
    = yield(:javascripts) 
```

然后在你看来

```
- content_for :javascripts do
  = javascript_include_tag "my_js_file" 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-12T15:54:55.833

# 直接包含

如果您希望将 javascript 直接包含在 haml 中，您可以使用`:javascript`

```
:javascript
  $(function() { alert("js inside haml"); } 
```

您可以将其放入局部，然后仅渲染局部以保持视图清洁。

# 参考它

如果您只想引用 javascript 并让浏览器将其拉入，您应该`javascript_include_tag`像往常一样使用。在这里，您需要将 javascript 文件设为清单，而不是要求将其放入`application.js`清单中。`config.assets.precompile`请记住根据[http://guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)将清单添加到您的 application.rb

（在你的haml中）：

```
= javascript_include_tag 'somefile' 
```

（在 config/application.rb 中）：

```
config.assets.precompile += ['somefile.js'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T16:22:07.587

如果你的 javascript 很小而且很简单，我建议直接在 HAML 中包含 javascript：

```
:javascript
  alert('hi hi!') 
```

否则，您应该使用资产管道。它确保您的 javascripts 是**[经过预处理、压缩和缩小](http://guides.rubyonrails.org/asset_pipeline.html)**的。它还有助于保持您的 javascript 井井有条（例如，将您的脚本和供应商脚本分开）并易于测试（使用[jasmine](https://github.com/pivotal/jasmine/) / [jasminerice](https://github.com/bradphelan/jasminerice/) / [evergreen](https://github.com/jnicklas/evergreen/)等测试框架）。如果您是资产管道的新手，[这里](http://railscasts.com/episodes/279-understanding-the-asset-pipeline?view=asciicast)是一个很好的阅读 =)

# jquery - 使用边框半径绘制圆

> ID：11455554
> 
> 赞同：3
> 
> 时间：2012-07-12T15:43:46.743
> 
> 标签：jquery, css

我正在尝试使用边界半径转换一些 div。我几乎得到它，但有时 div 看起来像 'eggs' 哈哈 这是我的 css：

```
#div{   /*div central*/
    position:absolute;
    top:50%;
    margin-top: -20%;
    left:50%;
    margin-left: -20%;
    background: #00A8D9;
    width: 40%;
    height: 40%;
    -moz-border-radius: 50%;
    -webkit-border-radius: 50%;
    border-radius: 50%;
    border:3px solid #000;
}
#divSupIzq,#divSupDer,#divInfIzq,#divInfDer{    /*DIVs: left-top , right-top, left-bottom, right-bottom*/
    background: #ddd;
    width: 20%;
    height: 20%;
    -moz-border-radius: 50%;
    -webkit-border-radius: 50%;
    border-radius: 50%;
    border:3px solid #fff;
    position:absolute;
}
#divSupIzq{  /*Div left-top*/
    top:15%;
    left:10%;
}
#divSupDer{ /*Div right-top*/
    top:15%;
    right:10%;
}
#divInfIzq{ /*Div left-bottom*/
    bottom:15%;
    left:10%;
}
#divInfDer{ /*Div right-bottom*/
    bottom:15%;
    right:10%;
} 
```

在 html 中，我使用 javascript / jQuery 来更改每个 div 的内容（基本上是 div 中的文本：left-top、right-top、left-bottom、right-bottom ；和中央 div 中的数字）取决于每个 div 的大小：

```
$('#div').resize(function(height){
                    var fuente = $(this).height()/2;
                    var margen = (fuente / 2)-5;
                    $('.contenido').css('font-size',fuente+'px');
                    $('.contenido').css('margin-top',margen+'px');  
                }); 
```

这就是我在 chrome 的波纹扩展中看到的方式： [https ://www.dropbox.com/s/k71kz5lahfolw95/screen.JPG](https://www.dropbox.com/s/k71kz5lahfolw95/screen.JPG)

**你能帮我为了div总是圆圈，而不是鸡蛋吗？** 在此先感谢，丹尼尔

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T15:45:57.147

画一个圆：

**HTML**

```
<div id="circle"></div> 
```

**CSS**

```
#circle {
    width: 100px;
    height: 100px;
    background: red;
    -moz-border-radius: 50px;
    -webkit-border-radius: 50px;
    border-radius: 50px;
} 
```

[这](http://jsfiddle.net/GF7wz/)是上面的小提琴。

固定宽度和高度：http: [//jsfiddle.net/eC3jq/1/](http://jsfiddle.net/eC3jq/1/)

`circle`包含在 a 中`div`，以便 % 宽度和高度正常工作：http: [//jsfiddle.net/eC3jq/2/](http://jsfiddle.net/eC3jq/2/)

来源：[CSS-Tricks](http://css-tricks.com/examples/ShapesOfCSS/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-01T18:54:00.020

# jQuery

这也很有用，如果您将所有这些代码复制到您的站点，它将起作用。或者你可以看一个演示：

[https://jsfiddle.net/whLctrp4/](https://jsfiddle.net/whLctrp4/)

调用 JQuery 函数的 HTML 代码：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Page Title</title>
        <link rel="stylesheet" type="text/css" href="style.css">

    </head>
    <body>

    <div class="pies">
    </div> 
```

包括 JQuery

```
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script> 
```

drawPie 函数 - 将 id/class html 属性、大小（以 px 为单位）、填充百分比和饼图颜色作为参数

```
 <script>

    function drawPie (id, size, percent, color) {                               
        var sizeString = "" + size + "px";                      
        var grad = 360/100*percent+90;      
        console.log(grad);
        var pie = $("<span></span>");

        pie.css({"width": sizeString, 
            "height": sizeString,               
            "display": "block",
            "border-radius": "50%",
            "background-color": color,                          
            "float": "left",
            "margin": "5px"             
        });         

        if(percent <= 50){
            pie.css({"background-image": "linear-gradient("+ grad + "deg, transparent 50%, white 50%), linear-gradient(90deg, white 50%, transparent 50%)"});
        } else if (percent >= 100) {
            pie.css({"background-image": "none"});
        } else {                                
            pie.css({"background-image": "linear-gradient("+ (grad+180) + "deg, transparent 50%, "+color+" 50%), linear-gradient(+90deg, white 50%, transparent 50%)"});                
        }

        $(id).append(pie);
    } 
```

对于表演周期，它是如何工作的：

```
 for(i=0; i<=100; i+=1){
        drawPie(".pies", 100, i, "orange");
    }

    </script>       

    </body>

</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T15:59:42.293

工作演示：http: [//jsfiddle.net/XtTkG/3/](http://jsfiddle.net/XtTkG/3/)

该演示通过使用窗口对象的调整大小事件而不是 div 本身来工作。在每次调整大小时，我们都会调整 div 及其边框半径，使其呈现为完美的圆形（即宽度 = 高度和半径 = 宽度/2）

代码：

```
$(window).resize(function(height) {
    var div = $('#div');
    var width = $('body').width() * 0.4;
    var radius = width/2;
    width += 'px';
    radius += 'px';
    div.css({
        width: width, height: width,
        '-moz-border-radius' : radius,
        '-webkit-border-radius' : radius,
        'border-radius' : radius
    });

    // rest of your code for font-size setting etc..
});

$(window).resize(); 
```

# android - 使用 Activity 在 Android 日历中添加事件的所有可接受参数

> ID：11455556
> 
> 赞同：0
> 
> 时间：2012-07-12T15:43:52.750
> 
> 标签：android, android-intent, calendar

我想在一个月中的特定日期在 android 日历中添加一个事件，其中标题描述和警报处于活动状态

我已经找到了类似问题的答案，其中包含此表单中的代码（但我不确定这是正确的）

```
Calendar cal = Calendar.getInstance();              
Intent intent = new Intent(Intent.ACTION_EDIT);
intent.setType("vnd.android.cursor.item/event");
intent.putExtra("beginTime", cal.getTimeInMillis());
intent.putExtra("allDay", false);
intent.putExtra("rrule", "FREQ=DAILY");
intent.putExtra("endTime", cal.getTimeInMillis()+60*60*1000);
startActivity(intent); 
```

特定月份、日期、标题、描述、位置等接受的意图额外密钥是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:47:22.523

我知道这些

```
Intent intent = new Intent(Intent.ACTION_EDIT);
intent.setType("vnd.android.cursor.item/event");
intent.putExtra("title", myStringTitle);
intent.putExtra("description", myStringDescription);
intent.putExtra("eventLocation",myStringLocation);
intent.putExtra("beginTime", myBeginDate.getTimeInMillis());
intent.putExtra("endTime", myEndDate.getTimeInMillis()); 
```

希望这有帮助

# php - PHP - 遍历数组并将值插入 SQL

> ID：11455557
> 
> 赞同：1
> 
> 时间：2012-07-12T15:43:54.577
> 
> 标签：php, sql, arrays

我有一个在 AIR 中剥离并转换为 $ 分隔字符串的 excel 文件。我将该字符串发送到 PHP ( `$pushFinal`)，然后用于`$array = explode("$",$pushFinal);`将字符串转换为数组。现在我想遍历数组，将值插入 SQL，模仿 excel 格式。excel 中的每个“行”是 49 列或“值”，因此我需要从`$array`SQL 中的每一行一次插入 49 个值。

做这个的最好方式是什么？

我是菜鸟，请怜悯我:)

所以，我尝试了这个：

```
$pushFinal = $_POST["pushFinal"];
$lines = array();
$lines = explode("|",$pushFinal); 
$lineItems = array();

foreach ($lines as $val){
    $lineItems = explode("$",$val);
    $temp = "";
    foreach($lineItems as $val2){
        $temp = $temp."'".$val2."',";   
    }
    $sql="insert into OPS_SCHEDULE values($temp)";
    $stmt = sqlsrv_query($conn,$sql);
} 
```

虽然 INSERT 失败了。这看起来对吗？我用 | 分隔 excel 中的每一行 然后用 $ 分隔该行中的每个值。这在 $pushFinal 中正确显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:48:34.717

```
foreach($array as $val){
    $sqlVals[]="'".$val."'";
}
$sqlValsStr = implode(",",$sqlVals);
$sql = "insert into table values(".$sqlValsStr.")"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:46:12.790

只需阅读互联网上任何基本的 PHP/MySQL 介绍页面，您就可以立即完成代码。假设您已经完成了数据库设置:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T14:02:49.613

好，我知道了。

```
$pushFinal = $_POST["pushFinal"];
$lines = array();
$lines = explode("|",$pushFinal); 
$lineItems = array();

foreach ($lines as $val){
    $lineItems = explode("$",$val);
    $temp = "";
    foreach($lineItems as $val2){
        $temp = $temp."'".$val2."',";   
    }
    $temp = substr($temp, 0, -1);
    $sql ="insert into table values($temp)";
    $stmt = sqlsrv_query($conn,$sql);
} 
```

我必须从每一`$temp`行中删除尾随的“，”。感谢“lc”帮助我将行与值分开分隔。这就像一个魅力。

# jquery-ui - 容器显示时的 JqGrid 大小问题：无

> ID：11455558
> 
> 赞同：0
> 
> 时间：2012-07-12T15:44:05.623
> 
> 标签：jquery-ui, jqgrid

我在 jquery-ui 对话框中有一个 jquery 网格。每当我加载页面时，对话框在 jquery 隐藏它之前变得可见一秒钟，这看起来有点奇怪，因为通常它不应该是可见的，直到用户单击按钮以显示对话框。

所以我尝试将 设置`display:none`为我的容器 div。

奇怪的是，网格大小变成了 118x118 像素。

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T17:08:35.690

这就是我修复它的方式。

初始化对话框后，我调用了

```
$("#mydialog").hide(); 
```

希望它会帮助别人。

# visual-studio-2010 - Visual Studio WebSetup 安装程序，安装到多个网站

> ID：11455563
> 
> 赞同：1
> 
> 时间：2012-07-12T15:44:21.350
> 
> 标签：visual-studio-2010, installation, windows-installer, web-setup-project

我想制作一个安装程序，它可以从注册表中读取它应该安装的目录，并且收集到的这些数据会显示一个包含这些目录的窗口，每个都有一个复选框，用于选择是否要安装在该目录中并在这些目录中执行安装目录。

如果 Visual Studio websetup 项目不可能，任何人都知道可以做到这一点的另一个安装程序？或另一种自动执行此操作的方式

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T06:45:19.313

您不能在 VS 中执行此操作，但可以使用[Advanced Installer](http://www.advancedinstaller.com)来获取您需要的内容。您可以访问对话框编辑器、搜索页面以及您需要的所有其他内容。在试用期间，您可以访问所有这些功能，只需确保您将企业设置为项目类型，以便能够使用所需的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T08:04:31.577

最后，我制作了一个适合我需要的 winforms 应用程序

# xsd - XJC 和

> ID：11455566
> 
> 赞同：1
> 
> 时间：2012-07-12T15:44:30.793
> 
> 标签：xsd, jaxb, xjc, choice

我在处理 xjc 及其处理 .

我会解释：

```
<xs:element name="catalog">
    <xs:complexType>
        <xs:choice minOccurs="1" maxOccurs="unbounded">
            <xs:element name="element1" type="subType1" />
            <xs:element name="element2" type="subType2" />
            ...
        </xs:choice>
    </xs:complexType>
</xs:element>

<xs:complexType name="type">
    <xs:attribute name="dummy"/>
</xs:complexType>

<xs:complexType name="subType1">
    <xs:complexContent>
        <xs:extension base="type">
            ....
        </xs:extension>
    </xs:complexContent>
</xs:complexType> 
```

我在这段代码上运行 xjc 没有问题。但是，生成的 Catalog java 类具有标准的 getSubType1OrSubType2 方法，该方法返回一个 List。

有没有办法让它生成

1.  此方法，但名称不同
2.  其他特定于类型的方法（getSubType1 和 getSubType2）

?

# c# - 在整个 asp.net 应用程序中保持 Employee 对象处于活动状态

> ID：11455570
> 
> 赞同：0
> 
> 时间：2012-07-12T15:44:38.133
> 
> 标签：c#, asp.net, oop

我有一个用户在登录页面登录的 asp.net 应用程序。我创建了一个 Employee 对象并将 loginID 存储在该页面的 button_click 事件中。

如何在整个应用程序中保持 Employee 对象处于活动状态（不必每次都将 Employee 对象作为参数传递）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T15:48:53.310

这往往是[Session State](http://msdn.microsoft.com/en-us/library/ms972429.aspx)的用途，存储会话范围的项目。

将员工对象存储在会话之外可能意味着与该对象相关的用户实际上不再使用您的站点，因此将对象保存在内存中可能毫无意义。

如果你真的想要它用于整个应用程序，那么[应用程序状态](http://msdn.microsoft.com/en-us/library/ms178594.aspx)可能值得一看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T15:49:04.903

您可能想看看使用[Session data](http://msdn.microsoft.com/en-us/library/ms178581.aspx)。

这是一种让对象与给定会话关联和持久化的简单方法，但有一些警告（它可能会对性能产生影响，具体取决于您的数据存储是什么、您要持久化的对象有多大/复杂度以及并发数您正在处理的用户）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T16:08:56.123

鉴于课程是：

```
[Serializable]
public class Employee
{
    public int Id { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
} 
```

将其保存到会话：

```
 protected void DoLogin()
    {

        Employee employee = new Employee()
        {
            Id = 1,
            FirstName = "John",
            LastName = "Smith"
        };

        // save it to session
        Session.Add("Employee", employee);
    } 
```

从会话中获取它。请注意，它需要转换为“Employee”：

```
 protected Employee GetEmployee()
    {
        if (Session["Employee"] != null)
        {
            // needs to be cast
            return (Employee)Session["Employee"];
        }
        else
        {
            return null;
        }
    } 
```

为了便于使用，我通常将这些东西包装到一个属性中。不过，您通常在会话中不需要这样的对象......也许您正在寻找的是：[ASP.NET MVC - Set custom IIdentity or IPrincipal](https://stackoverflow.com/questions/1064271/asp-net-mvc-set-custom-iidentity-or-iprincipal)

# c++ - 用于 C++ 运算符重载的 Python 绑定

> ID：11455578
> 
> 赞同：6
> 
> 时间：2012-07-12T15:45:04.280
> 
> 标签：c++, python, reference, python-sip

我有一个类似于以下的类：

```
class A {
    vector<double> v;
    double& x(int i) { return v[2*i]; }
    double& y(int i) { return v[2*i+1]; }
    double x(int i) const { return v[2*i]; }
    double y(int i) const { return v[2*i+1]; }
} 
```

我想让以下 Python 代码工作：

```
a = A()
a.x[0] = 4
print a.x[0] 
```

我在想`__setattr__`and `__getattr__`，但不确定它是否有效。另一种方法是实现以下 Python：

```
a = A()
a['x', 0] = 4
print a['x', 0] 
```

不如前一个好，但可能更容易实现（使用`__slice__`？）。

PS。我正在使用 sip 进行绑定。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T14:07:33.447

可以使用`__getattr__`和自定义`%MethodCode`；但是，有几点需要考虑：

*   需要创建一个中间类型/对象，`a.x`并返回一个提供`__getitem__`和的对象`__setitem__`。这两种方法都应该在发生越界时引发`IndexError`，因为这是用于迭代的旧协议的一部分 via `__getitem__`; 没有它，迭代时会发生崩溃`a.x`。
*   为了保证向量的生命周期，`a.x`对象需要维护对拥有向量的对象的引用（`a`）。考虑以下代码：

    ```
    a = A()
    x = a.x
    a = None # If 'x' has a reference to 'a.v' and not 'a', then it may have a
             # dangling reference, as 'a' is refcounted by python, and 'a.v' is
             # not refcounted. 
    ```

*   编写`%MethodCode`可能很困难，尤其是在错误情况下必须管理引用计数时。它需要了解 python C API 和 SIP。

对于替代解决方案，请考虑：

*   设计 python 绑定以提供功能。
*   在 python 中设计类以提供使用绑定的 pythonic 接口。

虽然该方法有一些缺点，例如代码被分成更多可能需要与库一起分发的文件，但它确实提供了一些主要好处：

*   在 python 中实现 pythonic 接口比在 C 或互操作性库的接口中容易得多。
*   对切​​片、迭代器等的支持可以在 python 中更自然地实现，而不必通过 C API 进行管理。
*   可以利用 python 的垃圾收集器来管理底层内存的生命周期。
*   pythonic 接口与任何用于提供 python 和 C++ 之间的互操作性的实现分离。有了更扁平和更简单的绑定接口，在 Boost.Python 和 SIP 等实现之间进行更改变得更加容易。

* * *

这是演示此方法的演练。首先，我们从基础`A`类开始。在这个例子中，我提供了一个构造函数来设置一些初始数据。

`a.hpp`：

```
#ifndef A_HPP
#define A_HPP

#include <vector>

class A
{
  std::vector< double > v;
public:
  A() { for ( int i = 0; i < 6; ++i ) v.push_back( i ); }
  double& x( int i )         { return v[2*i];       }
  double  x( int i ) const   { return v[2*i];       }
  double& y( int i )         { return v[2*i+1];     }
  double  y( int i ) const   { return v[2*i+1];     }
  std::size_t size() const   { return v.size() / 2; }
};

#endif  // A_HPP 
```

在进行绑定之前，让我们检查一下`A`接口。虽然它在 C++ 中是一个易于使用的接口，但在 python 中存在一些困难：

*   Python 不支持重载方法，当参数类型/计数相同时，支持重载的惯用语将失败。
*   对双精度（Python 中的浮点数）的引用的概念在两种语言之间是不同的。在 Python 中，float 是不可变类型，所以它的值不能改变。例如，在 Python 中，该语句`n = a.x[0]`绑定`n`到引用 `float`从`a.x[0]`. 赋值`n = 4`重新绑定`n`以引用`int(4)`对象；它没有设置`a.x[0]`为`4`。
*   `__len__`期望`int`，不是`std::size_t`。

让我们创建一个有助于简化绑定的基本中间类。

`pya.hpp`：

```
#ifndef PYA_HPP
#define PYA_HPP

#include "a.hpp"

struct PyA: A
{
  double get_x( int i )           { return x( i ); }
  void   set_x( int i, double v ) { x( i ) = v;    }
  double get_y( int i )           { return y( i ); }
  void   set_y( int i, double v ) { y( i ) = v;    }
  int    length()                 { return size(); }
};

#endif // PYA_HPP 
```

伟大的！ `PyA`现在提供不返回引用的成员函数，并且长度作为`int`. 它不是最好的接口，绑定被设计为提供所需的*功能*，而不是所需的*接口*。

`A`现在，让我们编写一些简单的绑定来在`cexample`模块中创建类。

这是 SIP 中的绑定：

```
%Module cexample

class PyA /PyName=A/
{
%TypeHeaderCode
#include "pya.hpp"
%End
public:
  double get_x( int );
  void set_x( int, double );
  double get_y( int );
  void set_y( int, double );
  int __len__();
  %MethodCode
    sipRes = sipCpp->length();
  %End
}; 
```

或者，如果您更喜欢 Boost.Python：

```
#include "pya.hpp"
#include <boost/python.hpp>

BOOST_PYTHON_MODULE(cexample)
{
  using namespace boost::python;
  class_< PyA >( "A" )
    .def( "get_x",   &PyA::get_x  )
    .def( "set_x",   &PyA::set_x  )
    .def( "get_y",   &PyA::get_y  )
    .def( "set_y",   &PyA::set_y  )
    .def( "__len__", &PyA::length )
    ;
} 
```

由于`PyA`中间类，两个绑定都相当简单。此外，这种方法需要较少的 SIP 和 Python C API 知识，因为它需要较少的`%MethodCode`块内代码。

最后，创建`example.py`将提供所需的 pythonic 接口：

```
class A:
    class __Helper:
        def __init__( self, data, getter, setter ):
            self.__data   = data
            self.__getter = getter
            self.__setter = setter

        def __getitem__( self, index ):
            if len( self ) <= index:
                raise IndexError( "index out of range" )
            return self.__getter( index )

        def __setitem__( self, index, value ):
            if len( self ) <= index:
                raise IndexError( "index out of range" )
            self.__setter( index, value )

        def __len__( self ):
            return len( self.__data )

    def __init__( self ):
        import cexample
        a = cexample.A()
        self.x = A.__Helper( a, a.get_x, a.set_x )
        self.y = A.__Helper( a, a.get_y, a.set_y ) 
```

最后，绑定提供了我们需要的*功能*，python 创建了我们想要的*接口。*可以让绑定提供接口；但是，这可能需要对两种语言之间的差异和绑定实现有深入的了解。

```
>>> 从示例导入 A
>>> a = A()
>>> 对于 x in ax:
... 打印 x
...
0.0
2.0
4.0
>>> 斧头[0] = 4
>>> 对于 x in ax:
... 打印 x
...
4.0
2.0
4.0
>>> x = 斧头
>>> a = 无
>>> 打印 x[0]
4.0
```

# javascript - 缓存破坏由 Require.js 优化的网站

> ID：11455579
> 
> 赞同：3
> 
> 时间：2012-07-12T15:45:07.493
> 
> 标签：javascript, caching, requirejs

我有一个使用 require.js 的网络应用程序（除了几个 CDN 提供的资源）。我正在使用优化工具来创建一个“已发布”网站。

我担心的是，当发布新版本的 Web 应用程序时，用户不会获得更新的 js 文件，因为它们会被浏览器缓存。

除非使用 'urlArgs' 配置选项，否则在开发应用程序时问题非常明显。

通常的解决方案是将 ?v=1.0 的查询字符串附加到脚本引用，但由于它们都是通过 require.js 处理的，因此无法这样做。

所以，我的问题是如何确保客户端在发布新版本时下载新版本的 js/css 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T18:55:45.340

如果您使用的是 require.js，那么您必须在使用 require 对象之前设置“胸围”urlArgs。像这样：

```
<script>
    var require = {
        urlArgs : "bust=" + releaseVersion
    };
</script> 
```

对于 CSS 和图像，我也遇到了类似的情况。如果您的 Web 应用程序落后于 Apache，您可以在 mod_headers 模块中将缓存控制标头设置为 http 响应。就我而言，我的网络应用程序并不落后于 Apache。我直接打了Glassfish。所以我最终添加了一个 Servlet 过滤器，并在将其转发到过滤器链之前手动将缓存控制标头添加到每个 CSS 和图像响应中。之后，当 CSS 发生变化时，我只需在 HTML 中添加一个 url 参数，如下所示：

```
<... "main.css?version=release10" /> 
```

浏览器看到此 URL 更改并从服务器获取 CSS。图像也是如此。对于 JS，您必须更新“Bust”值。

# php - 为什么 sendmail.php 文件不起作用？

> ID：11455581
> 
> 赞同：0
> 
> 时间：2012-07-12T15:45:17.227
> 
> 标签：php, forms, email, send

```
<?php

$error_msgs = array ();
$error = 0; 

if ($_POST['first_name']){
$first_name = $_POST['first_name'];
} else {
$error_msgs[] = "Please enter your first name";
$errors++; 
}

if ($_POST['last_name']){
$last_name = $_POST['last_name'];
} else {
$error_msgs[] = "Please enter your last name";
$errors++; 
}

if ($_POST['ssn']){
$ssn = $_POST['ssn'];
} else {
$error_msgs[] = "Please enter your 9 digit social security number";
$errors++; 
}

if ($_POST['phone']){
$phone = $_POST['phone'];
} else {
$error_msgs[] = "Please enter your phone number";
$errors++; 
}

if ($_POST['address']){
$address = $_POST['address'];
} else {
$error_msgs[] = "Please enter your address";
$errors++; 
}

if ($_POST['city']){
$city = $_POST['city'];
} else {
$error_msgs[] = "Please enter your city";
$errors++; 
}

if ($_POST['state']){
$state = $_POST['state'];
} else {
$error_msgs[] = "Please select your state";
$errors++; 
}

if ($_POST['zip']){
$zip = $_POST['zip'];
} else {
$error_msgs[] = "Please enter your 5 digit zip code";
$errors++; 
}

if ($_POST['position']){
$position = $_POST['position'];
} else {
$error_msgs[] = "Please enter position desired, or type N/A if open for discussion";
$errors++; 
}

if ($_POST['wage']){
$wage = $_POST['wage'];
} else {
$error_msgs[] = "Please enter 0.00 if open for discussion";
$errors++; 
}

if ($_POST['Emergencycontactname']){
$Emergencycontactname = $_POST['Emergencycontactname'];
} else {
$error_msgs[] = "Please enter your emergency contact's name";
$errors++; 
}

if ($_POST['Emergencycontactaddress']){
$Emergencycontactaddress = $_POST['Emergencycontactaddress'];
} else {
$error_msgs[] = "Please enter your emergency contact's address";
$errors++; 
}

if ($_POST['Emergencycontactcity']){
$Emergencycontactcity = $_POST['Emergencycontactcity'];
} else {
$error_msgs[] = "Please enter your emergency contact's city";
$errors++; 
}

if ($_POST['Emergencycontactstate']){
$Emergencycontactstate = $_POST['Emergencycontactstate'];
} else {
$error_msgs[] = "Please select your emergency contact's state";
$errors++; 
}

if ($_POST['Emergencycontactzip']){
$Emergencycontactzip = $_POST['Emergencycontactzip'];
} else {
$error_msgs[] = "Please enter your emergency contact's 5 digit zip code";
$errors++; 
}

if ($_POST['Emergencycontactphone']){
$Emergencycontactphone = $_POST['Emergencycontactphone'];
} else {
$error_msgs[] = "Please enter your emergency contact's phone number";
$errors++; 
}

if ($_POST['highest']){
$highest = $_POST['highest'];
} else {
$error_msgs[] = "Please enter your highest level of education";
$errors++; 
}

if ($_POST['degree']){
$degree = $_POST['degree'];
} else {
$error_msgs[] = "Please enter N/A if none";
$errors++; 
}

if ($_POST['age']){
$age = $_POST['age'];
} else {
$error_msgs[] = "Please enter yes or no";
$errors++; 
}

if ($_POST['problems']){
$problems = $_POST['problems'];
} else {
$error_msgs[] = "Please enter yes or no";
$errors++; 
}

if ($_POST['shiftwork']){
$shiftwork = $_POST['shiftwork'];
} else {
$error_msgs[] = "Please enter yes or no";
$errors++; 
}

if ($_POST['apprenticeship']){
$apprenticeship = $_POST['apprenticeship'];
} else {
$error_msgs[] = "Please enter yes or no";
$errors++; 
}

if ($_POST['disabilities']){
$disabilities = $_POST['disabilities'];
} else {
$error_msgs[] = "Please enter yes or no";
$errors++; 
}

if ($_POST['ifyes']){
$ifyes = $_POST['ifyes'];
} else {
$error_msgs[] = "If you answered no to above question, type N/A";
$errors++; 
}

if ($_POST['accommodate']){
$accommodate = $_POST['accommodate'];
} else {
$error_msgs[] = "Type N/A if you answered N/A for above question";
$errors++; 
}

if ($_POST['experience']){
$experience = $_POST['experience'];
} else {
$error_msgs[] = "Please enter yes or no";
$errors++; 
}

if ($_POST['ifyes2']){
$ifyes2 = $_POST['ifyes2'];
} else {
$error_msgs[] = "If you answered no to above, type N/A, otherwise describe";
$errors++; 
}

if ($_POST['cname']){
$cname = $_POST['cname'];
} else {
$error_msgs[] = "Please enter company name";
$errors++; 
}

if ($_POST['caddress']){
$caddress = $_POST['caddress'];
} else {
$error_msgs[] = "Please enter company address";
$errors++; 
}

if ($_POST['cphone']){
$cphone = $_POST['cphone'];
} else {
$error_msgs[] = "Please enter company phone number";
$errors++; 
}

if ($_POST['ccperson']){
$ccperson = $_POST['ccperson'];
} else {
$error_msgs[] = "Please enter company contact person's name";
$errors++; 
}

if ($_POST['ctype']){
$ctype = $_POST['ctype'];
} else {
$error_msgs[] = "Please enter type of work";
$errors++; 
}

if ($_POST['cwage']){
$cwage = $_POST['cwage'];
} else {
$error_msgs[] = "Please enter wage earned";
$errors++; 
}

if ($_POST['cstart']){
$cstart = $POST['cstart'];
} else {
$error_msgs[] = "Please enter date started";
$errors++; 
}

if ($_POST['cend']){
$cend = $POST['cend'];
} else {
$error_msgs[] = "Please enter date ended";
$errors++; 
}

if ($_POST['reason']){
$reason = $_POST['reason'];
} else {
$error_msgs[] = "Please enter reason for leaving";
$errors++; 
}

if ($_POST['cname2']){
$cname2 = $_POST['cname2'];
} else {
$error_msgs[] = "Please enter company name or type N/A";
$errors++; 
}

if ($_POST['caddress2']){
$caddress2 = $_POST['caddress2'];
} else {
$error_msgs[] = "Please enter company address or type N/A";
$errors++; 
}

if ($_POST['cphone2']){
$cphone2 = $_POST['cphone2'];
} else {
 $error_msgs[] = "Please enter company phone number or type N/A";
$errors++; 
}

if ($_POST['ccperson2']){
$ccperson2 = $_POST['ccperson2'];
} else {
$error_msgs[] = "Please enter company contact person's name or type N/A";
$errors++; 
}

if ($_POST['ctype2']){
$ctype2 = $_POST['ctype2'];
} else {
$error_msgs[] = "Please enter type of work or type N/A";
$errors++; 
}

if ($_POST['cwage2']){
$cwage2 = $_POST['cwage2'];
} else {
$error_msgs[] = "Please enter wage earned or type 0.00 if N/A";
$errors++; 
}

if ($_POST['cstart2']){
$cstart2 = $POST['cstart2'];
} else {
$error_msgs[] = "Please enter date started or type N/A";
$errors++; 
}

if ($_POST['cend2']){
$cend2 = $POST['cend2'];
} else {
$error_msgs[] = "Please enter date ended or type N/A";
$errors++; 
}

if ($_POST['reason2']){
$reason2 = $_POST['reason2'];
} else {
$error_msgs[] = "Please enter reason for leaving or type N/A";
$errors++; 
}

if ($_POST['cname3']){
$cname3 = $_POST['cname3'];
} else {
$error_msgs[] = "Please enter company name or type N/A";
$errors++; 
}

if ($_POST['caddress3']){
$caddress3 = $_POST['caddress3'];
} else {
$error_msgs[] = "Please enter company address or type N/A";
$errors++; 
}

if ($_POST['cphone3']){
$cphone3 = $_POST['cphone3'];
} else {
$error_msgs[] = "Please enter company phone number or type N/A";
$errors++; 
}

if ($_POST['ccperson3']){
$ccperson3 = $_POST['ccperson3'];
} else {
$error_msgs[] = "Please enter company contact person's name or type N/A";
$errors++; 
}

if ($_POST['ctype3']){
$ctype3 = $_POST['ctype3'];
} else {
$error_msgs[] = "Please enter type of work or type N/A";
$errors++; 
}

if ($_POST['cwage3']){
$cwage3 = $_POST['cwage3'];
} else {
$error_msgs[] = "Please enter wage earned or type 0.00 if N/A";
$errors++; 
}

if ($_POST['cstart3']){
$cstart3 = $POST['cstart3'];
} else {
$error_msgs[] = "Please enter date started or type N/A";
$errors++; 
}

if ($_POST['cend3']){
$cend3 = $POST['cend3'];
} else {
$error_msgs[] = "Please enter date ended or type N/A";
$errors++; 
}

if ($_POST['reason3']){
$reason3 = $_POST['reason3'];
} else {
$error_msgs[] = "Please enter reason for leaving or type N/A";
$errors++; 
}

if ($_POST['maywe']){
$maywe = $_POST['maywe'];
} else {
$error_msgs[] = "Type names of companies you do not want us to contact, or type, ok all";
$errors++; 
}

if ($_POST['additional']){
$additional = $_POST['additional'];
} else {
$error_msgs[] = "Type N/A if you do not have any additional information";
$errors++; 
}

if ($_POST['fn']){
$fn = $_POST['fn'];
} else {
$error_msgs[] = "Please enter your full name";
$errors++; 
}

if ($_POST['electronicsignssn']){
$electronicsignssn = $_POST['electronicsignssn'];
} else {
$error_msgs[] = "Please enter your 9 digit social security number";
$errors++; 
}

if ($_POST['emailaddress']){
$emailaddress = $_POST['emailaddress'];
} else {
$error_msgs[] = "Please enter your email address";
$errors++; 
}

if ($errors > 0) {
foreach ($error_msgs as &$msg) {
"There is/are " . $errors . " error(s) in your submission, please click your browser's back button and correct them.<br/>";
echo $msg . "<br/>";
}
} else {
mail( "heitfieldmichael@yahoo.com, "Application for $fn", $body, "From: $emailaddress\r\n" );
header( "Location: http://www.creativeurethanes.com/Thankyoupageforjobapplication.html" );
}
?> 
```

改变了很多

```
<?php
$first_name = $_REQUEST['first_name'] ;
$last_name = $_REQUEST['last_name'] ;
$ssn = $_REQUEST['ssn'] ;
$phone = $_REQUEST['phone'] ;
$address = $_REQUEST['address'] ;
$city = $_REQUEST['city'] ;
$state = $_REQUEST['state'] ;
$zip = $_REQUEST['zip'] ;
$position = $_REQUEST['position'] ;
$wage = $_REQUEST['wage'] ;
$911name = $_REQUEST['911name'] ;
$911address = $_REQUEST['911address'] ;
$911city = $_REQUEST['911city'] ;
$911state = $_REQUEST['911state'] ;
$911zip = $_REQUEST['911zip'] ;
$911phone = $_REQUEST['911phone'] ;
$highest = $_REQUEST['highest'] ;
$degrees = $_REQUEST['degrees'] ;
$age = $_REQUEST['age'] ;
$problems = $_REQUEST['problems'] ;
$shiftwork = $_REQUEST['shiftwork'] ;
$apprenticeship = $_REQUEST['apprenticeship'] ;
$disabilities = $_REQUEST['disabilities'] ;
$ifyes = $_REQUEST['ifyes'] ;
$accomodate = $_REQUEST['accomodate'] ;
$experience = $_REQUEST['experience'] ;
$ifyes2 = $_REQUEST['ifyes2'] ;
$cname = $_REQUEST['cname'] ;
$caddress = $_REQUEST['caddress'] ;
$cphone = $_REQUEST['cphone'] ;
$ccperson = $_REQUEST['ccperson'] ;
$ctype = $_REQUEST['ctype'] ;
$cwage = $_REQUEST['cwage'] ;
$sted = $_REQUEST['sted'] ;
$reason = $_REQUEST['reason'] ;
$cname2 = $_REQUEST['cname2'] ;
$caddress2 = $_REQUEST['caddress2'] ;
$cphone2 = $_REQUEST['cphone2'] ;
$ccperson2 = $_REQUEST['ccperson2'] ;
$ctype2 = $_REQUEST['ctype2'] ;
$cwage2 = $_REQUEST['cwage2'] ;
$sted2 = $_REQUEST['sted2'] ;
$reason2 = $_REQUEST['reason2'] ;
$cname3 = $_REQUEST['cname3'] ;
$caddress3 = $_REQUEST['caddress3'] ;
$cphone3 = $_REQUEST['cphone3'] ;
$ccperson3 = $_REQUEST['ccperson3'] ;
$ctype3 = $_REQUEST['ctype3'] ;
$cwage3 = $_REQUEST['cwage3'] ;
$sted3 = $_REQUEST['sted3'] ;
$reason3 = $_REQUEST['reason3'] ;
$maywe = $_REQUEST['maywe'] ;
$additional = $_REQUEST['additional'] ;
$electronicsignfn = $_REQUEST['electronicsignfn'] ;
$electronicsignssn = $_REQUEST['electronicsignssn'] ;
$emailaddress = $_REQUEST['emailaddress'] ;

mail( "cuinfo@creativeurethanes.com", "Application",
$first_name, $last_name, $ssn, $phone, $address, $city, $state, $zip, $position, $wage, $911name, $911address, $911city, $911state, $911zip, $911phone, $highest, $degrees, $age, $problems, $shiftwork, $apprenticeship, $disabilities, $ifyes, $accomodate, $experience, $ifyes2, $cname, $caddress, $cphone, $ccperson, $ctype, $cwage, $sted, $reason, $cname2, $caddress2, $cphone2, $ccperson2, $ctype2, $cwage2, $sted2, $reason2, $cname3, $caddress3, $cphone3, $ccperson3, $ctype3, $cwage3, $sted3, $reason3, $maywe, $additional, $electronicsignfn, $electronicsignssn, $emailaddress, "From: $emailaddress" );
header( "Location: http://www.creativeurethanes.com/Thankyou.html" );
?> 
```

所以，我想出了我想的 php，但不断出现内部服务器错误。我做错什么了？我已经设置好 sendmail.php 文件、Thankyou.html 文件和应用程序文件。当我点击提交进行测试运行时，为什么它会进入 HTTP 500 内部服务器错误页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:55:49.223

我同意其他人的观点，你真的应该阅读评论中链接的邮件功能。该函数的结构是`mail ( string $to , string $subject , string $message [, string $additional_headers [, string $additional_parameters ]] )`

您需要将邮件正文中所需的所有内容放入一个字符串中，然后将该字符串传递给邮件函数。最后，它看起来像

```
mail( "cuinfo@creativeurethanes.com", "Application", $body, "From: $emailaddress" ); 
```

确保您正确格式化 $body 使其不是一大堆文本（在每一行之后放置 \r\n）

下面是代码示例：

```
<?php
$body = "First Name: ".$_REQUEST['first_name'] ."\r\n";
$body .= "Last Name: ".$_REQUEST['last_name'] ."\r\n";
$body .= "SSN Name: ".$_REQUEST['ssn'] ."\r\n";

// Keep adding the information here

mail( "cuinfo@creativeurethanes.com", "Application",$body, "From: $emailaddress\r\n" );
header( "Location: http://www.creativeurethanes.com/Thankyou.html" );

?> 
```

确保您还在发件人地址后添加 \r\n

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T16:23:22.453

1：php中变量命名有一些约定。查看[http://de3.php.net/manual/en/language.variables.basics.php](http://de3.php.net/manual/en/language.variables.basics.php) -> 他们不能以数字开头。
2：$_REQUEST 是超全局的，但您不能假设所有值都已设置。您必须使用 isset()-funcion ( [http://de3.php.net/manual/en/function.isset.php](http://de3.php.net/manual/en/function.isset.php) ) 检查每个。
3：如您所见，您不能指望邮件功能始终有效。如果您没有使用 (if(mail(...))) 进行检查，请不要将用户重定向到成功站点。
4：要找出它抛出 500 错误的原因，您必须检查您的服务器日志。如果您的服务器配置为不显示它们，则由于 php 错误可能会出现此错误。您可能必须在脚本中首先重新配置和/或设置此行：

```
ini_set('display_errors', 1);
error_reporting(E_ALL); 
```

# mongodb - 替代 MongoDB 的 GeoNear

> ID：11455583
> 
> 赞同：4
> 
> 时间：2012-07-12T15:45:18.083
> 
> 标签：mongodb, geospatial

目前，在一个部署的应用程序中，我们所有的内容实体都存储在 MongoDB 中，我们正在使用内置的 Mongo`geoNear`命令来收集在给定半径内具有`lat`和`lon`属性的所有实体。然后将该数据集输入并行搜索模块并根据用户的查询进行过滤。性能足以满足应用程序迄今为止的流量水平。

使用的真正基本方法正是 10gen 在 Mongo 网站上所使用的：

[http://www.mongodb.org/display/DOCS/Geospatial+Indexing/](http://www.mongodb.org/display/DOCS/Geospatial+Indexing/)

该方法存在一些问题，据我所知 10gen 目前正在解决。

[按距离以外的其他方式对 MongoDB GeoNear 结果进行排序？](https://stackoverflow.com/questions/5503562/sorting-mongodb-geonear-results-by-something-other-than-distance)

[MongoDB 中的 geoNear 可以返回文档中的字段子集吗？](https://stackoverflow.com/questions/9782080/can-geonear-in-mongodb-return-a-subset-of-fields-in-a-document)

[https://jira.mongodb.org/browse/SERVER-1982](https://jira.mongodb.org/browse/SERVER-1982)

随着开发团队的壮大，有问题的客户正在考虑对该功能的数据架构进行改造，以使新开发人员的代码更加直观。在解释完所有内容后，他们对更改范围查询的方法很感兴趣，因为他们对将 Mongo 中的这个相对较新的功能作为我们架构中的核心组件犹豫不决（因为它获得了所有其他过滤器所依赖的第一组有限的数据）应用）

我很好奇是否有任何强有力的选择。作为负责开发这部分逻辑的人，我可以想到一些，但我只能猜测它们的优缺点。在谷歌搜索之后，这是我想出的：

1.  将对象本身存储在 Mongo 中，然后将 ObjectId 与它们在支​​持空间索引的 SQL 服务器上的 SQL 表中的空间坐标相关联。我喜欢这种方法将所有空间数据放在一个索引中，但是这里丰富的 SQL 人才倾向于 MySQL，从文档来看，它的空间索引实现似乎是事后的想法，就像 mongo 中的那样。此外，据我所知，我们将只针对 MyISAM 表进行修复。

2.  就 SQL 上的专用空间解决方案而言，我可以在网上找到最多的文档是 Postgres 和 PostGIS。目前，我们所做的只是使用 hasrsign 距离计算进行半径搜索，因此其中一个优势是支持使用矢量和多边形进行更高级的限制，也许将来允许我们扩大到类似基于区域的限制。这里的主要限制是我们根本没有内部 Postgres 人才，我不确定这是否需要新员工。

3.  查看对象本身的不同 NoSQL 解决方案，并将位置元数据嵌入其中。Neo4j 似乎在这个部门有很多承诺： [http](http://www.oscon.com/oscon2011/public/schedule/detail/19822) ://www.oscon.com/oscon2011/public/schedule/detail/19822 文档中肯定有一些令人信服的例子。

我很好奇是否有任何将空间索引作为核心任务目标的键值存储解决方案？如果不是，那么对于良好的职责分离和最大的可维护性，最推荐哪种方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:03:57.700

最新版本的 Postgresql (9.2) 具有键值存储类型表，但我不确定您是否可以将其与 PostGIS 结合以获得真正强大的空间功能。

Neo4J 包含 JTS，所以我很确定您可以将它用于出色的空间功能。

如果您的数据存储是用 C/C++ 编写的，那么寻找 Geos 集成 对于 Java，您需要 JTS

# javascript - 如何将数组附加到现有的 json javascript？

> ID：11455586
> 
> 赞同：1
> 
> 时间：2012-07-12T15:45:24.093
> 
> 标签：javascript

我想创建一个 json 对象，例如：

```
{
   name: "Julia"
   birthdate: "xxxx"
   movies: [{title: "movie1", rating: 5}, {title: "movie2", rating 3}}]
} 
```

我想做类似的事情：

```
var myobj = [];
myobj.push({name: "Julia", birthdate: "xxxx"});

myobj.movies = [];
myobj.movies.push({title: "movie1", rating: 5});
myobj.movies.push({title: "movie2", rating: 3}); 
```

但我无法创建那个“电影”部分。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T15:48:02.650

您收到此错误是因为您将对象创建为数组。您必须创建为对象才能添加属性：

```
var myobj = {name: "Julia", birthdate: "xxxx"};

myobj.movies = []; 
myobj.movies.push({title: "movie1", rating: 5}); 
myobj.movies.push({title: "movie2", rating: 3}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:48:46.930

您不能混合数据类型（推送仅适用于带有对象的数组和属性），请尝试以下操作：

```
var myobj = {};
myobj.persons = [];
myobj.persons.push({name: "Julia", birthdate: "xxxx"});

myobj.movies = [];
myobj.movies.push({title: "movie1", rating: 5});
myobj.movies.push({title: "movie2", rating: 3}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T15:50:05.133

是的，这行得通

`var myobj = []; myobj.push({name: "Julia", birthdate: "xxxx"});`

```
myobj.push({movies: []});

myobj.movies = [];
myobj.movies.push({title: "movie1", rating: 5});
myobj.movies.push({title: "movie2", rating: 3});

console.log(myobj);</code> 
```

# java - 如何使用 Java 运行 ZeroMQ？

> ID：11455588
> 
> 赞同：11
> 
> 时间：2012-07-12T15:45:29.340
> 
> 标签：java, eclipse, zeromq

我在使用 Eclipse 和 Windows XP 使用 Java 运行 ZeroMQ 时遇到问题。我已经成功安装了 [我认为] 0MQ 库以及 Java 绑定。我曾经这样做的说明位于**[此处](http://www.zeromq.org/bindings:java#toc4)**。

构建了两个文件：**zmq.jar**和**jzmq.dll**。我将jar文件放在我的项目中，它允许代码编译OK。我还将*java.library.path*设置为 dll 的目录，将 perf 目录添加到我的项目中，并将 libzmq.dll 添加到我的 PATH 中。（全部按照说明）。

我仍然得到以下我无法修复的异常：

`Exception in thread "main" java.lang.UnsatisfiedLinkError: C:\jzmq\lib\jzmq.dll: Can't find dependent libraries`

jzmq.dll 还依赖于哪些其他库？我试过将 libzmq.dll 放在任何地方，但这没有帮助。**[这](https://github.com/imatix/zguide/blob/master/examples/Java/hwserver.java)**是我试图开始工作的代码示例。

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T03:20:34.347

将任何 dll 放入 Windows 根目录或 Windows System32 是紧急解决方案，它只会将您拉入 Dll HELL。

您需要做的是在**System PATH**中添加 ZQM 二进制路径。

我在一个小时内编译了一个 64bit ZMQ & JZMQ，这是我的文件夹结构：

```
c:\ZMQ\bin  
 --- jzmq.dll、libzmq.dll
c:\ZMQ\lib
 --- ZMQ.jar

```

这是步骤：

1.  将binray路径添加到系统环境中，详细步骤是控制面板--系统--高级设置，在弹出的选项卡中，找到'advance'--'环境变量'---找到'PATH' 'system variabls' 并在值中添加 C:\ZMQ\bin

2.  打开 dos 提示符，然后键入“where jzmq.dll”（我不确定 XP 中是否存在 where.exe）以确认它现在是否在 PATH 中。

3.  启动Eclipse，打开你的项目，右击你的项目名称，在菜单中选择'build path -- add external archives' 选择C:\ZMQ\lib\zMQ.jar。

全部做完！

在我的电脑中，该示例运行正常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T17:51:49.097

您应该将 libzmq.dll 复制到 java.library.path 指向的位置并使用它：

```
System.loadLibrary("libzmq") 
```

原因是 jzmq 依赖于 libzmq，所以必须先加载 libzmq。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T04:02:44.807

我也刚遇到这个问题。我通过将 jzmq.dll 和 libzmq.dll 放入 System32 文件夹找到了解决方法。我不喜欢将其作为永久解决方案，但它暂时有效。

# xml - 解析 XML 文件并返回 R 字符向量

> ID：11455590
> 
> 赞同：8
> 
> 时间：2012-07-12T15:45:33.803
> 
> 标签：xml, r

我用 R 解析了一个 XML 文档，例如：

```
library(XML)
f = system.file("exampleData", "mtcars.xml", package="XML")
doc = xmlParse(f) 
```

使用 XPath 表达式，我可以选择文档中的特定节点：

```
> getNodeSet(doc, "//record[@id='Mazda RX4']/text()")
[[1]]
   21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4 

    attr(,"class")
    [1] "XMLNodeSet" 
```

但我不知道如何将结果转换为 R 字符向量：

```
> as.character(getNodeSet(doc, "//record[@id='Mazda RX4']/text()"))
[1] "<pointer: 0x000000000e6a7fe0>" 
```

如何从指向 C 对象的内部指针获取文本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T15:56:44.463

使用`xmlValue`. 这是您的示例的扩展，可帮助您了解类是什么：

```
v <- getNodeSet(doc, "//record[@id='Mazda RX4']/text()")
str(v)
#List of 1
#$ :Classes 'XMLInternalTextNode', 'XMLInternalNode', 'XMLAbstractNode' <externalptr> 
#- attr(*, "class")= chr "XMLNodeSet"
v2 <- sapply(v, xmlValue)  #this is the code chunk of interest to you
v2
#[1] "   21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4"
str(v2)
#chr "   21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-30T00:01:42.957

以下内容也可以使用：您可以使用 xpathApply 并添加 xmlValue 作为参数，而不是 getNodeSet() 和 sapply(v,xmlValue)

```
doc = xmlParse(f)
xpathApply(doc,"//record[@id='Mazda RX4']/text()")

[[1]]
   21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4 

attr(,"class")
[1] "XMLNodeSet"

xpathApply(doc,"//record[@id='Mazda RX4']/text()",xmlValue)

[[1]]
[1] "   21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4" 
```

这是列表中的字符对象。您可以通过取消列出、使用一个或多个空格的正则表达式拆分字符串、再次取消列出和 as.numeric() 将其转换为数字对象的向量

```
 as.numeric(unlist(strsplit(unlist(v)," +")))
 [1]     NA  21.00   6.00 160.00 110.00   3.90   2.62  16.46   0.00   1.00   4.00   4.00 
```

# e-commerce - 如何将我的商店连接到公共购物门户/网关？

> ID：11455591
> 
> 赞同：0
> 
> 时间：2012-07-12T15:45:35.403
> 
> 标签：e-commerce, shopify, shopping

我正在考虑使用一些可能的商店解决方案来建立商店，例如 shopify。我的目标是德语市场，人们喜欢使用某种“购物门户”或“购物网关”（例如，idealo.de、billiger.de）来初始化他们的购买行为。在这方面，一旦我将产品上传到我自己的商店，我需要那些上传的产品也可以从那些“购物门户”/“购物网关”中搜索到。

我的问题是，通常如何将我的商店连接到那些购物门户/网关？一些通用购物解决方案（shopify 或其他）是否也支持它？

谢谢！

干杯，叶

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:14:39.360

查看由 Google Base、Shopzilla 等运行的产品搜索和价格比较提要。

RetailTower 和 Versafeed 是已经做到这一点的应用程序示例。

# c# - MS Dynamics CRM 2011 SDK - 使用后期绑定更新实体记录

> ID：11455592
> 
> 赞同：4
> 
> 时间：2012-07-12T15:45:45.730
> 
> 标签：c#, sdk, dynamics-crm-2011

有谁知道如何使用 SDK for Dynamics CRM 2011 保存对后期绑定实体的更改？

这是我尝试过的：

```
// retrieve and modify a pet...
// (This part works)
Guid findId = new Guid("6CA57D73-30CC-E111-B155-00505630052F");
ColumnSet attributes = new ColumnSet(new string[] { "name", "foodtype" });

// try to retrieve
// (this also works)
pet = xrm.Retrieve("pet", findId, attributes);
if( pet!=null )
{
    Console.WriteLine( String.Format( "Retrieved pet {0} successfully!", pet["name"].ToString() ));
    // update attributes
    pet["foodtype"] = "Seaweed";
    // (from here doesn't seem to work)
    // save pet
    xrm.SaveChanges();
    Console.WriteLine( "Done!" );
} 
```

感谢所有帮助:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T15:52:56.603

试试这个：

```
pet["foodtype"] = "Seaweed";

xrm.UpdateObject( pet );
xrm.SaveChanges(); 
```

编辑：`"The context is not currently tracking the 'pet' entity"`表示您从中获取的对象`Retrieve`未附加到服务上下文。有一种方法`Attach`可以做到这一点。

```
xrm.Attach( pet );
pet["foodtype"] = "Seaweed";

xrm.UpdateObject( pet );
xrm.SaveChanges(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T16:05:13.147

这有效：

```
pet["foodtype"] = "Seaweed";
pet.EntityState = EntityState.Changed; // not sure if this is really needed
// save pet
xrm.Update(pet); 
```

# c# - 获取单词后的日期？

> ID：11455593
> 
> 赞同：1
> 
> 时间：2012-07-12T15:45:52.627
> 
> 标签：c#, regex, .net-4.0

我有一个巨大的文字墙，我需要在其中搜索出生或死亡日期，日期通常采用以下格式：

> 更多的文字。**1942 年 12 月 5***日出生于* 萨姆纳和更多文本

 **或者

> 一些文本于**1922 年 8 月 8***日出生于*州城市，更多文本

 **或者

> 一些文本*于***2010 年 11 月 3 日**星期三死亡，更多文本

或者

> 一些文字**已于 2008 年 12 月 19 日星期五***去世* 更多文字

 **或者

> 一些文本*于* **2007 年 1 月 11 日**死亡，更多文本

简而言之，日期通常在出生词之后几个词。

我认为获得此日期的最佳方法是使用正则表达式，但如果我在这里错了，请纠正我。

这是我想出的获取日期的方法，但我还远远没有得到日期：

```
(?=born\s|died\s|passed\saway\s)(\w+.*)(\w+\s\d+,\s\d+) 
```

问题是我的正则表达式不能完全工作，它会吃掉月份这个词，我该如何纠正这个或者有更好的正则表达式或方法来做到这一点？

我知道我可以使用以下内容仅获取日期，但我还需要知道该事件：

```
(\w+\s[0-9]{1,2},\s[0-9]{2,4}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:00:42.663

您可以尝试使用惰性重复：`(?=born\s|died\s|passed\saway\s)(\w+.*?)(\w+\s\d+,\s\d+)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T20:15:41.593

这适用于显式捕获组、忽略大小写和忽略模式空白。它可以容忍一些错误的格式（例如额外或缺失的空格） 我敢肯定。

```
# get the event
(?'Event'born|died|passed\saway)
# skip junk (note, not using \s for whitespace)
[ \t].*
#get the date in Month, dd, yyyy form (including abbreviated months)
(?'Date'
  (?'Month'
     # month can't start unless there's whitespace before it
     (?<=\s)    
     # month can be abbreviated or not
     (Jan(uary)?|Feb(ruary)?|Mar(ch)?|Ap(ril)?|May|June?|July?|Aug(ust)?|Sep(tember)?|Oct(ober)?|Nov(ember)?|Dec(ember)?)    
  )
  \s*
  (?'Day'\d{1,2})
  \s*,\s*
  (?'Year'\d{2,4})
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T15:58:51.543

它吃掉你的月份单词的问题是因为第二个捕获组 (\w+.*)。如果您考虑一下，一个月将是一个词，任何 \w 都会匹配它。所以你的方法有点缺陷。根据您的示例，日期格式似乎与拼写的月份一致，格式为“月 dd，yyyy”。如果我们可以假设是这样，我建议调整您的正则表达式以包含 12 个可能的月份名称，这样它就可以解决您从其他不关心的通配符单词中“吃掉”月份单词的问题......

```
 (?=born\s|died\s|passed\saway\s)(\w+.*)((January|February|March|April|May|June|July|August|September|October|November|December)\s\d+,\s\d+) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T16:01:52.590

这对我有用： (?=born\s|died\s|passed\saway\s)(\w+.*?)(\w+\s\d+,\s\d+)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T17:14:02.490

这个怎么样？

```
(born|died|passed\saway)\s(\w.*)\s(\w+\s[0-9]{1,2},\s[0-9]{2,4}) 
```

它与其他人的相似，但您在后面添加一个空格以确保没有东西被吃掉。此外，通过将 \s 放在括号外而不是每个选项都可以节省一些代码。******

# sql-server - 计算占总收益的百分比 0

> ID：11455602
> 
> 赞同：0
> 
> 时间：2012-07-12T15:46:15.140
> 
> 标签：sql-server, select, percentage

我希望返回按每个分组的百分比，例如根据它们分组的有`id_cerinta`多少`subcerinteProiect`录音被`acoperire= 'acoperita'`划分为所有录音`subcerinteProiect``id_sarcina`

![在此处输入图像描述](../Images/015e4d4e873c1a949f8eec1dc4776d19.png)

我尝试了类似的东西：

```
SELECT 
    id_cerinta,
    SUM(CASE WHEN acoperire = 'acoperita' THEN 1 ELSE 0 END) 
        / COUNT(*) * 100 AS nr_subcerinte_acoperit 
FROM 
    subcerinteProiect 
GROUP BY 
    id_cerinta 
```

但是效果不太好。它只返回 0..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T15:55:02.807

这是由于整数数学。试试这些：

```
SELECT 5/100, 57/100, 99/100; 
```

结果都是0。

现在尝试：

```
SELECT 5.0/100, 57.0/100, 99.0/100; 
```

更好的结果，对吧？

因此，对于您的查询：

```
SELECT 
    id_cerinta, 
    CONVERT(DECIMAL(5,2), 
        SUM(CASE WHEN acoperire = 'acoperita' THEN 1 ELSE 0 END) 
            / COUNT(*) * 100.0) AS nr_subcerinte_acoperit 
FROM 
    subcerinteProiect 
GROUP BY
    id_cerinta 
```

# android - 在给定电子邮件地址的情况下查询 Android 联系人的快速有效方法

> ID：11455608
> 
> 赞同：1
> 
> 时间：2012-07-12T15:46:32.050
> 
> 标签：android, email, contacts

我正在寻找一种快速有效的方法来查询给定电子邮件地址的 Android 联系人（基本上，给定一个电子邮件地址，我想找到匹配的联系人（如果存在））。目前我有一个双 While 循环，这可能是实现这一目标的最低效的方法。

我想我必须做一个自定义 SQLite 连接查询，但我不熟悉如何做到这一点。其他用户的任何帮助或指示将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-19T06:34:08.763

有一种方法可以在不查询第二个游标的情况下获取所需的详细信息。由于 ContentProvider 知道如何连接表，因此您也可以使用投影参数从连接表中请求列。

所以代码可能如下所示：

```
Cursor cursor = null;
try {
    //Filter by email address first.
    final String[] projection = new String[] { 
                ContactsContract.CommonDataKinds.Email.CONTACT_ID, 
                ContactsContract.CommonDataKinds.Email.DATA,
                ContactsContract.CommonDataKinds.Email.DISPLAY_NAME_PRIMARY,
                ContactsContract.CommonDataKinds.Email.IS_PRIMARY };

    final String selection = ContactsContract.CommonDataKinds.Email.DATA + "=? and "
                + ContactsContract.CommonDataKinds.Email.IS_PRIMARY+"=1";

    final String[] selectionArgs = new String[] { email };

    cursor = context.getContentResolver().query(ContactsContract.CommonDataKinds.Email.CONTENT_URI, projection, selection, selectionArgs, null);

    if (cursor.moveToFirst()) {
        long contactId = cursor.getLong(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Email.CONTACT_ID));
        String displayName = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Email.DISPLAY_NAME_PRIMARY));

        // Do something with contactId and displayName
    }
} finally {
    if (cursor!=null) cursor.close();
} 
```

因此 DISPLAY_NAME_PRIMARY 是由 ContentProvider 自动连接的列。不使用 IS_PRIMARY 来确保我们获得主要联系人原始数据而不是所有数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T18:30:44.077

经过更多研究，没有处理此类请求的合同，并且您无法在您不拥有的任何数据库上执行任何自定义 SQL 查询。我已经想出了我能做到的最好的解决方案。请对此发表评论，并让我知道是否有办法使其表现更好/更快/更有效率。

```
String incomingEmail = [EMAIL_WE_ARE_SEARCHING_FOR]...
long contactID = -1;
//Filter by email address first.
final String[] emailProjection = new String[]{ContactsContract.CommonDataKinds.Email.CONTACT_ID, 
    ContactsContract.CommonDataKinds.Email.DATA};
final String emailSelection = ContactsContract.CommonDataKinds.Email.DATA + "=?";
final String[] emailSelectionArgs = new String[]{incomingEmail};
final String emailSortOrder = null;
Cursor emailCursor = context.getContentResolver().query(
        ContactsContract.CommonDataKinds.Email.CONTENT_URI, 
        emailProjection,
        emailSelection, 
        emailSelectionArgs, 
        emailSortOrder);
if(emailCursor.moveToFirst()){
    contactID = emailCursor.getLong(emailCursor.getColumnIndex(ContactsContract.CommonDataKinds.Email.CONTACT_ID)); 
    //Query the specific contact if found.
    final String[] projection = new String[]{ContactsContract.Contacts._ID, 
        ContactsContract.Contacts.DISPLAY_NAME, 
        ContactsContract.Contacts.PHOTO_ID, 
        ContactsContract.Contacts.LOOKUP_KEY};
    final String selection = ContactsContract.Contacts._ID + "=?";
    final String[] selectionArgs = new String[]{String.valueOf(contactID)};
    final String sortOrder = null;
    Cursor contactCursor = context.getContentResolver().query(
            ContactsContract.Contacts.CONTENT_URI,
            projection, 
            selection, 
            selectionArgs, 
            sortOrder);             
    if(contactCursor.moveToFirst()){
        contactName = contactCursor.getString(contactCursor.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
        String photoIDTmp = contactCursor.getString(contactCursor.getColumnIndex(ContactsContract.Contacts.PHOTO_ID)); 
        if(photoIDTmp != null){
            photoID = Long.parseLong(photoIDTmp);
        }
        lookupKey = contactCursor.getString(contactCursor.getColumnIndex(ContactsContract.Contacts.LOOKUP_KEY));
    }
    contactCursor.close();      
}else{
    emailCursor.close();
    return null;                
}
emailCursor.close();
//Return Contact ID, Contact Name, Contact Photo, Etc. 
```

谢谢！

# html - 我怎样才能旋转这些六边形？

> ID：11455609
> 
> 赞同：0
> 
> 时间：2012-07-12T15:46:33.123
> 
> 标签：html, css

> 嗨，我只是想知道谁能帮我解决这个问题，我必须稍微旋转这三个六边形。大约15度左右。它只能在 Internet Explorer 中工作。我整天都在用头撞这个，这很令人沮丧。谢谢。

```
<html>
<head>

 <style type="text/css">

    .top 
                {
        height:0px;
        width:0px;
        display: block;
        border:50px solid #606060;
        border-top-color:transparent;
        border-right-color:transparent;
        border-bottom-color:#606060;
        border-left-color:transparent;
                                //transform: rotate(30deg);
    }

    .middle 
                {
        height: 50px;
        background: #606060;
        width: 100px;
        display: block;
                                //transform: rotate(30deg);
    }

    .bottom
                {
        height:0px;
        width:0px;
        display: block;
        border:50px solid #606060;
        border-top-color:#606060;
        border-right-color:transparent;
        border-bottom-color:transparent;
        border-left-color:transparent;
                                // transform: rotate(30deg);

    }

    .top2 
                {
        height:0px;
        width:0px;
        display: block;
        border:50px solid red;
        border-top-color:transparent;
        border-right-color:transparent;
        border-bottom-color:red;
        border-left-color:transparent;
                                //transform: rotate(30deg);
    }

    .middle2 
                {
        height: 50px;
        background: red;
        width: 100px;
        display: block;
                                //transform: rotate(30deg);
    }

    .bottom2 
                {
        height:0px;
        width:0px;
        display: block;
        border:50px solid red;
        border-top-color:red;
        border-right-color:transparent;
        border-bottom-color:transparent;
        border-left-color:transparent;
                                // transform: rotate(30deg);

    }

                .top3 
                {
        height:0px;
        width:0px;
        display: block;
        border:50px solid #C0C0C0;
        border-top-color:transparent;
        border-right-color:transparent;
        border-bottom-color:#C0C0C0;
        border-left-color:transparent;
                                //transform: rotate(30deg);
    }

    .middle3 
                {
        height: 50px;
        background: #C0C0C0;
        width: 100px;
        display: block;
                                //transform: rotate(30deg);
    }

    .bottom3
                {
        height:0px;
        width:0px;
        display: block;
        border:50px solid #C0C0C0;
        border-top-color:#C0C0C0;
        border-right-color:transparent;
        border-bottom-color:transparent;
        border-left-color:transparent;
                                // transform: rotate(30deg);

    }

 </style>
</head>
<body>

 <div class="hexagon"style="position: absolute; top: 0px; left: 10px;">
    <span class="top"></span>
    <span class="middle"></span>
    <span class="bottom"></span>

</div>
<!-- GREEN -->
 <div class="hexagon3" style="position: absolute; top: 110px; left: 65px;">
    <span class="top3"></span>
    <span class="middle3"></span>
    <span class="bottom3"></span>

</div>
<!-- black-->
 <div class="hexagon2" style="position: absolute; top: 0px; left: 120px;">
                <span class="top2"></span>
    <span class="middle2"></span>
    <span class="bottom2"></span>

</div>

</BODY

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:51:38.190

这是资源管理器中用于转换的 CSS：

```
filter: progid:DXImageTransform.Microsoft.Matrix(/* IE6–IE9 */
M11=0.9659258262890683, M12=-0.25881904510252074, M21=0.25881904510252074, M22=0.9659258262890683, sizingMethod='auto expand');
zoom: 1; 
```

看看这个页面[http://css3please.com/](http://css3please.com/)

# search - 通过另一个搜索栏搜索栏

> ID：11455611
> 
> 赞同：0
> 
> 时间：2012-07-12T15:46:38.000
> 
> 标签：search

我不熟悉使用这个的脚本，所以通过谷歌搜索没有给我任何有价值的结果。

为了解释我想要什么，让我们举个例子：

1.  我的示例网站上有一个搜索栏
2.  用户输入内容并点击搜索
3.  搜索栏不是在网站上进行一系列搜索，而是在其他网站的搜索栏上进行搜索，例如宏或某种脚本。然后在我的示例网站上，列出了每个页面的搜索结果

我什至不知道如何搜索这个，甚至不知道是否有关于我正在寻找的任何内容的教程。任何类型的指针，甚至链接都值得赞赏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:58:50.823

您为什么要通过其他站点的搜索栏进行搜索，而不仅仅是通过他们的 Web 服务或 API，而这正是他们的搜索栏所做的？为什么不直接将 Google 添加到您的网站？这是大多数人需要的搜索引擎。它是免费的。即使这不是满足您需求的完整解决方案，也要在研究时将其放在适当的位置，我怀疑有人会知道其中的区别。

[http://www.google.com/cse/](http://www.google.com/cse/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:32:14.407

首先，在这些站点中的每一个中，您都需要手动进行搜索（只需搜索任何内容），然后在您点击提交后记录页面的 URL。URL 应该包含您以某种方式搜索的单词。

当有人执行搜索时，您可以在您的网站上执行的操作是将他们的搜索注入您收集的每个 URL。然后，您可以使用一个叫做 cURL 的东西来获取这些网页的内容。

一旦你有了这些页面的内容，我建议你使用正则表达式来只抓取你想要显示的页面的一部分（甚至只是产品页面的 URL）。

# jquery-ui - JQuery-UI 嵌套排序和滚动

> ID：11455614
> 
> 赞同：2
> 
> 时间：2012-07-12T15:46:42.893
> 
> 标签：jquery-ui, jquery-ui-sortable

全部

在您尝试在内部滚动条上滚动之前，我有以下代码可以正常工作：

```
<ul class="meh">
            <li>
                <a href="#">TEXT 1</a>
                <ul class="meh">
                    <li>
                        <a href="#">TEXT 1</a>
                    </li>
                    <li><a href="#">TEXT 2</a></li>
                    <li><a href="#">TEXT 3</a></li>
                    <li><a href="#">TEXT 4</a></li>
                    <li><a href="#">TEXT 5</a></li>
                    <li><a href="#">TEXT 6</a></li>
                    <li><a href="#">TEXT 7</a></li>
                    <li><a href="#">TEXT 8</a></li>
                    <li><a href="#">TEXT 9</a></li>
                    <li><a href="#">TEXT 10</a></li>
                </ul>
            </li>
            <li><a href="#">TEXT 2</a></li>
            <li><a href="#">TEXT 3</a></li>
            <li><a href="#">TEXT 4</a></li>
            <li><a href="#">TEXT 5</a></li>
            <li><a href="#">TEXT 6</a></li>
            <li><a href="#">TEXT 7</a></li>
            <li><a href="#">TEXT 8</a></li>
            <li><a href="#">TEXT 9</a></li>
            <li><a href="#">TEXT 10</a></li>
        </ul>

        <script type="text/javascript">
            $(function(){
                $(".meh").sortable();
            });
        </script> 
```

滚动完成后，内部 UL 将拖动，如下所示：

[http://jsbin.com/isujuq/2](http://jsbin.com/isujuq/2)

我不知道如何解决这个问题

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T20:04:19.767

弄清楚了！

浏览了一些文档并遇到了 sortable() 的“取消”选项。

如果你添加一个包装器，比如一个“div”元素，并让它溢出：滚动，你可以使用相同的 div 作为你的取消选择器，如下所示：

```
$(".meh").each(function(){
    $(this).sortable({cancel: ".scrollable"});
}); 
```

# javascript - 如何使用 RegEx 有效地解决这个问题

> ID：11455615
> 
> 赞同：0
> 
> 时间：2012-07-12T15:46:42.937
> 
> 标签：javascript, node.js

我有一个对象。

```
var NavigationController = function(config) {

    if(!config) {
        config = {};
    }

    if(!config.routes) {
        config.routes = {};
    }

    var getControllerByPath = function(path) {
        // I need to get Controller (UserController) if path matches in routes (/user/me)
    };
} 
```

我可以用这个作为...

```
var navController = new NavigationController({
    routes : {
        '/user/:action' : 'UserController',
        '/app/:action' : 'AppController',
        '/file/:action' : 'FileController',
        '/feedback/:action' : 'FeedbackController'
    }
});

navController.navigate(req, res); 
```

目前，我正在为每条路由生成正则表达式字符串，然后将其与路径字符串匹配，它有效，但效率高吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:04:00.823

正则表达式似乎是解决这个问题的好方法。您可以扫描并查找 / 和 : 但您也可以编写您的正则表达式而无需回溯，这可以帮助您提高性能。

如果您尝试使其高性能，您将花费大量时间编写可能根本不需要的算法......您确定这是您的应用程序需要性能改进的地方吗？预优化通常是最常见的错误之一，您最好的办法可能是在您的应用程序中获取您的逻辑，然后尝试找出哪些部分很慢并优化这些部分。

我希望这有帮助！

编辑：我正在谈论的那种正则表达式的例子：

假设问题是将字符串中的所有内容匹配到字母 k，大多数人会建议：

.*k

但这匹配字符串，如：“hijk”和“hijkhijkh”（分别匹配 hijk、hijkhink）。这是因为这个正则表达式实际上是在说“抓住所有东西，看看最后一个字符是否是 k。如果不是，则删除该字符并向后工作，直到它变为真或没有更多字符了。”

如果你想匹配第一个 k，你可以这样做：

.*?k

这就是说：“一次抓取一个字符，看看它是否与模式匹配（以 k 结尾）。如果不匹配，请继续抓取，直到令牌匹配或直到没有任何东西可以匹配并且找不到匹配项。”

您可以利用它一次抓取一个字符...贪婪运算符立即扫描字符串，因此 O(n) 开始。我介绍的后一个版本可能有一个更好的最佳情况，因为它在找到第一个匹配之前一直有效......但是如果这是一个瓶颈，你应该真的用你的应用程序尝试这些并测试它们，因为它真的依赖于您的应用在平均情况下使用的数据类型。

# javascript - 动态添加对象 - 只工作一次

> ID：11455623
> 
> 赞同：1
> 
> 时间：2012-07-12T15:47:17.313
> 
> 标签：javascript, jquery

我在 IE8 中动态嵌入 PDF 时遇到问题。

我有一个 div，我在单击元素时用 PDF 填充。它适用于任何项目的第一次点击，pdf 被显示。但是在随后的点击中，我什么也得不到。

我确信 PDF url 正在被返回（我已经提醒它了）。

一些代码；

html;

```
<div id="pdf-preview-holder">

</div> 
```

jQuery;

```
$('#table tbody tr').live('click', function() {
    var pdf_id = $(this).metadata().id;

    $.ajax({
        url: '/pdfs/get-pdf',
        type: 'post',
        data: 'id='+pdf_id,
        success: function( data ) {
        // pdf_path is an absolute url
        var pdf_path = data.pdf;
            $('#pdf-preview-holder').find('object').remove();
            $('<object id="pdf-preview" data="'+pdf_path+'" type="application/pdf" width="500" height="300" standby="Loading pdf..."><param name="src" value="'+pdf_path+'"></param><div class="err-text">Preview not available.<br />It appears that you do not have Adobe Reader of PDF support in this web browser.<br /><a id="asset-preview-alt" href="'+pdf_path+'" title="Download PDF" target="_blank">Click here to download the PDF</a></div></object>').appendTo('#pdf-preview-holder');
        },
        error: function( data ) {
            alert('oops, no PDF');
        }
    });
}); 
```

**更新**::我已经通过将`<object>`for a`<p>`与一些文本交换来测试它并且它工作正常 - 它是关于它不喜欢的对象标签的最终决定。

# c# - 澄清类变量的使用？

> ID：11455625
> 
> 赞同：0
> 
> 时间：2012-07-12T15:47:22.593
> 
> 标签：c#, class, variables

我一直在阅读一些关于属性和类变量的教程，我知道如果你设置一个类变量（在下面的例子中，bar）然后你可以调用一个类型来将该对象转换为一个特定的变量（我做了在下面的示例中不要这样做，只是为了澄清）。但是，如果您使用同一个类变量，其中已经存储了一个对象来调用方法，会发生什么？参考下面的示例，“ok”会被传递给方法，还是被忽略？我尝试通过这个编译器运行它，但它似乎没有问题，但我不确定它是否真的对对象栏设置为做任何事情。谢谢您的帮助！

```
public class Foo
{

    public static void Main()
    {
        Foo bar = new Foo();
        object ok = "ok";
        bar = (Foo)ok;
        bar.genericMethod();
    }

    public void genericMethod()
    {
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T15:51:28.847

不，这不对。不确定“类变量”是什么意思 - 你这里有两个局部变量，类型`Foo`和`object`. 第二种方法无法访问它们，因为它们对于第一种方法是本地的。如果您希望第二种方法具有访问权限，那么您必须执行以下两项操作之一：将其中一项作为参数传递给第二种方法（例如，将其定义为 as `void genericMethod(Foo foo)`），或者将其中一个变量声明为**字段**，在类级别的两种方法之外。

您的代码将编译，但会在运行时失败`bar = (Foo)ok`。尽管原则上可以将 an 强制`object`转换为 a `Foo`（因为 a`Foo` **是 an** `object`），但实际上并非如此，并且强制强制转换失败*。* `object`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:49:40.067

它会抛出一个运行时异常，尽管它可以编译。阅读有关[强制转换和类型转换](http://msdn.microsoft.com/en-us/library/ms173105.aspx)的更多信息。

# perl - 在 Perl 中，如何在一个循环中读取多个文件句柄？

> ID：11455627
> 
> 赞同：8
> 
> 时间：2012-07-12T15:47:37.530
> 
> 标签：perl, file-io

我想知道如何在 Perl 中实现它：

```
while ( not the end of the files )
    $var1 = read a line from file 1
    $var2 = read a line from file 2
    # operate on variables
end while 
```

我不确定如何在一个`while`循环中从两个文件中一次读取一行。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-12T15:57:07.567

好像你自己写了答案，几乎。只需检查`eof`两个文件句柄，如下所示：

```
while (not eof $fh1 and not eof $fh2) {
    my $var1 = <$fh1>;
    my $var2 = <$fh2>;
    # do stuff
} 
```

更多阅读：

*   [perldoc -f 打开](http://perldoc.perl.org/functions/open.html)
*   [perldoc -f eof](http://perldoc.perl.org/functions/eof.html)
*   [perldoc perlopentut](http://perldoc.perl.org/perlopentut.html)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-12T16:06:02.930

**Note:** I expanded my answer in response to @zostay and @jm666's comments.

The first step in coming up with an efficient, clear, and concise answer to this question starts with the idea that related [variables go in an aggregate](https://stackoverflow.com/questions/1829922/concatenating-variable-names-in-c/1829927#1829927). So, the array `@fh` will contain the filehandles from which we are reading simultaneously.

Then, we can read a line from each filehandle and store them in an array using the [`<>`](http://perldoc.perl.org/functions/readline.html) operator in conjunction with [map](http://perldoc.perl.org/functions/map.html). `map` takes a transformation rule and a list, and returns another list. Hence:

```
my @lines = map scalar <$_>, @fh; 
```

takes the filehandles in `@fh`, and reads a single line from each (note [scalar](http://perldoc.perl.org/functions/map.html)), and puts those lines in `@lines`. This is a `one-to-one` transformation of `@fh`.

As the documentation for `<>` indicates, `<>` returns an undefined value if the end-of-file is reached, or there is an error.

Now, one way to check if we successfully read from all files is to check if the number [defined](http://perldoc.perl.org/functions/defined.html) lines is the same as the number of filehandles. [grep](http://perldoc.perl.org/functions/grep.html) selects elements of a list that satisfy a certain criterion. Hence

```
@fh == grep defined, my @lines = map <$_>, @fh; 
```

would check if the number of filehandles in `@fh` is the same as the number of defined elements in `@lines`. However, the `@fh` appearing on both sides of this comparison can indeed be confusing, so an alternative way of checking the there are no undefined elements in `@lines` is:

```
0 == grep !defined, my @lines = map <$_>, @fh; 
```

If you want to put that condition in a [while](http://perldoc.perl.org/perlsyn.html) loop, you have to write:

```
while (0 == grep !defined, my @lines = map <$_>, @fh) { 
```

whereas if you go with an [until](http://perldoc.perl.org/perlsyn.html), you can simply write:

```
until (grep !defined, my @lines = map <$_>, @fh) { 
```

This means "*until at least one of the readlines returns an undefined value, execute the body of the loop*".

Now, note that [Perl's `eof`](http://perldoc.perl.org/functions/eof.html) is different than [C's `eof`](http://pubs.opengroup.org/onlinepubs/009695399/functions/feof.html). The documentation for [Perl's `eof`](http://perldoc.perl.org/functions/eof.html) notes that:

> Practical hint: you almost never need to use `eof` in Perl, because the input operators typically return `undef` when they run out of data or encounter an error.

If you check `eof` every time through the loop, you're doubling your file IO because "*this function actually reads a character and then `ungetc` s it*."

I almost always give a self-contained runnable example with my code. Below, I did not want to rely on any specific files existing on your system, so I use the always available `DATA` and `STDIN` handles. As opposed to using the `eof` function, when you use this method, you don't have to worry about where you're reading from: All you care about is whether a readline on any one of the files returned an undefined value. It can also be used with any number of filehandles. Also, you really don't have put the filehandles in an array, but as I said, related variables belong in an aggregate, so if you find yourself typing stuff like

```
my $var1 = <$fh1>;
my $var2 = <$fh2>; 
```

realize that [you should have used an array to store the filehandles](https://stackoverflow.com/questions/1829922/concatenating-variable-names-in-c/1829927#1829927).

```
#!/usr/bin/env perl

use strict; use warnings;

my @fh = (\*DATA, \*STDIN);

until (grep !defined, my @lines = map scalar <$_>, @fh) {
    print for @lines;
}

__DATA__
one
two
three 
```

This example script will stop asking for your input on `STDIN` when the lines in `DATA` are exhausted. If you do not have any trailing blank lines in the script, you should have to enter ~~three~~ four lines before the script terminates.

Now, if you want to know which filehandles reached the end, you'd switch to using something like:

```
#!/usr/bin/env perl

use strict; use warnings;

my @fh = (\*DATA, \*STDIN);

while (1) {
    my @lines = map scalar <$_>, @fh;

    if (my @eof = grep !defined($lines[$_]), 0 .. $#fh) {
        warn "Could not read from filehandle(s) '@eof'";
        last;
    }

    print for @lines;
}

__DATA__
one
two
three 
```

### Important

The loops above are designed to stop when any one of the files is exhausted. On the other hand, you might want the loops to run until all of the files are exhausted. In that case, you'd use:

```
 while (grep defined, my @lines = map scalar <$_>, @fh) { 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T14:15:06.170

另一个没有显式`eof()`检查的简单解决方案是这样的：

```
while (defined(my $var1 = <$fh1>) and defined(my $var2 = <$fh2>)) {
    # do stuff
} 
```

这使用了仅当您位于文件末尾时才`<>`返回if &的事实。`undef`

# php - Facebook 邀请有限数量的朋友

> ID：11455633
> 
> 赞同：0
> 
> 时间：2012-07-12T15:47:58.853
> 
> 标签：php, facebook, facebook-graph-api, invite

是否可以只邀请有限数量的朋友加入应用程序？

假设我希望用户只能邀请 3 个朋友。这可能吗？

[http://developers.facebook.com/docs/reference/fbml/request-form/](http://developers.facebook.com/docs/reference/fbml/request-form/)

我正在看参考资料。但我没有看到任何与限制请求数有关的事情。

可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:57:23.260

您链接到的文档是针对不再存在的基于 FBML 的旧功能。

Requests 的当前文档位于[https://developers.facebook.com/docs/requests/](https://developers.facebook.com/docs/requests/)

要具体回答您的问题，您可以使用[请求对话框](https://developers.facebook.com/docs/reference/dialogs/requests/)`max_recipients`的参数来阻止用户邀请超过特定数量的朋友

请注意，如果您为接受请求的用户提供某种奖励，您还应该在您自己的应用程序中实现逻辑，跟踪已发送请求的数量和 ID，以便稍后在处理接受时将它们关联起来，因为用户可能会触发通过 javascript 或弹出对话框自行对话，并发送比您的应用程序允许的请求更多的请求

# java - 从项目 B 的 servlet 调用项目 A 的 bean

> ID：11455640
> 
> 赞同：0
> 
> 时间：2012-07-12T15:48:06.720
> 
> 标签：java, jakarta-ee, servlets, javabeans, websphere-7

我有一个 Java EE 服务器，它从项目 B 中的 Servlet 调用项目 A 中的 bean。两个项目都在同一个“单元”（集群）中。我也想通过负载均衡器。我不想使用消息驱动 Bean 或 Web 服务。

有没有其他方法可以做到这一点，如何实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:46:51.140

实际上，经过一段时间后，我找到了解决方案：

```
Hashtable env = new Hashtable();
env.put(Context.INITIAL_CONTEXT_FACTORY,"com.ibm.websphere.naming
.WsnInitialContextFactory");
env.put(Context.PROVIDER_URL,"corbaloc::boris:9811,:natasha
:9812");
Context ctx = new InitialContext(env);
TestEJBHome home = (TestEJBHome)
PortableRemoteObject.narrow(ctx.lookup("ejb/ejbs/TestEJBHome"),
    TestEJBHome.class);
TestEJB bean = home.create(); 
```

从这里得到它：http: [//www.ibm.com/developerworks/websphere/techjournal/0807_pape/0807_pape.html](http://www.ibm.com/developerworks/websphere/techjournal/0807_pape/0807_pape.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T08:56:05.483

如果包含 EJB 的应用程序部署在与客户端相同的集群上，那么 WebSphere 将始终将请求路由到与客户端相同的应用程序服务器中的 EJB，并且调用将是 VM 内调用（而不是 out进程调用）。这称为*进程亲和性*。据我所知，没有办法避免或禁用进程关联。

# dependency-injection - Web API：使用 DI 创建 ApiController

> ID：11455642
> 
> 赞同：0
> 
> 时间：2012-07-12T15:48:11.890
> 
> 标签：dependency-injection, constructor, controller, asp.net-web-api

我有一个带有参数化构造函数的 ApiController。我读到框架可能使用依赖注入创建控制器。

所以我这样做（就像这里解释的[http://code.google.com/p/autofac/wiki/MvcIntegration](http://code.google.com/p/autofac/wiki/MvcIntegration)）：

**全球.asax**

```
builder.RegisterControllers(Assembly.GetExecutingAssembly());
//or this
builder.RegisterType<ObjectsController>().InstancePerHttpRequest(); 
```

控制器如下所示：

```
public class ObjectsController : ApiController
    {
        IMyObject m_myObject = null;

        public ObjectsController(IMyObject obj)
        {
            m_myObject = obj;
        }
} 
```

**Global.asax** 为了解决我使用这个的依赖：

```
builder.Register<IMyObject >((c, p) =>
            {
                //... create object ...

                return obj;
            }).InstancePerHttpRequest(); 
```

但我得到这个错误：

> “ObjectsController”没有默认构造函数。

我以为我可以使用 DI 做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T18:53:38.197

如果您想在 ASP.NET Web API 中使用 DI，这个答案可以为您提供更好的解决方案： [https ://stackoverflow.com/a/10592456/538387](https://stackoverflow.com/a/10592456/538387)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-08T10:51:06.373

如果您使用 Unity，这就是您在 ASP.NET 4 Web API RC 中需要做的所有事情（截至 2013 年 8 月 8 日）：

添加对“Microsoft.Practices.Unity.dll”的引用[我在版本 3.0.0.0，通过 NuGet 添加] 添加对“Unity.WebApi.dll”的引用[我在版本 0.10.0.0，通过添加NuGet] 使用容器注册您的类型映射 - 类似于 Bootstrapper.cs 中的代码，该代码由 Unity.WebApi 项目添加到您的项目中。在从 ApiController 类继承的控制器中，创建参数化构造函数，它们的参数类型为映射类型 Lo，你瞧，你将依赖项注入到你的构造函数中，而无需另一行代码！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T19:00:47.373

最常见的解决方案是使用 DI 特定的[IDependencyResolver](http://www.asp.net/web-api/overview/extensibility/using-the-web-api-dependency-resolver)实现。

那篇文章给出了一个使用 Unity 的示例，但您应该能够相当轻松地使其与 AutoFac 一起使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-03T09:18:58.403

正如其他人所建议的那样，使用任何 IDependencyResolver 实现似乎是一个好主意。

不幸的是，这并没有解决 WebAPI 在基于 ApiController 的类中需要无参数构造器的问题。=> 我只是在我的 web api 控制器基类中使用属​​性注入而不是构造函数注入，并提供一个空的无参数构造函数。不漂亮但亲吻:-)

```
 public class ApiControllerBaseWithDependency : ApiController
{
    [Microsoft.Practices.Unity.Dependency]
    protected MyServiceType Service { get; set;}
} 
```

# jquery - 如何使用 jquery / css 选择包含特定单词的锚点

> ID：11455643
> 
> 赞同：0
> 
> 时间：2012-07-12T15:48:17.577
> 
> 标签：jquery, css

我试过了

```
$('a[title="*"]').find('contains("PDF")').css({'background':'red'}); 
```

我知道这不是我想要的，因为它明显坏了。

很抱歉澄清我正在寻找标题中出现的单词

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T15:50:34.867

试试这个，

**[现场演示](http://jsfiddle.net/sFkPN/1/)**

```
$('a[title*="PDF"]').css({'background':'red'}); 
```

**用于忽略大小写的搜索**

```
$('a[title*="pdf"]').filter(function(){
    if(this.title.toLowerCase().indexOf("pdf") != -1)
         return $(this);
}).css({'background':'red'}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:51:46.900

```
$('a[title*="PDF"]').css({'background':'red'}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-12T15:51:29.453

如果它是一个特定的标题，它只是：

```
$("a[title*='specificTitle']"); 
```

# .net - WPF WebBrowser 控件自定义属性

> ID：11455645
> 
> 赞同：0
> 
> 时间：2012-07-12T15:48:18.347
> 
> 标签：.net, wpf, vb.net, wpf-controls, vb.net-2010

行。所以我遇到了几个代码示例，说明我可以为 WPF WebBrowser 控件创建一个自定义属性，这将允许我将一个 html 字符串绑定到控件以进行呈现。

这是该属性的类（位于名为 BrowserHtmlBinding.vb 的文件中）：

```
Public Class BrowserHtmlBinding

Private Sub New()
End Sub

Public Shared BindableSourceProperty As DependencyProperty =
    DependencyProperty.RegisterAttached("Html",
                                        GetType(String),
                                        GetType(WebBrowser),
                                        New UIPropertyMetadata(Nothing,
                                                                AddressOf BindableSourcePropertyChanged))

Public Shared Function GetBindableSource(obj As DependencyObject) As String
    Return DirectCast(obj.GetValue(BindableSourceProperty), String)
End Function

Public Shared Sub SetBindableSource(obj As DependencyObject, value As String)
    obj.SetValue(BindableSourceProperty, value)
End Sub

Public Shared Sub BindableSourcePropertyChanged(o As DependencyObject, e As DependencyPropertyChangedEventArgs)
    Dim webBrowser = DirectCast(o, System.Windows.Controls.WebBrowser)
    webBrowser.NavigateToString(DirectCast(e.NewValue, String))
End Sub

End Class 
```

和 Xaml：

```
<Window x:Class="Details"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:custom="clr-namespace:BrowserHtmlBinding"
Title="Task Details" Height="400" Width="800" Icon="/v2Desktop;component/icon.ico"
WindowStartupLocation="CenterScreen" WindowStyle="ThreeDBorderWindow"
WindowState="Maximized">
    <Grid>
        <WebBrowser custom:Html="&lt;b&gt;Hey Now&lt;/b&gt;" />
    </Grid>
</Window> 
```

我不断收到错误消息：错误 1 ​​在类型“WebBrowser”中找不到属性“Html”。

我该如何解决？？？它把我逼上墙了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:58:51.403

您将**类**名列为 xmlns 映射中的**命名空间**，然后您没有在实际附加属性使用中列出类名。我无法从您的代码片段中看出您的命名空间是什么（您可以检查项目属性以找到 Root 命名空间），但假设它类似于**WpfApplication1**，xaml 将如下所示。

```
<Window x:Class="Details" 
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
  xmlns:custom="clr-namespace:WpfApplication1" 
  Title="Task Details" Height="400" Width="800" 
  Icon="/v2Desktop;component/icon.ico" WindowStartupLocation="CenterScreen"
  WindowStyle="ThreeDBorderWindow" WindowState="Maximized"> 
<Grid> 
    <WebBrowser custom:BrowserHtmlBinding.Html="&lt;b&gt;Hey Now&lt;/b&gt;" /> 
</Grid> 
```

# windows-phone-7 - GeoCoordinateWatcher 无法提供实时状态或权限

> ID：11455646
> 
> 赞同：0
> 
> 时间：2012-07-12T15:48:27.180
> 
> 标签：windows-phone-7, location, windows-phone-7.1, windows-phone-7.1.1

尝试完成的全部目的是使用手机设置页面设​​置的位置服务的当前启用或禁用状态更新我的程序。

通常你启动一个应用程序，GeoCoordinateWatcher 就可以很好地获取机器人的状态和权限。我注意到此失败的具体情况是当您转到设置页面并按住后退按钮并直接选择我的应用程序时。当我的应用程序返回时，它不会读取位置服务的实际状态。

Application_Activated 和 MainPage_OnNavigatedTo 都是我可以重新检查状态和权限的事件。此时，无论我做什么，如果我在应用程序被杀死时更改了设置，它就会显示错误的信息。

在这些事件中，我什至创建了一个新的 GeoCoordinateWatcher 类，它仍然报告我的应用程序上次活动时的状态和权限。

我该怎么做才能读取实际值，或者我缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:18:20.530

根据[文件](http://msdn.microsoft.com/en-us/library/hh202962%28v=vs.92%29.aspx)，

> “此 API 用于获取设备的地理坐标，支持在后台代理中使用，但它使用缓存的位置值而不是实时数据。缓存的位置值由设备每 15 分钟更新一次。”

禁用位置服务后，您很可能会获得缓存的位置。
一个小时后会发生什么？

# c# - 在 ListBox 中选择一个目录并在另一个 ListBox 中显示该选定目录的文件

> ID：11455647
> 
> 赞同：2
> 
> 时间：2012-07-12T15:48:27.977
> 
> 标签：c#, silverlight, visual-web-developer-2010

我使用以下方法将目录枚举为`ListBox`：

```
private void TE_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {            
IEnumerable<string> file = System.IO.Directory.EnumerateDirectories(@"C:\Users\user\Desktop", "*.*", System.IO.SearchOption.AllDirectories);
        foreach (var f in file)
        {
            lbz.Items.Add(String.Format(f));
        }
    } 
```

现在，`ListBox`显示该给定路径中的所有目录，然后我使用：

```
private void lbz_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        if (lbz.SelectedItem != null)
        {
            if (Directory.Exists(lbz.SelectedItem.ToString()))
            {
                string[] filePaths = Directory.EnumerateFiles() //:<------
                for (int i = 0; i < filePaths.Length; ++i) 
                {
                    lbz2.Items.Add(i); 
                }

            }
            else
            {
                tb1.Text = "Directory Doesn't Exist On This Path";
            }
        }
        else
        {
            tb1.Text = "No Directory Selected";
        }

    } 
```

箭头是我难住的地方，因为我使用的是我不能使用的 Microsoft Visual Web Developer `GetFiles`，所以我必须使用 Enumerate。

我希望能够`ListBox`通过在 lbz 中选择一个目录并将该目录的内容（其中的所有文件）显示在 lbz2 中来填充另一个（lbz2）。

如果：

```
string[] filePaths = Directory.EnumerateFiles() //:<------
for (int i = 0; i < filePaths.Length; ++i) 
{
    lbz2.Items.Add(i); 
} 
```

不起作用，我愿意接受建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:51:11.390

这应该有效：

```
foreach (var filePath in Directory.EnumerateFiles(lbz.SelectedItem.ToString()))
{
    lbz2.Items.Add(filePath); 
} 
```

EnumerateFiles 返回`IEnumerable<string>`，而不是`string[]`。

# sql - 提取数据但包含特定记录

> ID：11455648
> 
> 赞同：0
> 
> 时间：2012-07-12T15:48:30.283
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我的老板给了我一个有趣的挑战。我们有一个数据集来提取页面上的某些广告商，但如果您是登录的广告商，他希望确保人员广告首先显示。这是现在的脚本：

```
SELECT TOP 15
a.MemberID,             -- 0
a.UserName,             -- 1
a.MemberDisplayName,    -- 2
a.NYKABizName           -- 3
FROM Member a
INNER JOIN AdDisplay b ON b.MemberID = a.MemberID
WHERE a.Claimed = 'Y'
AND a.NYKACatID IS NOT NULL
AND b.LocalPageID = @LocalPageID
AND a.SBIcon = 'N'
AND a.Viewable = 'Y'
AND a.ProfileTypeID <> 1
AND a.PackageType <> 'G'
AND a.PackageType <> 'P'
AND a.PackageType <> 'C'
ORDER BY PackageType ASC 
```

我想添加一些像 Include MemberID = 102。我怎样才能改变这个脚本来完成老板的愿望。

提前谢谢了，

新杰克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T15:51:20.577

假设查询返回有问题的广告商（没有前 15 个），您可以通过修改 order by 子句来执行此操作：

```
order by (case when MemberId = 102 then 0 else 1 end),
         PackageType ASC 
```

这对列表进行排序，将所需成员放在首位，然后是其他所有成员。您仍然可以在查询中保留前 15 个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:51:59.583

我在这里做了很多假设，但想法是将您的登录用户表添加到查询中，并确保显示该表中有记录的任何人。

```
SELECT TOP 15
a.MemberID,             -- 0
a.UserName,             -- 1
a.MemberDisplayName,    -- 2
a.NYKABizName           -- 3
FROM Member a
INNER JOIN AdDisplay b ON b.MemberID = a.MemberID
LEFT OUTER JOIN LoggedInUsers l ON a.MemberID = l.MemberID
WHERE (a.Claimed = 'Y'
AND a.NYKACatID IS NOT NULL
AND b.LocalPageID = @LocalPageID
AND a.SBIcon = 'N'
AND a.Viewable = 'Y'
AND a.ProfileTypeID <> 1
AND a.PackageType <> 'G'
AND a.PackageType <> 'P'
AND a.PackageType <> 'C')
OR l.MemberID IS NOT NULL
ORDER BY IF(l.MemberID IS NOT NULL,0,1), PackageType ASC 
```

当然，如果您只想静态包含​​ MemberID = 102，那么@GordonLinoff 的答案是正确的。也许我对你的问题读得太多了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T15:52:07.587

您可以编写类似于第一个查询的第二个查询，但它只返回您已登录成员的结果，并让两个查询都包含一个附加值来标识它们来自哪个子查询，然后将它们合并并在外部从它们中选择查询哪个命令他们。

我知道这是一个连续的句子，所以让我看看我是否可以用代码详细说明......

```
SELECT TOP 15 * FROM (
    SELECT
      0 as loginStatus,
      a.MemberID,             -- 0 
      a.UserName,             -- 1 
      a.MemberDisplayName,    -- 2 
      a.NYKABizName           -- 3 
    FROM Member a 
    INNER JOIN AdDisplay b 
    ON b.MemberID = a.MemberID 
    WHERE a.Claimed = 'Y' 
    AND a.NYKACatID IS NOT NULL 
    AND b.LocalPageID = @LocalPageID 
    AND a.SBIcon = 'N' 
    AND a.Viewable = 'Y' 
    AND a.ProfileTypeID <> 1 
    AND a.PackageType <> 'G' 
    AND a.PackageType <> 'P' 
    AND a.PackageType <> 'C' 
    AND a.MemberID IN (@memberIdList)

    UNION

    SELECT
      1 as loginStatus,
      a.MemberID,             -- 0 
      a.UserName,             -- 1 
      a.MemberDisplayName,    -- 2 
      a.NYKABizName           -- 3 
    FROM Member a 
    INNER JOIN AdDisplay b 
    ON b.MemberID = a.MemberID 
    WHERE a.Claimed = 'Y' 
    AND a.NYKACatID IS NOT NULL 
    AND b.LocalPageID = @LocalPageID 
    AND a.SBIcon = 'N' 
    AND a.Viewable = 'Y' 
    AND a.ProfileTypeID <> 1 
    AND a.PackageType <> 'G' 
    AND a.PackageType <> 'P' 
    AND a.PackageType <> 'C'
)
ORDER BY loginStatus 
```

# delphi - delphi中的运行时包安装

> ID：11455649
> 
> 赞同：1
> 
> 时间：2012-07-12T15:48:31.583
> 
> 标签：delphi, delphi-5

我正在使用 delphi 5 并安装了一些自定义组件。当我尝试从 IDE 打开表单时，出现以下错误：

> 找不到类 TdxButtonEdit。dxEdit.bpl 包包含那个 TdxButtonEdit。

dxEdit.bpl 是运行时包，如何安装？当我尝试时，我收到错误：

> 无法安装，因为它不是设计时包。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:45:29.167

`TdxButtonEdit`来自旧的 DevExpress 库，因为新的已更改为`TcxButtonEdit`ExpressEditors 的一部分。它们不是免费的，但对我来说是最好的 VCL 组件，非常丰富和强大，而且支持很棒。您没有任何 dcldxEdit.bpl？

# winapi - SHGetFileInfo 返回空图标

> ID：11455652
> 
> 赞同：0
> 
> 时间：2012-07-12T15:48:38.863
> 
> 标签：winapi, icons

尝试使用[此代码](http://www.pinvoke.net/default.aspx/shell32.shgetfileinfo)代码示例 2 获取文件类型的图标。但是在调用该函数后，`hIcon`传递的`SHFILEINFO`结构中的成员仍然为空。我试图只给他文件扩展名，例如 .xml、.pdf 等，也许这就是问题所在。注意：我也需要文件类型描述，所以我不能使用托管的`Icon.ExtractAssociatedIcon`. 非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T23:11:12.520

好的，解决了。
如果你不给他一个完整的路径，并且想要一个文件类型的图标，`SHGFI_USEFILEATTRIBUTES`在`uFlags`参数中设置标志。

# automation - 自动构建服务器并在远程机器上安装和执行

> ID：11455662
> 
> 赞同：2
> 
> 时间：2012-07-12T15:49:13.840
> 
> 标签：automation, hudson, client-server, jenkins

我目前正在开发一个测试自动化系统并拥有一个 Jenkins (Hudson) Buildserver。在这里，我可以构建我的安装程序，并将获得一个可执行的安装程序作为 *.exe。

这个 *.exe 我可以自动放在网络共享上，所有连接的计算机都可以访问它。

现在我想在构建安装程序后执行以下操作。我想将它部署到我可以在网络中选择的计算机上并运行程序。

我正在寻找一个可以最好地集成到 Jenkins 中的解决方案，但无论如何我可以在我的 Jenkins 服务器上批量运行任何程序。

那么我需要哪些部分，你会建议我如何实现它？当然，该解决方案将来应该是可扩展的，并且可能需要 Jenkins 和其他 PC 之间的更多通信。

我想主要问题是：

如何最好地安装遥控器？我应该在这里使用某种客户端服务器架构还是最好的方法是什么？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:34:53.217

一种方法是：使用各种机器[分布式](https://wiki.jenkins-ci.org/display/JENKINS/Distributed+builds)运行 Jenkins ，您希望在这些机器上运行作为从属运行的安装程序。然后编写两个作业：*BUILDIT*和*RUNIT*。第一个将构建您的项目（它可能仅绑定到一台机器或多个从站），第二个将运行安装程序并测试安装（此作业将在您要测试的从站上运行）。

现在有两种可能性，即上游和下游做什么工作。

(1) *BUILDIT*在上游。在构建结束时，它将通过[参数化触发器插件调用](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Trigger+Plugin)*RUNIT*，并将安装程序的位置传递给它。您可以通过[ArtifactDeployer 插件将安装程序放在由](https://wiki.jenkins-ci.org/display/JENKINS/ArtifactDeployer+Plugin)*BULDIT*的 BUILD_ID 键入的目录中的共享驱动器上（这可能是最容易实现的选项，但不是通用的）；或者*RUNIT*可以通过 wget 或 curl 的永久链接访问安装程序工件（在这种情况下，*BUILDIT*将构建链接并将其传递给*RUNIT*）。还有其他选项（例如使用[Jenkins Python Remote Access API](http://packages.python.org/jenkinsapi/#)），但它们更难实现。

 ***现在，*RUNIT*可以是一个多配置作业，它将触发所有从属设备上的安装/测试；或者，您可以从*BUILDIT*传递一个参数，指定要在哪个从站上运行。然后，使用*NodeLabel*[参数插件](https://wiki.jenkins-ci.org/display/JENKINS/NodeLabel+Parameter+Plugin)，您可以将RUNIT 绑定到参数指定的从站。

 *(2) *RUNIT*在上游。您以某种方式决定要运行测试的从属设备并在该从属设备上调用*RUNIT*（有关如何参数化要在其上运行的从属设备，请参见上文）。*然后RUNIT*将通过*参数化触发器插件*调用*BUILDIT*作为构建步骤（而不是构建后步骤）运行。*RUNIT*应该将其 BUILD_ID 作为参数传递给*BUILDIT*，以便*BUILDIT*可以存储由它键入的安装程序工件。*RUNIT*将等待*BUILDIT*完成，使用 BUILD_ID 找到安装程序，然后继续安装和测试。****

# javascript - 是否有任何离线 HTML CSS JavaScript 编辑器，如 JSFiddle、jsbin、codepen 等？

> ID：11455667
> 
> 赞同：50
> 
> 时间：2012-07-12T15:49:24.007
> 
> 标签：javascript, html, css

有没有像 JSFiddle.net 这样的离线工具，可以像 JSFiddle.net 那样在**没有 Internet**的情况下使用 JavaScript、HTML、CSS？

![在此处输入图像描述](../Images/7240aabed014a343715dffbcb33d6786.png)

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-07-12T15:54:30.093

您可以在本地安装优秀的[JSBin 。](http://jsbin.com/#javascript,html,live)

[https://github.com/remy/jsbin/wiki/How-to-install-JS-Bin-in-your-own-environment](https://github.com/remy/jsbin/wiki/How-to-install-JS-Bin-in-your-own-environment)

![在此处输入图像描述](../Images/c090bd6011a918980fee9c1641833a58.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-12T16:07:09.690

我想说[像 SpaceBeers 建议的那样安装 JSBin](https://stackoverflow.com/a/11455779/990877)是一个非常简洁的解决方案。但是，如果这不是您想要的，您可以尝试其中一种**自动重新加载浏览器插件**。

例如，[Firefox 的 Auto Reload 扩展](https://addons.mozilla.org/en-US/firefox/addon/auto-reload/)会在本地文件更改后立即重新加载页面。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-27T10:07:56.830

不再支持[WIODE 。](http://wiode.org/)一个新项目取代了它。它被称为[Codiad](http://codiad.com/)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-12T15:56:28.860

保存并让 JSFiddle 在本地运行可能有点令人生畏，但有一个更粗略但有效的 @http: [//htmledit.squarefree.com/](http://htmledit.squarefree.com/)。您不能在 RTHE 中完成您在 JSFiddle 中所做的所有事情，但它非常小并且无需修改即可在本地运行。

另外，查看 Aptana ( [http://www.aptana.com/](http://www.aptana.com/) )，它会直接从 IDE 执行您的 JS，如果非常大，非常好。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-11-11T14:54:38.547

您可以离线使用[http://kodtest.com](http://kodtest.com)。使用非常简单。像jsfiddle。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-19T00:12:48.770

很难将 JSFiddle 用于大型项目。我正在使用一个名为[WIODE](http://wiode.org)的 Web IDE 。

```
<hr> 
```

它是通过 Scriptaculous 分发的。

更新： WIODE 变成了 CODIAD 和 CODIAD 变成了 ATHEOS 。我非常喜欢 Codepen.io，[看看我的个人资料](https://codepen.io/3642066)。我……以前也喜欢 jsfiddle，jsbin 我从来没用过。

我提到的那些 IDE 上最好的一点是所有这些都是开源的、免费的、易于安装在任何 php 服务器上的。那是由3代程序员制作和开发的。除了“记事本”之外，没有任何东西可以与之相比。

```
Any of you guys here remembers the Microsoft FrontPage? DId you used Dreamweaver ?? 
```

# matlab - 矩阵尺寸必须一致

> ID：11455671
> 
> 赞同：0
> 
> 时间：2012-07-12T15:49:33.387
> 
> 标签：matlab

应用此方法时：

```
%% When an outlier is considered to be more than three standard deviations away from the mean, use the following syntax to determine the number of outliers in each column of the count matrix:

mu = mean(data)
sigma = std(data)
[n,p] = size(data);
% Create a matrix of mean values by replicating the mu vector for n rows
MeanMat = repmat(mu,n,1);
% Create a matrix of standard deviation values by replicating the sigma vector for n rows
SigmaMat = repmat(sigma,n,1);
% Create a matrix of zeros and ones, where ones indicate the location of outliers
outliers = abs(data - MeanMat) > 3*SigmaMat;
% Calculate the number of outliers in each column
nout = sum(outliers) 
% To remove an entire row of data containing the outlier
data(any(outliers,2),:) = []; %% this line 
```

最后一行从我的数据集中删除了一定数量的观察（行）。然而，我后来在我的程序中遇到了一个问题，因为我手动将观察数（行数）声明为 1000。

```
%% generate sample data
K = 6;
numObservarations = 1000;
dimensions = 3; 
```

如果我更改`numObservarations`为，`data`我会收到一个标量输出错误，但是如果我不更改它，由于行数不匹配，我会收到此错误：

```
??? Error using ==> minus
Matrix dimensions must agree.

Error in ==> datamining at 106
    D(:,k) = sum( ((data -
    repmat(clusters(k,:),numObservarations,1)).^2), 2); 
```

有没有办法设置`numObservarations`它自动检测行`data`数并将其输出为一个数字？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T15:52:34.717

我一定是误会了什么。据我所知，这应该足够了：

```
numObservations = size(data, 1); 
```

# .net - .NET 4.5 通用成员资格提供程序表名称

> ID：11455676
> 
> 赞同：8
> 
> 时间：2012-07-12T15:49:43.670
> 
> 标签：.net, sql, asp.net-mvc, universal-provider

有没有办法在数据库中为新的 .NET 4.5 DefaultMembershipProvider 表名添加前缀？它们曾经被命名为 aspnet_Users、aspnet_Roles 等，现在它们仅命名为 Users、Roles 等，这与我的具有表 User 的应用程序架构相冲突。

如果我想使用新的通用提供程序并避免这个命名问题，我唯一的选择是使用单独的数据库作为成员吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T23:40:24.223

不幸的是，目前无法自定义通用提供者的表名，我会确保我们考虑在未来添加对此的支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-10T13:34:57.347

可以让 DefaultMembershipProvider 使用不同模式下的表，方法是让它使用登录名连接到 SQL，登录名映射到目标数据库中的非默认模式（例如“成员资格”）。在 SSMS 中，查看登录属性、用户映射、默认架构。这样，应用程序`[dbo].[Users]`不会与`[membership].[Users]`.

# c++ - 处理值和指针的函数模板

> ID：11455691
> 
> 赞同：0
> 
> 时间：2012-07-12T15:50:29.897
> 
> 标签：c++, templates, pointers, smart-pointers

如果我有一个函数模板，它有一个按值或引用的模板参数

```
template<class T> void DoSomething(T& t){ t.method();} 
```

如果我想处理指针或智能指针，最好先取消引用，这样代码才能工作或编写一个委托函数，如

```
template<class T> void DoSomething(T* t){ Dosomething(*t);} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:56:35.960

像所有“是否最好”的问题一样，答案是“取决于”。会有争论和意见。

但是，我建议使用第二种方法。原因是，您可以在函数的第二种形式中添加额外的检查。例如：

```
template<class T> void DoSomething(T* t)
{
    if (t == NULL)
        give_error_somewhere();
    else
        Dosomething(*t);
} 
```

但就像我说的，这肯定取决于你的整个项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:02:17.333

这取决于您的项目。至于我，我会使用第一个变体。以下是一些原因：

1.  如果我们传递指针，我们应该记住它可以是 NULL。但是这个函数是否应该对所提供参数的有效性负责？如果函数是一个工具，它应该与值一起工作，参数的有效性不是它关心的问题。我认为只有当我需要明确地说该函数接受值或不接受时，我才会使用第二个变体。如果你的函数只需要值，那么你为什么要给它额外的检查呢？
2.  您始终可以传递取消引用的指针，并且如果您使用任何智能指针，您不必关心存储的指针是否为 NULL，因为如果您尝试取消引用 NULL 指针，所有标准智能指针都会抛出异常。

# php - 关于cron作业

> ID：11455693
> 
> 赞同：-1
> 
> 时间：2012-07-12T15:50:31.797
> 
> 标签：php, codeigniter, cron

我们有自己的网站。所以我们想在某个时间运行一个 cron 作业，它将数据库备份到一个异地文件夹。那么如何建立这个任务呢？谁能帮我解决这个问题。比如我需要写什么脚本？我们使用 codeIgniter 框架来创建网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:56:37.490

如果您已经编写了备份脚本或命令，则可以使用 Linux 命令编辑 cronjobs：

```
crontab -e 
```

或者`sudo crontab -e`

用于[cron的命令](http://en.wikipedia.org/wiki/Cron)

在 crontab 中，添加一行：

```
1 0 * * * <your script or command> 
```

在这种情况下，它会在每晚午夜 + 1 分钟运行您添加到 crontab 的任何命令。

如果您还没有编写备份命令，您可以尝试使用（假设您使用的是 MySQL）：

```
1 0 * * * mysqldump -u<username> -p<password> <databasename> | ssh <username>@<offsitehost> `cat > /somebackupdirectory/<databasename>.sql` 
```

下面是对该命令的解释：

```
mysqldump -u<username> -p<password> <databasename> 
```

使用正确的数据库登录凭据转储特定的 MySQL 数据库。

```
| ssh <username>@<offsitehost> `cat > /somebackupdirectory/<databasename>.sql` 
```

[将第一个命令的输出通过管道](http://en.wikipedia.org/wiki/Pipeline_%28Unix%29)传输到 SSH 命令（以连接到场外文件夹）。然后使用[cat](http://en.wikipedia.org/wiki/Cat_%28Unix%29)将输出写入您指定的某个文件中。

请务必注意该命令使用刻度线，而不是单引号。

# c# - 基于 2 个布尔值的 Linq to SQL 计算属性

> ID：11455696
> 
> 赞同：0
> 
> 时间：2012-07-12T15:50:36.643
> 
> 标签：c#, linq, linq-to-sql

我正在向 L2S 生成器创建的部分类添加一些属性。我正在尝试基于 2 个其他属性创建一个“可用”布尔属性。“启用”和“确认”我确实有

```
 public Boolean Available
    {
        get
        {
            return (Enabled && Confirmed);
        }
    } 
```

但是，在运行此程序时，它会引发“无法转换为 SQL”错误。

如何在查询数据上下文时创建此属性而无需始终检查“已启用”和“已确认”？

谢谢

本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:04:30.760

让它返回一个表达式！请参阅： http: [//www.atrevido.net/blog/2007/09/05/Calling+Custom+Methods+In+LINQtoSQL.aspx](http://www.atrevido.net/blog/2007/09/05/Calling+Custom+Methods+In+LINQtoSQL.aspx)

这篇文章也可能会有所帮助： [Method X has no supported translation to SQL - booleans and datetime](https://stackoverflow.com/questions/7995892/method-x-has-no-supported-translation-to-sql-booleans-and-datetime)

# java - 关于 apache activemq 的认证

> ID：11455697
> 
> 赞同：1
> 
> 时间：2012-07-12T15:50:37.293
> 
> 标签：java, authentication, activemq

到目前为止，我通过配置文件（activemq.xml）实现了apache activemq的身份验证，如下链接所示： http: [//fusesource.com/docs/esb/4.3/amq_security/Auth-SimpleAuthentPlugin.html](http://fusesource.com/docs/esb/4.3/amq_security/Auth-SimpleAuthentPlugin.html)

但是这样的话，如果我想添加更多的用户，就得改配置文件，重启服务器，在实际使用中没有任何意义。

那么有什么方法可以在不重新启动服务器的情况下添加用户？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T22:08:07.243

如果您打算随着时间的推移向多个用户授予访问权限，最简单的方法是通过[JAAS LDAP 模块](http://fusesource.com/docs/esb/4.3/amq_security/Auth-JAAS-LDAPAuthentPlugin.html)使用 LDAP 目录。Active Directory 集成得很好，如果您不在 Windows 环境中，Apache DS 也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T19:18:42.750

我使用 JAAS PropertiesLogin 来解决这个问题。我可以更改用户名和密码，还可以将其他文件中的信息分组，从而控制身份验证。无需重新启动服务器即可使更改生效。

# android - 在我的活动中保存一些数组的状态

> ID：11455698
> 
> 赞同：0
> 
> 时间：2012-07-12T15:50:48.007
> 
> 标签：android, android-layout, android-intent

我在处理数独游戏中的连续按钮时遇到问题。此按钮在手机打开之前有效，但如果我重新启动手机并尝试继续玩数独，应用程序崩溃，这是因为我没有保存某些整数数组的状态。

这是这里的onPause方法，我会保存Activity的状态，但不会保存我的三个整数数组easy[]、medium[]和hard[]的状态，我该怎么做呢？

```
@Override
protected void onPause() {
    super.onPause();
    Log.d(TAG, "onPause");
    Music.stop(this);

    // Save the current puzzle
    getPreferences(MODE_PRIVATE).edit().putString(PREF_PUZZLE, toPuzzleString(puzzle)).commit();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:53:46.660

你实现了 onPause() 吗？您应该在该函数中保存状态，并在 onResume() 上加载数据有一个清晰的流程图向您展示此处调用的函数[http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

# java - 从 Xml 数据生成图形的工具

> ID：11455700
> 
> 赞同：9
> 
> 时间：2012-07-12T15:50:59.237
> 
> 标签：java, xml, diagram

我想从大型 xml 文件生成图形。它实际上是程序执行生成的调用上下文树。一个小文件如下所示：

![在此处输入图像描述](../Images/1460dca96a9797779274b2901ce8aaaa.png)

从这个 xml 我想要一个包含 4 个节点（每个方法标记一个节点）的图，即 main、methodA、methodB 和方法 C。正如树所示（从缩进）main() 调用 methodA，然后 methodA 调用方法B和方法C。所以我想要一个图表'/图，如下所示：

![在此处输入图像描述](../Images/37edec17931751764ad18ed8182133d4.png)

**是否有任何开源工具可以为我做到这一点？xml 文件非常大（大约 7 MB），所以图表真的很大。我希望该工具能够正确处理此问题。如果该工具可以在 linux 上运行则很好，否则在 windows 上也可以。但首选是linux。**

我也可以考虑一些好的java库，通过它我可以做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T06:44:21.047

我的建议是[yEd](http://www.yworks.com/yed) - 它不是开源的，而是免费和跨平台的（基于 Java 并且在带有 Oracle JDK 的 Linux 上运行非常流畅）并且使用开放标准进行输入/输出。它能够直观地排列具有数千个节点的网络，并具有可以读取 xml 文件的导入工具。由于没有单一的最佳方式将 xml 文件导入图形结构，您可以关联 XSLT 文件并将输入转换为[GraphML](http://graphml.graphdrawing.org) - yEd 可以自动将 XSLT 文件应用到您的 xml 文件，然后计算一个漂亮的绘图，然后可以被分析或导出。

[以下](http://docs.yworks.com/yfiles/doc/developers-guide/graphml.html#graphml_xslt)是一些 XSL 示例样式表的链接，您可以将其用作基础。

# xml-parsing - 使用 Google Aps 脚本解析 xml

> ID：11455702
> 
> 赞同：0
> 
> 时间：2012-07-12T15:51:05.630
> 
> 标签：xml-parsing, google-apps-script

我必须解析作为邮件附件收到的短 xml 消息。在有关 XML (https://developers.google.com/apps-script/service_xml) 的文档中，一些示例可能很有用。

非常感谢您给我一些提示以帮助我解析（示例，代码位...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T09:17:07.690

这是[使用应用程序脚本解析 XML 的教程](https://developers.google.com/apps-script/articles/XML_tutorial)

# node.js - 如何让 twitter 引导模式在 node js express js 中工作？

> ID：11455712
> 
> 赞同：4
> 
> 时间：2012-07-12T15:51:46.663
> 
> 标签：node.js, twitter-bootstrap, express

这是我的 index.jade 文件

```
.navbar.navbar-fixed-top
    .navbar-inner
        。容器
            .brand #{title}

    。容器
        。排
            .hero-unit
                h1 #{标题}
                p 板球奇幻游戏，您可以在其中选择。
                a.btn(data-toggle="modal", href="#myModal") 启动

div.modal.hide(id="myModal")
    .modal-header
        按钮（类型=“按钮”，类=“关闭”，数据关闭=“模态”）x
        h3 模态标题
    .modal-body
        p 一个精致的身体...
    .modal-footer

```

这是我的 layout.jade 文件

```
！！！
html
    头
        标题=标题
        链接（rel='样式表'，href='/libs/bootstrap/css/bootstrap.css'）
        链接（rel='样式表'，href='/libs/bootstrap/css/bootstrap.min.css'）
        链接（rel='stylesheet', href='/libs/bootstrap/css/bootstrap-responsive.min.css'）
        链接（rel='样式表'，href='/stylesheets/style.css'）
    身体！=身体
脚本（src="/libs/bootstrap/js/bootstrap.js"）
```

我有其他引导元素工作，但无法遵循以下说明 - “您可以轻松激活页面上的模式，而无需编写单行 javascript。只需在具有数据目标的控制器元素上设置 data-toggle="modal" ="#foo" 或 href="#foo" 对应于模态元素 id，当点击时，它将启动你的模态。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:50:58.040

在 layout.jade 文件中包含 jquery lib

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-14T17:10:27.840

在引导程序之前添加 jQuery：

```
script(src="https://code.jquery.com/jquery-3.2.1.min.js") 
```

# android - Android：旋转时位图图像失真

> ID：11455718
> 
> 赞同：3
> 
> 时间：2012-07-12T15:51:58.157
> 
> 标签：android, bitmap, image-rotation

我的应用程序中有一个旋转位图，但它真的被扭曲和像素化了，我能做些什么吗？

我指的是时钟指针。

![在此处输入图像描述](../Images/625e908a9197ce0c433fc4356e27023a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:05:52.363

如果您尝试在绘图程序中旋转图像，我相信您会得到类似的结果。这是因为它必须以一个奇怪的角度绘制它，这通常需要更多的像素才能“看起来正确”。如果你将它从 12 旋转到 3、6 或 9，我敢打赌它不会像像素化那样。

尝试使用像素密度更高的位图 - 旋转，然后按比例缩小。这可能会有所帮助。

# tridion - 遍历文件夹级别

> ID：11455720
> 
> 赞同：-9
> 
> 时间：2012-07-12T15:51:59.223
> 
> 标签：tridion, tridion-2011

我在文件夹下有组件。

需要遵循什么代码/代码语法，以循环浏览具有组件的文件夹，以便我可以从不同组件中提取值。

谁能帮帮我。

我使用了以下代码

```
**Folder compFilter= new Filter(); 
Folder folder=engine.GetObject(webdavurl) as Folder; 
foreach(Component comp in folder.GetItems(CompFilter))** 
```

它不起作用。请提出一些解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T16:04:05.327

逻辑如下：

1.  创建一个过滤器，指定您感兴趣的项目类型是组件
2.  根据您需要的信息，从文件夹中获取项目或获取列表项目。如果您只需要标题和 ID，Get List 会更快（返回 XML）。如果您需要项目的其他属性，请使用返回对象的 Get Items。

如前所述，如果您让我们知道您*可能会*获得哪个 API 代码示例。上述逻辑适用于任何 API。

[更新]

请不要使用`Filter`，这个类在 Tridion 2011 中被弃用，取而代之的是`StronglyTypedFilter`“家庭”。

```
Session session = engine.GetSession();
string folderUrl = "/my/long/webdav";
OrganizationalItemItemsFilter filter = new OrganizationalItemItemsFilter(session)
                                            {ItemTypes = new[] {ItemType.Component}};

Folder folder = (Folder)session.GetObject(folderUrl);

foreach (Component component in folder.GetItems(filter))
{
    // Do something with the component
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T16:09:46.843

如何使用 2011 TOM.NET API 循环文件夹并访问组件的简单示例如下：

```
OrganizationalItemItemsFilter filter = new OrganizationalItemItemsFilter(folder.Session)
{
    ItemTypes = new[] {ItemType.Component},
    Recursive = false
};
foreach (Component comp in folder.GetItems(filter))
{
    // get fields collection of component
    ItemFields fields = new ItemFields(comp.Content, comp.Schema);
} 
```

但是，如果您还没有走到这一步，我强烈建议您查看[SDL Tridion World](http://sdltridionworld.com/community/extension_overview/index.aspx)上的所有构建块（它们包含大量示例代码，可帮助您了解如何使用不同的 API）或遵循可用[的培训](http://www.sdl.com/services/education-certification/training-product/web-content-management/)并且不要忘记[文档](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/)（需要登录，有关如何访问的详细信息，请参见[http://docportal.sdl.com/sdltridion ）](http://docportal.sdl.com/sdltridion)

# php - php json_encode & AJAX 会破坏我的数组吗？

> ID：11455724
> 
> 赞同：0
> 
> 时间：2012-07-12T15:52:07.393
> 
> 标签：php, javascript, ajax

我正在获取一些数据库条目，创建一个二维数组，然后使用 AJAX 将它们传递给 js。但是当我在 javascript 中遍历数组时，这是一个“未定义”的混乱。**dbArray**的控制台日志工作正常，所以我知道 PHP/AJAX 工作正常。不知道我在循环中做错了什么......

PHP ('load-words.php):

```
$query = mysql_query("
SELECT * FROM words 
ORDER BY RAND() 
LIMIT 50
") or die(mysql_error()); 

$dbArray = array(); 
while ($row = mysql_fetch_assoc($query)) {
    $word_phrase = stripslashes($row['word_phrase']);
    $description = stripslashes($row['description']);
    // construct a 2D array containing each word and description
    $dbArray[] = array($word_phrase,$description);      
};

echo json_encode($dbArray); 
```

Javascript：

```
$.ajax({
    url: 'func/load-words.php',
    success: function(dbArray) {
        console.log(dbArray);
        var items = "<ul>";
        for (var i in dbArray) {
            items += "<li><a href='#'><b>" + dbArray[i][0] + ' : ' + dbArray[i][1] + "</a></li>";
        }
        items += "</ul>";
        div = $('#dbArray');
        div.html(items);
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T16:03:16.747

我想这是失败的，因为 jQuery 将 AJAX 响应解释为字符串，因为您的 PHP 没有输出 JSON 标头并且您的 AJAX 没有规定 JSON。这很容易测试：

```
$.ajax({
    url: 'func/load-words.php',
    success: function(dbArray) { alert(typeof dbArray); /* "string"? */ }
}); 
```

尝试

```
$.ajax({
    url: 'func/load-words.php',
    dataType: 'json', //<-- now we explicitly expect JSON
    success: function(dbArray) { alert(typeof dbArray); /* "object"? */ }
}); 
```

# java - 如何使 ExpandableListView 中的子项成为文本框而不是 Android 列表？

> ID：11455726
> 
> 赞同：2
> 
> 时间：2012-07-12T15:52:12.057
> 
> 标签：java, android, textbox, expandablelistview

所以我有一个 ExpandableListView。现在我在父列表中有 3 个项目。当我单击其中一个时，子列表（弹出子列表）。我想要的是一个文本框显示在下面而不是一个列表。

我想要一个父母的列表，但孩子的文本框。我不知道该怎么做。这是我现在的代码：

```
public void onCreate(Bundle savedInstanceState) {
    try{
         super.onCreate(savedInstanceState);
         setContentView(R.layout.activity_assignment);

    SimpleExpandableListAdapter expListAdapter =
        new SimpleExpandableListAdapter(
                this,
                createGroupList(),              // Creating group List.
                R.layout.group_row,             // Group item layout XML.
                new String[] { "Group Item" },  // the key of group item.
                new int[] { R.id.row_name },    // ID of each group item.-Data under the key goes into this TextView.
                createChildList(),              // childData describes second-level entries.
                R.layout.child_row,             // Layout for sub-level entries(second level).
                new String[] {"Sub Item"},      // Keys in childData maps to display.
                new int[] { R.id.grp_child}     // Data under the keys above go into these TextViews.
            );
        setListAdapter( expListAdapter );       // setting the adapter in the list.

    }catch(Exception e){
        System.out.println("Errrr +++ " + e.getMessage());
    }
}

//Create Headings of Assignment attributes
private List createGroupList() {
    ArrayList result = new ArrayList();

    //Create string array for Assignment Topic headings
    String[] topics = {"1", "2", "3"};

    //Iterate through array of names to lay them out correctly
    for( int i = 0 ; i < 3 ; ++i ) { 

      HashMap m = new HashMap();
      m.put( "Group Item", topics[i] ); // the key and it's value. 
      result.add( m );
    }
    return (List)result; 
```

}

```
@SuppressWarnings("unchecked")
private List createChildList() {

    ArrayList result = new ArrayList();
    for( int i = 0 ; i < 3 ; ++i ) { // this -15 is the number of groups(Here it's fifteen)
      /* each group need each HashMap-Here for each group we have 3 subgroups */
      ArrayList secList = new ArrayList();
      for( int n = 0 ; n < 3 ; n++ ) {
        HashMap child = new HashMap();
        child.put( "Sub Item", "Sub Item " + n );
        secList.add( child );
      }
     result.add( secList );
    }
    return result;
} 
```

显然，当我希望孩子成为文本框时，我正在创建一个 childList。不知道如何实现这一点。非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:39:37.180

try to place only an edittextview in "R.layout.child_row" . If it gives an error then place a textview also but make it invisible.I hope that will solve the problm

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:01:42.600

这很简单，你应该像这样创建一个名为：child_layout_row 的布局......

```
<LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android" android:layout_height="wrap_content" android:layout_width="match_parent"> 
    <EditText android:id="@+id/text_edit_child"
              android:layout_width="match_parent"
              android:layout_height="wrap_content" />
</LinearLayout> 
```

而不是`R.layout.child_row`,`R.layout.child_layout_row`就是这样....

# facebook - 在 Facebook Graph API 中获取有关位置的公共信息

> ID：11455728
> 
> 赞同：4
> 
> 时间：2012-07-12T15:52:19.903
> 
> 标签：facebook, facebook-graph-api, location, facebook-fql

我需要得到一个组中每个人的生活城市。包括不是我朋友的人。

在浏览器中看到某个不知名人士的 facebook 个人资料时，如果将其设置为公共信息，它们会显示“住在...”。它们包括指向城市对象的链接，链接中带有城市 ID。这就是我所需要的。

但是，使用我为使用 facebook graph api 而创建的 facebook 应用程序，这些信息是不公开的。我只能从我有权查看的朋友那里获得用户专有的“位置”。我给了我的应用程序所有可能的权限。

在 api explorer 中，当我将其用作 REST 时，它们几乎不会显示有关我不是朋友的人的信息。

[https://developers.facebook.com/tools/explorer/](https://developers.facebook.com/tools/explorer/)

同样在 api explorer 中，当我使用 FQL 时，它不起作用。

此查询有效，返回带有数据的 JSON：

```
SELECT uid, name FROM user WHERE username='...'; 
```

但是这个其他查询不起作用：

```
SELECT uid, name, location FROM user WHERE username='...'; 
```

他们返回一个带有错误代码的 json：

```
{
  "error": {
    "message": "(#602) location is not a member of the user table.", 
    "type": "OAuthException", 
    "code": 602
  }
} 
```

我要求提供令牌中的所有权限选项。我可以在 facebook 的浏览器版本中获取此信息。但是我怎样才能用 API 得到它呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T18:58:07.570

该`location`字段仅存在于 Graph API 表中。由于您使用的是 FQL，因此您可以使用以下位置字段：

*   `current_address`：用户的当前地址，
*   `current_location`：用户的当前位置，
*   `hometown_location`：用户的家乡（和州）。

权限：

*   **user_location**或**friends_location**查看权限：`current_location`,
*   **user_hometown**或**friends_hometown**权限查看：`hometown_location`。

*来源：[https ://developers.facebook.com/docs/reference/fql/user/](https://developers.facebook.com/docs/reference/fql/user/)*

# mysql - 业力跟踪报告：应该使用 redis-only 还是 redis-mysql 混合？

> ID：11455729
> 
> 赞同：1
> 
> 时间：2012-07-12T15:52:21.547
> 
> 标签：mysql, redis

背景：我正在构建一个 Web 应用程序，该应用程序由一个工具和一个随附的报告系统组成，以跟踪该工具的总使用情况。我想以分钟为单位显示基于每日使用量、每月使用量、每年使用量和总使用量的用户报告。想想使用分钟=“业力”点。

我计划在 redis 中实现这种使用跟踪。现在我可以

1）同时增加多个计数器（每天，每月，每年）。

或者

2）我可以只保留两组记录：

*   a) Total Karma（简单的 Redis 计数器）

*   b) MySql 中的一行，包含 Karma 和 Date，并使用 SQL 查询生成年度 Karma 和每月 Karma 的报告。

示例 b) 的优点是它不会用大量非规范化数据使 Redis 混乱。但这可能不是一个缺点，如果在需要时将这些数据移植到 MySQL 是微不足道的。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:19:50.797

没有理由不能将 redis 用作主数据存储。但是，请记住以下几点：

1.  您的工作集应该适合内存。否则就会变得一团糟。
2.  您需要定期备份您的 redis 数据，并将其与 MySQL 备份一样重要。

如果您看到您的 redis 数据增长大于单个实例，我建议您查看[presharding](http://antirez.com/post/redis-presharding.html)。

# android - Android 应用程序未显示在应用程序抽屉中

> ID：11455731
> 
> 赞同：6
> 
> 时间：2012-07-12T15:52:24.217
> 
> 标签：android, android-manifest

嘿，我在尝试在 App Drawer 中找到我的应用程序时遇到了一点问题，它显示在其他任何地方 - 最近的应用程序（通过按住 home 键），它也在应用程序下的设置中。

唯一不是在应用程序抽屉中，我的第一个猜测是清单？

该应用程序运行良好。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.zaknorris.brainhacker.v1"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="Brain Hacker Pro"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="Brain Hacker Pro" >
        <intent-filter>
            <action android:name="com.zaknorris.brainhacker.v1.Menu" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".attentionbuilder"
        android:label="Attention Builder" >
        <intent-filter>
            <action android:name="com.zaknorris.brainhacker.v1.attentionbuilder" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

图标在drawable中，一切都在那里。

不知道发生了什么：\

Java 中的新功能

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-12T15:57:14.803

你需要有这个：

```
 <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter> 
```

在您的活动元素之一内

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T16:02:34.427

将您的 AndroidManifest 更改为此：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.zaknorris.brainhacker.v1"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="Brain Hacker Pro"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="Brain Hacker Pro" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".attentionbuilder"
        android:label="Attention Builder" >
        <intent-filter>
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-05T07:56:51.957

设置您要首先打开的活动`MainLauncher=true`。`IntentFilter`这个答案是关于 Xmarin.android 的。

对于安卓 Java：

```
<intent-filter>
     <action android:name="android.intent.action.MAIN"/>
     <category android:name="android.intent.category.LAUNCHER"/>
</intent-filter> 
```

# objective-c - iOS – 子类化 MFMessageComposeViewController 以添加额外的功能

> ID：11455734
> 
> 赞同：0
> 
> 时间：2012-07-12T15:52:35.947
> 
> 标签：objective-c, ios, mfmessagecomposeview

我有子类`RMMessageComposeViewController : MFMessageComposeViewController`。我的目标是额外的功能`MFMessageComposeViewController`是能够自己呈现一个新的消息撰写控制器（在自己之上）。

所以我应该从一个`RMMessageComposeViewController`实例中提出一个新的实例。新实例的消息结果应发送给父（或“旧”）。所以我想我需要在创建孩子（“新”一个）时将父消息撰写控制器设置为委托。

有人可以帮我想一想，我需要添加哪些实例变量（父母，孩子？）如何设置子消息撰写控制器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:58:40.767

从文档：

> 消息组合接口本身是不可定制的，并且不能由您的应用程序修改。此外，在呈现界面后，您的应用程序无法对 SMS 内容进行进一步的更改。

出于安全考虑，您在此处尝试执行的操作不受明确支持：这将使应用程序更容易伪造消息。虽然您可能可以在其上推送视图，但我怀疑您的应用会因为这样做而被 App Store 拒绝。

如果 MFMessageComposeViewController 阻止应用程序一次创建多个实例，我不会感到惊讶，尽管我还没有确认这一点。

# mysql - 将字符串附加到列

> ID：11455737
> 
> 赞同：2
> 
> 时间：2012-07-12T15:52:47.570
> 
> 标签：mysql, sql, concatenation, varchar

我有一列数字，想用这些数字加上附加文本“百万”填充另一列。所以“20”会变成“2000万”。我该如何添加这个？

我试过运行 SQL 查询

```
UPDATE numbers
SET values_new=values + ' millions' 
```

和

```
UPDATE numbers
SET values_new=values + cast (' millions' as nvarchar(max)) 
```

但两者都发生错误。我还能尝试什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:42:38.313

根据您对该列是 a 的评论，`varchar`您将执行以下操作：

```
UPDATE numbers
SET values_new= cast(values as varchar(50)) + ' millions' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:55:14.870

尝试转换`values`为字符串：

```
SET values_new = cast(values as nvarchar(20)) + ' millions' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T15:56:20.700

如果列值是数字类型，则必须转换它，而不是要附加的文本：

```
UPDATE numbers 
SET values_new=cast(values as varchar(5)) + ' millions' 
```

# sql-server-2008 - SQL 案例语句

> ID：11455741
> 
> 赞同：0
> 
> 时间：2012-07-12T15:52:54.880
> 
> 标签：sql-server-2008

更新 1：这是我的数据的样子。

```
EmployeeId    EmployeeName    Active
12312         bob             0
23432         rob             1
32312         dan             0
43432         jan             1
.........................
......................... 
```

更新：

我正在照顾这样的事情。

```
EmployeeId    EmployeeName    Active
12312         bob             active
23432         rob             pending
.........................
......................... 
```

我正在尝试解决以下 sql 语句，它给我一个错误，并且不确定这是否是正确的做法......

//错误：关键字“SET”附近的语法不正确。

```
declare @currentStatus nvarchar(50)

Select EmployeeId,EmployeeName,Active,
       set @currentStatus = case when EmployeeId is not null and Active = 0 then "Active"  else "Pending" end as Status
from EmployeeTable 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:23:34.417

我认为你应该试试这个：

```
SELECT EmployeeId, EmployeeName, CASE 
       WHEN (EmployeeId IS NOT NULL AND Active = 0) THEN 'Active' ELSE 'Pending' 
       END AS [Status]  
FROM EmployeeTable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:54:54.087

```
Select EmployeeId,EmployeeName,Active,
       case when EmployeeId is not null and Active = 0 then 'Active'  else 'Pending' end as Status
from EmployeeTable 
```

如果您需要设置 @CurrentStatus 变量，那么您需要单独进行：

```
Set @currentStatus = case when EmployeeId is not null and Active = 0 then 'Active'  else 'Pending' end 
from EmployeeTable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T16:04:39.110

要获得您在更新后的问题中显示的结果，这是您唯一需要的查询。我不知道你为什么认为你需要一个局部变量来保存每一行的 case 表达式的结果。

```
SELECT 
  EmployeeId,
  EmployeeName,
  Active,
  [Status] = CASE WHEN EmployeeId IS NOT NULL AND Active = 0 
     THEN 'Active' 
     ELSE 'Pending' END
FROM dbo.EmployeeTable; 
```

**EDIT**更新了有问题的样本数据：

```
DECLARE @e TABLE(EmployeeID INT, EmployeeName VARCHAR(32), Active BIT);

INSERT @e VALUES
(12312,'bob',0),
(23432,'rob',1),
(32312,'dan',0),
(43432,'jan',1);

SELECT 
  EmployeeId,
  EmployeeName,
  Active,
  [Status] = CASE WHEN EmployeeId IS NOT NULL AND Active = 0 
     THEN 'Active' 
     ELSE 'Pending' END
FROM @e; 
```

结果：

```
EmployeeId  EmployeeName  Active  Status
12312       bob           0       Active
23432       rob           1       Pending
32312       dan           0       Active
43432       jan           1       Pending 
```

# python - 将 0 个字符写入文件描述符

> ID：11455744
> 
> 赞同：3
> 
> 时间：2012-07-12T15:53:02.437
> 
> 标签：python, windows

我有一个特定的硬件驱动程序，它需要我调用`_write(fd, 0, 0)`它的文件描述符才能触发一些特定的行为。

我希望能够从 Python 做到这一点 - 请任何人都可以提出一种实现这一目标的方法吗？

* * *

编辑（应该在开头放这个，对不起！）：

已经尝试过但不起作用的事情：

```
f.write("")
os.write(fd, "")
os.fdsync(fd) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T16:30:41.683

如果你真的需要一个空指针（多么糟糕的驱动程序设计 - ioctl 会好得多），你将不得不通过`ctypes`.

至少，

```
import ctypes
ctypes.cdll.msvcrt._write(1, 0, 0) 
```

似乎工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:06:25.970

该`os`模块作为一个函数调用`write`：

```
import os
os.write(fd, b"") 
```

# ruby - 如何在 Rails 网站上分析我的 Ruby

> ID：11455746
> 
> 赞同：0
> 
> 时间：2012-07-12T15:53:05.910
> 
> 标签：ruby, ruby-on-rails-3, twilio, fb-graph

描述我的 RoR 网站[http://www.karmabee.net](http://www.karmabee.net)的最佳方式是什么？

我正在使用非常慢的 fb_graph GEM，尤其是在检索朋友列表时。发送 SMS 文本时，Twilio 也很慢。

所以我不确定我是否可以优化这些东西。无论如何，我需要先弄清楚如何分析网站。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T17:52:18.010

NewRelic: [http://newrelic.com/](http://newrelic.com/) It looks into your rails app and tells you how much time each request spends on db queries, page rendering etc. From there you can drilldown to the bottleneck and work on optimizations.

[http://www.webpagetest.org/](http://www.webpagetest.org/) is handy for general page speed testing.

Chrome comes with the Audits tool(right click, inspect element -> Audits tab) which you can test any webpage's webpage performance and network utilization. Firefox has an addon [YSlow](https://addons.mozilla.org/en-US/firefox/addon/yslow/) does something similar.

Not sure how interaction with twilio can be profiled...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T17:57:10.990

我真的很喜欢[请求日志分析器](https://github.com/wvanbergen/request-log-analyzer/)，只需执行以下操作：

```
gem install request-log-analyzer 
```

然后在您的生产盒上，您可以执行以下操作：

```
request-log-analyzer log/production.log 
```

它会告诉你各种各样的事情，比如哪些控制器和动作很慢等等，试试看吧！

# django - Django如何测试是否发送消息

> ID：11455756
> 
> 赞同：5
> 
> 时间：2012-07-12T15:53:30.500
> 
> 标签：django, testing

我想测试提交后是否将消息发送给用户。我正在使用[django.contrib.messages](https://docs.djangoproject.com/en/dev/ref/contrib/messages/)。在手动测试（runserver）期间一切似乎都在工作，但在单元测试中我没有收到消息。

存储消息的代码：

```
messages.success(request, _('Internationalized evil message.')) 
```

应该测试消息的代码：

```
from django.contrib.messages.api import get_messages

...

def test_message_should_sent_to_user(self):
    """After successful phone number submit, message should be displayed."""
    response = self.client.post(
        reverse('evil.views.evil_data_submit'), self.valid_data)
    messages = get_messages(response.request)
    self.assertNotEqual(len(messages), 0) 
```

看起来在测试客户端发布方法调用期间没有调用任何中间件。

* * *

**@Tisho[回答后更新](https://stackoverflow.com/questions/11455756/django-how-to-test-if-message-is-sent/11457068#11457068)**

应该在 中找到消息`response.context`，甚至我的胆量都说它应该可以工作，但事实并非如此。我已经放在`import pdb; pdb.set_trace()`django/contrib/messages/context_processors.py 中，看看它是否在 test 期间被调用`client.post`，它不是。

我已经仔细检查了`TEMPLATE_CONTEXT_PROCESSORS`，`MIDDLEWARE_CLASSES`并且`INSTALLED_APPS`- 可能明天我会发现我错过了一些东西。

* * *

**重要细节**

忘了提一下，如果成功提交视图返回**HttpResponseRedirect**因此`response.context`是空的。

* * *

**解决方案**

视图返回重定向（没有上下文数据），以解决我们可以传递`follow=True`给 client.post 方法（@Tisho 建议的方法）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T17:12:58.080

在单元测试期间，该消息可以在

```
response = self.client.post(
    reverse('evil.views.evil_data_submit'), self.valid_data)
messages = response.context['messages'] 
```

如果您的视图返回重定向，`response.context`除非您通过`follow=True`，否则将为空，如下所示：

```
response = self.client.post(
    reverse('evil.views.evil_data_submit'),
    self.valid_data,
    follow=True) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T10:44:34.640

我发现的最好方法是使用模拟

[http://www.voidspace.org.uk/python/mock/patch.html#patch-methods-start-and-stop](http://www.voidspace.org.uk/python/mock/patch.html#patch-methods-start-and-stop)

```
class SimpleCommentTestDirect(TestCase):

def setUp(self):
    self._patcher1 = patch('django.contrib.messages.error')
    self.mock_error = self._patcher1.start()

def tearDown(self):
    self._patcher1.stop()

def test_error_message(self):
    self.client.get('/vote/direct/unknownapp/comment/1/up/')
    self.assertEqual(self.mock_error.call_args[0][1], 'Wrong request. Model.') 
```

BTW: There are also should be a way to get request by using mock. And by using request object get message from django.contrib.messages.get_messages

# regex - 如何在 jmeter 中正确使用 xpath 和 regexp 提取器？

> ID：11455757
> 
> 赞同：0
> 
> 时间：2012-07-12T15:53:36.753
> 
> 标签：regex, xpath, jmeter

我在 HTML 响应中有以下文本：

```
<input type="hidden" name="test" value="testValue"> 
```

我需要从上面的输入标签中提取值。
我已经尝试过 regexp 和 xpath 提取器，但都不适合我：

*   正则表达式模式

    ```
    input\s*type="hidden"\s*name="test"\s*value="(.+)"\s*> 
    ```

*   xpath 查询

    ```
    //input[@name="test"]/@value 
    ```

上面的 xpath 在 Xpath Assertion Listener 处给出错误`.. "No node matched"`。

我尝试了很多并得出结论，只有当我将 xpath 用作`//input[@name]`.

目前我正在尝试添加一个实际名称，它给出了错误`.. "No node matched"`。

谁能建议我如何解决上述问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T09:19:33.227

请看我之前的回答：

[https://stackoverflow.com/a/11452267/169277](https://stackoverflow.com/a/11452267/169277)

与您相关的部分是第 3 步：

```
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.select.Element;

String html = prev.getResponseDataAsString(); // get response from your sampler
Document doc = Jsoup.parse(html);
Element inputElement = doc.select("input[name=test]").first();
String inputValue = inputElement.attr("value");
vars.put("inputTextValue", inputValue); 
```

**更新**

所以你不要纠结于我创建的名为 Html Extractor 的 jMeter 后处理器的代码，这里是 github url：

[https://github.com/c0mrade/Html-Extractor](https://github.com/c0mrade/Html-Extractor)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T09:45:46.357

由于您使用 XPath Extractor 来解析 HTML（不是 XML）响应，因此请确保选中**Use Tidy（容错解析器）**选项（在[XPath Extractor 的控制面板](http://jmeter.apache.org/usermanual/component_reference.html#XPath_Extractor)中）。

您的 xpath 查询看起来不错，请检查上面提到的选项，然后重试。

# playframework-2.0 - 未解释可重用模板块的播放 2.0 嵌套 scala 表达式

> ID：11455760
> 
> 赞同：0
> 
> 时间：2012-07-12T15:53:43.433
> 
> 标签：playframework-2.0

```
@menu = @{
    <div class="subnav subnav-fixed">
    <ul class="nav nav-pills">
        <li class="dropdown">
            <a class="dropdown-toggle" data-toggle="dropdown" href="#">User<b class="caret"></b></a>
            <ul class="dropdown-menu">
                <li><a href="@{controllers.user.routes.Admin.list(1)}">all</a></li>
                <li><a href="@{controllers.user.routes.Admin.insert()}">create</a></li>
            </ul>
        </li>
    </ul>
    </div>
 } 
```

我定义了一个这样的函数。

> 但是 @{controllers.user.routes.Admin.list(1)} 表达式没有被解释

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T16:16:20.583

有关信息，可以删除第一行的第二个“@”：

```
@menu = {
...
} 
```

然后，'{' 和 '}' 也可以省略：

```
<li><a href="@controllers.user.routes.Admin.list(1)">all</a></li> 
```

# iphone - iOS 静态单元格、自动滚动和附加工具栏键盘

> ID：11455766
> 
> 赞同：0
> 
> 时间：2012-07-12T15:53:49.427
> 
> 标签：iphone, ios, uitableview, keyboard, scroll

我目前正在编写一个主要由表单组成的应用程序。为了完成这项工作，我使用带有 UITableViewController 的静态单元格，它可以包含 UITextField 和 UITextView。如果您使用该语言的默认配置，则一切正常。但是对于 UITextView，弱点是你不能隐藏键盘，因为点击返回键会跳转到下一行。所以我放了一个工具栏来启用关闭键盘功能（在键盘上使用 NSNotification）。但是当它滚动到包含文本字段的单元格时，该字段被工具栏隐藏，滚动不会添加工具栏的高度。截图：点击字段 https://dl.dropbox.com/u/9858108/tableViewIssue1.jpg 之前点击 [字段](https://dl.dropbox.com/u/9858108/tableViewIssue1.jpg) https [://dl.dropbox 之后。](https://dl.dropbox.com/u/9858108/tableViewIssue2.jpg)

任何人都有一个神奇的代码片段来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T07:51:43.603

A.，谢谢你的提示，我修改了代码，现在它可以工作了。这是工作代码：

```
/**
 * Cette méthode affiche la toolbar pour terminer l'adition quand le clavier est affiché
 *
 * @param NSNotification notification Notification de l'émetteur
 */
- (void)keyboardWillShow:(NSNotification *)notification {
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.3];

    CGRect frame = self.toolbarAction.frame;
    frame.origin.y = self.parentViewController.view.frame.size.height - 260.0;
    self.toolbarAction.frame = frame;

    // Cette portion de code permet de remonter le scroll (à cause de la toolbar)
    if (![[AppKit sharedInstance] isIPad]) {
        CGRect tableFrame = self.tableView.frame;
        tableFrame.origin.y = tableFrame.origin.y - 50;
        self.tableView.frame = tableFrame;
    }

    [UIView commitAnimations];

    // Action pour les keyboards
    self.toolbarDoneButton.tag = 1;
}

/**
 * Cette méthode cache la toolbar lorsque le clavier n'est plus affiché
 *
 * @param NSNotification notification Notification de l'émetteur
 */
- (void)keyboardWillHide:(NSNotification *)notification {
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.3];

    CGRect frame = self.toolbarAction.frame; 
    frame.origin.y = self.parentViewController.view.frame.size.height;
    self.toolbarAction.frame = frame;

    // Cette portion de code permet de rebaisser le scroll (à cause de la toolbar)
    if (![[AppKit sharedInstance] isIPad]) {
        CGRect tableFrame = self.tableView.frame;
        tableFrame.origin.y = tableFrame.origin.y + 50;
        self.tableView.frame = tableFrame;
    }

    [UIView commitAnimations];
} 
```

解决这个问题的有趣部分是：

```
CGRect tableFrame = self.tableView.frame;
tableFrame.origin.y = tableFrame.origin.y - 50;
self.tableView.frame = tableFrame; 
```

# sockets - Moai：通过套接字对命令做出反应的图形

> ID：11455771
> 
> 赞同：1
> 
> 时间：2012-07-12T15:54:06.463
> 
> 标签：sockets, lua, luasocket, moai

我需要一个可以根据我通过 TCP 发送给它的命令在屏幕上创建预定义形状的程序。我正在尝试监听一个端口，以便我可以使用它们。在等待命令（通过网络）之前，我有创建正方形所需的命令（我计划通过网络命令更改其属性）

问题是它没有按应有的方式创建任何图形或打开窗口..

```
require "socket"
require "mime"
require "ltn12"

host = "localhost"
port = "8080"
server, error = socket.bind(host, port)
if not server then print("server: " .. tostring(error)) os.exit() end

screen=MOAISim.openWindow ( "test", 640, 640 )

viewport = MOAIViewport.new (screen)
viewport:setSize ( 640, 640 )
viewport:setScale ( 640, 640 )

layer = MOAILayer2D.new ()
layer:setViewport ( viewport )
MOAISim.pushRenderPass ( layer )

function fillSquare (x,y,radius,red,green,blue)
a = red/255
b = green/255
c = blue/255
MOAIGfxDevice.setPenColor ( a, b, c) -- green
MOAIGfxDevice.setPenWidth ( 2 )
MOAIDraw.fillCircle ( x, y, radius, 4 ) -- x,y,r,steps
end
function onDraw (  )

fillSquare(0,64,64, 0,0,255)
end

scriptDeck = MOAIScriptDeck.new ()
scriptDeck:setRect ( -64, -64, 64, 64 )
scriptDeck:setDrawCallback (    onDraw)

prop = MOAIProp2D.new ()
prop:setDeck ( scriptDeck )
layer:insertProp ( prop )

while 1 do
   print("server: waiting for client command...")
   control = server:accept()
    command, error = control:receive()
    print(command,error)
    error = control:send("hi from Moai\n")

end 
```

它在 control = server:accept() 等待来自客户端的命令，但它没有按应有的方式打开图形窗口。是否有任何命令强制它打开或渲染

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:37:19.830

MOAI 不会在单独的线程中运行您的脚本。阻塞调用 ( `server:accept`) 或永久循环 ( `while true do`) 将阻塞您的 MOAI 应用程序，并且它看起来会冻结，而它会永远快乐地坐在您的脚本中。

所以你必须做两件事：

1.  使用非阻塞调用。在这种情况下，您需要将服务器的超时设置为 0。这会`server:accept`立即返回。检查它的返回值，看看你是否有连接。
2.  将您的 while 循环放入协程中，每次迭代产生一次。

您需要以相同的方式处理客户端，在协程循环中使用非阻塞调用。

```
function clientProc(client)
  print('client connected:', client)

  client:settimeout(0) -- make client socket reads non-blocking

  while true do
    local command, err = client:receive('*l')
    if command then 
      print('received command:', command) 
      err = client:send("hi from Moai\n")
    elseif err == 'closed' then
      print('client disconnected:', client)
      break
    elseif err ~= 'timeout' then
      print('error: ', err)
      break
    end
    coroutine.yield()
  end
  client:close()
end

function serverProc()
    print("server: waiting for client connections...")

    server:settimeout(0) -- make server:accept call non-blocking

    while true do
        local client = server:accept()
        if client then
            MOAICoroutine.new():run(clientProc, client)
        end
        coroutine.yield()
    end
end

MOAICoroutine.new():run(serverProc) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T09:47:54.187

谢谢Mud ...我发现在你回复之前，下面的协程可以工作

```
function threadFunc()
    local action
    while 1 do

    stat, control = server:accept()
    --print(control,stat)
    while 1 do
        if stat then
            command, error = stat:receive()
            print("Comm: ", command, error)
            if command then

                stat:close()
                print("server: closing connection...")
                break
            else
                break
            end
            --[[
          error = stat:send("hi")
          if error then
              stat:close()
              print("server: closing connection...",error)
              break
          end  ]] --
        else
            break
        end

    end
    coroutine.yield()
end
end 
```

不过这很有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T22:52:46.357

设置服务器套接字的超时，因为接受是一个阻塞调用。

```
server:settimeout(1) 
```

# c# - 使用 tempdata 验证方法条目并通过控制器中的多个 POST 传递信息是一种不好的做法吗？备择方案？

> ID：11455772
> 
> 赞同：2
> 
> 时间：2012-07-12T15:54:13.310
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3

首先，一些背景：

在我的控制器中，我在成功的 HTTP POST 上返回 RedirectToAction。我使用 TempData 保留用户输入的模型数据，以便我重定向到的方法可以再次使用此输入数据。

示例： 1\. 在搜索字段中输入用户 ID。2.点击按钮，执行POST，通过我的repository在数据库中找到用户，**userID存储在TempData中**，调用RedirectToAction("Edit")

```
TempData["user"] = searchViewModel.userID;
return RedirectToAction("Edit"); 
```

1.  在Edit视图上进行编辑，点击commit按钮，用户信息保存在TempData中，调用RedirectToAction("Confirm");
2.  显示在确认视图上所做的更改，单击“确认”，执行最终的 HTTP POST，并通过我的存储库服务进行更改。

这似乎运作良好。为了处理试图通过键入“../Edit/Confirm”来跳到地址栏中的页面的人，我在我的 Confirm 方法中进行了此检查：

```
if (TempData["editUserViewModel"] == null)
  return RedirectToActionPermanent("Edit"); 
```

这是处理地址栏输入的最佳方式吗？我也做 TempData.Keep("editUserViewModel") 以便刷新工作。这是处理刷新的最佳方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T19:04:36.300

对于从第 1 步到第 2 步，我建议改用参数化操作：

1.  在搜索字段中输入用户 ID。
2.  单击按钮，执行 POST，通过我的存储库在数据库中找到用户
3.  调用 RedirectToAction("Edit", new {UserId = foundUserId})

此外，在搜索时，您可能不应该进行 POST。当您正在寻找信息而不是对其进行变异时，GET 就很好了。这在您使用 tempdata 的第一个地方完全避免了 PRG 模式，因为您执行的是 GET 而不是 POST。

至于确认，还有另一种没有临时数据的方法。与其重定向到您的确认操作，不如发布到它，并返回您的确认视图模型。只有在第二个 POST 之后，您才会点击 repos 并在 POST 之后通过 Redirect 和最后的 Get 完成 PRG 模式。

用户不应该能够为您的确认操作执行任何类型的 GET，正如您的创可贴可以看到的那样。因此，根本不允许获取。从编辑表单 POST 到确认操作，返回一个视图，然后从该视图 POST 到第二个 POST 操作方法。由于这些都是同一过程的一部分，因此在该过程完成（更新存储库）之前，您不必处理重定向或临时数据。

**更新（回复评论）**

1.) 如果我删除 SearchUser 函数上的 [HttpPost] 属性，视图上的搜索按钮如何知道要调用什么？

您的搜索按钮嵌套在`<form>`HTML 元素中。您需要将表单的方法更改为 GET。如果该属性不存在，我相信 POST 是默认值。您的搜索按钮将保持不变，但表单会将用户输入的输入作为 HTTP GET 请求而不是 HTTP POST 提交：

```
<form method="GET">
    ...
    <input type="submit" value="Search" />
</form> 
```

2.）您能否澄清删除重定向以确认？我无法理解如何将重定向更改为 POST

很难向刚开始 Web 开发的人解释这一点，但本质上，每个重定向始终是一个 HTTP GET 请求。这就是为什么您必须将数据放入会话（tempdata 使用会话）以便在无状态请求之间维护它的原因。

基本上，这是您的工作流程：

1.  用户输入搜索输入并点击提交
2.  (1) 中的搜索作为 GET 请求发送到某个操作方法，该操作方法返回一个视图。
3.  (2) 中返回的视图包含`<form method="POST" action="/Users/StillNeedsConfirmationAction">`带有附加输入元素的 a。这是将用于编辑数据的表单。
4.  用户从 (3) 在表单视图中输入数据并单击提交。
5.  UsersController 上的操作方法 StillNeedsConfirmationAction 接受带有 viewmodel 对象的 HTTP POST。该操作不是重定向，而是简单地返回另一个视图，传递相同的视图模型对象。
6.  (5) 中返回的视图包含一个`<form method="POST" action="/Users/ConfirmAndUpdateAction">`. 它将为您之前的 POST 表单中的每个文本框或其他表单元素呈现隐藏的输入。
7.  用户在第二个表单上单击提交以确认字段
8.  您的 UsersController 上的操作方法 ConfirmAndUpdateAction 接受一个 HTTP POST，它与您的其他 POST 操作所做的视图模型对象相同。但是，这次它不是返回另一个视图，而是将数据保存在您的存储库中并重定向。

# c++ - 你可以在 boost::locale 中使用多个消息域吗？

> ID：11455773
> 
> 赞同：1
> 
> 时间：2012-07-12T15:54:14.573
> 
> 标签：c++, boost, internationalization, locale, boost-locale

我有许多共享许多通用库的应用程序。我正在尝试使用 boost::locale 将我的应用程序国际化。我很容易为每个通用库和每个特定应用程序创建一个单独的 .mo 文件。如果可以同时使用这样的多个消息域，我正在徘徊：

```
boost::locale::generator gen;
gen.add_messages_path(".");
gen.add_messages_domain("lib1");
gen.add_messages_domain("lib2");

std::locale::global(gen("zh_CN.UTF-8"));

.
.
.

boost::locale::gettext("Show image"); 
```

我期待 boost::locale 在 lib1.mo 和 lib2.mo 中都进行搜索，但这似乎不起作用。仅找到来自添加的第一个域的消息，在本例中来自 lib1.mo。如果我在 lib1 之前添加 lib2，则只能找到来自 lib2 的消息。

我知道您可以像这样在调用中明确使用域：

```
boost::locale::dgettext("lib2", "Show image"); 
```

这确实有效，但我想避免为每个调用指定域。我也不确定这是否适用于使用 xgettext 提取字符串。

我想做的事有可能吗？我错过了什么吗？

如果您知道，请提出任何替代方案。

我使用 msvc 9.0 (2008) 和 boost 1.48。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-20T14:06:53.147

由于没有发布此问题的答案，我认为 boost::locale 无法做到这一点。因此，我将很快概述我为实现所需功能所做的工作：

我创建了一个具有以下接口的单例类

```
class MY_GETTEXT
{
public:

    void SetPath(const std::string& i_path);
    void AddDomain(const std::string& i_domain);
    void ChangeLocale(const std::string& i_locale);
    std::string gettext(const std::string i_msg_id);
}; 
```

为您要使用的每个域调用 AddDomain，并将其添加到成员集 m_language_domains_a。ChangeLocale 做了一些语言环境操作，并在成员 m_locale 中存储了一个语言环境，这里我将忽略它的实现。

要翻译，您只需调用 MY_GETTEXT::gettext。它的实现如下所示：

```
std::string MY_GETTEXT::gettext(const std::string i_msg_id)
{
    BOOST_FOREACH(const std::string& domain , m_language_domains_a)
    {
        if (boost::locale::translate(i_msg_id).str(m_locale, domain) != i_msg_id)
        {
            return boost::locale::translate(i_msg_id).str(m_locale, domain);
        }
    }

    return i_msg_id;
} 
```

# ios - Switch 语句 VS If 语句

> ID：11455774
> 
> 赞同：2
> 
> 时间：2012-07-12T15:54:16.880
> 
> 标签：ios, if-statement, switch-statement

我的项目中有很多 if 语句、嵌套 if 语句和 if-else 语句，我正在考虑将它们更改为 switch 语句。其中一些将具有嵌套的 switch 语句。我知道在编译方面，switch 语句通常更快。我的问题是，通常更喜欢使用哪个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T16:22:36.710

这是一个重要的区别

switch 语句接受一个**具有整数结果的表达式，**并将其与具有**常量值**的 case 语句相匹配。案例语句不能是表达式......所以当你需要从一组确定的值中评估一个整数结果时，一个 switch 语句是有意义的。

IMO，嵌套的 switch 语句可能会给你的代码增加混乱......它不仅仅是可读的。

这是我使用 switch 语句为 UIPickerView 组件返回适当数据源的示例

```
- (NSMutableArray *) datasourceForComponent:(NSInteger)component
{
    switch (component) {

        case HoursPickerComponent: 
            return _hours;
            break;

        case MinutesPickerComponent:            
            return _mins;
            break;

        case DaysPickerComponent:            
            return _days;
            break;

        default:
            return nil;
            break;

   }    
} 
```

这是我用来避免魔术字符串或时髦的条件逻辑的常见模式。由于枚举返回一个 int 结果，我经常将它们用于路由和决策点。在这里，我为不同的数据源创建了一个枚举：

```
typedef enum
{
    HoursPickerComponent = 0,

    MinutesPickerComponent = 1,

    DaysPickerComponent = 2

} MedicationPickerComponents; 
```

然后我的 UIPickerView 组件的委托代码看起来像

```
- (NSInteger)pickerView:(UIPickerView *)pickerView 
numberOfRowsInComponent:(NSInteger)component
{
    return [[self datasourceForComponent:component] count];
} 
```

我觉得这是一个很好的例子，说明如何使用开关作为决策点来使代码更具可读性。请注意，我并没有在 case 语句中放入很多逻辑……这样您就可以通过查看它来轻松判断此 switch 语句的意图。如果我有更复杂的代码要运行，我只需将其存入一个方法并从我的 case 语句中调用该方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T16:01:21.437

如果控制流取决于具有超过 1 或 2 个值的变量的值，则开关更有意义，并且更易于阅读和维护。我在这里没有引用的来源，但我相信他们无论如何都会编译成相同的本机代码，所以这不是性能或效率的问题。我认为您应该为可读性编写代码，并且由于您有更多条件，因此开关比多个 if 更可取。

# google-docs-api - 为 Google Doc 修改 ACL 时不发送电子邮件通知

> ID：11455778
> 
> 赞同：2
> 
> 时间：2012-07-12T15:54:27.633
> 
> 标签：google-docs-api, google-drive-api

我正在尝试找到 Java 的做法： [https ://developers.google.com/google-apps/documents-list/#email_notifications_of_acl_changes](https://developers.google.com/google-apps/documents-list/#email_notifications_of_acl_changes)

`POST [https://docs.google.com/feeds/default/private/full/document:12345/acl?send-notification-emails=false](https://docs.google.com/feeds/default/private/full/document:12345/acl?send-notification-emails=false)`

这样在添加/修改 ACL 时不会发送电子邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:27:18.223

您可以使用更新的 Drive API 执行相同的任务，该 API 在[https://developers.google.com/drive/v2/reference/permissions/insert](https://developers.google.com/drive/v2/reference/permissions/insert)上有完整的 Java 示例。

你必须使用的`setSendNotificationEmails`方法`Drive.Permissions.Insert`。

# .htaccess - URL重写不起作用？

> ID：11455782
> 
> 赞同：0
> 
> 时间：2012-07-12T15:54:41.703
> 
> 标签：.htaccess, url-rewriting

我是新来的。

我试图重写我网站上的一些网址只是出于某种原因，无论我尝试什么，我都无法让它们工作！

我的服务器上的目录有以下...

索引.php

用户配置文件.php

.htaccess

在我的 index.php 上，有许多用户都有一个查看更多详细信息按钮，该按钮链接到用户配置文件并使用 GET 方法发布 ID ......

[http://mysite.com/user-profile.php?userID=2&firstName=Martin&lastName=FAM](http://mysite.com/user-profile.php?userID=2&firstName=Martin&lastName=FAM)

但是我想像这样格式化它们......

[http://mysite.com/people/2/Martin/FAM](http://mysite.com/people/2/Martin/FAM)

```
Options +FollowSymLinks 
RewriteEngine On
RewriteRule ^([^/]*)/([^/]*)/([^/]*)$ /user-profile.php?userID=$1&firstName=$2&lastName=$3 [L] 
```

任何人都可以给我一些理由，为什么这不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:00:00.610

正则表达式应该是

```
^people/([^/]*)/([^/]*)/([^/]*)$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-27T06:34:59.617

您需要确保在 Apache 的 httpd.conf 文件的文档根目录中设置了此选项：

```
AllowOverride All 
```

# jquery - 孩子的jQuery动态选择器 - 完全困惑

> ID：11455786
> 
> 赞同：0
> 
> 时间：2012-07-12T15:54:55.817
> 
> 标签：jquery, function, selector, parent

我有两个 div (#tweeta" 和 "#tweetb")。每个都有一个子 div，类为 ".container"。

我试图在将一些文本写入“.container”div 的函数中动态传递 div 名称。这是功能。当我特别像这样引用其中一个父 div 时，此方法有效：

```
jQuery(function($) {
var itema = 0;
var itemsa = $('#my-tweets li:odd').length;

function tickInterval(curr, total, ID) {
    if(curr < total) {
        var text = $('#my-tweets li:odd:eq('+curr+')').html();
        $('#tweeta > .container').html(text);
        type(curr, total, text, ID);
    } else if(curr == total) {
        curr = 0;
        tickInterval(curr, total, ID);      
    }
}

tickInterval(itema, itemsa, tweeta);

}); 
```

但是，当我尝试用变量“ID”替换显式 id 时，要么该函数同时应用于 #tweeta 和 #tweetb，要么我收到一条错误消息（“抛出异常但未捕获”）...

`$('#' + ID).children('.container').html(text);`

`$('#' + ID).find('.container').html(text);`

`$('#' + ID > '.container').html(text);`

`$('div[id='+ ID +'] > div').html(text);`

我现在很困惑，关于在不将父 div id 显式写入函数的情况下选择“.container”div 的最佳方法。

如果你能帮助我，我谢谢你！

阿马尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:58:18.517

您忘记了函数第三个参数的引号，它应该是：

```
tickInterval(itema, itemsa, 'tweeta'); 
```

# animation - gif动画在刷新时不播放

> ID：11455788
> 
> 赞同：17
> 
> 时间：2012-07-12T15:54:56.790
> 
> 标签：animation, refresh, gif, autoplay, browser-refresh

我第一次查看带有动画 .gif 的页面时，它在页面加载时播放良好（持续约 2 秒）。

刷新 (F5) 时，.gif 不再播放，仅显示 gif 动画的最后一帧。

我能做些什么来确保它每次都能播放吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-12T10:49:37.910

For the PHP the much better option then using `date("Ymdgis");` is using `time()`, like this:

```
<img src="picturePath.gif?<?php echo time();?>" /> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-20T13:17:59.387

影响每个浏览器的奇怪行为。
我通常用这个脚本手动刷新它（它使用 jQuery）

```
<img id="gif_animata" src="picturePath.gif">
<script type="text/javascript">
    var gifSource = $('#gif_animata').attr('src'); //get the source in the var
    $('#gif_animata').attr('src', ""); //erase the source     
    $('#gif_animata').attr('src', gifSource+"?"+new Date().getTime()); //add the date to the source of the image... :-) 
</script> 
```

这将刷新图像的 src 添加当前日期，因此浏览器将重新加载它，认为这是一个新图像。

否则以 PHP 方式（我更喜欢这个）：

```
<img src="picturePath.gif?<?php echo date("Ymdgis");?>" />

//for the browser it will seems that's a new picture!
<img src="picturePath.gif?2012092011207"> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-25T02:06:19.757

对我有用的解决方法是使用 Javascript 手动重新加载 GIF

在 CSS 上实现的 GIF（背景图像）

```
var element = document.getElementById(name);
element.style.backgroundImage = "none";  
element.style.backgroundImage = "url(imagepath.gif?"+new Date().getTime()+")"; 
```

在 HTML 上实现的 GIF（img 标签）

```
var element = document.getElementById(name);
element.src = "";  
element.src = "imagepath.gif?"+new Date().getTime(); 
```

感谢@sekmo

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-06T19:15:41.610

这行得通，只需要它下面的一行，我建议一开始不要填写`<img>`src 属性，这样页面就不会尝试加载任何不必要的资源。

```
<img id="gif" src=""/>
<script>document.getElementById('gif').src="path_to_picture.gif?a="+Math.random()</script> 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-01T22:57:22.960

可能是您的浏览器仅显示缓存版本。尝试按住 shift 并刷新，看看它是否有效。

# iphone - NSURLRequest/NSURLConnection 不工作？

> ID：11455789
> 
> 赞同：1
> 
> 时间：2012-07-12T15:54:58.330
> 
> 标签：iphone, objective-c, cocoa-touch

我得到下面的代码来调用 PHP 脚本，由于某种原因它说连接成功，但实际上没有调用我的脚本，因为我没有收到电子邮件:-(

没有调用任何 NSURLConnectionDelegate 方法。

在 iPhone 5.x 设备和模拟器上进行测试。

有什么建议/想法吗？非常感谢你！

```
NSString* url = [NSString stringWithFormat:@"http://www.lenniedevilliers.net/mail.php?subject=%@&to=%@&body=%@", subjectLine, toAddress, emailBody ];

NSLog(@"web service URL: %@", url);

NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString: url] cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];
    connection = [[NSURLConnection alloc] initWithRequest: request delegate:self];
NSLog(@"connection: %@", [connection debugDescription]);
if (connection) {
    NSLog(@"Connection succeeded");
} else {
    NSLog(@"Connection failed");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T22:02:46.243

```
NSString* url = [NSString stringWithFormat:@"http://www.lenniedevilliers.net/mail.php?subject=%@&to=%@&body=%@", subjectLine, toAddress, emailBody ];

NSLog(@"web service URL: %@", url);

//add the following or something like
[url setString:[url stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]; 

NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString: url] cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];

//modify the following    
connection = [[NSURLConnection alloc] initWithRequest: request delegate:self startImmediately:YES]; 
NSLog(@"connection: %@", [connection debugDescription]);
if (connection) {
    NSLog(@"Connection succeeded");
} else {
    NSLog(@"Connection failed");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:39:27.030

我敢打赌，您的电子邮件正文中有一些内容不能安全地通过 url 发送

```
NSString* url = [NSString stringWithFormat:@"http://www.lenniedevilliers.net/mail.php?subject=%@&to=%@&body=%@", subjectLine, toAddress, emailBody ]; 
```

所以说您的电子邮件正文包含**&**，这会破坏您拥有的代码。您要么需要转义消息正文，要么通过请求正文发送它，而不是通过 URL 传递它。我可能是错的，但我敢打赌就是这样。你的代码看起来不错，我敢打赌它的数据；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T21:39:46.767

您是否使用 NSURLConnection 的特定委托函数？

```
- (void)connection:(NSURLConnection*)connection didReceiveResponse:(NSURLResponse *)response
{
    NSLog(@"Did Receive Response %@", response);
    responseData = [[NSMutableData alloc]init];
}
- (void)connection:(NSURLConnection*)connection didReceiveData:(NSData*)data
{
    //NSLog(@"Did Receive Data %@", data);
    [responseData appendData:data];
}
- (void)connection:(NSURLConnection*)connection didFailWithError:(NSError*)error
{
    NSLog(@"Did Fail");
}
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSLog(@"Did Finish");
    // Do something with responseData
} 
```

# html - CSS：如何在使用border-radius时使用CSS正确删除边框？

> ID：11455794
> 
> 赞同：14
> 
> 时间：2012-07-12T15:55:10.937
> 
> 标签：html, border, css

我有一个这样的 div： [Jsfiddle](http://jsfiddle.net/hwg1/xg25s/)

如何在没有丑陋的弯曲半径的情况下删除所有左侧边框？

在CSS中可能吗？或者有没有办法做到这一点？（还是我太挑剔了？）

非常感谢，

哈雷

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-05-22T11:36:06.460

```
-webkit-border-radius: 0;
-moz-border-radius: 0;
border-radius: 0; 
```

这将覆盖任何边界半径 css。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-12T15:58:14.727

这是你想要的？

```
border-radius: 0px 6px 6px 0px; 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-07-12T15:59:24.667

如果要删除边框，请使用：border：0px；

# coding-style - 如何将 .txt 文档转换为所有大写字母？

> ID：11455795
> 
> 赞同：1
> 
> 时间：2012-07-12T15:55:11.870
> 
> 标签：coding-style

我们有一个编码约定，使用一种名为 PowerOn 的晦涩专有语言（想想脚本化的 PL/1 语言），它**要求所有编码文本都大写**。落后于一些以前的开发人员，人们认为他们会从 Java 等其他语言**继承他们的驼峰式习惯**。是否有任何工具可以将所有文本转换为大写所有文本？

最坏的情况是，我可以在 .Net 中做一些事情来实现这一点。我只是想避免重新发明轮子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:57:18.877

```
tr "[a-z]" "[A-Z]" <code.poweron >newcode.poweron 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T16:00:23.633

如果你在 linux 上，你有很多选择。其中两个是：

```
1\. dd if=input.txt of=output.txt conv=ucase
2\. tr '[:lower:]' '[:upper:]' < input.txt > output.txt 
```

# javascript - 如何获取三角形的数组，3D 对象是从哪里构建的？

> ID：11455797
> 
> 赞同：2
> 
> 时间：2012-07-12T15:55:20.970
> 
> 标签：javascript, webgl, three.js

我想获得三角形的数组，但在几何对象中找不到它。

* * *

.faces 不是三角形。如果我创建一个立方体，那么一张脸看起来像这样：

```
"faces": [{
    "a": 0,
    "b": 2,
    "c": 3,
    "d": 1,
    ... 
```

这些是多边形，而不是面。 ![面孔](../Images/e866da1c2a8187ed00c1de8fc13813df.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:58:39.193

这不是“.faces”的工作吗？见[这里](http://mrdoob.github.com/three.js/docs/49/#Geometry)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:02:50.920

如果您将 a 推`Face4`入`faces`，那么在调用面时您将得到一个四边形。如果你推进`Face3`，`faces`那么你会得到一个三角形回来。如果您正在接听电话，您按下`d`了。`faces``Face4`

如果您要问如何从四边形获得 tris，那是一个不同的问题。

基本上，知道四边形的“顺序”是`A B C D`您通常可以说的，`A B C`并且`A C D`是共享四边形近似法线的三角形。（我看到的是近似的，因为四边形可能会稍微倾斜。点的共面越少，倾斜越明显，法线的差异就越大。）

现在，还有其他组合可以使用。最简单的方法是`A B C D`在一些纸上画出来，并记下方向（顺时针或逆时针）。只要您的 tris 也是同一个方向（无论是哪个方向），那么您就可以了。显然，如果`A B C`是一个有效的 tri，那么`B C A`和 也是如此`C A B`。`A C D`存在`C D A`和 也是如此`D A C`。但是，如果您也愿意，也可以将其拆分为另一个对角线，并形成`A B D`and `B C D`。按照前面的逻辑，您可以为这些创建其他相同的三角形。

# wpf - LoadedEvent 的路由事件类处理程序不适用于大多数类

> ID：11455800
> 
> 赞同：4
> 
> 时间：2012-07-12T15:55:27.177
> 
> 标签：wpf, event-handling, routed-events

我正在尝试为所有 Loaded 事件注册处理程序：

```
EventManager.RegisterClassHandler(typeof(UIElement), FrameworkElement.LoadedEvent, new RoutedEventHandler(OnRoutedEvent), true);
EventManager.RegisterClassHandler(typeof(ContentElement), FrameworkContentElement.LoadedEvent, new RoutedEventHandler(OnRoutedEvent), true);
EventManager.RegisterClassHandler(typeof(UIElement), FrameworkElement.UnloadedEvent, new RoutedEventHandler(OnRoutedEvent), true);
EventManager.RegisterClassHandler(typeof(ContentElement), FrameworkContentElement.UnloadedEvent, new RoutedEventHandler(OnRoutedEvent), true); 
```

不幸的是，我的处理程序只为 Window 和 DatePicker 的后代调用。它不适用于任何其他类型。

~~谁能解释这种行为？~~这是一个[错误](http://connect.microsoft.com/VisualStudio/feedback/details/511753/window-loadedevent-doesnt-work-properly-when-used-to-register-a-class-event-handler)，遗憾的是他们选择忽略它。

是否有其他方式可以通知应用程序/窗口中的任何新元素？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T13:23:11.650

也许您可以定义一个`AttachedProperty/Behavior<T>`that uses `FrameworkPropertyMetadataOptions.Inherits`，然后在您的根元素上指定它，并在行为挂钩`Loaded/Unloaded`每个实例上的事件

# java - 将 Java 套接字文件描述符传递给 C 二进制文件的最有效方法

> ID：11455803
> 
> 赞同：1
> 
> 时间：2012-07-12T15:55:33.793
> 
> 标签：java, c, sockets, java-native-interface, file-descriptor

我似乎无法在任何地方找到答案，我试图在 Java 中获取一个套接字，并交出它的文件描述符编号，以便我可以在 C 二进制文件中使用它（fd 将作为参数）。

我已经使用反射获得了 FileDescriptor ......但无法在任何地方访问实际数字。

我知道其他人建议使用 JNI，但如果可能的话，我想将它保留在 Java 中（并且无法完全弄清楚如何去做）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T16:07:54.017

在 Java 7 中，您可以将 a 强制`SocketInputStream`转换为 a `FileInputStream`，然后调用`getFD()`以获取`FileDescriptor`对象。

然后您可以使用反射来访问 FileDescriptor 对象的`private int fd`字段。（您使用该`Class.getDeclaredField(...)`方法获取字段，调用`Field.setAccessible(true)`，然后使用 获取该字段的值`Field.getInt(...)`。）

* * *

请注意，这样做可能会使您的代码平台依赖。无法保证特定私有字段将出现在较旧的......或即将推出的 Java 版本中，或其他供应商/供应商完成的 Java 实现中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-03T02:16:05.613

Stephen C 的回答解决了如何获取 a `FileDescriptor`，但这是从该对象获取文件描述符编号的方法。在 Windows 上，`FileDescriptor`使用`long handle`而不是在`int fd`内部使用，因此此方法首先检查是否`handle`已使用，如果使用则返回，否则返回返回`fd`。我没有在 OP 使用的套接字上对此进行测试，但我想`Windows`JVM 仍然使用`handle`.

```
public static long fileno(FileDescriptor fd) throws IOException {
    try {
        if (fd.valid()) {
            // windows builds use long handle
            long fileno = getFileDescriptorField(fd, "handle", false);
            if (fileno != -1) {
                return fileno;
            }
            // unix builds use int fd
            return getFileDescriptorField(fd, "fd", true);
        }
    } catch (IllegalAccessException e) {
        throw new IOException("unable to access handle/fd fields in FileDescriptor", e);
    } catch (NoSuchFieldException e) {
        throw new IOException("FileDescriptor in this JVM lacks handle/fd fields", e);
    }
    return -1;
}

private static long getFileDescriptorField(FileDescriptor fd, String fieldName, boolean isInt) throws NoSuchFieldException, IllegalAccessException {
    Field field = FileDescriptor.class.getDeclaredField(fieldName);
    field.setAccessible(true);
    long value = isInt ? field.getInt(fd) : field.getLong(fd);
    field.setAccessible(false);
    return value;
} 
```

# sql-server-2000 - 带代理的sql server 2000备份

> ID：11455804
> 
> 赞同：0
> 
> 时间：2012-07-12T15:55:39.347
> 
> 标签：sql-server-2000, backup

我有这个脚本来备份我的 sql server 2000 数据库：

```
BACKUP DATABASE [CRM] TO DISK = N'd:\CRM_BACKUP\crm.bak'  
WITH NOINIT, NOUNLOAD, NAME = N'GUY_CRM_BACKUP', NOSKIP, STATS = 10, NOFORMAT 
```

我希望备份几天。

我想过给备份的名称在月份中的某一天

例如`crm01.bak`，`crm02.bak`.... crm30 或`crm31.bak`.

请问我该怎么做？

TIA

盖伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:30:39.697

您可以设置`RETAINDAYS`希望保留该备份的天数。由于您使用的是`NOSKIP`(and `NOFORMAT`)，SQL Server 将不会覆盖该备份，直到它过期。那时，您还可以像您提到的那样制定一个命名标准，或者设​​置一个维护计划来删除超过某个年龄的备份。

# project-server - Project Server 2007 问题和风险列表

> ID：11455809
> 
> 赞同：0
> 
> 时间：2012-07-12T15:55:44.290
> 
> 标签：project-server, project-server-2007

我有一个 EPM 2007 部署，但我在处理问题和风险列表时遇到了困难......你看，如果我创建一个新的风险或分配给我的问题，当我转到 pwa 的根网站时，它说我没有分配给我的风险或问题！！！我和所有用户...

我认为这可能是由于某些列表或站点自定义而发生的，因此我使用默认模板（由 MS 提供，非常基本的模板...）创建了一个新项目，并创建了新的风险和问题，但错误仍然存​​在。 .

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T17:20:15.897

我们最终在 MS 开了一张票，他们修好了……遗憾的是，他们没有透露问题所在……

# python - 使用 zip 或数组对列表进行操作

> ID：11455811
> 
> 赞同：1
> 
> 时间：2012-07-12T15:55:45.027
> 
> 标签：python, list, numpy, sum

我想知道如果我想对名为 l1 和 l2 的两个列表的元素（逐个元素）求和，最好做什么：

```
l3 =  [i + j for i, j in zip(l1,l2)] 
```

或将列表转换为数组并进行简单的求和

```
from numpy import array
l3 = list(array(l1) + array(l2)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T16:01:00.373

这可能取决于列表有多大。

`numpy`专为对大量数据进行高效操作而设计，但由于它不是本机 Python 的一部分，因此引入了一些恒定的开销。

另外，如果您追求性能，[`itertools.izip`](http://docs.python.org/library/itertools.html#itertools.izip)可能会给您带来更好的速度。

* * *

对于随机列表，由于简单/可读性，我可能会选择`[i+j for i,j in izip(l1, l2)]`它们，假设它们不够大，不足以带来显着的性能问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T16:19:49.157

您还可以使用：

```
from operator import add
map(add, list1, list2) 
```

这使用了潜在的优化`operator.add`并避免使用`zip`/ `izip`，这会将输入截断为最短的序列，从而允许错误以静默方式失败 - 而`map`(well `operator.add`) 将引发异常。

可能是你在纯 Python 中能做的最好的事情......

# python - 在模板中使用 slugify

> ID：11455812
> 
> 赞同：14
> 
> 时间：2012-07-12T15:55:47.533
> 
> 标签：python, django, django-templates

我想拥有`SEO-friendly URL`我当前的网址`urls.py`：

```
(ur'^company/news/(?P<news_title>.*)/(?P<news_id>\d+)/$','CompanyHub.views.getNews') 
```

我在模板中使用它：

```
{% for n in news %}
     <a href="{% url CompanyHub.views.getNews n.title,n.pk %}" >{{n.description}}</a>
{% endfor %} 
```

我用`news_id`那个`get`新闻对象`PK`。我想转换这个网址：

```
../company/news/tile of news,with comma/11 
```

至：

```
../company/news/tile-of-news-with-comma/11 
```

通过在模板中做这样的事情：

```
{% for n in news %}
      <a href="{% url CompanyHub.views.getNews slugify(n.title),n.pk %}" >{{n.description}}</a>
{% endfor %} 
```

我检查了这些问题： [question1](https://stackoverflow.com/questions/1007481/how-do-i-replace-whitespaces-with-underscore-and-vice-versa) [question2](https://stackoverflow.com/questions/4241757/python-django-how-to-remove-extra-white-spaces-tabs-from-a-string) [question3](https://stackoverflow.com/questions/1563088/urls-stored-in-database-for-django-site)和这篇[文章](http://www.wellfireinteractive.com/blog/fast-and-beautiful-urls-with-django/)，但他们保存了一个`slugify field`数据库，而我想按需生成它。此外，我想通过`news_id`.

我认为这个[问题](https://stackoverflow.com/questions/1866261/dynamic-seo-friendly-urls)很好，但我不知道如何使用`news_id`来获取我的`news object`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-12T17:03:35.717

这将生成所需的 url：

```
{% for n in news %}
      <a href="{% url CompanyHub.views.getNews n.title|slugify n.pk %}" >{{n.description}}</a>
{% endfor %} 
```

上面的示例保存`slugify_field`在数据库中，因为他们稍后会搜索它。否则，在数据库中，您将有一个正常的标题，并在代码中使用 slugified 标题进行搜索。没有简单的方法来比较它们。但是你解释的方式更简单。你会有这样的看法：

```
def news(request, slug, news_id):
    news = News.objects.filter(pk=news_id) 
```

**更新**：要在 slugify 中使用 unicode 符号，您需要先进行转换。看看这个：[如何使 Django slugify 与 Unicode 字符串一起正常工作？](https://stackoverflow.com/questions/702337/how-to-make-django-slugify-work-properly-with-unicode-strings). 它使用[Unidecode](http://pypi.python.org/pypi/Unidecode)库

然后添加一个自定义过滤器：

```
from unidecode import unidecode
from django.template.defaultfilters import slugify

def slug(value):
    return slugify(unidecode(value))

register.filter('slug', slug) 
```

然后在你的模板中使用这个：

```
{% load mytags %}
<a href="{% url CompanyHub.views.getNews n.title|slug n.pk %} 
```

这是一个例子：

```
{{ "影師嗎 1 2 3"|slug}} 
```

呈现为：

```
ying-shi-ma-1-2-3 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-12T15:58:26.593

你有没有试过`n.title|slugify`，看看这是否适合你。

参考：[https ://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#slugify](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#slugify)

**注意：**虽然这是可能的，但只要确保'slugified'元素永远不会用于路由的任何部分......（即，纯粹用于显示）

# powershell - PowerCLI：任务自动化

> ID：11455814
> 
> 赞同：0
> 
> 时间：2012-07-12T15:55:51.293
> 
> 标签：powershell, scripting, vmware, powercli

我有一个脚本，我想让它每周一和周四自动运行。我很好奇是否可以在 PowerCLI 上执行此操作，或者我是否必须创建一个 .bat 来实现此目标。我进行了一些搜索并了解到这段代码在我的脚本中是必需的：

```
add-pssnapin VMware.VimAutomation.Core # <----------

$server = $args[0]
$date = get-date
new-snapshot -vm $server -name "Auto Created via Powershell" -description $date
get-snapshot -vm $server | sort -property created -desc | select -skip 6 | foreach-object{remove-snapshot $_ -confirm:$false} 
```

我还需要什么才能让这个代码在每周一和周四运行？

谢谢！

编辑：我将在哪里编辑任务调度程序以允许它运行？我提供了我所在位置的图像（我也是一个视觉人：P）

![在此处输入图像描述](../Images/b75294e685fc8640228dc8c7ec500d69.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:37:18.573

为什么不直接使用 Windows 的[任务计划](http://windows.microsoft.com/en-us/windows7/Schedule-a-task)程序来执行您的脚本：

```
powershell.exe -file yourscript.ps1 
```

使用PowerShell /？了解更多选择

# java - 有没有更好的方法来处理从某些数据源抛出的异常？

> ID：11455815
> 
> 赞同：0
> 
> 时间：2012-07-12T15:55:52.697
> 
> 标签：java, database, exception, jdbc, exception-handling

我目前正在开发一个对数据库进行大量工作的项目。

我在代码中多次重复使用的一个核心习惯用法如下。

我的问题是，有没有更好的方法来处理 getTransformedResults 方法的每一步的异常？这是处理 SQLExceptions 的正确方法，还是有更好、更简洁的方法？

感谢您的输入！

```
public ResultType handleResultSet(ResultSet rs);

public ResultType getTransformedResults(String query) throws SQLException {
  ResultType resultObj = new ResultType();

  Connection connection = null;
  try { 
    connection = dataSource.getConnection();
  } catch (SQLException sqle) {
    // cleanup 
    throw sqle;
  }

  Statement stmt = null;
  try { 
    stmt = connection.createStatement();
  } catch (SQLException sqle) {
    try { connection.close() } catch (SQLException dontCare) {}
    // cleanup
    throw sqle;
  }

  ResultSet rs = null;
  try { 
    ResultSet rs = stmtm.executeQuery(query);
    resultObj = handleResultSet(rs);
  } catch (SQLException sqle) {
    // cleanup
    throw sqle;
  } finally {
    if (rs != null) try { rs.close() } catch (SQLException dontCare) {}
    try { stmt.close() } catch (SQLException dontCare) {}
    try { connection.close() } catch (SQLException dontCare) {}
  }

  return resultObj;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:01:26.003

Java 7 有一些你可能会喜欢的结构，我认为你可以使用 try/finally 而不用 catch（它模仿你的 catch 和 rethrow）。

此外，由于您已经捕获并处理了 SQL 异常，也许您应该将它作为其他东西重新抛出——也许作为运行时异常——这使得在主入口点捕获所有运行时异常变得更容易，而不是必须每次访问数据库时都要处理异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:03:07.083

就我个人而言，我可能会通过传入接口实现而不是子类化来处理这个问题。

最终，如果您只处理该方法中的异常，而不污染主线代码，您还能做什么，这样做的意义何在？您可能会使每个步骤更加细化，因此它不是全部在一种方法中，而是除此之外......

您可能会考虑一个特定于应用程序的异常，它可以使测试和配置更清晰，但这取决于上下文。

* * *

*接口思路的澄清*

您将拥有一个实现结果集处理和查询字符串检索的接口，而不是子类化，因此有两种方法——一种用于查询，一种用于结果。

您会将实现传递给您现在拥有的大部分实例，但它采用接口而不是查询字符串。其余代码基本相同，但它从接口impl获取查询字符串，并调用接口impl的结果处理方法，保存结果直到清理。

它与您现在的基本相同，但 IMO 更清洁，因为任何类都可以实现该接口，包括匿名类或您域中的其他类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T16:13:07.753

[org.springframework.jdbc.core.JdbcTemplate](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html) - “...简化了 JDBC 的使用并有助于避免常见错误。”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T16:13:18.853

您可能对使用完全针对此类目的的[Apache Commons DbUtils感兴趣。](http://commons.apache.org/dbutils/examples.html)

在尝试使用更复杂的情况时它有一些缺点，`JDBC`但对于常规使用它应该绰绰有余。

除此之外，您的代码包含太多的 try/catch 块，可以简化为如下所示：

```
public interface ResultSetHandler<ResultType> {
     ResultType handleResultSet(ResultSet rs);
}

public <ResultType> ResultType getTransformedResults(String query, ResultSetHandler<ResultType> rsh) throws SQLException {      
  Connection connection = null;
  Statement stmt = null;

  try { 
    connection = dataSource.getConnection();
    stmt = connection.createStatement();
    ResultSet rs = stmtm.executeQuery(query);
    return rsh.handleResultSet(rs);
  } catch (SQLException sqle) {
    // cleanup 
    throw sqle;
  } finally {
    if(stmt != null) {
      statement.close(); // closes also resultSet
      connection.close();
    }
  }
} 
```

尽管 Apache Commons DbUtils 库在底层做的完全一样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T16:49:36.450

```
Connection c = null;
Statement s = null;
ResultSet r = null;

try {
  c = datasource.getConnection();
  s = c.createStatement();
  r = s.executeQuery(sql);
  rsh.handleResultSet(r);
}
finally {
  DbUtils.closeQuietly(r);
  DbUtils.closeQuietly(s);
  DbUtils.closeQuietly(c);
} 
```

注意 DbUtils 是 apaache commons-dbutils，closeQuietly 等价于：

```
try {
  c.close();
}
catch (SQLException e) {
} 
```

说了这么多，我推荐使用spring的jdbc特性：

```
JdbcTemplate template = new JdbcTemplate(dataSource);
List data = template.query(sql, new RowMapper() { ... }); 
```

RowMapper 是一个接口，其实现的任务是将结果集中的当前位置转换为对象。因此，通过简单地给出如何处理一行的逻辑，您可以自动收集这两行代码中所有行的对象列表以及映射行所需的任何内容。还有其他方法可以让您以不同的方式使用 ResultSet，但这是人们使用它的一种非常标准的方式。

所有的连接和语句管理都为您完成，您完全不用担心资源管理。

# java - 通过命令行参数读取文件名

> ID：11455816
> 
> 赞同：0
> 
> 时间：2012-07-12T15:55:58.923
> 
> 标签：java

我最近在一本书中遇到了以下代码。它说我们可以通过编写如下第一行的命令行来引用我们想要读取的文件。但是，这行会引发错误。有人可以建议，因为我以前从未遇到过这个吗？

谢谢

```
java ShowFile c:/Users/Bosra/Desktop/Sample.txt
import java.io.*;

public class ShowFile
{
public static void main(String args[])
{
    int i;
    FileInputStream fin;

    //first confirm that a filename has been specified
    if(args.length!=1)
    {
        System.out.println("Usage:ShowFile Filename");
        return;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T15:58:27.657

第一行是编译文件后您应该在命令行中输入的内容——它不属于文件本身。

# jquery - 使用 jQuery 预加载和更改图像 - 无法使用我自己的脚本

> ID：11455826
> 
> 赞同：0
> 
> 时间：2012-07-12T15:56:44.630
> 
> 标签：jquery, html, ajax, refresh

我有以下代码，我在上一个问题上得到了帮助（http://stackoverflow.com/questions/10920514/using-ajax-jquery-to-refresh-an-image）

它的工作方式是 image_feed.php 返回一个图片的 url。下面的代码片段下载了此图像，然后将其与页面上的现有图像交换。

我现在改变了我的应用程序的工作方式，并且图像的 URL 不会像以前那样改变，所以我可以绕过 image_feed.php 脚本。

所以我有一个图像，image.php?id=11，我需要下载这个图像，等待它完成加载，然后将它与#camera_image_changer 图像交换。

我正在为两件事而苦苦挣扎。一是记住脚本实际上是如何再次工作的，这样我就可以直接给它图像 URL，其次防止它缓存图像。

任何帮助将不胜感激。

谢谢

```
// image feed
var $img = $('#camera_image_changer'); 

 setInterval(function() {

    $.get('../helpers/image_feed.php?camera_id=11', function(data) {
    var $loader = $(document.createElement('img'));

     $loader.load(function() {
        $img.attr('src', $loader.attr('src'));
     });

     $loader.attr('src', data);

    });

}, 5000); 
```

更新：我可能已经回答了我自己的问题。我有下面的代码并且它正在工作，这是一个好的方法吗？

```
// image feed
var $img = $('#camera_image_changer'); 

setInterval(function() {

        var $loader = $(document.createElement('img'));

        $loader.load(function() {
            $img.attr('src', $loader.attr('src'));
        });

        $loader.attr('src', '../helpers/image.php?<?=$resource;?>=<?=$resource_id;?>');

}, 5000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:29:27.283

您可以删除`get`调用并仅使用其中的代码，为`data`变量分配图像的路径：

```
var $img = $('#camera_image_changer');   

// this delay the code execution in milliseconds
setInterval(function() { 
    var data = "path/to/image.jpg";

    // Creates an image object and pass it to jQuery return a jQuery object
    var $loader = $(document.createElement('img')); 

    // Create a callback that fires when the image finishes loading
     $loader.load(function() { 
        // assign the source of the loaded image to the target image
        $img.attr('src', $loader.attr('src')); 
     }); 

     // assign the image to load
     $loader.attr('src', data);
 }, 5000); // 5 seconds (5000 ms) 
```

在您之前的代码中，该`get`方法调用页面并将内容作为`data`变量返回。

# iphone - 开始和停止按钮，需要禁用和隐藏然后重新启用和可见

> ID：11455829
> 
> 赞同：0
> 
> 时间：2012-07-12T15:56:53.240
> 
> 标签：iphone, objective-c, ios, xcode, ipad

好的，我知道这是 b4 提出的一个问题，但是因为它应该很容易回答，所以我想得到一个更好的答案。我在计时器上有一个开始和一个停止按钮。我希望在时钟运行时禁用播放按钮，并在时钟停止时启用播放按钮，反之亦然，但我也希望它在禁用时隐藏，所以有人可以告诉我禁用和隐藏按钮的代码最近按下，然后在按下另一个时重新启用并可见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T16:06:09.947

您应该拥有按钮的 IBOutlets，然后直接访问它们。不要忘记在 Xcode 上链接它们

```
@property (strong, nonatomic) IBOutlet UIButton *startButton;
@property (strong, nonatomic) IBOutlet UIButton *stopButton; 
```

在链接到点击播放按钮的操作上：

```
[self->stopButton setEnabled:YES];
[self->stopButton setHidden:NO];

[self->startButton setHidden:YES];
[self->startButton setEnabled:NO]; 
```

然后，当您点击停止按钮时：

```
[self->stopButton setEnabled:NO];
[self->stopButton setHidden:YES];

[self->startButton setHidden:NO];
[self->startButton setEnabled:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T16:08:52.537

在 XIB 中，您必须创建按钮并连接到 ViewController.h

在`interface`你必须有

```
IBOutlet UIButton *btn1;
IBOutlet UIButton *btn2;

-(IBAction)b1:(id)sender;
-(IBAction)b2:(id)sender; 
```

`implementation`你必须写这样的东西：

在`viewDidLoad`

```
btn1.enabled = no;

-(IBAction)b1 {
    btn1.enabled = no;
    btn1.hidden = yes;

    btn2.enabled = yes;
    btn2.hidden = no;
}

 -(IBAction)b2 {
    btn2.enabled = no;
    btn2.hidden = yes;

    btn1.enabled = yes;
    btn1.hidden = no;
} 
```

我觉得`hidden = yes`够了

# sql - 基于 365 天年份的日期

> ID：11455830
> 
> 赞同：0
> 
> 时间：2012-07-12T15:57:07.160
> 
> 标签：sql, excel, datetime, date

我有一个格式为 [过去两年] [365 日] 的日期。使用 SQL 或 excel 函数，我需要确定与此相关的日期。这一年始终是 2000 年代的最后两年。没有 2007 年之前的日期。有没有办法轻松做到这一点？我正在使用它进行快速检查，并试图避免为此花费大量的编码时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T16:05:13.050

In SQL, the date-handling functions seem to vary widely by SQL vendor, and there don't seem to be any good standard ways of handling date offsets. However, if you were a bit more specific about the specific SQL server you're using, someone might be able to provide an answer that applies.

In Excel, you can build a date for the first day of the year (e.g. 2008-01-01) and then add the number of days numerically, subtracting 1 so that the first day is still 2008-01-01; the resulting value, when formatted as a date, should be the precise date value. For example, `=DATE(2008,1,1)-1+320` returns a date of 11/15/08 (at least in LibreOffice Calc).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:02:35.617

您可以在 Excel 中尝试此公式，您的数据位于 A1 中

`=DATE(LEFT(A1,2)+100,1,RIGHT(A1,3))`

# php - SQL Real Escape String 未显示在数据库中

> ID：11455842
> 
> 赞同：0
> 
> 时间：2012-07-12T15:57:44.680
> 
> 标签：php, sql, sql-injection

我的网站上有一个注册表单，我认为我应该防止 SQL 注入。我不能恶意删除该表。

使用**POST**，我从表单中收集输入，检查它，然后将其添加到数据库中。我的代码如下。我一直在测试表单，虽然表单提交成功，但表中填充了一个空行……而不是表单中的数据。

这里发生了什么？

```
<?php

        $type = $_POST['type']; // a dropdown
        $color = $_POST['color']; // a dropdown 
        $name = mysql_real_escape_string($_POST['name']);
        $address = mysql_real_escape_string($_POST['address']);
        $city = mysql_real_escape_string($_POST['city']);
        $state = $_POST['state']; // a dropdown
        $zip = mysql_real_escape_string($_POST['zip']);
        $phone = mysql_real_escape_string($_POST['phone']);
        $email = mysql_real_escape_string($_POST['email']);
        $where = mysql_real_escape_string($_POST['where']);
        $price = mysql_real_escape_string($_POST['price']);
        $use = mysql_real_escape_string($_POST['use']);

        include 'php/Connect.php';
        $ct = new Connect();
        $con = $ct->connect();  

        if(check($email, $con)) {
            if(register($type, $color, $name, $address, $city, $state, $zip, $phone, $email, $where, $price, $use, $con)) {
                echo '<h1>Success!</h1><p>Thanks for registering your product. A confirmation email has been sent to '.$email.'.</p>';
            }
            else {
                echo '<h1>Error!</h1><p>There were errors processing your registration. Please try again.</p>'; 
            }
        }
        else {
            echo '<h1>Error!</h1><p>This product has already been registered.</p>';
        }

        function check($email, $con) {
            $query = "SELECT * FROM registrations WHERE email='$email'";
            $res = mysql_query($query, $con);
            if ($con) {
                $row = mysql_fetch_assoc($res);
                if($row) {
                    return false; // product registration exists    
                }
                else {
                    return true; // product registration does not exist
                }
            }
            else {
                return false; 
            }
        }

        function register($type, $color, $name, $address, $city, $state, $zip, $phone, $email, $where, $price, $use, $con) {
            $query = "INSERT INTO registrations VALUES ('$type', '$color', '$name', '$address', '$city', '$state', '$zip', '$phone', '$email', '$where', '$price', '$use')";
            $res = mysql_query($query, $con);
            if (!$con) {
                return false;
            }
            else {
                mysql_close($con);
                return true; 
            }
        }
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:42:36.790

使用前连接数据库`mysql_real_escape_string`
但是最好使用较新的版本

```
$connect=mysqli_connect(.......);  
mysqli_real_escape_string($connect,$string); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:06:50.200

在 PeeHaa 的帮助下修复了它。这是更正后的代码：

```
<?php

        include 'php/Connect.php';
        $ct = new Connect();
        $db = $ct->connect();

        $type = $_POST['type'];
        $color = $_POST['color'];
        $name = $_POST['name'];
        $address = $_POST['address'];
        $city = $_POST['city'];
        $state = $_POST['state'];
        $zip = $_POST['zip'];
        $phone = $_POST['phone'];
        $email = $_POST['email'];
        $where = $_POST['where'];
        $price = $_POST['price'];
        $use = $_POST['use'];   

        if(check($email, $db)) {
            if(register($type, $color, $name, $address, $city, $state, $zip, $phone, $email, $where, $price, $use, $db)) {
                echo '<h1>Success!</h1><p>Thanks for registering your product. A confirmation email has been sent to '.$email.'.</p>';
            }
            else {
                echo '<h1>Error!</h1><p>There were errors processing your registration. Please try again.</p>'; 
            }
        }
        else {
            echo '<h1>Error!</h1><p>This product has already been registered.</p>';
        }

        function check($email, $db) {

            $stmt = $db->prepare("SELECT * FROM registrations WHERE email=?");
            $stmt->execute(array($email));
            $rows = $stmt->fetchAll(PDO::FETCH_ASSOC);
            if ($db) {
                if($rows) {
                    return false; // product registration exists    
                }
                else {
                    return true; // product registration does not exist
                }
            }
            else {
                return false; 
            }
        }

        function register($type, $color, $name, $address, $city, $state, $zip, $phone, $email, $where, $price, $use, $db) {

            $stmt = $db->prepare("INSERT INTO registrations VALUES(?,?,?,?,?,?,?,?,?,?,?,?)");
            $stmt->execute(array($type, $color, $name, $address, $city, $state, $zip, $phone, $email, $where, $price, $use));

            if (!$db) {
                return false;
            }
            else {
                mysql_close($db);
                return true; 
            }
        }
    ?> 
```

# linux - 如何在 Linux 上创建带有链接的目录副本

> ID：11455846
> 
> 赞同：7
> 
> 时间：2012-07-12T15:57:59.870
> 
> 标签：linux, directory, hardlink

我在 Linux 上有一系列目录，每个目录都包含大量文件和数据。这些目录中的数据是自动生成的，但多个用户将需要对该数据执行更多分析并生成更多文件、更改结构等。

由于这些数据目录非常大，我不希望几个人复制原始数据，所以我想复制目录并从新目录链接到原始数据。但是，我希望将任何更改仅保留在新目录中，并将原始目录保留为只读。我不希望只链接我定义的特定文件，因为这些目录中的数据非常多样。

所以我想知道是否有一种方法可以通过链接到原始目录来创建目录的副本，但仅将任何更改的文件保留在新目录中。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-18T20:31:24.480

事实证明这就是我想要的：

```
cp -al <origdir> <newdir> 
```

它将复制整个目录并创建指向原始文件的硬链接。如果原始文件被删除，复制的文件仍然存在，反之亦然。这将完美地工作，但我发现 newdir 一定不存在。只要原始文件是只读的，您就可以创建原始目录的相同安全副本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T16:11:45.807

但是，由于您正在寻找一种人们可以写回更改的方式，[UnionFS](http://www.fsl.cs.sunysb.edu/project-unionfs.html)可能就是您正在寻找的。它提供了将只读和读写位置合并为一个的方法。

> Unionfs 允许任意混合只读和读写分支，以及在扇出的任何位置插入和删除分支。

* * *

最初我打算推荐这个（我经常使用它）：

假设权限不是问题（例如只需要阅读），我建议将它们绑定安装到位。

```
mount -B <original> <new-location>
# or
mount --bind <original> <new-location> 
```

`<new-location>`必须作为文件夹存在。

# c++ - 如何复制 Program Files 文件夹中的文件或文件夹

> ID：11455848
> 
> 赞同：0
> 
> 时间：2012-07-12T15:58:06.537
> 
> 标签：c++

如何复制 Program Files 文件夹中的文件或文件夹。

实验：

```
 system("xcopy pro_s\\pro C:\\Program Files  /e /i /h"); 
```

但我没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:11:05.407

“程序文件”中有一个空格，可能会导致问题。尝试用双引号括起来`\"C:\\Program Files\"`或尝试`"C:\\Progra~1"`

如果您使用 C++，也可以使用强大的 boost：请参阅[https://stackoverflow.com/a/2536438](https://stackoverflow.com/a/2536438)或[https://stackoverflow.com/a/8594696](https://stackoverflow.com/a/8594696) 或在 Windows 上参阅[SHFileOperation](http://msdn.microsoft.com/en-us/library/bb762164%28VS.85%29.aspx) API

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T16:04:02.277

尝试

```
system("xcopy \"C:\\Program Files\\foldertocopy\" \"C:\\destination\" /e /i /h"); // Copy from

system("xcopy \"C:\\source\" \"C:\\Program Files\\foldertocopyinto\" /e /i /h"); // Copy to 
```

后者需要管理员权限。

# javascript - 来自ajax请求的Jquery Ajax表单

> ID：11455858
> 
> 赞同：1
> 
> 时间：2012-07-12T15:58:41.717
> 
> 标签：javascript, jquery, ajax

我做了一个jQuery表单（form1），它通过ajax在该页面中带来了另一个表单（form2）。现在我想通过ajax提交form2数据。

但是每当我单击按钮时，它都会提交整个页面。我的意思是整个页面重新加载。

```
$(document).ready(function() {
        $("#form2").submit(function() {
            $(this).ajaxSubmit({
                    beforeSubmit: function(before) {
                        $('.loading_result').html('Loading...');
                    },
                    success: function(dd) {
                        $('.loading_result').html(dd);
                    }
            }); 
            return false;
        });

    }); 
```

父页面中的所有 JavaScript 代码。我在 ajax 页面中没有任何 JavaScript 代码

//

page.php * 此页面中有一个表单（form1）。* 所有的 jQuery 函数都在 page.php 中

当form1提交时，它从page2.php中带来数据//它工作得很好。** page2.php 给出 form2。

现在，当我提交 from2（在 ajax 请求之后也在 page.php 中）时，它不会触发 page.php 中的 jquery 函数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:07:08.823

这是因为表单是在传统意义上提交的。这是提交事件的默认操作。你需要抑制这个：

```
$("#form2").submit(function(evt) {
    evt.preventDefault(); //<-- prevent the event's default action
    //code here... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T16:32:35.207

`$(document).ready`我通常只在表单的按钮上包含一个“onclick”事件，而不是绑定表单提交：

```
<button type='submit' onclick='MyAjaxFunction();return false;'>Submit</button> 
```

onclick的`return false;`部分将阻止表单提交。

# c++ - 使用 C++/Visual Studio 从串口读取数据

> ID：11455859
> 
> 赞同：1
> 
> 时间：2012-07-12T15:58:42.760
> 
> 标签：c++, serial-port

我正在运行 Windows 7 并使用 Visual Studio 2012 RC。我有一个 USB 设备连接到我的 COM6 端口，并且该设备正在流式传输 ASCII 输出。我想获取这些数据以在我用 C++ 编写的程序中使用。一般来说，我对编程很陌生，所以我有点迷路了。我知道我必须使用某个库，并且我看到正在使用函数 CreateFile，但我似乎无法让它工作。任何帮助将不胜感激，谢谢。

编辑：我能够打开端口并检索其基本数据：我可以打印出波特率、位大小、奇偶校验和停止位值。但我需要检索流式 ASCII 数据，这是我迷路的地方。很抱歉没有澄清。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:27:21.557

干得好：

Serial_Port.h：[http ://pastebin.com/Hft1zYS3](http://pastebin.com/Hft1zYS3)

Serial_Port.cpp：[http ://pastebin.com/ZzfUujNY](http://pastebin.com/ZzfUujNY)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T19:18:39.250

我建议您使用经过充分测试的完整库。这是我使用的一个：

[http://www.eltima.com/products/serial-activex/](http://www.eltima.com/products/serial-activex/)

# css - 让背景与文本的宽度相同，但高度不同

> ID：11455865
> 
> 赞同：8
> 
> 时间：2012-07-12T15:59:12.483
> 
> 标签：css, background-color

我试图在纯 css 中获得某种外观（无图像）。

我所拥有的是：

```
<h2>
    <a>TITLE</a>
</h2> 
```

我希望文本“标题”具有与文本宽度相同但高度不同的黑色背景。

我试过这是各种排列：（即链接中的跨度，h2中的跨度，h2显示内联和跨度块）

```
<h2 class="title section-title">
    <a href="<?php echo site_url(); ?>/artwork/illustrations" >
        Illustrations<span class="title-bg"></span>
    </a>
</h2> 
```

如果我得到正确的宽度，我不能改变高度，因为跨度是一个内联元素。如果我通过将跨度设置为块来获得正确的高度，则我无法将宽度更改为与文本的宽度完全相同，因为它现在是块级元素并扩展为页面的整个宽度。

有什么想法，还是我只需要使用图像？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T16:05:20.807

使用`display:inline-block;`.

看到[这个小提琴](http://jsfiddle.net/awKmj/1/)。

```
h2 {
    display:inline-block;
    height:60px;
    background-color:blue;
    color:white;
}
```

```
<h2><a>Hello.</a></h2>
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T16:04:00.310

适用`position: relative;`于`<a>`和。`position: absolute;`_ `.title-bg` `<span>`然后根据需要设置 the `top`、`left`to`0`和`width`and `height`。

像这样的东西：http: [//jsfiddle.net/minitech/3uzbV/](http://jsfiddle.net/minitech/3uzbV/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T16:12:07.987

我使用的最简单的方法是`line-height`.

```
h2 a {color:#fff; line-height:40px; display:inline-block; background:#333;}​ 
```

这是一个[jsFiddle](http://jsfiddle.net/brianflanagan/teFdZ/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T16:06:21.377

CSS：

```
a {
    font-size:1em;
    padding:1em 0 1em 0;/*set top and bottom padding to make up extra height*/
    background-color:#063;
} 
```

试试这个。即使是内联元素也可以有填充。

# arduino - 在 Arduino 中使用计时器引入延迟

> ID：11455866
> 
> 赞同：1
> 
> 时间：2012-07-12T15:59:23.543
> 
> 标签：arduino, avr, atmega

我正在 Arduino 中进行寄存器级编程。目标是使用计时器编写我自己的延迟逻辑。这是代码：

```
#include<avr/io.h>

int main()
{
    DDRB = (1<<PORTB5);
    TCCR1B = (1<<CS12);
    while(1)
    {
        if(TCNT1 >= 31250)
        {
            PORTB ^= (1<<PORTB5);
            TCNT1 = 0;
        }
    }
    return 0;
} 
```

上面的程序是让Arduino在不使用延迟功能的情况下引入延迟并且它工作正常。但是看看下面的代码。

```
#include<avr/io.h>

void setup()
{
    DDRB = (1<<PORTB5);
    TCCR1B = (1<<CS12);
}

void loop()
{
    if(TCNT1 >= 31250)
    {
        PORTB ^= (1<<PORTB5);
        TCNT1 = 0;
    }
} 
```

当我这样写时，程序正在编译，但 Arduino 中没有闪烁。与上述代码类似的代码运行正常时可能会出现什么问题？

```
#include <util/delay.h>

void setup()
{
    DDRB = (1<<PORTB5);
}

void loop()
{
    PORTB ^= (1<<PORTB5);
    _delay_ms(500);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T16:55:49.197

这看起来像 C，尤其是`#include <avr/io.h>`在顶部和使用`main()`函数的情况下。你是用 avr-gcc/AVRstudio 编译它还是打算用 Arduino IDE 写一个草图？

假设您正在尝试编写 C，您的后一个文件是为 Arduino IDE 编写的，它隐含包含一个`main()`函数，该函数执行以下操作：

```
int main()
{
  setup();
  while(1) {
    loop();
  }
} 
```

这似乎是您后面的代码示例所期望的环境。`main()`尝试在第二个文件的底部添加上述函数（在定义`setup()`and`loop()`函数之后）。如果您想在顶部使用 main()，则需要在定义函数之前使用函数原型*声明函数。*或者，更好的是，将后面的代码示例移动到它自己的文件中并给它一个标题：

## 主程序

```
#include "blink.h"

int main(void)
{
  blink_setup();
  while(1) {
    blink_loop();
  }
} 
```

## 眨眼.h

```
#ifndef BLINK_H  // Include guards prevent this file from being duplicated
#define BLINK_H

void blink_setup(void);  // blink_ prefix allows other modules to use comm
void blink_loop(void);

#endif 
```

#ifndef ... #define ... #endif 结构，称为包含保护，可以防止在编译中多次包含此文件时出现错误，如果其他`.h`文件引用它，则很容易发生这种情况。`blink_`前缀很有用，因为和`setup()`是`loop()`通用名称，可能被其他模块使用。如果您熟悉其他 OO 语言，这将类似于命名空间或类前缀的概念。

## 眨眼.c

```
#include <avr/io.h>
#include "blink.h"

void setup()
{
   DDRB = ( 1 << PORTB5 );
   TCCR1B = ( 1 << CS12 );
}

void loop()
{
   if( TCNT1 >= 31250 )
   {
      PORTB ^= ( 1 << PORTB5 );
      TCNT1 = 0;
   }
} 
```

请注意，我在此文件的顶部包含了 blink.h，使用`"`引号而不是括号，因为它是本地文件而不是系统文件。这会导致函数声明出现在文件的顶部，以便（例如）即使尚未定义它`setup()`也可以调用。`loop()`

除了那个环境问题，你的代码看起来应该可以工作。我更喜欢多一点的空白；我已经在我的代码示例中添加了它，但除此之外，一切看起来都很棒！

# vim - 打开 :help 到现有窗口/拆分

> ID：11455869
> 
> 赞同：1
> 
> 时间：2012-07-12T15:59:24.747
> 
> 标签：vim

我目前让我的终端全屏运行，其中有三个漂亮的大垂直分割。最左边的是运行NERDTree，所以我真的不需要全高。我想水平拆分该列并将帮助放在新框架中，但是当 I 时`:help`，它会在整个屏幕上创建一个大的水平拆分。我知道在进行垂直拆分之前，我可以在技术上按照我想要的方式进行设置，但是在我完全进入我的工作流程之前，我往往不会考虑打开帮助。

那么是否有可能只拆分现有窗口或打开到当前缓冲区？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T16:39:29.873

答案（对我有用）是：

```
:above help 
```

请注意，如果您在最右边的列中，它已经具有相同的行为。

有关各种变体（右下方等）`:help vert`，另请参见等。`:help above`

# c++ - 将数据成员的生命周期限制为一种方法

> ID：11455872
> 
> 赞同：2
> 
> 时间：2012-07-12T15:59:37.537
> 
> 标签：c++, constructor, destructor, object-lifetime, placement-new

我遇到了一个稍微不寻常的问题。考虑以下代码：

```
class parser
{
    lexer lex;

public:

    node_ptr parse(const std::string& expression)
    {
        lex.init(expression.begin(), expression.end());
        // ...
        // call some helper methods
        // return the result
    }

private:

    // lots of small helper methods, many of them accessing lex
}; 
```

parse 方法用一个方法初始化词法分析器`init`。在此之前，词法分析器处于不可用的“默认”状态。通常，在构造过程中应该初始化一个成员，所以我为什么不简单地这样做：

```
class parser
{
    lexer lex;

public:

    parser(const std::string& expr) : lex(expr.begin(), expr.end()) {}

    node_ptr parse()
    {
        // call some helper methods
        // return the result
    }
    // ...
}; 
```

首先，这意味着客户端可以多次调用 parse 方法，这没有多大意义。

其次，更重要的是，它很容易导致严重的生命周期问题：

```
parser my_parser("1 * 2 + 3 * 4");
auto root = my_parser.parse(); 
```

在上面的代码中，词法分析器将使用一个在行尾不再存在的临时字符串对象进行初始化，因此`parse`在下一行调用该方法将调用未定义的行为。

由于这两个原因，我真的很想用相同的方法进行初始化和解析。不幸的是，我不能在构造函数中这样做，因为我需要返回一个结果，而构造函数不能返回结果。

从技术上讲，如果我也相应地更改构造函数和析构函数，则可以在方法内部构造词法分析器`parse`并在之后将其销毁：

```
class parser
{
    static std::string dummy;
    lexer lex;

public:

    parser() : lex(dummy.begin(), dummy.end())
    {
        lex.~lexer();
    }

    node_ptr parse(const std::string& expression)
    {
        new(&lex) lexer(expression.begin(), expression.end());
        // call some helper methods
        lex.~lexer();
        // return the result
    }

    ~parser()
    {
        new(&lex) lexer(dummy.begin(), dummy.end());
    }
    // ...
}; 
```

但这是迄今为止我在很长一段时间内编写的最丑陋的代码。它也不是异常安全的；如果辅助方法抛出怎么办？事实上，这正是遇到解析错误时发生的情况。

那么我应该如何解决这个问题呢？在内部使用本地词法分析器`parse`并有一个`lexer*`成员指向它？使用`boost::optional<lexer>`会员？还是我应该只接受这种`init`方法？还是我应该在构造函数中进行解析并抛出一个包含所需结果的“期望”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T16:03:41.960

我绝对不会做你的第二个例子。更好的是构造`lexer`in `Parse()`，并存储一个指针 or `boost::optional`。但是如果你想允许这样做，那么你的辅助函数必须在继续之前检查词法分析器是否有效。对我来说似乎很乱。

更好的是只做`Parse`一个独立的功能。我设想这对呼叫者更明智，并解决您的问题：

```
void parser_helper(lexer& lex)
{
    ...
}

node_ptr Parse(const std::string& inp)
{
    lexer lex(inp);
    ...
    parser_helper(lex);
    ...
    return ret;
} 
```

或者如果你有更多的状态要传递......

```
class parser_helper
{
    lexer lex;
    ... other state here

public:
    parser_helper(const std::string& inp) :
        lex(inp)
    {
    }

    ... helper functions here.
    void helper_function() { }
}

node_ptr Parse(const std::string& inp)
{
    parser_helper helper(inp);
    ...
    helper.helper_function();
    ...
    return ret;
} 
```

无论哪种方式，词法分析器都应该只是`Parse`函数中的一个自动变量。

这个想法是调用者期望的接口只是一个函数。不需要让调用者处理一个类，只是因为它的内部`Parse`有状态/帮助函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T16:02:46.190

您没有说明为什么`parse`（实际上，`lex`）不应该是简单的函数。此外，您没有理由`parse`采用表达式或采用初始化的`lexer`.

编辑：

或者简单地将它们创建为解析堆栈上的 lambda。但是，正如我所说，我可以看到解析器存在的必要性。但它似乎不需要存在于 parse 本身的成员方法之外，质疑为什么不重构该方法以走出类。就像是

```
class parser { 
    lexer l;
     // stuff
};
node_ptr parse(...) { 
    parser p(...); 
    return p(); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T16:05:13.987

> 在上面的代码中，词法分析器将使用一个在行尾不再存在的临时字符串对象进行初始化，因此在下一行调用 parse 方法将调用未定义的行为。

那没有意义。您可以制作临时字符串的副本并在`lexer`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T16:07:42.177

> 在 parse 中使用本地词法分析器并让 lexer* 成员指向它？

这得到了我的投票。这样你就可以完全控制它的生命周期。

# c# - asp telerik treeView 在尝试 renderControl 时抛出异常

> ID：11455880
> 
> 赞同：1
> 
> 时间：2012-07-12T16:00:18.937
> 
> 标签：c#, asp.net, user-controls, telerik, stringwriter

我正在研究 TreeView 并且必须执行 renderControl() 方法。当它触发时，它会给出一个异常：InvalidOperationException: Page cannot be null。请确保在 ASP.NET 请求的上下文中执行此操作。

我有以下代码何时会评论错误所在：

```
try{
   StringWriter writer = new StringWriter();
   HtmlTextWriter tOut = new HtmlTextWriter(writer);
   ddFieldFilter.RenderControl(tOut);  //This doesnt error.
   tvFields = new RadTreeView();
   tvFields.NodeExpand += new RadTreeViewEventHandler(tvFields_NodeExpand);
   tvFields.NodeClick += new RadTreeViewEventHandler(tvFields_NodeClick);
   startTree();
   tvFields.RenderControl(tOut);  //Errors here.
   String context = writer.toString();
}catch(Exception e){
   throw new Exception("Error Loading Page: " + e.Message);
} 
```

您认为这可能是因为作者中当前有内容吗？我正在考虑将其清除或刷新到字符串然后重建它。我不确定它会附加到当前缓冲区

**如果您需要更多信息，请告诉我**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:54:01.610

您尝试执行的操作看起来目前不受支持。虽然这个问题是关于 Asp.NET`ColorPicker`控件的，但我相信它也适用于`RadTreeView`控件。

通过[Telerik 支持中心](http://www.telerik.com/community/forums/aspnet-ajax/combobox/page-cannot-be-null-please-ensure-that-this-operation-is-being-performed-in-the-context-of-an-asp-net-request.aspx)：

> 问：有什么方法可以让 ColorPicker 在没有页面的情况下呈现？我必须在我直接在 aspx 中而不是 aspx.cs 中编写的情况下添加它。此外，我可能需要从通用处理程序 ashx 执行此操作。这可能吗？
> 
> 答：控件需要添加到页面中，无论是在其标记中，还是在其代码隐藏中。您可以尝试使用 RenderControl 方法并写入 Response.OutputStream，但这不是受支持的方案，并且无法保证成功，因此我建议不要进行此类尝试。
> 
> 问候，
> 马林
> Telerik 团队

# jquery - 尝试使用 jquery 打印到星型蓝牙打印机

> ID：11455883
> 
> 赞同：1
> 
> 时间：2012-07-12T16:00:23.187
> 
> 标签：jquery, printing, bluetooth

我在移动应用程序中，我想打印到明星蓝牙打印机。Star 有一个 SDK，其中包含一个名为 StarIOPort3.1.jar 的 .jar 库，它负责打开/关闭打印机端口、获取状态以及将打印作业发送到打印机。

Star SDK 也有一个演示应用程序，具有打印机的所有功能。

在这个演示应用程序中，打印功能如下

```
 public void ShowTextFormating(View view)
    {
        EditText portNameField = (EditText)findViewById(R.id.editText_PortName);
        portName = portNameField.getText().toString();

    CheckBox portSettingsCheckBox = (CheckBox)findViewById(R.id.checkBox_PortablePrinter);
    portSettings = "";
    if(portSettingsCheckBox.isChecked() == true)
    {
        portSettings = "mini";
    }

    if(portSettingsCheckBox.isChecked() == true)
    {
        Intent myIntent = new Intent(this, textFormatingMiniActivity.class);
        startActivityFromChild(this, myIntent, 0);
    }
    else
    {
        Intent myIntent = new Intent(this, textFormatingActivity.class);
        startActivityFromChild(this, myIntent, 0);
    }
} 
```

如果选中便携式打印机复选框，则调用 textFormatingMiniActivity.class。

textFormatingMiniActivity.class 如下

```
package com.StarMicronics.StarIOSDK;

import com.StarMicronics.StarIOSDK.PrinterFunctions.Alignment;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.*;

public class textFormatingMiniActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mini_textformating);

        Spinner spinner_height = (Spinner)findViewById(R.id.spinner_height);
        SpinnerAdapter ad = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, new String[] {"1", "2", "3", "4", "5", "6", "7", "8"});
        spinner_height.setAdapter(ad);

        Spinner spinner_width = (Spinner)findViewById(R.id.spinner_width);
        ad = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, new String[] {"1", "2", "3", "4", "5", "6", "7", "8"});
        spinner_width.setAdapter(ad);

        Spinner spinner_alignment = (Spinner)findViewById(R.id.spinner_alignment);
        ad = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, new String[] {"Left", "Center", "Right"});
        spinner_alignment.setAdapter(ad);
    }

    public void PrintText(View view)
    {
        String portName = StarIOSDKActivity.getPortName();
        String portSettings = StarIOSDKActivity.getPortSettings();

        CheckBox checkbox_underline = (CheckBox)findViewById(R.id.checkbox_underline);
        boolean underline = checkbox_underline.isChecked();

        CheckBox checkbox_emphasized = (CheckBox)findViewById(R.id.checkbox_emphasized);
        boolean emphasized = checkbox_emphasized.isChecked();

        CheckBox checkbox_upsidedown = (CheckBox)findViewById(R.id.chechbox_upsidedown);
        boolean upsidedown = checkbox_upsidedown.isChecked();

        CheckBox checkbox_invertColor = (CheckBox)findViewById(R.id.checkbox_invertcolor);
        boolean invertColor = checkbox_invertColor.isChecked();

        Spinner spinner_height = (Spinner)findViewById(R.id.spinner_height);
        byte height = (byte) spinner_height.getSelectedItemPosition();

        Spinner spinner_width = (Spinner)findViewById(R.id.spinner_width);
        byte width = (byte) spinner_width.getSelectedItemPosition();

        EditText edittext_leftmargin = (EditText)findViewById(R.id.edittext_leftmargin);
        int leftMargin = 0;
        try
        {
            leftMargin = Integer.parseInt(edittext_leftmargin.getText().toString());
        }
        catch(Exception e)
        {
            leftMargin = 0;
        }

        Spinner spinner_alignment = (Spinner)findViewById(R.id.spinner_alignment);
        PrinterFunctions.Alignment alignment = PrinterFunctions.Alignment.Left;
        switch(spinner_alignment.getSelectedItemPosition())
        {
        case 0:
            alignment = Alignment.Left;
            break;
        case 1:
            alignment = Alignment.Center;
            break;
        case 2:
            alignment = Alignment.Right;
        }

        EditText edittext_texttoprint = (EditText)findViewById(R.id.editText_TextToPrint);
        byte[] texttoprint = edittext_texttoprint.getText().toString().getBytes();

        MiniPrinterFunctions.PrintText(this, portName, portSettings, underline, emphasized, upsidedown, invertColor, height, width, leftMargin, alignment, texttoprint);
    } 
```

这是我的问题：

如何从 jquery 调用 MiniPrinterFunctions.PrintText 因为我的应用程序是用 Jquery 编写的...

有没有其他方法可以使用上面的代码从 jquery 打印到这台打印机

请帮忙

提前谢谢

# java - 直接从 Java 与 Urban Airship 通信

> ID：11455889
> 
> 赞同：1
> 
> 时间：2012-07-12T16:00:45.760
> 
> 标签：java, urbanairship.com

我有一个 Java Web 服务器，我想通过它发送 UA 推送通知。我知道这可以通过 UA 的仪表板实现，但我想直接使用 Web 服务器与 UA 通信。

我已经阅读[了这个文档](https://docs.urbanairship.com/display/DOCS/Server%3A+Android+Push+API)，并且已经查看了[这个 SO question](https://stackoverflow.com/questions/9622091/sending-push-notification-to-android-from-java-server-using-urban-airship)，但是我仍然不知道从哪里开始。

谁能帮我指出一个好的起点？我需要导入任何特定的 .jar 文件等吗？

我一直在尝试调整以下代码片段，但它似乎无法正常运行。我究竟做错了什么？

```
URL mURL=new URL("https://go.urbanairship.com/api/push/broadcast");
HttpsURLConnection connection = (HttpsURLConnection)mURL.openConnection();
connection.setRequestMethod("POST");
JSONObject mPayload=new JSONObject();
JSONObject mPayload1=new JSONObject();
JSONObject mPayload2=new JSONObject();
mPayload1.put("extra", mPayload2);
mPayload1.put("alert", "hello world");
mPayload2.put("phonenumber", "12345");
mPayload.put("android", mPayload1);
System.out.println(mPayload.toString());
connection.setDoOutput(true);
connection.setDoInput(true);
connection.setUseCaches(false);
connection.addRequestProperty("Content-Type","application/json;charset=UTF-8");
String authString = "**MY APP KEY**" + ":" + "**MASTER KEY**"; 

String authStringBase64 = new String(Base64.encodeBytes(authString.getBytes()));
authStringBase64 = authStringBase64.trim();

connection.addRequestProperty("Authorization", "Basic " + authStringBase64);
DataOutputStream wr = new DataOutputStream(connection.getOutputStream());
wr.write(mPayload.toString().getBytes());
wr.flush();
Log.d("print", "response code"+ connection.getResponseCode()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:17:03.300

您只需向urbanairship 服务器发送一个带有通知的POST 请求，包括您的AppId 和正确编码的密钥...

看起来您上面包含的链接是一个库，它将为您完成大部分工作。

示例代码，注意：此示例中的 PushNotificationObj 是一个 bean，其中包含推送正文的字段。

```
 URL url = new URL(URBAN_AIRSHIP_API_URL);
        HTTPRequest req = new HTTPRequest(url, HTTPMethod.POST);

        String authString = ApplicationProperties.getUrbanAirshipAppId() + ":" + ApplicationProperties.getUrbanAirshipMasterSecret();

        String authStringBase64 = new String(Base64.encodeBase64(authString.getBytes()));
        authStringBase64 = authStringBase64.trim();

        req.addHeader(new HTTPHeader("Content-Type", "application/json"));
        req.addHeader(new HTTPHeader("Authorization", "Basic " + authStringBase64));

        ObjectMapper mapper = new ObjectMapper();
        ByteArrayOutputStream byteStream = new ByteArrayOutputStream();
        mapper.writeValue(byteStream, new PushNotificationObj(userEmail, message));

        req.setPayload(byteStream.toByteArray()); 
```

然后发送请求...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T01:49:09.857

您可能想尝试[urbanairship4j](http://code.google.com/p/urbanairship4j/)（可在 Google Code 上找到）。它使用[Google HTTP Java 客户端](http://code.google.com/p/google-http-java-client/)，因此可以在任何 Java 环境（包括 AppEngine、Android 等）上完美运行。

# sql - 可用于上述场景的 SQL 函数

> ID：11455893
> 
> 赞同：0
> 
> 时间：2012-07-12T16:01:01.323
> 
> 标签：sql, oracle

我需要为报告编写 SQL 查询。用户可以选择六个动态过滤器，即用户可以选择一个或两个最多六个过滤器。

在每个过滤器中，用户从下拉列表中选择设备的属性，操作员及其值用户需要输入。这构成了一个过滤器，例如：

```
 AttributeName  Operator    Value
     Cost           equal       480
AND  MappedName     contains    DummyString 
```

这里“成本”是属性，“480”是值，整个事情由一个过滤器组成。在类似的时尚用户可以选择最大。6 个过滤器 两个过滤器之间的运算符也是动态的。它可以是“AND”或“OR”

在报告中，我需要为每个过滤器动态生成一个列以及一些静态列，例如设备名称、设备制造是静态列，而上述过滤器是动态的。

因此，当用户选择了两个过滤器时的报告将如下所示：

```
DeviceName   DeviceManufactur  Cost              MappedName    
D1           DM1               480               DummyString 
D2           DM2               480               DummyString 
```

在数据库中，属性存储如下：

```
 DeviceName   DeviceManufactur  AttributeName              AttributeValue
   D1           DM1               Cost                      480
   D1           DM1               MappedName               DummyString  
   D2           DM2               Cost                      480
   D2           DM2               MappedName               DummyString 
```

所以当我写简单的sql时

```
select d.name,d.manufacture,d.AttName,d.value
from Device d
where d.AttName='Cost' and d.AttValie='480'
    and d.AttName='MappedName' and d.AttValue='DummyString' 
```

尽管设备与这两个属性相关联，但它永远不会给我任何记录。

任何人都可以建议任何特定的 SQL 函数，这将有助于我有效地编写这个逻辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:10:05.280

我认为我并没有真正理解您的问题，但我唯一能想到的是：

```
SELECT d.DeviceName, d.DeviceManufactur, d.AttributeName, d.AttributeValue
FROM aDevice d
WHERE d.DeviceName IN (
    SELECT dd.DeviceName
    FROM aDevice dd
    WHERE EXISTS (SELECT 1 FROM aDevice ddd WHERE AttributeName='Cost' AND AttributeValue='480' AND ddd.DeviceName = dd.DeviceName)
    AND EXISTS (SELECT 1 FROM aDevice ddd WHERE AttributeName ='MappedName' AND AttributeValue = 'DummyString' AND ddd.DeviceName = dd.DeviceName)) 
```

这应该返回与查询匹配的任何设备的所有信息`Cost = '480' AND MappedName = 'DummyString'`......

# php - 使用 SQL ID 创建预先重写的 (?) URL

> ID：11455896
> 
> 赞同：1
> 
> 时间：2012-07-12T16:01:11.527
> 
> 标签：php, html, .htaccess

所以，我刚刚在我的网站上安装了一个代码粘贴实用程序（基本上就像 PasteBin，但使用开源 PASTE 脚本）。此时，将在 SQL 数据库中保存一个粘贴，带有一个整数 ID。粘贴实用程序目录是[http://example.com/paste](http://example.com/paste)，可以在[http://example.com/paste/12345](http://example.com/paste/12345)找到粘贴。

我想做的是创建一个 htaccess 规则，以便当用户点击[http://example.com/12345](http://example.com/12345)时，他们将被带到[http://example.com/paste/12345](http://example.com/paste/12345)。

我环顾了其他问题，但似乎没有人提出（或解决）相同类型的问题。但我可能看错了地方，有人会在我发布后的几分钟内获得答案的链接。这同样很棒，但如果可能的话，我更喜欢更量身定制的解决方案。

注意：如果有人只想将可点击链接从[http://example.com/paste/12345](http://example.com/paste/12345)（例如）更改为[http://example.com/p/12345](http://example.com/p/12345)而不更改实际的子文件夹名称，请查看我的评论在接受的答案中。否则，Dope Monk 的解决方案可以很好地解决我最初的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:22:26.333

您需要使用 mod_rewrite 在您的 .htaccess 中有一个简单的规则。但是，您必须确保在使用此规则时启用 mod_rewrite

添加这个：

```
RewriteRule ^/([0-9]+)/$ /paste/$1 [NC,L] 
```

# objective-c - 将包含 NSString 的 NSArray 转换为 NSString

> ID：11455899
> 
> 赞同：0
> 
> 时间：2012-07-12T16:01:18.473
> 
> 标签：objective-c, ios

所以，我有一个包含 NSString 的 NSArray。如何将 NSArray 转换为 NSString 用新行分隔它们。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-12T16:03:14.530

使用[componentsJoinedByString](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/doc/uid/20000137-BABDECEE)：

```
NSString *combinedString = [myArray componentsJoinedByString:@"\n"]; 
```

# c# - WebService检查SQL表中是否有数据

> ID：11455902
> 
> 赞同：-1
> 
> 时间：2012-07-12T16:01:23.817
> 
> 标签：c#, sql, database, web-services

我正在尝试编写一个过程来检查 SQL 表中是否有一些数据。

然后我想根据是否存在做一些事情。

所以，我有这个连接到数据库的代码，它正在选择我想从表中获取的数据。

```
public List<MedidasAdoptar> leerMedidasAdoptar()
    {

        DataSet Datos = new DataSet();
        string connectionString = "Initial Catalog=MyDatabase;Data Source=MyServer;Integrated Security=false;User ID=SQLUser;Password=SQLPass;";
        string selectCommand =
            "SELECT [Número medida], [Cód_ Cliente], [Nombre Cliente], [Cód_ obra], [Nombre obra], Tipo, [Cód_ Medida], [Descripción Medida], [Respuesta Medida] FROM [MyDatabase$My table] " +
            "WHERE [Cód_ Cliente] = "+codigoCliente+" AND [Cód_ obra] = "+codigoObra;
        using (var MyConnection = new SqlConnection(connectionString))
        using (var MyDataAdapter = new SqlDataAdapter(selectCommand, MyConnection))
        {
            MyDataAdapter.SelectCommand.CommandType = CommandType.Text;
            MyDataAdapter.Fill(Datos);
            MyDataAdapter.Dispose();
            MyConnection.Close();
        }
        int i;

        //Right here (If it is possible) I want to determine if there is some data in table 

        try
        {
          //...doing some stuff
        } catch (SqlException e)
        {

            string msg = "";
            System.Console.WriteLine(msg);
            return new List<MedidasAdoptar>();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:08:31.413

像这样的东西应该工作

```
if (Datos.Tables[0].Rows.Count() > 0) 
```

# jquery - Jquery datepicker没有分配日期

> ID：11455905
> 
> 赞同：3
> 
> 时间：2012-07-12T16:01:30.183
> 
> 标签：jquery

我有一个 ID 为 InactiveDate 的文本框。它附有一个日期选择器，

我尝试了以下但无法成功填充日期：（注意我为测试硬编码）

```
$('#InactiveDate').datepicker('09/09/2012'); 
```

虽然我的控件被称为 InactiveDate，但它看起来像下面一样是隐藏的，所以不确定要尝试什么。

当我运行上面的代码时，不会填充任何日期。

这是它的样子：

```
 <div id="datePicker_InactiveDate">
    <script language="javascript" type="text/javascript">
    <input id="InactiveDate" class="data" type="hidden" value="" name="InactiveDate">
    <input id="dp1342109969094" class="date hasDatepicker" type="text"     onchange="javascript:updateData_InactiveDate()" value="">
    </div>
    <span class="field-validation-valid" data-valmsg-replace="true" data-valmsg-for="InactiveDate"></span>
    </div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T16:02:57.353

这不是如何`.datepicker`工作的。您需要使用该`setDate`方法。

```
$('#InactiveDate').datepicker('setDate', '09/09/2012'); 
```

文档： http: [//jqueryui.com/demos/datepicker](http://jqueryui.com/demos/datepicker)（单击“方法”选项卡）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:03:58.540

首先这样做：

```
var myDate = new Date('09/09/2012'); 
```

现在，调用 datepicker.setDate() 就完成了：

```
$('#InactiveDate').datepicker('setDate', myDate); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T16:04:32.367

试用

```
var myDate = new Date();
var todaydate =(myDate.getMonth()+1) + '/' + myDate.getDate() + '/' +
        myDate.getFullYear();
$("#InactiveDate").val(todaydate); 
```

或者

```
$('#InactiveDate').datepicker('setDate', new Date()); 
```

无需应用格式，它使用定义的日期选择器。

# api - 在 REST API 中返回绝对与相对 URI

> ID：11455908
> 
> 赞同：5
> 
> 时间：2012-07-12T16:01:45.473
> 
> 标签：api, http, rest, hyperlink

假设 DogManagementPro 程序是用客户端/服务器架构编写的应用程序，购买它的客户应该在自己的 PC 上运行服务器，并在本地或远程访问它。

假设我想在 DogManagementPro REST API 中支持“列出所有狗”操作。

所以一个 GET`http://localhost/DogManagerPro/api/dogs`应该现在获取以下响应：

```
<dogs>
  <dog>http://localhost/DogManagerPro/api/dogs/ralf</dog>
  <dog>http://localhost/DogManagerPro/api/dogs/sparky</dog>
</dogs> 
```

我想在我的本地 LAN 上远程访问它，[我机器的本地 IP 是 192.168.0.33] 应该用 GET`http://192.168.0.33:1234/DogManagerPro/api/dogs`获取什么？

应该是：

```
<dogs>
  <dog>http://localhost/DogManagerPro/api/dogs/ralf</dog>
  <dog>http://localhost/DogManagerPro/api/dogs/sparky</dog>
</dogs> 
```

也许：

```
<dogs>
  <dog>http://192.168.0.33/DogManagerPro/api/dogs/ralf</dog>
  <dog>http://192.168.0.33/DogManagerPro/api/dogs/sparky</dog>
</dogs> 
```

?

有些人认为我应该通过只返回一个路径元素来完全解决这个问题，如下所示：

```
<dogs>
  <dog>/DogManagerPro/api/dogs/ralf</dog>
  <dog>/DogManagerPro/api/dogs/sparky</dog>
</dogs> 
```

什么是最好的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T19:26:06.723

我个人一直使用非绝对网址。它还解决了一些其他问题，例如反向/缓存代理。

但是对于客户端来说有点复杂，如果他们想按原样存储文档，这可能意味着他们现在还需要存储基本 url，或者扩展内部 url。

如果您确实选择使用完整 url 路由，我不建议使用 HTTP_HOST，而是设置多个虚拟主机和环境变量并使用它。如果您以后需要在源服务器前使用代理，这可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T16:06:03.430

我会说基于`Host`客户端发送的标头创建的绝对 URL

```
<dogs>
  <dog>http://192.168.0.33:1234/DogManagerPro/api/dogs/ralf</dog>
  <dog>http://192.168.0.33:1234/DogManagerPro/api/dogs/sparky</dog>
</dogs> 
```

返回的 URI 应该是客户端能够解析的内容。

# php - 每个循环错误的 PHP

> ID：11455910
> 
> 赞同：0
> 
> 时间：2012-07-12T16:01:53.213
> 
> 标签：php

我有一个循环来遍历一个数组，每个`checkbox`被选中的我想将值（也动态引入）放入我的`QuestionSelected`表中。我收到此错误`"Warning: Invalid argument supplied for foreach()"`，无法将结果放入我的表中。这是我正在尝试的代码：

```
//Declare the QuestionID as a array
$QuestionID = array();

while($row = mysqli_fetch_array($run,MYSQLI_ASSOC)){
echo '<div id="QuestionSelection"><input id="chkQuestion" type="checkbox" value=" '.$row['QuestionID'].'" name="question_'.$row['QuestionID'].'">' .$row['Question']. '</p></div><br/><br/>';

//Assign the QuestionID from the table to the var
$QuestionID[] = $row['QuestionID'];

}

if($_POST['submitted']) { 

$ids_list = '';

foreach($_POST["QuestionID"] as $id)
{
$ids_list .= (strlen($ids_list) > 0 ? ',' : '').mysql_real_escape_string($id);
}

$sql2 = "INSERT INTO tbl_QuestionSelected (`QuestionID`) VALUES (".$ids_list.")";

}//End of IF 'submitted 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:06:22.697

The problem is that in your form, you are not using an array, but building the name values like:

```
name="question_'.$row['QuestionID'].'" 
```

So `$_POST["QuestionID"]` does not exist and is not an array.

You can change your name building to:

```
name="QuestionID[]" 
```

So that it is an array and you can even use the actual id as a key:

```
name="QuestionID[' . $row['QuestionID'] . ']" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:11:44.710

这解决了问题并且有效：

```
$ids_list = '';

foreach($_POST["QuestionID"] as $key=>$value) {
{
$ids_list .= (strlen($ids_list) > 0 ? ',' : '').mysql_real_escape_string($value);
}

$sql2 = "INSERT INTO tbl_QuestionSelected (`QuestionID`) VALUES (".$ids_list.")";

//Run the query 
$run2 = @mysqli_query ($conn,$sql2);

} 
```

# jquery - 使用 jQuery 克隆和插入

> ID：11455914
> 
> 赞同：2
> 
> 时间：2012-07-12T16:02:04.937
> 
> 标签：jquery

```
$(document).ready(function() {

     var clone = $("#me_flash_0").clone(true);

     if($('video').attr('class') == "pause_0"){
          $("#me_flash_0").remove();    
     }

     $('.top_item img').click(function(){
            $("#me_flash_0_container").html(clone);
            $(this).hide();     
     });

} 
```

`#me-flash_0`是一个`<embed>`元素。并且`#me_flash_0_container`是包装容器。问题是克隆的对象似乎是空的。`html(clone)`没有效果。

Firebug 没有显示任何错误。

这是相关的html

```
<div id="me_flash_0_container" class="me-plugin">
   <embed id="me_flash_0">
</div>
<video class="pause_199" width="586px" height="440" src="some link" autoplay="true" tabindex="0" style="display: none;"></video> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T09:11:44.310

这似乎是 jQuery 和克隆对象元素的错误。

见[http://bugs.jquery.com/ticket/10324](http://bugs.jquery.com/ticket/10324)

解决此问题的一种可能方法是将对象的父容器的内容复制到隐藏的 textarea 中，然后使用此 textarea 的 val() 克隆一个新对象。

在此处查看类似的方法：[克隆 silverlight 嵌入对象会导致空白元素](https://stackoverflow.com/questions/10795020/cloning-a-silverlight-embed-object-results-in-an-empty-white-element)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T09:29:01.717

```
 `$(document).ready(function() {

         var clone = $("#me_flash_0").clone(true);

         if($('video').attr('class') == "pause_0"){
              $("#me_flash_0").remove();    
         }

         $('.top_item img').click(function(){
                $("#me_flash_0_container").children().remove();
                $("#me_flash_0_container").append(clone);
                $(this).hide();     
         });

    });`
```

~~正如@techfoobar 所写，您不能使用[`.html()`](http://api.jquery.com/html/)附加jQuery 对象。您还缺少 JavaScript 末尾的括号。~~

**编辑：**看到[这个](https://stackoverflow.com/questions/11492181/jquery-cloning-and-removing-div-doesnt-add-div-back-in/11492210#comment15179565_11492210)关于类似问题的评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T16:05:55.737

a)`clone`是一个完整的 jquery 扩展元素，而不是一个 html 字符串。如果你这样做，它应该工作`.append(clone)`而不是`.html(clone)`

b)`clone`被声明为`ready(..)`函数的本地。您可能需要将其移出到全局变量中，因为您事先不知道何时触发 click 事件处理程序

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T09:29:11.540

我看到的可能导致这种情况的问题...

*   您正在准备好在 DOM 上缓存对象。
    从相关代码开始，该对象似乎是空的，这就是缓存在变量中的内容。（*您还应该添加一个结束`</embed>`标签*）。
    我不知道`embed`元素中应该出现什么，所以不确定什么都没有发生的事实是否是预期的功能..
*   将`$('video').attr('class')`返回应用于DOM 中**第一个元素的类。** `video`在示例代码中的`class_199`. 但是你比较，`class_0`所以它永远不会匹配，也不会删除`#me_flash_0`元素。

# c# - 访问尚未定义为数组的对象数组

> ID：11455917
> 
> 赞同：0
> 
> 时间：2012-07-12T16:02:07.393
> 
> 标签：c#, .net, wpf, arrays, amfphp

我想在 .NET 中使用一些 amfphp 函数并访问一些对象。经过一番搜索，我找到了一个可以解决问题的开源网关。 [如何使用 .NET WPF 应用程序中的 AMFPHP 函数？](https://stackoverflow.com/questions/2156404/how-to-use-amfphp-functions-from-net-wpf-application)

好的，我现在就是这样，我真的可以使用一些帮助。建立连接并正确调用后

```
 public void Connect()
        {
            // Create NetConnection client
            _netConnection = new NetConnection();
            _netConnection.ObjectEncoding = ObjectEncoding.AMF0;
            _netConnection.NetStatus += new NetStatusHandler(_netConnection_NetStatus);
            _netConnection.Connect("http://www.mytestserver.nl/services/gateway");

            System.Console.WriteLine("*** Flash RPC ***");
            _netConnection.Call("amfphp.mytestserver.getObjects", new GetCustomersHandler(), new object[] { "415" });

            System.Console.WriteLine("Press 'Enter' to exit");
        } 
```

在我的处理程序中

```
 public class GetCustomersHandler : IPendingServiceCallback
    {
        public void ResultReceived(IPendingServiceCall call)
        {
            object result = call.Result;
            System.Console.WriteLine("Server response: " + result);

            //DataAccess sample sends back an ArrayCollection (AMF3)
            ArrayCollection items = result as ArrayCollection;

            foreach (object item in items)
            {
                Flex.CustomerVO customer = item as Flex.CustomerVO;
                System.Console.WriteLine(customer.firstname + " " + customer.lastname);
            }
        }
    } 
```

这是在示例文件夹中给出的项目中完成的方式。我无法遍历 items ，所以我想让我看看如何访问我的 results 对象。这是它（至少对我而言）变得有点棘手。我可以在我的列表中将结果视为类型对象，我可以访问结果数组 (?object) ，但是我如何在代码中遍历我的结果对象，因为它不是一个数组。为了澄清，我添加了一些截图。

[http://imageshack.us/f/685/fluorine1.png/](http://imageshack.us/f/685/fluorine1.png/) 可以在这里看到包含 46 个项目的结果。

更多说明 [http://imageshack.us/f/38/fluorine2.png/](http://imageshack.us/f/38/fluorine2.png/) （例如，我希望访问密钥、值等）。有没有人有解决方案或方法。感觉并不困难（也许是这样），但我似乎遗漏了一些东西。有人帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:09:39.180

如果要遍历对象，则需要将结果转换为对象数组：

```
object[] objects = (objects)result; 
```

然后您可以通过再次投射来访问各个项目：

```
foreach (object obj in objects)
{
    FluorineFx.ASObject asObject = (FluorineFx.ASObject)obj;
    System.Console.WriteLine(asObject.Key);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T16:07:28.053

它确实是一个数组。它是一个对象数组（object[]）。您可以像示例中所示那样访问它。唯一的问题是您必须知道它是什么类型的对象并将其转换为该类型。

```
Flex.CustomerVO customer = item as Flex.CustomerVO; 
```

是他们投射物体的地方。

# algorithm - 区域优化算法

> ID：11455918
> 
> 赞同：4
> 
> 时间：2012-07-12T16:02:08.207
> 
> 标签：algorithm, math, optimization

我有一个要求，将特定数量的矩形（具有定义的宽度但随机高度）插入另一个矩形（具有定义的高度和与要插入的矩形相同的定义宽度）。这里的目标是，那些插入的矩形应该尽可能地填充目标矩形。

例如：

![在此处输入图像描述](../Images/8935705cc045c3e62989c23440a91581.png)

我不需要尽可能多的矩形进入黑色，目标是尽可能多地填充黑色矩形，最好的情况是完全。

实际上，有许多“黑色”矩形和数千个“红色”，我正在寻找一种有效的算法来计算。我必须在 ECMA-/Javascript 中实现它，所以它并不是所有平台中最快的。

我研究了一些算法，例如 Richard E. Korf 的“Optimal Rectangle Packing”或“Bin packings questions”，但我无法真正针对这个特定问题翻译这些算法。

有人可以推荐我一种方法/算法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T16:09:11.070

因为你的红色和黑色三角形都有一个定义的宽度，你可以将问题简化为数轴，可以这么说。基本上，如果您将红色的一侧翻转过来，您很可能最终会浪费空间 - 比以“正常装配”方式放置更多的空间。

因此，考虑到这一点，您可以将问题精确地简化为传统的背包问题，其中容量是黑色矩形的高度，红色三角形的“重量”是它们的高度。宽度可以完全从问题中抽象出来。

另一个优点（正如 xvatar 所指出的）是候选人的价值密度都是相等的。也就是说，您没有传统背包问题的“砖环”问题。考虑到在背包和戒指之间进行选择来填充您的背包，戒指是显而易见的候选者。在这种情况下，它们都是相同的，因此没有明显的候选者。

看起来大块是容易的候选者，但这种贪婪的方法行不通。考虑剩下 5 个单位空间的场景，我们有 4、3 和 2 个砖块。如果我们采用贪婪解决方案，我们添加 4 个，留下 1 个开放空间。如果我们改为使用 3 和 2，我们将没有剩余的 1 个开放空间。

还需要注意的是，一旦您确定了哪些矩形进入，它们进入的顺序无关紧要。

进一步阅读：[http ://en.wikipedia.org/wiki/Knapsack_problem](http://en.wikipedia.org/wiki/Knapsack_problem)

# linux - 检索在线资源的 md5 哈希值

> ID：11455920
> 
> 赞同：0
> 
> 时间：2012-07-12T16:02:13.523
> 
> 标签：linux, hash, md5

我正在编写一个脚本，仅当该资源在 linux 机器上本地不存在时才尝试下载该资源。对于本地资源，我可以使用命令 md5sum 获取哈希值，我希望能够检索在线资源的 md5 哈希，而无需先下载它。是否有任何命令行实用程序能够做到这一点？

例如：

```
#> md5sum http: / / some_domain/some_resource_file 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:04:42.303

Sure:

```
curl http://example.com | md5sum 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T16:49:23.700

```
wget -O- <URL> | md5sum 
```

可能做。

# expressionengine - 表达式引擎隐藏 index.php 无法正常工作

> ID：11455921
> 
> 赞同：0
> 
> 时间：2012-07-12T16:02:17.697
> 
> 标签：expressionengine

我正在一个网站上工作，该网站在其他人对该网站进行一些更改之前就可以工作。现在，我必须将 index.php 包含到 URL 中，然后联系表单才能起作用。

这是我正在使用的 htaccess 文件代码：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?/$1 [L] 
```

我在这里想念什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:10:52.973

`?`after`index.php`向我表明您正在将 PHP 作为 CGI 运行......也许这已经改变了？

另见：[https ://stackoverflow.com/a/11143216/174299](https://stackoverflow.com/a/11143216/174299)

# sql - 具有最大子查询的 SQL Server 2000 索引视图

> ID：11455925
> 
> 赞同：0
> 
> 时间：2012-07-12T16:02:46.133
> 
> 标签：sql, sql-server, sql-server-2000

我有一个很大的合同表，并且我们有许多存储过程来查询状态为 Open 的合同。只有不到 10% 的合约是开放的，而且随着数据库的增长，这个数字正在缩小。我想我可以创建一个未结合约的索引视图，以加快我们的一些查询。问题是状态不在合同表上，我需要一个子查询来检索我想要的数据。（SQL Server 然后在我查看的查询中对整个表进行聚集索引扫描）

这是视图的精简版（我从合约表中删除了其他 30 列）

```
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE VIEW [dbo].[vw_OpenContractsIndexed]
WITH SCHEMABINDING 
AS
SELECT     c.ContractID
FROM         dbo.NMPT_Contract AS c INNER JOIN
                      dbo.NMPT_ContractStatus AS cs ON c.ContractID = cs.ContractID AND cs.ContractStatusCreated =
                          (SELECT     MAX(ContractStatusCreated) AS Expr1
                            FROM          dbo.NMPT_ContractStatus AS cs2
                            WHERE      (ContractID = c.ContractID)) INNER JOIN
                      dbo.CMSS_Status AS s ON cs.StatusID = s.StatusID
WHERE     (s.StatusCode = 'OPN') 
```

如果我尝试在视图上创建索引（唯一聚集在`contractid`）我得到以下

> 索引创建失败
> 它包含一个或多个不允许的构造。（Microsoft SQL Server，错误 1936）

从我可以收集到的问题是子查询中的最大值？

除了将状态放在合同表上（我个人认为它所属的位置）之外，还有什么建议可以优化这种情况。如果不这样做，其他版本的 SQL Server 是否会允许此索引视图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T16:12:46.747

[来自 TechNet 关于 SS 2000 中的索引视图：](http://technet.microsoft.com/en-us/library/cc917717.aspx)

> 视图定义的语法有几个限制。视图定义不得包含以下内容：
> 
> 数数（*）
> 
> ROWSET 函数
> 
> 派生表
> 
> 自加入
> 
> 清楚的
> 
> 标准差、方差、平均值
> 
> Float*、text、ntext、image 列
> 
> 子查询
> 
> 全文谓词（CONTAIN、FREETEXT）
> 
> 对可空表达式求和
> 
> 最小值、最大值
> 
> 最佳
> 
> 外连接
> 
> 联盟

您正在使用`MAX`, 和一个子查询，这两者都是不允许的。

要获得有关如何解决此问题的建议，您需要分享一些数据以及您正在尝试做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:27:39.453

它不是“视图”解决方案，需要更多工作才能完成，但您可以创建非规范化表来保存视图的结果。这样，所有对 Open 合约的读取都可以与该表背道而驰。这将是最快的，但需要维护新表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T12:15:30.257

创建索引视图是一项非常困难的任务，因为它有很多限制，而且还与自连接有关。你有自己加入这里。没有其他意见等。

如果您在这种情况下仅使用像“OPEN”这样的单个状态，则此类主表的其他事情我建议不要加入表（带有状态代码的主表），只需声明 statusid 变量，然后存储状态的值在那里打开，然后在最终查询中使用该值。这将避免与主表的额外连接。

我建议您在最终语句中加入合同表之前将打开状态的数据存储在临时表中。您可以对 statusid、customerid 和 contractcreationdate 进行索引。然后强制此索引将contractId放入临时表中

```
 select contractid into #temp from NMPT_ContractStatus 
where statusid =@statusid group by contractid          
having     datefield = max(datefield) 
```

现在将此临时表与合同表连接起来。

但在创建任何类型的索引之前，请确保这些索引的开销远低于您获得的收益。

# powershell - ping PC、输出表的简单脚本 - 有什么问题？

> ID：11455927
> 
> 赞同：1
> 
> 时间：2012-07-12T16:02:51.657
> 
> 标签：powershell

我试图编写一个简单的脚本来 ping 计算机列表，并将结果输出到表格中。我最终这样做了，效果很好：

```
Get-ADComputer -searchbase "OU=Materials,OU=MMC Computers,OU=REI,DC=REIDOMAIN,DC=LOCAL" -filter * | select -expand name | % {
    $output = New-Object PSObject
    $output | Add-Member NoteProperty "Computer name"($_)
    $output | Add-Member NoteProperty "Ping result"("$($(Test-Connection $_ -count 1 -quiet).ToString())")
    write $output } 
```

但是，我想了解为什么我的前两次尝试都没有成功，这样我以后就可以避免犯同样的错误。他们来了：

**脚本 1：*见下面的编辑***

```
Get-ADComputer -searchbase "OU=Materials,OU=MMC Computers,OU=REI,DC=REIDOMAIN,DC=LOCAL" -filter * | 
select -expand name | % { $computer = $_; $obj = "" | 
select @{Name="Computer";Expression="$computer"},`
@{Name="Pingable";Expression="$($(Test-Connection $computer -count 1 -quiet).ToString())"} 
$obj } 
```

**输出 1：**

```
Computer                                 Pingable
-----—                                   -----— 
```

*注意：*在表格标题下，此脚本实际上为我正在 ping 的每台计算机打印一个空白行。

**脚本 2：**

```
$table = @{Expression={$_};Label="Computer"},@{Expression={"$($(Test-Connection $_ -count 1 -quiet).ToString())"};Label="Pingable"}
Get-ADComputer -searchbase "OU=Materials,OU=MMC Computers,OU=REI,DC=REIDOMAIN,DC=LOCAL" -filter * | select -expand name | format-table $table 
```

**输出 2：**

```
mickeymouse
goofy
minnie
pluto
frank 
```

这个甚至不输出表格......它只是每行打印一个计算机名称。

如果有人能解释这两次尝试中出了什么问题，我将不胜感激。谢谢！

**编辑：**让脚本 1 工作。

```
Get-ADComputer -searchbase "OU=Materials,OU=MMC Computers,OU=REI,DC=REIDOMAIN,DC=LOCAL" -filter * | 
select @{Name="Computer";Expression={$_.Name}},@{Name="Pingable";Expression={"$($(Test-Connection $_.Name -count 1 -quiet).ToString())"}}; 
```

仍然对脚本 2 感到好奇

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T18:28:13.293

在您的第二个示例中，您使用的`-ExpandProperty`是`Select-Object`有效地从对象中剥离数据并输出字符串数组，`format-table`然后输出为列表的字符串。

看这个例子：

```
#First create the array of objects
$rawData = @( @{"Name"="First Obj"; "OtherParam"=1;}, @{"Name"="Second Obj"; "OtherParam"=2;})
$objects = $rawData | %{new-object -type psobject -prop $_}

#Just output the objects
$objects | format-table 
```

*输出：*

```
Name                              OtherParam
----                              ---------- 
First Obj                                  1 
Second Obj                                 2 
```

现在选择名称属性，这给出了一个只有一个属性“名称”的对象数组

```
$objects | select name | format-table 
```

*输出：*

```
Name
----
First Obj
Second Obj 
```

展开 name 属性，这给出了一个格式化表格的字符串数组，它只列出没有标题：

```
$objects | select -expand name | format-table 
```

*输出：*

```
First Obj
Second Obj 
```

# c# - 起订量，如何匹配 2 个参数？

> ID：11455928
> 
> 赞同：1
> 
> 时间：2012-07-12T16:02:53.517
> 
> 标签：c#, moq

我是最小起订量的新手，需要帮助来匹配 2 个参数。

这是我从快速入门中找到的示例。

```
mock.Setup(foo => foo.DoSomething(It.IsAny<string>())).Returns(true); 
```

但我的函数 Dosomething 需要 2 个参数（字符串和 AccountType），AccountType 是枚举类型。

我试过了，

```
mock.Setup(foo => foo.DoSomething(It.IsAny<string, AccountType>())).Returns(true); 
```

我知道这是错误的。请帮帮我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T16:03:51.227

只需在您的设置中添加 2 个参数：

```
mock
  .Setup(foo => foo.DoSomething(It.IsAny<string>(), It.IsAny<AccountType>()))
  .Returns(true); 
```

# asp.net-mvc-3 - 加载页面时 ASP.NET MVC 3 范围验证器失败，但文本验证工作正常

> ID：11455933
> 
> 赞同：1
> 
> 时间：2012-07-12T16:03:08.780
> 
> 标签：asp.net-mvc-3, validation, range

当我的页面以“编辑”模式加载时，我的文本字段会正确呈现，但我的数字字段会呈现错误验证文本，即使字段中的值是有效的：

![带有错误文本的数字字段加载](../Images/da504665c4972ca2249432b612d92fee.png)

我的问题出在一个更复杂的项目中，但我能够在一个开箱即用的 MVC 3 应用程序中重现它，我只是在其中添加了这些位。为什么页面加载时数字字段显示错误文本但文本字段正常？

这里发生了什么？

我的模型、控制器和视图具有以下内容：

模型：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.ComponentModel.DataAnnotations;

namespace MvcIssues.Models
{
    public enum Operations
    {
        View = 0,
        Edit = 1
    }

    public class ShowsModel
    {
        public Operations Operation { get; set; }

        [Display(Name = "Name")]
        [DataType(DataType.Text)]
        [StringLength(10)]
        public string Name { get; set; }

        [Display(Name = "Number")]
        [Required]
        [Range(typeof(int), "1", "999")]
        public int Number { get; set; }
    }
} 
```

控制器：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using MvcIssues.Models;
using MvcIssues.Data;

namespace MvcIssues.Controllers
{
    public class TestController : Controller
    {
        // GET: /Test/Shows
        [AcceptVerbs(HttpVerbs.Get)]
        [ActionName("Shows")]
        [Authorize]
        public ActionResult SelectedShows()
        {
            ShowsData shows = MvcApplication.Shows;

            ShowsModel model = new ShowsModel();

            model.Operation = Operations.View;
            model.Name = shows.Name;
            model.Number = shows.Number;

            return View(model);
        }

        // POST: /Test/Shows
        [AcceptVerbs(HttpVerbs.Post)]
        [ActionName("Shows")]
        [ValidateInput(false)]
        [Authorize]
        public ActionResult ShowsSubmit(ShowsModel data)
        {
            string name = data.Name;
            int number = data.Number;

            ShowsModel model = new ShowsModel();

            if (Request.Form.AllKeys.Contains("btnEdit"))
            {
                ShowsData shows = MvcApplication.Shows;
                model.Name = shows.Name;
                model.Number = shows.Number;

                model.Operation = Operations.Edit;
            }
            else if (Request.Form.AllKeys.Contains("btnCancel"))
            {
                ShowsData shows = MvcApplication.Shows;

                model.Name = shows.Name;
                model.Number = shows.Number;

                model.Operation = Operations.View;
            }
            else if (Request.Form.AllKeys.Contains("btnSaveEdit"))
            {
                ShowsData shows = MvcApplication.Shows;

                shows.Name = name;
                shows.Number = number;

                model.Name = shows.Name;
                model.Number = shows.Number;

                model.Operation = Operations.View;
            }

            return View("Shows", model);
        }
    }
} 
```

看法：

```
@model MvcIssues.Models.ShowsModel

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

<h2>Test Page</h2>

<div>
    Show = @this.ViewData.Model.Name
    <br />
    Number = @this.ViewData.Model.Number.ToString()
</div>

<hr />

<div>
    @Html.ValidationSummary(true, "oops!")

    @using (Html.BeginForm())
    {
        <div>

            Name: @(this.ViewData.Model.Operation == MvcIssues.Models.Operations.View ?
                Html.TextBoxFor(m => m.Name, new { disabled = "disabled", maxLength = "20" })
            :
                Html.TextBoxFor(m => m.Name))
            @Html.ValidationMessageFor(m => m.Name)

            <br />

            Number: @(this.ViewData.Model.Operation == MvcIssues.Models.Operations.View ?
                Html.TextBoxFor(m => m.Number, new { disabled = "disabled" })
            :
                Html.TextBoxFor(m => m.Number))
            @Html.ValidationMessageFor(m => m.Number)

        </div>

        <div>
            @switch (this.ViewData.Model.Operation)
            {
                case MvcIssues.Models.Operations.Edit:
                    <input type="submit" name="btnSaveEdit" value="Save" />
                    <input type="submit" name="btnCancel" value="Cancel" />
                    break;
                case MvcIssues.Models.Operations.View:
                default:
                    <input type="submit" name="btnEdit" value="Edit" />
                    break;
            }
        </div>        
    }

</div> 
```

如果有人可以帮助我，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-07T21:24:16.257

我也有同样的问题。这是造成它的原因，以及我如何修复它：

原因：

```
[Authorize]
[HttpGet]
public ActionResult BidToolv2(BidToolv2ViewModel model)
{
    ... 
```

修复：

```
[Authorize]
[HttpGet]
public ActionResult BidToolv2()
{
    BidToolv2ViewModel model = new BidToolv2ViewModel(); 
```

本质上问题是当用户第一次访问页面时，控制器采用了一个空模型，当页面加载时，它假设它已经通过了模型（也许？）。不完全确定，但为了修复它，我删除了模型作为参数，而是在控制器动作本身中创建了一个模型

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T17:28:54.597

您需要必填以确保输入了某些内容。

您需要 Range 来确保输入的值符合您的要求

```
 Example:

    [Required(ErrorMessage="Weekly Rental value is required")]
    [Range(1, 9999, ErrorMessage = "Value must be between 1 - 9,999")]
    public string WeeklyRental { get; set; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T19:45:38.963

好的，将其发布[到](http://forums.asp.net/t/1823443.aspx/1?ASP%20NET%20MVC%203%20RequiredAttribute%20Validator%20fields%20display%20error%20text%20when%20page%20loads%20even%20theough%20there%20is%20valid%20data)asp.net 论坛。可能是同一个问题的措辞更简洁的版本。

解决方案有点破解，但似乎运行良好 - 为有问题的视图模型类创建了空构造函数，并在空构造函数中将属性初始化为有效值。成功了。

# jquery - 在 PhoneGap 中退出移动应用程序？

> ID：11455938
> 
> 赞同：1
> 
> 时间：2012-07-12T16:03:21.913
> 
> 标签：jquery, cordova, exit

我正在使用 JQuery Mobile 和 PhoneGap 构建一个项目。

有没有办法在用户点击后退按钮时退出应用程序（在 android 上退出应用程序的标准方式），但您在 web 视图中仍然有很多“历史记录”。

问题我有用户可以浏览很多页面，然后我提供了一个按钮让他们直接进入起始页。如果他们点击手机后退按钮，他们将退出应用程序。

我已阅读有关 navigator.app.exitApp() 的信息，但在 PhoneGap 上找不到任何文档（或者它可能不是 PhoneGap 代码？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-01T09:50:33.863

我使用此代码关闭我的应用程序。

在您的主活动（Java 类）中添加此覆盖

```
@Override
public void onBackPressed() {
    super.loadUrl("javascript:onBackKeyDown()");
    return;
} 
```

在您的 HTML 中：

```
function onLoad() {
    document.addEventListener("deviceready", onDeviceReady, false);
}

function onDeviceReady() {
    // Register the event listener
    document.addEventListener("backbutton", onBackKeyDown, false);
}

// Handle the back button
function onBackKeyDown() {
    // Exit the app!
    navigator.app.exitApp();
} 
```

# javascript - 地理位置许可，不在 Facebook 上？

> ID：11455940
> 
> 赞同：0
> 
> 时间：2012-07-12T16:03:22.367
> 
> 标签：javascript, facebook, html, geolocation

刚开始玩地理定位。我看到你收到了一个关于我是否想分享我的位置的请求（至少在 Firefox 中）。

但后来我想知道，Facebook 是如何在不问同样问题的情况下获取我的位置的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:05:00.470

They don't.

Facebook, and many other sites, use your IP address and public WHOIS data to guess where you are.

There are many databases available for this sort of lookup. I've used [MaxMind's free database](http://www.maxmind.com/app/ip-location) with decent success.

# linux - cmake在Linux上复制fortran模块失败

> ID：11455942
> 
> 赞同：0
> 
> 时间：2012-07-12T16:03:37.937
> 
> 标签：linux, cmake, fortran

我有一个使用 cmake 构建的 fortran 代码构建。这目前在 Mac OS X 上运行，但是当我尝试在 Linux 上构建它时，它失败了。Cmake 成功生成了makefile，但是当我尝试运行makefile 时，它​​在尝试复制模块时失败了。

顶级 cmake 文件是：

```
cmake_minimum_required (VERSION 2.8)

# Start Project and note the language used.
project (v3fit_suite Fortran)

# Set a directories to build all binary files.
set (EXECUTABLE_OUTPUT_PATH ${CMAKE_CURRENT_SOURCE_DIR}/build/bin)
set (LIBRARY_OUTPUT_PATH ${CMAKE_CURRENT_SOURCE_DIR}/build/lib)

# Fortran specific settings. The first setting tells the compiler to use the C preprocessor. The second places a common directory to place all of the module files.
set (CMAKE_Fortran_FLAGS "${CMAKE_Fortran_FLAGS} -cpp")
set (CMAKE_Fortran_MODULE_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/build/modules)

# List all the subdirectories these are in library dependancy order.
add_subdirectory (LIBSTELL)
add_subdirectory (VMEC2000)
add_subdirectory (V3FITA)
add_subdirectory (MAKEGRID)
add_subdirectory (V3POST)
add_subdirectory (V3RFUN) 
```

所有模块都应复制到 build/modules。当我在 Linux 上使用 VERBOSE=1 运行 Makefile 时，我得到：

```
/usr/bin/cmake -H/home/user/reconstruction -B/home/user/reconstruction --check-build-system CMakeFiles/Makefile.cmake 0
/usr/bin/cmake -E cmake_progress_start /home/user/reconstruction/CMakeFiles /home/user/reconstruction/CMakeFiles/progress.marks
make -f CMakeFiles/Makefile2 all
make[1]: Entering directory `/home/user/reconstruction'
make -f LIBSTELL/CMakeFiles/stell.dir/build.make LIBSTELL/CMakeFiles/stell.dir/depend
make[2]: Entering directory `/home/user/reconstruction'
cd /home/user/reconstruction && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/user/reconstruction /home/user/reconstruction/LIBSTELL /home/user/reconstruction /home/user/reconstruction/LIBSTELL /home/user/reconstruction/LIBSTELL/CMakeFiles/stell.dir/DependInfo.cmake --color=
make[2]: Leaving directory `/home/user/reconstruction'
make -f LIBSTELL/CMakeFiles/stell.dir/build.make LIBSTELL/CMakeFiles/stell.dir/requires
make[2]: Entering directory `/home/user/reconstruction'
make -f LIBSTELL/CMakeFiles/stell.dir/build.make LIBSTELL/CMakeFiles/stell.dir/Sources/Modules/stel_kinds.f.o.provides.build
make[3]: Entering directory `/home/user/reconstruction'
/usr/bin/cmake -E cmake_progress_report /home/user/reconstruction/CMakeFiles 
[  0%] Building Fortran object LIBSTELL/CMakeFiles/stell.dir/Sources/Modules/stel_kinds.f.o
cd /home/user/reconstruction/LIBSTELL && /usr/bin/f95  -o CMakeFiles/stell.dir/Sources/Modules/stel_kinds.f.o  -cpp  -J../build/modules   -c /home/user/reconstruction/LIBSTELL/Sources/Modules/stel_kinds.f
/usr/bin/cmake -E cmake_copy_f90_mod build/modules/stel_kinds LIBSTELL/CMakeFiles/stell.dir/stel_kinds.mod.stamp GNU
Error copying Fortran module "build/modules/stel_kinds".  Tried "build/modules/STEL_KINDS.mod" and "build/modules/stel_kinds.mod".
make[3]: *** [LIBSTELL/CMakeFiles/stell.dir/Sources/Modules/stel_kinds.f.o.provides.build] Error 1
make[3]: Leaving directory `/home/user/reconstruction'
make[2]: *** [LIBSTELL/CMakeFiles/stell.dir/Sources/Modules/stel_kinds.f.o.provides] Error 2
make[2]: Leaving directory `/home/user/reconstruction'
make[1]: *** [LIBSTELL/CMakeFiles/stell.dir/all] Error 2
make[1]: Leaving directory `/home/user/reconstruction'
make: *** [all] Error 2 
```

使用 gfortran 而不是 f95 作为编译器时，我遇到了同样的问题。为什么这在 Mac OS X 上工作但在 Linux 上失败？在 Mac OS XI 上安装了 2.8.8 版的 cmake，在 Linux 上安装了 2.8 版。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:18:55.037

原来有一个看似无关的错误导致了这个问题。我有一些语句要添加一个空的包含路径。

```
find_library (NETCDF_F netcdff PATHS ${NETCDF_LIB_PATH})
find_file (NETCDF_I netcdf.inc ${NETCDF_INC_PATH})
if (NETCDF_C AND NETCDF_F AND NETCDF_I)
    message (STATUS "Using netcdf")
    set (CMAKE_Fortran_FLAGS "${CMAKE_Fortran_FLAGS} -D NETCDF -I ${NETCDF_INC_PATH}")
endif () 
```

即使 'NETCDF_INC_PATH' 为空，if 语句也始终为真。这导致编译器命令行中出现了一个额外的 -I ，这把一切都搞砸了。

# android - python sl4a unicode (安卓)

> ID：11455951
> 
> 赞同：1
> 
> 时间：2012-07-12T16:04:02.943
> 
> 标签：android, python, unicode, python-2.6, sl4a

有人对这个有经验么？

最近半年一直在用python 3.2，对2.6.2的记忆力不是很好。

在我的计算机上，以下代码有效，使用 2.6.1 进行了测试：

```
import contextlib
import codecs

def readfile(path):
    with contextlib.closing( codecs.open( path, 'r', 'utf-8' )) as f:
        for line in f:
            yield line

path = '/path/to/norsk/verbs.txt'

for i in readfile(path):
    print i 
```

但在电话上，它会到达第一个特殊字符`ø`并抛出：

`UnicodeEncodeError: 'ascii' codec can't encode character u'\xf8' in position 3: ordinal not in range(128)`

我需要输入它们以及从文件中读取的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T16:16:26.527

打印是一种 I/O 操作。I/O 需要字节。您拥有的`i`是 unicode 或字符。当我们谈论 ascii 时，字符仅直接转换为字节，但在您的手机上您遇到了非 ascii 字符（[u'\xf8' 是 ø](http://shapecatcher.com/unicode_info/248.html)）。要将字符转换为字节，您需要对它们进行编码。

```
import contextlib
import codecs

def readfile(path):
    with contextlib.closing( codecs.open( path, 'r', 'utf-8' )) as f:
        for line in f:
            yield line

path = '/path/to/norsk/verbs.txt'

for i in readfile(path):
    print i.encode('utf8') 
```

* * *

至于为什么这适用于您的代码在一台机器上而不是另一台机器上工作，我敢打赌，python 的自动检测在这些情况下会发现不同的东西。在每台设备上运行：

```
$ python
>>> import sys
>>> sys.getfilesystemencoding()
'UTF-8' 
```

我希望你会在一个上看到 utf8，在另一个上看到 ascii。当目的地是终端时，这就是 print 使用的内容。如果你确定你的 python 安装的所有用户（很可能只有你）更喜欢 utf8 而不是 ascii，你可以更改 python 安装的默认编码。

1.  找到你的 site.py：`python -c 'import site; print site`
2.  打开它，找到 setencoding 函数：

    ```
    def setencoding(): 
        """Set the string encoding used by the Unicode implementation.  The 
        default is 'ascii', but if you're willing to experiment, you can 
        change this.""" 
        encoding = "ascii" # Default value set by _PyUnicode_Init() 
    ```

3.  `encoding = "ascii"`将行更改为`encoding = "UTF-8"`

享受 Just Work 的乐趣。您可以在此处找到有关此主题的更多信息：http: [//blog.ianbicking.org/illusive-setdefaultencoding.html](http://blog.ianbicking.org/illusive-setdefaultencoding.html)

如果您希望像 python3 提供的那样严格分隔字节与字符，您可以设置`encoding = "undefined"`. 编解码器将`undefined`“[为所有转换引发异常。如果不需要字节和 Unicode 字符串之间的自动强制转换，则可以用作系统编码。](http://docs.python.org/library/codecs#standard-encodings) ”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T16:18:08.857

print 函数需要将字符串转换为可打印的形式，因为 unicode 字符串不能自动打印。使用 repr 包装`print repr(i)`将允许您打印，但您可能希望指定编码。

# android - 在 Android 上小范围显示物品的位置，而不是通过谷歌地图

> ID：11455956
> 
> 赞同：-1
> 
> 时间：2012-07-12T16:04:23.667
> 
> 标签：android, listview, map, location

我希望在地图上显示一个小区域的项目列表，比如在一个房间里，所以我不能为此使用谷歌地图。但我仍然需要一些基本功能，显示当前位置、目标位置和方向。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T19:41:16.063

忘了对此做个总结——后来我使用了一些室内定位系统来解决这个问题。

# ruby-on-rails-3 - 管理员用户的批量分配错误问题

> ID：11455961
> 
> 赞同：0
> 
> 时间：2012-07-12T16:04:40.603
> 
> 标签：ruby-on-rails-3

我试图遵循 railscasts 教程，该教程解释了如何为管理员处理批量分配错误和 attr_accessible，但由于这有点过时，我正在尝试遵循 3.2.6 的 rails API 坞站中的[内容](http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html#method-i-mass_assignment_sanitizer-3D)。

我要做的就是让管理员用户能够访问更新操作中提案模型的“获胜”属性。

这是我的提案模型，显示了当前的 attr_accessible。

```
class Proposal < ActiveRecord::Base
attr_accessible :email, :email_confirmation, :link, :name, :references, :short_description

belongs_to :idea 
```

这是我的提案控制器更新操作的代码。

```
class ProposalsController < ApplicationController

include ActiveModel::MassAssignmentSecurity
attr_accessible :email, :email_confirmation, :link, :name, :references, :short_description
attr_accessible :email, :email_confirmation, :link, :name, :references, :short_description, :winning, :as => :admin

def update
    @idea = Idea.find(params[:idea_id])
    @proposal = @idea.proposals.find(params[:id])

    if @proposal.update_attributes(proposal_params)
        redirect_to idea_proposals_url(@idea)
    else
        render 'edit'
    end
end

protected

    def proposal_params
        role = current_user.admin ? :admin : :default
        sanitize_for_mass_assignment(params[:proposal], role)
    end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:39:18.067

看看这个 Railscast。我在 Admin 字段 Boolean 上遇到了类似的问题，并且不希望任何用户通过发送 curl 帖子来规避安全性。如果用户是管理员，那么它使他们能够访问该字段，否则 Mass Assignment 将保护该字段不被修改。

[http://railscasts.com/episodes/237-dynamic-attr-accessible?view=asciicast](http://railscasts.com/episodes/237-dynamic-attr-accessible?view=asciicast)

# .net - 使用 LINQ 表达式和 String.Format 进行字符串比较

> ID：11455962
> 
> 赞同：0
> 
> 时间：2012-07-12T16:04:41.047
> 
> 标签：.net, string, linq, string-comparison, linq-expressions

我正在使用 LINQ 表达式动态搜索集合中的值，我遇到了一个奇怪的问题，这似乎是由搜索作为`String.Format()`操作结果的字符串引起的。

这是我正在尝试做的一个简化版本，因为在实践中我实际上并不知道我正在寻找什么类型的值，所以我必须将所有内容都视为`Object`.

```
Dim stringToFind As String = "Some Special Value"

' Create a collection of 10 strings, one of which being the string to find '
Dim myStrings As New List(Of Object)
For i As Integer = 0 To 9
    If (i = 3) Then
        myStrings.Add(String.Format(stringToFind))
    Else
        myStrings.Add("Boring Plain Old Value")
    End If
Next

' Create the predicate for <Function(x) x = stringToFind> '
Dim left = Expression.Parameter(GetType(Object), "x")
Dim right = Expression.Constant(stringToFind)
Dim eq = Expression.Equal(left, right)
Dim predicate = Expression.Lambda(Of Func(Of Object, Boolean))(eq, left).Compile()

' Compare the results '
Dim standardResults = myStrings.Where(Function(x) x = stringToFind)
Dim expressionResults = myStrings.Where(predicate)

' Expected Output:'
' Standard Method: 1 '
' LINQ Expressions: 1 '
Console.WriteLine(String.Format("Standard Method: {0}", standardResults.Count()))
Console.WriteLine(String.Format("LINQ Expressions: {0}", expressionResults.Count()))
Console.ReadLine() 
```

这里发生的是标准方法正确返回 1，而 LINQ 表达式方法返回 0。但是，如果不使用 String.Format() ( `myStrings.Add(stringToFind)`) 将特殊值添加到集合中，则表达式也会返回正确结果.

String.Format() 是否会更改字符串的编码，或者会影响如何为字符串值创建常量表达式？有没有另一种方法可以使用 LINQ 表达式比较两个值来绕过这个限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:21:08.490

VB.NET 相等运算符不进行引用比较。粗略地说，它使用`object.Equals`方法（与 相比`object.ReferenceEquals`）。表达式树使用对象引用相等。

使用`string.Format`并没有做任何特别的事情。（没有“特殊”字符串）。

# python - Change db.ComputedProperty from StringProperty to TextProperty

> ID：11455969
> 
> 赞同：1
> 
> 时间：2012-07-12T16:05:02.257
> 
> 标签：python, google-app-engine, text, properties

I am kind of new to GAE and I was trying to use @db.ComputedProperty to dynamically add field values However I am getting the error message

Property xxxx is 721 bytes long; it must be 500 or less. Consider Text instead, which can store strings of any length.

It seems that @db.ComputedProperty defaults to StringProperty Is there any way to change it to TextProperty?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T01:03:43.103

让您的计算属性返回一个实例`db.Text`而不是字符串。但是，正如 Wooble 指出的那样，这样做绝对没有意义：计算属性的存在是为了帮助建立索引，如果您不为数据编制索引，您还不如使用常规属性而不将其存储在数据存储中.

# sql - Marking duplicates in a database

> ID：11455971
> 
> 赞同：2
> 
> 时间：2012-07-12T16:05:09.770
> 
> 标签：sql, tsql

I created a table with the following fields:

```
Record:
Id                 int Primary Key, Auto Increment
ForeignId          int
IsDuplicateRecord bit NULL 
```

Then I inserted some data:

```
INSERT INTO Record (ForeignId)
VALUES (5), (5), (1), (2), (3) 
```

After that, I ran the following update statement, (found at [http://archive.msdn.microsoft.com/SQLExamples/Wiki/View.aspx?title=DuplicateRows](http://archive.msdn.microsoft.com/SQLExamples/Wiki/View.aspx?title=DuplicateRows) ):

```
UPDATE Record
SET IsDuplicateRecord = 1
WHERE Id IN (
    SELECT MAX(Id)
    FROM Record
    GROUP BY ForeignId
    HAVING COUNT(*) > 1
) 
```

So far so good, the query affected one row, and the table now looks like this:

```
Id ForeignId IsDuplicateRecord
0  5         NULL
1  5         1
2  1         NULL
3  2         NULL
4  3         NULL 
```

I was happy, because for a moment I thought everything was going to be just fine. But then a suspicion as dark as the clouds outside crossed my mind: Dreadingly, I typed

```
INSERT INTO Record (ForeignId)
VALUES (1), (1) 
```

and ran the above query again, which this time yielded:

```
Id  ForeignId  IsDuplicateRecord
0   0          NULL
1   5          1
2   1          NULL
3   2          NULL
4   3          NULL
5   1          NULL
6   1          1 
```

So I figured I'd head over to StackOverflow, and see who could explain to me why the IsDuplicatedRecord field in row with ID 5 wasn't updated to 1? Are you the one?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T16:09:23.797

Because the SQL you ran only marks the last of the duplicates as duplicates. Try this instead:

```
UPDATE Record
SET IsDuplicateRecord = 1
WHERE Id NOT IN (
    SELECT MIN(Id)
    FROM Record
    GROUP BY ForeignId
) 
```

This marks second and subsequent occurences of each `ForeignId` as duplicates as I think you require.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T17:47:10.100

```
UPDATE Record uu
SET IsDuplicateRecord = 1
   -- if there exists a record with the same foreignid
   -- but a lower id
   -- this (uu) is a duplicate
WHERE EXISTS (
    SELECT *
    FROM Record ex 
    WHERE ex.ForeignId = uu.ForeignId
    AND ex.Id < uu.Id
    ); 
```

There is a subtle *(but rude)* difference between this `EXISTS (...)` subquery and @DavidM 's `NOT IN (...)` subquery: The `NOT IN` will not yield NULL values, and if "ForeignId" happens to be NULL, the NOT IN version would be "True", resulting in setting all isDuplicateRecord flag for all tuples with ForeignId IS NULL. (I suspect ForeignId is a FK, so it could well be NULLable)

For not-nullable ForeignId, the two versions are basically the same.

UPDATE: as @MartinSmith pointed out, Some implementations don't like a UPDATE ... WHERE without a FROM clause. We can use a selfjoined dummy. (also updated the first query to normal)

```
-- DROP SCHEMA tmp CASCADE;
-- CREATE SCHEMA tmp ;
-- SET search_path='tmp';

DROP TABLE zrecord CASCADE;
CREATE TABLE zrecord
        ( id SERIAL NOT NULL PRIMARY KEY
        , foreign_id INTEGER -- REFERENCES zrecord(id)
        , is_duplicate boolean DEFAULT False
        );
SELECT * FROM zrecord;

INSERT INTO zrecord(foreign_id) VALUES(NULL),(1),(NULL),(1),(NULL),(2),(NULL);

SELECT * FROM zrecord;

EXPLAIN ANALYZE
UPDATE zrecord uu
SET is_duplicate = True
        --
        -- This selfjoin is needed if UPDATE ... WHERE needs a FROM TABLE
        --
FROM zrecord dum
WHERE  dum.id = uu.id
AND EXISTS (
    SELECT *
    FROM zrecord ex
    WHERE ex.foreign_id = uu.foreign_id
    AND ex.Id < uu.Id
    );

SELECT * FROM zrecord; 
```

UPDATE2: the PARTITION BY suffers from the same nullability problem as the IN clause, so it seems:

```
WITH zcte AS (
    SELECT *
    , row_number() OVER (PARTITION BY foreign_id ORDER BY id) AS rn
    FROM   zrecord
    )
SELECT * FROM zcte; 
```

RESULT: (the original testset, before any update)

```
 id | foreign_id | is_duplicate | rn 
----+------------+--------------+----
  2 |          1 | f            |  1
  4 |          1 | t            |  2
  6 |          2 | f            |  1
  1 |            | f            |  1
  3 |            | f            |  2
  5 |            | f            |  3
  7 |            | f            |  4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T12:05:38.910

This has a lower estimated cost than either of the other two answers

```
;WITH CTE
     AS (SELECT *,
                Row_number() OVER (PARTITION BY ForeignId ORDER BY Id) AS RN
         FROM   Record)
UPDATE CTE
SET    IsDuplicateRecord = 1
WHERE  RN > 1 
```

### Execution Plans

[![Plans](../Images/a932cfd3c315b5d3d4d464b3a00b6958.png)](https://i.stack.imgur.com/WIdJR.jpg)

# unit-testing - 动态 CRM 2011 模拟

> ID：11455978
> 
> 赞同：2
> 
> 时间：2012-07-12T16:05:24.380
> 
> 标签：unit-testing, mocking, dynamics-crm, dynamics-crm-2011, crm

我一直在为通过 SDK 显示 Dynamics CRM 2011 数据并使用 Mocks 模拟交易的服务设置一些单元测试。这对于大多数简单事务来说都可以，但是，现在我需要测试一种方法，该方法利用来自 SDK 的 RetrieveAttributeRequest 消息来检索 OptionSetValue 标签。为了能够模拟返回的对象，需要确切了解此方法如何检索属性数据，但我无法找到此信息。

1）这是解决此问题的正确方法，还是我们将集成测试作为主要选项。2）如果这是有效的，那么请求的数据来自哪个表？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:19:18.387

要（仅！）回答您问题的第二部分，`OptionSetValues`存储在`StringMap`表中，关键字段为`AttributeName`（`OptionSet`字段名称）、`AttributeValue`（的整数值`OptionSetValue`）、`Value`（字符串值）和`ObjectTypeCode`（相关的整数标识符实体）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T10:42:48.193

供参考：我们最终将我们的“GetOptionSetMetadata”方法（利用 RetrieveAttributeRequest'）抽象为一个通用接口。然后创建了该方法的 Mock 实现，该方法纯粹返回一个表示 Label 和 Value 选项集值的 Dictionary。这样我们就不需要在 mockServiceContext 中实际模拟特定的返回对象。

# css - CSS h1 标签与 span - font-size 累积；为什么？

> ID：11455980
> 
> 赞同：2
> 
> 时间：2012-07-12T16:05:29.873
> 
> 标签：css, html, font-size

我有一个跨度的 h1 标签，第一个单词在 1.4em 中，其余的在 1.2em 中。如果我写

```
.item.large h1 {
font-size: 1.4em;
padding-top: 0.3em;
margin-left: 0.4em;
}

.item.large h1 span {
font-size: 1.2em; // why is this not taken into account?
} 
```

span 中的单词实际上比 1.4em 还要大，而不是更小！为什么会发生这种意外的增长以及如何正确设置 h1 标签的一部分？谢谢！

**编辑：**如果我使用 0,857142857142857em 作为跨度，我在视觉上会得到 1.2em 的高度，但这不是这样做的方法，我敢肯定......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T16:07:58.263

**em**大小单位是相对于父元素的。您可以使用**rem**单位来相对于文档的主要单位大小，因此是常数。

有关更多信息，请参阅[http://snook.ca/archives/html_and_css/font-size-with-rem](http://snook.ca/archives/html_and_css/font-size-with-rem)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T16:07:46.217

因为 em 是一个相对的度量单位（对于它的父级）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-06T09:37:07.663

您可以在 CSS 上使用此代码：

```
#title h1{
display: block;
font: 24px "Trebuchet MS", Arial, Helvetica, sans-serif;
color: #fff;
}
#title h1>span {
display: block;
font-size: 11px;
color: #fff;
} 
```

在您的 HTML 代码中：

```
<h1 id="title">My Title<br><span>My Second Title</span></h1> 
```

# jquery - trigger infinite-scroll when there's not enough content for scroll bar on page load

> ID：11455986
> 
> 赞同：14
> 
> 时间：2012-07-12T16:06:03.880
> 
> 标签：jquery, infinite-scroll

I'm using the great infinite-scroll plugin- [http://www.infinite-scroll.com/infinite-scroll-jquery-plugin/](http://www.infinite-scroll.com/infinite-scroll-jquery-plugin/)

But on larger screen resolutions there's not enough posts to display a scroll bar so the infinite-scroll never gets triggered. Wondered if these a way around this without having a large number of initial posts.

Guessing some kind of if statement to check browser height etc. But how do i then trigger the infinite-scroll if it returns true.

Any ideas

Thanks

Ben

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-02T14:46:05.727

进行快速检查的一种方法是：

```
// Force 'retrieve' for next page if window is taller than document
if($(window).height() >= $(document).height()){
$wall.infinitescroll('retrieve');
}; 
```

如果需要，您可能需要将其转换为用于多个“检索”的函数，直到窗口不高于文档。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-31T00:15:39.513

对于较新版本的无限滚动，设置选项

```
prefill: true 
```

[这个解决方案是在 github](https://github.com/paulirish/infinite-scroll/issues/227)上创建和讨论的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-27T16:00:52.803

我知道问题已经过时了，但这会对你们中的许多人有所帮助。

@Luigi 答案很好，但是如果加载一次内容以显示滚动条还不够呢？

这应该做得最好

```
var no_scrollbar_workaround = setInterval(function checkVariable() {

           if($(window).height() >= $(document).height()) {
                    jsonloader(); //here you put your function for more content
            } else {
                    clearInterval(no_scrollbar_workaround);
            }
}, 1000); 
```

这将运行多次，直到需要实际显示滚动条。

您可以测试此功能，并在尽可能缩小页面时看到它的所有荣耀`Ctrl` `+` `-`。

在显示滚动条之前，您将看到对新内容的调用。

# jquery - Displaying image from database

> ID：11455987
> 
> 赞同：0
> 
> 时间：2012-07-12T16:06:09.870
> 
> 标签：jquery, asp.net, image, download

I'm working on this image displaying from database. I'm converting the byte array from database to an image display it on my image tag.

Here is how I upload the image:

```
$("#uploadBtn").live("click", function () {

$("#uploading")
    .ajaxStart(function () {
        $(this).show();
    })
    .ajaxComplete(function () {
        $(this).hide();
    });

$.ajaxFileUpload
    (
        {
            url: 'AjaxFileUploader.ashx?user=' + userId,
            secureuri: false,
            fileElementId: 'uploadControl',
            dataType: 'json',
            data: '{}',
            success: function (mydata) {

                alert("Image Successfully Uploaded");

                $('#imgdefaultphoto').attr('src', 'ImageRetrieval.ashx?user=' + userId); //referencing the ImageRetrieval handler

                hideUploadMask();
            },
            error: function () {

            }
        }
    )
  }); 
```

I'm having an exception:

```
 Argument exception Parameter is not valid. at the line with (*). 
```

**ImageRetrieval.ashx**:

```
 public void ProcessRequest(HttpContext context)
    {
        string userid = context.Request.QueryString["user"];
        DBAccess dbacc = new DBAccess();
        DataTable dt = dbacc.getImage(userid);
        byte[] image = ((byte[])dt.Rows[0]["UserImage"]);
        System.Drawing.Image img = byteArrayToImage(image);

        MemoryStream stream = new MemoryStream();
        img.Save(stream, System.Drawing.Imaging.ImageFormat.Jpeg);
        img.Dispose();
        stream.Position = 0;
        byte[] data = new byte[stream.Length];
        stream.Read(data, 0, (int)stream.Length);
        stream.Dispose();
        context.Response.Clear();
        context.Response.ContentType = "image/jpeg";
        context.Response.BinaryWrite(data);
    }

    public Image byteArrayToImage(byte[] byteArrayIn)
    {
        MemoryStream ms = new MemoryStream(byteArrayIn);
        Image returnImage = Image.FromStream(ms);  // exception line (*)
        return returnImage;
    } 
```

Any ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T21:19:01.847

根据此处的文档：http: [//msdn.microsoft.com/en-us/library/93z9ee4x.aspx](http://msdn.microsoft.com/en-us/library/93z9ee4x.aspx)，如果提供的流为空，Image.FromStream 将引发参数异常（检查您的代码，它不会t be) 或不包含有效图像。我怀疑是后者。

这是我要尝试的：就在您在这里的代码中获取字节数组之后：

```
byte[] image = ((byte[])dt.Rows[0]["UserImage"]); 
```

将图像数据写入本地文件并检查它 - 我怀疑你会发现它不是图像。如果是这种情况，那么您的问题就变成了“为什么没有上传有效的图像？”。

# c++ - unique_ptr：如何安全地共享原始指针

> ID：11455989
> 
> 赞同：1
> 
> 时间：2012-07-12T16:06:11.443
> 
> 标签：c++, c++11, unique-ptr

我正在创建一个由 a 管理的类`unique_ptr`，但由于各种原因，我需要让实现访问指向对象的原始指针。但是我想确保用户不会无意中删除底层对象。我提出了以下示例代码：（
它是树结构的一部分，我需要能够查看树节点的成员而不实际分离它们。`shared_ptr`在这种情况下似乎有点过分了。）

```
#include <memory>

using namespace std;

class unOnly
{
    ~unOnly() {}
public:
    unOnly() {}
    friend class default_delete<unOnly>;
};

int main()
{
    unique_ptr<unOnly> ptr(new unOnly());
} 
```

这在 gcc 4.4.5 中为我编译。但是，我可以确定在所有实现`default_delete`中实际上是什么`delete`对象，而不是某些私有实现类？我应该写自己的删除器来确定吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T16:35:52.443

为什么不

```
class unOnly
{
    unOnly() {}
    ~unOnly() {}
    struct deleter { void operator()(unOnly* x) { delete x; }};

public:
    typedef std::unique_ptr<unOnly, deleter> handle;

    static handle create() { return handle(new unOnly); }
};

auto x = unOnly::create(); 
```

? 甚至

```
class unOnly
{
    ~unOnly() {}
    struct deleter { void operator()(unOnly* x) { delete x; }};

public:
    unOnly() {}
    typedef std::unique_ptr<unOnly, deleter> handle;
};

unOnly::handle x(new unOnly); 
```

（我更喜欢前者，但后者可能更符合您的要求）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:09:16.827

（除了拥有一个拥有它的指针的对象之外）的要点`unique_ptr`是您可以将一个自定义删除器传递给它，所以只写一个而不是做其他事情是有意义的，这似乎不必要地复杂。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T16:15:10.537

引用标准：

> **20.7.1**类模板 unique_ptr
> 
> *6* . [...]
> 
> ```
>  template<class T, class D = default_delete<T>> class unique_ptr; 
> ```
> 
> **20.7.1.1.1**
> 
> *1*类模板 default_delete 用作类模板 unique_ptr 的默认删除器（破坏策略）。

因此，似乎`unique_ptr`需要将`default_delete`的实现用作默认删除器。

**编辑：**
但这并不意味着您的方法是万无一失的，请参阅下面的@RMartinhoFernandes 评论。

# validation - Infowise validation on Sharepoint

> ID：11455992
> 
> 赞同：0
> 
> 时间：2012-07-12T16:06:22.753
> 
> 标签：validation, sharepoint

Does anyone know anything about Infowise on Sharepoint? I am trying to create a validation rule or figure out how to use the operators 'and' and 'or', but am having trouble. I apologize for my question being vague, but I don't want to waste your time. If someone knows how to use these operators with Infowise, please let me know and I can be more specific..

Live Long and Prosper.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T01:13:04.427

Infowise 不支持以您喜欢的方式使用 and 和 or。