# StackOverflow 问答 11302000-11302999

# delphi - 如何获取delphi函数中参数传递的变量或对象节点的名称？

> ID：11302001
> 
> 赞同：2
> 
> 时间：2012-07-02T22:27:14.893
> 
> 标签：delphi, function, variables, parameter-passing, delphi-2006

在 Java 中，我们有类似的东西`VarName.toString`来识别 var 的名称。

我在 Delphi 中有一个代码，我需要实现相同的目标，因为我有一个`record`类型，其中包含许多需要识别的子字符串：

```
type
THierarchyAccess = String; // receive the user permissions from the MySQL DB
THierarchy = record
      MOD_HIERARQUIA   : THierarchyAccess; // 'BROWSE_ONLY', 'MANAGE', 'NONE'...
      MOD_OPERADORES   : THierarchyAccess;
      MOD_ESTATISTICAS : THierarchyAccess;
      MOD_AUDITORIA    : THierarchyAccess;
      MOD_HOMEPAGE     : THierarchyAccess;
      MOD_HOTSITES     : THierarchyAccess;
      MOD_MATRIZ       : THierarchyAccess;
      MOD_NOTICIAS     : THierarchyAccess;
      MOD_VISITANTES   : THierarchyAccess;
          ...
          end;
...

function  TAccess.IsAccessPermited(apNeed, apHave: String): Boolean;
begin
// HERE I need to know not only the content of "apHave", 
// but if it came from THierarchy.MOD_HOTSITES or THierarchy.MOD_MATRIZ etc.
end;

...

if IsAccessPermited('BROWSE_ONLY', MyHierarchy.MOD_HOTSITES) then Form2.Open; 
```

有没有一种优雅的方法来识别传递给函数的变量名是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T22:42:50.133

通常，诸如记录字段名称或参数变量名称之类的符号名称不会被 Delphi 等本地代码编译器包含在可执行映像中，因为本地机器指令只关心偏移量和地址，而不关心名称。这就是为什么 Delphi 生成的 exe 可以比同等的 .NET 或 Java 应用程序小数百倍的原因之一。

但是，字段名称等类型元数据对于“自给自足”的对象流式传输可能很有用。这种类型的元数据通常被本机代码编译器称为运行时类型信息 (RTTI)。

您可以尝试编译上面的类型，并`{$M+}`在类型声明周围启用。请务必在`{$M-}`之后立即设置，以避免使用不需要的类型名称使您的 exe 膨胀。

然后，您将需要使用 Delphi RTTI 方法来访问记录结构的字段名称。

但是，我认为这不适用于您的示例代码，因为您将记录字段作为参数传递给另一个函数。要获取记录的第 n 个字段的名称，您需要记录类型。

您的`IsAccessPermitted()`函数只接收记录字段内容的值。它不知道使用哪个字段来传递值，或者根本不知道是否使用了记录

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T09:48:32.300

德尔福不是Java！

您将需要使用完全不同的强类型技术。例如，您的代码可能类似于：

```
type
  THierarchyAccess = set of (haBrowseOnly, haManage, haNone {...});
  THierarchyMod = (hmHierarquia, hmOperadores, hmEstatisticas {...});
  THierarchy = array [THierarchyMod] of THierarchyAccess;
//...

function  TAccess.IsAccessPermited(apNeed: THierarchyAccess; apHave: THierarchy; hMod: THierarchyMod): Boolean;
begin
  case hMod of
    hmHierarquia:
      if apNeed <= apHave[hmHierarquia] then
        Beep;
    hmOperadores:
      if (apNeed + [haBrowseOnly]) <= apHave[hmOperadores] then
        Beep;
  end
end;

if IsAccessPermited([haBrowseOnly], MyHierarchy, hmOperadores) then Form2.Open; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T14:42:04.017

正如 dthorpe（德尔福的前建筑师！）所说，这是不可能的。但是 ISTM 认为您的记录也可以是一个 THierarchyAccess 数组。

我会这样做：

```
type
  THierarchyMode = (mHierarchia, mOperadores, mEstatisticas, ... );

  THierarchy = array[THierarchyMode] of THierarchyAccess;

...

  procedure TAccess.IsAccessPermitted(const apNeed: THierarchyAccess; apHave: THierarchyMode; const Hierarchy: THierarchy);
  begin
    // access
    if apNeed = Hierarchy[apHave] then ... 
```

# iphone - MDM：在配置文件中签入发生 3 次

> ID：11302002
> 
> 赞同：3
> 
> 时间：2012-07-02T22:27:17.473
> 
> 标签：iphone, ios, configuration, utility, mdm

谢谢你。

我正在使用 Mac。

iPhone配置实用程序将“资格信息”和“移动设备管理”的配置文件汇总为一个，并创建了配置文件。

如果iOS终端上安装了汇总为一个的配置文件，则会连续发生一次签到。

这是令人满意的。

但是，当“密码”被添加到这里时，问题就出现了。

iPhone 配置实用程序 将“密码”、“资格信息”和“移动设备管理”的配置配置文件汇总为一个，并创建配置配置文件。

如果iOS终端安装了汇总为1的配置文件，则会连续出现3次签到。 **“MDM：告诉 MDM 签入服务器有关新设备令牌的信息。”**

我希望有人教这是什么东西。

```
Jul 10 10:16:24 unknown mdmd[16934] <Notice>: (Note ) MDM: mdmd starting...
Jul 10 10:16:24 unknown mdmd[16934] <Notice>: (Note ) MDM: Network reachability has changed.
Jul 10 10:16:24 unknown mdmd[16934] <Notice>: (Note ) MDM: Network reachability has changed.
Jul 10 10:16:24 unknown mdmd[16934] <Notice>: (Note ) MDM: Telling MDM Check-In Server about new device token.
Jul 10 10:16:25 unknown mdmd[16934] <Notice>: (Note ) MDM: Transaction completed. Status: 200
Jul 10 10:16:25 unknown mdmd[16934] <Notice>: (Note ) MDM: Telling MDM Check-In Server about new device token.
Jul 10 10:16:25 unknown mdmd[16934] <Notice>: (Note ) MDM: Transaction completed. Status: 200
Jul 10 10:16:25 unknown mdmd[16934] <Notice>: (Note ) MDM: Telling MDM Check-In Server about new device token.
Jul 10 10:16:25 unknown mdmd[16934] <Notice>: (Note ) MDM: Transaction completed. Status: 200
Jul 10 10:16:27 unknown mdmd[16934] <Notice>: (Note ) MDM: mdmd stopping... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T14:47:50.810

我也面临同样的问题。请删除旧的 mdm 配置文件并尝试它可能会有所帮助。

# solr - solrnet - solr.Add(doc) 瓶颈

> ID：11302005
> 
> 赞同：2
> 
> 时间：2012-07-02T22:27:28.187
> 
> 标签：solr, solrnet

Win 7/SolrNet 0.4.0/C# winforms .net 4.0 客户端。

我正在使用 Solrnet 和 winforms 线程应用程序将多个位图和一些数学描述符写入 Solr 实例（在不同的服务器上）。有趣的是 solr.Add 方法似乎显着减慢了应用程序的速度。即，如果我注释掉添加和提交方法，CPU 利用率会跃升至 90% 左右，但随着它们的工作，CPU 利用率约为 20% - 但是似乎文档正在写入 Solr。

这是预期的行为吗？Solr 写入会成为瓶颈吗？我怎样才能解决这个问题？

```
 var doc = new IndexDocument
            {
                _UUID = Guid.NewGuid().ToString(),
                _FileName = (FileName),
             };

            //// Bitmap is not thread safe we Need to make a copy for each Task and done so synchronously.            
            Bitmap[] blobCopies = MakeBlobCopies(bmpBlob, 2);

            Task<List<KeyValuePair<string, double>>>[] descriptorTasks = new Task<List<KeyValuePair<string, double>>>[2];
            descriptorTasks[0] = Task.Factory.StartNew<List<KeyValuePair<string, double>>>(() => ApplyDescriptor1(blobCopies[0]));
            descriptorTasks[1] = Task.Factory.StartNew<List<KeyValuePair<string, double>>>(() => ApplyDescriptor2(blobCopies[1]));

            Task.WaitAll(descriptorTasks);
            foreach (var t in descriptorTasks)
            {
                List<KeyValuePair<string, double>> flds = t.Result;
                foreach (KeyValuePair<string, double> fld in flds)
                {
                    Type type = doc.GetType();
                    if (!String.IsNullOrEmpty(fld.Key))
                    {
                        SetPropertyValue(doc, fld.Key, fld.Value);
                    }
                }
            }

            DisposeBlobCopies(blobCopies);

            solr.Add(doc);
            solr.Commit(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T22:57:49.720

solr 调用可能是您应用程序的瓶颈，因为它们会阻止 io 命中。Add 和 commit 是对 restful api 的 2 个不同的调用。我几乎可以肯定 solrnet 在他们的 api 中没有原生支持来进行异步调用，但看起来你知道如何使用任务并行库。使呼叫无阻塞，事情应该会加快。您可能会发现有必要控制并发量。

# java - 点击后按钮背景变黑

> ID：11302011
> 
> 赞同：-2
> 
> 时间：2012-07-02T22:28:04.583
> 
> 标签：java, swing, background, jbutton

我将我的 JButton 设置为以下属性：-borderPainted 为 false-contentAreaFilled 为 false-边框为空-不透明为 false

点击按钮后，背景变黑或变黑，但是为什么，..有什么建议！？（谢谢）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T22:48:03.807

如果您想创建一个透明按钮，您只需要[`setContentAreaFilled(false)`](http://docs.oracle.com/javase/6/docs/api/javax/swing/AbstractButton.html#setContentAreaFilled%28boolean%29)，**不要调用`setOpaque`**，请参阅[javadoc](http://docs.oracle.com/javase/6/docs/api/javax/swing/AbstractButton.html#setContentAreaFilled%28boolean%29)（请注意，javadoc 中的最后一行建议因外观而异，。）：

> 设置 contentAreaFilled 属性。如果为 true，则按钮将绘制内容区域。**如果您希望有一个透明按钮，例如仅图标按钮，那么您应该将其设置为 false。** *不要调用 setOpaque(false)。*contentAreaFilled 属性的默认值为 true。
> 
> 该函数可能会导致组件的 opaque 属性发生变化。
> 
> *调用此函数的确切行为因组件和 L&F 的不同而异。*

如果您“只想要”文本（没有边框），您可以调用`setBorder(null)`.

* * *

## 例子：

*...没有边框和背景（也没有“按下”背景）。在统一/ubuntu 的默认外观和感觉上进行了测试，例如`MetalLookAndFeel`.*

```
public static void main(String... args) {

    JButton button = new JButton(new AbstractAction("Button") {
        @Override
        public void actionPerformed(ActionEvent arg0) {
            // Printout to verify that the button was actually pressed
            // since no visual output is shown... :)
            System.out.println("Clicked");
        }
    });

    button.setContentAreaFilled(false);
    button.setBorder(null);

    JFrame frame = new JFrame("Test");
    frame.setLayout(new FlowLayout());
    frame.add(button);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(400, 300);
    frame.setVisible(true);
} 
```

# android - Android 无法在画布上绘制透明矩形

> ID：11302012
> 
> 赞同：1
> 
> 时间：2012-07-02T22:28:13.917
> 
> 标签：android, graphics

尝试使用透明背景绘制并在其上绘制线条。然而，它绘制了一个黑色矩形而不是 transparet。如果我将颜色更改为红色，它可以正常工作。所以我猜这是透明的问题。

```
 drawPoints[currentpoint*4+0] = 0; 
       drawPoints[currentpoint*4+1] = 10;
       drawPoints[currentpoint*4+2] = 20; 
       drawPoints[currentpoint*4+3] = 40;

        Canvas mCanvas = sfh.lockCanvas(new Rect(10,20,50,100));
        mCanvas.drawColor(Color.TRANSPARENT);           
        mCanvas.drawLines(drawPoints,mPaint);
        sfh.unlockCanvasAndPost(mCanvas); 
```

为什么会画黑色？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T22:38:41.957

如果你想要透明度，你可以尝试：

```
mPaint.setAlpha(100); 
```

或 0 到 255 之间的某个值。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-11T12:55:41.250

I find this on the internet, I think that can works

```
Paint pincel1=new Paint();
paint.setARGB(255,255,0,0);

canvas.drawRect(10,10,ancho-10,40,pincel1);

pincel1.setStyle(Style.STROKE);
canvas.drawRect(10,60,ancho-10,90,pincel1);

pincel1.setStrokeWidth(3);
canvas.drawRect(10,110,ancho-10,140,pincel1); 
```

[image http://www.javaya.com.ar/androidya/imagentema/foto137.jpg](http://www.javaya.com.ar/androidya/imagentema/foto137.jpg)

thx **javaya.com/ar** for the code

[code](http://www.javaya.com.ar/androidya/detalleconcepto.php?codigo=169&inicio=20)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T22:49:49.440

您想将 Paint 对象的颜色设置为 Color.TRANSPARENT，而不是画布的颜色。所以试试

```
mPaint.setColor(Color.TRANSPARENT); 
```

# datetime - python datetime.strptime：忽略几分之一秒

> ID：11302013
> 
> 赞同：10
> 
> 时间：2012-07-02T22:28:19.387
> 
> 标签：datetime, floating-point, format, python-2.7

我正在努力将人类可读的时间转换为`datetime`对象。为了做到这一点，我正在使用`datetime.datetime.strptime`.

然而，很简单，我所拥有的人类可读时间包含几分之一秒，我无法解析。如果这是一个常数，我可以将其合并为格式的一部分。但是，由于它不是一个常数，我无法这样做。

这就是我现在正在做的事情：

```
>>> humanTime = '2012/06/10T16:36:20.509Z'
>>> datetime.datetime.strptime(humanTime, "%Y/%m/%dT%H:%M:%SZ")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "lib/python2.7/_strptime.py", line 325, in _strptime
    (data_string, format))
ValueError: time data '2012-06-10T16:36:20.507Z' does not match format '%Y-%m-%dT%H:%M:%SZ' 
```

所以我认为这里的问题是一秒的一小部分是不可解析的。我真的不在乎那一秒的时间。没有对字符串进行切片，有没有一种方法可以让我`datetime`忽略一秒的一小部分（最好使用格式）？

我有一种感觉，我可能会遗漏一些非常基本的东西。我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T22:49:32.910

因为我真的不在乎一秒钟的分数，所以我应该只取`19`人类可读字符串的第一个字符，并在上面应用一个简单的格式。

```
>>> humanTime = '2012/06/10T16:36:20.509Z'
>>> datetime.datetime.strptime(humanTime[:19], "%Y/%m/%dT%H:%M:%S")
datetime.datetime(2012, 6, 10, 16, 36, 20) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-17T11:52:05.273

解决您的特定问题：使用 %f 微秒：

```
>>> datetime.datetime.strptime(humanTime, "%Y/%m/%dT%H:%M:%S.%fZ") 
```

但是，对于一般情况，问题仍然存在。如果点后的位数超过 6 位，则此解决方案将不起作用。

问题是，据我所知， datetime.datetime.strptime 接受的格式通常不包括浮动秒数。解决方法是在创建 datetime 变量时忽略秒数，然后使用 datetime.timedelta 添加秒数。

```
>>> import numpy as np
>>> import datetime
>>> 
>>> humanTime = '2012/06/10T16:36:20.509Z'
>>> dt_time_no_seconds = datetime.datetime.strptime(humanTime[:-8], "%Y/%m/%dT%H:%M")
>>> seconds = np.float(humanTime[-7:-1])
>>> dt_time = dt_time_no_seconds+datetime.timedelta(seconds=seconds)
>>> dt_time_no_seconds
datetime.datetime(2012, 6, 10, 16, 36)
>>> dt_time
datetime.datetime(2012, 6, 10, 16, 36, 20, 509000) 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-05-29T15:15:42.503

该指令`%f`将解释小数秒：[https ://docs.python.org/2/library/datetime.html#strftime-strptime-behavior](https://docs.python.org/2/library/datetime.html#strftime-strptime-behavior)

```
import datetime
humanTime = '2012/06/10T16:36:20.509Z'
datetime.datetime.strptime(humanTime, '%Y/%m/%dT%H:%M:%S.%fZ')

>> datetime.datetime(2012, 6, 10, 16, 36, 20, 509000) 
```

Pandas 还可以用小数秒解析字符串...

```
import pandas as pd
humanTime = '2012/06/10T16:36:20.509Z'
pd.to_datetime(humanTime)

>> Timestamp('2012-06-10 16:36:20.509000+0000', tz='UTC') 
```

# mysql - SQL：有效地计算 sql 表中值的出现次数

> ID：11302019
> 
> 赞同：1
> 
> 时间：2012-07-02T22:28:39.950
> 
> 标签：mysql, sql

> **可能重复：**
> [SQL：计算输出列上出现的次数并根据出现次数计算某个百分比](https://stackoverflow.com/questions/11301083/sql-count-the-number-of-occurences-occuring-on-output-column-and-calculate-som)

这是测试数据/表格的网址：[http ://sqlfiddle.com/#!2/56ffd4/1](http://sqlfiddle.com/#!2/56ffd4/1)

我的表为下表生成 o/p：

```
(id,       resolution) 
('abc-123', 'fail'),
('abc-456', 'pass'),
('abc-789', 'pass'),
('abc-799', 'fail'),
('abc-800', 'pass'),
('abc-900', 'pass'); 
```

我的脚本 o/p 是：

```
id          RESOLUTION  TS              @PREV   C   RES
abc-123     fail    July, 02 2012         1     1   -
abc-456     pass    July, 02 2012         2     0   50.00%
abc-789     pass    July, 02 2012         1     0   100.00%
abc-799     fail    July, 02 2012         1     1   -
abc-800     pass    July, 02 2012         2     0   50.00%
abc-900     pass    July, 02 2012         0     0   100.00% 
```

这是 o/p 脚本：

```
SELECT st.*, 
       @prev:=@counter + 1,
       @counter:= CASE 
         WHEN st.resolution = 'pass'
         THEN 0
         ELSE @counter + 1
       END c,
       CASE WHEN @counter = 0 
            THEN CONCAT(FORMAT(100/@prev, 2), '%') 
            ELSE '-' 
       END res
  FROM so_test st, (SELECT @counter:=0) sc 
```

我需要将两列附加到上面的输出表中，以计算传递值和失败值的出现次数：

```
id          RESOLUTION  TS              @PREV   C            fail   pass
    abc-123     fail    July, 02 2012         1     1   -        1
    abc-456     pass    July, 02 2012         2     0   50.00%          1
    abc-789     pass    July, 02 2012         1     0   100.00%         1
    abc-799     fail    July, 02 2012         1     1   -        1
    abc-800     pass    July, 02 2012         2     0   50.00%          1
    abc-900     pass    July, 02 2012         0     0   100.00%         1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T00:48:11.937

好吧，如果您只想要输出表末尾的通过和失败列，就像您指定的那样，那么在后面加上一个逗号

```
END res 
```

并在其后添加以下内容：

```
CASE WHEN st.resolution = 'fail'
            THEN 1
            ELSE NULL
END fail,
CASE WHEN st.resolution = 'pass'
            THEN 1
            ELSE NULL
END pass 
```

不确定您的列中的空白是什么，但我只是将它们设置为 NULL。

# mysql - 组合两个几乎相同的 MySQL 查询

> ID：11302020
> 
> 赞同：2
> 
> 时间：2012-07-02T22:28:47.140
> 
> 标签：mysql, union

这个社区的新手......我不得不说我喜欢这个资源，它太棒了。:)

（在我更进一步之前，我想指出我**已经使用多个查询实现了**一个不受欢迎但功能强大的解决方案，然后使用 PHP 数组组合我得到的结果，但是我对 MySQL 和我所拥有的东西很弱简单地完成并不优雅或高效，我非常感谢你能给我的任何帮助来帮助我改进它。我的项目使用了几十个 SQL 查询，我想学会正确地编写它们。 )

我实际上是在尝试使用 UNION 语句或类似的东西来合并两个几乎相同的 MySQL 记录集。多年来，我一直在寻找解决方案，但在这一点上，它仍然超出了我的范围。所以，这是我的第一个问题：

我的数据结构相对简单，但我怀疑我想要使用它的方式可能不太常见。我有一系列用户定期将数据从他们的移动设备传输到 PHP 服务器，该服务器对其进行处理并将其内容存储在 MySQL 数据库中。这就是它变得有点不正统的地方，也许——用户实际上是一个封闭链中的链接。在任何时候，每个用户都有另一个用户作为他们的链接，或者，我更喜欢“目标”，而他们自己则作为其他人的目标。 **这个模型可以被认为是线性的：A 目标 B，B 目标 C，C 目标 D，D 目标 A。**

数据存储在两个表中：

1.  *用户*：包含有关用户的数据（例如，用户 ID、姓名、年龄等... TargetID）
2.  *包*：包含有关所有用户更新的数据（例如，用户 ID、时间戳等...）

在收到用户的请求后，我想：

1.  首先，从 Packages 表中提取最新更新，以及从 Users 表中**与我们用户的目标相关的传记信息。**
2.  其次，从 Packages 表中提取最新更新，以及从 Users 表中提取**与以我们的用户为目标的人有关的传记信息。**

这可能有点令人困惑，所以澄清一下：使用上述模型，如果我收到来自 B 的请求，我希望在单个记录集中返回来自 A 的最新包和来自 C 的最新包，以及相关的传记信息. **我实际上对B不感兴趣！**

我在这一点上取得的最好成绩涉及三个查询：

1.  最初，检查用户表以获取我们用户的正确 TargetID。

    ```
    SELECT TargetID FROM Users WHERE Users.UserID = [VALUE SUBMITTED IN USER REQUEST]; 
    ```

2.  查询两个表以产生结果 1。

    ```
    SELECT Users.UserID, Users.Name, Users.TargetID, Packages.Timestamp, Packages.Latitude, Packages.Longitude, Packages.Message FROM Users, Packages WHERE Packages.UserID = Users.UserID AND Users.UserID = [VALUE OBTAINED FROM QUERY 1] ORDER BY Packages.Timestamp DESC LIMIT 0,1; 
    ```

3.  查询两个表以生成结果 2。

    ```
    SELECT Users.UserID, Users.Name, Users.TargetID, Packages.Timestamp, Packages.Latitude, Packages.Longitude, Packages.Message FROM Users, Packages WHERE Packages.UserID = Users.UserID AND Users.TargetID = [VALUE SUBMITTED IN USER REQUEST] ORDER BY Packages.Timestamp DESC LIMIT 0,1; 
    ```

然后我将结果 1 和 2 合并到一个 PHP 数组中，并将这个数组的内容返回给提交请求的用户。在涉及许多此类请求的任何情况下，我都很难相信这种方法是有效的，更不用说理想了。尽管查询 2 和 3 实际上是相同的，并且我确信 WHERE 子句中的简单 OR 条件应该能够将它们组合起来，但如果不为我感兴趣的两个用户返回所有包，我就无法成功地做到这一点，或者，只返回一条记录，丢弃第二条（我显然错误地应用了时间约束）。例如，MySQL 抱怨我有时会错误地同时使用 UNION 和 ORDER BY 语句。每次我尝试修改它时，我都会把语法弄错。

我对我目前的解决方案真的很不满意，因为在这一点上看我的项目，这是我的服务器必须比其他所有任务更频繁地执行的单个 MySQL 任务。我确实意识到这个问题相当冗长，但我认为最好彻底解释一下，以便第一次可以理解。提前感谢您能给我的任何指导或方向。干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T23:19:33.650

如果我理解正确，类似：

```
select 
Users.UserID, 
TargetedPackages.UserID as TargetedID,
TargetedPackages.TimeStamp as TargetedTimestamp,
TargeterPackages.UserID as TargeterID,
TargeterPackages.Timestamp as TargetedTimestamp
from 
Users

INNER JOIN Users as Targeted
on Targeted.TargetId = Users.TargetID

INNER JOIN Users as Targeter
on Targeter.TargetId = Users.UserID

LEFT JOIN Packages as TargetedPackages
on Users.TargetID = TargetedPackages.UserID AND TargetedPackages.Timestamp = (SELECT Max(Timestamp) FROM Packages where Packages.UserID = Users.TargetID)

LEFT JOIN Packages as TargeterPackages
on Targeter.UserID = TargeterPackages.UserID AND TargeterPackages.Timestamp = (SELECT Max(Timestamp) FROM Packages where Packages.UserID = Targeter.UserID)

where Users.UserID = 2 
```

# c# - 使用 Razor 代码显示文件夹中所有文件的链接

> ID：11302027
> 
> 赞同：1
> 
> 时间：2012-07-02T22:29:40.650
> 
> 标签：c#, file, razor

我想显示文件夹中所有文件的链接。你如何在 WebMatrix 的 ASP.NET Razor 代码中做到这一点。您可以显示数据库中的所有条目

> @foreach（db.Query(selectQueryString) 中的 var 行）

但我不确定如何通过从文件夹中提取所有文件来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T22:55:15.380

[Directory.GetFiles](http://msdn.microsoft.com/en-us/library/07wt70x2.aspx)将为您提供给定目录中的文件列表。

注意：注意在 ASP.Net 环境中暴露和访问文件的安全问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T22:54:08.093

您可以通过下面显示的示例来实现它

```
 @foreach(var fileName in Directory.GetFiles("."))
    {
           .....
    } 
```

# perl - Perl 递归导致“使用未初始化的值”错误

> ID：11302035
> 
> 赞同：0
> 
> 时间：2012-07-02T22:30:40.577
> 
> 标签：perl

我是 perl 新手，似乎无法在任何地方找到有关此问题的答案。我将问题缩小到递归函数。如果我将其注释掉，那么它可以正常工作而没有错误。我有：

```
use strict;
use warnings;

 sub GeneratePermutations{
    my($n, $nMax, $i, $ArrLength, @Arr) = @_;

    if($n == 0){
    foreach($i..$ArrLength-1){
        $Arr[$i] = 0;
        ++$i;
    }

    my @qArr = ();
    my $rVal = 1; 
    for(my $p = 0; $p < @Arr; $p++){

        $rVal *= fac($Arr[$p]);

        for(my $q = 0; $q < $ArrLength; $q++){

        my $qCount = 0; 
        for(my $j = 0; $j < $ArrLength; $j++){ 

            if($Arr[$j] eq $q){
            ++$qCount;
            }

        }
        $qArr[$i] = $qCount;
        }
    }
    my $qVal = 1;
    for(my $qNum = 0; $qNum < @qArr; $qNum++){
        $qVal *= fac($qArr[$qNum]);
    }
    my $maxDistVal = 0;
    $maxDistVal = (1/($ArrLength**$ArrLength))*(fac($ArrLength)/$rVal)*(fac($ArrLength)/$qVal);

    if($maxDistVal > $distribution){
        $distribution = $maxDistVal;
    }
    #prints out distributions for all permutations (comment out previous if-statement)
    print "Dist: " . $distribution . "<br /><br />";
    #return 1;
    }
    my $resultCnt = 0;
    for(my $cnt = MinVal($nMax, $n); $cnt > 0; $cnt--){
    $Arr[$i] = $cnt;
    ++$resultCnt; 
    GeneratePermutations(int($n-$cnt), $cnt, $i+1, $ArrLength, @Arr);
    }

    #return $resultCnt;
    return $distribution;

} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T23:04:05.050

如果我不得不猜测，我会说这是问题所在：`$qArr[$i] = $qCount;`

因为您只在@qArr 中重复写入一个元素，然后再读取元素0 到$#qArr。

你的意思是`$qArr[$p] = $qCount;`？或者`$qArr[$q] = $qCount;`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T02:34:20.937

当您声明 $distribution 时，它可能必须在子例程之外，因为您需要它在整个递归过程中持续存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T21:55:41.773

我开始注释掉我的部分代码，发现如果我删除这部分，警告就会消失：

```
for(my $qNum = 0; $qNum < @qArr; $qNum++){
    $qVal *= fac($qArr[$qNum]);
} 
```

# php - 循环遍历数组以创建类属性

> ID：11302036
> 
> 赞同：0
> 
> 时间：2012-07-02T22:31:08.730
> 
> 标签：php, arrays, class, object

我正在尝试为数组中的每个元素创建类属性。此时已经创建了数组，我在这里创建它只是为了演示。

我对类和对象不太熟悉。有人可以帮我吗？

```
class MyClass  
{  
 $days['first'] = "Mon";
 $days['second'] = "Tue";
 $days['third'] = "Wed";

 foreach ($days as $k => $v) {
     public $k = $v;
 }

}  

$obj = new MyClass;  

echo $obj->first; // Mon 
```

我不断收到“解析错误：语法错误，意外的 T_VARIABLE，期待 T_FUNCTION”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T22:32:55.327

那是不可能的。但是，您可以在构造函数中创建它们：

```
public function __construct() {
    $days = array();
    $days['first'] = "Mon";
    $days['second'] = "Tue";
    $days['third'] = "Wed";
    foreach($days as $k => $v)
        $this->$k = $v;
} 
```

这将创建公共变量 - 因此，除非您希望它们私有/受保护，否则这是实现您想要的最简单的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T22:33:34.907

使用[构造函数](http://us3.php.net/manual/en/language.oop5.decon.php)`$this->$key`从作为参数传入的数组中动态设置属性，如下所示：

```
class MyClass  
{  
    function __construct( $dates) {
        foreach( $dates as $k => $v) 
            $this->$k = $v;
    }
}

// Can also put this into the __construct() function
$days = array();
$days['first'] = "Mon";
$days['second'] = "Tue";
$days['third'] = "Wed";

$obj = new MyClass( $days);
echo $obj->first; 
```

`$this->$k`是一种[变量变量](http://us3.php.net/manual/en/language.variables.variable.php)，您可以在其中使用另一个变量的值来设置变量的名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T22:34:55.823

您还可以使用魔术`__get()`方法来完成此任务：

```
class MyClass {
    private $days = array('first' => 'Mon', ...);

    public function __get($key) {
        if (isset($this->days[$key])) {
            return $this->days[$key];
        }

        throw new Exception("Couldn't find a property for key $key");
    }
} 
```

# android - 处理程序含义

> ID：11302041
> 
> 赞同：-1
> 
> 时间：2012-07-02T22:32:00.437
> 
> 标签：android, multithreading, service, handler

我认为android中的处理程序是获取线程中不同对象并将其移动到另一个线程的工具，例如android中的UI线程。这是真的吗？ **对不起我的知识**:)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T22:33:13.270

从[文档](http://developer.android.com/reference/android/os/Handler.html)中，

> Handler 允许您发送和处理与线程的 MessageQueue 关联的 Message 和 Runnable 对象。每个 Handler 实例都与单个线程和该线程的消息队列相关联。当您创建一个新的处理程序时，它会绑定到创建它的线程的线程/消息队列——从那时起，它会将消息和可运行对象传递到该消息队列并在它们从消息中出来时执行它们队列。

# javascript - 将画布元素的高度和宽度设置为 window.innerHeight/innerWidth 导致滚动条

> ID：11302042
> 
> 赞同：13
> 
> 时间：2012-07-02T22:32:00.773
> 
> 标签：javascript, html, css

这是非常直接的，但我无法弄清楚它为什么会导致滚动条。这是代码：

CSS

```
body, canvas, html{margin:0;padding:0;border:0 none;}
canvas{background:Black;} 
```

HTML

```
<html>
    <head></head>
    <body></body>
</html>​ 
```

JavaScript

```
var canvas = document.createElement("canvas");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;
document.getElementsByTagName("body")[0].appendChild(canvas);​​​​​​​ 
```

​</p>

这不应该只是导致画布跨越可视窗口的宽度和高度吗？这是一个 JSFiddle 示例：http: [//jsfiddle.net/TyJYH/](http://jsfiddle.net/TyJYH/)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-04T07:04:24.983

我通过将 canvas 标签的 CSS display 属性设置为“block”解决了同样的问题。

```
canvas {
  display: block;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T22:35:32.800

这将解决它：

```
canvas {
  position:absolute;
  left:0;
  right:0;
  bottom:0;
  top:0;
} 
```

# php - php字符串替换性能

> ID：11302043
> 
> 赞同：1
> 
> 时间：2012-07-02T22:32:15.297
> 
> 标签：php, regex, performance, replace

我知道通常建议尽可能避免使用正则表达式，但是如果有一个包含 20 个左右字符的列表需要从字符串中剥离怎么办？

做类似的事情会更划算吗

```
$string = "...";

$a = array('a', '1', '!' ...);

foreach($a as $char){
    $string = str_replace($char, '', $string);

} 
```

还是使用正则表达式会更好

```
$string = preg_replace('#[a1!...]#', '', $string); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T22:39:17.473

首先关闭`str_replace()`支持针和干草堆的数组，因此通过循环运行它只是额外的过程。我还要回答正则表达式 vs 字符串 vs 字符串。在几乎所有情况下，我都会逐串进行。正则表达式可以给出误报和正负。如果配方不正确，那么很快就会变得令人沮丧。谨慎使用它，正则表达式也增加了更多的过程，因为它必须匹配或不匹配给定规则的某些内容。字符串到字符串的位置是否匹配。

但这只是我对此事的看法。

# java - 什么是在java中修改函数内部参数的干净方法？

> ID：11302045
> 
> 赞同：0
> 
> 时间：2012-07-02T22:32:23.147
> 
> 标签：java, c, parameters

我对用 Java 编写这个 C 代码很感兴趣：

```
// sets n's ith bit from right, i starts from 0
void setBit(int* n, int i){
   *n = *n | (1 << i);
} 
```

但是，看起来 java 不能传递地址，那么有什么干净的方法呢？

我想到了两种方法，但我想知道是否有更好的方法来做到这一点？

方法一：使用数组

```
 // sets n[0]'s ith bit from right, i starts from 0
public void setBit(int[] n, int i){
   n[0] = n[0] | (1 << i);
} 
```

方法2：使用类

```
private class Data{
   int value;
}

// sets d.value's ith bit from right, i starts from 0
public void setBit(Data d, int i){
   d.value = d.value | (1 << i);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T22:35:38.837

不，没有更好的方法来做到这一点......

除非你想用传统的 Java 方式来做，那就是

```
d = setBit(d, i);

public int setBit(int d, int i) {
  return d | (1 << i);
} 
```

这就是说在 Java 中“修改函数的参数”几乎*本质上*是不干净的。干净的方法是找到一些替代方法来修改参数。

（有时这是不可避免的，在这种情况下，您的解决方法就是要走的路。也就是说，如果您想编写一个方法`modify(myData)`，通常最好将一个`modify()`方法添加到`myData`的类。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T22:35:52.317

`int setBit(int n, int i)`which 返回具有给定位集的新 int怎么样？

或者，您可以将其封装在一个名为 IntBuilder 或类似的类中：

```
IntBuilder ib = new IntBuilder();
ib.setBit(n);
int i = ib.getInt(); 
```

这只有在您还想执行其他操作时才真正有意义。只是设置一点，这是矫枉过正的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T23:28:43.007

不是一般方法，但在您的特定情况下，我建议使用可变整数。apache-commons-lang3 包包含一个很好的实现`org.apache.commons.lang3.mutable.MutableInt`

[http://commons.apache.org/lang/api-release/index.html](http://commons.apache.org/lang/api-release/index.html)

.setValue() 方法将允许您以某种 C 风格的方式实现您的方法。

*ps：我不喜欢以.开头的答案`Nope, no better way to do it...`。（虽然有时候确实是这样……）*

# ruby - Ruby Configatron，多个值？

> ID：11302046
> 
> 赞同：0
> 
> 时间：2012-07-02T22:32:27.093
> 
> 标签：ruby, configatron

如果我正在使用 为我的 ruby​​ 应用程序日志记录设置配置`configatron`，是否有人知道如何：

**1.**做 Enum 值，例如 `configatron.log.level = 'DEBUG'`其他可接受的值，如 ERROR、WARN、INFO。是强制的吗？除此之外的其他值是否被拒绝？

**2.**做多个值，例如`configatron.log.logto = [:file, :udp, :stdout]` 我希望这些值也可以执行。

任何线索表示赞赏。

# iphone - iPhone 上的 Chrome 插件

> ID：11302047
> 
> 赞同：8
> 
> 时间：2012-07-02T22:32:32.737
> 
> 标签：iphone, ios, google-chrome, plugins

谁能告诉我是否可以或将可以为 Chrome iPhone 应用程序创建插件。我怀疑不是，但如果可以的话，那就太好了。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-11T22:59:00.867

**很抱歉，但我认为没有办法为 chrome iOS 应用程序创建插件。**

**因为**...

*   用户无法在应用程序中组织这些插件。
*   移动应用程序与完整的计算机应用程序有很大的不同，更小，并且不需要具有完整的计算机应用程序的能力。
*   没有办法调整浏览器设置。
*   您无法从移动浏览器下载某些文件类型。
*   我认为将这些插件下载到设备上会违反苹果的政策，因为苹果没有批准
*   如果它能够奏效，谷歌将不得不在一个应用程序中提供所有这些，或者在应用程序中购买
*   除非您越狱并下载完整版 chrome，否则您将无法在 iOS 设备上接收插件
*   Google 以外的开发者无法与 Google 的应用程序通信

* * *

那里有免费的网络浏览器教程，而不是为移动应用程序创建插件，为什么不创建自己的浏览器。这将允许您制作一些很棒的“插件类型”工具。

**创建移动浏览器应用教程：**

*   带有 web 视图的 2 部分教程[在这里](http://iosdeveloperzone.com/2011/05/21/tutorial-building-a-web-browser-with-uiwebview-part-1/)和[这里。](http://iosdeveloperzone.com/2011/05/22/tutorial-building-a-web-browser-with-uiwebview-part-2/)
*   带有搜索栏视频的互联网浏览器 @ [youtube.com/.....](http://www.youtube.com/watch?v=Vpq8r-HHwZA)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-16T18:47:34.233

如果您正在寻找官方来源，那么似乎不清楚是否可以在适用于 iOS 的 chrome 上使用扩展。官方的说法是它们不适用于 Android 上的 Chrome，甚至没有计划：

> **Android 版 Chrome 是否支持应用和扩展程序？**
> 
> Chrome for Android 目前不支持 Chrome 应用和扩展程序。我们目前没有宣布的计划。

（[来源](https://developers.google.com/chrome/mobile/docs/faq)）

我认为这强烈表明它们不可用，也没有计划用于 iOS。

更一般地说，我认为拥有任何类型的插件，即可以在本地下载和运行的代码，都违反了苹果开发者协议。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-18T01:52:40.853

不，绝对不是。iOS 上的应用程序是沙盒的。如果没有越狱，就无法在设备上安装不是应用程序（也不是来自 Apple）的软件。谷歌以外的任何开发者都无法制作与谷歌应用程序通信的任何东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T10:26:34.403

您可以使用 Javascript 小书签替换某些插件功能。

[http://www.idownloadblog.com/2012/06/30/how-to-easily-use-bookmarklets-in-google-chrome-for-ios/](http://www.idownloadblog.com/2012/06/30/how-to-easily-use-bookmarklets-in-google-chrome-for-ios/)

# ios - TableView 按距离排序数组

> ID：11302054
> 
> 赞同：0
> 
> 时间：2012-07-02T22:33:08.167
> 
> 标签：ios, xcode

有人可以帮我按距离对数组进行排序并在 TableView 中显示吗？我创建了一个属性“sortedArray”并进行了综合。我创建了一个“sortList”方法并在 didUpdateToLocation 下调用它。但是，它似乎没有对数组进行排序，或者我没有将更新的结果放入我的 TableView 中。

```
@property(nonatomic, strong) NSArray *sortedArray;
-(NSArray *) sortList;
-(NSMutableArray *) barList; 
```

* * *

```
@synthesize sortedArray; 
```

* * *

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    currentLoc = newLocation;

    if (newLocation.horizontalAccuracy <= 100.0f) {
        [locMgr stopUpdatingLocation];
    }
    NSLog(@"Lat: %f, Long: %f", currentLoc.coordinate.latitude, currentLoc.coordinate.longitude);

    [self barList];
    [self sortList];
    [self.tableView reloadData];
}

-(NSMutableArray *) barList{
    theauthors = [[NSMutableArray alloc] init];
    @try {
        NSFileManager *fileMgr = [NSFileManager defaultManager];
        NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"TulsaBars.sqlite"];
        BOOL success = [fileMgr fileExistsAtPath:dbPath];
        if(!success)
        {
            NSLog(@"Cannot locate database file '%@'.", dbPath);
        }
        if(!(sqlite3_open([dbPath UTF8String], &db) == SQLITE_OK))
        {
            NSLog(@"An error has occured: %@", sqlite3_errmsg(db));

        }

        const char *sql = "SELECT * FROM  TulsaBars";
        sqlite3_stmt *sqlStatement;
        if(sqlite3_prepare(db, sql, -1, &sqlStatement, NULL) != SQLITE_OK)
        {
            NSLog(@"Problem with prepare statement:  %@", sqlite3_errmsg(db));
        }else{

            while (sqlite3_step(sqlStatement)==SQLITE_ROW) {
                Author * author = [[Author alloc] init];
                author.barName = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,1)];
                author.barAddress = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,2)];
                author.barState = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement, 5)];
                author.barLat = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement, 8)];
                author.barLong = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement, 9)];

                if (currentLoc == nil) {
                    NSLog(@"current location is nil %@", currentLoc);
                }else{

                CLLocation *barLocation = [[CLLocation alloc] initWithLatitude:[author.barLat doubleValue] longitude:[author.barLong doubleValue]];
                CLLocationDistance distancekm = [currentLoc distanceFromLocation: barLocation]/1000;
                NSString *distanceString = [[NSString alloc] initWithFormat: @"%f", distancekm];
                author.cachedDist = distanceString;

                [theauthors addObject:author];

                }
            }
        }
        sqlite3_finalize(sqlStatement);
    }
    @catch (NSException *exception) {
        NSLog(@"Problem with prepare statement:  %@", sqlite3_errmsg(db));
    }
    @finally {
        sqlite3_close(db);

        return theauthors;
    }
}

-(NSArray *) sortList{

    NSSortDescriptor *descriptor = [[NSSortDescriptor alloc] initWithKey:@"cachedDist"  ascending:YES];
    sortedArray = [theauthors sortedArrayUsingDescriptors:[NSArray arrayWithObject:descriptor]];

    return sortedArray;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T23:26:05.860

嗯...您的`-sortList`方法没有进行就地排序，它返回一个排序数组，您将其丢弃。

~~`-barList`实际上，您的方法也是如此。~~

*编辑：*这并不完全正确。 `-barList`实际上是在反复覆盖一个 ivar，尽管尚不清楚这是否是故意的。

这样做的结果是：

```
[self barList];
[self sortList]; 
```

~~除了旋转一些 CPU 周期之外~~什么都不做——你没有对它们的返回值做任何事情！

*编辑：*好的，我看到您的排序（巧妙地）设置了一个 ivar，但它令人困惑，因为它还返回一个排序数组。请参阅下面的评论。

（这看起来也是一种对地理数据进行排序的过于复杂的方法，但我现在不打算遍历所有代码。您需要在查看之前修复上述问题。）

# javascript - jQuery Mobile - 为什么将默认值绑定到 mobileinit？

> ID：11302055
> 
> 赞同：0
> 
> 时间：2012-07-02T22:33:08.107
> 
> 标签：javascript, jquery, jquery-mobile, styles

我正在使用 jQuery Mobile 并希望关闭 Ajax 处理，因为它对我的页面做了一些时髦的事情。我从

```
<script src="jquery..."></script>
<script src="jquerymobile..."></script>
Some other stuff...
My own code:
<script src="config.js"></script>
My other javascript files... 
```

我的想法是，您在顶部定义全局内容，例如库，在底部定义细节，以便稍后渲染它们并“覆盖”全局属性。例如，我自己的 CSS 会覆盖 jQuery 的 CSS，而我的`config`文件会：

```
$.mobile.ajaxEnabled = false; 
```

这成功地禁用了 ajax 处理。

但是， http: [//jquerymobile.com/demos/1.1.0/docs/api/globalconfig.html](http://jquerymobile.com/demos/1.1.0/docs/api/globalconfig.html)说要在jQuery mobile**之前**覆盖配置文件中的默认值`src`，并带有一些时髦的符号：（来自页面）

```
<script src="jquery.js"></script>
<script src="custom-scripting.js"></script>
<script src="jquery-mobile.js"></script>

//custom-scripting.js
$(document).bind("mobileinit", function(){
  $.extend(  $.mobile , {
    foo: bar
  });
}); 
```

`$.mobile.ajaxEnabled = false;`我的问题是，当您可以简单地在配置文件中包含一个单行代码时，为什么要这样做`jquery-mobile.js`？我认为这与 Javascript 的范例/风格有关，但我真的不明白为什么你必须经历所有这些麻烦。

那么，哪个更好用，为什么？为什么文档推荐这种方式？

编辑：文档还说**`mobileinit`is called immediate**，所以我应该可以安全地`$.mobile object`在配置文件中修改后面的内容，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T22:52:24.497

我想我找到了原因。jQuery mobile 初始化自己并定义（= 覆盖）`$.mobile`变量，而不用担心它是否已经被首先设置。这就解释了`mobileinit`允许修改的钩子。

# php - 发布新的 Wordpress 帖子时触发 HTML5 通知

> ID：11302059
> 
> 赞同：1
> 
> 时间：2012-07-02T22:33:26.887
> 
> 标签：php, javascript, wordpress, html

当我在我的 Wordpress 博客上发布新帖子时，我想触发一个通知出现在用户屏幕的底部（对于非常忠诚的读者！）。

编辑：我忘了说，我需要 c2 行帖子文本才能出现在通知中！

我已经阅读了 HTML5 API 中的通知。例如：[http ://www.html5rocks.com/en/tutorials/notifications/quick/](http://www.html5rocks.com/en/tutorials/notifications/quick/)

我从之前关于 SE 的帖子中了解到，Javascript（或一般的客户端）需要从服务器端传递通知。 [网络应用程序可以提供桌面通知吗](https://stackoverflow.com/questions/11150808/can-a-web-app-give-desktop-notification)

我可以使用插件在 Wordpress 中为帖子发布时添加过滤器操作。 [http://codex.wordpress.org/Plugin_API#Create_an_Action_Function](http://codex.wordpress.org/Plugin_API#Create_an_Action_Function)

然后我认为插件需要将变量传递给 JavaScript 脚本，然后可以由 HTML5 API 获取。 [https://wordpress.stackexchange.com/questions/50770/add-javascript-when-post-is-published](https://wordpress.stackexchange.com/questions/50770/add-javascript-when-post-is-published)

如果有人能帮我把这点联系起来，并逐步说明它是如何工作的，将不胜感激！谢谢

（PS 除了 Wordpress，上面的技术选择都不是强制性的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T22:43:01.673

使用您提供的[https://wordpress.stackexchange.com/questions/50770/add-javascript-when-post-is-published](https://wordpress.stackexchange.com/questions/50770/add-javascript-when-post-is-published)中的信息，但不要在 notice.js 示例中执行 alert()，而是使用 jQuery 触发消息. 您可以使用一些通知插件进行最少的编码：[http](http://webtoolkit4.me/2009/08/13/jquery-growl-likenotification-systems/) ://webtoolkit4.me/2009/08/13/jquery-growl-likenotification-systems/ 。

# javascript - “功能”就是功能，这怎么可能？

> ID：11302061
> 
> 赞同：0
> 
> 时间：2012-07-02T22:33:31.833
> 
> 标签：javascript, object

在 js 中，我们有一个名为“ *Function* ”的函数。它的一个实例返回一个函数：

```
var myfunc = new Function('arg1','arg2','return arg1+arg2'); 
```

在该示例中，变量*myfunc*包含一个返回两个给定参数之和的函数。

*我的问题是 - Function*怎么可能是一个函数？它不能是它自己的一个实例。而且*Object*也是一个函数，是*Function*的一个实例。但是*Function*是*Object*的一个实例，因为 function 是对象。

而且我无法理解这怎么可能，这是一个无限循环......

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T22:35:01.193

`Object`, `Function`, 等确实是函数 - 确切地说是构造函数。

请记住，您创建的对象是这样的：

```
function MyObject() {
    this.foo = 'bar';
}

var my = new MyObject();
alert(my.foo); 
```

* * *

顺便说一句，使用`new Function(...)`通常是一个坏主意。你的例子会像这样更干净：

```
function myfunc(arg1, arg2) { return arg1 + arg2 } 
```

或者

```
var myfunc = function(arg1, arg2) { return arg1 + arg2 }; 
```

所以在生产中使用的理由很少`new Function()`（模板引擎是一个很好的用例）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T22:56:13.270

简单的答案是“因为 ECMA-262 这么说”。

[Function](http://es5.github.com/#x15.3) 、 Object 、Array、Date 等对象是内置对象，因此它们不是以通常的方式构造的，它们就是这样。它们、它们的原型和它们之间的关系`[[Prototype]]`是由环境根据 ECMA-262 建立的。所以 Function[继承自它自己的原型](http://es5.github.com/#x15.3.3)（即`Function.prototype === Function[[Prototype]]`），它继承自 Object.prototype。

# actionscript-3 - Flash as3 - 在点击事件时从实例创建一个变量

> ID：11302066
> 
> 赞同：0
> 
> 时间：2012-07-02T22:34:16.513
> 
> 标签：actionscript-3, flash

我有一大堆按钮，它们都需要同时具有鼠标悬停效果和切换效果（点击时）来改变色调。我已经为每个色调变化制作了功能，并且这些部件工作得很好。可悲的是，我无法弄清楚如何让我的切换功能按应有的方式工作。

下面是我的切换按钮代码。它工作正常，除了我的变量是全局的而不是特定于实例的。因此，它只有在我只有一个按钮时才有效。如何更改它以使用一个用于焦点按钮的变量？

提前致谢！

```
var primary = false;

function clickOn(e:MouseEvent):void{ 
    if (primary == false)     {
            greenHue(e.target);
            primary = true;
    } else {
            noHue(e.target);
            primary = false;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T22:59:52.963

最好的办法是扩展您用于按钮的类并向其添加功能，因此从它派生的所有按钮都将具有您想要的独立行为。

```
class ColoredButton extends Button {
    var primary = false;  

    public function ColoredButton() {
        this.addEventListener(MouseEvent.CLICK, clickOn);
    }

    private function clickOn(e:MouseEvent):void {   
        if (primary == false)     {  
            greenHue(e.target);  
            primary = true;  
        } else {  
            noHue(e.target);  
            primary = false;  
        }  
    }

    ...
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T22:44:08.650

实际上，这取决于您如何为应用程序选择设计。我的意思是，如果您的按钮数量有限，并且您确切地知道它们是什么并且它们保持不变（例如，按钮 1、按钮 2、按钮 3 或色调、饱和度和亮度），那么您可以拥有三个切换变量。所以你想做：

```
var primaryH = false;
var primaryS = false;
var primaryL = false; 
```

然后，三个事件声明：

```
buttonH.addEventListener(MouseEvent.CLICK, clickOnH);
buttonS.addEventListener(MouseEvent.CLICK, clickOnS);
buttonL.addEventListener(MouseEvent.CLICK, clickOnL); 
```

和三个函数声明：

```
function clickOnH(e:MouseEvent):void{ 
    if (primaryH == false)     {
            greenHue(e.target);
            primaryH = true;
    } else {
            noHue(e.target);
            primaryH = false;
    }
} 
```

...

否则，最好的办法是在按钮对象中创建切换变量和函数。这将是“更多的 OOP”，并允许您创建任意数量的按钮，而无需一遍又一遍地编写相同的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T13:17:07.397

这就是我所做的。

```
var primary:Array = new Array;

    if (primary[e.target.name] == true || secondary[e.target.name] == true) {
        noHue(e.target);
        primary[e.target.name] = false;

    } else {

            greenHue(e.target);
            primary[e.target.name] = true;

        }
    }

} 
```

# c++ - 非虚拟界面？（需要一个非常高性能的低级抽象）

> ID：11302068
> 
> 赞同：7
> 
> 时间：2012-07-02T22:34:48.133
> 
> 标签：c++, architecture, abstraction, idioms, micro-optimization

我正在尝试在应用程序架构中非常低的级别对我的代码进行微优化。所以这是我的具体场景：

*   我有一个**解析器类**，它解析图形文件（节点、边、邻接条目等）
*   文件格式是版本化的，因此每个版本都存在解析器，它们被实现为**单独的类**（ParserV1、ParserV2、...）。
*   解析器为应用程序中的某些上层提供相同的功能。因此，它们实现了相同的“**接口**”。
*   在 C++ 中，我会将这样的接口实现为一个抽象类，其中所有函数都是纯**虚拟**的。
*   由于虚函数需要另一个内存查找，并且不能在编译时静态绑定，而且——更重要的是——**不允许**在解析器类中内联小方法，使用经典的子类化习惯不会导致我能达到的最佳表现。

[在描述我可能的解决方案之前，我想解释一下为什么我在这里做微优化（你可以跳过这一段）：解析器类有很多小方法，其中“小”意味着他们没有做太多. 它们中的大多数只从缓存的比特流中读取一两个字节，甚至只读取一个比特。所以应该有可能以一种非常有效的方式来实现它们，其中一个函数调用，当内联时，只需要少量的机器命令。这些方法在应用程序中被非常频繁地调用，因为它们在一个非常大的图表（全球道路网络）中查找节点属性，每个用户请求可能发生大约一百万次，并且这样的请求应该与可能的。]

去这里的路是什么？我可以看到以下解决问题的方法：

1.  使用纯虚方法编写接口并将其子类化。性能会受到影响。
2.  不要写这样的接口。每个解析器自己定义相同的方法。在上层（使用解析器）有指向每个版本子类的指针（作为成员）。一开始，实例化应该使用的特定解析器。每当访问函数时，使用 switch 块并将解析器实例强制转换为显式子类。性能会更好吗？（if/switch 块与虚拟表查找）。
3.  混合两种解决方案 1\. + 2.：为很少使用的方法编写一个带有纯虚拟方法的接口，其中性能不是很关键。如果很关键，不要提供虚拟方法，而是使用第二种方法。
4.  改进2.：在抽象类中提供非虚方法；在抽象类中保留版本号作为成员变量（一种自己的运行时类型信息），并在这些方法中实现 if/switch 块和强制转换；然后调用子类中的方法。这提供了内联和静态绑定。

有没有更好的方法来解决这个问题？这有什么成语吗？

澄清一下，我有很多与版本无关的函数（至少到现在为止），因此非常适合某些超类。我将对大多数函数使用标准的子类化设计，而这个问题仅涵盖要优化的版本相关函数的解决方案。（其中一些调用不频繁，在这些情况下我当然可以使用虚拟方法。）除此之外，我不喜欢让解析器类决定哪些方法需要高性能，哪些方法不需要. （尽管这样做是可能的。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T22:42:35.377

一个可能会很好的选项如下：让每个解析器类定义具有相同签名的方法，但完全独立于其他类。然后，引入一个虚拟实现所有这些相同功能的二级类层次结构，然后将每个方法调用转发到一个具体的解析器对象。这样，解析器的实现就获得了内联的所有好处，因为从类的角度来看，所有调用都可以静态解析，而客户端则获得了多态性的好处，因为任何方法调用都会动态解析为正确的类型。

这样做的问题是您使用了额外的内存（包装对象占用了空间），并且当您调用解析器函数时，您可能还会至少涉及一个额外的间接寻址，因为调用是

> 客户端→包装器→实现

根据您从客户端调用方法的频率，此实现可能会很好地工作。

*使用模板，可以非常*简洁地实现包装层。思路如下。假设您有方法 fA、fB 和 fC。首先定义一个像这样的基类：

```
class WrapperBase {
public:
    virtual ~WrapperBase() = 0;

    virtual void fA() = 0;
    virtual void fB() = 0;
    virtual void fC() = 0;
}; 
```

现在，将以下模板类型定义为子类：

```
template <typename Implementation>
    class WrapperDerived: public WrapperBase {
private:
    Implementation impl;

public:
    virtual void fA() {
        impl.fA();
    }
    virtual void fB() {
        impl.fB();
    }
    virtual void fC() {
        impl.fC();
    }
}; 
```

现在，您可以执行以下操作：

```
WrapperBase* wrapper = new WrapperDerived<MyFirstImplementation>();
wrapper->fA();
delete wrapper;

wrapper = new WrapperDerived<MySecondImplementation>();
wrapper->fB();
delete wrapper; 
```

换句话说，编译器只需实例化`WrapperDerived`模板即可为您生成所有包装器代码。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T22:48:39.710

首先，当然，您应该分析您的代码，以确定在您的特定情况下有多少 vcalls 性能下降（除了可能较弱的优化之外）。

将优化主题放在一边，我几乎可以肯定，通过调用编译时的开关替换虚函数调用（或通过指针变量调用函数，几乎相同）不会获得任何显着的性能提升 -不同情况下的已知函数。

如果您**真的**想要显着改进-恕我直言，这些是最有希望的变体：

1.  尝试重新设计您的界面以启用更复杂的功能。例如，如果您有一个读取单个顶点的函数 - 将其修改为一次读取（最多）N 个顶点。等等。

2.  您可以使您的整个解析代码（使用您的解析器）成为一个`template`类/函数，它将使用模板参数来实例化所需的解析器。在这里，您既不需要接口也不需要虚函数。在最开始（您识别版本的位置） - 放置一个`switch`, 对于每个识别的版本，使用适当的模板参数调用此函数。

从性能的角度来看，后者可能会更优越，OTOH 这增加了代码大小

**编辑：**

以下是 (2) 的示例：

```
template <class Parser>
void MyApplication::HandleSomeRequest(Parser& p)
{
    int n = p.GetVertexCount();
    for (iVertex = 0; iVertex < n; iVertex++)
    {
        // ...    
        p.GetVertexEdges(iVertex, /* ... */);    
        // ...    
    }
}

void MyApplication::HandleSomeRequest(/* .. */)
{
    int iVersion = /* ... */;
    switch (iVersion)
    {
    case 1:
        {
            ParserV1 p(/* ... */);
            HandleSomeRequest(p);
        }
        break;

    case 2:
        {
            ParserV2 p(/* ... */);
            HandleSomeRequest(p);
        }
        break;

    // ...
    }
} 
```

类`ParserV1`等`ParserV2`没有功能。**_** `virtual`它们也不继承任何接口。他们只是实现了一些功能，例如`GetVertexCount`.

# opengl - GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT 返回 0

> ID：11302079
> 
> 赞同：0
> 
> 时间：2012-07-02T22:35:54.517
> 
> 标签：opengl, textures

我目前正在其他机器上测试我的库。不幸的是，各向异性过滤正在引起问题。

在我的机器（NVIDIA GeForce 580M GTX）上，它运行良好且符合预期。

然而，在测试机器上，它失败了，因为在查询 GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT 时，我得到 0。我不知道这可以通过阅读[规范来实现。](http://www.opengl.org/registry/specs/EXT/texture_filter_anisotropic.txt). 它也是一款（相当）新的笔记本电脑，配备 ATI Mobility Radeon HD 4250，[应该支持](http://feedback.wildfiregames.com/report/opengl/device/Mobility%20Radeon%20HD%204250%20Graphics)该扩展。

任何想法为什么 GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT 会返回 0？谢谢，

# hadoop - whirr cdh 安装版本控制

> ID：11302080
> 
> 赞同：0
> 
> 时间：2012-07-02T22:35:54.480
> 
> 标签：hadoop, apache-whirr

我们如何使用 whirr 控制安装在 ec2 上的 hadoop 版本。我可以看到我们有以下两行是配置文件

whirr.hadoop-install-function=install_cdh_hadoop whirr.hadoop-configure-function=configure_cdh_hadoop

但是我们如何控制要安装的版本呢？

CDH3 还是 CDH4？

另外，MVR1 还是 MVR2？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:46:40.510

这就是它在 0.8.1 中的完成方式

```
whirr.env.mapreduce_version=2   
whirr.env.repo=cdh4 
```

这将进入您的属性文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:32:57.807

```
## Install CDH4 Yarn 
whirr.hadoop.install-function=install_cdh_hadoop
whirr.hadoop.configure-function=configure_cdh_hadoop
whirr.yarn.configure-function=configure_cdh_yarn
whirr.yarn.start-function=start_cdh_yarn
whirr.mr_jobhistory.start-function=start_cdh_mr_jobhistory
whirr.env.REPO=cdh4
whirr.env.MAPREDUCE_VERSION=2

## Install CDH4 MRV1
whirr.hadoop.install-function=install_cdh_hadoop
whirr.hadoop.configure-function=configure_cdh_hadoop
whirr.env.REPO=cdh4 
```

# haskell - 有关 ADT 的程序设计

> ID：11302082
> 
> 赞同：3
> 
> 时间：2012-07-02T22:36:13.677
> 
> 标签：haskell

我有一个类型

```
data Phase = PhaseOne
           | PhaseTwo
           | PhaseThree deriving Enum 
```

以及每个阶段要做的五项操作

*   `read`
*   `write`
*   `validate`
*   `evalStatus`
*   `update`

我开始尝试创建一个类型类。问题是，它们都是同一类型。我希望能够做类似的事情

```
instance MyClass PhaseThree where
  read a = ... 
```

另外，我需要重载返回类型。

我知道类型类不是我想要的。但我不确定如何做我想做的事。我想到了一个 GADT，但这并不完全正确，因为我需要能够将每个实例放在一个单独的文件中。

我想要一些关于我需要调查哪些机制的建议？我是否提供了足够的信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T02:46:46.123

我建议稍微颠倒一下。

```
data Phase = Phase {
    read :: String -> Foo,
    write :: Foo -> IO (),
    validate :: Foo -> Bool,
    evalStatus :: IO (),
    update :: Foo -> Foo
}

phaseOne, phaseTwo, phaseThree :: Phase 
```

（或将类重新调整为显式记录）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T18:16:00.250

详细说明我上面的评论，如果您想在一个支持您的操作的类中使用三种不同的类型，您可以`Enum`使用类方法构建类似 - 的功能`succ`。

您还必须提供一个`Done`类型作为占位符`succ PhaseThree`

```
{-# LANGUAGE MultiParamTypeClasses , FunctionalDependencies #-}
data PhaseOne = PhaseOne
data PhaseTwo = PhaseTwo
data PhaseThree = PhaseThree

data Done = Done

class YourClass p0 p1 | p0 -> p1 where
    succ :: p0 -> p1
    -- read :: ...
    -- write :: ...etc

instance YourClass PhaseOne PhaseTwo where
    succ PhaseOne = PhaseTwo
    -- read = ...

instance YourClass PhaseTwo PhaseThree where
    succ PhaseTwo = PhaseThree

instance YourClass PhaseThree Done where
    succ PhaseThree = Done 
```

您可以将`Succ`功能与您的`read`,`write`等方法分开并创建两个类。返回值可以是多态的。

`succ`在您最初发布的公式上是可怕的，因为`succ PhaseThree`只会引发错误。如果您可以让类型系统适用于您的应用程序，那将是理想的选择。

# javascript - javascript 内联与传统注册

> ID：11302083
> 
> 赞同：0
> 
> 时间：2012-07-02T22:36:18.273
> 
> 标签：javascript, inline, registration

我是一个 js 新手，我正在尝试掌握内联与传统注册。代码块 1（内联）工作正常，但代码块 2（传统）不能。谁能解释我的错误？

```
<html>
<head>
<script src="http://crypto-js.googlecode.com/svn/tags/3.0.2/build/rollups/md5.js"></script>
<script>
function gethash() {
var name=prompt("Please enter your name","Harry Potter");
var hash = CryptoJS.MD5(name);
alert("Hello, " + name +".\nYour hash is " + hash)
}
</script>
</head>
<body>
<input type="button" onclick="gethash()" value="Get your hash" />
</body>
</html> 
```

这种使用传统注册的尝试不起作用：

```
<html>
<head>
<script src="http://crypto-js.googlecode.com/svn/tags/3.0.2/build/rollups/md5.js"></script>
<script type="text/javascript">
function gethash() {
var name=prompt("Please enter your name","Harry Potter");
var hash = CryptoJS.MD5(name);
alert("Hello, " + name +".\nYour hash is " + hash)
}
document.getElementById('myname').onclick = gethash;
</script>
</head>
<body>
<input type="button" value="Get your hash" id="myname" />
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T22:38:35.930

在您尝试使用`onclick`. 将该行移到文件的底部。

如果您查看控制台，您应该会看到如下错误：

> 未捕获的类型错误：无法将属性“onclick”设置为 null

这应该解决它：

```
<html>
<head>
<script src="http://crypto-js.googlecode.com/svn/tags/3.0.2/build/rollups/md5.js"></script>
</head>
<body>
<input type="button" value="Get your hash" id="myname" />

<script type="text/javascript">
function gethash() {
var name=prompt("Please enter your name","Harry Potter");
var hash = CryptoJS.MD5(name);
alert("Hello, " + name +".\nYour hash is " + hash)
}
document.getElementById('myname').onclick = gethash;
</script>

</body>
</html> 
```

这使我们找到了更好的方法。使用[`window.onload`](https://developer.mozilla.org/en/DOM/window.onload)，您可以在加载完所有内容后执行 JS 代码。

```
window.onload = function() {
    document.getElementById('myname').onclick = gethash;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T22:41:01.823

当您调用`document.getElementById('myname').onclick = gethash;`时，您尝试将事件绑定到的元素尚不存在。

您需要将代码放入 onload 事件中，如下所示：

```
<html>
    <head>
        <script src="http://crypto-js.googlecode.com/svn/tags/3.0.2/build/rollups/md5.js"></script>
        <script type="text/javascript">
            function gethash() {
                var name=prompt("Please enter your name","Harry Potter");
                var hash = CryptoJS.MD5(name);
                alert("Hello, " + name +".\nYour hash is " + hash)
            }
            window.onload = function() {
                document.getElementById('myname').onclick = gethash;
            }
        </script>
    </head>
    <body>
    <input type="button" value="Get your hash" id="myname" />
    </body>
</html> 
```

使用 onload 并不理想，因为它会在触发之前等待所有资源加载。使用[DOMContentLoaded](https://developer.mozilla.org/en/DOM/DOM_event_reference/DOMContentLoaded)事件会更好，或者为了跨浏览器的兼容性，请查看 jQuery 等库。

* * *

附带说明一下，将表示和逻辑分开是一个非常好的主意，因此应避免使用内联事件处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T22:45:50.730

sachleen 是正确的（下面的代码有效） - 尽管您可以简单地将整个 javascript 块移动到`body`标记的末尾：

```
<html>
<head>
    <script src="http://crypto-js.googlecode.com/svn/tags/3.0.2/build/rollups/md5.js"></script>
</head>
<body>
    <input type="button" value="Get your hash" id="myname" />
    <script type="text/javascript">
        function gethash() {
            var name=prompt("Please enter your name","Harry Potter");
            var hash = CryptoJS.MD5(name);
            alert("Hello, " + name +".\nYour hash is " + hash)
        }
        document.getElementById('myname').onclick = gethash;
    </script>
</body>
</html> 
```

# mysql - MySQL 数据库中的大量列

> ID：11302087
> 
> 赞同：1
> 
> 时间：2012-07-02T22:36:45.323
> 
> 标签：mysql

我有大量记录（10,000 条，每天都在增加），本质上是包含大量数据的报告。所有这些只是数字测量的数据都需要存储。

问题是，这些测量有 200 多个，我需要查询它们。例如，“对于 2012 年 1 月至 3 月之间创建的报告，按体重排序的每个性别的平均身高是多少？” 为了能够灵活地查询任何测量值，每个测量值都需要自己的列。

现在，我将每个字段存储在 JSON 数组中，并将其存储在单个列中。这对于我没有完成查询工具的这部分开发来说很好，但我需要尽快构建它......理论上我可以从数据库中提取所有记录并使用 PHP 对它们进行排序（当它们是对象时）或数组），但是在处理这么多行时，这似乎是不必要的复杂和危险。

MySQL中具有数万行的大型（200+）列表是否存在任何问题，无论是性能还是数据完整性？或者，是否有任何替代方法可以使用某些服务器端语言提取*所有内容*并对其进行排序？

关于我的数据的一些随机信息：

*   每份报告都有 200 多个测量值
*   每个测量值都需要能够被查询
*   测量值主要是整数或浮点数，但也有一些字符串

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T22:51:31.450

好的，我看到了你的困境，在数据库专家（可能是短暂的）缺席的情况下，我会给你我的意见。

为了理智起见，请分解您的数据。假设您正在存储有关人员的信息。您不需要 1 个表中的 200 列。您应该将它们拆分并在许多表中包含多个列。例如

```
tblGeneralCharacteristics:
 - colEyeColor
 - colHairColor
 - colHeight
 - colWeight

tblInterests:
 - colFaveColor
 - colFaveSport

tblRelationships
 - colMother
 - colFather
 - colBrother
 - colSister 
```

这种方式要好很多。计算上我怀疑这很重要。显然，对于每个查询，您返回的数据较少，因此对于某些报告（您可能不需要获取所有数据或拖网所有数据）可能会更快（尽管如果您正确索引数据库，那么它应该不是问题）。

进入下一个问题。即数据库中的记录数量。如果 10,000 开始变得有点大，那么是时候开始缓存了。

现在，就我而言，缓存数据的方法没有对错之分。你需要的就是你需要的。因此，例如，在您的问题中，您提到获取 2012 年 1 月至 2012 年 3 月之间输入的记录的平均体重高度。嗯......您可以编写一个 cron 脚本，计算当月输入的所有记录的平均体重高度并存储在某处的另一张桌子上。然后，当您开始创建报告时，您只需要获取一月、二月和三月的值并将它们平均...这要容易得多。您不是对可能的数千行进行计算查询，而是对几百行进行 cron 查询（不管需要多长时间），然后实际报告只查询 3 行。

另一个技巧是，您可以在 SQL 中进行的计算越多越好。如果你想平均字段/记录，或者总计一些东西，那么将它与你的 SQL 查询一起发送。SQL 服务器将执行计算并返回结果，而不是返回大量数据进行筛选。我知道这并不总是容易/有用的，但是你可以让 SQL 做得越多越好。

希望这可以帮助。就像我说的那样，我确信数据库专家很想给你一些更有见地的建议。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T22:44:53.020

将它们全部分开存放。Mysql 的每张表限制为 4096 列，每行限制为 65536 字节。您不会用主要是数字数据和一些字符串来解决这个问题。

您不应该在 php 中进行任何数据操作，这就是 sql 的亮点。200 列和 10,000 行在宏伟的计划中相当小，只需正确索引您的表，即使您不这样做，性能也应该很好。

# postscript - PostScript 路径组合

> ID：11302089
> 
> 赞同：1
> 
> 时间：2012-07-02T22:37:29.227
> 
> 标签：postscript

我刚刚开始学习 PostScript 以便为 LaTeX 生成图形，但我不知道如何将路径与其自身组合，因此笔画只会影响绘制形状的外边框。我的代码如下：

```
/black { 0 0 0 1 setcmykcolor } def
/gold { 0.02 0.17 0.72 0.05 setcmykcolor } def
newpath
  % the center is 1/2w and 1/2h
  /cx { 1200 2.0 div } def % center-x
  /cy {  600 2.0 div } def % center-y
  /r  {  600 9.0 div
               4 mul
             2.0 div } def % star's radius
  cx r   0 cos mul add
  cy r   0 sin mul add moveto
  cx r 144 cos mul add
  cy r 144 sin mul add lineto
  cx r 288 cos mul add
  cy r 288 sin mul add lineto
  cx r  72 cos mul add
  cy r  72 sin mul add lineto
  cx r 216 cos mul add
  cy r 216 sin mul add lineto
closepath
gsave
gold fill
grestore
1 setlinewidth
black stroke 
```

绘制笔画时，将绘制与形状相交的线条。我想知道是否有办法只让形状的外边界而不是内线。我宁愿不必计算形成星形的线相交的位置，*即*保留 5 条线而不是获得 10 条较小的线。

另请注意，我正在按原样学习 PS，并且不想使用外部程序（阅读 Illustrator 等）。这个问题的目的是建立我对 PostScript 的了解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T03:04:44.020

最简单的方法是先描边，然后填充。您可能希望将线宽加倍，因为这样做可以有效地将线条减半。

```
%...
closepath
gsave
  2 setlinewidth
  black stroke
grestore
gold fill 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T12:05:56.883

PostScript 缺少一个antilip 操作符，它应该将绘画限制在当前路径之外。有`clip`，它将绘画限制在内部，但这对解决这个问题没有帮助。

如前所述，您可以使用`stroke`双倍线宽，然后`fill`是白色，但是如果您想将其绘制在其他东西之上，那么该策略会掩盖下面的任何内容。

或者你可以让星星大一点（我怀疑，但还没有检查过`currentlinewidth 2 5 sqrt 2 mul 5 div add sqrt mul 2 div`），但只有在`1 setlinejoin`.

# objective-c - 在 UITabBarController 中重新排序视图控制器，所有这些都在 Storyboard 中定义

> ID：11302095
> 
> 赞同：37
> 
> 时间：2012-07-02T22:38:18.933
> 
> 标签：objective-c, ios5, uitabbarcontroller, uistoryboard

我想在我的 Storyboard 中更改附加到 UITabBarController 的视图控制器的顺序，而不断开所有视图控制器并以所需的顺序重新连接它们。

**我的问题：**这可以通过 Storyboard IB UI 完成吗？

### 讨论

我正在寻找一些检查器面板，我可以在其中向上和向下移动提供`viewControllers`属性的视图控制器列表中的项目`UITabBarController`。

![几个链接到标签栏控制器的视图控制器](../Images/67ed161cbf64dc292c17e9304d151bf0.png)

我有很多标签，所以我希望不必断开所有连接并重新连接，只是为了更改顺序。

我什至尝试在检查器中更改 Bar Item 上的“标签”值，但该值在运行时也被忽略（我相信它是用于识别目的，而不是用于订购）。

![条形项目上设置的标签](../Images/7567e60288ab7b60809c953a79b7ab91.png)

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-07-02T23:24:07.643

![在此处输入图像描述](../Images/d9de888f72c2f9a17cf850092eee589f.png)

您可以在情节提要中使用鼠标简单地拖放和使用它们。它仍然适用于 4.5.1

**编辑**

也许您必须先将情节提要视图切换到“源代码”并返回，然后才能拖动。右键单击故事板文件并选择“打开方式”->“源代码”，然后再次返回“打开方式”->“界面生成器 - iOS 故事板”。这应该够了吧。

**编辑**

对我来说不再在 Xcode 4.5.2 中工作了！

**编辑**

在 Xcode 5 preview 5 中它再次工作。似乎Apple确实在新版本中修复了这个错误

![在此处输入图像描述](../Images/dbf0cc1c77459b88eb7f508508be9935.png)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-12T09:06:36.603

如果拖放不起作用，还有另一种解决方法。在 Storyboard 中，我刚刚从 UITabBarController 中删除了所有关系并以正确的顺序重新连接它们。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-11T14:24:56.347

XCode 4.5.1

不是经验答案，但我遇到了同样的问题..

我将情节提要作为源代码打开，重新排序

然后以 Interface Builder 的形式打开故事板 - iOS Storyboard

什么都没有改变……但是

然后我可以拖放标签

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-11T09:23:53.583

我遇到过同样的问题。如果我在情节提要中放置了一个新的视图控制器或新的导航控制器，则拖放在标签栏控制器中不起作用。我关闭并重新打开了 Xcode，并且拖放再次运行良好。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-07-31T01:50:14.057

我在 Xcode 4.6.3 中一直遇到这个问题，但刚刚发现了一种重新排序标签的方法。不确定这是否适用于所有人，但在故事板左侧的导航菜单中，如果我展开 TabBarController，它会显示 Tab Bar 元素。单击选项卡栏后，我就可以按照我期望的方式在界面构建器中拖放选项卡图标。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-13T18:22:09.230

您可以通过转到源代码视图并找到场景并编辑源来重新排列。您可以找到标签栏 segue 并添加代码。（右键单击项目导航器中的情节提要并选择 Open As...Source Code）然后返回 Storyboard Nib 视图（右键单击项目导航器中的情节提要并选择 Open As...Interface Builder-IOS故事板）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-06-24T05:54:29.783

在我添加了一个新的视图控制器之后，Xcode 4.6.2 也不允许我重新排序选项卡。只需单击我的一个源代码文件，然后单击故事板文件即可，我可以再次编辑 Tab 键顺序。

# c# - 使用 itextsharp 重新排序 pdf 文件中的页面

> ID：11302097
> 
> 赞同：1
> 
> 时间：2012-07-02T22:38:37.353
> 
> 标签：c#, pdf-generation, itextsharp

我正在尝试重新排序 PDF 文件中的几页。我在博客中找到了一些代码，但无法正常工作。我有一个两页的pdf，我想让最后一页显示为第一页。我总是得到一个例外，说页码必须与订单匹配。当我检查文档对象时，它显示 0 页。但是传入的 PDF 有两页。

```
public void reOrder(string inputFile)
{ 
    Document document = new Document();
    FileStream fs = new FileStream(inputFile, FileMode.Open);
    PdfWriter writer = PdfWriter.GetInstance(document, fs);
    document.AddDocListener(writer);                
    writer.SetLinearPageMode();
    int[] order = {2,1};
    writer.ReorderPages(order);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T13:59:51.837

每当您使用 iTextSharp 编写创建新文档所需的内容时，它永远不会写入现有文档。在您的情况下，页面重新排序需要编写，因此您需要创建一个新文档，将页面调过来，然后重新排序。（当然，您也可以在导入时重新排序它们。）

```
 var inputFile = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Desktop), "Test.pdf");
        var output = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Desktop), "Output.pdf");

        //Bind a reader to our input file
        var reader = new PdfReader(inputFile);

        //Create our output file, nothing special here
        using (FileStream fs = new FileStream(output, FileMode.Create, FileAccess.Write, FileShare.None)) {
            using (Document doc = new Document(reader.GetPageSizeWithRotation(1))) {
                //Use a PdfCopy to duplicate each page
                using (PdfCopy copy = new PdfCopy(doc, fs)) {
                    doc.Open();
                    copy.SetLinearPageMode();
                    for (int i = 1; i <= reader.NumberOfPages; i++) {
                        copy.AddPage(copy.GetImportedPage(reader, i));
                    }
                    //Reorder pages
                    copy.ReorderPages(new int[] { 2, 1 });
                    doc.Close();
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-05T18:30:56.007

[@Chris Haas 的回答](https://stackoverflow.com/a/11312567/109941)很好，但这不是唯一的方法。

这是我的情况：

1.  我首先生成了一个带有[`XMLWorker`](http://demo.itextsupport.com/xmlworker/itextdoc/flatsite.html)Razor 视图的文档。
2.  然后我附加了零对多的图像，每个图像都作为自己的页面。
3.  客户想要重新排序文档，以便图像页面跟在第 1 页之后（即，作为第 2、3、4 页等）。

这是我用来执行此操作的代码：

```
 private static void MoveImagesToPage2(ICollection imagesToBePrintedOnSeparatePages, IDocListener pdfDocument, PdfWriter pdfWriter)
    {
        pdfDocument.NewPage(); // required - http://itextpdf.com/examples/iia.php?id=98

        var numberOfPages = pdfWriter.ReorderPages(null);
        var newOrder = new int[numberOfPages];
        newOrder[0] = 1; // Keep page 1 as page 1

        var i = 1;
        for (var j = imagesToBePrintedOnSeparatePages.Count - 1; 0 <= j; j--)
        {
            newOrder[i] = numberOfPages - j;
            i++;
        }

        for (; i < numberOfPages; i++)
        {
            newOrder[i] = i - (imagesToBePrintedOnSeparatePages.Count - 1);
        }

        pdfWriter.ReorderPages(newOrder);
    } 
```

请注意这一行：

```
pdfDocument.NewPage(); // required - http://itextpdf.com/examples/iia.php?id=98 
```

如果要移动文档中的最后一页，则此行是必需的。（[我不知道为什么。](http://itextpdf.com/examples/iia.php?id=98)）

但是如果有必要，那么你需要这一行来删除你完成后的空白页：

```
 private static byte[] RemoveTheLastPageWhichWasAddedForReordering(byte[] renderedBuffer)
    {
        var originalPdfReader = new PdfReader(renderedBuffer);

        using (var msCopy = new MemoryStream())
        {
            using (var docCopy = new Document())
            {
                using (var copy = new PdfCopy(docCopy, msCopy))
                {
                    docCopy.Open();
                    for (var pageNum = 1; pageNum <= originalPdfReader.NumberOfPages - 1; pageNum++)
                    {
                        copy.AddPage(copy.GetImportedPage(originalPdfReader, pageNum));
                    }
                    docCopy.Close();
                }
            }

            return msCopy.ToArray();
        }
    } 
```

特别感谢[@Craig Howard](https://stackoverflow.com/users/327919/craig-howard)提供[上面的片段](https://stackoverflow.com/a/25449235/109941)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-08T18:41:42.137

来自[@Mathew Leger 的回答](https://stackoverflow.com/a/29149552/109941)：

修剪页面的一个选项是将 PdfReader.SelectPages() 与 PdfStamper 结合使用。我用 iTextSharp 5.5.1 编写了下面的代码。

```
public void SelectPages(string inputPdf, string pageSelection, string outputPdf)
{
    using (PdfReader reader = new PdfReader(inputPdf))
    {
        reader.SelectPages(pageSelection);

        using (PdfStamper stamper = new PdfStamper(reader, File.Create(outputPdf)))
        {
            stamper.Close();
        }
    }
} 
```

然后，您只需为每个条件使用正确的页面选择来调用此方法。

**条件一：**

```
SelectPages(inputPdf, "1-4", outputPdf); 
```

**条件二：**

```
SelectPages(inputPdf, "1-4,6", outputPdf); 
```

或者

```
SelectPages(inputPdf, "1-6,!5", outputPdf); 
```

**条件 3：**

```
SelectPages(inputPdf, "1-5", outputPdf); 
```

这是 iTextSharp 源代码中关于组成页面选择的评论。这是在用于处理页面选择的 SequenceList 类中：

```
/**
* This class expands a string into a list of numbers. The main use is to select a
* range of pages.
* <p>
* The general systax is:<br>
* [!][o][odd][e][even]start-end
* <p>
* You can have multiple ranges separated by commas ','. The '!' modifier removes the
* range from what is already selected. The range changes are incremental, that is,
* numbers are added or deleted as the range appears. The start or the end, but not both, can be ommited.
*/ 
```

# php - 脚本调用的 PHP 计时器重置

> ID：11302101
> 
> 赞同：0
> 
> 时间：2012-07-02T22:38:58.970
> 
> 标签：php, jquery, asynchronous, timer

我正在编写一个使用 jQuery 的异步调用 php 脚本的网站。为了避免双重脚本调用，我想做两件事：

*   禁用将触发脚本调用的按钮，我已成功完成
*   在调用的 php 脚本中设置一个计时器，该计时器将检查它是否在不到一秒前被同一用户调用，如果是，则退出

首先，我认为这会相对容易，并想出了以下代码：

```
if(!isset($_SESSION['time'])) $_SESSION['time']=time();
else if(time()-$_SESSION['time']<=1){
    //If less than one second ago, timer reset
    $_SESSION['time']=time();
    exit;
} 
```

它第一次运行良好，但是之后，当它应该再次检查时，当然一个非常旧的时间已经保存在会话中并且仍然存在，因此可以根据用户的意愿多次调用脚本。

你有什么想法如何解决这个问题吗？谢谢！

查尔斯

编辑

我的问题可能与[此](https://stackoverflow.com/questions/10505422/php-timer-to-only-allow-user-input-every-two-seconds)重复-您可能在第二个答案中看到任何价值吗？

找到解决方案

这是解决方案：

```
if(!isset($_SESSION['time']) || ($_SESSION['time'] + 1 < time())){
    $_SESSION['time'] = time();
}else if(time()-$_SESSION['time']<=1){
    //Timer reset
    $_SESSION['time']=time();
    exit;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T22:47:35.967

最简单的解决方法是覆盖时间值，如果它已设置但早于 X 秒：

```
if(!isset($_SESSION['time']) || ($_SESSION['time'] + 30 < time())) {
    $_SESSION['time'] = time();
} 
```

将 30 值更改为您想要的超时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T23:12:47.210

我可能会稍微不同地解决问题并中止任何不再有效的 AJAX 调用。

例如，您的用户以某种方式单击您的按钮两次，然后第二次单击可以简单地中止第一次单击的 ajax 请求。

在客户端处理问题将有助于降低服务器上的开销，同时使客户端清除用户正在做的任何松散的事情。

这个另一个[问题](https://stackoverflow.com/questions/446594/abort-ajax-requests-using-jquery)应该有助于更详细的细节。

# javascript - jquery val() 不会显示值

> ID：11302103
> 
> 赞同：-1
> 
> 时间：2012-07-02T22:39:02.530
> 
> 标签：javascript, jquery, ajax

## html() 应该用于设置非表单元素（例如 div）中的内容。** 这个问题已经回答了好几次了，我不知道。

从 $.ajax 调用中检索评论后，我试图设置一个值。当我提醒commentOutput 和commentSpan 的值时，它们显示的是正确的数据。但是，当我尝试从这些评论中设置值时，它们不会出现，也不会出现在生成的源代码中。

这是javascript。您可以在控制台中看到 POST 的返回。您还可以看到它为跨度获取的值，正如我在点击时提醒它的那样。

要调用它，只需单击猫的第一张图片，此时其他人都没有评论。

```
var ajaxOptions = {
    type: 'POST',
    dataType: 'json',
    url: 'ajax/comments.php',
    data: { id: photoID, action: 'GetComments' },
    success: function(data) {

            for(i=0; i<data.length; i++) {

                    var commentOutput = '<div><h4>'+data[i].comment_user+' says:</h4>';
                    commentOutput += '<span>'+data[i].comment_msg+'</span>';
                    commentOutput += '</div>';
                    var commentSpan = '#photo' + data[i].photo_id + ' .comments';
                    $(commentSpan).val(commentOutput);
                    $(commentSpan).delay('200').css('display','block');
            }

    }
}; 
```

任何帮助将不胜感激，

干杯，

科迪

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T22:40:53.927

方法`val()`用于`input`,`select`和`textarea`元素。

您应该改用[`html()`](http://api.jquery.com/html/)or[`text()`](http://api.jquery.com/text/)方法。

*注意：这是*[我最近](https://stackoverflow.com/a/11300060/1249581)对几乎同一个问题的回答的完全相同的副本。您是否尝试使用一些搜索来找到解决方案？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T22:39:54.130

你想要`.html()`，没有`.val()`。

```
$(commentSpan).html(commentOutput); 
```

此外，如果您的服务器没有对评论数据进行 HTML 转义，您应该在脚本中执行此操作：

```
function safe(s) {
  return s.replace(/&/g, '&amp;').replace(/>/g, '&gt;').replace(/</g, '&lt;');
}

// ...

var commentOutput = '<div><h4>'+ safe(data[i].comment_user) + ' says:</h4>';
commentOutput += '<span>'  + safe(data[i].comment_msg) + '</span>'; 
```

# php - PHP mysqli 加载缓慢。

> ID：11302109
> 
> 赞同：1
> 
> 时间：2012-07-02T22:39:39.817
> 
> 标签：php, performance, mysqli

大家晚上好！

我正在优化我的网站，我遇到了一些奇怪的行为。之前，我认为这是因为对我使用的数据进行了计算，但我开始质疑这一点。

我发现运行一些代码，例如：

```
for ($i=0; $i < 55 ; $i++) { 
  $query = "SELECT id FROM gamedata_concepts WHERE game_id=12277";

  if ($result = $mysqli->query($query){
  }
} 
```

大约需要 3 秒，但是，如果我在 phpMyAdmin 中调用该查询一次，它说它需要 '.0121' 秒，乘以 55（上面循环中使用的测试数字），它应该使用 appx。.6655 秒。我很好奇这个后端在哪里？或者更好的是，我如何才能更好地设计它以提高效率。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T22:42:14.393

为什么不重构您的查询以使用 IN 而不是 55 个查询？

```
SELECT id FROM gamedata_concepts WHERE game_id IN (12277, 12278, 12279, ...) 
```

每当您看到在循环中执行查询时，这通常是一个不好的迹象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-20T21:42:37.450

您可以使用事务以更快的速度执行此操作

```
$mysqli->query("START TRANSACTION");
for ($i=0; $i < 55 ; $i++) { 
  $query = "SELECT id FROM gamedata_concepts WHERE game_id=12277";

  if ($result = $mysqli->query($query){
  }
}
$mysqli->query("COMMIT"); 
```

# android - 使用下载的图像作为地图标记

> ID：11302110
> 
> 赞同：1
> 
> 时间：2012-07-02T22:39:49.347
> 
> 标签：android

我有一个异步任务，它正在从网络（谷歌地图标记）下载图像。是否可以替换我的硬编码可绘制标记，`R.drawable.maps1`？

我认为我正确接收了图像，但我被困在这里。任何帮助深表感谢。

**图片下载任务**

```
public static class ImageDownloadTask extends AsyncTask<Void, Void, Bitmap> {

    private String url;

    public ImageDownloadTask(String url) {
        this.url = url;
    }

    protected Bitmap doInBackground(Void... params) {

        final AndroidHttpClient client = AndroidHttpClient.newInstance("Android");
        final HttpGet getRequest = new HttpGet(url);

        try {
            HttpResponse response = client.execute(getRequest);
            final int statusCode = response.getStatusLine().getStatusCode();
            if (statusCode != HttpStatus.SC_OK) {
                Log.w("ImageDownloadTask", "Error " + statusCode
                        + " while retrieving bitmap from " + url);
                return null;
            }

            final HttpEntity entity = response.getEntity();
            if (entity != null) {
                InputStream inputStream = null;
                try {
                    inputStream = entity.getContent();
                    final Bitmap bitmap = BitmapFactory.decodeStream(inputStream);
                    Log.w("ImageDownloadTask", "success! "
                            + url);
                    return bitmap;
                } finally {
                    if (inputStream != null) {
                        inputStream.close();
                    }
                    entity.consumeContent();
                }
            }
        } catch (Exception e) {
            getRequest.abort();
            Log.w("ImageDownloadTask", "Error while retrieving bitmap from "
                    + url);
        } finally {
            if (client != null) {
                client.close();
            }
        }
        return null;
    }

    protected void onPostExecute(Bitmap bitmap) {
        if (bitmap != null) {

        }

    }
} 
```

**添加标记**

```
public void addOverlayItem(double latitude, double longitude, String title, String description)
{
    List<Overlay> mapOverlays = mapView.getOverlays();

    //AsyncTasks.ImageDownloadTask imgTask = new AsyncTasks.ImageDownloadTask("http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|c6c6c6");
    //imgTask.execute();

            //can i make use of the bitmap to replace "R.drawable.maps1" below?

    Drawable drawable = this.getResources().getDrawable(R.drawable.maps1);

    OverlayItems itemizedoverlay = new OverlayItems(drawable, this);

    GeoPoint gp = new GeoPoint((int)(latitude * 1E6), (int)(longitude * 1E6));

    OverlayItem overlayitem = new OverlayItem(gp, title, description);

    itemizedoverlay.addOverlay(overlayitem);
    mapOverlays.add(itemizedoverlay);

} 
```

**当前解决方案**

```
new BitmapDrawable(getResources(), imgTask.execute().get()); 
```

这似乎有效，但不能很聪明，对吧？有没有办法在不使用的情况下做到这一点`.get()`？

# jquery - 如何使用 jQuery 从另一个元素中选择元素？

> ID：11302113
> 
> 赞同：0
> 
> 时间：2012-07-02T22:40:02.257
> 
> 标签：jquery, select

示例分区：

```
<div class="container">
    <div class="select1"></div>
    <div class="select2"></div>
    <div class="select3"></div>
</div> 
```

现在我希望能够使用 jQuery 选择“div.container div.select2”。我会这样做的典型方式是这样的：

```
$('.container')[0].getElementsByClassName('select2')[0] 
```

但我想将 JS 查询更改为 jQuery 查询。像这样但实际上有效的东西：

```
$('.container')[0].$('.select2')[0] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T22:42:25.490

试试这个：

```
$('div.container div.select2') 
```

或者：

```
$('div.container div.select2')[0] // this selects the raw dom element 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T22:43:04.950

有两种方法：

```
$($('.container')[0], '.select2')[0] 
```

或者

```
$('.container', '.select2')[0] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T22:43:37.950

假设你已经缓存了`var myObj = $('div.container')`

```
myObj.find('.select2')[0] 
```

需要注意的一件事是，`[0]`除非您尝试对实际的 DOM 元素做某事，否则您不需要。如果您尝试对您的选择执行 jQuery 函数，请省略`[0]`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T22:54:29.810

使用`$('div.container div.select2')`.

顺便说一句，您可以使用`$('div.select2')`直接查询 selcet2。

# php - 如何检查未定义的 $_POST 变量索引的值？

> ID：11302118
> 
> 赞同：0
> 
> 时间：2012-07-02T22:40:55.377
> 
> 标签：php

我的问题是，我们如何检查 $_POST 中发布的变量中的值，而不像您在代码中看到的那样定义它们。

```
if ($_SESSION["Admin"]=="" AND $_REQUEST[act]!="show_login" AND
$_REQUEST[act]!="chk_login" ) {  #not logged in    show_login();   
return; 
```

我收到这些错误，

*   未定义索引：在第 6 行的 F:\xampp\htdocs\shangloo\admin\index.php 中操作
*   未定义索引：第 6 行 F:\xampp\htdocs\shangloo\admin\index.php 中的 Admin

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T22:43:12.293

[`isset()`](http://php.net/isset)在尝试访问`$_REQUEST`数组中的索引之前使用，如下所示：

```
if( $_SESSION["Admin"] == "" && 
    (!isset( $_REQUEST['act']) || 
        ( $_REQUEST['act'] != "show_login" && $_REQUEST['act'] != "chk_login"))) 
```

我想我已经添加了您正在寻找的正确逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T22:49:08.150

```
if(isset($_SESSION))
{
   foreach($_SESSION as $sessKey => $sessVal)
   {
      echo $sessKey . ' - ' . $sessVal.'<br>';
   }
}
echo count($_SESSION); 
```

现在我不确定这是否正是你的要求，但我认为你想知道是否设置了会话，如果设置了，那么所述会话中的数据是什么。`$_SESSION, $_COOKIE, $_POST, $_GET, $_REQUEST`本质上都是数组，因此您可以在使用它们时将它们视为数组。

您可能遇到的另一个问题..这是因为我在发布答案后注意到您的错误是您正在使用 xampp，大概是在 Windows 上。您可能会遇到 Windows 文件系统的权限错误，并且会话无法写入本地 temp 或 tmp 目录。

`$_REQUEST`另外，如果您不需要，我不建议使用它，它是一个全局变量。因此，如果我发帖，使用名称 admin 获取对您的站点/软件的请求，或者我设置一个 cookie 并将其命名为 admin，$_REQUEST 将像对待任何特定定义的版本一样对待它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T22:54:18.180

我发现在循环中检查所有变量更容易维护：

```
<?php
    // VARIABLES NEEDED BY THIS PAGE
    $needed_session = array(
         'Admin' => "",
    );
    $needed_request = array(
         'act' => "",
    );
    foreach($needed_session as $var => $default)
        if (!isset($_SESSION[$var]))
            $_SESSION[$var] = $default;
    foreach($needed_request as $var => $default)
        if (!isset($_REQUEST[$var]))
            $_REQUEST[$var] = $default;
?> 
```

即使写入 _REQUEST 确实是一种糟糕的编码习惯，但至少应该区分 POST 和 GET。

作为一种变体，您可以只声明那些已知的变量：

```
 foreach($needed_request as $var => $default)
        if (!isset($_REQUEST[$var]))
            ${$var} = $default;
        else
            ${$var} = $_REQUEST[$var]; 
```

有多种可能性： 1\. 您可以在导入时在语法上验证变量，例如通过正则表达式）。2\. 你可能会声明一些“真正需要的变量”，它们的缺失会抛出一个错误页面。

但是，如果您要在这条路上走得更远，最好建议您研究一些更高级别的框架。

# android - 移动应用程序 - 屏幕宽度和高度

> ID：11302121
> 
> 赞同：-2
> 
> 时间：2012-07-02T22:41:32.460
> 
> 标签：android, iphone, mobile, blackberry, jquery-mobile

基于 Blackberry、Andriod 和 iPhone……市场上有哪些不同的屏幕分辨率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T23:22:17.300

## 黑莓

这是一个*很好*的黑莓设备列表（阅读整个线程，因为它在最近的帖子中使用更新的设备进行了更新）：

[http://supportforums.blackberry.com/t5/Java-Development/List-of-Blackberry-Devices-with-resolution/td-p/556066](http://supportforums.blackberry.com/t5/Java-Development/List-of-Blackberry-Devices-with-resolution/td-p/556066)

[可以在此处找到](http://docs.blackberry.com/en/developers/deliverables/24222/Dimensions_for_screens_images_and_icons_476251_11.jsp)不太全面的 BlackBerry 图标大小列表

## 苹果手机

这是 iPhone 图标大小的链接：

[http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html)

iPhone 屏幕尺寸很简单：

*   iPhone 2G、3G、3GS - 320x480
*   iPhone 4、4S - 640x960

iPod 和 iPad 添加了更多设备，但您没有指定要查找这些设备。

## 安卓

Android 问题已在 Stack Overflow 上被多次询问。 [您可以看到这个答案，以便从](https://stackoverflow.com/a/6231886/119114)屏幕尺寸开始。

对于 Android 图标，我喜欢使用[Android Asset Studio](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/index.html)。如果您使用它来构建图标，它可以帮助您确保获得所有正确的尺寸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T22:44:35.220

黑莓和安卓没有固定的背景尺寸。iPhone 可以被视为固定的，但最好是面向未来并缩放图像以适应尽可能多的尺寸（在合理范围内）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-02T22:45:38.860

Blackberry 和 Android 因特定型号而异。

有关 iPhone 的信息，请访问：http: [//bit.ly/KPx2Zx](http://bit.ly/KPx2Zx)

# python - 使用装饰器的 Python 方法定义

> ID：11302122
> 
> 赞同：5
> 
> 时间：2012-07-02T22:41:34.563
> 
> 标签：python, methods

有人可以彻底解释以下代码的最后一行：

```
def myMethod(self):
    # do something

myMethod = transformMethod(myMethod) 
```

为什么要通过另一个方法传递一个方法的定义？那将如何运作？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T22:53:08.303

这是一个函数包装的例子，当你有一个函数接受一个函数作为参数，并返回一个修改原始函数行为的新函数时。

这是一个如何使用它的示例，这是一个简单的包装器，它只在每次调用时打印“Enter”和“Exit”：

```
def wrapper(func):
    def wrapped():
        print 'Enter'
        result = func()
        print 'Exit'
        return result
    return wrapped 
```

这是一个如何使用它的示例：

```
>>> def say_hello():
...     print 'Hello'
... 
>>> say_hello()  # behavior before wrapping
Hello
>>> say_hello = wrapper(say_hello)
>>> say_hello()  # behavior after wrapping
Enter
Hello
Exit 
```

为方便起见，Python 提供了[装饰器语法](http://docs.python.org/glossary.html#term-decorator)，它只是函数包装的简写版本，在函数定义时做同样的事情，下面是如何使用它：

```
>>> @wrapper
... def say_hello():
...     print 'Hello'
... 
>>> say_hello()
Enter
Hello
Exit 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T22:43:15.150

> 为什么要通过另一个方法传递一个方法的定义？

因为你想修改它的行为。

> 那将如何运作？

完美，因为函数在 Python 中是一流的。

```
def decorator(f):
  def wrapper(*args, **kwargs):
    print 'Before!'
    res = f(*args, **kwargs)
    print 'After!'
    return res
  return wrapper

def somemethod():
  print 'During...'

somemethod = decorator(somemethod)

somemethod() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T22:48:07.723

您描述的是装饰器，一种方法/功能修改的形式，可以使用[装饰器](http://www.python.org/dev/peps/pep-0318/)的特殊语法更容易地完成。

你描述的相当于

```
@transformMethod
def myMethod(self):
    # do something 
```

装饰器的使用非常广泛，例如以`@staticmethod`、`@classmethod`、`@functools.wraps()`等的形式`@contextlib.contextmanager`等等。

由于某个 P​​ython 版本（我认为是 2.6），类也可以被装饰。

两种装饰器都允许返回甚至不是函数或类的对象。例如，您可以装饰生成器函数，将其变成字典、集合或其他任何东西。

```
apply = lambda tobeapplied: lambda f: tobeapplied(f())

@apply(dict)
def mydict():
    yield 'key1', 'value1'
    yield 'key2', 'value2'
print mydict

@apply(set)
def myset():
    yield 1
    yield 2
    yield 1
    yield 4
    yield 2
    yield 7
print myset 
```

我在这里做什么？

我创建了一个函数，它接受一个“要应用的东西”，然后返回另一个函数。

这个“内部”函数接受要修饰的函数，调用它并将其结果放入外部函数并返回此结果。

`f()`返回一个生成器对象，然后将其放入`dict()`or `set()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T01:10:10.793

在您最初的问题中，您问“为什么要通过另一种方法传递方法的定义？” 然后，在评论中，您问“为什么不直接修改方法的实际源代码？” 我实际上认为这是一个非常好的问题，而且如果不挥手就很难回答，因为装饰器只有在您的代码达到一定程度的复杂性时才会变得真正有用​​。但是，如果您考虑以下两个功能，我认为装饰器的意义会变得更加清晰：

```
def add_x_to_sequence(x, seq):
    result = []
    for i in seq:
        result.append(i + x)
    return result

def subtract_x_from_sequence(x, seq):
    result = []
    for i in seq:
        result.append(i - x)
    return result 
```

现在，这两个示例函数有一些缺陷——例如，在现实生活中，你可能只是将它们重写为列表推导式——但让我们暂时忽略明显的缺陷，假设我们*必须*这样写，作为`for`循环遍历序列。我们现在面临的问题是，我们的两个函数做*几乎*相同的事情，只是在一个关键时刻有所不同。这意味着我们在这里重复自己！这是一个问题。现在我们必须维护更多的代码行，为 bug 的出现留出更多的空间，并为 bug 出现后隐藏的空间留出更多的空间。

解决这个问题的一种经典方法可能是创建一个函数，该函数*接受*一个函数，并将其应用于一个序列，如下所示：

```
def my_map(func, x, seq):
    result = []
    for i in seq:
        result.append(func(i, x))
    return result 
```

现在我们所要做的就是定义要传递给的特定函数`my_map`（这实际上只是内置`map`函数的一个特殊版本）。

```
def sub(a, b):
    return a - b

def add(a, b):
    return a + b 
```

我们可以像这样使用它们：

```
added = my_map(sub, x, seq) 
```

但是这种方法有它的问题。例如，它比我们原来的独立函数更难阅读；每次我们想要`x`从项目列表中添加或减去时，我们都必须将函数和值指定为参数。如果我们经常这样做，我们宁愿有一个始终引用相同操作的单个函数名称——这将提高可读性，并使我们更容易理解代码中发生的事情。我们*可以*将上面的内容包装在*另一个*函数中......

```
def add_x_to_sequence(x, seq):
    return my_map(add, x, seq) 
```

但现在我们又在重复自己了！而且我们还创建了大量的函数，使我们的命名空间变得混乱。

装饰器提供了解决这些问题的方法。我们可以传递一次，而不是*每次都*将一个函数传递给另一个函数。首先我们定义一个包装函数：

```
def vectorize(func):
    def wrapper(x, seq):
        result = []
        for i in seq:
            result.append(func(i, x))
        return result
    return wrapper 
```

现在我们所要做的就是定义一个函数并将其传递给上面，包装它：

```
def add_x_to_sequence(a, b):
    return a + b
add_x_to_sequence = vectorize(add_x_to_sequence) 
```

或者，使用装饰器语法：

```
@vectorize
def add_x_to_sequence(a, b):
    return a + b 
```

现在我们可以编写许多不同的`vectorize`d 函数，所有这些函数的`for`逻辑*都*发生在一个地方。现在我们不必单独修复或优化许多不同的功能；我们所有与循环相关的错误和与循环相关的优化都发生在同一个地方；而且我们仍然获得了特殊定义函数的所有可读性优势。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T22:51:10.217

你需要明白，在 Python 中，一切都是对象。函数是一个对象。您可以对函数对象执行与其他类型对象相同的操作：存储在列表中、存储在字典中、从函数调用返回，等等。

像您展示的代码的通常原因是“包装”另一个函数对象。例如，这是一个打印函数返回值的包装器。

```
def print_wrapper(fn):
    def new_wrapped_fn(*args):
        x = fn(*args)
        print("return value of %s is: %s" % (fn.__name__, repr(x)))
        return x
    return new_wrapped_fn

def test(a, b):
    return a * b

test = print_wrapper(test)

test(2, 3)  # prints:  return value of test is: 6 
```

这是一项非常有用的任务，也是一项非常常见的任务，Python 对它有特殊的支持。谷歌搜索“Python 装饰器”。

# php - 在 PHP 中替换 \n 或 \\n 但不是 "n"

> ID：11302141
> 
> 赞同：1
> 
> 时间：2012-07-02T22:43:22.913
> 
> 标签：php, str-replace

当我为 \n 执行 str_replace 时，它​​会不断替换脚本中的所有字母“n”。我正在尝试用它代替“see\nyou\nsoon\n”来表示“很快再见”。除了它剥离句子中的每个 n 。我不断收到这个“再见”。

是否可以定位，特别是“\n”而不是“n”？

简单的问题。也许尼姆罗迪克。感谢您的时间和解决方案。

编辑 > 添加代码 >*这是我要修复的代码*

```
 $text = "Description: Join us today, Sunday644 \u2022 Pastor Ed Weiss \u2022 Faith World\nOutreach Church \u2022 Bartlett, IL \u2022 Starting at 11:30am,\nfwo.org\/webcast<http:\/\/www.google.com\/url?q=http:\/\/fwo.org\/webcast&ust=1340553597624000&usg=AFQjCNE5g0jUGFl1nDLmKOHuIG8M8y3Wcg>\n";
    preg_match("/Description: ([^\\r\\n]+)/s", $text, $b);
    $text = preg_replace("/\u2022/", "•", $text);
    $text = preg_replace("/[\n\r]/"," ",$text);

    echo $text; 
```

在我的测试中，我丢失了“r”和“n”字母。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T22:45:01.590

换行符和 an`n`是两个完全不同的字符。

换行几乎总是`\n`在编程语言中表示，然而，它实际上只是字符代码 10（十进制）。另一方面，n 是字符代码 110（十进制）。除了转义序列之外，它们之间根本没有任何关系。

要替换`\n`并仅`\n`使用：

```
$str = str_replace("\n", " ", $string); 
```

**编辑 1**：例如，请参阅康纳在评论中[发布的片段。](http://codepad.org/fff8lW2V)

**编辑 2**：正如 JoeCortopassi 所指出的，PHP 只会解析`\n`某些类型的字符串文字。例如，`'\n'`将以文字`\n`字符串结尾。（字符`\`后跟字符`n`）。

```
"\n" //new line (char code 10)
'\n' //literal \ followed by n (char code 92 followed by char code 110)
"\\n" //literal \ followed by n (same as '\n')
'\\n' //literal \ followed by n (same as '\n' :p) 
```

或者：

```
"\n" === chr(10)
'\n' === "\\n" === '\\n' === chr(92) . chr(110) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T23:00:26.023

**选项1**

如果你有一个这样显示的字符串：

```
see\nyou\nsoon\n 
```

...然后你会想要使用这个：

```
$str = str_replace('\n', ' ', $string); 
```

...因为 PHP 将显示反斜杠字符，后跟“n”字符。您使用单引号，因为**php 将其解释为没有转义字符的[文字字符串](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.single)**。

`

**选项 #2**

另一方面，如果您有一个正在显示的字符串，如下所示：

```
see
you
soon 
```

...然后你会想要使用这个：

```
$str = str_replace("\n", '', $string); 
```

...因为**php 会将此字符串视为需要[解释](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.double)**的内容。这意味着将处理变量，转义字符，如`\n`,`\t`并将`\\`解释为其文字字符值。

从您所说的来看，听起来您的字符串中包含应该是新行语句的内容，但从未被解释过，因此**选项＃1可能是您最好的选择**

# java - 编写字符串求值函数

> ID：11302142
> 
> 赞同：5
> 
> 时间：2012-07-02T22:43:32.100
> 
> 标签：java, evaluation, operator-precedence, expression-evaluation

我正在尝试编写一个字符串评估函数，即

```
evaluate("4 + 1") ; // returns 5 
evaluate("4 + 1 + 3") ; // returns 8 
evaluate("4 + 1 * 3") ; // returns 7 (not 15) 

The operators are + - / and * 
```

我最初的想法是使用正则表达式来收集运算符和数字，因为它们可以匹配。而不是在找到该信息之后，以某种方式找出一种优先考虑`/*`操作员的方法`-+`。

这是我开始的方式：

```
static String regex = "([\\+\\*-/])+";
static String digitRegex = "(\\d)+";

public static void main(String[] args) {
    System.out.println(getOperators("4 + 1 * 3"));
}

public static List<String> getOperators(String input) {
    Pattern p = Pattern.compile(regex);
    Matcher matcher = p.matcher(input);

    List<String> operatorList = new ArrayList<String>();

    int count = 0;
    while (matcher.find()){
        if (matcher.group(count) != null && matcher.group(count).trim().length() > 0) {
        operatorList.add(matcher.group(count));
        count++;
        }
    }

    return operatorList;
} 
```

现在我可以编写另一种方法来使用相同的逻辑提取数字。

```
public static List<Integer> getDigits(String input) {
        Pattern p = Pattern.compile(digitRegex);
        Matcher matcher = p.matcher(input);

        List<Integer> digitList = new ArrayList<Integer>();

        int count = 0;
        while (matcher.find()) {
            if (matcher.group(count) != null && matcher.group(count).trim().length() > 0) {
                digitList.add(Integer.valueOf(matcher.group(count)));
                count++;
            }
        }

        return digitList;
    } 
```

现在是我卡住的部分。#1 上述方法在第三个示例中失败：

```
evaluate("4 + 1 * 3") ; // returns 7 (not 15) 
```

而这个 #2 即使我尝试以前的示例，我也无法弄清楚如何将它们按正确的顺序排列。

我在正确的轨道上，有没有人有一些有用的建议请分享？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T23:42:51.627

我在这里写了一些东西......让我们说快速和肮脏是轻描淡写......
无论如何，你不应该“按原样”使用它。它需要“修复”——数字/算术运算的读取应该使用 StringTokenizer 完成——但我会把技术问题留给你；）

```
public class NewClass {

    public static int evaluate(String str){
        if("".equals(str)){
            return 0;
        }
        else if(str.length() == 1){
            return Integer.valueOf(str);
        }
        else{
            String _a = String.valueOf(str.charAt(0));
            String _b = String.valueOf(str.charAt(1));
            if("+".equals(_b) || "-".equals(_b) ){
                if("+".equals(_b)){
                    return Integer.valueOf(_a) + evaluate(str.substring(2));
                }
                else{// "-"
                    return Integer.valueOf(_a) - evaluate(str.substring(2));
                }
            }
            else{// "*" or "/"
                boolean isMulti = ("*".equals(_b));
                String  _c = String.valueOf(str.charAt(2));                
                Integer tmp = 0;
                if(isMulti){
                    tmp = Integer.valueOf(_a) * Integer.valueOf(_c);
                }
                else{
                    tmp = Integer.valueOf(_a) / Integer.valueOf(_c);
                }
                String new_str = String.valueOf(tmp) + str.substring(3);                
                return evaluate(new_str);
            }
        }
    }

    public static void main(String[] args){        
        String e = "4+1*3";
        int t = evaluate(e);
        System.out.println(e + " = "+t);
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T22:51:56.110

您需要一个[运算符优先级解析器](http://en.wikipedia.org/wiki/Operator-precedence_parser)。这是一个非常常见的基于表的解析器，旨在完全满足您的需求。基本上，您将正在扫描的运算符与堆栈顶部的运算符进行比较，然后选择减少堆栈（即进行数学运算并将结果推回堆栈），或者将运算符推回。

作为额外的奖励，OPP 编写起来既简单又有趣。您可以毫不费力地添加对括号等的支持。

编辑 - 我刚刚阅读了那篇维基文章。 ***它是可怕的。***

查找此类解析器的其他示例。

编辑 2 -

[这显示了 c 中的示例。注意表格。](http://epaperpress.com/oper/index.html)

[这个还不错。](http://epaperpress.com/oper/download/oper.pdf)

请记住，您只支持少数运营商，所以不要被吓倒。此外，一旦你实现了一个表，一切都是一样的。

# c# - RavenDB 附件

> ID：11302145
> 
> 赞同：2
> 
> 时间：2012-07-02T22:43:39.743
> 
> 标签：c#, asp.net, .net, ravendb

我正在使用 RavenDB 并在处理任何附件之前删除了一些带有附件的测试文档，所以我在徘徊它们是否仍在磁盘上的某个地方以及如何*轻松*找到它们？

另一个问题是：当文档被删除并且有附件时，附件会自动删除吗？

我浏览了 RavenDB Web UI (Server)，但找不到附件。

以防万一，下面是我的添加附件代码：

```
_session.Advanced.DocumentStore.DatabaseCommands.PutAttachment(key, null, stream, optionalMetaData); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T06:34:28.017

您可以通过`http://localhost:8080/static`查看返回的 json 结果来做到这一点。

# php - CodeIgniter 中的函数重载

> ID：11302150
> 
> 赞同：5
> 
> 时间：2012-07-02T22:44:34.247
> 
> 标签：php, codeigniter, overloading

我想知道您是否可以在 PHP 中重载函数，特别是在 CodeIgniter 中。例如，在我的控制器中，如果我要加载一个视图，但变量是作为参数提供还是留空会有所不同。这是我尝试过的概念，也是我在其他语言中学习的方式：

```
<?php
  function load_view(){
     $this->load->view('view');
  }

  function load_view($var){
    $this->load->model('data');
    $data = $this->data->getInfo($var);
    $this->load->view('view', $data);
  }
?> 
```

但是当我尝试这个时，我收到一个错误“致命错误：无法重新声明 Controller::load_view”...

任何帮助将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-02T22:49:58.673

在 PHP 中重载函数使用可选参数。一个例子可能是：

```
function load_view($var = null) {
     if (!empty($var)) {
         $this->load->model('data');
         $data = $this->data->getInfo($var);
         $this->load->view('view', $data);
     } else {
         $this->load->view('view');
     }
} 
```

# apache-flex - Adobe Flex，在应用程序底部的 IE 上显示“False”的大框，在所有其他浏览器上运行良好

> ID：11302152
> 
> 赞同：1
> 
> 时间：2012-07-02T22:44:43.123
> 
> 标签：apache-flex, flash-builder, flex4.5

在 IE 我的 Flex 应用程序上，我遇到了一个奇怪的问题。显示它是正常的初始 UI，但屏幕底部有一个大白框，其中包含“false”。有谁知道这可能是什么原因造成的？我正在使用最新的 FlashPlayer 11.3.300.257 没有调试。

谢谢，弗雷德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T23:12:49.430

我解决了它，服务器没有为 CSS 设置 MIME 类型，IE9 在尝试加载 history.css 时犹豫不决。谨防。

# sql - 当日志表包含错误时通知我

> ID：11302160
> 
> 赞同：0
> 
> 时间：2012-07-02T22:45:22.280
> 
> 标签：sql, sql-server, sql-server-2008

我正在使用`log4net`并希望设置一个流程，以便在将记录写入`Log`表时通知我。我希望它每小时左右运行一次。我可能会使用这个查询：

```
SELECT * FROM Log 
WHERE Level = 'ERROR' 
AND Datediff(hh,[Date],getdate()) < 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T22:49:31.983

您可以使用[SQL Server 代理作业](http://msdn.microsoft.com/en-us/library/ms181153%28v=sql.105%29.aspx)（我假设您没有使用 SQL Server Express）。您将需要[设置数据库邮件](http://technet.microsoft.com/en-us/sqlserver/dd939167.aspx)。然后你可以简单地安排一个每小时运行的作业，它说：

```
IF EXISTS 
(
  SELECT 1 FROM dbo.[Log] 
    WHERE Level = 'ERROR' 
    AND [Date] >= DATEADD(HOUR, -1, GETDATE())
)
BEGIN
    EXEC msdb.dbo.sp_send_dbmail ...
END 
```

请注意，这门科学并不精确......如果作业在 8:00 后几秒钟开始，它可能会错过 7:00:01 发生的错误，如果你添加几秒钟的缓冲区，你可能会加倍-报告在 6:59:59.997 发生的错误。您可以考虑采取的措施来缓解这种情况，将您记录的最后一个错误存储在某处，然后您可以添加一个附加`WHERE`子句：

```
AND [Date] > (SELECT MAX(LastError) FROM dbo.LastErrorLog) 
```

# objective-c - 将值传递给属性的正确方法是什么？

> ID：11302161
> 
> 赞同：0
> 
> 时间：2012-07-02T22:45:22.410
> 
> 标签：objective-c, ios, properties, reference, uiviewcontroller

我有一个非常基本的问题。实例化 UIViewController 后设置属性-

```
header.h

IBOutlet UITextField *actionLocationFld;

@property (nonatomic, retain) IBOutlet UITextField *actionLocationFld;

main.h

@synthesize actionLocationFld;

(void)loadSocialActionView:(id)sender
{
    self.socialActionView = [[SocialActionViewController alloc] init];
    self.socialActionView.actionLocationFld.text = @"test";
    [self.view addSubview:self.socialActionView.view];
} 
```

actionLocationFld 是一个 UITextfield。我尝试在实例化后设置文本值，但它不起作用。它看起来很容易，但我无法弄清楚。我做错了什么？

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T22:54:46.393

这可能是因为 actionLocationFld 未初始化。

尝试按以下顺序调用函数：

```
 self.socialActionView = [[SocialActionViewController alloc] init];
        [self.view addSubview:self.socialActionView.view];
        self.socialActionView.actionLocationFld.text = @"test"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T23:01:45.973

我没有通过添加另一个属性并将值传递给它来解决它。似乎无法通过我尝试的方式访问 UITextfield 的文本属性。这是新的代码行

```
 self.socialActionView.address = @"test"; 
```

在我的视图控制器内部，我将值转发给 self.view.actionLocationFld.text

# node.js - 在不同的端口上运行 Hook.io

> ID：11302162
> 
> 赞同：1
> 
> 时间：2012-07-02T22:45:24.483
> 
> 标签：node.js, hook.io

我尝试使用不同的端口运行 hook.io，这会杀死客户端的自动发现功能。但是当我尝试创建具有相同端口的客户端时，它们会出现错误。

断绝：

```
var oHook = hookio.createHook( {
  'name'     :'dispatch-hook',
  'hook-port': 9999,
  'hook-host': 'localhost'
} );

oHook.start(); 
```

客户：

```
var oHook = hookio.createHook( {
  name       :'client-hook',
  "hook-port":9999,
  "hook-host":'localhost'
});

oHook.connect(); 
```

错误：

```
events.js:66
    throw arguments[1]; // Unhandled 'error' event
                   ^
Error: listen EADDRINUSE
    at errnoException (net.js:781:11)
    at Server._listen2._connectionKey (net.js:922:26)
    at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

为什么客户端要启动服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T23:21:57.113

您不应该为尝试连接到服务器挂钩的挂钩提供端口。in 选项的存在`hook-port`使该钩子成为服务器

# asp.net-mvc-3 - MVC3 视图模型与实体框架模型

> ID：11302163
> 
> 赞同：7
> 
> 时间：2012-07-02T22:45:29.653
> 
> 标签：asp.net-mvc-3, entity-framework

不知道如何解释这一点，但这里......

我已经使用 EF 4.3 构建了代码优先数据模型。类之一，“地址”包含典型的地址数据，街道，城市，州等。模型中的其他类包含“地址”类的实例。

问题。数据将使用不同的视图收集/呈现，其中一些需要地址字段，另一些则不需要。

我可以构建不同的视图模型，每个模型都具有必要的验证属性，并在数据模型和视图模型之间来回复制数据，但这似乎是错误的。

我错过了什么？必须有一个更聪明的方法来做到这一点。

谢谢你的帮助，吉米

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T01:14:27.763

首先阅读这些问题及其答案：

*   [MVC：数据模型和视图模型](https://stackoverflow.com/q/475129/538387)
*   [为什么有两个类，视图模型和域模型？](https://stackoverflow.com/q/4865806/538387)

这篇文章也可以帮助：

*   [ASP.NET MVC 视图模型模式](http://geekswithblogs.net/michelotti/archive/2009/10/25/asp.net-mvc-view-model-patterns.aspx)

总之，我认为在大多数情况下，拥有一个胖乎乎的*域模型（DM）*但与之相关的轻量级*表示模型（PM）*是有帮助的。因此，当我们只想编辑那个胖 DM 的一小部分时，我们的一个 PM 会举手。

想象一下 DM 中的这个类：

```
namespace DomainModels
{
    public class Person
    {
         public int ID { get; set; }
         public string FirstName { get; set; }
         public string MiddleName { get; set; }
         public string LastName { get; set; }
         public DateTime? DoB { get; set; }
         public MyAddressDM Address { get; set; }
         public string Phone { get; set; }
         public IEnumerable<MyCarModel> Cars { get; set; }
         //etc.
     }
} 
```

现在想象一下，在一个视图中，我们只需要编辑地址和电话。一个轻量级的 PM 可能是这样的：

```
namesapce PresentationModels
{
     public PersonAddressPhone
     {
         public int ID { get; set;}
         public string FullName { get; set;}
         public string AddressSteet { get; set; }
         public string AddressCity { get; set; }
         public string AddressState { get; set; }
         public string AddressZipCode { get; set; }
         public string Phone { get; set; }
     }
} 
```

在另一个视图中，我们需要为一个人添加/删除汽车：

```
namesapce PresentationModels
{
     public PersonCars
     {
         public int ID { get; set;}
         public string FullName { get; set;}
         public IEnumerable<PMCar> Cars { get; set;}
     }
} 
```

DO 和 PM 之间的映射是这个难题的黄金部分。一定要看看[AutoMapper](https://github.com/AutoMapper/AutoMapper/wiki/Getting-started)。

# iphone - UILabel lineBreakMode 剪辑不剪辑文本

> ID：11302165
> 
> 赞同：1
> 
> 时间：2012-07-02T22:45:40.283
> 
> 标签：iphone, objective-c, ios, ipad

所以我有一个 UILabel 并且我已经将它的换行模式设置为剪辑，但我没有看到最后的 ... ，而是它只是在溢出的点截断/剪切文本。我需要设置代码的任何其他部分吗？

这是我的做法：

```
 [self.newsFeedHeadingTitle_ setLineBreakMode:UILineBreakModeClip]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T22:47:51.443

如果您想要字符串末尾的点，请将其设置为“UILineBreakModeTailTruncation”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T22:48:51.000

您还必须设置 UILabel 允许拥有的行数。像这样`[myLabel setNumberOfLines:x]`x 是你想要的行数。如果将 x 设置为零，则标签可以根据需要包含任意数量的行。默认情况下，该值为 1，这就是为什么您的标签不会将文本分成多行的原因。

希望这可以帮助。

干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-10T14:47:03.410

如果您在`NSString`a 上使用普通对象`UILabel`，`myLabel.lineBreakMode = NSLineBreakByTruncatingTail;`应该可以工作。

如果您将`NSAttributedString`-objects 与 a 一起使用`NSParagraphStyle`，请使用`myParagraphStyle.lineBreakMode = NSLineBreakByTruncatingTail;`

设置段落样式的换行模式对我有用。

# hibernate - hibernate-spatial 未解决的依赖 postgis-jdbc;1.5.3: 未找到

> ID：11302166
> 
> 赞同：4
> 
> 时间：2012-07-02T22:45:40.780
> 
> 标签：hibernate, scala, lift

我正在安装休眠空间，以下是官方网站文档中的步骤：

[http://www.hibernatespatial.org/tutorial-hs4.html](http://www.hibernatespatial.org/tutorial-hs4.html)

问题在于图书馆的依赖

为什么找不到图书馆：

postgis-jdbc：jar：1.5.3：编译

在官方网站上查找该库的版本：

[http://postgis.refractions.net/download/](http://postgis.refractions.net/download/)

但不可用

终端显示的信息如下：

```
[warn]    http://scala-tools.org/repo-releases/org/postgis/postgis-jdbc/1.5.3/postgis-jdbc-1.5.3.jar
[warn]          ::::::::::::::::::::::::::::::::::::::::::::::
[warn]          ::          UNRESOLVED DEPENDENCIES         ::
[warn]          ::::::::::::::::::::::::::::::::::::::::::::::
[warn]          :: org.postgis#postgis-jdbc;1.5.3: not found
[warn]          ::::::::::::::::::::::::::::::::::::::::::::::
[info] 
[info] :: USE VERBOSE OR DEBUG MESSAGE LEVEL FOR MORE DETAILS 
```

任何人都知道我可以如何解决这种依赖关系

非常感谢您的关注

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-07T19:50:27.873

看来maven中央存储库中postgis-jdbc的最新可用版本是1.3.3。不幸的是，在 hibernate-spatial 教程中声明的三个附加存储库中没有一个包含 postgis-jdbc 的 1.5.3 版本（最高版本是 1.5.2，可在 repo [http://www.hibernatespatial.org/repository/](http://www.hibernatespatial.org/repository/)中找到）。

postgis 下载页面上没有列出 1.5.3 版本，但是您仍然可以在此处下载：http: [//postgis.refractions.net/download/postgis-1.5.3.tar.gz](http://postgis.refractions.net/download/postgis-1.5.3.tar.gz)

一种实用的方法是自己构建库（在 postgis-1.5.3/java/jdbc/README 中描述）并将其手动添加到本地 maven 存储库（请参阅 Maven 的文档 - 我想提供 URL 但由于就我目前的 SO 声誉而言，每个答案我不能发布两个以上的 URL）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-03T11:20:24.180

您还可以告诉您的构建系统忽略传递依赖，然后显式声明您需要的版本。不确定使用哪个构建系统提升，但这是我在 Play Framework 中使用 SBT 的方法：

```
libraryDependencies ++= Seq(
  [...]
  "org.postgis" % "postgis-jdbc" % "1.5.2",
  "org.hibernate" % "hibernate-spatial" % "4.0-M1" exclude("org.postgis", "postgis-jdbc")  
) 
```

您还必须添加休眠空间存储库才能访问版本`1.5.2`：

```
resolvers += (
    "Hibernate Spatial Repository" at "http://www.hibernatespatial.org/repository" 
) 
```

我通过[本教程](http://cnokello.blogspot.com/2012/08/hibernate-spatial-4x-with-spring-31x.html)学习了这一点，该教程展示了如何使用 Maven 做同样的事情。

# c# - 在调用 DataAdapter 的 Fill() 方法后，判断新行是否添加到 DataTable 的正确方法是什么？

> ID：11302169
> 
> 赞同：1
> 
> 时间：2012-07-02T22:46:09.477
> 
> 标签：c#, .net, ado.net, datatable

我一直在玩 DataTable 的 RowChanged 和 RowChanging 事件，还有 TableNewRow 事件，但无法让它工作。

基本上我所拥有的是一个事件处理程序，其代码填充 DataTable，然后另一个事件处理程序，其代码重新填充相同的 DataTable，并且应该通知用户，在调用 Fill 方法之间，新行被添加到表中（假设是这种情况）。

我也一直在使用 DataRow 的索引器并指定 DataRowVersion 并且无法使其正常工作。

我一直在使用 DataAdapter 的 FillLoadOption 方法，但仍然无法使其正常工作。

有人可以给我一个提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T22:51:11.450

您可以使用[DataTable.GetChanges()](http://msdn.microsoft.com/en-us/library/k2552649.aspx)方法来了解从针对表发出的最后一个 AcceptChanges 中添加、修改或删除了哪些行

例如：

```
DataTable added = dt.GetChanges(DataRowState.Added);
int countAdded = added.Rows.Count; 
```

DataRowState枚举为您[提供](http://msdn.microsoft.com/en-us/library/system.data.datarowstate)了选择其他类型的修改行的选项

# java - 使用 Liferay 进行网页设计

> ID：11302170
> 
> 赞同：0
> 
> 时间：2012-07-02T22:46:24.993
> 
> 标签：java, jakarta-ee, liferay

我熟悉 Java EE Web 开发，但对 liferay 和门户网站很陌生。我谦虚地请求一些关于如何使用 liferay 开发 webapps 的指导。我的困惑源于：

1.  Liferay 是 CMS 还是容器？
2.  你如何部署 webapps（不是 portlet）？你能有 localhost:8080/WebAppName ...吗？
3.  门户是否可以完全定制为具有“正常”网站外观（没有大按钮和“Swing”外观？

请指出任何资源的正确方向，这些资源显示了使用 Liferay 开发和部署完整网站的步骤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:41:31.677

Liferay 提供了一个portlet 运行时。为方便起见，它与 tomcat 捆绑在一起，尽管它可以部署到其他 servlet/Java EE 容器。它提供了开箱即用的 portlet，这意味着它可以用作 CMS，尽管如果您想要的是其他产品可能会更好。可以为其运行的应用程序设置主题。虽然您可以将其他战争部署到容器中，但您可能想问自己为什么。

自从我使用它以来已经有几年了，我一直觉得文档不完整。您可能只需要下载并播放（或在一些网络教程上掷骰子）。您可能最终会出现在代码中。我们最终更改了一些核心代码。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T01:26:12.853

我建议从这里开始改进文档：

[http://www.liferay.com/documentation/liferay-portal/6.1/development](http://www.liferay.com/documentation/liferay-portal/6.1/development)

# javascript - encodeURIComponent 等效对象-c

> ID：11302172
> 
> 赞同：3
> 
> 时间：2012-07-02T22:46:34.293
> 
> 标签：javascript, objective-c

我在谷歌上搜索时遇到了麻烦。

Objective-C 是否有对 URI 组件进行编码的等效方法？

[http://www.w3schools.com/jsref/jsref_encodeuricomponent.asp](http://www.w3schools.com/jsref/jsref_encodeuricomponent.asp)

这似乎是一个非常常见的用例，但我在 Objective-C 中找不到任何关于它的文档。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T22:55:39.643

[`-[NSString stringByAddingPercentEscapesUsingEncoding:]`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-BCIBFDCB)是最简单的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-14T09:28:28.553

当然，您可以选择这种方法，希望对您有所帮助。

```
//encode URL string

+(NSString *)URLEncodedString:(NSString *)str
{

    NSString *encodedString = (NSString *)
    CFBridgingRelease(CFURLCreateStringByAddingPercentEscapes(kCFAllocatorDefault,
                                                              (CFStringRef)str,
                                                              NULL,
                                                              (CFStringRef)@"!*'();:@&=+$,/?%#[]",
                                                              kCFStringEncodingUTF8));

    return encodedString;
}

}

//decode URL string

+(NSString *)URLDecodedString:(NSString *)str
{

  NSString *decodedString=(__bridge_transfer NSString *)CFURLCreateStringByReplacingPercentEscapesUsingEncoding(NULL, (__bridge CFStringRef)str, CFSTR(""), CFStringConvertNSStringEncodingToEncoding(NSUTF8StringEncoding));

    return decodedString;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-10T22:36:16.777

现在`stringByAddingPercentEscapesUsingEncoding:`已弃用。这是 iOS 7+ 的等价物`encodeURIComponent`：

```
[str stringByAddingPercentEncodingWithAllowedCharacters:[NSCharacterSet URLQueryAllowedCharacterSet]] 
```

# java - Eclipse 中没有带有 ADT 插件的 Android 项目选项

> ID：11302175
> 
> 赞同：2
> 
> 时间：2012-07-02T22:47:20.127
> 
> 标签：java, android, eclipse, adt

我是一位经验丰富的程序员和安卓用户。我正在遵循来自 android 开发人员站点的在 eclipse 中创建 android 项目的指南，并且我已经按照创建项目的每一步进行操作，并且 ADT 插件已正确安装和配置。问题：在新项目向导的 android 选项卡下，没有 android 项目的选项。还有其他各种 android 选项，如 Android Activity、Android 应用程序项目、Android 图标集等。有人知道我如何为 Android 项目启用该选项吗？我已经搜索了这个网站以及其他各种网站，似乎没有人遇到同样的问题。这是我针对此问题所做的 XDA 帖子的链接：http: [//forum.xda-developers.com/showthread.php?t=1747568](http://forum.xda-developers.com/showthread.php?t=1747568). 我附上了问题的图片。谢谢！这是问题的图片：http: [//i.stack.imgur.com/8mRFi.png](http://i.stack.imgur.com/8mRFi.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T22:54:21.533

在最新的 ADT (20) 中，对 UI 进行了一些更改，Android 培训部分中的教程有点过时了。您可能正在寻找“Android 应用程序项目”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T22:53:44.257

Android 应用程序项目是一个 Android 项目。

# css - CSS HTML：居中 div

> ID：11302192
> 
> 赞同：0
> 
> 时间：2012-07-02T22:49:00.743
> 
> 标签：css, html

这应该是不费吹灰之力的，但我对一对 div 的 CSS 有一个小谜团。这是HTML：

```
<body>
<form id="form1" runat="server">
<div class="centered" id="selectReport">
    <asp:DropDownList ID="p0" runat="server"></asp:DropDownList>
    <asp:Button ID="viewReport" runat="server" Text="View Report" OnClick="ViewReport" />
</div>
<div>
    ...a centered table...
</div>
<div class="centered" id="buttons">
    <asp:Button runat="server" ID="saveEdits" Text="Save Edits" OnClick="SaveEdits_Click" />
    <asp:Button runat="server" ID="redoEdits" Text="Redo Edits" OnClick="RedoEdits_Click" />
</div>
</form>
</body> 
```

如果我将此 CSS 放在同一个文件中：

```
<style>
    .centered
    {
        margin: auto;
    }
</style> 
```

两个 div 都是左对齐的。

但是，如果我将此 CSS 放在单独的文件中：

```
.centered
{
    margin: auto;
} 
```

第一个 div 左对齐，而第二个 div 居中。我还尝试为每个 div id 编写相同的 CSS 并获得相同的结果——第一个是左对齐的，而第二个是居中的。

这是屏幕截图：

![在此处输入图像描述](../Images/6420fef60a0f55b448d90a5b6a28ead6.png)

这是呈现的 HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head><title>
Network Operations Dashboard
</title>
<link href="NetworkOperations.css" rel="Stylesheet" type="text/css" /></head>

<body>
<h1 style="text-align: center; font-size: 30pt" >Network Operations Dashboard</h1>
<form method="post" action="NetworkOperationsReport.aspx" id="form1">
<div class="aspNetHidden">
<input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value="" />
<input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="" />
<input type="hidden" name="__LASTFOCUS" id="__LASTFOCUS" value="" />
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUKMTAyNTkyMjcyNw9kFgICAw9kFgQCAQ8QDxYGHgxBdXRvUG9zdEJhY2tnHg1EYXRhVGV4dEZpZWxkBQ9BcmNoaXZlRmlsZU5hbWUeC18hRGF0YUJvdW5kZ2QQFQYURGFzaGJvYXJkXzIwMTItTWF5LTEGVHJlbmRzBlN0eWxlcwdTY3JpcHRzCEFwcF9EYXRhB0FjY291bnQVBhREYXNoYm9hcmRfMjAxMi1NYXktMQZUcmVuZHMGU3R5bGVzB1NjcmlwdHMIQXBwX0RhdGEHQWNjb3VudBQrAwZnZ2dnZ2dkZAIFDxYCHgdWaXNpYmxlaGRkUrfXkiabK3mrjfzXNLtumhzsq/lXy+2nab/n0oCTc60=" />
</div>

<script type="text/javascript">
//<![CDATA[
var theForm = document.forms['form1'];
if (!theForm) {
    theForm = document.form1;
}
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    }
}
//]]>
</script>

<script src="/WebApp/WebResource.axd?d=J72WHhxz11o7F4T65-nk2s6O8A5yTLJdKan5j1GWRlsyEEDvOExumPz8U-TIG_EGGghKU7cpVHXCxLarpokjZhHzOtYqhdwyIhY1CB4wM9o1&amp;t=634746614287359483" type="text/javascript"></script>

<div class="aspNetHidden">

<input type="hidden" name="__SCROLLPOSITIONX" id="__SCROLLPOSITIONX" value="0" />
<input type="hidden" name="__SCROLLPOSITIONY" id="__SCROLLPOSITIONY" value="0" />
<input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="/wEWCwLY4tiyDgLwppLRBwKPpuCFAgLH2cPODQLV24ysCQLizdSlDwKFsO2xAgLfhdOhDAK46ZnWCAKVndrNAwK4r5OaCipKQs8Qpkd25hYiUSafRFyvUGzpZRXvRzfKNuVsC9Js" />
</div>
<div class="centered" id="selectReport">
    <select name="Archives" onchange="javascript:setTimeout(&#39;__doPostBack(\&#39;Archives\&#39;,\&#39;\&#39;)&#39;, 0)" id="Archives">
<option selected="selected" value="Dashboard_2012-May-1">Dashboard_2012-May-1</option>
<option value="Trends">Trends</option>
<option value="Styles">Styles</option>
<option value="Scripts">Scripts</option>
<option value="App_Data">App_Data</option>
<option value="Account">Account</option>

</select>
    <input type="submit" name="viewReport" value="View Report" id="viewReport" />
</div>

<div class="centered" id="buttons">
    <input type="submit" name="saveEdits" value="Save Edits" id="saveEdits" />
    <input type="submit" name="redoEdits" value="Redo Edits" id="redoEdits" />
</div> 
```

我一定错过了明显的东西，但我很难过。任何建议表示赞赏。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T23:09:52.347

尝试给你的 div 一个固定的宽度并将它们居中：

```
.centered {
    margin: 0 auto;
    width: 60%; // or whatever you need.
} 
```

要使 div 居中，您通常需要给它一个具体的宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T00:32:04.663

您的 div 可能已经居中（尽管如果您的 CSS 规则从字面上看是 just ，那么除非您在 div 上`margin: auto`指定 a ，否则它们不会做任何事情）。`width`问题是其中的控件（您的表单字段）不是。

尝试添加`text-align: center;`到您的`.centered`CSS 规则。

请记住，输入元素是内联元素，这意味着它们会受到适用于文本的规则（如`text-align`、`line-height`等`text-indent`）的影响。

您可以通过使用一些开发人员工具来检查正在发生的事情，从而亲眼看到这一点。IE 有一些，Chrome 和 Safari 等 WebKit 浏览器有，Firefox 有，Opera 也有。有了它们，您可以（实时）了解您的 CSS 规则如何影响布局以及页面上元素的形状。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T15:38:47.370

由 Kit Grose 的评论提供的答案：http: [//jsfiddle.net/ZrdUY/1/](http://jsfiddle.net/ZrdUY/1/)。

# android - 为什么我得到：threadid=3：对信号 3 和游戏冻结（AndEngine）做出反应？

> ID：11302196
> 
> 赞同：10
> 
> 时间：2012-07-02T22:49:23.583
> 
> 标签：android, multithreading, andengine, freeze

我正在使用 AndEngine 制作一个处理大量移动精灵的游戏。时间不一致，但最终我在日志猫中收到一条消息（threadid = 3：对信号3做出反应）并且游戏冻结。这个错误是什么意思？我已经缩小了它发生的代码范围（它被标记了）：

```
private void levelComplete(){
        runOnUiThread(new Runnable() {
            public void run() {
                 Toast.makeText(TestGFX5Activity.this, "Level Complete", Toast.LENGTH_SHORT).show();
            }
        });
        Log.e("Level Complete","Going to reset values");
        //Reset values
        level++;
        fillerCount = (originalNumberOfFillers + level - 1);
        areaFilled=0;
        fillAreaPercent = 0;

        //Rid scene of sprites
        for(int x=0;x<=fillerNum;x++){  
            filler[x].body.setActive(false);
            scene.detachChild(filler[x].sprite);
            filler[x].active=false;
            filler[x].scale=originalSpriteScale;
            filler[x].body.setUserData("inactive");
        }
        levelText.setText("Level: "+Integer.toString(level));
        fillersLeftText.setText("Balls left: "+Integer.toString(fillerCount));
        percentFilledText.setText("0%");
        fillerNum = -1;

        Log.e("Level Complete","values reset");

        randx = random.nextInt(650) + 25;
        randy = random.nextInt(400) + 25;
        randix = random.nextInt(10);
        randiy = random.nextInt(10);
        if(randix%2==0)
            ix = 5;
        else
            ix = -5;
        if(randiy%2==0)
            iy = 5;
        else
            iy = -5;

        Log.e("Level Complete","Creating destroyer"); //This line executes
        destroyer = new Ball(randx, randy, destroyerTR, getVertexBufferObjectManager(), ix, iy); //Code breaks here (*sometimes*)
        Log.e("Level Complete","complete"); //This line does not
    } 
```

最奇怪的是，代码在崩溃之前工作了 4/5 次（我通常可以升级 3 或 4 次，最多 9 次）。我不确定是什么原因造成的。有人有想法么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T17:02:27.333

当 ANR 情况发生时，Android 运行时会向所有 dalvik VM 发送信号 3，以使它们转储其堆栈跟踪以生成 ANR 报告。strack trace 的转储将导致 dalvik 暂时挂起您的应用程序。

我建议您查看 ANR 的 logcat（事件和主缓冲区）。还要检查 ANR 跟踪的 /data/anr 以检查导致问题的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-11T17:10:17.133

通过查看 /data/anr/traces.txt 文件，你可以发现是否有几十个线程，这可能是你的应用程序被冻结的原因。

# c# - 如何在 C# 中获取 VS_FIXEDFILEINFO.dwFileDateMS？

> ID：11302197
> 
> 赞同：1
> 
> 时间：2012-07-02T22:49:25.237
> 
> 标签：c#, winapi, version, versioning

在 C# 中，您可以使用`FileVersionInfo`. 然而，这门课似乎是不完整的。例如`VS_FIXEDFILEINFO`，这是与文件一起存储的数据，包含`dwFileDateMS`和`dwFileDateLS`。C# 中是否有不同的版本信息类可以为我提供这些字段或其他一些技术？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T23:21:58.707

您可以 P/Invoke Win32 API[`Version Information Functions`](http://msdn.microsoft.com/en-us/library/windows/desktop/ff468915%28v=vs.85%29.aspx)和您感兴趣的`VerQueryValue`。`VS_FIXEDFILEINFO`这就是 .NET`FileVersionInfo`应该做的事情，但由于某种原因没有提供对 FileDate 成员的访问（我想您会发现它们为零且未使用）。

有关代码片段，请参阅[VS_FIXEDFILEINFO](http://www.dreamincode.net/forums/topic/168201-vs-fixedfileinfo/)和[获取文件版本信息](http://social.msdn.microsoft.com/forums/en-US/netfxcompact/thread/51b27133-4f56-4095-ae05-22c1fbbafea7)。

# android - 单击该项目时如何向项目列表视图添加一个小图标？

> ID：11302201
> 
> 赞同：0
> 
> 时间：2012-07-02T22:49:33.870
> 
> 标签：android, listview, icons, selected

我有一个 ListView，每个项目都有一个 TextView。

当用户单击该项目时，我想添加一个小图标。（当用户单击其他时，图标隐藏并显示在其他中）

有什么想法、例子或教程吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T22:58:46.507

您将需要一个自定义 ListViewAdapter。这个网站有一个很好的教程： [http ://www.ezzylearning.com/tutorial.aspx?tid=1763429](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T22:59:19.703

您可以在将图标与该项目相关联的每个列表项上放置一个 OnClickListener，并以编程方式将图标添加到其布局中，同时将其从前一个布局中删除。因此，您需要一个变量来保存与图标关联的当前布局，当单击新项目时，您从该布局中删除图标，然后将变量设置为该新项目的布局。

# powershell-3.0 - 如何判断 Windows 2008 R2 支持哪些 powershell V3 cmdlet？

> ID：11302207
> 
> 赞同：1
> 
> 时间：2012-07-02T22:50:04.887
> 
> 标签：powershell-3.0

如何判断 Windows 2008 R2 将支持哪些 powershell V3 RC cmdlet？在帮助文档中并不清楚哪些将出现和早期检查，除非在 win 2k12 RC 中工作，否则很多似乎不可行。

如果 RC 中的 2000 多个新 cmdlet 不支持 Windows 2008 R2，那么除非构建全新的基础架构，否则对光明的 devops 未来（见下面的链接）的投资似乎不太可能获得回报。我商店的任何现有系统都需要数年时间才能完全迁移，win2k12 将是一个例外，而不是我认为的绝大多数商店的规则，直到几年后。

Windows 2008 R2 中缺少的示例 cmdlet [http://technet.microsoft.com/en-us/library/hh405007(VS.85).aspx](http://technet.microsoft.com/en-us/library/hh405007(VS.85).aspx)

Jeff Snover 的 devops 概述。 [http://blogs.technet.com/b/windowsserver/archive/2012/05/29/windows-server-2012-powershell-3-0-and-devops-part-1.aspx](http://blogs.technet.com/b/windowsserver/archive/2012/05/29/windows-server-2012-powershell-3-0-and-devops-part-1.aspx)

[http://blogs.technet.com/b/windowsserver/archive/2012/05/29/windows-server-2012-powershell-3-0-and-devops-part-2.aspx](http://blogs.technet.com/b/windowsserver/archive/2012/05/29/windows-server-2012-powershell-3-0-and-devops-part-2.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:11:37.353

为解决此问题，Microsoft 打算在正式发布时更新所有 TechNet 信息。这将包括添加到 PowerShell 的任何给定 cmdlet 的 PowerShell 版本。这将涵盖本机 PowerShell Cmdlet - 对于其他 cmdlet，它将取决于该项目团队。

您所说的 2000 多个新 cmdlet 不会全部向后移植到 Server 2008/R2。一些 cmdlet（例如 RSAT）会降级，但对于其他 cmdlet，您将需要 Server 2012。

# java - Guice 的分层依赖

> ID：11302208
> 
> 赞同：4
> 
> 时间：2012-07-02T22:50:06.980
> 
> 标签：java, jpa, guice

我试图找出处理以下情况的最佳做法：

```
public class AppModule extends Module {

  @Override
  protected void configure() {
    install(new JpaPersistModule("myJpaUnit").addFinder(Dao.class));
    bind(MyJpaInitializer.class).asEagerSingleton();
  }

  @Provides
  @IndicatesSomeConstantMap
  @Singleton
  Map<String, String> getMappings(Dao dao) {
    ImmutableMap.Builder<String, String> builder = new ImmutableMap.Builder<String, String>();
    // Build map from Dao
    return builder.build();
  }

} 
```

我需要在其他类中注入@IndicatesSomeConstantMap。似乎 getMappings 可以获得 Dao 的唯一方法是如果我将 MyJpaInitializer 绑定为 EagerSingleton - 这感觉不对。处理这些分层依赖关系的首选方法是什么？

编辑：

根据@jeffcrowe 的回答，我想出了类似的东西：

```
public class Module1 extends PrivateModule {

  @BindingAnnotation @Target({ FIELD, PARAMETER, METHOD }) @Retention(RUNTIME)
  public @interface Jpa1{}

  @Singleton
  public static class JpaInitializer1 {
    @Inject
    public JpaInitializer1(@Jpa1 PersistService service) {
      service.start();
    }
  }

  public interface Finder1 {
    @Finder(query="FROM Foo", returnAs = ArrayList.class)
    List<Foo> getAll();
  }

  @Override
  protected void configure() {
    install(new JpaPersistModule("firstJpaUnit").addFinder(Finder1.class));
    bind(JpaInitializer1.class);
  }

  @Provides
  @Exposed
  @Jpa1
  PersistService getPersistService(Provider<PersistService> provider) {
    return provider.get();
  }

  @Provides
  @Exposed
  @Jpa1
  Finder1 getFinder(Finder1 finder, JpaInitializer1 init) {
    return finder;
  }

} 
```

这通过将依赖关系包装在提供程序后面来处理依赖关系，并且对我来说比使用 eagerSingleton 方法更干净。这也将 JpaModule 隐藏在私有模块后面，使其在绑定多个持久性模块的情况下很有用。新问题是，由于 Finder 已经被 JpaPersistModule 绑定，我们必须在每次注入 Finder1 时添加 @Jpa1 注释。有办法解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T22:21:45.410

这是一个有趣的案例。通常在这样的场景中，您可以将初始化程序绑定在正常的 Singleton 范围内并将其注入到 Dao 实现中，这将确保它在使用 Dao 之前完成。由于 Jpa 持久性模块的设置方式，似乎没有一种简单的方法可以添加此依赖项。

正如 OP 向我指出的那样，JpaPersistModule 是最终的，所以我们不能通过继承它来解决这个问题。但是，我们可以包装用于安装 JpaPersistModule 的活页夹。

首先使用重写的 bind() 方法将绑定器包装在代理中以拦截 EntityManager.class 绑定。（BinderProxy 实现 Binder 并将每个调用传递给它的构造函数中给定的 Binder。[源可用here](https://gist.github.com/3063073)）

```
new BinderProxy(binder()) {
  @Override
  public <T> AnnotatedBindingBuilder<T> bind(Class<T> clazz) {
    if (clazz == EntityManager.class) {
      return (AnnotatedBindingBuilder<T>) super.bind(clazz).annotatedWith(DefaultEntityManager.class);
    } else {
      return super.bind(clazz);
    }
  }
}.install(new JpaPersistModule("myJpaUnit")); 
```

然后向您的模块添加一个提供方法，以确保在使用 EntityManager 之前进行 Jpa init

```
@Provides EntityManager provideEm(MyJpaInitializer init, @DefaultEntityManager EntityManager em){
  return em;
} 
```

# android - 如何在电话结束时启动活动？

> ID：11302209
> 
> 赞同：0
> 
> 时间：2012-07-02T22:50:25.240
> 
> 标签：android, eclipse

我有一个应用程序，允许用户将手机借给要求使用手机打电话的人。它适用于 EditText 和 Button。

这是电话号码：

```
button1 = (Button)findViewById(R.id.button1);
    setEditText1((EditText)findViewById(R.id.editText1));
    button1.setOnClickListener(this); {}}

            public void onClick(View arg0) {

                EditText num=(EditText)findViewById(R.id.editText1);
                String number = "tel:" +num.getText().toString().trim();
                Intent callIntent = new Intent(Intent.ACTION_CALL, Uri.parse(number));
                startActivity(callIntent);
            } 
```

我想要做的是，当客人结束他们的电话时，它会进入密码活动。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T23:00:42.773

您可以使用`TelephonyManager`and`PhoneStateListener`和 override`onCallStateChanged`以便在状态更改为 时开始您的活动`CALL_STATE_IDLE`。

# asp.net-mvc - 使用 IIS 6 和 MVC 3 重写 URL

> ID：11302210
> 
> 赞同：2
> 
> 时间：2012-07-02T22:50:37.533
> 
> 标签：asp.net-mvc, mod-rewrite, url-rewriting, iis-6, isapi-rewrite

我有一个看起来像的网址

```
domain.com/f1/v1/f2/v2/f3/v3/f4/v4/f5/v5/f6/v6 
```

具有较小数量的变化，例如

```
domain.com/f1/v1/f2/v2/f3/v3/f4/v4/f5/v5
domain.com/f1/v1/f2/v2/f3/v3/f4/v4
domain.com/f1/v1/f2/v2/f3/v3
domain.com/f1/v1/f2/v2
domain.com/f1/v1 
```

我如何建立一个重写规则来构建以下内容

```
domain.com/models?f1=v1&f2=v2...f6=v6 
```

该网站是一个使用 Helicon Isapi_Rewrite 进行 url 重写的 IIS 6 MVC 3 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:21:23.290

最好的方法是创建一组规则，每个规则将处理 1 对、2 对、3 对参数...

```
RewriteEngine on
RewriteBase /

# rule for one pair of parameters
RewriteCond %{HTTP:Host} ^domain\.com$ [NC]
RewriteRule ^([^/]+)/([^/]+)$ /models?$1=$2 [NC,L]

# rule for two pairs of parameters
RewriteCond %{HTTP:Host} ^domain\.com$ [NC]
RewriteRule ^([^/]+)/([^/]+)/([^/]+)/([^/]+)$ /models?$1=$2&$3=$4 [NC,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T20:07:18.153

我使用地图提出了这个解决方案。我遇到的主要问题是超出了对占位符的 1-9 美元限制。

```
RewriteMap filtermap txt:content/maps/filtermap.txt [NC]

RewriteCond ${filtermap:$6|NOT_FOUND} !NOT_FOUND  [NC]
RewriteRule ^models/([^/]*/[^/]*)/([^/]*/[^/]*)/([^/]*/[^/]*)/([^/]*/[^/]*)/([^/]*/[^/]*)/([^/]*/[^/]*)   /models/?${filtermap:$1}&${filtermap:$2}&${filtermap:$3}&${filtermap:$4}&${filtermap:$5}&${filtermap:$6} [NC,L]

RewriteCond ${filtermap:$5|NOT_FOUND} !NOT_FOUND  [NC]
RewriteRule ^models/([^/]*/[^/]*)/([^/]*/[^/]*)/([^/]*/[^/]*)/([^/]*/[^/]*)/([^/]*/[^/]*)                 /models/?${filtermap:$1}&${filtermap:$2}&${filtermap:$3}&${filtermap:$4}&${filtermap:$5} [NC,L]

RewriteCond ${filtermap:$4|NOT_FOUND} !NOT_FOUND  [NC]
RewriteRule ^models/([^/]*/[^/]*)/([^/]*/[^/]*)/([^/]*/[^/]*)/([^/]*/[^/]*)                               /models/?${filtermap:$1}&${filtermap:$2}&${filtermap:$3}&${filtermap:$4} [NC,L]

RewriteCond ${filtermap:$3|NOT_FOUND} !NOT_FOUND  [NC]
RewriteRule ^models/([^/]*/[^/]*)/([^/]*/[^/]*)/([^/]*/[^/]*)                                             /models/?${filtermap:$1}&${filtermap:$2}&${filtermap:$3} [NC,L]

RewriteCond ${filtermap:$2|NOT_FOUND} !NOT_FOUND  [NC]
RewriteRule ^models/([^/]*/[^/]*)/([^/]*/[^/]*)                                                           /models/?${filtermap:$1}&${filtermap:$2} [NC,L]

RewriteCond ${filtermap:$1|NOT_FOUND} !NOT_FOUND  [NC]
RewriteRule ^models/([^/]*/[^/]*)                                                                         /models/?${filtermap:$1} [NC,L] 
```

它不是超级漂亮，但它确实有效。过滤器图如下所示

```
 p1/v1  p1=v1
    p2/v2  p2=v2
... 
```

如果你的 p1/v1 组合是无限的，这不是一个理想的解决方案，但我的组合是有限的，所以它很容易管理。

# php - CakePHP HABTM find ... 未返回预期结果

> ID：11302218
> 
> 赞同：0
> 
> 时间：2012-07-02T22:51:22.203
> 
> 标签：php, cakephp

我希望有人能解决我遇到的这个问题。出于某种原因，关于 SO 的其他答案似乎都没有帮助我。

我有 2 个具有 HABTM 关系的表。出版物有很多作者，作者也有很多出版物。就我而言，我试图输出数据库中所有出版物的列表，以及它们的相应作者。

我有以下表格：

## 出版物：

## 身份证标题

0 测试发布

## 作者：

## id 名字 姓氏 中间

0 约翰·多伊

## 作者_出版物：

## id author_id Publication_id

0 0 0

每个表的“id”列设置为主键。

我的出版物模型如下所示：

```
class Publication extends AppModel {

    var $name = 'Publication';
    var $hasAndBelongsToMany = array(
        'Author'=>array(
            'className'=>'Author'
        )
    );     
} 
```

最后，PublicationsController 具有以下功能：

```
function index() {
$publications = $this->Publication->find('all');
$this->set('publications', $publications);
} 
```

以下是出版物现在包含的内容：

```
Array ( [0] => Array ( [Publication] => Array ( [id] => 0 [title] => TestPublica [type_id] => 1 ) [Author] => Array ( ) ) ) 
```

为什么是这样？我期待（也许这是我的问题......）作者 John Doe 应该出现在 Author 数组中。如果应该是，我哪里错了？我需要在那里的某个地方调用 bindModel 吗？

或者......代码是否真的按照它应该的方式执行并且我的期望不正确？如果是这样，我将如何返回所有出版物及其所有作者的列表？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T03:54:49.527

我相信我找到了问题所在。为了测试目的，我手动将记录插入数据库。我将每个表的第一条记录上的主键 ID 设置为零。SQL DB 通常（或总是？）以 1 的主键索引开始第一条记录，而不是 0。我不确定为什么 cake 不能使用这个，但是将 id 更改为 1 解决了这个问题。奇怪的...

# objective-c - 与属性名称和数据的关系？

> ID：11302219
> 
> 赞同：0
> 
> 时间：2012-07-02T22:51:24.690
> 
> 标签：objective-c, xcode

在数据的许多用途中，有一件事让我感到困惑。CoreData 中的 EG 和 NSManagedObject 子类的属性名称与 CoreData 属性中的属性相同。NSXMLParser 也会发生类似的事情。

为什么是这样？这让我很困惑，因为我从来没有看到正在使用的属性名称的字符串。虽然 NSLoging 我得到一个获取请求对象，

```
 "<Person: 0x6d5be20> (entity: Person; id: 0x6d5dce0 <x-coredata://6800B6A5-87AF-46B4-9836-9D412A9B3EE4/Person/p1> ; data: {\n    age = 51;\n    firstName = Anthony;\n    lastName = Robbins;\n})", 
```

作为数组元素之一。我不希望有任何不同。

但是在本教程中，当我使用

```
 for (Person *thisPerson in persons) 
```

（thisPerson 是具有神秘属性的数据对象）。属性名称似乎已按名称排序。

```
 NSLog(@"First Name = %@", thisPerson.firstName); 
```

这是为什么？肯定需要大量的 NSRegex 表达式和字符串修改来推断这些数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T14:54:41.207

至于 Core Data（**不是**NSXMLParser），Core Data 只是使用属性名称在模型中查找相应的属性。如果您正在访问`lastName`一个`NSManagedObject`实例，`foo.lastName`则应该没有实现

```
-(NSString *)lastName 
```

这将导致 NSObject 类回退到该类`NSKeyValueCoding`将把调用变成

```
[foo valueForKey:@"lastName"] 
```

该类`NSManagedObject`覆盖`-valueForKey:`（和其他`NSKeyValueCoding`相关方法）并使用它通过`NSPersistentStoreCoordinator`.

# php - 如何在不调用析构函数的情况下退出 PHP 脚本？

> ID：11302226
> 
> 赞同：1
> 
> 时间：2012-07-02T22:52:16.253
> 
> 标签：php, response, destructor

使用 MVC 框架和控制器在析构函数中呈现页面。我正在通过 php 下载文件，因此在操作结束时脚本应该结束。

如何在不调用析构函数的情况下结束脚本？

有更好的解决方案吗？

exit 和 die 调用析构函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T22:55:17.470

看到[这个答案](https://stackoverflow.com/questions/2385047/when-will-destruct-not-be-called-in-php)。尝试在下载文件的类中创建一个析构函数，以检查文件是否确实已发送到浏览器，如果是，则在该析构函数中调用 exit()。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T23:15:29.657

正如大卫所说：你需要在析构函数中调用 exit() 来停止它。

但是，如果您只想停止由这些析构函数引起的视觉输出，而不是它们可能会产生的任何其他副作用（文件关闭、数据库连接关闭），那么最好只终止进一步的输出，而不要使用析构函数。在我看来，这将是一条路线，因为析构函数往往存在一个重要原因：清理。

您可以通过操作缓冲输出来做到这一点：

```
<?php
class Tester{
   public function devNull($string){
       return "";
   }

   public function runAndBreak(){
        print "run" . PHP_EOL;

        // if any output buffer is working, flush it and close it
        if(ob_get_level()) ob_end_flush();

        // redirect new buffer to our devNull
        ob_start(array($this,'devNull'));
        exit();
        print "still running";

   }

   function __destruct(){
        print "destructor" . PHP_EOL;
   }

}

$t = new Tester();
$t->runAndBreak(); 
```

这只会打印`run`而不是析构函数中的内容。这是通过将您自己的回调例程提供给处理然后返回输出的[ob_start来完成的。](http://www.php.net/manual/en/function.ob-start.php)在我们的例子中，我们只是通过返回一个空字符串来丢弃它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-28T07:37:42.243

这肯定会停止您的脚本，但要小心，如果您运行这样一个服务器，其中一个进程服务多个 PHP 请求，这些服务器也会停止：

```
$pid = getmypid();
exec("kill $pid");
exec("TSKILL $pid"); 
```

# python - Python 创建自定义 NaN

> ID：11302230
> 
> 赞同：2
> 
> 时间：2012-07-02T22:52:48.703
> 
> 标签：python, nan

是否可以在 Python 中创建自定义 NaN 值？

我对浮点表示有所了解，并且 NaN 是具有一些特殊指数的 FP 值。因此，具有该特殊指数的每个 FP 值都是 NaN。

准确地说，我想做的是：

```
x = make_my_special_NaN(int_seed)
assert math.isnan(x)
assert test_my_special_NaN(x, int_seed)
assert not test_my_special_NaN(float("nan"), int_seed) 
```

我调用的函数`make_my_special_NaN`应该采用整数种子，可用于识别我拥有的特殊 NaN 值（如果可能的话）。

有了这个，应该可以测试给定的 NaN 值是否是给定整数种子的特殊 NaN。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T22:54:59.483

和格式说明符将允许您使用您喜欢的任何位模式`f`。`d`[`struct`](http://docs.python.org/library/struct.html)

# windows-7 - windows7上的简单循环会造成内存泄漏？

> ID：11302232
> 
> 赞同：0
> 
> 时间：2012-07-02T22:53:05.023
> 
> 标签：windows-7, memory-leaks, batch-file, 64-bit, 32-bit

我对此不确定，但这个问题可能与[循环中的内存泄漏有关？](https://stackoverflow.com/questions/6330519/memory-leak-in-batch-for-loop).

我有以下简单的批处理脚本：

```
@echo off
:label
cmd.exe /c cls
echo hello
goto label 
```

当此脚本在 Windows7 32 位安装上运行时，它运行良好。但是，当我在我可以访问的少数 Windows7 64 位计算机上运行它时，它会缓慢而明显地耗尽所有系统内存 - 正如在 Windows 任务管理器中所见。关闭执行上述批处理行的窗口后，内存仍处于使用状态。

这是否发生在其他人身上？如果没有，您知道是什么原因造成的吗？系统上安装的其他软件？

如果我这样做，我也会有同样的行为

```
while True: os.system('cls') 
```

在 Python-X/Y shell 中循环。它似乎与创建子流程有关。如果我将上述内容从 更改`cmd.exe /c cls`为 just `cls`，则不会出现内存泄漏。我遇到了这个问题，因为我从 Linux 移植了一个 Python 脚本，该脚本重复地为统计显示执行清屏，为 Windows 实现，如[Clear the screen in python](https://stackoverflow.com/questions/3647175/clear-the-screen-in-python)中所示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:26:56.700

我在我的 x64 机器上运行它，它工作正常，随着时间的推移它确实开始挣扎，但我不会称之为内存泄漏，如果有的话，它只会在 CPU 达到峰值时敲击它。

根据计算机的性能，它可能只是在努力跟上命令。我添加了`timeout`一秒钟，现在 cmd 更快乐并且显示不到 1MB 的 RAM 消耗。

尝试根据您的需要调整它，或者找到获得速度和性能的中间地带，只需让 cmd 休息一下:)

```
@echo off
:label
cmd.exe /c cls
echo hello
timeout /t 1 >nul
goto label 
```

# javascript - “for...in...”循环中的 Javascript 变量范围？

> ID：11302234
> 
> 赞同：0
> 
> 时间：2012-07-02T22:53:16.873
> 
> 标签：javascript, scope

假设我有一个代码片段：

```
dict = {"key":"elem"}
for (var elem in dict){
    someFunction(function(){
        anotherFunction(dict[elem]);
    })
} 
```

在第三级（即 at ）引用它时，是否仍然在语句中`elem`创建该临时变量？`for...in...``anotherFunction(dict[elem])`

在我的代码中调用它时，我收到一条错误消息，指出它返回未定义。

编辑：我可以在`this`某处用关键字解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T23:06:29.960

您正在对匿名函数创建一个闭包，因此它取决于您在设置它和使用它之间对变量所做的操作。

```
var dict = {
    "a": "aaaaaaaaa",
    "b": "bbbbbbbbb",
    "c": "ccccccccc"
};

for (var elem in dict) {
    someFunction(function() {
        anotherFunction(dict[elem]);
    })
}

function anotherFunction(a) {
    console.log(a);
} 
```

异步：循环在实际执行代码之前运行，因此`elem`最终成为集合中的最后一个键。最后一个键被多次使用。

```
function someFunction(f) {   
    setTimeout(f, 500);
} 
```

同步：每个函数按顺序运行，因此每个值都会被打印出来

```
function someFunction(f) {
    f();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T22:55:19.850

`elem`定义你的问题是：

```
dict[elem] 
```

返回`undefind`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T22:58:36.010

如果您在任何语句中创建变量，该变量仍将作用于最近的父函数，这就是 JavaScript 的工作方式。范围是函数。你应该可以在`elem`那里使用，所以你的问题一定是**gdoron**所说的其他地方。

**编辑：**

似乎您正在调用一个将另一个函数作为参数的函数。这真的是你想做的吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T23:04:44.533

要将`dict`变量用作 的范围`anotherFunction`，您需要将其引用`dict`为该函数的范围。例子：

```
for (var elem in dict) {
  someFunction(function(dict, elem) {
    return anotherFunction.call(dict, elem);
  }
} 
```

在您的`anotherFunction`结构中，`this`关键字的使用将引用该`dict`对象。

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call)

# jsf - 在 EL 中连接字符串

> ID：11302236
> 
> 赞同：1
> 
> 时间：2012-07-02T22:53:55.060
> 
> 标签：jsf, el

以下内容不断返回 null 知道为什么

```
<ui:param name="dialogName" value="#{index.toString().concat('Overlay')}" /> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T00:12:16.357

只需这样做：

```
<ui:param name="dialogName" value="#{cc.attrs.xProd.product.productId}Overlay" /> 
```

也可以看看：

*   [在 EL 表达式中连接字符串](https://stackoverflow.com/questions/7386133/concatenating-strings-within-el-expression-defined-in-an-attribute-of-a-facelets)

# google-chrome - 无法通过单击图像来调用内容脚本的功能

> ID：11302243
> 
> 赞同：0
> 
> 时间：2012-07-02T22:54:23.310
> 
> 标签：google-chrome, google-chrome-extension

这就是我在这里：

“清单.json”

```
{..."permissions": [
"https:/mywebsite.com/"],"content_scripts": [{
  "matches" : ["http://*/*", "https://*/*"],
  "js": ["js/jquery-1.7.2.min.js", "contentScript1.js", "contentScript2.js"],
  "all_frames" : true,
  "run_at": "document_end"
} ]} 
```

“contentScript1.js”

```
$(document).ready(function() {
$('#someDiv').load('https://mywebsite.com/index.html');} 
```

“contentScript2.js”

```
function showMessage()
{alert ('Hello World!');} 
```

“索引.html”

```
<a href="" onclick="showMessage();"> <img src="https://mywebsite.com/images/myimage.png"></a> 
```

我在这里实际做的是向我正在访问的页面的代码注入一个可点击的图片，我希望通过点击图片会出现“Hello World”消息。尽管内容脚本和图片已成功加载，但当我单击图像时，未调用该函数，并且在控制台中出现以下错误：

**未捕获的 ReferenceError：未定义 showMessage**

我想它找不到该功能，因为它在我注入代码的网站中而不是在内容脚本中寻找它。但是为什么会这样，我的意思是如果我在加载内容脚本时调用该函数而不是通过单击图像，则会出现该消息。谁能带我离开这里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:46:53.680

I think I m gonna answer my own question:

The reason that this happening is because content scripts run in an *isolated world* see: [http://code.google.com/chrome/extensions/content_scripts.html#execution-environment](http://code.google.com/chrome/extensions/content_scripts.html#execution-environment)

So, you simply cannot call functions, once you injected some html code, in content_scripts to perform some work in the current page of user.

What you have to do is to inject your scripts in the page as you do with html code. So:

(1) add the files you want to inject in web resources in your manifest file see: [http://code.google.com/chrome/extensions/manifest.html#web_accessible_resources](http://code.google.com/chrome/extensions/manifest.html#web_accessible_resources)

```
"web_accessible_resources": [
"Script2.js",
 "index.html",
"jquery-1.7.2.min.js"] 
```

(2) in contentScript1.js (load this as a **content_script**)

```
 //inject your javascript files to the head of the page
function injectJs(srcFile) {
   var scr = document.createElement('script');
   scr.type="text/javascript";
   scr.src=srcFile;
   document.getElementsByTagName('head')[0].appendChild(scr);
}

injectJs(chrome.extension.getURL('jquery-1.7.2.min.js'));
injectJs(chrome.extension.getURL('Script2.js'));

//inject your html by loading query and passing your html page
$(document).ready(function() {
$('#someDiv').load(chrome.extension.getURL('./index.html'));} 
```

**That's all!**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T07:46:28.037

您不了解我的避免冲突的解决方案不适用于您[当前的代码](http://pastie.org/4195575)。而不是 using `$.noConflict`，您将脚本注入函数包装在一个[`$().ready`](http://api.jquery.com/ready/)方法中。

`"js"`您必须从清单的一部分中删除 jQuery ：

```
 "js": ["contentScript1.js"], 
```

和`contentScript1.js`

```
function injectJs(srcFile) {
    var scr = document.createElement('script');
    scr.src = srcFile;
    document.getElementsByTagName('head')[0].appendChild(scr);
}
injectJs(chrome.extension.getURL('js/jquery-min.js'));
injectJs(chrome.extension.getURL('js/yourscript.js')); 
```

不要忘记添加`js/yourscript.js`to [`web_accessible_resources`](http://code.google.com/chrome/extensions/manifest.html#web_accessible_resources)，以便可以使用它：

```
"web_accessible_resources": [
    "index3.html",
    "js/jquery-min.js"
    "js/yourscript.js"
] 
```

在`js/yourscript.js`中，将您的函数逻辑与`$.noConflict`. [`$.noConflict(true)`](http://api.jquery.com/jQuery.noConflict)用于避免与页面中的脚本发生冲突。`$`它恢复和的原始值`jQuery`。

```
(function(jQuery, $) {
    // Here, you can do anything you want.
    // jQuery and $ refer to the same jQuery object from `js/jquery-min.js`

})(jQuery, jQuery.noConflict(true)); 
```

* * *

再次查看您的问题后，我注意到您正在通过 ajax: 加载内容`$('#someDiv').load(...)`。当脚本被注入时，它在页面范围内运行。这就是您的 AJAX 调用失败的原因：由于[Same origin policy](https://developer.mozilla.org/En/Same_origin_policy_for_JavaScript) ，请求被阻止。

现在，我们可以使用**不同的方法**来修复您的代码。我们没有将逻辑从 Content 脚本移动到页面（通过注入的脚本），而是修改了 page `index.html`。点击事件不是预先设置的，而是在内容脚本中添加的。例如：

“index.html”：

```
<a href="" id="showMessage"> <img src="https://mywebsite.com/images/myimage.png"></a> 
```

“contentscript2.js”：

```
$('#showMessage').click(showMessage); 
```

# php - 将照片发布到 Fousquare API V2

> ID：11302247
> 
> 赞同：1
> 
> 时间：2012-07-02T22:54:51.620
> 
> 标签：php, api, curl, foursquare

我正在尝试使用 /photos/add 方法将照片发布到 Foursquare API，但我遇到了一些困难。我要么得到 401（缺少文件）要么得到 502（foursquare 已关闭）。这是我的代码：

```
$ch = curl_init();

// file image name and it's located in the same folder

$image = "cupcakes.jpg";

// I've tried all of these and no luck   
$s = array("file" => "@".$image, "photo" => "@".$image, "image" => "@".$image);

// I've also tried to send raw data:
//curl_setopt($ch, CURLOPT_POSTFIELDS, file_get_contents($image));

$url = "https://api.foursquare.com/v2/photos/add?oauth_token=TOKENHERE&checknId=4fecf6abe4b0369bc7389903";

curl_setopt($ch, CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $s);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

// image/jpeg type
curl_setopt($ch, CURLOPT_HTTPHEADER, array("Content-type: image/jpeg"));

$result = curl_exec($ch);

$http_status = curl_getinfo($ch, CURLINFO_HTTP_CODE);

// I get either 502 / 401 (Foursquare is down or File is missing)
echo $result; 
```

有人知道我做错了什么吗？端点的文档在这里：[https](https://developer.foursquare.com/docs/photos/add) ://developer.foursquare.com/docs/photos/add - 特别是它暗示照片数据应该是 POST 请求的正文？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T15:01:21.093

我已经解决了这个问题，原来你需要发送到foursquare的参数是“照片”。所有其他参数也必须包含在 POST 数组中。

Even though the content-type is requested as "image/jpeg", I've just put in "Except:" and it works fine. I'm not 100% sure why that goes through, but it does. Updated code below:

```
 $s = array("photo" => "@".$image, "checkinId" => "4fecf6abe4b0369bc7389903");

  $url = "https://api.foursquare.com/v2/photos/add?oauth_token=TOKENHERE&v=20120609";
  .....

  curl_setopt($ch, CURLOPT_HTTPHEADER, array("Expect:")); 
```

Everything else can stay the same. Happy posting!

# google-breakpad - 建立谷歌breakpad stackwalk

> ID：11302258
> 
> 赞同：2
> 
> 时间：2012-07-02T22:55:55.240
> 
> 标签：google-breakpad

我可以构建 google breakpad 客户端，stackwalker 可以将转储转换为人类可读的 txt 文件。但是没有 gyp 文件可以制作 vs2008 解决方案。有谁知道如何在 Windows 上构建 stackwalker。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T00:49:38.380

stackwalker 工具目前不使用 Visual C++ 构建。如果您安装了整个工具链，则可以使用 Cygwin 构建它。如果你觉得它有用的话，Mozilla 在[我们的构建机器](http://hg.mozilla.org/build/tools/raw-file/755e58ebc9d4/breakpad/win32/minidump_stackwalk.exe)上使用了一个预构建的 Cygwin minidump_stackwalk 二进制文件。

连同匹配的 Cygwin 支持 DLL： [cygwin1.dll](http://hg.mozilla.org/build/tools/raw-file/755e58ebc9d4/breakpad/win32/cygwin1.dll)、 [cygstdc++-6.dll](http://hg.mozilla.org/build/tools/raw-file/755e58ebc9d4/breakpad/win32/cygstdc%2B%2B-6.dll)、 [cyggcc_s-1.dll](http://hg.mozilla.org/build/tools/raw-file/755e58ebc9d4/breakpad/win32/cyggcc_s-1.dll)。

它有点过时，但应该可以正常工作。

另请注意，您应该能够将 Windows minidump 文件直接加载到 Windows 上的调试器中，例如 Visual C++ 或 WinDBG。

# javascript - 简单的 javascript IF 语句 - 什么是正确的语法？

> ID：11302259
> 
> 赞同：2
> 
> 时间：2012-07-02T22:55:58.230
> 
> 标签：javascript, syntax, if-statement, statements

假设我有这个网址：

```
www.example.com/product-p/xxx.htm 
```

以下 javascript 代码`product-p`从 URL 中挑选出短语：

```
urlPath = window.location.pathname; 
urlPathArray = urlPath.split('/'); 
urlPath1 = urlPathArray[urlPathArray.length - 2]; 
```

然后我可以使用 document.write 来显示短语`product-p`：

```
document.write(''+urlPath1+'') 
```

我的问题是...

如何创建一个 IF 语句，如果 urlPath1 = 'product-p' 然后 document.write（某事），否则 document.write（空白）？

我试过这样做，但我的语法可能是错误的（我不太擅长 JS）。

我最初认为代码是这样的：

```
<script type="text/javascript"> 
urlPath=window.location.pathname; 
urlPathArray = urlPath.split('/'); 
urlPath1 = urlPathArray[urlPathArray.length - 2]; 

if (urlPath1 = "product-p"){
    document.write('test'); 
}
else {
    document.write(''); 
}
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T22:57:12.967

```
if (urlPath1 = "product-p")
//           ^ single = is assignment 
```

    应该：

```
if (urlPath1 == "product-p")
//           ^ double == is comparison 
```

* * *

注意：

```
document.write(''+urlPath1+'') 
```

应该很简单：

```
document.write(urlPath1) 
```

您将`urlpath`字符串与两个空字符串连接起来......它没有多大作用。

# html - Tumblr 上的 Facebook 评论 API

> ID：11302262
> 
> 赞同：0
> 
> 时间：2012-07-02T22:56:11.000
> 
> 标签：html, facebook, api, tumblr

目前，我正在尝试将 Facebook 评论放在我的 tumblr 帖子上。我已经做到了。

但是，每当我发布新帖子时，它都会与之前的帖子共享评论。我认为这与每个帖子的 URL 相同有关，但我不确定。

如何使用 Facebook 对 Tumblr 帖子的评论使每个帖子都独一无二？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T00:31:54.520

确保您使用的是 data-href 的永久链接，而不是您博客的主要 URL。

例子：

```
<div class="fb-comments" data-href="{Permalink}" data-num-posts="2" data-width="500"></div> 
```

# java - 如何为activemq设置队列最大长度

> ID：11302265
> 
> 赞同：3
> 
> 时间：2012-07-02T22:56:32.123
> 
> 标签：java, queue, activemq, configure

我想知道是否可以在activemq上配置队列的最大长度，这样当队列的长度达到限制时，入队操作将失败或抛出异常。有人知道这个问题吗？任何帮助将不胜感激。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T12:47:36.880

看看生产者流控制[http://activemq.apache.org/producer-flow-control.html](http://activemq.apache.org/producer-flow-control.html)

它限制了队列占用的内存量，因此它不是消息数量的方法，而是内存大小的方法。当代理达到其最大资源限制时，您可以将异常返回给客户端。

# javascript - IE8 的 Javascript/jQuery 字符串问题

> ID：11302266
> 
> 赞同：0
> 
> 时间：2012-07-02T22:56:41.267
> 
> 标签：javascript, jquery, html

我在 IE 8 中遇到问题，我试图使用 jQuery 的 val() 从表单字段选择框中存储一个值。该字符串在所有浏览器中都显示良好，但 IE 7/8 显示为空。我假设它与字段中的字符（引号？）有关，但我不确定如何解决这个问题。下面的代码：

```
var $size = $("#size");
var size = $size.find('option:selected').val(), 
```

所选字段的实际值为：

```
L: 158.375" x 80.5" 4023mm x 2045mm 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T23:03:32.677

假设这`#size`是选择框的 id，你为什么要使用`find('option:selected')`？无论当前选择的选项是什么，都将是`val()`选择元素的。

例如`$('select#size').val();`应该返回所选选项的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T23:15:52.000

感谢大家的反馈。看来这是旧版本 jQuery (1.4.1) 的错误。我已经更新到 1.7.2，它现在可以正常工作了。

# regex - 为什么将文件名与扩展名分开的正则表达式在 ColdFusion 中不起作用？

> ID：11302267
> 
> 赞同：2
> 
> 时间：2012-07-02T22:56:43.663
> 
> 标签：regex, coldfusion, coldfusion-9

我正在尝试在 ColdFusion 中检索没有扩展名的文件名。我正在使用以下功能： `REMatchNoCase( "(.+?)(\.[^.]*$|$)" , "Doe, John 8.15.2012.docx" );`

我希望它返回一个数组，例如：`["Doe, John 8.15.2012","docx"]` 但我总是得到一个包含一个元素的数组 - 整个文件名：`["Doe, John 8.15.2012.docx"]`

我在 rexv.org 上尝试了上面的正则表达式字符串，它按预期工作，但在 ColdFusion 上没有。我从这个 SO 问题中得到了字符串：[Regex: Get Filename without extension in One Shot？](https://stackoverflow.com/questions/624870/regex-question-get-filename-without-extension-in-one-shotin)

ColdFusion 是否使用不同的语法？还是我做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T23:56:48.137

### 为什么你没有得到预期的结果......

你得到一个包含整个文件名的单项数组的原因是你的模式匹配整个文件名，并且匹配一次。

它*正在*捕获两个组，但[**rematch**](http://cfdocs.org/rematch)返回匹配数组，而不是捕获组的数组，因此您看不到这些组。

### 如何解决问题...

如果您正在处理简单文件（即没有`.htaccess`或类似），那么最简单的解决方案就是使用...

```
ListLast( filename , '.' ) 
```

....仅获取文件扩展名并获取不带扩展名的名称，您可以这样做...

```
rematch( '.+(?=\.[^.]+$)' , filename ) 
```

这使用前瞻来确保在字符串的末尾`.`至少有一个非`.`，但是（因为它是前瞻）它被排除在匹配之外（所以你只能在匹配中获得预扩展部分） .

要处理非扩展文件（例如`.htaccess`或`README`），您可以修改上面的正则表达式，`.+(?=(?:\.[^.]+)?$)`除了使扩展成为可选之外，它基本上做同样的事情。但是，没有一种简单的方法可以为这些更新 ListLast 方法（猜你需要检查`len(extension) LT len(filename)-1`或类似的）。

### *（可选）*访问捕获的组...

如果您想获取实际捕获的组，在 CF 中最接近的本地方法是使用[**refind**](http://cfdocs.org/refind)函数，将第四个参数设置为 true - 但是，这只给您位置和长度 - 要求您使用[mid](http://cfdocs.org/mid)到自己提取它们。

出于这个原因（以及许多其他原因），我[为 CF 创建了一个改进的正则表达式实现，称为 cfRegex](http://cfregex.net/)，它可以让您直接返回组文本（即不要乱用 mid）。

如果你想使用 cfRegex，你可以像这样使用你的原始模式：

```
RegexMatch( '(.+?)(\.[^.]*$|$)' , filename , 1 , 0 , 'groups' ) 
```

或使用命名参数：

```
RegexMatch( pattern='(.+?)(\.[^.]*$|$)' , text=filename , returntype='groups' ) 
```

并且您会返回一个匹配数组，其中每个元素是该匹配的捕获组的数组。

如果你正在做大量的正则表达式工作来处理捕获的组，[那么 cfRegex](http://cfregex.net)肯定比使用 CF 的 re 方法更好。

如果您只关心获取扩展名和/或排除扩展名的文件名，那么上面的示例就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T07:56:39.810

@Peter 的反应很棒，但是这种方法可能比必要的要冗长一些。`reMatch()`只需对正则表达式稍作调整即可做到这一点。

```
<cfscript>
    param name="URL.filename";

    sRegex = "^.+?(?=(?:\.[^.]+?)?$)";

    aMatch = reMatch(sRegex, URL.filename);

    writeDump(aMatch);
</cfscript> 
```

这适用于以下文件名模式：

*   foo.bar
*   富
*   .htaccess
*   约翰 8.15.2012.docx

正则表达式的解释：

^ 从字符串的开头

.+? 一个或多个 (+) 字符 (.)，但最少 (?) 将与正则表达式的其余部分一起使用。这是文件名。

(?=) 向前看。确保此处的内容出现在字符串中，但实际上并不匹配。这是不返回任何可能存在的文件扩展名的关键位。

    (?: 将这些东西组合在一起，但不要记住它以供反向参考。

        . 一个点。这是文件名和文件扩展名之间的分隔符。

        [^.]+? 一个或多个 (+) 单个 ([]) 非点字符 (^.)，再次匹配尽可能少的 (?)，这将允许整个正则表达式工作。

    ? （这是 (?:) 组之后的那个）。这些组中的零个或一个：即：零个或一个文件扩展名。

    $ 到字符串的末尾

我只测试了这四种文件名模式，但它似乎工作正常。其他人也许可以对其进行微调。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T02:48:05.740

实现相同结果的更多方法。它们都在大致相同的时间内执行。

```
<cfscript>
str = 'Doe, John 8.15.2012.docx';

// sans regex
arr1 = [
    reverse( listRest( reverse( str ), '.' ) ),
    listLast( str, '.' )
];

// using Java String lastIndexOf()
arr2 = [
    str.substring( 0, str.lastIndexOf( '.' ) ),
    str.substring( str.lastIndexOf( '.' ) + 1 )
];

// using listToArray with non-filename safe character replace
arr3 = listToArray( str.replaceAll( '\.([^\.]+)$', '|$1' ), '|' );
</cfscript> 
```

# scala - Iterable 和 Iterator 之间有什么关系？

> ID：11302270
> 
> 赞同：54
> 
> 时间：2012-07-02T22:56:59.083
> 
> 标签：scala, iterator

scala`Iterator`和in有什么区别？`Iterable`

我认为这`Iterable`代表了一个我可以迭代的集合，并且`Iterator`是指向可迭代集合中的一个项目的“指针”。

但是，`Iterator`具有`forEach`, `map`,等功能`foldLeft`。它可以转换为`Iterable`via `toIterable`。并且，例如，`scala.io.Source.getLines`返回`Iterator`，而不是`Iterable`。

但我不能做`groupBy`，`Iterator`我可以做`Iterable`。

那么，这两者之间是什么关系，`Iterator`和`Iterable`？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-07-02T23:12:10.567

简而言之：An`Iterator`确实有状态，而 an`Iterable`没有。

请参阅两者的 API 文档。

[可迭代](http://www.scala-lang.org/api/current/scala/collection/Iterable.html)：

> 可迭代集合的基本特征。
> 
> 这是所有 Scala 集合的基本特征，它定义了一个迭代器方法来逐个遍历集合的元素。[...] 这个 trait 通过使用迭代器遍历所有元素来实现 Iterable 的 foreach 方法。

[迭代器](http://www.scala-lang.org/api/current/scala/collection/Iterator.html)：

> 迭代器是允许迭代一系列元素的数据结构。它们有一个 hasNext 方法来检查是否有下一个元素可用，还有一个 next 方法返回下一个元素并将其从迭代器中丢弃。
> 
> 迭代器是可变的：对它的大多数操作都会改变它的状态。虽然它通常用于遍历集合的元素，但它也可以在没有任何集合支持的情况下使用（参见伴随对象的构造函数）。

`Iterator`如果需要，您可以使用 an停止迭代并在以后继续。如果您尝试使用 a 执行此操作，`Iterable`它将再次从头部开始：

```
scala> val iterable: Iterable[Int] = 1 to 4
iterable: Iterable[Int] = Range(1, 2, 3, 4)

scala> iterable.take(2)
res8: Iterable[Int] = Range(1, 2)

scala> iterable.take(2)
res9: Iterable[Int] = Range(1, 2)

scala> val iterator = iterable.iterator
iterator: Iterator[Int] = non-empty iterator

scala> if (iterator.hasNext) iterator.next
res23: AnyVal = 1

scala> if (iterator.hasNext) iterator.next
res24: AnyVal = 2

scala> if (iterator.hasNext) iterator.next
res25: AnyVal = 3

scala> if (iterator.hasNext) iterator.next
res26: AnyVal = 4

scala> if (iterator.hasNext) iterator.next
res27: AnyVal = () 
```

请注意，我没有使用`take`on `Iterator`。这样做的原因是它使用起来很棘手。`hasNext`并且`next`是唯一可以保证按预期工作的两种方法`Iterator`。再次查看[Scaladoc](http://www.scala-lang.org/api/current/scala/collection/Iterator.html)：

> 特别重要的是要注意，除非另有说明，否则在调用迭代器的方法后绝不应使用迭代器。两个最重要的例外也是唯一的抽象方法：next 和 hasNext。
> 
> 这两种方法都可以被调用任意次数，而不必丢弃迭代器。请注意，即使 hasNext 也可能导致突变——例如从输入流迭代时，它将阻塞直到流关闭或某些输入可用。
> 
> 考虑以下示例以进行安全和不安全的使用：
> 
> ```
> def f[A](it: Iterator[A]) = {
>   if (it.hasNext) {            // Safe to reuse "it" after "hasNext"
>     it.next                    // Safe to reuse "it" after "next"
>     val remainder = it.drop(2) // it is *not* safe to use "it" again after this line!
>     remainder.take(2)          // it is *not* safe to use "remainder" after this line!
>   } else it
> } 
> ```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-02-06T19:54:16.487

Martin Odersky 和 ​​Lex Spoon 的另一种解释：

> 迭代器上的 foreach 方法与可遍历集合上的相同方法之间有一个重要的区别：当调用迭代器时，foreach 将在迭代器完成时将迭代器留在其末尾。因此，在同一个迭代器上再次调用 next 将失败并返回 NoSuchElementException。相反，当在集合上调用时，foreach 保持集合中元素的数量不变（除非传递的函数添加到删除元素，但不鼓励这样做，因为它可能会导致令人惊讶的结果）。

来源：[http ://www.scala-lang.org/docu/files/collections-api/collections_43.html](http://www.scala-lang.org/docu/files/collections-api/collections_43.html)

还要注意（感谢 Wei-Ching Lin 的这个提示）`Iterator`扩展了这个`TraversableOnce`特性，而`Iterable`没有。

# node.js - 如何使用 Q 正确中止 node.js 承诺链？

> ID：11302271
> 
> 赞同：36
> 
> 时间：2012-07-02T22:57:10.180
> 
> 标签：node.js, promise, q

我正在使用Node.js[的 Q 模块](https://github.com/kriskowal/q/)，试图在我有很多步骤的情况下避免“厄运金字塔”。例如：

```
function doTask(task, callback)
{
    Q.ncall(task.step1, task)
    .then(function(result1){
        return Q.ncall(task.step2, task);
    })
    .then(function(result2){
        return Q.ncall(task.step3, task);
    })
    .fail(callback).end();
} 
```

本质上这似乎有效；如果任何任务步骤引发错误，则将其传递给回调（尽管我欢迎改进，因为我是 node.js 承诺的新手）。但是，当我需要提前中止任务链时，我遇到了问题。例如，如果 result1 成功返回，我可能想提前调用回调并中止其余的，但我这样做的尝试失败了......

```
function doTask(task, callback)
{
    Q.ncall(task.step1, task)
    .then(function(result1){
        if(result1)
        {// the rest of the task chain is unnecessary 
            console.log('aborting!');
            callback(null, result1);
            return null;
        }
        return Q.ncall(task.step2, task);
    })
    .then(function(result2){
        console.log('doing step 3...');
        return Q.ncall(task.step3, task);
    })
    .fail(callback).end();
} 
```

在这个例子中，我看到两个“正在中止！” 并打印“正在执行第 3 步...”。

我敢肯定，我只是在这里误解了一些基本原则，因此不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-28T03:32:13.293

这是您需要分支的情况，这确实意味着嵌套或创建子例程。

```
function doTask(task, callback) {
    return Q.ncall(task.step1, task)
    .then(function(result1) {
        if (result1) return result1;
        return Q.ncall(task.step2, task)
        .then(function(result2) {
            return Q.ncall(task.step3, task);
        })
    })
    .nodeify(callback)
} 
```

或者

```
function doTask(task, callback) {
    return Q.ncall(task.step1, task)
    .then(function(result1) {
        if (result1) {
            return result1;
        } else {
            return continueTasks(task);
        }
    })
    .nodeify(callback)
}

function continueTasks(task) {
    return Q.ncall(task.step2, task)
    .then(function(result2) {
        return Q.ncall(task.step3, task);
    })
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-09-03T23:16:06.163

在 Promise 链中抛出的任何错误都将导致整个堆栈提前中止，并将控制权交给错误返回路径。（在这种情况下，fail() 处理程序）当您检测到导致您想要中止承诺链的某个状态时，只需抛出一个非常具体的错误，您将其捕获在错误返回中并忽略（如果您这样选择）

```
function doTask(task, callback)
{
    Q.ncall(task.step1, task)
    .then(function(result1){
        if(result1 == 'some failure state I want to cause abortion')
        {// the rest of the task chain is unnecessary 
            console.log('aborting!');
            throw new Error('abort promise chain');
            return null;
        }
        return Q.ncall(task.step2, task);
    })
    .then(function(result2){
        console.log('doing step 3...');
        return Q.ncall(task.step3, task);
    })
    .fail(function(err) {
        if (err.message === 'abort promise chain') {
            // just swallow error because chain was intentionally aborted
        }
        else {
            // else let the error bubble up because it's coming from somewhere else
            throw err;
        } 
    })
    .end();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-11T18:08:17.260

我相信你只需要拒绝承诺就可以打破承诺链。

[https://github.com/kriskowal/q/wiki/API-Reference#qrejectreason](https://github.com/kriskowal/q/wiki/API-Reference#qrejectreason)

似乎 .end() 已更改为 .done()

```
function doTask(task, callback)
{
    Q.ncall(task.step1, task)
    .then(function(result1){
        if(result1)
        {// the rest of the task chain is unnecessary 
            console.log('aborting!');
            // by calling Q.reject, your second .then is skipped,
            // only the .fail is executed.
            // result1 will be passed to your callback in the .fail call
            return Q.reject(result1);
        }
        return Q.ncall(task.step2, task);
    })
    .then(function(result2){
        console.log('doing step 3...');
        return Q.ncall(task.step3, task);
    })
    .fail(callback).done();
} 
```

# c# - 为什么我不能从资源中获取自定义字体？

> ID：11302275
> 
> 赞同：2
> 
> 时间：2012-07-02T22:57:20.050
> 
> 标签：c#, wpf, silverlight, xaml, resources

我有一个库，其中包含一个 ThemeResources 文件，其中包含样式。

![在此处输入图像描述](../Images/f02b778b01e32b236d87e621490fa3f7.png)

在字体文件夹中，我有一个字体文件 BuxtonSketch.ttf。Build Action 就像 RESOURCE

![在此处输入图像描述](../Images/d447f8a81c23b0acb9fe71825a2f5111.png)

在 ThemeResources 中，我定义了字体：

```
<FontFamily x:Key="FontFamily-Sketch">pack://application:,,,/Resources/Fonts/#Buxton Sketch</FontFamily>

<Style x:Key="TextNormalStyle" TargetType="TextBlock">
    <Setter Property="FontFamily" Value="{StaticResource FontFamily-Sketch}" />
</Style> 
```

由于我的 UserControl 调用了 ProblemUserControl，我调用了但没有工作

```
<UserControl.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="/Resources/ThemeResources.xaml" />
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</UserControl.Resources>

<Grid>
    <TextBlock Text="La pelicula PROMETHEUS!" Style="{StaticResource TextNormalStyle}" />
</Grid> 
```

会发生什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T23:29:11.493

[This blog](http://www.switchonthecode.com/tutorials/silverlight-3-custom-fonts)和[this blog](http://agkdesign.wordpress.com/2008/08/20/silverlight-custom-fonts-how-to-and-issues/)都使用以下语法来使用自定义字体

博客 1：

```
<TextBlock Text="SOTC Custom Fonts!" FontFamily="VINERITC.TTF#Viner Hand ITC"/> 
```

博客2：

```
<TextBlock Text="Gothic" FontFamily="./GOTHIC.TTF#Century Gothic"/> 
```

所以对你来说，我认为它会是

```
<TextBlock Text="Buxton" FontFamily="BuxtonSketch.TTF#Buxton Sketch"/> 
```

或为你的风格

```
<Style x:Key="TextNormalStyle" TargetType="TextBlock">
    <Setter Property="FontFamily" Value="BuxtonSketch.TTF#Buxton Sketch" />
</Style> 
```

您可能需要包含文件夹位置，但不确定

```
<TextBlock Text="Buxton" FontFamily="Resources/Fonts/BuxtonSketch.TTF#Buxton Sketch"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T05:41:59.553

您也可以将字体添加到 .zip 文件并像这样访问：

```
<Setter Property="FontFamily" Value="../Resources/Fonts/Fonts.zip#BuxtonSketch"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-03T21:49:09.900

我刚刚花了一整天的时间研究这个问题。将字体复制到项目中时，请确保 Visual Studio 将`Build Action`这些项目的 设置为`Resource`. 我所要做的就是在下拉列表中更改它。

# android - “SELECT last_insert_rowid()”总是返回“0”

> ID：11302276
> 
> 赞同：16
> 
> 时间：2012-07-02T22:57:25.917
> 
> 标签：android, sqlite

我对“last_insert_rowid()”有疑问。

在我的 DB-Helper-Class 中，我正在执行以下操作：

```
public int getLastID() {
    final String MY_QUERY = "SELECT last_insert_rowid() FROM "+ DATABASE_TABLE5;
    Cursor cur = mDb.rawQuery(MY_QUERY, null);
    cur.moveToFirst();
    int ID = cur.getInt(0);
    cur.close();
    return ID;
} 
```

但是当我在我的意图中调用它时：

```
int ID = mDbHelper.getLastID(); 
Toast.makeText(this, "LastID: " + ID, Toast.LENGTH_SHORT).show(); 
```

我总是得到“0”回来。那不可能，因为我的数据库中有很多条目，并且自动增量值应该更高。

我做错了什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-02T23:11:23.410

好的，这是正确的提示约翰 ;-)

查询应如下所示：

```
public int getHighestID() {
final String MY_QUERY = "SELECT MAX(_id) FROM " + DATABASE_TABLE5;
Cursor cur = mDb.rawQuery(MY_QUERY, null);
cur.moveToFirst();
int ID = cur.getInt(0);
cur.close();
return ID;
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-08-26T12:09:07.023

您不需要输入表名，`last_insert_rowid()`它会自动从会话中选择最后插入的 id。所以你也可以简单地使用这个功能。

```
public int getHighestID() {
    final String MY_QUERY = "SELECT last_insert_rowid()";
    Cursor cur = mDb.rawQuery(MY_QUERY, null);
    cur.moveToFirst();
    int ID = cur.getInt(0);
    cur.close();
    return ID;
} 
```

# java - 是否可以在 Groovy 中为 Enums 提供自己类型的实例变量？

> ID：11302278
> 
> 赞同：8
> 
> 时间：2012-07-02T22:57:36.033
> 
> 标签：java, groovy, enums

我在 Groovy 中制作一个文本冒险游戏作为一种练习，我遇到了一个奇怪的错误。

现在，我有`enum`一个玩家可以去的方向，目前包含北、南、东、西、上和下。

我有一`Room`堂课，里面有`Map`其他相连的房间和他们的方向。当我在某个位置添加一个`Room`到另一个时，我希望能够在*相反*的方向上将电流添加到另一个。`Room``Direction``Room``Room`

 *例如：如果我添加从房间 1 到房间 2 的北向连接，我希望能够同时添加从房间 2 到房间 1 的南向连接。

目前，我正在尝试使用带有附加实例变量（类型）的`enum`命名来实现这一点。这是不允许的吗？我没有收到编译器错误或任何东西，但我似乎无法让它工作。`Direction``opposite``Direction`

这是完整的`enum`声明：

```
public enum Direction {
    North(South), South(North), East(West), West(East), Up(Down), Down(Up)
    private Direction opposite
    Direction(Direction d){
        opposite = d
    }
    public opposite(){
        return opposite
    }
} 
```

这就是我调用它的方法：

```
public void addConnection(Direction d, Spot spot){
    connections[d] = spot
    spot.connections[d.opposite()] = this
} 
```

哪里`connections`是`public Map<Direction, Spot>`。

在这种情况下，将添加一个条目`connections`，如下所示：

```
null:Spot@some_hexadecimal_representation 
```

任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T23:57:11.103

Groovy 似乎规避了 Java 中[的编译错误](http://ideone.com/lrIZI)：

```
Main.java:2: illegal forward reference
    North(South), South(North), East(West), West(East), Up(Down), Down(Up);
          ^
Main.java:2: illegal forward reference
    North(South), South(North), East(West), West(East), Up(Down), Down(Up);
                                     ^
Main.java:2: illegal forward reference
    North(South), South(North), East(West), West(East), Up(Down), Down(Up);
                                                           ^
3 errors 
```

groovy 编译器不会对此抱怨，而是将需要前向声明的枚举值初始化为`null`：

```
public enum Direction {
    North(South), South(North), East(West), West(East), Up(Down), Down(Up)
    Direction(Direction d){
        println "opposite of $this is $d"
    }
}

Direction.South // Force enum instantiation in GroovyConsole. 
```

[输出](http://ideone.com/XAg0x)：

```
opposite of North is null
opposite of South is North
opposite of East is null
opposite of West is East
opposite of Up is null
opposite of Down is Up 
```

在 Java 中似乎工作得很好的一种解决方案是在[类上](http://ideone.com/gpTXp)[添加一个`static`块`Direction`](http://ideone.com/gpTXp)来初始化`opposite`值。翻译成 Groovy，那将是：

```
enum Direction {
    North, South, East, West, Up, Down
    private Direction opposite
    Direction getOpposite() { opposite }

    static {
        def opposites = { d1, d2 -> d1.opposite = d2; d2.opposite = d1 }
        opposites(North, South)
        opposites(East, West)
        opposites(Up, Down)
    }
}

Direction.values().each { 
    println "opposite of $it is $it.opposite"
} 
```

现在[打印正确的值](http://ideone.com/9HgCb)：

```
opposite of North is South
opposite of South is North
opposite of East is West
opposite of West is East
opposite of Up is Down
opposite of Down is Up 
```

## 更新

[另一种](http://ideone.com/OPv1v)可能更直接的解决方案可以使用枚举上的方向索引来找到相反的：

```
public enum Direction {
    North(1), South(0), East(3), West(2), Up(5), Down(4)
    private oppositeIndex
    Direction getOpposite() { 
        values()[oppositeIndex]
    }
    Direction(oppositeIndex) { 
        this.oppositeIndex = oppositeIndex
    }
} 
```

但我发现第一个更清晰，因为它不需要索引的那些神奇数字呵呵。

## 更新 2

现在，我可能对这里的高尔夫球场有所了解，但是您可以[在不需要额外字段的情况下](http://ideone.com/8J8lv)获得相反的方向，只需使用枚举值`ordinal()`（它们的索引）：

```
enum Direction {
    North, South, East, West, Up, Down
    Direction getOpposite() { 
        values()[ordinal() + ordinal() % 2 * -2 + 1]
    }
} 
```

它并不像看起来那么可怕！偶数方向（北、东、上）以相反的方向返回 at 的方向`ordinal() + 1`，而奇数方向（其他方向）返回 at 的方向`ordinal() - 1`。当然它在很大程度上依赖于枚举中元素的顺序，但是，你不喜欢简洁吗？=D

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T17:05:24.440

您可以通过在闭包中传递它并在需要相反时调用闭包来推迟对相反的评估：

```
public enum Direction {
    North({South}), South({North}), East({West}), West({East}), Up({Down}), Down({Up})
    private def opp
    Direction(opp) {
        this.opp = opp
    }
    public opposite() {
        return opp()
    }
}
public static void main(String[] args) {
    Direction.each { d ->
        println "${d} ... ${d.opposite()}"
    }
} 
```

输出：

```
北...南
南北
东西
西...东
上...下
向下...向上

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T23:30:22.483

`Directions`调用枚举构造函数时，似乎有一半没有初始化。也就是说，当您调用时`North(South)`， South 尚未初始化。它是下一个。

您陷入了一个鸡/蛋悖论，其中*所有*枚举常量必须先初始化，然后才能初始化*其中一个*。看来您需要重新组织一些代码来解决这个问题。我可能会建议：

```
public enum Direction {
    North(1), South(~1), East(2), West(~2), Up(4), Down(~4);

    private int value;

    Direction(int d){
        value = d;
    }

    private int getValue() {
        return value;
    }

    public Direction opposite(){
        for (Direction d : Direction.values()) {
            if (value == ~(d.getValue())) 
                return d;
        }
        return null;
    }
} 
```

这利用按位运算符`~`来区分对立面。*

# c++ - 重载运算符以与 C++ 中的另一个类一起使用

> ID：11302281
> 
> 赞同：0
> 
> 时间：2012-07-02T22:57:48.157
> 
> 标签：c++, oop, operator-overloading

有没有办法重载`>`（大于）运算符，以便能够执行以下操作：

```
myClass *a = new myClass(1);
myClass *b = new myClass(3);

if(a > b) //it should compare the int values from the constructors
  //do something 
```

我尝试过重载运算符，但遇到了各种错误。我正在使用 VC++。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T23:03:46.850

您不能为指针重载运算符，因为它们是原始类型（并且您不能创建两个参数都是原始类型的重载）；相反，您可以为用户定义类型的对象重载运算符（而不是指向它们的指针）：

```
class myClass
{
    // ...
public:
    bool operator>(const myClass & right) const
    {
        return this->whatever()>right.whatever();
    }
};

myClass *a = new myClass(1);
myClass *b = new myClass(3);

if(*a > *b) //it should compare the int values from the constructors
  //do something 
```

请注意，如果您没有特别的理由在堆上分配东西，最好只在堆栈上分配它：

```
myClass a(1);
myClass b(3);
if(a > b)
    // do something 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T23:04:18.027

尝试

```
class MyClass
{
    int value;
    public:
        bool operator>(MyClass const& rhs) const
        {
             return value > rhs.value;
        }

        MyClass(int v):value(v){}

};

int main()
{
     MyClass a(1);
     MyClass b(3);

     if (a > b) { PLOP } else { POOP }
} 
```

# php - 尝试将日期插入 MySQL 时出现 Flex 服务调用问题

> ID：11302285
> 
> 赞同：0
> 
> 时间：2012-07-02T22:57:58.240
> 
> 标签：php, mysql, apache-flex, datetime, flash-builder

我正在尝试为录音室构建一个 CRUD 应用程序，使我们的客户能够在线预订会议。我已经设置了数据库，并且正在使用 flash builder 4.6 创建一个服务调用，该调用创建一个工作室会话并将信息发布到数据库。我可以很好地将数据从 MySQL 拉到数据网格中，但是当我使用创建会话服务时，我得到一个我似乎无法弄清楚的错误.....>>> 在我的 php 的第 123 行中访问未定义的属性 Session_Date脚本。它还说我正在尝试将非对象传递给我的 Session_Date->toString('YYYY-MM-DD hh:mm:ss')。为什么会发生这种情况，有人可以帮忙！！！！！我已经搜索了论坛，但我找不到直接的答案。

这是我的 PHP 类：

```
class SessionsService {

var $username = "root";
var $password = "bossman1";
var $server = "localhost";
var $port = "3306";
var $databasename = "mydb";
var $tablename = "sessions";

var $connection;

/**
 * The constructor initializes the connection to database. Everytime a request is 
 * received by Zend AMF, an instance of the service class is created and then the
 * requested method is invoked.
 */
public function __construct() {
    $this->connection = mysqli_connect(
                            $this->server,  
                            $this->username,  
                            $this->password, 
                            $this->databasename,
                            $this->port
                        );

    $this->throwExceptionOnError($this->connection);
}

/**
 * Returns all the rows from the table.
 *
 * Add authroization or any logical checks for secure access to your data 
 *
 * @return array
 */
public function getAllSessions() {

    $stmt = mysqli_prepare($this->connection, "SELECT * FROM $this->tablename");        
    $this->throwExceptionOnError();

    mysqli_stmt_execute($stmt);
    $this->throwExceptionOnError();

    $rows = array();

    mysqli_stmt_bind_result($stmt, $row->Sessions_ID, $row->Session_Date, $row->Session_Time, $row->Requested_Engineer, $row->Time_In, $row->Time_Out);

    while (mysqli_stmt_fetch($stmt)) {
      $row->Session_Date = new DateTime($row->Session_Date);
      $rows[] = $row;
      $row = new stdClass();
      mysqli_stmt_bind_result($stmt, $row->Sessions_ID, $row->Session_Date, $row->Session_Time, $row->Requested_Engineer, $row->Time_In, $row->Time_Out);
    }

    mysqli_stmt_free_result($stmt);
    mysqli_close($this->connection);

    return $rows;
}

/**
 * Returns the item corresponding to the value specified for the primary key.
 *
 * Add authorization or any logical checks for secure access to your data 
 *
 * 
 * @return stdClass
 */
public function getSessionsByID($itemID) {

    $stmt = mysqli_prepare($this->connection, "SELECT * FROM $this->tablename where Sessions_ID=?");
    $this->throwExceptionOnError();

    mysqli_stmt_bind_param($stmt, 'i', $itemID);        
    $this->throwExceptionOnError();

    mysqli_stmt_execute($stmt);
    $this->throwExceptionOnError();

    mysqli_stmt_bind_result($stmt, $row->Sessions_ID, $row->Session_Date, $row->Session_Time, $row->Requested_Engineer, $row->Time_In, $row->Time_Out);

    if(mysqli_stmt_fetch($stmt)) {
      $row->Session_Date = new DateTime($row->Session_Date);
      return $row;
    } else {
      return null;
    }
}

/**
 * Returns the item corresponding to the value specified for the primary key.
 *
 * Add authorization or any logical checks for secure access to your data 
 *
 * 
 * @return stdClass
 */
public function createSessions($item) {

    $stmt = mysqli_prepare($this->connection, "INSERT INTO $this->tablename (Session_Date, Session_Time, Requested_Engineer, Time_In, Time_Out) VALUES (?, ?, ?, ?, ?)");
    $this->throwExceptionOnError();

    mysqli_stmt_bind_param($stmt, 'sssss', $item->Session_Date->toString('YYYY-MM-dd HH:mm:ss'), $item->Session_Time, $item->Requested_Engineer, $item->Time_In, $item->Time_Out);
    $this->throwExceptionOnError();

    mysqli_stmt_execute($stmt);     
    $this->throwExceptionOnError();

    $autoid = mysqli_stmt_insert_id($stmt);

    mysqli_stmt_free_result($stmt);     
    mysqli_close($this->connection);

    return $autoid;
}

/**
 * Updates the passed item in the table.
 *
 * Add authorization or any logical checks for secure access to your data 
 *
 * @param stdClass $item
 * @return void
 */
public function updateSessions($item) {

    $stmt = mysqli_prepare($this->connection, "UPDATE $this->tablename SET Session_Date=?, Session_Time=?, Requested_Engineer=?, Time_In=?, Time_Out=? WHERE Sessions_ID=?");       
    $this->throwExceptionOnError();

    if ($item->Session_Date == null)
        $Session_Date = null;
    else
        $Session_Date = $item->Session_Date->toString('yyyy-MM-dd HH:mm:ss');

    mysqli_stmt_bind_param($stmt, 'sssssi', $item->Session_Date->toString('YYYY-MM-dd HH:mm:ss'), $item->Session_Time, $item->Requested_Engineer, $item->Time_In, $item->Time_Out, $item->Sessions_ID);     
    $this->throwExceptionOnError();

    mysqli_stmt_execute($stmt);     
    $this->throwExceptionOnError();

    mysqli_stmt_free_result($stmt);     
    mysqli_close($this->connection);
}

/**
 * Deletes the item corresponding to the passed primary key value from 
 * the table.
 *
 * Add authorization or any logical checks for secure access to your data 
 *
 * 
 * @return void
 */
public function deleteSessions($itemID) {

    $stmt = mysqli_prepare($this->connection, "DELETE FROM $this->tablename WHERE Sessions_ID = ?");
    $this->throwExceptionOnError();

    mysqli_stmt_bind_param($stmt, 'i', $itemID);
    mysqli_stmt_execute($stmt);
    $this->throwExceptionOnError();

    mysqli_stmt_free_result($stmt);     
    mysqli_close($this->connection);
}

/**
 * Returns the number of rows in the table.
 *
 * Add authorization or any logical checks for secure access to your data 
 *
 * 
 */
public function count() {
    $stmt = mysqli_prepare($this->connection, "SELECT COUNT(*) AS COUNT FROM $this->tablename");
    $this->throwExceptionOnError();

    mysqli_stmt_execute($stmt);
    $this->throwExceptionOnError();

    mysqli_stmt_bind_result($stmt, $rec_count);
    $this->throwExceptionOnError();

    mysqli_stmt_fetch($stmt);
    $this->throwExceptionOnError();

    mysqli_stmt_free_result($stmt);
    mysqli_close($this->connection);

    return $rec_count;
}

/**
 * Returns $numItems rows starting from the $startIndex row from the 
 * table.
 *
 * Add authorization or any logical checks for secure access to your data 
 *
 * 
 * 
 * @return array
 */
public function getSessions_paged($startIndex, $numItems) {

    $stmt = mysqli_prepare($this->connection, "SELECT * FROM $this->tablename LIMIT ?, ?");
    $this->throwExceptionOnError();

    mysqli_stmt_bind_param($stmt, 'ii', $startIndex, $numItems);
    mysqli_stmt_execute($stmt);
    $this->throwExceptionOnError();

    $rows = array();

    mysqli_stmt_bind_result($stmt, $row->Sessions_ID, $row->Session_Date, $row->Session_Time, $row->Requested_Engineer, $row->Time_In, $row->Time_Out);

    while (mysqli_stmt_fetch($stmt)) {
      $row->Session_Date = new DateTime($row->Session_Date);
      $rows[] = $row;
      $row = new stdClass();
      mysqli_stmt_bind_result($stmt, $row->Sessions_ID, $row->Session_Date, $row->Session_Time, $row->Requested_Engineer, $row->Time_In, $row->Time_Out);
    }

    mysqli_stmt_free_result($stmt);     
    mysqli_close($this->connection);

    return $rows;
}

/**
 * Utility function to throw an exception if an error occurs 
 * while running a mysql command.
 */
private function throwExceptionOnError($link = null) {
    if($link == null) {
        $link = $this->connection;
    }
    if(mysqli_error($link)) {
        $msg = mysqli_errno($link) . ": " . mysqli_error($link);
        throw new Exception('MySQL Error - '. $msg);
    }       
}
}

?> 
```

这是错误消息：

```
Reason: ( ! ) SCREAM: Error suppression ignored for ( ! ) Notice: Trying to get property of non-object in C:\wamp\www\Server_Test_Project\services\SessionsService1.php on line 123 Call Stack
Time Memory Function Location

1 0.0008 699024 {main}( ) ..\gateway.php:0 2 0.0465 2709608 Zend_Amf_Server->handle( ) ..\gateway.php:69 3 0.0539 3053728 Zend_Amf_Server->_handle( ) ..\Server.php:629 4 0.0592 3247600 Zend_Amf_Server->_dispatch( ) ..\Server.php:553 5 0.0636 3411240 Zend_Server_Reflection_Method->invokeArgs( ) ..\Server.php:359 6 0.0636 3411656 Zend_Server_Reflection_Function_Abstract->__call( ) ..\Server.php:359 7 0.0636 3412072 call_user_func_array( ) ..\Abstract.php:380 8 0.0636 3412552 SessionsService1->createSessions( ) ..\Abstract.php:0

( ! ) SCREAM: Error suppression ignored for ( ! ) Fatal error: Call to a member function toString() on a non-object in C:\wamp\www\Server_Test_Project\services\SessionsService1.php on line 123 Call Stack
Time Memory Function Location

1 0.0008 699024 {main}( ) ..\gateway.php:0 2 0.0465 2709608 Zend_Amf_Server->handle( ) ..\gateway.php:69 3 0.0539 3053728 Zend_Amf_Server->_handle( ) ..\Server.php:629 4 0.0592 3247600 Zend_Amf_Server->_dispatch( ) ..\Server.php:553 5 0.0636 3411240 Zend_Server_Reflection_Method->invokeArgs( ) ..\Server.php:359 6 0.0636 3411656 Zend_Server_Reflection_Function_Abstract->__call( ) ..\Server.php:359 7 0.0636 3412072 call_user_func_array( ) ..\Abstract.php:380 8 0.0636 3412552 SessionsService1->createSessions( ) ..\Abstract.php:0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-22T00:59:12.130

为了解决这个问题，打开你的 PHP ini 并改变

```
error_reporting = E_ALL 
```

它可能会在该语句中包含 E_STRICT。Zend 并不严格兼容:)

祝你好运...

刚刚发现在 php 5.4 中，默认情况下启用了 e_strict，因此 error_reporting 应该是这样的：error_reporting = E_ALL & ~E_STRICT

# ruby-on-rails - ROR 2.x 动态部分

> ID：11302287
> 
> 赞同：0
> 
> 时间：2012-07-02T22:58:02.950
> 
> 标签：ruby-on-rails

我是 Ruby on Rails 的新手。

在一个动作中，我需要动态生成带有编码内容的部分，并通过 data-uri 将其显示为弹出窗口：

**控制器**

```
def dashboard
    @surprise = get_deal(srand % current_user.dob_year)
end

def get_deal(magic_number)
    if magic_number < 500
      return "<h5>You have won a voucher #{VoucherFactory.unused_in_the_queue}</h5>"
    end
end 
```

现在，鉴于我需要类似`:partial=>@surprise`不保存文件的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T23:23:58.110

您可以简单地在视图中呈现@surprise：

```
<div id="surprise-area" ..>
    <%= @surprise %>
</div> 
```

# vb.net - 无法转换类型为“FAXCOMEXLib.FaxServerClass”的 COM 对象

> ID：11302289
> 
> 赞同：1
> 
> 时间：2012-07-02T22:58:11.603
> 
> 标签：vb.net

大家好，
我已经使用 Dotnet 4.0 编程语言作为 VB.Net4.0 创建了一个 Dotnet 应用程序。我有一个 Windows 服务，它使用 FaxComexLib Com 组件发送传真文档，我有它的 Inetrop.FaxComexLib.dll，它在 Windows 7 和 Window 2008 Server 中运行良好，我可以毫无问题地发送传真。我有一个带有 ServicePack3 的 Windows XP 主页的旧版客户端，我在那里安装了我的 WindowsService 并且服务工作正常，除了与 FaxComexLib Com 组件通信。我尝试了几种可能的解决方案，我将注册表项（{571CED0F-5609-4F40-9176-547E3A72CA7C}）从 Windows 7 复制到 Windows XP，仍然没有运气

这是我的例外：System.InvalidCastException：无法将“FAXCOMEXLib.FaxServerClass”类型的 COM 对象转换为接口类型“FAXCOMEXLib.IFaxServer2”。此操作失败，因为 IID 为“{571CED0F-5609-4F40-9176-547E3A72CA7C}”的接口的 COM 组件上的 QueryInterface 调用因以下错误而失败：不支持此类接口（HRESULT 异常：0x80004002 (E_NOINTERFACE)） . 在 System.StubHelpers.StubHelpers.GetCOMIPFromRCW（对象 objSrc，IntPtr pCPCMD，布尔值和 pfNeedsRelease）在 FAXCOMEXLib.FaxServerClass.Connect（字符串 bstrServerName）

对此的任何解决方案都会受到极大的欢迎。

提前
谢谢苏雷什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T04:37:32.890

很久没用FaxComExLib了，不过如果没记错的话，需要安装Fax打印机什么的XP的，默认是不安装的。

# java - 为什么这个 Scala 代码在运行时会抛出 IllegalAccessError？

> ID：11302291
> 
> 赞同：7
> 
> 时间：2012-07-02T22:58:24.847
> 
> 标签：java, scala, reflection, jvm, runtime

我有一个简单的应用程序：

```
object Test extends App {
  implicit def t2mapper[X, X0 <: X, X1 <: X](t: (X0, X1)) = new {
    def map[R](f: X => R) = (f(t._1), f(t._2))
  }
  println("Hello!")
  val (foo, bar) = (1, 2) map (_ * 2)
  println((foo, bar))
} 
```

（`t2mapper`来自[这个答案](https://stackoverflow.com/a/4022510/319931)。）

代码编译得很好：

```
$ scalac -version
Scala compiler version 2.9.1 -- Copyright 2002-2011, LAMP/EPFL
$ scalac -unchecked Test.scala
$ 
```

但是在运行时，它会抛出一个`IllegalAccessError`（在打印*之前）：* `Hello!`

```
$ java -版本
java版本“1.6.0_24”
OpenJDK 运行时环境 (IcedTea6 1.11.1) (6b24-1.11.1-4ubuntu3)
OpenJDK Server VM（build 20.0-b12，混合模式）
$ 斯卡拉测试
java.lang.IllegalAccessError：试图从类 Test$delayedInit$body 访问字段 Test$.reflParams$Cache1
        在 Test$delayedInit$body.(Test.scala:6)
        在 Test$.(Test.scala:1)
        在 Test$.(Test.scala)
        在 Test.main(Test.scala)
        在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        在 java.lang.reflect.Method.invoke(Method.java:616)
        在 scala.tools.nsc.util.ScalaClassLoader$$anonfun$run$1.apply(ScalaClassLoader.scala:78)
        在 scala.tools.nsc.util.ScalaClassLoader$class.asContext(ScalaClassLoader.scala:24)
        在 scala.tools.nsc.util.ScalaClassLoader$URLClassLoader.asContext(ScalaClassLoader.scala:88)
        在 scala.tools.nsc.util.ScalaClassLoader$class.run(ScalaClassLoader.scala:78)
        在 scala.tools.nsc.util.ScalaClassLoader$URLClassLoader.run(ScalaClassLoader.scala:101)
        在 scala.tools.nsc.ObjectRunner$.run(ObjectRunner.scala:33)
        在 scala.tools.nsc.ObjectRunner$.runAndCatch(ObjectRunner.scala:40)
        在 scala.tools.nsc.MainGenericRunner.runTarget$1(MainGenericRunner.scala:56)
        在 scala.tools.nsc.MainGenericRunner.process(MainGenericRunner.scala:80)
        在 scala.tools.nsc.MainGenericRunner$.main(MainGenericRunner.scala:89)
        在 scala.tools.nsc.MainGenericRunner.main(MainGenericRunner.scala)

```

请注意，最后两行替换为

```
 println((1, 2) map (_ * 2)) 
```

或者

```
 val (foo, bar) = (2, 4)
  println((foo, bar)) 
```

或者

```
 val intermediate = (1, 2) map (_ * 2)
  val (foo, bar) = intermediate
  println((foo, bar)) 
```

`(2,4)`它按预期打印。但是当包裹在一个块中时

```
 {
    val intermediate = (1, 2) map (_ * 2)
    val (foo, bar) = intermediate
    println((foo, bar))
  } 
```

或者

```
 private val blah = {
    val intermediate = (1, 2) map (_ * 2)
    val (foo, bar) = intermediate
    println((foo, bar))
  } 
```

它抛出异常。

**为什么第一种和最后一种方法会导致 JVM 在运行时抛出错误？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T23:32:42.490

看起来有一些相关的开放错误。例如，这可能是相关的：

[https://issues.scala-lang.org/browse/SI-5251?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel](https://issues.scala-lang.org/browse/SI-5251?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel)

请注意，您也可以创建一个`main`方法而不是扩展`App`，它会起作用。

编辑：

当您使用此行时（我扩展了隐式）：

```
val (foo, bar) = t2mapper((1, 2)) map (_ * 2) 
```

然后将鼠标悬停`foo`或`bar`在 Eclipse 中显示`private[this] val foo`.

因此，它似乎与 SI-5251 非常相似。

# mysql - 带有 WHERE 子句的 SQL COUNT

> ID：11302295
> 
> 赞同：6
> 
> 时间：2012-07-02T22:58:59.960
> 
> 标签：mysql, sql, select, left-join

我有一个关于 SQL 的看似简单的问题，但我无法弄清楚。假设我有以下表格：

```
company: 
    company_id
    company_title

users: 
    user_id
    username

company_owners: 
    company_id
    user_id 
```

现在，可以有多个用户作为公司所有者。以下是一些示例数据：

```
company:
1, "A Company"
2, "B Company"
3, "C Company"

users:
1, "A User"
2, "B User"
3, "C User"

company_owners:
1,1
1,2
1,3
2,3 
```

我正在尝试创建一个查询（MySQL），该查询根据特定的公司所有者获取 company_title 以及该公司的所有者数量。因此，例如：

示例查询（英文）运行：获取“C 用户”是其所有者的每个公司的所有者数量：

```
company_id=1, company_title="A Company", num_owners=3
company_id=2, company_title="B Company", num_owners=1
company_id=3, company_title="C Company", num_owners=0 
```

我努力了：

```
SELECT COUNT(user_id), company.* FROM `company` 
LEFT JOIN `company_owners` ON company_owners.company_id = company.company_id 
WHERE company_owners.user_id=1 GROUP BY company_id 
```

但这总是给我一个所有权编号“1”，我假设因为它只计算 user_id=1 的行。

有没有人有任何想法？如果需要，我可以提供更多细节。

非常感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T23:02:45.570

您的 WHERE 子句应该是“该公司存在用户 ID = 1 的所有者”。

```
SELECT COUNT(user_id), company.*
FROM `company` 
LEFT JOIN `company_owners`
ON company_owners.company_id = company.company_id 
WHERE EXISTS
(
    SELECT *
    FROM company_owners AS co2
    WHERE company_owners.company_id = co2.company_id
    AND co2.user_id = 3
)
GROUP BY company_id 
```

在线查看它：[sqlfiddle](http://sqlfiddle.com/#!2/9f110/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T23:02:55.397

```
select company.company_id, company_title, count(*)
from company join company_owners on company.company_id = company_owners.company_id
where exists (select 1 from company_owners co where co.user_id = 1 and co.company_id = company.company_id)
group by company.company_id, company_title 
```

# java - 通过命令行自动将 Java (Android) 项目导入 Eclipse 工作区

> ID：11302297
> 
> 赞同：17
> 
> 时间：2012-07-02T22:59:20.060
> 
> 标签：java, android, eclipse, bash, scripting

我正在尝试通过命令行（使用 bash 脚本）自动将项目导入 Eclipse 工作区。我看到很多帖子建议使用 CDT 无头构建，即使是非 C/C++ 项目，但我想避免下载 CDT，因为我的项目都是 Java/Android 项目，我希望能够为很多人自动化无需让他们全部下载 CDT。我用 JDT 无头构建尝试了以下操作，但无济于事：

```
eclipse -nosplash \
    -application org.eclipse.jdt.apt.core.aptBuild \
    -data [absolute_path_to_desired_workspace] \
    -import [absolute_path_to_project_directories] 
```

输出显示“构建工作区”，然后显示“注销”，但在工作区中打开 Eclipse 会话在包资源管理器中没有显示任何内容。

查看工作区中的 ./metadata/.log 文件似乎没有显示任何导入错误。

如果不使用 CDT 无头构建，是否无法将现有 Java Eclipse 项目自动导入 Eclipse？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-11T15:18:27.193

不幸的是，JDT 发行版没有任何支持**-import**参数的应用程序，例如 CDT 的`org.eclipse.cdt.managedbuilder.core.headlessbuild`. 但是你可以很容易地写一个简单的：

```
package test.myapp;

import java.util.LinkedList;
import java.util.List;

import org.eclipse.core.resources.IProject;
import org.eclipse.core.resources.IProjectDescription;
import org.eclipse.core.resources.IncrementalProjectBuilder;
import org.eclipse.core.resources.ResourcesPlugin;
import org.eclipse.core.runtime.NullProgressMonitor;
import org.eclipse.core.runtime.Path;
import org.eclipse.equinox.app.IApplication;
import org.eclipse.equinox.app.IApplicationContext;

public class Application implements IApplication {

    public Object start(IApplicationContext context) throws Exception {

        String[] args = (String[]) context.getArguments().get(IApplicationContext.APPLICATION_ARGS);

        boolean build = false;

        // Determine projects to import
        List<String> projects = new LinkedList<String>();
        for (int i = 0; i < args.length; ++i) {
            if ("-import".equals(args[i]) && i + 1 < args.length) {
                projects.add(args[++i]);
            } else if ("-build".equals(args[i])) {
                build = true;
            }
        }

        if (projects.size() == 0) {
            System.out.println("No projects to import!");
        } else {
            for (String projectPath : projects) {
                System.out.println("Importing project from: " + projectPath);

                // Import project description:
                IProjectDescription description = ResourcesPlugin.getWorkspace().loadProjectDescription(
                        new Path(projectPath).append(".project"));
                IProject project = ResourcesPlugin.getWorkspace().getRoot().getProject(description.getName());
                project.create(description, null);
                project.open(null);
            }

            // Build all projects after importing
            if (build) {
                System.out.println("Re-building workspace");
                ResourcesPlugin.getWorkspace().build(IncrementalProjectBuilder.CLEAN_BUILD, new NullProgressMonitor());
                ResourcesPlugin.getWorkspace().build(IncrementalProjectBuilder.FULL_BUILD, new NullProgressMonitor());
            }
        }
        return null;
    }

    public void stop() {
    }
} 
```

您的 plugin.xml 应包含以下内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension
         id="App"
         point="org.eclipse.core.runtime.applications">
      <application
            cardinality="singleton-global"
            thread="main"
            visible="true">
         <run
               class="test.myapp.Application">
         </run>
      </application>
   </extension>
</plugin> 
```

创建插件并将其导出为“test.myapp_1.0.0.jar”。然后你可以按如下方式使用它：

1.  将 test.myapp_1.0.0.jar 复制到 Eclipse/dropins/ 文件夹
2.  将所有需要的插件复制到目标工作区目录：

    cp -r 项目/* 新工作区/

3.  将所需项目导入工作区：

    eclipse -nosplash -application test.myapp.App -data NewWorkspace -import /path/to/NewWorkspace/project1 -import /path/to/NewWorkspace/project2 等...

4.  现在，您可以安全地从 Eclipse/dropins/ 文件夹中删除 test.myapp_1.0.0.jar。

我已经上传了所有代码，包括这里导出的插件：[https ://github.com/spektom/eclipse-import](https://github.com/spektom/eclipse-import)

# optimization - LEMP Nginx + php-fpm 高负载超时然后很好

> ID：11302298
> 
> 赞同：0
> 
> 时间：2012-07-02T22:59:23.740
> 
> 标签：optimization, nginx, vps, php, high-load

我对这一切都很陌生，但我对优化有强迫症。

我正在尝试优化为 wordpress 运行 LEMP 设置的 Web 服务器。

我使用的是 WP 超高速缓存而不是 w3 总缓存，因为与我的设置相比，它的性能似乎非常出色

我正在使用 blitz.io 测试并在域中抛出 450 个用户，持续 60 秒，从完整的 450 个开始。

这是我的结果：5 秒的峰值是错误和超时 [http://i.imgur.com/CdpBz.png](http://i.imgur.com/CdpBz.png)

峰值期间的 htop：http: [//i.imgur.com/OhEyS.png](http://i.imgur.com/OhEyS.png)

这是一个 2.5Ghz 和 2.5GB 内存的 vps w/ 2 cpu，你可以看到内存使用率很低。

nginx：worker_processes 1；worker_connections 1024；

php-fpm: 动态, pm.max_children = 10, pm.start_servers = 2, pm.max_spare_servers = 2, ;pm.max_requests = 500 默认值 = 0

我已经将 nginx worker_processes 增加到 2 没有任何变化，并且我已经弄乱了我的 php-fpm 设置而没有任何变化。有什么想法我应该看的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:15:51.303

这看起来还不错。19k 个请求中有约 40 个超时是正常的。我得到了类似的结果。

至于调音：

*   查看[http://wiki.nginx.org/HttpFastcgiModule#fastcgi_cache](http://wiki.nginx.org/HttpFastcgiModule#fastcgi_cache) - 使用它可以完全避免接触 php，而 nginx 会完成所有缓存。您还可以查看 batcache (http://evansolomon.me/notes/faster-wordpress-multisite-nginx-batcache/)

*   查看 apc/memcached 的对象缓存。这使得非缓存请求更快，并且后端响应更快。apc 还减少了 php 的内存占用。对于日常使用，这会产生更大的不同。如果您的许多请求不可缓存（例如大量新评论），这也会有所帮助。

*   考虑使用 php5.4 它速度更快，需要更少的内存

*   启用 mysql 查询缓存。[http://mysqltuner.com](http://mysqltuner.com)是一个很好的小脚本来配置你的服务器。

大多数时候，测量峰值传输并不是衡量可扩展性的好指标。真实用户的行为可能不同。

编辑：在静态 nginx 页面上尝试 blitz.io。如果仍然有超时，问题可能出在 blitz.io 或其他地方。还要为您的页面激活 gzip 压缩。

# java - 过渡到黑屏

> ID：11302304
> 
> 赞同：0
> 
> 时间：2012-07-02T23:00:17.843
> 
> 标签：java, android

我相信我的代码设置正确，但是当我尝试调试它时，在它从启动屏幕转换后，它会直接进入黑屏。我知道我正确导入了布局，但它仍然变黑。

这是启动画面的代码

```
package com.example.equate.jones;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.MenuItem;
import android.support.v4.app.NavUtils;

public class EJ_Splash extends Activity {

    protected boolean _active = true;
    protected int _splashTime = 3000;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_ej__splash);

        // thread for displaying the SplashScreen
        Thread splashTread = new Thread() {
            @Override
            public void run() {
                try {
                        synchronized(this){
                            wait(4000);
                        }

                    }
                 catch(InterruptedException e) {
                    // do nothing
                } {

                    finish();

                    Intent i = new Intent(getApplicationContext(),EJ_Board.class);
                    startActivity(i);
                }
            }
        };
        splashTread.start();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_ej__splash, menu);
        return true;
    }

} 
```

这是它应该转换到的屏幕的代码。

```
package com.example.equate.jones;

import android.app.Activity;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.widget.ImageView;

public class EJ_Board extends Activity {

    private ImageView button1;
    final MediaPlayer mp = MediaPlayer.create(this, R.raw.warm);

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.ej_board);

        button1=(ImageView)findViewById(R.id.imageView1);

        button1.setOnClickListener(new View.OnClickListener() 
        { 
            public void onClick(View view) 
            { 

                mp.start(); 
            }
        });
    }

} 
```

这是 EJ_Board 的 xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T23:27:11.667

我认为您的问题出在 ImageView 上。您需要将图像添加到可绘制文件夹，然后将您的图像更改`android:src="@drawable/ic_launcher"`为您保存的图像的名称。这将为您提供按钮所需的图像。希望有帮助

编辑：

对于您的启动画面，请尝试以下操作：

```
public class SplashActivity extends Activity  {
   private long splashDelay = 5000;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash);

        TimerTask task = new TimerTask()
        {

            @Override
            public void run() {
                finish();
                Intent homeIntent = new Intent().setClass(SplashActivity.this, HomeActivity.class);
                startActivity(homeIntent);

            }

        };

        Timer timer = new Timer();
        timer.schedule(task, splashDelay);

    }
} 
```

然后在您的家庭活动中，您可以设置菜单：

```
public class HomeActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

    }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.layout.menu, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // Handle item selection
        switch (item.getItemId()) {
            case R.id.locationButton:
                Intent locationIntent = new Intent(this, LocationActivity.class);
                startActivity(locationIntent);
                return true;
            case R.id.diningButton:
                Intent diningIntent = new Intent(this, DiningActivity.class);
                startActivity(diningIntent);
                return true;

            case R.id.topXXVButton:
                Intent topIntent = new Intent(this, DiningActivity.class);
                startActivity(topIntent);
                return true;

            default:
                return super.onOptionsItemSelected(item);
        }
    }
} 
```

试试这个：

```
public class SplashActivity extends Activity  {
   private long splashDelay = 5000;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash);

        TimerTask task = new TimerTask()
        {

            @Override
            public void run() {
                finish();
                Intent mainIntent = new Intent().setClass(EJ_Splash.this, EJ_Board.class);
                startActivity(mainIntent);

            }

        };

        Timer timer = new Timer();
        timer.schedule(task, splashDelay);

    }
} 
```

# hadoop - 如何从命令提示符了解 Hive 和 Hadoop 版本？

> ID：11302305
> 
> 赞同：97
> 
> 时间：2012-07-02T23:00:20.633
> 
> 标签：hadoop, hive

如何从命令提示符中找到我正在使用的 Hive 版本。下面是详细信息——

我正在使用 Putty 连接到 hive 表并访问表中的记录。所以我所做的是 - 我打开了 Putty 并在我输入的主机名中 -`leo-ingesting.vip.name.com`然后我单击`Open`。然后我输入了我的用户名和密码，然后输入了几个命令来访问 Hive sql。以下是我所做的清单

```
$ bash
bash-3.00$ hive
Hive history file=/tmp/rkost/hive_job_log_rkost_201207010451_1212680168.txt
hive> set mapred.job.queue.name=hdmi-technology;
hive> select * from table LIMIT 1; 
```

那么有什么方法可以从命令提示符中找到我正在使用的配置单元版本和 Hadoop 版本呢？

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2013-02-13T17:10:30.880

```
$ hive --version
Hive version 0.8.1.3 
```

编辑：在版本之前添加了另一个“-”。不适用于较新的版本。希望它现在适用于所有人。

已知在以下发行版中工作：

*   HortonWorks 分布：`$ hive --version Hive 0.14.0.2.2.0.0-2041`
*   CDH 5.3

这没用：

*   CDH 4.3
*   HDinsight (天蓝色)

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-07-03T00:09:27.630

```
$ hadoop version
Hadoop 0.20.2-cdh3u4 
```

不过，不确定是否可以从命令行获取 Hive 版本。不过，也许您可​​以使用`hive.hwi.war.file`属性之类的东西或将其从类路径中拉出。

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2012-07-03T00:14:47.097

您无法从命令行获取配置单元版本。

您可以检查 Dave 提到的 hadoop 版本。

此外，如果您使用的是 cloudera 发行版，请直接查看库：

ls /usr/lib/hive/lib/ 并检查 hive 库

```
hive-hwi-0.7.1-cdh3u3.jar 
```

您还可以在此处查看兼容版本：

[http://www.cloudera.com/content/cloudera/en/documentation/cdh5/v5-1-x/CDH-Version-and-Packaging-Information/CDH-Version-and-Packaging-Information.html](http://www.cloudera.com/content/cloudera/en/documentation/cdh5/v5-1-x/CDH-Version-and-Packaging-Information/CDH-Version-and-Packaging-Information.html)

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2018-08-03T05:05:08.333

您可以从命令行（蜂巢或直线）获取版本。

```
hive> select version();
OK
1.1.0-cdh5.12.0 rUnknown
Time taken: 2.815 seconds, Fetched: 1 row(s)
hive> 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2017-04-13T10:15:33.260

以下适用于 Hadoop 2.7.2

```
hive --version

hadoop version

pig --version

sqoop version

oozie version 
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2017-03-13T19:29:18.637

这当然应该有效：

```
hive --version 
```

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2012-08-03T18:07:18.027

```
hive -e "set hive.hwi.war.file;" | cut -d'-' -f3 
```

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2018-08-10T17:17:27.687

使用 CLI 中的版本标志

```
[hadoop@usernode~]$ hadoop version
Hadoop 2.7.3-amzn-1
Subversion git@aws157git.com:/pkg/Aws157BigTop -r d94115f47e58e29d8113a887a1f5c9960c61ab83
Compiled by ec2-user on 2017-01-31T19:18Z
Compiled with protoc 2.5.0
From source with checksum 1833aada17b94cfb94ad40ccd02d3df8
This command was run using /usr/lib/hadoop/hadoop-common-2.7.3-amzn-1.jar

[hadoop@usernode ~]$ hive --version
Hive 1.0.0-amzn-8
Subversion git://ip-20-69-181-31/workspace/workspace/bigtop.release-rpm-4.8.4/build/hive/rpm/BUILD/apache-hive-1.0.0-amzn-8-src -r d94115f47e58e29d8113a887a1f5c9960c61ab83
Compiled by ec2-user on Tue Jan 31 19:51:34 UTC 2017
From source with checksum 298304aab1c4240a868146213f9ce15f 
```

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2014-03-05T23:47:42.103

从 hive shell issue 'set system.sun.java.command' hive-cli.jar 版本是 hive 版本。

```
<code>
hive> set system:sun.java.command;
system:sun.java.command=org.apache.hadoop.util.RunJar /opt/cloudera/parcels/CDH-4.2.2-1.cdh4.2.2.p0.10/bin/../lib/hive/lib/hive-cli-**0.10.0**-cdh**4.2.2**.jar org.apache.hadoop.hive.cli.CliDriver
hive> 
</code> 
```

上面的示例显示了 CDH 版本 4.2.2 的 Hive 版本 0.10.0

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2016-06-07T06:33:20.357

```
hive --version

hadoop version 
```

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2016-02-25T10:07:51.647

我们可以通过

*   在 linux shell 上：“hive --version”
*   在蜂巢外壳上：“！蜂巢--版本；”

以上 cmds 适用于 hive 0.13 及更高版本。

设置系统：sun.java.command；
从hue hive 编辑器给出hive 版本它给出了包含版本的jar 名称。

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2020-07-14T09:41:36.737

识别 EC2 实例上的配置单元版本使用

```
hive --version 
```

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2014-07-15T06:18:42.290

下面的命令有效，我尝试了这个并得到了当前版本

```
/usr/bin/hive --version 
```

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2017-11-10T23:20:03.140

如果您使用`beeline`连接到 hive，`!dbinfo`则将提供所有底层数据库详细信息，并且在输出`getDatabaseProductVersion`中将具有 hive 数据库版本。

样本输出： `getDatabaseProductVersion 1.2.1000.2.4.3.0-227`

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2017-12-18T08:22:31.357

如果您使用的是 hortonworks 发行版，那么使用 CLI 您可以使用以下命令获取版本：

```
hive --version 
```

[![示例输出](../Images/15356f49a8a48473c23c4b9cd85459c1.png)](https://i.stack.imgur.com/NYvw9.jpg)

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2014-09-12T18:54:44.477

我们也可以通过查看 hive-metastore jar 文件的版本来获取版本。

例如：

```
$ ls /usr/lib/hive/lib/ | grep metastore
hive-metastore-0.13.1.jar 
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2015-08-17T09:47:10.817

您可以获得 Hive 版本

```
hive --version 
```

如果您想知道 hive 版本及其相关的包版本。

```
rpm -qa|grep hive 
```

输出将如下所示。

```
libarchive2-2.5.5-5.19
hive-0.13.0.2.1.2.2-516
perl-Archive-Zip-1.24-2.7
hive-jdbc-0.13.0.2.1.2.2-516
webhcat-tar-hive-0.13.0.2.1.2.2_516-2
hive-webhcat-0.13.0.2.1.2.2-516
hive-hcatalog-0.13.0.2.1.2.2-516 
```

后者可以更好地理解 hive 及其依赖项。然而 rpm 需要存在。

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2018-07-03T03:37:00.890

从您的 SSH 连接到边缘节点，您只需键入

```
hive --version

Hive 1.2.1000.x.x.x.x-xx 
```

这将返回您的 Hadoop 发行版的 Hive 版本。另一种方法是，如果您输入`beeline`，您可以立即找到版本。

```
beeline
Beeline version 1.2.1000.x.x.x.x-xx by Apache Hive 
```

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2015-11-25T12:47:51.857

使用以下命令获取 hive 版本

**hive --服务版本**

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2015-06-25T21:25:59.587

另一种方法是进行 REST 调用，如果您安装了 WebHCat（Hive 项目的一部分），则

```
curl -i http://172.22.123.63:50111/templeton/v1/version/hive?user.name=foo 
```

它将以 JSON 形式返回

{“模块”：“蜂巢”，“版本”：“1.2.1.2.3.0.0-2458”}

[WebHCat 文档](https://cwiki.apache.org/confluence/display/Hive/WebHCat+Reference+VersionHive)有一些细节

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2015-10-31T15:12:34.990

是的，您可以使用“hive 命令”获取配置单元的版本：

```
hive --service version 
```

您可以使用以下“hive 命令”获取可用服务名称的列表：

```
hive --service help 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2014-09-24T06:17:34.733

您可以在登录 hive 后立即查找 jar 文件

```
jar:file:/opt/mapr/hive/hive-0.12/lib/hive-common-0.12-mapr-1401-140130.jar!/hive-log4j.properties 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2015-07-16T10:10:23.843

/usr/bin/hive --version 为我工作。

```
[qa@ip-10-241-1-222 ~]$ /usr/bin/hive --version
Hive 0.13.1-cdh5.3.1
Subversion file:///data/1/jenkins/workspace/generic-package-rhel64-6-0/topdir/BUILD/hive-0.13.1-cdh5.3.1 -r Unknown
Compiled by jenkins on Tue Jan 27 16:38:55 PST 2015
From source with checksum 1bb86e4899928ce29cbcaec8cf43c9b6
[qa@ip-10-241-1-222 ~]$ 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2018-09-30T14:41:59.427

我能够通过以下命令获得已安装的 Hadoop 3.0.3 的版本
$HADOOP_HOME/bin$ ./hadoop version
这给了我以下输出

Hadoop 3.0.3
源码仓库[https://yjzhangal@git-wip-us.apache.org/repos/asf/hadoop.git](https://yjzhangal@git-wip-us.apache.org/repos/asf/hadoop.git) -r 37fd7d752db73d984dc31e0cdfd590d252f5e075
yzhang 于 2018-05-31T17:12Z
编译 protoc 2.5.0 编译
来自带有校验和 736cdcefa911261ad56d2d120bf1fa 的源
此命令是使用 /usr/local/hadoop/share/hadoop/common/hadoop-common-3.0.3.jar 运行的

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2015-09-07T10:23:17.063

在 HDInsight 上，我尝试了 hive --version，但它没有识别该选项或在帮助中提及它。

```
D:\Users\admin1>%hive_home%/bin/hive --version
Unrecognized option: --version
usage: hive
 -d,--define <key=value>          Variable subsitution to apply to hive
                                  commands. e.g. -d A=B or --define A=B
    --database <databasename>     Specify the database to use
 -e <quoted-query-string>         SQL from command line
 -f <filename>                    SQL from files
 -H,--help                        Print help information
 -h <hostname>                    connecting to Hive Server on remote host
    --hiveconf <property=value>   Use value for given property
    --hivevar <key=value>         Variable subsitution to apply to hive
                                  commands. e.g. --hivevar A=B
 -i <filename>                    Initialization SQL file
 -p <port>                        connecting to Hive Server on port number
 -S,--silent                      Silent mode in interactive shell
 -v,--verbose                     Verbose mode (echo executed SQL to the
                                  console) 
```

但是，当您登录到头节点并启动配置单元控制台时，它会打印出一些有用的配置信息，可以从中读取版本：

```
D:\Users\admin1>%hive_home%/bin/hive 
Logging initialized using configuration in file:/C:/apps/dist/hive-0.13.0.2.1.11.0-2316/conf/hive-log4j.properties
SLF4J: Class path contains multiple SLF4J bindings.
SLF4J: Found binding in [jar:file:/C:/apps/dist/hadoop-2.4.0.2.1.11.0-2316/share/hadoop/common/lib/slf4j-log4j12-1.7.5.j
ar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/C:/apps/dist/hbase-0.98.0.2.1.11.0-2316-hadoop2/lib/slf4j-log4j12-1.6.4.jar!/org/slf4
j/impl/StaticLoggerBinder.class]
SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.
SLF4J: Actual binding is of type [org.slf4j.impl.Log4jLoggerFactory]
hive> quit; 
```

由此我会说我部署了 Hive 版本 0.13，这与此版本列表一致[https://hive.apache.org/downloads.html](https://hive.apache.org/downloads.html)

# xcode - 在 Xcode 中找不到Calculate.h 文件

> ID：11302308
> 
> 赞同：0
> 
> 时间：2012-07-02T23:00:29.220
> 
> 标签：xcode

我只是在学习如何使用 Xcode，并且正在使用一本名为“Beginning Max OS X Programming”的书。我正在做第一个练习。它告诉我将一个名为“Calculate.h”的 C 文件保存在与 main.c 和 Calculate.c 相同的文件中。马上，调试器给我一个错误说“Calculate.h file not found”。

这是 main.c 的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <Calculate.h>

int main (int argc, const char * argv[])
{
int a, b, count, answer;
char op;

// pringt the prompt
printf("Enter an expression: ");

// get the expression
count = scanf("%d %c %d", &a, &op, &b);
if (count !=3) 
{
    printf("bad expression\n");
    return 1;
}

// perform computation
answer = calculate(a, b, op);

// prin the answer
printf("%d %c %d = %d\n", a, op, b, answer);

return 0;
} 
```

这是Calculate.h的代码：

```
int calculate(int a, int b, char operator); 
```

这是Calculate.c的代码：

```
#include <stdio.h>
#include <stdlib.h>

int calculate(int a, int b, char operator)
{
int result;

switch (operator)
{
        case '+':
            result = a + b;
            break;
        case '-':
            result = a - b;
            break;
        default:
            printf("unknown operator: %c\n", operator);
            exit(1);
}

return result;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T00:12:05.810

尝试使用`import "Calculate.h"`（注意“”而不是 <>）

# android - 设置进度条高度

> ID：11302309
> 
> 赞同：3
> 
> 时间：2012-07-02T23:00:41.263
> 
> 标签：android, layout, view, height, progress-bar

这个问题似乎很愚蠢，但我无法简单地定义 a 的高度`ProgressBar`。既不在代码中，也不在 xml 文件中。该`layout_height`属性似乎充当边距，并且原始大小比我想要的要小得多。我几乎没有找到关于这个主题的任何东西，所以我很困惑。[这里](https://stackoverflow.com/questions/2739186/android-how-do-i-change-the-height-of-a-progressbar)的 SO 答案对我不起作用。我的目标是 API 15。有人有解决方案或解释吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T21:09:50.390

这是一个愚蠢的错误。我粘贴了这样的示例代码：

```
<ProgressBar 
    android:id="@+id/status_progress" 
    style="?android:attr/progressBarStyleHorizontal"             
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"/> 
```

但是该`style`属性会覆盖所有其他属性...

要获得“基本”水平`ProgressBar`，您必须设置一些属性：

```
<ProgressBar
    android:id="@+id/pb"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:progressDrawable="@android:drawable/progress_horizontal"
    android:indeterminate="false" 
    android:indeterminateOnly="false"/> 
```

当然，也可以使用其他一些预定义的样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T23:05:17.230

对于我使用的 SeekBar

```
android:maxHeight="10dp" 
```

# c# - 如何将 C++ SetWindowsHookEx 移植到 C# 或者这是不可能的？

> ID：11302312
> 
> 赞同：2
> 
> 时间：2012-07-02T23:00:51.403
> 
> 标签：c#, winapi, setwindowshookex

我正在查看[Microsoft KB318804](http://support.microsoft.com/kb/318804)中的示例，但他们使用“当前”应用程序的 threadId ！！！我有一些可用的 C++ 代码，但我们必须重写它，而且我更愿意在 C# 中重写它。它所做的一件事是像这样获取目标应用程序的 threadId：

```
uint lastId = GetWindowThreadProcessId(targetHandle, IntPtr.Zero); 
```

**不，GetCurrentThread 不是正确的调用，因为我正在获取远程应用程序的线程 ID，这是我们今天所做的以及我们想要做的。targetHandle 是该远程应用程序的句柄。**

我将此 lastId 转换为 int 并尝试连接 C# 代码，但 SetWindowsHookEx 返回 0 并失败。只有 AppDomain.GetCurrentThreadId() 似乎有效（即使它已被弃用，替换虽然也不起作用）。

那我必须使用C++代码吗？或者有没有办法让它在 C# 中工作？

目前，我们在 C++ 中向其他应用程序注册了 hookhandler 并获取事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T23:04:33.083

你检查过[pinvoke.net 条目`SetWindowsHookEx`](http://www.pinvoke.net/default.aspx/user32.setwindowshookex)吗？

如果[`SetWindowsHookEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990.aspx)返回`NULL`，你应该调用`GetLastError`，所以在 C# 中你应该调用[`Marshal.GetLastWin32Error`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.getlastwin32error.aspx)（假设它[`DllImportAttribute.SetLastError`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.dllimportattribute.setlasterror.aspx)包含在 P/Invoke 签名中。）

来自 pinvoke.net：

**签名**

```
[DllImport("user32.dll", SetLastError = true)]
static extern IntPtr SetWindowsHookEx(HookType hookType, HookProc lpfn, IntPtr hMod, uint dwThreadId); 
```

**打电话**

```
IntPtr hHook;

using (Process process = Process.GetCurrentProcess())
using (ProcessModule module = process.MainModule)
{
    IntPtr hModule = GetModuleHandle(module.ModuleName);

    hHook = SetWindowsHookEx(HookType.WH_KEYBOARD_LL, hook, hModule, 0);
} 
```

**可能相关的问题：**

*   [调用外部 SetWindowsHookEx 和 GetModuleHandle 的 PInvoke 错误](https://stackoverflow.com/questions/7774509/pinvoke-errors-calling-external-setwindowshookex-and-getmodulehandle)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T23:09:03.500

使用这个 kernel32 调用来获取当前线程 id：

```
 [DllImport("Kernel32.dll", CharSet = CharSet.Auto)]
    public static extern int GetCurrentThreadId(); 
```

# c - 在 C 中与 x11 链接问题

> ID：11302318
> 
> 赞同：0
> 
> 时间：2012-07-02T23:01:35.227
> 
> 标签：c, linker, xcode4.3, x11

我正在尝试使用 X11 构建一个 getPixelColor 函数：

```
#include <stdio.h>
#include <X11/Xlib.h>
#include <X11/Xutil.h>

void getPixelColor (Display *d, int x, int y, XColor *color)
{
    XImage *image;
    image = XGetImage (d, RootWindow (d, DefaultScreen (d)), x, y, 1, 1, AllPlanes,          
    XYPixmap);
    color->pixel = XGetPixel (image, 0, 0);
    XFree (image);
    XQueryColor (d, DefaultColormap(d, DefaultScreen (d)), color);
}

int main(int argc, const char * argv[])
{
   return 0;
} 
```

但是我收到以下错误，似乎是在链接期间：

```
Undefined symbols for architecture x86_64:
  "_XGetImage", referenced from:
  _getPixelColor in main.o
  "_XFree", referenced from:
  _getPixelColor in main.o
  "_XQueryColor", referenced from:
  _getPixelColor in main.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

知道问题可能是什么吗？我的印象是 X11 不是我在项目中作为库链接的框架 - 只要我提供正确的标题，那么我应该没问题......这是不正确的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T23:33:49.670

是的，您需要与 xlib 链接。这对我有用：

```
09:25 tmp $ gcc test.cpp /usr/X11/lib/libX11.dylib 
09:26 tmp $ ./a.out 
09:26 tmp $ 
```

或使用 L 开关和库路径：

```
09:26 tmp $ gcc test.cpp -L/usr/X11/lib -lX11
09:30 tmp $ otool -L a.out 
a.out:
    /usr/X11/lib/libX11.6.dylib (compatibility version 10.0.0, current version 10.0.0)
    /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 159.1.0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T23:05:26.780

> 这是不正确的吗？

是的。X11 包含让编译器满意的头文件和实际实现协议的库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T23:07:24.733

您肯定需要链接已编译的 X11 库。链接器抱怨没有为被引用的符号找到目标代码。这不是编译器错误，因此仅包含正确的标头不足以完全构建可执行文件。

# git - Git 在提交到在线存储库之前验证更改？

> ID：11302320
> 
> 赞同：0
> 
> 时间：2012-07-02T23:02:00.483
> 
> 标签：git, push, bitbucket

我刚开始使用 Git VCS，当我推送我的项目时，我在 BitBucket 上创建了存储库，然后我提交了一些更改并将它们推送到远程存储库。

然后我想测试协作是如何进行的，并在 BitBucket 上创建了另一个用户，并将他添加到我的主存储库中，并对存储库具有读/写访问权限。

然后我在 git bash 中重命名了用户名和电子邮件，并使用新的用户凭据克隆了项目。但是，当我添加提交并将其推送到在线存储库时。

当我试图只授予读取权限时，它根本不允许推送。

我认为您可以看到其他用户所做的更改，并且可以在他们添加到主存储库之前从主帐户（拥有存储库的帐户）批准或拒绝它们，**我该如何设置？**

**编辑：**我是超级管理员，我有 3 名随机开发人员为我开发我的项目。在允许将其写入我的 BitBucket 存储库之前，如何检查他们创建的代码？因此，如果我不喜欢该代码，我可以拒绝它并让他们提出更好的代码。– 约翰·史密斯 24 秒前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T23:08:30.663

所以，如果你给某人只读访问权限，那么他们当然只能拉，不能推。

在您的场景中，您的工作流程将是......

用户 B 做一些工作并在本地提交
用户 B 联系用户 A（无论是电子邮件）并通知他有更改
用户 A 从用户 B 中提取并验证正确性
用户 A 将用户 B 的更改推送到 Bitbucket。

（用户 A 必须已将用户 B 设置为远程）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T23:10:35.590

我认为您要归档的是可以选择接受其他用户对存储库所做的更改。如果是这种情况，用户必须使用`pull request` [http://blog.bitbucket.org/2011/06/17/pull-request-revamp/](http://blog.bitbucket.org/2011/06/17/pull-request-revamp/)

# wordpress - 如何使用 get_posts() 和表单选择

> ID：11302321
> 
> 赞同：0
> 
> 时间：2012-07-02T23:02:02.963
> 
> 标签：wordpress, plugins

大家好，我是 wp 插件开发的新手。到目前为止，我做得很好，除了这个表单选择部分似乎让我头疼。我正在尝试在选择字段中显示最近帖子的列表，以供管理员选择并执行一些操作，但标题不会显示。我在单选按钮甚至文本字段中尝试了这个，但没有得到任何结果。请问，我在这个表格中遗漏了什么？

```
<form method="post"><select name="Article">
$args = array( 'numberposts' => 10, 'order'=> 'ASC', 'orderby' => 'title' );
$postslist = get_posts( $args );     foreach ($postslist as $post) : setup_postdata($post);

echo'<option value='".the_ID()."'>'".the_title()."'</option>';
endforeach;
echo"</select></form>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T06:40:58.707

我现在无法测试，但有几种可能性。

首先，`the_ID()`将立即回显该值 - 在串联中间它不会像您想要的那样工作。你需要`get_the_ID()`。

其次，当您`echo`使用`option`. 假设您希望输出类似于

```
<option value="1">Title</option> 
```

你`echo`应该是

```
echo '<option value="' . get_the_ID() . '">' . get_the_title() . '</option>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-03T07:53:00.453

在串联中间它不会像你想要的那样工作。你需要`get_the_ID($post)`。

```
 <?php 
        $args = array( 'numberposts=>-1&order=>ASC&orderby=>title' );
        $postslist = get_posts( $args );     foreach ($postslist as $post) : setup_postdata($post);
        echo '<option value="'.get_the_id($post).'">'.get_the_title($post).'</option>';
        endforeach;
?> 
```

你`echo`应该是

```
echo '<option value="' . get_the_ID($post) . '">' . get_the_title($post) . '</option>'; 
```

# xcode - 进度视图xcode的高度

> ID：11302325
> 
> 赞同：2
> 
> 时间：2012-07-02T23:02:52.557
> 
> 标签：xcode, uiprogressview, rotatetransform

有没有办法改变 Xcode 中进度视图栏的高度？

我正在使用 Xcode 4.3，需要一个垂直进度条。我旋转了条，但现在无法更改高度并且显示为圆形。

旋转进度条的更有效方法也会有所帮助。

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-02T23:06:01.583

有人报告说手动更改它的框架会起作用：

```
[self.progressView setFrame:CGRectMake(0, 0, 300, 25)]; 
```

而其他人报告说 CGAffineTransform() 也可以：

```
[self.progressView setTransform:CGAffineTransformMakeScale(1.0, 3.0)]; 
```

至于旋转，请使用：

```
#define DEGREES_TO_RADIANS(angle) ((angle) / 180.0 * M_PI)
[self.progressView setTransform:CGAffineTransformMakeRotation(DEGREES_TO_RADIANS(angle))]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-10T11:36:51.520

这个问题已经在这里回答了[如何增加 UIProgressView 的高度](https://stackoverflow.com/questions/3437564/how-to-increase-height-of-uiprogressview/21041670#21041670)

```
@implementation UIProgressView (customView)

-(CGSize)sizeThatFits:(CGSize)size {
    CGSize newSize = CGSizeMake(self.frame.size.width,9);
    return newSize;
}
@end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-04T07:11:40.680

这里的代码对你有帮助。你想设置 uislider 高度改变 CGAffineTransformMakeScale 高度。

```
 UISlider *slider_progres = [[UIProgressView alloc]initWithFrame:CGRectMake(0, 56, 320, 15)];

    CGAffineTransform transform = CGAffineTransformMakeScale(1.0f, 3.0f);

    slider_progres.transform = transform; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-11T02:41:28.487

我刚刚在 iOS 7 中遇到了与此类似的问题。

如果您使用`[UIProgressView appearance]`设置进度和跟踪图像，进度视图将正确显示从 Xib 文件加载的进度条。

但是，如果您以编程方式创建 UIProgressView（通过 设置图像后`appearance`），将使用外观图像，但它的高度将被卡住并且“2”，进度条将被剪裁，甚至调用`setFrame`也无法修复它。

解决方法是直接在以编程方式创建的 UIProgressView 上以编程方式设置图像 - 而不是依赖外观设置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-23T06:39:06.313

我想它会对你有所帮助。

```
[self.progressView setTransform:CGAffineTransformMakeScale(1.0, 3.0)]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-23T02:06:53.240

对我来说，**只有**从 UIProgressView 类继承才有效。

```
[self.progressView setTransform:CGAffineTransformMakeScale(1.0, 3.0)]; 
```

例子：

```
 @implementation CustomProgressView

        - (id)initWithCoder:(NSCoder *)aDecoder
        {
            self = [super initWithCoder:aDecoder];
            if (self) {
                [self setTransform:CGAffineTransformMakeScale(1.0, 3.0)];

            }
            return self;
        }
    @end 
```

其他类：

```
@property (weak, nonatomic) IBOutlet CustomProgressView *cProgressView; 
```

# constraints - 过分热心的@Constraints。Play 2.0 更新时需要强制执行

> ID：11302329
> 
> 赞同：0
> 
> 时间：2012-07-02T23:03:43.043
> 
> 标签：constraints, playframework-2.0, requiredfieldvalidator, ebean

当更新未在 JSON 请求中指定必填字段时，我试图让 Play 停止抱怨。必填字段已经具有我不想更改的值，因此我不必再次指定它们。

精简模型：

```
@Entity
public class Run extends Model {
    public enum Status { RUNNING, OK, WARNINGS, ERRORS, FAILED, CERTIFIED };

    @Id
    public Long id;

    @Constraints.Required
    @ManyToOne(cascade = CascadeType.REFRESH)
    public Task task;

    @JodaDateTime
    @Type(type="org.joda.time.contrib.hibernate.PersistentDateTime")
    public DateTime started;
    @JodaDateTime
    @Type(type="org.joda.time.contrib.hibernate.PersistentDateTime")
    public DateTime completed;

    @Enumerated(EnumType.STRING)
    @Column(columnDefinition="ENUM('OK','WARNINGS','ERRORS','RUNNING','FAILED','CERTIFIED')")
    public Status result;

} 
```

基于示例应用程序之一，我的初始控制器操作是：

```
@Transactional
@BodyParser.Of(play.mvc.BodyParser.Json.class)
public static Result update(Long run_id) {
    Form<Run> runForm = form(Run.class).bindFromRequest();
    if(runForm.hasErrors()) {
        return badRequest(runForm.errorsAsJson());
    }
    runForm.get().update(run_id);

    ObjectNode result = Json.newObject();
    result.put("id", run_id);

    return ok(result);
} 
```

但如果我只是发送`{ completed: '1341268791000', result: 'ERRORS }`它抱怨这`task`是必需的。

然后我想也许我可以用[`Form.fill`](http://www.playframework.org/documentation/api/2.0.2/java/play/data/Form.html#fill%28T%29)它来修复它：

```
@Transactional
@BodyParser.Of(play.mvc.BodyParser.Json.class)
public static Result update(Long run_id) {
    Run run = Run.find.byId(run_id);
    Form<Run> runForm = form(Run.class).fill(run).bind(request().body().asJson());

    if (runForm.hasErrors())
        return badRequest(runForm.errorsAsJson());

    runForm.get().update(run_id);

    ObjectNode result = Json.newObject();
    result.put("id", run_id);

    return ok(result);
} 
```

但这也无济于事。秘诀是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T23:41:03.380

您不需要使用 Form 插入/更新任何字段，您也可以“手动”更新字段（*简化示例，当然在您的示例中，您需要从 Json 中提取 someField*）

```
public static Result update(Long run_id) {
    Run run = Run.find.byId(run_id);
    run.someField = form().bindFromRequest().get("someField");
    run.update();
    return ok();
} 
```

# ruby - 加载了 async_sinatra gem，但我的程序没有在其中找到方法

> ID：11302330
> 
> 赞同：1
> 
> 时间：2012-07-02T23:03:46.263
> 
> 标签：ruby, asynchronous, webserver, sinatra, thin

有问题的宝石是[async_sinatra](https://github.com/raggi/async_sinatra)。我已经安装了它，并在 Gemfile 中运行了一个捆绑安装，但我一直收到同样的错误：

`NoMethodError: undefined method 'aget' for main:Object`

无论如何要帮助解决这个问题？

注意：我正在运行最新的 Sinatra，并且正在使用 Thin webserver，并且正在运行 JRuby 1.6.7。

我们使用的示例代码是：

```
require 'sinatra/async'

class AsyncTest < Sinatra::Base
  register Sinatra::Async

  aget '/' do
    body "hello async"
  end
end

run AsyncTest.new 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:13:16.610

1.  将文件重命名为`config.ru`
2.  确保`require 'sinatra'`在文件顶部
3.  运行它`rackup config.ru`

适用于我在 OSX 10.7 上的 MRI 1.9.3p125、thin 1.3.1、sinatra 1.3.2 和 async_sinatra 1.0.0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:37:24.880

文档说您需要[注册中间件](https://github.com/raggi/async_sinatra#synopsis)也许这就是问题所在？如果没有那条线，恐怕您的应用程序会从gem 的一部分中获取方法，`Sinatra::Base`而没有任何方法，因此可以工作，也不能`async``get``aget`

# python - Sublime、Python、Web 服务器和设置断点

> ID：11302332
> 
> 赞同：5
> 
> 时间：2012-07-02T23:04:03.290
> 
> 标签：python, plone, sublimetext, remote-debugging, pdb

使用 Sublime Text 2 调试 Python Web 服务器（我有 Plone/Zope）的推荐方法是什么？

*   在文本编辑器中设置真正的断点...

*   ...最好通过行上下文相关命令并在文本编辑器边距中有一个标记...

*   ...然后有一个正在运行的 Python Web 服务器（本地进程）立即执行断点而无需重新启动...

*   ...并且当命中断点时，在终端或其他窗口中打开调试提示，可以是 pdb

目标是断点不会是硬式`import pdb ; pdb.set_trace()`断点，因为您需要重新启动软件以跳过此类断点，并且您无法在运行时启用/禁用它。

平台：OSX。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T02:20:06.413

[mr.freeze](http://pypi.python.org/pypi/mr.freeze)提供了一种在运行中的 Zope 实例中设置断点而无需重新启动的方法，以及用于将其与 TextMate 集成的示例脚本（通过快捷键触发）。将它变成一个 Sublime Text 插件需要一些工作，但这将是一个很好的起点。

示例 TextMate 脚本在[自述](http://svn.plone.org/svn/collective/mr.freeze/trunk/README.txt)文件中，但尚未发布。

# android - 显示从 web 服务返回的图形的 jpeg

> ID：11302335
> 
> 赞同：0
> 
> 时间：2012-07-02T23:04:10.013
> 
> 标签：android, eclipse, web-services, google-maps, button

好吧，我编写了这段代码，允许用户平移谷歌地图，选择一个区域，然后当他/她按下按钮时，角落的坐标被传递给一个 web 服务，该服务返回该区域内的注释并将其绘制在地图。

该应用程序在所选区域内运行良好。现在我想添加一个功能，在单击注释时，它会向我返回这些值的图表。

可以从下面的网络服务访问此图，

```
http://hydrodata.info/graph/handler2.ashx?startDate=2010-10-01&endDate=2011-08-01&siteCode=NWISDV:13073000&variableCode=NWISDV:00060&serviceUrl=http://river.sdsc.edu/wateroneflow/NWIS/DailyValues.asmx?WSDL&height=500&width=500 
```

站点代码、变量代码等是从我随身携带的另一个网络服务中获得的。

那么任何人都可以帮助我如何在我的应用程序上显示此图表吗？

下面附上代码，

主要课程是，

```
 public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    mapView = (MapView) findViewById(R.id.mapview);

    mapView.setBuiltInZoomControls(true);
    mapController = mapView.getController();
    mapController.setZoom(8);
    addListenerOnButton();

}
public void addListenerOnButton() 
{
     final MapView mapView;
    mapView = (MapView) findViewById(R.id.mapview);

    button = (Button) findViewById(R.id.button1);

    button.setOnClickListener(new OnClickListener() 
    {

        MapView mapView;

        public void onClick(View v) 
        {
                       public void onClick(View v) 
        {

            List<Overlay> mapOverlays = mapView.getOverlays();

             for(int i=0;i<mapOverlays.size();i++)
             {
                 mapOverlays.remove(0);  
                }

        //mapView.getOverlays().clear(); //from here

              Drawable drawable = AndroidTestActivity.this.getResources().getDrawable(R.drawable.mapmarker);
              HelloItemizedOverlay itemizedoverlay1= new HelloItemizedOverlay(drawable,AndroidTestActivity.this);
              itemizedoverlay1.delOverlay();

             if(!mapOverlays.isEmpty()) 
             { 
             mapOverlays.clear(); 
             mapView.invalidate();
             }

        EditText text = (EditText)findViewById(R.id.editText1);
        String parameter= text.getText().toString(); 

        EditText text2 = (EditText)findViewById(R.id.editText2);
        String strdd=text2.getText().toString(); 
        EditText textmm2 = (EditText)findViewById(R.id.editText23);
        String strmm=textmm2.getText().toString(); 

        EditText textyy2 = (EditText)findViewById(R.id.editText24);
        String stryy=textyy2.getText().toString(); 

        String startDate=strdd+"/"+ strmm+"/"+ stryy; 

        EditText textedd2 = (EditText)findViewById(R.id.editText35);
        String stredd=textedd2.getText().toString(); 
        EditText textemm2 = (EditText)findViewById(R.id.editText36);
        String stremm=textemm2.getText().toString(); 

        EditText texteyy2 = (EditText)findViewById(R.id.editText37);
        String streyy=texteyy2.getText().toString(); 

        String endDate= stredd+"/"+ stremm+"/"+ streyy; 

        GeoPoint center = mapView.getMapCenter();

       float centerLatitude = (float)(center.getLatitudeE6())/1000000;
       float centerLongitude = (float)(center.getLongitudeE6())/1000000;

       GeoPoint mapTopLeft = mapView.getProjection().fromPixels(0,0);
        topLatitude = (double)(mapTopLeft.getLatitudeE6())/1000000;
        leftLongitude = (double)(mapTopLeft.getLongitudeE6())/1000000;

       GeoPoint mapBottomRight= mapView.getProjection().fromPixels(width, height/2);
        bottomLatitude = (double)(mapBottomRight.getLatitudeE6())/1000000;
        rightLongitude = (double)(mapBottomRight.getLongitudeE6())/1000000;

        str= Double.toString(centerLatitude);
        str1=Double.toString(centerLongitude);
        OverlayItem overlayitem = new OverlayItem(center, str, "center");
        itemizedoverlay1.addOverlay(overlayitem);

        str2= Double.toString(topLatitude);
        str3=Double.toString(leftLongitude);
        OverlayItem overlayitem1 = new OverlayItem(mapTopLeft, str2, "topLeft");
        itemizedoverlay1.addOverlay(overlayitem1);

        str4= Double.toString(bottomLatitude);
        str5=Double.toString(rightLongitude);
        OverlayItem overlayitem2 = new OverlayItem(mapBottomRight, str4, "bottomRight");
        itemizedoverlay1.addOverlay(overlayitem2);
        mapOverlays.add(itemizedoverlay1);
        dms=Double.toString(topLatitude)+";"+Double.toString(leftLongitude)+";"+Double.toString(bottomLatitude)+";"+Double.toString(rightLongitude);
        String[] arr=dms.split(";");

    for (int i=0; i<4 ; i++)
    {

        double value = Double.valueOf(arr[i]);
        if (value <0)
        {
            value=value*-1;
            int y = (int) value;
            double rest= value - y;
            String min_sec = Double.toString(rest);
            String min = min_sec.substring(2,4);   /* minutes */
            String sec = min_sec.substring(4,6);   /* seconds */
            minutes = (Double.valueOf(min)) / 60;   /* minutes DD */
            seconds = Double.valueOf(sec) / 3600;  
            double value1= y + minutes + seconds;
            value1=value1*-1;
            strtest=strtest+Double.toString(value1)+";";
           // pass[i]= value1;
        }
        else
        {
                int y1 = (int) value;
                double rest1= value - y1;
                String min_sec1 = Double.toString(rest1);
                String min1 = min_sec1.substring(2,4);   /* minutes */
                String sec1 = min_sec1.substring(4,6);   /* seconds */
                minutes = (Double.valueOf(min1)) / 60;   /* minutes DD */
                seconds = Double.valueOf(sec1) / 3600;  
                double value1= y1 + minutes + seconds;
                strtest=strtest+Double.toString(value1)+";";
              //  pass[i]= value1;
        }
    }
    strtest=Double.toString(a)+";"+Double.toString(b)+";"+Double.toString(c)+";"+Double.toString(d)+";"+parameter +";"+startDate+";"+endDate;
    Log.d("strtest strtest", "strtest strtest = "+strtest);
    Intent msgIntent = new Intent(AndroidTestActivity.this,Intentservice.class); 
    msgIntent.putExtra("strtest", strtest);  //arrlat_long
    startService(msgIntent); 

    //Dynamic registration Receiver
    IntentFilter filter = new IntentFilter(ACTION_RECV_MSG);  
    filter.addCategory(Intent.CATEGORY_DEFAULT);  
    receiver = new MessageReceiver();  
    registerReceiver(receiver, filter);  
    IntentFilter filter2 = new IntentFilter(ACTION_OTHER_MSG);  
    filter2.addCategory(Intent.CATEGORY_DEFAULT);  
    receiver = new MessageReceiver();  
    registerReceiver(receiver, filter2);  
}  }
        );
    }
  //Broadcast to receive 
public class MessageReceiver extends BroadcastReceiver 
{  
    @Override  
    public void onReceive(Context context, Intent intent) 
    {   

        Toast.makeText(context, "hello",Toast.LENGTH_SHORT).show();
         if(arrlat_lat!= null)
           {
               arrlat_lat.clear();
           }

           if(arrlat_long!= null)                    //!arrlat_long.isEmpty()
           {
               arrlat_long.clear();
           }

        arrlat_long = intent.getStringArrayListExtra("codnt");  
        arrlat_lat = intent.getStringArrayListExtra("codntlat");  

      // text.setText(message);      

        Toast.makeText(context, arrlat_long.get(0),Toast.LENGTH_SHORT).show();
    testoverlay();
    }  
} 
public void testoverlay()
{

  List<Overlay> mapOverlays = mapView.getOverlays(); 
  Drawable drawable = this.getResources().getDrawable(R.drawable.mapmarker);
   if (flag==0)
   { 

   HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(drawable,this);

   for(int i=0;i<arrlat_long.size();i++)
   {

        float lat = Float.parseFloat(arrlat_lat.get(i));
        float lng = Float.parseFloat(arrlat_long.get(i));

        GeoPoint point = new GeoPoint((int)(lat * 1E6), (int)(lng * 1E6));
        lat1= lat;
        lon1= lng;
        str= Double.toString(lat1);
        str1=Double.toString(lon1);
        OverlayItem overlayitem = new OverlayItem(point, str,str1);
        itemizedoverlay.addOverlay(overlayitem);

   }mapOverlays.add(itemizedoverlay);
   mapView.invalidate();
   flag++;
   }
   else
   {
       HelloItemizedOverlay itemizedoverlay12 = new HelloItemizedOverlay(drawable,this);
         //  mapView.getOverlays().clear();
           for(int i=0;i<arrlat_long.size();i++)
           {

                float lat = Float.parseFloat(arrlat_lat.get(i));
                float lng = Float.parseFloat(arrlat_long.get(i));

                GeoPoint point = new GeoPoint((int)(lat * 1E6), (int)(lng * 1E6));
                lat1= lat;
                lon1= lng;
                str= Double.toString(lat1);
                str1=Double.toString(lon1);
                OverlayItem overlayitem = new OverlayItem(point, str,str1);
                itemizedoverlay12.addOverlay(overlayitem);

           }mapOverlays.add(itemizedoverlay12);
           mapView.invalidate();

   } }
@Override 
protected boolean isRouteDisplayed() 
{
// TODO Auto-generated method stub
return false;
 }
} 
```

IntentService.java

```
public Intentservice()
{
    super("Intentservice");
    // TODO Auto-generated constructor stub
}

@Override
protected void onHandleIntent(Intent intent) 
{
      String strxmin,xmax,ymin,ymax,par,startDate,endDate;
        String str=intent.getExtras().getString("strtest");
        Log.d("onHandleIntent", "onHandleIntent onHandleIntent= "+str);
        String[] arrtelog=str.split(";");
         if(arrtelog.length >3)
            {
              strxmin=arrtelog[0];
              xmax=arrtelog[1];
              ymin=arrtelog[2];
              ymax=arrtelog[3];
              par=arrtelog[4];
              startDate=arrtelog[5];
              endDate=arrtelog[6];
              Log.d("onHandleIntent", "onHandleIntent strxmin= "+strxmin);
              Log.d("onHandleIntent", "onHandleIntent strxmin= "+xmax);
              Log.d("onHandleIntent", "onHandleIntent strxmin= "+ymin);
              Log.d("onHandleIntent", "onHandleIntent strxmin= "+ymax);
              Log.d("onHandleIntent", "onHandleIntent strxmin= "+par);
              Log.d("onHandleIntent", "onHandleIntent strxmin= "+startDate);
              Log.d("onHandleIntent", "onHandleIntent strxmin= "+endDate);

        // TODO Auto-generated method stub
              HttpClient httpclient = new DefaultHttpClient();   
         String Url = "http://hiscentral.cuahsi.org/webservices/hiscentral_1_1.asmx/GetSeriesCatalogForBox2";
         if(!Url.endsWith("?"))
         {
                Url += "?";
         }

         List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(5);   
         nameValuePairs.add(new BasicNameValuePair("xmin",xmax)); //ymax
         nameValuePairs.add(new BasicNameValuePair("xmax",ymax)); //xmax
         nameValuePairs.add(new BasicNameValuePair("ymin",ymin)); //strxmin
         nameValuePairs.add(new BasicNameValuePair("ymax", strxmin)); //ymin
         nameValuePairs.add(new BasicNameValuePair("networkIDs", ""));
         nameValuePairs.add(new BasicNameValuePair("conceptKeyword", par));
         nameValuePairs.add(new BasicNameValuePair("beginDate", startDate));
         nameValuePairs.add(new BasicNameValuePair("endDate", endDate));
         String paramString = URLEncodedUtils.format(nameValuePairs, "utf-8");
         Url += paramString;
         try 
            {
               HttpPost httppost = new HttpPost(Url); 
               httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
               HttpResponse response = httpclient.execute(httppost);
               HttpEntity httpentity = response.getEntity();

               if(httpentity == null)
               {

               }
               else
               {
               responseBody = EntityUtils.toString(response.getEntity());
               XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
               factory.setValidating(false);
               XmlPullParser myxml = factory.newPullParser();
               InputStream raw = new ByteArrayInputStream(responseBody.getBytes());
               myxml.setInput(raw, null);
               int eventType = myxml.getEventType();

               if(!arrlat_lat.isEmpty())
               {
                   arrlat_lat.clear();
               }

               if(!arrlat_long.isEmpty())                    //!arrlat_long.isEmpty(),, arrlat_long!= null
               {
                   arrlat_long.clear();
               }

               while(eventType != XmlPullParser.END_DOCUMENT) 
               {
              if(eventType == XmlPullParser.START_DOCUMENT) 
                 {

                     Log.d("ParseXmlActivity", "In start document");
                 }
                 else if(eventType == XmlPullParser.START_TAG) 
                 {
                     if (myxml.getName().equals("latitude"))
                        {
                            str="";
                            str  =  myxml.nextText().toString();
                             Log.d("ParseXmlActivity", "In start tag = "+str);
                             arrlat_lat.add(str);
                        }
                        if (myxml.getName().equals("longitude"))
                        {
                            str = myxml.nextText().toString();
                             Log.d("ParseXmlActivity", "In start tag = "+str);
                             arrlat_long.add(str);
                        }

               }

               eventType = myxml.next();

       } 
               }
               }
       catch (XmlPullParserException e) 
       {
       } 
       catch (IOException e)
       {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
         catch(IndexOutOfBoundsException e)
         {

         }
       //  IntentFilter filter = new IntentFilter(ACTION_RECV_MSG); 
       //  filter.addCategory(Intent.CATEGORY_DEFAULT);  
         //receiver = new MessageReceiver();  
      //   registerReceiver(receiver, filter); 

       if(arrlat_long.size()>0)
       {
       Log.d("TEST TESTTEST", "In start TESTTEST = "+arrlat_long.get(0)+" $$$ "+arrlat_long.size());
       Intent broadcastIntent = new Intent();  
       broadcastIntent.setAction(ACTION_RECV_MSG);  
       broadcastIntent.addCategory(Intent.CATEGORY_DEFAULT);        
       broadcastIntent.putStringArrayListExtra("codnt", arrlat_long);  //arrlat_long
       broadcastIntent.putStringArrayListExtra("codntlat", arrlat_lat);  //arrlat_lat
       sendBroadcast(broadcastIntent);
       }
    }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T23:27:52.073

使用 display.getSize(size); 获取屏幕大小

# .net - Jenkins 和 maven npanday 构建失败

> ID：11302337
> 
> 赞同：0
> 
> 时间：2012-07-02T23:04:24.397
> 
> 标签：.net, maven, continuous-integration, jenkins

**[更新和解决方案在我下面的回复中]**

我正在使用 npanday，这是一个使用 maven 构建 .net 项目的项目。
加载步骤后，我已经弄清楚如何使用 maven 编译/安装一些项目。

这项工作正好在我的命令控制台或视觉工作室上，但是一旦詹金斯尝试编译它，maven 就无法构建它......

*以下是 Jenkins 的失败输出：*

> -------------------------------------------------- ----------------------------------
> mavenExecutionResult 异常不是空
> 消息：未能执行目标 org.apache.npanday。 plugins:NPanday.Plugin.Settings.JavaBinding:1.5.0-incubating-SNAPSHOT:generate-settings (default-generate-settings) on project ConsoleApplication400: NPANDAY-115-010: Error on resolve plugin artifact(s)
> cause : NPANDAY- 115-010：解析插件工件时出错
> 堆栈跟踪：
> org.apache.maven.lifecycle.LifecycleExecutionException: 无法在项目上执行目标 org.apache.npanday.plugins:NPanday.Plugin.Settings.JavaBinding:1.5.0-incubating-SNAPSHOT:generate-settings (default-generate-settings) ConsoleApplication400：NPANDAY-115-010：
> 在 org.apache.maven.lifecycle.internal.MojoExecutor 的 org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:213)解析插件工件时出错
> 。 在 org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
> 的 org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)执行(MojoExecutor.java:153 )
> 
> 在 org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
> 在 org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
> 在 org.apache.maven.lifecycle .internal.LifecycleStarter.execute(LifecycleStarter.java:161)
> 在 org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
> 在 org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
> 在 org. jvnet.hudson.maven3.launcher.Maven3Launcher.main(Maven3Launcher.java:79)
> 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
> 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
> 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
> 在 java.lang.reflect.Method.invoke(Method.java:597)
> 在 org.codehaus.plexus.classworlds.launcher.Launcher.launchStandard(Launcher.java :329)
> org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:239)
> 在 org.jvnet.hudson.maven3.agent.Maven3Main.launch(Maven3Main.java:158)
> 在 hudson.maven。 Maven3Builder.call(Maven3Builder.java:98)
> at hudson.maven.Maven3Builder.call(Maven3Builder.java:64)
> at hudson.remoting.UserRequest.perform(UserRequest.java:118)
> at hudson.remoting.UserRequest.perform(UserRequest .java:48)
> 在 hudson.remoting.Request$2.run(Request.java:326)
> 在 hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72)
> 在 java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
> 在 java.util.concurrent.FutureTask.run(FutureTask.java: 138)
> 在 java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
> 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
> 在 java.lang.Thread.run(Thread .java:662)
> 引起：org.apache.maven.plugin.MojoFailureException: NPANDAY-115-010:在 org
> 的 npanday.plugin.AbstractMojo.execute(AbstractMojo.java:189)解析插件工件时出错
> 。 apache.maven.plugin.DefaultBuildPluginManager.executeMojo（DefaultBuildPluginManager.java:101）
> 在 org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
> ... 27 更多
> 原因：org.apache.maven.artifact.resolver.ArtifactNotFoundException：找不到工件 org.apache.npanday .plugins:NPanday.Plugin.Settings:dll:1.5.0-incubating-SNAPSHOT
> 
> 尝试从项目网站手动下载文件。
> 
> 然后，使用以下命令安装它：
> mvn install:install-file -DgroupId=org.apache.npanday.plugins -DartifactId=NPanday.Plugin.Settings -Dversion=1.5.0-incubating-SNAPSHOT -Dpackaging=dotnet-maven-plugin -Dfile=/path/to/file
> 
> 或者，如果您托管自己的存储库，您可以在那里部署文件：
> mvn deploy:deploy-file -DgroupId=org.apache.npanday.plugins -DartifactId=NPanday.Plugin.Settings -Dversion=1.5.0-incubating-SNAPSHOT -Dpackaging=dotnet-maven-plugin -Dfile=/path/to/来自指定远程存储库的文件 -Durl=[url] -DrepositoryId=[id]
> 
> org.apache.npanday.plugins:NPanday.Plugin.Settings:dotnet-maven-plugin:1.5.0-incubating-SNAPSHOT ： 中央（[http: //repo.maven.apache.org/maven2，releases=true，snapshots=false](http://repo.maven.apache.org/maven2) ) at org.apache.maven.artifact.resolver.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:219) at org.apache.maven.artifact。 resolver.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:157)
> 
> 在 org.apache.maven.artifact.resolver.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:525)
> 在 npanday.resolver.DefaultNPandayArtifactResolver.resolve(DefaultNPandayArtifactResolver.java:77)
> 在 npanday.executable.impl.NetExecutableFactoryImpl.getPluginExecutable(NetExecutableFactoryImpl.java :396)
> 在 npanday.plugin.AbstractMojo.execute(AbstractMojo.java:173)
> ... 29 更多
> 原因：org.sonatype.aether.resolution.ArtifactResolutionException：找不到工件 org.apache.npanday.plugins:NPanday。 Plugin.Settings:dll:1.5.0-incubating-SNAPSHOT
> at org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:538)
> 在 org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolveArtifacts(DefaultArtifactResolver.java:216)
> 在 org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolveArtifact(DefaultArtifactResolver.java:193)
> 在 org.sonatype.aether.impl .internal.DefaultRepositorySystem.resolveArtifact(DefaultRepositorySystem.java:286)
> at org.apache.maven.artifact.resolver.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:213)
> ... 34 更多
> 原因：org.sonatype.aether.transfer。 ArtifactNotFoundException：找不到工件 org.apache.npanday.plugins:NPanday.Plugin.Settings:dll:1.5.0-incubating-SNAPSHOT
> 在 org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:528)
> ... 38 个
> 频道已停止
> 完成：失败

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T16:58:11.240

jenkins 当他在插件上运行 maven 时，他默认指向 c:/.m2，另一方面，maven 指向 C:/Users/UserDoc/.m2，如果您使用 npanday，他会将 .net 框架映射到名为 npanday 的文件上-settings.xml
我所要做的就是将此映射文件复制到 jenkins mavens repo "C:/.m2" 文件夹。

# knockout.js - 在绑定中使用 $index 时，Knockout 未评估表达式

> ID：11302338
> 
> 赞同：14
> 
> 时间：2012-07-02T23:04:24.423
> 
> 标签：knockout.js, knockout-2.0

为什么，当我尝试使用 knockout.js 使用 $index 绑定一些文本时，我得到的是函数的代码而不是数字？

```
<tbody  data-bind="foreach: MyList">
  <tr>
    <td><span data-bind="text: $index + 1"></span></td>
  </tr>
</tbody> 
```

我没有得到 1、2、3 等，而是得到了这个：

![在此处输入图像描述](../Images/9712dc592536f45ac63825c8eb14a3e4.png)

您可以通过上图中的最后一个字符看到，我的零索引被添加到 1。如果我从绑定中删除“+ 1”，我会得到 0、1、2 而不是函数。

我如何告诉淘汰赛评估表达式？我在提交表单时遇到了同样的问题。我的字符串字段作为函数而不是值提交。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-02T23:11:41.160

$index 是一个 observable，它是一个函数。尝试`<span data-bind="text: $index() + 1"></span>`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T10:43:25.920

如果你使用

```
<span data-bind="text: $index() + 1"></span> 
```

例如，您的索引值为 2，您的跨度文本将为：21 而不是 3。

您应该在 viewModel 中定义一个函数，如下所示：

```
self.itemNumber = function(index) {
    return index + 1;
} 
```

然后在你的范围内你应该做：

```
<span data-bind="text: $root.itemNumber($index())"></span> 
```

我希望这个能帮上忙 ：）

# php - 无法在 php/mysql 中上传图片

> ID：11302339
> 
> 赞同：3
> 
> 时间：2012-07-02T23:04:25.037
> 
> 标签：php, mysql, image, upload

我一直在研究自定义 cms，但在创建用户可以更新与给定行关联的缩略图的表单时遇到了麻烦。我有另一个页面，他们可以在其中进行初始上传，并且一切正常，但是由于某种原因，即使将代码直接复制并粘贴到更新页面后，php 也会返回以下两行的错误：

```
move_uploaded_file($_FILES['thumbnail']['tmp_name'], "images/" . $_FILES['thumbnail']['name']);
$thumbnail_location = 'images/'. $_FILES['thumbnail']['name']; 
```

指向这个页面的页面只包含一个普通表单，其中上传输入的名称为“thumbnail”。这是更多相关代码，尽管它似乎不是问题。

```
move_uploaded_file($_FILES['thumbnail']['tmp_name'], "images/" . $_FILES['thumbnail']['name']);
$thumbnail_location = 'images/'. $_FILES['thumbnail']['name'];
$id = $_GET['id'];

    $workset = mysql_query('SELECT * FROM work WHERE id='.$id.' LIMIT 1', $connection);
    while ($work = mysql_fetch_array($workset)) {

        mysql_query('UPDATE work SET thumbnail="'.$thumbnail_location.'" WHERE id='.$id.'');
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T23:08:25.670

您必须添加`enctype="multipart/form-data"`到您的表单：

```
<form method="post" action="" enctype="multipart/form-data"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:43:32.440

@mgrahy 做得很好。只是在这里我试图做完整的 html 表单@tom c

```
<form method="post" action="" enctype="multipart/form-data">  
<input type ="thumbnail[]" multiple>
<input type ="submit" value="uplod">
</form> 
```

# delphi - 独立的移动应用程序：RadPhp 或 Delphi IntraWeb

> ID：11302341
> 
> 赞同：0
> 
> 时间：2012-07-02T23:04:36.707
> 
> 标签：delphi, intraweb, tms, radphp

我计划编写一个主要由移动设备用户（iPhone、iPad、Android、Windows 和诺基亚）使用的应用程序。该应用程序将是一个独立的应用程序（即不从服务器运行）。

该应用程序将不时需要从服务器（FTP 或 HTTP）获取新的费率。

将来我可能会扩展该服务，以便用户可以登录到 Web 应用程序，以便他们可以在桌面上访问他们的记录并在他们的移动设备上同步。

我曾使用过 Delphi 和 PHP，但从未使用过 Delphi IntraWeb 和 RadPHP。

我了解对于不同的界面，我可能需要不同的 UI 设置。我的主要目标是轻松管理软件，尤其是当它在许多移动设备和桌面上得到支持时。

RadPHP 支持 PhoneGap，据我所知，我只能将它用于 iPhone 和 Android。使用 IntraWeb，我最近遇到了“TMS IntraWeb iPhone Controls Pack”，[http:](http://www.tmssoftware.com/site/tmsiwiphone.asp) //www.tmssoftware.com/site/tmsiwiphone.asp，它看起来很有希望。

那么你会为我推荐哪条路？带有 TMS 的 IntraWeb 或带有 PhoneGap 的 RadPHP？或者我在这里完全错过了什么？

提前致谢。迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T14:13:03.080

你让我很困惑。为什么您需要一个应该为每个不同的移动设备部署和维护的独立应用程序。开发 SOA 网站。让用户通过网络浏览器登录（无论他们是在移动设备上还是桌面上）并做任何事情......您可以使用 RadPHP 或任何其他工具（记事本:)）来实现这一点。也许我误解了你的情况，但你似乎和我一样困惑。

注意：甚至不要考虑 Intraweb。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T00:42:52.457

您没有准确描述您需要做什么，但如果您的应用程序只是偶尔从服务器获取一些信息（我假设通过 HTTP），我不会创建“应用程序”。

只需创建一个简单的 HTML 文件并使用 JavaScript 来运行您的代码。这将确保它可以在每种类型的设备上运行，即使是在未来 10 年左右的时间里。您可以使用[Sencha Touch](http://www.sencha.com/)或[JQuery Mobile](http://jquerymobile.com/)来提供一些光滑的外观和感觉。我就是这样做的。

**2020 年 11 月更新（8 年后更新）**：尽可能多地基于 Web 的建议仍然有效，但现在有更好的 JavaScript 框架。ReactJS 在今天更有意义。让我们看看未来8年会发生什么。我会尝试在 2028 年回来再次更新：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T13:09:36.980

First off, I do not know about *IntraWeb*.

About **RadPHP**, I think it would fit your needs. It helps you develop your application “the RAD way”, specially the interface (with components based on jQuery Mobile), and you can develop it client-side, using only JavaScript code (no PHP).

Later, you can use *AJAX* (in RadPHP it is a matter of toggling a boolean property) to enable server-side scripting (PHP), and do whatever you like in devices with a network connection.

About RadPHP supporting only *Android* and *iPhone*: (1) the latest update also supports *Blackberry*, and (2) you can get RadPHP to generate a PhoneGap project for any of those three platforms, get the www folder, and use the [**PhoneGap Build service**](https://build.phonegap.com/) to get it build for any other mobile platform in the cloud.

Anyway, in the end is a matter of personal choice. Try both, and decide later!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T21:40:23.430

对于 Intraweb，您还可以考虑 CgDevTools 的 Mobile Suite。

[http://www.cgdevtools.com](http://www.cgdevtools.com)

# localization - 开源机器翻译引擎？

> ID：11302342
> 
> 赞同：13
> 
> 时间：2012-07-02T23:04:41.070
> 
> 标签：localization, machine-translation

我们正在寻找可以整合到我们的本地化工作流程中的开源机器翻译引擎。我们正在研究以下选项：

1.  [摩西](http://www.statmt.org/moses/)(C++)
2.  [约书亚](http://www.computing.dcu.ie/~mforcada/fosmt.html)（爪哇）
3.  [短语](http://www.stanford.edu/~jurafsky/phrasal_main_final.pdf)（Java）

其中，Moses 拥有最广泛的社区支持，并已被众多本地化公司和研究人员试用。我们实际上倾向于基于 Java 的引擎，因为我们的应用程序都使用 Java。你们中是否有人在工作流程中使用过 Joshua 或 Phrasal。你能和他们分享你的经验吗？或者，就其提供的功能和易于集成而言，Moses 是否远远领先于这些。

而且，我们要求引擎支持：

1.  特定领域的训练（即它应该为输入数据所属的每个领域维护单独的短语表）。
2.  增量训练（即避免每次我们希望使用一些新的训练数据时都从头开始重新训练模型）。
3.  并行化翻译过程。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-07T10:17:34.650

很多事情都在向前发展，所以我想就这个主题进行更新，并将之前的答案留在那里以记录进度。

特定领域的培训：如果您的数据来自各种来源并且您需要针对子领域进行优化，则领域适应技术会很有用。根据我们的经验，没有单一的解决方案始终表现最佳，因此您需要尝试尽可能多的方法并比较结果。Moses 邮件列表中有一封邮件列出了可能的方法：[http](http://thread.gmane.org/gmane.comp.nlp.moses.user/9742/focus=9799various) ://thread.gmane.org/gmane.comp.nlp.moses.user/9742/focus=9799various 。以下页面还概述了当前的研究： http: [//www.statmt.org/survey/Topic/DomainAdaptation](http://www.statmt.org/survey/Topic/DomainAdaptation)

增量培训：在 IWSLT 2013 上有一个有趣的演讲：[http](http://www.iwslt2013.org/downloads/Assessing_Quick_Update_Methods_of_Statistical_Translation_Models.pdf) ://www.iwslt2013.org/downloads/Assessing_Quick_Update_Methods_of_Statistical_Translation_Models.pdf它表明当前的增量方法（1）使您的系统离线，因此您没有真正的“实时更新” " 你的模型 (2) 的表现优于全面再培训。看来问题还没有解决。

并行化翻译过程：moses 服务器落后于 moses-cmd 二进制文件。所以如果你想使用最新的功能，最好从 moses-cmd 开始。此外，社区没有兑现承诺永远不会发布 1.0 版本:-)。事实上，您可以在这里找到最新版本（2.1）：http: [//www.statmt.org/moses/?n=Moses.Releases](http://www.statmt.org/moses/?n=Moses.Releases)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T08:45:34.307

我认为这个问题最好在 Moses 邮件列表 (moses-support@mit.edu) 上提出。那里有很多人使用不同类型的系统，所以你会得到一个客观的答案。除此之外，这是我的输入：

*   关于 Java：MT 系统是用哪种语言编写的并不重要。无意冒犯，但您可以放心地假设，即使代码是用您熟悉的语言编写的，如果没有更深入的 MT 知识，也很难理解。所以你正在寻找的是接口。Moses 的 xml-rpc 工作正常。
*   关于机器翻译系统：寻找最好的结果，忽略它所用的编程语言。结果在这里：[matrix.statmt.org](http://matrix.statmt.org)。使用您的 MT 系统的人对输出感兴趣，而不是对您的编码偏好。
*   关于整个企业：一旦您开始提供 MT 输出，请确保您可以快速适应它。MT 正在迅速转向以 MT 系统为核心（而非唯一）组件的流水线流程。所以专注于可维护性。在理想情况下，您可以将任何 MT 系统连接到您的框架。

以下是有关您的功能请求的一些输入：

*   特定领域的培训：您不需要该功能。通过使用客户特定的数据培训，您可以获得最佳 MT 结果。
*   增量训练：参见[基于流的统计机器翻译](http://homepages.inf.ed.ac.uk/miles/phd-projects/levenberg.pdf)
*   并行化翻译过程：您必须自己实施。请注意，大多数 MT 软件纯粹是学术性的，永远不会达到 1.0 的里程碑。如果多线程服务器可用（Moses）当然会有所帮助，但即便如此，您仍需要大量的利用代码。

希望这可以帮助。如果您还有任何问题，请随时 PM 我。

# c# - 实体框架：幕后序列化/反序列化 JSON 列

> ID：11302346
> 
> 赞同：8
> 
> 时间：2012-07-02T23:05:05.267
> 
> 标签：c#, json, entity-framework-4

我有 Code First 类/表，其中一个字段的类型为 string/nvarchar。此字符串是 MyClass 实例的 JSON 表示形式。我只想使用 MyClass 实例在代码中进行操作，但将其作为字符串（JSON）存储在数据库中。假设我的表如下所示：

```
public class Message
{
    [Key]
    public int Id { get; set; }
    public string Title { get; set; }
    public string JsonDefinition { get; set; }
} 
```

我更喜欢这样

```
public class Message
{
    [Key]
    public int Id { get; set; }
    public string Title { get; set; }
    [JSON]
    public MyClass JsonDefinition { get; set; }
} 
```

其中 JSON 是一个自定义属性，它告诉 EF 将该字段存储为 MyClass 实例的序列化字符串。同时它说 EF：“一旦你拉出实体，用反序列化的 MyClass 实例替换 JsonDefinition 字符串”

是否可以使用现有的 EF 4 机制来实现？如果是这样，那怎么办？

提前致谢。

**编辑**： MyClass 可以是 Dictionary 或任何其他复杂类型。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T08:23:28.453

不是直接的。您必须始终在您的类中存在您的字符串属性，因为 EF 需要它来保持持久性。您也可以拥有非映射`MyClass`属性，但您必须手动处理序列化和反序列化并使这些属性同步。

天真的解决方案是`INotifyPropertyChanged`在您的 MyClass 中实现，并确保`MyClass`值或其任何属性的每次更改都会触发 JSON 序列化到字符串属性。这种幼稚的解决方案适用于一些简单的问题，但在这种情况下，它确实是个坏主意，因为如果您修改分配`MyClass`属性的大量属性，它可能会对性能产生很大影响。

另一种方法是使用 EF 的挂钩来实现和保存更改。您将需要处理`ObjectContext.ObjectMaterialized`事件（您可以`ObjectContext`通过`DbContext`由`IObjectContextAdapter`显式实现`DbContext`）。在此事件处理程序中，您将使用字符串属性的值并将其内容反序列化为`MyClass`属性。您还必须覆盖`DbContext.SaveChanges`在哪里查找`Message`应该插入或更新的所有实例，并使用它们的`MyClass`属性来获取当前值并将其序列化为字符串属性。

您正在寻找的是一些复杂的映射场景或映射转换。EF 不支持它们，但您可以投票支持我对[Data UserVoice](http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/2639292-support-for-simple-type-mapping-or-mapped-type-con)的建议。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-03-25T14:13:38.340

我会尝试如下：

```
public class Message
{
    [Key]
    public int Id { get; set; }
    public string Title { get; set; }

    [Column(TypeName = "jsonb")]
    [JsonIgnore]
    public string JMyClass { get; set; }

    [NotMapped]
    public MyClass JsonDefinition 
    {
        get => JsonConvert.DeserializeObject<MyClass>(JMyClass );
        set => JMyClass = JsonConvert.SerializeObject(value);
    }
} 
```

# iphone - 试图将视图控制器作为 uiview 加载到 mainvc 的子视图

> ID：11302352
> 
> 赞同：0
> 
> 时间：2012-07-02T23:06:41.177
> 
> 标签：iphone

一个主vc和其他vc以及在main vc中定义其他vc。这些其他 vcs 在他们的类中有 uiviews。现在我如何将这些其他 vcs 作为子视图添加到主 vc

```
- (void)viewDidLoad{
UIView *baseView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];

[self.view addSubview:baseView];
// Displays UIImageView
UIImageView *myImage = [[UIImageView alloc]
                     initWithImage:[UIImage imageNamed:@"ka1_046.png"]];
myImage.frame = CGRectMake(0, 0, 320, 460);
[baseView addSubview:myImage]; 
// create the UIToolbar at the bottom of the view controller
toolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 425, 320, 40)];
toolbar.barStyle = UIBarStyleBlackOpaque;
[baseView addSubview:toolbar];

//Add Play Button
self.playButton = [UIButton buttonWithType:UIButtonTypeCustom];
[self.playButton addTarget:self action:@selector(playpauseAction:) forControlEvents:UIControlEventTouchUpInside];
self.playButton.frame = CGRectMake(0, 0, 30, 30);
[self.playButton setImage:[UIImage imageNamed:@"Play Icon.png"] forState:UIControlStateNormal];
[self.playButton setImage:[UIImage imageNamed:@"pause.png"] forState:UIControlStateSelected];
 UIBarButtonItem *play = [[UIBarButtonItem alloc] initWithCustomView:self.playButton];

-(void)playpauseAction:(id)sender {
if([audioPlayer isPlaying])
{
[sender setImage:[UIImage imageNamed:@"Play Icon.png"] forState:UIControlStateSelected];
[audioPlayer pause];
[self pauseTimer];
[self pauseLayer:self.view.layer];

}else{
[sender setImage:[UIImage imageNamed:@"pause.png"] forState:UIControlStateNormal];
[audioPlayer play];
[self resumeTimer];
[self resumeLayer:self.view.layer];
 if(isFirstTime == YES)
{
    self.timer = [NSTimer scheduledTimerWithTimeInterval:11.0
                                        target:self
                                        selector:@selector(displayviewsAction:)
                                         userInfo:nil
                                         repeats:NO];
    isFirstTime  = NO;
}} }

- (void)displayviewsAction:(id)sender{  
 First *first = [[First alloc] init];
 first.view.frame = CGRectMake(0, 0, 320, 480);
 CATransition *transitionAnimation = [CATransition animation];   
 [transitionAnimation setDuration:1];
 [transitionAnimation setType:kCATransitionFade];
 [transitionAnimation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn]];
 [self.view.layer addAnimation:transitionAnimation forKey:kCATransitionFade];
 [baseView addSubview:first.view];
 [self.view addSubview:toolbar];
 [first release]; 
```

如果在 displayviewaction 我做

```
[baseView addSubview:first.view]; 
```

这样根据 playpauseAction 它在 11 秒后将 UIImageView 替换为 first.view 作为子视图。它给出了使用未声明标识符 baseView 的消息。

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T00:34:46.503

//。H

```
@interface ViewController : UIViewController {

UIView *baseView;

}

@property (nonatomic, retain) UIView *baseView; 
```

// .m

```
@synthesize baseView; 
```

制作这部分：

```
- (void)viewDidLoad{
UIView *baseView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];

[self.view addSubview:baseView]; 
```

对此：

```
- (void)viewDidLoad{
self.baseView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];

[self.view addSubview:self.baseView]; 
```

**和**

做这个：

```
[baseView addSubview:first.view]; 
```

对此：

```
[self.baseView addSubview:first.view]; 
```

或者您仍然可以使用上述内容。

那么你就完成了。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T00:37:02.523

您在 -(void) viewDidLoad 中声明 baseView。它的范围仅限于该方法。将其声明为 iVar。

```
@interface YourMainViewController : UIViewController
{
  UIView* baseView;
}

@property (nonatomic,retain) UIView* baseView; 
```

你知道该怎么做。

# ios - 我试图让 UILabel 在 UIScrollView 内滚动，但它不滚动

> ID：11302357
> 
> 赞同：6
> 
> 时间：2012-07-02T23:07:24.500
> 
> 标签：ios, singleton, nsmutablearray

这是在我的 .m

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.scrollView addSubview:self.contentView];
    self.scrollView.contentSize = self.contentView.bounds.size;
    NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];

    NSMutableArray *arr = [[NSMutableArray alloc]init];
    arr = [Singleton getArray];

    NSString *str = [arr componentsJoinedByString:@"\n"];
    summaryLabel.text = str;
} 
```

这是在我的 .h

```
@interface TotalViewController : UIViewController
{
    UIScrollView *scrollView;
    UIView *contentView;

}
@property (nonatomic, retain) IBOutlet UIScrollView * scrollView;
@property (nonatomic, retain) IBOutlet UIView       * contentView;
@property (nonatomic,strong) IBOutlet UILabel       * summaryLabel; 
```

我的 Label 连接到 View Controller，我的 contentView 连接到 View Controller，我的 summaryLabel 连接到 View Controller。我需要标签滚动，但它不是。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-02T23:12:11.800

如果您只想要一个可滚动的标签，一个非常简单的答案是使用 UITextView 代替（[参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextView_Class/Reference/UITextView.html)）。禁用编辑，你会得到一个可滚动的标签。

（几乎一字不差地摘自：[如何向 UILabel 添加滚动功能](https://stackoverflow.com/questions/8967842/how-to-add-a-scroll-function-to-a-uilabel)）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-02T23:26:53.307

如果 UIScrollView 的内容不大于其可见区域，则它不会滚动。考虑到您在设置滚动视图的 contentSize 后将文本分配给标签，这不太可能正确发生。我会尝试这样的事情......

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.scrollView addSubview:summaryLabel];

    .....

    summaryLabel.text = str;

    // Assuming your label has numberOfLines = 0, and you want to scroll vertical
    CGSize maxSize = CGSizeMake(summaryLabel.frame.size.width, CGFLOAT_MAX);
    CGSize labelSize = [summaryLabel sizeThatFits:maxSize];
    scrollview.contentSize = labelSize;
} 
```

# html - 整数的 HTML 表单的输入类型

> ID：11302360
> 
> 赞同：42
> 
> 时间：2012-07-02T23:07:47.297
> 
> 标签：html

下面的代码来自一个 HTML 表单。如果输入应该是整数，我是否需要更改“类型”？

```
<div class="friend2title">
    <label for="url">Add points:</label>
</div> 
<div class="friend2field">
    <input name="state" type="text" id="state" maxlength="150">
</div> 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2015-11-02T15:53:01.797

```
<input type="number" step="1" ... 
```

通过添加`step`属性，您可以将输入限制为整数。

当然，您也应该始终在服务器上进行验证。除了在严格控制的条件下，从客户那里收到的所有东西都需要被视为可疑。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2017-04-24T01:26:43.990

这可能会有所帮助：

```
<input type="number" step="1" pattern="\d+" /> 
```

`step`是为了方便（并且可以设置为另一个整数），但`pattern`会进行一些实际的强制执行。

请注意，由于`pattern`匹配整个表达式，因此不必将其表示为`^\d+$`.

即使有这个表面上严格的正则表达式，Chrome 和 Firefox 的实现有趣地允许`e`这里（可能是科学记数法）以及`-`负数，Chrome 也允许，`.`而 Firefox 更严格地拒绝，除非`.`后面只有 0。（Firefox 在输入失去焦点时将该字段标记为红色，而 Chrome 不允许您输入不允许的值。）

因为，正如其他人所观察到的那样，应该始终在服务器上进行验证（如果在客户端本地使用该值或希望阻止用户往返于服务器，则也应在客户端上进行验证）。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-07-02T23:09:09.683

如果您使用的是 HTML5，则应使用输入类型`number`。如果您使用的是 xhtml 或 html 4，则输入类型应为`text`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-02T23:12:48.603

在 HTML5 之前，**input type="text"**仅表示插入自由文本的字段，无论您想要什么。这是你必须做的验证工作，以保证用户输入一个有效的数字

如果您使用的是 HTML5，则可以使用新的输入类型，其中一种是自动验证文本输入的**数字**，并强制它为数字

但请记住，如果您正在构建服务器端应用程序（例如 php），您仍然需要验证该端的输入（确保它确实是一个数字），因为破解 html 和更改非常容易输入类型，删除浏览器验证

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-09-03T13:14:32.763

那这个呢：

```
<input type="number" step="1" onchange="this.value = parseInt(this.value);"> 
```

它只**需要你写的任何内容，并尝试从中生成一个整数**（如果它不能生成一个整数，它只会将其留空）。

另外，假设您要输入 0 到 20 之间的数字：

```
<input type="number" step="1" onchange="this.value = Math.max(0, Math.min(20, parseInt(this.value)));"> 
```

这样你就可以防止人们在边界之外写数字（这**不会**被你的标准`min=`和阻止`max=`）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-02-14T00:18:51.117

您应该将类​​型更改为数字如果您首先接受小数并在 keyUp 上删除它们，您可能会解决这个问题......

```
$("#state").on('keyup', function(){
    $(this).val($(this).val().replace(".", ''));
}) 
```

或者

```
$("#state").on('keyup', function(){
    $(this).val(parseInt($(this).val()));
}) 
```

这将删除句点，但没有“整数类型”。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-02T23:11:40.287

不，这与输入的数据类型无关。它指定[要创建的控件类型](http://www.w3.org/TR/html401/interact/forms.html#input-control-types)：

> type = text|password|checkbox|radio|submit|reset|file|hidden|image|button [CI] 此属性指定要创建的控件类型。此属性的默认值为“文本”。

* * *

## 回答 #8

> 赞同：-8
> 
> 时间：2012-07-02T23:13:46.463

即使您想接受数字作为输入，我也建议您使用该`text`类型。

```
<input type="text" name"some-number" /> 
```

客户端运行一些 jQuery 验证来验证它是一个数字。

然后在您的服务器端代码中，运行一些验证以验证它实际上是一个数值。

# java - 通过 RFC 5987 处理带有空格的文件名* 参数会导致文件名中出现“+”

> ID：11302361
> 
> 赞同：6
> 
> 时间：2012-07-02T23:08:01.567
> 
> 标签：java, http, utf-8, filenames, content-disposition

我有一些我正在处理的遗留代码（所以不，我不能只使用带有编码文件名组件的 URL），允许用户从我们的网站下载文件。由于我们的文件名通常使用多种不同的语言，它们都以 UTF-8 格式存储。我编写了一些代码来处理将 RFC5987 转换为正确的 filename* 参数。在我有一个包含非 ascii 字符的文件名**和**空格。根据 RFC，空格字符不是 attr_char 的一部分，因此它被编码为 %20。我有新版本的 Chrome 和 Firefox，它们都在下载时转换为 %20 到 +。我尝试不编码空间并将编码的文件名放在引号中并得到相同的结果。我已经嗅探了来自服务器的响应，以验证 servlet 容器没有与我的标头混淆，并且它们对我来说看起来是正确的。RFC 甚至有包含 %20 的示例。我是否遗漏了什么，或者所有这些浏览器都有与此相关的错误？

提前谢谢了。我用来编码文件名的代码如下。

彼得

```
public static boolean bcsrch(final char[] chars, final char c) {
    final int len = chars.length;
    int base = 0;
    int last = len - 1; /* Last element in table */
    int p;

    while (last >= base) {
        p = base + ((last - base) >> 1);

        if (c == chars[p])
            return true; /* Key found */
        else if (c < chars[p])
            last = p - 1;
        else
            base = p + 1;
    }

    return false; /* Key not found */
}

public static String rfc5987_encode(final String s) {
    final int len = s.length();
    final StringBuilder sb = new StringBuilder(len << 1);
    final char[] digits = {'0','1','2','3','4','5','6','7','8','9','A','B','C','D','E','F'};
    final char[] attr_char = {'!','#','$','&','\'','+','-','.','0','1','2','3','4','5','6','7','8','9','A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z','^','_','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','|', '~'};
    for (int i = 0; i < len; ++i) {
        final char c = s.charAt(i);
        if (bcsrch(attr_char, c))
            sb.append(c);
        else {
            final char[] encoded = {'%', 0, 0};
            encoded[1] = digits[0x0f & (c >>> 4)];
            encoded[2] = digits[c & 0x0f];
            sb.append(encoded);
        }
    }

    return sb.toString();
} 
```

**更新**

这是我在评论中提到的带有空格的中文文件的下载对话框的屏幕截图。

![下载对话框的屏幕截图](../Images/c77bf545787d6ddae7072b17fd22fd6d.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-03T09:14:34.970

因此，正如 Julian 在评论中指出的那样，我犯了一个新手 Java 错误并且忘记了将字符转换为字节（因此我编码了字符的代码点而不是字符的字节表示），因此编码完全不正确。这在 RFC 5987 中明确提及为一项要求。我将发布更正的代码以进行转换。一旦编码正确，浏览器就可以正确识别文件名*参数，并且用于下载的文件名是正确的。

下面是对字符串的 UTF-8 字节进行操作的更正转义代码。给我带来麻烦的文件名现在正确编码如下所示：

内容处置：附件；文件名*=UTF-8''博物馆%20%E5%8D%9A%E7%89%A9%E9%A6%86.jpg

```
public static String rfc5987_encode(final String s) throws UnsupportedEncodingException {
    final byte[] s_bytes = s.getBytes("UTF-8");
    final int len = s_bytes.length;
    final StringBuilder sb = new StringBuilder(len << 1);
    final char[] digits = {'0','1','2','3','4','5','6','7','8','9','A','B','C','D','E','F'};
    final byte[] attr_char = {'!','#','$','&','+','-','.','0','1','2','3','4','5','6','7','8','9',           'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z','^','_','`',                        'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','|', '~'};
    for (int i = 0; i < len; ++i) {
        final byte b = s_bytes[i];
        if (Arrays.binarySearch(attr_char, b) >= 0)
            sb.append((char) b);
        else {
            sb.append('%');
            sb.append(digits[0x0f & (b >>> 4)]);
            sb.append(digits[b & 0x0f]);
        }
    }

    return sb.toString();
} 
```

# java - 读取文件：文件名不起作用

> ID：11302363
> 
> 赞同：0
> 
> 时间：2012-07-02T23:08:10.543
> 
> 标签：java, file-io

在下面的代码中，我不断收到错误“（没有这样的文件或目录）”

```
public void readFile() throws IOException {
        reader = new BufferedReader(new FileReader("map1.txt"));

    while(true) {
        String line = reader.readLine();
        System.out.println(line);
        if(line == null) {
            reader.close();
            break;
        }
    }
} 
```

当我尝试真正阅读图像/任何东西时，我得到了同样的错误。但是在我看到的如何使用文件阅读器的示例中，它们都只是输入文件的名称，没有别的。在这种情况下，地图位于名为 Maps 的 src 文件中的单独文件夹中。我尝试了各种规格的“/Maps/map1.txt”，但似乎没有任何效果。**如何读取此文件？**

（我也在 Mac 上。我不知道这是否会改变事情。）

**更新**

似乎这是netBeans的错。它只查看项目文件夹。我想我会在以后开始另一个话题，询问如何解决这个问题。谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T23:13:53.093

`/Maps/map1.txt`是一个绝对路径，从顶层目录开始。尝试`./Maps/map1.txt`，只要您从 Maps 上方的目录运行 java 应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T23:42:44.937

我提取了一些可能有用的程序片段：

```
FileInputStream configFile = new FileInputStream("javalogging.properties"); 
```

在上述情况下，文件位于*src*文件夹的同一级别（这意味着，在源文件夹之外）

```
 FileInputStream configFile = (FileInputStream)
              MyClass.class.getResourceAsStream("/javalogging.properties"); 
```

在上述情况下，请确保您将替换`MyClass`为您的类名，并将文件放在源文件夹中（如果您计划以属性位于 jar 文件中的方式部署应用程序，这很有用）

使用 bufferedReader，我使用了整个路径，如下所示：

```
File file = new File(filePath+fileName);
BufferedReader r = new BufferedReader (new FileReader(file.getAbsoluteFile())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T23:22:39.097

> 在这种情况下，地图位于名为 Maps 的 src 文件中的单独文件夹中。

我假设您有一个名为的文件夹`src`，其中包含您的 java 文件；在同一个文件夹中有一个名为的文件夹`Maps`，其中包含`map1.txt`.

现在，

> reader = new BufferedReader(new FileReader("map1.txt"));

打算尝试打开**当前目录**下的文件map1.txt 。这是哪个目录取决于您使用的 IDE；但你应该能够改变它。

如果您将其更改为包含该文件的文件夹，它应该可以工作。

# php - 递归调用后PHP成员更改

> ID：11302364
> 
> 赞同：0
> 
> 时间：2012-07-02T23:08:14.950
> 
> 标签：php, class, recursion, member

这是一个简化的代码：

```
Class Bar
{
    static $foo;

    public function __construct(Foo $foo)
    {
        $this->foo = $foo;
        $this->loop($foo,1);
    }

    public function loop(Foo $foo, $index)
    {   

        $a = $foo->a;
        if ($index < 3)
        {
            $a[$index]->var2 += $a[$index]->var1;
            $a[$index]->var1 = 0;
            $foo->dump();
            $this->foo->dump();

            $this->loop(new Foo($a),++$index);
        }
    }
}

$p = array(
      new Baz(100,200),
      new Baz(300,400),
      new Baz(400,200),
      new Baz(600,400)
    );

new Bar(new Foo($p)); 
```

这段代码有两个问题。也许更多;）

1.  看起来 var1 的重新分配对 $foo 有影响。我希望在我将 $foo->a 传递给 $a 之后它没有。

2.  在构造中，我将 $foo 分配给 $this->foo 但是在每个循环之后它都会改变它的值。有人能指出 $this->foo 的值在哪里变化吗？

**Foo 类的**更多信息定义****

 **```
Class Foo
{
    public $a;
    public function __construct($a)
    {
        $this->a = $a;
    }
    public function dump($title="")
    {
        echo "<br/>================".$title."=============================";
        echo "<table>";
        for ($i=0; $i<sizeof($this->a); $i++)
        {
            echo "<tr>";
            echo "<td>" . $this->a[$i]->var1 . "</td>";
            echo "<td>" . $this->a[$i]->var2 . "</td>";
            echo "</tr>";

        }
        echo "</table>";
    }

} 
```

巴兹班

```
Class Baz
{
    public $var1;
    public $var2;
    public function __construct($var1, $var2)
    {
        $this->var1=$var1;
        $this->var2=$var2;
    }

} 
```

转储结果：

```
================IM foo dump=============================
100 200
0   700
400 200
600 400

================Im $this->foo dump=====================
100 200
0   700
400 200
600 400

================IM foo dump=============================
100 200
0   700
0   600
600 400

================Im $this->foo dump======================
100 200
0   700
0   600
600 400 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T23:22:00.887

您看到的行为是正常的。在 PHP 中将对象分配给变量时，传递的是引用，而不是值；如果您想拥有副本而不是引用，则必须[创建一个 clone](http://php.net/manual/en/language.oop5.cloning.php)。

例如，在以下场景中：

```
$blub = new Bar();
$a = $blub;
$b = $blub;
$c = $blub; 
```

$a, $b, $c 可以说只是“别名”，指向 $blub; 这意味着设置 $a 的任何成员对 $blub 有直接影响，因此对 $b 和 $c 也有影响。

但是，通过使用关键字克隆，您可以获得您正在寻找的结果：

```
$blub = new Bar();
$a = clone $blub;
$b = clone $blub;
$c = clone $blub; 
```

这里我们显式地创建了独立的副本，因此修改 $a 的内容不会改变 $blub、$b 或 $c。

最后，这是您的示例类如何实现克隆以处理独立对象的样子：

```
Class Bar
{
    public $foo;

    public function __construct(Foo $foo)
    {
        $this->foo = $foo;
        $this->loop(clone $foo, 1);
    }

    public function loop(Foo $foo, $index)
    {   
        $a = array();

        foreach($foo->a as $key => $subobject) {
            $a[$key] = clone $subobject;
        }

        if ($index < 3)
        {
            $a[$index]->var2 += $a[$index]->var1;
            $a[$index]->var1 = 0;
            $foo->dump();
            $this->foo->dump();

            $this->loop(new Foo($foo->a),++$index);
        }
    }
}

new Bar(new Foo($p)); 
```

## 更新

由于传递了一个对象数组，因此仅仅克隆 $foo 是不够的：

```
$p = array(
      new Baz(100,200),
      new Baz(300,400),
      new Baz(400,200),
      new Baz(600,400)
    ); 
```

即使您克隆了托管数组的对象，数组中的对象本身仍然指向相同的对象，因为数组只是保存引用；克隆对象时，会复制数组成员及其内容，包括引用。理解引用和值的概念需要一点时间，但最终你会发现一切都像一个谜题：)

无论如何，在这种特定情况下，必须先克隆数组中的对象，然后再使用它们，这可以通过 Bar::loop 函数中的以下循环轻松实现：

```
 foreach($a as $key => $subobject) {
            $a[$key] = clone $subobject;
        } 
```

请参阅上面的课程以获取完整的编辑。**

# git - 新的 Git 分支，没有对先前提交的更改

> ID：11302365
> 
> 赞同：1
> 
> 时间：2012-07-02T23:08:24.687
> 
> 标签：git, repository, branch, git-revert

我当前的分支看起来像：

```
 D  
    /
H--A--B--C 
```

我试图弄清楚如何生成一个新的 git 分支，这将使新的 git repo 看起来像：

```
 D  
    /
H--A--B--C  
    \
     C 
```

这可能吗？我曾考虑过使用 reset ，但这意味着 C 的更改也会丢失，因此请寻找替代方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T00:15:04.077

好的，所以找到了一种方法来做到这一点。

我创建了一个带有 A 的新分支：

```
git branch new-branch <A sha1> 
```

然后我使用cherry pick在新分支中将C与A合并：

```
git checkout new-branch
git cherry-pick <C sha1> 
```

这使得回购与我需要的分支。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T23:19:57.567

```
 C                     A--D  
   /                     /
  A*--D                 H--A--B--C  
 /                       \
H--A--B--C                A--C
    (1)                     (2) 
```

因为`(1)`是等价的，如果`(2)`你可以`git checkout <commit sha1 of A*> -b your-new-branch`

# database - 将 PostgreSql 迁移到 Oracle，处理 CITEXT 数据类型

> ID：11302368
> 
> 赞同：0
> 
> 时间：2012-07-02T23:08:33.267
> 
> 标签：database, postgresql, oracle11g

我有一个最初使用 PostgreSql 构建的应用程序。在适当的时候，我们现在需要支持 Oracle。我正在使用 Liquibase 进行 DB 版本控制和 Hibernate ORM 工具。PostgreSql 模式中的某些列具有 CITEXT 数据类型。它需要在数据库端具有相同的功能，而不进行任何代码更改，以实现类似于 CITEXT 提供的功能。而且，我在这里明白我将不得不在 Oracle 中使用 VARCHAR2(xx)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:05:39.330

`CITEXT`只是`lower()`在比较之前运行；

1.  您可以通过隐式包装来执行文档中所说的操作，`lower()`但这很冗长且本质上是不安全的。
2.  添加一个[TRIGGER](http://docs.oracle.com/cd/E14072_01/appdev.112/e10472/create_trigger.htm)以以小写形式存储文本，但您仍然必须将静态字符串保持为小写。
3.  Oracle 和 PostgreSQL 都支持创建操作符。如果两个引擎的 SQL 需要相同，您可以定义一个新的[Oracle OPERATOR](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_6004.htm)和[PostgreSQL OPERATOR](http://www.postgresql.org/docs/9.1/static/sql-createoperator.html)。这也伴随着您的 SQL 将变得不那么可移植或在不了解您的运算符的其他数据库上产生意外结果的警告。
4.  您可以在会话中临时更改 Oracle 的环境，`alter session set nls_comp=ansi;`并将所有内容都作为小写进行比较。

# payment-gateway - 商户信用卡交易记录

> ID：11302375
> 
> 赞同：-1
> 
> 时间：2012-07-02T23:09:27.810
> 
> 标签：payment-gateway, payment, credit-card

我正在寻找一个支付网关，它可以让我检查所有信用卡交易的历史记录并生成一份报告。

是否有任何服务可以让我代表商家获取此信息（金额、日期、时间、用户 ID），而不管使用的信用卡如何？

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T23:27:38.537

Authorize.Net 提供了一个[交易详情 API](http://developer.authorize.net/api/transaction_details/)，允许您访问该数据以生成报告。

# mysql - LAST_INSERT_ID() 返回多行 0？

> ID：11302377
> 
> 赞同：3
> 
> 时间：2012-07-02T23:09:44.203
> 
> 标签：mysql, sql, database, debugging

现在在 phpMyAdmin 中工作：

`order`表结构：

```
OrderID     int(11)  auto_increment
CustomerID  varchar(50)
BillAddr    varchar(200)
ShipAddr    varchar(200)
Date            date
Total           double 
```

该表目前有 4 行数据，具有不同的 OrderID。

SQL：

```
SELECT LAST_INSERT_ID() FROM `order` 
```

结果：

```
LAST_INSERT_ID()
0
0
0
0 
```

我期待第四行`OrderID`- 只有一个数字，但 phpMyAdmin 中的每一行都为 0。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T23:12:20.473

`LAST_INSERT_ID()`返回最后插入行的 id 并且不绑定到任何表。因此，如果您创建一个新行：

```
INSERT INTO table VALUES('a', 'b', 'c'); 
```

它将返回最后一个 id（无论新主键具有什么值）。

```
SELECT LAST_INSERT_ID();
=> 123 
```

有关详细信息，请查看[**手册**](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)：

> LAST_INSERT_ID()（不带参数）返回一个 BIGINT（64 位）值，表示由最近执行的 INSERT 语句为 AUTO_INCREMENT 列设置的第一个自动生成的值，以影响此类列。例如，插入生成 AUTO_INCREMENT 值的行后，您可以像这样获取值：

如果您只想获取表中的最后一个 ID，您可以这样做：

```
SELECT id FROM table ORDER BY id DESC LIMIT 1; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T23:15:06.523

如[手册](http://dev.mysql.com/doc/en/information-functions.html#function_last-insert-id)所述：

> [`LAST_INSERT_ID()`](http://dev.mysql.com/doc/en/information-functions.html#function_last-insert-id)（不带参数）返回一个[`BIGINT`](http://dev.mysql.com/doc/en/integer-types.html)（64 位）值，该值表示由*最近执行*的语句为列设置的*第一个*自动生成的值，以影响这样的列。例如，插入产生值的行后，可以这样获取值：`AUTO_INCREMENT` *[`INSERT`](http://dev.mysql.com/doc/en/insert.html)`AUTO_INCREMENT`*
> 
>  *```
> mysql> SELECT LAST_INSERT_ID(); 
>         -> 195
> ```*

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T09:04:42.857

像这样做：

```
INSERT INTO `one`(`id`, `name`) VALUES (NULL,'shivam');
select last_insert_id(); 
```

插入后不执行其他查询，它们应该一起执行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-01T15:50:11.087

我有同样的问题，解决方案是同时进行查询。换句话说，第一个查询和第二个（last_insert_id）查询应该同时执行。不作为两种不同的执行方式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-18T14:37:48.820

通过指示一个表，您对所述表中的每一行重复选择语句。

除了重复相同的值之外，它不会影响您的查询结果。

如果在 phpmyadmin 中运行，您可能需要检查 Persistent Connections 是否设置为 TRUE，否则您将始终收到 0 作为 LAST_INSERT_ID() 的结果。*

# php - 从 MySQL 返回一行

> ID：11302379
> 
> 赞同：6
> 
> 时间：2012-07-02T23:09:50.387
> 
> 标签：php, mysql, row, unique, fetch

业余问题，但我一直想知道。从 MySQL 查询中选择一行的 PHP 是什么？AKA 您正在通过唯一 ID 选择某些东西（您知道只有一行与您的请求匹配）并且只想获得该值。你还需要使用while循环和mysql_fetch_row吗？

```
$query = "SELECT name,age FROM people WHERE uid = '2'";
$result = mysql_query($query);

// what php is used to return the name and age?  preferably without a loop? 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-02T23:10:48.243

添加`limit 0,1`和 PHP 7 使用**mysqli**

```
$query = "SELECT name,age FROM people WHERE uid = '2' LIMIT 0,1";
$result = mysqli_query($query);
$res = mysqli_fetch_assoc($result);

echo $res["age"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T23:14:42.157

如果`uid`是你的主键，或者它有一个`unique`约束，你可以简单地调用`mysql_fetch_row($res)`一次。

如果你想验证你是否真的得到了结果，你可以检查 if `mysql_num_rows($res) == 1`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T23:14:26.510

不需要任何循环，只需调用函数从查询结果集中提取一行：

```
$query = "SELECT name,age FROM people WHERE uid = '2'";
$result = mysql_query($query);
$row = mysql_fetch_assoc( $result );
var_dump( $row ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T23:53:21.327

添加**[`LIMIT`](http://php.about.com/od/mysqlcommands/g/Limit_sql.htm)**您的查询。例如，

```
SELECT name,age FROM people WHERE uid = '2' LIMIT 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-05T21:51:44.090

*这是另一个例子：*

```
<?php
    mysql_connect("server","user","password")
    or die ('Connection failed: ' . mysql_error() ); 
    //
    mysql_select_db ("database")
    or die ('Selection failed: ' . mysql_error());
    //
    $portaQuery = "SELECT user_name FROM table_users";
    //
    $portaResult = mysql_query($portaQuery) 
    or die ('Query failed: ' . mysql_error());
    //
    $displayUserName = mysql_result ($portaResult, 0, "user_name" );
    //
    echo $displayUserName;
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-04T10:26:14.947

**mysql_fetch_assoc**这个扩展在 PHP 5.5.0 中被弃用，在 PHP 7.0.0 中被移除。而是使用**mysqli_fetch_assoc** - 这将获取结果行作为关联数组。

**示例 1：面向对象的风格**

```
$query = "SELECT Name, CountryCode FROM City ORDER by ID DESC LIMIT 1";
$result = $mysqli->query($query);
$row = $result->fetch_assoc();
echo $row['Name']; 
```

**示例 2：程序风格**

```
$link = mysqli_connect("localhost", "my_user", "my_password", "dbname");

/* check connection */
if (mysqli_connect_errno()) {
printf("Connect failed: %s\n", mysqli_connect_error());
exit();
}
$query = "SELECT Name, CountryCode FROM City ORDER by ID DESC LIMIT 1";
if ($result = mysqli_query($link, $query)) {
/* fetch associative array */
$row = mysqli_fetch_assoc($result);
echo $row['Name'];
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-04T10:05:52.210

1.  使用此代码。这将返回一个具有所有属性的对象。

`fetch_object`=> 将结果集的当前行作为对象返回

```
$sql = "SELECT * from contacts where id=1";
$result = $conn->query($sql);
$allData =$result -> fetch_object();
var_dump($allData); 
```

2.  使用此代码。这将返回一个关联数组

`fetch_assoc`=> 获取结果行作为关联数组

```
$sql = "SELECT * from contacts where id=1";
$result = $conn->query($sql);
$allData =$result -> fetch_assoc();
var_dump($allData); 
```

您可以使用`fetch_assoc`或`fetch_object`根据您的需要。

# css - CSS3创建背景图像=无效的属性值

> ID：11302381
> 
> 赞同：1
> 
> 时间：2012-07-02T23:10:04.593
> 
> 标签：css, background

我正在尝试使用 CSS3 渐变创建一个斜条纹背景图案，但我似乎无法让它工作。这是我正在使用的代码：

```
body {
background-color: gray;
background-image: repeating-linear-gradient(135deg, transparent, transparent 35px,    rgba(255,255,255,.5) 35px, rgba(255,255,255,.5) 70px);
} 
```

它只是显示一个坚实的灰色背景。当我检查元素时，它显示 background-image 是一个无效的属性值。我在 Mac 上编码，并在 Firefox 13.0.1 和 Chrome v20 上进行了测试。

有谁知道问题是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T23:36:20.900

您的浏览器可能不支持无前缀属性。尝试使用供应商前缀：

```
html, body { 
    min-height: 100% 
}
body {
    background-color: gray;
    background-image: -webkit-repeating-linear-gradient( 135deg, transparent, transparent 35px, rgba(255,255,255,.5) 35px, rgba(255,255,255,.5) 70px);
    background-image: -moz-repeating-linear-gradient( 135deg, transparent, transparent 35px, rgba(255,255,255,.5) 35px, rgba(255,255,255,.5) 70px);
    background-image: -ms-repeating-linear-gradient( 135deg, transparent, transparent 35px, rgba(255,255,255,.5) 35px, rgba(255,255,255,.5) 70px);
    background-image: -o-repeating-linear-gradient( 135deg, transparent, transparent 35px, rgba(255,255,255,.5) 35px, rgba(255,255,255,.5) 70px);
    background-image: repeating-linear-gradient( 135deg, transparent, transparent 35px, rgba(255,255,255,.5) 35px, rgba(255,255,255,.5) 70px);
}​ 
```

小提琴：http: [//jsfiddle.net/fefhz/7/](http://jsfiddle.net/fefhz/7/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-02T23:30:31.793

有什么理由必须在 CSS3 中？为什么不使用小图像并重复它？只需使用生成器，您就可以省去很多麻烦吗：http: [//www.stripegenerator.com/](http://www.stripegenerator.com/)

# android - 自动化移动 Flex 应用程序测试

> ID：11302383
> 
> 赞同：0
> 
> 时间：2012-07-02T23:10:17.087
> 
> 标签：android, apache-flex, automated-tests

我有一个专为在 iOS 和 Android 设备上使用而构建的 flex 应用程序。我见过一个名为 MonkeyTalk 的自动化工具，用于在模拟器或真实设备上测试移动应用程序。我还看到了一个名为 FlexMonkey 的自动化工具，用于测试 Flex 应用程序。有没有人尝试过使用 MonkeyTalk 来测试 Flex 应用程序？FlexMonkey 是否能够连接到移动设备？

一个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T23:51:55.787

来自 MonkeyTalk 常见问题解答（大约 2012 年 12 月）

(http://www.gorillalogic.com/book/monkeytalk-faq)

问：我可以测试桌面应用程序吗？视窗电话 7？黑莓？灵活移动？

答：不，从 MonkeyTalk Beta5 开始，我们支持 iOS、Android、Flex（**但不包括 Flex Mobile**）、桌面 Web 浏览器（仅限 Beta5 中的 Firefox）和移动 Web 的代理。话虽如此，我们希望在未来增加更多的代理。

# javascript - 正在收听 Aloha 编辑器“aloha-smart-content-changed”活动？

> ID：11302385
> 
> 赞同：6
> 
> 时间：2012-07-02T23:10:24.597
> 
> 标签：javascript, events, aloha-editor

根据 Aloha Editor 文档，您可以侦听“aloha-smart-content-changed”事件以获取帮助，例如，将数据保存到您正在使用的任何持久性机制中。这是我正在尝试做的一个例子：

```
<html>
  <head>
    <title>Aloha Event Testing</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="http://cdn.aloha-editor.org/current/lib/aloha.js" data-aloha-plugins="common/format, common/list, common/link, common/highlighteditables"></script>
    <link href="http://cdn.aloha-editor.org/current/css/aloha.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript">
      Aloha.ready( function() {
        var $ = Aloha.jQuery;
        $('.editable').aloha();
      });
      $(document).ready(function() {
        $('.editable').bind('aloha-smart-content-changed', function() {
          console.log('Aloha smart event handled.');
        });
      });
    </script>
  </head>
  <body>
    <div class="editable"></div>
  </body>
</html> 
```

但是处理程序永远不会触发。与 Aloha 合作过的任何人都知道如何正确收听该事件吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T00:54:18.987

哇，这方面的文档很差。但我想我让它工作了。看起来您将 Aloha.ready() 方法中的事件处理程序绑定到 Aloha 对象本身。

```
Aloha.ready( function() {
        var $ = Aloha.jQuery;
        $('.editable').aloha();

    Aloha.bind('aloha-smart-content-changed', function(event, editable) {
          console.log('Aloha smart event handled.');
        });        
}); 
```

[在这里](http://aloha-editor.org/builds/development/alohaeditor-0.21.0-dev-SNAPSHOT-source-20120330-012607/doc/guides/source/events.textile)找到了更多关于它的信息，这是我找到[绑定事件](https://github.com/alohaeditor/Aloha-Editor/issues/445)示例的地方。

还在**[jsfiddle中测试了这个](http://jsfiddle.net/rrn8x/3/)**

希望有帮助

# django - 用于 POST 数据的 Django 网络服务

> ID：11302388
> 
> 赞同：1
> 
> 时间：2012-07-02T23:10:41.677
> 
> 标签：django, post

我正在尝试在 Django 中创建 Web 服务。由于某种原因，它在 GET 请求中工作，但不是作为 POST（这是我的要求）。我有以下网址：

```
url(r'^rest/user/(.*)/(.*)/$', 'rest.views.user.user') 
```

因此，如果用户要向 发送消息`/rest/user/ANY_CHARACTER/ANY_CHARACTER/`，它将转到以下函数：

```
def user(request, string1, string2):
    if request.method == "POST":
        return HttpResponse(string1 +  ' ' + string2)
    else:
        return HttpResponse('error') 
```

每次我发送 GET 请求时，我都会收到`error`（这是正确的），但每次我发送与 POST 相同的 URL 时，我都会收到 HTTP 500 错误。我在这里缺少什么吗？

**编辑**

终端中的错误日志有以下内容： `[02/Jul/2012 19:13:57] "POST /rest/user/hi/hi HTTP/1.1" 500 61994`

但是，当我发送与 GET 相同的命令时，我没有收到任何错误……这很奇怪。

**编辑 1**

当我发送 POST 请求时，我注意到以下错误，它适用于所有其他类型：

```
<p>Reason given for failure:</p>
<pre>
CSRF token missing or incorrect.
</pre>

<p>In general, this can occur when there is a genuine Cross Site Request Forgery, or when
<a href='http://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ref-contrib-csrf'>Django's
CSRF mechanism</a> has not been used correctly.  For POST forms, you need to
ensure:</p> 
```

我的问题是......我如何处理这个 web 服务请求？抱歉，尝试搜索此内容，但有没有办法绕过 CSRF 处理 RESTful Web 服务请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T23:28:35.670

你可以这样做：

```
from django.views.decorators.csrf import csrf_exempt, csrf_protect

@csrf_exempt
def user(request, string1, string2):
    if request.method == "POST":
        return HttpResponse(string1 +  ' ' + string2)
    else:
        return HttpResponse('error') 
```

我应该补充一点，这`csrf_exempt`可能不安全……但会起作用。

# java - 如何通过外部更新保持您的休眠级别 1 缓存一致？

> ID：11302389
> 
> 赞同：4
> 
> 时间：2012-07-02T23:10:46.980
> 
> 标签：java, mysql, hibernate, caching, orm

请原谅我这个问题，但到目前为止我无法通过我的研究找到任何解决方案。（至少没有什么对我有帮助）

**我的情况：**

*   我正在将休眠用于 vaadin 网络服务
*   网络服务正在获取上传的文档，并通过休眠将它们放在我的 MySQL 数据库中
*   后台的计算服务（稍后可能在另一台服务器上的单独进程）对上传的文档执行计算任务，并将结果再次添加到数据库中
*   网络服务识别数据库中的分析结果并将其显示给用户

**我的问题：**

*   我的问题是 1 级休眠缓存
*   计算服务启动后，他不会对后来更新的文档进行任何计算，因为当他完成给定的搜索查询时，它们不会出现在他的缓存中。
*   我的网络服务覆盖在计算服务器中进行了更改，因为它也不知道任何关于它的信息。

我知道休眠 1 级缓存是造成这种行为的原因（顺便说一下，2 级缓存不活动）。

**到目前为止我尝试过的**

*   我读了很多书并尝试了几件事，例如在各个地方调用 session.clear() 。这经常给我“会话已关闭”异常并且没有帮助我（尽管我读到有人提到这有助于解决他们的问题）

*   我试图确保会话最终总是关闭，但这并没有解决问题，而且我读到我不需要手动关闭会话，在我使用 transaction.commit() 之后（我听说这是每个请求模式的会话标准）

*   每次我的计算服务需要搜索数据库时，我都尝试关闭我的 sessionfactory 并重新打开它。如果我也在我的 Web 服务上执行此操作，这部分工作并且可能全部工作，但这对我来说似乎不是一个很好的解决方案（也消耗内存，不是吗？）

*   我尝试添加

> <property name="hibernate.connection.isolation">2</property>

到我的 hibernate.cfg.xml，但这也只是部分起作用。使用这个我的计算服务执行计算任务，但每次通过 Web 服务上传新数据时，他的更改都会再次被覆盖。因此检测到了新的上传，但是一旦有新的上传到达，所有已经分析过的文档都会再次被分析。

*   我读到了一个名为“setForceCacheRefresh(boolean forceCacheRefresh)”的查询方法（例如从这里[http://www.dil.univ-mrs.fr/~massat/docs/hibernate-2/api/net/sf/hibernate/Query .html#setForceCacheRefresh%28boolean%29](http://www.dil.univ-mrs.fr/~massat/docs/hibernate-2/api/net/sf/hibernate/Query.html#setForceCacheRefresh%28boolean%29)），但不知何故我在我的休眠版本中找不到这种方法。虽然很遗憾，描述听起来不错

我一直在思考我管理会话的方式是否不正确。我的 DAO 类有两个方法，在事务的每次开始和结束时都会调用它们。

```
public abstract class DAO {

/**
 * Returns the current hibernate session. Also takes care that there's
 * always an open hibernate transaction when needed.
 * 
 * @return Current hibernate session
 */
public static Session getSession() {
    Session currentSession = HibernateUtil.getSessionFactory()
            .getCurrentSession();
    if (!currentSession.getTransaction().isActive()) {
        currentSession.beginTransaction();
    }

    return currentSession;
}

/**
 * Closes the current hibernate session, if there is one.
 */
public static void closeSession() {
    Session sess = HibernateUtil.getSessionFactory().getCurrentSession();
    if (sess.getTransaction().isActive()) {
        sess.getTransaction().commit();
    }
    ThreadLocalSessionContext.unbind(HibernateUtil.getSessionFactory());
}

} 
```

我也读过一些关于 Optimistic Locking with hibernate 的内容，但我不确定这是否能解决我的问题。我读到乐观锁定只会在缓存对象不是数据库中的对象时抛出异常。但是它是否也加载（刷新）缓存呢？

你是如何在你的休眠中处理这个问题的？你有什么建议我可以做什么，或者我什至在我的 DAO 课程中做错了什么？我对代码示例也很满意。再说一遍：我希望每个进程都知道另一个进程在数据库中所做的更改。（如果可以的话，我什至会禁用第一个缓存，但因为这是不可能的）

**非常感谢您的每一个回答，并认为您正在与我分享**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T23:16:54.140

附加对象实例仅存`Session`在于 Hibernate 中。如果您正确终止事务和会话，一级缓存将被清除。您使用什么模式进行会话管理？会话中？

我问这个，因为你的问题在我看来就像一个会话终止问题。

编辑：

我在您的代码中没有看到 Session.close() 或至少 Session.disconnect() 。据我所知，unbind() 不是自动的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T13:12:01.710

我已经解决了我的问题。

在 Gergely Szilagyi 和他的回答的大力帮助下，第一部分可以得到解决：

> 附加对象实例仅存在于 Hibernate 的 Session 中。如果您正确终止事务和会话，一级缓存将被清除。您使用什么模式进行会话管理？会话中？
> 
> 我问这个，因为你的问题在我看来就像一个会话终止问题。
> 
> 编辑：
> 
> 我在您的代码中没有看到 Session.close() 或至少 Session.disconnect() 。据我所知，unbind() 不是自动的。

（感谢这篇精彩的帖子，如果我可以将几个答案标记为正确，我也会标记你的！）

他的回答让我想到了我的会话管理，我的一些问题通过这个得到了解决。

我的问题的**第二**部分，在我的主要问题中也非常重要的是如何**刷新**一级缓存/使其保持一致。经过大量研究，我发现hibernate Session 类包含一个可以直接从数据库加载对象的方法。

给定要刷新的 Entity 对象实体，您可以执行以下操作：

```
//Call session.evict if this object is currently in the session, otherwise not necessary
//It deletes the object from the session cache (If you don't call this method although this object is currenlty in the session an exception will be thrown
session.evict(entity);
//session.get acccesses the database directly and returns you the actual saved entity
Ent1 updatedEntitEnty = (Ent1) session.get(Ent1.class, entity.getPrimaryUniqueID()); 
```

现在您可以继续使用收到的更新实体。

session.get(...) 是这里最重要的方法，因为它直接访问数据库并忽略缓存。给定的返回对象是保存在数据库中的最新对象。

**注意：还有一个 session.load(...) 方法，在这种情况下没有帮助。load(..) 访问缓存并从那里检索对象，而 get(..) 则正确。**

**因此，如果您想从数据库中检索对象，请不要使用 session.load(...)！**

我希望这个答案在某一天对其他人有所帮助，如果您有任何问题，请与我联系。

# c - 创建自定义版本的 printf

> ID：11302393
> 
> 赞同：2
> 
> 时间：2012-07-02T23:11:24.920
> 
> 标签：c, customization, printf, optional-parameters

创建`snprintf()`具有一些附加功能的版本的最简单方法是什么，例如附加格式说明符以将以下转换重复指定次数？例如，类似的东西`%6a%-3x`会接受`char*`参数列表中的参数，如果 this 指向字符串`"My test string"`，则会打印`"4d 79 20 74 65 73 74 "`。关联的参数将始终是指向适当类型数组的指针。

这是解释格式说明符和可变长度参数列表（其类型取决于格式字符串中的格式说明符）的代码，我希望得到一些帮助，以避免重新发明轮子。

这需要使用普通的老式 C 语言，因为它必须使用 Microchip 的 PIC 的 C30 编译器进行编译。

谢谢 - 罗文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T00:11:20.333

[vsprintf](http://www.cplusplus.com/reference/clibrary/cstdio/vsprintf/ "vsprintf")是您正在寻找的。它允许您编写自己的类似 sprintf 的函数，该函数接受可变数量的参数，然后让您在调用之前执行所需的操作。

这是一个示例，我使用它来实现我自己的 printf 到嵌入式设备中的 USB 端点：

```
#include <stdarg.h>
void uprintf(char *fmt, ...) {
    va_list args;
    va_start(args, fmt);
    vsprintf(str_buffer, fmt, args);
    usb_write(str_buffer);
    va_end(args);
} 
```

在您的情况下，您可以在调用之前“拦截”格式字符串`vsprintf`并将您自己的语法扩展为正确的格式说明符语法，然后将新的格式说明符和变量 arg 列表传递给`vsprintf`.

```
void your_printf(char *fmt, ...) {
    char new_fmt_string[1024];  /* make sure you allocate enough space */
    va_list args;

    /* here, do your transformation on the fmt string */

    va_start(args, new_fmt_string);
    vsprintf(str_buffer, new_fmt_string, args);

    /* now take your fully formatted string and do something with it */

    /* then clean up */
    va_end(args);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T00:16:09.087

最简单的方法可能不是您想要的答案，但它可能是最实用的解决方案：不要这样做。

相反，创建您自己的输出函数来写入缓冲区。

```
// print count bytes from buf into s, but take up no more than n-1 bytes
// returns how many bytes were (or would be) printed
int snprint_hex (char *s, size_t n, const char *buf, size_t count) {
    //...
} 
```

您的代码会更清晰，并且您不必实现神秘的解析代码来处理所有`printf`格式说明符。

# rspec - 如何在 rspec 中使用 padrino 辅助方法

> ID：11302394
> 
> 赞同：2
> 
> 时间：2012-07-02T23:11:36.623
> 
> 标签：rspec, padrino

我正在使用 padrino 和 rspec，我希望能够测试我编写的辅助方法。

我有

# 规范/应用程序/控制器/sessions_controller_spec.rb

```
 describe "POST /sessions" do
    it "should populate current_user after posting correct user/pass" do

      u = User.create({:email=>"john@gmail.com", :password=>"helloworld", :password_confirmation=>"helloworld"})

      user = { 
        email:"john@gmail.com",
        password:"hellowolrd"
      }   
      post '/sessions/new', user
      current_user.should_not == "null"
    end 
  end 
```

# 应用程序/控制器/sessions_controller.rb

```
 post "/new" do
    user = User.authenticate(params[:email], params[:password])
    if user
      session[:user_id] = user.id
      redirect '/' 
    else
      render "sessions/new"
    end 
  end 
```

# 应用程序/helpers/sessions_helper.rb

```
Testing.helpers do
  def current_user
    @current_user ||= User.find(:id=>session[:user_id]) if session[:user_id]
  end 
end 
```

所以这真的是一个两部分的问题。第一部分是我的方法 current_user 甚至没有找到。其次，我相信如果找到它，它可能会抛出关于未定义会话的错误。但首先，为什么我得到 undefined_method current_user？

```
Failures:

  1) SessionsController POST /users should populate current_user after posting correct user/pass
     Failure/Error: current_user.should_not == "null"
     NameError:
       undefined local variable or method `current_user' for #<RSpec::Core::ExampleGroup::Nested_1::Nested_2:0x0000000313c0d8>
     # ./spec/app/controllers/sessions_controller_spec.rb:20:in `block (3 levels) in <top (required)>' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T17:50:59.213

这在他们的问题跟踪器中得到了回答：[https ://github.com/padrino/padrino-framework/issues/930#issuecomment-8448579](https://github.com/padrino/padrino-framework/issues/930#issuecomment-8448579)

从那里剪切和粘贴：

速记助手（顺便说一下，这是 Sinatra，而不是 Padrino 功能）很难测试是有原因的：

```
MyApp.helpers do
  def foo

  end
end 
```

是以下的简写：

```
helpers = Module.new do
  def foo
  end
end

MyApp.helpers helpers 
```

所以可测试性的问题很明显：助手是一个匿名模块，很难引用匿名的东西。解决方案很简单：使模块显式：

```
module MyHelpers
  def foo
  end
end

MyApp.helpers MyHelpers 
```

然后以您想要的任何方式对其进行测试，例如：

```
describe MyHelpers do
  subject do
    Class.new { include MyHelpers } 
  end

  it "should foo" do
    subject.new.foo.should == nil
  end
end 
```

此外，您的示例不起作用，因为它假定助手是全局的，但它们不是：它们由应用程序限定。

# login - JBoss DataBaseServerLoginModule 中的角色与角色组

> ID：11302397
> 
> 赞同：2
> 
> 时间：2012-07-02T23:11:59.837
> 
> 标签：login, jboss, roles, web.xml, jaas

**A 部分：角色与角色组**

有人可以解释jboss **DatabaseServerLoginModule中****Role**和**RoleGroup**之间的区别吗？[查看JBoss 6 文档](http://docs.jboss.org/jbosssecurity/docs/6.0/security_guide/html/Login_Modules.html#sect-DatabaseServerLoginModule)中的示例后，我感到很困惑

 **一个令人困惑的地方是当他们描述逻辑表时，用户到角色的映射表有三列：

```
Table Principals(PrincipalID text, Password text)
Table Roles(PrincipalID text, Role text, RoleGroup text) 
```

但他们提供的示例仅使用两列：

```
CREATE TABLE Users(username VARCHAR(64) PRIMARY KEY, passwd VARCHAR(64))
CREATE TABLE UserRoles(username VARCHAR(64), userRoles VARCHAR(32)) 
```

这两列是错字还是我可以使用两列用户到我更熟悉的角色映射表以及从单个源列 userRoles 创建两列的查询，现在角色和角色组现在对于这个应用程序是相同的.

顺便说一句 - 在[Glassfish 3](http://blog.gamatam.com/2009/11/jdbc-realm-setup-with-glassfish-v3.html)和早期[jBoss3](http://docs.jboss.org/jbossweb/3.0.x/realm-howto.html#JDBCRealm)中的传统 jdbcRealm 身份验证中，它是一个简单的一对多关系，并且有一个 user_group 表，其中用户名映射到组名。

**B 部分：角色查询**

此查询是否需要修改：

```
select userRoles, 'Roles' from UserRoles where username=? 
```

对此：

```
select userRoles, userRoles as 'Roles' from UserRoles where username=? 
```

为了在 UserRoles 表上运行，还是可以按原样运行？

**C 部分：映射 web.xml**

在 web.xml 中，我将限制 userRoles 或 Roles 列的资源吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:52:58.320

我能够让我的[登录正常工作](https://stackoverflow.com/questions/11318494/login-issue-with-databaseserverloginmodule-in-jboss-6)，所以现在我可以为**B 部分**提供一个体面的答案：

当然不需要修改查询。JBoss 6 特别期望在两列结果集中构建一个表，其中用户名（或主体）匹配“？” 第一列将是用户所在的组，第二列只是条目“角色”。

它是 JBoss 特定的，后备表的一个示例是：

```
username | groupid
--------------
james | admin
james | users
james | backupadmin
admin | admin 
```

**当用户名james**尝试登录**角色查询**时，结果集将是：

```
col1 | col2
--------------
admin | Roles
users | Roles
backupadmin | Roles 
```**

# c# - web.config中的条件位置授权？

> ID：11302402
> 
> 赞同：2
> 
> 时间：2012-07-02T23:12:22.610
> 
> 标签：c#, web-config, location, forms-authentication, iis-7.5

在 IIS 7.5 web.config 中，我们可以为各种路径/文件夹设置授权，如下所示：

```
<location path="logs/elmah/elmah.axd">
    <system.web>
      <authorization>
        <allow users="bob@example.com" />
        <deny users="*" />
      </authorization>
    </system.web>
  </location> 
```

是否可以使此授权有条件？例如，仅当它是实时服务器时才使用此位置，而不是本地或登台或测试版或其他服务器？

我用它来指示当前服务器是什么：

```
<appSettings>
    <clear />
    <add key="DeploymentEnv" value="Debug" />
</appSettings> 
```

然后 web.config 转换为将 DeploymentEnv 更改为正确的值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T23:37:39.600

为不同的环境使用不同的 Web.config 文件可能是正确的方法。看看[Web.config 转换](http://msdn.microsoft.com/en-us/library/dd465326.aspx)。这篇[MSDN 文章](http://msdn.microsoft.com/en-us/vs2010trainingcourse_webdevelopment_topic4.aspx)展示了如何配置暂存配置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T23:16:03.590

如果您要拥有依赖于环境的条件 web.config 文件，它将寻找什么？机器名称？IP地址？有条件选择合适的可能会变得混乱且难以维护。

最简单的方法是为每个环境拥有两个或更多配置文件。稍后您可能需要将特定于环境的 mor 标签添加到配置文件中。拥有单独的配置文件可以帮助您管理这些更改。确保正确命名它们，例如 production.config uat.config 等，当您将其移动到不同的环境时，只需将它们重命名为 web.config。

# php - Wordpress 主题选项变量范围

> ID：11302405
> 
> 赞同：0
> 
> 时间：2012-07-02T23:12:42.283
> 
> 标签：php, wordpress, variables

我保存了我的主题选项，在我的 functions.php 文件中，我有：

```
$my_option = get_option('theme_options'); 
```

所以，如果在functions.php中我插入：

```
echo $my_option['name']; 
```

它会正确回显。但是，如果我将相同的回显线放在任何其他主题文件中的任何其他位置，它将无法正常工作。

我能够让它工作的唯一方法是如果我输入：

```
global $my_option; 
```

在每个文件的顶部。我见过许多其他不需要这样做的主题。为什么我不能让主题选项变量在整个主题中工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:09:41.633

只需打开您的 functions.php 文件并在最顶部将变量全球化，例如：

```
<?php 
global $my_option; 
```

这应该在您的主题文件中的任何位置作为日志可用，因为您不在函数内，如果是这种情况，那么您将不得不在函数内再次对其进行全球化。

# c++ - 为什么此代码会出现 -fpermissive 错误？

> ID：11302412
> 
> 赞同：3
> 
> 时间：2012-07-02T23:13:13.203
> 
> 标签：c++, compiler-errors

为什么编译器会在指示的行抱怨？

```
class C
{
    std::string s;
public:
    C() { s = "<not set>";}
    ~C() {}
    void Set(const std::string ss) { s=ss; }
    const std::string Get() { return s; }

    C &operator=(const C &c) { Set(c.Get()); return *this; }
    //error: passing ‘const C’ as ‘this’ argument of ‘const string C::Get()’
    // discards qualifiers [-fpermissive]

    //C &operator=(C &c) { Set(c.Get()); return *this; }   <-- works fine

}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T23:14:19.630

您需要将函数声明`Get()`为`const`：

```
const std::string Get() const { return s; } 
```

即使`Get()`不更改任何成员值，编译器也会被指示只允许您调用显式标记的函数`const`。

gcc 指示您可以使用参数覆盖它的投诉`-fpermissive`；但是，通常最好不要这样做（否则为什么要声明任何内容`const`？）。通常，最好确保在`const`参数上调用的每个成员函数都是`const`成员函数。

这篇关于[Const Correctness](http://www.possibility.com/Cpp/const.html)的文章非常有趣。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T23:16:40.020

在你的`operator =`对象里面`c`是一个常量对象：它有`const C`类型。在 C++ 语言中，不允许调用常量对象的非常量成员函数。即调用`c.Get()`是非法的，因为你`Get`是一个非常量成员函数。这就是编译器报告错误的原因。

要么使您的`c`非常量（如代码的注释版本），要么使`Get`常量。由您决定哪种方法是正确的，但看起来您应该采用后者。

`Get()`附带说明一下，声明为返回没有多大意义`const std::string`。如果您通过引用（as `const std::string &`）返回它，那么这`const`将是合适的。但是由于您是按值返回，因此将返回类型声明`const`为没有那么有用。不过，这是你个人风格的问题。

# php - 用于图像上传的 PHP/JQuery 输入框

> ID：11302415
> 
> 赞同：1
> 
> 时间：2012-07-02T23:13:32.987
> 
> 标签：php, jquery

我目前正在处理多个 php 图片上传，但使用此[站点](http://dondedeportes.es/uploader-previewer/)我无法弄清楚，如果我可以将文件上传的输入从 3 个增加到 4 个？我查看了所有文件，但没有找到任何相关的内容。以前使用过这个[SITE](http://dondedeportes.es/uploader-previewer/)示例的任何人都可以帮助我吗？

**jQuery**

```
(function($) {

$(document).ready(function() {

    // it must be checked if there are div.imageForms because the
    // uploaderPreviewer javascript may be not included and produce an error
    if ($('div.imageForms').length) {

        $('div.imageForms').append($.uploaderPreviewer.createImageForms());

        // the images are populated if the admin form is to edit, and not
        // to insert
        if ($('div.imageForms[images]').length) {
            var imageFilenames = $('div.imageForms[images]').attr('images').split(',');
            $.uploaderPreviewer.populateImages(imageFilenames);
            $('div.imageForms[images]').removeAttr('images');
        }
    }

    $('#buttonSave').click(function() {
        var itemId = $(this).attr('itemId');
        if (itemId) {
            $.itemForm.update(itemId);
        }
        else {
            $.itemForm.insert();
        }
    });

});

})(jQuery);

</script> 
```

**HTML**

```
<html>

<div class="imageForms"></div>

    <div class="buttonSave">
        <button id="buttonSave">Upload</button>
    </div>

</div>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T23:27:52.930

加载 DOM 后，您可以操作 $.uploaderPreviewer 对象选项。你所要做的就是：

```
$.uploaderPreviewer.formsCount = 4; 
```

请参阅修改后的代码。

# ios - AVAudioPlayer 多重声音嘈杂

> ID：11302421
> 
> 赞同：0
> 
> 时间：2012-07-02T23:14:08.927
> 
> 标签：ios, avaudioplayer, audio

由于 iOS 中的系统声音播放器一次只能播放一种声音，我使用的是 AVAudioPlayer。但是，如果我尝试使用具有相同声音文件的两个单独的 AVAudioPlayers 播放两个相同的声音，听起来会很吵。

如果用户点击，我希望能够快速连续播放某种声音，并让它听起来很悦耳，没有噪音。

是否建议为同一个声音创建两个 AVAudioPlayer 实例，或者只是停止播放声音？如果我停止声音，当我快速点击按钮时，我仍然会听到静态反馈声音。如果我等待静音，然后在清除后点击按钮，但是当我继续点击它时，它会超载或其他什么。

无论如何，只是试图让一个非常简单的声音快速连续播放并且听起来不错。

任何反馈表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T21:36:14.917

我通过使用相同的声音文件创建 2-3 个 AVAudioPlayer 解决了这个问题（作为一种解决方法）。在每种“播放”方法中，我都会检查第一个声音是否仍在播放。如果是，则播放第二个版本，依此类推。这对我来说似乎很有效。

```
- (void)playUndo
{
    if ([self isSoundMuted]) return;

    if ([[self undoPlayer] isPlaying])
    {
        [[self undoPlayerTwo] play];
    }
    else
    {
        [[self undoPlayer] play];
    }
} 
```

# android - 更改 Android CheckBox 复选标记的默认颜色

> ID：11302428
> 
> 赞同：14
> 
> 时间：2012-07-02T23:15:06.427
> 
> 标签：android, android-layout, android-widget

如何将特定 CheckBox 的 Android 复选框的默认颜色从绿色复选标记更改为蓝色？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-02T23:30:17.780

不幸的是，改变颜色并不是一个简单的属性。复选标记是图像，因此您必须创建自定义图像。看看这个[例子](http://www.hrupin.com/2011/09/how-to-make-android-checkbox-and-radiobutton-custom-style)

创建一个选择器 xml 文件，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_checked="true" android:drawable="@drawable/star_down" />
    <item android:state_checked="false" android:drawable="@drawable/star" />
</selector> 
```

将此 xml 文件保存在您的`res\drawables\`文件夹中。然后在您的布局文件中将其应用于您的复选框，如下所示：

```
<CheckBox
    android:text="Custom CheckBox"
    android:button="@drawable/checkbox_selector"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"/> 
```

在此示例中，您将选择器 xml 文件命名为“checkbox_selector.xml”，并且您的 drawables 文件夹中还需要一个 star_down.png 和 star.png。您可以使用此技术通过将系统复选框图像更改为您想要的任何颜色并在选择器中引用更改后的 png 文件来创建不同颜色的复选框。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-11-20T19:18:35.343

这很容易在 xml 中使用`buttonTint`（从 API 级别 23 开始）：

```
<CheckBox
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:buttonTint="@color/COLOR_HERE" /> 
```

正如 Nicolás 指出的那样，您可以使用`appCompatCheckbox v7`较旧的 API 来执行此操作：

```
<android.support.v7.widget.AppCompatCheckBox 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" 
    app:buttonTint="@color/COLOR_HERE" /> 
```

# ios - 不搜索一对多核心数据关系

> ID：11302442
> 
> 赞同：0
> 
> 时间：2012-07-02T23:16:52.293
> 
> 标签：ios, core-data, nsfetchedresultscontroller, nsfetchrequest

我有一个一对多的关系，关系“人”，从我的主要实体到另一个实体，实体“人”，有一个人列表，属性“人”。我正在尝试使用 fetchedResultsController 搜索特定“人”没有关系“人”的所有主要实体。我试过使用这个谓词搜索字符串：

```
@"(NOT ('%@' IN[cd] people.person))", notPersonSearch

@"(NOT (ANY people.person == '%@'))", notPersonSearch 
```

他们俩都在工作。如果只有一个“人”与主要实体有关系，则该特定实体将被排除在搜索结果之外。但是，如果有多个“人”与主要实体有关系，则该实体将包含在结果中，即使排除的名称是“人”属性之一。

首先有没有更好的方法来编写这个谓词？如果不能，我可以对与 notPersonSearch 匹配的实体进行第二次搜索，并将它们与所有结果进行比较，并保留两个搜索不常见的结果吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T02:34:05.430

我想你在寻找`@"NONE people.person == %@", notPersonSearch`

请参阅：谓词编程指南中的[聚合操作](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Predicates/Articles/pSyntax.html#//apple_ref/doc/uid/TP40001795-215891)。

# javascript - 用 HTML 中的一行连接 2 个图像。Django 模板

> ID：11302446
> 
> 赞同：0
> 
> 时间：2012-07-02T23:17:33.867
> 
> 标签：javascript, jquery, html, css, django

我正在做这个项目，它需要 3 个主要事件的时间表。

我用复选标记图像表示每个事件。（根据这些事件是否正确发生，复选标记显示为绿色黄色或红色）。所以这些图像是使用 Django 模板语言动态生成的。

现在我想使用从第一个到第二个和第二个到第三个的线或箭头连接这 3 个图像。

它应该看起来像这样：[单击此处查看图像](http://i.1dl.us/v24.png)

现在一种快速而肮脏的方法是简单地将这些灰色条添加为图像并将 5 个图像浮动在一起。但这会引发分辨率缩放问题。

有没有办法以某种方式动态绘制这条线？请帮忙！

编辑：我必须将它用于 IE 7 等，所以不能使用 HTML5。此外，我相信自定义 Python 图形插件会矫枉过正。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T23:19:53.277

[PIL](http://www.pythonware.com/products/pil/)或[Pycairo](http://cairographics.org/pycairo/)中的任何一个都可以让您绘制这些。只需创建一个单独的视图以在您的 中使用`img`，并让它返回 PNG 数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T23:47:23.493

这是一个在画布元素上绘制一条线，然后在其上渲染两个图像的示例。

Ignacio 是正确的，但是您会遇到浏览器问题，因为我不相信 IE < 9 支持画布。

```
<html>
<head>
<style type="text/css">
canvas {
    width: 600;
    height: 200;
}
</style>
</head>
<body>

<canvas id="canvas">
</canvas>
<script type="text/javascript">
(function () {
    var canvas = document.getElementById('canvas');
    var ctx = canvas.getContext('2d');

    var i = new Image();
    i.src = 'https://www.balancedpayments.com/images/balanced.png';
    i.onload = function () { ctx.drawImage(i, 100 - i.width / 2, 100 - i.height / 2); };

    var j = new Image();
    j.src = 'https://www.balancedpayments.com/images/balanced.png';
    j.onload = function () { ctx.drawImage(j, 300 - i.width / 2, 100 - i.height / 2); };

    ctx.beginPath();
    ctx.moveTo(100, 100);
    ctx.lineTo(500, 100);
    ctx.stroke();
})();
</script>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T15:36:02.917

所以我终于以一种骇人听闻的方式完成了这件事..

我为 3 个复选标记图像中的每一个使用了 5 个表格单元格（您也可以使用 div，我的特定应用程序需要表格），并在每个复选标记之间使用 2 个单元格来绘制条形/线条。

我使用..在 2 个单元格内绘制了条形图。

```
<td style="background-position:center center !important; 
background:url('{{ MEDIA_URL }}img/bar-grey.png') ; 
background-repeat:repeat-x; width:300px !important;  
padding-left:0px !important; padding-right:0px !important; "> 
```

现在这不会触及圆形图像复选标记，并且栏中有中断。所以我为复选标记单元格设置了 100px 的固定宽度。并使用与上面类似的代码将条形连接到圆形，将其用作圆形单元格的背景。

我遇到的挑战之一是，在某些情况下，我在中间圆圈的每一侧都有不同的颜色条。同样对于第一个和最后一个圆圈，条形图只需要分别绘制右半部分和左半部分。

所以我遵循[了这个 SO 链接](https://stackoverflow.com/questions/2446168/css-how-to-create-a-table-cell-with-a-two-colour-background)并设法实现了这一点。

# javascript - 多个 Web 部件 JavaScript 依赖项

> ID：11302448
> 
> 赞同：0
> 
> 时间：2012-07-02T23:18:16.897
> 
> 标签：javascript, asp.net, web-parts

假设我有一个使用 4 个自定义 Web 部件的门户 - 大约有四个不同的外部 JavaScript 文件，它们具有（适当命名空间）要与所有 4 个 Web 部件共享的公共功能和属性。

确保所有 Web 部件都可以访问这些 javascript 的最佳做法是什么？我是否在每个 Web 部件的程序集中包含四个 javascript 中的每一个？

或者我是否制作了第 5 个 Web 部件，该部件仅用于包含这些 javascript 的要求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T03:40:14.080

谷歌 requirejs 并且永远感谢有人写了这个。

# memory-management - Cocos2D：需要分配什么？

> ID：11302449
> 
> 赞同：1
> 
> 时间：2012-07-02T23:18:19.020
> 
> 标签：memory-management, cocos2d-iphone

我现在应该真的知道这一点，但我无法决定何时分配游戏对象何时不需要。

示例：我的游戏中有一个暂停按钮。这个按钮没有以任何方式分配，我把我的输入层是这样的： `pauseButton = [CCSprite spriteWithSpriteFrameName:@"pause.png"];`

我也用一些标签做到了这一点。

但是，我在教程的帮助下将我的角色对象添加到游戏中，如下所示：（ `[[[self alloc]initWithImage] autorelease];` 此行是方法的一部分）

那么，如何决定是否分配游戏对象？有没有好的做法，或者我应该分配->自动释放我添加到游戏中的所有内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:43:03.673

实际上这两条线本质上是相同的。 `spriteWithSpriteFrameName`是 CCSprite 类的静态函数。它返回一个自动释放对象。

`initWithImage`是非静态的，所以你需要先分配它，但由于它也被标记为自动释放，它的行为方式相同。

我的经验法则是，如果有可用的静态函数返回自动释放对象，我会为了方便而使用它们。如果从第二个示例中删除自动释放，则必须手动调用对象上的“释放”来销毁它。您不能在自动释放对象上调用释放，因此在某些情况下您可能希望提前销毁对象（而不是在场景更改时）。

希望有帮助！

# javascript - 不使用带有 Jquery 事件的匿名函数

> ID：11302450
> 
> 赞同：4
> 
> 时间：2012-07-02T23:18:31.520
> 
> 标签：javascript, click, jquery, anonymous-function

在我的程序中，我有一个 click 事件，它对许多按钮执行相同的操作，只是事件处理函数的一小部分中的类对于每个按钮都不同。现在，我只是为此使用了一个匿名函数。附加到这个事件的函数很长，我预计会有很多按钮（可能有 60 个左右？）。我可以复制和粘贴当前工作的函数 60 次，但这会使我的 javascript 文件变得很大。

我想做的是在 on() 函数之外定义事件处理函数，所以我只能说`$('#some_button').on('click', my_event_handler("my_arg") );`
这将真正简化我的代码。

我做了一个 js fiddle，它提供了一个非常小的例子来说明我正在尝试做的事情：

[http://jsfiddle.net/AsmmF/](http://jsfiddle.net/AsmmF/)

唯一的问题是我无法让它工作！

我要去见泰德，回来后试试你的解决方案。

非常感谢您可以为我提供的任何帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T23:20:48.923

您只需要将函数调用包装在匿名函数中。

`$('#some_button').on('click', function() {my_event_handler("my_arg");} );`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T23:21:09.687

```
$('#some_button').on('click', my_event_handler("my_arg") ) 
```

应该：

```
$('#some_button').on('click', null, "my_arg", my_event_handler); 
```

[**现场演示**](http://jsfiddle.net/AsmmF/7/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T23:26:15.397

让你的函数返回一个函数。

```
function button_click(some_var) {
    return function() {
        $('#button').after('<p>This is being attached: ' + some_var + '</p>');
    };
};
$('#button').on('click', button_click("hello") ); 
```

（演示在[http://jsfiddle.net/63Le2/](http://jsfiddle.net/63Le2/)）

# c++ - 在 C++ 中将某种结构化的文本文件读入数组

> ID：11302453
> 
> 赞同：1
> 
> 时间：2012-07-02T23:18:42.740
> 
> 标签：c++, python, arrays, input

我想在 C++ 中重现以下 python 代码，但遇到了一些麻烦。函数 read_file 读取一个文本文件，测试每行中的第一个单词，看它是否是一个整数。如果第一个单词是整数（4 位或更多位），则该行上的所有单词都以浮点数形式添加到列表 z 中。在另一种情况下，该行只是作为字符串添加到列表中。列表 (z) 的列表被转换为 2D numpy 数组并返回其余部分。

```
def read_file(f):
    srchp = re.compile(r'^\d{4,}\s') # beg. of line, digit min 4, white space
    f = open(f)
    rest = [] 
    z = [x.strip() for x in f.readlines()] # read file, strip whitespace at beg./end of line,
    #store in z as list of strings. each line is at its own offset
    for i in range(len(z)-1,-1,-1):
        if not srchp.search(z[i]): #if regex does not match
            rest.append(z.pop(i)) #append to list rest
        else:
            z[i] = map(float,z[i].split())
    f.close()
    return numpy.array(z),rest 
```

我应该为 C++ 中的容器使用哪些数据类型（向量的向量？数组？）？归根结底，我想用数组做一些统计分析。我将不胜感激将此代码转换为 C++ 的任何帮助。

以下是需要读取的文件的摘录。

```
TEMP_INF                          700.000000                    SCALAR

NAME                              VALUE                        TYPE  DIMENSIONS
TEMP_REF                          25.0000000                    SCALAR

  ***** POST1 ELEMENT TABLE LISTING *****                                      

 STAT        MIXED           MIXED           MIXED           MIXED   
 ELEM        X               Y               Z               TEMP    
23261      0.56292E-03    -0.96401E-02     0.24093          755.91    
23262     -0.16635E-03    -0.97998E-02     0.24080          756.25    
23263     -0.17039E-03    -0.10374E-01     0.24025          757.65    
23264      0.12895E-02    -0.74483E-02     0.24242          751.64    
23265      0.67515E-03    -0.80538E-02     0.24209          752.62    
23266      0.10350E-02    -0.86614E-02     0.24164          753.92    
23267      0.56032E-03    -0.88420E-02     0.24105          756.49    
23268      0.13782E-02    -0.10792E-01     0.23978          758.74 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T23:58:17.283

因为每一行看起来都包含一个 int 和一个 float，所以`struct`使用该信息声明 a 将是一个不错的主意。

```
struct row {
  int elem;
  float x, y, z, temp;
}; 
```

现在您可以创建一个`vector<row>`来保存您的信息。

```
 vector<row> rows; 
```

对于每一行，您可以像这样插入元素：

```
row r;
cin >> r.elem >> r.x >> r.y >> r.z >> r.temp;
rows.push_back(r); 
```

# c++ - 避免重新定义宏定义的类

> ID：11302455
> 
> 赞同：1
> 
> 时间：2012-07-02T23:18:44.447
> 
> 标签：c++, class, macros

C++ 中是否有一种机制可以用来实现宏，以便宏定义一个类，同时宏的多次调用不会导致类重新定义错误？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T23:41:25.207

由于宏无法生成任何 C++ 预处理器指令，因此无法在宏的定义中生成 a`#define`以防止重新生成。您必须以某种方式使用单独的预处理器控件来处理它：

```
#define CLASS_GENERATOR_MACRO(x, y, z) ...defines class x with attributes y, z...

#ifndef GENERATED_CLASS_A
#define GENERATED_CLASS_A
CLASS_GENERATOR_MACRO(a, int, vector<std::string>);
#endif /* GENERATED_CLASS_A */ 
```

但是，没有什么可以自动强制只使用一次`CLASS_GENERATOR_MACRO`来创建类`a`。也就是说，该文件还可以包含：

```
CLASS_GENERATOR_MACRO(a, double, double); 
```

并且编译器会抱怨类的重新定义（如果两者都出现在同一范围内）。

宏可以生成对 的调用`_Pragma`。您的系统提供了一个可以提供帮助的 pragma 的外部机会。但是很可能没有使用 pragma 的便携式解决方案。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-03-09T08:32:37.600

此解决方案假定所需的行为是在每次使用宏时实例化一个新类，但名称不同。

可以结合使用[`__LINE__`宏](http://www.cprogramming.com/reference/preprocessor/__LINE__.html)和[预处理器令牌粘贴运算符`##`](http://www.cprogramming.com/reference/preprocessor/token-pasting-operator.html)来在宏实例化期间生成唯一令牌。

```
#define LOCAL_CLASS(_Base) class _Base ## __LINE__ { /* class definition */ } 
```

然后可以这样使用：

```
LOCAL_CLASS(SomeBase);
LOCAL_CLASS(SomeBase); 
```

这将生成以下代码（假设宏在源文件的第 2 行和第 3 行实例化：

```
class SomeBase2 { /* class definition */ };
class SomeBase3 { /* class definition */ }; 
```

此解决方案的缺点是生成的类的名称会根据文件中声明的位置而变化，因此不能依赖。如果说该类不打算由宏的用户使用，这不是问题；该类包含由宏自动注册到外部库的信息。

# java - 使复制的图像全部独立旋转

> ID：11302456
> 
> 赞同：0
> 
> 时间：2012-07-02T23:18:49.783
> 
> 标签：java, deep-copy, image-rotation, cloning, projectile

我认为我的问题与深克隆与浅克隆有关，我之前没有真正使用过，并且通过阅读文章似乎无法理解（您可以说我不是专业程序员）。这是我正在制作的一个小游戏，当我射出一颗子弹时，我旋转它的速度与它行进的速度矢量一样多。这工作正常，子弹旋转，但它们都一起旋转，而不是独立旋转。我不确定他们如何每个人都有自己的轮换。如果有人能指出我正确的方向，我将不胜感激。

来源：[https ://github.com/Vynlar/Point-and-Click-Shooter](https://github.com/Vynlar/Point-and-Click-Shooter)

谢谢，维拉尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T23:47:41.153

由于您使用的是资源管理器，因此对图像执行的转换将始终保留在该更新周期中。您必须转换、绘制，然后绘制下一个项目，然后进行更新循环。

[将一张图片旋转到另一张图片下方](https://stackoverflow.com/questions/7698030/rotating-one-image-under-another-one)

# android - 在Android中将复选框的背景设置为白色并删除灰色未选中的复选标记

> ID：11302459
> 
> 赞同：-2
> 
> 时间：2012-07-02T23:19:22.150
> 
> 标签：android, android-layout

当我在 android 中将 CheckBox 设置为 checked="false" 时，有一个灰色的复选框和灰色的复选标记，看起来它已经被选中。我根本不希望显示任何复选标记，也不希望框变灰。只是一个没有复选标记的白框。甚至没有一个变灰的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T00:24:52.030

首先，自定义复选框可能不是一个好主意，但如果您需要这样做，您可以创建一个带有两个单独图像的按钮，用于开/关 png。然后将可绘制的复选框设置为该按钮。

# c++ - C++ 服务器无法识别 AS3 套接字

> ID：11302462
> 
> 赞同：-1
> 
> 时间：2012-07-02T23:19:37.723
> 
> 标签：c++, actionscript-3, network-programming, network-protocols

好吧，在不到 24 小时内提出了三个问题。但我想缺乏任何有用的文档（无论如何我都能找到）让我别无选择。

现在我知道所有关于 adobes 的安全性、策略文件交易和沙盒限制的所有信息了。我完成了建议的选项更改，允许在我的 AS3 项目中进行网络访问。我让我的服务器准备好在连接后立即吐出策略文件；但问题是 flash/AS3 无论你想怎么称呼它都看不到我的服务器（或相反）

AS3 延迟了几秒钟，就像文档说的那样，如果它努力建立连接/找到策略文件，它会延迟，但它从来没有建立连接期，尝试了一段时间然后放弃并向我吐出一个访问错误（因为它没有找到它假定它不允许在网络上的策略文件，所以它对我的尝试感到生气...... lil stubborn buggers)

Flash 永远不会得到它正在寻找的东西，而且我的服务器永远不会检测到任何连接（失败或成功，什么都没有） 我知道我的服务器很好，因为我已经用我用 C++ 编写的测试客户端对其进行了测试，他们说话就像最好的朋友一样。

所以我现在几乎没有想法，我想在AS3中重新创建winsock类，但我什至不知道winsock的connect()函数是如何工作的；我得到了声明，我找不到它的定义。

我不确定您从我的源代码中真正需要什么，但是仅在客户端中就已经有超过一千行，所以发布它并不是一个真正的选择。我在这里至少给出我认为相关的内容。

```
function hwndEnterFrame(e:Event):void
        {
            //trace("Frame Entered");

            if (firstframe)
                {
                    trace("try to reconcile policy file...");
                    //Security.loadPolicyFile("192.168.1.2:843");
                    TSocket = new Socket("192.168.1.2",843);//must call flush() to send data***

                    firstframe = false;
                } 
```

到目前为止，Security.loadpolicyfile 似乎没有做任何事情，无论有没有它，我都会得到相同的消息，代码似乎正在套接字声明中指定的位置寻找策略文件。一切都编译得很好，它只是没有做我想做的事情：P 其他人似乎都在用 Perl 或 Python 编写他们的服务器我还没有找到很多丰富的 C++ 材料，尽管据我了解 TCP 是一个跨任何支持它的平台的通用连接（可以跨语言而无需任何有趣的业务）

嗯，这就是我现在得到的，如果你想要代码的其他部分（客户端或服务器端，无论你想要什么），我都会把它贴在这里。

编辑：

我在网上找到了一个我下载的 swf，它可以很好地连接到随附的示例服务器（但该服务器是用 c sparp 编写的，所以它对我没有多大用处）但它不会连接到我的服务器。因此，一个已知良好的 Flash 客户端不会连接到我的 C++ 服务器，但一个 C++ 客户端将连接到我的 C++ 服务器。所以它显然是在服务器端，因为它不会从 Flash 应用程序（我的或示例的）听到任何连接

干杯; -泰勒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T02:43:10.290

我终于弄明白了。我需要`AllowDomian(IPofserver)`。我以为我已经尝试过了，但显然没有。

# c# - 方法签名中的 params 关键字的真正含义是什么

> ID：11302464
> 
> 赞同：4
> 
> 时间：2012-07-02T23:19:49.847
> 
> 标签：c#, arrays, params

我正在浏览 Troelsen 的 Pro C# 2010 并遇到了对 params 关键字方法修饰符的讨论。阅读文本、MSDN 和其他 tubez 资源，在我看来，您从 params 获得的唯一东西就是能够将逗号分隔的值列表传递给方法。我写了一些代码向自己证明，我可以将不同长度的数组发送到不使用 params 关键字的方法，并且一切正常。

现在，我完全赞成在有意义的情况下保存击键。然而，在这种情况下，我怀疑节省是虚幻的，并且让那些必须维护代码的人感到困惑。虚幻，因为我永远不会将硬编码的值列表发送到方法（错误的形式！）。令人困惑的是，维护者要制作一个列出一堆值的方法而不是一个解释我在做什么的对象？

OTOH，由于 MS 的大多数人以及这里的大多数人都比我聪明，我怀疑我错过了一些东西。请各位大神赐教！

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T23:25:13.687

你用过[`Console.WriteLine`](http://msdn.microsoft.com/en-us/library/828t9b9h)吗？

```
Console.WriteLine("{0}: The value of {1} is {2}.", lineNumber, foo, bar); 
```

这种调用是`params`有用的。必须显式构造一个数组来包含您的参数只是噪音，这会使代码更难阅读而不添加任何值。与不使用时的外观`params`相比：

```
Console.WriteLine("{0}: The value of {1} is {2}.", new object[] { lineNumber, foo, bar }); 
```

第二个版本没有向代码添加有用的信息，并且将值从格式字符串移到了更远的位置，从而更难看到发生了什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T23:25:29.000

因为我更容易输入：

```
SomeFuncWithParams(a, b, c); 
```

比输入：

```
SomeFuncWithParams(new object[] { a, b, c }); 
```

如果你认为语法糖不是实现一个特性的好理由，那么你还需要开始质疑属性、`using`语句、对象初始化器等的有效性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T23:26:39.047

1.  是的，我一直认为 .Net “params”关键字是 C/C++ 可变参数的道德等价物。

2.  不，我想不出“参数”和可变长度数组不完全等价的任何方式。

# ios - ZoomingPDFViewer 示例错误

> ID：11302469
> 
> 赞同：1
> 
> 时间：2012-07-02T23:20:21.593
> 
> 标签：ios, pdf, ios5

我正在尝试开发一个可以显示 PDF 文件的应用程序。我尝试使用 ZoomingPDFViewer [http://developer.apple.com/library/ios/#samplecode/ZoomingPDFViewer/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010281-Intro-DontLinkElementID_2来完成此操作](http://developer.apple.com/library/ios/#samplecode/ZoomingPDFViewer/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010281-Intro-DontLinkElementID_2)

苹果库中的代码。当我将该代码与我的代码混合时，某些功能不起作用。如果我使用相同的代码（不要混合），应用程序会抛出这个错误：

***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[UIView setPDFPage:]：无法识别的选择器发送到实例 0x6a833f0”

我在 SDK 5.0 中，要求说我应该在 SDK 5.1 中编译它，但示例运行完美，问题出在我的项目中，但我不知道我的错误是什么。

如果有人可以帮助我解决这个奇怪的错误，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:02:56.750

检查 Storyboard 中的 Class 设置。

*   视图控制器 -> 自定义类：ZoomingPDFViewerViewController 和
*   Scroll VIew -> 自定义类：PDFScrollView

第二个设置是您错误的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T23:28:04.053

您似乎正在发送`-setPDFPage:`到一个未转换的`self.view`对象。在调用之前尝试投射，如下所示：

```
[(PDFScrollView *)self.view setPDFPage:PDFPage]; 
```

如果您正在使用它，请仔细检查您在 IB 中的连接，如果没有，请确保您正在初始化一个`PDFScrollView*`对象`-loadView`。

# opencv - 在 Macports 中安装支持 Cuda 的 OpenCV？

> ID：11302472
> 
> 赞同：1
> 
> 时间：2012-07-02T23:20:41.857
> 
> 标签：opencv, cuda, macports

我尝试使用 Macports 安装支持 CUDA 的 Opencv 2.4.1，但没有成功。

当前端口 Opencv 的版本是 2.4.1。我可以成功安装 opencv 并在 Xcode 中编译，但是当我尝试使用 gpu 库时，它说不支持 gpu。

根据线程[https://trac.macports.org/ticket/34753](https://trac.macports.org/ticket/34753)，Macports 中的 2.4.1 版本应该以某种方式支持 cuda，但我不明白。

有没有办法配置它？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T01:42:43.177

您需要 OSX 10.7.3 和 CUDA 4.1（或更高版本）。

# cocoa - NSString 指针传递给函数...不保持我设置的值

> ID：11302474
> 
> 赞同：0
> 
> 时间：2012-07-02T23:21:05.833
> 
> 标签：cocoa, pointers, parameter-passing

我不确定我在这里做错了什么。我也尝试过`s1..3`使用`foo`：

`s1 = [[NSString alloc] initWithString:[filepaths objectAtIndex:0]];`

上下文如下：

```
void foo(NSString *s1, NSString *s2, NSString *s3){
    //assign long string to NSString *fps
    //...
    //break fps into smaller bits
    NSArray *filepaths = [fps componentsSeparatedByString:@"\n"];
    //the above worked! now let's assign them to the pointers
    s1 = [filepaths objectAtIndex:0];
    //repeat for s2 and s3
    NSLog(@"%@",s1); //it worked! we're done in this function
}

int main(int argc, const char * argv[]){
    NSString *s1 = nil; //s2 and s3 as well
    foo(s1,s2,s3); //this should work
    NSLog(@"%@",s1); //UH OH, this is null!
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T23:30:59.447

不。

您正在传递指向可以在本地变异的对象的指针。您**不会**更改原始对象，就像您可能从普通 C 中所想的那样。

如果你想使用这种方法（我*不*推荐这种方法——在 Cocoa 中看到它真的很奇怪，除了 的情况`NSError`），你会得到类似的东西：

```
void foo(NSString **s1, NSString **s2, NSString **s3) {
    *s1 = [filepaths objectAtIndex:0]; // etc.
} 
```

然后，您将`&s1`作为参数传入。

当然，这会破坏 中的任何内容`s1`，可能会导致内存泄漏、线程不安全等，除非您非常小心。这就是为什么我说你通常不会这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T23:32:05.847

函数获取其参数的本地副本，因此您正在修改`NSString*`非原始的副本。这称为“按值传递”。你想要的是“通过引用”，它看起来像这样：

```
void foo(NSString** s1) {
    if(s1) *s1 = @"Different string";
}

int main(int argc, const char* argv[]){
    NSString* s1 = nil;
    foo(&s1);
    NSLog(@"%@", s1);
    return EXIT_SUCCESS;
} 
```

它归结为您对 C 中的指针的理解程度。阅读操作符的“地址” `&`、解引用操作符`*`以及一般的 C 指针是一个好主意。

# python - 列表子集的函数列表

> ID：11302477
> 
> 赞同：1
> 
> 时间：2012-07-02T23:21:27.873
> 
> 标签：python, list, function

所以我有一个列表，比如 L = [0,1,2,3]; 我想对子列表 [0,1]、[1,2]、[2,3] 的每个值应用一个函数（带有两个参数），然后生成另一个新值列表。即[f(0,1), f(1,2), f(2,3)]

我已经看遍了，似乎找不到答案。

任何帮助将不胜感激，

谢谢，戴夫

编辑：我正在使用 Python。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T23:17:54.460

```
result = [f(*args) for args in zip(L, L[1:])] 
```

或者：

```
result = map(f, L[:-1], L[1:]) 
```

使用[itertools](http://docs.python.org/library/itertools.html)函数按需生成结果的惰性版本：

```
it = starmap(f, izip(L, islice(L, 1, None))) 
```

或者：

```
it = imap(f, L, islice(L, 1, None)) 
```

或者如果`L`是任意可迭代的：

```
a, b = tee(L)
it = imap(f, a, islice(b, 1, None)) 
```

# android - 在 EditText 中截取空格键的问题

> ID：11302483
> 
> 赞同：4
> 
> 时间：2012-07-02T23:21:52.163
> 
> 标签：android, android-edittext

我正在尝试为用户提供一种从 EditText 将文本输入到 TextView 的方法。但是，如果用户输入了某些内容并想要修复它，我希望他们能够在空的 EditText 上按空格以获取他们写回的最后内容。第一个问题是，如果他们输入“hello”，按 Enter 将其添加到 TextView（从 EditText 中清除它），然后按空格键，EditText 就会出现“hello”。不是我想要的，我不知道为什么。

我将输入的文本放入保存字符串的代码：

```
b1 = ti.getText().toString(); 
```

然后，如果用户按空格键，我相信他们应该在 EditText 中获得 b1。相反，我得到：`" " + b1`。为什么要在里面增加空间？

```
if((event.getAction()==KeyEvent.ACTION_DOWN)&&(key == KeyEvent.KEYCODE_SPACE)){

    if(ti.getText().toString().equals("")){
    ti.setText(b1);
} 
```

我的第二个更大的问题是上面的代码只适用于硬件键盘。软件键盘按下空格的键事件是什么？

这一切都在一个 onKeyListener 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T23:36:31.963

对于您的第一个问题，我怀疑您需要在满足“if”条件时从 onKeyListener 中的 onKey 方法返回 true，以指示事件已被消耗，否则您将获得默认的 onKeyListener 将空间添加到 EditText。IE：

```
if((event.getAction()==KeyEvent.ACTION_DOWN)&&(key == KeyEvent.KEYCODE_SPACE)){

   if(ti.getText().toString().equals("")){
      ti.setText(b1);
      return true;
   }
} 
```

来自 KeyEvent API 文档的这段摘录应该有助于解决问题 2：“由于软输入方法可以使用多种创造性的文本输入方式，因此不能保证软键盘上的任何按键都会产生按键事件：这是留给IME 的自由裁量权，实际上不鼓励发送此类事件。您永远不应依赖接收 KeyEvents 来获取软输入法上的任何键。特别是，默认的软键盘永远不会向任何针对 Jelly Bean 或更高版本的应用程序发送任何键事件, 并且只会将某些按下删除和返回键的事件发送到面向 Ice Cream Sandwich 或更早版本的应用程序。请注意，其他软件输入法可能永远不会发送按键事件，无论版本如何。如果您需要与软件键盘进行特定交互，请考虑使用诸如 IME_ACTION_DONE 之类的编辑器操作，因为它可以让用户更清楚地了解您的应用程序对按键的反应。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T00:25:34.010

解决额外空间问题的一种简单方法是在将其放入 EditText 之前从字符串中删除空间

```
b1 = b1.substring(1); //<--- cut out the first character, which is the " " in your case.
ti.setText(b1); 
```

ps 我强烈推荐更具描述性的变量名称。如果您使用 ti 和 b1 之类的名称，您的程序可能会令人困惑。也许这些选择在您的程序上下文中更有意义。但是从您在此处显示的内容来看，很难说出这些名称所指的内容。

# python - 有没有办法使用 WTForms 将额外的字段传递给表单？

> ID：11302487
> 
> 赞同：0
> 
> 时间：2012-07-02T23:22:01.913
> 
> 标签：python, wtforms

我正在编写更改密码表单，我想将原始密码传递给表单以进行验证，但唯一的方法是将其设为隐藏字段并将其与其余数据一起传递。我显然不想这样做，我宁愿只是从视图中将它传递给表单构造函数，但如果它没有与 formdata 一起传递，那么这将不起作用。

```
class MyForm(Form):
    ...
    original_password = HiddenField()
    ...

    def validate_current_password(form, field):
        if field.data != form.original_password.data:
            ERROR 
```

`form = MyForm(request.POST, original_password=password)`除非 request.POST 为空，或者除非我实际呈现并使用表单提交原始密码，否则不起作用。form.original_password.data 否则为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T01:31:39.167

对于那些熟悉 formencode 的“状态”变量的人，我通过子类化 Form 并添加一个带有信息的状态变量来帮助验证来解决这个问题。

# android - 初始屏幕和前提屏幕 - Android

> ID：11302490
> 
> 赞同：0
> 
> 时间：2012-07-02T23:22:27.457
> 
> 标签：android, try-catch, splash-screen

所以我开始为我正在为移动编程课程制作的简单安卓游戏制作一个简单的“启动画面”（它更像是一个介绍屏幕）。从那以后我遇到了问题。我知道我应该使用线程，但我的实现似乎不起作用。你应该能够感受到我想要的效果。

```
public class SplashScreen extends Activity {

//how long until we go to the next activity
protected int splashTime = 2000; 
private Thread splashThread;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash_screen);

    final TextView first = (TextView) findViewById(R.id.textView1);
    final TextView second = (TextView) findViewById(R.id.textView2);
    final TextView third = (TextView) findViewById(R.id.textView3);
    final TextView fourth = (TextView) findViewById(R.id.textView4);
    final TextView fifth = (TextView) findViewById(R.id.textView5);
    final TextView sixth = (TextView) findViewById(R.id.textView6);
    final ImageView main_character = (ImageView) findViewById(R.id.imageView1);

    // thread for displaying the SplashScreen
    splashThread = new Thread() {
        @Override
        public void run() {
            try {
                synchronized(this){

                    first.setText("The year is 2048...");

                    wait(splashTime);

                    first.setText("");
                    second.setText("...the Earth's resources have long been depleted");

                    wait(splashTime);

                    second.setText("");
                    third.setText("Attempts have been made to save our home...");

                    wait(splashTime);

                    third.setText("");
                    fourth.setText("...but all has gone awry, trash now rains from the skies");

                    wait(splashTime);

                    fourth.setText("");
                    fifth.setText("Now, only one man can save us, and his name is...");

                    wait(splashTime);

                    fifth.setText("");
                    sixth.setText("The Garbage Man!");
                    main_character.setImageResource(drawable.bobrgb888);

                }
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            finally {
                finish();

                //start a new activity
                Intent i = new Intent(getApplicationContext(), MainMenu.class);
                startActivity(i);
            }
        }
    };
    splashThread.start();

} 
```

问题是第一个 textview 与第一个 wait() 调用一起被调用，但随后我强制关闭。

这是我的日志：

```
07-02 19:35:16.241: W/dalvikvm(709): threadid=9: thread exiting with uncaught exception (group=0x40015560)
07-02 19:35:16.250: E/AndroidRuntime(709): FATAL EXCEPTION: Thread-10
07-02 19:35:16.250: E/AndroidRuntime(709):     android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a    view hierarchy can touch its views.
07-02 19:35:16.250: E/AndroidRuntime(709):  at android.view.ViewRoot.checkThread(ViewRoot.java:2932)
07-02 19:35:16.250: E/AndroidRuntime(709):  at android.view.ViewRoot.requestLayout(ViewRoot.java:629)
07-02 19:35:16.250: E/AndroidRuntime(709):  at android.view.View.requestLayout(View.java:8267)
07-02 19:35:16.250: E/AndroidRuntime(709):  at android.view.View.requestLayout(View.java:8267)
07-02 19:35:16.250: E/AndroidRuntime(709):  at android.view.View.requestLayout(View.java:8267)
07-02 19:35:16.250: E/AndroidRuntime(709):  at android.view.View.requestLayout(View.java:8267)
07-02 19:35:16.250: E/AndroidRuntime(709):  at android.widget.RelativeLayout.requestLayout(RelativeLayout.java:257)
07-02 19:35:16.250: E/AndroidRuntime(709):  at android.view.View.requestLayout(View.java:8267)
07-02 19:35:16.250: E/AndroidRuntime(709):  at android.widget.TextView.checkForRelayout(TextView.java:5521)
07-02 19:35:16.250: E/AndroidRuntime(709):  at android.widget.TextView.setText(TextView.java:2724)
07-02 19:35:16.250: E/AndroidRuntime(709):  at android.widget.TextView.setText(TextView.java:2592)
07-02 19:35:16.250: E/AndroidRuntime(709):  at android.widget.TextView.setText(TextView.java:2567)
07-02 19:35:16.250: E/AndroidRuntime(709):  at com.connor.black.SplashScreen$1.run(SplashScreen.java:41)
07-02 19:35:16.420: D/szipinf(709): Initializing inflate state 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T23:28:27.823

如果你想在这里使用一个线程，你必须调用 start 来启动线程。这将依次调用 run() 方法：

```
splashTread = new Thread() {
    @Override
    public void run() {
      ...
    }
};

splashThread.start(); 
```

请记住，这将在后台运行，即不是 UI 线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T23:33:16.903

这是我用于 SplashScreen 的代码：

```
final SplashScreen splash = this;

Thread splashThread = new Thread() {
        @Override
        public void run() {
            go = true;
            while (go) {
            try {
                int waited = 0;
                while(_active && (waited < _splashTime)) {
                    sleep(100);
                    if(_active) {
                        waited += 100;
                    }
                }
            } catch(InterruptedException e) {
                // do nothing
            } finally {
                finish();
                Intent i = new Intent();
                i.setClass(splash, MyActivity.class);
                startActivity(i);
                //stop();
                go = false;
            }
            }
        }
    };
    splashThread.start(); 
```

启动画面的问题是您错误地使用了 wait() 。您正在寻找的是 sleep()。

要从工作线程接触 UI 线程，您需要使用 runOnUiThread(Runnable action) 或处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T23:41:25.230

您需要使用[处理](http://developer.android.com/reference/android/os/Handler.html)程序来触摸 UI（即设置您的文本视图的文本）

在您的线程声明上方，输入：

```
Handler handler = new Handler(); 
```

然后而不是做`first.setText("bla bla bla");`

做

```
handler.post(new Runnable(){
  public void run(){
    first.setText("bla bla bla");
  }
}); 
```

您需要这样做，因为单独的线程无法触及 UI 元素。使用处理程序基本上告诉 UI 线程运行您传入的任何内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T00:05:03.503

将您的代码替换为*splashThread* Thread 中的代码，例如：

```
runOnUiThread(new Runnable() {
    public void run() {
        first.setText("The year is 2048...");
        //... The rest of code goes here too.
    }
}); 
```

这样 UI Thread 就可以完美地触及它的视图。

# tomcat - Tomcat & Solr - 如果 solrconfig.xml 或其他 conf 文件被修改，我是否需要重新生成 solr.war？

> ID：11302493
> 
> 赞同：0
> 
> 时间：2012-07-02T23:22:57.363
> 
> 标签：tomcat, solr

一旦我将 solr.war 部署到 webapps 文件夹下的 tomcat，如果我想测试 solrconfig.xml 中的一些更改，我是否需要每次生成一个新的 solr.war 并重新部署？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T00:37:30.387

你只需要重新部署或重启tomcat。您不需要生成新的 solr.war。Solr 配置在 solr.war 之外，由 solr.home 变量标识。

但是，如果您使用具有多个内核的 solr，则可以重新加载内核以获取配置更改。[http://wiki.apache.org/solr/CoreAdmin](http://wiki.apache.org/solr/CoreAdmin)

# binary - IDL：读取二进制文件的 ascii 头

> ID：11302494
> 
> 赞同：1
> 
> 时间：2012-07-02T23:23:07.800
> 
> 标签：binary, ascii, non-ascii-characters, idl-programming-language

我正在强制介绍 idl 试图调试一些旧代码。

我有一个带有 ascii 标头的二进制图像文件（如果感兴趣的话，它是火星的 THEMIS IR BTR 图像）。代码使用 OPENR 作为单元 1 打开文件，然后使用 ASSOC(1,BYTARR(256)) 读取文件的前 256 个字节。从中返回的是 256 个 ascii 字符 dex 值，但它们大多是与字母数字字符不对应的高或低数字，并且与我知道文件中的标题无关。

可能有助于诊断的一件事：原始文件是该文件的 g 压缩版本。如果我尝试直接打开它（例如使用 less），它允许我阅读标题。但是，如果我先解压缩它（gzip -c filename.IMG.gz > filename.IMG）然后尝试再次读取它，我会得到二进制 gobbledegook。（less 在打开之前给我一个警告：“filename.IMG 可能是一个二进制文件。看到了吗？”）。

有什么建议么？

这是 IDL 代码：

```
CLOSE,1
OPEN,1,FILENAME
A = ASSOC(1,BYTARR(256))
B = A[0]
print,'B  - ',B
H = STRING(B)
print,'H  - ',H 
```

这就是它给我的：

```
B  - 31 139 8 8 7 17 238 79 0 3 ... (and on for 256 characters) 
H  - [Some weird symbol] 
```

我已经在一个纯 ascii 测试文件上进行了尝试，它按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T23:30:14.437

31 139 8 是“压缩”文件的 GZIP 标头的开头。

[http://www.gzip.org/zlib/rfc-gzip.html#file-format](http://www.gzip.org/zlib/rfc-gzip.html#file-format)

所以是的，文件看起来需要先解压缩。

尝试使用 gunzip 解压缩文件，然后再次检查文件头。如果是 31 139 08... 再次，看起来它已经被压缩了两次。

否则不管它是什么，它很可能最终被解压了。为什么未压缩的文件没有被解码还有待观察。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T19:33:14.783

尝试`COMPRESS`关键字`OPEN`：

```
openr, 1, filename, /compress 
```

关键字指的`COMPRESS`是一个压缩文件，所以它既可以用于读取压缩文件，也可以用于写入压缩文件。

# delphi - 使用子模块为 Delphi 配置声纳

> ID：11302497
> 
> 赞同：2
> 
> 时间：2012-07-02T23:23:34.207
> 
> 标签：delphi, ant, sonarqube

我可以让 Delphi 分析在单个项目上工作，所以插件可以工作。我可以按照我之前的问题设置子模块分析，但不执行德尔福分析。

请参阅[使用 Ant 为 Sonar 模块配置 build.xml 文件以](https://stackoverflow.com/questions/11092659/configuration-of-build-xml-file-for-sonar-modules-with-ant)供参考。

如果我在主构建文件中包含（我相信）所需的 delphi 配置，它只有在包含 sonar.sources 行时才有效。

但是，当我包含该行时，它正在尝试分析所有 delphi 代码并忽略子模块。

如何（假设可以完成）我将其配置为工作还是我必须完全单独运行每个项目？

**主构建文件**

```
<?xml version="1.0" encoding="UTF-8"?>
<project name = "EXO" default = "sonar" basedir = "." xmlns:sonar="antlib:org.sonar.ant">
<echo>Root Project</echo>

<taskdef uri="antlib:org.sonar.ant" resource="org/sonar/ant/antlib.xml">
    <classpath path="c:/ANT/lib" />
</taskdef>

<property name="sonar.host.url" value="http://localhost:9000" />
<property name="sonar.modules" value="exonet6000/build.xml,CRM/build.xml" />

<target name="sonar">
    <sonar:sonar key="EXO.key" version="0.1">   
        <property key="sonar.sources" value="." />      
        <property key="sonar.language" value="delph" />
    </sonar:sonar>
</target>
</project> 
```

**子项目构建文件**

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="CRM" default="all" basedir=".">
    <echo>CRM Module</echo>

    <property name="sonar.language" value="delph" />
    <property name="sonar.projectKey" value="EXO:CRM" />
    <property name="sonar.sources" value="." /> 

    <target name="all" />
</project> 
```

# jquery - $(".class").on 不是函数 - jQuery 错误

> ID：11302498
> 
> 赞同：5
> 
> 时间：2012-07-02T23:23:51.590
> 
> 标签：jquery, html, video

我是 Javascript/jQuery 的新手，我正在尝试为 HTML5 视频播放制作一个播放按钮。到目前为止我的代码：

```
//return a jQuery object
var video = $('#myVideoTag');

//Play/Pause control clicked

$('.btnPlay').on('click', function() {
   if(video[0].paused) {
      video[0].play();
   }
   else {
      video[0].pause();
   }
   return false;
}); 
```

我不断收到此错误：

```
$(".btnPlay").on is not a function
[Break On This Error]   

$('.btnPlay').on('click', function() { 
```

我终其一生都无法弄清楚出了什么问题。我在页面上正确定义了 .btnPlay 类。我正在关注一个似乎使用相同方法没有问题的教程。有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T23:25:15.997

方法[`on`](http://api.jquery.com/on/)是在 jQuery 版本 1.7 中引入的。

我认为您必须将您的 jQuery 库升级到[最新版本](http://jquery.com/download/)。

否则，您可以使用[`bind`](http://api.jquery.com/bind/)：

```
$('.btnPlay').bind("click", function() {
    // ...
}); 
```

或其快捷方式[`click`](http://api.jquery.com/click/)：

```
$('.btnPlay').click(function() {
    // ...
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-28T13:45:49.637

As of **jQuery 1.7**, [`.delegate()`](http://api.jquery.com/delegate/) has been superseded by the [`.on()`](http://api.jquery.com/on/) method. For earlier versions, however, it remains the most effective means to use event **delegation** `.delegate()`.

An other alternative is the [`.live()`](http://api.jquery.com/live/) but since version 1.7 is deprecated. Users of older versions of jQuery should use `.delegate()` in preference to `.live()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T23:27:57.790

An alternative to the .on method on older versions of javascript is .delegate. You should use `.delegate('.btnPlay', 'click', function(){...})` on the parent element to have the same functionality

# javascript - 循环遍历单选按钮并更改最近的 div 上的背景颜色，jquery

> ID：11302511
> 
> 赞同：2
> 
> 时间：2012-07-02T23:25:08.030
> 
> 标签：javascript, jquery, html

我有一个 6 x 8 网格，基本上是同名“tselect”下的单选按钮。当页面加载时，我希望他们所有人都运行一个类似于这个的命令

```
$(this).closest('div').addClass('highlight', 300); 
```

基本上通过在顶部添加一个新的 div 类来更改最近 div 的背景颜色。我尝试做一个 for 循环来遍历所有这些，但是 jquery 命令没有执行。有任何想法吗？

编辑：添加代码...

```
<div id="sch_cal">
                <div id="sch_cal_column">
                    <div id="sch_cal_row">
                        <div id="sch_cal_time"><p class="ctime">8:00am</p></div>
                        <div style="height: 100%"><input class="ctime" type="radio" name="tselect"/></div>
                    </div>
                    <div id="sch_cal_row">
                        <div id="sch_cal_time"><p class="ctime">8:20am</p></div>
                        <div style="height: 100%"><input class="ctime" type="radio" name="tselect"/></div>
                    </div>
                    <div id="sch_cal_row">
                        <div id="sch_cal_time"><p class="ctime">8:40am</p></div>
                        <div style="height: 100%"><input class="ctime" type="radio" name="tselect"/></div>
                    </div>
                    <div id="sch_cal_row">
                        <div id="sch_cal_time"><p class="ctime">9:00am</p></div>
                        <div style="height: 100%"><input class="ctime" type="radio" name="tselect"/></div>
                    </div>
                    <div id="sch_cal_row">
                        <div id="sch_cal_time"><p class="ctime">9:20am</p></div>
                        <div style="height: 100%"><input class="ctime" type="radio" name="tselect"/></div>
                    </div>
                    <div id="sch_cal_row">
                        <div id="sch_cal_time"><p class="ctime">9:40am</p></div>
                        <div style="height: 100%"><input class="ctime" type="radio" name="tselect"/></div>
                    </div>
                    <div id="sch_cal_row">
                        <div id="sch_cal_time"><p class="ctime">10:00am</p></div>
                        <div style="height: 100%"><input class="ctime" type="radio" name="tselect"/></div>
                    </div>
                    <div id="sch_cal_row">
                        <div id="sch_cal_time"><p class="ctime">10:20am</p></div>
                        <div style="height: 100%"><input class="ctime" type="radio" name="tselect"/></div>
                    </div>
                </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T23:39:59.740

如果您需要突出显示最近的 div，也许您需要类似的东西：

```
$(this).closest('div').effect("highlight", {}, 300); 
```

如果您想更改背景颜色，可以尝试：

```
$(this).closest('div').css( "background-color" , "red" ) 
```

或者

```
$(this).closest('div').addClass('highlight'); 
```

[addClass](http://api.jquery.com/addClass/)不将第二个参数作为整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T23:35:23.657

它应该是

```
$('input[type="radio"].ctime').closest('div').addClass('highlight'); 
```

[**演示。**](http://jsfiddle.net/Z7FtQ/1/)

您有多个具有相同 id 的元素，`sch_cal_row`这`sch_cal_time`是无效的，id 应该是唯一的。

# asp.net - 电子邮件中的附件以 UTF-8 编码保存

> ID：11302513
> 
> 赞同：1
> 
> 时间：2012-07-02T23:25:14.380
> 
> 标签：asp.net, email, memory, encoding, utf-8

有没有人有能够发送带有附件的电子邮件的示例，其中附件保存为 utf8 编码。我试过了，但是当我在记事本中打开它时，它说编码是ascii。注意：我不想先保存文件。

```
// Init the smtp client and set the network credentials
            SmtpClient smtpClient = new SmtpClient();
            smtpClient.Host = getParameters("MailBoxHost");

            // Create MailMessage
            MailMessage message = new MailMessage("team@ccccc.co.nz",toAddress,subject, body);

            using (MemoryStream memoryStream = new MemoryStream())
            {
                byte[] contentAsBytes = Encoding.UTF8.GetBytes(attachment);
                memoryStream.Write(contentAsBytes, 0, contentAsBytes.Length);

                // Set the position to the beginning of the stream.
                memoryStream.Seek(0, SeekOrigin.Begin);

                // Create attachment
                ContentType contentType = new ContentType();
                contentType.Name = attachementname;
                contentType.CharSet = "UTF-8";

                System.Text.Encoding inputEnc = System.Text.Encoding.UTF8;

               Attachment attFile = new Attachment(memoryStream, contentType);

                // Add the attachment
                message.Attachments.Add(attFile);

                // Send Mail via SmtpClient
                smtpClient.Send(message);

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T23:29:24.537

在流的开头添加 UTF-8 的[BOM（字节顺序标记） ：](http://en.wikipedia.org/wiki/Byte_order_mark)

```
0xEF,0xBB,0xBF 
```

代码：

```
byte[] bom = { 0xEF, 0xBB, 0xBF };
memoryStream.Write(bom, 0, bom.Length);

byte[] contentAsBytes = Encoding.UTF8.GetBytes(attachment);
memoryStream.Write(contentAsBytes, 0, contentAsBytes.Length); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T23:33:07.483

假设您的附件是文本，该类的默认构造函数`ContentType`会将附件的`Content-Type`标题设置为`application/octet-stream`，但需要将其设置为`text/plain`，例如：

```
ContentType contentType = new ContentType(MediaTypeNames.Text.Plain); 
```

或者：

```
ContentType contentType = new ContentType(); 
contentType.MediaType = MediaTypeNames.Text.Plain; 
```

此外，您应该为附件指定 a `TransferEncoding`，因为 UTF-8 不是 7 位干净的（许多电子邮件系统仍然需要），例如：

```
attFile.TransferEncoding = TransferEncoding.QuotedPrintable; 
```

或者：

```
attFile.TransferEncoding = TransferEncoding.Base64; 
```

# javascript - 在 PHP 中显示表格选定行的完整信息的按钮

> ID：11302522
> 
> 赞同：0
> 
> 时间：2012-07-02T23:26:16.987
> 
> 标签：javascript, php, html, html-table

我需要一些关于 php 的帮助。我对这种语言相当陌生，尽管我在 Wamp 上将它用于一个网站，该网站应该显示一个带有 ID 的表格，并且每行中都有一个提交按钮，单击该按钮时，应该只显示该特定行的信息。我想出的语法有一个问题，它显示了所有行的信息，而不仅仅是点击的那一行。代码如下：

```
<?php
  print "<table>"; 
```

表头

```
 print "<tr>";
      print "<th>ID</th>";
      print "<th>Click to View Row Info</th>";
    print "</tr>"; 
```

表格内容（5 行中的 ID 和按钮）

```
 for ($i=1; $i<=5; $i++){
    print "<tr>";
      print "<form method=\"post\" action=\"Popup.php\">";
      print "<td>";
      print "<input name=\"$i\" type=\"text\" value=\"";
      echo $i;
      print "\"/>";
      print "</td>";

      print "<td>";

      print "<input type=\"submit\" name=\"submit\" value=\"View Row\" /></form>";
      print "</td>";

    print "</tr>";
  } 
```

Popup.php 显示代码片段

```
 $sub=$i;

  for ($i=0; $i<=$sub; $i++){
  print "The ID for this row is: ";
  echo $i; 
  }
?> 
```

Popup.php 是一个单独的文件，它接收表单变量并显示它。如果我能在这方面得到一些帮助，我将不胜感激。如果我的问题有任何不清楚的地方，请随时告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T23:33:20.283

表单需要在循环之外（并且也应该在 tbale 之外）另外，像这样更改输入名称，这样

```
print "<form method=\"post\" action=\"Popup.php\">";

for ($i=1; $i<=5; $i++){
    print "<tr>";

      print "<td>";
      print "<input name=\name[$i]\" type=\"text\" value=\"";
      echo $i;
      print "\"/>";
      print "</td>";

      print "<td>";

      print "<input type=\"submit\" name=\"submit\" value=\"View Row\" /></form>";
      print "</td>";

    print "</tr>";
  } 
```

然后在 popup.php 中将其更改为

```
 foreach($_POST['name'] as $key=>$value)
    print "The value for $key is: $value"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T23:34:40.900

首先，使用一个常量作为`name attribute`输入元素的 ID

```
print "<input name='val' type=\"text\" value=\""; 
```

然后改变这一行

```
$sub=$i; 
```

到

$sub = $_POST['val'];

# jquery - jQuery子菜单显示隐藏的div，但当我悬停div时消失

> ID：11302525
> 
> 赞同：1
> 
> 时间：2012-07-02T23:26:39.387
> 
> 标签：jquery

我正在尝试构建一个 jQuery 子菜单下拉菜单。

如果我悬停菜单链接按钮，进入子菜单并退出，我的代码可以正常工作。

但是，如果我悬停菜单链接按钮，然后是另一个菜单按钮，子菜单永远不会消失。

我希望它...

1.  悬停链接按钮时显示子菜单。
2.  悬停任一按钮时，继续显示活动按钮链接和子菜单。
3.  退出按钮或子菜单时关闭活动菜单按钮和子菜单（但退出子菜单进入活动按钮时不关闭）。

我希望这是有道理的！

这是我的 HTML：

```
<ul class="mainmenu">
    <li><a href="">normal</a></li>
    <li class="menudrop"><a href="">dropdown</a></li>
</ul>

<div class="submenu">
    <h3>Aliquam id libero</h3>
    <ul>
       <li><a href="">Vestibulum in purus</a></li>
       <li><a href="">Lectus id vestibulum</a></li>
       <li><a href="">Suspendisse posuere</a></li>
       <li><a href="">Nam ut bibendum</a></li>                                  
   </ul>
</div> 
```

这是我正在使用的 jQuery：

```
$(function() {  
$(".menudrop").hover(
    function () {
        $(".submenu").show();
    }       
 );         
$(".submenu").hover(
    function () {
        $(".menudrop").addClass("active");
        $(".submenu").show();
    },
    function () {
        $(".menudrop").removeClass("active");
        $(".submenu").hide();
    }
 );         
}); 
```

另外，我最初将子菜单设置为在 CSS 中不显示。

```
.submenu {
position: absolute;
z-index: 2000;
width: 970px;
display: none;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T23:52:11.353

当您将鼠标悬停在 .menudrop 时，它会激活子菜单，但离开它并不会停用子菜单，因此您可以恢复正常并打开菜单。

当您悬停子菜单时，它会激活并在休假时隐藏，但如果您尝试恢复正常，.menudrop 会再次显示它

如果你添加css你会更好地理解它

.mainmenu li {显示：内联}

最好将子菜单放在 .menudrop 中，并使用下拉菜单在 .hover 进入/离开时显示/隐藏。最终，您最终会出于格式目的使用一些额外的 div。

在这里看小提琴：http: [//jsfiddle.net/m2Gfe/2/](http://jsfiddle.net/m2Gfe/2/)

当鼠标从 .menudrop 过渡到 .submenu 时，菜单之间仍然存在故障，它们可能会隐藏子菜单，但这可以通过填充和重叠来解决

# c# - 枚举列表框的每个项目以比较内部元素值

> ID：11302530
> 
> 赞同：0
> 
> 时间：2012-07-02T23:27:13.317
> 
> 标签：c#, xaml

我有一个列表框，其中的数据模板绑定到`list<class>`程序中的 a。

```
<DataTemplate x:Key="pTemplate">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="{Binding Ref}" Padding="5,0,0,0"/>
                <StackPanel Name="taggedA" Tag="{Binding A}" Orientation="Horizontal">
                    <TextBlock Name="selectedA" Text="{B}" />
                </StackPanel>
                <Image Name="ind" Width="40" Height="40" />
            </StackPanel>
</DataTemplate> 
```

单击按钮时，我想查看列表框的所有元素并检查 stackPanel`taggedA`的标签 == textblock`selectedA`的文本。

这要对列表框中的每个项目进行，数据模板如上。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T01:54:58.690

更容易直接比较绑定源：

```
ListBox l = myListBox;
for (int i = 0; i < l.Items.Count; i++)
{
    var boundObject = (MyClass)l.Items[i];
    MessageBox.Show("They are equal? " + (boundObject.A == boundObject.B));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T03:08:39.537

我同意@dbaseman。但是，如果您打算这样做，则可以执行以下操作：

```
private void button_click(object sender, RoutedEvent e)
{
    foreach(var item in MyListBox.Items)
    {
        ListBoxItem lbi = MyListBox.ItemContainerGenerator.ContainerFromItem(item);
        StackPanel taggedApanel = (lbi.Content as StackPanel).Children[1];
        //Do whatever you need to do here
    }
} 
```

# eclipse - 如何在 Eclipse 的类路径中放置文件？

> ID：11302531
> 
> 赞同：56
> 
> 时间：2012-07-02T23:27:20.867
> 
> 标签：eclipse, classpath

正如本[文档](http://activemq.apache.org/jndi-support.html)所说，*“例如，如果您将此 jndi.properties 文件放在类路径中”*，但是如果我使用 Eclipse，如何将 .properties 文件放在我的类路径中？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-07-03T21:50:41.447

只是补充。如果您右键单击一个 Eclipse 项目并选择`Properties`，请选择`Java Build Path`左侧的链接。然后选择`Source`选项卡。您将看到所有 java 源文件夹的列表。您甚至可以添加自己的。默认**情况下**，该`{project}/src`文件夹是类路径文件夹。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-07-02T23:32:00.447

一种选择是将属性文件放在项目的 src/ 目录中。这将在构建时将其复制到“类”（连同您的 .class 文件）。我经常为 web 项目这样做。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-11-19T21:43:43.893

这可能不是最有用的答案，更像是一个附录，但上面的答案（来自 greenkode）让我困惑了 10 秒。

“添加文件夹”仅允许您查看作为您正在查看其构建路径的项目的子文件夹的文件夹。

上图中的“链接源”按钮在理想情况下称为“添加外部文件夹”。

我必须制作一个要在多个项目之间共享的属性文件，并且通过将属性文件保存在外部文件夹中，我只能拥有一个，而不是在每个项目中都有一个副本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-13T11:50:28.120

那么其中一个选项是转到您的工作区，您的项目文件夹，然后复制并粘贴 log4j 属性文件。最好将文件也粘贴到源文件夹中。

现在你可能想知道从哪里得到这个文件，下载 smslib，然后解压它，然后 smslib->misc->log4j 示例配置 -> log4j 就可以了。

这有什么帮助，我只是想知道。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-25T22:10:02.353

将文件复制到您的 src 文件夹中。转到 Eclipse 中的 Project Explorer，右键单击您的项目，然后单击“Refresh”。该文件也应该出现在 Project Explorer 窗格中。

# cakephp - 是否可以使用 Cakephp 中的 saveAll 一次将所有相关记录插入到 HABTM 中？

> ID：11302535
> 
> 赞同：0
> 
> 时间：2012-07-02T23:27:59.123
> 
> 标签：cakephp, has-and-belongs-to-many

我有两个模型：Action HABTM Image

我没有表格，因为我正在使用 cakephp 之外的代码生成 Post 数据。在帖子中，我将此数据发送到 ActionController 进行保存：

```
data[Action][id] = 5e0ece37-bc8a-4bb9-a95d-1572dcfb4a96
data[Action][action_type_id] = 69c34b29-c247-11e1-b880-f46d04737d8a
data[Image][0][id] = 9d8c1ade-2b1b-48be-a4be-f9d3176601fc
data[Image][0][url] = file%3A%2F%2F%2Fmnt%2Fsdcard%2FDCIM%2FCamera%220120702_140539.jpg
data[Image][0][action_id] = 5e0ece37-bc8a-4bb9-a95d-1572dcfb4a96
data[Image][1][id] = 7cc3f6e4-7143-41ef-b98d-a766b8b1fffe
data[Image][1][url] = file%3A%2F%2F%2Fmnt%2Fsdcard%2FDCIM%2FCamera%220130702_140539.jpg
data[Image][1][action_id] = 5e0ece37-bc8a-4bb9-a95d-1572dcfb4a96 
```

现在，当我调用 saveAll($this->data) 时，只保存了 Action。我一直无法找到同时保存两个相关模型的示例，但只有一个模型和连接表中的记录（actions_images）。¿ 有没有办法用 saveAll 做到这一点？¿ 或者我需要单独保存模型吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:53:15.330

它可能只是数组的格式需要不同。

烹饪书的这一章应该会有所帮助：[保存相关模型数据（HABTM）](http://book.cakephp.org/2.0/en/models/saving-your-data.html#saving-related-model-data-habtm)

# visual-studio-2012 - 如何将 Visual Studio 2012 RC 的帮助查看器固定到任务栏？

> ID：11302536
> 
> 赞同：2
> 
> 时间：2012-07-02T23:28:00.653
> 
> 标签：visual-studio-2012

如果我从 Visual Studio 2012RC 中打开帮助查看器，然后使用“将此程序固定到任务栏”功能，它创建的图标将不起作用。当我尝试打开它时，我收到一条错误消息：

```
---------------------------
Microsoft Help Viewer 2.0
---------------------------
The Help Viewer command line has missing parameters. Specify the
required parameters, or run Help Viewer by using the application 
shortcut. 

For help with command syntax and options, use the /? parameter.
---------------------------
OK   
--------------------------- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T23:28:00.950

要解决此问题，您需要提供在固定帮助查看器时未应用的正确命令行参数。

为此：右键单击固定图标，然后右键单击“HlpViewer”项并选择“属性”。在打开的对话框中更改“目标”值并将以下内容添加到末尾：

```
/catalogName VisualStudio11 /locale en-US /sku 3000 
```

这应该修复它，以便它打开帮助查看器，就像从 Visual Studio 的帮助菜单中一样。我不确定 sku 编号到底是多少，这是 2012 Ultimate RC 的。

# php - 表单的电子邮件内容 - 如何部署

> ID：11302541
> 
> 赞同：0
> 
> 时间：2012-07-02T23:28:13.867
> 
> 标签：php, javascript, html, ajax, email

我正在尝试构建一个表单，其内容将通过电子邮件发送。我一直在[这里](https://stackoverflow.com/questions/11283422/send-email-with-php-ajax-from-html-form)关注这篇文章，因为我以前从未处理过表单，也没有处理过 PHP。我有表单的前端工作，但不确定后端 PHP 部分是否可以工作。

我的问题是如何测试我的 PHP 代码并将其部署到客户的网络主机上？我假设要进行测试，我必须安装 Apache 和 Mercury（通过 XAMPP），以便拥有本地邮件服务器？当我将代码部署到客户的网络主机时怎么样。我是否需要进行任何特殊配置，或者我可以像往常一样上传文件吗？

[Javascript（从这里](https://stackoverflow.com/questions/11283422/send-email-with-php-ajax-from-html-form)复制）

```
var data = "This is my email";

$.ajax({
    type: "POST",
    url: "email.php",
    data: data,
    dataType: "text"
}); 
```

[PHP（也从这里](https://stackoverflow.com/questions/11283422/send-email-with-php-ajax-from-html-form)复制）

```
$to = "myself@hotmail.com";
$subject = "This is my email";
$message = $_REQUEST["data"];
$send = mail($to, $subject, $message);

if (!$send) {    
    die();  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T23:41:01.333

我不推荐 Apache 和 Mercury（通过 XAMPP）。我的 isp 阻止了来自我的家用计算机的电子邮件，因此此选项仅适用于发送到本地主机。花了更多时间来建立它是值得的。更好的选择是将您的代码放在服务器上并现场试用。

我已经可以告诉你这行不通。

试试这个为你的 ajax 代码。Post 参数必须是键值对。

```
var data = "This is my email";

$.ajax({
    type: "POST",
    url: "email.php",
    data: {
        data : data
    },
    dataType: "text"
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T23:34:18.527

您必须将包含 PHP 代码的 email.php 文件`<?php /*code here*/ ?>`放在 Web 服务器上的相应目录中。Web 服务器必须支持 PHP。您可以尝试`<?php print "PHP works." ?>`在您的网络服务器上创建一个文件并在您的浏览器中访问它。

# vb.net - App.Config - 客户端应用程序或类库

> ID：11302546
> 
> 赞同：0
> 
> 时间：2012-07-02T23:28:54.520
> 
> 标签：vb.net

我有在 ASP.NET 中使用 Web.Config 文件的经验。我正在尝试将 app.config 文件添加到 VB.NET 项目中。

如果我将 app.config 添加到客户端应用程序，我可以在其中一个类（在类库中）中检索连接字符串，但如果我将 app.config 添加到类库项目，我将无法这样做（我收到“对象不是实例”错误）。将 app.config 添加到客户端应用程序和将其添加到类库有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T23:55:13.493

app.config 始终属于可执行程序集。如果一个库尝试读取 app.config，它实际上将读取属于正在使用该库的任何可执行文件的 app.config。这就是为什么您可以在可执行文件的 app.config 中放置适用于各种 .NET 框架库的设置的原因。

# c++ - C++ 不是命名空间

> ID：11302551
> 
> 赞同：0
> 
> 时间：2012-07-02T23:29:25.957
> 
> 标签：c++, namespaces

我真的不知道如何解释这一点。

我在命名空间中有 2 个类 World 和 Entity：

> 阿尔忒弥斯::系统；

和一个类组件

> artemis::组件；

我已经遇到了 World 和 Entity 的问题，在尝试编译时它说它们中的任何一个都不是声明的类型。（它们都相互包含）所以在两个类中，在命名空间中，我添加了一个前向声明。这似乎可以解决问题。

现在，当我尝试在 Component.h 中包含“世界”时，它给了我以下错误：

> 组件不是命名空间名称

我的 Component 类位于命名空间 artemis::component 中。

这真让我抓狂。我真的不明白是什么导致了这个错误。

头组件.h

```
#ifndef _COMPONENT_H_
#define _COMPONENT_H_

#include <bitset>
#include "BitSize.h"
#include "World.h"
#include <unordered_map>
#include <typeinfo>
#include <string>
#include <iostream>
#include <assert.h>
//#include "EntityManager.h"

using namespace std;
using namespace artemis::system;

namespace artemis {
    namespace component {

        class Component {
            public:
                virtual ~Component() = 0;
            protected:
                Component(){};
        };

        /**
         * Identifies a bitset and id for a component object
         * Do not instantiate a ComponentType, instead use the ComponentTypeManager.
         * */
        class ComponentType {

            public:
                ComponentType();

                bitset<BITSIZE> getBit() const;
                int getId() const;
            private:

                static bitset<BITSIZE> nextBit;
                static int nextId;

                bitset<BITSIZE> bit;
                int id;
                void init();

        };

//Surpress unused variable warnning. Might need to rewrite it
//#pragma GCC diagnostic push
//#pragma GCC diagnostic ignored  "-Wunused-variable"
        /**
         * Manages the id and bitset for every component based on their type.
         * */

        class ComponentTypeManager {

            private:
                ComponentTypeManager();
                static unordered_map<size_t,ComponentType*> componentTypes;

        public:

                /**
                 *
                 **/
                static ComponentType & getTypeFor(const type_info &t);

                /**
                * Gets the component type object
                **/
                template<typename c>
                static ComponentType & getTypeFor() {

                    //Check if we are being legal with components and shizzle
                    //Component * c = (component*)0;

                    assert((std::is_base_of< Component, c >::value == true));

                    return getTypeFor(typeid(c));
                }

                /**
                * Gets the bit set of a component
                **/
                template<typename c>
                static bitset<BITSIZE> getBit() {

                    //Check if we are being legal with components and shizzle
                    //Component * c = (component*)0;

                    assert((std::is_base_of< Component, c >::value == true));

                    ComponentType & type = getTypeFor(typeid(c));
                    return type.getBit();
                }
                /**
                 * Gets the component id
                 **/
                template<typename c>
                static int getId() {

                    //Check if we are being legal with components and shizzle

                    assert((std::is_base_of< Component, c >::value == true));

                    ComponentType & type = getTypeFor(typeid(c));
                    return type.getId();
                };

                //typedef getCompBit bitset<BITSIZE>(*getBit<Component>)();

        };
//#pragma GCC diagnostic pop

        /*template<typename T>
        class ComponentMapper {

            private:
                //ComponentType * type;
                EntityManager * em;

            public:

                ComponentMapper(World &world) {
                    em = world.getEntityManager();
                    //type = ComponentTypeManager::getTypeFor<T>();
                }

                ~ComponentType() {
                    type = nullptr;
                    em = nullptr;
                }

                T & get(Entity * e) {
                    return &(T)em->getComponent<T>(e);
                }

        };*/

    };
};

#endif 
```

标头实体.h

```
#ifndef _ENTITY_H
#define _ENTITY_H

#include <bitset>
#include <string>
#include <cstddef>
#include <typeinfo>
#include "BitSize.h"
#include "Component.h"
#include "ImmutableBag.h"
#include "World.h"
//#include "EntityManager.h"

using namespace artemis::util;
using namespace artemis::component;
//using namespace artemis;
using namespace std;

namespace artemis {
    namespace system {
        class World;
        class Entity {

            private:
                int id;
                long int uniqueId;
                bitset<BITSIZE> typeBits;
                bitset<BITSIZE> systemBits;
                World * world;
                //EntityManager * entityManager;
            protected:

            public:
                Entity(World * world, int id);
                ~Entity();
                int getID();
                void setUniqueId(long int uniqueId);
                long int getUniqueID();

                bitset<BITSIZE> getTypeBits();
                void addTypeBit(bitset<BITSIZE> bit);
                void removeTypeBit(bitset<BITSIZE> bit);
                bitset<BITSIZE> getSystemBits();
                void addSystemBit(bitset<BITSIZE> bit);
                void removeSystemBit(bitset<BITSIZE> bit);
                void setSystemBits(bitset<BITSIZE> systemBits);
                void setTypeBits(bitset<BITSIZE> typeBits);
                void reset();

                string toString();

                void addComponent(Component * c);

                //Might change to non template
                template<typename c>
                void removeComponent() {
                    //entityManager->removeComponent(this,ComponentTypeManager::getTypeFor<c>());
                }

                void removeComponent(ComponentType & type);
                bool isActive();

                Component * getComponent(ComponentType & type);

                /*template<typename c>
                Component * getComponent() {
                    return (c)entityManager->getComponent(ComponentTypeManager.getTypeFor<c>());
                }*/

                ImmutableBag<Component*> * getComponents();
                void refresh();
                void remove();
                void setGroup(string group);
                void setTag(string tag);

        };
    };
};
#endif // $(Guard token) 
```

标头世界.h

```
#ifndef _WORLD_H_
#define _WORLD_H_

//#include "SystemManager.h"
//#include "EntityManager.h"
#include "ImmutableBag.h"
#include "Entity.h"

using namespace artemis::util;

namespace artemis {
    namespace system {

    class Entity;

        class World {
            public:
                World();
                ~World();
                //SystemManager * getSystemManager();
                //EntityManager * getEntityManager();
                //TagManager *   getTagManager();
                //GroupManager * getGroupManager();
                int getDelta();
                void setDetla(int delta);
                void deleteEntity(Entity *e);
                void refreshEntity(Entity *e);
                //Entity* createEntity();
                //Entity* getEntity(int entityID);
                void loopStart();

            private:
                //SystemManager * systemManager;
                //EntityManager * entityManager;
                //TagManager * tagManager;
                //GroupManager * grouManager;
                int delta;
                Bag<Entity*> refreshed;
                Bag<Entity*> deleted;

        };
    };
};
#endif // $(Guard token) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T23:43:01.370

您的问题是您需要`Component`已经定义才能创建`World`，并且您需要`World`被定义才能创建`Component`。这是不可能的; 每个人的定义都需要另一个人。

您需要重组您的类，以便您不需要`Component`在`World`' 标头中定义，或者您不需要`World`在`Component`' 标头中定义。您始终可以将它们包含在 .cpp 中，但不能包含在标头中。这是一个循环包含问题。您还可以前向声明其中一个类。

您本质上是在说：`A`除非我已经创建，否则我无法创建`B`；`B`除非我已经创建，否则我无法创建`A`。这是不可能的，编译器就是这么告诉你的。

# ruby - 当 URL 有 2 个子级别时，Sinatra 不加载布局文件

> ID：11302556
> 
> 赞同：1
> 
> 时间：2012-07-02T23:29:45.180
> 
> 标签：ruby, sinatra

我有这个代码：

```
# Users page
get '/admin/users' do
  @title = "Admin - Users"
  erb :admin_users
end 
```

呈现视图时，我在 ERB 文件中获得了 HTML，但布局文件未呈现。如果我将路线更改为“/users”，一切都会正常。是什么赋予了？在找到有关如何执行此操作的示例代码并遇到此问题后，我最初将用户 ERB 页面放在子目录“views/admin”中。我认为这就是原因，但似乎是导致问题的 URL。还有其他人遇到这个或知道解决方法吗？

我所有其他的观点也都很好。这是我尝试使用 URL 模式的第一个视图。我也试过这个，但它没有影响任何东西。

```
# Users page
get '/admin/users' do
  @title = "Admin - Users"
  erb :admin_users, :layout => :layout
end 
```

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-01T06:09:05.283

我遇到了同样的问题，请检查布局中资产的路径。您应该`/`先添加。

`<link href='/stylesheets/application.css' rel='stylesheet' type='text/css'>`是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:18:27.760

如果您使用`admin_users`视图的子目录，您应该将其保存为`views/admin/users.erb`然后渲染它

get '/admin/users' 做 erb :'admin/users' end

也许这已经解决了您的问题。如果您需要更多帮助，请告诉我。

我想当您为管理视图设置与文件位置不同的视图目录时，您可能会遇到麻烦`layout.erb`。你试过`layout.erb`在`views/admin/`文件夹里放一个假人吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-27T18:24:33.260

你没有显示你得到的确切错误。我假设模板“admin_users.erb”是“没有这样的文件或目录”。

您的“erb”调用中缺少一个选项，您应该告诉 Sinatra 在哪里可以找到模板。这对我有用：

```
# Users page
get '/admin/users' do
  @title = "Admin - Users"
  erb :'admin/admin_users', :layout_options => { :views => 'views/admin' }
end 
```

`views/admin/admin_users.erb`它使用来自的布局呈现模板`views/admin/layout.erb`

# c - 新手语法问题：错误：预期的';' 在 ')' 标记之前

> ID：11302557
> 
> 赞同：0
> 
> 时间：2012-07-02T23:29:45.953
> 
> 标签：c

在两个 for 循环（即：for(len... 和 for(wid...)）上，我收到相同的错误消息：

错误：预期的';' 在 ')' 标记之前

```
void
init(void)
{
    //fills board up with numbers
    int tile = (d*d - 1);
    int len = 0;
    int wid = 0;

    for(len < d; len++)
        {
            for(wid < d; wid++)
                {
                    board[len][wid] = tile;
                    tile--;
                }
        }
} 
```

很抱歉问了一个和以前类似的问题，但我是一个非常困惑的新手！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T23:30:46.873

每个 for 循环都需要有它的 3 个部分（初始化、测试、更新），如果你没有其中一个或多个，你仍然需要提供两个`;`，所以

```
for(len < d; len++)
    ^
    | 
```

真的应该

```
 |
    v
for(;len < d; len++) 
```

函数中的另一个 for 循环也是如此。

例如，您可以使用以下方法设置*无限*循环`for`：

```
for(;;) 
```

其中所有部分都被跳过，但仍然需要两个分号。

也许这是for 循环上的[教程/参考](http://www.tutorialspoint.com/cprogramming/c_for_loop.htm)，作为评论/参考很有帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-02T23:30:58.497

一般来说，一个 for 循环包含三个部分：

```
for (initialization; check; update) { ... } 
```

在您的代码中，您缺少初始化部分。您在 for 循环中缺少一个分号，表示您不需要初始化子句（因为您在上面执行了此操作）：

```
void
init(void)
{
//fills board up with numbers
int tile = (d*d - 1);
int len = 0;
int wid = 0;

for(;len < d; len++)
    {
        for(;wid < d; wid++)
            {
                board[len][wid] = tile;
                tile--;
            }
    } 
```

}

# ios - 跨多台 Mac 同步配置文件

> ID：11302565
> 
> 赞同：1
> 
> 时间：2012-07-02T23:30:28.220
> 
> 标签：ios, iphone, macos, provisioning-profile

我目前有多台用于 iOS 开发的 mac 机器，它们定期从 SVN 存储库构建应用程序。时不时会有新的配置文件，或使用新设备更新的配置文件，目前我通过将配置文件单独安装到每台机器上来维护它们。有什么方法可以在多台机器上自动同步配置文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T01:05:40.277

你为什么不把它们签入SVN？您可以创建一个单独的目录，或者只是将它们放在项目工作区中。

# java - Android 应用程序在主 Activity 启动时强制崩溃

> ID：11302567
> 
> 赞同：0
> 
> 时间：2012-07-02T23:30:32.913
> 
> 标签：java, android, eclipse

我刚开始处理这个应用程序，我觉得我做的一切都是正确的（这不是我一直在处理的第一个应用程序）但是当我尝试运行它时它崩溃了？它没有给我任何错误。

这是来自主要活动的代码，然后是来自manufest，然后是来自xml布局的代码。`

```
 package com.theory.game;
     import java.util.Random;
     import android.app.Activity;
     import android.content.Intent;
     import android.os.Bundle;
     import android.view.View;
     import android.widget.Button;

    public class GameTheoryActivity extends Activity implements View.OnClickListener{

    Button play, settings;
    int i;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        play.setOnClickListener(this);
        settings.setOnClickListener(this);

    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch(v.getId()){
        case R.id.bPlay:

            Random irand = new Random();
            i = irand.nextInt(4);

            switch(i){
            case 0:

                Intent GoMillionair = new Intent(GameTheoryActivity.this, millionair.class);
                startActivity(GoMillionair);
                return;
            case 1:
                return;
            case 2:

                return;
            case 3:

                return; 
            }

            return;
        case R.id.bSettings:
            return; 
        }
    }
} 
```

制造：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.theory.game"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="15" />

    <application >
        <activity
            android:name=".GameTheoryActivity" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".millionair" >
            <intent-filter>
                <action android:name="com.theory.game.MILLIONAIR" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/backgroundimage"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="390dp"
        android:orientation="vertical" >
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <Button
            android:id="@+id/bPlay"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0.38"
            android:background="@drawable/play" />

        <Button
            android:id="@+id/bSettings"
            android:layout_width="match_parent"
            android:layout_height="58dp"
            android:layout_weight="0.36"
            android:background="@drawable/settings" />
    </LinearLayout>

</LinearLayout> 
```

`

我还有一个叫做百万航空的班级，这只是一个普通的班级，没什么，我猜没有错。请检查这是怎么回事，让我知道为什么我的应用程序不会开始说它“已停止工作”.. 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T23:39:05.473

您可能会得到一个`NullPointerException`，因为您忘记将按钮分配给您的字段 ( `Button play, settings;`)。

以下是如何分配它们的示例：

```
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    play = (Button) findViewById(R.id.bPlay);
    settings = (Button) findViewById(R.id.bSettings);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T23:35:07.180

我的猜测是你得到一个 NullPointerException 因为`play`和`settings`对象都是空的。

将您的 onCreate() 更改为如下所示：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    play = (Button)findViewById(R.id.bPlay);
    settings = (Button)findViewById(R.id.bSettings);

    play.setOnClickListener(this);
    settings.setOnClickListener(this);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T23:35:14.823

当您尝试在 onCreate() 方法期间使用 then 时，看起来 play 和 settings 都将为空：

```
play.setOnClickListener(this);
settings.setOnClickListener(this); 
```

确保像这样启动它们：

```
play = (Button)findViewById(R.id.bPlay);
settings = (Button)findViewById(R.id.bSettings)
play.setOnClickListener(this);
settings.setOnClickListener(this); 
```

# javascript - 等优先视图排序规则 CouchDB？

> ID：11302568
> 
> 赞同：0
> 
> 时间：2012-07-02T23:30:38.043
> 
> 标签：javascript, couchdb, collation, couchapp, couchbase

根据**CouchDB** ( [http://wiki.apache.org/couchdb/View_collat ​​ion) 的](http://wiki.apache.org/couchdb/View_collation)**视图整理**文档，成员**顺序**对**整理**很重要。我想知道是否有办法**禁用**此属性，以便排序顺序无关紧要？我希望能够“搜索”我的视图，以便发出的文档满足该字段的所有键范围。

 ******这里有一些关于视图排序的更多信息供您参考：[CouchDBsorting and filtering in the same view](https://stackoverflow.com/questions/3311225/couchdb-sorting-and-filtering-in-the-same-view)

同样，如果可以设置 CouchDB 使得顺序对于视图排序无关紧要，则用于**GET**请求的以下参数应该只发出**doc.phone_number == "ZZZZZZZ"**的文档，而现在它会发出落在在前 3 个键的范围内，完全忽略最后一个键。发生这种情况是因为最后一个键在当前排序规则中的优先级最低。

**开始键：[null,null,null,"ZZZZZZZ"] **,****

 ****结束键：["\ ufff0** ","\ufff0","\ufff0","ZZZZZZZZ"],

**样本映射函数**

```
var map = 函数（文档）{

                    /*
                    //发出的键
                    1.名称
                    2\. 地址
                    3\. 年龄
                    3.电话号码
                    */
                    发出（[doc.name，doc.address，doc.num_age，doc.phone_number]，doc._id）
                }

```

这可能吗，还是我必须创建多个视图才能执行此操作？使用多个视图似乎非常低效。

我读过**CouchDB-Lucene** :([如何在 couchdb 中实现复杂的搜索过滤器？我应该避免临时视图吗？](https://stackoverflow.com/questions/6717323/how-to-realize-complex-search-filters-in-couchdb-should-i-avoid-temporary-views)）将有助于复杂的搜索，但这似乎不适用于这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:42:23.683

使用多个视图并不是低效的，恰恰相反：拥有四个视图（姓名、地址、年龄和电话号码）不会比使用单个视图发送所有内容使用更多的时间或内存。这是在 CouchDB 中执行“WHERE field = value”查询的简单、直接、高效的方式。

如果您实际上是在寻找“WHERE field = value AND field2 = value2”查询，那么 CouchDB 将无法帮助您，您将需要使用 Lucene。

您需要了解排序规则仅描述键的*排序*方式。即使您可以指定任意排序规则，您仍然必须处理 CouchDB 需要您为键定义顺序，并且只允许您查询连续范围的键的事实。这与多维范围查询不兼容。********

# java - 什么时候应该创建新的线程组

> ID：11302569
> 
> 赞同：0
> 
> 时间：2012-07-02T23:30:44.077
> 
> 标签：java, android, multithreading, threadgroup

我想知道，将线程分配给线程组而不是将它们全部包含在一个（主）组中的优点是什么？

假设有 10 个或更多持续活动的线程，并且根据应用程序的需要不时启动几个线程，一种方法将如何对这些进行分组？

谢谢，亚当。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T11:24:20.353

完全没有优势。ThreadGroups 是为了向后兼容，但我从未见过它们被使用过。

这是 Brian Goetz（*Java Concurrency in Practice* - 圣经的作者）很久以前[对它们的评价：](http://www.ibm.com/developerworks/java/tutorials/j-threads/j-threads-pdf.pdf)

> ThreadGroup 类最初旨在用于将线程集合结构化为组。然而，事实证明 ThreadGroup 并不是那么有用。最好只使用 Thread 中的等效方法。ThreadGroup 确实提供了一个在 Thread 中没有（还）存在的有用特性：uncaughtException() 方法。当线程组中的线程因为抛出未捕获的异常而退出时，将调用 ThreadGroup.uncaughtException() 方法。这使您有机会关闭系统、将消息写入日志文件或重新启动失败的服务。

线程现在有一个未处理的异常处理程序，并且这个使用线程组的单一原因不再有效。

# django - 多页 django 表单 - 滑块还是 FormWizard？

> ID：11302572
> 
> 赞同：0
> 
> 时间：2012-07-02T23:30:48.290
> 
> 标签：django, css, django-forms, django-formwizard

我有一个很长的表格，我想分成多页。

我正在评估两个演示选项：

1.  [使用FormWizard](https://docs.djangoproject.com/en/dev/ref/contrib/formtools/form-wizard/)在多个页面上显示表单
2.  将表单呈现在[CSS3 滑块](http://csscience.com/responsiveslidercss3/)等滑块上。

滑块实际上只有一页长，使用 CSS3 给人以幻灯片的印象。它使所有内容区域彼此相邻浮动，隐藏溢出，`width`如果我们有 5 张幻灯片，则将页面设置为 500%，并将左边距移动 -100% 以显示下一张幻灯片。所以它都是一页，但似乎表单正在滑动页面上显示。

对我来说，滑块方法的优点是只有一个表单，用户在幻灯片结束时只提交一次表单，因此可以来回进行更改。（这将是一种常见情况）。

与在每个页面之后都有迷你表单`FormWizard`并提交它们相比。对我来说，`FormWizards`这似乎很复杂，特别是如果用户想要更改任何以前的页面响应。我还需要`FileField`在我的表单页面上，似乎只在最后一页上`FormWizard`接受。`FileField`

但是，我还没有看到很多人使用这种滑动表单（CSS3 或 JScript 之一）方法。因此，作为一个新手，我想知道这样做是否有一些明显的陷阱？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:49:56.367

我只能写`FormWizard`我以前用过的。根据 Django 文档的“处理文件”部分，可以在

[https://docs.djangoproject.com/en/dev/ref/contrib/formtools/form-wizard/](https://docs.djangoproject.com/en/dev/ref/contrib/formtools/form-wizard/)

a`FileField`可用于`FormWizard`实施的任何步骤。我发现使用`FormWizard`Django 真正有用的是，它为您提供了`Forms`. 这意味着您可以轻松地创建和操作表单、在每个步骤中验证字段等。我不知道 CSS3 滑块如何完成验证，但我想验证应该在客户端进行。

此外，Django`FormWizard`使用 Cookie 存储后端或 Session 存储后端来存储信息，这使得步骤之间的导航和修改以前存储的数据非常简单。

我希望我对你的决定有所帮助！`FormWizard`当然可以在我上面提供的链接中的 Django 文档中找到更多信息。

# ruby-on-rails-3 - 保存 has_one 关联的结果以避免在 Rails 中获取数据库？

> ID：11302577
> 
> 赞同：0
> 
> 时间：2012-07-02T23:31:12.393
> 
> 标签：ruby-on-rails-3, optimization, model, has-one

**我在用户**模型和**播放器**模型之间有`has_one`关联。我看到自己在控制器和视图中多次执行 current_user.player，并且我觉得每次执行此操作时都对数据库造成了太多影响。还有一个 current_player 方法会很好。

 ****我将如何以及在哪里定义这样的方法，以便我可以`current_player`从控制器和视图访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T04:20:27.203

每次您点击页面时，它（正确地）至少会重新加载一次，但您可以通过[记忆](http://en.wikipedia.org/wiki/Memoization)结果来帮助防止以下加载：

```
class User
  has_one :player
  def current_player
    @current_player ||= player
  end
end 
```

作为替代方案，您可以将播放器模型包含在默认范围内，以便在加载用户模型时加载它：

```
class User
  has_one :player
  default_scope includes(:player)
end 
```

不幸的是，每当我尝试过时，我往往会很快发现我实际上并不希望它*每次都*自动加载另一个表，并切换回以前的方法，该方法只在第一次使用时从第二个表加载。简单地将对象记忆到 ivar 中要灵活得多。****

# php - 用 php 校对（修正标点符号、空格、大写字母）生物页面文本

> ID：11302579
> 
> 赞同：-1
> 
> 时间：2012-07-02T23:31:32.620
> 
> 标签：php

我需要帮助来修剪用户在其个人资料中提交的生物信息。有时会出现校对问题：“这是 Mike 的简历，OF 是大写的，没有理由！问号和那里的单词之间没有空格？问号也应该有空格。在停车标志之后也应该有大写，逗号之间有空格，and,this,one"

这是我的想法：

首先我会修剪 $bio var

```
$bio = trim($bio); 
```

然后我会在标点符号后添加空格 - 很确定这是不正确的，因为它用逗号替换了每个标点符号类型。

```
$bio = str_replace(array(",","!","?"),", ", $bio); 
```

然后我会把所有的字母都变成小写；这不起作用，因为我需要在 $bio 变量中保留句子第一个单词的第一个字母的大写。

```
$bio = strtolower($bio); 
```

最后，我将第一个大写；但我需要一种将每个单词的首字母大写的方法，由 ! ? - 或停车标志，你知道...除了逗号。

```
$bio = strtoupper($bio); 
```

希望你能帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T23:46:45.717

我必须警告你，它看起来毫无希望。

无论如何，您可以使用一系列正则表达式来做一些事情：

```
 // This replaces , . ! ? (if NOT followed by a space) with the same (\1),
 // followed by a space, followed by whatever followed it before (\2).
 // Note that . and ? are special characters for regexes, so we have to
 // escape them with a "\".
 $bio = preg_replace('#([,\.!\?])(\S)#ms', '\1 \2', $bio);

 // Then replace all extra spaces: any sequence of 2 or more spaces is
 // replaced by one space.
 $bio = preg_replace('# {2,}#ms', ' ', $bio);

 // Then ., !, and ? followed by lowercase should uppercase it
 // We take the full monty, ". m" and uppercase it all. Since the uppercase
 // of ". " remains ". ", we keep things simpler.
 $bio = preg_replace('#[\.!\?] [a-z])#ms', 'strtoupper("\1")', $bio);

 // Then replace ALL CAPS words with lowerspace equivalent.
 // Doesn't seem a really good idea though: "I am Mike, I worked with NASA"
 // and NASA becomes nasa?
 $bio = preg_replace('# ([A-Z][A-Z]+)#mse', 'strtolower(" \1")', $bio); 
```

这样，你的句子就变成了：

这是迈克的简历，无缘无故地大写！问号和单词之间没有空格吗？问号也应该有一个空格。同样在停车标志之后应该有大写字母，逗号之间有空格，并且，这个，一个

# php - 将 css 类添加到“主菜单”（drupal，与柱状网格系统集成）

> ID：11302580
> 
> 赞同：3
> 
> 时间：2012-07-02T23:31:38.000
> 
> 标签：php, css, drupal, content-management-system, drupal-7

我有一个问题问你。

我正在尝试使用 drupal 7 制作一个网站，除了一些小问题外，它几乎完成了，我需要主菜单的第一级有一些自定义 css 类以便将其集成到[columnal](http://www.columnal.com/)中，这就是我打印的方式主菜单：

```
<?php
    print theme(
        'links__system_main_menu',
        array(
            'links' => $main_menu,
            'attributes' => array(
                            'id' => 'main-menu',
                            'class' => array('menu')
            )
        )
    );
?> 
```

这就是我得到的：

```
<ul id="main-menu" class="menu">
    <li class="menu-NNN first active">
        <a href="url" title="" class="active">Home</a>
    </li>
    <li class="menu-NNN">
        <a href="url">click me</a>
    </li>
    <li class="menu-NNN">
        <a href="url">click me</a>
    </li>
    <li class="menu-NNN">
        <a href="url">click me</a>
    </li>
    <li class="menu-NNN last">
        <a href="url">click me</a>
    </li>
</ul> 
```

我需要主菜单的第一级有“col_1”类：

```
<ul id="main-menu" class="menu">
    <li class="menu-NNN first .col_1 active">
        <a href="url" title="" class="active">Home</a>
    </li>
    <li class="menu-NNN .col_1">
        <a href="url">click me</a>
    </li>
    <li class="menu-NNN .col_1">
        <a href="url">click me</a>
    </li>
    <li class="menu-NNN .col_1">
        <a href="url">click me</a>
    </li>
    <li class="menu-NNN .col_1 last">
        <a href="url">click me</a>
    </li>
</ul> 
```

布局看起来像这样：

```
/****************************************************************************************
*   *    .row                                                                       *   *
*   *********************************************************************************   *
*   *    #logo.col_5         *   * .pre_1|              .col_5              |.suf_1 *   *
*   *                        *   *       |                                  |       *   *
*   *                        *   *       |                                  |       *   *
*   *                        *   *       |__________________________________|       *   *
*   *                        *mar*       |.col_1|.col_1|.col_1|.col_1|.col_1|       *   *
*   *                        *gin*padding| menu1| menu2| menu3| menu4| menu5|padding*   *
*mar*********************************************************************************mar*
*gin*                                                                               *gin*
****************************************************************************************/
//I'm expecting to have just 5 links in the main menu 
```

也许我可以使用 css 手动设置宽度和边距，但我认为这不是正确的方法，所以，“使用 CSS 为每个子元素设置属性”不起作用，我也尝试使用“MYTHEME_menu_link”但是将属性添加到除主菜单之外的所有菜单，因此这也不起作用。

所以问题是：

**有没有另一种方法可以将css类添加到drupal主菜单的第一级？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T12:47:46.690

如果您希望使用自己的模块或主题的 template.php 文件来实现相同的目标，您可以使用自己的 drupal 的[theme_menu_link](http://api.drupal.org/api/drupal/includes!menu.inc/function/theme_menu_link/7) ()实现

示例代码：

```
function [THEME_OR_MODULE]_menu_link(array $variables) {
  $element = $variables['element'];
  $sub_menu = "";

  $element['#attributes']['class'][] = "col_1";

  if ($element['#below']) {
    $sub_menu = drupal_render($element['#below']);
  }
  $output = l($element['#title'], $element['#href'], $element['#localized_options']);
  return '<li' . drupal_attributes($element['#attributes']) . '>' . $output . $sub_menu . "</li>\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T08:00:56.860

尝试使用[菜单 CSS 名称模块](http://drupal.org/project/menu_css_names)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T14:45:09.133

经过一番调查。我找到了一种方法来实现我的目标，而不使用基于[本文](http://deltup.org/page.php?4/bartik)的解决方法或任何外部模块（HOWTO 在 Drupal 7 中为 Bartik 创建下拉菜单），我使用了“variable_get”、“menu_tree”和“drupal_render”来覆盖变量“ main_menu' 带有一个包含我需要格式的菜单的字符串，以覆盖我使用的变量 'main_menu' 'THEME_process_page'；

```
function MYTHEME_process_page(&$variables) {
    global $language;

if($variables['main_menu']){

    $tree = menu_tree(variable_get('menu_main_links_source', 'main-menu'));
    foreach($tree as $key => $val){

        if(isset($tree[$key]['#href'])){ //just to make sure this is a link

            if($language->language!=$tree[$key]["#localized_options"]["langcode"])
                unset($tree[$key]);
            else
                $tree[$key]['#attributes']['class'][] = 'col_1';

        }

    }

    $variables['main_menu'] = drupal_render($tree);

}

} 
```

在此修改之前，'main_menu' 是一个数组，但现在它是一个包含菜单的字符串，所以，现在，我必须替换模板中的函数 'theme'。

```
<?php
    print theme(
        'links__system_main_menu',
        array(
            'links' => $main_menu,
            'attributes' => array(
                            'id' => 'main-menu',
                            'class' => array('menu')
            )
        )
    );
?> 
```

像这样的东西；

```
<?php print $main_menu; ?> 
```

# ruby-on-rails - 对嵌入式模型的 mongoid 关联引用

> ID：11302581
> 
> 赞同：0
> 
> 时间：2012-07-02T23:31:39.620
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, ruby-on-rails-3.1, mongoid

我有以下设置

```
Class Country
  include Mongoid::Document

  field :name
  field :code

  has_many :locations
end

Class Location
  include Mongoid::Document

  field :country
  field :region
  field :city

  has_many :locations
  embedded_in :company
end

Class Company
  include Mongoid::Document

  field :name

  embeds_one :location
  accepts_nested_attributes_for :location
end 
```

国家模型与所有国家一起播种。

国家/地区通过嵌套形式将其 2 字母短代码存储在 Location 模型中。例如“美国”。现在我想在视图中调用@company.location.country.name 以获取“美国”，但是我收到了一个错误

```
undefined method `name' for nil:NilClass 
```

我该怎么做呢？最好的方法是什么？我是 MongoDB 新手，所以如果这是一个愚蠢的问题，我深表歉意

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:22:08.843

我认为您的问题与您在 Country 上定义的反向关系有关。是的，位置可以有一个国家，但国家不能链接到该位置，因为它是一个嵌入式文档。

尝试删除`has_many :locations`Country 类中的 。这应该解决它。如果不需要，不要定义反向关系。

如果您需要反向关系，您可能不希望它作为嵌入文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T08:41:07.283

由于给定的原因（嵌入式和关系），这将不起作用。

另一方面，对于您的问题，您不应将国家/地区的全名存储在您的数据库中。

事实上，这是一个“固定”列表，准确地说，它是 ISO-3166-1。当有标准时接受标准（罕见！）。一个好方法是使用语言环境（并且您可以省去播种、同步、更新部分）。

考虑文件`config/locales/iso-3166-1/en.yml`：

```
en:
  countries:
    AD: "Andorra"
    AE: "United Arab Emirates"
    AF: "Afghanistan"
    AG: "Antigua and Barbuda"
    ... 
```

现在，您可以使用`I18n.t(@mylocation.country, :scope => :countries)`.

奖金，它是 i18n / l10n 准备好了: `config/locales/iso-3166-1/fr.yml`:

```
fr:
  countries:
    AD: "Andorre"
    AE: "Émirats arabes unis"
    AF: "Afghanistan"
    AG: "Antigua-et-Barbuda"
    ... 
```

# iphone - 创建文件并在其中保存对象

> ID：11302585
> 
> 赞同：0
> 
> 时间：2012-07-02T23:32:00.630
> 
> 标签：iphone, objective-c, ios, cocoa-touch

为什么当你调用这个方法（saveObject: (id)object forKey: (NSString *) key）时，文件不会被创建？？？

当我调用它时，filePath 等于 nil，因此 (-(void) setFilePath: (NSString *)fileName) 方法将被调用...

```
-(int) saveObject: (id)object forKey: (NSString *) key {
    //save object into file

    if(filePath == nil) {
        [self setFilePath:nil];
    }

    mainDict = [NSMutableDictionary dictionaryWithContentsOfFile:filePath];
    if(mainDict == nil) {
        mainDict = [[NSMutableDictionary alloc] init];
    }

    [mainDict setObject:object forKey:key];

    if(![mainDict writeToFile:filePath atomically:YES]) {
        if(object == nil) {
            return 3;
        }
        if(key == nil) {
            return 4;
        }
        return 2; //ERROR could not write object to file
    } else {
        if(shouldUseCache == YES) {
            cacheStatus = 2; //New Caches need to be updated
        }
        return 1; //SUCCESS object saved to file
    }

    //RETURN KEY's
    // *1 SUCCESS object saved to file
    // *2 ERROR could not write object to file
    // *3 ERROR object variable = nil
    // *4 ERROR key variable = nil
}

-(void) setFilePath: (NSString *)fileName {
    paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    documentsDirectory = [paths objectAtIndex:0];
    if(fileName == nil) {
        fileName = @"savedObjects";
    }
    filePath = [NSString stringWithFormat:@"%@/%@.plist",documentsDirectory, fileName];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T00:26:43.930

我认为问题在于您打算编写的字典的内容。您正在添加`object`到您的字典中。该对象只能包含以下类型的成员：NSArray、NSDictionary、NSString、NSDate、NSData 和 NSNumber。如果您的对象包含 int 或 float 或这些以外的任何内容，则它不会写入。

[你可以在这里](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/PropertyLists/AboutPropertyLists/AboutPropertyLists.html#//apple_ref/doc/uid/10000048i-CH3-SW2)阅读更多

# c# - ClassName.ctor>b__11 在 dotTrace Profiler 中代表什么？

> ID：11302589
> 
> 赞同：2
> 
> 时间：2012-07-02T23:32:08.937
> 
> 标签：c#, profiler, dottrace

在使用 dotTrace 分析器时，我收到了很多调用`NamespaceName.ClassName.ctor>b__11` （当我在我的应用程序上使用 Equatec 分析器时，我得到了类似的结果，调用了神秘的函数`NamespaceName.ClassName.<ctor>b__11`）。我首先假设它是 的构造函数，`ClassName`但是构造函数内部的断点`ClassName`只被击中一次。我假设这是自动生成的函数，如果它是我如何找到它被调用的位置？`ClassName`如果构造函数只被调用一次，它与构造函数有什么关系？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T23:34:05.347

它可能是在构造函数中声明的 lambda。您是否使用语法订阅了构造函数中的事件`=>`，或者其他会被频繁调用的事件？

当您使用 lambda 时，C# 编译器会将其转换为私有方法，并使用该方法的委托。（如果您正在进行变量捕获，还有其他花哨的技巧。）

查看 Reflector 中的其他类，看起来 C# 编译器在将每个 lambda 转换为方法时只是简单地对它们进行编号，使用您已经注意到的命名约定`<methodName>b__<number>`, 只是对每个 lambda 进行编号。

# ruby-on-rails - 更新机器人

> ID：11302590
> 
> 赞同：0
> 
> 时间：2012-07-02T23:32:15.923
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, routes, robots.txt

好的，所以我想添加这个

```
User-Agent: *
Disallow: / 
```

除了生产之外的所有环境中的 robots.txt ......任何关于最好的想法都想这样做。我应该从公共文件夹中删除它并创建一个路由/视图

我在资产管道之前使用 rails 3.0.14 ...任何建议

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T00:32:20.820

## Capistrano 用于上传阻止 robots.txt 的任务

我今天再次写了这篇文章，基本上与塞尔吉奥的答案相同，但分享机器人特定的结果可能会节省一些时间:)

```
namespace :deploy do
  desc "Uploads a robots.txt that mandates the site as off-limits to crawlers"
  task :block_robots, :roles => :app do
    content = [
      '# This is a staging site. Do not index.',
      'User-agent: *',
      'Disallow: /'
    ].join($/)

    logger.info "Uploading blocking robots.txt"
    put content, "#{current_path}/public/robots.txt"
  end
end 
```

然后从你的登台配方中触发它，比如

```
after "deploy:update_code", "deploy:block_robots" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T23:45:24.210

这是我项目中的真实工作代码（它是 nginx 配置，不是 robots.txt，但想法应该很清楚）。

```
task :nginx_config do
  conf = <<-CONF
   server {
      listen 80;
      client_max_body_size 2M; 
      server_name #{domain_name};

      -- snip --
    }
  CONF

  put conf, "/etc/nginx/sites-available/#{application}_#{rails_env}"
end 
```

因此，基本上，您在字符串中创建文件的内容，然后执行`put`所需的路径。这将使 capistrano 通过 SFTP 上传内容。

# ruby-on-rails - 为什么我会收到未初始化的常量错误，我该如何解决？

> ID：11302592
> 
> 赞同：0
> 
> 时间：2012-07-02T23:33:02.477
> 
> 标签：ruby-on-rails

当我尝试为我在 Rails 中构建的 Web 应用程序运行注册表单时，我收到以下错误：

未初始化的常量 User::PillHQ

它在我的应用程序代码中引用了两种方法，一种在我的用户模型中，另一种在我的用户控制器中。

用户模型中有问题的方法是

```
def save_with_payment
if valid?
customer = Stripe::Customer.create(description: email, plan: PillHQ, card: stripe_card_token)
self.stripe_customer_token = customer.id
save!
end 
```

并且用户控制器中的问题方法是

```
def create
@user = User.new(params[:user])
if @user.save_with_payment
sign_in @user
flash[:success] = "Welcome to the Sample App!"
redirect_to edit_user_path(current_user)
UserMailer.welcome_email(@user).deliver
else
render 'new'
end
end 
```

我不知道如何消除错误，所以你能提供的任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T23:53:46.273

假设它是一个变量，下面一行中的单词`PillHQ`对“命名约定”无效......

```
customer = Stripe::Customer.create(description: email, plan: PillHQ, card: stripe_card_token) 
```

> 局部变量
> 小写字母后跟其他字符，命名约定规定多个单词名称最好使用下划线而不是 camelBack，例如 mileage、variable_xyz

更多信息可以在[这里](http://itsignals.cascadia.com.au/?p=7/)找到。

# php - 如何从 php.ini 禁用“detect_unicode”设置？（尝试安装 Composer）

> ID：11302593
> 
> 赞同：29
> 
> 时间：2012-07-02T23:33:04.283
> 
> 标签：php, composer-php

我一直在尝试在我的机器（OS X 10.6）上安装 Composer，但到目前为止没有成功。

根据 Composer 文档，我在终端中执行了这个：

> curl -s [http://getcomposer.org/installer](http://getcomposer.org/installer) | php#!/usr/bin/env php

这是输出：

> 必须禁用 detect_unicode 设置。将以下内容添加到您的末尾`php.ini`：detect_unicode = Off

当然，这是在我的php.ini中：detect_unicode = Off，位于/etc/php.ini.default

php -info 告诉我正在从 /etc/ 加载 php.ini 文件（输出为：配置文件（php.ini）路径 => /etc）

但是，也输出：detect_unicode => On => On

为什么 php.ini.default 没有加载我的设置，我怎么能有效地禁用detect_unicode？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-12-24T04:56:50.993

只需在命令后添加“-d detect_unicode=Off”

```
curl -s https://getcomposer.org/installer | php -d detect_unicode=Off 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-07-03T07:54:19.400

很可能*根本没有加载任何*ini文件，我不知道php是否看到/etc/php.ini.default。正如我在[无法设置/查找 detect_unicode 中](https://stackoverflow.com/questions/11241568/cant-set-find-detect-unicode-to-off)所说的那样- 您应该运行`php -i | grep ini`并检查实际加载了哪个文件，然后对其进行编辑。如果没有加载，请确保将 php.ini 文件放入`Configuration File Path`值中，在您的情况下`/etc/php.ini`似乎如此。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-09-28T13:31:18.007

在 OSX 下转到`/etc`.

打开终端。

```
>cd /etc
>nano php.ini.default 
```

编辑`php.ini.default`（插入`detect_unicode = Off`）。

保存文件。

现在将其重命名为`php.ini`.

```
>mv /etc/php.ini.default /etc/php.ini 
```

重新启动终端，然后它应该可以正常工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-30T07:09:30.100

如果您无法更改 /usr/local/bin/php/php.ini 文件，请记住对所有 php 调用继续使用“-d detect_unicode=Off”，如下所示：

```
curl -s https://getcomposer.org/installer | php -d detect_unicode=Off

php -d detect_unicode=Off composer.phar install 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-13T03:36:58.483

网上有一些解决方案，但我发现最简单的是 Stack Overflow。问题是 PHP CLI 默认不加载相同的 php.ini，与大多数 Linux 安装不同，没有单独的 php-cli.ini 并且看似 /etc/php.ini.default 不加载非常。您可以将其作为运行时参数传递：

```
curl -s getcomposer.org/installer | php -d detect_unicode=Off 
```

来源-> [http://www.andrew-kirkpatrick.com/2012/10/install-composer-for-php-on-zend-server-mac-os-x/](http://www.andrew-kirkpatrick.com/2012/10/install-composer-for-php-on-zend-server-mac-os-x/)

# algorithm - 放置一个点以最小化与最远点的距离

> ID：11302600
> 
> 赞同：1
> 
> 时间：2012-07-02T23:33:38.560
> 
> 标签：algorithm, math, geometry

我有个问题，

给定一组点，你如何放置一个点，约束条件是到最远点的距离尽可能小？

这是参考[这个](http://www.spoj.pl/problems/REDCROSS)问题。我不知道该怎么做。有人指点吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T23:47:24.857

您需要使用[Voronoi图](http://en.wikipedia.org/wiki/Voronoi_diagram)，可能是Farthest-Point Voronoi图，其中平面被划分为区域，同一区域中的点具有相同的最远点

**更新**

你需要先构建一个 Farthest-Point voronoi 图，时间为 O(nlogn)，然后找到所有顶点（如果圆由三个点定义）和所有边（如果圆由两点定义）。这种方法的总时间复杂度是**O(nlogn)**

我刚刚看到[最小圆问题](http://en.wikipedia.org/wiki/Smallest_circle_problem)wiki 页面，似乎有一个**O(n)**时间算法。如果你关心速度，你可以检查一下，否则没关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T00:29:24.013

看看这个页面。它描述了几种方法来做到这一点。 [http://www.personal.kent.edu/~rmuhamma/Compgeometry/MyCG/CG-Applets/Center/centercli.htm](http://www.personal.kent.edu/~rmuhamma/Compgeometry/MyCG/CG-Applets/Center/centercli.htm)

[万一上面的链接死了，这里是描述最直接方法的相关部分：]

* * *

**O(n2) 时间算法**

1.  在圆心 c 处画一个圆，使得给定集合的点位于圆内。显然，这个圆圈可以做得更小（或者我们有解决方案）。
2.  找到离圆心最远的点A，使圆变小，并以相同的中心画一个新的圆，并通过点A。这两个步骤产生一个更小的封闭圆。新圆更小的原因是这个新圆仍然包含给定集合的所有点，除了现在它通过最远的点 x，而不是包围它。
3.  如果圆通过 2 个或更多点，则继续执行步骤 4。否则，通过将中心移向 A 点来使圆变小，直到圆与集合中的另一个点 B 接触。
4.  在这个阶段，我们是一个圆 C，它通过给定集合的两个或多个点。如果圆包含的弧的间隔（无点间隔）大于圆的周长的一半，并且没有点位于该圆弧上，则可以使圆更小。令 D 和 E 为该无点区间末端的点。在将 D 和 E 保持在圆的边界上的同时，减小圆的直径，直到出现情况 (a) 或情况 (b)。

    *   情况 (a) 直径是距离 DE。
        *   我们完了！
    *   情况 (b) 圆 C 接触集合中的另一个点 F。
        *   检查是否存在长度超过 C 圆周一半的无点圆弧区间。
        *   如果没有这样的无点弧间隔存在，那么我们就完成了！
    *   别的
        *   转到第 4 步。
        *   在这种情况下，三个点必须位于长度小于圆周一半的弧上。我们在弧上三个点的外部两个重复步骤 4。

* * *

此处的另一个页面，带有示例小程序： [http ://www.sunshine2k.de/stuff/Java/Welzl/Welzl.html](http://www.sunshine2k.de/stuff/Java/Welzl/Welzl.html)

# android - 是否应该在发布应用程序之前禁用日志？

> ID：11302601
> 
> 赞同：4
> 
> 时间：2012-07-02T23:33:52.440
> 
> 标签：android, publish

我即将发布一个应用程序。我应该删除`Log`语句并`e.printStackTrace()`在`catch`语句中吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T23:39:02.863

日志是必不可少的故障排除资源，即使对于已部署的软件也是如此。

我会限制生产版本的日志记录（甚至可能将其限制为“仅在紧急情况下登录”）。但我*不会*断然说“不记录”。

这是一个很好的讨论（有一些很好的指导方针）：

*   [如何在 Android 中启用/禁用日志级别？](https://stackoverflow.com/questions/2018263/android-logging)

PS：说了这么多，我赶紧补充一下：

不，您不应该*在*生产版本中记录任何“调试”或“信息”。

这正是上面链接中引用的 Android 文档的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T23:38:34.423

这通常被认为是一种好的做法，因为：

*   如果您的日志语句包含在调试标志上的 if 语句中，并且您将该标志设置为 false，那么当您编译项目时，这些语句会自动被忽略，从而减少 apk 的大小，尽管幅度不大。
*   由于日志与其他所有应用程序共享，因此在生产应用程序中不要包含这些消息是体贴的，因为它会使其他开发人员的 logcat 在调试时变得混乱。
*   有时，您可能会记录签名、密钥、密码、电子邮件、用户名等敏感数据。禁用日志记录可以防止您的应用意外泄露此类信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T23:36:34.253

有时启用日志会产生安全问题。大多数 Android 应用程序不需要担心这一点，原因有几个，但我个人只是养成禁用基于开发人员的功能的习惯，除非您希望用户帮助您在其他设备上调试问题，这在我的经验中并不常见.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T23:57:17.143

答案是*肯定*的。

您可以在 proguard.cfg 文件中添加一些行来隐藏它们。

```
-keep class * extends android.app.Activity
-assumenosideeffects class android.util.Log {
    public static *** d(...);
    public static *** e(...);
    public static *** i(...);
} 
```

应用程序签名后，任何人都无法读取调试、错误和信息日志。希望它有效。

# c# - asp.net 4.0 c#会员用户图片

> ID：11302603
> 
> 赞同：0
> 
> 时间：2012-07-02T23:34:18.937
> 
> 标签：c#, asp.net, forms, authentication

我想从数据库中提取的是表 aspnet_Users 中的 UserImage，但我该如何提取呢？

我知道当我想提取用户名时，只需通过

```
if (User.Identity.IsAuthenticated)
{
    lblUserName.Text = User.Identity.Name;
} 
```

以及如何将图像转换为字节 []？

或者我可以简单地添加一个新列，我将如何提取那个 1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T23:54:44.383

我的建议是使用配置文件来存储每个用户的唯一信息，在你的情况下它是一个图像路径，但存储图像文件可能在 CDN 上，你的第二个问题是：**我如何将图像转换为字节 []？**

```
 System.Drawing.Image userImage = new Bitmap(ImagePath);

    System.IO.MemoryStream imageMemoryStream = new MemoryStream();

    userImage.Save(imageMemoryStream, System.Drawing.Imaging.ImageFormat.Jpeg);

    byte[] ImageByteArray = imageMemoryStream.ToArray(); 
```

# c++ - 部分按降序排序

> ID：11302608
> 
> 赞同：0
> 
> 时间：2012-07-02T23:35:00.937
> 
> 标签：c++, algorithm, sorting

我们必须按降序对数组进行部分排序。

我知道 std::partial_sort 但它按升序进行。

[http://en.cppreference.com/w/cpp/algorithm/partial_sort](http://en.cppreference.com/w/cpp/algorithm/partial_sort)。

他们是可以这样做的任何其他此类功能还是可以这样做的任何快速算法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T23:37:04.650

您链接到的引用中的第二个重载采用了一个比较器——传入一个[`std::greater<T>`](http://en.cppreference.com/w/cpp/utility/functional/greater).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T23:37:08.573

根据您的链接：[http](http://en.cppreference.com/w/cpp/algorithm/partial_sort) ://en.cppreference.com/w/cpp/algorithm/partial_sort ， partial_sort 的另一个定义允许您包含比较器。

只需包含一个元素顺序颠倒的比较器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T23:40:34.033

您只需要使用函数的第二种形式并传递正确的比较器。例如。`std::greater`可能是一个很好的提示。

# php - 选择一个未显示的随机结果

> ID：11302612
> 
> 赞同：2
> 
> 时间：2012-07-02T23:35:13.933
> 
> 标签：php, mysql, sql, codeigniter

任何可以帮助我的人将不胜感激。

目标：我想随机显示一张表中的 id，并确保当前用户没有看到它。

两张表：`offers`, `has_seen`

我想从 offer 中选择一个随机 id，对照 has_seen 表进行检查。

如果has_seen中存在该ID，则需要重新选择另一个随机ID。当前会话的任何一个用户都不应看到相同的 ID。

我似乎无法弄清楚如何随机选择一个，检查另一张表，如果找到则返回。

我试过这个

```
$query = $this->db->query("SELECT * FROM ".$this->offer_table." WHERE NOT EXISTS (SELECT * FROM ".$this->shown_table." WHERE ".$this->shown_table.".camp_id = ".$this->offer_table.".camp_id AND ".$this->shown_table.".usercode = ".$this->session->userdata("table")." LIMIT 1 "); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T23:53:52.440

我认为这可以通过执行左连接然后检查空值在普通 SQL 中实现。

类似的东西

```
SELECT * FROM table1 LEFT JOIN table2 USING (shared_key) WHERE table2.id IS NULL ORDER BY rand() LIMIT 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T23:48:09.083

以下是使用 CI 的 db 类的方法：

```
 // the maximum ID that is acceptable
$max = $this->db->get('first_table')->count();

while(true) {
    // get a random number
    $randomID = rand(0,$max);

    // the condition for which we will check the has_seen table
    $condition = array(
        'id' => $randomID
    );

    // if count is 0, it has not been seen. We add it to the table and return
    // if it has been seen, the loop will repeat
    if ($this->db->get_where('has_seen', $condition)->count() === 0) {
        $this->db->insert('has_seen', array(
            'id' => $randomID
        ));
        return $randomID;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T00:12:04.750

```
SELECT * FROM `offers` WHERE `camp_id` NOT IN (SELECT `camp_id` FROM `has_seen` WHERE `user code` = 1) ORDER BY RAND() LIMIT 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T01:20:50.187

我总是更喜欢将表格的内容读入数组并从那里使用它们。根据您计划使用结果的方式，您可以通过只读取一次然后从数组中提供服务来减少对数据库的访问（然后，我想，为下一个会话更新 has_seen 表）。

我必须为伪代码道歉，因为我已经多年没有编写任何 PHP 了。

得到数组后，算法如下所示：

```
var array
var end = array.length

function getNextRandomUnseen
{
  var i = rand(end)
  var temp = array[i]
  array[i] = array[end--]
  return temp
} 
```

如果您愿意，您甚至可以将看到的值粘贴在数组的末尾，这样它们就不会丢失。

```
array[end+1] = temp 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T19:54:38.617

感谢您的回答。我重新设计了将其提供给用户的方式，并相信当我网站上的数百人同时使用这种新方式时，效率会更高。

谢谢！

# hibernate - 调用 findWhere 时 Grails 抛出 NonUniqueObjectException

> ID：11302615
> 
> 赞同：0
> 
> 时间：2012-07-02T23:35:19.980
> 
> 标签：hibernate, grails, orm, grails-orm

我正在使用分配了 id 生成器的域类构建一个 grails 应用程序（也就是说，它们不会自动生成）。假设我有一个域类 Parent`static hasMany = [children: Child]`和域类 Child。

我正在尝试使用 查找 Parent 的实例`Parent.findWhere(propertyMap)`，但收到**NonUniqueObjectException**指示已经有一个与此会话关联的 Child 实例，其 id 为 0。我的 propertyMap 不包含 id 的条目。

现在，每当我尝试在会话中保存一个类的两个实例而不设置它们的 id 时，我都习惯于得到这个错误。因为 id 不是自动生成的，所以它们默认为零，这允许保存第一个，第二个抛出错误，因为 id 是第一个的副本。令我惊讶的是，我试图找到一个实例，而不是保存一个......有谁知道可能导致这种行为的原因以及我如何在使用我的属性图进行搜索的同时绕过它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:42:27.307

事实证明，这是一个时髦的语法糖问题。我在打电话 findWhere like

```
Parent.findWhere([ firstProperty: "firstValue", secondProperty: "SecondValue" ]) 
```

但显然我应该使用

```
Parent.findWhere( firstProperty: "firstValue", secondProperty: "SecondValue" ) 
```

（注意没有方括号）。我不知道为什么这会有所作为，但 findWhere 现在按预期工作。任何可能知道它为什么会这样表现的人都会加分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:56:28.117

好吧，如您所知，Hibernate 有一个强大的约束，即您不能在会话中拥有 2 个表示相同 id 的对象。您可能没有注意到的是，无论是在`save()`操作还是更新甚至是动态查询中：如果在同一个 Hibernate Session 中有 2 个具有相同 id 的对象，Hibernate 都会引发类似的异常。确保在您的会话中有另一个与该对象类似的对象。

[这里](http://blog.springsource.org/2010/06/23/gorm-gotchas-part-1/)说：

> 如果您使用 GORM 以任何方式检索域实例，例如通过 get() 方法或任何类型的查询，那么该对象将自动与会话关联。

会话中可能有一个子对象引用了父对象（还没有 id）。除了在您的父对象进入会话之前提供父对象 ID 或避免将引用父对象的子对象保存到会话之外，我没有看到其他优雅的方法。其他方法是`evict()`在您的对象上使用，例如：`session.evict(object)`. 但这不是一件好事。

干杯!

# sql - 从同一个表中的多个列中选择不同的值

> ID：11302617
> 
> 赞同：29
> 
> 时间：2012-07-02T23:35:42.970
> 
> 标签：sql, distinct, union

我正在尝试构建一个 SQL 语句，该语句从位于同一个表中的多个列返回唯一的非空值。

```
 SELECT distinct tbl_data.code_1 FROM tbl_data
      WHERE tbl_data.code_1 is not null
 UNION
 SELECT tbl_data.code_2 FROM tbl_data
      WHERE tbl_data.code_2 is not null; 
```

例如，tbl_data 如下：

```
 id   code_1    code_2
 ---  --------  ----------
 1    AB        BC
 2    BC        
 3    DE        EF
 4              BC 
```

对于上表，SQL 查询应该返回两列中所有唯一的非空值，即：AB、BC、DE、EF。

我对 SQL 很陌生。我上面的语句有效，但是有没有更简洁的方法来编写这个 SQL 语句，因为这些列来自同一个表？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-03T00:31:43.010

最好在您的问题中包含代码，而不是模棱两可的文本数据，以便我们都使用相同的数据。这是我假设的示例架构和数据：

```
CREATE TABLE tbl_data (
  id INT NOT NULL,
  code_1 CHAR(2),
  code_2 CHAR(2)
);

INSERT INTO tbl_data (
  id,
  code_1,
  code_2
)
VALUES
  (1, 'AB', 'BC'),
  (2, 'BC', NULL),
  (3, 'DE', 'EF'),
  (4, NULL, 'BC'); 
```

正如[Blorgbeard](https://stackoverflow.com/questions/11302617/select-distinct-values-from-multiple-columns-in-same-table/11303005#comment14871740_11302617)评论的那样，`DISTINCT`您的解决方案中的子句是不必要的，因为`UNION`运算符消除了重复的行。有一个`UNION ALL`运算符不消除重复，但在这里不合适。

不使用该子句重写查询`DISTINCT`是解决此问题的好方法：

```
SELECT code_1
FROM tbl_data
WHERE code_1 IS NOT NULL
UNION
SELECT code_2
FROM tbl_data
WHERE code_2 IS NOT NULL; 
```

两列在同一个表中并不重要。即使列在不同的表中，解决方案也是相同的。

如果您不喜欢两次指定相同过滤子句的冗余，您可以在过滤之前将联合查询封装在虚拟表中：

```
SELECT code
FROM (
  SELECT code_1
  FROM tbl_data
  UNION
  SELECT code_2
  FROM tbl_data
) AS DistinctCodes (code)
WHERE code IS NOT NULL; 
```

我发现第二个的语法更丑陋，但它在逻辑上更整洁。但是哪一个表现更好呢？

我创建了一个[sqlfiddle](http://sqlfiddle.com/#!3/27f3a/2)来演示 SQL Server 2005 的查询优化器为两个不同的查询生成相同的执行计划：

![查询优化器为两个查询生成这个执行计划：两个表扫描、一个连接、一个不同的排序和一个选择。](../Images/fc4f86f9aa9355b3843ea64a12479a18.png)

如果 SQL Server 为两个查询生成相同的执行计划，那么它们实际上在逻辑上是等效的。

将上述内容与您问题中查询的执行计划进行比较：

![DISTINCT 子句使 SQL Server 2005 执行冗余排序操作。](../Images/bc23f9082112e26918e53a981c3ba525.png)

该`DISTINCT`子句使 SQL Server 2005 执行冗余排序操作，因为查询优化器不知道`DISTINCT`在第一个查询中过滤掉的任何重复项都会被`UNION`后面的查询过滤掉。

这个查询在逻辑上与其他两个是等价的，但是冗余操作使其效率降低。在大型数据集上，我希望您的查询需要比这里的两个更长的时间才能返回结果集。不要相信我的话；在您自己的环境中进行实验以确保！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T00:09:26.827

尝试类似`SubQuery`：

```
SELECT derivedtable.NewColumn
FROM
(
    SELECT code_1 as NewColumn FROM tbl_data 
    UNION
    SELECT code_2 as NewColumn FROM tbl_data 
) derivedtable
WHERE derivedtable.NewColumn IS NOT NULL 
```

已经从组合查询`UNION`返回**DISTINCT值。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-13T14:47:04.363

如果您有两个以上的列，请尝试此操作：

```
CREATE TABLE #temptable (Name1 VARCHAR(25),Name2 VARCHAR(25))

INSERT INTO #temptable(Name1, Name2)
  VALUES('JON', 'Harry'), ('JON', 'JON'), ('Sam','harry')

SELECT t.Name1+','+t.Name2 Names  INTO #t FROM #temptable AS tSELECT DISTINCT ss.value FROM #t AS t
  CROSS APPLY STRING_SPLIT(T.Names,',') AS ss 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-15T11:06:47.173

在所需的行数据在类型、值等方面相似的任何地方都应用联合。无论您在同一个表中是否有列或另一个要从中检索的列都没有关系，因为结果将保持不变（在上述答案之一中已经提到尽管）。

由于您不希望重复，因此使用 UNION ALL 并没有必要使用 distinct，因为 union 提供了不同的数据

可以创建视图将是最佳选择，因为视图是表的虚拟表示。然后可以在创建的视图上巧妙地进行修改

```
Create VIEW getData AS 
(
  SELECT distinct tbl_data.code_1 
    FROM tbl_data
    WHERE tbl_data.code_1 is not null
  UNION
  SELECT tbl_data.code_2 
    FROM tbl_data
    WHERE tbl_data.code_2 is not null
); 
```

# php - FFMPEG 与 php 5.3？

> ID：11302621
> 
> 赞同：0
> 
> 时间：2012-07-02T23:36:15.360
> 
> 标签：php, ffmpeg

使用 PHP 5.2 时，我能够通过 FFMPEG 创建缩略图。现在，我已经将它更新到 PHP 5.3 并且 DL() 函数不完全兼容。有没有办法在不使用 DL() 函数的情况下加载 FFMPEG 扩展？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T23:39:40.100

是的，通过 php.ini。DL 函数已被删除，因为它是一个非常糟糕的主意™。语法是

```
extension=your_extension.so 
```

# android - 合并多个版本号的布局文件

> ID：11302626
> 
> 赞同：6
> 
> 时间：2012-07-02T23:36:35.143
> 
> 标签：android, layout

对于不同版本的android，我都有不同的布局文件 `layout-v13`，但我注意到这些文件对于较新版本的android（API 11-16）是相同的。有没有办法将它们组合在一起`layout-v11,12,13,14,15,16`？谢谢你的时间！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T23:42:01.287

如果您要根据设备上可用的 API 版本显示不同的布局，则您需要使用[配置限定符](http://developer.android.com/guide/practices/screens_support.html#qualifiers)。替代资源的细节也被[记录在案](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)。

最基本的方法是为您要使用的每个 API 级别创建一个布局文件夹，格式如下：

```
res/layout/layout.xml       (Default)
res/layout-v4/layout.xml    (Android 1.6 and higher)
res/layout-v11/layout.xml   (Android 3.0 and higher) 
```

来自安卓官方文档 ![在此处输入图像描述](../Images/5106029916be053074e93379a18ae101.png)

在您的情况下`layout-v11`，这将由运行 Android 3.0 Honeycomb 及更高版本的设备使用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T23:41:11.397

`layout-v11`将由运行 Android 3.0 及更高版本的所有设备使用。如果运行特定版本的设备需要不同的布局，您应该只分解文件夹（即`layout-v11`，等）。`layout-v12`

# android - OnLongClickListener 不适用于 chartengine

> ID：11302632
> 
> 赞同：1
> 
> 时间：2012-07-02T23:37:15.393
> 
> 标签：android, achartengine, onlongclicklistener

我正在使用 achartengine，当我长按图表时，我想在操作栏中激活操作模式。但是 OnLongClickListener 不工作，我到处搜索我几乎尝试了所有东西，但我无法让它工作，我不知道为什么。这是我的代码：

```
mChartView.setLongClickable(true);
mChartView.setOnLongClickListener(new OnLongClickListener() {

        @Override
        public boolean onLongClick(View v) {
            Log.i("ClickListener", "CLICK");
            return false;
        }

}); 
```

但是该事件从未被调用，我认为这是因为图表是可滚动的但没有意义。我试过 whit OnClick 也不起作用。唯一有效的是 OnTouch，但我无法获得 Long-Press 的行为。

**编辑：**

或者也许是获取触摸屏状态的实际状态的任何方式，这样，我可以放置一个“计时器”，直到它达到例如 1000mS 但只有在触摸屏被触摸时，因为在 onTouch 事件中我只能知道事件发生时触摸屏的状态，无论是当前状态。

好的，这里有一些折线图的代码：

```
private static XYSeries input1;
private static XYMultipleSeriesDataset mDataset;
private static XYSeriesRenderer renderer1;
private static XYMultipleSeriesRenderer mRenderer;
private static GraphicalView mChartView;

mRenderer = new XYMultipleSeriesRenderer();
        renderer1 = new XYSeriesRenderer();

        mRenderer.setOrientation(Orientation.HORIZONTAL);
        mRenderer.addSeriesRenderer(renderer1);
        mRenderer.setXAxisMax(10);
        mRenderer.setYAxisMax(10);
        mRenderer.setAxesColor(Color.WHITE);
        mRenderer.setLabelsColor(Color.WHITE);
        mRenderer.setShowGrid(true);

        input1 = new XYSeries("Linea");

        mDataset = new XYMultipleSeriesDataset();
        mDataset.addSeries(input1);

        renderer1.setColor(Color.WHITE);

        input1.add(4, 7);   
        input1.add(7, 3);   
        input1.add(8, 6);   
        input1.add(9, 2);

        mChartView = ChartFactory.getLineChartView(this, mDataset, mRenderer);
        setContentView(mChartView);

        mChartView.setLongClickable(true);
        mChartView.setOnLongClickListener(new OnLongClickListener() {

            @Override
            public boolean onLongClick(View v) {
                Log.i("Click", "LONG CLICKED CHART");
                return false;
            }

        }); 
```

我正在尝试使用 onTouch 进​​行长按，因为我意识到如果我滑动图表，它也将被视为长按，所以如果我不滑动图表，我必须进行长按 BUT。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T00:13:14.250

您可以将 runnable 与 onTouchListener() 结合使用，以获得与 onLongClick() 相同的效果。这样的事情应该这样做：

```
boolean fingerStillDown = false;
final Runnable longClickRun = new Runnable(){
   public void run(){
       if(fingerStillDown){
           Log.i("CHARTS!", "LONGCLICK!");
       }
   }
 };
 mChartView.setOnTouchListener(new OnTouchListener() {
     public boolean onTouch(View v, MotionEvent me){
         if(me.getAction() == MotionEvent.ACTION_DOWN){
              fingerStillDown = true;
              //The system registers longclick at ~500ms.
              mChartView.postDelayed(longClickRun, 500);
         }

         if(me.getAction() == MotionEvent.ACTION_UP){
             fingerStillDown = false;
         }

         return false; //<-- I didn't test with true, but I suspect returning true
                       // would break the scrolling.
         }
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T23:48:42.670

尝试**返回 true**而不是 false。这样元素就被长按了，所以事件已经被处理了。

```
mChartView.setOnLongClickListener(new OnLongClickListener() {

        @Override
        public boolean onLongClick(View v) {
            Log.i("ClickListener", "CLICK");
            return true;
        }

}); 
```

# entity-framework-4 - 如何在 esql 查询中获取实体类型的名称

> ID：11302633
> 
> 赞同：1
> 
> 时间：2012-07-02T23:37:21.957
> 
> 标签：entity-framework-4, entity-sql

我们遇到了一个场景，我们需要能够在 esql 语句的结果中将实体类型的名称作为值返回。

问题是，我们有一个通用的帮助器，它构建并运行一个 esql 语句以返回一个结果，该结果被传递到 MVC3 应用程序的 SelectList 中。

文本列是从添加到模型属性的属性中提取的表达式。

因此，例如，如果我们希望下拉列表将人名列为 Last，首先我们添加一个带有如下表达式的属性：'it.[LastName] + ", " + it.[FirstName]' 这会产生如下语句：

```
SELECT it.[Id] AS Id, it.[LastName] + ", " + it.[FirstName] AS Name
FROM OfType([AuditedObject], [User]) AS it 
```

我们遇到了一个场景，涉及使用 TPT 的 EF4.3 中的抽象类型。我们需要使用这个辅助方法枚举派生实体。当我们只需要这样的基本数据时，该方法会很好地枚举并返回所有派生实体：

```
SELECT it.[Id] AS Id, it.[Name] AS Name
FROM OfType([AuditedObject], [DatumObject]) AS it 
```

但是我们需要一种方法来指示每个实体是什么类型。像这样的伪代码：

```
SELECT it.[Id] AS Id, it.GetType().Name + " - " + it.[Name] AS Name
FROM OfType([AuditedObject], [DatumObject]) AS it 
```

有谁知道我如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:21:01.483

我之前忘了回过头来更新这个问题。我们最终采用的解决方案不是很优雅，但它为我们提供了我们需要的所有功能。

我们最终向模型中添加了一个实体来表示根对象的类型，并通过单向关联将它们链接起来。然后，我们使用 t4 模板生成脚本以将类型填充到新表中，并添加业务逻辑以确保在调用 SaveChanges() 时对其进行设置。

现在我们可以这样做：

```
SELECT it.[Id] AS Id, it.[EntityType].[Name] + " - " + it.[Name] AS Name
FROM OfType([AuditedObject], [DatumObject]) AS it 
```

# ruby - Ruby：未初始化的常量 Logger::Warn

> ID：11302635
> 
> 赞同：2
> 
> 时间：2012-07-02T23:37:58.550
> 
> 标签：ruby, logging, configatron

我通过配置和这一行使用记录器：

```
configatron.log.level = Logger::Warn 
```

给我错误：

```
`<top (required)>': uninitialized constant Logger::Warn (NameError) 
```

即使我需要顶部的“记录器”。

是什么赋予了？

< 红宝石 N00B >

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T00:45:51.457

资本化问题。应该是`Logger::WARN`。

# javascript - 如何为图像创建具有随机大小的平铺照片库？

> ID：11302636
> 
> 赞同：0
> 
> 时间：2012-07-02T23:38:19.210
> 
> 标签：javascript, jquery, css

我见过一些 jQuery 脚本，你可以用马赛克的方式创建照片库。像这个[http://www.themepunch.com/codecanyon/megafolio/megafolio_dark.html](http://www.themepunch.com/codecanyon/megafolio/megafolio_dark.html)或这个[http://www.themepunch.com/codecanyon/megafolio/megafolio_light.html](http://www.themepunch.com/codecanyon/megafolio/megafolio_light.html)

我的照片有不同的尺寸，但大多数照片的宽度大于高度。我的目标是自动随机设置图像容器的尺寸（并加载原始图像），而不是手动裁剪它们并将它们设置为不同大小的缩略图。

例如，在第一个入口 img1.jpg 将显示为 100x50，但在刷新时，相同的图像可能会显示为 50x100。

我的问题是如何使用 CSS 和 javascript 创建这种效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T00:24:45.663

根据您问题中的链接，我看到三种类型的图像：垂直、水平和方形图像。因此，不是随机大小的。

此外，它似乎以网格布局很好地布置。垂直图像的宽度是水平图像宽度的一半，垂直图像的高度是水平图像高度的两倍（所以基本上它只是翻转），方形图像等于水平图像的宽度或垂直图像。

通过建立网格和列大小，您可以动态定位包含图像的容器并为它们分配形状，因为缺少更好的术语和方向。使用一些 jQuery，您可以使用该`.css`函数轻松地相对于其他容器定位它们。

**注意：**您的示例中使用的缩略图与其容器的大小相同。这对您来说也是一个好主意，看看它将如何确保您获得所需的效果。

# git - 从 GitHub 中删除分叉的仓库

> ID：11302639
> 
> 赞同：734
> 
> 时间：2012-07-02T23:38:49.710
> 
> 标签：git, github

我从 git 和 GitHub 开始，我正在 GitHub 上观看一个项目。我无意中点击了它。现在它对我来说似乎是一个新项目。

我对此有一些疑问：

*   我知道如果对我的分叉仓库提交或做其他事情，它将被更新，但更新的代码只有在项目作者请求拉取后才会生效。正确的？
*   如果我去 GitHub 上的管理面板，有一个删除选项。如果我按照上面的选项删除它，它会对原来的有任何影响吗？

我想删除它。到目前为止，我只是在研究代码，并不需要 fork。

* * *

## 回答 #1

> 赞同：1287
> 
> 时间：2013-02-13T18:39:11.290

到目前为止，最简单的方法是登录 GitHub 帐户：

1.  `yourUsername/yourRepository`例如，单击到您的存储库`mbaric/zpropertyz`。
2.  然后在 GitHub 的主工具栏中单击**设置**
3.  滚动到页面底部到名为**Danger Zone**的部分，您将找到**删除此存储库按钮**
4.  当你点击它时，这里会出现另一个**弹出窗口，**你需要以这种格式**输入你的 Github 用户名和存储库的名称，**`gitHubUsername/nameOfTheRepository`然后单击下面的按钮，上面写着：**我了解后果，删除存储库**
5.  如果您在操作时遇到问题，以下是可以检查的图像……</li>

***2020-01-15 - 这是图片。享受。*** [![GHD1](../Images/060349834d2c3347963eb5bc917a0959.png)](https://i.stack.imgur.com/Mhmbq.png)

[![GHD2](../Images/8ce4b058d39c4dca6f3eb63c12ff770a.png)](https://i.stack.imgur.com/KLHH3.png)

[![GHD3](../Images/de42045ff29fdd6be8221fa44f957782.png)](https://i.stack.imgur.com/gnINZ.png)

[![GHD4](../Images/8ea7d47617873449bf4044c49d241b51.png)](https://i.stack.imgur.com/NEVKE.png)

* * *

## 回答 #2

> 赞同：372
> 
> 时间：2012-07-02T23:40:02.457

删除它不会对原始项目产生任何影响。编辑它只会在你的 repo 页面上编辑你的 fork。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2015-02-19T05:13:06.767

只需从您的 GitHub 帐户中删除分叉的 repo。

[https://help.github.com/articles/deleting-a-repository/](https://help.github.com/articles/deleting-a-repository/)

*   如果我去 GitHub 上的管理面板，有一个删除选项。如果我按照上面的选项删除它，它会对原来的有任何影响吗？

> 它不会对原始版本进行任何更改；因为，它现在是你的回购。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2016-05-19T16:45:05.360

删除分叉的存储库不会有任何危害。你可以再次分叉。它不会更改原始代码。流程是这样的...

1）你分叉一个存储库。只需将此视为您可以访问或更改的另一个代码副本。此存储库的 url 格式为`https://github.com/your-user-name/original-repo`.

2）您在本地机器上对其进行一些更改并推送它们。现在，您创建的副本将被更新，但不会更新您从中分叉存储库的原始副本。

3) 如果您希望将添加到分叉存储库的更改应用于原始存储库（这可能对组织存储库的人有所帮助），那么您必须创建一个`pull request`可以通过 UI 执行的操作。然后，如果他们喜欢您的贡献，他们会`merge`使用他们的代码。

通常这是开源组织所做的。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2018-09-06T08:28:30.693

甜蜜而简单：

1.  打开存储库
2.  导航到设置
3.  滚动到页面底部
4.  点击删除
5.  确认要删除的存储库的名称
6.  点击删除

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2017-02-04T16:42:49.623

删除您的分叉存储库不会影响主（原始）存储库。

就像我通过删除一个分叉的仓库来展示一个例子一样。

[![这是我的分叉回购（图片）](../Images/f36f990116cf0535e7729e2043924ebb.png)](https://i.stack.imgur.com/MChbm.png)

[![删除分叉的仓库](../Images/326abe9ef63115e7efe9695fc991ff50.png)](https://i.stack.imgur.com/S0m98.png)

并且对原始存储库没有任何更改。

主存储库类似于原始存储库。

分叉与创建原始副本的复印副本相同。即使你的复印纸损坏了，是不是原始文件也会损坏？显然没有。

所以它是一样的。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-11-10T11:56:35.637

答案是否定的。它不会影响您从中分叉的原始/主存储库。（从功能上讲，如果向非所有者提供这样的访问权限，那将是不正确的）。

只是想添加这个。

> 警告：它将删除您在分叉存储库中创建的本地提交和分支。因此，在删除之前，请确保您有该代码的备份（如果它很重要）。

最好的方法是使用以下命令获取分叉回购的 git 备份：

```
git bundle 
```

或其他熟悉的方法。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-04-05T15:44:38.650

选择要删除的项目->设置->按钮单击删除按钮->输入存储库的名称

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2017-12-30T07:20:25.483

选择 repo->Settings->(向下滚动)删除 repo

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-03-03T06:05:46.730

在 github 上打开要删除的存储库，然后按设置选项卡。滚动到页面末尾，然后单击删除存储库。写下存储库的名称以确认并单击删除，如下所示：

[![在此处输入图像描述](../Images/263a06b0ad41ef2c55f31d37a353d2b8.png)](https://i.stack.imgur.com/8CX90.png)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2021-06-26T10:19:09.337

我们可以按照这些简单的步骤来完成。

1.  打开存储库
2.  导航到设置
3.  滚动到页面底部
4.  点击删除
5.  确认要删除的存储库的名称
6.  点击删除

而已。全部完成

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-05-14T13:42:23.237

不，它不会影响您的原始存储库，只需确保存储库地址看起来像“youGitName/TheRepository”而不是“OtherPersonGitName/TheRepo”。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-04-29T11:15:09.837

我也在寻找解决这个问题的方法，尤其是批量删除。我终于使用了这个解决方案 - [https://github.com/yangshun/delete-github-forks](https://github.com/yangshun/delete-github-forks)。

像魅力一样工作！

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-09-23T02:22:51.390

我也遇到过这个问题。不，无论如何它都不会影响您的原始回购。只需输入分叉回购的名称即可将其删除

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-01-15T05:55:43.673

有多个答案指出，编辑/删除分叉不会影响原始存储库。那些答案是正确的。我将尝试在该答案中添加一些内容并在我的答案中解释原因。

分叉只是具有分叉关系的存储库的副本。

由于您可以将本地文件或目录复制到另一个地方并删除副本，因此不会影响原始文件。

分叉关系意味着，您可以轻松地告诉 github 它应该从您的分叉向原始存储库发送一个拉取请求（带有您的更改），因为 github 知道您的存储库是原始存储库的副本（双方都有一些更改） ）。

仅针对任何人的信息，拉取请求（或合并请求）包含已在 fork 中更改并提交到原始存储库的代码。允许在原始仓库上拥有 push/write 权限的用户（在其他 git 服务器中可能不同）可以将 pull request 的更改合并到原始仓库中（将 PR 的更改复制到原始仓库中）。

# postgresql - RoR/Postgres 查询所有父对象的第一个或最后一个子对象

> ID：11302642
> 
> 赞同：1
> 
> 时间：2012-07-02T23:39:06.270
> 
> 标签：postgresql, activerecord, ruby-on-rails-3.1

我见过类似的问题，但没有完全符合我需要的答案。如果它在那里，我还没有看到它。我在 Rails 3.1、Ruby 1.9.2 上，部署在 Heroku Cedar 堆栈上（所以我使用的是 postgres）

我有这个模型：

```
class User
  has_many :orders
end

class Order
  belongs_to :user

  #scope :last_for_each_user, ???
  #scope :first_for_each_user, ???

end 
```

我需要返回所有用户第一个订单的所有订单以及所有用户最后一个订单的所有订单的范围（或方法）。我的第一个直觉是使用 GROUP BY，它在 SQLite3 中对 :last_for_each_user 工作得很好，但是 Postgres 不会让你选择不在 GROUP BY 子句中或作为聚合函数的一部分选择的列，我需要完全形成的订单对象（即所有列、订单。*）。

有任何想法吗？我不想选择整个表并在 Ruby 中对其进行排序。只是感觉不对，而且要记住很多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:10:09.900

所以这就是我最终要做的，对于未来的挠头：

```
scope :last_for_each_user, lambda {
  select("orders.*") & Order.select("max(orders.id) as id").group("orders.user_id")
}
scope :first_for_each_user, lambda {
  select("orders.*") & Order.select("min(orders.id) as id").group("orders.user_id")
} 
```

如果有人有更好的主意，我很乐意听到。感谢整个 SO 社区（即使没有人回应），这是我第一次注册/提出问题，但每次我用谷歌搜索问题时，我都会到这里！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T19:30:07.343

您可以使用`DISTINCT ON()`规则仅获取最后一个。这是一个遵循模型结构的示例：

```
scope :for_users, lambda {|ids, is_first| includes(:user).where("user_id IN (?)", ids).select("DISTINCT ON (users.id) *").order("orders.created_at ?", is_first ? : "ASC" : "DESC") }
scope :last_for_each_users, lambda { |users| for_each_users(users.map{|u| u.id }, false }
scope :first_for_each_users, lambda { |users| for_each_users(users.map{|u| u.id }, true } 
```

# c++ - OpenCV findcontours 为每个圆返回 2 个轮廓

> ID：11302643
> 
> 赞同：5
> 
> 时间：2012-07-02T23:39:15.437
> 
> 标签：c++, image-processing, opencv, computer-vision

我正在尝试在下图中的 OpenCV 中使用[findcontours()](http://opencv.itseez.com/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=findcontours#cv2.findContours)函数。

`findContours(img, contours, hierarchy, CV_RETR_TREE, CV_CHAIN_APPROX_NONE, cvPoint(0,0) );`

当我执行此查询时：`contours.size()`它返回 18，因此每个圆似乎有 2 个轮廓。圆圈是你可以看到的 1 像素厚，它是 2 个轮廓吗？是一个用于外部，一个用于内部，如果是这样，我如何强制此功能仅检测每个圆的一个轮廓？我认为轮廓被定义为像素的连接序列，1 像素厚。

![说有18个轮廓！！](../Images/22b6ae2640b66b03cce1defcbc9a0dde.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T23:49:33.780

我无法确认这一点，但我认为这个函数使用的算法相当于计算每个函数的梯度。这意味着将在外边缘找到一个轮廓，在内边缘找到一个轮廓，就像您建议的那样。要确认这一点，您可以尝试使用圆圈填充白色的输入图像（消除内部轮廓）

您还可以在 findContours 函数上使用不同的参数进行测试

例如，尝试使用**CV_RETR_EXTERNAL**而不是**CV_RETR_TREE**我假设内圈嵌套在外圈内，所以这应该迫使它只返回外圈

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T16:07:19.153

你可能已经想通了，但是...

findContours 只关注白色物体，因此将每个空心圆识别为一条带，从而产生两个轮廓。

最好的方法是创建另一个带有实心圆圈的图像并为该图像应用 findContoours。它会给你你想要的。

# iphone - [[NSFetchedResultsController alloc] initWithFetchRequest 上的 SIGBART

> ID：11302644
> 
> 赞同：1
> 
> 时间：2012-07-02T23:39:17.847
> 
> 标签：iphone, ios, nsfetchedresultscontroller

我在代码中的这一行收到 sigbart 错误：

```
NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:@"ViewTwo"]; 
```

这是方法：

```
- (NSFetchedResultsController *)fetchedResultsController
{
if (__fetchedResultsController != nil) {
    return __fetchedResultsController;
}

// Set up the fetched results controller.
// Create the fetch request for the entity.
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
// Edit the entity name as appropriate.
NSEntityDescription *entity = [NSEntityDescription entityForName:@"MyData" inManagedObjectContext:self.managedObjectContext];
[fetchRequest setEntity:entity];

// Set the batch size to a suitable number.
[fetchRequest setFetchBatchSize:20];

// Edit the section name key path and cache name if appropriate.
// nil for section name key path means "no sections".
NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:@"ViewTwo"];

aFetchedResultsController.delegate = self;
self.fetchedResultsController = aFetchedResultsController;

NSError *error = nil;
if (![self.fetchedResultsController performFetch:&error]) {
    /*
     Replace this implementation with code to handle the error appropriately.

     abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
     */
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    abort();
}

return __fetchedResultsController;
} 
```

但这是一个奇怪的错误，因为在控制台中没有给我任何解释，所以我无法理解我做错了什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T00:08:25.500

NSFetchedResultsController 需要一个排序描述符和一个托管对象上下文。您没有提供排序描述符，因此您必须提供它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T00:06:35.313

奇怪的是 SIGBART 没有输出，尝试运行指令（点击单步查看它是否输出。

您需要做的是检查您发送给方法的每个元素（通过记录），其中一个元素可能实际上是 nil 或在调用执行之前被取消引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T02:52:09.440

您可以修改您的 xcdatamodled 但没有在设备上重新安装您的应用程序。

只需删除在您的设备上构建的应用程序并重新构建它，一切都会好起来的。

苹果是这样说的：

abort() 使应用程序生成崩溃日志并终止。您不应该在运输应用程序中使用此功能，尽管它在开发过程中可能很有用。

这里出现错误的典型原因包括： * 持久存储不可访问；* 持久存储的模式与当前的托管对象模型不兼容。检查错误消息以确定实际问题是什么。

如果无法访问持久存储，则文件路径通常有问题。通常，文件 URL 指向应用程序的资源目录，而不是可写目录。

如果您在开发过程中遇到架构不兼容错误，您可以通过以下方式降低其频率： * 只需删除现有商店：

```
 [[NSFileManager defaultManager] removeItemAtURL:storeURL error:nil] 
```

*   通过将以下字典作为选项参数传递来执行自动轻量级迁移：

    ```
     [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption, [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil]; 
    ```

    轻量级迁移仅适用于有限的架构更改；有关详细信息，请参阅“核心数据模型版本控制和数据迁移编程指南”。

# python - 从网络摄像头进行霍夫变换时，Python OpenCV 崩溃

> ID：11302648
> 
> 赞同：3
> 
> 时间：2012-07-02T23:39:40.537
> 
> 标签：python, opencv

我想我已经找到了问题所在。我正在使用 IP 网络摄像头流，进行精巧的边缘和霍夫变换。然后显示叠加的变换和原始图像。所以几乎看起来就像普通的网络摄像头，但水平线被突出显示。我正在寻找图像中的水平线。只要其中有水平线，它就可以正常工作。如果我启动凸轮并且没有任何水平线，我会收到错误消息：

```
 Traceback (most recent call last):
  File "/home/Desktop/hough.py", line 16, in <module>
  for line in lines[0]:
  TypeError: 'NoneType' object has no attribute '__getitem__' 
```

这是整个代码。我对 python 和 opencv 很陌生，所以我不知道如何解决这个问题。当没有任何水平线时，我希望它只显示空白图像，这样我就可以有一个连续的流。

此外，我的下一个任务是尝试将图像保存到视频中。对此部分的任何帮助将不胜感激。谢谢！

```
import cv2
import urllib
import math

cv2.namedWindow('edge')

while True:
    urllib.urlretrieve("http://192.168.5.1:8080/shot.jpg", 'cam.jpg')
    img = cv2.imread('cam.jpg')
    gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)
    edges = cv2.Canny(gray, 80, 120, apertureSize=3)

    lines = cv2.HoughLinesP(edges, 1, math.pi/2, 2, None, 30, 1)
    for line in lines[0]:
            pt1 = (line[0],line[1])
            pt2 = (line[2],line[3])
            cv2.line(img, pt1, pt2, (0,0,255), 3)

    cv2.imwrite("road2.jpg", img)
    cv2.imshow('edge', img)
    ch = cv2.waitKey(5)
    if ch == 27:
            break 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T00:13:22.450

显然在没有行时`cv2.HoughLinesP`返回。`None`

在第 16 行，您尝试访问`lines[0]`实际调用`lines.__getitem__`. 与`lines`type`NoneType`一样，它没有`__getitem__`方法。

`is not None`为了解决这个问题，您可以在访问其项目之前检查这些行：

```
if lines:
    for line in lines[0]
        [...] 
```

（请注意，它还会检查行不是空列表）

# php - 简单的 HTML 表单没有为 MySQL 表增加价值

> ID：11302649
> 
> 赞同：0
> 
> 时间：2012-07-02T23:39:47.893
> 
> 标签：php, mysql, html

下面的表格没有给 MySQL 表“contest”的第四个字段加分。

我找不到代码有什么问题。我错过了一些明显的东西吗？

```
echo '<form action="http://www.website.com/folder/file.php" method="post"> 
    <input type="hidden" value="'.$u.'" name="u"> 
    <input type="hidden" value="'.$profile.'" name="profile"> 
    <input type="hidden" value="'.$profileid.'" name="profileid"> 

    <div class="friend2title"><label for="url">Add points:</label></div> 
    <div class="friend2field"><input name="state" type="text" id="state" maxlength="150"></div>

    <div class="addresssubmit"><input name="submit" type="submit" value="Add"></div> 
</form>
'; 
```

然后，在[http://www.website.com/folder/file.php](http://www.website.com/folder/file.php)：

```
$u = $_POST['u'];
$profile = $_POST['profile'];
$profileid = $_POST['profileid'];

$state = $_POST['state'];

$state = mysql_real_escape_string($state);

mysql_query("INSERT INTO contest VALUES (NULL, 'critic', '$profileid',  '$state', NULL')"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T23:42:06.253

您必须`value`在状态输入中使用默认值声明属性

```
<input name="state" type="text" id="state" value="' . $state . '" maxlength="150"> 
```

另外，您的代码容易受到 SQL 注入的影响，永远不要信任来自用户的字段，这对您的数据库非常危险。

# python - Scrapy 爬虫正在运行，但没有跟踪任何链接。（克雷格列表）

> ID：11302652
> 
> 赞同：0
> 
> 时间：2012-07-02T23:40:21.083
> 
> 标签：python, scrapy, web-crawler, craigslist

出于某种原因，我的爬虫只爬了几个域。它至少应该遵循起始页上的所有 url。此外，这在 craigslist 上，我不确定它们是否以阻止爬虫而闻名。知道发生了什么吗？

这是输出：

```
2012-07-01 15:02:56-0400 [craigslist] INFO: Spider opened
2012-07-01 15:02:56-0400 [craigslist] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)
2012-07-01 15:02:56-0400 [scrapy] DEBUG: Telnet console listening on 0.0.0.0:6026
2012-07-01 15:02:56-0400 [scrapy] DEBUG: Web service listening on 0.0.0.0:6083
2012-07-01 15:02:57-0400 [craigslist] DEBUG: Crawled (200) <GET http://boston.craigslist.org/search/fua?query=chest+of+drawers> (referer: None)
2012-07-01 15:02:57-0400 [craigslist] DEBUG: Crawled (200) <GET http://boston.craigslist.org/fua/> (referer: None)
2012-07-01 15:02:57-0400 [craigslist] DEBUG: Filtered offsite request to 'boston.craigslist.org': <GET http://boston.craigslist.org/sob/fud/3112540401.html>
2012-07-01 15:02:57-0400 [craigslist] INFO: Closing spider (finished) 
```

这是代码：

```
from scrapy.selector import HtmlXPathSelector
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.contrib.spiders import CrawlSpider, Rule
from craigslist.items import CraigslistItem

from scrapy.http import Request

class BostonCragistlistSpider(CrawlSpider):
    name = 'craigslist'
    allowed_domains = ['http://boston.craigslist.org']
    start_urls = ['http://boston.craigslist.org/search/fua?query=chest+of+drawers']

    rules = (
        Rule(SgmlLinkExtractor(allow=r'\/[a-z]{3}\/[a-z]{3}\/.*\.html'), callback='get_image', follow=True),
        # looking for domains like:
        # http://boston.craigslist.org/sob/fud/3111565340.html
        # http://boston.craigslist.org/gbs/fuo/3112103005.html
        Rule(SgmlLinkExtractor(allow=r'\/search\/fua\?query=\.*'), callback='extract_links', follow=True),
    )

    def extract_links(self, response):
        print 'extracting links'
        links = hxs.select('//p[@class="row"]//a/@href').extract()
        for link in links:
            return Request(link, callback=self.get_image)

    def get_image(self, response):
        print 'parsing'
        hxs = HtmlXPathSelector(response)
        images = hxs.select('//img//@src').extract() 
```

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T01:11:15.127

allowed_domains 需要包含域名，而不是 URL。将其更改为：

```
allowed_domains = ['boston.craigslist.org'] 
```

您可以从日志中看到请求已被场外中间件（删除 allowed_domains 之外的 URL 的组件）过滤：

```
15:02:57-0400 [craigslist] DEBUG: Filtered offsite request to 'boston.craigslist.org': http://boston.craigslist.org/sob/fud/3112540401.html> 
```

# c++ - 按类别列出 C++

> ID：11302654
> 
> 赞同：0
> 
> 时间：2012-07-02T23:40:23.407
> 
> 标签：c++, qt, list

我正在创建一个这样的列表： `QList<Type> types[LastType];` 然后我调整列表的大小： `types[SomeType].reserve(count);` 然后，当我尝试添加类型时，我这样做： `types[SomeType].append(newType);`

它给了我一个关于 operator[] 的断言失败。那么，只是我还是我不应该这样做？有什么我想念的吗？这就是错误消息所说的：[http://i.imgur.com/LnDNV.png](http://i.imgur.com/LnDNV.png)。删除 .reserve 并不能解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T23:43:21.427

因此，假设 a`QList`确实是 a`vector`在引擎盖下，`reserve`是错误的调用。您并没有像您说的那样调整列表的大小，而是要求它为*至少* `size`更多元素分配空间。是的，它分配了更多空间，但不会改变列表的*大小*。

> 在任何情况下，对该函数的调用都不会影响向量中包含的元素，也不会影响向量大小（为此，请参阅 vector::resize 或 vector::erase，它们会修改向量大小和内容）。

听起来你想要`resize`这里。

# python - python进程之间的共享内存

> ID：11302656
> 
> 赞同：15
> 
> 时间：2012-07-02T23:40:40.820
> 
> 标签：python, c, shared-memory

我试图找出一种在 python 进程之间共享内存的方法。基本上存在多个python进程需要能够读取（仅读取）和使用（无突变）的对象。现在这是使用 redis + strings + cPickle 实现的，但是 cPickle 占用了宝贵的 CPU 时间，所以我不想使用它。我在互联网上看到的大多数 python 共享内存实现似乎都需要文件和泡菜，这基本上是我已经在做的事情，而这正是我想要避免的事情。

我想知道是否有办法编写类似...基本上是内存中的python对象数据库/服务器和相应的C模块来与数据库接口？

基本上，C 模块会向服务器询问要写入对象的地址，服务器会以地址响应，然后模块会写入对象，并通知服务器具有给定键的对象已写入磁盘指定的位置。然后，当任何进程想要使用给定键检索对象时，它们只需向数据库询问给定键的内存位置，服务器将响应该位置，模块将知道如何在内存中加载该空间并将 python 对象传输回 python 进程。

这是完全不合理的还是真的很难实施？我在追求不可能的事情吗？欢迎大家提出意见。谢谢互联网。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T23:45:05.423

不无道理。

IPC 可以通过内存映射文件来完成。Python具有内置功能：

[http://docs.python.org/library/mmap.html](http://docs.python.org/library/mmap.html)

只需在两个进程中映射文件，嘿-presto 你有一个共享文件。当然，您必须在两个进程中轮询它以查看发生了什么变化。而且您必须在两者之间进行合作写入。并决定您要将数据放入的格式。但这是解决问题的常见方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T05:51:57.763

如果你不想腌制，`multiprocessing.sharedctypes`可能适合。不过，这有点低级。你得到单个值或指定类型的数组。

将数据分发给子进程的另一种方式（一种方式）是`multiprocessing.Pipe`. 它可以处理 Python 对象，并且它是用 C 实现的，所以我不能告诉你它是否使用酸洗。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-07-26T06:32:16.547

从 Python 3.8 起，您可以使用[multiprocessing.shared_memory.SharedMemory](https://docs.python.org/3.10/library/multiprocessing.shared_memory.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-11-12T10:29:04.363

Python 不支持独立进程之间的共享内存。你可以用 C 语言实现你自己的，或者`SharedArray` 在你使用 libsvm、numpy.ndarray、scipy.sparse 时使用。

```
pip install SharedArray 
```

```
def test ():
    def generateArray ():
        print('generating')
        from time import sleep
        sleep(3)
        return np.ones(1000)
    a = Sarr('test/1', generateArray)

    # use same memory as a, also work in a new process
    b = Sarr('test/1', generateArray) 
    c = Sarr('test/1', generateArray)

import re
import SharedArray
import numpy as np

class Sarr (np.ndarray):
    def __new__ (self, name, getData):
        if not callable(getData) and getData is None:
            return None
        self.orig_name = name
        shm_name = 'shm://' + re.sub(r'[./]', '_', name)
        try:
            shm = SharedArray.attach(shm_name)
            print('[done] reuse shared memory:', name)
            return shm
        except Exception as err:
            self._unlink(shm_name)
            data = getData() if callable(getData) else getData
            shm = SharedArray.create(shm_name, data.size)
            shm[:] = data[:]
            print('[done] loaded data to shared memory:', name)
            return shm

    def _unlink (name):
        try:
            SharedArray.delete(name[len('shm://'):])
            print('deleted shared memory:', name)
        except:
            pass

if __name__ == '__main__':
    test() 
```

# jquery - BxSlider 淡入淡出

> ID：11302657
> 
> 赞同：1
> 
> 时间：2012-07-02T23:40:45.543
> 
> 标签：jquery, css, slider, bxslider

StackOverflow 的人

我是 jQuery 新手，但我目前正在使用 BXslider 插件。

```
<script type="text/javascript">
  $(document).ready(function(){
    $('#slider').bxSlider();
  });
</script> 
```

我要做的就是让每张幻灯片上的滑块从左到右滑入和滑出。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T00:27:30.800

在您发布的链接中，您可以选择自定义插件。您可以像这样更改值：

```
$(document).ready(function(){
    $('#slider').bxSlider({
    mode: 'fade',
    });
}); 
```

如果您正在寻找更多过渡/缓动选项，则需要包括 jQuery Easing。在这里获取：http: [//gsgd.co.uk/sandbox/jquery/easing/](http://gsgd.co.uk/sandbox/jquery/easing/)

然后像这样添加缓动选项：

```
easing: 'swing', 
```

仅供参考'swing'是默认设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T23:53:09.957

您的列表或 div 的 ID 必须等于 jQuery 代码。

看看是否有其他代码没有正确关闭并且可能会干扰这个。

确保添加了与插件兼容的 jQuery 版本，并在页眉中添加了 .min.js。

# javascript - 如何使用 jQuery 将某些内容附加到表单元素的值，而不是更改它？

> ID：11302658
> 
> 赞同：3
> 
> 时间：2012-07-02T23:40:47.137
> 
> 标签：javascript, jquery, textarea

我知道如何在基本的 JS 中做到这一点：

```
document.getElementById("someTextarea").value += "stuff"; 
```

请注意`+`- 我正在增加价值，而不是完全改变它。我将如何使用 jQuery 来做到这一点[`val()`](http://api.jquery.com/val/#val2)？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T23:43:43.833

```
$('#foo').val($('#foo').val() + 'something'); 
```

（当然你可以而且应该缓存元素）。

另一种方式（非常 jQuery 风格）：

```
$('#foo').val(function(){
    return this.value + "something";
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T23:43:54.960

```
$('#someTextarea').val(function(i, v){ return v + 'stuff'; }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T02:50:22.660

由于 ID 选择器将返回一个唯一元素，因此您可以`val`根据需要避免：

$('#foo')[0].value += '东西';

# less - 没有 mixin 的 LESS CSS 守卫

> ID：11302662
> 
> 赞同：6
> 
> 时间：2012-07-02T23:41:06.623
> 
> 标签：less

我刚刚进入 LESS 并试图弄清楚如何在没有 mixins 的情况下制作条件 css 语句。我发现我有很多单行 css 语句，它们只出现一次，但依赖于某些变量或条件，并且使用 mixins 有点毫无意义，因为它永远不会被重用。

例子。

```
@add-margin: true;

body {
    margin-top: 20px;  //I only want this if add-margin is true
} 
```

所以理想情况下我想要这个：

```
body when (@add-margin) {
     margin-top: 20px;
} 
```

但这不起作用。使用 mixin 是可行的，但只为一个衬里制作一个似乎很愚蠢。有没有其他方法可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T13:23:36.417

是的，你可以，它类似于你的代码。

```
@add-margin: true;

.margin() when (@add-margin) {
    margin-top: 20px;
}

body { .margin(); } 
```

**更新：**使用最新版本的 LESS（1.5+），不需要使用“受保护的 mixins”来实现这一点，您可以使用“css gaurds”代替，因此 OP 的代码将开箱即用

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-25T05:05:33.600

[**CSS Guards**](http://lesscss.org/features/#css-guards-feature)功能是在 Less v1.5.0 中引入的，因此现在我们可以像问题中提到的那样使用警卫。

```
@add-margin: true;

body when (@add-margin){
    margin-top: 20px;
} 
```

如果您需要基于同一变量将多个此类属性分配给不同的选择器，则可以使用`&`选择器如下实现。

```
& when (@add-margin){
    body{
        margin-top: 20px;
    }
    h1{
        margin-top: 10px;
    }
} 
```

**注意：**正如[memeLab](https://stackoverflow.com/users/2586761/memelab)`@add-margin`在评论中提到的那样，变量以外的任何值`true`都被[**认为是 falsy**](http://lesscss.org/features/#mixin-guards-feature-guard-comparison-operators)。这是因为`true`是关键字，`'true'`而是字符串值。例如，下面将不输出任何内容。

```
@add-margin: 'true';

body when (@add-margin){
    margin-top: 20px;
} 
```

但是，以下内容会起作用，因为它会进行字符串比较。

```
@add-margin: 'true';

body when (@add-margin = 'true'){
    margin-top: 20px;
} 
```

如果您使用低于 v1.5.0 的 Less 编译器，那么 Unicornist 发布的答案[是](https://stackoverflow.com/users/1494686/unicornist)最好的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T04:47:13.613

不，这种形式是不可能的。

您可以使用等于 0 或 1 的变量并乘以 20 然后始终输出规则，或者使用 JavaScript（我建议您避免这种情况）将 true 转换为 0 或 20 并始终输出规则，但是如果您想要有条件添加的属性，你需要警卫。

# javascript - Jquery：动态表单

> ID：11302671
> 
> 赞同：0
> 
> 时间：2012-07-02T23:42:38.570
> 
> 标签：javascript, jquery

我需要一个动态表单，它将根据选择的输入值从输入列表（默认隐藏）构建。

我面临的唯一问题是显示/隐藏表单元素。我有以下代码：

```
 var form = $("#form");
            var type = $("select[name=type]").val();

            switch(type){
                case 'image':
                    form.html($("#title, #src"));
                    break;
                case 'video':
                    form.html($("#title, #url"));
                    break;
                case 'text':
                    form.html($("#title, #body"));
                    break;
                case 'generate':
                    form.html($("#title, #src));
                    break;
            } 
```

我的问题是：如何动态添加/删除对象子元素？输入存储在单独的`<div>`元素中 - 我需要将它们作为`#form`div 的子元素添加或删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T00:05:38.587

只需使用`form.append(...)`，元素将附加在表单的末尾

# visual-studio-2010 - 如何仅在某些测试失败时显示 NUnit 测试结果？

> ID：11302674
> 
> 赞同：1
> 
> 时间：2012-07-02T23:42:52.413
> 
> 标签：visual-studio-2010, unit-testing, automation, nunit

当我构建 Visual Studio 2010 项目时，我想使用 NUnit 运行单元测试并仅在某些测试失败时显示测试结果。

我在 Visual Studio 中设置了一个构建后事件来调用一个批处理文件，如下所示：

```
$(ProjectDir)RunUnitTest.bat "$(SolutionDir)packages\NUnit.Runners.2.6.0.12051\tools\nunit-console.exe" "$(TargetPath)" 
```

然后在 中`RunUnitTest.bat`，我调用`nunit-console.exe`并传入测试项目 dll。

```
@echo off    
REM runner is the full path to nunit-console.exe
set runner=%1    
REM target is the full path to the dll containing unit tests
set target=%2    
"%runner%" "%target%"    
if errorlevel 1 goto failed
if errorlevel 0 goto passed    
:failed
echo some tests failed
goto end    
:passed
echo all tests passed
goto end    
:end
echo on 
```

之后，NUnit 会生成`TestResult.xml`包含测试结果，那么如何以用户友好的方式显示呢？如果它显示在 Visual Studio 中将是最好的，但其他选项也是开放的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T04:42:04.233

您可能需要考虑 XSLT 执行转换并显示来自 TestResult.xml 的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T22:25:27.260

我最终使用[nunit-summary](https://launchpad.net/nunit-summary/)生成所有通过摘要 html 报告和[nunit-results](https://launchpad.net/nunit-results/)以在 html 中创建失败的测试报告。

这种方法很容易设置。

首先，从启动板下载 nunit-summary 和 nunit-results 并将它们放在测试项目下的 TestRunner 文件夹中。

然后，添加构建后事件以调用批处理文件。

最后，将批处理文件添加到测试项目下的 TestRunner 文件夹中。它至少应包含以下文件：

*   `nunit-results.exe`
*   `nunit-results.tests.dll`
*   `nunit-results.tests.pdb`
*   `nunit-summary.exe`
*   `nunit-core.dll
*   `nunit.util.dll`
*   `RunUnitTests.bat`

包含单元测试的项目的构建后事件：

```
"$(ProjectDir)TestRunner\RunUnitTests.bat" "$(SolutionDir)packages\NUnit.Runners.2.6.0.12051\tools\nunit-console.exe" "$(TargetPath)" "$(TargetDir)" 
```

中的脚本`RunUnitTest.bat`

```
REM     This batch file does the followings:
REM     1\. runs unit test with nunit-console.exe and produces a TestResult.xml
REM     2\. if one or more tests failes, it calls unit-results.exe to convert TestResult.xml to 
REM     Usage: RunUnitTests.bat "path-to-nunit.exe" "path-to-test.dll" "path-to-output-folder"

@echo off

REM get input arguments
set runner=%1
set target=%2
set output=%3

REM remove double quotes
set runner=%runner:"=%
set target=%target:"=%
set output=%output:"=%

REM prepare and clean up TestResult folder
if not exist "%output%TestResults\nul" md "%output%TestResults"
del "%output%\TestResults\*.*" /q

"%runner%" "%target%"

if errorlevel 1 goto failed
if errorlevel 0 goto passed

:failed
echo some tests failed
"%~dp0nunit-results.exe" "%output%TestResult.xml"
"%output%TestResults\index.html"
exit 1

:passed
echo all tests passed
"%~dp0nunit-summary.exe" "%output%TestResult.xml" -out=TestResults\TestSummary.html
"%output%TestResults\TestSummary.html"
exit 0 
```

# excel - Excel公式以不同方式处理同一单元格中的数字

> ID：11302675
> 
> 赞同：0
> 
> 时间：2012-07-02T23:42:55.843
> 
> 标签：excel

G'day，我以前从未真正使用过 excel 公式，但需要将 seigismal long/lat 点转换为十进制度。这很容易，例如，

如果 Easting = 29 44.135' => 29 + (44.135*1/60) => 29.73558333 E

我遇到的问题是 29 44.135 在一个单元格中，我不知道如何单独指定该数字的各个部分以写出上述公式。

任何帮助都会很棒，在此先感谢！

问候，亚当

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T00:12:46.060

假设这两个部分由一个空格分隔：

```
=LEFT(A1,SEARCH(" ",A1)-1) + MID(A1,SEARCH(" ",A1)+1,LEN(A1)-SEARCH(" ",A1)-1)*1/60 
```

# java - 在几个 Java 套接字中测量带宽/速度？

> ID：11302680
> 
> 赞同：3
> 
> 时间：2012-07-02T23:43:28.587
> 
> 标签：java, performance, sockets, bandwidth, measure

我用 Java 编写了一个服务器，它将有几个客户端连接到它。我希望能够查看向每个客户端发送了多少数据，以便能够做出决定，例如允许更多客户端或减少它们，甚至增加/减少发送数据的频率。我怎样才能做到这一点？

我目前正在使用 Java 的 Socket API，但如果任何其他库可以轻松地为我提供此功能，则可以进行更改。该服务器将以 linux 风格运行，可能是 Ubuntu，因此也欢迎特定于操作系统的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T07:46:55.377

当您向套接字写入数据时，您需要记住您发送了多少。真的没有更聪明的方法来做到这一点。

一般来说，您将允许服务器具有有限数量的连接。尝试根据带宽限制调整系统是很难做到的。

# linux - 插入 USB 设备时运行某些东西不起作用

> ID：11302684
> 
> 赞同：4
> 
> 时间：2012-07-02T23:43:53.237
> 
> 标签：linux, ubuntu, usb, udev, kubuntu

我在 /etc/udev/rules.d/local.rules 中制作了一个脚本

```
SUBSYSTEM=="usb", SYSFS{idVendor=="b58e"}, SYSFS{idProduct=="9e84"}, ACTION=="add", RUN+="notify-send USB" 
```

然后我重新加载udev

```
 sudo udevadm control --reload-rules 
```

我试图删除除子系统之外的所有内容并运行。我试过运行'='而不是'+='，我厌倦了ATTR而不是SYSFS。我试过“sudo service udev restart”和“sudo reload udev”。我拔下设备，然后重新插入，它不运行该操作。我尝试将其重命名为 70-local.rules 并将权限更改为 a+x。我尝试将“子系统”更改为“总线”。我尝试将运行设置为具有相同命令的“/path/test.sh”。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-03T02:04:07.440

我不是专家，这不是答案，但我发现以下步骤可用于确定要触发的适当属性：

1.  `udevadm`使用、`lsusb`或定位设备路径`usb-devices`。我通常只是使用`lsusb`并让我的 shell 中的制表符完成引导我。就我而言，路径是`/dev/bus/usb/003/007`.
2.  用于`udevadm`标识规则写入的设备属性。就我而言，我使用了`udevadm info -a --attribute-walk --root --name=/dev/bus/usb/003/007`.
3.  编写规则并检查它是否正在触发。就我而言，我只是将设备所有者更改为用户“斯蒂芬”，我很容易通过使用`ls -l /dev/bus/usb/003/007`. 我对这种情况的规则如下`SUBSYSTEM=="usb", ATTR{idVendor}=="18d1", OWNER="stephen"`：我有一个类似的规则让我困惑了一会儿，因为子系统期望`ATTRS`not `ATTR`，这就是我建议遍历属性的原因。后一种情况下的规则变为：`SUBSYSTEM=="tty", ATTRS{idVendor}=="0403", ATTRS{idProduct}=="6001", OWNER="stephen"。

而且，当然，`man udev`总是有帮助的。正如您所说，您应该努力确定您的规则是否正确触发，并且最好像我在第一步中所做的那样在设备上进行快速所有权更改。有时您可能会遇到不良属性或符号链接的麻烦，这是

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T23:50:28.770

> 它不运行动作

不，它运行动作。问题是*它不知道在哪里发送通知*，因为 udev 启动时没有运行通知框架。您将需要通过系统总线发送 DBus 消息，并让用户守护进程捕获该消息并发布通知。

# openam - OpenAM 通过 rest api 添加用户失败（缺少所需的 sn）

> ID：11302686
> 
> 赞同：1
> 
> 时间：2012-07-02T23:43:55.077
> 
> 标签：openam

使用 /identity/create 服务时，默认 OpenAM 架构需要 sn 和 cn 属性。即使我在请求中指定了它们，我在后端收到一个错误，说 sn 丢失......还有其他人让创建身份端点工作吗？

我将 OpenDS 用于支持 ldap，将 9.5.4 版用于 OpenAM。所有其他端点（身份验证、注销、isValidToken、更新）都可以正常工作。

要求：

```
http://openam:8080/openam/identity/create?admin={token}&identity_type=user&identity_name=jdoe&identity_realm=/&identity_attribute_names=userpassword&identity_attribute_values_userpassword=changeme&identity_attribute_names=givenname&identity_attributes_values_givenname=tbd&identity_attribute_names=sn&identity_attributes_values_sn=tbd&identity_attribute_names=cn&identity_attributes_values_cn=tbd 
```

例外：

```
exception.name=com.sun.identity.idsvcs.GeneralFailure Plug-in com.sun.identity.idm.plugins.ldapv3.LDAPv3Repo encountered an ldap exception. LDAP Error 65: The requested operation will add or change data so that the data no longer complies with the schema. 
```

OpenDS 错误：

```
ADD RES conn=82 op=20 msgID=33882 result=65 message="Entry uid=jdoe,ou=people,dc=company,dc=com violates the Directory Server schema configuration because it is missing attribute sn which is required by objectclass person" etime=0 
```

* * *

更新：

看起来当它到达 LDAPv3Repo 时，sn 和 cn 属性已被删除：

```
LDAPv3Repo:07/02/2012 05:52:17:986 PM PDT: Thread[http-bio-8080-exec-2,5,main]
exit addAttrMapping: attrMap = {mail=[], sn=[], cn=[], inetuserstatus=[Active], givenname=[], userpassword=xxx..., dn=[]} 
```

调试日志中没有其他看起来有帮助的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:09:35.627

这看起来像你打错字了，而且没有帮助的错误信息。

您的用户密码对

```
identity_attribute_names=userpassword&identity_attribute_values_userpassword=changeme 
```

应该

```
identity_attribute_names=userpassword&identity_attributes_values_userpassword=changeme 
```

在第二个属性的末尾有一个额外的 s。您可能会发现 OpenAM 邮件列表对 OpenAM 问题更敏感 (https://lists.forgerock.org/mailman/listinfo/openam)

# php - 如何从php中的多维数组中获取所有特定的键值？

> ID：11302687
> 
> 赞同：0
> 
> 时间：2012-07-02T23:43:57.247
> 
> 标签：php, arrays, key, multidimensional-array

如何从以下多维数组中获取数组中的所有“名称”和“城市”值？

```
$myarray=Array(Array('name' => 'A','id' => '1', 'phone' => '416-23-55',
Base => Array ('city'  => 'toronto'),'EBase' => Array('city' => 'North York'),
'Qty' => '1'),  (Array('name' =>'B','id' => '1','phone' => '416-53-66','Base' => 
Array  ('city' => 'qing'), 'EBase' => Array('city' => 'chong'),'Qty' => '2'))); 
```

我希望返回的值是

```
$namearray=Array('A','B');
$basecityarray=Array('toronto','qing');
$Ebasecityarray=Array('North York','chong'); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T00:00:18.607

你绝对可以尝试这样的事情：

```
$shop = array( array( 'Title' => "rose", 
                  'Price' => 1.25,
                  'Number' => 15 
                ),
           array( 'Title' => "daisy", 
                  'Price' => 0.75,
                  'Number' => 25,
                ),
           array( 'Title' => "orchid", 
                  'Price' => 1.15,
                  'Number' => 7 
                )
         ); 
```

您可以访问第一行

```
echo $shop[0][0]." costs ".$shop[0][1]." and you get ".$shop[0][2]."<br />"; 
```

或者`$shop[0]->Title`会回报给你`rose`。

# java - 正则表达式 - 如何在第一次出现字符时停止

> ID：11302690
> 
> 赞同：4
> 
> 时间：2012-07-02T23:44:43.893
> 
> 标签：java, c#, php, regex, perl

我正在尝试从标签中提取 src 值，到目前为止，我似乎能够提取 src 值和字符串中最后一个引号之间的字符串

**细绳：**

```
<img  border="0"  src="http://i.bookfinder.com/about/booksellers/logo_borderless/amazon_uk.gif" width="89" height="31" alt=""> 
```

**例如在 PHP 中：**

```
preg_match('/src=\"(.*)\"/', $row->find('a img',0), $matches);
if($matches){
   echo $matches[0];
} 
```

**打印出来** `src="http://i.bookfinder.com/about/booksellers/logo_borderless/amazon_uk.gif" width="89" height="31" alt=""`

**但我真正想要打印的是...** `src="http://i.bookfinder.com/about/booksellers/logo_borderless/amazon_uk.gif"`

**或者如果可能的话...** `http://i.bookfinder.com/about/booksellers/logo_borderless/amazon_uk.gif`

我应该在正则表达式中添加什么？谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-03T00:08:04.800

你其实很亲密>>

```
Yours:        preg_match('/src=\"(.*)\"/',  $row->find('a img',0), $matches);
Correct one:  preg_match('/src=\"(.*?)\"/', $row->find('a img',0), $matches); 
```

通过添加`?`你对匹配`.*`惰性的请求，这意味着它会匹配任何东西直到需要，而不是任何东西直到可以。如果没有惰性运算符，它将停在最后一个双引号之前`"`，它在后面`alt="`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-02T23:49:25.620

对于正则表达式：

```
preg_match('/src="([^"]+)"/', $row->find('a img',0), $matches);
echo $matches[1]; 
```

如果我是对的，那么您正在使用**simple_html_dom_parser**库。如果这是真的，你可以输入：

```
$row->find('a img',0)->src 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-02T23:50:51.640

试试看，应该适合你的需求

```
/src=\"[^\"]+\"/ 
```

# html - 移动横向模式的媒体查询问题

> ID：11302691
> 
> 赞同：-1
> 
> 时间：2012-07-02T23:44:50.287
> 
> 标签：html, css, mobile, landscape

我正在为自己制作一个新的投资组合，我希望它能够在所有平台上工作。

我已经让它在桌面、移动肖像、ipad 肖像和 ipad 风景上工作，所有这些都设置了不同的媒体查询..

但是，当我在我的 android 上以横向加载页面时，它会这样做： * 加载桌面版本 * 放大而不是适合屏幕

我真的希望手机景观能够加载平板电脑景观视图，因为屏幕尺寸会相似，但我尝试过的一切都对它没有任何影响..

可以在以下位置检查我的代码：[www.stuffmadeby.me/test](http://www.stuffmadeby.me/test)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:40:25.703

通过检查您的代码，横向的唯一媒体查询是`(min-width:768px) and (max-width:1024px)`，您确定您的 android 设备的宽度不会太小或太大吗？

# ruby - 如何创建一个可枚举对象，根据需要评估另一个可枚举对象？

> ID：11302696
> 
> 赞同：1
> 
> 时间：2012-07-02T23:45:54.017
> 
> 标签：ruby, enumeration

鉴于我有如下代码，我需要做什么才能使其工作？

```
config = {} #options for faster csv
input_file = "foo.csv"

# can be in any class or module
def count_item_groups(items)
    results = Hash.new(0)
    (items || []).each do |current|
        results[current.to_s] += 1
    end
    results
end

row_value_iterator = FasterCSV.foreach(input_file, config) do |row|
  yield return row[1]
end

result = count_item_groups(row_value_iterator) 
```

对比这样的代码

```
def do_it_all
    results = Hash.new(0)
    FasterCSV.foreach(input_file, config) do |row|
        results[row[1].to_s] += 1
    end
    results
end 
```

结果应该是带有 row[1] 值键的散列。`yield return`Ruby 中不存在，但我确信 Ruby 可以处理这种类型的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T08:09:30.677

这就是我理解你在问的问题：“我怎样才能将这样的方法转换为`FasterCSV.foreach`命令式（通过产生副作用）工作的东西（产生值），以便我可以模块化我的代码”。

答：在 Ruby 中，您可以使用[Object#enum_for将](http://ruby-doc.org/core-1.9.3/Object.html#method-i-enum_for)*each*方法转换为*Enumerator*对象。现在你可以使用你的输出，但我建议使用 Facets 的[Enumerable#frequency](http://rdoc.info/github/rubyworks/facets/master/Enumerable#frequency-instance_method)：`count_item_groups``map`

```
results = FasterCSV.enum_for(:foreach, "file.csv", {}).map do |row|
  row[1].to_s
end.frequency
#=> {"val1"=>3, "val2"=>1} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T01:56:47.740

我不确定你在问什么，我认为这与可链接功能有关。

在 ruby​​ 中，您可以链接这些迭代器，而不是将对象迭代器作为参数传递给另一个迭代器。它看起来像这样。

```
row_value_iterator = FasterCSV.foreach(input_file, config).map do |row|
  row[1]
end

result = row_value_iterator.each_with_object(Hash.new(0)) do |current,results|
  results[current.to_s] += 1
end 
```

或者以真正的连锁风格进行：

```
result = FasterCSV.foreach(input_file,config).each_with_object(Hash.new(0)) do |row,results|
  results[row[1].to_s] += 1
end 
```

# actionscript-3 - Actionscript 3 - 将数字的倍数设置为等于数字

> ID：11302697
> 
> 赞同：2
> 
> 时间：2012-07-02T23:46:01.327
> 
> 标签：actionscript-3, function, numbers, slider, threshold

我正在用 Actionscript 3 编写一个程序，其中涉及一个滑块，当您以“第 2 周第 3 周”或“第 8 个月第 2 周”的格式向右滑动时，它会显示一年中的周数和月数。我做了几个月这样的事情：function monthHandler(){

```
var a:Number = ((Math.ceil(aSlider.value/4))+1);
monthLabel.text = "Month" + String(a);

} 
```

但是对于同一个滑块（aSlider），我想每个月显示几周，最多 4 周。我知道我基本上需要设置一个数字阈值；值 1-4 将显示周数：1-4，但值 5-8 也必须显示周数 1-4。

我知道我可以通过使用 if() 循环的 crapton 来做到这一点，但我对编程比较陌生，所以我假设有一种更有效的方法来做到这一点，而我只是不知道。我环顾网络以检查数字的倍数并设置数字阈值，但似乎没有什么适合我的问题。

几周的当前代码是：

```
function weekHandler(){
var b:Number = ((Math.ceil(aSlider.value/12))+1);
weekLabel.text = "Week:" + String(b);
} 
```

当我将滑块滑过物体的四分之一时，所有这些都会显示 1-4。就像我说的，我知道这不起作用，但我不知道该怎么做才能解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T05:10:37.180

基本上，我认为你想要的代码是：

```
var a:Number = (Math.ceil(aSlider.value) % 4) +1;
weekLabel.text = "Week" + String(a); 
```

a % b = a 的余数除以 b..

否则你不需要很多'if（）'来计算它。

你可以使用`(a - Math.floor(a/b)*b)`<= 但不要使用它，使用`a%b`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T05:12:38.983

假设您的滑块有 12 个月，每月 4 周：

**月份：**

```
var months:int = (int)(dateSlider.value / 4); 
```

**周数：**

```
var weeks:int = (dateSlider.value % 4) + 1; 
```

**闪存示例：**

![闪光滑块](../Images/7ea0546194100dbf08c527c26f61296e.png)

如果您有`dateSlider`Flash 组件：

![闪日期滑块](../Images/427a05b0a7369d5480d5ab30a0f22853.png)

您可以更新`dateText`标签，例如：

```
import fl.events.SliderEvent;

dateSlider.addEventListener(SliderEvent.CHANGE, sliderChangeHandler);

function sliderChangeHandler(event:SliderEvent):void
{
    dateText.text = "Month: " + (int)(event.value / 4) + " " +
                    "Week: " + ((event.value % 4) + 1);
} 
```

**弹性示例：**

![月-0](../Images/1e00b703609b84ee598933a99cd4105c.png) ![第 6 个月](../Images/74c4bb9efa136b191cd8a5953c3e3525.png) ![12 月](../Images/edbe85be22e605b88ce40011f9a0b4c7.png)

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark"
               xmlns:mx="library://ns.adobe.com/flex/mx">

    <s:layout>
        <s:VerticalLayout />
    </s:layout>

    <s:Label text="Month: {(int)(dateSlider.value / 4)} Week: {(dateSlider.value % 4) + 1}" />

    <s:HSlider id="dateSlider"
               maximum="{(13 * 4) - 1}"
               snapInterval="1"
               stepSize="1" />

</s:Application> 
```

应该注意的是，这种对日期的解释似乎是初步的，因为每月的实际周数是 4.34812。

明确计算日期时间跨度将是有益的。

# c# - 如何在 javascript 脚本标签中使用 razor for 循环？

> ID：11302698
> 
> 赞同：9
> 
> 时间：2012-07-02T23:46:02.170
> 
> 标签：c#, javascript, asp.net-mvc-3, razor

生成的错误是“条件编译已关闭”。

来自 MSDN 的 Conditional Compilation hack 很普遍，但失败了。

有几个这样的问题： [Razor 中关闭了条件编译？](https://stackoverflow.com/q/6655696/1026459)

他们都指向以下答案：

```
/*@cc_on @*/ 
```

从 MSDN 上看到的文章：

[http://msdn.microsoft.com/en-us/library/5y5529x3(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/5y5529x3(v=vs.90).aspx)

但是，这个 hack 非常失败，或者我似乎无法实现它。尾随`@*`导致 .cshtml 文件中的剩余代码被注释掉。此外，`@cc_on`给出错误“cc_on 在当前上下文中不存在”。

这是在 .cshtml 文件中测试的一段代码：

```
<script type="text/javascript">
 @for(int i = 0; i < 5; i++)
 {
    document.write(@i);
 }
</script> 
```

这将导致“条件编译已关闭”消息。尝试在其中插入解决方法将导致来自 for 循环的各种其他消息，例如“cc_on”不存在于上下文中”、“预期”或“预期;”或“预期)”。

如何在 javascript 脚本标签中使用 razor for 循环？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-03T00:05:00.447

尝试围绕你的js`<text></text>`

```
<script type="text/javascript">
 @for(int i = 0; i < 5; i++)
 {
    <text>var that = this;</text>
 }
</script> 
```

# facebook - 从照片 ID 获取相册 ID

> ID：11302700
> 
> 赞同：1
> 
> 时间：2012-07-02T23:46:07.850
> 
> 标签：facebook, api, upload, photo

当我上传照片时，会自动创建一个相册。有一种方法可以让我从拥有照片 ID 中获取专辑 ID。因为我有这个代码：

```
 try {
            $response = $facebook->api(
                    '/me/photos/',
                    'post',
                    array(
                            'message' => 'This is my image caption',
                            'source' => $source
                            )
                    );

            $id = $response['id'];
            if ($id) {
                    //obtenemos la url del album                                                                                                                                
                    $response = $facebook->api('/'.$id);

                    unset($_SESSION['uploaded_file']);
                    header('Location: http://www.facebook.com/'.$id);
                    exit();
            }
    } catch ... 
```

我想将用户重定向到相册（因为我需要用户批准照片）而不是照片。有一种方法可以做到这一点，而无需实际询问所有用户相册并检查照片上传到哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T00:33:35.160

如果我没有监督任何内容，则无法获取自动创建的专辑的专辑 ID。

[作为一种解决方法，您可以使用对象的](https://developers.facebook.com/docs/reference/api/user/#albums)[`albums`连接`User`](https://developers.facebook.com/docs/reference/api/user/#albums)预先为您的应用程序创建一个新专辑。在响应中，您将获得相册 ID，您可以使用它[专门将照片上传到此相册，然后使用](https://developers.facebook.com/docs/reference/api/photo/)[`link`相册对象中](https://developers.facebook.com/docs/reference/api/album/)的属性重定向到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:36:00.723

您可以使用 FQL 获取该信息——首先查询专辑的`photos`表`aid`，然后`album`使用该表查询它们：

```
SELECT object_id FROM album WHERE aid IN
  (SELECT aid FROM photo WHERE object_id = "{your photo’s Graph API id}") 
```

–`object_id`将是专辑的 Graph API id。

# c# - 如何在富文本框中设置垂直对齐

> ID：11302702
> 
> 赞同：0
> 
> 时间：2012-07-02T23:46:40.533
> 
> 标签：c#, richtextbox

请教我在富文本框中设置垂直对齐的方法

我发现了如何在富文本框中设置水平对齐

[示例代码]

```
richTextBox1.SelectionAlignment = HorizontalAlignment.Center 
```

但它不是垂直对齐

我真的很想回答每个人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T23:58:31.947

> Flow 文档旨在优化查看和可读性。流文档不是设置为一种预定义的布局，而是根据窗口大小、设备分辨率和可选的用户偏好等调整时间变量动态调整和重排其内容。
> 
> 所以，我们不能手动设置 RichTextBox 中文档的布局，但是对于段落，我们可以设置 TextAlignment 属性。您也可以尝试设置 RichTextBox 的 Padding 属性来调整它的内容。
> 
> 希望这可以帮助。

——凯文潘

**[来源链接](http://social.msdn.microsoft.com/Forums/en/wpf/thread/8aaa5b74-fbc9-4b28-a423-7d1be60daca9)**

# windows - 防火墙会阻止进程之间的本地 TCP 通信吗？

> ID：11302705
> 
> 赞同：3
> 
> 时间：2012-07-02T23:46:54.547
> 
> 标签：windows, tcp, firewall

我将一个应用程序拆分为一个托盘应用程序和一个 Windows 服务，并且我想使用 TCP 在两者之间进行通信*。它们都将在同一台机器上运行。

我的问题是防火墙会阻止在同一台机器上运行的应用程序之间的 TCP 通信吗？我想知道防火墙是否是我在测试时需要担心的事情。

（*请注意，我想使用 TCP 而不是命名管道进行通信，因为这些应用程序有一天可能会在不同的计算机上运行，​​但那将是遥远的未来）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T15:31:16.023

防火墙的主要目标是控制传入和传出的网络流量！防火墙设计为在 IP 或 PORT 基础上工作。

所以是的，它 100% 能够阻止同一台机器上的连接。（我猜你使用的 A 类 IP [ `127.x.y.x`] 地址主要用于本地计算机上的环回测试和进程间通信）。

一些防火墙被预先配置为不阻止本地计算机连接，而其他防火墙被配置为阻止它们。但无论哪种方式，都可以将防火墙配置为允许/拒绝此类连接。

# java - 无法获取经过身份验证的用户信息，但可以从 Google 通讯录中获取通讯录

> ID：11302709
> 
> 赞同：1
> 
> 时间：2012-07-02T23:47:33.310
> 
> 标签：java, oauth, google-api, google-contacts-api

我遇到了一个有趣的案例，它似乎表明 Google Contacts API 的文档不正确。

我要做的是获取已使用此 URL 授予应用程序权限的经过身份验证的用户的联系信息：

> [https://www.google.com/m8/feeds/contacts/default/full/contactId](https://www.google.com/m8/feeds/contacts/default/full/contactId)

呼叫的结果始终是状态 404。但是，当我尝试获取完整的通讯录时，它似乎工作正常。

> [https://www.google.com/m8/feeds/contacts/default/full](https://www.google.com/m8/feeds/contacts/default/full)

它记录不正确还是我做错了什么？如果我无法获取经过身份验证的用户的联系信息，我可以获得整个通讯录，这是没有意义的。

我使用的范围是：

> [https://www.google.com/m8/feeds](https://www.google.com/m8/feeds)

谢谢，杰克

* * *

附加信息。API 文档显示以下内容：

```
public static ContactEntry retrieveContact(ContactsService myService) {
  ContactEntry contact =
      myService.getEntry(new URL("https://www.google.com/m8/feeds/contacts/default/full/contactId"),
          ContactEntry.class);
  // Do something with the contact.
  return contact;
} 
```

这似乎意味着“contactId”关键字应该用作 URL 的一部分。它对我不起作用。

* * *

澄清这个问题。目标是获取有关当前经过身份验证的用户的信息，而无需通过多次获取数据的解决方法。即使先获取所有联系人的解决方法，我也没有看到任何经过身份验证的用户的contactId 回来了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T00:01:42.057

这取决于你想要得到什么。如果您致电[https://www.google.com/m8/feeds/contacts/default/full](https://www.google.com/m8/feeds/contacts/default/full)，那么您正在寻找所有联系人。现在，当您取回联系人时，您可以使用[https://www.google.com/m8/feeds/contacts/default/full/](https://www.google.com/m8/feeds/contacts/default/full/) {contactID} 请求单个联系人的数据，其中 {contactID} 是最后一个完整联系人列表中的部分字段。它看起来像[http://www.google.com/m8/feeds/contacts/](http://www.google.com/m8/feeds/contacts/) {user email}/base/{contact id}。

因此，如果您返回完整的联系人列表，单个联系人的 ID 字段如下所示：http://www.google.com/m8/feeds/contacts/{user email}/base/{contact id} . 如果您使用最后一个 {contact ID} 并将其附加到通话末尾（https://www.google.com/m8/feeds/contacts/default/full/{contactID}），您将取回联系人仅该联系人的信息。

# python - 整数超出范围

> ID：11302711
> 
> 赞同：22
> 
> 时间：2012-07-02T23:47:46.530
> 
> 标签：python, django

`integer out of range`尝试将数据库从 SQLite 迁移到 PostgreSQL 时出现错误。

我想我已经查明了问题所在：我的`IntegerField`模型中的一个字段中有一些巨大的整数。

基本上按52675215334的顺序。

当我将此值更改为 1 之类的小数字，然后尝试迁移我的数据库时，一切都很好。

除了 IntegerField 之外，我还应该使用其他数据类型来存储这些大值吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-02T23:50:04.463

如果整数*那么*大，请尝试使用[BigIntegerField 。](https://docs.djangoproject.com/en/dev/ref/models/fields/#bigintegerfield)从文档中：

 *> 一个 64 位整数，很像 IntegerField，除了它保证适合从 -9223372036854775808 到 9223372036854775807 的数字。管理员将其表示为`<input type="text">`（单行输入）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-20T11:26:47.983

试试这个

***将 models.IntegerField( )***更改为***models.BigIntegerField()***

```
class TableName(models.Model):
    ColumnName= models.BigIntegerField(default=0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-11T11:27:07.303

不要忘记迁移所做的更改，否则将无法正常工作

```
python manage.py migrate 
```

python manage.py makemigrations*

# python - django：当“request.session.set_exipry”出现错误时不要注销

> ID：11302715
> 
> 赞同：3
> 
> 时间：2012-07-02T23:48:58.807
> 
> 标签：python, django, error-handling

我目前正在使用 django 开发一个应用程序，每次在渲染视图或模板时出现错误，我的会话都会被注销。这最终很烦人。如何禁用此“功能”？请注意，如果在加载/解析代码时出现错误（例如，如果视图上的装饰器失败），我不会被注销，只有在视图中出现错误时。

编辑：我刚刚测试过，是的，从某种意义上说`raise Exception`确实会导致这种情况。

我所有的观点都被一个装饰器包裹着，其中包括：

```
def needs_base_index_dict(func):
    def wrapper(request, *args, **kwargs):
        request.session.set_expiry(30*60)
        #... 
```

如果我注释掉该`set_expiry`行，那么我不会得到这种行为。当我修复错误时，我仍然处于登录状态。如果该行没有被注释掉，那么视图中的任何错误（包括`raise Exception()`）都会注销会话。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T06:27:28.137

Django 基本上会在每次发生更改时将会话写入数据库。由于您正在视图装饰器中更新会话状态，这意味着应该有一个会话写入数据库。

但是，如果您使用的是具有事务管理的数据库，那么当您的视图失败时，您的数据库写入会回滚。但是，您的会话 cookie 过期时间已在您的浏览器上更新。这意味着您的浏览器会话和存储在服务器上的会话不再匹配。这种不一致会导致会话被丢弃并且您被注销。

这也解释了为什么当您注释掉该行时它可以正常工作。

如果您使用 django dev 服务器，那么您应该能够在控制台中看到您的查询。发生错误时查看会话更新查询是否运行成功。如果没有，您将知道为什么要注销:)

这是所需的行为，但如果您想在调试环境中禁用它，则只需在装饰器的相关行上方添加对 DEBUG 的检查。或者，您可以禁用事务管理（不推荐）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T07:13:41.383

不是为什么的答案，而是一种解决方法：

```
def needs_base_index_dict(func):
    def wrapper(request, *args, **kwargs):
        #... do the work
        func(*args, **kwargs)
        #... then set the expiry
        request.session.set_expiry(30*60) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T07:31:29.780

您在评论中说您在错误页面中也获得了 set-cookie 标头。会话对象看起来没问题吗？在[会话文档](https://docs.djangoproject.com/en/dev/topics/http/sessions/)中，它说您可以像访问任何其他数据库对象一样访问基于数据库的会话。

```
from django.contrib.sessions.models import Session
s = Session.objects.get(pk='2b1189a188b44ad18c35e113ac6ceead') 
```

如果该会话是针对匿名用户的，那么我愿意称这是一个非常有趣的功能。如果这是一个完全有效的会话，但不知何故，您似乎不再登录，则处理会话 cookie 时存在错误。

# java - Java字节码中的奇数模式

> ID：11302716
> 
> 赞同：2
> 
> 时间：2012-07-02T23:49:19.413
> 
> 标签：java, bytecode, decompiling

我一直在查看一些 Java 字节码，并且一直在其中发现一个奇怪的模式，我似乎无法将其转换为任何合理的 Java 构造：

```
 if ( <cond1> )
        goto Label;

    do {
        <code1>
Label:
        <code2>
    } while ( <cond2> ); 
```

是否有任何合理的 Java 构造可以反编译成？我能想到的只是非常复杂的模式，它们引入了额外的状态来跟踪它是否是循环的第一次迭代。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T23:51:45.870

```
for (init condition for which cond2 reduces to cond1; cond2; code1) {
  code2;
} 
```

# file - 创建自定义列：“仅附加”文件上传

> ID：11302719
> 
> 赞同：0
> 
> 时间：2012-07-02T23:49:29.273
> 
> 标签：file, sharepoint, upload, append

我正在尝试创建一个自定义列（用于自定义列表），用户可以在其中上传文件而不会覆盖以前的文件 - 这样他们可以保留文件的过去版本并上传新版本并附加新版本。我可以看到已经存在“仅附加”评论列和文件上传列。

我正在使用 Sharepoint Designer 2007（2010 不适用于该站点），并且我正在引用我在某处（http://pastebin.com/raw.php?i=0qN89meu）在线找到的代码，试图研究 MSDN 上的 Sharepoint 文档。我可以在设计器中打开站点，但不知道从那里去哪里（它已经在 Web 服务器上运行，而不是在本地打开它）。

我只是不清楚如何开始，我以为会有一个简单的“右键单击-> 新列”功能，但我找不到。如果有人能指出我可以开始在网站上创建专栏的正确方向，那就太好了。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T00:45:29.350

一个未经检验的想法：

1.  使用自定义列表的查阅列创建文档库。
2.  创建一个事件接收器（ItemAdded 和 ItemUpdated），然后将附加文件移动到另一个列表（使用正确的查找值）。--> 使用 Visual Studio 编写代码
3.  授予此文档库只读权限。
4.  调整视图以自定义列表的形式显示相关文档。

优点：

*   这似乎可以满足您的需求
*   您获得了文档库的所有可用性（没有什么可以阻止您向其他用户授予编辑权限、强制签出等）

缺点：

*   你必须玩查找。如果您使用功能，有时可能会很棘手
*   您将一个业务实体拆分为两个实体。您将不得不处理级联删除（如果需要）。

# php - 为什么 '\n' === '\\n' 在 php 中为真？

> ID：11302721
> 
> 赞同：6
> 
> 时间：2012-07-02T23:49:50.690
> 
> 标签：php, string, newline

我明白那个：

```
'\n' // literally the backslash character followed by the character for lowercase n
"\n" // interpreted by php as the newline character 
```

但是对于我的生活，我无法理解为什么`'\n' === '\\n'`。在我看来，`'\\n'`将等于三个单独的字符：两个单独的反斜杠，后跟字母 n。

为什么`'\n' === '\\n'`在 PHP 中是真的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-02T23:54:55.477

从手册（[单引号字符串部分](http://php.net/manual/en/language.types.string.php)）：

> 要指定文字单引号，请使用反斜杠 ( `\`) 对其进行转义。要指定文字反斜杠，请将其加倍 ( `\\`)。所有其他反斜杠实例将被视为文字反斜杠

所以在单引号字符串`\n`中是两个字符，但是`\\n`是文字反斜杠后跟字母'n' - 即相同的两个字符。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T00:06:54.813

反斜杠仍然是单引号字符串中的转义字符（它转义文字单引号）。

例如，这是非法的（因为反斜杠转义了结束引号）：

```
$path = 'C:\'; 
```

因此`\\`必须映射到文字反斜杠以避免无意转义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T23:53:02.437

这是因为`'\\n'`实际上是`\n`因为反斜杠是一个转义字符，在单引号中表现得很奇怪。它不会逃跑`n`，但会逃跑`\`

# c# - ASP.net 动态文本框网格

> ID：11302722
> 
> 赞同：0
> 
> 时间：2012-07-02T23:49:53.127
> 
> 标签：c#, asp.net, c#-4.0, webforms

我有 2 个字符串列表，我想动态创建一个文本框网格：

```
List<string> X = {"A", "B", "C"};
List<string> Y = {"1", "2", "3", "4"};

          A     B     C
     1   TBX   TBX   TBX
     2   TBX   TBX   TBX
     3   TBX   TBX   TBX
     4   TBX   TBX   TBX

     [Button] 
```

当我在文本框中输入数据并单击按钮时，我希望能够遍历这些文本框并确定与每个文本框关联的“X”和“Y”坐标。

我大概可以弄清楚如何动态创建这个文本框网格，但我想我在发布数据时会遇到问题。回发后如何从动态创建的文本框中获取值？

我做迭代和实际逻辑没有问题，但我不知道如何将数据放入容器中以便可以迭代。在阅读发布的数据时，我是否必须再次动态创建文本框？那看起来像什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T02:20:01.873

这是另一种方法。您可以在 asp.net 页面中有一个占位符。在后面的代码中动态创建一个带有动态文本框的表格并将其插入到占位符内。在这种情况下，您可以控制每个文本框的 ID。在回发时输入到文本框中的值将被保留（因为 ID 是确定的，您也可以进行 javascript 操作）

**这是aspx**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="DynamicControls.aspx.cs" Inherits="Test2.DynamicControls" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:PlaceHolder ID="PHDynamicTable" runat="server"></asp:PlaceHolder>
        <asp:Button runat="server" ID="btnSubmit" Text="Submit" 
            onclick="btnSubmit_Click" />
    </div>
    </form>
</body>
</html> 
```

**背后的代码**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace Test2
{
    public partial class DynamicControls : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected override void OnPreInit(EventArgs e)
        {
            base.OnPreInit(e);
            CreateTextBoxesInTable();
        }

        private void CreateTextBoxesInTable()
        {
            PHDynamicTable.Controls.Clear();

            List<string> X = new List<string>() { "A", "B", "C" };
            List<string> Y = new List<string>() { "1", "2", "3", "4" };

            Table table = new Table();
            table.ID = "dynamicTable";

            TableRow tr;
            foreach (string y in Y)
            {
                tr = new TableRow();

                foreach (string x in X)
                { 
                    TableCell tc = new TableCell();

                    TextBox textBox = new TextBox();
                    textBox.ID = "txt_" + x + y;
                    tc.Controls.Add(textBox);

                    tr.Cells.Add(tc);
                }

                table.Rows.Add(tr);
            }

            PHDynamicTable.Controls.Add(table);
        }

        protected void btnSubmit_Click(object sender, EventArgs e)
        {
            if (PHDynamicTable.Controls.Count > 0)
            {
                Table dynamicTable = (Table)PHDynamicTable.FindControl("dynamicTable");
                if (dynamicTable != null)
                {
                    foreach (TableRow tr in dynamicTable.Rows)
                    {
                        foreach (TableCell tc in tr.Cells)
                        {
                            TextBox textBox = (TextBox)tc.Controls[0];
                            string text = textBox.Text;
                            //Do whatever you want with the control
                        }
                    }
                }
            }
        }
    }
} 
```

**几张截图**

带有数据的输入屏幕

![在此处输入图像描述](../Images/f9fc5a212d8bafee29376f3b66a06d65.png)

回发（提交）

![在此处输入图像描述](../Images/fe512061a0f10044370f16db7183e468.png)

提交后

![在此处输入图像描述](../Images/b738c9a8cb084966933ad6db98119fb9.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T00:17:03.967

除了可用性问题，我将假设您使用的是 ASP.NET Webforms 而不是 ASP.NET MVC。在网络表单中，这变成了一场噩梦。您当然可以嵌套两个控件。一个控件的数据源成为第一个列表，第二个数据源是第二个列表。然后在辅助中继器模板中放置您的 asp:textbox。但是，即使显式设置，此处的 ID 实际上也会是生成的值，因为转发器是 ASP.nET Webforms 中已知的命名容器；这意味着 ID 的值将在运行时更改。

在回发时，您可以遍历父转发器的控制树以找到子转发器。然后在子中继器中，您可以遍历该中继器的控件以找到您的文本框。就像是：

```
<asp:Repeater>
    <itemtemplate>
        <asp:repeater>
            <itemtemplate>
                <asp:textbox />
            </itemtemplate>
        </asp:repeater>   
    </itemtemplate>
</asp:repeater> 
```

然后在后面的代码中，在 Post Back [伪代码]

```
foreach(Control c in myTopRepeater.Controls){
    if(c == RepeaterControl) //is of type repeater. again, pseudo code
    {
         foreach(Control subC in c)
         {
             if(subC == textBox)
             {
                 //Compare generated name, etc to my Lists

             }
         }
    }
} 
```

阅读命名容器可能会有所帮助。您可以获得可预测的命名设置，但它不是 100% 直观的。 [http://www.4guysfromrolla.com/articles/031710-1.aspx](http://www.4guysfromrolla.com/articles/031710-1.aspx)

祝你好运！

# java - 服务器为 url openStream() 返回 403

> ID：11302727
> 
> 赞同：12
> 
> 时间：2012-07-02T23:50:17.223
> 
> 标签：java, html

```
import java.net.URL;
import java.io.*;
import java.net.MalformedURLException;
import java.util.logging.Level;
import java.util.logging.Logger;
public class Test {
    public static void main(String args[]) {
        try {
            processHTMLFromLink(new URL("http://fwallpapers.com"));
        } catch (MalformedURLException ex) {
            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    public static int processHTMLFromLink(URL url) {
        InputStream is = null;
        DataInputStream dis;
        String line;
        int count = 0;
        try {
            BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));

            while ((line = in.readLine()) != null) {
                System.out.println(line);
            }
        } catch (MalformedURLException mue) {
            System.out.println(mue.toString());
        } catch (IOException ioe) {
            System.out.println(ioe.toString());
        } finally {
            try {
                is.close();
            } catch (IOException ioe) {
                // nothing to see here
            }
        }
        return count;
    }
} 
```

错误：

```
java.io.IOException: Server returned HTTP response code: 403 for URL: http://fwallpapers.com
Exception in thread "main" java.lang.NullPointerException
    at Test.processHTMLFromLink(Test.java:38)
    at Test.main(Test.java:15)
Java Result: 1 
```

它在浏览器上运行良好。但我得到空点异常。此代码适用于其他链接。谁能帮我解决这个问题。出现 403 错误时如何获取内容。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-09-19T08:42:01.597

这是一篇旧帖子，但如果人们想知道它是如何工作的。

403 表示拒绝访问。有一个解决方法。如果你想做到这一点，你必须设置一个用户代理参数来“欺骗”网站

这就是我的旧方法的样子：

```
private InputStream read() {
try {
    return url.openStream();
 } 
catch (IOException e) {
  String error = e.toString();
  throw new RuntimeException(e);
 }
} 
```

将其更改为：（它对我有用！）

```
private InputStream read() {
try {
    HttpURLConnection httpcon = (HttpURLConnection) url.openConnection();
    httpcon.addRequestProperty("User-Agent", "Mozilla/4.0");

  return httpcon.getInputStream();
 } catch (IOException e) {
    String error = e.toString();
  throw new RuntimeException(e);
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T04:11:25.850

现在这是一个完全不同的问题，所以我编辑了你的标题。

根据您的编辑，您没有收到空指针异常，而是收到 HTTP 403 状态，这意味着“禁止”，这意味着您无法访问该资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T00:01:59.510

你的错误是吞下异常。

当我运行我的代码时，我得到一个 HTTP 403 - “禁止”。Web 服务器不允许您这样做。

我的代码非常适合[http://www.yahoo.com](http://www.yahoo.com)。

这是我的做法：

```
package url;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.Reader;
import java.net.URL;

/**
 * UrlReader
 * @author Michael
 * @since 3/20/11
 */
public class UrlReader {

    public static void main(String[] args) {
        UrlReader urlReader = new UrlReader();

        for (String url : args) {
            try {
                String contents = urlReader.readContents(url);
                System.out.printf("url: %s contents: %s\n", url, contents);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

    public String readContents(String address) throws IOException {
        StringBuilder contents = new StringBuilder(2048);
        BufferedReader br = null;

        try {
            URL url = new URL(address);
            br = new BufferedReader(new InputStreamReader(url.openStream()));
            String line = "";
            while (line != null) {
                line = br.readLine();
                contents.append(line);
            }
        } finally {
            close(br);
        }

        return contents.toString();
    }

    private static void close(Reader br) {
        try {
            if (br != null) {
                br.close();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

# ruby-on-rails - Rails 选择助手中的 :include_blank 和 :prompt 有什么区别？

> ID：11302728
> 
> 赞同：13
> 
> 时间：2012-07-02T23:50:20.927
> 
> 标签：ruby-on-rails, ruby-on-rails-3

[在 Rails 文档](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#label-Options)中，帮助程序的前两个列出的选项`select`是`:include_blank`和`:prompt`。我刚刚意识到我在我的代码中同时使用了这两种方法，但它们似乎是可以互换的。谁能解释其中的区别？从阅读文档中我不清楚。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-03T03:32:09.397

主要区别在于：

```
include_blank: true 
```

将呈现一个空白选项，但

```
prompt: true 
```

将执行

```
I18n.translate('helpers.select.prompt', :default => 'Please select') 
```

# html - CSS flexbox、溢出：滚动和 z-index 的问题

> ID：11302729
> 
> 赞同：0
> 
> 时间：2012-07-02T23:50:23.093
> 
> 标签：html, css, internet-explorer, z-index, flexbox

我正在尝试使用 HTML/CSS 实现一个 Windows 8 应用程序，该应用程序具有两个文章的 flexbox 布局（一个在 y 轴上的另一个之上），设置为`overflow-x: scroll`. `z-index`但是，我希望通过使用文章的属性，将文章的扩展视图包含在整个屏幕上，覆盖另一个 flexbox 容器。但是，它不起作用。我不认为这是 IE10/Win 8 独有的，我认为这是我的 CSS 某处的问题，因为它在带有 webkit flexbox 属性的 jsFiddle 中不起作用。

有关示例，请参[见此 jsFiddle](http://jsfiddle.net/wfyQW/4/)。如您所见，`expanded`文章仍然位于另一个 flexbox 容器下。

请问有什么帮助吗？我已经找了一段时间了，找不到问题的根源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:29:07.937

我认为目前的这种做法是一条死胡同。据我了解，根据容器的大小，弹性框项目会扩展（或缩小），因此，如果容器较小，则应该不可能全屏。

# javascript - jQuery 循环内容轮播自动滚动

> ID：11302730
> 
> 赞同：2
> 
> 时间：2012-07-02T23:50:28.027
> 
> 标签：javascript, jquery, carousel, autoscroll

我发现了一个很酷的轮播脚本，名为[Circular Content Carousel by Tympanus](http://tympanus.net/codrops/2011/08/16/circular-content-carousel/)。这几乎正​​是我所需要的。单击“更多”链接时，相应项目向左移动，内容区域将滑出。

我现在需要实现的是让它在**鼠标悬停**在轮播上和内容区域打开时**自动滚动**并停止。

 **我是 javascript 和 jquery 的新手，所以我迫切需要专家的帮助。有人可以帮我定制这个轮播吗？

这是工作循环内容轮播的链接。[http://jsfiddle.net/niczcool/x7jxa/2/](http://jsfiddle.net/niczcool/x7jxa/2/)

先谢谢了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-03T00:00:16.457

这是一个更新：

不是最好的方法，但会起作用

[http://jsfiddle.net/x7jxa/3/](http://jsfiddle.net/x7jxa/3/)

更新：

[http://jsfiddle.net/x7jxa/4/](http://jsfiddle.net/x7jxa/4/)

是的，我同意函数，但 Fiddle 出于某种原因返回了一个奇怪的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T07:26:58.540

```
<script type="text/javascript">
  $('#ca-container').contentcarousel();
  var int = setInterval("$('.ca-nav-next').trigger('click');",1000);                          
  $('.ca-item').hover(function(){
    clearInterval(int);
  },function(){
    int = setInterval("$('.ca-nav-next').trigger('click');",1000);    
  });
  $('.ca-nav').hover(function(){
    clearInterval(int);
  },function(){
    int = setInterval("$('.ca-nav-next').trigger('click');",1000);    
  });
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T14:32:06.873

我曾经也有过一样的问题。我刚刚完成了对脚本的一些修改以允许它。它相对稳定，您可以更改脚本中的变量。它不漂亮，但它有效，欢迎修改以清理它。jquery.contentcarousel.js

```
(function($) {
var aux     = {
        // navigates left / right
        navigate    : function( dir, $el, $wrapper, opts, cache ) {

            var scroll      = opts.scroll,
                factor      = 1,
                idxClicked  = 0;

            if( cache.expanded ) {
                scroll      = 1; // scroll is always 1 in full mode
                factor      = 3; // the width of the expanded item will be 3 times bigger than 1 collapsed item 
                idxClicked  = cache.idxClicked; // the index of the clicked item
            }

            // clone the elements on the right / left and append / prepend them according to dir and scroll
            if( dir === 1 ) {
                $wrapper.find('div.ca-item:lt(' + scroll + ')').each(function(i) {
                    $(this).clone(true).css( 'left', ( cache.totalItems - idxClicked + i ) * cache.itemW * factor + 'px' ).appendTo( $wrapper );
                });
            }
            else {
                var $first  = $wrapper.children().eq(0);

                $wrapper.find('div.ca-item:gt(' + ( cache.totalItems  - 1 - scroll ) + ')').each(function(i) {
                    // insert before $first so they stay in the right order
                    $(this).clone(true).css( 'left', - ( scroll - i + idxClicked ) * cache.itemW * factor + 'px' ).insertBefore( $first );
                });
            }

            // animate the left of each item
            // the calculations are dependent on dir and on the cache.expanded value
            $wrapper.find('div.ca-item').each(function(i) {
                var $item   = $(this);
                $item.stop().animate({
                    left    :  ( dir === 1 ) ? '-=' + ( cache.itemW * factor * scroll ) + 'px' : '+=' + ( cache.itemW * factor * scroll ) + 'px'
                }, opts.sliderSpeed, opts.sliderEasing, function() {
                    if( ( dir === 1 && $item.position().left < - idxClicked * cache.itemW * factor ) || ( dir === -1 && $item.position().left > ( ( cache.totalItems - 1 - idxClicked ) * cache.itemW * factor ) ) ) {
                        // remove the item that was cloned
                        $item.remove();
                    }                       
                    cache.isAnimating   = false;
                });
            });

        },
        // opens an item (animation) -> opens all the others
        openItem    : function( $wrapper, $item, opts, cache ) {
            cache.idxClicked    = $item.index();
            // the item's position (1, 2, or 3) on the viewport (the visible items) 
            cache.winpos        = aux.getWinPos( $item.position().left, cache );
            $wrapper.find('div.ca-item').not( $item ).hide();
            $item.find('div.ca-content-wrapper').css( 'left', cache.itemW + 'px' ).stop().animate({
                width   : cache.itemW * 2 + 'px',
                left    : cache.itemW + 'px'
            }, opts.itemSpeed, opts.itemEasing)
            .end()
            .stop()
            .animate({
                left    : '0px'
            }, opts.itemSpeed, opts.itemEasing, function() {
                cache.isAnimating   = false;
                cache.expanded      = true;

                aux.openItems( $wrapper, $item, opts, cache );
            });

        },
        // opens all the items
        openItems   : function( $wrapper, $openedItem, opts, cache ) {
            var openedIdx   = $openedItem.index();

            $wrapper.find('div.ca-item').each(function(i) {
                var $item   = $(this),
                    idx     = $item.index();

                if( idx !== openedIdx ) {
                    $item.css( 'left', - ( openedIdx - idx ) * ( cache.itemW * 3 ) + 'px' ).show().find('div.ca-content-wrapper').css({
                        left    : cache.itemW + 'px',
                        width   : cache.itemW * 2 + 'px'
                    });

                    // hide more link
                    aux.toggleMore( $item, false );
                }
            });
        },
        // show / hide the item's more button
        toggleMore  : function( $item, show ) {
            ( show ) ? $item.find('a.ca-more').show() : $item.find('a.ca-more').hide(); 
        },
        // close all the items
        // the current one is animated
        closeItems  : function( $wrapper, $openedItem, opts, cache ) {
            var openedIdx   = $openedItem.index();

            $openedItem.find('div.ca-content-wrapper').stop().animate({
                width   : '0px'
            }, opts.itemSpeed, opts.itemEasing)
            .end()
            .stop()
            .animate({
                left    : cache.itemW * ( cache.winpos - 1 ) + 'px'
            }, opts.itemSpeed, opts.itemEasing, function() {
                cache.isAnimating   = false;
                cache.expanded      = false;
            });

            // show more link
            aux.toggleMore( $openedItem, true );

            $wrapper.find('div.ca-item').each(function(i) {
                var $item   = $(this),
                    idx     = $item.index();

                if( idx !== openedIdx ) {
                    $item.find('div.ca-content-wrapper').css({
                        width   : '0px'
                    })
                    .end()
                    .css( 'left', ( ( cache.winpos - 1 ) - ( openedIdx - idx ) ) * cache.itemW + 'px' )
                    .show();

                    // show more link
                    aux.toggleMore( $item, true );
                }
            });
        },
        // gets the item's position (1, 2, or 3) on the viewport (the visible items)
        // val is the left of the item
        getWinPos   : function( val, cache ) {
            switch( val ) {
                case 0                  : return 1; break;
                case cache.itemW        : return 2; break;
                case cache.itemW * 2    : return 3; break;
            }
        }
    },
    methods = {
        init        : function( options ) {

            if( this.length ) {

                var settings = {
                    sliderSpeed     : 500,          // speed for the sliding animation
                    sliderEasing    : 'easeOutExpo',// easing for the sliding animation
                    itemSpeed       : 500,          // speed for the item animation (open / close)
                    itemEasing      : 'easeOutExpo',// easing for the item animation (open / close)
                    scroll          : 1             // number of items to scroll at a time
                };

                return this.each(function() {

                    // if options exist, lets merge them with our default settings
                    if ( options ) {
                        $.extend( settings, options );
                    }

                    var $el             = $(this),
                        $wrapper        = $el.find('div.ca-wrapper'),
                        $maincontainer  = $el.find('div.container'),//used for the hover function
                        $isopen         = 0,                        //used to detect if the boxes are opened to stop scrolling
                        $autoscroll     = 1,                        //set to 0 if you dont want autoscroll
                        $asspeed        = 6000,                     //usual js times, currently set to 6 seconds
                        $items          = $wrapper.children('div.ca-item'),
                        cache           = {};

                    // save the with of one item    
                    cache.itemW         = $items.width();
                    // save the number of total items
                    cache.totalItems    = $items.length;

                    // add navigation buttons
                    if( cache.totalItems > 3 )  
                        $el.prepend('<div class="ca-nav"><span class="ca-nav-prev">Previous</span><span class="ca-nav-next">Next</span></div>') 

                    // control the scroll value
                    if( settings.scroll < 1 )
                        settings.scroll = 1;
                    else if( settings.scroll > 3 )
                        settings.scroll = 3;    

                    var $navPrev        = $el.find('span.ca-nav-prev'),
                        $navNext        = $el.find('span.ca-nav-next');

                    // hide the items except the first 3
                    $wrapper.css( 'overflow', 'hidden' );

                    // the items will have position absolute 
                    // calculate the left of each item
                    $items.each(function(i) {
                        $(this).css({
                            position    : 'absolute',
                            left        : i * cache.itemW + 'px'
                        });
                    });

                    // click to open the item(s)
                    $el.find('a.ca-more').live('click.contentcarousel', function( event ) {
                        if( cache.isAnimating ) return false;
                        cache.isAnimating   = true;
                        $isopen = 1;
                        $(this).hide();
                        var $item   = $(this).closest('div.ca-item');
                        aux.openItem( $wrapper, $item, settings, cache );
                        clearTimeout(tid);
                        return false;
                    });

                    // click to close the item(s)
                    $el.find('a.ca-close').live('click.contentcarousel', function( event ) {
                        if( cache.isAnimating ) return false;
                        cache.isAnimating   = true;
                        var $item   = $(this).closest('div.ca-item');
                        aux.closeItems( $wrapper, $item, settings, cache );
                        $isopen = 0;
                        return false;
                    });

                    // autoscroll
                    if ($autoscroll == 1){
                        var tid = setTimeout(ascroll, $asspeed);

                        $wrapper.bind('mouseover.contentcarousel', function( event ) {
                            clearTimeout(tid);
                        });

                        $wrapper.bind('mouseout.contentcarousel', function( event ) {
                            if ($isopen == 0){
                            tid = setTimeout(ascroll, $asspeed);
                            };
                        });

                    };

                    function ascroll() {
                        if( cache.isAnimating ) return false;
                        cache.isAnimating   = true;
                        aux.navigate( 1, $el, $wrapper, settings, cache );
                        tid = setTimeout(ascroll, $asspeed); // repeat myself
                    };

                    // navigate left
                    $navPrev.bind('click.contentcarousel', function( event ) {
                        if( cache.isAnimating ) return false;
                        cache.isAnimating   = true;
                        aux.navigate( -1, $el, $wrapper, settings, cache );
                    });

                    // navigate right
                    $navNext.bind('click.contentcarousel', function( event ) {
                        if( cache.isAnimating ) return false;
                        cache.isAnimating   = true;
                        aux.navigate( 1, $el, $wrapper, settings, cache );
                    });

                    // adds events to the mouse
                    $el.bind('mousewheel.contentcarousel', function(e, delta) {
                        if(delta > 0) {
                            if( cache.isAnimating ) return false;
                            cache.isAnimating   = true;
                            aux.navigate( -1, $el, $wrapper, settings, cache );
                        }   
                        else {
                            if( cache.isAnimating ) return false;
                            cache.isAnimating   = true;
                            aux.navigate( 1, $el, $wrapper, settings, cache );
                        }   
                        return false;
                    });

                });
            }
        }
    };

$.fn.contentcarousel = function(method) {
    if ( methods[method] ) {
        return methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));
    } else if ( typeof method === 'object' || ! method ) {
        return methods.init.apply( this, arguments );
    } else {
        $.error( 'Method ' +  method + ' does not exist on jQuery.contentcarousel' );
    }
}; 
```

})(jQuery);**

# tomcat - Spring框架Tomcat LoadTimeWeaving

> ID：11302732
> 
> 赞同：2
> 
> 时间：2012-07-02T23:50:30.237
> 
> 标签：tomcat, jpa, lazy-loading, eclipselink, load-time-weaving

我正在使用 tomcat 作为我的网络服务器，并且想对`fetch = FetchType.lazy`我的所有 @OneToOne 注释使用该注释，但是 spring 恢复了我的惰性设置给我 eclipselink 警告：

```
Reverting the lazy setting on the OneToOne or ManyToOne attribute [student] for the entity class [class org.bixin.dugsi.domain.Registration] since weaving was not enabled or did not occur. 
```

我必须对 tomcat 做什么才能使编织工作，以便我可以使用延迟获取，或者是否有任何其他替代延迟加载关系的方法。我遇到了巨大的性能问题？

我现在正在尝试添加加载时间编织，我已将 spring-instruments.jar 和 spring-aspects.jar 添加到我的 tomcat/lib 中，并且在将全局添加`<context:load-time-weaver/>`到我的 applicationContext.xml 文件后，我得到了一个

```
ClassLoader [sun.misc.Launcher$AppClassLoader] does NOT provide an 'addTransformer(ClassFileTransformer)' method. Specify a custom LoadTimeWeaver or start your Java virtual machine with Spring's agent: -javaagent:org.springframework.instrument.jar 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:07:48.063

我建议改用静态编织，看，

[http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Advanced_JPA_Development/Performance/Weaving/Static_Weaving](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Advanced_JPA_Development/Performance/Weaving/Static_Weaving)

可以在春天开始编织工作。我建议从 Tomcat 之外的 Spring 教程之一开始，然后慢慢增加复杂性，直到它在 Tomcat 中运行。

# python - 递归调用时python构造函数不返回None

> ID：11302734
> 
> 赞同：1
> 
> 时间：2012-07-02T23:50:50.750
> 
> 标签：python

以下代码没有返回 None 而是一些神秘的“*主*_.link_list 对象”：

```
class link_list(object):
    """a link list class"""
    def __init__(self, list):
        super(link_list, self).__init__()
        pdb.set_trace()
        if list==[]:
            return None
        else:
            self.value = list[0]
            self.next = link_list(list[1:len(list)]) 
```

测试代码打印“假”：

```
l=link_list([1,2,3])
print l.next.next.next==None 
```

为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T23:54:58.347

`.__init__()`不是真正的构造函数。

[__init__ 作为构造函数？](https://stackoverflow.com/questions/6578487/init-as-a-constructor)

无论您是否`None`从`.__init__()`. 正如@Ignacio Vazquez-Abrams 在评论中指出的那样，Python*期望* `None`返回值来自`.__init__()`; 无论如何，你不能返回任何东西。如果您需要发出某种灾难性错误的信号，则应引发异常。

在您的示例中，您可能应该有一个代表完整链表的类，具有“头”引用和“尾”引用，以及另一个代表链表中数据条目的类。然后可以通过检查是否为空列表来测试链表类本身`head is None`。

编辑：经过进一步思考，您的单类实现将起作用；只是我们需要设置`.next`为`None`inside `.__init__()`。这是我对您的代码的编辑：

```
class link_list(object):
    """a link list class"""
    def __init__(self, lst):
        super(link_list, self).__init__()
        pdb.set_trace()
        if len(lst) > 1:
            self.value = lst[0]
            self.next = link_list(lst[1:])
            print "id == %d, linked in %d" % (id(self), id(self.next))
        elif len(lst) == 1:
            self.value = lst[0]
            self.next = None
            print "length-one case: id == %d" % id(self)
        else:
            self.value = None
            self.next = None
            print "length-zero case: id == %d" % id(self)

l=link_list([1,2,3])
print l.next.next.next is None 
```

笔记：

*   我修复了缩进。

*   我使用`lst`了而不是`list`变量名，以免影响内置类型`list`。

*   我添加了一些打印语句来帮助您查看正在发生的事情。

编辑：并且，为了完整起见，这里是一个使用两个类的实现：一个表示列表并且可能是零长度的类，以及一个表示列表中一个条目的类。循环构建`for`条目链，并且可以从任何序列（包括迭代器）构建列表；不使用切片，因此序列不必是列表。

```
class link_list_val(object):
    """one value for a linked list"""
    def __init__(self, value):
        self.value = value
        self.next = None

class link_list(object):
    """a link list class"""
    def __init__(self, seq):
        self.head = None

        for value in seq:
            x = link_list_val(value)
            if self.head is None:
                self.head = x;
                cur = x
            else:
                cur.next = x
                cur = x

l=link_list([1,2,3])
print l.head.next.next.next is None 
```

编辑：这是另一个版本。这使用迭代来构建链表，而不是尾递归，而是使用单个类来构建。诀窍是`.__init__()`函数需要知道它是构建一个完整的链表，还是只创建一个实例来构建一个链表；因此检查`seq is None`. 如果用户传入一个序列，`.__init__()`则构建一个完整的链表，否则它只会将一个实例用作链表中的链接。

```
class link_list(object):
    """a link list class"""
    def __init__(self, seq=None):
        super(link_list, self).__init__()
        if seq is None:
            return
        pdb.set_trace()
        itr = iter(seq)
        try:
            self.value = next(itr)
        except StopIteration:
            self.value = None
            self.next = None
            return
        cur = self
        for value in itr:
            cur.next = link_list()
            cur = cur.next
            cur.value = value
        cur.next = None

l=link_list([])
print l.next is None
l=link_list([1,2,3])
print l.next.next.next is None 
```

首先我们从序列中得到一个新的迭代器。然后我们尝试从序列中提取一个值`next()`。如果失败，我们有一个长度为零的链表并返回它；如果成功，我们将该值用作链表的头部，然后遍历序列中的其余值。

直接使用迭代器可能看起来很棘手，但我认为这是处理这种情况的最干净的方法，我们想从序列中提取第一个项目，然后循环其余的项目，我们不想使用切片（因此只能使用实际列表）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T04:26:48.727

```
class Item(object):
    '''Linked list'''

    def __new__(cls, lst):
        '''Construct object (allocate the memory)'''
        if lst:
            return super(Item, cls).__new__(cls)

    def __init__(self, lst):
        '''Initialize object (already created)'''
        self.value = lst[0]
        self.next = self.__class__(lst[1:])

    def __repr__(self):
        '''Representate as string'''
        return "%s(%s) -> %s" % (
            self.__class__.__name__,
            self.value,
            repr(self.next)
        )

>>> items = Item([1,2,3])
>>> print items
Item(1) -> Item(2) -> Item(3) -> None
>>> items.next.next.next is None
True 
```

# objective-c - 如何在 Objective-C 的其他线程中通过 NSURLConnection 接收数据

> ID：11302736
> 
> 赞同：1
> 
> 时间：2012-07-02T23:50:52.687
> 
> 标签：objective-c, multithreading

我编写 iPhone 应用程序。在这个应用程序中，我使用 Twitter 框架。在这个框架中，去同步中的回调函数在其他线程中。

在我的视图控制器中，

视图控制器.m

```
 [accountStore requestAccessToAccountsWithType:accountType
                        withCompletionHandler:^(BOOL granted, NSError *error) {
                            if (granted) {
                                if (account == nil) {
                                    NSArray *accountArray = [accountStore accountsWithAccountType:accountType];
                                    account = [accountArray objectAtIndex:2];
                                }

                                if (account != nil){
                                    NSURL *url = [NSURL URLWithString:@"http://api.twitter.com/1/statuses/user_timeline.json"];
                                    NSMutableDictionary *params = [[NSMutableDictionary alloc] init];
                                    [params setObject:@"1" forKey:@"count"];

                                    TWRequest *request = [[TWRequest alloc] initWithURL:url
                                         parameters:params 
                                      requestMethod:TWRequestMethodGET];
                                    [request setAccount:account];
                                    [request performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
                                        if (responseData) {
                                            //Throw response data to other Web API
                                            [self otherAPI:responseData];
                                            [[NSRunLoop currentRunLoop] run];
                                        }
                                    }];

                                }
                            }

                        }]; 
```

我在这个类中编写了这些方法。

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response;
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data;
- (void)connectionDidFinishLoading:(NSURLConnection *)connection; 
```

但我无法从其他 API 接收完整数据。我只能接收第一个数据。我认为进行多线程存在一些问题。因此，我想让我知道这段代码有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T04:56:53.543

我想我看到了你的问题。`-connection:didReceiveData:`被多次调用，你需要建立一个包含整个消息的 NSMutableData 对象。

注意：这仅适用于每个实例一次下载一次。

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    self.responseData = [[NSMutableData dataWithCapacity:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [self.responseData appendData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    // self.responseData has all the data.
} 
```

# jquery-ui - 通过单击该行的按钮，使用 jquery 获取行数据

> ID：11302738
> 
> 赞同：6
> 
> 时间：2012-07-02T23:51:15.493
> 
> 标签：jquery-ui, jquery

如果选择了按钮，我在获取行中的表数据时遇到问题。我有两个按钮批准和拒绝，并根据用户单击的按钮，我想使用查询来获取数据。可以获取行号和东西，而不是行数据。我需要得到 id 和 tester。

这就是我所拥有的

```
<table id="mytable" width="100%">
<thead>
<tr>
<th>ID</th>
<th>Tester</th>
<th>Date</th>
<th>Approve</th>
<th>Deny</th>
</tr>
</thead>
<tbody>
<tr class="test">
<td class="ids">11565 </td>
<td class="tester">james</td>
<td>2012-07-02 </td>
<td><Button id="Approved" type="submit" >Approved</button>
</td>
<td><Button id="deny_0" type="submit" >Denied</button>
</td>
</tr>
</tbody>
</table> 
```

这是我的 javascript 来获取 tr 和 td 号码，但我不知道如何使用它来获得我需要的东西

```
$(document).ready(function() {  

    /*$('#cardsData .giftcardaccount_id').each(function(){

        alert($(this).html());
     }); */
    $('td').click(function(){
          var col = $(this).parent().children().index($(this));
          var row = $(this).parent().parent().children().index($(this).parent());
          alert('Row: ' + row + ', Column: ' + col);
         // alert($tds.eq(0).text());
          console.log($("tr:eq(1)"));
         // $("td:eq(0)", this).text(),

        });

}); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-02T23:55:25.113

```
$(document).ready(function(){
    $('#Approved').click(function(){
        var id = $(this).parent().siblings('.ids').text();
        var tester = $(this).parent().siblings('.tester').text();

        console.log(id);
        console.log(tester);
    });
});​ 
```

[JSFiddle](http://jsfiddle.net/hXyrZ/3/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T00:06:00.520

```
$(function(){
    $('button').on('click', function(){
        var tr = $(this).closest('tr');
        var id = tr.find('.ids').text();
        var tester = tr.find('.tester').text();
        alert('id: '+id+', tester: ' + tester);
    });
});​ 
```

[小提琴](http://jsfiddle.net/mM47s/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-02T23:56:07.723

我会用`closest()`得到`tr`然后从那里下降。

```
var tr = $('td').closest('tr') 
```

我也认为这是不必要的，在你的例子中是`$(this)`：

```
$(this).parent().children().index($(this)) // === $(this) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-03T00:00:46.917

```
$('table').on('click', 'button', function() {
      var parentRow = $(this).parent().parent();
      var id = $('td.ids', parentRow).text();
      var tester = $('td.tester', parentRow).text();

    alert('id: ' + id + ', tester: ' + tester);
});​ 
```

# wordpress - Amazon EC2 Bitnami Wordpress 极慢

> ID：11302739
> 
> 赞同：0
> 
> 时间：2012-07-02T23:51:19.697
> 
> 标签：wordpress, amazon-ec2, amazon, bitnami

我在小型实例上遇到了 Amazon EC2 和 Bitnami Wordpress AMI (RedHat) 的几个问题。老实说，我不知道该问谁 :) 我不是 SysAdmin/Linux 专家，但我已经学习了基本的 SSH命令和其他保持基本开始所需的东西。

这就是正在发生的事情：

Wordpress 网站加载速度极慢 - PageSpeed 和 YSlow 得分为 27 分（满分 100 分）。我认为这是由 php.ini 中的 memory_limit 引起的。当我安装 Bitnami Wordpress AMI、导入 WP 用户、设置主题和其他基本内容时，我什至无法访问 wordpress 网站——只是出现了一个空白页面。经过几个解决方案后，我尝试将 php.ini memory_limit 从 32M 增加到 128M（最大）。而且我已将 WP 内存限制增加到 64M。

网站加载正确，用户可以访问它——但速度极慢。当我尝试将 php.ini 内存限制降低到 64M 时，网站再次显示空白页面。

我目前唯一能想到的是将 EC2 实例从 .small 增加到 .large 或类似的。请让我知道您对这个问题的想法。非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-26T08:01:35.027

我们在将一个 PHP/MYSQL 应用程序转移到连接到 RDS 数据库实例的 EC2 实例时遇到了类似的问题。尽管所有规格都相同，即 CPU 数量、RAM、时钟速度和 Php/Apache 的版本都相同，但页面加载时间比我们以前的服务器要长 10 倍。

终于找到问题的原因了，RDS数据库的Cache query size默认设置为0，导致数据库运行异常缓慢。我们将**query_cache_size**更改为**1000000000** (1G)（因为 RDS 实例有 4G 的 RAM）并且应用程序性能立即与我们之前的（非 AWS）服务器一样好。

其次，我们发现在服务器上本地安装了 MySQL 的 EC2 服务器在 Amazon Linux 构建上表现不佳。我们在运行 Ubuntu 的 EC2 实例上尝试了同样的事情，并且使用本地 MySQL 数据库，性能非常好。

显然，出于可扩展性的原因，我们使用 RDS 实例，但我们发现有趣的是，将 MySQL 数据库移动到 EC2 实例上从根本上提高了 Ubuntu linux EC2 服务器的性能，但与 Linux 的 Amazon Build 没有任何区别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T00:18:55.483

由于您还没有收到答案，请允许我将我的评论总结为一些希望有用的东西：

*   [分析您的应用程序](https://stackoverflow.com/questions/21133/simplest-way-to-profile-a-php-script)以了解时间花费在哪里。

您可以影响的一些领域是：

*   PHP 需要 RAM，但您的数据库也需要 RAM（我对 Bitnami 一无所知，但 Wordpress 使用 SQL 数据库进行存储）。
*   为 PHP 分配足够的 RAM。似乎在 64MB 和 128MB 之间。
*   如果您使用的是 MySQL，请编辑 my.ini。如果您使用 MySQL 的默认配置文件，则内存分配参数调*得*太低。如果您发布您的 my.ini 文件，我可以提供建议（或者如果您使用不同的数据库，请说明是哪个）。
*   考虑为您的数据分区[条带化多个 EBS 卷。](http://www.hightechinthehub.com/2012/02/importance-of-striping-in-the-cloud/)
*   如果您还没有，请使用[EBS 支持的实例。](https://stackoverflow.com/questions/3630506/benefits-of-ebs-vs-instance-store-and-vice-versa/3630707#3630707)

如果您手头有分析结果，您可以就调整位置做出更明智的决定。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T17:50:12.513

我建议使用缓存工具。您可以尝试的第一个是 APC（替代 PHP 缓存）。在 Red Hat 中很容易安装：yum install php-pecl-apc。使用 WordPress 特定缓存插件（如 W3 Total Cache 或 Super Cache）可以获得更好的结果。我使用最后一个，它很容易安装在 WordPress 应用程序中：

1.  从 WordPress 管理面板安装 Super Cache
2.  更改 .htaccess 权限：sudo chmod 666 /opt/bitnami/apps/wordpress/htdocs/.htaccess
3.  启用插件并按照配置步骤操作。你可以看到这个插件如何修改 .htaccess 文件
4.  根据您的喜好配置缓存选项并进行测试。您可以使用 blitz.io 之类的服务进行性能测试
5.  一切正常后，将 .htaccess 权限更改为 600。

我希望它有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-02T21:16:38.760

我们看到了类似的东西。对我们来说，摆弄优化设置的机会成本远高于仅仅使用专门的 Wordpress 托管服务提供商。

这个领域的领导者（专用的 Wordpress 托管）似乎是 WP-Engine 和其他一些像 Synthesis

[http://trends.builtwith.com/hosting/wordpress-hosting](http://trends.builtwith.com/hosting/wordpress-hosting)

我在dreamhost上有我的个人网站，但这些年来它们变得越来越糟，所以我搬到了bluehost，这还不错。

总的来说，我认为 EC2 很棒，但它需要大量的摆弄。根据您的时间成本和专业领域，您可能会选择切换到更专业的提供商。

除了我在 Dreamhost 和 bluehost 担任个人共享托管客户的个人经历外，我与这些公司中的任何一家都没有任何关系。

# ruby-on-rails - 如何在 rails new 完成后强制使 rails 模板不运行 bundle install？

> ID：11302742
> 
> 赞同：0
> 
> 时间：2012-07-02T23:52:06.303
> 
> 标签：ruby-on-rails, ruby, bundler, generator, ruby-on-rails-3.2

我正在创建一个包含我想做的事情的 Rails 模板，包括设置 RVM gemset 并在其中安装 gem。我可以通过编程很好地做到这一点，但我也想在`bundle install`使用`rails new`. 我可以轻松运行`rails new app -m mytemplate.rb --skip-bundle`或添加`--skip-bundle`到`~/.railsrc`. `.railsrc`但是，如果我可以将其添加到我的模板中，而无需再次记住有关或任何其他配置选项，我会更喜欢。

我可以这样做吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T00:06:39.073

尝试添加

`def run_bundle ; end`

在模板文件的末尾覆盖 run_bundle 方法。

# java - 写入在 Windows 下的 Java 应用程序中生成的 C++ 控制台应用程序

> ID：11302745
> 
> 赞同：5
> 
> 时间：2012-07-02T23:52:21.780
> 
> 标签：java, c++, windows, console

如何在 Windows 下将字符串数据从 Java 发送到 C++ 控制台应用程序？我正在尝试这样做：

```
BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(proc.getOutputStream()));
String o = ...;
proc.getOutputStream().write(o.getBytes()); 
```

但是当我这样做时，我从来没有在 C++ 端看到它：

```
ReadFile(stdin_h,buf, sizeof(buf), &bytes, 0) 
```

`ReadFile`永远不会回来。

接下来是进一步的阐述和示例代码。

* * *

我编写了一个简单的 C++ 控制台 (Win32) 应用程序，它从 STDIN 读取并根据输入执行操作。

现在我想编写一个 Java 应用程序来“驱动”C++ 应用程序。Java 应用程序应该：

1.  使用启动 C++ 应用程序`Runtime.exec()`
2.  将字符串数据写入 C++ 应用程序的 STDIN
3.  重复直到死亡的时间。

我的 Java 应用程序似乎正在运行，但 C++ 应用程序从未在 STDIN 上接收到任何数据。

这是 C++ 应用程序：

```
int main()
{
    ofstream f("c:\\temp\\hacks.txt");

    HANDLE stdin_h = GetStdHandle(STD_INPUT_HANDLE);
    DWORD file_type = GetFileType(stdin_h);
    if( file_type != FILE_TYPE_CHAR )   
        return 42;

    f << "Pipe" << endl;
    for( bool cont = true; cont; )
    {
        char buf[64*1024] = {};
        DWORD bytes = 0;
        if( ReadFile(stdin_h,buf, sizeof(buf), &bytes, 0) )
        {
            string in(buf,bytes);
            cout << "Got " << in.length() << " bytes: '" << in << "'" << endl;
            f << "Got " << in.length() << " bytes: '" << in << "'" << endl;
            if( in.find('Q') )
                cont = false;
        }
        else
        {
            cout << "Err " << GetLastError() << " while reading file" << endl;
            f << "Err " << GetLastError() << " while reading file" << endl;
        }
    }
} 
```

这是Java方面：

```
public static void main(String[] args) {
    Runtime rt =Runtime.getRuntime();
    try {
        Process proc = rt.exec("c:\\dev\\hacks\\x64\\debug\\hacks.exe");

        BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(proc.getOutputStream()));

        int a = 0;
        while(a < 5)
        {
            String o = (a == 4 ? "Q\n" : "A\n");
            proc.getOutputStream().write(o.getBytes());
            System.out.println("Wrote '" + o + "'");
            ++a;
        }
        try {
            proc.waitFor();

            // TODO code application logic here
        } catch (InterruptedException ex) {
            Logger.getLogger(Java_hacks.class.getName()).log(Level.SEVERE, null, ex);
        }
    } catch (IOException ex) {
        Logger.getLogger(Java_hacks.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

Java 端似乎工作正常，但我从来没有收到 C++ 端的字符串。

我在这里做错了吗？如何在 Windows 下将字符串数据从 Java 发送到 C++ 控制台应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T23:58:07.500

为什么写完 5 个字符串*后不刷新 Java 端的输出流？*

```
proc.getOutputStream().flush(); 
```

# javascript - 动态设置对象文字值

> ID：11302751
> 
> 赞同：1
> 
> 时间：2012-07-02T23:53:06.897
> 
> 标签：javascript

我知道您不能动态设置键值，但是值呢？

我问 bc 我需要知道初始化对象的最佳方法。这是我目前的做法：

```
var object_pipe = {
    model : 'MUserAny',
    page  : { 
        email: '0'
    },
    args  : {
        foo : '0'
    }
};
object_pipe.args.foo = localStorage.foo;  // Statement A 
```

我想将语句 A 直接放在对象文字中，但不确定它是否可能或正确的语法。

另外，当我无法在对象文字中设置属性时，是否需要显式声明属性...页面是否需要存在？

```
var object_pipe = {
    model : 'MUserNew',
    page  : { 
    }
};
for( var key in form_elements ) {
    object_pipe.page[ form_elements[key].name ] = form_elements[key].value ;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T00:03:19.540

您不需要显式声明变量，但您可以使用空的“whatever”初始化键，可以是数组、字符串、对象文字等。您可以稍后添加属性。

```
var o = {
  a: [],
  b: {}
}

o.a[0] = 'foo'
o.b.c = 'baz'
o.d = 'pom' // New 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T23:55:13.520

这有什么问题：

```
var object_pipe = {
    model : 'MUserAny',
    page  : { 
        email: '0'
    },
    args  : {
        foo : localStorage.foo
    }
}; 
```

## [演示](http://jsfiddle.net/XYjaX/)

# maven - Nexus 不缓存 Maven 中央插件

> ID：11302754
> 
> 赞同：10
> 
> 时间：2012-07-02T23:53:22.820
> 
> 标签：maven, nexus

我使用 Maven 3.0.4 和 Nexus 2.0.6。我已将我的 settings.xml 设置为使用单个存储库的 Nexus 指令显示。当 maven 尝试运行 maven -U clean 时出现以下错误。

```
[ERROR] Plugin org.apache.maven.plugins:maven-clean-plugin:2.4.1 or one of its d
ependencies could not be resolved: Failed to read artifact descriptor for org.ap
ache.maven.plugins:maven-clean-plugin:jar:2.4.1: Could not find artifact org.apa
che.maven.plugins:maven-clean-plugin:pom:2.4.1 in nexus (http://localhost:8081/n
exus/content/groups/public) -> [Help 1] 
```

如果我从设置中删除 nexus 镜像并直接转到 maven Central，则该命令有效。nexus 中的 maven repo 的设置显示它正在服务中并且它在公共组中（最后列出）。

我不在代理访问互联网的后面。

这是我的 settings.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd">
<offline>false</offline>
<mirrors>
    <mirror>
        <!--This sends everything else to /public -->
        <id>nexus</id>
        <mirrorOf>*</mirrorOf>
        <url>http://localhost:8081/nexus/content/groups/public</url>
    </mirror>
</mirrors>
<profiles>
    <profile>
        <id>nexus</id>
        <!--Enable snapshots for the built in central repo to direct -->
        <!--all requests to nexus via the mirror -->
        <repositories>
            <repository>
                <id>central</id>
                <url>http://central</url>
                <releases><enabled>true</enabled></releases>
                <snapshots><enabled>true</enabled></snapshots>
            </repository>
        </repositories>
        <pluginRepositories>
            <pluginRepository>
                <id>central</id>
                <url>http://central</url>
                <releases><enabled>true</enabled></releases>
                <snapshots><enabled>true</enabled></snapshots>
            </pluginRepository>
        </pluginRepositories>
    </profile>
    <profile>
        <id>maven-central</id>
        <!--Enable snapshots for the built in central repo to direct -->
        <!--all requests to nexus via the mirror -->
        <repositories>
            <repository>
                <id>central</id>
                <url>http://repo1.maven.org/maven2/</url>
                <releases><enabled>true</enabled></releases>
                <snapshots><enabled>true</enabled></snapshots>
            </repository>
        </repositories>
        <pluginRepositories>
            <pluginRepository>
                <id>central</id>
                <url>http://repo1.maven.org/maven2/</url>
                <releases><enabled>true</enabled></releases>
                <snapshots><enabled>true</enabled></snapshots>
            </pluginRepository>
        </pluginRepositories>
     </profile>
</profiles>
    <activeProfiles>
    <!--make the profile active all the time -->
    <activeProfile>nexus</activeProfile>
</activeProfiles>

</settings> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T06:23:54.153

确保`Central`代理存储库配置正确，代理 URL 为`http://repo1.maven.org/maven2/`. 检查您是否可以在存储库的 URL 中看到缓存的工件，应该是`http://localhost:8081/nexus/content/repositories/central/org/apache/maven/plugins/maven-clean-plugin/2.4.0/maven-clean-plugin-2.4.1.pom`.

确保您有一个 Central 代理，是否有任何内容列在`http://localhost:8081/nexus/content/repositories/central/`.

如果您使用代理，您可以在*Administration->Nexus*窗格的*Default HTTP Proxy Settings (optional)*部分下配置代理。

 *然后，确保将`Public Repositories`组存储库配置为将`Central`存储库包含在其包含的存储库列表中。

如果到目前为止一切正常，请检查日志，也许那里有一条有用的消息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T17:03:12.797

尝试通过网络浏览器直接下载：

```
http://localhost:8081/nexus/content/groups/public/org/apache/maven/plugins/maven-clean-plugin/2.4.1/maven-clean-plugin-2.4.1.pom 
```

如果这不起作用，请检查 sonatype-work/nexus/logs/nexus.log 文件以获取有关失败的更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-25T13:10:39.980

我有与 OP 相同的症状（Nexus 没有镜像工件），发现它是由路由定义引起的。

例如，您有一个`org.blabla:blabla-api:1.0`位于 Maven 中心的工件。但是，您已经设置了一个路由匹配`.*/org/blabla/.*`，它强制任何匹配的请求仅在代理存储库中`blabla-public`查看......但不幸`blabla-public`的是不包含那个特定的工件。

解决方案：要么更新路由，将 Central 添加到路由使用的 repos 列表中，要么删除路由。

（这可能不是 OP 的原因，但我发布它以防它帮助任何其他访问者。）*

# c++ - 使用 C++11 复制构造 boost::shared_ptr 时出错

> ID：11302758
> 
> 赞同：3
> 
> 时间：2012-07-02T23:54:04.937
> 
> 标签：c++, boost, c++11, shared-ptr

昨天我安装了 clang 3.1 和 g++ 4.7 并尝试编译我正在处理的项目。我惊讶地发现它没有使用两种编译器进行编译。但最让我吃惊的是，问题出在`boost::shared_ptr`.

显然，由于该类定义了移动构造函数/赋值运算符，因此复制构造函数被隐式删除。所以这段代码：

```
#include <boost/shared_ptr.hpp>

int main() {
    boost::shared_ptr<int> x;
    boost::shared_ptr<int> y(x);
} 
```

不编译。clang 回应了这个错误：

```
test.cpp:5:28: error: call to implicitly-deleted copy constructor of
      'boost::shared_ptr<int>'
    boost::shared_ptr<int> y(x);
                           ^ ~
/usr/include/boost/smart_ptr/shared_ptr.hpp:347:5: note: copy constructor is
      implicitly deleted because 'shared_ptr<int>' has a user-declared move
      constructor
    shared_ptr( shared_ptr && r ): px( r.px ), pn() // never throws
    ^ 
```

g++ 4.7 提供了类似的错误，也指隐式删除的构造函数。奇怪的是`boost::shared_ptr`，实际上明确定义了一个复制构造函数（boost/smart_ptr/shared_ptr.hpp 第 228 行）：

```
 template<class Y>
#if !defined( BOOST_SP_NO_SP_CONVERTIBLE )

    shared_ptr( shared_ptr<Y> const & r, typename boost::detail::sp_enable_if_convertible<Y,T>::type = boost::detail::sp_empty() )

#else

    shared_ptr( shared_ptr<Y> const & r )

#endif
    : px( r.px ), pn( r.pn ) // never throws
    {
    } 
```

我正在使用 boost 1.48.0.2，它是相当新的。有谁知道这里发生了什么？为什么复制构造函数在实际定义时没有被检测到？这在较新版本的智能指针库中是否已修复？我在更新日志上找不到任何东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T00:05:28.933

这是 Boost 中的一个已知错误。Boost 的旧版本（1.48 和更低版本）不能在 C++11 下编译，至少，不是全部。就个人而言，我使用这种解决方法：

```
#ifdef MY_LIB_COMPILING_UNDER_CXX11

#include <memory>

namespace my_lib {

using std::shared_ptr;
using std::weak_ptr;

};

#else

#include <boost/shared_ptr.hpp>
#include <boost/weak_ptr.hpp>

namespace my_lib {

using boost::shared_ptr;
using boost::weak_ptr;

};

#endif 
```

`MY_LIB_COMPILING_UNDER_CXX11`您设置的标志在哪里传递给编译器或从编译器的 C++11 标志派生。然后，在图书馆的其余部分我只使用`my_lib::shared_ptr`. 这很好用。

# c# - 一个对象从它所在的列表中删除自己的潜在危险是什么？

> ID：11302766
> 
> 赞同：1
> 
> 时间：2012-07-02T23:55:50.187
> 
> 标签：c#

例如，如果我有一堂课：

```
public class StuffHolder
{

    List<Stuff> myList;

    public StuffHolder()
    {
        myList = newList<Stuff>();
        myList.Add(new Stuff(myList));
        myList[0].stuffHappens();
    }

} 
```

和一个东西对象：

```
public class Stuff
{
    List<Stuff> myList;

    public Stuff(List<Stuff> myList)
    {
        this.myList = myList;
    }

    public void stuffHappens()
    {
        myList.Remove(this);
    }
} 
```

调用 stuffHappens() 而不是让 stuff 将应该删除的信息传递给 StuffHolder 类并让 StuffHolder 类删除特定的 Stuff 有什么缺点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T00:03:02.003

如果 stuffHappens() 一次发生在多个线程中，则存在危险，因为该`List<T>`集合不是线程安全的。

更大的危险是责任的混淆，因为 Stuff 的工作可能不应该是知道它被存储在一个集合中。随着系统的发展和发展，这种设计“模糊性”会导致不断增加的混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T00:02:55.657

它肯定会起作用（即 Stuff 对象将从列表中删除）。

问题是为什么你首先有一个 StuffHolder。通常当你像这样包装一个集合时，你这样做是为了维护一些不变量或缓存一些数据。像这样使用列表意味着您可能违反不变量。

本质上，问题在于 StuffHolder 不知道某个对象已从其列表中删除。对于您的特定情况，这是否是一个问题取决于您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T00:04:33.643

从代码的角度来看是可能的，所以没关系。答案取决于你在建模什么，你所做的设计。可能在某些情况下该解决方案不是一个好的解决方案，而在某些情况下它是。如果你愿意，你可以分享你想要实现的目标，然后我们可以讨论。

希望能帮助到你。

# javascript - 如何使用鼠标单击和拖动来放大 D3

> ID：11302768
> 
> 赞同：5
> 
> 时间：2012-07-02T23:56:25.843
> 
> 标签：javascript, d3.js

我是 D3 的新手，想实现类似于此处显示的单击拖动缩放：[http ://www.highcharts.com/demo/line-time-series](http://www.highcharts.com/demo/line-time-series)

我已经建立了一个折线图，但对如何实现它感到困惑。

我想我需要一些 JS 事件处理程序来找到我的 mousedown 和 mouseup 发生的位置。但是，当用户拖动时，如何创建图表上出现的阴影？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T04:32:35.490

您可能希望使用 a`brush`在`d3.js`. 你可以看到我放在[http://bl.ocks.org/1962173](http://bl.ocks.org/1962173)的一个例子，它做了类似的事情。

相关代码为：

```
var brush = d3.svg.brush()
    .x(x)
    .extent([d3.time.monday(now),d3.time.saturday.ceil(now)])
    .on("brush", display); 
```

where`display`是一个根据 的当前范围重绘数据的函数`brush`。这样您就不需要尝试挂钩自己的处理程序，甚至根本不需要担心调整突出显示区域的大小。

# caching - 如何编写具有更好缓存行为的循环？

> ID：11302770
> 
> 赞同：0
> 
> 时间：2012-07-02T23:56:33.507
> 
> 标签：caching, loops

我正在处理这样的循环：

```
int arrA[BIG], arrB[BIG], arrC[BIG];

for(int = 0; i<BIG; i++){
      do_operation(arrA[i], arrB[i], arrC[i]);
} 
```

这`do_operation`不是一个实际的功能。它只是意味着A，B，C之间的一些操作。从分析数据来看，缓存丢失率似乎很高。

如何以更好的缓存行为重写循环？

感谢您的任何评论！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T00:03:48.437

您正在线性访问每个数组，这对于缓存使用（以及硬件预取器）来说基本上是最佳的。

然而，如果你的数组是一个不幸的大小（通常是 2 的大幂），你会被颠簸；`arrA[i]`，`arrB[i]`并且`arrC[i]`都会映射到同一个缓存行，并且不断地互相驱逐。本质上，每一次访问都将是一次缓存未命中。为避免这种情况，您应该尝试稍微填充每个数组。

参见例如[*了解缓存抖动*](http://techpubs.sgi.com/library/dynaweb_docs/0640/SGI_Developer/books/OrOn2_PfTune/sgi_html/ch06.html#id29149)。

# cryptography - 数据的公钥加密/解密

> ID：11302771
> 
> 赞同：-1
> 
> 时间：2012-07-02T23:56:39.703
> 
> 标签：cryptography, public-key-encryption, pgp

当某些数据使用 PGP 加密时，不提供密码。PGP 的对称算法部分使用的密码是什么？

这是一个用 AES 256 加密的小字符串的输出。

```
-----BEGIN PGP MESSAGE-----
Version: BCPG v1.39

hI4D+UDEMBpnd50QAf9bWG97E9FfnSKB/WpVcBtLJqk5f/Ih9YZTUDULDZpSE0TP
ObJnCs91okOv6/BtDRDZ84ChF5pOZezb5+aL3TW5AfwK3gJ7nPTlmZOm5Kf7qOfB
n307xpn0qRw395y1mfOm10TsMpaCkbSvwjhqPi8hRMM17y29OsqGLstZdeAaNTGt
0mwB7EiZti4jOUF3/SCNnn2vA9hVc6o6c0l0h5vQOF0L+eL1Pmhg8RcFT4kHRnI/
A+Ad4hsbOxD1vvzZHx2iETkt1JmNTHmOOY5Cw/n+sFlU9JzZpzAtqwUjjnyN8NjQ
6NbpwL6gebTJCVTNW2c=
=kI32
-----END PGP MESSAGE-----

Old: Public-Key Encrypted Session Key Packet(tag 1)(142 bytes)
        New version(3)
        Key ID - 0xF940C4301A67779D
        Pub alg - ElGamal Encrypt-Only(pub 16)
        ElGamal g^k mod p(511 bits) - 5b 58 6f 7b 13 d1 5f 9d 22 81 fd 6a 55 70 1b 4b 26 a9 39 7f f2 21 f5 86 53 50 35 0b 0d 9a 52 13 44 cf 39 b2 67 0a cf 75 a2 43 af eb f0 6d 0d 10 d9 f3 80 a1 17 9a 4e 65 ec db e7 e6 8b dd 35 b9 
        ElGamal m * y^k mod p(508 bits) - 0a de 02 7b 9c f4 e5 99 93 a6 e4 a7 fb a8 e7 c1 9f 7d 3b c6 99 f4 a9 1c 37 f7 9c b5 99 f3 a6 d7 44 ec 32 96 82 91 b4 af c2 38 6a 3e 2f 21 44 c3 35 ef 2d bd 3a ca 86 2e cb 59 75 e0 1a 35 31 ad 
                -> m = sym alg(1 byte) + checksum(2 bytes) + PKCS-1 block type 02

New: Symmetrically Encrypted and MDC Packet(tag 18)(108 bytes)
        Ver 1
        Encrypted data [sym alg is specified in pub-key encrypted session key]
                (plain text + MDC SHA1(20 bytes)) 
```

我知道 AES 256 值`9`隐藏在第一个数据包（标签 1）中，但关键在哪里？由于公钥是用来加密的，所以公钥中没有隐藏密钥可以用来加密。此外，我认为 RFC 4880 从未真正指定从何处获取密钥。

我是否遗漏了一些关于公钥密码学的重要观点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T00:01:05.350

您不需要密钥，因为任何人都可以使用公钥。公钥用于加密（在本例中为随机 AES 密钥，用于加密其余数据）。只有在解密期间，您才需要私钥来检索加密的 AES 密钥，当然还有数据。*这当然是接收*方的公钥/私钥对。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T00:00:56.280

随机生成的会话密钥存储在第一个数据包中：

> ```
> ... Public-Key Encrypted Session Key Packet ... 
> ```

原始数据永远不会直接使用公钥算法加密；相反，使用随机生成的会话密钥。如果您加密给多个收件人，相同的会话密钥将单独加密给每个收件人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T01:25:11.157

我刚刚意识到我`session key`在说明中误解为数据包，而不是密钥

# nuget-package - Iesi.Collections 未加载？

> ID：11302779
> 
> 赞同：1
> 
> 时间：2012-07-02T23:58:15.880
> 
> 标签：nuget-package, iesi-collections

我想使用 Nhibernate，我写了一个这个代码包控制台管理器

安装包 NHibernate

我得到这个错误

> 安装包：无法解析依赖项“Iesi.Collections (≥ 3.2.0.4000)”。在 line:1 char:16 + Install-Package <<<< NHibernate + CategoryInfo : NotSpecified: (:) [Install-Package], InvalidOperationException + FullyQualifiedErrorId : NuGetCmdletUnhandledException,NuGet.PowerShell.Commands.InstallPackageCommand

然后我想安装`Iesi.Collections`并尝试此代码

```
PM> Install-Package Iesi.Collections -Version 3.2.0.4000
Install-Package : Unable to find package 'Iesi.Collections'.
At line:1 char:16
+ Install-Package <<<<  Iesi.Collections -Version 3.2.0.4000
+ CategoryInfo          : NotSpecified: (:) [Install-Package], InvalidOperationException
+ FullyQualifiedErrorId : NuGetCmdletUnhandledException,NuGet.PowerShell.Commands.InstallPackageCommand 
```

有解决这个问题的想法吗？:S

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T08:38:32.473

今天早上我就遇到了这个问题。

我猜这是因为我的解决方案中的不同项目引用了相同程序集的不同版本，这让 Nuget 吓坏了。

这样做后我得到了它：

1.  通过运行卸载依赖于`Iesi.Collections`like`Nhibernate`等的所有内容。`FluentNHibernate``Uninstall-Package <name>`
2.  卸载 Iesi.Collections ( `Uninstall-Package Iesi.Collections`)
3.  （验证没有对同一程序集的不同版本的任何引用，在 packages-folder 中查找具有不同版本号的多个文件夹）
4.  再次添加您的 nuget 包

如果您像我一样退出了几个包并且不记得所有这些包，请`Get-Package`在删除任何内容之前运行并将输出复制到记事本，您可以在一分钟内再次添加所有内容。

（编辑：我正在运行这个版本的 Nuget [http://nuget.codeplex.com/downloads/get/382255在点击](http://nuget.codeplex.com/downloads/get/382255)[此页面](http://nuget.codeplex.com/workitem/1790)中的一些链接之后）

# symfony - 如何降低 NotFoundHttpException 的严重性？

> ID：11302787
> 
> 赞同：14
> 
> 时间：2012-07-02T23:59:21.443
> 
> 标签：symfony

当我的 Symfony2 应用程序发生坏事时，我希望得到提醒。现在我只是`ERROR`在日志中寻找。不幸的是，“HTTP 404 - 未找到文件”（NotFoundHttpException）被记录为错误，“HTTP 403 - 禁止”（AccessDeniedHttpException）也是如此。

这并不保证错误；最多这些应该是警告。我怎样才能使这些日志的严重程度降低？

示例错误：

```
[2012-07-02 16:58:21] request.ERROR: Symfony\Component\HttpKernel\Exception\NotFoundHttpException: No route found for "GET /foo" (uncaught exception) at /home/user/Symfony2_v2.0.12/vendor/symfony/src/Symfony/Bundle/FrameworkBundle/EventListener/RouterListener.php line 83 [] [] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T00:54:33.113

我发现了一些有用的东西。kernel.exeption 事件上的[Symfony2 内部文档](http://symfony.com/doc/current/book/internals.html#kernel-exception-event)提到可以在事件上设置响应，[GetResponseForExceptionEvent 文档](http://api.symfony.com/2.0/Symfony/Component/HttpKernel/Event/GetResponseForExceptionEvent.html)说

> 一旦设置响应，此事件的传播就会停止。

我拼凑了一个似乎正在做我想做的事的听众：

```
<?php

namespace Acme\DemoBundle\Listener;

use Symfony\Component\EventDispatcher\EventDispatcher;
use Symfony\Component\HttpKernel\Log\LoggerInterface;
use Symfony\Component\EventDispatcher\Event;
use Symfony\Component\HttpKernel\KernelEvents;
use Symfony\Component\HttpFoundation\Response;
use Symfony\Component\HttpKernel\Event\GetResponseForExceptionEvent;

class ExceptionLoggingListener {
  private $logger;

  public function __construct(LoggerInterface $logger) {
    $this->logger = $logger;
  }

  public function onKernelException(GetResponseForExceptionEvent $event) {
    if(!$event) {
      $this->logger->err("Unknown kernel.exception in ".__CLASS__);
      return;
    }
    $notFoundException = '\Symfony\Component\HttpKernel\Exception\NotFoundHttpException';

    $e = $event->getException();
    $type = get_class($e);
    if ($e instanceof $notFoundException) {
      $this->logger->info($e->getMessage());
      $response = new Response(Response::$statusTexts[404], 404);
      $event->setResponse($response);
      return;
    }

    $accessDeniedException = '\Symfony\Component\HttpKernel\Exception\AccessDeniedHttpException';
    if ($e instanceof $accessDeniedException) {
      $this->logger->info($e->getMessage());
      $response = new Response(Response::$statusTexts[403], 403);
      $event->setResponse($response);
      return;
    }
    $this->logger->err("kernel.exception of type $type. Message: '".$e->getMessage()."'\nFile: ".$e->getFile().", line ".$e->getLine()."\nTrace: ".$e->getTraceAsString());
  }

} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-18T19:09:09.283

这是一种代码更少的方法:)

**1\. 扩展 Symfonys ExceptionListner 类并覆盖 logging 方法：**

```
<?php

use Symfony\Component\HttpKernel\EventListener\ExceptionListener as BaseListener;
use Symfony\Component\HttpKernel\Exception\HttpExceptionInterface;
use Symfony\Component\HttpKernel\Exception\NotFoundHttpException;

class ExceptionListener extends BaseListener
{

    /**
     * Logs an exception.
     *
     * @param \Exception $exception The original \Exception instance
     * @param string     $message   The error message to log
     * @param Boolean    $original  False when the handling of the exception thrown another exception
     */
    protected function logException(\Exception $exception, $message, $original = true)
    {
        $isCritical = !$exception instanceof HttpExceptionInterface || $exception->getStatusCode() >= 500;

        if (null !== $this->logger) {
            if ($isCritical) {
                $this->logger->critical($message);
            } else {

                if ($exception instanceof NotFoundHttpException) {
                    $this->logger->info($message);
                } else {
                    $this->logger->error($message);
                }
            }
        } elseif (!$original || $isCritical) {
            error_log($message);
        }
    }
} 
```

**2.配置twig.exception_listener.class参数：**

```
parameters:
    twig.exception_listener.class: "MyBundle\EventListener\ExceptionListener" 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-10-17T07:54:40.787

只需添加`excluded_404s`到您的配置中：

```
monolog:
    handlers:
        main:
            type:         fingers_crossed
            action_level: error
            handler:      nested
            excluded_404s:
                - ^/
        nested:
            type:  stream
            path:  "%kernel.logs_dir%/%kernel.environment%.log"
            level: debug 
```

请参阅[http://symfony.com/doc/current/logging/monolog_regex_based_excludes.html](http://symfony.com/doc/current/logging/monolog_regex_based_excludes.html)以获取参考

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-13T03:22:10.960

基于 Tarjei 回答的 Symfony 5 解决方案：

创建一个覆盖 Symfony ErrorListener 的新 ErrorListener。

App\EventListener\ErrorListener.php

```
<?php
declare(strict_types=1);

namespace App\EventListener;

use Symfony\Component\HttpKernel\EventListener\ErrorListener as BaseListener;
use Symfony\Component\HttpKernel\Exception\HttpExceptionInterface;
use Symfony\Component\HttpKernel\Exception\NotFoundHttpException;

class ErrorListener extends BaseListener
{
    /**
     * Logs an exception.
     *
     * @param \Exception $exception The original \Exception instance
     * @param string     $message   The error message to log
     */
    protected function logException(\Throwable $exception, string $message): void
    {
        $isCritical = !$exception instanceof HttpExceptionInterface || $exception->getStatusCode() >= 500;

        if (null !== $this->logger) {
            if ($isCritical) {
                $this->logger->critical($message);
            } else {
                if ($exception instanceof NotFoundHttpException) {
                    $this->logger->info($message);
                } else {
                    $this->logger->error($message);
                }
            }
        }
    }
} 
```

服务.yaml

```
services:
    App\EventListener\ErrorListener: '@exception_listener'

    exception_listener:
        autowire: false
        class: App\EventListener\ErrorListener
        arguments:
            $controller: '%kernel.error_controller%'
            $logger: '@logger'
            $debug: '%kernel.debug%' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-02T10:01:16.630

您还可以使用错误级别活动策略（实际上 Symfony 的内置 404 错误排除是使用此完成的，所以我想这是一个正确的方法）。

**配置.yml**

```
monolog:
    handlers:
        main:
            type: fingers_crossed
            handler: loggly
            activation_strategy: 'mybundle.monolog.fingers_crossed.activation_strategy'
        loggly:
            type: loggly
            token: %loggly_token%
            level: error
            tag: %loggly_tag% 
```

**services.yml**（请注意，此处设置了操作级别，而不是在 config.yml 中）

```
services:
    mybundle.monolog.fingers_crossed.activation_strategy:
        class: MyBundle\Handler\FingersCrossed\ErrorLevelActivationStrategy
        arguments:
            - '@request_stack'
            - 'error' 
```

*ErrorLevelActivationStrategy.php*

```
<?php
namespace MyBundle\Handler\FingersCrossed;

use Monolog\Handler\FingersCrossed\ErrorLevelActivationStrategy as BaseErrorLevelActivationStrategy;
use Symfony\Component\HttpKernel\Exception\HttpException;
use Symfony\Component\HttpFoundation\RequestStack;

/**
 * Activation strategy that ignores client errors (4xx)
 */
class ErrorLevelActivationStrategy extends BaseErrorLevelActivationStrategy
{
    protected $requestStack;
    public function __construct(RequestStack $requestStack, $actionLevel)
    {
        parent::__construct($actionLevel);
        $this->requestStack = $requestStack;
    }
    /**
     * {@inheritdoc}
     */
    public function isHandlerActivated(array $record)
    {
        $isActivated = parent::isHandlerActivated($record);
        if (
            $isActivated
            && isset($record['context']['exception'])
            && $record['context']['exception'] instanceof HttpException
            && $record['context']['exception']->getStatusCode() >= 400
            && $record['context']['exception']->getStatusCode() <= 499
            && ($request = $this->requestStack->getMasterRequest())
        ) {
            $isActivated = false;
        }
        return $isActivated;
    }
} 
```

[https://gist.github.com/sobstel/d791d0347ee1f4e47b6e](https://gist.github.com/sobstel/d791d0347ee1f4e47b6e)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-21T21:49:23.960

在 Symfony 3.3 中更喜欢这个而不是 exclude_404s 参数。

应用程序/配置/服务.yml

```
exception_listener:
    class: AppBundle\Listener\ExceptionListener
    arguments: ["@logger", "@templating"]
    tags:
        - { name: kernel.event_listener, event: kernel.exception} 
```

src/AppBundle/Listener/ExceptionListener.php

```
<?php

namespace AppBundle\Listener;

use Symfony\Component\HttpFoundation\Response;
use Symfony\Component\HttpKernel\Event\GetResponseForExceptionEvent;
use Symfony\Bridge\Monolog\Logger;
use Symfony\Component\HttpKernel\Exception\NotFoundHttpException;
use Symfony\Component\Templating\EngineInterface;

class ExceptionListener
{
    private $logger;
    private $templateEngine;

    public function __construct(Logger $logger, EngineInterface $templateEngine)
    {
        $this->logger = $logger;
        $this->templateEngine = $templateEngine;
    }

    public function onKernelException(GetResponseForExceptionEvent $event)
    {
        $exception = $event->getException();
        if ($exception instanceof NotFoundHttpException)
        {
            $this->logger->info($exception->getMessage());

            // default twig error app/config/Resources/TwigBundle/views/Exception/error.html.twig
            $response = $this->templateEngine->render('TwigBundle:Exception:error.html.twig');

            $event->setResponse(new Response($response));
        }
    }
} 
```

# mysql - MySQL 索引说明

> ID：11302792
> 
> 赞同：1
> 
> 时间：2012-07-02T23:59:43.320
> 
> 标签：mysql

我不太确定索引是如何工作的。

这是我的理解，如果我错了，请纠正我或确认我是否正确：
我有疑问：

```
SELECT * FROM people WHERE age < 40 AND country = 'United States' 
```

我的索引在`country`现场。
它首先搜索国家（因为有一个索引），制作一个结果列表，然后搜索一个列表`age < 40`。我对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T00:01:21.707

这*可能*是 DBMS 选择做的事情。您的 DBMS 将查看 SQL 并生成一些可能的“执行计划”，找出它们的“昂贵”程度，然后选择最好的。当然，您描述的计划是 DMBS 可能会考虑的计划，但不能 100% 保证选择该计划。

这取决于许多其他因素，包括数据的样子。DBMS 会尽可能早地选择过滤数据的计划，以使流经系统的数据最小化。如果 DBMS 可以看到国家/地区很少 = 'United States'，它可能会选择首先处理查询的那部分。这将使后续操作更便宜。

有关更多信息，请运行`MYSQL EXPLAIN`（[文档](http://dev.mysql.com/doc/refman/5.0/en/explain.html)）以查看 DBMS 选择做什么。

# cursor - visual foxpro 98 使用光标和眉毛，并循环用于添加列

> ID：11302793
> 
> 赞同：1
> 
> 时间：2012-07-03T00:00:09.933
> 
> 标签：cursor, foxpro, visual-foxpro

```
*!*          TransForm(m.TCuatro,"@Z 999,999,999") + " "
*!*  CDate("mx",Val(Right(Allt(field(4,"_Actual")),2)),Val("20"+SubStr(Allt(field(3,"_Actual")),2,2))) + " N(15,2)," + ;
*!*           CDate("mx",Val(Right(Allt(field(5,"_Actual")),2)),Val("20"+SubStr(Allt(field(4,"_Actual")),2,2))) + " N(15,2)," + 
CadExel = CDate("mx",Val(Right(Allt(field(2,"_Actual")),2)),Val("20"+SubStr(Allt(field(2,"_Actual")),2,2))) + " N(15,2)," + ;         
          "Promedio N(15,2), " + ;
          "Cuota" + CDate("mx",__Mes,__Ano) + " N(12), " + ;
          "VsProm N(12,2), " + ;
          "Dobles N(12), Triples N(12), Fuera C(6)"
*!*           CDate("mx",Val(Right(Allt(field(6,"_Actual")),2)),Val("20"+SubStr(Allt(field(5,"_Actual")),2,2))) + " N(12),"
*!*           Padl(CDate("mx",Val(Right(Allt(field(4,"_Actual")),2)),Val("20"+SubStr(Allt(field(4,"_Actual")),2,2))),14) + " " + ;
*!*           Padl(CDate("mx",Val(Right(Allt(field(5,"_Actual")),2)),Val("20"+SubStr(Allt(field(5,"_Actual")),2,2))),14) + " " + 
TitNF   = Padl(CDate("mx",Val(Right(Allt(field(3,"_Actual")),2)),Val("20"+SubStr(Allt(field(3,"_Actual")),2,2))),14) + " " + ;
          Padl("Promedio",14) + " " + ;
          Padl("Cuota",11) + " " + ;
          Padl("VsAA",11) + " " + ;
          Padl("Dobles",11) + " " + ;
          Padl("Triples",11) + " " + ;
          Padl("Rango",5) + " " 
*!*           Padl(CDate("mx",Val(Right(Allt(field(6,"_Actual")),2)),Val("20"+SubStr(Allt(field(6,"_Actual")),2,2))),11) + " "

Select * From __Cadena Order By Que Into Cursor __Paso
Select __Cadena
Zap
Select __Paso
   Cad = "insert into __Cadena Values ( "
   For i= 1 To FCount()
      Cad = Cad + "__Paso." + Allt(Field(i,"__Paso")) + ","
   EndFor
   Cad = Left(Cad,Len(Cad)-1) + ")"
Go Top
Do While !Eof()
   &Cad
   Select __Paso
   Skip    
EndDo
Select __Paso
Use

*!* Set ClassLib To MyTool
*!* Barra = CreateObject("MiBarra")
*!* Barra.Dock(0)
*!* Barra.Show

*!* Define Class MiBarra As MyToolBar
*!* EndDefine
*!* Read Events
Select __Cadena
Go Top
Do vfreport With "Premier", TitNF , " Cuotas Club-Premier" + " de " + cDate("my",__Mes,__Ano) + IIf(__EsCF," (CF)"," (UV) "),"("+Allt(m.xNomPunto)+")",  "Cuotas",;
   CadExel,"",.F.,.F.,1,1,2,1,.F.,.F.,0 
```

好吧，代码是创建这个的最后一部分： ![在此处输入图像描述](../Images/7f5c8845d298e886ebe4ec46497a5983.png)

所以你可以看到一个名为“mar08”的列，它是 Marzo 2008 或“2008 年 3 月”，在这个例子中我有一个列，但在部分代码中它有 3 个或多个列，所以我需要添加这个每列的行：

此代码用于新列

```
CDate("mx",Val(Right(Allt(field(3,"_Actual")),2)),Val("20"+SubStr(Allt(field(2,"_Actual")),2,2))) + " N(12)," + ; 
```

以及此列数据的代码

```
Padl(CDate("mx",Val(Right(Allt(field(3,"_Actual")),2)),Val("20"+SubStr(Allt(field(3,"_Actual")),2,2))),11) + " " + ; 
```

我的问题是

我如何为自动添加列和数据的代码进行循环？

我是 Visual Fox 98 的新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:54:52.323

如果我明白你在这里问的是你会怎么做......

```
CadExel = ""
TitNF = ""
FOR X = 1 TO n (where n is the number of columns you want to add)
    CadExel = CadExel + CDate("mx",Val(Right(Allt(field(3,"_Actual")),2)),Val("20"+SubStr(Allt  (field(2,"_Actual")),2,2))) + " N(12),"
    TitNF = TitNF + Padl(CDate("mx",Val(Right(Allt(field(3,"_Actual")),2)),Val("20"+SubStr(Allt(field(3,"_Actual")),2,2))),11) + " "
ENDFOR

CadExel = CadExel + ; 
    "Promedio N(15,2), " + ;
      "Cuota" + CDate("mx",__Mes,__Ano) + " N(12), " + ;
      "VsProm N(12,2), " + ;
      "Dobles N(12), Triples N(12), Fuera C(6)"
TitNF = TitNF + ;
      Padl("Promedio",14) + " " + ;
      Padl("Cuota",11) + " " + ;
      Padl("VsAA",11) + " " + ;
      Padl("Dobles",11) + " " + ;
      Padl("Triples",11) + " " + ;
      Padl("Rango",5) + " " 
```

基本上，您会将列连接到 CadEx，并将列数据从 FOR 循环中连接到 TitNF。'X' 是每次迭代都会递增的变量，因此您可能需要在 CadExel 和 TitNF 变量中的某处使用它来更改表达式的一部分。

如果我对此不满意，那么也许这至少会让您了解如何使用 FOR 循环来构建您正在寻找的列和列数据。

# maps - 如何使用随机游走生成地牢地图？

> ID：11302798
> 
> 赞同：4
> 
> 时间：2012-07-03T00:00:26.640
> 
> 标签：maps, random-walk

好的，我正在制作一个 2d 地牢爬行者，我想为它随机化一张地图。现在看起来我将使用随机游走算法作为路径，结合 Perlin Noise 用于不同的黑社会环境（目前只有 1 个，因为我使用的是我自己的看起来很糟糕的瓷砖集，只有 1 个车图像和 1 个草图像，但无论如何 :D)

因此，在弄清楚随机游走的工作原理时，看起来我应该按照以下方式做一些事情：

*创建地图后大小的二维数组。

*选择随机开始位置和结束位置（我选择将它们放在地图的相对两侧，随机分布在其一侧。

*按照这些步骤，直到你达到你的终点：

*选择一个随机“行走”的方向（仅向上、向下、向左、向右，因为否则我会留下玩家无法通过的对角线传球）

*“走”那个方向随机数量的步数（我先随机化步数，然后一个接一个地走，以便稍后进行边界检查，而不仅仅是画一条线）。

*每次你在一块瓷砖上“行走”时，将该瓷砖从最初的 0 变为 1。

*重复上述步骤，直到您到达终点。

这给我留下了太多的开放空间和太多的封闭空间。我正在寻找的是一条布满房间的路径，有点，但我想控制“房间”的大小。我不希望“房间”变得太大，有些人会变成这样。所以我想要一种在封闭空间中的感觉，但我也想尽可能多地使用地图网格。

随机游走不适合这个吗？我正在考虑让每一步都有一定的宽度，也许这可以工作。

或者，也许我只是执行错误！可悲的是，我不是数学天才;P

# c++ - Win8/Metro/WinRT中如何获取DocumentsLibrary的绝对路径？

> ID：11302799
> 
> 赞同：3
> 
> 时间：2012-07-03T00:00:39.810
> 
> 标签：c++, microsoft-metro, windows-runtime, filepath

我有我的 manifestappx 文件设置可以访问 Documents Library Access 和文件关联，但是当我调用

```
Windows::Storage::KnownFolders::DocumentsLibrary->Path 
```

路径返回一个空白字符串。如何获得正确返回的路径？

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T02:56:05.437

因为[`DocumentsLibrary`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.knownfolders.documentslibrary.aspx)是代表不同位置和文件集合的虚拟位置，所以它不会有路径：

> 库是 Windows 7 中引入的一个概念，允许用户从一个位置查看相关的用户内容。由于库是虚拟位置，因此添加到库或从库中删除的文件夹也继续存在于其原始位置。

此外，[MSDN 文档中的`StorageFolder.Path`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.storagefolder.path.aspx)状态：

> 不要依赖此属性来访问文件夹，因为某些文件夹可能没有文件系统路径。例如，如果文件夹是一个文件组，或者由 URI 支持，或者是使用文件选择器选择的，则不能保证该文件夹具有文件系统路径。

# javascript - 从jQuery中的字符串获取部分值

> ID：11302800
> 
> 赞同：2
> 
> 时间：2012-07-03T00:00:41.133
> 
> 标签：javascript, jquery, substring

假设我有一个值为“foo_bar”的输入框

我想将 foo 分配给一个变量，以及 bar。我永远不知道每个的长度。本质上， _ 左边的任何东西都应该是一个变量，而右边的所有东西都应该是另一个。

你会如何在 jQuery 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T00:11:52.517

```
var a = 'foo_bar'​;
​var b = a.split('_')​;

​var left = b[0]​;
var right = b[1​]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T00:02:27.513

你不需要 jQuery，你可以用纯 JavaScript 来做。正则表达式是一种替代方法，或者如果您知道您将始终使用“_”分隔符，您可以使用该`indexOf`方法找到它的位置并从那里拆分。

或者举个例子：

```
var val = $("#inputId").val();
int separatorIndex = val.indexOf('_');
var first = val.substring(0, separatorIndex);
var second = val.substring(separatorIndex + 1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T00:05:20.383

您可以使用以下代码：

```
var str = "foo_bar"; // Change with input data
var index = str.indexOf("_");
if (index < 0) return false; // Change this with your '_' not found code
var foo = str.substr(0, index);
var bar = str.substr(index + 1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T00:18:31.040

为了多样化：

```
var
str = 'foo_bar',
left = /(.+)_/.exec(str)[1],
right = /_(.+)/.exec(str)[1] 
```

# windows - Windows：在我的应用程序加载之前谁在调用 TlsAlloc？

> ID：11302805
> 
> 赞同：3
> 
> 时间：2012-07-03T00:01:29.590
> 
> 标签：windows, dynamic-memory-allocation, thread-local-storage

我有一个使用相当数量（不要问！）的线程本地存储变量的应用程序。近十年来，它一直可以毫无问题地运行……直到最近出现了一个惊喜。

客户有一台运行 Windows7（64 位）的笔记本电脑......在他的系统上，TLS 分配失败。（我的问题不完全是这个，但足够接近）。他声称他的系统非常标准。他有一个 ZoneAlarm，但声称其他一切都是库存；把它和一粒盐一起吃）。我如何找出谁或什么在分配其他 TLS 插槽（并有效地让我用尽插槽）？

该应用程序是一个控制台独立应用程序并且相当普通：打开/读/写文件，一些多线程，几乎没有其他任何东西，所以我希望只有基本的 Windows DLL 被积极参与。我知道一些 DLL（甚至是 Windows 的）可能会为基于线程的活动提供服务，因此会分配自己的 TLS 插槽，这没关系。但我不希望任何理智的人分配很多很多。作为我的应用程序启动的一部分（可能是防火墙），是否有其他东西可以将自己插入我的进程空间？

一个典型的进程在启动时应该分配多少个 TLS 插槽？需求从何而来？我可以跟踪 TLS 调用以查看谁在以某种方式分配它们吗？

**编辑：2013 年 1 月 1 日：** 现在有了一些经验，并让我的工具在启动时报告 TLS 需求，我看到如下内容：

*   Win XP 64 8 核 16 Gb RAM：3 个 TLS 变量繁忙
*   Windows Vista 32 4 Gb RAM：4 个 TLS 变量繁忙
*   Win 7 Pro：4 核 8 Gb RAM：7 TLS 变量繁忙
*   Win 7（法语版）：2 核，4 GB：最少 25 个 TLS 变量繁忙，在某些配置中更多

我们正在检查 Windows 8，但它的 TLS 需求似乎更高。但究竟是什么导致了两个 Windows 7 系统之间的巨大差异？为什么在我的应用程序开始运行*之前*需要 TLS 变量（可能是 DLL 存储线程状态） ，特别是考虑到早期版本的 Windows 中不需要？

如果有帮助，我们正在运行一个 32 位应用程序。

# mysql - 将 MySQL SELECT WHERE IN 与多字节字符一起使用

> ID：11302818
> 
> 赞同：0
> 
> 时间：2012-07-03T00:03:16.560
> 
> 标签：mysql, unicode, multibyte

我有一个包含所有已定义 Unicode 字符（`character`列）及其关联的 Unicode 点（`id`列）的表。我有以下查询：

```
SELECT id FROM unicode WHERE `character` IN ('A', 'B', 'C') 
```

虽然此查询应仅返回 3 行（id = 65、66、67），但它会返回 129 行，包括以下 ID：

> 65 66 67 97 98 99 129 141 143 144 157 160 193 205 207 208 221 224 257 269 271 272 285 288 321 333 335 336 349 352 449 461 463 464 477 480 2049 2061 2063 2064 2077 2080 4161 4173 4175 4176 4189 4192 4929 4941 4943 4944 4957 4960 5057 5069 5071 5072 5085 5088 5121 5133 5135 5136 5149 5152 5953 5965 5967 5968 5984 6145 6157 6160 6176 8257 8269 8271 8272 8285 8288 9025 9037 9039 9040 9053 9056 9153 9165 9167 9168 9181 9184 9217 9229 9231 9232 9245 9248 10049 1006110253 10272 12353 1236512381 12313131241132713271327132711327132713271327132713271327132713271327113271327132713271327113271327132713271327113271327113132711313261321327132711327132613513260

我确定这一定与多字节字符有关，但我不知道如何解决它。有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T06:14:56.333

字符串相等和顺序由[排序](http://dev.mysql.com/doc/refman/5.5/en/charset-collations.html)规则控制。默认情况下，使用的排序规则由列确定，但您可以使用[子句设置每个查询](http://dev.mysql.com/doc/refman/5.5/en/charset-collate.html)[的`COLLATE`](http://dev.mysql.com/doc/refman/5.5/en/charset-collate.html)排序规则。例如，如果您的列使用 charset utf8 声明，您可以使用`utf8_bin`考虑`A`和`à`不同的二进制排序规则：

```
SELECT id FROM unicode WHERE `character` COLLATE utf8_bin IN ('A', 'B', 'C') 
```

或者，您可以使用[运算符](http://dev.mysql.com/doc/refman/5.5/en/charset-binary-op.html)[转换`BINARY`](http://dev.mysql.com/doc/refman/5.5/en/charset-binary-op.html)为`character`强制使用二进制比较的“二进制字符串”，这与二进制排序规则几乎但[不完全相同](http://dev.mysql.com/doc/refman/5.5/en/charset-binary-collations.html)：

```
SELECT id FROM unicode WHERE BINARY `character` IN ('A', 'B', 'C') 
```

* * *

更新：我认为以下应该是等价的，但这并不是因为列的[“强制力”低于 constants](http://dev.mysql.com/doc/refman/5.1/en/charset-collation-expressions.html)。二进制字符串常量将被转换为非二进制，然后进行比较。

```
SELECT id FROM unicode WHERE `character` IN (_binary'A', _binary'B', _binary'C') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T00:22:57.367

你可以试试：

```
SELECT id FROM unicode WHERE 'character' IN (_utf8'A',_utf8'B',_utf8'C') 
```

# jquery - jquery.when ajax 问题

> ID：11302822
> 
> 赞同：2
> 
> 时间：2012-07-03T00:03:46.547
> 
> 标签：jquery, jquery-deferred

让我们先看看我的代码：

```
$.when(function(){
    //blah blah blah...
    $.post('submit.php', {name: 'John'}, function(){
        console.log('saved!');
    }, 'text');
    //blah blah blah...
})
.then( $('#data').show() ); 
```

这是什么意思？我认为这意味着当第一个函数完成它的工作（发布到`submit.php`和其他一些工作）时，显示`#data`. （我对吗？）

但是，当我运行它时，它首先显示`#data`然后记录`saved!`（意味着发布完成）

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T00:05:29.180

你根本不应该打电话`.when()`。
`$.post()`已经返回一个 Defered 对象。
你可以直接调用`.then()`它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:01:28.917

你可以让它像那样工作

```
$.post('submit.php', {name: 'John'}, function(){
    console.log('saved!');
}, 'text').then( $('#data').show() ); 
```

或者，如果您想继续使用*$.when*

```
$.when(function() {
    return $.post('submit.php', {name: 'John'}, function(){
        console.log('saved!');
    }, 'text');
}).then( $('#data').show() ); 
```

# oop - 有没有办法使用 ArgoUML 自动生成 getter 和 setter

> ID：11302824
> 
> 赞同：0
> 
> 时间：2012-07-03T00:04:29.803
> 
> 标签：oop, uml

我找到了 ArgoUML（如果您有任何建议，我对其他 OOP UML 工具持开放态度——在我深入研究我的项目之前）。

有没有办法为所有属性/字段自动生成 getter 和 setter？

如果没有，您能否推荐一个可以的 UML 工具。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:38:18.253

有许多不同的免费工具可用于 UML 建模和通过它对代码进行正向工程。

我们使用[Eclipse 插件](http://www.eclipse.org/modeling/mdt/?project=uml2)来创建生成样板代码的 UML 图。

如果您使用的是 java - 您也可以尝试使用接受 UML 文件作为输入的 AndroMDA 来生成 CRUD Java 应用程序。

我相信其他语言也必须有类似的工具。

检查这个 SO 线程 -[如何从 Java 代码生成 UML 图（尤其是序列图）](https://stackoverflow.com/questions/51786/recommended-eclipse-plugins-to-generate-uml-from-java-code)

在真正深入使用 UML 之前，您可能还想阅读此线程 -[您还在使用 UML 吗？如何？做什么的？](https://stackoverflow.com/questions/104638/do-you-still-use-uml-how-what-for) UML [实用吗？](https://stackoverflow.com/questions/18803/is-uml-practical)

# django - 自定义 Django 404 错误

> ID：11302829
> 
> 赞同：10
> 
> 时间：2012-07-03T00:05:04.923
> 
> 标签：django, http-status-code-404

我有一个 404.html 页面，但在某些情况下，我希望能够发送 json 错误消息（对于 404 和 500 等）。我阅读了以下页面：

[https://docs.djangoproject.com/en/dev/topics/http/views/#the-404-page-not-found-view](https://docs.djangoproject.com/en/dev/topics/http/views/#the-404-page-not-found-view)

有什么例子可以显示实现吗？我在我的 urls.py 中有它，但如果发生错误，它不会被拾取。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-03T00:06:40.537

这对我有用：

```
from django.conf.urls import patterns, include, url
from django.views.static import * 
from django.conf import settings
from django.conf.urls.defaults import handler404, handler500
from app.views import error

urlpatterns = patterns('',
    # Examples:
    # url(r'^$', 'app.views.home', name='home'),
)

handler404 = error.error_handler
handler500 = error.error_handler 
```

当你去那个控制器时，你可以让它做任何你想做的事情。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-26T13:55:19.093

除了前面的答案，重要的是要说 views.py 应该在 http 标头中返回一个 404 状态的 HttpResponse。通知搜索引擎当前页面是 404 很重要。垃圾邮件发送者有时会创建许多 url，这些 url 看起来会引导您到某个地方，但随后会为您提供其他内容。他们经常使许多不同的地址为您提供几乎完全相同的内容。而且由于它对用户不友好，因此大多数 SEO 指南都会对此进行处罚。因此，如果您有很多地址显示相同的伪 404 内容，那么搜索网站的爬虫系统可能看起来不太好。因此，您要确保用作自定义 404 的页面具有 404 状态。所以这是一个很好的方法：

在您的应用程序的 urls.py 中添加：

```
# Imports
from django.conf.urls.static import static
from django.conf.urls import handler404
from django.conf.urls import patterns, include, url
from yourapplication import views

##
# Handles the URLS calls
urlpatterns = patterns('',
    # url(r'^$', include('app.homepage.urls')),
)

handler404 = views.error404 
```

在您的应用程序的 views.py 中添加：

```
# Imports
from django.shortcuts import render
from django.http import HttpResponse
from django.template import Context, loader

##
# Handle 404 Errors
# @param request WSGIRequest list with all HTTP Request
def error404(request):

    # 1\. Load models for this view
    #from idgsupply.models import My404Method

    # 2\. Generate Content for this view
    template = loader.get_template('404.htm')
    context = Context({
        'message': 'All: %s' % request,
        })

    # 3\. Return Template for this view + Data
    return HttpResponse(content=template.render(context), content_type='text/html; charset=utf-8', status=404) 
```

秘密在最后一行：status=404

希望它有所帮助！

我期待看到社区对这种方法的投入。=)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-09-29T13:28:08.840

基本：

要定义处理 404 错误的自定义视图，请在 URL 配置中定义 handler404 的视图，例如`handler404 = 'views.error404'`

除了基础知识之外，还有一些需要注意的事项（[自定义 404 视图](https://docs.djangoproject.com/en/dev/ref/views/#the-404-page-not-found-view)）：

1.  它将仅在`Debug=False`模式下启用。
2.  在大多数答案中，更多的是被忽略的（这让我大吃一惊）。

    404 视图默认为

    > `django.views.defaults.page_not_found(request, exception, template_name='404.html')`

    注意参数`exception`

    这导致从`def get_exception_response(self, request, resolver, status_code, exception)`定义的函数内进行 404 到 500 重定向，`core.handlers.base`因为它找不到参数`exception`

# ajax - 我无法从 jQuery.get() 返回的字典中获取特定值

> ID：11302837
> 
> 赞同：3
> 
> 时间：2012-07-03T00:05:47.197
> 
> 标签：ajax, json, jquery

抱歉，我知道这个问题很简单，但我不知道如何从返回的字典中获取响应数据：

这是我的 jQuery.get() 方法：

```
$("#selectDireccion").change(function() {
    $("select option:selected").each(function() {
        if ($(this).index() != 0) {
            valorKeyId = $(this).val()
            $.get("/ajaxRequest?opcion=obtenerSedeKeyId", {
                keyId: valorKeyId
            }, function(data) {
                alert(data)
            });
        }
    });
});​ 
```

这是警报打印的内容：

```
{"name": "First Value", "phone": "434534"} 
```

我应该如何从字典的“名称”键中获取值？

`data.name`在警报内执行没有任何效果。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T00:08:34.690

看来您正在返回一个 JSON 字符串。如果是这种情况，那么您首先需要运行 jQuery 的[parseJSON](http://api.jquery.com/jQuery.parseJSON/)函数：

```
var d = $.parseJSON(data);
alert(d.name); // Will output the name from the JSON string. 
```

或者，更好的是（根据[@calvin L](https://stackoverflow.com/users/138261/calvin-l)的评论），使用 jQuery [getJSON](http://api.jquery.com/jQuery.getJSON/)开头：

```
$.getJSON("/ajaxRequest?opcion=obtenerSedeKeyId",{keyId:valorKeyId}, function(data){
    alert(data.name); // Data already parsed to JSON, outputs the name
}); 
```

# android - Android ICS 1x1 小部件文本标签

> ID：11302838
> 
> 赞同：1
> 
> 时间：2012-07-03T00:05:49.587
> 
> 标签：android, android-4.0-ice-cream-sandwich, android-appwidget

我正在尝试为 ICS 制作一个 1x1 小部件，它在图标下方显示文本标签，并使用设备默认文本样式，但我无法找出这是如何完成的。我知道这是可能的，因为我的 Galaxy Nexus 随附的许多 1x1 小部件都具有此功能。我不想在布局文件中对 textView 进行硬编码，因为这样做会使它在其他设备上看起来很糟糕，这些设备可能使用不同的字体和文本大小等。

有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T01:08:37.560

我认为您无法绕过将 a`TextView`放入布局中。您可以做的是从一种内置的 android 样式中为其选择样式。这样它应该匹配所有其他图标/小部件标签。希望这也适用于其他 API 版本，但我知道它在我的 ICS 手机上看起来不错。我也不确定这是否`FrameLayout`是在这里使用的最好的东西，但我想我会做一些实验。重要的部分是`TextView`最后。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    <FrameLayout
        android:id="@+id/FrameLayout1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1" >
        <ImageButton
            android:id="@+id/buttonimg"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="@drawable/appwidget_dark_bg_clickable"
            android:clickable="true"
            android:contentDescription="@string/app_name" />
        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:contentDescription="@string/app_name"
            android:src="@drawable/arrow_dark" />
    </FrameLayout>
    <TextView
        android:id="@+id/labelTextView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:textAppearance="@android:style/TextAppearance.DeviceDefault.Widget"
        android:text="@string/widgetlabeldefault" />
</LinearLayout> 
```

# excel - 如何进行有条件的 Vlookup

> ID：11302846
> 
> 赞同：1
> 
> 时间：2012-07-03T00:06:43.100
> 
> 标签：excel

我有一张如下图所示的表格

![在此处输入图像描述](../Images/7e0b9a13837445a46acb2ccb03f53c2c.png)

我的目的是用公式（没有排序、过滤、..）查找 B 类中 A2 的分数 - 可以在 Excel 2010 中完成吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T04:09:58.630

试试这个：

```
{=INDEX($C$2:$C$7,MATCH(E2&F2,$A$2:$A$7&$B$2:$B$7,0),1)} 
```

您需要输入公式：

```
=INDEX($C$2:$C$7,MATCH(E2&F2,$A$2:$A$7&$B$2:$B$7,0),1) 
```

然后，在按 Enter 之前，在按 Enter 的同时按住“control+shift”。这导致公式成为“数组”公式。如果你只是点击输入公式不起作用。

这是我的测试在屏幕上的样子：

![Excel电子表格](../Images/ad9712409157fd2200ec564dce2a7ce0.png)

公式在 G2 中。

如果您使用 R1C1 模式（每个人都应该这样做，因为它更容易调试电子表格），那么公式如下所示：

```
{=INDEX(R2C3:R7C3,MATCH(RC[-2]&RC[-1],R2C1:R7C1&R2C2:R7C2,0),1)} 
```

# foursquare - 通过 API 删除签到

> ID：11302851
> 
> 赞同：1
> 
> 时间：2012-07-03T00:07:32.813
> 
> 标签：foursquare

通过该网站，用户可以访问他们的历史记录并手动删除签到。是否也可以通过 API 执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T00:22:04.463

不，这不能通过 API 实现。

由于无法取消删除签入，我们希望保护用户不会因为 3rd 方应用程序中的错误而丢失所有的foursquare 历史记录。由于这个原因，许多删除操作实际上并未通过 API 公开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T00:22:25.040

不，根据Google Groups 上的这个[帖子](https://groups.google.com/forum/?fromgroups#!topic/foursquare-api/BADu3GYFhwI)，这是不可能的。该[文档](https://developer.foursquare.com/docs/)似乎也没有关于签入删除的任何内容，而只是从列表、场地组或评论中删除项目。

# c# - 如何在 C# 控制台程序中使用 Reduce() 方法和转换假分数

> ID：11302860
> 
> 赞同：2
> 
> 时间：2012-07-03T00:08:41.240
> 
> 标签：c#

我对`C#`编程还是很陌生，我被困在下面的项目上。我知道这一定很容易，但我对在哪里放置`Reduce()`方法以及如何通过消除整数并将其调用到`Reduce()`方法来转换分数感到困惑。这是项目：

添加一个`+()`将两个分数相加的运算符方法。要添加两个分数，首先消除值的任何整数部分。例如，2 1/4 变为 9/4，1 3/5 变为 8/5。找到一个公分母并将分数转换为它。例如，当添加 9/4 和 8/5 时，您可以将它们转换为 45/20 和 32/20。然后，您可以添加分子，得到 77/20。最后，调用`Reduce()`方法来减少结果，恢复任何整数值，使数字的小数部分小于 1。例如，77/20 变为 3 17/20。

这是我到目前为止的代码。我也会遇到将这些分数相乘然后创建一个数组的问题，但现在我正尝试一次迈出这一步。任何和所有的回应将不胜感激。

```
public class Fraction
{
    public int WholeNumber { get; private set; }
    public int Numerator { get; private set; }
    public int Denominator { get; private set; } 

    private void Reduce()
    {
        if (Numerator < Denominator)
        {
            WholeNumber = 0;
            return;
        }
        if (Numerator == Denominator)
        {
            WholeNumber = 1;
            Numerator = 0;
            return;
        }
        if (Numerator > Denominator)
        {
            WholeNumber = (int)Math.Floor((decimal)Numerator / Denominator);
            Numerator = Numerator - WholeNumber * Denominator;
        }
    } 

    //constructor with three parameters 
    public Fraction(int wholenumber, int numerator, int denominator)
    {
        WholeNumber = wholenumber;
        Numerator = WholeNumber * Denominator + Numerator;
        Reduce();
    }

    //constructor with two parameters 
    public Fraction(int numerator, int denominator)
    {
        WholeNumber = 0;
        Numerator = numerator;
        Denominator = denominator;
        Reduce();
    } 

    //parameter less with set values
    public Fraction()
    {
        WholeNumber = 0;
        Numerator = 0;
        Denominator = 1;
    }

    public static Fraction operator +(Fraction firstfraction, Fraction secondfraction)
    {
        if (firstfraction.Denominator == secondfraction.Denominator)
        {
            int firstProduct = (firstfraction.WholeNumber * firstfraction.Denominator) + firstfraction.Numerator;
            int secondProduct = (secondfraction.WholeNumber * secondfraction.Denominator) + secondfraction.Numerator;
            return (new Fraction(firstProduct + secondProduct, firstfraction.Denominator));
        }
        else
        {
            int commondenominator = firstfraction.Denominator * secondfraction.Denominator;
            int firstProduct = ((firstfraction.WholeNumber * firstfraction.Denominator) + firstfraction.Numerator) * secondfraction.Denominator;
            int secondProduct = ((secondfraction.WholeNumber * secondfraction.Denominator) + secondfraction.Numerator) * firstfraction.Denominator;
            return (new Fraction(firstProduct + secondProduct, commondenominator));
        }
    } 

    public Fraction Reduce(int WholeNumber, int Numerator, int Denominator)
    {
        int reduceWhole = (int)WholeNumber;
        while (Numerator > Denominator)
        {
            Numerator -= Denominator;
            reduceWhole += 1;
        }
        while (Denominator % Numerator == 0)
        {
            int factor = (int)Denominator / Numerator;
            Numerator = 1;
            Denominator = factor;
        }

        return new Fraction(reduceWhole, Numerator, Denominator);
    } 

}//end class

class Program
{
    static void Main(string[] args)
    {
        Fraction firstfraction = new Fraction();
        Fraction secondfraction = new Fraction();
        Fraction total = firstfraction + secondfraction;
        Console.WriteLine(total);
        Console.Write("Enter whole number portion of fraction: ");
        firstfraction.WholeNumber = Convert.ToInt32(Console.ReadLine());
        Console.Write("Enter numerator: ");
        firstfraction.Numerator = Convert.ToInt32(Console.ReadLine());
        Console.Write("Enter denominator: ");
        firstfraction.Denominator = Convert.ToInt32(Console.ReadLine());
        Console.Write("Enter whole number portion of fraction: ");
        secondfraction.WholeNumber = Convert.ToInt32(Console.ReadLine());
        Console.Write("Enter numerator: ");
        secondfraction.Numerator = Convert.ToInt32(Console.ReadLine());
        Console.Write("Enter denominator: ");
        secondfraction.Denominator = Convert.ToInt32(Console.ReadLine());
        Console.Write("{0} {1}/{2}", firstfraction.WholeNumber, firstfraction.Numerator,
        firstfraction.Denominator);
        Console.WriteLine(" + {0} {1}/{2}", secondfraction.WholeNumber,
        secondfraction.Numerator, secondfraction.Denominator);
        Fraction add = new Fraction();
        add = firstfraction + secondfraction;
        Console.Write("Result of adding two fractions is:{0} {1}/{2}", add.WholeNumber,
        add.Numerator, add.Denominator);
        Console.ReadLine();
    }//end main
}//end class 
```

现在我收到 3 条错误消息，说明属性或索引器

> `'FractionProgram.Fraction.Denominator'`不能在此上下文中使用，因为 set 访问器不可访问。

另外，我对 firstProduct 和 secondProduct 有正确的计算吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T00:38:03.380

我不会为你做题，但我会给你一些提示，帮助你自己解决问题并学习。

首先，对于 Reduce 方法的放置，您可以采取以下几种方法：

*   您可以将其作为修改 Fraction ( `myFraction.Reduce()`)值的实例方法
*   你可以让它成为一个实例方法，它不修改分数，但返回一个新的缩减分数（如`string`或你的运算符）（`myFraction = myFraction.Reduce()`）
*   您可以将上述选项转换为静态方法（`myFraction = Fraction.Reduce(myFraction)`

从阅读作业来看，您似乎应该使用第一个作业。请记住，通常有不止一种方法可以为您未来的项目实现这样的功能。

至于方法的实际内容，这里有一些提示可以引导您找到答案。

*   想想整数除法及其工作原理。写下几个例子（或用代码测试它们），看看答案是什么。
*   考虑模数运算符。如果您还没有了解它，它是一个执行整数除法的运算符，但返回余数而不是商。如果你还没有被允许使用它，你可以很容易地复制它的功能。

其余的你应该能够用数学计算出来，但如果你仍然需要帮助，请发表评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T01:55:59.210

你很亲密，所以你值得点赞。该`Reduce()`方法应该是分数类的一部分并在构造函数中调用。您应该使您的属性 `WholeNumber`,`Numerator`和`Denominator`readonly 以确保您的分数的一致性：

```
public int WholeNumber { get; private set; }
public int Numerator { get; private set; }
public int Denominator { get; private set; } 
```

该方法将根据 和 计算 ，`WholeNumber`就`Numerator`好像`Denominator`整数总是包含在分数中一样。它应该注意分子大于分母的情况，当它们相等时等等。这是`Reduce()`方法：

```
private void Reduce()
{
    if (Numerator < Denominator)
    {
        WholeNumber = 0;
        return;
    }
    if (Numerator == Denominator)
    {
        WholeNumber = 1;
        Numerator = 0;
        return;
    }
    if (Numerator > Denominator)
    {
        WholeNumber = (int)Math.Floor((decimal)Numerator / Denominator);
        Numerator = Numerator - WholeNumber * Denominator;
    }
} 
```

构造函数变为：

```
//constructor with three parameters
public Fraction(int wholenumber, int numerator, int denominator)
{
    WholeNumber = wholenumber;
    Numerator = WholeNumber * denominator + numerator;
    Denominator = denominator;

    Reduce();
}

//constructor with two parameters
public Fraction(int numerator, int denominator)
{
    WholeNumber = 0;
    Numerator = numerator;
    Denominator = denominator;
    Reduce();
} 
```

那么操作符`+()`就变成了：

```
public static Fraction operator+(Fraction firstfraction, Fraction secondfraction)
{
    if (firstfraction.Denominator == secondfraction.Denominator)
    {
        int firstProduct = (firstfraction.WholeNumber * firstfraction.Denominator) + firstfraction.Numerator;
        int secondProduct = (secondfraction.WholeNumber * secondfraction.Denominator) + secondfraction.Numerator;
        return (new Fraction(firstProduct + secondProduct, firstfraction.Denominator));
    }
    else
    {
        int commondenominator = firstfraction.Denominator * secondfraction.Denominator;
        int firstProduct = ((firstfraction.WholeNumber * firstfraction.Denominator) + firstfraction.Numerator) * secondfraction.Denominator;
        int secondProduct = ((secondfraction.WholeNumber * secondfraction.Denominator) + secondfraction.Numerator) * firstfraction.Denominator;
        return (new Fraction(firstProduct + secondProduct, commondenominator));
    }
} 
```

# javascript - jQuery：什么是“值回调”？

> ID：11302862
> 
> 赞同：7
> 
> 时间：2012-07-03T00:08:44.043
> 
> 标签：javascript, jquery

我正在学习“Learning jQuery”（第三版）。

在第 4 章：“操作 DOM”中有一节解释了称为“***值回调***”的东西。这对我来说是一个新的。

作者通过链接列表示例解释了这一点，其中每个链接的 ID*必须是唯一的*。

从书中：

> “值回调只是一个提供的函数，而不是参数的值。然后在匹配集中的每个元素调用此函数一次。从函数返回的任何数据都用作属性的新值。对于例如，我们可以使用这种技术为每个元素生成不同的 id 值，如下所示："
> 
> Chaffer，乔纳森 (2011-09-23)。学习 jQuery，第三版（第 116 页）。包出版。Kindle版。

```
jQuery(document).ready(function($){

// get all external links
   $('div.chapter a').attr({
        rel:'external',
        title:'Learn more at Wikipedia',
        id: function ( index, oldValue ) {
                return 'wikilink-' + index;
        }
    });
}) 
```

像魅力一样工作，但id: property***的机制让我望而却步。***

1.  **参数 1（索引）**如何*****知道***是整数？**
***   该函数如何知道***增加***索引？*   第二个参数（oldValue）如何知道保存属性的旧值（修改前）？*   这是一个 jQuery 构造吗？一个 JSON 的东西？这个很酷。它有效，但是......这个“价值回调”到底***是由什么组成的？*****

 **请指教

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T00:15:07.447

> 1）参数1（索引）如何知道是整数？

jQuery 传递一个整数。

> 2）函数如何知道增加索引？

回调不会递增`index`，jQuery 方法会。

> 3）第二个参数（oldValue）如何知道保存属性的旧值（修改前）？

jQuery 通过它。

问题 1-3 的答案可能最好通过执行类似于以下操作的函数来理解`$.attr`：

```
Array.prototype.each = function (f) {
    var i;
    for (i=0; i < this.length; ++i) {
        f(i, this[i]);
    }
};

['zero', 'one', 'two'].each(function (i,item) {console.log({i: item})}); 
```

`f`是一个回调。`each`负责迭代集合并调用`f`每个索引和项目。相同的代码结构可用于函数：

```
/* Map each item in a sequence to something else, 
 * returning a new sequence of the new values.
 */
Array.prototype.map = function (f) {
    var i, result = [];
    for (i=0; i < this.length; ++i) {
        result[i] = f(i, this[i]);
    }
    return result;
};

['zero', 'one', 'two'].map(function(i,item) {return item.length});
// result: [4, 3, 3]

/* Return a sequence of the items from this sequence 
 * for which 'keep' returns true.
 */
Array.prototype.filter = function (keep) {
    var i, result = [];
    for (i=0; i < this.length; ++i) {
        if (keep(i, this[i])) {
            result.push(this[i]);
        }
    }
    return result;
};

['zero', 'one', 'two'].filter(function(i,item) {return item.length <= 3});
// result: ['one', 'two'] 
```

的实施`mapconcat`，[`foldl`并`foldr`](http://en.wikipedia.org/wiki/Fold_%28higher-order_function%29)留作练习。作为另一个练习`map`，`filter`根据`each`.

请注意，这些函数仅用于说明回调如何工作。它们可能会导致生产代码出现问题。

> 4) 这是一个 jQuery 构造吗？一个 JSON 的东西？这个很酷。它有效，但是......这个“价值回调”到底是由什么组成的？

[回调](https://stackoverflow.com/q/5485495/)是 jQuery 广泛使用的一种通用技术。它们是[函数式编程](http://en.wikipedia.org/wiki/Functional_programming)的关键特性，其中函数是可以像其他数据类型一样操作的数据。因此，您拥有将函数作为参数并可以返回函数的函数。在某些情况下，[回调](https://stackoverflow.com/q/7070495/)也称为“延续”，并构成[延续传递风格](http://marijn.haverbeke.nl/cps/)( [CPS](http://blogs.msdn.com/b/wesdyer/archive/2007/12/22/continuation-passing-style.aspx) ) 的基础。这对于[异步函数调用](https://stackoverflow.com/q/748175/)[ [2 ]（与](https://softwareengineering.stackexchange.com/q/104816/)[同步调用](http://www.bisque.com/help/CCDSoft/asynchronous_vs._synchronous_execution.htm)相反，函数在计算完成之前返回）尤其重要，例如用于 Ajax 请求。要了解 CPS 的一些功能，请阅读[“使用延续开发复杂的 Web 应用程序”](http://www.ibm.com/developerworks/java/library/j-contin/index.html)。

另一方面，“值回调”中的“值”是，由于 JS 是一种动态类型语言（类型与数据相关联，而不是变量），形式参数可以绑定到任何类型的对象。然后，函数可以根据传递的内容而表现不同。有时这是通过检查参数的类型来实现的，这实际上是[临时多态性](http://en.wikipedia.org/wiki/Ad-hoc_polymorphism)（函数而不是语言必须处理调度）。然而，[参数多态性](http://en.wikipedia.org/wiki/Parametric_polymorphism)或（失败）[鸭子类型](http://en.wikipedia.org/wiki/Duck_typing)应该始终优先于检查参数类型。参数多态性是通过确保可以传递给给定函数的所有类型都支持相同的接口（方法名称、参数、前置条件、后置条件等）来实现的。例如，所有的序列类型都应该有一个`length`属性并由整数索引；只要这一点成立，您就可以将自己的序列类型与许多采用数组的函数一起使用。

我不确定您所说的 JSON 是什么意思，但这可能不是通常的意思。JSON 是一种基于 JS 对象文字语法的受限版本的数据交换格式。示例代码或引用文本中的任何地方都没有涉及 JSON。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T00:15:07.090

这是一个 JQuery 结构。如果您查看源代码，您会发现 JQuery 正在检查参数以了解您传递的是值还是函数。如果它是一个函数，它会如您所见那样处理。**

# java - 如何使用来自 Java 服务器的 JSON 将图像发送到 Javascript 客户端

> ID：11302863
> 
> 赞同：2
> 
> 时间：2012-07-03T00:09:19.913
> 
> 标签：java, json, google-api, signpost

我正在使用 Google Contacts API，我收到了所有数据并作为字符串发送到 JSON（javascript），但是当我从联系人获取图像时，我可以接收图像。如何将其发送到 JSON？如何将图像文件发送到 URL？（我可以使用路标吗？）

```
if (photoLink.getEtag() != null) {
 GDataRequest request = myService.createLinkQueryRequest(photoLink);
 request.execute();                                                                                    
 // No Authentication header information  
 InputStream stream = request.getResponseStream();    
 Image image=  ImageIO.read(stream);
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T00:16:29.850

如果您尝试使用 JSON 发送编码为数据的实际图像，则只需发送一个 HTML`img`标记，其`src`属性包含编码的图像数据，如下所示：

```
<img src="data:image/png;base64,R0lGODlhEAAOALMAAOazToeHh0tLS/7LZv/0jvb29t/f3//Ub/
/ge8WSLf/rhf/3kdbW1mxsbP//mf///yH5BAAAAAAALAAAAAAQAA4AAARe8L1Ekyky67QZ1hLnjM5UUde0ECwLJoExKcpp
V0aCcGCmTIHEIUEqjgaORCMxIC6e0CcguWw6aFjsVMkkIr7g77ZKPJjPZqIyd7sJAgVGoEGv2xsBxqNgYPj/gAwXEQA7"> 
```

浏览器支持列表（包括 Android 浏览器和 iOS Safari：

[http://en.wikipedia.org/wiki/Data_URI_scheme#Web_browser_support](http://en.wikipedia.org/wiki/Data_URI_scheme#Web_browser_support)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T00:16:58.837

您应该简单地使用一个 servlet 来发送图像，并在 JSON 中发送一些 url 变量。（如`?pic_id=034enifuwbf0329`.

您*可以*使用内联图像，但这在某些 IE 版本上会失败，而另一种解决方案与浏览器无关。

# rspec - 在请求规范中传递 cookie

> ID：11302867
> 
> 赞同：10
> 
> 时间：2012-07-03T00:09:46.863
> 
> 标签：rspec, rspec2, rspec-rails

我正在尝试使用 rspec 2 和 rails 3 在执行 GET 请求时传递 cookie。

到目前为止，我已经尝试过以下方法。

```
get "/", {}, {"Cookie" => "uuid=10"} # cookies[:uuid] is nil
request.cookies[:uuid] = 10 # request is nil
@request.env["Cookie"] = "uuid=10" # @request is nil
helper.request.cookies[:uuid] # helper is not defined
cookies[:uuid] = 10 # cookies[:uuid] is nil
controller.cookies[:uuid] = 10 # cookies is nil 
```

可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-06-15T13:47:58.930

根据[这个答案](https://stackoverflow.com/a/23601146/175981)，您可以`cookies`在请求规范中使用该方法：

```
before { cookies['foo'] = 'bar' } 
```

我尝试了@phoet 的解决方案`ActionDispatch::Request.any_instance.stubs`，但它在 RSpec 3.4 中引发错误以及看似无关的弃用消息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T06:36:11.333

我有一个类似的问题，我没有找到合适的解决方案。

[rspec-rails 文档](https://www.relishapp.com/rspec/rspec-rails/docs/controller-specs/cookies)指出它应该是可能的：

```
# spec
request.cookies['foo'] = 'bar'
get :some_action
response.cookies['foo'].should eq('modified bar') 
```

在我的规范`request`中总是`nil`在执行获取之前。

我现在在嘲笑饼干：

```
before { ActionDispatch::Request.any_instance.stubs(cookies: {locale: :en}) } 
```

[这家伙](https://groups.google.com/forum/?fromgroups=#!topic/rspec/dHZCApH5MGA)也有类似的问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-12-04T11:14:18.777

在 RSpec 请求测试中对我有用的是显式传递 HTTP Cookie 标头：

```
 before do
    get "/api/books", headers: { Cookie: "auth=secret" }
  end 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-03-09T19:21:05.530

一开始我对你是怎么做的有点困惑，但实际上很容易。在 Rails 的 ActionDispatch::IntegrationTest 内部（或者在 rspec 的情况下是`:request`规范），您可以访问 cookies 变量。

它是这样工作的：

```
# set up your cookie
cookies["fruits"] = ["apple", "pear"]

# hit your endpoint
get fruits_path, {}, {}

# this works!
expect(cookies["fruits"]).to eq(["apple", "pear"]) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-12-06T03:50:51.360

在`spec/requests/some_spec.rb`您可以使用`Rack::Test::Methods`来设置和读取cookies。

```
describe 'Something' do

  include Rack::Test::Methods

  it 'can set cookies' do
    set_cookie "foo=red"
    post '/some/endpoint', params, headers
    expect(last_request.cookies[:foo]).to eq('red')
  end

end 
```

文档：
[http ://www.rubydoc.info/github/brynary/rack-test/Rack/MockSession#set_cookie-instance_method](http://www.rubydoc.info/github/brynary/rack-test/Rack/MockSession#set_cookie-instance_method)

# java - 辅助Namenode未启动

> ID：11302870
> 
> 赞同：4
> 
> 时间：2012-07-03T00:10:07.213
> 
> 标签：java, hadoop

设置 hadoop 1.0.3 版后出现此错误：

$bin/start-all.sh

```
Warning: $HADOOP_HOME is deprecated.

starting namenode, logging to /var/log/hadoop/daley/hadoop-daley-namenode-datapath3.cise.ufl.edu.out
localhost: starting datanode, logging to /var/log/hadoop/daley/hadoop-daley-datanode-datapath3.cise.ufl.edu.out
localhost: starting secondarynamenode, logging to /var/log/hadoop/daley/hadoop-daley-secondarynamenode-datapath3.cise.ufl.edu.out
localhost: Exception in thread "main" java.lang.IllegalArgumentException: Does not contain a valid host:port authority: file:///
localhost:  at org.apache.hadoop.net.NetUtils.createSocketAddr(NetUtils.java:162)
localhost:  at org.apache.hadoop.hdfs.server.namenode.NameNode.getAddress(NameNode.java:198)
localhost:  at org.apache.hadoop.hdfs.server.namenode.NameNode.getAddress(NameNode.java:228)
localhost:  at org.apache.hadoop.hdfs.server.namenode.NameNode.getServiceAddress(NameNode.java:222)
localhost:  at org.apache.hadoop.hdfs.server.namenode.SecondaryNameNode.initialize(SecondaryNameNode.java:161    )
localhost:  at org.apache.hadoop.hdfs.server.namenode.SecondaryNameNode.<init>(SecondaryNameNode.java:129)
localhost:  at org.apache.hadoop.hdfs.server.namenode.SecondaryNameNode.main(SecondaryNameNode.java:567)
starting jobtracker, logging to /var/log/hadoop/daley/hadoop-daley-jobtracker-datapath3.cise.ufl.edu.out
localhost: starting tasktracker, logging to /var/log/hadoop/daley/hadoop-daley-tasktracker-datapath3.cise.ufl.edu.out 
```

我从谷歌得到的唯一解决方案是设置 fs.default.name 我已经设置为 hdfs://localhost:9100

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:14:24.610

从你提供的错误信息来看，问题可能是secondary namenode的端口被占用了，可能是被同一台机器上的另一个hadoop系统占用了。所以设置配置 fs.default.name 是一个好办法。另一种方法是杀死占用端口的进程，这可能会导致另一个服务崩溃。

# linux - 防止 SIGPIPE

> ID：11302873
> 
> 赞同：3
> 
> 时间：2012-07-03T00:11:36.277
> 
> 标签：linux, signals, posix, ipc, sigpipe

让我们考虑以下示例。

我有一个父进程创建一个管道，生成一个子进程并使用该管道读取子进程的标准输出。在某些时候，父进程不再对子进程的输出感兴趣，并关闭管道的读取端。

显然，如果孩子继续写，这是否会导致子进程收到`SIGPIPE`信号。

问题：有没有办法将子进程的输出重定向到`/dev/null`它仍然继续运行并产生输出，但父进程可以继续做其他事情并`waitpid`稍后调用子进程？请注意，将孩子的`SIGPIPE`处理程序设置`SIG_IGN`为不是一个选项，因为我无法控制孩子的信号处理程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T00:20:30.037

模仿`/dev/null`自己——`fork()`一个新的过程，它的工作是阅读并忽略孩子的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T00:14:23.157

> 请注意，将孩子的 SIGPIPE 处理程序设置为 SIG_IGN 不是一个选项，因为我无法控制孩子的信号处理程序。

将其包装在一个简单的二进制文件中。（即使是 shellscript 也可以。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T09:52:33.697

当两个组件之间的管道破裂时，会发生 Sigpipe。

您可以通过以下方式忽略信号管道

信号（SIGPIPE，SIG_IGN）；

# wpf - 使组合框的下拉菜单更短？

> ID：11302874
> 
> 赞同：1
> 
> 时间：2012-07-03T00:11:42.813
> 
> 标签：wpf, vb.net, visual-studio-2010

轻微的困惑。我有一个数据绑定到字符串列表的组合框。在过去，如果我只有一两个东西，我记得组合框很短。但是现在组合框大约有 5 个项目的高度，即使少于 5 个项目（空白下拉列表的高度）也是如此。我需要改变什么来解决这个问题？我玩过 Maxdropdown 没有任何变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T00:17:21.423

您可以覆盖[`Template`](http://msdn.microsoft.com/en-us/library/system.windows.controls.control.template.aspx)，如果您的控件已经使用自定义模板设置样式，则可能是该`MaxDropDownHeight`属性未正确绑定在模板内，在这种情况下更改它不会做任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T07:30:43.147

好吧，你不能轻易做到这一点，这是在组合框的模板中硬编码的：

```
 <Trigger Property="HasItems"
               Value="false">
        <Setter TargetName="DropDownBorder"
                Property="MinHeight"
                Value="95" />
      </Trigger> 
```

（来源： http: [//msdn.microsoft.com/en-us/library/ms752094](http://msdn.microsoft.com/en-us/library/ms752094) - 这不完全是 WPF 中使用的模板，但我假设他们没有改变这种行为）

所以你确实必须自己重做组合框的模板，这可不是件容易的事。

# jquery - jquery 导航菜单 div 下拉菜单

> ID：11302876
> 
> 赞同：0
> 
> 时间：2012-07-03T00:11:56.967
> 
> 标签：jquery, html, css

当您单击两个导航链接（仅限链接 1 和链接 3）时，我试图让 div 下拉。到目前为止，我只能通过单击导航块（'.navBox'）来让它下降。我怎样才能通过 href... 链接呢？请帮忙..

HTML/jQuery:

```
 $(document).ready(function(){
    $('.navBox').toggle(function(){
        $('.lowerContainer').slideDown();
    }, function(){
        $('.lowerContainer').slideUp();
    });
});

<div id="header">
    <div class="wrapper">
        <div class="logoBox">
                Logo
        </div>
        <div class="navBox">
            <ul>
                <li><a href="#">Link 1</a></li>
                <li><a href="#">Link 2</a></li>
                <li><a href="#">Link 3</a></li>
                <li><a href="#">Link 4</a></li>
                <li><a href="#">Link 5</a></li>
            </ul>
        </div>
    </div>
</div>
<div class="lowerContainer" style="display: none;">
    <div class="lowerWrapper">
        <div id="boxed">
        </div>
    </div>
</div>
<div class="mainContent">
    <div class="contentArea">
        <div class="sportsIcons">
            <div id="boxed">
            </div>
        </div>

    </div>
</div>
    <br/>
    <div class="line">
    </div>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T00:15:30.717

最好的方法：给这些链接一个类并选择它们。

一种适用于您当前 DOM 结构的方法：

```
$('div.navBox a').filter(function(){
    return this.innerHTML == "Link 1" &&
           this.innerHTML == "Link 3";
}).whatYouWant(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T00:15:45.950

使用 $('.navBox ul li a') 或给链接一个类名，然后使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T00:22:16.883

```
$('a:contains("Link 1"), a:contains("Link 3")', '.navBox').on('click', function(e){
    e.preventDefault();
    $('.lowerContainer').slideToggle();
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T03:19:59.557

您可以重新排序标记，以便您拥有：

```
<ul>
    <li>
        <a href="#">menu item</a>
        <div>Dropdown</div>
    </li>
    <li>
        <a href="#">menu item</a>
        <div>Dropdown</div>
    </li>
</ul> 
```

这样你就可以解决它：

```
$('ul li a').click(function() {
    $(this).next().show();
}); 
```

# r - 使用子集（）进行矢量化？

> ID：11302883
> 
> 赞同：0
> 
> 时间：2012-07-03T00:12:44.533
> 
> 标签：r, vectorization, subset

我有一个`scores`( `V3`) 的数据框，用于一系列整数范围 ( `V1`to `V2`)。

```
scores <- structure(list(V1 = c(2037651L, 2037659L, 2037677L, 2037685L, 
  2037703L, 2037715L), V2 = c(2037700L, 2037708L, 2037726L, 2037734L, 
  2037752L, 2037764L), V3 = c(1.474269, 1.021012, 1.180993, 1.717131, 
  2.361985, 1.257013)), .Names = c("V1", "V2", "V3"), class = "data.frame", 
  row.names = c(NA, -6L))

    V1      V2      V3
1 2037651 2037700 1.474269
2 2037659 2037708 1.021012
3 2037677 2037726 1.180993
4 2037685 2037734 1.717131
5 2037703 2037752 2.361985
6 2037715 2037764 1.257013 
```

我也有一个整数向量。

```
 coords <- structure(list(V1 = c(2037652, 2037653, 2037654, 2037655, 2037656, 
 2037657, 2037658, 2037659, 2037660, 2037661, 2037662, 2037663, 
 2037664, 2037665, 2037666, 2037667, 2037668, 2037669, 2037670, 
 2037671)), .Names = "V1", row.names = c(NA, -20L), class = "data.frame") 
```

对于每个整数 (in `coords`)，我想确定`scores$V3`其整数范围 (scores `V1`to `V2`) 包含的所有分数 (in ) 的平均值`coord$V1`。为此，我尝试了：

```
for(i in 1:nrow(coord)){
    range_scores <- subset(scores, 
                           scores$V1 <= coord$V1[i] & scores$V2 >= coord$V1[i])
    coord$V2[i] <- mean(range_scores$V3)
} 
```

该功能有效，但速度极慢。

我怎样才能更有效地完成同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T01:03:23.870

`coord$V2 <- sapply(coord$V1, function(x) mean(scores[scores[, 2] >= x & x >= scores[, 1], 3]))`大约快一倍。

首先，重新创建您的数据：

```
scores <- read.table(text="       V1      V2      V3
1 2037651 2037700 1.474269
2 2037659 2037708 1.021012
3 2037677 2037726 1.180993
4 2037685 2037734 1.717131
5 2037703 2037752 2.361985
6 2037715 2037764 1.257013", row.names=1)

coord <-data.frame(V1=c(2037652, 2037653, 2037654, 2037655, 2037656, 2037657, 2037658, 
           2037659, 2037660, 2037661, 2037662, 2037663, 2037664, 2037665, 
           2037666, 2037667, 2037668, 2037669, 2037670, 2037671)) 
```

制作功能和基准：

```
gsee <- function(coord) {
    coord$V2 <- sapply(coord$V1, function(x) mean(scores[scores[, 2] >= x & x >=  scores[, 1], 3]))
    coord
}

orig <- function(coord) {
    for(i in 1:NROW(coord)){
        range_scores<-subset(scores, scores$V1 <= coord$V1[i] & scores$V2 >= coord$V1[i]);
        coord$V2[i]<-mean(range_scores$V3)
    }
    coord
}
identical(gsee(coord), orig(coord))  # TRUE
benchmark(orig=orig(coord), gsee=gsee(coord))

test replications elapsed relative user.self sys.self user.child sys.child
2 gsee          100   0.175 1.000000     0.175    0.000          0         0
1 orig          100   0.379 2.165714     0.377    0.002          0         0 
```

* * *

编辑： `lapply`每个@Sepehr 稍微好一点。

```
sepehr <- function(coord) {
    coord$V2 <- unlist(lapply(coord$V1, function(x) mean(scores[scores[, 2] >= x & x >=  scores[, 1], 3])))
    coord
}
benchmark(orig=orig(coord), gsee=gsee(coord), sepehr=sepehr(coord))
test replications elapsed relative user.self sys.self user.child sys.child
2   gsee          100   0.171 1.023952     0.171    0.000          0         0
1   orig          100   0.369 2.209581     0.369    0.001          0         0
3 sepehr          100   0.167 1.000000     0.167    0.000          0         0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T01:57:57.923

这是我提出的解决方案：

```
scores = read.table(header=FALSE,
                    text="2037651 2037700 1.474269
                          2037659 2037708 1.021012
                          2037677 2037726 1.180993
                          2037685 2037734 1.717131
                          2037703 2037752 2.361985
                          2037715 2037764 1.257013")

coord = data.frame(V1=c(2037652, 2037653, 2037654, 2037655, 2037656, 2037657,
                     2037658, 2037659, 2037660, 2037661, 2037662, 2037663,
                     2037664, 2037665, 2037666, 2037667, 2037668, 2037669,
                     2037670, 2037671))

coord_vec = coord$V1                  # Store as a vector instead of data.frame
scores_mat = as.matrix(scores)        # Store as a matrix instead of data.frame
results = numeric(length=nrow(coord)) # Pre-allocate vector to store results.

for (i in 1:nrow(coord)) {
    select_rows = ((scores_mat[, 1] <= coord_vec[i]) & 
                   (scores_mat[, 2] >= coord_vec[i]))
    scores_subset = scores_mat[select_rows, 3] # Use logical indexing.
    results[i] = mean(scores_subset)
}
results
#  [1] 1.474269 1.474269 1.474269 1.474269 1.474269 1.474269 1.474269 1.247641
#  [9] 1.247641 1.247641 1.247641 1.247641 1.247641 1.247641 1.247641 1.247641
# [17] 1.247641 1.247641 1.247641 1.247641

# Benchmark results using @GSee's code. Needs library(rbenchmark).
#        test replications elapsed relative user.self sys.self
# 4 bdemarest          100   0.046 1.000000     0.046    0.001
# 2      gsee          100   0.170 3.695652     0.170    0.001
# 1      orig          100   0.358 7.782609     0.360    0.001
# 3    sepehr          100   0.163 3.543478     0.164    0.000 
```

它似乎比其他提案快很多。我很确定通过避免读取或写入 data.frame（高开销函数）可以获得优势。此外，我使用逻辑索引而不是`subset()`进一步减少开销。使用 *ply 策略可能会更快吗？

# python - 解析 Sphinx 之类的文档

> ID：11302885
> 
> 赞同：4
> 
> 时间：2012-07-03T00:12:49.180
> 
> 标签：python, parsing, python-sphinx, docstring

我有一个 Sphinx 格式的文档字符串，我想从中提取不同的部分（参数、返回、类型、rtype 等）以进行进一步处理。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T16:51:51.780

您可以使用[docutils](http://docutils.sourceforge.net/)，这是 Sphinx 的基础。在[另一个答案](https://stackoverflow.com/a/10782270/623518)中，我使用`docutils.core.publish_doctree`获取 reStructuredText 文档（实际上是文本字符串）的 XML 表示，然后使用 xml.minidom 方法从该 XML 中提取字段列表。另一种方法是使用 xml.etree.ElementTree，在我看来它更容易使用。

然而，首先，每次 docutils 遇到 reStructuredText 块时

```
:param x: Some parameter 
```

生成的 XML 表示是（我知道，它非常冗长）：

```
<field_list>
    <field>
        <field_name>
            param x
        </field_name>
        <field_body>
            <paragraph>
                Some parameter
            </paragraph>
        </field_body>
    </field>
</field_list> 
```

以下代码将获取文档中的所有元素，`field_list`并将文本作为 2 元组放入列表中。然后，您可以按照您希望的方式进行后期处理。`field/field_name``field/field_body/paragraph`

```
from docutils.core import publish_doctree
import xml.etree.ElementTree as etree

source = """Some help text

:param x: some parameter
:type x: and it's type

:return: Some text
:rtype: Return type

Some trailing text. I have no idea if the above is valid Sphinx
documentation!
"""

doctree = publish_doctree(source).asdom()

# Convert to etree.ElementTree since this is easier to work with than
# xml.minidom
doctree = etree.fromstring(doctree.toxml())

# Get all field lists in the document.
field_lists = doctree.findall('field_list')

fields = [f for field_list in field_lists \
    for f in field_list.findall('field')]

field_names = [name.text for field in fields \
    for name in field.findall('field_name')]

field_text = [etree.tostring(element) for field in fields \
    for element in field.findall('field_body')]

print zip(field_names, field_text) 
```

这产生了列表：

```
[('param x', '<field_body><paragraph>some parameter</paragraph></field_body>'),
 ('type x', "<field_body><paragraph>and it's type</paragraph></field_body>"), 
 ('return', '<field_body><paragraph>Some text</paragraph></field_body>'), 
 ('rtype', '<field_body><paragraph>Return type</paragraph></field_body>')] 
```

所以每个元组中的第一项是字段列表项（即`:return:`等`:param x:`），第二项是相应的文本。显然这个文本不是最干净的输出——但是上面的代码很容易修改，所以我把它留给 OP 来获得他们想要的确切输出。

# jquery - 在 CSS 中查找第一个可见的表格行

> ID：11302886
> 
> 赞同：1
> 
> 时间：2012-07-03T00:13:09.220
> 
> 标签：jquery, css, jquery-selectors, css-selectors

如果我有这样的表格布局：

```
<table>
  <tr class="one">
    <td>
      ...
    </td>
  </tr>
  <tr class="two">
    <td>
      ...
    </td>
  </tr>
  <tr class="three">
    <td>
      ...
    </td>
  </tr>
  <tr class="four">
    <td>
      ...
    </td>
  </tr>
</table> 
```

找到第一个显示行的最简单方法是什么？我这样说是因为某些行类可能将“显示：无”设置为过滤过程的一部分。

我以为：

```
tr:first-child 
```

会起作用，但事实证明隐藏行时不起作用！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T00:16:41.450

如果你可以使用`jQuery`它很简单：

```
$('tr:visible:first').foo(); 
```

没有javascript，您将无法做到这一点。

如果速度对您来说非常重要，这会更快一些：

```
$('tr').filter(':visible').first().foo(); 
```

文件：

> **因为 :visible 是一个 jQuery 扩展**而不是 CSS 规范的一部分，所以**使用 :visible 的查询不能利用**原生 DOM querySelectorAll() 方法提供的性能提升。为了在使用 :visible 选择元素时获得最佳性能，**首先使用纯 CSS 选择器选择元素，然后使用 .filter(":visible")。**

# php - Doctrine 2 映射 Yaml 的问题

> ID：11302890
> 
> 赞同：0
> 
> 时间：2012-07-03T00:13:45.447
> 
> 标签：php, symfony1, doctrine, doctrine-orm, yaml

我正在努力使这些映射正确，但我似乎无法并且希望得到一些建议......

```
Entities\User:
  type: entity
  oneToMany:
    citations:
      targetEntity: Citation
      mappedBy: user
      cascade: ["all"]

Entities\Citation:
  type: entity
  manyToOne:
    item:
      targetEntity: Item
      inversedBy: citations
      joinColumn:
        name: item_id
        referencedColumnName: id
  manyToOne:
    user:
      targetEntity: User
      inversedBy: citations
      joinColumn:
        name: user_id
        referencedColumnName: id

Entities\Item:
  type: entity
  oneToMany:
    authors:
      targetEntity: Author
      mappedBy: item
      cascade: ["all"]
  oneToMany:
    citations:
      targetEntity: Citation
      mappedBy: item

Entities\Author:
  type: entity
  manyToOne:
    item:
      targetEntity: Item
      inversedBy: authors 
```

我从模式验证器工具得到的错误是：

> [映射] FAIL - 实体类 'Entities\Item' 映射无效： * 关联 Entities\Item#citations 指的是不存在的拥有方字段 Entities\Citation#item。
> 
> [映射] FAIL - 实体类 'Entities\Citation' 映射无效： * 关联 Entities\Citation#user 指的是不存在的反向侧字段 Entities\User#citations。
> 
> [映射] FAIL - 实体类 'Entities\Author' 映射无效： * 关联 Entities\Author#item 指的是不存在的反边字段 Entities\Item#authors。

如您所见，我有反面，为什么看不到它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T00:15:40.933

您是否在类上创建了相关属性（在 php 文件中）？

即： Entities\Citation 是否有项目属性？..`property $item;`

# mysql - 带有 WHERE NOT EXISTS 的 SQL 子查询

> ID：11302893
> 
> 赞同：2
> 
> 时间：2012-07-03T00:14:13.443
> 
> 标签：mysql, subquery

我想选择你的角色在过去 24 小时内没有挑战过的所有角色。

```
 SELECT * FROM challenges
 WHERE userCharID = 642 AND chalTime > DATE_SUB(CURDATE(), INTERVAL 1 DAY) 
```

这将返回几行您的角色在过去一天发起的挑战

```
SELECT characterID FROM CHARACTERS 
WHERE NOT EXISTS (SELECT * FROM challenges
                   WHERE userCharID = '610'
                     AND chalTime > DATE_SUB(CURDATE(), INTERVAL 1 DAY)) 
```

我使用 WHERE NOT EXISTS 错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T00:35:31.803

> 我使用 WHERE NOT EXISTS 错误吗？

是的。您想使用 NOT IN 而不是 NOT EXISTS。如果您使用 NOT EXISTS 并且不存在的子查询返回任何行，则条件将为 false 并且主查询不会返回任何数据。如果没有返回任何行，则条件为真，并且所有行都将由主查询返回（因为在此示例中，主查询中没有其他条件）。通常，NOT EXISTS 中的子查询是相关子查询，因此必须针对每一行评估子查询。在这里，您没有相关的子查询（这有利于性能）。但是您的查询意味着“返回有关所有字符的信息，除非存在某个在最后一天被指定用户挑战的字符”。

（*在此分析中，我悄悄地更改了 SQL，以便`userCharID`始终与字符串进行比较，并`'642'`专门与值进行比较。*）

> 选择您的角色 [*已*] 在过去 24 小时内挑战的所有角色：
> 
> ```
> SELECT *
>   FROM Challenges
>  WHERE userCharID = '642'
>    AND chalTime > DATE_SUB(CURDATE(), INTERVAL 1 DAY) 
> ```
> 
> 这将返回几行您的角色在过去一天发起的挑战。

所以，要找到所有你没有挑战的人，你需要选择除了你挑战的列表中的用户之外的所有用户，这意味着：

```
SELECT characterID
  FROM Characters 
 WHERE userCharID NOT IN
       (SELECT userCharID
          FROM Challenges
         WHERE userCharID = '642'
           AND chalTime > DATE_SUB(CURDATE(), INTERVAL 1 DAY)
       ) 
```

这应该会为您提供（可能相当大）您在过去 24 小时内未挑战过的角色列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T00:22:42.313

[WHERE NOT EXISTS](http://dev.mysql.com/doc/refman/5.0/en/exists-and-not-exists-subqueries.html)在子查询的上下文中根据结果返回 TRUE 或 FALSE。

> 如果子查询完全返回任何行，则 EXISTS 子查询为 TRUE，而 NOT EXISTS 子查询为 FALSE。

在您的情况下，这意味着如果

```
(SELECT * FROM challenges
WHERE userCharID = '610' AND chalTime > DATE_SUB(CURDATE(), INTERVAL 1 DAY)) 
```

然后返回任何行

您的查询将被评估为

```
SELECT characterID FROM CHARACTERS WHERE FALSE; 
```

这显然不是你想要的。

您可以改用[IN](http://dev.mysql.com/doc/refman/5.0/en/any-in-some-subqueries.html)运算符：

```
SELECT characterID FROM CHARACTERS 
WHERE characterID NOT IN (SELECT characterID FROM challenges
WHERE userCharID = '610' AND chalTime > DATE_SUB(CURDATE(), INTERVAL 1 DAY)) 
```

第二个`characterID`（子查询中的那个）**需要是与您的 CHARACTERS 表中的 characterID 对应的字段**，这可能是您的 userCharID，尽管我对此表示怀疑，因为您的 where 子句。没有架构，我无法确定。

您可以使用的其他选项是直接[从子查询](http://dev.mysql.com/doc/refman/5.0/en/from-clause-subqueries.html)中选择，或者在某些情况下通过[连接](http://dev.mysql.com/doc/refman/5.6/en/join.html)获取数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T16:04:20.850

您的 NOT EXIST 查询非常接近。您所缺少的只是子查询与 characterID 上的外部查询之间的相关性。

我刚刚`c`在您的外部查询中为表添加了别名，在子查询中为表添加了别名`d`，并在子查询中的 WHERE 子句中添加了一个谓词

```
SELECT characterID FROM CHARACTERS c 
WHERE NOT EXISTS (SELECT * FROM challenges d
                   WHERE d.userCharID = '610'
                     AND d.chalTime > DATE_SUB(CURDATE(), INTERVAL 1 DAY)
                     AND d.characterID = c.characterID) 
```

这里的“技巧”是`d.characterID`（从子查询中的表）到`c.characterID`（从外部查询中的表）的相关匹配。

因此，查询正在检查该外部表中的*每个*字符，我们的用户在过去 24 小时内是否与*该*用户有过挑战。因此，此查询将返回您指定的结果集。

但是......如果您有一组相对较大的字符，而一个相对较小的字符集受到挑战，这不太可能是返回结果集的最快查询。

* * *

获取结果集的另一种方法是使用带有 IS NULL 谓词的 LEFT JOIN（我们将其称为“反连接”）。如果此查询：

```
SELECT d.characterID
  FROM challenges d
 WHERE d.userCharID = 642
   AND d.chalTime > DATE_SUB(CURDATE(), INTERVAL 1 DAY)
 GROUP BY d.characterID 
```

返回已被挑战的所有 characterID 的列表，这是您要从所有字符集中排除的字符集，然后您可以将该查询用作内联视图，如下所示：

```
SELECT n.characterID
  FROM characters n
  LEFT
  JOIN (
         SELECT d.characterID
           FROM challenges d
          WHERE d.userCharID = 642
            AND d.chalTime > DATE_SUB(CURDATE(), INTERVAL 1 DAY)
          GROUP BY d.characterID
       ) c
    ON c.characterID = n.characterID
 WHERE c.characterID IS NULL 
```

在这里，我们获取所有字符 (n) 的列表，并将它们与已被挑战的字符列表进行匹配（子查询别名为 c）。我们使用`LEFT JOIN`操作是因为我们想要字符表中的所有行，无论是否找到匹配项。

WHERE 子句然后抛出我们找到匹配的所有行，所以我们剩下的是没有被挑战的字符集。

* * *

在我对大集合的测试中，这通常会优于 a`NOT EXISTS`和 a `NOT IN`（当有适当的索引可用时）。但有时我发现 a`NOT IN`更快，有时 the`NOT EXISTS`更快。

我发现最好将所有三种方法都“装在口袋里”，并使用最合适的方法。我通常从反连接模式开始（这是我习惯写的），然后测试`NOT EXISTS`和`NOT IN`比较性能。

# c++ - 我可以在 Visual Studio 2008 中标记断点吗？

> ID：11302896
> 
> 赞同：1
> 
> 时间：2012-07-03T00:15:00.833
> 
> 标签：c++, debugging, visual-studio-2008

有没有办法在 MS VS 2008 中命名（标记）断点？

我知道 2010 具有该功能，但我仍然坚持使用 2008，因为我不确定从 2008 年到 2010 年的开销是多少。

促使我在这里发布这个问题的是，有一个名为“名称”的列似乎是灰色的。

我猜这可能会让我实现我想要的，但我不确定如何启用它。

编辑 1：我正在尝试使用 C++ 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T00:56:34.957

根据 msdn 文档，没有。

有一篇关于标记断点的msdn文章：

[http://msdn.microsoft.com/en-us/library/dd293674.aspx](http://msdn.microsoft.com/en-us/library/dd293674.aspx)

它描述了如何为 VS 2010 执行此操作。屏幕顶部有一个下拉菜单，显示“其他版本”，仅允许您选择 VS 2012。所以不，您不能在 VS 2008 中执行此操作。抱歉！

# ruby-on-rails - Rails 3.2 中使用 gmail 或 SendGrid 的邮件验证错误

> ID：11302900
> 
> 赞同：3
> 
> 时间：2012-07-03T00:15:16.627
> 
> 标签：ruby-on-rails, smtp, gmail, actionmailer

我正在尝试从一个非常简单的 Rails 3.2 应用程序设置邮件。尝试过 Gmail，尝试过 SendGrid。得到同样的错误。

```
Net::SMTPAuthenticationError in UsersController#create
530-5.5.1 Authentication Required 
```

这是我的环境/development.rb 部分

```
# Care if the mailer can't send
config.action_mailer.raise_delivery_errors = true

# Change mail delivery to either :smtp, :sendmail, :file, :test
config.action_mailer.delivery_method = :smtp
config.action_mailer.smtp_settings = {
  address: "smtp.gmail.com",
  port: 587,
  domain: "signaldesign.net",
  authentication: "plain",
  enable_starttls_auto: true,
  user_name: ENV["gmailusername"],
  password: ENV["gmailpassword"]
} 
```

这是我的 users_controller

```
def create
  @user = User.new(params[:user])
  if @user.save
    UserMailer.signup_confirmation(@user).deliver
    sign_in @user
    flash[:success] = "Welcome!"
    redirect_to @user
  else
    render 'new'
  end
end 
```

我难住了。我在网上找到的任何建议都没有任何作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T14:55:32.283

我想到了。我最终只好删除一些东西然后再试一次。

我从以下位置更改了我的 smtp_settings 用户名和密码：

```
user_name: ENV["gmailusername"],
password: ENV["gmailpassword"] 
```

至

```
user_name: "gmailusername",
password: "gmailpassword" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:41:59.767

Meanwhile the [gem dotenv](https://github.com/bkeepers/dotenv) changed its implementation. You can now use your `ENV` settings to initialize the `ActionMailer`. I verified this with `dotenv v.0.7.0`. Make sure you load the environment variables. Autoloading has been **removed** from the gem. Read [here](https://github.com/bkeepers/dotenv#sinatra-or-plain-ol-ruby).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T01:05:55.593

尝试将域更改为`localhost.localdomain`

# python - 您认为在 python 中创建数据映射层的最佳方法是什么？

> ID：11302901
> 
> 赞同：0
> 
> 时间：2012-07-03T00:15:25.363
> 
> 标签：python, datamapper, postgresql-9.1, pgbouncer

我希望听到一些关于在一些 python 对象和 postgres 数据库之间创建轻量级数据映射层的最佳方法的意见。我正在使用 psycopg2 库，并计划使用 pgbouncer。我看了这个：[http](http://codeinthehole.com/writing/domain-model-mapper-a-php-data-mapper-implementation/) ://codeinthehole.com/writing/domain-model-mapper-a-php-data-mapper-implementation/的基本想法，但不清楚他们是如何关闭连接之后查询。我正在构建的组件类似于论坛，因为它有您熟悉的用户、帖子、论坛表格等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T00:18:25.293

最好的方法不是创建新层，而是使用现有层。 [SQLAlchemy](http://www.sqlalchemy.org/)是功能最全的，但其他的也不错，比如[Storm](https://storm.canonical.com/)。

也许你可以解释为什么你想写一个新的？

# mysql - 如何使用表格中的间隔计算日期

> ID：11302903
> 
> 赞同：1
> 
> 时间：2012-07-03T00:15:31.003
> 
> 标签：mysql, date, intervals

我有一张带有`start_date`,`end_date`和间隔的表格。我想更新`end_date`的值`start_date`和间隔。

```
create table date_test (
    start_date      date,
    end_date        date,
    date_interval   varchar(45)
); 
```

我使用的值`date_interval`是`- INTERVAL 1 WEEK`, `+ INTERVAL 1 MONTH`。

我想做类似的事情：

```
UPDATE date_test SET end_date = date( concat( start_date, " ", date_interval)); 
```

但我收到这个警告：

> 1292 截断不正确的日期值：'2012-01-01 - INTERVAL 1 week'

如何强制此日期在更新之前进行评估？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T00:33:36.720

乔纳森·莱弗勒 说：

> 几乎; 不过，手册页和问题之间有一个至关重要的区别。该手册讨论了 DATE_ADD(date_value, INTERVAL '1' DAY) 等，而问题是将“字符串”值作为第二个参数。我担心这个问题需要一个函数来将字符串转换为 INTERVAL 类型。MySQL 中似乎没有“TO_INTERVAL”函数。

这是一个函数，它将日期作为第一个参数，将字符串间隔作为第二个参数。

只需将以下存储过程添加到您的数据库中：

```
CREATE PROCEDURE my_date_add(d DATE, i VARCHAR(50))
BEGIN
  DECLARE sign CHAR(1);
  DECLARE x INT;

  SET sign = SUBSTRING_INDEX(i, ' ', 1);
  SET x = SUBSTRING_INDEX(SUBSTRING_INDEX(i, ' ', -2), ' ', 1);

  IF sign = '-' THEN
    SET x = -x;
  END IF;

  CASE SUBSTRING_INDEX(i, ' ', -1)
    WHEN 'DAY' THEN SELECT DATE_ADD(d, INTERVAL x DAY);
    WHEN 'WEEK' THEN SELECT DATE_ADD(d, INTERVAL x WEEK);
    WHEN 'MONTH' THEN SELECT DATE_ADD(d, INTERVAL x MONTH);
  END CASE;
END 
```

然后你应该能够像这样更新你的表：

```
UPDATE date_test SET end_date = my_date_add(start_date, date_interval); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T01:07:13.480

你想要做的是：

```
UPDATE date_test SET end_date = DATE_ADD(start_date, date_interval); 
```

但我不确定使用 date_interval 作为第二个参数是否有效，请告诉我们是否有效。

您会在 MySQL 文档中找到很多有用的示例，请参阅[DATE_ADD()](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add)函数描述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T05:38:06.337

MySQL 不支持值评估。因此，您不能直接使用 UPDATE 语句。

在这种情况下，我建议您使用以下方法：

*   编写一个 SELECT...INTO OUTFILE 语句，该语句将生成一个 UPDATE 语句列表并将所有这些语句输出到文件中，然后运行这个 sript。

*   或者编写一个存储过程，该过程将在表上打开一个游标`date_test`，在循环中使用准备好的语句为每条记录一个一个地生成和执行 UPDATE 语句。

询问，如果您对解决方案有疑问。

# java - 休眠 HQL 连接错误

> ID：11302905
> 
> 赞同：0
> 
> 时间：2012-07-03T00:16:04.880
> 
> 标签：java, hibernate, hql

我正在尝试让我的 HQL 查询正常工作，但我已经被困了一段时间，并决定在这里提问。

我不断收到“预期加入的路径！”

所以我有 2 个要查询的表，我已经有了 SQL 查询。

这些是我的 xml 映射

```
Kamer.hbm.xml
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
    "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
    "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
<class name="model.Kamer" table="kamer">
    <id name="kamerid">
        <generator class="identity"/>
    </id>
    <property name="hotelid"/>
    <property name="kamertypeid" />
    <property name="status"      />
</class>
</hibernate-mapping>

Reservatie.hbm.xml
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
    "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
    "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
<class name="model.Reservatie" table="reservatie">
    <id name="reservatieID">
        <generator class="identity"/>
    </id>
    <property name="klantID"/>
    <property name="kamertypeID" />
    <many-to-one name="kamerID" class="model.Kamer" />
    <property name="hotelID"      />
    <property name="verblijfsformuleID"  />
    <property name="verblijfsperiodeID"    />
    <property name="betalingsID" />
    <property name="gastID"     />
    <property name="kredietkaartID"/>
    <property name="start_datum"      />
    <property name="eind_datum"   />
    <property name="reservatie_datum"   />
    <property name="tijdige_annulatie"   />
    <property name="check_in_datum"   />
    <property name="check_uit_datum"   />
</class>
</hibernate-mapping> 
```

这些是我的 2 个 java 类

```
package model;

public class Kamer {

public int kamerid;
public int hotelid;
public int kamertypeid;
public String status;

public Kamer() {
}

public Kamer(int kamerid, int hotelid, int kamertypeid, String status) {
    this.kamerid = kamerid;
    this.hotelid = hotelid;
    this.kamertypeid = kamertypeid;
    this.status = status;
}

public String getStatus() {
    return status;
}

public void setStatus(String status) {
    this.status = status;
}

public int getKamerid() {
    return kamerid;
}

public void setKamerid(int kamerid) {
    this.kamerid = kamerid;
}

public int getHotelid() {
    return hotelid;
}

public void setHotelid(int hotelid) {
    this.hotelid = hotelid;
}

public int getKamertypeid() {
    return kamertypeid;
}

public void setKamertypeid(int kamertypeid) {
    this.kamertypeid = kamertypeid;
}

@Override
public String toString() {
    return "Kamer{" +
            "kamerid=" + kamerid +
            ", hotelid=" + hotelid +
            ", kamertypeid=" + kamertypeid +
            ", status='" + status + '\'' +
            '}';
}
} 
```

和

```
package model;
import java.util.Date;

public class Reservatie {

public int reservatieID;
public int klantID;
public int kamertypeID;
public int kamerID;
public int hotelID;
public int verblijfsformuleID;
public int verblijfsperiodeID;
public int betalingsID;
public int gastID;
public int kredietkaartID;
public Date start_datum;
public Date eind_datum;
public Date reservatie_datum;
public String tijdige_annulatie;
public Date check_in_datum;
public Date check_uit_datum;

public Reservatie() { }

public Reservatie(int reservatieID,int klantID, int kamertypeID, int kamerID, int hotelID,       int verblijfsformuleID, int verblijfsperiodeID, int betalingsID, int gastID, int kredietkaartID, Date start_datum, Date eind_datum, Date reservatie_datum, String tijdige_annulatie, Date check_in_datum, Date check_uit_datum) {
    this.reservatieID = reservatieID;
    this.klantID = klantID;
    this.kamertypeID = kamertypeID;
    this.kamerID = kamerID;
    this.hotelID = hotelID;
    this.verblijfsformuleID = verblijfsformuleID;
    this.verblijfsperiodeID = verblijfsperiodeID;
    this.betalingsID = betalingsID;
    this.gastID = gastID;
    this.kredietkaartID = kredietkaartID;
    this.start_datum = start_datum;
    this.eind_datum = eind_datum;
    this.reservatie_datum = reservatie_datum;
    this.tijdige_annulatie = tijdige_annulatie;
    this.check_in_datum = check_in_datum;
    this.check_uit_datum = check_uit_datum;
}

public int getKlantID() {
    return klantID;
}

public void setKlantID(int klantID) {
    this.klantID = klantID;
}

public int getReservatieID() {
    return reservatieID;
}

public void setReservatieID(int reservatieID) {
    this.reservatieID = reservatieID;
}

public int getKamertypeID() {
    return kamertypeID;
}

public void setKamertypeID(int kamertypeID) {
    this.kamertypeID = kamertypeID;
}

public int getKamerID() {
    return kamerID;
}

public void setKamerID(int kamerID) {
    this.kamerID = kamerID;
}

public int getHotelID() {
    return hotelID;
}

public void setHotelID(int hotelID) {
    this.hotelID = hotelID;
}

public int getVerblijfsformuleID() {
    return verblijfsformuleID;
}

public void setVerblijfsformuleID(int verblijfsformuleID) {
    this.verblijfsformuleID = verblijfsformuleID;
}

public int getVerblijfsperiodeID() {
    return verblijfsperiodeID;
}

public void setVerblijfsperiodeID(int verblijfsperiodeID) {
    this.verblijfsperiodeID = verblijfsperiodeID;
}

public int getBetalingsID() {
    return betalingsID;
}

public void setBetalingsID(int betalingsID) {
    this.betalingsID = betalingsID;
}

public int getGastID() {
    return gastID;
}

public void setGastID(int gastID) {
    this.gastID = gastID;
}

public int getKredietkaartID() {
    return kredietkaartID;
}

public void setKredietkaartID(int kredietkaartID) {
    this.kredietkaartID = kredietkaartID;
}

public Date getStart_datum() {
    return start_datum;
}

public void setStart_datum(Date start_datum) {
    this.start_datum = start_datum;
}

public Date getEind_datum() {
    return eind_datum;
}

public void setEind_datum(Date eind_datum) {
    this.eind_datum = eind_datum;
}

public Date getReservatie_datum() {
    return reservatie_datum;
}

public void setReservatie_datum(Date reservatie_datum) {
    this.reservatie_datum = reservatie_datum;
}

public String getTijdige_annulatie() {
    return tijdige_annulatie;
}

public void setTijdige_annulatie(String tijdige_annulatie) {
    this.tijdige_annulatie = tijdige_annulatie;
}

public Date getCheck_in_datum() {
    return check_in_datum;
}

public void setCheck_in_datum(Date check_in_datum) {
    this.check_in_datum = check_in_datum;
}

public Date getCheck_uit_datum() {
    return check_uit_datum;
}

public void setCheck_uit_datum(Date check_uit_datum) {
    this.check_uit_datum = check_uit_datum;
}

@Override
public String toString() {
    return "Reservatie{" +
            "reservatieID=" + reservatieID +
            ", klantID=" + klantID +
            ", kamertypeID=" + kamertypeID +
            ", kamerID=" + kamerID +
            ", hotelID=" + hotelID +
            ", verblijfsformuleID=" + verblijfsformuleID +
            ", verblijfsperiodeID=" + verblijfsperiodeID +
            ", betalingsID=" + betalingsID +
            ", gastID=" + gastID +
            ", kredietkaartID=" + kredietkaartID +
            ", start_datum=" + start_datum +
            ", eind_datum=" + eind_datum +
            ", reservatie_datum=" + reservatie_datum +
            ", tijdige_annulatie='" + tijdige_annulatie + '\'' +
            ", check_in_datum=" + check_in_datum +
            ", check_uit_datum=" + check_uit_datum +
            '}';
}
} 
```

这是我的 HQL 部分

```
import model.Reservatie;
import org.hibernate.Query; 
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.Transaction;
import persistentie.HibernateUtil;
import model.Kamer;

import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Collection;
import java.util.Iterator;
import java.util.List;

@SuppressWarnings({"ALL"})
public class testKamer {
public static void main(String[] args) throws Exception{

    SessionFactory factory = HibernateUtil.getSessionFactory();
    Session session = factory.getCurrentSession();

    Transaction tx = session.beginTransaction();

    String HQL_QUERY = "SELECT k FROM Kamer k LEFT JOIN Reservatie r with k.kamerid = r.kamerID";
    Query query = session.createQuery(HQL_QUERY);
    List result = query.list();
    for(Iterator it = result.iterator();it.hasNext();) {
        Kamer kamer = (Kamer) it.next();
        System.out.println("Kamer: "+kamer.kamerid);
    }
}
} 
```

这里也是原始的 SQL 查询

```
 SELECT *
     FROM kamer
     LEFT JOIN reservatie
     ON kamer.kamerid=reservatie.kamerid and kamer.kamertypeid = reservatie.kamertypeid and kamer.hotelid = reservatie.hotelid
     where not reservatie.verblijfsperiodeid = 2 or reservatie.kamerid is null; 
```

欢迎任何帮助，在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T05:44:21.230

我认为您的查询应该是

```
String HQL_QUERY = "SELECT k FROM reservatie r right join Kamer k"; 
```

或者

```
String HQL_QUERY = "SELECT k FROM reservatie r join Kamer k"; 
```

# matlab - 重新索引关联矩阵

> ID：11302906
> 
> 赞同：0
> 
> 时间：2012-07-03T00:16:06.770
> 
> 标签：matlab

我有一个时间序列，我有一个函数返回矩阵中的局部最大值和最小值，该矩阵按 y 坐标降序排序。例如，在以下系列上运行它：

```
[1 7 3 7 10 12 6 4 6] 
```

会返回：

```
{ {6 , 12}, {2, 7}, {9, 6} } 
```

作为局部最大值。如何对该矩阵进行排序，使其按索引升序排序？我想：

```
{{2, 7}, {6, 12}, {9, 6}} 
```

**编辑：**
我实际上已经修改了我的函数，只返回按索引排序的值。但我仍然想知道这样做的最佳方法（按一列值对矩阵进行排序）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T00:18:11.223

你想要[`sortrows()`](http://www.mathworks.co.uk/help/techdoc/ref/sortrows.html)。但是请注意，它适用于标准数组，而不是您在问题中显示的单元格数组。例如：

```
>> m = [ 6 12; 2 7; 9 6 ];
>> sortrows(m)

ans =

     2     7
     6    12
     9     6 
```

# python - Python：使用 Hachoir，如何为类文件对象提取元数据？

> ID：11302908
> 
> 赞同：8
> 
> 时间：2012-07-03T00:16:15.027
> 
> 标签：python, stream, metadata, hachoir-parser

我正在一个用户上传视频和音频文件的网站上工作，上传时，必须从文件中填充一些常见的元数据字段。我找到[了 Hachoir](https://bitbucket.org/haypo/hachoir/wiki/Home)，它看起来不错，但是有一个问题，要创建一个用于元数据读取的解析器，需要的是文件名，而不是类文件或流对象。

如何将 Hachoir 与文件类对象一起使用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-08T01:48:41.347

使用 Hachoir v3.2.1：

```
import hachoir.metadata
import hachoir.parser
import hachoir.stream

parser = hachoir.parser.guessParser(hachoir.stream.InputIOStream(file_handle, None, tags=[]))
if parser:
    hachoir_metadata = hachoir.metadata.extractMetadata(parser)
    if hachoir_metadata:
        metadata: Dict[str, str] = hachoir_metadata.exportDictionary()['Metadata']
        print(metadata) 
```

# php - 输入类型图像 URL 值通过 jquery 传递

> ID：11302912
> 
> 赞同：0
> 
> 时间：2012-07-03T00:17:01.003
> 
> 标签：php, jquery, forms

我有一个包含许多输入类型图像的表单。当用户单击任何图像时，我需要将网页位置替换为图像的 url。

形式就像，

```
<form action='free.php' id='freeForm' method='post' autocomplete="off">
<?
for($j=1;$j<=5;$j++)
{
?>
<a href="<?=$url;?>" class="anchor-url"> <input type="image" src="<?=$img;?>" /></a>
 <?
 }
 ?>
 </form> 
```

来自数据库的 $img 和 $url 值。

我的jQuery就像，

```
$("#freeForm").submit(function()
    {
            var Form = { };
            Form['inputFree'] = $("#inputFree").val();

                    Form['freeTOS'] = '1';

              $('.anchor-url').click(function(e){
             e.preventDefault();
              alert($(this).attr('href'));
           });

            $.post('processFree.php', Form, function(data)
            {
                    if(data == "Success")
                    {
                            $("#FreeErrors").html('').hide();
                            swapToPane('paneSuccess');
                            return;
                    }

                    swapToPane('paneFree');
                    $("#FreeErrors").html(data).show();
            });

            return false;
    }); 
```

现在，当我单击每个图像时，我会得到“http://au.yahoo.com”。但我想用每张图片的 URL 替换“http://au.yahoo.com”。如何将 PHP 变量 $url 传递给此表单？任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T00:23:36.257

如果我正确理解您的要求并且虽然我没有尝试过，这*应该可以工作。*基本上，您将单击事件绑定到每个图像，并在单击时将窗口位置替换为被单击元素`src`属性中的值。`input`

```
$('input[type=image]').click(function(e){
  e.preventDefault();
  window.location.replace($(this).attr('src'));
}); 
```

**编辑**

首先你应该给你的锚元素添加一个类名：

```
<form action='free.php' id='freeForm' method='post' autocomplete="off">
<?
for($j=1;$j<=5;$j++)
{
?>
<a href="<?=$url;?>" class="anchor-url"> <input type="image" src="<?=$img;?>" /></a>
 <?
 }
 ?>
</form> 
```

你的 JS：

```
$('.anchor-url').click(function(e){
  e.preventDefault();
  window.location.replace($(this).attr('href'));
}); 
```

请注意我是如何向锚链接添加一个类的。这几乎可以命名为任何东西。这使您能够使用 $('.any-classname') 选择器仅使用 jQuery 选择具有该类名的元素。

# android - 令牌“catch”上的语法错误，需要标识符

> ID：11302914
> 
> 赞同：-6
> 
> 时间：2012-07-03T00:17:04.030
> 
> 标签：android, eclipse

好的，所以我正在编写代码并且它工作得很好，直到我遇到这个问题：

令牌“catch”上的语法错误，需要标识符

这是有问题的代码：

```
public void onClick(View arg0) {

    EditText num=(EditText)findViewById(R.id.editText1);
    String number = "tel:" +num.getText().toString().trim();
    Intent callIntent = new Intent(Intent.ACTION_CALL, Uri.parse(number));
    startActivity(callIntent);

    TelephonyManager tManager = (TelephonyManager)                      
    getSystemService(Context.TELEPHONY_SERVICE);
    listener = new ListenToPhoneState();
    tManager.listen(listener, PhoneStateListener.LISTEN_CALL_STATE);

    //here's the problem 
    } catch (ActivityNotFoundException activityException) {
        Log.e("telephony-example", "Call failed", activityException);
    }

    private class ListenToPhoneState extends PhoneStateListener {

        public void onCallStateChanged(int state, String incomingNumber) {
            Log.i("telephony-example", "State changed: " + stateName(state));
        }

        String stateName(int state) {
        switch (state) {
            case TelephonyManager.CALL_STATE_IDLE: return "Idle";
            case TelephonyManager.CALL_STATE_OFFHOOK: return "Off hook";
            case TelephonyManager.CALL_STATE_RINGING: return "Ringing";
        }
        return Integer.toString(state);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T00:18:27.210

您的错误是因为您`catch`没有`try`. 我建议您在尝试处理 Android 项目之前更好地熟悉 java 语法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T00:24:45.820

`try`如下图所示放置一个块。

```
public void onClick(View arg0) 
{
    try
    {
         EditText num=(EditText)findViewById(R.id.editText1);
         String number = "tel:" +num.getText().toString().trim();
         Intent callIntent = new Intent(Intent.ACTION_CALL, Uri.parse(number));
         startActivity(callIntent);

         TelephonyManager tManager = (TelephonyManager)
         getSystemService(Context.TELEPHONY_SERVICE);
         listener = new ListenToPhoneState();
         tManager.listen(listener, PhoneStateListener.LISTEN_CALL_STATE);
    } 
    catch (ActivityNotFoundException activityException) 
    {
        Log.e("telephony-example", "Call failed", activityException);
    }
} 
```

# javascript - 在程序的范围内，最好将 JavaScript 实用程序类放在哪里？

> ID：11302917
> 
> 赞同：4
> 
> 时间：2012-07-03T00:17:55.293
> 
> 标签：javascript, oop, design-patterns

我正在开发一个规模较大的 JS 应用程序，我想将一些常用功能分解为一个实用程序类。但是，我不太清楚我应该如何去做。

例如，假设我有一堆基于形状的类需要调用实用程序类中的函数：

```
// Triangle class
Triangle.prototype = new Shape();
Triangle.prototype.constructor = Triangle;

function Triangle() {...}
Triangle.prototype.drawOutline = function() {
  var outline = Utility.canvas.trace(this._canvas); // Trace the shape.
  this._viewport.drawImage(outline, 0, 0); // Draw the traced outline.
}

// Circle class
Circle.prototype = new Shape();
Circle.prototype.constructor = Circle;

function Circle() {...}
Circle.prototype.drawOutline = function() {
  var outline = Utility.canvas.trace(this._canvas); // Trace the shape.
  this._viewport.drawImage(outline, 0, 0); // Draw the traced outline.
} 
```

`Utility`在全局级别实例化类是否有意义？我觉得它上面应该有一个额外的级别，比如`Application`我会有`Application.Utility`,`Application.UI`等等。不幸的是，走这条路会迫使每个专门的形状类知道更大的程序结构是什么（因此它可以引用`Application.Utility`），这不是很好。

有没有更好的首选方式让专门的 JS 类使用未继承的通用类函数？

* * *

**编辑：**说我试图将其与C++ 或 Java中的`#include`or语句联系起来可能会有所帮助。`import`在 JS 中解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T00:26:20.707

假设您将所有代码包装在一个匿名函数中，那么我通常做的只是创建一个对象（命名空间）并将所有实用程序放在那里：

```
;(function(){

  var Utils = {
    triangle: function () { ... },
    circle: function () { ... }
  }

}()) 
```

然后，每当您使用它时，您只需这样做`Utils.circle(...)`，您就知道何时使用 utils，并且很容易跟踪它们，添加新的等等。

> 说我试图将其与来自 C++ 或 Java 的 #include 或 import 语句联系起来可能会有所帮助。在 JS 中解决这个问题的最佳方法是什么？

在这种情况下，最简单的方法是创建一个`concat.sh`文件或类似文件和一个`start.js`并`end.js`添加其间的所有内容。

**开始.js**

```
;(function(){ 
```

**实用程序.js**

```
var Utils = {
  triangle: function () { ... },
  circle: function () { ... }
} 
```

**end.js**

```
}()) 
```

**连接.sh**

当然，秩序很重要。

```
#!bin/bash
cat start.js utils.js end.js > out.js 
```

如果您喜欢 node.js，请查看[grunt](https://github.com/cowboy/grunt)，它只需很少的配置即可为您完成所有这些工作。

否则，对于更高级的东西，请使用 CommonJS 模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T00:21:44.093

命名空间的最大原因是避免库之间的冲突。就我个人而言，我用 dt 为我写的所有内容添加前缀。所以我有 dt.Utility。选择一个前缀并使用它。=)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T00:39:31.633

问题实际上可能是实用程序类，实际上不应该是实用程序类。也许最好做这样的事情：

```
// Triangle class
Triangle.prototype = new Shape();
Triangle.prototype.constructor = Triangle;

function Triangle() {...}
Triangle.prototype.drawOutline = function() {
}

// Circle class
Circle.prototype = new Shape();
Circle.prototype.constructor = Circle;

function Circle() {...}
Circle.prototype.drawOutline = function() {
}

function OutlineDrawer(shape)
{
    this.shape = shape;
}

OutlineDrawer.prototype.draw(viewport)
{
    var outline = Utility.canvas.traceShape(this.shape.canvas()); // Trace the shape.
    viewport.drawImage(outline, 0, 0); // Draw the traced outline.
} 
```

你对形状承担了很多责任。形状应该定义形状的特定实例的属性，但您可能应该使用不同的类来跟踪它们。您可能希望将相同的形状绘制到不同的视口中（例如，将其保存到文件中），或者使用不同的算法来绘制相同的场景（调整速度、性能和质量）。ETC...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T00:54:49.683

和其他人一样的答案。

将您的原型放在一个全局对象中（我知道，它不是很推荐，但它是一种特殊情况）。

* * *

```
// Utils.js

// treat this global object as a "namespace" or "module"
var Utils = 
{

  // Triangle class
  Triangle.prototype = new Shape();
  Triangle.prototype.constructor = Triangle;

  function Triangle() {...}
    Triangle.prototype.drawOutline = function() {
    var outline = Utility.canvas.traceShape(this._canvas); // Trace the shape.
    this._viewport.drawImage(outline, 0, 0); // Draw the traced outline.
  }

  // Circle class
  Circle.prototype = new Shape();
  Circle.prototype.constructor = Circle;

  function Circle() {...}
    Circle.prototype.drawOutline = function() {
    var outline = Utility.canvas.traceShape(this._canvas); // Trace the shape.
    this._viewport.drawImage(outline, 0, 0); // Draw the traced outline.
  }
} // var Utils

// anotherfile.js

var MyTriangle = new Utils.Triangle();
var MyCircle  =  new Utils.Triangle(); 
```

* * *

这个技巧，它被称为“模块软件设计模式”。

# jquery - jquery在x秒后显示和隐藏图像

> ID：11302922
> 
> 赞同：0
> 
> 时间：2012-07-03T00:18:29.847
> 
> 标签：jquery

我想显示和图像 2 秒钟，然后隐藏它以显示图表。我的部分是图表在 2 秒后出现，但我不知道如何放置图像。

```
$("li").click(function(){
    //Toggle List
    $(this).toggleClass("active");
    $(this).next("div").stop('true','true').slideToggle();
    //SHOW image for 2 seconds and then HIDE IT
    var did = $(this).attr('id');
    var graphic;

    if($(this).next("div").html() == '')
        {
        graphic = '';
            $.ajax({
               url: 'pulse.php?did='+did, success: function(data)
             {
             graphic = data;
             }
        });
    }

    //Here I show the chart after 2 seconds pulling the data from pulse.php...
delay(function(){               
    $("#"+did).next("div").html(graphic);
    }, 2000 );
});

    //Delay function
var delay = (function(){
var timer = 0;
         return function(callback, ms){
         clearTimeout (timer);
         timer = setTimeout(callback, ms);
     };
})(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T00:30:27.993

如果您已经在工作，我想这只是在正确的位置显示和隐藏图像元素的问题：

```
$("li").click(function(){
    $("#imageElementID").show(); //show image on click
    $(this).toggleClass("active");
    $(this).next("div").stop('true','true').slideToggle();
    //SHOW image for 2 seconds and then HIDE IT
    var did = $(this).attr('id'), graphic;
    if ($(this).next("div").html() === '') {
        graphic = '';
        $.ajax({
            url: 'pulse.php?did='+did, 
            success: function(data) {
                graphic = data;
            }
        });
    }
    delay(function(){               
        $("#imageElementID").hide(); //hide image after some sort of delay function ?
        $("#"+did).next("div").html(graphic);
    }, 2000 );
});​ 
```

# xml - XSLT 帮助在 XML 中包含字段

> ID：11302927
> 
> 赞同：0
> 
> 时间：2012-07-03T00:19:48.973
> 
> 标签：xml, xslt

我有以下 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<Rowsets>
    <Rowset>
        <Columns>
            <Column Description="DrilldownDepth" MaxRange="1" MinRange="0" Name="DrilldownDepth" SQLDataType="4" SourceColumn="DrilldownDepth"/>
            <Column Description="ABC" MaxRange="1" MinRange="0" Name="ABC" SQLDataType="4" SourceColumn="ABC"/>
            <Column Description="DEF" MaxRange="1" MinRange="0" Name="DEF" SQLDataType="-1" SourceColumn="DEF"/>
            <Column Description="PQR" MaxRange="1" MinRange="0" Name="PQR" SQLDataType="-1" SourceColumn="PQR"/>
        </Columns>
        <Row>
            <DrilldownDepth>1</DrilldownDepth>
            <ABC>25</ABC>
            <DEF>DDD</DEF>
            <PQR>PPP</PQR>
        </Row>
        <Row>
            <DrilldownDepth>1</DrilldownDepth>
            <ABC>16</ABC>
            <DEF>AAA</DEF>
            <PQR>BBB</PQR>
        </Row>
        <Row>
            <DrilldownDepth>1</DrilldownDepth>
            <ABC>19</ABC>
            <DEF>SEE</DEF>
            <PQR>HELP</PQR>
        </Row>
    </Rowset>
</Rowsets> 
```

现在我需要添加每一行。因此我的 XML 将如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<Rowsets>
    <Rowset>
        <Columns>
            <Column Description="DrilldownDepth" MaxRange="1" MinRange="0" Name="DrilldownDepth" SQLDataType="4" SourceColumn="DrilldownDepth"/>
            <Column Description="ABC" MaxRange="1" MinRange="0" Name="ABC" SQLDataType="4" SourceColumn="ABC"/>
            <Column Description="DEF" MaxRange="1" MinRange="0" Name="DEF" SQLDataType="-1" SourceColumn="DEF"/>
            <Column Description="PQR" MaxRange="1" MinRange="0" Name="PQR" SQLDataType="-1" SourceColumn="PQR"/>
        </Columns>
        <Row>
            <DrilldownDepth>1</DrilldownDepth>
            <ABC>25</ABC>
            <DEF>DDD</DEF>
            <PQR>PPP</PQR>
            <XYZ></XYZ>
        </Row>
        <Row>
            <DrilldownDepth>1</DrilldownDepth>
            <ABC>16</ABC>
            <DEF>AAA</DEF>
            <PQR>BBB</PQR>
            <XYZ></XYZ>
        </Row>
        <Row>
            <DrilldownDepth>1</DrilldownDepth>
            <ABC>19</ABC>
            <DEF>SEE</DEF>
            <PQR>HELP</PQR>
            <XYZ></XYZ>
        </Row>
    </Rowset>
</Rowsets> 
```

如何使用转换/XSLT 实现这一点？

我尝试了各种 XSLT，但不知何故我无法实现它。

索汉姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T00:23:47.070

这个简单的 XSLT：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output omit-xml-declaration="no" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <!-- Template #1 -->
  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>

  <!-- Template #2 -->
  <xsl:template match="Row">
    <xsl:copy>
      <xsl:apply-templates />
      <XYZ></XYZ>
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

...当应用于原始 XML 时：

```
<?xml version="1.0" encoding="UTF-8"?>
<Rowsets>
  <Rowset>
    <Columns>
      <Column Description="DrilldownDepth" MaxRange="1" MinRange="0" Name="DrilldownDepth" SQLDataType="4" SourceColumn="DrilldownDepth"/>
      <Column Description="ABC" MaxRange="1" MinRange="0" Name="ABC" SQLDataType="4" SourceColumn="ABC"/>
      <Column Description="DEF" MaxRange="1" MinRange="0" Name="DEF" SQLDataType="-1" SourceColumn="DEF"/>
      <Column Description="PQR" MaxRange="1" MinRange="0" Name="PQR" SQLDataType="-1" SourceColumn="PQR"/>
    </Columns>
    <Row>
      <DrilldownDepth>1</DrilldownDepth>
      <ABC>25</ABC>
      <DEF>DDD</DEF>
      <PQR>PPP</PQR>
    </Row>
    <Row>
      <DrilldownDepth>1</DrilldownDepth>
      <ABC>16</ABC>
      <DEF>AAA</DEF>
      <PQR>BBB</PQR>
    </Row>
    <Row>
      <DrilldownDepth>1</DrilldownDepth>
      <ABC>19</ABC>
      <DEF>SEE</DEF>
      <PQR>HELP</PQR>
    </Row>
  </Rowset>
</Rowsets> 
```

...产生所需的结果：

```
<?xml version="1.0" encoding="UTF-8"?><Rowsets>
  <Rowset>
    <Columns>
      <Column Description="DrilldownDepth" MaxRange="1" MinRange="0" Name="DrilldownDepth" SQLDataType="4" SourceColumn="DrilldownDepth"/>
      <Column Description="ABC" MaxRange="1" MinRange="0" Name="ABC" SQLDataType="4" SourceColumn="ABC"/>
      <Column Description="DEF" MaxRange="1" MinRange="0" Name="DEF" SQLDataType="-1" SourceColumn="DEF"/>
      <Column Description="PQR" MaxRange="1" MinRange="0" Name="PQR" SQLDataType="-1" SourceColumn="PQR"/>
    </Columns>
    <Row>
      <DrilldownDepth>1</DrilldownDepth>
      <ABC>25</ABC>
      <DEF>DDD</DEF>
      <PQR>PPP</PQR>
      <XYZ/>
    </Row>
    <Row>
      <DrilldownDepth>1</DrilldownDepth>
      <ABC>16</ABC>
      <DEF>AAA</DEF>
      <PQR>BBB</PQR>
      <XYZ/>
    </Row>
    <Row>
      <DrilldownDepth>1</DrilldownDepth>
      <ABC>19</ABC>
      <DEF>SEE</DEF>
      <PQR>HELP</PQR>
      <XYZ/>
    </Row>
  </Rowset>
</Rowsets> 
```

**解释：**

*   模板 #1 是身份模板；它按原样复制所有节点/属性（除非它被后续模板覆盖）。
*   模板#2 复制每个`<row>`元素，处理其子元素（通过标识模板），并添加所需的`<XYZ>`节点。

# c# - WCF 主机中的触发事件

> ID：11302932
> 
> 赞同：2
> 
> 时间：2012-07-03T00:20:47.053
> 
> 标签：c#, wcf, wcf-client

我正在运行托管在 WPF 应用程序中的 WCF 服务，并尝试在向服务发送消息时在主机中引发事件，但遇到了很大困难。

我的代码如下：

服务 -

```
namespace BatService
{
    [ServiceContract]
    public interface IBatServ
    {
        [OperationContract]
        void UseGadget(string name);
    }

    [ServiceBehavior(InstanceContextMode=InstanceContextMode.Single)]
    public class BatServ : IBatServ
    {
        public void UseGadget(string name)
        {
            OnUsedGadget(name);
        }

        public static event EventHandler<BatArgs> UsedGadget;
        public static void OnUsedGadget(string name)
        {
            if (UsedGadget != null)
                UsedGadget(null, new BatArgs() { BatGadget = name });
        }
    }

    public class BatArgs : EventArgs
    {
        public string BatGadget;
    }
} 
```

主持人 -

```
namespace BatHostWPF
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            ServiceHost host = new ServiceHost(typeof(BatServ));
            BatServ.UsedGadget += new EventHandler<BatArgs>(BatServ_UsedGadget);
            host.Open();
        }

        void BatServ_UsedGadget(object sender, BatArgs e)
        {
            MessageBox.Show(e.BatGadget + " was used!");
        }
    }
} 
```

服务 App.config -

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>

  <system.web>
    <compilation debug="true" />
  </system.web>
  <!-- When deploying the service library project, the content of the config file must be added to the host's 
  app.config file. System.Configuration does not support config files for libraries. -->
  <system.serviceModel>
    <services>
      <service name="BatService.BatServ">
        <endpoint address="" binding="wsHttpBinding" contract="BatService.IBatServ">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8732/Design_Time_Addresses/BatService/Service1/" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, 
          set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="True"/>
          <!-- To receive exception details in faults for debugging purposes, 
          set the value below to true.  Set to false before deployment 
          to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="False" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>

</configuration> 
```

主机的 App.config -

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>
        <behaviors>
            <serviceBehaviors>
                <behavior name="NewBehavior0">
                    <serviceMetadata httpGetEnabled="true" />
                </behavior>
            </serviceBehaviors>
        </behaviors>
        <services>
            <service behaviorConfiguration="NewBehavior0" name="BatService.BatServ">
                <clear />
                <endpoint address="net.pipe://localhost/battserv" binding="netNamedPipeBinding"
                    bindingConfiguration="" contract="BatService.IBatServ" />
                <host>
                    <baseAddresses>
                        <add baseAddress="http://localhost:8888/batserv" />
                    </baseAddresses>
                </host>
            </service>
        </services>
    </system.serviceModel>
</configuration> 
```

正如您可能猜到的，当我从客户端调用 UseGadget() 时，我希望看到一个 MessageBox。每当我尝试使用 VS 的 WcfTestClient.exe 对其进行测试时，似乎什么都没有发生。我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T23:34:05.387

事实证明我的端点配置不正确。这个页面帮助我解决了我的问题 - [http://www.switchonthecode.com/tutorials/wcf-tutorial-basic-interprocess-communication](http://www.switchonthecode.com/tutorials/wcf-tutorial-basic-interprocess-communication)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T01:28:43.263

我不确定您是否可以在 wcf 中“引发事件”，但您可以创建双工通信架构。netTCPBinding、netNamedPipBinding 和 wsDualHttpBinding 支持此功能。

这是一个视频演示如何使用 wsDualHttpBinding 进行回调

[http://www.youtube.com/watch?v=NO2JsLrP75E](http://www.youtube.com/watch?v=NO2JsLrP75E)

我从来没有用 netNamedPipeBinding 做过这个，但我认为这个过程是相似的。

完成实施后，请记住更新您的 app.config 文件和服务引用。

希望有帮助！

# c++ - 在三次贝塞尔曲线上找到给定 X 的 Y？

> ID：11302937
> 
> 赞同：13
> 
> 时间：2012-07-03T00:21:47.040
> 
> 标签：c++, bezier, curve, cubic

我需要一种方法，允许我在给定 x 坐标的情况下在三次贝塞尔曲线上找到 Y 坐标。

我遇到过很多地方告诉我将其视为三次函数，然后尝试找到根，我理解。然而，三次贝塞尔曲线的方程是（对于 x 坐标）：

`X(t) = (1-t)^3 * X0 + 3*(1-t)^2 * t * X1 + 3*(1-t) * t^2 * X2 + t^3 * X3`

让我感到困惑的是`(1-t)`值的添加。例如，如果我用一些随机数填充 X 值：

`400 = (1-t)^3 * 100 + 3*(1-t)^2 * t * 600 + 3*(1-t) * t^2 * 800 + t^3 * 800`

然后重新排列它：

`800t^3 + 3*(1-t)*800t^2 + 3*(1-t)^2*600t + (1-t)^3*100 -400 = 0`

我仍然不知道`(1-t)`系数的值。`(1-t)`当仍然未知时，我应该如何求解方程？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T00:35:19.043

三次贝塞尔曲线有三种常用的表达方式。

首先 x 作为 t 的函数

```
x(t) = sum( f_i(t) a_i )
     = (1-t)^3 * x0 + 3*(1-t)^2 * t * x1 + 3*(1-t) * t^2 * x2 + t^3 * x3 
```

其次 y 作为 x 的函数

```
y(x) = sum( f_i(x) a_i )
     = (1-x)^3 * y0 + 3*(1-x)^2 * x * y1 + 3*(1-x) * x^2 * y2 + x^3 * y3 
```

前两个在数学上是相同的，只是对变量使用不同的名称。

根据您的描述“在三次贝塞尔曲线上找到 Y 坐标，并在其上给出 x 坐标。” 我猜你有一个使用第二个方程的问题正在尝试重新排列第一个方程来帮助你解决它，而你应该使用第二个方程。如果是这样，则不需要重新排列或求解 - 只需插入您的 x 值，您就有了解决方案。

您可能有第三种情况的方程，这是丑陋和困难的情况。这是 x 和 y 参数都是第三个变量 t 的三次贝塞尔曲线。

```
x(t) = sum( f_i(t) x_i )
y(t) = sum( f_i(t) y_i ) 
```

如果这是你的情况。让我知道，我可以详细说明您需要做些什么来解决它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T00:34:25.300

我认为这是一个公平的 CS 问题，所以我将尝试展示我是如何解决这个问题的。请注意，给定的 x 可能有超过 1 个相关联的 y 值。在我需要这个的情况下，保证不会出现这种情况，所以你必须弄清楚如何确定你想要哪一个。

我迭代 t 生成一个 x 和 y 值的数组。为了我的目的，我以相当高的分辨率完成了它。（我希望生成一个 8 位查找表，所以我使用了大约 1000 个点。）我只是将 t 插入贝塞尔方程中，以便将下一个 x 和下一个 y 坐标存储在数组中。一旦我生成了整个东西，我就扫描了数组以找到最接近的 2 个 x 值。（或者如果有一个完全匹配，就使用它。）然后我对那个非常小的线段进行线性插值以获得我需要的 y 值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T01:06:00.530

进一步发展表达应该让你摆脱这些`(1 - t)`因素

如果你运行：

```
expand(800*t^3 + 3*(1-t)*800*t^2 + 3*(1-t)^2*600*t + (1-t)^3*100 -400 = 0); 
```

在[wxMaxima](http://andrejv.github.com/wxmaxima/)或[Maple](http://www.maplesoft.com/)中（你必须`t`在这个中添加参数），你得到：

```
100*t^3 - 900*t^2 + 1500*t - 300 = 0 
```

求解新的三次方程`t`（您可以使用[三次方程公式](http://www.sosmath.com/algebra/factor/fac11/fac11.html)），得到 后`t`，您可以找到`x`：

```
x = (x4 - x0) * t      (asuming x4 > x0) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-21T09:39:09.793

贝塞尔曲线方程（获取 x 值）：

```
Bx = (-t^3 + 3*t^2 - 3*t + 1) * P0x + 
     (3*t^3 - 6*t^2 + 3*t) * P1x + 
     (-3*t^3 + 3*t^2) * P2x + 
     (t^3) * P3x 
```

以 t 的三次方形式重新排列

```
0  = (-P0x + 3*P1x - 3*P2x + P3x) * t^3+ 
     (3*P0x - 6*P1x + 3*P2x) * t^2 + 
     (-3*P0x + 3*P1x) * t + 
     (P0x) * P3x - Bx 
```

使用三次公式解决此问题以找到 t 的值。t 可能有多个实际值（如果您的曲线两次穿过相同的 x 点）。就我而言，我正在处理一种情况，即任何 x 值都只有一个 y 值。所以我能够将唯一的实根作为 t 的值。

```
a = -P0x + 3.0 * P1x - 3.0 * P2x + P3x;
b = 3.0 * P0x - 6.0 * P1x + 3.0 * P2x;
c = -3.0 * P0x + 3.0 * P1x;
d = P0x;
t = CubicFormula(a, b, c, d); 
```

接下来将 t 的值放回 y 的贝塞尔曲线中

```
By = (1-t)^3 * P0x + 
     3t(1-t)^2 * P1x + 
     3t^2(1-t) * P2x + 
     t^3 * P3x 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-21T10:01:55.267

> 所以我一直在寻找某种方法来让我找到三次贝塞尔曲线上的 Y 坐标，给定一个 x 坐标。

考虑点 (0, 0) 和 (0, 100) 之间的三次贝塞尔曲线，控制点位于 (0, 33) 和 (0, 66)。对于给定的 X，那里有无限数量的 Y。所以没有方程可以解决给定 X 的任意三次贝塞尔曲线的 Y。

对于稳健的解决方案，您可能需要从[De Casteljau 算法开始](http://en.wikipedia.org/wiki/De_Casteljau%27s_algorithm)

递归分割曲线，直到各个线段接近一条直线。然后，您可以检测这些不同的线段是否以及在何处与您的 x 相交，或者它们是否是 x 对应于您正在寻找的 x 的垂直线段（我上面的示例）。

# c# - 在没有 c# webbrowser 控件的情况下控制 webbrowser

> ID：11302944
> 
> 赞同：0
> 
> 时间：2012-07-03T00:22:40.347
> 
> 标签：c#, internet-explorer, browser, bots

我希望能够启动多个浏览器窗口并从中获取 html 并与它们进行交互，就像使用 .net Web 浏览器控件一样。问题是 c# web 浏览器控件需要 STA 线程，这使我的程序变慢并且容易出错。他们是我可以与真正的 IE 浏览器甚至 Chrome、Firefox 等对话并做到这一点的一种方式吗？

我知道有付费的第三方解决方案和东西，但我想知道是否有人知道任何可靠且有效的免费库。我不能将 HttpWebRequest 用于我正在做的事情，所以请不要建议。

我将在 Windows 上运行并使用 C#。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T00:39:53.900

我使用过 WebKit.NET。它免费且效果很好（支持 flash、css、正确渲染、具有 javascript 引擎）。对于您正在做的事情，它可能会也可能不会太广泛。

[http://webkitdotnet.sourceforge.net/](http://webkitdotnet.sourceforge.net/)

有很多指南，演示有一个功能齐全的标签系统。

编辑：我在玩弄它，并制作了演示的增强版

![在此处输入图像描述](../Images/f20f412ff986adcf5492dcb09bf8373e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T00:30:01.153

[Awesomeium](http://awesomium.codeplex.com/)是一个基于 Webkit/Chromium (Chrome) 的浏览器，您可以通过 .NET 包装器与之通信，就像 WebBrowser 控件一样。不过，我不确定 STA 线程要求。

至于 STA Threading 使您的应用程序“更慢且容易出错”——这听起来很奇怪，也许您应该研究解决这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T00:30:52.900

对于 IE（仅限）。免费：Microsoft Internet 控制

```
using SHDocVw; 
```

Microsoft HTML 对象库

```
using mshtml; 
```

有了这些，你可以做类似的事情

```
foreach (InternetExplorer brIns in _allWindows)
            {
                var htmlDoc = brIns.Document as HTMLDocument;
                if (htmlDoc != null && htmlDoc.all.item(elementName) != null)
                {
                    var elem = htmlDoc.all.item(elementName) as HTMLInputElement;
                    if (elem != null && attributeName == null)
                    {
                        _ieCurrentDoc = htmlDoc;
                        _currentHtml = htmlDoc.documentElement.outerHTML;
                        return true;
                    }
                    if (elem != null && elem.getAttribute(attributeName) != null)
                    {
                        _ieCurrentDoc = htmlDoc;
                        _currentHtml = htmlDoc.documentElement.outerHTML;
                        return true;
                    }

                }
            } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T02:40:50.823

或其他网络浏览器控件：[http ://code.google.com/p/geckofx/](http://code.google.com/p/geckofx/)

[使用 GeckoFX 在 C# 中嵌入 Firefox 浏览器](http://winform-net.blogspot.com.au/2011/05/embeding-firefox-brower-gecko-engine-in.html)

# php - mysql没有返回所有行

> ID：11302953
> 
> 赞同：1
> 
> 时间：2012-07-03T00:24:07.790
> 
> 标签：php, mysql, sql

这是我的查询：

```
 $sqlw = "SELECT * FROM coverages where user_id='3828' ORDER BY sp_id ASC";
  $resultw = mysql_query($sqlw);    
  $roww    = mysql_fetch_array($resultw);
  while ($roww = mysql_fetch_array($resultw)) {

  echo $roww['sp_id']."<br>";

      }
  echo "TOTAL:".mysql_num_rows($resultw)."<br>"; 
```

如您所见，它非常基本，结果显示：TOTAL:29 但是当我计算返回的项目列表时，它只有 28 个。我在 phpmyadmin 上运行查询，它显示总共 29 行，我确实计算了它们，它们是29.

我运行了不同的其他简单查询，它总是做同样的事情：缺少一行。这可能是微不足道的，也许我错过了一些东西，或者它可能与服务器有关？任何帮助/想法将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T00:26:01.577

您对`mysql_fetch_array()`before 循环的调用会处理一行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T00:31:17.600

你有一个经典的非一错误。

`$roww = mysql_fetch_array($resultw);`在你的循环开始之前有一个额外的。这意味着您要丢弃第一行。

# ruby-on-rails - 每个控制器的 Rails 布局

> ID：11302954
> 
> 赞同：24
> 
> 时间：2012-07-03T00:24:17.897
> 
> 标签：ruby-on-rails

我有一个家庭控制器和一个新闻控制器。我希望这两个控制器都使用 application.html.erb 布局文件，除此之外，对于家庭，使用家庭布局和新闻，使用新闻布局。然后渲染一个特定的视图。这在rails中可能吗？

换句话说，我不想为每个视图指定一个布局，而是为每个控制器指定一个布局，它们都继承自 application.html.erb 布局。

我想要做的是删除添加顶部导航栏并在每个布局文件中包含 javascript/css 的冗余。我宁愿将它包含在一个文件中，并使用另一种布局进行控制器特定布局，然后最终渲染视图。

谢谢

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-07-03T00:31:43.403

您可以告诉控制器使用特定布局，例如

```
class HomeController < ApplicationController
  layout 'home'
end

class NewsController < ApplicationController
  layout 'news'
end 
```

这些将期望 app/views/layouts/home.html.erb 等中的布局

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-03T00:32:34.577

```
class ProductsController < ApplicationController
  layout "inventory"
  #...
end 
```

[http://guides.rubyonrails.org/layouts_and_rendering.html](http://guides.rubyonrails.org/layouts_and_rendering.html)

# iphone - 使用 CoreData 时 RestKit 没有正确映射属性

> ID：11302957
> 
> 赞同：1
> 
> 时间：2012-07-03T00:24:46.837
> 
> 标签：iphone, ios, web-services, core-data, restkit

我在使用我的应用程序实现 RestKit/CoreData 时遇到了一些问题。使用 RKTwitterCoreData 示例应用程序并将其指向我的 web 服务以获取 json 提要，我得到了生成的 tableview：

![重复的对象/ID 未正确显示](../Images/22a498436e2376852b7f96e54bc7c256.png)

目前遇到的问题：

1.  即使我将primaryKeyAttribute 设置为orderID，刷新也会生成一个新的核心数据条目。
2.  单元格 textLabel 显示与我的 Web 服务不匹配的奇怪 orderID

这是我的 applicationDidFinishLaunchingWithOptions：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
// Initialize RestKit
RKObjectManager* objectManager = [RKObjectManager managerWithBaseURLString:@"http://mywebservice.com"];

// Enable automatic network activity indicator management
objectManager.client.requestQueue.showsNetworkActivityIndicatorWhenBusy = YES;

NSString *databaseName = @"RKTwitterData.sqlite";
objectManager.objectStore = [RKManagedObjectStore objectStoreWithStoreFilename:databaseName usingSeedDatabaseName:nil managedObjectModel:nil delegate:self];

RKManagedObjectMapping* statusMapping = [RKManagedObjectMapping mappingForClass:[Order class] inManagedObjectStore:objectManager.objectStore];
statusMapping.primaryKeyAttribute = @"orderID";
[statusMapping mapKeyPath:@"id" toAttribute:@"orderID"];
[statusMapping mapAttributes:@"created_at", nil];

// Register our mappings with the provider
[objectManager.mappingProvider setObjectMapping:orderMapping forResourcePathPattern:@"/orders"];

// Create Window and View Controllers
RKTwitterViewController* viewController = [[[RKTwitterViewController alloc] initWithNibName:nil bundle:nil] autorelease];
UINavigationController* controller = [[UINavigationController alloc] initWithRootViewController:viewController];
UIWindow* window = [[UIWindow alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];
[window addSubview:controller.view];
[window makeKeyAndVisible];

return YES;
} 
```

/orders 处的 json 结果：

![在此处输入图像描述](../Images/ca277c9e7fdc1c396e80461f9e266d40.png)

对处理这个问题有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T01:02:11.360

嗬！原因是 twitter API 不符合键值编码。一旦我改变：

```
 [objectManager.mappingProvider setObjectMapping:orderMapping forResourcePathPattern:@"/orders"]; 
```

和：

```
 [objectManager.mappingProvider setObjectMapping:orderMapping forKeyPath:@"orders"]; 
```

它再次起作用了！

谢谢，希望它对某人有所帮助。

# svn - 在 Sublime 存储库中列为用户“未知”？

> ID：11302959
> 
> 赞同：0
> 
> 时间：2012-07-03T00:24:53.730
> 
> 标签：svn, version-control, repository, system-administration

使用 Subversion 作为我的源代码控制，我上周建立了一个项目并一直在检查代码。刚刚意识到我在崇高的用户标题下被列为“未知”。

签入/签出该项目的每个人也被列为未知数。

有谁知道如何在不删除和重新开始的情况下纠正这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:08:18.417

您似乎在存储库上启用了匿名提交。这可以在`conf/svnserve.conf`服务器上的存储库文件中更改。

[您可以在SVN 文档](http://svnbook.red-bean.com/en/1.0/ch06s03.html)中找到更多信息。

# android - Android Bitmap 太重的错误

> ID：11302964
> 
> 赞同：0
> 
> 时间：2012-07-03T00:25:53.963
> 
> 标签：android, memory, bitmap

我有以下问题，你们中的一些人必须在我的 android 应用程序上知道：

> 3288 字节的外部分配对于此进程来说太大。
> 
> 内存不足：堆大小=5959KB，已分配=3922KB，位图大小=18614KB
> 
> VM 不允许我们分配 3288 字节

事实：

*   我正在创建屏幕的位图（非常大），并对其进行操作（更改大小等...）以进行翻页动画。

*   它仅在渴望 HTC 时崩溃：在 Galaxy s2 和 kindle fire 上，没有问题。

*   每次使用以下代码创建新位图时，我已经在取消分配当前位图：

    位图旧 = this.bitmap;

    ```
    this.bitmap = bitmap;
    this.invalidate();
    if(old != null)
        old.recycle(); 
    ```

*   我也试着调用这个函数：

    public void recycle() { if (this.bitmap!=null) this.bitmap.recycle(); System.gc(); Runtime.getRuntime().gc(); }

在我的代码中有好几次，有时它会稍微好一些（就像它稍后崩溃一样），但这仍然不好。

*   我在这个问题上花了很多时间，但我真的不知道如何解决它。好像在论坛上有很多错误信息，所以我有点迷路了。

谢谢，要求更精确。

编辑 ：

这是一个叫做很多的代码：

```
//set the foreground image with the current day
                    Bitmap b = Bitmap.createBitmap(visibleLayout.getWidth(), visibleLayout.getHeight(),Bitmap.Config.ARGB_8888);
                    Canvas c = new Canvas(b);
                    visibleLayout.draw(c);

                    viewBitmapNext.setBitmap(b);

                    viewBitmapNext.setVisibility(View.VISIBLE); 
```

其中 viewBitmapNext 是 View 类的重写元素。上面描述了 setBitmap 函数。

关于调整大小，我做了这行代码：

```
viewBitmapPrevious.setLayoutParams(new RelativeLayout.LayoutParams((int) (iterator - ((totalWidth - iterator) - activity.getResources().getDimension(R.dimen.margin_right))/2), RelativeLayout.LayoutParams.WRAP_CONTENT)); 
```

再一次，告诉我你是否想知道更多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T02:24:43.750

我发现了问题所在。这对任何人都不会感兴趣，因为这是一个与我的项目密切相关的愚蠢错误，但我还是这么说。

我实际上有2个错误：

*   一个循环无限地创建元素。
*   在廉价手机上执行某个操作后，我将两张大图片作为背景（我仍在使用它，但应该很容易解决）。完成后我会编辑这个答案。

对于帮助我的每个人，您都找不到问题的解决方案（与我所做的位图屏幕无关），但它仍然很有帮助。

谢谢。

# javascript - 成功提交 Web 表单后，Javascript 重置功能将不起作用

> ID：11302966
> 
> 赞同：0
> 
> 时间：2012-07-03T00:26:11.643
> 
> 标签：javascript, asp.net

我是 JavaScript 新手。我正在使用 ASP.NET 在 Visual Studio 中工作，并且我有一个简单的表单。我还有一个 JavaScript 函数来验证表单和一个 JavaScript 函数来重置表单。验证和提交工作正常。但是，提交表单后，我无法让 JavaScript 重置功能工作。我也尝试过使用常规的 HTML 输入按钮，但它不起作用。它在成功提交之前工作正常，但之后就不行了。任何帮助将不胜感激。

```
function resetForm() {
      document.getElementById("accountForm").reset();
}

<asp:Button ID="subBtn" runat="server" Text="Submit" OnClientClick="return validateForm()" onclick="subBtn_Click" />
<asp:Button ID="rstBtn" runat="server" Text="Reset"  OnClientClick="resetForm()" oncClick="rstBtn_Click"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T00:47:08.677

您的重置按钮同时具有客户端和服务器端事件处理程序。这是必要的吗？考虑使用在客户端工作的按钮重置表单，例如

```
<input type="reset" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T00:49:17.443

显然表单正在被重置，但控件具有默认值，因此它们是在表单重置时设置的。

重置按钮会将所有控件重置为其默认值。如果要清除默认值以使所有表单控件都没有值，则需要清除它们的所有默认值，例如：

```
function clearForm(form) {
  var control, controls = form.elements;

  for (var i=0, iLen=controls.length; i<iLen; i++) {
    control = controls[i];

    // Don't change value of submit or reset buttons
    if (control.type != 'submit' && control.type != 'reset') {

      if (control.tagName.toLowerCase() == 'select') {

        for (var j=0, jLen=control.options.length; j<jLen; j++) {
          control.options[j].defaultSelected = false;
        }             

      } else if (control.defaultChecked) {
        control.defaultChecked = false;

      } else {
        control.defaultValue = '';
      }
    }
  }
  // Now reset the form
  form.reset();
} 
```

并将对表单的引用传递给函数，因此您的重置按钮类似于：

```
<input type="reset" onclick="clearForm(this.form);"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T00:28:02.127

它确实重置了表单，提交后的表单初始状态具有值。

> **reset**
> 恢复表单元素的默认值。它执行与重置按钮相同的操作。

[规格](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-76767677)

如果这是您喜欢的，您可以编写 javascript 代码来清除所有输入。

```
var e = document.getElementsByTagName('input');
for (var i = 0; i < e.length; i++){
    e[i].value = "";
} 
```

如果你可以使用**jQuery**，那就简单多了：

```
$('input[type="text"], textarea, select').val(''); 
```

# php - PHP APC - 为什么加载缓存的数组操作码很慢？

> ID：11302967
> 
> 赞同：3
> 
> 时间：2012-07-03T00:26:18.783
> 
> 标签：php, apc, opcode-cache

我正在使用 APC 来减少我的 PHP 文件的加载时间。我的文件加载速度非常快，除了一个我定义了 100 多个数组的文件。这个 270 kb 的文件需要 200 毫秒才能加载。其余的文件充满了对象、方法和函数。

我想知道：OP 代码缓存是否不适用于数组？

我的 APC 缓存应该足够大以处理我的所有类。目前我 40% 的缓存是免费的。我的命中率是99%。

```
apc.shm_size=32 M
apc.max_file_size = 1M
apc.shm_segments= 1 
```

APC 3.1.6

我正在使用 PHP 5.2、Apache 2 和 Windows Vista。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T01:05:10.903

所有数组在存储在缓存中时都需要进行[序列化，然后在从缓存中加载它们时再次取消序列](http://www.php.net/manual/en/function.serialize.php)[化](http://www.php.net/manual/en/function.unserialize.php)，这会花费时间，并且可能是您遇到的速度损失的重要因素。（供您参考：[序列化）](http://en.wikipedia.org/wiki/Serialization)

[加快序列化速度的](http://codepoets.co.uk/2011/php-serialization-igbinary/)一种方法是使用[igbinary](http://pecl.php.net/package/igbinary)`apc.serializer=igbinary` ，通过将php.ini 或通过 APC 的 ini 文件放入，igbinary 可以与 APC 无缝使用。（注意：这需要 APC >= 3.1.7）

您还可以将[apc.stat](http://www.php.net/manual/en/apc.configuration.php#ini.apc.stat)（在同一个 ini 文件中）设置为 0，以便它只检查文件的修改一次，而不是每次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T01:37:15.707

关于操作码缓存的一件事是，除非您正确配置它，否则它将继续统计每个文件以查找更改。如果您需要解析许多文件并将其转换为操作码，这可能会导致大量开销。

通常通过设置`apc.stat = 0`. 但是，请注意，为了更改您的代码，您需要调用`apc_clear_cache()`或重新启动 apache。

[http://www.php.net/manual/en/apc.configuration.php#ini.apc.stat](http://www.php.net/manual/en/apc.configuration.php#ini.apc.stat)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T21:13:14.037

问题是使用 gettext 库来翻译所有内容。当我摆脱大约 1000 个函数调用时，加载时间从 200 毫秒减少到 6 毫秒。

我的猜测是数据的序列化也是一个问题，但它是次要的。

# geolocation - 构建 Bing 商店定位器

> ID：11302969
> 
> 赞同：0
> 
> 时间：2012-07-03T00:26:32.417
> 
> 标签：geolocation, bing-maps

我试过谷歌，但我不够聪明，无法构建自己的谷歌商店定位器。一切都是旧的或 PHP 的，我使用 Python。甚至 GAE 也使用 Python，但我根本找不到任何 Python 教程。我什至在这里获得了一个赏金，以获取 Python 商店定位器的资源，唯一的答案是 2008 年的一篇帖子，该帖子本身已更新为“已弃用”。

所以我决定试试 Bing，它有更多的菜鸟选项，比如“在此处输入地址”，然后它就会在应用程序中列出。唯一的问题是所有内容都指向我 Bing Spacial Datasend，它说他们想要充电一条胳膊和一条腿。

另外，如果您知道的话，是否有任何关于构建 Bing 商店定位器的好教程？谷歌搜索对我来说是空的，但他们总是可以隐藏它们。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-17T14:29:18.060

如果您的位置少于 50 个，则可以根据免费使用条款使用 Bing 空间数据服务。如果您的应用程序是一个面向公众的网站，大多数商店定位器是哪个网站，您还可以每年针对 Bing 地图免费生成 125,000 笔交易。这是否足够取决于您拥有的商店和客户的数量。Bing 空间数据服务是一个非常好的选择，因为您只需上传数据并将其公开为您可以直接从 JavaScript 访问的空间休息服务，而无需任何服务器端代码。以下是如何在 Bing 空间数据服务中查询数据源的示例：http: [//www.bingmapsportal.com/ISDK/AjaxV7#SpatialDataServices1](http://www.bingmapsportal.com/ISDK/AjaxV7#SpatialDataServices1)

如果您的应用程序容量更大，那么您将需要 Bing 地图许可证。许可证的成本取决于您的应用程序将使用的交易量。如果您拥有 Bing Maps 许可证，则数据源在单个数据源中最多可以有 600,000 个位置，并且每个 Bing Maps 帐户最多允许有 25 个数据源。

# wordpress - wordpress 动态永久链接指向采用 URL 获取参数的页面

> ID：11302971
> 
> 赞同：1
> 
> 时间：2012-07-03T00:27:00.843
> 
> 标签：wordpress, dynamic, permalinks

我想要一个结构，例如 www.training.com/courses/course/location，其中课程和位置更改为课程名称和地理位置以动态转换为 www.training.com/course/?course=course&location=location

原因是我有一个插件来显示基于课程名称和位置的课程信息，它采用获取参数。

Ps 我不想手动将链接添加到 .htaccess 文件中来实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T04:18:51.923

课程和地点是否相互关联？如果是这样的话...

我建议为“课程”使用自定义帖子类型，并[附加自定义的非分层分类法](http://codex.wordpress.org/Taxonomies)，然后使用该帖子类型中的自定义字段将位置信息附加到每门课程。

[Types 插件](http://wordpress.org/extend/plugins/types/)可以相对轻松地处理所有这些事情（当然，您需要创建一个模板来显示这些信息）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T04:57:44.873

如果 URL 结构是可预测的，您可以尝试：

```
// $url = $_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"];

$url = "www.training.com/course/?course=course&location=location"; 
$array = explode('/',$url);
$rev_array = array_reverse($array);
$location = $rev_array[0];
$course = $rev_array[1]; 
```

然后稍微编辑插件代码以读取这些变量而不是获取变量。

# debian - 如何使用一个脚本构建 .deb .rpm .dmg 等

> ID：11302975
> 
> 赞同：5
> 
> 时间：2012-07-03T00:27:48.507
> 
> 标签：debian, rpm

这是我的问题：

我有一个程序，想以二进制格式分发它，这样用户就不需要自己编译了。

我已经构建了一个 .deb 包。但是，我记得应该有一些程序，它接受一个配置文件，并生成不同格式的不同二进制包，如 .deb、.rpm，甚至 .dmg、.msi 等。意思是，我只需要告诉它哪个文件应该包含在包中（以及如何构建它），它可以为我生成不同的包。

在谷歌上搜索了一些关键词后，我注意到在不知道它的名字的情况下很难找到这样的程序。（我确实认为应该有类似的东西。事实上，我记得我在某个地方看到过。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T00:48:27.050

Effing 包管理可以同时执行 rpm 和 deb（从 [https://github.com/jordansissel/fpm](https://github.com/jordansissel/fpm)获取）

对于您正在谈论的那种跨平台部署，您可以尝试[http://project-builder.org/](http://project-builder.org/)

*注意 - 我从未使用过这些工具，但我听说过它们

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T09:10:25.913

我认为你的方法是错误的。作为开发人员，您的工作是开发程序，而不是为所有不同的 Linux 发行版打包它。让发行版处理包装。由于您不了解他们的打包指南，您可能会创建二进制包，这些包可能会在某些系统上以惊人的方式失败，更糟糕的是......甚至会破坏用户的系统。

但是，您**可以**做什么：

*   确保许可清晰且简单（最好是 OSI 批准的许可之一）
*   列出您的依赖项，包括版本，不要捆绑它们
*   拥有健全的更新策略（即迷你/微型版本更新不会破坏 API 或引入巨大的变化）
*   使用标准构建系统之一（取决于项目，它可以是 autotools、setup.py、maven 等）
*   理想情况下不要做奇怪的事情，而是学习一些好的项目是如何做的（Apache项目通常有明智的方法）
*   **然后**联系发行版并尝试获取一些对维护您的程序感兴趣的软件包

# php - 保留元素属性的前缀

> ID：11302976
> 
> 赞同：2
> 
> 时间：2012-07-03T00:27:49.140
> 
> 标签：php, xml, xpath

我有以下代码来获取`RichText`元素的属性。属性要么有前缀，`s7:`要么根本没有前缀。

```
<?php
$url = "http://testvipd7.scene7.com/is/agm/papermusepress/HOL_12_F_green?&fmt=fxgraw";    
$xml = simplexml_load_file($url);       
$xml->registerXPathNamespace('default', 'http://ns.adobe.com/fxg/2008');
$xml->registerXPathNamespace('s7', 'http://ns.adobe.com/S7FXG/2008');
$textNode = $xml->xpath("//default:RichText[@s7:elementID]");

function pr($var) { print '<pre>'; print_r($var); print '</pre>'; }

$result1 = array();
$result2 = array();
foreach($textNode as $node){
    $result1[] = $node->attributes('http://ns.adobe.com/S7FXG/2008');
    $result2[] = $node->attributes();

}

$text = array_merge($result1,$result2);

pr($text);

?> 
```

**输出**

```
Array
(
    [0] => SimpleXMLElement Object
        (
            [@attributes] => Array
                (
                    [caps] => none
                    [colorName] => 
                    [colorValue] => #518269
                    [colorspace] => rgb
                    [elementID] => smalltext
                    [fill] => true
                    [fillOverprint] => false
                    [firstBaselineOffset] => ascent
                    [joints] => miter
                    [maxFontSize] => 11
                    [miterLimit] => 4
                    [referencePoint] => inherit
                    [rowCount] => 1
                    [rowGap] => 18
                    [rowMajorOrder] => true
                    [stroke] => false
                    [strokeOverprint] => false
                    [warpBend] => 0.5
                    [warpDirection] => horizontal
                    [warpHorizontalDistortion] => 0
                    [warpStyle] => none
                    [warpVerticalDistortion] => 0
                    [weight] => 1
                )

        )

    [1] => SimpleXMLElement Object
        (
            [@attributes] => Array
                (
                    [caps] => none
                    [colorName] => 
                    [colorValue] => #518269
                    [colorspace] => rgb
                    [elementID] => largetext
                    [fill] => true
                    [fillOverprint] => false
                    [firstBaselineOffset] => ascent
                    [joints] => miter
                    [maxFontSize] => 19
                    [miterLimit] => 4
                    [referencePoint] => inherit
                    [rowCount] => 1
                    [rowGap] => 18
                    [rowMajorOrder] => true
                    [stroke] => false
                    [strokeOverprint] => false
                    [warpBend] => 0.5
                    [warpDirection] => horizontal
                    [warpHorizontalDistortion] => 0
                    [warpStyle] => none
                    [warpVerticalDistortion] => 0
                    [weight] => 1
                )

        )

    [2] => SimpleXMLElement Object
        (
            [@attributes] => Array
                (
                    [x] => 278.418
                    [y] => 115.542
                    [columnGap] => 18
                    [columnCount] => 1
                    [textAlign] => left
                    [fontFamily] => Trade Gothic LT Pro Bold Cn
                    [fontSize] => 11
                    [color] => #518269
                    [whiteSpaceCollapse] => preserve
                    [width] => 212.582
                    [height] => 33
                )

        )

    [3] => SimpleXMLElement Object
        (
            [@attributes] => Array
                (
                    [x] => 278.998
                    [y] => 86.7168
                    [columnGap] => 18
                    [columnCount] => 1
                    [textAlign] => left
                    [fontFamily] => Bootstrap
                    [fontSize] => 19
                    [color] => #518269
                    [whiteSpaceCollapse] => preserve
                    [trackingRight] => 4%
                    [width] => 240
                    [height] => 29
                )

        )

) 
```

收集的所有属性`$result1[]`都是应该具有`s7:`前缀的属性。但是当它存储来自 xml 的数据时，它会`s7:`从这些属性中剥离出来。您可以看到这是因为键 0 和 1 的数组值已删除前缀。我需要前缀留在那里，所以它看起来像这样：

```
[s7:caps] => none
[s7:colorName] => 
[s7:colorValue] => #518269
[s7:colorspace] => rgb
[s7:elementID] => smalltext

etc... 
```

如何防止前缀被剥离，或者如何在构建数组时将其添加回那里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:59:21.160

不知道为什么 PHP 从提取中省略了命名空间——也许对 libxml 更了解的人可以帮助解决这个问题——但在提取后重命名它们很简单。

```
//some sample XML - get the attributes
$xml = "<root name='root'><node id='1'>hello</node></root>";
$doc = new SimpleXMLElement($xml);
$attrs = $doc->xpath('//@*');

//iterate over array and add in namespace prefixes      
foreach($attrs as $key => $val) {
    $attrs['s7:'.$key] = $val;
    unset($attrs[$key]);
} 
```

# php - Web 应用程序，用户上传文件夹最安全的地方

> ID：11302977
> 
> 赞同：3
> 
> 时间：2012-07-03T00:27:54.040
> 
> 标签：php, web-applications, upload, permissions, directory

我的应用程序的一般结构：

```
[includes] - not accessible by the web
.. important database classes, etc
[public]
.. all files that the application publicly uses 
```

我正在尝试决定应该将`[uploads]`文件夹存储在哪里。这是所有用户将存储他们的媒体（图像等）的地方

```
[uploads]
   [user123]
      mypic.jpg
      mysecondpic.jpg
   [user456]
      picpic.jpg
      yeah.jpg 
```

目前，我在文件夹中有这个文件`[public]`夹，但由于某种原因，我不相信这是正确的地方......

`[includes]`公众将无法访问该文件夹，只有 PHP 可以在那里导航。

为了最佳实践，您对此有何看法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T00:29:48.387

在同级目录中。即与`includes/`和处于同一级别的目录`public/`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T00:34:59.687

这取决于您要达到的目标。如果您要上传例如用户文章的照片，请将它们放在公开可见的文件夹中，例如`/public/images`（无论哪种方式，图像都是可见的）。另一方面，如果您正在制作一个将（例如）从上传文件中获利的应用程序，最好将它们放在更高的级别，例如`/uploads`，这样它们就不会被公开访问，但是您可以创建一个代码将启用下载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T00:38:06.983

> 我想只有那个用户。我的意思是，没有将“共享”媒体带入对话......这是一种可能性。

在这种情况下，通常的设置是

*   将文件放在 Web 根目录之外（即在`public`文件夹之外 - 具体位置取决于您）

*   构建一个 PHP 脚本来检查用户权限并在所有检查都通过时传递请求的文件。然后将为每个资源调用该 PHP 脚本，如下所示：

    > domain.com/resource.php?user=user123&file=mypic.jpg

    （或使用漂亮的 URL 重写）

但是请记住，这需要为每个请求的资源启动一个昂贵的 PHP 进程。一定要使用非常聪明的缓存来最小化请求。

有 Apache 和 nginx 模块可以使这个过程更高效，命名为[X-Sendfile](https://stackoverflow.com/questions/80186/using-x-sendfile-with-apache-php)。这可能值得一看。

# scala - foreach 中的模式匹配，然后执行最后一步

> ID：11302979
> 
> 赞同：6
> 
> 时间：2012-07-03T00:28:31.237
> 
> 标签：scala, playframework, playframework-2.0

`foreach`在语句中的模式匹配之后可以做任何事情吗？
我想做一个匹配后的步骤，例如设置一个变量。我还想强制返回 Unit，因为我`foreach`的 is String => Unit，默认情况下 Scala 希望返回最后一条语句。

这是一些代码：

```
 Iteratee.foreach[String](_ match {
      case "date" => out.push("Current date: " + new Date().toString + "<br/>")
      case "since" => out.push("Last command executed: " + (ctm - last) + "ms before now<br/>")
      case unknow => out.push("Command: " + unknown + " not recognized <br/>")
    } // here I would like to set "last = ctm" (will be a Long) 
    ) 
```

**更新：** 新代码和上下文。还添加了新问题:) 它们嵌入在评论中。

```
def socket = WebSocket.using[String] { request =>

 // Comment from an answer bellow but what are the side effects?
 // By convention, methods with side effects takes an empty argument list
 def ctm(): Long = System.currentTimeMillis

 var last: Long = ctm

 // Command handlers
 // Comment from an answer bellow but what are the side effects?
 // By convention, methods with side effects takes an empty argument list
 def date() = "Current date: " + new Date().toString + "<br/>"
 def since(last: Long) = "Last command executed: " + (ctm - last) + "ms before now<br/>"
 def unknown(cmd: String) = "Command: " + cmd + " not recognized <br/>"

 val out = Enumerator.imperative[String] {}

 // How to transform into the mapping strategy given in lpaul7's nice answer.
 lazy val in = Iteratee.foreach[String](_ match {
   case "date" => out.push(date)
   case "since" => out.push(since(last))
   case unknown => out.push(unknown)
 } // Here I want to update the variable last to "last = ctm"
 ).mapDone { _ =>
   println("Disconnected")
 }

 (in, out)
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-03T01:30:48.983

我不知道你`ctm`是什么，但你总是可以这样做：

```
val xs = List("date", "since", "other1", "other2")

xs.foreach { str =>

    str match {
        case "date"  => println("Match Date")
        case "since" => println("Match Since")
        case unknow  => println("Others")
    } 

    println("Put your post step here")
} 
```

请注意，当您想使用代码块作为 foreach() 的参数时，您应该使用`{}`而不是。`()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T02:00:32.867

我不会回答你的问题，但我应该指出，在 Scala 中重新分配变量是一种不好的做法。我建议您重写代码以避免`var`s.

首先，将您的字符串转换为其他内容：

```
val strings = it map {
  case "date" => "Current date: " + new Date().toString + "<br/>"
  case "since" => "Last command executed: " + (ctm - last) + "ms before now<br/>"
  case unknow => "Command: " + unknown + " not recognized <br/>"
} 
```

接下来推一下

```
strings map { out.push(_) } 
```

看起来你的实现`push`有副作用。对您不利，因为此类方法会使您的程序不可预测。`push`您可以通过返回元组轻松避免副作用：

```
def push(s: String) = {
  ...
  (ctm, last)
} 
```

并像这样使用它：

```
val (ctm, last) = out.push(str) 
```

**更新：**

当然，要使程序有用，需要副作用。我只是说依赖于外部变量的方法比[纯粹](http://en.wikipedia.org/wiki/Pure_function)的方法更难预测，很难推理。没有副作用的测试方法更容易。

是的，你应该更喜欢`val`s 而不是`var`s，它使你的程序更“实用”和无状态。无状态算法是线程安全的并且非常可预测。

看起来您的程序本质上是有状态的。至少，尽量保持“功能性”和无状态:)

我对您的问题的建议解决方案是：

```
// By convention, methods with side effects takes an empty argument list
def ctm(): Long = // Get current time

// Command handlers
def date() = "Current date: " + new Date().toString + "<br/>"
def since(last: Long) = "Last command executed: " + (ctm() - last) + "ms before now<br/>"
def unknown(cmd: String) = "Command: " + unknown + " not recognized <br/>"    

  // In your cmd processing loop

  // First, map inputs to responses
  val cmds = inps map {
    case "date"  => date()
    case "since" => since(last)
    case unk     => unknown(unk)
  }

  // Then push responses and update state
  cmds map { response =>
    out.push(response)
    // It is a good place to update your state
    last = ctm()
  } 
```

如果没有代码的上下文，很难对此进行测试，因此您应该自己适应它的需求。我希望我已经回答了你的问题。

# iphone - 当应用程序在后台或设备被锁定时运行代码

> ID：11302980
> 
> 赞同：1
> 
> 时间：2012-07-03T00:28:38.193
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我有一段代码，我在其中进行服务器调用，并根据响应播放声音。现在，当我的应用程序在后台或我的设备被锁定时，这不起作用。

即使应用程序在后台或设备被锁定，有什么方法可以执行这段代码（服务器调用和响应处理）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T00:40:59.940

没有*通用*的解决方案，这是设计使然。（Apple 不希望您在后台运行潜在的 CPU 和电源密集型进程并降低用户体验。）

有一些有限的情况可供选择：

1.  你说你想播放声音。如果你的意思是“播放音乐”或一些这样的流媒体，那么你的应用程序可以注册一个音频[后台任务](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)来执行。请注意，您*实际上*必须在流式传输音频；Apple 理所当然地拒绝尝试使用这种方法来规避一般情况禁令的应用程序，并将相应地拒绝您的 App Store 提交。
2.  您可以反转您的方案并让服务器通过[Apple Push Notification 服务](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)发送推送通知。根据用户的设置，可能会产生警报、标记或**声音**。如果您不流式传输音频，这可能最适合您。
3.  如果您真正打算做的是完成上传或下载（并且声音是完成通知），您可以在应用程序名义上后台或设备锁定后请求一些额外的时间来完成该任务。[`-[UIApplication beginBackgroundTaskWithExpirationHandler:]`](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html)在适当的方法中使用from`UIApplicationDelegate`来注册这样的任务。请注意，您完成任务的时间有限（但可观），我认为您无法在此模式下播放媒体。

# c++ - C++11 - 将非静态数据成员声明为“自动”

> ID：11302981
> 
> 赞同：53
> 
> 时间：2012-07-03T00:28:39.610
> 
> 标签：c++, c++11, auto, variable-declaration

如果在声明中初始化非静态数据成员，C++11 是否允许将它们声明为“自动”？例如：

```
struct S
{
    auto x = 5;  // in place of 'int x = 5;', which is definitely allowed
}; 
```

GCC 4.7 拒绝上述代码，而接受`int x = 5;`.

假设这不是编译器错误，而是标准确实不允许，为什么不呢？它与声明局部变量一样有用`auto`。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-07-03T00:58:00.343

禁止非静态成员的规则在 7.1.6.4 第 4 条中：

> auto 类型说明符也可用于在选择语句 (6.4) 或迭代语句 (6.5) 的条件中声明变量，在 new-type-id 或 type-id 的 type-specifier-seq 中一个新表达式 (5.3.4)，在一个 for-range-declaration 中，以及在声明一个 带有大括号或相等初始化器的**静态数据成员**，该初始化器出现在类定义的成员规范中 (9.4.2) .

我发现它的基本原理是静态的[，](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2713)这反映了 James McNellis 在评论中的解释。

> 一个国家机构不喜欢允许非静态的自动类型说明符。从给作者的电子邮件中：
> 
> ```
>  template< class T >
>     struct MyType : T {
>       auto data = func();
>       static const size_t erm = sizeof(data);
>     }; 
> ```
> 
> 为了确定 X 的布局，我们现在有 2 阶段名称查找和 ADL。请注意， func 可以是类型或函数；它可以在 T、MyType 的命名空间、实例化时 T 的关联命名空间、全局命名空间、匿名命名空间或任何受 using 指令约束的命名空间中找到。小心我们可能会抛出一些 concept_map 查找以求好运。根据标题包含的顺序，我什至可能会得到不同的 ADL 结果，并打破一个定义规则——这不需要被诊断。
> 
> 由于这个争议，作者不再建议对非静态数据成员允许 auto 。

因此，基本上取决于标题包含的顺序，类型`data`可能会有很大不同。当然，`auto x = 5;`不需要依赖 2 阶段名称查找或 ADL，但是，我假设他们将其设为“一揽子”规则，否则，他们将不得不为每个用例制定单独的规则，这将使事情很复杂。

在同一篇论文中，作者提议取消这个限制，然而，这个提议似乎被拒绝了，可能是由于上述理由，而且无论初始化器是什么，预期的行为都可以是相同的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-09-24T05:41:30.863

**为他人：**

使用 C++17 可以间接（自动推导非静态成员类型）。您需要使用模板和演绎指南来实现：

```
template< class data_t>
struct MyType 
{
    data_t data;
    static constexpr auto data_size = sizeof(data_t);

    MyType( data_t && p_data ) : data(p_data) {}
};

template< class data_t>
MyType(data_t &&) -> MyType<std::remove_reference_t<data_t>>; 
```

我不知道如何，但是这个自动成员确实需要在没有它们的情况下将其融入语言，某些模式几乎是不可能的。

如果 lambda 通过引用捕获类的成员，则上述方案不起作用**。**对于避免使用类型擦除函数的高度可补偿的类，这是一种有用的模式。我经常在嵌入式系统上做的事情。

[https://godbolt.org/z/W-K9Uk](https://godbolt.org/z/W-K9Uk)

您可以将语言修改为提交，允许 lambda 使用 placement-new 和 offset_of 引用不存在的类的成员，但这很荒谬，不应该被要求。

# java - JTextArea 消耗大量内存

> ID：11302982
> 
> 赞同：3
> 
> 时间：2012-07-03T00:28:55.683
> 
> 标签：java, swing, document, jtextarea

我在使用 Java 和 Swing 时遇到了一些内存问题。我有一个`JTextArea`（与 相同的问题`JTextPane`）用于从 C++ 可执行文件重定向标准输出。而且因为我输出了很多标准输出，`JTextPane`所以占用了大量空间。无论如何，我将其归结为以下代码，全部使用 Java。

```
private javax.swing.JTextArea jtextareastdout;
....

for (int i = 0; i < 200000; i++) {
    String randomstr = UUID.randomUUID().toString();

    jtextareastdout.setText(randomstr);  //<tag_memory>
    if (i % 100 == 0)
        System.gc(); //<tag_no_help>
} 
```

上面的代码消耗了 100MB。注释掉 tag_memory 行，少了很多（30MB 加上我所有的其他代码和 UI）。如何减少 Java 的内存使用量？当前使用 Java 7 更新 4。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T01:36:41.167

> 我只是不明白所有的记忆都去哪儿了。

[`PlainDocument`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/PlainDocument.html)讲述这个故事：每个代码点一个或两个 16 位代码单元，一个行图开始以及使其可编辑所需的所有障碍。对于只读查看，我会使用重定向：`yourprogram 2>&1 > view`。在 Java 中，您可以从`stdin`a`List<String>`中读取，`String`每行一个，然后使用`JTable`. 默认[渲染器](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)非常有效。[这里](https://stackoverflow.com/a/9134371/230513)有一个相关的例子。

# r - 与否定匹配

> ID：11302985
> 
> 赞同：9
> 
> 时间：2012-07-03T00:29:48.600
> 
> 标签：r

这真的很简单，但我似乎无法找到它。我知道 R 有一个否定版本，`%in%`它返回“不在”。显然我可以只使用`!(x %in% y)`，但是该语言包含一个已经否定的构造，我想使用它，goshdarnit。

那么有什么功能呢？搜索以及`%nin%`所有`%notin%`失败。

如果您对答案进行基准测试而不是`!(x %in% y)`使用以下示例数据，则可以为您提供互联网奖励：

```
x <- sample( sample(letters,5), 10^3, replace=TRUE)
y <- sample( letters, 10^5, replace=TRUE) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-03T01:15:47.957

只是出于兴趣。定义

```
"%w/o%" <- function(x, y) x[!x %in% y] 
'%ni%' <- Negate('%in%')

> benchmark(y[y%ni%x], y%w/o%x,replications=1000)
         test replications elapsed relative user.self sys.self user.child
2   y %w/o% x         1000    5.32 1.000000      4.60     0.70         NA
1 y[y %ni% x]         1000    5.34 1.003759      4.68     0.65         NA
  sys.child
2        NA
1        NA 
```

我有饼干吗？

# forms - 这些输入框的名称是什么，这些输入框允许多个自动完成输入，然后在选择时成为文本框中的“按钮”？

> ID：11302989
> 
> 赞同：1
> 
> 时间：2012-07-03T00:30:03.233
> 
> 标签：forms, input

我问的一个完美例子是，在 SO 中提出问题时，请查看“标签”输入框。您可以键入“php”并从众多“php”标签中进行选择，然后当您选择它时，“php”会变成一个带有“X”的按钮。

我很好奇这种输入的技术术语是什么，所以我可以看看我使用的 jquery、extjs 或各种库是否有这个。

![在此处输入图像描述](../Images/a060d686abf95a16f08c297ce135dbde.png)

# c++ - 如何检查字符串是否全部为小写字母和数字？

> ID：11302990
> 
> 赞同：3
> 
> 时间：2012-07-03T00:30:06.817
> 
> 标签：c++, string, lowercase, alphanumeric

有没有一种方法可以检查这些情况？还是我需要解析字符串中的每个字母，并检查它是否是小写（字母）并且是数字/字母？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T00:32:52.803

您可以使用[islower()](http://en.cppreference.com/w/cpp/locale/islower)、[isalnum()](http://en.cppreference.com/w/cpp/locale/isalnum)来检查每个字符的这些条件。没有字符串级别的函数可以执行此操作，因此您必须自己编写。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T00:42:17.383

假设“C”语言环境是可以接受的（或换成不同的字符集`criteria`），使用`find_first_not_of()`

```
#include <string>

bool testString(const std::string& str)
{
      std::string criteria("abcdefghijklmnopqrstuvwxyz0123456789");
      return (std::string::npos == str.find_first_not_of(criteria);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-03T04:20:24.973

它不是很为人所知，但语言环境实际上*确实*具有一次确定整个字符串特征的功能。具体来说，`ctype`语言环境的 facet 具有 a`scan_is`和 a `scan_not`，用于扫描适合指定掩码（字母、数字、字母数字、小写字母、大写字母、标点符号、空格、十六进制数字等）的第一个字符，或不适合的第一个字符。分别适合它。除此之外，它们的工作方式有点像`std::find_if`，返回您作为“结束”传递的任何内容以表示失败，否则返回指向字符串中不符合您要求的第一项的指针。

这是一个快速示例：

```
#include <locale>
#include <iostream>
#include <iomanip>

int main() {

    std::string inputs[] = { 
        "alllower",
        "1234",
        "lower132",
        "including a space"
    };

    // We'll use the "classic" (C) locale, but this works with any
    std::locale loc(std::locale::classic());

    // A mask specifying the characters to search for:          
    std::ctype_base::mask m = std::ctype_base::lower | std::ctype_base::digit;

    for (int i=0; i<4; i++) {
        char const *pos;
        char const *b = &*inputs[i].begin();
        char const *e = &*inputs[i].end();

        std::cout << "Input: " << std::setw(20) << inputs[i] << ":\t";

        // finally, call the actual function:
        if ((pos=std::use_facet<std::ctype<char> >(loc).scan_not(m, b, e)) == e)
            std::cout << "All characters match mask\n";
        else
            std::cout << "First non-matching character = \"" << *pos << "\"\n";
    }
    return 0;
} 
```

我怀疑大多数人会更喜欢`std::find_if`使用它——使用它几乎相同，*但*可以很容易地推广到更多情况。尽管这具有更窄的适用性，但它对用户来说并不是很容易（尽管我想如果你正在扫描*大块*文本，它可能至少会快一点）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T00:46:05.353

您可以使用 tolower 和 strcmp 来比较 original_string 和 tolowered 字符串。然后每个字符单独计算数字。

（或）按字符执行以下操作。

```
#include <algorithm>

static inline bool is_not_alphanum_lower(char c)
{
    return (!isalnum(c) || !islower(c));
}

bool string_is_valid(const std::string &str)
{
    return find_if(str.begin(), str.end(), is_not_alphanum_lower) == str.end();
} 
```

我使用了一些信息： [确定字符串是否仅包含字母数字字符（或空格）](https://stackoverflow.com/questions/2926878/determine-if-a-string-contains-only-alphanumeric-characters-or-a-space)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-15T02:31:25.733

只需使用[`std::all_of`](https://en.cppreference.com/w/cpp/algorithm/all_any_none_of)

```
bool lowerAlnum = std::all_of(str.cbegin(), str.cend(), [](const char c){
    return isdigit(c) || islower(c);
}); 
```

如果您不关心语言环境（即输入是纯 7 位 ASCII），则可以将条件优化为

```
[](const char c){ return ('0' <= c && c <= '9') || ('a' <= c && c <= 'z'); } 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-03T01:03:05.707

如果您的字符串包含 ASCII 编码的文本并且您喜欢编写自己的函数（就像我一样），那么您可以使用它：

```
bool is_lower_alphanumeric(const string& txt)
{
  for(char c : txt)
  {
    if (!((c >= '0' and c <= '9') or (c >= 'a' and c <= 'z'))) return false;
  }
  return true;
} 
```

# shell - 从 awk 中的 URL 解析必填字段

> ID：11302992
> 
> 赞同：0
> 
> 时间：2012-07-03T00:30:20.713
> 
> 标签：shell, awk

我有一个要求是从 URL 解析必填字段。为此，我需要逐个字母遍历该 URL，因为任何单词之间没有空格分隔。但我无法得到那个。我已经尝试过以下

```
awk '{FS = "";for (i = 2; i <= NF; i++) {print $i}}'  file 
```

该文件包含这个

[https://stackoverflow.com/questions/ask/submit?s=sddasdsadSOMEFIELD=8171](https://stackoverflow.com/questions/ask/submit?s=sddasdsadSOMEFIELD=8171) **WANTEDFIELD=121212** SOMEFIELD=1201212...

所以我的想法是逐个字母遍历这个 URL，然后到达必填字段.. 但我无法做到这一点。请有任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:11:42.873

这可以工作，但假设模式带有 = 和 *。

```
echo "http://stackoverflow.com/questions/ask/submit?s=sddasdsadSOMEFIELD=8171*WANTEDFIELD=121212*SOMEFIELD=1201212..." |awk -F "[*=]" -vFIELDNAME="WANTEDFIELD"  '{for (i=1;i<=NF;i++){if(match($i,FIELDNAME)){printf "%s\t", $(i+1)}};printf "\n"}' 
```

输出：

```
121212 
```

更改为 SOMEFIELD 作为目标字段：

```
echo "http://stackoverflow.com/questions/ask/submit?s=sddasdsadSOMEFIELD=8171*WANTEDFIELD=121212*SOMEFIELD=1201212..." | awk -F "[*=]" -vFIELDNAME="SOMEFIELD"  '{for (i=1;i<=NF;i++){if(match($i,FIELDNAME)){printf "%s\t", $(i+1)}};printf "\n"}' 
```

结果是：

```
8171    1201212... 
```

# ckeditor - fkeditor 或 ckeditor 哪个更好？

> ID：11302993
> 
> 赞同：0
> 
> 时间：2012-07-03T00:30:22.633
> 
> 标签：ckeditor, fckeditor

我遇到了一个问题来选择 fkeditor 或 ckeditor 哪个比我的项目中的另一个更好。以及如何获得有关在 php.ini 中自定义这些编辑器中的任何一个的教程。你能说出一些我可以得到帮助的网站吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T00:35:51.680

CKEditor 以前称为 FCKEditor（创建者不知道 FCKEditor 听起来不是很专业） - 所以你会想要 CKEditor。

[CKEditor 网站](http://docs.cksource.com/)有丰富的信息——查看[用户指南](http://docs.cksource.com/CKEditor_3.x/Users_Guide)、[教程](http://docs.cksource.com/CKEditor_3.x/Tutorials)和[操作](http://docs.cksource.com/CKEditor_3.x/Howto)方法。此外，当您下载了 CKEditor 文件后，您会在 ckeditor/_samples/php 中找到一些示例代码，它们应该会有所帮助。

# mysql - Java 需要 mysql 兼容的 compress()/decompress()

> ID：11302995
> 
> 赞同：3
> 
> 时间：2012-07-03T00:30:28.657
> 
> 标签：mysql, compression, data-compression

我正在考虑将 MySql compress() 函数应用于一个 varchar 字段，并且每列往往从几千个字符运行到超过一百万个字符。文本几乎是普通的英语，所以我得到了 8 比 1 或更好的压缩。由于我有数百万条记录并且很少想要实际查看数据，因此压缩似乎是一个很好的工程权衡。

我需要在 Java 中进行大部分处理，并且 zip、gzip 和 bzip2 有很好的实现。所以这很酷。

但我真的很想能够使用标准的 MySql 客户端进行查询，例如

选择解压缩（长列）其中...

所以我希望我的 java 代码使用与内置函数相同或兼容的压缩算法。我找到的文档说“使用 zlib 等压缩库编译”

这有点模糊，我怎么能确切地知道该使用什么？

===编辑==要清楚，我希望能够使用“mysql”客户端程序进行调试，所以像：

选择解压缩（长列）其中...

根本不使用Java。但我想使用 JDBC 进行更新和插入。而主线使用，得先拿到压缩博客，然后解压。某种包装器或 ZipInputStream 很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T00:47:07.927

我不确定，但我会尝试用一个包装输出`InflaterInputStream()`：

```
ResultSet resultSet = statement.executeQuery("SELECT blobfield FROM table");
InputStream stream = new InflaterInputStream(resultSet.getBlob(1).getBinaryStream()); 
```

[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/zip/InflaterInputStream.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/zip/InflaterInputStream.html)已移至[https://docs.oracle.com/javase/7/docs/api/ java/util/zip/InflaterInputStream.html](https://docs.oracle.com/javase/7/docs/api/java/util/zip/InflaterInputStream.html)

这篇博文可能对您也很有趣： [http ://www.mysqlperformanceblog.com/2012/05/30/data-compression-in-innodb-for-text-and-blob-fields/](http://www.mysqlperformanceblog.com/2012/05/30/data-compression-in-innodb-for-text-and-blob-fields/)