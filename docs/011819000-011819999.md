# StackOverflow 问答 11819000-11819999

# asp.net - 带有 JSON 集合的 Mustache JS 模板

> ID：11819006
> 
> 赞同：2
> 
> 时间：2012-08-05T18:33:51.700
> 
> 标签：asp.net, json, mustache

嗨，这是我第一次尝试在 .net 中使用 MustacheJS 和 JSON 网络服务

目前我正在努力设置这个基本示例，我似乎无法找到我做错了什么：

我的 Webservice 正在返回以下字符串：

```
[
  {
    "ShortDescription":"BOX",
    "Description":"BOXING",
    "Id":1
  },
  {
    "ShortDescription":"EPL",
    "Description":"ENGLISH PREMIER LEAGUE",
    "Id":2
  }
] 
```

我已经用这个网站验证了它的语法：http: [//json.parser.online.fr/](http://json.parser.online.fr/)

这是我正在使用的 HTML 代码：

```
google.load("jquery", "1");
google.setOnLoadCallback(function () {
    $(document).ready(
        function () {

            $.ajax({
                url: "../data.asmx/geteagues",
                type: "POST",
                dataType: "json",
                data: "",
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    var template = "<h1>{{ShortDescription}} {{Description}}</h1>";
                    var html = Mustache.render(template, data);
                    $('#sampleArea').html(html);
                    alert(html);
                }
            })

        }
    )
}); 
```

我发布了整个 JS 代码，因为我不太擅长 javascript，基本上我想总是从谷歌加载最新的 JQuery 版本，然后进行我的 WS 调用。

到目前为止的问题是，当我在以下行中放置断点时：

```
 var html = Mustache.render(template, data); 
```

我看到模板设置正常，数据也是如此，与我在上面发布的值相同，但是 .render 函数正在返回：

# 我似乎不喜欢数据。

到目前为止，我看到的所有内联数据示例都具有以下结构：

```
{
  "repo": [
    { "name": "resque" },
    { "name": "hub" },
    { "name": "rip" },
  ]
} 
```

然后是这样定义的模板：

```
{{#repo}}
  <b>{{name}}</b>
{{/repo}} 
```

但是这与我的数据的唯一区别是我没有像“repo”这样的“父母”

在服务器端，我使用了一个名为 JSON.net 的 .net 库，并且在有关如何序列化集合的文档中：

james.newtonking.com/projects/json/help/html/SerializingCollections.htm

最终结果不包括父节点的名称，我的 Mustache 模板定义中缺少该名称：

```
[
  {
    "Name": "Product 1",
    "ExpiryDate": "2000-12-29T00:00Z",
    "Price": 99.95,
    "Sizes": null
  },
  {
    "Name": "Product 2",
    "ExpiryDate": "2009-07-31T00:00Z",
    "Price": 12.50,
    "Sizes": null
  }
] 
```

这是我想念的吗？我的数据中的“repo”父节点，以便我可以迭代我的模板？

在此先感谢您的时间。

-ed

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:37:17.083

每个@stealth 关于这个问题[Mustache.js: Iterate over a list received via json](https://stackoverflow.com/questions/11891123/mustache-js-iterate-over-a-list-received-via-json)

```
 {{ #. }}
        <b>{{Name}}</b>
    {{ /. }} 
```

请注意，与@stealth 答案的唯一区别是“#”而不是“/”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-02T15:23:31.077

行 data = { 'roles': data }; 是最关键的。它将密钥附加到由 web api 或任何其他数据源（如 pagemethods 或 web 服务）返回的数据

```
$.ajax({
        dataType: "json",
        url: '/api/TestApi/GetAllRole',
        success: function (data) {          
            data = { 'roles': data }; // formatting the data to support the mustache    format  
            var html = Mustache.to_html($('#RoleTemplate').html(), data);
            $('#tblRole').append(html);

        }
    }); 
```

在这里可以找到我关于 MustacheJs 的几篇文章

使用 MUSTACHEJS 的基本网格的内联过滤器 [http://www.techguides.in/add-inline-filter-to-basic-grid-using-mustache/](http://www.techguides.in/add-inline-filter-to-basic-grid-using-mustache/)

Master Details Grid on Demand 数据加载：使用 Mustache.JS [http://www.techguides.in/master-details-grid-on-demand-data-loading-using-mustache-js/](http://www.techguides.in/master-details-grid-on-demand-data-loading-using-mustache-js/)

使用 MustacheJs 对网格进行排序 [http://www.techguides.in/enable-sorting-in-a-grid-bound-using-mustache-js/](http://www.techguides.in/enable-sorting-in-a-grid-bound-using-mustache-js/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T03:18:57.173

**简短的回答：**是的

**长答案：**出于安全原因 [1]，无论如何您都需要将 JSON 数组包装在一个对象中。为了让 Mustache 或任何其他库能够访问您的数组，您需要至少有一个父键，您可以在该父键上创建您的迭代器。
样本上的“repo”键是您需要告诉 mustache“去迭代 repo 键内的数组”的助手，否则您无法告诉模板您要在*哪里输出**什么*

 *[1] 这只是您可以找到的有关为什么需要将 JSON 响应包装在对象中的众多资源之一[http://incompleteness.me/blog/2007/03/05/json-is-not-as-safe -正如人们所认为的那样/](http://incompleteness.me/blog/2007/03/05/json-is-not-as-safe-as-people-think-it-is/)*

# android - 如果我在 Widget Info XML 文件中将“updatePeriodMillis”字段留空，会发生什么情况？

> ID：11819007
> 
> 赞同：1
> 
> 时间：2012-08-05T18:33:54.157
> 
> 标签：android, appwidgetprovider

我不想定期更新我的小部件。如果我只是将此字段留空，它会产生任何问题或在某个默认时间段后更新它吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T18:42:16.723

只需将其设置为**0**或完全**删除该属性**。

# sql - 数据库访问：一个主数据库对象还是让对象自己调用查询？

> ID：11819008
> 
> 赞同：-1
> 
> 时间：2012-08-05T18:34:28.223
> 
> 标签：sql, database, theory

对于一个爱好项目，我正在构建一个应用程序来跟踪我的资金。注册所有进出的东西。我使用 sqlite 作为数据库后端。我想到了两种数据访问模型。

*   创建一个主对象作为一种数据库连接器，其中包含执行查询并提供所需数据集作为对象列表的方法
*   让需要数据的对象自己执行查询

其中哪一个是“最好的”，为什么？还是有不同的、更好的模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T18:45:20.837

后一种选择更好。在第一个选项中，您最终将不得不触摸您的通用数据访问对象，以便对代码进行任何不仅仅是显示逻辑更改的更新。如果您有不同的数据访问对象，那么您将拥有更多可测试、可维护的代码。

我建议您阅读一下模型-视图-控制器范例。关于它的维基百科文章是一个好的开始：[http](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller) ://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller 。

此外，您没有说明您使用哪种语言/平台进行编码，但大多数平台都有许多选项可用于从数据库中自动生成数据访问类的起点。你可能会发现类似的东西很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T19:38:59.880

真的很多，要避免的事情是让“相同”的 sql 散布在你的代码库中。

关键点是。您刚刚向 Table1 添加了一个新列。当您在文件“Table1”中查找时，您将获得多少次点击以及在哪里。

如果你使用一个类并且有很多数据库操作，它很快就会变得非常混乱，但是如果你有一个接口（比如 IModel）和一个实现，你可以很容易地交换后端。

那么有多少 db 操作，以及您离开 SqlLite 的可能性有多大。

# c# - 从多个线程使用 SMO

> ID：11819017
> 
> 赞同：0
> 
> 时间：2012-08-05T18:35:48.300
> 
> 标签：c#, .net, sql-server, multithreading, smo

我在我的应用程序中使用 SQL Server 管理对象。应用程序中对 SMO 对象的大多数操作都是直接从 UI 触发的。例如，用户操作一个对象，导致从 SMO 对象（表、视图、...）读取或写入属性。

现在我想介绍一个后台操作，它会定期扫描一些对象（只读）。

我的问题是这是否会导致 SMO 出现问题。从文档中我知道对象的实例成员不是线程安全的。因此，我的计划是每当我从 UI 或后台线程访问每个 SMO 对象时都对其进行锁定。但是如果我同时访问两个不同的对象（例如视图和表）会发生什么。即使我只读取一个属性，该对象也可能没有完全初始化，需要从数据库加载。所以在最坏的情况下，SMO 需要同时初始化两个对象。由于我不知道 SMO 如何在内部处理此问题，我想知道是否有人知道 SMO 是否允许这样做，或者它是否会导致问题。

关于如何解决这个问题的任何其他建议？我想避免对整个 SMO 库进行全局锁定...

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T19:30:14.467

我使用SMO，我学到的是，如果你想做一些常用的操作（脚本......）它很有用。但是如果你想真正管理数据库对象，最好使用系统存储过程（所以SMO会不是要理解的另一层）。使用存储过程允许您锁定数据或不锁定数据，这将是一个可能的解决方案

# iphone - 从支持文件中的 Sqlite 更改为从 URL 中的 Sqlite

> ID：11819018
> 
> 赞同：0
> 
> 时间：2012-08-05T18:36:02.577
> 
> 标签：iphone, xcode

出于测试目的，我一直在我的应用程序的支持文件中删除我的 sqlite DB。我目前正在尝试将其移至 URL，因此我将能够在不更新应用程序的情况下更新数据库。我正在使用以下代码，它似乎正在工作，因为它将文件下载到文档目录。问题是我已经从支持文件中删除了旧数据库，并且它的数据仍在被提取。我在我的数据库中进行了更改，所以我会知道其中的区别。

我需要清除一些记忆吗？如果不是我在这里想念什么。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSString *file = [NSString stringWithFormat:@"http://www.myurl/TulsaListBars.sqlite"];
    NSURL *fileURL = [NSURL URLWithString:file];

    NSURLRequest *req = [NSURLRequest requestWithURL:fileURL];
    NSURLConnection *conn = [NSURLConnection connectionWithRequest:req delegate:self];

    fileData = [NSMutableData data];
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    [fileData setLength:0];
    totalFileSize = [NSNumber numberWithLongLong:[response expectedContentLength]];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [fileData appendData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSArray *dirArray = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,    NSUserDomainMask, YES);
    NSLog(@"%@", [dirArray objectAtIndex:0]);

    NSString *path = [NSString stringWithFormat:@"%@/TulsaListBar.sqlite", [dirArray objectAtIndex:0]];

    if ([fileData writeToFile:path options:NSAtomicWrite error:nil] == NO) {
        NSLog(@"writeToFile error");
    }
    else {
        NSLog(@"Written!");
    }
} 
```

以下代码是我阅读数据库的方式。

```
-(NSMutableArray *) barList{
    thebars = [[NSMutableArray alloc] init];
    @try {
        NSFileManager *fileMgr = [NSFileManager defaultManager];
        NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"TulsaListBars.sqlite"];
        BOOL success = [fileMgr fileExistsAtPath:dbPath];
        if(!success)
        {
            NSLog(@"Cannot locate database file '%@'.", dbPath);
        }else{
            NSLog(@"File Exists: %@", dbPath);
        }
        if(!(sqlite3_open([dbPath UTF8String], &db) == SQLITE_OK))
        {
            NSLog(@"An error has occured: %s", sqlite3_errmsg(db));

        }       

        const char *sql = "SELECT * FROM Locations WHERE bar = 'yes'";
        sqlite3_stmt *sqlStatement;
        if(sqlite3_prepare(db, sql, -1, &sqlStatement, NULL) != SQLITE_OK)
        {
            NSLog(@"Problem with prepare statement:  %s", sqlite3_errmsg(db));
        }else{

            while (sqlite3_step(sqlStatement)==SQLITE_ROW) {
                Bar * bar = [[Bar alloc] init];
                bar.barName = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,1)];
                bar.barAddress = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,2)];

                etc..... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T19:17:29.520

数据库的旧副本仍在文档目录中。如果你写入文件并且文件已经存在，`writeToFile:`应该覆盖它，但当然它必须具有相同的名称/路径。

解决方案：只需从模拟器/设备中删除应用程序并再次运行您的应用程序。此外，请确保在打开数据库时处理正确的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T20:22:33.437

请记住，您不能写入应用程序的包，并且文档文件夹与该包是分开的。您的代码示例没有显示数据库是如何打开的，因此无论下载的文件如何，它都有可能是从捆绑包中打开的。更好的方法是将数据库打开代码放入 didFinishLoading 委托方法中，并在那里使用下载文件的路径。

# java - 从 JavaScript 到 Java

> ID：11819020
> 
> 赞同：0
> 
> 时间：2012-08-05T18:36:25.713
> 
> 标签：java, javascript, object

我正在开发一个项目，其中我有一个使用 jQuery 创建的客户端和服务器端的 REST Web 服务。

在服务器端，我使用 Jackson 自动解析 JSON 字符串并生成 Java 对象，我的问题是在客户端，我需要有一些东西可以自动为我创建 JSON 字符串以发送到服务器端。是否有这样的框架可以使这种工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T18:39:17.337

JSON 2 是用于目的的 javascript，它可以将对象字符串化为 json 字符串[https://github.com/douglascrockford/JSON-js](https://github.com/douglascrockford/JSON-js)

# java - 提交时更新容器页面中的 iframe 在容器页面中

> ID：11819021
> 
> 赞同：0
> 
> 时间：2012-08-05T18:36:27.137
> 
> 标签：java, jsp, servlets, iframe, refresh

我有一个包含 IFRAME 的主 html 页面。我有一个服务器端 jsp 代码，它第一次在 IFRAME 中显示了一些默认值。每当有人尝试使用主页中的搜索按钮时，结果都会显示在 IFRAME 中并更新其内容。我有一个 servlet 对搜索到的数据进行计算并更新 IFRAME 内容。

**问题：**
我已经使用`sendRedirect`servlet中的方法来刷新IFRAME但无济于事。我传递给的字符串`sendRedirect`是`/results.jsp?search=value&size=1`（要在 iframe 中显示的 jsp）。servlet 的计算工作正常，但会打开一个新页面来代替主页：*不是所需的输出*。带有界面的主页应该保留在那里，只有 IFRAME 应该刷新。

**我的问题：**
这是刷新 iframe 的正确方法吗？如果不是请告诉我应该使用什么来通过 servlet 更新我的 iframe (jsp)。

PS：如有问题请见谅。我是 jsp-servlet 的新手。

任何帮助深表感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T07:42:30.043

当您使用 response.sendRedirect() 方法进行重定向时，将修改调用 servlet 的实际“框架”。该框架可以是整个页面，也可以是 iframe，甚至是 javadocs 中使用的遗留框架。

正如@Jake223 所说，将目标属性设置为表单中的 iframe 名称：

如果您使用表单提交信息，那么您可以执行以下操作：

```
<iframe name="resultframe"></iframe>
<form action=[path to servlet] target="resultframe">
    <input type="text" name="searchq"/>
    <input type="submit" value="search"/>
</form> 
```

如果您使用 javascript 创建 iframe，请使用 iframe 的 src 属性：

```
<iframe src=[path to servlet]?[request params]></iframe> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T19:28:54.043

如果搜索机制是 HTML 表单，您可以将`target`表单的属性设置为相关 iframe 的名称。有关详细信息，请参阅[W3Schools 的页面。](http://www.w3schools.com/tags/att_form_target.asp)

# linux-device-driver - BSP 与设备驱动程序

> ID：11819022
> 
> 赞同：34
> 
> 时间：2012-08-05T18:36:28.127
> 
> 标签：linux-device-driver, device-driver, vxworks, bsp

虽然单独理解每一个（或者可能不理解），但看起来我远未理解两者之间的实际差异。

根据我的理解，BSP 是一个驱动程序和配置设置包，它允许内核映像启动板（并且是板的一部分）。单个设备驱动程序在特定组件 (HW) 上运行，一方面与核心内核接口，另一方面与设备本身接口。

查看 Linux 内核，我不清楚 BSP 角色从哪里开始，设备驱动程序角色在哪里结束。具体来说，我习惯于在每个映像中看到每个板一个 BSP，但是，通用 Linux 内核可以加载到具有相同映像的任何体系结构系列上（很明显，对于不同的系列，有不同的映像：x86、amd64、arm、等...），根据需要从 initrd 加载特定的板和外围设备驱动程序。

是否有适用于常见 Linux 内核发行版的 BSP？还是 BSP 仅与特殊情况板相关？

这种行为在其他内核上是否类似？VxWorks？

最后一个，合并不同的 BSP/s 以生成适合不同板的单个图像是否常见？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-03-27T23:01:15.397

我将 BSP 和设备驱动程序之间的关系视为*"has-a"*。板级支持包包括设备驱动程序。

BSP 和内核之间的区别并不容易区分。内核将指令转换为硬件。内核通常是针对[特定的硬件系列](http://source.android.com/source/building-kernels.html)编写的，因此它们并不像看起来那样便携或通用。它相当于每个架构系列的代码的不同排列。

BSP 的作用正好相反：它提供工具和指令来使用该板的特定硬件集。在特定的受控情况下，内核可以完成这项工作。[但是 BSP 允许任何兼容的内核/操作系统/应用程序堆栈通过遵循其配置说明](https://www.yoctoproject.org/docs/current/bsp-guide/bsp-guide.html#bsp-filelayout-kernel)来使用该板。

如果您只需要访问 CPU 周期和内存，也许是一些协议（USB、以太网、几种视频类型），具有广泛架构支持的内核非常棒，并且曾经有一段时间，硬件抽象的广度被倒数第二. 但是现在，考虑到电路板可能有一套[传感器](https://web-beta.archive.org/web/20140704172230/http://mydragonboard.org/2013/bsp-sensor-support-for-the-snapdragon-800-based-dragonboard/)（加速度计、磁力计、陀螺仪、光线、接近度、大气压力等）、电话、可能有多个 CPU、多个 GPU 等。如果/当有人使用那些特定的硬件包时，可以编写一个内核来提供 VGA/DVI/HDMI/DisplayPort 和 CPU/GPU 组合的几种排列，但与使用专为特定电路板构建的 BSP。即使那样，那也只是一个内核；该板能够支持 Linux、Windows、Android、Symbian 等。

这就是为什么存在像[Yocto](https://www.yoctoproject.org/)这样的努力来进一步解耦内核和硬件的原因。**BSP 使硬件集可扩展到一两个内核/操作系统/应用程序堆栈之外，而内核使特定的操作系统/应用程序堆栈可在多个硬件架构上移植**。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-13T18:59:56.570

根据我的经验，BSP 的范围要大得多。它包括引导加载程序、rootfs、内核和驱动程序等，这意味着拥有 BSP 使您的主板能够自行启动。驱动程序使设备工作并且只是 BSP 的一部分。

驱动程序不等于 BSP。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-05-03T10:39:53.610

如今，为了提高可重用性，事物都是模块化的，嵌入式系统的软件开发通常分为三层。

*   内核（包含任务处理、调度、内存管理）
*   堆栈（位于设备驱动程序的上层，为 I2C、SPI、以太网、SDIO、串行、文件系统、网络等提供协议实现）
*   BSP = 设备驱动程序（提供对硬件上任何控制器寄存器的访问，例如 I2C、SDIO、SPI、Ethernet_MAC、UART（串行）和中断处理 (ISR) 的寄存器。

板卡支持包（设备驱动程序）是软件层，它随着每块板卡的变化而变化，而其他两个软件层保持不变。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-04T00:30:26.163

电路板支持包包括应用程序使用电路板所需的一切。其中包括板上设备的设备驱动程序和应用程序程序员的实用软件。多媒体板上也提供窗口环境。系统工程师可以进一步向电路板添加扩展。某些应用程序需要重新实现 bsp 的某些部分以进行增强。在这里，bsp 起到了参考实现或此类需求起点的作用。

混乱在于商业模式。参考板或开发板不是移动设备等终端/消费产品。它在设计和开发 iPhone 或三星 Galaxy 等产品方面发挥着重要作用。

在大多数情况下，通用 bsp 将缺乏优化，因此您只能期望为新手模型或优化留给您完成的地方使用通用 bsp。如果是便宜的板子，bsp 是相当通用的，因为生产商将对其投入较少的投资。

不要在内核和用户空间方面过分强调，因为也有微内核可用。这里的驱动程序是用户空间的一部分！再次考虑一个只有一段代码而没有任何内核的低功耗板。所以它归结为支持董事会完成工作的软件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-02-01T11:05:41.603

板卡支持包和 HAL（硬件抽象层）之间存在概念上的联系，设备驱动程序/内核模块执行硬件抽象，板卡支持包为设备驱动程序提供接口或者是硬件抽象层本身.

所以基本上**BSP 具有类似于 DOS 时代的 BIOS 的功能**：

> 此外，BSP 应该执行以下操作
> 
> *   初始化处理器
> *   初始化总线
> *   初始化中断控制器
> *   初始化时钟
> *   初始化 RAM 设置
> *   配置段
> *   从闪存加载和运行引导加载程序

来自：[https ://en.wikipedia.org/wiki/Board_support_package](https://en.wikipedia.org/wiki/Board_support_package)

> 现代 PC 中的 BIOS 初始化和测试系统硬件组件，并从大容量存储设备加载引导加载程序，然后初始化操作系统。**在 DOS 时代，BIOS 为键盘、显示器和其他输入/输出 (I/O) 设备 [设备驱动程序] 提供了一个硬件抽象层，用于标准化应用程序和操作系统的接口。**较新的操作系统在加载后不使用 BIOS，而是直接访问硬件组件。

来源：[https ://en.wikipedia.org/wiki/BIOS](https://en.wikipedia.org/wiki/BIOS)

另一方面是**设备树**在 BSP 中的使用，设备树是描述机器硬件的统一或标准化概念：

> **U-boot 引导加载程序并准备发货**
> 
> Doug Abbott，用于嵌入式和实时应用程序的 Linux（第四版），2018 年
> 
> **设备树**
> 
> 将 Linux 等操作系统移植到新平台的最大问题之一是硬件描述。**这是因为硬件描述分散在几十个左右的设备驱动程序、内核和引导加载程序中，仅举几例。** 最终的结果是，这些不同的软件对每个平台来说都是独一无二的，配置选项的数量增加了，每块板都需要一个独特的内核映像。
> 
> 已经有许多方法来解决这个问题。**“板级支持包”或 BSP 的概念试图将所有硬件相关代码收集到一个地方的几个文件中。可以说`arch/`Linux 内核源代码树的整个子树是一个巨大的板级支持包。**
> 
> 看一下`arch/arm/`内核的子树。在那里，您会发现大量目录，格式为`mach-*`和`plat-*`，大概分别是“机器”和“平台”的缩写。这些目录中的大多数文件都为 ARM 体系结构的特定实现提供了配置信息。当然，每个实现都以不同的方式描述其配置。
> 
> **拥有一种可以用来明确描述计算机系统硬件的单一语言不是很好吗？这是设备树的前提和承诺。**
> 
> 系统中的外围设备可以沿多个维度进行表征。例如，字符设备与块设备。有内存映射设备，以及通过 I2C 或 USB 等外部总线连接的设备。然后是平台设备和可发现设备。
> 
> 可发现设备是那些存在于外部总线上的设备，例如 PCI 和 USB，它们可以告诉系统它们是什么以及它们是如何配置的。也就是说，它们可以被内核“发现”。识别设备后，加载相应的驱动程序是一件相当简单的事情，然后它会询问设备以确定其精确配置。
> 
> **另一方面，平台设备缺乏任何机制来识别自己。诸如 Sitara 之类的片上系统 (SoC) 实现充斥着这些平台设备——系统时钟、中断控制器、GPIO、串行端口等等。设备树机制对于管理平台设备特别有用。**
> 
> 设备树的概念是在内核的 PowerPC 分支中演变而来的，这似乎是它使用最多的地方。事实上，现在要求所有 PowerPC 平台在启动时将设备树传递给内核。设备树的文本表示是一个扩展名为 .dts 的文件。这些 .dts 文件通常位于内核源代码树的`arch/$ARCH/boot/dts`.
> 
> 设备树是描述计算机系统的设备集合和互连总线的分层数据结构。它被组织为从由“<code>/”表示的根开始的节点，就像根文件系统一样。每个节点都有一个名称，并由名称-值对的“属性”组成。它还可能包含“子”节点。
> 
> 清单 15.1 是一个来自 devicetree.org 网站的示例设备树。除了说明结构之外，它什么也没做。这里我们有两个节点，分别命名为 node1 和 node2。node1 有两个子节点，node2 有一个子节点。属性由 name=value 表示。值可以是字符串、字符串列表、用方括号括起来的一个或多个数值，或者用尖括号括起来的一个或多个“单元格”。如果属性通过其存在或不存在来传达布尔值，则该值也可以为空。

来源：[https ://www.sciencedirect.com/topics/computer-science/board-support-package](https://www.sciencedirect.com/topics/computer-science/board-support-package)

通过**设备树覆盖**内核模块可以在启动时加载，即在 RPi 上添加`dtoverlay=lirc-rpi`以`/boot/config.txt`加载`lirc-pi`内核模块/设备驱动程序：

> 未来的默认 config.txt 可能包含如下部分：
> 
> ```
>  # Uncomment some or all of these to enable the optional hardware interfaces
>  #dtparam=i2c_arm=on
>  #dtparam=i2s=on
>  #dtparam=spi=on 
> ```
> 
> 如果您有一个定义了一些参数的叠加层，则可以在后续行中指定它们，如下所示：
> 
> ```
>  dtoverlay=lirc-rpi 
>  dtparam=gpio_out_pin=16 
>  dtparam=gpio_in_pin=17
>  dtparam=gpio_in_pull=down 
> ```

来源：[https ://www.raspberrypi.org/documentation/configuration/device-tree.md](https://www.raspberrypi.org/documentation/configuration/device-tree.md)

当使用 Yocto 构建 BSP 时，所有分散在设备驱动程序、内核、引导加载程序等的硬件信息都被收集起来，这里是开发人员指南如何在 Yocto 中完成此操作**[https://www.yoctoproject.org /docs/2.5/bsp-guide/bsp-guide.html](https://www.yoctoproject.org/docs/2.5/bsp-guide/bsp-guide.html)**

> [Yocto 文档]... 声明 BSP “...仅关注特定于硬件的组件。在最终分发点，您可以将 BSP 与构建系统和其他工具结合使用。但是，重要的是要保持区别，即这些是碰巧组合在某些最终产品中的独立组件。”</p>

来源：[https ://www.microcontrollertips.com/board-support-package/](https://www.microcontrollertips.com/board-support-package/)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-06-20T05:21:47.417

驱动程序是一个程序，它向内核说明设备的行为……设备可能是 USB 设备或相机或蓝牙，也可以是任何东西。根据操作的大小我们分为三个字符，块，网络。但它只允许访问每个设备......它只配置设备而不配置内存，Cpu速度。它没有给出该处理器或控制器的指令。它在该处理器或控制器上工作。谁启用定义功能的微控制器，......谁给出微控制器的起点......谁给出指令。现在来了像 BSP 这样的答案............ Bsp 是一个支持引导加载程序的板级支持包。它给出了系统的行为。考虑两种情况，1。

1.  在这种情况下，我有一台带操作系统的电脑，所以我不需要考虑系统的行为。所以我只需使用系统操作系统启用设备的行为

2.  在此，板意味着具有所有外围设备的处理器......在这种情况下没有操作系统，所以我们需要制作或者我们需要启用该设备的行为......

# php - 如何删除额外的数组值

> ID：11819024
> 
> 赞同：1
> 
> 时间：2012-08-05T18:36:37.850
> 
> 标签：php, mysql

我有一个 php 脚本可以做到这一点：

*   将UPC放入表格
*   提交表格
*   检查 UPC 是否已存在于我的数据库中

    *   如果是，从 MySQL 数据库中获取它
    *   如果没有，请从外部服务器获取它，将其添加到 MySQL 数据库以供将来使用
*   显示结果

它工作正常，但我希望变量看起来与来自 MySQL 缓存或外部服务器的变量完全相同。

当我从服务器打印它时，它看起来像这样：

输出：

```
[upc] => 066721020215
[pendingUpdates] => 0
[status] => success
[ean] => 0066721020215
[issuerCountryCode] => us
[found] => 1
[description] => Christie - Original Ritz Crackers
[message] => Database entry found
[size] => 225 g
[issuerCountry] => United States
[noCacheAfterUTC] => 2012-08-06T12:23:58
[lastModifiedUTC] => 2009-04-06T01:51:08 
```

但是，当我从 MySQL 打印数组时，它看起来像这样：

```
$result = mysql_query("SELECT * FROM UPC WHERE `upc` = '$codes[0]'");
$data = mysql_fetch_array($result);
echo "<pre>" . print_r($data, true) . "</pre>"; 
```

输出：

```
[0] => 066721020215
[upc] => 066721020215
[1] => 0
[pendingUpdates] => 0
[2] => success
[status] => success
[3] => 0066721020215
[ean] => 0066721020215
[4] => us
[issuerCountryCode] => us
[5] => 1
[found] => 1
[6] => Christie - Original Ritz Crackers
[description] => Christie - Original Ritz Crackers
[7] => Database entry found
[message] => Database entry found
[8] => 225 g
[size] => 225 g
[9] => United States
[issuerCountry] => United States
[10] => 2012-08-06
[noCacheAfterUTC] => 2012-08-06
[11] => 2009-04-06
[lastModifiedUTC] => 2009-04-06 
```

我意识到这或多或少是外观上的差异（并且数组是需要的两倍大），但是我将如何轻松删除 0、1、2、3 等标识符，而无需遍历数组创建和手动创建一个新的？是否有可以删除编号标识符的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T18:38:19.117

您需要使用`mysql_fetch_array($result, MYSQL_ASSOC)`或`mysql_fetch_assoc($result)`。

有关详细信息，请参阅[http://php.net/manual/en/function.mysql-fetch-array.php](http://php.net/manual/en/function.mysql-fetch-array.php)和[http://www.php.net/manual/en/function.mysql-fetch-assoc.php 。](http://www.php.net/manual/en/function.mysql-fetch-assoc.php)

请注意，两者都不鼓励，因为它们已被新的（ish）mysqli 函数取代：[http://uk.php.net/manual/en/book.mysqli.php](http://uk.php.net/manual/en/book.mysqli.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T18:39:01.480

换行：

```
$data = mysql_fetch_array($result); 
```

至：

```
$data = mysql_fetch_assoc($result); 
```

`mysql_fetch_assoc`从 db 中返回数据作为关联数组 -`mysql_fetch_array`返回一个混合数组，包含数字索引和关联索引。

见[http://php.net/manual/en/function.mysql-fetch-assoc.php](http://php.net/manual/en/function.mysql-fetch-assoc.php)

# javascript - 在 jQuery 选项卡中加载谷歌地图

> ID：11819027
> 
> 赞同：0
> 
> 时间：2012-08-05T18:37:51.563
> 
> 标签：javascript, jquery, google-maps, tabs, rendering

我在将 Google 地图加载到 jQuery 选项卡时遇到问题。我尝试了互联网上的每一个解决方案，使用了这里的建议： [Google Maps V3 not loading with jQuery tabs](https://stackoverflow.com/questions/8733488/google-maps-v3-not-loading-with-jquery-tabs)

[Google Maps API v3 + jQuery UI 标签的问题](https://stackoverflow.com/questions/1428178/problems-with-google-maps-api-v3-jquery-ui-tabs)

[http://www.digitalwks.com/blogs/diogo-raminhos/google-maps-v3-and-jquery-tabs-jquery-tabs-google-maps-bug/](http://www.digitalwks.com/blogs/diogo-raminhos/google-maps-v3-and-jquery-tabs-jquery-tabs-google-maps-bug/)

[谷歌地图和 jQuery 选项卡](https://stackoverflow.com/questions/3014156/google-maps-and-jquery-tabs)

等等...

但是它们都不起作用，要么我太菜鸟而无法使用它们，而且我不知道如何添加它们或者不工作。

选项卡的显示方式如下：

```
<div class="tabprice">

    <ul class="tabnavig">      
      <?php if ( $gmap_active ) { ?>
          <li><a href="#block2"><span class="big"><?php _e('Map', 'anuncios') ?></span></a></li>
      <?php } ?>
    </ul>

<?php if ( $gmap_active ) { ?>

    <!-- tab 2 -->
    <div id="block2">

        <div class="clr"></div>

            <div class="singletab">

                <?php include_once ( TEMPLATEPATH . '/includes/sidebar-gmap.php' ); ?>

            </div><!-- /singletab -->

    </div>

<?php } ?> 
```

这是sidebar-gmap.php的内容

[http://pastebin.com/H3i4J8EN](http://pastebin.com/H3i4J8EN)

请各位，我求求你们，帮助我！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T10:14:35.717

我是[您提到的其中一篇博](http://www.digitalwks.com/blogs/diogo-raminhos/google-maps-v3-and-jquery-tabs-jquery-tabs-google-maps-bug/)文的作者。

**对于其他有同样问题的人：这里的问题取决于您需要在显示动画结束时触发调整大小事件。**

**你可以通过调用** `google.maps.event.trigger(map, "resize");` **你的显示动画结束回调来做到这一点。**

因此，在您的情况下（对于[您](http://anuncios.media-zone.info/anuncios/pioneer-cdj2000/)发送的链接），您需要：

**编辑以下文件：**

> /wp-content/themes/anuncios/includes/js/theme-scripts.js

**并替换这个：**

```
/* Tab Control home main */
jQuery(function($) {
    var tabContainers = $('div.tabcontrol > div');
    tabContainers.hide().filter(':first').show();
    $('div.tabcontrol ul.tabnavig a').click(function () {
        tabContainers.hide();
        tabContainers.filter(this.hash).fadeIn(100);
        $('div.tabcontrol ul.tabnavig a').removeClass('selected');
        $(this).addClass('selected');
        return false;
    }).filter(':first').click();
}); 
```

**有了这个：**

```
/* Tab Control home main */
jQuery(function($) {
    var tabContainers = $('div.tabcontrol > div');
    tabContainers.hide().filter(':first').show();
    $('div.tabcontrol ul.tabnavig a').click(function () {
        tabContainers.hide();
        tabContainers.filter(this.hash).fadeIn(100, function(){
            if(map != undefined && map != null)
                google.maps.event.trigger(map, "resize");
        });
        $('div.tabcontrol ul.tabnavig a').removeClass('selected');
        $(this).addClass('selected');
        return false;
    }).filter(':first').click();
}); 
```

* * *

**第2部分**

找到以下代码：

```
$(tabs).click(function() {
    // hide all tabs
    $(tabContainers).hide().filter(this.hash).fadeIn(500);
    $(tabs).removeClass('selected');
    $(this).addClass('selected');
    return false;
}); 
```

并将其替换为

```
$(tabs).click(function() {
    // hide all tabs
    $(tabContainers).hide().filter(this.hash).fadeIn(500, function(){
        if(map != undefined && map != null)
            google.maps.event.trigger(map, "resize");
    });
    $(tabs).removeClass('selected');
    $(this).addClass('selected');
    return false;
}); 
```

您的错误将得到修复，这次我在本地下载并测试了它，所以我 100% 确定它会起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T18:49:21.903

谷歌地图需要一个可见且固定的画布（div）来计算地图的宽度和高度，以便正确显示。如果你之前隐藏了你的 div，你必须先显示它然后触发 map resize `google.maps.event.trigger(map, "resize");`。

在您的情况下，在 calculate() 函数中调用 resize 似乎很理想

```
function codeAddress() {
   google.maps.event.trigger(map, "resize"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T18:56:43.703

[我在http://jsfiddle.net/X5r8r/529/](http://jsfiddle.net/X5r8r/529/)的 jquery 选项卡中有一份谷歌地图的工作副本

我使用了您上面列出的来源中的一些代码。这是执行此操作的代码。其他东西只是地图的东西不太重要

```
$(文档).ready(函数() {

    //默认动作
    $(".tab_content").css({'visibility':'hidden', 'position':'absolute'});
    $("ul.tabs li:first").addClass("active").show();
    $(".tab_content:first").css({'visibility':'visible' , 'position':'static'});

    //点击事件
    $("ul.tabs li").click(function() {
        $("ul.tabs li").removeClass("active");
        $(this).addClass("active");
        $(".tab_content").css({'visibility':'hidden', 'position':'absolute'});
        var activeTab = $(this).find("a").attr("href");
        $(activeTab).css({'visibility':'visible' , 'position':'static'});
        返回假；
    });
});​

```

请记住，这仅适用于我在 jsfiddle 中显示的 div 标签，因为我检查了div 中的`id`and`class`标签以激活选项卡。我只是基本上将 div 的可见性更改为隐藏或可见。

希望这可以帮助你。

# pointers - go：使用指针允许更改结构的内容。为什么？

> ID：11819029
> 
> 赞同：2
> 
> 时间：2012-08-05T18:37:59.283
> 
> 标签：pointers, go

考虑以下示例。我不完全理解“在后台”发生了什么并寻求解释。`Foo`当我`AddToEntry`从主函数调用时，这个版本似乎复制了结构。正确的？我如何在代码中“证明”这一点？

当 go 复制结构时，我只是在操作结构的副本，当我回到`main`函数时，我会像以前一样看到原始的吗？

当我期望一个指针时（参见代码中的注释），一切都很好，我的结构没有被复制。怎样才能避免这种“错误”呢？如何确保我没有复制结构？是否有可能的编译时间/运行时间检查，还是我要小心？

```
package main

import (
    "fmt"
)

type Foo struct {
    Entry []string
}

func MakeFoo() Foo {
    a:=Foo{}
    a.Entry = append(a.Entry,"first")
    return a
}

// if I change (f Foo) to (f *Foo), I get 
// the "desired" result
func (f Foo) AddToEntry() {
    f.Entry = append(f.Entry,"second")
}

func main() {
    f:=MakeFoo()
    fmt.Println(f) // {[first]}
    f.AddToEntry()
    fmt.Println(f) // {[first]}
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-05T19:25:20.357

您的方法签名是`func (f Foo) AddToEntry()`. 方法的工作方式`f.AddToEntry()`与以下相同：

```
g := Foo.AddToEntry
g(f) 
```

接收器只是另一个参数。为什么这很重要？当你传递一个结构并在函数中修改它时会发生什么？在 C、Go 和其他按值传递的语言中，参数中给出的结构只是一个副本。因此，您不能修改原件。只返回新结构。

当您定义 时`func (f *Foo) AddToEntry()`，您将接收器（第一个参数）定义为指针。显然，给定一个指针，您可以修改原始结构。隐藏的是，当您在 Go 中访问结构时，您正在隐式引用。换句话说，与 Go`(*ptrFoo).Entry`中的相同`ptrFoo.Entry`。

所以这里的问题是，对于那些不习惯去的人来说，语法隐藏了一些正在发生的事情。在 C 中，除非您将指针传递给它，否则您将永远无法编辑结构。在 Go 中也会发生同样的情况。您需要使用指针接收器来修改您正在接收的内容。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-05T19:03:25.363

你读过这个 Go 文档吗？

[我应该在值或指针上定义方法吗？](http://golang.org/doc/go_faq.html#methods_on_values_or_pointers)

[方法：指针与值](http://golang.org/doc/effective_go.html#pointers_vs_values)

[Go 编程语言规范](http://golang.org/ref/spec)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-05T19:42:12.090

> 如何确保我没有复制结构？是否有可能的编译时间/运行时间检查，还是我要小心？

这里的简短回答是**不**，您不能对此进行编译时或运行时（1）检查 - 您只需要小心。一旦你对 Go 有点熟悉，这就变得很自然了。

(1)从技术上讲，您的函数可以使用[^([类型 switch](http://golang.org/ref/spec#Switch_statements))] [^(查询类型是否为指针，但如果您记得这样做，您也会记得将参数设为指针。)]

# google-drive-api - Google Drive SDK - DrEdit Python - 网上商店清单

> ID：11819042
> 
> 赞同：2
> 
> 时间：2012-08-05T18:39:32.107
> 
> 标签：google-drive-api

我一直在尝试完成 Google Drive SDK 的 DrEdit python[示例](https://developers.google.com/drive/examples/python)。当我进入第 4 步创建网络商店列表时，我遇到了问题。我按照描述[修改了 manifest.json 文件。](https://developers.google.com/drive/listing#modify_the_listings_manifest_for_your_drive_app)但是，在创建 manifest.zip 文件后，我无法从网上商店开发人员仪表板上传清单存档。我收到以下错误消息：

“发生错误：无效的清单。如果您的清单包含评论，请删除它们，因为我们的画廊还不支持它们。”

现在，如果我从清单中删除 'container' 和 'api_console_project_id' 条目，它可以正常上传。但是，如果没有这些条目，DrEdit 应用程序将不会“集成到 Google Drive”中，对吗？

我还尝试直接在 Google Chrome 中安装清单（开发人员模式）。在这种情况下，我收到有关有问题的两个条目的警告（无法识别）。

我该如何解决这个问题？“设置示例应用程序”文档是否可能已过时？

（编辑）

清单文件：

```
{
    "name" : "DrEdit",
    "version" : "1.0.0.0",
    "manifest_version": 2,
    "description" : "Test Google Drive application",
    "container" : "GOOGLE_DRIVE",
    "api_console_project_id" : "dpederson-gae-dredit-api",
    "icons": {
        "128": "icon-128.png"
    },
    "app" : {
        "launch" : {
            "web_url" : "https://dpederson-gae-dredit.appspot.com"
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T03:26:13.150

该`api_console_project_id`字段无效。它应该与`App ID`API 控制台的 Drive SDK 选项卡中的值匹配，这是您在注册应用程序时获得的值，如[https://developers.google.com/drive/register中所述](https://developers.google.com/drive/register)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T12:14:05.883

它应该与 CLIENT_ID 匹配。更确切地说，来自 xxxxxxxx.apps.googleusercontent.com 的 xxxxxxxx 部分

# jquery - Jquery addClass / removeClass 点击问题

> ID：11819045
> 
> 赞同：0
> 
> 时间：2012-08-05T18:40:11.000
> 
> 标签：jquery, if-statement, click, addclass, removeclass

无法让这个 jQuery 工作。该代码可在此处获得：

[http://jsfiddle.net/PuXDN/14/](http://jsfiddle.net/PuXDN/14/)

单击“Web Design”链接后，我无法更改“Graphc Design”链接的颜色

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T18:45:29.503

你不想要更多类似的东西吗

```
$(document).ready(function() {
    var $linkWeb = $("#link-web-design");
    var $linkGraphic = $("#link-graphic-design");

    $linkWeb.click(function() {
        if ($(this).hasClass("colorText")) {
            $(this).removeClass("colorText");
            $linkGraphic.addClass("colorText");
        }                
    });

    $linkGraphic.click(function() {
        if ($(this).hasClass("colorText")) {
            $(this).removeClass("colorText");
            $linkWeb.addClass("colorText");
        }           
    });
});​ 
```

?

[http://jsfiddle.net/Grimdotdotdot/PuXDN/19/](http://jsfiddle.net/Grimdotdotdot/PuXDN/19/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T18:49:15.273

这也可以仅突出显示最后点击的链接：

```
function arct(e) {
    e.preventDefault(); // optional
    $('a').removeClass('colorText');
    $(this).addClass("colorText");
}
$(document).ready(function() {
    $("#link-web-design").click(arct);
    $("#link-graphic-design").click(arct);
}); 
```

[http://jsfiddle.net/PuXDN/20/](http://jsfiddle.net/PuXDN/20/)

# mysql - MySQL 上用户 'user'@'localhost' 的访问被拒绝

> ID：11819047
> 
> 赞同：2
> 
> 时间：2012-08-05T18:40:17.617
> 
> 标签：mysql, database, mysql-error-1045

我正在尝试将我连接到数据库 MySQL 服务器，但控制台显示我**`ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: YES)`**不知道为什么。请帮我。在我的文件`my.cnf`中，我有这样的东西，

```
[mysqld]
datadir=/var/lib/mysql
socket=/tmp/mysql.sock
user=mysql
# Default to using old password format for compatibility with mysql 3.x
# clients (those using the mysqlclient10 compatibility package).
old_passwords=1

# To allow mysqld to connect to a MySQL Cluster management daemon, uncomment
# these lines and adjust the connectstring as needed.
#ndbcluster
#ndb-connectstring="nodeid=4;host=localhost:3306"

[mysqld_safe]
log-error=/var/log/mysqld.log
pid-file=/var/run/mysqld/mysqld.pid

[ndbd]
# If you are running a MySQL Cluster storage daemon (ndbd) on this machine,
# adjust its connection to the management daemon here.
# Note: ndbd init script requires this to include nodeid!
connect-string="nodeid=2;host=localhost:3306"

[ndb_mgm]
# connection string for MySQL Cluster management tool
connect-string="host=localhost:3306"

[client]
socket=/tmp/mysql.sock 
```

![在此处输入图像描述](../Images/7bd7d4b771b3d9263a5dcadb6f0692f9.png)

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T18:55:38.630

如果你真的不记得密码了，你可以添加`skip_grant_tables`到`[mysqld]`你的部分`my.cnf`，重新​​启动服务器，它会让你在没有密码的情况下让你进入，然后你可以通过更新`mysql.user`表来更改密码并重新启动mysql删除`skip_grant_tables`选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T18:46:11.873

该`-p`标志表示对密码的要求。输入您输入的要求密码的内容后，应该有第二个提示。例如：

```
$ mysql -u root -p
$ Enter password: 
```

然后你输入密码。

# ios - iPhone沙漏

> ID：11819049
> 
> 赞同：0
> 
> 时间：2012-08-05T18:40:26.523
> 
> 标签：ios, xcode

我现在正在尝试探索 iOS 应用程序。我有一个简单的想法，那就是创建一个沙漏应用程序。我确实在 App Store 上找到了一些应用程序，但动画不是很令人满意。可以说，如果我想创建沙子掉落的平滑动画，重力，我应该从哪里开始有什么建议吗？我正在考虑将 OpenGL ES 用于动画。不确定这是否是个好主意，因为我不知道如何将沙子保留在沙漏中，而且每一粒沙子都非常好。有什么我应该研究的算法吗？

# design-patterns - java异常处理策略

> ID：11819052
> 
> 赞同：4
> 
> 时间：2012-08-05T18:41:13.683
> 
> 标签：design-patterns, jakarta-ee, exception-handling

我正在开发一个应用程序，该过程像这样的 UI--> 后端进程--> 结果到 UI。

在我的代码中，我使用 try、catch 处理了我的异常。但是在代码中，我有很多重复的异常，可能会在不同的类中引发相同的异常。

所以，我打算做一个异常处理策略，以便在抛出异常时必须将其重定向到单独的异常处理代码（类似于单独的自定义异常处理库类）。所以它不应该在我的业务逻辑中。

谁能建议我如何实现它以及处理我的异常是否是最好的主意？或者任何人都可以建议我一种异常处理技术来做到这一点，而不是我的？

谢谢，期待您的回复。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T14:33:03.893

**来自 Effective Java (Joshua Bloch)**

*   仅对异常情况使用 Exceptions（切勿用于普通控制流）
*   对可恢复条件使用检查异常，对编程错误使用运行时异常。
*   避免不必要地使用检查异常

**避免检查异常。**

[http://www.mindview.net/Etc/Discussions/CheckedExceptions](http://www.mindview.net/Etc/Discussions/CheckedExceptions) [http://www.ibm.com/developerworks/java/library/j-jtp05254/index.html](http://www.ibm.com/developerworks/java/library/j-jtp05254/index.html)

*   已检查的异常通常被许多人认为是一个有缺陷的功能。这不是一个坏主意，但人们并不真正了解如何使用它们。
*   Java 框架，如 Spring、Hibernate……它们大多都抛出未经检查的异常。
*   C# 没有故意实现检查异常。斯卡拉也没有。
*   不是因为不检查就抓不到。
*   不是不勾选就不能翻译（换行）
*   这不是因为它未经检查就不是合同的一部分。实际上，您可以声明该方法以引发未经检查的异常。
*   检查异常增加了客户端和库之间的耦合

**要理解的一件非常重要的事情是任何一段代码都可能产生异常。** 并不是因为一个方法声明抛出一个 IOException，它就不会抛出任何其他异常。它可以抛出任何其他运行时异常（通用或自定义）。对于已检查的异常，开发人员倾向于相反的想法，认为捕获 IOException 将处理所有异常情况，但事实并非如此！

* * *

**仅编译时功能**

当您忘记捕获或重新抛出已检查的异常时，只有编译器会告诉您。在运行时，没有区别。

这意味着通过使用类型擦除技巧，您可以抛出一个检查异常，甚至不需要它成为方法契约的一部分。

您可以在此处找到此技巧的示例，称为 SneakyTrow： [https ://stackoverflow.com/a/4890489/82609](https://stackoverflow.com/a/4890489/82609)

Lombok 还提供了一个 @SneakyThrow 注释来放置方法，这样您就不需要在方法签名中声明已检查的异常。

* * *

**仅当您的类客户端可能从异常中恢复时才使用已检查异常。**

这是太阳的建议。

基本上，连接到数据库的尝试将引发检查异常，并且重试策略代码将在连接尝试时捕获这些检查异常。当超过重试次数时，重试策略会抛出未经检查的异常，这意味着它不是可恢复的异常，因为恢复策略已经被尝试过。顺便说一下，您可以使用 Spring RetryTemplate 。

* * *

**避免异常代码**

异常类型应该足以用于流控制决策。解析异常或流控只会产生无用的代码。添加更多异常类型，就像您有异常代码一样。

* * *

**快速失败**

让所有不可恢复的异常都被抛出到 IHM 层。如果您使用声明检查异常的框架并且您没有针对它们的恢复策略，请不要犹豫将它们包装到未经检查的异常中。

如果你不能恢复，那么你不应该做“catch and log”。或者更糟糕的是，您不应该执行“捕获并返回 null”。这将产生不一致的软件，您可能稍后会在您的程序中引发另一个异常，但您将无法理解原因。返回 null 只会在以后创建 NullPointerException。

IHM 层技术可能具有异常处理程序/映射器。Web IHM 层具有异常映射器，因此您可以说“此异常产生 404 错误”。

* * *

**功能方法**

有关信息：在函数式语言中，使用异常进行流控制通常被认为是一种不好的做法。我们通常不会抛出异常，而是返回“增强类型”，例如 Either[Error,MyResultType]。

返回的实例是错误或成功，成功是返回的 MyResultType 实例。

* * *

**异常对流控制不起作用**

创建异常是有代价的（创建堆栈跟踪）。使用 if, else... 如果可以避免它们，请不要将它们用于流量控制。

基本上，您几乎总是可以避免使用它们，但在 Java 中，有时在某些情况下使用它们进行流控制可能更方便。在函数式语言中， Either monad 再次提供帮助。

* * *

**使用断言**

如果开发人员假设您的程序中的某些内容是真实的，请使用断言以保证您的断言是真实的。看看番石榴前提条件： [https ://code.google.com/p/guava-libraries/wiki/PreconditionsExplained](https://code.google.com/p/guava-libraries/wiki/PreconditionsExplained)

或者，您可以使用 Java 原生断言或一些自定义代码。这有助于快速失败。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-05T18:48:26.687

如果您抛出太低级别的异常，请在上面的几个调用中捕获它们，并使用用户友好的消息将它们打包为更一般和更有意义的异常出了什么问题，然后再次将它们抛出到可能的最高级别，在那里您停止您的应用程序并查看它们以某种方式（例如在标签上）给用户。

来自[Effective Java（**第 61 条**）](https://rads.stackoverflow.com/amzn/click/com/0321356683)：

> 当一个方法抛出一个与它执行的任务没有明显联系的异常时，这是令人不安的。当方法传播由较低级别抽象引发的异常时，通常会发生这种情况。这不仅令人不安，而且还用实现细节污染了更高层的 API。如果更高层的实现在后续版本中发生变化，它抛出的异常也会发生变化，可能会破坏现有的客户端程序。
> 
> 为了避免这个问题，较高层应该捕获较低级别的异常，并在它们的位置抛出异常，这些异常可以用较高级别的抽象来解释。这个成语被称为异常翻译：
> 
> ```
> // Exception Translation
> try {
>    // Use lower-level abstraction to do our bidding
>    ...
> } catch(LowerLevelException e) {
>    throw new HigherLevelException(...);
> } 
> ```
> 
> 虽然异常翻译优于从较低层无意识地传播异常，但不应过度使用它。在可能的情况下，处理来自较低层的异常的最佳方法是通过确保较低层方法成功来避免它们。有时，您可以通过在将较高级别方法的参数传递到较低层之前检查它们的有效性来做到这一点。
> 
> 如果无法防止来自较低层的异常，则下一个最好的办法是让较高层静默处理这些异常，从而使较高层方法的调用者免受较低层问题的影响。在这些情况下，使用一些适当的日志记录工具（例如 java.util.logging）来记录异常可能是合适的。这允许管理员调查问题，同时将客户端代码和最终用户与它隔离开来。
> 
> 总之，如果阻止或处理来自较低层的异常不可行，请使用异常转换，除非较低层的方法碰巧保证其所有异常都适用于较高层。链接提供了两全其美：它允许您抛出适当的更高级别的异常，同时捕获故障分析的根本原因（条款 63）。

# php - 500 kunena 中的内部服务器错误

> ID：11819053
> 
> 赞同：1
> 
> 时间：2012-08-05T18:41:16.770
> 
> 标签：php, joomla, joomla-extensions, fatal-error

我正在使用 Joomla 1.5.2 和[Kunena 论坛](http://kunena.org)组件，当我单击后端的 Kunena 论坛时，我收到 500 内部服务器错误。完整的错误如下所示。

```
 Fatal Error: require_once() [function.require]: 
    Failed opening required '/home/example/public_html/administrator/components/com_kunena/install/version.php' 
(include_path='.:/usr/lib/php:/usr/local/lib/php') in components/com_kunena/admin.kunena.php on line 46 
```

在 Kunena 组件中检测到错误。

谁能帮我解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T03:49:38.977

这是因为没有正确安装而发生的。您可以卸载该组件并重新安装。它可能会解决您的问题。

# php - PHP Curl Writefunction 中的 If 语句

> ID：11819055
> 
> 赞同：1
> 
> 时间：2012-08-05T18:41:24.240
> 
> 标签：php, curl

在我的函数中，我试图在文件下载超过某些里程碑时执行函数。所以在这种情况下，我想下载 10mb，然后回显里程碑，然后再次重复到下一个 10mb。

我正在下载的文件大约 300mb，所以我希望该函数被调用 30 次。

里程碑需要是什么？字节？千字节？不管它是什么，如果我超过 10000，它就不再调用 if 里面的任何东西。

```
curl_setopt($ch, CURLOPT_WRITEFUNCTION, function($ch, $chunk) {
$chunksize = strlen($chunk);
$downloaded .= $chunksize;
if($downloaded > $milestone){
    echo "milestone";
    $downloaded = 0;
}
return $chunksize;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T19:35:08.357

只是猜测真正的问题是变量`$downloaded`和`$milestone`不在此函数的范围内和/或每次函数执行时都会重置。您可能希望从周围的范围中制作`$downloaded` `static`和包含：`$milestone`

```
$milestone = /* something */;

curl_setopt($ch, CURLOPT_WRITEFUNCTION, function ($ch, $chunk) use ($milestone) {
    static $downloaded = 0;

    $chunksize = strlen($chunk);
    $downloaded .= $chunksize;
    if ($downloaded > $milestone){
        echo "milestone";
        $downloaded = 0;
    }
    return $chunksize;
}); 
```

# jquery - 带有选项的 jQuery 弹出框

> ID：11819058
> 
> 赞同：0
> 
> 时间：2012-08-05T18:41:44.090
> 
> 标签：jquery, popupwindow

我在网上和这个网站上环顾四周，但似乎找不到我的特定问题的答案。

我想制作一个 jQuery 弹出框，在有人点击照片后显示两个选项。“放映时间”和“预告片” 如果他们点击“放映时间”，这是一个明显的链接到相应的页面。我遇到的麻烦是，如果他们单击“预告片”，我希望弹出框变成电影的预告片。也就是来自 YouTube 的嵌入式预告片。

我只是不知道如何通过按下按钮使弹出框变成预告片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T18:49:20.180

在没有任何重要信息的情况下，我真正能建议的只是以下内容，假设类似于以下 HTML：

```
<div class="popupBox">
    <!-- other stuff -->
    <a href="#" class="trailer">trailer</a>
    <a href="#" class="showtimes">showtimes</a>
</div> 
```

jQuery：

```
$('div.popupBox').on('click', 'a.trailers', function(e){
    e.preventDefault();
    $(this).closest('.popupBox').empty().append(youtubeEmbedCode);
}); 
```

# python - 正则表达式 - 匹配未转义的字符

> ID：11819059
> 
> 赞同：16
> 
> 时间：2012-08-05T18:41:46.067
> 
> 标签：python, regex

我正在尝试制作一个正则表达式来匹配字符串中未转义的逗号字符。

我正在寻找的规则是“逗号前面没有偶数个反斜杠”。

测试用例：

```
True    abc,abc
False   abc\,abc
True    abc\\,abc
False   abc\\\,abc
True    abc\\\\,abc
False   abc\\\\\,abc 
```

我尝试使用负面的后视：`(?<!(\\+)),`但 Python 给了我`error: look-behind requires fixed-width pattern`.

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-05T18:49:10.087

试试这个正则表达式：`(?<!\\)(?:\\\\)*,`

解释：

```
(?<!\\)    Matches if the preceding character is not a backslash
(?:\\\\)*  Matches any number of occurrences of two backslashes
,          Matches a comma 
```

# iphone - 在 Facebook iOS 上发布内容。如何使应用链接连接到 URL

> ID：11819061
> 
> 赞同：2
> 
> 时间：2012-08-05T18:42:08.083
> 
> 标签：iphone, ios, facebook, facebook-graph-api

我在 AppStore 上提供的我的应用程序有问题。
在我的应用程序中，您可以`graph API`使用`iOS Facebook API`. 除了所附图像右上角的链接外，一切都完美无缺

![屏幕截图](../Images/debecad27e159f31e2bd3d6f9ef0d06a.png)

如果你点击它会引导你通过一个 [空的 facebook 页面](https://www.facebook.com/apps/application.php?id=303524793035032)。我以为它是到 iTunes 应用程序页面的自动链接，但它是 SSO 的东西。有没有办法将它指向另一个链接？我在 facebook 应用程序设置中尝试了几乎所有内容，但没有结果。

# python - 如何使用 bs4 抓取 XML 网站？

> ID：11819066
> 
> 赞同：0
> 
> 时间：2012-08-05T18:42:16.150
> 
> 标签：python, xml, web-scraping, beautifulsoup

我正在解析销售电子产品的网站。具体来说，我希望收集产品的名称和价格，我在解析基于 xml 的网站时遇到了一个小问题....

这是我的代码：

```
>>> import urllib2  
>>> from bs4 import BeautifulSoup  
>>> url=urllib2.urlopen("http://store.explorelabs.com/index.php?main_page=products_all")  
>>> soup=BeautifulSoup(url,"xml")  
>>> data=soup.find_all(colspan="2") 
```

当我这样做时 ，上面的代码现在可以工作（因为名称在强标签内）

```
>>> data.strong 
```

或者

```
>>> data.attrs 
```

它向我展示了这一点：

```
Traceback (most recent call last):  
  File "<pyshell#10>", line 1, in <module>  
    data.strong  
AttributeError: 'ResultSet' object has no attribute 'strong' 
```

或者

```
Traceback (most recent call last):  
  File "<pyshell#17>", line 1, in <module>  
    data.find_all('a')  
AttributeError: 'ResultSet' object has no attribute 'find_all' 
```

我正在尝试迭代并尝试了解更多信息。
任何指针都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T18:46:00.500

`find_all`返回匹配的元素列表，而不是一个。循环结果集以获取单个项目：

```
for element in data:
    element.attrs 
```

# android - 有碰撞的 SurfaceView

> ID：11819069
> 
> 赞同：0
> 
> 时间：2012-08-05T18:42:36.643
> 
> 标签：android, surfaceview

我的游戏（BrickBraker）中有以下代码来检查球与底部横杆的碰撞。但它仍然说即使球没有击中横杆也会发生碰撞。

我在下面使用的代码有什么问题？

```
if(ball.x + ball.getWidth() > bar.x && ball.x < bar.x + (bar.getWidth()/5)) {
    ...
}

else if(ball.x + ball.getWidth() > bar.x + (bar.getWidth()/5) && ball.x < bar.x + (2*bar.getWidth()/5)) {
    ...
}

else if(ball.x + ball.getWidth() > bar.x + (2*bar.getWidth()/5) && ball.x < bar.x + (3*bar.getWidth()/5)) {
    ...
}

else if(ball.x + ball.getWidth() > bar.x + (3*bar.getWidth()/5) && ball.x < bar.x + (4*bar.getWidth()/5)) {
    ...
}

else if(ball.x + ball.getWidth() > bar.x + (4*bar.getWidth()/5) && ball.x < bar.x + bar.getWidth()) {
    ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T21:53:40.527

以下是我尝试检查球和板之间的碰撞检测的方法：

首先，我们将检查球是否在 x 轴上与棋盘“碰撞”。我们必须检查三个状态：

1.  第一个是，球的左侧不与板对齐，但右侧却如此。
2.  第二个是，球的左侧确实与板对齐，但右侧没有。
3.  第三个是，球的左侧和右侧与板对齐。

这是一张使它可视化的图像：

![例子](../Images/4f3f1ec0346aa735d99b601b282ebe9b.png)

这就是我们以编程方式应用这些规则的方式：

```
// First case
if(ball.getX() + ball.getWidth() > board.getX() && ball.getX() < board.getX()) {

}
// Second case
if(ball.getX() < board.getX() + board.getWidth() && ball.getX() + ball.getWidth > board.getX()) {

}
// Third case
if((ball.getX() + ball.getWidth() > board.getX() && ball.getX() < board.getX()) && (ball.getX() < board.getX() + board.getWidth() && ball.getX() + ball.getWidth > board.getX())) {

} 
```

如果满足这些条件中的任何一个，这意味着球在 x 轴上与板对齐。所以现在我们必须检查它们是否在 y 轴上对齐，这样我们才能最终知道它们是否相互接触。

如果满足条件，我们可以创建一个可以从任何 if 语句调用的方法。

```
public boolean checkYAlignment() {
// Check y alignment
if(ball.getY == board.getY || ball.getY() < board.getY()) {
// The ball and board have collided!
return true;
}
else {
return false;
}
} 
```

所以现在上面写的所有代码都以一个方法的形式放在一起，该方法将返回一个布尔值，指示球和板是否碰撞：

```
public boolean checkCollision() {
// First case
    if(ball.getX() + ball.getWidth() > board.getX() && ball.getX() < board.getX()) {
    return checkYAlignment();
    }
    // Second case
    else if(ball.getX() < board.getX() + board.getWidth() && ball.getX() + ball.getWidth > board.getX()) {
    return checkYAlignment();
    }
    // Third case
    else if((ball.getX() + ball.getWidth() > board.getX() && ball.getX() < board.getX()) && (ball.getX() < board.getX() + board.getWidth() && ball.getX() + ball.getWidth > board.getX())) {
return checkYAlignment();
    }
else {
return false;
}
} 
```

我希望这会有所帮助并且有效！

PS：我写的很晚，如果有什么不对的地方请见谅，我会尽快改正的。

**更新：**

如果您希望球在与板相撞时以某个角度跳跃，则取球与板碰撞的角度，并让它以该角度向另一个方向反弹。有两种方法可以做到这一点：

*   使用一些三角函数来找到角度。
*   您也可以简单地获取球的 x 速度并将数字更改为正数或负数，例如。如果速度为负，则使其为正，反之亦然。

我希望这有帮助！

# c# - 如何获取像复选框一样使用的 Rad 按钮的值

> ID：11819071
> 
> 赞同：1
> 
> 时间：2012-08-05T18:42:54.263
> 
> 标签：c#, jquery, asp.net, telerik

我想获得像复选框一样使用的 RadButton 的值。

```
<telerik:RadButton ID="RadButtonCheck" runat="server" ButtonType="ToggleButton" 
Checked="false" Text="StackOverflow" ToggleType="CheckBox" Enabled="true" AutoPostBack="false">
</telerik:RadButton> 
```

我已经阅读了这个问题和答案等等。 [如何在 JQuery 中获取复选框的值？](https://stackoverflow.com/questions/4743387/how-to-get-value-for-checkbox-in-jquery) 但

```
$('#<%=RadButtonCheck.ClientID%>').is(':checked') //always returns false. 
```

我怎样才能得到正确的值？

编辑：

.attr('checked') 属性也没有返回任何内容，它给出了错误..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T21:21:46.157

最适合我的问题的答案是：

```
var button = $find("<%= stackoverflow.ClientID%>");
if(button.get_checked())
{
     alert("is checked");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T19:52:00.477

刚刚在此页面上查看[http://demos.telerik.com/aspnet-ajax/button/examples/radiosandcheckboxes/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/button/examples/radiosandcheckboxes/defaultcs.aspx) 并查看呈现的 html 看起来您可以调用

```
$('#<%=RadButtonCheck.ClientID%>').val(); 
```

哪个应该返回“选中”或“未选中”。根据确切的控制，它可能会略有不同，但正如 Aristos 建议的那样，您需要查看呈现的 HTML。

[或者使用此处http://demos.telerik.com/aspnet-ajax/button/examples/clientsideapi/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/button/examples/clientsideapi/defaultcs.aspx)和此处[http://www.telerik.com/help/aspnet-ajax/](http://www.telerik.com/help/aspnet-ajax/button-client-side-basics.html)找到的 RAD 控件客户端 API [button-client-side-basics.html](http://www.telerik.com/help/aspnet-ajax/button-client-side-basics.html)以访问选中的值。我认为您需要调用 .get_checked() 方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T18:01:37.177

所有 Telerik RadControls 都有一个丰富的客户端 API - 其中包括属性和方法。在您的情况下，我假设您想在客户端知道用户是否检查了切换类型为 CheckBox 类型的 RadButton。

您可以侦听客户端 OnClientCheckedChanged 事件。此事件将为您提供发送者，即被单击的 RadButton 和类型为 radButtonCheckedEventArgs 的事件 args。这包含 get_checked() 方法，它将让您知道检查状态是 true（表示已检查）还是 false（表示未检查）。这是实现此目的的代码片段：

```
<div>
        <telerik:RadButton ID="RadButtonCheck" runat="server" 
         ButtonType="ToggleButton" Checked="false" 
         Text="StackOverflow" ToggleType="CheckBox" Enabled="true" 
         AutoPostBack="false" OnClientCheckedChanged="onClientCheckedChanged">
        </telerik:RadButton>
    </div>
        <script>
            function onClientCheckedChanged(sender, args) {
                alert(args.get_checked());
            }
        </script> 
```

这是客户端事件的文档链接：

[http://www.telerik.com/help/aspnet-ajax/button-onclientcheckedchanged.html](http://www.telerik.com/help/aspnet-ajax/button-onclientcheckedchanged.html)

希望这能回答你的问题。

Lohith (Tech Evangelist, Telerik India)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T22:50:55.743

您可以为单选按钮设置名称，然后尝试通过名称获取选中的值吗？像这样的东西：

```
<telerik:RadButton ID="RadButtonCheck" runat="server" ButtonType="ToggleButton"  Checked="false" Text="StackOverflow" ToggleType="CheckBox" Enabled="true" AutoPostBack="false" name="myRadio"> </telerik:RadButton> 

$('input:radio[name=myRadio]:checked').val(); 
```

# javascript - 当值可能不是正确的布尔值时，如何测试是否为真

> ID：11819072
> 
> 赞同：0
> 
> 时间：2012-08-05T18:43:10.097
> 
> 标签：javascript

是否有一个函数或语句可以用来检查我可以从 php、html 或某些可以提供 javascript 无法理解为布尔值的 true 或 false 值的来源获得的真/假。所以我可以检查字符串 true 或 boolean true 或 1 值（我认为 php 返回 true ..）

就像：

```
 var trueVal = true;
    if ( trueVal == true || trueVal === true || trueVal == "true" || trueVal == "TRUE" || trueVal == "1" || trueVal == 1 ) {

    //

    } 
```

这有意义吗？有没有更简单的方法来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T18:55:03.813

如果您要查找的值看起来像某种形式的单词“true”或非零整数，请将其转换为字符串，然后检查它是否看起来像单词 true 或非零整数。

```
function isPHPTrue(x) {
  x = String(x);
  if (/^(true|[+-]?0*[1-9][0-9]*)$/i.test(x)) { return true; }
  if (/^(false|[+-]?0+)$/i.test(x)) { return false; }
  throw new Error('Not obviously true or false: ' + x);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T18:45:44.770

好吧，如果您可以确保`true`正确传递了，那么它可能会容易得多：

```
if( trueVal) 
```

唯一会出现问题的是如果您有字符串`"false"`or `"0"`，但这可以修复：

```
if( trueVal && !trueVal.toString().match(/^(false|0)$/i)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T18:52:46.760

据我所知，没有一种“通用”的方法可以做到这一点，例如某种元布尔检查功能，但您可以减少比较次数：

```
trueVal="1";
if(trueVal*1==1||trueVal.toLowerCase()=="true"){
    //do stuff
} 
```

`trueVal*1`需要`"1"`,`1`和`true`; _ `trueVal.toLowerCase()=="true"`需要`"true"`，`"tRuE"`以及所有大写/小写变体。

希望这有帮助:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T19:24:36.397

```
function convertToBoolean(input) {
    return input.toLowerCase() == "true" || input == 1;
}

// And to test this works:

console.log(convertToBoolean("TRUE"));  //true, boolean
console.log(convertToBoolean("true"));  //true, boolean
console.log(convertToBoolean("false")); //false, boolean
console.log(convertToBoolean("1"));     //true, boolean
console.log(convertToBoolean(0));       //false, boolean
// and of course...
console.log(convertToBoolean(true));    //true, boolean 
```

# mysql - 选择两个时间范围之间的时间

> ID：11819077
> 
> 赞同：0
> 
> 时间：2012-08-05T18:44:40.993
> 
> 标签：mysql

我想选择一些与某个小时间隔匹配的行。所以我尝试这样做，但它不起作用

```
SELECT * 
  FROM geocoord 
 WHERE ID = "3574" 
   AND startTime < TIME_FORMAT("00:00:00","%h %m %s") 
   AND endTime > TIME_FORMAT("05:00:00","%h %m %s") 
```

我想要做的是选择在 12 AM 到 5 AM 之间匹配的 ID 为 3574 的所有行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T18:53:50.460

你能试试吗

```
SELECT * 
FROM geocoord 
WHERE ID="3574" 
AND startTime < TIME_FORMAT("00:00:00","%H:%i:%s") 
AND endTime > TIME_FORMAT("05:00:00","%H:%i:%s") 
```

# php - Yii 框架：出现在每个页面上的菜单内容

> ID：11819078
> 
> 赞同：3
> 
> 时间：2012-08-05T18:44:47.093
> 
> 标签：php, yii

我正在使用 Yii 框架来开发一个使用 2 列布局的站点。一栏是实际内容，而另一栏是带有站点链接的菜单，有关登录用户的一些信息以及最新帖子的列表。该菜单出现在所有页面上，但没有与当前页面（或路线）相关的信息。

每次渲染菜单时，我都需要从数据库中检索最新帖子列表和用户相关数据。我不确定如何最好地呈现这个菜单，这样我就不会重复在网站上的每个操作中获取数据的代码。

我已经想到了一些方法，我想知道其中哪一种（如果有的话）是处理这种情况的正确方法。

*   在方法中获取数据`Controller::beforeRender`，然后在部分视图中渲染菜单，该部分视图在`CClipWidget`块中显示数据。然后，在布局视图中，显示菜单应该位于的块。这种方法有效，但我觉得它很笨拙，因为`beforeRender`. 如果我添加了一个没有菜单的页面，我需要对此进行检查。另外，在阅读了 Yii 文档之后，我不明白是否`beforeRender()`也需要调用`renderPartial()`，或者只是调用`render()`.

*   保留菜单的部分视图并从布局视图中呈现它。菜单视图中的数据是从放置在其他地方（可能在模型中）的静态方法中获取的。这涉及编写很少的代码，但我不确定这是否是 MVC 范式的好习惯。在视图中获取数据让我有点畏缩，即使它只是调用一个静态函数。

*   将菜单变成小部件。数据在`run()`方法中获取并从小部件视图中呈现。但是，使用小部件会带来一些额外的限制。如果我想使用在控制器中呈现最新帖子的视图，我会遇到问题。小部件无法使用`renderPartial()`，并且一直被迫使用`render()`。如果我弄清楚如何检查渲染视图（小部件或控制器）的内容并适当地调用`render()`或调用，我可以解决这个问题。`renderPartial()`此外，小部件视图必须与站点视图分开，但我可以通过指定完整的视图路径来解决这个问题，比如`application.views.controller.view`，尽管它可能很笨重。此外，我仍然不确定小部件是否应该自己获取数据库数据。

所有这些方法*都有效*，但它们都有一些问题。我确信许多网站都处于相同的情况，我想看看最好的选择是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:15:14.290

您应该能够通过简单地缓存数据库结果（在内存或文件中，这取决于您和您的设置）来避免重新请求此数据的大部分性能损失。这是一个小而简单的例子：

```
$posts = Post::model()->cache(600)->with('comments')->findAll(array('blah=blahdyblah')); 
```

这会将返回的数据缓存 10 分钟。

为了完整起见，这里再次提供 Yii 缓存指南的链接： [缓存指南](http://www.yiiframework.com/doc/guide/1.1/en/caching.overview)

要在每个页面上实际获取这些数据，最好将代码放在自己的小部件中，并在布局文件中的某个位置调用它。

您列出的小部件限制可以处理：

*   首先，当小部件呈现它时，它只会`render()`，但没有布局。在大多数情况下这很好，但如果你确实想要一个只有那个的页面，假设你想要一个真正的`render()`，那么就这样做，只需创建一个只调用该小部件的视图。

*   其次，没有理由必须将小部件从您的应用程序中完全抽象出来，并且不使用它的数据 + 模型。是的，它们可以是“可插入的”，这是一个非常好的功能，但这并不意味着它们必须是，您只是使用它们来分隔代码。

*   最后，如果您确实想使用小部件中的“一些”数据但不是全部，或者稍微更改它，那么您在小部件中使用的方法和视图应该使用足够的抽象来构建，以便您可以使用您需要的部分分别地。做到这一点的一个好方法是充分利用`scopes`ActiveRecords、迷你视图文件，并将组件用于更大的非数据逻辑块。

当然，如果您确实在性能极限下运行并且需要将请求时间缩短千分之一秒，那么您应该研究视图缓存并使用视图[的片段缓存](http://www.yiiframework.com/doc/guide/1.1/en/caching.dynamic)：

# android - 使用 ViewPager 防止下一个片段（选项卡）预加载

> ID：11819079
> 
> 赞同：7
> 
> 时间：2012-08-05T18:44:53.670
> 
> 标签：android, android-fragments, android-fragmentactivity

我正在使用 Fragments 在 Android 中开发应用程序。我有这三个标签：

![用户应用截图](../Images/496a7e042e3d60024aa0a211651db589.png)

我知道不可能阻止每一侧（前一个和下一个）的一个片段的负载，只要最小值`setOffScreenPageLimit()`为 1，但这是否意味着如果我想在*Descargas* Fragment内运行`ProgressDialog`的`onPreExecute`方法上显示一个这会导致当我导航到*Capturador*时，必须加载 ProgressDialog？如果是，我不知道如何让用户知道我正在下载包（这就是 Descargas 所做的，以解析一些 XML）。`AsyncTask`

 **提前致谢 ;）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T21:05:11.030

Embed a ProgressBar on the Descargas fragment. Or overlay an indeterminate progressbar over the center of the fragment while it loads.

Dialogs are really part of the activity, it wouldn't make sense that it's only applicable to one of the pages.

At the end of the day though if you must insist on using dialogs, you can implement an onPageChangeListener

viewPager.setOnPageChangeListener(OnPageChangeListener);

And you can pull up the appropriate dialog when the designated fragment is selected and the opposite when you navigate away.**

# php - 允许 facebook 应用程序的用户以某种方式进行通信

> ID：11819080
> 
> 赞同：0
> 
> 时间：2012-08-05T18:44:56.133
> 
> 标签：php, facebook, chat, messaging

我正在 Facebook 平台上创建一个社交网络应用程序，我需要某种方式让我的用户相互交流以了解彼此的更多信息。在对 SO 做了一些研究之后，发送私人消息似乎是一个非常受欢迎的话题，但到目前为止，对我们来说最有希望的选择似乎是这个 - [向朋友发送私人消息](https://stackoverflow.com/questions/2574431/facebook-api-send-private-messages-to-friends/9413419#9413419)- 这是一个弹出式 JS 客户端，不幸的是只允许你将帖子发送给您的朋友。

实际上，我发现这很奇怪，因为我似乎可以单击任何人的个人资料并转到“发送消息”并在未经许可的情况下向他们发送消息，但是即使在获得许可的情况下，也无法在您的应用程序的用户之间发送消息！

1) 我见过 Facebook 应用程序提供用户之间的联系，例如 Yoke 和其他约会应用程序 - 他们是如何做到的？他们是否在编写自己的 php 消息传递系统？

2) 有什么东西阻止我使用他们的 Facebook 电子邮件地址向用户帐户发送消息吗？这显然会允许不是您朋友的人向您发送电子邮件。

感谢阅读：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:02:03.497

您只需向任何 Facebook 用户发送 Facebook 消息，只需向其发送电子邮件`username@facebook.com`，它就会自动以 Facebook 消息的形式到达他们的 Facebook 消息。此操作不需要额外的权限。

```
<?php
    $to = "username@facebook.com";
    $subject = "Test mail";
    $message = "Hello! This is a simple email message.";
    $from = "me@facebook.com";
    $headers = "From:" . $from;
    mail($to,$subject,$message,$headers);
    echo "Mail Sent.";
?> 
```

PHP 邮件功能 - [http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T19:40:23.723

我会先回答第 2 题。在向他们发送消息之前，您确实需要用户许可。它是此处描述的用户和朋友权限的一部分 [https://developers.facebook.com/docs/authentication/permissions/#user_friends_perms](https://developers.facebook.com/docs/authentication/permissions/#user_friends_perms)

```
Provides access to the user's primary email address in the email property. Do not spam users. Your use of email must comply both with Facebook policies and with the CAN-SPAM Act. 
```

此链接将向您展示如何拨打电话。 [https://developers.facebook.com/docs/reference/api/message/](https://developers.facebook.com/docs/reference/api/message/)

关于场景 1：我认为如果您有权限，那么您的应用程序用户肯定可以互相发送电子邮件，您可以使用简单的电子邮件功能。

# java - 从用户坐标中找到最近的点

> ID：11819082
> 
> 赞同：3
> 
> 时间：2012-08-05T18:45:07.127
> 
> 标签：java, hashmap, coordinates, user-input

我想知道如何使用坐标找到关闭点。我正在使用一个保存坐标和字符串的哈希图。我允许用户输入 x 和 y 轴并将它们存储为 int a 和 int b 但我不知道从那里去哪里。谢谢你看

```
import java.util.HashMap;
import java.util.Scanner;

public class Coordinate {

static class Coords {
    int x;
    int y;

    public boolean equals(Object o) {
        Coords c = (Coords) o;
        return c.x == x && c.y == y;
    }

    public Coords(int x, int y) {
        super();
        this.x = x;
        this.y = y;
    }

    public int hashCode() {
        return new Integer(x + "0" + y);
    }

    public String toString()
    {
        return x + ";" + y;
    }

}

public static void main(String args[]) {

    HashMap<Coords, String> map = new HashMap<Coords, String>();

    map.put(new Coords(250, 140), "Clifton street");
    map.put(new Coords(195, 115), "twoli");
    map.put(new Coords(165, 95), "Jacobs well");
    map.put(new Coords(140, 90), "moxbridge");
    map.put(new Coords(55, 95), "parkway");
    map.put(new Coords(15, 120), "easton");
    map.put(new Coords(260, 25), "Weston on shore");
    map.put(new Coords(250, 60), "newbridge");
    map.put(new Coords(185, 85), "central");
    map.put(new Coords(140, 100), "stdennis");
    map.put(new Coords(85, 140), "trim bridge");
    map.put(new Coords(170, 35), "windmill hill");
    map.put(new Coords(150, 60), "shakespeare court");
    map.put(new Coords(95, 50), "temple fields");
    map.put(new Coords(55, 125), "pirac cresent");
    map.put(new Coords(150, 155), "st judes hill");

    Scanner input = new Scanner(System.in);
    int i;
    int a;
    int b;

    System.out.println(map.size());
    System.out.println(map.toString());
    Coords c = new Coords(65,72);
    System.out.println(c + " - " + map.get(c));

    System.out.println("choose from the following");
    System.out.println("find closest station = 1");
    System.out.println("plan train route = 2");
    i = input.nextInt();

    if (i==1){
        System.out.println("enter your x axis ");
        a = input.nextInt();
        System.out.println("enter your y axis");
        b = input.nextInt();

        System.out.println("the nearest station is");
    }
    else if (i==2){
        System.out.println("route planner");
    }
    else {
        System.out.println("entered incorrect number");

    }
}
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-05T18:57:13.627

首先，我建议您采纳 KevinMangold 的建议，因为 Java 提供了一个非常适合您使用的[Point](http://docs.oracle.com/javase/7/docs/api/java/awt/Point.html)类。

* * *

这是一个*最小化*问题。本质上，您想使用某种度量（也许是[欧几里得距离](http://en.wikipedia.org/wiki/Euclidean_distance)？）来计算输入点和每个已知站点之间的距离。然后，您选择与找到的最小距离相对应的站点。

[下面是一些使用Collections.min](http://goo.gl/EUUQX)的示例代码：

```
final Map<Point, String> names = ...;
final Set<Point> stations = names.keySet();
final Point source = ...;
final Point nearest = Collections.min(stations, new Comparator<Point>() {

  public int compare(final Point p1, final Point p2) {
    return (int) p1.distanceSq(p2);
  }
});
final String name = names.get(nearest); 
```

# jquery - 遍历 DOM 以更新表的内容

> ID：11819087
> 
> 赞同：0
> 
> 时间：2012-08-05T18:45:30.760
> 
> 标签：jquery

我正在尝试将一些动态生成的 html（通过 PHP）插入到表中，但我在使用 JQuery 函数遍历 DOM 时感到非常尴尬。

这是我的桌子：

```
<table id = "tasks_table">
        <tr>
            <th>Date</th>
            <th>Hours</th>
            <th>Task</th>
            <th></th>
        </tr>
        <tr id = "form">
            <form action="index.php" method="POST" id="task_form">
                <td><input type="text" id="deadline_text" name="deadline_text"/></td>
                <td><input type="text" id="duration_text" name="duration_text"/></td>
                <td><input type="text" id="description_text" name="description_text"/></td>
                <td><input type="submit" value="Add Task" id="task_submit"/></button></td>
            </form>
        </tr>

        <?php
            //TaskDB::generateTaskTable();
        ?>
        </table> 
```

...并且代码在 PHP 注释所在的位置——在第二行之后。我试过使用 :nth-child 和其他一些没有成功。任何帮助将非常感激！

查询：

```
<script>
        $(document).ready(function(){
            $('#task_submit').on('click', function(e){
                $.post('index.php', $("#task_form").serialize(), function(data){

                    $(' ').append(data);
                    console.log(data);
                });
                e.preventDefault();
            });
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T18:48:43.790

尝试`after`or`insertAfter`方法，这些方法[在此处](http://api.jquery.com/insertAfter/)通过示例进行了记录，例如

```
$(php_code).insertAfter('#form') 
```

`php_code`您要插入的代码在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T18:56:36.590

嗯，`click`改成`submit`. 您可以将事件绑定到表单上的提交事件。

而且你在任何地方都没有附加东西：

```
$(' ').append(data); 
```

在其中放置一个选择器以将其附加到页面上的实际元素。

**编辑：**哎呀，我现在得到问题了。:P

与 Ghopper21 的回答类似，您也可以这样做：

```
$("#form").after( [html content to add] ); 
```

# iphone - (Objective-)C 中的 If 语句

> ID：11819098
> 
> 赞同：-5
> 
> 时间：2012-08-05T18:47:04.893
> 
> 标签：iphone, ios, xcode, ipad, if-statement

我想检查不同的变量，但如果只有一个满足所需的条件，那么我会得到一个警报视图。我试过了，`if( && )`但它没有按照我想要的方式工作。我认为我正在寻找的是类似“或”的陈述。

```
if(_d0 == 0 && _d1 == 0) {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle: @"Input Error"
                                                    message: @"Need to Choose Sections"
                                                   delegate: nil
                                          cancelButtonTitle:@"OK"
                                          otherButtonTitles:nil];
    [alert show];
    [alert release];
} 
```

所以我希望它检查 _d0 = 0 还是 _d1 == 0 ，即使这两个之一是 0 我也需要弹出警报视图。问题是，如果我做分隔语句，那么如果用户没有选择这两个部分中的任何一个，它将弹出两个警报视图，这会很烦人，因为在某些情况下用户需要选择 5 个不同的部分。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T18:49:18.183

是的，你想要的正是

```
if ((_d0 == 0) || (_d1 == 0))
{
    // popup alert view
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T18:49:09.363

`&&`是*和*。您想`||`用于*或*

# c++ - 简化 __VA_ARGS__ 问题：无法提取 NULL

> ID：11819100
> 
> 赞同：1
> 
> 时间：2012-08-05T18:47:51.047
> 
> 标签：c++, variadic, args

我得到以下代码：

头文件：

```
 #define html(...) anyHtml(__VA_ARGS__, NULL);
  const char* Html::anyHtml(const char* arg, ...);
  #define body(cssClass, ...) anyBody(cssClass, __VA_ARGS__, NULL);
  const char* Html::anyBody(const char* cssClass, const char* arg, ...); 
```

cpp文件：

```
const char* Html::anyHtml(const char* arg, ...) {
string temp = initOpen + tagToString.at(HTML) + end + lf + lf;
va_list arguments;
for (va_start(arguments, arg); arg != NULL; arg = va_arg(arguments, const char*)) {
temp += arg + lf;
}
va_end(arguments);
temp += deOpen + tagToString.at(HTML) + end + lf;
string *returnThis = new string(temp);
return (*returnThis).c_str();
}

const char* Html::body(const char* cssClass, const char* arg, ...) {
string temp = initOpen + tagToString.at(BODY) + " class=\"" + cssClass + "\"" + end + lf + lf;
va_list arguments;
for (va_start(arguments, arg); arg != NULL; arg = va_arg(arguments, const char*)) {
temp += arg + lf +lf;
}
va_end(arguments);
temp += deOpen + tagToString.at(BODY) + end + lf;
string *returnThis = new string(temp);
return (*returnThis).c_str();
} 
```

主文件：

```
Html *html = new Html();

cout << html -> html("test","test","test");
cout << html -> body("thisClass","test","test"); 
```

工作正常！！

但是这个：

```
Html *html = new Html();

cout << html -> html(
    "hello",
    html -> body("thisClass","content")
    ); 
```

不工作..如果我在头文件中为 anyBody 注释宏

```
//#define body(cssClass, ...) anyBody(cssClass, __VA_ARGS__, NULL); 
```

有可能是这样的：

```
Html *html = new Html();

cout << html -> html(
    "hello",
    html -> body("thisClass","content",NULL)
    ); 
```

现在我的问题：

是否可以嵌套一些宏，例如

```
#define body(cssClass, ...) anyBody(cssClass, __VA_ARGS__, NULL); 
```

在他们中间 ？

我读过整个“变量参数计数”的东西今天还没有真正在 cpp 中设计吗？

如果你看一下函数 anyHtml() 和 anyBody()。这是解决此问题的“好”解决方案还是某种肮脏的新手黑客？我仍然是 cpp 的新手，主要是 perl 和 java.. 为此我想得到一些反馈以进一步了解它..

现在..足够了:-)

欢迎你告诉我你想说什么.. :-)

- - 编辑

好吧，我很抱歉..

```
Html *html = new Html();

cout << html -> html(
    "hello",
    html -> body("thisClass","content")
    ); 
```

输出应该是

```
<html>
hello
<body class="thisClass">
content
</body>
</html> 
```

但它给了

```
C2143 Syntax Error missing ')' before ';'
C2143 Syntax Error missing ')' before ';'
C2059 Syntax Error: ')' 
```

如果我同时使用

```
#define html(...) anyHtml(__VA_ARGS__, NULL);
#define body(cssClass, ...) anyBody(cssClass, __VA_ARGS__, NULL); 
```

如果我做

```
cout << html -> html("hello","test");
cout << html -> body("thisClass","content"); 
```

这些错误没有出现..

没有这个宏，我必须输入：

```
 cout << html -> html(
    "hello",
    html -> body("thisClass","content",NULL)
    ); 
```

我知道非常特别.. :-(

- - 编辑

感谢您解决我的问题！

宏定义中的分号解决了嵌套问题...

anyHtml() 和 body() 函数呢...

使用是否正确

```
string temp = ... 
```

并在字符串操作之后进行转换？

还是脏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T19:48:59.650

您的宏中有多余的分号。删除它们：

```
#define html(...) anyHtml(__VA_ARGS__, NULL)
#define body(cssClass, ...) anyBody(cssClass, __VA_ARGS__, NULL) 
```

如果不删除它们，最终会出现语法错误，因为扩展会变成这样：

```
cout << html -> anyHtml(
    "hello",
    html -> anyBody("thisClass", "content", NULL);, NULL);; 
```

**编辑：**你问：

> `string temp = ...`在字符串操作之后使用和转换它是否正确？还是脏？

您不是在强制转换`temp`，而是在动态分配的内存中创建它的副本。虽然这允许您传回一个有效的 C 字符串，但它会造成内存泄漏，因为您将无法调用`delete`您创建的对象。

您可以将例程更改为 return `std::string`，然后`temp`无需动态分配即可直接返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T19:49:22.390

你的宏定义后面有分号，所以你的参数列表中最终有一个分号

```
cout << html -> html(
  "hello",
  html -> body("thisClass","content")
  ); 
```

# varnish - 如何让 Varnish 清除 URL 的所有变体？

> ID：11819106
> 
> 赞同：5
> 
> 时间：2012-08-05T18:48:34.790
> 
> 标签：varnish

Varnish 2.1：我正在尝试使用 http PURGE 让 Varnish 更新一个缓存的 URL。

在测试时，我会得到看起来很奇怪的结果，直到我在文档中阅读了这一点：“但是，如果缓存中有相同 URL 的多个变体，则只会清除匹配的变体。清除相同的 gzip 变体页面请求必须如下所示："

所以现在如果我执行这两个命令：

```
curl -I http://example.com/my-url
curl -X PURGE http://example.com/my-url 
```

我得到了 200 Purged 响应。

如果我做这两个：

```
curl -I http://example.com/my-url -H "Accept-Encoding: gzip"
curl -X PURGE http://example.com/my-url -H "Accept-Encoding: gzip" 
```

我也得到了 200 净化。

现在，如果我尝试：

```
curl -I http://example.com/my-url -H "Accept-Encoding: deflate" 
```

我得到表明 Content-Encoding: 是“text/html;charset=utf-8”的标题，并且它在缓存中有年龄。这似乎表明我的应用程序不支持“放气”，这可能是正确的。

该页面还有一个 Age: 标头，表明它正在被缓存。

现在我该如何清除它？（我在问一个没有实际意义的问题吗？）

所有这些尝试都返回“404 Not in cache”：

```
curl -X PURGE http://example.com/my-url -H "Accept-Encoding: deflate"
curl -X PURGE http://example.com/my-url -H "Accept-Encoding: text/html;charset=utf-8"
curl -X PURGE http://example.com/my-url -H "Accept-Encoding: text/html" 
```

有没有一种神奇的方法可以清除 URL 的所有变体？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-05T21:51:16.997

啊哈，通过应用一些 google-fu，我偶然发现了一个论坛帖子，其中建议以下内容：

```
purge("req.url ~ ^" req.url "$"); 
```

即在清除后面使用正则表达式来处理所有`Accept-Encoding`标题。

更多信息在这里：[http ://www.gossamer-threads.com/lists/varnish/misc/15124](http://www.gossamer-threads.com/lists/varnish/misc/15124)

..这意味着您需要修改您的VCL。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T15:07:09.340

我认为这是你需要的：

```
acl purge {
        "localhost";
        "192.168.55.0"/24;
}

sub vcl_recv {
        # allow PURGE from localhost and 192.168.55...

        if (req.request == "PURGE") {
                if (!client.ip ~ purge) {
                        error 405 "Not allowed.";
                }
                return (lookup);
        }
}

sub vcl_hit {
        if (req.request == "PURGE") {
                purge;
                error 200 "Purged.";
        }
}

sub vcl_miss {
        if (req.request == "PURGE") {
                purge;
                error 200 "Purged.";
        }
} 
```

# javascript - 使用 eval 从字符串创建函数的不同方法

> ID：11819109
> 
> 赞同：1
> 
> 时间：2012-08-05T18:48:50.320
> 
> 标签：javascript, eval

是的，我知道 eval 是邪恶的，但是......

有几次我看到一个函数以几种不同的方式从一个字符串创建：

```
var s = "function fname() { this.m = function(s){alert(s);}}";

//1
var x = new( eval("("+s+")") );
x.m("aaa")

//2
var x = new( eval('[' + s + ']')[0] );
x.m("bbb")

//3
var x = new ( eval(s + " fname;") );
x.m("ccc") 
```

前两个对我来说很清楚，但我想知道第三个。有人可以解释如何在定义后添加函数名称有助于 eval 完成这项工作吗？您还知道使用 eval 创建函数的任何其他方法吗？

谢谢席蒙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T18:55:01.573

首先，使用`function`声明（不是表达式），创建函数并将其放入当前范围：

```
function fname() { ... } 
```

右大括号结束了函数语句，下面是一个表达式：

```
fname 
```

由于函数已经在作用域中，因此表达式`fname`只是引用函数。并且因为表达式是评估代码中的最后一件事，所以会`eval`准确返回该函数引用。

代替`fname`，您可以编写当前范围内的任何函数的名称，例如`alert`，然后由 . 返回`eval`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T18:56:09.857

```
function fname() { this.m = function(s){alert(s);}} 
```

是一个[函数声明](https://stackoverflow.com/q/336859/1048572)。Eval 会创建它，但不会返回它，所以在它之后添加了另一个语句，它只计算函数引用。

在另外两个示例中，它将是一个函数表达式（带有括号，或在数组文字内），它本身的计算结果为引用。

# php - PHP 的 mcrypt_encrypt 和 openssl 命令行输出不同的密码

> ID：11819112
> 
> 赞同：1
> 
> 时间：2012-08-05T18:49:14.377
> 
> 标签：php, encryption, openssl, aes

我是加密新手。我想用 AES 128 位加密对字符串进行编码。我可以在 PHP 中做到这一点：

```
$key = 'Hello';
$plain = 'Hello Hello Hello Hello';

$cipher = mcrypt_encrypt(MCRYPT_RIJNDAEL_128, $key, $plain, MCRYPT_MODE_CBC);

echo base64_encode($cipher); 
```

这输出：

```
bzXdTNochlsQwpR9hzSSS6ihG+MYIZIDZZlF85pIXlQ= 
```

我对 openssl 命令行进行了同样的尝试：

```
openssl enc -aes-128-cbc -a -nosalt -in plain.txt -out encrypted.enc -pass pass:Hello 
```

保存在 encrypted.enc 中的字符串是：

```
5apwiN8MdAuJ9nEW82XMyR0H3VKpI/vWc7xV2iVjCTE= 
```

为什么不一样？

我尝试使用 PHP 和命令行 openssl 获得相同输出的原因是因为我将有两个单独的 Web 服务一起通信。一项服务将提供 PHP，因此我可以使用它，但另一项服务将不使用 PHP，因此我可能不得不在命令行中使用 openssl。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T19:07:35.983

您混淆了密码和密钥。在您的 openssl 命令行中添加一个`-p`以查看实际使用的密钥并观察[http://php.net/manual/en/function.mcrypt-encrypt.php](http://php.net/manual/en/function.mcrypt-encrypt.php) `string mcrypt_encrypt ( string $cipher , string $key` <= key！不是密码。

编辑：

您也有填充问题。现在使您的纯文本 48 个字符（3*128 位=3*16 字节）长：

```
$plain = 'Hello Hello Hello Hellox';
$plain .= $plain;
function hexstr($hexstr) {
  // return pack('H*', $hexstr); also works but it's much harder to understand.
  $return = '';
  for ($i = 0; $i < strlen($hexstr); $i+=2) {
    $return .= chr(hexdec($hexstr[$i] . $hexstr[$i+1]));
  }
  return $return;
}
$cipher = @mcrypt_encrypt(MCRYPT_RIJNDAEL_128, hexstr('25c506a9e4a0b3100d2d86b49b83cf9a'), $plain, MCRYPT_MODE_CBC, hexstr('00000000000000000000000000000000'));

echo base64_encode($cipher);
echo "\n"; 
```

和

```
openssl enc -aes-128-cbc -a -iv 0  -nosalt -in plain.txt  -K 25c506a9e4a0b3100d2d86b49b83cf9a -nopad 
```

结果相同：

```
EZjBup0sfRAkIZ2/IQ3bKHWXHG4qBVv4uyW0PnxJJWvWHanNgE1QyBHMpWoZqejR 
```

# c++ - C++：没有的字符串函数

> ID：11819117
> 
> 赞同：5
> 
> 时间：2012-08-05T18:49:30.430
> 
> 标签：c++, string, header-files

我开始学习字符串和字符串函数（从一本书中），我学习了像`strcpy`and `strcat`和`strncat`..etc这样的函数

所以我开始练习在简单的程序中使用它们来了解它们的作用。

后来我很惊讶，在书中它告诉我必须使用`#include <cstring>`才能使用所有这些字符串函数。

我曾多次尝试使用字符串函数而不包括在内`<cstring>`，为什么？

我包含的唯一头文件是`<iostream>`，但我能够使用字符串函数。

请有人向我解释为什么没有字符串函数可以工作`<cstring>`，我是否需要包含它才能使用字符串函数，如果没有，`<cstring>`;的用途是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T18:52:39.513

首先，您绝对需要考虑切换到`std::string`. 手动内存分配虽然是一项有趣且有时具有挑战性的任务，但不应成为您日常工作的一部分。

话虽如此，`<cstring>`您在项目中使用的其他一些标头可能已包含#included。但是，最好不要依赖其他头文件，包括`<cstring>`（没有人保证它们总是会为每个编译器做），并在适当的地方包含它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-05T18:54:21.940

您不需要包含`<cstring>`，因为它包含在`iostream`.

但是请注意，您正在谈论的函数 ( `strcpy`, `strcat`, `strncat`) 是 C 函数，`char *`并且它们的 C++ 等效项使用更方便的`std::string`.

`strcpy`：`std::string::operator=`

```
std::string str2;
std::string str1 = str2; // copy str2 in str1 
```

`strcat`：`std::string::operator+=`

```
str1 += str2; // concat str2 to str1 
```

`strncat`：

```
str1 += str2.substr(0,n); // concat the first n characters of str2 to str1 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-05T18:56:00.630

那只是意味着它`<cstring>`包含在`<iostream>`. 当您包含时，您也通过它`<iostream>`隐式包含。`<cstring>`

请注意，通常不保证`<cstring>`包含在`<iostream>`. 您很幸运，您的特定实现恰好包含该内容。在不同的实现中可能并非如此。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-05T18:53:37.880

很可能，您的 c++ 标准库版本使用位于 cstring 中的 c 标准库函数实现了 iostream 的一些功能。因此，当您包含 iostream 头文件时，这将有一个`#include`为您提供 cstring 的指令。

# wordpress - 更新使用 Subversion 跟踪的 Wordpress

> ID：11819118
> 
> 赞同：2
> 
> 时间：2012-08-05T18:49:32.810
> 
> 标签：wordpress, svn, versions

我的所有客户端站点都在他们自己的存储库中，用于使用 svn 跟踪更改，但是当我通过 Wordpress 管理面板（Wordpress 或插件）更新时，它们的目录被删除和替换，删除了 .svn 文件。

当我不断收到以下内容时，这会破坏我的 svn，

```
Commit failed (details follow):
Directory '/website/trunk/wp-content/plugins/plugin-dir/.svn' containing working copy admin area is missing 
```

有谁知道通过 Wordpress CMS 自动更新并删除任何 svn 文件的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T16:05:46.387

此页面包含正确设置流程的过程：

[https://wordpress.stackexchange.com/questions/23052/updating-a-wordpress-plugins-breaks-svn](https://wordpress.stackexchange.com/questions/23052/updating-a-wordpress-plugins-breaks-svn)

# makefile - Makefile：为隐式规则执行的命令设置参数（CFLAGS，LDFLAGS）

> ID：11819121
> 
> 赞同：0
> 
> 时间：2012-08-05T18:50:08.463
> 
> 标签：makefile, shared-libraries, ld, cc

我对makefile很陌生。我正在阅读 GNU-make 手册，但我仍然不清楚如何为编译器和链接器设置参数，当它们被隐式规则执行时。这是 makefile 的一部分，请注意没有明确声明如何编译和链接所有内容：

```
.PHONY: $(TARGET) build_libs

all: build_libs $(TARGET)

$(TARGET):
    @echo "============> building target: $(TARGET)"
    @$(MAKE) -C $(SDK_PATH)/VP_SDK/Build $(TMP_SDK_FLAGS) $(SDK_FLAGS) $(MAKECMDGOALS) USE_LINUX=yes
    mv $(ARDRONE_TARGET_DIR)/ardrone_testing_tool $(TARGET)
    mv $(TARGET) $(ARDRONE_TARGET_DIR)/
    @echo "============> end building target: $(TARGET)"

$(MAKECMDGOALS): build_libs
    @echo "============> making cmd goals"
    @$(MAKE) -C $(SDK_PATH)/VP_SDK/Build $(TMP_SDK_FLAGS) $(SDK_FLAGS) $(MAKECMDGOALS) USE_LINUX=yes
    @echo "============> end making cmd goals"

build_libs:
    @echo "============> building libs"
    @$(MAKE) -C $(SDK_PATH)/Soft/Build $(TMP_SDK_FLAGS) $(SDK_FLAGS) $(MAKECMDGOALS) USE_LINUX=yes
    @echo "============> end building libs" 
```

该 makefile 从源文件和库构建可执行文件。但我想将它们编译成一个共享库。因此，我（我想我）必须将`-fPIC`参数 添加到. 我试过and ，但没有用。有没有人建议如何获得共享库？如果您需要更多信息，请询问。提前致谢！`cc``-shared``-soname``ld``CFLAGS=-fPIC``LDFLAGS=-shared -soname foo`

**更新：** $(SDK_PATH)/Soft/Build 中的生成文件：

```
GEN_CUSTOM_HEADER:=../Common/generated_custom.h

include custom.makefile 
include config.makefile

GNUTOOLS_PATH=/usr/local/$(GNUTOOLS_VERSION)/bin

define ADD_RULE_TEMPLATE
  TO_BUILD+=build_$(1)
endef

# Add rule for each target
$(foreach target,$(TARGETS),$(eval $(call ADD_RULE_TEMPLATE,$(target))))

.PHONY: linux_sample svn_update $(TO_BUILD) build_libs $(MAKECMDGOALS)

all: $(GEN_CUSTOM_HEADER) build_libs $(TO_BUILD)

$(GEN_CUSTOM_HEADER): custom.makefile
    @echo "#ifndef _GENERATED_CUSTOM_CONFIGURATION_H_" > $@
    @echo "#define _GENERATED_CUSTOM_CONFIGURATION_H_" >> $@
    @echo >> $@
    @echo "#if  defined(BR2_PACKAGE_BCM4318_AP)" >> $@
    @echo "#  define AP" >> $@
    @echo "#else" >> $@
    @echo "#  define STA" >> $@
    @echo "#endif" >> $@
    @echo "#define CURRENT_NUM_VERSION_SOFT \"$(MAJOR_VERSION).$(MINOR_VERSION).$(MODIF_VERSION)\"" >> $@
    @echo "#define CURRENT_BUILD_DATE \"$(shell date +%F\ %H:%M)\"" >> $@
    @echo >> $@
ifeq ("$(VIDEO_YUV)","yes")
    @echo "#define USE_VIDEO_YUV" >> $@
endif
ifeq ("$(RECORD_VISION_DATA)","yes")
    @echo "#define RECORD_VISION_DATA" >> $@
endif
    @echo >> $@
    @echo "#define WIFI_NETWORK_NAME \"$(WIFI_NETWORK_NAME)\"" >> $@
    @echo "#define WIFI_BROADCAST \"$(WIFI_BROADCAST)\"" >> $@
    @echo "#define WIFI_ARDRONE_IP \"$(WIFI_ARDRONE_IP)\"" >> $@
    @echo >> $@
    @echo "#if defined(__linux__) || defined(USE_MINGW32)" >> $@
    @echo "# define WIFI_MOBILE_IP \"$(WIFI_MOBILE_IP)\"" >> $@
    @echo "# define WIRED_ITFNAME \"$(WIRED_ITFNAME)\"" >> $@
    @echo "#endif // ! __linux__" >> $@
    @echo >> $@
    @echo >> $@
    @echo "#endif // ! _GENERATED_CUSTOM_CONFIGURATION_H_" >> $@

ifneq "$(MAKECMDGOALS)" ""
  ifneq "$(MAKECMDGOALS)" "clean"
    ifneq "$(MAKECMDGOALS)" "update"
      $(MAKECMDGOALS):
      @echo -e "\nCannot make what you ask me to do :-("
    else
      $(MAKECMDGOALS): svn_update
    endif
  endif
endif

$(MAKECMDGOALS): build_libs $(TO_BUILD)

checkpackages:
ifeq ($(IPHONE_MODE),yes)
    sh $(shell pwd)/check_dependencies.sh iphone RELEASE_BUILD=$(RELEASE_BUILD) $(MAKECMDGOALS)
else
ifeq ($(USE_LINUX),yes)
    sh $(shell pwd)/check_dependencies.sh static RELEASE_BUILD=$(RELEASE_BUILD) $(MAKECMDGOALS)
else
ifeq ($(USE_ANDROID),yes)
    sh $(shell pwd)/check_dependencies.sh android_no_neon RELEASE_BUILD=$(RELEASE_BUILD) $(MAKECMDGOALS)
endif
endif
endif

define GENERIC_RULES_TEMPLATE
build_$(1): 
    @$(MAKE) -C $(1) $(MAKECMDGOALS)
endef

$(foreach target,$(TARGETS),$(eval $(call GENERIC_RULES_TEMPLATE,$(target))))

build_libs: checkpackages
    @$(MAKE) PC_TARGET=yes USE_ARDRONE_TOOL=yes TARGET=pc_ USE_MINGW32=no -C ../Lib/Build $(MAKECMDGOALS)
    @$(MAKE) PC_TARGET=yes USE_ARDRONE_TOOL=no TARGET=pc_ USE_MINGW32=no -C ../Lib/Build $(MAKECMDGOALS)

ifeq ("$(MINGW32_MODE)","yes")
ifeq ($(shell which i586-mingw32msvc-gcc 2> /dev/null),)
        $(warning You need MinGW32 to compile My Ardrone lib for Windows if you want. (under Debian: apt-get install mingw32))
else
#   @$(MAKE) PC_TARGET=yes TARGET=mingw32_ USE_MINGW32=yes TMP_SDK_FLAGS="USE_MINGW32=yes NO_COM=yes USE_BLUEZ=no" -C ../Lib/Build $(MAKECMDGOALS)
#   @$(MAKE) PC_TARGET=yes TARGET=emb_mingw32_ USE_MINGW32=yes CONTROL_DLL=yes TMP_SDK_FLAGS="USE_MINGW32=yes NO_COM=yes USE_BLUEZ=no" -C ../Lib/Build $(MAKECMDGOALS)
endif
endif
ifeq ($(WIIMOTE_SUPPORT),yes)
#   @$(MAKE) PC_TARGET=yes TARGET=pc_ TMP_SDK_FLAGS="USE_BLUEZ=yes" -C ../Lib/libcwiid $(MAKECMDGOALS)
endif

define svn_update_template
   cd ../.. ; \
    echo "Checking out tag $(1) of $(2) ..." ; \
    if [ $(1) != head ] ; then \
       svn co -r $(1) https://svn.ardrone.org/repo/ARDrone_API/$(2) ; \
    else \
        svn co https://svn.ardrone.org/repo/ARDrone_API/$(2) ; \
    fi ; \
    cd Soft/Build ; 
endef

svn_update:
    @-$(call svn_update_template,$(SDK_VERSION),ARDroneLib) 
```

如果需要 custom.makefile 和 config.makefile，你可以在这里找到它们：http: [//pastebin.com/H8PNKKhu](http://pastebin.com/H8PNKKhu)

**更新 2：**我刚刚发现了这个，位于`$(SDK_PATH)/VP_SDK/Build`： http: [//pastebin.com/3knnSkmy](http://pastebin.com/3knnSkmy)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:46:43.303

这不是焦点。这些似乎是生成的makefile，因此很难追踪，显然发生的事情比我们看到的要多（我不怪你没有发布所有内容），而且我看不到`build_libs`规则的走向，或链接器的任何使用，或*任何*可以构建静态库的东西。我们可以向您展示如何编写显式规则来构建共享库，但是如果没有源或对象的列表，我们将不知道将什么放入该库中。

这越来越绝望，但你可以尝试以下方法：

1) `make -C $(SDK_PATH)/Soft/Build`（为 $(SDK_PATH) 输入适当的值）并验证这是否会生成静态库。

2) `make -n`，捕获输出的洪流并将其放入pastebin。我们将尝试查看它使用了什么规则，这可能会导致我们需要什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T21:18:16.600

由于您没有向我们展示 中的 makefile `$(SDK_PATH)/Soft/Build`，我将猜测一下。

在 GNU Make 手册中，有[隐式规则使用的变量](http://www.gnu.org/software/make/manual/html_node/Implicit-Variables.html#Implicit-Variables)列表：

*   `CFLAGS`: 给 C 编译器的额外标志。
*   `LDFLAGS`: 当编译器应该调用链接器'ld'时提供给编译器的额外标志。

此外，[隐式规则目录中](http://www.gnu.org/software/make/manual/html_node/Catalogue-of-Rules.html#Catalogue-of-Rules)提到了`LDLIBS`隐式链接规则中使用的命名库的变量。（当您链接单个源文件或其中一个目标文件是最终可执行文件的名称时，隐式链接规则很好，否则您需要编写显式链接规则。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T18:43:15.680

我做的。最后！！！

解决方案：`$(SDK_PATH)/VP_SDK/Build`有一个名为`generic.makefile`包含所有编译器和链接器调用的文件。我不得不在其中一些中添加`-shared`and`-fPIC`参数。听起来很简单，但没有任何记录，所以我首先不得不寻找隐藏的编译器/链接器调用......

# android - ListView onItemClick 不起作用

> ID：11819124
> 
> 赞同：1
> 
> 时间：2012-08-05T18:50:35.090
> 
> 标签：android, listactivity, onitemclicklistener

我有一个包含字符串数组的 ListAdapter。

当我单击列表中的任何项目时，我希望应用程序将当前单击的项目传递给另一个活动并转到另一个活动。

我正在尝试设置 onItemClickListener 但没有成功。

活动：

```
package com.nituach.nituach;

import java.util.List;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;

public class NituachActivity extends Activity implements OnClickListener, 
OnItemClickListener    {

Button addNewBuisness;
ListView blv;
public static int bname;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final String TAG = NituachActivity.class.getSimpleName();
    addNewBuisness = (Button) findViewById(R.id.btnAddNewBuisness);
    addNewBuisness.setOnClickListener(NituachActivity.this);
    blv = (ListView) findViewById(R.id.listView1);

    Log.d(TAG, "All Variables was created");

    DataBase dbc = new DataBase(NituachActivity.this);
    dbc.open();

    List<String> cs = dbc.getData();

    blv.setAdapter(new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, cs));

    dbc.close();
    blv.setOnItemClickListener(NituachActivity.this);

}

public void onClick(View v) {
    if (v == addNewBuisness) {
        Intent addnbIntent = new Intent(NituachActivity.this,
                AddNewBuisness.class);
        NituachActivity.this.startActivity(addnbIntent);    
    }           

}

public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T19:01:36.473

你的`onItemClick()`-method 是空的。

ListView 使用一个[`OnItemClickListener`](http://developer.android.com/reference/android/widget/AdapterView.OnItemClickListener.html)，它导出`onItemClick()`- 方法。You Activity 实现了“正常” [`OnClickListener`](http://developer.android.com/reference/android/view/View.OnClickListener.html)（公开了`onClick()`-method）和 OnItemClickListener。您不需要`OnClickListener`，只需要前一个。

在现场添加匿名实现通常更具可读性：

```
blv.setOnItemClickListener(new OnItemClickListener(){
  @Override
  public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    // Your Code
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T19:03:19.310

在当前Activity中声明一个静态变量，当List上的任意item被点击时，将其值设置为被点击的item。

```
public static String abc;   

 public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {

            abc = cs[arg2];
            Intent intent = new Intent(context, AddNewBusiness.class);
            startActivity(intent);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T19:03:27.763

试试这个，可能对你有帮助...

```
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
//here arg2 is the position of that item in the listview, which u can use for indexing the  string array, assumes `cs` is ur string array
    Intent addnbIntent = new Intent(NituachActivity.this,
            AddNewBuisness.class);
    addnbIntent.putExtra("value",cs[arg2])
    NituachActivity.this.startActivity(addnbIntent);    

} 
```

# svn - 寻找一个文档+代码+工单集中协作的工具，

> ID：11819127
> 
> 赞同：2
> 
> 时间：2012-08-05T18:50:50.023
> 
> 标签：svn, version-control, continuous-integration, redmine

我想建立一个中央项目管理工具和一个 CI 服务器，我正在寻找想法。我们的代码在 C++ visual studio/.NET 中，我们的应用程序主要是 Windows 桌面应用程序......我们只有 SVN。该工具必须是内部的，而不是 SaaS。我们是一家很小的初创公司（3 个开发人员），没有额外的资源。您认为集中文档 + 代码 + 票证的协作工具应该是一个良好的开端 您如何看待 Wiki？红米维基？你有可以帮助我的案例研究吗？你知道如何处理这样的环境吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T08:44:14.543

如果您正在使用 Microsoft 技术，也许最好的选择是[Team Foundation Server](http://msdn.microsoft.com/en-us/library/ms181238%28v=vs.80%29.aspx)。但是，还有其他方法可以获得良好的开发生态系统：

1.  构建你自己的（安装你想要的工具并支持它）
2.  使用预先准备好的开发生态系统

我认为您正在寻找2，并且还有选择：

1.  [Clinker](http://clinkerhq.com)（SCM、问题跟踪器、wiki、文档管理器）
2.  [Assembla](http://www.assembla.com)（SCM、问题跟踪器、wiki）
3.  [Stash](http://www.atlassian.com/software/stash/overview)（SCM，问题跟踪器（可选））
4.  [GitHub](http://github.com)（SCM，问题跟踪器）

Assembla 没有自托管版本，所以过滤器只通过 Clinker、Stash 和 GitHub。此时开始您的工作：比较和选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:37:16.693

您可以查看[Atlassian](http://www.atlassian.com/)工具套件。

JIRA 是他们的问题跟踪器，Confluence 是他们的 wiki，他们有 Stash/bitbucket 用于代码存储库。我没有使用过他们的代码存储库解决方案（我们在我的商店中使用 Mercurial），但我使用过 JIRA 和 Confluence，它们都是相当不错的工具。他们似乎根本没有碍事，这是一个可喜的节奏变化。

由于您是一家小商店，您可能可以使用入门许可证（通常最多 10 个用户 10 美元/产品）。您可以在本地安装这些工具并自己管理服务器，也可以按月付费托管选项（如果您想省去管理备份等的麻烦，这可能是减少干扰的好方法）。

# geoserver - 需要有关使用 Geoserver 和 Geojson 的信息

> ID：11819131
> 
> 赞同：0
> 
> 时间：2012-08-05T18:52:04.773
> 
> 标签：geoserver, geojson

我想编辑我的国家地图，所以我首先添加了[Geoserver](http://geoserver.org/display/GEOS/Welcome)，但我无法编辑此地图。我想使用 Geojson 显示[openlayers](http://www.geojson.org/)但由于某种原因我也无法编辑它。

我怎样才能编辑这张地图？以下是我的带有地理服务器链接的代码：

```
<script src="http://openlayers.org/api/OpenLayers.js"></script>
</head>
<body>
  <div style="width:100%; height:100%" id="map"></div>
  <script defer="defer" type="text/javascript">
    var map = new OpenLayers.Map('map');
    var wms = new OpenLayers.Layer.WMS( "OpenLayers WMS",
        "http://vmap0.tiles.osgeo.org/wms/vmap0", {layers: 'basic'} );
    map.zoomToMaxExtent();
   new OpenLayers.Map("map");
    var dm_wms = new OpenLayers.Layer.WMS(
    "OpenLayers WMS",
    "http://localhost:8080/geoserver/wms?",
{
    layers: "trgm:iller",
    format: "image/png"
},
{
    isBaseLayer: false
}
                                        );
    map.addLayers([wms, dm_wms]);
    map.zoomToMaxExtent();
  </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T06:16:21.213

要在 geoserver 中编辑地图数据，您需要使用 WFS 服务。然后使用 OpenLayers，您可以将图层设置为可编辑。

请参阅[OpenLayers 示例](http://openlayers.org/dev/examples/wfs-protocol-transactions.html)

# c# - 如何将保存的位图文件命名为文本框的内容？

> ID：11819132
> 
> 赞同：-2
> 
> 时间：2012-08-05T18:52:11.817
> 
> 标签：c#, if-statement, textbox, save

我的应用程序需要使用 TextBox 中提供的文件名保存 JPEG 图像文件。我不想使用 SaveFileDialog 因为我不希望用户看到对话框或能够更改保存图像的位置。

如何从文本框中设置保存文件的名称？

```
private void button1_Click(object sender, EventArgs e)
{
    if (textBox4.Text.Length >= 1)
       bitmap.Save(@"C:\Test.jpg");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T18:57:54.727

关于什么：

```
if(filename.IndexOfAny(Path.GetInvalidFileNameChars()) != -1)
   bitmap.Save(textBox4.Text);
else
   MessageBox.Show("Error: the file name contains invalid chars"); 
```

**编辑：**

> 那是行不通的。因为它必须将文件保存到C：并且文件必须是jpg图像，就像我的代码一样。我知道如何使用 SaveFileDialog 解决这个问题，但我不想看到任何保存文件的对话框，并且用户不得更改我想要保存它的位置。

```
if(filename.IndexOfAny(Path.GetInvalidFileNameChars()) != -1)
   bitmap.Save(@"C:\" + textBox4.Text + ".jpg");
else
   MessageBox.Show("Error: the file name contains invalid chars"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T19:06:44.270

不要那样做，使用 SaveFileDialog 组件。它将处理路径、有效名称、提取特殊文件夹（如文档等）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T19:14:07.350

使用用户输入的文本时，应从字符串中删除所有非法字符，否则在尝试创建具有该名称的文件时会出现异常。

```
private static string RemoveInvalidChars(string s, char[] invalidChars) {
    foreach (char ch in invalidChars) {
        s = s.Replace(ch.ToString(), "");
    }
    return s.Trim();
} 
```

使用此辅助方法，您可以像这样保存位图

```
string path = RemoveInvalidChars(Path.GetDirectoryName(textBox4.Text),
                                 Path.GetInvalidPathChars());
string filename = RemoveInvalidChars(Path.GetFileName(textBox4.Text),
                                     Path.GetInvalidFileNameChars());
if (filename.Length > 0) {
    if (path.Length > 0) {
        filename = Path.Combine(path, filename);
    }
    bitmap.Save(filename);
} else {
    // not a valid filename
} 
```

# javascript - 找出骨干“路由器”实际上得到了什么

> ID：11819135
> 
> 赞同：1
> 
> 时间：2012-08-05T18:52:27.197
> 
> 标签：javascript, backbone.js, backbone-events, backbone-routing

试图让骨干路由器工作。有一种情况是什么都没有发生，因此很难查明问题所在。

有没有办法找出路由器实际接收的内容，以便我可以尝试查明我的路由问题？

这是到目前为止的代码：

```
// ROUTER
var TheRouter = Backbone.Router.extend({
    // ROUTES
    routes: {
        "":               "main",
        "/route1/:key":   "route1"

    },
    // INITIALIZE
    initialize: function() {
        _.bindAll(this);
    },

    // ROUTES
    main: function(){
        alert('main');
    },

    route1: function(key){
        alert(key);
    }

});

// Create new router
var theRouter = new TheRouter();
// Start history
Backbone.history.start({pushState: true}); 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T19:08:43.923

您可以绑定到 上的`route`事件`Backbone.history`。根据[源代码](http://backbonejs.org/docs/backbone.html#section-113)，您可以获得从该事件进入路由器的所有信息，这意味着您应该能够`console.log`做到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T19:13:41.360

您需要从第二条路线的开头删除斜线。所以

```
 "/route1/:key":   "route1" 
```

线变成

```
 "route1/:key":   "route1" 
```

如果您仍然没有收到反馈，请确保您以正确的顺序定义了依赖脚本（jquery.js、underscore.js、backscore.js、yourRouter.js）。

# css - 背景对齐右上角不起作用

> ID：11819141
> 
> 赞同：2
> 
> 时间：2012-08-05T18:53:02.003
> 
> 标签：css, alignment

在我的网站[http://goo.gl/16XdA](http://goo.gl/16XdA)上的“关于我们”页面上，我试图在 div 的右上角对齐挪威地图，但似乎不起作用（如您所见，它只显示一个地图的一小部分和左侧）。我的 CSS 代码有什么问题？谢谢

```
#activity {
    height: 1300px;
    background: #8aba56;
    padding-top: 150px;
    background: url(../images/bg-water22.jpg) no-repeat center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    background-size: cover;
}
#activity-container {
    width: 600px;
    background-color: #FFFFFF;
    font: 12px 'Open Sans', "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
    color:#000;
    font-weight: 400;
    padding:25px;
    margin-left: auto;
    margin-right: auto;
    border: 1px dotted #666;
    background: #fff url(../images/norway-map.png) no-repeat right top;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=93)";
    filter: alpha(opacity=93);
    opacity: 0.93; /* For IE8 and earlier */
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T19:10:38.960

图像有太多的负空间与 div 对齐。裁剪图像或指定像素的背景位置。本质上，您的 CSS 没有任何问题。图片太大了。

如您所见，地图右侧有很多空白区域：http: [//purewords.com/test4/images/norway-map.png](http://purewords.com/test4/images/norway-map.png)

# iphone - 由于超时终止 xcode 应用程序

> ID：11819142
> 
> 赞同：1
> 
> 时间：2012-08-05T18:53:27.527
> 
> 标签：iphone, ios, xcode

我在 Xcode 中有一个处理敏感数据的应用程序。如果 5 分钟不活动，我想强制终止应用程序/退出。有人可以告诉我该怎么做吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T19:05:02.880

[单击此处](http://www.iphonedevsdk.com/forum/iphone-sdk-development/7590-touch-event-countdown-timer.html)获取有关如何制作计时器的教程。用户采取的每一个动作，都会重置计时器。5 分钟后，您可以使用`exit(0)`.

[但是， Apple 不鼓励](http://developer.apple.com/library/ios/#qa/qa1561/_index.html)这种以编程方式关闭应用程序的方法，因此请自行决定使用它。

**编辑：**为了停止计时器，您需要存储指向您创建的计时器的指针，然后调用：

```
[pointerToTimer invalidate];
pointerToTimer  = nil; 
```

**编辑2：**使用的替代方法`exit(0)`是制作一个几乎空白的屏幕，除了一些文字说明：

> 你已经太久没有活动了。请退出并重新启动此应用程序。

一旦计时器到达 5 分钟，就会出现此屏幕。因此，用户不能在应用程序上做任何事情，只能看屏幕，或者退出应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T19:01:17.973

如果您正在编写要提交到应用商店的应用，则不能（根据指南）。请参阅本说明中的详细信息：http: [//developer.apple.com/library/ios/ipad/#qa/qa1561/_index.html](http://developer.apple.com/library/ios/ipad/#qa/qa1561/_index.html)

如果您不关心商店或界面指南，则表明 exit() 可用。

# javascript - Firebug 将“删除”运算符应用于不合格的名称已弃用

> ID：11819145
> 
> 赞同：4
> 
> 时间：2012-08-05T18:53:43.700
> 
> 标签：javascript, firefox, console, firebug

我正在阅读有关 JavaScript 中 OO 编程的书，并得到一些奇怪的行为：

```
function f1() {
    var a = 1;
    console.log('a in f1 function ', a);
    console.log('f2() called ', f2());
    return 'f1 return value';
}

function f2() {
    console.log('a value in f2() ', a);
    return a;
}

var a = 5;
a = 55;
var foo = 'bar';
console.log('delete a: ', delete a);
console.log(a);
console.log(f1());
console.log('delete window.f2: ', delete window.f2);
console.log(f1());
console.log('delete foo: ', delete foo); 
```

谁能理解，为什么我的 delete VARIABLE 返回 false（在 Firefox 中）和严格模式显示警告，如：

```
SyntaxError: applying the 'delete' operator to an unqualified name is deprecated
console.log('delete foo: ', delete foo); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-05T19:06:01.727

您不能在 javascript 中删除普通变量。您可以删除对象的属性，但不能删除变量。因此，不允许您尝试做的事情。如果您想释放该变量的内容（假设没有其他对其指向的数据的引用），您可以将变量设置为`null`.

消息中关于的部分`unqualified`可能只是指指定属性必须不仅仅是像您那样的非限定名称。它必须有一个对象引用。

正如 DCoder 在评论中提到的，这是理解删除运算符的一个[很好的参考](http://perfectionkills.com/understanding-delete/)。

# javascript - 导航搜索建议

> ID：11819151
> 
> 赞同：1
> 
> 时间：2012-08-05T18:54:02.027
> 
> 标签：javascript, html, css, codeigniter

我有一个`input`with `autocomplete="off"`。我有一个`div`搜索结果应该在哪里。Div 的显示（无，块）和 ajax 搜索（用于结果）有效。我想像在 Google 中一样使用键盘箭头（向下和向上）导航搜索结果。例如，我在输入中输入了一些内容。然后我得到了搜索结果。然后我需要用“向下箭头”导航，我需要重写（点击链接）“输入”按钮操作，因为它是在谷歌中完成的。我使用 CodeIgniter。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T18:58:05.623

我会尝试[jQuery UI 的 Autocomplete Plugin](http://jqueryui.com/demos/autocomplete/)。它有你需要的一切。

单击右侧的各种示例以查看它是否具有您想要的一切。随心所欲地设计风格也相对容易。

# javascript - 使用 Javascript / Canvas / Jquery 使部分背景透明

> ID：11819157
> 
> 赞同：2
> 
> 时间：2012-08-05T18:54:46.987
> 
> 标签：javascript, jquery, canvas

所以，我希望制作一款涉及光的游戏。它将允许您移动手电筒和灯泡等，以显示您所在的房间。

我想通过（也许）在 div 上放置房间的背景图像，然后在其中放置另一个带有黑色背景的 div 来模拟黑暗。然后，当玩家四处移动光源时，移除黑色背景的部分（或使它们透明），这样您就可以透过它们看到背景，使它们看起来像是被点亮了。

我尝试了几种方法 - 迄今为止唯一有效的方法是使用大量 1x1px 黑色 div 作为“像素”并以编程方式使它们透明，但这真的（真的）很慢。

我相当确定画布有一个解决方案，这个[JS Fiddle](http://jsfiddle.net/Grimdotdotdot/VY75L/91/)是朝着正确方向迈出的一步，但我想显示背景图像，而不仅仅是“光”。

任何建议或想法都将受到欢迎。我会把你的用户名放在学分中;-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T19:17:33.153

您将能够通过将[Compositing](https://developer.mozilla.org/en-US/docs/Canvas_tutorial/Compositing)与`globalCompositeOperation`.`source-over`

当使用透明（rgba）颜色绘制时，这些值`destination-out`甚至`xor`似乎是您所需要的。我已经为演示构建[了这个小提琴：在带有红色背景（和](http://jsfiddle.net/d6UPF/)[白色，带有黄色背景](http://jsfiddle.net/d6UPF/1/)）的画布中的黑色矩形上用黄色（alpha：0.5）绘画。

使用`destination-out`alpha`1`使描边/填充区域完全透明。使用较低的 alpha，您将能够使已经绘制的区域变暗，并可能带有某种颜色的阴影。

# javascript - 在 Javascript 中添加表格样式

> ID：11819158
> 
> 赞同：0
> 
> 时间：2012-08-05T18:54:55.930
> 
> 标签：javascript, css

我正在用javascript动态创建一个表。另外我正在使用一些 CSS 代码来格式化表格。但是，我的代码没有采用任何格式。即使是最简单的，比如在桌子周围添加边框也不行。这是我的代码：

```
function parseRequest_ls(response) {
    document.getElementById("files").innerHTML += "<table border='2'>";

    for(var i=0;i<5;i++){
        if(response.data[i].type == "folder" || response.data[i].type == "album") {
            document.getElementById("files").innerHTML += "<tr><td><b>+</b> <a href='#'>"+ response.data[i].name + "</a></td></tr>";
        }
    }
    document.getElementById("files").innerHTML += "</ul></table></div>";
} 
```

CSS 代码：

```
table, th, td {
    border: 2px solid;
    border-collapse: collapse;
    font-family: "Trebuchet MS", Arial, sans-serif;
    color: #555;
}

caption {
    font-size: 150%;
    font-weight: bold;
    margin: 5px;
}

td, th {
    padding: 4px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T20:21:25.040

在你的功能中，你有

```
document.getElementById("files").innerHTML += "<table border='2'>"; // first line 
```

和

```
document.getElementById("files").innerHTML += "</ul></table></div>"; // last line 
```

您在最后一行放置了一个结束 ul 标记`</ul>`和一个结束 div 标记，但两者都`</div>`没有使用任何开头，因此损坏了，我认为您不应该在 a 内使用 a而不将其包装在 a 内。所以在这种情况下你可以使用`tag``ul``div``HTML``ul``table``td`

```
function parseRequest_ls(response) {
    var trs='';    
    for(var i=0;i<5;i++){
        if(response.data[i].type == "folder" || response.data[i].type == "album") {
            trs +="<tr><td><b>+</b> <a href='#'>"+ response.data[i].name + "</a></td></tr>";
        }
    }
    document.getElementById("files").innerHTML += "<table border='2'>"+trs+"</table>";
} 
```

[**一个简单的例子**](http://jsfiddle.net/heera/Mq3cu/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T20:24:39.793

不要`+=`与`innerHTML`. 首先在一个临时变量中构建一个字符串，然后一旦你的字符串中有一些完整的（有效的）HTML，你就可以使用`+=`它来将它附加到一个元素上。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-06T04:09:53.533

所以问题是，我无法通过 innerHTML 创建表格。我必须使用 DOM 对象来完成。我创建了一个 DOM 对象，然后使用 createElement 来获取表。有点不直接..但它有效..感谢大家的建议。:)

# javascript - 单页网站和每个 div 一个不同的徽标？

> ID：11819163
> 
> 赞同：-1
> 
> 时间：2012-08-05T18:55:28.223
> 
> 标签：javascript, jquery, css

我想在我的单页网站[http://goo.gl/16XdA](http://goo.gl/16XdA)的每个“页面”上都有一个不同的徽标（每个页面都有一个单独的 div）。有可能吗，怎么做？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T19:02:12.960

那个网站很好，我不明白为什么更改徽标对您来说很难。

这是一个简单的方法，有很多。

```
<li class=""><a onclick="changeLogo();" href="#team">Team</a></li>
<script type="javascript/text">
  function changeLogo(){
   var logoImg = document.getElementById("logo").children[0];
   logoImg.src = "newsource.jpg";
  }
</script> 
```

我建议预先加载各种徽标，以便即时切换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T19:04:32.723

你有什么尝试？您可以在导航中添加事件：当用户单击导航项时，它会更改您当前的徽标...

像这样的东西

```
$('#nav li').click(function(){
   var selected = $('a', this).attr('href'); // This will return current item # like #team, #activities...
   #change your logo based on selected
   $('#logo img').attr('src', 'your url');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T19:02:53.897

您可以使用 javascript 以多种方式执行此操作。我会使用 jQuery 在单击事件上移动精灵格式图像的背景位置，或者完全更改图像 url 的来源。另一种方法是将您的个人徽标添加到您要去的每个漂亮的动画背景中（如果您不介意将徽标制作为特定页面）。

[http://api.jquery.com/click/](http://api.jquery.com/click/)
[http://api.jquery.com/css/](http://api.jquery.com/css/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T19:05:40.580

您可以找到当前可见的 div

[检查滚动后元素是否可见](https://stackoverflow.com/questions/487073/jquery-check-if-element-is-visible-after-scrolling)\

然后基于此在您的徽标 div 中设置图像。

# c# - 多线程环境中的任务列表——“枚举操作可能无法执行”

> ID：11819167
> 
> 赞同：2
> 
> 时间：2012-08-05T18:56:03.133
> 
> 标签：c#, multithreading, task-parallel-library

我有一个任务工厂，它启动了许多任务，有时超过 1000 个。我将每个任务添加到列表中，并在任务完成后将其删除。

```
var scan = Task.Factory.StartNew(() =>
            {
                return operation.Run();
            }, token.Token
            );

            operations.Add(scan); 
```

当任务完成时：

```
var finishedTask = scan.ContinueWith(resultTask =>
                OperationComplete(resultTask),
                TaskContinuationOptions.OnlyOnRanToCompletion
                );

public virtual void OperationComplete(Task task)
    {
        operations.Remove(task);
    } 
```

全部完成后：

```
 Task.Factory.ContinueWhenAll(operations.ToArray(),
         result =>
         {
             AllOperationsComplete();
         }, TaskContinuationOptions.None); 
```

然后，在我的应用程序中的某些点，我想获得正在运行的任务的计数。（这是我得到错误的地方：“集合已修改；枚举操作可能无法执行。”）

```
 public int Count()
    {  
        int running = operations.Count<Task>((x) => x.Status == TaskStatus.Running);
        return running;
    } 
```

几个问题：

1）我是否应该担心从列表中删除任务？该列表很容易达到 1000 多个。

2) 使 Count() 安全的最佳方法是什么？如果我没记错的话，创建一个新列表并添加`operations`到它仍然会枚举集合。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T19:01:52.357

您需要锁定以确保一次只有一个线程访问列表（无论是在删除还是计数期间），或者您应该使用并发集合。不要忘记`Count(Func<T, bool>)`需要迭代集合才能执行计数 - 这就像使用`foreach`循环......并且在迭代集合时（通常）不能修改集合。

我怀疑这[`ConcurrentBag`](http://msdn.microsoft.com/en-us/library/dd381779.aspx)是一个合适的选择——当你使用 TPL 时，大概你有可用的 .NET 4 并发集合......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T19:01:50.590

您需要确保在迭代时不修改集合。大多数收藏不支持这一点。A`lock`可能就足够了。但是，您可能需要重新审视设计。长时间锁定集合可能会扼杀您希望从异步任务中获得的任何性能提升。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T00:41:26.533

鉴于代码已经作为计数调用的一部分检查状态，并且假设您在所有任务都在集合中之后才进行计数，只是不删除它们似乎是最简单的答案。如果您决定将 List 换成其他东西，请确保实际测量性能差异，尤其是当 Count 调用的执行次数相对于集合的大小而言较低时。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-26T02:51:45.710

您可以使用[ConcurrentDictionary](http://msdn.microsoft.com/en-us/library/dd287191%28v=vs.110%29.aspx) 来跟踪您的任务（Concurrentbags 不允许您删除特定项目）。

```
ConcurrentDictionary<Task, string> runningTasks = new ConcurrentDictionary<Task, string>();

Task task = Task.Factory.StartNew(() =>
    {
        // Do your stuff
    }).ContinueWith(processedTask => {
        var outString; // A string we don't care about
        runningTasks.TryRemove(processedTask, out outString);
    });

runningTasks.TryAdd(task, "Hello I'm a task");
// Add lots more tasks to runningTasks

while (runningTasks.Count > 0)
{
     Console.WriteLine("I'm still waiting...");
     Thread.Sleep(1000);
} 
```

如果你想做一个正确的“ `WaitAll`”（需要 LINQ）：

```
 try
    {
        Task[] keys = runningTasks.Keys.Select(x => x).ToArray();
        Task.WaitAll(keys);
    }
    catch { } // WaitAll will always throw an exception. 
```

希望能帮助到你。

# winapi - CreateWindowEx、GetLastError、Windows 7 和 XP 异常和异常行为

> ID：11819169
> 
> 赞同：1
> 
> 时间：2012-08-05T18:56:08.587
> 
> 标签：winapi, windows-7, error-handling, windows-xp

以下代码适用于 Window 7，但当我在 Windows XP 上运行它时，它会失败并由 windows 返回错误消息：“系统找不到指定的文件”。

```
#include <windows.h>
#include <windowsx.h>
#include <commctrl.h>
#include <uxtheme.h>
#include <string>

const char g_szClassName[] = "myWindowClass";
const char title[] = "Window Title\0";

COLORREF        WinColor;
HFONT       defaultFont;
NONCLIENTMETRICSA   Metrics;
DWORD       dwVersion;
DWORD       dwMajorVersion;
DWORD       dwMinorVersion;
HBRUSH      hBrushColor;

bool LastError = false;
bool W32Error (const char * Msgtext);

// Step 4: the Window Procedure
LRESULT CALLBACK WndProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam)
{
    switch(msg)
    {

    case WM_NCCREATE:
    {
        Metrics.cbSize = sizeof(NONCLIENTMETRICS);
        SystemParametersInfo (SPI_GETNONCLIENTMETRICS, sizeof(NONCLIENTMETRICS), &Metrics, 0);
        defaultFont = (HFONT) CreateFontIndirect (& Metrics.lfMessageFont);
        return TRUE;
    }
    break;

    case WM_CTLCOLORSTATIC: {
        dwVersion = GetVersion();
        dwMajorVersion = (DWORD)(LOBYTE(LOWORD(dwVersion)));
        dwMinorVersion = (DWORD)(HIBYTE(LOWORD(dwVersion)));
        if ( (IsAppThemed()) && (dwMajorVersion < 6) ) {
            WinColor = GetSysColor(COLOR_WINDOW);
            SetBkColor((HDC)wParam, WinColor);
            return (LRESULT)hBrushColor;
        }
    }
    break;

    case WM_CREATE: {
        HWND hButton = CreateWindowEx(
            0,
            "BUTTON", "Button",
                WS_TABSTOP      |
                WS_VISIBLE      |
                WS_CHILD        |
                BS_NOTIFY       |
                BS_PUSHBUTTON,
            10, 10, 96, 32, hwnd,
            (HMENU)50,
            GetModuleHandle(NULL),
            NULL);
        if (W32Error ("Button Creation Failed\nReason:")) exit (1);
        return TRUE;
    }
    break;

    case WM_CLOSE:
        DestroyWindow(hwnd);
        break;

    case WM_DESTROY:
        PostQuitMessage(0);
        break;

    default:
        return DefWindowProc(hwnd, msg, wParam, lParam);
    }
    return 0;
}

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance,
    LPSTR lpCmdLine, int nCmdShow)
{
    WNDCLASSEX wc;
    HWND hwnd;
    MSG Msg;

    // Initialize common controls.
    INITCOMMONCONTROLSEX icc;
    icc.dwSize = sizeof(icc);
    icc.dwICC = ICC_WIN95_CLASSES       |
                ICC_COOL_CLASSES    |
                ICC_INTERNET_CLASSES|
                ICC_LINK_CLASS  |
                ICC_STANDARD_CLASSES|
                ICC_PROGRESS_CLASS  |
                ICC_USEREX_CLASSES;
    InitCommonControlsEx(&icc);

    //Step 1: Registering the Window Class
    wc.cbSize        = sizeof(WNDCLASSEX);
    wc.style         = CS_HREDRAW | CS_VREDRAW;
    wc.lpfnWndProc   = WndProc;
    wc.cbClsExtra    = 0;
    wc.cbWndExtra    = 0;
    wc.hInstance     = hInstance;
    wc.hIcon         = LoadIcon(NULL, IDI_APPLICATION);
    wc.hCursor       = LoadCursor(NULL, IDC_ARROW);
    wc.hbrBackground = (HBRUSH)(COLOR_WINDOW+1);
    wc.lpszMenuName  = NULL;
    wc.lpszClassName = g_szClassName;
    wc.hIconSm       = LoadIcon(NULL, IDI_APPLICATION);

    // see if something is going on before the window registration takes place....
    if (W32Error ("Previous Check for Error?\nReason:")) exit (1);

    if(!RegisterClassEx(&wc))
    {
        MessageBox(NULL, "Window Registration Failed!", "Error!",
            MB_ICONEXCLAMATION | MB_OK);
        return 0;
    }
    if (W32Error ("Window Registration Failed\nReason:")) exit (1);

    // Step 2: Creating the Window
    hwnd = CreateWindowEx(
        WS_EX_CLIENTEDGE,
        g_szClassName,
        "The title of my window",
        WS_OVERLAPPEDWINDOW,
        CW_USEDEFAULT, CW_USEDEFAULT, 240, 120,
        NULL, NULL, hInstance, NULL);
    if (W32Error ("Window Creation Failed\nReason:")) exit (1);

    if(hwnd == NULL)
    {
        MessageBox(NULL, "Window Creation Failed!", "Error!",
            MB_ICONEXCLAMATION | MB_OK);
        return 0;
    }

    SendMessageA(hwnd, WM_SETFONT, WPARAM (defaultFont), TRUE);
    SendMessageA(hwnd, WM_SETTEXT, WPARAM(NULL) , LPARAM (title));

    ShowWindow(hwnd, nCmdShow);
    UpdateWindow(hwnd);

    // Step 3: The Message Loop
    while(GetMessage(&Msg, NULL, 0, 0) > 0)
    {
        TranslateMessage(&Msg);
        DispatchMessage(&Msg);
    }
    return Msg.wParam;
}

bool W32Error (const char * Msgtext)
{
    LPTSTR errorText = NULL;
    DWORD   dwLastError = GetLastError();
    if (!dwLastError) {
        LastError = false;
        return LastError;
    }
    // use system message tables to retrieve error text
    // allocate buffer on local heap for error text
    // Important! will fail otherwise, since we're not (and CANNOT) pass insertion parameters
    FormatMessageA(
        FORMAT_MESSAGE_FROM_SYSTEM     |
        FORMAT_MESSAGE_ALLOCATE_BUFFER |
        FORMAT_MESSAGE_IGNORE_INSERTS,
        NULL,                           // unused with FORMAT_MESSAGE_FROM_SYSTEM
        dwLastError,
        MAKELANGID (LANG_NEUTRAL, SUBLANG_DEFAULT),
        (LPTSTR)&errorText,             // output
        0,                              // minimum size for output buffer
        0);                             // arguments - see note
        if ( NULL != errorText ) {
            std::string Message;
            Message += Msgtext;
            Message += "\n";
            Message += errorText;
            MessageBoxA(NULL, (LPCSTR)Message.c_str(), "An Internal Error Occurred", MB_OK);
            LocalFree(errorText);
            errorText = NULL;
            LastError = true;
        } else {
            LastError = false;
        }
        return LastError;
} 
```

另外，我有一个`resource.rc`和`resource.h`文件链接，`winres`该文件符合`manifest.xml`提供控件版本 6 规范的文件。

好的，这就是交易，它可以在 Windows 7 上顺利运行。它在 XP 上运行，除非我加入 `if (W32Error ("Window Registration Failed\nReason:")) exit (1);` （基本上，它会调用我的错误检查例程，其中包括`GetLastError()`）

```
 if(!RegisterClassEx(&wc))
    {
        MessageBox(NULL, "Window Registration Failed!", "Error!",
            MB_ICONEXCLAMATION | MB_OK);
        return 0;
    }
    if (W32Error ("Window Registration Failed\nReason:")) exit (1); 
```

当我包含该行时，我收到错误“系统找不到指定的文件”。RegisterClassEx 返回的返回值没有进入`if`块，因此 RegisterClassEx 返回 Ok。

这只发生在 Windows XP 上，它在 Windows 7 上工作得很好。如果我不包括这一行，它就像没有任何问题一样工作。

这个示例的重点是让主题在 XP 和 Windows 7 上都能正常工作。（这不是一件容易的事。）

为什么 RegisterClassEx 返回 Ok，但在 Windows XP 而不是 Windows 7 上生成 GetLastError 错误？

另外，它到底在寻找什么**文件？**我看到其他谷歌结果说它与混乱的消息循环或窗口过程有关，但这里不是这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T21:21:34.450

一般错误...由于[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633587%28v=vs.85%29.aspx)，您只能在`RegisterClassEx`“返回值为零”时检查 GetLastError。当`RegisterClassEx`或`CreateWindowEx`或任何其他函数成功时，`GetLastError`可能会返回垃圾，不保证会返回零（如果在**返回值**`GetLastError`部分中没有描述不同的行为）。

# rss - 将 RSS 项目合并为一个项目

> ID：11819182
> 
> 赞同：0
> 
> 时间：2012-08-05T18:58:03.090
> 
> 标签：rss, concatenation, yahoo-pipes

我正在构建一个应用程序，它将采用多个 RSS 提要并将它们组合成一个提要。到目前为止一切顺利，我可以很容易地通过 Yahoo Pipes 做到这一点。

我在弄清楚如何做时遇到的问题是从该管道的输出中获取项目并将它们组合成一个项目。

基本上这里的目标是，在我的网站上，我标记各种帖子，将它们放入网站上的 RSS 提要中。然后我希望能够根据我在一周内标记的项目自动发布前 10 位博客文章（使用 ifttt.com）。为了完成所有这些工作，我需要将我的普通标签（我正在使用 Yahoo Pipes 处理）中的前 10 个项目合并到一个项目中，以便 ifttt.com 可以将其作为博客文章提供给我的 WordPress 网站。

欢迎任何想法，但有一个例外。我在托管的 WordPress 网站上，因此无法为 WordPress 安装插件。如果这是唯一的选择，我可能可以通过将插件放在我拥有的其他 WordPress 网站之一上来使其工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:34:17.850

我最终在另一个网站上使用了 wordpress 插件。该插件称为 WP-RSSImport。

# open-source - 有没有好的开源地理解析器可用？

> ID：11819184
> 
> 赞同：9
> 
> 时间：2012-08-05T18:58:07.870
> 
> 标签：open-source, geolocation, geocoding

有没有好的开源 Geoparsers？有几种免费的解决方案（服务）可用（例如 Yahoo 的[placemaker](http://developer.yahoo.com/geo/placemaker/)、EDINA 的[Unlock Text](http://unlock.edina.ac.uk/texts/introduction)），但它们似乎不是开源的。

理想情况下，解析器应该旨在从任意文本中挖掘位置信息（而不是期望输入是位置，例如[Google 的 Geo Coding API](https://developers.google.com/maps/documentation/geocoding/)或[GeoName 的搜索 API](http://www.geonames.org/export/geonames-search.html)，但也欢迎此类建议。

提前致谢。

SO上的相关问题：[在文本中识别地理位置](https://stackoverflow.com/questions/1200980/identifying-geographical-locations-in-text)

**更新**：显然 Unlock Text 是基于“ [Edinburgh Geoparser](http://www.slideshare.net/jowalsh/chalice-edinburgh-geoparser-at-gisruk) ”，它是开源的（GPL），但目前不能公开下载（[源](http://lists.osgeo.org/pipermail/discuss/2012-January/010002.html)）。

最近对地理分析器的评估：[http ://www.scribd.com/doc/41603112/geoparser](http://www.scribd.com/doc/41603112/geoparser)

这个看起来很酷，但实现假设地址是美国地址： http: [//openblockproject.org/docs/index.html](http://openblockproject.org/docs/index.html)

到目前为止找到的解析器列表：
- JGeocoder [http://jgeocoder.sourceforge.net/parser.html](http://jgeocoder.sourceforge.net/parser.html)
- Gisgraphy [http://www.gisgraphy.com/](http://www.gisgraphy.com/)
- Geotools [http://www.geotools.org/（geotools](http://www.geotools.org/) 没有似乎提供地理编码（[http://osgeo-org.1560.n6.nabble.com/Review-or-Suggestion-for-Geocoding-Service-in-US-td4991055.html](http://osgeo-org.1560.n6.nabble.com/Review-or-Suggestion-for-Geocoding-Service-in-US-td4991055.html)））

其他一些资源： - [http://www.osgeo.org/](http://www.osgeo.org/)
- [http://lin-ear-th-inking.blogspot.co.uk/2010/03/open-source-geocoders.html](http://lin-ear-th-inking.blogspot.co.uk/2010/03/open-source-geocoders.html)
- [http:// lin-ear-th-inking.blogspot.co.uk/2010/03/more-open-source-geocoders.html](http://lin-ear-th-inking.blogspot.co.uk/2010/03/more-open-source-geocoders.html)
-[反向地理标记](http://maps.googleapis.com/maps/api/geocode/json?latlng=51.507222,%20-0.1275&sensor=false) - [Geohack](http://tools.wmflabs.org/geohack/geohack.php?pagename=London&params=51_30_26_N_0_7_39_W_type:city%288308369%29_region:GB)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-07T18:32:16.983

CLAVIN 似乎是一个可能的选择。

来自网站：“CLAVIN（制图位置和邻近索引器）是一个屡获殊荣的开源软件包，用于文档地理标记和地理解析，采用基于上下文的地理实体解析。”

# theory - 从正则表达式创建 NFA 的步骤

> ID：11819185
> 
> 赞同：27
> 
> 时间：2012-08-05T18:58:15.553
> 
> 标签：theory, compiler-theory, nfa

从正则表达式创建 NFA 时，我遇到了“描述每个步骤”的问题。问题如下：

将以下正则表达式转换为非确定性有限状态自动机 (NFA)，清楚地描述您使用的算法的步骤：(b|a)*b(a|b)

我已经制作了一个简单的三态机器，但它很大程度上来自直觉。这是我的讲师写的过去考试中的一个问题，他还写了对汤普森算法的以下解释：[http ://www.cs.may.ie/staff/jpower/Courses/Previous/parsing/node5.html](http://www.cs.may.ie/staff/jpower/Courses/Previous/parsing/node5.html)

谁能弄清楚如何“清楚地描述每个步骤”？它似乎只是一组基本规则，而不是一个需要遵循的步骤的算法。

也许有一种算法我已经在某处掩盖了，但到目前为止，我只是用有根据的猜测创建了它们。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-08-05T22:26:11.940

**一般方法的简短版本。**
有一种算法称为 Thompson-McNaughton-Yamada 构造算法，有时也称为“Thompson 构造”。一个构建中间 NFA，沿途填充片段，同时尊重运算符优先级：首先是括号，然后是 Kleene Star（例如，a*），然后是串联（例如，ab），然后是交替（例如，a|b）。

**这是构建 (b|a)*b(a|b) 的 NFA 的深入演练**

*构建顶层*

1.  处理括号。注意：在实际实现中，通过对其内容的递归调用来处理括号是有意义的。为了清楚起见，我将推迟评估括号内的任何内容。

2.  Kleene Stars：那里只有一个 *，所以我们构建了一个名为 P 的占位符 Kleene Star 机器（稍后将包含 b|a）。中间结果：
    ![P* 的非确定性有限自动机](../Images/f10ee46a45d6eff59a31efb05eb54a4f.png)

3.  连接：将 P 附加到 b，并将 b 附加到称为 Q 的占位符机器（将包含 (a|b)。中间结果：
    ![P*bQ 的非确定性有限自动机](../Images/ec0422bad6ada21edb49fdf0a4b30ff0.png)

4.  括号外没有交替，所以我们跳过它。

现在我们坐在 P*bQ 机器上。（请注意，我们的占位符 P 和 Q 只是连接机器。）我们将 P 边替换为 b|a 的 NFA，并通过上述步骤的递归应用将 Q 边替换为 a|b 的 NFA。

* * *

*P楼*

1.  跳过。没有括号。

2.  跳过。没有克莱恩明星。

3.  跳过。没有污染。

4.  为 b|a 构建交替机器。中间结果：
    ![b 或 a 的 NFA](../Images/bf04cd1171804265a9bc4eca16e76ca0.png)

* * *

*积分 P*

接下来，我们回到那个 P*bQ 机器，我们撕掉 P 边。我们*将 P 边的源*作为 P 机器的起始状态，*将 P 边*的目的地作为 P 机器的目标状态。我们还使该状态拒绝（取消其作为接受状态的属性）。结果如下所示：
![在此处输入图像描述](../Images/302a4fda07cf7b24684e70789b9e8ac4.png)

* * *

*Q楼*

1.  跳过。没有括号。

2.  跳过。没有克莱恩明星。

3.  跳过。没有污染。

4.  为 a|b 构建交替机器。顺便说一下，交替是可交换的，所以 a|b 在逻辑上等价于 b|a。（阅读：由于懒惰而跳过这个小脚注图。）

* * *

*积分 Q*

除了用我们构建的中间 b|a 机器替换 Q 边缘之外，我们做了上面对 P 所做的事情。这是结果：
![在此处输入图像描述](../Images/1918fa47d145a043c54f1446b00e65e2.png)

多田！呃，我的意思是，QED。

* * *

**想知道更多？**

上面的所有图像都是使用[在线工具生成的，用于将正则表达式自动转换为非确定性有限自动机](http://hackingoff.com/compilers/regular-expression-to-nfa-dfa)。您可以在线找到[Thompson-McNaughton-Yamada 构造算法的源代码](https://github.com/hackingoff/scanner-generator/blob/master/lib/scanner_generator/thompson_construction.rb)。

该算法在[Aho 的编译器：原理、技术和工具](https://rads.stackoverflow.com/amzn/click/com/0201100886)中也有介绍，尽管它对实现细节的解释很少。您还可以从优秀的 Russ Cox[用 C 语言实现的 Thompson 构造中学习，他在一篇关于](http://swtch.com/~rsc/regexp/nfa.c.txt)[正则表达式匹配](http://swtch.com/~rsc/regexp/regexp1.html)的热门文章中对其进行了详细描述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-30T14:43:46.413

在下面的 GitHub 存储库中，您可以找到 Thompson 构造的 Java 实现，其中首先从正则表达式创建 NFA，然后将输入字符串与该 NFA 匹配：

[https://github.com/meghdadFar/regex](https://github.com/meghdadFar/regex)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-09T04:57:25.047

[https://github.com/White-White/RegSwift](https://github.com/White-White/RegSwift)

没有更多乏味的话。查看这个 repo，它将您的正则表达式转换为 NFA，并直观地向您显示 NFA 的状态转换。

# macos - 在不使用 Macports 的情况下将 libusb 包含在包中

> ID：11819186
> 
> 赞同：0
> 
> 时间：2012-08-05T18:58:41.370
> 
> 标签：macos, usb, macports, packagemaker, libusb

我正在为与 USB 端口通信的 Qt 应用程序制作安装程序。要使应用程序正常工作，必须安装 libusb。我可以在终端中使用 macports 来做到这一点，但这对我的用户来说可能很麻烦，所以我正在使用 Apple 的 package maker 工具打包应用程序。问题是如何在包中包含 libusb 以便用户不必使用 Macports？或者有没有办法可以创建一个可以安装 libusb 的 bash 脚本？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:27:13.660

我建议将 libusb 编译为静态库。所以你可以静态链接它，这样你就不需要单独发货了。

# c# - LINQ 查询取决于孙子集合

> ID：11819187
> 
> 赞同：1
> 
> 时间：2012-08-05T18:58:43.120
> 
> 标签：c#, asp.net-mvc-3, linq

我有一组映射到我的数据库并正确填充的对象，但是当我需要根据孙对象的值返回一组对象时，我遇到了这种情况。这些对象之间的关系导致我无法成功创建此 linq 查询。

对象如下：

```
public class Pet
{
    public int PetID { get; set; }
    public string Name { get; set; }

    public virtual int ToyID { get; set; }
    public virtual Toy Toy { get; set; }
}

public class Toy
{
    public int ToyID { get; set; }
    public string Name { get; set; }

    public virtual ICollection<Owner> Owners { get; set; }
    public virtual ICollection<Pet> Pets { get; set; }
}

public class Owner
{
    public int OwnerID {get; set;}
    public string Name {get; set;}

    public virtual ICollection<Toy> Toys { get; set; }
} 
```

所以基本上它是一对多对多的关系。

我有一个宠物集合，我想根据 Owner 对象的 Name 属性进行限制。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T19:20:24.007

那这个呢？

```
Pets.Where( p => p.Toy.Owners.Any(o => o.Name == "OwnerNameYourLookingFor") ); 
```

这将返回在其所有者列表中有 OwnerNameYourLookingFor 的 Pets 的可枚举。

# python - 如何在 Python 中使用 M2Crypto 重新创建以下签名命令行 OpenSSL 调用？

> ID：11819188
> 
> 赞同：4
> 
> 时间：2012-08-05T18:59:01.740
> 
> 标签：python, openssl, x509, m2crypto

这在命令行中完美运行，我想在 Python 代码中使用 M2Crypto 做同样的事情。

```
openssl smime -binary -sign -signer certificate.pem -inkey key.pem \
                    -in some_file.txt -out signed_file -outform DER \
                    -passin pass:somepassword 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T07:08:13.240

这就是我一直在使用 M2Crypto 签署文件的方式。

```
text = open('/path/to/some_file.txt').read()
passphrase = 'somepassword'
buffer = M2Crypto.BIO.MemoryBuffer(text)
signer = M2Crypto.SMIME.SMIME()
signer.load_key('/path/to/key.pem', '/path/to/certificate.pem', lambda x: passphrase)
p7 = signer.sign(buffer, flags=M2Crypto.SMIME.PKCS7_DETACHED)
out = M2Crypto.BIO.MemoryBuffer()
p7.write_der(out)
signature = out.getvalue()
print signature 
```

这对我很有效。`signer.sign`如果您的签名不完全符合您的要求，您可能需要使用这些标志。

# css - 如何在 GWT 自定义日志区域中包装日志行？

> ID：11819192
> 
> 赞同：0
> 
> 时间：2012-08-05T18:59:36.847
> 
> 标签：css, gwt

在 GWT 中，可以通过安装一个[`HasWidgetsLogHandler`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/logging/client/HasWidgetsLogHandler.html). 就我而言，这是一个`VerticalPanel`. 不幸的是，页面的其余部分被太宽的日志输出扭曲了。我怎样才能换行？

`HasWidgetsLogHandler``HTML`为每个日志条目添加一个元素。我尝试在 UiBinder 中设置各个元素的样式，但这不起作用：

```
<ui:style>
  @external gwt-HTML;
  .gwt-HTML {
    white-space: normal;
  }
</ui:style> 
```

同样地，添加`overflow: hidden`——这本来是一个不太有吸引力的选择——没有效果。

感谢您的任何指点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T06:25:38.090

VerticalPanel 实现为 HTML 表格。虽然您可以使用它，但我通常会推荐使用 FlowPanel。

在 FlowPanel 上，您可以设置以下属性：

```
white-space: normal;
word-wrap: break-word; 
```

`word-wrap`是 CSS3，但许多浏览器都支持：http: [//caniuse.com/wordwrap](http://caniuse.com/wordwrap)。它允许在每个字符之后包装长单词。对于不支持它的浏览器，您可能需要添加`overflow: hidden`. （或考虑与 一起设置固定宽度`overflow: auto`。）

如果您绝对需要使用 VerticalPanel，请参阅[HTML 表格中的自动换](https://stackoverflow.com/questions/1258416/word-wrap-in-a-html-table)行（您必须在其上设置自动换行`<td>`）。

# python - 使用 urllib2 登录后提取新的 cookie

> ID：11819197
> 
> 赞同：2
> 
> 时间：2012-08-05T19:00:03.353
> 
> 标签：python, cookies, urllib2

我遇到了一个我无法解决的问题。我能够成功获取 cookie 并在登录到 Web 应用程序后使用它们。问题是 Web 应用程序在我需要点击几下后设置了新的 cookie。

登录后如何提取或获取额外的 cookie？到目前为止，这是我的代码：

```
 def _login_to_page(self,url):
    cj = cookielib.CookieJar()
    cookiehandler = urllib2.HTTPCookieProcessor(cj)
    proxy_support = urllib2.ProxyHandler({"https" : self._proxy})
    opener = urllib2.build_opener(cookiehandler, proxy_support)
    try:
      login_post_data = {'op':'login','user':self._username,'passwd':self._password,'api_type':'json'}
      response = opener.open(str(self._path_to_login_url), urllib.urlencode(login_post_data), self._request_timeout).read()
      if response: 
        print "[+] Login successful"
        self._login_cookies = cj 
      else:
        "[-] Login has probably failed. Wrong Credentials?"

 def get_url_loggedin(self,url):
    #the variable self._login_cookies are the cookies from the previous login
    cookiehandler = urllib2.HTTPCookieProcessor(self._login_cookies)
    proxy_support = urllib2.ProxyHandler({"http" : self._proxy})
    opener = urllib2.build_opener(cookiehandler, proxy_support)
    urllib2.install_opener(opener)
    try:
      url_response = opener.open(url, None, self._request_timeout).read()
    except Exception,e:
      print "[-] Could not read page: "
      print "[??] Error: " +repr(e) 
```

对不起，如果我的英语有点奇怪，我不是母语人士。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T17:57:21.120

在应用程序设置好您想要的 cookie 后，您应该`cj.save( 'cookies.txt' )`将当前设置的 cookie 保存到该文件，并用于`cj.load('cookies.txt')`在应用程序启动时加载它们。请参阅[cookielib 文档](http://docs.python.org/library/cookielib)

# vhdl - 如何在 vhdl 子模块中使用用户定义的类型？

> ID：11819199
> 
> 赞同：2
> 
> 时间：2012-08-05T19:00:32.647
> 
> 标签：vhdl, user-defined-types

假设我的顶级 .vhd 文件中有以下内容

```
entity toplevel is
....
end toplevel;
architecture behave of toplevel is
type state is (A, B, C);
signal cur_state : state;
...
E1 : entity submodule_entity port map(
...
cur_state => cur_state);
...
end behave; 
```

在我的第二个文件的实体/架构对中，我有以下内容

```
entity submodule_entity is
port(
    ...
    cur_state : in state);
end entity; 
```

合成器抱怨类型状态未在 submodule_entity 中定义（这是有道理的）。我将如何在另一个模块中使用用户定义的类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T21:45:06.750

您需要将自定义类型放在一个包中，然后将其包含在两个实体中。

# php - pcre 的 sed 等效语法

> ID：11819200
> 
> 赞同：-3
> 
> 时间：2012-08-05T19:00:34.867
> 
> 标签：php, sed

基本上我使用 bash shell 脚本来`cat new | sed '/1.&nbsp/,/<div/!d' > new2`提取从. 然后将其保存到一个 new2 文件中。如何使用 pcre 在 php 中做同样的工作。 `1.&nbsp``<div`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T19:21:59.923

```
$text = file_get_contents('php://stdin');
$matches = array();
if(preg_match('/1\.&nbsp(.*?)<div/', $text, $matches)) {
  echo $matches[1];
} 
```

测试：

```
echo 'abc 1.&nbsp;This is a test<div>more stuff<div>and more' | php test.php
;This is a test 
```

# javascript - 谷歌地图标记集群

> ID：11819203
> 
> 赞同：0
> 
> 时间：2012-08-05T19:01:10.183
> 
> 标签：javascript, google-maps-api-3

您好我正在尝试将聚类添加到我的谷歌地图。自从我实际编程任何东西以来已经大约八年了，所以由于我缺乏知识，我已经恢复到修改另一个网站。我已将 maerkerclusterer.js 脚本添加到我的页面，但我不知道在哪里解析

`var markerCluster = new MarkerClusterer(map, markers);`

虽然标记数组。我的代码演示可以在下面找到：

[谷歌地图](http://bluextreme.net/TEST.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T19:38:34.463

第 115 行应该是：

```
var len = guests.length;
var markerArray = []; 
```

然后，第 141-142 行到：

```
var marker = google.maps.Marker(map, guests[i]);
markerArray.push(marker );

      } 
var markerCluster = new MarkerClusterer(map, markerArray); 
```

这应该让它工作。

chnge 的重点是向**MarkerClusterer 发送**一个仅包含标记的数组，没有其他内容，因为核心代码在其他方面会被混淆并抛出错误。

# java - Java MySQL 与 ArrayLists 的集成

> ID：11819212
> 
> 赞同：2
> 
> 时间：2012-08-05T19:02:16.630
> 
> 标签：java, mysql, arraylist

我试图让我的程序能够运行多次。这意味着如果我在我的程序中输入一些内容然后将其关闭，当我启动它时，在 MySQL 的帮助下该信息仍然存在。我对 Java 和 MySQL 还很陌生，但这非常重要。我的程序运行良好，但我不知道如何让 MySQL 保存数组列表。我已经用我需要的一切设置了数据库。到目前为止，这是我的 MySQL 桥：

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
public class SQL {
    Class.forName("com.mysql.jdbc.Driver");
    Connection con = DriverManager.getConnection("jdbc:mysql://instance23389.db.xeround.com:15296/Inventory","user","password");
    PreparedStatement Statement = con.prepareStatement("Select * from name");
    ResultSet result = Statement.executeQuery();
    {
        while(result.next())
        {

        }
    }
} 
```

这行：

```
 Class.forName("com.mysql.jdbc.Driver");
throws "Syntax error on token ""com.mysql.jdbc.Driver"", delete this token" 
```

我已经为桥导入了正确的文件。

我还尝试了以下代码。它运行没有错误，但它没有从数据库中导入信息。我从那里去哪里？

```
public static void main(String[] args) throws SQLException
    {
         Connection con = DriverManager.getConnection("jdbc:mysql://instance23389.db.xeround.com:15296/Inventory","user","password");
        PreparedStatement Statement = con.prepareStatement("Select * from inventory");
        ResultSet result = Statement.executeQuery();
        while(result.next()) {
            // do something with the row
        }

    @SuppressWarnings("resource")
    Scanner input = new Scanner(System.in);
    int x=0;
    int choice;
    do{
        do
        {
            System.out.println("Please select what you would like to do:\n1 = Add New\n2 = Update Inventory\n3 = Lookup Inventory\n4 = Make Changes\n5 = Totals");
            choice=input.nextInt();
            if(choice<1 || choice>5)
            {
                System.out.println("Please enter a number 1-5.");
            }
            else
            {

            }
        }while(choice<1 || choice>5);
        if(choice==1)
        {
            Product_Chart.newInv();
        }
        else if(choice==2)
        {
            Product_Chart.updateInv();
        }
        else if(choice==3)
        {

            Product_Chart.lookupInv();
        }
        else if(choice==4)
        {
            Product_Chart.MakeChanges();
        }
        else if(choice==5)
        {
            Product_Chart.Totals();// TODO does not call Product_Chart.Totals();
        }
        else
        {
            System.out.println("Error 101");
        }
    }while(x==0);
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T19:06:16.257

这个说法：

```
Class.forName("com.mysql.jdbc.Driver"); 
```

位于类的顶层——你通常会有变量声明、方法或构造函数。你可能想把它放在一个静态初始化器中：

```
static {
    Class.forName(...);
} 
```

...虽然我认为这一步已经有一段时间没有必要了。（基本上，驱动程序发现过程有所改进。）

至于让 MySQL “持有 ArrayList” - 您需要插入、更新或删除数据库的内容以匹配您的数据。这个主题太宽泛，无法在一个答案中涵盖，但您应该阅读有关如何修改数据以及如何选择数据的教程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T19:10:44.990

您需要将代码放在方法中。试试这个，然后“运行”你的课程：

```
public class SQL {

    public static void main(String[] args) throws SQLException {
        Connection con = DriverManager.getConnection("jdbc:mysql://instance23389.db.xeround.com:15296/Inventory","user","password");
        PreparedStatement Statement = con.prepareStatement("Select * from name");
        ResultSet result = Statement.executeQuery();
        while(result.next()) {
            // do something with the row
        }
    }
} 
```

如果您编写这样的 main 方法（`static`带有`void`返回类型和`String[]`参数），则可以“运行”您的类。

请注意，该行

```
Class.forName("com.mysql.jdbc.Driver"); 
```

完全没有必要：当您尝试打开连接时，将加载驱动程序。

# php - 通过脚本重定向图像是不好的做法吗？

> ID：11819213
> 
> 赞同：2
> 
> 时间：2012-08-05T19:02:28.637
> 
> 标签：php, html, image

这样做不好吗？

**索引.php**

`<img src = "image.php"/>`

**图像.php**

```
header('location: /location/to/another/image.jpg'); 
```

您可能正在考虑“他为什么要这样做”。以上只是我正在做的一个简单场景，我只想知道这样做是否“可以接受”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T19:07:24.923

当然，你可以这样做，但你可能会注意到 PHP 也可以只返回图像的字节和适当的标题（内容类型等）；如果您所追求的只是让PHP“解析”您的图像请求。所以你的 image.php 请求可以是唯一的请求。

[请参阅PHP 文档页面上 fpassthru](http://us.php.net/manual/en/function.fpassthru.php#example-2236)的示例脚本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T19:05:32.683

它并不可怕，但大多数建议是不要在不需要时重定向链接/网址，因为它会减慢页面加载速度（就像做两次 ping 而不是每张图片乘以一次）

还建议配置您的网络服务器来做类似的事情。我使用 nginx，并且我已经为一个站点的一部分完成了此操作（它确认用户已登录以查看他们未发布的文件）。但这是使用 x-accel-redirect 标头，它不是真正的重定向，只是告诉服务器它应该为该特定文件提供服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T19:17:08.767

据我了解，您试图通过在 URL 末尾附加唯一 ID 来防止浏览器缓存这些图像。

当您重定向时，您将在标头中告诉浏览器忘记此请求并启动对另一个 URL 的请求，因此您将针对每个图像请求获得两个请求。

您可以只加载图像文件，而不是强制浏览器重定向`image.php`，它会产生与重定向浏览器相同的效果（即没有缓存），但不需要另一个请求。

在 HTML 中：

```
<img src="image.php?id=whatever" /> 
```

在`image.php`：

```
readfile( 'location/to/another/image.jpg'); // local file system path needed 
```

完毕。浏览器没有缓存，也没有另一个请求的额外开销。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T19:09:09.197

这取决于有多少用户访问此页面。正如*acidzombie24 所*提到的，这样的重定向会减慢您的服务器速度。但是，当您的服务器配置正确并`Connection: keep-alive`受支持时，它不需要第二个连接，而在同一连接中只需要第二个请求。

# c - Gstreamer 将 decodebin2 链接到 autovideosink

> ID：11819214
> 
> 赞同：0
> 
> 时间：2012-08-05T19:02:42.070
> 
> 标签：c, video, gstreamer, decoder

我正在尝试将一些处理逻辑添加到一个在本地视频文件上运行的程序中，但是我在理解如何将以下（成功的）gst-launch 命令转换为代码（并为其提供“垫添加”回调）：

`gst-launch filesrc location=/path/to/my/video.avi ! decodebin2 ! autovideosink`

我已经尝试过使用 gstreamer 的[basic-tutorial-3](http://docs.gstreamer.com/display/GstSDK/Basic+tutorial+3%3a+Dynamic+pipelines)，`decodebin2`代替`audioconvert`：

```
data.source = gst_element_factory_make("filesrc", "source");
data.convert = gst_element_factory_make("decodebin2", "uridecoder");
data.sink = gst_element_factory_make("autovideosink", "autodetect"); 
```

但是，我永远无法链接`data.convert`到`data.sink`，如示例中所述；`gst_element_link(data.convert, data.sink)`总是失败。我怀疑有一些特殊处理`decodebin2`。一些 gstreamer 用户提到了[使用 ghostpads 和单独的 bins](http://gstreamer-devel.966125.n4.nabble.com/Using-a-Bin-td2997320.html)，经过快速尝试，也没有成功：

```
data.bin = gst_bin_new("processing-bin");
gst_bin_add_many(GST_BIN(data.bin), data.decoder, data.sink, NULL);
gst_element_add_pad(data.bin, 
                    gst_ghost_pad_new("bin_sink",
                                      gst_element_get_static_pad(data.decoder,"sink"))); 
```

我对如何继续调试有点困惑。还有其他人有任何指示吗？

以下是当前代码的简要要点：( [gist](https://gist.github.com/3266690) )

====

更新：我的回调现在正在触发，我认为这是因为我的 filesrc 位置的文件名不正确（哎呀）

现在，在遵循以下建议后，我可以确认我正在获取音频和视频大写类型，并在填充回调中检查它们。但是，在一帧填充处理后，我现在收到以下“未链接”错误：

```
Debugging information: gstavidemux.c(5187): gst_avi_demux_loop (): /GstPipeline:gstreamer-test/GstBin:processing-bin/GstDecodeBin2:uridecoder/GstAviDemux:avidemux0:
streaming stopped, reason not-linked 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T19:49:54.013

如果您的文件同时包含音频和视频，则将为音频和视频板调用您的回调。因此，在回调中，您应该检查垫的盖子并确保您尝试仅将视频垫链接到视频接收器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T21:15:51.057

我认为我遇到的主要问题是我正在听解码器寻找新的垫子，而我本应该从视频接收器中获取静态垫。我已经用我的回调函数更新了要点以说明差异。

基本上，它归结为这种变化：

我变了

```
GstPad *sink_pad = gst_element_get_static_pad(data->decoder, "sink"); 
```

到以下

```
GstPad *sink_pad = gst_element_get_static_pad(data->sink, "sink"); 
```

# windows-phone-7 - Windows Phone Tile Notification - 存储在 Shared/ShellContent 中的图像的 URI

> ID：11819215
> 
> 赞同：3
> 
> 时间：2012-08-05T19:02:44.007
> 
> 标签：windows-phone-7, push-notification, isolatedstorage, mpns

我有一个利用推送通知的应用程序。当应用程序接收到背景图像指向与 xap 捆绑为资源的图像的磁贴通知时，图像很好地加载到固定磁贴上。此外，我测试了应用程序运行在固定磁贴上加载图像的可能性，该文件存储在 Shared/ShellContent 的隔离存储中，并且也可以。我使用的 URI 模式是 'isostore:' 但是，当我尝试在我的 Tile Notification 的 XML 中提供该 URI 或它的任何其他组合时，我无法加载引用的图像。

我检查了 MSDN 中的文档，但无济于事。有人会知道这是否可能吗？提前致谢。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T02:37:10.943

您只能使用本地资源或远程资源来更新磁贴的背景图像，并且不能使用隔离存储。

来自 MSDN：

> 背景图片。您可以将本地资源或远程资源用于 Tile 的背景图像。如果要使用本地资源，它必须作为 XAP 包的一部分安装。例如，无法下载图像，将其放入隔离存储中，然后将其用作 Tile 背景图像的本地资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T10:45:02.913

请参阅本[教程](http://channel9.msdn.com/posts/Windows-Phone-7-Push-Notification-QuickApp--Web-Service-With-Azure-Publishing-Instructions)。您可能希望将您的域名添加到允许的域列表中。这是教程源代码中的代码片段。

```
var ListOfAllowedDomains = new Collection<Uri> {
    // Lists domains that can send tile updates and so forth as push notifications. 
    // Only these authorized domains will be allowed by the shell to push new tiles to the phone
    new Uri(@"http://YOUR WEB SERVICE'S DOMAIN HERE") // e.g. if you published a webservice at http://foo.com/service1.svc -- put "http://foo.com" here.
};

//Register this channel with the shell, pass on authorized domain in way method expects
myPushChannel.BindToShellTile(ListOfAllowedDomains); 
```

我已将其完全集成到我的一个移动应用程序中，并且运行顺利。如果我正确理解您的问题，您希望通过服务中托管的相对 URI 提取这些图像。

# asp.net - 为什么我的 ListSearchExtender (ASP.NET AjaxControlToolkit) 没有正确注册？

> ID：11819221
> 
> 赞同：2
> 
> 时间：2012-08-05T19:03:10.743
> 
> 标签：asp.net, ajaxcontroltoolkit

我无法让 Ajax Control Toolkit 中的 List Search Extender 正常工作。我收到错误消息：“无法加载文件或程序集 'AjaxControlToolkit' 或其依赖项之一。系统找不到指定的文件。”

我按照[此处找到](http://ajaxcontroltoolkit.codeplex.com/)的 Visual Studio 2010 的安装说明进行操作。我看到我的解决方案的参考部分中列出了 AjaxControlToolkit，并且我已经注册了程序集，如下面的代码所示。我做错了什么？

```
<%@ Register TagPrefix="asp" Namespace="AjaxControlToolkit" Assembly="AjaxControlToolkit"%>

<asp:ListBox ID="VendorSelector" runat="server"></asp:ListBox>
<asp:ListSearchExtender id="LSE" runat="server"
  TargetControlID="VendorSelector"
  PromptText="Type to search"
  PromptCssClass="ListSearchExtenderPrompt"
  PromptPosition="Top"
  AutoResetTimeout="0"
  QueryPattern="Contains"
  IsSorted="true"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:05:59.167

我没有将程序集添加到我的项目包中。我没有意识到通过代码添加引用和注册程序集是不够的。

我还需要将公钥令牌和版本添加到注册标签。

# html - Rails 部分 html 转义

> ID：11819222
> 
> 赞同：0
> 
> 时间：2012-08-05T19:03:14.993
> 
> 标签：html, ruby-on-rails, view

我试图在 rails 中转义一些文本，但我想用 html 换行符替换换行符：

```
text = "Hi\n<b>there</b><i>italic</i>\nNewline" 
```

我只是使用

```
<%=text.gsub(/\n/, "<br/>") %> 
```

但这会给我`Hi<br/><b>there</b><i>italic</i><br/>Newline`作为我的实际输出。

我正在寻找的是（如在浏览器中所见）

```
Hi
<b>there</b>
<i>italic</i>
Newline 
```

我将如何部分转义（我只想替换换行符，但我想转义的所有其他 html）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T20:52:27.077

我认为你需要在这里使用 HTML pre 标签..

这应该显示您所要求的任何内容..

```
text = "<pre>Hi\n<b>there</b><i>italic</i>\nNewline</pre>"
<%= text %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T19:11:16.583

首先替换`<`为`&lt;`转义现有的 HTML，然后按照您当前的操作替换为`\n`。`<br />`

# wordpress - 具有多个域、子文件夹、wordpress index.php 的 htaccess 配置

> ID：11819223
> 
> 赞同：1
> 
> 时间：2012-08-05T19:03:14.870
> 
> 标签：wordpress, .htaccess, url, permalinks

我真的在为 .htaccess 问题苦苦挣扎，让 Wordpress 漂亮的永久链接正常工作，并删除 index.php。我的网络服务器有以下目录：

```
webroot
   -mydomain1 [wordpress folder]
   -mydomain2
   -mydomain3 
```

在我的 webroot 中，我在根目录中有以下 .htaccess 文件，其中包含以下代码。此重定向工作得很好，并将每个域指向相关的子文件夹。

```
#Turns the rewrite engine on.
RewriteEngine on

#Fix missing trailing slash character on folders.
RewriteRule ^([^.?]+[^.?/])$ $1/ [R,L]

#www.mydomain1.ca and mydomain1.ca will map to the folder
{root}/mydomain1/
 RewriteCond %{HTTP:Host} ^(?:www\.)?mydomain1\.ca$
 RewriteRule (.*) /mydomain1/$1 [NC,L,NS]

#www.mydomain2.com and mydomain2.com will map to the folder
{root}/mydomain2/
 RewriteCond %{HTTP:Host} ^(?:www\.)?mydomain2\.com$
 RewriteRule (.*) /mydomain2/$1 [NC,L,NS]

#www.mydomain3.com and mydomain3.com will map to the folder
{root}/mydomain3/
 RewriteCond %{HTTP:Host} ^(?:www\.)?mydomain3\.com$
 RewriteRule (.*) /mydomain3/$1 [NC,L,NS]

#subdomain.domain.com will map to the folder {root}/folder3/
 RewriteCond %{HTTP:Host} ^(?:subdomain\.domain\.com)?$
 RewriteRule (.*) /folder3/$1 [NC,L,NS] 
```

在 wordpress 目录 (mydomain1) 中，我一直在尝试放置标准的 Wordpress .htaccess 文件。我希望这会从我的 Wordpress 提供的 URL 中删除 index.php。当我将此文件放入 wordpress 目录并将 Wordpress 永久链接设置为 /%postname%/ 时，我得到 404 错误并且没有页面。我在这里尝试使用的 .htaccess 文件是：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

我已经和我的托管服务提供商谈过了，他们支持 mod_rewrite 和 subs，但似乎无法提供帮助。我还进入了 wordpress 并将永久链接设置为 /%postname%/ 所有这一切的结果是我无法再访问该站点。谁能帮助我-我正在阅读各种有用的提示和技巧，但似乎没有任何帮助或工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:42:26.670

尝试删除此行：

```
RewriteBase / 
```

如果 Wordpress 位于子文件夹中（而不是虚拟主机根目录中），请不要使用 RewriteBase 或将其设置为：

```
RewriteBase /wordpress-folder/ 
```

# javascript - 如何让 node.js 使用 CFML 样式的#hashed# 变量？

> ID：11819227
> 
> 赞同：1
> 
> 时间：2012-08-05T19:03:54.860
> 
> 标签：javascript, regex, node.js, coldfusion

我正在构建一个 Node.js 框架，我喜欢 ColdFusion`<cfoutput>`风格的哈希限定变量。

我正在尝试弄清楚如何达到相同的效果。例如：

```
<h1>
    #this.pageTitle#
</h1>
<div>
    #this.content()#
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T18:41:00.403

从我在上面的主要问题中留下的评论中。

```
/**
 * Load the Virtual Machine
 */
var vm = require('vm');

/**
 * Template Data
 */
var template = "<h1>#this.content#</h1><div>#this.sitename()#</div>";

/**
 * Process method
 */
function compile(source)
{
    var __ = "this.__compiled = '";

    /**
     * Replace all template tags
     */
    __ += source.replace(/\#(.*?)\#/g, "' +$1+ '");

    return __ + "';";
}

/**
 * Create the context / scope, this can be anything from 'this', 'process' to 'require('fs')'
 */
var context = {
    content : "Robert Pitt",
    sitename : function(){
        return "http://robertpitt.me";
    }
};

/**
 * Compile the code within the sandbox
 */
var compiled = vm.runInNewContext(compile(template), context);

/**
 * Use compiled source:
 * value: <h1>Robert Pitt</h1><div>http://robertpitt.me</div>
 */
console.log(compiled); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T01:22:32.863

[CoffeeScript](http://coffeescript.org/)有[字符串插值](http://coffeescript.org/#strings)：

```
author = "Wittgenstein"
quote  = "A picture is a fact. -- #{ author }"

sentence = "#{ 22 / 7 } is a decent approximation of π" 
```

# android - 文本转语音 - 空指针异常

> ID：11819229
> 
> 赞同：1
> 
> 时间：2012-08-05T19:04:42.863
> 
> 标签：android, exception, pointers, null, text-to-speech

我创建了一个 TTS 模块。它在独立的基础上完美地工作，但是当我尝试将它作为我的项目的一个类来实现时，它行为不端并引发空指针异常。

我计划实现的目标：

1) 从 /res/raw 文件夹中读取一个文本文件。2) 通过 TTS 将文本文件转换为语音。字符串 s 通过 BufferReader 类捕获了整个文件。

我用于 TTS 的代码是 -

```
private TextToSpeech tts;
tts.speak(s, TextToSpeech.QUEUE_FLUSH, null);
Intent checkIntent = new Intent();
checkIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
    startActivityForResult(checkIntent, MY_DATA_CHECK_CODE); 
```

错误出现在 tts.speak..... 行。我通过在整个代码中添加 log.d 发现了这一行。上面的 tts.speak 代码没有 log.d 注册帖子。

请帮助我调试问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T19:08:12.090

您已经展示了*声明*变量：

```
private TextToSpeech tts; 
```

...并且您已经*使用*变量显示：

```
tts.speak(s, TextToSpeech.QUEUE_FLUSH, null); 
```

...但你有没有*初始化*变量？如果您不为其分配值，它将始终具有默认值`null`. 从[本教程](http://www.androidhive.info/2012/01/android-text-to-speech-tutorial/)来看，您需要这样的东西（我假设您的代码位于 中`Activity`）：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    ...
    tts = new TextToSpeech(this, this);
    ...
} 
```

# c++ - 如何为用户编写编译时警告

> ID：11819240
> 
> 赞同：7
> 
> 时间：2012-08-05T19:06:26.483
> 
> 标签：c++, compiler-construction, g++

我想为每个编译我的代码的用户**在 GNU G++中编写一个 Pragma 警告。**

我怎样才能做到这一点？我正在使用 GNU G++ 编译器。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-05T19:07:34.377

MSVC 和更新的 GCC 支持：

```
#pragma message ( "your warning text here" ) 
```

在 GCC 中，其他语法也常用：

```
#warning "you warning text here" 
```

另请参阅问题：[#warning 预处理器指令](https://stackoverflow.com/questions/171435/portability-of-warning-preprocessor-directive)和**[GCC 文档的可移植性](http://gcc.gnu.org/onlinedocs/gcc/Diagnostic-Pragmas.html#Diagnostic-Pragmas)**

# java - 将库添加为“引用库”

> ID：11819241
> 
> 赞同：0
> 
> 时间：2012-08-05T19:06:32.037
> 
> 标签：java, eclipse, eclipse-plugin

我正在尝试以编程方式将库添加到引用的库中。这是我的代码：

```
String filename = "myfile.jar";
InputStream is;
try {
   is = new BufferedInputStream(new FileInputStream("D:\\" + filename));
   IFile file = project.getFile(filename);
   file.create(is, false, null);

   IPath path = file.getFullPath();                         
   IClasspathEntry[] cpe = javaProject.getRawClasspath();
   List<IClasspathEntry> libraries = Arrays.asList(cpe);                    
   libraries.add(JavaCore.newLibraryEntry(path, null, null));
   try {
        javaProject.setRawClasspath(libraries.toArray(new IClasspathEntry[libraries.size()]), null);
   } catch (JavaModelException e1) {
        e1.printStackTrace();
   }
 } catch (FileNotFoundException e) {
   e.printStackTrace();
 } 
```

但结果似乎是：

![在此处输入图像描述](../Images/5f02c1d19f1394a81faacb88acc15b37.png)

* * *

更新 1。

这是类路径。似乎`.classpath`没有改变。

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
    <classpathentry kind="src" path="src"/>
    <classpathentry kind="con"  path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-1.6"/>
    <classpathentry kind="output" path="bin"/>
</classpath> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:03:00.407

我怀疑问题出在这一行：

```
IPath path = file.getFullPath(); 
```

试试这条线：

```
IPath path = file.getProjectRelativePath(); 
```

在更改项目构建路径时调试问题的一个好方法是查看项目根目录中的 .classpath 文件。该文件将向您展示您的代码所产生的确切效果。然后与手动执行等效操作时获得的效果进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T08:08:49.020

这是如何将自定义库添加到项目的片段。我希望它可以帮助您了解这个想法。

```
// configure class path, source dir and output dir
        final IPath outputpath = project.getFullPath().append(CLASSES);
        final IClasspathEntry classpath1 = JavaCore.newSourceEntry(project.getFullPath().append(customPath));
        final IClasspathEntry[] defaultClasspath = org.eclipse.jdt.ui.PreferenceConstants.getDefaultJRELibrary();
        final IClasspathEntry[] newClasspath = new IClasspathEntry[defaultClasspath.length + 2];
        System.arraycopy(defaultClasspath, 0, newClasspath, 0, defaultClasspath.length);
        newClasspath[defaultClasspath.length] = classpath1;
        javaProject.setRawClasspath(newClasspath, outputpath, null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T18:48:32.080

此解决方案有效：

```
IClasspathEntry[] entries = javaProject.getRawClasspath();
IClasspathEntry[] newEntries = new IClasspathEntry[entries.length + 1];

 System.arraycopy(entries, 0, newEntries, 0, entries.length);

 // add a new entry using the path to the container
 //Path junitPath = new Path("D:\\jarscan.jar");
 IClasspathEntry junitEntry = JavaCore.newLibraryEntry(new Path("D:\\jarscan.jar"), null, null, false);
 newEntries[entries.length] = junitEntry;
 javaProject.setRawClasspath(newEntries, null); 
```

更多信息[在这里](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.jdt.doc.isv/guide/jdt_api_classpath.htm)

# c# - 使用 OLE-DB 从数据库中读取附件

> ID：11819247
> 
> 赞同：2
> 
> 时间：2012-08-05T19:07:32.707
> 
> 标签：c#, database, ms-access, oledb

我正在尝试使用 C# 读取 Microsoft Access 数据库。我正在使用 OLE-DB 类。问题是这段代码

```
OleDbDataReader reader = Command.ExecuteReader(); 
while (reader.Read())
{
    Console.WriteLine(reader.GetFieldType(0) + "\t" + reader.GetFieldType(1) + "\t" + reader.GetFieldType(2) +
            "\t" + reader.GetFieldType(3) + "\t" + reader.GetFieldType(4) + "\t" + reader.GetFieldType(5));
} 
```

告诉我，第 5 个字段来自数据类型字符串。但它是一个附件。当我试图读取这个字符串时，它是空的。

```
System.Int32    System.String   System.String   System.Int32    System.DateTime    System.String 
```

有没有办法从数据库中读取附件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T19:55:12.193

我知道您要求使用 OleDb，但使用 DAO，您可以这样说：

```
 DBEngine dbe = new DBEngine();
    Database db = dbe.OpenDatabase(@"z:\docs\test.accdb", false, false, "");
    Recordset rs = db.OpenRecordset("SELECT TheAttachment FROM TheTable", 
        RecordsetTypeEnum.dbOpenDynaset, 0, LockTypeEnum.dbOptimistic);

    Recordset2 rs2 = (Recordset2)rs.Fields["TheAttachment"].Value;

    Field2 f2 = (Field2)rs2.Fields["FileData"];
    f2.SaveToFile(@"z:\docs\ForExample.xls");
    rs2.Close();
    rs.Close(); 
```

参考：[使用 .NET 以编程方式管理 Microsoft Access 附件类型字段](https://stackoverflow.com/questions/779211/programmatically-managing-microsoft-access-attachment-typed-field-with-net)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-14T21:43:02.780

这有点棘手，但你不能只查询附件列，你只会得到文件名。您必须从附件列中的附件对象中选择值，然后提取字节数组（存储在 filedata 中），然后删除 Access 添加到文件中的标头：

```
var connection = new OleDbConnection(connectionString);
connection.Open();
var dt = new DataTable("Attachments");
var dataAdapter = new OleDbDataAdapter(@"select attachmentColumn.FileData as filedata, attachmentColumn.FileName as filename, attachmentColumn.FileType as filetype from tablename", connection);
dataAdapter.Fill(dt);

foreach (DataRow row in dt.Rows)
{
  var filename = row["filename"].ToString();
  if (string.IsNullOrWhiteSpace(filename)) continue;
  var filedata = (byte[]) row["filedata"];
  int header = (int) filedata[0];
  byte[] actualFile = new byte[filedata.Length - header];
  Buffer.BlockCopy(filedata, header, actualFile, 0, actualFile.Length);
  // do stuff with byte array!
  File.WriteAllBytes("C:\\" + filename, actualFile);
} 
```

请记住，未压缩的文件将由 Access 压缩。更多关于[这里](http://office.microsoft.com/en-us/access-help/attach-files-and-graphics-to-the-records-in-your-database-HA001213852.aspx "这里")。希望这对你有用！

# sql - ROW_NUMBER() 显示意外值

> ID：11819251
> 
> 赞同：1
> 
> 时间：2012-08-05T19:07:48.633
> 
> 标签：sql, sql-server, aggregate-functions, window-functions

我的表具有如下值（`RowCount`由下面的查询生成）：

```
ID       Date_trans   Time_trans  Price  RowCount
-------  -----------  ----------  -----  --------
1699093  22-Feb-2011  09:30:00    58.07  1
1699094  22-Feb-2011  09:30:00    58.08  1
1699095  22-Feb-2011  09:30:00    58.08  2
1699096  22-Feb-2011  09:30:00    58.08  3
1699097  22-Feb-2011  09:30:00    58.13  1
1699098  22-Feb-2011  09:30:00    58.13  2
1699099  22-Feb-2011  09:30:00    58.12  1
1699100  22-Feb-2011  09:30:08    58.13  3
1699101  22-Feb-2011  09:30:09    57.96  1
1699102  22-Feb-2011  09:30:09    57.95  1
1699103  22-Feb-2011  09:30:09    57.93  1
1699104  22-Feb-2011  09:30:09    57.96  2
1699105  22-Feb-2011  09:30:09    57.93  2
1699106  22-Feb-2011  09:30:09    57.93  3
1699107  22-Feb-2011  09:30:37    58     1
1699108  22-Feb-2011  09:30:37    58.08  4
1699109  22-Feb-2011  09:30:38    58.08  5
1699110  22-Feb-2011  09:30:41    58.02  1
1699111  22-Feb-2011  09:30:41    58.02  2
1699112  22-Feb-2011  09:30:41    58.01  1
1699113  22-Feb-2011  09:30:41    58.01  2
1699114  22-Feb-2011  09:30:41    58.01  3
1699115  22-Feb-2011  09:30:42    58.02  3
1699116  22-Feb-2011  09:30:42    58.02  4
1699117  22-Feb-2011  09:30:45    58.04  1
1699118  22-Feb-2011  09:30:54    58     2
1699119  22-Feb-2011  09:30:57    58.05  1 
```

该`ID`列是 IDENTITY 列。
我正在使用这个查询来获取*连续的行数*：

```
 SELECT   ID, Date_trans, Time_trans, Price
          ,ROW_NUMBER() OVER(PARTITION BY Price  ORDER BY ID) RowCount
  FROM     MyTable
  ORDER    BY ID; 
```

我得到的`RowCount`值对于大多数值是正确的，但对于某些值是错误的。例如：

*   ID 1699100 价格 58.13 – 计数应为 1（显示 3）。
*   ID 1699104 价格 57.96 – 计数应为 1（显示 2）。
*   ID 1699105、1699106 价格 57.93 – 计数应为 1、2（显示 2、3）。

我在 PostgreSQL 中尝试了相同的查询并发现了相同的结果。
我在[这里上传了一个 csv 数据样本](https://docs.google.com/open?id=0B3QJE7P_Z7bWTHMtMi14NUl2UGc)。

我对分区的这种意外结果感到困惑。有谁能够帮助我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T19:35:12.200

该函数的`PARTITION BY`子句`ROW_NUMBER()`指示它按值对*整个*行集进行分区，并按 s`Price`的升序分配行号`ID`。

似乎您想区分具有相同`Price`值的任何两组行，这些行被至少一个不同的行*分隔*`Price`。

可能有多种方法可以实现这一目标。在 SQL Server 中（我认为在 PostgreSQL 中也是如此），我将首先使用两个`ROW_NUMBER()`调用来获取额外的分区标准，然后使用该标准再次对行进行排名，如下所示：

```
WITH partitioned AS (
  SELECT
    ID,
    Date_trans,
    Time_trans,
    Price,
    ROW_NUMBER() OVER (                   ORDER BY ID) -
    ROW_NUMBER() OVER (PARTITION BY Price ORDER BY ID) AS PriceGroup
  FROM MyTable
)
SELECT
  ID,
  Date_trans,
  Time_trans,
  Price,
  ROW_NUMBER() OVER (PARTITION BY Price, PriceGroup ORDER BY ID) AS RowCount
FROM partitioned
ORDER BY ID
; 
```

这是一个[SQL Fiddle 演示](http://sqlfiddle.com/#!3/81d7d/2)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T23:30:18.663

### 纯 SQL

```
WITH x AS (
    SELECT id, date_trans, time_trans, price
         ,(price <> lag(price) OVER (ORDER BY id))::int AS step
    FROM   tbl
    )
    ,y AS (
    SELECT *, sum(step) OVER (ORDER BY id) AS grp
    FROM   x
    )
SELECT id, date_trans, time_trans, price
      ,row_number() OVER (PARTITION BY grp ORDER BY id) As row_ct
FROM   y
ORDER  BY id; 
```

逻辑：

1.  请记住，与 中的最后一行相比，价格何时发生变化`step`。（第一行的特殊情况也可以。）
2.  总结步骤，使顺序相同的价格最终在同一组`grp`中。
3.  每组的行数。

老实说，我认为[@Andriy 的解决方案](https://stackoverflow.com/a/11819452/939860)更优雅一些。它也需要三个窗口函数，但只需两个查询步骤即可完成。在对小样本的快速测试中，它也稍微快了一点。所以，我+1。

如果**性能**至关重要，则可以使用更专业的解决方案

### PL/pgSQL 函数

应该快得多，因为它只需要扫描和排序一次表。

```
CREATE OR REPLACE FUNCTION f_my_row_ct()
  RETURNS TABLE (
    id         int
   ,date_trans date
   ,time_trans time
   ,price      numeric
   ,row_ct     int
  ) AS
$BODY$
DECLARE
   _last_price numeric;   -- remember price of last row
BEGIN

FOR id, date_trans, time_trans, price IN 
   SELECT t.id, t.date_trans, t.time_trans, t.price
   FROM   tbl t
   ORDER  BY t.id
LOOP
   IF _last_price = price THEN   -- works with 1st row, too
      row_ct := row_ct + 1;
   ELSE
      row_ct := 1;
   END IF;

   RETURN NEXT;
   _last_price = price;   -- remember last price
END LOOP;

END;
$BODY$  LANGUAGE plpgsql; 
```

称呼：

```
SELECT * FROM f_my_row_ct() 
```

在对小样本的另一项快速测试中，速度提高了 3-4 倍。测试`EXPLAIN ANALYZE`一下看看。

* * *

顺便说一句：您可以简化表（和查询）并通过合并和保存一些字节的存储`date_trans date`空间。`time_trans time``ts_trans timestamp`

`date`提取或`time`从 a中提取非常简单且非常快速`timestamp`：

```
ts_trans::date
ts_trans::time 
```

[关于日期/时间类型的手册。](http://www.postgresql.org/docs/current/interactive/datatype-datetime.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T19:22:22.527

*   1699100 价格 58.0 - 显示 3 因为 1699097,8 是 1,2

*   1699104 价格 57.96 – 显示为 2，因为 1669101 为 1。

*   1699105、1699106 价格 57.93 – 显示 2、3，因为 1699103 是 1

如果要在序列中查找相同值的项目，一种选择是将数据连接到前一个 ID 并查看值是否相同

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T19:23:40.607

根据您对结果的期望，我可以收集到，您也需要对 Time_trans 进行分区：

```
 SELECT   ID, Date_trans, Time_trans, Price
           ,ROW_NUMBER() OVER(PARTITION BY Time_trans, Price ORDER BY ID) RowCount
  FROM     MyTable
  ORDER BY ID 
```

我相信这是这种情况，因为您期望 ROW_NUMBER 在您处理数据时随着 Time-trans 值的变化而重新开始。

此外，如果表中可能有多个日期，您可能也想在其中添加 Date_trans，这是我所期望的。

# android - 我现在应该使用什么 Android SDK？

> ID：11819254
> 
> 赞同：5
> 
> 时间：2012-08-05T19:08:13.253
> 
> 标签：android, sdk, version

我正计划尝试制作一款游戏以尽快上架 Android Play 商店，我想知道我现在应该使用什么 SDK？我知道 Jellybean 有 4.1，但我还是应该选择像 2.2 或 2.3 这样的旧版本吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-05T19:11:50.160

有关哪些设备广泛分布于 Google Play 市场用户的统计数据，请访问：[Android 仪表板](http://developer.android.com/about/dashboards/index.html#Platform)

在撰写本文时**（2014 年 9 月）**，它看起来像这样：

![Android 使用情况第 13 位。 2014 年 9 月](../Images/af133c8f986d61e80a41d832c909af02.png)

看到统计数据，我会选择 Jelly Bean (Android 4.1 +)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-05T19:10:55.320

您仍然应该至少针对目前拥有约 60% 份额的 API 级别 10：http: [//developer.android.com/about/dashboards/index.html](http://developer.android.com/about/dashboards/index.html)

您可以使用支持库 (v4) 来获取片段等新类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-05T19:15:27.940

所以像大家说的那样使用仪表板降到 2.1-2.2 但不要忘记那应该是你的**min SDK**。您的**目标 sdk**编号应为*16*（如 #io2012 所述）。这将确保您的样式为新的东西很好地呈现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-05T19:10:07.057

2.1 和 2.3 等较低版本意味着您将获得更多客户。而另一方面，ICS 和 JellyBean 将为您提供改进的功能。

选择一个版本，以便在功能和潜在目标受众之间取得平衡。

例如，如果你选择 JB，那么会有很多用户还没有 JB，因此你会失去你的潜在用户。

*（我个人更喜欢2.3.3）*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-05T19:11:36.267

这是您的选择，但如果您在使用较旧的 SDK 时有更多的受众，因为将支持更多的设备。我建议你使用2.2。以下是 Google 的 Android SDK 使用统计信息[链接](http://developer.android.com/about/dashboards/index.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-05T19:14:20.887

这取决于你打算开发什么样的游戏。[这](http://android-developers.blogspot.com/2010/06/game-development-for-android-quick.html)可能会给你一个提示。干杯。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-05T20:54:50.040

```
<uses-sdk android:targetSdkVersion="16" android:minSdkVersion="8" /> 
```

**minSdkVersion** 这主要是您使用大部分 API 集的代码库。

**targetSdkVersion** 这是您可以测试的最高可能的 SDK，当 targetSdk 足够高时，使用您的应用程序的设备将看起来和感觉更自在。

**多版本** 当您想使用比您的 minSdkVersion 更高级别的功能时。您可以使用 Build.Version.X 阻止调用，例如。

```
 File path;
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.FROYO) {
        path = new           File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES).getAbsolutePath() + File.separator + directory);
    } else {
        path = new File(getBestCacheDir(applicationContext, true) + File.separator + "Pictures" + File.separator + directory);
    } 
```

注意不要意外使用比您的 minSDK 更高级别的 API 功能，因为这会导致运行时崩溃。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-05T19:17:51.090

您可以使用 4.1，并在清单文件中声明 uses-sdk android:minSdkVersion="8" android:maxSdkVersion="16"。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-05T19:13:04.247

如果您的目标是 2.2 及更早版本，您可能会触及 95% 的市场。如果你使用 Eclipse，你应该更新你所有的工具，然后尝试创建一个 Android 项目，谷歌显示了一些 satistics，但最好的地方是这里：http: [//developer.android.com/about/dashboards/index。 html](http://developer.android.com/about/dashboards/index.html)

# java - 整数属性的java dom解析器getgetAttribute

> ID：11819258
> 
> 赞同：0
> 
> 时间：2012-08-05T19:09:29.230
> 
> 标签：java, dom, getattribute

我有一个类似于`<student id=1> .... </student>`. 当我尝试使用 dom 解析器 [1] 提供的 getAttribute API 时，我收到以下错误：与元素类型“id”关联的属性“{1}”需要打开引号。

如果我在 xml 中添加引号使其看起来像：`<student id="1"> .... </student>` 那么错误就会消失。

我不想更改我所有的 xml（数千个）。有什么我可以做的代码修复吗？

[1] [http://docs.oracle.com/javase/1.4.2/docs/api/org/w3c/dom/Element.html#getAttribute%28java.lang.String%29](http://docs.oracle.com/javase/1.4.2/docs/api/org/w3c/dom/Element.html#getAttribute%28java.lang.String%29)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T19:27:36.763

> 我有一个看起来像的 XML 元素`<student id=1> .... </student>`

好吧，不，您没有这样的 XML 元素。它根本不是 XML。

属性值周围的引号是语法的必需部分，没有它们，任何 xml 解析器都无法解析您的“xml”。

您应该更改您的 xml 以使其有效。如果该 xml 是由某个程序生成的，则最好更改该程序以使其生成有效的 xml。

# javascript - 如何创建谷歌图片引擎效果？

> ID：11819259
> 
> 赞同：0
> 
> 时间：2012-08-05T19:09:32.347
> 
> 标签：javascript, jquery

我正在尝试创建谷歌图像引擎效果，当用户悬停图像时显示图像信用（放大图像并显示信用）。我不确定如何弹出图像并忽略内容的流动。

我知道灯箱会产生类似的效果，但我只需要一个简单的悬停并显示图像信用效果。我有搜索谷歌，我得到的只是像灯箱这样的弹出插件。我想知道是否有人给我一个方向或教程？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T19:57:44.397

这将显示一个 div 浮动在图像的 div 容器上方。

```
<div id="yourImage1Parent"><img id"yourImage1" src="yourImage1src.jpg" /></div>
<script type="javascript/text">
 var credits = document.createElement("div");
 credits.style = "position: absolute; height:25px; width: 25px";
 credits.innerHTML = //load credits from ajax or array or logic, maybe from data-attribute
 document.getElementById("yourImage1Parent").appendChild(credits);
</script> 
```

然而，它很简单。它需要连接一个事件来控制该元素的查看和元素的删除。由于没有示例的实际代码，因此此代码只是一个示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T21:18:07.230

我创建了一个放大图像并显示框的基本示例。要使其成为通用解决方案，需要一些更精细的 javascript。

我创建了一个不可见的 div，其中包含具有相同图像的 img 元素。在原始 img 元素的 onmouseover 事件中，我启动了一个计时器，它显示带有重复 img 元素的 div。当显示 div 时，会启动另一个计时器。当计时器触发时，我会更改 div 的大小和位置以及 div 中图像的大小。通过使用 CSS3 转换，浏览器会自动将大小更改为看起来像缩放的动画。

我已经在 Chrome 中测试了我的代码，但它也应该在 Firefox 和 Opera 中运行。IE 不会显示动画。

链接：[这里](http://puge.dk/hover.html)

使用我的来源作为起点。

**编辑：**我编写了一个更好的代码版本，它获取所有具有类*拇指*的图像并使其缩放。这个版本比旧版本要复杂一些。再次，查看源代码并随时在下面的评论中提问。

链接：[这里](http://puge.dk/hover2.html)

# jquery-mobile - iosSlider 不适用于 jquery mobile

> ID：11819263
> 
> 赞同：0
> 
> 时间：2012-08-05T19:10:15.067
> 
> 标签：jquery-mobile

我想使用iosSlider在页面#test中创建一个滑块，但是当jquery mobile创建的页面（我使用方法“pageinit”）时，div#slider不显示。

它适用于 $(document).ready() 方法，但 jquery mobile 必须使用 $(document).bind('pageinit')。所以有人可以帮助我吗？

有我的代码：

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <style type="text/css">
        /* slider container */
    .iosSlider {
        /* required */
        position: relative;
        overflow: hidden;
        width: 200px;
        height: 200px;
    }

    /* slider */
    .iosSlider .slider {
        /* required */
        width: 100%;
        height: 100%;
    }

    /* slide */
    .iosSlider .slider .slide {
        /* required */
        float: left;
        width: 100%;
        height: 100%;
    }
    </style>
    <script type="text/javascript" src="./js/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="./js/jquery.mobile-1.1.1.min.js"></script>
    <script type="text/javascript" src="./js/jquery.iosslider.js"></script>
    <script type="text/javascript">
        $("#test").live('pageinit', function(event){
            $("#slider").iosSlider();
        });
    </script>
</head>
<body>
    <div data-role="page" id="test">
        <div data-role="content"
            <div class="iosSlider" id="slider">
                <div class="slider">
                    <div class="slide" style="background-color:green;"></div>
                    <div class="slide" style="background-color:red;">2</div>
                    <div class="slide" style="background-color:blue;">3</div>
                </div>
            </div>
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:20:00.200

需要添加这段代码，每次更改页面都需要调用iosSlider

```
 $(document).bind('pagechange', function(e, data){

    var pageId="";

    if ( typeof data.toPage === "string" ) {
        pageId=data.toPage;
    }else{
        pageId="#"+data.toPage.attr('id');
    }
    console.log('pagechange',pageId);
    switch(pageId){
        case '#login':loginPageIsShowed();
            break;
        case '#main':checkLogin();mainPageIsShowed();renderIosSlider();
            break;
        case '#form':checkLogin();formPageIsShowed();renderIosSlider();
            break;
        case '#package':checkLogin();packagePageIsShowed();renderIosSlider();
            break;
        default: console.log('default');
            break;
    }

function renderIosSlider(){
    $('.iosSlider').iosSlider({
                desktopClickDrag: true
            });

    });
} 
```

# python - 生成一个属于多个范围的随机数

> ID：11819265
> 
> 赞同：2
> 
> 时间：2012-08-05T19:10:21.473
> 
> 标签：python, random

我将如何在 python 中生成一个随机整数，该整数***是***随机的，但本身属于乘法表*（时间表）*范围并由我指定的值确定？

**例子。**假设我想生成一个 10 到 100 之间的随机数，但它应该是 7 的倍数。可能的返回值可能是`14, 28, 49, 77`等。

该函数的模型可能如下所示：

```
def gen_random(f, min, max):
    #generate random number between min and max that is a multiple of fac 
```

Python 的`random`模块能够做到这一点吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-05T19:12:24.293

为什么不直接生成一个乘数`fac`给你一个介于你的界限之间的数字呢？

```
import math
import random

def rand_multiple(fac, a, b):
    """Returns a random multiple of fac between a and b."""
    min_multi = math.ceil(float(a) / fac)
    max_multi = math.floor(float(b) / fac)
    return fac * random.randint(min_multi, max_multi) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T19:17:45.073

函数 randrange 有一个 step 参数，所以如果你可以这样做：

```
>>> min = 7
>>> max = 14 + 1
>>> randrange(min, max, 7)
14
>>> randrange(min, max, 7)
7 
```

但：

```
>>> min = 6
>>> randrange(min, max, 7)
13 
```

所以你需要做这样的事情：

```
min += 7 - min % 7
max = max - max % 7 + 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T19:12:10.857

您将需要手动检查因子参数；随机函数不处理。您可以在 min/f 和 max/f 之间生成一个数字，然后乘以 f 作为最终结果。

# haskell - 如何使用同一个包的两个版本？

> ID：11819272
> 
> 赞同：3
> 
> 时间：2012-08-05T19:11:27.383
> 
> 标签：haskell, dependencies, dependency-management

我需要在 cabal 文件和或 Login.hs 中更改什么？请注意，此包中的其他 .hs 文件需要不同的管道版本。

（源[https://github.com/gertcuykens/haskell-design](https://github.com/gertcuykens/haskell-design)）

```
gert@couchdb:~/Downloads/haskell-design/src$ ghci Chat.hs 
GHCi, version 7.4.2: http://www.haskell.org/ghc/  :? for help
Loading package ghc-prim ... linking ... done.
Loading package integer-gmp ... linking ... done.
Loading package base ... linking ... done.
[1 of 2] Compiling Login            ( Login.hs, interpreted )

Login.hs:27:9:
    No instance for (Control.Monad.Trans.Control.MonadBaseControl
                       IO m0)
      arising from a use of `withManager'
    Possible fix:
      add an instance declaration for
      (Control.Monad.Trans.Control.MonadBaseControl IO m0)
    In the expression: withManager
    In the expression:
      withManager
      $ \ manager
          -> FB.runFacebookT app manager
             $ FB.getUserAccessTokenStep1 url perms
    In an equation for `fbUrl':
        fbUrl
          = withManager
            $ \ manager
                -> FB.runFacebookT app manager
                   $ FB.getUserAccessTokenStep1 url perms

Login.hs:27:55:
    Couldn't match expected type `http-conduit-1.4.1.8:Network.HTTP.Conduit.Manager.Manager'
                with actual type `http-conduit-1.5.0.3:Network.HTTP.Conduit.Manager.Manager'
    In the second argument of `FB.runFacebookT', namely `manager'
    In the expression: FB.runFacebookT app manager
    In the expression:
      FB.runFacebookT app manager $ FB.getUserAccessTokenStep1 url perms

Login.hs:31:13:
    No instance for (Control.Monad.Trans.Control.MonadBaseControl
                       IO m1)
      arising from a use of `withManager'
    Possible fix:
      add an instance declaration for
      (Control.Monad.Trans.Control.MonadBaseControl IO m1)
    In the expression: withManager
    In the expression:
      withManager
      $ \ manager
          -> FB.runFacebookT app manager
             $ do { t <- FB.getUserAccessTokenStep2 url [...];
                    u <- FB.getUser "me" [] (Just t);
                    .... }
    In an equation for `fbEmail':
        fbEmail c
          = withManager
            $ \ manager
                -> FB.runFacebookT app manager
                   $ do { t <- FB.getUserAccessTokenStep2 url ...;
                          .... }

Login.hs:31:59:
    Couldn't match expected type `http-conduit-1.4.1.8:Network.HTTP.Conduit.Manager.Manager'
                with actual type `http-conduit-1.5.0.3:Network.HTTP.Conduit.Manager.Manager'
    In the second argument of `FB.runFacebookT', namely `manager'
    In the expression: FB.runFacebookT app manager
    In the expression:
      FB.runFacebookT app manager
      $ do { t <- FB.getUserAccessTokenStep2 url [c];
             u <- FB.getUser "me" [] (Just t);
             return $ FB.userEmail u }

Login.hs:37:12:
    No instance for (Control.Monad.Trans.Control.MonadBaseControl
                       IO m2)
      arising from a use of `withManager'
    Possible fix:
      add an instance declaration for
      (Control.Monad.Trans.Control.MonadBaseControl IO m2)
    In the expression: withManager
    In the expression:
      withManager
      $ \ manager
          -> FB.runFacebookT app manager
             $ do { t <- FB.getUserAccessTokenStep2 url [...];
                    u <- FB.getUser "me" [] (Just t);
                    .... }
    In an equation for `fbName':
        fbName c
          = withManager
            $ \ manager
                -> FB.runFacebookT app manager
                   $ do { t <- FB.getUserAccessTokenStep2 url ...;
                          .... }

Login.hs:37:58:
    Couldn't match expected type `http-conduit-1.4.1.8:Network.HTTP.Conduit.Manager.Manager'
                with actual type `http-conduit-1.5.0.3:Network.HTTP.Conduit.Manager.Manager'
    In the second argument of `FB.runFacebookT', namely `manager'
    In the expression: FB.runFacebookT app manager
    In the expression:
      FB.runFacebookT app manager
      $ do { t <- FB.getUserAccessTokenStep2 url [c];
             u <- FB.getUser "me" [] (Just t);
             return $ FB.userName u }
Failed, modules loaded: none.
Prelude> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T19:36:09.433

您可以在您的 cabal 文件中指定版本并使用 cabal-dev ghci（如果您使用 cabal-dev）。

而且你不能使用同一个包的两个版本，但在你的情况下，你可以`fb`从 github 使用：

```
$ git clone https://github.com/snoyberg/fb.git
$ cd fb
$ cabal install fb.cabal 
```

# powershell - Windows 脚本，设置网络连接的高级属性

> ID：11819273
> 
> 赞同：0
> 
> 时间：2012-08-05T19:11:30.987
> 
> 标签：powershell, wsh

有没有人在特定网络连接的高级属性中设置“此连接的 dns 后缀”部分的 powershell 脚本或类似脚本？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T20:59:58.787

试试这个（以管理员身份运行 PowerShell）：

```
 Get-WmiObject Win32_NetworkAdapterConfiguration -Filter "Description='interface description'" | 
Invoke-WmiMethod -Name SetDNSDomain -ArgumentList @('contoso.com') 
```

# ios - 打开 GL ES 对象未正确渲染

> ID：11819284
> 
> 赞同：0
> 
> 时间：2012-08-05T19:12:37.377
> 
> 标签：ios, opengl-es

我有一个在 SketchUp 中制作的 3d 对象。使用我在网上找到的工具，我已将其转换为列出所有顶点和规范的 .h 文件。问题是当我渲染对象时，您可以看到缝隙。而且我还没有找到问题所在。这有明显的原因吗？

[转换器珍珠文件](http://heikobehrens.net/2009/08/27/obj2opengl/)

我已经添加了一个指向我获得珍珠文件的网站的链接，该文件采用 .obj 并将其转换为 .h

![截屏](../Images/ec1febed165219b87567c7d759593976.png)

Thease 应该是 3d J，因为您可以看到它们之间存在间隙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T19:20:02.447

不要使用将 3D 模型转换为 .h 文件的工具，这是一种将数据导入代码的可怕方式。特别是如果您需要编辑对象或加载其中的许多对象。而是编写或找到一个读取文件本身的模型加载器，然后您可以实际对数据进行测试以查看它是否有效。波前 obj 格式很容易解析。

如果缠绕顺序是向后的，您通常可以看穿物体。如果您尝试绘制由单独的部分制成的复杂对象，例如包含未连接到身体的盖子的茶壶，也会发生这种情况。

# eclipse - Eclipse 服务器插件：完全发布与增量发布

> ID：11819285
> 
> 赞同：16
> 
> 时间：2012-08-05T19:12:38.177
> 
> 标签：eclipse, deployment, publish

将企业应用程序部署到服务器（例如 Glassfish 或 JBoss）时，完全发布和增量发布有什么区别？

我看到部署的工件树中列出了几个模块，但是当我在 Web 存档上使用增量发布时，会发生一些事情，但它没有被部署。通过完整发布，整个 EAR、库、EJB 档案和 WAR 都被部署了。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-02-26T14:35:16.653

根据[JBoss 服务器管理器参考指南](http://docs.jboss.org/tools/4.0.0.Final/en/as/html/modules.html#d0e2248)：

> **完全发布**将强制完全重建整个模块

然而：

> **增量发布**旨在仅发布已进行更改的那些部分。

这听起来（至少对我来说）就像它们在发布最新版本方面*应该*总是同样出色。但是，正如您所发现的，情况似乎并非如此。

只是一个经验法则，但根据我的经验，*增量发布*适用于前端的更改（例如 Javascript、JSP 等），而当后端发生更改（例如实体、模型等）时通常需要*完全发布*.)

# java-me - 从主题获取定制的 LWUIT UIID 以在 netbeans 中设置样式

> ID：11819286
> 
> 赞同：0
> 
> 时间：2012-08-05T19:12:43.460
> 
> 标签：java-me, lwuit

我`Button`使用另一个 UIID (Buttonx) 而不是默认创建了一个，`Button`因为还有其他按钮将继承默认`Button`UIID。问题是从主题访问 UIID 样式（Buttonx）来设置`Button`我想要具有 Buttonx 特性的新创建的样式。我可以在 netbeans 中为新按钮设置样式，但它不会覆盖`Button`主题中设置的默认属性。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:30:51.650

因此，您可以通过代码将 UIID 属性设置为 a `Button`，但不能从代码中修改此样式。您需要做的是，在资源编辑器中创建样式并设置名称 Buttonx。现在在代码中，将 UIID Buttonx 设置为`Components`您想要的`button.setUIID("Buttonx");`。这`Components`将具有 Buttonx 样式属性。

# java - Java/Android：如何获取 MP3/wav 文件的频谱？

> ID：11819287
> 
> 赞同：1
> 
> 时间：2012-08-05T19:12:54.863
> 
> 标签：java, android, parsing, mp3, wav

我需要绘制 MP3（或 wav）文件的频谱。我知道 FFT 方法，但我不知道如何在 java/android 平台上访问 mp3/wav 文件的内容。我不知道如何解析 mp3/wav 格式...有没有框架可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T19:55:20.087

Android 中没有内置支持直接从音频文件中检索 pcm 数据。有一个不错的开源项目[ringdroid](http://code.google.com/p/ringdroid/)，这将是一个很好的起点，让您可以自己滚动代码来读取 mp3 或 wav 文件。您还可以考虑在代码中包含第三方库。

# c# - 将用户添加到角色用户 asp.net 角色提供程序的问题

> ID：11819291
> 
> 赞同：1
> 
> 时间：2012-08-05T19:13:27.117
> 
> 标签：c#, asp.net, asp.net-mvc, membership-provider, roleprovider

我首先使用实体​​框架代码设置了一个数据库。我已经设置了所有 asp.net 用户角色管理的东西。我有一个用户我已经使用了一段时间，它工作正常，我刚刚添加了另一个用户，我可以正常登录。我想设置角色（我将其命名为两个：管理员和用户）。我的角色设置得很好，但是当我尝试将我的用户添加到角色时，我收到以下错误（我正在使用 webadmin 工具）：

```
An error was encountered. Please return to the previous page and try again. 

The following message may help in diagnosing the problem: The user 'userName' was 
not found. at System.Web.Administration.WebAdminPage.CallWebAdminHelperMethod(Boolean 
isMembership, String methodName, Object[] parameters, Type[] paramTypes) at 
ASP.security_roles_managesinglerole_aspx.EnabledChanged(Object sender, EventArgs e) at 
System.Web.UI.WebControls.CheckBox.OnCheckedChanged(EventArgs e) at 
System.Web.UI.WebControls.CheckBox.RaisePostDataChangedEvent() at 
System.Web.UI.WebControls.CheckBox.System.Web.UI.IPostBackDataHandler.RaisePostDataChangedEvent()
at System.Web.UI.Page.RaiseChangedEvents() at 
System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean 
includeStagesAfterAsyncPoint) 
```

我阅读了几个关于此的问题，并尝试更新网络配置，但没有奏效。这是我当前的 web.config 设置：

```
<roleManager enabled="true" defaultProvider="DefaultRoleProvider">
  <providers>
    <remove name="DefaultRoleProvider"/>
    <add connectionStringName="NerdlyContext" applicationName="/"
      name="DefaultRoleProvider" type="System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
  </providers>
</roleManager> 
```

如果我使用 SSMS，我可以看到正确填充的用户和角色表。我有 UsersInRoles 表，但它是空的。

这是一个使用 .net 4.0 的 asp.net MVC4 应用程序。

**这是完整的、经过消毒的 web.config**

 **```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
<configSections>
<section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.3.1.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
</configSections>
<connectionStrings>
<remove name="LocalSqlServer"/>
<add name="LocalSqlServer" providerName="System.Data.SqlClient" connectionString="Data Source=tcp:sql2k804.discountasp.net;Initial Catalog=boobs;User ID=boobs;Password=boobs;" />
</connectionStrings>
<appSettings>
<add key="webpages:Version" value="2.0.0.0" />
<add key="webpages:Enabled" value="false" />
<add key="PreserveLoginUrl" value="true" />
<add key="ClientValidationEnabled" value="true" />
<add key="UnobtrusiveJavaScriptEnabled" value="true" />
</appSettings>
<system.web>
<compilation debug="true" targetFramework="4.0" />
<httpRuntime />
<machineKey />
<authentication mode="Forms">
  <forms loginUrl="~/Account/Login" timeout="2880" />
</authentication>
<pages controlRenderingCompatibilityVersion="4.0">
  <namespaces>
    <add namespace="System.Web.Helpers" />
    <add namespace="System.Web.Mvc" />
    <add namespace="System.Web.Mvc.Ajax" />
    <add namespace="System.Web.Mvc.Html" />
    <add namespace="System.Web.Optimization" />
    <add namespace="System.Web.Routing" />
    <add namespace="System.Web.WebPages" />
  </namespaces>
</pages>
<profile defaultProvider="DefaultProfileProvider">
  <providers>
    <add name="DefaultProfileProvider" type="System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="LocalSqlServer" applicationName="/" />
  </providers>
</profile>
<membership defaultProvider="DefaultMembershipProvider">
  <providers>
    <add connectionStringName="LocalSqlServer" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="NerdlyThings" name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
  </providers>
</membership>
<roleManager enabled="true" defaultProvider="DefaultRoleProvider">
  <providers>
    <add connectionStringName="LocalSqlServer" applicationName="/" name="DefaultRoleProvider" type="System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
  </providers>
</roleManager>
<sessionState mode="InProc" customProvider="DefaultSessionProvider">
  <providers>
    <add name="DefaultSessionProvider" type="System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="LocalSqlServer" />
  </providers>
</sessionState> 
```

此外，当我将其更改为使用旧的 SQL 提供程序时，我只是得到一个不同的错误，说它不喜欢我的架构版本？**

# c# - 将值传递到 ConstructorInfo.Invoke

> ID：11819294
> 
> 赞同：0
> 
> 时间：2012-08-05T19:13:44.167
> 
> 标签：c#

我正在使用反射来构造一个接受`int`作为构造函数参数的类对象。我`ConstructorInfo.Invoke`用来创建类。谁能告诉我如何将参数传递给构造函数？我正在尝试以下方法，但没有运气

```
Assembly ass = Assembly.GetExecutingAssembly();
            Type typa = ass.GetType("Abc");
            Type[] types = new Type[1];
            types[0] = typeof(int);
            ConstructorInfo csInfo =typa.GetConstructor(types);
            int[] obj = {10};

            csInfo.Invoke(obj); 
```

我收到以下错误：

> 论点 1：无法从 'int[]' 转换为 'object[]'

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T19:18:52.683

期望的[签名`Invoke`](http://msdn.microsoft.com/en-us/library/6ycw1y17.aspx)`object[]`。所以给`object[]`它。

```
object[] obj = {10};
csInfo.Invoke(obj); 
```

# linux - 使用 Bash 脚本启动新终端

> ID：11819295
> 
> 赞同：1
> 
> 时间：2012-08-05T19:13:57.797
> 
> 标签：linux

我正在尝试创建一个 BASH 脚本，该脚本将首先打开一个新终端，然后在该新终端中运行脚本的其余部分。如果可能的话，我希望这是一个完整的脚本。

我不想要 konsole -e 因为这需要我制作一个单独的脚本（我认为）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T10:42:53.633

`what have you tried - that was great`

做起来并不复杂：

```
#!/bin/bash
[ ! -f /tmp/$(basename $0) ] && cp $0 /tmp/ && konsole -e $0 && exit
rm /tmp/$(basename $0)
   # --- put your code here --- #

     echo "TESTING"

   # --- put your code here --- #

sleep 3s 
```

它的作用是，将脚本复制到 /tmp 目录并在源脚本上运行 konsole -e，删除临时文件，检查文件是否不存在，执行代码后，休眠 3 秒然后退出。

你甚至可以修改 /tmp/ 脚本并运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T01:21:58.357

我想你可以试试这个：

```
#!/bin/bash
echo "<your script/*eg. ./bashfile.ext*/>" | xterm 
```

# java - JSP中page和this对象的区别

> ID：11819296
> 
> 赞同：1
> 
> 时间：2012-08-05T19:14:01.610
> 
> 标签：java, jakarta-ee

我在jsp页面中声明了一个变量

```
<%! int i=20; %> 
```

并尝试通过打印

```
<%=this.i %> 
```

这似乎工作正常。但是由于jsp页面的隐式页面对象指向“this”为

```
final java.lang.Object page = this; 
```

为什么是

```
<%=page.i %> 
```

不可能？（它在编译时给出一个错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T19:34:35.557

页面的类型是`Object`，所以它不知道你的 JSP 页面生成的代码中的属性。

# node.js - 在 Windows 上使用主管重新运行 mocha...

> ID：11819297
> 
> 赞同：1
> 
> 时间：2012-08-05T19:14:05.833
> 
> 标签：node.js, mocha.js, node-supervisor

我正在尝试使用主管重新运行 mocha 测试。我试过了：

```
supervisor node_modules\.bin\mocha 
```

它进入循环并出现错误：

```
basedir=`dirname "$0"` 
```

建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T20:24:44.403

我想你想要做的就是`mocha -w`：

```
-w, --watch                     watch files for changes 
```

它与点矩阵报告器（默认）很好地配合使用，并`-G`在您的测试失败时向您发出咆哮通知。

编辑：

我发现了您提到的与 Windows 相关的问题：[尝试让 Mocha 观看我的项目时出现“没有这样的模块”错误](https://stackoverflow.com/questions/10258248/no-such-module-error-when-trying-to-get-mocha-to-watch-my-project)

我也无能为力。

但回到`supervisor`问题：当我安装 mocha 时，“bin”脚本在 node_modules/mocha/bin 中，我可以使用以下命令重复运行测试

```
supervisor node_modules/mocha/bin/mocha 
```

主管确实会`DEBUG`在每次测试运行之间打印一些烦人的行，但可以使用`--quiet`. 因为 mocha 在每次运行后都会退出，但是你有一个繁忙的持续测试循环。

# twitter-bootstrap - 如何使用 Twitter Bootstraps 的 javascript 插件标记或设计多级分类广告搜索表单？

> ID：11819298
> 
> 赞同：0
> 
> 时间：2012-08-05T19:14:05.847
> 
> 标签：twitter-bootstrap

您好专家和经验丰富的 Web 开发人员，

我正在处理一个分类广告项目，我在创建搜索表单时遇到了一些困难。我是网页设计新手，几乎不懂 javascript。

我正在使用 twitter bootstrap 进行主题布局和设计，并且我选择使用 modal.js 来放置我的搜索表单。

我现在的问题是，我找不到显示我的多级列表类别的方法。它有6个或更多的子子类别。

基本上，我到目前为止所做的就是这样。我在模态窗口内创建了一个带有下拉按钮的选项卡式导航。选项卡式导航包含父类别和子类别。即购买和销售类别有“待售物品”和“想购买”部分。

然后......待售物品，拿着电脑，相机和其他更多。计算机有笔记本电脑、上网本和 PC 组件的子类别。从这些子类别中，再次细分为子类别，例如：类型、PC 组件种类（即处理器、VGA 卡、机箱）。再从这些子类别中，它有另一个类别，即处理器有一个子类别 INTEL 和 AMD。

任何想法？关于如何标记我的搜索表单的提示或建议？[这](http://i.imgur.com/YsNiV.png)是我到目前为止所做的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T16:42:37.773

已经好几天了，我没有得到任何答案，所以我探索了 Twiiter Bootstrap 的可选项卡的功能。

我通过在模态窗口内嵌套 2 个 tabbable-navs 并结合下拉选择依赖字段来解决我的多级类别搜索表单。

这只是一个设计，功能还没有起作用，与选择菜单相关的字段一样。而且我不知道这种设计是否实用。因为我还不熟悉 JavaScript 和 php/mysql。

好的，这就是我所做的。父类别是主选项卡导航，然后子类别位于第二个/内部选项卡导航中。其他子子类别放在选择菜单下拉列表中。

所以这是最终产品。 ![在此处输入图像描述](../Images/fce3c14ca0ef7d872821e0544d4de70d.png)

# java - JScrollpane：仅按 unitIncrement 滚动

> ID：11819300
> 
> 赞同：0
> 
> 时间：2012-08-05T19:14:12.203
> 
> 标签：java, swing, jscrollpane

`Scrollable`我用实现的接口和覆盖的方法创建了 JPanel `getScrollableBlockIncrement`。我将 JPanel 放入 JScrollPane 中。JPanel 包含几个具有相同高度的组件。这个高度就是unitIncrement。现在，当我单击垂直滚动条上的箭头时，视口会按 unitIncrement 移动。但是，当我用鼠标移动旋钮时，视口会移动像素。如何使视口仅按unitIncrement移动？

更新：
旋钮是滚动条上的中间按钮，在轨道上，用于拖动它。如图所示，[滚动窗格的工作原理](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html#operation)

我希望视口仅以任何方式按 unitIncrement 移动。此外，当我在旋钮上按下鼠标左键并拖动它时。示例行为：Eclipse 中的智能感知。

更新 2：
我尝试 `myJScrollPane.getVerticalScrollBar().setUnitIncrement(16);` 并没有得到想要的行为。
调试代码时，发现拖拽旋钮时参数unitIncrement被丢弃。

更新 3：
无法使用 JScrollPane 找到合适的解决方案并编写了自定义滚动窗格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T22:49:15.050

您的问题的答案可以通过一点搜索来找到： [如何在使用鼠标滚轮时加快 JScrollPane 中的滚动速度？](https://stackoverflow.com/questions/5583495/how-do-i-speed-up-the-scroll-speed-in-a-jscrollpane-when-using-the-mouse-wheel)

`JScrollBar`重申一下，您基本上想修改`JScollPane`.

```
myJScrollPane.getVerticalScrollBar().setUnitIncrement(16); 
```

否则，您将不得不覆盖 JScrollPane 上的 Scolling 事件，以根据正在滚动的窗格传递您想要滚动的量 - 这有点混乱......所以如果第一种方法适合你，那就是我会去的。

底线：问题出在`JScollPane`- 而不是你的`Scrollable`班级。

# javascript - 如何在角度控制器或范围内使用 angular.toJson

> ID：11819301
> 
> 赞同：24
> 
> 时间：2012-08-05T19:14:12.860
> 
> 标签：javascript, angularjs

请参阅我的以下 jsFiddle 示例，其中我尝试使用 angular.toJson 将 Angular.js 对象推送到 JSon 表示中。结果我得到的只是“$SCOPE”。

> [http://jsfiddle.net/K2GsS/12/](http://jsfiddle.net/K2GsS/12/)

我想要做的是获取当前的属性和值。在这个例子中，我希望看到的是

```
{ firstName: 'Frank', lastName: 'Williams' } 
```

有没有更好的方法以 JSON 形式获取该数据（即不使用范围）？显然，我可以手动滚动一个获取值并推出 JSon 表示的方法，但随着控制器的变化，该函数也会发生变化，所以我宁愿只调用一个 toJson 类型的方法。有人知道这样做的正确方法吗？提前致谢。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-08-05T19:34:05.610

我可以看到你来自 jQuery 世界，但是有了 angular.js，事情变得越来越简单，请检查这个 jsFiddle：http: [//jsfiddle.net/pkozlowski_opensource/ASspB/1/](http://jsfiddle.net/pkozlowski_opensource/ASspB/1/)

使用 angular.js，您可以简单得多地附加事件：

```
 <input type="button" ng-click="showJson()" value="Object To JSON" /> 
```

然后在你的控制器中：

```
 $scope.showJson = function() {
    $scope.json = angular.toJson($scope.user);
} 
```

事实上，使用 angular.js 过滤器可以更轻松地完成此操作，请查看此 jsFiddle：http: [//jsfiddle.net/pkozlowski_opensource/ASspB/2/](http://jsfiddle.net/pkozlowski_opensource/ASspB/2/)，其中包含：

```
{{user | json}} 
```

使用 angular.js，您需要“忘记”一些 jQuery 习惯，但这很好，因为大多数时候事情变得容易得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-06T03:55:47.317

您可以使用内置 json 过滤器的角度作为

```
{{ user | json }} 
```

其中 user 是要字符串化的 Json 对象，或者使用 angular.toJson 将其转换为 JSON 格式的字符串。请参考我的小提琴[https://jsfiddle.net/deeps_the_coder/vtz6ej8f/2/](https://jsfiddle.net/deeps_the_coder/vtz6ej8f/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-06T04:58:26.377

既然您问如何在没有 . 的情况下获得它`$scope`，这里是一个`angular 1.5.9`带有**组件**的示例（它们是在 angular **1.5.8**中引入的）。

这也将使您更容易迁移到**angular 2**。当然，您会将所有这些来源分成单独的文件。

你应该**`TypeScript`**试一试。这将为您`Type Safety`提供大量的糖语法和一种更简单的面向定向编程的方法。您还可以看到定义方法的位置以及它具有哪些方法和属性。

```
var module = angular.module("settingsApp", []);

module.service("userSettingsService", UserSettingsService);

module.component("userDetails", {
        template: `
        	<input ng-model="$ctrl.userDetail.firstName" />
            <input ng-model="$ctrl.userDetail.lastName" />
            <input type="button" ng-click="$ctrl.showJson()" value="to JSON" />
            <hr/>  
            {{$ctrl.json}}`,
      	controller: UserDetailsController
    });

UserSettingsService.$inject = ["$q"];
function UserSettingsService($q) {
	var _this = this;
	this.$q = $q;
	this.userDetails = [{
        firstName: "Frank",
        lastName: "Williams"
    }];
	this.getSettings = function (id) {
    	return _this.$q.resolve(this.userDetails[id]);
    }
}

UserDetailsController.$inject = ["userSettingsService"];
function UserDetailsController(userSettingsService) {
	var _this = this;
	var userId = 0;

    this.userSettingsService = userSettingsService;
    userSettingsService.getSettings(userId).then(function (data) {
    	_this.userDetail = data;
    });
}

UserDetailsController.prototype.showJson = function() {
    this.json = angular.toJson(this.userDetail);
}

angular.bootstrap(document, ['settingsApp']);
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.9/angular.min.js"></script>

<user-details></user-details>
```

# c++ - c++ winsock客户端无法使用文本框连接主机IP

> ID：11819303
> 
> 赞同：0
> 
> 时间：2012-08-05T19:14:36.410
> 
> 标签：c++, textbox, ip-address, winsock, connect

当我使用文本框中的主机 IP 时，我无法将它连接到我的服务器。查看我的代码：

```
 char *bufhost;
                int bufhostlen;
                bufhostlen = GetWindowTextLength(hwndTextBox_ip) + 1;
                GetWindowText(hwndTextBox_ip, bufhost, bufhostlen);
                sockaddr_in sin;
                sin.sin_family=AF_INET;
                sin.sin_port=htons(5060);
                sin.sin_addr.s_addr=inet_addr(bufhost);
                connect(sock,(LPSOCKADDR)(&sin),sizeof(sin)); 
```

如果我使用

```
sin.sin_addr.s_addr=inet_addr("127.0.0.1"); 
```

它连接没有问题。

我真的不知道如何完成这项工作（搜索了几个小时......）感谢您的帮助:-)

解决方案 ：

正如 PermanentGuest 告诉我的，我必须为我的缓冲区分配内存：

```
 char *bufhost;
                int bufhostlen;
                bufhostlen = GetWindowTextLength(hwndTextBox_ip) + 1;
                bufhost = (char*) malloc(bufhostlen);
                GetWindowText(hwndTextBox_ip, bufhost, bufhostlen);
                sockaddr_in sin;
                sin.sin_family=AF_INET;
                sin.sin_port=htons(5060);
                sin.sin_addr.s_addr=inet_addr(bufhost);
                connect(sock,(LPSOCKADDR)(&sin),sizeof(sin)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T19:17:45.960

您需要为 bufhost 分配内存。不幸的是，[GetWindowText](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633520%28v=vs.85%29.aspx)的文档没有明确提到这一点。但是对于所有 win32 API，这是常见的行为

# java - 如何在 JSF (PrimeFaces 3.0) 中终止运行 Java 方法或 Java 类

> ID：11819305
> 
> 赞同：0
> 
> 时间：2012-08-05T19:15:01.810
> 
> 标签：java, jsf, glassfish, primefaces

我有一个运行大约一两个小时的 Java 方法。我为此使用 jsf 和 primeface 创建了一个 web ui。我想使用 commandButtons 终止并重新启动该方法。我怎么做？

我使用 GlassFish 服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T17:30:51.737

*   查看[PrimeFaces ShowCase 的命令按钮](http://www.primefaces.org/showcase/ui/commandButton.jsf)。收集想法。

*   建立（使用）应用程序级上下文，其中可以保留对工作/线程的引用。这应该基于会话吗？会话的生命周期是多久？

### 选项：工作 - 留在 Java EE 路径上

*   查看相关[博客](http://danielveselka.blogspot.com/2012/03/schedule-jobs-with-workmanager.html)和[javadoc](http://docs.oracle.com/javaee/1.4/api/javax/resource/spi/work/package-summary.html)

### 选项：线程 - 德克萨斯解决方案：完成任务

*   阅读[线程 javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html)。仔细注意[中断](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#interrupt%28%29)和[isInterrupted](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#isInterrupted%28%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T19:40:32.100

一般来说，如果您有一个长时间运行的方法/作业，最好能够停止（或暂停等）该作业。这通常通过让作业在其自己的线程中运行并让它经常检查可以由任何其他线程设置的“停止”标志来完成。您的命令按钮可以在用户单击它时设置标志。

这是让线程相互通信的常用方法。

祝你好运，汤姆

# macos - 在我的应用程序中使用 Mac 相机的视图

> ID：11819306
> 
> 赞同：0
> 
> 时间：2012-08-05T19:15:12.790
> 
> 标签：macos, camera

我无法找到有关 Mac 相机的文档。我正在尝试激活相机并将其显示在我的应用程序中。我相信我必须使用 iSight，但又找不到任何有用的东西。任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T19:48:23.943

[ImageSnap](http://iharder.net/imagesnap)是一个通过 iSight 拍照的小工具。源代码可在网站上获得。

# python - 在 Tomcat 7 上安装和运行 CGI 代理 Python

> ID：11819310
> 
> 赞同：2
> 
> 时间：2012-08-05T19:15:31.840
> 
> 标签：python, tomcat, web-applications, cgi

我想为openlayers设置一个在tomcat上运行的代理，所以我按照以下步骤操作：

1.  从 OpenLayers 网站下载了 proxy.cgi 文件：

[http://trac.osgeo.org/openlayers/browser/trunk/openlayers/examples/proxy.cgi](http://trac.osgeo.org/openlayers/browser/trunk/openlayers/examples/proxy.cgi)

这是代码：

```
#!c:/Python27/python.exe

"""This is a blind proxy that we use to get around browser
restrictions that prevent the Javascript from loading pages not on the
same server as the Javascript.  This has several problems: it's less
efficient, it might break some sites, and it's a security risk because
people can use this proxy to browse the web and possibly do bad stuff
with it.  It only loads pages via http and https, but it can load any
content type. It supports GET and POST requests."""

import urllib2
import cgi
import sys, os

# Designed to prevent Open Proxy type stuff.

allowedHosts = ['www.openlayers.org', 'openlayers.org', 
                'labs.metacarta.com', 'world.freemap.in', 
                'prototype.openmnnd.org', 'geo.openplans.org',
                'sigma.openplans.org', 'demo.opengeo.org',
                'www.openstreetmap.org', 'sample.azavea.com',
                'v2.suite.opengeo.org', 'v-swe.uni-muenster.de:8080', 
                'vmap0.tiles.osgeo.org', 'www.openrouteservice.org','localhost:6901']

method = os.environ["REQUEST_METHOD"]

if method == "POST":
    qs = os.environ["QUERY_STRING"]
    d = cgi.parse_qs(qs)
    if d.has_key("url"):
        url = d["url"][0]
    else:
        url = "http://www.openlayers.org"
else:
    fs = cgi.FieldStorage()
    url = fs.getvalue('url', "http://www.openlayers.org")

try:
    host = url.split("/")[2]
    if allowedHosts and not host in allowedHosts:
        print "Status: 502 Bad Gateway"
        print "Content-Type: text/plain"
        print
        print "This proxy does not allow you to access that location (%s)." % (host,)
        print
        print os.environ

    elif url.startswith("http://") or url.startswith("https://"):

        if method == "POST":
            length = int(os.environ["CONTENT_LENGTH"])
            headers = {"Content-Type": os.environ["CONTENT_TYPE"]}
            body = sys.stdin.read(length)
            r = urllib2.Request(url, body, headers)
            y = urllib2.urlopen(r)
        else:
            y = urllib2.urlopen(url)

        # print content type header
        i = y.info()
        if i.has_key("Content-Type"):
            print "Content-Type: %s" % (i["Content-Type"])
        else:
            print "Content-Type: text/plain"
        print

        print y.read()

        y.close()
    else:
        print "Content-Type: text/plain"
        print
        print "Illegal request."

except Exception, E:
    print "Status: 500 Unexpected Error"
    print "Content-Type: text/plain"
    print 
    print "Some unexpected error occurred. Error text was:", E 
```

1.  我的 tomcat 位于端口 6901，因此我修改了 proxy.cgi 文件以将我的域包含在 allowedHosts 列表中：

    allowedHosts = ['localhost:6901']

2.  我将 proxy.cgi 文件复制到以下文件夹：

    $TOMCAT_PATH$/webapps/myApp/WEB-INF/cgi/

3.  修改了 web 应用程序的文件 web.xml，在文件下方添加了以下部分：

    $TOMCAT_PATH$/webapps/myApp/WEB-INF/web.xml

```
<servlet> 
    <servlet-name>cgi</servlet-name> 
    <servlet-class>org.apache.catalina.servlets.CGIServlet</servlet-class> 
    <init-param> 
        <param-name>debug</param-name> 
        <param-value>0</param-value> 
    </init-param> 
    <init-param> 
        <param-name>cgiPathPrefix</param-name> 
        <param-value>WEB-INF/cgi</param-value> 
    </init-param> 
    <init-param> 
        <param-name>executable</param-name> 
        <param-value>c:\python25\python.exe</param-value> 
    </init-param> 
    <init-param> 
        <param-name>passShellEnvironment</param-name> 
        <param-value>true</param-value> 
    </init-param> 
    <load-on-startup>5</load-on-startup> 
</servlet> 

<servlet-mapping> 
<servlet-name>cgi</servlet-name> 
<url-pattern>/cgi-bin/*</url-pattern> 
</servlet-mapping> 
```

注释：“executable”参数的“param-value”必须包含 Pyhton 安装的路径。（确实如此！）

1.  通过添加以下元素修改了我的 Web 应用程序的文件 context.xml，文件位于`$TOMCAT_PATH$/webapps/myApp/META-INF/context.xml`

2.  重新启动Tomcat

3.  要将代理与 OpenLayers 一起使用，请将这一行包含在代码中：

    OpenLayers.ProxyHost = "/yourWebApp/cgi-bin/proxy.cgi?url=";

但是代理不起作用！当我尝试像这样使用它时：

```
/myApp/cgi-bin/proxy.cgi?url=labs.metacarta.com 
```

我收到此错误：

```
Some unexpected error occurred. Error text was: list index out of range 
```

我认为它与 os.environ["REQUEST_METHOD"] 有关，但我不知道它是如何相关的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T20:46:07.340

问题似乎出在您的`allowedHosts`线路上。它应该包括您要通过代理连接的主机（例如`allowedHosts = ['labs.metacarta.com']`）

# css - 图像旁边文本的垂直对齐方式

> ID：11819311
> 
> 赞同：0
> 
> 时间：2012-08-05T19:15:32.357
> 
> 标签：css, alignment, vertical-alignment

在我的网站[http://goo.gl/16XdA](http://goo.gl/16XdA)（“关于我们”部分）上，我希望蓝色标题与其左侧的挪威国旗垂直对齐。我尝试使用 padding-bottom 和 margin-bottom （将蓝色标题向上移动几个 px），但这根本不起作用。任何想法？Tks

CSS

```
#activity-container {
    width: 600px;
    background-color: #FFFFFF;
    font: 12px 'Open Sans', "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
    color:#000;
    font-weight: 400;
    padding:25px;
    margin-left: auto;
    margin-right: auto;
    border: 1px dotted #666;
    background: #fff url(../images/norway-map.png) no-repeat right top;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=93)";
    filter: alpha(opacity=93);
    opacity: 0.93; /* For IE8 and earlier */
} 
```

HTML

```
<div id="activity-container">
    <p><img src="images/norway-flag-small.jpg" alt="Picture" /><span class="activity-title">Swoåsa , naturlig mineralvann, ren natur</span></p>
    <br />
    <p>XXZ AS was founded</p>
  </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T19:20:26.723

在标志图像上使用`vertical-align: middle`，这会将文本垂直放置在图像的中心。目前，该属性被设置为`vertical-align: baseline`来自您的`reset.css`文件。

# python - 使用 Python 进行 SQLite 查询：不同的错误

> ID：11819314
> 
> 赞同：0
> 
> 时间：2012-08-05T19:16:41.793
> 
> 标签：python, sqlite, binding

我对 Python 很陌生，我正在尝试查询 SQLite 数据库。这是我遇到问题的代码的一部分：

```
def estadistiques(estacio='all',mes='all', graph=0):

if (len(mes)<2):
    mes_sql = "0%s" %mes
else:
    mes_sql = "%s" %mes
mesos = {"1":"Gener","2":"Febrer","3":"Març","4":"Abril","5":"Maig","6":"Juny","7":"Juliol","8":"Agost","9":"Setembre","10":"Octubre","11":"Novembre","12":"Decembre"}  
if (estacio!='all'):
    if (mes!='all'):
        nom_estacio = cursor.execute("SELECT DISTINCT nom FROM estacions WHERE codi==?",[estacio]).fetchall()   

        mitjana_recarrega = cursor.execute("SELECT avg(recarrega) FROM dades WHERE strftime('%m', data)==? AND maquina IN (SELECT maquina FROM estacions WHERE codi==?)",(mes_sql, estacio)).fetchall()
        mitjana_recuperat = cursor.execute("SELECT avg(recuperat) FROM dades WHERE strftime('%m', data)==? AND maquina IN (SELECT maquina FROM estacions WHERE codi==?)",(mes_sql, estacio)).fetchall()
        mitjana_recaptat = cursor.execute("SELECT avg(recaptat) FROM dades WHERE strftime('%m', data)==? AND maquina IN (SELECT maquina FROM estacions WHERE codi==?)",(mes_sql, estacio)).fetchall()

        print "-"*50            
        print "| Dades de l'estació %s durant el mes de %s" % (nom_estacio,mesos[mes])
        print '-'*50
        print '\n\n'
        print 'Mitjana de recàrregues:\t\t %.2f' % mitjana_recarrega[0]
        print 'Mitjana de recuperacions:\t %.2f' % mitjana_recuperat[0]
        print 'Mitjana de recaptacions:\t %.2f' % mitjana_recaptat[0] 
```

我使用 `raw_input`. 第一个查询：

```
nom_estacio = cursor.execute("SELECT DISTINCT nom FROM estacions WHERE codi==?",[estacio]).fetchall() 
```

如果我有的话效果很好，`[estacio]`但如果我写它时不带括号`estacio`Python 会抱怨。我理解这是因为 SQLite 将该变量作为一个元组。

但是在第二个查询中，我应该`(mes_sql,estacio)`不带括号来写它才能工作。如果我把它放在括号之间，我会得到

> sqlite3.InterfaceError：错误绑定参数 1 - 可能是不受支持的类型。

为什么会这样？我通过尝试错误解决了这个问题，但我想知道为什么我应该这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T19:22:02.287

> 我理解这是因为 SQLite 将该变量作为一个元组。

实际上，作为一个序列。（还有 DB-API，而不是 SQLite。）列表恰好是一个序列。在第二种情况下，它*已经*在一个序列中，所以添加括号会出错。

# c - 更改路径类型时统计返回错误

> ID：11819318
> 
> 赞同：0
> 
> 时间：2012-08-05T19:17:04.993
> 
> 标签：c, path

我正在尝试检查文件是否是文件夹，但是当我更改此行时：

```
snprintf(buf, sizeof buf, "%s\\%s", path, e->d_name);
                             ^      ^
                             +------+ note the differences 
```

对此：

```
snprintf(buf, sizeof buf, "%s\b%s", d->dd_name, e->d_name);
                             ^      ^
                             +------+ note the differences 
```

它不会打印“是文件夹”或“是文件”，因为`stat(...)`失败。尽管两条线都生成相同的输出路径。

这是怎么回事？

* * *

编码：

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <dirent.h>

int main(int argc, char** argv) {
    DIR *d;
    struct dirent *e;
    struct stat fs;
    char*path = "C:\\Users\\Me\\Documents\\NetBeansProjects\\MyApp";
    d = opendir(path);
    if (d != NULL) {
        while (e = readdir(d)) {
            char buf[256];
            snprintf(buf, sizeof buf, "%s\\%s", path, e->d_name); // <- here
            printf("%s\n",buf);
            if (stat(buf, &fs) < 0) continue;
            if (S_ISDIR(fs.st_mode)) {
                printf("is folder");
            } else {
                printf("is file");
            }
        }
        closedir(d);
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T20:14:30.227

[Mat](https://stackoverflow.com/users/635608/mat)的建议是合理的；结构中没有记录可公开访问的成员，因此`DIR`您不应该尝试使用`d->dd_name`.

但是，如果要从字符串末尾删除星号，则不能使用退格键来执行此操作。退格键仅在终端键入时擦除字符。否则，它只是字符串中的控制字符。你可以使用：

```
snprintf(buf, sizeof(buf), "%.*s%s", (int)strlen(d->dd_name)-1, d->dd_name, e->d_name); 
```

这将省略字符串中的最后一个字符`d->dd_name`（我假设留下一个斜杠或反斜杠）。请注意，强制转换是必要的`sizeof(size_t) > sizeof(int)`（如在 64 位 Unix 系统上）；消耗的价值`*`是一个`int`。

# linux - 在 Linux 的 pro-lite LED 标志上设置时钟

> ID：11819321
> 
> 赞同：0
> 
> 时间：2012-08-05T19:17:12.590
> 
> 标签：linux

我有这些说明来设置我的 pro-lite LED 标志的时钟，但我无法让它响应。我像这样向它发送文本

```
echo "<ID06><PC> Test message <E><EOT>" > /dev/prolite 
```

以下是设置时钟的说明

```
5) SETTING INTERNAL TIME CLOCK
This is a special command to sync. or set the relative/real time clock of the display unit(s)
and it is the only GLOBAL command in this set of protocol. The format as shown below:

<TCCYYMMDDWhhmmssPH><E><EOT>

<, T, > ASCII "<", "T" & ">"
CC Century (19 = 19th century)
YY Year (00 - 99)
MM Month (01 - 12)
DD Day (01 - 31)
W Day of week (0 – Sunday; 6 - Saturday)
hh Hour (24 hour entry ONLY if displaying in 24 hour mode)
mm Minute (00 - 59)
ss Second (00 - 59)
P “0” = AM , “1” = PM (ignored in 24 hour mode)
H "0" =12 hr; "1" =24 hr display mode 
```

这是我尝试过的，我只使用了字母 T，因为我真的不知道 ASCII 是什么意思。我很确定这就是我搞砸的地方。

```
echo "<T20120805003080010><E><EOT>" > /dev/prolite 
```

这是将时钟设置为下午 3:08，但标志没有响应

```
 <E> signals end of text and <EOT> signals end of transmission. 
```

有人可以告诉我我做错了什么，或者给我一个如何设置时钟的例子吗？谢谢

# ruby-on-rails - 如何检测我的应用程序是否在 Heroku 上运行？

> ID：11819322
> 
> 赞同：5
> 
> 时间：2012-08-05T19:17:24.053
> 
> 标签：ruby-on-rails, heroku

有没有办法检测 Rails 应用程序是否在 Heroku 上运行？

我想做一个像这样的方法：

```
def on_heroku?
...
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-05T19:20:04.613

您可以设置自己的[配置变量](https://devcenter.heroku.com/articles/config-vars)以用于通过`ENV['var']`.

`$ heroku config:add I_AM_HEROKU=yes`

```
def on_heroku?
  ENV['I_AM_HEROKU']
end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-12T12:03:58.437

```
def heroku?
  ENV.any? {|x,_| x=~ /^HEROKU/ }
end 
```

# c++ - 为向量成员和更新元素赋予默认值

> ID：11819325
> 
> 赞同：0
> 
> 时间：2012-08-05T19:17:27.253
> 
> 标签：c++, arrays, vector

我不确定我是否需要一个向量，但我认为我不能使用数组，因为我没有固定的大小。

我有一个 Singleton 类`Song`，它有一个成员`vector<float> samples;`和一个方法`getSamples(int numberOfSamples)`当调用这个方法时，我想让向量具有正确的大小（基于`numberOfSamples`），而不是可能多次更新它的一些值。

```
vector<float> &Song::getSamples(int numberOfSamples){
    for(int i = 0; i < numberOfFrames; i++)
        this->samples.push_back(0);
} 
```

例如，如何将第三个值更改为 3 而不是 0？使用数组这样做会容易得多，`samples[2] = 3;`但问题是在调用 getSamples 方法之前我不知道向量/数组的长度。而且我认为不断迭代不是一个好主意，因为`numberOfSamples`它可能非常大，而且我可能需要将每个值更新多达五次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T19:25:52.307

您可以简单地[调整](http://en.cppreference.com/w/cpp/container/vector/resize)`T()`向量的大小，这将初始化所有新值（默认值为`0.0`for ）：`float`

```
vector<float> &Song::getSamples(int numberOfSamples){
    this->samples.resize(this->samples.size() + numberOfFrames);
    // did you mean numberOfSamples instead of numberOfFrames, there?
} 
```

要为给定索引设置值，您可以像使用普通 C 数组一样使用下标运算符：

```
this->samples[2] = 3; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T19:23:48.840

查找表怎么样？像这样的东西：

```
static const float data[5] = { 0.0, 1.5, -8.25, 10.0, Inf };

samples.reserve(samples.size() + numberOfFrames);   // don't forget this!!

for (unsigned int i = 0; i != numberOfFrames; ++i)
{
    samples.push_back(data[i % 5]);
} 
```

否则，如果大多数元素相同，只需更改不同的元素：

```
samples.resize(samples.size() + numberOfFrames, 25.5f);  // set default to 25.5
for (unsigned int i; i < numberOfSamples; i += 3) { samples[i] = 3.0f; } 
```

# image - BlackBerry Image Field 水平填充屏幕

> ID：11819331
> 
> 赞同：2
> 
> 时间：2012-08-05T19:17:49.293
> 
> 标签：image, blackberry, bitmap

我是 BlackBerry Development (5.0) 的新手。我在 Android 应用程序开发方面有一点经验。我想要做的是在整个屏幕上（水平）填充图像，类似于你可以在 Android`fill_parent`中使用布局文件执行的操作。我在一些论坛上寻找解决方案，但没有得到满意的解决方案。

这就是我得到我的形象的方式

```
Bitmap headerLogo = Bitmap.getBitmapResource("uperlogo.png");
BitmapField headerLogoField = 
    new BitmapField(headerLogo, BitmapField.USE_ALL_WIDTH | Field.FIELD_HCENTER);
setTitle(headerLogoField); 
```

这段代码在顶部（根据需要）和中心给了我我的标题。我只是想让它水平伸展以覆盖所有空间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T20:32:57.580

可以`Bitmap`在创建 之前水平拉伸`BitmapField`，这将解决问题。但是拉伸`Bitmap`和使用它作为标题会给支持屏幕旋转的设备（例如 Storm、Torch 系列）带来问题。在这种情况下，您必须维护两个拉伸`Bitmap`实例，一个用于纵向模式，另一个用于横向模式。而且您还需要编写一些额外的代码来`Bitmap`根据方向设置适当的。如果您不想这样做，请检查以下两种方法：

***使用 CustomBitmapField 实例***

可以使用可以水平拉伸的 CustomBitmapField `Bitmap`。检查实施。

```
class MyScreen extends MainScreen {

    public MyScreen() {
        Bitmap bm = Bitmap.getBitmapResource("uperlogo.png");
        setTitle(new CustomBitmapField(bm));
    }

    class CustomBitmapField extends Field {
        private Bitmap bmOriginal;
        private Bitmap bm;

        private int bmHeight;

        public CustomBitmapField(Bitmap bm) {
            this.bmOriginal = bm;
            this.bmHeight = bm.getHeight();
        }

        protected void layout(int width, int height) {
            bm = new Bitmap(width, bmHeight);
            bmOriginal.scaleInto(bm, Bitmap.FILTER_BILINEAR);
            setExtent(width, bmHeight);
        }

        protected void paint(Graphics graphics) {
            graphics.drawBitmap(0, 0, bm.getWidth(), bmHeight, bm, 0, 0);
        }
    }
} 
```

***使用背景实例***

`Background`对象可以轻松解决问题。如果`Background`可以将实例设置为`HorizontalFieldManager`将使用其所有可用宽度的 a，那么在屏幕旋转的情况下，它将处理其大小和背景绘制。并且`Background`实例本身会处理提供的`Bitmap`. 检查以下代码。

```
class MyScreen extends MainScreen {

    public MyScreen() {
        setTitle(getMyTitle());         
    }

    private Field getMyTitle() {
        // Logo.
        Bitmap bm = Bitmap.getBitmapResource("uperlogo.png");

        // Create a manager that contains only a dummy field that doesn't 
        // paint anything and has same height as the logo. Background of the 
        // manager will serve as the title.

        HorizontalFieldManager hfm = new HorizontalFieldManager(USE_ALL_WIDTH);
        Background bg = BackgroundFactory.createBitmapBackground(bm, Background.POSITION_X_LEFT, Background.POSITION_Y_TOP, Background.REPEAT_SCALE_TO_FIT);
        hfm.setBackground(bg);
        hfm.add(new DummyField(bm.getHeight()));

        return hfm;
    }

    // Implementation of a dummy field
    class DummyField extends Field {
        private int logoHeight;

        public DummyField(int height) {
            logoHeight = height;
        }

        protected void layout(int width, int height) {
            setExtent(1, logoHeight);
        }

        protected void paint(Graphics graphics) {
        }
    }
} 
```

# ios - 更改窗口背景 uicolor

> ID：11819335
> 
> 赞同：1
> 
> 时间：2012-08-05T19:18:39.080
> 
> 标签：ios

有谁知道为什么当我对它应用说蓝色时，uiwindow 的背景颜色不会改变？如何检查是否正确应用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T19:22:50.093

您是否显示任何视图控制器？如果您在窗口上显示视图控制器，您将看不到窗口的颜色

要测试窗口的颜色，请添加

```
self.window.rootViewController = nil; 
```

在 appDidFinishLaunching 中的 makeKeyAndVisible 之前

# macos - 防止networksetup询问密码

> ID：11819336
> 
> 赞同：25
> 
> 时间：2012-08-05T19:18:44.490
> 
> 标签：macos, cocoa, proxy, passwords, osx-mountain-lion

我有一个小应用程序，用于更改 Mac 上的代理。它使用`networksetup`命令来设置代理设置，并且在 Lion 上运行良好。不过，在 Mountain Lion 上，每次我更改代理设置时，它都会询问管理员密码。

> networksetup 正在尝试修改系统网络配置。输入您的密码以允许此操作。

有什么办法可以防止这种情况发生吗？或者有没有更好的方法来更改 Cocoa 中的代理设置？在 Lion 上，当我输入密码时系统会记住，所以我必须在重新启动后进行身份验证。

我还注意到，在 Chrome 中，Proxy Switchy 插件也有同样的行为。它说

> scutil 正在尝试修改系统网络配置。输入您的密码以允许此操作。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-11-21T01:27:44.793

使用 sudo 通过为您希望能够执行此命令的用户添加无密码规则来完成此操作。

*   运行 visudo 启动编辑器以修改 /etc/sudoers 文件

    ```
    visudo -f /etc/sudoers 
    ```

*   在文件末尾添加一行

    ```
    $USERNAME ALL=(root) NOPASSWD: /usr/sbin/networksetup 
    ```

在 $USERNAME 所在的位置，将您想要提供 nopassword 访问权限的实际用户名放入 networksetup 命令。

*   保存文件
*   通过运行以您的用户身份对其进行测试

    ```
    /usr/bin/sudo /usr/sbin/networksetup -version 
    ```

如果设置正确，它将回显版本消息，如果您犯了错误，则会提示输入密码。

这是一条更安全的路线，因为它将谁可以以 root 身份运行命令限制为特定用户，将 networksetup 二进制文件本身设置为 suid root 意味着任何登录到系统的人都可以修改您的网络配置。OSX 是一个多用户操作系统，它应该被视为一个多用户操作系统。

如果您真的很偏执，请确保在调用 /usr/bin/sudo 时也使用完整路径。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-29T13:03:22.600

您可以设置权限`suid`，`/usr/sbin/networksetup`然后networksetup将以root权限运行，因此您不再需要输入密码。

```
sudo chmod u+s /usr/sbin/networksetup 
```

关于suid：[http ://www.linuxnix.com/2011/12/suid-set-suid-linuxunix.html](http://www.linuxnix.com/2011/12/suid-set-suid-linuxunix.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T14:51:44.780

我也一直试图弄清楚这一点。我注意到手册页提到了这一点：

> 任何接受密码的标志都将接受“-”代替密码，以指示它应该从标准输入读取密码。

不太清楚如何使用它，但似乎有可能......

# c# - Visual Studio 2012 - 在 .NET 4.5 框架中找不到 System.Transactions 程序集

> ID：11819344
> 
> 赞同：12
> 
> 时间：2012-08-05T19:19:47.487
> 
> 标签：c#, .net, visual-studio-2012, .net-4.5

我正在尝试在 C# Visual Studio 2012 项目中添加对 System.Transactions 的引用，但 System.Transactions 在框架程序集中不可用，如下面的屏幕截图所示： ![可用的框架组件](../Images/94250c1ab7bde09db9db03f9996ecd97.png)

有谁知道为什么 System.Transactions 对我不可用？我怎样才能让它重新出现？

**编辑：** 修正了截图，谢谢马克！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-05T20:39:48.290

为此发布了一个 Microsoft Connect 条目，其中有一条评论建议您可以浏览它。给出的路径是：

> C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.5\System.Transactions.dll

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-25T15:11:21.953

安装在 NuGet 包中... Visual Studio：Castle.Services.Transaction

# java - 移动提供商无法进行 UDP 打孔

> ID：11819349
> 
> 赞同：8
> 
> 时间：2012-08-05T19:20:15.507
> 
> 标签：java, android, udp, protocols

实际上，我正在编写一个 android 应用程序，该应用程序接收连接到 PC 的网络摄像头的图片。为了获得更多 fps，我使用 udp 协议而不是 tcp。这个想法是，电脑将图片发送到手机的 ip 和端口。但是电话提供商有不同的公共端口。所以我不能直接打电话。这就是为什么我试图通过 udp 打孔来解决问题，但没有奏效。当我的手机向 pc 发送一个数据包时，pc 会获取手机的公共 ip 和端口。每秒都会发生这种情况以保持连接打开。然后服务器尽可能快地将网络摄像头帧发送到这个 ip 和端口。但手机在 1-2 秒内只收到 10-15 张图片。之后，提供商似乎过滤了每个后续数据包或类似的东西，因为手机没有收到任何进一步的数据包。

现在我的问题是：发生了什么（或提供商在做什么），我该如何解决这个问题？TCP 协议可以工作，但由于过多的开销和错误更正，流式传输速度太慢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-20T17:54:24.593

UDP 有几个问题需要牢记，这些问题在移动网络上被放大：

*   您可能知道，一旦您发送了一个 UDP 数据报，就绝对不能保证它会通过，也无法确定如果它没有通过会发生什么。

*   大于大约 1400 字节的有效负载很可能被分解为 IP 片段。接收操作系统*可以*将它们重新组合成一个完整的数据包，但前提是每个片段都到达。一些路由器任意丢弃片段，一些防火墙在片段包含特定字节模式时丢弃片段，还有一些限制可能发送片段的速率。最好始终保持您的数据报较小，并自己处理丢失部分的重组和重复。

*   没有流量控制：如果任何路由器的缓冲区已满，那么之后的所有内容都会被丢弃。如果缓冲区正在增长但尚未满，一些路由器将开始随机丢弃一定百分比的数据包。如果 UDP 源的速度超过某个任意阈值，某些防火墙会将其列入黑名单。

一般来说，设备和防火墙制造商倾向于将 UDP 视为垃圾，因此作为 UDP 开发人员，您必须成为一个特别好的公民才能不被倾倒：调节您的流量，记住丢弃的数据包意味着您可能走得太快，并保持小包。在受控环境中有很多事情可以避免，但是如果应用程序将“在野外”部署，则需要大量仔细编程以避免出现问题。

# android - 如何将自定义按钮添加到气球 android-mapviewbaloons 中？

> ID：11819350
> 
> 赞同：1
> 
> 时间：2012-08-05T19:20:15.850
> 
> 标签：android, android-mapview, android-maps

我使用这个不错的库来显示气球：[MapViewBalloons](http://jgilfelt.github.com/android-mapviewballoons/)

如何在气球中添加任何按钮？我想添加一个按钮，该按钮具有将当前位置添加到收藏夹的功能！是否可以？非常感谢你。

**代码：**

```
 mapOverlays = mapView.getOverlays();
        drawable = getResources().getDrawable(android.R.drawable.star_big_on);
        itemizedOverlay = new ItemsOverlay(drawable, mapView);          
        GeoPoint point = new GeoPoint((int)(51.5174723*1E6),(int)(-0.0899537*1E6));
        OverlayItem overlayItem = new OverlayItem(point, "Title", 
                "text"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T19:36:16.147

**你应该在你的balloon_overlay.xml**中添加一个按钮，然后在你的**BalloonOverlayView.java**类中你应该有`setupView()`函数，在那个函数中你应该添加如下内容：

```
LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View v = inflater.inflate(R.layout.balloon_overlay, parent);

Button favorite = (Button) v.findViewById(R.id.favorite);

favorite.setOnClickListener(new OnClickListener() {
//your code here
}); 
```

# c - c中的瞬时数字输入

> ID：11819352
> 
> 赞同：1
> 
> 时间：2012-08-05T19:20:25.063
> 
> 标签：c

我想取一个很长的整数（它可能包含多达 1000 位数字）。我想将它存储在一个数组中，以便每个数字都位于数组的每个位置。但是如果我尝试使用下面的代码，它将把整数放在 0 位置，直到我按下回车键。但我不能按回车。即使用户将其写为完整的数字，也会单独扫描每个数字。

```
for(count=0;number[count]!='\0';count++){
            scanf("%d",number+count);
        } 
```

那里的路是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T19:22:31.290

不要使用`scanf`. 用于`fgets`获取一行输入作为 a ，然后您可以从as 字符`char*`中提取单个数字，并自己将它们转换为数字。如果用户输入无法解析为数字的输入，则会导致问题。`char*``int``scanf("%d", ...)`

```
char *inputLine = malloc(sizeof(char) * (MAX_DIGITS + 1);
fgets(inputLine, MAX_DIGITS, stdin); // or replace stdin with a FILE * 
```

`fgets`将消耗整个输入行直到换行符，或者在参数 2 指定的字符数处停止。

如果要继续逐位读取，请使用`getchar()`读取单个字符，或`fgetc(FILE *)`从文件中读取单个字符。

```
char *inputLine = malloc(sizof(char) * (MAX_DIGITS + 1));
char ch = getchar();
int i = 0;
while ((ch != '\n') && (ch != EOF) && (i < MAX_DIGITS))
{
    inputLine[i++] = ch;
    ch = getchar();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T19:22:46.303

`%d`读取一个整数 - 如果您想一次读取一个字符，请使用`%c`，或者将您的`scanf()`调用替换为[`getchar(3)`](http://linux.die.net/man/3/getchar).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T19:35:00.313

试试这个：

```
char number[SIZE];
int nDigits = 0;

printf("Write a number: ");
while ((number[nDigits] = getchar()) != '\n') nDigits++;

printf("The number is: %s\n", number); 
```

另外，请注意，您可能需要`number`用零填充数组/字符串。

# php - 标头（“位置：...”）；从新的 PHP 更新开始没有重定向

> ID：11819354
> 
> 赞同：0
> 
> 时间：2012-08-05T19:20:41.650
> 
> 标签：php, header

```
if(isset($_SESSION['username']) && isset($_SESSION['password'])){
header("Location: ../welcome/index.php"); 
```

我的登录脚本最近似乎停止工作了，7 月 19 日 PHP 的新更新。

任何人都可以解决这个问题吗？

这是整个脚本。

* * *

```
<?
    include_once ('includes.inc.php');

    if (!isset($_POST['login']) || (strlen($_POST['username']) < 3) || (strlen($_POST['password']) < 3)) { //User forgot a field
        header("Location: ../index.php?message=4");
    }
    else {
        $username = htmlspecialchars(mysql_real_escape_string(trim($_POST['username'])), ENT_QUOTES);
        $password = sha1(trim($_POST['password']));
        $sqlPass  = mysql_query("SELECT isbanned, password, id FROM members WHERE username = '" . $username . "'");
        $sqlPass  = mysql_fetch_array($sqlPass);

        if (($sqlPass['password'] == NULL) || ($sqlPass['password'] != $password)) { //User entered wrong information
            header("Location: ../index.php?message=5");
        }
        else if ($sqlPass['isbanned'] == '1') {
            header("Location: ../index.php?message=50");
        }
        else {
            $_SESSION['username'] = $username;
            $_SESSION['password'] = $password;
            $_SESSION['uid']      = $sqlPass['id'];

            //Log IP
            AddIPToLogs();

            if (isset($_SESSION['username']) && isset($_SESSION['password'])) {
                header("Location: ../welcome/index.php");
            }
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T19:27:25.490

尝试`<?php`作为开始标签而不是`<?`

或者你使用过 session_start() 吗？

还是您以前在任何地方发送过标头？

php显示有什么错误吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T19:52:42.803

查看提供的代码，我的第一个想法是您的 if 语句有语法错误。

```
if (!isset($_POST['login']) || (strlen($_POST['username']) < 3) || (strlen($_POST['password']) < 3)) { //User forgot a field
    header("Location: ../index.php?message=4");
} 
```

应该

```
if ((!isset($_POST['login']) || (strlen($_POST['username']) < 3) || (strlen($_POST['password']) < 3)) { //User forgot a field
    header("Location: ../index.php?message=4");
} 
```

此外，您的 'header('Location: ')' 语句之前有一个 'include' 语句。您包含的代码中可能存在问题。

最后，您应该详细说明您是如何更新系统的，从哪个版本的 php 到什么“最新”版本。您是自己进行此更新，还是在 Web 托管服务器上运行？

# c# - Web.API 作为独立的没有 UI

> ID：11819357
> 
> 赞同：4
> 
> 时间：2012-08-05T19:20:53.913
> 
> 标签：c#, asp.net-mvc-4, asp.net-web-api

我想使用 WebApi 作为一个独立的应用程序进行数据访问。

当我创建一个新的 MVC 4 项目时，它会安装一堆我对此不感兴趣的废话。

我应该删除视图、内容、脚本等吗？

或者您会为此目的推荐 WCF 吗？

还有，不同的浏览器返回的数据格式也不同，比如Firefox返回XML，IE返回json。

我希望他们都返回 JSON。如果配置了 json，则使用 WCF，它们都返回返回 JSON。如何强制 webapi 只为所有浏览器返回 json？

有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T19:44:02.777

您可以创建一个空项目，然后只需拉入 nugets 即可获得所有 Web api 功能。

要仅强制 JSON，最简单的方法是清除全局格式化程序集合，然后添加回 JSON 格式化程序。

# php - 如何获取现有文件集的子集

> ID：11819359
> 
> 赞同：1
> 
> 时间：2012-08-05T19:21:34.443
> 
> 标签：php, build, phing

我的 build.xml 中有以下目标，准备由 Phing 处理：

```
<target name="syntax-test">
    <exec command="git diff --cached --name-only --diff-filter=ACMRTUXB" dir="./" escape="false" output="${TMP_DIR}/changed_files" />
    <fileset id="CHANGED_FILES" dir="./" includesfile="${TMP_DIR}/changed_files" />
    </exec>

    <phplint haltonfailure="true" level="warning" deprecatedAsError="true">
        <fileset refid="CHANGED_FILES" />
    </phplint>
</target> 
```

因为我有很多工具，我只想在所有文件的一小部分上运行 - 只在那些被添加/修改/等的文件上，我需要过滤这些。

这工作正常。

每个工具都非常具体，可用于仅检查特定文件（例如用于检查**.php的****phplint**或用于检查**.xml的****xmllint**）。

 ******我如何过滤掉这些？

当我尝试应用**模式集**或包含时，它似乎被迫只使用新规则（忽略**包含**文件参数）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T05:38:31.553

由于**FileSet**接受[文件名](http://www.phing.info/docs/guide/current/chapters/appendixes/AppendixD4-CoreSelectors.html#Filename)作为嵌套标记，您可以使用它：

```
<fileset id="CHANGED_FILES" dir="./" includesfile="${TMP_DIR}/changed_files">
    <filename name="**/*.php" />
</fileset> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T09:16:27.073

对我来说工作 * *.php 而不是 ** /*.php

```
<fileset id="CHANGED_FILES" dir="./" includesfile="${TMP_DIR}/changed_files">
    <filename name="**.php" />
</fileset> 
```******

# android - 在 Android 上记录 API 调用以嗅探 SSL 连接

> ID：11819360
> 
> 赞同：0
> 
> 时间：2012-08-05T19:21:37.967
> 
> 标签：android, hook

我正在尝试了解特定闭源 Android 应用程序的网络协议。不幸的是，这个协议运行在 SSL 之上，这意味着我无法使用嗅探器窃听连接。

因此我的问题是：是否可以记录所有调用，包括应用程序在运行时发出的参数？如果可能的话，我可以简单地记录对 InputStream.read() 和 OutputStream.write() 的所有调用，从而监听通信。

有没有已知的方法可以在（根）Android 设备上执行此操作？或者您知道任何其他窃听 SSL 连接的方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T01:30:11.213

通常，您可以通过更改执行引擎（即 dalvik）或通过使用日志记录变体包装或替换感兴趣的平台库来执行此类操作。

或者您可以修改平台以使其将所有 apk 视为可调试的。

另一种选择是在设备上安装您自己的 SSL 证书并在流量中间人。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-06T00:52:10.483

没有办法。Android 沙盒应用程序是为了防止这种事情发生。如果您确实找到了方法，请将其报告给 Google，以便他们可以关闭该漏洞。

# c# - 在 ASP.MVC 4 中使用上传文件更新图像

> ID：11819366
> 
> 赞同：4
> 
> 时间：2012-08-05T19:22:08.950
> 
> 标签：c#, asp.net-mvc, visual-studio-2010

我有 30 张图片，旁边有一个上传按钮。

当您选择新图像并按更新时，它应该删除旧图像并以相同的名称和路径保存新图像。

我这样做：

```
string path = "~/Pics/Image1.jpg";
System.IO.File.Delete(Server.MapPath(path));
uploadfile.SaveAs(path); 
```

它有效，我可以在我保存所有图像的文件夹中看到更改，但在浏览器中我看到旧图像，我需要删除我的缓存才能看到新图像。

有什么方法可以在不从浏览器中删除缓存的情况下更新我的图像并显示新图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T19:38:06.197

您需要更改 http 标头`Last-Modified` 以浏览器识别更改图像并下载新图像。你的回答显然是正确的。

```
var headerValue = Request.Headers['If-Modified-Since'];
if (headerValue != null)
{
    var modifiedSince = DateTime.Parse(headerValue).ToLocalTime();
    // Insert date of your file change
    if (modifiedSince >= dateOfFileChanged)
    {
        return new HttpStatusCodeResult(304, "Page has not been modified");
    }
}

// page has been changed.
// generate a view ...

// .. and set last modified in the date format specified in the HTTP rfc.
Response.AddHeader('Last-Modified', dateOfFileChanged.
                                ToUniversalTime().ToString("R")); 
```

这段代码是从这个问题[Last-Modified Header in MVC](https://stackoverflow.com/questions/10498135/last-modified-header-in-mvc)中提取的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T19:25:34.313

这是您怀疑的浏览器缓存问题。您可以做的是添加查询字符串值或类似这些行的内容，以便浏览器必须重新加载文件。

最终结果将是`image.jpg?image=randomNumber`

我通常通过 javascript 执行此操作，您可以使用[generate-random-numbers-in-javascript-in-a-specific-range](https://stackoverflow.com/questions/1527803/generating-random-numbers-in-javascript-in-a-specific-range)来帮助您解决这个问题。

现在就像一个注释一样，您只是将查询字符串添加到图像标记的源中，以防我不清楚。

# jquery - 调整窗口大小时将 div 替换为另一个 div

> ID：11819371
> 
> 赞同：1
> 
> 时间：2012-08-05T19:22:37.840
> 
> 标签：jquery, css, html

我有这个 HTML 代码：

```
<div id="div_top"></div>
<div id="div_bottom"></div> 
```

仅在移动网站上或当我`div2`之前 调整我想要的窗口大小时`div1`。

所以我用

```
if(window.innerWidth <= 480){
    jQuery(document).ready(function(){
      jQuery('#div_bottom').insertBefore('#div_top');
    });

    jQuery(document).resize(function(){
        jQuery('#div_bottom').insertBefore('#div_top');
    });
} 
```

加载功能运行良好，但不能调整大小。

是否有针对此问题的 CSS jQuery 解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T19:30:29.240

```
$(window).resize(function() {
    if (window.innerWidth <= 480) {
        $("div#div_bottom").insertBefore("div#div_top");
    }
}); 
```

应该做得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T19:30:35.800

您需要`.resize()`在`window`对象上使用而不是`document`.

来源：http : [//api.jquery.com/resize/#comment-34139342](http://api.jquery.com/resize/#comment-34139342)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T06:06:22.637

该`$(window).resize(function() {...});`方法应该有效..看看这个[小提琴](http://jsfiddle.net/Ly96f/22/)

别忘了你`$(document).read(function() {});`也需要一个。[小提琴](http://jsfiddle.net/Ly96f/22/)已经实现了这个方法，你只是看不到它。（检查最左边的列，有一个检查说方法已经实现）

# android - Android：确定是否收到广播

> ID：11819384
> 
> 赞同：1
> 
> 时间：2012-08-05T19:24:31.263
> 
> 标签：android, broadcastreceiver, android-c2dm, google-cloud-messaging

我正在开发一个讨论图片的聊天应用程序。当我收到一条 c2dm 消息时，有效负载包含该消息和一个 md5，用于标识该消息所涉及的图片。当具有匹配 md5 的 ChatActivity 在前台时，我只想播放声音。如果不是，我想向通知栏添加通知。

这与 whatsapp 的行为相同。如何实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T21:20:14.247

除了为 C2DM 消息注册现有清单之外，还需要注册一个以接收C2DM`ChatActivity`消息。让in使用 的为正值，默认为 0。在or中使用，在or中使用。`BroadcastReceiver``BroadcastReceiver``IntentFilter``ChatActivity``registerReceiver()``setPriority()``registerReceiver()``onResume()``onStart()``unregisterReceiver()``onPause()``onStop()`

结果是当 C2DM 消息到达时，如果你`ChatActivity`在前台，由于优先级更高，它会先得到消息。它可以检查消息是否与它的图像有关。如果是，则`ChatActivity`可以`BroadcastReceiver`调用`abortBroadcast()`, 以防止您的标准优先级清单注册接收器获取广播。因此，如果您的清单注册接收器*确实*收到了广播，那么您就知道前台没有相关`ChatActivity`内容，并且它可以提高`Notification`.

[这是一个](https://github.com/commonsguy/cw-omnibus/tree/master/Notifications/Ordered)演示大部分内容的示例应用程序。广播来自应用程序本身，而不是 C2DM，但结构的其余部分几乎相同。

# scala - Akka actorFor 与传递一个 ActorRef

> ID：11819386
> 
> 赞同：16
> 
> 时间：2012-08-05T19:25:02.230
> 
> 标签：scala, akka

我正在学习 Akka，并且试图弄清楚如何让演员互相交谈（让我们称他们为`A`and `B`）。这不是请求/响应场景，`A`并且`B`随时都在互相发送消息。

目前我有两个兄弟演员，他们在两个方向上互相传递消息。它们都是直接在`ActorSystem`. 我最初将`ActorRef`of传递`A`给`B`. 但是我不能将 of 传递给`ActorRef`of`B`的构造函数，`A`因为它还不存在，即我不能将此方法用于循环引用。

我一直在阅读`actorFor`，这可以让我使用它的路径查找演员。但是，我对这种设置并不满意，因为如果路径发生变化，编译器就不会捕捉到它。

另一种选择是，考虑到每个actor都可以访问它的父级，将消息从父级传递到父级，`A`然后`B`让父级将消息传递回`A`and `B`。但这会将父级与来回传递的消息类型结合起来。

人们使用什么策略让演员互相了解？我对通过路径查找演员是否过于谨慎？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-06T07:08:02.840

在我看来，你有三种策略，我从更接近你的问题开始列出（但对我来说也是最糟糕的模式，我很抱歉）

策略1：您创建actor A 和actor B，将actorRef A 传递给actor B 的构造函数。您的ping-pong 将从actor B 向actor A 发送消息开始，actor A 可以简单地使用sender 引用进行回复。（或相反）

* * *

策略 2：您在应用程序中创建一个负责命名的层：它在创建角色时以及在查询时分配名称。这将问题集中在一个点上。

* * *

策略 3：你想知道打乒乓球的两个兄弟姐妹演员是否没有取代更好、更模块化的演员层次结构，在这种层次结构中，基本上每个演员只与他的父母和他的孩子交流，而不知道他的兄弟姐妹。

# redis - 从具有多个数据库的实例复制单个 Redis 数据库

> ID：11819387
> 
> 赞同：5
> 
> 时间：2012-08-05T19:25:02.170
> 
> 标签：redis, database-replication

我有一个具有两个数据库的 Redis 实例。现在我想设置第二个实例并[复制](http://redis.io/topics/replication)第一个实例，但是第二个实例应该只有一个数据库并且只从第一个实例复制 db 0。当我尝试这样做（`slaveof ...`为第二个实例设置）时，我在 Redis 日志文件中收到以下错误消息：

```
FATAL: Data file was created with a Redis server configured to handle more than 1 databases. Exiting 
```

我尝试使用[redis-dump](https://github.com/delano/redis-dump)，但是当我尝试将生成的转储导入新实例时出现错误。（我认为与 2 dbs 与 1 db 无关，而是 redis-dump 中的一个错误，它仍处于 alpha 阶段。

该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T13:25:18.600

这就是我实现它的方式（在 Gurpartap Singh 的帮助下）：

*   `databases 2`像第一个一样配置第二个 Redis 实例
*   复制第一个实例（参见[http://redis.io/topics/replication](http://redis.io/topics/replication)）
*   打开第二个 Redis 实例的命令行（使用 redis-cli）
*   在 Redis CLI 上：SELECT 1（选择第二个数据库）
*   在 Redis CLI 上：FLUSHDB（删除第二个数据库中的所有键）
*   在 Redis CLI 上：SAVE（将数据集保存到磁盘）
*   退出 Redis CLI 并停止 Redis
*   将配置更改为`databases 1`
*   重新启动 Redis

此时，您应该有一个正在运行的 Redis 实例，其中只有一个 db（来自原始 Redis 实例的 db 0）

这里的关键是，当我们删除第二个 db 中的所有键，然后将数据集保存到磁盘时，生成的转储只有一个 db。（感谢 Gurpartap Singh 的提示）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T02:41:32.680

据我了解，你有 redis 实例 A，它有 db 0 和 db 1。你想在另一个实例 B 上复制 db 0（可能在单独的机器上 - 但没关系）。Redis 主要关注完整的实例复制，而不是单独的数据库。

因此，如果您仍想复制 db 0 而不是 db 1，我建议您将其中一个 db 迁移到单独的实例。就像，将 db 1 迁移到一个单独的实例，独立于这个复制图。然后您可以为只有 db 0 的实例（实例 A）设置一个主从复制。

这里有一个关于如何实现redis复制的详细解释：[http ://redis.io/topics/replication](http://redis.io/topics/replication)

简而言之，您必须连接到您想要成为从属的新实例 (B)，然后发出命令：`slaveof redis-master.webapp.com 6379`，其中地址和端口指向实例 A。然后它将同步数据并跟踪来自的所有更新主实例。

如果您发现它没有同步数据，您可以使用`info`命令检查它的同步状态。也可以在master上试试。日志也有帮助。

希望有帮助。如果您需要有关设置 redis 复制的更多信息，请告诉我。

# javascript - 带有帖子值的 JS jQuery 重定向，没有

> ID：11819388
> 
> 赞同：0
> 
> 时间：2012-08-05T19:25:13.923
> 
> 标签：javascript, jquery

这是一个重定向到发送帖子值的页面的工作示例

```
<a href="#" onClick="someFunc(); document.formname.submit();  return false;"  >click to post</a>
<form name="formname" action="/somepage.php"  method="post">
<input type="hidden" name="postName" value="something">
</form> 
```

有用。 [http://www.avramovic.info/razno/jquery/redirect/demo.php](http://www.avramovic.info/razno/jquery/redirect/demo.php)通过使用 js 为您创建表单来做同样的事情。jQuery().redirect('/redirurl/', {'arg1': 'value1', 'arg2': 'value2'});

如何在没有插件的情况下完成同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T19:31:06.853

只需使用给定代码的原始 JS“版本”：

```
var form = document.createElement('form');
form.style.display = "none";
form.action = "TARGET URL HERE";
form.method = "post";
// for each of your input variables:
var input = document.createElement('input');
input.name = "NAME HERE";
input.value = "VALUE HERE";
form.appendChild(input);
// After the last input:
document.body.appendChild(form);
form.submit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T22:32:44.640

好吧，如果您使用的是 jquery：

```
var form = $('<form method="POST" action="my_action_url">' +
    '<input type="hidden" name="my_post_var" value="' + my_value_var + '" />' +
    '</form>');
$(document.body).append(form);
form.submit(); 
```

你也可以把它放在一个函数中。

# asp.net - 避免创建过多的会话变量

> ID：11819392
> 
> 赞同：0
> 
> 时间：2012-08-05T19:26:02.557
> 
> 标签：asp.net

我是初学者，我无法弄清楚以下情况。我在 pageindexchange 事件中有一个 do databind() 函数，在使用 gridview 更改页面索引时在服务器上再创建一个会话。当我们在会话中存储gridview的源代码时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T19:34:56.127

会话为每个用户创建一次。这意味着如果您将网格数据存储在会话中，您会增加每个新用户的内存消耗。

还有其他选择。如果数据从不更改或很少更改，您可以将其缓存在共享容器（httpcache、应用程序）中。如果每个用户的数据不同，不要缓存它，在每个请求中从数据库中读取它。

# objective-c - 为什么委托没有调用navigationController

> ID：11819395
> 
> 赞同：0
> 
> 时间：2012-08-05T19:27:05.430
> 
> 标签：objective-c, ios

我知道如何使用委托模式

1.  声明协议
2.  必需或可选方法
3.  `id<> delegate`财产
4.  `[delegate respondtoselector:@selector(method)]`
5.  继承协议`class <someProtocol>`
6.  `-(void) protolcolMethod`
7.  `class1Obj.delegate = self;`

我在我的应用程序中使用了这几个地方，但现在我在同一个应用程序中再次执行此操作，响应选择器不起作用。唯一的区别是这次它在 NavController 中。

NavController 父 tableview 类 didselectrow，推送另一个视图，该视图具有调用 presentmadelcontroller 的按钮，这是我声明我的协议并在 navigationContoller 父类中继承的地方。**但为什么它不起作用**？我为此挣扎了几个小时。

*此类以模态方式呈现并声明此协议*

```
#import <CoreData/CoreData.h>

@protocol xPro <NSObject>
-(void)xGet;
@end

id<xPro> xDel;

@interface rosterForGroup : UIViewController <NSFetchedResultsControllerDelegate>
{
    NSFetchedResultsController *fetchedResultsController;
    NSArray *dispName;
}

@property (strong, nonatomic) IBOutlet UITableView *tableView;

@property (strong, nonatomic) id<xPro> xDel; 

- (IBAction)xFunc:(id)sender;

@end

.m file ...
- (IBAction)xFunc:(id)sender
{
    [xDel xGet];
} 
```

*而这个类是 NavController 父类*

```
 ...
    @interface groupChatViewController : UIViewController<XMPPRoomDelegate, createNewGroupDelegate, UITableViewDataSource, UITableViewDelegate, xPro>
    ...
    @property (strong, nonatomic) rosterForGroup *xR4G;
    ...

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    xR4G = [[rosterForGroup alloc]init];
    xR4G.xDel = self;
...

-(void)xGet
{
    NSLog(@"AAAAAAH");
} 
```

请避免使用这些奇怪的对象名称。

*rosterforgroup alloc/init*

```
- (IBAction)openGroupOptions:(id)sender
{
     roster4Group = [[rosterForGroup alloc]init];
     [roster4Group setDelegate:self];
     [self presentModalViewController:roster4Group animated:true];
     //[xmppRoom fetchMembersList]; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T20:04:38.937

也许这是一个远景；但我怀疑实际上“在屏幕上”的 rosterForGroup*与*`alloc/init`您在 viewDidLoad 方法中使用的实例不同。也许您是通过 segues 或其他方法到达那里的；但是您显示的代码并未表明（尽管它可能在您省略的代码中）您实际上正在将 xR4G 视图控制器设置为*包含*的视图控制器并将其放在屏幕上（在连接它的操作方法等之后）

这意味着该解决方案是对您的 View Controller 关系的轻微重组，如果您不清楚如何完成该问题，这可能值得额外的 SO 问题（这个问题，就目前而言，不是建议的正确位置关于如何得到你想要的东西）。

# 编辑

我还怀疑您的`rosterForGroup`视图控制器未正确初始化。简单地在 VC 上执行 alloc/init 将无法正确设置其视图及其 IB* 连接（除非它的`loadView`方法以编程方式完成所有操作）。它们应该从您的故事板或 XIB 文件中加载（`initWithNibName:`或`[self.storyboard instantiateViewControllerWithIdentifier:]`

# dns - 直接管理控制面板中的 DNS 托管设置和 DNS 设置有什么区别

> ID：11819398
> 
> 赞同：1
> 
> 时间：2012-08-05T19:27:24.483
> 
> 标签：dns, web-hosting, cpanel

我使用 cPanel 在网络空间托管我的博客，但我对 DNS 设置感到困惑。我在 namecheap 中购买了我的域并将 dns 服务器设置为 Point DNS。

DNS托管服务中的DNS设置与cPanel内部的DNS设置（如“高级DNS区域编辑器”和“简单DNS区域编辑器”）有什么关系。Point DNS 中的 DNS 设置会克服 cPanel 中的设置吗？还是比这更复杂？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T18:50:25.613

这是我关于 DNS 的建议。

**少于 10 个域/简单用法：使用 Registrar 的 DNS**

如果您托管的域少于 10 个并且它们都是您的域，请使用您的提供商的 DNS 服务。这只会让你的事情变得更容易。

**超过10个域，转售，频繁更改：使用服务器的DNS**

如果您托管超过 10 个域、频繁添加域或转售托管服务，那么您将需要自己的域名服务器。这里有几个步骤。首先，您必须将 cPanel 配置为用作名称服务器，然后在您的注册商处列出这些名称服务器/主机，最后，设置您的域以使用您选择的名称服务器。

**使用 DNS 提供程序**

使用 3rd 方 DNS 提供商（例如 UltraDNS、DNS Made Easy 或类似提供商）有很多好处。这些提供商的网络通常具有全球影响力。这改善了 DNS 传播、加快了 DNS 查找并减少了 DNS 中断。如果您经营一个可以赚钱的网站，请考虑这些服务。尽管拥有超过 150 台服务器的专业知识，我们仍然外包我们的 DNS。

参考：

cPanel 文档

[http://docs.cpanel.net/twiki/bin/view/11_30/WHMDocs/BasicSetup#Nameservers](http://docs.cpanel.net/twiki/bin/view/11_30/WHMDocs/BasicSetup#Nameservers)

闪光教程

[http://www.rackaid.com/flash/whm11-setup-voice/whm-setup-17-nameservers.html](http://www.rackaid.com/flash/whm11-setup-voice/whm-setup-17-nameservers.html)

闪光教程

[http://www.rackaid.com/flash/whm11-services-voice/whm-services-22-dnszones.html](http://www.rackaid.com/flash/whm11-services-voice/whm-services-22-dnszones.html)

# python - Python中的一切都是对象，但为什么不将关键字作为对象？

> ID：11819399
> 
> 赞同：1
> 
> 时间：2012-08-05T19:27:26.863
> 
> 标签：python, python-3.x, python-2.7

我是 python 编程的新手，python 的美妙之处在于一切都是对象，但为什么不将关键字作为对象？

```
>>> type(for)
  File "<stdin>", line 1
    type(for)
           ^
SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-05T19:34:36.960

实际上，运算符是对象。看看[`operator`](http://docs.python.org/library/operator.html)模块。您无法使用通常的名称获取运算符对象（因为这会使 Python 的语法变得非常复杂，并且令人困惑），但这有效：

```
>>> import operator
>>> type(operator.add)
<type 'builtin_function_or_method'> 
```

流控制关键字，例如`if`and `for`are not objects，因为没有语义 - 你会用假设的`for`对象做什么？请注意，有*一些*函数可以替换 for 循环，即[`filter`](http://docs.python.org/library/functions.html#filter), [`map`](http://docs.python.org/library/functions.html#map),以及[itertools](http://docs.python.org/library/itertools.html)[`reduce`](http://docs.python.org/library/functions.html#reduce)中的各种函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T19:42:53.280

运算符和关键字不是对象的原因是它们实际上只是语言语法的一部分，而不是您可以操作的元素。正如 phihag 所说，你会对假设的“for”对象做什么？

然而，运算符是对象——但您必须记住，“+”运算符本质上只是**add**函数的语法糖。当你写

```
a + b * c 
```

Python 看到的（忽略优化）更像

```
a.__add__(b.__mul__(c)) 
```

事实上，我们可以用数字来试试这个：

```
>>> (5).__mul__((3).__add__(10))
65 
```

因此，运算符“+”由 (5).__ add__ 函数表示，它是一个对象。（我们必须使用括号，因为数字文字是一种特殊的语法情况。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T19:35:41.367

有一些混合消息正在发生。Mark Pilgrim 说[一切都是对象](http://www.diveintopython.net/getting_to_know_python/everything_is_an_object.html)，但即使在一切都是对象的语言中，也不是*一切*都是对象。;)

Python 允许您通过类的特殊命名方法进行运算符重载。它也有一个`operator`模块。归根结底，`operator`模块的成员和特殊的运算符类方法都是*函数*，因此也是对象，但是 Python 用来提供可读性和语义的*裸词*（例如`+`）并不总是可以作为对象进行解析。

这对于关键字来说不太正确。一些关键字，例如`if`，根本不归结为一个对象。最好忽略Dive Into Python 中的*一切，只记住这句话：*

> 字符串是对象。列表是对象。函数是对象。甚至模块也是对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T04:31:45.307

关键字在 Python 中并不存在。你得到一个语法错误，但如果你没有，你仍然不能做 type(keyword) 因为关键字不存在。

以下面的代码为例：

```
>>> from urllib2 import urlparse as foo 
```

在这里，我们将“as”一词视为语法的一部分。这是一个关键字。

```
>>> type(as)
  File "<stdin>", line 1
    as
     ^
SyntaxError: invalid syntax 
```

但是尝试将其用作对象会导致语法错误。

但在 2.4`as`中不是保留字。所以有些不同：

```
>>> from urllib2 import urlparse as foo 
```

到目前为止，一切都很好。

```
>>> type(as)
Traceback (most recent call last):
  File "<stdin>", line 1, in ?
NameError: name 'as' is not defined 
```

在那里，我们看到`as`根本不存在。它不是一个对象，因为它什么都不是。语言不知道它的存在。这是因为语言在执行之前无法意识到某些事情。解析是在执行之前完成的。因此，语法和关键字的解析是在“一切”存在之前完成的。因此关键字不是“一切”的一部分，因此它们不是对象。

您得到的语法错误是为了防止您使用关键字作为变量名而犯错误。但是，在这种情况下，这个错误意味着关键字不是对象的原因并不是很明显：因为它们什么都不是。

# objective-c - 无法在 NSURLRequest 中设置 cookie

> ID：11819411
> 
> 赞同：0
> 
> 时间：2012-08-05T19:29:43.123
> 
> 标签：objective-c, xcode, cookies, nsurlconnection, nsurlrequest

在我的程序中，我调用了两个函数，第一个是登录，第二个是解析数据的函数。

为了存储会话，我使用登录功能保存我的 cookie：

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    [receivedData setLength:0];
    if(connection == conn_login){
        NSHTTPURLResponse *HTTPResponse = (NSHTTPURLResponse *)response;
        NSDictionary *fields = [HTTPResponse allHeaderFields];
        cookie = [fields valueForKey:@"Set-Cookie"];
    }
} 
```

一切都很好，当我打印 cookie 时，它​​是：

```
userid=1; expires=Mon, 05-Aug-2013 19:22:18 GMT; path=/; domain=www.mydomain.com 
```

“userid=1”是我感兴趣的。

因此，在我解析数据的以下 NSURLRequest 中，我确实喜欢这样设置保存的 cookie：

```
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL
URLWithString:@"http://www.mydomain.com/?getList"]];
[request setValue:cookie forHTTPHeaderField:@"Set-Cookie"]; 
```

但它不起作用。我以前的 cookie 没有设置，即使打印第二个请求的完整标头，也没有“用户 ID”或任何东西。

我究竟做错了什么？谢谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:25:59.823

我认为您必须使用这行代码...如果您有疑问，请告诉我

```
NSArray *cookies1 = [[ NSHTTPCookieStorage sharedHTTPCookieStorage] cookies ];

NSDictionary *cookieHeaders;

cookieHeaders = [ NSHTTPCookie requestHeaderFieldsWithCookies: cookies1];

[request setValue: [cookieHeaders objectForKey: @"Cookie" ]forHTTPHeaderField:@"Cookie" ]; 
```

# image - 图像处理管道：平场校正

> ID：11819412
> 
> 赞同：0
> 
> 时间：2012-08-05T19:29:46.153
> 
> 标签：image, image-processing

在图像处理管道中，执行平场校正的正确位置在哪里？是应该在减去暗帧之后立即在bayared图像上完成，还是应该在unbayering之后或在色彩校正之后完成？

谢谢

吉拉德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T19:40:25.533

拜耳过滤取决于像素的几何形状及其滤色片，因此它需要先于任何会扰乱该几何形状的事物出现。暗帧减法也是如此。

它根本不会干扰色彩校正，反之亦然，因此您可以选择之前或之后。

# facebook - Facebook 粉丝专页 ID 问题

> ID：11819414
> 
> 赞同：1
> 
> 时间：2012-08-05T19:30:01.083
> 
> 标签：facebook, facebook-opengraph, blogger, facebook-page

我正在使我的博客对 Facebook 更友好，而我的粉丝页面的应用程序 ID 正在引起问题。

[根据http://facebook.stackoverflow.com/questions/3130433/get-facebook-fan-page-id](http://facebook.stackoverflow.com/questions/3130433/get-facebook-fan-page-id)上的讨论，我检查了我的粉丝页面 id 是 221368874578748（从 [https://graph.facebook.com/检索TapiolanTakamailla](https://graph.facebook.com/TapiolanTakamailla) )

所以我将它设置为我的博客模板，如下所示：

> “元内容='221368874578748' 属性='fb:app_id'/”

但是调试器给了我错误：

> URL 'http://www.tapiolantakamailla.com/2012/08/tunnistatko-uuttukyyhkyn.html' 类型'article' 的对象无效，因为属性'fb:app_id' 的给定值'221368874578748' 无法解析为输入“fbid”。

我做错了什么？

提前致谢， 塔皮奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T22:47:10.333

您正在使用 Page ID 代替 App ID。

元`fb:app_id`标记需要是一个应用程序。将您的应用程序的 ID 放在那里。这是在应用程序设置的主页和您管理的应用程序列表上

# css - CSS - 在CSS中并排居中两个图像

> ID：11819417
> 
> 赞同：29
> 
> 时间：2012-08-05T19:30:08.410
> 
> 标签：css

我试图将两个图像并排居中，但由于某种原因，它总是将图像显示在彼此下方。有谁知道我怎样才能让它们居中并彼此相邻？

谢谢！

HTML 代码

```
<a href="mailto:olympiahaacht@hotmail.com">
<img id="fblogo" border="0" alt="Mail" src="http://olympiahaacht.be/wp-content/uploads/2012/07/email-icon-e1343123697991.jpg"/></a>
<a href="https://www.facebook.com/OlympiaHaacht" target="_blank">
<img id="fblogo" border="0" alt="Facebook" src="http://olympiahaacht.be/wp-content/uploads/2012/04/FacebookButtonRevised-e1334605872360.jpg"/></a>` 
```

CSS 代码

```
#fblogo {
    display: block;
    margin-left: auto;
    margin-right: auto;
    height: 30px; 
} 
```

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-08-05T19:33:32.500

尝试改变

```
#fblogo {
    display: block;
    margin-left: auto;
    margin-right: auto;
    height: 30px; 
} 
```

到

```
.fblogo {
    display: inline-block;
    margin-left: auto;
    margin-right: auto;
    height: 30px; 
}

#images{
    text-align:center;
} 
```

**HTML**

```
<div id="images">
    <a href="mailto:olympiahaacht@hotmail.com">
    <img class="fblogo" border="0" alt="Mail" src="http://olympiahaacht.be/wp-content/uploads/2012/07/email-icon-e1343123697991.jpg"/></a>
    <a href="https://www.facebook.com/OlympiaHaacht" target="_blank">
    <img class="fblogo" border="0" alt="Facebook" src="http://olympiahaacht.be/wp-content/uploads/2012/04/FacebookButtonRevised-e1334605872360.jpg"/></a>
</div>​ 
```

[**演示**](http://jsfiddle.net/X3b5g/389/)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-05T19:33:06.167

您不能有两个具有相同 ID 的元素。

除此之外，您将它们定义为块元素，这意味着（用外行的话）它们被迫出现在自己的行上。

相反，尝试这样的事情：

```
<div class="link"><a href="..."><img src="..."... /></a></div>
<div class="link"><a href="..."><img src="..."... /></a></div> 
```

CSS：

```
.link {
    width: 50%;
    float: left;
    text-align: center;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-03-30T20:06:49.293

Flexbox 只需在周围的 div 上使用两个 css 规则就可以做到这一点。

```
.social-media{
    display: flex;
    justify-content: center;
}
```

```
<div class="social-media">
<a href="mailto:olympiahaacht@hotmail.com">
<img class="fblogo" border="0" alt="Mail" src="http://olympiahaacht.be/wp-content/uploads/2012/04/FacebookButtonRevised-e1334605872360.jpg"/></a>
<a href="https://www.facebook.com/OlympiaHaacht" target="_blank">
<img class="fblogo" border="0" alt="Facebook" src="http://olympiahaacht.be/wp-content/uploads/2012/04/FacebookButtonRevised-e1334605872360.jpg"/></a>
</div>
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-04-10T02:37:11.707

我知道这个问题很老，但在 HTML5 中有一个很好的解决方案。您可以将其全部包装在`<figure></figure>`标签中。代码看起来像这样：

```
<div id="wrapper">
<figure>

<a href="mailto:olympiahaacht@hotmail.com">
<img id="fblogo" border="0" alt="Mail" src="http://olympiahaacht.be/wp- 
content/uploads/2012/07/email-icon-e1343123697991.jpg"/>
</a>

<a href="https://www.facebook.com/OlympiaHaacht" target="_blank">
<img id="fblogo" border="0" alt="Facebook" src="http://olympiahaacht.be/wp- 
content/uploads/2012/04/FacebookButtonRevised-e1334605872360.jpg"/>
</a>

</figure>
</div> 
```

和CSS：

```
#wrapper{
 text-align:center;
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-09-05T08:42:39.317

我刚刚为一个项目做了这个，并通过使用我没有用于其他任何东西的 h6 标签来实现它：

在html代码中：

```
<h6><img alt="small drawing" src="../Images/image1.jpg" width="50%"/> <img alt="small drawing" src="../Images/image2.jpg" width="50%"/><br/>Optional caption text</h6> 
```

图像标签之间的空间在图像之间放置了一个垂直间隙。每个 img 标签中的 width 参数是可选的，但它会整齐地调整图像的大小以填充页面的宽度。请注意，每个图像必须设置为仅占宽度的 50%。（如果您使用 3 张图像，则为 33%。）width 参数必须在 alt 和 src 参数之后，否则它将不起作用。

在 CSS 代码中：

```
/* h6: set presentation of images */
h6
  {
  font-family: "Franklin Gothic Demi", serif;
  font-size: 1.0em;
  font-weight: normal;
  line-height: 1.25em;
  text-align: center;
  } 
```

文本项设置标题文本的外观，而 text-align 属性使图像和标题文本居中。

# c# - 动态曲线值呈现器

> ID：11819424
> 
> 赞同：0
> 
> 时间：2012-08-05T19:31:11.790
> 
> 标签：c#, wpf

![控制模型](../Images/c61d15c3b2b07a0c0f94e04859bac455.png)

在用户输入后的 WPF 应用程序中，我正在显示仪表板以显示用户数据的输出。

现在我想要的是一个像上面这样的控件，蓝色从左到右填充该段。例如，如果返回值为 100，则蓝色填充整个段，如果为 0，则不显示蓝色。

使用普通矩形很容易创建它，但曲线是一个挑战。对于矩形的参考，它的工作原理是，在按钮上单击一个值，在 0-100 的范围内创建一个值，然后将它乘以（矩形宽度）/（最大值）的比率。然后将矩形宽度设置为此。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T19:40:13.647

我认为，这个[CodeProject 文章](http://www.codeproject.com/Articles/28098/A-WPF-Pie-Chart-with-Data-Binding-Support)演示了如何做你需要的。

# jquery - jQuery 文档就绪和函数范围

> ID：11819425
> 
> 赞同：3
> 
> 时间：2012-08-05T19:31:11.687
> 
> 标签：jquery

我想提供帮助函数，允许基于 jQuery 的复杂 UI 的各种组件隐藏或显示加载*div*（在从页面的各个部分启动 Ajax 调用时使用）。

为此，我最初编写的代码如下：

```
<script type="text/javascript">
$(function ()
{
    var loadingControl = $("#loading");

    function showLoading() {
        loadingControl.show();
    }
}
</script> 
```

但是，我很快意识到*showLoading*仅在该特定*文档 ready*的范围内。

听从的建议

[https://stackoverflow.com/a/1055799/141172](https://stackoverflow.com/a/1055799/141172)

我在全局范围内声明*了 showLoading ，如下所示：*

```
<script type="text/javascript">
var showLoading;
$(function ()
{
    var loadingControl = $("#loading");

    function showLoading() {
        loadingControl.show();
    }
}
</script> 
```

但是，我仍然发现*showLoading*在稍后执行的*文档就绪*块中不可用。错误是

> 属性“showLoading”的值为 null 或未定义，不是 Function 对象

这种行为可以在这里看到：

[http://jsfiddle.net/NfXFT/4/](http://jsfiddle.net/NfXFT/4/)

jsFiddle 还证明了*showLoading*实现的*文档就绪*在调用它的*文档就绪*块之前运行。

出了什么问题，我怎样才能使这个辅助方法可用？

我在*文档就绪*块中定义它，因为它依赖于可用的“#loading”。是否有更好的方法来实现提供帮助功能来隐藏/显示加载屏幕的相同目标？我想把它保存在一个辅助函数中，因为以后实现可能会改变。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T19:36:37.173

发布后，我意识到我做错了什么。

```
function showLoading() {
    loadingControl.show();
} 
```

应该

```
showLoading = function() {
    loadingControl.show();
} 
```

# c# - 调用 GetConstructor 时出现异常

> ID：11819429
> 
> 赞同：2
> 
> 时间：2012-08-05T19:32:22.607
> 
> 标签：c#, reflection

我正在尝试通过反射构造以下类的实例。

```
public class Abc
{
    private int _a;
    public Abc(int a)
    {
        _a = a;
    }

    public void Show()
    {
        MessageBox.Show(_a.ToString());
    }

} 
```

我正在使用以下代码段来获取类的构造函数，但是当代码到达时我得到一个“对象引用未设置为对象的实例”异常 `ConstructorInfo csInfo = typa.GetConstructor(types);`我检查了 msdn，发现当任何的元素为`Type[] types`空。我调试后发现所有元素都有有效值。你能帮我找到实际的问题吗？

```
Assembly ass = Assembly.GetExecutingAssembly();
Type typa = ass.GetType("Abc");
Type[] types = new Type[1];
types[0] = typeof(int);

ConstructorInfo csInfo =typa.GetConstructor(types);
object [] obj = { 10 };

var AbcObj = csInfo.Invoke(obj) as Abc;

AbcObj.Show(); 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T19:38:00.263

我已经编译了你的代码（VS2010），这一行导致空引用异常：

```
Type typa = ass.GetType("Abc"); 
```

类型为空。那是因为您需要带有命名空间的类名。例如：

```
Type typa = ass.GetType("ConsoleApplication1.Abc"); 
```

编辑：当然，只有当您的类在命名空间中时，您才需要命名空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T19:39:21.347

您需要将命名空间与类型名称一起传递

例子

```
Type typa = ass.GetType("YourNamesPace.Abc"); 
```

# coding-style - Python 语法错误“def”

> ID：11819430
> 
> 赞同：0
> 
> 时间：2012-08-05T19:32:28.687
> 
> 标签：coding-style, python-2.7

我正在尝试编译这段 Python 代码-

```
def isPrime ( n ):
    if n < 2 :
        return false
    for x in range(2,n):
        if (n % x)==0:
            return false
    return true

def nthPrime ( n ):
    y = 0
    z = 1
    while y< n:
        z+=1
        if isPrime( z ):
            y+=1
    return z 
```

但是我在“def”的第 9 行遇到了这个错误

```
SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T19:37:36.510

这是您的代码的固定版本，具有正确的缩进和使用`True`and `False`，not `true`and `false`：

```
def isPrime( n ):
    if n < 2 :
        return False
    for x in range(2,n):
        if (n % x)==0:
            return False
    return True

def nthPrime( n ):
    y = 0
    z = 1
    while y < n:
        z+=1
        if isPrime( z ):
            y+=1
    return z 
```

* * *

这是您的代码版本，它更符合 Python 的[PEP 8 样式指南](http://www.python.org/dev/peps/pep-0008/)：

```
def isPrime(n):
    if n < 2:
        return False
    for x in range(2, n):
        if (n % x) == 0:
            return False
    return True

def nthPrime(n):
    y = 0
    z = 1
    while y < n:
        z += 1
        if isPrime(z):
            y += 1
    return z 
```

我更喜欢第二段代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T19:35:13.837

你需要缩进python，像这样：

```
def nthPrime(n):
    y = 0 
```

不像这样：

```
def nthPrime(n):
y = 0 
```

[在此处](http://docs.python.org/release/2.5.1/ref/indentation.html)阅读有关它的更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-08T23:14:59.670

好的，所以这显然是一个超级菜鸟错误（就像我现在一样），但问题是错误不在第 9 行（或任何你的 def 标签），但实际上是之前的行。

我的是缺少端括号。- 这家伙的案子`false`应该是这样的`False`

# c - 如何使用C中的基本变换计算非奇异矩阵（n * n）的行列式？

> ID：11819433
> 
> 赞同：0
> 
> 时间：2012-08-05T19:33:04.573
> 
> 标签：c, matrix

我想使用基本变换将我的矩阵转换为上三角矩阵（或下三角矩阵），然后将对角线元素相乘以找到给定非奇异矩阵的行列式。我是 c 编程的初学者，并编写了以下代码来计算非奇异矩阵的行列式。代码是

```
 #include<stdio.h>
   #include<math.h>     
        void main()
        {
                int i,j,k,r;
                float mat[20][20],temp,diag=1;
                printf("enter the order of the square matrix\n\n");
                scanf("%d",&r);
                for(i=0;i<r;i++)
                {
                    for(j=0;j<r;j++)
                    {
                        printf("enter the (%d , %d)th entry",i+1,j+1);
                        scanf("%f",&mat[i][j]);
                    }
                }
                printf("The matrix we have entered is\n\n ");
                for(i=0;i<r;i++)
                {
                    for(j=0;j<r;j++)
                    {
                        printf("\t%f",mat[i][j]);

                    }
                 printf("\n");
                }
                for(i=0;i<r-1;i++)
                {
                    for(j=i+1;j<r;j++)
                    {
                        temp=mat[j][i]/mat[i][i];
                        for(k=0;k<r;k++)
                        {
                            mat[j][k]=mat[j][k]-temp*mat[i][k];
                        }
                    }
                }
              for(i=0;i<r;i++)
                {

                    diag=diag*mat[i][i];

                }
                printf("\n\nThe value of the determinant is %f",diag);
        } 
```

这适用于任何非奇异矩阵，除了将零作为其第 (1,1) 个元素（即第一个对角元素）的矩阵。我可以理解这是由于我的

```
 temp=mat[j][i]/mat[i][i]; 
```

代码。但是这段代码是计算行列式所必需的。所以必须有一些方法来改变程序，使其适用于任何非奇异矩阵。我怎样才能编辑我的程序来实现我的目的？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-17T17:47:36.817

我认为最好先找到上三角矩阵，然后找到行列式。您可能会发现此代码很有用：

```
#include<stdio.h>

int main(){
    float  matrix[10][10], ratio, det;
    int i, j, k, n;
    printf("Enter order of matrix: ");
    scanf("%d", &n);
    printf("Enter the matrix: \n");
    for(i = 0; i < n; i++){
        for(j = 0; j < n; j++){
            scanf("%f", &matrix[i][j]);
        }
    }
    /* Conversion of matrix to upper triangular */
    for(i = 0; i < n; i++){
        for(j = 0; j < n; j++){
            if(j>i){
                ratio = matrix[j][i]/matrix[i][i];
                for(k = 0; k < n; k++){
                    matrix[j][k] -= ratio * matrix[i][k];
                }
            }
        }
    }
    det = 1; //storage for determinant
    for(i = 0; i < n; i++)
        det *= matrix[i][i];
    printf("The determinant of matrix is: %.2f\n\n", det);
    return 0;
} 
```

取自[这里](http://easy-learn-c-language.blogspot.in/2013/02/numerical-methods-determinant-of-nxn.html)

# php - 使用 PHP 和 IIS (WebsitePanel) 对根文件夹的写入权限

> ID：11819434
> 
> 赞同：0
> 
> 时间：2012-08-05T19:33:11.480
> 
> 标签：php, iis, file-permissions, folder-permissions

我已经开始使用 WebsitePanel。当我在其中创建网站时，它会设置如下权限：

```
-> username
    -> domain.tld 
       -> wwwroot => Web Anonymous Account to Read(or write if you set) 
```

使用此权限设置，php 脚本（如 wordpress 更新）无法写入根文件夹（wwwroot）。但它只能写入像“wwwroot/subfolder/test.txt”这样的子文件夹。但它不能像“wwwroot/test.txt”那样写

实际上，在网站面板之前，我曾经这样设置权限：

```
 -> domain.tld Web Anonymous Account to "List Folder Content"
       -> wwwroot => Web Anonymous Account to Read(or write if you set) 
```

通过这种方式，php可以毫无问题地写入根文件夹和子文件夹。

websitePanel 的默认权限设置是否有任何 php/iis 设置？或者我可以更改网站面板的权限模板吗？因为有很多网站要添加到 websitePanel。而且我不想为每个域文件夹授予“列表文件夹内容”权限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T22:48:00.547

阅读这篇文章对你很有用

[http://koderguru.com/tutorials/phptutorials/permissiondenyiis.php](http://koderguru.com/tutorials/phptutorials/permissiondenyiis.php)

这是很多 PHP 程序员在开发 php 脚本或在 IIS/Windows 服务器中安装 php 脚本时经常遇到的问题。当您要安装第三方脚本（如 Wordpress、Joomla、Mambo 等）或要编写自己的缩略图脚本或其他需要 PHP 修改文件的文件处理脚本时，这是一个非常常见的问题。默认情况下，Windows 上的 IIS 授予文件/文件夹的读取权限，但不授予它们写入权限。为避免此问题，您必须为 IIS 上的文件/文件夹设置写权限。我将描述为 IIS 中的文件/文件夹分配写权限应采取的步骤。

在本教程中，我将讨论三种在 IIS 上为文件夹设置 wright 权限的方法

**1）在本地IIS中设置写权限**

**2) 使用FTP客户端设置在线服务器的写权限**

**3）使用CPanel在在线服务器中设置写权限**

**用于 Windows XP 的 IIS**

1) 双击桌面上的图标打开“我的电脑”。然后工具 -> 文件夹选项（Windows 2000 和 2003 不需要此步骤）

![在此处输入图像描述](../Images/8892032d37eccbfe499a023cde6f3089.png)

第 2 步）现在转到“查看”选项卡并取消选中“使用简单文件共享（推荐）”复选框。（Windows 2000 和 2003 不需要此步骤）

![在此处输入图像描述](../Images/12d33c25aa568db48e9033e5ddb1259f.png)

步骤 3) 现在打开 IIS "C:\Inetpub\wwwroot" 的根文件夹并选择根文件夹中的文件夹/文件（比如 Wordpress 文件夹），您要设置写入权限。右键单击文件夹并选择“属性”（弹出菜单中的最后一项）。

![在此处输入图像描述](../Images/0694291cc46bc838aafb506df007b932.png)

步骤 4) 现在打开“安全”选项卡。在这里，您将在列表中看到不同类型的用户，当您选择任何用户时，将出现该用户不同权限的复选框。您可以选中/取消选中授予/撤销该用户权限的框。分别选择“Internet Guest 帐户”和“启动 IIS 进程帐户”并检查读取、写入、执行权限。

![在此处输入图像描述](../Images/76bebfd84cd49d9eb98a6ab9e0177e11.png)

**通过 ftp 客户端设置权限（我在这里使用了 FileZile 客户端免费版）。**

步骤1）将filezilla连接到服务器。右键单击要分配权限的文件/文件夹。选择“文件属性”。

![在此处输入图像描述](../Images/3ae47bbe257fb447c9a915c22c4807e2.png)

步骤 2) 现在分配权限，如下图所示。

![在此处输入图像描述](../Images/3bf3fa60406ee644821b1b1801c70f8d.png)

**使用 Cpanel 设置权限**

步骤 1) 登录您的 Cpanel 帐户并转到“文件管理器”。

![在此处输入图像描述](../Images/dc8d1209bb9ef051a528fd8e2c77bec1.png)

步骤2）现在在左侧面板中选择要分配权限的文件/文件夹。在右侧面板中选择“更改权限”。

![在此处输入图像描述](../Images/eabc6d68e1c2a27cfb9600f1009dbfae.png)

步骤 3) 更改任务。

![在此处输入图像描述](../Images/5bea7077a84ffd14d3c192dd1daf0a5b.png)

因此，这就是您如何为 IIS 文件夹分配写入权限的过程。

# c# - BigInteger 如何在内部存储值？

> ID：11819436
> 
> 赞同：1
> 
> 时间：2012-08-05T19:33:15.270
> 
> 标签：c#, .net, biginteger

BigInteger 类有一个返回字节数组的方法。这是否表明该类在内部也使用字节数组来存储数字？

为了选择正确的数据类型来操作二进制数据，了解这一点很重要。例如，如果该类使用 Int64 数组，那么类似的数组将更有效地通过任何调用函数来操作原始数据。

例如，我正在调用 ToByteArray 方法来遍历字节以查找特定的二进制模式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T19:48:57.583

根据[参考资料](http://referencesource.microsoft.com/#System.Numerics/System/Numerics/BigInteger.cs)，它似乎将其信息存储`uint[]`为数据的 a 和符号的 int 。

```
namespace System.Numerics
{
    /// <summary>Represents an arbitrarily large signed integer.</summary>
    [Serializable]
    public struct BigInteger : IFormattable, IComparable, IComparable<BigInteger>, IEquatable<BigInteger>
    {

    // For values int.MinValue < n <= int.MaxValue, the value is stored in sign
    // and _bits is null. For all other values, sign is +1 or -1 and the bits are in _bits
    internal int _sign;
    internal uint[] _bits; 
```

这是它执行的代码`ToByteArray()`

```
 // Return the value of this BigInteger as a little-endian twos-complement
    // byte array, using the fewest number of bytes possible. If the value is zero,
    // return an array of one byte whose element is 0x00.
    public byte[] ToByteArray() {
        if (_bits == null && _sign == 0)
            return new byte[] { 0 };

        // We could probably make this more efficient by eliminating one of the passes.
        // The current code does one pass for uint array -> byte array conversion,
        // and then another pass to remove unneeded bytes at the top of the array.
        uint[] dwords;
        byte highByte;

        if (_bits == null) {
            dwords = new uint[] { (uint)_sign };
            highByte = (byte)((_sign < 0) ? 0xff : 0x00);
        }
        else if(_sign == -1) {
            dwords = (uint[])_bits.Clone();
            NumericsHelpers.DangerousMakeTwosComplement(dwords);  // mutates dwords
            highByte = 0xff;
        } else {
            dwords = _bits;
            highByte = 0x00;
        }

        byte[] bytes = new byte[checked(4 * dwords.Length)];
        int curByte = 0;
        uint dword;
        for (int i = 0; i < dwords.Length; i++) {
            dword = dwords[i];
            for (int j = 0; j < 4; j++) {
                bytes[curByte++] = (byte)(dword & 0xff);
                dword >>= 8;
            }
        }

        // find highest significant byte
        int msb;
        for (msb = bytes.Length - 1; msb > 0; msb--) {
            if (bytes[msb] != highByte) break;
        }
        // ensure high bit is 0 if positive, 1 if negative
        bool needExtraByte = (bytes[msb] & 0x80) != (highByte & 0x80);

        byte[] trimmedBytes = new byte[msb + 1 + (needExtraByte ? 1 : 0)];
        Array.Copy(bytes, trimmedBytes, msb + 1);

        if (needExtraByte) trimmedBytes[trimmedBytes.Length - 1] = highByte;
        return trimmedBytes;
    } 
```

# datatables - 更改列维度并缩短过长的名称 - 数据表

> ID：11819438
> 
> 赞同：2
> 
> 时间：2012-08-05T19:33:31.780
> 
> 标签：datatables

Datatables 是一个很棒的工具，但我不知道你怎么能做这两件事：

*   添加选项以手动更改列的大小，将它们向右或向左拖动以满足您的需要。
*   缩短过长的文本。但是使用 Datatable，文本会换行。然而，以这种方式，单元大小增加。*而我不想得到这种效果*。

这是这两件事如何与 Firefox 插件“Downloadthemall”完美集成的示例：

![在此处输入图像描述](../Images/d1cc4185568a145855bbd7fcdfeacb44.png)

* * *

![在此处输入图像描述](../Images/b1bc7c1de2d0b959cd9666c8c40231c0.png)

**我该怎么做？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T20:09:47.280

您可以使用此插件使表格列重新调整大小。只需在表初始化之前和包含数据表脚本之后获取脚本并包含它。然后，当您初始化数据表时，将 R 包含在您的 sDom 中，即：

```
"sDom": "Rlfrtip" 
```

您可以使用 css 控制包装的行为。向您的表中添加一个类。

```
<style>
.myClass td {white-space:nowrap; overflow:hidden;}
</style> 
```

# javascript - 检查 JavaScript 中是否存在关联数组

> ID：11819442
> 
> 赞同：4
> 
> 时间：2012-08-05T19:33:55.383
> 
> 标签：javascript, object, associative-array

我有与这里提出的相同的问题：[Checking if a key exists in a JavaScript object?](https://stackoverflow.com/questions/1098040/checking-if-an-associative-array-key-exists-in-javascript) .

但是，我正在寻找一种适用于包括 IE 6+ 在内的所有主要浏览器的方法。我看到的我喜欢的方法是使用`in`运算符，这是我以前从未见过的。

我在 google chrome 中尝试了一些不同的东西，似乎可以工作，但我想知道为什么不使用它而不是`in`操作符。

以供参考：

```
var data = {foo : "bar"};
console.log("foo" in data); // true
console.log("bar" in data); // false 
```

我的建议：

```
var data = {foo : "bar"};
console.log(!!data.foo); // true
console.log(!!data.bar); // false 
```

我的（第二种）方法有什么缺点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T20:07:53.607

您似乎正在寻找替代方案，因为您以前不了解该`in`运算符，并假设它不受所有主要浏览器的支持。事实上，所有主流浏览器*都*支持它，包括 IE6。来自[MSDN](http://msdn.microsoft.com/en-us/library/9k25hbz2%28v=vs.94%29.aspx)：

> 支持以下文档模式：Quirks、Internet Explorer 6 标准、Internet Explorer 7 标准、Internet Explorer 8 标准、Internet Explorer 9 标准、Internet Explorer 10 标准。

我将避免解释您提出的方法的缺点，因为另一个答案和评论已经这样做了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T20:08:38.137

我想指出，“in”运算符可能非常可疑。如果左侧是直接成员或右侧，或右侧原型的一部分，它将返回 true。我建议使用：.hasOwnProperty()

```
var obj = {foo: 0}
console.log(obj.hasOwnProperty('foo')) //true
console.log(obj.hasOwnProperty('bar')) //false 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T19:41:21.367

这样做的缺点是，如果您的属性值评估为虚假，则查找将失败，因为它正在测试值，而不是属性存在。毕竟，`!!`将一个值强制为其真值/假值。

```
var obj = {foo: 0};
alert(!!obj.foo); //false 
```

解决方案：

```
alert(typeof obj.foo != 'undefined') 
```

[编辑 - 回应下面关于 的评论`hasOwnProperty()`，这很好，但 OP 并没有只询问自己的属性，而且`hasOwnProperty()`，顾名思义，不会获取继承的属性，因此可能不适合 OP 的要求]

# ruby-on-rails-3 - 更改导航栏中链接的引导颜色

> ID：11819455
> 
> 赞同：0
> 
> 时间：2012-08-05T19:35:20.267
> 
> 标签：ruby-on-rails-3, twitter-bootstrap

在我的导航栏中，我有以下内容：

```
Signed in as <%= link_to current_user.name, edit_password_path(current_user) %> | 
<%= link_to "Sign out", destroy_user_session_path, :method => :delete %> 
```

但是链接的文本显示为黑色。我的引导程序中有以下内容并覆盖了 CSS 文件：

```
@navbarLinkColor: @grayLight;
@navbarLinkColorHover: @grayLight;
@navbarLinkColorActive: @grayLight; 
```

生成的 html 如下所示：

```
<p class="navbar-text pull-right">
   Signed in as <a href="/password/8/edit">Test</a> | 
   <a href="/users/sign_out" data-method="delete" rel="nofollow">Sign out</a>
</p> 
```

那么为什么它不起作用呢？我在我的应用程序中使用 Twitter Bootstrap Rails Gem。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T09:50:42.027

我在尝试更改引导程序中的所有链接颜色并在引导程序覆盖和 css 文件中设置这些似乎没有做任何事情时遇到了问题。在 custom.css 文件或主 css 文件的顶部引用这些变量对我有用。

因此，在像这样导入引导程序之前，将变量放在主样式表的顶部。

自定义.css

```
$linkColor:      #EDDA74;
$linkColorHover: #D4A017;

@import "bootstrap";

/* mixins, variables, etc. */ 
```

笔记。对于全局变量，我还必须将 @ 更改为 $。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T13:16:12.483

也许你有一个scaffold.css。删除它。Bootstrap 不能正常工作

# android - DialogFragment 在调用 startActivity() 时使 Activity 崩溃

> ID：11819460
> 
> 赞同：5
> 
> 时间：2012-08-05T19:36:34.443
> 
> 标签：android, android-intent, android-dialogfragment

我有一个`DialogFragment`应该很简单的，但它给了我一些特别是果冻豆的大问题。

该应用程序使用网络并弹出一个对话框，要求用户打开 WiFi 或取消然后关闭它。因此它扩展`DialogFragment`并创建视图为：

```
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {

    AlertDialog a = new AlertDialog.Builder(getActivity()).setCancelable(true).setTitle(R.string.dialog_title_disabled)
            .setMessage(R.string.dialog_text)
            .setPositiveButton(android.R.string.yes, new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {
                        dismiss();
                        Intent i = new Intent(Settings.ACTION_WIRELESS_SETTINGS);
                        i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                        startActivity(i);
                    }
            }).setNegativeButton(android.R.string.no, new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {
                        getActivity().finish();
                    }
            }).create();
    //a.setCanceledOnTouchOutside(false);
    return a;
} 
```

如果用户单击“是”，它会关闭对话框并打开“无线设置”活动。或者，如果用户单击“取消”，它只会关闭我的整个活动，但在 Jelly Bean 上，只要我单击“是”，它就会打开“设置”，但应用程序强制关闭并出现以下错误：

```
08-05 20:24:22.584: E/AndroidRuntime(2579): java.lang.IllegalStateException: Failure saving state: active SettingsDialogFragment{425dd550} has cleared index: -1
08-05 20:24:22.584: E/AndroidRuntime(2579):     at android.app.FragmentManagerImpl.saveAllState(FragmentManager.java:1653) 
```

有一些额外的日志记录显示了我布局上每个片段的保存状态，而应该是的数字 2`SettingsDialogFragment`只是一个`null`：

```
08-05 20:24:22.576: E/FragmentManager(2579):     #2: null 
```

我试图不忽略对话，但它以同样的方式崩溃。

我真的不确定这里发生了什么……有什么想法吗？

* * *

*编辑：*

活动代码（这是一个正常活动，因为应用程序针对 ICS 及更高版本）：

```
private void showDialog() {
    SettingsDialogFragment diag = (SettingsDialogFragment) getFragmentManager().findFragmentByTag(DIALOG_TAG);
    if (diag == null) {
        diag = new SettingsDialogFragment();
        diag.show(getFragmentManager(), DIALOG_TAG);
    } else {
        if (!diag.isVisible())
            diag.show(getFragmentManager(), DIALOG_TAG);
    }
}

private void dismissDialog() {
    SettingsDialogFragment diag = (SettingsDialogFragment) getFragmentManager().findFragmentByTag(DIALOG_TAG);
    if (diag != null)
        diag.dismiss();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T13:46:33.390

显然，谷歌将一些东西从 ICS 更改为 JB，并取消了我必须使用的对话：

```
dismiss();
getFragmentManager().beginTransaction().remove(frag).commit(); 
```

似乎 dialogFragment 并没有像以前那样从片段管理器 OnDismiss 中删除自己，如果有人愿意深入研究源代码并仔细检查社区，那就太好了。

谢谢。

# php - PHP 脚本未接收 JQuery 发送的 POST 变量

> ID：11819469
> 
> 赞同：0
> 
> 时间：2012-08-05T19:37:51.770
> 
> 标签：php, jquery, post

这是代码（已经导入了 JQuery）：

```
$.post("check.php", { username: usr },
    function(result)
    {
        //if the result is 1
        if(result == 1)
        {
            //show that the username is available
            $('#ck_usr_rslt').html(username + ' is Available');
        }
        else
        {
            //show that the username is NOT available
            $('#chk_usr_rslt').html(username + ' is not Available');
        }
}); 
```

问题是，我的 check.php 脚本不断抛出以下错误：

```
PHP Notice:  Undefined index: username in /Applications/MAMP/htdocs/RP/check.php on line 23 
```

（第 23 行是调用 $_POST['username'] 的时间）

那么有什么问题呢？可能是我正在运行的本地服务器有问题吗？还是只是我在 JavaScript 中的一些错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T19:44:39.943

似乎“usr”变量是空的（它是一个javascript而不是php），你能告诉我们如何检索那个变量吗？

# r - 为什么在 R 中的 AIC 期间行数会发生变化？如何确保不会发生这种情况？

> ID：11819472
> 
> 赞同：9
> 
> 时间：2012-08-05T19:38:17.453
> 
> 标签：r, linear-regression

我正在尝试使用 R 中的 AIC 找到一个最小的足够模型。我不断收到以下错误：步骤错误（模型）：正在使用的行数已更改：删除缺失值？

我的数据：

```
data<-structure(list(ID = c(1L, 2L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 
12L, 13L, 14L, 15L, 16L, 17L, 18L, 19L, 20L, 21L, 22L, 23L, 24L, 
25L, 27L, 28L, 29L, 30L, 31L, 33L, 34L, 35L, 37L, 38L, 39L, 40L, 
41L, 42L, 43L, 44L, 45L, 46L, 47L, 48L, 49L, 50L, 51L, 52L, 53L, 
54L, 55L, 56L, 57L, 58L, 59L, 60L, 61L, 62L, 63L, 64L, 65L, 66L, 
67L, 68L, 69L, 70L, 71L, 72L, 73L, 74L, 75L, 76L, 77L, 78L, 79L, 
80L, 81L, 82L, 83L, 84L, 85L, 86L, 87L, 88L, 89L, 90L, 91L, 92L, 
93L, 94L, 95L, 96L, 98L, 99L, 100L, 102L, 103L, 104L, 105L, 106L, 
107L, 108L, 109L, 111L, 112L, 113L, 114L, 115L, 116L, 117L, 118L, 
119L, 120L, 121L, 122L, 123L), QnWeight_initial = c(158L, 165L, 
137L, 129L, 155L, 150L, 119L, 153L, 137L, 153L, 158L, 163L, 159L, 
151L, 145L, 144L, 157L, 154L, 144L, 133L, 148L, 151L, 151L, 147L, 
158L, 178L, 164L, 166L, 134L, 151L, 151L, 157L, 148L, 142L, 127L, 
179L, 162L, 142L, 150L, 151L, 153L, 163L, 155L, 163L, 170L, 159L, 
151L, 149L, 154L, 129L, 165L, 128L, 160L, 162L, 134L, 145L, 147L, 
148L, 160L, 165L, 131L, 155L, 169L, 143L, 123L, 153L, 151L, 152L, 
146L, 157L, 154L, 144L, 163L, 153L, 141L, 133L, 167L, 151L, 155L, 
142L, 164L, 158L, 141L, 179L, 146L, 149L, 164L, 156L, 153L, 132L, 
159L, 139L, 139L, 163L, 160L, 155L, 163L, 154L, 135L, 152L, 149L, 
143L, 140L, 160L, 150L, 143L, 160L, 159L, 144L, 169L, 152L, 146L, 
152L, 148L, 138L, 152L), QnWeight_initial_mg = c(15.8, 16.5, 
13.7, 12.9, 15.5, 15, 11.9, 15.3, 13.7, 15.3, 15.8, 16.3, 15.9, 
15.1, 14.5, 14.4, 15.7, 15.4, 14.4, 13.3, 14.8, 15.1, 15.1, 14.7, 
15.8, 17.8, 16.4, 16.6, 13.4, 15.1, 15.1, 15.7, 14.8, 14.2, 12.7, 
17.9, 16.2, 14.2, 15, 15.1, 15.3, 16.3, 15.5, 16.3, 17, 15.9, 
15.1, 14.9, 15.4, 12.9, 16.5, 12.8, 16, 16.2, 13.4, 14.5, 14.7, 
14.8, 16, 16.5, 13.1, 15.5, 16.9, 14.3, 12.3, 15.3, 15.1, 15.2, 
14.6, 15.7, 15.4, 14.4, 16.3, 15.3, 14.1, 13.3, 16.7, 15.1, 15.5, 
14.2, 16.4, 15.8, 14.1, 17.9, 14.6, 14.9, 16.4, 15.6, 15.3, 13.2, 
15.9, 13.9, 13.9, 16.3, 16, 15.5, 16.3, 15.4, 13.5, 15.2, 14.9, 
14.3, 14, 16, 15, 14.3, 16, 15.9, 14.4, 16.9, 15.2, 14.6, 15.2, 
14.8, 13.8, 15.2), QnIdentityConfused = structure(c(1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L), .Label = " No", class = "factor"), Lost_queen_status = structure(c(1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L), .Label = " No", class = "factor"), Polygyne_status = structure(c(1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L), .Label = " No", class = "factor"), Match_mated_status = structure(c(NA, 
NA, NA, NA, 1L, NA, NA, NA, NA, 1L, NA, NA, NA, NA, NA, NA, NA, 
1L, NA, NA, NA, NA, NA, NA, NA, NA, NA, 1L, NA, 1L, NA, 1L, NA, 
NA, NA, NA, NA, 1L, NA, NA, NA, NA, NA, NA, NA, 1L, 1L, NA, 1L, 
1L, NA, NA, 1L, 1L, NA, NA, NA, NA, NA, 1L, NA, NA, NA, NA, NA, 
1L, NA, NA, NA, NA, NA, NA, NA, 1L, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 1L, NA, NA, NA, NA, NA, 
NA, NA, 1L, NA, NA, NA, NA, 1L, NA, NA, NA, NA, NA, NA, NA, 1L, 
NA, 1L, NA), .Label = " Yes", class = "factor"), Days_till_1st_Wrkr = c(NA, 
21L, NA, 26L, NA, 23L, 22L, 20L, 22L, NA, 20L, 21L, 20L, 20L, 
20L, 21L, NA, NA, 20L, 27L, 21L, 20L, 21L, 20L, 21L, 22L, 22L, 
NA, NA, NA, 22L, NA, 23L, 22L, 22L, NA, 20L, NA, 21L, NA, NA, 
20L, 20L, 20L, 20L, NA, NA, 23L, NA, NA, 23L, 23L, NA, NA, 21L, 
20L, 22L, NA, 21L, NA, 20L, 21L, 21L, 23L, 21L, NA, 22L, 20L, 
22L, 21L, 20L, 26L, 20L, NA, 20L, NA, 20L, 21L, 21L, 21L, 20L, 
21L, 21L, 21L, NA, 20L, 22L, 20L, NA, NA, 20L, NA, 20L, 20L, 
20L, 20L, 21L, 20L, NA, NA, 21L, 20L, 22L, 21L, NA, 22L, 21L, 
21L, 22L, 21L, 21L, NA, NA, 21L, NA, NA), Days_before_max_Wrkr_Eclosion = c(NA, 
12L, NA, 7L, NA, 10L, 11L, 13L, 11L, NA, 13L, 12L, 13L, 13L, 
13L, 12L, NA, NA, 13L, 6L, 12L, 13L, 12L, 13L, 12L, 11L, 11L, 
NA, NA, NA, 11L, NA, 10L, 11L, 11L, NA, 13L, NA, 12L, NA, NA, 
13L, 13L, 13L, 13L, NA, NA, 10L, NA, NA, 10L, 10L, NA, NA, 12L, 
13L, 11L, NA, 12L, NA, 13L, 12L, 12L, 10L, 12L, NA, 11L, 13L, 
11L, 12L, 13L, 7L, 13L, NA, 13L, NA, 13L, 12L, 12L, 12L, 13L, 
12L, 12L, 12L, NA, 13L, 11L, 13L, NA, NA, 13L, NA, 13L, 13L, 
13L, 13L, 12L, 13L, NA, NA, 12L, 13L, 11L, 12L, NA, 11L, 12L, 
12L, 11L, 12L, 12L, NA, NA, 12L, NA, NA), Wrkr_Eclosion_Bin = c(NA, 
3L, NA, 1L, NA, 1L, 2L, 3L, 2L, NA, 3L, 3L, 3L, 3L, 3L, 3L, NA, 
NA, 3L, 1L, 3L, 3L, 3L, 3L, 3L, 2L, 2L, NA, NA, NA, 2L, NA, 1L, 
2L, 2L, NA, 3L, NA, 3L, NA, NA, 3L, 3L, 3L, 3L, NA, NA, 1L, NA, 
NA, 1L, 1L, NA, NA, 3L, 3L, 2L, NA, 3L, NA, 3L, 3L, 3L, 1L, 3L, 
NA, 2L, 3L, 2L, 3L, 3L, 1L, 3L, NA, 3L, NA, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, NA, 3L, 2L, 3L, NA, NA, 3L, NA, 3L, 3L, 3L, 3L, 3L, 
3L, NA, NA, 3L, 3L, 2L, 3L, NA, 2L, 3L, 3L, 2L, 3L, 3L, NA, NA, 
3L, NA, NA), QnMass_At_Wrkr_Eclosion = c(NA, 83L, NA, 73L, NA, 
67L, 53L, 78L, 56L, NA, 73L, 90L, 81L, 69L, 66L, 73L, NA, NA, 
70L, 63L, 76L, 78L, 88L, 79L, 75L, 77L, 71L, NA, NA, NA, 86L, 
NA, 66L, 69L, 69L, NA, 88L, NA, 69L, NA, 93L, 71L, 82L, 70L, 
80L, NA, NA, 73L, NA, NA, 93L, 66L, NA, NA, 64L, 72L, 78L, NA, 
76L, NA, 60L, 87L, 89L, 62L, 62L, NA, 63L, 74L, 78L, 71L, 70L, 
118L, 76L, NA, 74L, NA, 96L, 108L, 77L, 68L, 79L, 70L, 67L, 85L, 
115L, 76L, 72L, 81L, 113L, NA, 89L, NA, 75L, 81L, 89L, 82L, 74L, 
81L, NA, NA, 74L, 73L, 80L, 84L, NA, 65L, 73L, 70L, 69L, 76L, 
74L, NA, NA, 80L, NA, NA), ColonyMass_At_Wrkr_Eclosion = c(NA, 
117L, NA, 53L, NA, 91L, 85L, 111L, 96L, NA, 112L, 90L, 112L, 
120L, 110L, 109L, NA, NA, 99L, 86L, 108L, 109L, 87L, 108L, 116L, 
137L, 108L, NA, NA, NA, 93L, NA, 96L, 98L, 87L, NA, 111L, NA, 
114L, NA, 11L, 123L, 113L, 130L, 134L, NA, NA, 96L, NA, NA, 15L, 
74L, NA, NA, 75L, 96L, 88L, NA, 122L, NA, 101L, 83L, 123L, 89L, 
85L, NA, 112L, 98L, 87L, 123L, 115L, 16L, 125L, NA, 91L, NA, 
85L, 76L, 122L, 95L, 113L, 116L, 102L, 132L, 11L, 105L, 112L, 
102L, 8L, NA, 113L, NA, 93L, 104L, 119L, 116L, 112L, 77L, NA, 
NA, 105L, 105L, 41L, 99L, NA, 113L, 120L, 130L, 98L, 122L, 118L, 
NA, NA, 97L, NA, NA), Adult_Wrkrs_At_Wrkr_Eclosion = c(NA, 9L, 
NA, 5L, NA, 1L, 7L, 3L, 2L, NA, 7L, 3L, 6L, 9L, 1L, 5L, NA, NA, 
2L, 1L, 5L, 4L, 6L, 6L, 4L, 5L, 1L, NA, NA, NA, 4L, NA, 3L, 3L, 
2L, NA, 4L, NA, 4L, NA, 0L, 5L, 4L, 3L, 14L, NA, NA, 1L, NA, 
NA, 2L, 1L, NA, NA, 3L, 7L, 2L, NA, 1L, NA, 3L, 7L, 1L, 1L, 5L, 
NA, 1L, 7L, 2L, 4L, 8L, 1L, 2L, NA, 6L, NA, 4L, 5L, 7L, 3L, 6L, 
7L, 5L, 13L, 0L, 4L, 6L, 2L, 0L, NA, 7L, NA, 6L, 1L, 3L, 7L, 
3L, 8L, NA, NA, 6L, 1L, 2L, 6L, NA, 2L, 4L, 4L, 4L, 3L, 7L, NA, 
NA, 5L, NA, NA), Mature_Brood_At_Wrkr_Eclosion = c(NA, 25L, NA, 
13L, NA, 17L, 18L, 27L, 28L, NA, 21L, 22L, 25L, 22L, 35L, 28L, 
NA, NA, 26L, 25L, 26L, 27L, 17L, 26L, 28L, 38L, 30L, NA, NA, 
NA, 22L, NA, 23L, 25L, 27L, NA, 26L, NA, 31L, NA, 2L, 26L, 22L, 
27L, 25L, NA, NA, 26L, NA, NA, 2L, 21L, NA, NA, 20L, 18L, 25L, 
NA, 35L, NA, 26L, 18L, 35L, 27L, 20L, NA, 31L, 22L, 17L, 30L, 
27L, 3L, 35L, NA, 21L, NA, 19L, 27L, 31L, 28L, 24L, 24L, 27L, 
28L, 6L, 27L, 29L, 28L, 1L, NA, 24L, NA, 18L, 31L, 31L, 23L, 
27L, 15L, NA, NA, 30L, 25L, 11L, 32L, NA, 29L, 34L, 36L, 26L, 
33L, 31L, NA, NA, 22L, NA, NA), Sum_wrkrsPlusBrood_At_Wrkr_Eclosion = c(0L, 
34L, 0L, 18L, 0L, 18L, 25L, 30L, 30L, 0L, 28L, 25L, 31L, 31L, 
36L, 33L, 0L, 0L, 28L, 26L, 31L, 31L, 23L, 32L, 32L, 43L, 31L, 
0L, 0L, 0L, 26L, 0L, 26L, 28L, 29L, 0L, 30L, 0L, 35L, 0L, 2L, 
31L, 26L, 30L, 39L, 0L, 0L, 27L, 0L, 0L, 4L, 22L, 0L, 0L, 23L, 
25L, 27L, 0L, 36L, 0L, 29L, 25L, 36L, 28L, 25L, 0L, 32L, 29L, 
19L, 34L, 35L, 4L, 37L, 0L, 27L, 0L, 23L, 32L, 38L, 31L, 30L, 
31L, 32L, 41L, 6L, 31L, 35L, 30L, 1L, 0L, 31L, 0L, 24L, 32L, 
34L, 30L, 30L, 23L, 0L, 0L, 36L, 26L, 13L, 38L, 0L, 31L, 38L, 
40L, 30L, 36L, 38L, 0L, 0L, 27L, 0L, 0L), QnMass_2wksLater = c(NA, 
124L, NA, NA, NA, 111L, NA, NA, NA, NA, NA, 98L, NA, NA, 107L, 
NA, NA, NA, 126L, NA, 115L, NA, NA, NA, 112L, 121L, NA, NA, NA, 
NA, 142L, NA, NA, 132L, NA, NA, NA, NA, NA, NA, NA, NA, NA, 122L, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 123L, 
NA, NA, NA, 89L, NA, NA, NA, 100L, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, 123L, NA, NA, 112L, NA, 126L, 112L, 105L, NA, NA, 129L, 
NA, NA, NA, NA, NA, NA, NA, 134L, NA, NA, NA, NA, NA, NA, 95L, 
85L, NA, NA, 115L, NA, NA, 119L, 122L, NA, NA, NA, 124L, NA, 
NA), QnMass_4wksLater = c(NA, 117L, NA, NA, NA, 88L, NA, NA, 
NA, NA, NA, 111L, NA, NA, 97L, NA, NA, NA, 125L, NA, 119L, NA, 
NA, NA, 104L, 127L, NA, NA, NA, NA, 125L, NA, NA, 126L, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, 106L, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, 104L, NA, NA, NA, 95L, NA, NA, NA, 
94L, NA, NA, NA, NA, NA, NA, NA, NA, NA, 113L, NA, NA, 120L, 
NA, 120L, 104L, 103L, NA, NA, 120L, NA, NA, NA, NA, NA, NA, NA, 
129L, NA, NA, NA, NA, NA, NA, 102L, 75L, NA, NA, 107L, NA, NA, 
137L, 99L, NA, NA, NA, 111L, NA, NA), ColonyMass_4wksLater = c(NA, 
571L, NA, NA, NA, 736L, NA, NA, NA, NA, NA, 438L, NA, NA, 711L, 
NA, NA, NA, 537L, NA, 844L, NA, NA, NA, 560L, 561L, NA, NA, NA, 
NA, 594L, NA, NA, 457L, NA, NA, NA, NA, NA, NA, NA, NA, NA, 714L, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 417L, 
NA, NA, NA, 701L, NA, NA, NA, 25L, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, 866L, NA, NA, 291L, NA, 659L, 354L, 743L, NA, NA, 696L, 
NA, NA, NA, NA, NA, NA, NA, 518L, NA, NA, NA, NA, NA, NA, 907L, 
27L, NA, NA, 625L, NA, NA, 957L, 804L, NA, NA, NA, 650L, NA, 
NA), Adult_Wrkr_4wksLater = c(NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), QnMass_2mnthsLater = c(NA, 
118L, NA, NA, NA, 86L, NA, NA, NA, NA, NA, 93L, NA, NA, 98L, 
NA, NA, NA, 105L, NA, 101L, NA, NA, NA, 100L, 111L, NA, NA, NA, 
NA, NA, NA, NA, 100L, NA, NA, NA, NA, NA, NA, NA, NA, NA, 99L, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 106L, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, 103L, NA, NA, NA, NA, 114L, 103L, 99L, NA, NA, 86L, NA, 102L, 
NA, NA, NA, NA, NA, 125L, NA, NA, NA, NA, NA, NA, 70L, NA, NA, 
NA, 98L, NA, NA, 111L, 115L, NA, NA, NA, NA, NA, NA), ColonyMass_2mnthsLater = c(NA, 
445L, NA, NA, NA, 1817L, NA, NA, NA, NA, NA, 2683L, NA, NA, 1775L, 
NA, NA, NA, 429L, NA, 77L, NA, NA, NA, 279L, 23L, NA, NA, NA, 
NA, NA, NA, NA, 111L, NA, NA, NA, NA, NA, NA, NA, NA, NA, 70L, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 71L, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, 249L, NA, NA, NA, NA, 1249L, 636L, 710L, NA, NA, 27L, NA, 
50L, NA, NA, NA, NA, NA, 531L, NA, NA, NA, NA, NA, NA, 63L, NA, 
NA, NA, 416L, NA, NA, 400L, 902L, NA, NA, NA, NA, NA, NA), V1Nonconservative = structure(c(1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, NA, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 
1L, NA, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, NA, 1L, 
1L, 1L, 1L, 2L, 1L, NA, NA, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, NA, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
NA, 1L, 1L), .Label = c("No", "Yes"), class = "factor"), V2Nonconservative = structure(c(2L, 
2L, 1L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 2L, 2L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, NA, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 
1L, NA, 1L, 1L, 1L, 1L, 2L, 2L, 1L, 1L, 1L, 1L, 2L, 1L, NA, 1L, 
1L, 1L, 1L, 2L, 1L, NA, NA, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 
1L, 2L, 1L, 1L, 1L, NA, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
NA, 1L, 1L), .Label = c("No", "Yes"), class = "factor"), V3Nonconservative = structure(c(1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, NA, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, NA, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, NA, 1L, 
1L, 1L, 2L, 1L, 1L, NA, NA, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, NA, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
NA, 2L, 1L), .Label = c("No", "Yes"), class = "factor"), Gp9cntrlNonconservative = structure(c(1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, NA, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, NA, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, NA, 1L, 
1L, 1L, 1L, 1L, 1L, NA, NA, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, NA, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
NA, 1L, 1L), .Label = "Yes", class = "factor"), V1 = structure(c(1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, NA, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, NA, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 
1L, NA, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 
1L, 1L, 1L, 2L, 1L, NA, NA, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, NA, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
NA, 1L, 1L), .Label = c("No", "Yes"), class = "factor"), V2 = structure(c(2L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, NA, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, NA, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 
1L, NA, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 
1L, 1L, 1L, 2L, 1L, NA, NA, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 
1L, 1L, 1L, 1L, 1L, NA, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
NA, 1L, 1L), .Label = c("No", "Yes"), class = "factor"), V3 = structure(c(1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, NA, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, NA, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, NA, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 2L, 1L, 1L, NA, NA, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, NA, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
NA, 2L, 1L), .Label = c("No", "Yes"), class = "factor"), Gp9cntrl = structure(c(1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, NA, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, NA, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, NA, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, NA, NA, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, NA, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
NA, 1L, 1L), .Label = "Yes", class = "factor"), IR = c(0.1617747, 
0.2898704, 0.480131, 0.9517305, 0.7081732, 0.7203002, 0.9173295, 
0.5015458, 0.7489186, 0.4672413, 0.2329974, 0.1283224, 0.1037859, 
0.3372611, 0.0686602, 0.2223887, 0.4985669, 0.2526208, 0.2808523, 
0.3160422, 0.3585694, 0.2895266, 0.2573105, 0.3509661, 0.2708949, 
0.2781856, 0.5290147, 0.0879555, 0.2356172, 0.2086934, 0.3675043, 
0.1121473, 0.19609, 0.1658575, 0.320782, 0.150549, 0.0650061, 
0.4318525, 0.1926485, 0.2751303, 0.3924438, 0.6618555, 0.3558781, 
0.1552525, 0.2323201, 0.2106574, 0.1507224, 0.2987708, 0.7546178, 
NA, 0.3175084, 0.4063618, 0.3910241, 0.4099034, 0.2768228, 0.4121248, 
0.3127472, 0.2195151, 0.1534949, 0.6100645, 0.358541, 0.4791841, 
0.5261724, 0.6689824, 0.438704, 0.4832887, 0.312482, 0.6114833, 
0.4164931, 0.3158829, 0.3357824, 0.3177672, 0.1476469, 0.246839, 
0.2243354, 0.2173642, 0.3469673, 0.2809981, 0.4637596, 0.1582555, 
0.6860244, 0.3079741, 0.1891029, 0.3180592, 0.0475673, 0.2628201, 
NA, 0.2719091, 0.3845972, 0.1224785, 0.2148636, 0.2241886, 0.2652855, 
0.0942216, 0.3210833, 0.0900333, 0.0696456, 0.2735982, 0.3406816, 
0.121216, 0.0950757, 0.29159, -0.0305616, -0.0081555, 0.053223, 
0.0357914, 0.0624308, 0.4233811, 0.1393026, 0.0919119, 0.0961197, 
0.2592455, 0.1489129, 0.1683235, 0.2655108, 0.0996865), SH = c(1.10417, 
1.03056, 0.73612, 0.09815, 0.49074, 0.46621, 0.17176, 0.73612, 
0.39259, 0.73612, 0.98149, 1.10417, 1.17778, 0.88334, 1.20232, 
1.00602, 0.63797, 0.98149, 0.95695, 0.90788, 0.83426, 0.98149, 
0.98149, 0.8588, 0.95695, 1.00602, 0.61343, 1.15325, 0.98149, 
1.07964, 0.80973, 1.20232, 1.07964, 1.07964, 0.95695, 1.0551, 
1.20232, 0.68704, 1.07964, 1.00602, 0.80973, 0.58889, 0.8588, 
1.10417, 1.07964, 0.98149, 1.12871, 0.93241, 0.39259, NA, 0.93241, 
0.8588, 0.8588, 0.80973, 0.98149, 0.80973, 0.90788, 1.03056, 
1.07964, 0.56436, 0.8588, 0.76065, 0.61343, 0.53982, 0.83426, 
0.71158, 0.90788, 0.56436, 0.73612, 0.8588, 0.88334, 0.88334, 
1.12871, 0.95695, 1.00602, 1.07964, 0.8588, 0.95695, 0.68704, 
1.07964, 0.46621, 0.90788, 1.0551, 0.8588, 1.22686, 0.95695, 
NA, 0.95695, 0.83426, 1.17778, 1.03056, 0.95695, 0.95695, 1.22686, 
0.88334, 1.15325, 1.17778, 1.00602, 0.83426, 1.17778, 1.2514, 
0.90788, 1.32501, 1.30047, 1.15325, 1.17778, 1.22686, 0.78519, 
1.07964, 1.17778, 1.12871, 0.95695, 1.0551, 1.03056, 0.95695, 
1.20232), HL = c(0.5055, 0.5553, 0.6738, 0.9606, 0.7857, 0.7666, 
0.9168, 0.679, 0.83, 0.66, 0.5354, 0.5003, 0.4477, 0.6148, 0.4645, 
0.5503, 0.71, 0.5504, 0.5663, 0.5932, 0.6013, 0.5694, 0.5622, 
0.6101, 0.5733, 0.5316, 0.7292, 0.4692, 0.5511, 0.4926, 0.6117, 
0.4632, 0.5304, 0.5104, 0.5723, 0.5061, 0.4353, 0.6641, 0.4926, 
0.5631, 0.6045, 0.7498, 0.602, 0.5204, 0.5147, 0.5582, 0.4867, 
0.5749, 0.8145, NA, 0.5693, 0.6012, 0.6315, 0.6432, 0.564, 0.6508, 
0.6197, 0.5368, 0.5176, 0.7587, 0.6324, 0.6373, 0.6977, 0.781, 
0.6408, 0.6727, 0.6003, 0.7477, 0.6452, 0.6008, 0.5984, 0.5913, 
0.49, 0.5747, 0.5246, 0.5233, 0.6189, 0.5882, 0.6793, 0.4947, 
0.7958, 0.6017, 0.5217, 0.6193, 0.4501, 0.5587, NA, 0.5497, 0.6168, 
0.495, 0.5283, 0.5401, 0.5752, 0.4637, 0.5892, 0.4993, 0.4534, 
0.5648, 0.6284, 0.4803, 0.4474, 0.614, 0.4175, 0.4268, 0.4509, 
0.4406, 0.4229, 0.6455, 0.5069, 0.4591, 0.5014, 0.5696, 0.5155, 
0.5246, 0.5822, 0.4771)), .Names = c("ID", "QnWeight_initial", 
"QnWeight_initial_mg", "QnIdentityConfused", "Lost_queen_status", 
"Polygyne_status", "Match_mated_status", "Days_till_1st_Wrkr", 
"Days_before_max_Wrkr_Eclosion", "Wrkr_Eclosion_Bin", "QnMass_At_Wrkr_Eclosion", 
"ColonyMass_At_Wrkr_Eclosion", "Adult_Wrkrs_At_Wrkr_Eclosion", 
"Mature_Brood_At_Wrkr_Eclosion", "Sum_wrkrsPlusBrood_At_Wrkr_Eclosion", 
"QnMass_2wksLater", "QnMass_4wksLater", "ColonyMass_4wksLater", 
"Adult_Wrkr_4wksLater", "QnMass_2mnthsLater", "ColonyMass_2mnthsLater", 
"V1Nonconservative", "V2Nonconservative", "V3Nonconservative", 
"Gp9cntrlNonconservative", "V1", "V2", "V3", "Gp9cntrl", "IR", 
"SH", "HL"), class = "data.frame", row.names = c(NA, -116L)) 
```

我的代码：

```
#NOTE: this will have to be adjusted to your particular directory
pipeline_dir='/Users/mf/Desktop/pipeline/'

response='QnWeight_initial'
predictors=c('HL','V1','V2')
predictor_filename='HL_V1_V2'

model <- lm(formula=as.formula(paste(paste(response,'~', sep=''),paste(predictors,collapse='+'), sep='')),data)
sink(file=paste(paste(pipeline_dir,'MAMs/', sep=''),paste(paste(paste(response, 'on', sep=''), predictor_filename, sep=''),'_fullModel.txt', sep='')))
print(summary(model))
sink()
sink(file=paste(paste(pipeline_dir,'MAMs/', sep=''),paste(paste(paste(response, 'on', sep=''), predictor_filename, sep=''),'.txt', sep='')))
step(model)
sink() 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-05T20:04:10.073

从警告部分`?step`：

> 模型拟合必须将模型应用于相同的数据集。如果存在缺失值并且使用 R 的默认值 na.action = na.omit，这可能是一个问题。我们建议您先删除缺失值。

所以你应该这样做：

```
no.na.data <- na.omit(data[c(predictors, response)])
model <- lm(formula=as.formula(paste(paste(response,'~', sep=''),
                                     paste(predictors,collapse='+'), sep='')),
            no.na.data)
step(model) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-09-19T10:23:31.320

我遇到了同样的问题，但我无法使用 Flodel 的解决方案，因为我无法访问原始数据，因为它是在函数内部计算的。我在这里给出了仅使用该模型的替代解决方案。设*data*为缺失值的数据集：

```
model1<-lm(response~., data=data)
model2<-lm(response~., data=model1$model)
step(model2) 
```

虽然这种方式浪费了一些计算机时间，但它的优点是只使用了模型中已经包含的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-03T08:31:43.983

即使我遇到了同样的问题。所以，我所做的是->

当你将数据分成两部分时，即训练数据和测试数据，确保你的第一步是这个 -->

`training_data = na.omit(training_data)`

完成此步骤后，仅继续前进，您将不会收到任何错误。

希望这能解决你的问题。

# oracle - 未声明标识符

> ID：11819473
> 
> 赞同：0
> 
> 时间：2012-08-05T19:38:18.983
> 
> 标签：oracle, plsql

我想在 SQL 中运行这段代码。它返回`identifier not declared patient_t`。我已经创建了 patient_t 类型/对象。我也尝试了 patient_t%rowtype

```
CREATE OR REPLACE PACKAGE PATIENT_DATA_SERVICES AS

function get_patient_id
( p_first_name in varchar2
, p_last_name  in varchar2
) return number
;

function get_patient_record
( p_patient_id in number
) return  patient_t
;

END PATIENT_DATA_SERVICES; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T21:31:23.747

删除 %rowtype。%rowtype 用于 TABLE 或 CURSOR。patient_t 是您创建的 TYPE。

```
function get_patient_record
( p_patient_id in number
) return  patient_t
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T20:29:35.907

您需要`patient_t`在 PL/SQL 包中声明类型：

```
CREATE OR REPLACE PACKAGE PATIENT_DATA_SERVICES AS

TYPE patient_t IS RECORD (id NUMBER(15), ...);

function get_patient_id
( p_first_name in varchar2
, p_last_name  in varchar2
) return number
;

function get_patient_record
( p_patient_id in number
) return  patient_t
;

END PATIENT_DATA_SERVICES; 
```

应该`patient_t`是数据库中的一个表，函数可以这样声明：

```
function get_patient_record (p_patient_id in number) return patient_t%ROWTYPE; 
```

# c# - 为什么我会收到空 引用异常？

> ID：11819478
> 
> 赞同：2
> 
> 时间：2012-08-05T19:38:50.047
> 
> 标签：c#, itextsharp

我正在使用 itextsharp 并尝试使用

```
PdfAction action = PdfAction.GotoLocalPage(1, pdfDest, writer); 
```

这是一个静态方法，但我总是得到这个错误

```
Server Error in '/' Application.
Object reference not set to an instance of an object.
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.NullReferenceException: Object reference not set to an instance of an object.

Source Error:

Line 178: 
Line 179:            //create a new action to send the document to our new destination.
Line 180:            PdfAction action = PdfAction.GotoLocalPage(1, pdfDest, writer);
Line 181:
Line 182:            //set the open action for our writer object

Source File: VoucherService.cs    Line: 180

Stack Trace:

[NullReferenceException: Object reference not set to an instance of an object.]
   iTextSharp.text.pdf.PdfWriter.GetPageReference(Int32 page) +326
   iTextSharp.text.pdf.PdfAction.GotoLocalPage(Int32 page, PdfDestination dest, PdfWriter writer) +49
   OnlineStudentPlanner.Framework.Services.VoucherService.SetupPdfDoc(String invoiceNumber, String logoPath, Document doc, MemoryStream memoryStream, PdfWriter writer, PdfPTable& table) in VoucherService.cs:180
   OnlineStudentPlanner.Framework.Services.VoucherService.GenerateVouchers(Int32 qty, Int32 voucherSize, String invoiceNumber, String logoPath, Int32 siteWideQty, IEnumerable`1 validDomains, Boolean siteWideVoucher) in VoucherService.cs:55
   OnlineStudentPlanner.WebUI.Areas.Admin.Controllers.HomeController.GenerateVouchers(GenerateVouchersVm vm) in Admin\Controllers\HomeController.cs:52
   lambda_method(Closure , ControllerBase , Object[] ) +163
   System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters) +17
   System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +208
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +27
   System.Web.Mvc.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12() +55
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) +263
   System.Web.Mvc.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14() +19
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +191
   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +343
   System.Web.Mvc.Controller.ExecuteCore() +116
   System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +97
   System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10
   System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +37
   System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +21
   System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +12
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
   System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +50
   System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8970061
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

这是我的代码

```
Document doc = new Document();
MemoryStream memoryStream = new MemoryStream();
PdfPTable table;

doc.Open();

PdfWriter writer = PdfWriter.GetInstance(doc, memoryStream);
writer.CloseStream = false;

SetupPdfDoc(invoiceNumber, logoPath, doc, memoryStream, writer, out table);

private  void SetupPdfDoc(string invoiceNumber, string logoPath, Document doc,  MemoryStream memoryStream, PdfWriter writer, out PdfPTable table)
{
    PdfDestination pdfDest = new PdfDestination(PdfDestination.XYZ, 0, doc.PageSize.Height, 0.75f);
    doc.AddTitle(String.Format("Vouchers-{0}", invoiceNumber));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T19:42:42.880

这是因为您试图在没有任何页面的空 PDF 文档上进行操作。

更改以下三行：

```
 doc.Open();

        PdfWriter writer = PdfWriter.GetInstance(doc, memoryStream);
        writer.CloseStream = false; 
```

到：

```
 PdfWriter writer = PdfWriter.GetInstance(doc, memoryStream);
        writer.CloseStream = false;
        doc.Open();
        doc.NewPage(); 
```

应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T19:45:30.303

您是否检查过 pdfDest 和 writer 是否不为空？它在以下行引发异常：

```
 iTextSharp.text.pdf.PdfWriter.GetPageReference(Int32 page) +326 
```

我会假设 writer 不为 null，因此 pdfDest 为 null 或 iTextSharp 中存在错误，并且传递错误的页面会导致异常（错误的异常，应该是 OutOfBounds 或其他东西）。

# objective-c - 将文件从 NSBundle 复制到 Documents 错误

> ID：11819487
> 
> 赞同：0
> 
> 时间：2012-08-05T19:39:37.970
> 
> 标签：objective-c, ios, ios5

我想将文件从应用程序 NSBundle 复制到 Documents 目录。

我怎么无法让这段代码工作：

```
-(NSString*)copyFile:(NSString*)name{

    NSString *storePath = [[[appDelegate applicationDocumentsDirectory] absoluteString] stringByAppendingPathComponent:name];

    NSError *error;

    NSFileManager *fileManager = [NSFileManager defaultManager];
    if (![fileManager fileExistsAtPath:storePath]) {
        NSString *defaultStorePath = [[NSBundle mainBundle] pathForResource:@"recordTest" ofType:@"caf"];
        if (defaultStorePath) {
            if ([fileManager fileExistsAtPath:defaultStorePath]) {
                [fileManager copyItemAtPath:defaultStorePath toPath:storePath error:&error];
                 NSLog(@"Error: %@)" , [error localizedDescription]);
            }

        }
    }
    return storePath;
} 
```

此打印操作无法完成。

更详细地说：

```
Error Domain=NSCocoaErrorDomain Code=4 "The operation couldn’t be completed. (Cocoa error 4.)" UserInfo=0xd629530 {NSUserStringVariant=(
    Copy
), NSFilePath=/var/mobile/Applications/D0183043-3FD2-4341-8DA4-E1D140E556F6/test.app/recordTest.caf, NSDestinationFilePath=file:/localhost/var/mobile/Applications/D0183043-3FD2-4641-8DA4-E5D140E556F6/Documents/recordTest.caf, NSUnderlyingError=0xd629970 "The operation couldn’t be completed. No such file or directory"} 
```

如果我在复制前检查，我不明白为什么没有这样的文件。

有任何想法吗 ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T19:57:36.470

您的目标是文件 URL，而不是文件路径。我总是使用：

```
NSString *documentsPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES).firstObject;
NSString *documentFullPath = [documentsFolder stringByAppendingPathComponent:name]; 
```

或者，在 Swift 2 中：

```
let documents = try! NSFileManager.defaultManager().URLForDirectory(.DocumentDirectory, inDomain: .UserDomainMask, appropriateForURL: nil, create: false)
let fileURL = documents.URLByAppendingPathComponent(name)
let documentsFullPath = fileURL.path 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T19:47:03.600

“storePath”似乎是一个 URL，而不是字符串“path”。添加一些日志 - 我怀疑您不想要“absoluteString”而是“path”。

# cocos2d-iphone - CCSprite 宽度问题

> ID：11819488
> 
> 赞同：0
> 
> 时间：2012-08-05T19:39:48.047
> 
> 标签：cocos2d-iphone, width, ccsprite

我正在开发一个实现健康栏的游戏。健康栏是一个 1px x 1px 的 CCSprite，然后使用我在[这里](https://stackoverflow.com/questions/9695540/scale-ccsprite-to-exact-size)找到的方法调整到我需要它的大小。使用这种方法可以很好地调整条的大小，但我希望根据剩余的生命值来改变条的颜色。这是我用来调整大小的方法。

```
-(void) takeDamage:(double)damage {

  currentHP -= damage;
  if( currentHP > 0) {
    double percentage = (double)currentHP/ (double)maxHP;
    double width = (self.contentSize.width * (3.0f/4.0f)) * percentage;
    if (percentage <= 0.2f) {
      CCTexture2D * tex = [[CCTextureCache sharedTextureCache] addImage:@"hp_red.png"];
      [bar setTexture:tex];
    } else if( percentage <= 0.45f) {
      CCTexture2D * tex = [[CCTextureCache sharedTextureCache] addImage:@"hp_yellow.png"];
      [bar setTexture:tex];
    }

    [self resizeSprite:bar toWidth:width toHeight:self.contentSize.height/15];

  }

  [nums setString:[NSString stringWithFormat:@"%i/%i", currentHP, maxHP]];

} 
```

我正在做的纹理更改是我从 SO 获得的其他东西，它改变了精灵的图像（到另一个 1px x 1px 的图像，除了它是黄色或红色而不是绿色）。问题是精灵只有一半是黄色的，另一半是黑色的，如下所示。

![截图](../Images/65624f38c05fb449bac61e18d9d9c7a4.png)

如果您查看“Abraxol”的健康栏，您会看到我所说的奇怪的半黄半黑效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T23:18:26.963

这看起来像是一个过滤问题，纹理被过滤为黑色，因为纹理中实际上只有 1 个像素，但 GPU 可能需要超过 1 个像素才能正确过滤纹理。

我会尝试使用 2x2 或 4x4 纹理。这完全有可能是最小纹理大小问题，无论如何，1x1 纹理是非常不寻常的。因为真的在那种情况下你根本不会使用纹理，而只是用 OpenGL ES（ccDrawLine 和 cocos2d 中的其他）绘制一条线或填充多边形。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T23:24:34.060

不确定，但黄色渐变为黑色的怪异可能与纹理大小为 1px x 1px 以及图像文件的生成方式有关。您是否尝试过使用更大的（例如 10 像素 x 10 像素的图像文件）来查看效果是否仍然存在。

有什么理由不使用健康栏大小的精灵吗？

在游戏 All Star Rally 中，在下图中，我为精灵健康栏使用了多个精灵，其中红色、绿色和黄色栏位于健康栏轮廓精灵的后面。我只是将锚点设置在精灵的左侧并操纵精灵的 scaleX 以将健康条的长度从 1.0 的值更改为 0.01 作为最小比例，然后我使精灵不可见并且不要尝试缩放比这更小的。

如果您想在健康条缩小时更改精灵的颜色或纹理，您可以将不同颜色的精灵分层并交换它们的可见性。

如果您使用的条与游戏中实际条的大小相同，则可以为精灵添加有趣的渐变或其他效果。

改变精灵颜色的另一个选择是使用 sprite.color 来操纵精灵的颜色。使用 color 属性，您可以减去 sprite 的红色、绿色和蓝色值以对其进行着色。如果您从一个白色精灵开始，那么您可以将其着色为红色，例如通过减去 sprite.color 中的所有绿色和蓝色分量。

![全明星拉力赛的健康、速度和力量条](../Images/0b5f017a9397fc7d5fb0674ed8717549.png)

# javascript - jQuery ajax帖子中的While循环

> ID：11819491
> 
> 赞同：0
> 
> 时间：2012-08-05T19:40:20.480
> 
> 标签：javascript, jquery, ajax

我想在 ajax .post jquery 函数中设置一个 while 循环。甚至可能吗？如果没有，是否有替代解决方案。用户输入数据是动态的，并且每个用户的数量都在变化。这是必须的。这是下面的代码。

```
$('#send').click(function() {
    var rad = 'radius_' + k + ' : ' + 'radius_' + k + ', ';
    var add = 'address_' + k + ' : ' + 'address_' + k + ', ';
    var latit = 'latitude_' + k + ' : ' + 'latitude_' + k + ', ';
    var longit = 'longitude_' + k + ' : ' + 'longitude_' + k + ', ';

    $.post('ajax_set_place.php', {
        while (k < f) {
            print(rad);
            print(add);
            print(latit);
            print(longit);  
            var k = k++;
        },
        user_id: user_id, 
        number_of_places: number_of_places 
    }, 
    function(){
        $('#message_sent').html('Message Sent!');
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T19:49:55.073

我认为这是不可能的，因为 data 参数是一个对象。

你到底想达到什么目的？

如果您试图继续将用户的数据发布到文件中，我会使用

```
// while loop here

function doPost(){
$.post(url, {dynamic: dynamicdata});
}
setInterval(doPost(), 100); 
```

...并在外部使用 while 循环动态更新参数。如果不。我不确定你想达到什么替代方案。我希望这个答案在某种程度上有所帮助。

哦，另一件事你可以通过做这样的事情来自定义数据的内容

```
var data = {name: dynamic};  // could insert while loop to edit what date is equal to. 
$.post('', data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T20:15:40.497

只是通过整理你的代码，你似乎`}`在结束时缺少 a 关闭你的`.post()`函数和 a`,`将 while 循环与其他元素分开。**为你修好它们**

另一方面，我认为你不能只发送一个`while`循环。将循环放入函数中并传递函数，显然您需要弄清楚如何以某种方式传递变量：

```
whileFn: function() {
    while (/*condition*/) {
        // do something here
    }
} 
```

# objective-c - 如何正确调用 setCenterCoordinate？

> ID：11819496
> 
> 赞同：-1
> 
> 时间：2012-08-05T19:40:33.027
> 
> 标签：objective-c, mkmapview, mapkit

我已经包含了 MapKit.h，并且我在对象 mapView 的 .h 文件中声明了原型，我正在使用它：

```
- (void)setCenterCoordinate:(CLLocationCoordinate2D)coordinate animated:(BOOL)animated; 
```

这就是我在我的 .m 中调用它的方式：

```
setCenterCoordinate:userLocation animated:FALSE; 
```

但它一直指向分号并说“预期']'”

如果有人可以让我知道我做错了什么，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T19:49:55.337

`[self setCenterCoordinate:userLocation animated:NO];`

在 Objective-C 中，您向对象发送消息以要求它们采取行动。您的声明`setCenterCoordinate:animated:`声明您的类响应该消息。

当您在方法实现中时，`self`始终是指向当前对象的指针。因此，上面的方法将该消息发布到当前对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T19:36:14.820

你有子类化 MKMapView 吗？如果不是，那么您需要告诉地图视图对象 setCenterCoordinate

```
[yourMapViewObject setCenterCoordinate:userLocation animated:FALSE]; 
```

如果你有，那么你不需要在你的 .h 中重新声明 setCenterCoordinate:animated:，你可能也不应该覆盖它。也许 .h 或 .m 顶部的更多代码将有助于澄清情况。

# javascript - setInterval 函数无法读取数组

> ID：11819497
> 
> 赞同：0
> 
> 时间：2012-08-05T19:40:49.747
> 
> 标签：javascript, node.js

> **可能重复：**
> [将正确的“this”上下文传递给 setTimeout 回调？](https://stackoverflow.com/questions/2130241/pass-correct-this-context-to-settimeout-callback)

我的小脚本有问题。

```
function test() {
    this.arr = new Array('a','b','c');
    this.func = function() {
        //Do something with this.arr. But it's undefined.. WHY???
    }
    this.Start = function() {
        this.Interval = setInterval(this.func, 1000);
    }
}

var Test = new test();
Test.Start(); 
```

当我尝试对“func”中的数组做任何事情时，它一直告诉我，数组是未定义的。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T19:50:26.653

您得到错误的`this`参考，请尝试：

```
function Test() {
  this.arr = new Array('a','b','c');
  this.func = function() {
    console.log(this.arr);
  };
  this.start = function() {
    var fun = this.func.bind(this);
    this.interval = setInterval(fun, 1000);
  };
}

var test = new Test();
test.start(); 
```

如果您需要更多信息，这篇文章`this`非常有趣：[函数调用和这个](http://yehudakatz.com/2011/08/11/understanding-javascript-function-invocation-and-this/)

另外，请注意我已经更改了某些符号的大小写。请记住，用作构造函数的函数以大写字母开头，变量和方法使用小写字母。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T19:53:18.847

定时器/间隔在全局范围内被调用，因此“this”设置为“window”。为了解决这个问题，您可以将第三个选项传递给 setInterval()，它将用作指定函数调用的参数。

```
function Test(){
    this.array = new Array('a','b','c');
    this.function = funct(){ }
    this.start = function(){
        this.Interval = setInterval(function(passedObj){
            passedObj.funct.call(passedObj);
        },1000,this);
    }
}
var testObj = new Test();
testObj.start(); 
```

阅读下面的评论，您会发现这是针对 nodejs 的。但是，这不适用于 IE8 和/或更早版本。

# vim - Vim 宏来获取 html 骨架？

> ID：11819500
> 
> 赞同：0
> 
> 时间：2012-08-05T19:41:20.007
> 
> 标签：vim, macros

我创建了一个宏来获取 html 文件中每一行的标签中的内容。我的宏是

```
j0yf\>f\>maGp\`alf< y$Gpo^[`a] 
```

每当我手动键入命令时它就可以工作，但是当我通过宏执行它时，我只会收到错误提示音，并且只有第一行的骨架被复制和粘贴。

顺便说一句，为了让它工作，每行的末尾必须有一个空格。我知道这不是很有效。我只是在试验，现在我很困惑，因为手动命令在宏不起作用时起作用。

### 编辑：

宏会忽略错误吗？这可能就是我可以手动获取骨架的原因，因为当我手动输入命令时，我会强制 vim 忽略错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T20:20:19.220

宏不会忽略错误。相反，它们会在遇到错误时停止。相反，该`:%norm`命令在遇到错误时只是移动到下一行，因此您可以尝试使用`:%norm j0yf>f>maGp`alf< y$Gpo^[`a]`.

# jquery - 添加 onClick 动作

> ID：11819502
> 
> 赞同：1
> 
> 时间：2012-08-05T19:41:22.767
> 
> 标签：jquery

当我单击按钮 A 时，我希望它修改`onClick`完成按钮的操作。

这是完成按钮：

```
<a href="#" class="btn" data-dismiss="modal" class="done-btn">Done</a> 
```

单击按钮 A 后，将执行此代码（弹出警报“A”）：

```
 <script type="text/javascript">
                $(document).ready(function() {
                    // make the items table reload when the dismiss button is clicked
                    alert("A");

                    $(".done-btn").on(function() {
                        alert("Done button clicked.")   
                    });
                }); 
            </script>; 
```

我也尝试过`click()`,`onclick =`和删除`$(document).ready`包装器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T19:43:15.257

您忘记指定**应**执行的操作。添加`'click'`到`on`函数中。

试试这个：

```
 <script type="text/javascript"> 
            $(document).ready(function() { 

                $(".done-btn").on('click', function() { 
                    alert("Done button clicked.")    
                }); 
            });  
            </script>; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T19:45:26.120

您的 html 中有两个 class=。将其简化为：

```
<a href="#" class="btn done-btn" data-dismiss="modal">Done</a> 
```

将您的 javascipt 更改为：

```
$(document).ready(function() { 
    $(".done-btn").click(function() { 
        alert("Done button clicked.")    
    }); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T19:45:17.527

试试这个：

```
$(".done-btn").click(function() {
    alert("Done button clicked.")   
}); 
```

并将 HTML 更改为：

```
<a href="#" data-dismiss="modal" class="btn done-btn">Done</a> 
```

# oracle - 内部错误：断言失败 [PGE 代码：90105]

> ID：11819503
> 
> 赞同：1
> 
> 时间：2012-08-05T19:41:40.120
> 
> 标签：oracle, oracle-pro-c

在尝试使用 Pro*C 编译器编译示例代码时，我得到：

```
c:\oracle\product\11.2.0\dbhome_1\BIN>proc iname=C:\Users\Selvaganapathy\Desktop
\pro-c\code\sample.pc

Pro*C/C++: Release 11.2.0.1.0 - Production on Mon Aug 6 01:00:59 2012

Copyright (c) 1982, 2009, Oracle and/or its affiliates.  All rights reserved.

System default option values taken from: C:\oracle\product\11.2.0\dbhome_1\preco
mp\admin\pcscfg.cfg

INTERNAL ERROR: Failed assertion [PGE Code=90105] 
```

请帮助设置编译器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T14:05:03.327

检查您是否有临时文件

```
C:\Users\Selvaganapathy\Desktop\pro-c\code\sample.c 
```

如果存在，请在删除此文件后重试或提供写入权限。

# objective-c - Objective-C - 创建指向 AppDelegate 的指针

> ID：11819510
> 
> 赞同：1
> 
> 时间：2012-08-05T19:42:53.360
> 
> 标签：objective-c, pointers, delegates

我有一个使用应用程序委托的类，特别是它有一个 NSUserDefaults 属性，该属性正在从我的类中更新。

在我的身份验证类实现文件中，我有：

```
+ (BOOL) checkUserDefaults {
    AppDelegate *appDelegate = [[UIApplication sharedApplication]delegate];

    if([appDelegate.session objectForKey:@"UserID"] != nil) {
        return TRUE;
    } else {
        return FALSE;
    }
}

+ (void) syncUserDefaults : (NSString *) UserID {
    AppDelegate *appDelegate = [[UIApplication sharedApplication]delegate];
    [appDelegate.session setObject:UserID forKey:@"UserID"];
    [appDelegate.session synchronize];
} 
```

我将如何存储这行代码：

```
AppDelegate *appDelegate = [[UIApplication sharedApplication]delegate]; 
```

作为一个全局的（对这个类），所以我可以写例如*[app.session setObject...]*？

我可以做一个功能：

```
+ (AppDelegate *) app
{
    return (AppDelegate *) [[UIApplication sharedApplication] delegate];
} 
```

并且做`[[self app].session setObject...]`，但是说如果我多次引用“app”函数，那将多次实例化 AppDelegate，不是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T19:51:13.847

这正是 Singleton 设计模式的用途，也是 Cocoa 框架的开发人员在可以跨应用程序访问对象但应该只实例化一次的地方使用它的原因。

`+[UIApplication sharedApplication]`是一种返回类的*现有*实例的方法`UIApplication`。在选择器中使用“共享”这个词是一个很好的提示，并且[文档`UIApplication`](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006728-CH3-SW1)清楚地表明它是一个单例：

> **共享应用程序**
> 
> 返回单例应用程序实例。
> 
> `+ (UIApplication *)sharedApplication`

这一切都意味着您可以放心，当您调用*n*次时，您不会实例化*n 个对象。*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T19:46:18.310

您正在获取对应用程序委托的引用并将其转换为您的特定类，您没有使用此代码实例化应用程序委托，因此不存在内存问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T19:46:56.627

不，您的 app 方法不会创建任何对象，它只是找到一个全局对象并返回指向其属性的指针。*

# hadoop - OutputCommitter 中的“提交任务输出”是什么意思

> ID：11819512
> 
> 赞同：3
> 
> 时间：2012-08-05T19:43:13.243
> 
> 标签：hadoop, mapreduce

我正在阅读有关 MapReduce 框架的 OutputCommitter 的文档，但我不明白这个特定的解释：
“提交任务输出。一旦任务完成，如果需要，任务将提交它的输出。”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T02:06:25.967

通常它只是意味着将输出从临时目录移动到指定的输出目录。通常，这两个目录都在 HDFS 上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-13T07:06:27.690

> 任务的提交阶段是可选的，并且可以通过从 needsTaskCommit() 返回 false 来禁用。这使框架不必为任务运行分布式提交协议，并且既不调用 commitTask() 也不调用 abortTask()。当任务没有写入输出时，FileOutputCommitter 将跳过提交阶段。
> 如果任务成功，则调用 commitTask()，在默认实现中，它将临时任务输出目录（其名称中包含任务尝试 ID 以避免任务尝试之间的冲突）移动到最终输出路径 ${mapred.output .dir}。

**注意：这段来自 hadoop-权威指南，可能对这个问题有用

# ruby - 如何微调地图功能并避免使用flatten

> ID：11819515
> 
> 赞同：1
> 
> 时间：2012-08-05T19:43:59.973
> 
> 标签：ruby, algorithm, functional-programming, permutation

我有以下代码列出给定字符串的所有可能排列。但由于我笨拙的列表（ruby 数组）操作和函数式编程知识有限，我不得不使用 flatten 来获取结果数组。这几乎是一个黑客。如何重构代码并避免使用（滥用）扁平化？

```
class String
  def remove_char_at(i)
    if i==0
      self[1..-1]
    else
      self[0..i-1] + self[i+1..-1]
    end
  end
end

def permute(str,prefix="")

  if str.size==0
    prefix
  else
    str.chars.each_with_index.map do |s,i|
        permute(str.remove_char_at(i),prefix+s)
    end.flatten
  end

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T23:30:41.457

```
class String
  def remove_char_at(i)
    if i==0
      self[1..-1]
    else
      self[0..i-1] + self[i+1..-1]
    end
  end
end 
```

`...`可以通过使用而不是重构如下`..`

```
class String
  def remove_char_at(i)
    self[0...i] + self[i+1..-1]
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T09:30:38.147

您可以在[SICP的第一章中找到有关函数式编程的有趣内容](http://www.amazon.co.uk/Structure-Interpretation-Computer-Electrical-Engineering/dp/0262510871/ref=sr_1_1?ie=UTF8&qid=1344245396&sr=8-1)

```
def permute2(str,prefix="")

  if str.size==0
    [prefix] #revise for concatenate with memo
  else
    str.chars.each_with_index.inject([]) do |memo, ary|
        s = ary[0]
        i = ary[1]
        memo += permute2(str.remove_char_at(i),prefix+s) #memoize
    end
  end

end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-05T19:54:32.947

Ruby 已经为您完成了许多艰苦的工作。要获取字符串 myString 的所有排列，请执行以下操作：

```
myString.split('').permutation.map(&:join).uniq 
```

这会将字符串组件拆分为一个数组；获取数组的所有排列；将它们重新连接成字符串；清除重复项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T21:31:30.040

我专门回答了*如何重构代码并避免使用（滥用）扁平化？*部分：

您可以使用1.9.2 中引入的[flat_map](http://apidock.com/ruby/Enumerable/flat_map)而不是`map`+ 。`flatten`

# scala - NoClassDefFoundError => ClassPath$JavaContext 使用播放开始时

> ID：11819518
> 
> 赞同：2
> 
> 时间：2012-08-05T19:44:13.190
> 
> 标签：scala, mongodb, playframework-2.0, casbah, salat

我制作了一个小的 Scala，Play2.0.2 应用程序。

`play run`当我使用命令时它工作正常，但是当我使用`play start`or`play clean compile stage + target/start`时，当我尝试使用 Casbah/Salat 进行 MongoDB 插入时，我得到以下堆栈：

```
[info] application - Can't create user 
java.lang.NoClassDefFoundError: scala/tools/nsc/util/ClassPath$JavaContext
    at scala.tools.scalap.scalax.rules.scalasig.ScalaSigParser$.scalaSigFromAttribute(ScalaSig.scala:35) ~[scalap-2.9.1.jar:na]
    at scala.tools.scalap.scalax.rules.scalasig.ScalaSigParser$.parse(ScalaSig.scala:38) ~[scalap-2.9.1.jar:na]
    at com.novus.salat.util.ScalaSigUtil$$anonfun$parseScalaSig0$2.apply(ScalaSigUtil.scala:73) ~[salat-util_2.9.1-0.0.8-SNAPSHOT.jar:0.0.8-SNAPSHOT]
    at com.novus.salat.util.ScalaSigUtil$$anonfun$parseScalaSig0$2.apply(ScalaSigUtil.scala:73) ~[salat-util_2.9.1-0.0.8-SNAPSHOT.jar:0.0.8-SNAPSHOT]
    at scala.Option.map(Option.scala:133) ~[scala-library.jar:na]
    at com.novus.salat.util.ScalaSigUtil$.parseScalaSig0(ScalaSigUtil.scala:73) ~[salat-util_2.9.1-0.0.8-SNAPSHOT.jar:0.0.8-SNAPSHOT]
Caused by: java.lang.ClassNotFoundException: scala.tools.nsc.util.ClassPath$JavaContext
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366) ~[na:1.7.0_01]
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355) ~[na:1.7.0_01]
    at java.security.AccessController.doPrivileged(Native Method) ~[na:1.7.0_01]
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354) ~[na:1.7.0_01]
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423) ~[na:1.7.0_01]
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308) ~[na:1.7.0_01] 
```

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T08:32:29.777

Scalap似乎需要Scala编译器，所以我添加了依赖项：“org.scala-lang”％“scala-compiler”％“2.9.1”

它工作正常。

这就引出了另一个问题： [为什么我在运行时需要 Scala 编译器？（具有 Scalap 依赖性的 Play2/Salat）](https://stackoverflow.com/questions/11824881/why-do-scalap-needs-scala-compiler)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-21T07:47:24.093

如果您在 context.xml 中使用 Spring MVC 时错过了异步支持配置，也可能会出现该问题

# ruby - 以编程方式获得完整的 Ruby 版本？

> ID：11819525
> 
> 赞同：39
> 
> 时间：2012-08-05T19:45:00.663
> 
> 标签：ruby, version

我知道可以通过`RUBY_VERSION`常量获得 Ruby 版本（例如“1.9.3”）。但是，我想知道如何确定确切的版本（例如：“1.9.3-p0”）。原因是早期版本的 Ruby 1.9.3 中存在一个未修复的错误，该错误在更高版本中运行，我希望我正在研究的 gem 中的一些代码来解决这个问题。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-08-05T19:48:17.487

也有一个`RUBY_PATCHLEVEL`常数。所以你可以得到你的版本字符串

```
"#{RUBY_VERSION}-p#{RUBY_PATCHLEVEL}" 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-04-07T23:58:55.183

至少在最新的 Ruby（2.3.0）中，还有一个`RUBY_DESCRIPTION`常量：

```
RUBY_DESCRIPTION
# => "ruby 2.3.0p0 (2015-12-25 revision 53290) [x86_64-linux]" 
```

# c++ - 如何一次读取一个数字并将其存储在数组中，跳过重复项？

> ID：11819532
> 
> 赞同：-6
> 
> 时间：2012-08-05T19:46:11.913
> 
> 标签：c++

我正在尝试将文件中的数字读入数组，丢弃重复项。例如，假设文件中有以下数字：

```
41 254 14 145 244 220 254 34 135 14 34 25 
```

虽然数字 34 在文件中出现了两次，但我只想在数组中存储一次。我该怎么做？

（已修复，但我想更好的术语是 64 位无符号整数）（使用 255 以上的数字）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T23:54:36.733

```
vector<int64_t> v;
copy(istream_iterator<int64_t>(cin), istream_iterator<int64_t>(), back_inserter(v)); 
set<int64_t> s;
vector<int64_t> ov; ov.reserve(v.size());
for( auto i = v.begin(); i != v.end(); ++i ) {
  if ( s.insert(v[i]).second ) 
     ov.push_back(v[i]);
}
// ov contains only unique numbers in the same order as the original input file. 
```

# c++ - 如何使用 Win32 api 将树视图项设置为可见/不可见

> ID：11819535
> 
> 赞同：2
> 
> 时间：2012-08-05T19:46:18.793
> 
> 标签：c++, c, winapi, treeview

我正在开发一个使用 WIN32 API 实现的项目，根据用户输入的一些数据，我需要在运行时让一些树视图项目可见/不可见。我做了一些工作，我发现我可以在树视图控件中添加/删除项目，但在任何地方都找不到如何设置项目可见或不可见（我发现了一些可以通过 MFC 完成的示例）。

我正在寻找将它们设置为可见/不可见的方法仅仅是因为当我添加一个项目时，它需要大量的后端计算，重复添加或删除会导致性能问题。我只想对每个树视图项进行一次计算。

我认为，如果无法设置树视图项目，则其中一种解决方案是简单地存在树视图项目的链接列表，并仅添加/删除那些需要可见/不可见的项目。

请告诉我是否可以将树视图项的状态设置为可见/不可见，如果可以，那么如何设置？如果不是，还有什么其他替代解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T23:10:20.953

标准的 TreeView 控件没有任何节点可见性的概念。添加/删除节点是唯一的选择。您将必须维护节点显示的数据的单独链表缓存（无论如何您都应该这样做，以便将 UI 逻辑与业务逻辑分开）。否则，您需要编写自己的 TreeView 控件，或者找到适合您需要的第三方实现。

# visual-c++ - 在 C++ 中将十进制数组转换为 2D 16 位字符数组

> ID：11819536
> 
> 赞同：0
> 
> 时间：2012-08-05T19:46:26.463
> 
> 标签：visual-c++

我想将十进制值转换为 16 位二进制值。我在另一个中使用了这个代码。

```
 #include <iostream>
      #include <bitset>

      int main() { 
      int x = 5;

      std::bitset<8> bin_x(x);
      std::cout << bin_x;

      return 0;
      } 
```

这是会员发布的代码。我想在循环中使用它并将 bin_x 的值存储在 16 个二维字符数组中。怎么做到呢？这就是我在做什么

```
 #include<iostream>
    using namespace std;
    #include <bitset>

     int main(){

int DecimalArray[] = {1,2,3,4,5,22,555,85,18,741}; //Create an array of decimal   numbers.

const int ArrayLen = sizeof(DecimalArray)/sizeof(int); //Store the size of the Decimal Array in a constant
 //strcpy(BinaryArray[i], "0000000000000000");
char BinaryArray[ArrayLen][16]; //Create an array of the same length for binary nos.

for(int i = 0; i<ArrayLen; i++)
{

    int CurrentDec = DecimalArray[i]; //Store current Decimal number in  CurrentDec variable

    strcpy(BinaryArray[i], "0000000000000000");

std::bitset<16> bin_x(CurrentDec);
cout<< "bin"<<bin_x<< endl;
for (int j = 0; j<15; j++)
         {
 bin_x=BinaryArray[i][j];

    cout<< "b1"<< BinaryArray[i] << endl;
     }

cout<<"The Decimal numbers and their Binary Equivalents are:\n\n";
cout<<"Decimal  Binary \n\n";
}

//Output both arrays
for( i = 0; i<ArrayLen; i++){
    cout<<DecimalArray[i]<<"\t "<<BinaryArray[i]<<endl;
}

cin.get();
return 0;

      }
       but i do not get the value in BinaryArray. kindly help me with it, its very urgent. Thanks! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T20:15:10.640

```
 #include<iostream>

           using namespace std;

           #include <bitset>

           int main(){

           int DecimalArray[] = {1,2,3,4,5,22,555,85,18,741}; //Create an array of decimal numbers.

            const int ArrayLen = sizeof(DecimalArray)/sizeof(int); //Store the size of the Decimal Array in a constant
           //strcpy(BinaryArray[i], "0000000000000000");
           char BinaryArray[ArrayLen][17]; //Create an array of the same length for binary nos.

           int i;

           for(i = 0; i<ArrayLen; i++)
            {

           int CurrentDec = DecimalArray[i]; //Store current Decimal number in       CurrentDec variable
           int index = 1, CurrentBin = 0;
           strcpy(BinaryArray[i], "0000000000000000");

           std::bitset<16> bin_x(CurrentDec);
           cout<< "bin"<<bin_x<< endl;
           for (int j = 0; j<16; j++)
           {
            if (bin_x[15-j])
               {

                 BinaryArray[i][j] = '1';
                  }

                  cout<< "b1"<< BinaryArray[i][j]<<endl ;

                    }

                     }

               cout<<"The Decimal numbers and their Binary Equivalents are:\n\n";
               cout<<"Decimal Binary \n\n";

               //Output both arrays
               for( i = 0; i<ArrayLen; i++){
               cout<<DecimalArray[i]<<"\t "<<BinaryArray[i]<<endl;
                }

               cin.get();
               return 0;

                } 
```

# java - 使用 Spring MVC 保存文件

> ID：11819541
> 
> 赞同：1
> 
> 时间：2012-08-05T19:47:36.573
> 
> 标签：java, spring, tomcat, spring-mvc

我正在从 Tomcat 容器中运行一个应用程序。用户单击一个链接，这最终会导致帮助类中的一个方法创建一个文件并将其保存到文件系统中。当此代码从单元测试/eclipse 运行时，它会将文件保存在应用程序根目录中，但是当从浏览器 / 在 Tomcat 中运行时，文件存储在 Tomcat 的 bin 目录中。

如何找到应用程序根目录以便我可以选择从那里保存文件的位置？

*   我需要以编程方式找到根，以便可以将其部署到运行 tomcat 的其他环境中。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T20:06:33.390

您不应该依赖 Tomcat 安装的位置，并且您的应用程序不应该写入 Tomcat 安装文件夹，永远不要。对于在生产环境中运行 Tomcat 的用户来说，Tomcat 安装很可能是不可写的。

因此，仅使用完整（绝对）路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T09:14:20.253

为避免文件权限问题，您可能希望使用 System.getProperty("user.home") 来使用用户的主目录。这样，它将在环境和操作系统中始终如一地工作。

# php - 更改 FOSUserBundle (Symfony) 中的默认登录页面

> ID：11819547
> 
> 赞同：4
> 
> 时间：2012-08-05T19:48:33.617
> 
> 标签：php, security, symfony, fosuserbundle

我认为这里的问题和答案都不应该很复杂。

我已经安装并配置了 FOSUserBundle 以在 Symfony2 的项目中使用。

我需要知道的是，当用户尝试访问禁止的 URL 时，我在哪里告诉安全性它必须重定向用户的哪个页面。

默认情况下是 /login。但我想把它改成更通用的/main。

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-05T20:08:54.713

它不是由 FOSUserBundle 完成的，而是 Symfony2 中的安全系统。您需要在 security.yml 中设置以下内容：

```
firewalls:
    main:
        form_login:
            default_target_path: /path/to/redirect/to 
```

编辑：

对不起，误读了这个问题。将 login_path 更改为 /admin，如下所示：

```
firewalls:
    main:
        form_login:
            login_path: /admin 
```

这会将您重定向到 /admin 页面 - 确保路径有效且不受防火墙保护。更多信息[在这里](http://symfony.com/doc/current/reference/configuration/security.html#the-login-form-and-process)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T20:25:02.507

好的

我知道了！

它更像是：

```
 main:
        form_login:
            login_path: /path/to/redirect/to 
```

再次感谢

# opengl-es - 在 MonoTouch 中，是否可以混合标准 Views 和 iPhoneOSGameViews？

> ID：11819548
> 
> 赞同：0
> 
> 时间：2012-08-05T19:48:38.107
> 
> 标签：opengl-es, xamarin.ios

是否可以拥有一个基于 a 的主菜单`DialogViewController`，并导航到基于 OpenGL-ES 的 iPhoneOSGameView ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T20:36:16.460

是的。您甚至可以添加多个 OpenGL ES 视图作为标准 UIView 的子视图。

尽管您特别询问 iPhoneOSGameView，但我建议您考虑从 iOS 5 开始提供的[**GLKView**](http://developer.apple.com/library/ios/#documentation/GLkit/Reference/GLKView_ClassReference/Reference/Reference.html)。它提供了一些与 iPhoneOSGameView 相同的功能以及一些围绕动画和 CADisplayLink 生成的样板。如果您愿意，它还可以让您选择在 Interface Builder 中创建视图。最后，它由 Apple 提供以填补类似的角色，并且可以说更符合未来的发展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T17:59:25.633

我做了相反的事情。事实上，[MonoGame](https://github.com/mono/MonoGame)支持`iPhoneOSGameView`作为主视图打开并在其顶部显示标准模式视图控制器。此功能位于 XNA 的 GamerServices 部分。

我认为您应该创建一个简单的示例，在游戏视图中打印纯色并尝试将其呈现在标准控制器之上。

我认为它会工作得很好。

# navigation - Orchard CMS 从模块创建添加菜单

> ID：11819549
> 
> 赞同：0
> 
> 时间：2012-08-05T19:48:46.313
> 
> 标签：navigation, orchardcms

我已经创建了一个模块（仍然需要做很多工作才能使其投入生产，但要继续前进）。

无论如何，我希望该模块（它基本上是一个 MVC 应用程序，来自 Skywalker 的果园网店）自动创建一个菜单项，用于查看模块中的页面。我首先尝试了 MainMenu.cs，但是无论我在代码中给出什么位置，这个条目都将条目创建为第一个条目。而且，如果您想将菜单放在另一个位置以首先编译新版本，那将是一件麻烦事。

所以现在我只是在仪表板中手动创建了一个指向 // 的项目。

有没有办法在模块内自动执行此操作，并以这样一种方式让客户可以在之后从管理模块更改位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T22:54:38.430

Well, menu entries are added from code, typically, so it would be trivial to use dynamic values in there rather than static ones. There are examples of that in Vandelay.Industries in fact. What's under the New menu is another.

# asp.net-mvc-3 - 如何使用 ajax 解决图像的附加问题

> ID：11819550
> 
> 赞同：0
> 
> 时间：2012-08-05T19:48:53.397
> 
> 标签：asp.net-mvc-3

我的第一个脚本提供给随机图像，如下所示

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<!-- include Cycle plugin -->
<script type="text/javascript" src="http://cloud.github.com/downloads/malsup/cycle/jquery.cycle.all.latest.js"></script>
<script type="text/javascript">
    var $t = jQuery.noConflict();
    $t(function () {
        $t('.slideshow').cycle({
            fx: 'fade' 
        });
    });
</script> 
```

当我添加一些这样的图像时它会起作用

```
<div class="news_area_left">
     <div class="slideshow" style="position: relative; ">
        <img src="../../banner_image/nemo.jpg" width="154px" height="108px"/>
  <img src="../../banner_image/up.jpg" width="154px" height="108px" />

</div>
    </div> 
```

但是当我添加我的第二个脚本时，它会得到你可以看到的图像

```
<script type="text/javascript">

    $(function () {

        $.ajax({
            type: "get", url: "Home/Oku", data: {}, dataType: "json",
            success: function (data) {

                for (var i = 0; i < data.length; i++) {

                   var newFirmDiv= $(' <img src="../../banner_image/' + data[i] + '" width="154px" height="108px"/>');
                    $(".slideshow").append(newFirmDiv);

                }
            }
        });
    });

</script> 
```

最后我尝试在我的“幻灯片 div”中使用我的动态图像，但效果不起作用

```
<div class="news_area_left">
     <div class="slideshow" style="position: relative; ">
       </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T20:11:50.187

您需要`$t('.slideshow').cycle`在动态插入图像后运行。您还需要附加到“幻灯片”类而不是“firmShowCase”类。

请参阅我创建的这个 jsFiddle [http://jsfiddle.net/davew9999/sgUeq/](http://jsfiddle.net/davew9999/sgUeq/)

**HTML**

```
<div class="news_area_left">
     <div class="slideshow" style="position: relative; ">
         <img src="http://activephilosophy.files.wordpress.com/2009/09/number1.jpg" width="154px" height="108px"/>
         <img src="http://www.clker.com/cliparts/h/Y/i/C/Y/W/red-rounded-square-with-number-2-md.png" width="154px" height="108px"/>
     </div>
</div>​ 
```

**JavaScript**

```
var $t = jQuery.noConflict();

var newFirmDiv = $t('<img src="http://www.mosamuse.com/wp-content/uploads/2012/05/number3.png" width="154px" height="108px"/>');
$t(".slideshow").append(newFirmDiv);

var anotherDiv = $t('<img src="http://2.bp.blogspot.com/-_A_8UYb0zIQ/Te5lpI9iZ3I/AAAAAAABgWk/sErDyHjEhPw/s1600/number-4.jpg" width="154px" height="108px"/>');
$t(".slideshow").append(anotherDiv);

$t(function() {
    $t('.slideshow').cycle({
        fx: 'fade'
    });
}); 
```

# django - 允许页面在 django 中只加载一次

> ID：11819551
> 
> 赞同：1
> 
> 时间：2012-08-05T19:48:56.690
> 
> 标签：django, http-referer

在我的 django 站点中，我有一个类似的页面： fubar.com/signup 发布到自身，然后在成功时重定向到 fubar.com/thank-you（例如当有人注册该站点时）。我想强制执行一个规则，以防止页面在该人返回时一遍又一遍地重新加载。我正在使用该页面来跟踪转换，我的数字已关闭，因为人们可以（并且确实）点击后退按钮返回该页面。

我考虑过检查 HttpRequest.META 中的 HTTP_REFERER 属性，但我不确定它的可靠性如何（如果它可以在不同的客户端中以不同的格式设置，或者根本不提供）。

有没有标准的方法来做到这一点？HTTP_REFERER 属性是否可靠？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:43:06.987

检查`HTTP_REFERER`非常可靠；检查您视图中的推荐人：

```
data = {
    'foo': 'bar',
    ...
}
if request.META.get('HTTP_REFERER', False) == reverse('signup'):
    data.update({'conversion': True})
render(request, 'thanks.html', data) 
```

然后在您的模板中使用该信息来确定是否检测到转化：

```
{% if conversion %}<script type='text/javascript'> // record conversion</script>{% endif %} 
```

虽然 Yuri 的回答更普遍正确（因为它确保每次转换将至少记录一次，只要用户在合理的时间范围内访问感谢页面），每次都会涉及到会话存储. 使用其中一个，或同时使用两者`;)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T10:47:25.030

一种可能的解决方案是在用户的会话中存储一个值。
假设每个页面都有单独的视图，这应该很容易。

成功注册后（重定向前），在注册视图中设置会话变量：

```
request.session['conversion'] = True 
```

然后将该值添加到感谢页面中的上下文中：

```
return direct_to_template(request, template_name, {
    'conversion': request.session.pop('conversion', False),
}) 
```

然后，您只需将转换跟踪代码包装在模板中的 if 语句中：

```
{% if conversion %}
    {# Conversion tracking script #}
{% endif %} 
```

我认为这比检查推荐人更可靠。

# facebook - Facebook 邀请到应用程序的 URL 而不是应用程序主页

> ID：11819555
> 
> 赞同：0
> 
> 时间：2012-08-05T19:49:02.883
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

您好我正在创建一个 Facebook 图片设计应用程序

当用户A去申请时，他可以参加小组比赛，并可以邀请其他朋友加入他的团队，以提高他的绘画水平。用户 A 将创建一个绘图，他邀请的朋友可以加入并改进他的绘图。

现在的问题是用户是否会向他的朋友发送正常的邀请（方法：apprequest）。facebook auth 后，他的朋友将如何重定向到他的绘图页面。

例如：用户的 A 绘图 URL：app.facebook.com/art/drawing/1

并分别为其他用户 app.facebook.com/art/drawing/2 app.facebook.com/art/drawing/3 .....等等..

用户的绘图页面位于控制器绘图/1 处，用于受邀用户的身份验证后可以重定向到 app.facebook.com/art/drawing/1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:24:35.320

当您发送请求时，您还可以随请求一起发送一些数据。发送请求后，Facebook 会将新请求的**id**返回给您的应用，您的应用可能会将其存储在本地数据库中。稍后，用户单击请求通知并被重定向到您应用的*画布*页面。当用户登陆您的*画布*页面时，您的应用可以...

*   使用**数据**参数
*   使用请求 ID

...确定向用户显示的内容。

例如，如果您决定使用**data**参数，只需在创建请求时将*绘图 id*作为数据参数传递，这样当您的用户登陆画布页面时，您的应用程序将显示正确的绘图。

# jquery - 使用 kineticjs 是像 jquery 一样触发事件的一种方式吗？

> ID：11819556
> 
> 赞同：1
> 
> 时间：2012-08-05T19:49:11.743
> 
> 标签：jquery, html5-canvas, kineticjs

我正在使用 kineticjs 来调整我在该页面上[看到的图像大小的脚本。](http://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images/)我的问题是，每次悬停图像时，都会重新绘制调整大小的锚点。

由于我`groups`用于图像，因此在调整图像大小后，我必须重新定位`group` `X`，`Y`因此当重新绘制锚点时，它们不会位于错误的位置（最后一个`x`和`y`位置`group`）。

可能有不止一种方法可以做到这一点，但我认为如果我只`dragmove`在该组上调用事件会更容易。

那么有没有办法像这个 jquery 一样在 kineticjs 上调用事件？

```
$('#id').trigger('click'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T02:16:42.780

您可以使用属于 Kinetic.Node 的模拟（）方法，因此可用于所有形状等...

```
group.simulate('dragmove') 
```

# objective-c - NSDictionary objectForKey 返回 nil 值

> ID：11819561
> 
> 赞同：4
> 
> 时间：2012-08-05T19:49:34.823
> 
> 标签：objective-c

我有一本这样的字典

```
123456
{
   "aaa"
   "aaav"
} 
```

但是当我尝试在`NSArray`使用中获取这些值时`objectForKey`，我得到了`nil`。

我使用的密钥是一个字符串。

代码 ：

```
NSArray *arr = [userdetails objectForKey:str] 
```

其中 userdetails 是一个`NSDictionary`，而 str 是`NSString`包含密钥的地方。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-05T19:51:00.720

`NSDictionary`不能包含`nil`对象。有两种可能获得`nil`回报`objectForKey`：

*   您的字典本身尚未初始化，或者
*   您指定的键没有对象。

请确保您已经创建了您的`NSDictionary`或兼容类的实例（例如，`NSMutableDictionary`），并在查询它的键之前将其分配给变量。然后确保有问题的键包含一个对象。

# c# - 存储来自 Metro Style 应用程序的通知

> ID：11819567
> 
> 赞同：1
> 
> 时间：2012-08-05T19:50:08.463
> 
> 标签：c#, push-notification, windows-8, microsoft-metro

我正在我的应用程序中实现通知，但我试图弄清楚我需要做什么才能知道频道是“更新”还是想要接收通知的“新”频道。

目前，每次运行应用程序时，它都会向我发送新频道和过期日期。当我想发送一个新通知时，我会假设每天都会为同一个人收到一个新通知。我需要一种仅将其发送给该人一次的方法。

我正在考虑使用 CoreApplication.Id 并存储它，但我不确定每个应用程序安装是否是唯一的。

任何想法如何去做？看了几篇文章，都只是展示如何推送一次，没有提到这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T20:38:15.483

您将需要在您的服务中添加另一个方面的标识。因为 URI 可以随时更改，并且可能会多次安装您的客户端，所以在尝试识别每个用户的唯一通知时会遇到一些挑战，而无需唯一地识别某些“用户”ID。

很可能，您想利用以下任一优势：

*   Microsoft 帐户，使用它来识别用户
*   让客户端应用程序从您的服务器获取客户端的“唯一”标识符（它可能只是一个 GUID），并将其保存在漫游设置中。这将与客户一起跨机器旅行。如果它在那里，显然它不是一个新客户。

请注意，如果用户在其所有机器/帐户上卸载您的应用程序，则漫游设置可能会消失。这是一个未定义的时间段。

# mongodb - MongoDB 中好的分片键

> ID：11819568
> 
> 赞同：2
> 
> 时间：2012-08-05T19:50:14.807
> 
> 标签：mongodb, sharding

从书缩放MongoDB：

> **一般情况**
> 
> 我们可以将其推广到分片键的公式：{coarseLocality : 1, search : 1}

所以我的问题是，这对吗？不应该是更好的写作的对立面吗？

同样来自书中：

> 这种模式仍在继续：所有内容都将始终添加到“最后一个”块中，这意味着所有内容都将添加到一个分片中。这个分片键为您提供了一个单一的、不可分发的热点。

所以说我的应用程序总是按 user_id 和集合中的最后一个条目进行搜索。

我应该拥有的最好的分片键是什么，这个：

```
{_id:1, user_id:1} 
```

或者：

```
{user_id:1,_id:1} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T03:05:29.260

Kristina（*Scaling MongoDB*的作者）写了一篇博文，其中有一些以游戏为幌子解释的示例策略：[如何选择分片密钥：纸牌游戏](http://www.kchodorow.com/blog/2011/01/04/how-to-choose-a-shard-key-the-card-game/)。

根据您的应用程序要求和用例[选择一个好的分片键](https://docs.mongodb.org/manual/tutorial/choose-a-shard-key/)有很多考虑因素。

顺序的一般建议`{coarseLocality : 1, search : 1}`是确保您的数据具有某些局部性以供阅读。

所以在你的情况下，你很可能想要：`{user_id:1,_id:1}`.

这将在查询时为相同的数据提供一些局部性`user_id`，理想情况下，您的常见查询将能够从单个分片中获取它们的数据。

相反的顺序可能会提供更好的写入分布（假设 _id 不是像默认[ObjectId](http://www.mongodb.org/display/DOCS/Object+IDs#ObjectIDs-The%5CidField)那样单调递增的键），但潜在的缺点是[可靠性](http://www.mongodb.org/display/DOCS/Choosing+a+Shard+Key#ChoosingaShardKey-Reliability)：如果您用于读取查询的数据分散在所有分片中，那么您将遇到检索问题（如果有）一个碎片掉了。

> 所以说我的应用程序总是按 user_id 和集合中的最后一个条目进行搜索。

如果您通常使用`user_id`（或不使用`_id`）搜索，这也会影响您对分片键和[索引优化](http://www.mongodb.org/display/DOCS/Choosing+a+Shard+Key#ChoosingaShardKey-Indexoptimization)的选择。要找到最后的条目，MongoDB 必须进行排序；您将希望在单个分片上进行排序，而不必从所有分片中收集数据并进行排序。如果您`_id`碰巧是基于日期的，那么作为分片键的一部分将有利于查找最后的条目。

# contacts - 从联系人应用程序中获取孩子姓名（关系）

> ID：11819571
> 
> 赞同：0
> 
> 时间：2012-08-05T19:50:38.397
> 
> 标签：contacts, google-apps-script

我正在使用 ContactsApp 提取联系人，并且可以获取电子邮件和名称，但无法找到如何从联系人中获取“Child”-namne。我尝试使用“CustomField”。我可以创建一个自定义字段并阅读它，但没有“儿童”字段。

如何从联系人中删除“Child”-namne？

Google Apps 脚本的测试代码

```
function doGet(e) {

  var GroupObject = ContactsApp.getContactGroup('TestGrupp');
  var ContactsTestGrupp = GroupObject.getContacts();
  var nrContacts = ContactsTestGrupp.length;

  var objectContact;
  var emailString;
  var GivenNameString;
  var FamilyNameString;
   for(var i = 0; i < nrContacts; i++) {
    objectContact = ContactsTestGrupp[i].getEmails();
    emailString = objectContact[0].getAddress();
    Logger.log(emailString);
    GivenNameString = ContactsTestGrupp[i].getGivenName();
    FamilyNameString = ContactsTestGrupp[i].getFamilyName();
      Logger.log(GivenNameString + ' ' + FamilyNameString);

    } 

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T16:27:49.120

我认为 Google 通讯录没有儿童姓名字段，至少我找不到。

# jquery - 如何防止 jquery 的 load() 函数覆盖进度条动画 gif？

> ID：11819575
> 
> 赞同：0
> 
> 时间：2012-08-05T19:51:26.227
> 
> 标签：jquery, jquery-masonry, jquery-load

我有一个充满照片的页面，每张照片都包含在一个带有`class="photo_wrap"`. 用户可以看到一定数量的照片。如果他们想看更多，那么他们点击“查看更多照片”按钮。当他们等待照片加载时，我会显示一个带有`id="spinner"`. 由于 masonry 插件和加载照片的一些问题，我已将 masonry 设置为 'reload' 在所有`img`的完全加载后。问题是，这也阻止了我的“进度条” gif 动画。我认为`$('div.photo_wrap img').load(...`只写照片`class="photo_wrap"`会受到影响，但它仍然会阻止我的“进度条”gif动画。为什么？

```
$(document).ready(function(){

    $("#spinner").show();

    $.ajax({
        type: "POST",
        url: 'my_script.php',
        dataType: 'html',
        success: function(data){
            var $container = $('#myPhotos');
            $container.append(data);

            $('div.photo_wrap img').load(function(){    
                $container.masonry( 'reload' );
            });

            $container.masonry( 'reload' );

            $("#spinner").hide();
        }
    });

    return false;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T01:47:40.490

`$('div.photo_wrap img').load(function(){...});`加载时将为*每个图像触发。*如果处理程序在 onload 事件发生之前就位，至少会这样。

为了在处理程序到位之前抑制图像加载，您可以按如下方式提供图像：

```
<img src="", data-src="myImages/....jpg"> 
```

因此，javascript 可以从`data-src`to复制 url `src`，并且在附加 onload 处理程序之前没有机会触发图像的加载事件：

```
function loadMoreImages() {
    $("#spinner").show();
    $.ajax({
        type: "POST",
        url: 'my_script.php',
        dataType: 'html',
        success: function(data){
            var $container = $('#myPhotos');
            $container.append(data);
            var promises = $('div.photo_wrap img').map(function() {
                var d = $.Deferred();
                $(this).attr("src", $(this).data('src'));//copy img url across
                $(this).load(d.resolve).error(d.resolve);//attach load and error handlers
                return d.promise();
            }).get();
            $.when.apply(this, promises).done(function() {
                $container.masonry('reload');
                $("#spinner").hide();
            });
        }
    });
} 
```

*部分测试*

您会看到，为了在*所有*图像加载完毕后做出响应，我们将一组 promise（每个 img 一个）传递给`jQuery.when`.

我不确定这会解决问题，但它是正确的。

# android - 寻找将数据存储在云中并从远程 android 应用程序访问的简单方法

> ID：11819576
> 
> 赞同：2
> 
> 时间：2012-08-05T19:51:32.227
> 
> 标签：android, sql, database

我对android是半新的。我一直在寻找整个互联网，但我找不到解决我的问题的方法。我正在为我朋友的乐队制作一个安卓应用程序。我怀疑他们每天获得的观看次数会超过几次。我只需要一种非常简单的方法来在云中存储三个或四个字符串并从我的 android 应用程序访问这些字符串。它根本不需要复杂。只是一个远程数据库。我查看了 GData、facebook，但设置起来都非常复杂。有人可以给我一个最好的免费解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T20:19:39.763

看看[Parse](https://www.parse.com/)，它非常易于使用，让您专注于您的 Android 应用程序，而不必创建和管理后端。

如果没有，可能首先在某个地方（在您自己的网站上）提供带有字符串的 JSON 编码文件，然后使用 HttpClient 将其发送到您的设备，对其进行解码并显示。周围应该有很多这样的例子（谷歌`android json httpclient`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T20:18:47.010

安装保管箱

创建一个 txt 文件来存储您的字符串。

将其保存在公用文件夹中。

右键单击 txt 文件并选择 dropbox-> 复制公共链接将该链接嵌入到您的应用程序中。

当您对该 url 发出 http 请求时，您将收到当时存储在文件中的任何文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T20:20:29.290

好吧，鉴于我更倾向于 .NET，我会亲自在[AppHarbor](https://appharbor.com/)中创建一个应用程序，其中包含一个提供此信息的 Web 服务。AppHarbor 免费提供 SQL Server、MySQL、RavenDB 以及其他几个免费实例。我认为拥有一个真正的后端而不是仅仅公开数据会给你更多的控制权。

但这只是我认为解决这个问题的数百种选择之一。同样可以通过谷歌应用程序中的应用程序、保管箱中的文件，甚至直接使用来自公开可用的谷歌电子表格的数据，甚至通过 Excel Services 及其 REST 接口的公共 excel 文件来完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T20:46:33.153

数据是集中的还是每个用户的？

## 集中定义

I recommend putting your data in a flat JSON format file or perhaps a single table MySQL database and spit it out in JSON via PHP all on a web server.

## Per Device

REST API. No shortcuts there. But one of your immediate problems will be some kind of unique user identifier, and that's where Facebook comes in. Honestly that SDK is quite straight forward, will take you about 4 hours first time around but could be much less.

# triggers - Salesforce：在相关列表上触发

> ID：11819579
> 
> 赞同：0
> 
> 时间：2012-08-05T19:52:11.653
> 
> 标签：triggers, salesforce

假设我有两个对象
1.Account- 标准对象[它有一个字段名称 Status_c*这是一个具有值 inprogress 和已关闭的选项列表]
2.Client* _c - 自定义对象[它也有相同的字段名称 Status__c 这是一个具有值的选项列表进行中并关闭]

并且 Client__c 具有对 Account name 的查找，这意味着 Account 具有 client object 的相关列表。

我的问题是：
我想写一个触发器，如果​​我将帐户状态设置为“关闭”，我不能将客户端状态设置为“关闭”，它应该在客户端对象上抛出错误消息，或者如果我将客户端状态设置为关闭，我可以不要将帐户状态设置为关闭，反之亦然。

任何人都可以帮我写一个触发器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T01:44:20.737

从概念上讲，我认为您要做的是在这两个对象上设置验证规则。您对 Client_ *c 的验证规则应该非常简单： TEXT(Status* _c) == 'Closed' && TEXT(Account_ *c.Status* _c) == 'Closed'

更有趣的部分是当您将帐户移至已关闭时，您如何处理确保没有任何相关项目已关闭。我倾向于在帐户上创建一个字段来跟踪相关项目的状态（复选框），它基本上告诉我更改我的状态是否有效。在这种情况下，验证规则变得非常简单。为了设置该布尔值，我最终在 Client__c 上使用了一个触发器，它基本上只是在批量修改客户端时抓取所有帐户（考虑到插入、更新插入和删除）：

```
SELECT Account__c.Id FROM Client__c WHERE Id =: Trigger.new OR Id =: Trigger.old 
```

然后创建一个包含所有帐户 ID 的集合（在本示例中为命名帐户），并运行查询以检索与这些 ID 相关的所有客户（在单个查询中以确保您不会达到 SOQL 限制）。

```
SELECT Account__c.Id, Status__c FROM Client__c WHERE Account__c.Id =: accounts 
```

根据此结果，您将遍历所有条目，将它们扔到由 Account Id 键入的 Map 中，其中值是客户列表。完成后，根据之前的“帐户”列表运行查询以获取所有帐户（这只是字符串列表，而不是实际帐户），随后遍历与该帐户关联的所有客户，如果客户标记为已关闭，您将相应地更新该帐户的元数据。如果没有客户关闭，则该帐户将被标记为此类。完成后，运行更新语句以更新您已修改的帐户列表。

# python - cxfreeze 找不到 libpyside-python

> ID：11819581
> 
> 赞同：2
> 
> 时间：2012-08-05T19:52:37.520
> 
> 标签：python, macos, pyside, cx-freeze

在 osx 10.7 和 pyside 1.1.0 上运行 cxfreeze 4.2.3 我得到：

复制 libpyside-python2.7.1.1.dylib -> build/exe.macosx-10.7-intel-2.7/libpyside-python2.7.1.1.dylib 错误：libpyside-python2.7.1.1.dylib：没有这样的文件或目录

它发现 PySide 模块在输出中没有问题：

复制 /Library/Python/2.7/site-packages/PySide/QtCore.so -> build/exe.macosx-10.7-intel-2.7/PySide.QtCore.so

使用 osx 的 python2.7 并且没有安装 MacPorts

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-30T19:22:37.663

发生这种情况是因为 cx_Freeze 从 otool -L 获取库的输出并将其用作从中复制库的绝对路径。

就我而言，这是一个问题，因为库位于每台机器上不同的虚拟环境中，然后 cx_Freeze 将无法找到库。您可以使用 install_name_tool 命令替换路径来解决此问题。我将项目的引导脚本设置为扫描所有 .so 或 .dylib 文件以查找虚拟环境中存在的库，并换出路径。

要手动执行此操作，请执行以下操作：

```
otool -L /Library/Python/2.7/site-packages/PySide/QtCore.so
install_name_tool -change "<path listed for libpyside above>" "<actual path to libpyside" /Library/Python/2.7/site-packages/PySide/QtCore.so 
```

对这样的全局文件要小心，你可能最好在 virtualenv 环境中拥有东西。

# ruby-on-rails - 使用 ruby on rails 安装 Susy 和 Compass

> ID：11819588
> 
> 赞同：3
> 
> 时间：2012-08-05T19:53:37.037
> 
> 标签：ruby-on-rails, rubygems, compass-sass, rubymine, susy-compass

我刚从 ruby​​ on rails 开始，我尝试做的第一件事就是安装 gems compass 和 susy。在弄清楚我需要将它们包含在 gemfile 中之后（我正在使用 RubyMine 并认为它会为我做这件事），当我尝试将 susy 导入到我的 css.scss 文件之一。

我有 ruby​​ 版本 1.9.3 (194)

和红宝石宝石版本 1.8.23

非常感谢我在我的包中需要哪些 gem（和版本），如何确保它们进入项目包中的任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T17:30:45.487

我在 Rails 3.2.7 上并像这样使用 Susy（和 Compass）。

```
##### Gemfile:
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'compass-rails'
  gem 'susy', git: "git://github.com/ericam/susy.git"
  gem 'uglifier', '>= 1.0.3'
end 
```

然后我有几个不同的css文件。application.css.scss、screen.css.scss 和 _base.scss.css。

**应用程序.css.scss**

```
#### application.css.scss:
@import "screen";
# Here you import your normal .scss files as well, like:
# @import "products"; 
```

**屏幕.css.scss**

```
#### screen.css.scss
// ---------------------------------------------------------------------------
// Imports
@import "compass";
@import "base";

/* -------------------------------------------------------------------------*/
/* Layout */
// Here you can add layout styling or whatever... :) 
```

**_base.css.scss**

```
// ---------------------------------------------------------------------------
// Imports

@import "susy";

// ---------------------------------------------------------------------------
// Basic Grid

$total-columns  : 12;
$column-width   : 4em;
$gutter-width   : 1em;
$grid-padding   : $gutter-width;

$show-grid-backgrounds  : true; 
```

就是这样。现在您可以在您在 application.css.scss 中导入的所有 scss 文件中使用 Susy。

我希望它可以帮助您入门。

# c# - 如何使用 myString.PadLeft？

> ID：11819591
> 
> 赞同：3
> 
> 时间：2012-08-05T19:53:51.403
> 
> 标签：c#, .net, winforms

为什么这不起作用？

```
string myString = "test";
int i = myString.Length; // i = 4
myString.PadLeft(5, '_'); // "myString" is should be equal to "_test", but it still "test"
i = myString.Length; // i = 4 (should be 5) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-05T19:55:43.600

大多数字符串方法不会改变字符串本身，而是返回新字符串，所以像这样使用它：

```
myString = myString.PadLeft(5, '_'); 
```

编辑：啊，是的，所有方法。我想到了不返回字符串并且以某种方式以不完全正确的句子结尾的方法。

# python - GPIO 引脚的 Python 代码正在重新调整错误 NameError: name 'n' is not defined

> ID：11819594
> 
> 赞同：2
> 
> 时间：2012-08-05T19:54:28.997
> 
> 标签：python, linux, raspberry-pi, gpio

我是 python 新手，我已经为我的 Raspberry Pi 上的 GPIO 引脚编写了一些代码，但是当我运行它时，我得到了这个：

```
user@pi:~$ sudo python change.py
Which GPIO do you whant to change? 13
Exit (y/n) n
Traceback (most recent call last):
  File "change.py", line 36, in <module>
    runGPIO()
  File "change.py", line 31, in runGPIO
    var_input2 = input ("Exit (y/n) ")
  File "<string>", line 1, in <module>
NameError: name 'n' is not defined 
```

因为我是 python 新手，所以我似乎找不到任何错误——即使有错误检查器，所以我有点困惑代码是......

```
import sys
import RPi.GPIO as GPIO
GPIO.setup(13, GPIO.OUT)
GPIO.setup(15, GPIO.OUT)
GPIO.setup(16, GPIO.OUT)
GPIO.output(13, True)
GPIO.output(15, True)
GPIO.output(16, True)
var13 = True
var15 = True
var16 = True
def runGPIO():
    var_input = input ("Which GPIO do you whant to change? ")
    if (var_input == 13) or (var_input == 2):
        if var13 == True:
            GPIO.output(13, False)
        else:
            GPIO.output(13, True)
    elif (var_input == 15) or (var_input == 3):
        if var15 == True:
            GPIO.output(15, False)
        else:
            GPIO.output(15, True)
    elif (var_input == 16) or (var_input == 4):
        if var16 == True:
            GPIO.output(16, False)
        else:
            GPIO.output(16, True)
    else:
        print "Please enter a valid GPIO pin number"
    var_input2 = input ("Exit (y/n) ")
    if var_input2 == "y":
        sys.exit()a
    else:
        return
runGPIO() 
```

代码集设置了 3 个 GPIO 引脚（将它们打开）。然后代码会在询问用户打开或关闭哪个 LED 之前关闭所有 LED

任何有关改进等的帮助建议将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T20:40:43.687

看起来您使用的是 Python 2.x，只要是 2.7.3 就可以了。

`raw_input("Enter (y/n): ")`在 2.x 版本中，如果您要抓取文本，则 需要使用。

`input()`在这个版本中将评估输入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T19:56:25.953

`input()`在 2.x 中，将其输入解释为 Python 代码。改为使用`raw_input()`。

# android - 如何在 Android 中的 ant 构建期间在主库项目和依赖库项目中使用相同的 jars 文件夹？

> ID：11819597
> 
> 赞同：0
> 
> 时间：2012-08-05T19:54:44.270
> 
> 标签：android, ant

我有一个包含一个主项目和两个依赖库项目的 Android 项目。

我想设置 ant 以在所有三个项目中重用外部库文件夹。

我试图在 ant.properties 中添加以下行： jar.libs.dir=../libs

但它没有任何效果，仍然会出现 jar 类未创建的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T04:48:19.113

最后，我将所有 jar 放入项目默认 libs 文件夹中。Android 正确地合并了库项目中的重复库。

PS：但是如果库项目位于单独的存储库中，这仍然很痛苦。

# wpf - 将生成的 ADO.Net DbContext 放入 View-Models 的最佳方法

> ID：11819598
> 
> 赞同：1
> 
> 时间：2012-08-05T19:55:00.997
> 
> 标签：wpf, entity-framework, mvvm, ado.net, dbcontext

我目前正在开发一个 WPF MVVM 应用程序，使用 MVVM Light 作为 MVVM 框架，实体框架作为 ORM，MS 同步框架作为将本地 Sql Compact DB 与在线 SQL 数据库同步的手段。该应用程序的范围也相当复杂，因为它旨在管理资产，计算该资产在其生命周期内的使用磨损。谢天谢地，我对所有这些技术都是新手，所以无知是幸福 :) 我找到了很多关于创建工作单元模式和存储库模式的教程和信息。但是，我正在使用新的 DbContext，我已经阅读过它已经使用了这两种模式。

我当前的问题与在实体框架中使用新的 DbContext 有关。我在 VS 中使用了 DbContext Generator 模板，所以我有一个 MyDbModelContainer。我直接从我的视图模型中使用了它，它为每个 VM 创建了一个上下文，我很确定这是一个坏主意。这是我的父/子类型数据输入场景的构造函数，我在此处构造容器，它们使用 MVVM Light 将选定项目的消息传递给子 VM。

```
 Private FatigueDbContext As FatigueModelContainer

Public Sub New()

    If IsInDesignMode = False Then

        FatigueDbContext = New FatigueModelContainer

        FatigueDbContext.CtMaterials.Load()
        CtMaterialsCollection = FatigueDbContext.CtMaterials.Local

        FatigueDbContext.CtManufactures.Load()
        CtManufactures = FatigueDbContext.CtManufactures.Local

    End If

End Sub 
```

我想在我的视图模型的生命周期内保持上下文打开，以便我可以使用 MyDbModelContainer.MyTable.Local 进行绑定。因此，虽然这正在工作，但我应该如何正确处理这个问题？

我的直觉是我需要以某种方式将自动生成的 MyDbModelContainer 包装到一些基本上只包含我需要在该 View-Model 上使用的表和函数的类中。

我没有使用 View-Model Locator，而是使用另一个 View-Model 来管理我的视图，这个想法来自[Rachel 的博客](https://rachel53461.wordpress.com/2011/12/18/navigation-with-mvvm-2/)，我喜欢这个概念。但是，这意味着我要预先创建所有视图模型，并预先初始化任何视图模型依赖项。我只有一个窗口，只是在它们留在内存中的视图模型之间切换，并且在切换到新的视图模型时我没有任何方法可以关闭我的 DbContext。

这是 Shell View-Model 的代码

```
Public Class ShellViewModel
Inherits ViewModelBase

#Region "Fields"

Private _changePageCommand As ICommand
Private _currentPageViewModel As IPageViewModel
Private _pageViewModels As List(Of IPageViewModel)

#End Region

Public Sub New()
    Dim DialogService As New ModalDialogService

    ' Add available pages
    PageViewModels.Add(New ImportJobDataViewModel(DialogService))
    PageViewModels.Add(New TestViewModel())
    PageViewModels.Add(New ReverseBendUtilityViewModel(DialogService))

    ' Set starting page
    CurrentPageViewModel = PageViewModels(0)
End Sub

#Region "Properties / Commands"

Public ReadOnly Property ChangePageCommand() As ICommand
    Get
        If _changePageCommand Is Nothing Then

            _changePageCommand = New RelayCommand(Of IPageViewModel)(Sub(param) ChangeViewModel(param))

        End If
        Return _changePageCommand
    End Get
End Property

Private Function IsViewPageModel(viewPageModel As IPageViewModel) As Boolean
    If TypeOf (viewPageModel) Is IPageViewModel Then
        Return True
    Else
        Return False
    End If
End Function

Public ReadOnly Property PageViewModels() As List(Of IPageViewModel)
    Get
        If _pageViewModels Is Nothing Then
            _pageViewModels = New List(Of IPageViewModel)()
        End If
        Return _pageViewModels
    End Get
End Property

Public Property CurrentPageViewModel() As IPageViewModel
    Get
        Return _currentPageViewModel
    End Get
    Set(value As IPageViewModel)
        If _currentPageViewModel IsNot value Then
            _currentPageViewModel = value
            RaisePropertyChanged(Function() CurrentPageViewModel)
        End If
    End Set
End Property

#End Region

#Region "Methods"

Private Sub ChangeViewModel(viewModel As IPageViewModel)
    If Not PageViewModels.Contains(viewModel) Then
        PageViewModels.Add(viewModel)
    End If

    CurrentPageViewModel = PageViewModels.FirstOrDefault(Function(vm) vm Is viewModel)
End Sub

#End Region

End Class 
```

所以总结一下......除了自动生成的 FatigueModelContainer 之外，我是否应该创建一些单独的类，该类会是什么样子，它只是一个类，还是基于业务操作的单独类. 比如添加、更新和删除制造的类，添加、更新和删除材料的类等。我应该在哪里将它插入到 VM 中？大概在 Shell-View-Model 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:12:25.590

您可以在不真正触及数据库上下文的情况下解决此问题。这个想法是，即使 VM 保留在内存中，您也只需要在 VM 的视图处于活动状态时初始化模型实例。

[在Caliburn.Micro: Screens and Conductors](http://caliburnmicro.codeplex.com/wikipage?title=Screens,%20Conductors%20and%20Composition)中有一个很好的解决方法，但它实际上并不特定于 mvvm 框架。

在最基本的情况下，正如 Rachel 在上面的评论中提到的那样，您可以扩展您`IPageViewModel`以包含处理 VM 的激活和停用逻辑的函数：激活逻辑在 VM 被激活时调用，停用逻辑在 VM 运行时调用停用。

对激活/停用的实际调用将在 的容器中进行`IPageViewModels`，例如：

```
Public Property CurrentPageViewModel() As IPageViewModel
    Get
        Return _currentPageViewModel
    End Get
    Set(value As IPageViewModel)
        If _currentPageViewModel Is value Then
            Return
        End If

        If _currentPageViewModel IsNot Nothing Then
            _currentPageViewModel.Deactivate()
        End If

        _currentPageViewModel = value

        If value IsNot Nothing Then
            value.Activate()
        End If    

        RaisePropertyChanged(Function() CurrentPageViewModel)
    End Set
End Property 
```

这样，您可以在停用页面时关闭数据库连接/分离 DbContext，并在激活页面时打开它。

# php - DOMDocument loadHTML 在服务器上无法正常工作

> ID：11819603
> 
> 赞同：29
> 
> 时间：2012-08-05T19:55:47.980
> 
> 标签：php, dom

我首先在 MAMP 上运行代码，它运行良好。但是当我尝试在另一台服务器上运行代码时，我收到了很多警告，例如：

> 警告：DOMDocument::loadHTML(): Unexpected end tag : head in Entity, line: 3349 in /cgihome/zhang1/html/cgi-bin/getPrice.php on line 17 警告: DOMDocument::loadHTML(): htmlParseStartTag: misplaced Entity 中的标记，第 17 行 /cgihome/zhang1/html/cgi-bin/getPrice.php 中的第 3350 行警告：DOMDocument::loadHTML(): Entity 中的标记标题无效，行：/cgihome/zhang1/html 中的 3517 /cgi-bin/getPrice.php 第 17 行

代码如下：

```
<?php
 $amazon = file_get_contents('http://www.amazon.com/blablabla');
 $doc = new DOMdocument();
 $doc->loadHTML($amazon);
 $doc->saveHTML();
 $price = $doc -> getElementById('actualPriceValue')->textContent;
 $ASIN = $doc -> getElementById('ASIN')->getAttribute('value');
?> 
```

有谁知道发生了什么？谢谢！

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2012-08-05T20:02:32.117

要禁用警告，您可以使用

```
libxml_use_internal_errors(true); 
```

这对我有用。[手动的](http://de.php.net/manual/function.libxml-use-internal-errors.php)

背景：您正在加载无效的 HTML。无效的 HTML 很常见，[`DOMDocument::loadHTML`](http://de.php.net/DOMDocument.loadHTML)可以纠正大部分问题，但默认情况下会发出警告。

[`libxml_use_internal_errors`](http://de.php.net/manual/function.libxml-use-internal-errors.php)你可以控制这种行为。在加载文档之前设置它：

```
libxml_use_internal_errors(true);
$doc->loadHTML($amazon); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-06-15T12:49:37.353

此**问题**与非**xHTML**代码有关

由于**DOMdocument** () 只能处理**干净的 XHTML**你需要清理你的代码

Php 有一个可以很好地完成这项工作的扩展。称为整洁 [php.net/book.tidy](http://php.net/manual/en/book.tidy.php)

这可能很棘手，因为您可能需要在**php.ini中***启用*它

 **然后

```
$tidy_config = array( 
                     'clean' => true, 
                     'output-xhtml' => true, 
                     'show-body-only' => true, 
                     'wrap' => 0, 

                     ); 

$tidy = tidy_parse_string( $html, $tidy_config, 'UTF8'); 
$tidy->cleanRepair(); 
$doc = new DOMdocument();
$doc->loadHTML( (string) $tidy); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-12-18T00:41:47.667

您可以像这样隐藏警告：

```
@$doc->loadHTML($amazon); 
```**

# javascript - 下拉转换为单选按钮，不再触发特定功能

> ID：11819604
> 
> 赞同：2
> 
> 时间：2012-08-05T19:55:52.013
> 
> 标签：javascript, jquery, woocommerce

我正在构建现有的 woocommerce wordpress 扩展，并将产品变体（大小、颜色等）下拉菜单转换为单选框。棘手的是，当用户从下拉列表中选择一个选项时，它会触发一些通过 ajax 自动更新产品库存和价格的东西。

我用它来将输入转换为收音机（从[这里](https://stackoverflow.com/questions/2029267/jquery-convert-select-to-radio-buttons)）：

```
$('.variations select').each(function(i, select){
    var $select = jQuery(select);
    $select.find('option').each(function(j, option){
        var $option = jQuery(option);
        // Create a radio:
        var $radio = jQuery('<input type="radio" />');
        // Set name and value:
        $radio.attr('name', $select.attr('name')).attr('value', $option.val());
        // Set checked if the option was selected
        if ($option.attr('selected')) $radio.attr('checked', 'checked');
        // Insert radio before select box:
        $select.before($radio);
        $radio.wrap('<div class="vari-option fix" />');
        // Insert a label:
        $radio.before(
          $("<label />").attr('for', $select.attr('name')).text($option.text())
        );
    }); 
```

然后我用了这个

```
$(':radio').click(function(){
   $(this).parent().parent().find('label').removeClass('checked');
   $(this).siblings('label').addClass('checked');
   $choice = $(this).attr('value');
   $('.variations select option[value=' + $choice + ']').attr('selected',true);
}); 
```

So that when a radio is selected, it mirrors the event on the dropdown option. 这工作正常，但它不会触发产品信息的刷新。我的猜测是更改下拉选项的“选定”属性和物理单击同一选项之间存在差异。猜猜什么事件可能会触发我没有考虑到的 ajax 函数？还有一个理想情况下不涉及修改 woocommerce 原始代码的解决方案？我尝试在选择选项上使用 .click() ，但没有任何区别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T20:01:34.850

以编程方式更改元素的值不会触发`change`事件，我假设以编程`selected`方式在 an 上设置属性/属性`<option>`也不会触发`change`包含`<select>`元素的事件。

幸运的是，您可以使用 jQuery 以编程方式轻松触发该事件：

```
$('.variations select option[value=' + $choice + ']').attr('selected',true).parent().trigger('change'); 
```

该`.parent()`调用返回一个包含该`<select>`元素的 jQuery 对象，然后`.trigger('change')`触发绑定到该对象上的事件的任何事件处理程序`change`。

# android - 包含方法调用的同步块，这行得通吗？

> ID：11819605
> 
> 赞同：0
> 
> 时间：2012-08-05T19:55:55.750
> 
> 标签：android, arrays, synchronization, handler, runnable

下面的代码用于同步 myIntArray 是否合法？
它会阻止三个底部方法无序更改 myIntArray 吗？
我希望事情按延迟方法 1、延迟方法 2、方法 3 的顺序发生，而不是在前一个完成对 myIntArray 的更改之前运行而搞砸其中一个。
底部的 3 个方法声明是否需要同步关键字？
底部的 3 个方法是否需要包含 synchronized(myIntArray) 块？
我的同步块应该在 Runnable 周围而不是在它里面吗？
我是否需要通知、等待或加入命令？

```
 public class HelpPlease {

                public int myIntArray[] = new int[100];

                public void chooseSquare() {

                    ...
                    Handler handler=new Handler();
                    final Runnable r = new Runnable()
                    {
                        public void run() 
                        {   
                            synchronized(myIntArray) {
                                delayedMethod1();
                            }
                        }
                    };
                    handler.postDelayed(r, 1000);

                    ...

                    Handler handler2=new Handler();
                    final Runnable r2 = new Runnable()
                    {
                        public void run() 
                        {    
                            synchronized(myIntArray) {
                                delayedMethod2();
                            }
                        }
                    };
                    handler2.postDelayed(r2, 1000);

                    ...

                    synchronized(myIntArray) {
                        method3();
                    }
               }

               public void delayedMethod1() {
                    ...
                    change myIntArray;
                    otherMethodsABC();
               {

               public void delayedMethod2() {
                    ...
                    change myIntArray;
                    otherMethodsDEF();
               }

               public void method3() {
                    ...
                    change myIntArray;
                    otherMethodsGHI();
               }
           } 
```

更多细节：[处理程序/Runnable 延迟产生有时不同步的事件](https://stackoverflow.com/questions/11787523/handler-runnable-delays-producing-events-that-are-out-of-sync-sometimes)

编辑：

这有意义吗？运行一个线程等待它完成？不知道如何添加延迟，这就是重点。

```
 //Handler handler=new Handler();
                        final Runnable r = new Runnable()
                        {
                            public void run() 
                            {
                                delayedMethod();
                            }
                        };
                        //handler.postDelayed(r, COMPUTER_MOVE_DELAY);

                        ExecutorService es = Executors.newFixedThreadPool(1);

                        final Future f1 = es.submit(r);

                        try
                           {
                               f1.get();
                           }
                           catch (InterruptedException e)
                           {
                               throw new RuntimeException(e);
                           }
                           catch (ExecutionException e)
                           {
                               throw new RuntimeException(e);
                           } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T20:00:17.577

不要尝试对同步块执行此操作。它只会保证没有两个块会*同时*运行，而不是它们运行的​​顺序。您最好编写一个“父”可运行文件，以您想要的顺序执行延迟的方法。或者，您可以使用第一种方法，当它完成后，发布一个可运行的方法来运行第二种方法，等等，将它们链接在一起。

更具体地说，如果您想要延迟，然后让三种方法按顺序运行，我会这样编码：

```
public class HelpPlease {
    public int myIntArray[] = new int[100];
    Handler handler=new Handler();

    public void chooseSquare() {
        ...
        final Runnable r = new Runnable()
        {
            public void run() 
            {
                delayedMethod1();
                delayedMethod2();
                method3();
            }
        };
        handler.postDelayed(r, 1000);
    }

    public void delayedMethod1() {
        ...
        change myIntArray;
        otherMethodsABC();
    }

    public void delayedMethod2() {
        ...
        change myIntArray;
        otherMethodsDEF();
    }

    public void method3() {
        ...
        change myIntArray;
        otherMethodsGHI();
    }
} 
```

完全不需要同步。使用单个`Handler`来保证多次调用`chooseSquare()`将导致可运行文件的序列化执行是很重要的。

编辑：

根据您的最新评论，这是我将如何进行的。首先，拥有一个`Handler`可供所有操作调度代码访问的对象。要使用您的两个示例，可以按如下方式实现：

```
public void chooseSquare() {
    . . .
    if (point_scored) {
        makeSquaresGlow(list_of_squares);
        playSound(sound_to_play);
        handler.postDelayed(new Runnable() {
            public void run() {
                makeSquaresNotGlow(list_of_squares);
            }
        }, 1000L);
    }
    if (time_for_attack(purple)) {
        handler.postDelayed(new Runnable() {
            public void run() {
                launchAttack(purple);
            }
        }, 1000L);
    }
} 
```

假设`chooseSquare()`在事件线程上调用，一切（包括延迟的方法调用）也将在同一个线程上运行，因此不需要同步。可能存在竞争条件（`launchAttack`并且`makeSquaresNotGlow`将同时安排），但`handler`将一次执行一个。如果这些延迟动作的顺序很重要，您可以定义一个“元”动作`Runnable`，它接受一系列动作并在未来按规定的顺序执行它们。

# java - 正则表达式匹配数字和空格

> ID：11819606
> 
> 赞同：-2
> 
> 时间：2012-08-05T19:56:16.173
> 
> 标签：java, regex

我正在尝试匹配包含 1 到 3 位数字的字符串，

例子：

```
1
 2
123
  3 
```

这是我试过的，

```
[\s]?[0-9]{1,3}[\s]? 
```

这是匹配的，

```
123 ->a space after 123 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T20:20:24.703

你的问题不清楚，但似乎你正在寻找一个字符串

*   正好是 3 个字符长
*   仅包含数字或空格
*   至少包含一位数字

在这种情况下，正则表达式是`^(?=.*\d)[\d\s]{3}$`. 作为 Java 字符串：`"^(?=.*\\d)[\\d\\s]{3}$"`.

**解释：**

```
^         # Start of string
(?=.*\d)  # Assert that there is at least one digit in the string
[\d\s]{3} # Match 3 digits or whitespace characters
$         # End of string 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T19:59:46.030

这应该适合你

`^\\d{1,3}$`.

解释

```
"^" +     // Assert position at the beginning of the string
"\\d" +    // Match a single digit 0..9
"{1,3}" +   // Between one and 3 times, as many times as possible, giving back as needed (greedy)
"$"       // Assert position at the end of the string (or before the line break at the end of the string, if any) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T20:06:24.950

匹配最多 3 位数字、任意数量的前导空格且没有尾随空格的模式将是：`^\s*\d{1,3}$`.

这将匹配：

```
1
 2
123
  3 
```

但不会匹配“123”，末尾有一个空格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T19:58:19.247

你能在你的正则表达式引擎中使用单词边界元字符吗？试试这个：`\b\d{1,3}\b`

# php - 如何从 PHP 触发 Javascript 中的警报

> ID：11819608
> 
> 赞同：-1
> 
> 时间：2012-08-05T19:56:27.047
> 
> 标签：php, javascript

PHP新手在这里...

我试图从 PHP 触发 JavaScript 中的警报，但它似乎不起作用。：

```
if(isset($_POST['save-text'])){

        // get form data, making sure it is valid
        $submit_date = date('Y-m-d H:i:s');
        $content = mysql_real_escape_string(htmlspecialchars($_POST['editor']));

        $new_url = 'example.com/' . $key;
        echo "<script>alert('$new_url');</script>";

        // build query
        mysql_query("INSERT INTO `source`(`id`, `key`, `submit_date`, `ip`, `content`) VALUES (null, '$key','$submit_date','$ip','$content')")
        or die(mysql_error());

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T19:58:16.437

您不能在页面的任何位置插入 HTML 和 JavaScript；确保您在`<script>`标签有效的位置输出。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-05T20:02:40.083

你的报价是错误的：

```
echo "<script>alert('$new_url');</script>"; 
```

应该：

```
echo "<script>alert('" . $new_url . "');</script>"; 
```

# java - 连接池 C3P0 日志记录

> ID：11819610
> 
> 赞同：1
> 
> 时间：2012-08-05T19:56:41.277
> 
> 标签：java, spring, hibernate, connection, c3p0

我有一个使用 c3p0 作为连接池的 Web 应用程序。我们使用hibernate作为orm工具。最近，我们收到了连接超时异常。为了调试这些异常，我启用了 C3p0 的日志记录并在日志中获取了一些信息。任何人都可以帮助我完全理解它。

```
DEBUG 2012-08-05 14:43:52,590 [com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#0] com.mchange.v2.c3p0.stmt.GooGooStatementCache: checkinAll(): com.mchange.v2.c3p0.stmt.GlobalMaxOnlyStatementCache stats -- total size: 2; checked out: 0; num connections: 1; num keys: 2 
```

从上面，我可以观察到连接池的总大小为 2。签出的连接数为 0。这是对的吗？上面的 num_connections 和 num 键是什么？

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T23:54:05.800

您在引用的日志中看到的是语句缓存的快照，而不是连接池。在记录该消息时，有两个缓存的 PreparedStatement，它们属于单个 Connection。这两个语句都没有被签出/正在使用。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:03:26.257

异常可能是由于错误地定义了 C3P0 设置。确保链接到正确的 jar 文件 您的应用程序必须链接到“hibernate-c3p0*.jar”而不是“c3p0*.jar”。hibernate.cfg 文件必须`hibernate.connection.provider_class`定义属性才能使 c3p0 设置生效。下面是一个示例设置

```
<property name="hibernate.connection.provider_class"> org.hibernate.connection.C3P0ConnectionProvider </property>

<property name="hibernate.c3p0.min_size">5</property>
<property name="hibernate.c3p0.max_size">10</property>
<property name="hibernate.c3p0.timeout">300</property>
<property name="hibernate.c3p0.max_statements">50</property>
<property name="hibernate.c3p0.idle_test_period">3000</property> 
```

日志条目指定池中有 4 个连接，并且所有 4 个连接都可供应用程序使用。对数据库运行查询以列出所有活动连接将显示池连接。例如，在 Mysql 中，您可以运行“ `show processlist;`”来查看这些连接。

# object - 在 Coldfusion（使用 openBD）问题中合并两个对象

> ID：11819618
> 
> 赞同：1
> 
> 时间：2012-08-05T19:58:11.240
> 
> 标签：object, coldfusion, merge, openbd

***我有以下代码块：***

```
<cfset docs1 = StructNew() />
<cfset docs1['content'] = "I am" />
<cfset docs1['ida'] = "23" />
<cfset docs1['solrid'] = "23_solrid" />
<cfset docs1['title'] = "Aaaaa" />

<cfset docs2 = StructNew() />
<cfset docs2['content'] = "the most" />
<cfset docs2['ida'] = "1" />
<cfset docs2['solrid'] = "1_solrid" />
<cfset docs2['title'] = "Bbbb" />

<cfset docs3 = StructNew() />
<cfset docs3['content'] = "crap coder" />
<cfset docs3['ida'] = "7" />
<cfset docs3['solrid'] = "7_solrid" />
<cfset docs3['title'] = "Cccc" />

<cfset docs4 = StructNew() />
<cfset docs4['content'] = "in the whole universe!" />
<cfset docs4['ida'] = "39" />
<cfset docs4['solrid'] = "39_solrid" />
<cfset docs4['title'] = "Dddd" />

<cfscript> 
    doca = ArrayNew(); 
    ArrayAppend(doca, docs1); 
    ArrayAppend(doca, docs2); 
    ArrayAppend(doca, docs3); 
    ArrayAppend(doca, docs4);  
</cfscript>  

<cfset forsolr1 = StructNew()>
<cfset forsolr1['docs'] = doca>
<cfset forext1 = SerializeJson(forsolr1)>

<cfdump var="#forsolr1#" label="Struct1">
<cfoutput>
    #forext1#
</cfoutput>
<br /><br /><br />

<cfset docsh = StructNew() />
<cfset docsh['23_solrid'] = "I need" />
<cfset docsh['1_solrid'] = "to read" />
<cfset docsh['7_solrid'] = "a lot of" />
<cfset docsh['39_solrid'] = "programming books!" />

<cfset i = 1>
<cfset solrid = "solrid">
<cfset result = ArrayNew(1)>

<cfloop collection="#docsh#" item="key" >
  <cfset innerstruct = StructNew()>
  <cfset innerstruct['solrid'] = #key#>
  <cfset innerstruct['dochighlighted'] = #docsh[key]#>
  <cfset result[i] = innerstruct>
  <cfset i = i + 1>
</cfloop>

<cfset forsolr = StructNew()>
<cfset forsolr['docs'] = result>
<cfset forext = SerializeJson(forsolr)>

<cfdump var="#forsolr#" label="Struct2">
<cfoutput>
    #forext#
</cfoutput> 
```

***结果是两个对象***（结构数组的结构）***：***

*第一个对象*

```
{
   "docs":[
      {
         "content":"I am",
         "ida":"23",
         "solrid":"23_solrid",
         "title":"Aaaaa"
      },
      {
         "content":"the most",
         "ida":"1",
         "solrid":"1_solrid",
         "title":"Bbbb"
      },
      {
         "content":"crap coder",
         "ida":"7",
         "solrid":"7_solrid",
         "title":"Cccc"
      },
      {
         "content":"in the whole universe!",
         "ida":"39",
         "solrid":"39_solrid",
         "title":"Dddd"
      }
   ]
} 
```

*第二个对象*

```
{
   "docs":[
      {
         "solrid":"23_solrid",
         "dochighlighted":"I need"
      },
      {
         "solrid":"1_solrid",
         "dochighlighted":"to read"
      },
      {
         "solrid":"7_solrid",
         "dochighlighted":"a lot of"
      },
      {
         "solrid":"39_solrid",
         "dochighlighted":"programming books!"
      }
   ]
} 
```

**是否可以将这两个对象合并为一个（将第二个复制到第一个）：**

```
{
   "docs":[
      {
         "content":"I am",
         "ida":"23",
         "solrid":"23_solrid",
         "title":"Aaaaa",
         "dochighlighted":"I need"
      },
      {
         "content":"the most",
         "ida":"1",
         "solrid":"1_solrid",
         "title":"Bbbb",
         "dochighlighted":"to read"
      },
      {
         "content":"crap coder",
         "ida":"7",
         "solrid":"7_solrid",
         "title":"Cccc",
         "dochighlighted":"a lot of"
      },
      {
         "content":"in the whole universe!",
         "ida":"39",
         "solrid":"39_solrid",
         "title":"Dddd",
         "dochighlighted":"programming books!"
      }
   ]
} 
```

我试过 structAppend 函数没有结果。此函数不能附加深层嵌套元素。是否可以保留订单？原因是上述对象是搜索引擎的结果，所以保持原始顺序非常重要。是否可以通过键引用合并两个对象？我问的原因是第一个对象以特定顺序从搜索引擎中出现（注意 solrid），但第二个对象可能不是。例子：

```
 *First object*

{
   "docs":[
      {
         "content":"I am",
         "ida":"23",
         "solrid":"23_solrid",
         "title":"Aaaaa"
      },
      {
         "content":"the most",
         "ida":"1",
         "solrid":"1_solrid",
         "title":"Bbbb"
      },
      {
         "content":"crap coder",
         "ida":"7",
         "solrid":"7_solrid",
         "title":"Cccc"
      },
      {
         "content":"in the whole universe!",
         "ida":"39",
         "solrid":"39_solrid",
         "title":"Dddd"
      }
   ]
}

 *Second object*

{
   "docs":[
      {
         "solrid":"39_solrid",
         "dochighlighted":"programming books!"
      },
      {

         "solrid":"7_solrid",
         "dochighlighted":"a lot of"
      },
      {
         "solrid":"1_solrid",
         "dochighlighted":"to read"
      },
      {
         "solrid":"23_solrid",
         "dochighlighted":"I need"
      }
   ]
} 
```

**是否有可能实现与上述合并结果相同的结果？**

```
{
   "docs":[
      {
         "content":"I am",
         "ida":"23",
         "solrid":"23_solrid",
         "title":"Aaaaa",
         "dochighlighted":"I need"
      },
      {
         "content":"the most",
         "ida":"1",
         "solrid":"1_solrid",
         "title":"Bbbb",
         "dochighlighted":"to read"
      },
      {
         "content":"crap coder",
         "ida":"7",
         "solrid":"7_solrid",
         "title":"Cccc",
         "dochighlighted":"a lot of"
      },
      {
         "content":"in the whole universe!",
         "ida":"39",
         "solrid":"39_solrid",
         "title":"Dddd",
         "dochighlighted":"programming books!"
      }
   ]
} 
```

非常感谢，

带着荣誉，

汤姆

希腊

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T20:40:41.457

这应该让你走得很远：

```
<cffunction name="ArrayOfStructsMerge" returntype="array" access="public" output="yes">
  <cfargument name="left"  type="array"  required="yes">
  <cfargument name="right" type="array"  required="yes">
  <cfargument name="id"    type="string" required="yes">

  <cfset var result = Duplicate(arguments.left)>
  <cfset var element = "">
  <cfset var key = "">
  <cfset var currentId = "">
  <cfset var lookup = StructNew()>

  <cfloop array="#result#" index="element">
    <cfif IsStruct(element) and StructKeyExists(element, arguments.id)>
      <cfset currentId = element[arguments.id]>
      <cfset lookup[currentId] = element>
    </cfif>
  </cfloop>

  <cfloop array="#arguments.right#" index="element">
    <cfif IsStruct(element) and StructKeyExists(element, arguments.id)>
      <cfset currentId = element[arguments.id]>
      <cfif StructKeyExists(lookup, currentId)>
        <cfloop collection="#element#" item="key">
          <cfset lookup[currentId][key] = Duplicate(element[key])>
        </cfloop>
      <cfelse>
        <cfset ArrayAppend(result, Duplicate(element))>
      </cfif>
    </cfif>
  </cfloop>

  <cfreturn result>
</cffunction> 
```

它以非破坏性方式运行（不修改原始对象）。像这样称呼它：

```
<cfset result = ArrayOfStructsMerge(obj1.docs, obj2.docs, "solrid")>
<cfdump var="#result#"> 
```

* * *

```
<cfset a1 = [{id: 1, a: "a1"}, {id: 2, a: "a2"}, {id: 4, d: "d4"}]>
<cfset a2 = [{id: 1, a: "a1-new"}, {id: 2, b: "b2"}, {id: 3, c: "c3"}]>
<cfset a3 = ArrayOfStructsMerge(a1, a2, "id")> 
```

![ArrayOfStructsMerge() 的结果](../Images/6961c489b5b148d95a965adcc1e711a7.png)

# jquery - 如何在jQuery中选择id下的子元素

> ID：11819622
> 
> 赞同：52
> 
> 时间：2012-08-05T19:59:02.807
> 
> 标签：jquery, css-selectors

示例代码：

```
<div id='container'>
  <h1>heading 1</h1>
  <h2>heading 2</h2>
  <p>paragraph</p>
</div> 
```

我想要一个相当于这个 CSS 选择器的 jQuery 来选择`h1`下面的元素`div`：

```
#container h1 {} 
```

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-08-05T20:00:05.733

您可以简单地实现*完全相同的选择器*：

```
$('#container h1') 
```

它选择`h1`元素中找到的每个`#container`元素，或者：

```
$('#container > h1') 
```

它只选择那些`h1`以该`#container`元素为父元素的元素（*不是*祖父母或其他形式的祖先）。

或者，如果您愿意：

```
$('#container').find('h1') 
```

您还可以将其限制为特定`h1`元素：

```
$('#container h1:first') 
```

仅选择元素中的*第一个* 元素。`h1``#container`

参考：

*   [`find()`](http://api.jquery.com/find/).
*   [`:first`选择器](http://api.jquery.com/first-selector/)。
*   [jQuery 选择器](http://api.jquery.com/category/selectors/)。

# sql - SQL：如何根据同一表中其他列的值创建新列

> ID：11819624
> 
> 赞同：4
> 
> 时间：2012-08-05T19:59:31.460
> 
> 标签：sql, sql-server-2008, tsql, pivot

我有 2 张桌子，主要和单位。

主表：

```
Todate   Unit   CategoryID   Quantity
1/7/2012  1        S            300
1/7/2012  1        U            350
2/7/2012  2        S            220
3/7/2012  2        S             50
3/7/2012  2        U            330
4/7/2012  1        S            200
4/7/2012  1        U            180 
```

S = 销售，U = 升级

单位表：

```
UnitNum   UnitName
1         Measures
2         Performance 
```

我需要得到这个结果：

```
Todate   UnitNum   UnitName    Sales    Upgrades
1/7/2012    1      Measures     300       350
2/7/2012    2      Performance  220
3/7/2012    2      Performance   50       330
4/7/2012    1      Measures     200       180 
```

这意味着我需要创建 2 列 - 销售和升级，具体取决于 CategoryID 中的值，并且我需要它们位于同一行中。到目前为止我所拥有的是这个

```
select Todate, Main.Unit, UnitName,
case when CategoryID = 'S' then Quantity end as Sales,
case when CategoryID = 'U' then Quantity end as Upgrades
from Main join Units on Main.UnitNum = Units.UnitNum
group by  Todate, Main.Unit, UnitName 
```

它给了我 2 个新列，但它们位于两个单独的行中。

我真的很感激任何帮助解决这个问题！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T20:06:25.060

您只需要围绕`case`语句进行聚合查询。

```
select m.todate
     , m.unit
     , u.unitname
     , sum(case when m.categoryid = 'S' then quantity end ) as sales
     , sum(case when m.categoryid = 'U' then quantity end ) as upgrages
  from main m
  join units u
    on m.unit = u.unitnum
 group by m.todate, m.unit, u.unitname 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T20:27:56.053

你需要这样的东西：

```
SELECT
    Todate, m.Unit, UnitName,
    Sales = (SELECT SUM(Quantity)
             FROM dbo.Main m2 
             WHERE m.Todate = m2.Todate AND CategoryID = 'S'),
    Updates = (SELECT SUM(Quantity)
               FROM dbo.Main m2 
               WHERE m.Todate = m2.Todate AND CategoryID = 'U')
FROM
    dbo.Main m 
INNER join 
    dbo.Units u on m.Unit = u.UnitNum
GROUP BY  
    Todate, m.Unit, UnitName
ORDER BY  
    Todate, m.Unit, UnitName 
```

这似乎正在返回您正在寻找的输出：

![在此处输入图像描述](../Images/a05921bfd542961b86e40e0392f61285.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T07:08:53.620

您也可以为此使用[PIVOT ：](http://msdn.microsoft.com/en-us/library/ms177410.aspx "使用 PIVOT 和 UNPIVOT (SQL Server)")

```
WITH data AS (
  SELECT
    m.Todate,
    m.UnitNum,
    u.UnitName,
    Category = CASE m.CategoryID
                 WHEN 'S' THEN 'Sales'
                 WHEN 'U' THEN 'Upgrades'
               END,
    Quantity
  FROM Main m
  INNER JOIN Units u
  ON m.UnitNum = u.UnitNum
)
SELECT
  Todate,
  UnitNum,
  UnitName,
  Sales,
  Upgrades
FROM data
PIVOT (
  SUM(Quantity) FOR Category IN (Sales, Upgrades)
) p
; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T20:26:32.333

您需要对自己的主表进行自联接：

```
 SELECT m1.todate, m1.unit AS unitnum, u.unitname,
        SUM(m1.quantity) AS sales, SUM(m2.quantity) AS upgrades
   FROM (SELECT todate, unit, quantity FROM Main WHERE category = 'S') AS m1
   FULL OUTER JOIN
        (SELECT todate, unit, quantity FROM Main WHERE category = 'U') AS m2
     ON m1.todate = m2.todate AND m1.unit = m2.unit
   JOIN units AS u
     ON m1.unit = u.unitnum
  GROUP BY m1.todate, m1.unit, u.unitname
  ORDER BY m1.todate, m1.unit, u.unitname; 
```

编写相同查询还有许多其他等效方法；不过，这个很好地保留了问题的对称性。（更新为在子查询*和子查询**之间使用 FULL OUTER JOIN ，以处理有销售但没有升级或升级但没有销售的情况。`m1``m2`*）

# zend-framework - 如何在 Zend 中加载类

> ID：11819637
> 
> 赞同：1
> 
> 时间：2012-08-05T20:02:44.343
> 
> 标签：zend-framework

你能告诉我我的 ZF 装载机做错了什么吗？我将我的 ZF 库放在`library/Zend/`*

在我的**index.php**文件中，我不断收到此错误：

```
*Warning: require_once(Zend/Gdata/Media.php): failed to open stream: No such file or 
 directory in C:\workspace\testing\library\Zend\Gdata\YouTube.php on line 27 
```

**索引.php：**

```
require_once 'library/Zend/Loader.php';
Zend_Loader::loadClass('Zend_Gdata_YouTube', array('library/', 'library/Zend/', 'library/Zend/Gdata')); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T20:57:18.013

如果您的文件结构如此，我相信以下内容应该有效

```
./  (  == c:\workspace\testing\ )
./index.php
./library/
./library/Zend/
./library/Zend/GData/
./library/Zend/GData/YouTube.php
./library/Zend/GData/YouTube/... 
```

### 索引.php

```
// We need 'Zend' folder to be 'level 1' child folder of a include_path directive
ini_set('include_path', 
    ini_get('include_path') . 
    PATH_SEPARATOR . 
    dirname(__FILE__). DIRECTORY_SEPARATOR. 'library');

// Option 1
require_once 'Zend/Loader/Autoloader.php';
$gdata = new Zend_GData_Youtube();

// Option 2
require_once 'Zend/Loader.php';
Zend_Loader::loadClass('Zend_Gdata_YouTube');
$gdata = new Zend_Gdata_Youtube();

// Option 3 (with no include_path set)
require_once 'Zend/Loader.php';
$dir = dirname(__FILE__) . DIRECTORY_SEPARATOR . 'library';
// backwards, recursively repeat loading classes which are dependencies of Gdata module
// foreach ( requestedModule::depends as $loadme )                        // PS: bogus code
//   loadClass($loadme, $dir)
Zend_Loader::loadClass('Zend_Gdata_Media', $dir);
Zend_Loader::loadClass('Zend_Gdata_YouTube', $dir);
$gdata = new Zend_Gdata_Youtube(); 
```

# mysql - 使用表达式从 mysql 表中选择

> ID：11819640
> 
> 赞同：0
> 
> 时间：2012-08-05T20:02:55.857
> 
> 标签：mysql

我正在使用 Mysql，我被困在我希望是一个简单的问题上。如果一个条件为真或另一个条件为真，我需要从表中选择数据。

我试过的一个选择返回数据，但数据比它应该的多得多。实际上，该表仅包含 66 条记录，但我的查询返回 177 条记录。我误解了一些东西。

如果 ['city' 等于一个值并且 'type' 是金色的] 或 'type' 在一个名为 'charms' 的类别中，我需要选择数据

我试过这个查询

```
SELECT b.* 
FROM bubbles b, bubble_types bt 
WHERE 
  b.city = 10 
  AND b.type = 'golden' 
  OR bt.category = 'charm' 
  AND bt.type = b.type; 
```

而这个（根本不起作用，但可能更接近标记？）

```
SELECT b.* 
IF(b.city = 10, b.type = 'golden'), 
IF(bt.category = 'charm', bt.type = b.type) 
FROM bubbles b, bubble_types bt; 
```

希望我想要的有意义吗？

我应该从 10 号城市中的 66 个“金色”气泡中获得大约 10 行，或者那些类型字段将它们归为“魅力”类别的气泡。

谢谢;

**编辑**bubble_types 的示例表数据：

```
+----+----------+------------+ 
| id | category | type       | 
+----+----------+------------+ 
| 1  | bubble   | golden     | 
| 2  | charm    | teleport   | 
| 3  | charm    | blow       | 
| 4  | badge    | reuser     | 
| 5  | badge    | winner     | 
| 6  | badge    | loothunter | 
| 7  | charm    | freeze     | 
| 8  | badge    | reuser     | 
| 9  | badge    | winner     | 
| 10 | badge    | loothunter | 
+----+----------+------------+ 

mysql> describe bubbles;
+-------------+---------------------+------+-----+---------+----------------+
| Field       | Type                | Null | Key | Default | Extra          |
+-------------+---------------------+------+-----+---------+----------------+
| id          | bigint(20) unsigned | NO   | PRI | NULL    | auto_increment |
| city        | bigint(20)          | YES  |     | NULL    |                |
| type        | varchar(32)         | YES  |     | NULL    |                |
| taken_by    | bigint(20)          | YES  |     | NULL    |                |
| taken_time  | bigint(20)          | YES  |     | NULL    |                |
| label       | varchar(256)        | YES  |     | NULL    |                |
| description | varchar(16384)      | YES  |     | NULL    |                |
| created     | datetime            | YES  |     | NULL    |                |
+-------------+---------------------+------+-----+---------+----------------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T20:09:30.153

你是如此接近！将第一次的“WHERE”与第二次的括号放在一起（并在您的 JOIN 中添加适当的 ON 子句）：

```
SELECT b.* 
FROM bubbles b
   JOIN bubble_types bt 
   ON b.type = bt.type
WHERE 
  (b.city = 10 AND b.type = 'golden')
  OR 
  (bt.category = 'charm' AND bt.type = b.type); 
```

问题在于 where 子句中 AND 和 OR 的关联性细节。如有疑问，请使用括号明确表达您的意图。

# exe - 运行多个在 C++ 中保持打开状态的 exe 控制台应用程序

> ID：11819642
> 
> 赞同：0
> 
> 时间：2012-08-05T20:03:01.940
> 
> 标签：exe

我正在我自己的 C++ 程序中使用 API，该程序通过 TCP 连接的服务器-客户端关系与 API 的第 3 方应用程序进行通信。这时候，我必须先手动打开服务器控制台应用程序（.exe），然后是客户端控制台应用程序（也是.exe）。为了执行必要的任务，这两个窗口必须在整个应用程序的后台保持打开状态。

我想按照我上面介绍的顺序自动执行这两个 .exe。我已经尝试了两次连续的 ShellExecute() Windows API 函数调用，我已经尝试了旧的 system() 函数，我已经尝试打开一个批处理文件，如下所示： ShellExecute(NULL,"open","ocrtext.bat",NULL,NULL ,SW_SHOW);

批处理文件的位置如下所示： START c:\videoocr\server\ocrD.exe START /wc:\videoocr\server\ocrGW.exe

所有这些选项都存在同样的问题：服务器控制台窗口打开正常，但客户端窗口无法打开。我怀疑问题与无法调用多个控制台应用程序有关，每个控制台应用程序都使用这些方法保持打开状态。

我能做些什么？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T20:30:00.457

使用以下命令在批处理文件中调用应用程序：

```
start "App1" /min cmd.exe /c startApp1.exe
start "App2" /min cmd.exe /c startApp2.exe
... 
```

有了这个批处理文件可以打开不同的控制台。

# windows-mobile-6.5 - Windows 移动 6.5 输入法

> ID：11819643
> 
> 赞同：0
> 
> 时间：2012-08-05T20:03:09.197
> 
> 标签：windows-mobile-6.5, ime

是否可以通过 IME 将字符发送到当前打开的文本框？我想要做的是我有蓝牙模块来处理蓝牙键盘和 Windows 移动设备之间的连接，当用户按下蓝牙键盘上的键蓝牙模块接收它并通过 IME 将其发送到当前打开的文本框时。您的评论将极大地帮助我，因为我是 Windows Mobile 开发的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:17:59.290

如果 BT 键盘使用 HID 协议，则不需要任何额外的软件。所有击键都应作为键盘输入自动路由到正确的输入。

如果您需要自己编写软件，则需要打开与 BT 键盘的 COM 端口连接。然后您的应用程序可以接收 BT 键盘消息并将它们作为键盘消息发出。另见[http://www.hjgode.de/wp/2011/11/10/keywedge-updated/](http://www.hjgode.de/wp/2011/11/10/keywedge-updated/)

但是，您的 WM6.5 应该有 HID 驱动程序，因此，在连接到 BT 键盘后，您无需再做任何事情。

如果您需要更多帮助，请发布设备型号名称。

问候

约瑟夫

# c++ - 俯仰偏航滚动，角度独立

> ID：11819644
> 
> 赞同：0
> 
> 时间：2012-08-05T20:03:12.507
> 
> 标签：c++, opengl, transformation, jogl, angle

我正在努力弄清楚如何使俯仰偏航和滚动在它们之间独立。一旦我在 z 轴（俯仰）上旋转某些东西，第二次旋转（yaxis yaw）取决于第一次旋转的结果，第三次旋转（x 轴，滚动）取决于其他两个旋转的结果。因此，我没有独立的俯仰、偏航、滚动，而是将它们三个混合在一起，很难看。

我希望可以将对象角度存储在数组 [pitch,yaw,roll] 中，然后在转换过程中解码这些角度，以便偏航将对象置于给定位置，然后采用与俯仰相对应的角度，但是不是两者的复合...

我已经看到对“任意轴旋转矩阵”的引用。得到想要的结果会有用吗？？？1) 应用偏航 (gl.glRotatef(beta, 0.0f, 1.0f, 0.0f);) 2) 获得手动旋转矢量 (1.0f,0.0f,0.0f) 围绕 beta 的结果轴 3) 应用俯仰使用轴进入 2 {和滚动...如果 1,2,3 是正确的} 4）旋转进入 2 的轴围绕其 x 滚动 5）使用进入 4 的轴应用滚动

它会起作用吗？有更好的解决方案吗？我想将我的对象本地方向保持为 [pitch,yaw,roll] 格式。

我已经为此苦苦挣扎了好几天，如果可能的话，我想避免使用四元数。3D 对象存储在相对于 0,0,0 并沿 {1,0,0} 观察并转换到它们的目的地和角度的每一帧，因此应该很容易避免云台锁定问题。

换句话说，我的相机工作正常，世界坐标正在正确制作，但我不知道应该如何或在何处应用基于偏航、髓、滚动的对象局部变换。

结果应从数组 [y,p,r] 中读取，它们的组合**不应重叠**。

其实我的转变是：

```
gl.glLoadIdentity(); 
float[] scalation = transform.getScalation();
gl.glScalef(scalation[0], scalation[1], scalation[2]); 
float[] translation = transform.getTranslation();
gl.glTranslatef(translation[0], translation[1], translation[2]);
float[] rotation = transform.getRotation();
gl.glRotatef(rotation[0], 1.0f, 0.0f, 0.0f);
gl.glRotatef(rotation[1], 0.0f, 1.0f, 0.0f);
gl.glRotatef(rotation[2], 0.0f, 0.0f, 1.0f); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T20:14:34.570

方向始终取决于角度顺序。你不能让他们独立。您旋转向量将它们乘以矩阵，并且矩阵乘法不是可交换的。您可以选择一个订单并与之保持一致。对于这些问题，常见的选择是 ZYX 定向方法（先滚动，然后俯仰，最后偏航）。当我使用角度时，我的个人参考是[这个文档](http://www.swarthmore.edu/NatSci/mzucker1/e27/diebel2006attitude.pdf)，它对我有很大帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-05T20:59:49.507

如果您使用偏航/俯仰/滚动，您的最终方向将始终取决于您应用它们的数量和顺序。如果您想要可读性或简单性，您可以选择其他方案。我喜欢选择一个前向向量（F），并根据一个规范的“世界向上”向量计算一个向右和向上的向量，然后只需填写矩阵列。如果您愿意，您可以添加一个额外的“轴旋转”角度术语。它有点像四元数，但更易于人类阅读。我使用这个表示来控制一个基本的 WASD 风格的相机。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-29T10:07:54.230

累积（偏航，俯仰，滚动）旋转需要按照它们发生的顺序保留一个变换矩阵，它是单独变换的乘积。生成的矩阵是围绕某个轴和某个角度的旋转。

# ruby-on-rails - 嵌套路由 link_to 循环路由助手

> ID：11819645
> 
> 赞同：0
> 
> 时间：2012-08-05T20:03:23.553
> 
> 标签：ruby-on-rails, ruby, routes

如果我访问此页面 /articles/1/comments

为什么这不起作用 (views/comments/index.html.erb)

```
<% @comments.each do |comment| %>
<%= link_to "show", article_comment_path(comment)
<% end %> 
```

这会吗？

```
<% @comments.each do |comment| %>
<%= link_to "show", article_comment_path(@article, comment)
<% end %> 
```

路线.rb

```
resources :articles
  resources :comments
end 
```

我认为路线助手足够聪明，可以推断出我想在当前上下文中使用这篇文章......

魔法非常好，除非你花很多时间期待它是魔法的，但事实并非如此：P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T21:20:06.553

你不能期望太多。这样，您仍然可以自由使用实例变量，即普通参数。link_to 帮助器也可以在控制器的上下文之外使用。此外，可能的参数列表是动态的。如果您给出一个参数，它无法知道您指定了哪个参数：文章？评论？

请注意，您可以只写：

```
link_to "show article", @article
link_to "show comment", [@article, comment] 
```

希望这可以帮助。

# android - Android：action_send 意图未显示 facebook

> ID：11819646
> 
> 赞同：0
> 
> 时间：2012-08-05T20:03:27.557
> 
> 标签：android, facebook, android-intent, send

我最近实现了共享纯文本的操作发送意图。Facebook 已在我的手机上安装和更新，但只有“Googlemail”和“Textmessage”显示为共享我的文本的选项。

一个简短的代码片段：

```
 Intent intent = new Intent(android.content.Intent.ACTION_SEND);
        intent.setType("plain/text");
        intent.putExtra(android.content.Intent.EXTRA_SUBJECT, item.getTitle());
        intent.putExtra(
                android.content.Intent.EXTRA_TEXT,
                (item.getDescription());
        startActivity(Intent.createChooser(intent, "Send...")); 
```

任何建议我的应用程序有什么问题？

通常我会认为我不必为了我的简单目的而实现整个 facebook sdk？！

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T21:13:31.280

要使用的 MIME 类型是`text/plain`，而不是`plain/text`。

# regex - 在每个字符上使用正则表达式验证邮政编码

> ID：11819647
> 
> 赞同：0
> 
> 时间：2012-08-05T20:03:29.537
> 
> 标签：regex, validation, postal-code

我正在尝试使用正则表达式验证加拿大的邮政编码，但我想在输入每个字符时对其进行测试，而不是等到用户提交表单。

到目前为止，我发现的所有示例（包括这个[）](https://stackoverflow.com/questions/11149678/validate-canadian-postal-code-regex)似乎只验证整个用户输入，而不是输入的每个字符。

这是我目前使用的，但它只适用于整个用户条目，而不是每个字符：

```
function validate(myform) {
if (myform.zip.value == "" || myform.zip.value == null || myform.zip.value == "Postal Code" || myform.zip.value.length > 7 ) {
    alert("Please fill in field Postal Code. You should only enter 7 characters");
    myform.zip.focus();
    return false;
}
return okNumber(myform);
}

function okNumber(myform) {
var regex = /^[ABCEGHJKLMNPRSTVXY]\d[A-Z] *\d[A-Z]\d$/;
if (regex.test(myform.zip.value) == false) {
    alert("Input Valid Postal Code");
    myform.zip.focus();
    return false;
}
return true;
} 
```

有没有人有任何示例说明如何在输入每个字符时验证邮政编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T00:44:00.900

您可以将正则表达式编写为一系列替代项，这些选项匹配一个字符、两个字符等的部分邮政编码，直至完整的邮政编码，但我不确定正则表达式是否是验证邮政编码的正确方法无论如何都要编码。

# c# - 接口、继承和 C#

> ID：11819648
> 
> 赞同：0
> 
> 时间：2012-08-05T20:03:32.300
> 
> 标签：c#, oop

我正在为几个类设计一个数据层，我希望这些类中的每一个都遵循我建立的合同`IMyDataItem`：

```
public delegate void ItemChangedHandler(object sender, EventArgs e);

public interface IMyDataItem<T> {
  string Insert { get; }
  int Save();
  string Select { get; }
  string Update { get; }
} 
```

完成后，我现在想包含一个基类，我的其他类都继承自该基类。

我将如何修复这个**基类**？

```
public class MyDataItem : IMyDataItem<T> {

  private const string TODO = "TODO: This has not been done.";
  public const int NOT_SET = -1;

  private bool changed;
  internal int rowId;

  public MyDataItem() {
    changed = false;
    rowId = NOT_SET;
  }

  public ItemChangedHandler OnChange;

  internal void notify() {
    changed = true;
    if (OnChange != null) {
      OnChange(this, new EventArgs());
    }
  }

  public int RowID {
    get { return rowId; }
    set {
      if (rowId != value) {
        rowId = value;
        notify();
      }
    }
  }

  public bool SaveNeeded { get { return changed; } }

  public static virtual T Load() {
    return default(T);
  }

  public virtual string Insert { get { return TODO; } }

  public virtual string Select { get { return TODO; } }

  public virtual string Update { get { return TODO; } }

  public virtual int Save() {
    changed = false;
    return NOT_SET;
  }
} 
```

错误都在第二类`MyDataItem`（我的基类）中：

*   找不到类型或命名空间名称“T” - 在我声明我的类的第一行。

我尝试通过`where`在签名中添加一个子句来消除错误：

```
public class MyDataItem : IMyDataItem<T> where T : MyDataItem { 
```

但是，这给我带来了错误：

*   非泛型声明不允许使用约束

有没有办法做我所追求的，还是我需要坚持更简单的类设计？

基类完成后，其他类如**Location**、**Employee**和**Record**将继承它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T20:05:54.207

很好地修复您需要的特别编译时错误：

```
public class MyDataItem<T> : IMyDataItem<T> 
```

但是，如果不了解您要达到的目标的更多信息，则很难推荐替代方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T20:09:58.293

为什么不`<T>`从界面中删除并使其非泛型？`T`没有在界面中使用。

否则，如果您希望该类是通用的，请说

```
public class MyDataItem<T> : IMyDataItem<T> 
```

但同样，如果`T`不使用，你有什么理由声明它？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T20:46:38.993

您尝试做的事情与我也做过的事情有些相似。我想要一些适用于我所有“数据管理器”实例的通用代码，但也想对它们应用更强的类型......以类似的方式......

```
public interface iMyDataManager
{  
   stuff ... 
}

public class MyDataManager<T> : iMyDataManager
{  
   implementation ... that I want common to all derived specific instances 
}

public class MySpecificDataInstance : MyDataManager<MySpecificDataInstance>
{
   continue with rest of actual implementations specific to this class.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T06:19:49.303

我没有看到任何理由在您的实现中使用泛型。其次，您确定这些功能的参数：

```
 string Insert { get; }
  int Save();
  string Select { get; }
  string Update { get; } 
```

为什么 Update 和 Insert 返回参数？你确定，你能在两个月内记住这句话的意思吗？

# macos - wxHaskell Mac OS X 运行时错误

> ID：11819657
> 
> 赞同：2
> 
> 时间：2012-08-05T20:05:15.597
> 
> 标签：macos, haskell, wxwidgets, runtime-error, wxhaskell

我按照[这些](http://www.haskell.org/haskellwiki/WxHaskell/Mac)说明在 OS X Lion 上安装 wxWidgets（使用 Homebrew）和 wxHaskell。没有错误。

[当我在这里](http://www.haskell.org/haskellwiki/WxHaskell/Quick_start)尝试示例时，第一个 Hello World 示例运行良好。但是，当我尝试运行 Bouncing Balls 示例时，我得到：

> Main(98350,0x7fff72edd960) malloc: ***对象 0x10e121580 的错误: 被释放的指针未被分配

我正在建造

> ghc --make Main.hs

当我简单地运行可执行文件时，我得到了那个错误。如果我使用 macosx-app 将其捆绑到应用程序中，它只会崩溃（可能是相同的错误）。我尝试重新安装 wxWidgets 和 Haskell 包，但错误仍然存​​在。

使用 gdb：

```
Main(10236,0x7fff72edd960) malloc: *** error for object 0x102b68580: pointer being freed was not allocated
*** set a breakpoint in malloc_error_break to debug

Program received signal SIGABRT, Aborted.
0x00007fff83cc7ce2 in __pthread_kill ()
(gdb) backtrace
#0  0x00007fff83cc7ce2 in __pthread_kill ()
#1  0x00007fff891077d2 in pthread_kill ()
#2  0x00007fff890f8a7a in abort ()
#3  0x00007fff8915784c in free ()
#4  0x00007fff866d0702 in std::string::_Rep::_M_dispose ()
#5  0x00007fff866d0740 in std::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string ()
#6  0x00000001017e779a in wxString::~wxString ()
#7  0x00000001018957c8 in wxEventBasicPayloadMixin::~wxEventBasicPayloadMixin ()
#8  0x0000000101879da5 in wxCommandEvent::~wxCommandEvent ()
#9  0x0000000101894b42 in wxEvtHandler_GetClosure ()
#10 0x0000000100276f91 in s19gn_info () 
```

# c - 字节到 C 中的已签名 int

> ID：11819658
> 
> 赞同：4
> 
> 时间：2012-08-05T20:05:29.053
> 
> 标签：c, casting, binary-data

我有一个二进制值存储在 C 中的 char 中，我想将此字节转换为 C 中的有符号 int。目前我有这样的东西：

```
char a = 0xff;
int b = a; 
printf("value of b: %d\n", b); 
```

标准输出中的结果将为“255”，所需的输出为“-1”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T20:09:37.393

根据 C99 标准，

> **6.3.1.3 有符号和无符号整数**
> 
> **当整数类型的值转换为_Bool**以外的其他整数类型时，如果该值可以用新类型表示，则保持不变。
> 
> 否则，如果新类型是无符号的，则通过在新类型中可以表示的最大值的基础上反复加减一，直到该值在新类型的范围内。
> 
> 否则，新类型是有符号的，值不能在其中表示；结果要么是实现定义的，要么是产生实现定义的信号。

* * *

您需要在分配 to 之前将您`char`转换为 a ，因为任何可以采用的值都可以直接表示为 a 。`signed char``int``char``int`

```
#include <stdio.h>

int main(void) {
  char a = 0xff;
  int b = (signed char) a;
  printf("value of b: %d\n", b);
  return 0;
} 
```

* * *

快速测试表明它可以在这里工作：

```
C:\dev\scrap>gcc -std=c99 -oprint-b print-b.c

C:\dev\scrap>print-b
value of b: -1 
```

* * *

请注意`char`C99 标准未定义的是否处理有符号或无符号。

> **6.2.5 类型**
> 
> 声明为**char**类型的对象大到足以存储基本执行字符集的任何成员。如果基本执行字符集的成员存储在 **char**对象中，则其值保证为正数。如果任何其他字符存储在**char**对象中，则结果值是实现定义的，但应在该类型可以表示的值范围内。
> 
> ...
> 
> **char**、**signed char**和**unsigned char**这三种类型统称为字符类型。**实现应将 char 定义为与signed char**或**unsigned char**具有相同的范围、表示和行为。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-05T20:07:03.560

代替：

```
char a = 0xff 
```

经过

```
signed char a = 0xff;  // or more explicit: = -1 
```

要有`printf`指纹`-1`。

如果您不想更改 的类型`a`，正如@veer 在评论中添加的那样，您可以`a`在`(signed char)`将其值分配给`b`.

请注意，在这两种情况下，此整数转换都是实现定义的，但这是常见的实现定义的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T20:18:50.743

你从一开始就错了：

```
char a = 0xff; 
```

if `char`is `signed`，您似乎假设，在这里您已经有一个超出范围的值，`0xFF`是一个带有 value 的无符号量`255`。如果您想查看`char`签名号码，请使用`signed char`并分配`-1`给它。如果您想将其视为位模式，请使用`unsigned char`并分配`0xFF`给它。然后你的初始化`int`会做你期望它做的事情。

`char`，`signed char`并且`unsigned char`根据标准的定义是三种不同的类型。保留`char`自己的字符，打印人类可读的东西。

# networking - 无法删除网络共享中的文件

> ID：11819660
> 
> 赞同：1
> 
> 时间：2012-08-05T20:05:37.810
> 
> 标签：networking, visual-studio-debugging, file-locking

总结的问题是我无法删除网络共享中的特定文件。这些文件似乎被锁定在服务器端，而不是被 Windows 服务锁定。出现此问题的计算机位于域下，文档和其他 Windows 库位于网络共享上。我已经尝试了几种解决方案，这些解决方案将在下面描述。

以下是发生的事情：在 Visual Studio 中调试 Web 应用程序时，我遇到了臭名昭著的蓝屏死机。我重新启动并想继续调试后，项目没有编译。我收到此错误：“创建调试信息文件 z:\MY_Proj_Dir\obj\Debug\My_Proj_Name.pdb 访问被拒绝”。我觉得这很奇怪，因为我之前在那个位置调试过那个项目很多次。在 Visual Studio 中运行调试会话时出现的意外 Windows 错误一定是以某种方式锁定了它。该文件用于调试信息，在查看论坛如何解决问题后，他们建议删除 Debug 目录。

所以这里是我尝试过的解决方案： - 首先，当然，我尝试清理和重建项目。- 关闭 Visual Studio 并重新启动计算机并再次尝试。- 尝试手动删除 obj\Debug 目录：无法删除文件 My_Proj_Name.dll 和 .pdb，因为显然我需要管理员（即我自己）的权限才能执行此操作。- 所以我右键单击目录，打开属性-> 安全-> 高级-> 所有权-> 所有权是 my_user_name@the_domain。这是我登录的帐户。如果我尝试将所有权更改为唯一给我的选项，即相同的 (my_user_name@the_domain) ，勾选子容器和对象上的替换所有者，它会给我一个错误“应用安全性错误：访问被拒绝”。如果我尝试在单个 .dll 和 .

*   我尝试关闭用户帐户控制，重新启动并尝试删除文件。
*   我也尝试过使用命令行但没有运气。
*   我尝试了“解锁器”工具来查看是否可以从其他 Windows 服务释放文件或写入权限，但我仍然无法删除它们。

要查看问题是否出在计算机上，我尝试使用家用计算机上的 VPN 登录并访问网络驱动器： - 如果我从那里删除文件，它们会立即重新出现，没有任何“无法删除”对话框。它也不允许我更改这些文件的所有权。

*   我启动了我的 Ubuntu VM 并访问了网络共享。并试图从那里删除文件。它给了我一个更奇怪的错误信息：“文件不存在”。但我可以在那里看到它！

*   我尝试从 WinSCP 和 putty 登录到网络共享，但我无法使用 ssh 或 ftp 访问域 DNS。可能服务器只支持 SMB（Windows 共享）......我不确定。

*   注意：我只对那个特定文件夹及其文件有问题。我的网络驱动器中的任何其他文件夹都没有问题。我学到的一件事是不要调试位于网络共享上的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:35:16.563

通过离线工作和本地调试解决了问题。脱机工作 Visual Studio 能够重写调试信息文件。从visual studio我清理解决方案并删除文件。似乎释放了视觉工作室对这些文件的锁定。一旦它离线工作，只需再次将工作模式转换为在线模式。然后我就可以正常编译和调试了。

我学会了不直接在网络共享上进行调试，而是将我的 Visual Studio 项目放在本地以避免所有权和权限问题。

# rest - “为什么”Backbone 的集合没有保存（PUT/POST）方法——它是不稳定的吗？

> ID：11819662
> 
> 赞同：4
> 
> 时间：2012-08-05T20:06:02.353
> 
> 标签：rest, backbone.js

不久前我问了一个问题，即[“如何保存整个骨干集合？”](https://stackoverflow.com/q/6879138/609074) . 然而让我感兴趣的是为什么不提供保存方法？保存（PUT/POST）整个集合是不稳定的，还是在 REST 领域不常见？

```
GET:  /MySite/Collections - allowed by collection.fetch()
POST: /MySite/Collections - for the model(s) in the collection to be Posted when calling model.save()
PUT:  /MySite/Collections/{id} - for the model(s) to be updated individually
GET:  /MySite/Collections/{id} - to fetch an individual model throuth model.fetch() 
```

那么为什么不允许 POST/PUT 整个资源集合呢？有时它很方便，尽管可以使用`collection.toJSON`为什么不包含它来包装/破解一些代码？我只是好奇它的缺席和同样的理由。不具备某些功能的框架通常意味着糟糕的编程/设计，因此被排除在外。保存整个集合是“*不好的做法*”吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T20:49:35.350

关于 REST 的维基百科文章确实[提到了用于收集的 CRUD 动词](http://en.wikipedia.org/wiki/Representational_state_transfer#RESTful_web_services)。

但是，在我看来，集合不是资源，它不是实体，也没有状态。相反，它是*一堆*资源。如果一个集合有一个*UPDATE*命令，那么它只不过是多个模型上的多个*UPDATE命令。**仅在一个请求中拥有多个UPDATE*命令的可能性会有所帮助，但我认为这不是 REST 实现的工作。

还会有歧义的问题，例如在包含已*保存*模型的集合中， *id*等，而其他不包含的，*POST*命令意味着什么？...或*UPDATE*命令？...

更不用说服务器端的复杂性增加了，如果这个 Collection REST 支持应该像标准一样，我们应该加倍工作来完成推理。

总结：我没有看到任何情况下无法使用实际的、更简单的、仅模型的 REST 命令来解决对 Collection REST 命令的需求，所以我认为让事情尽可能简单是一个好习惯。

# c# - asp.net 我无法在脚本部分调试 javascript

> ID：11819663
> 
> 赞同：1
> 
> 时间：2012-08-05T20:06:09.457
> 
> 标签：c#, javascript, asp.net, debugging

我有简单的javascript函数：

```
<form id="form1" runat="server">
    <script type="text/javascript">

         function doSomething(message) {
        var div1 = document.getElementById('div1');
        div1.innerHTML = 'afas';
    }

    </script> 
```

```
<telerik:RadButton ID="btnShowUpload" runat="server" OnClientClicked="doSomething('test1')"  Text="Upload file">
    </telerik:RadButton> 
```

当我在函数 OnClientClicked 中设置断点并按 F5 启动然后单击按钮时，应用程序不会在断点处停止。它仅在我通过 Start without Debug 运行我的项目时停止，然后在 Mozilla（firebug）中我可以在此函数中设置断点，并在我按下按钮时停止。如何在 Visual 中调试？不在 Mozilla 中？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T20:15:25.800

右键单击项目中的页面，例如 Default.aspx，然后选择 Browse With... 菜单项。

显示对话框时，选择 Internet Explorer，然后单击设置为默认按钮，然后按取消按钮。

打开 Internet Explorer，转到 Internet 选项对话框，单击高级选项卡并确保在浏览部分下，未选中禁用脚本调试 (Internet Explorer)。

然后，要强制调试，您可以添加 javascript 调试器；一行到你的 javascript 方法的主体：

```
function doSomething(message) {
   debugger;
   // rest of your code 
```

当您以这种方式进行调试时，Internet Explorer 将使您能够选择要使用的应用程序和实例，其中一个选项将是 Internet Explorer。

还有其他方法可以将调试器附加到 Visual Studio Web 应用程序项目中的 Internet Explorer 实例，例如从“调试”菜单中选择“附加到进程...”并选择类型为的 iexplore.exe 实例类型列中列出的脚本正在运行您有兴趣调试的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T20:12:36.457

你可以在你的javascript中设置一个带有调试指令的断点 -

```
 function OnClientClicked(button, args) {
            debug;
            if (window.confirm("Are you sure you want to submit the page?")) {
                button.set_autoPostBack(true);
            }
            else {
                button.set_autoPostBack(false);
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T20:16:44.150

将**debugger**关键字放在要调试的 java 脚本代码之前。

```
 <form id="form1" runat="server">
   <script type="text/javascript">       
   //enable debugging javascript code          
    debugger;
     function doSomething(message) {
    var div1 = document.getElementById('div1');
    div1.innerHTML = 'afas';
}

</script> 
```

# html - Dont know whats creating bottom scroll bar

> ID：11819666
> 
> 赞同：0
> 
> 时间：2012-08-05T20:06:29.560
> 
> 标签：html, css, wordpress, themes

I'm working on a theme for wordpress here [http://mhutchinson.me.uk/](http://mhutchinson.me.uk/) but a scroll bar is being added to the bottom of the webpage saying that the body content is wider than the page.

But I cant figure out whats pushing the content out. Does anyone know how to solve this?

Thanks, Megan

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T20:16:18.637

If you just care about getting rid of the scrollbar, you can hack it out by specifying the overflow or width of your `html` or `body` elements.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T20:17:18.843

Well if you really can't figure it out start with this before all of the other CSS: [http://www.cssreset.com/](http://www.cssreset.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T20:21:43.877

This should be Your problem:

```
<iframe scrolling="no" id="f1830c0ce6ba962" name="f323631050eb616" style="border: medium none; overflow: hidden; height: 240px; width: 575px;" class="FB_UI_Hidden" src="http://www.facebook.com/dialog/oauth?api_key=153185341443233&amp;app_id=153185341443233&amp;channel_url=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D9%23cb%3Df4145651077ece%26origin%3Dhttp%253A%252F%252Fmhutchinson.me.uk%252Ffb320d27f95db6%26domain%3Dmhutchinson.me.uk%26relation%3Dparent.parent&amp;client_id=153185341443233&amp;display=none&amp;domain=mhutchinson.me.uk&amp;locale=en_US&amp;origin=1&amp;redirect_uri=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D9%23cb%3Df24fe177267a76a%26origin%3Dhttp%253A%252F%252Fmhutchinson.me.uk%252Ffb320d27f95db6%26domain%3Dmhutchinson.me.uk%26relation%3Dparent%26frame%3Df1830c0ce6ba962&amp;response_type=token%2Csigned_request%2Ccode&amp;sdk=joey"></iframe> 
```

You need to make this iframe width smaller.

# java - JFrame内的绝对定位图形JPanel被空白部分阻塞

> ID：11819669
> 
> 赞同：2
> 
> 时间：2012-08-05T20:07:00.150
> 
> 标签：java, graphics, jframe, jpanel, css-position

我试图通过制作一个益智程序来提高我对 Java 的理解，尤其是 Java GUI。当前，用户选择一个图像，该图像被切割成指定数量的块。这些碎片是随机绘制到屏幕上的，但它们似乎被其他碎片的空白部分覆盖，并不是所有的都显示出来，但我可以打印出所有的坐标。我正在使用绝对定位，因为 LayoutManager 似乎不起作用。我短暂地尝试了 layeredPanes，但他们让我感到困惑，似乎并没有解决问题。我真的很感激一些帮助。
这是2个相关的类：

```
import javax.swing.*;
import java.awt.*;
import java.awt.image.*;
import java.awt.event.*;

public class PuzzlePieceDriver extends JFrame
{
  private static Dimension SCREENSIZE = Toolkit.getDefaultToolkit().getScreenSize();
  private static final int HEIGHT = SCREENSIZE.height;
  private static final int WIDTH = SCREENSIZE.width;

  public static int MY_WIDTH;
  public static int MY_HEIGHT;

  private static BufferedImage image;

  private int xPieces = PuzzleMagicDriver.getXPieces();
  private int yPieces = PuzzleMagicDriver.getYPieces();

  private PuzzlePiece[] puzzle = new PuzzlePiece[xPieces*yPieces];

  public Container pane = this.getContentPane();
  private JLayeredPane layeredPane = new JLayeredPane();

  public PuzzlePieceDriver(ImageIcon myPuzzleImage)
  {
    MY_WIDTH = myPuzzleImage.getIconWidth()+(int)myPuzzleImage.getIconHeight()/2;
    MY_HEIGHT = myPuzzleImage.getIconHeight()+(int)myPuzzleImage.getIconHeight()/2;
    setTitle("Hot Puzz");
setSize(MY_WIDTH,MY_HEIGHT);
setLocationByPlatform(true);

pane.setLayout(null);

image = iconToImage(myPuzzleImage); //pass image into bufferedImage form

puzzle = createClip(image);

//pane.add(layeredPane);

setVisible(true);
  }//end constructor

  public static BufferedImage iconToImage(ImageIcon icon)
  {
    Image img = icon.getImage();
 int w = img.getWidth(null);
 int h = img.getHeight(null);
 BufferedImage image = new BufferedImage(w, h, BufferedImage.TYPE_INT_RGB);
 Graphics g = image.createGraphics();
     // Paint the image onto the buffered image
    g.drawImage(img, 0, 0, null);
    g.dispose();

    return image;
  }//end BufferedImage

  protected int randomNumber(int min, int max)
  {
    int temp = 
    min + (int)(Math.random() * ((max - min) + 1));

 return temp;
  }//end randomNumber

  private PuzzlePiece[] createClip(BufferedImage passedImage)
  {

 int cw, ch;
 int w,h;
 w = image.getWidth(null);
 h = image.getHeight(null);
 cw = w/xPieces;
     ch = h/yPieces;

 int[] cells=new int[xPieces*yPieces];

 int dx, dy;

 BufferedImage clip = passedImage;

 //layeredPane.setPreferredSize(new Dimension(w,h));

    for (int x=0; x<xPieces; x++) 
      {
        int sx = x*cw;
        for (int y=0; y<yPieces; y++) 
            {
            int sy = y*ch;
            int cell = cells[x*xPieces+y];
            dx = (cell / xPieces) * cw;
            dy = (cell % yPieces) * ch;

            clip= passedImage.getSubimage(sx, sy, cw, ch);
    int myX = randomNumber(0,(int)w);
    int myY = randomNumber(0,(int)h);

    PuzzlePiece piece=new PuzzlePiece(clip,myX,myY);
    puzzle[x*xPieces+y]=piece;
    piece.setBounds(myX,myY,w,h);
    //layeredPane.setBounds(myX,myY,w,h);
    //layeredPane.add(piece,new Integer(x*xPieces+y));
    pane.add(piece);
    piece.repaint();

        }//end nested for
}//end for
return puzzle;
  }//end createClip

}//end class 
```

如果间距有点乱，请见谅！

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.awt.image.*;

public class PuzzlePiece extends JPanel
{
private Point imageCorner;      //the image's top-left corner location
private Point prevPt;               //mouse location for previous event
private Boolean insideImage =false;

private BufferedImage image;

public PuzzlePiece(BufferedImage clip, int x, int y)
{
 image = clip;
 imageCorner = new Point(x,y);
 //repaint();
}//end constructor

public void paintComponent(Graphics g)
{
     super.paintComponent(g);
 g.drawImage(image, (int)getImageCornerX(),(int)getImageCornerY(), this);
     System.out.println("paint "+getImageCornerX()+"   "+getImageCornerY());
    //repaint(); 
//g.dispose();
}//end paintComponent

public Point getImageCorner()
{
  return imageCorner;
}//end getImageCorner
public double getImageCornerY()
{
  return imageCorner.getY();
}//end getImageCornerY
public double getImageCornerX()
{
  return imageCorner.getX();
}//end getPoint

}//end class PuzzlePiece 
```

任何帮助将不胜感激，我真的被卡住了！谢谢！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T04:33:38.430

我对这个想法很感兴趣，所以我做了另一个例子，使用自定义布局管理器。

```
public class MyPuzzelBoard extends JPanel {

    public static final int GRID_X = 4;
    public static final int GRID_Y = 4;
    private BufferedImage image;

    public MyPuzzelBoard(BufferedImage image) {
        setLayout(new VirtualLayoutManager());
        setImage(image);

        addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent e) {
                if (e.getClickCount() == 2) {
                    removeAll();
                    generatePuzzel();
                } else {
                    Component comp = getComponentAt(e.getPoint());
                    if (comp != null && comp != MyPuzzelBoard.this) {
                        setComponentZOrder(comp, 0);
                        invalidate();
                        revalidate();
                        repaint();
                    }
                }
            }
        });
    }

    public void setImage(BufferedImage value) {
        if (value != image) {
            image = value;
            removeAll();
            generatePuzzel();
        }
    }

    public BufferedImage getImage() {
        return image;
    }

    protected float generateRandomNumber() {
        return (float) Math.random();
    }

    protected void generatePuzzel() {
        BufferedImage image = getImage();

        if (image != null) {
            int imageWidth = image.getWidth();
            int imageHeight = image.getHeight();

            int clipWidth = imageWidth / GRID_X;
            int clipHeight = imageHeight / GRID_Y;
            for (int x = 0; x < GRID_X; x++) {
                for (int y = 0; y < GRID_Y; y++) {

                    float xPos = generateRandomNumber();
                    float yPos = generateRandomNumber();
                    Rectangle bounds = new Rectangle((x * clipWidth), (y * clipHeight), clipWidth, clipHeight);
                    MyPiece piece = new MyPiece(image, bounds);
                    add(piece, new VirtualPoint(xPos, yPos));

                }
            }
        }

        invalidate();
        revalidate();
        repaint();
    }

    public class VirtualPoint {

        private float x;
        private float y;

        public VirtualPoint(float x, float y) {
            this.x = x;
            this.y = y;
        }

        public float getX() {
            return x;
        }

        public float getY() {
            return y;
        }

        public void setX(float x) {
            this.x = x;
        }

        public void setY(float y) {
            this.y = y;
        }
    }

    public class VirtualLayoutManager implements LayoutManager2 {

        private Map<Component, VirtualPoint> mapConstraints;

        public VirtualLayoutManager() {
            mapConstraints = new WeakHashMap<>(25);
        }

        @Override
        public void addLayoutComponent(Component comp, Object constraints) {
            if (constraints instanceof VirtualPoint) {
                mapConstraints.put(comp, (VirtualPoint) constraints);
            }
        }

        @Override
        public Dimension maximumLayoutSize(Container target) {
            return new Dimension(Integer.MAX_VALUE, Integer.MAX_VALUE);
        }

        @Override
        public float getLayoutAlignmentX(Container target) {
            return 0.5f;
        }

        @Override
        public float getLayoutAlignmentY(Container target) {
            return 0.5f;
        }

        @Override
        public void invalidateLayout(Container target) {
        }

        @Override
        public void addLayoutComponent(String name, Component comp) {
        }

        @Override
        public void removeLayoutComponent(Component comp) {
            mapConstraints.remove(comp);
        }

        @Override
        public Dimension preferredLayoutSize(Container parent) {
            return new Dimension(400, 400);
        }

        @Override
        public Dimension minimumLayoutSize(Container parent) {
            return preferredLayoutSize(parent);
        }

        @Override
        public void layoutContainer(Container parent) {
            int width = parent.getWidth();
            int height = parent.getHeight();

            for (Component comp : parent.getComponents()) {

                VirtualPoint p = mapConstraints.get(comp);
                if (p != null) {

                    int x = Math.round(width * p.getX());
                    int y = Math.round(height * p.getY());

                    Dimension size = comp.getPreferredSize();

                    x = Math.min(x, width - size.width);
                    y = Math.min(y, height - size.height);

                    comp.setBounds(x, y, size.width, size.height);

                }
            }
        }
    }
} 
```

基本上，这使用“虚拟”坐标系，而不是提供以像素为单位的绝对 x/y 位置，而是将它们作为父容器的百分比提供。现在，老实说，转换回绝对定位并不需要太多，这样，您还可以获得布局缩放。

该示例还演示了 Z 重新排序（以防万一）和双击简单重新随机化拼图

哦，我也把这块透明的（`opaque = false`）

![随机布局](../Images/0058751cb3b1aed0f12e6d4a6ac32447.png)

哦，我应该提到一件事，在浏览这个示例时，我发现可以将片段放置在屏幕之外（完全和部分）。

您可能需要检查您的定位代码，以确保布局时的图像不会被移出屏幕；）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T23:06:06.357

我想提出很多建议，但首先...

您选择随机位置的方式已关闭...

```
int myX = randomNumber(0,(int)w);
int myY = randomNumber(0,(int)h); 
```

这允许生成重复位置（和覆盖单元格）

**更新（使用布局管理器）**

好的，所以这是范式的轻微转变。我没有制作剪辑并将其传递给作品，而是让作品选择如何渲染作品。相反，我将它负责的 Rectangle 传递给它。

这意味着，你可以简单地使用类似的东西`setCell(Rectangle)`来改变一块（除非你非常喜欢拖放；））

`Board`由于 Java 7 下的一些有趣行为，我最终使用了面板，但这是另一个问题；）

```
package puzzel;

import java.awt.BorderLayout;
import java.awt.EventQueue;
import javax.swing.*;

public class PuzzlePieceDriver extends JFrame {

    public PuzzlePieceDriver(ImageIcon myPuzzleImage) {

        setTitle("Hot Puzz");

        setDefaultCloseOperation(EXIT_ON_CLOSE);

        setLayout(new BorderLayout());
        add(new Board(myPuzzleImage));

        pack();

        setVisible(true);

    }//end constructor

    public static void main(String[] args) {

        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {

                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                ImageIcon image = new ImageIcon(PuzzlePieceDriver.class.getResource("/issue459.jpg"));

                PuzzlePieceDriver driver = new PuzzlePieceDriver(image);
                driver.setLocationRelativeTo(null);
                driver.setVisible(true);

            }
        });

    }
}//end class 
```

一块面板...该面板覆盖了`preferred`and `minimum`size 方法...虽然它适用于本示例，但使用`setPreferredSize`and可能会更好`setMiniumumSize`；）

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package puzzel;

import javax.swing.*;
import java.awt.*;
import java.awt.image.*;

public class PuzzlePiece extends JPanel {

    private BufferedImage masterImage;
    private Rectangle pieceBounds;
    private BufferedImage clip;

    public PuzzlePiece(BufferedImage image, Rectangle bounds) {

        masterImage = image;
        pieceBounds = bounds;

        // Make sure the rectangle fits the image
        int width = Math.min(pieceBounds.x + pieceBounds.width, image.getWidth() - pieceBounds.x);
        int height = Math.min(pieceBounds.y + pieceBounds.height, image.getHeight() - pieceBounds.y);

        clip = image.getSubimage(pieceBounds.x, pieceBounds.y, width, height);

    }//end constructor

    @Override
    public Dimension getPreferredSize() {

        return pieceBounds.getSize();

    }

    @Override
    public Dimension getMinimumSize() {

        return getPreferredSize();

    }

    public void paintComponent(Graphics g) {
        super.paintComponent(g);

        int x = 0;
        int y = 0;

        g.drawImage(clip, x, y, this);

        g.setColor(Color.RED);
        g.drawRect(0, 0, getWidth() - 1, getHeight() - 1);

    }//end paintComponent

}//end class PuzzlePiece 
```

板子面板...主要是因为我在使用 Java 7 时遇到的一些有趣问题...实现了一个`MouseListener`，当您运行程序时，单击板子，这很有趣；）

```
package puzzel;

import java.awt.Graphics;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Image;
import java.awt.Rectangle;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.image.BufferedImage;
import java.util.ArrayList;
import java.util.List;
import javax.swing.ImageIcon;
import javax.swing.JPanel;

/**
 *
 * @author shane
 */
public class Board extends JPanel {

    public static final int X_PIECES = 4;
    public static final int Y_PIECES = 4;
    private PuzzlePiece[] puzzle = new PuzzlePiece[X_PIECES * Y_PIECES];

    private static BufferedImage image;

    public Board(ImageIcon myPuzzleImage) {

        image = iconToImage(myPuzzleImage); //pass image into bufferedImage form

        puzzle = createClip();

        addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent e) {

                removeAll();

                invalidate();

                createClip();

//                doLayout();

                invalidate();
                revalidate();
                repaint();

            }
        });

    }

    public static BufferedImage iconToImage(ImageIcon icon) {
        Image img = icon.getImage();
        int w = img.getWidth(null);
        int h = img.getHeight(null);
        BufferedImage image = new BufferedImage(w, h, BufferedImage.TYPE_INT_RGB);
        Graphics g = image.createGraphics();
        // Paint the image onto the buffered image
        g.drawImage(img, 0, 0, null);
        g.dispose();

        return image;
    }//end BufferedImage

    protected int randomNumber(int min, int max) {
        int temp = min + (int) (Math.random() * ((max - min) + 1));

        return temp;
    }//end randomNumber

    private PuzzlePiece[] createClip() {

        int cw, ch;
        int w, h;
        w = image.getWidth(null);
        h = image.getHeight(null);
        cw = w / X_PIECES;
        ch = h / Y_PIECES;

        // Generate a list of cell bounds
        List<Rectangle> lstBounds = new ArrayList<>(25);

        for (int y = 0; y < h; y += ch) {

            for (int x = 0; x < w; x += cw) {

                lstBounds.add(new Rectangle(x, y, cw, ch));

            }

        }

        BufferedImage clip = image;

        setLayout(new GridBagLayout());

        for (int x = 0; x < X_PIECES; x++) {
            for (int y = 0; y < Y_PIECES; y++) {

                // Get a random index
                int index = randomNumber(0, lstBounds.size() - 1);

                // Remove the bounds so we don't duplicate any positions
                Rectangle bounds = lstBounds.remove(index);

                PuzzlePiece piece = new PuzzlePiece(clip, bounds);
                puzzle[x * X_PIECES + y] = piece;

                GridBagConstraints gbc = new GridBagConstraints();
                gbc.gridx = x;
                gbc.gridy = y;
                gbc.fill = GridBagConstraints.BOTH;

                add(piece, gbc);
                piece.invalidate();
                piece.repaint();

            }//end nested for
        }//end for

        invalidate();
        repaint();

        return puzzle;
    }//end createClip

} 
```

现在我知道你最终会问如何移动一块，有一个叫做[getConstraints](http://docs.oracle.com/javase/7/docs/api/java/awt/GridBagLayout.html#getConstraints%28java.awt.Component%29)`GridBagLayout`的奇妙方法，它允许你检索用于布局相关组件的约束。然后您可以修改and值并使用[setConstraints](http://docs.oracle.com/javase/7/docs/api/java/awt/GridBagLayout.html#setConstraints%28java.awt.Component,%20java.awt.GridBagConstraints%29)来更新它（不要忘记调用and ;)）`gridx``gridy``invalidate``repaint`

我建议阅读[如何使用 GridBagLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)以获取更多信息；）

最终，你会得到类似的东西：

![谜题 1](../Images/f7d8a4df11d8ba6169e8493261ac4ba1.png)![谜题 2](../Images/90d461c04d80e2c56be1b976f22e72fc.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-05T20:23:38.180

尝试`setBorder(new LineBorder(Color.RED))`在拼图构造函数中使用以查看拼图的边界在哪里。如果它们在您期望的位置，那么您的定位很可能是错误的。也可以让你的拼图扩展`JComponent`，或者`setOpaque(false)`如果你正在扩展，请使用`JPanel`.

# c# - 不支持 ToString() 方法

> ID：11819673
> 
> 赞同：2
> 
> 时间：2012-08-05T20:07:34.840
> 
> 标签：c#, database, linq-to-sql

我正在尝试在 c# 中创建一个选择列表。我的代码：

```
 var ceremonies = db.Ceremonies;
        var Ceremonies =
            from c in ceremonies
            select new SelectListItem
            {
                Text = c.Name + "_" + c.Date,
                Value = c.Id.ToString()
            }; 
```

但是在这里我遇到了类似的异常`ToString() method not supported`。有什么问题 ？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-05T20:10:50.400

您的查询正在转换为 SQL - 但`ToString`无法正确处理对的调用。通常，解决此问题的最简单方法是将查询有效地拆分为需要在数据库中完成的部分，然后通过以下方式切换到 LINQ to Objects `AsEnumerable`：

```
var ceremonies = db.Ceremonies
                   .Select(c => new { c.Name, c.Date, c.Id }
                   .AsEnumerable()
                   .Select(c => new SelectListItem {
                               Text = c.Name + "_" + c.Date, 
                               Value = c.Id.ToString()
                           }); 
```

顺便说一句，声明两个仅因大小写而异的局部变量会带来非常讨厌的可读性。

# unique-constraint - Entity Framework 5 是否支持唯一约束？

> ID：11819674
> 
> 赞同：19
> 
> 时间：2012-08-05T20:07:38.527
> 
> 标签：unique-constraint, .net-4.5, entity-framework-5

想知道 Entity Framework 5 是否支持实体属性的唯一约束？如果是这样，我如何指定属性应该是唯一的？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-05T20:26:25.180

不，它没有。过去曾计划在 EF 5.0 中包含一个独特的约束功能：

[http://blogs.msdn.com/b/efdesign/archive/2011/03/09/unique-constraints-in-the-entity-framework.aspx](http://blogs.msdn.com/b/efdesign/archive/2011/03/09/unique-constraints-in-the-entity-framework.aspx)

但是您可以看到帖子顶部有更新：

> 更新：此功能已被推迟，不会包含在 Entity Framework 5 中。

您可以对该功能进行投票，以提高其实现的优先级......

[http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/1050579-unique-constraint-ie-candidate-key-support](http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/1050579-unique-constraint-i-e-candidate-key-support)

...因为显然它目前甚至不在 EF 6.0 的路线图上：

[http://entityframework.codeplex.com/wikipage?title=路线图](http://entityframework.codeplex.com/wikipage?title=Roadmap)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-01T16:26:56.550

虽然 EF（撰写本文时为 6.0 版）仍然不支持开箱即用的唯一约束，但 Code First 方法有一些变通方法来获得所需的行为。请参阅基于[属性的解决方案](https://stackoverflow.com/a/22791183/620257)，作为类似问题的答案。适用于 EF 5.0+。

编辑：

**从 EF 6.1 开始支持唯一索引**：

```
[Index(IsUnique = true)]
public string EmailAddress { get; set; } 
```

[对于大多数实际用途，](https://stackoverflow.com/a/3296262)它们与唯一约束相同。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-09-13T11:25:53.553

好吧，我一直在寻找解决方案，最后我找到了。当您在代码中生成迁移时，您可以创建唯一键

```
 CreateTable(
                "dbo.TaBLE",
                c => new
                    {
                        Id = c.Int(nullable: false, identity: true),
                        Date = c.DateTime(nullable: false),
                        Meter_Id = c.Int(),
                    })
                .PrimaryKey(t => t.Id)

                .Index(t => new {t.Meter_Id, t.Date}, true); 
```

插入之前的验证您可以在 BLL 级别上进行，所以我认为它可以解决您的问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-17T16:52:47.173

如上所述，它不受支持，但就目前而言，当我以编程方式创建数据库时（代码优先），我在 init db 部分使用以下代码：

```
MainDBContext mainDBContext = new MainDBContext();

mainDBContext.Database.ExecuteSqlCommand("ALTER TABLE table_name ADD CONSTRAINT uc_FieldName UNIQUE(FieldName)");

mainDBContext.Dispose(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-11T10:53:27.130

我找到了一种解决方法，以实现对实体属性的唯一约束。它真的很直观。请参考我的另一篇文章：

[https://stackoverflow.com/a/16496291/1873113](https://stackoverflow.com/a/16496291/1873113)

# wpf - 动态添加子扩展器

> ID：11819675
> 
> 赞同：2
> 
> 时间：2012-08-05T20:07:42.750
> 
> 标签：wpf, dynamic, expander

有没有办法在运行时创建像这样的 xaml 波纹管的子扩展器？

```
<Expander Header="Building" IsExpanded="True">
    <StackPanel>
        <Expander Header="Sales">
            <StackPanel>
                <TextBlock>6100</TextBlock>
                <TextBlock>6101</TextBlock>
                <TextBlock>6111</TextBlock>
                <TextBlock>6150</TextBlock>
            </StackPanel>
        </Expander>
        <Expander Header="Director">
            <StackPanel>
                <TextBlock>6102</TextBlock>
                <TextBlock>6113</TextBlock>
            </StackPanel>
        </Expander>
    </StackPanel>
</Expander> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T05:07:23.523

为顶部扩展器下的第一个 StackPanel (MainStackPanel) 设置名称。

```
// Add new expander, stack panel and text block.
var newExpander = new Expander {Name = "NewExpander", Header = "New Expander"};
var newstackPanel = new StackPanel {Name = "NewExpanderStackPanel"};
var newtextBlock = new TextBlock {Text = "777"};

// Add above items as children.     
newstackPanel.Children.Add(newtextBlock);
newExpander.Content = newstackPanel;
MainStackPanel.Children.Add(newExpander); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T05:32:18.287

最好的方法可能是使用数据绑定。我假设您有一些数据结构来描述您想要创建的扩展器。假设我们有：

```
class Building
{
    public List<Item> Items { get; }
    public string Name { get; }
}

class Item
{
    public int Number { get; }
} 
```

在我们的用户控件中，我们将设置`DataContext`为`Building`s 列表（例如在构造函数中）：

```
DataContext = GetListOfBuildings(); 
```

然后我们使用两个`ItemsControl`带有模板的嵌套 s 在运行时创建控件：

```
<Expander Header="Building"
          IsExpanded="True">
    <ItemsControl ItemsSource="{Binding}">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Expander Header="{Binding Name}">
                    <ItemsControl ItemsSource="{Binding Items}"
                                  DisplayMemberPath="Number" />
                </Expander>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</Expander> 
```

这样您就不需要在 C# 中创建控件，这在 WPF 中更麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T03:33:06.670

不太确定您想要达到的目标。

如果我理解正确，您可以将代码保存在 .xaml 文件中作为资源并使用应用程序加载它。然后，将该对象添加到可视化树中。

```
 var expander = (Expander) Application.LoadComponent(new Uri("UriToTheXamlFile"));
  control.AddChild(expander); 
```

# html - 使用 SED/AWK/GREP 从 html 中提取 href/url

> ID：11819677
> 
> 赞同：2
> 
> 时间：2012-08-05T20:08:05.080
> 
> 标签：html, parsing, sed, awk

我需要提取两个短语之间的所有网址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T21:07:32.930

```
sed "s:.*Today's Racing\(.*\)Tomorrow's Racing:\1:; s:a href[^\"]*.\([^\"]*\):\n=\:\1\n:g ; s:\n[^=][^\n]*::g ; :r s:^[^=][^\n]*:: ; s:^\n::; tr " FILE 
```

You can also save this script into a file links.sed

```
s:.*Today's Racing\(.*\)Tomorrow's Racing:\1:
s:a href[^\"]*.\([^\"]*\):\n=\:\1\n:g
s:\n[^=][^\n]*::g
:r
s:^[^=][^\n]*::
s:^\n::
tr 
```

and run it

```
sed -i -f links.sed FILE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T20:27:27.710

```
tr '<' '\n' < index.html | csplit -n 2 -s - "%Today's Racing%"
csplit -n 2 -s -f /tmp/t2 /tmp/t100 "/Tomorrow's Racing/"
grep href /tmp/t200 | cut -f 2 -d '"' > url-list.txt
rm /tmp/t100 /tmp/t200 /tmp/t201 
```

注意：这是*非常*不一般的。它不处理注释，只处理单行href，只处理双引号中的href，以及各种其他限制，例如它会找到所有`href`s，而不仅仅是那些属于`a`标签的s。

但它可能适用于你正在做的事情。

还有其他工具可以一次性完成，但这很有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T07:34:03.753

只有 sed、grep 和 cut 实用程序：

```
sed -e 's/</\n/g' index.html |\
sed -n "/Today's Racing/,/Tomorrow's Racing/p" |\
grep href |\
cut -d' ' -f2 
```

# ruby - 哈希语法奇怪

> ID：11819679
> 
> 赞同：0
> 
> 时间：2012-08-05T20:08:31.973
> 
> 标签：ruby

> **可能重复： the**[和](https://stackoverflow.com/questions/8675206/is-there-any-difference-between-the-key-value-and-key-value-hash-no)[hash 表示法](https://stackoverflow.com/questions/8675206/is-there-any-difference-between-the-key-value-and-key-value-hash-no)
> [之间有什么区别吗？`:key =&gt; &ldquo;value&rdquo;``key: &ldquo;value&rdquo;`](https://stackoverflow.com/questions/8675206/is-there-any-difference-between-the-key-value-and-key-value-hash-no)

这有什么区别：

```
method: :delete 
```

和这个？

```
:method => :delete 
```

我猜它与不同版本的 Rails 有关，但不确定。我只在 Rails 3.x 中工作过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T20:22:49.053

它们是完全等价的，除了第一个只能从 ruby​​ 1.9（当然更高）开始使用。

在 ruby​​ 1.8 中，哈希语法使用`=>`，也称为`hash rocket`. 你可以把任何东西放在前面，也可以放在后面，但前面的东西是你的关键，在价值的后面。如果你有一个符号作为键，一个符号作为值，你会写：

```
:method => :delete 
```

但你也可以写

```
{ 1 => 'one', :2 => 'two', 'THREE' => 3 } 
```

现在，对于 ruby​​ 1.9.x，引入了一种新的更短的语法。由于大多数人使用符号作为键，您现在可以编写：

```
method: :delete 
```

这只是一个更短/更清洁的版本。另请注意，可以混合两种样式，这在某些情况下是必需的。

例如，在 ruby​​ 1.8 中，你会写：

```
{ :class => 'smthg', :'data-type' => 'a type' } 
```

这将在 ruby​​ 1.9 中转换为以下内容

```
{ class: 'smthg', :'data-type' => 'a type' } 
```

请注意，您仍然可以继续使用“旧”哈希语法。这是一个偏好问题。对于只有符号作为键的哈希，我个人使用干净/短版本。我通常尽量不要在单个哈希中混合哈希样式:)

# php - 运行一个 PHP 函数只需要 30% 的时间

> ID：11819684
> 
> 赞同：0
> 
> 时间：2012-08-05T20:09:14.987
> 
> 标签：php

我需要帮助创建 PHP 代码来回显和运行一个函数，只有 30% 的时间。

目前我有下面的代码，但它似乎不起作用。

```
if (mt_rand(1, 3) == 2)
{
    echo '';
    theFunctionIWantCalled();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T20:17:25.313

您是否试图回显函数返回的内容？那将是

```
if(mt_rand(1,100) <= 30)
{
    echo function();
} 
```

您当前拥有的内容会回显一个空白语句，然后执行一个函数。我还更改了随机语句。因为这只是伪随机而不是真正的随机，所以更多的选择会让你有更好的机会在 30% 的时间内击中它。

如果您打算回显一个空白语句，然后执行一个函数，

```
if(mt_rand(1,100) <= 30)
{
    echo '';
    function();
} 
```

会是正确的。再一次，我更改了 if 语句以使其分布更均匀。为了帮助确保更均匀的分配，您甚至可以这样做

```
if(mt_rand(1,10000) <= 3000) 
```

因为我们在这里没有处理真正的随机性。该算法完全有可能选择一个数字而不是其他数字。正如这个问题的评论中提到的，由于算法是随机的，它可能会一遍又一遍地选择相同的数字。然而，在实践中，有更多的数字可供选择将很可能导致均匀分布。只有 3 个数字可供选择会扭曲结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T20:25:11.453

由于您使用的是 rand，因此不能保证 30% 的时间都会调用它。您可以在哪里使用模数，这将有效地为您提供 1/3 的时间，但不确定这对您有多重要，但是......

```
$max = 27;

for($i = 1; $i < $max; $i++){
    if($i % 3 == 0){
        call_function_here();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T22:38:11.527

由于模数不适用于浮点数，您可以使用 fmod，此代码应该相当接近，您可以替换总迭代次数和百分比......

```
$total = 50;
$percent = 0.50;

$calls = $total * $percent;
$interval = $total / $calls;

$called = 0;
$notcalled = 0;

for($i = 0; $i <= $total; $i++){
    if(fmod($i, $interval) < 1){
        $called++;
        echo "Called" . "\n";
    }else{
        $notcalled++;
        echo "Not Called" . "\n";
    }
}

echo "Called:  " . $called . "\n";
echo "Not Called: " . $notcalled . "\n"; 
```

# php - PHP：反引号无法使用命令

> ID：11819685
> 
> 赞同：1
> 
> 时间：2012-08-05T20:09:25.790
> 
> 标签：php, bash

我有一个 PHP 脚本，它通过使用反引号运算符在 Bash 中执行命令来从文件中检索 200 行。代码如下所示：

```
$endline = `(shell execution that returns a number here)`;
$line = $endline - "200";
$lines = "sed -n '".$line.", ".$endline." p' log.txt";

echo $lines;
$file = `$lines`;
echo $file; 
```

此代码返回`$lines`as `sed -n '1800, 2000 p' log.txt`，但`$file`不返回任何结果。当直接`sed -n '1800, 2000 p' log.txt`在 Bash 终端中使用时，我得到了预期的结果。

这里做错了什么？字符是否`'`必须转义？

**编辑：** shell脚本在数字后添加了一个空格，因此误读了它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T20:59:54.117

我的猜测是，`$eof`或者您的路径 ( `log.txt`) 不合适。

我复制并粘贴了您的代码，它适用于以下调整：

1.  语法错误已修复（添加`;`到`echo $lines`）
2.  更改`$eof`为（尽管如果有效`$endline`，您可能不需要`$eof`
3.  确保这`log.txt`是一个有效的路径（这很可能是你的错误）

否则，它按预期运行。

它可以在 Bash 中工作但不能在 PHP 中工作的原因是它们的“工作目录”不一定相同。

# php - PHP扫描HTML的图像标签并放入表格

> ID：11819699
> 
> 赞同：-2
> 
> 时间：2012-08-05T20:11:06.223
> 
> 标签：php

我不确定获取包含 img 标签和文本的 HTML 块并能够将它们放入单独的表格单元格的最佳方法。

例如

```
<img src="image.jpg> text
<img src="image2.jpg> text2 
```

至

```
<table>
<tr>
<td><img src="image.jpg></td> <td>text</td>
</tr>
<tr>
<td><img src="image2.jpg></td> <td>text2</td>
</tr> 
```

我认为使用 preg_split 是正确的方法，但不知道从哪里开始表达。此外，我需要以某种方式保留字符串被分割的块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T20:19:03.733

如果必须使用 PHP，我建议使用预制的 HTML dom 解析器。[http://simplehtmldom.sourceforge.net](http://simplehtmldom.sourceforge.net)会很好地工作。该网站有解析图像标签的教程。

尽管您绝对应该使用 jQuery 进行调查。它可能更适合这项任务。

# google-chrome-devtools - 如何在 Mac 上的 Chrome 开发者工具中搜索我所有的 javascript？

> ID：11819700
> 
> 赞同：22
> 
> 时间：2012-08-05T20:11:06.863
> 
> 标签：google-chrome-devtools

在 Windows 机器上，我可以使用`Ctrl`++在使用 Chrome 开发人员工具的“源”选项卡的页面上呈现的 javascript 中查找短语`Shift`。`F`

但是，如果我在 Mac 上使用这个键盘组合，整个页面就会变成全屏。Mac 上用于搜索 javascript 源的类似键盘快捷键是什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-01T00:27:41.533

看起来像`Cmd`+ `Alt`/ `Opt`+`F`作品。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T22:41:58.777

你试过`Cmd`++`Shift`吗`F`？我没有方便的 Mac 来测试它，但通常 Mac 上的 Cmd 键替换 Windows 热键中的 Ctrl 键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-16T03:39:47.717

查看官方 Chrome 开发工具文档： [https ://developer.chrome.com/devtools/docs/shortcuts](https://developer.chrome.com/devtools/docs/shortcuts)

# openerp - Python 调试器与代码不同步

> ID：11819704
> 
> 赞同：1
> 
> 时间：2012-08-05T20:12:18.737
> 
> 标签：openerp, pdb

我正在使用 Python 2.7.3 在 OpenERP 中调试一些东西。使用 Next (n) 命令单步执行时，调试器似乎与代码不同步。请参阅下面的代码和输出。我对 Python 2.6.5 有同样的问题。在使用 Python pdb 之前，我从未经历过这种情况。

我相信这个问题可能与 OpenERP 通过读取下面 OpenERP XML 中的代码字段通过 Python exec() 语句调用我的方法的方式有关。调用动态构造并通过 exec() 调用的 Python 代码是否可能会混淆 pdb 调试器？

如果是这种情况，是否有解决方法？

通过以下 OpenERP 操作调用的代码：

```
<record id="action_wash_st_method1" model="ir.actions.server">
            <field name="type">ir.actions.server</field>
            <field name="condition">True</field>
            <field name="state">code</field>
            <field name="model_id" ref="model_view_tree_display_address_list"/>
            <field eval="5" name="sequence"/>
            <field name="code">
action = self.view_calc_sales_tax(cr, uid, context)
</field>
           <field name="name">wash state action request</field>
</record>

 <record model="ir.values" id="action_wash_st_tax_trigger_method1" >
            <field name="key2" eval="'tree_but_open'" />
            <field name="model" eval="'view.tree.display.address.list'" />
            <field name="name">Method1 Wash State</field>
            <field name="value" eval="'ir.actions.server,%d'%action_wash_st_method1"/>
            <field name="object" eval="True" />
 </record> 
```

# php - 在 CakePHP 中查找内存和 CPU 时间瓶颈

> ID：11819706
> 
> 赞同：3
> 
> 时间：2012-08-05T20:13:07.020
> 
> 标签：php, cakephp, memory-leaks, cakephp-2.0, cpu-usage

我读[了这个](https://stackoverflow.com/questions/1805317/performance-tuning-cakephp-application)，但它不适合我的解决方案。我需要找出我的 CakePHP 2 应用程序中的内存和 CPU 时间瓶颈。在控制器动作中`microtime`，`memory_get_usage`我发现了一些线索。我用这个修复了一些。但是很难一一诊断每个控制器动作。

我需要为每个操作记录 CPU 和内存负载。我打算在我的控制器中放置 2 个全局变量。并在 beforeFilter 和 afterFilter 中计算它们并记录它们以供以后检查。这是正确的方法还是您可以推荐其他解决方案？

```
class AppController extends Controller {

var $requestStartTime = 0;
var $requestDifTime = 0;
var $memoryBefore  = 0;
var $memoryAfter = 0;

function beforeFilter() {
     $requestStartTime  = microtime(true);
     $memoryBefore  =memory_get_usage(true);
}

function afterFilter() {
    $requestDifTime = microtime(true) - $requestStartTime;
    $memoryAfter = memory_get_usage(true);

    $myFile = TMP.'logs'.DS.'mylog.txt';
    $fh = fopen($myFile, 'a');
    $string = "start time:" . $requestStartTime .
              " dif time: " . $requestDifTime 
              " memory usage: " . $memoryBefore . " and " . $memoryAfter
              ."\n";
    fwrite($fh,$string);
    fclose($fh);
}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T00:58:29.003

我在使用 PHP 时发现的最好的工具，包括 CakePHP 在内的任何 PHP 框架都是“ [Xdebug](http://xdebug.org/) ”。Xdebug 是一个 PHP 扩展，可以启用它来提供分析输出文件，这些输出文件可以使用“ [Webgrind](http://code.google.com/p/webgrind/) ”（或 CallGrind 等）等工具进行分析。

Webgrind 将获取 xdebug 跟踪文件，并为您提供时间花费和资源分配的可视化树。这使您能够有选择地深入研究在系统执行期间进行的方法和函数调用，并找出浪费时间的地方以及分配资源的地方。

此外，Xdebug 使您能够开始调试您的应用程序。您可以分配断点、暂停执行、修改值并逐步执行代码，从而为您提供更灵活的开发调试方法。

在使用 CakePHP 构建东西时，以及在 CakePHP 本身的核心上构建时，这一直是一个有价值的工具。

# google-chrome-extension - OAuth 2.0 响应中没有 refresh_token

> ID：11819707
> 
> 赞同：1
> 
> 时间：2012-08-05T20:13:10.530
> 
> 标签：google-chrome-extension, oauth-2.0

我正在开发一个 Google Chrome 扩展程序，并且正在使用 Boris Smus Oauth 2.0 库。

身份验证交换完成，但是，我遇到的问题是，即使我在授权期间指定了 access_type=offline，但在交换期间我从未收到 refresh_token，只有 access_token、expires_in 和 token_type。

我的直觉是，这是因为在我的 API 访问设置中，OAuth2 被设置为 Web 应用程序，并且 Web 应用程序没有被授予离线访问权限。有谁知道这是否正确或是否能够使其工作？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-10-16T07:04:30.380

对于 Google 的 OAuth 客户端，您需要在参数中包含**prompt=consent**才能每次获取 refresh_token，

作为 Google，请勿为后续登录提供 refresh_token。只有**在用户第一次允许访问时才提供 refresh_token**。

有关更多信息，请查看此[https://stackoverflow.com/a/10857806/5752311](https://stackoverflow.com/a/10857806/5752311)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T04:57:47.960

我设法通过在授权网址中添加可选的approval_prompt=force 参数来解决问题。默认情况下，approval_prompt 设置为“自动”。当它设置为“强制”时，刷新令牌会在令牌交换期间出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T04:54:21.650

根据[OAuth 2.0 规范](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2)，refresh_token 是可选的，在隐式授权和客户端凭据授权中不受支持。

既然你提到了 access_type=offline，我猜你正在使用 Facebook API。[Boris Smus 文档](http://smus.com/oauth2-chrome-extensions/)章节VARYING OAUTH IMPLEMENTATIONS 也表示 Facebook 不会返回刷新令牌。

也请阅读[这个问题](https://stackoverflow.com/questions/2687770/do-facebook-oauth-2-0-access-tokens-expire)。

# objective-c - 通过情节提要 UITabBarController 的 iOS 模态对话框

> ID：11819713
> 
> 赞同：0
> 
> 时间：2012-08-05T20:14:42.653
> 
> 标签：objective-c, ios5, storyboard, xcode-storyboard

![故事板](../Images/a7a9ac11ca815b230dddf6cf6434efbf.png)

我希望了解从 A 或 B 过渡到 UITabBarController D（我的应用程序中的主界面）的“最佳”方式 - 有条件地通过 C。

这意味着我希望以下所有内容都有效。

```
A -> C -> D
A -> B -> C -> D
A -> B -> D
A -> D 
```

C 是一个模态对话框，如果用户没有在他们的个人资料中设置它，它基本上会询问用户缺少的信息。

我试过了：

1.  在 D 的 viewDidLoad 函数中使用从 D -> C 触发的模态序列：

    ```
    ([self performSegueWithIdentifier:@"ShowNumberDialog" sender:self];) 
    ```

2.  在 viewDidLoad 函数中以编程方式将 C 显示为 D 上的模态：

    ```
    (void)viewDidLoad
    {
        [super viewDidLoad];

        NSString *deviceNumber = [[UserModel sharedSingleton] deviceNumber];
        if ([deviceNumber isEqual:[NSNull null]]) {

            UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
            UIViewController *vc = [storyboard instantiateViewControllerWithIdentifier:@"NumberDialog"];
            [vc setModalPresentationStyle:UIModalPresentationFullScreen];

            NSLog(@"Showing device number dialog");
           [self presentModalViewController:vc animated:NO];
        }
    } 
    ```

这些，加上我所做的无数其他“hacky”尝试似乎都没有奏效。所以我假设我不了解我应该这样做的方式的基本内容。有人可以推荐一个更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T22:18:04.137

尝试将您拥有的代码移动`ViewDidLoad`到`ViewDidAppear:(BOOL)animated`. 可能发生的情况是，您正在尝试将模态对话框推送到程序中，而到选项卡页 D 的转换仍在发生，这意味着应用程序在继续加载 D`ViewDidAppear:(BOOL)animated`时忽略了您打开模态对话框 C 的请求。您的视图最终对用户可见并完全加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T20:28:04.903

所以基本上我不明白从D到C的“performSegue ...”。用户触发了一个TabBar，所以他必须点击图标才能来到这个控制器。

我会将 C 放在 B 和 D 之间。检查信息是否完整 - 如果没有 -> 转至 C，否则转至 D。

您认为这种方法存在问题吗？

# javascript - 这个脚本有什么作用？（西部数据网站的一部分）

> ID：11819714
> 
> 赞同：-1
> 
> 时间：2012-08-05T20:15:05.897
> 
> 标签：javascript

我发现这是西部数据网站的一部分。我想知道它有什么作用。请帮忙。

```
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-20073-2']);
_gaq.push (['_gat._anonymizeIp']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T20:16:11.823

它是一个[Google Anayltics](http://www.google.com/analytics/)脚本 - 它发送有关访问者的数据以进行报告

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T20:16:28.840

那只是谷歌分析跟踪代码。

# r - 将重复测量混合模型公式从 SAS 转换为 R

> ID：11819720
> 
> 赞同：6
> 
> 时间：2012-08-05T20:15:52.860
> 
> 标签：r, sas, mixed-models

对于更复杂的实验设计，有几个关于混合模型的问题和帖子，所以我认为这个更简单的模型会帮助这个过程中的其他初学者以及我。

所以，我的问题是我想用 sas proc 混合程序在 R 中制定一个重复测量 ancova：

```
proc mixed data=df1;
FitStatistics=akaike
class GROUP person day;
model Y = GROUP X1 / solution alpha=.1 cl;
repeated / type=cs subject=person group=GROUP;
lsmeans GROUP;
run; 
```

这是使用 R 中创建的数据的 SAS 输出（如下）：

```
.           Effect       panel    Estimate       Error      DF    t Value    Pr > |t|     Alpha       Lower       Upper
            Intercept              -9.8693      251.04       7      -0.04      0.9697       0.1     -485.49      465.75
            panel        1         -247.17      112.86       7      -2.19      0.0647       0.1     -460.99    -33.3510
            panel        2               0           .       .        .         .             .           .           .
            X1                     20.4125     10.0228       7       2.04      0.0811       0.1      1.4235     39.4016 
```

下面是我如何使用“nlme”包在 R 中制定模型，但没有得到类似的系数估计：

```
## create reproducible example fake panel data set:
set.seed(94); subject.id = abs(round(rnorm(10)*10000,0))

set.seed(99); sds = rnorm(10,15,5);means = 1:10*runif(10,7,13);trends = runif(10,0.5,2.5)

this = NULL; set.seed(98)
for(i in 1:10) { this = c(this,rnorm(6, mean = means[i], sd = sds[i])*trends[i]*1:6)}
set.seed(97)
that = sort(rep(rnorm(10,mean = 20, sd = 3),6))

df1 = data.frame(day = rep(1:6,10), GROUP = c(rep('TEST',30),rep('CONTROL',30)),
                 Y = this,
                 X1 = that,
                 person = sort(rep(subject.id,6)))

## use package nlme
require(nlme)

## run repeated measures mixed model using compound symmetry covariance structure:
summary(lme(Y ~ GROUP + X1, random = ~ +1 | person,
            correlation=corCompSymm(form=~day|person), na.action = na.exclude,
            data = df1,method='REML')) 
```

现在，我现在意识到的 R 的输出类似于以下的输出`lm()`：

```
 Value Std.Error DF    t-value p-value
(Intercept) -626.1622  527.9890 50 -1.1859379  0.2413
GROUPTEST   -101.3647  156.2940  7 -0.6485518  0.5373
X1            47.0919   22.6698  7  2.0772934  0.0764 
```

我相信我已经接近规范，但不确定我缺少什么来使结果匹配（在合理范围内）。任何帮助，将不胜感激！

**更新：**使用下面答案中的代码，R 输出变为：

```
> summary(model2) 
```

滚动到底部查看参数估计值——看！与 SAS 相同。

```
Linear mixed-effects model fit by REML
 Data: df1 
      AIC      BIC   logLik
  776.942 793.2864 -380.471

Random effects:
 Formula: ~GROUP - 1 | person
 Structure: Diagonal
        GROUPCONTROL GROUPTEST Residual
StdDev:      184.692  14.56864 93.28885

Correlation Structure: Compound symmetry
 Formula: ~day | person 
 Parameter estimate(s):
         Rho 
-0.009929987 
Variance function:
 Structure: Different standard deviations per stratum
 Formula: ~1 | GROUP 
 Parameter estimates:
    TEST  CONTROL 
1.000000 3.068837

Fixed effects: Y ~ GROUP + X1 

                Value Std.Error DF    t-value p-value
(Intercept)   -9.8706 251.04678 50 -0.0393178  0.9688
GROUPTEST   -247.1712 112.85945  7 -2.1900795  0.0647
X1            20.4126  10.02292  7  2.0365914  0.0811 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T00:33:56.477

请尝试以下：

```
model1 <- lme(
  Y ~ GROUP + X1,
  random = ~ GROUP | person,
  correlation = corCompSymm(form = ~ day | person),
  na.action = na.exclude, data = df1, method = "REML"
)
summary(model1) 
```

在这种情况下，我认为`random = ~ groupvar | subjvar`选项 with提供了与选项`R` `lme`类似的结果。`repeated / subject = subjvar group = groupvar``SAS/MIXED`

**编辑：**

SAS/混合

![SAS/混合协方差矩阵](../Images/e5629b5d3d931e998974e9eeca423bf8.png)

R（修改后的模型2）

```
model2 <- lme(
  Y ~ GROUP + X1,
  random = list(person = pdDiag(form = ~ GROUP - 1)),
  correlation = corCompSymm(form = ~ day | person),
  weights = varIdent(form = ~ 1 | GROUP),
  na.action = na.exclude, data = df1, method = "REML"
)
summary(model2) 
```

![R协方差矩阵](../Images/6bf58db231660ddfc8b92c9d885179fe.png)

所以，我认为这些协方差结构非常相似（σ [g1] = τ [g] ² + σ [1]）。

**编辑2：**

协变量估计（SAS/MIXED）：

```
Variance            person          GROUP TEST        8789.23
CS                  person          GROUP TEST         125.79
Variance            person          GROUP CONTROL       82775
CS                  person          GROUP CONTROL       33297 
```

所以

```
TEST group diagonal element
  = 125.79 + 8789.23
  = 8915.02
CONTROL group diagonal element
  = 33297 + 82775
  = 116072 
```

其中对角元素 = σ [k1] + σ [k] ²。

协变量估计（R lme）：

```
Random effects:
 Formula: ~GROUP - 1 | person
 Structure: Diagonal
        GROUP1TEST GROUP2CONTROL Residual
StdDev:   14.56864       184.692 93.28885

Correlation Structure: Compound symmetry
 Formula: ~day | person 
 Parameter estimate(s):
         Rho 
-0.009929987 
Variance function:
 Structure: Different standard deviations per stratum
 Formula: ~1 | GROUP 
 Parameter estimates:
   1TEST 2CONTROL 
1.000000 3.068837 
```

所以

```
TEST group diagonal element
  = 14.56864^2 + (3.068837^0.5 * 93.28885 * -0.009929987) + 93.28885^2
  = 8913.432
CONTROL group diagonal element
  = 184.692^2  + (3.068837^0.5 * 93.28885 * -0.009929987) + (3.068837 * 93.28885)^2
  = 116070.5 
```

其中对角元素 = τ [g] ² + σ [1] + σ [g] ²。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-06T01:34:23.317

哦，这将是一个棘手的问题，如果甚至可以使用标准的 nlme 函数，那么将对 Pinheiro/Bates 进行一些认真的研究。

不过，在您花时间这样做之前，您应该绝对确保这是您需要的确切模型。也许还有其他东西可能更适合您的数据故事。或者也许 R 可以更轻松地做一些同样好的事情，但并不完全相同。

首先，这是我对您在 SAS 中使用这条线所做的事情的看法：

```
repeated / type=cs subject=person group=GROUP; 
```

这`type=cs subject=person`会在同一个人的所有测量值之间产生相关性，并且该相关性对于所有成对的日子都是相同的。这`group=GROUP`允许每个组的相关性不同。

相比之下，这是我对您的 R 代码正在执行的操作的看法：

```
random = ~ +1 | person,
correlation=corCompSymm(form=~day|person) 
```

这段代码实际上是以两种不同的方式添加几乎相同的效果；这`random`条线为每个人添加了随机效应，并且这`correlation`条线在同一个人的所有测量值之间产生了相关性。但是，这两件事几乎是相同的。如果相关性为正，则通过包含其中任何一个，您将获得完全相同的结果。我不确定当你同时包含两者时会发生什么，但我知道只有一个是必要的。无论如何，此代码对所有个体都具有相同的相关性，它不允许每个组都有自己的相关性。

为了让每个组都有自己的相关性，我认为你必须从两个不同的部分构建一个更复杂的相关性结构；我从来没有这样做过，但我很确定我记得 Pinheiro/Bates 这样做过。

您可以考虑改为为人添加一个随机效应，然后让不同组的方差不同`weights=varIdent(form=~1|group)`（请根据记忆，检查我的语法）。这不会完全一样，但讲述了一个类似的故事。SAS 的故事是，某些个体的测量值比其他个体的测量值更相关。考虑这意味着什么，具有较高相关性的个体的测量值将比具有较低相关性的个体的测量值更接近。相比之下，R 中的故事是个体内部测量的可变性会有所不同。考虑到这一点，具有较高可变性的测量具有较低的相关性。所以他们确实讲述了类似的故事，但来自对立面。

甚至有可能（但我会感到惊讶）这两个模型最终成为同一事物的不同参数化。我的直觉是，整体测量可变性会以某种方式有所不同。但即使它们不是同一个东西，写出参数化也是值得的，以确保您理解它们并确保它们正确地描述了您的数据故事。

# python - 修改 Python logger 的输出格式

> ID：11819721
> 
> 赞同：5
> 
> 时间：2012-08-05T20:15:55.423
> 
> 标签：python, logging

我正在尝试修改 Python 记录器的输出以显示进程 ID。

我尝试过的两种方法：

```
import logging
FORMAT = "%(asctime)s %(process)s %(thread)s: %(message)s"
logging.basicConfig(format=FORMAT)
logger = logging.getLogger('my_logger') 
```

和

```
import logging
FORMAT = "%(asctime)s %(process)s %(thread)s: %(message)s"
logger = logging.getLogger('my_logger')
handler = logger.handlers[0]
handler.setFormatter(logging.Formatter(FORMAT)) 
```

纳达。第一个不会改变格式。第二个在我尝试访问时引发索引错误`logger.handlers[0]`。

我不想编写自己的处理程序，只需修改默认处理程序上的格式即可。有没有简单的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T20:18:20.820

第一个改变格式

```
logging.<severity>("message") 
```

换句话说，当您在第一个示例中设置格式时，您不需要获取单独的记录器实例，您可以使用`logging`它自己。话虽如此，如果您正在使用的任何其他模块也使用`logging`.

如果要更改单独记录器的格式，可以使用以下示例：

```
from logging import StreamHandler, Formatter

FORMAT = '%(asctime)-15s %(levelname)-6s %(message)s'
DATE_FORMAT = '%b %d %H:%M:%S'
formatter = Formatter(fmt=FORMAT, datefmt=DATE_FORMAT)
handler = StreamHandler()
handler.setFormatter(formatter)
logger = logging.getLogger(__name__)
logger.addHandler(handler) 
```

# extjs - 使用没有数据存储的 ExtJS 读取器和写入器

> ID：11819724
> 
> 赞同：2
> 
> 时间：2012-08-05T20:16:20.570
> 
> 标签：extjs, extjs4.1

有没有办法在没有存储的情况下利用 ExtJS 的阅读器、编写器、请求等类的强大功能？喜欢通用的 Ajax 请求？我希望能够定义一个阅读器，它可以接受我在应用程序的服务器响应中使用的“数据结构”，并在全球范围内执行功能。例如，如果在任何时候服务器上出现错误，可能会有特定的应用程序代码供读者解释并构建带有错误消息的窗口对话框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T21:41:13.293

Reader 和 Writer 实际上是 Proxies 的配置，有一个 Ajax 版本。您不必拥有商店即可使用代理 - 您可以在没有商店的情况下“手动”使用代理。

存储用于将模型与从服务器/本地存储加载的一组记录链接。它们也大量用于网格、树、数据视图等。但如果你坚持不使用它们 - 你可以。

至于您问题的第二部分-无论您选择哪种类型的服务器通信（Ajax / Rest / Direct），都有一种方法可以从服务器捕获异常。对于某些人来说，它比其他人更棘手（请参阅此[线程](https://stackoverflow.com/questions/11626428/extjs4-global-network-exception-listener/11632962)，了解 Ajax 可能存在的问题）。尽管如果您深入研究一下 ExtJS 库代码，所有这些都可以很容易地解决。在我的情况下，我使用的是 direct 并且类似于以下内容（在 application 中`launch()`）几乎可以捕获所有服务器问题（您只需要确保您的服务器抛出异常）：

```
 Ext.direct.Manager.on('exception', function(e, provide, eOpts) {
        Ext.MessageBox.alert('Server Error', e.message);
    }); 
```

要使用 AJAX 做类似的事情，您将拥有：

```
Ext.Ajax.on('requestcomplete', function( iConn, iResponse, iOptions, ieOpts ){
    // do something with iResponse here    
}); 
```

# django - Django：将过滤（和排序）添加到基于（通用）类的ListView的最佳方法？

> ID：11819726
> 
> 赞同：6
> 
> 时间：2012-08-05T20:16:37.233
> 
> 标签：django, sorting, filter, django-generic-views

假设我有一个这样的模型：

```
class Car(models.Model):
    BRANDS = (
        ('FRD', 'Ford'),
        ('MCD', 'Mercedes'),
        ...
    )
    brand = models.CharField(max_length=3, choices=BRANDS)
    color = models.CharField(max_length=24)
    url = models.URLField()
    new = models.BooleanField(default=False) 
```

并希望使用基于类的通用视图生成列表视图：

在 urls.py

```
url(r'^car/list/$', CarList.as_view(), name='car_list'), 
```

在views.py

```
class CarList(ListView):
    model = Car
    template_name = "list.html"
    def get_queryset(self):
        return Car.objects.all() 
```

在 list.html 中

```
{% for car in cars %}
    <tr>
        <td>{{ car.brand }}</td>
        <td>{{ car.color }}</td>
        <td>{{ car.url }}</td>
        <td>{{ car.new }}</td>
    </tr> 
```

现在我想提供一些选项来在查询集上添加过滤器（以及每列的排序选项）。例如，在任何列上执行 %LIKE% 的一般搜索框，或者从品牌选择中进行选择或每列简单的 asc/desc。

我知道过滤器和排序最终会在查询集（`get_queryset`）中结束，但这需要在模板和查看代码中进行大量特定工作，而我觉得应该有一些包可以帮助实现这一点？

有人给我指路吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T04:44:47.187

[Django Packages](http://www.djangopackages.com/)是一个寻找的好地方，你猜对了，Django 包 :-)。我以前没有使用过它，但快速浏览一下你可能会发现[django-tables2](http://www.djangopackages.com/packages/p/django-tables2/)很有帮助。我猜还有其他值得考虑的。

# javascript - 如何让 exe 在 HTML 或 JavaScript 中运行？

> ID：11819731
> 
> 赞同：0
> 
> 时间：2012-08-05T20:17:04.103
> 
> 标签：javascript, html

我听说过很多关于这会造成太多安全威胁的事情，但是这个站点只能在保存它的计算机上运行。我试过`<a href= "/app.exe">`了，但只有在 IE 中才会询问你是否要运行它。

# ios - 没有数据连接时是否可以获取经纬度？

> ID：11819734
> 
> 赞同：-4
> 
> 时间：2012-08-05T20:17:12.937
> 
> 标签：ios, core-location

在既没有蜂窝网络也没有 WiFi 连接的情况下，是否可以获得经度和纬度信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T20:39:25.403

一位苹果人士在开发论坛上表示：“所有配备 3G 无线电的 iOS 设备都具有真实、真实、诚实的卫星通信 GPS（这包括除第一个之外的所有 iPhone，以及所有配备 3G 的 iPad）。”

这意味着 Core Location 将返回一个具有纬度和经度的 Location 对象，而无需通过 wifi 或手机访问互联网，因为板载 GPS 接收器。尝试使用 MapKit 显示地图当然需要互联网连接才能获取地图图块。但是只要得到纬度/经度就可以了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T20:50:59.107

iOS 位置 API 将您与位置源（GPS/3G/Wifi 等）隔离开来。你得到的是坐标、精度、时间戳[等](http://developer.apple.com/library/ios/#DOCUMENTATION/CoreLocation/Reference/CLLocation_Class/CLLocation/CLLocation.html)。在初始化位置 API 时，您可能会得到旧坐标。如果它们太旧而对您有用，您需要检查时间戳。这可以为您提供最后一个已知位置，这很有用。如果没有 Wifi 或 3G 并且您只依赖 GPS，那么它在大多数情况下都无法在室内工作！

# jquery - load() 响应正确，但 html 未加载到 div

> ID：11819737
> 
> 赞同：0
> 
> 时间：2012-08-05T20:17:30.003
> 
> 标签：jquery

我有一个 AJAX 请求，`post-bid.php`这是此调用的结果：

```
$('#alert-container').load("post-bid.php", data); 
```

根据firebug，这个AJAX请求返回以下代码：

```
<script type="text/javascript"> $(document).ready(function() {alert("My alert")}); </script> 
```

我在上面有这行代码`load()`：

```
<div id="alert-container"></div> 
```

然而没有 HTML 被加载到这个 div 中。有任何想法吗？

**解决方案**：我只需要将数据返回给`load()`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T20:41:07.743

如果您收到的内容是：

```
<script type="text/javascript">
    $(document).ready(
        function() {
            alert("My alert")
    });
</script> 
```

您`div`是空的，因为您没有收到任何 Html，而只收到了脚本内容，在将内容传递给`.html()`目标元素之前将其剥离。

您是否希望脚本内容在`#alert-container`div 中呈现，或者您是否希望脚本在`.load()`请求期间执行？

**编辑**

> 根据在 AJAX 请求中运行的一些 php，有什么好的方法可以有条件地弹出警报？

根据`load()` [http://api.jquery.com/load/](http://api.jquery.com/load/)，您似乎可以使用回调来断言返回值，然后在调用成功时弹出警报。在返回的任何 html 呈现到目标元素后执行成功回调。

```
$('#alert-container').load("post-bid.php", data, function(responseText, textStatus, XMLHttpRequest){
    // textStatus = 'success' if the call was successful.
    if(textStatus == 'success'){
        alert("My alert");
    }
}); 
```

此外，如果您查看文档的底部，还有一个关于如何处理错误的示例。

**编辑**

> 我不希望 AJAX 请求成功时弹出警报。我希望在 AJAX 请求的一些 php 代码运行后弹出警报。我希望警报来自这个 php 代码，而不是来自 load() 函数

在那种情况下，我会重新考虑设计。您的 php 应该只返回要显示的消息，并让调用代码担心`how`显示它。

您可以为此使用[**ajax 帖子**](http://api.jquery.com/jQuery.post/)。

```
$.post('post-bid.php', data, function(message){
    if(message.length > 0)
    {
        alert(message);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T20:55:07.140

起初我也无法让它工作，但我`document.ready`在加载代码周围加上了一个，它工作了。

**HTML**

```
<button id="click">Click</button> 
```

**test1.html 的内容**

```
{"result": "true"} 
```

**JavaScript**

```
$(document).ready(function(){
    $('#click').click(function(){
        $.getJSON("test1.html", function(data){
            if (data["result"] == "true") {
                alert("My alert");
            }
        });
    });
}); 
```

# spring-mvc - Spring Webflow 2 - 没有 bean 的基本条件流

> ID：11819743
> 
> 赞同：1
> 
> 时间：2012-08-05T20:18:39.290
> 
> 标签：spring-mvc, spring-webflow

我是 SWF (2.3.1) 的新手，我正在四处玩耍，看看我是否能得到一些基本的工作。当我说“基本”时，我的意思是基本的。在这个阶段，如果我可以避免它，我想避免编写任何 java.lang. 我只想让一个快速而肮脏的流程工作，理想情况下全部在流程配置中。

我已经设法让一个非常基本的线性流程工作，从视图状态（屏幕？） A 到 B 到 C（AboutYou 到 AboutYourCar 到 YourQuote）

```
<?xml version="1.0" encoding="UTF-8"?>
<flow xmlns="http://www.springframework.org/schema/webflow" 
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        xsi:schemaLocation="http://www.springframework.org/schema/webflow 
                            http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd">

    <view-state id="AboutYou" view="/WEB-INF/views/jsp/motor/AboutYou.jsp">
        <transition on="Next" to="AboutYourCar" />
    </view-state>

    <view-state id="AboutYourCar" view="/WEB-INF/views/jsp/motor/AboutYourCar.jsp">
        <transition on="Back" to="AboutYou" />
        <transition on="Next" to="YourQuote" />
    </view-state>                               

    <view-state id="Modifications" view="/WEB-INF/views/js/motor/Modifications.jsp">
        <transition on="Back" to="AboutYourCar" />  
    </view-state>

    <view-state id="YourQuote" view="/WEB-INF/views/jsp/motor/YourQuote.jsp">
        <transition on="Back" to="AboutYou" />
    </view-state>                               
</flow> 
```

在 AboutYourCar 视图中，我有一个输入字段询问汽车是否已被修改：

```
Is your car modified?
<input type="radio" name="modified" value="No">
<input type="radio" name="modified" value="Yes"> 
```

如果请求参数“已修改”为“是”，我想做的是转到“修改”视图状态；但我不知道该怎么做。

我想我可以让它在动作状态下工作，但是（据我所知）你需要提供一个动作 bean 来执行一些逻辑。

我也认为我可以使用决策状态，但同样，我不确定我会如何编写它。

或者也许我的整个方法是错误的，修改不是视图状态，但实际上应该是子视图？

任何人都可以提供的任何帮助将不胜感激，

谢谢，内森

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T12:55:00.823

就像是：

```
<decision-state id="checkSelection">
    <if test="requestParameters.modified == 'Yes'" then="Modifications" else="YourQuote"/>
</decision-state> 
```

请参阅[Spring EL](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/expressions.html)了解您可以使用流配置文件中可用的表达式语言（有或没有您自己的 Java 对象）和[EL 变量](https://docs.spring.io/spring-webflow/docs/2.4.7.RELEASE/reference/html/el.html#el-variables)来了解 Spring WebFlow 可用的隐式变量。

# events - 如何在 FoxPro 中指定 COM 事件回调？

> ID：11819745
> 
> 赞同：0
> 
> 时间：2012-08-05T20:18:47.830
> 
> 标签：events, com, callback, foxpro, mappoint

自从我使用 FoxPro 做任何事情以来已经有很多年了，但是我有一个需要工作的遗留系统。好的，我可以从 FoxPro 调用基于 COM 的应用程序，例如 MapPoint 或 Excel。我以前做过。但是，如何将函数或对象方法作为事件回调传递？甚至可能吗？（我在网上找不到任何东西或我设法找到的 FoxPro 书籍）

以下是我的意思的 VB6 示例，取自 MapPoint 文档。碰巧`OnConnection()`它本身就是一个回调；但调用`moaApp.AddCommand()`将回调函数 () 的引用作为菜单回调传递`SayHello()`给 MapPoint ( )。`moApp`这对这个问题并不重要，但我可能需要捕获 Save、Quit 和 Menu 回调事件。

```
Dim moaApp As MapPoint.Application
Public Sub SayHello()
MsgBox "Hello"
End Sub

Private Sub AddinInstance_OnConnection(ByVal Application As Object, ByVal ConnectMode As
AddInDesignerObjects.ext_ConnectMode, ByVal AddInInst As Object, custom() As Variant)
On Error GoTo error_handler

Set moaApp = Application

'Add this command to the menu (HOW DO I DO THIS IN FOXPRO?)
moaApp.AddCommand "Saying Hello", "SayHello", Me

Exit Sub

error_handler:

MsgBox Err.Description

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T17:07:57.933

感谢@Alan B 的领导，我已经设法让它工作了......

通过创建实现所需事件接口的 COM 类来捕获事件。接口中的所有事件都必须实现，尽管它们可以是空实现。

例如

```
&& Create an event handler
oHandler = CREATEOBJECT("MapPointEventHandler") 

&& Connect our _ApplicationEvents implementation
EVENTHANDLER( oMyMapPointApp, oHandler)

&& Here is our event handler

DEFINE CLASS MapPointEventHHandler AS Session OLEPUBLIC 
IMPLEMENTS _ApplicationEvents IN "MapPoint.Application"

 && Call back when MapPoint Quits

   PROCEDURE _ApplicationEvents_Quit()  
      MESSAGEBOX("QuitHandler called")
   ENDPROC

   && Event indicates MapPoint is about to close
   PROCEDURE _ApplicationEvents_BeforeClose( bcancel as logical) AS VOID
      MESSAGEBOX("before close called")
   ENDPROC

   && These events are not used here, but must be defined for COM/class compatibility
   PROCEDURE _ApplicationEvents_BeforeSave( SaveAsUI AS logical @, bcancel as logical) AS VOID
      *? PROGRAM()
   ENDPROC
   PROCEDURE _ApplicationEvents_New() AS VOID
      *? PROGRAM()
   ENDPROC
   PROCEDURE _ApplicationEvents_Open() AS VOID
      *? PROGRAM()
   ENDPROC    

ENDDEFINE 
```

也可以传递方法（例如，用于菜单项），但这些方法不能传递给同一个类。您需要为您希望实现的每个事件处理程序接口实现一个类，以及一个单独的类来处理菜单回调。

这是一个带有菜单项的示例：

```
&& Create a menu handler
oMyMenu = CREATEOBJECT("MapPointMenuHandler") 

&& Add our Tools menu entries and hook them up
oMyMapPointApp.AddCommand("Custom Menu Item", "MyMenuCallBack", oMyMenu)

&& This class implements the Tools menu callbacks
&& *** NOTE: MessageBox will appear UNDER MapPoint

DEFINE CLASS MapPointMenuHandler AS Session OLEPUBLIC 

   PROCEDURE MyMenuCallback()
      MESSAGEBOX("Main Menu callback")
   ENDPROC  

ENDDEFINE 
```

# trigger.io - 如何从 trigger.io API 访问 iPhone 拨号键盘

> ID：11819750
> 
> 赞同：1
> 
> 时间：2012-08-05T20:19:05.047
> 
> 标签：trigger.io

如何在 trigger.io 应用中显示拨号键盘？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T18:52:54.527

使用 HTML5 数字输入应该会导致默认数字键盘出现在设备上：

```
<input name="txtPhone" id="txtPhone" value="" type="number"> 
```

# algorithm - “分配问题”不需要找到最小值/最大值而只是一个有效的分配？

> ID：11819753
> 
> 赞同：-1
> 
> 时间：2012-08-05T20:19:36.357
> 
> 标签：algorithm, graph

我正在阅读一个对我来说似乎是分配问题的问题。这是摘要：一家公司有 N 个工作。N 个候选人来申请它，但在不同的时间。

给定一个 NxN 矩阵，其中单元格 (i,j) 表示求职者 i 接近第 j 个公司的时间。您必须找到有效**的一对一作业**。如果将工作分配给候选人，则该候选人不会寻找更多工作**。没有两个候选人必须获得相同的工作。此外，在任何给定时刻，不得有两个候选人在同一个工作办公室。**输出应该是任何一个排列满足上述约束。

例如：输入：

1 2 3

4 5 6

7 8 9

输出：

3 2 1

解释：在时间=1秒，第一个候选人去第一份工作。然后在时间=2秒，去第二份工作。但他最终在时间3被分配了工作3。然后在第5秒，工作2将被分配给第二份工作。所以他不会在时间=6时去工作3。那么最后第1个工作将在t=7时分配给第3个cand。

请注意，任何其他排列都是不正确的。对于输出 (1 2 3) 将是错误的，因为第一个候选人将被分配第一个工作。所以他不会寻找工作 2 和 3。但是在 4 秒时，第二个候选人会也申请已经有第一人在办公室的第一份工作。

我的问题是如何处理此类分配问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T23:54:29.003

这是目前正在进行的 CodeChef 八月挑战编程竞赛的 BLOCKING 问题。在比赛进行时要求这些提示是违反规则的。

[http://www.codechef.com/AUG12/problems/BLOCKING](http://www.codechef.com/AUG12/problems/BLOCKING)

周末比赛结束后，您将能够通过查看其他竞争对手的答案来获得答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T22:37:09.433

如果您按时间排序（i，j），那么现在哪个人最后申请了工作，给那个人那个工作。仍然会有人在更早的时间从事所有其他工作（因为否则它不会是最长时间）。现在继续重复这个，你会很快得到一个作业：

```
matrix = [[1, 2, 3],
[4, 5, 6],
[7, 8, 9]]

dictionary = {}
for person in range(3):
    for job in range(3):
        time = matrix[person][job]
        dictionary[time] = (person, job)

ordered_time = sorted(dictionary.keys(), reverse=True)

taken_job = set()
taken_person = set()
assignment = []
for time in ordered_time:
    person, job = dictionary[time]
    if person not in taken_person and job not in taken_job:
        assignment.append("t=%s, i=%s, j=%s" % (time, person, job))
        taken_job.add(job)
        taken_person.add(person)

print(assignment)
#['t=9, i=2, j=2', 't=5, i=1, j=1', 't=1, i=0, j=0'] 
```

# gedit - LXDE 中的 gedit：黑条

> ID：11819756
> 
> 赞同：5
> 
> 时间：2012-08-05T20:19:41.857
> 
> 标签：gedit

我正在使用带有 LXDE 桌面环境的 Ubuntu 12.04。

当我使用普通的 Ubuntu 桌面时，一切正常。但是，当我使用 LXDE 时，所有打开文件的栏都是黑色的。你可以在这里看到我的意思：

![](../Images/a35a771c50b762ec0f58948d11eebcb3.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-04T03:42:38.680

我想我找到了一个可行的解决方案。我使用 lxappearance 将 LXDE 主题更改为 Radiance。Gedit 现在没有黑条了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T15:42:28.370

该问题似乎与不兼容 GTK 3 的 LXDE 主题有关。有一些建议可以解决该问题，并在此处提供更多详细信息的相关链接：

[http://forum.xfce.org/viewtopic.php?id=7127](http://forum.xfce.org/viewtopic.php?id=7127)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-03T15:04:17.390

因为这在这里没有很好的答案，我在 XFCE 中遇到了同样的问题。[我在 AskUbuntu 上问了一个非常相似的问题](https://askubuntu.com/questions/476249/in-xubuntu-there-are-black-unreadable-tabs-in-gtk-applications-such-as-gedit)

`xfce4-appearance-settings`修复就像从“设置”->“外观”下的主菜单中的可用对话框中选择不同的主题一样简单。在 LXDE 中，更改主题的方法是使用`lxappearance`codefx 在他的回答中声明的命令。

![xfce 外观对话框](../Images/4226eb04004c1fc62e7cf6ab6228e020.png)

“Raleigh”和“Industrial”主题就有这个问题。许多其他人，如“灰鸟”、“猎户座”和“光辉”都没有。

这是使用“Orion”主题修复的问题：

![在此处输入图像描述](../Images/6a3af51124743b5264e81b17fb28742b.png)

# c# - 获取蜂窝模式上的单元格坐标

> ID：11819759
> 
> 赞同：5
> 
> 时间：2012-08-05T20:20:05.693
> 
> 标签：c#, .net, winforms, graphics, gdi+

我必须绘制一个蜂窝图案并识别 mousemove 上的每个单元格（行、列）。 ![蜂窝图说明](../Images/36a8a342395647a6b486761c43b557cb.png)

这就是我生成图表的方式。

```
protected override void GenerateGridBitmap()
    {
        if (_circleGrid != null)
        {
            _circleGrid.Dispose();
            _circleGrid = null;
        }
        Bitmap _texture = new Bitmap(circleSize, circleSize);
        using (Graphics g = Graphics.FromImage(_texture))
        {
            g.SmoothingMode = SmoothingMode.HighQuality;
            g.InterpolationMode = InterpolationMode.HighQualityBicubic;
            g.PixelOffsetMode = PixelOffsetMode.HighQuality;
            Rectangle r = new Rectangle(0, 0, circleSize, circleSize);
            g.DrawEllipse(Pens.Black, r);
        }

        Bitmap rowBlock = new Bitmap(CanvasSize.Width - (circleSize/ 2), circleSize);

        using (Brush b = new TextureBrush(_texture))
        {
            using (Graphics g = Graphics.FromImage(rowBlock))
            {
                g.CompositingQuality = CompositingQuality.HighQuality;
                g.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBicubic;
                g.SmoothingMode = SmoothingMode.HighQuality;
                g.FillRectangle(b, new Rectangle(new Point(0, 0), rowBlock.Size));
            }
        }
        //rowBlock.Save("rowblock.bmp");
        _circleGrid = new Bitmap(CanvasSize.Width, CanvasSize.Height);
        using (Graphics g = Graphics.FromImage(_circleGrid))
        {
            g.CompositingQuality = CompositingQuality.HighQuality;
            g.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBicubic;
            g.SmoothingMode = SmoothingMode.HighQuality;
            int x, y;
            for (int i = 0; i < rows; i++)
            {
                x = 0;
                if (i % 2 != 0)
                    x = (circleSize/ 2);

                y = (i * circleSize);
                if (i != 0)
                {
                    y -= (VERTICAL_PIXEL_OFFSET * i);
                }
                g.DrawImage(rowBlock, x, y);
                //g.DrawImage(DrawCodedCrystal(i,rowBlock), x, y);
                Console.WriteLine(i);
            }
        }
        _circleGrid.Save("grid.bmp");
        Console.WriteLine(_circleGrid.Size);
        _texture.Dispose();
        _texture = null;
        rowBlock.Dispose();
        rowBlock = null;
    } 
```

这就是我为获取图形坐标所做的工作。但问题是我能够完美地获得专栏。但对于这一行，我认为计算上存在细微差别。例如。在第 99 行，对于 (1/4) 圈，它说 {row 98}，对于剩余的圈，它说 {row 99}。偏差随着行数的增加而增加。

```
protected override CanvasCell GetCanvasCellAt(int x, int y)
    {

        Rectangle rect = GetImageViewPort();
        Point pt = new Point(x, y);

        CanvasCell c = new CanvasCell() { Row = -1, Column = -1 };
        if (rect.Contains(pt))
        {
            double zoomedCircleSize = CircleSize * ZoomFactor;
            Point p = pt;// PointToClient(new Point(x, y));
            p.X -= (int)(rect.X + (AutoScrollPosition.X) );
            p.Y -= (int)(rect.Y + (AutoScrollPosition.Y));

            int row = (int)((p.Y) / (zoomedCircleSize));
            //row = (int)((p.Y + (row * ZoomFactor)) / zoomedCircleSize);
            int col;
            if (row % 2 != 0)
            {
                if (p.X >= 0 && p.X < (zoomedCircleSize / 2))
                {
                    col = -1;
                }
                else
                    col = (int)((p.X - (zoomedCircleSize / 2)) / zoomedCircleSize);
            }
            else
            {
                if (p.X > (zoomedCircleSize * cols))
                {
                    col = -1;
                }
                else
                {
                    col = (int)((p.X) / zoomedCircleSize);

                }
            }
            //if (!GetRectangle(row, col).ContainsWithInBoundingCircle(p))
            //{
            //    c.Column = -1;
            //    c.Row = -1;
            //}
            //else
            {
                c.Column = col;
                c.Row = row;
            }
        }
        //

        return c;
    } 
```

希望我能清楚地解释我的问题。

编辑： VERTICAL_PIXEL_OFFSET 为 1，圆圈大小为 16

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T00:14:31.037

我还在 msdn 上发布了这篇文章，Stefan Hoffmann 很友好地发布了一个关于如何做到这一点的 SSCCE。正如@usr 在评论部分所建议的那样，基本上这个想法是预先计算蜂窝。这是[MSDN](http://social.msdn.microsoft.com/Forums/en-AU/csharpgeneral/thread/36e4cec0-1638-473a-af8c-86ec4da7e5f0)帖子的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T00:31:32.463

快速观察：你必须使用圆圈吗？六边形会简化问题吗？

# wpf - 使用 Sandcastle Help File Builder (SHFB) 的文档中未出现摘要

> ID：11819761
> 
> 赞同：1
> 
> 时间：2012-08-05T20:20:19.297
> 
> 标签：wpf, c#-4.0, sandcastle

我使用 Sandcastle 来记录我的 C# 桌面 Windows 应用程序。我正在使用 Sandcastle Help File Builder (SHFB) 并包含 *.sln 或 *.csproj 文件来提取信息并将其作为 *chm 文档文件。它已编译但无法正常工作，因为我已经添加了这样的评论

```
 /// <summary>
    /// Create form to display the GUI to process the data of CPRI and XIO links in side the data grids.
    /// </summary> 
```

但它没有出现在 FORM1 类和其他类的文档（chm）文件中。我已经在其他类中以类似的方式包含了其他摘要，但它也没有包含。知道吗？

不知道哪里缺。。。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:21:59.177

我得到了解决方案。默认情况下，在 Sandcastle 帮助文件生成器 (SHFB) 的“可见性”部分中，Document Private 和 Document Private 字段为 false，当我将其设为 True 时，它​​对我有用。

![将可见性部分中的 Document Private 和 Document Private 字段设置为 True](../Images/401079aea42f19525e892264d8225385.png)

# objective-c - Cocos2d 中的“尝试使用前向类‘Game’作为‘MathGame’的超类”

> ID：11819764
> 
> 赞同：17
> 
> 时间：2012-08-05T20:20:41.203
> 
> 标签：objective-c, inheritance, import, forward-declaration

我正在为 iphone 制作一个 Cocos2d 游戏，我有我的主游戏模式`Game`，它继承自`CCLayer`.

我正在尝试制作另一种游戏模式，`MathGame`它继承自`Game`，但是当我尝试编译时，出现以下错误`MathGame.h`：

> 尝试使用前向类“Game”作为“MathGame”的超类

即使实现和接口为`MathGame`空，我也会收到错误消息。只有当我尝试包含`MathGame.h`在另一个文件中时才会发生这种情况。

下面是 Game 类的代码：

```
// Game.h
#import "cocos2d.h"
#import <GameKit/GameKit.h>
#import "SplashScreenLayer.h"

@interface Game : CCLayer
    // A bunch of stuff
@end 
```

新游戏类型：

```
// MathGame.h
#import "Game.h"

@interface MathGame : Game
@end 
```

主菜单包括两者：

```
// SplashScreen.h
#import "cocos2d.h"
#import "Game.h"
#import "MathGame.h"
#import "HowToPlayLayer.h"
#import "AboutLayer.h"

@interface SplashScreenLayer : CCLayer
    // A bunch of stuff
@end 
```

我在网上找不到任何有用的东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-06T03:21:25.910

您只需一个导入周期：

1.  `Game`进口`SplashScreenLayer`
2.  `SplashScreenLayer`进口`MathGame`
3.  `MathGame`进口`Game`

您的解决方案：

保留`import`内部`MathGame`，并将其他导入更改为[@class](https://stackoverflow.com/questions/322597/class-vs-import)。

把它们加起来：

```
// 游戏.h
#import "cocos2d.h"
#import <GameKit/GameKit.h>

@class SplashScreenLayer;
@界面游戏：CCLayer
    //一堆东西
@结尾

新游戏类型：

// 数学游戏.h
#import "游戏.h"

@interface MathGame：游戏
@结尾

主菜单包括两者：

// 闪屏.h
#import "cocos2d.h"
#import "HowToPlayLayer.h"
#import "AboutLayer.h"

@类游戏；
@类数学游戏；
@interface SplashScreenLayer : CCLayer
    //一堆东西
@结尾

```

* * *

上面回答了您的问题，让我解释一下我从阅读有关前向声明和导入周期中已经知道的一些事情：

首先，去了解他们！它们是 Objective-C 中非常重要的一部分，你不想错过！

其次，当您需要该类作为私有变量或方法参数时，请使用 @class。将导入用于继承和**强**属性。

第三，不要忘记`#import`在实现文件中转发你的类！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T05:43:52.883

在我的情况下，我使用 xx 类并使用@class 但不使用#import .h 文件。并且编译抱怨..

# java - KMP前缀表运行时间

> ID：11819766
> 
> 赞同：1
> 
> 时间：2012-08-05T20:20:51.537
> 
> 标签：java, performance, algorithm, string-matching

我写了一个代码来填充 KMP 的前缀表。这是这个[算法](http://keithschwarz.com/interesting/code/?dir=knuth-morris-pratt)的一个小变种。我无法说服自己这个算法/​​实现在 O(n) 时间内运行。我很难弄清楚第二次递归调用对总运行时间的影响。有什么帮助吗？

```
 public void fillFailTable(int[] failTable,String p){
        failTable[failTable.length-1] = preLength(failTable,p);
    }

    private int preLength(int[] failTable,String s){

        if(s.length() == 1){
            return 0;
        }
        int n = s.length();
        int k = preLength(failTable,s.substring(0,n-1));

        failTable[n-2] = k;

        if(s.charAt(k) == s.charAt(n-1)){
            return k+1;
        }else{
            return preLength(failTable,s.substring(n-1-k));
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T21:52:47.147

这实际上很有趣（我仍然想知道为什么没有比我更聪明的人回答这个问题）。请用一粒盐来解释这个解释，因为我不是 100% 确定这甚至接近正确（尽管我可以 100% 告诉你这个方法在 O(n) 中运行，因为这是他们在大学几年前，但他们并没有费心解释它，d'uh，所以我不得不自己想出它）。

好的，让我们从一个非常基本的 s.length = 2 示例开始。事先要提两件事：

*   在每个示例中，我们只担心最坏的情况，因为我们对 Big Oh 感兴趣，这意味着我们进入第二个 preLength() 方法。
*   我们可以观察到，在查找 Big Oh 时，此代码中的“k”（以及 preLength() 返回的值）将始终为 0，您会在下图中注意到这一点，这*非常*重要。

## s.length == 2

我们首先进入第一个 preLength() 方法（我们称之为 *），现在调用 s.length = 1 并立即返回 0。现在因为我们只考虑最坏的情况（意思是 s.charAt( k) != s.charAt(n-1)) 我们输入第二个 preLength() 以及长度 = 1 的字符串（因为 n=2 和 k=0）。这个也立即返回一个 0 给我们的 *. 这结束了我们的方法调用。我们总共有 3 个方法调用。我们的 * 和两个 preLength()。这是一张图片：

![在此处输入图像描述](../Images/71212de4a32a14866b2b01c79d9f7f87.png)

## s.length == 3

现在让我们看一个起始 s.length = 3 的示例。您可以注意到，我们立即调用 s.length = 2 的 preLength()，从我们之前的示例中，我们知道这需要 3 次方法调用。现在我们需要记住，当方法 preLength(2) 这次返回时，它会返回到我们的原生 preLength(3)，它现在将再次调用 preLength(2)（else 中的那个），这将再次需要 3 次方法调用。所以我们总共需要 2*3+1 次方法调用。这给了我们 7。再次，这是一个图像（一个圆圈是 preLength 的调用，带有圆圈中显示的长度的字符串）：

![在此处输入图像描述](../Images/4713e31b69e498c3c870edc0dcc27abb.png)

## 结论

**现在你可以看到所有这些方法调用都是**对称的——那是因为我们`k`总是等于 0，这意味着第二个 preLengt() 将使用与第一个相同大小的字符串被调用——我们可以看到如何当我们知道需要多少它们时，我们将需要它们中的许多，因为函数在哪里告诉我们需要多少次方法调用来计算大小字符串的表。这是有效的，因为正如我之前所说的方法调用是对称的（**这是因为在最坏的情况下 k=0 总是并且 preLenght() 总是返回 0**，因此 2* 并且我们需要添加 1 个方法调用，这是我们曾经调用的第一个） .**`s.length = m``m-1``f(m) = 2*f(m-1)+1``f(m)``m`**

 ****所以基本上随着我们输入的每次增量（大小`m`）计算时间增长 2 倍加上 1 (2*m+1)，据我了解，这意味着这种方法在最坏的情况下是 O(n)。

正如我所说的，请务必加一点盐，但我希望这是有道理的:)****

# webgl - Webgl gl.viewport 更改

> ID：11819768
> 
> 赞同：10
> 
> 时间：2012-08-05T20:20:58.143
> 
> 标签：webgl, viewport

我在调整画布大小和`gl.viewport`同步时遇到问题。
假设我从画布[300x300 画布](https://dl.dropbox.com/u/96108589/shapes-300x300.png)`gl.viewport`开始，并以相同大小 ( `gl.vieport(0, 0, 300, 300)`)进行初始化。
之后，在浏览器的控制台中，我进行了测试：

1.  [我正在改变我的画布的大小](https://dl.dropbox.com/u/96108589/shapes-200x200.png)，使用 jquery，调用类似`$("#scene").width(200).height(200)`

2.  [在此之后，我正在调用我的 resizeWindow 函数](https://dl.dropbox.com/u/96108589/shapes-200x200-resize-200x200.png)：

    ```
    function resizeWindow(width, height){
        var ww = width === undefined? w.gl.viewportWidth : width;
        var h = height  === undefined? w.gl.viewportHeight : height;
        h = h <= 0? 1 : h;
        w.gl.viewport(0, 0, ww, h);
        mat4.identity(projectionMatrix);
        mat4.perspective(45, ww / h, 1, 1000.0, projectionMatrix);
        mat4.identity(modelViewMatrix);
    } 
    ```

    *   将视口与所需尺寸同步的功能。

不幸的是，我`gl.viewport`在这个电话之后只占用了我画布的一部分。
谁能告诉我出了什么问题？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-06T19:07:49.223

没有这样的事情是`gl.viewportWidth`或`gl.viewportHeight`

如果要设置透视矩阵，则应使用`canvas.clientWidth`和`canvas.clientHeight`作为透视的输入。无论浏览器缩放画布的大小如何，这些都会为您提供正确的结果。就像您使用 css 设置画布自动缩放一样

```
<canvas style="width: 100%; height:100%;"></canvas>

...

var width = canvas.clientHeight;
var height = Math.max(1, canvas.clientHeight);  // prevent divide by 0
mat4.perspective(45, width / height, 1, 1000, projectionMatrix); 
```

至于视口。使用`gl.drawingBufferWidth`和`gl.drawingBufferHeight`。这是找到您的绘图缓冲区大小的正确方法

```
gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight); 
```

为了清楚起见，这里有几件事混为一谈

*   `canvas.width`, `canvas.height`= 您要求画布的绘图缓冲区的大小
*   `gl.drawingBufferWidth`, `gl.drawingBufferHeight`= 你实际得到的大小。在 99.99% 的情况下，这将与 ,`canvas.width`相同`canvas.height`。
*   `canvas.clientWidth`, `canvas.clientHeight`= 浏览器显示画布的大小。

看看区别

```
<canvas width="10" height="20" style="width: 30px; height: 40px"></canvas> 
```

或者

```
canvas.width = 10;
canvas.height = 20;
canvas.style.width = "30px";
canvas.style.height = "40px"; 
```

在这些情况下`canvas.width`，将是 10，`canvas.height`将是 20，`canvas.clientWidth`将是 30，`canvas.clientHeight`将是 40。通常将`canvas.style.width`和设置`canvas.style.height`为百分比，以便浏览器对其进行缩放以适应它所包含的任何元素。

最重要的是，您提出了两件事

*   viewport = 通常你希望这是你的drawingBuffer的大小
*   纵横比 = 通常你希望这是你的画布缩放到的大小

鉴于这些定义，用于的宽度和高度`viewport`通常与用于的宽度和高度不同`aspect ratio`。

# ruby - Rake 测试运行非常缓慢

> ID：11819770
> 
> 赞同：11
> 
> 时间：2012-08-05T20:21:03.453
> 
> 标签：ruby, windows, unit-testing, rubymine

在运行了一些测试之后，我确信我的设置（windows、rubymine 和最新的 ruby​​ 版本）一定有问题。我现在的时间是：

```
Finished tests in 14.289817s, 0.0700 tests/s, 0.3499 assertions/s.

1 tests, 5 assertions, 0 failures, 0 errors, 0 skips

Process finished with exit code 0 
```

通过 5 个非常简单的测试（只需检查对空字段的验证是否有效）。这 5 个单元测试的总时间为 160 秒，超过 2 分钟。

我能做些什么来提高这个速度？

以下是测试：

```
require 'test_helper'

class ItemTest < ActiveSupport::TestCase
  test 'item attributes must not be empty' do
    item = Item.new
    assert item.invalid?
    assert item.errors[:name].any?
    assert item.errors[:description].any?
    assert item.errors[:image_url].any?
    assert item.errors[:rating].any?
  end
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T16:16:05.787

你的问题是Windows。我们在 Windows 上使用 JRuby，它实际上比 Windows 上的 RubyInstaller(mingw) ruby​​ 运行得更快，但在运行测试套件或启动 Rails 服务器时，我们确实看到了非常慢的结果。由于加载了 Rails 环境，单次测试运行大约需要 1 分钟。你有几个选择：

1.  切换到 linux/osx
2.  使用 spork 为您的测试预加载几个 rails 环境。请注意，这并不完美，但会大大减少您的时间。使用此选项，您可能想要使用 minitest 或 rspec，但我无法让 spork 使用 testunit 在 Windows 上工作。使用 spork，您应该能够将单次测试运行时间缩短到大约 10 秒。
3.  编写尽可能多的测试以在 Rails 之外运行，换句话说，不需要 Rails 堆栈。这将非常快，您应该能够在几秒钟内运行测试，但正如您可能猜到的那样，很难在 Rails 之外测试很多东西（控制器、视图）。尽管对于您已经分解为已经不需要任何东西的模块的功能，它可以完美地工作。

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T02:40:47.210

你的宝石堆栈的其余部分是什么？有时第三方 gem 由 rails 初始化，并会尝试打电话回家（New Relic，Airbrake），这可能会增加您的测试时间（尽管可能不会这么多）。如果您的测试套件不严格要求某些东西，您应该尝试将其拉入正确的 env 组，或`require :false`通过捆绑器设置：

```
组：生产做
  宝石'newrelic_rpm'
结尾

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T18:02:41.997

启动时间似乎正在扼杀你，所以你和我可能在同一条船上。在 Jodell 和 Dark Castle 之间已经涵盖了很多内容，但这里是我列出的几乎所有有用的东西，按功效降序排列。

1.  获得一个修补过的 1.9.3，并向后移植了 2.0 文件系统改进。第一个得到 2 倍更好的数字，但我使用第二个，因为我觉得第一个不稳定
    *   [https://groups.google.com/forum/?fromgroups=#!topic/thecodeshop/WVA4N2lJoM4](https://groups.google.com/forum/?fromgroups=#!topic/thecodeshop/WVA4N2lJoM4)
    *   [https://raw.github.com/gist/3242245/5cdb932c0a544cfbb51fdee5759942d4d2c263f5/1-complete.diff](https://raw.github.com/gist/3242245/5cdb932c0a544cfbb51fdee5759942d4d2c263f5/1-complete.diff)
2.  设置您的 GC 选项
    *   [http://snaprails.tumblr.com/post/241746095/rubys-gc-configuration](http://snaprails.tumblr.com/post/241746095/rubys-gc-configuration)（我用的是最后一个）
3.  关闭收集覆盖数据（我的 IDE 一直自愿这样做）
4.  运行 Spork，然后`set SPEC_OPTS=--drb`
5.  关闭病毒扫描程序（实际上不要这样做，反正对我来说只值 10%）
6.  仔细检查您的宝石，使用 require: false 延迟宝石的加载

6实际上并没有给我买太多。我们最大的错误是无条件加载 Thin（它会拉入 Eventmachine，安装了 21 兆字节），但堆栈中的下 3 个实际上被 RSpec 使用。我没有看过网络流量，但 Jodell 可能正在那里做些什么。

# xml - xml 的语法结构 - 只有标签和 PCDATA？

> ID：11819775
> 
> 赞同：0
> 
> 时间：2012-08-05T20:21:40.090
> 
> 标签：xml, xsd

XML 是否仅包含标签和 PCDATA 作为句法结构？或者还有什么？

干杯，

担

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T20:25:03.950

您遇到的主要结构是标签、*实体*和文本。还有其他一些不太常见的（特别是：处理指令、文档类型声明和 XML 声明）。

实体是以 a 开头和以 a`&`结尾的字符序列`;`，您通常会遇到诸如等`&gt;`之类的字符`&amp;`。它们代表其他事物（例如特定角色，但这些并不是唯一的可能性）。

XML 声明是文档开头`<?xml`和结尾的序列`?>`。它看起来类似于处理指令（也以 开头`<?`），但形式上不是。

Doctype 声明开始于`<!`并且是您应该获取 XML 库而不是尝试自己解码的地方；文件类型系统*复杂！*

# c# - C# - 高级继承

> ID：11819776
> 
> 赞同：5
> 
> 时间：2012-08-05T20:21:42.427
> 
> 标签：c#, inheritance, polymorphism

请看一下我的班级结构。我想我想从继承中获得更多的乐趣。

首先有一个基础抽象类：

```
public abstract class PolicyDetailed
{
    internal abstract DataContainer GetActiveAsset();
} 
```

接下来是另一个抽象类，它是通用的：

```
public abstract class PolicyDetailed<T> : PolicyDetailed where T : DataContainer
{
    internal new abstract T GetActiveAsset();
} 
```

最后是一个特定的策略类。意外容器继承自 DataContainer：

```
public class PolicyAccident : PolicyDetailed<AccidentContainer>
{
    internal override AccidentContainer GetActiveAsset()
    {
        return null;
    }
} 
```

在编译期间，我收到以下错误：

```
'PolicyAccident' does not implement inherited abstract member 'PolicyDetailed.GetActiveAsset()' 
```

我不确定我应该在这里使用什么修饰符来让它工作。也许我还应该写下我想要实现的目标：我有一组不同类型的策略对象（例如 PolicyAccident、PolicyTravel 等），这些对象从 PolicyDetailed 继承，具有不同类型的 DataContainer（AccidentContainer、TravelContainer 等）。我想在不知道它们的具体类型并通过 PolicyDetailed 引用它们的情况下对它们中的每一个调用“GetActiveAsset”方法。同时我希望每个类都返回它们特定的 Datacontainer 子类。那可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T20:29:55.407

问题是您不能在声明具有相同签名的任何其他方法时覆盖同一类中的非泛型方法。

有几个选项：

*   到目前为止，最简单的方法是给这两种方法不同的名称。然后你可以给出一个`PolicyDetailed<T>`只委托给新抽象方法的实现：

    ```
    public abstract class PolicyDetailed
    {
        internal abstract DataContainer GetActiveAsset();
    }

    public abstract class PolicyDetailed<T> : PolicyDetailed where T : DataContainer
    {
        internal abstract T GetActiveAssetGeneric();

        internal override DataContainer GetActiveAsset()
        {
            return GetActiveAssetGeneric();
        }
    }

    public class PolicyAccident : PolicyDetailed<AccidentContainer>
    {
        internal override AccidentContainer GetActiveAssetGeneric()
        {
            return null;
        }    
    } 
    ```

*   您*可以*引入另一个层次的继承，引入一个新的方法名称*只是*为了桥接目的。这很丑陋：

    ```
    public class DataContainer {}
    public class AccidentContainer : DataContainer{}

    public abstract class PolicyDetailed
    {
        internal abstract DataContainer GetActiveAsset();
    }

    // This only exists to satisfy the base class abstract member,
    // but at the same time allowing PolicyDetailed<T> to introduce
    // a new member with the same name.
    public abstract class PolicyDetailedBridge<T> : PolicyDetailed
        where T : DataContainer
    {
        protected abstract T GetActiveAssetGeneric();

        internal override DataContainer GetActiveAsset()
        {
            return GetActiveAssetGeneric();
        }
    }

    public abstract class PolicyDetailed<T> : PolicyDetailedBridge<T>
        where T : DataContainer
    {
        protected sealed override T GetActiveAssetGeneric()
        {
            // Call the *new* abstract method. Eek!
            return GetActiveAsset();
        }

        internal abstract new T GetActiveAsset();
    }

    public class PolicyAccident : PolicyDetailed<AccidentContainer>
    {
        internal override AccidentContainer GetActiveAsset()
        {
            return null;
        }            
    } 
    ```

*   您可以将非泛型`PolicyDetailed`类改为接口，并使用显式接口实现来声明新的抽象方法并仍然实现接口。

# google-drive-api - 如何在 Google Drive 中检索文件夹子项的标题？

> ID：11819780
> 
> 赞同：8
> 
> 时间：2012-08-05T20:22:21.073
> 
> 标签：google-drive-api

[根据Google Drive 文档](https://developers.google.com/drive/v2/reference/children#resource)，列出文件夹的子级似乎实际上并没有返回所述子级的标题。

我是否必须使用每个子项的 ID 进行查询以确定文件/文件夹的名称？

谢谢！

编辑：

我刚刚想到，解决这个问题的方法是在父ID等于我想查看其内容的文件夹ID的情况下进行搜索？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-05T20:52:37.463

您是绝对正确的，列出文件夹的子项只会为您提供他们的 ID，因此您必须发送其他查询来检索标题和其他元数据。我同意这不是最佳选择，我们正在考虑在此处进行一些更改以改善开发人员体验。

同时，我建议采用您的解决方法并搜索其父文件夹是您要查看其内容的文件夹的那些文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-19T14:43:37.417

您应该使用查询参数`files.list()`获取该结果的方法，

在我的**Python**示例中，它是：

```
service.files().list(maxResults=1000, q="'{0}' in parents".format(root_id)).execute() 
```

您可以看到[此链接](https://developers.google.com/drive/web/search-parameters)的所有查询参数：

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-16T08:36:32.680

如果有人仍在研究如何获取子文件夹的标题，假设您已经拥有 children(fileId) id

```
function getFileProps(fileId, callback) {
    var request = gapi.client.drive.files.get({
        'fileId': fileId
    });

    request.execute(function (resp) {
           callback(resp);
    });
} 
```

# ember.js - 在 Embers pre-1.0 上创建应用程序和路由器的适当 sintaxis 是什么？

> ID：11819786
> 
> 赞同：0
> 
> 时间：2012-08-05T20:23:25.667
> 
> 标签：ember.js

我开始编写一个简单的应用程序来测试 Ember pre-1.0 中的路由器。到目前为止，我已经根据官方文档（[http://docs.emberjs.com/symbols/Ember.Router.html](http://docs.emberjs.com/symbols/Ember.Router.html)）放置了代码。它似乎改变了路线的语法。我的问题是。创建应用程序和路由器的合适的 sintaxis 是什么？

我不断收到“未捕获的类型错误：无法调用未定义的方法‘创建’”

# android - 在android中制作新文件

> ID：11819788
> 
> 赞同：0
> 
> 时间：2012-08-05T20:23:40.487
> 
> 标签：android, file, ringtone, setting

我有一个问题，我想在我的主要活动中设置一个铃声，我阅读了这个教程：[http](http://androidgenuine.com/?tag=set-as-ringtone-android) ://androidgenuine.com/?tag=set-as-ringtone-android ，但是功能保存不起作用，更多具体我无法创建文件，函数返回false。我只写了一个创建新文件的部分，但即使这部分也不起作用，这是代码，有什么问题（它返回错误并且未创建文件）？

```
 public boolean save2(int ressound){

    String path="/sdcard/sounds/";
    String filename="ring.mp3";
    byte[] buffer = null;
    FileOutputStream save;
    InputStream fIn = getBaseContext().getResources().openRawResource(ressound);
    int size=0;
    try {
        size=fIn.available();
        buffer = new byte[size];
        fIn.read(buffer);
        fIn.close();
    } catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    try {
        save = new FileOutputStream(path+filename);
        save.write(buffer);
        save.flush();
        save.close();
        return true;
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        return false;
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        return false;
    }
} 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T20:38:47.463

我只能猜测您指定的目录可能不存在，或者您没有在清单中设置适当的权限。

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/> 
```

您应该使用以下文档中的以下内容构建它

[http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory) ()

```
File path = Environment.getExternalStoragePublicDirectory(
            Environment.DIRECTORY_PICTURES);
File file = new File(path, "DemoPicture.jpg");

// Make sure the Pictures directory exists.
path.mkdirs(); 
```

您还必须检查外部存储是否已安装。

```
String state = Environment.getExternalStorageState();
    if (Environment.MEDIA_MOUNTED.equals(state)) {
        mExternalStorageAvailable = mExternalStorageWriteable = true;
    } else if (Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
        mExternalStorageAvailable = true;
        mExternalStorageWriteable = false;
    } else {
        mExternalStorageAvailable = mExternalStorageWriteable = false;
    } 
```

# asp.net - asp.net 中的异步进程

> ID：11819789
> 
> 赞同：0
> 
> 时间：2012-08-05T20:23:58.863
> 
> 标签：asp.net, session, asynchronous, migration

我正在迁移在 asp.net 1.1 上编写的应用程序。有一个过程在一页上可能需要 5 分钟，在 SQL 中处理数据，并让用户知道它何时完成。

为了避免 HTTP 页面超时，进程异步运行，页面每 5 秒刷新一次，检查是否完成。这很简单。这是问题所在：我使用会话变量作为信号量来表示进程完成。

这现在不起作用，因为我无法读取异步过程中设置的信号量。异步进程可以从调用例程中读取会话，但不能写回。

首先，有没有办法让异步进程写入另一个进程可以读取的会话变量？这可能不是今天最好的方法，但让应用程序正常工作是我的首要任务。

其次，如果我重写它，应该使用什么方法？这是一个 ASP 网络应用程序。不是MVC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T20:29:13.947

使用回调技术，它允许您从客户端查询操作服务器端并从服务器获取返回，因此不再需要管理会话：http: [//msdn.microsoft.com/en-us/library/ms178210 (v=vs .80).aspx](http://msdn.microsoft.com/en-us/library/ms178210(v=vs.80).aspx)

# php - 使用 jQuery ajax post 接收 PHP 参数

> ID：11819791
> 
> 赞同：6
> 
> 时间：2012-08-05T20:24:25.543
> 
> 标签：php, jquery, ajax, post

我通过 jQuery 的 .ajax 方法将数据发送到我的 PHP 文件。两个文件都在同一个域中。制作帖子的文件看起来像这样..

```
$('#pdf').click(function() {                    
    var proj_name = $('#proj_name').text();
    var date = $('#date').text();
    var req_comp_date = $('#req_comp_date').text();
    var status = $('#status').text();
    var secondUserID = $('#secondUserID').text();

    var postData = {
        "proj_name" : proj_name,
        "date" : date,
        "req_comp_date" : req_comp_date,
        "status" : status,
        "secondUserID" : secondUserID,
    };

    console.log(postData);

    $.ajax({
        type: "POST",
        url: "test.php",
        data: postData, 
        success: function(){
            alert(proj_name + ' ' + status);
            window.open("test.php"); 
        }
    });
}); 
```

获取帖子数据的PHP文件是......

```
//request parameters
$proj_name = $_POST['proj_name'];
$date = $_POST['date'];
$req_comp_date = $_POST['req_comp_date'];
$status = $_POST['status'];
$secondUserId = $_POST['secondUserId'];

echo 'postData: ' . var_dump($_POST);

if ($_POST)){
    echo $proj_name;
    echo $date;
    echo $req_comp_date;
    echo $status;
    echo $secondUserId;
} else {
    echo 'problem';
} 
```

在我的萤火虫控制台中，我可以看到使用 .ajax 发布的参数，但我无法通过 PHP 获取该帖子。谁能帮帮我？谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-05T20:34:54.107

`$.ajax`如果请求失败，请将错误回调添加到您的调试调用中。

```
$.ajax({
    type: "POST",
    url: "test.php",
    data: postData, 
    success: function(){
        alert(proj_name + ' ' + status);
        window.open("test.php"); 
    },
    // Alert status code and error if fail
    error: function (xhr, ajaxOptions, thrownError){
        alert(xhr.status);
        alert(thrownError);
    }
}); 
```

* * *

更新

改变这个：

```
if ($_POST)){
    echo $proj_name;
    echo $date;
    echo $req_comp_date;
    echo $status;
    echo $secondUserId;
} else {
    echo 'problem';
} 
```

对此：

```
if ($_POST)){
    // Make a array with the values
    $vals = array(
        'proj_name'     => $proj_name,
        'date'          => $date,
        'req_comp_date' => $req_comp_date,
        'status'        => $status,      
        'secondUserId'  => $secondUserid
    );

    // Now we want to JSON encode these values to send them to $.ajax success.
    echo json_encode($vals);

    exit; // to make sure you arn't getting nothing else

} else {
    // so you can access the error message in jQuery
    echo json_encode(array('errror' => TRUE, 'message' => 'a problem occured'));
    exit;
} 
```

现在在您的 jQuery`.success`回调中：

```
success: function(data){ // Our returned data from PHP is stored in "data" as a JSON Object
    alert(data.req_comp_date); // access your returned vars like this.
    // data.date; // is your posted date.. etc
    alert(data.proj_name + ' ' + data.status);
    window.open("test.php"); 

    // You can also get your error message like so..
    if(data.error) // if its true, we have a error, so display it.
         alert('ERROR: ' + data.message); 

}, 
```

您实际上不必执行此操作（jquery 在确定返回的数据类型方面做得很好），但很高兴在代码中包含它以了解返回的内容。

```
$.ajax({ ...
    type: "POST",
    url: "test.php",
    data: postData, 
    dataType: "json" // <-- Add this to tell jquery, we are being returned a JSON object.
.... }); 
```

# php - 如何使用 php 读取/发送帖子数据并在其中保存一个变量

> ID：11819793
> 
> 赞同：1
> 
> 时间：2012-08-05T20:24:40.640
> 
> 标签：php, sql

我的代码中有一个循环，该循环为找到的每个成员创建一个提交按钮。我需要每个按钮都将成员名称存储在其中，以某种方式可以在单击该按钮时通过帖子发送。我不确定这是否可以通过 post 实现，但我正在尝试一种使用 URLS 的方法。有谁知道如何做到这一点？

```
<input type="submit" value="Attack" name="Attack?name=<?php echo $Member_name; ?>" />

<?php 
if(isset($_POST['Attack'])){
$sql = "SELECT * FROM users WHERE name='".mysql_real_escape_string($_GET['name'])."'";
$query = mysql_query($sql)  or die(mysql_error());
$row = mysql_fetch_object($query);
} 
```

这是我试图以隐藏形式存储它的整个代码，但它只抓取找到的最后一个成员并且不会获取其他成员。

```
<?php

$sql = "SELECT name, rank FROM users ORDER BY rank DESC"; //  Searches the database for every one who has being last active in the last 5 minute
$query = mysql_query($sql) or die(mysql_error());
$count = mysql_num_rows($query);
$i = 1;
while($row = mysql_fetch_object($query)) {
 $Member_name = htmlspecialchars($row->name);
$Member_level = htmlspecialchars($row->rank);
?>
<td><?php echo $i; ?></td>
<td><a href="View_Profile.php?name=<?php echo $Member_name; ?>"><?php echo $Member_name; ?></a></td><td><?php echo $Member_level; ?></td><td>
<input type="hidden" name="thename" value="<?php echo $Member_name; ?>">
<input type="submit" value="Attack" name="Attack" />
</td>
<?

 if($i != $count) { // this counts the amount of people that are online and display the results.
  echo "</tr><tr>";
 }
 $i++;
}
?>

<?php 
if(isset($_POST['Attack'])){
$sql = "SELECT * FROM users WHERE name='".mysql_real_escape_string($_POST['thename'])."'";
$query = mysql_query($sql)  or die(mysql_error());
$row = mysql_fetch_object($query);
$profile_id = htmlspecialchars($row->id);
$profile_userip = htmlspecialchars($row->userip);
$profile_name = htmlspecialchars($row->name);
$profile_money = htmlspecialchars($row->money);
$profile_gang = htmlspecialchars($row->gang);
$profile_exp = htmlspecialchars($row->exp);
$profile_profile = htmlspecialchars($row->profile);
$profile_rank = htmlspecialchars($row->rank);
$profile_health = htmlspecialchars($row->health);
$profile_defence = htmlspecialchars($row->defence);
$profile_stanima = htmlspecialchars($row->stanima);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T20:53:25.563

好的，假设其他一切正常，并且您正在检索数据。

改变这个：

```
<input type="hidden" name="thename" value="<?php echo $Member_name; ?>">
<input type="submit" value="Attack" name="Attack" /> 
```

对此：

```
<form method="POST" action="">
<input type="hidden" name="name" value="<?php echo $Member_name; ?>">
<input type="submit" value="Attack" name="Attack" />
</form> 
```

而且在你的 PHP 中，改变这一行：

```
$sql = "SELECT * FROM users WHERE name='".mysql_real_escape_string($_GET['name'])."'"; 
```

至：

```
$sql = "SELECT * FROM users WHERE name='".mysql_real_escape_string($_POST ['name'])."'"; 
```

***这不是最好的方法，***您将根据您拥有的用户数量生成大量 HTML 元素，但它应该可以解决您的问题（假设其他一切都在工作并接收数据）。

HTML 5 & Javascript 将是完美的，你应该研究一下。

# ruby-on-rails - 使用 rails 3.1 应用程序上传文件的参数错误

> ID：11819796
> 
> 赞同：0
> 
> 时间：2012-08-05T20:24:53.157
> 
> 标签：ruby-on-rails, file, arguments, uploading

我正在尝试建立一个非常基本的系统来将文件上传到我的**rails 3.1**应用程序。在人们开始向我扔**回形针**和**载波**链接之前，让我说这不是我正在寻找的解决方案。我已经阅读了关于这个主题的一些帖子，但是，我看到的所有代码要么在 rails 3.1 中被贬低，要么我只是不明白人们是如何解决这个问题的。

**更新**的视图/形式：（haml）

```
%h1 File Upload
= form_for :upload,:url=>{:action => 'uploadFile'},:html => { :multipart => true } do |f|
  %p
    %label{:for => "upload_file"} Select File
    \:
    \#{f.file_field 'datafile'}
  = f.submit "Upload" 
```

**更新的**控制器：

```
class UploadController < ApplicationController
  def index
     render :file => 'upload/uploadfile.haml'
  end

  def uploadFile
    file_param = params[:upload][:datafile]
    post = DataFile.save(file_param)
    render :text => "File has been uploaded successfully"
  end
end 
```

**更新**模型

```
class DataFile < ActiveRecord::Base
  def self.save(upload)
    # Changed Default Destination: [__RAILS_DIR__/public/data]
    name = "public/data/" + upload.original_filename

    # can haz data directory?
    require 'FileUtils'
    FileUtils.mkdir_p(File.dirname(name))

    File.open(name, "wb") { |f| f.write(upload.read) }
  end
end 
```

**解决方案：**

以上是我用来向我的 rails 3.1 应用程序添加简单上传功能的正确代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T21:25:16.993

您正在将不必要的参数“文件”传递给 uploadFile 方法。这是一个动作，不可能向它传递参数。只需删除“文件”参数。

# sql - 在表达式上使用 GROUP BY 的 SQL 查询不会检索所有条目

> ID：11819806
> 
> 赞同：1
> 
> 时间：2012-08-05T20:26:35.093
> 
> 标签：sql, timestamp

我最近从另一个开发人员那里接手了一些工作，并试图了解为什么特定的 sql 查询不适用于某些时间戳，更具体地说是同一日期的时间戳，sql 查询是：

```
select FROM_UNIXTIME(order_time,'%Y.%m.%D') as order_time,
       order_time as timealias
  from orders
  where order.id ='.$user->id.'
  group by FROM_UNIXTIME(order_time,'%Y.%m.%D')
  order by timealias desc 
```

这个想法是订单按日期分组以供用户查看，如果日期在不同的日子。

这工作正常：

```
03/08/2012, 15:10:30 (Unix Timestamp: 1344006630)
04/08/2012, 12:10:30 (Unix Timestamp: 1344082230) 
```

但是，如果他们在同一天但在不同的时间，那么它会在表格中显示第一个订单而不是第二个。

```
03/08/2012, 15:10:30 (Unix Timestamp: 1344006630)
03/08/2012, 17:30:25 (Unix Timestamp: 1344015025) 
```

我的理论是，它不会将第二个条目的日期识别为与第一个条目的匹配，但由于该日期已被使用，因此它会中断，或类似的结果。但考虑到数据库不是我的强项，这是一个猜测。

如果有人知道它为什么会这样，我真的很感激一些见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T21:07:31.840

您的查询在 FROM_UNIXTIME 包含一个 GROUP BY。这将为每个 FROM_UNIXTIME 选择一个“随机”行，这不是您想要的。

如果您想查看每个时间戳，包括重复项：

```
"select FROM_UNIXTIME(order_time,'%Y.%m.%D') as order_time, order_time as timealias from orders where order.id ='".$user->id."' order by timealias desc" 
```

如果要显示每个 FROM_UNIXTIME 的订单数：

```
"select FROM_UNIXTIME(order_time,'%Y.%m.%D') as order_time, order_time as timealias, COUNT(*) order_cnt from orders where order.id ='".$user->id."' group by 1 order by timealias desc" 
```

# javascript - 在javascript中将此作为参数传递

> ID：11819810
> 
> 赞同：0
> 
> 时间：2012-08-05T20:27:31.687
> 
> 标签：javascript, this, parameter-passing, imagebutton

我想将此作为 javascript 中函数的参数传递，如下所示：

```
<input type="image" class="img_btn" id="img" src="img1.jpg" onclick="edit(this);"/> 
```

和我的编辑功能：

```
function edit(javad) {
    if (x == 1) {
        javad.src = "img1.jpg";
        x = 0;
    } else {
        javad.src = "img2.jpg";
        x = 1;
    }
} 
```

x 的默认值为 1。

但它不起作用？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T20:30:38.400

JavaScript 中的字符串被引用，因此您必须将文件名放在引号中

```
javad.src="img1.jpg"; 
```

* * *

您的代码有效，除非默认情况下 x 为 1，然后当您单击输入时，您会将其源设置为相同的图像，如果再次单击它，它将改变。如果 x 默认为 0，它将在第一次单击时更改。

[小提琴](http://jsfiddle.net/mowglisanu/qJgSe/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T20:31:16.363

您拥有的代码认为您正在将其设置`src`为一个对象，因为您没有引号。

```
javad.src = "img2.jpg"; 
```

应该做的伎俩。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T20:57:21.183

我解决问题:)

它不起作用，因为 var x 是全局的，并且在每个调用函数中它设置为 1.Thanks。

# php - 会话劫持在 PHP 中究竟是如何工作的？

> ID：11819811
> 
> 赞同：23
> 
> 时间：2012-08-05T20:27:37.507
> 
> 标签：php, security, session, cookies

我制作了一个具有注册/登录功能的网站。我可以在 Chrome 的开发人员工具中看到 PHPSESSID cookie，所以我想知道如何使用这个会话 id 值来劫持我登录的帐户，让我们说一个不同的浏览器，为了简单起见？

安全网站是否应该能够确定此会话被劫持并阻止它？

另外，为什么其他使用 PHP 的大型网站（例如 Facebook）没有 PHPSESSID cookie？他们是否给它起了一个不同的名字来表示默默无闻，或者他们只是完全使用了不同的机制？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-05T20:38:09.133

很多好问题，你问他们很好。

首先..会话只是一个cookie。“会话”不是 HTTP 堆栈的一部分。PHP 恰好提供了一些便利，使使用 cookie 变得容易，从而引入了会话。PHP 选择 PHPSESSID 作为 cookie 的默认名称，但您可以选择任何您想要的名称。即使在 PHP 中，您也可以更改 session_name。

攻击者所要做的就是获取您正在查看的会话 cookie，并在自己的浏览器中使用它。攻击者可以使用自动脚本或例如使用 firebug 来执行此操作，您只需更改当前的 cookie 值即可。

所以是的，如果我有你的 id.. 如果你不采取任何措施阻止它，我可以窃取你的会话。

然而.. 对于攻击者来说，最难的部分是首先获取 cookie。攻击者无法真正做到这一点，除非：

*   他们可以访问您的计算机
*   他们以某种方式能够窥探您的网络流量。

第一部分很难解决.. 您可以采取一些技巧来识别启动会话的计算机（检查用户代理是否更改，检查 IP 地址是否更改），但不是防水或不是那么好的解决方案。

您可以通过确保所有流量都使用 HTTPS 加密来解决第二个问题。几乎没有理由不使用 HTTPS。如果您的网站上有“登录”区域，请务必使用 SSL！

我希望这种回答能回答你的问题。我现在想到的其他一些建议：

*   每当用户登录时，给他们一个新的会话 id
*   每当用户注销时，也要给他们一个新的会话 ID！
*   确保在任何情况下浏览器都无法确定会话 cookie 的值。如果您不认识 cookie，请重新生成一个新的！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-05T20:41:00.367

如果您使用相同的 IP 并使用相同的浏览器，您所要做的就是复制会话 ID（可能还有其他 cookie 值：不确定是否跟踪/比较了浏览器特定的内容，例如其代理字符串；这是实现依赖）。

一般来说，有不同的方法来跟踪用户（最终它只是用户跟踪）。例如，您可以在网页中使用 cookie 或一些隐藏值。您也可以在 HTTP GET 请求、Flash cookie 或其他一些身份验证方法（或这些方法的组合）中使用值。

在 Facebook 的情况下，他们使用多个 cookie 值，所以我假设他们使用其中一个值（例如“xs”）。

总的来说，没有真正的 100% 安全的方法来做到这一点（例如，由于中间人攻击），但总的来说，我会做以下事情：

*   登录后，存储用户的 IP 地址、他的浏览器代理字符串和唯一令牌（根据上面的评论进行编辑：您也可以跳过他的 IP 地址；使整个事情变得不那么安全）。
*   客户端存储用户的唯一 ID（例如用户 ID）和该令牌（在 cookie 或 GET 值中）。
*   只要第一步存储的数据匹配，就是同一个用户。要注销，只需从数据库中删除令牌。

哦，顺便提一下：所有这些都不是 PHP 特有的。它们可以使用任何服务器端语言（Perl、PHP、Ruby、C#...）或一般的服务器来完成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-05T20:31:41.933

有人嗅探会话 ID cookie 并将其设置为后续请求。如果这是对用户进行身份验证的唯一方法，则他们已登录。

大多数网站将以某种形式使用基于 cookie 的身份验证。有几种方法可以提高安全性，例如在用户登录时存储有关用户浏览器的信息（例如用户代理、IP 地址）。如果其他人天真地试图复制 cookie，它将无法正常工作。（当然，也有解决这个问题的方法。）您还会看到会话 cookie 定期重新生成，以确保它们在特别长的时间内无效。

查看[Firesheep](http://codebutler.github.com/firesheep/)以获取执行会话劫持的 Firefox 扩展。我不建议您使用它，但您可能会发现该页面上的讨论很有趣。

# node.js - 无库文件上传

> ID：11819815
> 
> 赞同：1
> 
> 时间：2012-08-05T20:28:07.193
> 
> 标签：node.js, file-upload

我正在寻找如何仅使用 Node.js 上传文件。我从 Google 下载的每个教程或示例都使用了强大的或快速的。但我想要一个不使用任何库的示例。

当我上传文件时，我将其作为请求数据：

```
{
    post: {
        '------WebKitFormBoundarySUszotMiE1sXRapA\r\nContent-Disposition: form-data; name': '"file"; filename="img not found.png"\r\nContent-Type: image/png\r\n\r\n�PNG\r\n\u001a\n\u0000\u0000\u0000\rIHDR\u0000\u0000\u0000\u0012\u0000\u0000\u0000\u0014\b\u0002\u0000\u0000\u0000\u000f��\u001d\u0000\u0000\u0000\u0019tEXtSoftware\u0000Adobe ImageReadyq�e<\u0000\u0000\u0003$iTXtXML:com.adobe.xmp\u0000\u0000\u0000\u0000\u0000<?xpacket begin="" id="W5M0MpCehiHzreSzNTczkc9d"?> <x:xmpmeta xmlns:x="adobe:ns:meta/" x:xmptk="Adobe XMP Core 5.3-c011 66.145661, 2012/02/06-14:56:27        "> <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"> <rdf:Description rdf:about="" xmlns:xmp="http://ns.adobe.com/xap/1.0/" xmlns:xmpMM="http://ns.adobe.com/xap/1.0/mm/" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmp:CreatorTool="Adobe Photoshop CS6 (Macintosh)" xmpMM:InstanceID="xmp.iid:51B0B079D16D11E1800BF631A3922565" xmpMM:DocumentID="xmp.did:51B0B07AD16D11E1800BF631A3922565"> <xmpMM:DerivedFrom stRef:instanceID="xmp.iid:51B0B077D16D11E1800BF631A3922565" stRef:documentID="xmp.did:51B0B078D16D11E1800BF631A3922565"/> </rdf:Description> </rdf:RDF> </x:xmpmeta> <?xpacket end="r"?>�\u0003�\u0006\u0000\u0000\u0000�IDATxڔ�\u0001\u000e� \b��y/��z2�d=�E��[�\u001c�&gt;�\u001f\f����Ez\u0011�\u0013�{�//�VJ\u0011���a\u001b}\u0015d\u0014ѭ�RJD�*�͆\r�QI\u0013\u001b�y(K�s��$GI���\u0004�5Z\u0001�H\u0013k#E��;)�\r ½\u0017XU�6X[(箒\u001c�\u001c�\u0014��4`',
        'Ù^�a���$�#': '',
        'AJ\u0012���\u0006�\r\u0010\u001aR�N�\u000b\u0013���`T��k�@�V�ߏ�}��\'�\u0000\u0017gp��\u0002��\u0000\u0000\u0000\u0000IEND�B`�\r\n------WebKitFormBoundarySUszotMiE1sXRapA--\r\n': ''
    }
} 
```

上传简单图像时。我可以看到所有数据都已收到。但我只是不知道如何处理它。

欢迎任何想法或建议。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T20:42:42.547

最简单的答案当然是只使用 Express/Connect/Formidable（从最抽象到最直接的解决方案）。

您也可以通过查看以下来源自己执行此操作：

*   Connect 的[bodyParser](https://github.com/senchalabs/connect/blob/master/lib/middleware/bodyParser.js)，它使用：
*   Connect 的[multipart.js](https://github.com/senchalabs/connect/blob/master/lib/middleware/multipart.js)，它使用[qs](https://github.com/visionmedia/node-querystring/)和[强大的](https://github.com/felixge/node-formidable/)

我没有看到其他解析请求正文和文件上传的直接实现。所以你的选择是去阅读源代码并重新创建它们，或者只是使用它们。

# c# - ASP.NET 中的富文本查看器

> ID：11819816
> 
> 赞同：0
> 
> 时间：2012-08-05T20:28:09.273
> 
> 标签：c#, asp.net

> **可能重复：**
> [asp.net 中的 RTF 查看器](https://stackoverflow.com/questions/11785392/rtf-viewer-in-asp-net)

我想在 asp.net 中查看 RTF 格式文件，不想编辑 . 只是像水晶报表这样的简单查看器。任何建议...

# php - php羊群和fread和fwrite

> ID：11819818
> 
> 赞同：7
> 
> 时间：2012-08-05T20:28:30.030
> 
> 标签：php, locking, file-locking, flock

我看到人们像这样使用羊群：

```
if (!$fp = fopen($file_name, 'wb'))  
{  
    return FALSE;  
}  

if (flock($fp, LOCK_EX))  
{  
    fwrite($fp, serialize($data));  
    flock($fp, LOCK_UN);  
} 
```

还有这个：

```
if (!$fp = @fopen($file_name, 'rb'))  
{  
    return FALSE;  
}  

flock($fp, LOCK_SH);  

$data = '';  

if (filesize($file_name) > 0)  
{  
    $data = unserialize(fread($fp, filesize($file_name)));  
} 
```

但是其他人是否有机会在`fopen`通话和`flock`通话之间编辑文件？同样的问题`fread`

* * *

编辑：
为了澄清我为什么要问这个......我的问题是基于[**这里的代码，**](http://www.jongales.com/blog/2009/02/18/simple-file-based-php-cache-class/)在 mysql 缓存情况下，如果他们都能够阻止 20 个人同时访问该文件，有什么办法可以在fopen和flock之间进入吗？

那个代码是万无一失的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T20:55:56.527

你问：

> *其他人没有机会在 fopen 调用和flock 调用之间编辑文件吗？和 fread 相同的问题*

是的，不，也许。简短的回答：假设“是”并谨慎行事。

是的，传统的基于flock() 的锁定只是*建议*性的，因此其他进程（甚至是同一个进程）可以随意忽略锁定。实际上，这不是问题，因为flock() 被行为良好的客户端代码使用——在获得LOCK_SH之前你不会阅读，除非你获得LOCK_EX，否则你不会写——在应用程序上——具体文件。

[不，因为根据文档](http://php.net/manual/en/function.flock.php)， PHP 的flock() 实现可能在某些操作系统上是*强制性*的，这可能还需要文件系统的支持（例如，与Linux 下的[*mand*](http://linux.die.net/man/2/fcntl)选项一样）。因此，其他进程不能忽视这些锁。[](http://linux.die.net/man/2/fcntl)

 *也许，因为 PHP 5 中的流子系统实现了一些超出操作系统提供的[锁定簿记。](http://php.net/manual/en/streamwrapper.stream-lock.php)例如，这可能会阻止同一个进程（但不是另一个进程）忽略它自己的其他建议锁。这种行为[可能会让](https://bugs.php.net/bug.php?id=47227)一些人感到惊讶。即便如此，这种锁定在不相关的进程之间也不是强制性的。

为了可移植性，只需假设最弱的语义（上面的“是”）并将flock() 限制为预先选择的特定于应用程序的锁定文件上表现良好的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T20:33:38.513

第一个片段是万无一失的，如果你不能锁定文件，你就不要写。如果其他人在`fopen()`和之间编辑了文件`flock()`，则您的文件句柄将指向最新的化身，因为`fopen()`绑定到流，而不是“快照”。

第二个例子不保证有效，因为`flock()`没有检查返回值，所以如果你没有获取锁，后面的代码无论如何都会执行。

[编辑] 删除了读者锁定无关紧要的声明，它确实如此，如下面的评论中所述：)*

# android - 由于 ScrollView，ListView 表现得很奇怪？

> ID：11819819
> 
> 赞同：1
> 
> 时间：2012-08-05T20:28:39.547
> 
> 标签：android, listview, background, scrollview, items

截屏：

![http://i46.tinypic.com/2r44hg3.jpg](../Images/419770fc3d9f94b461a517b9d6ebd2e7.png)

从上图中可以看出，由于某种原因，当使用 ScrollView 时，我的 listView 中出现了一个奇怪的白色区域。如果我删除 ScrollView 什么都没有消失的白色区域，但不幸的是我必须在我的界面中使用 ScrollView。如果我用项目填充我的列表，白色“区域”仍然存在并且被放置在项目下方。

有人见过这个吗？如何在不删除由于某种原因使其出现的 ScrollView 的情况下删除它？到目前为止，我尝试更改所有不同类型的设置，例如 fill_parent/wrap_content/0dip 没有任何成功。

有知道的请帮忙！

```
<?xml version="1.0" encoding="utf-8"?>

<ScrollView 
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_height="fill_parent"
android:layout_width="fill_parent">

<TableLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/orginalbild"
android:fillViewport="true"
android:gravity="center|top"
android:orientation="vertical"
android:stretchColumns="1"
android:weightSum="1.0">

<TableRow
    android:paddingTop="3dp" >

 <TextView
             android:layout_width="0dip"
             android:layout_height="fill_parent" 
             android:layout_weight="0.04">
            </TextView>

            <EditText
                android:id="@+id/search_task_field"
                android:layout_width="0dip"
                android:layout_height="fill_parent"
                android:layout_weight="0.7"
                android:hint="@string/SearchTaskHint" 
                />

            <ImageButton
                android:id="@+id/search_task_button"
                android:layout_width="0dip"
                android:layout_height="50dp"
                android:layout_gravity="center"
                android:layout_weight="0.22"

                android:src="@drawable/find3" />

            <TextView
                android:layout_width="0dip"
                android:layout_height="fill_parent" 
                android:layout_weight="0.04"
                android:visibility="invisible"
                >
            </TextView>
          </TableRow>

       <TableRow
    android:paddingTop="0.9dp"
    android:paddingRight="0.9dp"
    android:paddingLeft="0.9dp"
    android:background="#90767878"
    android:paddingBottom="0.9dp"
    android:layout_marginLeft="24dp"
    android:layout_marginRight="24dp"
    android:layout_marginBottom="20dp"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <ListView
        android:id="@+id/search_task_list"
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="#FFFFFF"
        android:gravity="left"
         />
</TableRow>  
   </TableLayout>
     </ScrollView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T21:00:20.540

您不能在 ScrollView 中放置 ListView。那是不可能的。因为那时 ListView 有两个选项可以滚动浏览内容，正如您所愿。这是行不通的。

如果您想在 ListView 下方或上方显示 Content 并希望它与它一起滚动，您可能必须创建一个自定义 View。

了解更多信息：

[https://groups.google.com/forum/m/?fromgroups#!topic/android-beginners/LRpLgGOy2Pc](https://groups.google.com/forum/m/?fromgroups#!topic/android-beginners/LRpLgGOy2Pc)

编辑：我建议你使用这个： [https](https://github.com/thiagolocatelli/android-uitableview) ://github.com/thiagolocatelli/android-uitableview 它是一个自定义 ListView，你可以在 ScrollView 中设置它

# ios - Apple Push Notification Service - 更改通知消息的标题

> ID：11819820
> 
> 赞同：4
> 
> 时间：2012-08-05T20:28:39.533
> 
> 标签：ios, json, push-notification, apple-push-notifications

我的 APNS 消息运行良好。但是，我想更改已发送消息的标题。目前标题始终是我的应用程序的名称。我看到本机 iOS“邮件”应用程序的通知将“发件人”地址作为消息的标题，并且电子邮件主题以粗体显示作为通知的子标题。我想为我的应用程序的通知重现此内容，但看不到如何执行此操作。JSON 有效负载似乎只有一个“警报”键，而没有提及“标题”键。有没有可能实现我想要的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T12:51:00.377

无法更改 APNS 消息的标题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-01-26T14:34:18.260

我只是偶然发现了这个老问题，只是想补充一下，现在可以为通知指定标题和正文（我认为从 iOS 8 开始）。

您的推送有效负载需要如下所示：

```
{
  "aps": {
    "alert": {
        "title": "New Message from Boss",
        "body": "Can you complete the new feature until tomorrow, please?!"
    }
  }
} 
```

您可以在 Apple 的[Local and Remove Notification Programming Guide](https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/PayloadKeyReference.html#//apple_ref/doc/uid/TP40008194-CH17-SW5)中找到详细规范。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-15T09:10:01.440

有可能的！

Message.php中的ApnsPHP_Message类需要修改一下：

// 标题的新变量

```
protected $_titleText; 
```

// 为标题创建 setter&getter 方法

```
public function setTitleText($sText)
{
    $this->_titleText = $sText;
}

public function getTitleText()
{
    return $this->_titleText;
} 
```

// 修改 _getPayload 方法

```
protected function _getPayload()
{
    $aPayload[self::APPLE_RESERVED_NAMESPACE] = array();

    if (isset($this->_sText)) {

        if(isset($this->_titleText)){
            $aPayload[self::APPLE_RESERVED_NAMESPACE]['alert']['title'] = (string)$this->_titleText;
            $aPayload[self::APPLE_RESERVED_NAMESPACE]['alert']['body'] = (string)$this->_sText; 
        }else{
            $aPayload[self::APPLE_RESERVED_NAMESPACE]['alert'] = (string)$this->_sText;
        }

    }
    if (isset($this->_nBadge) && $this->_nBadge > 0) {
        $aPayload[self::APPLE_RESERVED_NAMESPACE]['badge'] = (int)$this->_nBadge;
    }
    if (isset($this->_sSound)) {
        $aPayload[self::APPLE_RESERVED_NAMESPACE]['sound'] = (string)$this->_sSound;
    }

    if (is_array($this->_aCustomProperties)) {
        foreach($this->_aCustomProperties as $sPropertyName => $mPropertyValue) {
            $aPayload[$sPropertyName] = $mPropertyValue;
        }
    }

    return $aPayload;
} 
```

通过此修改，您可以设置推送消息标题：

```
$message->setTitleText("This is title"); 
```

# php - 如何使用 PHP 回显在 HTML 中显示值

> ID：11819822
> 
> 赞同：0
> 
> 时间：2012-08-05T20:28:55.090
> 
> 标签：php

请帮我。我在用 PHP 中的 echo 显示 html 中的值时遇到问题

这是我的编码。

```
<input type="text" value ="123" id="addorderquantity[<?php echo $count - 1; ?>]" name="quantity[<?php echo $count - 1; ?>]" onChange="addordercalculate(<?php echo $count - 1; ?>)"> 
```

在输入框中，该值始终显示为“0”，即使我已经将其设置为“123”

但是如果我将id写入“ `addorderquantity[<?php echo $count; ?>]`”（不带负1）该值可以正常工作。

这是所有的代码

```
<?php
                    $queryorder = "select * from orderitem,product where (orderitem.productid = product.productid) and orderitem.orderid = '$orderid' and orderitem.actype != 'D'";
                    $resultorder = mysql_query($queryorder);
                    $count  = 1;
                    while ($order = mysql_fetch_array($resultorder)){
                        ?>
                        <tr>
                            <td><?php echo $count; ?></td>
                            <td>
                                <select id="addordercategory[<?php echo ($count - 1); ?>]" name="category[<?php echo ($count - 1); ?>]" onChange="loadproduct(<?php echo ($count - 1); ?>)">
                                <option></option>
                                <?php
                                    for($i=0; $i<count($datacategorys)-1; $i++){
                                        $data1 = explode ("||",$datacategorys[$i]);
                                        if ($order['category'] == $data1[0]){
                                            echo "<option value='$data1[0]' selected>$data1[1]</option>";
                                        }
                                        else{
                                            echo "<option value='$data1[0]'>$data1[1]</option>";
                                        }
                                    }
                                ?>
                                </select>
                            </td>
                            <td>
                                <select id="addorderproduct[<?php echo ($count - 1); ?>]" name="product[<?php echo ($count - 1); ?>]" onChange="loadpriceweight(<?php echo ($count - 1); ?>)">
                                    <?php
                                        $queryproduct = "select * from product where category = '".$order['category']."' and actype != 'D'";
                                        $resultproduct = mysql_query($queryproduct);
                                        while ($product = mysql_fetch_array($resultproduct)){
                                            if ($order['productid'] == $product['productid']){
                                                echo "<option value='".$product['productid']."' selected='selected'>".$product['name']."</option>";
                                            }
                                            else{
                                                echo "<option value='".$product['productid']."'>".$product['name']."</option>";
                                            }
                                        }
                                    ?>
                                </select>
                                <script type="text/javascript">loadpriceweight(<?php echo ($count - 1);?>);</script>
                            </td>
                            <td>
                                <input type="hidden" id="addorderprice[<?php echo ($count - 1); ?>]" name="price[<?php echo ($count - 1); ?>]" value="0">
                                <input type="text" id="addorderdisprice[<?php echo ($count - 1); ?>]" disabled="disabled" value="">
                            </td>
                            <td>
                                <input type="hidden" id="addorderweight[<?php echo ($count - 1); ?>]" name="weight[<?php echo ($count - 1); ?>]" value="0">
                                <input type="text" id="addorderdisweight[<?php echo ($count - 1); ?>]" disabled="disabled" value="0">
                            </td>
                            <td><input type="text" value ="123" id="addorderquantity[<?php echo ($count - 1); ?>]" name="quantity[<?php echo ($count - 1); ?>]" onChange="addordercalculate(<?php echo ($count - 1); ?>)"></td>
                            <td><input type="text" id="addorderdiscount[<?php echo ($count - 1); ?>]" name="discount[<?php echo ($count - 1); ?>]" value="0" onChange="addordercalculate(<?php echo ($count - 1); ?>)"></td>
                            <td><input type="text" id="addorderdistotprice[<?php echo ($count - 1); ?>]" disabled="disabled" value="0"><input type="hidden" id="addordertotprice[<?php echo ($count - 1); ?>]" name="totprice[<?php echo ($count - 1); ?>]" value="0"></td>
                            <td><input type="text" id="addorderdistotweight[<?php echo ($count - 1); ?>]" disabled="disabled" value="0"><input type="hidden" id="addordertotweight[<?php echo ($count - 1); ?>]" name="totweight[<?php echo ($count - 1); ?>]" value="0"></td>
                            <td><input type="button" id="addorderhapus[<?php echo ($count - 1); ?>]" value="hapus" onClick="addorderhapus(<?php echo ($count - 1); ?>)"></td>
                        </tr>
                        <script type="text/javascript">addordercount = <?php echo $count;?>;</script>
                        <?php
                        $count++;
                    }
                ?> 
```

请帮助我，非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T20:32:45.177

`$count - 1`这段代码应该可以工作，您是否尝试过在( )周围加上圆括号`<?php echo ($count - 1); ?>`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T20:51:48.507

我在您的更新中注意到您明确设置`$count`为 1：

```
...
$resultorder = mysql_query($queryorder);
$count  = 1;
while ($order = mysql_fetch_array($resultorder)){
... 
```

如果减去1，这将导致它为0？

# javascript - 带有游戏循环的 JavaScript 平滑动画

> ID：11819825
> 
> 赞同：3
> 
> 时间：2012-08-05T20:29:19.457
> 
> 标签：javascript, animation, html5-canvas, game-physics

我已将我的游戏循环简化为一个在屏幕上移动的框，[单击此处](http://test.mrslayer.com)。由于某种原因，盒子似乎移动不顺畅。我在[这里做了一个视频](http://www.youtube.com/watch?v=DGaf6622Ax8&feature=plcp)。

游戏循环是这样调用的：

```
var game = function( ) {
    var now = Date.now( );
    var delta = now - then;

    update( delta / 1000 );
    draw( );

    then = now;
};

setInterval( game, 1000 / 50 ); 
```

我尝试将`draw`调用与主游戏循环分开并将它们放入`requestAnimationFrame`，但问题仍然存在。我看过一堆似乎运行顺利的教程。我什至尝试过使用[固定时间步长的游戏循环](http://nokarma.org/2011/02/02/javascript-game-development-the-game-loop/index.html)，但这只会让我的游戏运行得快得无法控制。

我怎样才能改进上述逻辑，也许利用`requestAnimationFrame`和维护调用`deltaTime`。`update`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T23:10:17.023

我相信在使用画布时，您的位置变量应该是整数值，因为它们代表像素，而浮点值没有意义。如果您打开控制台并输入，`sceneManager.currentScene.GameplayLayer.ball.position.x`那么您会得到一个非常长的小数。我认为关于 OP 的评论表明有时球移动 2px 而不是 1px 可能是在某事上。当您更新您的位置时，您最终会得到一个浮点值。

我相信它有时会向上取整到下一个最高像素位置，有时向下取整。我会尝试像这样占用地板或天花板：

```
this.position.x += Math.floor(this.speed * 100 * deltaTime * Math.cos(directionInRadians));
this.position.y += Math.floor(this.speed * 100 * deltaTime * Math.sin(directionInRadians)); 
```

我会做这两个改变，看看它是如何表现的。

编辑：由于您编辑了问题以简化逻辑。我可以建议一些尝试，即使用我创建的这个我一直使用的时钟对象。它给了我流畅的动画，而且相当简单。它基于[Three.JS 使用的时钟，](https://github.com/mrdoob/three.js/blob/master/src/core/Clock.js)因此您可能也想检查一下。即使你想使用自己的代码，你至少可以尝试这个现成的解决方案，看看它是否能给你同样的结果。这对我来说似乎工作得很好。另外，您尝试使用 shim，所以您在游戏功能中的调用应该是`requestAnimFrame(game);`？

```
var Clock = function () {

    /** Member startTime will remain fixed at its integer
        millisecond value returned by Date.now(). Will always
        be equal to the time the clock was started */
    this.startTime = Date.now();

    /** Member ms is updated by tick() to a integer value reprsenting 
        the number of milliseconds between the epoch (January 1, 1970)
        and the current date and time of the system. */
    this.ms = this.startTime;
    this.last = this.startTime;  /** millis at last call to tick() */
    this.time = 0;               /** ms in floating point seconds not millis */

    /** Member dt is updated by tick() to an integer value representing
        the number of milliseconds since the last call to tick(). */
    this.dt = 0;
    this.delta = 0; /** dt in floating point seconds not millis */

    /** Member fps is updated by tick() to a floating point value representing
        frames per second, updated and averaged approximately once per second */
    this.fps = 0.0;

    /** Member frameCount is updated to an integer value representing the
        total number of calls to tick() since the clock was created. */
    this.frameCount = 0;

    /** The frameCounter member is a flag you can turn off if you don't need to
        calculate the frameCount or do the average FPS calculation every second */
    this.frameCounter = true;

    /** Private globals needed to calculcate/average fps over eachs second */
    var timeToUpdate = 0;
    var framesToUpdate = 0;

    /************************************************************************************
        The tick() method updates ALL the Clock members, which should only
        be read from and never written to manually. It is recommended that
        tick() is called from a callback loop using requestAnimationFrame

        Learn more: http://paulirish.com/2011/requestanimationframe-for-smart-animating/
    *************************************************************************************/
    this.tick = function () {
        /** This is a new frame with it's very own unique number */

        if (this.frameCounter) this.frameCount++;

        /** Set the private currentTime variable */
        this.ms = Date.now();

        /** Update time delta and immediately set last time to
            be as accurate as possible in our timings. */
        this.dt = this.ms - this.last;
        this.last = this.ms;

        /** Calculate floating-point delta and increment time member */
        this.delta = 0.001 * this.dt;
        this.time += this.delta;

        /** Calculate private temp variables for fps calculation */
        if (this.frameCounter) {
            timeToUpdate += this.dt;
            framesToUpdate++;
            if (timeToUpdate > 1000) {
                this.fps = Math.round((framesToUpdate * 1000) / timeToUpdate);
                framesToUpdate = 0;
                timeToUpdate = 0;
            }
        }
    }
} 
```

如果你使用这个对象，那么你需要做的就是在你的初始化函数中创建一个新的时钟对象，就像这样`clock = new Clock();`。然后调用`clock.tick()`每个动画调用。然后，您可以访问成员`clock.delta`，`clock.time`这将为您提供增量和时间，以秒为单位的浮点值。`clock.dt`并且`clock.ms`将以毫秒为单位为您提供与整数相同的值。您还可以使用 fps 访问`clock.fps`或通过设置禁用它`clock.frameCounter = false`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T00:05:15.687

使用`three.js`时钟平滑了我的动画。我强烈推荐它。那里还有很多其他好的代码。

# sql-server - 如何在 SQL 中为我的 vb.net 应用程序使用动态数据库名称？

> ID：11819828
> 
> 赞同：0
> 
> 时间：2012-08-05T20:29:34.980
> 
> 标签：sql-server, vb.net, ado.net

我需要从我的 vb.net 应用程序运行以下脚本 & 想知道如何将数据库名称 (mynewdatabase_db) 设为参数？

基本上我需要在某些数据库上运行这个脚本，所以我需要数据库名称是动态的。

```
 Dim MySqlQuery2 As String = "USE mynewdatabase_db " & _
        "TRUNCATE TABLE MyTable " & _
        " " & _
        "INSERT INTO MyTable ([MyNumber], [HTTPAlias]) VALUES (0, @MyDomainAlias1) " & _
        "INSERT INTO MyTable ([MyNumber], [HTTPAlias]) VALUES (0, @MyDomainAlias2) " & _
        "INSERT INTO MyTable ([MyNumber], [HTTPAlias]) VALUES (0, @MyDomainAlias3) "

    Using cmd2 = New SqlCommand(MySqlQuery2.ToString, myConnection)
        cmd2.Parameters.AddWithValue("@MyDomainAlias1", MyDomainName)
        cmd2.Parameters.AddWithValue("@MyDomainAlias2", "www." & MyDomainName)
        cmd2.Parameters.AddWithValue("@MyDomainAlias3", MyDomainName & "." & MyTempDomainName)
        cmd2.ExecuteNonQuery()

    End Using 
```

提前致谢 ;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T20:57:43.257

有一个非常有用的类，名为[SqlConnectionStringBuilder](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnectionstringbuilder.aspx)

假设您的 app.config 或 web.config 中存储了一个初始连接字符串。
然后你可以写一个这样的方法，它加载你存储的连接字符串并将
初始目录更改为作为参数传递的新目录

```
Public Function GetNewConnectionString(newDataName as String) as String
    Dim cnnString as String = ConfigurationManager.ConnectionStrings["YourConnName"].ConnectionString
    Dim builder As SqlConnectionStringBuilder = new SqlConnectionStringBuilder(cnnString);
    builder.InitialCatalog = newDataName
    return builder.ConnectionString
End Function 
```

您可以更改调用此方法的连接字符串，然后执行上面的查询，删除尝试使用不同数据库的部分。

```
Using myConnection = new SqlConnection(GetNewConnectionString("mynewdatabase-db"))
Using cmd2 = New SqlCommand(MySqlQuery2.ToString, myConnection)     
    cmd2.Parameters.AddWithValue("@MyDomainAlias1", MyDomainName)     
    cmd2.Parameters.AddWithValue("@MyDomainAlias2", "www." & MyDomainName)     
    cmd2.Parameters.AddWithValue("@MyDomainAlias3", MyDomainName & "." & MyTempDomainName)     
    cmd2.ExecuteNonQuery()     
End Using
End Using 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T20:32:34.223

我会把它作为你的连接字符串的一部分。这样它就不会被硬编码到您的应用程序中。

# licensing - 在 MIT 代码中包含 GPL 外部库

> ID：11819831
> 
> 赞同：6
> 
> 时间：2012-08-05T20:30:08.267
> 
> 标签：licensing, gpl

我正在运送根据 MIT 许可许可的软件。

在应用程序树下，我还有一个文件，它是软件的一部分。在这个文件里面有一个外部库的确切内容，在 GPL 下许可。还有其他代码（由我编写），在 MIT 许可下获得许可。该文件中包含库的部分保持不变，并且库不会被更改。

我可以在 MIT 许可下发布我的软件吗？我应该包括 GPL 许可证吗（我很确定答案是肯定的）？我是否还应该包含一个自述文件，其中包含诸如“文件 X 的一部分是根据 GPL 许可授权的，因为它是一个外部库，其余的是 MIT”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T00:09:40.393

> 我可以在 MIT 许可下发布我的软件吗？

如果您在软件中使用 GPL 软件（将两部作品放在一起）然后分发新作品，则必须在 GPL（copyleft）下分发它。

GPL 有不同的风格，它们对 copyleft 的工作方式（GPL、LGPL、AGPL）有不同的影响，所以如果你需要更多信息，你需要更具体。

> 我应该包括 GPL 许可证吗（我很确定答案是肯定的）？

是的。任何 GPL 许可证都要求这样做。

> 我是否还应该包含一个自述文件，其中包含诸如“文件 X 的一部分是根据 GPL 许可授权的，因为它是一个外部库，其余的是 MIT”？

是的，这很有用。但是，如果它真的是 GPL，请记住，除了您编写的内容是正确的，*整个包*必须在 GPL 下分发。

也见

*   [在 GPL 许可项目中维护许可许可文件：开发人员指南](http://www.softwarefreedom.org/resources/2007/gpl-non-gpl-collaboration.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T20:42:30.360

如果您拥有该代码，如果该代码的财产属于您，您可以随时更改许可证，并且每次您愿意，您也可以在多个许可证下发布相同的代码。

当重新分发从第三方获得的根据 GPL 许可发布的代码时，您唯一需要做的就是保持许可条款不变，因为 GPL 就是这样设计的。无论“分发链”中涉及多少开发人员或主体，GPL 都保持 GPL。

# 3d - 从具有已知 XYZ 角度、半径和原点的点查找 3D 坐标？

> ID：11819833
> 
> 赞同：2
> 
> 时间：2012-08-05T20:30:24.220
> 
> 标签：3d, rotation, geometry, coordinates, trigonometry

我已经在互联网上阅读了大约 300 多页，但我没有得到我想要的结果或者它没有工作，所以我希望人们可以在这里帮助我。您可以使用伪代码和数学来解释。:)

所以，我们有 A 点（这是原点）。点 A 有一个半径、一个 XYZ 位置和 XYZ 旋转（我知道它可以用 2 个角度完成，但我真的需要它用 3 个角度）。B点的位置未知。

有了这些信息，我的问题是：我如何找到 B 点的位置？（或者，我的问题可以改写为：“如何在球体上找到 3D 点？”）

我已经在 2D 中完成了它并且它在那里工作。对于 2D，我使用：

```
x=pointA.x+radius*cos(angle)
y=pointA.y+radius*sin(angle) 
```

我不使用纯矩阵，但我想使用余弦等。我在伪代码中的尝试（失败得很厉害，我真的不知道如何将 XYZ 旋转与余弦结合起来）：

```
newx=pointA.x+radius*cos(rotationY)*sin(rotationZ+toRadians(90))
newy=pointA.y+radius*cos(rotationZ-toRadians(90))*math.sin(rotationY)*math.cos(rotationX)
newz=pointA.z+radius*math.cos(rotationZ+toRadians(90))*sin(rotationX) 
```

如果有人可以帮助我，我将不胜感激。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-13T10:16:56.163

x = cos(偏航) * cos(俯仰)

y = sin(yaw) * cos(pitch)

z = sin（音高）

不需要滚动。

我不认为这不完美吗？需要弧度，这可能是错误的来源。我相信您必须获得所有四元数或合并滚动，但这对于中间解决方案就足够了。

在最近的情况下，我否定了 x = cos(yaw) * -cos(pitch) 的 cos of pitch

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T20:37:20.863

假设您有一个以原点为中心的球体，具有已知的半径、方位角和仰角。[然后，您可以使用球面到笛卡尔转换](http://en.wikipedia.org/wiki/Spherical_coordinate_system#Cartesian_coordinates)简单地找到笛卡尔坐标。

所以，首先取相对 B 分量，A 半径和你的角度。您获得笛卡尔分量。然后，您可以将这些相对分量添加到 A 笛卡尔分量，返回绝对 B 坐标。不要考虑侧倾角，因为对于某一点来说它是无用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-24T22:22:58.670

感谢您的回答。我知道这个问题很久以前就得到了回答，但是为了人们阅读本文，我将分享我的实现。所以它在 Lua 中；具有两个输入角度的 PointOnSphere 函数（方位角和高度与rotation.x 和rotation.y 相同）（以度为单位）：

```
function PointOnSphere(origin,rotation,radius)
return {x=origin.x+radius*math.cos(math.rad(rotation.y))*math.cos(math.rad(rotation.x)),y=origin.y+radius*math.sin(math.rad(rotation.x)),z=origin.z+radius*math.sin(math.rad(rotation.y))*math.cos(math.rad(rotation.x))}
end 
```

请注意，当使用 y 轴指向的坐标系时，此答案是相关的。

另一个有用的链接是这个，它是同一个问题，答案相似：[https ://math.stackexchange.com/questions/264686/how-to-find-the-3d-coordinates-on-a-celestial-spheres-表面](https://math.stackexchange.com/questions/264686/how-to-find-the-3d-coordinates-on-a-celestial-spheres-surface)

# c - 在没有sprintf的情况下在C中将整数转换为字符串

> ID：11819837
> 
> 赞同：6
> 
> 时间：2012-08-05T20:31:07.987
> 
> 标签：c, type-conversion, printf

可以在没有? 的情况下在**C中将****整数转换为字符串**？**`sprintf`**

 *** * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-05T20:33:34.160

有一个非标准功能：

```
char *string = itoa(numberToConvert, 10); // assuming you want a base-10 representation 
```

编辑：似乎你想要一些算法来做到这一点。以下是 base-10 中的方法：

```
#include <stdio.h>

#define STRINGIFY(x) #x
#define INTMIN_STR STRINGIFY(INT_MIN)

int main() {
    int anInteger = -13765; // or whatever

    if (anInteger == INT_MIN) { // handle corner case
        puts(INTMIN_STR);
        return 0;
    }

    int flag = 0;
    char str[128] = { 0 }; // large enough for an int even on 64-bit
    int i = 126;
    if (anInteger < 0) {
        flag = 1;
        anInteger = -anInteger;
    }

    while (anInteger != 0) { 
        str[i--] = (anInteger % 10) + '0';
        anInteger /= 10;
    }

    if (flag) str[i--] = '-';

    printf("The number was: %s\n", str + i + 1);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-05T20:48:15.117

这是它如何工作的示例。给定一个缓冲区和一个大小，我们将继续除以 10 并用数字填充缓冲区。`-1`如果缓冲区中没有足够的空间，我们将返回。

```
int
integer_to_string(char *buf, size_t bufsize, int n)
{
   char *start;

   // Handle negative numbers.
   //
   if (n < 0)
   {
      if (!bufsize)
         return -1;

      *buf++ = '-';
      bufsize--;
   }

   // Remember the start of the string...  This will come into play
   // at the end.
   //
   start = buf;

   do
   {
      // Handle the current digit.
      //
      int digit;
      if (!bufsize)
         return -1;
      digit = n % 10;
      if (digit < 0)
         digit *= -1;
      *buf++ = digit + '0';
      bufsize--;
      n /= 10;
   } while (n);

   // Terminate the string.
   //
   if (!bufsize)
      return -1;
   *buf = 0;

   // We wrote the string backwards, i.e. with least significant digits first.
   // Now reverse the string.
   //
   --buf;
   while (start < buf)
   {
      char a = *start;
      *start = *buf;
      *buf = a;
      ++start;
      --buf;
   }

   return 0;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-04-19T10:51:48.053

不幸的是，在您需要编造一串字母数字字符的情况下，上述答案都不能真正以干净的方式解决。我见过非常奇怪的案例，尤其是在面试和工作中。

代码中唯一不好的部分是您需要知道整数的范围，以便正确分配“字符串”。

尽管 C 被誉为可预测的，但如果您在编码中迷失方向，它在大型系统中可能会出现奇怪的行为。

下面的解决方案返回一个带有空终止字符的整数表示形式的字符串。这不依赖于任何外部函数，也适用于**负整数**！

```
#include <stdio.h>
#include <stdlib.h>

void IntegertoString(char * string, int number) {

   if(number == 0) { string[0] = '0'; return; };
   int divide = 0;
   int modResult;
   int  length = 0;
   int isNegative = 0;
   int  copyOfNumber;
   int offset = 0;
   copyOfNumber = number;
   if( number < 0 ) {
     isNegative = 1;
     number = 0 - number;
     length++;
   }
   while(copyOfNumber != 0) 
   { 
     length++;
     copyOfNumber /= 10;
   }

   for(divide = 0; divide < length; divide++) {
     modResult = number % 10;
     number    = number / 10;
     string[length - (divide + 1)] = modResult + '0';
   }
   if(isNegative) { 
   string[0] = '-';
   }
   string[length] = '\0';
}

int main(void) {

  char string[10];
  int number = -131230;
  IntegertoString(string, number);
  printf("%s\n", string);

  return 0;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-05T20:33:43.350

您可以在可用的情况下使用*itoa*。如果它在您的平台上不可用，则可能会感兴趣以下实现：

[https://web.archive.org/web/20130722203238/https://www.student.cs.uwaterloo.ca/~cs350/common/os161-src-html/atoi_8c-source.html](https://web.archive.org/web/20130722203238/https://www.student.cs.uwaterloo.ca/~cs350/common/os161-src-html/atoi_8c-source.html)

用法：

```
char *numberAsString = itoa(integerValue); 
```

**更新**

根据 R.. 的评论，可能值得修改现有的 itoa 实现以接受来自调用者的结果缓冲区，而不是让 itoa 分配并返回一个缓冲区。

这样的实现应该接受缓冲区和缓冲区的长度，注意不要超过调用者提供的缓冲区的末尾。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-16T15:55:45.033

```
 int i = 24344; /*integer*/
    char *str = itoa(i); 
    /*allocates required memory and 
    then converts integer to string and the address of first byte of memory is returned to str pointer.*/ 
```**

# java - 使用 OOP 的极其简单的 Java 游戏任务

> ID：11819839
> 
> 赞同：0
> 
> 时间：2012-08-05T20:31:26.653
> 
> 标签：java, oop, graphics

所以我一直在尝试用 Java 制作非常简单的游戏。当我在一个班级中制作整个程序时，我已经取得了成功，但是每当我尝试添加面向对象的原则时，一切都会崩溃。我想要的是从我的好人身上发射子弹，这或多或少是一个炮塔。我可以轻松地设置这样的东西，但是当我尝试使用类来代表好人和子弹时，一切都崩溃了。这是我到目前为止所拥有的。设置主程序框架：

```
import javax.swing.JFrame;

public class Shooter 
{
    public static void main (String[] args)
    {
        JFrame frame = new JFrame("Car");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        ShooterPanel panel = new ShooterPanel();

        frame.getContentPane().add(panel);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

射手面板类：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class ShooterPanel extends JPanel
{
    final int WIDTH = 200, HEIGHT = 100;
    GoodGuy hero;

    public ShooterPanel()
    {
        hero = new GoodGuy(0, HEIGHT-20, 20);
        addKeyListener(new MoveListener());
        setPreferredSize(new Dimension (WIDTH, HEIGHT));
        setFocusable(true); 
    }
    public void paintComponent(Graphics page)
    {
        super.paintComponent(page);
        hero.draw(page);
    }
    private class MoveListener implements KeyListener
    {

        public void keyPressed (KeyEvent event)
        {
            switch (event.getKeyCode())
            {
                case KeyEvent.VK_SPACE:
                    hero.shoot();
                    break;
            }
        }
        //--------------------------------------------------------------
        //Provide empty definitions for unused event methods.
        //--------------------------------------------------------------
        public void keyTyped (KeyEvent event) {}
        public void keyReleased (KeyEvent event) {}
    }
} 
```

我们的主角：

```
import java.awt.*;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

public class GoodGuy 
{
    private int x, y, size;
    private Bullet bullet;

    public GoodGuy(int x, int y, int height)
    {
        size = height;
        this.x = x;
        this.y = y;
    }
    public int getSize()
    {
        return size;
    }
    public void draw(Graphics page)
    {
        page.drawRect(x, y, size, size);
    }
    public void shoot()
    {
        bullet = new Bullet(x+size, y);
    }
} 
```

还有他的子弹：

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.Timer;

public class Bullet 
{
    private int x, y;
    final int LENGTH = 5, DELAY =200;
    private Timer timer;
    Graphics page1;

    public Bullet(int x, int y)
    {
        this.x = x;
        this.y = y;
        timer = new Timer(DELAY, new BulletListener());
        timer.start();
    }
    public void draw(Graphics page)
    {
        page.drawLine (x, y, x+LENGTH, y);  
    }

    //*****************************************************************
    // Represents the action listener for the timer.
    //*****************************************************************
    private class BulletListener implements ActionListener
    {
        public void actionPerformed (ActionEvent event)
        {
            x +=5;  
            draw(page1);
        }
    }
} 
```

我想要发生的是按下空格键，好人出现一颗子弹，并让它穿过屏幕向右移动。我根本无法画出子弹。我已经尝试了几件事，都无济于事。我相信这很容易。正如我所说，我可以在我的 ShooterPanel 类中使用变量来绘制子弹而不是创建对象来完成这一切，但我想面向对象。有人对我有解决方案吗？我将非常感谢一些帮助，但我正在寻找解决方案。拜托，如果你只是想给出一个模糊的建议，我宁愿没有回应。编辑：这是我希望我的程序工作的方式：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.util.ArrayList;

public class ShooterPanel extends JPanel
{
final int WIDTH = 200, HEIGHT = 100;
GoodGuy hero;
ArrayList<BadGuy> enemies = new ArrayList<BadGuy>();
ArrayList<Bullet> bullets = new ArrayList<Bullet>();
private Timer timer, bulletTimer;

final int DELAY = 200;
int count=0;
private boolean bulletOut = false;

public ShooterPanel()
{
    hero = new GoodGuy(0, HEIGHT-20, 20);
    addKeyListener(new MoveListener());
    timer = new Timer(DELAY, new EnemyListener());
    bulletTimer = new Timer(100, new BulletListener());
    setPreferredSize(new Dimension (WIDTH, HEIGHT));
    //enemies.add(new BadGuy(WIDTH-10, HEIGHT-10));
    setFocusable(true );
    timer.start();
}
public void paintComponent(Graphics page)
{
    super.paintComponent(page);
    hero.draw(page);
    for (int i = 0; i < enemies.size(); i++)
    {
        enemies.get(i).draw(page);
    }
    if (bulletOut)
        for(Bullet bullet: bullets)
            bullet.draw(page);

}
private class MoveListener implements KeyListener
{
    //--------------------------------------------------------------
    //Responds to the user pressing arrow keys by adjusting the
    //image and image location accordingly.
    //--------------------------------------------------------------
    public void keyPressed (KeyEvent event)
    {
        switch (event.getKeyCode())
        {
        case KeyEvent.VK_SPACE:
            bullets.add(new Bullet(20,95));
            bulletOut = true;
            bulletTimer.start();
            break;
        }

    }
    //--------------------------------------------------------------
    //Provide empty definitions for unused event methods.
    //--------------------------------------------------------------
    public void keyTyped (KeyEvent event) {}
    public void keyReleased (KeyEvent event) {}
}
//*****************************************************************
// Represents the action listener for the timer.
//*****************************************************************
private class EnemyListener implements ActionListener
{
    //--------------------------------------------------------------
    // Updates the position of the image and possibly the direction
    // of movement whenever the timer fires an action event.
    //--------------------------------------------------------------
    public void actionPerformed (ActionEvent event)
    {
        if (count%20==0)
            enemies.add(new BadGuy(WIDTH-10, HEIGHT-10));

        for (BadGuy enemy: enemies)
        {
            enemy.move();
        }

        count++;
        repaint();
    }
}
private class BulletListener implements ActionListener
{
    //--------------------------------------------------------------
    // Updates the position of the image and possibly the direction
    // of movement whenever the timer fires an action event.
    //--------------------------------------------------------------
    public void actionPerformed (ActionEvent event)
    {
        for(Bullet bullet: bullets)
            bullet.move();
        for(int i = 0; i < bullets.size(); i++)
        {

            if (enemies.size() != 0)
            {
                if (bullets.get(i).getX() > enemies.get(0).getX())
                {
                    bullets.remove(i);
                    enemies.remove(0);
                }
            }
            if (bullets.size() != 0)
            {
                if (bullets.get(i).getX()>WIDTH)
                    bullets.remove(i);
            }       
        }
        repaint();
    }
}
}
import java.awt.*;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

public class GoodGuy 
{
private int x, y, size;
private Bullet bullet;

public GoodGuy(int x, int y, int height)
{
    size = height;
    this.x = x;
    this.y = y;
}
public int getSize()
{
    return size;
}
public void draw(Graphics page)
{
    page.drawRect(x, y, size, size);
}
public void shoot()
{
    bullet = new Bullet(x+size, y);

}
}

import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class BadGuy 
{
private int x, y;
final int RADIUS = 5;

public BadGuy(int x, int y)
{
    this.x = x;
    this.y = y;

}
public void move()
{
    x -= 5;

}
public void draw(Graphics page)
{
    page.drawOval(x, y, RADIUS*2, RADIUS*2);
}
public int getX()
{
    return x;
}

}
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.Timer;

public class Bullet 
{
private int x, y;
final int LENGTH = 5, DELAY =200;

public Bullet(int x, int y)
{
    this.x = x;
    this.y = y;
}
public void draw(Graphics page)
{
    page.drawLine (x, y, x+LENGTH, y);

}
public void move()
{
    x += 5;
}
public int getX()
{
    return x;
}   
} 
```

射击类保持不变。这就是我希望程序做的事情，但这并不是我希望它做的事情。如果它更面向对象，并且每个类都照顾好自己，我会更喜欢它。根据我的口味，ShooterPanel 已经开始变得有些复杂，而且随着程序添加更多内容，它只会变得更糟。我想改变的一件事是每个子弹都有自己的计时器，并在 Bullet 类中定义了一个 ActionListener。但是，我无法弄清楚如何以每次计时器触发事件​​时重新绘制子弹的方式来执行此操作。如果有人知道这样做的方法，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T20:44:11.390

您需要使您的 ShooterPanel 可聚焦。添加：

```
 setFocusable(true);
    requestFocusInWindow(); 
```

BulletListener 的 Graphics 也从未设置。这种绘画（ing）可能应该发生在 ShooterPanel 本身中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T21:03:22.887

Try to take advantage of the [KeyBindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html) API instead of a `KeyListener`, if setup correctly, it should over come the issues with the focus.

# ruby-on-rails - 每当我创建新的 Rails 应用程序时，如何创建 Postgres 用户和数据库？

> ID：11819841
> 
> 赞同：6
> 
> 时间：2012-08-05T20:31:46.457
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, rails-postgresql

我遵循了这个非常有用的教程：

[http://blog.willj.net/2011/05/31/setting-up-postgresql-for-ruby-on-rails-development-on-os-x/](http://blog.willj.net/2011/05/31/setting-up-postgresql-for-ruby-on-rails-development-on-os-x/)

我真的很想运行`rails new myapp`并自动设置 postgres 数据库。有什么方法可以使用[Rails 应用程序模板](http://edgeguides.rubyonrails.org/rails_application_templates.html)或类似的东西来做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-05T20:40:54.797

在基于 Unix 的系统上：

```
sudo -u postgres createuser -d -R -P APPNAME
sudo -u postgres createdb -O APPNAME APPNAME 
```

如果您不记得，您可以创建一个脚本并将其放在 $PATH 中的某个位置。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-05T20:42:03.560

实际上，您不需要在每次创建新的 rails 应用程序时都创建新用户。

您所要做的就是创建新应用程序并更改`username`您的`database.yml`

```
development:
  adapter: postgresql
  encoding: unicode
  database: newapp_development
  pool: 5
  username: #your username
  password:
... 
```

不仅仅是：

```
rake db:create:all 
```

# rgb - 将 hsl 转换为 hsb

> ID：11819844
> 
> 赞同：0
> 
> 时间：2012-08-05T20:32:23.103
> 
> 标签：rgb, hsl, hsb

将 HSL 转换为 HSB 的公式是什么？我只能找到可以轻松将 RGB 移植到 HSL 的代码。根据[此堆栈溢出答案](https://stackoverflow.com/questions/3423214/convert-hsb-color-to-hsl)，我可以使用以下公式将 hsb 转换为 hsl：

(b - s) / 2

但我想另辟蹊径， (b+s) * 2 返回的值与 Photoshop 的转换明显不同，例如：

?rgbtohsb(100,100,100) s: 0 h: 0 b: 200 而 Photoshop 返回 0,0,39

这是我基于[easyrgb.com](http://www.easyrgb.com/index.php?X=MATH&H=18#text18)网站的rgb到hsl代码的代码（这是用Brightscript编写的，[Roku Digital Video Player](http://www.roku.com)的基本语言）：

```
function RGBtoHSB(r as integer, g as integer, b as integer) as object
hue=0.0
var_R = ( R / 255 )
?"var_R=";var_r
var_G = ( G / 255 )
?"var_g=";var_g
var_B = ( B / 255 )
?"var_b=";var_b
var_Min = min([ var_R, var_G, var_B ])    'Min. value of RGB
?"var_min=";var_min
var_Max = max([ var_R, var_G, var_B ])    'Max. value of RGB
?"var_max=";var_max
del_Max = var_Max - var_Min             'Delta RGB value
?"del_max=";del_max

LUM = ( var_Max + var_Min ) / 2
?"LUM=";LUM
if ( del_Max = 0 )                     'This is a gray, no chroma...
?"del_max=0"
   HUE = 0                                'HSL results from 0 to 1
   SAT = 0
else                                    'Chromatic data...
?"del_max";del_max
   if ( LUM < 0.5 ) then 
        SAT = del_Max / ( var_Max + var_Min )
        ?"Lum < 0.5 so SAt=";sat
   else           
   ?"LUM > 0.5, LUM=";LUM
        SAT = del_Max / ( 2 - var_Max - var_Min )
        ?"SAT=";SAT

       del_R = ( ( ( var_Max - var_R ) / 6 ) + ( del_Max / 2 ) ) / del_Max
       ?"del_r=";del_r
       del_G = ( ( ( var_Max - var_G ) / 6 ) + ( del_Max / 2 ) ) / del_Max
       ?"del_g=";del_g
       del_B = ( ( ( var_Max - var_B ) / 6 ) + ( del_Max / 2 ) ) / del_Max
       ?"del_b=";del_b

       if var_R = var_Max THEN
           HUE = del_B - del_G
           ?"var_r=var_max, so HUE=";hue
       else if ( var_G = var_Max ) then 
           HUE = ( 1 / 3 ) + del_R - del_B
           ?"var_g=var_max so HUE=";hue
       else if ( var_B = var_Max ) then 
           HUE = ( 2 / 3 ) + del_G - del_R
           ?"var_b=var_max so HUE=";hue
       end if

       if ( HUE < 0 ) then 
           HUE = HUE + 1
           ?"hue < 0 so hue=";hue
       end if
       if ( HUE > 1 ) then 
           HUE = HUE - 1
           ?"hue > 1 so hue=";hue
       end if

    end if
end if

?"sleeping"
sleep(5000)

bri=0.0
bri=(lum+sat) *2
?"hue=";HUE;" SAT=";sat;" LUM=";lum;" bri=";bri 

return {h:int(hue*255),s:int(sat*255),l:int(lum*255),b:int(bri*255)}
end function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T07:13:23.337

我编写了一些函数，用于直接从 HSV 转换 HSL 并返回。但是，它假定 S、L、B 和 V 值的范围是从 0 到 1，而不是从 0 到 100。此外，这些函数使用 C# 而不是 BrightScript。

[https://gist.github.com/4085710](https://gist.github.com/4085710)

该代码已发布到公共领域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-09T16:00:04.280

与***[此答案相关](https://stackoverflow.com/a/31322679/383904)***

两者的色调是相同的，所以让我们看看数学：

```
var SL = {s:0, l:0},
    SB = {s:0, b:0};

function sb2sl(){
  var l = (2 - SB.s / 100) * SB.b / 2;              // Lightness range 0-100
  SL.s = Math.round( SB.s * SB.b / (l<50 ? l * 2 : 200 - l * 2) ) |0;
  SL.l = Math.round( l );
}
function sl2sb(){
  var t = SL.s * (SL.l<50 ? SL.l : 100-SL.l) / 100; // Temp value
  SB.s = Math.round( 200 * t / (SL.l+t) ) |0;
  SB.b = Math.round( t+SL.l );
}
// Above, the "|0" prevents the NaN while dividing by 0 
```

另见：[http ://code.stephenmorley.org/javascript/colour-handling-and-processing/](http://code.stephenmorley.org/javascript/colour-handling-and-processing/)

# sql - SELECT AS 到所有表

> ID：11819846
> 
> 赞同：2
> 
> 时间：2012-08-05T20:32:35.123
> 
> 标签：sql

我有一个包含许多列的表，我想在选择时为每一列添加相同的前缀，我的意思是而不是长代码：

```
SELECT table.id    AS prefix_id
      ,table.value AS prefix_value
      ,table.content AS prefix_content
      , ... 
```

有简单的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T20:35:08.887

不可能为所有列添加前缀，除非您手动使用`AS`（如在您的示例中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T20:54:29.637

我不知道这是否会对您有所帮助，请编写一个脚本来执行此操作。您可以自定义它以传递表名、前缀等

```
declare 
@tableName varchar(50) = 'school',
@sql varchar(max) = 'SELECT '

Select @sql = @sql+'c.'+c.name+',' from sys.columns c
join sys.tables t on c.object_id = t.object_id
where t.name = @tableName

--MORE PRECISELY
Select @sql = @sql+'c.'+c.name+' as prefix_'+c.name+', ' from sys.columns c
join sys.tables t on c.object_id = t.object_id
where t.name = @tableName

Set @sql = @sql + ' FROM '+@tableName+' c'

print @sql 
```

输出，`c.`前缀在哪里。可以根据口味修改代码

```
SELECT c.SchoolID as prefix_SchoolID, 

    c.SchoolName as prefix_SchoolName, 
    c.Address as prefix_Address, 
    c.City as prefix_City, 
    c.State as prefix_State, 
    c.Country as prefix_Country,
    c.PhoneNumber as prefix_PhoneNumber, 
    c.Password as prefix_Password,
    c.CreatedBy as prefix_CreatedBy, 
    c.CreatedOn as prefix_CreatedOn, 
    c.ModifiedBy as prefix_ModifiedBy, 
    c.ModifiedOn as prefix_ModifiedOn, 

FROM school c 
```

注意后面的逗号`modifiedOn`。您可能需要将其从`@sql`变量中删除或手动删除

# c# - 以编程方式将程序注册到添加/删除程序并将文件存储在可执行文件中

> ID：11819849
> 
> 赞同：21
> 
> 时间：2012-08-05T20:32:52.850
> 
> 标签：c#, installation, uninstallation

我正在开发一个 Windows c# 控制台应用程序，我希望允许用户将其安装到他们的计算机上。

我想让我自己的 Windows Installer 可执行，因为 Visual Studio 中内置的安装部署工具似乎有点缺乏自定义和文档的功能。

因此，因为我想制作自己的 Windows 安装程序，如何将我的程序注册到“添加/删除程序”窗口中，以便他们可以选择再次卸载它，如果他们愿意，它会重新启动我的安装程序以进行删除。

同样，可执行文件显然需要将文件复制到 PC 上的不同位置，即`C:\Program Files`，我将如何将可执行文件存储在 Windows 安装程序可执行文件中，以便将它们移动到正确的位置。

这可能吗？

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-06T02:43:58.567

这是我们用来在“添加/删除程序”中注册我们的程序的例程：

```
private void CreateUninstaller()
{
    using (RegistryKey parent = Registry.LocalMachine.OpenSubKey(
                 @"SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall", true))
    {
        if (parent == null)
        {
            throw new Exception("Uninstall registry key not found.");
        }
        try
        {
            RegistryKey key = null;

            try
            {
                string guidText = UninstallGuid.ToString("B");
                key = parent.OpenSubKey(guidText, true) ??
                      parent.CreateSubKey(guidText);

                if (key == null)
                {
                    throw new Exception(String.Format("Unable to create uninstaller '{0}\\{1}'", UninstallRegKeyPath, guidText));
                }

                Assembly asm = GetType().Assembly;
                Version v = asm.GetName().Version;
                string exe = "\"" + asm.CodeBase.Substring(8).Replace("/", "\\\\") + "\"";

                key.SetValue("DisplayName", "My Program");
                key.SetValue("ApplicationVersion", v.ToString());
                key.SetValue("Publisher", "My Company");
                key.SetValue("DisplayIcon", exe);
                key.SetValue("DisplayVersion", v.ToString(2));
                key.SetValue("URLInfoAbout", "http://www.blinemedical.com");
                key.SetValue("Contact", "support@mycompany.com");
                key.SetValue("InstallDate", DateTime.Now.ToString("yyyyMMdd"));
                key.SetValue("UninstallString", exe + " /uninstallprompt");
            }
            finally
            {
                if (key != null)
                {
                    key.Close();
                }
            }
        }
        catch (Exception ex)
        {
            throw new Exception(
                "An error occurred writing uninstall information to the registry.  The service is fully installed but can only be uninstalled manually through the command line.",
                ex);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T20:45:14.267

不要构建自己的安装程序，使用经过验证的部署工具，例如： [NSIS](http://nsis.sourceforge.net/Main_Page)、[Inno Setup](http://www.jrsoftware.org/isinfo.php)或[WiX](http://wixtoolset.org/)。所有这些都是免费的，并且有很多功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T20:37:12.050

您可以尝试使用[ClickOnce](http://msdn.microsoft.com/en-us/library/t71a733d%28v=vs.80%29.aspx)或[Microsoft Installer 技术 (msi)](http://support.microsoft.com/kb/310598)部署您的应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T02:16:40.580

在这种情况下，我建议使用 MSI 安装程序，因为它可以让您控制包详细信息（即名称）、在客户端复制文件的位置，并允许添加您想要作为 msi 安装程序一部分包含的额外文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-08T15:55:50.483

看在上帝的份上，不要使用 clickonce ......这比它的价值更麻烦。如果您没有机器的管理权限并且需要安装某些东西，那么值得花时间请求许可。

# class - 以编程方式检测类参数

> ID：11819853
> 
> 赞同：0
> 
> 时间：2012-08-05T20:33:00.987
> 
> 标签：class, c#-4.0, generics, types

在 C# 中，我有一个接受`<T>`. 目前我正在使用创建一个实例`Activator.CreateInstance<T>()`。

有没有办法`<T>`在运行时检测参数，以便我可以`<T>`使用参数创建？

方法存根如下：

```
public static T Get<T>()
{
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T20:44:06.277

您需要记住，任何特定类型都可以有多个构造函数。你可以很容易地找到它们：

```
var constructors = typeof(T).GetConstructors(); 
```

请注意，如果您想查找非公共构造函数，[`Type.GetConstructors`](http://msdn.microsoft.com/en-us/library/system.type.getconstructors.aspx)则会有一个重载。`BindingFlags`

# java - 从 Java ObjectInputStream 中丢弃一个坏对象

> ID：11819855
> 
> 赞同：0
> 
> 时间：2012-08-05T20:33:36.197
> 
> 标签：java, object, serialization

这个问题是关于 Java ObjectInputStream 的。如果流处于我*知道*读取下一个对象将导致 ClassNotFoundException 的状态，是否有某种方法可以简单地丢弃该对象（因为我实际上并不关心数据）并读取其余信息从流中？

我认为忽略异常不会起作用，因为 API 文档说，如果您读取一个对象，并且发生 ClassCastException（这就是我的情况），那么流将处于不确定状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T20:35:47.920

流处于您无法恢复的状态。理论上您可以读取数据，但您必须对格式有深入的了解，并且加载所需的类可能会更简单。即如果这听起来很难，阅读格式就更难了。

# .net - 使用字节顺序标记检测将字节数组转换为文本

> ID：11819859
> 
> 赞同：0
> 
> 时间：2012-08-05T20:33:43.220
> 
> 标签：.net, string, utf8-decode

试图找出与此等效的 byte[]

```
 string getText = string.Empty;
    using (StreamReader sr = new StreamReader((System.IO.Stream)File.OpenRead(unc), true))
    {
        getText = sr.ReadToEnd();
    } 
```

希望将 byte[] 转换为具有指定字节顺序标记检测选项的字符串，如 StreamReader 可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T20:37:35.170

您仍然可以使用`StreamReader`- 只需将字节数组包装在`MemoryStream`. （顺便说一句，不清楚你为什么要投到`File.OpenRead`.. `Stream`）

```
using (StreamReader sr = new StreamReader(new MemoryStream(data))) 
```

# java - 在 Java 中使用 Object.equals() 是一种可接受的做法吗？

> ID：11819870
> 
> 赞同：1
> 
> 时间：2012-08-05T20:35:47.920
> 
> 标签：java, object

我在 Java 中创建了一个复杂对象，并使用 equals 方法进行比较。

这可以吗，还是更喜欢给对象一个名称或一个 ID 并比较对象名称/ID？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T20:37:22.767

您应该使用该`equals()`方法。如果您想将相等作为名称和/或 id 比较，请在`equals()`方法内部进行。

这是[Java 确定相等性](http://www.javapractices.com/topic/TopicAction.do?Id=17)的默认方式。

另外，看看这个问题的一些答案：[Overriding the java equals() method quirk](https://stackoverflow.com/questions/185937/overriding-the-java-equals-method-quirk)

`equals()`和之间有关系`hashcode()`。这两个都被 Collections 使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T20:38:01.957

默认`equals`继承自`Object#equals()`比较引用。换句话说，如果 2 个对象相同（内存中的相同对象），则返回 true。

如果你想让equals在你的两个对象共享相同的特征时返回true，即使它们是不同的对象，那么你应该覆盖equals并比较这些特征。

如果你覆盖 equals，[你也应该覆盖 hashcode](https://stackoverflow.com/questions/27581/overriding-equals-and-hashcode-in-java)。

# javascript - 如何通过将参数传递给 func 来更改默认值？

> ID：11819871
> 
> 赞同：0
> 
> 时间：2012-08-05T20:35:57.950
> 
> 标签：javascript, jquery

我为我的函数设置了默认值，但是当我想通过传递参数来更改它们时，值不会改变吗？

这是一个[JsFiddle 示例](http://jsfiddle.net/KjgTV/41/)

这是我的标记：

HTML：

```
<div class='container'>
    <img src='https://encrypted-tbn0.google.com/images?q=tbn:ANd9GcRbQ6aMnp7uA2VHgEOY6oU24DcB-ZvoBF_puGTB6kq4c8DyMJr2'/>
    <img src='http://www.fullscreensavers.com/pics/nature02l.jpg' />
    <img src='http://www.fullscreensavers.com/pics/nature03l.jpg' />
</div> 
```

CSS：

```
.container{
    position: relative;
    margin: 0 auto;
    width: 200px;
    height: 200px;
    margin-top: 50px;
}

.container img{
    position: absolute;
    top: 0;
    left:0;
    width: 100%;
    height: 100%;
    display: none;
}
​ 
```

Javascript：

```
var InfiniteRotator = {
    init: function(domEle, options) {
        options = {
            itemInterval : 5000,
            fadeTime : 2500,
            currentItem : 0
        };
        //count number of items
        var numberOfItems = $('img', domEle).length;
        //show first item
        $('img', domEle).eq(options.currentItem).fadeIn();
        //loop through the items
        var infiniteLoop = setInterval(function() {
            $('img', domEle).eq(options.currentItem).fadeOut(options.fadeTime);
            if (options.currentItem == numberOfItems - 1) {
                options.currentItem = 0;
            } else {
                options.currentItem++;
            }
            $('img', domEle).eq(options.currentItem).fadeIn(options.fadeTime);
        }, options.itemInterval);
    }
};

InfiniteRotator.init($(".container"),{currentItem: 1});​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T20:38:56.110

```
function(…, options) {
    options = {…}; 
```

有了这个，你只需覆盖`options`参数。您想要的是使用参数中的属性[扩展默认选项对象：](http://api.jquery.com/jQuery.extend/)

```
function(…, customOptions) {
    var defaults = {…};
    var options = $.extend(defaults, customOptions);
    ... 
```

更短，更少可变的混乱：

```
function(…, options) {
    options = $.extend({…}, options);
    ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T20:41:52.190

```
function(domEle, options) {
    options = $.extend({
        itemInterval : 5000,
        fadeTime : 2500,
        currentItem : 0
    }, options);
} 
```

**编辑：**哎呀，太晚了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T20:38:45.153

```
init: function(domEle, options) {
  options = options || {
    itemInterval : 5000,
    fadeTime : 2500,
    currentItem : 0
  }; 
```

# python - 在单个 python 正则表达式中使用匹配的数字作为重复计数

> ID：11819873
> 
> 赞同：1
> 
> 时间：2012-08-05T20:36:36.640
> 
> 标签：python, regex

我收到一条带有标头的消息，该标头指定了数据的长度。在我的示例中，我有一条 28 个字符的消息要处理。

我试图找到某种方法在同一个正则表达式中使用匹配的数字作为重复计数，就像这个不工作的例子：

```
s = "message 28\r\nthis is some random sentence"
matches = re.match(r"(?P<command>\S+)\s+(?P<bytes>\d+)\r\n(?P<data>.{(?P=bytes)})", s, re.DOTALL).groupdict() 
```

我的理解是我的 (?P=bytes) 是与“字节”命名组匹配的相同字符串的匹配项，而不是允许我任意更改正则表达式，这就是它不起作用的原因，但是有什么方法可以实现我不想通过两个正则表达式传递我的字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T20:39:22.020

不可能编写一个可以匹配长度的正则表达式，然后将该长度用作量词中的反向引用。

可以使用正则表达式求长度，然后使用普通的字符串切片操作从字符串中提取出合适的字符。

# jsp - DisplayTag Export 正在导出所有 bean 字段

> ID：11819875
> 
> 赞同：1
> 
> 时间：2012-08-05T20:36:41.877
> 
> 标签：jsp, displaytag

我正在使用带有[ExcelHssfView](http://www.displaytag.org/1.2/displaytag-export-poi/apidocs/org/displaytag/export/excel/ExcelHssfView.html)的 displaytag 的 Excel 导出来将表格导出为 Excel。但是，表支持 bean 中的每个字段都被写入导出的表，而不仅仅是定义的列。我的显示标签配置是：

```
export.types=excel
export.csv=false
export.pdf=false
export.excel=true
export.xml=false

export.excel.class=org.displaytag.export.excel.ExcelHssfView
export.excel.decorator=org.displaytag.sample.decorators.HssfTotalWrapper
export.ExcelView=org.displaytag.export.ExcelView 
```

而在jsp中

```
 <display:setProperty name="export.excel" value="true" />
    <display:setProperty name="export.excel.filename" value="invoiceList.xls" />
    <display:setProperty name="export.amount" value="list" />
    <display:setProperty name="export.excel.include_header" value="true" />
    <display:setProperty name="export.excel.label" value="Download Invoices" />
</display:table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T20:41:02.123

**所有**`<display:column>`标签的属性`media`都设置为`html`，这阻止了 Excel 导出（期望`all`or`excel`媒体）引用它们，因此 displaytag 默认传递所有 bean 列。

```
<display:column media="html" headerClass="sortable"
            title="Invoice Amount" class="textDisplayArea" >
         $ <c:out value="${invoice.invoiceAmount}" /> 
</display:column> 
```

变成

```
<display:column headerClass="sortable"
            title="Invoice Amount" class="textDisplayArea" >
         $ <c:out value="${invoice.invoiceAmount}" /> 
</display:column> 
```

它奏效了。

# f# - 使用 when 子句进行 F# 模式匹配

> ID：11819876
> 
> 赞同：4
> 
> 时间：2012-08-05T20:37:02.223
> 
> 标签：f#

您好，我已经编写了以下代码。

我的目标是编写一个名为 getWoeid 的函数，它将检查命令行参数是否为具有 1 个元素的数组，并且该元素是一个整数。

我的代码有效......但我两次调用 TryParse 方法......我想知道是否有一种方法可以只调用一次。

另外，您能否确认这种使用模式匹配来验证命令行参数的方式是否正确？

```
open System;
open System.Xml;

let getWoeid args =   
  let retVal = 0
  match args with      
  | [|a|] when fst (Int32.TryParse(a)) = true -> 
      printfn "%s" "Starting the processing for woeid "
      Some(snd (Int32.TryParse(a)))      
  | _ -> failwith "Usage XmlRead WOEID"       

[<EntryPoint>]
let main args = 
  let woeid= 
    try   
      getWoeid args          
    with
      | Failure (msg) -> printfn "%s" msg; None

  0 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-05T21:07:36.927

You can define active pattern:

```
let (|Int|_|) s = 
    match System.Int32.TryParse s with
    | true, v -> Some v
    | _ -> None

let getWoeid args = 
    match args with
    | [|Int v|] -> Some v
    | _ -> None 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-06T14:13:41.007

您还可以将 byref 参数传递给`TryParse`而不是允许它被元组化。

```
let getWoeid args = 
  let mutable i = 0
  match args with
  | [|s|] when Int32.TryParse(s, &i) -> Some i
  | _ -> None 
```

# c# - 开发人员能否“强制”系统阻止“Metro”应用在后台异步进程运行时被挂起？

> ID：11819882
> 
> 赞同：3
> 
> 时间：2012-08-05T20:37:34.750
> 
> 标签：c#, windows-services, windows-8, microsoft-metro, async-await

当应用程序当前不在 Win8 中的“前端和中心”时，它会被暂停。这是否会阻止应用程序在后台（例如在电子邮件客户端）中显式保持活动状态，使用异步操作轮询邮件服务器以获取新消息并下载它们（然后使用新消息的数量更新 Tile）？

如果这是不可能的（暂停的应用程序无法执行后台处理，或者无法强制系统使其保持活动状态，尽管它不可​​见），解决方法是什么 - 单独的 Windows 服务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T20:45:09.070

您应该查看后台任务。[这里](http://www.microsoft.com/en-us/download/details.aspx?id=27411)有一份白皮书。

# regex - Sublime Text 2中的正则表达式搜索替换

> ID：11819886
> 
> 赞同：478
> 
> 时间：2012-08-05T20:38:28.040
> 
> 标签：regex, replace, sublimetext2

我希望在 Sublime Text 2 中用正则表达式进行搜索替换。这方面的[文档](http://docs.sublimetext.info/en/latest/search_and_replace/search_and_replace_overview.html#regular-expressions)相当贫乏。具体来说，我想对组进行替换，因此类似于转换此文本：

`Hello my name is bob`

而这个搜索词：

找什么：`my name is (\w)+`

用。。。来代替：`my name used to be $(1)`

搜索词工作得很好，但我想不出一种方法来实际使用 regexp 组进行替换。

* * *

## 回答 #1

> 赞同：637
> 
> 时间：2012-08-05T20:41:40.567

通常，对于第一个捕获组（括号中的模式的第一个匹配项），反向引用是`$1`或者`\1`（反斜杠），并且确实 Sublime 支持这两种语法。所以试试：

```
my name used to be \1 
```

或者

```
my name used to be $1 
```

另请注意，您的原始捕获模式：

```
my name is (\w)+ 
```

不正确，只会捕获名称的最后一个字母，而不是整个名称。您应该使用以下模式来捕获名称的所有字母：

```
my name is (\w+) 
```

* * *

## 回答 #2

> 赞同：109
> 
> 时间：2012-12-05T21:38:49.133

顺便说一句，在上面的问题中：

为了：

```
Hello, my name is bob 
```

查找部分：

```
my name is (\w)+ 
```

带更换零件：

```
my name used to be \1 
```

将返回：

```
Hello, my name used to be b 
```

将查找部分更改为：

```
my name is (\w+) 
```

替换将是您所期望的：

```
Hello, my name used to be bob 
```

虽然 (\w)+ 将匹配 "bob"，但它不是您想要替换的分组。

* * *

## 回答 #3

> 赞同：68
> 
> 时间：2014-08-07T12:12:42.093

> 重要提示：`( )`在搜索字符串中使用括号

虽然前面的答案是正确的，但有一点需要强调！您要在**替换字符串中使用****的搜索字符串**中的所有匹配段必须**用****括号括**起来，否则这些匹配的段将无法被定义的变量访问，例如,或等。****`( )`**`$1``$2``\1``\2`**

 **例如，我们想用 'px' 替换 'em' 但保留数字值：

```
 margin: 10em;  /* Expected: margin: 10px */
    margin: 2em;   /* Expected: margin: 2px */ 
```

*   替换字符串：`margin: $1px`或`margin: \1px`
*   搜索字符串 (CORRECT): `margin: ([0-9]*)em`// 带括号
*   搜索字符串（不正确）：`margin: [0-9]*em`

* * *

**正确案例示例：**使用`margin: ([0-9]*)em`搜索字符串（带括号）。用括号括住所需的匹配段（例如`$1`或`\1`），`( )`如下所示：

*   查找：（`margin: ([0-9]*)em`带括号）
*   替换为：`margin: $1px`或`margin: \1px`
*   结果：

```
 margin: 10px;
    margin: 2px; 
```

* * *

**错误案例示例：**使用`margin: [0-9]*em`搜索字符串（不带括号）。以下正则表达式模式将匹配所需的行，但匹配的段在替换字符串中将不可用，例如`$1`or `\1`：

*   查找：（`margin: [0-9]*em`不带括号）
*   替换为：`margin: $1px`或`margin: \1px`
*   结果：

```
 margin: px; /* `$1` is undefined */
    margin: px; /* `$1` is undefined */ 
```

* * *

## 回答 #4

> 赞同：50
> 
> 时间：2017-02-15T18:59:12.157

这是已批准答案的视觉呈现。

[![在此处输入图像描述](../Images/60b89b3b98402cf95479906d07207505.png)](https://i.stack.imgur.com/pZLrH.gif)

* * *

## 回答 #5

> 赞同：30
> 
> 时间：2016-09-07T16:16:35.630

请注意，如果您使用超过 9 个捕获组，则必须使用语法`${10}`。

`$10`或`\10`或`\{10}`将**不起作用**。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-06-26T21:17:03.053

查看[Sublime Text 非官方文档关于 Search and Replace 的文章](http://docs.sublimetext.info/en/latest/search_and_replace/search_and_replace_overview.html)，它看起来像是`+(.+)`您可能想要的捕获组......但我个人使用`(.*)`并且效果很好。要以您所说的方式替换，您可能会喜欢[论坛中的这个对话](https://forum.sublimetext.com/t/how-to-replace-not-find-using-regex/13134/4)，特别是[这篇文章](https://forum.sublimetext.com/t/how-to-replace-not-find-using-regex/13134/4)，它说简单地`$1`使用第一个捕获的组。

**既然图片胜于文字...**

**前：** [![在查找/替换之前](../Images/1c1eac8d98079c9d5e769eb60aa4825c.png)](https://i.stack.imgur.com/E3LyO.png)

**后：** [![查找/替换后](../Images/d7e4dd5140a5b986c9692e6b47038ef8.png)](https://i.stack.imgur.com/nrT4K.png)**

# java - ScrollView 在其他内容下滚动

> ID：11819895
> 
> 赞同：0
> 
> 时间：2012-08-05T20:39:26.997
> 
> 标签：java, android, layout, scrollview

如何防止 ScrollView 在 LinearLayout 内容下滚动内容？ScrollView 只是使用了所有的显示空间，我不能限制这一点。尝试使用主要的相对和线性布局。

我的代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
tools:context=".MainActivity" >

<LinearLayout
    xmlns:myapp="http://schemas.android.com/apk/res/your.app.package"
    android:id="@+id/ad_layout"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >
</LinearLayout>

<ScrollView
    android:id="@+id/ScrollView1"
    android:layout_width="match_parent"
    android:layout_height="0px"
    android:layout_weight="1" >

<RelativeLayout
    android:id="@+id/RelativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="bottom"
    android:orientation="vertical" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:contentDescription="@string/image"
    android:onClick="openImage1"
    android:scaleType="fitStart"
    android:src="@drawable/loading"
    android:adjustViewBounds="true"
    android:background="#000000" />

</RelativeLayout>
</ScrollView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T20:43:37.027

您还没有发布完整的 XML 代码；我只能猜测这些元素都包含在`LinearLayout`with`vertical`方向中。

要让`ScrollView`填充 未占用的所有空间`LinearLayout`，请使用`layout_weight`。

```
<ScrollView
    android:id="@+id/ScrollView1"
    android:layout_width="match_parent"
    android:layout_height="0px"
    android:layout_weight="1" > 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T08:00:08.960

对我来说，您的滚动视图中有一个 RelativeLayout 似乎有点奇怪。但是如果我正确理解了您的问题，您希望滚动视图位于您那里的上部 LinearLayout 下方。我猜您正在寻找类似以下的内容：（看看`LinearLayout`我添加的新内容和`android:layout_below`. 我还将外部布局更改为`RelativeLayout`; 再次，我不确定您到底在尝试什么做，但我希望这在某种程度上有所帮助。）

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   xmlns:tools="http://schemas.android.com/tools"
   android:layout_width="match_parent"
   android:layout_height="match_parent"
   android:orientation="vertical"
   tools:context=".MainActivity" >

   <LinearLayout
   xmlns:myapp="http://schemas.android.com/apk/res/your.app.package"
   android:id="@+id/ad_layout"
   android:layout_width="match_parent"
   android:layout_height="wrap_content"
   android:orientation="horizontal" >
   </LinearLayout>

   <LinearLayout
      android:id="@+id/below_ad_layout"
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:orientation="vertical"
      android:layout_below="@+id/ad_layout" >
   <ScrollView
    android:id="@+id/ScrollView1"
    android:layout_width="match_parent"
    android:layout_height="0px"
    android:layout_weight="1" >

   <RelativeLayout
    android:id="@+id/RelativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="bottom"
    android:orientation="vertical" >

   <ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:contentDescription="@string/image"
    android:onClick="openImage1"
    android:scaleType="fitStart"
    android:src="@drawable/loading"
    android:adjustViewBounds="true"
    android:background="#000000" />

   </RelativeLayout>
   </ScrollView>
   </LinearLayout>

</RelativeLayout> 
```

# jquery - 启用 JS 和禁用 JS 的表单提交

> ID：11819903
> 
> 赞同：2
> 
> 时间：2012-08-05T20:40:39.630
> 
> 标签：jquery, ajax

现在我有两种提交表单的方法——一种是启用 Javascript（ajax 表单提交，提交到 process.php），另一种是未启用 Javascript（提交到 index.php）。但是，现在我启用了 Javascript，并且 JQ/Ajax 提交不起作用，因为页面正在刷新。

索引.php：

```
<?php
    include_once('TaskDB.php');
    include_once('task.php');

// JAVASCRIPT DISABLED

    if(isset($_POST['description_text']) && isset($_POST['deadline_text'])){
        $description = $_POST['description_text'];
        $duration = $_POST['duration_text'];
        $deadline = $_POST['deadline_text'];

        // create a new task object, add it to database
        $task = new Task('DEFAULT', $description, $duration, $deadline, '0');
        TaskDB::addTask($task);
        // to prevent re-submission upon refreshing the page
        header('Location: index.php');
    }

<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="css/style.css"/>
    <title>Taskage</title>
    <script>
        $(document).ready(function(){
            $('#task_form').submit(function(e){
                $.post('process.php', $("#task_form").serialize(), function(data){

                    // clear the current task table
                    $('#form').nextAll('tr').empty();

                    // refresh the task table with the newly inserted task
                    $(data).insertAfter('#form');
                });
                e.preventDefault();
            });
        });
    </script>
</head>
<body>

    <div id="topframe">
        <div id="logo"></div>
    </div>

    <div id="nav">
        <table id = nav_table>
        <tr>
            <td><a href="index.php"><img src="images/tab1m.png" class="navimg" id="tab1"/></a></td>
            <td><a href="completed.php"><img src="images/tab2.png" class="navimg" id="tab2"/></a></td>
            <td><a href="failed.php"><img src="images/tab3.png" class="navimg" id="tab3"/></a></td>
            <td><a href="settings.php"><img src="images/tab4.png" class="navimg" id="tab4"/></a></td>
        </tr>
        </table>
    </div>

    <div id="main_area">
        <h2>Tasks</h2>

        <table id = "tasks_table">
        <tr>
            <th>Date</th>
            <th>Hours</th>
            <th>Task</th>
            <th></th>
        </tr>
        <tr id = "form">
            <form action="index.php" method="POST" id="task_form">
                <td><input type="text" id="deadline_text" name="deadline_text"/></td>
                <td><input type="text" id="duration_text" name="duration_text"/></td>
                <td><input type="text" id="description_text" name="description_text"/></td>
                <td><input type="submit" value="Add Task" id="task_submit"/></td>
            </form>
        </tr>

        <?php
            TaskDB::generateTaskTable();
        ?>

        </table>
    </div>

</body>
</html> 
```

进程.php：

```
<?php

include_once('TaskDB.php');
include_once('task.php');

if(isset($_POST['description_text']) && isset($_POST['deadline_text'])){
    $description = $_POST['description_text'];
    $duration = $_POST['duration_text'];
    $deadline = $_POST['deadline_text'];

    // create a new task object, add it to database
    $task = new Task('DEFAULT', $description, $duration, $deadline, '0');
    TaskDB::addTask($task);
    TaskDB::generateTaskTable();

}

?> 
```

每当提交表单时都有一个 preventDefault() ，所以我不知道为什么页面会刷新。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T21:10:36.750

我注意到你用来拉入 jQuery 的地址有一个`https`协议。如果您的网站不是，它可能会被浏览器阻止`https`。尝试将其更改为`http`。

换句话说，似乎您的 jQuery 没有被加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T21:13:16.123

我意识到 JQuery 没有加载的原因是因为我的 CMOS 电池最近没电了，而且我的日期和时间已关闭（设置为 2009 年），所以安全证书不允许加载某些页面，我假设，阻止我加载谷歌的 JQ。重置时间和日期后，它开始正确加载。奇怪的！

感谢您的回复和帮助！

# linux - 我的引导加载程序不能用 gcc 4.6 和 4.7 编译……只有 4.5

> ID：11819906
> 
> 赞同：10
> 
> 时间：2012-08-05T20:40:49.413
> 
> 标签：linux, gcc, bootloader

我在 2 年前用`gcc`4.5 在 debian 挤压/稳定下创建了我的引导加载程序。现在在 debian wheezy/sid 中​​不能用 4.6 和 4.7 编译，因为从这些创建更大的部分，我希望手动生成最终的二进制文件。现在这对我来说不是问题，因为在 debian wheezy/sid 中​​，`gcc`4.5 仍然存在，但我希望能够使用`gcc`4.6 和 4.7 进行编译。

我像这样生成最终的二进制文件：

源文件编译为：

```
gcc-4.5 -Wall -O3 -c -m32 -I. -o assemblybin-objects/vga_pm.S.o vga_pm.S 
```

与连接：

```
ld -nostdlib -T binary.ld assemblybin-objects/vga_pm.S.o ... and other objects here ... -o bootloader.bin 
```

的内容`binary.ld`是：

```
OUTPUT_FORMAT("binary","binary","binary")
OUTPUT_ARCH(i386)

SECTIONS
{
. = 0;
.bootloader : {
    . = 0x600;
    *(.bootstrap);
    . = 0x7fa;
    BYTE(0x11);
    BYTE(0x33);
    BYTE(0x55);
    BYTE(0x77);
    BYTE(0x55);
    BYTE(0xaa);
    _bootstrap_end = .;
    . = 0x800;
    *(.sysinit);
    _sysinit_end = .;
    . = 0x1000;
    *(.pages);
    _pages_end = .;
    . = 0x5000;
    *(.sysconf);
    *(.presystem);
    *(.system);
    *(.library);
    *(.text);
    *(.data);
    *(.bss);
    *(.rodata);
    *(.rodata.*);
    . = 0xeffc;
    BYTE(0x11);
    BYTE(0x33);
    BYTE(0x55);
    BYTE(0x77);
    _system_end = .;
}

. = ASSERT(_bootstrap_end <= 0x800,"Bootstrap section big!");
. = ASSERT(_sysinit_end <= 0x1000,"Sysinit section big!");
. = ASSERT(_pages_end <= 0x5000,"Pages section big!");
. = ASSERT(_system_end <= 0xf000,"System initialization section big!");
} 
```

最后用 . 创建最终的二进制文件`dd`。

我看到当用`gcc`4.6 和 4.7 编译时，链接器在`bootloader.bin`.

我正在使用`ld`来自`binutils`2.22 的版本，并使用我自己的构建过程的食谱进行烹饪。

我的实际问题是：

**这些编译器版本之间有什么区别`gcc`，它们产生更大的部分或通过 elf 目标文件指示链接器在文件开头添加这些字节`bootloader.bin`？**

**4.6 和/或 4.7是否有任何命令行参数`gcc`会关闭可能产生比`gcc`4.5 更大的部分的功能，或者删除那些说链接器在文件开头添加这些字节的指令`bootloader.bin`？**

编辑 17-08-2012：这些天我很忙，但很快我会更新我所做的测试结果。

对@strnk 和@Dan Aloni 的回答：当我看到这个问题时，我首先要做的是排除无用的部分，但结果是一样的......我认为因为这`bootloader.bin`是一个简单的二进制文件，其中所需部分的链接代码位于链接器指示的正确位置，没有节名，重定位和调试信息和符号......`bootloader.bin`文件不是精灵目标文件。

请考虑实际问题的变化。谢谢你所做的一切......我很快就会回来

编辑 31-08-2012：好的，谢谢你们的帮助。@Dan Aloni 给出的答案并通过`ldscript`@strnk 显示完成

```
/DISCARD/ : {
    *(.eh_frame)
    *(.eh_frame_hdr)
} 
```

在断言之后。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T04:20:29.543

通过使用您提供的标志编译一个简单的 C 文件，在`gcc-4.5`和之间`gcc-4.6`，并使用`objdump -h`它来检查输出，似乎该`.eh_frame`部分是在`gcc-4.6`.

您提供的`ld`脚本不处理该部分，它可能应该处理。在链接之前，您可以使用`strip -R .eh_frame -R .eh_frame_hdr`从目标文件中删除该部分和其他部分。

无论如何，由于两个 gcc 版本的链接器是相同的，因此`objdump -h`在目标文件上会提示导致此问题的差异。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-06T00:21:57.103

> 是否有任何命令行参数会关闭可能产生更大部分的功能

是的：如果你关心大小，你应该用`-Os`. `-O3`显式启用可能导致更大代码大小的优化。由于引导加载程序执行*一次*，使用`-O3`它几乎肯定是错误的。

编辑：

> “装配中的优化是没有意义的……
> 还有这里的其他对象……”

您的*所有*代码都在汇编中吗？如果是这样，优化级别确实没有意义，但是您应该能够简单地比较`readelf -S vga_pm.S.o`使用两种编译器构建的输出，并准确查看*哪些*部分不同。

但是您的某些对象似乎更有可能*没有*`-O3`组装，在这种情况下，和之间的差异`-Os`将非常有意义。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-16T09:44:47.717

GCC 在其二进制输出中添加了一些不需要的调试部分（用于`objdump -h <file>`查看它们），我通常将那些我不想要的部分`/DISCARD/`放在我的 ld 脚本中的规则中以摆脱它们：

```
/DISCARD/ : {
        *(.debug_*)
        *(.note*)
        *(.indent)
        *(.comment)
        *(.stab)
        *(.stabstr)
        *(.eh_frame)
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-16T10:15:38.030

您可能要注意，*您实际上并没有*使用*GCC*。

vga_pm.S，从文件扩展名来看，是包含预处理指令的汇编源代码，所以你需要`cpp`预处理器把它变成预处理（.s）源代码。请注意，GNU 汇编器 ( `as`) 具有所有必要的本地指令，例如文件包含，以使此步骤变得不必要。

将 .s 源“编译”为 .o 目标文件也不需要 GCC，因为这也可以`as`直接使用（这是 binutils 包的一部分）来完成。

然后`ld`用于将目标文件链接到二进制文件中。同样，`ld`它是 binutils 包的一部分。

使用 GCC 作为前端会*混淆*问题，几乎没有好处，而且实际上可能是问题的根源。以防万一，您告诉我们您使用了哪些 GCC 版本，但您没有告诉我们您使用了哪些*binutils*版本...

我建议不要依赖并非绝对必要的工具，以使您的构建过程尽可能简单。在这种情况下，从您的引导加载程序构建步骤中删除 GCC。

# html - 试图在中心对齐 div 中的内容

> ID：11819908
> 
> 赞同：1
> 
> 时间：2012-08-05T20:40:58.630
> 
> 标签：html, css, positioning, markup

这应该是微不足道的，但鉴于我设置标记样式的粒度，我无法将内容置于中心

标记本质上是：

```
<div class = "rectangle" id = "login">
    <form>
     <!-- bunch of labels and corresponding input fields -->
    </form>
</div> 
```

样式表本质上是：

```
.rectangle{ border:1px solid #ccc; width:500px; padding: 10px;}
#login{margin:auto;}
#login form {margin:auto;} 
```

不幸的是，这不会使我的表单的内容居中对齐。它们更靠近包含父元素（div 类矩形）的左侧。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T20:51:12.520

试试这个

**CSS**

```
.rectangle{ 
    border:1px solid #ccc; 
    width:500px; 
    padding: 10px;
    text-align:center;
} 
```

**HTML**

```
<div class = "rectangle" id = "login">
    <form>
        <input type="text" name="txt1" />
        <input type="text" name="txt2" />        
    </form>
</div>​ 
```

[**演示**](http://jsfiddle.net/heera/BzAVp/)。

# javascript - Javascript：从数组中设置 var

> ID：11819912
> 
> 赞同：1
> 
> 时间：2012-08-05T20:41:30.207
> 
> 标签：javascript, arrays, variables

我有很多这样的月份：

```
var months = ["jan", "feb", "mar", "apr", "may", "jun", "jul", "aug", "sep", "oct", "nov", "dec"]; 
```

我想要做的是将月份的名称设为变量并为其设置一个对象，如下所示：

```
for(i=0;i<11;i++){
months[i] = $(".bitem:eq("+i+")");
} 
```

但这只是替换`months[i]`（`if i=0`例如，它将用对象替换“jan”）。我想要做的是使用`months[i]`等于变量名的字符串。我试过`.toString()`这样使用：

```
for(i=0;i<11;i++){
months[i].toString() = $(".bitem:eq("+i+")");
} 
```

但我得到了错误：

```
Error: ReferenceError: invalid assignment left-hand side 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T20:45:24.530

为什么你需要有变量名`jan`，`feb`等等？据我所知，您可以通过使用具有属性的普通旧对象来做任何您想做的事情：

```
var monthNames = ["jan", "feb", "mar", "apr", "may", "jun", "jul", "aug", "sep", "oct", "nov", "dec"];

var months = {};
for(var i = 0; i < monthNames.length; i++) {
    months[monthNames[i]] = $(".bitem:eq("+i+")");
}

// Example usage
var januaryItem = months["jan"];
// or equivalent: months.jan; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T20:51:26.043

不要创建变量，而是创建一个可以将字符串转换为数组索引的对象：

```
var monthIndex = {
  "jan": 0, "feb": 1, "mar": 2, "apr": 3, "may": 4, "jun": 5,
  "jul": 6, "aug": 7, "sep": 8, "oct": 9, "nov": 10, "dec": 11
};
var months = $(".bitem"); 
```

现在给定任何月份名称，您可以从数组中获取相应的元素：

```
var m = 'aug';
var element = months[monthIndex[m]]; 
```

您还可以使用特定的月份名称来获取索引：

```
var element = months[monthIndex.aug]; 
```

# javascript - 如何在 MVC 中初始化模型 | 不同的选择

> ID：11819915
> 
> 赞同：0
> 
> 时间：2012-08-05T20:41:42.223
> 
> 标签：javascript

我所有的模型和支持模块都是命名空间的。目前我像这样初始化它们。我在某种 onload 上调用 initAll()。

MC 代表模型控制器，Su 代表支持。

```
/**
 **  initAll
 */

MC.initAll = function() {

    MC.MATweet.init();
    MC.MABAdder.init();

    MC.MASettings.init();

    MC.MUserTry.init();
    MC.MUserNew.init();
    MC.MUserExist.init();

    Su.UserOut.init();
    Su.Media.init();
} 
```

显然，每个都有它自己的 init() 函数。我计划更新它以使用 hasOwnProperty 来检查 init 属性，如果存在则从那里调用它。这将使这个函数基本上成为一个循环......它检查命名空间。

还有其他方法...初始化模型。这是轻量级应用程序的好方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T21:50:48.810

一种方法是像这样循环所有模型，并在每个模型中检查属性 init。如果它在那里调用它。这使得初始化自动......你只需要在每个模型中定义它。

```
for ( var key in MC ) {
    if( MC.hasOwnProperty( key ) ) {
        if( MC[key].hasOwnProperty( 'init' ) ) {
            MC[key].init();
        }
    }
} 
```

# python - 将库合并到脚本中？

> ID：11819924
> 
> 赞同：1
> 
> 时间：2012-08-05T20:42:51.390
> 
> 标签：python, pyglet

我想将 Pyglet 的声音和窗口功能合并到我的脚本中。有没有办法将它添加到脚本中，这样就不需要安装了？我意识到这将使用大量内存并且需要更长的时间才能启动，但它比为我的目的安装 pyglet 更方便。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T20:54:30.703

也许您可以使用 pytest 库中使用的[相同 hack](https://bitbucket.org/hpk42/pytest/src/8573473debb9/_pytest/genscript.py)，它会生成这样的[脚本](https://github.com/selectel/pyte/blob/develop/runtests.py)。

# php - 当图像是唯一更改的字段时未保存图像

> ID：11819926
> 
> 赞同：1
> 
> 时间：2012-08-05T20:43:07.290
> 
> 标签：php, symfony, doctrine

我在 github 上向 symfony 提交了问题单，但我需要一个解决方法：[https ://github.com/symfony/symfony/issues/5150](https://github.com/symfony/symfony/issues/5150)

我创建了一个带有关联图像的实体，并使用 symfony 文档中描述的生命周期回调来保存它：http: [//symfony.com/doc/current/cookbook/doctrine/file_uploads.html#using-lifecycle-回调](http://symfony.com/doc/current/cookbook/doctrine/file_uploads.html#using-lifecycle-callbacks)

当用户填写表格并点击保存时，一切正常。但是，如果用户填写/编辑的唯一项目是图像，则不会保存表单。我相信这是因为 symfony 没有看到实体的变化，所以它不会费心重新持久化实体，因此永远不会调用 pre/post persist 函数。

我需要一些方法来强制实体持续存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T20:46:40.613

您可以添加更新的日期字段。在文件行的设置器中，将此更新的字段设置为当前日期。现在一切都应该正常了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T22:31:37.603

我假设您的表单中有一个文件上传字段和一个路径字段。如果您更改 setFile 方法以更改文件路径实体，它应该正确保存。例如：

```
public function setFile($file)
{
    if (! empty($file)) {
        $this->photo = 'changed';
    }
    $this->file = $file;
} 
```

# visual-studio - Visual Studio 2012 RC 可能出现断点问题？

> ID：11819927
> 
> 赞同：0
> 
> 时间：2012-08-05T20:43:26.993
> 
> 标签：visual-studio, visual-studio-2012

在使用 Visual Studio 2012 RC 调试一些 C++ 代码时，我注意到在类成员函数和成员变量值上有断点的奇怪行为。

当我在类成员函数上设置断点时，VS 2012 将断点放在函数大括号上。现在，当悬停在函数使用的成员变量上时，该值始终“未初始化”。但是，按 F10 进入下一行（函数中的第一行），成员变量现在更改为正确的值。

这看起来像一个类的成员变量的值直到进入成员函数的第一行才被加载。但这很令人困惑——那么打破大括号的意义何在？（在函数上设置断点时是默认设置。）

*打破类成员函数：*

![支架断裂](../Images/ab0f4161381e7736551a30304e24df7f.png)

据说成员变量`active`是`true`（实际上不是！）

*使用 F10 进入下一行：*

![在此处输入图像描述](../Images/c9da6a8c8734d364734055f5fc3f68c9.png)

现在说成员变量`active`是`false`（这是正确的。）

**我在这里遗漏了什么还是这是 Visual Studio 2012 RC 中的实际错误？**

*编辑：*我找到了我的 Visual Studio 2010 副本并进行了尝试。关于断点的行为是相同的。不同之处在于 IntelliSense 如何处理这种情况。在 VS 2010 中，IntelliSense 在大括号上断开时根本不会弹出工具提示，而在 VS 2012 中始终显示工具提示。我认为 VS 2010 的行为避免混淆要好得多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T21:10:41.087

默认情况下，在 x86 上，C++ 成员函数使用 thiscall 调用约定^((*))，它通过寄存器传递`this`指针`ecx`。但是，该函数可以使用该寄存器进行计算，因此调试器不能`this`在函数执行的整个过程中将其值作为指针。

因此，在未优化的构建中，作为在进入函数体之前执行的函数序言的一部分，`this`指针将“溢出”到堆栈：它被复制到堆栈上的已知偏移量，以便调试器可以可靠地获得它的价值。它是`this`调试器在您监视时使用的指针的副本`this`或成员变量（通过`this`指针隐式访问）。

当您在 的左大括号上放置断点时`{`，断点将放置在函数序言的初始地址处，即在调用函数时将执行的第一条指令处。只有在您跨过这个左大括号之后，函数序言才会执行，并且`this`指针会溢出到堆栈中。

如果您需要通过函数序言进行调试，这将很有用。如果您逐步进行反汇编（调试-> Windows-> 反汇编），那么会发生什么情况会更加明显。

* * *

(*) 在 x64 上，只有一个调用约定，它是一个 fastcall 调用约定。指针最终将`this`通过`rcx`寄存器传递，因为它是函数的“第一个”参数。

在 x86 上，并非所有成员函数都使用 thiscall 调用约定，它只是默认值。与其他函数类型一样，您可以指定函数的调用约定。例如，对使用 stdcall 调用约定的 COM 组件执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T21:48:03.143

通过在花括号上设置断点，您可以让调试器在硬地和硬地之间进行选择。一个难点是编码风格约定，你喜欢 K&R 支撑吗？

```
void foo() {
   // etc..
} 
```

你如何在那个上设置断点？出于安全考虑，调试器会出错，它会在函数入口点设置断点。当您的断点命中时，您可以使用 Debug + Windows + Assembly，您会发现它在函数中的第一条机器代码指令上设置了断点。几乎总是`push ebp`。这实际上与调试器尝试处理模糊断点的正常方式有点不同，它通常向前看，而不是向后看。所以这是非常刻意的。在托管代码的调试器中解决的问题不仅是基于行的，而且还关注列。这并没有流回 C++ 调试器，它仍然是基于行的。

所以检查局部变量不会很好，没有。直到执行设置堆栈帧的函数序言。包括*这个*。

调试器向后看而不是像通常那样向前看的可能原因是您希望单步执行作为局部变量的类对象的构造函数。同样，除了自己倒回堆栈并在构造函数上设置断点之外，您无法设置明确的断点。谁知道在哪里。

功能，而不是错误。显而易见的解决方法是在函数体的第一条语句上设置断点。到那时一切都设置好了，堆栈框架以及局部变量。

# ruby-on-rails - Heroku - 如何更新大小为 38MB 的价目表？

> ID：11819932
> 
> 赞同：0
> 
> 时间：2012-08-05T20:44:14.517
> 
> 标签：ruby-on-rails, ruby, csv, heroku, sql-update

我的客户有一个包含产品的电子商务系统（大约有 6 万个产品项目）。价目表以 ZIP 格式放置在 URL 地址上。

我需要首先下载价目表，解压缩，然后打开 CSV 文件并开始逐行阅读。在他的数据库中更新了 CSV 中的价格（如果 CSV 中的产品价格与他的数据库中的不同，请使用 CSV 中的价格并更新数据库）。

但是，可以在 Heroku 上做到这一点吗？下载将近 40MB 的文件需要一些时间，将数据从 CSV 导入数据库（在 localhost 上导入大约需要 17 分钟 - 但这是将整个 CSV 导入数据库）。

你将如何解决这种情况？我有什么选择？不幸的是，没有办法更改 CSV 文件，所以我必须使用该文件......

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T15:37:34.220

关于heroku 上的文件系统有一个常见的误解。不是它是只读的，而是它是**短暂**的。您可以启动一个进程并开始写入文件系统，但是一旦该进程退出，数据就永远消失了。

因此，您确实可以下载一个 zip 文件然后对其进行处理，但即使您在处理时遇到错误，导致您的程序退出，解压后的数据也会丢失。您可能想考虑解压缩它，创建放在 S3 上的数据块，然后让任意数量的工作人员处理这些数据并使用您自己的数据库将其内部化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T20:47:04.873

这可以通过在工作进程的延迟作业上运行工作来实现。有关更多信息，请参阅：[https](https://devcenter.heroku.com/articles/ps) ://devcenter.heroku.com/articles/ps 。请注意，如果这是您希望在计划的时间间隔内运行的常规任务，您也可以使用调度程序（[https://devcenter.heroku.com/articles/scheduler](https://devcenter.heroku.com/articles/scheduler)）。

# powershell - 将音乐复制到 Ipod

> ID：11819936
> 
> 赞同：1
> 
> 时间：2012-08-05T20:44:51.597
> 
> 标签：powershell, itunes, powershell-2.0, ipod

我想知道是否有办法使用 powershell 将音乐复制到 ipod。

如果需要，我不介意在我的电脑上安装 iTunes。我不想将我的 ipod 与 iTunes 同步，或者将文件添加到 iTunes 库。

我现在复制音乐的方式是，我只需选择包含我想要的音乐的文件夹并将其拖到我的 iTunes 中的 ipod 上。这样它就不会将音乐添加到 iTunes 库中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T13:00:49.180

我设法弄清楚了

```
$IpodName = "type the name of your ipod hear as it apears in itunes"
$SongToCopy = 'c:\tools\test\04.mp3'

#Create a com object to talk to Itunes and List the Librarys
    $iTunes = New-Object -ComObject iTunes.Application
    $LibrarySource = $iTunes.sources

$IpodSource = $LibrarySource.ItemByName($IpodName)

$IpodPlaylists = $IpodSource.Playlists
$IpodPlaylist  = $IpodPlaylists.ItemByName($IpodName)
$IpodTracks    = $IpodPlaylist.Tracks

$IpodTracks.Count

$IpodPlaylist.AddFile($SongToCopy)

$IpodTracks.Count 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:50:46.353

我相信 hal rottenberg 在这里做了类似的事情。 [http://halr9000.com/article/480](http://halr9000.com/article/480)

# javascript - 仅在新页面完全加载后，如何在 Javascript 中重新加载页面

> ID：11819937
> 
> 赞同：0
> 
> 时间：2012-08-05T20:44:54.733
> 
> 标签：javascript, jquery, html, reload

重新加载时，我看到一个闪烁，因为元素再次被填充。如何通过让浏览器仅在完全重新加载新页面后才显示新页面（这样用户不会注意到它正在重新加载）来防止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T21:20:12.280

从听起来你需要使用 ajax、post 或 get 方法来重新加载站点的某些部分，而不是整个页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T21:43:36.353

JQuery 使用的`.ready()`方法，保证在 DOM 准备好后执行。因此，首先将要重新加载的内容设置为不可见 ( `.hide()`)，然后，例如：

```
$("div").ready(function()
{
    $(this).show();
} 
```

# c# - 使用 Caliburn.Micro 在 Application bar 和 Conductor 之间进行交互的最佳方式

> ID：11819950
> 
> 赞同：3
> 
> 时间：2012-08-05T20:46:50.353
> 
> 标签：c#, windows-phone-7, mvvm, caliburn.micro

我一直在尝试使用应用程序栏（`AppBarButton`当然还有 caliburn 项目），它预计会根据活动的枢轴项目更改其按钮集及其操作。

这些项目通过屏幕视图模型表示，它们的父`Conductor`视图包含应用栏。

我真的坚持以上，基本上我无法弄清楚两件事：

1）我如何正确访问应用程序栏并在`LoadedPivotItem`触发时直接从我的视图模型绑定其按钮消息？当我添加一些按钮来指定它们的 Message 属性`Message = "DoSomething"`时，单击时没有任何反应。当我在 XAML 中执行此操作时，一切都很好。`OnInitialize`或 .ctor 也可以正常工作，但我实际上需要知道选择了哪个枢轴项来注入正确的按钮！

2）当按钮动作触发时，我如何正确地将它传递给子屏幕，以便它调用自己的方法？事件聚合器是唯一正确的方法吗？

如果可能，请给我一些代码示例 - 我在网上找不到任何东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T20:22:14.067

我自己解决了这个问题。

基本上我已经尝试了几个第三方应用程序栏并丢弃了所有这些。虽然如果有兴趣可以研究一下：

*   [http://bindableapplicationb.codeplex.com/](http://bindableapplicationb.codeplex.com/)
*   [http://shwp.codeplex.com/](http://shwp.codeplex.com/)

他们都没有为我工作，但只是因为我的项目中的caliburn。在正常情况下，它们会非常适合，因为第一个允许定义 ButtonsSource，第二个允许在 XAML 中为每个枢轴/全景项目设置自定义按钮！哇！

我使用了这个链接： http: [//www.markermetro.com/2010/07/technical/windows-phone-7-creating-that-elusive-reusable-application-bar/](http://www.markermetro.com/2010/07/technical/windows-phone-7-creating-that-elusive-reusable-application-bar/)它回答了我的第一个问题。

至于第二个问题，我目前只是检查子视图模型是否处于活动状态，然后从`Conductor`. 我知道有点脏，但在这一点上总比没有好。

# java - 创建一个数组列表

> ID：11819951
> 
> 赞同：0
> 
> 时间：2012-08-05T20:46:57.777
> 
> 标签：java, arraylist

我看到一个arry列表设置如下

```
private ArrayList<Student> students; //instance variable

public CollegeCommunity()//constructor

{
    students = new ArrayList<Student>();
} 
```

如下

```
 ArrayList exampleArray = new ArrayList(); 
```

我理解为什么一个有一个实例变量/构造函数而另一个只是简单地声明但我不确定为什么第一个包含`<Student>`而另一个没有这两者有`<...>` 什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T20:52:13.207

不同之处在于称为泛型的语言功能，在[此处](http://docs.oracle.com/javase/tutorial/java/generics/)的 Java 教程跟踪中对此进行了说明。

`exampleArray`使用泛型类的[*原始类型*](http://docs.oracle.com/javase/tutorial/java/generics/rawTypes.html)声明`ArrayList`...

> *原始类型*是没有任何类型参数的泛型类或接口的名称。

原始类型*没有*泛型类型信息，因此与引入泛型之前类的使用相同。

另一方面，`students`使用泛型[*参数化类型*](http://docs.oracle.com/javase/tutorial/java/generics/types.html)。

> *泛型类型*是通过类型参数化的泛型类或接口。

[泛型很有用](http://docs.oracle.com/javase/tutorial/java/generics/why.html)，因为它们允许编译器拥有更多类型信息，从而通过允许它有效地推断类型来简化编程，这用于强制**强类型**化和**消除强制转换**。

原始`ArrayList`几乎**等同**于`ArrayList<Object>`. 不同之处在*Effective Java*中突出显示。

> 原始类型`List`和参数化类型之间有什么区别`List<Object>`？
> 
> 粗略地说，前者选择退出泛型类型检查，而后者明确告诉编译器它能够保存任何类型的对象。虽然您可以将 a 传递`List<String>`给 type 的参数`List`，但不能将它传递给 type 的参数`List<Object>`。泛型有子类型规则，`List<String>`是原始类型的子类型`List`，但不是参数化类型的子类型`List<Object>`。
> 
> 因此，如果您使用像 List 这样的原始类型，则会失去类型安全性，但如果使用像`List<Object>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T20:55:01.303

第一个 ArrayList 声明定义了泛型类型，而 exampleArray 没有。建议尽可能使用泛型来避免强制转换：

例如

```
ArrayList<Student> students = ...;
Student student = students.get(0); 
```

相对：

```
ArrayList exampleArray = ...;
Example example = (Example)exampleArray.get(0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T20:57:22.207

`<Students>`下一个的原因`ArrayList`是因为您需要指定将持有`data`的类型。`ArrayList`在这种情况下，这个人告诉 java 他想要一个`ArrayList`包含类的数据类型`Students`

不这样做是行不通的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T20:59:24.920

区别只是对编译器的提示。该声明`new ArrayList<Student>()` 强制执行这样一个事实，即您将仅将`Student`类的实例存储在指定的集合中。这允许 Java 保留`strong type-safety`泛型。

在运行时，由于 Java 具有[类型擦除](http://en.wikipedia.org/wiki/Type_erasure)功能，因此不会发生任何变化，**但是**这种强约束将对您有所帮助：每当您尝试使用与您用来声明它的时间不同的时间的集合时，编译器都会引发错误。它被称为[*参数多态性*](http://en.wikipedia.org/wiki/Parametric_polymorphism)。[](http://en.wikipedia.org/wiki/Parametric_polymorphism)

 *相反，原始声明`new ArrayList()`实例化了一个列表，在该列表上没有假设您要在其中存储的对象的类型：这意味着可以存储所有内容，但是在检索对象时需要回退对象。此外，您不会有任何类型安全性，因为在编译时编译器将无法检查您将尝试在集合中插入的内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-05T20:49:50.403

`students`正在使用所谓的泛型。泛型约束可以传递给`ArrayList`. `exampleArray`没有指定类型。*

# python - 如何在 py-gtk 窗口中显示连续数据？

> ID：11819952
> 
> 赞同：1
> 
> 时间：2012-08-05T20:47:02.440
> 
> 标签：python, time, pygtk

我正在尝试使用 py-gtk 构建一个简单的秒表应用程序。这是我的秒表窗口中切换按钮的回调函数。

```
def start(self,widget):
    if widget.get_active():         
        widget.set_label('Stop')
    else: 
        self.entry.set_text(str(time.time() - s))   
        widget.set_label('Start') 
```

除了时间不会连续显示在条目小部件中之外，它工作得很好。如果我在 'If' 条件中添加一个无限 while 循环，例如，

```
while 1:
    self.entry.set_text(str(time.time() - s)) 
```

窗口变得无响应。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T20:53:05.573

使用[gobject.timeout_add](http://www.pygtk.org/pygtk2reference/gobject-functions.html#function-gobject--timeout-add)：

```
gobject.timeout_add(500, self.update) 
```

`self.update()`每 500 毫秒调用一次 gtk 。

在`update`方法中检查秒表是否处于活动状态并调用

```
self.entry.set_text(str(time.time() - s)) 
```

有必要的。

* * *

这是一个相当简短的示例，它使用以下方法绘制进度条`gobject.timeout_add`：

```
import pygtk
pygtk.require('2.0')
import gtk
import gobject
import time

class ProgressBar(object):
    def __init__(self):
        self.val = 0
        self.scale = gtk.HScale()
        self.scale.set_range(0, 100)
        self.scale.set_update_policy(gtk.UPDATE_CONTINUOUS)
        self.scale.set_value(self.val)
        gobject.timeout_add(100, self.timeout)
    def timeout(self):
        self.val += 1
        # time.sleep(1)
        self.scale.set_value(self.val)
        return True

def demo_timeout_add():
    # http://faq.pygtk.org/index.py?req=show&file=faq23.020.htp
    # http://stackoverflow.com/a/497313/190597
    win = gtk.Window()
    win.set_default_size(300, 50)
    win.connect("destroy", gtk.main_quit)
    bar = ProgressBar()
    win.add(bar.scale)
    win.show_all()
    gtk.main()

demo_timeout_add() 
```

# c# - 确保用户只能保存在文件夹内

> ID：11819954
> 
> 赞同：2
> 
> 时间：2012-08-05T20:47:15.777
> 
> 标签：c#, .net, winforms

我有一个应用程序，允许用户从填充了一些数据的自定义模板中导出文件，现在他们可以选择保存到的位置。如果文件已经存在，它将根据他们的偏好覆盖它或生成一个新名称。

它将导出到的任何文件夹/文件名以及是否会覆盖该文件（如果存在或不存在）都存储在用户创建和保存的配置文件中。然后他所做的就是运行这个文件，应用程序将开始收集数据并导出这些文件。

所以危险是我可以向你发送一个保存到 C 驱动器的配置文件，你需要做的就是打开它并运行它，如果它们碰巧有相同的文件，它可能会覆盖你在 C 驱动器上的文件姓名。我正在考虑做的是让用户选择一个保存文件的文件夹，并将此首选项存储在配置文件中，但将其保存为用户首选项，因此如果我给您一个配置文件，该文件将导出到任何您选择导出到的文件夹。不过，配置文件将确定文件名。

很容易迫使他们只输入有效的文件字符作为文件名（这将排除该`\`字符），但我想允许他们在配置文件中输入子文件夹和文件名，而不是只输入文件名，这样他们可以更好地组织他们导出的文件。但如果我这样做，他们可以输入类似的`..\..\something_important.exe`内容，这将保存在用户为其导出定义的文件夹之外。您如何确保他们可以进入类似`\sub\subsub\myfile.txt`但不喜欢的路径`..\..\myfile.txt`。`..\`确保路径中没有字符串就足够了吗？有没有其他类似`..\`的代码可以让他们在文件夹树上导航？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T21:18:23.683

我建议您使用[FolderBrowserDialog](http://msdn.microsoft.com/en-us/library/system.windows.forms.folderbrowserdialog)来允许用户选择一个文件夹。这是用户可能有使用经验的常见对话框。如果您有关于用户可以选择哪个文件夹的附加规则，您可以在用户选择文件夹后执行此验证，如果说用户选择了根文件夹，则拒绝它。

![文件夹浏览器对话框](../Images/b7b29036329a5ef5dddd8901f5d4ccd6.png)

（图片取自[C# 中的 FolderBrowserDialog](http://www.c-sharpcorner.com/uploadfile/mahesh/folderbrowserdialog-in-C-Sharp/)。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T21:04:26.053

我真的不明白为什么这个应用程序如此复杂，但我始终相信 KISS 方法（保持简单和愚蠢）。我也相信 UI（用户界面）应该始终引导用户做对他有益的事情，而不是因为尝试不应该做的事情而惩罚他。

我建议你创建一个在想要的文件夹中打开的表单，并有一个按钮来创建新文件夹和一个像 SaveFileDialog 这样的文本框。不同之处在于它不会让用户进入其他文件夹。在这种情况下，用户只能将文件名写入文本框中，并且您验证文本是否为有效名称。用户无需在文本中指定路径，因为 UI 将为他提供更简单的方法。

这种简单的形式可以在几分钟内编程，它会像石头一样坚固。希望能帮助到你！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T21:23:40.500

我认为您可以`Path.GetFullPath`用来验证最终路径

```
string myRootPath = @"c:\root\subdir\";
var newPath = Path.Combine(myRootPath, @"..\..\windows\aaa"); //user enters ..\..\windows\aaa
var usersPath = Path.GetFullPath(newPath);

if (!usersPath.StartsWith(myRootPath))
    MessageBox.Show("ALERT"); 
```

# c# - 单击“返回”按钮时，将数据返回到前一个窗口

> ID：11819956
> 
> 赞同：-1
> 
> 时间：2012-08-05T20:47:33.370
> 
> 标签：c#, winforms, c#-4.0

我有一个用 C# 编码的应用程序，在第一个窗口中，我在文本框、组合框、单选按钮和复选框中输入了一些详细信息。当我单击下一步按钮时，它会转到第二个窗口，为此，我使用：

```
form2 f2 = new form2();
f2.show();
this.hide(); 
```

在第二个窗口中，我有一个后退按钮，单击该按钮后会转到第一个窗口。为此，我使用以下代码：

```
form1 f1 = new form1();
f1.show();
this.hide(); 
```

但问题是，当我进入那个窗口时，我丢失了所有输入的数据。有没有一种简单的方法可以将这些数据重新输入到相关控件中而无需再次设置它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T21:25:44.180

当您想显示第二种形式时，请考虑第一种形式

```
 public partial class Form1 : Form
    {
 Form2 frm;
    public Form1()
    {
        InitializeComponent();
        frm = new Form2(this);
    }

    private void button1_Click(object sender, EventArgs e)
    {

        this.Hide();
        frm.Show();
    } 
```

现在是第二种形式

```
public partial class Form2 : Form
    {
        Form1 frm;
        public Form2(Form1 fr)
        {
            InitializeComponent();
            frm = fr;
        }

        private void button1_Click(object sender, EventArgs e)
        {
            this.Hide();
            frm.Show();

        }

       }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T20:51:16.127

问题是您正在创建 Form1 的新实例：

```
Form1 f1 = new Form1();
f1.Show();
this.Hide(); 
```

您需要以某种方式保留引用（例如将 form1 作为参数传递给 Form2 的构造函数），然后从 Form2 调用 -

```
 public class Form2 {
       private Form1 nextWindow=null;
       public Form2(Form1 form1) {
            nextWindow=form1;
       }
 } 
```

在 Form2 的代码中的某处......

```
 nextWindow.Show();
 this.Hide(); //Form2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T20:51:54.927

当您这样做时`form1 f1 = new form1();`，您正在创建 的*新*实例`form1`，并且将显示*新*实例，而不是现有实例。

您`form2`应该引发一个`form1`订阅事件，并在单击后退按钮时触发该事件。上的事件处理程序`form1`将调用`this.Show()`.

# ruby-on-rails - 在 Rails 3.2.6 中使用 Paperclip-FFMPEG 从视频中获取元数据

> ID：11819957
> 
> 赞同：3
> 
> 时间：2012-08-05T20:47:35.290
> 
> 标签：ruby-on-rails, ruby, ffmpeg, paperclip, metadata

虽然仍然是 Rails 新手，但我已经设法让[Paperclip-FFMPEG](https://github.com/owahab/paperclip-ffmpeg)工作。但是，我想从上传的视频中提取一些元数据，特别是视频的长度。自述文件表明这是可能的，但我很难理解我需要做什么：

```
You may optionally add <attachment>_meta to your model and paperclip-ffmpeg will add information about the processed video. 
```

假设我在模型中拥有的 Paperclip 属性称为“源文件”。如果我正确阅读了这些说明，这是否意味着我需要添加一个名为 sourcefile_meta 的额外属性？我是否需要添加生成迁移文件才能将此额外列添加到模型的表中？如何访问我视图中的视频长度？应该是这样的：

```
<p>Length: <%= mymodel.sourcefile_meta.length %></p> 
```

任何指针都会是最有用的，因为我碰到了一点砖墙！谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-16T17:34:01.823

您应该能够像您提到的那样将该字段添加到您的表中运行迁移，并且 ffmpeg-paperclip 应该自动填充它，就像它使用 *_name 字段一样。

# highcharts - 以 Stackoverflow 风格制作主细节 Highchart

> ID：11819959
> 
> 赞同：3
> 
> 时间：2012-08-05T20:48:11.023
> 
> 标签：highcharts

我遇到了 Highcharts 演示库，其中 Highcharts 的主详细信息图表[看起来](http://www.highcharts.com/demo/dynamic-master-detail/gray)与 Stackoverflow 中提供的用户信誉图非常相似。有一个区别，Stackoverflow 中的一个以竖线的形式显示详细图表，而 Highcharts 演示库中的一个是连续图的形式。有什么选项可以将详细地图更改为竖条类型吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T04:59:05.900

是的，很有可能。我建议使用 HighStock 代替它作为对时间序列类型数据具有更好功能的图表。

这是您在 highstock 中的操作方法，只需将导航器的系列类型设置为“列”

```
 navigator: {
        series: {
            data: ADBE,
            type : 'column'
        }
    }, 
```

[http://jsfiddle.net/bLqL3/1/](http://jsfiddle.net/bLqL3/1/)
PS：我只将其中一个折线图（下）更改为列，而将另一个作为练习；）

上面说的同样在highcharts中也可以做到，master detail chart有多个图表的组合，master和highstock中的navigator一样，detail是主图，所以你可以将主人的系列类型设置为“列”，你就完成了，摆弄@ [http://jsfiddle.net/RAXa3/1/](http://jsfiddle.net/RAXa3/1/)

```
 series: [{
                type: 'column',
                name: 'USD to EUR',
                pointInterval: 24 * 3600 * 1000,
                pointStart: Date.UTC(2006, 0, 01),
                data: data
            }], 
```

您可以探索声誉图表脚本来挖掘您的解决方案

```
new Highcharts.Chart({
chart: {
    renderTo: "master-graph",
    animation: !1,
    reflow: !1,
    borderWidth: 0,
    marginLeft: 62,
    backgroundColor: null,
    zoomType: "x",
    events: {
        selection: function(a){
            varb=a.xAxis[
                0
            ],
            a=b.min,
            b=b.max,
            c=this.xAxis[
                0
            ];c.removePlotBand("selected-area");c.addPlotBand({
                id: "selected-area",
                from: a,
                to: b,
                color: "rgba(0, 70, 200, 0.2)"
            });e(this);return!1
        }
    }
},
series: [
    {
        data: i,
        type: "column",
        color: "green"
    }
],
plotOptions: {
    series: {
        animation: !1,
        lineWidth: 1,
        marker: {
            enabled: !1
        },
        shadow: !1,
        states: {
            hover: {
                lineWidth: 1
            }
        },
        enableMouseTracking: !1
    },
    column: {
        borderWidth: 0,
        pointPadding: 0,
        groupPadding: 0
    }
},
xAxis: {
    type: "datetime",
    min: a,
    max: p,
    maxZoom: 2592E6,
    plotBands: [
        {
            id: "selected-area",
            from: h,
            to: p,
            color: "rgba(0, 70, 200, 0.2)"
        }
    ],
    title: {
        text: null
    },
    labels: {
        formatter: function(){
            returnHighcharts.dateFormat(7776E6<p-a?"%b '%y": "%b %e",
            this.value,
            !1)
        }
    },
    lineWidth: 0
},
yAxis: {
    gridLineWidth: 0,
    labels: {
        enabled: !1
    },
    title: {
        text: null
    },
    plotLines: b(),
    min: j,
    max: m,
    showFirstLabel: !1,
    endOnTick: !1,
    startOnTick: !1
},
title: {
    text: null
},
legend: {
    enabled: !1
},
tooltip: {
    formatter: function(){
        return!1
    }
},
credits: {
    enabled: !1
},
exporting: {
    enabled: !1
}
}); 
```

和

```
new Highcharts.Chart({
chart: {
    renderTo: "detail-graph",
    animation: !1,
    defaultSeriesType: "column"
},
series: [
    {
        name: "rep",
        data: g,
        color: "green"
    }
],
plotOptions: {
    series: {
        animation: !1,
        cursor: "pointer",
        allowPointSelect: !0,
        shadow: !1,
        stickyTracking: !0,
        states: {
            hover: {
                enabled: !0,
                brightness: 0.5
            }
        }
    },
    column: {
        pointPadding: 0.03,
        groupPadding: 0,
        borderWidth: 0,
        events: {
            click: c
        }
    }
},
xAxis: {
    type: "datetime",
    labels: {
        rotation: 0,
        formatter: function(){
            returnHighcharts.dateFormat("%b %e",
            this.value,
            !1)
        }
    },
    lineWidth: 0,
    min: f,
    max: d,
    startOnTick: !0,
    endOnTick: !0
},
yAxis: {
    gridLineWidth: 0,
    plotLines: b(),
    min: e,
    max: h,
    title: {
        text: "reputation per day"
    },
    startOnTick: !1,
    endOnTick: !1
},
tooltip: {
    formatter: function(){
        return'<spanstyle="font-size: 10px;">'+Highcharts.dateFormat("%A, %B %e, %Y",
        this.point.x,
        !1)+'</span><br/><spanstyle="color:'+this.series.color+'">'+this.series.name+"</span>: <b>"+this.point.realRep+"</b>"
    },
    style: {
        lineHeight: "200%",
        padding: 10
    }
},
title: {
    text: null
},
legend: {
    enabled: !1
},
credits: {
    enabled: !1
}
}); 
```

# ios - 自定义 UIAlertView 没有委托回调？

> ID：11819964
> 
> 赞同：0
> 
> 时间：2012-08-05T20:48:37.243
> 
> 标签：ios, callback, indexing, custom-controls, uialertview

我最近刚刚实现：[https ://github.com/gpambrozio/BlockAlertsAnd-ActionSheets](https://github.com/gpambrozio/BlockAlertsAnd-ActionSheets)

我已将所有必要的文件导入到我的应用程序中并且编译良好。现在的问题是，我该如何处理逻辑变化？

所以在使用 Apple 的 UIAlertView 之前，我做了这样的事情：

```
UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Which Key?" message:nil delegate:self cancelButtonTitle:nil otherButtonTitles:nil];
            for (NSMutableDictionary *dict in myArray) {
                [alertView addButtonWithTitle:[dict objectForKey:@"Key"]];
            }
 [alertView show];
 [alertView release]; 
```

然后在 alertview 的回调中我会这样做：

```
- (void)alertView:(UIAlertView *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
    [[Singleton sharedSingleton] setKey:buttonIndex];
} 
```

现在`BlockAlertView`没有回调哪个按钮被按下了，他们如何处理按钮按下是把你想要执行的代码放在我下面显示的块中。无论如何，这就是类似的 BlockAlertView 的外观：

```
BlockAlertView *alertView = [BlockAlertView alertWithTitle:@"Which Key?" message:nil];
            for (NSMutableDictionary *dict in myArray) {
                [alertView addButtonWithTitle:[dict objectForKey:@"Key"] block:^{
                    //Not sure what to do here
                }];
            }
[alertView show]; 
```

现在这是我不知道该怎么做的事情，在那个块中，我如何使用 Apple 的原生 UIAlertView 实现我之前所做的事情？我无法访问按钮索引，也无法访问按钮的名称（因为我需要索引，所以无论如何这对我的情况有帮助）

无论如何，我应该如何继续使用 Apple 的原生 UIAlertView 但使用 BlockAlertView 的逻辑？

谢谢！

**Edit1 @Christian Pappenberger：**

这是 BlockAlertView 的 .h，除非我错了，否则我认为没有可以添加的协议。这里是：

```
@interface BlockAlertView : NSObject {
@protected
    UIView *_view;
    NSMutableArray *_blocks;
    CGFloat _height;
}

+ (BlockAlertView *)alertWithTitle:(NSString *)title message:(NSString *)message;

- (id)initWithTitle:(NSString *)title message:(NSString *)message;

- (void)setDestructiveButtonWithTitle:(NSString *)title block:(void (^)())block;
- (void)setCancelButtonWithTitle:(NSString *)title block:(void (^)())block;
- (void)addButtonWithTitle:(NSString *)title block:(void (^)())block;

- (void)show;
- (void)dismissWithClickedButtonIndex:(NSInteger)buttonIndex animated:(BOOL)animated;

@property (nonatomic, retain) UIImage *backgroundImage;
@property (nonatomic, readonly) UIView *view;
@property (nonatomic, readwrite) BOOL vignetteBackground;

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T21:05:58.377

A **block** is a portion of code that will be executed once it is triggered.

```
[alertView addButtonWithTitle:[dict objectForKey:@"Key"] block:^{
                    //Not sure what to do here
                }]; 
```

The code above adds a button to the BlockAlertView and once it is pressed, the code that's in the **block** it's what is going to be executed. Here's an example:

```
...

[alertView addButtonWithTitle:@"First Button" block:^{
                    NSLog(@"First Button Pressed");
                }];

[alertView addButtonWithTitle:@"Second Button" block:^{
                    NSLog(@"Second Button Pressed");
                }];
...

[alertView show]; 
```

Once the code is executed and the alertView is shown, two buttons will be present in the alertView, with titles "First Button" and "Second Button". When you click each of the buttons, what will happen is that the code in the block will be executed. The console will output "First Button Pressed" or "Second Button Pressed" depending on the button pressed.

Now that you know how this type of alertViews work I'll explain what you need to do in your case.

As you point out you wont get the `buttonIndex`, but you will know which button triggered the block.

So if you need to now the `buttonIndex` I would add an `int buttonIndex` and increment it each time as in the code below:

```
BlockAlertView *alertView = [BlockAlertView alertWithTitle:@"Which Key?" message:nil];

    int buttonIndex = 0; // HERE

    for (NSMutableDictionary *dict in myArray) {
       [alertView addButtonWithTitle:[dict objectForKey:@"Key"] block:^{
                [[Singleton sharedSingleton] setKey:buttonIndex]; // HERE
           }];

    buttonIndex++; // HERE
                    }

        [alertView show]; 
```

If you need further explanation of something else feel free to ask.

**EDIT** Added explanation

The `block` paradigm differs with the delegate paradigm. With the `delegate` paradigm when the button is pressed it will call the delegate method (`clickedButtonAtIndex:`) in the `UIAlerViewDelegate` case. When a block gets executed, each separate block is triggered.

Here's the key:

When you use the **block approach** each button owns the code it will execute once its triggered. In the **delegate approach** when buttons are pressed they will call a common method to be executed.

So in an example:

Goal: Output to the console different words depending on the button pressed.

**Delegate approach:**

```
UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Which Key?" message:nil delegate:self cancelButtonTitle:nil otherButtonTitles:nil];

[alertView addButtonWithTitle:"@Button 1"];
[alertView addButtonWithTitle:"@Button 2"];
[alertView addButtonWithTitle:"@Button 3"];

[alertView show];

- (void)alertView:(UIAlertView *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
    if(buttonIndex == 0)
       NSLog(@"Dog");
    else if (buttonIndex == 1)
       NSLog(@"Cat");
    else if (buttonIndex == 2)
       NSLog(@"Shark");
} 
```

As you can see, once the button is pressed, the delegate method is called and there is when you decide depending on the `buttonIndex` what to output.

**Block approach:**

```
BlockAlertView *alertView = [BlockAlertView alertWithTitle:@"Which Key?" message:nil];

[alertView addButtonWithTitle:@"Button 1" block:^{
                    NSLog(@"Dog");
                }];
[alertView addButtonWithTitle:@"Button 2" block:^{
                    NSLog(@"Cat");
                }];          
[alertView addButtonWithTitle:@"Button 3" block:^{
                    NSLog(@"Shark");
                }];

[alertView show]; 
```

In this case no delegate method is called, and the execution code is inside each button! So you don't need to "check for specific button title strings and do code based upon that". You need to include the code that will be executed in each button.

I dont know if i'm clear, if you need further explanation feel free to ask.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T20:53:28.433

你检查是否有协议实现者？

# orchardcms - Orchard CMS 模块开发工作流程

> ID：11819970
> 
> 赞同：3
> 
> 时间：2012-08-05T20:50:23.600
> 
> 标签：orchardcms

如何强制 Orchard 重新运行 Migrations.Create 方法来重新创建模块的数据？我见过的所有教程都使用 Migrations.UpdateFrom 方法让 Orchard 识别模块数据更改，但这意味着我在开发期间每次进行更改时都必须创建一个新方法。这些方法对实际版本更新有意义，但不适用于初始开发。

我试过禁用和重新启用模块，没有骰子。我也尝试过卸载并重新安装模块，但运行卸载命令会从我的计算机中永久删除模块，绕过回收站。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T23:05:29.373

我对你的问题有点困惑，但我会尽力回答

迁移更新数据库和数据库中的数据。如果您想更改在仪表板中看到的视图，则无需重新运行迁移。

但是，如果您想更改模型和数据，则需要运行更多迁移或重置数据库并运行创建迁移。

当我重建一个我正在处理的模块时，它将运行任何未完成的迁移，而不必在我的本地版本上禁用/启用该模块，

也就是说如果当前的migration版本是1，并且有一个UpdateFrom1方法，在migration中，这个会在项目构建的时候运行。

您可以在下表 Orchard_Framework_DataMigrationRecord 中查看当前版本号

如果要强制重新运行迁移，可以重置数据库中 table 的值。或者，您可以备份数据库，并在运行整个迁移套件之前进行恢复。

在开发过程中，我使用短迁移，每次需要添加数据时都创建一个方法，我尽量保持这些小迁移，以便在开发过程中轻松识别任何问题。

然后在完成模块之前，将迁移合并为 2 或 3 个逻辑代码块

这是自定义类型的迁移

```
public int Create()
        {
            // Define the project type 
            ContentDefinitionManager.AlterTypeDefinition("Project", cfg => cfg
                .WithSetting("Stereotype", "Content")
                .CommomPart()
                .AutoroutePart("our-work")
                .BodyPart()
                .WithPart("TitlePart")
                .WithPart("PublishLaterPart")
                .WithPart("MenuPart", builder => builder
                    .WithSetting("MenuPart.OnMenu", "true")
                    .WithSetting("MenuPart.CurrentMenu", "Project Menu"))
                .WithPart("Project")
                .Creatable()
                .Draftable());

            return 1;

        }

        public int UpdateFrom1()
        {
            // Define project part - having a part with the same name will create fields in the project type
            ContentDefinitionManager.AlterPartDefinition("Project", builder => builder
               .MediaPickerField("MainImage")
               .MediaPickerField("MediumImage")
               .MediaPickerField("SmallImage")
               .MediaPickerField("Logo")
               .TextField("ShortDescription", Flavour.TextArea)
               .TextField("Features", Flavour.Markdown)
               .TextField("ClientTitle", Flavour.DefaultFlavour)
               .TextField("ClientName", Flavour.DefaultFlavour)
               .TextField("ClientQuote", Flavour.Textarea)
               .BooleanField("MainProjectOnHomePage", false)
               .Attachable());

            return 2;
        } 
```

我添加了一些扩展方法以使其不那么冗长。

他们来了

```
 public static class MigrationExtentionHelpers
    {
        // part definitions 

        public static ContentPartDefinitionBuilder MediaPickerField(this ContentPartDefinitionBuilder builder, 
                                                                    string name, bool required = true, string hint = "")
        {
            var displayName = SplitCamel(name);

            // default implementation of Media picker field - create overloads for more options
            return  builder.WithField(name, fieldBuilder => fieldBuilder
                        .OfType("MediaPickerField")
                        .WithDisplayName(displayName)
                        .WithSetting("MediaPickerFieldSettings.Required", required.ToString(CultureInfo.InvariantCulture))
                        .WithSetting("MediaPickerFieldSettings.AllowedExtensions", "jpg png gif")
                        .WithSetting("MediaPickerFieldSettings.Hint", hint));

        }

        public static ContentPartDefinitionBuilder TextField(this ContentPartDefinitionBuilder builder, 
                                                             string name, Flavour flavor, bool required = true, string hint = "")
        {
            var strFlavor = SplitCamel(flavor.ToString());

            // default implementation of Media picker field - create overloads for more options
            return builder.WithField(name, fieldBuilder => fieldBuilder
                        .OfType("TextField")
                        .WithSetting("TextFieldSettings.Required", required.ToString(CultureInfo.InvariantCulture))
                        .WithSetting("TextFieldSettings.Flavor", strFlavor)
                        .WithSetting("TextFieldSettings.Hint", hint));

        }

        public static ContentPartDefinitionBuilder BooleanField(this ContentPartDefinitionBuilder builder,
                                                                string name, bool defalut, string hint = "")
        {
            // default implementation of Media picker field - create overloads for more options
            return builder.WithField(name, fieldBuilder => fieldBuilder
                        .OfType("BooleanField")
                        .WithSetting("BooleanFieldSettings.Hint", hint)
                        .WithSetting("BooleanFieldSettings.DefaultValue", defalut.ToString(CultureInfo.InvariantCulture)));

        }

        // type definitions 

        public static ContentTypeDefinitionBuilder AutoroutePart(this ContentTypeDefinitionBuilder builder, string pathPrefix = "")
        {
            var pattern = string.Format("[{{Name:'{0}/Title', Pattern: '{0}/{{Content.Slug}}', Description: 'my-page'}}]", pathPrefix);

            return builder.WithPart("AutoroutePart", partBuilder => partBuilder
                        .WithSetting("AutorouteSettings.PatternDefinitions", pattern)); 
        }

        public static ContentTypeDefinitionBuilder BodyPart(this ContentTypeDefinitionBuilder builder, 
            Flavour defaultFlavour = Flavour.Markdown)
        {
            return builder.WithPart("BodyPart", partBuilder => partBuilder
                        .WithSetting("BodyTypePartSettings.Flavor", defaultFlavour.ToString()));            
        }

        public static ContentTypeDefinitionBuilder CommomPart(this ContentTypeDefinitionBuilder builder)
        {
            return builder.WithPart("CommonPart")
                        .WithSetting("OwnerEditorSettings.ShowOwnerEditor", false.ToString(CultureInfo.InvariantCulture).ToLower());

        }

        private static string SplitCamel(string enumString)
        {

            StringBuilder sb = new StringBuilder();

            char last = char.MinValue;
            foreach (char c in enumString)
            {
                if (char.IsLower(last) && char.IsUpper(c))
                {
                    sb.Append(' ');
                    sb.Append(c.ToString(CultureInfo.InvariantCulture).ToLower());
                }
                else
                {
                    sb.Append(c);
                }
                last = c;
            }
            return sb.ToString();

        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:43:36.120

我知道基本上没有办法运行两次迁移，除非你从以前创建的备份中恢复数据库或直接调整它。对我来说这不是问题，因为在我团队的开发过程中，我们使用本地数据库实例，然后将所有迁移合并到初始迁移并部署到测试/登台环境。

# c++ - C++ 内存编辑 - 写入当前程序

> ID：11819972
> 
> 赞同：-3
> 
> 时间：2012-08-05T20:50:56.780
> 
> 标签：c++, memory, assembly

我的代码是-

```
BYTE newValue[] = {0x90, 0x90, 0x90, 0x90};
*(char *)0x004C40DB = &newValue; 
```

我试图将其设置`004C40DB`为`nop`.

在 Visual C++ 2010 中，我得到 -

> ## 1>------构建开始：项目：文件，配置：发布Win32
> 
> 1> file.cpp 1>file.cpp(138): 错误 C2440: '=' : 无法从 'BYTE (*)[4]' 转换为 'char'
> 
> 1> 没有可以进行这种转换的上下文
> 
> 1>file.cpp(142): 错误 C2440: '=' : 无法从 'BYTE (*)[4]' 转换为 'char'
> 
> 1> 没有可以进行这种转换的上下文
> 
> ========== 构建：0 成功，1 失败，0 最新，0 跳过 ==========

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T21:16:42.563

首先，为了你自己，使用 C++ 风格的强制转换。

其次，如果你想写一个`0x90`，为什么你有一个包含四个的数组？一个就够了：

```
*reinterpret_cast<char *>(0x004C40DB) = 0x90; 
```

但是很可能您需要[`WriteProcessMemory`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681674%28v=vs.85%29.aspx)按照另一个问题中的说明使用，并且您需要首先使用[`VirtualProtect`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366898%28v=vs.85%29.aspx).

最后，如果确实需要写入多个字节，则需要注意匹配数据类型——不能将指向字节的指针写入单个字节。使用`WriteProcessMemory`，您将传递正确的大小。

如果您在自己的进程中写入内存，则可以[`std::copy`](http://en.cppreference.com/w/cpp/algorithm/copy)改用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T21:12:01.850

这是你想要做的吗？

```
BYTE newValue[] = {0x90, 0x90, 0x90, 0x90};
*(long*)0x004C40DB = *(long*)newValue; 
```

如果您尝试复制四个字节，那么您需要指向 long 而不是指向 char 的指针（假设 long 是四个字节）。

# assembly - 是否有将 ARM 程序集转换为 MIPS 程序集的程序？

> ID：11819978
> 
> 赞同：1
> 
> 时间：2012-08-05T20:51:44.857
> 
> 标签：assembly, arm, mips

我找到了一些不同的程序，用于将 ARM 二进制文件转换为 MIPS 二进制文件或在运行时将 ARM 转换为 MIPS，但我正在寻找将 ARM 汇编代码转换为 MIPS（.S 文本文件，以便我可以调试和优化生成的代码）。是否有任何程序可以做到这一点（或一系列工具可以做到这一点）？我找到了一些关于 ARM 到 MIPS 转换策略的基本指南，但是如果我有一个可以完成繁重工作然后微调结果的工具，我认为这项工作会更容易。

# java - Quartz调度器和普通Java线程有什么区别

> ID：11819981
> 
> 赞同：3
> 
> 时间：2012-08-05T20:52:02.913
> 
> 标签：java, quartz-scheduler

Quartz 调度程序和 Java 中的默认线程有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T20:55:46.107

Quartz Scheduler 是一个针对与调度相关的问题的复杂解决方案。它利用核心 Java 技术来提供更多和更方便的功能。将其视为比线程概念具有更高抽象级别的更高级别框架。

# javascript - Facebook 不安全的 JavaScript 尝试

> ID：11819984
> 
> 赞同：0
> 
> 时间：2012-08-05T20:52:25.963
> 
> 标签：javascript, facebook, oauth-2.0, django-facebook

使用带有 JS SDK 的 OAuth2.0 进行身份验证时遇到问题

1) 使用域 'urchinapp.com' 站点 url 'http://local.urchinapp.com:8000/' 创建了 facebook 网站应用程序 2) 我编辑了我的 /etc/hosts 文件以将 local.urchinapp.com 重定向到本地主机 3)在 local.urchinapp.com:8000 上启动应用程序并访问页面。

弹出窗口确实出现并要求适当的权限，但是一旦页面重新加载，我在 Web 检查器控制台中收到以下错误：

> 不安全的 JavaScript 尝试 从 URL 为[http://local.urchinapp.com:8000/的框架访问具有 URL](http://local.urchinapp.com:8000/) [https://www.facebook.com/dialog/permissions.request](https://www.facebook.com/dialog/permissions.request)的框架。域、协议和端口必须匹配。

更新：使用 Django-Facebook 库可能是问题所在：使用来自 _facebook_js.html 的 F.connect() 调用给我错误，而从 Facebook 加载原始 JS SDK 给我没有问题。但是，我想使用 _facebook_js.html，因为它可以让我与服务器端 Python 调用 Graph API 等进行更无缝的集成。

此外，我实际上能够创建帖子和访问权限。但该应用程序继续引发“不安全的 JavaScript”错误。

我在 Chrome 上运行它。

# javascript - 用户选择了一些内容 - 现在我想看看用户是否选择了 div 中的全部内容

> ID：11819986
> 
> 赞同：3
> 
> 时间：2012-08-05T20:52:27.423
> 
> 标签：javascript, jquery

看看下面 HTML 页面中的代码片段——

```
<div id="div2"> Text2 </div> 
```

现在，用户从浏览器网页中显示的文本中仅选择“Te”...

如何检查用户是否选择了 id=div2 的全部内容？

我确实了解如何获取与用户选择的内容相对应的节点列表——但在这种情况下，由于用户只选择了“Te”——只获得了一个节点——即包含文本“Te”的文本节点...因此我很困惑...

检查用户选择是否包含整个 Div （或 p ）的最简单方法是什么？

另一个问题是，如果用户选择了多个 div 的内容，那么我如何检查每个（多个）div 的全部内容是否已被选中？

例如，看看下面的 HTML 片段——

```
 <div id="div1"> Text1 </div>
 <div id="div2"> Text2 </div>
 <div id="div3"> Text3 </div> 
```

在这里，用户选择了上面所有 3 个 div 的文本...

最后，如果用户选择了多个 div 的内容，所有这些都在一个父 div 中，那么我如何检查用户是否选择了该父 div 的全部内容，或者只选择了一些内容？父 div 也可能包含其他 div、p 元素以及图像和链接......

我不介意为此目的使用纯 js 或 jquery 之类的库...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T23:35:38.213

我已经完成了这个，但它可能不是完美的，试一试，也许它会给你一些想法，或者其他人可以让它变得更好

```
function getSelectedText()
{
    var t = '';
   if(window.getSelection) t = window.getSelection();
   else if(document.getSelection) t = document.getSelection();
   else if(document.selection) t = document.selection.createRange();  
   if(t)
   { 
       return {
           selectedText:t.text ? t.text : t.toString(),
           fullContent:t.anchorNode ? t.anchorNode.nodeValue : t.parentElement().innerHTML
      };
    }
}

$(function(){
    $(document).on('mouseup', function(){
        var selection=getSelectedText();
        if(selection.selectedText)
        {
            var selected = $.trim(selection.selectedText);
            var full = $.trim(selection.fullContent);
            if(selected!=full) alert('Full content is not selected');
            else alert('Full content is selected');
         }
    });
}); 
```

[**演示**](http://jsfiddle.net/Gs7gX/4/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T00:15:00.080

我的 Rangy 库提供了一个[`containsNodeText()`](https://code.google.com/p/rangy/wiki/RangyRange#containsNodeText%28Node_node%29)不属于 DOM Range 标准的 Range 对象的方法。看起来这对你所有的问题都有帮助。

```
var div2 = document.getElementById("div2");
var sel = rangy.getSelection();
var divTextIsSelected = false;
if (sel.rangeCount) {
    divTextIsSelected = sel.getRangeAt(0).containsNodeText(div2);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T23:37:20.260

我为你做了这个例子，看看：

**现场演示：http:** [//jsfiddle.net/oscarj24/FsZcV/](http://jsfiddle.net/oscarj24/FsZcV/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T22:00:40.670

你的第一个问题怎么样？

`window.getSelection().focusNode.nodeValue === window.getSelection()`

请注意，`focusNode`是包含选择结束的元素，`anchorNode`是包含选择开始的元素。

在第二个问题中，您可以尝试使用类似的方式向上遍历 DOM

`window.getSelection().getRangeAt(0).commonAncestorContainer`

检索第`getRangeAt(0)`一个连续的选定元素容器范围。（如果用户执行 ctrl+select 之类的操作，您将拥有多个。）

以下是一些案例：

*   `window.getSelection().getRangeAt(0).startOffset === 0`如果选择了所有第一个元素。
*   `window.getSelection().getRangeAt(0).endOffset === window.getSelection().getRangeAt(0).endContainer.length`如果选择了所有最后一个元素。

如果您想显式检查每个元素，请查看这篇文章中元素的遍历方式：[获取所选文本的所有 DOM 块元素](https://stackoverflow.com/questions/4220478/get-all-dom-block-elements-for-selected-texts)

# jquery - Django 使用 Jquery 发布数据

> ID：11819987
> 
> 赞同：2
> 
> 时间：2012-08-05T20:52:35.263
> 
> 标签：jquery, html, ajax, django, for-loop

我正在设计一个应用程序，其中您有连接，并且在页面一侧加载了挂起的连接请求列表。我遇到的问题是编写一个 jQuery 函数来接受请求并刷新页面上的 div 框。我不知道如何将连接请求的 id 传递给我的 jquery 函数，然后该函数将该 id 传递给我的视图以操作关联的对象。

这是我的 JS 代码：

```
function accept(id) {
  $.post("/accept/", function(json){
  alert("Was successful?: " + json['success']);
});

function addClickHandlers() {
  $("#accept").click( function() { accept(id) });
}
$(document).ready(accept); 
```

这是我试图调用 JS 的 html：

```
 <table class="table table-condensed" style="margin-top:10px;">
    <tbody>
      {% for request in conReqs %}
      <tr>
        <td>
          <a href="#"><img src="{{ MEDIA_URL }}{{ request.creator.username }}<a onclick="accept({{ request.id }});">Accept</a> &middot; <i class="icon-thumbs-down"></i> <a href="#">Hide</a></p>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table> 
```

当我单击接受时，没有任何反应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T21:19:08.557

您不需要`onlick`属性，只需使用 jQuery 不显眼地附加事件处理程序。你也不应该有嵌套`<a>`标签。

```
function accept( id ) {

  $.post( "/accept/", function ( json ) {

    alert( "Was successful?: " + json[ 'success' ] );

  } );

}

function addClickHandlers() {

  $( ".accept" ).on( 'click', function ( event ) {

    event.preventDefault();

    accept( /\d+$/.exec( event.target.id )[0] );

  } );

}

$( document ).ready( function () {

  addClickHandlers();

  // If you really mean to call this at this point:
  accept();

} );

<table class="table table-condensed" style="margin-top:10px;">
  <tbody>
    {% for request in conReqs %}
    <tr>
      <td>
        <a href="#{{ request.id }}" class="accept"><img src="{{ MEDIA_URL }}{{ request.creator.username }}Accept</a> &middot; <i class="icon-thumbs-down"></i> <a href="#">Hide</a></p>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table> 
```

# 事件处理

HTML：

```
<a href="" id="some-link">Some link</a> 
```

JS：

```
$( document ).ready( function () {

  // Select element(s). In this case, the one element with the ID
  // "some-link". Call `on()` on the selected elements to register an
  // event listener, in this case for the `click` event. The second
  // argument to `on()` is the handler function, which will be called
  // when the event occurs and will be passed a jQuery Event object.

  $( "#some-link" ).on( 'click', function ( event ) {

    // This prevents the default action associated with the event on
    // the target element. In the case of a click event on an
    // `a[href]` element, the default action would be to load the URL
    // that the `href` resolves to.

    event.preventDefault();

    // One of the properties of the Event object is `target` -- the
    // element that the event occured on. In this case the target will
    // be an `a[href]` element, so I can read `event.target.href`. If
    // the `a` element had nested elements, `event.target` could be
    // the nested element. In that case, you could do
    // `$( event.target ).closest( "a" )` to make sure you get the `a`
    // element that the event occured within.

    // Here I'm running a regular expression on `event.target.href` to
    // get a sequence of digits at the end.

    var id = /\d+$/.exec( event.target.href )[0];

  } );

} ); 
```

对于您问题中的用例，代码可以浓缩为如下内容：

```
$( document ).ready( function () {

  $( ".accept" ).on( 'click', function ( event ) {

    event.preventDefault();

    var id = /\d+$/.exec( event.target.href )[0]; 

    $.post( "/accept/", { id : id }, function ( json ) {

      // ...

    } );

  } );

} ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T21:28:11.923

您实际上并没有发布任何数据。调试 javascript 时确保控制台已打开，这将显示所有语法错误和请求。学习如何调试代码很重要。随意使用`console.log`以找出代码的哪些部分正在执行以及哪些部分没有执行。

您可以在 url 之后发布带有数据的对象的数据

```
var postData = {'id': id};
 $.post("/accept/", postData, function(json){ 
```

在您的 django 视图中，您可以通过以下方式访问 id

`request.POST.get('id')`

# c# - 路由中的参数不起作用 MVC 3

> ID：11819989
> 
> 赞同：3
> 
> 时间：2012-08-05T20:52:49.073
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-routing

我确定我做错了什么，但是在没有运气的情况下花了几个小时之后，如果有人可以帮助我解决这个问题，我会非常高兴。

似乎路由系统仅在第一次路由注册时才接受参数。

这就是我的 global.asax.cs 的样子

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using System.Web.Routing;

namespace MvcApplication4
{

    public class MvcApplication : System.Web.HttpApplication
    {
        public static void RegisterGlobalFilters(GlobalFilterCollection filters)
        {
            filters.Add(new HandleErrorAttribute());
        }

        public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapRoute(
                     "t", // Route name
                     "{controller}/{action}/{i}/{v}",  
                     new { i = UrlParameter.Optional, v = UrlParameter.Optional }  
                 );

            routes.MapRoute(
                "Default", // Route name
                "{controller}/{action}/{id}", 
                new {  id = UrlParameter.Optional } 
            );

        }

        protected void Application_Start()
        {
            AreaRegistration.RegisterAllAreas();

            RegisterGlobalFilters(GlobalFilters.Filters);
            RegisterRoutes(RouteTable.Routes);
        }
    }
} 
```

这就是家庭控制器的样子

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace MvcApplication4.Controllers
{
    public class HomeController : Controller
    {
        public ActionResult Index(int? id)
        {
            ViewBag.Message = "Welcome to ASP.NET MVC!";

            return View();
        }

        public ActionResult About(int? a)
        {
            return View();
        }

    }
} 
```

问题是当我尝试这个网址时

```
http://localhost:52230/Home/Index/2 
```

id 始终为空。但是，如果我尝试 `http://localhost:52230/Home/Index?id=2` ……它会起作用。

如果我在任何其他路线之前注册主页/索引，它也可以工作。在这种情况下，稍后注册的路由在接受参数时也会出现同样的问题。

我在这里做错了什么？

**更新：**

我希望这两个控制器都能工作，我的路由注册会是什么样子？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace MvcApplication4.Controllers
{
    public class HomeController : Controller
    {
        public ActionResult Index(int? id)
        {
            ViewBag.Message = "Welcome to ASP.NET MVC!";

            return View();
        }

    }
} 
```

第二控制器

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace MvcApplication4.Controllers
{
    public class VisitorController : Controller
    {
        //
        // GET: /VisitorSecurityPoints/

        public ActionResult Test(string i,string v)
        {

            return View();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T21:25:32.900

路线从特定到一般排序。这意味着 MVC 在查看已请求的 URL 时将始终尝试匹配最具体的路由。路线将在路线列表中越往下越“贪婪”。

如果我们仔细看看有问题的两条路由，我们可以看到 MVC 无法区分这两者，除非`v`提供了参数。它们都有`controller`and`action`参数，而且它们都有一个可选的第三个参数。如果`v`没有提供，MVC 将无法知道要使用哪个路由，除非有这样的优先级系统，这就是路由表中路由的顺序很重要的原因。

有一些方法可以让 MVC 像这样区分两条路由，但这取决于相关参数的数据类型。例如，如果`i`是 a `DateTime`，而不是`int`，您可以添加仅匹配日期的[Route Constraint 。](http://www.asp.net/mvc/tutorials/controllers-and-routing/creating-a-route-constraint-cs)有关约束的更多信息，请参阅[本文](http://stephenwalther.com/archive/2008/08/07/asp-net-mvc-tip-30-create-custom-route-constraints.aspx)。

我也赞同 Richard 关于使用 RouteDebugger 的建议。它对于帮助理解此类情况非常宝贵，并且可以导致更清晰的路由表设计。

## 编辑

我还应该提到，在`?id=2`最后标记时 URL“有效”的原因是 MVC 尝试将模型绑定直接绑定到查询字符串中的匹配操作参数。但是，请注意，与路由匹配的参数将优先于查询字符串中提供的值。例如，使用以下路线：

```
routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

导航到`http://localhost:50754/home/index/2`将导致`id`为 2。
导航到`http://localhost:50754/home/index/?id=4`将导致`id`为 4。
导航到`http://localhost:50754/home/index/2?id=4`将导致`id`为 2。

## 评论后更新

解决您的特定问题的最简单方法是更改​​路由表以包含以下路由：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        "visitors", // Route name
        "visitor/{action}/{i}/{v}", // URL with parameters
        new
        {
            controller = "Visitor", action = "Test",
            i = UrlParameter.Optional, v = UrlParameter.Optional
        }
    );

    routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
        new { controller = "Home", action = "Index", id = UrlParameter.Optional }
    );
} 
```

请注意`{action}`，此新路由中仍然存在该参数。这使得扩展它以适应控制器中的其他操作变得更容易一些。如果您需要将路由约束到控制器上存在的操作，则需要添加一个如前所述的路由约束。

这种方法的一个警告是，如果你不断地指定新的路由来匹配一些 URL，路由表可能会很快增长。由于现有路由，这可能会使向站点添加新功能更加困难，并且还会使维护更加困难。只要有可能，您应该尝试设计一个与默认`{controller}/{action}/{id}`路由匹配的路由，因为从长远来看，它会使维护和调试变得更加容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T20:55:12.910

我相信这是因为您的其他路线（“t”）首先匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T20:57:54.017

[您可以使用RouteDebugger](http://haacked.com/archive/2011/04/13/routedebugger-2.aspx)检查哪些路由正在匹配。只需使用 nuget 安装它：

```
PM> install-package RouteDebugger 
```

当您查看该页面时，它将列出您的所有路线并指出匹配的路线。将使用第一个匹配的路由。

# ipython - 使用新扩展运行 ipython 脚本

> ID：11819992
> 
> 赞同：1
> 
> 时间：2012-08-05T20:53:08.117
> 
> 标签：ipython, transformer

我正在编写一个 IPython 扩展，它定义了一个新的 shell 转换器（参见[http://ipython.org/ipython-doc/dev/api/generated/IPython.core.prefilter.html#IPython.core.prefilter.PrefilterManager](http://ipython.org/ipython-doc/dev/api/generated/IPython.core.prefilter.html#IPython.core.prefilter.PrefilterManager)），并且我需要在脚本中使用这个扩展（以及由 shell 转换器定义的语法）。然而，一个简单的测试表明，标准的 IPython`%run`命令并没有按预期工作：当脚本中的命令直接粘贴在 IPython 提示符中时，一切正常；相反，如果我运行 IPython 脚本

`%run script.ipy`

无法识别新语法（即，看起来好像没有使用新的 shell 转换器）。

# android - android.widget.ArrayAdapter.getCount(ArrayAdapter.java:291)

> ID：11819997
> 
> 赞同：0
> 
> 时间：2012-08-05T20:53:39.677
> 
> 标签：android, android-spinner, android-logcat

如何修复此错误？我找不到任何可以帮助我的东西！代码片段将不胜感激！

sp2 的适配器在 sp1 的 onItemSelected 中设置的原因是因为我希望 sp2 的输出依赖于 sp1 中的选择。

日志猫：

```
 08-05 16:36:24.856: D/dalvikvm(6606): GC_EXTERNAL_ALLOC freed 81K, 43% free 3119K/5379K, external 2770K/2773K, paused 28ms
08-05 16:36:25.707: D/AndroidRuntime(6606): Shutting down VM
08-05 16:36:25.707: W/dalvikvm(6606): threadid=1: thread exiting with uncaught exception (group=0x4001e560)
08-05 16:36:25.707: E/AndroidRuntime(6606): FATAL EXCEPTION: main
08-05 16:36:25.707: E/AndroidRuntime(6606): java.lang.NullPointerException
08-05 16:36:25.707: E/AndroidRuntime(6606):     at android.widget.ArrayAdapter.getCount(ArrayAdapter.java:291)
08-05 16:36:25.707: E/AndroidRuntime(6606):     at android.widget.AbsSpinner.setAdapter(AbsSpinner.java:113)
08-05 16:36:25.707: E/AndroidRuntime(6606):     at com.madonk.louisiana.festivals.Region$1.onItemSelected(Region.java:107)
08-05 16:36:25.707: E/AndroidRuntime(6606):     at android.widget.AdapterView.fireOnSelected(AdapterView.java:877)
08-05 16:36:25.707: E/AndroidRuntime(6606):     at android.widget.AdapterView.access$200(AdapterView.java:42)
08-05 16:36:25.707: E/AndroidRuntime(6606):     at android.widget.AdapterView$SelectionNotifier.run(AdapterView.java:843)
08-05 16:36:25.707: E/AndroidRuntime(6606):     at android.os.Handler.handleCallback(Handler.java:587)
08-05 16:36:25.707: E/AndroidRuntime(6606):     at android.os.Handler.dispatchMessage(Handler.java:92)
08-05 16:36:25.707: E/AndroidRuntime(6606):     at android.os.Looper.loop(Looper.java:130)
08-05 16:36:25.707: E/AndroidRuntime(6606):     at android.app.ActivityThread.main(ActivityThread.java:3821)
08-05 16:36:25.707: E/AndroidRuntime(6606):     at java.lang.reflect.Method.invokeNative(Native Method)
08-05 16:36:25.707: E/AndroidRuntime(6606):     at java.lang.reflect.Method.invoke(Method.java:507)
08-05 16:36:25.707: E/AndroidRuntime(6606):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-05 16:36:25.707: E/AndroidRuntime(6606):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-05 16:36:25.707: E/AndroidRuntime(6606):     at dalvik.system.NativeStart.main(Native Method) 
```

这是有问题的代码：

```
sp2.setAdapter(sc_cit_adp); 
```

.java：

```
package com.madonk.louisiana.festivals;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

import android.os.Bundle;
import android.app.Activity;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Spinner;

/**
 * @author madonk
 *
 */
public class Region extends Activity {

Spinner sp1,sp2,sp3;
ArrayAdapter<String> reg_adp,sw_cit_adp,sc_cit_adp,sw_lake_charles_adp,sw_iowa_adp,sc_lafayette_adp,sc_gueydan_adp;
List<String> regions,sw_cities,sc_cities,sw_lake_charles,sw_iowa,sc_lafayette,sc_gueydan;

int pos;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_region);

    String[] regionsArray = getResources().getStringArray(R.array.regions_array);
    regions = new ArrayList<String>(Arrays.asList(regionsArray));

    String[] swcitiesArray = getResources().getStringArray(R.array.southwest_cities_array);
    sw_cities = new ArrayList<String>(Arrays.asList(swcitiesArray));

    String[] swiowaArray = getResources().getStringArray(R.array.sw_iowa_array);
    sw_iowa = new ArrayList<String>(Arrays.asList(swiowaArray));

    String[] swlakecharlesArray = getResources().getStringArray(R.array.sw_lake_charles_array);
    sw_lake_charles = new ArrayList<String>(Arrays.asList(swlakecharlesArray));

    String[] sclafayetteArray = getResources().getStringArray(R.array.sc_lafayette_array);
    sc_lafayette = new ArrayList<String>(Arrays.asList(sclafayetteArray));

    String[] scgueydanArray = getResources().getStringArray(R.array.sc_gueydan_array);
    sc_gueydan = new ArrayList<String>(Arrays.asList(scgueydanArray));

    sp1= (Spinner) findViewById(R.id.regions_spinner);
    sp2= (Spinner) findViewById(R.id.city_spinner);
    sp3= (Spinner) findViewById(R.id.festival_spinner);

    reg_adp=new ArrayAdapter<String> (this,android.R.layout.simple_dropdown_item_1line,regions);
    reg_adp.setDropDownViewResource(android.R.layout.simple_dropdown_item_1line);
    sp1.setAdapter(reg_adp);

    sw_cit_adp=new ArrayAdapter<String> (this,android.R.layout.simple_dropdown_item_1line,sw_cities);
    sw_cit_adp.setDropDownViewResource(android.R.layout.simple_dropdown_item_1line);

    sw_lake_charles_adp=new ArrayAdapter<String> (this,android.R.layout.simple_dropdown_item_1line,sw_lake_charles);
    sw_lake_charles_adp.setDropDownViewResource(android.R.layout.simple_dropdown_item_1line);

    sw_iowa_adp=new ArrayAdapter<String> (this,android.R.layout.simple_dropdown_item_1line,sw_iowa);
    sw_iowa_adp.setDropDownViewResource(android.R.layout.simple_dropdown_item_1line);

    sc_cit_adp=new ArrayAdapter<String> (this,android.R.layout.simple_dropdown_item_1line,sc_cities);
    sc_cit_adp.setDropDownViewResource(android.R.layout.simple_dropdown_item_1line);

    sc_lafayette_adp=new ArrayAdapter<String> (this,android.R.layout.simple_dropdown_item_1line,sc_lafayette);
    sc_lafayette_adp.setDropDownViewResource(android.R.layout.simple_dropdown_item_1line);

    sc_gueydan_adp=new ArrayAdapter<String> (this,android.R.layout.simple_dropdown_item_1line,sc_gueydan);
    sc_gueydan_adp.setDropDownViewResource(android.R.layout.simple_dropdown_item_1line);

    sp1.setOnItemSelectedListener(new OnItemSelectedListener() {

        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {

                 String reg_select = (sp1.getSelectedItem().toString());
                 if (reg_select.contentEquals("Southwest")){
                     sp2.setAdapter(sw_cit_adp); 
                     sp2.setOnItemSelectedListener(new OnItemSelectedListener() {

                            public void onItemSelected(AdapterView<?> arg0, View arg1,
                                    int arg2, long arg3) {
                                // TODO Auto-generated method stub

                             String sw_cit_select = (sp2.getSelectedItem().toString());
                             if (sw_cit_select.contentEquals("Lake Charles")){
                                 sp3.setAdapter(sw_lake_charles_adp); }

                             else if (sw_cit_select.contentEquals("Iowa")){
                                 sp3.setAdapter(sw_iowa_adp); }

                            ;}

                            public void onNothingSelected(AdapterView<?> arg0) {
                                // TODO Auto-generated method stub

                            };});}

                 else  if (reg_select.contentEquals("South Central")){
                     sp2.setAdapter(sc_cit_adp); 
                     sp2.setOnItemSelectedListener(new OnItemSelectedListener() {

                            public void onItemSelected(AdapterView<?> arg0, View arg1,
                                    int arg2, long arg3) {
                                // TODO Auto-generated method stub

                             String sc_cit_select = (sp2.getSelectedItem().toString());
                             if (sc_cit_select.contentEquals("Lafayette")){
                                 sp3.setAdapter(sc_lafayette_adp); }

                             else if (sc_cit_select.contentEquals("Gueydan")){
                                 sp3.setAdapter(sc_gueydan_adp); }

                            ;}

                            public void onNothingSelected(AdapterView<?> arg0) {
                                // TODO Auto-generated method stub

                            };});}

                 }

    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    }
});}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T21:08:05.940

那是因为您试图从 Anonymous 内部类内部访问*sw_cit_adp 。*这些类只喜欢当他们访问的数据成员是**最终**的 确保你有类似的东西

```
final ArrayAdapter sw_cit_adp = new ArrayAdapter(); 
```

你的变量是最终的。

# c# - 将“+”键分配给 C# 中的 ADD 按钮

> ID：11819998
> 
> 赞同：2
> 
> 时间：2012-08-05T20:54:00.010
> 
> 标签：c#, visual-studio-2010, events, event-handling

我正在使用 MS Visual Studio 2010 中的 WPF 应用程序制作计算器。我制作了标准计算器中的不同按钮，并在它们上添加了 button_Click 方法。现在我还想通过敲击特定键来执行与 button_Click 方法相同的任务。

例如

我有“addButton_Click”方法，它执行这个：

```
 private void addButton_Click(object sender, RoutedEventArgs e)
    {
        _op = 1;    
        temp = displayPannel.Text;
        check = true;
    } 
```

现在，如果我想让“+”键在计算器中做同样的事情，而不是使用鼠标单击“+”按钮，该怎么办？我也想使用数字键以及鼠标点击。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T21:05:45.287

主窗口.xaml.cs

```
 private void TextBox_PreviewKeyUp_1(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.OemPlus || e.Key == Key.Add)
            MessageBox.Show("Tada");
    } 
```

主窗口.xaml

```
 <TextBox Text="Hello" PreviewKeyUp="TextBox_PreviewKeyUp_1"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T21:33:41.490

您应该提取执行添加操作的方法。这不是强制性的，但从处理程序调用方法是一个好习惯，而不是在处理程序中包含一些大代码，例如：

```
 private void addButton_Click(object sender, RoutedEventArgs e)
    {
        PerformAdd();
    }

    private void PerformAdd()
    {
        _op = 1;
        temp = displayPannel.Text;
        check = true;
    } 
```

还有你的实际问题（我假设你想创建类似 Windows Calculator 的东西）：

1.  在 MainWindow.xaml 中附加 PreviewKeyDown 的处理程序。在您的情况下，最好使用 PreviewKeyDown，而不是 KeyDown，因为 Preview 事件从“外部到内部”进行，这意味着事件将首先出现在 MainWindow 处理程序中，然后出现在 MainWindow 内控件的处理程序中，而普通事件首先出现在内部类中. 首先在 MainWindow 中捕获事件将允许您全局处理诸如“+”或“-”之类的按键，而无需将它们传递给内部控件。

2.  在处理程序中，您应该检查 KeyCode，并调用适当的方法，如下所示：

    ```
     private void Window_PreviewKeyDown(object sender, KeyEventArgs e)
             {
                 if (e.Key == Key.OemPlus || e.Key == Key.Add)
                 {
                     PerformAdd();
                     e.Handled = true;
                 }
             } 
    ```

如您所见，有 e.Handled = true; 线。如果您将事件标记为已处理，则不会将其传递给内部控件。您应该将其标记为“操作”按键，这些按键不应作为输入传递给文本框。

编辑：至于数字，你可以这样做：

```
 if (e.Key == Key.D0 || e.Key == Key.NumPad0)
      textBox.Text = textBox.Text + "0"; 
```