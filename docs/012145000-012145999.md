# StackOverflow 问答 12145000-12145999

# c# - OAUTH 参数编码

> ID：12145001
> 
> 赞同：0
> 
> 时间：2012-08-27T15:33:03.140
> 
> 标签：c#, encoding, oauth, percent-encoding

在实施 OAUTH 时，我遇到了以下问题。在创建签名库时，应该再次编码编码参数还是应该在规范化参数时将编码参数排除在编码之外？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T07:25:17.537

当我阅读文档时，您似乎需要应用双重编码：

例如，HTTP 请求：

```
 POST /request?b5=%3D%253D&a3=a&c%40=&a2=r%20b HTTP/1.1
   Host: example.com
   Content-Type: application/x-www-form-urlencoded
   Authorization: OAuth realm="Example",
                  oauth_consumer_key="9djdj82h48djs9d2",
                  oauth_token="kkk9d7dh3k39sjv7",
                  oauth_signature_method="HMAC-SHA1",
                  oauth_timestamp="137131201",
                  oauth_nonce="7d8f3e4a",
                  oauth_signature="djosJKDKJSD8743243%2Fjdk33klY%3D"

   c2&a3=2+q 
```

包含签名基础字符串中使用的以下（完全解码的）参数：

```
 +------------------------+------------------+
           |          Name          |       Value      |
           +------------------------+------------------+
           |           b5           |       =%3D       |
           |           a3           |         a        |
           |           c@           |                  |
           |           a2           |        r b       |
           |   oauth_consumer_key   | 9djdj82h48djs9d2 |
           |       oauth_token      | kkk9d7dh3k39sjv7 |
           | oauth_signature_method |     HMAC-SHA1    |
           |     oauth_timestamp    |     137131201    |
           |       oauth_nonce      |     7d8f3e4a     |
           |           c2           |                  |
           |           a3           |        2 q       |
           +------------------------+------------------+ 
```

**请注意，“b5”的值是“=%3D”而不是“==”。** "c@" 和 "c2" 都有空值。虽然本规范中为构建签名基本字符串而指定的编码规则不包括使用“+”字符（ASCII 代码 43）来表示编码的空格字符（ASCII 代码 32），但这种做法在“ application/x-www-form-urlencoded” 编码值，并且必须正确解码，如“a3”参数实例之一所示（“a3”参数在此请求中使用了两次）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-19T03:05:30.263

根据规范：[https ://www.rfc-editor.org/rfc/rfc5849](https://www.rfc-editor.org/rfc/rfc5849)

每个级别的参数都被编码。

因此，每个 OAuth（不是正在创建的签名）和用户参数都被编码。

然后这些（领域除外）被加入到一个排序的参数列表中。

该字符串是 URL 编码的，并与 URL 编码的方法和 URL 编码的基本 URL 连接。

那是基本字符串，这是在散列之前的 2 级编码。

# dotnetnuke - DNN Wiki 模块中的类别？

> ID：12145003
> 
> 赞同：1
> 
> 时间：2012-08-27T15:33:10.180
> 
> 标签：dotnetnuke, wiki

我正在尝试使用 DNN Wiki 模块来容纳一个分为多个部分的大型文档。例如，第 1 章有引言、3 个部分和附录；第 2 章有引言、6 个部分和一个附录；等等。

我似乎无法在 Wiki 模块中获得一个树结构层次结构来维护这种层次结构。也就是说，我想把引言、第一部分、第二部分、第二部分和附录都放在第 1 章下作为一个类别（就像维基百科的文章被组织成小节一样）。有没有办法在该模块中获得这种层次结构，或者我应该在其他地方查看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T00:03:00.100

要在 DNN 可用的免费 Wiki 模块中执行此操作，您必须自己创建层次结构并在该层次结构中导航，因为类别和标记目前不是模块的一部分。

您可以使用 HTML 有序或无序列表执行此操作，例如

```
<ul>
<li>[[Category1]]
    <ul><li>[[SubCat1]]</li></ul>
</li>

<li>[[Category2]]
    <ul><li>[[SubCat2]]</li></ul>
</li>
<li>[[Category3]]
    <ul><li>[[SubCat3]]</li></ul>
</li></ul> 
```

# hibernate - 如何创建必须过滤多个关系的 Hibernate Criteria 查询？

> ID：12145006
> 
> 赞同：0
> 
> 时间：2012-08-27T15:33:15.517
> 
> 标签：hibernate, entity-relationship, hibernate-criteria

假设我有一个这样的实体：

```
@Entity
@Table(name = "ITEMS")
public class Item  {
    @OneToMany(mappedBy = "item")
    private Set<ItemParameterValue> parameterValues;
} 
```

它与`ItemParameterValues`：

```
@Entity
@Table(name = "ITEM_PARAMETER_VALUES", uniqueConstraints = @UniqueConstraint(columnNames = {"item_id", "parameter_id"}))
    public class ItemParameterValue {
        @ManyToOne
        @JoinColumn(name = "parameter_id")
        private ItemParameter parameter;
} 
```

与 有关系`ItemParameter`：

```
@Entity
@Table(name = "ITEM_PARAMETERS", uniqueConstraints = @UniqueConstraint(columnNames = "sid"))
public class ItemParameter {

} 
```

例如，我有一些`Item`参数值为“220”，其中有一个名为“Voltage”的参数。我必须过滤 220 但值 220 可以属于许多参数，我需要属于参数“电压”的那个。

我知道我可以做这样的事情（假设我设置了正确的别名）：

```
Criteria c = session.createCriteria(Item.class);
// ...
c.add(Restrictions.conjunction()
    .add(Restrictions.eq("item.parameterValue", "220"))
    .add(Restrictions.eq("item.parameterValue.parameter.sid", "Voltage"))); 
```

但这对我来说似乎有些麻烦。有没有更方便的方法来处理这种关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:31:06.603

而不是 createalias 您可以使用 createcriteria 来缩短它

```
Criteria c = session.createCriteria(Item.class)
    .createCriteria("parameterValues")
        .add(Restrictions.eq("theProperty", "220"))
        .createCriteria("parameter")
            .add(Restrictions.eq("sid", "Voltage")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:32:50.680

创建适当的别名，使标准更容易：

```
Criteria c = session.createCriteria(Item.class);
c.createAlias("parameterValues", "pv");
c.createAlias("pv.parameter", "p");
c.add(Restrictions.eq("pv.theProperty", "220")); // I don't see in your question the name of the property to perform filter
c.add(Restrictions.eq("p.sid", "Voltage")); 
```

此外，`Restrictions.conjunction()`没有必要，在这种情况下，您没有将 AND 与 OR 或其他复杂条件分组。

# iphone - 滚动 UITableView 将停止 Timer

> ID：12145007
> 
> 赞同：9
> 
> 时间：2012-08-27T15:33:17.573
> 
> 标签：iphone, objective-c, ios, xcode

我是一个初学者，我正在尝试为 iOS 编写和应用程序，它将在主屏幕上向用户显示一个从 25 分钟到 0 的计时器（由一个`UILabel`文本每秒更新一次的人组成`NSTimer`）和一个`UITableView`（嵌入在`UIViewController`主屏幕中），每次计时器达到 0 时都会显示一个单元格。

所以在我控制的主视图中，`UIViewController`我有： - `UILabel`：对于计时器 - `UITableView`：每次计时器达到 0 时显示一个单元格 - `UIButton`：启动计时器

一切似乎工作正常，除了滚动`UITableView`将停止计时器更新标签，只要用户将手指放在 tablewView 上。谁能告诉我为什么标签`UITableView`在滚动时不会更改其文本？

PS我认为这个问题可能与我没有使用线程的事实有关，因为我还没有学会使用它们。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-08-19T06:52:16.013

Swift 3.x 中的解决方案：

```
self.updateTimer = Timer.scheduledTimer(timeInterval:1.0, target: self, selector: "updateFunction", userInfo: nil, repeats: true)
RunLoop.current.add(self.updateTimer, forMode: RunLoopMode.commonModes) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-22T03:08:40.277

```
updateTimer = [NSTimer scheduledTimerWithTimeInterval:.01 target:self selector:@selector(updateCurrentTime) userInfo:p repeats:YES];
[[NSRunLoop currentRunLoop] addTimer:updateTimer forMode:NSRunLoopCommonModes]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-27T15:38:42.730

计时器在跟踪运行循环模式期间不会触发，这是您在滚动时所处的状态。查看有关运行循环模式的 NSTimer 文档，或有关滚动视图的 WWDC 2012 会话，了解详细信息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-12-12T20:45:18.373

滚动 UITableview 时，计时器不会重复。我们可以通过在 RunLoop 中添加一个定时器来解决这个问题。有关更多详细信息，您可以查看有关 RunLoop[的文档](https://developer.apple.com/documentation/foundation/runloop)。

Swift 4.1 中的解决方案

```
self.updateTimer = Timer.scheduledTimer(timeInterval:1.0, target: self, selector: Selector(("updateFunction")), userInfo: nil, repeats: true)
RunLoop.current.add(self.updateTimer, forMode: RunLoopMode.common) 
```

# css - min-height:100% 在 IE8（可能还有其他版本）中不起作用

> ID：12145017
> 
> 赞同：3
> 
> 时间：2012-08-27T15:33:44.427
> 
> 标签：css, cross-browser

我正在尝试创建一个由 3 个部分组成的页面，每个部分的高度为窗口/视口的 100%。我找到了一种适用于 Chrome、Firefox（至少是较新版本）和 Safari 的方法。但是在 IE8（可能还有其他版本）中，它不起作用。

这是测试页面：[http ://dev.manifold.ws/test3/](http://dev.manifold.ws/test3/)

这是HTML：

```
<body>

    <section id="section1">
    </section>

    <section id="section2">
    </section>

    <section id="section3">
    </section>

</body> 
```

这是CSS：

```
#section1 {
    min-height:100%;
    position:relative;
    background:#fc1b59;
}

#section2 {
    min-height:100%;
    position:relative;
    background:#d5ea27;
}

#section3 {
    min-height:100%; 
    position:relative;
    background:#0048ff;
} 
```

有人会为此提供跨浏览器解决方案吗？（至少主要的较新浏览器）谢谢！

-汤姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T15:39:46.157

您需要为 HTML5 添加 IE javascript shiv 并将所有 HTML5 元素声明为 BLOCK 元素。

[http://code.google.com/p/html5shiv/](http://code.google.com/p/html5shiv/)

考虑使用此重置 CSS 文件作为基础：

[http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T15:41:11.400

首先，IE8不知道`<section>`（HTML5）标签，你需要添加一些JS：

```
<!--[if lt IE 9]>
   <script>
      document.createElement('header');
      document.createElement('nav');
      document.createElement('section');
      document.createElement('article');
      document.createElement('aside');
      document.createElement('footer');
   </script>
<![endif]--> 
```

（[来源](http://tatiyants.com/how-to-get-ie8-to-support-html5-tags-and-web-fonts/)）

其次，您需要指定 IE8`<section>`是一个块：

```
section {
    display: block;
} 
```

这是一个有效的[JsFiddle](http://jsfiddle.net/tUYDS/1/)

# macos - 运行使用 OpenGL 的 MonoMac 示例时出现 System.Exception

> ID：12145019
> 
> 赞同：0
> 
> 时间：2012-08-27T15:34:05.453
> 
> 标签：macos, mono, monodevelop

这是我在 stackOverflow 上的第一篇文章，所以我希望你对我好:)。在使用 XCode v4.4、MonoDevelop v3.0.5 和 MonoMac (v2.10.9) git hub 的最新开发分支设置我的系统后，在运行包含 OpenGL 的 MonoMac 示例时，我不断收到这些异常，任何其他示例都按预期工作。这是异常的堆栈跟踪：-

```
2012-08-27 15:23:17.117 NeHeLesson1[229:1207] invalid pixel format
2012-08-27 15:23:17.119 NeHeLesson1[229:1207] invalid context

Unhandled Exception: System.Exception: Invalid parameters to context creation
at MonoMac.OpenGL.CGLContext..ctor (intptr) <0x0006f>
at MonoMac.AppKit.NSOpenGLContext.get_CGLContext () <0x00053>
at NeHeLesson1.MyOpenGLView.SetupDisplayLink () <0x00089>
at NeHeLesson1.MyOpenGLView..ctor (System.Drawing.RectangleF,MonoMac.AppKit.NSOpenGLContext) <0x00283>
at NeHeLesson1.MyOpenGLView..ctor (System.Drawing.RectangleF) <0x00033>
at (wrapper dynamic-method) object.ee521f2b-bbc7-4e1d-ad69-1022ce59ef12 (intptr,MonoMac.ObjCRuntime.Selector,System.Drawing.RectangleF) <0x00077>
at (wrapper native-to-managed) object.ee521f2b-bbc7-4e1d-ad69-1022ce59ef12 (intptr,MonoMac.ObjCRuntime.Selector,System.Drawing.RectangleF) <0x0008f>
at (wrapper managed-to-native) MonoMac.ObjCRuntime.Messaging.IntPtr_objc_msgSendSuper (intptr,intptr) <0x00003>
at MonoMac.AppKit.NSWindowController.get_Window () <0x0007b>
at NeHeLesson1.MainWindowController.get_Window () <0x00013>
at NeHeLesson1.AppDelegate.FinishedLaunching (MonoMac.Foundation.NSObject) <0x0003b>
at (wrapper dynamic-method) object.[NeHeLesson1.AppDelegate.Void FinishedLaunching(MonoMac.Foundation.NSObject)] (MonoMac.Foundation.NSObject,MonoMac.ObjCRuntime.Selector,MonoMac.Foundation.NSObject) <0x00033>
at (wrapper native-to-managed) object.[NeHeLesson1.AppDelegate.Void FinishedLaunching(MonoMac.Foundation.NSObject)] (MonoMac.Foundation.NSObject,MonoMac.ObjCRuntime.Selector,MonoMac.Foundation.NSObject) <0x000fb>
at (wrapper managed-to-native) MonoMac.AppKit.NSApplication.NSApplicationMain (int,string[]) <0x00003>
at MonoMac.AppKit.NSApplication.Main (string[]) <0x00017>
at NeHeLesson1.MainClass.Main (string[]) <0x00017>

[ERROR] FATAL UNHANDLED EXCEPTION: System.Exception: Invalid parameters to context creation
at MonoMac.OpenGL.CGLContext..ctor (intptr) <0x0006f>
at MonoMac.AppKit.NSOpenGLContext.get_CGLContext () <0x00053>
at NeHeLesson1.MyOpenGLView.SetupDisplayLink () <0x00089>
at NeHeLesson1.MyOpenGLView..ctor (System.Drawing.RectangleF,MonoMac.AppKit.NSOpenGLContext) <0x00283>
at NeHeLesson1.MyOpenGLView..ctor (System.Drawing.RectangleF) <0x00033>
at (wrapper dynamic-method) object.ee521f2b-bbc7-4e1d-ad69-1022ce59ef12 (intptr,MonoMac.ObjCRuntime.Selector,System.Drawing.RectangleF) <0x00077>
at (wrapper native-to-managed) object.ee521f2b-bbc7-4e1d-ad69-1022ce59ef12 (intptr,MonoMac.ObjCRuntime.Selector,System.Drawing.RectangleF) <0x0008f>
at (wrapper managed-to-native) MonoMac.ObjCRuntime.Messaging.IntPtr_objc_msgSendSuper (intptr,intptr) <0x00003>
at MonoMac.AppKit.NSWindowController.get_Window () <0x0007b>
at NeHeLesson1.MainWindowController.get_Window () <0x00013>
at NeHeLesson1.AppDelegate.FinishedLaunching (MonoMac.Foundation.NSObject) <0x0003b>
at (wrapper dynamic-method) object.[NeHeLesson1.AppDelegate.Void FinishedLaunching(MonoMac.Foundation.NSObject)] (MonoMac.Foundation.NSObject,MonoMac.ObjCRuntime.Selector,MonoMac.Foundation.NSObject) <0x00033>
at (wrapper native-to-managed) object.[NeHeLesson1.AppDelegate.Void FinishedLaunching(MonoMac.Foundation.NSObject)] (MonoMac.Foundation.NSObject,MonoMac.ObjCRuntime.Selector,MonoMac.Foundation.NSObject) <0x000fb>
at (wrapper managed-to-native) MonoMac.AppKit.NSApplication.NSApplicationMain (int,string[]) <0x00003>
at MonoMac.AppKit.NSApplication.Main (string[]) <0x00017>
at NeHeLesson1.MainClass.Main (string[]) <0x00017> 
```

导致错误的代码是：-

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Drawing;
using MonoMac.Foundation;
using MonoMac.AppKit;
using MonoMac.CoreVideo;
using MonoMac.CoreGraphics;
using MonoMac.OpenGL;

namespace NeHeLesson1
{
    public partial class MyOpenGLView : MonoMac.AppKit.NSView
    {

        NSOpenGLContext openGLContext;
        NSOpenGLPixelFormat pixelFormat;

        MainWindowController controller;

        CVDisplayLink displayLink;

        NSObject notificationProxy;

        [Export("initWithFrame:")]
        public MyOpenGLView (RectangleF frame) : this(frame, null)
        {
        }

        public MyOpenGLView (RectangleF frame, NSOpenGLContext context) : base(frame)
        {
            var attribs = new object [] {
                NSOpenGLPixelFormatAttribute.Accelerated,
                NSOpenGLPixelFormatAttribute.NoRecovery,
                NSOpenGLPixelFormatAttribute.DoubleBuffer,
                NSOpenGLPixelFormatAttribute.ColorSize, 24,
                NSOpenGLPixelFormatAttribute.DepthSize, 16 };

            pixelFormat = new NSOpenGLPixelFormat (attribs);

            if (pixelFormat == null)
                Console.WriteLine ("No OpenGL pixel format");

            // NSOpenGLView does not handle context sharing, so we draw to a custom NSView instead
            openGLContext = new NSOpenGLContext (pixelFormat, context);

            openGLContext.MakeCurrentContext ();

            // Synchronize buffer swaps with vertical refresh rate
            openGLContext.SwapInterval = true;

            // Initialize our newly created view.
            InitGL ();

            SetupDisplayLink();

            // Look for changes in view size
            // Note, -reshape will not be called automatically on size changes because NSView does not export it to override 
            notificationProxy = NSNotificationCenter.DefaultCenter.AddObserver (NSView.NSViewGlobalFrameDidChangeNotification, HandleReshape);
        }

        public override void DrawRect (RectangleF dirtyRect)
        {
            // Ignore if the display link is still running
            if (!displayLink.IsRunning && controller != null)
                DrawView ();
        }

        public override bool AcceptsFirstResponder ()
        {
            // We want this view to be able to receive key events
            return true;
        }

        public override void LockFocus ()
        {
            base.LockFocus ();
            if (openGLContext.View != this)
                openGLContext.View = this;
        }

        public override void KeyDown (NSEvent theEvent)
        {
            controller.KeyDown (theEvent);
        }

        public override void MouseDown (NSEvent theEvent)
        {
            controller.MouseDown (theEvent);
        }

        // All Setup For OpenGL Goes Here
        public bool InitGL ()
        {
                // Enables Smooth Shading  
                GL.ShadeModel (ShadingModel.Smooth);
                // Set background color to black     
                GL.ClearColor (Color.Black);

                // Setup Depth Testing

                // Depth Buffer setup
                GL.ClearDepth (1.0);
                // Enables Depth testing
                GL.Enable (EnableCap.DepthTest);
                // The type of depth testing to do
                GL.DepthFunc (DepthFunction.Lequal);

                // Really Nice Perspective Calculations
                GL.Hint (HintTarget.PerspectiveCorrectionHint, HintMode.Nicest);

                return true;
        }

        private void DrawView ()
        {
            // This method will be called on both the main thread (through -drawRect:) and a secondary thread (through the display link rendering loop)
            // Also, when resizing the view, -reshape is called on the main thread, but we may be drawing on a secondary thread
            // Add a mutex around to avoid the threads accessing the context simultaneously 
            openGLContext.CGLContext.Lock ();

            // Make sure we draw to the right context
            openGLContext.MakeCurrentContext ();

            // Delegate to the scene object for rendering
            controller.Scene.DrawGLScene ();

            openGLContext.FlushBuffer ();

            openGLContext.CGLContext.Unlock ();
        }

        private void SetupDisplayLink ()
        {
            // Create a display link capable of being used with all active displays
            displayLink = new CVDisplayLink ();

            // Set the renderer output callback function
            displayLink.SetOutputCallback (MyDisplayLinkOutputCallback);

            // Set the display link for the current renderer
            CGLContext cglContext = openGLContext.CGLContext;
            CGLPixelFormat cglPixelFormat = PixelFormat.CGLPixelFormat;
            displayLink.SetCurrentDisplay (cglContext, cglPixelFormat);

        }

        public CVReturn MyDisplayLinkOutputCallback (CVDisplayLink displayLink, ref CVTimeStamp inNow, ref CVTimeStamp inOutputTime, CVOptionFlags flagsIn, ref CVOptionFlags flagsOut)
        {
            CVReturn result = GetFrameForTime (inOutputTime);

            return result;
        }

        private CVReturn GetFrameForTime (CVTimeStamp outputTime)
        {
            // There is no autorelease pool when this method is called because it will be called from a background thread
            // It's important to create one or you will leak objects
            using (NSAutoreleasePool pool = new NSAutoreleasePool ()) {

                // Update the animation
                DrawView ();
            }

            return CVReturn.Success;

        }

        public NSOpenGLContext OpenGLContext {
            get { return openGLContext; }
        }

        public NSOpenGLPixelFormat PixelFormat {
            get { return pixelFormat; }
        }

        public MainWindowController MainController {
            set { controller = value; }
        }

        public void UpdateView ()
        {
            // This method will be called on the main thread when resizing, but we may be drawing on a secondary thread through the display link
            // Add a mutex around to avoid the threads accessing the context simultaneously
            openGLContext.CGLContext.Lock ();

            // Delegate to the scene object to update for a change in the view size
            controller.Scene.ResizeGLScene (Bounds);
            openGLContext.Update ();

            openGLContext.CGLContext.Unlock ();
        }

        private void HandleReshape (NSNotification note)
        {
            UpdateView ();
        }

        public void StartAnimation ()
        {
            if (displayLink != null && !displayLink.IsRunning)
                displayLink.Start ();
        }

        public void StopAnimation ()
        {
            if (displayLink != null && displayLink.IsRunning)
                displayLink.Stop ();
        }

        // Clean up the notifications
        public void DeAllocate()
        {
            displayLink.Stop();
            displayLink.SetOutputCallback(null);

            NSNotificationCenter.DefaultCenter.RemoveObserver(notificationProxy); 
        }

        [Export("toggleFullScreen:")]
        public void toggleFullScreen (NSObject sender)
        {
                controller.toggleFullScreen (sender);
        }       
    }
} 
```

场景.cs

```
namespace NeHeLesson1
{
    public class Scene : NSObject
    {
        public Scene () : base()
        {
        }

        // Resize And Initialize The GL Window 
        //      - See also the method in the MyOpenGLView Constructor about the NSView.NSViewGlobalFrameDidChangeNotification
        public void ResizeGLScene (RectangleF bounds)
        {
            // Reset The Current Viewport
            GL.Viewport (0, 0, (int)bounds.Size.Width, (int)bounds.Size.Height);
            // Select The Projection Matrix
            GL.MatrixMode (MatrixMode.Projection);
            // Reset The Projection Matrix
            GL.LoadIdentity ();

            // Set perspective here - Calculate The Aspect Ratio Of The Window
            Perspective (45, bounds.Size.Width / bounds.Size.Height, 0.1, 100);

            // Select The Modelview Matrix
            GL.MatrixMode (MatrixMode.Modelview);
            // Reset The Modelview Matrix
            GL.LoadIdentity ();
        }

        // This creates a symmetric frustum.
        // It converts to 6 params (l, r, b, t, n, f) for glFrustum()
        // from given 4 params (fovy, aspect, near, far)
        public static void Perspective (double fovY, double aspectRatio, double front, double back)
        {
            const double DEG2RAD = Math.PI / 180;

            // tangent of half fovY
            double tangent = Math.Tan (fovY / 2 * DEG2RAD);

            // half height of near plane
            double height = front * tangent;

            // half width of near plane
            double width = height * aspectRatio;

            // params: left, right, bottom, top, near, far
            GL.Frustum (-width, width, -height, height, front, back);
        }

        // This method renders our scene and where all of your drawing code will go.
        // The main thing to note is that we've factored the drawing code out of the NSView subclass so that
        // the full-screen and non-fullscreen views share the same states for rendering 
        public bool DrawGLScene ()
        {
            // Clear The Screen And The Depth Buffer
            GL.Clear (ClearBufferMask.ColorBufferBit | ClearBufferMask.DepthBufferBit);
            // Reset The Current Modelview Matrix
            GL.LoadIdentity ();

            return true;
        }

    }
} 
```

希望有人可以帮助我解决这个问题，因为它停止运行 MonoMac 和 MonoGameFrameWork，我是否从我的设置中遗漏了一些东西。顺便说一句，我能够运行所有 OpenGLExtentions Viewer 测试，所以我的 openGL 似乎可以工作。

杰斯

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-05T12:50:30.203

我会做的事情是......

1.  访问[http://www.go-mono.com/mono-downloads/download.html](http://www.go-mono.com/mono-downloads/download.html)
2.  下载 Mono 2.10.9 SDK
3.  确保您已安装 X11 - [http://www.simplehelp.net/2006/10/22/how-to-install-x11-in-os-x/](http://www.simplehelp.net/2006/10/22/how-to-install-x11-in-os-x/)
4.  如果你想使用 MonoGame，然后执行“git clone git@github.com:mono/MonoGame.git”，然后执行“cd MonoGame”，然后执行命令“git submodule update --init --recursive”，这样 Samples和 StarterKit 子模块已下载。

注意：如上所述，NeheLesson1 不是 MonoGame 框架示例。它是一个纯 OpenGL 示例。MonoGame 框架示例可以在上面克隆的 MonoGame 存储库的 Samples 和 StarterKit 子目录中找到。

我希望这有帮助。

# sql - 首选 SQL Server 数据库同步方法

> ID：12145027
> 
> 赞同：1
> 
> 时间：2012-08-27T15:34:44.530
> 
> 标签：sql, sql-server-ce, microsoft-sync-framework, merge-replication

多年来，我一直在使用 SQL Server 合并复制来复制带有多个 SQL Server Compact 数据库的 SQL Server，我一直在想，我应该升级/切换到 Microsoft Sync Framework .

我决定今天开始研究它，看起来它的代码自 2010 年以来还没有真正更新过： [http](http://services.community.microsoft.com/feeds/feed/sync_downloads) ://services.community.microsoft.com/feeds/feed/sync_downloads 。

现在有没有更新、更受欢迎的方法来在成熟的 SQL Server 和多个 SQL Server Compact 数据库之间同步数据？我现在能找到的最接近的是[SQL Data Sync](http://msdn.microsoft.com/en-us/library/windowsazure/hh456371.aspx)，但这似乎适用于 Azure，我还没有准备好。

# crystal-reports - Crystal Reports - 在页眉中显示未对齐的详细信息

> ID：12145032
> 
> 赞同：0
> 
> 时间：2012-08-27T15:35:25.823
> 
> 标签：crystal-reports

我正在为 Visual Studio 使用 Crystal Reports，但我遇到了一个让我困惑的奇怪问题。我有一些简单的报告，其中包含来自数据库的 3-5 列数据。在我的生产服务器 (IIS 7.5) 上，详细信息部分显示覆盖作为列标题的页眉。奇怪的是它不是任何给定报告上的所有列。它可能是一列或多列，但至少有一列正确显示。在报告预览中，在我的开发机器上，或在我的 Intranet (IIS 6) 上，报告完美显示。我已经广泛搜索并尝试了很多东西，但我不知所措。

BIN 目录中的 dll 版本在环境之间匹配，并且 aspnet_client 中的文件也匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T14:50:32.897

好吧，我终于想通了，这是一个两部分...

1）第一个问题是我的开发机器和我的实时服务器上的 GAC 版本不匹配。我的服务器运行的是 13,04.705，我的开发机器是 13.02.469。有一次，我更新了我的开发机器，我可以在两者上重现行为。

2) 回顾问题...详细信息列将像这样打印。

名称 信息 数据 数据

问题原来是公式字段将显示比其行中的数据字段高的行。

为了解决这个问题，我不得不更改每个对象的段落格式。当我将所有排列的内容更改为 1 时，公式字段的行间距设置为 1.5。

# c++ - std::function 绑定到成员函数

> ID：12145035
> 
> 赞同：7
> 
> 时间：2012-08-27T15:35:43.503
> 
> 标签：c++, visual-c++, c++11, visual-c++-2012

以下代码在 VS2012 中无法编译

```
class Zot
{
public:
    int A() { return 123; }
};

int _tmain(int argc, _TCHAR* argv[])
{
    std::function<int (Zot*)> fn = &Zot::A;
    return 0;
} 
```

但是，将分配更改为

```
 std::function<int (Zot*)> fn = std::bind(&Zot::A, std::placeholders::_1); 
```

行得通。

有很多在线示例显示了原始语法。C++11 规范中是否有更改以禁止这种语法？

作业是否有有效的简短表格？

**编辑**：编译器错误（为了可重复性而略微编辑）是：

```
1>vc\include\functional(515): error C2664: 'std::_Func_class<_Ret,_V0_t>::_Set' : cannot convert parameter 1 from '_Myimpl *' to 'std::_Func_base<_Rx,_V0_t> *'
1>          with
1>          [
1>              _Ret=int,
1>              _V0_t=Zot *
1>          ]
1>          and
1>          [
1>              _Rx=int,
1>              _V0_t=Zot *
1>          ]
1>          Types pointed to are unrelated; conversion requires reinterpret_cast, C-style cast or function-style cast
1>          vc\include\functional(515) : see reference to function template instantiation 'void std::_Func_class<_Ret,_V0_t>::_Do_alloc<_Myimpl,_Fret(__thiscall Zot::* const &)(void),_Alloc>(_Fty,_Alloc)' being compiled
1>          with
1>          [
1>              _Ret=int,
1>              _V0_t=Zot *,
1>              _Fret=int,
1>              _Alloc=std::allocator<std::_Func_class<int,Zot *>>,
1>              _Fty=int (__thiscall Zot::* const &)(void)
1>          ]
1>          vc\include\functional(515) : see reference to function template instantiation 'void std::_Func_class<_Ret,_V0_t>::_Do_alloc<_Myimpl,_Fret(__thiscall Zot::* const &)(void),_Alloc>(_Fty,_Alloc)' being compiled
1>          with
1>          [
1>              _Ret=int,
1>              _V0_t=Zot *,
1>              _Fret=int,
1>              _Alloc=std::allocator<std::_Func_class<int,Zot *>>,
1>              _Fty=int (__thiscall Zot::* const &)(void)
1>          ]
1>          vc\include\functional(515) : see reference to function template instantiation 'void std::_Func_class<_Ret,_V0_t>::_Reset_alloc<_Fret,Zot,std::allocator<_Ty>>(_Fret (__thiscall Zot::* const )(void),_Alloc)' being compiled
1>          with
1>          [
1>              _Ret=int,
1>              _V0_t=Zot *,
1>              _Fret=int,
1>              _Ty=std::_Func_class<int,Zot *>,
1>              _Alloc=std::allocator<std::_Func_class<int,Zot *>>
1>          ]
1>          vc\include\functional(515) : see reference to function template instantiation 'void std::_Func_class<_Ret,_V0_t>::_Reset_alloc<_Fret,Zot,std::allocator<_Ty>>(_Fret (__thiscall Zot::* const )(void),_Alloc)' being compiled
1>          with
1>          [
1>              _Ret=int,
1>              _V0_t=Zot *,
1>              _Fret=int,
1>              _Ty=std::_Func_class<int,Zot *>,
1>              _Alloc=std::allocator<std::_Func_class<int,Zot *>>
1>          ]
1>          vc\include\functional(675) : see reference to function template instantiation 'void std::_Func_class<_Ret,_V0_t>::_Reset<int,Zot>(_Fret (__thiscall Zot::* const )(void))' being compiled
1>          with
1>          [
1>              _Ret=int,
1>              _V0_t=Zot *,
1>              _Fret=int
1>          ]
1>          vc\include\functional(675) : see reference to function template instantiation 'void std::_Func_class<_Ret,_V0_t>::_Reset<int,Zot>(_Fret (__thiscall Zot::* const )(void))' being compiled
1>          with
1>          [
1>              _Ret=int,
1>              _V0_t=Zot *,
1>              _Fret=int
1>          ]
1>          c:\..\cxx11.cpp(17) : see reference to function template instantiation 'std::function<_Fty>::function<int(__thiscall Zot::* )(void)>(_Fx &&)' being compiled
1>          with
1>          [
1>              _Fty=int (Zot *),
1>              _Fx=int (__thiscall Zot::* )(void)
1>          ]
1>          c:\...\cxx11.cpp(17) : see reference to function template instantiation 'std::function<_Fty>::function<int(__thiscall Zot::* )(void)>(_Fx &&)' being compiled
1>          with
1>          [
1>              _Fty=int (Zot *),
1>              _Fx=int (__thiscall Zot::* )(void)
1>          ] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T15:57:50.920

以下语法有效并且至少更短：

```
std::function<int (Zot*)> fn = std::mem_fn(&Zot::A); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T16:38:43.343

是的，它应该工作。任何适当的构造函数（例如`template<class F> function(F f);`）的函子参数的要求之一`std::function<R(ArgsTypes...)>`是：

> f 对于参数类型和返回类型应该是*Callable* (20.8.11.2) 。`ArgTypes``R`

（20.8.11.2.1 函数构造/复制/销毁 [func.wrap.func.con]）

反过来，“*可调用*参数类型`ArgTypes`和返回类型`R`”是根据伪表达式定义的标准准概念（由于缺乏概念）`INVOKE(f, declval<ArgTypes>()..., R)`。这个伪表达式统一了常规函子，这些函子用通常的调用语法（例如`f(a, b, c)`）调用，并带有指向具有自己怪癖的成员的指针（例如`p->*a`或`(r.*a)(b, c)`）。*INVOKE*在 20.8.2 需求 [func.require] 中定义。

此外，使用`std::function`include `INVOKE(f, std::forward<ArgTypes>(args)..., R)`(20.8.11.2.4 函数调用 [func.wrap.func.inv]) 的调用运算符的效果，这意味着对指向成员的指针做了“正确”的事情。

事实上，标准中还有很多其他的东西是根据*Callable* / *INVOKE*定义的，比如`std::bind`、和*。`std::thread``std::reference_wrapper``std::result_of`

*：特别是这意味着类似

```
template<typename Functor>
typename std::result_of<Functor()>::type apply(Functor functor)
{ return std::forward<Functor>(functor)(); } 
```

至少因为这个原因是有问题的。

# css - 文本装饰时 Href 高度不正确：无且在垂直对齐的图像旁边

> ID：12145036
> 
> 赞同：1
> 
> 时间：2012-08-27T15:35:43.143
> 
> 标签：css, href, vertical-alignment

我在图像旁边有一个链接，它与图像垂直对齐。当 text-decoration 为标准时，文本链接完美地位于中间。

![在此处输入图像描述](../Images/0eb5dcd722b0845b61e5462455c3791c.png)

如果我将 text-decoration 更改为 none，则文本将保留在同一位置，但没有下划线，这会使文本看起来不像垂直居中。

![在此处输入图像描述](../Images/a4246bbbe11fe424b7659ec70c1a9903.png)

似乎这是某种错误，但好奇是否有任何想法。

有什么想法还是我太挑剔了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:38:11.343

“如果我将文本装饰更改为无，文本将保留在同一个位置，但没有下划线”

你想要什么？**text-decoration:none**在任何情况下都会删除下划线。

# ios - 如何更改 UITableView 组中第一行和最后一行的颜色？

> ID：12145041
> 
> 赞同：0
> 
> 时间：2012-08-27T15:35:54.160
> 
> 标签：ios, xcode, ios5, xcode4.2, ios6

如何更改 UITableView 组中第一行和最后一行的颜色？

我想与您分享我的解决方案，但我不知道如何，所以我提出了这个问题。对此感到抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T15:39:57.953

在你的`UITableViewDataSource`方法`tableView:cellForRowAtIndexPath:`中做这样的事情，在你的单元格设置好之后：

```
if (indexPath.row == 0 || 
    indexPath.row == [tableView numberOfRowsInSection:indexPath.section] - 1) {
    cell.backgroundColor = [UIColor redColor]; // or anything you want.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T15:38:20.930

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
    [self configureCell:cell atIndexPath:indexPath];

    for (int x = 0; x < [[self.fetchedResultsController sections] count]; x++) {

        id <NSFetchedResultsSectionInfo> sectionInfo = [[self.fetchedResultsController sections] objectAtIndex:x];

        int d = [sectionInfo numberOfObjects];

        if(indexPath.section == x){

            if (indexPath.row == 0 || indexPath.row == d-1) {

                cell.backgroundColor = [UIColor blackColor];

            }else{

                cell.backgroundColor = [UIColor whiteColor];

            }

        }
    }

    return cell;   
} 
```

# windows - 使用批处理搜索特定文件的所有存在

> ID：12145042
> 
> 赞同：0
> 
> 时间：2012-08-27T15:35:57.173
> 
> 标签：windows, scripting, batch-file, cmd

很长一段时间以来，我一直在努力通过这些船员批处理 cmds。

我需要搜索文件（实际上是某些软件的安装文件夹（XYZ）（我知道有一种方法可以在注册表中检查它，但我想要一种简单的方法来检查一些 ABC.cmd 文件；如果存在，请给我路径该文件；

但问题是该文件也存在于各个地方并给了我错误的答案。

有人可以告诉我，它可以在最短的时间内给我所有文件的存在，然后我可以选择我想用批处理脚本选择的文件。

这是我当前的代码，但它给出了它找到的第一个代码，而不是我想要的代码：

```
@echo  off 
FOR /f "Tokens=*" %%i in ('DIR \stDesign.cmd /B /S /a-d') do (set PATH="%%~dpi")
FOR /f "Tokens=*" %%i in ('DIR \stDesign.cmd /od /b /S') do (set URL="%%~dpi") 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T05:39:33.160

好吧，首先`/a-d`并且`/od`不是`dir`. 我相信你的意思是`/a:d`和`/o:d`分别。

除了这些错误之外，您的第一`for`条语句不起作用的原因是因为`DIR \stDesign.cmd /B /S /a:d`正在搜索***目录****称为`stDesign.cmd`，而不是文件。

您的第二个`for`语句是告诉`DIR`按文件的创建日期对文件进行排序，但这仅适用于同一目录内的文件，而不适用于跨目录。这意味着同一目录中的任何匹配文件都将按日期排序，但存在于单独目录中的文件将按`DIR`找到它们的顺序排列。

尝试

```
@echo off
  echo.
  REM Housekeeping: Delete any existing files left-over from previous runs
  if exist "%tmp%\~.tm?" del "%tmp%\~.tm?"

  REM Find the files
  for %%v in (*.bat) do (

    REM Extract Date, Time, Path, File Name, and Extention
    for /f "tokens=1-3* delims=/ " %%w in ("%%~tdpnxv") do ( 

      REM Change the date around so that simply sorting the lines
      REM will order them by date and time.
      echo %%y/%%w/%%x %%z>>%tmp%\~.tmp
    )
  )

  REM Sort (in ascending order) and Display data
  type "%tmp%\~.tmp" | sort

  REM Housekeeping
  del "%tmp%\~.tmp"

echo. 
```

REM 或者，如果您不想显示时间和日期，请将 type 行替换为：

```
@echo off
  echo.
  REM Housekeeping: Delete any existing files left-over from previous runs
  if exist "%tmp%\~.tm?" del "%tmp%\~.tm?"

  REM Find the files
  for %%v in (*.bat) do (

    REM Extract Date, Time, Path, File Name, and Extention
    for /f "tokens=1-3* delims=/ " %%w in ("%%~tdpnxv") do ( 

      REM Change the date around so that simply sorting the lines
      REM will order them by date and time.
      echo %%y/%%w/%%x %%z>>%tmp%\~.tmp
    )
  )

  REM Sort (in ascending order) and save data to ~.tm2
  type "%tmp%\~.tmp" | sort >> "%tmp%\~.tm2"

  REM Extract path and file name only from ~.tm2 and display it
  for /f "tokens=4* usebackq" %%x in ("%tmp%\~.tm2") do echo %%x

  REM Housekeeping
  del "%tmp%\~.tmp"

echo. 
```

第一个示例给出如下输出：

```
1992\01\15 00:12:55 C:\SOMEPATH\FILE0001.EXT
2004\04\17 00:42:17 C:\ANOTHERPATH\FILE0002.EXT
2004\04\17 12:42:17 C:\MISCPATH\RANDOM\FILE0003.EXT
2012\10\15 00:12:55 C:\EXAMPLE\FILE0004.EXT
2012\01\15 00:12:55 C:\FILE0005.EXT 
```

第二个示例仅显示路径和文件名，但仍按日期 + 时间排序。

```
C:\SOMEPATH\FILE0001.EXT
C:\ANOTHERPATH\FILE0002.EXT
C:\MISCPATH\RANDOM\FILE0003.EXT
C:\EXAMPLE\FILE0004.EXT
C:\FILE0005.EXT 
```

要反转排序顺序，请使用 /R 开关和`sort`，如下所示：

```
type tmp.txt | sort /R 
```

*目录和文件夹是一回事。

# javascript - 捕获浏览器网页

> ID：12145052
> 
> 赞同：0
> 
> 时间：2012-08-27T15:36:39.573
> 
> 标签：javascript, html

> **可能重复：**
> [使用 javascript 截取网页的屏幕截图？](https://stackoverflow.com/questions/60455/take-a-screenshot-of-a-webpage-with-javascript)

我通过谷歌和这里搜索，但我无法找到 JavaScript / 机制的确切解决方案来捕获在浏览器中呈现的网页图像 - 比如说我访问网站 - www.google.com 并通过 JS 我应该能够捕获/保存/查看呈现的网页。

我的要求是帮助我们的 QA 自动捕获网页以存储在网页中输入的值

# python - 如何强制颜色映射到大于 matplotlib 中 imshow 的特定输入的动态范围

> ID：12145056
> 
> 赞同：6
> 
> 时间：2012-08-27T15:37:11.010
> 
> 标签：python, heatmap, matplotlib

假设我想制作 2+ 个热图（在相同或不同的数字上）并且它们之间的颜色<->值映射相同。

默认情况下，颜色图中的极值（比如 jet）将分别用于每个热图的动态范围（即每次调用 imshow），我想强制映射相同，即使用全局动态范围。

我认为一个等效的陈述是我想以某种方式指定一个绝对映射，而 imshow 给定 cmap 对象的行为是相对于输入的动态范围的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-03T11:10:08.673

如果您不想指定范围，但不知何故您知道一个图具有最大范围，您可以获取该范围`Axesimage.properties()['clim']`并将其设置为其他图，正如我在此处解释的那样：[Imshow subplots with the same colorbar](https://stackoverflow.com/questions/17989917/imshow-subplots-with-the-same-colorbar/42577178#42577178)

# qt - Qt中的多线程——疑惑和问题

> ID：12145060
> 
> 赞同：1
> 
> 时间：2012-08-27T15:37:25.957
> 
> 标签：qt, qt4

几乎搜索了几个小时，我对多线程概念变得更加困惑，我需要帮助来理解和实现它。经过搜索，我来到了以下实现

**主文件**

```
#include <QtGui/QApplication>
#include "mainwindow.h"
#include <mythread1.h>

int main(int argc, char *argv[])
{
QApplication a(argc, argv);
MainWindow w;
w.show();
mythread abc; 
abc.start();
abc.wait();
return a.exec();
} 
```

上面的代码`mythread.h`是我为多线程创建的头文件，下面是我的 mythread1.h 代码

**mythread1.h**

```
#ifndef MYTHREAD1_H
#define MYTHREAD1_H
#include <QtGui>
#include <windows.h>

class mythread : public QThread
{
public:
    void run();
};

void mythread::run()
{

}

#endif // MYTHREAD_H 
```

现在我的问题是

1.  我只定义了一个函数run()，当线程被初始化时，编译器如何确定它必须执行run() 函数以及当它有多个函数时它会做什么，我得到了这个问题，因为在main.cpp 中我只是输入了abc。开始（）; 并没有指定要执行什么？
2.  在 mythread1.h 和运行函数中，我使用 while(0<1) 创建了一个无限循环并运行了程序，令我惊讶的是，我刚刚看到白屏，CPU 使用率为 100%（不足为奇），但它应该运行同时不干扰主线程对吗？那么为什么会这样呢？
3.  然后我`QFile::copy("pathtomytargetfile","targetpath");`在 mythread1.cpp 中的 run 函数内部使用，但这不起作用：O 并且它没有复制该文件，但是当我将它与主线程中的 Push 按钮连接时，它被成功复制，为什么会这样？
4.  有谁知道实现多线程的更简单方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:28:40.770

首先：run方法应该受到保护！

其次，“我只定义了一个函数run（）”是什么意思。您定义了方法，而不是功能。`abc.start()`意味着 mythread 的 abc 实例将启动并使用它的入口点方法`void run()`。您不能声明多个具有相同签名的方法。如果你想知道它是如何调用你`run()`的，`QThread::run()`那么你需要阅读一些关于 C++ 中虚拟方法的内容

广告。3：我们怎么知道为什么你的文件没有复制？检查 QFile 为您提供的错误。改变你的代码是这样的：

```
QFile f("pathtomytargetfile");
if( ! f.copy("targetpath") )
{
     qDebug() << f.errorString();
} 
```

它将为您提供一些有用的信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T11:49:24.397

我的回答可能会让您更加困惑，但我认为以下链接值得一读：

1.  [这](http://labs.qt.nokia.com/2010/06/17/youre-doing-it-wrong/)是介绍该`QThread`课程的工程师的一篇文章。他为建议继承自是`QThread`要走的路而道歉。
2.  [这篇](http://mayaposch.wordpress.com/2011/11/01/how-to-really-truly-use-qthreads-the-full-explanation/)文章告诉你，你应该怎么做（严格来说——继承自`QThread`也可以，只是在设计方面没有那么好）。
3.  [在此页面上](http://qt-project.org/doc/qt-4.8/thread-basics.html)，您可以找到 Qt 提供的多线程技术的概述，以及一些帮助您决定应该使用哪种技术来解决您的特定问题。

高温高压

# url - 如何添加隐私 URL

> ID：12145064
> 
> 赞同：-1
> 
> 时间：2012-08-27T15:37:35.360
> 
> 标签：url, facebook-graph-api, privacy

在制作应用程序时，您从哪里或如何获得隐私 URL？与使用条款 URL 相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:43:13.507

您在应用仪表板的“应用详细信息”部分中指定隐私/ToU URL。Facebook 不为此提供托管服务，您应该在您的个人/公司应用程序开发网站上创建这些页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:27:17.087

您需要隐私政策和条款和条件并将它们托管在网络上。您基本上可以通过三种方式获取这些文件：

*   自己做
*   聘请律师
*   使用自动服务，如[iubenda](https://www.iubenda.com)，自动生成针对您的 facebook 应用程序优化的隐私政策（以及很快的条款和条件）：[https](https://www.iubenda.com/en/facebook) ://www.iubenda.com/en/facebook （我是该服务的创始人，所以请随时提出任何问题；））

# python - Scrapy - 根据文本选择特定链接

> ID：12145067
> 
> 赞同：11
> 
> 时间：2012-08-27T15:37:48.450
> 
> 标签：python, web-crawler, scrapy

这应该很容易，但我被卡住了。

```
<div class="paginationControl">
  <a href="/en/overview/0-All_manufactures/0-All_models.html?page=2&amp;powerunit=2">Link Text 2</a> | 
  <a href="/en/overview/0-All_manufactures/0-All_models.html?page=3&amp;powerunit=2">Link Text 3</a> | 
  <a href="/en/overview/0-All_manufactures/0-All_models.html?page=4&amp;powerunit=2">Link Text 4</a> | 
  <a href="/en/overview/0-All_manufactures/0-All_models.html?page=5&amp;powerunit=2">Link Text 5</a> |   

<!-- Next page link --> 
  <a href="/en/overview/0-All_manufactures/0-All_models.html?page=2&amp;powerunit=2">Link Text Next ></a>
</div> 
```

我正在尝试使用 Scrapy (Basespider) 根据它的链接文本选择一个链接：

```
nextPage = HtmlXPathSelector(response).select("//div[@class='paginationControl']/a/@href").re("(.+)*?Next") 
```

例如，我想根据它的文本是“Link Text Next”这一事实来选择下一页链接。有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-27T15:44:17.407

使用`a[contains(text(),'Link Text Next')]`：

```
nextPage = HtmlXPathSelector(response).select(
    "//div[@class='paginationControl']/a[contains(text(),'Link Text Next')]/@href") 
```

参考：XPath 上的文档[包含](http://www.w3.org/TR/xpath/#function-contains)函数

* * *

PS。您的文本`Link Text Next`末尾有一个空格。为避免在代码中包含该空格：

```
text()="Link Text Next " 
```

我认为 using`contains`更笼统，但仍然足够具体。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-27T15:46:15.673

您可以使用以下 XPath 表达式：

```
//div[@class='paginationControl']/a[text()="Link Text Next"]/@href 
```

这将选择`href`带有 text 的链接的属性`"Link Text Next"`。

如果您需要更多控制，请参阅[XPath 字符串函数。](http://www.w3.org/TR/xpath/#section-String-Functions)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T15:43:32.503

您的 xpath 选择的是 href 而不是`a`标签中的文本。从您的示例中看，它不像 href 那样包含`next`在其中，因此您无法使用 RE 找到它。

# methods - 方法未实现 PhpMyAdmin

> ID：12145071
> 
> 赞同：1
> 
> 时间：2012-08-27T15:38:09.510
> 
> 标签：methods, phpmyadmin

在 phpmyadmin 中单击记录的编辑按钮时出现此错误

```
Method Not Implemented

GET to /_pma/tbl_change.php not supported.
Additionally, a 404 Not Found error was encountered while trying to use an ErrorDocument to handle the request. 
```

这可能是“mod_security”的问题吗？如果是，什么是“mod_security”，我们该如何解决？

如果不是，什么可能导致这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:33:50.960

尝试在您的服务器上安装最新版本的 phpMyAdmin。如果您通过 XAMPP 运行它，请同时下载它的最新版本。我有同样的问题，这为我解决了。

# android - 背景图像在模拟器中不可见

> ID：12145073
> 
> 赞同：0
> 
> 时间：2012-08-27T15:38:17.357
> 
> 标签：android, jquery-mobile

我使用 jQuery 创建了应用程序，它为内容 div 设置了图像。

该图像在 Safari 中可见，但是当我尝试在 Android 模拟器上运行它时，背景图像不可见...

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-27T15:40:51.947

尝试在 Java 上编写您的 Android 应用程序。

# plone - 在 Plone 中自定义敏捷编辑表单模板？

> ID：12145080
> 
> 赞同：7
> 
> 时间：2012-08-27T15:38:39.773
> 
> 标签：plone, zope, dexterity

我正在开发一个 Plone 插件，该插件需要为 Dexterity 内容重新换肤的备用编辑表单。我需要能够在 AJAX 覆盖中仅显示编辑表单的一部分（使用 JQuery UI，而不是 JQuery 工具，因此在服务器端执行此操作似乎比在 JavaScript 中过滤更合理）**。

[Dexterity Developer's Guide](http://developer.plone.org/reference_manuals/external/plone.app.dexterity/schema-driven-forms/customising-form-presentation/layout-templates.html)中的文档似乎表明我可以使用宏自定义模板。不过，本节缺少一些东西——对于那些不使用 grok 绑定视图的人来说，可能是一些关键的上下文，但也许是别的东西。创建仅模板视图失败（显然无法从视图类中找到名称），并且尝试将 ZCML 中的自定义模板绑定到股票视图类或它的子类都失败（模板被忽略以支持库存模板）。

我的目标：

1.  对此进行编辑，该编辑包含在一个裸模板中，该模板基本上只包含 #content div 中的内容。
2.  我不只想要一个未包装的 z3c.form 渲染，我还需要一个最小的模板来包装它——只是不需要库存的 Plone viewlet 管理器和家具。

什么不起作用：

```
from plone.dexterity.browser.edit import DefaultEditForm
from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile

class MyEditForm(DefaultEditForm):
    index = ViewPageTemplateFile('my_edit_template.pt') 
```

ZCML 等效项（使用运行时魔法定义索引）在这里也不起作用。

如何将自定义模板注入编辑表单？

** 我正在研究 Solgema.fullcalendar 与 plone.app.event 的基于敏捷类型的兼容性。Solgema.fullcalendar 将 jQuery UI 用于弹出窗口，而不是 plone.app.jquerytools 覆盖帮助器；为了保持一致性，拥有这个最小视图而不是试图模仿普通 Plone 覆盖的 JavaScript 中的过滤器机制是有意义的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T16:28:09.047

z3c.form 将模板作为`template`属性查找，因此您需要将自定义模板分配给您`template`的编辑表单子类的属性，而不是`index`（这是模板 ZCML 属性放置的位置）。

```
from plone.dexterity.browser.edit import DefaultEditForm
from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile

class MyEditForm(DefaultEditForm):
    template = ViewPageTemplateFile('my_edit_template.pt') 
```

# java - 如果我多次使用“image=new Image(...)”。我会在内存中收集垃圾吗？

> ID：12145085
> 
> 赞同：0
> 
> 时间：2012-08-27T15:38:53.037
> 
> 标签：java, image, memory-management, garbage-collection, libgdx

我需要在游戏中多次更改“图像”的纹理。

```
 Image image;
 stage1.AddActor(image);
 image = new Image(texture1);
 image = new Image(texture2);
 image = new Image(texture1);
 image = new Image(texture2);
 ... 
```

这是正确的吗？我会在内存中收集垃圾吗？不习惯使用如下几张图片：

```
image1=new Image(texture1);
image2=new Image(texture2);
image1.visible=true;
image2.visible=false;
...
image1.visible=false;
image2.visible=true;
.... 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T15:42:06.657

是的：

```
Image image;
image = new Image(texture1);
image = new Image(texture2); //new Image(texture1) can now be GC'ed 
```

但是请注意，只有在无法访问时才会对它进行垃圾收集。因此，例如，如果您在列表中有引用`new Image(texture1)`，它将阻止垃圾收集器完成其工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T15:41:47.247

```
 Image image;
 image = new Image(texture1);
 image = new Image(texture2);
 image = new Image(texture1);
 image = new Image(texture2); 
```

是更好的方法，因为当您执行 `image = new Image(texture2);`上述实例 时`new Image(texture1);`，假设它无法访问，则符合 GC 条件。

当 GC 发生并且对象将被 GCed 是 JVM 的责任。

# sql-server - NULL 是否占用 SQL Server 2012 上的空间

> ID：12145089
> 
> 赞同：2
> 
> 时间：2012-08-27T15:39:08.170
> 
> 标签：sql-server, sql-server-2012

我已阅读此[答案](https://stackoverflow.com/questions/3731172/how-much-size-null-value-takes-in-sql-server)，并且已确认 NULL 确实占用了 sql server 2005 中的空间。这在 sql server 2012 中是否发生了变化。NULL 是否占用 sql server 2012 中的空间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T15:42:57.920

Still the same.

For fixed width fields like nullable int the storage space required is always the same regardless of whether the value is null or not.

For variable width nullable fields the value `NULL` takes zero bytes of storage space (ignoring the bit to store whether the value is null or not).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T15:42:22.960

It does.

If you don't want it to, declare the column as [`SPARSE`](http://msdn.microsoft.com/en-us/library/cc280604.aspx).

# jquery - 使用 $.extend() 时值更改

> ID：12145090
> 
> 赞同：1
> 
> 时间：2012-08-27T15:39:09.407
> 
> 标签：jquery

我`$.extend()`用来制作数据集的副本。大多数时候它工作正常。但是对于某些特定的数据集。副本将与原始副本不同。

例如，以下是代码。

```
console.log(dataset[key].data)
var dataTemps = $.extend(true, [], dataset[key]);         
console.log(dataTemps.data); 
```

对于第一个 console.log，日志类似于

```
Array[7]=[1,1, null, "academicreport",330, 22, "M.Sc"] 
```

但是对于第二个 console.log，日志是

```
Array[7]=[1,1, null, NaN,330, 22, "M.Sc"] 
```

有谁知道如何将from`$.extend`的值更改为to ？`data[3]``"academicreport"``NaN`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:45:04.783

try:

```
var oldArray = ["mip", "map", "mop"];
var newArray = oldArray.slice(); 
```

for arrays...

the extend is primary used for cloning objects...

# c - 分析 &, && 和 | 这段代码？

> ID：12145096
> 
> 赞同：1
> 
> 时间：2012-08-27T15:39:37.760
> 
> 标签：c, conditional, mips, nios, bit-masks

我想说明这段代码的区别

```
for(i = 32; i > 0; i--)
 {
   if(a&1 != 0) //bit mask
     total += b;
   a = a >> 1;
   b = b << 1; 
 } 
```

在代码中 & 用于“屏蔽”一点，如果使用它，结果将完全不同`&&`。在那种情况下，表达式`1`已被解释为真值 ( `TRUE`)，而不是用于保留其中一位的一位位置。正确的？但是，如果我这样做了，会发生什么：

```
for(i = 32; i > 0; i--)
 {
   if(a|1 != 0) //bit mask
     total += b;
   a = a >> 1;
   b = b << 1; 
 } 
```

在第一种情况下，`1`它用于仅保留 LSB（最低有效位），即最右边的位，没有别的。取而代之的是什么`|`？如果我做这个改变会有什么不同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T15:41:47.233

```
a&1 != 0 
```

应该

```
(a&1) != 0 
```

`!=`的优先级高于`&`。否则 `a&1 != 0`读作`a & (1 != 0)`.

对`(a|1 != 0)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T15:49:31.140

```
(a | 1 ) != 0 
```

永远是真的。它具有返回 a 但设置的最低位显然不是 0 的效果（至少在我见过的任何 C 实现中都没有）。相似地

```
(a || 1) 
```

始终为真，因为 1 在 C 中为真，任何事物或真为真。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T16:03:08.660

在这种情况下，您省略括号`a&1`并不会改变程序的含义。

由于`!=`具有优先权，它将评估`1 != 0`which is`1`和 since`!=0`是一个完全多余的语句，不管你说`if (a OP (1 != 0))`or `if ((a OP 1) != 0)`。

现在，我们可以查看您的第二个陈述并按照您的意图进行解释：`(a | 1) != 0`. 所有位都为零的唯一值`0`是在比较的右侧，但在左侧，您始终有一个至少设置了一个位的值（最右边）。因此这些实际上*永远不会*相等，因此`(a | 1) != 0`与 相同`1`。

因此，不同之处在于`(a & 1)`实际检查是否`a`为奇数并`total`仅在那时`(a | 1)`递增，而`total`在每次迭代中递增，因为条件是重言式。

# ruby-on-rails - 像 facebook 这样的 Rails 中的收件箱消息

> ID：12145099
> 
> 赞同：3
> 
> 时间：2012-08-27T15:39:55.740
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我正在尝试创建一个个人收件箱消息系统，但我想到了几个问题。首先让我解释一下我的系统。

这是我的桌子模型

```
 create_table "inboxmessages", :force => true do |t|
    t.integer  "receiver_id"
    t.integer  "sender_id"
    t.integer  "message_id"
    t.boolean  "isread"
    t.boolean  "isstarred"
    t.datetime "created_at",  :null => false
    t.datetime "updated_at",  :null => false
  end

  create_table "messages", :force => true do |t|
    t.string   "subject"
    t.text     "body"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end 
```

关系将遵循

```
inboxmessages
  belongs_to :message
  belongs_to :user, :class_name => "User", :foreign_key => "sender_id"
  belongs_to :user, :class_name => "User", :foreign_key => "receiver_id"
messages
  has_many :inboxmessages
user
  has_many :inboxmessages 
```

我遇到的问题是我不确定如何创建允许我多个用户的消息。这里是我想要的形式的模式

```
Message.subject
Inboxmessage.receiver # but have multiple different user
------------------------------------------------------------------------
Message.body
Inboxmessage.sender = current_user # hidden field 
```

这是我关于构建此模型/控制器/应用程序的问题

```
1 - Should my new form be in inboxmessages or messages?
2 - Should I use accept_nested_for or should I use nested resources
3 - Is my model/database is okay or not the best?
4 - Are my foreign_key relationship well define? 
```

提前致谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T18:34:07.900

我会做这样的事情：

```
class User
  has_many :mailboxes
  has_many :messages, :through => :tags
  has_many :tags
end

class Message
  has_many :users, :through => :tags
  has_many :mailboxes, :through => :tags
  has_many :tags
end

class Mailbox
  has_many :tags
  has_many :messages, :through => :tags
  has_many :users, :through => tags
end

class Tag
  belongs_to :user
  belongs_to :message
  belongs_to :mailbox
  # this class has "read?", "starred", etc.
end 
```

这使得一条消息可以出现在多个邮箱中，针对多个用户，并且每个用户可以有他/她自己的“阅读？”，“加星标”等。如果你想确保一个用户只有一个，你可以限制逻辑邮件的副本，即邮件不在同一用户的两个或多个邮箱中。

要改进您的架构，请阅读 Rails 指南，尤其是关于以下*关联*的内容：

*   属于
*   has_one
*   有很多
*   has_many：通过
*   inverse_of

另请查看 Rails gem*充当可标记*

*   [http://rubygems.org/gems/acts-as-taggable-on](http://rubygems.org/gems/acts-as-taggable-on)

考虑消息模式的一种方式是“一条消息属于一个邮箱，而一个邮箱有很多消息”（这就是 Yahoo 的做法）。另一种看待邮件的方式是“邮件有很多标签，而邮箱只是按标签搜索”（这就是 Gmail 的做法）。

顺便说一句，Ruby*邮件*gem 非常棒。您可以使用它来创建消息，并查看它如何转换标头，例如 from、to、cc 等。

你问了很好的问题：

*   1 - 我的新表单应该在收件箱消息还是消息中？

    我的观点是，如果你有一个类似于电子邮件的消息模型，一个邮箱（或标签）模型，你将获得最大的好处。要创建新消息，新表单通常位于 ./messages/new.html.erb

*   2 - 我应该使用 accept_nested_for 还是应该使用嵌套资源？

嵌套资源很好；请参阅此处的 Rails 指南：

```
http://guides.rubyonrails.org/routing.html#nested-resources 
```

嵌套属性也很好；在此处查看 API：

一个好的经验法则是只向下嵌套一层，因为之后它变得比它的价值更复杂。

*   3 - 我的模型/数据库是好的还是不是最好的？

不是最好的。现实世界的消息通常会有一个发送者和一个接收者。但是您正在对收件箱消息表中的发送者和接收者进行建模。最好使用 has_many 接收者对消息进行建模，并为用户与消息的交互使用单独的模型，例如一个名为“marks”的表，其中包含“starred”、“isread”等字段。标记属于一条消息并属于一个用户。消息有_many 标记，用户有_many 标记。

*   4 - 我的 foreign_key 关系是否定义良好？

一般来说，是的。请注意，电子邮件非常难以建模。一个好的经验法则是索引你的外键。还要查看 Rails 关联“inverse_of”并使用它；这将有助于提高速度和内存使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T18:46:30.610

我会让我的班级设置这样的东西。

```
class Inbox
  has_many :messages
  belongs_to :user
end

class User
  has_many :messages
  has_one :inbox
end

class Message
  belongs_to :user
  belongs_to :inbox
  has_many recipients, class_name: "User", foreign_key: "recipient_id"
end 
```

# symfony - 如何解决 php app/console generate:doctrine:crud 中的捆绑包

> ID：12145101
> 
> 赞同：3
> 
> 时间：2012-08-27T15:40:05.207
> 
> 标签：symfony, doctrine, crud

在我的 symfony 2 项目中，我有一个捆绑包

```
src/Cinergy/Bundle/PeopleServiceBundle 
```

现在我想基于一个学说实体生成一个 CRUD 控制器，但我总是无法为实体参数输入正确的字符串。

我试过这样的事情：

```
php app/console generate:doctrine:crud --entity=Cinergy/Bundle/PeopleServiceBundle:Group 
```

或者

```
php app/console generate:doctrine:crud --entity=@PeopleServiceBundle:Group 
```

它们都返回错误，例如：

```
[Doctrine\ORM\ORMException]                             
Unknown Entity namespace alias '@PeopleServiceBundle'. 
```

参数的正确语法是`--entity`什么？还是毕竟缺少了什么？

这是目录结构现在的样子：

```
src/Cinergy/Bundle/PeopleServiceBundle/
├── Controller
│   ├── GroupController.php
│   └── PersonController.php
├── DependencyInjection
│   ├── Configuration.php
│   └── PeopleServiceExtension.php
├── PeopleServiceBundle.php
├── Resources
│   ├── config
│   │   ├── routing.yml
│   │   └── services.yml
│   ├── doc
│   │   └── index.rst
│   ├── public
│   │   ├── css
│   │   ├── images
│   │   └── js
│   ├── translations
│   │   └── messages.fr.xliff
│   └── views
│       └── Default
│           └── index.html.twig
└── Tests
    └── Controller
        ├── GroupControllerTest.php
        └── PersonControllerTest.php 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T06:01:48.927

毕竟，我必须先创建实体，然后才能为其创建 CRUD 控制器。当然，这是有道理的。不幸的是，[Sensio Generator Bundle 文档](http://symfony.com/doc/current/bundles/SensioGeneratorBundle/index.html)确实以相反的顺序列出了将我推向错误方向的操作。

这意味着正确的顺序是

1.  [生成新的捆绑骨架](http://symfony.com/doc/current/bundles/SensioGeneratorBundle/commands/generate_bundle.html)
2.  [生成新的 Doctrine 实体存根](http://symfony.com/doc/current/bundles/SensioGeneratorBundle/commands/generate_doctrine_entity.html)
3.  [基于 Doctrine 实体生成 CRUD 控制器](http://symfony.com/doc/current/bundles/SensioGeneratorBundle/commands/generate_doctrine_crud.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T15:49:26.047

首先，您需要将您的捆绑包注册到您的`AppKernel`.

然后只需运行以下命令。
不要放在`@`包名之前

```
php app/console generate:doctrine:crud --entity=PeopleServiceBundle:Group 
```

更多关于[基于 Doctrine 实体生成 CRUD 控制器的信息](http://symfony.com/doc/current/bundles/SensioGeneratorBundle/commands/generate_doctrine_crud.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T15:57:09.983

根据 symfony 文档，您必须使用“作为快捷符号给出的实体名称，其中包含实体所在的包名称和 tvhe 实体的名称”，所以它应该类似于

```
--entity=CinergyPeopleServiceBundle:Group 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-13T09:54:20.747

如果您有多个 Bundle 并且想要使用不同的数据库连接，只需通过添加配置和参数来更新您的 config.yml 和 parameters.yml。

这将解决 CRUD 生成的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-23T19:44:14.137

我搜索了几个小时，直到我发现在我的 app/config/config.yml 中的教义.orm 中我删除`auto_mapping: true`了导致问题的原因。这可能对其他人有用:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-09T16:34:44.770

如果它仍然与某人相关 :) 伙计们，那是因为 DoctrineBundle DoctrineExtension 基于所有已注册的捆绑包编译有效别名列表，其中包含“实体”（或其他配置的）文件夹。

所以为了使用doctrine:generate:crud或generate:doctrine:crud，你必须在你的包中只创建文件夹实体，而不需要先创建实体（如命令所说——这是真的）。

因此，如果您的捆绑包中已经有一些实体，或者您的捆绑包中只有空的实体文件夹，那么您将可以使用它。

# android - SOAP 客户端连接的参数

> ID：12145102
> 
> 赞同：1
> 
> 时间：2012-08-27T15:40:18.587
> 
> 标签：android, web-services, ksoap2

我将 asmx Web 服务用于 android 客户端应用程序。对于下面编写的示例 SOAP 1.1 请求，我需要 soap_action、method_name、命名空间和 url。如何为任何 Web 服务请求提供这些参数？我想了解这些参数的来源。（例如：method_name="GetKullaniciBilgileri" 它来自 body 标签之后）

```
POST /WebSite1/WebService.asmx HTTP/1.1
Host: localhost
Content-Type: text/xml; charset=utf-8
Content-Length: length
SOAPAction: "http://kodmerkezi.net/HelloThere"

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <HelloThere xmlns="http://kodmerkezi.net">
      <name>string</name>
    </HelloThere>
  </soap:Body>
</soap:Envelope> 
```

我将这些服务运行为

```
http://localhost:56053/WebSite1/WebService.asmx?op=HelloThere 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:42:03.147

**命名空间**=`"http://kodmerkezi.net"`

**SOAP_方法**=`"HelloThere"`

**SOAP_Action** =`"http://kodmerkezi.net/HelloThere"`

**网址**=`"http://localhost:56053/WebSite1/WebService.asmx"`

如果您有 WSDL，实际上很容易提取这些字段。

WSDL 中已经提到了 SOAPAction，因此您可以从那里使用它。

SOAPAction = 命名空间 + 方法名

因此，形成 SOAPAction，使用第一部分（带有 http://... 的部分）作为名称空间，第二部分作为 SOAPMethod。

此外， MethodName 出现在`Body`标记之后，然后是命名空间。

```
eg. <soap:Body>
<MethodName xmlns="namespace"> 
```

您可以从这里获取这两个，然后使用 SOAP_Action = Namespace + MethodName 来获取 SOAPAction。

最后，URL 指的是运行服务的*** *.asmx***文件的 URL。

# ruby-on-rails - 我应该在哪里配置 rails gems？

> ID：12145104
> 
> 赞同：1
> 
> 时间：2012-08-27T15:40:33.473
> 
> 标签：ruby-on-rails, gem

例如，我使用 mobylette gem，它的[文档](https://github.com/tscolari/mobylette)说我可以像这样配置它。

```
 mobylette_config do |config|
    config[:fallback_chains] = { mobile: [:mobile, :html] }
    config[:skip_xhr_requests] = false
    config[:mobile_user_agents] = proc { %r{iphone}i }
 end 
```

唯一的问题是，我不知道该把代码放在哪里。我尝试创建新文件 config/initializers/mobylette.rb，但在启动 rails 服务器时没有出现方法“mobylette_config”错误。

那么我应该把这些 gem 配置放在哪里，特别是在这种情况下 mobylette 配置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T15:56:14.080

那将是放置它的常规位置--config/initializers

您还可以通过在初始化程序中放入 logger.debug 来检查它是否正在加载

logger.debug '加载的 mobylette 配置'

您可以通过将配置放在您的 environment.rb 文件中来快速测试是否还有其他问题（这不是我要离开的地方）

这两个都应该给你更多的信息来调试

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-24T07:28:47.373

这也让我把头发拉了出来。但是在github上的源代码中挖掘：

[https://github.com/tscolari/mobylette/blob/master/lib/mobylette/respond_to_mobile_requests.rb](https://github.com/tscolari/mobylette/blob/master/lib/mobylette/respond_to_mobile_requests.rb)

我在评论中发现了这一点：

```
 # Example Usage:
  #
  #   class ApplicationController...
  #     include Mobylette::RespondToMobileRequests
  #     ...
  #     mobylette_config do |config|
  #       config[:fall_back] = :html
  #       config[:skip_xhr_requests] = false
  #       config[:mobile_user_agents] = proc { %r{iphone|android}i }
  #       config[:devices] = {cool_phone: %r{cool\s+phone} }
  #     end
  #     ...
  #   end 
```

# ruby-on-rails - Webrick 不会停止或重启

> ID：12145105
> 
> 赞同：2
> 
> 时间：2012-08-27T15:40:34.623
> 
> 标签：ruby-on-rails, ruby, linux, ruby-on-rails-3

我之前运行的是 Linux Mint 13，刚刚切换到 Fedora 17。由于我已经切换，我无法再停止 Webrick。我使用 Jetbrains Rubymine，并且启动服务器工作正常，但是一旦我点击停止或重新启动，它就会以某种方式从进程中分离出来，并且在我重新启动计算机之前我无法再次使用该端口。我的第一个想法是 Rubymine 有问题，但是当我在控制台中启动服务器时，它的作用完全相同。我点击`ctrl`-`c`停止它（它似乎这样做了），但是一旦我在该端口上再次启动服务器，它就会因为使用重复的地址而失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:07:15.610

我在 Mint 上遇到此错误（如我所见，与您相反）- Ubuntu 机器总是按 CTRL+C 正常退出。无需重启机器的解决方案：杀死 Webrick 进程。通过命令搜索分离的服务器进程的PID，`ps aux | grep rails`然后通过`kill -9 <PID>`

在一行中，您可以在项目目录中运行它：

```
kill -9 `cat tmp/pids/server.pid` 
```

（您也可以将此命令设置为 .bash_profile 中的别名，以便更轻松地使用）

或者没有Webrick进程可以杀死，无论如何？

# html - 防止 PHP 自动解析 XML

> ID：12145107
> 
> 赞同：0
> 
> 时间：2012-08-27T15:40:34.437
> 
> 标签：html, xml

我正在使用如下所示的代码对站点进行 api 调用：

```
 $xmlData = file_get_contents("http://isbndb.com/api/books.xml?access_key=XXXXXX&index1=isbn&value1=0596002068");

 echo $xmlData; 
```

但是 xmlData 在浏览器上显示时会自动解析为 HTML。例如`<title>`，返回的 XML 元素（实际上是书名）被转换为 HTML，本质上成为页面标题，而其他 XML 元素显示为没有标签的纯文本。我希望客户端`XMLHttpRequest`对象从服务器端获取原始 XML 数据。

为什么会发生这种情况，如何确保不会自动解析 XML？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T15:44:52.983

PHP just sees it as text. For instance, do `echo "<b>Bold</b>";` and it will "automatically" be in bold. It is the browser that processes the HTML and renders it.

This is what [`htmlspecialchars`](http://php.net/htmlspecialchars) is for.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T15:43:34.940

This got nothing to do with php. you spit out elements which browser interprets as HTML (that's why it sets title). Build your html page right, use `<pre>` tags around your content, or. when needed, send your content with correct content-type header (like `text/plain` to display your xml for viewing or `text/xml` for other purposes) so it will not parse your data as html.

# objective-c - 用厚度翻转 UIView（如 iBooks）

> ID：12145108
> 
> 赞同：2
> 
> 时间：2012-08-27T15:40:44.140
> 
> 标签：objective-c, ios

我正在制作一个反向克隆，并在我翻转按钮时尝试增加一些厚度（如 iBook 过渡视图）。

现在，我使用这段代码来翻转板上的按钮：

```
[UIView transitionFromView:whiteView toView:blackView duration:0.5f options:UIViewAnimationOptionTransitionFlipFromRight
 completion:^(BOOL finished){}]; 
```

我在 github 上找到了一个实现了这个的项目，但是我无法让它与添加到主 viewController 的子视图一起工作。

您如何添加过渡以仅翻转视图，而不是过渡到新的 viewController？

提前致谢

[https://github.com/epatel/EPGLTransitionView](https://github.com/epatel/EPGLTransitionView)

# java - 如何制作（静态）初始化程序块strictfp？

> ID：12145114
> 
> 赞同：6
> 
> 时间：2012-08-27T15:40:56.377
> 
> 标签：java, scope, declaration, strictfp

在重构一些代码时，我偶然发现了这种奇怪现象。在不影响整个类的情况下控制初始化器的 strictfp 属性似乎是不可能的。例子：

```
public class MyClass {

    public final static float[] TABLE;
    strictfp static { // this obviously doesn't compile
         TABLE = new float[...];
         // initialize table
    }

    public static float[] myMethod(float[] args) {
         // do something with table and args
         // note this methods should *not* be strictfp
    }

} 
```

从[JLS 的第 8.1.1.3 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.1.1.3)中，我收集到*如果*将使用 strictfp 修饰符声明类，则初始化程序将是 strictfp。但它也说它使所有方法都*隐式地*严格执行：

> strictfp 修饰符的作用是使类声明中的所有浮点或双精度表达式（包括变量初始化器、实例初始化器、静态初始化器和构造器中）显式地为 FP-strict（第 15.4 节）。
> 
> 这意味着类中声明的所有方法，以及类中声明的所有嵌套类型，都是隐式的 strictfp。

那么，静态初始化器不接受修饰符，当应用于整个类时，一切都变成了strictfp？既然没有strictfp关键字的对立面，这不可能实现吧？

那么，我是否搞砸了使用静态方法来保持初始化块的主体以实现对严格控制的精确控制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T17:47:06.713

使用以下要求：

*   初始化代码被调用一次，
*   该`MyClass.myMethod`方法是非严格的浮点数，
*   类 API 没有“乱七八糟”的方法，
*   并且初始化代码*是*严格的浮点数

...这就足够了：

```
class MyClass {
  //1) initialized/called once
  public final static float[] TABLE = MyClassInitializer.buildSomething();

  public static float[] myMethod(float[] args) {
    //2) non-strict
  }
}

//3) doesn't "pollute" the MyClass API
class MyClassInitializer {
  strictfp [static] float[] buildSomething() { //4) strictfp here or on the class
    //TODO: return something
  }
} 
```

如果您将类的静态成员视为**单独的单例对象中的对象**，那么上面的示例看起来很自然。[我认为这与单一职责原则](http://c2.com/cgi/wiki?SingleResponsibilityPrinciple)非常吻合。

# c# - 在自定义 RegularExpressionAttribute 中，构造函数在第一次之后没有调用

> ID：12145117
> 
> 赞同：3
> 
> 时间：2012-08-27T15:41:00.677
> 
> 标签：c#, asp.net-mvc-3, c#-4.0, localization, custom-attributes

`RegularExpressionAttribute`我们为我们的 MVC3 应用程序编写了一个自定义。定制的目的`RegularExpressionAttribute`是，我们想用关键字替换资源文件消息中的标记。例如“字段 __ 有一些无效字符”。

所以我们想用关键字替换`_`token 。`Address`

```
ResourceManager(_resourceManagerType.FullName, 
System.Reflection.Assembly.Load(AssemblyNames.TRUETRAC_RESOURCES)).GetString(_errorMessageResourceName).Replace("_","Address"); 
```

自定义属性如下，

```
public class CustomRegularExpressionAttribute : RegularExpressionAttribute
{
    string _errorMessageResourceName;
    Type _resourceManagerType;

    public CustomRegularExpressionAttribute(string _pattern, string fieldName, string errorMessageResourceName, Type resourceManagerType)
        : base(_pattern)
    {
        _errorMessageResourceName = errorMessageResourceName;
        _resourceManagerType = resourceManagerType;

        this.ErrorMessage = FormatErrorMessage(fieldName);
    }
    public override string FormatErrorMessage(string fieldName)
    {
        return //Resources.en_MessageResource.ResourceManager.GetString(fieldName);
        new ResourceManager(_resourceManagerType.FullName, System.Reflection.Assembly.Load(AssemblyNames.TRUETRAC_RESOURCES)).GetString(_errorMessageResourceName).Replace("__", fieldName);    
    }
}

public class CustomRegularExpressionValidator : DataAnnotationsModelValidator<CustomRegularExpressionAttribute>
{
    private readonly string _message;
    private readonly string _pattern;

    public CustomRegularExpressionValidator(ModelMetadata metadata, ControllerContext context, CustomRegularExpressionAttribute attribute)
        : base(metadata, context, attribute)
    {
        _pattern = attribute.Pattern;
        _message = attribute.ErrorMessage;
    }

    public override IEnumerable<ModelClientValidationRule> GetClientValidationRules()
    {
        var rule = new ModelClientValidationRule
        {
            ErrorMessage = _message,
            ValidationType = "regex"
        };

        rule.ValidationParameters.Add("pattern", _pattern);

        return new[] { rule };
    }
} 
```

然后我们在 Global.aspx Application_Start 事件中注册这个属性。

```
void Application_Start(object sender, EventArgs e)
    {

        AreaRegistration.RegisterAllAreas();

        // Register CustomRegularExpressionValidator
        DataAnnotationsModelValidatorProvider.RegisterAdapter(typeof(CustomRegularExpressionAttribute), typeof(CustomRegularExpressionValidator));

        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);
    } 
```

并应用于我们的模型属性，如下所示：

```
[CustomRegularExpression(RegularExpression.Alphanumeric, "Address", "CV_Address", typeof(Resources.en_MessageResource))]
    public string Address { get; set; } 
```

问题是我们在应用程序中实现本地化，而构造函数`CustomRegularExpressionAttribute`只调用一次。就像如果应用程序的启动文化是英语，然后我们将应用程序的文化更改为西班牙语，但消息`CustomRegularExpressionAttribute`仍然显示为英文，因为构造函数`CustomRegularExpressionAttribute`只调用了一次，并且它已被调用为英文消息。

任何人都可以告诉为什么是这个问题？为什么构造函数`CustomRegularExpressionAttribute`不调用每个请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:25:04.670

该方法`Application_Start`仅在**应用程序****启动**时调用一次。此外，属性被编译，因此它们可以在运行时读取（通过反射或元数据），但不能更改。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-03T14:46:46.807

在自定义验证属性的构造函数中初始化 ErrorMessage 属性时，我遇到了同样的问题。

我的解决方案是覆盖该`IsValid`方法。就打电话`base.IsValid`到这里。如果此方法有效，则此方法返回 null，否则它将返回`ValidationResult`您可以设置`ErrorMessage`属性的位置。

```
 public class RequiredAttribute : System.ComponentModel.DataAnnotations.RequiredAttribute
{    
            public RequiredAttribute()
            {
            }

            protected override ValidationResult IsValid(object value, ValidationContext validationContext)
                    {
                        string displayName = validationContext.DisplayName;
                        ValidationResult result = base.IsValid(value, validationContext);
                        if (result != null)
                            result.ErrorMessage = string.Format(GetTranslatation("RequiredField"), displayName);
                        return result;
                    }
            }
    } 
```

由于`IsValid`始终在验证期间执行，它将始终以当前语言返回消息。**

# image-processing - HOG 三线性插值代码参考

> ID：12145122
> 
> 赞同：1
> 
> 时间：2012-08-27T15:41:17.937
> 
> 标签：image-processing, machine-learning, computer-vision

我正在寻找使用三线性插值来平滑直方图的定向梯度直方图的代码/论文参考。

你能给我一些关于参考/代码的建议吗？

# ruby-on-rails - 模型关系和批量删除

> ID：12145124
> 
> 赞同：0
> 
> 时间：2012-08-27T15:41:36.877
> 
> 标签：ruby-on-rails, models

我有一个依赖=>destroy 的模型关系，在触发销毁时必须执行 50K+ 删除。查看控制台，rails 正在尝试对每一行使用 ID 进行显式删除，这需要一段时间。有没有办法让我强制 Rails 进行批量删除？或者，我可以删除模型依赖项，有没有办法从代码中进行这种批量删除？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:52:48.670

您应该能够设置依赖：delete_all

如果你不能让它工作，你可能想在你自己的回调中使用 delete_all。

需要明确的是，delete_all 应该生成一个语句来删除所有子对象

# c - 以下代码如何运行？

> ID：12145130
> 
> 赞同：-2
> 
> 时间：2012-08-27T15:41:54.160
> 
> 标签：c, algorithm

以下代码返回字符串 s1 中出现字符串 s2 中的任何字符的第一个位置。它最差的时间复杂度是 O(m+n)。如何？

```
#include<stdio.h> 

int any(char *s1, char *s2) 
{

    char array[256]; 

    int  i;
    if (s1 == NULL) {
        if (s2 == NULL) {
            return(0);
        } else {
            return(-1);
        }
    }

    for(i = 0; i < 256; i++) {
        array[i] = 0;
    }

    while(*s2 != '\0') {
        array[*s2] = 1;
        s2++;
    }

    i = 0;
    while(s1[i] != '\0') {
        if (array[s1[i]] == 1) {
            return(i);
        }
        i++;
    }
    return(-1);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T15:51:32.103

它分两步完成。

1.  它初始化一个大小为 256 的数组（表示其输入字符串的每个有效字符），并且对于 s2 ( **n** ) 中的每个字母，将数组中的字符标记为 1 以指示该字符存在。

2.  它遍历 s1 中的字符（0 到**m**），检查数组中每个字符的位置以查看它是否设置为“present”（1），这表明它在第二个字符串中。如果是，则返回该字符在 s1 中的索引。如果 s2 中不存在 s1 中的任何字符（在**m**处发现），则返回 -1。

由于步骤 1 将始终占用**n**（s2 的长度），而步骤 2 将占用**m**（s1 的长度），因此最坏的情况是 O(m+n)，仅当没有匹配项时才会发生，或者只有 s1 中的最后一个字符出现在 s2 中。

# java - Dynamic Table Creation in Java with No DB link

> ID：12145133
> 
> 赞同：0
> 
> 时间：2012-08-27T15:42:00.280
> 
> 标签：java, database, dynamic, creation

In my Java application I want to create a table whose data field will be updated dynamically. The table is not linked with any database. The tables' data fields are ArrayList or List type data so I want to update the fields when they are changing. I was looking into the jtable but was unable to find the way to do that. Anyone knows the solution is highly appreciated..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:57:38.877

我认为您应该执行以下操作

*   为每个表创建一个类
*   创建动态字段实现一个映射，该映射将字段的名称存储为键，并将其值存储为映射的值
*   为每一行创建一个对象并将它们存储在列表中（如果您想进行索引，则可以映射）
*   实现搜索功能
*   在需要时更新它。

Jtable 是 UI 的组件，您可以轻松使用它，如果显示数据有问题，随时欢迎您询问。

# android - 广播接收器监听文本选择

> ID：12145139
> 
> 赞同：2
> 
> 时间：2012-08-27T15:42:25.030
> 
> 标签：android, broadcastreceiver, intentfilter

是否可以定义一个广播接收器来侦听在任何应用程序上进行的文本选择

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T16:33:34.753

文本选择不会产生广播意图，因此您尝试做的事情是不可能的。

如果您希望为特定应用程序提供外部功能，则可以联系开发人员并要求他们明确广播您可以接收和响应的意图。

希望有帮助..

# ruby-on-rails-3 - 为 Devise 的用户模型定义 FactoryGirl 失败

> ID：12145144
> 
> 赞同：6
> 
> 时间：2012-08-27T15:42:44.550
> 
> 标签：ruby-on-rails-3, rspec, factory-bot

我花了过去两个小时找出问题所在，但在任何地方都找不到答案。

这是我的第一个 Rails 应用程序（Hartl 的教程除外），所以解决方案可能很简单。我正在使用 Devise 来管理我的用户，到目前为止一切都很好。

试图测试用户模型，我定义了一个这样的工厂：

```
FactoryGirl.define do
  factory :user do
    email "g@g.com"
    password "123123"
    password_confirmation { "123123" }
  end
end 
```

测试是：

```
describe User do
#  pending "add some examples to (or delete) #{__FILE__}"

    @user = FactoryGirl.create(:user) 

    subject(:user)

    it { should respond_to(:email) }
    it { should respond_to(:password) }

    it { should be_valid }
end 
```

但最后一行（ it { should be_valid } ）未通过测试。

我已经打印了 user/@user 的值（都试过了），结果为零。 **编辑：这不是零。它的**

```
#<User id: 13, email: "email1@factory.com", encrypted_password: "$2a$04$.lWs6yadJu/Ya67xi.W1F.fd6sWLGkzc/59.lgTi0sA7...", reset_password_token: nil, reset_password_sent_at: nil, remember_created_at: nil, sign_in_count: 0, current_sign_in_at: nil, last_sign_in_at: nil, current_sign_in_ip: nil, last_sign_in_ip: nil, created_at: "2012-08-27 15:48:23", updated_at: "2012-08-27 15:48:23">

class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me
  # attr_accessible :title, :body

  validates :email, :presence => true
  validates :password, :presence => true
end 
```

什么是我看不见的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T16:35:30.693

好的，我终于找到了问题所在。事实证明，当您对 User 模型进行更改时，您必须重新启动“spork”，因为它会预加载它。

# javascript - How can I display more then one video in an HTML5 page?

> ID：12145147
> 
> 赞同：1
> 
> 时间：2012-08-27T15:43:01.167
> 
> 标签：javascript, html, video

I need to change the location of an HTML5 video tag in a web page. By changing the location I mean passing the tag to another place in the DOM tree.

If I use the JQuery clone function like

> $("#first").clone().appendTo("#second");

The video will start from the beggining and it will have to load again.

Is it possible to change the location of a media element like the video element to another part of the tree without having to load the video or audio again? Or at least, is it possible to have more then one player displaying the same video at the same time in a page?

# android-linearlayout - When LinearLayout is selected are his child too?

> ID：12145149
> 
> 赞同：0
> 
> 时间：2012-08-27T15:43:11.783
> 
> 标签：android-linearlayout, state

当一个 LinearLayout 状态更改为 selected = "true" 时，他的孩子的状态是否也更改为 selected = "true" ？

感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:52:22.620

不，孩子仍然未被选中。如果您提供一些代码，我会改进我的答案...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T18:40:31.293

用于它的孩子：

在xml中

```
anroid:duplicateParentState="true" 
```

或者在java中

```
setDuplicateParentState(true); 
```

# c# - 许多并发异步调用的客户端中的随机 TimeoutException

> ID：12145151
> 
> 赞同：1
> 
> 时间：2012-08-27T15:43:14.797
> 
> 标签：c#, wcf, soap, asynchronous

我有一个 TimeoutException 问题，我正在使用 C# 4.0（不能很快升级到 4.5）和 WCF。请注意，我不控制服务器，也看不到所使用的代码和/或技术。问题发生在不同人制作的不同服务器上。

我向多台服务器（比如说 10 台）发送尽可能多的请求，每台服务器随时发送一个请求。它们每秒发出 2 到 30 个请求。在 30 秒到 5 分钟之间，我会得到一些 TimeoutException ：

```
exception   {"The HTTP request to 'http://xx.xx.xx.xx/service/test_service' has exceeded the allotted timeout of 00:02:10\. The time allotted to this operation may have been a portion of a longer timeout."}   System.Exception {System.TimeoutException}.

Stack Trace :
Server stack trace: 
   at System.Runtime.AsyncResult.End[TAsyncResult](IAsyncResult result)
   at System.ServiceModel.Channels.ServiceChannel.SendAsyncResult.End(SendAsyncResult     result)
   at System.ServiceModel.Channels.ServiceChannel.EndCall(String action, Object[] outs, IAsyncResult result)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeEndService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]: 
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg,  IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at Device.EndTest(IAsyncResult result)
   at DeviceClient.EndTest(IAsyncResult result) in ...
   at TestAsync(IAsyncResult ar) in ... 
```

内部异常是：

```
[System.Net.WebException]   {"The request was aborted: The request was canceled."}  System.Net.WebException
at System.Net.HttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelAsyncRequest.CompleteGetResponse(IAsyncResult result) 
```

Wireshark 告诉我，我什至没有打开连接（没有 SYN）。所以这应该是客户端的问题。我在 TCPView 中有很多 TIME_WAIT 连接

使用同步调用有效，但不可能。

请注意，在以下代码示例中，每个服务器都有一个方法调用。（在我的情况下，10 个并发 TestAsync）

（在实际项目中，我们使用 CCR 代替 Semaphore，结果相同）

```
private void AsyncTest()
{   
    //GetServiceObject Will add custom bindings and more..
    Client client = ClientBuilder.GetServiceObject();

    while (true)
    {
         Semaphore semaphore = new Semaphore(0,1);
         client.BeginTest(BeginTestCallback, new AsyncState
         {
             Client = client,
             Semaphore = semaphore
         });

         semaphore.WaitOne();   
    }   
 }

private void BeginTestCallback(IAsyncResult asyncResult)
{
    try
    {
        AsyncState state = asyncResult.AsyncState as AsyncState;

        Client client = state.Client;
        Semaphore semaphore = state.Semaphore;

        Client.EndTest(asyncResult);    

        semaphore.Release();
    }
    catch (Exception e)
    {
        //Will catch the exception here because of Client.EndTest(asyncResult)
        Debug.Assert(false, e.Message);
    }
} 
```

我试过了

```
ServicePointManager.DefaultConnectionLimit = 200;
ServicePointManager.MaxServicePointIdleTime = 2000; 
```

正如一些帖子所建议的那样，没有成功。

即使我设置了非常高的打开、发送、接收和关闭超时，它也会出现同样的异常。WCF 似乎在发送请求时“卡住”了。服务器继续正确响应其他请求。

有什么想法吗？

另外，如果我这样做（回调中的 BeginTest 而不是 while(true)），它永远不会出现异常？！？！

```
private void AsyncTest()
{
    //GetServiceObject Will add custom bindings and more..
    Client client = ClientBuilder.GetServiceObject();
    try
    {
        client.BeginTest(BeginTestCallback, new AsyncState
        {
            Client  = client            
        });
    }
    catch (Exception e)
    {
        Debug.Assert(false, e.Message);
    }
}

private void BeginTestCallback(IAsyncResult asyncResult)
{
    try
    {
        AsyncState state = asyncResult.AsyncState as AsyncState;        

        state.Client.EndTest(asyncResult);

        state.Client.BeginTest(BeginTestCallback, state);
    }
    catch (Exception e)
    {
        //No Exception here
        Debug.Assert(false, e.Message);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:22:09.473

经过更多的测试，我发现如果开始/结束机制不在同一个线程池上执行，它会随机做这个行为。

在第一种情况下，“AsyncTest”是在具有 ThreadStart 和 Thread 的新线程中生成的。在第二种情况下，仅在专用线程上调用第一个“开始”，并且由于问题是随机发生的，因此在第一次请求时发生异常的可能性很小。另一个“开始”是在 .net ThreadPool 上进行的。

通过在第一种情况下使用 Task.Factory.StartNew(() => AsyncTest())，问题就消失了。

在我的真实项目中，我仍然使用 CCR（和 CCR 线程池）来做所有事情，直到我必须调用开始/结束。我将使用 .net 线程池，现在一切正常。

任何人都可以更好地解释为什么 WCF 不喜欢在另一个线程池上被调用？

# php - Stop PHP with ajax

> ID：12145152
> 
> 赞同：1
> 
> 时间：2012-08-27T15:43:15.387
> 
> 标签：php, javascript, html, ajax

I have a JavaScript functions which calls a PHP function through AJAX. The PHP function has a `set_time_limit(0)` for its purposes. Is there any way to stop that function when I want, for example with an HTML button event?

* * *

I want to explain better the situation: I have a php file which uses a stream_copy_to_stream($src, $dest) php function to retrieve a stream in my local network. The function has to work until I want: I can stop it at the end of the stream or when I want. So I can use a button to start and a button to stop. The problem is the new instance created by the ajax call, in fact I can't work on it because it is not the function that is recording but it is another instance. I tried MireSVK's suggest but it doesn't worked!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:47:34.370

取决于功能。如果是每次都检查某个条件的while循环，那么您可以添加一个可从脚本外部修改的条件（例如，使其检查文件，并根据需要创建/删除该文件）

然而，这看起来是个坏主意。你为什么要这样做？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T15:54:48.887

```
var running = true;

function doSomething(){

       //do something........
}

setInterval(function(){if(running){doSomething()}},2000); ///this runs do something every 2 seconds 
```

在按钮上单击只需设置`running = false`；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T16:03:00.920

您的代码如下所示：

```
set_time_limit(0);

while(true==true){//infinite loop

 doSomething(); //your code

} 
```

让我们升级它

```
set_time_limit(0);

session_start();
$_SESSION['do_a_loop'] = true;

function should_i_stop_loop(){

   @session_start(); 

   if( $_SESSION['do_a_loop'] == false ) {

    //let's stop a loop
    exit();

   }

   session_write_close(); 

}

while(true==true){

 doSomething();

 should_i_stop_loop(); //your new function

} 
```

创建新文件 stopit.php

```
session_start();
$_SESSION['do_a_loop'] = false; 
```

您现在要做的就是在 stopit.php 文件上创建一个请求（使用 ajax 或其他东西）

根据您的需要编辑代码，这是重点。众多解决方案之一。

*对不起我的英语不好*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T16:08:40.290

可悲的是，这是不可能的（有点）。

每次您对 PHP 脚本进行 AJAX 调用时，该脚本都会生成一个自身的新实例。因此，您发送给它的任何内容都将被发送到新操作，而不是您之前启动的操作。

有许多解决方法。

*   在 AJAX 中使用 readystate 3 创建到 PHP 脚本的非关闭连接，但是跨浏览器不支持该连接，并且可能在 IE 中不起作用（不确定 IE 10）。

*   研究 PHP 中的套接字编程，它允许您使用一个实例创建一个脚本，您可以多次连接。

*   让 PHP 检查第三方。IE 有一个脚本在循环中运行，检查文件或数据库，然后连接到另一个脚本来修改该文件或数据库。原始脚本可以通过您写入文件/数据库的内容进行远程控制。

*   尝试另一种编程语言（这是一个愚蠢的选择，但我是节点的粉丝）。Node.js 非常非常容易地做到这一点。

# android - 预蜂窝上带有分隔线的 LinearLayout

> ID：12145153
> 
> 赞同：5
> 
> 时间：2012-08-27T15:43:16.330
> 
> 标签：android, android-layout, android-linearlayout, android-support-library, android-compatibility

从 API 级别 11开始[`setDividerDrawable()`](http://developer.android.com/reference/android/widget/LinearLayout.html#setShowDividers%28int%29)并[`setShowDividers()`](http://developer.android.com/reference/android/widget/LinearLayout.html#setDividerDrawable%28android.graphics.drawable.Drawable%29)在 上引入[`LinearLayout`](http://developer.android.com/reference/android/widget/LinearLayout.html)，使线性布局能够显示子元素之间的分隔线。我真的很想使用此功能，但我也针对 Honeycomb 之前的设备（API 级别 < 11）。

解决此问题的一种方法是扩展 LinearLayout 并手动添加分隔线。这是一个原型：

```
import android.content.Context;
import android.util.AttributeSet;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.LinearLayout;

public class DividerLinearLayout extends LinearLayout
{
    public DividerLinearLayout(Context context)
    {
        super(context);
    }

    public DividerLinearLayout(Context context, AttributeSet attrs)
    {
        super(context, attrs);
    }

    public DividerLinearLayout(Context context, AttributeSet attrs, int defStyle)
    {
        super(context, attrs, defStyle);
    }

    @Override
    public void addView(View child)
    {
        if(super.getChildCount() > 0)
        {
            super.addView(LayoutInflater.from(getContext()).inflate(R.layout.divider, null));
        }
        super.addView(child);
    }
} 
```

然而，使用这样的实现将改变任何客户端迭代子节点的行为。有些视图是客户自己插入的，有些是由`DividerLinearLayout`. 如果用户在指定索引处插入视图，也会出现问题。可以实现索引的转换，但是如果做错了，这可能会导致严重的错误。另外，我认为需要覆盖更多的方法。

有没有更好的方法来解决这个问题？是否有人已经开发出可免费使用的`DividerLinearLayout`等价物？它似乎不存在于 Android 的兼容性库中。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T16:07:03.443

如果我没记错的话，ActionBarSherlock 库已经实现了这一点，以提供向后兼容的 ActionBar 选项卡。您可能希望首先包含该库并在滚动您自己的之前试一试。

这是特定类[的代码](https://github.com/JakeWharton/ActionBarSherlock/blob/master/actionbarsherlock/src/com/actionbarsherlock/internal/widget/IcsLinearLayout.java)(com.actionbarsherlock.internal.widget.IcsLinearLayout)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-21T10:23:44.710

IcsLinearLayout 是内部的，由于 ActionBarSherlock 将不再更新，因此建议使用 Google 的一种，称为“LinearLayoutICS”。

[**在这里**](https://stackoverflow.com/questions/22547897/how-to-add-dividers-to-linearlayoutics/)阅读如何使用它。

# java - Emailing STDERR and a file after a Java program has run

> ID：12145154
> 
> 赞同：0
> 
> 时间：2012-08-27T15:43:18.500
> 
> 标签：java, email, command-line

I needed to create a daily (automatic) email with information about a service I am using. I wrote a Java program that gathers information from that service and puts it into a `.xls` file. This Java program also prints diagnostic information to `STDERR`.

I would like to email the `.xls` file as an attachment and have the diagnostic information in the email body. How can I get this information in the email through the command-line?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T15:50:13.680

`mail`/`mailx`不支持附件。如果您需要附件，请安装`mutt`：

```
mutt -s Subject -a file send@to 
```

但它只能附加一个文件。一种解决方法是`stderr`作为邮件正文发送：

```
mutt -s Subject -a info.xls send@to < logfile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T15:45:32.133

如果你在 Unix 上，你可以检查 ff 命令行实用程序：

1.  邮件
2.  邮箱

这些实用程序需要 SMTP 服务器来实际传递消息

更多信息（带附件发送）在这里：

[http://www.cyberciti.biz/faq/howto-unix-sending-files-as-mail-attachments/](http://www.cyberciti.biz/faq/howto-unix-sending-files-as-mail-attachments/)

# c++ - 使用函数调用初始化静态全局数据（在编译时）

> ID：12145158
> 
> 赞同：4
> 
> 时间：2012-08-27T15:43:33.203
> 
> 标签：c++, performance, static

我试图通过在编译时计算数字序列并将它们存储为静态向量来节省计算时间（但我现在可能会在运行时开始计算一次）。我正在尝试做的一个简单（非编译）示例是：

```
#include <vector>
using namespace std;

static vector<vector<int> > STATIC_THING(4, vector<int>(4));

void Generator(int x, int y, vector<int> *output) {
  // Heavy computing goes here
  for(int i=0; i < 4; ++i)
    (*output)[i] = x * y;
  return;
}   
static void FillThings() {
  for(int x=0; x < 4; ++x)
    for(int y=0; y < 4; ++y)
      Generator(x, y, &STATIC_THING[x]);
}   
FillThings();

int main() {
} 
```

除了将我的序列预计算和硬编码到数组中以使编译器对此进行提升之外，还有其他方法吗？我觉得应该有一种方法至少可以在头文件的第一个#include 上完成这项工作，但我只看到它与类一起完成。如果它有助于在编译时进行计算，我可以使用数组而不是向量。

**编辑：**

*   尽管有人建议使用模板元编程，但我的实际生成器算法过于复杂，无法使用这种技术。

*   使用查找表似乎是我唯一可以避免运行时计算的其他选择；如果将来性能仍然是一个问题，我将依靠这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T15:58:38.160

做这个：

```
static int FillThings() {
  for(int x=0; x < 4; ++x)
    for(int y=0; y < 4; ++y)
     Generator(x, y, &STATIC_THING[x]);
  return 9087;
}   
static int q = FillThings(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T16:03:25.517

如果您无法通过大括号初始化程序从实际文字进行初始化，那么您可以执行以下操作：

```
typename std::vector<std::vector<int>> my_vector;

static my_vector make_static_data()
{
    my_vector result;
    // ... populate ...
    return result;
}

static const my_vector static_data = make_static_data(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T16:08:53.207

没那么容易：std::vector 是一个动态结构。它不是“可填充的”和“编译时间”。它可以在启动时通过使用调用函数或 lambda 的返回来初始化静态变量来填充，该函数实际上填充了向量。

[这](https://stackoverflow.com/a/12145366/924727)可以是一种方式。

但是一个适当的“编译时向量”应该看起来像一个模板，它的“索引”是一个作为参数给出的 int，比如

```
template<unsigned idx>
struct THING
{
    static const int value = .... //put a costant expression here
}; 
```

用作`THING<n>::value`.

“常量表达式”可以是 a `function(THING<idx-1>::value)`，递归到专门的

```
temnplate<>
struct THING<0U> {}; 
```

这会停止编译器递归。

但是，有一些限制：定义`value`静态成员的表达式必须是 constexpr（因此，只有整数类型、内置操作和 no `<cmath>`，并且只有用 constexpr 声明的函数），并且使用的值`idx`本身必须是 a常数（不是变量）。

# extjs - EXTJS4 Gridpanel- How to focus/highlight a particular row?

> ID：12145160
> 
> 赞同：2
> 
> 时间：2012-08-27T15:43:35.283
> 
> 标签：extjs, extjs4, extjs4.1

I am working on a GridPanel. I just want to focus a particular row based on the value it has(maximum value) How do I achieve this. I haven't found any method in the EXT4.1 documentation.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T16:44:47.727

你需要看看`Ext.grid.View`你的方法。有一种`focusRow`方法可以将商店记录作为参数。听起来与您正在寻找的完全一样。但是，这不会对行应用任何特殊的 CSS；它只会将其滚动到视图中。您可以使用`highlightItem`或`addRowCls`更改行的外观。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T06:43:07.410

这可以通过每列的渲染器属性来控制。为每种类型的渲染器定义一个函数。然后在 Ext.grid.Panel 的每个列定义中调用该函数。因此，在您的情况下，将渲染器应用于每一列。也许改变背景颜色或做一些独特的事情。这将涵盖条件值问题。对于行选择，请查看此链接。

[http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/grid/array-grid.html](http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/grid/array-grid.html)

```
function pctChange(val) {
    if (val > 0) {
        return '<span style="color:green;">' + val + '%</span>';
    } else if (val < 0) {
        return '<span style="color:red;">' + val + '%</span>';
    }
    return val;
}

    columns: [
        {
            text     : '% Change',
            width    : 75,
            sortable : true,
            renderer : pctChange,
            dataIndex: 'pctChange'
        }, 
```

# c++ - 在 QDir::entryInfoList 中使用多个条件进行排序

> ID：12145165
> 
> 赞同：1
> 
> 时间：2012-08-27T15:44:25.327
> 
> 标签：c++, sorting, qt4, qdir

[Qt 的文档](http://qt-project.org/doc/qt-4.8/qdir.html#SortFlag-enum)说`QDir::entryInfoList`可以接受多个排序条件，但我不清楚该怎么做。

```
This enum describes the sort options available to QDir, e.g. for entryList() and entryInfoList(). 
The sort value is specified by OR-ing together values from the following list: 

QDir::Name  0x00    Sort by name.
QDir::Time  0x01    Sort by time (modification time).
:
(snip) 
```

我认为`OR-ing`需要以某种方式完成，暂时想不出怎么做（我认为必须回去审查位移？）但是有人可以告诉我怎么做吗？欣赏它。

（无论如何，这个描述作为高级语言的文档不清楚吗？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T16:32:14.097

`QDir::SortFlags`实际上是一种 typedef `QFlags<QDir::SortFlag>`，类型安全的方式来存储枚举值的 OR 组合。

所以你所做的只是`QDir::Name | QDir::Time`在你的情况下作为`QDir::entryInfoList()`方法的参数。

# java - 当你在 Java 中使用 Frame 或 JFrame 时？

> ID：12145166
> 
> 赞同：7
> 
> 时间：2012-08-27T15:44:29.310
> 
> 标签：java, swing, jframe, awt, frame

> **可能重复：**
> [swing 和 awt 有什么区别？](https://stackoverflow.com/questions/408820/what-is-the-difference-between-swing-and-awt)

我经常看到 JFrame 被大量使用。但有时，我也看到程序员在他们的例子中使用 Frame。那么你能告诉我它们的优点/缺点吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-27T16:07:17.853

好吧，让我为您分解一下....... 在进入 Frame 与 JFrame 之前，让我向您解释一下 AWT 和 Swing。

**AWT：**

**-**它具有**平台相关性** `Look and Feel`。

**-**所以它使用本**机 GUI**组件。

**-**由于 AWT 使用对等组件，因此称为**重量级组件**。

**摇摆 ：**

**-**它具有**独立于平台** `Look and Feel`的功能。

**-**因为它使用**纯 Java**组件。

**-**由于 Swing 使用纯 java 组件，它被称为**轻量级组件**。

据说 AWT 比 Swing 更快，因为它使用了 Platform 组件，但是由于更快的处理器等的到来……它现在等价了……你得到了很大的灵活性。

**这是 GUI 树：**

```
 Object
           |
        Component
           |
        Container
  ---------|---------

  |                 |
JComponent        Window
  |                 |
JPanel            Frame
                    |
                  JFrame 
```

现在**Frame**是一个`AWT component`，而**JFrame**是一个`Swing component`.

您还可以看到 JFrame 扩展了 Frame。

但是 JFrame 与 Frame 相比提供了很多功能性和灵活性，**我们甚至可以说 Swing 提供了更好的功能并且易于实现。**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-27T15:51:17.417

框架是一个 AWT 组件（这是用于 Java GUI 开发的旧类），它使用本机 OS GUI 支持

JFrame 是一个 Swing 组件，它是较新的组件，今天的 java GUI 开发主要使用 Swing 作为一个优势，您可以获得很多社区支持。据我所知，Swing 具有 LookAndFeel 功能，您只需几行代码即可对其进行配置以更改 GUI 的外观。

[http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/)

# php - 在电子邮件中设置回复字段

> ID：12145168
> 
> 赞同：4
> 
> 时间：2012-08-27T15:44:32.783
> 
> 标签：php, email

我有一个 SMTP 问题。我创建了一个 PHP 脚本来发送电子邮件。要求是我需要从“email1@example.com”发送电子邮件，但我需要回复到“email2@example.com”

我已`email2@example.com`在`reply-to`标题字段中添加。我遇到的唯一问题是，当有人收到电子邮件并单击回复按钮时，两者`email1@example.com`都`email2@example.com`显示在`TO`字段中。

有什么方法可以`email1@example.com`从 TO 字段中删除，只显示字段中指定的电子邮件地址`reply-to`？

我正在使用 PHPMailer，代码如下：

```
 $this->phpmailer->IsSMTP();
    $this->phpmailer->Host = $server;
    $this->phpmailer->Port = $port;
    $this->phpmailer->SetFrom($fromEmail, $fromName); //this is email1@example.com
    $this->phpmailer->AddReplyTo($replyEmail,$fromName);  //this is email2@example.com
    $this->phpmailer->Subject = $subject;
    $this->phpmailer->AltBody = $msgTXT; // non-html text
    $this->phpmailer->MsgHTML($msgHTML); // html body-text
    $this->phpmailer->AddAddress($email); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T15:59:01.933

尝试：

```
$this->phpmailer->IsSMTP();
$this->phpmailer->Host = $server;
$this->phpmailer->Port = $port;
$this->phpmailer->AddReplyTo($replyEmail,$fromName);  //this is email2@example.com
$this->phpmailer->SetFrom($fromEmail, $fromName); //this is email1@example.com
$this->phpmailer->Subject = $subject;
$this->phpmailer->MsgHTML($msgHTML); // html body-text
$this->phpmailer->AddAddress($email); 
```

尝试在 SetFrom 之前先设置 AddReplyTo()。phpmailer 需要改变这种行为。它将发件人地址添加到回复字段。如果您在发件人地址之前先设置回复，它将无法将您的发件人地址添加到回复标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T15:56:02.573

[来自谷歌搜索和第一个结果](http://www.askapache.com/php/phpfreaks-eric-rosebrocks-phpmailer-tutorial.html#Adding_Reply-To)

> 添加回复地址 ^
> 
> 默认情况下，回复地址将是 FROM 地址，除非您另外指定。这就是电子邮件客户端智能。但是，您可以让电子邮件来自一个电子邮件地址，而任何回复都转到另一个电子邮件地址。就是这样：
> 
> `$mailer->AddReplyTo('billing@yourdomain.com', 'Billing Department');`
> 
> 注意：您可以有多个回复地址，只需复制前面代码示例中的行并更改每行的电子邮件地址。

您需要在发件人地址之前添加此行。请[检查此以解决相同问题。](https://stackoverflow.com/questions/10396264/phpmailer-reply-using-only-reply-to-address)

按照这些示例，您的代码应如下所示

```
$this->phpmailer->IsSMTP();
$this->phpmailer->Host = $server;
$this->phpmailer->Port = $port;
$this->phpmailer->AddReplyTo($replyEmail,$fromName);  //this is email2@example.com
$this->phpmailer->SetFrom($fromEmail, $fromName); //this is email1@example.com
$this->phpmailer->Subject = $subject;
$this->phpmailer->AltBody = $msgTXT; // non-html text
$this->phpmailer->MsgHTML($msgHTML); // html body-text
$this->phpmailer->AddAddress($email); 
```

# jquery - 在 JQuery 中访问 ASP 经典集合变量

> ID：12145171
> 
> 赞同：0
> 
> 时间：2012-08-27T15:44:40.503
> 
> 标签：jquery, variables, collections, asp-classic

大家好，我是asp classic和jquery的新手，我只是想知道是否有一种方法可以将我的集合变量传递给jquery。我的目标是让变量一次下滑一个。我在 jquery 上遇到了 .slideDown 函数，所以我尝试使用它，但似乎不起作用，所以我猜我的标记出了什么问题......任何帮助将不胜感激。

ASP 代码：

```
 <%

        Dim objDictionary, Key,searchWord, myVar,a,i, break
        searchWord = request.QueryString("searchWord")
        break = Response.write("<br />")

        Set objDictionary = CreateObject("Scripting.Dictionary")
        objDictionary.CompareMode=1
        objDictionary.Add "Hello","hello"
        objDictionary.Add "Age","age"
        objDictionary.Add "height","height"
        objDictionary.Add "sample","sample"
        objDictionary.Add "words","words"

        if objDictionary.Exists(searchWord) then
            objDictionary.Remove(searchWord)
           a = objDictionary.Keys

            for i=0 to objDictionary.Count-1
            Response.Write(a(i)) 
            break

            next
            set objDictionary=nothing
        else 
            a = objDictionary.Keys

            for i=0 to objDictionary.Count-1
            Response.Write(a(i)) 
            break
            next
            set objDictionary=nothing

        end if      

        %> 
```

查询代码：

```
<script type="text/javascript">
    $(document).ready(function(){
    $("#toFall").slideDown("slow");});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:20:17.963

您是否尝试过将每个字典键放在某种 DOM 容器中，例如 div - 每个都是 #toFall 的子项，例如：

```
 Response.write "<div id='#toFall'>"  
   for i=0 to objDictionary.Count-1
        Response.Write "<div>" + (a(i)) + "</div>"
   next 
   Response.write "</div>" 
```

^^请仔细检查语法 - 我的 VBScript 生锈了。另外-您确定要在循环中中断-这不意味着只发生一次写入吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:17:42.940

这是一个通用方法，它将任何经典的 ASP 集合（带有键和值）发送为 JavaScript 集合：

```
Sub CollectionToJavaScript(oCollection, sClientSideName) 
    Dim blnFirst
    blnFirst = True
    Response.Write("<" & "script" & " type=""text/javascript"">")
    Response.Write("var " & sClientSideName & " = {")
    For Each key In objDictionary.Keys
        If Not(blnFirst) Then Response.Write(", ")
        Response.Write("""" & key & """: """ & objDictionary(key) & """")
        blnFirst = False
    Next
    Response.Write("};")
    Response.Write("</" & "script>")
End Sub 
```

第一个参数是集合，第二个参数是保存 JavaScript 集合的客户端变量的所需名称。

这将创建客户端复杂对象，以后可以使用您作为上述方法的第二个参数提供的名称访问该对象。

调试它的工作的一般方法：

```
<script type="text/javascript">
for (var key in myCollection) {
    alert("key is " + key + " and value is " + myCollection[key]); 
}
</script> 
```

在您的情况下，您应该在填充集合后调用此方法：

```
Call CollectionToJavaScript (objDictionary, "myCollection") 
```

然后在您的 jQuery 中，假设您要向下滑动所有键（即所有键都是有效的 DOM 元素）有这样的代码：

```
$(document).ready(function() {
    for (var key in myCollection) {
        $("#" + key).slideDown("slow");
    }
}); 
```

如果您还需要与每个键关联的值，请通过`myCollection[key]`在循环中使用来访问它。

# maven - Getting ReportNG to generate its output in Maven's "site"?

> ID：12145173
> 
> 赞同：4
> 
> 时间：2012-08-27T15:44:43.300
> 
> 标签：maven, testng, surefire, reportng

I'm trying to use ReportNG with Maven (and Maven Surefire) to generate reports for the results of TestNG tests, within Eclipse. I believe I have followed the instructions here:

[http://solidsoft.wordpress.com/2011/01/23/better-looking-html-test-reports-for-testng-with-reportng-maven-guide/](http://solidsoft.wordpress.com/2011/01/23/better-looking-html-test-reports-for-testng-with-reportng-maven-guide/)

When I run a Maven "site:site", and then look at the generated website, I see the normal TestNG report rather than the ReportNG report.

Poking around the file system, I see that ReportNG has actually created a report, in target/surefire-reports/html. But in target/site, there's a "surefire-report.html" which is the regular TestNG report.

I am guessing that to get the ReportNG report to show up on the generated site, it would have to put an HTML page in target/site, like the regular TestNG report is. How can I make it that happen?

Thanks in advance.

# java - 确定一个类是否在 Java 中实现了一个接口

> ID：12145185
> 
> 赞同：103
> 
> 时间：2012-08-27T15:45:31.883
> 
> 标签：java, reflection

我有一个`Class`对象。我想确定`Class`对象所代表的类型是否实现了特定的接口。我想知道如何实现这一目标？

我有以下代码。基本上它所做的是获取指定包中所有类的数组。然后我想遍历数组并将实现接口的 Class 对象添加到我的地图中。问题是`isInstance()`需要一个对象作为参数。我无法实例化接口。所以我对此有点不知所措。有任何想法吗？

```
Class[] classes = ClassUtils.getClasses(handlersPackage);
for(Class clazz : classes)
{
    if(clazz.isInstance(/*Some object*/)) //Need something in this if statement
    {
        retVal.put(clazz.getSimpleName(), clazz);
    }
} 
```

* * *

## 回答 #1

> 赞同：243
> 
> 时间：2012-08-27T15:47:51.170

你应该使用[`isAssignableFrom`](https://docs.oracle.com/javase/9/docs/api/java/lang/Class.html#isAssignableFrom-java.lang.Class-)：

```
if (YourInterface.class.isAssignableFrom(clazz)) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-27T15:49:01.870

您可以使用以下函数来获取所有实现的接口

```
Class[] intfs = clazz.getInterfaces(); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-08-27T15:51:27.417

您可以使用`class.getInterfaces()`然后检查接口类是否在其中。

```
Class someInterface; // the interface you want to check for 
Class x; // 
Class[] interfaces = x.getInterfaces();

for (Class i : interfaces) {
    if (i.toString().equals(someInterface.toString()) {
        // if this is true, the class implements the interface you're looking for
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T15:50:35.507

您还可以设置添加“.class”的实例

```
Class[] classes = ClassUtils.getClasses(handlersPackage);
for(Class clazz : classes)
{
    if(Interface.class.isAssignableFrom(clazz))
    {
        retVal.put(clazz.getSimpleName(), clazz);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-26T18:31:26.333

**对所有其他答案的贡献**，尽可能**不要**使用方法的最新答案`isAssignableFrom`，即使使用的“不是很好”的答案`clazz.getInterfaces()`也比`isAssignableFrom`.

开发人员在寻找 OP 问题的答案时的一个常见错误是更喜欢`isAssignableFrom`实例可用时，**错误地这样做**：

```
if (IMyInterface.isAssignableFrom(myObject.getClass())) {
    ... 
```

如果可能，使用`IMyInterface.class.isInstance`或`instanceof`两者都有更好的性能。当然，它们的缺点是您必须有一个实例，而不仅仅是`class`.

```
if (IMyInterface.class.isInstance(myObject)) {
    ...
if (myObject instanceof IMyInterface) { // +0.2% slower than `isInstance`
    ... 
```

一个更快但丑陋的解决方案是存储`List`所有“有效”类的静态而不是检查它们，**这种丑陋的解决方案仅在您需要大量测试类时才是首选，**因为它的性能优于所有其他方法。

```
public static final List<Class<?>> UGLY_LIST = Arrays.asList(MyClass1.class, MyClass2.class, MyClass3.class);
if (UGLY_LIST.contains(MyClass)) {
    ... 
```

# ruby-on-rails - 你能检查一下 Resque 处理了哪些项目吗？

> ID：12145190
> 
> 赞同：1
> 
> 时间：2012-08-27T15:46:02.687
> 
> 标签：ruby-on-rails, resque

我似乎找不到任何关于此的文档，但我注意到当我这样做时`Resque.info`，它会显示`x`已处理的作业数量。它是否保存了这些信息，以便我可以了解更多关于*处理*的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T15:49:24.890

Resque 默认不包含详细的作业历史记录。您将需要使用[resque-history](https://github.com/ilyakatz/resque-history/)插件。

# objective-c - 从回调函数更新 UI

> ID：12145202
> 
> 赞同：0
> 
> 时间：2012-08-27T15:47:07.827
> 
> 标签：objective-c

我正在使用[ASI HTTP 请求](http://allseeing-i.com/ASIHTTPRequest/)执行异步请求，我想用请求中的新信息更新文本框，所以我从回调函数更新它。到目前为止，这是我的代码：

**二等舱**

```
- (void)Login {
    NSLog(@"Login");
    NSURL *url = [NSURL URLWithString:@"http://ts5.travian.sk/login.php"];
    ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
    [request setDelegate:self];
    [request setDidFinishSelector:@selector(loginRequestFinished:)];
    [request setDidFailSelector:@selector(loginRequestFailed:)];
    [request startAsynchronous];
}

- (void)loginRequestFinished:(ASIHTTPRequest *)request
{
    NSLog(@"Completed!");
    NSString *response = [request responseString];
    AppController *ac = [AppController getInstance];
    [ac.textbox performSelectorOnMainThread:@selector(setStringValue:) withObject:response waitUntilDone:NO];
} 
```

AppController 是一个主类。从那里设置文本是有效的。但是这段代码没有做任何事情。它只是将 2 条日志行写入调试窗口。

我错过了什么吗？

# windows - 在 windows、mac 上安装单声道？

> ID：12145204
> 
> 赞同：1
> 
> 时间：2012-08-27T15:47:13.810
> 
> 标签：windows, macos, mono

是否可以在 Windows 计算机上安装 Mono 和 Gtk，将其复制到本地文件夹并从中运行？我可以在 Mac 上做同样的事情吗？

我正在尝试创建一个包含所有内容的一体化文件夹，以便用户可以运行而不需要文件夹中没有的任何内容。mkbundle 不起作用，我宁愿拥有一个完整的 Mono，这样我就可以在运行时动态加载其他 Mono 库。

有 64 位和 32 位的问题吗？

我可以通过使用 MONO_PATH 来避免 GAC 吗？

Mac Mono 或 Windows Mono 是否要求任何文件位于全局位置？任何硬编码路径？

我希望我的分布式程序尽可能易于新用户使用（例如，无需额外安装）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T15:37:28.050

您可能想查看[Banshee 的源代码](http://git.gnome.org/browse/banshee)以了解它是如何完成的。

*   对于 Mac，使用了[bockbuild](https://github.com/mono/bockbuild)，因此所有库都捆绑在包中。
*   对于 Windows，使用 WiX 安装程序。它不捆绑 Mono，因为使用 .NET 就足够了。不确定这是否捆绑了其余部分（gtk#），您应该仔细检查。

# c# - C# 中的 xml 中的 xml

> ID：12145209
> 
> 赞同：-5
> 
> 时间：2012-08-27T15:47:49.113
> 
> 标签：c#, xml

当我创建 xml 时，我需要创建这样的东西：

```
<test <sometext=one /> /> 
```

我该怎么做这样的事情

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T15:51:10.280

> 当我创建 xml 时，我需要创建这样的东西：

抱歉，您不能在 XML 中创建类似的内容，因为这不是有效的 XML。

另一方面，您可以通过正确编码将 XML 嵌入到节点的属性或值中。例如，作为一个属性：

```
<test someattribute="&lt;sometext value=&quot;one&quot; /&gt;" /> 
```

现在该`someattribute`属性的值是以下 XML：`<sometext value="one" />`.

或者，如果您想将 XML 嵌入为节点的值而不是属性：

```
<test>&lt;sometext value="one" /&gt;</test> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T15:53:00.340

您将无法创建类似的东西，因为那不是 XML。你的结构有很多问题，我建议你重新考虑你正在采取的方法。

您将需要创建包含所需信息的子元素或属性。例如：

```
<test sometext="one"> </test> 
```

或者

```
<test>
<sometext>one</sometext>
</test> 
```

您能否提供更多信息说明为什么需要这种结构？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T15:52:50.730

那不是 XML，所以它永远不会工作。

可以在[http://www.w3schools.com/xml/找到我对 XML（包括 XML 验证器）的精彩介绍](http://www.w3schools.com/xml/default.asp)

# email - 从带有凭据的 ASP 经典页面发送电子邮件

> ID：12145212
> 
> 赞同：0
> 
> 时间：2012-08-27T15:47:51.897
> 
> 标签：email, asp-classic, credentials

我需要通过电子邮件将用户凭据发送给我的应用程序的用户，这是在 asp
classic 中构建的，这是我的问题，从电子邮件帐户向用户发送信息，但不发送用户名并从该用户传递，我的代码是这样的，如何管理用户/密码？最好的方法是什么？提前致谢。

```
t1 = time()
estado=""
email="soporte.web@ipsos.com"       
mail_from = "Soporte <soporte.web@myenterprise.com>"
mail_destino = "Soporte Web Ipsos" & " <" & email &">"
mail_asunto = "Acceso BCI Satisfaccion " & user
ruta=request.ServerVariables("APPL_PHYSICAL_PATH")
on error resume next
mail_cc=""
Dim myMail
Set myMail = CreateObject("CDONTS.NewMail")
myMail.MailFormat = 0   '0 (Mime format), 1 (default Plain Text format)'
myMail.BodyFormat = 0   '0 html, 1 texto'
myMail.Importance = 1   '0 Low, 1 Normal, 2 High '
myMail.From = mail_from
myMail.To = mail_destino
myMail.Cc = mail_cc
'myMail.Cco = mail_cco'
myMail.Subject = mail_asunto
myMail.Body = texto_email
'myMail.AttachFile ruta&"Carta2006.pdf"'
myMail.Send
Set myMail = Nothing
If err.num <> 0 Then   
Response.Write nombre & " / " & email & " / " & "CDONTS Error: " & err.num & " - " & 
err.description
estado="no"
End If 
```

结束子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:36:13.367

在经典的 ASP 中，除了使用登录页面进行身份验证和使用会话变量来维护状态之外，没有标准的方法（我记得）来处理用户名/密码。

如果您转到应用程序中登录页面的代码并遵循逻辑，您应该会看到登录发生（其中检查了用户名和密码）。然后，您可以将这些值弹出到会话变量中（如果尚未完成）并稍后将它们取出以发送到电子邮件中。

顺便说一句，通常不鼓励在纯文本电子邮件中向用户发送用户名和密码，因为电子邮件可以在传输过程中被阅读 = 黑客的机会。但这取决于你...

# java - Java Color 使用更亮的方法

> ID：12145214
> 
> 赞同：0
> 
> 时间：2012-08-27T15:47:58.380
> 
> 标签：java, awt

那有什么问题？我预计如果我使用 d = 30 应用颜色，它会比 d = 0 更亮。但事实并非如此。这里的颜色应该从一个面板变为另一个面板（我预计）。

```
package default;

import java.awt.Color;
import java.awt.Dimension;

import javax.swing.BoxLayout;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class test
{
    public static void main(String[] args)
    {
        JFrame frame = new JFrame();
        JPanel panel = new JPanel();
        frame.getContentPane().add(panel);
        frame.setMinimumSize(new Dimension(600,100));
        panel.setLayout(new BoxLayout(panel, BoxLayout.X_AXIS));

        for(int i = 100; i > 0; i = i-10)
        {
            JPanel p = new JPanel();
            p.setPreferredSize(new Dimension(20,20));
            p.add(new JLabel(String.valueOf(i)));
            Double d = Double.valueOf(i);

            Color color = Color.red.brighter();
            while(d > 0)
            {
                color = color.brighter();
                d = d-5;
            }

            p.setBackground(color);
            panel.add(p);
        }

        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T16:06:07.527

Java 的`brighter()`颜色算法假设如果 R、G 或 B 以 0 开头，则它保持为 0。“一百万次无，仍然是无。”

```
import java.awt.Color;

public class QuickTest {

    public static void brighten(Color color, int d) {
        System.out.println("brighten");
        while(d > 0)
        {
            System.out.println(color);
            color = color.brighter();
            d = d-1;
        }
        System.out.println(color);
    }

    public static void main(String[] args) throws Exception {
        int d = 3;
        brighten(Color.red,3);
        brighten(new Color(45,125,0),3);
        brighten(new Color(45,125,1),3);
    }
} 
```

## 输出

```
brighten
java.awt.Color[r=255,g=0,b=0]
java.awt.Color[r=255,g=0,b=0]
java.awt.Color[r=255,g=0,b=0]
java.awt.Color[r=255,g=0,b=0]
brighten
java.awt.Color[r=45,g=125,b=0]
java.awt.Color[r=64,g=178,b=0]
java.awt.Color[r=91,g=254,b=0]
java.awt.Color[r=130,g=255,b=0]
brighten
java.awt.Color[r=45,g=125,b=1]
java.awt.Color[r=64,g=178,b=4]
java.awt.Color[r=91,g=254,b=5]
java.awt.Color[r=130,g=255,b=7] 
```

## 更新

但不总是..

```
brighten(new Color(0,0,0),3); 
```

..产生：

```
brighten
java.awt.Color[r=0,g=0,b=0]
java.awt.Color[r=3,g=3,b=3]
java.awt.Color[r=4,g=4,b=4]
java.awt.Color[r=5,g=5,b=5] 
```

# ios - 在 TabBarController 内的 UINavigationController 中，选择已选择的 tabBarItem 会将视图弹出到 rootViewController，如何更改？

> ID：12145218
> 
> 赞同：0
> 
> 时间：2012-08-27T15:48:12.610
> 
> 标签：ios, uinavigationcontroller, uitabbarcontroller

我在 TabBarController 中有一个 UINavigationController，当我选择已选择的 tabBarItem 时，NavigationController 会弹回到它的 rootViewController。据我所知，这是一种自动行为。

我需要修改这种行为，并使用

```
-(void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController 
```

再次推送我想要的viewController，由于我的推送与自动弹出并行发生，因此无法正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T21:39:24.797

解决方案是将 UINavigationController 子类化，并将您的子类与 UITabBarController 一起使用。我加入了其他几个有用的功能。

这样做很好 - 我的应用程序有 5 颗星，没有人抱怨它：

```
@implementation MyNavigationController

// This suppresses the normal pop to the root view controller
- (NSArray *)popToRootViewControllerAnimated:(BOOL)animated
{   
    return @[];
}

// Extra: give my base classes some notice this is going to happen
- (UIViewController *)popViewControllerAnimated:(BOOL)animated
{
    UIViewController *vc = self.topViewController;
    if ([vc respondsToSelector:@selector(viewControllerWillBePopped)]) {
        [vc performSelector:@selector(viewControllerWillBePopped)];
    }

    return [super popViewControllerAnimated:animated];
}

// Extra: let the UIViewController refuse to pop
- (BOOL)navigationBar:(UINavigationBar *)navigationBar shouldPopItem:(UINavigationItem *)item
{
    BOOL ret = YES;

    UIViewController *vc;
    for(UIViewController *obj in self.viewControllers) {
        if(obj.navigationItem == item) {
            vc = obj;
            break;
        }
    }

    if ([vc respondsToSelector:@selector(shouldPop)]) {
        NSNumber *retVal = [vc performSelector:@selector(shouldPop)];
        ret = [retVal boolValue];
        if(!ret) return NO;
    }
    return [super navigationBar:navigationBar shouldPopItem:item];
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:49:18.433

我不知道如何改变这种行为，但我强烈建议你不要搞乱这种默认行为。如果 Apple 没有提供一种简单的方法来解决这种行为，那么这是有原因的。

从字面上看，每个画外音用户都依赖手势，我假设其中之一是双击一个选项卡以转到 rootView。使用这些默认手势中的任何一个，您肯定会激怒一群 VO 用户。不幸的是，我学会了这一点（使用自定义导航栏和自定义后退按钮）。

希望这个答案能说服您重新考虑您的要求 =)

# python - 使用 Django Admin 时间歇性地获取一个乱码的 CSRF cookie

> ID：12145219
> 
> 赞同：2
> 
> 时间：2012-08-27T15:48:16.283
> 
> 标签：python, django, cookies, django-admin, csrf

使用 Django 1.4，我不断地将 CSRF cookie 间歇性地打乱成这样的东西：

> "Set-Cookie: csrftoken=\"Set-Cookie: csrftoken=WStoUW0COc1JvURmsc0vwRgJ8uCWR5Hh\073 expires=Mon\054 26-Aug-2013 15:24:38 GMT\073 Max-Age=31449600\073 Path=/\""

（而不是说`WStoUW0COc1JvURmsc0vwRgJ8uCWR5Hh`，这是那个 CSRF cookie 的实际值。）

*在任何*对象上多次重新加载“添加/编辑”页面后，我似乎会发生这种情况（我没有对它们进行全部测试，但我在自定义模型和 Django.auth 的用户上得到了它）。在那之后，即使我删除它，我几乎总是会在下次刷新时再次获得它。

cookie 的内容很容易让人联想到[这个错误](https://code.djangoproject.com/ticket/15863)，但是

1.  不完全一样，缺少转义
2.  应该已经修复并且
3.  Django admin 中的这个页面无论如何都不会被缓存（添加/编辑页面默认使用 admin_view 装饰器）

我曾经认为DajaxICE与此有关，但它只是将问题暴露出来，因为它在cookie设置错误后会失败。如上所述，这发生在没有也从未有过 DajaxICE 东西的管理页面上。

**更新：**这看起来更像这[两个](https://groups.google.com/forum/#!topic/django-developers/Q9zTDofY_sA) [线程](http://python.6.n6.nabble.com/Django-1-4-bug-Using-cache-page-and-csrf-protect-decorators-results-in-a-messy-Set-Cookie-response-h-td4973973.html)中讨论的内容，但即使是那些谈到需要使用 TemplateResponse 的视图（检查 Django Admin 的添加视图），具有 csrf 保护（检查），并使用 cache_page （或者我假设至少*某种*形式的缓存——添加视图绝对不会）。

看到使用 django_annoying 的 ajax_request 显然不关心这个 cookie 是乱码（而 Django 管理员从来没有这样做过），我可以继续而不修复这个，但是......什么？！据我所知，打破这一点所需要的只是使用站点范围的缓存和管理站点，这有点荒谬......更不用说 Django 管理员不介意存在乱码 cookie 的事实。 .

# javascript - 任何想法为什么这个书签脚本不能在 IE 中工作？

> ID：12145221
> 
> 赞同：0
> 
> 时间：2012-08-27T15:48:17.850
> 
> 标签：javascript, internet-explorer

我被要求弄清楚为什么 Javascript 书签脚本在 IE 中不起作用。Javascript 不是我的强项，所以我有点迷茫。

有任何想法吗？

使用的脚本如下

```
<script type="text/javascript">

/* Modified to support Opera */
function bookmarksite(title,url){
    if (window.sidebar) // firefox
        window.sidebar.addPanel(title, url, "");
    else if(window.opera && window.print){ // opera
        var elem = document.createElement('a');
        elem.setAttribute('href',url);
        elem.setAttribute('title',title);
        elem.setAttribute('rel','sidebar');
        elem.click();
    } 
    else if(document.all)// ie
        window.external.AddFavorite(url, title);
}
</script> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:49:56.093

似乎 IE8 中的 AddFavorite 方法已被限制为仅通过用户事件触发，

不是像 onload 或 onunload 这样的自动事件。尝试这个

```
<a onclick = "bookmarksite('stackoverflow','http://stackoverflow.com')">BookMark</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:06:00.150

这段代码似乎工作正常。确保该 URL 是有效的 http url，否则您将在 IE 中收到拒绝访问错误（但也可能是其他浏览器）。

# android - Android ExpandableListView 分隔线不可见

> ID：12145226
> 
> 赞同：6
> 
> 时间：2012-08-27T15:48:35.427
> 
> 标签：android, android-listview, expandablelistview, divider

我有以下 ExpandableListView：

```
<ExpandableListView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:id="@+id/listView"
            android:groupIndicator="@android:color/transparent"
            android:background="@color/app_background"
            android:scrollingCache="false"
            android:choiceMode="none"
            android:divider="@color/gray_dark"
            android:dividerHeight="2dp"
            android:childDivider="@color/gray_dark"
            android:cacheColorHint="@color/app_background"/> 
```

我遇到的问题是可扩展列表视图没有绘制分隔线，或者至少不可见。我正在添加一个自定义视图作为组视图，并在我的可扩展适配器中添加自定义列表项。这会是个问题吗？

有谁知道我可以做些什么来为列表子项启用分隔符？

先感谢您。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-28T15:28:19.410

看来我的可扩展适配器有问题。我被以下方法覆盖：

```
@Override
public boolean areAllItemsEnabled() {
    return true;
} 
```

我没有返回**true**我离开了返回**false**的方法，这就是问题所在......因此，如果有人遇到此问题，请检查该方法并确保它返回**true**而不是**false**。

请注意，如果您扩展，则无需覆盖该方法`BaseExpandableListAdapter`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:11:47.600

我从来没有试图弄乱 xml 中的分隔符，我总是通过代码来完成它。以下是一个片段，它将分隔线设置为红色，并在它从中心移动到边缘时淡出。只有一个分隔高度调用，因为该部分会影响组和孩子。

```
import android.graphics.drawable.GradientDrawable;
import android.graphics.drawable.GradientDrawable.Orientation;

// code to set up expandablelistview

int[] colors = {0, 0xFFFF0000, 0}; // red for the example 
getListView().setDivider(new GradientDrawable(Orientation.RIGHT_LEFT, colors)); 
getListView().setChildDivider(new GradientDrawable(Orientation.RIGHT_LEFT, colors)); 
getListView().setDividerHeight(4); 
```

# bash - 从bash中的一行中拆分出元组

> ID：12145228
> 
> 赞同：0
> 
> 时间：2012-08-27T15:48:45.427
> 
> 标签：bash, awk

我有一个看起来像这样的文件：

```
abs=1 sin=2.1 cat=曲线=3
abs=2 sin=3.4 cat=锯齿线=8
abs=7 sin=6.3 cat=方线=4

```

实际上，我还有几个字段，并非所有行都有所有字段。无论如何，我想编写一个脚本，用户可以在其中定义他们想要保留的元组的“掩码”（例如 abs、line），然后脚本输出一个较小版本的文件，其中只有给定字段中的值。

例如，我给脚本一个输入参数“abs,line”，它会打印：

```
绝对=1 行=3
绝对=2 线=8
绝对=7 线=4

```

我在 bash 中做了几件这样的事情，并希望将其集成到我的 bash 脚本中。我在想 awk 必须能够做到这一点，但我不太清楚如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T16:34:04.110

更新以填充*glenn*在评论中建议的掩码，这使得匹配更加健壮：

```
mask=abs,line
awk -v mask=$mask -v RS='[\n ]' -v FS='=' -v ORS='' '
  BEGIN { mask="," mask "," }
  mask ~ "," $1 "," { print $1 FS $2 RT }
' 
```

请注意，将`mask`变量设置为要提取的参数的逗号分隔列表。

记录由换行符或空格分隔，并在末尾重新插入`RT`。

输出：

```
abs=1 line=3
abs=2 line=8
abs=7 line=4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T15:55:16.173

我会制作`abs`和`line`分隔参数，而不是一个逗号分隔的参数，使脚本如下所示：

```
#!/bin/bash
declare -A keep;

# read variables to keep from command line into associative array
while (( $# )); do
  keep[$1]=1
  shift
done

# process input
while read -r; do
  read -a args <<<"$REPLY"
  for arg in "${args[@]}"; do
    key=${arg%=*}
    value=${arg#*=}
    if [[ ${keep[$key]} ]] ; then
      printf '%s=%s ' "$key" "$value"
    fi
  done
  printf '\n'
done 
```

然后运行脚本如下：

```
./yourscript abs line <input.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T18:41:26.570

其他方法使用`awk`：

假设`infile`粘贴在问题中的内容，创建掩码并执行以下脚本：

```
m="abs,line,cat"; awk -v mask="$m" '
    BEGIN {
        OFS = " ";

        ## Set fields of the mask as keys of an array.
        ret = split( mask, arr, /,/ );
        for ( i = 1; i <= length( arr ); i++ ) {
            mask_arr[ arr[i] ] = 1;
        }
    }

    ## Go throught all fields, extract the first part until the equal sign,
    ## search it in the array and print if found.
    {
        for ( i = 1; i <= NF; i++ ) {
            if ( substr( $i, 1, index( $i, "=" ) - 1 ) in mask_arr ) {
                printf "%s%s", $i, OFS;
            }
        }
        printf "\n";
    }
' infile 
```

结果是：

```
abs=1 cat=curve line=3 
abs=2 cat=sawtooth line=8 
abs=7 cat=square line=4 
```

# java - Java分页框架/库

> ID：12145229
> 
> 赞同：2
> 
> 时间：2012-08-27T15:48:45.830
> 
> 标签：java, database, swing

> **可能重复：**
> [在 JTable 中显示数据库中的数据](https://stackoverflow.com/questions/5357349/displaying-data-from-database-in-jtable)

我想为 Swing 客户端实现分页，并且需要动态分页。基本上，当用户上下滚动时，在滚动窗格中，根据幻灯片的位置，我们将从数据库中获取一页数据并显示此数据。主要是因为数据库可以有数千条记录，并且预先加载所有记录会杀死 Swing 客户端。

我可以自己编写，但想知道是否已经存在框架或库。它可以是客户端或服务器端或两者兼而有之。它需要某种缓存或几页。

谢谢

# c# - MSbuild 构建顺序问题 - 先预构建步骤或先依赖项目

> ID：12145230
> 
> 赞同：15
> 
> 时间：2012-08-27T15:48:46.727
> 
> 标签：c#, msbuild

我有一个依赖于项目 B 的项目 A。项目 A 有一些预构建任务，这些任务依赖于项目 B 中生成的一些文件。当我在 Visual Studio 中构建时，没问题。但是在使用 MSBuild.exe 时，就会出现问题，因为构建顺序是：

*   A 的预构建步骤 <- 失败，因为 B 尚未编译
*   B 已编译 <- 预计首先执行
*   A被编译

这是使用 MSBuild 的预期行为吗？有没有办法告诉 MSBuild 在 A 的预构建步骤之前先做 B？

我正在使用 VS2010 C# 和 C++/CLI。我不认为是否提供其他信息，但它是这样称呼的：

```
Running process (C:\Windows\Microsoft.NET\Framework\v4.0.30319\MSBUILD.exe "..\..\..\dev\build\MyProj.sln" /t:Clean /p:Configuration=Release;Platform=Win32) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-01T16:59:56.557

**简短的回答**

删除您的构建事件，并将以下内容添加到您的项目 (.csproj) 中：

```
<Target Name="AfterResolveReferences">
  <Exec Command="echo helloworld" />
</Target> 
```

**更多信息**

您可以在此处阅读有关自定义构建过程的信息：http: [//msdn.microsoft.com/en-us/library/ms366724%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/ms366724%28v=vs.110%29.aspx)

Before Build 事件在 ResolveReferences 之前触发，因此如果您引用的项目在您的项目的 BeforeBuild 事件发生时尚未构建，那么您的 BeforeBuild 事件将失败。

为了克服这个问题，您应该使用不同的入口点来自定义构建过程。在上面的示例中，我使用 AfterResolveReferences，因为这将确保您引用的所有项目都已构建。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-03-19T16:08:16.673

这是一个相当老的问题，但我找到了这个简单的解决方案（它也可能适用于你）只需添加

```
<PreBuildEventDependsOn>ResolveReferences</PreBuildEventDependsOn> 
```

前

```
<PreBuildEvent> 
```

不幸的是，这必须在编辑器中完成，VS 编辑器不支持它（版本 15.6.2）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-08-16T22:37:38.767

杰克的回答似乎有效，但我不喜欢的是，VS UI 本身不支持编辑 .csproj，除了尴尬的“卸载项目，编辑项目（在此期间你不能点击像您通常想要的那样在您的文件上），重新加载项目”模型。我想要的是在构建依赖项目之后触发预构建事件，并且在 VS 中与在 MSBuild 中的工作相同。在解决了这个问题之后，我在 MSBuild 4.0 中找到了适合我的解决方案。

无论我尝试什么，我都无法更改 PreBuildEvents 目标以在相关项目完成构建后触发。所以我所做的是禁用 PreBuildEvents 目标，并创建一个将在适当时间运行的混蛋自定义 PreBuildEvents 目标：

```
<ItemGroup>
  <ProjectReference Include="..\YourProjectPath\YourProject.csproj">
    <ReferenceOutputAssembly>false</ReferenceOutputAssembly>
  </ProjectReference>
</ItemGroup>
<Target Name="PreBuildEvent" AfterTargets="" BeforeTargets="" />
<Target Name="BastardPreBuildEvent" AfterTargets="ResolveReferences" BeforeTargets="CoreResGen">
  <Exec Command="$(PreBuildEvent)" />
</Target> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-06T22:52:52.453

这可能很旧，但我最近遇到了同样的问题。Jack 的回答是我试图使用的，但是在 Visual Studio 中加载项目时会调用 ResolveReferences 目标，这对我来说很**糟糕**，因为我在目标期间做了一个相当长的过程，而我只想在构建之前做。

我最终使用的解决方案与 VeeTheSecond 类似，但涉及的更少：

```
<Target Name="BeforeBuild" DependsOnTargets="ResolveReferences">
    ... exec something using a dependant project's output exe ...
</Target> 
```

这将强制 BeforeBuild 目标等到所有依赖项目实际完成构建，以便 exec 命令可以使用依赖项目的输出。

# markdown - 创建一个自动编号的列表

> ID：12145232
> 
> 赞同：76
> 
> 时间：2012-08-27T15:48:51.237
> 
> 标签：markdown

有没有办法以 Markdown 格式创建一个自动编号的列表？目前，我必须手动输入要显示的编号，但是如果我在列表中插入项目，则必须重新编号以下所有项目很麻烦。

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-08-27T15:51:40.497

这应该会自动发生（至少在 SO 风格的 MD 中）：

1.  测试 1
2.  测试 2

我使用它的代码：

```
1\. test 1
1\. test 2 
```

同样适用于 GitHub 风格的 MD：[https ://gist.github.com/3489721](https://gist.github.com/3489721)

你可以在这里测试它： [https ://meta.stackexchange.com/questions/3122/formatting-sandbox](https://meta.stackexchange.com/questions/3122/formatting-sandbox)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2021-03-29T17:15:42.927

如果你用这样的一个输入第一个，`1\. lorem`那么只要其余的在点后面有一个空格，那么它应该可以工作

```
1\. lorem
4\. hello
3\. blah blah blah 
```

你应该得到这个：

1.  洛雷姆
2.  你好
3.  等等等等等等

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2021-09-02T11:40:22.733

如果您需要在列表中的项目下添加任何评论/描述/任何内容。只有这个选项解决了我的情况。

```
<ol>
    <li>option 1</li>
    <li>option 2</li>
    <li>option 3</li>
</ol> 
```

# php - Symfony 1.4：从自定义 PHP 类中访问 Doctrine

> ID：12145237
> 
> 赞同：0
> 
> 时间：2012-08-27T15:49:09.020
> 
> 标签：php, symfony1, doctrine

我有一个自定义库，位于`apps/frontend/lib/`. 这个类需要访问`Doctrine_Query`和其他一些基本的 symfony 类。

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:55:25.783

你应该先配置[symfony 自动加载器](http://www.symfony-project.org/reference/1_4/en/14-Other-Configuration-Files)，然后再使用你的类。在 symfony 1.x 项目中，一切都（几乎）无处不在。

# tsql - 在 TSQL 中获取列值的组合

> ID：12145239
> 
> 赞同：0
> 
> 时间：2012-08-27T15:49:21.423
> 
> 标签：tsql

我有一个这样的数据库结构

```
rowid   deltaValue  Applicable
1        r            n/d
1        w            n/d
1        m            n/d
2        r            n/d
2        w            n/d
2        m            n/d
3        r            n/d
3        w            n/r
3        m            n/d 
```

所以基本上我只想选择最后一组'rowid'，即`rowid=3`。这是因为它是唯一一个组合了`n/d, n/r`

是否有一个 tsql 查询将只查看组合并拉取组（即 rowid）。这是我到目前为止所拥有的：

```
select  *
from table
where 1=1
and deltaValue in ('r','w','m')
and ((   1=(case when [DeltaValue] = 'r' and [Applicable]='n/r' then 1 else 0 end)
     and 1=(case when [DeltaValue] = 'w' and [Applicable]='n/d' then 1 else 0 end)
     and 1=(case when [DeltaValue] = 'm' and [Applicable]='n/d' then 1 else 0 end)
     ) OR
     (   1=(case when [DeltaValue] = 'r' and [Applicable]='n/d' then 1 else 0 end)
     and 1=(case when [DeltaValue] = 'w' and [Applicable]='n/r' then 1 else 0 end)
     and 1=(case when [DeltaValue] = 'm' and [Applicable]='n/d' then 1 else 0 end)
     ) OR
     (   1=(case when [DeltaValue] = 'r' and [Applicable]='n/d' then 1 else 0 end)
     and 1=(case when [DeltaValue] = 'w' and [Applicable]='n/d' then 1 else 0 end)
     and 1=(case when [DeltaValue] = 'm' and [Applicable]='n/r' then 1 else 0 end)
     )
    ) 
```

输出：

```
3        r            n/d
3        w            n/r
3        m            n/d 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:07:29.713

试试这个：

```
with temp as
(
    SELECT t.rowid
    FROM myTable t
    GROUP BY t.rowid
    HAVING COUNT(CASE WHEN Applicable= 'n/d' THEN 1 END) > 0
       AND COUNT(CASE WHEN Applicable= 'n/r' THEN 1 END) > 0;
)
select * from MyTable as mt
INNER JOIN temp as t
ON mt.RowId = t.RowId 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:16:04.297

请试试这个

```
SELECT      *
FROM        Table1
WHERE       rowid IN ( SELECT rowid
                       FROM   ( SELECT * , DENSE_RANK () OVER (PARTITION BY rowid ORDER     BY Applicable) AS myRank FROM Table1
                              ) AS t
                       WHERE  t.myRank > 1 ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T20:47:00.943

以下可以被认为是[@Abe Miessler](https://stackoverflow.com/a/12145529/297408)建议的发展：

```
WITH counted AS (
  SELECT
    *,
    [n/d count] = COUNT(CASE DeltaValue WHEN 'n/d' THEN 1 END) OVER (PARTITION BY rowid),
    [n/r count] = COUNT(CASE DeltaValue WHEN 'n/r' THEN 1 END) OVER (PARTITION BY rowid)
  FROM atable
)
SELECT
  rowid,
  DeltaValue,
  Applicable
FROM counted
WHERE [n/d count] > 0 AND [n/r count] > 0
; 
```

如您所见，您可以通过使用聚合函数的[*窗口*](http://msdn.microsoft.com/en-us/library/ms189461.aspx "OVER 子句 (Transact-SQL)")版本来避免连接。`COUNT()`

顺便说一句，如果您需要使查询更加通用并且返回具有多个 distinct 的任何组`DeltaValue`，您可以使用稍微不同的方法：

```
WITH counted AS (
  SELECT
    *,
    MinDeltaValue = MIN(DeltaValue) OVER (PARTITION BY rowid),
    MaxDeltaValue = MAX(DeltaValue) OVER (PARTITION BY rowid)
  FROM atable
)
SELECT
  rowid,
  DeltaValue,
  Applicable
FROM counted
WHERE MinDeltaValue <> MaxDeltaValue
; 
```

上面的查询使用窗口化`MAX()`并`MIN()`找到每组（的`rowid`）的最小值和最大值，并返回最小值与最大值不同的那些组。

# google-apps-script - GUI 应用程序脚本，返回“未定义”值

> ID：12145243
> 
> 赞同：0
> 
> 时间：2012-08-27T15:49:38.830
> 
> 标签：google-apps-script, gui-builder

我创建了一个简单的 GUI，其中包含一个流面板名称和 ID `main panel`、一个标签名称、`Label1`一个文本框名称`myTextBox`和一个带有 ID 的按钮`getETA`。

我的目标是，如果我在文本框中输入一个值并单击提交，则该值应写入电子表格。我的问题是脚本在电子表格中返回未定义而不是我输入的实际值。

```
var app = UiApp.createApplication();
app.setTitle("My Application");
app.add(app.loadComponent("MyGui"));
SpreadsheetApp.getActiveSpreadsheet().show(app);
var clickHandler = app.createServerHandler('clickGetETA');
clickHandler.addCallbackElement(app.getElementById('mainPanel'));
app.getElementById('getETA').addClickHandler(clickHandler);
var doc = SpreadsheetApp.getActive();
doc.show(app);

}

 // this function responds to submit button
function clickGetETA(e) {
var app = UiApp.getActiveApplication();
var textBoxValue = e.parameter.myTextBox;
var sheet = SpreadsheetApp.getActiveSheet();
var lastRow = sheet.getLastRow()+1;
var lastCell = sheet.getRange("A"+lastRow);
lastCell.setValue(textBoxValue);
return app.close();

} 
```

我是 stackoverflow 的新手，没有足够的声誉来发布图片，所以发布图片的链接

[图像](https://docs.google.com/file/d/0B4SXyUxVTGRBczhtc21RdjNnOGc/edit) [1](https://docs.google.com/file/d/0B4SXyUxVTGRBczhtc21RdjNnOGc/edit) [图像2 图像3 图像4 图像5](https://docs.google.com/file/d/0B4SXyUxVTGRBZ2Y2Y01XWHZ3Z0U/edit) [图像](https://docs.google.com/file/d/0B4SXyUxVTGRBSExIcHBCd3JsV28/edit) [6](https://docs.google.com/file/d/0B4SXyUxVTGRBbEtTd3RpSDhVMTg/edit) [图像](https://docs.google.com/file/d/0B4SXyUxVTGRBaFBDU1Fqam9YbmM/edit) [7](https://docs.google.com/file/d/0B4SXyUxVTGRBNjU3TnQ0b0MxZ28/edit)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:30:15.573

我看到您在脚本**和**GUI 构建器中定义了 clickHandler ......这太过分了，这可能是问题的原因

请尝试删除 GUI builder 中的那个并再次测试，我在您的测试中没有看到任何其他问题 ;-)

当然，您也可以删除脚本中的处理程序，但在这种情况下，您也应该在其中添加回调元素，方法是在处理程序名称附近开发 smal '+' 并将您的面板放在那里。

编辑：抱歉，GUI 构建器中有 2 个处理程序，所以这**两个**太多了！如果您想在一个按钮上有多个处理程序，则不能在 2 个不同的处理程序类型（单击和键）上使用具有单个名称的单个处理程序，您应该定义所需数量的处理程序，每种类型的处理程序，最终调用相同函数，但具有不同的变量名称。

编辑 2`SpreadsheetApp.getActiveSpreadsheet().show(app);`主函数开头的行也不存在，只需将其删除，因为您稍后调用电子表格`var doc = SpreadsheetApp.getActive();`

[在此处](https://docs.google.com/spreadsheet/ccc?key=0AnqSFd3iikE3dHkyMkhYY01iV19nUm0zaGJwUEg2X0E)使用 GUI 的工作代码

**编辑 3：通过共享提问表解决**了问题，面板名称未正确写入：`mainPanel`在脚本和`mainpanel`GUI 中...... Aaaah，区分大小写！;-)（在图 6 中可见）

# ios - Phonegap: BarcodeScanner & Childbrowser 插件

> ID：12145244
> 
> 赞同：0
> 
> 时间：2012-08-27T15:49:44.710
> 
> 标签：ios, phonegap-plugins, barcode-scanner, childbrowser

我在使用这 2 个 PhoneGap 插件时遇到了问题：“BarcodeScanner”和“ChildBrowser”（在 iOS 应用程序中，使用 XCode 4 和 PhoneGap 2.0）。

我的应用程序 UI 上有一个“扫描”按钮。当用户点击此按钮时，条码扫描器将启动。

因此，在条形码扫描器回调的 Success 函数中，我需要在新的 Childbrowser 窗口（应用程序内部）中打开从扫描中恢复的 URL。

但是新的 Childbrowser 窗口从未打开过，而控制台显示“Opening Url : [http://fr.wikipedia.org/](http://fr.wikipedia.org/) ”（例如）。

这是我的JS部分代码：

```
$("#btnStartScan").click(function() {
       var scanBarcode = window.plugins.barcodeScanner.scan(
                           function(result) {
                                    if (!result.cancelled){
                                         openUrl(result.text);
                                    }
                            },
                            function(error) {
                                    navigator.notification.alert("scanning failed: " + error);
       });
 });

function openUrl(url)
{
      try {
          var root = this;
          var cb = window.plugins.childBrowser;

          if(cb != null) {
                    cb.showWebPage(url);
          }
          else{
              alert("childbrowser is null");
          }
       }
       catch (err) {
           alert(err);
       }
} 
```

如果我在 Confirm 警报回调中调用我的 openURL() 函数，一切都会正常工作，例如：

```
if (!result.cancelled){
        navigator.notification.confirm("Confirm?",
                                       function (b) {
                                              if (b === 1) {
                                                   openUrl(result.text);
                                              }
                                       },
                                       'Test',
                                       'Yes, No');
 } 
```

但是我需要在扫描后直接启动 ChildBrowser 窗口，而不需要任何确认警报等。

请问有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T08:33:29.683

我也有同样的问题。

通过设置超时解决它。

```
 var scanBarcode = window.plugins.barcodeScanner.scan(
                       function(result) {
                                if (!result.cancelled){
                                     setTimeout(function(){ openUrl(result.text); },500);
                                }
                        },
                        function(error) {
                                navigator.notification.alert("scanning failed: " + error);
   }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T20:33:41.497

我遇到了完全相同的问题。

除了条形码阅读器之外，我的应用程序还有另一种显示网页的机制，当我执行该操作时，我可以看到与条形码相关的页面已加载，但从未显示。

在 ChildBrowserViewController.m 中，我正在查看`loadURL()`其中的最后一行，`webView.hidden = NO;`我认为子浏览器在我们设置条形码后设置为可见，但条形码阅读器窗口的某些内容导致子浏览器设置为错误的 z-订单，但我对 sdk 不够熟悉，不知道如何测试它或尝试将它带到前面。

希望这有助于瞄准潜在领域。

# c# - 用于验证器抛出的异常的数据类型？

> ID：12145245
> 
> 赞同：-2
> 
> 时间：2012-08-27T15:49:48.053
> 
> 标签：c#, linq-to-xml

我需要捕获验证器抛出的任何异常，但我不知道如何处理它。这是我尝试过的代码：

```
internal static class XMLValidator
{
    public static void Validate(XElement elem)
    {            
        string xsdMarkup;

        using(var file = new StreamReader(Constants.Xsd))
        {               
            xsdMarkup = file.ReadToEnd();
        }       

        XmlSchemaSet schema = new XmlSchemaSet();
        bool valid = true;
        schema.Add(XmlSchema.Read(XElement.Parse(xsdMarkup).CreateReader(), (o, e) => { }));
        new XDocument(elem).Validate(schema, (o, e) => { valid = false; exception = e; });
        if (valid == false)
        {
            throw exception;               
        }
        valid = true;                          
    }
} 
```

我收到“当前上下文中不存在名称异常”错误。我很确定问题是我没有给异常一个数据类型。但是我不知道要使用什么类型。

我尝试在异常之前添加 var 但在 if 语句中无法识别它，当然 var 不能在方法之外声明

然后，我尝试将全局豁免声明为字符串并设置为 e，如下所示：

```
exception = e.ToString(); 
```

但是我不能把它扔到 if 语句中。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T15:56:57.613

您正在使用的委托创建一个`XmlSchemaValidationException`：

```
 XmlSchemaValidationException exception = null;
    new XDocument(elem).Validate(schema, (o, e) => { valid = false; exception = e.Exception; });
    if (valid == false)
    {
        throw exception;               
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T15:56:32.543

好吧，在这种特殊情况下，您可能想要创建自己的异常类型来抛出。

```
public class InvalidDataException : Exception
{ } 
```

（有时在类的定义内做某事是合适的，但在大多数情况下你真的不需要任何东西。）

然后你可以做这样的事情：

```
throw new InvalidDataException("Error message goes here"); 
```

或者，您可以找到一些由标准库创建的现有异常类型或您拥有的异常。

# fallback - 不支持边框图像的浏览器的后备背景

> ID：12145247
> 
> 赞同：3
> 
> 时间：2012-08-27T15:49:54.133
> 
> 标签：fallback, css

我正在尝试使用 CSS3`border-image`进行简单的按钮设计：图像的左切片应该是文本的左边框，右切片应该是右边框，中间切片应该重复（或拉伸 - 没关系) 作为背景。对于不支持的浏览器，我需要一个后备`border-image`- 只使用中间切片作为背景，没有边缘是可以接受的。问题是，如果我这样做：

```
.button {
    border: solid 1px white;
    border-size: 0 5px;
    background: ('button-slice.png') repeat;
    border-image: url('button.png') 0 5 0 5 fill;
    -moz-border-image: url('button.png') 0 5 0 5;
    /* repeat for other vendor prefixes */
} 
```

来自`background`属性的图像将与边框重叠并弄乱支持`border-image`.

有没有解决这个问题的轻量级方法（不引入modernizr或类似的javascript检查）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:02:32.327

似乎新版本的 FF 支持这两个`border-image`参数并且一个覆盖另一个。

尝试颠倒这些行的顺序：

```
-moz-border-image: url('button.png') 0 5 0 5;
border-image: url('button.png') 0 5 0 5 fill; 
```

这样，支持这两个参数并用后者覆盖一个的浏览器将采用带有填充的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:11:21.023

将边框图像更改`0 5 0 5`为`1 1 5 1`：

```
border-image: url('button.png') 1 1 5 1 fill;
-moz-border-image: url('button.png') 1 1 5 1; 
```

[在线边框图像生成器](http://border-image.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T17:21:24.297

`border-image`对于后备来说很棘手。正在做...

```
.button {
    border: solid 1px white;
    border-size: 0 5px;
    background: ('button-slice.png') repeat;
    background: rgba(0,0,0,0);
    border-image: url('button.png') 0 5 0 5 fill;
    -moz-border-image: url('button.png') 0 5 0 5;
    /* repeat for other vendor prefixes */
} 
```

应该适用于除 IE9 之外的所有浏览器。

由于您只有左右边框，我建议使用伪元素...

```
.button {
    border: solid 1px white;
    background: ('button-slice.png') repeat;
    position: relative;
}

.button:before, .button:after {
  content: '';
  width: 5px;
  position: absolute;
  height: 100%;
  background: transparent url('button.png') 0 0 no-repeat;
  top: 0;
}

.button:before {left: -5px;}
.button:after {right: -5px;} 
```

这种技术应该在所有现代浏览器和 IE8 中显示漂亮的按钮。较旧的浏览器回退没有边缘。

# android - 使用现有 JSON 数据将对象添加到文件

> ID：12145251
> 
> 赞同：1
> 
> 时间：2012-08-27T15:50:12.280
> 
> 标签：android, json, gson

我目前正在Android中尝试一些东西，我正在尝试使用GSON将一些数据保存到JSON，并将新数据附加到同一个文件中。

假设这是第一次运行代码，数据被保存到名为**test.json**的文件中：

```
Gson gson = new GsonBuilder().setPrettyPrinting().create();
ArrayList<GSONObject> objects = new ArrayList<GSONObject>();

GSONObject obj = new GSONObject("sth", 1, 1345939200000);
objects.add(obj);

String json = gson.toJson(objects);

File file = new File(filePath + fileName);
FileWriter fileWriter = new FileWriter(file, true);

fileWriter.append(json);
fileWriter.close(); 
```

现在我已将其保存到文件中：

```
[ {
    "something": "sth",
    "id": 1,
    "time": 1345939200000
  } ] 
```

稍后我想再次运行该应用程序，然后将一些新数据附加到同一个文件中，使其看起来像这样：

```
[ {
    "sth": "sth",
    "id": 1,
    "time": 1345939200000
  }, 
 {
    "sth": "sth2",
    "id": 2,
    "time": 1345939500000
  } ] 
```

我正在尝试保存此过程中使用的数据量和内存量，因此我宁愿避免先将文件解析到内存中，然后再将其写回文件。

有什么建议么？它真的不必是 GSON，只要是运行良好的东西。

**编辑：** 我已经根据 maaartinus 的一些建议解决了这个问题。你可以[在这里](https://gist.github.com/3501918)看到它，如果你知道更好的解决方案，请贡献！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:12:27.683

看起来您需要文件中表示的数组 - 否则我建议通过简单地附加来创建多个独立记录。在这里，我建议使用`RandomAccessFile`，用逗号替换右括号，附加新记录和右括号。

假设您使用一些健全的编码¹，括号映射到单个字节（93），因此通过从文件末尾开始的简单循环找到它应该是相当简单的。如果没有其他人写入文件，您甚至可以假设它是最后一个字节......

¹你呢？不，您使用依赖于平台的编码，因为您没有指定`FileWriter`构造函数的编码。恕我直言，使用依赖于平台的编码从来都不是理智的，所有相应的方法都应该被弃用，但这只是我的看法。

* * *

如果单个对象（而不是它们的数组）就足够了，我建议`DataOutputStream`在条目后面写下每个对象的长度（例如，使用），这样您就可以快速简单地跳过它。或者更好的是，编写一个包含记录长度的单独索引文件（例如，以二进制形式或每行一个数字字符串）。

# javascript - jQuery validate - 仅指定 errorPlacement

> ID：12145254
> 
> 赞同：1
> 
> 时间：2012-08-27T15:50:23.240
> 
> 标签：javascript, jquery, jquery-validate

我很难让错误放置工作。我的页面上有一系列表单，每个表单都使用内置的验证类——必需、数字等——但由于某种原因，错误放置不起作用。完全没有。

表单验证的其余部分效果很好，但我没有显示我的警报。

```
$(".bundle-forms-form-container form").validate({
    errorPlacement: function(error, element) {
        alert("X");
        var customTarget = $(element).closest("form").find(".errorHere");
        if (true || customTarget.length)
            customTarget.html(error);
        //else
            error.insertAfter(element);
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T16:10:43.050

看起来问题在于，如果您对具有多个表单的结果集调用 validate ，那么 jQuery validate 就会失去理智。解决方法很简单

```
$(".bundle-forms-form-container form").each(function(i, el){
    $(el).validate({
        errorPlacement: function(error, element) {
            var customTarget = $(element).closest("form").find(".errorHere");
            if (customTarget.length)
                customTarget.empty().append(error);
            else
                error.insertAfter(element);
        }
    });
}); 
```

# ios - 用 3 列值填充表格行

> ID：12145255
> 
> 赞同：0
> 
> 时间：2012-08-27T15:50:32.890
> 
> 标签：ios, algorithm, modulo

我有一个有 2 行的表，其中每 3 列，还有一个有 5 个值的数组。这些值应连续显示在 3 列中，例如

```
indexPath.row 0: Array[0] | Array[1] | Array[2]
indexPath.row 1: Array[3] | Array[4] | 
```

我想创建一些编码，它将我的值（它不在乎有多少，例如 5,6,7,...,20,21 以 3 列的格式显示）行的大小为具有值的数组。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{    
    NSMutableArray *values = [... getValues];
    int no=0;
    if (values) {
        no=(values.count+1)/3;
    }
    else{
        no=0;
    }
    return no;
} 
```

我目前的问题是，我没有得到分布在列中的 5 个值。我正在努力计算，这些不适合数组的索引......

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
//order values in 3 columns and 2 rows (currently)...
} 
```

BR，迈贝克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:01:47.363

假设 COLS 是列数，V 是值的数量，其中 M 是矩阵，Vector 是值向量：

```
for i = 0 to V-1:
    M[i div COLS][i mod COLS] = Vector[i] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T09:19:43.173

找到了解决方案。

```
NSInteger count = numberOfValues;
NSInteger start = indexPath.row * 3;
NSInteger end = MIN(start + 3, count);

for(int i = start; i < end; i++)
{
  if(i%3 == 0){//left}
  if(i%3 == 1){//center}
  if(i%3 == 2){//right}
} 
```

# java - 由于 For 循环中的堆内存而导致内存不足？

> ID：12145256
> 
> 赞同：1
> 
> 时间：2012-08-27T15:50:34.257
> 
> 标签：java, android, heap-memory

最近，我声明了一个函数，并将函数放入`for`如下循环中：

```
 Bitmap image = ...//Do stuff to get image's bitmap, it's quite ok
 for(int i =0; i < someNumber; i++){
      image = doSomeThing(image, width, height);      
 }

 private Bitmap doSomeThing(image, width, height){
      int[] a = new int[10000];
      Bitmap bitmap = image.copy(sentBitmap.getConfig(), true);
      // Do some stuff here to process image
      ...
      return (bitmap);
 } 
```

`for`循环参数`someNumber`小于 5，我的应用程序很好，否则，我将是`outOfMemory`. 所以我想寻求解决这个问题的建议`exception`！我可以使用`System.gc()`吗？或者我可以在每个循环之后做些什么来删除未使用的内存`for`吗？

编辑：对不起，也许我省略了太多，我更新了我的代码！

**Edited2** ：如果我多次调用而不是`for`循环，那就没有了！！`image = doSomething(...)``exception`

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:00:33.060

You probably need to call `image.recycle()` when you're done with it in the for loop.

Edit: Ah, I see what you're trying to do, apply multiple filters to the same image. Try this:

```
 Bitmap image = ...;
 for(int i =0; i < someNumber; i++){
      Bitmap newImage = doSomeThing(image, width, height);
      image.recycle();
      image = newImage;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T15:56:02.863

On a `Java` standpoint the `System.gc()` will probably have no effect because as you run out of memory Java will clear it if it can.

Your `doSomeThing()` call is probably creating too many object for the amount of memory you have.

Either increase it and if you can't because of constraints on memory footprint, adjust your `Eden` space.

# ms-access - Distinct Row - 基于两个字段

> ID：12145258
> 
> 赞同：1
> 
> 时间：2012-08-27T15:50:52.560
> 
> 标签：ms-access, ms-access-2010

有没有办法让表定义基于两个字段的非重复？

通过这个我有 3 列 gid, cid, price

标准：

*   只能有1`cid`对1`gid`
*   `cid`只要有多个`gid`并且不违反标准 1 就可以有多个

如果可能的话，我基本上希望在表格设计中有限制。不知道它是否可能只是想我会问。

* * *

# 编辑 (2010-08-27 11:18am CST)

好的，澄清一下，我也有两个索引，一个打开`gid`，另一个打开`cid`，我可以让这两个索引确定唯一性吗？该表基本上是一个连接表，因为绘制的两个表具有一对多的关系，只要它们的对应项对其 id 是唯一的。

表/索引声明：

*   gid {Numeric:Long}（主要：否，唯一：否，忽略空值：否）[FK]
*   cid {Numeric:Long}（主要：否，唯一：否，忽略空值：否）[FK]
*   价格{数字：单}

用法：

*   cid 1 - 许多 gid
    *   cid 源自 tblCat（作为 PK）
*   gid 1-许多 cid
    *   gid 派生自 tblGrp（作为 PK）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:26:49.497

在 MS Access 中创建多字段索引没有任何困难。您只需单击索引按钮（闪电）并选择您需要的。

![在此处输入图像描述](../Images/0b1a23d9fbe2f372a5936ae10b200724.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T18:36:07.143

您的第一个要点是...

*   1 gid 只能有 1 cid

但后来你说...

*   gid 1-许多 cid

所以我不确定你想要什么。如果此数据集代表可接受的样本值...

```
gid cid
  1   1
  2   1
  2   2 
```

...我使用以下过程创建了该表。主键是`gid`和上的复合索引`cid`。这禁止这些字段的 Null 值，并确保只有唯一的值对可以存储在表中。

一个`gid`值可以与多个不同的`cid`值配对。一个`cid`可能与多个不同的`gid`值配对。

如果这不是你所追求的，请澄清你想要什么。如果您只需要一个额外的索引`cid`，您可以添加一个......它不会干扰主键索引。

这是我使用的程序。

```
Public Sub CreateTable_GoldBishop()
    Const cstrTable As String = "tblGoldBishop"
    Dim cn As Object
    Dim strSql As String

    Set cn = CurrentProject.Connection
    strSql = "CREATE TABLE " & cstrTable & "(" & vbCrLf & _
        "gid INTEGER," & vbCrLf & _
        "cid INTEGER," & vbCrLf & _
        "price SINGLE," & vbCrLf & _
        "CONSTRAINT pkey PRIMARY KEY" & _
        "(gid, cid)" & vbCrLf & _
        ");"
    Debug.Print strSql
    cn.Execute strSql
    Set cn = Nothing
End Sub 
```

顺便说一句，我并不是要告诉您使用 DDL 创建表，但如果这是您想要的表设计，您可以运行该过程，然后在设计视图中检查表。

# graphics - 如何在 CF 中绘制偏椭圆？（完整框架中的 Graphics.DrawArc）

> ID：12145260
> 
> 赞同：1
> 
> 时间：2012-08-27T15:51:06.333
> 
> 标签：graphics, drawing, compact-framework, system.drawing, compact-framework2.0

我希望会有一个简单的答案，因为通常情况下，从 Compact Framework 中剥离出来的东西会以一种看似迂回的方式执行，但与完整的框架一样好（或者可以变得更高效）。

简单地说，我希望能够在 Compact Framework 2.0 中做一个类似于 System.Drawing.Graphics.DrawArc(...) 的功能。

它用于 UserControl 的 OnPaint 覆盖，在我已经填充的椭圆内绘制弧线。

本质上（关闭伪代码，请忽略参数中的缺陷）：

```
FillEllipse(ellipseFillBrush, largeEllipseRegion);
DrawArc(arcPen, innerEllipseRegion, startAngle, endAngle); //not available in CF 
```

我只在 90 度空间中绘制弧线，所以椭圆弧的右下角，或左上角。如果任何角度的答案真的是迂回、困难或效率低下，虽然有一个简单的解决方案可以只做一个椭圆**的一个角**，但我对后者很好，尽管前者会帮助其他有类似问题的人.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T15:57:40.220

我使用此代码，然后将 FillPolygon 或 DrawPolygon 与输出点一起使用：

```
private Point[] CreateArc(float StartAngle, float SweepAngle, int PointsInArc, int Radius, int xOffset, int yOffset, int LineWidth)
{
    if(PointsInArc < 0)
        PointsInArc = 0;

    if(PointsInArc > 360)
        PointsInArc = 360;

    Point[] points = new Point[PointsInArc * 2];
    int xo;
    int yo;
    int xi;
    int yi;
    float degs;
    double rads;

    for(int p = 0 ; p < PointsInArc ; p++)
    {
        degs = StartAngle + ((SweepAngle / PointsInArc) * p);

        rads = (degs * (Math.PI / 180));

        xo = (int)(Radius * Math.Sin(rads));
        yo = (int)(Radius * Math.Cos(rads));
        xi = (int)((Radius - LineWidth) * Math.Sin(rads));
        yi = (int)((Radius - LineWidth) * Math.Cos(rads));

        xo += (Radius + xOffset);
        yo = Radius - yo + yOffset;
        xi += (Radius + xOffset);
        yi = Radius - yi + yOffset;

        points[p] = new Point(xo, yo);
        points[(PointsInArc * 2) - (p + 1)] = new Point(xi, yi);
    }

    return points;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-05T20:26:17.433

我遇到了这个问题，我和我的团队解决了为紧凑框架图形类创建扩展方法的问题；

我希望我可以帮助某人，因为我花了很多时间来获得这个不错的解决方案

毛里西奥·德·索萨·科埃略

嵌入式软件工程师

```
public static class GraphicsExtension
{
    // Implements the native Graphics.DrawArc as an extension
    public static void DrawArc(this Graphics g, Pen pen, float x, float y, float width, float height, float startAngle, float sweepAngle)
    {
        //Configures the number of degrees for each line in the arc
        int degreesForNewLine = 5;

        //Calculates the number of points in the arc based on the degrees for new line configuration
        int pointsInArc = Convert.ToInt32(Math.Ceiling(sweepAngle / degreesForNewLine)) + 1;

        //Minimum points for an arc is 3
        pointsInArc = pointsInArc < 3 ? 3 : pointsInArc;

        float centerX = (x + width) / 2;
        float centerY = (y + height) / 2;

        Point previousPoint = GetEllipsePoint(x, y, width, height, startAngle);

        //Floating point precision error occurs here
        double angleStep = sweepAngle / pointsInArc;

        Point nextPoint;
        for (int i = 1; i < pointsInArc; i++)
        {
            //Increments angle and gets the ellipsis associated to the incremented angle
            nextPoint = GetEllipsePoint(x, y, width, height, (float)(startAngle + angleStep * i));

            //Connects the two points with a straight line
            g.DrawLine(pen, previousPoint.X, previousPoint.Y, nextPoint.X, nextPoint.Y);

            previousPoint = nextPoint;
        }

        //Garantees connection with the last point so that acumulated errors cannot
        //cause discontinuities on the drawing
        nextPoint = GetEllipsePoint(x, y, width, height, startAngle + sweepAngle);
        g.DrawLine(pen, previousPoint.X, previousPoint.Y, nextPoint.X, nextPoint.Y);
    }

    // Retrieves a point of an ellipse with equation:
    private static Point GetEllipsePoint(float x, float y, float width, float height, float angle)
    {
        return new Point(Convert.ToInt32(((Math.Cos(ToRadians(angle)) * width + 2 * x + width) / 2)), Convert.ToInt32(((Math.Sin(ToRadians(angle)) * height + 2 * y + height) / 2)));
    }

    // Converts an angle in degrees to the same angle in radians.
    private static float ToRadians(float angleInDegrees)
    {
        return (float)(angleInDegrees * Math.PI / 180);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T13:59:36.237

继@ctacke 的响应之后，它为圆（高度 == 宽度）创建了一个弧形多边形，我对其进行了进一步编辑并创建了一个函数，用于为曲线创建点数组，而不是多边形，并为任何椭圆。

注意：这里的 StartAngle 是 NOON 位置，90 度是 3 点钟位置，所以 StartAngle=0 和 SweepAngle=90 是从中午到 3 点钟位置的弧线。
原来的 DrawArc 方法中 3 点钟为 0 度，90 度为 6 点钟位置。只需注意将 DrawArc 替换为 CreateArc，然后将 DrawLines 替换为生成的 Point[] 数组。
我会进一步玩这个来改变它，但是为什么要破坏一些有效的东西呢？

```
private Point[] CreateArc(float StartAngle, float SweepAngle, int PointsInArc, int ellipseWidth, int ellipseHeight, int xOffset, int yOffset)
{
    if (PointsInArc < 0)
        PointsInArc = 0;

    if (PointsInArc > 360)
        PointsInArc = 360;

    Point[] points = new Point[PointsInArc];
    int xo;
    int yo;
    float degs;
    double rads;

    //could have WidthRadius and HeightRadius be parameters, but easier
    // for maintenance to have the diameters sent in instead, matching closer
    // to DrawEllipse and similar methods
    double radiusW = (double)ellipseWidth / 2.0;
    double radiusH = (double)ellipseHeight / 2.0;

    for (int p = 0; p < PointsInArc; p++)
    {
        degs = StartAngle + ((SweepAngle / PointsInArc) * p);

        rads = (degs * (Math.PI / 180));

        xo = (int)Math.Round(radiusW * Math.Sin(rads), 0);
        yo = (int)Math.Round(radiusH * Math.Cos(rads), 0);

        xo += (int)Math.Round(radiusW, 0) + xOffset;
        yo = (int)Math.Round(radiusH, 0) - yo + yOffset;

        points[p] = new Point(xo, yo);
    }

    return points;
} 
```

# google-analytics - 根据谷歌分析访问持续时间

> ID：12145263
> 
> 赞同：1
> 
> 时间：2012-08-27T15:51:11.717
> 
> 标签：google-analytics, duration

我想知道“访问时间”是如何计算的。如果它计算网站上点击之间的拆分时间。

因为我有一个仅由索引组成的网站（带有一些幻灯片等）。

GA工具是否能够计算实际访问持续时间？

非常感谢。

*如果有错误，对不起我的英语*

**编辑：** 有没有办法在后台重新加载（模拟网页浏览）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T15:54:49.487

来自[谷歌](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1144430)：

> 谷歌分析通过跟踪页面浏览之间经过的时间来确定访问持续时间。由于没有后续的综合浏览量，因此不记录访问的最后一页。

另请参阅[访问持续时间，平均](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1006253)

# android - 为什么 MQTT 客户端无法重新连接？

> ID：12145268
> 
> 赞同：2
> 
> 时间：2012-08-27T15:51:34.707
> 
> 标签：android, mqtt

我正在为 Android 编写一个 MQTT 客户端。我正在使用 ia92 库 (wmqtt.jar) 并尝试从 MQ 获取消息，以便将它们显示为 android 通知。我的问题是我第一次尝试连接MQ时，我的android客户端应用程序连接成功，并且可以正常获取MQ消息。当我关闭 Wi-Fi 并断开网络连接时，MQTT 客户端连接按预期断开，但是当我再次打开它时，应用程序没有建立 MQ 连接并抛出 MQTTException，没有错误代码。

```
mqttClient.connect(this.mqttClientId, cleanStart, keepAliveSeconds); 
```

这有什么问题？我非常需要任何一点帮助..

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-16T16:27:29.037

Java Paho 客户端实现包含一个 Android 服务客户端和示例： [https ://github.com/eclipse/paho.mqtt.java/tree/master/org.eclipse.paho.android.service](https://github.com/eclipse/paho.mqtt.java/tree/master/org.eclipse.paho.android.service)

您还可以找到使用 Java Paho Client 在 Android 中实现推送通知的示例： [https ://github.com/dobermai/android-mqtt-push](https://github.com/dobermai/android-mqtt-push)

# c# - 使用 64 位 Oracle 客户端从 32 位进程连接 Oracle DB

> ID：12145269
> 
> 赞同：0
> 
> 时间：2012-08-27T15:51:36.800
> 
> 标签：c#, oracle, operating-system, oracleclient

我有应用程序以 32 位模式运行。它尝试使用 Oracle 客户端连接 oracle DB。Oracle 客户端以 64 位运行。

```
string connectionString = @"Data Source=" + oracleDBName + ";User id=" + oracleDBUserId +";Password=" + oracleDBPwd +";";
            OracleConnection con = new OracleConnection(connectionString);
            try
            {
                con.Open();
                if (con != null)
                {
                    con.Open();
                }
                return true;
            }
            catch (OracleException)
            {
                return false;
            } 
```

我打电话时收到 targetinvocationexception

> con.Open();

原因，由于应用程序在 32 位模式下运行，因此无法加载 64 位 dll。

我无法更改应用程序模式。我也无法安装 32 位 Oracle 客户端。如何解决这个问题呢

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:14:04.890

.NET 的 Oracle 驱动程序“需要来自 Oracle 的本机”客户端。（存在瘦客户端的不是 Java）

试试即时客户端，它不需要安装。 [http://www.oracle.com/technetwork/topics/winsoft-085727.html](http://www.oracle.com/technetwork/topics/winsoft-085727.html)

此外，您可以尝试使用 ODBC .NET 驱动程序，但将 ODBC DSN 配置为使用 Microsoft 的 Oracle 驱动程序（大多数 Windows 安装程序都有 Microsoft 的 odbc 驱动程序用于 oracle 开箱即用）。再次：
1) 对于 32 位应用程序，您需要 32 位版本的 ODBC
2) oracle 即时客户端应该在搜索路径中可用

在 Windows 64 位中，有用于 32 位和 64 位应用程序的两个版本的 ODBC 管理面板。要运行 32b 版本，请执行 C:\Windows\SysWOW64\odbcad32.exe。

# tomcat - login.html 上的状态 404

> ID：12145272
> 
> 赞同：0
> 
> 时间：2012-08-27T15:51:50.773
> 
> 标签：tomcat, jasper-reports, jasperserver

我已经部署了*JasperReports Server* 4.5.0

当我打开登录 URL 时：localhost:5555/jasperserver/login.html 我找不到 404 状态文件。

在 localhost.log 中检查时，我得到了日志：

严重：向类 org.springframework.web.context.ContextLoaderListener org.springframework.beans.factory.BeanCreationException 的侦听器实例发送上下文初始化事件的异常：在 ServletContext 资源 [/WEB-INF/applicationContext -themes.xml]：在设置 bean 属性 'themeCache' 时无法解析对 bean 'themeCache' 的引用；嵌套异常是 org.springframework.beans.factory.BeanCreationException：创建 ServletContext 资源 [/WEB-INF/applicationContext-themes.xml] 中定义的名称为“themeCache”的 bean 时出错：设置 bean 属性时无法解析对 bean 'unsecureRepositoryService' 的引用'存储库服务'; 嵌套异常是 org.springframework.beans.factory.BeanCreationException：创建名为“unsecureRepositoryService”的 bean 时出错：FactoryBean 在创建对象时抛出异常；嵌套异常是 org.springframework.beans.factory.BeanCreationException：创建 ServletContext 资源 [/WEB-INF/applicationContext.xml] 中定义的名称为“hibernateRepositoryService”的 bean 时出错：在设置 bean 属性“repositoryListeners”时无法解析对 bean“hibernateRepositoryListeners”的引用'; 嵌套异常是 org.springframework.beans.factory.BeanCreationException：创建 ServletContext 资源 [/WEB-INF/applicationContext.xml] 中定义的名称为“hibernateRepositoryListeners”的 bean 时出错：在使用键设置构造函数参数时无法解析对 bean“schedulingReportDeleteListener”的引用[0]；嵌套异常是 org.springframework.beans.factory。BeanCreationException：在 ServletContext 资源 [/WEB-INF/applicationContext-report-scheduling.xml] 中定义名称为“schedulingReportDeleteListener”的 bean 创建错误：设置 bean 属性“schedulingService”时无法解析对 bean“reportSchedulingService”的引用；嵌套异常是 org.springframework.beans.factory.BeanCreationException：创建名为“reportSchedulingService”的 bean 时出错：FactoryBean 在创建对象时抛出异常；嵌套异常是 org.springframework.beans.factory.BeanCreationException：在 ServletContext 资源 [/WEB-INF/applicationContext-report-scheduling.xml] 中定义名称为“reportSchedulingFacade”的 bean 创建时出错：设置时无法解析对 bean 'reportScheduler' 的引用bean 属性“调度程序”；嵌套异常是 org. springframework.beans.factory.BeanCreationException：在 ServletContext 资源 [/WEB-INF/applicationContext-report-scheduling.xml] 中定义名称为“reportScheduler”的 bean 创建错误：在设置 bean 属性“target”时无法解析对 bean“reportQuartzScheduler”的引用; 嵌套异常是 org.springframework.beans.factory.BeanCreationException：在 ServletContext 资源 [/WEB-INF/applicationContext-report-scheduler bean 属性“调度程序”；嵌套异常是 org.springframework.beans.factory.BeanCreationException：在 ServletContext 资源 [/WEB-INF/applicationContext-report-scheduling. xml]: init 方法调用失败；嵌套异常是 java.lang.IllegalStateException：没有实例 ID 就无法运行。在 org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:275) 在 org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:104) 在 org.springframework.beans.factory .support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1245) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1010) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateCapBean(AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1010) .java：NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at org.apache.catalina.startup .Bootstrap.start(Bootstrap.java:289) at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414) 原因：org.springframework.beans.factory.BeanCreationException：创建名为“themeCache”的bean时出错'在 ServletContext 资源 [/WEB-INF/applicationContext-themes.xml] 中定义：在设置 bean 属性 'repositoryService' 时无法解析对 bean 'unsecureRepositoryService' 的引用；嵌套异常是 org.springframework.beans.factory.BeanCreationException：创建名为“unsecureRepositoryService”的 bean 时出错：FactoryBean 在创建对象时抛出异常；嵌套异常是 org.springframework.beans.factory.BeanCreationException：创建 ServletContext 资源 [/WEB-INF/applicationContext.xml] 中定义的名称为“hibernateRepositoryService”的 bean 时出错：在设置 bean 属性“repositoryListeners”时无法解析对 bean“hibernateRepositoryListeners”的引用'; 嵌套异常是 org.springframework.beans.factory.BeanCreationException：创建 ServletContext 资源 [/WEB-INF/applicationContext.xml] 中定义的名称为“hibernateRepositoryListeners”的 bean 时出错：使用键设置构造函数参数时无法解析对 bean 'schedulingReportDeleteListener' 的引用[0]；嵌套异常是 org.springframework.beans.factory.BeanCreationException: Error created bean with name ' 在 ServletContext 资源 [/WEB-INF/applicationContext-report-scheduling.xml] 中定义的 schedulingReportDeleteListener'：在设置 bean 属性 'schedulingService' 时无法解析对 bean 'reportSchedulingService' 的引用；嵌套异常是 org.springframework.beans.factory.BeanCreationException：创建名为“reportSchedulingService”的 bean 时出错：FactoryBean 在创建对象时抛出异常；嵌套异常是 org.springframework.beans.factory.BeanCreationException：在 ServletContext 资源 [/WEB-INF/applicationContext-report-scheduling.xml] 中定义名称为 'reportSchedulingFacade' 创建 bean 时出错：设置时无法解析对 bean 'reportScheduler' 的引用bean 属性“调度程序”；嵌套异常是 org.springframework.beans.factory.BeanCreationException：在 ServletContext 资源 [/WEB-INF/applicationContext-report-scheduling.xml] 中创建名称为“reportScheduler”的 bean 时出错：在设置 bean 属性“target”时无法解析对 bean“reportQuartzScheduler”的引用；嵌套异常是 org.springframework.beans.factory.BeanCreationException：在 ServletContext 资源 [/WEB-INF/applicationContext-report-scheduler bean 属性“调度程序”；嵌套异常是 org.springframework.beans.factory.BeanCreationException：在 ServletContext 资源 [/WEB-INF/applicationContext-report-scheduling.xml] 中定义名称为 'quartzScheduler' 创建 bean 时出错：调用 init 方法失败；嵌套异常是 java.lang.IllegalStateException：没有实例 ID 就无法运行。在 org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:275) 在 org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:104) 在 org.springframework.beans.factory .support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1245) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1010) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateCapBean(AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1010) .java:472) 在 org.springframework.beans.factory。

原因：org.springframework.beans.factory.BeanCreationException：创建名为“unsecureRepositoryService”的bean时出错：FactoryBean在创建对象时抛出异常；嵌套异常是 org.springframework.beans.factory.BeanCreationException：创建 ServletContext 资源 [/WEB-INF/applicationContext.xml] 中定义的名称为“hibernateRepositoryService”的 bean 时出错：在设置 bean 属性“repositoryListeners”时无法解析对 bean“hibernateRepositoryListeners”的引用'; 嵌套异常是 org.springframework.beans.factory.BeanCreationException：创建 ServletContext 资源 [/WEB-INF/applicationContext.xml] 中定义的名称为“hibernateRepositoryListeners”的 bean 时出错：无法解析对 bean 'schedulingReportDeleteListener' 的引用 同时使用键 [0] 设置构造函数参数；嵌套异常是 org.springframework.beans.factory.BeanCreationException：在 ServletContext 资源 [/WEB-INF/applicationContext-report-scheduling.xml] 中定义名称为 'schedulingReportDeleteListener' 创建 bean 时出错：设置时无法解析对 bean 'reportSchedulingService' 的引用bean 属性“调度服务”；嵌套异常是 org.springframework.beans.factory.BeanCreationException：创建名为“reportSchedulingService”的 bean 时出错：FactoryBean 在创建对象时抛出异常；嵌套异常是 org.springframework.beans.factory.BeanCreationException：在 ServletContext 资源 [/WEB-INF/applicationContext-report-scheduling.xml] 中定义名称为“reportSchedulingFacade”的 bean 创建错误：设置 bean 属性“scheduler”时无法解析对 bean“reportScheduler”的引用；嵌套异常是 org.springframework.beans.factory.BeanCreationException：在 ServletContext 资源 [/WEB-INF/applicationContext-report-scheduling.xml] 中定义名称为“reportScheduler”的 bean 创建时出错：设置时无法解析对 bean“reportQuartzScheduler”的引用bean 属性“目标”；嵌套异常是 org.springframework.beans.factory.BeanCreationException：在 ServletContext 资源 [/WEB-INF/applicationContext-report-scheduler bean 属性“调度程序”；嵌套异常是 org.springframework.beans.factory.BeanCreationException：在 ServletContext 资源 [/WEB-INF/applicationContext-report-scheduling.xml] 中定义名称为“quartzScheduler”的 bean 创建错误：调用 init 方法失败；嵌套异常是 java.lang.IllegalStateException：没有实例 ID 就无法运行。在 org.springframework.beans.factory.support.FactoryBeanRegistrySupport$1.run(FactoryBeanRegistrySupport.java:127) 在 java.security.AccessController.doPrivileged(Native Method) 在 org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport .java:116) 在 org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:91) 在 org.springframework.beans.factory.support.AbstractBeanFactory。

and so on

please help

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T08:56:17.180

Resolved.

I had done the installation on a fresh machine which was not having the entry for hostname in the /etc/hosts file. I made an entry in the file and it worked.

# windows-installer - 高级安装程序不工作

> ID：12145273
> 
> 赞同：2
> 
> 时间：2012-08-27T15:51:54.707
> 
> 标签：windows-installer, setup-project, advanced-installer

我有一个问题，我正在尝试为基于 Windows C# 的应用程序构建一个 msi 设置。它是一个 Windows 桌面应用程序。当我使用 Visual Studio 2010 构建设置时，它成功运行，但每当我使用[Advanced Installer](http://www.advancedinstaller.com)时，它都会给我一个错误。它跳转到应用程序的中间并生成错误。这是我正在做的事情：

我已经配置了第一部分，使用教程清楚地表示应用程序信息。这是教程的链接：http: [//www.advancedinstaller.com/user-guide/tutorial-professional.html](http://www.advancedinstaller.com/user-guide/tutorial-professional.html) 在应用程序文件夹中，我添加了整个发布文件夹，[我在发布文件夹中构建了我的应用程序]我也为可执行文件创建了快捷方式。

它构建成功但是当我运行它时，它在安装后给我错误？

我使用 Advanced Installer 的原因是我需要一些自定义的先决条件并检查注册表中的某些值。而且我认为 Advanced Installer 提供了这些选项。任何其他选择也将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T05:41:45.210

那么安装后出现错误呢？即当您使用快捷方式启动已安装的应用程序时，是吗？如果是这样，您的程序集似乎缺少一些依赖项。您是否为您的主要可执行文件尝试过“添加依赖项”选项？只需转到文件视图，右键单击它，您就会在上下文菜单中找到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T11:43:07.150

我发现了错误。错误是当我在 Advance Installer 中创建桌面文件夹上的可执行文件的快捷方式时，我将其重命名为某个名称，而 .exe 扩展名一直被截断。但奇怪的是它正在运行但不工作。我保留了正确扩展名的名称。现在它可以工作了 :) - 确保您没有删除您在桌面文件夹或您访问的任何其他文件夹中创建的快捷方式的扩展名 .exe。

# css - Rails 3 中的多个共享页脚

> ID：12145274
> 
> 赞同：0
> 
> 时间：2012-08-27T15:51:57.503
> 
> 标签：css, ruby-on-rails-3, footer

有没有办法在 Rails 中呈现不同的共享页脚，例如，我希望主页有一个页脚，然后在整个站点中使用不同的页脚。

有没有人这样做过？我在想 if 语句会根据查看的页面起作用吗？不确定这是否正确

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:58:16.003

如果您有以下布局：

*   应用程序/视图/布局/application.html.erb
*   应用程序/视图/布局/home.html.erb

您只需在主页控制器中指定布局，如

```
class HomeController < ApplicationController
  layout 'home'
  #everything else follows...
end 
```

您的其余视图将使用默认值，即`application.html.erb`.

# java - 卸载 JPA 引用

> ID：12145277
> 
> 赞同：0
> 
> 时间：2012-08-27T15:52:05.877
> 
> 标签：java, jpa, jpa-2.0, eclipselink

jpa 2.0 是否有某种“相反”来引用延迟加载注释？即一个注释，提示 jpa 如果带注释的引用是对该对象的唯一剩余引用，则如果内存不足，则目标对象有资格进行垃圾收集。

如果访问先前加载的引用，我将完全满足于支付性能损失，因为它已被换出，导致后续加载相同的引用。我需要这样的行为，因为我的域太大而无法保存在内存中。我一直在寻找这个，但一直空手而归，这让我想知道我是否错误地解决了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T21:16:21.310

> jpa 2.0 是否有某种“相反”来引用延迟加载注释？

与之相反的`Lazy`是`Eager`，不幸的是，这可能不是您想要的，因为这些是“获取方法”。

> 即一个注释，提示 jpa 如果带注释的引用是对该对象的唯一剩余引用，则如果内存不足，则目标对象有资格进行垃圾收集。

不，没有这样的注释。这种行为听起来像是你不想要的。这可以在`NullPointerException`s、`IndexOutOfBoundException`s、`LazyInitializationException`s 等中解决。一个对象只有在对象没有对它的引用时才有资格进行垃圾回收。（这不是 gc 的完整解释，但这是基本规则。）

> 如果访问先前加载的引用，我将完全满足于支付性能损失，因为它已被换出，导致后续加载相同的引用。我需要这样的行为，因为我的域太大而无法保存在内存中。我一直在寻找这个，但一直空手而归，这让我想知道我是否错误地解决了这个问题。

我认为您以错误的方式处理问题。我对你的申请一无所知，所以很难说你能做什么。如果不再需要某个对象（通过您的方式），那么您需要处理它。JPA 不会自动为您执行此操作。

# javascript - 在 iframe 中动态插入/切换样式表（托管在我的域上的 iframe 源）

> ID：12145278
> 
> 赞同：0
> 
> 时间：2012-08-27T15:52:08.290
> 
> 标签：javascript, jquery, iframe

我想知道是否有一个简单的解决方案可以在 iframe 中的页面上切换样式表。基本上，这就是我的想法>

```
<iframe name="iframe" src="page on my domain.html"></iframe>

<form id="switcher">
  <input type="button" value="Switch to style 1" />
  <input type="button" value="Switch to style 2" />
  <input type="button" value="Switch to style 3" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:08:18.320

你可以试试这个：

```
<iframe id="iframe" name="iframe" src="test.html"></iframe>
<form id="switcher">
  <input type="button" value="Switch to style 1" onclick="var a=document.getElementById('iframe').contentDocument.getElementsByTagName('link');a=a[0];a.href='path/to/some.css';" />
  <input type="button" value="Switch to style 2" />
  <input type="button" value="Switch to style 3" />
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:07:46.030

假设安装了 jQuery：

[http://www.kelvinluck.com/2009/07/jquery-styleswitch-now-with-toggle/](http://www.kelvinluck.com/2009/07/jquery-styleswitch-now-with-toggle/)

好的，这真的容易多了......我使用 css zen garden 来获取这个测试的样式页面：

对于您的 HTML：

```
<iframe name="iframe" 
   id="iframetarget" 
   src="http://www.csszengarden.com/" 
   width=400 
   height=400>
</iframe>

<form id="switcher">
  <input type="button" id="v1" value="Switch to style 1" />
  <input type="button" id="v2" value="Switch to style 2" />
  <input type="button" id="v3" value="Switch to style 3" />
</form>​ 
```

对于你的 jQuery：

```
$('#v1').click(function() {
    $('#iframetarget').prop({
        src: 'http://www.csszengarden.com/?cssfile=/213/213.css&amp;page=0'
    });
});
$('#v2').click(function() {
    $('#iframetarget').prop({
        src: 'http://www.csszengarden.com/?cssfile=/212/212.css&amp;page=0'
    });
});

$('#v3').click(function() {
    $('#iframetarget').prop({
        src: 'http://www.csszengarden.com/?cssfile=/211/211.css&amp;page=0'
    });
});​ 
```

这是用小提琴测试的，它可以工作：

[http://jsfiddle.net/sablefoste/DbYPp/1/](http://jsfiddle.net/sablefoste/DbYPp/1/)

# c - 删除日志文件时将 STDERR 重定向到日志文件中断

> ID：12145279
> 
> 赞同：0
> 
> 时间：2012-08-27T15:52:13.617
> 
> 标签：c, redirect, stderr

有一个用 C 开发的在 unix 环境下运行的服务器代码，服务器将 STDOUT/STDERR 重定向到日志如下

```
static gboolean
create_log_file (const char *log_file)
{
  int log_file_fd;

  g_return_val_if_fail (log_file != NULL, FALSE);

  log_file_fd = open (log_file, O_WRONLY|O_CREAT|O_TRUNC, 0644);

  if (log_file_fd < 0)
    {
      return FALSE;
    }

  dup2 (log_file_fd, 1);
  dup2 (log_file_fd, 2);

  close (log_file_fd);

  return TRUE;
} 
```

计划为此日志文件设置归档/清除 cron，以确保磁盘使用量在限制范围内。

日志记录工作得很好，直到清除 cron 启动并删除日志文件。

观察 cron 运行后的日志文件删除，STDERR 跟踪停止并且不再创建文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:12:30.877

一旦打开，文件描述符将保持与您`open(2)`在函数调用时传递给的名称指定的文件的关联。如果您稍后从磁盘中删除该文件，您将*取消*它与该名称的链接，但该文件会一直存在，直到所有对它的引用都消失了。

删除文件后，您的程序是唯一剩余的引用持有者。程序将继续写入文件，但您不能再命名该文件。出于安全原因，内核实际上不*希望*您能够重新获得此类拖欠文件的名称，并且您无法在不修改操作系统的情况下取回它们（有一个 Linux 内核模块可以实现这种僵尸复活，但我怀疑Windows有类似的东西）。当您的程序结束时，该文件最终被永久删除。

# objective-c - 在 iOS 的选项卡之间传递数据

> ID：12145282
> 
> 赞同：5
> 
> 时间：2012-08-27T15:52:21.043
> 
> 标签：objective-c, ios, cocoa-touch, tabs

这是我自己尝试做的第一个应用程序，我有一些问题。我想要 4 个选项卡，在第一个名为“HomeView”的选项卡中，我正在解析 JSON 数据（到目前为止已完成）。

但我想要的是一些正在被解析为在其他选项卡中可见的数据（并且不必再次解析它们）。

所以我的 HomeView 部分代码在这里：

```
#import "HomeView.h"

@interface HomeView ()
@end

@implementation HomeView

//other code

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
//data fetched
parsed_date=[res objectForKey:@"date"];
 NSLog(@"Date:%@",parsed_date);
[UIAppDelegate.myArray  addObject:parsed_date];
        } 
```

我可以看到正确打印出“parsed_date”。

所以我希望这个 parsed_date 在 OtherView 中可见。

这是我的代码，但我无法打印出来。

其他视图.m

```
#import "OtherView.h"
#import "HomeView.h"
#import "AppDelegate.h"

@interface OtherView ()

@end

@implementation OtherView
@synthesize tracks_date;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    //preview value of other class
   tracks_date = [UIAppDelegate.myArray objectAtIndex:0];
NSLog(@"Dated previed in OtherView: %@", tracks_date);
} 
```

和 (null) 正在被打印出来。

添加了应用程序 delegate.h 的代码

```
#import <UIKit/UIKit.h>

#define UIAppDelegate ((AppDelegate *)[UIApplication sharedApplication].delegate)

@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;
@property (nonatomic, strong) NSArray *myArray;

@end 
```

那么你能建议我一个解决方案吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-27T15:59:00.513

而是将该属性添加到您的应用程序委托中。

分配属性时，请执行以下操作：

```
MyAppDelegate *delegate = (MyAppDelegate *)[[UIApplication sharedApplication] delegate];

delegate.myProperty = @"My Value"; 
```

然后，在您的不同选项卡中，您可以以相同的方式检索此属性：

```
MyAppDelegate *delegate = (MyAppDelegate *)[[UIApplication sharedApplication] delegate];
NSString *valueInTab = delegate.myProperty; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T16:01:18.687

呃，当您在那里的最后一个代码段中创建 HomeView 时，您正在创建一个新对象——该类的一个新*实例*。它不会包含来自 connectionDidFinishLoading 的数据，除非在该类的*该实例中执行该方法。*

您基本上需要使用某种持久性机制来做您想做的事情，无论是 AppDelegate 还是沿着“单例”行的静态存储。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T15:59:47.620

虽然这可能不是最好的方法，但它既简单又有效。

将您的数据保存在您的应用程序委托中并从那里检索它。您可以创建应用程序委托共享应用程序的快捷方式。然后只需访问那里的值。

```
AppDelegate.h

#define UIAppDelegate ((AppDelegate *)[UIApplication sharedApplication].delegate)

@property (nonatomic, strong) NSArray *myArray;

TabView1.m

#import "AppDelegate.h"

SomeObject *myObject = [UIAppDelegate.myArray objectAtIndex:0]; 
```

就像我说的，这可能不是为应用程序组织数据的最佳方式，这种方法确实适用于需要在应用程序级别共享的少量数据。希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T16:03:47.087

发生这种情况是因为您创建了`HomeView`自己的实例。它与任何东西都没有任何联系。
您的第一个示例有效，因为它是从您的笔尖创建和初始化的。

我认为最好的方法是使用一个`IBOutlet`，然后在 InterfaceBuilder 中连接两个“视图”。

```
@interface OtherView ()
    IBOutlet HomeView *homeView;
@end

@implementation OtherView
@synthesize tracks_date;

- (void)viewDidLoad
{
    [super viewDidLoad];
    NSLog(@"Dated previed in OtherView: %@", homeView.parsed_date);
}

- (void)dealloc:
{
    [homeView release];
} 
```

[看看这里，它将展示更多](http://bynomial.com/blog/?p=5)

在 InterfaceBuilder 中，您可以管理您的对象并将它们连接在一起（通过 IBOutlets 和 IBAction，...）。

我认为[这个视频](http://www.youtube.com/watch?v=kk3nmy3C0Y4)很好地展示了这个概念是如何工作的。

# php - 无法生成表“用户”

> ID：12145283
> 
> 赞同：4
> 
> 时间：2012-08-27T15:52:21.510
> 
> 标签：php, symfony, symfony-2.1, fosuserbundle

当我安装*FOSUserBundle*（[官方文档](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/index.md)）时，我尝试`fos_user`使用以下命令生成我的表：

```
php app/console doctrine:schema:update --force 
```

但是控制台返回以下消息

> 无需更新 - 您的数据库已与当前实体元数据同步

我使用 Symfony 2.1 和 FOSUserBundle 的最新版本。

**app/AppKernel.php**包含

```
new FOS\UserBundle\FOSUserBundle(), 
```

**app/config/config.yml**包含

```
fos_user:
    db_driver: orm # other valid values are 'mongodb', 'couchdb' and 'propel'
    firewall_name: main
    user_class: Krpano\UserBundle\Entity\User 
```

**src/Krpano/UserBundle/Entity/User.php**包含

```
namespace Krpano\UserBundle\Entity;

use FOS\UserBundle\Entity\User as BaseUser;
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 * @ORM\Table(name="pouet")
 */
class User extends BaseUser
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    public function __construct()
    {
        parent::__construct();
        // your own logic
    }
} 
```

当我尝试访问我的网站时，我遇到了这个错误：

> MappingException：在链配置的命名空间 FOS\UserBundle\Entity、Krpano\ServicesBundle\Entity 中找不到类“Krpano\UserBundle\Entity\User”

你能帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T13:12:10.303

> 无需更新 - 您的数据库已与当前实体元数据同步

暗示您的实体由于 AppKernel.php 中缺少声明而未注册。

Doctrine 仅搜索活跃的捆绑包。

添加行后：

```
new Krpano\UserBundle\KrpanoUserBundle(), 
```

像那样：

```
public function registerBundles()
    {
            $bundles = array(    
            ...
            new Krpano\UserBundle\KrpanoUserBundle(),
            new FOS\UserBundle\FOSUserBundle(),    
            ...

        ); ... 
```

尝试这个：

```
php app/console doctrine:schema:update --force 
```

如果教义返回：

```
Database schema updated successfully! "1" queries were executed 
```

你的问题解决了。

我的回答只是对 Carlos Granados 回答的补充。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T09:03:28.327

添加

```
new Krpano\UserBundle\KrpanoUserBundle(), 
```

到你的 app/AppKernel.php 文件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-29T17:13:47.997

我有这个错误，这是由于不小心`@ORM\Entity()`从我的实体类中删除了该行。哦。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-17T15:54:33.583

我和你有同样的问题。您错过了为 Doctrine Entity 创建 yml。Doctrine 需要这个文件来在你的数据库中生成 shema。

```
# src/Acme/UserBundle/Resources/config/doctrine/User.orm.yml
Acme\UserBundle\Entity\User:
    type:  entity
    table: fos_user
    id:
        id:
            type: integer
            generator:
                strategy: AUTO 
```

然后在控制台更新作曲家的自动加载

```
composer dump-autoload 
```

然后调用 Doctrine 模式构建器

```
php app/console doctrine:schema:update --force 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-25T22:50:40.830

使用`composer.phar dump-autoload --optimize`

运行时也会引发此错误：

`php app/console cache:clear --env=prod --no-debug`

如果你运行：

`./composer.phar update`

再次一切正常。

# ruby-on-rails - 有没有办法使用 Fog 和 CarrierWave 读取文件对象？

> ID：12145285
> 
> 赞同：11
> 
> 时间：2012-08-27T15:52:28.657
> 
> 标签：ruby-on-rails, amazon-s3, ruby-on-rails-3.2, carrierwave, fog

我正在使用 CarrierWave 和 Fog 将附件存储到 S3 上的 ActiveRecord 模型。我可以使用它们来生成 URL，但我似乎找不到任何方法来实际读取文件。

这是 Fog gem 甚至会做的事情，还是我需要为此使用 S3 gem？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-27T16:13:23.363

您可以`read`在上传器对象上使用该方法。如果我们有一个名为 MyModel 的模型，它有一个名为的字段，该字段`attachment`是使用 CarrierWave 的`mount_uploader`方法添加的，我们可以执行以下操作：

```
obj = MyModel.first
contents = obj.attachment.read 
```

这将获得文件的实际内容。看看[这个文档](http://carrierwave.rubyforge.org/rdoc/classes/CarrierWave/Storage/S3/File.html#M000136)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T16:12:43.037

你只需要`open-uri`

```
require 'open-uri'
file_contents = open(string_url) {|f| f.read } 
```

# .net - XmlDocument.CreateElement("prefix:child") 没有设置 NamespaceURI

> ID：12145294
> 
> 赞同：3
> 
> 时间：2012-08-27T15:53:12.310
> 
> 标签：.net, xml, xml-namespaces, xmldocument

我有一个为根元素设置了 namespaceURI 的 xml 文档。我想用这个 ns 添加新元素。我写了这段代码：

```
XmlDocument doc=new XmlDocument();
doc.LoadXml("<w:wordDocument xmlns:w="http://schemas.microsoft.com/office/word/2003/wordml"></w:wordDocument>");
XmlElement child=doc.CreateElement("w:body");
doc.DocumentElement.AppendChild(child);
//NamespaceURI remains empty
Assert.AreEqual(child.NamespaceURI,"http://schemas.microsoft.com/office/word/2003/wordml"); 
```

设置前缀不会影响 namespaceURI。它序列化

```
<w:wordDocument xmlns:w="http://schemas.microsoft.com/office/word/2003/wordml">
    <body></body>
</w:wordDocument> 
```

代替

```
<w:body></w:body> 
```

我能做些什么？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T00:09:58.833

```
[Test]
public void XmlSample()
{
    const string nameSpaceUri = @"http://schemas.microsoft.com/office/word/2003/wordml";
    const string prefix = "w";
    XmlDocument xmlDocument = new XmlDocument();
    XmlNode wordDocument = xmlDocument.CreateElement(prefix, "wordDocument", nameSpaceUri);
    XmlElement body = xmlDocument.CreateElement(prefix,"body",nameSpaceUri);
    xmlDocument.AppendChild(wordDocument);
    wordDocument.AppendChild(body);
    Assert.AreEqual(body.Name, "w:body");
} 
```

# jquery - jQuery：函数 (e) 中的 (e) 代表什么？

> ID：12145296
> 
> 赞同：4
> 
> 时间：2012-08-27T15:53:51.837
> 
> 标签：jquery

> **可能重复：**
> [在 Javascript/jQuery 中，(e) 是什么意思？](https://stackoverflow.com/questions/10323392/in-javascript-jquery-what-does-e-mean)

我是编程新手。下面代码中函数（e）中的“e”到底是什么？我猜它是该方法的接收者，“this”指的是什么？只是一个疯狂的猜测。但即便如此，我们难道不能在没有“e”的情况下将 function(e) 保留为 function() 吗？

```
$("#" + id).live("mouseenter", function (e) {
    $(this).toggleClass("twittereyesopen");
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T15:54:41.903

`e`是一个[`event object`](http://api.jquery.com/category/events/event-object/)，它包含事件数据。请参阅[jQuery Event Type](http://docs.jquery.com/Types/Event)，您可以在其中找到属性和方法的描述：

属性：

1.  事件类型
2.  事件.目标
3.  事件数据
4.  event.relatedTarget
5.  事件.currentTarget
6.  事件.pageX/Y
7.  事件.结果
8.  事件.timeStamp

方法：

1.  event.preventDefault()
2.  event.isDefaultPrevented()
3.  event.stopPropagation()
4.  event.isPropagationStopped()
5.  event.stopImmediatePropagation()
6.  event.isImmediatePropagationStopped()

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T15:57:28.590

`e`只是一个参数名称。您可以随意命名它。它将引用传递给函数的第一个参数，在这种情况下将是[*事件对象*](http://api.jquery.com/category/events/event-object/)：

> 当浏览器触发事件​​或其他 JavaScript 调用 jQuery 的`.trigger()`方法时，jQuery 会向处理程序传递一个*事件对象*，它可以使用它来分析和更改事件的状态。该对象包括浏览器提供的标准化数据子集；浏览器未修改的原生事件对象在`event.originalEvent`.

指的是什么`this`取决于*如何*调用函数。在 jQuery 中，`this`内部事件处理程序是指处理程序（逻辑上）绑定到的元素：

> 当 jQuery 调用处理程序时，`this`关键字是对传递事件的元素的引用；对于直接绑定的事件，这是附加事件的元素，对于委托事件，这是匹配的元素`selector`。（请注意，这可能不等于`event.target`事件从后代元素冒泡。）要从元素创建 jQuery 对象以便它可以与 jQuery 方法一起使用，请使用`$(this)`.

MDN 提供了一个[很好的解释`this`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)。

[`.on`您可以在文档](http://api.jquery.com/on/)中找到更多信息。

> 但即便如此，我们难道不能在没有“e”的情况下将 function(e) 保留为 function() 吗？

是的，当然，在 JavaScript 中，您可以定义不带参数的函数，但将参数传递给它们不会引发错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T15:55:05.173

`e`代表一个事件。您正在捕获事件，并且可以对事件执行操作。

# regex - 如何仅在 Lookahead/Lookbehind 中打印项目？

> ID：12145298
> 
> 赞同：0
> 
> 时间：2012-08-27T15:54:00.373
> 
> 标签：regex

我需要使用 PCRE 正则表达式在一行中提取电子邮件和邮政编码。该行可能包含任意顺序的其他字段。每个字段如果退出，只会出现一次。*仅当两个*字段都存在时， Regex 才会打印结果。

我写了这个正则表达式，但显示了整行

```
^(?=.*?[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}\b)(?=.*?\b[\d]{5}\b).*$ 
```

例子：

f1 f2 11061 f3 abc@mydom.com f4
打印 ==> 11061 abc@mydom.com

f1 f2 f4 f3 xyz@mydom.com 10018
打印 ==> xyz@mydom.com 10018

f2 f4 10048 f3
打印 ==> ( null )

有没有办法只打印匹配的模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:01:34.317

关于什么：

```
(\d{5})|([A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,6}) << only if the input contains BOTH 
```

**编辑：**

```
(?:(?<zip>\d{5}).*(?<email>[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,6}))|(?:(?<email>[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,6}).*(?<zip>\d{5})) 
```

组“zip”是 zip

组“电子邮件”是电子邮件地址

# objective-c - NSWindow 不接收键盘事件

> ID：12145301
> 
> 赞同：5
> 
> 时间：2012-08-27T15:54:12.227
> 
> 标签：objective-c, events, keyboard, nswindow

我以编程方式创建 NSWindow，但我无法收到任何键盘消息。而不是这个我在 Xcode 编辑器中输入，但此时我的窗口是焦点。我怎样才能拦截这些事件？

这是我的代码：

```
//// delegate
@interface MyDelegate : NSObject
@end
@implementation MyDelegate
@end

//// view
@interface MyView : NSView
@end

@implementation MyView

- (BOOL)isOpaque { return YES;}
- (BOOL)canBecomeKeyView { return YES;}
- (BOOL)acceptsFirstResponder { return YES;}

- (void)keyDown:(NSEvent *)event
{
    printf("PRESS\n"); // it's ignoring
}

@end

//// main
int main(int argc, const char **argv){
    [NSApplication sharedApplication];

    NSWindow *window = [[NSWindow alloc]
              initWithContentRect:NSMakeRect( 0, 0, 100, 100 )
              styleMask:NSTitledWindowMask | NSClosableWindowMask | NSMiniaturizableWindowMask
              backing:NSBackingStoreBuffered
              defer:NO];
    [window setContentView: [[MyView alloc] init]];
    [window setDelegate: [[MyDelegate alloc] init] ];
    [window setAcceptsMouseMovedEvents:YES];
    [window setLevel: NSFloatingWindowLevel];
    [window makeKeyAndOrderFront: nil];

    [NSApp run];
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-28T20:38:23.667

您需要使应用程序成为前台应用程序。这是主窗口接收关键事件所必需的。

```
ProcessSerialNumber psn = {0, kCurrentProcess};
OSStatus status =
  TransformProcessType(&psn, kProcessTransformToForegroundApplication); 
```

# sql - 是否有关于/有人可以解释 TSQL 中的嵌套连接的文档？

> ID：12145305
> 
> 赞同：1
> 
> 时间：2012-08-27T15:54:32.823
> 
> 标签：sql, sql-server, tsql, sql-server-2005, join

我不太确定如何描述这一点，也不太确定它是否只是语法糖。这是我第一次看到它，我很难找到关于它的原因和内容的参考或解释。

我有一个查询如下：

```
select * from
     table1
          join table2 on field1 = field2
          join (
               table3 
                    join table4 on field3 = field4
                    join table5 on field5 = field6
               ) on field3 = field2 
               -- notice the fields in the parens and outside the parens 
               -- are part of the on clause 
```

括号是必要的吗？删除它们会改变加入顺序吗？在这种情况下，我处于 ​​SQL Server 2005 环境中。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T16:19:05.217

*使用自然连接*（列顺序之外）的查询结果集的连接顺序应该没有区别。查询

```
select *
from t1
join t2 on t2.t1_id = t1.id 
```

产生相同的结果集

select * from t2 join t1 on t1.id = t2.t1_id

如果您使用*外连接*并在 from 子句中更改表的顺序，自然外连接的方向必须改变：

```
select *
from      t1
left join t2 on t2.t1_id = t1.id 
```

是相同的

```
select *
from       t2
right join t1 on t1.id = t2.t1_id 
```

**但是**，如果您看到用作表的子查询，其语法类似于

```
select *
from t1
join ( select t2.*
       from t2
       join t3 on t3.t2_id = t2.id
       where t3.foobar = 37
     ) x on x.t1_id = t1.id 
```

您会注意到`x`分配给上述子查询的表别名 ( )。

您所拥有的是一种称为 *派生表*的东西（尽管有些人称其为虚拟表）。您可以将其视为在查询生命周期中存在的临时视图。当您需要根据聚合结果 ( `group by`) 过滤某些内容时，它特别有用。

子句`select`下的 ,上的 T-SQL 文档详细介绍：`from`

*   [http://msdn.microsoft.com/en-us/library/ms189499(v=SQL.100).aspx](http://msdn.microsoft.com/en-us/library/ms189499(v=SQL.100).aspx)
*   [http://msdn.microsoft.com/en-us/library/ms177634(v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/ms177634(v=sql.100).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T15:56:56.443

在这种情况下，它们不是必需的：

```
select * from table1
join table2 on field1 = field2
join table3 on field3 = field2 
join table4 on field3 = field4
join table5 on field5 = field6 
```

产生相同的结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T15:59:56.073

It's not necessary in this case.

It's necessary (or at the very least, a lot simpler) in some others, especially where you name the nested call:

```
select table1.fieldX, table2.fieldY, sq.field6 from
table1 join table2 on field1 = field2
join ( select
   top 1 table3.field6
   from table3 join table4
   on field3 = field4
   where table3.field7 = table2.field8
   order by fieldGoshIveUsedALotOfFieldsAlready
           ) sq on sq.field6 = field12345 
```

The code you had could have been:

1.  Like the above once, and then refactored.
2.  Machine produced.
3.  Reflecting the thought process of the developer as he or she arrived at the query, as they thought of that part of the larger query as a unit, then worked it into the larger query.

# objective-c - NSOutlineView 中数组的枚举对象的自定义部分

> ID：12145310
> 
> 赞同：6
> 
> 时间：2012-08-27T15:54:51.837
> 
> 标签：objective-c, nsmutablearray, nsoutlineview

我正在尝试为列出的对象创建一个带有自定义标头组（父节点）的 NSOutlineVew。（注意：我有基于单元的 NSOutlineView）。例如，它看起来像 Xcode“导航器”或 Numbers 侧边栏。我为每个类别的分离属性使用了默认组，但它看起来不像我想要的。我需要一个父节点（单元格），我可以在视觉上对其进行调整（添加控件元素和图像）。

我试图通过将一组对象传递给 NSDictionary 来做到这一点，为每个组提供一个特定的键。结果，通过 NSLog 一切都正确显示，但是将此变量作为程序 NSoulineView 的源的传输失败。

**项目视图控制器.h**

```
@interface ProjectViewController : NSViewController <NSOutlineViewDataSource, NSObject> {
    IBOutlet NSOutlineView          *outlineView;
    FSEntity                        *content;
}

@property (readonly, assign) NSMutableArray *objects;

@end 
```

**项目视图控制器.m**

```
@implementation ProjectViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Initialization code here.    
        // Setting default path to the local file or directory
        NSString *home = NSHomeDirectory();
        NSURL *url = [[NSURL alloc] initFileURLWithPath:home];
        content = [[FSEntity alloc] initWithURL:url];

        [self defineContentNSOutlineView];
        NSLog(@"Array: %@",_objects);

        // Basic сonfiguration an instance NSOutlineView
        [self configurationNSOutlineView];
    } return self;
}

@synthesize objects = _objects;

- (id)outlineView:(NSOutlineView *)outlineView child:(NSInteger)index ofItem:(id)item {
    return (item == nil) ? [content.children objectAtIndex:index] : [((FSEntity *)item).children objectAtIndex:index];
}

- (BOOL)outlineView:(NSOutlineView *)outlineView isItemExpandable:(id)item {
    return (item == nil) ? content.children.count > 0 : ((FSEntity *)item).children.count > 0;
}

- (NSInteger)outlineView:(NSOutlineView *)outlineView numberOfChildrenOfItem:(id)item {
    return (item == nil) ? content.children.count : ((FSEntity *)item).children.count;
}

- (id)outlineView:(NSOutlineView *)outlineView objectValueForTableColumn:(NSTableColumn *)tableColumn byItem:(id)item {
    if ([item isKindOfClass:[FSEntity class]]) {
        return [((FSEntity *)item) title];
    }

    return nil;
}

- (void)outlineView:(NSOutlineView *)outlineView willDisplayCell:(id)cell forTableColumn:(NSTableColumn *)tableColumn item:(id)item {
    if ([cell isKindOfClass:[ImageAndTextCell class]]) {
        ImageAndTextCell *textField = (ImageAndTextCell *)cell;
        [textField setImage:[item icon]];
    }
}

- (void)defineContentNSOutlineView {
    NSMutableArray *objects = [NSMutableArray arrayWithObjects:[NSDictionary dictionaryWithObjectsAndKeys:@"FINDER", @"title", [NSArray arrayWithObjects:[NSDictionary dictionaryWithObject:content.children forKey:@"title"], nil], @"children",[NSNumber numberWithBool:YES], @"header", nil], nil];
    _objects = objects;
}

- (void)configurationNSOutlineView {
    [outlineView sizeLastColumnToFit];
    [outlineView setFloatsGroupRows:NO];
    [outlineView reloadData];
    [outlineView expandItem:nil expandChildren:YES];
}

@end 
```

为了更容易想象它的外观，我在计划中展示了它：

```
 +--------------------------------------------+
                 |  ▼ FINDER FILES                        ₪ ✱ |
                 |      03143553.file                         |
                 |    ▶ Desktop                               |
                 |    ▶ Documents                             |
                 |    ▶ Downloads                             |
                 |    ▶ Movies                                |
                 |    ▶ Music                                 |
                 |    ▶ Pictures                              |
                 +--------------------------------------------+ 
```

以及我现在拥有的（不使用 NSTreeController 的 NSoulineView）；

```
 +--------------------------------------------+
                 |      03143553.file                         |
                 |    ▶ Desktop                               |
                 |    ▶ Documents                             |
                 |    ▶ Downloads                             |
                 |    ▶ Movies                                |
                 |    ▶ Music                                 |
                 |    ▶ Pictures                              |
                 +--------------------------------------------+ 
```

我知道示例 Apple“SourceView”，但我不知道如何添加到创建的组、对象数组（文件和文件夹），NSTreeContoller 仅显示层次结构的第一个元素（不包括）：

```
 +--------------------------------------------+
                 |  ▼ FINDER FILES                            |
                 |      03143553.file                         |
                 |      Desktop                               |
                 |      Documents                             |
                 |      Downloads                             |
                 |      Movies                                |
                 |      Music                                 |
                 |      Pictures                              |
                 +--------------------------------------------+ 
```

SourceView 示例的修改方法：

```
- (void)addFinderSection {
    [self addFolder:@"FINDER FILES"];

    NSError *error = nil;
    NSEnumerator *urls = [[[NSFileManager defaultManager] contentsOfDirectoryAtURL:self.url includingPropertiesForKeys:[NSArray arrayWithObjects: nil] options:(NSDirectoryEnumerationSkipsHiddenFiles) error:&error] objectEnumerator];
    for (NSURL *url in urls) {
        BOOL isDirectory;
        if ([[NSFileManager defaultManager] fileExistsAtPath:[url path] isDirectory:&isDirectory]) {
            if (isDirectory) {
                [self addChild:[url path] withName:NO selectParent:YES];
            } else {
                [self addChild:[url path] withName:NO selectParent:YES];   
            }
        }
    }

    [self selectParentFromSelection];
} 
```

此方法仅显示第一个对象，如后一种方案所示。

还有一个问题，正如我之前所说，如何在单元格右侧添加节点**“FINDER FILES”**按钮。

你能帮我解决这个问题吗？我知道，也许不是那么难，但我刚开始学习 Objective-C，我不知道该怎么做。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:23:42.067

根据您提供的起始代码，我能够使用基于 Cell 的 NSOutlineViews 进行工作。您发布的代码似乎不完整，因此很难知道您究竟想从缺少的 FSEntity 类中得到什么。我只使用了基础类：NSArray 用于节点列表（即根节点和子节点），NSDictionaries 用于每个节点本身（根节点和子节点），NSURLs 作为文件系统参考。我试图尽可能接近您的原始代码。最后，它看起来像这样：

项目视图控制器.h

```
@interface ProjectViewController : NSViewController <NSOutlineViewDataSource, NSObject>
{
    IBOutlet NSOutlineView          *outlineView;
    NSURL                           *content;
}

@end 
```

项目视图控制器.m

```
#import "ProjectViewController.h"

@interface ProjectViewController () {
    NSMutableArray* _objects;
}
@property (nonatomic, retain, readwrite) NSMutableArray* objects;
@end

@implementation ProjectViewController

@synthesize objects = _objects;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    if (self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil]) {
        // Initialization code here.
        // Setting default path to the local file or directory
        NSString *home = NSHomeDirectory();
        content = [[NSURL alloc] initFileURLWithPath:home];

        [self defineContentNSOutlineView];
        NSLog(@"Array: %@",_objects);

        // Basic сonfiguration an instance NSOutlineView
        [self configurationNSOutlineView];
    }
    return self;
}

// nodes have 3 keys: title, url, icon
- (NSArray*)p_childrenForNode: (NSMutableDictionary*)node {
    if (nil == node)
        return self.objects;

    NSArray* retVal = nil;
    if (nil == (retVal = [node valueForKey: @"children"]))
    {
        NSMutableArray* children = [NSMutableArray array];
        for (NSURL* urlInDir in [[NSFileManager defaultManager] contentsOfDirectoryAtURL: [node objectForKey: @"url"]
                                                           includingPropertiesForKeys: [NSArray arrayWithObjects: NSURLNameKey, NSURLEffectiveIconKey, nil]
                                                                              options: 0
                                                                                error: NULL])
        {
            id name = [urlInDir getResourceValue: &name forKey: NSURLNameKey error: NULL] ? name : @"<Couldn't get name>";
            id icon = [urlInDir getResourceValue: &icon forKey: NSURLEffectiveIconKey error: NULL] ? icon : nil;

            NSMutableDictionary* dict = [NSMutableDictionary dictionaryWithObjectsAndKeys: urlInDir, @"url", name, @"title", nil];

            if (icon)
                [dict setObject: icon forKey: @"icon"];

            [children addObject: dict];
        }

        retVal = children;

        if (children)
            [node setValue: children forKey: @"children"];
    }
    return retVal;
}

- (id)outlineView:(NSOutlineView *)outlineView child:(NSInteger)index ofItem:(id)item {
    NSMutableDictionary* itemDict = (NSMutableDictionary*)item;
    NSArray* children = [self p_childrenForNode: itemDict];
    return children.count > index ? [[[children objectAtIndex: index] retain] autorelease] : nil;
}

- (BOOL)outlineView:(NSOutlineView *)outlineView isItemExpandable:(id)item {
    NSMutableDictionary* itemDict = (NSMutableDictionary*)item;
    NSArray* children = [self p_childrenForNode: itemDict];
    return children.count > 0;
}

- (NSInteger)outlineView:(NSOutlineView *)outlineView numberOfChildrenOfItem:(id)item {
    NSMutableDictionary* itemDict = (NSMutableDictionary*)item;
    NSArray* children = [self p_childrenForNode: itemDict];
    NSInteger retVal = children.count;
    return retVal;
}

- (id)outlineView:(NSOutlineView *)pOutlineView objectValueForTableColumn:(NSTableColumn *)tableColumn byItem:(id)item {

    NSImage* icon = [item objectForKey: @"icon"];
    NSString* title = [item objectForKey: @"title"];
    id value = nil;

    if (icon) {
        [icon setSize: NSMakeSize(pOutlineView.rowHeight - 2, pOutlineView.rowHeight - 2)];
        NSTextAttachment* attachment = [[[NSTextAttachment alloc] init] autorelease];
        [(NSCell *)[attachment attachmentCell] setImage: icon];
        NSMutableAttributedString *aString = [[[NSAttributedString attributedStringWithAttachment:attachment] mutableCopy] autorelease];
        [[aString mutableString] appendFormat: @" %@", title];
        value = aString;
    } else {
        value = title;
    }

    return value;
}

- (void)defineContentNSOutlineView {
    // Make root object
    NSMutableDictionary* rootObj = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                    @"FINDER", @"title",
                                    content, @"url",
                                    nil];

    id icon = [content getResourceValue: &icon forKey: NSURLEffectiveIconKey error: NULL] ? icon : nil;
    if (icon)
        [rootObj setObject: icon forKey: @"icon"];

    // Set it
    self.objects = [NSMutableArray arrayWithObject: rootObj];
}

- (void)configurationNSOutlineView {
    [outlineView sizeLastColumnToFit];
    [outlineView setFloatsGroupRows:NO];
    [outlineView reloadData];
    [outlineView expandItem:nil expandChildren:YES];
}

@end 
```

我将整个工作示例项目发布到[GitHub](https://github.com/ipmcc/SOExamples/tree/master/nsoutlineview-cell-based-demo)。

# jakarta-ee - AWS Elastic Beansalk 可以用于分布式消息处理吗？

> ID：12145312
> 
> 赞同：1
> 
> 时间：2012-08-27T15:55:02.087
> 
> 标签：jakarta-ee, message-queue, distributed-computing, amazon-elastic-beanstalk, spring-jms

我打算使用一个简单的 java web 应用程序来引导和加载我的 Spring JMS 客户端，它将侦听队列上的消息并处理传入的消息。我的 Web 应用程序仅用于加载 JMS 客户端；将没有用户访问此应用程序。

如果我要在 AWS Beanstalk 上部署此应用程序，假设作业队列已加载消息并且 Web 应用程序中的 jms 作业侦听器正在使用所有可用资源 - 内存，它会自动扩展吗？线程等？即使负载均衡器上没有流量，AWS 是否会启动应用程序的新实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T01:34:46.993

您可以将 Elastic Beanstalk 配置为根据许多不同的指标进行纵向扩展和缩减。默认情况下，它使用 NetworkOut，但您还有其他几个选项可供选择，例如 CpuUtilization 和 DiskWriteBytes。

在您的情况下，您可以将缩放触发器设置为 CpuUtilization，以便当您的 JMS 客户端处理消息负载过重时，您可以增加客户端的数量。例如，如果 CPU 负载在 5 分钟内平均 > 80%，您可以扩大规模。

ElasticBeanstalk 使用 CloudWatch 指标作为扩展触发器；这些指标与您在 Elastic Beanstalk 和 EC2 的监控选项卡下看到的指标相同。可以在 EC2 中创建自定义指标，但我不知道 Elastic Beanstalk 是否能够将自定义指标用作自动缩放触发器。

有关扩展触发器的更多信息，请参阅 Elastic Beanstalk[文档](http://docs.amazonwebservices.com/elasticbeanstalk/latest/dg/create_deploy_Java.managingappenv.as.html)。

# javascript - jQuery嵌套数组..获取直接父ID

> ID：12145316
> 
> 赞同：0
> 
> 时间：2012-08-27T15:55:35.273
> 
> 标签：javascript, arrays

我有以下数组

```
array = [
{
    "id": "67",
    "sub": [
        {
            "id": "663",
        },
        {
            "id": "435",
        }
    ]
},
{
    "id": "546",
    "sub": [
        {
            "id": "23",
            "sub": [
             {
                 "id": "4",
             }
         ]
        },
        {
            "id": "71"
        }
    ]
}
] 
```

我目前正在遍历数组，如下所示

调用数组：

```
processArray(array); 
```

函数循环

```
function processArray(arr)
{
    for(var item in arr) {
        var value = arr[item];      
        var order = item;
        var itemID = value.id;

        if(itemID != null)
        {
            $('.text').append(" ORDER : " + order + " Item ID : " + itemID  + "<br />" );
        }
        if(typeof(value) == 'object') { //If it is an array,            
            processArray(arr[item]);
        }
    }   
} 
```

目前我正在获取项目的订单和当前 ID 没有问题。但是，我需要（对于我的数据库模式）是为每个项目获取其父项的 ID（如果有的话）。我需要将父节点传递给每个节点吗？或者有没有更简单的方法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T16:25:20.337

[工作演示](http://jsfiddle.net/r9frZ/)

在函数中包含一个可选参数`parentID`；通过这样做，您仍然可以使用`processArray(array);`语法来处理原始数组。

```
function processArray(arr, parentID)
{
    for(var item in arr) {
        var value = arr[item];      
        var order = item;
        var itemID = value.id;

        if(itemID != null)
        {
            var output = " ORDER : " + order + " Item ID : " + itemID;

            if( parentID ) { output += " PARENT : " + parentID; }

            $('.text').append( output + "<br />");
        }

        // PROCESS SUB-ARRAY
        if( typeof(value.sub) == 'object') { //If it is an array,            
            processArray( value.sub, itemID );
        }
    }   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T16:21:10.613

使用`id`作为其签名一部分的辅助函数：

```
function processArray(arr) {

    function _processArray(arr, id) {
        for (var item in arr) {

            var value = arr[item];
            var order = item;
            var itemID = value.id; // you need to change this because on the second call you pass in a string and not just an object
            var parentId = id;

            // Commenting the if statement that you had here actually shows the parent id's now.
            $('.text').append(" ORDER : " + order + " Item ID : " + itemID + " Parent Id : " + parentId + "<br />");

            if (typeof value === "object") { //use instanceof,            
                _processArray(arr[item], itemID);
            }
        }
    }

    _processArray(arr, 0);
} 
```

# javascript - 创建数组数组

> ID：12145320
> 
> 赞同：0
> 
> 时间：2012-08-27T15:55:53.807
> 
> 标签：javascript, arrays, push

我有以下数组

```
var a = ["Banana/hgd/kjjkds", "Orange/kldj/kdl", 
         "Apple/jlds/ldks", "Mango/dsfj/dskj"] 
```

现在我想重新创建它并制作输出

```
{
    "a1" : "Banana",
    "a2" : "hgd",
    "a3" : "kjjkds"
}
{
    "a1" : "Orange",
    "a2" : "kldj",
    "a3" : "kdl"
}
{
    "a1" : "Apple",
    "a2" : "jlds",
    "a3" : "ldks"
}
{
    "a1" : "Mango",
    "a2" : "dsfj",
    "a3" : "dskj"
} 
```

我尝试了以下方法，但没有任何成功：

```
var b = [];
for (var i = 0; i< a.length; i++) {
    b['a1'] = a[i].split("/")[0];
    b['a2'] = a[i].split("/")[1];
    b['a3'] = a[i].split("/")[2];
    console.log(b);
    b.push(b);
} 
```

`console`打印所有创建的数组，但仅`array b`显示最后一个。我怎样才能让它工作？请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T16:00:26.887

试试这个：

```
var spl, b = [];
for (var i = 0, len = a.length; i < len; i++) {

    spl  = a[i].split("/"); /* execute split() just once */

    b[i] = {
      'a1': spl[0],
      'a2': spl[1],
      'a3': spl[2]
    }
}
console.log(b); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:01:52.867

您正在将阵列推到自身上。这应该会发出警告信号。

相反，您需要一个输出数组和一个临时数组来添加键。

```
var b = [], t, s, l = a.length, i;
for( i=0; i<l; i++) {
    s = a[i].split("/");
    t = {
      "a1":s[0],
      "a2":s[1],
      "a3":s[2]
    }
    b.push(t);
} 
```

我还在那里添加了一些优化。

# oracle - Loading a page from url does not work, but page work when I click Refresh

> ID：12145321
> 
> 赞同：0
> 
> 时间：2012-08-27T15:55:55.203
> 
> 标签：oracle, oracle-apex

I have a URL that displays a customer list like this:

```
http://domain.com/pls/apex/f?p=724:2:820875406836801::::: 
```

The list of customers are displayed with the title being linked to Page3 & request has CustomerId

When I click the URL `http://domain.com/pls/apex/f?p=724:3:21712451478201::NO:RP,3:P3_CUSTOMER_ID:82`, Page 3 is loaded correctly with details of selected customer. But the "Update" and "Delete" action buttons never work.

But, if I click the browser refresh button and then try to perform an update or delete, it works.

I don't know where I could be going wrong. Can someone give me hints?

I am not using `BRANCH_TO_PAGE_ACCEPT` in my URL link definition.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T03:19:00.890

看起来您在第 2 页的 URL 中硬编码了会话 ID：

```
http://domain.com/pls/apex/f?p=724:2:820875406836801::::: 
```

会话 ID 是 820875406836801，而：

```
http://domain.com/pls/apex/f?p=724:3:21712451478201::NO:RP,3:P3_CUSTOMER_ID:82 
```

会话 ID 已神秘地更改为 21712451478201。我不确定，但我怀疑您已在第 2 页的报告中硬编码会话 ID。这会导致在第 3 页创建新的登录会话已打开（也许这就是更新/删除按钮不起作用的原因 - 但您没有告诉我们错误消息是什么，所以我不确定）；刷新页面可能正在恢复会话。

如果我是对的，您需要解决此问题是`&SESSION.`在第 2 页的报告中使用会话变量 ( )，而不是对其进行硬编码，例如：

```
http://domain.com/pls/apex/f?p=724:3:&SESSION.::NO:RP,3:P3_CUSTOMER_ID:82 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:33:31.067

问题在于 URL 的创建方式。首先，我不应该只将 1 件事（标题）设置为 url。它应该是整个div。如下所示。

```
<li><div style="">
<a href="f?p=&APP_ID.:2:&SESSION.::NO::P2_PK_PROJECT_ID:#LINK#" rel="external">
<h3>#TITLE#</h3>
<p><strong>#BOLD_TEXT#</strong></p>
<p>#PLAIN_TEXT#</p>
</a></div>
</li> 
```

使用上述代码创建了一个报表行模板。此模板用于我的客户列表页面。现在每个客户都是一个链接（标题、名称等）。链接 href 也是硬编码的。请注意，我正在传递 ProjectID：#LINK# #LINK# 指的是像 1、2 等这样的值

现在单击此按钮，正确加载第 2 页，并且现在可以单击 Apply Changes & Delete 按钮。

# .net - 如何在 LINQ-to-SQL 查询中实现大型 COALESCE

> ID：12145326
> 
> 赞同：2
> 
> 时间：2012-08-27T15:56:27.090
> 
> 标签：.net, vb.net, linq, tsql, linq-to-sql

如果我在需要作为 LINQ-to-SQL 查询执行的 TSQL 查询中有很多 COALESCE 列。如何将其转换为高效的 LINQ-to-SQL 查询？例如：

```
SELECT COALESCE(t1.Date, t2.DocDate, t3.PostingDate, t4.DocDate, t5.DocDate) DocDate
FROM t0
LEFT JOIN t1 ON t0.t1id = t1.id
LEFT JOIN t2 ON t0.t2id = t2.id
LEFT JOIN t3 ON t0.t3id = t3.id
LEFT JOIN t4 ON t0.t4id = t4.id
LEFT JOIN t5 ON t0.t5id = t5.id 
```

有什么方法可以比以下更好地在 LINQ 查询中编写它？

```
Dim result = ( _
   From c in context.t0 _
   Select DocDate=If(t0.t1.Date, If(t0.t2.DocDate, If(t0.t3.PostingDate, _
   If(t0.t4.DocDate, t0.t5.DocDate))))) 
```

我实际上在合并中有几十列要“合并”，两个不同的合并返回两个不同的合并列，所以结果可能会变得非常混乱，我担心如果不处理它会非常低效合并。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T23:44:23.973

这不是一个精确的解决方案，但如果您可以切换到 C#，您的代码看起来更像：

```
result = From c in context.t0 
    Select DocDate = t0.t1.Date ?? t0.t2.DocDate ?? t0.t3.PostingDate ?? t0.t4.DocDate ?? t0.t5.DocDate; 
```

几个月前，我从 VB 跳到了 C#，并没有回头。

# sql - Finding similarities between two Facebook users using FQL

> ID：12145327
> 
> 赞同：1
> 
> 时间：2012-08-27T15:56:27.707
> 
> 标签：sql, facebook, facebook-fql

I'm trying to find the similarities between two users of my application. I have tested the below query for just the interests attribute and it works fine:

```
SELECT interests FROM user WHERE uid=me() AND interests IN 
(SELECT interests FROM user WHERE uid = $targ_id) 
```

I want to extend this to finding the similarities over the following attributes: `movies, tv, music, books`. Modifying the `SELECT` statements is trivial but I am unsure how to do the `IN` clause. This is what I tried doing:

```
 SELECT interests, movies, tv, music, books FROM user WHERE uid=me() 
AND (interests, movies, tv, music, books) IN 
    (SELECT interests, music, tv, movies, books FROM user WHERE uid = $targ_id) 
```

This comes up with the following error:

```
{
  "error": {
    "message": "(#601) Parser error: unexpected ',' at position 82.",
    "type": "OAuthException",
    "code": 601
  }
} 
```

How can I adjust this FQL query to make it work?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T16:57:18.467

我认为您无法使用 FQL`IN`运算符比较两个用户的兴趣。字段`interests`, `movies`,`books`等是字符串，而不是数组。您需要使用类似`strpos()`or的字符串操作`substr()`。FQL 没有`LIKE`操作。

您可以尝试编写一个巨大的 FQL 查询，在其中将每个结果用逗号分隔，然后将它们相互比较，但我认为将它们引入脚本并在后端执行此操作会容易得多。否则，您最终会遇到我的情况`movies`是“大白鲨，创世记”，而您的电影是“大白鲨，星球大战，创世记”，您将无法匹配，因为字符串不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:06:03.147

您是否尝试过配置权限和扩展权限？

您的请求有错误。您不能在 close 中使用多个列`AND`。也许你应该试试这个：

```
SELECT interests, movies, tv, music, books FROM user 
WHERE uid=me() 
AND (interests) IN (SELECT interests FROM user WHERE uid = $targ_id) 
AND (movies) IN (SELECT movies FROM user WHERE uid = $targ_id) 
AND (tv) IN (SELECT tv FROM user WHERE uid = $targ_id) 
AND (music) IN (SELECT music FROM user WHERE uid = $targ_id) 
```

# ruby - Ruby on Rails 中文件的意外行为

> ID：12145338
> 
> 赞同：1
> 
> 时间：2012-08-27T15:56:58.463
> 
> 标签：ruby, ruby-on-rails-3.2

在尝试在 Ruby on Rails 中上传文件时，我遇到了一个问题。

这是我上传文件的方式：

```
def upload_image(image)
  File.new(Rails.root.join('assets','images','products',image.original_filename),'wb') do |f|
    f.write(image.read)
  end
end 
```

这会引发异常：

```
Errno::ENOENT in ProductsController#update

No such file or directory - /home/alex/RubymineProjects/psg/assets/images/products/my-image.png 
```

为什么会这样？我只是在创建一个新文件，而不是尝试打开现有文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:00:59.733

它不创建目录。

```
File.new("test", 'wb') #=> creates the file test
File.new("test/test", 'wb') #=> test.rb:1:in `initialize': No such file or directory - test/test (Errno::ENOENT) 
```

如果您添加 /app，您就有了您正在寻找的路径。不过，不要真的认为那是使用资产管道的方式。[请参阅此问题](https://stackoverflow.com/questions/7391938/rails-3-1-should-file-uploads-be-added-to-asset-pipeline)中的推理。

```
File.open(Rails.root.join('app','assets','images','test.jpg'),'wb') do |f|
  f.write("image")
end
 => 5

cat app/assets/images/test.jpg #=> image% 
```

# android - 孩子（wySprite，x）已经附加到另一个父母（wySprite，xx），跳过addChild

> ID：12145343
> 
> 赞同：0
> 
> 时间：2012-08-27T15:57:34.033
> 
> 标签：android, cocoa

嗨，我正在使用 Wiengine 制作我的游戏，我收到此错误孩子（wySprite，x）已经附加到另一个父母（wySprite，xx），跳过 addChild

谁能让我知道如何解决此错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T06:28:31.807

这意味着精灵已经有一个父节点。如果您看到此错误，通常您的代码中有一些错误的逻辑。嗯，目前WiEngine是开源的，可以直接调试。 [https://github.com/stubma/WiEngine](https://github.com/stubma/WiEngine)

# php - 使用不带附件转储的 print_debugger 捕获电子邮件 smtp 错误

> ID：12145345
> 
> 赞同：2
> 
> 时间：2012-08-27T15:57:36.677
> 
> 标签：php, codeigniter, email, smtp

**场景：**我有许多 Codeigniter 应用程序，我正在改进电子邮件传递系统以使用数据库队列。所以我的应用程序记录了所有需要发送到数据库的电子邮件。我每分钟运行一个 cron 作业来检查这个数据库队列并发送任何待处理的电子邮件（根据需要限制到我的服务器限制）。

这一切都非常出色，并极大地改进了我们的应用程序。

部分功能是它会记录未发送电子邮件的时间，并稍后重试。作为该过程的一部分，我更新数据库以包含发送尝试期间的任何错误消息，以便稍后进行调试。我使用 $this->email->print_debugger() 来执行此操作。

再次一切正常（正常）。

**问题**是，如果电子邮件中包含附件，则附件“数据”将作为 print_debugger() 的一部分转储 - 所以我的数据库会被大量的附件数据文本转储破坏。

**我尝试了什么：**所以我查看了 codeigniter 的 Email.php 类，认为我可以扩展库以不将附件数据包含在 print_debugger() 函数中 - 但似乎从函数返回的错误是实际上来自 SMTP 服务器本身的另一个功能。我看不到阻止附件数据出现错误的方法。

**问题/挑战：**谁能看到我可以捕获 SMTP 错误和电子邮件标头的方法 - 但不是附件数据？我也很乐意不捕获任何电子邮件正文（因为我知道数据库队列中的内容）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:21:44.167

我相信你可以扩展图书馆。这是当前功能：

```
public function print_debugger()
{
    $msg = '';

    if (count($this->_debug_msg) > 0)
    {
        foreach ($this->_debug_msg as $val)
        {
            $msg .= $val;
        }
    }

    $msg .= "<pre>".$this->_header_str."\n".htmlspecialchars($this->_subject)."\n".htmlspecialchars($this->_finalbody).'</pre>';
    return $msg;
} 
```

返回的内容有四个主要部分：

*   `_debug_msg`- 调试消息
*   `_header_str`- 电子邮件的标题
*   `_subject`- 电子邮件的主题
*   `_finalbody`- 邮件正文**和**附件数据

实现一个类似的功能，没有`_finalbody`应该给你想要的输出，但没有正文和附件数据。

这是一个示例解决方案，（类 'MY_Email' 位于：）`application/libraries/MY_Email.php`：

```
class MY_Email extends CI_Email
{
    public function my_print_debugger()
    {
        $msg = '';

        if (count($this->_debug_msg) > 0)
        {
            foreach ($this->_debug_msg as $val)
            {
                $msg .= $val;
            }
        }

        $msg .= "<pre>".$this->_header_str."\n".htmlspecialchars($this->_subject)."\n".'</pre>';
        return $msg;
    }
} 
```

* * *

查看该类的代码，我认为它`$_body`可能包含没有附件数据的主体数据，因此值得尝试 append `$this->_body`，而不是`$this->_finalbody`函数。我还没有测试过这个，所以我不确定。

希望这会有所帮助！

# sql - SQL 错误访问 2010 VBA 更新命令

> ID：12145346
> 
> 赞同：0
> 
> 时间：2012-08-27T15:57:37.137
> 
> 标签：sql, vba, sql-update, ms-access-2010

我需要帮助找出我的 SQL 语句中的错误。我一直在尝试几件事，但似乎没有任何效果？这是我收到的错误消息

```
Run-time error '3075':

Syntax error (missing operator) in query expression '([description] = Manufacturing and Delivery Schedule AND [pr_num] = 83)'. 
```

这是我的代码：

```
Private Sub Command6_Click()
' ===================================================
' Receives the selected item in the combo box
' ===================================================

' Open the Database connection
Dim data_base As Database
Set data_base = CurrentDb

' Grab description and pr number from the form
Dim desc As string
dim pr_number as long
desc = Combo4.Value
pr_number = Text8.Value

' Build the query
Dim query As String
query = "UPDATE VDR_Table " & _
    "SET [received] = [p1] " & _
    "WHERE ([description] = " & desc & _
    " AND [pr_num] = " & pr_number & ");"

Dim rec_set As DAO.Recordset
Set rec_set = data_base.OpenRecordset(query)

' Build the QueryDef
Set qd = data_base.CreateQueryDef("")
qd.SQL = query

' Execute query
qd.Parameters("p1").Value = true
qd.Execute

' Close nad null record set
rec_set.close
set rec_set = nothing

' Close the connection to the database
data_base.Close

' Prompt the user success
MsgBox "Item has been received"
End Sub 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:59:11.847

You need to enclose the description field value you are setting in quotes since it is a string field. It should look like this:

```
' Build the query
Dim query As String
query = "UPDATE VDR_Table " & _
    "SET [received] = [p1] " & _
    "WHERE ([description] = '" & desc & _
    "' AND [pr_num] = " & pr_number & ");" 
```

Removed the links below since they don't matter in this case.

~~Also, I would recommend using parameters instead of string concatenations to avoid SQL injections. Here's an example of using parameters with VBA - [http://support.microsoft.com/kb/181734](http://support.microsoft.com/kb/181734) - and here is some reasoning on why to use parameterized sql - [http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html).~~

# c++ - 什么是 C++ 中的流？

> ID：12145357
> 
> 赞同：57
> 
> 时间：2012-08-27T15:58:01.013
> 
> 标签：c++, stream, filestream, fstream

我一直在听说流，更具体地说是文件流。

那么它们是什么？

它是在记忆中有位置的东西吗？

它是包含数据的东西吗？

它只是文件和对象之间的连接吗？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-08-27T16:01:25.727

术语流是一种结构的抽象，它允许您发送或接收未知数量的字节。比喻是水流。您可以随时获取数据，也可以根据需要发送数据。例如，将此与具有固定已知长度的数组进行对比。

使用流的示例包括读取和写入文件、通过外部连接接收或发送数据。然而，术语*流*是通用的，并没有说明具体的实现。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-27T16:02:27.187

IOStreams 是一个前端接口（`std::istream`, `std::ostream`），用于定义输入和输出函数。流还存储格式化选项，例如，用于整数输出的基数并保存`std::locale`用于各种定制的对象。它们最重要的组件是指向 a 的指针，`std::streambuf`它定义了如何访问字符序列，例如文件、字符串、屏幕上的区域等。专门为文件和字符串提供了特殊的流缓冲区，并从提供流基类以便于创建。描述 IOStreams 库的全部功能几乎可以写满整本书：在 C++ 2003 中，大约一半的库部分专门用于与流相关的功能。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-01-26T17:55:54.933

流是线性队列，将文件连接到程序并保持双向数据流。这里的源是任何文件、I/O 设备、硬盘、CD/DVD 等。

基本上流是两种类型 1.Text 流 2.Binary 流

文本流：它是一个排列成一行的字符序列，每行以换行符（unix）结束。

二进制流：它是在计算机主存储器内部编码的数据，未经任何修改。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-07-04T10:19:09.660

文件系统被设计为与各种各样的设备一起工作，包括终端、磁盘驱动器、磁带驱动器等。即使每个设备都不同，文件系统也将每个设备转换为一个称为流的**逻辑设备。**流是独立于设备的，因此可以使用相同的功能来写入磁盘文件和磁带文件。在更专业的术语中，流提供了程序员和正在使用的实际设备之间的抽象。

# jquery - 内容中带有锚点的 jquery 选项卡 - 跳跃问题

> ID：12145358
> 
> 赞同：1
> 
> 时间：2012-08-27T15:58:08.353
> 
> 标签：jquery, jquery-ui, tabs, jquery-ui-tabs, jquery-tabs

我正在尝试在 jquery 选项卡式内容中链接锚点。但是，我已经让它工作了，现在当我单击选项卡时，页面会跳转到选项卡内容 div 的顶部，并切断选项卡。我希望它在单击选项卡时保持在同一个位置而不滚动。我还需要从 URL 访问每个选项卡和内部锚点，只需要选项卡 URL 不跳转到选项卡内容 div 的顶部，切断顶部的选项卡。示例： http: [//mysite.com/test#tab1](http://mysite.com/test#tab1)

这是我到目前为止所拥有的：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">

$(function() {
$('a.refresh').live("click", function() {
      location.reload();
});
 });
</script>

<section class="wrap">

<div class="tablist">
<ul class="tabs">
<li><a href="#tab1">Tab 1</a></li>
<li><a href="#tab2">Tab 2</a></li>
<li><a href="#tab3">Tab 3</a></li>

</ul>
</div>
<div class="panes">
<div id="tab1" class="tab-content">
Tab 1 content
<br />
<a name="anchor1" id="anchor1">Anchor 1</a>
</div>

<div id="tab2" class="tab-content">
Tab 2 content
</div>

<div id="tab3" class="tab-content">
Tab 3 content
<br />
<a name="anchor2" id="anchor2">Anchor 2</a>
</div>

</div>
</section>

<script type="text/javascript">
$(document).ready(function() {
var $tabContent = $(".tab-content"),
    $tabs = $("ul.tabs li"),
    tabId;

$tabContent.hide();
$("ul.tabs li:first").addClass("current").show();
$tabContent.first().show();

$tabs.click(function() {
    var $this = $(this);
    $tabs.removeClass("current");
    $this.addClass("current");
    $tabContent.hide();
    var activeTab = $this.find("a").attr("href");
    $(activeTab).fadeIn();

});

// Grab the ID of the .tab-content that the hash is referring to
tabId = $(window.location.hash).closest('.tab-content').attr('id');

// Find the anchor element to "click", and click it
$tabs.find('a[href=#' + tabId + ']').click();
 })

$('a').not('.tabs li a').on('click', function(evt) {
evt.preventDefault();
var whereTo = $(this).attr('goto');
$tabs = $("ul.tabs li");
$tabs.find('a[href=#' + whereTo + ']').trigger('click');

$('html, body').animate({
    scrollTop: $('#'+whereTo+' a').offset().top });

 });
 </script> 
```

任何想法、想法或帮助将不胜感激！！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:02:17.500

您需要将此添加到事件中以停止其默认行为

```
preventDefault(); 
```

请参阅[文档](http://api.jquery.com/event.preventDefault/)

因此，对于您需要停止其行为的任何锚标记

```
$('#yourselector').click(function(e){
    e.preventDefault();
}); 
```

# actionscript-3 - Actionscript 3.0 - 从超类获取变量到新对象

> ID：12145360
> 
> 赞同：0
> 
> 时间：2012-08-27T15:58:12.183
> 
> 标签：actionscript-3, flash, actionscript

我该怎么做呢？

```
public class SuperClass extends MovieClip {
  public static var test:String = 'Hello world';
}

public class SubClass extends SuperClass {
  public function SubClass() {
    var unit = new Unit();
    addChild(Unit);
  }
}

public class Unit extends MovieClip {
  public function Unit() {
    //Get variable:test from SuperClass??
    trace(SubClass.test); //Error
  }
} 
```

希望你明白我想做什么？想从我在子类中添加的新单元中的超类中获取变量“测试”。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:16:47.097

在这种情况下，您命名的类通过组合而不是继承`SubClass`使用该类。`Unit`因此，该类对它们的任何属性（如属性）`Unit`一无所知。`SubClass``SuperClass``test`

但是，您可以`Unit`通过它的构造函数将值传递给类（或者直接将值设置到`Unit`类的属性上）：

（仅显示最后两个类）

```
public class SubClass extends SuperClass {

  public function SubClass() {
    var unit = new Unit(test);
    addChild(Unit);
  }
}

public class Unit extends MovieClip {

  private var test:String;

  public function Unit(test:String) {
    this.test = test;
  }
} 
```

**[编辑]**

由于您的`Unit`类需要访问`SubClass`(and/or `SuperClass`) 的许多属性，您可能只想传递一个`SubClass`to的实例`Unit`：

```
public class SubClass extends SuperClass {

  public function SubClass() {
    var unit = new Unit(this);
    addChild(Unit);
  }
}

public class Unit extends MovieClip {

  private var subClass:SubClass;

  public function Unit(subClass:SubClass) {
    this.subClass = subClass;
    trace(subClass.text);
  }
} 
```

你如何实际解决这个问题取决于你的用例。但是没有基本的捷径来做你所要求的。

# ios - Restkit：映射操作没有找到任何可映射的内容

> ID：12145363
> 
> 赞同：1
> 
> 时间：2012-08-27T15:58:27.950
> 
> 标签：ios, object, mapping, restkit

我是 RestKit 新手，在设置我的第一个对象映射时遇到问题......日志语句说“映射操作没有找到任何可映射的内容”

这是我的代码：

```
- (void)setupConnector

{

    [RKClient clientWithBaseURL:[NSURL URLWithString:WS_URL]];

    RKLogConfigureByName("RestKit", RKLogLevelDebug);

    RKLogConfigureByName("RestKit/ObjectMapping", RKLogLevelDebug);

    RKLogConfigureByName("RestKit/Network", RKLogLevelDebug);

    RKObjectManager* manager = [RKObjectManager objectManagerWithBaseURL:[NSURL URLWithString:WS_URL]];

    manager.objectStore = [RKManagedObjectStore objectStoreWithStoreFilename:@"db.sqlLite"];

}

- (void)setupMapping

{

    RKObjectManager *manager = [RKObjectManager sharedManager];

    RKManagedObjectMapping *storyMapping = [RKManagedObjectMapping mappingForEntityWithName:@"Story" inManagedObjectStore:manager.objectStore];

    [storyMapping mapKeyPath:@"id" toAttribute:@"storyID"];

    [storyMapping mapKeyPath:@"title" toAttribute:@"title"];

    storyMapping.primaryKeyAttribute = @"storyID";

    storyMapping.setDefaultValueForMissingAttributes = YES;

    [manager.mappingProvider setMapping:storyMapping forKeyPath:@""];

    [manager.mappingProvider addObjectMapping:storyMapping];

    [[RKObjectManager sharedManager] loadObjectsAtResourcePath:@"/Story/1?format=json" usingBlock:^(RKObjectLoader* loader) {

    [loader setObjectMapping:storyMapping];

    }];

} 
```

以下是日志语句：

```
2012-08-19 14:25:39.108[68878:4903] D restkit.object_mapping:RKObjectMapper.m:222 Asked to map source object {

result =     {

    creatorName = admin;

    dateCreated = "/Date(1343603174000-0700)/";

    dateModified = "/Date(1343603180000-0700)/";

    genre = Fantasy;

    gradeVoteCount = 0;

    id = 1;

    isFinished = 0;

    isLocked = 0;

    isPublic = 0;

    storyCountTotal = 0;

    title = "First STory";

};

} with mapping <RKManagedObjectMapping:0x7673230 objectClass=Story keyPath mappings => (

"RKObjectKeyPathMapping: id => storyID",

"RKObjectKeyPathMapping: title => title"

)>

2012-08-19 14:25:39.109[68878:4903] D     restkit.object_mapping:RKObjectMappingOperation.m:655 Starting mapping operation...

2012-08-19 14:25:39.109[68878:4903] D restkit.object_mapping:RKObjectMappingOperation.m:676 Mapping operation did not find any mappable content

2012-08-19 14:25:39.109[68878:4903] D restkit.object_mapping:RKObjectMapper.m:367 The following operations are in the queue: (

)

2012-08-19 14:25:39.110[68878:4903] D restkit.object_mapping:RKObjectMapper.m:382 Finished performing object mapping. Results: { 
```

如果有人能让我走上正确的道路，我将不胜感激:)

万分感谢！

# api - 使用 REST 时对用户进行身份验证

> ID：12145364
> 
> 赞同：2
> 
> 时间：2012-08-27T15:58:30.727
> 
> 标签：api, rest, authorization, api-key, restler

不确定问题的标题是否很好地表达了我的问题，所以我将尽我所能在这里解释它：

我正在使用 php 和 Restler 编写一个 RESTful api。现在问题来了：

*   我想保护一些服务，即知道请求该服务的用户是否有足够的权限。

*   我正在实施的所有服务都必须使用**javascript**来使用，因此传统的方法用户/密码将不起作用，因为每个人都会看到！

*   我还想限制匿名用户可以执行的请求数量，就像 twitter 对搜索服务所做的那样。

我该怎么做才能将我的 api 公开给所有人，但只让有权限的用户完成他们的请求？

我偶然发现了这篇文章：[REST authentication and exposing the API key](https://stackoverflow.com/questions/5472668/rest-authentication-and-exposing-the-api-key)，但最后没有提供解决方案。

我对任何替代方案都持开放态度：比如 OAuth。我想使用与restler很好地集成的东西，但如果那是不可能的，那么没关系。

我看过很多信息，说 api 密钥可以完成这项工作，但由于我使用的是 javascript，如何保护这些密钥不被其他用户使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:20:04.240

* * *

**更新**：Restler 3 发布时`hybrid`使用评论访问支持`@access hybrid`，可[在此处](https://github.com/Luracast/Restler/tree/v3)获得！

* * *

及时提出正确的问题:)

你的问题有两个部分

### 1\. 如何使用 Restler进行`hybrid`访问（`public`和访问）`protected`

Restler 2 不支持混合访问，但将于 2012 年 8 月（本周）发布的 Restler 3 将支持混合访问，完全针对您的用例构建

您可以在[twitter](https://twitter.com/Luracast)和/或[facebook上关注开发](https://www.facebook.com/Luracast)

### 2\. 当主要使用者是 JavaScript 时，我如何保护我的 API

为简单起见，您可以使用带有[基本身份验证](https://stackoverflow.com/a/7969250/872168)的 HTTPS或带有[摘要式身份验证的 HTTP](https://stackoverflow.com/a/7871219/872168)

[本文](http://www.switchonthecode.com/tutorials/secure-authentication-without-ssl-using-javascript)介绍了另一种替代方法。它不是专门为 Restler 编写的，但很容易适应 Restler。如果您需要帮助，请告诉我们

# lisp - 如何在 SLIME EMACS 窗口中写入逗号字符

> ID：12145367
> 
> 赞同：1
> 
> 时间：2012-08-27T15:58:38.120
> 
> 标签：lisp, slime

如何在 SLIME emacs 窗口中写入“，”（逗号）字符？, 键会自动调出 SLIME 命令提示符。

谢谢，Lisp 初学者

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T16:55:18.063

`,`仅在行首输入时触发 REPL 快捷方式选择。在所有其他情况下，您可以通过键入来输入逗号`,`。

在 Common Lisp 的情况下，由于只要不修改阅读器，`,`就只能出现在准引用的表达式中，这不应该是一个重要的限制。

如果确实有问题，请参阅[Deokhwan Kim 的回答](https://stackoverflow.com/a/12145621/15517)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T16:13:02.380

`,`您可以按`C-q``,`（Control-q 然后逗号）插入。`C-q`is bound to `quoted-insert`，当您希望 Emacs 读取下一个输入字符并插入它而不是调用绑定到输入字符的命令时，通常可以使用它。

# windows - 为什么这个 lua 脚本无法打开 Windows 子目录？

> ID：12145370
> 
> 赞同：0
> 
> 时间：2012-08-27T15:58:59.657
> 
> 标签：windows, scripting, lua, vlc

我正在尝试确定 lua 脚本中是否存在多个目录之一。它适用于 OSX，但不适用于 Windows（Linux 目前未经测试，但我希望它能够工作）。当下面的代码运行时，我得到一个错误：

**此 C:\Program Files (x86)\VideoLAN\VLC\lua\playlist\ 失败：没有这样的文件或目录**

我可以确认该目录存在。我已经逃脱了斜线，我不确定还有什么问题。

```
local oses = { "/Applications/VLC.app/Contents/MacOS/share/lua/playlist/"; "C:\\Program Files\\VideoLAN\\VLC\\lua\\playlist\\"; "C:\\Program Files (x86)\\VideoLAN\\VLC\\lua\\playlist\\"; "/usr/lib/vlc/lua/playlist" }

-- Determine which OS this is (and where to find share/lua).
local f,err = io.open( oses[1], "r")
if not err then
    opsys = "OSX"
    scriptpath = oses[1] .. script
    f:close()
else
    f,err = io.open( oses[2], "r")
    if not err then
        opsys = "Win32"
        scriptpath = oses[2] .. script
        f:close()
    else
        f,err = io.open( oses[3], "r")
        vlc.msg.dbg( dhead .. 'failed with this ' .. err .. dtail ) 
        if not err then
            opsys = "Win64"
            scriptpath = oses[3] .. script
            f:close()
        else
            f,err = io.open( oses[4], "r")
            if not err then
                opsys = "Linux/Unix"
                scriptpath = oses[4] .. script
                f:close()
            else
                return false
            end
        end
    end 
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T16:52:22.813

*文件*“ C:\Program Files\VideoLAN\VLC\lua\playlist\”不存在。如果您要删除尾部斜杠，您将尝试打开一个目录并且可能会遇到权限错误。这两种方式都行不通。如果您打算使用这种确定操作系统的方法，您应该尝试打开*文件*。

例如，构建您的脚本路径，尝试打开该文件，并使用*它*来确定通过/失败。

旁注，您的代码结构可以大大改善。每当您有一堆因索引而异的重复代码时，您都应该使用循环。例如，我们可以用以下代码替换您的代码：

```
local oses = {
    ["OSX"]        = "/Applications/VLC.app/Contents/MacOS/share/lua/playlist/",
    ["Win32"]      = "C:\\Program Files\\VideoLAN\\VLC\\lua\\playlist\\",
    ["Win64"]      = "C:\\Program Files (x86)\\VideoLAN\\VLC\\lua\\playlist\\",
    ["Linux/Unix"] = "/usr/lib/vlc/lua/playlist",
}
for osname, directory in pairs(oses) do
    local scriptpath = directory..script
    local f,err = io.open( scriptpath, "r")
    if not err then
        f:close()
        return scriptpath, osname
    end
end 
```

# sql-server - Read Xml on SQL Server with namespace

> ID：12145374
> 
> 赞同：0
> 
> 时间：2012-08-27T15:59:08.837
> 
> 标签：sql-server, xml

I trying to read a XML file in SQL Server using this guide.

[http://blog.sqlauthority.com/2009/02/13/sql-server-simple-example-of-reading-xml-file-using-t-sql/](http://blog.sqlauthority.com/2009/02/13/sql-server-simple-example-of-reading-xml-file-using-t-sql/)

Works fine, but I have a XML file with a namespace and doesn´t works this code with namespace.

Some solution?

* * *

Thanks Remus. Now I have this code

```
 DECLARE @MyXML XML
SET @MyXML = '<cfdi:Comprobante xmlns:cfdi="http://www.sat.gob.mx/cfd/3"   Moneda="USD">
    <cfdi:Impuestos totalImpuestosRetenidos="0.00" totalImpuestosTrasladados="1143.06">
    </cfdi:Impuestos>
</cfdi:Comprobante> ' 

;with xmlnamespaces('http://www.sat.gob.mx/cfd/3' as cfdi)
SELECT
a.b.value('@Moneda','varchar(100)') Moneda,
a.b.value('Impuestos[1]/@totalImpuestosTrasladados','float') totalImpuestosTraslados
FROM @MyXML.nodes('cfdi:Comprobante') a(b) 
```

Works, but the value of totalImpuestosTraslados is NULL.

Moneda totalImpuestosTraslados

USD NULL

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T16:01:45.913

使用[`WITH XMLNAMESPACES`](http://msdn.microsoft.com/en-us/library/ms177607.aspx). 如果此信息不充分，请发布详细信息（您尝试了什么，遇到了什么错误）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-15T21:14:57.330

```
DECLARE @MyXML XML
SET @MyXML = '<cfdi:Comprobante xmlns:cfdi="http://www.sat.gob.mx/cfd/3"   Moneda="USD">
    <cfdi:Impuestos totalImpuestosRetenidos="0.00" totalImpuestosTrasladados="1143.06">
    </cfdi:Impuestos>
</cfdi:Comprobante> ' 

;with xmlnamespaces('http://www.sat.gob.mx/cfd/3' as cfdi)
SELECT
a.b.value('@Moneda','varchar(100)') Moneda,
a.b.value('cfdi:Impuestos[1]/@totalImpuestosTrasladados','float') totalImpuestosTraslados
FROM @MyXML.nodes('cfdi:Comprobante') a(b) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-02T01:38:48.920

“Impuestos”也有 cfdi 作为命名空间，所以你也必须包含它

```
DECLARE @MyXML XML
SET @MyXML = '<cfdi:Comprobante xmlns:cfdi="http://www.sat.gob.mx/cfd/3"   Moneda="USD">
<cfdi:Impuestos totalImpuestosRetenidos="0.00" totalImpuestosTrasladados="1143.06">
</cfdi:Impuestos>
</cfdi:Comprobante> ' 

;with xmlnamespaces('http://www.sat.gob.mx/cfd/3' as cfdi)
SELECT
a.b.value('@Moneda','varchar(100)') Moneda,
a.b.value('<b>/cfdi:</b>Impuestos[1]/@totalImpuestosTrasladados','float') totalImpuestosTraslados
FROM @MyXML.nodes('cfdi:Comprobante') a(b) 
```

# windows - Duplicate import entries in PE file

> ID：12145375
> 
> 赞同：1
> 
> 时间：2012-08-27T15:59:10.380
> 
> 标签：windows, executable, portable-executable

I am doing some bulk analytics on PE files, while parsing the import table of a PE file, I'm finding that many PE files import duplicate entries for a given DLL... why is this? what does this functionally provide?

For instance, a dump of example.exe import table shows:

Kernel32.dll User32.dll blah.dll Kernel32.dll Kernel32.dll User32.dll shell32.dll

Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T10:56:59.913

您观察到的正确且完全正常！看一下下图，它显示了[Dependency Walker](http://www.dependencywalker.com/)正在分析[Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)（静态）导入许多库的图像。迟早一个库会导入一个已经被其他库导入的库（例如，典型的例子是 USER32.DLL 或 NTDLL.DLL，它们几乎总是被多次导入）。

![在此处输入图像描述](../Images/2f691e914d86776b55ee2811655a3dc7.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:24:28.420

也许您正在分析的 PE 已被修补以导入其他功能，因为大多数二进制文件的导入地址表都非常紧凑，因此在现有模块中添加条目是相当不可能的。

# .net - SocketAsyncEventArgs.Completed 在 Windows 8 中不会触发

> ID：12145378
> 
> 赞同：4
> 
> 时间：2012-08-27T15:59:12.783
> 
> 标签：.net, windows-8, asyncsocket, iocp

当我在安装了 Windows 7 Ultimate 和 .NET 4 的机器上编译此代码时，它工作得很好，但是当我在安装了 Windows 8 RTM 和 .NET 4.5 的机器上尝试它时，Complete 事件永远不会触发。

```
class Program
{
    private static Socket _Socket = new Socket(
        AddressFamily.InterNetwork,
        SocketType.Stream,
        ProtocolType.Tcp);

    private static void Main(string[] args)
    {
        _Socket.Bind(new IPEndPoint(IPAddress.Any, 5012));
        _Socket.Listen(100);

        var arguments = new SocketAsyncEventArgs();
        arguments.Completed += OnAccepted;
        Accept(arguments);

        Console.ReadLine();
    }

    private static void Accept(SocketAsyncEventArgs args)
    {
        args.AcceptSocket = null;
        if (!_Socket.AcceptAsync(args))
            OnAccepted(null, args);
    }

    private static void OnAccepted(object sender, SocketAsyncEventArgs e)
    {
        Console.WriteLine("Accepted.");
        Accept(e);
    }
} 
```

有趣的是，如果我在这一行设置断点并对其进行调试：

```
var arguments = new SocketAsyncEventArgs(); 
```

[并在继续执行之前使用Hercules](http://www.hw-group.com/products/hercules/index_en.html "Hercules 设置实用程序")连接此服务器，它就像一个魅力。我一开始就这样做，然后神奇地调用 OnAccepted 并写入“Accepted”。在每个连接上到控制台。我在装有 Windows 7 和 .NET 4 的机器上使用相同的代码和相同的程序 (Hercules)，但它始终有效。

*   难道我做错了什么？
*   如果不是，它是我的操作系统或 .NET Framework 4.5 版的已知错误吗？
*   任何人都可以重现这个吗？

**编辑**：两个操作系统都是 64 位的。
**编辑 2 ：我在**[此处](https://connect.microsoft.com/VisualStudio/feedback/details/759913/socketasynceventargs-completed-doesnt-fire-in-net-framework-4-5 "SocketAsyncEventArgs.Completed 在 .NET Framework 4.5 中不会触发")将其报告为 Microsoft Connect 上的错误。
**编辑 3**：找到一种解决方法并将其发布到 Connect（只需创建一个虚假的第一个连接）。
**编辑 4**：如果有人可以重现此问题，请加入 Connect 中的问题。
**编辑 5**：我看到了[Thomas 提到的问题](https://stackoverflow.com/q/12464185/704144)，我测试了是否`Console.ReadLine`导致了这个问题。原来是这样。如果我在通话前添加并`Thread.Sleep(3000)` **在**`Console.ReadLine`运行程序后 3 秒内尝试连接，它就像一个魅力。同样，奇怪的是我只需要在调用`Console.ReadLine`. 如果我在打电话之前建立一个连接`Console.ReadLine`然后每个连续的连接都有效，即使在`Console.ReadLine`被调用之后也是如此。我将在连接页面中提到这一点。
**编辑6**：我将另一个问题的链接添加到连接页面，并添加了另一个解决方法，涉及在调用`Thread.Sleep`之前调用，`Console.ReadLine`就像我在上面的编辑中提到的那样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T13:55:20.367

事实证明这是一个 Windows 8 错误。到目前为止，我能找到的最佳解决方法是在不同的线程上启动 IOCP 操作。

所以我应该在问题中给出的代码示例中做的事情是改变这一行：

```
Accept(arguments); 
```

到`Main`方法中的这一行：

```
Task.Run(() => Accept(arguments)).Wait(); 
```

这可以防止`Console.ReadLine()`调用阻塞 IOCP 操作。

~~*附带说明：这只是操作系统错误的一种解决方法，很可能通过更新来修复，并且 - 希望 - 使这种解决方法变得多余。*~~

此问题已在最新版本的 Windows 8 中得到修复。

* * *

**编辑：**[我在 Connect 中发布](https://connect.microsoft.com/VisualStudio/feedback/details/759913)的反馈项目的状态更改为“按设计”。
我还收到一封电子邮件，其中包含以下内容：

> 此行为的根本问题与 Windows 8 中如何处理 IO 完成端口有关。.NET 使用完成端口工作；当他们的行为发生变化时，.NET 行为也发生了变化。

**编辑 2：**反馈的状态再次更改为“活动”，没有详细信息。

**编辑 3：**反馈收到了 Microsoft 的另一个答复，指出：

> 最新版本的 Windows 8 应该已修复此问题。请注意，这是操作系统问题，而不是 .NET 问题：您需要确保拥有最新版本的操作系统。没有对 .NET 进行任何更改来导致或解决此问题。”

# string - How to retrieve two columns data in A,B format in Oracle

> ID：12145379
> 
> 赞同：9
> 
> 时间：2012-08-27T15:59:13.280
> 
> 标签：string, oracle

I have two columns in oracle database

```
+---------+---------+
| Column1 | Column2 |
+---------+---------+
| A       | 1       |
| A       | 2       |
+---------+---------+ 
```

I want to retireive the data like i will get data as result

```
+---------+---------+
| Column1 | Column2 |
+---------+---------+  
| A       | 1,2     |
+---------+---------+ 
```

Please provide me the solution.

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-27T16:06:08.590

Tim Hall[在 Oracle 中有一个非常规范的字符串聚合技术](http://www.oracle-base.com/articles/misc/string-aggregation-techniques.php)列表。

您使用哪种技术取决于许多因素，包括 Oracle 的版本以及您是否正在寻找纯 SQL 解决方案。如果您使用的是 Oracle 11.2，我可能会建议使用`LISTAGG`

```
SELECT column1, listagg( column2, ',' ) WITHIN GROUP( order by column2 )
  FROM table_name
 GROUP BY column1 
```

如果您使用的是早期版本的 Oracle，假设您不需要纯 SQL 解决方案，我通常更喜欢使用[用户定义的聚合函数](http://www.oracle-base.com/articles/misc/string-aggregation-techniques.php#user_defined_aggregate_function)方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-28T15:25:09.207

如果你有 10g，那么你必须通过下面的函数：

```
CREATE OR REPLACE FUNCTION get_comma_separated_value (input_val  in  number)
  RETURN VARCHAR2
IS
  return_text  VARCHAR2(10000) := NULL;
BEGIN
  FOR x IN (SELECT col2 FROM table_name WHERE col1 = input_val) LOOP
    return_text := return_text || ',' || x.col2 ;
  END LOOP;
  RETURN LTRIM(return_text, ',');
END;
/ 
```

所以，你可以这样做：

```
select col1, get_comma_separated_value(col1) from table_name 
```

[在这里提琴](http://www.sqlfiddle.com/#!4/0eb31/2)

如果你有 oracle 11g，你可以使用[listagg](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions089.htm#SQLRF30030)：

```
SELECT 
    col1,
    LISTAGG(col2, ', ') WITHIN GROUP (ORDER BY col2) "names"
FROM table_x
GROUP BY col1 
```

[在这里为 Listagg 小提琴](http://www.sqlfiddle.com/#!4/e1b6a/2)

对于 mysql，它会很简单：

```
SELECT col1, GROUP_CONCAT(col2) FROM table_name GROUP BY col1 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-07-05T09:47:03.790

**所有答案都是正确的**，我想添加一个案例来解决小问题。在我的情况下`my_column1`，类型是`nvarchar2`但文本是`number`，并且下面的代码不起作用并且只显示空格：

```
select group_id, listagg( t.my_column1 || '-' || to_char(t.doc_date,'dd.mm.yyyy') ||  ' ') within group(order by doc_date) 
 from my_table t
 group by group_id 
```

当我这样写时，它起作用了。

```
select group_id, listagg( to_char(t.my_column1) || '-' || to_char(t.doc_date,'dd.mm.yyyy') ||  ' ') within group(order by doc_date) 
 from my_table t
 group by group_id 
```

我希望我的反馈可以节省别人的时间

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-08-24T10:05:06.823

在我的 oracle 版本 10 上，它完成了这项工作：

```
SELECT column1, wm_concat( column2)
  FROM table_name
 GROUP BY column1 
```

# asp.net - 石英调度程序发送多个电子邮件通知

> ID：12145380
> 
> 赞同：0
> 
> 时间：2012-08-27T15:59:15.777
> 
> 标签：asp.net, asp.net-mvc, scheduled-tasks

我正在使用石英计划在 asp.net mvc 应用程序中安排作业。此计划在固定时间间隔后安排作业。

[http://quartznet.sourceforge.net/](http://quartznet.sourceforge.net/)

我创建的服务基本上每分钟运行一次。它每 1 分钟从消息队列（在我的情况下为数据库）中读取消息，发送一封电子邮件并将消息发送状态更新为 true。不过我遇到了一些问题。具体来说，问题是由于下面提到的原因，服务会两次发送相同的电子邮件。

在某些情况下，只要在数据库更新发生之前发送电子邮件，就会调用该服务。由于在发送电子邮件和再次调用服务后不会发生数据库更新，因此再次从数据库中读取已处理的消息作为未读消息并获取怨恨。

从数据库中再次读取相同的消息。因此服务结束发送相同的消息两次。

我如何在我的代码中处理这种情况。

```
public void Execute(JobExecutionContext context)
        {
            List<QueuedEmail> lstQueuedEmail =
                _svcQueuedEmail.Filter((x => x.IsSent == false)).Take(NO_OF_MAILS_TO_SEND).ToList();
            if (lstQueuedEmail.Count > 0)
            {
                foreach (var queuedEmail in lstQueuedEmail)
                {
                    try
                    {
                        bool emailSendStatus = false;

                        emailSendStatus = EmailHelper.SendEmail(queuedEmail.From, queuedEmail.To, queuedEmail.Subject,
                                                                queuedEmail.Body, queuedEmail.FromName);
                        QueuedEmail objQueuedEmail =
                            _svcQueuedEmail.Filter(x => x.Id == queuedEmail.Id).FirstOrDefault();
                        if (emailSendStatus)
                        {
                            objQueuedEmail.IsSent = true;
                            objQueuedEmail.SentOnUtc = DateTime.UtcNow;
                        }
                        else
                        {
                            objQueuedEmail.IsSent = false;
                            if (objQueuedEmail.SentTries == null)
                            {
                                objQueuedEmail.SentTries = 1;
                            }
                            else
                            {
                                objQueuedEmail.SentTries += 1;
                            }
                        }
                        _svcQueuedEmail.Update(objQueuedEmail);
                    }
                    catch (Exception)
                    {
                        //log error 
                    }
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:07:55.537

假设您的电子邮件有两种状态：“待处理”和“已发送”。

您应该添加第三个中间状态，称为“正在发送”，并且一旦您从队列中读取电子邮件，您应该将其状态更改为“正在执行”，这样其他线程/服务就不会再次获得它。

# c# - how to load a value in textbox at program startup

> ID：12145382
> 
> 赞同：-3
> 
> 时间：2012-08-27T15:59:17.953
> 
> 标签：c#, textbox, startup

i managed to do somehow what i want by doing this

```
 private void textBox1_Enter(object sender, EventArgs e)
    {
        textBox1.Text = "a1";
    } 
```

But i want this to happen without clicking on the textbox The way i did upper required me to click before a1 will be written there.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T16:07:41.633

您需要在[`Load`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.load.aspx)您的表格中执行此操作

```
private void YourFormName_Load(object sender, EventArgs e)
{
     string someValue="Get the value from wherever you want";
     textBox1.Text = someValue;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:03:27.343

例如，如果您需要读取 config 的全局变量，在 appsetting

```
NameValueCollection appSettings = ConfigurationManager.AppSettings;
textBox1.Text = appSettings["yourkey"]; 
```

# objective-c - 离开表单表视图时关闭键盘？

> ID：12145385
> 
> 赞同：1
> 
> 时间：2012-08-27T15:59:26.183
> 
> 标签：objective-c, ipad, uinavigationcontroller, keyboard

我有一个使用表单视图的 UINavigationController，我有一个推送 viewController2 的 viewController 1。

viewController2 有一个 UITextField 和键盘弹出，太棒了。但是，在弹出此视图并返回 viewController1 时，键盘会保持原状，我就是无法将其关闭。

我只想在返回 viewController1 时关闭键盘。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:02:05.260

在`viewWillDisappear:`方法中的第二个视图控制器中执行以下操作：

```
- (void)viewWillDisappear:(BOOL)animated {
    [super viewWillDisappear:animated];
    [textField resignFirstResponder];
} 
```

这将从文本字段中获取焦点，并导致键盘被关闭。

# php - How can I get the APP SECRET of an application that I created programatically?

> ID：12145389
> 
> 赞同：0
> 
> 时间：2012-08-27T15:59:39.983
> 
> 标签：php, facebook, facebook-graph-api

I created a FB App programatically using this:

[https://www.facebook.com/connect/create_app.php?api_key=APP_ID&name=AP_NAME](https://www.facebook.com/connect/create_app.php?api_key=APP_ID&name=AP_NAME)

now I need to get the APP ACCESS TOKEN that can be retrieved using the following code:

```
$APPLICATION_ID = "APP_ID";
$APPLICATION_SECRET = "APP_SECRET";

$token_url =    "https://graph.facebook.com/oauth/access_token?" .
                "client_id=" . $APPLICATION_ID .
                "&client_secret=" . $APPLICATION_SECRET .
                "&grant_type=client_credentials";
$app_token = file_get_contents($token_url); 
```

for that, I obviously need to have first the APP_SECRET...

So is there any workaround to get the APP_SECRET of the newly created app?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T16:26:35.437

您的 AppSecret 用于“安全目的”，不应以这种方式检索。

`oauth`Appsecret 用于按照握手机制的定义对您的请求进行加密和解密。

它不应该具有“通过 api 的实时机制”来获取它：您是否意识到它可能产生的安全问题？

尝试从其他角度寻找secret_key，这是一种没有人可以在网络上拥有的信息......

希望对您的愿景/需求有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T16:10:43.860

您必须前往[Facebook 开发者](https://developers.facebook.com/apps)并复制这两个密钥：![在此处输入图像描述](../Images/0bf31fe1b284e2b0cfb601f143254b19.png)

# c# - 如何在 ASP.NET Web API 中设置下载文件名

> ID：12145390
> 
> 赞同：149
> 
> 时间：2012-08-27T15:59:42.917
> 
> 标签：c#, asp.net-web-api

在我的 ApiController 类中，我有以下方法来下载服务器创建的文件。

```
public HttpResponseMessage Get(int id)
{
    try
    {
        string dir = HttpContext.Current.Server.MapPath("~"); //location of the template file
        Stream file = new MemoryStream();
        Stream result = _service.GetMyForm(id, dir, file);
        if (result == null)
        {
            return Request.CreateResponse(HttpStatusCode.NotFound);
        }
        result.Position = 0;
        HttpResponseMessage response = new HttpResponseMessage();
        response.StatusCode = HttpStatusCode.OK;
        response.Content = new StreamContent(result);
        return response;
    }
    catch (IOException)
    {
        return Request.CreateResponse(HttpStatusCode.InternalServerError);
    }
} 
```

除了默认下载文件名是它的 id 之外，一切都运行良好，因此用户可能每次都必须在另存为对话框中键入他/她自己的文件名。有没有办法在上面的代码中设置默认文件名？

* * *

## 回答 #1

> 赞同：305
> 
> 时间：2012-08-27T16:06:10.003

您需要在以下位置设置`Content-Disposition`标题`HttpResponseMessage`：

```
HttpResponseMessage response = new HttpResponseMessage();
response.StatusCode = HttpStatusCode.OK;
response.Content = new StreamContent(result);
response.Content.Headers.ContentDisposition = new ContentDispositionHeaderValue("attachment")
{
    FileName = "foo.txt"
}; 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-08-27T16:03:30.590

编辑：正如评论中提到的，我的回答没有考虑到需要像`;`. 如果您的文件名可能包含分号，您应该使用 Darin 提供的公认答案。

添加一个 Response.AddHeader 来设置文件名

```
Response.AddHeader("Content-Disposition", "attachment; filename=*FILE_NAME*"); 
```

只需将 FILE_NAME 更改为文件名即可。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-09-12T07:18:37.027

如果要确保文件名正确编码但又要避免使用 WebApi HttpResponseMessage，则可以使用以下命令：

```
Response.AddHeader("Content-Disposition", new System.Net.Mime.ContentDisposition("attachment") { FileName = "foo.txt" }.ToString()); 
```

您可以使用 ContentDisposition 或 ContentDispositionHeaderValue。在任一实例上调用 ToString 将为您完成文件名的编码。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-27T16:03:40.483

我认为这可能对您有所帮助。

```
Response.AddHeader("Content-Disposition", "attachment; filename=" + fileName) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-27T16:04:27.410

您需要将 content-disposition 标头添加到响应中：

```
 response.StatusCode = HttpStatusCode.OK;
 response.Content = new StreamContent(result);
 response.AppendHeader("content-disposition", "attachment; filename=" + fileName);
 return response; 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-07-17T15:20:14.233

如果您使用的是 ASP.NET Core MVC，那么上面的答案会稍有改变......

在我的操作方法（返回`async Task<JsonResult>`）中，我添加了该行（在 return 语句之前的任何位置）：

```
Response.Headers.Add("Content-Disposition", $"attachment; filename={myFileName}"); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-27T16:04:41.703

这应该这样做：

```
Response.AddHeader("Content-Disposition", "attachment;filename="+ YourFilename) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-28T06:17:19.483

**注意：最后一行是强制性的。**

如果我们没有指定***Access-Control-Expose-Headers***，我们将不会在 UI 中获取文件名。

```
FileInfo file = new FileInfo(FILEPATH);

HttpResponseMessage response = new HttpResponseMessage(HttpStatusCode.OK);
response.Content.Headers.ContentDisposition = new ContentDispositionHeaderValue("attachment")
{
    FileName = file.Name
};
response.Content.Headers.Add("Access-Control-Expose-Headers", "Content-Disposition"); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-10-31T18:44:28.603

考虑到以前的答案，有必要小心全球化的字符。

假设文件名是：“ **Esdrújula prenda ñame - güena.jpg** ”

**要下载的原始**结果：“EsdrÃºjula prenda Ã±ame - gÃ¼ena.jpg”[丑陋]

**HtmlEncode结果**下载：“Esdr&_250;jula prenda &_241;ame - g&_252;ena.jpg”[丑]

**UrlEncode 结果**下载：“ **Esdrújula+prenda+ñame+-+güena.jpg** ” [OK]

然后，您**几乎总是需要在文件名上使用 UrlEncode**。此外，如果您将 content-disposition 标头设置为直接字符串，**则需要确保用引号括起来**以避免浏览器兼容性问题。

```
Response.AddHeader("Content-Disposition", $"attachment; filename=\"{HttpUtility.UrlEncode(YourFilename)}\""); 
```

或在课堂帮助下：

```
var cd = new ContentDisposition("attachment") { FileName = HttpUtility.UrlEncode(resultFileName) };
Response.AddHeader("Content-Disposition", cd.ToString()); 
```

System.Net.Mime。**ContentDisposition**类负责引号。

# asp.net - 在 EntityTemplates 的 ListView 中显示子项

> ID：12145391
> 
> 赞同：0
> 
> 时间：2012-08-27T15:59:44.790
> 
> 标签：asp.net, entity-framework-4

我对 asp.net 很陌生，但我发现为现有数据库设置一个脚手架网站非常简单。我已经启动并运行了。

让事情按我想要的方式工作有点棘手。我有一张`Customer`与桌子有一对多关系的`ContactMoment`桌子。默认情况下，`Customer`显示链接以查看的详细视图（默认情况下在调用`ContactMoments`中定义）。我想要的是包括所有.`FieldTemplate``Children``ListView``ContactMoments`

我尝试了以下方法：

```
<asp:ListView runat="server" ID="DynamicControl2" DataMember="ContactMoment" /> 
```

这不起作用。我可能需要使用`DataSourceID`，但我不知道如何从当前实体中检索它。有人能指出我正确的方向吗？谢谢 ：）

**更新**：我刚刚发现[动态数据扩展](http://ddextensions.codeplex.com/)列出了以下有趣的部分。（不幸的是，该项目似乎被放弃了..）

> 1.  **ChildrenList** – 提供一种显示子表的方法，与新的编辑和详细信息页面模板结合使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:39:40.657

你需要添加一个额外的数据源和 Listview 控件来获得你想要的结果..

我没有尝试过此代码，但它应该可以工作...根据您的实际名称更改实体名称..

```
<asp:EntityDataSource ID="ContactMomentDataSource" runat="server"  
        ContextTypeName="YourEntities" EnableFlattening="False"  
        EntitySetName="ContactMoment"  
        Where="@CustomerID IN (SELECT VALUE Customer.CustomerID FROM it.Customer  AS Customer)"> 
        <WhereParameters> 
            <asp:ControlParameter ControlID="YourDetailView" Type="Int32" Name="CustomerID" PropertyName="SelectedValue" /> 
        </WhereParameters> 
    </asp:EntityDataSource>

<asp:ListView ID="ContactMomentListView" runat="server"  
        DataSourceID="ContactMomentDataSource" 
        AllowSorting="True" AutoGenerateColumns="False" 
        SelectedRowStyle-BackColor="LightGray"  
        DataKeyNames="ContactMomentID"> 
        </asp:ListView> 
```

现在您只需要添加要在 Listview 的标记中显示的 Column ..

希望这可以帮助...

# heroku - What are my options in terms of getting Heroku traffic metrics?

> ID：12145394
> 
> 赞同：0
> 
> 时间：2012-08-27T16:00:00.590
> 
> 标签：heroku

I am interested in obtaining as much information about the website's traffic as possible (number of visitors, average bounce rate, average visit length etc). What are my options for Heroku?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:02:04.450

无论您托管应用程序的方式如何，您都可以将 Google Analytics 添加到模板中。这可能是最直接的选择。

# vb.net - Event after form is fully loaded?

> ID：12145395
> 
> 赞同：24
> 
> 时间：2012-08-27T16:00:07.390
> 
> 标签：vb.net, winforms

I want to do an event after `Form_Load` event.

What is the event of "form fully loaded"?

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-27T16:02:39.530

您正在寻找事件 Form.Shown()。

[请参阅 MSDN 上的参考资料](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.shown.aspx)

这是打开表单时事件链中的最后一个事件，如此处所述[。](http://msdn.microsoft.com/en-us/library/86faxx0d.aspx) 表单“加载”事件在表单可见之前引发，表单“显示”事件在表单可见时引发。（以及所有控件）

此外，请记住避免在表单“加载”事件中调用 MessageBox，这会破坏正常的事件流。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-27T16:02:49.263

您可能想使用[Form.Shown](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.shown.aspx)。这是表单初始显示期间引发的最后一个事件。

有关详细信息，请参阅[Windows 窗体中的事件顺序](http://msdn.microsoft.com/en-us/library/86faxx0d.aspx)。它详细说明了引发了哪些事件以及引发的顺序。

# postgresql - JPA 枚举（java.lang.ClassCastException：org.postgresql.util.PGobject）

> ID：12145403
> 
> 赞同：1
> 
> 时间：2012-08-27T16:00:32.460
> 
> 标签：postgresql, jpa, enums

我尝试使用@Enumerated 注释来映射我的枚举类型，但出现以下错误：

```
Exception in thread "main" java.lang.ClassCastException: org.postgresql.util.PGobject cannot be cast to java.lang.String 
```

我做什么：在postgres

```
create type "test_type" as enum ('test_1', 'test_2); 
```

在java中

> 公共枚举 TestType{ test_1, test_2 }
> 
> @Entity @Table(name="test_table") public class TestTable { ...
> @Enumerated(EnumType.STRING) @Column(name="col") private TestType col; ... }

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T17:46:04.120

在 JPA 中，枚举可以保存为文本（枚举的名称）或数值（枚举的序数）。`@Enumerated(EnumType.STRING)`告诉您更喜欢保留名称。因此数据库类型应该是 varchar。您的 JPA 提供者不知道 PostgreSQL 枚举。

# php - 动态创建的私有变量？

> ID：12145406
> 
> 赞同：0
> 
> 时间：2012-08-27T16:00:38.990
> 
> 标签：php

我有一组保存数据库状态的类。这就像一个微 ORM 模式。因此，对于这个解决方案，我将一些表的结构加载为类的动态属性，以便类看起来像：

*   目的
    *   [tbl_name]
        *   属性1
        *   属性2
        *   属性3
    *   [tbl_name]
        *   属性1
        *   属性2
        *   属性3

所有属性都是公共属性，因为我使用以下内容设置它们：

```
$object->{$table_name}->{$attribute} = 'foobar'; 
```

我想要的是这些动态设置的属性是私有的。为什么？好吧，因为，请不要错过这里的讽刺意味，我想通过使用 __get() 和 __set() 的重载 getter/setter 再次将它们公开。我们再次回到为什么的问题。实际上，对于“获取”，我对公共属性会很好，但是对于设置，我想在允许设置之前应用一些逻辑。这是我简化的 __set() 函数，它让您了解我想要实现的目标：

```
public function __set ( $property , $value ) {

    if ( !in_array ($property , $blocked_properties) ) {
        $this->property = $value;
        $this->trigger_event ( $property );
    }
} 
```

有道理？我很高兴以其他方式解决这个问题，但如果我可以动态设置私有实例变量，这似乎是一种非常优雅的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:06:09.573

不要创建这些实际属性，将它们存储在`private`数组中并仅通过魔术方法访问它们：

```
class ORM {

    private $fields = array();

    public function __get($name) {
        return $this->fields[$name];
    }

    public function __set($name, $value) {
        $this->fields[$name] = $value;
    }

} 
```

它的行为完全符合您的要求。

# facebook - Posting Open Graph user action on Facebook APP Page

> ID：12145407
> 
> 赞同：0
> 
> 时间：2012-08-27T16:00:45.070
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph, feed, facebook-page

I have a website which involves posting of user's activity on the website to the facebook fan page of the app(post are done using logged in users identity). I have managed to post on the facebook user's timeline as well as the facebook fan page.

Since I wanted to include link of the website's page in the feeds (goes to two pages.. user's timeline and facebook fan page). Therefore I thought, open graph would be a better option in this scenario.

On using open graph, I realized that I can post the user's action on user's timeline but I was unable to post to the fan page. I'd like to know how do I go about posting on facebook fan page? Is it not possible to use open graph in this case.

PS: Also before using open graph I used link parameter while posting as feed, but then the like counters for that link used to increase by 2 since I was sharing that link twice. Since I wanted to avoid this from happening, I hoped open graph would solve this problem for me.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T18:01:26.893

不，那是不可能的，因为 Open Graph 操作是*用户*执行的操作，会显示在他们的时间线上。

这是他们活动的反映，因此，唯一合理的展示位置将是在他们的时间线上向他们的朋友展示。在另一个时间线/粉丝页面上发帖不再是一个动作，而是一个提要帖子。

# android - 如何使用布局参数将视图添加到 TabHost 的底部？

> ID：12145408
> 
> 赞同：0
> 
> 时间：2012-08-27T16:00:51.190
> 
> 标签：android, layout, admob, android-tabhost

我想在 TabHost 的底部添加一个 Adview。但我无法弄清楚参数

```
final TabHost tabHost = getTabHost();
        AdView adView = new AdView(this, AdSize.BANNER, "my Id");
        adView.loadAd(new AdRequest());
    tabHost.addView(adView,???layoutparams????);

        tabHost.addTab(tabHost
                .newTabSpec("tab1")
                .setIndicator("Documents" 
```

编辑：广告显示良好，`tabHost.addView(adView)`但位于标签视图的中间。我想把它放在底部，但我不能让布局参数工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:16:10.203

我认为您不应该将 AdView 添加到 TabHost。根据[文档](http://developer.android.com/reference/android/widget/TabHost.html)，TabHost 小部件应该只包含一组选项卡标签和一个用于显示每个选项卡内容的 FrameLayout。我认为您应该确保您的 TabHost 本身位于垂直 LinearLayout （或类似）内，然后您可以将 AdView 添加到该 LinearLayout 的底部而不是 TabHost。

编辑：您已经尝试过哪些 LayoutParams？您是否尝试过使用 FrameLayout.LayoutParams 或任何其他类型？该单个选项卡的根布局元素是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:23:51.113

假设您希望广告在您的标签中，请定义您的自定义标签布局 (your_tab_layout.xml)

```
// get layoutinflater
LayoutInflater inflater = (LayoutInflater)this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

// inflate your layout into a View
View tabView = LayoutInflater.inflate(R.layout.your_tab_layout);

// get your AdView from the layout
AdView adView = tabView.findViewById(R.id.your_adview_id);

// Add the tab
TabHost.newTabSpec("tab1").setIndicator(tabView).setContent(intent); 
```

我同意@Scott，这看起来确实很奇怪，我可能会误解这个问题。如果您想要标签下方的广告，请忽略此答案，@Scott 是对的。

# javascript - 在 Ajax 中调用函数

> ID：12145409
> 
> 赞同：0
> 
> 时间：2012-08-27T16:00:54.840
> 
> 标签：javascript, ajax, coffeescript, long-polling

我遇到了问题，我无法在这段代码中创建循环：

```
 class ProductsPager
      constructor: ->
        this.waitformsg()
      waitformsg: =>
        alert 'begin'
        $.ajax
          type: "GET"
          url: "http://0.0.0.0:3000/live/index.json"
          async: true
          cache: false
          timeout: 1000
          success: (data) ->
            alert data
          error: (XMLHttpRequest, textStatus, errorThrown) ->
            alert "end"
            waitformsg()setTimeout "waitformsg()", 0 
```

这两个警报用于调试。它只显示我一次：“*开始*”，紧跟在“*结束*”之后，没有别的。
我得出结论，最后一行是错误的，我需要找到一种方法来调用 Ajax 中的方法。
我试图用甚至替换`setTimeout "waitformsg()", 0`，`this.waitformsg()`但`waitformsg()`它仍然不起作用。

我想显示无限的“警报”，直到收集到成功的正确条件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:54:32.617

这两个：

```
waitformsg()
setTimeout waitformsg, 0 
```

将不起作用，因为`waitformsg`范围内没有功能。

这：

```
setTimeout "waitformsg()", 0 
```

不起作用，因为没有调用*全局*`waitformsg`函数，字符串形式[`setTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)在全局上下文中执行字符串。我建议你忘记它`setTimeout`甚至有一个字符串形式。

[您应该使用粗箭头 ( `=>`)](http://coffeescript.org/#fat_arrow)将回调绑定到当前上下文：

```
waitformsg: =>
  alert 'begin'
  $.ajax
    #...
    error: (XMLHttpRequest, textStatus, errorThrown) =>
      alert "end"
      @waitformsg() 
```

如果您希望错误处理程序在重试之前等待一秒钟：

```
setTimeout @waitformsg, 1000 
```

该`waitformsg`方法将在正确的上下文中运行，因为您将其定义为绑定函数。

我在这里的时候还有几件事：

1.  `@`在 CoffeeScript 中 using 比 using 更惯用，因此`this`您的构造函数应该是：

    ```
    constructor: ->
      @waitformsg() 
    ```

2.  jQuery 的`async:true`标志 for[`$.ajax`](http://api.jquery.com/jQuery.ajax/)已被弃用，因此您应该停止使用它。`async:true`对您的用户（尤其是在循环中）也是一件令人讨厌的事情，所以再次，您应该停止使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:08:50.400

我没怎么玩过 CoffeeScript，所以这里是你在 Javascript 中的做法：

```
waitformsg: function() {
    var self = this;

    ...
    ...

    error: function(XMLHttpRequest, textStatus, errorThrown) {
        self.waitformsg();
    };
}; 
```

当你简单地打电话时`waitformsg()`，你基本上是在打电话`window.waitformsg()`。由于这不存在，因此您的代码不起作用。你不能使用`this`，因为回调是异步的，所以当回调被调用时，它的值`this`几乎是 jQuery 设置的（如果它设置的话） 。`error`因此，您还需要维护对`this`传递给关闭的引用，您可以通过在函数的本地范围内创建一个新变量并分配`this`给该变量来做到这一点（在这种情况下，我称之为 new变量`self`）。然后就可以调用了`self.waitformsg();`。

# php - 网站的Mirrored Code Igniter部分离线一动不动

> ID：12145412
> 
> 赞同：2
> 
> 时间：2012-08-27T16:01:00.357
> 
> 标签：php, apache, codeigniter

我真的希望有人能在这里帮助我——这是我在这个领域的第一份工作，我遇到了一个我无法解决的问题，我开始努力寻找答案。

### 概述

该计划是离线镜像现有的功能性网站，以测试新的网站设计。

在线网站似乎托管在标准共享主机上。有一个 FTP 登录和一个控制面板，可以访问典型的主机、数据库和邮箱设置。

离线我正在运行 RHEL 6.2 (Scientific Linux) 和新安装的 Apache、mysql 和 PHP。我将站点内容作为虚拟主机在虚拟本地域上运行，并在本地复制了 mysql 数据库的内容。

版本 - Apache 2.2.15 (Scientific Linux) PHP 5.3.3 Mysql 5.1.61

在基本层面上，我的离线镜像可以工作。Apache 提供 HTML/CSS 和图像。主要内容的 PHP 文件正在从数据库中提取信息并将其显示在浏览器可见的网站上。

### 问题...

...是网站的后端管理部分似乎处于假死状态 - 在登录面板阶段它只是坐在那里，没有响应，当输入凭据时。

我一直希望我可以更改存储在数据库中的 MD5 加密密码，然后启动管理部分并脱机运行。

登录页面的在线版本和离线版本之间也存在非常细微的视觉差异。

在线 [ [http://imgur.com/J0yLh](http://imgur.com/J0yLh) ] 离线 [ [http://imgur.com/sDb6l](http://imgur.com/sDb6l) ]

此管理部分已使用 CodeIgniter 作为框架在 PHP 中编码。

### 到目前为止，这是我试图解决此问题的笔记....

**CodeIgniter 似乎需要 Mod_rewrite。**

我已经确认这个模块是由我的本地 Apache 加载的（该模块在 httpd.conf 中被列出来加载）并且我已经测试过它可以正常工作。

奇怪的是，用于测试的方法依赖于 .htaccess 文件中的设置，而在实时站点上，.htaccess 文件是一个空文件，我无法在 FTP 上找到任何其他文件或通过设置的管理面板进行切换上 mod_rewrite。

如果 CodeIgniter 需要 mod_rewrite，那么它是如何在在线服务器上设置的就是一个谜。（值得我说的是/可能/在服务器本身上有一个 httpd.conf 配置，因为托管公司和原始网页设计公司的名称非常相似，所以可能是一样的。）

**$config['url_protocol'] = "AUTO";**

我在每个设置中都尝试过这个，但似乎没有一个可以让它工作。

**代码点火器错误日志...**

这些是在 config.php (../admin/system/application/config) 中切换 '$config['log_threshold'] = 4' 的结果。

```
ERROR - 2012-08-27 15:41:41 --> Severity: 8192  --> Function set_magic_quotes_runtime() is deprecated /var/www/html/website/httpdocs/admin/system/codeigniter/CodeIgniter.php 46
DEBUG - 2012-08-27 15:41:41 --> Config Class Initialized
DEBUG - 2012-08-27 15:41:41 --> Hooks Class Initialized
DEBUG - 2012-08-27 15:41:41 --> Router Class Initialized
DEBUG - 2012-08-27 15:41:41 --> Output Class Initialized
DEBUG - 2012-08-27 15:41:41 --> Input Class Initialized
DEBUG - 2012-08-27 15:41:41 --> Global POST and COOKIE data sanitized
DEBUG - 2012-08-27 15:41:41 --> URI Class Initialized
DEBUG - 2012-08-27 15:41:41 --> Language Class Initialized
DEBUG - 2012-08-27 15:41:41 --> Loader Class Initialized
DEBUG - 2012-08-27 15:41:41 --> Helpers loaded: url, form, array, auth
ERROR - 2012-08-27 15:41:41 --> Severity: 8192  --> Assigning the return value of new by reference is deprecated /var/www/html/website/httpdocs/admin/system/database/DB.php 81
DEBUG - 2012-08-27 15:41:41 --> Database Driver Class Initialized
DEBUG - 2012-08-27 15:41:41 --> Session Class Initialized
DEBUG - 2012-08-27 15:41:41 --> Controller Class Initialized
DEBUG - 2012-08-27 15:41:41 --> Helpers loaded: url
DEBUG - 2012-08-27 15:41:41 --> Helpers loaded: form
DEBUG - 2012-08-27 15:41:41 --> Config file loaded: config/bookings_settings.php
ERROR - 2012-08-27 15:41:41 --> Severity: 8192  --> Function ereg() is deprecated /var/www/html/website/httpdocs/admin/system/libraries/Config.php 177
ERROR - 2012-08-27 15:41:41 --> Severity: 8192  --> Function ereg() is deprecated /var/www/html/website/httpdocs/admin/system/libraries/Config.php 177
ERROR - 2012-08-27 15:41:41 --> Severity: 8192  --> Function ereg() is deprecated /var/www/html/website/httpdocs/admin/system/libraries/Config.php 177 
DEBUG - 2012-08-27 15:41:41 --> File loaded: /var/www/html/website/httpdocs/admin/system/application/views/login_view.php
DEBUG - 2012-08-27 15:41:41 --> Final output sent to browser
DEBUG - 2012-08-27 15:41:41 --> Total execution time: 0.0278 
```

也有关于不正确的时区声明的反复警告，PHP 声明它已更正。我已经去掉了这些以使日志可读。

“已弃用”错误消息表明我的 PHP 版本比在线版本更新 - 但我假设这些只是警告，并且这些函数仍应与我正在使用的版本一起使用。

在这个阶段我很难过 - 如果您对问题可能是什么有任何想法，或者我可以如何更好地进行故障排除，请您花点时间帮我一把？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:53:57.563

是的，您的 php 版本远远领先于实时版本。但是，它看起来也很奇怪。我不确定哪个版本的 CI 有文件“system/libraries/Config.php”tbh，它可能是一个非常旧的文件。

您在这里有两个选项，因为这些错误会导致您的数据库内容因某些事情而失败，例如您的管理员登录。

选项 1 是使用 php 5.1.x，因为它应该适用于我认为的代码。选项 2 将涉及对 codeigniter 的更新，我猜测对您的许多应用程序进行了相当大的重写，就好像它使用任何第三方库一样，它们可能不适用于最新的 codeigniter 版本。

# css - CSS 属性设置——我错过了什么吗？

> ID：12145415
> 
> 赞同：2
> 
> 时间：2012-08-27T16:01:10.200
> 
> 标签：css

在审查某人的 CSS 文件时，我遇到了这一点。他是一个优秀的 CSS 设计师，所以在说任何事情之前我想看看是否有一些我没有关注的东西？

在下面的代码片段中，他似乎错误地重新定义了一些属性——即，href 上的悬停和活动状态的文本装饰和颜色属性：

```
.myClass
{
    display: inline-block;
    padding: 0 15px 10px 15px;
}

a.linkWhatsThis:link, 
a.linkWhatsThis:visited, 
a.linkWhatsThis:hover, 
a.linkWhatsThis:active {
    font-size:11px;
    color: #42382c;
    text-decoration: underline;
    line-height:16px;
}

a.linkWhatsThis:hover, 
a.linkWhatsThis:active {
    color: #990000;
    text-decoration: none;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T16:04:57.177

它让他通过差异编码。

首先他定义了link、visited、hover 和active 的样式，它们大部分是相同的。

然后在下面，他在两个特定情况下超越了这一点。

通过这种方式，代码可以更短，并且也反映了这四个几乎相同的事实，就在代码中（自我文档）。

如果您强制执行不重复规则，它可能看起来像：

```
a.linkWhatsThis:link, 
a.linkWhatsThis:visited, 
a.linkWhatsThis:hover, 
a.linkWhatsThis:active {
    font-size:11px;
    line-height:16px;
}

a.linkWhatsThis:link, 
a.linkWhatsThis:visited {
    color: #42382c;
    text-decoration: underline;
}
a.linkWhatsThis:hover, 
a.linkWhatsThis:active {
    color: #990000;
    text-decoration: none;
} 
```

或者像：

```
a.linkWhatsThis:link, 
a.linkWhatsThis:visited {
    font-size:11px;
    line-height:16px;
    color: #42382c;
    text-decoration: underline;
}
a.linkWhatsThis:hover, 
a.linkWhatsThis:active {
    font-size:11px;
    line-height:16px;
    color: #990000;
    text-decoration: none;
} 
```

后者重复规则，前者不那么简洁，不那么自我记录；他的版本说“彼此完全一样，除了……”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T16:07:15.337

那只是因为他需要编写以下内容之一，您也这样做：

```
a.linkWhatsThis:link, 
a.linkWhatsThis:visited {
    font-size:11px;
    color: #42382c;
    text-decoration: underline;
    line-height:16px;
}

a.linkWhatsThis:hover, 
a.linkWhatsThis:active {
    color: #990000;
    text-decoration: none;
    font-size:11px;
    line-height:16px;
} 
```

或者

```
a.linkWhatsThis:link, 
a.linkWhatsThis:visited,
a.linkWhatsThis:hover, 
a.linkWhatsThis:active {
    font-size:11px;
    line-height:16px;
}

a.linkWhatsThis:link, 
a.linkWhatsThis:visited, {
    color: #42382c;
    text-decoration: underline;
}

a.linkWhatsThis:hover, 
a.linkWhatsThis:active {
    color: #990000;
    text-decoration: none;
} 
```

他认为他的方式更短、更漂亮和/或更易读。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-27T16:08:30.567

不要将其视为重复，只需将其视为替代。他只是在某些情况下覆盖了样式。他写它的方式标记略少，见下文，当不“复制”时它实际上更长

```
.myClass
{
    display: inline-block;
    padding: 0 15px 10px 15px;
}

a.linkWhatsThis:link, 
a.linkWhatsThis:visited, 
a.linkWhatsThis:hover, 
a.linkWhatsThis:active {
    font-size:11px;
    line-height:16px;
}

a.linkWhatsThis:link, 
a.linkWhatsThis:visited {
    color: #42382c;
    text-decoration: underline;
}

a.linkWhatsThis:hover, 
a.linkWhatsThis:active {
    color: #990000;
    text-decoration: none;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-27T16:04:32.147

你是对的，它是重复的。只是因为那个 CSS 的作者选择了这种方式来整理样式。颜色和行高是共享的，所以要么就是这样，要么制定更多单独的规则来涵盖每种情况。无论您采用哪种方式，都会有重复 - 无论是规则还是选择器。重要的是哪条规则最终胜出。

# android - android opengl深度测试失败

> ID：12145420
> 
> 赞同：2
> 
> 时间：2012-08-27T16:01:29.480
> 
> 标签：android, opengl-es, android-emulator

我在 Android 模拟器中遇到了问题，我用 gles 1 渲染了一个纹理立方体，并且在边框中显示了背面：

![问题图片](../Images/d82555398ecb135d00a8e7c171d460dc.png)

我的深度测试设置是：

```
public void onSurfaceCreated(GL10 gl, EGLConfig config) {
    gl.glClearColor(0.0f, 0.0f, 0.0f, 1.0f);  // Set color's clear-value to black
    gl.glClearDepthf(1.0f);            // Set depth's clear-value to farthest
    gl.glEnable(GL10.GL_DEPTH_TEST);   // Enables depth-buffer for hidden surface removal
    gl.glDepthFunc(GL10.GL_LEQUAL);    // The type of depth testing to do
    gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_NICEST);  // nice perspective view
    gl.glShadeModel(GL10.GL_SMOOTH);   // Enable smooth shading of color
    gl.glDisable(GL10.GL_DITHER);      // Disable dithering for better performance 
```

而我的观点：

```
public void onSurfaceChanged(GL10 gl, int width, int height) {
    if (height == 0) height = 1;   // To prevent divide by zero
    float aspect = (float)width / height;

    // Set the viewport (display area) to cover the entire window
    gl.glViewport(0, 0, width, height);

    // Setup perspective projection, with aspect ratio matches viewport
    gl.glMatrixMode(GL10.GL_PROJECTION); // Select projection matrix
    gl.glLoadIdentity();                 // Reset projection matrix
    // Use perspective projection         
    GLU.gluPerspective(gl, 45, aspect, 0.1f, 1000.f);

    gl.glMatrixMode(GL10.GL_MODELVIEW);  // Select model-view matrix
    gl.glLoadIdentity();                 // Reset

    // You OpenGL|ES display re-sizing code here
    // ......
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T16:38:12.530

看起来您的深度缓冲区可能没有足够的精度，所以面有些重叠。

如果可能的话，我建议减少你的深度范围，要么增加近平面（比如 1），要么减少远平面。平面越远，现有范围的精度就越低。

# linq - 我可以从 IQueryable 访问 NHibernate ISession 实例吗？

> ID：12145421
> 
> 赞同：0
> 
> 时间：2012-08-27T16:01:30.703
> 
> 标签：linq, nhibernate

我正在尝试将一些复杂的查询模式包装到扩展方法中，`IQueryable<Foo>`并且偶尔需要在其中进行一些外部连接。

```
static IQueryable<Foo> Filter(this IQueryable<Foo> foos, params string[] searchTerms)
{
    //...
    return from t in session.Query<Tags>()
           from f in foos
           where
               (t.Name.Contains (searchTerms[0] && f.Tags.Contains(t))
               || f.Name.Contains(searchTerms[0]
           select f;
} 
```

另一种情况还需要会话访问来执行一些保存操作（是的，是的，副作用很糟糕。它用于跟踪查询模式）。

在第一种情况下，我通过将标签集合作为参数传递来解决这个问题，虽然对于调用者来说有点难看，但工作正常，但显然不能扩展，这是我唯一的另一个选择对于一般情况而言，能够推测出这一点的方法是`ISession`直接传入。

我希望有一些可以从扩展方法调用的辅助方法，如下所示：

```
static ISession GetSession<T> (IQueryable<T> query)
{
    // do magic
} 
```

即使它涉及向下转换可查询，或查询提供程序或 Nh* 的东西，我想我更喜欢它而不是传递会话。但我还没有找到访问它的方法（会话属性`NhQueryProvider`受保护）。我是否错过了其他一些方法来摆脱这种表达？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-07T18:16:57.563

你必须使用反射：

```
IQueryable<Product> query = Session.Query<Product>();
ISession session = query.Provider.GetType().GetProperty("Session", BindingFlags.NonPublic | BindingFlags.Instance).GetValue(query.Provider, null) as ISession; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T19:58:41.980

我相信您可能会从使用[QueryObject 模式](http://coderkarl.wordpress.com/2012/05/02/the-query-object-pattern-2/)中受益——
您将定义一个方法，该方法接受一个`ISession`参数并在其上调用查询；
您可以使用查询对象的属性来定义不同的搜索词，而不是求助于字符串数组解决方案。

Ayende有一点[凉爽的味道](http://ayende.com/blog/2266/query-objects-vs-methods-on-the-repository)

# php - 更新表值

> ID：12145423
> 
> 赞同：0
> 
> 时间：2012-08-27T16:01:42.607
> 
> 标签：php, mysql

我有一张如下图所示的表格：

![此图片reports_to_id 基于ID](../Images/0415e4aaa33dbfb41ef99b04e30fba21.png)

我想根据这张表创建树。例如，最高级别的人是管理员，管理员可以查看所有员工详细信息，如果任何人只是管理员，他可以查看所有员工详细信息，但不能查看管理员详细信息。我想要这样的所有细节：

```
Admin

HZM

AZM

ZM

AM

sales and marketing 
```

我想创建这个类型层次结构，你能帮我创建这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:16:45.693

您可以在这里做的是使用“级别”。例子：

100 级 - 管理员 90 级 - HZM 80 级 - AZM 70 级 - ZM 60 级 - ZM 50 级 - AM 40 级 - 销售和营销

将来您可以在 HZM 和管理员之间添加级别。例如，您可以使用 95 级。

通过使用数字而不是名称，您将能够轻松比较允许哪些用户做什么。

# sql - 使用 PostgreSQL 在未来增加 1 到几个月

> ID：12145429
> 
> 赞同：3
> 
> 时间：2012-08-27T16:02:05.260
> 
> 标签：sql, postgresql, datetime

我有三列看起来像这样：

```
Column1       Date1         Date2
Test2         2012-06-10    
Test8         2012-05-05    2012-06-10 
```

给定这个数据集，我将首先描述我想要的输出。它看起来像这样：

```
Year    Month    Sum
2012    05       1
2012    06       2
2012    07       1 
```

如果 Column1 包含一个数字（可以通过以下方式找到：WHERE Column1 LIKE '%2%'），则应将此数字添加到 Date1 中的月份值中。第一行就是这种情况，即在 06 月和 07 月加 1。但是，对于第 2 行的情况，如果 Date2 中有日期，它应该只在 Date1 上加 1，并且每个月都加到和包括 Date2 中的月份。这就是为什么将 1 添加到 05 和 06 的原因。

我猜这个查询会使用 INTERVAL 函数，但我不确定我应该如何在未来的几个月中添加值。

### 更新：

@CraigRinger - 我会尝试再次解释。我想使用 Column1 中的数字来确定 Date1 中的日期将运行多少个月。对于第一行，它将从 2012-06 运行到 2012-07（因为 Column1 中有 2）。

Date2 可以看作是取消日期。因此，对于第二行，Date1 将持续 8 个月，但由于它被取消（由 Date2），它仅从 05 到 06 运行。

换句话说，查询应该将 1 添加到开始月份 (Date1) 和每个月，直到并包括结束（或 Date2，如果存在）。

我想在这些月份中的每个月份加 1，这样我就知道我所有行的月份总和。我猜这将涉及在 Date1 中添加一个日期间隔（等于 Column1 中的数字），从这两个数字之间的日期中提取月份并向它们添加一个。不幸的是，我不知道如何最好地实现这一点。

希望这次我解释得更好！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T16:24:27.807

在 postgres 中将月份添加到日期的语法是：

```
select <date> + cast('1 months' as interval) 
```

您的其余逻辑相当复杂，但您的问题似乎是关于将月份添加到日期。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T10:19:47.503

根据上面的数据样本，以下内容就足够了：

```
create table ddata(test text, d1 date, d2 date);
insert into ddata values ('Test2','2012-06-10'::date,null),('Test8','2012-05-05','2012-6-10') 
```

从字符串值中获取月数

```
SELECT substring(test,E'\\d+$') FROM ddata; 
```

获取填充第二个日期的月份的差异

```
SELECT ((extract(year FROM d2) - extract(year FROM d1)) *12) + extract(month FROM d2) - extract(month FROM d1)
  FROM ddata; 
```

使用 case 语句将其放在一起以决定使用哪个月份的计算，并使用 generate_series 生成要计算的中间日期列表：

```
SELECT extract(year FROM ccal.cdate),
       extract(month FROM ccal.cdate),
       count(*) AS test_count
FROM
(SELECT generate_series(mcal.d1, mcal.d1 + CAST((mcal.num_mths || ' months') AS INTERVAL), '1 month') AS cdate
  FROM
(SELECT d1,
       CASE (d2 IS NULL)
            WHEN TRUE THEN
                substring(test,E'\\d+$')::integer - 1
            ELSE 
                ((extract(year FROM d2) - extract(year FROM d1)) *12) + extract(month FROM d2) - extract(month FROM d1)
            END as num_mths
 from ddata) as mcal

 )AS ccal
GROUP BY 1,2
ORDER BY 1,2; 
```

# .net - wpf 文本框验证反馈的可访问性

> ID：12145430
> 
> 赞同：0
> 
> 时间：2012-08-27T16:02:08.703
> 
> 标签：.net, wpf, xaml, accessibility

我有一个文本框，用户将服务器名称放入其中，并在他键入时将其验证为 FQDN。我还有一种在验证失败时应用的样式，它使文本框的背景变为粉红色。但是，**我不希望在高对比度模式开启时发生这种情况，**而且我似乎真的找不到太多关于如何实现这一点的文献。

这是文本框/样式：

```
<TextBox ...>
    <TextBox.Style>
        <Style>
            <Style.Triggers>
                <DataTrigger Binding="{Binding ServerName.HasErrorsToShow}" Value="true">
                    <Setter Property="TextBox.Background" Value="Pink" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </TextBox.Style>
</TextBox> 
```

我怎样才能做到这一点？谢谢！

编辑1：

我尝试使用 MultiTrigger。这似乎很有希望，但我不能完全正确。这段代码有效（用于测试我是否可以根据高对比度做出决定）：

```
<Style.Triggers>
    <DataTrigger Binding="{Binding Source={x:Static SystemParameters.HighContrast}}" Value="True">
        <Setter Property="TextBox.Background" Value="Pink" />
    </DataTrigger>
</Style.Triggers> 
```

但是当我尝试添加 MultiTrigger 时，我得到了“设置属性 'System.Windows.FrameworkElement.Style' 引发异常”异常。内部异常是“'Property' 必须具有非空值”。这是代码：

```
<Style.Triggers>
    <MultiTrigger>
        <MultiTrigger.Conditions>
            <Condition Binding="{Binding ServerName.HasErrorsToShow}" Value="True" />
            <Condition Binding="{Binding Source={x:Static SystemParameters.HighContrast}}" Value="False" />
        </MultiTrigger.Conditions>
        <Setter Property="TextBox.Background" Value="Pink" />
    </MultiTrigger>
</Style.Triggers> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T16:16:28.557

我还没有测试过这段代码，但也许你可以使用 a`MultiTrigger`并绑定到对象的`HighContrast`属性`SystemParameters`。像这样的东西：

[已删除，见下文]

注意：我很确定`HighContrast`静态`SystemParameters`类的属性不是依赖属性，并且不会 raise `NotifyPropertyChanged`，所以如果用户在应用程序已经打开时更改设置，我不相信触发器会触发。

编辑：这种风格似乎适合我。

```
<Style x:Key="MyTextBoxStyle" TargetType="{x:Type TextBox}">
  <Setter Property="Tag" Value="{DynamicResource {x:Static SystemParameters.HighContrastKey}}"/>
  <Setter Property="Background" Value="Green"/>
  <Style.Triggers>
    <MultiDataTrigger>
        <MultiDataTrigger.Conditions>
            <Condition Binding="{Binding ServerName.HasErrorsToShow}" Value="true"/>
            <Condition  Binding="{Binding RelativeSource={RelativeSource Self}, Path=Tag}" Value="True"/>
        </MultiDataTrigger.Conditions>
        <Setter Property="Background" Value="Red"/>
    </MultiDataTrigger>
  </Style.Triggers>
</Style> 
```

# c# - 无法让事务正常运行

> ID：12145431
> 
> 赞同：-1
> 
> 时间：2012-08-27T16:02:11.903
> 
> 标签：c#, sql

我正在用 C# 编写代码来调用两个单独的存储过程。第一个过程并不总是被调用，但是当它调用时，它需要在第二个过程开始之前完成它的任务。正在发生的事情是两者似乎并排运行。第一个任务应该更新在第二个任务中用作标识符的数字。但是，如果第二个任务没有找到标识符，它将添加一条记录或对其执行更新。由于我不断发现更新的适当记录和插入的新记录，我想知道是 A：我写错了还是 B：是否可以在事务中按顺序调用和完成存储过程？

```
try
{
    cm = Dts.Connections["serverName"];
    sqlConn = (SqlConnection)cm.AcquireConnection(Dts.Transaction);
    sqlTrans = sqlConn.BeginTransaction("QueueUpdates");

    if (dummyIndicator.Equals("Y"))
    {
        string temp = retrievedMessage.Substring(203, 17);
        int oldNumber = (int)(long.Parse(temp) / 777);

        SqlParameter newNum = new SqlParameter("@newNum", num.Value);
        SqlParameter oldNum = new SqlParameter("@oldNum", oldNumber);

        sqlComm2 = new SqlCommand("DB.dbo.sp_UpdateNum", sqlConn, sqlTrans);
        sqlComm2.CommandType = CommandType.StoredProcedure;
        sqlComm2.Parameters.Add(newNum);
        sqlComm2.Parameters.Add(oldNum);
        sqlComm2.Transaction = sqlTrans;
        sqlComm2.ExecuteNonQuery();
    }

    //Update records according to queue messages
    sqlComm = new SqlCommand("DB.dbo.sp_NumCheck", sqlConn, sqlTrans);
    sqlComm.CommandType = CommandType.StoredProcedure;
    sqlComm.Parameters.Add(num);
    sqlComm.Parameters.Add(addOrUpdate);
    sqlComm.Parameters.Add(companyCode);
    sqlComm.Parameters.Add(agentID);
    sqlComm.Parameters.Add(firstName);
    sqlComm.Parameters.Add(lastName);
    sqlComm.Parameters.Add(suffix);
    sqlComm.Parameters.Add(taxIdType);
    sqlComm.Parameters.Add(entityType);
    sqlComm.Parameters.Add(corporateName);
    sqlComm.Parameters.Add(outNewNumber);
    sqlComm.Parameters.Add(outCurrentNumber);
    sqlComm.Parameters.Add(outOperator);
    sqlComm.Parameters.Add(outDate);
    sqlComm.Parameters.Add(returnVal);
    sqlComm.ExecuteNonQuery();

    sqlTrans.Commit();

    if (addOrUpd.Equals("ADD")){recordsAdded++;}
    else{recordsUpdated++;}

}
catch (Exception ex)
{
    _sqlDataErrors++;
    swLog.WriteLine("Message not updated: " + retrievedMessage);
    swLog.WriteLine("Error: " + ex.ToString());
    sqlTrans.Rollback();
}
finally
{                                
    cm.ReleaseConnection(sqlConn);
} 
```

以下是存储过程中的一些代码：

sp_UpdateNum - 调用时，需要先完成

```
ALTER PROCEDURE [dbo].[sp_UpdateNum]
        (
        @newNum char(9),
        @oldNum char(9)
        )

AS

UPDATE AgentIdentification
SET AgentId = @newNum
WHERE AgentId = @oldNum 
```

sp_NumCheck - 这个有很多代码，但这里是最相关的部分：这些是在这个存储过程中执行的第一行。它对 AgentId 进行检查。如果找到特定 ID 的实例，则它将执行更新。如果没有，它将执行插入。当两者同时被调用时发生的情况是更新了 ID 号，然后插入了一条新记录。我已经检查以确保所有变量值也是正确的。

```
SELECT @rows = COUNT(AgentId) 
FROM AgentIdentification
WHERE AgentId = @num

IF @rows > 0 
```

编辑

这最终成为第二个存储过程中的逻辑问题。上面列出的通过 C# 代码创建两个 SQL 事务的方法已正确完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:57:10.103

我认为您不需要以这种方式进行交易，您可以使用`TransactionScope`并且更易于使用和 Disposable 也可以。

基本上就是这个[链接](http://msdn.microsoft.com/es-es/library/system.transactions.transactionscope(v=vs.80).aspx)所指的

# java - 获取 DocumentListener 的间接来源

> ID：12145433
> 
> 赞同：1
> 
> 时间：2012-08-27T16:02:19.567
> 
> 标签：java, swing, jtextarea, documentlistener

我有一个文档侦听器，它是间接来源，JTextArea（JTextArea.getDocument().addDocumentListener 等）。

我需要我的听众能够访问 JTextArea，但无需引用。类似于 event.getSource() 来自动作和关键侦听器的东西...我知道侦听器的来源是文档，而不是 JTextArea 本身，但我需要了解它。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T16:13:32.967

Document 是文本组件的模型，而 Swing 是为单个模型构建的，以便能够被多个视图使用。因此，据我所知，您的问题的答案是否定的，这不能直接完成，因为许多文本组件可以使用相同的 Document。

你说：

> 它应该删除所有多余的文本（复制/粘贴也必须考虑在内）并且应该弹出一个对话框，通知用户限制。我仍然不确定如何实现这一点（考虑到复制/粘贴，没有它可以很容易地完成），所以如果你有想法拍摄，但无论如何我都需要解决这个论点问题......

我想知道您是否需要对 JTextArea 的输入进行如此多的控制，也许您不应该使用 JTextArea。相反，也许您应该使用 JList 并完全控制如何从该组件中添加和删除行。

# python - 如何在 python jinja 模板中输出 loop.counter？

> ID：12145434
> 
> 赞同：231
> 
> 时间：2012-08-27T16:02:20.463
> 
> 标签：python, jinja2, templating-engine

我希望能够将当前循环迭代输出到我的模板。

根据[文档](https://jinja.palletsprojects.com/en/3.0.x/templates/)`loop.counter`，我正在尝试使用一个变量：

```
<ul>
{% for user in userlist %}
  <li>
      {{ user }} {{loop.counter}}
  </li>
      {% if loop.counter == 1 %}
          This is the First user
      {% endif %}
{% endfor %}
</ul> 
```

但是正在输出到我的模板。什么是正确的语法？

* * *

## 回答 #1

> 赞同：487
> 
> 时间：2012-08-27T18:08:59.213

循环内的计数器变量`loop.index`在 Jinja2 中被调用。

```
>>> from jinja2 import Template

>>> s = "{% for element in elements %}{{loop.index}} {% endfor %}"
>>> Template(s).render(elements=["a", "b", "c", "d"])
1 2 3 4 
```

除此之外`loop.index`，还有

*   `loop.index0`（索引从 开始`0`）
*   `loop.revindex`（反向索引；结束于`1`）
*   `loop.revindex0`（反向索引；结束于`0`）
*   更多信息请访问[http://jinja.pocoo.org/docs/templates/](http://jinja.pocoo.org/docs/templates/)。

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2014-07-25T15:24:05.613

在`for`-loop 块内部，您可以访问一些特殊变量，例如`loop.index`(but not `loop.counter`)。来自[官方文档](https://jinja.palletsprojects.com/en/3.0.x/templates/#for)：

| 多变的 | 描述 |
| --- | --- |
| `loop.index` | 循环的当前迭代。（1 个索引） |
| `loop.index0` | 循环的当前迭代。（0 索引） |
| `loop.revindex` | 从循环结束的迭代次数（1索引） |
| `loop.revindex0` | 从循环结束的迭代次数（0索引） |
| `loop.first` | 如果是第一次迭代，则为真。 |
| `loop.last` | 如果最后一次迭代则为真。 |
| `loop.length` | 序列中的项目数。 |
| `loop.cycle` | 在序列列表之间循环的辅助函数。 |
| `loop.depth` | 指示当前渲染在递归循环中的深度。从 1 级开始 |
| `loop.depth0` | 指示当前渲染在递归循环中的深度。从 0 级开始 |
| `loop.previtem` | 循环上一次迭代中的项目。在第一次迭代期间未定义。 |
| `loop.nextitem` | 来自循环的以下迭代的项目。在最后一次迭代期间未定义。 |
| `loop.changed(*val)` | 如果以前使用不同的值调用（或根本没有调用），则为真。 |

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2019-01-10T02:52:37.217

如果您使用的是 Django，请使用`forloop.counter`代替`loop.counter`：

```
<ul>
{% for user in userlist %}
  <li>
      {{ user }} {{forloop.counter}}
  </li>
      {% if forloop.counter == 1 %}
          This is the First user
      {% endif %}
{% endfor %}
</ul> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-06T15:48:36.397

现实生活中的例子：

```
{% for image in item['images'] %}
    {% set image_id = item_id ~ '-preview-' ~ loop.index0 %}
    <div id="{{ image_id }}" class="overlay">
        <a class="cancel" href="#{{ item_id }}"></a>
        <div class="popup">
            {% set src = image if image.startswith('http') else '/static/images/store/' ~ item_id ~ '/' ~ image %}
            <a href="{{ src }}"><img class="modal-img" src="{{ src }}"/></a>
        </div>
    </div>
{% endfor %} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-11-13T17:32:25.770

在您的 Python 代码中：

```
env = Environment(loader=FileSystemLoader("templates"))
env.globals["enumerate"] = enumerate 
```

在您的模板中：

```
{% for idx, val in enumerate(list) %}
    {{ idx }}. {{val}}
{% endfor %} 
```

# javascript - jQuery 五星级显示率

> ID：12145435
> 
> 赞同：-1
> 
> 时间：2012-08-27T16:02:21.813
> 
> 标签：javascript, jquery, css

我正在做一个项目来显示某个字段的费率，我已经从服务器上获得了这个字段的费率，比如`"60%"`或`"50%"`等等......

我不知道是否有任何 jQuery 插件可以帮助仅显示速率而无需单击功能，

就像是

```
var rate = "60%";
jQuery.setRate(rate); // or something like this 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:17:04.813

我个人认为你不需要一个插件来做到这一点，你可以根据你从 db 获得的速率显示不同的图像。

首先，删除非数字字符，只是为了获取整数（数字）值。之后，您只需为不同的起始图像创建规则（？）

```
var sImageUrl="";

if (rate >0 && rate =<10) sImageUrl="/[yourUrl]/imageStars_1.jpg";
if (rate >10 && rate =<20) sImageUrl="/[yourUrl]/imageStars_2.jpg";
... 
```

好吧，如果您考虑不添加插件，如果您只想显示结果，也许您甚至可以不在客户端站点上执行此操作并在服务器端“处理”此图像选择（作为其他选项）...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:21:22.623

如果你需要一些可以点击的东西，那么 raty 插件真的很棒，即使没有格式良好的数据也能很好地工作（这意味着它需要 4.7 并将其四舍五入到 5 星等）：[raty](https://github.com/wbotelhos/raty)。

# c# - 导航到 WPF 屏幕时系统挂起

> ID：12145436
> 
> 赞同：0
> 
> 时间：2012-08-27T16:02:22.320
> 
> 标签：c#, .net, wpf, winforms

我们基于表单的应用程序有一组屏幕。可以通过单击下图中突出显示的选项卡来导航屏幕。其中一个屏幕 ARAMS 屏幕（活动屏幕）是 WPF 屏幕。其他是正常形式。如果用户频繁单击不同的选项卡，然后单击 WPF 屏幕选项卡，则整个系统将挂起。问题发生后，用户必须重新启动机器。由于整个系统被挂起，我们无法调试问题。我们在调试时没有遇到问题。

应该采取什么方法来调试问题？

我们在 Win 7 机器中遇到问题

![在此处输入图像描述](../Images/3a3b0a72b2e2d64ec0425f5ca84a603a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T22:42:39.903

## 挂起后附加到进程并进行实时调试。

只需在进入挂起状态后使用调试器（Visual Studio 调试器或 WinDBG）“附加到进程”......然后你就可以“闯入”你的进程。

然后查看所有线程的堆栈，看看它们在做什么……你可能会发现某个特定线程正在做的事情导致死锁。

如果您使用带有 SOSEX 插件的 WinDBG，您甚至可以使用 !dlk 命令……它有时可以自动发现任何死锁。

您可以使用许多其他调试器命令来检查正在发生的事情，例如查看垃圾收集器、终结队列（例如，可能阻塞了终结器线程）等。

*   [http://dotnetdebug.ne​​t/2005/06/22/blocked-finalizer-thread/](http://dotnetdebug.net/2005/06/22/blocked-finalizer-thread/)

## 更改进程优先级和/或处理器关联性

现在我知道你说**整个系统挂起**，所以这可能很棘手/不可能......你可以尝试的一件事是降低进程的进程优先级和/或在它挂起之前设置处理器亲和力状态...这应该让您有更好的机会在同一台机器上加载调试器，因为理论上您可以阻止进程过多地垄断 CPU。

转到任务管理器右键单击该进程并执行**Set Priority Low**或**Set Affinity**。

现在可能的情况是，更改优先级实际上会产生副作用，因为您的应用程序不再挂起或行为不同......但如果发生这种情况，至少这已经为您提供了有关问题的线索。

如果它仍然挂起（但没有那么多）并且您能够运行您的调试器......那么嘿，您现在可以附加到您的进程并中断它。

## 使用 WinDBG 进行内核调试

如果上述方法不起作用，那么是时候在崩溃的机器上安装 WinDBG，设置 Windows 以启动内核调试模式，然后从另一台机器（通过 USB、Firewire 等连接）使用 WinDBG 客户端与您的挂机后端调试引擎，这将让您闯入系统并分析机器状态。

## 创建故障转储 (.dmp) 和事后分析

另一种技术是通过崩溃转储捕获进程状态（您可以通过在任务管理器中右键单击进程名称并说创建转储来创建它，或者使用其他工具为您执行此操作。）。然后，您可以将 .dmp 文件加载到 Visual Studio（使用 File Open）或 WinDBG（使用 Open Crash Dump）中。然后，您可以查看该过程的某些状态。

这可以通过各种工具（例如 ADPlus）自动完成，以便在您的应用程序无响应时自动为您完成故障转储....如果您幸运的话，即使您的系统处于挂起系统中，它也可以以自动方式工作....或者它可能不会。

请注意，如果可能，最好进行实时调试而不是故障转储，因为您可以访问更多信息/状态。

## 托管调试助手

可以使用 CLR 运行时运行 .NET 应用程序，执行额外检查以验证您是否以正确的方式执行操作。这些检查称为托管调试助手。当 MDA 发现问题时，它会在您的程序中引发异常。

它们可以通过使用“myapplication.mda.config”中的一些配置开关或通过“调试”菜单中的“异常”对话框来打开（树中有一个专门用于它们的分支）。需要注意的是，不要只打开所有这些，因为其中一些非常具有攻击性，可能会导致红鲱鱼……您需要真正阅读每个 MDA 并了解检查正在做什么。

*   [http://msdn.microsoft.com/en-us/library/d21c150d.aspx](http://msdn.microsoft.com/en-us/library/d21c150d.aspx)

*   [http://blogs.msdn.com/b/thottams/archive/2006/10/20/managed-debugging-assistants-mda-s.aspx](http://blogs.msdn.com/b/thottams/archive/2006/10/20/managed-debugging-assistants-mda-s.aspx)

*   [http://msdn.microsoft.com/en-us/magazine/cc163606.aspx](http://msdn.microsoft.com/en-us/magazine/cc163606.aspx)

# javascript - Date.js 错误地解析 ISO 8601 UTC 日期

> ID：12145437
> 
> 赞同：6
> 
> 时间：2012-08-27T16:02:23.793
> 
> 标签：javascript, datejs

使用 javascript 库 Date.js 我发现当我将一个 ISO 8601 格式的 UTC 0 日期传递给 Date.parse() 函数时，我得到一个代表同一日期但添加了本地时区的对象。

例如，

> 给定日期：2012-08-27T14:57:00Z（采用 ISO 8601 格式），显示时间为 14:57 UTC，为什么将其解析为 14:57 GMT-400 而不是 10:57 GMT -400？

我[创建了一个小提琴](http://jsfiddle.net/uvs36/3/)来展示它。

如果确实有错误，或者我对解析结果的理解不正确，请告诉我。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T16:23:08.370

是的，这是一个错误——甚至[是一个报告](http://code.google.com/p/datejs/issues/detail?id=59&q=parse)的错误。

我可以推荐使用[Moment.js](http://momentjs.com/)库吗？例如，[这个](http://jsfiddle.net/uvs36/5/)：

`console.log(moment('2012-08-27T14:57:00Z').toString());`

... 将正确识别给定的 UTC 时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T16:11:49.757

这似乎是 Date.js 的错误。使用`new Date('2012-08-27T14:57:00Z')`返回正确的日期。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-04T23:21:58.440

它是由 DateJS 的非常棒的语法分析器的错误实现引起的。

基本上旧版本只是检查它是否可以使用内置解析器，新版本尝试使用语法解析但忘记首先尝试原始步骤并且语法解析器无法使用时区（这是一个错误，但是不同的）。

用这个替换 parse 函数：

```
$D.parse = function (s) {
    var date, time, r = null;
    if (!s) {
        return null;
    }
    if (s instanceof Date) {
        return s;
    }

    date = new Date(Date._parse(s));
    time = date.getTime();
    // The following will be FALSE if time is NaN which happens if date is an Invalid Date 
    // (yes, invalid dates are still date objects. Go figure.)
    if (time === time) {
        return date;
    } else {
        // try our grammar parser
        try {
            r = $D.Grammar.start.call({}, s.replace(/^\s*(\S*(\s+\S+)*)\s*$/, "$1"));
        } catch (e) {
            return null;
        }
        return ((r[1].length === 0) ? r[0] : null);
    }
}; 
```

此处提供了核心代码的更新版本（并将在未来修复未解决的错误）：

[https://github.com/abritinthebay/datejs/](https://github.com/abritinthebay/datejs/)

# php - 涉及 $_GET、$_POST 和重定向的任务 (header())

> ID：12145441
> 
> 赞同：-1
> 
> 时间：2012-08-27T16:02:35.213
> 
> 标签：php, redirect, header, get

这就是我所处的情况：

我目前有 3 页：

*   **people.php**，这是一个页面，用户可以在该页面中选择他们想要关注的用户，当他们点击他们正在关注的用户时。每个人都链接到follow.php，但变量username 在链接中发布为不同的值，具体取决于按下的值。即如果选择了anderson cooper，则触发的链接是follow.php?username=andersoncooper；

*   **follow.php**，这是一个页面，当用户选择他们想要关注的人时触发，这个页面会通过并关注该人。此页面仅在用户登录时才有效。该页面获取变量用户名 ( `$username = $_GET['username']`)，值取决于选择的链接。接下来这个用户名变量被放入跟随用户的函数中。

*   **Login.php**，这是一个允许用户登录 twitter 并授权应用程序的页面。我在 follow.php 的顶部放置了代码，说明如果用户未登录，请在此处发送。当 login.php 完成并且用户完成后，他们将被发送回 follow.php。唯一的问题是不再定义变量用户名。如果用户未登录，我尝试在重定向到登录页面之前设置变量（`$username = $_GET['username']`），但这不起作用。对于重定向，我使用这个：

```
if(empty($_SESSION['oauth_token'])){
    //not signed in
    die(header( 'Location: twitter_login.php' )) ;
} 
```

我也尝试在没有模具的情况下使用此脚本，但它仍然无法正常工作。其余`follow.php`代码遵循此检查。我希望我能很好地解释我的问题。如果用户已经登录，则该脚本可以完美运行，因为 login.php 永远不会被调用并且您永远不会离开 follow.php。但是当你离开页面时，你不能 GET['username']。有谁知道解决这个问题的方法是什么？谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:04:20.947

您需要将查询字符串附加到您的位置标头，例如。

```
die(header("Location: mypage.php?username=".$_GET['username'])); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:25:15.277

存储用户名`_SESSION`并以这种方式引用它。

# javascript - 从异步回调中获取值

> ID：12145444
> 
> 赞同：0
> 
> 时间：2012-08-27T16:02:38.123
> 
> 标签：javascript

您好，我正在尝试获取每个循环的位置。Yahoo placemaker 用于从数组的文本变量中获取位置。在每个循环中，我将位置发送到外部函数，但我没有得到值。有谁知道做错了什么？谢谢！

```
 function replace_undefined(array, text_array) {
        console.log(text_array);
        for (i = 0, l = text_array.length; i < l; i++) {
            var text = array[i].text;
            Placemaker.getPlaces(text, function (o) {
                console.log(o);
                if ($.isArray(o.match)) {
                    if (o.match[0].place.name == "Europe" || o.match[0].place.name == "United States") {
                        var location = o.match[1].place.name;
                        getLocation(location);
                    }
                    if ($.isArray(o.match)) {
                        if (o.match[0].place.name !== "Europe") {
                            var location = o.match[0].place.name;
                            getLocation(location);
                        }
                    }
                }
                if (!$.isArray(o.match) && o.error == "no locations found") {
                    var location = "";
                    getLocation(location);

                }
                if (!$.isArray(o.match) && o.error !== "no locations found") {
                    var location = o.match.place.name;
                    getLocation(location);
                }
            });
        }

        function getLocation(n) {
            return function () {
                console.log('Location: ' + n);
            };
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:24:47.693

您的问题并没有确切说明问题出在哪里；我假设它在对`getLocation`.

我立即注意到的一件事是`getLocation`返回一个函数，所以简单地做`getLocation(location);`除了返回该函数之外不会做任何事情。您需要执行`(getLocation(location))();`实际调用由`getLocation()`.

您是否有理由从 中返回一个函数`getLocation`？

# ios - 在 iOS 中分析图像并找到点

> ID：12145450
> 
> 赞同：4
> 
> 时间：2012-08-27T16:03:08.113
> 
> 标签：ios, image-processing

我正在寻找一种解决方案来识别 iOS 中图像中的点。这个想法是使用 UIImagePicker 选择图像。然后，分析图像中特定大小范围的点，并将找到的点数作为输出。

我听说过openCV。有没有人有这个工作的例子。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:06:55.233

我最近遇到了[这个](http://www.eosgarden.com/en/opensource/opencv-ios/overview/)链接，它是适用于 iOS 的 OpenCV，您可以以此为起点。还可以查看这篇[文章](https://stackoverflow.com/questions/10404062/opencv-dot-target-detection-not-finding-all-targets-and-found-circles-are-offse)以进行斑点检测。

# php - 在php中用不同字符分隔的电子邮件爆炸列表

> ID：12145453
> 
> 赞同：0
> 
> 时间：2012-08-27T16:03:10.500
> 
> 标签：php, regex, explode

我有一个表格，我可以在其中获取由随机字符分隔的电子邮件列表：（有些会使用逗号，有些会使用分号甚至 *）。像这样的东西：

```
email1@example.com;email2@example.com,email3@example.com*email4@example.com 
```

有没有办法用正则表达式爆炸字符串？

在大多数情况下，用户将键入相同的分隔符，但我不想强迫人们使用独占的分隔符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T16:08:16.763

这样的事情应该让你开始：

```
<?php
$test = preg_split ('/(;|,|\*)/', 'email1@example.com;email2@example.com,email3@example.com*email4@example.com');

var_dump($test); 
```

[文档](http://php.net/manual/en/function.preg-split.php)和[演示](http://codepad.viper-7.com/edSF8d)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T16:20:01.267

您可以使用[preg_split](http://uk.php.net/preg_split)函数。

这是一个简单的示例和输出：

```
<?php
    $str = "email1@example.com;email2@example.com,email3@example.com*email4@example.com";
    $finalString=preg_split("/[*,;]/",$str);
    var_dump($finalString);
?> 
```

输出：

```
array
  0 => string 'email1@example.com' (length=18)
  1 => string 'email2@example.com' (length=18)
  2 => string 'email3@example.com' (length=18)
  3 => string 'email4@example.com' (length=18) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T05:21:21.957

对于完整的解决方案，您可以使用[preg_match_all()](http://uk.php.net/preg_match_all)

```
$emails = preg_match_all(
    "/[a-z0-9]+([_\\.-][a-z0-9]+)*@([a-z0-9]+([\.-][a-z0-9]+)*)+\\.[a-z]{2,}/i",
    $emails,
    $matches
); 
```

`$matches[0]`array 将包含您的所有电子邮件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T16:10:50.567

看看它**[在行动](http://regexr.com?31vb8)**：

```
(?<mail>[\w%+.-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,6}) 
```

# c# - 在 sqlclient 命令文本中使用字符串数组

> ID：12145460
> 
> 赞同：1
> 
> 时间：2012-08-27T16:03:23.560
> 
> 标签：c#, sqlcommand, sqlclient

这是我到目前为止的代码。`comm`是一个字符串数组，`ds`是一个数据集类型变量。

```
comm = new string[flist.Count()];

SqlDataAdapter adapter = new SqlDataAdapter();

for (int i = 0; i <= flist.Count() - 1; i++)
{
    comm[i] = "select tblcustodians.name as Custodian,count(*) as Nondupe, dupstatus from tbldoc join tblcustodians on tbldoc.custodianid = tblcustodians.id where path like '" + flist[i] + "%' group by tblcustodians.name, dupstatus order by custodian ASC";

    mycomm.CommandText = comm[i];

    adapter.SelectCommand = mycomm;

    adapter.Fill(ds);
} 
```

我正在尝试构建一个循环，因此`CommandText`它将随着循环而变化，最终数据集将填充每个 comm 数组生成的数据表，但这段代码只给了我一个带有 1 个数据表的数据集，由`comm[0]`.

谁能帮我解决这个问题，并告诉我出了什么问题？谢谢

# c - tolow() 不工作

> ID：12145463
> 
> 赞同：2
> 
> 时间：2012-08-27T16:03:25.987
> 
> 标签：c, tolower

下面的代码片段用于将字符串转换为小写。

```
int main()
{
    unsigned char s[] = "AbS.d_";

    tolower(s);
    printf("%s\n", s);

    return 0;
} 
```

我得到的[输出](http://ideone.com/ezOMA)为：

```
AbS.d_ 
```

为什么字符串没有被转换？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T16:04:35.737

`tolower`将字符类型作为参数，但您使用字符串。您需要遍历数组，并调用`tolower`每个字符。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-27T16:07:55.407

`tolower`接受 int 并返回降低的 int。

这应该有效：

```
int i=0;
for(i=0; s[i]; i++)
{
    s[i]=tolower(s[i]);
} 
```

# java - java URL剪切html代码

> ID：12145468
> 
> 赞同：0
> 
> 时间：2012-08-27T16:03:44.823
> 
> 标签：java, url

我从 Oracle 教程中执行此代码，

```
import java.net.*;
import java.io.*;

public class URLReader {
    public static void main(String[] args) throws Exception {

        URL oracle = new URL("http://www.oracle.com/");
        BufferedReader in = new BufferedReader(
                new InputStreamReader(oracle.openStream()));

        String inputLine;
        while ((inputLine = in.readLine()) != null)
            System.out.println(inputLine);
        in.close();

    }
} 
```

但程序没有显示完整的 html 代码（响应）。好像挂了 有什么问题。我没有代理。

# coldfusion - ListDeleteValue - 删除列表的一部分

> ID：12145472
> 
> 赞同：8
> 
> 时间：2012-08-27T16:03:57.797
> 
> 标签：coldfusion, coldfusion-8

试图从给定列表中删除用户 ID。似乎无法破解它... ListDeleteValue 的删除错误 - 我缺少的东西。在 CF8 上。

```
 <cfset curlist = "#userssigned#"> - say userx:usery:userz
 <cfset ud = "#session.user_id#"> - say userz

 <cfoutput>
 #curlist#
 <br>
 <br>
 #ud#
 <br>

 <cfset newlist = ListDeleteValue( curlist, "#ud#", ":") />

 #newlist# - should delete userz? end up as userx:usery
 </cfoutput> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-27T16:17:37.913

您需要使用并且还需要使用 以下代码`ListDeleteAt()`在列表中查找项目的位置`ListFind()`

`"##"`注意：当您将一个变量设置为另一个变量时，您不需要使用

```
<cfset userssigned = 'userx:usery:userz' />
<cfset session.user_id = 'userz' />

<cfset curlist = userssigned />
<cfset ud = session.user_id />

<cfoutput>
 #curlist#<br><br>
 #ud#<br>
 <cfset newlist = ListDeleteAt( curlist, ListFind(userssigned,ud,":"), ":") />
 #newlist# - should delete userz? end up as userx:usery
</cfoutput> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-28T17:31:23.247

我刚遇到这个，我认为如果 listFind() 没有产生结果，提供的解决方案可能会出错。你可以考虑以下

```
<cfset listPos = ListFind(userssigned,ud,":")>
<cfif listPos>
    <cfset newlist = ListDeleteAt( curlist, listPos , ":") />
</cfif> 
```

# django - 创建具有动态外键条目数的灵活 django 数据模型

> ID：12145475
> 
> 赞同：1
> 
> 时间：2012-08-27T16:04:07.937
> 
> 标签：django, django-models

我在编写 django 数据模型时遇到了麻烦，该模型可以将多个相同类型的对象链接回单个数据条目。这是我目前的模型：

```
class House(models.Model):
    name = models.CharField(max_length=200, unique=True)
    color = models.CharField(max_length=200, unique=True) 

class Config(models.Model)
   name = models.CharField(max_length=200)
   nbr_houses = models.PositiveIntegerField()
   houses = models.ManyToManyField(House) # this does not work, since I can only map a house once back to Config. 
```

我想做以下（伪代码）：

```
# define a new config and enforce that is should have houses.
$ a = Config(name = 'new_config', nbr_houses = 3)
# associate individual houses with this config
$ a.houses[0] = House(pk= 1)
# associate the same house a second time with this config
$ a.houses[1] = House(pk= 1)
# associate a third house to config.
$ a.houses[2] = House(pk= 2) 
```

我创建了一个新`Config`对象`new_config`并说这个配置应该有 3 个房子。然后我的模型应该自动检查并强制我将正确数量的房屋链接回`Config`. 此外，a`House`可能会两次引用相同的配置。

`Config`我正在考虑用以下方式编写

```
class Config(models.Model)
   name = models.CharField(max_length=200)
   nbr_houses = models.PositiveIntegerField()
   houses = models.ManyToManyField(House, related_name='house0')
   houses1 = models.ManyToManyField(House, related_name='house1')
   houses2 = models.ManyToManyField(House, related_name='house2')
   houses3 = models.ManyToManyField(House, related_name='house3') 
```

基本上反映可能的最大关联数量，但这有点不灵活。有什么更好的方法来实现这一点？

**编辑：**想象一下以下用例：您想编写一个可以定义场景复杂性的电脑游戏。每个场景都保存在一个`Config`. 每个场景，我可以放置`x`很多房子。房屋没有区别，它们只是模板。所以一个场景可以由 10 个红房子、2 个蓝房子和 1 个黄房子组成。因此，对于每个`Config`条目，我希望能够关联不同数量的房屋（对象）。也许以后还会有马：）我希望你明白。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T16:22:46.730

该问题已更新以解释您可能希望将每个房屋的*某些数量*与配置相关联。为了在 Django 中执行此操作，您需要一个新模型，Django 调用一个[*中间模型*](https://docs.djangoproject.com/en/1.4/topics/db/models/#intermediary-manytomany)。像这样：

```
class ConfigHouses(model.Model):
    config = model.ForeignKey('Config')
    house = model.ForeignKey('House')
    count = model.PositiveIntegerField()
    class Meta:
        unique_together = ('config', 'house') 
```

然后在`Config`类中声明 a`ManyToManyField`并将中间模型分配给`through`参数：

```
class Config(model.Model):
    # ...
    houses = model.ManyToManyField('House', through = 'ConfigHouses') 
```

要将房屋添加到配置中，您需要创建中间模型的新实例：

```
# Level 1 contains 4 red houses and 5 yellow houses
c = Config.objects.get_or_create(name = 'level-1')

red = House.objects.get_or_create(name = 'red')
ch = ConfigHouses(config = c, house = red, count = 4)
ch.save()

yellow = House.objects.get_or_create(name = 'yellow')
ch = ConfigHouses(config = c, house = yellow, count = 5)
ch.save() 
```

执行上述查询后，数据库将如下所示：

```
CONFIG TABLE
----------------
| pk | name    |
|----|---------|
|  1 | level-1 |
----------------

HOUSE TABLE
----------------
| pk | name    |
|----|---------|
|  1 | red     |
|  2 | yellow  |
----------------

CONFIGHOUSES TABLE
-------------------------------
| pk | config | house | count |
|----|--------|-------|-------|
|  1 |      1 |     1 |     4 |
|  2 |      1 |     2 |     5 |
------------------------------- 
```

要找出特定配置中有多少特定类型的房屋，您可以直接或通过任一模型查询中间表：

```
>>> ConfigHouses.objects.get(config = c, house__name = 'red').count
4
>>> c.confighouses.get(house__name = 'red').count
4
>>> yellow.confighouses_set.get(config = c).count
5 
```

* * *

### 原始答案

（最初的问题并没有明确说明多对多关系需要多重性，但我将保留原始答案以防万一。）

您最初的想法（`houses`应该是 a `ManyToManyField`）是正确的想法。只是为了`House`在定义之前引用类，需要传递类的*名称*。请参阅[Django 文档](https://docs.djangoproject.com/en/1.4/ref/models/fields/#django.db.models.ForeignKey)：

> 如果您需要在尚未定义的模型上创建关系，您可以使用模型的名称，而不是模型对象本身。

拥有一个`nbr_houses`字段也是一个坏主意，因为如果有人更新多对多关系而不记得更新该`nbr_houses`字段，它可能会变得不正确。您可以使用`houses.count()`获取相关房屋的数量。

所以你的`Config`班级应该是这样的：

```
class Config(models.Model)
   name = models.CharField(max_length=200)
   # The class House is not yet defined, so refer to it by name.
   houses = models.ManyToManyField('House') 
```

[您可以使用RelatedManager 接口](https://docs.djangoproject.com/en/1.4/ref/models/relations/#django.db.models.fields.related.RelatedManager.remove)更新多对多关系：有方法`add`、`create`、`remove`、`clear`，或者您可以只分配给它：

```
config.houses = House.objects.filter(color = 'red') 
```

# bash - dpkg-divert 中是否有任何选项可以向现有文件添加行而不是完全替换它？

> ID：12145488
> 
> 赞同：0
> 
> 时间：2012-08-27T16:05:06.577
> 
> 标签：bash, shell, dpkg

我正在创建一个 debian，它将替换另一个包中的文件。我读到 dpkg-divert 是处理这种情况的正确方法，但是我看到的唯一选项是 --add ，它用我的替换现有文件。我只想在现有文件的末尾添加几行（我不知道里面有什么，我不想更改它）。我必须在预先安装时手动完成吗？有直接的解决方案吗？我的方法是错误的吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-30T18:32:22.477

嗯，反正这个跟[shell](/questions/tagged/shell "显示标记为“外壳”的问题")没关系。

如果它是一个配置文件（例如，`/etc`您确实**不能**更改它）。`ucf`从模板（in ）创建它`/usr/share/packagename/`是去那里的方法。

否则`dpkg-divert`，不幸的是，也不是这样做的方法。但是你可以像这样`postinst`使用`trigger`：

*   in `postinst`，将原始文件转移出去，`prerm`当然要删除 in
*   in `postinst`，在写入原始文件时触发，将其与您的修改连接起来

# java - 无法理解有关快速失败的评论

> ID：12145493
> 
> 赞同：2
> 
> 时间：2012-08-27T16:05:36.710
> 
> 标签：java, iterator, hashset, fail-fast

在 JDK 1.6 的 HashSet.java 中，有一些关于 HashSet 迭代器的 fail-fast 属性的注释。

> 此类的迭代器方法返回的迭代器是快速失败的：如果在创建迭代器后的任何时间修改集合，除了通过迭代器自己的 remove 方法之外，迭代器会抛出 ConcurrentModificationException。因此，面对并发修改，迭代器快速而干净地失败，而不是在未来不确定的时间冒任意的、非确定性的行为。

我可以理解上面的段落，因为它非常简单明了，但我无法理解下面的段落。如果我有一些简单的例子表明快速失败的迭代器甚至会失败，我可能会理解它。

> 请注意，不能保证迭代器的快速失败行为，因为一般来说，在存在不同步的并发修改的情况下，不可能做出任何硬保证。快速失败的迭代器会尽最大努力抛出 ConcurrentModificationException。因此，编写一个依赖于这个异常的正确性的程序是错误的：迭代器的快速失败行为应该只用于检测错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T16:10:14.127

编辑：对不起，我使用了一个列表，但这是相同的想法。这是关于迭代器，而不是它背后的集合。

EDIT2：这也更有可能发生在多线程环境中，你有两个线程，一个阅读，一个写作。当您编码时，这些更难看到。要解决这些问题，您需要在列表上实施读/写锁以避免这种情况。

这是注释的代码示例：

```
Iterator itr = myList.iterator();

while(itr.hasNext())
{
    Object o = itr.next();

    if(o meets some condition)
    { 
        //YOURE MODIFYING THE LIST
        myList.remove(o);
    }
} 
```

规范说的是你不能依赖这样的代码：

```
while(itr.hasNext())
{
     Object o = itr.next();

     try
     {
         if(o meets some condition)
            myList.remove(o);
     }
     catch(ConcurrentModificationException e)
     {
         //Whoops I abused my iterator. Do something else.
     }
} 
```

相反，您可能应该将内容添加到新列表中，然后将 myList 引用切换到刚刚创建的引用。这能说明情况吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T16:11:45.933

第二段背后的想法是防止您编写这样的代码：

```
boolean ok = false;
do {
    try {
        doTheModification();
        ok = true;
    } catch {
        // Consurrent modification - retry
    }
} while (!ok); 
```

虽然这不是一个好的代码，但注释指出此代码无效（与次优相反）。他们说异常可能根本不会发生，所以上面的循环可能会默默地产生失败。

# python - 如何使用 Swig 中止调用 C 函数的 Python 脚本？

> ID：12145494
> 
> 赞同：3
> 
> 时间：2012-08-27T16:05:38.083
> 
> 标签：python, c, swig, abort

我在尝试中止 Python 脚本时遇到问题，例如：

```
#!/usr/bin/python

import hello

hello.draw()

exit() 
```

其中 draw() 是一个 C 函数。在这个函数中有一个循环来打印一些文本。我尝试 CTRL-C 来摆脱它，但它不起作用。重要的是不能修改 C 代码！

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T08:38:57.770

我举了一个例子来说明你如何做到这一点。它可以增强功能并从中逃脱，而无需对其进行修改。例如，给定函数`foo`（在 test.h 中内联用于我的测试）：

```
void foo() {
  while(1); // never returns
} 
```

您可以使用信号和`siglongjmp`. 但是应该注意的是，[您需要*非常*小心](https://stackoverflow.com/a/7335101/168175)，以确保您只从内部调用[异步安全](https://stackoverflow.com/q/2013202/168175)函数`foo`，或者在任何不安全调用之后屏蔽信号并取消屏蔽它们。

然后我们可以包装函数并使用`%exception`注入一些额外的代码来允许信号退出函数：

```
%module test

%{
#include <setjmp.h>
#include <signal.h>

static sigjmp_buf timeout;

static void backout(int sig) {
  siglongjmp(timeout, sig);
}

#include "test.h"
%}

%include <exception.i>

%exception {
  if (!sigsetjmp(timeout, 1)) {
    signal(SIGALRM,backout); // Check return?
    $action
  }
  else {
    // raise a Python exception
    SWIG_exception(SWIG_RuntimeError, "Timeout in $decl");
  }
}

void foo();

%exception; 
```

这允许我们写：

```
import signal
import test

signal.alarm(5)
test.foo() 
```

考虑到有关异步安全功能的警告，这可以按预期工作。我`SIGALRM`在这里使用它是因为它允许我将它全部保存在一个 Python 文件中。如果您愿意，可以使用另一个线程/进程和其他信号。

如果您将我的示例中的 SIGALRM 更改为 SIGINT （并且显然也不要引发 SIGALRM），它将与`Ctrl`+一起使用`C`- 它不适用的原因是因为[默认 Python 信号处理程序的工作方式](http://docs.python.org/dev/library/signal.html#execution-of-python-signal-handlers)。Python 使用的默认处理程序只是设置一个标志并在底层调用将控制权返回给 Python*后*处理信号，这巧妙地避开了整个异步安全问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:08:11.757

您需要为您的 C 函数提供一种中止它的方法 - 例如，它可以在其绘制循环中轮询全局状态标志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-12T22:07:55.793

另一种可能性是停止该进程然后终止它。在`bash`命令行 (Linux/MacOS) 中，它看起来像这样：

假设您启动脚本...

```
$ python3 example.py 
```

...然后键入`control`+`Z`以停止该过程。查找方括号中的数字，在本例中为`1`。

```
[1]+  Stopped                 python3 example.py 
```

现在您可以使用命令终止该进程`kill`，后跟方括号中显示的数字。

```
$ kill %1
[1]+  Terminated: 15          python3 example.py 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-24T18:11:45.097

这是`siglongjmp`C++ 的另一种方法，但也可以在没有 lambda 的情况下轻松适应 C：

```
%exception {
    signal(SIGINT, [](int signum){
        PyErr_SetNone(PyExc_KeyboardInterrupt);
        Py_Finalize();
        exit(1);
    });
    $action
}; 
```

# gcc - gcc 矢量化消息

> ID：12145496
> 
> 赞同：0
> 
> 时间：2012-08-27T16:05:59.263
> 
> 标签：gcc

我读到（http://software.intel.com/en-us/articles/vectorization-writing-cc-code-in-vector-format/）英特尔编译器有一个标志来输出有关矢量化的信息 - 比如“块被矢量化了。”等等。 gcc 有类似的东西吗？我只是想看看我是否可以了解什么是矢量化的，什么不是。例如，我想做一个这样的演示：

```
#include <vector>

class Point3
{
public:
  Point3() : Components(3)
  {
    data[0] = 0;
    data[1] = 0;
    data[2] = 0;
  }

  const unsigned int Components;
  float data[3];

private:

};

class Point4
{
public:
  Point4() : Components(4)
  {
    data[0] = 0;
    data[1] = 0;
    data[2] = 0;
    data[3] = 0;
  }

  const unsigned int Components;

  float data[4];
private:

};

template <typename T>
static float Add(const T& a, const T& b)
{
  float sumValues = 0.0f;
  for(unsigned int i = 0; i < a.Components; ++i)
  {
    sumValues += a.data[i] + b.data[i];
  }
  return sumValues;
}

int main()
{
  std::vector<Point3> point3vec(1000);
  for(std::size_t i = 0; i < point3vec.size() - 1; ++i)
  {
    Add(point3vec[i], point3vec[i+1]);
  }

  std::vector<Point4> point4vec(1000);
  for(std::size_t i = 0; i < point4vec.size(); ++i)
  {
    Add(point4vec[i], point4vec[i+1]);
  }

} 
```

看看其中一个循环是否被矢量化，而另一个没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:59:25.753

[请](http://gcc.gnu.org/onlinedocs/gcc/Debugging-Options.html#index-ftree_002dvectorizer_002dverbose-690)参阅`-ftree-vectorizer-verbose=n`http://gcc.gnu.org/onlinedocs/gcc/Debugging-Options.html#index-ftree_002dvectorizer_002dverbose-690

在较新版本的 GCC 中使用`-fopt-info-vec -fopt-info-vec-missed`.

# r - 如何通过总和标准化数据框值（获取百分比）

> ID：12145499
> 
> 赞同：5
> 
> 时间：2012-08-27T16:06:00.230
> 
> 标签：r, dataframe, aggregate, data.table

我有以下数据框：

```
> str(df)
 'data.frame':  52 obs. of  3 variables:
  $ n    : int  10 20 64 108 128 144 256 320 404 512 ...
  $ step : Factor w/ 4 levels "Step1","Step2",..: 1 1 1 1 1 1 1 1 1 1 ...
  $ value: num  0.00178 0.000956 0.001613 0.001998 0.002975 ... 
```

现在我想用`df$value`属于相同 n ie 的值的总和来规范化/除以，这样我就可以获得百分比。这不起作用，但显示了我想要实现的目标。在这里，我将属于相同 n 的值的总和预先计算到 dfa 中，并尝试将原始值除以match`df$value`的聚合总数：`dfa$value``n`

```
dfa <- aggregate(x=df$value, by=list(df$n), FUN=sum)
names(dfa)[names(dfa)=="Group.1"] <- "n"           
names(dfa)[names(dfa)=="x"] <- "value"
df$value <- df$value / dfa[dfa$n==df$n,][[1]] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T16:12:09.947

我认为以下工作，使用 package `data.table`。

```
df <- data.table(df)
df[,value2 := value/sum(value),by=n] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T16:57:11.440

我会使用`ave`：

```
set.seed(123)
df <- data.frame(n=rep(c(2,3,6,8), each=5), value = sample(5:60, 20))
df$value_2 <- ave(df$value, list(df$n), FUN=function(L) L/sum(L)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T16:29:57.353

您拥有的代码的问题是这一行：

```
df$value <- df$value / dfa[dfa$n==df$n,][[1]] 
```

该行`dfa$n==df$n`返回一个长度的逻辑向量`max(length(df),length(dfa)`，告诉您每个索引是否`n`匹配。我认为您不能使用它来`dfa$n`匹配`df$n`.

使用`base`函数，您可以使用`aggregate`and `merge`：

```
dfa <- aggregate(x=df$value, by=list(df$n), FUN=sum)
names(dfa) <- c("n","sum.value") 
df2 <- merge(df,dfa,by="n",all = TRUE)
df2$value2 <- df2$value/df2$sum.value 
```

# gwt - 如何使用 DatePickerCells 避免 NullPointerException？

> ID：12145506
> 
> 赞同：0
> 
> 时间：2012-08-27T16:06:10.090
> 
> 标签：gwt, datagrid

我正在使用 GWT DataGrid。我正在使用 DatePickerCell：

```
DateTimeFormat dateFormat = DateTimeFormat
            .getFormat(PredefinedFormat.DATE_MEDIUM);
    Column<TriathlonDTO, Date> dateColumn = new Column<ClassDTO, Date>(
            new DatePickerCell(dateFormat)) {
        @Override
        public Date getValue(TriathlonDTO object) {
            return object.getDate();
        }
    }; 
```

有时我有日期为空的单元格。如果我的日期为空，DataGrid 会显示一个空字段，这很好。

但是：当我单击该字段时，DatePicker 窗口不显示，因为 DatePicker 类使用上面的 getValue()-Function，它返回 null -> NullPointerException

我不想更改 getValue() 函数以返回新的 Date()。

您有避免 NPE 的智能解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:09:01.963

*这是一个已知问题，目前除了分叉*代码之外别无他法（即，让您自己制作`DatePickerCell`修复问题的副本）。

请参阅提供了一些代码的[http://code.google.com/p/google-web-toolkit/issues/detail?id=5791#c4 。](http://code.google.com/p/google-web-toolkit/issues/detail?id=5791#c4)

# c# - 如何使陷入无限循环的测试失败？

> ID：12145510
> 
> 赞同：23
> 
> 时间：2012-08-27T16:06:24.037
> 
> 标签：c#, .net, unit-testing, .net-2.0, mstest

我有一些产生无限循环的代码。现在我需要编写一个大约 200 毫秒后会失败的测试。200ms 表示代码处于无限循环中。

例如：

```
public void CodeUnderTest()
{
   while(true)
   {

   }
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-27T16:12:34.160

使用 MSTest 时，您可以使用属性

```
[TestMethod]
[Timeout(200)] 
```

请参阅[如何强制测试停止运行](http://msdn.microsoft.com/en-us/library/ms243175.aspx)

> 您可以设置执行测试或测试运行的时间限制。例如，如果您在测试实验室工作并且需要在一天中的某个时间完成测试运行，您可能需要执行此操作。
> 
> 使用时间限制的另一种情况是无响应代码。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-27T16:08:57.323

关于什么：

```
Task.Create(CodeUnderTest).Wait(TimeSpan.FromSeconds(1)); 
```

或者：

```
Task.Factory.StartNew(CodeUndertest).Wait(TimeSpan.FromSeconds(1)); 
```

或者：

```
Task.Factory.StartNew(() => CodeUndertest(arg1,arg2,arg3...)).Wait(TimeSpan.FromSeconds(1)); 
```

# android - 如何将radiogroup的selectedindex保存到sharedpreferences

> ID：12145512
> 
> 赞同：0
> 
> 时间：2012-08-27T16:06:30.027
> 
> 标签：android

我想将 radiogroupt 的 selectedindex 保存到 sharedpreferences 但我不知道如何去做。谁能给我一些提示如何做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:16:28.213

您是否已经添加了您的广播组，您是否能够阅读它并知道如何使用 sharedpreferences？

如果是这样，我建议您在活动中覆盖 onPause()。在那里，您可以读取无线电组的值并将其保存到 sharedpreferences。

然后，如果需要，重写 onResume() 以从 sharedpreferences 中读取并更新 UI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:23:50.693

试试下面的示例代码：

```
public class MainActivity extends Activity {

private RadioGroup radioGroup;

private static final String SELECTED_INDEX="SelectedIndex";

private OnCheckedChangeListener checkedChangedListener=new OnCheckedChangeListener() {

    @Override
    public void onCheckedChanged(RadioGroup group, int checkedId) {
        saveSelectedIndex(checkedId);
    }
};

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    radioGroup = (RadioGroup) findViewById(R.id.rg);
    radioGroup.setOnCheckedChangeListener(checkedChangedListener);
    RadioButton rbtn=((RadioButton)radioGroup.findViewById(getSelectedValue()));
    if(rbtn!=null){
        rbtn.setChecked(true);
    }
}

private int getSelectedValue(){
    SharedPreferences pref=PreferenceManager.getDefaultSharedPreferences(this);
    return pref.getInt(SELECTED_INDEX, -1);
}

private void saveSelectedIndex(int value){
    SharedPreferences.Editor editor=PreferenceManager.getDefaultSharedPreferences(this).edit();
    editor.putInt(SELECTED_INDEX, value);
    editor.commit();
}

} 
```

# android - 在 4.x 上没有换行的多行 TextView？

> ID：12145514
> 
> 赞同：2
> 
> 时间：2012-08-27T16:06:37.607
> 
> 标签：android

我想创建一个不换行并允许垂直/水平滚动的 TextView？[此处](https://stackoverflow.com/questions/2478615/android-textview-with-scrollbars-and-maxheight/2480558#2480558)描述的解决方案不再适用于 4.0.3。

4.x有什么解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T16:30:43.977

将文本包装在 a 中以`HorizontalScrollView`进行水平滚动：

```
 <?xml version="1.0" encoding="utf-8"?>
<HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/text_view"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:singleLine="false"
        android:maxLines="3"
        android:scrollbars="vertical"
        android:textColor="@android:color/secondary_text_dark_nodisable"
        >
    </TextView>
</HorizontalScrollView> 
```

对于垂直滚动使用`ScrollView`。

此外，这个 XML 只是从您引用的答案中获取的。

# iphone - 在按钮按下时动画显示视图

> ID：12145515
> 
> 赞同：0
> 
> 时间：2012-08-27T16:06:47.467
> 
> 标签：iphone, ios, animation

我想在按下按钮时为视图的显示设置动画。按下按钮时，按钮将通过将 x 原点增加约 150 像素来进行动画处理。

棘手的部分...

当按钮向右滑动时，视图应该以动画方式显示，就好像它被按钮拉动一样。动画将大致在屏幕中间发生，所以我不能简单地将视图的初始原点设置为离开屏幕并重新设置动画。

我如何完成这种类型的动画？

![在此处输入图像描述](../Images/defaf7c06329772e69d4e0a4c2633fac.png) ![在此处输入图像描述](../Images/3e8ee5df18b0759dc4659f98b9a4bc17.png) ![在此处输入图像描述](../Images/72c78a2ae3bb608635dbd1eaf39f5400.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:13:36.513

添加一个清晰的视图，将 clipToBounds 设置为 YES，并使用 for frame 最后一帧查看星星。然后，您只需将您的视图与星星放在清晰的视图中，将其向左移动，为 x 原点设置动画，然后尽情享受吧！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:15:21.670

为您的两个视图动画使用 CAAnimationGroup。按钮动画是一个简单的翻译。您可以使用缩放或 alpha 动画结合平移来完成的视图（例如，从 0 缩放到全尺寸，或从 0 到 1 的 alpha，以使视图出现）

# java - Java认证样本

> ID：12145519
> 
> 赞同：5
> 
> 时间：2012-08-27T16:07:04.430
> 
> 标签：java

在这个问题中，什么被认为是对象？数组中有 7 个双精度数加上数组本身。

以下代码片段执行后将出现多少个对象？

```
double[] ann = new double[ 7 ];
double[] bob;
bob = ann; 
```

2 7 14 1

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T16:09:57.857

只有一个对象`new double[ 7 ];`

双[]鲍勃；还引用在上述步骤中创建的相同对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T16:09:59.807

只会有一个对象。您使用`new double[7]`. `bob`并且`ann`只是对该对象的引用，而 7 个双精度数是原语。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T16:11:45.077

有一个对象：`double[7]`, 有 2 个对它的引用（`ann`和`bob`）。由于数组包含[原语](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)，因此这些不是`Object`实例，因此您无需计算它们

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-27T16:11:58.647

`double[] ann = new double[ 7 ];`

您已经创建了一个`Array Object`现在由 Array Object Reference Variable 引用的对象`ann`。

```
double[] bob;
bob = ann; 
```

在上面的行中，您正在创建一个数组对象引用变量`bob`。并将引用分配给`Array Object`也被引用的`ann`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T20:26:31.237

谢谢。我用一些代码测试了它。

```
 public class TestCode {

        /**
         * @param args
         */
        public static void main(String[] args) {
            double[] ann = new double[ 7 ];
            double[] bob;
            bob = ann;
            System.out.println(bob.getClass().getSimpleName());
            System.out.println(bob[6]);

            //there are 7 double references initialized to 0.0
        //array refs point to same object
        //1 object of type double[]
    }

} 
```

# php - 长时间运行的 Magento 进程

> ID：12145520
> 
> 赞同：1
> 
> 时间：2012-08-27T16:07:08.217
> 
> 标签：php, performance, magento

任何人都有使用长期运行的 Magento 进程来减轻开销的经验。例如，对订单或客户资源的典型 Magento API 调用可能需要 1 秒或更长时间，其中可能有一半时间花在 Magento 开销上，而不是特定于所讨论的 API 资源。

那么，如果 Magento PHP 进程在内存中启动并维护，等待 API 请求，这样它就可以处理它们而无需每次都加载 Magento。

我对长时间运行的 php 脚本的大多数搜索都出现了与 PHP 脚本故障排除有关的问题/问题，这些 PHP 脚本的运行时间比预期的要长于运行它们正在处理的数据量的 b/c 等 - 所以我发现如果可能的话，很难在这种事情上找到好的资源。

更新：更具体地满足我的需求：

*   我已经为简单的 GET 设置了 memcached，我们可以安全地缓存服务器端。
*   我现在要优化的是写操作。
*   使用 REST API，所以没有我们关心的任何 WSDL 加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T20:16:53.150

您可能想要查看`proc-open`，并且您需要做很多通常发生在操作系统本身中的管理。

但是，如果问题是速度，而不仅仅是想要一种方法来管道/分叉以利用可用的硬件，我会考虑简单地在整个系统中找到瓶颈，并在深入研究之前进行缓存。例如 WSDL 缓存、数据库规范化、OP 代码缓存甚至 memcache 或反向代理缓存。Alan 在他的 Mercury API 产品中确实有 WSDL 缓存 ( [http://store.pulsestorm.net/products/mercury-api](http://store.pulsestorm.net/products/mercury-api) )

我`proc-open`以前在使用相同的方法在不到 8 小时的时间内将超过 50 万条客户记录（通过我可能添加的 Magento 模型（堆栈））与地址导入到 32 核系统上的 Magento 时使用过。一个 PHP 文件作为主要入口点，基于数据块的新进程被分叉到一个辅助 PHP 文件，该文件进行实际导入。

我确实利用这个小脚本对我提到的导入进行了多线程处理，尽管这不是您问题的确切答案，因为它似乎不是非常面向技术，但希望能提供一些关于可能性的见解：

*   [http://www.php-code.net/2010/05/running-multiple-processes-in-php/](http://www.php-code.net/2010/05/running-multiple-processes-in-php/)

*   [http://www.php.net/manual/en/function.proc-open.php](http://www.php.net/manual/en/function.proc-open.php)

*   [PHP proc_open 会阻止 Web 请求吗？](https://stackoverflow.com/questions/7101979/does-php-proc-open-block-the-web-wequest)

# javascript - 更改作为链接的文本的字体颜色的代码

> ID：12145521
> 
> 赞同：-1
> 
> 时间：2012-08-27T16:07:08.810
> 
> 标签：javascript, colors

我的 JavaScript 中有 2 行代码可以动态更改颜色，一个用于更改表格行的背景颜色，另一个用于更改字体颜色：

```
rows[i].style.backgroundColor = 'red'
rows[i].style.color = 'white' 
```

当它是超链接时，我需要多行代码来更改字体颜色。我试过了：

```
rows[i].style.link.color = 'white' 
```

和其他几个变体，但我无法更改链接的字体颜色。有人可以帮忙吗？谢谢。

完整代码：

```
var INTENDED_MONTH = 7 //August
// INTENDED_MONTH is zero-relative
now = new Date().getDate(),
rows = document.getElementById('scripture').rows;
if (new Date().getMonth() != INTENDED_MONTH) {
    // need a value here less than 1, or the box for the first of the month will be in Red
    now = 0.5
};
for (var i = 0, rl = rows.length; i < rl; i++) {
    var cells = rows[i].childNodes;
    for (j = 0, cl = cells.length; j < cl; j++) {
        if (cells[j].nodeName == 'TD'
  && cells[j].firstChild.nodeValue != ''
  && cells[j].firstChild.nodeValue == now) {
            rows[i].style.backgroundColor = 'red'
            rows[i].style.color = 'white'
            rows[i].style.a.color = 'white'
            $('html,body').delay(500).animate({ scrollTop: rows[i].offsetTop }, 2000);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:10:26.883

rows[i].style.a.color 应该可以工作。:link 不是真正的课程。如果您向我们展示 rows[] 和内容会更容易

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:10:44.533

确保您在 page 上有正确的 row[i] 作为 html 元素。在你`alert(row[i].id);`改变颜色之前做，以确保你有正确的元素。

你也可以做 document.getElementsByTagName('ID' + i).style.color = 'red';

实际上最好使用 css 类来处理这种事情。并且与 jquery 一起使用将是最简单的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T16:11:37.747

使用 CSS 怎么样？

```
tr{
   backgorund:red;
   color:white;
}
tr a{
   color:white;
} 
```

如果你需要 JavaScript，你可以使用

```
var els=rows[i].getElementsByTagName('a');
for(var i=0;i<els.length;i++){
   els[i].style.color = 'white';
} 
```

**编辑：**

你也可以使用

```
tr a{
   color:inherit;
} 
```

然后当你这样做时

```
rows[i].style.color = 'white' 
```

锚点的颜色将与行的颜色相同 - 白色 -。

**编辑2：**

正如我在评论中所说，即使您使用 javascript 创建链接，它们也是 HTML 元素，因此 CSS 会影响它们。

但问题是规则

```
table.hovertable a:link, table.hovertable a:visited, table.hovertable a:hover, table.hovertable a:active {
    color: black;
} 
```

覆盖

```
table.hovertable tr a {
    color: inherit;
} 
```

那么，你需要

```
table.hovertable tr a:link {
    color: inherit;
} 
```

其中有选择器`:link`，所以两条规则都有相同的选择器，最后一条规则有效。

但我忘了说这`inherit`在 IE7 及之前的版本上不起作用。然后，你可以使用

```
rows[i].className+=' selected'; 
```

和

```
table.hovertable tr.selected{
   color:white;
   background:red;
}

table.hovertable tr.selected a:link{
   color:white
} 
```

**编辑3：**

如果要为当前月份的单元格设置相同的样式，可以执行

```
var m=new Date().getMonth();
document.getElementById('months').rows[Math.floor(m/6)].cells[m%6].className+=' selected'; 
```

（假设表有`id="months"`）

但是之后

```
table.hovertable .selected{
   color:white;
   background:red;
}

table.hovertable .selected a:link{
   color:white
} 
```

（`.selected`而不是`tr.selected`，现在是`td`）。

但我看到你仍然使用`color:inherit`. 现在您使用不需要的类设置样式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T16:20:31.773

恐怕没有这么简单的解决方案。链接是行的子元素，不遵循一般的文本颜色。我认为最简单的解决方案是更改行 css 类，并在其中定义颜色。

您可以在 css 中定义一个合适的颜色块，如下所示：

```
.redHighlighted { background-color: 'red'; color: 'white'; }
.redHighlighted a, .redHighlighted a:visited,
.redHighlighted a:hover, .redHighlighted a:active { color: 'green'; } 
```

然后你可以用单行在javascript中做到这一点：

```
rows[i].setAttribute("class", "redHighlighted"); 
```

稍后您当然可以删除该类，或将其替换为其他类。另请注意，您可能必须指定 TD 元素的颜色，而不是 CSS 中的行，如下所示：

```
.redHighlighted td { background-color: 'red'; color: 'white'; } 
```

# c++ - 为什么按下“Tab”键只会发出 QEvent::ShortcutOverride 事件？

> ID：12145522
> 
> 赞同：8
> 
> 时间：2012-08-27T16:07:09.117
> 
> 标签：c++, qt, keypress, qitemdelegate, qevent

# 背景

我制作了一个自定义小部件，其中有`QLineEdit`几个`QPushButtons`可以与自定义项目委托一起使用：

```
class LineEditor : public QWidget
{
public:
    explicit LineEditor(QWidget *parent = 0) : QWidget(parent) {
        setLayout(new QHBoxLayout);

        layout()->setContentsMargins(0, 0, 0, 0);
        layout()->setSpacing(0);

        QLineEdit *edit = new QLineEdit(this);
        layout()->addWidget(edit);
        layout()->addWidget(new QPushButton(this));
        layout()->addWidget(new QPushButton(this));

        setFocusProxy(edit);
    }
};

class PropertyDelegate : public QItemDelegate
{
public:
    QWidget *createEditor(QWidget *parent, const QStyleOptionViewItem &option, const QModelIndex &index) const {
        return new LineEditor(parent);
    }

    bool eventFilter(QObject *object, QEvent *event) {
        if (event->type() == QEvent::KeyPress) {
            qDebug() << "KeyPress";
        }
        if (event->type() == QEvent::ShortcutOverride) {
            qDebug() << "ShortcutOverride";
        }

        return QItemDelegate::eventFilter(object, event);
    }
}; 
```

我将用这样的方式绑定`QListView`它们`QStandardItemModel`：

```
QStandardItemModel *model = new QStandardItemModel;
model->appendRow(new QStandardItem("1"));
model->appendRow(new QStandardItem("2"));
model->appendRow(new QStandardItem("3"));

QListView w;
w.setItemDelegate(new PropertyDelegate);
w.setModel(model);
w.show(); 
```

# 问题

为什么在按下键`PropertyDelegate::eventFilter`时`Tab`只有`QEvent::ShortcutOverride`事件，但按下任何其他键都会发出`QEvent::ShortcutOverride`和`QEvent::KeyPress`事件？

**UPD：**我想通过按标准小部件`Tab`来实现行之间的移动。`Backtab`

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-06-15T18:46:08.173

好吧，最后我对此做了一些研究。

# 解释

当视图调用`createEditor`委托的功能时，它还会将委托事件过滤器安装到编辑器。

```
QWidget *QAbstractItemViewPrivate::editor(const QModelIndex &index,
                                          const QStyleOptionViewItem &options)
{
    Q_Q(QAbstractItemView);
    QWidget *w = editorForIndex(index).widget.data();
    if (!w) {
        QAbstractItemDelegate *delegate = delegateForIndex(index);
        if (!delegate)
            return 0;
        w = delegate->createEditor(viewport, options, index);
        if (w) {
            w->installEventFilter(delegate);

    ......
} 
```

但是，委托只能捕获编辑器小部件的事件，但不能捕获其子小部件的事件。当`Tab`按键被按下时，该`QWidget::event`函数被调用，它使用它将焦点更改为另一个小部件：

```
bool QWidget::event(QEvent *event)
{
    ......

    switch (event->type()) {
        ......
        case QEvent::KeyPress: {
        QKeyEvent *k = (QKeyEvent *)event;
        bool res = false;
        if (!(k->modifiers() & (Qt::ControlModifier | Qt::AltModifier))) {  //### Add MetaModifier?
            if (k->key() == Qt::Key_Backtab
                || (k->key() == Qt::Key_Tab && (k->modifiers() & Qt::ShiftModifier)))
                res = focusNextPrevChild(false);
            else if (k->key() == Qt::Key_Tab)
                res = focusNextPrevChild(true);
            if (res)
                break;
        }

        ......
    }

    ......
} 
```

因此，在我的情况下，焦点设置为下一个`QPushButton`，`QLineEdit`并且事件不会传播到父级（`LineEditor`）。

# 求解

解决问题的正确方法就是这样`QSpinBox`做。因为它也有`QLineEdit`。在小部件的构造函数中，它为行编辑设置焦点代理：

```
edit->setFocusProxy(this); 
```

所以所有的焦点事件都会到达主小部件。此外，`focusPolicy`必须设置该属性，因为它是`NoFocus`默认设置：

```
setFocusPolicy(Qt::WheelFocus); 
```

此时我们需要做的就是将必要的事件`QLineEdit`从主小部件传播到如下所示：

```
bool LineEditor::event(QEvent *e)
{
    switch(e->type())
    {
    case QEvent::ShortcutOverride:
        if(m_lineEdit->event(e))
            return true;
        break;

    case QEvent::InputMethod:
        return m_lineEdit->event(e);

    default:
        break;
    }

    return QWidget::event(e);
}

void LineEditor::keyPressEvent(QKeyEvent *e)
{
    m_lineEdit->event(e);
}

void LineEditor::mousePressEvent(QMouseEvent *e)
{
    if(e->button() != Qt::LeftButton)
        return;

    e->ignore();
}

void LineEditor::mouseReleaseEvent(QMouseEvent *e)
{
    e->accept();
}

void LineEditor::focusInEvent(QFocusEvent *e)
{
    m_lineEdit->event(e);
    QWidget::focusInEvent(e);
}

void LineEditor::focusOutEvent(QFocusEvent *e)
{
    m_lineEdit->event(e);
    QWidget::focusOutEvent(e);
} 
```

这应该足够了。

# 棘手

正如上面所说，代表无法捕捉到编辑孩子的事件。因此，要使编辑器的行为像“原生”，我必须将事件从子级复制到编辑器。

`LineEditor`在构造函数中安装事件过滤器`QLineEdit`：

```
edit->installEventFilter(this); 
```

过滤器的实现如下所示：

```
bool LineEditor::eventFilter(QObject *object, QEvent *event)
{
    if(event->type() == QEvent::KeyPress)
    {
        QKeyEvent* keyEvent = static_cast<QKeyEvent *>(event);
        if(keyEvent->key() == Qt::Key_Tab || keyEvent->key() == Qt::Key_Backtab)
        {
            QApplication::postEvent(this, new QKeyEvent(keyEvent->type(), keyEvent->key(), keyEvent->modifiers()));
            // Filter this event because the editor will be closed anyway
            return true;
        }
    }
    else if(event->type() == QEvent::FocusOut)
    {
        QFocusEvent* focusEvent = static_cast<QFocusEvent *>(event);
        QApplication::postEvent(this, new QFocusEvent(focusEvent->type(), focusEvent->reason()));

        // Don't filter because focus can be changed internally in editor
        return false;
    }

    return QWidget::eventFilter(object, event);
} 
```

也可以使用`qApp->notify(this, event)`for`QKeyEvent`而不是，`QApplication::postEvent`因为无论如何我们都会过滤此事件。但这是不可能的，`QFocusEvent`因为`notify`它将重定向事件并且它不会到达孩子。

请注意，标准（`QItemDelegate`或`QStyledItemDelegate`）委托将关心焦点在自身内部更改时的情况：

```
if (event->type() == QEvent::FocusOut || (event->type() == QEvent::Hide && editor->isWindow())) {
        //the Hide event will take care of he editors that are in fact complete dialogs
        if (!editor->isActiveWindow() || (QApplication::focusWidget() != editor)) {
            QWidget *w = QApplication::focusWidget();
            while (w) { // don't worry about focus changes internally in the editor
                if (w == editor)
                    return false;
                w = w->parentWidget();
            }

    ...... 
```

# python - 如何调试导致连接被拒绝或连接超时的原因？

> ID：12145536
> 
> 赞同：34
> 
> 时间：2012-08-27T16:07:58.300
> 
> 标签：python, networking

我有以下代码已经工作了大约一年：

```
import urllib2

req = urllib2.Request('https://somewhere.com','<Request></Request>')
data = urllib2.urlopen(req)
print data.read() 
```

最近，出现了一些随机错误：

*   `urllib2.URLError: <urlopen error [Errno 111] Connection refused>`
*   `<urlopen error [Errno 110] Connection timed out>`

失败的痕迹是：

```
Traceback (most recent call last):
  File "test.py", line 4, in <module>
    data = urllib2.urlopen(req).read()
  File "/usr/lib/python2.7/urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "/usr/lib/python2.7/urllib2.py", line 400, in open
    response = self._open(req, data)
  File "/usr/lib/python2.7/urllib2.py", line 418, in _open
    '_open', req)
  File "/usr/lib/python2.7/urllib2.py", line 378, in _call_chain
    result = func(*args)
  File "/usr/lib/python2.7/urllib2.py", line 1215, in https_open
    return self.do_open(httplib.HTTPSConnection, req)
  File "/usr/lib/python2.7/urllib2.py", line 1177, in do_open
    raise URLError(err)
urllib2.URLError: <urlopen error [Errno 111] Connection refused> 
```

上述错误是随机发生的，脚本第一次可以成功运行，但第二次运行失败，反之亦然。

**我应该怎么做才能调试并找出问题出在哪里？** 如何判断端点是否已使用我的请求并返回响应但从未到达我？

## 使用远程登录

我只是用telnet测试过，有时成功，有时不成功，就像我的Python一样。

成功时：

```
$ telnet somewhere.com 443
Trying XXX.YY.ZZZ.WWW...
Connected to somewhere.com.
Escape character is '^]'.
Connection closed by foreign host. 
```

在被拒绝的连接上：

```
$ telnet somewhere.com 443
Trying XXX.YY.ZZZ.WWW...
telnet: Unable to connect to remote host: Connection refused 
```

超时：

```
$ telnet somewhere.com 443
Trying XXX.YY.ZZZ.WWW...
telnet: Unable to connect to remote host: Connection timed out 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-08-27T16:23:26.917

## 问题

问题出在网络层。以下是解释的状态代码：

*   `Connection refused`：对等方未在您尝试连接的相应[网络端口上侦听。](https://en.wikipedia.org/wiki/Port_%28computer_networking%29)这通常意味着防火墙正在主动拒绝连接，或者相应的服务未在其他站点上启动或过载。

*   `Connection timed out`: 在尝试建立 TCP 连接期间，在给定的时间限制内，对方没有响应。在 urllib 的上下文中，这*也可能*意味着 HTTP 响应没有及时到达。这有时也是由防火墙引起的，有时是由网络拥塞或远程（甚至本地）站点上的负载过重引起的。

## 在上下文中

也就是说，这可能不是您的脚本中的问题，而是远程站点上的问题。如果偶尔出现，则表明其他站点有负载问题或到其他站点的网络路径不可靠。

此外，由于是网络问题，您无法判断另一端发生了什么。数据包有可能在一个方向上正常传输，但在另一个方向上被丢弃（或错误路由）。

它也不是（直接）DNS 问题，它会导致另一个错误（*名称或服务未知*或类似的东西）。然而，DNS 可能被配置为在每个请求上返回不同的 IP 地址，这将在每次连接尝试时将您（DNS 缓存放在一边）连接到不同的地址主机。反过来，这些主机中的一些可能配置错误或过载，从而导致上述问题。

## 调试这个

正如另一个答案中所建议的，使用数据包分析器可以帮助调试问题。但是，除了准确反映错误消息内容的数据包外，您不会看到太多。

要排除网络拥塞是一个问题，您可以使用类似或什至查看数据包是否丢失到远程站点的工具[`mtr`](https://en.wikipedia.org/wiki/MTR_%28software%29)（[`traceroute`](http://linux.die.net/man/8/traceroute)见[`ping`](http://linux.die.net/man/8/ping)下文）。

如果网络拥塞不是问题（即丢失的数据包不超过 1%），您应该联系远程服务器管理员以找出问题所在。他或许能够在系统日志中看到相关信息。在远程站点上运行数据包分析器也可能比在本地站点上更具启发性。`netstat -tlp`然后明确建议检查端口是否打开使用。

## 解释 traceroute 结果

这需要一些练习，因为中间跃点的高延迟或丢失可能意味着一切或什么都没有。

中间跃点通常是 Internet 中的大型路由器或处理大量数据包的 ISP 网络。他们可能比回复你的 traceroute 有更好的事情要做，所以如果他们目前非常忙，他们可能会选择只回复 10% 的请求。或者选择完全不回复。如果您在最后一跳没有看到损失，那么您可能在损失方面还不错。

但是，如果您*确实*在最后一跳看到丢失，则无法确定数据包在最后一跳真的丢失了。任何中间跃点都可能负责。通常，您还会在较早的跃点看到损失，这可能表明真正的来源。

雪上加霜的是，您看到的路由可能不是真正的路由：真正的路由可能是不对称的，这意味着*到*您的目的地（这是您在 traceroute 中看到的）采用与回复不同的路径（由于它的工作原理，您在 traceroute 中看不到）。

总结一下：

*   在 traceroute 中观察到的丢失只能由等于或在您看到的跃点之前的跃点引起。
*   中间跳的丢失，没有端到端的丢失，可能只是意味着该跳不费心回复。
*   正向路径（你在 traceroute 中看到的）可能不等于反向路径；反向路径可能会发生丢失和延迟。
*   从路由中间开始（并影响所有后续跃点）的部分丢失 (1%-90%) 通常表明网络拥塞。通常，您将无能为力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T16:16:34.750

使用[数据包分析器](http://en.wikipedia.org/wiki/Comparison_of_packet_analyzers)截获发往/来自 的数据包`somewhere.com`。研究这些数据包应该会告诉你发生了什么。

超时或连接被拒绝可能意味着远程主机太忙。

# html - div布局问题

> ID：12145537
> 
> 赞同：0
> 
> 时间：2012-08-27T16:08:11.040
> 
> 标签：html, css

我很难为具有主标题 div 的布局获得正确的位置 css，左侧包含图像，右侧有两个相互重叠的部分。HTML 和 CSS 紧随其后，我删除了所有非必要的 css 和位置 css。

```
<!DOCTYPE html >

<html lang="en"">
<head runat="server">
<title></title>
<link href="Site.css" rel="stylesheet" type="text/css" />
<asp:ContentPlaceHolder id="head" runat="server">

</asp:ContentPlaceHolder>
</head>
<body>
<form id="form1" runat="server">
    <div id="header">

<div id="hdrleft">
<div class="hdrimage">
</div>
</div>
    <div id="hdrright">
    <div class="logindisplay">
    </div>
    <div class="logotransitions">
    </div>
    </div>
</div>
<div>
    <asp:ContentPlaceHolder id="ContentPlaceHolder1" runat="server">

    </asp:ContentPlaceHolder>
</div>
</form>
</body> 
```

```
#header{
width:800px;
height:250px;
}
#hdrleft{
height:240px;
width:540px;
}
.hdrimage
{
display:inline;
float:left;
height:230px;
width:520px;
background-color:green;
}

#hdrright
{

width:240px;
padding: 0px 8px 0px 8px;
}

.logindisplay 
{
display:inline;
float:right;
height:240px;
height:80px;
width:240px;    
background-color:red;
}

.logotransitions 
{
 display:inline;
float:right;
height:240px;
height:155px;
width:240px;    
background-color:blue;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:12:57.373

您需要`#hdrleft`并`#hdrleft`添加 float 属性来中断流程：

```
#hdrleft {
    height:240px;
    width:740px;
    float: left;
}
#hdrright {
    height:240px;
    width:240px;
    /* padding: 0px 8px 0px 8px; //Add to child elements as margin instead. */
    float: right;
} 
```

# c# - 如何根据另一个字符串拆分字符串

> ID：12145540
> 
> 赞同：1
> 
> 时间：2012-08-27T16:08:17.393
> 
> 标签：c#, split

我有一个字符串：

```
string fileName = VAH007157100_REINSTMT_20d5fe49.tiff 
```

我想在 REINSMT 结束时拆分它。

```
string splittedFileName = fileName.split("REINSTMT")[0]; 
```

以上不起作用。

我将如何拆分它以从“REINSMT”一词的左侧获取所有内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T16:11:11.850

试试这个

```
string splittedFileName = fileName.Split(new string[]{"REINSTMT"},
                                                  StringSplitOptions.None)[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:12:13.443

为了基于字符串而不是字符进行拆分，您需要提供第二个参数。[请参阅此处](http://msdn.microsoft.com/en-us/library/tabh47cf.aspx)的文档。

你可能想要的是

```
string splittedFileName = fileName.split(new string[] {"REINSTMT"}, StringSplitOptions.None)[0]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T16:13:46.127

另一种方法是使用子字符串：

```
 string fileName = "VAH007157100_REINSTMT_20d5fe49.tiff";
string splittedFileName = fileName.Substring(0, fileName.IndexOf("REINSTMT")); 

```

# objective-c - NSSortDescriptor 应该对 NSDates 进行排序

> ID：12145545
> 
> 赞同：4
> 
> 时间：2012-08-27T16:08:32.083
> 
> 标签：objective-c, sorting, core-data, nsfetchrequest, nssortdescriptor

看起来 NSSortDescriptor 应该是一个相当容易使用的类。

我在 CoreData 中存储了一个实体，该实体具有 NSDate 类型的属性，适当地命名为 @"date"。我正在尝试将排序描述符应用于 NSFetchRequest 并且它似乎没有返回我希望的结果。

我希望的结果是简单地按时间顺序排列日期，而是按照它们添加到 CoreData 的顺序返回它们。

也许您可以提供指导？

参数“升序”是控制排序的吗？

一些代码：

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entityDesc = [NSEntityDescription entityForName:@"Data" inManagedObjectContext:self.managedObjectContext];
[fetchRequest setEntity:entityDesc];

[fetchRequest setFetchBatchSize:10];

NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"date" ascending:YES];
NSArray *sortDescriptors = [NSArray arrayWithObjects:sortDescriptor, nil];    

[fetchRequest setSortDescriptors:sortDescriptors];

NSArray *fetchedObjects = [self.managedObjectContext executeFetchRequest:fetchRequest error:&error]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T16:35:22.657

这是有关[NSSortDescriptors的更多信息](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/SortDescriptors/Articles/Creating.html#//apple_ref/doc/uid/20001845-BAJEAIEE)

或者，如果您想在为 coreDate 获取日期数组后对它们进行排序：

```
//This is how I sort an array of dates.
NSArray *sortedDateArray = [dateArray sortedArrayUsingFunction:dateSort context:NULL];

// This is a sorting function
int dateSort(id date1, id date2, void *context)
{    
    return [date1 compare:date2];
} 
```

这是直接来自苹果的用于排序整数的代码（只需修改以排序日期）：[NSComparator](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_DataTypes/Reference/reference.html#//apple_ref/c/tdef/NSComparator)

> ```
> NSArray *sortedArray = [array sortedArrayUsingComparator: ^(id obj1, id obj2) {
> 
>     if ([obj1 integerValue] > [obj2 integerValue]) {
>         return (NSComparisonResult)NSOrderedDescending;
>     }
> 
>     if ([obj1 integerValue] < [obj2 integerValue]) {
>         return (NSComparisonResult)NSOrderedAscending;
>     }
>     return (NSComparisonResult)NSOrderedSame;
> }]; 
> ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T20:44:38.913

对我来说，单独的排序例程（函数或块）看起来有点矫枉过正。我经常使用您在代码中显示的排序描述符方法按日期属性对核心数据实体进行排序。它每次都能完美运行。

显然，肯定还有其他错误。

*   检查类型是否在您的托管对象模型编辑器和类文件（`Data.h`在您的情况下）中正确设置。
*   此外，请检查您是否没有操作此属性，以便创建顺序随之而来。
*   另外，请确保您没有将此属性与另一个 type 属性混淆`NSDate`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-04T06:04:40.727

添加时间戳 - CoreData 实体中的字符串类型字段

> 创立日期

在插入记录期间

```
 NSManagedObject *newCredetial = [NSEntityDescription insertNewObjectForEntityForName:@"Name" inManagedObjectContext:context];[newCredetial setValue:[self getDate] forKey:@"creationDate"]; 
```

日期函数

```
- (NSString *)getDate{
NSDate *date = [NSDate date];
NSDateFormatter *formatter = [[NSDateFormatter alloc]init];
formatter.dateFormat = @"ddMMyyyyhhmmssss";

return [formatter stringFromDate:date];} 
```

并在获取模块期间使用简短描述

```
NSManagedObjectContext *managedObjectContext = [self managedObjectContext];
NSFetchRequest *fetchRequest1 = [[NSFetchRequest alloc] initWithEntityName:@"Name"];

NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"creationDate" ascending:NO];
[fetchRequest1 setSortDescriptors:@[sortDescriptor]];

arrNameInfo = [[managedObjectContext executeFetchRequest:fetchRequest1 error:nil] mutableCopy]; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-05-01T12:42:23.173

只需将示例“”日期更改为日期

像

```
NSSortDescriptor *sortDescriptor = 
  [[NSSortDescriptor alloc] initWithKey:@"date" ascending:YES]; 
```

改成

```
NSSortDescriptor *sortDescriptor = 
  [[NSSortDescriptor alloc] initWithKey:@"Date" ascending:YES]; 
```

它工作得很好

# java - 如何在不编码的情况下在电子邮件中发送 url

> ID：12145555
> 
> 赞同：0
> 
> 时间：2012-08-27T16:09:08.637
> 
> 标签：java, amazon-web-services, url-encoding, amazon-ses

我正在使用 Amazon Simple Email Service java API 向收件人发送邮件。我在标签内的邮件正文中发送 URL。我的用例要求用户双击收到的 URL 以提示一些操作。（如确认邮件）

问题是 url 在接收时被编码。双击它会给出找不到页面（404）错误。

**原始 URL**：[http](http://something.com/confirm/email=abc@hotmail.com&regKey=somekey&confirm=true) ://something.com/confirm/email=abc@hotmail.com®Key=somekey&confirm=true 当我在邮件上双击此 URL 时，链接在地址栏中打开为： [http ://something.com /confirm/email=abc%40hotmail.com%26regKey=somekey%26confirm=true](http://something.com/confirm/email=abc%40hotmail.com%26regKey=somekey%26confirm=true)

我正在使用**AmazonSimpleEmailServiceClient**。代码如下：

```
 SendEmailRequest request = new SendEmailRequest().withSource(sourceAddress);

String confirmationURL="http://something.com/confirm/email=abc@hotmail.com&regKey=somekey&confirm=true";

            List<String> toAddresses = new ArrayList<String>();
            toAddresses.add(toEmail);

            Destination dest = new Destination().withToAddresses(toAddresses);
            request.setDestination(dest);

            Content subjContent = new Content().withData("Confirmation Request");
            Message msg = new Message().withSubject(subjContent);

            // Include a body in both text and HTML formats
            Content textContent = new Content().withData("Dear please go to the following URL:"+
                    confirmationURL+"\n\n");

            Content htmlContent = new Content().withData("<p>Dear please go to the following URL:</p>"+
                    "<p><a href=\""+confirmationURL+"\">"+confirmationURL+"</a></p>");

             Body body = new Body().withHtml(htmlContent).withText(textContent);
            msg.setBody(body);
            request.setMessage(msg) 
```

**更新**

刚刚发现，这个问题只有当收件人邮件在**hotmail.com**时才会出现。为什么微软总是要做一些不同的事情？有人帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:06:50.347

使用类 java.net.URLEncoder：

```
String confirmationURL = URLEncoder.encode( "http://something.com/confirm/email=abc@hotmail.com&regKey=somekey& confirm=true", "UTF-8"); 
```

# python - 附加在列表中导致值覆盖

> ID：12145558
> 
> 赞同：1
> 
> 时间：2012-08-27T16:09:38.837
> 
> 标签：python

我面临一个特殊的问题。我将在下面简要描述假设我有这段代码 -

```
class MyClass:

   __postBodies = []
    .
    .
    .
for the_file in os.listdir("/dir/path/to/file"):
      file_path = os.path.join(folder, the_file)
      params = self.__parseFileAsText(str(file_path)) #reads the file and gets some parsed data back
      dictData = {'file':str(file_path), 'body':params}
      self.__postBodies.append(dictData)
      print self.__postBodies
      dictData = None
      params = None 
```

问题是，当我每次为不同的文件打印参数和 dictData 时，它具有不同的值（正确的事情），但是一旦发生追加，我打印 __postBodies 就会发生奇怪的事情。如果有你的文件，假设A，B，C，那么

> 第一次 __postBodies 有内容 = [{'body':{A dict with some data related to file A}, 'file':'path/of/A'}]
> 
> 第二次变成 = [{'body':{A dict with some data relaed to file B}, 'file':'path/of/A'}, {'body':{A dict with some data relaed to file B}, '文件':'路径/的/B'}]
> 
> AND 第三次 = [{'body':{A dict with some data relaed to file C}, 'file':'path/of/A'}, {'body':{A dict with some data related to file C}, 'file':'path/of/A'}, {'body':{A dict with some data related to file C }, 'file':'path/of/B'}, {'body':{A dict with some data related to file C}, 'file':'path/of/C'}]

因此，您会看到“文件”键工作得很好。奇怪的是，所有条目的“body”键都被覆盖，最后附加了一个。

我有什么错误吗？我有什么需要做的吗？请指点我一个方向。

对不起，如果我不是很清楚。

编辑 - - - - - - - - - - - -

self.__parseFileAsText(str(file_path)) 调用的返回是一个字典，我将其作为“正文”插入到 dictData 中。

EDIT2 --------------

正如你所问的，这是代码，但我检查了 params = self.__parseFileAsText(str(file_path)) 调用每次都返回一个 diff dict。

```
def __parseFileAsText(self, fileName):

        i = 0
        tempParam = StaticConfig.PASTE_PARAMS

        tempParam[StaticConfig.KEY_PASTE_PARAM_NAME] = ""
        tempParam[StaticConfig.KEY_PASTE_PARAM_PASTEFORMAT] = "text"
        tempParam[StaticConfig.KEY_PASTE_PARAM_EXPIREDATE] = "N"
        tempParam[StaticConfig.KEY_PASTE_PARAM_PRIVATE] = ""
        tempParam[StaticConfig.KEY_PASTE_PARAM_USER] = ""
        tempParam[StaticConfig.KEY_PASTE_PARAM_DEVKEY] = ""
        tempParam[StaticConfig.KEY_PASTE_FORMAT_PASTECODE] = ""

        for line in fileinput.input([fileName]):
            temp = str(line)
            temp2 = temp.strip()
            if i == 0:              
                postValues = temp2.split("|||")

                if int(postValues[(len(postValues) - 1)]) == 0 or int(postValues[(len(postValues) - 1)]) == 2:
                    tempParam[StaticConfig.KEY_PASTE_PARAM_NAME] = str(postValues[0])

                    if str(postValues[1]) == '':                                        
                        tempParam[StaticConfig.KEY_PASTE_PARAM_PASTEFORMAT] = 'text'
                    else:
                        tempParam[StaticConfig.KEY_PASTE_PARAM_PASTEFORMAT] = postValues[1]

                    if str(postValues[2]) != "N":
                        tempParam[StaticConfig.KEY_PASTE_PARAM_EXPIREDATE] = str(postValues[2])

                    tempParam[StaticConfig.KEY_PASTE_PARAM_PRIVATE] = str(postValues[3])
                    tempParam[StaticConfig.KEY_PASTE_PARAM_USER] = StaticConfig.API_USER_KEY
                    tempParam[StaticConfig.KEY_PASTE_PARAM_DEVKEY] = StaticConfig.API_KEY

                else:
                    tempParam[StaticConfig.KEY_PASTE_PARAM_USER] = StaticConfig.API_USER_KEY
                    tempParam[StaticConfig.KEY_PASTE_PARAM_DEVKEY] = StaticConfig.API_KEY
                i = i+1
            else:
                if tempParam[StaticConfig.KEY_PASTE_FORMAT_PASTECODE] != "" :           
                    tempParam[StaticConfig.KEY_PASTE_FORMAT_PASTECODE] = str(tempParam[StaticConfig.KEY_PASTE_FORMAT_PASTECODE])+"\n"+temp2
                else:
                    tempParam[StaticConfig.KEY_PASTE_FORMAT_PASTECODE] = temp2

        return tempParam 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T16:16:42.453

您可能会在每次调用时返回相同的字典，`MyClass.__parseFileAsText()`这可能会发生两种常见的方式：

*   `__parseFileAsText()`接受一个[可变的默认参数](https://stackoverflow.com/q/1132941/505154)（你最终返回的字典）
*   您修改类或实例的属性并将其返回，而不是每次都创建一个新属性

确保在每次调用时都创建一个新字典`__parseFileAsText()`应该可以解决这个问题。

**编辑：**根据您对代码的更新问题`__parseFileAsText()`，您的问题是您在每次调用时都重复使用相同的字典：

```
tempParam = StaticConfig.PASTE_PARAMS
...
return tempParam 
```

在您正在修改的每次调用中`StaticConfig.PASTE_PARAMS`，最终结果是列表中的所有正文字典实际上都是对`StaticConfig.PASTE_PARAMS`. 根据`StaticConfig.PASTE_PARAMS`具体情况，您应该将该顶行更改为以下内容之一：

```
# StaticConfig.PASTE_PARAMS is an empty dict
tempParam = {}

# All values in StaticConfig.PASTE_PARAMS are immutable
tempParam = dict(StaticConfig.PASTE_PARAMS) 
```

如果其中的任何值`StaticConfig.PASTE_PARAMS`是可变的，您可以使用[`copy.deepcopy`](http://docs.python.org/library/copy.html#copy.deepcopy)，但最好自己填充`tempParam`这些默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:36:57.280

如果`__postBodies`不是现在定义的类属性，而只是一个实例属性呢？

# phpdoc - @since 的 PHPDoc 用法

> ID：12145559
> 
> 赞同：0
> 
> 时间：2012-08-27T16:09:39.830
> 
> 标签：phpdoc

@since 用于显示创建函数的版本。如果我稍后修改该函数，我应该更改 @since 值还是做其他事情来表明发生了变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:56:46.790

“@since”的基本用例确实是仅在首次引入该方法时表示包版本。

但是，由于这个标签的内容实际上只是自由格式的文本，而且我不知道有任何文档软件用于特殊创建任何类型的其他文档元素（例如，按哪个版本介绍它们的方法组报告），那么我真的不关心以其他方式使用标签。

例如，将原始的“@since 2.0 foo() 引入”更改为“@since 2.7 foo($arg)”以表明 API 已更改。我什至可以使用*多个*标签来显示方法 API 的历史：

```
* @since 2.0 foo() introduced
* @since 2.7 foo($arg) added the $arg argument to the signature
* @since 2.9 foo($arg = 'default') set a default for $arg 
```

# jquery-ui - 使用相同 Ajax 的多个自动完成框

> ID：12145560
> 
> 赞同：1
> 
> 时间：2012-08-27T16:09:45.890
> 
> 标签：jquery-ui, jquery, jquery-selectors, autocomplete

我想要两个不同的自动完成框，但都在后台使用相同的 AJAX 方法。这是我的脚本

```
$(document).ready(function () {
    $("#SearchProject")
        .each(function () {
            var urlloc = "/Project/FindProjects";
            $(this).autocomplete({
                source: function (request, response) {
                    $.ajax({
                        url: urlloc, type: "POST", dataType: "json",
                        data: { searchString: request.term, maxResults: 10 },
                        success: function (data) {
                            response($.map(data, function (item) {
                                return { label: item.name, value: item.name, id: item.id }
                            }))
                        }
                    })
                },
                select: function (event, ui) {
                    $("[id$='ProjectID']").val(ui.item.id);
//                    alert(ui.item ? ("You picked '" + ui.item.label + "' with an ID of " + ui.item.id)
//                    : "Nothing selected, input was " + this.value);

                }
            });
        });
    }); 
```

我希望表单上的输入字段如下所示。

```
 <input id="SearchProject" name="SearchProject" type="text" value="" /><input  type="hidden" name="ProjectID" id="ProjectID" value="" />

    <input id="SearchProject2" name="SearchProject" type="text" value="" /><input type="hidden" name="ProjectID" id="ProjectID2" value="" /> 
```

自动完成选择完成后，我希望更新相应的隐藏字段。我如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:29:07.067

两种可能：

第一个（我更喜欢的那个）：将您的自动完成设置提取到一个方法中：

```
function configureAutocomplete(autoField, updatedField) 
```

您可以根据需要为尽可能多的自动完成字段调用此方法，并将两个 JQuery 选择器传递给它：自动完成字段的选择器和隐藏的更新字段。

另一种方法是将隐藏字段的 ID 基于自动完成字段的 ID。这将允许您使用 an`each`将行为附加到字段，但我认为这比它的价值更麻烦。

# ssh - 如何安全地存储和使用 ssh 密码以用于 phpseclib

> ID：12145561
> 
> 赞同：0
> 
> 时间：2012-08-27T16:09:54.453
> 
> 标签：ssh, phpseclib

我需要使用 phpseclib 通过 SSH 连接到我的服务器，但显然我的服务器的密码对我来说是世界上最敏感的！在知道它是安全的情况下，如何在以下代码中使用它？

```
$ssh = new Net_SSH2('www.littleninjamedia.co.uk');
if (!$ssh->login('$username', '$password')) {
    exit('Login Failed');
} 
```

我对散列和密码等有足够的了解，但我从来不需要保护一个真正重要的！有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:43:30.873

我找到了这个……这就是我认为我应该做的。

[在 codeigniter 中处理密码](http://www.haughin.com/2008/02/handling-passwords-in-codeigniter/)

显然，这仅在您使用我使用的 codeigniter 时才有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T03:07:46.677

如果您需要在 HTML POST 变量中输入密码并将 $_POST['password'] 传递给 $ssh 对象怎么办？

# eclipse - IBM RAD 中的 Eclipse 插件管理

> ID：12145567
> 
> 赞同：5
> 
> 时间：2012-08-27T16:10:21.193
> 
> 标签：eclipse, eclipse-plugin, ibm-rad, eclipse-marketplace

我安装了 RAD 7.5，发现 IBM 并没有我想象的那么好。RAD 的东西有它自己的“安装管理器”，它似乎不能解决任何依赖关系。有谁知道如何启用标准 Eclipse 的软件安装程序和/或 Eclipse Marketplace？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-08-22T13:56:26.907

这是您将 Marketplace 客户端插件添加到 RAD 7.x/8.x 的方式：

1.  帮助 / 安装新软件
2.  指向 “可用软件站点”中的 Eclipse Helios 站点[http://download.eclipse.org/releases/helios](http://download.eclipse.org/releases/helios)
3.  选择正确的版本（RAD 8.0 是 Helios）
4.  在过滤器文本控件中键入“市场”
5.  检查“通用工具/市场客户端”
6.  安装后重启 RAD

您现在应该在帮助菜单中看到 Eclipse Marketplace。

提示：这与 Eclipse Classic 中的过程相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T19:10:41.267

您应该能够在首选项中启用“经典安装”，然后使用传统安装程序引入 3rd 方功能。即便如此，您仍然需要使用 IBM 的安装管理器来应用来自 IBM/Rational 的修复、升级和新组件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-29T18:25:32.780

对于 RAD，版本 9.0.0：

尝试使用安装

[http://download.eclipse.org/releases/kepler/](http://download.eclipse.org/releases/kepler/)

选择“通用工具/市场客户端”

然后“下一步 - 完成”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T20:50:58.057

我使用 IBM 的 Rational Developer for Power Systems（我认为它与 RAD 具有相同的血统），并且所有正常的 Eclipse 插件和功能安装选项以及 Marketplace 都可用。

您的安装可能已损坏。

可能还值得打电话给 IBM，看看他们是否有助于确定为什么这些选项对您不可用。

# php - 在文件中重复 php 类

> ID：12145569
> 
> 赞同：-2
> 
> 时间：2012-08-27T16:10:38.243
> 
> 标签：php, class, require-once

我需要找到一种方法来跳过 require_once 错误，以防在文件中调用 2 个具有相同名称的 php 类。我有 2 个文件 a.php 和 b.php ，每个文件都在里面声明了 A 类。在 index.php 中，我首先包含一个声明了 A 类的.php 文件。同样在 index.php 中，我必须包含 c.php，它里面有 require_once b.php，因此我得到重复的类名错误并且脚本被停止。我可以找到解决方法吗？感谢您的回复

* * *

让我更好地解释一下。关于 Joomla，我构建了一个插件来覆盖组件模型和视图。我在插件中包含了我的模型和视图类，Joomla 使用它们而不是原始组件模型和视图类。当组件模块包含组件原始模型和带有 require_once 的视图类时，就会出现问题。由于我的插件没有使用原始模型类，因此原始模型类所在的文件不包含在 Joomla 中，模块 require_one 能够包含组件模型类，并且这些类与我的插件同名. 我只能更改我的插件代码和类，而不是组件类，第二个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T16:14:54.557

> 我需要找到一种方法来跳过 require_once 错误，以防在文件中调用 2 个具有相同名称的 php 类。

不，你没有。您不应该在同一个文件中有 2 个类。嗯，让我改写一下。您不能有两个具有相同名称的类（除非已命名空间）。但说真的，你不应该在 1 个文件中有两个类。

> 我有 2 个文件 a.php 和 b.php ，每个文件都在里面声明了 A 类。

我猜（/希望）它们不是同一个类，因为那会违反（强奸）[DRY 原则](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)。

> 我可以找到解决方法吗？

不要复制同一个类。如果两个类是不同的命名空间它。具有真实名称空间的新方式或旧方式：

```
namespace Lib\Your\Namespace; 
```

或者

```
class Lib_Your_Namespace 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:12:31.303

将 require 调用包装在

```
if(!class_exists('your_class_name')) {
     require_once('file_name');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T16:23:04.140

我认为命名空间 - 这就是你需要的

# php - php数组构造与显示

> ID：12145574
> 
> 赞同：-2
> 
> 时间：2012-08-27T16:10:45.583
> 
> 标签：php, arrays

我应该如何构造和检索 php 数组才能像这样显示它。

四月

```
Item | month, year, day 
Item | month, year, day 
Item | month, year, day 
Item | month, year, day 
```

可能

```
Item | month, year, day 
Item | month, year, day 
Item | month, year, day 
Item | month, year, day 
```

蚂蚁等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:17:05.583

这取决于您的数据集在将其添加到数组之前的样子。在不知道我会说你可以做一些非常简单的事情的情况下

```
$arr = array('Item 1' => '10, 2012, 5', 'Item 2' => '11, 2012, 6');

foreach ($arr as $akey => $aval) {
    echo $akey . " | " . $aval . "<br/>";
} 
```

输出：

项目 1 | 10, 2012, 5

项目 2 | 2012 年 11 月 6 日

应普遍要求，这里是一个多维示例

```
$arr = array('May' => array('Item 1' => '5, 2012, 5', 'Item 2' => '5, 2012, 6'), 'June' => array('Item 1' => '6, 2012, 5', 'Item 2' => '6, 2012, 6'), 'July' => array('Item 1' => '7, 2012, 5', 'Item 2' => '7, 2012, 6'));

foreach ($arr as $akey => $aval) {
    echo $akey . "<br/>";
    foreach ($aval as $mkey => $mval) {
        echo $mkey . " | " . $mval . "<br/>";
    }
} 
```

输出：

可能

项目 1 | 5, 2012, 5

项目 2 | 5, 2012, 6

六月

项目 1 | 2012 年 6 月 5 日

项目 2 | 6, 2012, 6

七月

项目 1 | 2012 年 7 月 5 日

项目 2 | 2012 年 7 月 6 日

# mongodb - DBCursor hasNext() 处理的记录比 DBCollection 实际拥有的记录多……为什么？

> ID：12145579
> 
> 赞同：3
> 
> 时间：2012-08-27T16:11:06.340
> 
> 标签：mongodb

我有一个 groovy 脚本，它使用 Mongo Java 驱动程序 mongo-java-driver-2.8.0.jar 来访问单个集合中的所有记录，更新任何与预期结构不匹配的记录。该脚本像冠军一样工作，但我不知道为什么它处理的记录比集合实际拥有的记录多。或者，更准确地说，dbCursore.hasNext() 迭代的记录多于集合实际拥有的记录。仅当脚本找到要更新的内容时才会发生这种情况。如果脚本在没有更新的情况下执行，则处理的总数是正确的。

hasNext() 是否“重新开始”或记录是否在迭代中移动（如果它们已更新）？

这是代码...

```
static def doIt( mongo, normalizer, isDryRun ) {
    def ttlProcessed = 0
    def ttlCandidates = 0
    def ttlUpdated = 0
    def lapCount = 0;
    def lapStartTime = System.currentTimeMillis();

    def db = mongo.getDB( "devices" )
    DBCollection dbCollection = db.getCollection( "profiles" )
    DBCursor dbCursor = dbCollection.find();
    while ( dbCursor.hasNext() ) {
        DBObject source = dbCursor.next();
        DBObject normalized = normalizer.normalize( source )
        // Only update if changed...
        if ( ! ( source.equals( normalized ) ) ) {
            ttlCandidates++
            if ( !isDryRun ) {
                BasicDBObject searchQuery = new BasicDBObject( "_id", normalized.get( "_id" ) )
                WriteResult result = dbCollection.update( searchQuery, normalized, false, false, WriteConcern.SAFE );
                ttlUpdated++
            }
        }
        ttlProcessed++;
        if ( ttlProcessed % 10000 == 0 ) {
            printErr "split: ${lapCount}, splitElapsed: ${calcElapsed( lapStartTime) } ms, elapsed: ${calcElapsed( startTime )} ms, processed: ${ttlProcessed}, candidates: ${ttlCandidates}, updated: ${ttlUpdated}"
            lapCount++
            lapStartTime = System.currentTimeMillis()
        }
    }
    printErr "split: ${lapCount}, splitElapsed: ${calcElapsed( lapStartTime) } ms, elapsed: ${calcElapsed( startTime )} ms, processed: ${ttlProcessed}, candidates: ${ttlCandidates}, updated: ${ttlUpdated}"
} 
```

如果运行更新任何记录， ttlProcessed 如何获得高于正在处理的集合计数的值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T16:20:53.453

这可能是因为更新导致文档移动（通常是因为增长）。如果文档确实增长并再次处理，它将被视为一次迭代，但假设您的更新是幂等的（我没有测试过），那么这不会是一个问题。

如果这是一个问题，您可以使用该`$snapshot` [选项](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%7B%7Bsnapshot%28%29%7D%7D)来解决此问题。我还建议阅读以下内容：

[http://www.mongodb.org/display/DOCS/How+to+do+Snapshotted+Queries+in+the+Mongo+Database](http://www.mongodb.org/display/DOCS/How+to+do+Snapshotted+Queries+in+the+Mongo+Database)

这些问题本质上是为什么像 mongodump 和 mongoexport 这样的工具会遍历 _id 索引（即`$snapshot`默认使用）。

如果您想首先防止移动，请查看“填充因子”页面上的此部分：

[http://www.mongodb.org/display/DOCS/Padding+Factor#PaddingFactor-ManualPadding](http://www.mongodb.org/display/DOCS/Padding+Factor#PaddingFactor-ManualPadding)

2.2 中还有一些选项可以在运行 compact 命令时设置填充：

[http://docs.mongodb.org/manual/release-notes/2.2/#padding-specifiable-on-compact-command](http://docs.mongodb.org/manual/release-notes/2.2/#padding-specifiable-on-compact-command)

# javascript - 通过引用 Javascript 中的另一个函数来传递对象方法

> ID：12145582
> 
> 赞同：2
> 
> 时间：2012-08-27T16:11:12.020
> 
> 标签：javascript, callback, javascript-objects

所以我一直试图让这个回调在一个对象内部工作，我只是想知道是否：

1）有可能，2）需要特殊的语法。

因此，不仅仅是有一个定期声明的函数：

```
function callback() {} 
```

并通过引用将其传递给另一个函数：

做某事（回调）

我试图传递一个包含函数的对象属性：

```
 {
     prop: function() {}
   } 
```

并将其作为回电发送。

问题是，传递 prop 的引用会引发错误：

```
doSomething(prop): 
```

抛出：`Uncaught SyntaxError: Unexpected token :`

如果需要完整的示例，请告诉我。

谢谢，肯

** 编辑 **

好的，经过一番混淆后，我正在输入一个相当完整的示例。

```
var obj = {
    init: function() {
        this.some_function(this.callback_function)
    },
    some_function: function(callback) {
      callback();
    },
    callback_function: function() {
      // Callback!
    }
} 
```

这会引发意外的令牌错误，除非我在将 this.callback_function 作为参数传递给 some_function() 时放入 ()。

感谢并抱歉之前没有发布更完整的示例。

肯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-05T14:37:19.053

我意识到这不是 OP 问题的解决方案，但我在谷歌上搜索“将对象方法作为回调传递”，结果出现了。我还找到了一个链接[http://bitstructures.com/2007/11/javascript-method-callbacks.html](http://bitstructures.com/2007/11/javascript-method-callbacks.html)帮助我了解如何在 js 中进行操作。高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T16:12:57.683

只需传递方法：

```
var obj = {
    prop: function() {}
};
doSomething(obj.prop); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T16:28:13.370

您在末尾输入错误的分号`doSomething(prop):`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T20:22:19.273

抱歉回复晚了（我正在度假），这是一个语法错误，我在我的对象方法中忘记了逗号分隔符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T02:53:58.907

当您`obj.func`作为参数执行时，它会传递`this`从范围中丢失的函数。

```
some_function: function(callback) {
    callback.call(this);
}, 
```

# http - 谷歌浏览器不会缓存内容

> ID：12145584
> 
> 赞同：2
> 
> 时间：2012-08-27T16:11:22.300
> 
> 标签：http, node.js, google-chrome, caching

我一直在寻找解决这个问题的方法，但到目前为止还没有。我在 Node.js/Express 中动态呈现 HTML 页面，通过 SHA256 散列 HTML 字符串生成 ETag，并通过 nginx 发送页面。出于某种原因，Google Chrome 不会缓存页面或为之前的 ETag 发送“If-None-Match”标头。

这是我的请求和响应标头：

要求：

```
GET / HTTP/1.1
Host: dev.logan.oikoi.co
Connection: keep-alive
Cache-Control: max-age=0
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_0) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.82 Safari/537.1
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: km_ai=Q%2FR9nmmebaNLthhixes8jxMubzQ%3D; km_uq=; kvcd=1346083163009; km_vs=1; km_lv=1346083163 
```

回复：

```
HTTP/1.1 200 OK
Server: nginx/1.2.3
Date: Sun, 26 Aug 2012 06:20:46 GMT
Content-Type: text/html; charset=utf-8
Transfer-Encoding: chunked
Connection: keep-alive
Vary: Accept-Encoding
X-Powered-By: Express
Cache-Control: public, max-age=0, must-revalidate, proxy-revalidate
Expires: Thu, 01 Jan 1970 00:00:00 GMT
ETag: "2e26404f4306e4d2a7c821f537aa3e714d655d260462f8a7fdd9f0a8ad501900"
Set-Cookie: connect.sid=rPrRyvqf3LhbilN0syPU3htr.776UPuqojSyF1YgS0AFcyac4qQtv%2FXF9TFSHQ96p6e8; path=/; expires=Sun, 26 Aug 2012 10:20:46 GMT; httpOnly; secure
Content-Encoding: gzip 
```

编辑：我忘了在我最初的帖子中提到，但 Firefox 缓存页面没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:21:15.260

您的回复有这些标题 -

> > Cache-Control: public, max-age=0, must-revalidate, proxy-revalidate
> > 
> > 过期：1970 年 1 月 1 日星期四 00:00:00 GMT

删除这些标题，你应该很好。

供参考 ：

1.  must-revalidate 强制浏览器在每次请求资源时发出请求
2.  Expires header 和 max-age=0 告诉浏览器不要缓存资源

# java - 从java永久设置环境变量

> ID：12145587
> 
> 赞同：3
> 
> 时间：2012-08-27T16:11:29.523
> 
> 标签：java

使用 Java，如何将环境变量永久添加到现有的环境变量中。

这样当我对 windows 或 Linux 进行重启操作时，这个环境变量仍然存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:57:56.027

你可能想看看[这个](https://stackoverflow.com/questions/6051775/using-java-to-do-a-windows-command-line-command)。

在 Windows 中，您可以[从命令行设置路径变量，](https://stackoverflow.com/questions/9546324/adding-directory-to-path-environment-variable-in-windows-xp)因此它应该可以解决问题。

我意识到这仅适用于 Windows。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:50:16.137

将 jdk 的路径从程序复制到 C:\Program Files\Java\jdk1.6.0\bin 并在用户变量中过去并放入 ;.; 最后并给出名字。并在系统变量中单击新建并输入名称并通过路径....并保存...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T08:53:41.430

转到命令提示符 .. 检查当前路径 >echo %path% 设置路径 >set path="C:\Program Files\Java\jdk1.6.0\bin" 现在输入 ok 检查并运行 java 程序

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T16:16:15.000

不是以任何跨平台的方式。在 Linux 中，这些通常通过 shell 初始化脚本进行控制。您必须编辑其中之一（取决于用户、系统和外壳类型）。在 Windows 中，这是通过系统配置控制的（我想有一些 Windows 特定的 API 可以修改这些）。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-27T16:26:41.403

环境变量是特定于平台的。Windows 将它们存储在注册表中。

*在注册表中，用户环境变量存储在 HKEY_CURRENT_USER\Environment，系统环境变量存储在 HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control\Session Manager\Environment（来自[http://demins.blogspot.co.il/2007/ 10/where-does-windows-xp-store-evrironment.html](http://demins.blogspot.co.il/2007/10/where-does-windows-xp-store-evrironment.html) )*

有很多方法可以从 java 访问 windows 注册表。`reg`例如，您可以使用具有到达命令行的名为的实用程序执行命令行。您还可以使用 JaWin、Jinterop、Jintegra 等互操作性 API 之一。您也可以参考我[在此处](http://alexradzin.blogspot.co.il/2011/01/access-windows-registry-with-pure-java.html)解释的解决方案。

在 linux 上，您可以使用命令行，例如`export MYVAR=myvalue`. `Runtime.exec()`我的意思是从 java 使用or执行这个命令行`ProcessBuilder`。问题是这个变量不会变得真正持久。在重新启动计算机之前，所有用户都可以看到它。要使其真正持久化，您必须修改用户登录脚本（例如`bashrc`，如果用户的默认 shell 是 bash，则大多数 linux 系统的文件）。

# objective-c - 动态 heightForRowAtIndexPath：包含许多（数千）个单元格

> ID：12145590
> 
> 赞同：0
> 
> 时间：2012-08-27T16:11:37.150
> 
> 标签：objective-c, uitableview

我在使用动态值时遇到了一些性能问题`heightForRowAtIndexPath:` （我知道这是这种方法，因为如果我设置静态值，响应能力会大大提高）。我的表格包含大约 3000 个单元格。

我理解为什么使用动态值时性能会受到影响（主要是因为方法中的计算必须对表中的每个单元格执行一次才能显示数据），但我不知道如何使其更有效.

在我遇到的许多类似问题中，建议的解决方案是使用`NSString`'`sizeWithFont`方法`heightForRowAtIndexPath:`来加快速度。我目前这样做，但表仍然需要大约 1.5 秒来加载（并重新加载，这有点频繁）。这太长了，我需要优化它。

我目前正在使用的代码（至少它的本质）如下：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell;
    UILabel *label = nil;

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

        label = [[UILabel alloc] initWithFrame:CGRectZero];
        // set up label..
        [[cell contentView] addSubview:label];

    }

    NSDictionary *dict = alphabetDict; //dictionary of alphabet letters (A-Z). each key contains an NSArray as its object
    CGFloat rightMargin = 50.f; //padding for the tableview's index titles

    NSString *key = [[[dict allKeys] sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)] objectAtIndex:indexPath.section];
    NSArray *array = [dict objectForKey:key];
    NSString *cellText = [array objectAtIndex:indexPath.row];

    //TABLE_WIDTH is 268.f, CELL_MARGIN is 14.f
    CGSize constraintSize = CGSizeMake(TABLE_WIDTH - (CELL_MARGIN * 2) - rightMargin, 20000.0f);
    CGSize labelSize = [cellText sizeWithFont:[UIFont systemFontOfSize:17] constrainedToSize:constraintSize lineBreakMode:UILineBreakModeWordWrap];
    [label setFrame:CGRectMake(CELL_MARGIN, CELL_MARGIN, TABLE_WIDTH - (CELL_MARGIN * 2) - rightMargin, labelSize.height)];
    [label setText:cellText];

    return cell;
}

-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    //TODO make this faster

    NSDictionary *dict = alphabetDict;
    CGFloat rightMargin = 50.f;

    NSString *key = [[[dict allKeys] sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)] objectAtIndex:indexPath.section];
    NSArray *array = [dict objectForKey:key];
    NSString *cellText = [array objectAtIndex:indexPath.row];

    CGSize constraintSize = CGSizeMake(TABLE_WIDTH - (CELL_MARGIN * 2) - rightMargin, 20000.0f);
    CGSize labelSize = [cellText sizeWithFont:[UIFont systemFontOfSize:17] constrainedToSize:constraintSize lineBreakMode:UILineBreakModeWordWrap];

    return labelSize.height + (CELL_MARGIN * 2) + 16.f;  
} 
```

有人可以指出我正确的方向以进一步简化此代码吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T18:07:56.543

我以前也遇到过类似的情况。我的解决方案是在执行 [tableView reloadData] 之前进行所有计算并将高度存储在名为 heightsArray 的 NSMutableArray 中。然后

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
   [heightsArray objectAtIndex:indexpath.row];
} 
```

上下滚动时不计算。从数组中读取。由于预先进行了计算，最初的延迟会更多，但就滚动时的性能提升而言，这是值得的。您还可以在后台线程上执行计算，从而节省处理时间。只需在您可以在后台线程上调用并准备您的高度数组的方法中完成所有这些操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T16:24:48.393

最耗时的部分`heightForRowAtIndexPath`是：

```
[[[dict allKeys] sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)] objectAtIndex:indexPath.section]; 
```

因此，您可以从添加一个属性开始`sortedKeys`并像这样使用它：

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *key = [sortedKeys objectAtIndex:indexPath.section];
    CGFloat rightMargin = 50.f;
    // ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T18:31:02.273

crypticcoder 有一个很好的建议。我会建议一种变体，它可能更灵活，并支持表更改（插入、删除、重新排序）。

创建一个作为 UITableViewCell 子类的类，并向其添加 cellHeight 属性和 ivar cellHeight_。以这种方式合成它：

```
@synthesize cellHeight=cellHeight_; 
```

使用类中的以下代码以惰性方式计算单元格高度：

```
-(CGFloat) cellHeight{
    if (cellHeight_ != 0)
        return cellHeight_;
    else {
        NSDictionary *dict = alphabetDict;
        CGFloat rightMargin = 50.f;

        NSString *key = [[[dict allKeys] sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)] objectAtIndex:indexPath.section];
        NSArray *array = [dict objectForKey:key];
        NSString *cellText = [array objectAtIndex:indexPath.row];

        CGSize constraintSize = CGSizeMake(TABLE_WIDTH - (CELL_MARGIN * 2) - rightMargin, 20000.0f);
        CGSize labelSize = [cellText sizeWithFont:[UIFont systemFontOfSize:17] constrainedToSize:constraintSize lineBreakMode:UILineBreakModeWordWrap];

        cellHeight_ = labelSize.height + (CELL_MARGIN * 2) + 16.f; 
        return cellHeight_; 
    }
} 
```

像 sch 一样，我不喜欢那里的那种，但如果这不是真正的性能问题，我就把它留在那里。

如果要更改单元格的内容，请确保将 cellHeight_ 重置为零，以便延迟重新计算（再次需要时）。

# php - 如何使用具有唯一 ID 的 insert_batch

> ID：12145592
> 
> 赞同：0
> 
> 时间：2012-08-27T16:11:37.530
> 
> 标签：php, mysql, codeigniter

我正在使用 codeignitor 的插入批处理功能向表中插入多行。

```
 $this->db->insert_batch('table', $sizes); 
```

我的 $sizes 数组看起来像这样

```
 $sizes = array(
   array(
      'size' => 'M' ,
      'product' => 'Hat' 
   ),
   array(
      'size' => 'L' ,
      'product' => 'Hat' 
   )
); 
```

我打算将带有这些值和唯一 ID 的单独行添加到我的数据库表中，但是当添加每个嵌套数组时，它会将 0 添加到 id 字段，而不是唯一 ID

我收到错误“键 'id' 的重复条目 '0'”

解决这个问题的最佳方法是什么？谢谢阅读！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T16:16:53.813

使用 AUTO_INCREMENT 制作您的唯一列

# jquery - 带有 JQuery 迷你图的剑道网格模板

> ID：12145601
> 
> 赞同：0
> 
> 时间：2012-08-27T16:12:00.300
> 
> 标签：jquery, templates, grid, kendo-ui, sparklines

有没有人有如何将 JQuery Sparklines 插件集成到 Kendo Grid 模板中的示例？

[JQuery 迷你图](http://omnipotent.net/jquery.sparkline/#s-about)

我认为这很简单，但每次我做类似的事情时：模板：`<span class="inlinebar">75,25,0,100</span>` 只有值 75,25,0,100 显示在网格中，而不是实际的迷你图。

如果有人可以发布示例或解决方案，我将不胜感激。谢谢！

代码示例：

```
<script>
$('.inlinebar').sparkline('html', {type: 'bullet'});    
$(document).ready(function() {                                              
        $("#grid").hide();

        var grid = $("#grid").kendoGrid({
                dataSource: {
                    transport: {
                        read: {
                            url: "/Services/testService",
                            dataType: "json",
                            type: "GET",
                            data: {                                
                            }
                        }
                    },
                    schema: {
                        model: {
                            fields: {
                                field1: {type: "number"},
                                field2: {type: "number"},
                                field3: {type: "number"}
                            }
                        }                
                    },
                    pageSize: 15
                },
                selectable:"cell",
                toolbar: kendo.template($("#template").html()), 
                height: 350,                
        filterable: true,        
        scrollable: true,
        sortable: true,                
        pageable: true,
                columns: [
                    {field: "field1", title: "Field 1"},
                    {field: "field2", title: "Field 2", template:'<span class="inlinebar">75,25,0,100</span>'},
                    {field: "field3", title: "Field 3"}
                    ]                          
                    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:41:03.777

您的代码有几个问题。

1.  `$('inlinebar').sparkline('html', {type: 'bullet'});`您没有为类使用正确的 jQuery 选择器（`.`前面缺少`inlinebar`）
2.  由于您是通过 ajax 加载数据，因此迷你图在您的 Kendo UI 网格有机会初始化之前执行，因此它现在的状态将永远无法工作。您需要在 Kendo 的`dataBound`事件中执行迷你图代码（请参阅此处[http:](http://docs.kendoui.com/api/web/grid#events) //docs.kendoui.c​​om/api/web/grid#events ）。这样，当迷你图执行时，数据和您的跨度就在那里。

# vb.net - 打包文件的VBscript

> ID：12145604
> 
> 赞同：0
> 
> 时间：2012-08-27T16:12:17.590
> 
> 标签：vb.net, vbscript, package, rename

我对VB非常生疏，因为我已经使用它两年了。我很快就会重新投入使用它，因为我现在比以往任何时候都更有理由使用它。现在我正在尝试创建一个 VB 脚本来帮助我修改一些文件。我目前需要一种方法来获取文件夹并以某种方式打包它们。我想做的是：

*   取一个带有客户名称的文件夹
*   使用所述客户端名称创建一个 zip 文件
*   首先添加一个不会改变的文件（ship.xml）
*   获取客户端文件夹的内容并添加到 zip 文件夹。
*   将 .zip 重命名为 .tar 格式

另外，如果您知道有关 VB 的任何好的网站教程，请告诉我。我正在使用 Visual Basic 2010 终极版。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T20:11:09.550

不知道您对客户端名称（计算机名称？）的确切含义，但这应该可以帮助您入门，您可以自己添加其余部分，否则您会生锈8>）

```
zip = "c:\myzip.zip"
source = "G:\script\zip"

set fso = createObject("Scripting.FileSystemObject")
set shell = createObject("shell.application")
'make empty zip
set file = fso.CreateTextFile(zip, True)
file.write("PK" & chr(5) & chr(6) & string(18,chr(0)))
file.close

set objFolder = shell.NameSpace(source)
set oZip = shell.NameSpace(zip)
if not oZip is nothing then
  'add files to zip
  oZip.CopyHere objFolder
  wait_until_zipped(zip)
  oZip.CopyHere "c:\ship.xml"
  wait_until_zipped(zip)
  'rename the zip to tar
  fso.MoveFile zip, "c:\myzip.tar"
end if

'cleanup
set oZip = Nothing
set shell = Nothing
set fso = Nothing

function wait_until_zipped(zip)
  set handle = fso.getFile(zip)
  do
    wscript.sleep 500
    max = handle.size
  loop while handle.size > max
end function 
```

# ruby - 从哈希渲染反转模板

> ID：12145606
> 
> 赞同：0
> 
> 时间：2012-08-27T16:12:18.363
> 
> 标签：ruby, inversion

是否可以从哈希中呈现反转模板？如果不是，如何构造一个与哈希相对应的复杂模板，例如：

```
{ :a => [ { :b => 'foo', :c => 'bar' }, { :d => 'blah', :e => 'blubb'} ] } 
```

不幸的是，用户指南没有显示这样的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T02:47:32.273

这取决于您要如何呈现散列。假设代码：

```
require 'inversion'

the_hash = { :a => [
    { :b => 'foo', :c => 'bar' },
    { :d => 'blah', :e => 'blubb'}
  ] } 
```

当然，您可以按原样渲染它：

```
<!-- prettyprint.tmpl -->
<code><?pp the_hash ?></code> 
```

进而：

```
tmpl = Inversion::Template.load( 'prettyprint.tmpl' )
tmpl.the_hash = the_hash
puts tmpl.render 
```

这将呈现为：

```
<!-- prettyprint.tmpl -->
<code>{:a=&gt;[{:b=&gt;"foo", :c=&gt;"bar"}, {:d=&gt;"blah", :e=&gt;"blubb"}]}</code> 
```

假设你想对哈希做一些更复杂的事情，比如渲染它的一些成员：

```
<!-- members.tmpl -->
A's first B is: <?call the_hash[:a].first[:b] ?> 
A's first C is: <?call the_hash[:a].first[:c] ?> 
A's second D is: <?call the_hash[:a][1][:d] ?>   
A's second E is: <?call the_hash[:a][1][:e] ?> 
```

其中（除了加载 'members.tmpl' 之外，使用与前一个示例相同的代码）将呈现如下：

```
<!-- members.tmpl -->
A's first B is: foo 
A's first C is: bar 
A's second D is: blah   
A's second E is: blubb 
```

但是构建一个像哈希一样的大型复杂数据结构，然后将其与模板合并并不是真正打算使用 Inversion 的方式。这个想法实际上是加载模板为您提供了一个带有 API 的 Ruby 对象，适合在渲染之前传递和增量添加内容。无需构建哈希，只需传递模板对象本身并在其上调用访问器，然后让它提取构建视图所需的内容：

```
tmpl.users = User.all
tmpl.company = "ACME Widgets, Pty"
tmpl.render 
```

这还具有更易于模拟的优点：

```
# (rspec)
tmpl = mock( "members template" )
tmpl.should_receive( :users ).with( User.all )
tmpl.should_receive( :company ).with( company_name )
tmpl.should_receive( :render ).and_return( "the rendered stuff" ) 
```

这从测试中完全删除了模板内容，并且只关注控制器应该向视图发送哪些消息。

[手册中](http://deveiate.org/code/Inversion-manual/examples.html)有一个功能相当完整的示例，以及[呈现它的代码](https://github.com/ged/inversion/blob/master/experiments/demo.rb)。

该库（及其文档）相当新，因此感谢您提出这个问题。我有一个未决的补丁可以将[手册](http://deveiate.org/code/Inversion-manual/)与 API 文档合并，这应该会有所帮助，但同时它可能是查找示例的最佳位置。

希望这可以帮助。我很乐意亲自回答更深入的问题（访问 FaerieMUD.org），或者通过[Github](https://github.com/ged/inversion)或[Bitbucket](https://bitbucket.org/ged/inversion)上的拉取请求接受补丁。

# facebook - facebook 中的照片属性

> ID：12145607
> 
> 赞同：0
> 
> 时间：2012-08-27T16:12:19.333
> 
> 标签：facebook

facebook 在上传到他们的网站后是否总是删除照片属性？有什么方法可以保留照片属性，即使它已上传。有没有一种方法可以检索上传到 facebook 的照片的照片属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:01:59.030

使用 FQL，您可以检索信息...

看看：http: [//developers.facebook.com/docs/reference/fql/photo/](http://developers.facebook.com/docs/reference/fql/photo/)

# c# - 使用参数访问 XML 节点以用作图像 URL

> ID：12145614
> 
> 赞同：1
> 
> 时间：2012-08-27T16:12:30.917
> 
> 标签：c#, asp.net, xml, c#-4.0

我有一个如下所示的 XML 文件：

```
<photos> <!-- this is the ROOT element -->

<User id='200901544'>~/images/image1.jpg</User>
<User id='200901566'>~/images/image7.jpg</User>

</photos> 
```

首先，我想访问`User`元素以获取`User`具有`id`属性的图像 URL `200901544`。然后，我想将该 URL 绑定到图像按钮。

**这是我的问题：**我还想将`id`属性与来自用户的字符串（即 id）进行比较，以检查它是否有效。用于在网站`id`中显示照片。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T16:15:31.520

您可以使用 LINQ2XML

```
XElement doc=XElement.Load("yourXML.xml");   
string dp=doc.Elements("User").Where(x=>x.Attribute("id").Value==yourAttribute).Select(y=>y.Value).First(); 
```

`yourAttribute`是您要比较的属性

# windows - 如何使用 .Pem 文件进行代码签名？

> ID：12145617
> 
> 赞同：4
> 
> 时间：2012-08-27T16:12:49.323
> 
> 标签：windows, linux, visual-studio-2010, code-signing, pem

我正在尝试使用数字证书对我的应用程序组件进行代码签名。证书格式为 .Pem

我参考了下面的 url 并尝试使用 Visual Studio SignTool.exe 实现代码签名

[代码签名](http://msdn.microsoft.com/en-us/library/8s9b9yaz.aspx)

```
C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC>"C:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v7.0A\\Bin\signtool.exe"  sign /d "C:\\Users\\hpara\\Desktop\\SignCert\\Test.exe"  /f "C:\\Users\\guest\\Desktop\\SignCert\\Test.pem"SignTool 
```

Signtool.exe 返回错误：“错误：缺少文件名。”。

**问题：**

1.  我可以使用 signtool.exe 和 .pem 文件对代码进行签名吗？

我的实际构建环境是在 Linux 上。仅出于测试目的，我将证书文件复制到 Win 7 计算机并尝试使用 Visual Studio signtool.exe 对应用程序进行签名。

**签名证书请求 (csr)**在Linux 机器上生成。最后，我需要在 Linux 机器上签署应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T19:26:40.073

如何使用 Pem 文件进行代码签名？

**解决方案：**

第 1 步：从 .Pem 文件生成 .pfx 文件

```
openssl pkcs12 -inkey MyprivateKey.key -in MyCertificate.pem -export -out MyCert.pfx 
```

第 2 步：使用 .pfx 文件对代码进行签名（例如：Microsoft SDK SignTool.exe）

```
signtool sign /f "MyCert.pfx" /p password /t http://timestamp.verisign.com/scripts/timestamp.dll "myapp.exe" 
```

# c# - 本地化数据验证错误

> ID：12145618
> 
> 赞同：-2
> 
> 时间：2012-08-27T16:12:56.480
> 
> 标签：c#, .net, wpf, idataerrorinfo

当我使用：

```
[Required(ErrorMessageResourceType = typeof (Resources), ErrorMessageResourceName = "MessageIISPathRequired")]
[CustomValidation(typeof (IISVM), "WebsiteRootExists", ErrorMessageResourceType = typeof (Resources), ErrorMessageResourceName = "MessageIISPathInvalid")]
public string WebsiteRoot
{
    get { return _data.WebsiteRoot; }
    set { SetProperty("WebsiteRoot", () => _data.WebsiteRoot == value, () => _data.WebsiteRoot = value); }
} 
```

我收到一条空消息，并且在我的资源文件中该消息在那里并且是公开的。这不是 MVC 应用程序，它是 WPF 桌面应用程序，在我将其转换为使用资源之前，我的所有验证都有效。

我认为这与我如何抓住错误有关：

```
private static ValidationAttribute[] GetValidations(PropertyInfo property)
{
    return property.GetCustomAttributes(typeof (ValidationAttribute), true) as ValidationAttribute[];
}

private static Func<IISVM, object> GetValueGetter(PropertyInfo property)
{
    LinqExpress.ParameterExpression instance = LinqExpress.Expression.Parameter(typeof (IISVM), "i");
    LinqExpress.UnaryExpression cast =
        LinqExpress.Expression.TypeAs(LinqExpress.Expression.Property(instance, property),
                                      typeof (object));
    return (Func<IISVM, object>) LinqExpress.Expression.Lambda(cast, instance).Compile();
} 
```

而我的`IDataErrorInfo`实现

```
public string this[string columnName]
{
    get
    {
        if (PropertyGetters.ContainsKey(columnName))
        {
            object value = PropertyGetters[columnName](this);
            string[] errors =
                Validators[columnName].Where(v => !v.IsValid(value)).Select(v => v.ErrorMessage).ToArray();
            return string.Join(Environment.NewLine, errors);
        }

        return string.Empty;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:39:42.417

问题已修复。我不得不使用反射并在调用该方法时尝试验证该属性，而不是尝试使用上面的静态方法来计算它。

```
if (PropertyGetters.ContainsKey(columnName))
            {
                ValidationContext context = new ValidationContext(this, null, null)
                {
                    MemberName = columnName
                };

                List<ValidationResult> results = new List<ValidationResult>();
                var value = GetType().GetProperty(columnName).GetValue(this, null);

                return !Validator.TryValidateProperty(value, context, results)
                           ? string.Join(Environment.NewLine, results.Select(x => x.ErrorMessage))
                           : null;
            }

            return null; 
```

# firefox - 来自 HTML 表单的 Firefox 扩展和完整文件路径？

> ID：12145622
> 
> 赞同：1
> 
> 时间：2012-08-27T16:13:02.643
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

我已经使用 Addon SDK 构建了一个 Firefox 扩展，它打开了一个新选项卡，其中包含扩展目录中的 HTML 页面，并将内容脚本附加到它：

```
function openHtmlLoadFormTab(htmlFileName, jsWorkerFileName) {
    tabs.open({
        url: data.url(htmlFileName),
        onReady: function(tab) {
            var tabWorker = tab.attach({
                contentScriptFile: [ data.url(jsJquery), data.url(jsWorkerFileName) ]
            });
        }
    });
} 
```

我`<input type="file">`在 HTML 文件中有一个和一些处理 JS 文件中的“提交”事件的代码（这些文件分别由`htmlFileName`和给出`jsWorkerFileName`）

由于安全原因，我无法使用 .js 访问 JS 中的完整文件路径`document.getElementById('uploadid').value`。我只得到文件名。

但是，由于这是一个 Firefox 扩展，我想知道是否有办法覆盖这个限制？

我一直在研究`netscape.security.PrivilegeManager.enablePrivilege("UniversalFileRead")`，`mozFullPath`但我无法让它发挥作用。我相信它已经被弃用了？

另一种解决方案是构建一个基于 XUL 的 UI 并以某种方式提示输入文件，但我想确定是否有任何方法可以让它在 HTML 中工作。

## 首先使用小示例代码进行编辑

我构建了一个小的示例扩展来说明我是如何做事的。

### lib/main.js

```
var self = require('self');
var tabs = require('tabs');
var data = self.data;
var jsLoadForm = "load-form.js", htmlLoadForm = "load-form.html";
var jsJquery = 'jquery-1.8.0.min.js';

exports.onUnload = function(reason) {};
exports.main = function(options, callbacks) {
    // TODO: remove this debugging line
    openHtmlLoadFormTab(htmlLoadForm, jsLoadForm);
};

function openHtmlLoadFormTab(htmlFileName, jsWorkerFileName) {
    tabs.open({
        url: data.url(htmlFileName),
        onReady: function(tab) {
            var tabWorker = tab.attach({
                contentScriptFile: [ data.url(jsJquery), data.url(jsWorkerFileName) ]
            });
        }
    });
} 
```

### 数据/加载-form.html

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Form</title>

        <script lang="text/javascript">
            function fileChanged(e) {
                // this is just the file name
                alert("html js: files[0].name: " + e.files[0].name);

                // mozFullPath is indeed empty, NOT undefined
                alert("html js: files[0].mozFullPath: " + e.files[0].mozFullPath);
            }
        </script>
    </head>

    <body>
        <form name="my-form" id="my-form" action="">
            <div>
                <label for="uploadid1" id="uploadlabel1">File (JS in HTML):</label>
                <input type="file" name="uploadid1" id="uploadid1" onchange="fileChanged(this)"/>
            </div>
            <div>
                <label for="uploadid2" id="uploadlabel2">File (JS in content script): </label>
                <input type="file" name="uploadid2" id="uploadid2" onchange="fileChangedInContentScript(this)"/>
            </div>
            <div>
                <label for="uploadid3" id="uploadlabel3">File (JS using jQuery in content script):</label>
                <input type="file" name="uploadid3" id="uploadid3" />
            </div>
        </form>
    </body>
</html> 
```

### 数据/加载-form.js

```
$(document).ready(function() {
    $("#uploadid3").change(function(e) {
        // in jquery, e.files is null
        if(e.files != null)
            console.log("jquery: e.files is defined");
        else
            console.log("jquery: e.files is null");

        // this works, prints the file name though
        console.log("$('#uploadid3').val(): " + $("#uploadid3").val());
        // this is undefined
        console.log("$('#uploadid3').mozFullPath: " + $("#uploadid3").mozFullPath);
    });
});

// this handler never gets called
function fileChangedInContentScript(e) {
    alert("js content script: filechanged in content script called");
} 
```

正如您在 main.js 中看到的，我使用了从 jQuery 网站下载的 jquery-1.8.0.min.js。

注意：当我在 main.js 中打开选项卡时，我也尝试了没有将 jQuery 作为内容脚本包含在内的这些，但没有运气。

结论是，`mozFullPath`当我从嵌入在 HTML 页面中的 JS 访问它时，它确实是空的，我找不到从 jQuery 访问的方法`mozFullPath`，也找不到`onchange`在 load-form.html 中添加处理程序的方法，该处理程序定义在 load-表单.js

## 在 load-form.js 内容脚本中使用 onchange 处理程序进行第二次编辑

我将以下代码添加到 load-form.js 以捕获 onchange 事件。我还从 main.js 中删除了 jQuery 内容脚本

```
document.addEventListener("DOMContentLoaded", function() {
    try {
        document.getElementById("uploadid2").addEventListener('change', function(e) {
            console.log("addeventlistener worked!");    
            console.log("e: " + e);
            console.log("e.target: " + e.target);
            console.log("e.target.files: " + e.target.files);
            console.log("e.target.files[0].name: " + e.target.files[0].name);
            console.log("e.target.files[0].mozFullPath: " + e.target.files[0].mozFullPath);
        });

        console.log('added event listener')
    } catch(e) {
        console.log('adding event listener failed: ' + e);
    }
}, false); 
```

这仍然为 mozFullPath 输出一个空字符串：

```
info: added event listener
info: addeventlistener worked!
info: e: [object Event]
info: e.target: [object HTMLInputElement]
info: e.target.files: [object FileList]
info: e.target.files[0].name: test.sh
info: e.target.files[0].mozFullPath: 
```

反正有没有获得所需的权限？我怎样才能走上这条完整的道路？我需要完整路径，以便可以将其传递给扩展程序启动的应用程序。（有一些解决方法我可以在没有完整路径的情况下完成，但它们会降低扩展的质量）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:48:42.513

`fileInput.value`属性意味着网页可以访问，所以它只会给你文件名，而不是完整路径 - 网页没有理由知道你机器上的完整路径。但是，作为特权扩展，您应该能够访问该[`File.mozFullPath`属性](https://developer.mozilla.org/en-US/docs/DOM/File#Properties)。在这种特殊情况下，您会这样做：

```
var files = document.getElementById('uploadid').files;
if (files.length > 0)
{
  // Assuming that only one file can be selected
  // we care only about the first entry
  console.log(files[0].mozFullPath);
} 
```

最大的问题当然是你的代码是否被允许访问`File.mozFullPath`。我怀疑附加 SDK 中的内容脚本没有必要的权限。主扩展代码将拥有特权，但从那里进入输入字段很难......

# php - 发送标头后重定向 php 脚本

> ID：12145625
> 
> 赞同：1
> 
> 时间：2012-08-27T16:13:19.580
> 
> 标签：php

我有一个带有表单和提交按钮的 html 页面。

一旦我点击提交所有表单数据，多亏了 fpdf，就会变成 pdf。此 pdf 已毫无问题地发送到我的电子邮件。

构建这个小页面，一切都正常工作，我能够将我的用户重定向到感谢页面，而这段代码没有问题：

```
header("Location: /thank-you.php",303);
exit(); 
```

一旦我实现了 pdf 文件，保存最终重定向就停止了工作。

我已经使用 fpdf 轻松实现了 pdf 保存：

```
$pdf->Output("filename.pdf", "D"); 
```

在 stackoverflow 和所有互联网上阅读，我了解到您不能发送两个标头。

我想用javascript解决问题，所以我在pdf生成之后

```
echo "<script language=javascript>
window.location = 'thanks.html'
</script>"; 
```

但没有运气。

当浏览器下载 pdf 文件时，php 页面只是“停止”。

有机会解决这个问题吗？

编辑：

我得到的所有建议（感谢大家）都让我明白了同一点：使用感谢页面来处理 pdf 保存。对我来说听起来很棒。

我尝试使用简单的 $pdf->Output(); 准备一个thankyou.php 页面；在里面。它没有用......所以我想在我的 create.php 中使用包含（所有魔法发生在哪里：pdf创建，电子邮件发送，插入数据库等）：

```
<?php
include("create.php");
$pdf->Output();
?> 
```

仍然没有运气。

我的想法有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T16:18:01.870

你应该反过来处理这个问题。

将用户发送到感谢页面，然后在该感谢页面上执行`$pdf->Output()`. 那应该做你想做的事。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T16:18:11.380

网页/HTTP 是一个请求-响应系统。浏览器发送*一个*请求，只有*一个*响应。您根本无法使用 PDF*和*重定向或 PDF*和*一些 Javascript 进行响应。

典型的做法是首先显示感谢页面，然后在此页面内使用 Javascript 重定向到文件下载。这样页面就会保持不变并且文件会下载。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T16:20:45.613

您可以让thank-you.php 发送PDF 文件。提交表单后，将用户发送到感谢页面，然后感谢页面将向用户发送 PDF 文件。这样，感谢页面是可见的，并且在下载 PDF 文件后该页面仍然可见。

# ios - 移动到后台后保持调度队列运行 5 秒

> ID：12145627
> 
> 赞同：2
> 
> 时间：2012-08-27T16:13:28.293
> 
> 标签：ios, objective-c-blocks, grand-central-dispatch

当用户将应用程序移动到后台时，我正在使用串行调度队列来序列化一些网络请求。

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    dispatch_queue_t opQ = dispatch_queue_create("com.myapp.network", NULL);
    dispatch_async(opQ, ^{
        [self sendNetworkData1];
        [self sendNetworkData2];
        [self sendNetworkData3];
    });
} 
```

问题是当他们在我创建的这个队列上运行时，应用程序即使在它应该的 5 秒内也不会保持活动状态。

相反，当我在队列外发送相同的请求时，它们的发送时间大约为 8 秒。但应用程序随后崩溃。

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
        [self sendNetworkData1];
        [self sendNetworkData2];
        [self sendNetworkData3];
} 
```

我还想把剩下的写在磁盘上，以便下次用户打开应用程序时发送。

实现这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T20:10:43.383

当应用程序进入后台时，如果它需要额外的时间来完成某些任务，您将需要通知操作系统。详细文档在这里：http: [//developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)。这是一个快速而肮脏的补丁。

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
     __block UIBackgroundTaskIdentifier backgroundTask; //Create a task object

    backgroundTask = [application beginBackgroundTaskWithExpirationHandler: ^ {
        [application endBackgroundTask:background_task]; 
        backgroundTask = UIBackgroundTaskInvalid; //Set the task to be invalid
     }];

    dispatch_queue_t opQ = dispatch_queue_create("com.myapp.network", NULL);
    dispatch_async(opQ, ^{
        [self sendNetworkData1];
        [self sendNetworkData2];
        [self sendNetworkData3];
        [application endBackgroundTask:background_task]; 
        backgroundTask = UIBackgroundTaskInvalid; //Set the task to be invalid
    });
} 
```

底线是你通知应用程序需要在后台运行 beginBackgroundTaskWithExpirationHandler: 然后当你完成时你调用 endBackgroundTask: 来通知操作系统你在后台完成了处理。最后确保将 backgroundTask 变量重置为 UIBackgroundTaskInvalid。

# c++ - 如何打开 wxWidgets 对话框？

> ID：12145631
> 
> 赞同：0
> 
> 时间：2012-08-27T16:13:40.007
> 
> 标签：c++, wxwidgets

在 wxWidgets 中，如何在代码中打开一个对话框（如选项之一）？

我已经用谷歌搜索并搜索了它，但没有任何结果！任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:22:44.937

请参阅此页面上的代码示例：http: [//docs.wxwidgets.org/stable/wx_wxdialog.html#wxdialog](http://docs.wxwidgets.org/stable/wx_wxdialog.html#wxdialog)

> ```
> void AskUser()
> {
>     MyAskDialog dlg(...);
>     if ( dlg.ShowModal() == wxID_OK )
>         ...
> 
>     // no need to call Destroy() here
> } 
> ```

# c# - 跟踪多线程应用程序中的任务编号

> ID：12145633
> 
> 赞同：1
> 
> 时间：2012-08-27T16:13:49.307
> 
> 标签：c#, multithreading

我正在编写一个多线程应用程序，其中一部分代码必须是线程安全的才能跟踪任务编号。

我有这个方法：

```
private void IncrementTaskNumber() {
   Interlocked.Increment(ref _TaskNumber);
} 
```

_TaskNumber 是同一类中的私有 int。问题是，这会引发“A 属性、索引器或动态成员访问可能不会作为 out 或 ref 参数传递”异常。为了解决这个问题，我这样做：

```
private void IncrementTaskNumber() {
   int _taskNum = _TaskNumber;
   Interlocked.Increment(ref _taskNum);
   _TaskNumber = _taskNum;
} 
```

这仍然是线程安全的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T16:20:29.067

> _TaskNumber 是同一类中的私有 int。

`_TaskNumber`必须是一个私有*领域*才能工作。您可能将其作为私有财产。

将其定义为：

```
private int _TaskNumber; 
```

它会起作用。

另请注意，您当前的解决方法引入了竞争条件 - 您通过使用临时变量来有效地摆脱原子增量，这首先破坏了使用的目的`Interlocked`。您需要直接增加该字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T16:23:18.120

您似乎在该`IncrementTaskNumber`方法中没有锁定机制。除非你只从一个地方调用它，否则它不是线程安全的。你想做的第一个实现，即使它会工作也不会，因为`Interlocked.Increment(ref _TaskNumber);`可能在第一个实现之前第二次被调用，并写入 ref 参数。

编辑：如果你想让它成为线程安全的，你可以像这样修改 yoru 方法：

```
private void IncrementTaskNumber()
{
    lock (_TaskNumber)
        _TaskNumber++;
} 
```

编辑 2：（如果使用`lock`对您的应用程序来说成本太高，您可能需要研究其他解决方案。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T16:42:57.183

这绝对不是线程安全的：

```
private void IncrementTaskNumber() {
   int _taskNum = _TaskNumber;
   Interlocked.Increment(ref _taskNum);
   _TaskNumber = _taskNum;
} 
```

因为执行序列的线程可能在这 3 个操作之间被中断。这将不起作用，除非您引入一个循环，如果同时本地值发生更改，该循环会不断重试递增，但这基本上意味着您正在重新实现`Interlocked.Increment`using `Interlocked.Increment`。:)

只需创建`_TaskNumber`一个*成员*变量，而不是属性。

# sql - PostgreSQL - 替换 HTML 实体

> ID：12145634
> 
> 赞同：6
> 
> 时间：2012-08-27T16:13:53.317
> 
> 标签：sql, regex, postgresql, replace

我刚刚开始了从我们的数据库中删除 HTML 实体的任务，因为我们做了很多爬虫，而一些爬虫在输入时没有这样做:(

所以我开始写一堆看起来像的查询；

```
UPDATE nodes SET name=regexp_replace(name, '&#xe0;', 'à', 'g') WHERE name LIKE '%#xe0%';
UPDATE nodes SET name=regexp_replace(name, '&#xe1;', 'á', 'g') WHERE name LIKE '%#xe1%';
UPDATE nodes SET name=regexp_replace(name, '&#xe2;', 'â', 'g') WHERE name LIKE '%#xe2%'; 
```

这显然是一种非常幼稚的方法。我一直在试图弄清楚解码功能是否可以做一些聪明的事情；也许通过 regex like 抓取 html 实体`/&#x(..);/`，然后*仅*将`%1`部分传递给 ascii 解码器，并重建字符串......或其他东西......

我应该继续查询吗？大概只有40个左右。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T19:30:11.527

使用 pl/perlu 编写函数并使用此模块[https://metacpan.org/pod/HTML::Entities](https://metacpan.org/pod/HTML::Entities)

当然你需要安装 perl 并且 pl/perl 可用。

**1）** 首先创建程序语言pl/perlu：

```
CREATE EXTENSION plperlu; 
```

**2）**然后创建一个这样的函数：

```
CREATE FUNCTION decode_html_entities(text) RETURNS TEXT AS $$
    use HTML::Entities;
    return decode_entities($_[0]);
$$ LANGUAGE plperlu; 
```

**3）**然后你可以像这样使用它：

```
select decode_html_entities('aaabbb&amp;.... asasdasdasd &hellip;');
   decode_html_entities    
---------------------------
 aaabbb&.... asasdasdasd …
(1 row) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T12:09:23.117

您可以使用 xpath（HTML 编码的内容与 XML 编码的内容相同）：

```
select 
  'AT&amp;T' as input ,
  (xpath('/z/text()', ('<z>' || 'AT&amp;T' || '</z>')::xml))[1] as output 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-20T00:23:18.880

这就是我使用 PG10 在 Ubuntu 18.04 上工作所需要的，而 Perl`&comma;`出于某种原因没有解码某些实体。所以我使用了Python3。

从命令行

```
sudo apt install postgresql-plpython3-10 
```

从您的 SQL 界面：

```
CREATE LANGUAGE plpython3u;

CREATE OR REPLACE  FUNCTION htmlchars(str TEXT) RETURNS TEXT AS $$
    from html.parser import HTMLParser
    h = HTMLParser() 
    if str is None:
        return str
    return h.unescape(str);
$$ LANGUAGE plpython3u; 
```

# c - 在 C 中将 int 位移 32 次

> ID：12145636
> 
> 赞同：3
> 
> 时间：2012-08-27T16:13:55.003
> 
> 标签：c, bit-shift

我有一个特定的 C 位移场景，我认为 Stack Overflow 尚未涵盖该场景。（如果是的话，我还没找到！）

本练习使用`signed int`s 作为数据类型。

取值`0x80000000`（最高有效位仅为 1。）

使用算术右移（我的做法）在机器上将其右移一次。

结果 = `0xC0000000`（最左边字节中的 1100 0000）。

继续移动它，你应该从左到右填充它们。

结果 = `0xFFFFFFFF`（全部。）

**但是：** 尝试相同的示例，但移动一个额外的位置，全部一起：

`0x80000000 >> 0x00000020`（右移 32 次）

你的结果？我不知道。我的结果不是全部。事实上，我得到了`0x00000001`这不是我想要的行为。为什么是这样？它是特定于机器的吗？

*（背景：家庭作业将我的操作限制为几个位运算符来解决难题。这是难题的一个方面，但远非整个问题。）*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T16:21:17.397

这是未定义的行为

[为什么 32 位整数的左位移“<<”在使用超过 32 次时不能按预期工作？](https://stackoverflow.com/questions/7401888/why-doesnt-left-bit-shift-for-32-bit-integers-work-as-expected-when-used)

这意味着您应该像避免瘟疫一样避免它。这里有一些链接，包括“每个 C 程序员应该了解的未定义行为”： http: [//lwn.net/Articles/511767/](http://lwn.net/Articles/511767/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-27T16:17:02.313

移动操作数的位数具有未定义的行为，这就是您得到“意外”结果的原因。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T16:20:15.277

这是来自 C99 标准的引用：

6.5.7 移位运算符 [...]

3 [...] 如果右操作数的值为负数或大于或等于提升的左操作数的宽度，则行为未定义。

归功于[原始来源](http://bytes.com/topic/c/answers/591307-shifting-unsigned-long-long-values-64-bits)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T16:26:23.513

您不能移动超过其宽度的值。一个 int 数的 with 是多少？好吧，在 32 位系统中，它是 32 位的。如果您尝试在 gcc 中移动超过 32 的 int，则会收到以下警告：

```
warning: right shift count >= width of type [enabled by default] 
```

如果你想得到`0xFFFFFFFF`你必须转移 31 次，而不是 32 次。想想看！

# curl - 卷曲 w3c 链接器

> ID：12145638
> 
> 赞同：0
> 
> 时间：2012-08-27T16:14:38.963
> 
> 标签：curl, hyperlink

我想从我尝试过的命令行中使用 w3c 链接检查器

```
curl http://validator.w3.org/checklink?uri=http%3A%2F%2Fwww.paginasargentina.info%2F&summary=on&hide_redirects=on&hide_type=all&recursive=on&depth=&cookie=set&check=Check >> check.html 
```

需要它来递归检查链接的文档

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:11:19.163

您应该用引号将 url 包裹起来，这应该可以工作（现在由于＆符号而出现问题 - 它使您的 curl 命令在后台运行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:13:53.797

不要尝试使用链接检查器的公共实例。W3C 提供[了一个本地可安装的版本](http://validator.w3.org/docs/checklink#install)（其中包括[一个命令行实用程序](https://metacpan.org/module/checklink)）。

这取决于 Perl，它[是免费下载的](http://www.perl.org/get.html)。

# php - 查找具有属性的元素 - SimpleXML xpath

> ID：12145639
> 
> 赞同：0
> 
> 时间：2012-08-27T16:14:41.490
> 
> 标签：php, xml, xpath, simplexml

我正在尝试从我的 xml 中选择一个具有特定属性“id”的元素。这是我的xml：

```
<listitems>
  <item id="1">
    <name>item 1</name>
  </item>
  <item id="2">
    <name>item 2</name>
  </item>
  <item id="3">
    <name>item 3</name>
  </item>
</listitems> 
```

这是 php 文件：

```
<?php
$simplexml = simplexml_file_load('test.xml');
$item = $simplexml->xpath('item[@id="1"]');
?> 
```

然后，如果我尝试，例如：

```
<?php $item->addchild('description','textdescription'); ?> 
```

我在最后一行出现这个错误：“致命错误：在非对象上调用成员函数 addchild()”

有什么问题吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-27T16:18:03.563

SimpleXML 的 xpath() 始终返回一个元素数组，即使您通过 id 指定它也是如此。要向其中添加内容，您需要从该数组中提取特定元素。

尝试这个：

```
$items = $simplexml->xpath('item[@id="1"]');
$item = $items[0];
$item->addchild('description','textdescription'); 
```

或者更好的是，验证您是否确实找到了具有该 ID 的内容：

```
$items = $simplexml->xpath('item[@id="1"]');
if (count($items) == 1)
{
    $item = $items[0];
    $item->addchild('description','textdescription');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:18:41.597

在这种情况下，xpath 不知道“id”是唯一属性，就像 xpath 将是非唯一的其他属性一样。尝试：

```
<?php $item[0]->addchild('description','textdescription'); ?> 
```

选择数组中第一个返回的孩子。

# extjs - Ext JS 4：将 Ext.grid.Panel 中的所有列显示为自定义选项

> ID：12145641
> 
> 赞同：1
> 
> 时间：2012-08-27T16:14:51.643
> 
> 标签：extjs, grid, show, multiple-columns

是否有可以在 ExtJS 中的 Ext.grid.Panel 上调用的函数，如果其中一些列默认隐藏，则可以使所有列可见？每当最终用户需要显示隐藏的列时，他们需要单击每一列。下面，我有一些代码可以在您选择字段标题时添加自定义菜单选项。我想执行此功能，以便显示所有列。

作为下面的示例，我默认隐藏了“项目 ID”和“用户创建”。通过选择“选择所有列”将打开这些列，因此它们显示在列表视图中。

```
 listeners: {

            ... 

            },
            afterrender: function() {
                var menu = this.headerCt.getMenu();
                menu.add([{
                    text: 'Select All Columns',
                    handler: function() {
                        var columnDataIndex = menu.activeHeader.dataIndex;
                        alert('custom item for column "'+columnDataIndex+'" was pressed');
                    }
                }]);           
            }
        }
    }); 
```

![在此处输入图像描述](../Images/1500f1a3e2bc44812ced1fb5d1690742.png)

============================

# 答案（带代码）：

这是我根据下面 Eric 的代码决定做的事情，因为隐藏所有列是愚蠢的。

```
 afterrender: function () {
                var menu = this.headerCt.getMenu();
                menu.add([{
                    text: 'Show All Columns',
                    handler: function () {
                        var columnDataIndex = menu.activeHeader.dataIndex;
                        Ext.each(grid.headerCt.getGridColumns(), function (column) {
                            column.show();
                        });
                    }
                }]);
                menu.add([{
                    text: 'Hide All Columns Except This',
                    handler: function () {
                        var columnDataIndex = menu.activeHeader.dataIndex;
                        alert(columnDataIndex);
                        Ext.each(grid.headerCt.getGridColumns(), function (column) {
                            if (column.dataIndex != columnDataIndex) {
                                column.hide();
                            }
                        });
                    }
                }]);
            } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T17:01:08.553

如果你不需要任何特殊的逻辑，你可以尝试这样的事情：

```
Ext.each(grid.headerCt.getGridColumns(), function(column){
    column.show();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T21:37:02.830

我也必须这样做，起初我试图实现一个像 Eric 一样的解决方案，但它在较慢的计算机上产生了主要的滞后问题。在显示每一列后，它会在网格上进行完整的组件布局。

我用这个规避了这个：

```
grid.suspendLayout = true;
Ext.each(grid.headerCt.getGridColumns(), function(column) {
    column.show();
});
grid.suspendLayout = false;
grid.doComponentLayout(); 
```

# c++ - 不使用指针遍历 C 样式数组

> ID：12145643
> 
> 赞同：4
> 
> 时间：2012-08-27T16:15:14.867
> 
> 标签：c++, arrays, pointers, compiler-errors, const-pointer

我正在学习指针算术，并且有一段代码给了我很长一段时间的错误。任何帮助将不胜感激。（我在 SO 上找不到它）

```
int arr [] = {1, 2, 3, 4, 5} ;
for (int i = 0 ; i < 5 ; i++)
{
    cout << *arr ;
    arr++ ;
}
cout << *arr << endl ; 
```

我无法理解我在代码块中遇到的错误。我得到这个声明。

```
 error: lvalue required as increment operand|
    ||=== Build finished: 1 errors, 0 warnings ===| 
```

在这段代码中，我必须在不取消引用或使用 `[]` 运算符的情况下迭代数组。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T16:15:59.533

当您尝试增加数组时，您会收到此错误。这是无效的，因为在 c++ 中，数组的名称可以隐式转换为指向第一个索引的常量指针。你不能增加一个数组，因为一个数组是一个容器，增加一个容器是没有意义的。

要完全回答您的问题，我需要解释一些事情。让我试试，其他人可以添加。

请记住，常量指针分为三种类型。

1.指向一个常量内存位置的指针。这是一个普通指针，但它指向一个本质上是常量的变量（实际上是只读变量）。这意味着它指向的变量的值不能通过它改变。通常它用于指向一个像这样的常量变量。

```
const int x = 10 ;
const int *ptr = & x ; 
```

在这里，您不能这样做，`*ptr = 5 ;`因为指针指向一个常量变量。

2.Const 指向内存位置的指针。这是一个指针，它只能指向整个程序中的一个内存位置。它指向的变量的值可以更改，但指针本身是恒定的。它是这样声明的。

```
int x = 10, y = 5 ;
int * const ptr = &x ; 
```

你不能`ptr = &y ;`在程序后面做。数组也可以隐式转换为指向内存位置的常量指针。所以它不能以这种方式增加或减少。（如果您愿意，可以在这里阅读： [什么是数组衰减？](https://stackoverflow.com/questions/1461432/what-is-array-decaying)）

3.Constant 指向一个常量内存位置的指针。这是一个指针，它本身是常量，也指向一个常量内存位置。它是这样声明的。

```
const int x = 8 ;
const int * const ptr = &x ; 
```

这意味着你不能将指针指向除了初始化位置之外的任何地方，你甚至不能改变它指向的位置的值。

我希望这个概念现在非常清楚。现在你的问题是：你想通过指针算法打印数组，但你不能增加数组本身。因此，一种解决方案是创建另一个指针（普通指针）并将其分配给数组第一个索引的地址。然后您可以增加、减少或更改该数组的值。像这样的东西。

```
int arr [] = {1, 2, 3, 4, 5} ;
int *ptr = arr ;
for (int i = 0 ; i < 5 ; i++)
{
    cout << *ptr << " " ;
    ptr++ ;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-27T16:23:43.310

所以你总是可以这样做：

```
int arr [] = {1, 2, 3, 4, 5} ; 
int *a = arr;
for (int i = 0 ; i < 5 ; i++) 
{     
  cout << *a ;     
  a++ ; 
} 
```

# mercurial - MacOS Mountain Lion Mercurial 后审：

> ID：12145647
> 
> 赞同：0
> 
> 时间：2012-08-27T16:15:25.680
> 
> 标签：mercurial

我发出以下命令：

hg postreview -o -e 4714 提示 --debug

结果：

使用 http://.... 发送功能命令中止：存储库 'http://...' 不是本地的

（我缩短了网址，网址是正确的）

此错误似乎并非源自 postreview 扩展，但我无法弄清楚问题所在。有人知道吗？

谢谢。克里斯

============= 系统：

我安装了 OS X 10.8 (12A269) Python：Python 2.7.2 [GCC 4.2.1 Compatible ..

[通过从http://mercurial.berkwood.com/](http://mercurial.berkwood.com/)下载的 mercurial-2.3+20120807-py2.7-macosx10.8.mpkg 安装 mercurial

我使用扩展 postreview：[https ://code.google.com/p/mercurial-reviewboard/](https://code.google.com/p/mercurial-reviewboard/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T05:58:03.013

这是一个问题，因为 mercurial 2.3

我已经更新了我的 mercurial reviewboard 插件克隆以在此处修复它： [https ://bitbucket.org/windix/mercurial-reviewboard/](https://bitbucket.org/windix/mercurial-reviewboard/)

请注意，这不是官方的 mercurial reviewboard 插件（位于[http://code.google.com/p/mercurial-reviewboard/](http://code.google.com/p/mercurial-reviewboard/)）。我正在使用的是外向支持（因此您可以一次发送所有外向变更集以供审查）。

这里有一个问题提交给官方： [http ://code.google.com/p/mercurial-reviewboard/issues/detail?id=48](http://code.google.com/p/mercurial-reviewboard/issues/detail?id=48)

所以希望有人会在那里修复它

# java - 在 Java 中为数据库应用程序建模客户类

> ID：12145649
> 
> 赞同：2
> 
> 时间：2012-08-27T16:15:41.537
> 
> 标签：java, mysql, swing, model-view-controller

我正在开发一个处理商店客户管理的 java swing 应用程序。我正在尝试基于 mvc 模式构建它，但实际上我对它有点缺乏经验。

基本上，有一个带有一些用于创建客户的文本字段的视图，当然还有一个名为 Customer 的类。如果提交了表单，则会创建一个 Customer 对象并将其保存到数据库中。现在，我的问题是设置一个视图来显示 JTable 中的所有客户。实际上，问题不是视图本身，而是在添加新客户或更改客户时刷新视图。因此，我创建了一个名为“Customers”的新类，其中包含一个包含所有客户的数组列表，并且每次创建客户时，它都会添加到该数组列表中。

当我的应用程序的大型机启动时，创建了一个“客户”对象，从我的数据库中获取所有客户，并将其放入仅用于 jtable 的数组列表中。jtable 作为监听器添加到客户对象中，并实现了一个名为 CustomerListener 的接口，该接口在每次客户数组列表更改时设置一个新模型。

嗯，好吧，现在我真的很难解释我的问题是什么，但是，基本上我认为这个类“客户”是多余的，所以我只是将数组列表和东西添加到我的“普通”“客户”类中：

```
package v1a;

import java.sql.ResultSet;
import java.util.ArrayList;

public class Customer {

    public static final String KUNDENNUMMER = "Kundennummer";
    public static final String ANREDE = "Anrede";
    public static final String NACHNAME = "Nachname";
    public static final String VORNAME = "Vorname";
    public static final String PLZ = "PLZ";
    public static final String ORT = "Ort";
    public static final String STRASSE = "Strasse";
    public static final String LAND = "Land";
    public static final String TELEFON = "Telefon";
    public static final String MOBIL = "Mobil";
    public static final String EMAIL = "Email";

    public static final String[] CUSTOMER_FIELDS = { KUNDENNUMMER, ANREDE, NACHNAME, VORNAME, PLZ, ORT, STRASSE, LAND, TELEFON, MOBIL, EMAIL };

    private String kn, anrede, nachname, vorname, plz, ort, strasse, land, telefon, mobil = "", email = "";

    private ArrayList<Customer> customers = new ArrayList<Customer>();
    private ArrayList<ICustomerModelListener> listeners = new ArrayList<ICustomerModelListener>();

    public Customer() {
        getAllFromDatabase();
    }   

    public Customer(String[] str) {
        this.kn = str[0];
        this.anrede = str[1];
        this.nachname = str[2];
        this.vorname = str[3];
        this.plz = str[4];
        this.ort = str[5];
        this.strasse = str[6];
        this.land = str[7];
        this.telefon = str[8];
        this.mobil = str[9];
        this.email = str[10];
    }

    public void getAllFromDatabase(){
        SQL.getInstance();
        ArrayList<Customer> arrlist = new ArrayList<Customer>();    
        ResultSet rs = SQL.select("SELECT kundennummer, anrede, name, vorname, strasse, plz, ort, land, telefon, mobil, email FROM kunden");
        try {
            while(rs.next()){
                String[] values = new String[Customer.CUSTOMER_FIELDS.length];
                values[0] = String.valueOf(rs.getInt("kundennummer"));
                values[1] = rs.getString("anrede");
                values[2] = rs.getString("name");
                values[3] = rs.getString("vorname");
                values[4] = rs.getString("strasse");
                values[5] = String.valueOf(rs.getInt("plz"));
                values[6] = rs.getString("ort");
                values[7] = rs.getString("land");
                values[8] = rs.getString("telefon");
                values[9] = rs.getString("mobil");
                values[10] = rs.getString("email");
                Customer c = new Customer(values);
                arrlist.add(c);
            }
        } catch (Exception e) {
            System.out.println(e.getMessage());
        }  
        SQL.cleanup();
        this.customers = arrlist;
        for(ICustomerModelListener l : listeners){
            l.CustomerChanged();
        }
    }

    public ArrayList<Customer> getAll(){
        return customers;
    }

    public void addCustomer(Customer customer){
        customers.add(customer);
        for(ICustomerModelListener l : listeners){
            l.CustomerChanged();
        }
    }

    public void addListener(ICustomerModelListener listener){
        listeners.add(listener);
    }

    public static boolean knExists(int kn){
        boolean bool = false;
        SQL.getInstance();
        ResultSet rs = SQL.select("SELECT kundennummer FROM kunden WHERE kundennummer = "+kn);
        try {
            while(rs.next()){
                bool = true;
            }
        } catch (Exception e){
            System.out.println(e.getMessage());
        }
        SQL.cleanup();
        return bool;
    }

    public static int getFreeKn(){
        SQL.getInstance();
        ResultSet rs = SQL.select("SELECT kundennummer FROM kunden ORDER BY kundennummer DESC LIMIT 1");
        int kn = 0;
        try {
            while(rs.next()){
                kn = rs.getInt("kundennummer");
            }
        } catch (Exception e) {
            System.out.println(e.getMessage());
        }  
        kn++;
        SQL.cleanup();
        return kn;
    }

     public static Customer getByKn(int kn){
        if(knExists(kn)){
            SQL.getInstance();
            ResultSet rs = SQL.select("SELECT * FROM kunden WHERE kundennummer = "+kn);

            String[] values = new String[CUSTOMER_FIELDS.length];
            try {
                while(rs.next()){
                    values[0] = String.valueOf(rs.getInt("kundennummer"));
                    values[1] = rs.getString("anrede");
                    values[2] = rs.getString("name");
                    values[3] = rs.getString("vorname");
                    values[4] = String.valueOf(rs.getInt("plz"));
                    values[5] = rs.getString("ort");
                    values[6] = rs.getString("strasse");
                    values[7] = rs.getString("land");
                    values[8] = rs.getString("telefon");
                    values[9] = rs.getString("mobil");
                    values[10] = rs.getString("email");
                }
            } catch (Exception e) {
                System.out.println(e.getMessage());
            }  
            Customer customer = new Customer(values);
            SQL.cleanup();
            return customer;
        } else {
            return null;
        }
    }

     public boolean save() {
        SQL.getInstance();
        boolean bool = SQL.saveUser(this.kn, this.anrede, this.nachname, this.vorname, this.plz, this.ort, this.strasse, this.land, this.telefon, this.mobil, this.email);
        SQL.cleanup();
        return bool;
    }

     public String getValue(String s){
        switch (s){
        case KUNDENNUMMER:
            return this.kn;
        case ANREDE:
            return this.anrede;
        case NACHNAME:
            return this.nachname;
        case VORNAME:
            return this.vorname;
        case PLZ:
            return this.plz;
        case ORT:
            return this.ort;
        case STRASSE:
            return this.strasse;
        case LAND:
            return this.land;
        case TELEFON:
            return this.telefon;
        case MOBIL:
            return this.mobil;
        case EMAIL:
            return this.email;
        default :
            return "";
        }
    }
} 
```

现在我的问题是：这是对有关 mvc 模式的此类进行建模的正确方法吗？也许我的第一个方法是“更清洁”，因为我有一个类似“容器”的东西，里面有所有客户和“真正的”客户类别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T16:23:33.277

目前的方法会让我发疯。您有一个`Customer`具有 2 个完全不同的行为的类：

*   使用默认构造函数时，您实际上是将整个数据库的内容存储在内存中（嗯，至少是客户表的内容）。所以在这种情况下，一个`Customer`实例实际上代表了整个客户列表
*   当使用带参数的构造函数时，一个`Customer`对象现在代表一个`Customer`

简而言之，每当您`Customer`在代码中遇到实例时，您一无所知。

此外，将整个数据库存储在内存中可能有点矫枉过正（尽管对于有限数量的客户可能可行）。但是，如果您将这种方法用于更多表，您将很快耗尽内存。考虑只检索您实际需要的数据（例如，`JTable`在同一时间只能看到一定数量的客户，因此无需全部获取）。

然后是业务逻辑与数据库逻辑混合的问题。我建议将您的`Customer`课程与实际的数据库访问明确分开。您永远不知道将来会切换数据库（或选择与数据库不同的东西）。那时您不想重写整个应用程序，只需要重写[数据访问层](http://en.wikipedia.org/wiki/Data_access_layer)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T16:20:53.037

不，客户中不应该有数据库代码，也不应该有，`ArrayList<Customer>`因为这些应该由其他类处理。它需要是纯粹的，需要简单地封装客户的本质，仅此而已。

你需要重构和细分一些。

# jquery - 有数量限制吗 中的元素 ?

> ID：12145653
> 
> 赞同：5
> 
> 时间：2012-08-27T16:15:59.743
> 
> 标签：jquery, html, backbone.js

我正在将 343 个对象的集合加载到`BackboneCollection`它的`fetch()`方法中。

这 343 个对象被模板化为`<li>`元素。

我希望页面上显示 343 个元素，但`$('#myapp li').length`告诉我那里只有 200 个对象。

知道会发生什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T16:25:46.217

不，DOM 允许的元素数量*没有*限制。`<li>`

我创建了一个示例，您可以在其中`<li>`动态创建元素。输入一个整数值，您可以看到它在所有浏览器中都是相同的。我在所有浏览器中测试了高达 1000 的值。

[看看这个例子](http://jsfiddle.net/qEFBG/)

# d3.js - 如何使用 d3.js 和交叉过滤数据创建直方图？

> ID：12145656
> 
> 赞同：5
> 
> 时间：2012-08-27T16:16:05.090
> 
> 标签：d3.js, crossfilter

这是我的[演示](http://dev.anuary.com/441bad2f-bcc8-5fe5-af46-f15308f3aee9/)（永久链接；可能需要一秒钟才能加载）。

我有一些问题：

1.  crossfilter 键不反映上边界。因此，x 轴缺少一步。

    ![在此处输入图像描述](../Images/9378c8b20dabf0fe3833f25fc71ea289.png)

    我设法通过获取一个组步长 ( `group.all()[1] - group.all()[0]`) 然后将其添加到`d3.extent(group.all())[1]`. 因为这是一个肮脏的修复，所以我没有将它包含在演示中（可能存在数据差距）。获得组步长/修复 x 轴的不那么脏的方法是什么？

2.  钢筋之间有不均匀的间隙。我不知道如何解决 x.scale 与不同数据集的不一致问题。

    ![在此处输入图像描述](../Images/d0313daa795808dfaa99adf594bbd1e5.png)

    我希望条形宽度自动适应可用的图形宽度。因此，我计算最佳条形宽度，然后（如果需要）调整图形本身的大小：

    ```
    bar_width = math.round(graph_width/data_length);
    graph_width = bar_width*data_length; 
    ```

    在这种情况下，`x.scale`任何键值都无法返回不均匀的数据，但确实可以。没有魔法；我只是忽略了一些东西。但它是什么？

    `x.scale` *什么*时候弄乱了，然后`bar_width`从`graph_width`设置`x.scale`范围之前减去 可以解决问题。虽然，我无法弄清楚检测 x.scale 何时不按预期运行的条件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T14:01:31.650

我花了很多时间试图找出正确的方法来做到这一点。然而，我最终使用简单的数学来猜测上数据边界。还有很多问题有待解决，比如如何在视觉上处理极端情况。

![在此处输入图像描述](../Images/632a85e3eee12d5cbee88ea11030df8a.png)

[可以在 github](https://github.com/gajus/interdependent-interactive-histograms)上访问我开发可重用直方图库的尝试。

# java - JPA 实体不刷新（对每个事务使用新的 EntityManger）

> ID：12145660
> 
> 赞同：1
> 
> 时间：2012-08-27T16:16:11.210
> 
> 标签：java, jakarta-ee, jpa, persistence

我在 JPA 将旧数据保存在缓存中时遇到问题，并尝试了我能找到的解决方案，但它不断弹出！

无论如何，为了提高效率，我最初重用了一个 Entity Manager 实例。当我第一次遇到所描述的问题时，我更改了代码，以便为每个事务创建一个新的实体管理器：

```
/** This method is called every time a transaction is made. */

public static EntityManager createFreshEntityManager() {
    try {
        return Persistence.createEntityManagerFactory(puName)
                          .createEntityManager();         
    } 
    catch (Exception e) {
        logStuff(e); 
        return null;
    }
} 
```

但是，这并不能解决问题。

当我**使用 JDBC 截断表并重置主键**时，我经常注意到某些新创建的对象具有旧的变量值。我的一个怀疑是重置主键可能是罪魁祸首，但话又说回来，我已经为每个事务拥有了一个新的实体管理器，所以这根本不重要。

我非常有信心这不是我的代码的问题，因为数据库实体永远不会存储在函数范围之外的我的应用程序中，并且总是在需要时直接从数据库查询。

我还阅读了有关使用 EntityManager.clear() 的信息，但我不希望做如此残酷的事情，因为它会弄乱多线程程序。

我曾想过通过一次获取所有对象然后手动删除它们来使用 JPA 而不是 JDBC 进行 TRUNCATE，但这只是效率低下......但话又说回来，它不会成为瓶颈。不确定这是否会对使用 JDBC 产生影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T00:04:28.823

我看不出有任何理由为每笔交易创建一个新的 EntityManager。

您应该能够使用[@PersistenceContext注入您的](http://docs.oracle.com/javaee/6/api/javax/persistence/PersistenceContext.html)[EntityManager](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html)。

它可能看起来像这样：

```
@Stateless
class SomeSessionBean implements SomeSessionBeanLocal {

    @PersistenceContext(unitName = "somePuName")
    private EntityManager em;

    public Customer findCustomerById(Long someId) {
        return em.find(Customer.class, someId);
    }
} 
```

使用注解进行依赖注入是 EJB 3 最棒的事情之一！

* * *

**您的问题的可能来源：**

如果您在 JavaEE Web 应用程序运行时修改数据库中的值，则 EJB 不太可能立即检测到这些更改。您的持久层可能正在使用缓存。

您可能希望在*“外部*”更改数据库后重新启动您的 webapp。

# c++ - g++ -static 导致内存泄漏（由 mtrace 报告）

> ID：12145662
> 
> 赞同：3
> 
> 时间：2012-08-27T16:16:18.603
> 
> 标签：c++, memory-leaks, g++, static-libraries, mtrace

所以我有一个奇怪的问题，我希望有人能解释一下......我有以下代码：

```
#include <unistd.h>
#include <mcheck.h>
#include <pthread.h>

static void *run(void *args)
{
  sleep(1);
  return NULL;
}

int main()
{
  mtrace();
  pthread_t thread;
  pthread_create(&thread, NULL, run, NULL);
  pthread_join(thread, NULL);

  return 0;
} 
```

我编译我用这两种方式编译它：

```
g++ -static program.cpp -lpthread 
```

和

```
g++ program.cpp -ltpthread 
```

当我查看 mtrace 的输出时（在我的例子中是 mem.out）

当我使用该`-static`选项时，我看到以下内容，`mtrace`报告：

```
Memory Not freed:
__________________
   Address      Size   Caller
   0x085ac350   0x88   program.cpp:0 
```

但是当我排除该`-static`选项时，`mtrace`报告光荣：

```
No memory leaks. 
```

那么关于这里发生了什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T21:56:55.443

这是在我的常规桌面 Linux 系统 (FC-17) 上复制它的方法：

```
#include <mcheck.h>
#include <pthread.h>

extern "C" { static void *run(void *) { return 0; } }

int main() {
  mtrace();
  pthread_t thread;
  pthread_create(&thread, 0, run, 0);
  pthread_join(thread, 0);
  return 0;
} 
```

编译`g++ -g -static -pthread`。这就是我执行它以获取`mtrace`错误的方式：

```
$ MALLOC_TRACE=mt.txt mtrace ./a.out mt.txt

Memory not freed:
-----------------
           Address     Size     Caller
0x00000000011a9c90    0x110  at 0x43d7f9 
```

我有一个 64 位系统，所以大小不匹配。当我反汇编地址时`gdb`，它给出了：

```
(gdb) disass 0x43d7f9
Dump of assembler code for function _dl_allocate_tls:
   0x000000000043d7c0 <+0>:     mov    %rbx,-0x20(%rsp)
   0x000000000043d7c5 <+5>:     mov    %rbp,-0x18(%rsp)
...
   0x000000000043d7f4 <+52>:    callq  0x428150 <calloc>
   0x000000000043d7f9 <+57>:    test   %rax,%rax
   0x000000000043d7fc <+60>:    je     0x43d8e0 <_dl_allocate_tls+288>
... 
```

所以看起来像为线程分配了一些线程本地存储。这似乎是每个线程一次分配，因为当我`pthread_create`在加入之后添加调用时没有额外的分配，而在加入之前添加它时有一个。这`_dl_allocate_tls`表明这通常是在动态链接期间调用的函数，但似乎是在线程堆栈初始化期间调用的。通过`glibc`代码的 grep 显示它正在被调用`allocate_stack.c`。

似乎确实有相应的调用`_dl_deallocate_tls`in `glibc`，所以我认为这个错误是无害的。`valgrind`不拾取任何内存泄漏。

# ruby-on-rails - 如何同时保存对象和与它们的关系？

> ID：12145666
> 
> 赞同：0
> 
> 时间：2012-08-27T16:16:30.977
> 
> 标签：ruby-on-rails, ruby-on-rails-3

Rails 经常告诉我，其他人在我之前就已经考虑过我的问题，但这一次，我什么也没找到……

我有 3 个模型：`Node`，`Volume`和`Filesystem`（我使用的是 Mongoid，但我认为 ActiveRecord 的问题是一样的）

节点`has_many`卷和文件系统；卷`has_many`文件系统。

我以相同的“节点”形式定义卷和文件系统（当添加/更改/删除卷时，JS 会更新每个文件系统的“卷”选择框）。这种形式工作正常。

保存节点时尝试保留文件系统时存在问题：

由于新卷还没有任何 ID，我使用卷名称作为选择框中的值，但外键是 ID（名称在节点内是唯一的，但不同的节点将具有相同名称的卷，所以我可以'不要使用名称作为 ID）。

在`nodes_controller`'s `create`and `update`actions 中，我需要先找到保存卷的解决方案，然后将`params[:node][:filesystems_attributes]`包含的卷名替换为它们各自的 ID。这很脏，我想知道是否可以以干净的方式完成。

有没有其他人有同样的问题？

唯一真正“干净”的解决方案是在不同的步骤中保存卷和文件系统，但我的应用程序确实需要“点击次数越少越好”，因为`Node`它包含许多其他嵌套模型（和表单）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T21:02:59.473

[嵌套属性](http://mongoid.org/en/mongoid/docs/nested_attributes.html)似乎是您正在搜索的内容。将它们添加到您的 Node 模型中，您应该准备好了。

`accepts_nested_attributes_for :volumes, :filesystems`

如果您使用表单助手

`<%= form.fields_for :nodes do |nodes_form| %>`

是定义子属性的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T16:25:47.733

我刚刚将 Filesystem 嵌套到 Volume 而不是 Node 中，它就像一个魅力。

糟糕的设计会产生糟糕的问题；o)

# c - 阻止接受

> ID：12145668
> 
> 赞同：1
> 
> 时间：2012-08-27T16:16:37.520
> 
> 标签：c, tcp-ip, socketserver

我正在编写一个 TCP/IP Socketserver。

我的问题是，当我（例如）远程登录我的服务器并且不发送任何数据时，我的接受呼叫被阻止并且不接受任何新的传入连接。

当我发送任何内容或退出 telnet 接受停止阻塞时，我可以处理发送的数据并接受开始接受新的传入连接。

```
main() {
   socket = bind_listen();

   while(1) {
       user_socket = accept(socket);
       ssl = SSL_new(ctx);
       SSL_set_fd(ssl, user_socket);
       SSL_accept(ssl);

       event.data.fd = user_socket;
       event.events = EPOLLIN | EPOLLONESHOT;

       epoll_proof = epoll_ctl(poll_fd, EPOLL_CTL_ADD, user_socket, &event);
   }
} 
```

有几个线程用于 epoll_wait() 并处理数据。任何的想法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T16:31:40.463

那是因为你的程序是单线程的。在第一步中，它等待连接，之后，当连接建立时，它等待输入。
您有几个选项可以让它等待多个连接并全部接受它们：Threading、Select 和 fcntl。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T16:29:23.493

您可以使用多路复用器，例如 select 或 poll 系列。

这将告诉您何时可以在不被阻止的情况下运行接受。

如果您不知道如何使用多路复用器，我认为 select 是最简单的解决方案：http: [//linux.die.net/man/2/select](http://linux.die.net/man/2/select)

这也将避免诸如阻塞读/写之类的不良情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T16:44:53.720

首先，您应该轮询侦听文件描述符（使用`select`，`poll`或`epoll`/ `kqueue`）并且*仅*`accept`在准备好读取时才调用。

其次，更具体地说，如果您要使用 edge-triggered `epoll`，则需要先将套接字设置为非阻塞模式。然后，当您被告知它已准备好读取时，您需要`accept`循环调用，直到您返回`-1`错误`EAGAIN`或`EWOULDBLOCK`- 可能有多个连接请求同时等待，并且边缘触发轮询仅在状态*更改*时提醒您，所以你需要排空插座。

以一种非常非常幼稚的方式，您还*可以*取消轮询，而*只*使用非阻塞套接字，无论是在繁忙的循环中还是在带有某种睡眠的循环中。`epoll`但这完全是浪费，与适当的/`kqueue`解决方案（或您的平台提供的任何轮询机制）相比，它不会给您带来任何好处。

# sql-server - VC++ OLE DB：如何取消查询？

> ID：12145669
> 
> 赞同：2
> 
> 时间：2012-08-27T16:16:38.367
> 
> 标签：sql-server, visual-c++, oledb

有时用户在应用程序 (vc++ OLE DB) 中对 SQL Server 运行长时间查询。如何在执行期间在客户端取消此查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:30:48.287

ICommand 接口有一个[Cancel 方法](http://msdn.microsoft.com/en-us/library/windows/desktop/ms714402%28v=vs.85%29.aspx)，专门用于取消查询。如果您使用的是 ADO，那么前面提到的方法仍然可以通过[Cancel](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681014%28v=vs.85%29.aspx)使用。

# iphone - 可以将 MonkeyTalk 与非母语应用程序一起使用吗？

> ID：12145673
> 
> 赞同：0
> 
> 时间：2012-08-27T16:16:49.833
> 
> 标签：iphone, testing, automation

我正在尝试对用我公司专有语言编写的产品进行一些自动化测试。这种语言使我们能够为 Android 和 iOS 编写一组代码。我想知道我是否可以用来`MonkeyTalk`对这个应用程序进行自动化测试。有人告诉我，您必须以`MonkeyTalk`母语运行才能使用它。

任何人都可以为我阐明这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:48:14.790

在您编写应用程序的任何语言中，您需要使用各自的本地编译器构建项目，例如：在 IOS 上，您需要使用 Xcode 编译您的项目，您可以在编译代码时在构建项目中包含猴子谈话代理在各自的平台。您需要做的就是在构建项目时包含 AGENT SDK，您不需要进行任何代码更改，我认为您可以将 MonkeyTalk 用于您的项目。

希望这可以帮助。

# android - 如何使用 AlarmManager 等启动活动

> ID：12145674
> 
> 赞同：0
> 
> 时间：2012-08-27T16:16:49.973
> 
> 标签：android, alarmmanager

我正在尝试使用警报管理器定期在活动中启动代码。我在这里查看了各种示例，但它们并没有真正帮助。

出于测试目的，我所要做的就是每隔 10 秒弹出一个 toast，但似乎什么都没有发生。请帮助伙计们！

我在清单中有这个（也是所有三个活动的声明）：

```
<receiver android:name=".receiver.AlarmReceiver"></receiver> 
```

OnCreate 中主要活动的代码：

```
 //
        // Setting up the Alarm Manager
        //
        Intent myIntent = new Intent(getBaseContext(), AlarmReceiver.class); 
        PendingIntent pendingIntent = PendingIntent.getBroadcast(getBaseContext(), 0,         myIntent, 0); 
        AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE); 
        Calendar calendar = Calendar.getInstance(); 
        calendar.setTimeInMillis(System.currentTimeMillis()); 
        calendar.add(Calendar.SECOND, 10); 
        long timerInterval = 10 * 1000;  
        alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), timerInterval, pendingIntent); 
        //finish(); 
```

警报接收器.java：

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.widget.Toast;

public class AlarmReceiver extends BroadcastReceiver 
{

public void onReceive(Context context, Intent intent) 
    { 
    Toast.makeText(context," onRecieve() test" , Toast.LENGTH_LONG).show(); 
    Intent scheduledIntent = new Intent(context, MyService.class); 
    scheduledIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
    context.startActivity(scheduledIntent);
    } 
} 
```

我的服务.java：

```
import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.os.IBinder;
import android.widget.Toast;

public class MyService extends Service {

public void onCreate(Bundle savedInstanceState) {
     super.onCreate();

 Toast.makeText(getBaseContext(),"test message.",
            Toast.LENGTH_SHORT).show();

}
@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:28:25.453

您的活动未显示，因为您正在调用标识`startActivity()`的。您应该在 LogCat 中看到与此相关的警告。`Intent``Service`

我谦虚地建议您通过`Log`类自己使用 LogCat 来记录后台操作，而不是尝试使用`Toast`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-18T16:01:19.653

测试这段代码：

```
private void establecerAlarmaClick(int when){
AlarmManager manager = (AlarmManager) this.getSystemService(Context.ALARM_SERVICE);
Intent intent = new Intent(MainActivityAlarmita.this, MainActivityAlarmita.class);
PendingIntent pendingIntent = PendingIntent.getActivity(MainActivityAlarmita.this, 0, intent, PendingIntent.FLAG_ONE_SHOT);
((AlarmManager) getSystemService(ALARM_SERVICE)).set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis() + when * 1000, pendingIntent);
} 
```

# oracle - Oracle：Order by Date 和 rownum=5000 的性能不佳

> ID：12145675
> 
> 赞同：1
> 
> 时间：2012-08-27T16:16:51.620
> 
> 标签：oracle

有人可以向我解释为什么当我按日期 asc 或 desc 对任何查询语句进行排序时。它会大大降低性能吗？

通常语句会是这样的

```
select * from table where ... order by modified_data asc 
```

缓解此问题的最佳方法是什么？我按日期删除订单的那一刻，性能会提高很多。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T16:33:42.950

这取决于查询计划、是否`modified_date`在索引中以及您拥有的其他谓词。但是，一般来说，添加 an`ORDER BY`需要 Oracle 在返回结果之前对结果进行排序。反过来，这通常要求 Oracle 在返回任何行之前完全实现结果集。如果您测量的是返回第一行所需的时间，而不是返回最后一行所需的时间，则会放大效果。

一般来说，这并不是一个真正可以缓解的问题。如果您需要排序的结果集，则会产生对该结果集进行排序的开销。否则，你不会。在特定情况下，您可以添加一些索引，以允许 Oracle 按排序顺序获取结果，而不是对结果进行物理排序。但这取决于您没有提到的许多特定于查询的因素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T17:33:38.360

排序需要时间，尤其是必须先构建整个结果集，然后才能开始排序。如果该字段`modified_data`将被索引，则情况并非如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-05T08:01:15.743

尝试在表的 id 上创建索引。如果您不需要所有列，也可以在选择列中更改 select *。

# mysql - MySQL perl 脚本的优化

> ID：12145679
> 
> 赞同：-1
> 
> 时间：2012-08-27T16:17:03.760
> 
> 标签：mysql, perl

我目前正在从事一个涉及 MySQL 数据库数据操作的项目。首先，我需要告诉您，我使用的是在同一台机器上执行的 perl 脚本。另外，我想说一下我正在处理的表： 创建表如下：

```
CREATE TABLE `deCoupled` (
    `AA` double NOT NULL DEFAULT '0',
     ...several other fields,
     KEY `AA` (`AA`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 
```

为了优化我处理数据的方式，我创建了一个临时表，如下所示：

```
CREATE TABLE `temp_deCoupled` AS SELECT * FROM `deCoupled` ORDER BY field1,field2,...,fieldN 
```

并添加数据操作所需的 auto_increment 键字段：

```
ALTER TABLE `temp_deCoupled` ADD COLUMN MY_KEY INT NOT NULL AUTO_INCREMENT KEY
ALTER TABLE `temp_deCoupled` ADD INDEX (MY_KEY) 
```

我像这样更改表，因为我使用查询扫描表

```
SELECT COUNT(`AA`), field1, field2,..., fieldN FROM `temp_deCoupled`
GROUP BY field1, field2,..., fieldN ORDER BY field1, field2,..., fieldN 
```

我根据 MY_KEY 字段对记录执行更新。不幸的是，对于大约 75000 条记录的记录，在具有双核 CPU 和 2gigs 内存的 pc 上大约需要 75 分钟。另外，我需要告诉您，操纵数据的 perl 脚本不会进行任何复杂的计算。

我尝试调整 MYSQL 服务器，并使用以下内容更新了 my.cnf 文件：

```
key_buffer = 256M
sort_buffer_size = 128M
read_buffer_size = 64M
read_rnd_buffer_size = 64M
key_buffer_size = 128M
table_cache = 1024
query_cache_limit = 128M
query_cache_size = 128M
innodb_buffer_pool_size = 768M
innodb_thread_concurrency = 8
innodb_flush_method = o_DIRECT 
```

我真的需要降低脚本的执行时间。任何人都可以提出任何建议吗？

为了更准确地了解更新，我将发布以下代码示例：

```
$qSel = "SELECT COUNT(*), field1,..., fieldN FROM `temp_deCoupled` GROUP BY field1,..., fieldN ORDER BY field1,...,fieldN";
$stmt = $dbh->prepare($qSel);
$stmt->execute() or die "Error occurred: $DBI::errstr.\n";
while($stmt->fetch()) {
    .... *some code*...
    $q_sel_keys = "SELECT MY_KEY FROM `temp_deCoupled` WHERE field1 = value1 AND ... AND fieldN = valueN";
    $stmt1 = $dbh->prepare($q_sel_keys);
    $stmt1->execute() or die "Error occured: $DBI::errstr.\n";
    ...*some other code*...
    $q_Update_Records = "UPDATE `temp_deCoupled` SET field1=val_1,..., fieldN=val_N WHERE MY_KEY = key1 OR MY_KEY = key2 OR ... OR MY_KEY = keyN";
    $stmt1 = $dbh->prepare($q_Update_Records);
    $tmp_c = $stmt1->execute() or die "Error occured: $DBI::errstr.\n";
    ...*some final code*...
} 
```

这就是 Perl 中数据操作的主体（通常）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T23:09:50.300

看起来您提供了很多信息，但没有提供所需的关键信息（如果您愿意原谅双关语）。那就是：需要这么长时间的更新有什么用？

如果您单独执行 75000 条更新语句，那将需要很长时间。尝试将它们组合在一起，其中更新执行的操作相同，只有键不同，例如：

```
update temp_deCoupled set fieldx=..., fieldy=... where my_key in (?,?,?,?,...) 
```

在最坏的情况下，更新在很大程度上是不同的，您可以使用另一个表来提供更新所需的信息。例如，给定这张表：

```
create table foo ( id int primary key, bar double ); 
```

您需要根据 id 将每个条乘以不同的值，创建另一个表来保存乘数，将它们插入脚本的单个请求中，然后更新：

```
create temporary table foo_multiply ( id int primary key, mult double );
insert into foo_multiply values (1,123),(2,42),(3,666),...;
update foo inner join foo_multiply using (id) set foo.bar=foo.bar * foo_multiply.mult; 
```

将插入语句分成不超过 1MB 左右的行可能是个好主意。在极端情况下，将要插入的数据写入文件并使用“LOAD DATA INFILE”加载它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:21:46.863

通过将 temp_deCoupled 表创建为：

```
CREATE TABLE `temp_deCoupled` ENGINE = MEMORY AS SELECT * FROM `deCoupled` ORDER BY field1,field2,...,fieldN 
```

我还在my.cnf上做了以下配置：

```
max_heap_table_size = 512M 
```

我要感谢大家对您表现出的兴趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T11:42:00.857

默认情况下，MySQL 驱动程序在每个语句之后提交对数据库的更改。当进行大量更新时，这通常会导致性能不佳。

禁用 AutoCommit 模式可以解决您的性能问题。但与@ystsh 想法一样，这更多地基于您尚未提供的信息。

# forms - Twitter 引导 div 对齐

> ID：12145680
> 
> 赞同：3
> 
> 时间：2012-08-27T16:17:04.700
> 
> 标签：forms, twitter-bootstrap, alignment

> **可能重复：**
> [如何在 twitter bootstrap 中居中表格？](https://stackoverflow.com/questions/12172651/how-to-center-form-in-twitter-bootstrap)

我想在页面中心对齐我的表单，有没有办法在**twitter bootstrap**中做到这一点？或者我必须以同样的旧习惯方式来做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T16:24:07.370

你需要使用[网格系统](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)。尝试以下操作：

```
<div class="span3 offset3">
   <form></form>
</div> 
```

# c# - Visual Studio 2012 构建错误？

> ID：12145684
> 
> 赞同：3
> 
> 时间：2012-08-27T16:17:10.257
> 
> 标签：c#, visual-studio-2010, visual-studio, c#-4.0, visual-studio-2012

这有点奇怪 - 通常在 VS 2010 中构建的解决方案在 VS 2012 中表现得很奇怪。该解决方案有几个相互引用的项目。

第一次如果我尝试构建，它会抛出一堆“元数据文件 c:......dll 找不到”错误，比如项目构建顺序被破坏或其他东西

但如果我忽略这些并再次构建它，我会看到更少的错误，如果我第三次构建它，它会构建而不会抛出任何错误。

在 VS 2010 中打开的完全相同的解决方案立即构建，没有任何问题...... wtf？

# php - Android 应用程序可以使用现有的网站功能、JavaScript 方法、PHP 脚本吗？

> ID：12145686
> 
> 赞同：1
> 
> 时间：2012-08-27T16:17:29.547
> 
> 标签：php, javascript, android, wordpress

我想制作一个 Android 应用程序，并且已经用 Wordpress 构建了 HTML 网站。我想知道...如果我制作一个 Android 应用程序，是否可以让它使用我已经为网站创建的功能.. 例如 jQuery / javascript 函数、php 脚本等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T20:51:49.280

这很简单。您应该使用网络视图。 [http://developer.android.com/reference/android/webkit/WebView.html](http://developer.android.com/reference/android/webkit/WebView.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:36:12.073

Checkout appmobi.com 它基本上允许您使用 html/javascript 编写应用程序，它会为您编译并发布到应用商店。PHP 不会在应用程序本身中运行，但您可以使用 ajax 与服务器通信。我有一个通过那里构建的应用程序，显示不同的运动员职业统计数据，每次页面加载时，我都会对我的服务器进行 ajax 调用以更新统计数据，因为它们会在运动员玩游戏时发生变化。还可以查看 phonegap、tiggzi 和应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T16:29:34.460

您可以运行`jQuery`/`javascript`函数，因为这些客户端脚本并在用户浏览器上运行。`PHP`脚本/函数在服务器端运行并呈现为`HTML`输出。

您可以使用一些替代方法通过客户端运行 php 函数`AJAX`。

查找以下示例：

```
function showHint(str){
    var xmlhttp;
    if (str.length==0){
        document.getElementById("txtHint").innerHTML="";
        return;
    }
    if (window.XMLHttpRequest){ // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    } else { // code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState==4 && xmlhttp.status==200){
            document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
        }
    }
    xmlhttp.open("GET","gethint.php?q="+str,true);
    xmlhttp.send();
} 
```

PHP 将包含带有 html 输出的函数：

```
<?php
    // Fill up array with names
    $a[]="Anna";
    $a[]="Brittany";
    $a[]="Cinderella";
    $a[]="Diana";
    $a[]="Eva";
    $a[]="Fiona";
    $a[]="Gunda";
    $a[]="Hege";
    $a[]="Inga";
    $a[]="Johanna";
    $a[]="Kitty";
    $a[]="Linda";
    $a[]="Nina";
    $a[]="Ophelia";
    $a[]="Petunia";
    $a[]="Amanda";
    $a[]="Raquel";
    $a[]="Cindy";
    $a[]="Doris";
    $a[]="Eve";
    $a[]="Evita";
    $a[]="Sunniva";
    $a[]="Tove";
    $a[]="Unni";
    $a[]="Violet";
    $a[]="Liza";
    $a[]="Elizabeth";
    $a[]="Ellen";
    $a[]="Wenche";
    $a[]="Vicky";

    //get the q parameter from URL
    $q=$_GET["q"];

    //lookup all hints from array if length of q>0
    if (strlen($q) > 0){
        $hint="";
        for($i=0; $i<count($a); $i++){
            if (strtolower($q)==strtolower(substr($a[$i],0,strlen($q)))){
                if ($hint==""){
                    $hint=$a[$i];
                } else {
                    $hint=$hint." , ".$a[$i];
                }
            }
        }
    }

    // Set output to "no suggestion" if no hint were found
    // or to the correct values
    if ($hint == ""){
        $response="no suggestion";
    } else {
        $response=$hint;
    }

    //output the response
    echo $response;
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T17:48:31.810

不，您不能（也不应该）在您的手机上执行 PHP 脚本。PHP 脚本旨在在服务器而不是客户端上运行。

如果您已经创建了一个网站（托管在服务器上）并且只想在 Android 应用程序中打开它，请使用 Webview（[http://developer.android.com/reference/android/webkit/WebView.html](http://developer.android.com/reference/android/webkit/WebView.html)）。它将帮助您打开应用程序中的现有链接。

如果您打算创建一个包含 HTML 和 JavaScript 的本机应用程序，您也可以这样做。基本上你可以在 webview 中打开一个本地链接，也可以在本地和服务器 (php) 链接之间切换。此外，您可以使用 AJAX（使用 JQuery 或 JQuery mobile）进行服务器调用。

额外两分钱，如果您打算使用 HTML、JavaScript 原生应用程序，我建议您使用 phonegap ( [http://phonegap.com/](http://phonegap.com/) )。Phonegap 帮助创建简单的 JavaScript/HTML 应用程序，还提供调用本地电话功能的方法，如使用相机、拨打号码等。最酷的部分是，一旦你在一个平台 (Android) 上拥有一个应用程序，你可以轻松创建其他平台上的应用程序，如 iOS、Blackberry、Windows mobile，通过重用相同的代码。有时间的话值得一试。

# python - 在多个文件中进行测试

> ID：12145688
> 
> 赞同：4
> 
> 时间：2012-08-27T16:17:38.977
> 
> 标签：python, testing, pyramid

我正在为大型项目使用金字塔框架，我发现将所有测试都放在一个`tests.py`文件中很麻烦。所以我决定创建一个包含我的测试文件的目录。问题是，我不知道如何告诉金字塔从这个目录运行我的测试。

我正在使用`python setup.py test -q`.

但这当然不起作用，在我将测试移动到测试目录之后。该怎么做，让它发挥作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T16:45:54.350

首先，您需要通过在其中创建一个来确保`tests`它不仅仅是一个目录，而是一个 Python 包`__init__.py`。

您还需要确保命名`tests`包中的模块`test_something.py`。

大多数测试运行器，作为他们测试发现的一部分，寻找一个名为 的模块或包`tests`，该包中的模块以 开头，`test_`并期望测试方法（在`TestCase`子类上）的方法名称以 开头`test_`。

[unittest](http://docs.python.org/library/unittest.html)模块将测试运行器描述为：

> 测试运行器是一个组件，它协调测试的执行并向用户提供结果。运行程序可以使用图形界面、文本界面或返回特殊值来指示执行测试的结果。

有很多不同的测试框架，因此有很多测试运行器，大多数都`unittest`以某种方式扩展并寻找`unittest.TestCase`子类。他们可能会进行不同类型的[测试发现](http://docs.python.org/library/unittest.html#test-discovery)，以不同的方式呈现结果或在运行测试时收集[代码覆盖率。](http://wiki.python.org/moin/CodeCoverage)

至于相对进口：你真的应该尽量避免这些。它们使移动代码变得更加困难（正如您刚刚注意到的那样）并降低了导入的可读性（从哪里导入什么代码？）。只需使用`from myproject.views import my_view`- 事情在哪里就更清楚了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T16:31:05.687

我终于找到了方法。我刚刚创建了名为 tests 的目录，将我的测试放入其中并创建了空文件`__init__.py`。我需要修复相对导入，否则会出现奇怪的错误，例如：

`AttributeError: 'module' object has no attribute 'tests'`

我真的不明白发生了什么，以及`nosetest`这里的作用是什么，但它确实有效。

如果有人能够更深入地解释这个问题，那就太好了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T16:25:46.757

尝试使用`nose`
[http://nose.readthedocs.org/en/latest/](http://nose.readthedocs.org/en/latest/)
如果您的所有测试文件都以“Test”开头，`nosetests`则应将它们全部提取并运行它们。

# java - Java获取断网卡的mac地址

> ID：12145704
> 
> 赞同：17
> 
> 时间：2012-08-27T16:18:42.243
> 
> 标签：java, networking

我想获取以太网卡的 MAC（用于产品密钥）我尝试使用这种解决方案并在此处搜索，问题是当所有网络断开连接（以太网和 wifi）时，它返回空 MAC 地址。我宁愿得到以太网的地址，即使它已断开连接。

谢谢！！

```
 public static void main(String[] args)
    {
        InetAddress ip;
        try {
            ip = InetAddress.getLocalHost();

            System.out.println("The mac Address of this machine is :" + ip.getHostAddress());

            NetworkInterface network = NetworkInterface.getByInetAddress(ip);

            byte[] mac = network.getHardwareAddress();

            System.out.print("The mac address is : ");

            StringBuilder sb = new StringBuilder();
            for (int i = 0; i < mac.length; i++){
                sb.append(String.format("%02X%s", mac[i],(i< mac.length - 1)?"-":""));
            }

            System.out.println(sb.toString());

        } 
        catch (UnknownHostException e) {
            e.printStackTrace();
        } 
        catch (SocketException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T16:31:49.853

使用`InetAddress`绑定您查看 IP 地址列表。如果你没有，因为接口都断开了，那么你不能循环这些接口。

你应该尝试`NetworkInterface`上课。

```
public class MacAddressTest
{
  public static void main(String[] args) throws Exception
  {
    Enumeration<NetworkInterface> interfaces = NetworkInterface.getNetworkInterfaces();

    while (interfaces.hasMoreElements())
    {
      NetworkInterface nif = interfaces.nextElement();
      byte[] lBytes = nif.getHardwareAddress();
      StringBuffer lStringBuffer = new StringBuffer();

      if (lBytes != null)
      {
        for (byte b : lBytes)
        {
          lStringBuffer.append(String.format("%1$02X ", new Byte(b)));
        }
      }

      System.out.println(lStringBuffer);
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-05-28T20:17:34.620

如果您希望使用一些唯一的硬件标识符来验证许可证，那么我建议您使用[OSHI](https://github.com/oshi/oshi#readme)（操作系统和硬件信息）来获取您需要的硬件信息。

一般主体会将硬件标识符编码到客户端许可证字符串中，然后当客户端运行时，它将从许可证字符串中解码该 ID，并确保存在硬件以验证许可证。不要依赖索引，因为通常无法保证硬件顺序，只需遍历有问题的硬件列表并查看键绑定的硬件是否存在。

**注意：**在本地完​​成许可证验证时，*总是*可以破解；关键是让破解变得烦人。如果您的许可证本身只是普通的 MAC 地址，那么人们很容易查找他们的 MAC 并给自己一个有效的许可证。即使您将 MAC 编码/加密到许可证中，他们也可以查看反编译的代码并找到解码（以及因此编码）的工作原理，以便他们可以对自己的有效许可证进行编码。您需要尽可能多地加密和混淆，以使人们难以生成自己的许可证，但最终它只会使破解变得更加烦人，但并非不可能。

除了 MAC 地址之外，另一个选项是绑定到磁盘。磁盘序列号不像MAC地址那样容易更改。有了这个，您可以将许可证绑定到 USB 密钥，这很有趣。唯一需要担心的是人们更换磁盘，但如果软件许可证绑定到存储它的磁盘，那么这几乎不是问题。

**pom.xml**

```
...
<dependencies>
    <dependency>
        <groupId>com.github.oshi</groupId>
        <artifactId>oshi-core</artifactId>
        <version>3.13.2</version>
    </dependency>
</dependencies>
... 
```

**ClientLicense.java**

```
import oshi.SystemInfo;
import oshi.hardware.HWDiskStore;
import oshi.hardware.HardwareAbstractionLayer;
import oshi.hardware.NetworkIF;

/**
 * This class would be loaded with the client license and validate that the license is for the machine running this code.
 */
public class ClientLicense {
    final String clientLicenseString;

    public ClientLicense(String clientLicenseString) {
        this.clientLicenseString = clientLicenseString;
    }

    public final boolean validateByDisk() {
        int expectedModelSerialHash = decodeExpectedModelSerialHash(clientLicenseString);
        for (HWDiskStore disk : new SystemInfo().getHardware().getDiskStores()) {
            if (expectedModelSerialHash == Objects.hash(disk.getModel(), disk.getSerial())) {
                return true;
            }
        }
        return false;
    }

    public final boolean validateByMAC() {
        String expectedMac = decodeExpectedMac(clientLicenseString);
        for (NetworkIF netIF : new SystemInfo().getHardware().getNetworkIFs()) {
            if (expectedMac.equals(netIF.getMacaddr())) {
                return true;
            }
        }
        return false;
    }

    private int decodeExpectedModelSerialHash(String clientLicenseString) {
        // obfuscate license decoding, inverse of license encoding/encrypting
        return 0; // return the expected hash of model and serial
    }

    private String decodeExpectedMac(String clientLicenseString) {
        // obfuscate license decoding, inverse of license encoding/encrypting
        return ""; // return the expected MAC address
    }
} 
```

或者，您可以在[此示例文件](https://raw.githubusercontent.com/oshi/oshi/master/oshi-core/src/test/java/oshi/SystemInfoTest.java)中看到很多硬件信息。

* * *

此外，请参阅[`oshi-demo`](https://github.com/oshi/oshi/blob/master/oshi-demo/src/main/java/oshi/demo/ComputerID.java)（如 Daniel Widdis 所述）的示例类；该`ComputerID.java`示例包含以下方法：

```
/**
 * Generates a Computer Identifier, which may be part of a strategy to
 * construct a licence key. (The identifier may not be unique as in one case
 * hashcode could be same for multiple values, and the result may differ
 * based on whether the program is running with sudo/root permission.) The
 * identifier string is based upon the processor serial number, vendor,
 * processor identifier, and total processor count.
 * 
 * @return A string containing four hyphen-delimited fields representing the
 *         processor; the first 3 are 32-bit hexadecimal values and the last
 *         one is an integer value.
 */
public static String getComputerIdentifier() {
    SystemInfo systemInfo = new SystemInfo();
    OperatingSystem operatingSystem = systemInfo.getOperatingSystem();
    HardwareAbstractionLayer hardwareAbstractionLayer = systemInfo.getHardware();
    CentralProcessor centralProcessor = hardwareAbstractionLayer.getProcessor();
    ComputerSystem computerSystem = hardwareAbstractionLayer.getComputerSystem();

    String vendor = operatingSystem.getManufacturer();
    String processorSerialNumber = computerSystem.getSerialNumber();
    String processorIdentifier = centralProcessor.getIdentifier();
    int processors = centralProcessor.getLogicalProcessorCount();

    String delimiter = "-";

    return String.format("%08x", vendor.hashCode()) + delimiter
            + String.format("%08x", processorSerialNumber.hashCode()) + delimiter
            + String.format("%08x", processorIdentifier.hashCode()) + delimiter + processors;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-23T06:30:37.017

Java 标准库似乎没有提供枚举所有网络接口的方法。

*   [`InetAddress`](https://docs.oracle.com/javase/8/docs/api/java/net/InetAddress.html)显然不合适，因为它代表一个 IP 地址。
*   [`NetworkInterface`](https://docs.oracle.com/javase/8/docs/api/java/net/NetworkInterface.html)也不合适，因为它“*表示由名称和分配给该接口的 IP 地址列表组成的网络接口”*，这意味着如果网络接口没有 IP 地址，则`NetworkInterface`不是很适合代表它。果然，尽管 javadoc[`NetworkInterface.getNetworkInterfaces()`](https://docs.oracle.com/javase/8/docs/api/java/net/NetworkInterface.html#getNetworkInterfaces--)说*“返回这台机器上的所有接口”*，但实际上它只返回具有 IP 地址的网络接口。

请注意，检索“所有”网络接口的[官方教程](https://docs.oracle.com/javase/tutorial/networking/nifs/retrieving.html)还会生成仅具有 IP 地址的网络接口的列表。

所以，你可以做什么？

我认为您别无选择，只能在运行时环境中寻找其他方法来查找此信息。根据操作系统的不同，您可以通过解析文件系统中的文件（如 Linux 的[这个答案](https://stackoverflow.com/a/17719579/641955)）或解析系统命令的输出（如`ifconfig`*NIX 或`ipconfig`Windows）来找到网络接口。但我不认为这会非常健壮，因为您可能需要处理不愉快的问题，例如取决于操作系统版本或系统命令的可用性和版本的不同行为。

另一种选择可能是开发一种可移植的跨平台工具，该工具能够以一种能够本地获取网络接口列表的语言，并以易于解析的一致格式生成它。然后，您可以将该工具捆绑到您的解决方案中。

想到的一个很好的候选者是 Go：它可以本地获取网络接口列表，并且很容易编译到所有需要的目标平台，并且二进制文件可以立即使用，而无需依赖额外的运行时环境。

这是一个打印网络接口列表的简单实现，每行一个，名称、MAC 和 IP 地址由制表符分隔：

```
package main

import (
    "fmt"
    "net"
    "strings"
)

func macsAndIps() {
    ifaces, err := net.Interfaces()
    if err != nil {
        fmt.Print(fmt.Errorf("could not get interfaces: %+v\n", err.Error()))
        return
    }

    for _, iface := range ifaces {
        addresses, err := iface.Addrs()
        if err != nil {
            fmt.Print(fmt.Errorf("could not get addresses for interface %v: %v\n", iface, err.Error()))
        }

        ips := []string{}
        for _, address := range addresses {
            // fmt.Printf("%#v\n", address)
            switch address.(type) {
                case *net.IPNet:
                    ips = append(ips, address.String())
            }
        }

        name := iface.Name
        mac := iface.HardwareAddr
        fmt.Printf("%v\t%v\t%s\n", name, mac, strings.Join(ips, "\t"))
    }
}

func main() {
    macsAndIps()
} 
```

# web-services - 如何在三星智能电视应用程序中使用网络服务？

> ID：12145705
> 
> 赞同：2
> 
> 时间：2012-08-27T16:18:46.067
> 
> 标签：web-services, samsung-smart-tv

我需要使用三星智能电视应用程序中的网络服务，但此服务需要身份验证“自定义标头”，有什么方法可以在三星智能电视应用程序上使用 https？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T15:57:53.950

三星智能电视上的应用程序架构允许使用 JavaScript，并使用此 JQuery，因此我们可以使用 AJAX 来使用以下 Web 服务：

```
$.ajax({
    url: 'url/resources/service',
    type: json.type,
    dataType: 'json',
    contentType: 'application/json',
    data:  {datos},
    beforeSend: function(jqXHR, settings){
        jqXHR.setRequestHeader("head", id);
    },
    success: function(response) {
        alert("Success");
    },
    error: function(response) {    
        alert("Error");
    }
}); 
```

但在 Web 服务中，您需要在标头中返回一些内容：

```
("Access-Control-Allow-Origin", "*") 
```

**注意：**如果您无法修改 Web 服务，那么此答案对您不起作用！但是，如果可以，这可以解决您的问题。

您不需要实现`https`协议，因为 mapple 浏览器会为您完成，然后您的连接是安全的，如果您使用 Web 服务它。

# jquery - 无法在列表顶部插入第一个列表项，jQuery 错误？

> ID：12145706
> 
> 赞同：1
> 
> 时间：2012-08-27T16:18:48.853
> 
> 标签：jquery, insert

我有一个论坛主题列表，我每 20 秒更新一次，检查是否有新帖子。如果有，我会将该主题移至列表顶部，如下所示

```
$('#topicID').insertBefore("#topics li:first"); 
```

这确实工作得很好，不幸的是，如果它们已经在顶部，列表项就会消失。before() 也是如此。这被认为是错误还是预期行为？

我意识到在自身之前插入一个元素没有多大意义，并且可以通过在插入之前添加一个 .remove()-Statement 轻松解决这个问题，如下所示：

```
$('#topicID').remove().insertBefore("#topics li:first"); 
```

尽管如此，我认为 jQuery 将元素插入到它原来所在的位置比仅仅删除它更有意义。您对此有何看法？

不管怎样，这篇文章可能会帮助一些人弄清楚为什么他们的 html 中可能缺少一些东西。

这是显示我的意思的代码：http: [//jsfiddle.net/93UqQ/2/](http://jsfiddle.net/93UqQ/2/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T16:24:02.080

尝试`.prependTo`改用：

```
$("#topicID").prependTo("#topics");​​​​​​ 
```

这将移动元素而不将其从 DOM 中删除，如果它已经在正确的位置，则不会发生任何变化。

[http://jsfiddle.net/mblase75/93UqQ/5/](http://jsfiddle.net/mblase75/93UqQ/5/)

# css - Twitter Bootstrap 表透明 css 问题

> ID：12145708
> 
> 赞同：0
> 
> 时间：2012-08-27T16:18:52.830
> 
> 标签：css, twitter-bootstrap

所以我有一个从 SQL 数据库生成的表。它具有以下内容：

```
<table id="Email" width="725px" height="780" border="0" cellpadding="0"cellspacing="0" bgcolor="#551155"> 
```

如您所见，它使用 bgColor 属性，我知道该属性正在逐步淘汰等。但是现在我必须按原样转储它而不是查找/替换输出。

现在我正在使用 twitter 引导程序，它在引导程序 CSS 中几乎覆盖了该背景颜色：

```
table {
max-width: 100%;
background-color: transparent;
border-collapse: collapse;
border-spacing: 0;
} 
```

如您所见，它将表格的背景设置为透明。有没有聪明的方法来覆盖它？不修改 HTML 输出或引导文件？

我尝试在我的覆盖 css 样式文件中创建另一个类，但除了继承之外，我没有看到许多设置背景颜色的选项。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:27:05.820

只是不要添加`bgcolor`属性，它现在已被弃用。你应该做的是：

1.  创建另一个 CSS 文件，将其链接到 HTML 页面，并确保它位于任何其他 CSS 链接标签的最底部。

    1.  例如，向您的表中添加一个类`<table class="set-bg"></table>`
    2.  为新创建的 CSS 文件添加样式

        `.set-bg { background-color: #551155; ... }`

关键是在 CSS Bootstrap 文件之后包含您自己的 CSS 文件。

# ruby - Ruby - 搜索/比较特定术语的 Excel 工作簿并将找到的结果附加到 csv？

> ID：12145714
> 
> 赞同：0
> 
> 时间：2012-08-27T16:19:26.857
> 
> 标签：ruby, excel, search, csv, comparison

好的，所以我一直在玩弄 Ruby，但对它还是很陌生。我当前的程序遇到了问题。我想要它做的是获取包含术语列表的 CSV 文件，然后获取 csv 文件并创建这些术语的数组。一旦我在数组中有这些术语，我想搜索 Excel 工作簿并找到该术语的所有出现......在所有工作表中。如果找到一个术语，它将被附加到一个 csv 文件中，其中包含找到它的工作表名称和单元格位置。我认为我有一个相当好的开始。

编辑：我不再收到任何错误。它只是简单地重新创建给定的文件。它似乎没有放入工作簿并进行比较？有任何想法吗？

编辑 2：使用打印语句，我的 if 字符串是等于条件有问题。

编辑 3：我将这个问题隔离到我的比较中。当我使用`term`变量时，它会获取术语 as`["theterm"]`然后尝试将其与始终为假的字符串进行比较...

我的代码如下：

```
require 'roo'

$termsarray = Array.new

puts "Please enter filepath of file of terms (C:/path/to/file.csv)"
#termspath = gets.chomp.to_s
termspath = "C:/Ruby/termslist.csv"

CSV.foreach( "#{termspath}") do |row|   
  $termsarray << row
end
puts "Added terms to array successfully"

puts "Please enter filepath of file to cross-reference (C:/path/to/file.xlsx)"
#filepath = gets.chomp.to_s
filepath = "C:/Ruby/file_to_crossreference.xlsx"
puts "Please enter filepath for output file (C:/path/to/file.csv)"
output = gets.chomp.to_s

w1 = Excelx.new ( "#{filepath}" )
CSV.open( "#{output}", "w") do |csv|   
$termsarray.each do |term|
csv << term
  w1.sheets.each do |sheet|
    w1.default_sheet = sheet
    if w1.first_row && w1.first_column
      eval(w1.to_s).each do |index, value|
        if term.to_s.chomp.eql? value.to_s.chomp
          csv << [sheet, convert_index(index.to_s), value]
        end
      end
    end
  end
end
print "File Indexed Successfully!"
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:58:40.053

我修复并发现了我的问题。在创建术语列表时，我不小心创建了一个数组数组。代码在下面，但它可能不是最好的，特别是如果数据位于多列等中。

```
CSV.foreach( "#{termspath}") do |row|  
  #Will only take first item in first column of each row
  string = row[0.to_i].to_s
  $termsarray << string
end 
```

# actionscript-3 - flash AS3 保留滑块值

> ID：12145716
> 
> 赞同：0
> 
> 时间：2012-08-27T16:19:48.010
> 
> 标签：actionscript-3, flash

我有一个控制背景音乐音量的滑块。

在滑块组件参数值中：我设置为5。

当我将滑块滑动到 2 并导航到其他影片剪辑时。随后返回滑块，值为 5。如何存储 2 的值而不是显示 5？

```
import fl.events.SliderEvent;
import flash.media.SoundTransform;

var myTransform = new SoundTransform();

scMC.addEventListener(SliderEvent.THUMB_DRAG, changeVolume);

function changeVolume(event:SliderEvent):void{
MovieClip(this.root).myChannel.soundTransform = myTransform;
myTransform.volume = scMC.value;
volumeText.text = "Volume is " + scMC.value;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:27:39.957

您需要将值存储在全局或静态变量中。如果您不想进入自定义类文件和静态变量，可以使用时间线代码执行此操作的简单方法如下：

在您的根时间线代码中：

```
var sliderVal; 
```

在您的滑块父母时间线代码中（来自您的问题）：

```
var myTransform:SoundTransform = new SoundTransform();

scMC.addEventListener(SliderEvent.THUMB_DRAG, changeVolume);

if(this.root["sliderVal"]){
    scMC.value = this.root["sliderVal"];
}

function changeVolume(event:SliderEvent):void{
    myTransform.volume = scMC.value;
    this.root["sliderVal"] = scMC.value;
    MovieClip(this.root).myChannel.soundTransform = myTransform;
    volumeText.text = "Volume is " + scMC.value;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T02:18:13.773

您的问题是您没有将视图与模型（数据）分开，因此模型的生命周期与视图的生命周期相同。为了让模型独立于视图生存，您需要使视图仅显示它所给定的值，并将值的任何更改提供给外部以供以后使用。

所以，像：

```
public class SliderView extends MovieClip {
   protected var _slider:Slider;
   protected var _sliderValue:Number;
   /*Flash will populate this variable for you if you put 
     a slider on the stage and give it an instance name of "slider."
   */
   public function get slider():Slider {
      return _slider;
   }
   public function set slider(value:Slider):void {
      if (value != _slider) {
         if (_slider) {
            _slider.removeEventListener(SliderEvent.CHANGE, onSliderChange);
         }
         _slider=value;

         if (_slider) {
            _slider.addEventListener(SliderEvent.CHANGE, onSliderChange);
         }
      }
   }
   public function get sliderValue():Number{
      return _sliderValue;
   }
   public function set sliderValue(value:Number):void {
      if (value != _sliderValue) {
         _sliderValue = value;
         if (_slider) {
            _slider.value = value;
         }
         dispatchEvent(new Event('sliderValueChanged'));//anything needing to know about the change is notified immediately
      }
   }
   protected function onSliderChange(e:SliderEvent):void {
       sliderValue = Slider(e.target).value;
   }
} 
```

请注意，从可维护性的角度来看，此代码比您发布的时间线样式代码具有几个优点。

1.  它不是试图管理音量。这意味着即使您需要在其他地方使用它或您的 MC 结构发生变化，它也将继续工作。要管理音量，您需要在更高级别侦听 sliderValueChanged 并在那里更改音量。如果您将事件设置为冒泡，您可以在根目录处一直收听，您已经存储了所有内容（显然）。不过，这不是很好的封装。
2.  它完全是数据驱动的，这意味着如果您之前存储了 sliderValue，将相同的值传递给 sliderValue 将导致您看到相同的图片。或者，您可以从 SoundTransform 中读取它。希望您能更好地封装它，而不是像在原型代码中那样将其转储到根目录中。
3.  当 Flash 从舞台上移除 Slider 时，它会自动移除监听器，这样可以防止内存泄漏。

# eclipse - 仅在报告的特定页面上的页码

> ID：12145718
> 
> 赞同：2
> 
> 时间：2012-08-27T16:19:48.827
> 
> 标签：eclipse, birt

我知道如何将页码添加到报告中，但有人知道如何*仅*将页码添加到报告的特定页面吗？

例如，我不希望页码出现在封面页和目录页以及其他一些页面上。另外，我想开始计算报告特定页面的页码（例如，我希望报告的第 1 页是目录之后的页面）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T19:32:49.500

报告可能在不同页面上有不同的母版页。创建一个母版页，页码可见，一个不可见。在开始新页面的元素中，在 Property Editor -> Page Break -> Master Page 中选择所需的 Master Page。

对于第二部分，这不是真正的答案，而只是我的评论。更改页码方式是许多 BIRT 错误的主题，它可能仅适用于某些 BIRT 版本。这是通过报告内容影响母版页内容的问题，而母版页是在报告*之前*生成的。请参阅 Eclipse 论坛中的示例：

*   [如何在 BIRT 3.7.1 中重新启动组内的页码](http://www.eclipse.org/forums/index.php/m/840198/ "如何在 BIRT 3.7.1 中重新启动组内的页码")
*   [页码和总页数](http://www.eclipse.org/forums/index.php/t/273065/ "页码和总页数")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T06:45:28.503

通过在母版页页脚部分添加它，您可以像
`<value-of> pageNumber </value-of>`在 value-of 标记中一样添加页面编号，它还提供了在该部分添加脚本的选项。根据您的逻辑，它将显示页码。

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-12T05:58:37.450

PageNumber 和 Total page 变量在 rptlibrary 中起作用。

添加一个库并在需要的布局页面中拖放具有页码的网格。

# python - 覆盖 webapp.requesthandler 中的 handle_exception()

> ID：12145720
> 
> 赞同：1
> 
> 时间：2012-08-27T16:19:55.357
> 
> 标签：python, google-app-engine

**编辑：已解决，错误不存在。**

我正在覆盖 webapp2.RequestHandler 的方法 `handle_exception。

这是我的代码

```
class SocialAjaxHandler(webapp.RequestHandler):
    def dispatch(self):
    # Get a session store for this request.
        try:
            webapp.RequestHandler.dispatch(self)
        finally:
            pass

    def handle_exception(self,exception,debug_mode=False):

        if type(exception).__name__== FloodControlException.__name__:
           response = {'response':'flooderror'}
           json = simplejson.dumps(response)
           self.response.headers.add_header('content-type', 'application/json', charset='utf-8')
           self.response.out.write(json)
           return
        else:
            super(SocialAjaxHandler,self).handle_exception(exception,debug_mode)      

    def success(self):
        response = {'response':'success'}
        json = simplejson.dumps(response)
        self.response.headers.add_header('content-type', 'application/json', charset='utf-8')
        self.response.out.write(json) 
```

我需要的是在该`else`部分中，它只是告诉程序执行原始功能会执行的操作，但这似乎不起作用。

当引发不同于 from 的异常时，`FloodControlError`它会给我这个错误：

> _ConstructReference 中的文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\ext\ndb\key.py”，第 602 行引发 TypeError('无法从不兼容的关键字构造键引用'TypeError：无法构造键来自不兼容的关键字参数的引用。

# jquery - 如何在没有 iframe 的情况下包含外部表单？

> ID：12145723
> 
> 赞同：1
> 
> 时间：2012-08-27T16:20:06.680
> 
> 标签：jquery, html, forms, iframe

我想提供一些免费的预约服务。例如，医生可以在他们的主页中集成日历。可能的患者可以在医生页面上进行预约，并且必须填写一份多页表格。（2-3 页）

医生可以在他们的网站上包含日历和多页表格的最佳方式是什么？我认为 iframe 是否已弃用？我接触过使用 jQuery。你怎么看，这是正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T16:27:04.033

如果您不想做 Iframe，那么创建一个简单的 script.js，他们可以将其包含在他们的网站上，将表单加载到 div 中。它还必须通过 AJAX 提交。

如果您想防止跨域脚本，请使用 iframe。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T16:27:16.317

您将无法使用任何风格的 javascript 直接显示外部（跨域）表单。唯一的客户端解决方案是使用 iframe。

这是防止跨站点脚本 (XSS) 攻击的限制。有现代的替代方案，如 Microsoft 的跨域请求 (XDR)，但这是一个提议，不适用于所有浏览器。让它在客户端工作将是一项艰巨的任务。

有一个警告：服务器端语言没有与现代浏览器相同的针对 XSS 的保护措施。如果您要使用服务器端语言编写一个处理程序，将外部表单的内容回显到您的页面，那么您确实可以使用 jQuery 或一般的 JavaScript 来显示它而不使用 iFrame。

# java - Struts 2：使用来自其他操作的数据

> ID：12145731
> 
> 赞同：1
> 
> 时间：2012-08-27T16:20:32.100
> 
> 标签：java, jsp, struts2

我有一个 struts 2 项目，其中有 3 个执行不同数据报告功能的操作。我正在创建一个主页操作，以显示主页上其他 3 个操作的数据片段。

目前我有 Home.action 导入其他 3 个动作，然后使用其他动作对象来获取数据。这感觉不“正确”，所以我想知道在 Struts 中最好的方法是什么？最好不要过多地编辑原始的 3 个动作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:25:15.250

我有类似的困境，我通过定义一个不同的动作来解决它们，`struts.xml`它只返回动作的结果（没有周围的`tiles`等）。

然后，我使用`jQuery`来获取不同的操作`Ajax`，并且实际上让服务器计算不同请求中的不同操作有额外的好处，因此我的用户可以在其他人之前看到一些结果，如果您的操作花费超过 3 秒，那就太好了来计算结果。

请注意，这里使用 Tiles 实际上是完全不相关的。您可以通过使用不同的 JSP 来获得相同的效果（假设您想要一点定制的外观）。

我的 loadBrokerReport 操作在较大的周围 tile（布局）内显示代理报告，但 loadBrokerReportAjax 执行相同的方法，来自相同的 Action 类，但通过 ajaxReport.jsp 文件呈现结果（杂乱无章，更适合在下一个显示到其他事情）。

```
 <!-- This is the normal action the users select from menu -->
    <action name="loadBrokerReport" method="loadBrokerReport" class="ee.reinmets.intra.action.BrokerReportsAction">
        <result type="tiles">brokerReport</result>
    </action>

    <!-- This is the action called via ajax -->
    <action name="loadBrokerReportAjax" method="loadBrokerReport" class="ee.reinmets.intra.action.BrokerReportsAction">
        <result>/WEB-INF/pages/brokerReports/ajaxReport.jsp</result>
    </action>

    <!-- This is the tile i'm referencing above, in tiles.xml -->
    <definition name="brokerReport" extends="default">
      <put-attribute name="body" value="/WEB-INF/pages/brokerReports/normalReport.jsp" />
    </definition> 
```

# c# - 无法序列化列表

> ID：12145735
> 
> 赞同：6
> 
> 时间：2012-08-27T16:20:51.487
> 
> 标签：c#, asp.net-mvc-3

我正在将现有的 MVC3 应用程序从 InProc 移动到 ASP.Net 会话状态服务。其中一个模型对象具有以下属性：

```
public List<System.Web.Mvc.SelectListItem> StateCodes { get; set; } 
```

它抛出了这个错误

> 无法序列化会话状态。在“StateServer”和“SQLServer”模式下，ASP.NET 将序列化会话状态对象，因此不允许不可序列化的对象或 MarshalByRef 对象。如果自定义会话状态存储在“自定义”模式下完成类似的序列化，则适用相同的限制。

有没有办法`List<SelectListItem>`序列化？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T16:24:12.097

尝试在 Razor 代码中创建选择列表项，而不是使用`SelectList`. 让模型改为具有它所基于的基础数据的属性`SelectList`。您也可以尝试将 放在`SelectList`or`ViewBag`中`ViewData`，这也可以解决问题。

在视图模型中存储`SelectList`'s 被认为是不好的做法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-10T12:36:12.573

[只是在上面的答案中添加一些信息]我相信

> 在视图模型中存储 SelectList 被认为是不好的做法。

这是因为视图模型不应该以关于如何向最终用户显示信息的特定方式构建。

如果视图模型有一个项目列表，并且视图呈现一个 SelectList 当然可以。但是视图可以选择以许多其他方式将数据呈现给最终用户。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-11T14:03:20.280

除了不好的做法，如果转换到不同的会话存储系统并且您的代码中充斥着这些并且更改它们不利于您的时间范围，您可以通过将您的班级标记为`[Serializable]`然后更改您的所有成员来获得选择列表列表以下项目：

```
namespace blah.blah.blah
[Serializable]
public class Blah : FromBlah

[NonSerialized]
private List<SelectListItem> _mySelectList;
public List<SelectListItem> MySelectList
{
    get { return _mySelectList; }
    set { _mySelectList= value; }
} 
```

此外，为在添加 RedisSessionProvider、Redis、RedisSession 等后遇到此问题的任何人添加以下术语以供搜索。不客气。

# api - 适度的 Instagram API 工作流程

> ID：12145740
> 
> 赞同：0
> 
> 时间：2012-08-27T16:21:02.453
> 
> 标签：api, instagram

全部：

我对 Instagram API 一无所知，但被要求为我的公司开发 Instagram 工作流程。“喂，你的程序员对吗？”

我们的经理希望人们在 Instagram 上使用我们的产品，但他们不希望我们产品的图片以不利的方式展示。那么，我是否可以使用 Instagram API 创建一个工作流程来执行此操作：

用户使用 Instagram 并添加我们的主题标签 --> 公司应用程序过滤我们的标签 --> 发送到社论 --> 社论批准 Instagram 并发布图片。

这有意义吗？

谢谢， 规范

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T21:09:25.007

规范，

[您可以使用实时 API](http://instagram.com/developer/realtime/)订阅提要以获取与您的产品相关的标签的更新

我建议您将每个更新（新照片）存储在数据库中，然后开发一个前端来审查和批准图像。

[这](http://thegregthompson.com/instagram-real-time-api-php/)是一个关于如何在 php 中处理 API 的基本示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T22:56:44.063

yumyum 为您指出了一篇很棒的文章，我也使用它来创建您所针对的完全相同的系统。

该 api 每次调用仅返回大约 25 张图像。返回中包含用于进行下一次调用的分页信息。所以我最初遍历所有图像并将数据存储在我的数据库中。我的客户有一个前端，他可以在其中查看图像和相关数据，以及每个图像旁边的复选框，以确定该图像是否会在实际应用程序上“上线”。客户可以随时手动（单击按钮）检查新图像，这将再次启动上述过程，从而只添加不在数据库中的图像。

需要注意的一件事：您必须注意已被用户删除的图像，因为它们将无法再访问。我使用 jquery 检查加载图像时是否有错误，如果是，则通过 ajax 从数据库中删除它。

# python - 跟踪 Python 中的导入问题

> ID：12145743
> 
> 赞同：1
> 
> 时间：2012-08-27T16:21:09.693
> 
> 标签：python, import, trace

我在同一个文件夹中有 2 个外部库，我想将它们导入 Python。（即“vtkCommonPython”和“vtkFilteringPython”），它们都有 .pyd 和 .dll 文件。（vtkCommonPython.pyd 和 vtkCommonPythonD.dll 和另一个相同）

尽管我写下它们在同一个文件夹中

```
import vtkCommonPython 
```

很好，但是当我想导入另一个时

```
import vtkFilteringPython
ImportError: DLL load failed: The specified procedure could not be found. 
```

我还尝试使用从哪里加载第一个库

```
vtkCommonPython.__file__ 
```

另一个文件夹是同一个文件夹。

我如何追踪问题并找到问题的根源。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T16:28:48.490

尝试使用`-v`python 解释器的选项：

```
-v     : verbose (trace import statements) (also PYTHONVERBOSE=x) 
```

如：

```
python -v myscript.py 
```

# gprof - gprof 中计算的时间是否包括未分析的函数所花费的时间？

> ID：12145745
> 
> 赞同：0
> 
> 时间：2012-08-27T16:21:11.393
> 
> 标签：gprof

我现在有一个项目，我想对其进行分析，但它使用了另一个我无法控制的库。说如果有这样的功能：

```
#include <library.h>
void function(...)
{
    // do something
    for (...)
    {
        // ...
        library_function(...);
        // ...
    }
    // do something
} 
```

假设 library_function 来自另一个未在启用分析的情况下编译的静态库。现在，如果 gprof 告诉我跑步 `function`需要 10 秒，包括它的所有孩子，这会包括花在的时间`library_function`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T18:54:59.360

不，因为这种方式`gprof`有效，它对程序计数器进行采样，确定程序计数器在哪个函数中，并为该函数增加自身时间。

此外，它还计算任何函数 A 调用任何函数 B 的次数。

从那开始，它试图弄清楚其他一切。

当然，这只适用于它知道的功能。

这很聪明，但[*你可以做得更好*](https://stackoverflow.com/a/1779343/23771)。

补充：由于有人明智地决定删除上述帖子，这里简要总结一下如何做得更好：

[试试这个。](https://stackoverflow.com/questions/375913/what-can-i-use-to-profile-c-code-in-linux/378024#378024)
[这是一个 44 倍加速的示例。](https://stackoverflow.com/questions/926266/performance-optimization-strategies-of-last-resort/927773#927773)
[这是 730 倍的加速。](https://scicomp.stackexchange.com/a/1870/1262)
[这里是对统计数据的解释。](https://scicomp.stackexchange.com/a/2719/1262)
[这是批评的答案。](https://stackoverflow.com/a/18217639/23771)
[这是一个 8 分钟的视频演示。](http://youtu.be/xPg3sRpdW1U)

# linux - 如何在 Linux 中更新 Env 变量？

> ID：12145753
> 
> 赞同：1
> 
> 时间：2012-08-27T16:21:24.360
> 
> 标签：linux, bash

我已经定义了一个 Env 变量： `export NBR_PROCESS=2`

基本上我应该能够更新变量，但是当我执行以下脚本时，每次运行都会得到相同的结果：

```
#!/bin/bash
echo "Script 2: Before decrement : $NBR_PROCESS"
export NBR_PROCESS=$(($NBR_PROCESS - 1))
echo "Script 2: After decrement : $NBR_PROCESS" 
```

在每次执行时，我都会得到以下相同的结果：

```
Script 2: Before decrement : 2
Script 2: After decrement : 1 
```

我想做的是通过运行脚本来减少变量 NBR_PROCESS。

知道我在这里错过了什么吗？谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T16:25:30.080

你必须“来源”

资源`your_script`

* * *

编辑 1
看到[这个答案...](https://stackoverflow.com/questions/496702/can-a-shell-script-set-environment-variables-of-the-calling-shell)

* * *

编辑 2

`. filename [arguments]` 或者 `source filename [arguments]`

[完整解释：](http://www.gnu.org/software/bash/manual/bashref.html#Bourne-Shell-Builtins)

> 从当前 shell 上下文中的文件名参数读取并执行命令。如果文件名不包含斜杠，则使用 PATH 变量查找文件名。当 Bash 不处于 POSIX 模式时，如果在 $PATH 中找不到文件名，则搜索当前目录。如果提供了任何参数，它们将在执行 filename 时成为位置参数。否则位置参数不变。返回状态是最后执行的命令的退出状态，如果没有执行任何命令，则返回零。如果未找到文件名或无法读取文件名，则返回状态为非零。这个内置函数相当于 source。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T16:25:06.730

脚本（或任何可执行文件）无法更改 shell 的环境变量，因为它在不同的（子）进程中运行。改变 shell 内环境的唯一方法是通过`export`内置的。您还可以使用该`env`命令设置某些程序的环境，例如`env YOURVAR=1 yourprogram yourarguments`...

您可以使用 bash 函数或`eval`or`source`内置函数（间接调用`export`内置函数）。

阅读[高级 bash 脚本指南](http://tldp.org/LDP/abs/html/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T16:25:16.327

每次您运行脚本时，它都会获取您（或正在执行的用户）环境变量的新副本 - 并且它们保持在该进程的本地。换句话说，任何被修改的变量都只针对该实例进行修改。

如果进程创建子进程，同样的事情。孩子们会收到父母环境的副本，他们所做的任何更改都会在他们退出时“消失”。

正如 Luc M 所说，您可以使用`source`让您的脚本作为 Tlc 进程执行。这将允许所述脚本的内容也影响您的环境。

# python - python用列表项计算

> ID：12145754
> 
> 赞同：-3
> 
> 时间：2012-08-27T16:21:27.967
> 
> 标签：python, list

这是我的清单：

```
['-50.00', '60.00', '-63.00', '50.00', '-57.00'] 
```

我怎样才能用这个项目计算

```
-50.00+60.00-63.00+50.00-57.00 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T16:23:29.370

```
temp = ['-50.00', '60.00', '-63.00', '50.00', '-57.00']
sum(float(t) for t in temp) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T16:32:14.620

还有一个选择：

```
>>> import decimal
>>> float(sum(decimal.Decimal(x) for x in temp))
-60.0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T16:31:02.710

另一种将字符串转换为浮点数的方法是使用`map`

```
my_list = ['-50.00', '60.00', '-63.00', '50.00', '-57.00']

new_list = map(float, my_list) 
```

结果：

```
>>> new_list
[-50.0, 60.0, -63.0, 50.0, -57.0]
>>> sum(new_list)
-60.0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-19T06:56:22.490

你也可以使用 numpy 包：

```
 >>> import numpy as np
    >>> my_list = ['-50.00', '60.00', '-63.00', '50.00', '-57.00']
    >>> np.sum(np.array(my_list).astype(np.float))
    -60.0 
```

# python - 用 python 读取 csv 并处理空白

> ID：12145756
> 
> 赞同：-2
> 
> 时间：2012-08-27T16:21:34.577
> 
> 标签：python

我在这里逐行读取 csv 文件：

```
def GetDistinctValues(theFile, theColumn):
  lines=theFile.split('\n')
  allValues=[]
  for line in lines:
    if line:
        distinctValue=line.split(',')[theColumn]
        allValues.append(distinctValue)        
  return list(set(allValues)) 
```

这是我的 csv 的样子：

```
1,hat,dog
2,,cat
3,pants,elephant
4,,, 
```

如您所见，有时会有空白。

在上面的代码中，我试图获取特定列中的所有唯一值，但这不起作用，因为列有时会发生变化，因为它不考虑空白。

如何解释所有空白并从特定列中获取所有不同的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T16:55:09.693

也许是这样的：

```
import csv

def get_distinct_values(filename, column):
    with open(filename, "rb") as fp:
        reader = csv.reader(fp)
        return set(line[column] for line in reader) 
```

这使

```
>>> get_distinct_values("ccol.csv", 0)
set(['1', '3', '2', '4'])
>>> get_distinct_values("ccol.csv", 1)
set(['', 'hat', 'pants'])
>>> get_distinct_values("ccol.csv", 2)
set(['', 'elephant', 'dog', 'cat']) 
```

`set(line[column] for line in reader if line[column])`如果你想摆脱空值，你可以使用或其他东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T16:42:07.350

这将使您开始：

```
import csv
csvf=csv.reader(open(yourfile,'rb'))

col=0
rtr=set()
for row in csvf:
    rtr.add(row[col])

print rtr 
```

在您的示例中，打印：

```
set(['1', '3', '2', '4']) 
```

# c# - C# Winforms“投影矩阵”用于打印

> ID：12145763
> 
> 赞同：0
> 
> 时间：2012-08-27T16:22:06.433
> 
> 标签：c#, winforms, printing

我有一个`override Paint()`带有我自己的图纸的 UserControl。我想允许用户打印它。

因为我已经花了很多时间写了一个`public void Draw(Graphics e)`我希望重用这个方法并且只是通过`PrintEventArgs.Graphics`. 我意识到这并不是那么简单。我什至不得不自己翻页。

是否可以使用类似于 OpenGL“投影矩阵”的东西来计算“最佳拟合”或“100% 比例”类型的打印功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:38:39.350

Graphics 对象具有 Matrix 类型的 Transform 属性，可用于缩放、旋转等绘制的图形，其方式与 OpenGL 矩阵非常相似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:20:44.240

我会将用户绘图移动到一个单独的方法中，如下所示：

```
 protected override void OnPaint(PaintEventArgs e)
    {
        base.OnPaint(e);
        Rectangle client=new Rectangle(0, 0, ClientSize.Width-1, ClientSize.Height-1);
        Render(e.Graphics, client);
    }

    public void Render(Graphics g, Rectangle client)
    {
        g.DrawEllipse(Pens.Blue, client); //test draw
        //...
    } 
```

然后从打印文档中调用它：

```
 private void button1_Click(object sender, EventArgs e)
    {
        PrintPreviewDialog dlg=new PrintPreviewDialog();
        PrintDocument doc=new PrintDocument();

        doc.PrintPage+=(s, pe) =>
        {
            userControl11.Render(pe.Graphics, pe.PageBounds); // user drawing
            pe.HasMorePages=false;                
        };
        doc.EndPrint+=(s, pe) => { dlg.Activate(); };
        dlg.Document=doc;
        dlg.Show();            
    } 
```

结果： ![截图](../Images/8a3cee420be6cadef68740fa8d5597d2.png)

**编辑 1** 要在打印输出中保持相同数量的像素，然后将打印例程修改为：

```
 doc.PrintPage+=(s, pe) =>
        {
            Rectangle client = new Rectangle(
                pe.PageBounds.Left, 
                pe.PageBounds.Top,
                userControl11.ClientSize.Width-1,
                userControl11.ClientSize.Height-1 );
            userControl11.Render(pe.Graphics, client);
            pe.HasMorePages=false;                
        }; 
```

# tomcat - tomcat多次部署webapp

> ID：12145764
> 
> 赞同：5
> 
> 时间：2012-08-27T16:22:06.710
> 
> 标签：tomcat, web-applications, host, deploying

我正在使用 apache 2 和 tomcat 7 来运行我的 webapps..

当我启动 Tomcat 时，它的日志显示同一个 webapp 已经部署了很多次。

```
:
Deploying web application directory /var/www/web/www.mysite.com
:
:
Deploying web application directory /var/www/web/www.mysite.com
:
: 
```

该文件`server.xml`看起来像：

```
.............
<Host name="www.mysite.com" appBase="/var/www/web" unpackWARs="true" autoDeploy="false">
    <Context path="" docBase="www.mysite.com" debug="0" reloadable="true"/>
</Host>
<Host name="www.mysitetwo.com" appBase="/var/www/web" unpackWARs="true" autoDeploy="false">
    <Context path="" docBase="www.mysitetwo.com" debug="0" reloadable="true"/>
</Host>
<Host name="localhost"  appBase="webapps" unpackWARs="true" autoDeploy="true">  
.......... 
```

怎么能避免呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-17T01:36:52.777

我有一个类似的问题。我有 4 台主机，每个主机一个上下文，每个上下文部署了 4 次。

主机部署`server.xml`应用程序基础目录中定义的显式上下文和上下文。

Application Base Directory 在`<Host appBase="dir">`标签中定义。默认值为：

`$CATALINA_BASE/webapps`

如果两个或多个主机使用相同的 Application Base Directory，则 Application Base 中的每个子目录将部署多次作为主机数量。

我解决了保持`$CATALINA_BASE/webapps`空白的问题，并将每个上下文从应用程序基础目录中取出。

[http://tomcat.apache.org/tomcat-7.0-doc/config/host.html](http://tomcat.apache.org/tomcat-7.0-doc/config/host.html)

# gwt - 解决 gwt 同源策略

> ID：12145768
> 
> 赞同：2
> 
> 时间：2012-08-27T16:22:28.277
> 
> 标签：gwt, same-origin-policy

我有一个 gwt 应用程序，我在标准 gwt 端口 8888 上调试它与在端口 8080 上运行的 JAX-RS/Jersey/Glassfish 服务通信

这是 gwt 代码：

```
StringBuffer postData = new StringBuffer();

postData.append(URL.encode("username")).append("=").append(URL.encode(user));
postData.append("&");
postData.append(URL.encode("password")).append("=").append(URL.encode(password));

RequestBuilder builder = new RequestBuilder(RequestBuilder.POST, "http://localhost:8888/gestdoc/resources/data/login");
builder.setHeader("Content-type", "application/x-www-form-urlencoded");
try {
    builder.sendRequest(postData.toString(), new RequestCallback() {

          public void onResponseReceived(Request request, Response response) 
          {
              String responseText = response.getText();
              String headers= response.getHeadersAsString();
              String statusText= response.getStatusText();
              int statusCode= response.getStatusCode();
              String toString= response.toString();

              System.out.println("responseText: "+responseText);
              System.out.println("headers: "+headers);
              System.out.println("statusTest: "+statusText);
              System.out.println("statusCode: "+statusCode);
              System.out.println("toString: "+toString);

              GestoreUtenze.this.cddoc.loginResponse(true);
          }

          public void onError(Request request, Throwable exception) {
             // exception handling
          }
        });
} catch (RequestException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

这是输出：

```
responseText: 
headers: 
statusTest: 
statusCode: 0
toString: com.google.gwt.http.client.Request$1@6c1a82 
```

我有一个 java 批处理客户端，我已经测试了我的 Jersey 服务并且没问题。

我读过很多帖子，我想我有一个相同的起源政策问题。

我尝试了很多解决方案：

1.  运行我使用非同源策略（chrome 和 firefox）调试我的 gwt 应用程序的浏览器
2.  在我的 gwt 配置文件中添加行
3.  我试图设置代理但没有成功。我能怎么做？

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:55:21.327

我发现唯一可用的方法是启动谷歌浏览器

```
--disable-web-security 
```

这将禁用同源策略。

您可以在 Win 7 中通过按 [Strg + SHift + 右键单击​​] --> 属性并将 --disable-web-security 添加到目标属性来执行此操作。但是，您应该只在调试时使用此属性！

FF 和 IE 似乎没有绕过 SOP 政策的工作方式（无法让我在网上找到的任何示例都可以工作并且至少尝试了一周！:/)

# postgresql - 可以为空的列在 PostgreSQL 中是否会占用额外的空间？

> ID：12145772
> 
> 赞同：27
> 
> 时间：2012-08-27T16:23:06.137
> 
> 标签：postgresql, database-design, indexing, null

我有一个有 7 列的表，其中 5 列将为空。`int`我将在、`text`、`date`、`boolean`和`money`数据类型上有一个空列。该表将包含数百万行，其中包含许多空值。恐怕空值会占用空间。

另外，你知道 Postgres 是否索引空值吗？我想防止它索引空值。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-08-27T18:04:53.007

基本上，值在 NULL 位图中`NULL`占据**1 位。**但这并不是那么简单。

空位**图**（每行）仅在该行中至少有一列包含`NULL`值时才分配。这可能会在具有 9 列或更多列的表中导致看似自相矛盾的效果：将第一个`NULL`值分配给列可能会比向其写入值占用更多的磁盘空间。相反，从行中删除最后一个 NULL 值也会删除 NULL 位图。

物理上，初始空位图在（23 字节）和实际列数据或行（如果您仍然应该使用它）之间占用**1 个字节- 它***始终*以（通常为**8 字节**）的倍数开始。这会留下*1 个字节*的填充，供初始空位图使用。`HeapTupleHeader``OID`*`MAXALIGN`*

 ****实际上，对于 8 列或更少列的表（包括已删除但尚未清除的列） ， **NULL 存储是完全免费的。**
之后，为接下来的列（通常为 64）`MAXALIGN`分配另一个字节（通常为 8个）。`MAXALIGN * 8`等等。

[手册中](https://www.postgresql.org/docs/current/storage-page-layout.html)和这些相关问题下的更多详细信息：

*   [使用 postgresql DB 存储 NULL 值需要多少磁盘空间？](https://stackoverflow.com/q/4229805)
*   [在 PostgreSQL 中不使用 NULL 是否仍然在标头中使用 NULL 位图？](https://stackoverflow.com/q/5008753)
*   [我可以在 Heroku 上的 5 MB PostgreSQL 中存储多少条记录？](https://stackoverflow.com/q/10885706)

了解数据类型的对齐填充后，您可以进一步优化存储：

*   [在 PostgreSQL 中计算和节省空间](https://stackoverflow.com/questions/2966524/calculating-and-saving-space-in-postgresql/7431468#7431468)

但是，您可以节省大量空间的情况很少见。通常不值得努力。

[@Daniel](https://stackoverflow.com/a/12146452/939860)已经涵盖了对索引大小的影响。

**请注意**，**删除的列**（尽管现在不可见）保留在系统目录中，直到重新创建表。那些僵尸可以强制分配（放大的）NULL 位图。看：

*   [在大型数据集上删除 Postgres 中的列](https://stackoverflow.com/questions/15699989/dropping-column-in-postgres-on-a-large-dataset/15700213#15700213)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-27T17:16:08.630

值是否`NULL`到达索引至少取决于索引的类型。基本上，对于和索引类型，这将是**YES**，对于，对于索引类型，这似乎**是 YES 或 NO** **，**具体取决于 PostgreSQL 版本。`btree``gist`**`hash`**`gin`****

 ****表格中曾经有一个布尔列`amindexnulls`来`pg_catalog.pg_am`承载该信息，但在 9.1 中它已经消失了。可能是因为索引在 PG 改进中变得更加复杂。

在您的数据的特定情况下，最好的了解方法是使用`pg_relation_size('index_name')`函数测量索引的大小差异，在完全 NULL 和完全 NOT NULL 的内容之间，使用您的确切 PG 版本、确切数据类型、确切索引类型和定义. 并且知道，未来任何这些参数的变化都可能改变结果。

但无论如何，如果您“只是”想避免索引 NULL，则始终可以创建部分索引：

```
CREATE INDEX partial_idx(col) ON table WHERE (col is not null) 
```

这将占用更少的空间，但这是否有助于查询的性能取决于这些查询。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T16:31:13.073

我相信每个人都会在该行的位图中使用一个位。见这里：[http ://www.postgresql.org/docs/9.0/static/storage-page-layout.html#HEAPTUPLEHEADERDATA-TABLE](http://www.postgresql.org/docs/9.0/static/storage-page-layout.html#HEAPTUPLEHEADERDATA-TABLE)********

# fortran - 防止 FORTRAN 在输入字符而不是数字时关闭

> ID：12145774
> 
> 赞同：3
> 
> 时间：2012-08-27T16:23:14.547
> 
> 标签：fortran, gfortran

我有一个需要一个数字的读取语句，非常简单的示例代码：

```
program test
integer var
read(*,*) var
end 
```

问题是我通常会因为分心而输入一串字符（即：*是*）。如何防止我的代码完全停止，而是显示*您输入的值不正确类型的错误消息。再试一次*？

我在想类似的事情：

```
 program test
    integer var
10  read(*,*) var
    if (var.not.a.number) then
      write(*,*)'You've entered an incorrect value. Try again'
      goto 10
    endif
    end 
```

var.not.a.number条件**会是什么样子**？我用`gfortran`在Ubuntu下编译。

* * *

**编辑**：谢谢大家！我最终实现了 HPM 的第三个选项，因为它是最简单的一个：

```
 program test
    integer var,iostat,ios
10  read(*,*,iostat=ios) var
    if (ios.ne.0) then
      write(*,*)'You've entered an incorrect value. Try again'
      goto 10
    endif
    end 
```

特别感谢`User7391`谁努力编写所有代码！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T16:32:45.403

您正在使用*list-directed input*。`*`语句中的第二个`read(*,*)`本质上告诉编译器/运行时系统，您将在运行时为其提供可以解释为`integer`. 如果您想给自己在输入时犯错误的自由，那么您（至少）有 3 个选择。

1.  正如@User7391 的回答所说，您可以将输入读入字符变量并自己解析。那位好心的用户甚至主动提出为您编写代码！
2.  您可以将读取命令修改为错误处理语句的标签在`read(*,*,err=1234)`哪里。`1234`这种方法现在被认为是相当过时的，可能会受到反对。
3.  您可以将读取命令修改为类似于`read(*,*,iostat=ios)`where `ios`is an integer variable 它捕获语句`iostat`报告的（i/o 状态标志） 。`read`然后，您可以编写`if (iostat/=0) ...`用于错误处理的行。这被认为是最新的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T16:26:38.320

也许您可以将值读入字符变量，然后相应地处理该字符变量。

如果它只包含数字，则将其存储在 var 中，否则，报告错误并循环返回。

要检查字符是否只是数字，请考虑以下示例代码：

```
PROGRAM test
CHARACTER(len=100) :: input
LOGICAL :: is_numeric, success
INTEGER :: var

DO 
READ(*,*) :: input
IF (is_numeric(input)) THEN
  READ(input,*) var
  success = .TRUE.
ELSE
  WRITE(*,*) 'ERROR: Input is not numeric.'
END IF

IF (success) THEN
  break
END IF

END DO

END PROGRAM test

LOGICAL FUNCTION is_numeric(string)
  IMPLICIT NONE
  CHARACTER(len=*), INTENT(IN) :: string
  LOGICAL :: is_numeric
  INTEGER :: var
  INTEGER :: error_val
  READ(string,*,IOSTAT=error_val) x ! This line converts string to an integer
                            ! If there was an error, the error_val variable is
                            ! non-zero

  is_numeric = error_val==0

END FUNCTION is_numeric 
```

如果您在编写示例代码方面需要帮助，请告诉我。

您需要能够将字符转换为整数。这可以通过内部读/写语句实现。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-27T16:32:19.170

使用旧的 FORTRAN：

```
90 continue
read (*, *, err=90) number 
```

这可以更详细地进行，您可以在其中测试错误并输出错误消息。

# jquery - 使用jqGrid，在编辑记录弹出窗口中是否有动态下拉菜单？

> ID：12145779
> 
> 赞同：1
> 
> 时间：2012-08-27T16:23:28.620
> 
> 标签：jquery, jqgrid

我有一个包含三个字段的记录，它们都是下拉列表。如果它们是独立的记录，这一切都很好，但是我希望如果您更改第一个下拉列表，那么第二个下拉列表中的项目列表会更改吗？这在 jqgrid 中是否可能。

我的代码的简化版本现在看起来像这样：

```
jQuery("#marketDataGrid").jqGrid({
    mtype: "POST",
    url: "/Application/MarketData/" + id,
    datatype: "json",
    colNames: ["", "Id","Source", "API"],
    colModel: [
        { name: "ApplicationId", index: "ApplicationId", hidden: true, width: 0, editable: true, editoptions: { readonly: true} },
        { name: "Id", index: "Id", hidden: false, width: 30, editable: false, editoptions: { readonly: true} },
        { name: "MarketDataSource", index: "MarketDataSource", editoptions: { dataUrl: "/MarketDataSource/GetSelectDataRequired" }, editrules: { required: true }, editable: true, edittype: "select", width: 155, stype: 'select', searchoptions: { sopt: ['eq', 'ne'], dataUrl: "/MarketDataSource/GetSelectData"} },
        { name: "API", index: "API", editoptions: { dataUrl: "/API/GetSelectDataRequired" }, editrules: { required: true }, editable: true, edittype: "select", width: 155, stype: 'select', searchoptions: { sopt: ['eq', 'ne'], dataUrl: "/API/GetSelectData"} }

    ], 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T06:16:49.403

在 jqGrid 中没有简单的方法来实现依赖选择。尽管如此，我在[演示](http://www.ok-soft-gmbh.com/jqGrid/editwithdependendselects2.htm)中从[答案](https://stackoverflow.com/a/4480184/315935)中展示了如何实现依赖选择。我在树案例中演示了实现：内联编辑、表单编辑和搜索工具栏。

在您的情况下，您在引用的演示中使用`dataUrl`而`editoptions`不是使用。`value`然而，实现可以基于相同的想法。`change`您可以为“主”选择注册事件`$.ajax`并向服务器发出请求以获取从属选择的选择选项的子集。在你的`success`手柄内部`$.ajax`将能够像我的演示一样做同样的事情。

# jquery - jQuery UI 从 ui.value 获取特定数字

> ID：12145787
> 
> 赞同：0
> 
> 时间：2012-08-27T16:23:56.557
> 
> 标签：jquery, jquery-ui

我只需要从滑块上的 ui.value 中获取倒数第二个数字。

这是我如何获得最后一位数字：

```
var $lastNumber = ui.value % 10; 
```

这是我正在使用的实际代码：

```
activeBackground_2 = 'url(images/numbers/20'+ui.value % 10+'.png)'; 
```

我将如何仅从最后一位获得第二位？不是第二个数字之后的所有内容，而只是那个特定数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:25:20.677

也许：

```
var $lastNumber = parseInt((ui.value / 10), 10) % 10; 
```

# maven - 从 Maven 中央存储库下载不起作用

> ID：12145793
> 
> 赞同：1
> 
> 时间：2012-08-27T16:24:19.087
> 
> 标签：maven, netbeans

我正在使用 Netbeans 7.2 和 Maven 3.0.4。由于某种原因，我的计算机无法下载依赖项甚至存储库索引。当我运行一个项目并且 Maven 尝试从“ [http://repo.maven.apache.org/maven2/junit/junit/4.6/junit-4.6.jar](http://repo.maven.apache.org/maven2/junit/junit/4.6/junit-4.6.jar) ”下载存储库时，进度指示器停留在 0% . 当 Maven 尝试下载存储库索引时，也会发生同样的事情。

基本上，我和这个问题有同样的问题：[Netbeans: Transferring Maven Repository index: Central - 卡在 0%](https://stackoverflow.com/questions/9875028/netbeans-transferring-maven-repository-index-central-stuck-at-0)，但选择的答案对我不起作用。我也尝试过使用不同的镜子，但似乎没有任何效果。

* * *

**解决了**

好的，原来我的 AVG Anti-Virus 2012 以某种方式停止了下载。禁用 AVG 解决了这个问题。更具体地说，我认为是 AVG 的 LinkScanner 模块负责停止下载。

# .net-assembly - 什么是 .NET 汇编文化？

> ID：12145795
> 
> 赞同：7
> 
> 时间：2012-08-27T16:24:27.763
> 
> 标签：.net-assembly, culture, satellite

在网站上搜索后，我发布了这个问题。我知道默认情况下程序集是“文化中立的”这一事实，并且可以创建具有文化特定信息的只有资源（没有代码）的附属程序集，并将它们放在与文化名称相同的文件夹中（即 en-us） . 但问题是，什么是文化？一些具体的现实例子会有所帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T16:26:55.350

根据 MSDN，这包括诸如[文化名称、书写系统、使用的日历以及日期和排序字符串的格式](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.aspx)。

对于翻译来说，最重要的方面是语言和方言的结合。这是一个很好[的示例列表](http://www.csharp-examples.net/culture-names/)。

例如，考虑英国英语 (en-GB) 与美国英语 (en-US) 与加拿大英语 (en-CA) 与澳大利亚英语 (en-AU) 与至少存在的十种其他英语方言 (我不骗你/看我链接的列表）。然后，比较和对比他们说俄语（ru-RU）。除了语言上的差异外，基数指示符、数字分组、日期（MDY vs DMY）等也有不同的符号......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T16:58:08.663

很多事情都是 dd/mm/yyyy 而不是 mm/dd/yyy

1.500,00 欧元而不是 1,500.00 美元

它是从左到右或从右到左的排序顺序。

基本上文化是抽象所有这些真正令人恼火的问题的方式，所以你剩下我们必须处理的两个主要问题

使用已安装的文化，而不必知道它是什么，例如`DateTime.Now.ToString("d");`

无论如何都要使用这种特定的文化。

```
DateTime.Now.ToString("d",_currentUser.Culture); 
```

.net this 最有价值的部分之一。曾经是一场彻头彻尾的噩梦。

# javascript - eval 不起作用，但 JSON.parse 可以

> ID：12145796
> 
> 赞同：1
> 
> 时间：2012-08-27T16:24:34.330
> 
> 标签：javascript, eval

我有一个从服务器返回的字符串。它的格式，

```
[{"text":"content"}] 
```

where`content`是一个动态字符串，将根据用户操作而变化。在一种这样的特殊情况下，返回的字符串不能被评估，但是当我使用时`JSON.parse`，它可以正常工作而没有问题。我的评估如下

```
eval("(" + response + ")"). 
```

由于某些限制，我无法在此处粘贴有问题的字符串。但是是否有任何特殊情况`eval`不起作用并且`JSON.parse`会起作用？

**EDIT1：** 我缩小了问题范围，给出问题的特定字符串是，

```
[{"con" :"g &lt;\/font><\/td"}] 
```

这个字符串不能被评估，但可以被解析。我猜这个问题是因为刺痛“/”。但我无法理解为什么。在这方面的任何帮助都会很棒。

**EDIT2：** g 和 < 之间存在一个不可见的字符，这导致了问题。有谁知道是什么角色？我会将 eval 更改为 JSON.parse。但我想知道它失败的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T19:21:12.880

That buggy character is U+8232, the [Unicode `LINE SEPARATOR`](http://en.wikipedia.org/wiki/Unicode_control_characters#Unicode_introduced_separators). It leads to "unterminated string literal" syntax errors in various browsers, this is why it does not work to `eval()` the string. `JSON.parse` can work around that, as [JSON is not really a JS subset](http://timelessrepo.com/json-isnt-a-javascript-subset) in that perspective.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T16:38:13.470

使用[json2 库](https://github.com/douglascrockford/JSON-js)来解析您的 JSON。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-27T16:45:21.870

您对解析 JSON 和解析 JavaScript 感到困惑。`eval()`不解析 JSON。Eval 需要有效的 JS 语法。在`"test":"test"`中，属性周围的引号在 javascript 对象文字表示法中无效

# sql - Oracle SQL 游标 for 循环检查 START_DATE 和 END_DATE 之间并分配行程值

> ID：12145798
> 
> 赞同：0
> 
> 时间：2012-08-27T16:24:41.647
> 
> 标签：sql, date, for-loop, cursor, oracle11g

我正在使用 SQL Developer for Oracle 11g ..

我需要能够遍历一组日期，检查上面或下面的 END_DATE 是否比下一个 END_DATE 为 = 或 < 或 > 并且 START_DATE 不同..

然后分配一个与其 = 相同的行程编号或分配一个新的行程编号，然后开始新的行程并再次检查下一组日期以查看其 = 或 < 或 > 是否比当前日期..

我认为为了做到这一点，我需要使用 pl/sql 游标进行循环。我试图弄清楚，但它对我来说没有多大意义。

例如，我希望最终结果是这样的..

```
ROWID   START_DATE END_DATE   TRIP
  1         30-DEC-11  1-Jan-12 1
  2         31-DEC-11  2-Jan-12 2
  3         31-DEC-11  2-Jan-12 2
  4         01-JAN-12  3-Jan-12 3
  5         03-JAN-12  4-Jan-12 4
  6         01-JAN-12  1-Jan-12 5
  7         02-JAN-12  4-Jan-12 6 
```

在此先感谢您的帮助。亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:33:24.877

根据您拥有的数据，您只需枚举日期对。你也可以用 dense_rank() 来做到这一点：

```
select t.*,
       dense_rank() over (order by start_date, end_date) as trip
from t 
```

对于您的数据，这将更改排序。如果你想保持大致相同的顺序，那么首先聚合，获取最小行 id，然后执行 dense_rank() 或 row_number()，然后重新加入原始数据：

```
select t.*, trip
from (select start_date, end_date, row_number() over (partition by row_id) as trip
      from (select start_date, end_date, min(rowid) as rowid
            from t
            group by start_date, end_date
           ) a
     ) b join
     t
     on b.start_date = t.start_date and b.end_date = t.end_date 
```

# jquery - 与 IE8/9 相比，IE7 中的选项卡看起来不同

> ID：12145799
> 
> 赞同：0
> 
> 时间：2012-08-27T16:24:45.657
> 
> 标签：jquery, html, css

我的主页上有 3 个标签。它们在 IE8/9 中运行良好。但在 IE7 中，其中一个选项卡看起来不同。它的高度大于其他 2 个选项卡。我如何在不改变高度的情况下控制它们，因为如果我在这里改变高度，它在 IE8/9 中会变得很糟糕。这是代码：

```
<div id="fig-tabs">
          <strong class="tab1">AAA</strong> <a href="#" class="tab">BBB</a> <a href="#" class="tab">CCC</a>
        </div> 
```

它使用corner.js，它使用以下代码：

```
$(document).ready(function() {
   $('.tab1').corner("5px");
   $('.tab').corner("5px");
}); 
```

css相关：

```
#fig-tabs { }

strong.tab1
{
    color: #CCC;
    background-color: #CCC;
    padding: 3px 8px 7px 8px;   
    text-decoration: none;
}

a.tab
{
    color: #CCC;
    background-color: #CCC;
    padding: 3px 10px 2px 8px;  
    text-decoration: none;
}

a.tab:hover { background-color: #CCC; } 
```

# android - 在数据库中插入初始数据

> ID：12145806
> 
> 赞同：0
> 
> 时间：2012-08-27T16:24:52.487
> 
> 标签：android, sqlite

所以，我想我终于准备好开始在我的应用程序中使用我的数据库了，但是......我没有任何数据！:o

我一直在研究在应用程序中获取数据的许多不同方法：

写插入行导入一个csv（这对我来说听起来很有趣，希望不会太痛苦）用软件打开数据库并开始调整/导入/无论如何

我想我想做一个csv。但我不知道在哪里做！在数据库管理器类中创建？个人课程本身？

这是我的 dbmanager 类：

```
package com.bluej.movingbuddy;

import java.util.ArrayList;
import java.util.List;
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.database.SQLException;
import android.util.Log;

public class MBDatabaseManager extends SQLiteOpenHelper {

//Database Version
private final static int DATABASE_VERSION = 1;

//Database Name
private final static String DATABASE_NAME = "dbMovingBuddy";

//items and weights table name
private final static String tblInW = "ItemsAndWeights";
//items and weights table columns
private final static String InWID = "ID";
private final static String InWItem = "Item";
private final static String InWDesc = "Description";
private final static String InWWeightOne = "Weight1";
private final static String InWWeightTwo = "Weight2";
private final static String InWWeightThree = "Weight3";
private final static String InWWeightAvg = "WeightAvg";

//allowances table name
private final static String tblAllowances = "Allowances";
//allowances table columns
private final static String AllowancesID = "ID";
private final static String AllowancesRank = "Rank";
private final static String AllowancesWithDep = "WithDep";
private final static String AllowancesNoDep = "NoDep";

//estimator table name
private final static String tblEstimator = "Estimator";
//estimator table columns
private final static String EstimatorID = "ID";
private final static String EstimatorRoom = "Room";
private final static String EstimatorItem = "Item";
private final static String EstimatorWeight = "Weight";

//inventory table name
private final static String tblInventory = "Inventory";
//inventory table column
private final static String InventoryID = "ID";
private final static String InventoryItem = "Item";
private final static String InventoryWeight = "Weight";
private final static String InventoryValue = "Value";
private final static String InventoryImage1 = "Image1";
private final static String InventoryCondition = "Condition";
private final static String InventoryImage2 = "Image2";
private final static String InventoryNotes = "Notes";
private final static String InventoryMovingInstructions = "MovingInstructions";

//stunt table name
private final static String TABLE_NAME = "database_table";
//stunt table column names
private final static String TABLE_ROW_ID = "id";
private final static String TABLE_ROW_ONE = "table_row_one";
private final static String TABLE_ROW_TWO = "table_row_two";

public MBDatabaseManager(Context context) {
    // TODO Auto-generated constructor stub
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub
    //This string is used to create the database. It should be changed to suit your needs.

    //create items and weights table
    String dbCreateItemsAndWeights = "create table " +
    tblInW +
    " (" +
    InWID + " integer primary key autoincrement not null," +
    InWItem + " text," +
    InWDesc + " text," +
    InWWeightOne + " integer," +
    InWWeightTwo + " integer," +
    InWWeightThree + " integer," +
    InWWeightAvg + " integer" +
    ");";

    db.execSQL(dbCreateItemsAndWeights);

    //allowances table
    String dbCreateAllowances = "create table " +
    tblAllowances +
    " (" +
    AllowancesID + " integer primary key autoincrement not null," +
    AllowancesRank + " text," +
    AllowancesWithDep + " integer," +
    AllowancesNoDep + " integer" +
    ");";

    db.execSQL(dbCreateAllowances);

    //estimator table
    String dbCreateEstimator = "create table " +
    tblEstimator + 
    " (" +
    EstimatorID + " integer primary key autoincrement not null," +
    EstimatorRoom + " text," +
    EstimatorItem + " integer" +
    EstimatorWeight + " integer" +
    ");";

    db.execSQL(dbCreateEstimator);

    //inventory table
    String dbCreateInventory = "create table " +
    tblInventory + 
    " (" +
    InventoryID + " integer primary key autoincrement not null," +
    InventoryItem + " text," + 
    InventoryWeight + " integer," +
    InventoryValue + " integer," +
    InventoryImage1 + " blob," +
    InventoryCondition + " text," + 
    InventoryImage2 + " blob," + 
    InventoryNotes + " text," +
    InventoryMovingInstructions + " text" +
    ");";

    db.execSQL(dbCreateInventory);      

    //stunt table
    String newTableQueryString = "create table " +
    TABLE_NAME +
    " (" +
    TABLE_ROW_ID + " integer primary key autoincrement not null," +
    TABLE_ROW_ONE + " text," +
    TABLE_ROW_TWO + " text" +
    ");";

    db.execSQL(newTableQueryString);        

    //inject data into the tables here? this is probably the best place???

}

public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub

    db.execSQL("DROP TABLE IF EXISTS " + tblInW);
    db.execSQL("DROP TABLE IF EXISTS " + tblAllowances);
    db.execSQL("DROP TABLE IF EXISTS " + tblEstimator);
    db.execSQL("DROP TABLE IF EXISTS " + tblInventory);
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);

    onCreate(db);
}

// Adding a row to the database table

public void addInWItem(String string){

}
public void addRow(String rowStringOne, String rowStringTwo){

    SQLiteDatabase db = this.getWritableDatabase();

    //this is a key value pair holder used by android's SQLite functions
    ContentValues values = new ContentValues();
    values.put(TABLE_ROW_ONE, rowStringOne);
    values.put(TABLE_ROW_TWO, rowStringTwo);

    //ask the database object to insert the new data
    try {
        db.insert(TABLE_NAME,  null, values);
    } catch (Exception e) {
        // TODO Auto-generated catch block
        Log.e("DB ERROR", e.toString());
        e.printStackTrace();
    }
}

//DELETING A ROW FROM THE DATABASE TABLE
//
// This is an example of how to delete a row from a database table
// using this class. In most cases, this method probably does not need to be rewritten.
//
// @param rowID the SQLite database identifier for the row to delete.
//
public void deleteRow(long rowID){
    SQLiteDatabase db = this.getWritableDatabase();
    // ask the database object to delete the row of given rowID
    try {
        db.delete(TABLE_NAME, TABLE_ROW_ID + "=" + rowID, null);
    } catch (Exception e) {
        // TODO Auto-generated catch block
        Log.e("DB ERROR", e.toString());
        e.printStackTrace();
    }

}

//UPDATING A ROW IN THE DATABASE TABLE
//
// This is an example of how to update a row in the database table
// using this class. You should edit this method to suit your needs.
//
// @param rowID the SQLite database identifier for the row to update.
// @param rowStringOne the new value for the row's first column
// @param rowStringTwo the new value for the row's second column

public void updateRow(long rowID, String rowStringOne, String rowStringTwo){

    SQLiteDatabase db = this.getWritableDatabase();

    //this is a key value pair holder used by android's SQLite functions
    ContentValues values = new ContentValues();
    values.put(TABLE_ROW_ONE,  rowStringOne);
    values.put(TABLE_ROW_TWO,  rowStringTwo);

    //ask the database object to update the database row of given rowID
    try {
        db.update(TABLE_NAME,  values, TABLE_ROW_ID + "=" + rowID, null);
    } catch (Exception e) {
        // TODO Auto-generated catch block
        Log.e("DB Error", e.toString());
        e.printStackTrace();
    }
}

//RETRIEVING A ROW IN THE DATABASE TABLE
//'
// This is an example of how to retrieve a row from a database table using this class. You should edit this method to suit your needs.
//
// @param rowID the id of the row to retrieve
// @return an array containing the data from the row

public ArrayList<Object> getRowAsArray(long rowID){

    SQLiteDatabase db = this.getReadableDatabase();
    //create an array list to store data from the database row.
    //I would recommend creating a JavaBean compliant object 
    //to store this data instead. That way you can ensure data types are correct.
    ArrayList<Object> rowArray = new ArrayList<Object>();
    Cursor cursor;

    try {
        // this is a database call that creates a "cursor" object.
        // the cursor object stores the information collected from the 
        // database and is used to iterate through the data.
        cursor = db.query(
                TABLE_NAME,
                new String[] { TABLE_ROW_ID, TABLE_ROW_ONE, TABLE_ROW_TWO },
                TABLE_ROW_ID + "=" + rowID,
                null, null, null, null, null);

        //move the pointer to position zero in the cursor.
        cursor.moveToFirst();

        // if there is data available after the cursor's pointer, add
        // it to the ArrayList that will be returned by the method.

        if (!cursor.isAfterLast()){
            do{

                rowArray.add(cursor.getLong(0));
                rowArray.add(cursor.getString(1));
                rowArray.add(cursor.getString(2));

              } while (cursor.moveToNext());

            }

        //let java know that you are through with the cursor.
        cursor.close();

    } catch (SQLException e) {
        // TODO Auto-generated catch block
        Log.e("DB ERROR", e.toString());
        e.printStackTrace();
    }

    //return the ArrayList containing the given row from the database.
    return rowArray;

    }

//RETRIEVING ALL ROWS FROM THE DATABASE TABLE
//
//This is an example of how to retrieve all data from a database table using this class.
//You should edit this method to suit your needs.
//
// the key is automatically assigned by the database

public ArrayList<ArrayList<Object>> getAllRowsAsArrays(){

    SQLiteDatabase db = this.getReadableDatabase();

    //create an ArrayList that will hold all of the data collected from the database
    ArrayList<ArrayList<Object>> dataArrays = new ArrayList<ArrayList<Object>>();

    //this is a database call that creates a "cursor" object.
    //the cursor object stores the information collected from the database and is used to iterate through the data.
    Cursor cursor;

    try{
        //ask the database object to create the cursor.
        cursor = db.query(
                TABLE_NAME,
                new String[]{TABLE_ROW_ID, TABLE_ROW_ONE, TABLE_ROW_TWO},
                null, null, null, null, null
                );

        //move the cursor's pointer to position zero.
        cursor.moveToFirst();

        //if there is data after the current cursor position add it to the ArrayList.
        if (!cursor.isAfterLast()){

            do
            {
                ArrayList<Object> dataList = new ArrayList<Object>();

                dataList.add(cursor.getLong(0));
                dataList.add(cursor.getString(1));
                dataList.add(cursor.getString(2));

                dataArrays.add(dataList);
            } 

            //move the cursor's pointer up one position.
            while (cursor.moveToNext());

        }
    }
    catch (SQLException e){

        Log.e("DB ERROR", e.toString());
        e.printStackTrace();
    }

    //return the ArrayList that holds the data collected from the database.
    return dataArrays;
}

 } 
```

那么，在我写好表 sql 并执行之后，我应该从哪里开始填充数据呢？

我将要进行的第一个数据库交互是在另一个类上填充一个微调器。我应该在那个班级还是在这里填充微调器？我想我还没有真正找到人们开始输入数据的地方，只是人们使用不同的方式。

最佳做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:44:48.210

看一下这个。它应该回答你的大部分问题：http: [//developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

# drupal-6 - 如何在 Drupal 6 的首页显示视图？

> ID：12145807
> 
> 赞同：0
> 
> 时间：2012-08-27T16:24:58.103
> 
> 标签：drupal-6, drupal-views

我是 Drupal 6 模块的新手，我现在正在学习 Views 模块。`News View`到目前为止，我已经创建了一个`Fields`，编辑了`Filters`我想要显示的内容。我的问题是，我将如何在我的网站页面上显示我新创建的视图，就像在首页一样，我应该在 my 上添加条件`page.tpl.php`还是应该在 my 上配置`Blocks`？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:36:28.633

在视图中，添加“页面”类型的显示。配置“页面设置”，然后您可以在菜单中使用该页面或作为网站首页。

# spring - 在应用服务器的所有克隆中运行的 qrtz 调度程序

> ID：12145811
> 
> 赞同：0
> 
> 时间：2012-08-27T16:25:12.893
> 
> 标签：spring, quartz-scheduler, timertask

我们是否有来自quartz_scheduler 或spring 框架的任何支持来在应用程序服务器的所有克隆（实例）中运行计划作业？

在我的项目中，我们有 2 个应用程序服务器实例用于负载平衡。在使用单例 bean 创建服务器启动期间，我们将一些重要的细节存储在 JVM 的缓存内存中，当某些数据发生变化时，我们需要刷新缓存内存，而无需重新启动服务器。

如果石英调度程序在 server1 中运行，则缓存内存不会在 server2 中刷新，反之亦然。所以我需要一个永久解决这个问题的方法，我应该能够通过更新查询来控制工作。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:48:03.663

如果您在集群配置中运行 Quartz，计划作业将仅在一个随机实例上运行。目前，您无法安排作业在集群中的所有节点上运行。另一方面，如果每个应用程序都运行独立的 Quartz 调度程序，那么它们彼此之间一无所知。因此，如果您在一个实例上安排作业，它将在完全相同的实例上运行。

您真正需要的不是分布式作业调度（我猜您正在调度一个作业以异步更新两个实例上的缓存），而是**分布式缓存**。这个想法是每次更新缓存时，更改都会自动复制到所有其他实例。Spring还通过`@Cacheable`注解提供了一些缓存抽象。

使用 RMI 复制、[terracotta](/questions/tagged/terracotta "show questions tagged 'terracotta'")、[hazelcast](/questions/tagged/hazelcast "show questions tagged 'hazelcast'")和许多其他工具查看[ehcache 。](/questions/tagged/ehcache "显示标记为“ehcache”的问题")他们做得更好。缓存和分发更改。

# ruby-on-rails - rake：rake 任务中未初始化的常量

> ID：12145814
> 
> 赞同：0
> 
> 时间：2012-08-27T16:25:15.383
> 
> 标签：ruby-on-rails, ruby, rake, whenever

我在`/app/lib`.

我有一个 Rake 任务，无论何时，它都会尝试加载环境，然后执行其中一个类方法。

这是 rake 任务的示例：

```
namespace :box do
  task :fetch => :environment do
  BoxInterface::Tasc::Fetcher.fetch
  end
end 
```

如果我`BoxInterface::Tasc::Fetcher.fetch`从 Rails 控制台运行，它工作正常。

如果我运行，`bundle exec rake 'box:fetch'`我会收到此错误：

```
uninitialized constant BoxInterface::Tasc 
```

lib下的文件结构为：

```
/app/lib/box_interface/tasc/fetcher.rb 
```

奇怪的是，我们有一个暂存服务器，这段代码可以在其中正常工作。这和环境有关系吗？我不确定如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:35:47.937

您是否已将 lib 目录中的文件夹添加到文件中的自动加载路径中`application.rb`？如果您使用的是 Rails 3.0 或更高版本，您可能必须这样做。尝试添加这一行：

```
config.autoload_paths += %W(#{Rails.root}/lib/box_interface/tasc) 
```

在文件中的类定义 ( `class Application < Rails::Application`) 中`application.rb`。

# c# - 正确使用数据绑定与绑定对象中的列表框

> ID：12145816
> 
> 赞同：0
> 
> 时间：2012-08-27T16:25:18.163
> 
> 标签：c#, .net, silverlight, data-binding, silverlight-5.0

您好，提前感谢您的帮助。我在将数据绑定与具有我希望在列表框中显示的属性的对象列表一起使用时遇到问题。

我的 Silverlight 子窗口中有一个列表框，其 xaml 如下所示：

```
<StackPanel Orientation="Vertical" Width="235">
                        <sdk:Label Content="Servers" HorizontalAlignment="Center"></sdk:Label>
                        <!--new group servers list box-->
                        <ListBox x:Name="NewGroupServersLB" Height="150" Width="200" ItemsSource="{Binding}" SelectionChanged="NewGroupServersLB_SelectionChanged" >
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=ServerName}"></TextBlock>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </StackPanel> 
```

我正在使用带有此代码的 Binding 对象实例在后面的代码中设置其 DataContext：

```
/*create new binding source object */
 Binding serversBinding = new Binding();
 /*set data source */
 serversBinding.Source = childServersList;
 /*set the data source for the new group servers listbox*/
 NewGroupServersLB.DataContext = serversBinding; 
```

我可以通过调试看到 Binding 对象的源有两个成员，并且它们是来自我的 childServersList 的适当服务器对象实例。但是，当我运行它时，列表框中没有任何内容。但是，当我在后面的代码中将列表框的数据上下文直接设置为服务器列表时，服务器名称会显示在列表框中。你能告诉我这是为什么还是我做错了什么？我尝试使用 Binding 对象的原因是因为我想用第一个列表框中所选服务器对象的子成员填充另一个列表框。提前感谢您的帮助，对于这个问题的冗长，我深表歉意。

如果有帮助，我存储在列表中的服务器对象如下所示：

```
[XmlRoot("Server")]
public class RegisterServerObject
{
    public RegisterServerObject() { }

    [XmlElement("ServerID")]
    [Browsable(false)]//not displayed in grids
    [EditorBrowsable(EditorBrowsableState.Never)]//not displayed by intellisense
    public string ServerIDString
    {
        set
        {
            ServerID = Convert.ToInt32(value);//convert the value passed in by xml to your type
        }
        get
        {
            return Convert.ToString(ServerID);
        }
    }

    [XmlIgnore]
    public int ServerID { get; set; }

    [XmlElement("GroupID")]
    public string GroupIDString
    {
        get
        {
            return this.GroupID.ToString();
        }
        set
        {
            if (string.IsNullOrEmpty(value))
            {
                this.GroupID = 0;
            }
            else
            {
                this.GroupID = int.Parse(value);
            }
        }
    }

    [XmlIgnore]
    public int GroupID { get; set; }

    [XmlElement("ParentID")]
    public int ParentID { get; set; }

    [XmlElement("ServerName")]
    public string ServerName { get; set; }

    [XmlElement("User")]
    public string User { get; set; }

    [XmlElement("UID")]
    public int Uid { get; set; }

    [XmlElement("PWD")]
    public string Domain { get; set; }

    [XmlElement("Location")]
    public string Location { get; set; }

    [XmlArray(ElementName = "AssociatedModules")]
    [XmlArrayItem(ElementName = "Module")]
    public List<RegisterModuleObject> AssociatedModules { get; set; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:42:00.263

有几种不同的方法可以指定绑定源（数据绑定到的对象）。首先是指定DataContext。这可以在 XAML 中或通过代码完成。

```
NewGroupServersLB.DataContext = childServersList; 
```

请注意，DataContext 设置为源对象。

如果您使用的是 Binding 对象，则应将 Binding 对象的 Source 设置为您的绑定源。

```
MyData myDataObject = new MyData(DateTime.Now);      
Binding myBinding = new Binding("MyDataProperty");
myBinding.Source = myDataObject;
myText.SetBinding(TextBlock.TextProperty, myBinding); 
```

在这种情况下，您正在设置 Binding 对象，然后将其应用于控件。DataContext 未设置，但如果已设置，将被忽略，因为 Binding 对象将优先。

对于您的特定示例，您可能需要阅读 Data Binding 文档的此特定部分：

[http://msdn.microsoft.com/en-us/library/ms752347.aspx#master_detail_scenario](http://msdn.microsoft.com/en-us/library/ms752347.aspx#master_detail_scenario)

# ios - 谷歌天气 API 没了？

> ID：12145820
> 
> 赞同：1
> 
> 时间：2012-08-27T16:25:29.283
> 
> 标签：ios, xcode, weather, weather-api, google-weather-api

我一直在我的 iPhone 应用程序中使用以下谷歌天气 api 来获取 4 天的天气预报。

```
NSString *address = @"http://www.google.com/ig/api?weather=Chicago";
    NSString *request = [NSString stringWithFormat:@"%@",address];

    NSLog(@"request: %@", request);

    NSURL *URL = [NSURL URLWithString:request];
    NSError *error;
    NSString *XML = [NSString stringWithContentsOfURL:URL encoding:NSASCIIStringEncoding error:&error];

    NSLog(@"XML: %@", XML);
    NSLog(@"XML lenght: %d", [XML length]); 
```

截至昨天 2012 年 8 月 25 日，我一无所获！我没有得到任何结果。这是什么时候发生的？有没有其他人遇到过同样的问题？

这是一个非常关键的问题，因为我有多个天气/时钟应用程序正在寻找谷歌天气 api，并且它们都崩溃了，因为我希望在我的 XML 字符串中返回一些结果！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T22:00:34.263

Google Weather API 似乎“正式”死了，这很讽刺，因为它从一开始就不是正式受支持的 API。谷歌尚未正式宣布，但应该注意的是，iGoogle 现在正在使用 Wunderground 的 API 来获取天气数据。

[http://igoogle.wunderground.com/US/CA/Mountain_View.html](http://igoogle.wunderground.com/US/CA/Mountain_View.html)

所以不，你没有看到东西。谷歌天气 API 不见了。我也经历过同样的事情。是时候继续前进并找到合适的替代品了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T21:55:52.363

如果有人有兴趣获得看起来和感觉像谷歌天气 api 的 XML，那么使用这个[MSN 天气 API 条件列表？](https://stackoverflow.com/questions/12142094/msn-weather-api-list-of-conditions)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-16T08:31:12.867

[谷歌停止了他们的天气 API，我从网站yr.no](http://yr.no)找到了另一个，我通过 PHP在我的网站[weathercase.net](http://www.weathercase.net)中使用它，这很棒

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-11T15:05:28.460

**Google 天气 API 于 2012 年关闭。**

如果您正在寻找 google 天气 API 的替代品，以下是目前最流行的三种天气 API：

*   [**雅虎！天气**](https://developer.yahoo.com/weather/)
*   [**地下城**](http://www.wunderground.com/weather/api)
*   [**打开天气地图**](http://openweathermap.org/api)

查看他们各自的文档页面以获取有关如何使用它们的更多信息！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-17T06:23:05.523

从那时起，Weather Underground API 和 Dark Sky API 也被关闭。虽然[Dark Sky API 在 2021 年之前仍在工作](https://blog.darksky.net/)，但我们必须寻找替代品。我希望 OpenWeather 及其新的[One Call API](https://openweathermap.org/api/one-call-api)能够帮助任何需要强大天气 API 的人。

# ruby-on-rails-3 - 禁用 rails 3 默认路由

> ID：12145827
> 
> 赞同：0
> 
> 时间：2012-08-27T16:25:46.520
> 
> 标签：ruby-on-rails-3

我正在开发一个 Rails 应用程序，我不需要某些路线。例如，用户将无法创建新的“产品”。事实上，没有人会因为这些产品仅从文件中读取。那么如何删除“产品/新”路线？我应该替换产品控制器中的代码吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T17:04:08.303

您可能不应该在 ProductsController`new`中`create`使用 或其他记录更改方法，因为它们不会被使用，但指定存在哪些路由的实际方法是在`config/routes.rb`文件中。通常情况下，你会在里面写一行：

```
resources :products 
```

这为产品提供了基本的 RESTful 路由。但是，您可以指定只存在一些路由：

```
resources :products, :except => [:new, :create, :destroy] 
```

或者：

```
resources :products, :only => [:index, :show] 
```

# nivo-slider - NivoSlider 可以支持 div 而不是 img

> ID：12145829
> 
> 赞同：0
> 
> 时间：2012-08-27T16:25:56.773
> 
> 标签：nivo-slider

我使用 nivo 滑块创建幻灯片，但我使用“div”元素而不是使用“img”作为 Nivo 滑块演示。但是 nivo 显然不支持或不支持“div”元素，我应该使用其他配置吗？

我想为我的拖鞋使用这个 HTML 标记

```
<div id='background_image' class="fadein">
 <div class="imgbk" style="background-image:url(/media/2374/newbackground.jpg);"></div>
 <div class="imgbk" style="background-image:url(/media/2374/dummy_1.jpg);"></div>
 <div class="imgbk" style="background-image:url(/media/2374/dummy_2.jpg);"></div>
 <div class="imgbk" style="background-image:url(/media/2374/dummy_3.jpg);"></div>
 <div class="imgbk" style="background-image:url(/media/2374/dummy_4.jpg);"></div>
 <div class="imgbk" style="background-image:url(/media/2374/dummy_5.jpg);"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:35:57.043

从 nivoslider 的演示页面中，它仅支持图像。如果您想要 HTML 内容，请使用另一个滑块插件。如果您搜索“jquery content slider”或类似内容，您会发现几十个很可能满足您的需求。

如果像在您的示例中那样，您只是将图像传输到内联样式背景（这看起来很奇怪，但可能是为了时髦的边框或半径或其他东西？）您意识到您可以将相同的样式应用于 IMG 标签，就像您可以应用于 DIV 一样？

# php - 如何访问序列化多维数组的值

> ID：12145831
> 
> 赞同：-1
> 
> 时间：2012-08-27T16:26:33.063
> 
> 标签：php, arrays, multidimensional-array

嗨，我得到了这个功能：

```
public static function consumeMessage($xml, $debug = 1) {
    $xml = stripslashes(urldecode($xml));
    $rq = OpenPayU::parseOpenPayUDocument($xml);    

    $msg = $rq['OpenPayU']['OrderDomainRequest'];

    switch (key($msg)) {
        case 'OrderNotifyRequest':
            return OpenPayU_Order::consumeNotification($xml);
            break;
        case 'ShippingCostRetrieveRequest':
            return OpenPayU_Order::consumeShippingCostRetrieveRequest($xml);
            break;
        default:
            return key($smg);
            break;
    }
} 
```

我这样称呼：

```
$result = OpenPayU_Order::retrieve($result->sessionId); 
```

并以这种方式写入文件：

```
write_to_file("debug.txt", "order details: \n\n " .
serialize($result->response) . "\n\n"); 
```

在我得到的输出中：

> a:1:{s:8:"OpenPayU";a:2:{s:14:"HeaderResponse";a:3:{s:10:"SenderName";s:8:"checkout";s:7 :"版本";s:3:"1.0";s:9:"算法";s:3:"MD5";}s:19:"OrderDomainResponse";a:1:{s:21:"OrderRetrieveResponse" ;a:8:{s:5:"ResId";s:32:"28444ffd9de5489e08a32e6cd51274a5";s:6:"状态";a:1:{s:10:"StatusCode";s:16:"OPENPAYU_SUCCESS" ;}s:13:"MerchantPosId";s:5:"37857";s:9:"SessionId";s:32:"55a6d45cc0fef40ce95e9c1321b19b13";s:14:"CustomerRecord";a:6:{s:10 :"CustomerId";s:8:"nyi3iw6v";s:5:"Email";s:28:"netprofile@netprofile.com.pl";s:5:"电话";s:15:"(+ 48) 786265656";s:9:"FirstName";s:5:"mieta";s:8:"姓氏";s:5:"mieta";s:8:"语言";s:2:"pl";}s:11:"OrderStatus";s:20:"ORDER_STATUS_PENDING";s:12 :"CurrencyCode";s:3:"PLN";s:7:"PayType";s:1:"t";}}}}

但是我需要将几乎每个值都分开，f.ex: 'StatusCode' 并将其保存到数据库中，有没有办法在没有正则表达式的情况下获得它？

我试着得到它像 $result->response['statuscode']; 但我什么也得不到

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:29:12.277

如果要从文件中反序列化字符串，请执行

```
$array = unserialize(file_get_contents('/path/to/file')); 
```

这将为您提供位于 中的数组，`$result->response`您可以像访问任何其他多维数组一样访问它，例如

```
$responseData = $result->response;
echo $responseData["OpenPayU"]["HeaderResponse"]["SenderName"];
… 
```

如果您不知道如何访问多维数组，[请参阅 PHP 手册](http://php.net/manual/de/language.types.array.php)。

# html - 为什么表中的第一列比最后一列宽？

> ID：12145835
> 
> 赞同：0
> 
> 时间：2012-08-27T16:26:43.497
> 
> 标签：html, html-table

为什么此表中的第一列比其单元格中的任何内容都宽。第二行中的 img 跨越 2 列，因此如果第 2,3 和 4 列均匀分布（这似乎合乎逻辑），那么第 1 和第 2 列对于 img 来说足够宽，而不必使第 1 列宽于 4。我错过了显而易见的事情吗？这对我的布局造成了严重破坏。我知道我可能会使用 div，但表格中的图像和其他内容可能会经常更改，因此表格似乎是最合乎逻辑的，除了不了解发生了什么让我发疯。:)

```
<table border="1"style="top:2px;left:0px;position:absolute">
    <td>DeliDeliDeli</td><td colspan="3">
        <img src="pics/deli.jpg" width="480" height="384" alt="" title="" border="0" />
    </td>
    <td>DeliDeliDeli</td>
    <tr></tr>
    <td colspan="2">
        <img src="Bulk pics/jars3.jpg" width="227" height="170" alt="" title="" border="0"/>
    </td>
    <td>Deli</td>
    <td>Deli</td>
    <td>Deli</td>
    <tr>
        <td>Deli</td>
        <td>Deli</td>
        <td>Deli</td>
        <td>Deli</td>
        <td>Deli</td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T16:28:14.260

`<table>`除非您另有说明，否则标签或多或少可以自由选择自己的尺寸。

添加`table-layout:fixed`到表格的样式中，然后在第一行之前添加：

```
<colgroup><col span="5" style="width: 20%" /></colgroup> 
```

# facebook - Facebook Graph API - 只获取更新的朋友

> ID：12145838
> 
> 赞同：1
> 
> 时间：2012-08-27T16:26:50.363
> 
> 标签：facebook, facebook-graph-api, real-time-updates

如此处所述（[Facebook 实时更新 - 获取朋友的更新](https://stackoverflow.com/questions/12144065/facebook-real-time-updates-get-updates-for-friends#comment16248262_12144065)）我正在使用 facebook 实时 API 来获取用户朋友的更新。在 facebook 发布更新的提供的回调 URL 中，我得到诸如 (replaced uid/id) 之类的条目：

```
 [ { uid: '123456',
            id: '123456',
            time: 1346075439,
            changed_fields: [ 'friends' ] },
          { uid: '654321',
            id: '654321',
            time: 1346075439,
            changed_fields: [ 'friends' ] }
        ] 
```

我现在正在尝试更新的朋友，但是使用图形浏览器工具我不能*只*获得更新的朋友。我尝试设置此处记录的“since”参数（[https://developers.facebook.com/docs/reference/api/-](https://developers.facebook.com/docs/reference/api/) > Paging）

```
https://graph.facebook.com/123456/friends?since=1346075439 
```

或者“时间”参数（没有记录，但我只是尝试过）

```
https://graph.facebook.com/123456/friends?time=1346075439 
```

但是，带有任一参数的请求仍会返回用户的*整个*好友列表

有没有可能我只能得到更新的朋友？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T16:59:10.173

不，朋友列表不按时间排序或查询 - 如果您需要检测新朋友，您需要将您从 API 收到的列表与您检索到的先前列表进行比较

# sql - 在存储过程中，也需要访问以Tablename为变量的变量中的列值

> ID：12145842
> 
> 赞同：1
> 
> 时间：2012-08-27T16:26:55.950
> 
> 标签：sql, sql-server-2008

```
CREATE PROCEDURE dbo.usp_testing

AS
BEGIN
DECLARE @STATE INT,@TBLNAME sysname,@TrID VARCHAR(50),@FAMILYID VARCHAR(50),@SQL varchar(8000)

DECLARE cur CURSOR FOR
SELECT TrID,TableName 
FROM LogTable
WHERE Prefix='vid'
AND YEAR(DateTime)=YEAR(GETDATE())AND MONTH(DateTime)=MONTH(GETDATE())AND  DAY(DateTime)=DAY(GETDATE())

OPEN cur

FETCH NEXT FROM cur
INTO @TrID,@TBLNAME

IF(@TBLNAME='Student' OR @TBLNAME='Family' OR @TBLNAME='College')
BEGIN
**select @SQL='SELECT MemberID FROM'+' '+@TBLNAME+' '+'where TrId='+@TrID
select @FAMILYID=EXEC(@SQL)** 
```

在这一行中，它给了我一个错误。

```
select @SQL='select @ID=(SELECT MemberID FROM'+' '+@TBLNAME+' '+'where TrId='+@TrID +')' 
```

以及在这

```
exec(@sql) 

END

END
GO 
```

我需要将 MemberID 放入变量 @ID

嗨，我做了一些更改，如下所述

```
ALTER PROCEDURE [dbo].[USP_TESTSP]

AS
BEGIN
DECLARE @SQL nvarchar(max),@TABLENAME sysname,@id nvarchar(max)
    SELECT @TABLENAME='student'
    select @SQL= 'select @id=MemberID FROM'+' '+@TABLENAME+' '+'where TrId=11091'
    exec sp_executesql @SQL,'@id nvarchar(max)output',@id=@id output
    --select exec (@SQL)

END 
```

但得到一个错误：

> 过程需要类型为“ntext/nchar/nvarchar”的参数“@parameters”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:28:39.517

考虑使用[`sp_executesql`](http://msdn.microsoft.com/en-us/library/ms188001.aspx)输出参数：

```
declare @SQL nvarchar(max)
set @SQL='SELECT @FAMILYID = MemberID FROM ' + @TBLNAME + ' where TrId=' + @TrID
exec sp_executesql @SQL, N'@FAMILYID int out', @FAMILYID = @FAMILYID out 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T18:48:18.140

`sp_executesql`声明动态查询的形式参数的参数应该`'@id nvarchar(max)output'`是 unicode 字符串。在 Transact-SQL 中，要指定字符串常量实际上是 unicode 字符串，您需要放在`N`左引号之前，如下所示：

```
N'@id nvarchar(max)output' 
```

所以你`USP_TESTSP`应该看起来像这样：

```
ALTER PROCEDURE [dbo].[USP_TESTSP]

AS
BEGIN
DECLARE @SQL nvarchar(max),@TABLENAME sysname,@id nvarchar(max)
    SELECT @TABLENAME='student'
    select @SQL= 'select @id=MemberID FROM'+' '+@TABLENAME+' '+'where TrId=11091'
    exec sp_executesql @SQL,**N'@id nvarchar(max)output'**,@id=@id output
    --select exec (@SQL)

END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T16:36:27.900

这个对我有用：

```
select @SQL='SELECT @FAMILYID=MemberID FROM'+' '+@TBLNAME+' '+'where TrId='+@TrID
select EXEC(@SQL) 
```

# c# - 如何拦截 Windows 窗体 WebBrowser 控件中的刷新？

> ID：12145845
> 
> 赞同：3
> 
> 时间：2012-08-27T16:27:05.530
> 
> 标签：c#, winforms

我正在使用 Windows 窗体`WebBrowser`控件通过设置来显示生成的报告`DocumentText`。有没有办法可以阻止用户在右键菜单中选择“刷新”，或者拦截刷新以便我可以重新生成我的报告？目前刷新方法重新加载“关于：空白”，丢弃我的报告。

```
 Browser.AllowNavigation = true;
        Browser.DocumentText = "<head></head><body><h1>Test</h1></body>"; 
```

到目前为止，刷新似乎不会导致`Navigating`事件，并且我没有收到`DocumentCompleted`事件，即使控件确实替换了 HTML 内容。我已经尝试了 的两种设置`AllowNavigation`，没有明显的区别。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-08-27T16:42:02.930

您可以使用`OnKeyPress`事件来做到这一点：

```
private void KeyPressed(object sender, KeyPressEventArgs e)
{
       if(e == Keys.F5)
                //do sth;
} 
```

结合 Simon Mourier 所说：[您可以禁用上下文菜单](http://msdn.microsoft.com/library/system.windows.forms.webbrowser.iswebbrowsercontextmenuenabled%28v=vs.80%29.aspx)。

# python - 使用python，自动确定用户当前时区的最准确方法是什么

> ID：12145847
> 
> 赞同：6
> 
> 时间：2012-08-27T16:27:08.977
> 
> 标签：python, datetime, timezone, flask

我已经验证 dateutils.tz.tzlocal() 在 heroku 上不起作用，即使它起作用了，它不会只是从计算机的操作系统中获取 tz，而不是用户？

没有存储用户时区，有没有办法确定请求来自哪里？（我正在使用烧瓶）

Twitter 确实有一个设置来调整你的时区，但我想知道他们如何确定默认值应该是什么，以及当用户未登录时它将如何工作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T16:43:29.413

您可以使用 Javascript 并在 cookie 中设置客户端的时区。您甚至可以使用 AJAX 请求，然后将偏移量发送到服务器并保存在客户端的会话中。

```
var offset = new Date().getTimezoneOffset(); 
```

> 描述
> 
> 时区偏移量是 UTC 和本地时间之间的差异，以分钟为单位。请注意，这意味着如果本地时区在 UTC 之后，则偏移量为正，如果在之前，则偏移量为负。例如，如果您的时区是 UTC+10（澳大利亚东部标准时间），则将返回 -600。即使对于给定的语言环境，夏令时也可以防止此值保持不变

[Mozilla Javascript 参考：getTimezoneOffset](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getTimezoneOffset?redirectlocale=en-US&redirectslug=Core_JavaScript_1.5_Reference/Global_Objects/Date/getTimezoneOffset)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T16:32:41.410

如果您可以轻松地从烧瓶中获取用户的 IP 地址（可能来自`request`对象？），您可以使用地理定位。例如通过[http://www.hostip.info/](http://www.hostip.info/)。

不过，它可能不是 100% 万无一失的。例如，如果有人使用 VPN 或其他类型的代理，您将看不到他的“真实”IP 地址。

# jquery - 如何在悬停时更改图块颜色并在鼠标移出时恢复为默认值而不影响文本颜色？

> ID：12145851
> 
> 赞同：0
> 
> 时间：2012-08-27T16:27:29.790
> 
> 标签：jquery, css

我需要一些关于以下教程的帮助 [http://tympanus.net/codrops/2011/07/12/animated-text-and-icon-menu/](http://tympanus.net/codrops/2011/07/12/animated-text-and-icon-menu/)

所以我的问题是 - 如何在悬停时更改磁贴背景颜色并在鼠标移出时恢复默认值而不影响文本颜色？

我试图与本教程的作者取得联系，但没有得到任何答复。有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:47:45.623

而是用原始颜色替换它：

```
<ul id="sti-menu" class="sti-menu">
    <li data-hovercolor="#37c5e9">
[...] 
```

我建议如果您不需要该功能，只需从所有 LI 元素中删除 data-hovercolor ，然后从脚本中删除应用它们的部分。修改版：

```
$menuItems.bind('mouseenter', function(e) {

    clearTimeout(t_mouseenter);

    var $item       = $(this),
        $wrapper    = $item.children('a'),
        wrapper_h   = $wrapper.height(),
        // the elements that animate inside this menu item
        $movingItems= $wrapper.find('.sti-item');

    t_mouseenter    = setTimeout(function() {
        // indicates the item is on hover state
        $item.addClass('sti-current');

        $movingItems.each(function(i) {
            var $item           = $(this),
                item_sti_type   = $item.data('type'),
                speed           = settings.animMouseenter[item_sti_type].speed,
                easing          = settings.animMouseenter[item_sti_type].easing,
                delay           = settings.animMouseenter[item_sti_type].delay,
                dir             = settings.animMouseenter[item_sti_type].dir,
                // if dir is 1 the item moves downwards
                // if -1 then upwards
                style           = {'top' : -dir * wrapper_h + 'px'};

            if( item_sti_type === 'icon' ) {
                // this sets another bg image position for the icon
                style.backgroundPosition    = 'bottom left';
            } 
            // we hide the icon, move it up or down, and then show it
            $item.hide().css(style).show();
            clearTimeout($item.data('time_anim'));
            $item.data('time_anim',
                setTimeout(function() {
                    // now animate each item to its default tops
                    // each item will animate with a delay specified 
                    // in the options
                    $item.stop(true)
                         .animate({top : $item.data('deftop') + 'px'}, speed, easing);
                }, delay)
            );
        });
        // animate the bg color of the item
        $wrapper.stop(true).animate({
            backgroundColor: settings.defaultTextColor
        }, settings.boxAnimSpeed );

    }, 100);    

}) 
```

警告：尚未对其进行测试，只需从原始代码段中删除第 11 行和第 31 行的 else 块 - 据我所知，这些是获取和设置悬停文本颜色的唯一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:40:08.473

很简单，用css做。

CSS

```
.sti-item span{
    color:#000;
} 
```

HTML

```
<li data-hovercolor="#37c5e9">
    <a href="#">
        <h2 data-type="mText" class="sti-item"><span>Advanced Patient Care</span></h2>
        <h3 data-type="sText" class="sti-item"><span>Personalized to your needs</span></h3>
        <span data-type="icon" class="sti-icon sti-icon-care sti-item"></span>
    </a>
</li> 
```

或者删除 JS 中的 mText 和 sText 文本颜色引用。

# xml - Postgres：在带有 Box 元素的表上使用 table_to_xmlschema

> ID：12145854
> 
> 赞同：1
> 
> 时间：2012-08-27T16:27:40.090
> 
> 标签：xml, postgresql, jaxb, xsd

因此，我正在尝试提取我的 Postgres 数据库表的 XML 描述，我可以将其与 JAXB 一起使用来处理一些 Java<->DB 通信。问题是，我对表中的几个字段使用 Postgres 'box' 数据类型，而 Postgres table_to_xmlschema 似乎没有为框生成有效的 XML。

这是我的SSCCE：

Postgres 表创建：`create table BoxTest ( foo Box);`

Postgres 调用以生成 XML 模式：`select * from table_to_xmlschema('BoxTest', true, true, 'SomeName');`

生成的架构：

```
<xsd:schema
     xmlns:xsd="http://www.w3.org/2001/XMLSchema"
     targetNamespace="SomeName"
     elementFormDefault="qualified">
 <xsd:simpleType name="UDT.User.pg_catalog.box">
 </xsd:simpleType>
 <xsd:complexType name="RowType.User.public.boxtest">
   <xsd:sequence>
     <xsd:element name="foo" type="UDT.User.pg_catalog.box" nillable="true"></xsd:element>
   </xsd:sequence>
 </xsd:complexType>
 <xsd:element name="boxtest" type="RowType.User.public.boxtest"/>
</xsd:schema> 
```

问题是“box”类型的描述是空的，尽管它是 Postgres 的内置类型。（特别是，我收到 SAX 解析错误，并显示消息`org.xml.sax.SAXParseException: s4s-elt-must-match.2: The content of 'simpleType' must match (annotation?, (restriction | list | union)). Not enough elements were found.`）所以 - 是否有一些选项我应该传递/设置来更正该输出？如果没有内置选项，Postgres 中是否有一种简单的方法来调整/更正 table_to_xmlschema 的输出？对于任何提议的解决方案 - 我必须做些什么才能使 JAXB 与生成的模式一起正常工作？

如果重要的话，我使用的是 Postgres 9.1，和（我认为）jaxb-impl 2.1.6。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T07:46:54.990

正如 Craig 所指出的，当前`table_to_xmlschema`函数不会递归地分解递归类型。我看不到这种变化在不久的将来，而且肯定不会在稳定版本中发生，所以你最好的选择是编写你自己的函数来查看目录，并为你递归地构建一个模式。这不应该太糟糕，但它会有点工作。我实际上正在为 PostgreSQL 和应用程序之间的复杂数据表示进行类似的项目，尽管没有使用 XML 作为中介。执行此操作所需的实际查询并不算太糟糕。

您需要做的是创建一个递归查询来查找类型（pg_attribute 和 pg_type 上的 WITH RECURSIVE cte），然后创建一个函数，可能在 pl/perl 等中，它为您生成适当的文本。

但是，内置函数对您不起作用。

# c# - 文本块绑定

> ID：12145859
> 
> 赞同：1
> 
> 时间：2012-08-27T16:28:15.193
> 
> 标签：c#, wpf, data-binding, binding

我有一个 TextBlock，它绑定到我的模型的 Integer 属性。TextBlock int 属性将其计数从 0 增加到 99。我首先在 ListView 中显示 TextBlocks 0-9。

如果有超过 10 个 TextBlocks，我希望前 10 个 TextBlocks 编号为 0-9 显示为 00, 01, 02.. 09。我可以使用`string.Format`WPF 中的方法来实现此行为。但如果文本块少于 10 个，则应将它们编号为 0、1、2 -- 9。

我怎样才能实现这种行为？我可以使用 MultiBinding 转换器吗？如果是，请帮我提供样品。

这是代码：

```
<ListView ItemsSource= "{Binding}"> <!-- Binding to a collection which has the Tag Id property -->
  <Grid x:Name="TagNum_grid" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="1,3,0,0" Grid.Column="1" >
    <TextBlock x:Name="DefaultIDtextblock" Margin="1,0" Text="{Binding Path=TagID}" TextWrapping="Wrap" Foreground="#FFA0A0A0" />
  </Grid>
</ListView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:13:42.037

正如您所提到的，您可以使用`MultiBinding`，其中第一个值是标签 id，第二个是元素的数量。

首先，定义值转换器：

```
public class MyConverter : MarkupExtension, IMultiValueConverter
{
    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        return this;
    }

    public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        int tagId = (int)values[0];
        int itemCount = (int)values[1];

        if (itemCount >= 10 && tagId < 10)
        {
            return "0" + tagId;
        }

        return tagId;
    }
} 
```

然后绑定值，使用上面的转换器

```
<ListView ItemsSource="{Binding}">
    <Grid x:Name="TagNum_grid" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="1,3,0,0" Grid.Column="1" >
        <TextBlock x:Name="DefaultIDtextblock" Margin="1,0" TextWrapping="Wrap" Foreground="#FFA0A0A0" >
            <TextBlock.Text>
                <MultiBinding Converter="{local:MyConverter}">
                    <Binding Path="TagID" />
                    <Binding Path="Items.Count" RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType=ListView}" />
                </MultiBinding>
            </TextBlock.Text>
        </TextBlock>
    </Grid>
</ListView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:36:32.237

您不需要 MultiValueConverter，一个简单的转换器就足够了。

您需要做的是将集合本身​​绑定到 ConverterParameter 属性。现在当转换器被击中时，您可以检查集合的计数。如果小于 10，您可以让该值通过，否则，只需格式化该值并根据需要添加前导零。

# css - 如何：以创意方式定位图像和 DIV

> ID：12145860
> 
> 赞同：0
> 
> 时间：2012-08-27T16:28:18.337
> 
> 标签：css, image, html

建立一个最终将成为 Facebook 游戏的网站（希望如此！）我有点卡住了。我提供了一张图片来更好地解释。

![](../Images/f9dec482224819ef65087483302c8383.png)

我创建了一个 DIV，背景是图像（减去我非常专业的潦草的），位于 DIV 上方的将是其他图像和 DIV。虽然我了解 HTML，但图像并没有去到它们应该去的地方，它们完全脱离了位置，最终到处都是！稍后我将提供一些代码，首先我将解释我放置在经过专业编辑的图像上的数字。

1.  当前英雄分区。（或者里面有图片的DIV，都试过了）
2.  图 2。它将出现在边框/ X 按钮下。
3.  任务popupexit div。不可见，坐在 X 按钮上并调用 JavaScript 函数。
4.  图 4。
5.  任何任务的文本！

的HTML：

```
<div id='missionpopup'>
  <div id='currenthero'>
    <img src='images/TallSlimTest.png' />
  </div>
  <div id='missionpopupexit' />
</div> 
```

CSS：

```
#missionpopup {
text-align: left;
width: 752px;
height: 500px;
position: relative;
background-image:url('./images/missionpopup.png');
}

#missionpopupexit {
margin-left: 720px;
width: 30px;
height: 30px;
position: absolute;
border-style: solid;
border-width: 1px;
}

#currenthero {
margin-left: 33px;
margin-top: 16px;
margin-bottom: 14px;
float: left;
} 
```

我希望能够`id="missionpopupexit"`坐在右上角的 X 上，而不会影响 DIV 中其他所有内容的位置或位置！我使用了 float 和 display: inline; 的不同变体，达到了这样的效果，但一切似乎仍然混乱！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T21:02:28.760

首先，您必须正确关闭 div，.

其次，在使用绝对位置时不要使用边距，试试这个：

```
#missionpopupexit {
width: 30px;
height: 30px;
position: absolute;
border-style: solid;
border-width: 1px;
} 
```

# iphone - Twitter - 如何获取用户背景图片？

> ID：12145872
> 
> 赞同：0
> 
> 时间：2012-08-27T16:29:37.487
> 
> 标签：iphone, objective-c, ios, twitter

我在我的 iPhone 应用程序中使用 Twitter（ios 4 所以不是内置框架..）

我搜索了 Twitter API 文档，但找不到，如何获取用户的背景图片？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:35:58.687

向以下 url 发送 GET 请求并解析 JSON。您正在寻找`profile_background_image_url`实体。

```
https://api.twitter.com/1/users/show.json?screen_name=__some_username__&include_entities=true 
```

更多信息：[https ://dev.twitter.com/docs/api/1/get/users/show](https://dev.twitter.com/docs/api/1/get/users/show)

# d - 选择 D 中枚举的随机元素

> ID：12145874
> 
> 赞同：8
> 
> 时间：2012-08-27T16:29:40.590
> 
> 标签：d

我已经开始从枚举中选择随机值，如下所示：

```
import std.random : uniform;
import std.stdio : writefln;
import std.conv;

enum E {A, B, C}

int main(){
    auto select = cast(E)uniform(to!int(E.min), to!int(E.max));
    writefln("select %s", select);
    return 0;
} 
```

这非常冗长，如果任何枚举成员的值超出默认值（或大于`int`），则容易出现问题。

理想情况下，我会采用一个代表枚举元素的范围，并将其提供给`randomSample`. 然而，这似乎是不可能的。

有没有更惯用的方法从 D 中的枚举中选择一个随机值？

**编辑：**

使用 fwend 提供的答案，这是一个实现我想要的模板函数：

```
T RandomEnumElement(T)() if (is(T == enum)){
    auto members = [EnumMembers!T];
    return members[(uniform(0, members.length))];
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T16:53:49.203

```
import std.random : uniform;
import std.stdio : writefln;
import std.conv;
import std.traits;

enum E {A, B, C}

int main(){
    auto select = [EnumMembers!E][uniform(0, 3)];
    writefln("select %s", select);
    return 0;
} 
```

**编辑**：如果您需要多次使用枚举值，您可以先将它们存储在静态不可变数组中，否则每次都会构建数组。这也可以让你摆脱神奇的数字 3。

```
(...)
int main(){
    static immutable Evalues = [EnumMembers!E];
    auto select1 = Evalues[uniform(0, Evalues.length)];
    writefln("select %s", select1);

    auto select2 = Evalues[uniform(0, Evalues.length)];
    writefln("select %s", select2);
    return 0;
} 
```

***编辑 2***：正如 Idan Arye 所指出的，模板可能更简洁：

```
T RandomEnumElement(T)() if (is(T == enum)){
    return [EnumMembers!T][(uniform(0, $))];
} 
```

***编辑 3***： *tgehr*提出了以下解决方案，该解决方案将在编译时构建一次查找表并完全避免 GC 分配：

```
T RandomEnumElement(T)() if (is(T == enum)) {
    static immutable members = [EnumMembers!T];
    return members[uniform(0, $)];
} 
```

# linux - 在 bash 脚本中更改网络 ip 从 NFS 安装的文件夹开始

> ID：12145875
> 
> 赞同：1
> 
> 时间：2012-08-27T16:29:41.210
> 
> 标签：linux, bash, ip, nfs

我编写了一个简单的 Bash 脚本来更改 Linux 主机的网络地址：

```
#!/bin/sh
REMOTE_HOST=192.168.2.127   # Default Host address
NEW_IP=192.168.30.33        # New IP I want to set
NEW_GW=192.168.30.1         # New Gateway I want to set

sudo ifconfig eth0 192.168.2.1     # Moving to the right network...
#ping $REMOTE_HOST -c 3            # I can correctly ping the host here...

ssh-copy-id root@${REMOTE_HOST} > /dev/null   # ...for my comfort...

# Setting the network with new values for the IP addr and the GW...
COMMAND="sed -i 's@address *\\([0-9.]\\+\\)@address ${NEW_IP}@' /etc/network/interfaces\
      && sed -i 's@gateway *\\([0-9.]\\+\\)@gateway ${NEW_GW}@' /etc/network/interfaces"

ssh root@${REMOTE_HOST} $COMMAND
# done!

# Now restart the network services:
ssh root@${REMOTE_HOST} "/etc/init.d/networking restart &" &   # (Note the 2nd '&' !!!)

# Come back to my old IP
sudo ifconfig eth0 192.168.30.10
sudo route add default gw 192.168.30.1 
```

该脚本几乎可以完美运行，但是：

1）如果我从我的主文件夹运行它，没有问题；如果我从 NFS 共享文件夹运行它，脚本会挂起一两分钟才能正确结束

2）如果我在主机上重新启动网络时省略了第二个“&”，则命令永远不会返回......

问题是：

1) 是什么导致了长时间的等待（NFS、不同的 IP 地址、不同的网关）？是否有可能解决它？

2）为什么会发生？我怎么能避免呢？

感谢您的任何帮助，并为我的英语不好感到抱歉！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:40:18.387

您正在重新启动网络服务，这会断开所有活动连接。

Bash 逐行读取您正在运行的文件。由于 NFS 是一个网络文件系统，这将终止与文件的连接。因此，系统等待（实际上不能）执行之后的行，`networking restart`直到重新建立连接。

相反，您应该首先制作整个脚本的本地副本，然后在本地运行它。您也可以为此编写一个脚本；-)

# actionscript-3 - 在as3的movieClip中将位图添加到各个帧

> ID：12145876
> 
> 赞同：2
> 
> 时间：2012-08-27T16:29:55.460
> 
> 标签：actionscript-3

我有一个movieClip，我想附加到这个movieClip 位图。我想将每个位图附加到不同的电影剪辑帧。我已经尝试过这样的事情，但它不起作用。这是我正在创建的记忆游戏。

```
for(var i : int = 0; i < cardList.length; i++){
    var helpVar : int = cardList[i].pictureOfCard;
    cardList[i].gotoAndStop(cardList[i].pictureOfCard+2);
    var bitmap : Bitmap = new Bitmap(bitMapArray[helpVar].bitmapData.clone());
    cardList[i].addChild(bitmap);
    cardList[i].gotoAndStop(1);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:42:20.483

```
var i :int = 0;
processNext();

function processNext():void
{
   cardList[i].addEventListener(Event.FRAME_CONSTRUCTED, onFrameConstructed );
   cardList[i].gotoAndStop(cardList[i].pictureOfCard+2);
}

function onFrameConstructed( e:Event ):void
{
    cardList[i].removeEventListener(Event.FRAME_CONSTRUCTED, onFrameConstructed );
    var helpVar : int = cardList[i].pictureOfCard;        
    var bitmap : Bitmap = new Bitmap(bitMapArray[helpVar].bitmapData.clone());
    cardList[i].addChild(bitmap); 

    if( i < cardList.length - 1 )
    {
       i++;
       processNext();
    {
    else
       trace("All done");

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T12:45:26.470

一段时间后，我发现我试图实现的目标在 as3 中可能是不可能的。我解决问题的方法是，每次我 gotoAndStop 到帧时，我都需要有位图，我 addChild(bitmap) 并且每次我 gotoAndStop 其他不应该有位图的帧时，我从movieClip 中删除Child(bitmap)。（因此使位图可见和不可见的方法非常相似）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T16:44:30.400

您可以简单地加载所有位图并只显示一个，它现在应该是可见的。例如

```
function ShowFrame(nr:int):void{
   for(i:int = 0; i<bitMapArray.length; i++){
      bitMapArray[i].visible = false;
   }
   bitMapArray[nr].visible = true
} 
```

我的 AS3 技能生疏了，所以这可能需要一些语法修正，但理论上可行。

# coffeescript - 如何在 couchdb 中启用咖啡脚本支持？

> ID：12145880
> 
> 赞同：1
> 
> 时间：2012-08-27T16:30:17.300
> 
> 标签：coffeescript, couchdb

我正在使用以下方法从源代码构建 couchdb：

[https://github.com/iriscouch/build-couchdb/](https://github.com/iriscouch/build-couchdb/)

如何启用 coffeescript 作为查询语言？此选项出现在 iriscouch 的云服务器上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T00:43:57.710

CouchDB 1.2.0 有内置的coffeescript 查询服务器。 [专题讨论](https://issues.apache.org/jira/browse/COUCHDB-817?page=com.atlassian.jira.plugin.system.issuetabpanels%3acomment-tabpanel)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T16:35:42.283

看起来从源代码构建最新版本包括这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T17:40:59.567

如果您运行的是 CouchDB 1.2.0 或更高版本，则更具体的答案：

在您的设计文档中添加一个名为“language”的属性并将值设置为“coffeescript”。这似乎让所有的观点都期待coffeescript。似乎不可能在 javascript 中完成一些视图，而在 coffeescript 中完成一些视图。

# php - PHP底片不断增加

> ID：12145882
> 
> 赞同：-6
> 
> 时间：2012-08-27T16:30:28.107
> 
> 标签：php, math, if-statement

我这里有这个代码...

```
$remaining = 0;
foreach($clientArrayInvoice as $key=>$row){
            $remaining = $remaining + $row['total'];   
} 
```

它的作用是，它获取总计的值并将它们相加......但是当我有负值时，它也会将它们相加，例如当我有`-51.75`并且`-17.85`我得到`-69.60`它应该`-33.90`如何解决这个问题时?

`-33.901 是我期望的值，因为当它的两个负数我想减去而不是相加时

谢谢，J

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T16:33:07.797

这可能会有所帮助：

```
(-51.75) + (-17.85) = -69.60
(-51.75) - (-17.85) = -33.90 
```

假设您总是需要*添加第二个数字而不管它的符号，您需要通过使用*[PHP`abs`函数](http://php.net/manual/en/function.abs.php)来获取绝对值`$row['total']`：

```
$remaining = 0;
foreach($clientArrayInvoice as $key=>$row){
    $remaining = $remaining + abs($row['total']);   
} 
```

* * *

针对您在问题中更新的内容：

> -33.90 是我期望的值，因为当它的两个负数我想减去而不是相加时

这几乎就是使用该`abs`函数所做的事情。我可以将上面的代码片段重写为：

```
$remaining = 0;
foreach($clientArrayInvoice as $key=>$row) {
    if ($remaining >= 0) {
        $remaining = $remaining + abs($row['total']);   
    }
    else {
        $remaining = $remaining - abs($row['total']);   
    }
} 
```

但是，这与简单地使用 PHP 函数的作用完全相同`abs`，因为您总是将 的大小添加`$row['total']`到`$remaining`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T16:32:51.920

再次 -->如果你想添加东西并忽略符号，请参见 php 的[abs() 函数。](http://php.net/manual/en/function.abs.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T14:17:17.530

我不确定你的问题到底是什么，但是如果`$remaining`是负数，这将继续添加绝对值，直到它再次为正数。

> $remaining = $remaining + ($remaining < 0 && $row['remainingbalance'] < 0 ? -1 : 1) * $row['remainingbalance']);

这适用于您的示例，它将是`0 - 51.75 + 17.85 = -33.9`. 但我不确定这是否是您在大局中想要的行为。

# android - 模拟器无法启动，出现分段错误错误

> ID：12145888
> 
> 赞同：4
> 
> 时间：2012-08-27T16:31:04.143
> 
> 标签：android, emulation

伙计们。我是 Android 应用程序开发的新手，在尝试启动模拟器时遇到了一些问题。我试图从 Android 虚拟设备管理器启动模拟器，但没有任何反应。没有弹出窗口，没有错误消息。我从命令行尝试了它，它显示了一个单行输出，即“分段错误”。我创建了不同的虚拟设备，但它们都无法以相同的错误输出启动。
我的操作系统是 Ubuntu 10.04 32 位，Android SDK 是 r20.0.3-linux。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:22:30.117

Try with: `emulator -gpu on @youremulatorname`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T14:40:14.770

尝试这个：

```
mv tools/lib/libOpenglRender.so tools/lib/libOpenglRender.so.xxx 
```

（取自[Android 模拟器分段错误](https://stackoverflow.com/questions/13997771/android-emulator-segmentation-fault)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T06:21:11.410

我也看到了同样的问题。通常我猜模拟器依赖于 RAM，因为它的交互速度更快。所以尝试交换你的内存。

对于我的朋友模拟器在更改 RAM 后工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-21T09:08:04.223

以下**.android/avd/{avd name}.ini**文件中的编辑为我解决了这个问题。

```
hw.gpu.mode=auto
hw.gpu.enabled = no 
```

# jquery-ui - 附加ajax html响应时$未定义错误？

> ID：12145890
> 
> 赞同：1
> 
> 时间：2012-08-27T16:31:05.287
> 
> 标签：jquery-ui, jquery, tinymce

**下面是在服务器上访问 url 并获取 html 响应的代码片段。我可以在 firefox 调试器中看到响应，但它没有显示在 div 标签中。**

```
$.ajax({
    url: url,
    dataType: 'html',
    data: '',
    type: 'POST',
    success: function(data) {
        //in firefox debugger i can see complete html response inside data 
        $('#displayContent').html(data); // but here, it does not  
        // append the html inside div displayContent. Instead it makes 
        // the current page blank
    }
});​ 
```

**看起来这是因为“ $ is not defined ”错误（我在firefox调试器中看到的）而发生的。发生这种情况是因为包含以下 javascript 文件，因为如果我注释掉此文件，我不会在 firefox 调试器中收到此错误，并且页面会正确显示。**但我不能注释掉这个文件，因为我需要它用于富文本编辑器。我不明白为什么我会收到此错误，尽管相同的 tiny_mce.js 在其他 jsp 文件中工作？这与通过ajax加载html内容有什么关系吗？

```
 <script type="text/javascript" src='<s:url value="/script/tinymce/jscripts/tiny_mce/tiny_mce.js"/>'></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:15:50.797

jQuery 有一个 noConflict 模式，它允许您使用不同的快捷方式来调用 jQuery 函数，而将“$”留给其他框架。

[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T05:50:49.297

首先在你的项目中包含 jquery，其次像这样包含 tinymce。

```
<script type="text/javascript" src="/script/tinymce/jscripts/tiny_mce/tiny_mce.js"></script> 
```

# jquery - 使用 jQuery 将 XML 中的搜索结果放入数组中

> ID：12145893
> 
> 赞同：0
> 
> 时间：2012-08-27T16:31:13.653
> 
> 标签：jquery, xml, arrays, search, youtube-api

我之前问了另一个问题，并设法获得了一些从 YouTube 搜索查询中获取 XML 文件的代码的帮助。然后，使用 jQuery，从 XML 文件（视频 ID）中获取所需的信息并将其放入 javascript 变量中。

这很好用，但我希望（如果可能的话）我们的网站有来自这个频道的最新视频不是 1 个而是 3 个。有人建议我更改搜索以获取 3 个结果而不是 1 个，并将 jQuery .find() 结果放入一个数组中。

问题是我认为（我真的应该说我确定）我做错了......看看：

```
<!-- enable jQuery -->
<script type="application/javascript" src="jquery.js"> </script>

<!-- video loading functions -->
<script type="text/javascript">
  jQuery(document).ready(function() {
    jQuery.ajax('https://gdata.youtube.com/feeds/api/videos?author=inthegamesroom&orderby=published&prettyprint=true&start-index=1&max-results=3&v=2',{
      dataType:'xml',
      success: function(data,status, xhr ) {
      var $data =$(data);
      var videoTag = new array ($data.find('videoid'));
      var videoId1 = videoTag[0].text();
      var videoId2 = videoTag[1].text();
      var videoId3 = videoTag[2].text();
    }
  });       
  // YouTube Video embed command
  function embedYT1(id, loaction) {
    jQuery(location).append("<object width=\"1000\" height=\"563\"><param name=\"movie\" value=\"https://www.youtube.com/v/"+id+"?version=3&amp;hl=en_US\"></param><param name=\"allowFullScreen\" value=\"true\"></param><param name=\"allowscriptaccess\" value=\"always\"></param><embed src=\"https://www.youtube.com/v/"+id+"?version=3&amp;hl=en_US\" type=\"application/x-shockwave-flash\" width=\"1000\" height=\"563\" allowscriptaccess=\"always\" allowfullscreen=\"true\"></embed></object>")
  }

  // Call video embed function for 3 vids
  embedYT(videoId1, '#vid1');
  embedYT(videoId2, '#vid2');
  embedYT(videoId3, '#vid2');
});
</script> 
```

任何人都可以帮忙吗？

您可能还注意到我有一个 embedYT 功能，旨在嵌入 3 个视频。我做对了吗？（我的桌子标签中有三个`id='vid#'`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:49:49.397

好的，这里有一些问题。不要为此感到难过。您正在学习并且通常会犯错误:)

首先， vars和是声明 的函数的本地变量，因此在您调用和以后的调用时它们将不`videoId1`可见。`videoId2``videoId3``embedYT(videoId1)`

其次，即使全局变量（请尽量不要在Javascript中声明全局变量，真的，请）您在成功回调中设置的值在您调用`embedYT`函数时不可见。这些函数在页面加载后立即执行，这可能发生在执行 AJAX 回调之前。要解决这个问题，我们需要将 embedYT 调用移动到回调

第三，[$.fn.find()](http://api.jquery.com/find/)返回一个 jQuery 集合（类似于数组），因此不需要将结果放入其他数组。此外，查看来自[youtube API](https://gdata.youtube.com/feeds/api/videos?author=inthegamesroom&orderby=published&prettyprint=true&start-index=1&max-results=3&v=2)的响应，您应该找到的标签是“yt:videoid”，而不是“videoid”（其命名空间）。[在此页面](http://www.rfk.id.au/blog/entry/xmlns-selectors-jquery/)中，我找到了使用 jQuery 执行此操作的正确语法。让我们解决这两个问题：

```
var videoTag = $data.find('yt\\:videoid'); 
```

修复后，我们可以在回调中使用[$.fn.each](http://api.jquery.com/each/)迭代集合并调用`embedYT`每个元素，从而解决第二个问题：

```
...
success: function(data,status, xhr ) {
  var $data =$(data);
  var videoTag = $data.find('yt\\:videoid');

  videoTag.each(function(i) {
    embedYT($(this).text(), '#vid' + i);
  });

}
... 
```

迭代集合比访问每个元素更具未来性。如果您必须更改视频数量，则可能无需更改 javascript 即可工作。

所以最终的代码应该是这样的

```
<!-- enable jQuery -->]
<script type="application/javascript" src="jquery.js"> </script>

<!-- video loading functions -->
<script type="text/javascript">
  jQuery(document).ready(function() {
    jQuery.ajax('https://gdata.youtube.com/feeds/api/videos?author=inthegamesroom&orderby=published&prettyprint=true&start-index=1&max-results=3&v=2',{
      dataType:'xml',
      success: function(data,status, xhr ) {
        var $data =$(data);
        var videoTag = $data.find('yt\\:videoid');

        videoTag.each(function(i) {
          embedYT($(this).text(), '#vid' + i);
        });

      }
    });     

    // YouTube Video embed command
    function embedYT(id, loaction) {
      jQuery(location).append("<object width=\"1000\" height=\"563\"><param name=\"movie\" value=\"https://www.youtube.com/v/"+id+"?version=3&amp;hl=en_US\"></param><param name=\"allowFullScreen\" value=\"true\"></param><param name=\"allowscriptaccess\" value=\"always\"></param><embed src=\"https://www.youtube.com/v/"+id+"?version=3&amp;hl=en_US\" type=\"application/x-shockwave-flash\" width=\"1000\" height=\"563\" allowscriptaccess=\"always\" allowfullscreen=\"true\"></embed></object>")
    }

  });
</script> 
```

希望能帮助到你

# jquery - “pageshow”jQueryMobile上的无限滚动

> ID：12145898
> 
> 赞同：0
> 
> 时间：2012-08-27T16:31:31.610
> 
> 标签：jquery, jquery-mobile, infinite-scroll

在 jQueryMobile 框架中从页面导航到新页面时，我无法理解无限滚动插件 (Paul Irish) 出了什么问题。

当页面重新加载时，一切正常，我在滚动时将下一页注入 DOM，当从弹出菜单“+摄影”导航到“社论”部分时，我得到无限滚动插件“标题到 ajax 中”加载错误的页面和正确的页面。这会导致错误并解除无限滚动到页面的绑定。

这是陷入困境的网站[http://www.elisabettaclaudio.com](http://www.elisabettaclaudio.com)

这是控制台日志：

```
["heading into ajax", Array[2] ] jquery.infinitescroll.js:183
["Using HTML via .load() method"] jquery.infinitescroll.js:183
["heading into ajax",  Array[2] ] jquery.infinitescroll.js:183
["Using HTML via .load() method"] 
XHR finished loading: "http://www.elisabettaclaudio.com/editorials/?pg=2".
["contentSelector",  <div class=​"mas masonry" style=​"position:​ relative;​ height:​ 448.79999923706055px;​ ">​…​&lt;/div>​ ] jquery.infinitescroll.js:183
XHR finished loading: "http://www.elisabettaclaudio.com/editorials/?pg=4". jquery-1.7.1.min.js:4
["Error", "end"] jquery.infinitescroll.js:183
["Binding", "unbind"] 
```

无法找出导致此问题的原因，请记住在禁用 jqm ajax 导航时，一切都按预期工作。

这是javascript

```
// Remove Default section
$('.type-home').live('pagehide', function(){        
$(this).remove();
}); 

// Remove InfiniteScroll from previous section
$('.type-home').live('pagebeforehide', function(){  
$('.mas').infinitescroll('destroy');    
});     

// Bind InfiniteScroll to next section
$('.type-home').live('pagebeforeshow', function(){
$('.mas').infinitescroll('bind');
});     

$(document).bind('pageshow', function() {
    if($('.mas').length){     

      // Masonry
      var $wall = $('.mas');      

      // Ensure that images load before executing Masonry
      $wall.imagesLoaded(function(){
         $wall.masonry({
             itemSelector: '.set',
             isAnimated: false,
             animationOptions: {
                duration: 100,
                easing: 'linear',
                queue: false
              }
             }); 

        // Show itemSelector 
        var sequenza = $('.set'), i = 0;    
        (function(){
            $(sequenza[i++] || []).animate({opacity: 1}, 100, arguments.callee);
        })();   

     $wall.infinitescroll({ 
      state: {
        isDuringAjax: false,
        isInvalidPage: false,
        isDestroyed: false,
        isDone: false,
        isPaused: false,
        currPage: 1
  },
        navSelector : '.nav-selector a',  // selector for the paged navigation 
        nextSelector : '.nav-selector a',  // selector for the NEXT link (to page 2)
        itemSelector : ".set",
    contentSelector: ".mas",
        loadingImg : 'css/themes/default/images/ajax-loader.png',
        donetext : 'No more to load.',
        animate : false,
        behaviour : 'masonry-isotope',
        bufferPx : 10,
        extraScrollPx: 0,
        debug : true,
        dataType: 'html+callback',
        appendCallback: true,
        errorCallback : function() { 
         //fade out the error message after 2 seconds
         $('#infscr-loading').animate({opacity: .18}, 2000).fadeOut('slow');

        }
      },
        // call masonry as a callback.
        function(newElements) { 

        // Define new elements
        var $newElems = $(newElements);

        $($newElems).animate({opacity: 0}, 0);

        // Ensure that images load before exectuing Masonry 
        $newElems.imagesLoaded(function(){

                        // initialise Masonry for method 'appended' soon after
            $wall.masonry();

            // Use the append method will position only th new added elements
            $wall.masonry('appended', $newElems, true );

                // Fade in new elements in linear sequence
                var sequenzaNew = $newElems, i = 0; 

                (function() {
                    $(sequenzaNew[i++] || []).animate({opacity: 1}, 100,
                    arguments.callee);
                })();

            });     
        });

        // Check window height against document height and force loading
        setInterval(function(){
            var windowHeight = $(window).height();  
            var docHeight = $(document).height();   

            if(windowHeight >= docHeight){

            $wall.infinitescroll('retrieve', console.log('Force retrieve infinite scroll'));

        } else if(windowHeight < docHeight) { 

        console.log('Now wait for a scoll');    

        };
        }, 2000);

});  
};
}); 
```

# javascript - `delete`的返回值的真正含义是什么？

> ID：12145901
> 
> 赞同：10
> 
> 时间：2012-08-27T16:32:03.980
> 
> 标签：javascript, google-chrome

根据[这个 MDN 页面](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/delete)，`delete`关键字

> 仅当属性存在且无法删除时才返回 false。它在所有其他情况下返回 true。

但是，我看到了`delete`返回的情况`true`，尽管该属性没有被删除：

```
delete Window
delete alert
delete dir
delete console
delete 2
delete null
delete {}.x
... 
```

事实上，几乎所有的属性都`window`返回 true with `delete`，通过在 中运行以下脚本可以看出`about:blank`：

```
for(a in window) { if(delete window[a]) { console.log(a); } } 
```

但是，大多数属性`window`实际上并没有被删除。的返回值的真正含义是`delete`什么？为什么它会返回`true`它不删除的属性？

（注意：我会对解释 . 行为的 Chromium 代码的引用感兴趣`delete`。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T16:48:16.307

窗口是一个[宿主对象](http://es5.github.com/#x4.3.8)，其语义由宿主环境（例如浏览器）定义。 `delete`当应用于宿主对象的属性时，比应用于本机对象时更复杂。

> 宿主对象可以通过任何依赖于实现的行为来支持这些内部属性，只要它与本文档中所述的特定宿主对象限制一致。

[第 11.4.1 节 -`delete`操作员](http://es5.github.com/#x11.4.1)说

```
If IsUnresolvableReference(ref) then,
  If IsStrictReference(ref) is true, throw a SyntaxError exception.
  Else, return true. 
```

因此，当宿主对象不支持删除或修改属性时，它会返回无法解析的引用或假装被删除的引用。任何一种方法都会导致`true`以非严格模式返回。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T11:00:42.803

浏览器使用的 javascript 实现一直在打破规则。部分 javascript DOM API 在纯 javascript 中甚至是不可能的，例如触发事件的 dom innerHTML="something"。这在 EcmaScript5 中已修复，但您不能依赖浏览器对象模型是 100% 合法的 javascript。AFAIK，只要您不涉足 DOM 和 BOM，您就可以完全依赖 ecmascript 标准。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T16:36:50.363

鉴于您正在对程序中的低级对象进行操作，这些属性实际上可能会被删除然后立即重新添加，尽管我不知道您如何测试这种行为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T16:45:21.307

在那个 MDN 页面上，它指定了语法，不包括`delete object`您的第一组示例使用的语法。`delete object[property]`它确实指定了第二个示例所示的语法。但是，没有指定 DOM（主机）对象会发生什么。有关详细信息，请参阅[本文](http://perfectionkills.com/understanding-delete/#delete_and_host_objects)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T16:49:34.580

基本上，在您的测试中，浏览器正在保护浏览器的运行时环境。

曾几何时，情况可能并非如此，但就测试而言，这类似于问为什么 Windows 不允许您打开命令外壳并运行：

```
> cd /
> deltree *.* 
```

了。

因为确实没有充分的理由能够做这样的事情，所以当您期望环境在之后实际继续运行时，并且不会关闭您的整个浏览器，以及您当前正在使用的操作系统实例运行，或者当您基本上要求程序实时擦除自身时可能会发生任何其他有趣的错误，而它目前对您的 GPU/声卡/输入设备具有低级访问权限。

如果您尝试删除 var，Delete 将返回失败。就浏览器需要运行的全局属性而言，它们中的大多数都被定义为属性（即：）`window.location`，但都是在低级别完成的（即：您无权访问）。所以理论上，它们是可以删除的对象。但是它们是受保护的，所以你不能，但这不会改变 的 return 语句`delete`，因为这会改变`delete`' 的预期行为。

所以：

```
function () {
    var obj = { prop : true };
    delete obj; /* fail */
    delete object.prop; /* succeed */
} 
```

# eclipse - 在 Eclipse 中提交分支时文件消失

> ID：12145904
> 
> 赞同：2
> 
> 时间：2012-08-27T16:32:14.827
> 
> 标签：eclipse, git, branch

我有一个非常严重的问题，真的需要一些帮助。我一直在使用 Eclipse 开发一个 Android 项目一个月，两周前，我决定进行一些重大更改，所以我在 git 上做了一个分支（比如设计 1）。一切都很好，我一直在新分支上工作。

今天，我想做另一个重大改变，所以我将文件添加到版本控制中，提交，并添加另一个分支（比如设计 2），然后我意识到所有文件连同我的设计 1 分支都消失了。反正我也找不到！！！究竟发生了什么？！

无论如何要检索这些文件。我试图从 bin 中解压缩 apk 文件，但它不包含源代码。

请帮我！！

# web-services - 无法从 Web 服务返回具有导航属性的 POCO 对象？

> ID：12145905
> 
> 赞同：1
> 
> 时间：2012-08-27T16:32:16.777
> 
> 标签：web-services, entity-framework, serialization, poco, dto

我正在使用 POCO 将我的实体从 DAL 项目自动生成到实体项目。我目前不需要手动创建视图类。

但是我有一个问题 - 当我尝试从 a 返回具有导航属性的 poco 对象时，出现`[WebMethod]`以下错误：

`Cannot serialize member Entities.City.Customers of type System.Collections.Generic.ICollection1[[Entities.Customer, Entities, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] because it is an interface.`

我尝试写作 `context.ContextOptions.LazyLoadingEnabled = false;`， `context.ContextOptions.ProxyCreationEnabled = false;`但无济于事。

如果我 `[System.Xml.Serialization.XmlIgnore]`在属性之前添加，我不会收到错误，但是我会丢失这些属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T15:13:12.937

消息很清楚：序列化失败，因为您的`Entities.City.Customers`成员被声明为接口 ( `ICollection`)。

接口没有说明实现类型，它只定义了实现应该遵循的契约。因此，序列化程序不知道如何以序列化格式表示实现。

您可能认为根据您从自省获得的信息来反映类型和序列化并不难，但是当您尝试从这种表示中反序列化时就会出现问题。相同的表示可能对应于所有实现类型，在这种情况下，序列化程序应该选择什么作为具体类型？

有几个步骤可以解决这个限制，您可以在这篇文章中找到：[接口属性的 XML 序列化](https://stackoverflow.com/questions/1333864/xml-serialization-of-interface-property)。在您的特定情况下，最简单的方法是使`Entities.City.Customers`具体类型的成员像`List<Customer>`而不是`ICollection<Customer>`.

# blackberry - BlackBerry 连接传输描述符

> ID：12145909
> 
> 赞同：2
> 
> 时间：2012-08-27T16:32:29.237
> 
> 标签：blackberry

我想知道是否有人可以为我指出这个问题的正确方向。一点介绍：

在我们维护的应用程序中，我们只是重写了网络层以删除对 OS 4 的支持。我们正在使用`ConnectionFactory`OS 5 中提供的清理程序。请注意，我们遇到的问题仅与设备有关，与模拟器无关。

有两种方式或应用程序具有连接性，一个轮询特定 url 并存储数据的数据线程，以及一个“通用 Web 视图”（a `BrowserField`）。

到目前为止，数据线程连接似乎没有问题，它根据传输类型正确构建 url 并正确下载数据。在`BrowserField`我们有一个不同的问题。当我们使用 URL 打开时，有一条 OS 6 曲线会导致问题（但没有其他 OS 6 设备），`BrowserField`它有可能会显示“无法选择正确的传输描述符”消息 - 最常见的罪魁祸首是 WAP2。

我想我们有点困惑，黑莓似乎没有像我们希望的那样处理传输描述符的选择。有人有什么建议吗？

由于它的长度，我在 gist 上发布了我们的连接实用程序类：[https ://gist.github.com/3490101](https://gist.github.com/3490101)

数据线程使用的最常见的连接形式是`getUrlAsString(String etag)`函数，它执行 GET 并缓存基于 etag/url 的响应。

要为我们构建 URL，`BrowserField`我们使用该`buildURLTransport(String url)`函数，它获取 url 上的连接，确定传输信息，并返回构建的 URL。

**TL;DR：**我们似乎无法调试的一个奇怪之处`BrowserField`，我们希望有一套新的眼睛：我们认为上面发布的`buildURLTransport(String url)`函数要点有问题。

提前感谢一吨。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T20:07:45.223

小心你的代码，因为`getUrlAsString`它不是线程安全的。我不明白为什么您`ConnectionFactory`有时会提及为什么不提及其他人。

我也不明白你为什么需要方法`buildUrlTransport`。为什么不与for as [here](http://supportforums.blackberry.com/t5/Java-Development/Sample-Code-Using-the-ConnectionFactory-class-in-a-BrowserField/ta-p/532860)`BrowserFieldConfig`一起使用。`ConnectionFactory``BrowserField`

所以我会实例化一个`ConnectionFactory`，用你的特定参数配置它并在任何地方使用它。如果偏好发生变化，我会重新创建`ConnectionFactory`和更新`BrowserFieldConfig`. 当然，这段代码应该是线程安全的。

还要更加一致 - 有时您使用快速连接检查，有时您不使用。

# c# - 这是违反封装语义的一个例子吗？如果是，我该如何解决？

> ID：12145911
> 
> 赞同：3
> 
> 时间：2012-08-27T16:32:31.680
> 
> 标签：c#, encapsulation

如果我有这样的服务器接口......

```
interface IServer
{
    void Login();
    void Post();
    void Get();
} 
```

......除非你先完成，否则不要`Post`工作。它是否违反了封装的语义，因为它使您对接口的使用隐含地依赖于实现？你会如何解决它？`Get``Login`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T16:34:45.193

我的想法：

```
interface IServer 
{
    ISession Authenticate();
}

interface ISession 
{
    IServer Server{get;}
    void Post();
    void Get();
} 
```

忽略，如果你是可访问的“泥”：

[泥]

> 为了澄清这一点：恕我直言，您必须像创建产品一样考虑软件设计……您真的想要一个保险箱来存放您所有有价值的东西，您可以按下按钮“打开”而不是首先在上面输入代码吗？这只是您的用例的类比...
> 
> 实施者可以在验证之前调用 post 并获取...
> 
> 另一种广泛使用的方法是访问令牌和它的使用，如下所示：'
> 
> interface IServer{ // 返回所需的令牌字符串 Authenticate(); 无效帖子（字符串令牌）；无效获取（字符串令牌）；}
> 
> 但我认为，这也是错误的......
> 
> 你可以看到并且可能调用方法，在登录之前你不能看到/调用这些方法......如果实现者只是不检查“令牌”是否正确，那么你在这里有安全风险......
> 
> 如果您将逻辑分为几层（访客/未经身份验证、经过身份验证/会话和（例如）管理会话），您将获得清晰的逻辑分离和更多的语义有用性......
> 
> *我个人*编写代码的方式是好的框架构建者会编写代码......它具有可重用性，即使经过多年，也非常容易和清晰。

[/泥]

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-27T16:35:17.317

C# 中的接口只是确保某些属性（存在方法）的正式合同。它没有捕获开发人员想到的完整语义契约。从这个意义上说，**使用接口永远不能保证调用者可以调用他想要的任何方法**。

这同样适用于任何方法，例如`File.WriteAllText(path, text)`. 即使正式接口允许，您也不能只传入 null 作为路径。记录在案的、强制执行的运行时合同会阻止您这样做。

回到你的代码：**调用者不依赖于接口的实现。他依赖于它的合同**（在 C# 中没有说明）。

# asp.net - 如何使用asp.net保存图像并将其保存在access 2007数据库中

> ID：12145920
> 
> 赞同：0
> 
> 时间：2012-08-27T16:33:08.373
> 
> 标签：asp.net

我正在使用 Microsoft viual basic 2010 (asp.net) 在（网络注册学生计划）中工作，所以我想知道哪个工具兼容以及如何为每个学生保存图像，使用 Microsoft access 2007 数据库保存路径,,,, ,,

我希望能解决我的问题，无论如何，谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:21:07.030

您的问题不清楚，如果您想将图像保存到数据库中，这将有所帮助 - [codeproject](http://www.codeproject.com/Questions/263945/how-to-save-image-in-ms-access-database)。否则，如果要将图像上传到网络服务器并将路径存储到数据库，则可以使用[html 文件上传控件](https://stackoverflow.com/questions/569565/uploading-files-in-asp-net-without-using-the-fileupload-server-control)

# php - 在 PHP 中如何使用 POST 输出单选框数组的内容？

> ID：12145921
> 
> 赞同：1
> 
> 时间：2012-08-27T16:33:12.217
> 
> 标签：php, post, radio

我想以与从文本字段输出值相同的方式输出复选框的值。由于复选框可以有多个输入，我为此使用了一个数组，但尝试循环遍历数组以获取值对我来说不起作用。尝试了 foreach($type as $item) 并在 HTML 中回显 $item ，就像我在 PHP 书中所说的那样，但这并没有奏效。我应该怎么做，代码应该在哪里？由于某种原因，我也无法在 HTML 中使用 PHP，我不确定这是为什么，或者它是否与 echo<<<_END 有关。帮助表示赞赏。

```
<?php // formtest.php
if (isset($_POST['game'])) $game = $_POST['game'];
else $game = "(Not entered)";
if (isset($_POST['genre'])) $genre = $_POST['genre'];
else $genre = "(Not entered)";
if (isset($_POST['type'])) $type = $_POST['type'];
else $type = "(Not entered)";
echo <<<_END
<html>
<head>
    <title>Form Test</title>
</head>
<body>
Your game is: $game in the $genre genre and of the type<br />
<form method="post" action="formtest.php">
    What is your game?
    <input type="text" name="game" />
    <br />
    What is your genre?
    <input type="text" name="genre" />
    <br />
    Type?
       Retail <input type="checkbox" name="type[]" value="Retail" />
Downloadable <input type="checkbox" name="type[]" value="Downloadable" />
Free <input type="checkbox" name="type[]" value="Free" />
<br />
    <input type="submit" />
</form>
</body>
</html>
_END; 
```

?>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:00:24.440

使用现在的形式，`$_POST['type']`将是一个数组，因为它使用复选框（并适当命名），而不是收音机。在这里，我只是将其内爆以进行显示，但您可以像任何数组一样循环遍历它。值得注意的是，任何时候你想知道一个表格给了你什么，你可以`var_dump($_POST)`或者`var_dump($_GET)`取决于数据来自哪里。它对调试有很大帮助。

这是我得到的，我从heredoc切换，但是如果你`$type`在某个地方添加回来，你的heredoc应该可以正常工作，我在原始代码中没有注意到它：

```
<?php // formtest.php
if (isset($_POST['game'])) $game = $_POST['game'];
else $game = "(Not entered)";
if (isset($_POST['genre'])) $genre = $_POST['genre']; //Edit: Fixed line, oops
else $genre = "(Not entered)";
if (isset($_POST['type'])) $type = implode(', ',$_POST['type']);
else $type = "(Not entered)";

//Normally I'd specify a charset, but for simplicity's sake I won't here.
$type = htmlspecialchars($type);
$game = htmlspecialchars($game);
$genre = htmlspecialchars($genre);

?>
<html>
<head>
    <title>Form Test</title>
</head>
<body>
Your game is: <?php echo $game; ?> in 
the <?php echo $genre; ?> genre and of the type <?php echo $type; ?><br />
<form method="post" action="">
    What is your game?
    <input type="text" name="game" />
    <br />
    What is your genre?
    <input type="text" name="genre" />
    <br />
    Type?
       Retail <input type="checkbox" name="type[]" value="Retail" />
Downloadable <input type="checkbox" name="type[]" value="Downloadable" />
Free <input type="checkbox" name="type[]" value="Free" />
<br />
    <input type="submit" />
</form>
</body>
</html> 
```

附录：如果您切换并使用无线电，例如

```
<input type="radio" name="type" value="Downloadable" /> 
```

`$_POST['type']`将是一个简单的字符串，因为您只能选择其中一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:50:37.053

好的，首先您不需要回显整个 html 输出。其次，您的问题是单选按钮，但 html 显示复选框。单选字段只会产生一个结果，因此您不需要在名称之后使用 []。当使用 [] 命名时，复选框将返回一个数组。因此，如果您使用复选框，则需要将结果作为数组处理。如果您将字段更改为无线电，它应该可以正常工作。

```
<?php // formtest.php
if (isset($_POST['game'])) {
    $game = $_POST['game'];
}
else { $game = "(Not entered)"; }
if (isset($_POST['genre'])) {
    $genre = $_POST['genre'];
}
else { $genre = "(Not entered)"; }
if (isset($_POST['type'])) {
    $type = $_POST['type'];
}
else { $type = "(Not entered)"; }
?>
<html>
  <head>
    <title>Form Test</title>
  </head>
  <body>
    Your game is: <?php echo $game; ?> in the <?php echo $genre; ?> genre and of the type <?php echo $type; ?><br />
    <form method="post" action="test.php">
      What is your game?
      <input type="text" name="game" <?php if ($game != "(Not entered)") { echo "value='" . $game . "'"; } ?> />
      <br />
      What is your genre?
      <input type="text" name="genre" <?php if ($genre != "(Not entered)") { echo "value='" . $genre . "'"; } ?> />
      <br />
      Type?
      Retail <input type="radio" name="type" value="Retail" <?php if ($type == "Retail") { echo "checked"; } ?> />
      Downloadable <input type="radio" name="type" value="Downloadable" <?php if ($type == "Downloadable") { echo "checked"; } ?> />
      Free <input type="radio" name="type" value="Free" <?php if ($type == "Free") { echo "checked"; } ?> />
      <br />
      <input type="submit" />
    </form>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T16:59:44.510

对于您发布的文件，type[] 将保存为数组。例如

$a=$_POST['type'];

尽管我没有发现对单选按钮执行此操作有任何意义，因为它们的目的是仅传递 1 个值（除非您特别想要）。

# mongodb - mongodb 客户端 - 来自 localhost php 的 ssh 连接

> ID：12145923
> 
> 赞同：1
> 
> 时间：2012-08-27T16:33:25.933
> 
> 标签：mongodb, database

我一直在使用 rockmongo 作为我在本地主机上的 mongodb 客户端进行测试。
对于生产，我不希望客户在线，因为这可能会降低安全性。

是否有允许我连接的客户端`SSH`？有点像**MySql Workbench**？
或者
rockmongo可以留在我的本地计算机上并且我连接到具有mongodb的EC2实例以进行生产查看？
或者
有没有更好的选择？
我的设置是标准`LAMP`堆栈。愿意做出任何必要的改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T16:38:49.253

[MongoHub](http://mongohub.todayclose.com/)可以选择通过 ssh 连接，但应用程序有点糟糕。它崩溃了很多。

一种更通用的方法是创建您自己的 ssh 隧道到您的生产服务器，然后通过您想要的任何客户端进行连接。只要客户端可以建立连接，它就不会在意。

在 OSX/Linux 上，创建 ssh 隧道可能如下所示：

```
ssh -L 8080:127.0.0.1:27017 -f -C -q -N username@domain.com 
```

这将打开一个本地端口，该端口会将流量转发到远程端`8080`mongodb 默认端口的 localhost 接口。`27017`您会将您的客户指向`127.0.0.1:8080`就好像 mongodb 在本地运行一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:47:08.500

检查其中一些 - [http://www.mongodb.org/display/DOCS/Admin+UIs](http://www.mongodb.org/display/DOCS/Admin+UIs)

一种解决方法是将该文件设置在单独的文件夹中，并制作一个 .htaccess 文件，该文件将访问权限限制为仅您的 IP 地址。任何不是来自您的 IP 地址的请求都将被拒绝访问...

# uitabbarcontroller - TabBar 在 SplitViewController 的详细视图中。

> ID：12145926
> 
> 赞同：0
> 
> 时间：2012-08-27T16:33:45.157
> 
> 标签：uitabbarcontroller, uisplitviewcontroller, ipad, popover

我正在尝试在拆分视图控制器的详细信息侧嵌入标签栏。我所做的方式是，在 Storyboard 中，我将 TabBarController 作为 DetailViewController，并且从那里我有几个与视图挂钩的导航控制器（单独的选项卡，其类型为 DetailViewController）。

我面临的问题是，在我添加的两个选项卡中，只有一个选项卡显示了用于在纵向模式下显示主视图的按钮。

我是 iOS 开发的新手，非常感谢解决这个问题的任何帮助。

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T16:38:02.383

来自 UITabBarController 的文档：“*部署标签栏界面时，您必须将此视图安装为窗口的根。与其他视图控制器不同，标签栏界面永远不应安装为另一个视图控制器的子级。* ”

[http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITabBarController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITabBarController_Class/Reference/Reference.html)

# php - PHP静态范围重新声明

> ID：12145927
> 
> 赞同：3
> 
> 时间：2012-08-27T16:34:01.260
> 
> 标签：php

在 PHP 函数中使用静态范围时，我得到了这个示例：

```
function testStatic() {
static $a;
echo "here is a first time: ".$a."<br />";
$a = 23;
static $a = 100;
echo "here is a second time: ".$a."<br />";
} 
```

当我像这样运行这个函数时

```
teststatic(); echo "<hr />";
teststatic(); 
```

它在下面输出结果：

这里是：100
这里是：23

* * *

这里是：23
这里是：23

**但我希望它是以下内容：**

here is a: null
here is a: 100

* * *

here is a: 100
here is a: 100

我一直在思考几个小时试图解释为什么我收到了上面的结果但真的失败了。你能告诉我为什么我们有上面的结果吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:41:24.370

很难相信您指示的输出确实是该代码的输出。然而问题在这里很明显：

`static`变量绑定到函数或类并通过关键字`static`声明。您正在重新声明`$a`；这应该（我猜）发出警告。

由于`static`属性是函数或类定义的一部分，（显然）它的最后一次出现将“附加”到所讨论的函数/类。

仅在第一次调用该函数时才`$a`分配 的值`23`。在第一个`echo`声明之后。

这是一个两步过程，首先解析器将读取函数的定义，包括`static`属性。之后代码将运行，并且属性会发生变化。

# c++ - c++ getline() 与结构

> ID：12145930
> 
> 赞同：1
> 
> 时间：2012-08-27T16:34:24.750
> 
> 标签：c++, struct, getline

```
struct car
{
  string name;
  int year;
};    

int main() {
    int noOfCars;
    cout<<"enter no_ of cars : ";    
    cin>>noOfCars;    
    car* cars = new car[noOfCars];    
    for(int i=0;i<noOfCars;i++)
    {
        cout<<"Car #"<<i<<endl;
        cout<<"Name : ";    
        getline(cin,(cars[i].name));  //here is the problem 
        cout<<"\n year : ";    
        cin>>cars[i].year;    
        cout<<endl;
    }
} 
```

将整行作为字符串输入到 strcut 中的名称时出现问题，甚至不带任何东西并直接继续 ge 年份...：S ???

它适用于 cin，但我想采取一整行！它适用于全局定义的字符串，但不适用于结构内的 this

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T16:50:05.073

正如克里斯所说，这已经解释了很多次。

问题出在您之前的输入调用中

```
cin>>noOfCars; 
```

这读取一个数字，即它读取数字，它不读取换行符。您可能会键入一个换行符，但这并不意味着它会被读取。事实上，换行符会一直保留到您下次阅读时，即您的`getline`电话。因此`getline`，当您读取汽车数量时，您的第一个电话会读取剩余的换行符。

新手会犯这个错误并不让我感到惊讶，但这确实表明您应该在提问之前花一些时间研究您的问题。这个问题已经被问过数百次了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T17:12:07.667

`cin.ignore( 1000, '\n' );`之后插入 `getline`。

```
#include<string>
#include<iostream>
using namespace std;

struct car
{
  string name;
  int year;
};    

int main() {
    int noOfCars;
    cout<<"enter no_ of cars : ";    
    cin>>noOfCars;    
    car* cars = new car[noOfCars];    
    for(int i=0;i<noOfCars;i++)
    {
        cin.clear();

        cout<<"Car #"<<i<<endl;
        cout<<"Name : ";    
        getline(cin,(cars[i].name));  //here is the problem 

     cin.ignore( 1000, '\n' );

        cout<<"\n year : ";    
        cin>>cars[i].year;    
        cout<<endl;

    }
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-05T18:25:13.480

The problem is that `cin>>noOfCars` leaves the newline generated by the Enter key in the input queue. The `getline(cin,(cars[i].name))` is simply reading that newline character and assigns a null string to the `car[i].name` array. And since at the end of your loop `cin>>cars[i].year` does the same thing over and over, `getline(cin,(cars[i].name))` is always reading a newline character before it lets you input anything.

To fix this you just need to discard the newlines character after `cin` reads `noOfCars` and `cars[i].year`, which can be cleanly done by concatenating a `cin.get()` after your `cin`s like this:

```
cout<<"enter no_ of cars : ";    
(cin>>noOfCars).get();            //here is the solution
car* cars = new car[noOfCars];    
for(int i=0;i<noOfCars;i++)
{
    cout<<"Car #"<<i<<endl;
    cout<<"Name : ";    
    getline(cin,(cars[i].name));  //here is the problem 
    cout<<"\n year : ";    
    (cin>>cars[i].year).get();   //here is the solution 
    cout<<endl;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-27T16:57:57.717

Try `cin.getline(Cars[i].name,streamsize);` 其中streamsize 是字符串的最大大小。我认为这是最简单的形式。

# iphone - Facebook Graph API - 大型个人资料图片的批量请求

> ID：12145931
> 
> 赞同：0
> 
> 时间：2012-08-27T16:34:27.357
> 
> 标签：iphone, ios, xcode, facebook-graph-api, facebook-batch-request

试图通过批处理请求获取我可以成功完成的所有用户 Facebook 好友信息：

```
NSString *jsonRequest1 = @"{ \"method\": \"GET\", \"relative_url\": \"me/friends?fields=name,picture\" }";
NSString *jsonRequestsArray = [NSString stringWithFormat:@"[%@]", jsonRequest1];
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObject:jsonRequestsArray forKey:@"batch"];
[facebook requestWithGraphPath:@"me" andParams:params andHttpMethod:@"POST" andDelegate:self]; 
```

个人资料图片尺寸较小（50x50），我需要指定照片的尺寸。我一直在查看图形 API 文档，我正在努力将两者联系在一起 - 这是相关链接：http: [//developers.facebook.com/docs/reference/api/user/](http://developers.facebook.com/docs/reference/api/user/)

它说要在请求中添加以下参数，但就像我说的，我不确定如何将两者联系在一起：

```
picture?type=large 
```

我确信它适用于特定用户的单个请求，但我通过批处理请求没有运气。

谢谢你的帮助，它可能正盯着我看！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T03:20:24.397

FQL 有一些优势，就像 Facebook 所说的那样

> FQL，Facebook 查询语言，允许您使用 SQL 样式的界面来查询 Graph API 公开的数据。它提供了 Graph API 中不可用的高级功能，包括将多个查询批处理到一个调用中。

看看这个来自 Facebook 的教程。

[https://developers.facebook.com/docs/howtos/run-fql-queries-ios-sdk/](https://developers.facebook.com/docs/howtos/run-fql-queries-ios-sdk/)

但我建议使用带有字段扩展的 Graph API，这比 FQL 非常有用且更易于理解。请注意，Graph API 不支持所有子字段。

[https://developers.facebook.com/docs/reference/api/field_expansion/](https://developers.facebook.com/docs/reference/api/field_expansion/)

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T17:44:10.097

我认为使用 Graph API 没有简单的方法可以做到这一点。这个 FQL 查询很容易（可以通过批处理请求传递）：

```
SELECT uid, name, pic_big FROM user WHERE uid IN 
  (SELECT uid2 FROM friend WHERE uid1 = me()) 
```

如果您正在寻找特定尺寸的图片，请查看新的[profile_pic](https://developers.facebook.com/docs/reference/fql/profile_pic/)表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T18:46:20.917

这可以通过向 URL 添加高度和宽度参数来实现。FB 将尝试为您提供符合您的宽度和高度标准的图像。您的批次看起来像这样：

```
var batch= {
  batch: []
};

batch.batch.push({
  method: 'GET',
  relative_url: fbid + '/picture?height=400&width=400'
});

FB.api('/', 'POST', batch, function (response) {
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T15:01:35.660

类似的东西对我有用：

```
{
"friends": "SELECT uid, name, pic_big FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me())",
"profiles": "SELECT id, url, real_width, real_height FROM profile_pic WHERE id IN (SELECT uid FROM #friends) AND width = 300"
} 
```

它并不完美（要扫描两个查询），但它是一个请求。

基于[profile_pic](https://developers.facebook.com/docs/reference/fql/profile_pic/)表文档。

可以在[FQL Explorer](https://developers.facebook.com/tools/explorer/)中测试。

# iphone - 从 iPhone 应用程序访问私有 Web 服务

> ID：12145937
> 
> 赞同：3
> 
> 时间：2012-08-27T16:34:53.643
> 
> 标签：iphone, asp.net, ios, web-services

我们的网站托管在外部数据中心，它与托管在内部服务器上的各种 asp.net 网络服务进行交互。出于安全原因，我们已阻止对这些 Web 服务的公共访问，并且只有托管网站的外部数据中心可以访问。

现在我们正在为该网站创建一个 iPhone 应用程序，我想知道如何从下载到用户手机的应用程序中访问这些私有网络服务。我们是否需要创建一个中间件层来适应 iPhone 应用程序和私有 Web 服务之间的通信？或者有没有更好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T18:12:01.460

凤凰，

不幸的是，对于这种类型的应用程序，您需要创建一个中间层。为此，您可以使用 .Net 创建 API 来响应所需的调用，从而生成由 iOS 框架完美解释的 XML 文件和/或 JSON。我认为这是最好的方法。

好运

# css - 在IE中，当一个类添加到一行时，为什么单元格边框不会变成彩色？

> ID：12145939
> 
> 赞同：0
> 
> 时间：2012-08-27T16:35:10.513
> 
> 标签：css, internet-explorer, firefox, google-chrome, gridview

在 Gridview 中，我根据某些条件添加了一个行 CSS 类。这个类在行的边框上添加了一个插入框阴影，它在 FireFox 中运行良好。在 IE 中，它添加了行阴影，但它在单元格级别添加它，因此单元格左侧和右侧的单元格边框也被突出显示。当我只想突出显示该行时，这会显示每个带有插入发光的单元格边框。

Chrome 的行为类似于 IE，但没有插入框阴影。它只为边框着色。

正如我所说，它在 FF 中看起来不错。关于如何在 IE 和 Chrome 中纠正这个问题的任何想法，其中框阴影只为边框着色，但我可以接受。

CSS类

```
.rowGlow
{
border-collapse:separate;
border-color:#ff0000;

box-shadow:inset 0 0 3px 1px  #ff0000; 
-moz-box-shadow:inset 0 0 3px 2px #ff0000;
-webkit-box-shadow:inset 0 0 3px 2px #ff0000;
} 
```

行标签

```
<tr class="rowGlow" style="color:#333333;background-color:#F7F6F3;"> 
```

jQuery将css类添加到行中，具体取决于行中的隐藏值

```
 Sys.WebForms.PageRequestManager.getInstance().add_endRequest(EndRequestHandler);
    function EndRequestHandler(sender, args) {if (args.get_error() == undefined) {alertTest();}}

    function alertTest() {
        $(document).ready(function () {
            $('tr').each(function () {
                if ($(this).find('input[type=hidden]').val() == 'False') {
                    var du = <%= DateUpdates() %>;
                    if(du){$(this).addClass('rowGlow');}
                }
            });
        });
    }

    alertTest(); 
```

* * *

这就是我最终的结果。更新 jQuery 以添加两个额外的 CSS 类，一个用于第一个 TD，一个用于最后一个 TD：

```
$(this).addClass('rowGlow').find('td:first-child').addClass('firstCell');
$(this).find('td:last-child').addClass('lastCell');
.rowGlow
{
-webkit-box-shadow:inset 0 -3px 3px -1px #ff0000,inset 0px 3px 3px -1px #ff0000;
-moz-box-shadow:   inset 0 -2px 3px -1px #ff0000,inset 0px 2px 3px -1px #ff0000;
box-shadow:        inset 0 -3px 3px -1px #ff0011,inset 0px 3px 3px -1px #ff0000;    
}

.firstCell
{
-webkit-box-shadow: inset 3px 0px 3px -2px #ff0000;
-moz-box-shadow:    inset 3px 0px 3px -2px #ff0000;
box-shadow:         inset 3px 0px 3px -2px #ff0000;
    }
.lastCell 
{
-webkit-box-shadow: inset -3px 0px 3px -2px #ff0000;
-moz-box-shadow:    inset -3px 0px 3px -2px #ff0000;
box-shadow:         inset -3px 0px 3px -2px #ff0000;
}

<!-- For IE8 and lower I have this conditional -->
    <!--[if lt IE 9]>
    <style type="text/css">
        .rowGlow {
                background-color: #F9ACAA !important;
                /* color: #000!important; */
        }
    </style>
<![endif]--> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:21:42.020

尝试将行中的 :first-child 和 :last-child TD 设置为不同的样式怎么样。

这是[堆栈](https://stackoverflow.com/a/11002077)上的链接。但是，您将不得不更改您的 jQuery 以适应各个 td 单元格，这将需要更多的工作。

# javascript - Jquery.each() 无法遍历文字数组

> ID：12145940
> 
> 赞同：0
> 
> 时间：2012-08-27T16:35:14.883
> 
> 标签：javascript, jquery, arrays

好的，我确实声明了这个文字数组，如下面的萤火虫屏幕截图所示

![在此处输入图像描述](../Images/ca2018f8e75f57c82721322d0960222a.png)

现在我试图通过使用来遍历它`jquery.each();`

这是我的代码

```
$.each(window.feeditems,function(key,val){
   alert('pass OK');
   console.log('index:' + key + ', ' + 'value:' + val);
}); 
console.log('overview:' + window.feeditems);
console.log('length:' + window.feeditems.length); 
```

好的，所以使用上面的代码，回调中的 TODO`$.each`没有按预期执行，`length`当`undefined`它在控制台上打印它时。

好吧，在一个非常奇怪的情况下，当我`window.feeditems`在萤火虫中打印它时，它会完全像上面屏幕截图中显示的那样显示我的文字数组。

现在我的问题是如何遍历这种数组？我知道`jquery.each()`依赖于`length`数组的属性，我也在考虑使用 for 循环，但我如何在不知道它的大小的情况下循环？

**更新 1**

我再次检查长度并将其传输到某处，它返回长度为零，但将其与内容检查器代码的下一行放在一起，它仍然包含数组的内容。

**更新 2**

任何可能的解决方法，以便我可以在运行时遍历此数组，而无需在代码中手动访问节点？例如使用 for 循环？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T16:48:31.190

数组只接受数字索引。您似乎正在定义字符串键，这不会算作`.length`or 的一部分出现在 a 中`.each()`。

不要使用 开始定义，而是`[]`使用`{}`允许字符串键。但是，请记住，您仍然无法使用`.length`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T07:00:30.720

使用 JavaScript`For...In`语句

[http://www.w3schools.com/js/js_loop_for_in.asp](http://www.w3schools.com/js/js_loop_for_in.asp)

[http://www.w3schools.com/js/tryit.asp?filename=tryjs_object_for_in](http://www.w3schools.com/js/tryit.asp?filename=tryjs_object_for_in)

# java - 使用 HttpClient 获取 URL 状态代码的最快方法是什么

> ID：12145942
> 
> 赞同：8
> 
> 时间：2012-08-27T16:35:17.857
> 
> 标签：java, performance, httpclient, http-status-codes

使用 HttpClient 获取 URL 状态的最快方法是什么？我不想下载页面/文件，我只想知道页面/文件是否存在？（如果是重定向，我希望它跟随重定向）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-03-20T18:12:11.760

以下是我从 HttpClient 获取状态码的方法，我非常喜欢：

```
public boolean exists(){
    CloseableHttpResponse response = null;
    try {
        CloseableHttpClient client = HttpClients.createDefault();
        HttpHead headReq = new HttpHead(this.uri);                      
        response = client.execute(headReq);         
        StatusLine sl = response.getStatusLine();           
        switch (sl.getStatusCode()) {
            case 404:  return false;                     
            default: return true;                     
        }           

    } catch (Exception e) {
        log.error("Error in HttpGroovySourse : "+e.getMessage(), e );
    } finally {

        try {
            response.close();
        } catch (Exception e) {
            log.error("Error in HttpGroovySourse : "+e.getMessage(), e );
        }
    }       

    return false;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-27T16:37:33.093

使用[HEAD](http://hc.apache.org/httpclient-3.x/methods/head.html)调用。它基本上是服务器不返回正文的 GET 调用。他们的文档中的示例：

```
HeadMethod head = new HeadMethod("http://jakarta.apache.org");
// execute the method and handle any error responses.
...
// Retrieve all the headers.
Header[] headers = head.getResponseHeaders();

// Retrieve just the last modified header value.
String lastModified = head.getResponseHeader("last-modified").getValue(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T12:00:51.073

您可以通过以下方式获取此信息`java.net.HttpURLConnection`：

```
URL url = new URL("http://stackoverflow.com/");
URLConnection urlConnection = url.openConnection();
if (urlConnection instanceof HttpURLConnection) {
    int responseCode = ((HttpURLConnection) urlConnection).getResponseCode();
    switch (responseCode) {
    case HttpURLConnection.HTTP_OK:
        // HTTP Status-Code 302: Temporary Redirect.
        break;
    case HttpURLConnection.HTTP_MOVED_TEMP:
        // HTTP Status-Code 302: Temporary Redirect.
        break;
    case HttpURLConnection.HTTP_NOT_FOUND:
        // HTTP Status-Code 404: Not Found.
        break;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T17:01:36.167

您可以使用：

```
HeadMethod head = new HeadMethod("http://www.myfootestsite.com");
head.setFollowRedirects(true);

// Header stuff
Header[] headers = head.getResponseHeaders(); 
```

请确保您的 Web 服务器支持 HEAD 命令。

[请参阅HTTP 1.1 规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)中的第 9.4 节

# jquery - 如何使用jQuery从数字中删除前导零？

> ID：12145944
> 
> 赞同：2
> 
> 时间：2012-08-27T16:35:25.113
> 
> 标签：jquery

我使用此模式仅在从 0 到任何值的数量字段中检查数字。如何使代码不允许 012、010 .. 等我的意思是起始零，但仍然允许 0 作为独立数字。

0、1、10、1等都可以，

但不允许 012、005 等。

有没有这样的模式？

这是我的代码，但它的问题是，它删除了 0，即使它不是我想要避免的数字前导。我想在我的字段中允许 0 作为独立数字。

```
$('.td-qnt input').live('change keyup blur', function(e) {
    var re = /^[0-9]\d*$/;
    var str = $(this).val();
    $(this).val(str.replace(/^[ 0]/g,''));
    if (re.test(str)){
        var price = $(this).parent().parent().prev('td').html();
        var realprice = price.replace(/[^0-9\.]/g,'');  
        var result = realprice * str;
        var subtotal = result.toFixed(2);
        $(this).parent().parent().next('td').html('$'+subtotal);
    } else {
        $(this).parent().parent().next('td').html('$0.00');
        $(this).val('');
    }
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T16:40:19.817

```
"" + parseFloat(str) 
```

计算出数值是什么，然后再次将其变为字符串。宾果游戏，没有前导零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-21T14:22:47.773

我有同样的要求，但在我的情况下，我清理了按键输入。parseInt 和 parseFloat 都清除前导零，但如果没有尾随数字，则 parseFloat 也会清除小数点。所以我写了这个：

```
function removeLeadingZeros(target){
    var finished=false;
    var localTarget=target;
    var firstDigit;
    var secondDigit;
    while (!finished){
        firstDigit=localTarget.substring(0,1);
        secondDigit=localTarget.substring(1,2);
        if (firstDigit == '0' && !(secondDigit == '.' || secondDigit == ''))
            localTarget=localTarget.substring(1);
        else
            finished=true;
    }
    return localTarget;
} 
```

这将处理用户直接输入到字段中或像“0003”这样的粘贴。

# javascript - JavaScript后退按钮显示上一个列表

> ID：12145947
> 
> 赞同：0
> 
> 时间：2012-08-27T16:35:35.817
> 
> 标签：javascript, jquery, button, jquery-events

我想创建一个显示项目列表的 Web 应用程序。假设我显示了一个包含 3 个项目的列表视图（比如 listobject1）。当点击其中任何一个时，我会得到新的列表视图（比如 listobject2），它的值是根据 listobject1。当我再次单击其中一个时，我得到了另一个视图。现在，当我单击后退按钮时，我想返回上一个列表视图，即，当我现在在 listobject2 上时，再次按下后退按钮时，我想显示 listobject1。谁能告诉我如何在 JavaScript 中做到这一点？

*编辑* 我还在研究这些东西，但我还不能解决这个问题。为了澄清我的问题，这是我的代码：

```
$(document).ready(function() {
$("#result").hide();
$("input[name='indexsearch']").live("click", function()  {

    $("#result").show();
    $("#result").empty();

    loading_img();
    var $textInput = $("[name='valueLiteral']").val();

    $.getJSON("get_onto", {
        "input" : $textInput
    }, function(json) {
        if(json.length > 0 ) {
            var arrayPredicate = [];
            var arrayObject = [];
            var arraySubject = [];
            $.each(json, function(index, value) {
                arraySubject[index] = value.subject;
                arrayPredicate[index] = value.predicate;
                if(value.objectGeneral != null) {
                    arrayObject[index] = value.objectGeneral;
                } else {
                    arrayObject[index] = value.objectLiteral;
                }
            }

            );
            var stmt = [];
            //concat all related array into string (create triple statement)
            $.each(arrayPredicate, function(k,v){
                stmt[k] = "<span class='subject' id="+arraySubject[k]+">" 
                    + arraySubject[k] + "</span> " + " -> " + v + " : "+ 
                     //change object from text to be button form
                    "<button class = 'searchAgain-button'  name = 'searchMore' \n\
                    value = " + arrayObject[k] + ">" + arrayObject[k] + "</button><br>       <br>";
            });
            stmt = stmt.sort();
            $.each(stmt, function(k,v){
                $("#result").append(v);
            });
        } else {
            var $noresult = "No Result : Please enter a query";
            $("#result").append($noresult);
        }
    });

});

$("button").live("click", function() {
    $("#result").show();
    $("#result").empty();

    loading_img();
    var $textInput = $(this).attr("Value");
    //var $textInput = "G53SQM";

    $.getJSON("get_onto", {
        "input" : $textInput
    }, function(json) {
        if(json.length > 0 ) {
            var arrayPredicate = [];
            var arrayObject = [];
            var arraySubject = [];
            $.each(json, function(index, value) {
                arraySubject[index] = value.subject;
                arrayPredicate[index] = value.predicate;
                if(value.objectGeneral != null) {
                    arrayObject[index] = value.objectGeneral;
                } else {
                    arrayObject[index] = value.objectLiteral;
                }
            }

            );
            var stmt = [];
            var searchMore = "searchMore";
            //concat all related array into string (create triple statement)
            $.each(arrayPredicate, function(k,v){
                stmt[k] = "<span class='subject' id="+arraySubject[k]+">" + arraySubject[k] + "</span> " + " -> " + v + " : "+ " <button class = 'searchAgain-button' name = " +searchMore + " value = " + arrayObject[k] + ">" + arrayObject[k] + "</button><br><br>";
        });
            stmt = stmt.sort();
            $.each(stmt, function(k,v){
                $("#result").append(v);
            });
        } else {
            var $noresult = "No Result : Please enter a query";
            $("#result").append($noresult);
        }
    });      
}); 
```

起初，用户只看到一个按钮名称“valueLiteral”。用户执行第一次搜索后，结果以 JSON 形式返回并最终放入 stmt[] 显示，在此状态下第二个按钮被创建为可点击的结果，它将自动获取结果的值并执行第二个搜索用户是否单击第二个按钮。现在的问题是，如果用户单击该按钮，我想添加第三个 HTML 按钮名称“后退”，以使网络在 stmt[] 中显示先前的结果。

希望这有助于澄清问题，因为我是 JavaScript 的新手，所以我仍在努力解决这些问题。感谢所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T19:58:54.367

查看 jQuery BBQ - [http://benalman.com/projects/jquery-bbq-plugin/](http://benalman.com/projects/jquery-bbq-plugin/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T18:29:48.610

见[http://jsfiddle.net/cFwME/](http://jsfiddle.net/cFwME/)

```
var history=[new Array(),new Array()];
history[0].id="#back";
history[1].id="#next";
Array.prototype.last=function(){
    return this[this.length-1];
}
$('#list>li:not(:first)').click(function(){
    if(!history[0].length || history[0].last().html()!=$('#list').html()){
        history[0].push($('#list').clone(true,true));
        $(history[0].id).prop('disabled',false);
        history[1].length=0;
        $(history[1].id).prop('disabled',true);
    }
    $('#list>li:first').html('This is List '+$(this).index());
});
$('#back').click(getHistory(0));
$('#next').click(getHistory(1));

function getHistory(n){
    return function(){
        if(!history[n].length){return false;}
        history[(n+1)%2].push($('#list').replaceWith(history[n].last()));
        history[n].pop();
        $(history[(n+1)%2].id).prop('disabled',false);
        if(!history[n].length){$(history[n].id).prop('disabled',true);}
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T16:50:49.723

[这](http://html5demos.com/history/)就是您想要的几乎完全按照您想要的方式。

您必须使用`history.pushState`将这些虚假事件推入历史。

或者，您可以使用`location.hash`来存储当前对象，并在`hash`每次显示新列表时更新。然后`onhashchange`找到`hash`并显示相应的列表。

# c# - 如何使用 iOS 5 在 MonoTouch 中获得订阅支持

> ID：12145953
> 
> 赞同：2
> 
> 时间：2012-08-27T16:35:56.237
> 
> 标签：c#, ios, xamarin.ios

我需要使用 MonoTouch 获得[订阅](http://clang.llvm.org/docs/ObjectiveCLiterals.html)支持以避免此错误

> -[__NSArrayI objectAtIndexedSubscript:]：无法识别的选择器发送到实例 0x8b293f0

我怎样才能做到这一点？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T16:35:56.237

好的，经过大量的试验和错误以及 Miguel de Icaza 的大量帮助（非常感谢 :)）我找到了解决这个问题的方法

我绑定的 lib 使用[Subscripting](http://clang.llvm.org/docs/ObjectiveCLiterals.html)，我需要一种方法让[Subscripting](http://clang.llvm.org/docs/ObjectiveCLiterals.html)在 iOS 4.3 或更高版本上工作，因为直到 iOS 6 才会支持此功能。

因此，您可以在以下位置找到`Solution`静态编译（tnx 再次 Miguel）`libarclite`

> Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/arc/libarclite_iphoneos.a
> 
> /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/arc/libarclite_iphonesimulator.a
> 
> /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/arc/libarclite_macosx.a

刚刚使用构建了一个[胖库](http://docs.xamarin.com/ios/advanced_topics/linking_native_libraries#Building_Universal_Native_Libraries_%28i386.2c_ARMv6.2c_and_ARMv7%29)并将`lipo`其添加到我的绑定项目中，瞧。

亚历克斯

# mysql - 如何构造 mySQL 查询以查找按特定顺序排序的相关信息

> ID：12145956
> 
> 赞同：1
> 
> 时间：2012-08-27T16:35:57.950
> 
> 标签：mysql

我的数据库中有许多表，我需要帮助来构建快速高效的查询。到目前为止，对于我编写的不同查询，结果要么不一致，要么太大（返回的信息比我需要的多，因此必须稍后使用 PHP 来约束结果）。这是背景。

我们的数据库处理老年住房行业的潜在客户。每个潜在客户都有许多注释（销售历史记录），它们不仅提供销售历史记录，而且通知用户下一个跟进日期（actionDate）。还有许多不同的状态（即，活跃、前 10 名、进入等）每个潜在客户可以分配到（尽管不是同时）。潜在客户的状态是潜在客户在整个销售过程中的发展历史。我们可以看到潜在客户的状态和时间。

在基本“潜在客户”表中，每个潜在客户都有一个名为“inquiryID”的主键，它会自动递增。在大多数其他表中都引用了此键，以将它们与“lead”表相关联。这是“lead”表的结构。

```
TABLE: lead (~500 rows)
+-------------------+------------+-------+--------+
|  Field            |  Type      |  Key  | Extra  |
+-------------------+------------+-------+--------+
|  inquiryID        |  int(11)   |  PK   |  AI    |
|  communityID      |  int(3)    |       |        |
|  initialDate      |  date      |       |        |  
|  inquirySource    |  tinytext  |       |        |
|  inquiryType      |  tinytext  |       |        |
+-------------------+------------+-------+--------+ 
```

另一个表的标题是“leadNote”。此表处理每个潜在客户的销售日记帐。基本上，销售人员会输入写笔记的日期（日期）谁正在写笔记（salesCounselor），笔记本身（笔记），谁将跟进潜在客户（actionCounselor），以及他们将跟进的日期（行动日期）。

```
TABLE: leadNote (~15000 rows)
+-------------------+------------+-------+--------+
|  Field            |  Type      |  Key  | Extra  |
+-------------------+------------+-------+--------+
|  inquiryNoteID    |  int(11)   |  PK   |  AI    |
|  inquiryID        |  int(11)   |  FK   |        |
|  date             |  date      |       |        |
|  salesCounselor   |  tinytext  |       |        |
|  note             |  text      |       |        |
|  actionCounselor  |  int(5)    |       |        |
+-------------------+------------+-------+--------+ 
```

我将参考的最终表格标题为“leadStatusHistory”。此表处理此潜在客户状态的历史记录。潜在客户可以具有许多不同的状态，但不能同时具有。我们希望能够跟踪潜在客户的状态和时间。潜在客户将具有状态 (leadStatus)、将状态分配给他们的日期 (statusDate) 以及将状态分配给他们的人（作者）以及其他收集的数据。

```
TABLE: leadStatusHistory (~1200 rows)
+-------------------+-------------+-------+--------+
|  Field            |  Type       |  Key  | Extra  |
+-------------------+-------------+-------+--------+
|  historyID        |  int(11)    |  PK   |  AI    |
|  inquiryID        |  int(11)    |  FK   |        |
|  leadStatus       |  tintytext  |       |        |
|  date             |  datetime   |       |        |
|  communityID      |  int(3)     |       |        |
|  timestamp        |  timestamp  |       |        |
+-------------------+-------------+-------+--------+ 
```

我的目标是能够运行返回inquiryID、actionCounselor、actionDate 和当前leadStatus 的查询。正如我之前所说，我尝试过的许多不同的查询带来了不同的结果。我想通过两种方式收集此列表。1) 查找下一次联系日期小于或等于今天的所有潜在客户（这是计划在今天跟进的潜在客户列表）。2) 查找当前与某个leadStatus 匹配的所有潜在客户（即，查找当前状态为“移入”的所有潜在客户。

这就是我将如何订购表格以获取我正在寻找的信息。1）查找inquiryID，actionCounselor（最近创建的“leadNote”行或“date”上的actionCounselor列中的值最大），actionDate（最近创建的“leadNote”行或“date”上的actionDate列中的值"，这是最大的），以及leadStatus（最近创建的“leadStatusHistory”行上的leadStatus列中的值或最大的“timestamp”）WHERE actionDate（最近创建的“leadNote”上的actionDate列中的值最大的行或“日期”）小于或等于今天。

2）查找inquiryID，actionCounselor（最近创建的“leadNote”行或“date”上的actionCounselor列中的值最大），actionDate（最近创建的“leadNote”行或“date”的actionDate列中的值"，这是最大的）和leadStatus（最近创建的“leadStatusHistory”行上的leadStatus列中的值或最大的“时间戳”） WHERE leadStatus（最近创建的“leadStatusHistory”行上的leadStatus列中的值或最大的“时间戳”）等于“搬入”。

以下是一些当前和过去查询的示例，以及我对它们有什么问题的评论。

查询＃1：

```
SELECT 
    tt.inquiryID,
    tt.actionDate,
    tt.date,
    tt.actionCounselor,
  (SELECT 
            leadstatushistory.leadstatus
        FROM
            leadstatushistory
        WHERE
            leadstatushistory.inquiryID = tt.inquiryID AND leadstatushistory.historyID = (SELECT 
                    MAX(leadstatushistory.historyID) as historyID
                FROM
                    leadstatushistory
                WHERE
                    inquiryID = tt.inquiryID)) AS leadStatus
FROM
    leadnote tt
        INNER JOIN
    (SELECT 
        inquiryID,
            MAX(inquiryNoteID) as inquiryNoteID,
            MAX(leadnote.actionDate) AS actionDate
    FROM
        leadnote
    GROUP BY inquiryID) groupedtt ON tt.inquiryID = groupedtt.inquiryID AND tt.inquiryNoteID = groupedtt.inquiryNoteID
WHERE
    tt.actionDate <= '2012-08-27' AND tt.actionDate != '0000-00-00' AND (SELECT 
            leadstatushistory.leadstatus
        FROM
            leadstatushistory
        WHERE
            leadstatushistory.inquiryID = tt.inquiryID AND leadstatushistory.historyID = 
               (SELECT 
                    MAX(leadstatushistory.historyID) as historyID
                FROM
                    leadstatushistory
                WHERE
                    inquiryID = tt.inquiryID)) != 'Resident' AND tt.communityID = 4
GROUP BY tt.inquiryID 
```

评论：给了我我需要的列，但有人抱怨说，“actionDate”列有时不会反映最近创建的leadNote 行的日期，有时leadStatus 是错误的。例如，leadStatusHistory 表的 max(historyID) 不一定是我们想要查找的最新状态。有时我们的员工会回过头来为过去的潜在客户填写缺失的潜在客户状态。这将创建一个新的leadStatusHistory 行，其中包含一个新的自动增量historyID。在这种情况下，最近的（或最大的 historyID）没有最大的“leadStatusHistory.date”，因为用户输入的日期是过去的日期（填写过去的信息，所以我们的历史记录是准确的）。我们在将笔记输入到 LeadNote 表中以获取过去笔记时遇到的完全相同的问题。新的自动递增inquiryNoteID 不一定与“tt.date”最大的行匹配。

查询#2：

```
SELECT 
    maxDate.inquiryID, maxDate.date, maxDate.actionDate, maxDate.actionCounselor
FROM
    (SELECT 
        *
    FROM
        leadnote
    ORDER BY date DESC , type ASC, inquiryNoteID DESC) as maxDate
        LEFT JOIN
    staff ON maxDate.actionCounselor = staff.staffID
WHERE
    maxDate.communityID = 4
GROUP BY inquiryID 
```

评论：给了我我需要的列，但它也可以找到所有潜在客户的信息。这会浪费宝贵的时间并使响应变慢。然后，我必须使用 PHP 来限制数据以仅显示那些 actionDate 为 <= 今天且日期不是“0000-00-00”的潜在客户，或者我将数据限制为仅显示具有leadStatus 的潜在客户的“搬进来”。同样，这确实给了我正在寻找的结果，但速度很慢。此外，如果我在子查询中添加查询“WHERE date<=[today] AND date != '0000-00-00'”，它会更改结果，因此它们不准确，然后我仍然必须使用 PHP 来约束结果只显示那些我正在寻找的状态。

通过查看上述信息，是否有人对如何更好地构建我的查询有任何想法，以便我可以快速找到我正在寻找的确切信息。或者有没有办法改变表格的结构或关系以获得我正在寻找的结果。请，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:40:20.190

1.  > 我的目标是能够运行返回inquiryID、actionCounselor、actionDate 和当前leadStatus 的查询。

    您正在寻求从您的和表中找到[分组最大值](http://dev.mysql.com/doc/en/example-maximum-column-group-row.html)：即每组中具有最大日期的记录。`leadNote``leadStatusHistory``inquiryID`

    您可以通过以下几行的查询来实现此目的：

    ```
    SELECT inquiryID, actionCounselor, actionDate, leadStatus
    FROM   (
               leadNote NATURAL JOIN (
                 SELECT   inquiryID, MAX(actionDate) AS actionDate
                 FROM     leadNote
                 GROUP BY inquiryID
               ) AS t
            ) JOIN (
               leadStatusHistory NATURAL JOIN (
                 SELECT   inquiryID, MAX(statusDate) AS statusDate
                 FROM     leadStatusHistory
                 GROUP BY inquiryID
               ) AS t
            ) USING (inquiryID) 
    ```

    为了获得最佳性能，您应该确保在`leadNote`上具有复合索引`(inquiryID, actionDate)`并且在`leadStatusHistory`上具有复合索引`(inquiryID, statusDate, leadStatus)`：

    ```
     ALTER TABLE leadNote ADD INDEX (inquiryID, actionDate);
     ALTER TABLE leadStatusHistory ADD INDEX (inquiryID, statusDate, leadStatus); 
    ```

2.  > 我想通过两种方式收集此列表。1) 查找下一次联系日期小于或等于今天的所有潜在客户（这是计划在今天跟进的潜在客户列表）。2) 查找当前与某个leadStatus 匹配的所有潜在客户（即，查找当前状态为“移入”的所有潜在客户。

    1.  添加`WHERE actionDate <= CURRENT_DATE`
    2.  添加`WHERE leadStatus = 'move in'`

# javascript - 在 iframe 中获取具有类的元素

> ID：12145958
> 
> 赞同：4
> 
> 时间：2012-08-27T16:36:00.553
> 
> 标签：javascript, jquery, iframe, internet-explorer-8

我`iframe`的页面上有几个s。其中有一些带有类`test`名的元素。我需要为`style`他们设置任何内容。

当我只有一个`iframe`时，我可以使用下一个构造：

```
$('#iframeId').contents().find('.test').css({background: '#f00'}); 
```

但是我有几个`iframe`s，所以最好不要设置混凝土`iframe`并使用如下结构：

```
$('.test').css({background: '#f00'}); 
```

但这当然行不通。

我以前用过native ，但在出现缺陷的地方`getElementsByClassName`不起作用。`IE8`

这可能是个愚蠢的问题，但是.. 有没有像这样的结构：

```
$(getElementById('something')).css({background: '#f00'}); 
```

这将非常有帮助。我的意思是，用它们包装`JavaScript`对象，`jQuery`然后使用`jQuery`它们的方法。

**更新：**我用下一个构造解决了这个问题：

```
[].forEach.call(document.getElementById('something').querySelectorAll('.test'), function (el) {
    el.style.backgroundColor = '#f00';
}); 
```

但它仍然不起作用`IE8`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T16:42:47.063

你应该尝试这样的事情

```
$("iframe").each(function(index){
   $(this).contents().find('.test').css({background: '#f00'});
}); 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T16:42:57.630

您可能会遇到以下两个问题之一：1）您通常无法修改从外部域返回的 iFrame 的内容，但此处可能并非如此。如果您的 iframe 指向您的域内，您应该没问题。2) ie8 知道 jQuery 的 .css 可能依赖的“innerHTML”属性存在问题。相反，尝试使用 DOM 方法：

```
document.getElementById("yourIframe").contentWindow.document.body.getElementById("innerIframeElement").setAttribute("style", "background:'#f00';" 
```

# text - 从汉字中提取 CGPathRef

> ID：12145960
> 
> 赞同：1
> 
> 时间：2012-08-27T16:36:11.223
> 
> 标签：text, core-graphics

我想得到一个汉字（日语）字符的轮廓。

以下代码适用于拉丁字符：

```
[letter drawInRect:brect withAttributes:attributes];
[...]
CGGlyph glyph;
glyph = [font glyphWithName: letter];
CGPathRef glyphPath = CTFontCreatePathForGlyph((__bridge CTFontRef) font, glyph, NULL);
CGPathAddPath(path0, &transform, glyphPath); 
```

什么时候`letter`是汉字，例如男，字符被正确绘制，但 CGPathRef 是一个正方形。我需要什么来提取汉字的轮廓？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T20:17:12.227

方法 glyphWithName: 需要一个 glyphName，而不是字符。对于简单的拉丁字符，glyphName 与字符相同 - @"A"。据我所知，汉字没有名字，虽然平假名和片假名有。汉字实在太多了，许多字形都是同一个汉字的变体。

所以你必须对汉字使用不同的方法。这是一个对我有用的例子。

```
// Convert a single character to a bezier path
- (UIBezierPath *)bezierPathFromChar:(NSString *)aChar inFont:(CTFontRef)aFont {
// Buffers
unichar chars[1];
CGGlyph glyphs[1];

// Copy the character into a buffer    
chars[0] = [aChar characterAtIndex:0];

// Encode the glyph for the single character into another buffer
CTFontGetGlyphsForCharacters(aFont, chars, glyphs, 1);

// Get the single glyph
CGGlyph aGlyph = glyphs[0];

// Find a reference to the Core Graphics path for the glyph
CGPathRef glyphPath = CTFontCreatePathForGlyph(aFont, aGlyph, NULL);

// Create a bezier path from the CG path
UIBezierPath *glyphBezierPath = [UIBezierPath bezierPath];
[glyphBezierPath moveToPoint:CGPointZero];
[glyphBezierPath appendPath:[UIBezierPath bezierPathWithCGPath:glyphPath]];

CGPathRelease(glyphPath);

return glyphBezierPath;
} 
```

像这样使用：

```
NSString *theChar = @"男";

CTFontRef font = CTFontCreateWithName(CFSTR("HiraKakuProN-W6"), 114.0, NULL);

UIBezierPath *glyphBezierPath = [self bezierPathFromChar:theChar inFont:font]; 
```

编辑 - 定义可以本地化的字体的另一种方式：

```
CTFontRef font = CTFontCreateWithName((CFStringRef)@"Helvetica-Bold", 114.0, NULL); 
```

# git - 在分支之间复制单个提交，保留 SHA-1 标签

> ID：12145961
> 
> 赞同：3
> 
> 时间：2012-08-27T16:36:12.347
> 
> 标签：git, version-control, git-merge

我想将一个提交（使用其特定的 SHA-1 标签）从一个分支复制到另一个分支。我希望它是一个精确的副本，从而产生相同的 SHA-1 标签。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T16:41:24.687

这是不可能的。提交的 SHA-1 哈希是使用父提交的哈希、提交消息内容和提交树计算的。

这意味着当父提交更改时（它会更改，除非您的分支指向相同的提交），SHA-1 也会更改。

如果您的用例是要知道樱桃选择源自哪个提交，请使用`-x`to 选项`git cherry-pick`，这会将选择的提交 ID 添加到提交消息中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T17:56:29.213

`git merge`将保留 SHA1 哈希，因此如果您`git merge branchB`使用`branchA`，则提交应该具有相同的 ID。当然，这不适用于单个提交，但它适用于整个分支。

# amazon-ec2 - 无法访问 aws ec2 实例

> ID：12145966
> 
> 赞同：0
> 
> 时间：2012-08-27T16:36:29.723
> 
> 标签：amazon-ec2, amazon-web-services, putty, winscp

我正在尝试从 putty 和 winscp 访问 aws ec2 实例，但它没有连接到该实例。以前可以正常访问它，但几天后不知道它无法访问。请任何人都可以帮助我解决它。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T06:35:48.703

aws 实例可能会挂起，可能的解决方案是重新启动 aws 实例。但请确保我们备份当前实例并重新启动挂起的实例，并在成功重新启动后删除重复的实例。

# ios - 标签栏和 Mapview 问题

> ID：12145975
> 
> 赞同：3
> 
> 时间：2012-08-27T16:36:52.190
> 
> 标签：ios, uitabbarcontroller, mkmapview

我真的很困惑这个问题。我最近在我的应用程序中遇到了我的 mapview 选项卡的问题。甚至到了重新开始的地步。我只是想知道我是唯一一个遇到这个问题的人，还是我在这里做错了什么。

我对 iOS 相当陌生，但我知道如何定义地图视图的中心和跨度，以便以用户位置为中心。

我已经在自己的视图中构建了它，它似乎可以工作，但是当我将它放在选项卡控制器中时......我有一个问题。地图在显示用户位置时保持缩小状态。它应该显示放大的用户位置。

我的地图视图控制器：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.mapView.delegate self];
    [self.mapView setShowsUserLocation:YES];
    // Do any additional setup after loading the view from its nib.
}

-(void)mapView:(MKMapView *)mapView
didUpdateUserLocation:(MKUserLocation *)userLocation
{
    CLLocationCoordinate2D loc = [userLocation coordinate];
    MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance(loc, 500, 500);
    [self.mapView setRegion:region animated:YES];
} 
```

我还认为这可能与我在委托中创建选项卡控制器的方式有关。

我的应用委托：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    UIViewController *viewController1 = [[NWSWelcomeViewController alloc] initWithNibName:@"NWSWelcomeViewController" bundle:nil];
    UIViewController *viewController2 = [[NWSMapViewViewController alloc] initWithNibName:@"NWSMapViewViewController" bundle:nil];
  //  UIViewController *viewController3 = [[NWSSettingsViewController alloc] initWithNibName:@"NWSSettingsViewController" bundle:nil];
    self.tabBarController = [[UITabBarController alloc] init];
    self.tabBarController.viewControllers = @[viewController1, viewController2, /* viewController3 */];
    self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

我正在为 iOS 5.1 编写，我正在使用最新的 Xcode。

是的，我在 mapView 上启用了缩放设置。

我只想获取用户位置以将地图视图放大到用户的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T17:54:45.587

这一行在`viewDidLoad`：

```
[self.mapView.delegate self]; 
```

什么都不做（它正在尝试将消息发送`self`到`self.mapView.delegate`）。

它实际上并没有设置地图视图`delegate`，因此`didUpdateUserLocation`永远不会被调用。

你的意思可能是：

```
[self.mapView setDelegate:self]; 
```

或这个：

```
self.mapView.delegate = self; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-05T13:39:04.333

这类问题也可以通过情节提要来解决。转到storyboard->controller->mapView 右键单击​​mapView 弹出窗口将显示有一个点委托将委托+点拖动到控制器![右击地图视图！[][1]](../Images/45dc1dc15b5a41d3b437c34793e58a5e.png)

# iphone - 带边框的 UIImage。无效的上下文 0x0

> ID：12145977
> 
> 赞同：0
> 
> 时间：2012-08-27T16:37:13.330
> 
> 标签：iphone, ios, uiimage, core-graphics, cgcontext

我正在获取图像并将其保存到后台线程中的临时目录中。在保存之前，我想给这个 UIImage 添加一点白色边框。我正在这样做：

```
 - (UIImage *)imageWithBorder:(UIImage *)image {
    CGSize newSize = CGSizeMake(image.size.width, image.size.height);
    CGRect rect = CGRectMake(0.0, 0.0, image.size.width, image.size.height);

    UIGraphicsBeginImageContextWithOptions(newSize, NO, image.scale); {
        CGContextRef context = UIGraphicsGetCurrentContext();

        CGContextBeginTransparencyLayer (context, NULL);
        //Draw
        [image drawInRect:rect blendMode:kCGBlendModeNormal alpha:1.0];
        CGContextSetRGBStrokeColor(context, 1.0, 1.0, 1.0, 1.0);
        CGContextStrokeRectWithWidth(context, rect, 10);
        CGContextEndTransparencyLayer(context);
    }
    UIImage *result =  UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return result;
} 
```

`invalid context 0x0`一切都很好，从临时目录加载该图像后，我可以看到图像的边框，但在控制台中，当下面的代码实现时，我得到了。这里有什么问题？

* * *

**更新01**

```
- (UIImage *)imageWithBorder:(UIImage *)image {
    CGSize newSize = CGSizeMake(image.size.width, image.size.height);
    CGRect rect = CGRectMake(0.0, 0.0, image.size.width, image.size.height);

    UIGraphicsBeginImageContextWithOptions(newSize, NO, image.scale); {
        CGContextRef context = UIGraphicsGetCurrentContext();
        CGContextDrawImage (context, rect, [image CGImage]);
        CGContextSetRGBStrokeColor(context, 1.0, 1.0, 1.0, 1.0);
        CGContextStrokeRectWithWidth(context, rect, 10);
    }
    UIImage *result =  UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return result;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:12:40.173

> UIGraphicsGetCurrentContext 返回当前的图形上下文。
> 
> CGContextRef UIGraphicsGetCurrentContext ( 无效 ); 返回值 当前图形上下文。
> 
> 讨论 当前图形上下文默认为 nil。在调用它的 drawRect: 方法之前，视图对象将一个有效的上下文压入堆栈，使其成为当前的。但是，如果您不使用 UIView 对象进行绘图，则必须使用 UIGraphicsPushContext 函数手动将有效上下文推送到堆栈上。
> 
> 您应该只从应用程序的主线程调用此函数。

这是来自[UIKit 函数参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T17:20:59.460

尝试改变：

```
[image drawInRect:rect blendMode:kCGBlendModeNormal alpha:1.0]; 
```

到

```
CGContextDrawImage (context, rect, [image CGImage]); 
```

另外，为什么要使用透明层？您将 alpha 设置为 1，因此您可以覆盖原始图像，不是吗？

编辑：我只是在我的应用程序中运行相同的代码，在后台，它完美地工作：

```
- (UIImage *)imageWithBorder:(UIImage *)image
{
    NSLog(@"Thread %@", [NSThread currentThread]);

    CGSize newSize = CGSizeMake(image.size.width, image.size.height);
    CGRect rect = CGRectMake(0.0, 0.0, image.size.width, image.size.height);

    UIGraphicsBeginImageContextWithOptions(newSize, NO, image.scale);
    CGContextRef context = UIGraphicsGetCurrentContext();

    //Draw
    CGContextDrawImage(context, rect, [image CGImage]);
    CGContextSetRGBStrokeColor(context, 1.0, 1.0, 1.0, 1.0);
    CGContextStrokeRectWithWidth(context, rect, 10);
    UIImage *result =  UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();
assert(result);
    return result;
} 
```

当我在 viewDidAppear 中执行此操作时：（但它是一个小图像，也许大小相关？）

```
dispatch_async(dispatch_get_global_queue(0, 0), ^{ [self imageWithBorder:[UIImage imageNamed:@"02-redo.png"]] ; } ); 
```

这就是我在日志中看到的全部内容：

```
2012-08-27 13:48:04.679 Searcher[32825:11103] Thread <NSThread: 0x6d30e30>{name = (null), num = 4} 
```

因此，您的代码正在发生其他事情。我正在使用 Xcode 4.4.1 构建，部署目标是 5.1

编辑：在您的块中，您不能引用“单元格”，因为单元格是临时的 - 通过回收它甚至可能不可见。因此，图像名称将通过本地 NSString 路由，最后，您需要另一个可以将图像发布到的方法，以及单元格 indexPath。该方法将查看该 indexPath 是否在 table 的 visibleCells 中，如果是，则更新图像，如果不是，则要存储图像以便它可以与 tableView 一起使用，然后请求单元格。

EDIT2：此代码：

```
dispatch_async(queue, ^{ 
  UIImage *image = [_thumbnailMaster thumbnailForItemWithFilename:cell.label.text];
  dispatch_sync(dispatch_get_main_queue(), ^{ cell.thumbnailView.image = image; }); 
}); 
```

应该变成不涉及“单元格”的东西，因为单元格可能超出范围或被另一个索引使用（假设回收）。像这样的东西：

```
NSString *text = cell.label.text;
NSIndexPath *path = ...;

dispatch_async(queue, ^{ 
  UIImage *image = [_thumbnailMaster thumbnailForItemWithFilename:text];  
   dispatch_sync(dispatch_get_main_queue(), ^{ [self updateCellImage:image withPath"path]; }); 
}); 
```

您的方法确定该单元格是否可见，如果是则更新图像，如果不保存则下次您需要它时拥有它。

# jsp - 在 JSP 中使用 EL 时出错

> ID：12145978
> 
> 赞同：2
> 
> 时间：2012-08-27T16:37:23.910
> 
> 标签：jsp, jstl, el

我使用了 El ，但它无效。我收到一个错误：`javax.el.ELException: Cannot convert 1 of type class java.lang.String to class java.lang.Long`。1 是计数。

```
 <h3>My Shopping</h3>
            <c:set var="count" value=" ${sessionScope.cart.count}" />
            ${count}
             <%--
            <c:set var="cart" value="${sessionScope.cart}" />
            <c:set var="count" value=" ${sessionScope.cart.count}" />
            <br/>
            <c:if test="${count < 1}"  >    
                No Product in your cart
            </c:if>
            <c:if test="${count > 0}">
                <c:set var="listCart" value="${sessionScope.cart.cart}" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T21:15:03.440

此异常表明 the`${count}`是 a `String`，而不是 a `Long`（或`Integer`，这也可以）。

假设会话范围内 bean 的`count`属性`cart`已经是正确的类型，那么我在到目前为止发布的代码中可以看到的唯一原因是值之前有一个悬空的前导空格。

```
<c:set var="count" value=" ${sessionScope.cart.count}" />
<!-- ---------------------^                           --> 
```

这有效地使其成为一个显然不是有效数字的`String`值。`" 1"`删除该违规空间应该可以解决问题。

# objective-c - iOS5、StoryBoards、ARC：奇怪的类别问题

> ID：12145981
> 
> 赞同：1
> 
> 时间：2012-08-27T16:37:41.503
> 
> 标签：objective-c, ios, cocoa-touch, categories

我用 sql 方法创建了一个文件，现在这个文件真的很大。我想将其拆分以实现最佳实践和实现简单性。所以，分类。

我在 xCode 中创建了新的objective-c 类别文件-> DBAccess+Generals.h (.m)。

。H：

```
#import "DBAccess.h"

@interface DBAccess (Generals)

-(void)newMeth;

@end 
```

.m

```
#import "DBAccess+Generals.h"
#import "DBAccess.h"

@implementation DBAccess (Generals)

-(void)newMeth
{
  NSLog(@"New Meth");
}

@end 
```

在 DBAccess.h

```
#import <Foundation/Foundation.h>
#import <sqlite3.h>
#import "DBAccess+Generals.h"

@interface DBAccess : NSObject
{
   NSString *databaseName;
}

@property(nonatomic,strong)NSString *databaseName; 
```

数据库访问.m

```
#import "DBAccess.h"
#import "DBAccess+Generals.h"

@implementation DBAccess
@synthesize databaseName;
sqlite3* database=nil;

-(id)init
{
  if ((self=[super init])) 
  {
    //[self initializeDataBase];
    databaseName=@"world_coins.db";
    //firstVerDB=@"ac_ch_ver.1.0.db";

  }
  return self;
}

//Tones of methods

@end 
```

看起来代码没问题。收到错误“未找到 DBAccess 的接口实现”。我已经用谷歌搜索并在 stackoverflow 周围搜索，但所描述的问题不是我的情况。

有什么帮助吗？先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T17:13:32.940

问题是循环导入

*   `#import "DBAccess+Generals.h"`在*DBAccess.h*
*   `#import "DBAccess.h"`在*DBAccess+Generals.h*

如果删除第一个，则代码会编译。

# c++ - 如何在 C++\wxWidgets 中下载文件

> ID：12145982
> 
> 赞同：0
> 
> 时间：2012-08-27T16:37:45.107
> 
> 标签：c++, download, wxwidgets

如何使用 wxWidgets 下载 C++ 文件？

一直在谷歌搜索，一切都没有出现！帮助表示赞赏！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T16:42:57.810

为此使用[wxHTTP](http://wiki.wxwidgets.org/WxHTTP)类。

**wxHTTP 示例代码：**

```
#include <wx/sstream.h>
#include <wx/protocol/http.h>

wxHTTP get;
get.SetHeader(_T("Content-type"), _T("text/html; charset=utf-8"));
get.SetTimeout(10); // 10 seconds of timeout instead of 10 minutes ...

while (!get.Connect(_T("www.google.com")))
    wxSleep(5);

wxApp::IsMainLoopRunning();

wxInputStream *httpStream = get.GetInputStream(_T("/intl/en/about.html"));

if (get.GetError() == wxPROTO_NOERR)
{
    wxString res;
    wxStringOutputStream out_stream(&res);
    httpStream->Read(out_stream);

    wxMessageBox(res);
}
else
{
    wxMessageBox(_T("Unable to connect!"));
}

wxDELETE(httpStream);
get.Close(); 
```

如果您想要更灵活的解决方案，请考虑使用[libcurl](http://curl.haxx.se/libcurl/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T16:44:30.223

取决于您想从哪里“下载”它，以及文件服务器如何允许下载文件。服务器可能使用 FTP、HTTP 或其他更模糊的东西。无法从您的问题中看出其中没有有用的信息。

一般来说，我不会使用 wxWidgets 来完成这项任务。wxWidgets 是一个 GUI 框架，带有一些附加功能，用于各种可能对您的情况有帮助或可能没有帮助的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T16:45:18.453

`HTTP`正如**Andrejs**建议的那样，从`FTP`使用`wxFTP`

```
wxFTP ftp;

// if you don't use these lines anonymous login will be used
ftp.SetUser("user");
ftp.SetPassword("password");

if ( !ftp.Connect("ftp.wxwindows.org") )
{
    wxLogError("Couldn't connect");
    return;
}

ftp.ChDir("/pub");
wxInputStream *in = ftp.GetInputStream("wxWidgets-4.2.0.tar.gz");
if ( !in )
{
    wxLogError("Coudln't get file");
}
else
{
    size_t size = in->GetSize();
    char *data = new char[size];
    if ( !in->Read(data, size) )
    {
        wxLogError("Read error");
    }
    else
    {
        // file data is in the buffer
        ...
    }

    delete [] data;
    delete in;
} 
```

[http://docs.wxwidgets.org/stable/wx_wxftp.html#wxftp](http://docs.wxwidgets.org/stable/wx_wxftp.html#wxftp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T16:42:15.083

您没有定义“下载文件”对您意味着什么。

如果您想使用 HTTP 检索某些内容，您应该使用像[libcurl这样的](http://curl.haxx.se/libcurl/)[HTTP](http://en.wikipedia.org/wiki/HTTP)客户端库并发出适当的 HTTP请求。`GET`

# c++ - 如何在 C++ 和 MATLAB 之间交换数据？

> ID：12145983
> 
> 赞同：3
> 
> 时间：2012-08-27T16:37:45.643
> 
> 标签：c++, matlab

目前我正在开发一个基于一些 MATLAB 代码的 C++ 程序。在开发期间，我需要将中间结果输出到 MATLAB，以便将 C++ 实现结果与 MATLAB 结果进行比较。我现在做的是用C++写一个二进制文件，然后用MATLAB加载这个二进制文件。以下代码显示了一个示例：

```
int main ()
{
    ofstream abcdef;
    abcdef.open("C:/test.bin",ios::out | ios::trunc | ios::binary); 

    for (int i=0; i<10; i++)
    {
        float x_cord;
        x_cord = i*1.38;
        float y_cord;
        y_cord = i*10;
        abcdef<<x_cord<<"   "<<y_cord<<endl;
    }

    abcdef.close();

    return 0;
} 
```

当我有文件 test.bin 时，我可以使用 MATLAB 命令自动加载文件：

```
 data = load('test.bin'); 
```

当输出数值数据时，这种方法可以很好地工作；但是，如果输出是具有许多成员变量的类，它可能会失败。我想知道是否有更好的方法来完成这项工作，不仅适用于简单的数值数据，而且适用于复杂的数据结构。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:06:45.117

我建议使用 MATLAB 引擎，通过它您可以将数据实时传递给 MATLAB，甚至可以使用 MATLAB 中提供的各种图形绘图工具来可视化数据。

您所要做的就是从 C/C++ 程序调用 MATLAB 引擎，然后您可以轻松地直接从 C/C++ 程序执行 MATLAB 命令和/或在 MATLAB 和 C/C++ 之间交换数据。它可以在两个方向上完成，即从 C++ 到 MATLAB，反之亦然。

[您可以查看与此处](http://preetisblog.com/programming/cc/sampling-from-normal-distribution)所示相同的工作示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T01:24:07.007

我建议在`matlab`. 我一直这样做是为了在`matlab`和其他程序之间交换数据，例如：

```
fd = fopen('datafile.bin','r');
a = fread(fd,3,'*uint32');
b = fread(fd,1,'float32'); 
```

`fread`您可以灵活地读取任何类型的数据。通过在名称中放置 a `*`，如上所述，您还表示您希望存储到该数据类型而不是默认`matlab`数据类型。所以第一个读取 3 个`32 bit`无符号整数并将它们存储为整数。第二个读取单精度浮点数，但将其存储为默认的双精度。

您需要控制在`c++`代码中写入数据的方式，但这是不可避免的。您可以创建一个`c++`以确定性方式打包数据的类方法。

达斯汀

# search - 更喜欢哪种搜索算法？

> ID：12145990
> 
> 赞同：4
> 
> 时间：2012-08-27T16:38:35.933
> 
> 标签：search, big-o, binary-search, sequential

二分搜索算法的 O 值为 O(log n)，而顺序搜索算法的 O 值为 O(n)。但是我们需要在二进制搜索之前进行排序算法，并且排序算法的最佳大 O 值是 O(n.log n)。因此，实际上，二进制搜索的大 O 值是 O(n.log n)，它大于顺序搜索的 O(n.log n)。那么，哪一个更适合作为搜索算法呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T16:41:24.890

在实践中，这取决于您搜索的频率。如果您必须搜索数百万次，则需要二进制搜索，即使您必须支付排序的前期成本。这取决于您的用例。使用二分搜索，您还可以确保插入保持列表排序，因此它们也会变慢。

如果您需要进行大量插入和很少的搜索，顺序搜索可能会更快。

*请记住，在您处理大量*数据之前，其中很多内容甚至不会被注意到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T07:50:37.037

顺序搜索实际上很少用于优化的应用程序。*因为找到合适的数据结构通常比使用在O(n)*中提供常用搜索的数据结构要好得多。

例如，[红黑树](https://en.wikipedia.org/wiki/Red%E2%80%93black_tree)是一种特殊的平衡二叉树，它在*O(log n)*内提供插入/删除/搜索。所以创建、填写和搜索都很快。

# field - 如何在管理员上添加可以在 wordpress 中添加和读取 php 代码的自定义字段？

> ID：12145995
> 
> 赞同：2
> 
> 时间：2012-08-27T16:38:52.890
> 
> 标签：field

如何在管理员上添加可以在 wordpress 中添加和读取 php 代码的自定义字段？

我真的被这个问题困住了。我有一个画廊插件“WP Titans画廊插件”，它安装在一个具有自定义主题设置的复杂主题“Daisho”中。现在，由于这个画廊插件在我们所谓的“投资组合”设置中添加了新页面，那里有很多自定义字段，我认为它是由插件所有者自定义的，当我尝试在自定义字段“描述”中发布时来自另一个插件的 php 代码，它无法读取。

我需要这个 php 代码可以被自定义字段读取。

# c# - 套接字同步接收

> ID：12145996
> 
> 赞同：1
> 
> 时间：2012-08-27T16:38:57.810
> 
> 标签：c#, .net, sockets, networking

我有时会遇到一个奇怪的问题。我有一个同步套接字，我可以连接并发送数据。

```
do
{
    try
    {
        // blocking
        int bytesRead = sender.Receive(bytesReceived);

        // process the received bytes
    }
    catch (SocketException soex)
    {
        throw new Exception(String.Format("Socket exception..." +Environment.NewLine+"[Code: {0}] {1}",soex.ErrorCode,soex.Message));
    }
}
while (sender.Poll(1500, SelectMode.SelectRead) && sender.Available > 0); 
```

我不想永远留在 Receive 中，因为它是阻塞的，所以这就是为什么我提出一个轮询时间来等待数据包的响应，以便有时间进入线路，并且随着可用，我当没有更多真实数据时可能会中断。

我遇到的问题是，当 client.Available > 0 为 FALSE（它有字节）时（在 do-while 中）返回 false我得到一个号码。

任何想法？我很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:45:05.563

也许`sender.Poll`返回 false，但仍返回要读取的数据。也许您可以将您的*while*条件更改为并在循环内`sender.Available > 0`调用。`sender.Poll`

**编辑**：也许这就足够了（伪代码）：

```
int length;
do {
  length = socket.Read(buffer);
  // process "buffer"
} while (length > 0); 
```

您可能需要设置套接字超时以防止读取调用阻塞太久。

# iphone - nsdateformatter 不适用于日文日历

> ID：12145997
> 
> 赞同：6
> 
> 时间：2012-08-27T16:39:02.907
> 
> 标签：iphone, ios, ipad, nsdate, nsdateformatter

当在模拟器和真实设备上将 Settings/General/International/Calendar 设置为日语或佛教时，我在 iOS 上看到了 NSDateFormatter 的问题。年份解析不正确

日期格式化程序

```
static NSDateFormatter *formatter = nil;  // cache this the first time through

if (formatter == nil) {
    formatter = [NSDateFormatter new];
    formatter.locale = [[[NSLocale alloc] initWithLocaleIdentifier:@"en_US"] autorelease]; // Fix for QC79748 - Michael Marceau
    formatter.dateFormat = @"EEE, d MMM yyyy HH:mm:ss zzz";
    formatter.timeZone = [NSTimeZone timeZoneWithAbbreviation:@"EST"];
    formatter.calendar = [[[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar] autorelease];
    formatter.locale = [[[NSLocale alloc] initWithLocaleIdentifier:[[NSLocale preferredLanguages] objectAtIndex:0]] autorelease];

}

NSLog(@"CorrectDate%@",[serviceHeaders safeObjectForKey:@"Date"] );
    NSLog(@"Formatted date:%@",[formatter dateFromString:[serviceHeaders safeObjectForKey:@"Date"]]);

Output

Correct - Mon, 27 Aug 2012 16:33:14 GMT
Formatted date:0024-08-27 16:33:14 +0000 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T22:48:01.370

这是正常工作的。我把你的代码添加到我的项目中，然后设置模拟器使用佛历。

```
NSLog(@"date=%@", [NSDate date]);
2012-08-27 18:42:10.201 Searcher[43537:f803] date=2555-08-27 22:42:10 +0000

    NSDateFormatter *formatter = [NSDateFormatter new];
    formatter.locale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US"]; // Fix for QC79748 - Michael Marceau
    formatter.dateFormat = @"EEE, d MMM yyyy HH:mm:ss zzz";
    formatter.timeZone = [NSTimeZone timeZoneWithAbbreviation:@"EST"];
    formatter.calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    //formatter.locale = [[NSLocale alloc] initWithLocaleIdentifier:[[NSLocale preferredLanguages] objectAtIndex:0]]; 
```

然后输出：

```
NSLog(@"CorrectDate%@", @"Mon, 27 Aug 2012 16:33:14 GMT" );
2012-08-27 18:42:10.203 Searcher[43537:f803] CorrectDateMon, 27 Aug 2012 16:33:14 GMT

NSLog(@"Formatted date:%@",[formatter dateFromString:@"Mon, 27 Aug 2012 16:33:14 GMT"]);
2012-08-27 18:42:10.206 Searcher[43537:f803] Formatted date:2555-08-27 16:33:14 +0000 
```

分析：

这一切都完美无缺。在佛历中，现在是2555年。当您提供一个公历日期，并要求格式化程序使用公历时，它会正确读取它，然后将其转换为佛教日期，当您打印出来时，日期又是 2555。正是你所期望的。

编辑：只是为了强调一点，NSDate 总是相同的，改变的是它的表示。所以我再次将日历设置为佛教，并使用您的格式化程序以公历时间获取当前时间：

```
NSLog(@"date=%@", [NSDate date]);
NSLog(@"Date using the Gregorian calendar: %@", [formatter stringFromDate:[NSDate date]]); 
```

输出

```
2012-08-28 07:13:10.658 Searcher[69194:f803] date=2555-08-28 11:13:10 +0000
2012-08-28 07:13:10.660 Searcher[69194:f803] Date using the Gregorian calendar: Tue, 28 Aug 2012 07:13:10 EDT 
```

PS：您的代码设置了两次区域设置。

# c - 这里是否存在潜在的字节顺序问题？

> ID：12145998
> 
> 赞同：0
> 
> 时间：2012-08-27T16:39:29.450
> 
> 标签：c, putchar

我想在函数`putchar`的帮助下编写一个函数，例如 , `write`。

```
#include <unistd.h>

ssize_t f(int fd, int c) {
    return write(fd, &c, 1);
} 
```

但我认为这里可能存在字节顺序问题，不是吗？那我应该使用`sizeof (int)`吗？我有点困惑，我不知道如何处理（需要演员表`unsigned char`吗？）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T16:42:48.180

是的，这里可能存在字节顺序问题。`c`解决方法是作为一个`unsigned char`而不是作为一个传递`int`。

```
ssize_t
f(int fd, unsigned char c)
{
    return write(fd, &c, 1);
} 
```

这些`<stdio.h>`例程与`int`s 一起工作主要是出于历史原因。它们非常古老，并且包含许多现在被认为不正确的界面设计决策。不要将它们用作模板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T16:45:18.573

是的，很好，有一个字节序问题。如果要保留函数签名，需要将数据临时存入一个unsigned char，然后输出；

```
#include <unistd.h>

ssize_t f(int fd, int c) {
    unsigned char ch = (unsigned char)c;
    return write(fd, &ch, sizeof(unsigned char));
} 
```