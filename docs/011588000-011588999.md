# StackOverflow 问答 11588000-11588999

# css - 在表格行上有多个类

> ID：11588004
> 
> 赞同：1
> 
> 时间：2012-07-20T23:05:23.763
> 
> 标签：css

所有，我有一个 HTML 行的以下 CSS：

```
.clickable_row:hover {
cursor: pointer;
}
.clickable_row:hover {
background-color: #FFFFCF;
} 
```

然后我的html看起来像这样：

```
<tr class="clickable_row"><td>Text</td></tr> 
```

但是，对于最高行，我也想为其添加一个突出显示的类。我试图做这样的事情：

```
<tr class="clickable_row highlighted"><td>Text</td></tr> 
```

然后添加以下CSS：

```
.clickable_row highlighed{
background-color: #BFDEFF;
} 
```

这不会突出显示该行，关于如何使其工作的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T23:07:16.807

采用

```
.clickable_row.highlighed{
    background-color: #BFDEFF;
} 
```

要不就

```
.highlighed{
    background-color: #BFDEFF;
} 
```

您的选择器查找带有类的元素的后代，该类`clickable_row`是`highlighed`标签

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T23:08:33.577

当您在类名中放置一个空格时，您正在创建一个全新的类，因此`<tr class="clickable_row highlighted">`会创建类“clickable_row”以及“highlighted”类。

如果您想突出显示它，只需执行`.highlighted { background-color: #BFDEFF; }`

Although, if you want to optimise, I'd probably recommend using the `:first-child` selector, this will highlight only the first row, without you needed to give it a separate class

# mysql - 两个表之间的记录插入（选择何时计算年龄）

> ID：11588010
> 
> 赞同：0
> 
> 时间：2012-07-20T23:05:46.340
> 
> 标签：mysql

以下是我对 cron 的 sql 查询，其中我试图将记录从一个表保存到另一个表我只想要一个修改，我无法在我的 i_age 字段中进行修改，年龄应该保存在数据库中，但如果零来自上表然后年龄计算公式不适用，它只将零保存到 i_age 字段请让我知道我该怎么做，

谢谢，

```
INSERT IGNORE into z_census ( i_age)
            SELECT  IF((i_age = 0), i_age, FLOOR(DATEDIFF(DATE(NOW()),DATE_ADD('1970-01-01',INTERVAL users.i_dob SECOND))/365.25) )
            FROM users 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T00:37:00.703

这相当于您的查询中计算“年龄”（整数）年的表达式：

```
FLOOR(DATEDIFF(DATE(NOW()),
  DATE_ADD('1970-01-01',INTERVAL users.i_dob SECOND)
)/365.25) 
```

这个表达式实际上是这样的形式：

```
FLOOR(DATEDIFF(DATE(NOW()), dob )/365.25) 
```

其中`dob`是代表用户出生日期的 DATE 值。我们`dob`使用这个表达式得出：

```
DATE_ADD('1970-01-01',INTERVAL users.i_dob SECOND) 
```

（这是基于一些假设，如下所述。）

* * *

**选择：**

此计算返回几乎相同的结果，但实际上更精确：

```
IF(YEAR(NOW())<=YEAR( dob ), 0,
  YEAR(NOW())-YEAR( dob ) /* yeardiff and subtract 1 if now is before birthday */
  - (MONTH(NOW())<MONTH( dob ) OR 
      (MONTH(NOW())=MONTH( dob ) AND DAY(NOW())<DAY( dob )))
) 
```

注意：同样，在此表达式中，`dob`表示实际的 MySQL DATE 值，而*不是*整数秒数。`dob`要使用它，您将使用以下表达式替换所有五次出现的：

```
DATE_ADD('1970-01-01',INTERVAL users.i_dob SECOND) 
```

* * *

**更多细节：**

看起来该`users.i_dob`列的数据类型将日期表示为从 1970 年 1 月 1 日午夜开始的整数秒数。（鉴于这似乎对 1970 年之后的 DOB “有效”，但不是更早。所以这很可能是 (有符号）`INT`或`BIGINT`.（这可能是一个字符列，并且该值被隐式转换为数字。TIMESTAMP 列不允许存​​储早于 1970 年 1 月 1 日的日期值。）

（拥有有关所涉及列的实际数据类型的信息会有所帮助。）

鉴于列名称前导“i_”，我们将假设`users.i_dob`列定义为`INT`，并表示从 UTC 1970 年 1 月 1 日午夜开始的秒数。

这给出了一个有效范围的“dob”值，可以表示为大约。“1901-12-14”到“2038-01-19”

它看起来像这样的查询：

```
SELECT DISTINCT users.id
     , users.v_first_name
     , users.v_last_name
     , FLOOR((TO_DAYS(NOW())- TO_DAYS(FROM_UNIXTIME(users.i_dob))) / 365.25)
  FROM users 
```

正在尝试以年为单位计算用户“年龄”。

该`FROM_UNIXTIME`函数适用于 TIMESTAMP 值，因此它*不适*用于 1970 年 1 月 1 日之前的值。

要获取 i_dob 表示的实际 DATETIME 值，我们可以使用该`DATE_ADD`函数。

```
DATE_ADD('1970-01-01',INTERVAL users.i_dob SECOND) 
```

要获取该 DATETIME 值和当前日期之间的天数，我们使用以下`DATEDIFF`函数：

```
DATEDIFF(NOW(),DATE_ADD('1970-01-01',INTERVAL users.i_dob SECOND)) 
```

（DATEDIFF 函数忽略时间组件，只对日期部分进行操作，这很可能是您想要的。查询中的计算包括时间部分，这增加了一些草率。）

从天数来看，您似乎是通过除以一年中的天数来计算年数，当 NOW() 在他们生日的一天内时，那里有一点马虎......但我不是会费心在这里证明这一点。）

所以，我认为这应该让你足够接近，

```
= FLOOR(DATEDIFF(DATE(NOW()),
    DATE_ADD('1970-01-01',INTERVAL users.i_dob SECOND)
  )/365.25) 
```

* * *

一个人“年龄”的更精确计算确实需要比较年、月和日。如果我们只对报告非负年龄感兴趣，这样的事情会起作用：

```
IF(YEAR(NOW())<=YEAR( dob ), 0,
  YEAR(NOW())-YEAR( dob ) /* yeardiff and subtract 1 if now is before birthday */
  - (MONTH(NOW())<MONTH( dob ) OR 
      (MONTH(NOW())=MONTH( dob ) AND DAY(NOW())<DAY( dob )))
) 
```

注意：该表达式中的代表“dob”`dob`的 MySQL值，而*不是*整数秒数。`DATE`

 *注意：这个表达式将只返回非负值；它永远不会返回负年龄。

我承认这看起来有点复杂，但真正要做的是检查年龄是否至少为 1 岁，否则减去年份，然后使用条件测试（它返回一个布尔值，我们将其解释为整数 1 或0) 当当前月份和日期在生日的月份和日期之前，将差值向后调整 1 年。)

在您的情况下，要使用它，您需要`dob`将该表达式中的所有五次出现替换为从整数中获取 dob 值的表达式`DATE`，即

```
dob = DATE_ADD('1970-01-01',INTERVAL users.i_dob SECOND) 
```

That would give a more precise result, but would be way more uglier than the other expression, which returns a nearly equivalent result.*

# haxe - 如何使用泛型在数组中查找类类型

> ID：11588011
> 
> 赞同：1
> 
> 时间：2012-07-20T23:05:52.843
> 
> 标签：haxe

我想在数组中查找特定的类类型。不知道怎么做。

```
var a:A = new A();
var b:B = new B(); // B extends A
var c:C = new C(); // C extends A

var arr:Array<A> = [];
arr.push(a);
arr.push(b);
arr.push(c);
// i'd like something like:
c = arr.get<C>(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T21:02:28.153

在 Haxe 中，就像 Java 一样，您无法访问代码中的类型参数，因为在大多数实现中它被删除，这与“动态”相同。这意味着为了实现它，您需要一个这样的函数：

```
public static function getWithType<T>(array:Array<Dynamic>, cl:Class<T>):Null<T>
{
    for (el in array)
    {
        if (Std.is(el, cl))
            return el;
    }

    return null;
} 
```

请注意，您需要传递“类”参数。你会像这样使用它：

```
c = MyClass.getWithType(arr, C); 
```

您还可以使用“使用”语句，这样您就可以像这样使用它：

```
using MyClass; 
```

(...)

```
c = arr.getWithType(C); 
```

您还可以使用[Lambda](http://haxe.org/doc/cross/lambda)类实现类似的行为：

```
using Lambda;

c = arr.filter(function(el) return Std.is(el, C)).first(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T06:52:31.307

查看[mixins](http://haxe.org/manual/using)，您可以编写自己的函数来检查元素类型并返回它们。

# scala - Scala：当隐式证据参数具有表示类型时，复制方法的返回类型

> ID：11588014
> 
> 赞同：1
> 
> 时间：2012-07-20T23:06:07.370
> 
> 标签：scala, type-parameter

假设我有一个带有类型参数的类和一个方法，该方法仅在使用具有表示类型的特定特征参数化该类时才应返回实例的副本。我可以很容易地做到这一点。我不能做的是给该方法一个合理的返回类型：

```
case class Foo[+A](a: A) {
  // Compiles
  def gotFooBar(implicit evidence: A <:< Bar[_]) = copy(a = a.Copy())

  // Does not compile
  def gotFooBar(implicit evidence: A <:< Bar[_]): Foo[A] = copy(a = a.Copy())
}

trait Bar[+B <: Bar[B]] {
  def Copy(): B // Return underlying type
}

case class Grill() extends Bar[Grill] {
  def Copy() = Grill()
} 
```

该函数的返回类型是什么，或者更重要的是，我将如何设置类型以使其成为返回类型？有人还可以指出真正的返回类型如何可能是 的超类型`Foo[A]`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T00:32:43.390

好吧，因为你只需要`Bar[_]`你 get`Any`作为调用的结果`a.Copy`。您需要该`gotFooBar`方法的类型参数：

```
case class Foo[+A](a: A) {
   def gotFooBar[B <: Bar[B]](implicit evidence: A <:< B): Foo[B] = {
      val bar = a: B
      copy(a = bar.Copy())
   }
} 
```

第二个问题是，如何强制它`Foo[B]`是`Foo[A]`. 您只需要添加`A`作为下限`B`：

```
def gotFooBar[B >: A <: Bar[B]](implicit evidence: A <:< B): Foo[B] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T16:31:08.730

这是@0__ 对答案的后续回答。`A`如果有与之关联的 Manifest ，情况会变得更加复杂：

```
case class Foo[+A : Manifest](a: A) 
```

方法类型参数`B`也需要 Manifest（即使您不使用它）。添加 Manifest ( ) 的常用方法也不起作用，因为当方法还具有隐式参数（在本例中为 ）`: Manifest`时，这是不允许的。`implicit evidence`清单可以放在隐式参数列表中，如下所示：

```
def gotFooBar[B >: A <: Bar[B]]
  (implicit m: Manifest[B], evidence: A <:< B): Foo[B] =
  copy(a = a.Copy()) 
```

# javascript - VBA 和 Javascript 布尔表达式有什么区别？

> ID：11588015
> 
> 赞同：1
> 
> 时间：2012-07-20T23:06:11.910
> 
> 标签：javascript, vba, operators

在 JavaScript 中：

```
alert(True > False) -> true
alert(False > True) -> false 
```

这是有道理的，因为 True 是 1 而 False 是 0 ..

但在 VBA 中：

```
Msgbox(4 > 3)        -> true
Msgbox(True > False) -> false
Msgbox(False > True) -> true 
```

谁能解释为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T23:08:13.963

在 VBA 中，True 为 -1，False 为 0。:) 所以所有方程都是正确的。见上一个问题：[If value = true then append 1 else 0 in VBA](https://stackoverflow.com/questions/5061566/if-value-true-then-append-1-else-0-in-vba)

# c# - 如何将 C# 类识别为 ArrayOf 的实例

> ID：11588018
> 
> 赞同：1
> 
> 时间：2012-07-20T23:06:35.683
> 
> 标签：c#, arrays, reflection, types

如果这是一个幼稚的问题，我们深表歉意。我编写了一个“通用”C# Web 服务客户端：它通过检查任何 Web 服务的 WSDL 并生成允许您向 Web 服务提交请求并显示响应的 Windows 窗体 UI 来工作。

它生成 UI 的过程如下：首先，它从 Web 服务的 WSDL 动态生成一个已编译的程序集（使用 ServiceDescriptionImporter 和 CodeCompiler），然后它内省由该过程生成的 SoapHttpClientProtocol 客户端。

对于每个 Web 服务方法，通过反映参数类型生成显示输入参数字段的 UI。本质上，我必须识别每种类型并决定如何最好地显示它（因此字符串参数显示为文本框，布尔值显示为复选框，等等）。

我难以识别的类型是 ArrayOfKeyValuestringstringKeyValueOfstringstring 等类型。我可以简单地解析类型的名称（沿着 if（名称以“ArrayOf”开头）的行），但我确信必须有更好的方法来以某种方式将这些类型识别为数组。

如果有人可以建议如何做到这一点，我将不胜感激！谢谢，马丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T23:49:33.320

如果它是任何类型的数组或列表，它将实现 IEnumerable，因此这可能会让您朝着正确的方向前进：

```
if (typeof(IEnumerable).IsAssignableFrom(typeof(ArrayOfKeyValuestringstringKeyValueOfstringstring)))
{
    // ok, it's an array...
} 
```

编辑：Martin (user304582) 指出一些其他类型，如 String 实现 IEnumerable。我在这里的假设是，在代码的这一点上，简单类型（如 String、Int32 等）已经过测试——它不是其中之一。

假设 ServiceDescriptionImporter 在所有情况下使用数组而不是列表生成参数，也可以使用`Array`而不是。`IEnumerable`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T03:00:22.597

不幸的是，这也不起作用，因为我需要以编程方式提取键和值的类型。出于其他技术原因，我已升级我的客户端以使用 .Net 4.0 WsdlImporter 及其相关类，这些类生成更清晰的类型代码，并且作为副产品避免使用这些 ArrayOf 类。谢谢你的帮助！

# php - 模拟帖子绕过重定向

> ID：11588019
> 
> 赞同：0
> 
> 时间：2012-07-20T23:06:39.237
> 
> 标签：php, curl

我需要使用 curl 访问页面 html。问题是，除非您向该页面发送帖子，否则此页面总是将您重定向回索引。

尝试：（`www.clubmodel.com.br/ensaios`警告*：色情内容*）

您将被重定向到 www.clubmodel.com.br，一旦您点击“进入”，您将能够访问该页面。

反正有用 curl 模拟它并取回内容吗？

是的，我需要废弃页面内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T23:19:54.007

指定要与`-d`选项或其变体之一一起使用的表单参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T23:27:38.287

首先，您可以警告该网站包含色情内容。我同意，但有些人不同意。其次，这与 POST 无关。该网站需要一个 cookie，表明您同意查看色情材料。您需要在每个请求中发送该 cookie。

在这里，我为您完成了这项工作：

`curl_setopt($ch, CURLOPT_COOKIE, "concordo=entrou; domain=www.clubmodel.com.br; path=/");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T23:27:49.370

本网站需要设置 cookie。您应该指定`CURLOPT_COOKIE`选项：

```
$url = "http://www.clubmodel.com.br/ensaios";
$ch = curl_init( $url );
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_TIMEOUT, 120);
curl_setopt($ch, CURLOPT_COOKIE, "concordo=entrou");
$content = curl_exec( $ch );
print($content); 
```

下次您可以使用 Firebug 自己解决这个问题。

# php - 调整查询字符串中的变量

> ID：11588020
> 
> 赞同：0
> 
> 时间：2012-07-20T23:06:41.453
> 
> 标签：php, oop, http, variables, http-post

在我的 API 访问文件中，我有以下代码

```
//operation was successful get the token from the reponse.
$challengeToken = $r->result->token;
    // to this point, we have got the token 

$userAccessKey = 'jkdijakjiejkdj25';    
//generate key
$generatedKey = md5($challengeToken.$userAccessKey); 
```

我正在使用 http_request2 类发送帖子数据，通过声明

```
$loginrequest = new HTTP_Request2('http://vijayholdings.com/admin/webservice.php?operation=login&username=admin&accessKey=('.$generatedKey.')', HTTP_Request2::METHOD_POST); 
```

有人可以告诉我如何在作为类参数给出的 URL 中包含 $generatedKey 吗？

目前

```
$loginrequest = new HTTP_Request2('http://vijayholdings.com/admin/webservice.php?operation=login&username=admin&accessKey=$generatedKey', HTTP_Request2::METHOD_POST); 
```

我也试过这个，但失败了......

请指导我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T23:08:34.230

`" "`只需为解析器使用双引号即可获取`"$variables"`。

# php - CakePHP：具有默认值的日期字段

> ID：11588022
> 
> 赞同：2
> 
> 时间：2012-07-20T23:06:45.947
> 
> 标签：php, cakephp

我正在使用 CakePHP 2.1 并有一个日期字段来获取用户的出生日期：

例如

```
echo $this->Form->input('Profile.dob', array('label' => 'Date of Birth'
                                        , 'dateFormat' => 'DMY'
                                        , 'empty' => array('DATE','MONTH','YEAR')
                                        , 'minYear' => date('Y') - 110
                                        , 'maxYear' => date('Y') - 0)); 
```

如您所见，我尝试使用数组设置默认值，但这只是使它们都具有 DATE 的默认值。我如何得到它，以便每个下拉列表都具有正确的值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T10:12:42.453

这有点骇人听闻而且非常丑陋，但是由于该`empty`选项似乎不支持多个值，因此它可能是最简单的解决方案-除非您想重写整个`dateTime()`函数。`str_replace`不幸的是，不允许限制替换的数量，这就是我们不得不求助于`preg_replace`.

```
$placeholder = '[RandomStringWhichDoesNotAppearInTheMarkup]';

$out = $this->Form->input('Profile.dob', array('label' => 'Date of Birth'
                                            , 'dateFormat' => 'DMY'
                                            , 'empty' => $placeholder
                                            , 'minYear' => date('Y') - 110
                                            , 'maxYear' => date('Y') - 0));

$escapedPlaceholder = preg_quote($placeholder, '/');
$out = preg_replace("/$escapedPlaceholder/", 'DATE', $out, 1);
$out = preg_replace("/$escapedPlaceholder/", 'MONTH', $out, 1);
$out = preg_replace("/$escapedPlaceholder/", 'YEAR', $out, 1);

echo $out; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-27T20:29:20.460

您想要的功能现已[实现](https://github.com/cakephp/cakephp/commit/99813e97b3f3acab0a479371c21d6f9d22dbccdb)，并将在下一个版本中提供。目前，您可以从 github 签出 master 分支以获取此补丁。检查链接提交中的测试用例以获取使用示例。如果您当前使用的是 cakephp 2.1，请阅读手册中的 2.1 到 2.2 迁移指南，因为 master 分支是 2.2 dev 分支。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-25T13:00:02.083

我已经检查过它会给出相同的输出，这是必需的：此代码将生成具有给定默认值的相同下拉框，并且发布数据将相同：

```
echo $this->Form->day('Profile.dob', array('empty'=>'Day'));
echo $this->Form->month('Profile.dob', array('empty'=>'Month'));
echo $this->Form->year('Profile.dob', 1950, date('Y'),array('empty'=>'Year')); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-28T17:58:24.723

```
<?php echo $this->Form->input('birth_dt', array( 'label' => 'Date of birth'
        , 'dateFormat' => 'DMY'
        , 'minYear' => date('Y') - 70
        , 'maxYear' => date('Y') - 18 ));
?> 
```

//或者

```
<?php
echo $this->Form->year('Profile.dob', date('Y') - 100, date('Y') - 13, array('empty' => "YEAR"));
echo $this->Form->month('Profile.dob', array('empty' => "MONTH"));
echo $this->Form->day('Profile.dob', array('empty' => 'DAY'));
?> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-23T10:13:13.547

```
<?php
echo $form->input('date', array(
'type'  => 'date',
'label' => 'Date',
'empty' => TRUE,
'minYear' => 2000,
'dateFormat' => 'DMY',
'maxYear' => date('Y'),
'minYear' => date('Y') - 10
# default order m/d/y

));
?> 
```

它像魅力一样醒来

**编辑**：-（您可以使用简单的 jquery 代码执行此操作）如果您想要自定义日期空值，请在包含 jquery.js 的标题中添加此 jquery 脚本。

```
<script type="text/javascript">     

        // var valid=true;

        jQuery(document).ready( function() {

            $("#dateDay option:first").text('DAY');
            $("#dateMonth option:first").text('MONTH');
            $("#dateYear option:first").text('YEAR');

        });

</script> 
```

![在此处输入图像描述](../Images/69f743244e60af28d9b74043557cc80c.png)

使用您的选项字段 id 更改 id #dateDay、#dateMonth、#dateYear ....您可以自定义它，使其适用于每个 cakephp-date 字段。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-05T09:49:41.847

我是这样实现的

```
echo $this->Form->dateTime('dob', 'DMY','', array('value'=>'1987-02-12','empty'=>false,'label'=>'','minYear'=>date('Y')-60,'maxYear'=>date('Y')-15)); 
```

'value' 属性在 cakephp 2.0 api 之后被添加并且 'selected' 被移除

2.0 更新 $selected 参数被移除

$selected 参数已从 FormHelper 中的几个方法中删除。现在所有方法都支持 $attributes['value'] 键，它应该用来代替 $selected。此更改简化了 FormHelper 方法，减少了参数的数量，并减少了 $selected 创建的重复。影响的方法是：

```
FormHelper::select()
FormHelper::dateTime()
FormHelper::year()
FormHelper::month()
FormHelper::day()
FormHelper::hour()
FormHelper::minute()
FormHelper::meridian() 
```

# javascript - 移动 Web 应用 Java 脚本警报

> ID：11588024
> 
> 赞同：0
> 
> 时间：2012-07-20T23:06:50.190
> 
> 标签：javascript, mobile-application

我正在使用 javascript 开发移动网络应用程序

我想知道通知我的用户错误的最佳方式是什么

例如，输入错误的密码时，我想通知他们密码不正确。

我尝试使用：

```
alert('You entered a wrong password'); 
```

但在手机上，运行该应用程序时，它无法正常工作

关于如何在使用该应用程序时通知和提醒我的用户有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T23:11:00.437

这取决于您的 UI 以及您想要什么。您可以只更新 DOM 以在字段旁边输出某种错误标志，放置警告图像，放置边框，模式信息框，老实说。

# animation - 对单个文件多次执行相同的操作

> ID：11588025
> 
> 赞同：0
> 
> 时间：2012-07-20T23:07:10.503
> 
> 标签：animation, action, photoshop

好的，我的问题是你能在一个文件上批量执行一个动作一定次数吗？

我有一个圆圈，我想要一个 100 帧动画到一个大圆圈。无法弄清楚如何在 Photoshop 中做到这一点......至少不是自动的，而不必每次都自己玩和行动并保存它。

我去 Flash 制作动画并保存为 PNG 序列。然而，这给了我 100 个像素尺寸相同的文件。它们是我想要的，但最小的圆圈与最大的圆圈尺寸相同（图像大小）。

也许您对我的问题有更好的解决方案。基本上我想要 100 帧的圆动画，每个图像只有圆本身的大小。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T11:18:12.467

你为什么不通过定义工作区的大小来解决工作区与圆的大小相同。

# android - 密钥加密/解密 AES (Rijndael) 的问题

> ID：11588032
> 
> 赞同：0
> 
> 时间：2012-07-20T23:07:41.733
> 
> 标签：android, key, aes, rijndael

我正在开发一个使用 AES 算法 (Rijndael) 加密和解密传输信息的 Android 项目。

我使用的 WS 有一个用于加密和解密的固定密钥。所以我必须在源代码中有相同的键。

但是，此密钥经过处理以随后用于加密/解密。问题是关键是没有经过适当的治疗。原因：特殊字符。我尝试使用其他没有特殊字符的键，并且效果很好。

这是以下算法的摘录：

```
final String KEY_GENERATION_ALG = "d(*Mu96p@lg91¨%0c*f7&d^`pkçly$f7";
    final int HASH_ITERATIONS = 10000;
    final int KEY_LENGTH = 256;

    char[] humanPassphrase = { 'P', 'e', 'r', ' ', 'v', 'a', 'l', 'l', 'u',
            'm', ' ', 'd', 'u', 'c', 'e', 's', ' ', 'L', 'a', 'b', 'a',
            'n', 't' };
    byte[] salt = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0xA, 0xB, 0xC, 0xD, 0xE,
            0xF }; 

    PBEKeySpec myKeyspec = new PBEKeySpec(humanPassphrase, salt, HASH_ITERATIONS, KEY_LENGTH);
    SecretKeyFactory keyfactory = null;
    SecretKey sk = null;
    SecretKeySpec skforAES = null;

    try {
        keyfactory = SecretKeyFactory.getInstance(KEY_GENERATION_ALG);
        sk = keyfactory.generateSecret(myKeyspec);

    } catch (NoSuchAlgorithmException nsae) {
        Log.e("AESdemo",
                "no key factory support for PBEWITHSHAANDTWOFISH-CBC");

    } catch (InvalidKeySpecException ikse) {
        Log.e("AESdemo", "invalid key spec for PBEWITHSHAANDTWOFISH-CBC");

    }

    byte[] skAsByteArray = sk.getEncoded();
    skforAES = new SecretKeySpec(skAsByteArray, "AES");

    final String CIPHERMODEPADDING = "AES/CBC/PKCS7Padding";

    byte[] iv = { 0xA, 1, 0xB, 5, 4, 0xF, 7, 9, 0x17, 3, 1, 6, 8, 0xC, 0xD,
            91 };
    IvParameterSpec IV = new IvParameterSpec(iv);

    String decrypted = new String(decrypt(CIPHERMODEPADDING, skforAES, IV, ciphertext));

    return decrypted; 
```

这是关键：d(*Mu96p@lg91¨%0c*f7&d^`pkçly$f7

应用程序在 catch 块“NoSuchAlgorithmException”上崩溃。

有没有人经历过这个？我不知道该怎么做才能解决这个问题。

非常感谢！

* * *

还是没用，马库斯。：/

错误是这样的：

“无效的密钥异常。”

看看我的代码怎么样。

```
public class MainActivity extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    String desc = "starting work...";
    TextView tv1 = (TextView) findViewById(R.id.tv1);
    tv1.setText(desc);

    byte[] KEY_GENERATION_ALG = null;
    try {
        KEY_GENERATION_ALG = ("teste").getBytes("ISO-8859-1");
    } catch (UnsupportedEncodingException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    final int HASH_ITERATIONS = 10000;
    final int KEY_LENGTH= 256;
    SecretKeySpec skforAES=null;
    // Obviously, you must not embed the human-friendly passphrase in your code, as I have done here.
    // The passphrase should be kept outside the mobile device, and the user prompted to enter it.
    // It is supplied as a literal here for convenience of this demonstration
    /*char [] humanPassphrase = {'P','e','r',' ','v','a','l','l','u','m',' ',
                               'd','u','c','e','s',' ','L','a','b','a','n','t' };
    byte [] salt = {0,1,2,3,4,5,6,7,8,9,0xA,0xB,0xC,0xD,0xE,0xF};  // must save this for next time we want the key

    PBEKeySpec myKeyspec = new PBEKeySpec(humanPassphrase, salt, HASH_ITERATIONS, KEY_LENGTH);
    tv1.setText("PBEKeySpec generated");
    SecretKeyFactory keyfactory=null;
    SecretKey sk=null;
    SecretKeySpec skforAES=null;
    try {
        keyfactory = SecretKeyFactory.getInstance(KEY_GENERATION_ALG);
        sk = keyfactory.generateSecret(myKeyspec);

    } catch (NoSuchAlgorithmException nsae) {
        Log.e("AESdemo", "no key factory support for PBEWITHSHAANDTWOFISH-CBC" );
    } catch (InvalidKeySpecException ikse) {
        Log.e("AESdemo", "invalid key spec for PBEWITHSHAANDTWOFISH-CBC" );
    }

    // This is our secret key.  We could just save this to a file instead of regenerating it
    // each time it is needed.  But that file cannot be on the device (too insecure).  It could
    // be secure if we kept it on a server accessible through https.
    byte[] skAsByteArray = sk.getEncoded();*/
    try {
        skforAES = new SecretKeySpec(KEY_GENERATION_ALG, "AES");
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    final String CIPHERMODEPADDING = "AES/CBC/PKCS7Padding";

    // must save the IV for use when we want to decrypt the text
    byte [] iv = {0xA,1,0xB,5,4,0xF,7,9,0x17,3,1,6,8,0xC,0xD,91};   
    IvParameterSpec IV = new IvParameterSpec(iv);
    byte[] plaintext=null;
    try {
        // Obviously in a real use scenario, the plaintext will not be a literal in your app.
        // This plaintext comes from chapter X of "Alice's Adventures in Wonderland" by Lewis Carroll
        // I like the emphasis the author places on clear explanations ...
        plaintext = (
                  "Tis the voice of the Lobster; I heard him declare,\n"
                + "    \"You have baked me too brown, I must sugar my hair.\"\n "
                + "    As a duck with its eyelids, so he with his nose\n"
                + "    Trims his belt and his buttons, and turns out his toes.'\n"
                + "`I should like to have it explained,' said the Mock Turtle.\n"
                + "`She can't explain it,' said the Gryphon hastily. `Go on with the next verse.'\n"
                + "Alice did not dare to disobey, though she felt sure it would all come wrong, "
                + "and she went on in a trembling voice:-- \n"
                + "    `I passed by his garden, and marked, with one eye, \n"
                + "     How the Owl and the Panther were sharing a pie--' \n"
                + "`What is the use of repeating all that stuff,' the Mock Turtle interrupted, "
                + "`if you don't explain it as you go on? It's by far the most confusing thing I ever heard!'"
                ).getBytes("ISO-8859-1");
    } catch (UnsupportedEncodingException uee) {
        Log.e("AESdemo", "no String support for ISO-8859-1" );
    }

    Log.i("AESdemo", "plaintext length =" + plaintext.length );

    byte[] ciphertext = encrypt(CIPHERMODEPADDING, skforAES, IV, plaintext);

    String decrypted = new String( decrypt(CIPHERMODEPADDING, skforAES, IV, ciphertext) );

    tv1.setText(decrypted);
}

//  Use this method if you want to add the padding manually
//  AES deals with messages in blocks of 16 bytes.
//  This method looks at the length of the message, and adds bytes at the end
//  so that the entire message is a multiple of 16 bytes.
//  the padding is a series of bytes, each set to the total bytes added (a number in range 1..16).
byte [] addPadding (byte[] plain) {
    byte plainpad[] = null;
    int shortage  = 16 - (plain.length % 16);
    // if already an exact multiple of 16, need to add another block of 16 bytes
    if (shortage==0) shortage=16;

    // reallocate array bigger to be exact multiple, adding shortage bits.
    plainpad = new byte[ plain.length+shortage ];
    for (int i=0;i< plain.length; i++) {
        plainpad[i]=plain[i];
    }
    for (int i=plain.length;i<plain.length+shortage;i++) {
        plainpad[i]=(byte)shortage;
    }
    return plainpad;
}

//  Use this method if you want to remove the padding manually
// This method removes the padding bytes
byte [] dropPadding (byte[] plainpad) {
    byte plain[] = null;
    int drop  = plainpad[plainpad.length-1];  //last byte gives number of bytes to drop

    // reallocate array smaller, dropping the pad bytes.
    plain = new byte[ plainpad.length - drop ];
    for (int i=0;i< plain.length; i++) {
        plain[i]=plainpad[i];
        plainpad[i]=0;  // don't keep a copy of the decrypt
    }
    return plain;
}

byte [] encrypt(String cmp, SecretKey sk, IvParameterSpec IV, byte[] msg) {
    try {
        Cipher c = Cipher.getInstance(cmp);
        c.init(Cipher.ENCRYPT_MODE, sk, IV);
        return c.doFinal(msg);
    } catch (NoSuchAlgorithmException nsae) {
        Log.e("AESdemo", "no cipher getinstance support for "+cmp );
    } catch (NoSuchPaddingException nspe) {
        Log.e("AESdemo", "no cipher getinstance support for padding " + cmp );
    } catch (InvalidKeyException e) {
        Log.e("AESdemo", "invalid key exception" );
    } catch (InvalidAlgorithmParameterException e) {
        Log.e("AESdemo", "invalid algorithm parameter exception" );
    } catch (IllegalBlockSizeException e) {
        Log.e("AESdemo", "illegal block size exception" );
    } catch (BadPaddingException e) {
        Log.e("AESdemo", "bad padding exception" );
    }
    return null;
}

byte [] decrypt(String cmp, SecretKey sk, IvParameterSpec IV, byte[] ciphertext) {
    try {
        Cipher c = Cipher.getInstance(cmp);
        c.init(Cipher.DECRYPT_MODE, sk, IV);
        return c.doFinal(ciphertext);
    } catch (NoSuchAlgorithmException nsae) {
        Log.e("AESdemo", "no cipher getinstance support for "+cmp );
    } catch (NoSuchPaddingException nspe) {
        Log.e("AESdemo", "no cipher getinstance support for padding " + cmp );
    } catch (InvalidKeyException e) {
        Log.e("AESdemo", "invalid key exception" );
    } catch (InvalidAlgorithmParameterException e) {
        Log.e("AESdemo", "invalid algorithm parameter exception" );
    } catch (IllegalBlockSizeException e) {
        Log.e("AESdemo", "illegal block size exception" );
    } catch (BadPaddingException e) {
        Log.e("AESdemo", "bad padding exception" );
    }
    return null;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T23:46:35.240

我并没有真正关注您在这里所做的事情，但看起来您没有正确使用 API。to 的参数`SecretKeyFactory.getInstance()`应该是密钥算法的名称，而不是实际的密钥。而且由于您已经拥有密钥，因此您不需要使用 SecretKeyFactory 为您生成密钥。

尝试使用您的密钥直接创建 SecretKeySpec 实例，如下所示：

```
skforAES = new SecretKeySpec(KEY.getBytes("utf-8"), "AES"); 
```

# c# - C#CenterParent 使用 ShowDialog 不起作用

> ID：11588036
> 
> 赞同：0
> 
> 时间：2012-07-20T23:07:55.697
> 
> 标签：c#, forms, position

我无法让子表单以它的父表单为中心。我一直在尝试各种建议，从使用或不使用 ShowDialog 到各种古怪的“计算表单的位置”代码。

我认为这真的不应该那么复杂。

无论如何，这里有一些代码。下面的代码是我实例化表单并要求它打开的地方。`this`这段代码中的是 MainForm 。

```
FormName myForm = new FormName();
myForm.ShowDialog(this); 
```

我已将表单设置为`StartPosition`，`CenterParent`但如果我移动 MainForm 并重新打开表单，它不会跟随。事实上，它无论如何都保持在正确的位置。它甚至不是中央屏幕！

在表单的构造函数中，我没有对表单的位置进行任何设置。

我也没有在表单的 Load 方法中对表单的位置进行任何设置。

请帮忙！

编辑：我尝试单步执行表单的构造函数和加载方法，以查看它们是否在完成之前救助并且它们工作得很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T23:08:01.583

事实证明，将代码添加到表单的构造函数是一个坏主意，并且会导致各种奇怪的行为。相反，应该在 Form Load 事件上为表单添加代码。这是我问题的根源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T23:26:33.107

以下代码对我来说很好：

```
var MainForm = new Form();
var SubForm = new Form {
    StartPosition = FormStartPosition.CenterParent,
    Width = 200,
    Height = 200,
};

MainForm.MouseClick += (sender, args) => { SubForm.ShowDialog(MainForm); };
MainForm.Show(); 
```

当您双击 MainForm 时，它会打开以它为中心的 SubForm。然后当您关闭子窗体并移动主窗体时，再次双击主窗体时，子窗体再次以主窗体居中显示。

# ios - 更改一行 UITextView 的字体大小？

> ID：11588037
> 
> 赞同：1
> 
> 时间：2012-07-20T23:08:10.970
> 
> 标签：ios, xcode, ipad, font-size

是否可以更改 UITextView 中一行的字体大小？

谢谢！

碎纸机

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-06-22T06:23:47.917

UITextView现在可以通过使用属性文本属性**具有不同的字体大小。**

例如：

```
let text = NSMutableAttributedString(string: "This is the bigger text.", attributes: [NSFontAttributeName: UIFont.systemFont(ofSize: 30)])
let smallText = NSMutableAttributedString(string: "This is the smaller text", attributes: [NSFontAttributeName:UIFont.systemFont(ofSize: 15)])
text.append(smallText) 
myTextView.attributedText = text 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T23:10:21.827

没有。A`UITextView`只能包含相同大小、相同字体和相同颜色的文本。

但是，您可以制作多个`UITextView`，并更改其中一个的字体大小。只要您正确放置它们，它最终应该看起来像您想要的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T23:53:10.290

查看[DTCoreText](https://github.com/Cocoanetics/DTCoreText) - 一个允许您使用属性字符串的开源项目。本质上，您可以轻松地将文本视图中的每个字符设置为不同的字体和大小。它也可以采用 html 编码字符串并将其转换为属性字符串。

# objective-c - 选择表格单元格时如何从数据库中传递值

> ID：11588046
> 
> 赞同：0
> 
> 时间：2012-07-20T23:09:15.673
> 
> 标签：objective-c, database, xcode, model-view-controller, mobile-application

我有一个存储在数据库中的 URL，我正在使用导航控制器在表视图中检索它。当我单击表格单元格时，我希望该 URL 值进入我的详细视图控制器并打开一个`uiwebview`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T23:41:45.243

Have you tried adding a paramater the Detail ViewControllers init method? You could try passing it as a param there and storing it as a member. Then in the viewWillLoad function you can use it to set up your UIWebView.

```
@implementation DetailViewController 

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil URL:(NSString*)input
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        //class param to store the url 
        self.urlToUse = input;
    }
    return self;
}

-(void)viewDidLoad
{
     //setup UIWebView with urlToUse
     [super viewDidLoad];
}

//...
@end 
```

# ruby-on-rails - 尝试访问仪表板时出现 Refinerycms 错误

> ID：11588048
> 
> 赞同：1
> 
> 时间：2012-07-20T23:09:40.123
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, refinerycms

我正在尝试访问我的refinerycms 应用程序中的仪表板，但出现以下错误：

```
 NoMethodError in Refinery/admin/dashboard#index

Showing /var/www/vhosts/tomstestsite.us/PersonalTrainingKT/app/views/refinery/admin/dashboard/_recent_activity.html.erb where line #4 raised:

undefined method `edit_group_fitness_classes_admin_group_fitness_clas_path' for #<ActionDispatch::Routing::RoutesProxy:0x0000000f11bfc0>

Extracted source (around line #4):

1: <div id='recent_activity'>
2:   <h2><%= t('.latest_activity') %></h2>
3:   <% if (activity = @recent_activity.collect { |a|
4:           activity_message_for(a)
5:         }.reject(&:blank?)).present? %>
6:     <ul class='clickable'>
7:     <% activity.each do |message| %>

Trace of template inclusion: app/views/refinery/admin/dashboard/_records.html.erb, app/views/refinery/admin/dashboard/index.html.erb

Rails.root: /var/www/vhosts/tomstestsite.us/PersonalTrainingKT
Application Trace | Framework Trace | Full Trace

app/views/refinery/admin/dashboard/_recent_activity.html.erb:4:in `block in _app_views_refinery_admin_dashboard__recent_activity_html_erb__1848110473525801039_122287880'
app/views/refinery/admin/dashboard/_recent_activity.html.erb:3:in `collect'
app/views/refinery/admin/dashboard/_recent_activity.html.erb:3:in `_app_views_refinery_admin_dashboard__recent_activity_html_erb__1848110473525801039_122287880'
app/views/refinery/admin/dashboard/_records.html.erb:1:in `_app_views_refinery_admin_dashboard__records_html_erb__4550726393400955740_116529040'
app/views/refinery/admin/dashboard/index.html.erb:3:in `_app_views_refinery_admin_dashboard_index_html_erb__2977375506195649235_124556040' 
```

团体健身课程是我创建的引擎。

显然，如果我尝试添加/编辑/删除团体健身课程，我也会遇到错误。

这是我在尝试删除团体健身课程时遇到的错误：

```
NoMethodError in Refinery::GroupFitnessClasses::Admin::GroupFitnessClassesController#destroy

undefined method `name' for #<Refinery::GroupFitnessClasses::GroupFitnessClass:0x0000000c8e6ed8>

Rails.root: /var/www/vhosts/tomstestsite.us/PersonalTrainingKT 
```

**更新**

我改变了我的 group_fitness_classes_controller 从

```
module Refinery
  module GroupFitnessClasses
    module Admin
      class GroupFitnessClassesController < ::Refinery::AdminController

        crudify :'refinery/group_fitness_classes/group_fitness_class', :title_attribute => 'name', :xhr_paging => true

      end
    end
  end
end 
```

到

```
module Refinery
  module GroupFitnessClasses
    module Admin
      class GroupFitnessClassesController < ::Refinery::AdminController

        crudify :'refinery/group_fitness_classes/group_fitness_class', :title_attribute => 'title', :xhr_paging => true

      end
    end
  end 
```

end 修复了添加和删除问题。现在仍然是编辑问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T01:13:20.783

这是[我刚刚修复的炼油厂中的一个错误，](https://github.com/resolve/refinerycms/commit/b5d5183ceba0beab3b7407ef70df9f95a7b71362)并将发布 2.0.6 版。在此之前，您可以通过将其放在 Gemfile 中来解决应用程序中的问题：

```
gem 'refinerycms', :git => 'git://github.com/resolve/refinerycms.git', :branch => '2-0-stable' 
```

这将使用 git 版本，直到 gem 发布（尽管这将在今天发生）。

感谢您通过聊天帮助跟踪和修复此错误！

菲尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:10:25.437

看起来你在某个地方有错字。看看你的第一个错误：

```
undefined method `edit_group_fitness_classes_admin_group_fitness_clas_path' 
```

应该

```
edit_group_fitness_classes_admin_group_fitness_class_path 
```

# c++ - 两步到一步初始化和错误处理

> ID：11588050
> 
> 赞同：0
> 
> 时间：2012-07-20T23:09:42.867
> 
> 标签：c++, exception-handling, constructor, initialization

这似乎是一个奇怪的问题。我目前正在将某些对象从两步初始化方案转移到一步初始化方案。基本上将成员函数中所做的事情`.initialize()` `.terminate()`转移到构造函数和析构函数中。

我的问题是，重要的是要知道这些类是否正确初始化了某些取决于外部因素的属性。

一个例子是我的 Window 类，它创建了一个 WinAPI 窗口。以前使用两步法，我会`initialize()`返回一个布尔值，说明窗口是否创建正确。

```
if(myWindow.initialize())
{
    // proceed with application
}
else
{
    // exit
} 
```

无论如何都可以从构造函数传递这些信息，而无需创建和调用第二种方法，例如`didMyWindowInitializeCorrectly()`？

起初我希望类似的东西

```
if(Window *myWindow = new Window)
{
    // proceed with application
}
else
{
    // exit
} 
```

但这不起作用，因为即使窗口创建失败，Window 对象仍将实例化。

让构造函数抛出异常然后捕获它并继续的唯一解决方案是什么？我查看了很多线程，人们对 C++ 异常的看法似乎很分裂，所以我不确定什么是最好的方法。

反正有没有用 if 语句来处理这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T23:27:29.237

这归结为基于异常或错误代码的初始化的大论据。我通常更喜欢使用异常来指示构造函数失败，因为当稍后在代码中未通过 is_valid 检查处理问题或忽略两步返回值时，问题在堆栈跟踪的早期变得更加明显。在不需要错误代码查找的情况下初始化失败的原因也更清楚了。那些更喜欢传统 C 风格而不是 Exception 风格的失败消息传递的人可能会在最后一点上不同意我的观点。

但是，匹配其余代码库的样式通常是个好主意。因此，如果代码中的其他任何地方都没有使用异常，那么最好进行 is_valid 检查（或原始的两阶段初始化），而不是引入对象验证机制。我更喜欢两个阶段的 is_valid ，就像 Riateche 发布的那样，因为它让用户能够选择是否/何时检查它是否有效，而无需他们在合法使用该对象之前查找必须调用哪些函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T16:04:23.383

您可以做的一件事是创建一个静态方法来执行您的两步初始化，即

```
class Window {
  public:
     static Window* createWindow() {
          Window* w = new Window();
          if (w->isValid()) {
            return w;
          }
          delete w;
          return NULL;
     }
  private:
    Window();
    bool isValid();

}; 
```

这样，您将两步初始化封装为单向初始化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T23:14:52.683

在这种情况下使用异常是可以的。通常，构造函数必须始终返回有效对象或抛出异常。

如果您真的反对例外，我建议您使用此表格：

```
Window my_window;
if (!my_window.is_valid()) {
  cout << "fail";
  return;
} 
```

但是单独的`initialize`方法会更好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T23:17:42.387

我当然会使用异常，但如果出于任何原因不想使用，您可以覆盖 new 运算符并在出现错误时返回 NULL。（只是不要忘记释放你的记忆）在返回之前。

```
void* T::operator new(size_t x); 
```

编辑：忘了添加，如果你重载 new 你需要用 malloc 和重载 delete 保留内存。

# css - 如何溢出背景图像关闭屏幕

> ID：11588051
> 
> 赞同：2
> 
> 时间：2012-07-20T23:10:08.173
> 
> 标签：css, image, position, width, overflow

现在我正在编写一个所有内容都位于页面中心的网站。我希望放置一个小平面图标，使其轨迹从屏幕右侧移开。

但是，图像会继续为图像的其余部分创建水平滚动条。

如何将图像放置在图像的剩余部分仅在调整浏览器大小时可见的位置。

见附件代码：

```
.home-planepath {
    position:absolute; 
    left:50%;
    width:100%;
    height:62px;
    z-index: 1;
    margin-top:442px;
    margin-left: -440px;
    overflow: hidden;
    background:url(images/home-planepath.png) no-repeat;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T23:20:24.103

你应该**`overflow:hidden`**在你的容器上设置，即**`.homehover`**而不是**`.home-planepath`**

# jquery - 手风琴上的活动和非活动标题

> ID：11588053
> 
> 赞同：1
> 
> 时间：2012-07-20T23:10:20.663
> 
> 标签：jquery, html

在堆栈溢出的用户的帮助下，我制作了这个手风琴来教自己一些 jQuery：http: [//jsfiddle.net/LQsV5/](http://jsfiddle.net/LQsV5/)

我想知道如何添加该功能以更改选项卡，因此，当关闭标签时，标题的背景图是灰色的，当手风琴打开时，它会像上面的示例中保持一样吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T23:25:57.867

## *[jsFiddle 演示](http://jsfiddle.net/4Emqs/)*

CSS（**创建一个“.selected”类并设置所需的背景**）：

```
#acc h3 {padding-left:5px; padding-top: 2px; font-weight:bold; margin-top:5px; color:#fff; font-size:11px;
    background: #777; /* HERE SET YOUR GRAY IMAGE */
}

#acc h3.selected{
    background:url("http://img.uefa.com/imgml/comp/u19/sprite_4-6-8.png") no-repeat scroll 0pt -50px transparent;
} 
```

`.selected`比用 jQuery切换这个类：

```
$('.acc li h3').next('.acc-section').hide(); // remove that line if you hide them inside your CSS
$('.acc li h3').click(function() {
    var el = $(this).next('.acc-section');
    $('.acc li h3').removeClass('selected');
    check = (el.is(':visible')) ? el.slideUp() : ($('.acc-section').slideUp()) (el.slideDown().prev('h3').addClass('selected'));
}); 
```

请注意我使用的 jQuery 内部：`$('.acc li h3').next('.acc-section').hide();`
如果您不想在整个页面加载之前看到默认打开的滑块并且看到它隐藏，请删除该行并在您的 CSS 中设置：

```
.acc-section{display:hidden;} 
```

# javascript - javascript getelementbyid 表单类型

> ID：11588057
> 
> 赞同：0
> 
> 时间：2012-07-20T23:10:30.200
> 
> 标签：javascript, upload, enctype

我正在尝试使用 javascript 向 div 写入一些标记，但它不接受以下标记

```
<form action="upload.php" method="post"
enctype="multipart/form-data">. 
```

该 enctype 是否存在可能导致问题的内容，或者我是否有错字？

感谢您的任何建议。

提琴手

```
http://jsfiddle.net/smkqW/6/ 
```

不适用于上述文本；如果你把它拿出来就可以了。

javascript

```
<a href="javascript:void(0)" onclick="takePic('1');">Track Progress</a><div id = "puthere"></div> 
```

html

```
function takePic(type){
    alert(type);
    var text = 'hello world<form action="upload.php" method="post"
enctype="multipart/form-data">';
    var target = 'puthere';
   document.getElementById(target).innerHTML = text;
//return false; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T23:15:19.027

javascript 不支持多行字符串，你需要确保你的字符串都在一行

```
 function takePic(type){
       alert(type);
       var text = 'hello world<form action="upload.php" method="post" enctype="multipart/form-data"></form>';
       var target = 'puthere';
       document.getElementById(target).innerHTML = text;
    //return false;     
 } 
```

# c# - 单击链接时 Selenium 出错

> ID：11588063
> 
> 赞同：0
> 
> 时间：2012-07-20T23:11:41.167
> 
> 标签：c#, selenium, nunit

请原谅初学者的问题，但我希望在谷歌搜索一段时间后我能在这里得到一些实际的帮助。

我在 C# Express 2010 中执行以下操作：

```
selenium.Click("link=Specimen Volume Report - Drugs"); 
```

我试图点击的 html 源代码是：

```
<a href="/Admin/Reports/SpecimenVolume.aspx?p=lKpZwTqT4/OMY6523drWvbTjKKs7Nu4Z">Specimen Volume Report - Drugs&nbsp;</a> 
```

我得到的错误是：

```
LogIn.LogIn.Login:
Selenium.SeleniumException : ERROR: Element link=Specimen Volume Report - Drugs not found 
```

我究竟做错了什么？您需要我提供哪些信息来提供帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T00:03:14.867

假设`selenium`是我认为你想要的网络驱动程序：

`selenium.FindElement(By.LinkText("Specimen Volume Report - Drugs&nbsp;")).Click();`

`By.PartialLinkText("Report - Drugs")`如果您喜欢这个想法，您可以使用 too 来缩短字符串。

我建议查看[http://seleniumhq.org/docs/03_webdriver.html](http://seleniumhq.org/docs/03_webdriver.html)上的文档，特别是**Locating UI Elements (WebElements)**以查看查找元素的不同方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T05:29:31.473

You are getting error may be because of space at end of `Specimen Volume Report - Drugs&nbsp;`
You can try to go with different element locator, below i have mentioned one of them,

```
selenium.click("//a[contains(text(),"Specimen Volume Report")]") 
```

# powershell - 将带有管道的参数传递到powershell脚本中-如何转义管道？

> ID：11588068
> 
> 赞同：2
> 
> 时间：2012-07-20T23:12:18.807
> 
> 标签：powershell

在 powershell 中转义字符只是愚蠢的。我已经尝试了所有我能找到的方法来尝试在我传递给 powershell 脚本的参数中转义这个管道，但我绝对无法转义它。真是疯了。我确保在单引号中传递参数，并尝试了所有的 powershell/windows 转义字符（`,``,\,\,^,^^）。任何帮助是极大的赞赏。

测试脚本示例：

```
$cmd = $Args[0] #set first parameter received to $cmd to run with Invoke-Expression (must wrap param in single quotes if it contains spaces)  
write-host $cmd 
```

使用包含命令的管道调用测试脚本：

```
C:\Windows\System32\cmd.exe /c powershell -executionPolicy Unrestricted -InputFormat none "D:\test_powershell\app\test_wrapper.ps1" 'test1 | test2' 
```

结果：

```
'test2'' is not recognized as an internal or external command,
operable program or batch file. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T23:53:00.927

几点注意事项：

1.  你不需要`cmd`。只需直接调用 PowerShell。
2.  `-InputFormat`可以是文本或 XML。`None`此处不是有效值。
3.  使用以下内容（如果出现转义问题，帮助中也会提到）：

    ```
    powershell "&{ &'D:\test_powershell\app\test_wrapper.ps1' 'test 1 | test2' }" 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T15:42:25.543

从 cmd 管道的转义字符将是克拉 ^

# android - 没有 Google API 构建目标的 Google 地图？

> ID：11588071
> 
> 赞同：1
> 
> 时间：2012-07-20T23:12:31.870
> 
> 标签：android, google-maps

我正在开发一个我想使用 Google 地图的 Android 应用程序。据我所知，除非我将 Google API 设置为构建目标，否则我无法实现 Maps。但是，当我这样做时，Eclipse 会删除我的 R.java 文件，并且不会在清理后重新生成它。有没有办法解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T00:41:09.460

> 据我所知，除非我将 Google API 设置为构建目标，否则我无法实现 Maps。

正确的。

> 但是，当我这样做时，Eclipse 会删除我的 R.java 文件，并且不会在清理后重新生成它。有没有办法解决？

修复资源和清单中阻止`R.java`生成的问题。你可以：

*   在 Package Explorer 中查找红色 X
*   查看问题视图
*   做一个命令行构建

试图追踪这些。

# python - 处理由单击按钮触发的文件下载

> ID：11588072
> 
> 赞同：0
> 
> 时间：2012-07-20T23:13:24.567
> 
> 标签：python, python-2.7, download, mechanize

我想以编程方式下载我没有的 url 文件。在常规浏览器上，单击按钮后，浏览器通常会询问您是否要保存、打开或取消。但是，使用 mechanize 通过 python 进行浏览、填充文本字段和按下按钮。使用机械化单击按钮后，如何将此文件保存到计算机中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T23:23:32.913

看起来您可以`retrieve`用来打开按钮指向的网址。

```
Downloading a file:

# Download
f = br.retrieve('http://www.google.com.br/intl/pt-BR_br/images/logo.gif')[0]
print f
fh = open(f)

fh.read() # < this will give you the content 
```

您可以打开要保存到计算机的文件

```
 with open('/path/to/save', 'w') as f:
    f.write(fh.read()) 
```

[http://stockrt.github.com/p/emulating-a-browser-in-python-with-mechanize/](http://stockrt.github.com/p/emulating-a-browser-in-python-with-mechanize/)

# objective-c - 如何通过来自同一个 TableViewController 的多个 segue 到同一个 ViewController

> ID：11588073
> 
> 赞同：2
> 
> 时间：2012-07-20T23:13:40.527
> 
> 标签：objective-c, delegates, viewcontroller, segue

我有一个静态 TableViewController，它有两个静态单元格：一个出发机场和一个到达机场。两者都连接到另一个 TableViewController，它允许用户选择一个机场，并将原始 TVC 定义为传递对象的委托。我不知道如何确定选择机场时正在设置的属性；选择通过代表传回时的出发或到达机场。我已经开始实现的是 AirportListTVC 上的一个属性，它通过 prepareForSegue 方法设置，然后在进行选择时传递回委托。有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T00:23:21.300

将信息传递给新的 UIViewController 通常很棘手 - 并且使用 Interface Builder 中的自动 segues 并不能真正让您轻松传递信息。基本上我会建议两种方法（听起来你正在使用一种）：

1) 使用 Interface Builder segues 并使用 prepareForSegue 将您拥有的任何信息传递给新的 UIViewController。

2）在Interface Builder（标识符）中命名UIViewController，然后使用`instantiateViewControllerWithIdentifier`如下方式自己呈现它 - 在这种情况下使用导航控制器来呈现：

```
UIStoryboard *storyboard = [viewController storyboard];
MyViewController *vc = [storyboard instantiateViewControllerWithIdentifier:@"MyVC"];
[vc configureWithMyData:myData];
[navigationController pushViewController:vc animated:YES]; 
```

这是一个选择适合你的案例。显然，您也可以完全用代码创建控制器。

这里有一些事情需要考虑 - 例如这两种方法会导致新的 UIViewController 在不同的点实际初始化/viewDidLoad（如果有帮助，我可以对此进行扩展）。

# c# - 如何在没有 NUNIT 的情况下让这个 selenium 应用程序工作？

> ID：11588076
> 
> 赞同：0
> 
> 时间：2012-07-20T23:14:17.280
> 
> 标签：c#, selenium, nunit

我希望能够在不使用 NUNIT 的情况下运行这个应用程序，特别是因为我需要每小时运行一次。我是 NUNIT 和 selenium 的初学者，想知道如何将其转换为控制台应用程序，而不必通过 NUNIT 运行它？

代码如下。非常感谢你的帮助。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using NUnit.Framework;
using Selenium;
using System.Threading;
using System.Data;
using System.IO;

namespace LogIn
{
    [TestFixture]
    public class LogIn
    {
       public static ISelenium selenium;
       private StringBuilder verificationErrors;

        [SetUp]
        public void SetupTest()
        {
            selenium = new DefaultSelenium("localhost", 4444, "*iexplore", "https://.............aspx");
            selenium.Start();
            selenium.SetSpeed("900");
            selenium.WindowMaximize();
            selenium.WindowFocus();
            verificationErrors = new StringBuilder();
        }

        [Test]
        public void Login()
        {

            selenium.SetSpeed("900");
            selenium.Open("/Login.aspx");

            Assert.AreEqual("stuff", selenium.GetTitle());

            selenium.Type("id=ctl00_cphBody_objLogin_UserName", "username");

            selenium.Type("id=ctl00_cphBody_objLogin_Password", "Pass");

            selenium.Click("id=ctl00_cphBody_objLogin_LoginImageButton");

            selenium.WaitForPageToLoad("30000");

            Assert.AreEqual("labs", selenium.GetTitle());

            //i dont understand why do we need this?
            /*
            try
            {
                Assert.AreEqual("Orders - Drug Testing ", selenium.GetText("link=Orders - Drug Testing "));

            }
            catch (AssertionException e)
            {
                Console.WriteLine(e.Message + " " + DateTime.Now);
            }
            */

            Console.WriteLine("Congrats, you are logined successfully. " + DateTime.Now);

            selenium.Click("link=Specimen Volume Report - Drugs");
            selenium.WaitForPageToLoad("30000");
            selenium.Click("id=ctl00_cphBody_dtpFrom");
            selenium.Type("id=ctl00_cphBody_dtpFrom", DateTime.Now.ToString("MM/dd/yyyy"));
            selenium.Type("id=ctl00_cphBody_dtpTo", DateTime.Now.ToString("MM/dd/yyyy"));
            selenium.Click("id=ctl00_cphBody_btnExport");
            selenium.SetSpeed("6000");
            Console.WriteLine("Waiting for result complete");
            selenium.IsTextPresent("Specimen Volume Report");
            selenium.IsTextPresent("Display Specimen Detail");

        }

        [TearDown]
        public void FullTearDown()
        {
            selenium.Stop();
        }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:44:40.807

为什么不简单地让您的控制台应用程序（或计划任务或其他）简单地通过命令行执行 NUnit 测试？（即，调用 nunit-console 将您的硒测试作为参数传递..）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-21T13:43:22.677

这适用于我使用 selenium webdriver 而不是 selenium rc：

```
using OpenQA.Selenium;
using OpenQA.Selenium.IE;
using OpenQA.Selenium.Support.UI;

public static IWebDriver WebDriver;
void Main()
{
    var url = "...";
    var capabilitiesInternet = new OpenQA.Selenium.Remote.DesiredCapabilities();
    capabilitiesInternet.SetCapability("ignoreProtectedModeSettings", true);
    IWebDriver driver = new InternetExplorerDriver(Path.GetDirectoryName (Util.CurrentQueryPath));

    // Navigate to url
    driver.Navigate().GoToUrl(url);

    // Login
    driver.FindElement(By.Name("login")).SendKeys("...");
    driver.FindElement(By.Name("password")).SendKeys("...");
    driver.FindElement(By.ClassName("button")).Click(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-06T22:53:31.693

制作一个新的控制台应用程序。导入 selenium 驱动程序（nuget pkg 应将 appium 作为先决条件加载）。开始编写没有 [Test] 横幅的静态空洞。运行它们并处理您的异常，记录错误。

实际上，我发现 NUnit 与其说是一种帮助，不如说是一种障碍，无论我是否使用它，我在运行长期功能/压力测试时都遇到了问题。

Calabash，appium，除了好的旧 ADB 之外的任何东西都非常容易出现内存泄漏，我怀疑它只是为更快的单元测试而设计的。

UItest 云甚至设置了限制，每台设备 6 小时，每次测试 30 分钟，每个葫芦步骤 10 分钟。在我看来，他们设定的标准低得离谱，并鼓励在内部进行压力测试

# java - 使用 TCP 连接获取字节数组

> ID：11588078
> 
> 赞同：4
> 
> 时间：2012-07-20T23:14:28.060
> 
> 标签：java, tcp, udp, datainputstream

我曾经`UDP`用来发送/接收数据，但我现在想切换到`TCP`以避免数据包丢失。

我已经阅读了几个教程，`TCP`并注意到不是使用 DatagramPacket，而是`UDP`使用`TCP`InputStream/OutputStream。

我们如何从 DataInputStream 中获取 byte[]，类似于以下内容：

```
byte[] receiveData = new byte[64000];
DatagramPacket receivePacket = new DatagramPacket(receiveData,receiveData.length); 
receiveData=receivePacket.getData(); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-21T00:02:08.347

为了通过套接字（流）实现基于消息的协议，您基本上想提出一些消息格式，然后在连接的任一端读/写。一种非常简单的格式是将消息的长度写为 4 字节 int，然后发送消息字节（然后刷新流）。在接收端，读取一个 4 字节的 int，然后*准确读取后面那么多字节*（注意限制读取方法调用，否则可能会意外读取下一条消息的一部分）。

```
public void writeMessage(DataOutputStream dout, byte[] msg, int msgLen) {
  dout.writeInt(msgLen);
  dout.write(msg, 0, msgLen);
  dout.flush();
}

public byte[] readMessage(DataInputStream din) {
  int msgLen = din.readInt();
  byte[] msg = new byte[msgLen];
  din.readFully(msg);
  return msg;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-21T00:02:57.200

答案有 2 个部分。处理与您的问题相关的 2 个独立问题。

**1** . 网络事实

TCP本质上是基于流的。即先发送字节[1000]，然后发送字节[1200]，与发送字节[2200] 一次没有区别。实际通过网络发送的很可能是 2 个数据包，第一个是 1400 字节的数据包，第二个是 800，或 1401 和 799，并且每次都可能不同。接收方无法知道发送方实际上先发送了 1000 个字节，然后发送了 1200 个字节。这是网络设计的。Java 与这个事实无关。你不能用它做任何事情。

**2** . Java 实现

在发送方。首先，您需要`OutputStream os = tcpsocket.getOutputStream();`. 然后，每次，您都需要`os.write(byteArray)`. 在接收方，您需要`InputStream is = tcpsocket.getInputStream();`. 然后，每次，您都需要`is.read(byteArray)`. 请注意，在接收方，`byteArray`将返回实际填充的数量。它可以是介于 1 和 的容量之间的任何数字`byteArray`，并且与发送者实际发送它的方式无关。

为了减轻任务，您可以`DataInputStream is = new DataInputStream(tcpsocket.getInputStream());`在开始时使用，并在`is.readFully(byteArray)`每次需要阅读时使用。这样，就可以保证`byteArray`永远被填满。

But you can never know how many bytes you should receive if the actual length is variable unless you add some extra information. For example, send the length first, using 4 bytes. How you will actually do this is usually closely related to your actual use case. And it's up to you

# java - 在 java 中使用属性文件作为 UI 映射：

> ID：11588083
> 
> 赞同：4
> 
> 时间：2012-07-20T23:14:58.923
> 
> 标签：java, user-interface, properties, selenium, map

因此，我正在阅读 selenium 测试设计注意事项文档，并且我对此处的 UI 映射部分有疑问：http: [//seleniumhq.org/docs/06_test_design_considerations.html#ui-mapping](http://seleniumhq.org/docs/06_test_design_considerations.html#ui-mapping)

他们建议像这样创建一个属性文件：

```
admin.username = loginForm:tbUsername
admin.loginbutton = loginForm:btnLogin
admin.events.createnewevent = adminHomeForm:_activitynew
admin.events.cancel = addEditEventForm:_IDcancel
admin.events.viewoldevents = adminHomeForm:_activityold 
```

将 html 对象映射到关键字

然后他们会像这样使用它：

```
selenium.type(admin.username, "xxxxxxxx"); 
```

但是，根据我对属性对象的了解，它的工作方式与哈希表非常相似。现在我正在加载我的属性文件，如下所示：http: [//docs.oracle.com/javase/tutorial/essential/environment/properties.html](http://docs.oracle.com/javase/tutorial/essential/environment/properties.html) 在创建和加载默认属性部分下

所以在我需要做的文档中做同样的声明：

```
selenium.type(loadedProps.get(admin.username), "xxxxxxx"); 
```

这还不错，只是不像他们的例子那样可读，所以我的问题是如何加载属性文件，以便我可以像他们一样使用关键字。另外，我正在考虑使用页面对象设计模式，所以如果我这样做了，我会定义一个 PageObject Base 类，它加载属性文件，然后扩展基础的所有页面对象类都可以访问属性，这是合理的推理吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T00:23:07.907

在*java*中，因为 '.' 作为运营商具有意义，你不能让它看起来完全像他们的例子（不确定他们在做什么）。您可以执行以下操作：

设置代码：

```
public class Config {
  public static String admin_username;

  static {
    Properties props = ...;
    admin_username = props.getProperty("admin.username");
  }
} 
```

使用代码：

```
import static Config.*;

selenium.type(admin_username, "xxxxxxxx"); 
```

如果你真的疯了，你可以使用反射加载 Config 类（删除“静态”块中的样板）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T08:13:09.200

就个人而言，我不认为这是一个好的做法，但如果你想使用它，嘿，这是你的电话。

```
public class AdminUiMap {
    public String username;

    public UiMap(String fileName) {
        Properties props = new Properties();
        props.load(new FileInputStream(fileName));

        this.username = props.getProperty("admin.username");
    }
} 
```

然后，在你的测试设置中，你可以做

```
AdminUiMap admin = new AdminUiMap("adminLocators.properties"); 
```

然后你真的会写

```
selenium.type(admin.username, "xxxxxxxx"); 
```

* * *

第二个选项：请参阅[此文档](http://svn.openqa.org/fisheye/browse/~raw,r=trunk/selenium/trunk/src/main/resources/core/scripts/ui-doc.html)。这是一本非常简单的手册，我只指出专门针对 Selenium RC 的单个段落：

> 对于 Selenium RC，您有两种选择。映射文件可能包含在开关`user-extensions.js`启动时指定的文件中 。或者，您可以在浏览器启动之前使用驱动程序语言`-userExtensions`中的命令变体动态加载它。`setUserExtensionJs`

# c++ - 在构造函数中，没有匹配的函数调用

> ID：11588085
> 
> 赞同：0
> 
> 时间：2012-07-20T23:15:19.563
> 
> 标签：c++

我的错误

```
gridlist.h: In constructor ‘GridList::GridList(WINDOW*, int, int, int, int, int)’:
gridlist.h:11:47: error: no matching function for call to ‘Window::Window()’
gridlist.h:11:47: note: candidates are:
window.h:13:3: note: Window::Window(WINDOW*, int, int, int, int, int) 
```

我的代码

```
GridList(WINDOW *parent = stdscr, int colors = MAG_WHITE, int height = GRIDLIST_HEIGHT, int width = GRIDLIST_WIDTH, int y = 0, int x = 0) 
: Window(parent, colors, height, width, y, x) {
    this->m_buttonCount = -1;
    m_maxButtonsPerRow = ((GRIDLIST_WIDTH)/(BUTTON_WIDTH+BUTTON_SPACE_BETWEEN));
    this->m_buttons = new Button *[50];
    refresh();
} 
```

我有点不确定它到底想告诉我什么以及我做错了什么。我将正确的变量类型和正确数量的参数传递给类。但是它说我正在尝试`Window::Window()`不带参数调用。提前感谢您的帮助。

Button 类编译得很好，几乎完全一样。

```
Button(WINDOW *parent = 0, int colors = STD_SCR, int height = BUTTON_WIDTH, int width = BUTTON_HEIGHT, int y = 0, int x = 0) 
: Window(parent, colors, height, width, y, x) {
            this->refresh();
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T00:13:14.147

你的`GridList`类有一个 type 的成员变量`Window`。由于所有成员（如果未指定，则默认）在构造函数的主体**之前**初始化，因此您的在现实中看起来与此类似：

```
GridList::GridList (...)
 : Window(...), m_tendMenu() //<--here's the problem you can't see 
```

您的成员变量正在默认初始化，但您的`Window`类没有默认构造函数，因此存在问题。要修复它，请在成员初始化程序中初始化成员变量：

```
GridList::GridList (...)
 : Window(...), m_tendMenu(more ...), //other members would be good here, too 
```

你的`Button`类工作的原因是因为它没有 type 的成员`Window`，因此，当它不能被默认初始化时，没有任何东西被默认初始化。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-20T23:26:41.610

你为什么只是在初始化列表中调用构造函数？通常你在那里初始化成员变量，所以那里会有 window 类型的成员变量。

```
GridList(WINDOW *parent = stdscr, int colors = MAG_WHITE, 
  int height = GRIDLIST_HEIGHT, int width = GRIDLIST_WIDTH, int y = 0, int x = 0)
  : m_window(parent, colors, height, width, y, x) { } 
```

# game-engine - Cocos2d-x 是商业品质吗？

> ID：11588086
> 
> 赞同：11
> 
> 时间：2012-07-20T23:15:26.550
> 
> 标签：game-engine, libgdx, cocos2d-x

> **可能重复：**
> [Cocos2D OR libgdx for Android Game Development](https://stackoverflow.com/questions/8552176/cocos2d-or-libgdx-for-android-game-developement)

我有兴趣使用 cocos2d-x 进行 Android 和 iOS 开发，但不确定它是否已准备好迎接黄金时段？cocos2d-x 与 android 上的 libgdx 相比如何？似乎他们可以在文档上花费更多时间，而且功能更新现在很慢。另一方面，LibGDX 似乎有问题……我认为 Cocos2d-x 在 iOS 和 Android 上运行更理想化。一个主要的C++。

使用 Cocos2d-x 开发的应用在哪里？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-21T00:22:02.553

我不太同意您关于“功能更新现在很慢”的说法。cocos2d-x 项目正在发展，他们在不到一个月前发布了 2.0.1 版本。他们还瞄准新平台（win8、win phone）和新技术（如 Javascript）。

我同意文档不是很好，但是大多数 cocos2d 文档对 cocos2d-x 很有用，因为它们的目标是与它的功能对等。另外，让我向您推荐一个教程，该教程很好地解释了如何在 iOS 和 Android 上设置 cocos2d-x：

[http://www.raywenderlich.com/11283/cocos2d-x-for-ios-and-android-getting-started](http://www.raywenderlich.com/11283/cocos2d-x-for-ios-and-android-getting-started)（第 1 部分）

[http://www.raywenderlich.com/11338/cocos2d-x-for-ios-and-android-space-game](http://www.raywenderlich.com/11338/cocos2d-x-for-ios-and-android-space-game)（第 2 部分）

还有一本免费的在线 Cocos2d-X 书籍正在编写中：

[http://wizardfu.com/book/cocos2d-x/](http://wizardfu.com/book/cocos2d-x/)

# lua - Lua 比较运算符（通配符？）

> ID：11588090
> 
> 赞同：3
> 
> 时间：2012-07-20T23:16:43.583
> 
> 标签：lua, operators

我是 Lua 的新手，所以我现在正在学习操作符部分。Lua 中是否有与字符串一起使用的通配符？

我来自 PHP 背景，我基本上是在尝试编写以下代码：

```
--scan the directory's files
for file in lfs.dir(doc_path) do

     --> look for any files ending with .jpg
     if file is like ".jpg" then
       --do something if any files ending with .JPG are scanned
     end

end 
```

您会看到我正在寻找 JPG 文件，而我正在循环浏览目录中的文件。我习惯于使用百分号或星号字符来搜索字符串。但也许 Lua 有不同的方式？

另外，我完全猜到了这样的说法：“如果文件像.......”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T23:58:35.200

您需要该函数[`string.match()`](http://www.lua.org/manual/5.1/manual.html#pdf-string.match)，它测试字符串是否与[模式](http://www.lua.org/manual/5.1/manual.html#5.4.1)匹配。

这是我对您的示例的重写（未经测试）：

```
--scan the directory's files
for file in lfs.dir(doc_path) do

     --> look for any files ending with .jpg
     if file:match "%.jpg$" then
       --do something if any files ending with .JPG are scanned
     end

end 
```

表示法使用方法调用语法糖`file:match "%.jpg%"`调用函数，这是因为所有字符串值都默认设置为它们的元表。为表达简单起见，我还删除了唯一参数周围的括号。`string.match``string`

该模式由末尾的 锚定到字符串`$`的末尾，并`.`通过用 引用它来测试文字`%`。但是，由于模式区分大小写，因此仅匹配扩展名全部为小写的文件。

为了使其不区分大小写，最简单的答案是在测试之前通过编写折叠文件名的大小写`file:lower:match"%.jpg$"`，这将调用链接到调用`string.lower()`之前`match`。或者，您可以重写模式`"%.[Jj][Pp][Gg]$"`以在任何一种情况下显式匹配每个字符。

# arduino - 如何以不同的速率更新传感器值

> ID：11588096
> 
> 赞同：2
> 
> 时间：2012-07-20T23:18:23.023
> 
> 标签：arduino

我正在开发一个从不同传感器读取数据的 arduino 项目。我取值并将它们存储在一个数组中。问题是我想以不同的速率更新传感器值。例如，我不想每 250 毫秒更新一次，而是每 50 毫秒更新一次。但我希望它在传感器更新之间运行的循环。我能想到让它工作的唯一方法是延迟，但这会停止循环。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:08:57.343

您可以使用为每个要读取的传感器设置间隔的 millis() 函数。查看 Arduino 网站上的 Blink without Delay 示例

[http://arduino.cc/en/Tutorial/BlinkWithoutDelay](http://arduino.cc/en/Tutorial/BlinkWithoutDelay)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T17:38:33.260

如果您有一堆传感器要检查，您可以使用[Metro 库](http://arduino.cc/playground/Code/Metro)节省一些编码。与 BRM 的答案相同的一般概念。您也可以使用定时器中断。有关定时器中断文章的链接的信息，请参阅我的[立即移动，不要延迟（）](http://www.mcgurrin.com/robots/?p=28)博客文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-26T19:42:57.833

如果您不想使用库，则可以这样实现：

```
typedef void (*command)();

template <unsigned long wait_ms, command c>
void repeat() {
    static unsigned long start = millis();
    if (millis()-start >= wait_ms) {
        start += wait_ms;
        c();
    }
}

void task1() {
    // every 50ms
}

void task2() {
    // every 250ms
}

void setup() {
}

void loop() {
    repeat< 50, task1>();
    repeat<250, task2>();  
} 
```

只要循环内没有任何“阻塞”，这将起作用。

# mysql - Perl MySQL 查询访问超出数组的范围

> ID：11588097
> 
> 赞同：2
> 
> 时间：2012-07-20T23:18:53.143
> 
> 标签：mysql, perl

我有以下过程，用于同步两个 MySQL 表：

```
sub sync{
    my %tables = (
        'sitematrix_test' => 'sitematrix_sites'
    );

    while(($key, $value) = each(%tables)){
        print "Matching columns $key : $value\n";

        my @data;
        my $query = $db->prepare("
            SELECT $key.* FROM $key LEFT JOIN $value ON 
            $key.site_id = $value.site_id WHERE $value.site_id IS NULL;
        ") 
            or die "Couldn't prepare statement: " . $db->errstr;

        $query->execute() 
            or die "Couldn't execute statement: " . $query->errstr;

        if($query->rows == 0){
            print "No updates have been made for $key : $value";
        }
        else{
            #read the matching records and print them out
            while(@data = $query->fetchrow_array()){
                print "@data\n";
            }
        }

        $query->finish;
    }

    $db->disconnect;    
} 
```

它给出了以下错误：

```
Use of uninitialized value $data[3] in join or string at C:/Users/souzamor/workspace/Parser/synchronizer.pl line 69.
Use of uninitialized value $data[4] in join or string at C:/Users/souzamor/workspace/Parser/synchronizer.pl line 69.
Use of uninitialized value $data[5] in join or string at C:/Users/souzamor/workspace/Parser/synchronizer.pl line 69.
Use of uninitialized value $data[6] in join or string at C:/Users/souzamor/workspace/Parser/synchronizer.pl line 69. 
```

有人可以解释为什么它超出了数组的范围吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T23:36:57.950

您的数据中有`NULL`s 来自数据库；`undef`这些在 Perl 中被转换。警告来自这一行：

```
print "@data\n"; 
```

在哪里对数组进行字符串化。例子：

```
perl -Mwarnings -e '@foo=(1, 2, undef, 3); print "@foo\n"'
Use of uninitialized value $foo[2] in join or string at -e line 1.
1 2  3 
```

如果您真的想对整个数组进行字符串化并每次打印它，一个简单的解决方法是将`undef`s 转换为空字符串：

```
while( my @data = map { defined($_) ? $_ : '' } $query->fetchrow_array() ) { 
```

或者，如果您不需要打印每一行的*所有*数据，只需打印一个主键或您知道不会是`NULL`.

# php - 强制 PHP 循环每行显示 8 列

> ID：11588100
> 
> 赞同：-1
> 
> 时间：2012-07-20T23:19:02.520
> 
> 标签：php, html, css

我有一个 PHP 数组，它在表格的每行中生成四列。我需要修改我的 php，所以我每行有八列而不是四列。

例如。当前输出如下所示：

```
COL 1 COL 2 COL 3 COL 4
COL 5 COL 6 COL 7 COL 8
COL 9 COL 10 COL 11 COL 12
COL 13 COL 14 COL 15 COL 16 
```

但我需要它看起来像这样：

```
COL 1 COL 2 COL 3 COL 4      COL 5 COL 6 COL 7 COL 8
COL 9 COL 10 COL 11 COL 12   COL 13 COL 14 COL 15 COL 16 
```

在上一个问题上，我问我是否可以通过 CSS/HTML 做到这一点。强烈建议我修改我的 PHP 代码。我收到了执行此操作的伪代码，但我无法让它工作。逻辑如下：

```
if($counter % 2 == 0)
    output startting <tr> tag

output the four <td> tags with data

if(($counter +1) % 2 == 0)
    output closing <tr> tag 
```

这是我当前的代码：

```
 <form>
            <table>
                <?php $counter = 0;
                while ($counter < 20) : 
                $item = $set[$counter]
                                    if($counter % 2 == 0) ?>
                    <tr class="q<?php echo $counter; ?>">                   
                        <td><a class="question" href="<?php echo $item['qurl'] ?>');"><?php echo $item['q'] ?></a></td>
                        <td><input class="a1" type="text" name="a1" maxlength="3" size="3" /></td>
                        <td><input class="a2" type="text" name="a2" maxlength="3" size="3" /></td>
                        <td><input class="submit submit-<?php echo $counter; ?>" type="submit" value="Submit" /></td>
                                    <?php if(($counter +1) % 2 == 0) ?>
                    </tr>
                <?php $counter++; ?>
                <?php endwhile; ?>
            </table>
                            </form> 
```

我是初学者，所以请原谅我的新手尝试。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T23:31:43.823

您应该真正检查一下[PHP if 语句的语法](http://www.php.net/manual/en/control-structures.alternative-syntax.php)。

```
$counter = 0;
while ($counter < count($set)) : 
    $item = $set[$counter];
    if($counter % 2 == 0): ?>
        <tr class="q<?php echo $counter; ?>">                   
    <?php endif;?>
            <td><a class="question" href="javascript:soundManager.play('<?php echo $item['qurl'] ?>','audio/part2/type1/type1_<?php echo $item['qurl'] ?>.mp3');"><?php echo $item['q'] ?></a></td>
            <td><input class="a1" type="text" name="a1" maxlength="3" size="3" /></td>
            <td><input class="a2" type="text" name="a2" maxlength="3" size="3" /></td>
            <td><input class="submit submit-<?php echo $counter; ?>" type="submit" value="Submit" /></td>
    <?php if(($counter +1) % 2 == 0): ?>
        </tr>
    <?php endif;?>
    <?php $counter++; ?>
<?php endwhile; ?>
<?php if(($counter +1) % 2 == 0): ?>
    </tr>
<?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T20:25:56.873

您可以使用 with`array_chunk()`将数组拆分为小数组并打印此..

```
<table>
<?php foreach (array_chunk($set, 2) as $row_set): ?>
  <tr>
  <?php foreach ($row_set as $item_set): ?>
    <td><?php echo $item_set['qurl']; ?></td>
    <td><?php echo $item_set['q']; ?></td>
  <?php endforeach; ?>
  </tr>
<?php endforeach;?>
</table> 
```

祝你好运 ：）

# android - Android XML 布局问题

> ID：11588101
> 
> 赞同：0
> 
> 时间：2012-07-20T23:19:02.740
> 
> 标签：android

为什么我的布局（如下所示）包含`EditText`and `Button`，但未显示？`MapView`占据了整个视野。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:a="http://schemas.android.com/apk/res/android"
    a:layout_width="fill_parent"
    a:layout_height="fill_parent" >

<LinearLayout
    a:layout_width="fill_parent"
    a:layout_height="wrap_content"
    a:orientation="vertical" >

    <LinearLayout
        a:layout_width="fill_parent"
        a:layout_height="wrap_content"
        a:orientation="vertical" >

        <RelativeLayout
            a:layout_width="fill_parent"
            a:layout_height="40dip"
            a:background="#50ffffff"
            a:orientation="horizontal"
            a:paddingBottom="0dip"
            a:paddingLeft="5dip"
            a:paddingRight="5dip"
            a:paddingTop="5dip" >

            <Button
                a:id="@+id/smsCancelButton"
                a:layout_width="70dip"
                a:layout_height="40dip"
                a:layout_alignParentRight="true"
                a:layout_weight="1.0"
                a:enabled="false"
                a:text="@string/sms_cancel_abbr" />
        </RelativeLayout>

        <com.google.android.maps.MapView
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/mapview"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:apiKey="not shown"
            android:clickable="true" />
    </LinearLayout>

    <SeekBar
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/seekBar1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView1"
        android:layout_marginTop="26dp"
        a:paddingLeft="10dip"
        a:paddingRight="10dip"
        a:paddingTop="30dip"
        android:max="100" >
    </SeekBar>
</LinearLayout>
<!-- #dcdcdc -->

<LinearLayout
    a:layout_width="fill_parent"
    a:layout_height="wrap_content"
    a:layout_alignParentBottom="true"
    a:background="#dcdcdc"
    a:orientation="horizontal"
    a:paddingBottom="5dip"
    a:paddingLeft="5dip"
    a:paddingRight="5dip"
    a:paddingTop="5dip" >

    <EditText
        a:id="@+id/smsBody"
        a:layout_width="0dip"
        a:layout_height="wrap_content"
        a:layout_weight="1.0"
        a:autoText="true"
        a:capitalize="sentences"
        a:hint="@string/sms_enter_message"
        a:imeOptions="actionSend|flagNoEnterAction"
        a:inputType="textShortMessage|textAutoCorrect|textCapSentences|textMultiLine"
        a:maxLines="10"
        a:nextFocusRight="@+id/send_button" />

    <LinearLayout
        a:layout_width="wrap_content"
        a:layout_height="wrap_content"
        a:orientation="vertical" >

        <Button
            a:id="@+id/smsSendButton"
            a:layout_width="wrap_content"
            a:layout_height="wrap_content"
            a:layout_marginLeft="5dip"
            a:layout_weight="1.0"
            a:enabled="false"
            a:nextFocusLeft="@+id/smsBody"
            a:text="@string/sms_send_abbr" />
    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T00:09:11.070

您的最顶层`LinearLayout`没有明确设置方向。 如果您不指定方向，则`LinearLayout`默认为方向。`horizontal`因此，包含地图的第一个窗格（其宽度设置为`fill_parent`）填满了整个屏幕，而包含 和 的第二个窗格`EditText`在`Button`屏幕的右侧被截断。

您需要注意，将任何子元素设置在`LinearLayout`to 中`match_parent`会占用所有剩余空间，因此任何跟随的子元素都不会显示。例如，假设您有一个垂直的 LL 和四个孩子：`a`、`b`、`c`和`d`。高度`a`设置为`wrap_content`，并且可能只有 10 或 20dp 高。 `b`将高度设置为`fill_parent`，`c`并且`d`两者都将高度设置为`wrap_content`。在此示例中，`b`将填满未被 a 占用的整个屏幕，`c`并且`d`永远不会显示。这是一个令人沮丧的限制`LinearLayout`，您可以部分但不是完全地使用权重解决方法。

# mysql - 为什么我使用 Ant 创建 mysql 数据库时出错？

> ID：11588105
> 
> 赞同：1
> 
> 时间：2012-07-20T23:19:58.970
> 
> 标签：mysql, jdbc, ant, installation

**机器和背景：** OSX 10.5.8 32 位。MySQL 密码为 "" 即为空

**目标：**我正在尝试使用 Java 数据库连接器 (JDBC) 教程。我目前正处于[这一步](http://docs.oracle.com/javase/tutorial/jdbc/basics/gettingstarted.html#step10)。

**错误：**使用我拥有 JDBC 教程的目录中的 shell，我进入`sudo ant create-mysql-database`并收到以下错误：

> 构建文件：/Users/adam/Desktop/JDBCTutorial/build.xml
> 
> 创建-mysql-数据库：
> 
> 构建失败/Users/adam/Desktop/JDBCTutorial/build.xml:73：java.sql.SQLException：com.mysql.jdbc.SQLError.createSQLException 的用户'root'@'localhost'（使用密码：YES）的访问被拒绝(SQLError.java:1074) 在 com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4074) 在 com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4006) 在 com.mysql.jdbc.MysqlIO。 checkErrorPacket(MysqlIO.java:919) at com.mysql.jdbc.MysqlIO.proceedHandshakeWithPluggableAuthentication(MysqlIO.java:1694) at com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1244) at com.mysql.jdbc.ConnectionImpl .coreConnect(ConnectionImpl.java:2397) 在 com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2430) 在 com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2215) 在 com.mysql.jdbc。 ConnectionImpl.(ConnectionImpl.java:813) 在 com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:395) 在 com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:334) 在 org.apache.tools.ant.taskdefs.JDBCTask.getConnection (JDBCTask.java:370) 在 org.apache.tools.ant.taskdefs.SQLExec.getConnection(SQLExec.java:942) 在 org.apache.tools.ant.taskdefs.SQLExec.execute(SQLExec.java:614) 在org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291) 在 sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang。 reflect.Method.invoke(Method.java:592) 在 org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106) 在 org.apache.tools.ant.Task.perform(Task.java: 348) 在 org.apache.tools.ant.Target.execute(Target.java:390) 在 org.apache.tools.ant.Target.performTasks(Target.java:411) 在 org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399) 在 org.apache.tools.ant.Project.executeTarget(Project. java:1368) 在 org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41) 在 org.apache.tools.ant.Project.executeTargets(Project.java:1251) 在 org.apache.tools .ant.Main.runBuild(Main.java:809) at org.apache.tools.ant.Main.startAnt(Main.java:217) at org.apache.tools.ant.launch.Launcher.run(Launcher.java :280) 在 org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)executeTargets(DefaultExecutor.java:41) at org.apache.tools.ant.Project.executeTargets(Project.java:1251) at org.apache.tools.ant.Main.runBuild(Main.java:809) at org.apache .tools.ant.Main.startAnt(Main.java:217) 在 org.apache.tools.ant.launch.Launcher.run(Launcher.java:280) 在 org.apache.tools.ant.launch.Launcher.main (Launcher.java:109)executeTargets(DefaultExecutor.java:41) at org.apache.tools.ant.Project.executeTargets(Project.java:1251) at org.apache.tools.ant.Main.runBuild(Main.java:809) at org.apache .tools.ant.Main.startAnt(Main.java:217) 在 org.apache.tools.ant.launch.Launcher.run(Launcher.java:280) 在 org.apache.tools.ant.launch.Launcher.main (Launcher.java:109)

**自我纠正努力：**我尝试`grant all on initdb.* to 'root'@'127.0.0.1' identified by ''`在命令末尾添加[this](https://stackoverflow.com/questions/4031419/ant-couldnt-connect-to-mysql-access-denied-but-mysql-client-could)。同样的错误。它似乎拒绝访问 ant 做事；也许如果我将使用密码选项关闭为否，它会起作用；我试着用谷歌搜索，但没有运气

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T00:34:04.390

在 JDBC 教程文件夹的*build.xml*文件中，搜索字符串“create-mysql-database”；该字符串标记*.xml*文件中定义的任务。*确定该文本块中“密码”参数的值（使用Dashcode*等突出显示程序阅读文本时更容易），并将其更改为适用于系统数据库的内容（在我的情况下为“”）。

在编辑之前找到“密码”中的字符串后，在整个*.xml*文件中找到相同的字符串并将其替换为正确的密码

教训：显然*ant*在调用它时获取了您传入的字符串（即字符串“ant”之后的字符串），并在您调用程序的目录中的*build.xml中查找它。*不要输入错误的密码...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T09:26:54.607

我在 JDBC 教程中也遇到了同样的错误，根据**whearyou 的**建议，我刚刚在 properties/mysql-build-properties.xml 的第 1 行添加了我的原始密码“YES”（我在进行 MySQL 设置时创建的） : 28 。

然后它起作用了......！

# javascript - 这个 JavaScript 模式的名称是什么？

> ID：11588108
> 
> 赞同：1
> 
> 时间：2012-07-20T23:20:24.007
> 
> 标签：javascript

每当我需要创建一个可能需要多次实例化的类并且我想防止在对象外部访问私有方法时，我一直在使用这种模式。

这个 JavaScript 模式的名称是什么？

[http://jsfiddle.net/CHcXG/](http://jsfiddle.net/CHcXG/)

```
var baseball = (function() {

    var _add = function(value) {
         value = value + 5;
         return value;
    };

    var constructor = function(iVal) {
       this.baseball = true;
       this.num = iVal; 
    };

    constructor.prototype.add = function() {
         this.num = _add(this.num);
    };

    return constructor;

})();

var test = new baseball(5);
var testb = new baseball(6); 
```

上面示例中的名称、值和方法是完全没有意义的；我只是想说明该模式的语法、结构和用法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T23:24:42.123

这是一个[模块模式](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#modulepatternjavascript)，几乎是一个[暴露的模块模式](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#revealingmodulepatternjavascript)。有关它和许多其他有用的 Javascript 设计模式的信息，请参阅 Addy Osmani 的链接页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T23:25:41.933

是的，模块模式，但也是边缘显示模式。

i guess it could be considered the "[revealer module pattern](http://www.klauskomenda.com/code/javascript-programming-patterns/#revealing)" if you wanted to be generous with there only being 1 single return function

# javascript - 用于鼠标悬停图像上传按钮的 JS（如 Facebook）

> ID：11588112
> 
> 赞同：0
> 
> 时间：2012-07-20T23:21:04.093
> 
> 标签：javascript, jquery, image, upload, hover

我正在尝试构建像 Facebook 这样的图像上传系统，当您将鼠标悬停在图像上时，会出现一个按钮（一个 div，而不是实际的 html 按钮）来选择图像。到目前为止，我使用的是 jQuery 的悬停方法。问题是，当我将鼠标悬停在图像上时，会出现按钮，但是当我将鼠标悬停在按钮上时，该功能会假定我不再将鼠标悬停在图像上，并且按钮会消失。当然，既然按钮消失了，我再次将鼠标悬停在图像上并且按钮重新出现。当我在图像上移动鼠标时，最终结果就是这种闪烁效果。

我似乎无法找到解决方法。我尝试为按钮本身创建一个单独的悬停事件，该事件删除图像的悬停事件，然后在 mouseout 上替换它，但图像 mouseout 事件似乎首先触发，它什么也不做。

我唯一能想到的就是使用 setTimeout，但这似乎很草率。鉴于 Facebook 正在做类似的事情，我确信有一种超级干净的方式来处理它。

有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T23:30:05.447

尝试使用[mouseenter()](http://api.jquery.com/mouseenter/)而不是 hover() 来处理冒泡

> mouseenter 事件在处理事件冒泡的方式上与 mouseover 不同。如果在这个例子中使用了 mouseover，那么当鼠标指针移动到 Inner 元素上时，将触发处理程序。这通常是不受欢迎的行为。另一方面，mouseenter 事件仅在鼠标进入它所绑定的元素而不是后代元素时触发其处理程序。所以在这个例子中，当鼠标进入 Outer 元素而不是 Inner 元素时，会触发处理程序。

# php - 业务逻辑是否应该与模型分开？

> ID：11588114
> 
> 赞同：6
> 
> 时间：2012-07-20T23:21:13.550
> 
> 标签：php, model-view-controller, design-patterns, rest

我们正在开发一个代码量很大的 PHP5 项目，上周我研究了一个 RESTful API 的 PoC。我们将模型类与业务类分开。

我发现，尝试实现 CRUD 功能时，直接针对模型实现 CRUD 将非常简单，而针对业务逻辑实现则不是，因为它的功能特定于当前现有的视图，并且它的接口不提供实现 API 所需的通用数据访问模型。

考虑到这一点，我想到了以下问题：

*   与数据交互、保持模型的灵活性*并*保持模型目前不关心的功能（例如在更改电子邮件地址时发送带有激活链接的邮件）的最佳方式是什么？

*   之前用 django 工作了很多，大部分业务逻辑都是在模型中实现的，为什么还要保持业务逻辑分开呢？你有现实生活中的例子吗？如果有的话，这能解决什么问题？

我也想到了一些可能的解决方案：

*   将整个业务逻辑放入模型中。在调用 save 方法之后/之前检查哪些字段发生了变化。
*   使用观察者模式通知业务对象模型的变化并直接与模型交互。

在你看来有什么好处和坏处，你会怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T11:24:11.910

如果您将数据存储分离为数据访问层，您将获得所需的分离和模型中的功能：

```
DAL (doing queries etc)
  |
Model (doing business)
  |
Controller
  |
View 
```

因此，在视图中您有一个操作：标记为已付款。因此，您的控制器获取请求 (POST) /invoice/1/markaspaid （或您使用的任何其他 url 结构）。然后控制器调用模型：

```
$Invoice=new Invoice();
$Invoice->markAsPaid(1); 
```

然后您的模型调用 DAL 来实际存储此更改。没有必要将其与模型分开。如果它非常复杂或事务性很强，您可能会考虑为复杂任务提供单独的服务。这样你的模型就会变得更薄，复杂的部分就会被分开。

> 与数据交互、保持模型的灵活性并保持模型目前不关心的功能（例如在更改电子邮件地址时发送带有激活链接的邮件）的最佳方式是什么？

我完全不明白这一点。据我所知，您应该将发送电子邮件过程与您的正常代码运行分开。所以把它放在一个队列中，然后在那里找到它。它不是您正常代码路径的一部分。您可以从您的模型中启动它，但仅此而已。

请参阅此问题，其中包含有关该主题的相关信息： [Cakephp cron job to call a controller's action](https://stackoverflow.com/questions/11266385/cakephp-cron-job-to-call-a-controllers-action/11266504#11266504)

# batch-file - BATCH 文件以删除配置文件条目

> ID：11588116
> 
> 赞同：0
> 
> 时间：2012-07-20T23:21:21.587
> 
> 标签：batch-file, configuration-files

**基本上：**

第一次在这里发布海报......我不仅在搜索 SO，而且在整个互联网上搜索过去 2 天的答案。我想要一个在卸载期间运行的批处理文件（.bat），打开一个配置（.cfg）文件，找到一个条目并将其删除，然后完成卸载。

**到目前为止我所拥有的：**

我有一个运行批处理文件以将条目添加到配置文件中的安装程序：

```
[Area.01]
Title=Unique to entry
Location=Unique to entry
Active=Required but in all entries
Layer=Required with Unique Number
Required=Required but in all entries

[Area.02]
Title=Unique to entry
Location=Unique to entry
Active=Required but in all entries
Layer=Required with Unique Number
Required=Required but in all entries 
```

我让安装批处理文件扫描配置并添加下一个条目号、条目的内容和保存条目索引的 REGISTRY 键；所以从逻辑上讲，下一个条目是`[Area.03]`. 但是，此文件包含 100 多个条目。

我想要的是批处理文件读取它所做的注册表条目，找到**它所做****的**条目，然后删除整个条目，**这就是我在这里的原因**。这是我到目前为止所拥有的：

```
@echo off

REG QUERY "HKLM\SOFTWARE\Name of File" /v SceneryCFGPath
IF ERRORLEVEL 1 GOTO ERROR1
FOR /F "tokens=3 skip=2" %%i IN ('REG QUERY "HKLM\SOFTWARE\Name of File" /v SceneryCFGPath') DO SET VAR1=%%i
CD "%VAR1%"

REG QUERY "HKLM\SOFTWARE\Name of File" /v SceneryIndex
IF ERRORLEVEL 1 GOTO ERROR2
FOR /F "tokens=3 skip=2" %%i IN ('REG QUERY "HKLM\SOFTWARE\Name of File" /v SceneryIndex') DO SET VAR2=%%i
TYPE scenery.cfg | FINDSTR /V Area.%VAR2%
REG DELETE "HKLM\SOFTWARE\Name of File" /F
GOTO END

:ERROR1
ECHO There was an Error while changing to Directory "%VAR1%"...
PAUSE
GOTO ERROR2

:ERROR2
ECHO There was an Error while unregistering from Scenery Library ! Please delete the Area manually...
PAUSE
GOTO END

:END
del "%~f0" 
```

使用时，`FINDSTR`它成功找到了条目，但**只**删除了第一行：`[Area.03]`. 我需要它做的是删除该条目和该条目的其他部分。

当我尝试在 FINDSTR 中包含其他条目时：

`TYPE scenery.cfg | FINDSTR /V /N Area.%VAR2% | Title | Active | Layer | Required`

它会删除每个条目的**所有**这些行。

**我真的更喜欢这是一个批处理文件，因为它可以在 Windows XP、Vista 和 7、32 和 64 位系统上运行。** 由于这些特定的 Windows 系统都具有**CMD.EXE**，因此不需要任何额外的库或程序。

**除了**删除配置文件中的整个条目外，我的一切工作正常。我希望我没有混淆任何人，但任何帮助将不胜感激！

斯文2157

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T20:24:43.250

在解决您提出的问题之前，还有一些与您的错误处理有关的其他问题需要处理。

您测试是否存在特定的注册表键值，如果没有找到，则尝试打印出不存在的键值！那行不通;-)

您尝试 CD 到找到的路径值，但不能保证该路径是有效的。您可能想要检查错误。此外，当前驱动器可能与路径的驱动器不匹配，因此您应该使用 CD /D（或 PUSHD）。

每个注册表键值对使用 2 个 REG QUERY 操作 - 一个用于测试是否存在，另一个用于解析值。每个键值只需要 1 个 REG QUERY。

批处理文件在完成后会自行删除。这将导致“找不到批处理文件”错误。也许您不在乎，但是当您调用此批处理时，您可能应该将 stdout 重定向到 nul。

由于您的批处理文件会因删除而自行终止，因此您可以简化错误处理。每个错误都不需要单独的例程。只需调用一个通用错误例程，传入错误消息。错误例程可以在完成后进入结束例程，这会杀死批处理。因此无需担心从错误调用返回。

我已将上述所有想法合并到下面的代码中。

我还假设您实际上想要修改“scenery.cfg”文件，而不是简单地将更改后的表单回显到屏幕上。我将输出重定向到一个新文件，然后将新文件重命名为旧名称，从而破坏原始文件。

现在，要解决您最初的问题-批处理没有任何本机实用程序可以方便地提取两个标记线之间的一系列线。由于您不想依赖任何非本地实用程序，因此您必须循环处理每一行并确定是否应包含该行。

我看到了 2 种简单的方法来做到这一点：*注意 - 没有代码经过测试。这些概念都很合理，但我可能引入了一个应该很容易修复的愚蠢错误*

**1 - 使用单个循环检查每一行，并在找到所选区域时开始排除该行，并在下一个区域开始时恢复**

该代码使用 SET 搜索和替换来测试该行是否包含有问题的字符串。

读取文件的经典技术是 FOR /F 循环。但它去掉了空白行。因此代码被扩展为在每个 [Area.nn] 部分之前添加一个空行。`!`需要延迟扩展，但如果启用延迟扩展，包含的 FOR 变量值会损坏。所以我在循环中打开和关闭延迟扩展。如果您知道它`!`永远不会出现在文件中，那么您可以简单地在顶部启用延迟扩展并从循环中删除 SET LOCAL 和 ENDLOCAL。

```
@echo off
setlocal disableDelayedExpansion
set regPath="HKLM\SOFTWARE\Name of File"

set "myPath="
for /f "tokens=3 skip=2" %%A in ('reg query %regPath% /v SceneryCFGPath') do set "myPath=%%A"
if not defined myPath call :error Unable to locate SceneryCFGPath
cd /d "%myPath%" 2>nul || call :error Unable to CD to "%myPath%"

set "area="
for /f "tokens=3 skip=2" %%A IN ('reg query %regPath% /v SceneryIndex') do set "area=%%A"
if not defined area call :error Unable to unregister from Scenery Library ! Please delete the Area manually...

>scenery.cfg.new (
  set "del="
  for /f "delims=" %%A in (scenery.cfg) do (
    set "ln=%%A"
    setlocal enableDelayedExpansion
    if "!ln:[Area.%area%=!" neq "!ln!" (
        set del=1
    ) else if "!ln:[Area.=!" neq "!ln!" (
        set "del="
        echo(
    )
    if not defined del echo !ln!
    endlocal
  )
)
move /y scenery.cfg.new scenery.cfg

reg delete %regPath% /f
goto end

:error
echo ERROR: %*
pause

:end
del "%~f0" 
```

**2 - 使用 FINDSTR 查找所选区域的开头，使用 2nd FINDSTR 查找下一个区域的开头。**

/N 选项用于获取匹配行的行号。FOR /F 用于解析结果并将其分配给一个值。一旦找到下一个区域，就需要 GOTO 跳出第二个循环。

最后，第三个 FOR /F 用于读取具有 FINDSTR 命令前置的行号的文件。解析每一行并排除适当的行。

请注意，如果一行以 . 开头，此代码将无法正常工作`:`。可以使用更多代码来消除限制，但我认为在您的情况下不需要它。

```
@echo off
setlocal disableDelayedExpansion
set regPath="HKLM\SOFTWARE\Name of File"

set "myPath="
for /f "tokens=3 skip=2" %%A in ('reg query %regPath% /v SceneryCFGPath') do set "myPath=%%A"
if not defined myPath call :error Unable to locate SceneryCFGPath
cd /d "%myPath%" 2>nul || call :error Unable to CD to "%myPath%"

set "area="
for /f "tokens=3 skip=2" %%A IN ('reg query %regPath% /v SceneryIndex') do set "area=%%A"
if not defined area call :error Unable to unregister from Scenery Library ! Please delete the Area manually...

set "beginDel="
for /f "delims=:" %%N in ('findstr /nbc:"[Area.%area%]" scenery.cfg') do set beginDel=%%N
if not defined beginDel goto end

set "endDel="
for /f "delims=:" %%N in ('findstr /nbc:"[Area." scenery.cfg') do if %%N gtr beginDel (
  set endCond=if %%A gre %%N
  goto :break
)
:break

>scenery.cfg.new (
  for /f "tokens=1* delims=:" %%A in ('findstr /n "^" scenery.cfg') do (
    if %%A lss %beginDel% %endCond% echo(%%B
  )
)
move /y scenery.cfg.new scenery.cfg

reg delete %regPath% /f
goto end

:error
echo ERROR: %*
pause

:end
del "%~f0" 
```

# html - CSS bg 图片定位

> ID：11588117
> 
> 赞同：2
> 
> 时间：2012-07-20T23:21:26.960
> 
> 标签：html, internet-explorer, google-chrome, css

我有一个带有 bg 图像的 div 可以`background-position:bottom right -3px;`在 Firefox 中完美运行，但是它在 IE 和 CHROME 中会中断。如何在 IE 和 CHROME 中根据需要在 DIV 中定位我的图像？

下面是IE和火狐的截图

![在此处输入图像描述](../Images/636578cc8f6dd90bc93c24e8cfc3db08.png)

火狐^

![在此处输入图像描述](../Images/95ee7699b62d6f88cfc362823914b0a9.png)

即^

CSS

```
.side_msg { font-size:16px; text-align:left; color:#EFEFEF; background-color:#7B9F31;     padding:30px; border-top:2px solid #FFF; border-left:2px solid #FFF;     border-right:2px solid #FFF; margin-right:-80px;
 background-image:url(../img/msg_bot.png); background-position:bottom right -3px       !important; background-repeat:no-repeat;  }
.side_msg_top { position:relative; right:-80px; bottom:-12px; min-height:58px;      background-image:url(../img/msg_top.png); background-position:right; background-repeat:no-repeat; } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T23:35:34.210

位置只能是两个坐标，所以：

```
background-position: right bottom; 
```

或者：

```
background-position: right -3px; 
```

或者：

```
background-position: -3px bottom; 
```

# php - PHP if 语句快捷方式

> ID：11588119
> 
> 赞同：1
> 
> 时间：2012-07-20T23:21:36.277
> 
> 标签：php, arrays, variables, loops, if-statement

我有一个从 csv 源导入数据的脚本。许多字段/列都在“代码”中。例如，学校字段是附加到实际学校名称的数字。在将代码导入数据库之前，我需要将其转换为实际名称。

我的问题是，除了使用“if”语句之外，有没有更快的方法来进行这种转换。一些需要转换的字段有 20 多个选项，所以我想知道是否有另一种方法来编写转换而不是有 20 个 if 语句。现在我有：

```
if($data['school'] = 0001) {$school = "school1"; } 
if($data['school'] = 0002) {$school = "school2"; }
if($data['school'] = 0003) {$school = "school3"; }...

or i could use if else statements 
```

所以我的问题是：有没有一种更快的方法可以通过某种数组或循环或其他类型的 php 语句来加快这个过程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T23:23:38.883

将

```
 $school = 'school' . (int)$data['school']; 
```

工作？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T23:26:32.090

您是否将所有这些都保存在一个文件中，或者您是否必须手动将其输入到 PHP 代码中？

您可以将代码映射放入关联数组中，然后单个语句将获得正确的名称。

```
$schoolCodeToName = array(
    '0001' => 'school1',
    '0002' => 'school2',
    '0003' => 'school3'
    // ...
);

$school = $schoolCodeToName[ $data['school'] ]; 
```

如果您想避免打字，那么您需要一些代码来加载数据文件并构建`$schoolCodeToName`数组。

# xml - 天气应用

> ID：11588121
> 
> 赞同：0
> 
> 时间：2012-07-20T23:21:47.213
> 
> 标签：xml, actionscript-3

每个人

好的，所以我正在创建一个天气应用程序，它从 yahoo 天气 api 获取信息。这是 XML：[http ://weather.yahooapis.com/forecastrss?p=44310](http://weather.yahooapis.com/forecastrss?p=44310)

ps 最好在 Google Chrome 中打开它，因为它会将其显示为 XML 文件。

我正在尝试从 XML 中获取多个项目。我试图让信息显示完整的城市和州，但我该怎么做？

XML 适用于我所在的地区，但我需要它来与任何城市一起工作。

这是我的代码：

```
public class PanelBase extends libs.PanelBase
{
    private var vo:WeatherVO;
    private var _details:DetailsView;

    public function PanelBase()
    {
        super();

        // below is my settings for the input area where you have to enter your zip code
        // .text empties the field, .restrict keeps a person from using what ever 
        // is not added. in this case, the person can only use numbers from 0 to 9 only
        // .maxchars sets the number of possible items that a person can enter inside the input field.
        // buttonMode just creates the illusion of a button formed from a graphic
        this.tf_Zipcode.text = "";
        this.tf_Zipcode.restrict = "0-9";
        this.tf_Zipcode.maxChars = 5;
        this.btn_Enter.addEventListener(MouseEvent.CLICK, processZip);
    }

    // function for the button
    private function processZip(e:Event):void
    {
        // if the zip code area is wrong, inside of the text area above the zip code
        // will let you know that the zip entered is wrong, but if the zip code
        // you enter has less than 5 numbers, then you will be told there aren't enough numbers
        // then the zip code text field will empty itself.
        if(this.tf_Zipcode.text == null)
        {
            this.tf_Hint.text = "Sorry! Your zip code is invalid.";
        }
        else if(this.tf_Zipcode.text.length < 5)
        {
            this.tf_Zipcode.text = "";
            this.tf_Hint.text = "There are not enough numbers!"
        }
        else
        {
            this.removeChild(this.tf_Zipcode);
            this.addChild(this.tf_Zipcode);
            this.tf_Zipcode.text = "";
            //getImages();
            loadInfo();
        }
    }

    // function for loading the XML
    private function loadInfo():void
    {
        var ld:URLLoader = new URLLoader();
        ld.load(new URLRequest("http://weather.yahooapis.com/forecastrss?p=44310&u=f"));
        ld.addEventListener(Event.COMPLETE, parseInfo);
    }

    // function 
    private function parseInfo(e:Event):void
    {
        var xmlData:XML = XML(e.target.data);
        var ns1:Namespace = new Namespace("http://xml.weather.yahoo.com/ns/rss/1.0");
        var ns2:Namespace = new Namespace("http://xml.weather.yahoo.com/ns/rss/1.0");

        // parsing the information from the XML into the text fields 
        vo = new WeatherVO();
        vo.City = xmlData.channel.ns1::location.@city;
        vo.CurrentTemp = xmlData.channel.ns1::condition.@temp;
        vo.High = xmlData.item.channel.ns1::forecast.@high;
        vo.Low = xmlData.item.channel.ns1::forecast.@low;
        vo.Humidity = xmlData.channel.ns1::atmosphere.@humidity;
        vo.Wind = xmlData.channel.ns1::wind.@chill;
        vo.Rise = xmlData.channel.ns1::astronomy.@sunrise;
        vo.Set = xmlData.channel.ns1::astronomy.@sunset;
        vo.Tomorrow = xmlData.channel.item.ns2::forecast[1].@day;

        trace(xmlData)
        updateTextFields();

    }

    private function updateTextFields():void
    {
        //remove zip code view and then add result panel view

        _details = new DetailsView();
        this.addChild(_details);

        _details.tf_City.text = vo.City;
        _details.tf_CurrentTemp.text = vo.CurrentTemp;
        _details.tf_High.text = vo.High;
        _details.tf_Low.text = vo.Low;
        _details.tf_Humidity.text = vo.Humidity;
        _details.tf_Wind.text = vo.Wind;
        _details.tf_Rise.text = vo.Rise;
        _details.tf_Set.text = vo.Set;
        _details.tf_Tomorrow.text = vo.Tomorrow; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T02:21:50.083

尝试将以下内容添加到您的 parseInfo 方法中：

```
vo.Region = xmlData.channel.ns1::location.@region;

trace (vo.City + ", " + vo.Region); 
```

# liferay - Liferay 6.1 Demo 小程序错误

> ID：11588122
> 
> 赞同：1
> 
> 时间：2012-07-20T23:22:00.897
> 
> 标签：liferay, tomcat7, portlet, liferay-6, demo

我试图让一些演示工作，但一直有问题。我正在使用 Tomcat 7 + MySql。当我尝试在以下位置找到 jsf2 portlet 演示时：[http ://repository.portletfaces.org/content/repositories/liferay-releases/com/liferay/faces/demos/jsf2-portlet/3.1.0-rc2/jsf2-portlet -3.1.0-rc2.war](http://repository.portletfaces.org/content/repositories/liferay-releases/com/liferay/faces/demos/jsf2-portlet/3.1.0-rc2/jsf2-portlet-3.1.0-rc2.war)我的日志（为 log4j 配置）显示它已注册但立即取消注册。我不知道为什么，也没有在日志中看到任何原因。我将不胜感激任何帮助。

有问题的日志条目是：“04:17:55,430 INFO [PortletHotDeployListener:470] 正在取消注册 jsf2-portlet 的 portlet”。

以下是通向上述内容的内容。

```
04:17:53,693 DEBUG [BridgeConfigImpl:223] Processing faces-config: [/WEB-INF/faces-config.xml]
04:17:53,694 DEBUG [BridgeConfigImpl:296] Processing web-app: [/WEB-INF/web.xml]
04:17:53,695 DEBUG [BridgeConfigImpl:306] Processing web-app: [/WEB-INF/liferay-web.xml]
04:17:53,699 DEBUG [BridgeConfigImpl:341] Added implicit extension-mapped servlet-mapping for urlPattern=[*.xhtml]
04:17:53,699 DEBUG [BridgeConfigImpl:341] Added implicit extension-mapped servlet-mapping for urlPattern=[*.jsp]
04:17:53,713 INFO [PortletHotDeployListener:433] 1 portlet for jsf2-portlet is available for use
04:17:55,418 INFO [PluginPackageUtil:1099] Reading plugin package for jsf2-portlet
04:17:55,430 INFO [PortletHotDeployListener:470] Unregistering portlets for jsf2-portlet
**04:17:55,437 INFO [PortletHotDeployListener:503] 1 portlet for jsf2-portlet was unregistered** 
```

完整的日志可以在下面看到：

```
04:17:53,183 INFO [PluginPackageUtil:1099] Reading plugin package for jsf2-portlet
04:17:53,469 INFO [PortletHotDeployListener:614] Registering portlets for jsf2-portlet
04:17:53,511 INFO [BridgeImpl] Initializing Liferay Faces Bridge 3.1.0-rc2 (Galatia / Jul 14, 2012 AD)
04:17:53,592 DEBUG [BridgeConfigImpl:168] Pre-processing faces-config: [jar:file:/usr/local/LiferayTomcat/liferay-portal-6.1.0-ce-ga1/apache-tomcat-7.0.27/lib/weld-servlet.jar!/META-INF/faces-config.xml]
04:17:53,598 DEBUG [BridgeConfigImpl:168] Pre-processing faces-config: [jar:file:/usr/local/LiferayTomcat/liferay-portal-6.1.0-ce-ga1/apache-tomcat-7.0.27/lib/ext/resin.jar!/META-INF/faces-config.xml]
04:17:53,599 DEBUG [BridgeConfigImpl:168] Pre-processing faces-config: [jar:file:/usr/local/LiferayTomcat/liferay-portal-6.1.0-ce-ga1/apache-tomcat-7.0.27/webapps/jsf2-portlet/WEB-INF/lib/liferay-faces-alloy-3.1.0-rc2.jar!/META-INF/faces-config.xml]
04:17:53,600 DEBUG [BridgeConfigImpl:168] Pre-processing faces-config: [jar:file:/usr/local/LiferayTomcat/liferay-portal-6.1.0-ce-ga1/apache-tomcat-7.0.27/webapps/jsf2-portlet/WEB-INF/lib/liferay-faces-bridge-impl-3.1.0-rc2.jar!/META-INF/faces-config.xml]
04:17:53,601 DEBUG [BridgeConfigImpl:168] Pre-processing faces-config: [jar:file:/usr/local/LiferayTomcat/liferay-portal-6.1.0-ce-ga1/apache-tomcat-7.0.27/webapps/jsf2-portlet/WEB-INF/lib/util-taglib.jar!/META-INF/faces-config.xml]
04:17:53,602 DEBUG [BridgeConfigImpl:202] Post-processing faces-config: [jar:file:/usr/local/LiferayTomcat/liferay-portal-6.1.0-ce-ga1/apache-tomcat-7.0.27/webapps/jsf2-portlet/WEB-INF/lib/liferay-faces-bridge-impl-3.1.0-rc2.jar!/META-INF/faces-config.xml]
04:17:53,603 DEBUG [BridgeConfigImpl:802] render-response-wrapper-class=[com.liferay.faces.bridge.application.view.BridgeWriteBehindResponseRenderImpl]
04:17:53,604 DEBUG [BridgeConfigImpl:806] resource-response-wrapper-class=[com.liferay.faces.bridge.application.view.BridgeWriteBehindResponseResourceImpl]
04:17:53,609 DEBUG [BridgeConfigImpl:39] Creating instance with zero-arg constructor since wrapperConstructor=null
04:17:53,609 DEBUG [BridgeConfigImpl:592] Instantiated bridgeContextFactory=[com.liferay.faces.bridge.context.BridgeContextFactoryImpl] wrappedFactory=[null]
04:17:53,615 DEBUG [BridgeConfigImpl:39] Creating instance with zero-arg constructor since wrapperConstructor=null
04:17:53,622 DEBUG [BridgeConfigImpl:612] Instantiated bridgeFlashFactory=[com.liferay.faces.bridge.context.flash.BridgeFlashFactoryImpl] wrappedFactory=[null]
04:17:53,624 DEBUG [BridgeConfigImpl:39] Creating instance with zero-arg constructor since wrapperConstructor=null
04:17:53,624 DEBUG [BridgeConfigImpl:632] Instantiated bridgePhaseFactory=[com.liferay.faces.bridge.BridgePhaseFactoryImpl] wrappedFactory=[null]
04:17:53,626 DEBUG [BridgeConfigImpl:39] Creating instance with zero-arg constructor since wrapperConstructor=null
04:17:53,663 DEBUG [BridgeConfigImpl:652] Instantiated BridgeRequestScopeFactory=[com.liferay.faces.bridge.scope.BridgeRequestScopeFactoryImpl] wrappedFactory=[null]
04:17:53,665 DEBUG [BridgeConfigImpl:39] Creating instance with zero-arg constructor since wrapperConstructor=null
04:17:53,666 DEBUG [BridgeConfigImpl:673] Instantiated BridgeRequestScopeCacheFactory=[com.liferay.faces.bridge.scope.BridgeRequestScopeCacheFactoryImpl] wrappedFactory=[null]
04:17:53,668 DEBUG [BridgeConfigImpl:39] Creating instance with zero-arg constructor since wrapperConstructor=null
04:17:53,669 DEBUG [BridgeConfigImpl:695] Instantiated BridgeRequestScopeManagerFactory=[com.liferay.faces.bridge.scope.BridgeRequestScopeManagerFactoryImpl] wrappedFactory=[null]
04:17:53,671 DEBUG [BridgeConfigImpl:39] Creating instance with zero-arg constructor since wrapperConstructor=null
04:17:53,672 DEBUG [BridgeConfigImpl:717] Instantiated BridgeWriteBehindResponseFactory=[com.liferay.faces.bridge.application.view.BridgeWriteBehindResponseFactoryImpl] wrappedFactory=[null]
04:17:53,676 DEBUG [BridgeConfigImpl:39] Creating instance with zero-arg constructor since wrapperConstructor=null
04:17:53,677 DEBUG [BridgeConfigImpl:737] Instantiated BridgeURLFactory=[com.liferay.faces.bridge.context.url.BridgeURLFactoryImpl] wrappedFactory=[null]
04:17:53,683 DEBUG [BridgeConfigImpl:39] Creating instance with zero-arg constructor since wrapperConstructor=null
04:17:53,684 DEBUG [BridgeConfigImpl:789] Instantiated PortletContainerFactory=[com.liferay.faces.bridge.container.PortletContainerFactoryImpl] wrappedFactory=[null]
04:17:53,686 DEBUG [BridgeConfigImpl:39] Creating instance with zero-arg constructor since wrapperConstructor=null
04:17:53,687 DEBUG [BridgeConfigImpl:817] Instantiated UploadedFileFactory=[com.liferay.faces.bridge.model.UploadedFileFactoryImpl] wrappedFactory=[null]
04:17:53,688 DEBUG [BridgeConfigImpl:202] Post-processing faces-config: [jar:file:/usr/local/LiferayTomcat/liferay-portal-6.1.0-ce-ga1/apache-tomcat-7.0.27/lib/weld-servlet.jar!/META-INF/faces-config.xml]
04:17:53,690 DEBUG [BridgeConfigImpl:202] Post-processing faces-config: [jar:file:/usr/local/LiferayTomcat/liferay-portal-6.1.0-ce-ga1/apache-tomcat-7.0.27/lib/ext/resin.jar!/META-INF/faces-config.xml]
04:17:53,691 DEBUG [BridgeConfigImpl:202] Post-processing faces-config: [jar:file:/usr/local/LiferayTomcat/liferay-portal-6.1.0-ce-ga1/apache-tomcat-7.0.27/webapps/jsf2-portlet/WEB-INF/lib/liferay-faces-alloy-3.1.0-rc2.jar!/META-INF/faces-config.xml]
04:17:53,692 DEBUG [BridgeConfigImpl:202] Post-processing faces-config: [jar:file:/usr/local/LiferayTomcat/liferay-portal-6.1.0-ce-ga1/apache-tomcat-7.0.27/webapps/jsf2-portlet/WEB-INF/lib/util-taglib.jar!/META-INF/faces-config.xml]
04:17:53,693 DEBUG [BridgeConfigImpl:223] Processing faces-config: [/WEB-INF/faces-config.xml]
04:17:53,694 DEBUG [BridgeConfigImpl:296] Processing web-app: [/WEB-INF/web.xml]
04:17:53,695 DEBUG [BridgeConfigImpl:306] Processing web-app: [/WEB-INF/liferay-web.xml]
04:17:53,699 DEBUG [BridgeConfigImpl:341] Added implicit extension-mapped servlet-mapping for urlPattern=[*.xhtml]
04:17:53,699 DEBUG [BridgeConfigImpl:341] Added implicit extension-mapped servlet-mapping for urlPattern=[*.jsp]
04:17:53,713 INFO [PortletHotDeployListener:433] 1 portlet for jsf2-portlet is available for use
04:17:55,418 INFO [PluginPackageUtil:1099] Reading plugin package for jsf2-portlet
04:17:55,430 INFO [PortletHotDeployListener:470] Unregistering portlets for jsf2-portlet
**04:17:55,437 INFO [PortletHotDeployListener:503] 1 portlet for jsf2-portlet was unregistered** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:02:45.063

您描述的行为通常意味着仍然发生异常，它只是没有被 Liferay 正确记录。大多数时候对我有用的是将 logging.properties 文件添加到我的 portlet 的 WEB-INF/classes 目录中，并为其提供以下内容：

```
handlers = org.apache.juli.FileHandler, java.util.logging.ConsoleHandler
org.apache.juli.FileHandler.level = FINE
org.apache.juli.FileHandler.directory = ${catalina.base}/logs
org.apache.juli.FileHandler.prefix = catalina.

java.util.logging.ConsoleHandler.level = FINE
java.util.logging.ConsoleHandler.formatter = java.util.logging.SimpleFormatter 
```

在部署这个新的 WAR 之后，您应该会看到额外的日志记录，这些日志记录应该可以帮助您找到部署失败的原因。

# javascript - ASP.NET - HTML 页面在由 Visual Studio 启动然后在其外部启动时看起来不同

> ID：11588124
> 
> 赞同：3
> 
> 时间：2012-07-20T23:23:01.860
> 
> 标签：javascript, asp.net, html, css, html-rendering

我在 ASP.NET 方面不是最好的，但我将它用于身份验证后端和 RESTful Web API（因为我知道 C# 足够危险）。

我有一个严格使用 HTML、CSS 和 JS 构建的网站。当直接使用任何流行的浏览器（chrome、IE、firefox）启动时，它在外面看起来很棒。我想在这个网站中使用 ASP.NET 的一些功能，并让它成为我的 Web 应用程序的前端。我只是将 HTML、CSS 和 JS 文件夹（包括所有图像等）拖放到我的 ASP.NET 项目中，当我从 Visual Studio 在浏览器中预览时，整个 HTML 布局都是乱码，一切都没有看起来一样。

我为未经授权的用户添加了访问 Web.config 中的页面、css 文件夹和 js 文件夹的权限。

知道为什么会发生这种情况吗？ASP.NET 在构建过程中呈现 HTML/CSS 是否与直接通过浏览器查看不同？

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Site Name &raquo; Awesome Tagline Here</title>
<link rel="stylesheet" href="css/base.css" type="text/css" media="all" />
<link rel="stylesheet" href="css/flexslider.css" type="text/css" media="all" />
<link rel="stylesheet" href="css/red.css" type="text/css" media="all" />
<link rel="shortcut icon" type="image/x-icon" href="css/images/favicon.ico" />

<script src="js/modernizr.js" type="text/javascript"></script>
<script src="js/jquery.js" type="text/javascript"></script>
<script src="js/colorbox.js" type="text/javascript"></script>
<script src="js/flexslider.js" type="text/javascript"></script>
<script src="js/livevalidation.js" type="text/javascript"></script>
<script src="js/twitter.js" type="text/javascript"></script>
<script src="js/easing.js" type="text/javascript"></script>
<script src="js/functions.js" type="text/javascript"></script>
</head>
<body>

<section id="wrapper">
    <section class="shell">
        <!-- Header -->
        <header>
            <h1 id="logo"><a href="home.html" class="notext">Name Of site</a></h1>

            <nav>
                <ul class="main-nav">
                    <li class="current"><a href="home.html">Home</a></li>
                    <li><a href="about.html">About</a></li>
                    <li>
                        <a href="services.html">Services</a>
                        <ul>
                            <li><a href="services.html">Service Page 1</a></li>
                            <li><a href="services.html">Service Page 2</a></li>
                            <li>
                                <a href="services.html">Service Page 3</a>
                                <ul>
                                    <li><a href="services.html">Service Page 1</a></li>
                                    <li><a href="services.html">Service Page 2</a></li>
                                    <li><a href="services.html">Service Page 3</a></li>
                                    <li><a href="services.html">Service Page 4</a></li>
                                </ul>
                            </li>
                            <li><a href="services.html">Service Page 4</a></li>
                        </ul>
                    </li>
                    <li><a href="projects.html">Projects</a></li>
                    <li><a href="blog.html">Blog</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>

                <ul class="socials">
                    <li class="facebook"><a href="#">Facebook</a></li>
                    <li class="twitter"><a href="#">Twitter</a></li>
                    <li class="rss"><a href="#">RSS</a></li>
                </ul>
            </nav>
        </header>

<!-- End Header -->

</section>

<section id="large-slider">
    <ul class="slides">
        <li>
            <img src="css/images/home-slide1.jpg" alt="" />

            <section class="text">
                <h1><span>Ma quande</span> lingues coales</h1>

                <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim.</p>

                <a href="#" class="button">View More</a>
            </section>
        </li>
        <li>
            <img src="css/images/home-slide2.jpg" alt="" />

            <section class="text">
                <h1><span>Ma quande</span> lingues coales</h1>

                <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim.</p>

                <a href="#" class="button">View More</a>
            </section>
        </li>
        <li>
            <img src="css/images/home-slide3.jpg" alt="" />

            <section class="text">
                <h1><span>Ma quande</span> lingues coales</h1>

                <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim.</p>

                <a href="#" class="button">View More</a>
            </section>
        </li>
        <li>
            <img src="css/images/home-slide1.jpg" alt="" />

            <section class="text">
                <h1><span>Ma quande</span> lingues coales</h1>

                <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim.</p>

                <a href="#" class="button">View More</a>
            </section>
        </li>
    </ul>
</section>

<section class="shell">

    <section class="about-row">
        <h2 class="section-head"><a href="about.html" class="more">More Info</a> <span><span>More</span> About Us</span></h2>

        <section class="thumbs">
            <img src="css/images/th-about1.jpg" alt="" />
            <img src="css/images/th-about2.jpg" alt="" />
            <img src="css/images/th-about3.jpg" alt="" />
            <img src="css/images/th-about4.jpg" alt="" />
        </section>
        <section class="text">
            <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut</p>
        </section>
    </section>

    <section class="projects-row">
        <h2 class="section-head"><a href="projects.html" class="more">More Projects</a> <span><span>Latest</span> Projects</span></h2>

        <ul class="thumbs">
            <li>
                <a href="project.html"><img src="css/images/th-home1.jpg" alt="" /></a>
                <h4>Lorem ipsum dolor <span>sit amet</span></h4>

                <p><a href="#">CASE STUDIES</a> <span>/</span> <a href="#">Entertainment</a> <span>/</span> <a href="#">Featured</a> <span>/</span> <a href="#">Website</a></p>
            </li>
            <li>
                <a href="project.html"><img src="css/images/th-home2.jpg" alt="" /></a>
                <h4>Lorem ipsum dolor <span>sit amet</span></h4>

                <p><a href="#">CASE STUDIES</a> <span>/</span> <a href="#">Entertainment</a> <span>/</span> <a href="#">Featured</a> <span>/</span> <a href="#">Website</a></p>
            </li>
            <li>
                <a href="project.html"><img src="css/images/th-home3.jpg" alt="" /></a>
                <h4>Lorem ipsum dolor <span>sit amet</span></h4>

                <p><a href="#">CASE STUDIES</a> <span>/</span> <a href="#">Entertainment</a> <span>/</span> <a href="#">Featured</a> <span>/</span> <a href="#">Website</a></p>
            </li>
            <li>
                <a href="project.html"><img src="css/images/th-home4.jpg" alt="" /></a>
                <h4>Lorem ipsum dolor <span>sit amet</span></h4>

                <p><a href="#">CASE STUDIES</a> <span>/</span> <a href="#">Entertainment</a> <span>/</span> <a href="#">Featured</a> <span>/</span> <a href="#">Website</a></p>
            </li>
        </ul>
    </section>

    <section class="clients-row">
        <h2 class="section-head"><a href="#" class="more">View More</a> <span><span>Our</span> Clients</span></h2>

        <ul>
            <li><a href="#"><img src="css/images/client1.png" alt="" /></a></li>
            <li><a href="#"><img src="css/images/client2.png" alt="" /></a></li>
            <li><a href="#"><img src="css/images/client3.png" alt="" /></a></li>
            <li><a href="#"><img src="css/images/client4.png" alt="" /></a></li>
            <li><a href="#"><img src="css/images/client5.png" alt="" /></a></li>
            <li><a href="#"><img src="css/images/client6.png" alt="" /></a></li>
            <li><a href="#"><img src="css/images/client7.png" alt="" /></a></li>
            <li><a href="#"><img src="css/images/client8.png" alt="" /></a></li>
        </ul>
    </section>

    <section class="row">
        <section class="half">
            <h2 class="section-head"><span><span>We</span> Hire</span></h2>

            <h4>SALES MARKETING CONSULTANT</h4>
            <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. <a href="#">More</a></p>

            <h4>ART DIRECTOR</h4>
            <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. <a href="#">More</a></p>
        </section>
        <section class="half">
            <h2 class="section-head"><span><span>Our</span> Services</span></h2>

            <ul class="left">
                <li><a href="services.html">Advertising</a></li>
                <li><a href="services.html">Brand Identity Design</a></li>
                <li><a href="services.html">Business Planning</a></li>
                <li><a href="services.html">Startup Planning</a></li>
                <li><a href="services.html">Campaign Planning</a></li>
            </ul>
            <ul class="right">
                <li><a href="services.html">Online Advertising Services</a></li>
                <li><a href="services.html">Website Architecture Design</a></li>
                <li><a href="services.html">Interactive Design</a></li>
                <li><a href="services.html">Game Design</a></li>
                <li><a href="services.html">Development</a></li>
            </ul>
        </section>
    </section>

    <h2 class="bottom-text">“Eat your <strong>betting money</strong>, but don't bet your <strong>eating money</strong>.”&lt;/h2>

    </section>

    <section id="footer-push"></section>
</section>

<!-- Footer -->
<footer>
    <section class="shell">
        <section id="to-top">
            <a href="#">Up</a>
            <span class="overlay"></span>
        </section>

        <section class="twitter-feed">
            <h5>Latest Tweets</h5>

            <section id="tweets"></section>
        </section>

        <section class="about-box">
            <h5>Tested on All Browsers</h5>
            <p>Find out more theme features <a href="#">Here</a></p>
            <img src="css/images/browsers.png" alt="" />
        </section>

        <section class="contact-box">
            <h5>Get in Touch</h5>

            <ul>
                <li><span class="small">email.</span> <a href="#">info@ibetwhat.com</a></li>
                <li><span class="small">ph.</span> 655-606-105</li>
                <li><span class="small">add.</span> East Pixel aBld. 99 <br /> City 9000</li>
            </ul>
        </section>

        <section class="socials">
            <ul>
                <li class="facebook"><a href="#">Facebook <span>Become a fan!</span></a></li>
                <li class="twitter"><a href="#">Twitter <span>Need more feed</span></a></li>
                <li class="rss"><a href="#">RSS <span>Be up to date</span></a></li>
            </ul>
        </section>
    </section>

    <section id="bottom">
        <section class="shell">
            <p class="foot-nav">
                <a href="home.html">Home</a> <span>|</span> 
                <a href="about.html">About</a> <span>|</span> 
                <a href="services.html">Services</a> <span>|</span> 
                <a href="projects.html">Projects</a> <span>|</span> 
                <a href="blog.html">Blog</a> <span>|</span> 
                <a href="contact.html">Contact</a> <span>|</span> 
                <a href="#">Bonus Pages</a>
            </p>

            <p>© 2012 My Company.</p>
        </section>
    </section>
</footer>
<!-- End Footer -->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T23:33:24.173

很可能您的 VS 项目中的引用与服务器上的引用不同。检查 HTML 上到 CSS 文件的相对路径是否正确。接下来检查图像路径是否仍然可以在您的 CSS 中工作（如果有的话）。您需要根据您的新位置修复这些问题。

尝试通过直接 URL 访问 CSS、js 和图像。验证 HTML 是否使用相同的路径。

当然可以使用 Firebug 或 Chrome 开发者工具来调试路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T23:35:00.453

如果不能直接查看您的特定场景，很难说出正在发生的事情，但是，如果您在提到“预览页面”时指的是 Visual Sudio Designer，那么您描述的结果是可以预期的，如果您的原始 HTML 页面 HTML 在呈现 UI 时使用了大量的 javascript。Visual Studio 设计器不会在预览模式下处理任何 javascript。

如果您没有参考 Visual Studio 设计器并且正在浏览由 Visual Studio Web 服务器主机进程托管的 HTML 页面，那么您可能需要检查您是如何引用资源文件（css 等）的。如果您在 href="http://domain.com/styles/main.cs" 之类的 href 中完全限定了样式表，那么由于 Visual Studio Web 服务器通常运行在一个随机的，除了端口 80 配置。无论如何，您可能不应该以这种方式引用它们。最有可能的问题不是权限，而是对您的 css 和 javascript 文件的引用损坏。

# iphone - Facebook API（代表不工作）

> ID：11588126
> 
> 赞同：1
> 
> 时间：2012-07-20T23:23:08.717
> 
> 标签：iphone, objective-c, ios, facebook, facebook-graph-api

我正在尝试使用他们的 SDK 从 Facebook 请求数据，但我一直一无所获......

我的 .h 文件...

```
#import <UIKit/UIKit.h>
#import "Facebook.h"

@interface VPSettingsViewController : UIViewController <FBRequestDelegate, FBDialogDelegate, FBSessionDelegate> {
    Facebook *facebook;

    NSArray *items;
}

@end 
```

下面是我的 .m 文件，它基本上调用了一个请求，并且当我从 Facebook 收到请求时应该做一些事情，但是 *(void)request:(FBRequest *)request didLoad:(id)result*永远不会被调用...

```
 - (void)viewDidLoad
{
    [super viewDidLoad];

    facebook = [[Facebook alloc] initWithAppId:@"333593533397126" andDelegate:self];

    [facebook requestWithGraphPath:@"me/friends" andDelegate:self];
    // Do any additional setup after loading the view.
}

- (void)request:(FBRequest *)request didLoad:(id)result {
    NSLog(@"Inside didLoad");
    if ([result isKindOfClass:[NSArray class]]) {
        result = [result objectAtIndex:0];
    }
    // When we ask for user infor this will happen.
    if ([result isKindOfClass:[NSDictionary class]]){
        //NSDictionary *hash = result;
        NSLog(@"Birthday: %@", [result objectForKey:@"birthday"]);
        NSLog(@"Name: %@", [result objectForKey:@"name"]); 
    }
    if ([result isKindOfClass:[NSData class]])
    {
        NSLog(@"Profile Picture");
        //[profilePicture release];
        //profilePicture = [[UIImage alloc] initWithData: result];
    }
    NSLog(@"request returns %@",result);
    //if ([result objectForKey:@"owner"]) {}

}; 
```

不是我得到任何错误，只是我从来没有进入过负载......没有什么是 NSLOGing

我也在我的 iPhone 上登录了 Facebook ......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T23:37:08.003

这是因为您的请求不会成功。尝试实现以下委托以了解失败背后的原因：

```
 - (void)request:(FBRequest *)request didReceiveResponse:(NSURLResponse *)response;
 - (void)request:(FBRequest *)request didFailWithError:(NSError *)error; 
```

还要确保你的类符合协议`FBRequestDelegate`。

# visual-studio-2010 - Visual Studio - 滚动和移动光标

> ID：11588127
> 
> 赞同：1
> 
> 时间：2012-07-20T23:23:16.933
> 
> 标签：visual-studio-2010, viemu

作为前言，我使用的是 ViEmu，尽管我认为这不会影响任何事情。我只想在文本编辑器中向上滚动，同时将光标移动到相对的屏幕位置。

例如，如果我的文本编辑器显示 100 行可查看代码（1 - 100）并且我的光标位于第 20 行，当我向下滚动到下一个可查看的 100 行（101 -200）时，我希望光标位于120\.

使用 VS 命令 Edit.ScrollDown 按预期向下滚动代码，但将光标留在第 20 行而不是将其移动到 120。是否有另一个命令可以使用或任何方式来改变这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T11:53:56.440

如问题中所述，您似乎希望将 Page Down 重新映射到另一个键（由于键盘有限）。

要确定一个键映射到哪个命令，打开键盘自定义对话框，然后在短键文本框中输入当前键，然后查看它当前映射到的内容。

不幸的是，这不适用于向下翻页（控制向下翻页确实有效，但这在这里没有帮助）。

在命令过滤器中输入“page”会：`Edit.PageDown`在文本编辑器中映射到 Page Down。将此命令映射到另一个快捷方式。

# html - ... 在 iframe 中打开新目标时动态更新标签

> ID：11588130
> 
> 赞同：0
> 
> 时间：2012-07-20T23:23:47.400
> 
> 标签：html, iframe, hyperlink

我正在为我即将成立的业务开发一个网站，我决定开发一个单一的索引页面，其中导航按钮针对*iframe*而不是新窗口。每次在 iframe 中加载新目标时，我是否可以使用任何语言动态更新索引页面的*标题标签？*我将不胜感激对此的任何意见。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T23:44:19.810

使用 jQuery，代码看起来像这样：

```
​jQuery(document).ready(function(){
  jQuery('#myframe').load(function(){
    document.title="new title";
  });            
});​ 
```

**但是像这样构建您的网站有一些您可能需要考虑的严重缺点**：

*   如果人们在他们选择的搜索引擎中找到一些子站点，您将不得不考虑一种方式，他们将如何登陆顶部框架。
*   更改后的页面标题可能永远不会被搜索引擎使用，因为您使用 javascript 设置它（或第一个问题适用）。
*   Frames/Iframes 会导致 IE 中的内存泄漏（http://stackoverflow.com/questions/8407946/is-it-possible-to-use-iframes-in-ie-without-memory-leaks）。如果您的顶部框架不会不时重新加载，这可能只是一个问题。
*   当人们尝试打印您的网站时，可能会出现问题。
*   您的访问者在尝试为您网站的子网站添加书签时可能会遇到问题，因为只有顶部框架会被添加书签（而不是 iframe 的内容）。

...而且我确信这样的解决方案还有更多问题。

# javascript - 顶级/子级菜单上的 hide() 延迟问题但在鼠标再次进入时取消 hide()

> ID：11588131
> 
> 赞同：1
> 
> 时间：2012-07-20T23:23:47.593
> 
> 标签：javascript, jquery, css, drop-down-menu, menu

我在菜单中遇到了 onmouseout/over delay 问题。我发现通过将 setTimeout 数字从 100 更改为 2000 它会延迟顶级菜单的隐藏而不是子级菜单，并且在新的 onmouseover 上它们仍然隐藏，这就是我想要完成的：

在主菜单或主菜单和辅助菜单的 onmouseout 上，延迟隐藏 2-3 秒，但如果用户返回时使用 onmouseover 任一元素，它将取消延迟并继续显示它们。

我在网上找到的大多数帮助只是为了隐藏延迟，而不是在新的 onmouseover 上取消它。

这是我的代码：http: [//jsfiddle.net/MQ2cg/4/](http://jsfiddle.net/MQ2cg/4/)

```
jQuery.fn.hoverWithDelay = function (inCallback, outCallback, delay) {
    this.each(function (i, el) {
        var timer;
        $(this).hover(function () {
            timer = setTimeout(function () {
                timer = null;
                inCallback.call(el);
            }, delay);
        }, function () {
            if (timer) {
                clearTimeout(timer);
                timer = null;
            } else outCallback.call(el);
        });
    });
};
$(document).ready(function () {
    var hovering = {
        mainMenu: false,
        categories: false
    };

    function closeSubMenus() {
        $('ul.sub-level').css('display', 'none');
    }
    closeSubMenus();

    function closeMenuIfOut() {
        setTimeout(function () {
            if (!hovering.mainMenu && !hovering.categories) {
                $('#navigation').fadeOut('fast', closeSubMenus);
            }
        }, 100);
    }
    $('ul.top-level li').hover(function () {
        $(this).find('ul').show();
    }, function () {
        $(this).find('ul').hide();
        closeMenuIfOut();
    }, 100);
    $('#categories').hoverWithDelay(function () {
        $('#navigation').show();
        hovering.categories = true;
    },

    function () {
        hovering.categories = false;
        closeMenuIfOut();
    }, 175);
    $('#navigation').hover(function () {
        hovering.mainMenu = true;
    }, function () {
        hovering.mainMenu = false;
    });
    $('#categories').click(function () {
        window.location.href = $('a', this).attr('href');
    });
}); 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T23:42:06.883

this questions seem to be similar:

[JS for mouseover image upload button (like Facebook)](https://stackoverflow.com/questions/11588112/js-for-mouseover-image-upload-button-like-facebook)

as Amin Eshaq pointed out use mouseenter / mouseleave

here is working code:

```
 $(this).bind({
            'mouseenter' : function () {
                    timer = setTimeout(function () {
                            timer = null;
                            inCallback.call(el);
                    }, delay);
            },
            'mouseleave' : function () {
                    if (timer) {
                            clearTimeout(timer);
                            timer = null;
                    } else outCallback.call(el);
            }            
    }); 
```

# ruby-on-rails - 用于 RAILS / ActiveRecord 的 Cucumber BDD - 通过填充数据库层来加速慢速测试？

> ID：11588132
> 
> 赞同：4
> 
> 时间：2012-07-20T23:23:51.190
> 
> 标签：ruby-on-rails, ruby, activerecord, cucumber, bdd

我的公司正在将[Cucumber](http://cukes.info/) BDD 测试框架用于中等规模的 RAILS 应用程序。

它很慢。狗慢。仅我正在处理的单个黄瓜需要 30 到 40 秒才能运行，并且有几十个不同的测试文件。运行整个过程大约需要一个多小时。

稍微研究一下，有大量重复的数据库工作，但总数据量很小。例如，我看到缓慢的陈述，例如：

```
Given I have all the discussion threads for "fake user 47" 
```

这需要 1000 多毫秒。它唯一要做的就是从磁盘上的文件中取出几十行库存夹具数据，然后一次将一行加载到数据库中。这不是一个巨大的数据量，最多几个 KiB。但是一旦你把 ActiveRecord 处理的所有开销加起来，并将其转换为几十条 SQL 语句，然后同步执行跨进程 IPC 到 mysql 以执行所述语句......好吧，它似乎加起来了。

Mysql 本身不是这里的问题，切换到内存表 / 等对测试的运行时间几乎没有影响。黄瓜进程以大约 70% 的 CPU 利用率运行。

然而，访问数据库仍然是一项相当昂贵的操作，因为它是一个跨进程请求，必须经过多层适配器、数据驱动程序和封送处理等等，更不用说每个请求 2 次以上的上下文切换。

所以我的理论是，如果我们只是将数据存储在一个简单的哈希表中，那么测试会运行得更快。（查找如何在 Ruby 中进行分析，以便我可以证明这个理论）。

***是否可以使用已填充的进程内“模拟”数据库层来运行我们的测试套件？理想情况下，一些超级轻量级​​的东西，理想情况下甚至根本不需要处理 SQL，只需实现 ActiveRecord 期望的任何合同。***

此外，我们似乎多次执行相同的设置。一项测试会说*“鉴于我有数据 X”*并花费很长时间加载数据 X 以进行一些检查。然后另一个测试会说*“鉴于我有数据 Y”*，清除数据库，花费很长时间加载数据 Y，并进行一些检查。然后第三个测试说*“给定我有数据 X”*，清除数据库，并再次花费很长时间重新加载 X。当然，第四个测试可能再次使用数据 Y....

***是否有一种干净的模式可以跨场景重用测试初始化​​代码？或者缓存一个特定的初始化状态？***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T14:59:47.910

这可能不是您问题的完整答案。但至于问题的最后一部分，你可以使用[cucumber Global hooks](https://github.com/cucumber/cucumber/wiki/Hooks)。由于是集成测试，我建议您根据实际情况填充数据库。因此，在所有测试之前使用黄瓜钩子填充数据 X 和数据 Y 都是合适的。通过仔细计划，所花费的时间可能会得到相当多的优化。

# c# - 使用 C#/ASP.NET 开始学习 SQL

> ID：11588139
> 
> 赞同：5
> 
> 时间：2012-07-20T23:24:51.497
> 
> 标签：c#, asp.net, sql, ado.net

抱歉，如果在其他地方问过这个问题，但我在任何地方都找不到明确的答案。

我决定开始学习更多地使用关系数据库，即 SQL。这是一个主要的初学者问题，但它可能是入门的必要条件。

关于如何使用 SQL（或其他）的最佳实践，我基本上有点困惑。在大学时，我曾访问过数据库（使用 JSON 字符串）来获取移动应用程序等内容，但我自己从未真正设计和构建过数据库，因为我的导师为我们自己制作了上述数据库。

假设我有一个保存家谱信息（即家庭及其成员）的 C# 应用程序，我想将每个人存储在数据库中。我是否会简单地使用我已有的结构，但保存到数据库中的字段而不是 xml 或文本文档？或者它是否以其他方式工作，即我是否创建一个包含必填字段的数据库，然后从 ac# 应用程序中的数据库中检索它并按照我的意愿操作数据，所以应用程序将完全不同（所以 c# 应用程序基本上并没有真正保存/存储任何数据，只适用于从数据库提供的内容）？

令我困扰的是，通常我会将我的 c# 对象存储在字典或列表中，我会直接从数据库中检索吗？或从数据库中检索并将数据存储到正常结构中并从那里工作（这肯定会破坏从数据库中快速搜索的点）？

我可能有点想多了。希望这是有道理的。提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-21T04:47:56.683

> 我可以简单地使用我已经...的结构吗？

或者

> 我要创建一个包含必填字段的数据库...

我认为这是你问题的症结所在。

# 从数据库开始

对我来说，在构建使用后端数据库的应用程序时，实体关系图非常重要。我在这里为您找到了一个不错的小教程：http: [//www.sum-it.nl/cursus/dbdesign/english/index.php3](http://www.sum-it.nl/cursus/dbdesign/english/index.php3)但您可以轻松找到适合您学习风格的教程。关键是您正在尝试以您的应用程序可以以某种方式捕获的方式对问题域（需要您的应用程序的现实世界）进行建模。一旦你有了相关表的 ER 图，就更容易弄清楚细节。使用 SQL Management Studio for SQL Server 2008（Express 版），您可以创建一些基本表并在此处构建 ER 图并让它为您生成关系。然后，您可以在闲暇时检查用于实现该目标的 SQL 并进行相应的改进。

就个人而言，我总是从检查问题域开始，然后构建 ER 图，然后构建数据库。当我有理由确信数据库反映了问题域时，我开始构建 C# 应用程序。

# 从您的 C# 应用程序开始

然而，真正重要的是你以一种有意义且有效的方式对现实世界进行建模。在您的情况下，您已经在 C# 中创建的结构中有一个起点，您可以使用它们为您提供构建 ER 图的起点。如果您发现让 C# 应用程序运行起来更容易，然后构建一个反映它的数据库，那应该没问题。也许您已经有一种方法可以帮助您有效地捕获问题域。无论您做什么，这都是一个迭代过程：构建 C# 代码可能会揭示底层数据库设计的问题，反之亦然。

# 图表 - ER 还是 UML？

我个人确信整个业务是如此复杂，以至于您确实需要一些图表。

*   要可视化您的数据库，请使用 ER 图
*   使用 UML 类图可视化您的 C# 应用程序

当你走向一个工作的应用程序时，你会看到这两个图是如何开始匹配​​的，或者至少是非常接近地反映了彼此。在这两种情况下，（实体或类）在查询数据库时了解对象之间的关系非常重要，因为了解表之间的关系至关重要（尤其是使用一对多关系来解决复杂的多对多关系）和在查询中连接表的各种技术（INNER 或 OUTER 连接等）无论您的 C# 应用程序多么聪明，在某些时候您都需要至少了解 SQL 语言的一些复杂性——如果你可以参考ER图。

# 在哪里存放？

> 令我困扰的是，通常我会将我的 c# 对象存储在字典或列表中，我会直接从数据库中检索吗？

在数据库中，毫无疑问。名为 Family 的 AC# 类将有一个属性 FamilyName，例如，内置一个 setter 方法。如果您发现拼写错误并想更改名称，setter 方法将打开与数据库的连接，使用指定家族名称（可能还有家族 id）作为参数，并相应地更新基础字段。检索数据将涉及运行 SELECT 查询等。

# 结论

做一些关于如何检查问题域、创建实体关系图并基于该图构建一组相关表的教程。我相信通过这种方式，您会发现跟踪您为与后端数据库通信而构建的 C# 类会容易得多。

以下是家庭及其成员的简单 ER 图示例：

![简单的er图](../Images/e6f2e690edafa7710b8a20117b0e3e06.png)

一开始你可能会认为成员和家庭可能在一个表中，但随后你发现这会产生很多重复，因此你将其分离为具有一对多关系的家庭和成员表，但随后你意识到，例如，通过婚姻，人们可以属于多个家庭，您需要建立多对多的关系。我认为 ER 图是解决这种复杂性的最佳场所。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T23:31:20.227

不知道您的结构是什么样子或您的数据库将如何设计，这很难回答。但是您应该能够使用现有的数据结构，并且只需通过管道从数据库而不是 XML 文件中传输数据。

查看[Linq-to-XML](http://msdn.microsoft.com/en-us/library/bb386927.aspx)，C# 有一个强大的库来与 SQL 交互。一开始可能会有点混乱，但是一旦你学会了它就会非常强大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T23:37:48.243

如果我是对的，您还问是否应该从数据库中检索所有记录并将它们作为对象存储在集合中，或者从数据库中检索选定的记录并使用数据集结果而不将它们放置在目的定义的结构中。

我倾向于从数据库中选择我想要的记录，然后将结果加载到我专门定义的类/结构中。这允许您将操作方法​​添加到保存记录结果等的类中，而无需将数据集结果接收到每个方法中。但是，当批量更新可能更有效时，您会发现自己一直在进行单一更新……如果这有意义的话。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T23:46:30.660

首先看一下实体框架代码。如果您的数据结构是应用程序中的类，那么有一些技术可以使用它来创建您的数据库模式。就数据而言。将其存储在您的数据库中并用它填充您的列表和字典。或用它填充班级家谱个体列表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T07:27:41.810

如果您想编写自己的数据类，这里有一个我自己编写的免费[教程](http://www.wiseowl.co.uk/blog/s297/data-classes.htm)。我绝对不会使用 ASP.NET 中的数据源，因为这些向导是 ASP.NET 世界的 Barty Crouches - 它们看起来不错，但结果却是邪恶的，因为不可避免地你会想要能够调整它们，你将不明白如何做到这一点。

# java - 提高 Android 布局膨胀速度

> ID：11588141
> 
> 赞同：1
> 
> 时间：2012-07-20T23:24:52.773
> 
> 标签：java, android, optimization

我有一个 Android 游戏，其中包含一个屏幕，其中列出了所有正在进行的游戏、简短描述、对手名称和个人资料图片等。与 Zynga 的 With Friends 游戏非常相似。但是，当您有数十个正在进行的游戏都必须列出时，我总是在渲染游戏列表时遇到巨大的性能问题。

由于加载时间可能超过 5 秒，我认为是时候进行一些分析并找出瓶颈了。事实证明，大约 70% 的时间用于膨胀和初始化布局元素（这些元素已被最小化为尽可能平坦和轻巧），所以即使我可以优化其余代码以立即发生，加载从用户体验的角度来看，时间仍然是不可接受的。

由于额外的 UI 元素（例如按钮等）不遵循与游戏相同的模板，因此简单的 ListView 将无法工作。在 iOS 上，类似的结构几乎可以立即呈现，即使在 3GS 上也是如此，所以我希望类似动力的 Android 设备至少具有类似的速度。我有哪些选择可以减少用于布局膨胀和初始化的时间？

（如果您不知道它的样子，请参考与朋友的对话截图）![在此处输入图像描述](../Images/9700bb820d08eb68ee43d45409deca36.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T23:42:03.267

You should look at [this conference](http://www.youtube.com/watch?v=wDBM6wVEO70) about `ListView`. It teach how to implement it on a good way, doing as a minimum of allocation as possible. The content that could interest you begins at the 9th minute.

*   The first topic is to use the `convetView` provided by the `getView` function
*   The second one is to use a `ViewHolder` to improve the access speed

Another thing, you should try to manage your image loading to be sure that part is not blocking the rendering for a while.

There is a good tool to profile your application, to know what are the laggy functions in your code : [look at that here](http://developer.android.com/tools/debugging/debugging-tracing.html)

# java - 无法右键单击，Java Selenium WebDriver java.lang.UnsupportedOperationException: contextMenu

> ID：11588145
> 
> 赞同：2
> 
> 时间：2012-07-20T23:25:50.170
> 
> 标签：java, selenium, webdriver, contextmenu, right-click

这让我发疯，我只需要 WebDriver 右键单击​​一个元素，我的 selenium 的其余部分就可以工作了。

我正在使用 Eclipse，我所有的 .jar 导入和库都设置正确。

```
WebDriver driver = new FirefoxDriver();
String baseUrl = "http://............/";
selenium = new WebDriverBackedSelenium(driver, baseUrl); 
```

很久以后，在我的代码中，我在想要执行右键单击的 javascript portlet 行内左键单击，没有任何问题。

```
selenium.click("//tr[@id[contains(.,'Equipment')]]"); 
```

这工作得很好，被点击的行被突出显示，就像它应该做的那样。

现在我只需要右键单击它，但我不能！试：

```
selenium.contextMenu("//tr[@id[contains(.,'Equipment')]]"); 
```

无法右键单击，并返回错误：java.lang.UnsupportedOperationException: contextMenu。

在右键单击该行之前，有一个元素不被视为“可见”。它被检测为存在，但 selenium 不会运行它，除非我自己在 WebDriver 中运行时手动右键单击它以使其可见。否则，它只会给我这个：

com.thoughtworks.selenium.SeleniumException：元素当前不可见，因此可能无法与之交互。

右键单击该行是使元素“可见”的原因，这就是为什么我需要如此糟糕地右键单击 selenium。我已经测试以确保不可见元素被检测为存在，它是。

```
boolean exists = selenium.isElementPresent("//a[@id[contains(.,'faction')]]");
boolean visible = selenium.isVisible("//a[@id[contains(.,'faction')]]");
System.out.println("Exists: " + exists);
System.out.print("Visible: " + visible); 
```

给我

```
Exists: true
Visible: false 
```

换句话说，这不是我的 xpath 的问题。在那里。它只是不“可见”。我也尝试发送 Shift+F10 作为右键单击的替代品，不好。

这一切在 Selenium IDE 中运行良好，但我需要它与 WebDriver 一起使用，以便我可以在 Java 中处理它。请帮帮我。

编辑：感谢 Slanec 的建议和更多的操作构建器，我发现我的 selenium webdriver 不是最新的 Firefox 14 的问题。这很奇怪，考虑到我以为我刚刚在上周四下载了最新的. 无论哪种方式，显然直到 webdriver 2.25.0 才添加对 Firefox 14 的本机事件支持，而我使用的是 2.24.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T07:55:46.103

不幸的是，在查看[源代码](http://code.google.com/p/selenium/source/browse/trunk/java/client/src/org/openqa/selenium/WebDriverCommandProcessor.java#187)时，该`contaxtMenu()`方法尚未添加到 WebDriver 仿真中。它甚至不存在于`org.openqa.selenium.internal.seleniumemulation`所有其他方法（通过命令模式伪装的类）所在的包中。很可能，它没有被向后移植到`WebDriverBackedSelenium`它被引入的时候（Selenium RC 已被弃用并且没有在积极的开发中，记得吗？）。

你可以尝试的事情：

1.  如果仍然可以，请摆脱 Selenium RC。WebDriver API 更干净、更强大、更积极开发:)。要使用 WebDriver，您可以这样做

    ```
    WebElement elem = driver.findElement(By.xpath("//tr[@id[contains(.,'Equipment')]]"));
    new Actions(driver).contextClick(elem).perform(); 
    ```

2.  尝试使用您创建的 WebDriver 对象执行此任务，然后再次使用 Selenium。上面的两行代码在 Selenium 代码之间应该可以正常工作。

3.  自己实施。这并不难。只看`org.openqa.selenium.internal.seleniumemulation`包和`WebDriverCommandProcessor`类，添加`contextMenu()`方法如上所述。这将意味着从编辑的源代码构建您自己的 Selenium，但是，为什么不呢。

4.  最后的手段 - 找出隐藏元素正在等待什么动作并通过[`fireEvent()`](http://selenium.googlecode.com/svn/trunk/docs/api/java/com/thoughtworks/selenium/Selenium.html#fireEvent%28java.lang.String,%20java.lang.String%29)方法模拟事件。执行以下操作应该可以解决问题（如果没有，它只是在等待不同的事件）：

    ```
    fireEvent("//tr[@id[contains(.,'Equipment')]]", "contextmenu") 
    ```

* * *

作为旁注，而不是长

```
"//tr[@id[contains(.,'Equipment')]]" 
```

或者好一点

```
"//tr[contains(@id,'Equipment')]" 
```

你可以这样写：

```
"css=tr[id*='Equipment']" 
```

它不是更好一点，更具可读性吗？我对 XPath 也很满意，但是学习一些基本的 CSS 选择器（它可以做大部分，但绝对*不是*所有 XPath 可以做的）并不是那么可怕......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T05:52:56.537

也许你可以试试 selenium.contextMenuAt

# php - mod_rewrite 不接受 url 中的查询

> ID：11588146
> 
> 赞同：0
> 
> 时间：2012-07-20T23:25:56.397
> 
> 标签：php, mod-rewrite

下面的代码效果很好，但是如果我有一个 URL，例如 /calgary/dashboard.php?step=change-password PHP 将无法识别 $_GET['step']

我可以在这里更改什么以便我可以使用 $_GET['']

```
RewriteEngine On
RewriteBase /city_name

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.*)/$ /city_name/index.php?page=$1 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} /([^\./]+)\.php$
RewriteCond %{DOCUMENT_ROOT}/city_name/%1.php -f
RewriteRule ^(.*)/([^\./]+)\.php$ /city_name/$2.php?page=$1 [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T23:27:33.207

使用 QSA，

```
RewriteRule (.*)/$ /city_name/index.php?page=$1 [L,QSA]

RewriteRule ^(.*)/([^\./]+)\.php$ /city_name/$2.php?page=$1 [L,QSA] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T23:28:03.253

将查询字符串标志 (QSA) 添加到规则应该可以修复它，例如：

```
RewriteRule ^(.*)/([^\./]+)\.php$ /city_name/$2.php?page=$1 [QSA,L] 
```

# android - 如何在android中启动和停止声音？

> ID：11588152
> 
> 赞同：1
> 
> 时间：2012-07-20T23:26:31.813
> 
> 标签：android, android-mediaplayer

我有一个叫做“micro”的按钮，当我点击我的声音时，当我再次点击时它必须停止

我尝试了下面的代码，但是当我第二次单击我的按钮时，音乐会一次又一次地播放而不会停止：

```
 Button micro=(Button)findViewById(R.id.micro);          

        micro.setOnTouchListener(new OnTouchListener() {

            public boolean onTouch(View v, MotionEvent event) {
                if (event.getAction() == MotionEvent.ACTION_DOWN) {
                    MediaPlayer mp = MediaPlayer.create(getBaseContext(),
                            R.raw.mymusic);
                    mp.start();
                }
                if(event.getAction() == MotionEvent.ACTION_UP){
                     MediaPlayer mp = MediaPlayer.create(getBaseContext(),
                                R.raw.mymusic);
                        mp.stop();
                }
                return true;
            }

        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T23:32:28.987

您正在创建单独的`MediaPlayer`对象。你应该只创建一个你告诉它在必要时启动和停止。

现在你告诉一个开始，然后告诉另一个停止。

# windows-7 - Symfony2 Assetic 文件和 Windows 中缺少的路由

> ID：11588154
> 
> 赞同：0
> 
> 时间：2012-07-20T23:26:36.353
> 
> 标签：windows-7, symfony, assetic

我有一台 Linux 机器和一台 Windows 7 机器，它们都使用完全相同的代码（它们都使用相同的 git repo）。我在开发环境的两台服务器上运行 Symfony2 代码。

该网站在 Linux 服务器上加载并运行得非常好。在 Windows 7 服务器（我的本地笔记本电脑）上，服务器似乎缺少正确呈现站点所需的所有路由。例如：

1.  网站上没有加载任何 CSS 和 JS 文件。他们抛出 404 page not found 错误。
2.  如果我尝试从主页或登录页面导航到任何其他页面，总是会抛出 404 错误：在服务器上找不到请求的 URL。

我已经清除了缓存，并在 windows 框上运行了 app/check.php，但无济于事。我想知道是否需要以某种方式修改 Windows 服务器设置以使路由按预期工作？我认为问题在于 Windows 服务器上的路由，因为无法找到请求的 URL。

关于我可以去哪里找到解决方案或我可以执行任何测试来追踪问题的任何想法？谢谢， 井架

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T17:25:39.770

在 httpd.conf 文件中，您必须确保：

LoadModule rewrite_module modules/mod_rewrite.so

活跃。在我的 apache 2.2 windows 发行版中，它被注释掉了。我会建议 Symfony2 将这个模块添加到他们的 check.php 文件中，以供未来的开发人员使用。我猜他们只是假设它将始终在 apache 发行版中启用。

# javascript - 按下按钮时JS计时器未启动

> ID：11588155
> 
> 赞同：0
> 
> 时间：2012-07-20T23:26:37.333
> 
> 标签：javascript, timer

我已经看了几个小时，似乎无法理解为什么我的代码在按下按钮时没有启动计时器倒计时。任何帮助将不胜感激，谢谢！

HTML

```
<div id="timerHours">00</div>
<div id="timerMins">00</div>
<div id="timerSecs">00</div>
<input type="button" value="Start" onclick="startTimer()"/> 
```

JavaScript

```
var t;
var timerDefault = new Date();
timerDefault.setHours(0, 0, 0);

function setTimer(){
    var element = document.getElementById("timerHours");
    hours = parseFloat(element.innerHTML);
    element = document.getElementById("timerMins");
    minutes = parseFloat(element.innerHTML);
    element = document.getElementById("timerSecs");
    seconds = parseFloat(element.innerHTML);
    timerDefault.setHours(hours, minutes, seconds);
}

function startTimer() {
    setTimer();
    var h = timerDefault.getHours();
    var m = timerDefault.getMinutes();
    var s = timerDefault.getSeconds();
    h = (h < 10) ? "0" + h : h;
    m = (m < 10) ? "0" + m : m;
    s = (s < 10) ? "0" + s : s;
    document.getElementById("timerHours").innerHTML = h;
    document.getElementById("timerMins").innerHTML = m;
    document.getElementById("timerSecs").innerHTML = s;
    timerDefault.setSeconds(timerDefault.getSeconds() - 1);
    if (h == 0 && m == 0 && s == 0) clearTimeout(t)
    t = setTimeout(startTimer, 1000);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T23:37:05.853

您的“startTimer()”例程始终调用“setTimer()”，它根据 HTML 元素的内容（重新）初始化该 Date 对象。然后，该例程将秒数减 1，但它从不更新 HTML。因此，下次计时器关闭时，Date 实例（“timerDefault”）将重置为 00:00:00。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T23:54:04.600

通过对您的代码进行一些更改，您可以看到它倒计时了一点。

```
<div id="timerHours">00</div>
<div id="timerMins">00</div>
<div id="timerSecs">50</div>
<input type="button" value="Start" onclick="startTimer()"/>

var t;
var timerDefault = new Date();
timerDefault.setHours(0, 0, 0);

function setTimer(){
    var element = document.getElementById("timerHours");
    hours = parseFloat(element.innerHTML);
    element = document.getElementById("timerMins");
    minutes = parseFloat(element.innerHTML);
    element = document.getElementById("timerSecs");
    seconds = parseFloat(element.innerHTML);
    timerDefault.setHours(hours, minutes, seconds);
}

function startTimer() {
    setTimer();
    timerDefault.setSeconds(timerDefault.getSeconds() - 1);
    var h = timerDefault.getHours();
    var m = timerDefault.getMinutes();
    var s = timerDefault.getSeconds();
    console.log("Hi! " + h + " " + m + " " + s);
    h = (h < 10) ? "0" + h : h;
    m = (m < 10) ? "0" + m : m;
    s = (s < 10) ? "0" + s : s;
    document.getElementById("timerHours").innerHTML = h;
    document.getElementById("timerMins").innerHTML = m;
    document.getElementById("timerSecs").innerHTML = s;
    if (h == 0 && m == 0 && s == 0) clearTimeout(t)
    t = setTimeout(startTimer, 1000);
} 
```

# java - jsoup 空格错误和 td 类名失败

> ID：11588156
> 
> 赞同：1
> 
> 时间：2012-07-20T23:26:38.503
> 
> 标签：java, jsoup

我正在尝试使用 Jsoup 选择以下 HTML 片段中的段落：

> 块引用

```
 <td class="team team-a ">
              MyTeam
  </td> 
```

问题是，由于某种原因，Jsoup 似乎没有拿起“td class="team team-a " 在我看来空间问题。我试图格式化......

```
Elements team = document.select("td[class=team team-b ]");

Elements vendegCsapat_e = document.select("td.team team-b "); 
```

..但没有解决办法！:( 上面的代码可能是什么问题？thx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T00:05:35.477

您的 CSS 选择器不正确。要选择多个类，请使用：

```
Elements team = document.select("td.team.team-b"); 
```

如果您想知道您的原文是什么意思，`td.team team-b`在英语中将被读作“选择一个标签`team-b`，该标签来自一个标签`td`的类别`.team`”。 `team-b`不是一个有效的 HTML 标签，所以 Jsoup 没有选择任何东西。

# mongodb - 在 Mongo 上进行大数据查询的最佳方法是什么？

> ID：11588158
> 
> 赞同：2
> 
> 时间：2012-07-20T23:26:53.733
> 
> 标签：mongodb, mapreduce, bigdata

Mongo 支持 Map/Reduce 查询，但它们似乎不是 Hadoop 意义上的 map reduce（并行运行）。在庞大的 Mongo 数据库上运行查询的最佳方式是什么？我需要将其导出到另一个地方吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T00:04:52.753

根据您需要做什么，您的选择（在 Mongo 中时）是：

1) 继续在 Mongo 中使用 map/reduce，但为了 m/r 的目的启动一些辅助。这是一种比较简单的并行化 map reduce 的方法。但是有限制，您只能使用“out: inline”选项，因此结果需要为 ~16MB 或更少。这只有在你还没有分片的情况下才真正可行。

2) 查看 2.2 中的[聚合框架](http://docs.mongodb.org/manual/applications/aggregation/)（2.2.0-rc0 已经发布，我们发现它在 MongoHQ 中相当稳定）。这在 db 级别上得到了更好的优化，主要是让您远离 janky javascript 引擎，并且是 10gen 添加的更有趣的功能之一。它也可以在分片环境中工作。

对于上述任何一种情况，您都需要确保有足够的 RAM（或速度非常快的磁盘）来保存所有输入数据、中间步骤和结果。否则，您会受到 IO 速度的限制，并且无法从 CPU 中获得太多。

如果你想跳出 Mongo，你可以试试[Mongo Hadoop](https://github.com/mongodb/mongo-hadoop/)适配器。Hadoop 是一种更好的 map/reduce 方法，它可以让您使用 Mongo 数据作为输入。然而，这在操作上可能很复杂，这意味着要么付出高昂的努力，要么很脆弱。

# java - 使用 ZipOutputStream 在 java 中创建 ODT 文件时无法在 OpenOffice 中打开

> ID：11588164
> 
> 赞同：1
> 
> 时间：2012-07-20T23:27:37.533
> 
> 标签：java, zip, odt, opendocument, zipoutputstream

我有以下方法可以将 zip 条目添加到 ZipOutputStream：

```
 private void addFile(String filename, byte[] bytes, ZipOutputStream zos, boolean encrypt) throws IOException {
        ZipEntry entry = new ZipEntry(filename);
        if (encrypt) {
            entry.setMethod(ZipEntry.DEFLATED);
        } else {
            entry.setMethod(ZipEntry.STORED);
            CRC32 crc32 = new CRC32();
            crc32.update(bytes);
            entry.setCrc(crc32.getValue());
            entry.setSize(bytes.length);
            entry.setCompressedSize(bytes.length);
        }
        zos.putNextEntry(entry);
        zos.write(bytes);
        zos.flush();
        zos.closeEntry();
    } 
```

...我使用它打开一个新的 ZipOutputStream ( `ZipOutputStream zos = new ZipOutputStream(new BufferedOutputStream(new FileOutputStream(new File(path))));`)，将其方法设置为 DEFLATED ( `zos.setMethod(ZipOutputStream.DEFLATED);`)，然后调用以下文件（按顺序）：

1.  “mimetype”（对于这个文件，我将 ZipEntry 方法设置为 STORED）
2.  名为“META-INF”的子文件夹中的“manifest.xml” (META-INF/manifest.xml)
3.  “内容.xml”
4.  “样式.xml”
5.  “元.xml”
6.  “thumbnail.png”在名为“Thumbnails”的子文件夹中（“Thumbnails/thumbnail.png”）
7.  “设置.xml”

`zos.close();`...最后，我调用 ZipOutputStream ( )的 close 方法。

如果我尝试直接使用 OpenOffice 打开它，它会询问我要打开的文件类型，它说文件已损坏，最后它会打开文件...但是如果我解压缩文件（我是使用winrar），然后我用相同的工具（我的意思是winrar）再次压缩，OpenOffice能够毫无问题地打开文档......

有什么帮助吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T03:13:06.093

```
**I don't see a ZipEntry for the Directory META-INF/ to be added in your list of files, is the manifest.xml file ending up in the root directory? then again, that's not the problem I guessing.**

> 1\. "mimetype" (for this file, I set the ZipEntry method to STORED)
> 2\. "manifest.xml" in a subfolder called "META-INF" (META-INF/manifest.xml)
> 3\. "content.xml"
> 4\. "styles.xml"
> 5\. "meta.xml"
> 6\. "thumbnail.png" in a subfolder called "Thumbnails" ("Thumbnails/thumbnail.png")
> 7\. "settings.xml"

*That's why OO is freaking out for a moment and the and when you open it in winrar, winZip or any other zip utility and re-zip it, the utility will create the entry for the directories in the zipFile. by noticing that the file URL conforms to a valid path on the current OS, I beat if you took the bad zip file with not directory entries and opened in OO it may not be able to recover because the File.Separator is leaning the other way.*

*So In the case where you open it right in OO and it can't determine what type of content its opening maybe because it can't locate the manifest.xml which it would be expecting to unpack into the META-INF/ directory.*

*This causes a chain side effect. So when files that are inside directories are just seen as files with path "Configurations2/accelerator/current.xml" for example.  But because the Name or the String Representation of the Path does not include actual folders, its just a string that looks like a path and so OO thinks "Configurations2/accelerator/current.xml" is the name of the file. It does not recognize it as two directories with a file init.*

**so why does zip utility or OO it self fix it at some point?**

*what's most likely going on is when OO unpacks the files tries to find the manifest.xml named entry, but it cant find it there is a "META-INF/manifest.xml" named entry or resource but it does a compare == 0 and withInString to find the keys.*

*And this gets fixed when the application(s) write the entry "META-INF/manifest.xml" back into a zipped file, it because of the "/" knows that this is a path that contains directories and adds the directories as entries in the zip file, so when it reopens or when it recovers by trying to save-reload the document it now has a directory META-INF/ as a entry it adds that first then the manifest.xml file into that dir and the ODF structure is what it likes*

**Important: When Adding files Images, Data, Video, Audio or any type you should either: 
- Create a ZipEntry for each folder in the path. for /MyCustomImgDir/Trip/swimming.png
     -- Entry Name: MyCustomImgDir/ should be added as a directory entry
     -- and Entry Name: MyCustomImgDir/Trip/ should be added another directory entry
- OR you can add the file in the Meta-Inf/manifest.xml file and provide the full-path location so, OO can find-and-put it in the proper place.

**********************************************************************************
* Optianl Reading for more detail if you're not familir with zip files and paths *
**********************************************************************************
*  Why the below section? - I spent many years working on a platform that used   *
*                           the ODF format, when the API was limited and we were *
*                           and the only way to do many things was to rip aprt the*
*                            xml and add-delete-modify-move around the bytes all over*
*                           Major pain in the butt, I just want to same someonea few weeks*
*                           heck. (I can say that right?)
**********************************************************************************

So to further discuss and more details, Ex: I have a file.ods and when I list the contents of the file below is what I get with 15 files

kumar@PareshMacBookPro~/temp/eKits/variableData>unzip -l ../variabledata.ods 
Archive:  ../variabledata.ods
  Length     Date   Time    Name
 --------    ----   ----    ----
       46  04-11-08 18:36   mimetype
        0  04-11-08 18:36   Configurations2/statusbar/
        0  04-11-08 18:36   Configurations2/accelerator/current.xml
        0  04-11-08 18:36   Configurations2/floater/
        0  04-11-08 18:36   Configurations2/popupmenu/
        0  04-11-08 18:36   Configurations2/progressbar/
        0  04-11-08 18:36   Configurations2/menubar/
        0  04-11-08 18:36   Configurations2/toolbar/
        0  04-11-08 18:36   Configurations2/images/Bitmaps/
    61403  04-11-08 18:36   content.xml
     6909  04-11-08 18:36   styles.xml
     1037  04-11-08 18:36   meta.xml
     1355  04-11-08 18:36   Thumbnails/thumbnail.png
     7668  04-11-08 18:36   settings.xml
     1873  04-11-08 18:36   META-INF/manifest.xml
 --------                   -------
    80291                   15 files

*****************************************************************************
and Unziping it produces: (15 files, like it listed)

kumar@PareshMacBookPro~/temp/eKits>unzip -d variabledata variabledata.ods
Archive:  variabledata.ods
 extracting:/mimetype   
   creating:/Configurations2/statusbar/
  inflating:/Configurations2/accelerator/current.xml  
   creating:/Configurations2/floater/
   creating:/Configurations2/popupmenu/
   creating:/Configurations2/progressbar/
   creating:/Configurations2/menubar/
   creating:/Configurations2/toolbar/
   creating:/Configurations2/images/Bitmaps/
  inflating:/content.xml  
  inflating:/styles.xml  
 extracting:/meta.xml   
  inflating:/Thumbnails/thumbnail.png  
  inflating:/settings.xml  
  inflating:/META-INF/manifest.xml

*****************************************************************************
so from my unzipped files and folders I rezip it without any change and looking at results show:

kumar@PareshMacBookPro~/temp/eKits/variableData>zip -ru newDocZip.zip *
    zip warning: newDocZip.zip not found or empty
  adding: Configurations2/ (stored 0%)
  adding: Configurations2/accelerator/ (stored 0%)
  adding: Configurations2/accelerator/current.xml (stored 0%)
  adding: Configurations2/floater/ (stored 0%)
  adding: Configurations2/images/ (stored 0%)
  adding: Configurations2/images/Bitmaps/ (stored 0%)
  adding: Configurations2/menubar/ (stored 0%)
  adding: Configurations2/popupmenu/ (stored 0%)
  adding: Configurations2/progressbar/ (stored 0%)
  adding: Configurations2/statusbar/ (stored 0%)
  adding: Configurations2/toolbar/ (stored 0%)
  adding: META-INF/ (stored 0%)
  adding: META-INF/manifest.xml (deflated 83%)
  adding: Thumbnails/ (stored 0%)
  adding: Thumbnails/thumbnail.png (deflated 44%)
  adding: content.xml (deflated 89%)
  adding: meta.xml (deflated 59%)
  adding: mimetype (deflated 4%)
  adding: settings.xml (deflated 87%)
  adding: styles.xml (deflated 78%)

******************************************************************************
*****now there are 20 entries*******************
Why OO does not include a ZipEntry for folder that are in the middle of a path:

Example there is an entry at: Configurations2/accelerator/current.xml
but you do not see entries for directories:
 - Configurations2/
and
 - Configurations2/accelerator
Why Because it know when it keeps 

******************************************************************************

** Notice that mimetype is the first ZipEntry in the ZipFile created by OO and its anywhere and where ever when created by a zip utility**

*Notice the META-INF/ and Thumbnails/ other folders that are added in order (<em>parent dir before children's<em>)!*

**So lets check out the mimetype of the .ods and .zip file with command line util:**

kumar@PareshMacBookPro~/temp/eKits>file --mime variabledata.ods 
variabledata.ods: application/vnd.oasis.opendocument.spreadsheet; charset=binary

*you see that the mimetype shows as a application/spreadsheet and when you do the same for the new zip file (just rezipped unzipped ods content by zip util no changes to paths or files) you get:*
******************************************************************************

kumar@PareshMacBookPro~/temp/eKits/variabledata>file --mime newDoc.zip 
newDoc.zip: application/zip; charset=binary

*it's no loger a spreadsheet it is an actual zip file content type.*
******************************************************************************

*Also just for fun you may want to output the raw bytes in a command line or consol by just 'cat' or 'head' or 'print' on the same files. You get trash but somethings there if look closer.*
******************************************************************************

kumar@PareshMacBookPro~/temp/eKits/variabledata>head ../variabledata.ods 
PK???8?l9?.<em>mimetypeapplication/vnd.oasis.opendocument.spreadsheet<em>PK???8Configurations2/statusbar/???8'

**and re-zipped file, we've lost the content-type header and much more.**
******************************************************************************

kumar@PareshMacBookPro~/temp/eKits/variabledata>head newDoc.ods 
PK
u??@Configurations2/UT  ??  PF? Pux
                                           ?PK

******************************************************************************
***What to watch out for***
******************************************************************************

**It is not nesserry to have the content-type of the zip file as the <em>mimetypeapplication/vnd.oasis.opendocument.spreadsheet<em> it can be <em>applicatoin/zip<em> and openOffice will still be able to use it. The content-type is important to have there and correct, but for OpenOffice-Documents its more important to have the mimetype file in the root dir and have the META-INF/manifest.xml file in the directory META-INF/.  

- The application does not look at the extension to determine the file type the OS does to launch the linked application for that extension, and if there is non it tries to find the content-type from the file header and find the appropriate application to handel file. Note that you can assign .txt or .jpeg to open with openOffice and it will open it even though its not a zip file.

- OO tries to start by looking at the file header to find the content-type first but it can live with out it.

- It then tries to find manifest.xml file. It placed it there so it can trust it. From that file It makes a check list of stuff listed in the manifest.xml file and cross checks it against the actual files (ZipEntires) extracted from the ZippedFile.
  <em>Listed directories in the manifest.xml that are not in the zipContent as entries won't cause a problem long as its not expecting a file in that directory.<em>

- When it fails to read the file header (because its application/zip type), and the it does not have a mimetype.  It will wiggout and want to find out really bad what type this file is. Or if there is file (i.e. ZipEntry) missing or it thinks its missing becuase the name is full string literal with the full path it can't resolve it to a ZipEntry Name Key.  Even though, the real readable binary data is in the zip file, it will think something is wrong and ask to restore it but reproduce the zip content the best way it can.

- The ODF file is a zip format file but it's picky and expect things to in a certain place.  **

******************************************************************************
**So whats the fix to not have this problem? Simply: You need to recursively walk the directories adding sub-dirs and files all of them.**
******************************************************************************

**In more detail:**
1\. start at the root directory
2\. RootDirectory.listfiles()
2a. if the entry from listfile() 
    2a-1) if aFile from the list is a real file then add that as the zipentry as you would
      * then move on to the next item in your listfiles()
    2a-2) if aFile from the list is a directory you need to add that as a entry in the zipfile as a dir by appending "/" at the end of the path.
      * then again do a listfiles() on the directory to get files and dirs for the directory you just added and restart step 1\. with the sub-directory as the RootDirectory and add its dirs and sub-dirs and files.

******************************************************************************
*  other note to keep in mind:
******************************************************************************
** Of course there is the matter of using the right Encoding for the xml files and other files.  Windows defualts to ios-8859-1 and Linux/Unix/Mac defaults to UTF-8 when new OutputSteams and writers are create. so if somethings working in nix and not winders, good place to look is at your streams**
******************************************************************************

Thanks, I hope you had as much fun reading this as I did writing it.  I just hope it makes sense.

ps - sorry about the formatting job. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:48:37.340

我发现问题可能出在 Windows 上，您在传递给 ZipEntry 构造函数的文件名中提供反斜杠。我将它们更改为正斜杠，之后 OpenOffice 不再抱怨 odt 已损坏

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T05:34:58.600

劳尔，

看起来您的 zip 文件是完整且正确的，所以它不是导致问题的 zip 过程。

问题是当您的进程为 maniest.xml 文件创建 xml 文件时，doctype dtd 位置无效。

manifest.xml 中的行：

而且你在 zip 的根目录中有一个 manifest.rdf 文件，当你试图把东西重新组合在一起时，它会抛出 OO。我不知道您用于创建 OpenOffice 文档 XML 输出的过程，但这就是问题所在。您需要确保 DTD 的路径正确或从 XML 文件中删除 DOCTYPE。

以下是手动修复 OpenOffice ODT 文件的方法：

*   从 zip 根目录中删除 Manifest.rdf
*   从 META-INF/menifest.xml 中删除 DOCTYPE 行
*   为下面列出的目录添加清单条目（注意 Configurations2 条目中的差异）

    < manifest:file-entry manifest:media-type="" manifest:full-path="Configurations2/statusbar/"/>

    < manifest:file-entry manifest:media-type="" manifest:full-path="Configurations2/accelerator/current.xml"/>

    < manifest:file-entry manifest:media-type="" manifest:full-path="Configurations2/accelerator/"/>

    < manifest:file-entry manifest:media-type="" manifest:full-path="Configurations2/floater/"/>

    < manifest:file-entry manifest:media-type="" manifest:full-path="Configurations2/popupmenu/"/>

    < manifest:file-entry manifest:media-type="" manifest:full-path="Configurations2/progressbar/"/>

    < manifest:file-entry manifest:media-type="" manifest:full-path="Configurations2/toolpanel/"/>

    < manifest:file-entry manifest:media-type="" manifest:full-path="Configurations2/menubar/"/>

    < manifest:file-entry manifest:media-type="" manifest:full-path="Configurations2/toolbar/"/>

    < manifest:file-entry manifest:media-type="" manifest:full-path="Configurations2/images/Bitmaps/"/>

    < manifest:file-entry manifest:media-type="" manifest:full-path="Configurations2/images/"/>

**< manifest:file-entry manifest:media-type="application/vnd.sun.xml.ui.configuration" manifest:full-path="Configurations2/"/>**

我认为 winrar 可能会为您解决 dtd 路径问题。维修时打开办公室也是如此。OO 可以处理没有定义 DTD，它知道要查找什么，但它不喜欢糟糕的 DTD

希望能为您解决。不过，我想知道您使用什么来编写 XML。

# eclipse - Eclipse Core Expressions 对象属性

> ID：11588165
> 
> 赞同：0
> 
> 时间：2012-07-20T23:27:41.280
> 
> 标签：eclipse

所以，我有一个核心表达。它有一个`with`元素可以检索我的变量（成功）。说我的变量是类型`java.awt.Point`；因此它有两个公共属性，`x`和`y`。有没有办法在核心表达式中测试这些属性？

如果有某种方式我可以提供我自己的 实现`org.eclipse.core.expressions.Expression`，那将起作用。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T03:59:08.253

我认为您可以通过创建一个[propertyTester](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/extension-points/org_eclipse_core_expressions_propertyTesters.html)来做到这一点，该propertyTester可以使用您的自定义代码对您的变量做出正确的反应。

# android - AdMob 简单教程不起作用

> ID：11588167
> 
> 赞同：0
> 
> 时间：2012-07-20T23:28:00.427
> 
> 标签：android, eclipse, jar, admob, adview

我正处于为 Android 开发游戏的早期过程中，我正在尝试使用 AdMob 合并一个广告横幅。我已经直接从官方[网站](https://developers.google.com/mobile-ads-sdk/docs/android/fundamentals#addadview)上的教程下载了示例，所以我想无论我在这里做错什么都必须是基本的，因为在我的 Galaxy S2 设备上调试时它会在几秒钟后崩溃。请帮忙。

```
package com.google.example.ads.fundamentals;

import com.google.ads.AdRequest;
import com.google.ads.AdSize;
import com.google.ads.AdView;
import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.telephony.TelephonyManager;
import android.widget.LinearLayout;

/**
 * A simple {@link Activity} that embeds an AdView.
 */
public class BannerSample extends Activity {

  private AdView adView;
  private final TelephonyManager tm =
      (TelephonyManager)getBaseContext().getSystemService(Context.TELEPHONY_SERVICE);

  private final String AD_MOB_ID = "my AdMob ID goes here";

 /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Create an ad.
    adView = new AdView(this, AdSize.BANNER, AD_MOB_ID);

    // Add the AdView to the view hierarchy. The view will have no size
    // until the ad is loaded.
    LinearLayout layout = (LinearLayout) findViewById(R.id.linearLayout);
    layout.addView(adView);

    AdRequest adRequest = new AdRequest();
    adRequest.addTestDevice(tm.getDeviceId());

    // Start loading the ad in the background.
    adView.loadAd(adRequest);
  }

  /** Called before the activity is destroyed. */
  @Override
  public void onDestroy() {
    // Destroy the AdView.
    if (adView != null) {
      adView.destroy();
    }

    super.onDestroy();
  }
} 
```

屏幕截图中的 Logcat 数据在[这里](http://oi48.tinypic.com/350s8yf.jpg)

编辑：还添加了 Manifest.XML，我怀疑这是导致问题的原因 - 令人惊讶的是，来自官方网站的示例附带的一个错误（根据 Eclipse），所以我不得不对其进行一些修改：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.myapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="3"
              android:targetSdkVersion="13" />
        <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name">
        <activity
            android:name=".HelloAdMobActivity"
            android:label="@string/app_name"
            android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"
            android:screenOrientation="landscape" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
            </activity>
        <activity android:name="com.google.ads.AdActivity"
                  android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"
              android:screenOrientation="landscape" >
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T01:25:18.827

Logcat 信息会非常有用，但我打赌这两个原因之一：

1.  您将 SDK 引用为外部 Jar，并没有将其添加到您的`libs/`文件夹中。您有两个选项可以解决此问题：将其添加到您的`libs/`文件夹中，或者转到属性 -> Java 构建路径 -> 订购和导出并检查 AdMob jar。
2.  您的 XML 中没有带有`android:id="linearLayout"`. 这不太可能，因为示例项目应包含此内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T22:10:59.577

好吧，事实证明问题出在`tm.getDeviceId()`，无论出于何种原因导致程序崩溃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-20T14:50:21.940

您需要添加以下权限。

```
<uses-permission android:name="android.permission.READ_PHONE_STATE"/> 
```

# jquery - 使用 jquery ajax 功能登录 wordpress

> ID：11588169
> 
> 赞同：1
> 
> 时间：2012-07-20T23:28:02.157
> 
> 标签：jquery, ajax, wordpress, login

我正在尝试为 Wordpress 项目创建一个单独的登录页面。这个登录的方法是通过jquery ajax 将登录发送到wp-login.php。

```
var dataString ='log="'+$('#user_login').val()+'&pwd='+$('#user_pass').val()+'"&redirect_to=&testcookie=1&wp-submit=Log+In';

    $.ajax({
    type: "POST",
    url: "agents/wp-login.php",
    data: dataString,
    }).done(function( msg ) {
        $.ajax({
            type: "POST",
            url: "mworkFile.php",
            data: { task: "FirstLoad"}
        }).done(function( msg ) {
            $('#masterdiv').html(msg);
            lsoff();
        });
    });
    }); 
```

我正在使用 mworkfile 来检查用户是否已登录，但我无法做到那么远。我想我可能在 URL (dataString) 中遗漏了一些东西。我已经验证数据正在进入 /wp-login.php 并且用户名和密码是正确的。当我尝试通过 chrome 传递此信息时，它只会再次将我发送回登录屏幕。这是我试过的网址。www.website.com/agents/wp-login.php?log=TheUsername&pwd=ThePW&redirect_to=&testcookie=1&wp-submit=登录。

# php - 提交到 PHP mySQL db 后表单重定向

> ID：11588171
> 
> 赞同：0
> 
> 时间：2012-07-20T23:28:03.317
> 
> 标签：php, mysql, html, forms, redirect

我需要重定向提交，以免用户进入空白屏幕。

这是我的表单的代码::

```
<form action="giveaway_execute.php" method="post">
    First Name:
    <input type="text" name="firstname" /><br />
    Last Name:
    <input type="text" name="lastname" /><br />
    etc...
    ...
    ...
    <p><input type="submit" value="Submit"/>
    </p>
    </form> 
```

这是'giveaway_execute.php'的php，它与mySQL db交互（一切都提交；为安全起见，删除了密码和数据库名称）::

```
<?php 

define ( 'DB_NAME','xxxx');
define ( 'DB_USER','xxxx');
define ( 'DB_PASSWORD','xxxx');
define ( 'DB_HOST','localhost');

$link = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);

if (!link) {
die('Could not connect: ' .mysql_error());
}

$db_selected = mysql_select_db(DB_NAME, $link);

if (!$db_selected) {
die('Can\'t use ' . DB_NAME . ': ' . mysql_error());
}

$value1 = $_POST['firstname'];
$value2 = $_POST['lastname'];
$value3 = $_POST['phone'];
$value4 = $_POST['street'];
$value5 = $_POST['city'];
$value6 = $_POST['state'];
$value7 = $_POST['zip'];
$value8 = $_POST['email'];
$value9 = $_POST['weddingdate'];

$sql = "INSERT INTO entrants (firstname, lastname, phone, street, city, state, zip, email, weddingdate) VALUES ('$value1', '$value2', '$value3', '$value4', '$value5', '$value6', '$value7', '$value8', '$value9')";

 if (!mysql_query($sql)) {
die('Error: ' . mysql_error());
}

mysql_close();
?> 
```

我已经尝试对 PHP 文件进行重定向，但没有任何效果。任何建议将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T23:34:32.850

完成数据库操作后，您可以只是`include`另一个页面，或者按照建议您可以使用`header`调用，但请务必使用绝对 url。

另外值得注意的是，您的代码极易受到`SQL injection`.

`isset`如果未设置字段，最好在字段上使用以避免收到通知和 SQL 错误。

最后，建议使用诸如`PDO`或`mysqli`超过旧的 mysql_* 扩展的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T01:15:13.413

```
// process.php
$db = new PDO('mysql:host=localhost;dbname=test', 'root', 'root');
if(isset($_POST['value'])){
  error_log(print_r($_POST,1),0);
  $db->query('INSERT INTO test (id, value) VALUES (NULL, "'.$_POST['value'].'")');
  header('Location: http://google.com');
  exit();
}
else {
  echo "$_POST is not set.";
}

// form.php
<form action="process.php" method="post">
  <input type="text" name="value">
  <input type="submit" id="submit-btn" value="Submit">
</form> 
```

尝试一些更简单的东西并从那里构建。另请阅读：[http ://www.php.net/manual/en/pdo.prepared-statements.php](http://www.php.net/manual/en/pdo.prepared-statements.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T23:30:11.700

尝试

```
header('location:page2.php'); 
```

在文件的末尾。

将 page2.php 替换为您要将它们发送到的实际页面

# c# - 我应该担心这个 DateTime 数学会丢失精度吗？

> ID：11588174
> 
> 赞同：2
> 
> 时间：2012-07-20T23:28:36.067
> 
> 标签：c#, datetime, floating-point, resharper, precision

这段代码：

```
if (dt.Subtract(prevDt).TotalMinutes == 15) 
```

（“dt”和“prevDt”是包含诸如“7/20/2012 7:30:00 AM”和“7/20/2012 7:45:00 AM”等值的日期时间变量）

...导致 ReSharper 警告我：

*“浮点数与等式运算符的比较。四舍五入时可能会丢失精度。”*

这是一个有效的警告吗？如果是，我将如何安抚它？我希望 ReSharper 更像 Eclipse，它可以解决它抱怨的问题。

无论如何，代码似乎运行良好，但如果这是代码气味，我宁愿不让它臭臭。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T23:31:09.023

如果你确定你的时间戳正好在 15 分钟的边界上，而不是几毫秒，那么你的代码就可以正常工作。可以精确表示为 an 的`int`值也可以精确表示为 double。

如果您想尝试重写代码以避免警告，您可能想尝试以下操作：

```
if (prevDt.AddMinutes(15) == dt) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T23:31:43.373

不，如果您的日期总是正好相隔 15 分钟，否则没有秒或毫秒（或滴答声）的差异，这不是一个有效的警告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T23:45:04.723

您可以将[Minutes](http://msdn.microsoft.com/en-us/library/system.timespan.totalminutes)与所有其他属性（天/小时...）一起使用来比较您关心的部分的 TimeSpan（即忽略秒）。

否则，如果您的值可能包含秒/毫秒，则最好检查 TotalMinutes 是否不会太远而不是完全匹配。

# jquery - 使用 Backbone.js 从 $.get 内部访问 this.model

> ID：11588177
> 
> 赞同：2
> 
> 时间：2012-07-20T23:29:57.377
> 
> 标签：jquery, backbone.js, scope, mustache

我将[Mustache.js](https://github.com/janl/mustache.js/)与[Backbone.js](http://backbonejs.org)一起用于我的应用程序的模板系统。我将模板存储在`<script></script>`块内的外部 .html 文件中。每个脚本块都有一个唯一的 ID，我用它来使用 jQuery.get() 获取模板。

所以我的视图渲染函数如下所示：

```
render: function(){
    $.get('templates/templates.html', function(templates) {
        try {
            var template = $(templates).filter('#tpl-MediaView').html();
            return mustache.render(template, this.model.toJSON());

            this.playlist.each(function(media) {
                var mediaView = new MediaView({model: media});
                this.$('#playlist').append(mediaView.render());
            });
        } catch(e) {
            alert(e.message);
        }
    });
} 
```

我遇到的问题是`this.model.toJSON`从 $.get() 内部访问。我尝试将值分配给外部变量并将其传入。我也尝试在外部运行 return。我也尝试过使用 $.ajax()。处理此范围问题的最简单方法是什么？

- 更新 -

我应该补充一点，我收到的这段代码的错误是：

> 无法调用未定义的方法“toJSON”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T23:39:16.587

> 无法调用未定义的方法“toJSON”

这意味着`this.model`返回未定义，这意味着`this`不是你想的那样。可悲的是，它实际上是全局对象。任何时候你传递一个函数引用，它都会丢失上下文。

> 我已经尝试将值分配给外部变量并将其传入。

你？因为听起来是对的，而且这通常是如何完成的。

通常你保存`this`到封闭函数之外的局部变量。然后在函数中使用它而不是 self.

```
render: function(){
    var self = this; // or some like "var that = this"
    $.get('templates/templates.html', function(templates) {
        //...
        self.model.toJSON()
        //...
    });
} 
```

您还可以`bind`针对特定上下文运行，尽管并非所有浏览器/运行时都完全支持这一点。

```
render: function(){
    $.get('templates/templates.html', function(templates) {
        //...
        this.model.toJSON()
        //...
    }.bind(this));
} 
```

* * *

而且我知道您没有在这里询问 CoffeeScript，但是如果您想切换它，它有一个非常棒的功能可以解决这个问题。箭头`->`声明了一个普通函数，但粗箭头`=>`声明了一个绑定函数，它保留`this`了函数之外的任何内容，基本上是在`var self = this`无形中为你做这个把戏。所以这里的代码可以正常工作。

```
render: ->
    $.get 'templates/templates.html', (templates) =>
        # ...
        this.model.toJSON()
        # ... 
```

# powershell - PowerShell 无法识别基本命令？术语“get”未被识别为 cmdlet 的名称（错误）

> ID：11588182
> 
> 赞同：1
> 
> 时间：2012-07-20T23:30:32.090
> 
> 标签：powershell

我正在尝试学习如何编写 PowerShell 脚本，我尝试输入一个基本的 get 命令，例如：

`get help get`

我收到一条错误消息，提示“‘get’一词未被识别为 cmdlet 的名称。

几乎我尝试输入的每个命令都会给我一个类似的错误，

我想知道是否有人可以建议如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T23:32:29.877

该 cmdlet 名为`Get-Help`. 注意连字符。事实上，所有 cmdlet 都遵循*动词*-*名词*结构。并且始终在两者之间使用连字符。

# python - python中的负列表索引

> ID：11588183
> 
> 赞同：0
> 
> 时间：2012-07-20T23:30:38.577
> 
> 标签：python

Python 菜鸟在这里。给定列表中的索引 i ，是否有任何内置方法可以找到它的负索引。目前我正在使用：

```
neg_index = i - len(list) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T23:38:12.860

您提出的解决方案可以直接从负索引的定义推导出来：python 隐式添加`len(list)`到传递的负索引。所以，没关系。

但是你需要找到负索引有点奇怪。我认为这个任务并不典型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T23:41:57.003

Your solution is correct, there is no better way to do that.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T03:17:00.550

如果你不喜欢它看起来这样做的方式，你可以创建一个函数来为你做这件事。

如果您对函数不太了解，可以在[此处找到有关它们的教程](http://www.penzilla.net/tutorials/python/functions/)

```
def negIndex(array, index):
    return index - len(array) 
```

那么你可以像这样使用它

```
array = [1,2,3,4,5]
index=2
print index #2
print array[index] #3

newIndex = negIndex(array, index)
print newIndex #-3
print array[newIndex] #3 
```

或者如果你不想更技术，你可以用这个函数作为一个属性来创建一个类。在这个例子中，我们继承了类 'list'，所以 negIndexClass 拥有列表类所拥有的一切，加上一个 negIndex 函数

```
class negIndexClass(list):
    def negIndex(self, index):
        return index - len(self) 
```

所以这将像这样使用：

```
array = negIndexClass( [1,2,3,4,5] )
index=2
print index #2
print array[index] #3

newIndex = array.negIndex(index)
print newIndex #-3
print array[newIndex] #3 
```

# jquery - 按降序对原始表进行排序

> ID：11588184
> 
> 赞同：1
> 
> 时间：2012-07-20T23:30:53.627
> 
> 标签：jquery, datatables

所有，我正在使用以下利用数据表插件的主题：

[http://revaxarts-themes.com/whitelabel/datatable.html](http://revaxarts-themes.com/whitelabel/datatable.html)

除了一件事，一切都很好。我试图在加载时按第一列的降序对表进行排序。目前它仅按升序对其进行排序。这是一个 JS Fiddle，其中包含主题中的 JS 文件：

[http://jsfiddle.net/nHejP/](http://jsfiddle.net/nHejP/)

我在那里找到了这条线（第 1077 行）：

```
/*
* Variable: aaSorting
* Purpose:  Sorting information
* Scope:    jQuery.dataTable.classSettings
* Notes:    Index 0 - column number
*           Index 1 - current sorting direction
*           Index 2 - index of asSorting for this column
*/
this.aaSorting = [ [0, 'asc', 0] ]; 
```

我将其更改为以下值：

```
this.aaSorting = [ [0, 'desc', 0] ]; 
```

这仍然按升序对我的初始列进行排序。我必须设置另一个值吗？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T00:03:46.010

您是否在[此处查看过 datatable 的文档](http://datatables.net/release-datatables/examples/basic_init/table_sorting.html)。您应该在首次初始化数据表时传入排序顺序，而不是修改原始源代码。

`aaSorting`您可以像这样使用属性传递排序顺序

```
$(document).ready(function() {
    $('#example').dataTable( {
        "aaSorting": [[ 0, "desc" ]]
    } );
} ); 
```

[**jsFiddle在这里**](http://jsfiddle.net/uHHGw/)

# mongodb - 想要将图像从给定的 URL 存储到 gridfs

> ID：11588189
> 
> 赞同：4
> 
> 时间：2012-07-20T23:31:10.693
> 
> 标签：mongodb, mongodb-.net-driver, gridfs

是否可以直接将图像存储到 mongo GridFS 的 URL，我从 API 获得？还是我必须将其存储在本地，然后将其插入 mongo？

我尝试直接从 URL 插入，但 C# 驱动程序给了我一个错误，即不支持 URI。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-21T13:17:35.040

MongoGridFS 类实现了 .NET 的流 API，因此您应该能够使用[MemoryStream](http://msdn.microsoft.com/en-us/library/system.io.memorystream.aspx)来保存 Web 响应并插入到 GridFS。

```
try
{
    var server = MongoServer.Create("mongodb://192.168.1.8:27017/imgdb?safe=true");
    var db = server.GetDatabase("imgdb");

    string fileName = "logo-mongodb.png";

    // Get image from URL or API    
    WebRequest req = WebRequest.Create("http://media.mongodb.org/" + fileName);
    WebResponse response = req.GetResponse();
    Console.WriteLine("Response length is " + response.ContentLength + " bytes");

    // Copy from WebResponse to MemoryStream
    MemoryStream memStream;
    using (Stream responseStream = response.GetResponseStream())
    {
        memStream = new MemoryStream();

        byte[] buffer = new byte[1024];
        int byteCount;
        do
        {
            byteCount = responseStream.Read(buffer, 0, buffer.Length);
            memStream.Write(buffer, 0, byteCount);
        } while (byteCount > 0);
        responseStream.Close();
    }

    // Reset to beginning of stream
    memStream.Seek(0, SeekOrigin.Begin);

    // Save to GridFS    
    var gridFsInfo = db.GridFS.Upload(memStream, fileName);

    // Success!
    Console.WriteLine("Success!");
}
catch (Exception err)
{
    Console.WriteLine("Something went wrong: "+err.Message);
} 
```

# ios - APNs AdHoc 测试

> ID：11588195
> 
> 赞同：0
> 
> 时间：2012-07-20T23:32:12.340
> 
> 标签：ios, push-notification, apple-push-notifications

我知道这样的问题一定被问了很多。

**案例** - 我在 Distribution AdHoc 配置文件上对我的应用程序进行了代码设计。我已经在我的服务器上安装了我的生产推送 SSL 证书 p12 来推送消息。

消息正在从服务器成功推送，但未在设备上接收。

现在，在进一步挖掘之后，我读到沙盒和网关的设备令牌应该不同。如果 APNs 返回的设备令牌依赖于 aps-environment 字符串值，则有意义。所以，我确实从通知中注销了该应用程序。

`[[UIApplication sharedApplication] unregisterFromRemoteNotifications];`

使用上面提到的代码执行应用程序。然后删除代码并再次使用 APNs 注册应用程序。注册成功了，但是我收到的设备令牌没有改变，还是一样的。

我从服务器推送了一条消息。并检查了设备的控制台日志。（我确实使用 AdHoc 分发配置文件签署了应用程序并检查了控制台日志）。我在日志中收到以下内容：-

`apsd[301] <APSCourier: 0x119f60>: Connecting courier stream using DNS TXT record at sandbox.push.apple.com and port TCP 5223`

`apsd[301] <Warning>: Fall back to alternate interface was disabled`

`apsd[301] <Warning>: Wake schedule completed for 2012-07-20 18:45:58 GMT (took 0.070 seconds)`

`apsd[301] <Warning>: Interface manager: Binding stream to WWAN context kCTDataConnectionServiceTypeInternet`

`apsd[301] <Warning>: <APSCourier: 0x119f60>: Connecting to courier 10-courier.sandbox.push.apple.com.`

从服务器发送的所有消息都记录在设备的控制台中，但从未弹出。我猜操作系统会丢弃它们。

现在的问题，

1.  为什么令牌没有改变？

2.  为什么应用程序在 AdHoc Distribution 配置文件上构建时尝试调用 sandbox.push.apple.com 而它应该尝试调用 gateway.push.apple.com ？

3.  当我使用 3G 连接时，为什么要使用端口 5223？

4.  为什么不显示推送弹出窗口？

我没有想法，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T20:15:00.727

该应用程序在 24 小时后开始按预期运行。我猜有类似批处理的东西，用于使用 APNs 的相关服务器更新令牌。

# google-maps - Google Maps API v3：未删除标记

> ID：11588201
> 
> 赞同：9
> 
> 时间：2012-07-20T23:33:11.700
> 
> 标签：google-maps, google-maps-api-3

我正在创建一个基于边界框和缩放级别加载和销毁标记的地图。我在正确删除标记时遇到了真正的问题，它似乎有时在某些情况下有效。

我有一个包含标记信息的对象，其中还包含谷歌地图标记对象。我的代码根据边界框或缩放级别检测是否应该删除市场。我将标记对象设置为“setMap(null);” 并且使用萤火虫我可以看到它被设置，然后我完全删除父对象并且对象数据长度被正确更新。

当一个标记被删除时，我输出到萤火虫控制台，似乎正在工作，我可以看到标记没有从 ajax 调用重新创建边界框更改上的标记。

然而，如果我放大地图，我有时会看到标记被移除，如果我缩小，然后按住鼠标平移回来。或者，如果我第一次缩小，有时标记会全部被删除，但如果我再次放大，那么它们不会被删除。

我的代码逻辑一定有问题，我很难过。

可以查看 [http://www.trailforks.com/map/test.php?lat=49.352247&lon=-123.202413](http://www.trailforks.com/map/test.php?lat=49.352247&lon=-123.202413) 的 源码[http://www.trailforks.com/map/includes/map.js](http://www.trailforks.com/map/includes/map.js)

删除标记的代码在底部

```
function clearMarkerMemory(mapItem, i) {
  google.maps.event.removeListener(mapItem.lis);    // remove stored listener

  mapper.data[i].obj.setMap(null); // remove marker
  mapper.data.splice(i, 1);

  console.log("removed marker "+mapItem.icon+":"+mapItem.nid+' '+mapItem.name);
}; 
```

我在控制台中添加了更多调试，转到地图的一个简单区域，只有 2 个标记[http://www.trailforks.com/map/test.php?lat=49.43210641783767&lon=-123.49878636730955&z=14](http://www.trailforks.com/map/test.php?lat=49.43210641783767&lon=-123.49878636730955&z=14)

我可以看到创建的标记，然后稍微移动地图并看到标记没有重新创建，因为它们是在标记对象中检测到的。然后我移动视口，使其中一个标记离开屏幕，我可以看到标记已被移除并且标记对象长度更新。但是，如果我将地图平移回标记上，它仍然在地图上。

![在此处输入图像描述](../Images/ac556abb1eb5676624166470854f010d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T08:39:20.433

我一直在为类似的问题苦苦挣扎，直到我意识到地图标记的 setMap 方法是异步的。当您调用它并立即删除对该标记对象的任何引用时，浏览器的垃圾收集器会介入并从内存中清除它，从而阻止实际的删除操作发生。

通过使用 splice 调用注释掉该行来尝试一下，看看是否有帮助。如果确实有帮助，您应该考虑延迟删除对象，或者存储对标记对象的引用，直到它真正被删除。如何检测它是否真的被删除？我不知道。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T08:21:01.660

而不是这样做：

```
 google.maps.event.addListener(map, 'dragend', function() {  refreshMarkers(); }); //refresh markers when user moves map
 google.maps.event.addListener(map, 'zoom_changed', function() {  refreshMarkers(); }); //refresh markers when user moves map 
```

将其更改为：

**编辑，（评论后）：**

为了防止事件处理程序的多个实例同时发生，可以使用全局变量，如下所示：

```
google.maps.event.addListener(map, 'bounds_changed', function() {  
if (processing) { // var processing is global
    return;
}
processing = true;
refreshMarkers(); 
processing = false;

}); //refresh markers when user moves map 
```

这应该涵盖这两种情况。现在，使用两个不同的事件侦听器，AJAX 调用可能会发生冲突，您可能会在第一个调用完成之前触发第二个调用。

# php - 冲洗和 ob 冲洗不起作用

> ID：11588204
> 
> 赞同：0
> 
> 时间：2012-07-20T23:33:17.540
> 
> 标签：php

这是我的代码。和功能不起作用`ob_flush()`。`flush()`为什么？

```
<?php
function get_headers_curl($url)
{
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL,            $url);
    curl_setopt($ch, CURLOPT_HEADER,         true);
    curl_setopt($ch, CURLOPT_NOBODY,         true);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_TIMEOUT,        4);
    $r = curl_exec($ch);
    $r = split("\n", $r);
    return $r;
} 

$urls = file('users.txt', FILE_IGNORE_NEW_LINES);
foreach ($urls as $url) {
    $headers = get_headers_curl(trim($url));
    if (false !== stripos(implode("\n", $headers), "Apache")) {
        echo "$url ====> ok" ;
        ob_flush();
        flush();
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T23:38:55.500

如果您在使用 flush 命令时遇到问题，则需要检查一些事项。

在 php.ini 文件（或 ht 访问，甚至在脚本中）设置以下值

```
output_buffering 0
zlib.output_compression = Off
zlib.output_compression_level = -1

default_charset = "utf-8" 
```

我还注意到您的代码中没有 ob_start

# cakephp - PHP/NuSOAP 设置soap：地址位置

> ID：11588206
> 
> 赞同：0
> 
> 时间：2012-07-20T23:33:56.573
> 
> 标签：cakephp, soap, nusoap

我正在使用 WAMP 和 CakePHP，并尝试在混合中添加一个 NuSOAP 服务器。我可以通过 NuSOAP 生成一个动态 WSDL，但是在底部有一个由 NuSOAP 设置的参数，并且没有任何意义：

```
<soap:address location="http://localhost/cakephp/app/webroot/index.php"/> 
```

正确的行是：

```
<soap:address location="http://localhost/cakephp/web_service/web_service"/> 
```

我无法弄清楚如何更改它，甚至根本无法弄清楚 NuSOAP 在哪里获取该位置（我的代码中绝对没有引用它）。

这是我正在使用的代码：

```
 class WebServiceController extends AppController {
        var $components = array('RequestHandler');
        public function web_service()
        {
            $this->layout = FALSE;
            $this->autoRender = FALSE;
            Configure::write('debug', 0);
            $this->RequestHandler->respondAs('xml');
            App::import('Vendor', 'nusoap', array('file' => 'nusoap'.DS.'lib'.DS.'nusoap.php'));
            include 'local_functions.php';
            if ( !isset( $HTTP_RAW_POST_DATA ) ) $HTTP_RAW_POST_DATA =file_get_contents( 'php://input' );

            $server = new soap_server();
            $namespace = "http://localhost/web_service/web_service";
            $server->configureWSDL("web-service", $namespace);//, "urn:web-service");
            $server->wsdl->schemaTargetNamespace = $namespace;
            include 'wsdl_types.php';
            $server->register("Subscribe", array("accessKey" => "xsd:string","publisher" => "xsd:string","subscribeData" => "xsd:string"), array("return" => "xsd:string"), "urn:web-service", "urn:web-service#Subscribe", "rpc", "encoded", "Subscribe to mail or mobile list(s)");
            $server->register("SendEmailFromWeb", array("accessKey" => "xsd:string","publisher" => "xsd:string","sendEmailFromWebData" => "xsd:string"), array("return" => "xsd:string"), "urn:web-service", "urn:web-service#SendEmailFromWeb", "rpc", "encoded", "Send email from web interface");
            $server->register("SendEmailFromMobile", array("accessKey" => "xsd:string","publisher" => "xsd:string","sendEmailFromMobileData" => "xsd:string"), array("return" => "xsd:string"), "urn:web-service", "urn:web-service#SendEmailFromMobile", "rpc", "encoded", "Send email from mobile interface");
            $server->register("UpdateProfile", array("accessKey" => "xsd:string","publisher" => "xsd:string","updateProfileData" => "xsd:string"), array("return" => "xsd:string"), "urn:web-service", "urn:web-service#UpdateProfile", "rpc", "encoded", "Update subscriber profile (name, etc.)");
            $server->register("Unsubscribe", array("accessKey" => "xsd:string","publisher" => "xsd:string","unsubscribeData" => "xsd:string"), array("return" => "xsd:string"), "urn:web-service", "urn:web-service#Unsubscribe", "rpc", "encoded", "Unsubscribe from mail or mobile list(s)");
            $server->register("SMSTriggeredEmailNotify", array("accessKey" => "xsd:string","publisher" => "xsd:string","smsTriggeredEmailNotifyData" => "xsd:string"), array("return" => "xsd:string"), "urn:web-service", "urn:web-service#SMSTriggeredEmailNotify", "rpc", "encoded", "Still working on this");
            $server->service($HTTP_RAW_POST_DATA);

        }
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T21:01:40.280

我找到了答案：

```
$server->configureWSDL("web-service", $namespace); 
```

应该：

```
$endpoint = "http://localhost/web_service/web_service";
$server->configureWSDL("web-service", $namespace, $endpoint); 
```

# php - 如果他们在浏览器上单击关闭，则从 mysql 表中删除用户会话

> ID：11588207
> 
> 赞同：1
> 
> 时间：2012-07-20T23:33:57.097
> 
> 标签：php, mysql, session

我为用户登录设置了一个下降，并且有一个会话 time() 和其他一些添加到表中的东西。

我遇到的问题是，当用户关闭浏览器时，它不会从 mysql 表中删除会话。

从用户的角度来看，这很好，因为他们在打开浏览器时必须再次登录。

但对于超级用户仪表板，如果用户关闭浏览器，它仍会显示用户已登录。

我确实查看了关闭浏览器警报 javascript 代码，但我宁愿找到一种方法来做到这一点。

然后我想可能是一个 cron 脚本，但这可能会使用户注销，除非我每次点击另一个页面时都更新 time()。这是唯一的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T23:42:58.037

您的数据库可以没有“isLoggedIn”列吗？它可以只有一个“lastActivityTime”列吗？如果 currentTime - lastActivityTime < loggedOutTime，则用户注销

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T23:44:34.417

我不相信浏览器告诉你它正在关闭。

唯一的方法是在服务器上进行。

每次验证时尝试针对会话记录当前时间 - 这将是会话的最后访问时间。

然后，您可以删除所有超出您决定的某个时间段的会话。您可以通过 cron 作业执行此操作，也可以将其添加到会话验证代码中，每个用户都可以帮助保持表格整洁。

# android - 调用 onCreateView() 之前出现“找不到片段 id 的视图”错误

> ID：11588209
> 
> 赞同：1
> 
> 时间：2012-07-20T23:34:26.740
> 
> 标签：android, view, fragment, illegalargumentexception, android-fragmentactivity

这与几篇文章有关，但我没有看到任何解释视图层次结构中视图创建顺序的内容（静态 - xml 和动态 - 在代码中）。

我有一个 FragmentActivity 托管一个 Activity 和一个 Fragment。在调用片段的 onCreateView 之前，我从没有为片段创建的视图中收到运行时错误。很难确定调用方法是什么找不到视图，因为调试器在单步执行期间似乎无法找到正确的行号。

我无法正确附加源以查看 FragmentManager 内部，因为 dl'd 源和 .jar 之间似乎不匹配

我在 StreamingActivity.onCreateView 中放置了一个 Log.i 条目，并且在此之前发生了错误。

这是相关的LogCat：

```
07-19 10:13:36.091: I/StreamingActivity(9886): onCreate
07-19 10:13:42.271: W/dalvikvm(9886): threadid=1: thread exiting with uncaught exception (group=0x40020560)
07-19 10:13:42.281: E/AndroidRuntime(9886): FATAL EXCEPTION: main
07-19 10:13:42.281: E/AndroidRuntime(9886): java.lang.RuntimeException: Unable to start activity   
ComponentInfo{kesten.fragmentstestbed/kesten.fragmentstestbed.FragmentsMainActivity}:        
java.lang.IllegalArgumentException: No view found for id 0x7f05002e for fragment 
StreamingActivity{4052f810 #0 id=0x7f05002e}
caused by
java.lang.IllegalArgumentException: No view found for id 0x7f05002e for fragment 
StreamingActivity{40530948 #0 id=0x7f05002e}
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:865) 
```

我的java文件片段：

```
public class FragmentsMainActivity extends FragmentActivity {

public final static int STARTUP_ACTIVITY_RESULT=0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_fragments_main);

    if(savedInstanceState == null) {
        Intent intentStartupActivity = new Intent(this, StartupActivity.class);
        if(intentStartupActivity != null)
            startActivityForResult(intentStartupActivity, STARTUP_ACTIVITY_RESULT);

        // get an instance of FragmentTransaction from your Activity
        FragmentTransaction fragmentTransaction = 
                getSupportFragmentManager().beginTransaction();

        //add a fragment
        StreamingActivity streamingActivity = new StreamingActivity();
        if (streamingActivity != null) {
            fragmentTransaction.add(R.id.streamingactivity, streamingActivity);
            fragmentTransaction.commit();
        }
    }
} 
```

我的片段：

```
public class StreamingActivity extends Fragment {

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Log.i("StreamingActivity","onCreate")   
} 
```

我的布局文件：“res/layout/main.xml”

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

    <FrameLayout
    android:id="@+id/streamingactivity"
    android:layout_width="0px"
    android:layout_height="match_parent">
</FrameLayout>

<!-- IMU -->
<TextView
    android:id="@+id/imu_label"
    style="@style/Label.Title"
    android:text="@string/imu"
    />

<kesten.fragmentstestbed.ImuView
    android:id="@+id/imu_values"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/imu_label"
    android:text=""
    />

<!-- Accelerometer -->
<TextView
    android:id="@+id/accelerometer_label"
    style="@style/Label.Title"
    android:text="@string/accelerometer"
    android:layout_below="@+id/imu_values"
    />

<!-- Filtered -->
<kesten.fragmentstestbed.CoordinateView
    android:id="@+id/accelerometer_filtered_coordinates"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/accelerometer_label"
    android:text="@string/filtered"
    />

</RelativeLayout> 
```

和我的 FragmentActivity 的“activity_fragments_main.xml”

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:padding="@dimen/padding_medium"
        android:text="@string/hello_world"
        tools:context=".FragmentsMainActivity" />

</RelativeLayout> 
```

从其他 Stackoverflow 线程收集的 id not found 错误的可能原因：

*   FragmentActivity 的 onCreate() 方法的 setContentView() 布局错误。

我检查了一下，我的 xml 文件都在那里。也许存在语法错误或缺少链接资源，但我看不到它。我知道 HierarchyViewer 将是调试 UI 的有用工具，但我无法让它工作。

*   传递给 FragmentTransaction.add 的 id 必须是 setContentView 中指定的布局的子级。

我的 FragmentActivity 的 onCreate @Override public void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.activity_fragments_main);

我的 Fragment 的 onCreateView

```
@Override 
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    Log.i("StreamingActivity","onCreateView");      
    View view = inflater.inflate(R.layout.main, container, false); 
```

我假设 LayoutManager 为容器传递了正确的值，即在 FragmentActivity 的 setContentView() 中设置的值。但无论如何，我们永远无法到达那里。logCat 中的错误发生在我们进入 onCreateView() 之前。

我唯一能想到的 atm 是在 setContentView 之后和 StreamingActivity 之前调用的 startupActivity（它是封闭的第三方）将内容视图设置为 R.layout.activity_fragments_main 之外的东西，这不是我的片段视图的父级。

问题似乎源于这样一个事实，即虽然 Activity 有 setContentView 可以随时调用，但 Fragment 只有 onCreateView() ，它在启动片段的片段事务之后被调用。

为什么以及在调用 onCreateView() 之前尝试访问片段视图的原因是什么？

达科拉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-27T13:08:38.417

以下`FrameLayout`应该在`activty_fragments_main`

```
 <FrameLayout
    android:id="@+id/streamingactivity"
    android:layout_width="0px"
    android:layout_height="match_parent">
</FrameLayout> 
```

下面的函数在第一个参数中提供的布局内添加了一个片段：

```
 fragmentTransaction.add(R.id.streamingactivity, streamingActivity); 
```

所以尝试改变：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:padding="@dimen/padding_medium"
        android:text="@string/hello_world"
        tools:context=".FragmentsMainActivity" />

</RelativeLayout> 
```

至：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

   <FrameLayout
    android:id="@+id/streamingactivity"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
</FrameLayout>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T05:47:36.150

在`TextView`activty_fragments_main 中没有 id。我遇到了类似的错误，并添加了一个 id，突然间一切都开始工作了......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-22T07:20:54.843

> 在**FragmentMainActivity**中，您将片段添加到**id streamingactivity**

```
fragmentTransaction.add(R.id.streamingactivity, streamingActivity); 
```

> 和我的 FragmentMainActivity 的“activity_fragments_main.xml”

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:padding="@dimen/padding_medium"
        android:text="@string/hello_world"
        tools:context=".FragmentsMainActivity" />

</RelativeLayout> 
```

//你的布局必须包含一个带有 id 流活动的 FrameLayout。你的活动必须包含

```
<FrameLayout 
android:id="@+id/streamingactivity"
....
..> 
```

> 而你的`StreamingActivity`哪个是`Fragment`必须进口的`android.support.v4.Fragment`。并且必须执行`onCreateView`

```
@Override 
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {    
    return inflater.inflate(R.layout.main, container, false);
} 
```

或者另一个问题可能是。您已经**交换了 Fragment 和 Activity 的 LayoutId**。就像你的名字一样

# python - CouchDB 连接丢失且没有错误

> ID：11588214
> 
> 赞同：1
> 
> 时间：2012-07-20T23:35:50.437
> 
> 标签：python, couchdb-python

该程序正在 Python 中开发。它包含对远程 CouchDB 数据库的大量查询。程序开始运行，过了一会儿，它只是冻结了。当我检查连接时，我观察到 CouchDB 数据库连接已丢失。它仍然在不做任何事情的情况下使用 CPU（看起来是这样）。

```
def addNewDnsRecord(self, record):
     if self.checkHashValue(record['hashValue']):
         ....                                #some code to generate an id
         record['_id'] = tempid
         self.bulk.append(record)            #add record at the end of the bulk

         if len(self.bulk) == 1000:          #bulk with 1000 records are inserted
              self.dns_db.update(self.bulk)
              self.bulk = []

def checkHashValue(self, hashValue):
    result = self.dns_db.view('records/hashcheck', None, key=hashValue)
    if len(result) == 0:
          return True
    else:
          return False 
```

其次，有没有办法在 CouchDB-python 中检查连接是否建立或丢失。

连接丢失的原因可能是什么？

# javascript - Backbone.js 事件在 IE8 中无法识别

> ID：11588215
> 
> 赞同：5
> 
> 时间：2012-07-20T23:36:49.157
> 
> 标签：javascript, internet-explorer, backbone.js, underscore.js

我在表单上有“提交”事件。在 IE8 中，如果我在不输入任何信息的情况下提交表单，只需单击提交按钮，它就会发布表单，并且不会被 Backbone 中定义的事件捕获或处理。但是，如果我只是点击一个输入字段，然后点击提交，事件就会被处理。

主干事件设置如下：

```
events: {

'submit #form': 'submitForm',

        },
submitForm: function(e){
     e.preventDefault();
} 
```

任何想法为什么会这样？

更新：这是一个表格示例：

```
<div id="form">
  <form action="/action" method="post">
  <input type="text" name="name" />
  <button type="submit" value="Submit"></button>
  </form>
</div> 
```

它实际上仅在 IE8 中，并且仅当您在提交之前不先单击表单中的元素时。该事件在 FF、Chrome、IE9+ 中触发没有问题。但仅在 IE8 中，如果您只是单击提交，不执行任何其他操作，则不会触发该事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T03:49:57.010

无法使用此方法委托某些事件。'focus' 和 'blur' 不起作用，并且在 IE8 和更低版本的 'change'、'submit' 和 'reset' 也不起作用。它实际上在[Backbone 的注释源中，](http://backbonejs.org/docs/backbone.html#section-156)但由于某种原因不在[文档](http://backbonejs.org/#View-delegateEvents)中。

JQuery 的文档实际上指出，Backbone 使用的方法（[$.delegate](http://api.jquery.com/delegate/)）现在被能够处理这些事件的[$.on所取代。](http://api.jquery.com/on/)

所以你的选择是：

*   重载 Backbone.View.delegateEvents 以使用 $.on 而不是 $.delegate
*   如 EndangeredMassa 所示手动绑定事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T03:51:15.363

我相信这里的问题是在 IE9 之前，[提交事件不会冒泡 DOM](http://www.quirksmode.org/dom/events/submit.html)。在您的示例中，您在包含提交的表单的 div 上注册事件。您可能需要在渲染后专门处理表单的提交事件，而不是依赖主干的事件。

```
render: function(){
  // render content
  $el.find('form').on('submit', submitForm);
},

submitForm: function(){ ... } 
```

不过，我不确定如果您先将光标放在表单的元素中，它为什么会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T22:12:22.203

您可以在渲染后使用 $.on 为 IE8 正确附加这些事件

在 postRender 中使用这个通用函数：

```
fixIeBug = function(){
    if(!$.browser.msie || $.browser.version > 8){
        return;
    }

    var delegateEventSplitter = /^(\S+)\s*(.*)$/;

    var events = this.events;
    if($.isFunction(events)){
        events = events.apply(this);                
    }

    var handleEvents = ['change', 'submit', 'reset', 'focus', 'blur']

    for (var key in events) {
        var method = events[key];
        if (!_.isFunction(method)) method = this[events[key]];
        if (!method) throw new Error('Method "' + events[key] + '" does not exist');
        var match = key.match(delegateEventSplitter);
        var eventName = match[1], selector = match[2];

        if( _.indexOf(handleEvents, eventName) == -1){ continue; }

        method = _.bind(method, this);
        if (selector === '') {

        } else {                  
            var self = this;                     
            (function(eventName,method){
                //console.log('trying to set "on" handler for %s, key=%s', eventName, key);
                self.$(selector).on(eventName, function(e){                            
                    //console.log('got it, eventName=%s', eventName);                  
                    return method(e);
                })
            })(eventName,method);
        }
    }                
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T22:07:58.743

您有`'submit #form'`，但请注意`form`id 属性位于包含`<div id="form">`，而不是表单本身。如果您只是使用`'submit form'`（在您的 中获取任何表单元素`el`），或者您向`<form>`属性添加一个 id 并相应地选择它，您应该得到预期的行为。

除非，[如前所述](https://stackoverflow.com/questions/11588215/backbone-js-events-not-being-recognized-in-ie8/11876533#11876533)，您使用的是 IE < 9，在这种情况下，您不能绑定到`change`、`submit`或`reset`事件。

# adsense - 如何在静态 HTML 网站中创建谷歌广告？

> ID：11588217
> 
> 赞同：3
> 
> 时间：2012-07-20T23:37:00.080
> 
> 标签：adsense

如何在静态 HTML 网站中创建谷歌广告？

我有一个标准的 htm 文件如何添加 google 添加以及如何在 google 中创建添加？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T23:52:23.317

与将 AdSense 单元添加到任何其他页面的方法相同。请参阅 Google 的 AdSense 文档，网址为：

[http://support.google.com/adsense/bin/answer.py?hl=en&answer=179887](http://support.google.com/adsense/bin/answer.py?hl=en&answer=179887)

# javascript - 点击事件仅适用于刷新

> ID：11588227
> 
> 赞同：1
> 
> 时间：2012-07-20T23:38:27.540
> 
> 标签：javascript, jquery, svg

**TL;DR** - 任何人都知道为什么点击处理程序只能在刷新时工作？

如果我有这样的功能：

```
function selectState() {
    $('#state-select').change(function(event) {
        var state = $(this).val(); 
        $("#vmap").find(("#jqvmap1_") + (state.toLowerCase(''))).click(); 
    });
 } 
```

我让这个函数像这样运行：

```
function setClickHandlers() {
    $(document).on('click','a#reset_tracker',function(event) {
        event.preventDefault();
        $.get('decisiontree/reset_tracker/', function(data) {
            window.location.reload();
        });
    });
    if ($('#vmap').length !== 0) {
        setTimeout(function(){
            $('#vmap').bind('regionClick.jqvmap', function(event, code, region) {
                $('#state-select').val(code.toUpperCase());
            });
            selectState(); //once the map loads, we should be able to select things, right
            }, 500);     
    }
} 
```

然后由以下方式调用：

```
function setupSlide() {
    setClickHandlers();
    if ((typeof $.fn.vectorMap !== "undefined" && $.fn.vectorMap !== null) &&       
$('#vmap').length !== 0) {
         $('#vmap').vectorMap({
             map: 'usa_en',
             backgroundColor: null,
             color: '#6a1912',
             hoverColor: '#fdb33f',
             selectedColor: '#fdb33f',
             enableZoom: true,
             showTooltip: true,
             onRegionClick: function(event, code, region) {
                 event.preventDefault();
                 $('#state-select').val(code.toUpperCase());
             }
         });
     }
 } 
```

由以下人员调用：

```
 $(document).ready(function() {

    setupSlide(); 

    $(document).on('click','.prev', function(event) {
        event.preventDefault();
        loadSlide(prev_slide_url,{});
    });

    $(document).on('click','.next', function(event) {
        event.preventDefault();
        var answer;
        if ($(this).hasClass('button') || $(this).hasClass('button-small')) {
            answer = $(this).val();
        } else if ($(this).hasClass('arrow')) {
            answer = $('input[type=checkbox].answer:checked').val();
            if (!answer && $('input[type=checkbox]').length > 0) {
                $("p.inactive").addClass("error");
                return false;
            }
            if ($("#vmap").length > 0) {
                 //for the map, the value is in the select
                 answer = $('#state-select').val();
                 if ($("#state-select").val().length === 0) {
                     $("p.inactive").addClass("error");
                     return false;
                 }

             }
        } else if ($(this).hasClass('navbutton')) {
            answer = $(this).data('val');
        }

    loadSlide(next_slide_url,{answer: answer});
    });
}); 
```

为什么 SelectState 中的 click 方法只有在包含该功能的页面（即上面有 #vmap 的页面）被刷新时才被调用，而不是在下一个或上一个按钮（具有在 document.ready 中定义的功能）时被调用代码块）被点击？在这种情况下，点击处理程序有什么特别之处吗？我真的不确定发生了什么错误。

我要补充的一件事是，#jqvmap1_ 指的是 SVG 地图中的路径元素，即美国地图。但由于它适用于刷新，我认为它与它是路径元素这一事实无关。

如果您需要对此问题进行进一步说明，请告诉我。为混乱的代码道歉。

# java - 线程永远保持引用

> ID：11588229
> 
> 赞同：0
> 
> 时间：2012-07-20T23:38:29.957
> 
> 标签：java, android, memory-management

我有一堂课：

```
class RenderView implements Runnable {
   Thread renderThread;
   public void  run() {
        while(!Thread.currentThread().isInterrupted()) {
            //does some work
        }
} 

//At some point in executed code, inside RenderView class (i'm sure it's executed)
renderThread = new Thread (this);

//When activity is closed (also, i'm sure this part is executed)
renderThread.interrupt(); 
```

并且 renderThread 真的停止了（至少 run() 方法退出了）。

但是由于某种原因，在我退出活动后，我的代码中仍然有一些对 renderView 的引用。这导致我出现巨大的内存泄漏。

一个 hprof 转储告诉我：java.lang.Thread（这个在 GC Root 中）有一个对目标的引用（mypackage.RenderView）

**我不知道为什么这个 Thread 类保留对我的 Thread 的引用，即使我已经完成了 Thread！**有任何想法吗？

**编辑**：在活动 B 中引用了 renderView。因此，当我退出活动时，应该仍然无法访问对 renderThread 的引用。但我仍然尝试设置 renderThread = null ：不起作用。正如我能够通过 MAT Analyzer 发现的那样**，使 renderView 不会被垃圾收集的唯一因素是来自 java.lang.Thread 的这个奇怪的引用。**

![MAT 分析仪截图](../Images/ee5317d94c4c042401f64cbf4967ffc3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T23:52:24.740

为什么不直接使用 AsyncTask 或 runOnUIThread()？

我从来没有看到需要你做什么。也许有一个，否则只使用 AsyncTask 或 runOnUIThread。不要重新发明轮子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T23:56:35.720

释放你的线程实例

```
renderThread = null; 
```

线程实例与任何其他实例一样，是一个对象。即使它完成运行，你也会保留对它的引用，直到你释放它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T23:53:53.057

您是否尝试过无效`renderThread`？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T03:29:20.670

实际上，renderThread.interrupt 可能不会停止线程，它只是设置一个标志和信号 JVM，它可以被中断。这就是为什么你的线程仍然在运行。最好的做法是通过设置一个优雅地退出 run 方法在while循环中标记。

```
 while(isRunning){

    }

// at some point, say 

    isRunning = false; 
```

可以从以下链接获得有关 Android UI 设计的最佳实践。

[安卓用户界面设计模式：](http://www.slideshare.net/mswolfson/android-ui-patterns)

# ruby-on-rails - 禁用 ?debug_assets=1 而不丢失资产管道，用于生产中的 Rails 应用程序？

> ID：11588231
> 
> 赞同：0
> 
> 时间：2012-07-20T23:38:41.180
> 
> 标签：ruby-on-rails, asset-pipeline

一个非常简单的问题：如何`?debug_assets=1`在生产中禁用 Rails 应用程序？

它并不像现在这样简单，谁知道有一种方法可以禁用此功能，但仍保留 rails 3.2.x 应用程序中的 sprockets 资产管道功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T23:55:23.720

你试过这个吗？

```
# in config/environments/production.rb
config.assets.allow_debugging = false 
```

# python - Python Tkinter：绑定相同的键两次？

> ID：11588238
> 
> 赞同：1
> 
> 时间：2012-07-20T23:39:53.977
> 
> 标签：python, function, binding, tkinter, key

有没有办法将相同的键绑定到 Tkinter 中的对象？这是我的情况。

我正在使用一个多列表框类，但它已经将按钮 1 绑定到一个函数，该函数在每个其他列表框中选择同一行。现在我想在使用多列表框类的副本时向我的类中的按钮 1 添加另一个函数。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T02:36:35.490

只需为这两个函数制作一个包装器，并使该函数成为您的绑定调用的函数：

```
def key_press_wrapper():
    your_function1()
    your_function2() 
```

应该就这么简单。

在返回键上的一个例子：

```
from Tkinter import *

def key_press_wrapper():
    your_function1()
    your_function2()
root=Tk()
root.bind('<Return>',key_press_wrapper) 
```

# php - sql查询不返回任何内容

> ID：11588241
> 
> 赞同：-1
> 
> 时间：2012-07-20T23:40:30.653
> 
> 标签：php, mysql, sql

您好我正在尝试运行以下查询，但似乎没有返回任何内容我想要的只是从我的作业表中返回所选作业类型的作业描述。

请任何帮助都会很棒，因为我花了几个小时试图解决它。

谢谢

艾伦

```
<input type="hidden" name="JOB_TYPE" value="<?php print $_POST['JOB_TYPE'];?>"/>

<?php
$Query = " (SELECT JOB_TYPE, JOB_DISCRIPTION FROM jobs  " .
"WHERE jobs.JOB_TYPE ='$_POST[JOB_TYPE]' " .
"AND jobs.JOB_DISCRIPTION = 'JOB_DISCRIPTION')";

$Result = mysqli_query($DB, $Query);  
?>

<?php  
$Result = mysqli_query($DB,$Query)or die(mysqli_error($DB));

while ($Row = mysqli_fetch_assoc($Result))  // Now we go through the data displaying 
{

print  $Row ['JOB_DISCRIPTION']  ;  

}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T23:45:58.623

首先，代码很容易出现 sql 注入：你不应该直接使用 $_POST 数据。如果您想要特定类型的描述，则第二次删除最后一个条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T23:43:59.347

从末尾删除`AND`语句：

```
AND jobs.JOB_DISCRIPTION = 'JOB_DISCRIPTION' 
```

还要从查询语句周围删除括号`( )`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-10T16:30:54.000

```
" -- quotation marks are only required at the start and end
SELECT JOB_TYPE
     , JOB_DISCRIPTION -- some people spell description with an 'e'
  FROM jobs  
 WHERE jobs.JOB_TYPE =$_POST['JOB_TYPE']    -- escape data (using modern methods) to prevent injection and note 
   AND jobs.JOB_DISCRIPTION = 'JOB_DISCRIPTION'; -- This is really strange
" 
```

# c# - Sending a data from android phone to pc?

> ID：11588242
> 
> 赞同：1
> 
> 时间：2012-07-20T23:40:53.963
> 
> 标签：c#, java, android, networking

I am creating a "tracking system" for my android phone. Basically, the phone would transmit it latitude/longitude to a C# program that will receive the coordinates and display it on a map. I managed to get the phone's latitude/longitude coordinates but I need a way to transmit that data to my C# application running in my PC. I know my way around C# and Java but never really got into network programming. Is there a way to do this ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T23:53:22.197

我会研究 C# Webservices，非常强大。通信协议是 SOAP（简单对象访问协议），它是一种流行且支持良好的标准。

良好的入门参考：[您的第一个 C# Web 服务](http://www.codeproject.com/Articles/863/Your-first-C-Web-Service)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T23:49:52.830

我不能说它的 C# 方面，但是如果你编写一个 C# 服务器来接收 post 请求，[Apache HttpClient](http://hc.apache.org/httpcomponents-client-ga/index.html)使得发送请求变得相对简单。如果您稍微闲逛一下，还有很多关于 SO 的其他问题将有助于在手机上设置客户端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T01:27:18.733

正确的做法是构建允许许多不同协议接收数据的 WCF 服务。这可能是一个非常强大的解决方案，可以在未来进行扩展。

最快和最简单的 IMO 将是创建 ASP.NET MVC 应用程序，为您的经度/纬度定义一个 POCO 模型，并创建一个将您的模型作为参数的操作。然后在android上使用HttpClient和HttpPost发送数据。这里的技巧是在您的发布请求中将变量命名为与您在 C# 模型中定义的变量相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T23:51:52.010

你有不同的方法来做到这一点。

*   第一种是通过云发送数据以通过远程服务器进行交互。所以这两个设备都必须连接到互联网
*   通过本地网络发送数据的第二个 ID，因此数据必须在同一个网络上并且必须共享它们的 IP
*   第三种是使用[adb forward](http://developer.android.com/tools/help/adb.html#forwardports)，它允许通过 USB 电缆在两个设备之间建立套接字连接。我认为要求是手机必须处于调试模式，并且驱动程序已安装在 PC 上，这样手机才能被 ADB 识别。
*   我可以使用蓝牙连接再添加一个。[在此处](http://developer.android.com/guide/topics/connectivity/bluetooth.html)查找信息

# ajax - 使用 AJAX 更新 Rails 3 部分（不是表单）

> ID：11588251
> 
> 赞同：5
> 
> 时间：2012-07-20T23:42:06.813
> 
> 标签：ajax, ruby-on-rails-3

在提交表单后，我发现了许多关于使用 Ajax 更新部分内容的问题和答案。但我的问题是？更简单？，我只想每隔几秒重新加载一部分并加载新数据。这真的一点都不难，我记得在 Rails 2.3 中做过类似的事情，但我在任何地方都找不到答案。

基本上，我有一个 show.html.erb 渲染一个像这样的部分：

```
<div id="latest_post">
    <%= render :partial=>'info/latest', :object=>@user, :as=>:user %>
</div> 
```

位于 app/views/info/_latest 的部分文件

```
<% post = user.posts.last %>
<h1>Last Post</h1>
<p><%= post.content %></p> 
```

我只希望 latest_post div 每 30 秒更新一次。请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T18:31:26.197

原来答案有点复杂：

第 1 步：使用 Javascript 的`setInterval`函数和 jQuery 的`$.get()`函数来加载页面，例如`/users/1/posts/latest`.

```
setInterval(function(){
  $.get("/users/1/posts/latest.js", function(data){
    $("latest_post").html(data);
  },
  "html")
}, 30000); 
```

第2步：创建一个`latest.js.erb`并将其放入您的`app/views/posts`文件夹中。

内容`latest.js.erb`：

```
<%= render partial: 'posts/latest', object: @user.posts.last, as: :post %> 
```

第 3 步：使用您想要的任何内容创建上述部分（如果您不需要部分，您可以将 div 的全部内容写入`latest.js.erb`文件中。）

第 4 步：将最新方法添加到您的`PostsController`，定义`@user`等以供`latest.js.erb`使用。

第 5 步：添加`get '/latest'`到您的`routes.rb`

# c# - Oracle ArrayBound Stored Procedure fails only with specific field

> ID：11588253
> 
> 赞同：0
> 
> 时间：2012-07-20T23:42:32.727
> 
> 标签：c#, .net, oracle, ado.net, odp.net

I have a stored procedure that works and has been working for months for inserting data.

Here's the "short" version:

```
procedure saveApplication(  in_confirmation_number  varchar2 := null                           
                            ,in_nonstandard_address varchar2 := null      
                            ,in_absentee_type varchar2 := null) AS
  BEGIN
    insert into vr_application (
            confirmation_number
            ,nonstandard_address
            ,absentee_type )
    values ( in_confirmation_number
            ,in_nonstandard_address
            ,in_absentee_type 
            );
END; 
```

I'm working in bulk so I stuff the data in as arrays after pulling the value from a datatable. Again, below is the "shortened" version.

```
private static void loadFiles(DataTable dt, string connString, ErrorLogger log)
    {

        OracleConnection orclconn = null;
        OracleCommand cmd = null;

        using (orclconn = new OracleConnection(connString))
        {
            orclconn.Open();
            using (cmd = BuildCommand(dt))
            {
                cmd.Connection = orclconn;
                cmd.ExecuteNonQuery();
            }
        }

    }

 private static OracleCommand BuildCommand(DataTable dt)
    {
        OracleCommand cmd = new OracleCommand();
        cmd.CommandText = "Applications.saveApplication";
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.ArrayBindCount = dt.Rows.Count;
        cmd.BindByName = true;

        string[] CONFIRMATION_NUMBER = dt
           .AsEnumerable()
           .Select(row => row.Field<string>("CONFIRMATION_NUMBER"))
           .ToArray();
        OracleParameter in_confirmation_number = new OracleParameter();
        in_confirmation_number.OracleDbType = OracleDbType.Varchar2;
        in_confirmation_number.Value = CONFIRMATION_NUMBER;
        in_confirmation_number.ParameterName = "in_confirmation_number";
        cmd.Parameters.Add(in_confirmation_number);

         string[] ABSENTEE_TYPE = dt
            .AsEnumerable()
            .Select(row => row.Field<string>("ABSENTEE_TYPE"))
            .ToArray();
        OracleParameter in_absentee_type = new OracleParameter();
        in_absentee_type.OracleDbType = OracleDbType.Varchar2;
        in_absentee_type.Value = ABSENTEE_TYPE;
        in_absentee_type.ParameterName = "in_absentee_type";
        cmd.Parameters.Add(in_absentee_type);

        string[] NONSTANDARD_ADDRESS = dt
         .AsEnumerable()
         .Select(row => row.Field<string>("NONSTANDARD_ADDRESS"))
         .ToArray();
        OracleParameter in_nonstandard_address = new OracleParameter();
        in_absentee_type.OracleDbType = OracleDbType.Varchar2;
        in_absentee_type.Value = NONSTANDARD_ADDRESS;
        in_absentee_type.ParameterName = "in_nonstandard_address";
        cmd.Parameters.Add(in_nonstandard_address);

        return cmd;
} 
```

**Scenario 1:** nonstandard_address code is commented out. Everything works.

**Scenario 2:** nonstandard_address code is not commented out. But instead of passing values into the original datatable, I hardcode the value "null". Everything works. This is where it has been for months.

**Scenario 3:** the datatable for nonstandard address has a single row which has a value in nonstandard address. All other rows contain null for this column. I get an Oracle.DataAccess.Client.OracleException, #ORA-06550, with the message "Encountered the symbol ">" when expecting one of the following...."

To attempt to identify the problem, I simply looped through the values in the array. I get the same error on the last loop iteration, which is always one more than the number of records in the data table (100). But if I loop without attempting to create an Oracle Parameter for nonstandard, I get no error and only 100 loop iterations.

If I do Scenario 2 and successfully fill the table with everything except nonstandard_address, I can then run the following in Oracle, and successfully update the table.

```
update vr_application a
set nonstandard_address = (select nonstandard_address from unprocessed_apps b where b.confirmation_number = a.confirmation_number)
where exists (select 1 from unprocessed_apps where confirmation_number = a.confirmation_number) 
```

Can anyone see a mistake here? Anyone seen this before? I'm baffled.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T15:55:11.437

嗯，这是那些“duh”时刻之一，也是拥有可以成为额外眼睛的同事的一个很好的论据。

查看我的代码 - 我将地址输入到缺席字段中。这就是我所拥有的：

```
 string[] NONSTANDARD_ADDRESS = dt
     .AsEnumerable()
     .Select(row => row.Field<string>("NONSTANDARD_ADDRESS"))
     .ToArray();
    OracleParameter in_nonstandard_address = new OracleParameter();
    **in_absentee_type**.OracleDbType = OracleDbType.Varchar2;
    **in_absentee_type**.Value = NONSTANDARD_ADDRESS;
    **in_absentee_type**.ParameterName = "in_nonstandard_address";
    cmd.Parameters.Add(in_nonstandard_address); 
```

这是我应该拥有的：

```
 string[] NONSTANDARD_ADDRESS = dt
           .AsEnumerable()
           .Select(row => row.Field<string>("NONSTANDARD_ADDRESS"))
           .ToArray();
        OracleParameter in_nonstandard_address = new OracleParameter();
        **in_nonstandard_address**.OracleDbType = OracleDbType.Varchar2;
        **in_nonstandard_address**.Value = NONSTANDARD_ADDRESS;
        **in_nonstandard_address**.ParameterName = "in_nonstandard_address";
        cmd.Parameters.Add(in_nonstandard_address); 
```

像上面那样盯着72个阵列后，我的眼睛完全错过了它。感谢 Bob Jarvis 提出的一些让我突然想到语法问题的建议。

# c# - Populating a graph by drag and drop

> ID：11588254
> 
> 赞同：1
> 
> 时间：2012-07-20T23:42:37.987
> 
> 标签：c#, jquery, visual-studio-2008, css

I wanted to know if there were any jquery/html or c# plugins that would help me do the following.

Drag an item from a data list that is populated from the database and drop it into an empty graph. Then have the graph fill with the information that was dropped in.

Current working on a solution but having a difficult time with the populating of the graph.

Any solutions or suggestions would be great! Thanks.

ps. Cannot use css3 or html 5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T02:42:30.520

Sencha 的框架 Ext JS 4 可能有你正在寻找的东西。它具有拖放功能、非常好的图表包和数据绑定支持。

它是为利用 css3 和 html5 而构建的，但是当缺少某些功能时，它应该具有一些不错的后备功能，因此它可能不是问题。

# android - 在 Android 中使用通知保存联系人

> ID：11588256
> 
> 赞同：1
> 
> 时间：2012-07-20T23:42:57.500
> 
> 标签：android, android-widget, android-contacts

我正在 Android 中创建一个应用程序，在其中我通过文本文件中的蓝牙将我的详细信息（如电话#、电子邮件、Facebook 地址）发送给其他人。我希望每当第二个人收到我的文本文件时，它应该提示其他用户`Whether he want to save my details as a Contact`.我的问题是，是否有任何内置功能可以达到此目的，就像在 QR-Reader 中阅读后要求保存一样。任何可以帮助我的人谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T20:57:40.367

您应该在文本文件中发送信息，然后使用[Android Contact Provide](http://developer.android.com/reference/android/provider/Contacts.html)将其保存在您的联系人中。您可以使用手势界面来检测点击并使用对话框选择是/否（用户权限）。

# asp.net - 如果没有发表评论将显示在表单视图中，您如何显示评论计数？

> ID：11588259
> 
> 赞同：2
> 
> 时间：2012-07-20T23:43:20.450
> 
> 标签：asp.net, mysql

我正在为学校建立一个博客。我想显示每个线程的评论数。但是，我对如何实现这一目标有点迷茫。任何帮助都会非常感谢您！

我有 2 张桌子

```
CREATE TABLE `blog_message` (
  `MessageID` int(30) NOT NULL AUTO_INCREMENT,
  `Username` varchar(45) NOT NULL,
  `Message` text,
  `AddedDate` datetime DEFAULT NULL,
  `Title` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`MessageID`)
)

CREATE TABLE `blog_comments` (
  `CommentID` int(30) NOT NULL AUTO_INCREMENT,
  `MessageID` int(30) DEFAULT NULL,
  `Author` varchar(45) DEFAULT NULL,
  `CommentMessage` text,
  `AddedDate` datetime DEFAULT NULL,
  PRIMARY KEY (`CommentID`),
  KEY `blog_comments_ibfk_1` (`MessageID`),
  CONSTRAINT `blog_comments_ibfk_1` FOREIGN KEY (`MessageID`) REFERENCES `blog_message` (`MessageID`)
) 
```

我的表单视图代码

```
<asp:FormView ID="FormView1" runat="server" AllowPaging="True" DataSourceID="SqlDataSource1">      
                       <ItemTemplate>    
                           <div>
                           <asp:Label ID="lblcc" runat="server" Text="Comment Replys"></asp:Label>
                           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                           <asp:Label ID="lblT" runat="server" Text="Title"></asp:Label>
                           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                           <asp:Label ID="lblA" runat="server" Text="Author"></asp:Label>
                           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                           <asp:Label ID="lbldoc" runat="server" Text="Date of Creation"></asp:Label>
                           </div>                                     
                            <hr />      
                            <asp:LinkButton ID="LinkButton1" runat="server" Font-Underline="false" PostBackUrl='<%# Eval("MessageID", "BlogComments.aspx?MessageID={0}") %>' >                         
                            <asp:Label ID="lblCommentCounts" runat="server" Text='<%# Eval("comment_count") %>'></asp:Label>
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   
                            <asp:Label ID="lblTitle" runat="server" Text='<%# Eval("Title") %>'></asp:Label>
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <asp:Label ID="lblAuthor" runat="server" Text='<%# Eval("Author") %>'></asp:Label>
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <asp:Label ID="lbDateOfCreation" runat="server" Text='<%# Eval("AddedDate") %>'></asp:Label>       
                            </asp:LinkButton>  
                            <hr />
                        </ItemTemplate>
                    </asp:FormView> 
```

MySQL 代码

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:ConnectionString %>" 
        ProviderName="<%$ ConnectionStrings:ConnectionString.ProviderName %>" 
        SelectCommand="SELECT bm.MessageId, count(bc.CommentId) as comment_count, bm.AddedDate, bm.Author, bm.Title
FROM blog_comments bc, blog_message bm
WHERE bm.MessageId = bc.MessageId 
GROUP BY bm.MessageId"></asp:SqlDataSource> 
```

我的目标是

在网格视图中显示

表格格式：

评论数 | 标题 | 用户名 | 创建日期

但是，它只会在线程有评论时显示。如果线程有 0 条评论，我如何显示 0 条评论？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T23:51:19.420

使用外连接而不是内连接：

```
SELECT
    bm.MessageId,
    COUNT(bc.CommentId) AS comment_count,
    bm.AddedDate,
    bm.Author,
    bm.Title
FROM blog_message bm
LEFT JOIN blog_comments bc
ON bm.MessageId = bc.MessageId 
GROUP BY bm.MessageId 
```

# class - 非托管 var 作为托管类 c++ 的成员

> ID：11588261
> 
> 赞同：6
> 
> 时间：2012-07-20T23:43:40.533
> 
> 标签：class, c++-cli, declaration, mixed-mode

我是 .net c++ 的新手，并试图创建如下所示的类：

```
public ref class Klient
{
public:
    Klient(){}
    // zmienne
    static DWORD klienty[41][2];
    static int i = 1;
    static DWORD* pid;
    static HANDLE* handle;

    //funkcje
}; 
```

但 MSV 说：

```
error C4368: cannot define 'klienty' as a member of managed 'Klient': mixed types are not supported 
```

这段代码有什么问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-21T00:34:19.080

您可以将 .NET 基本数据类型作为托管类的成员（静态 int i），或指向任何非托管对象的指针（DWORD* pid、HANDLE* 句柄），但不允许直接拥有非托管对象，并且为此目的，整数数组算作非托管对象。

由于这里唯一给您带来问题的是非托管阵列，您可以将其切换到托管阵列。

```
public ref class Klient
{
public:
    Klient(){}
    // zmienne
    static array<DWORD,2>^ klienty = gcnew array<DWORD,2>(41,2);
    static int i = 1;
    static DWORD* pid;
    static HANDLE* handle;

    //funkcje
}; 
```

或者，您可以声明一个非托管类，将您需要的任何内容放在那里，并从托管类中获得指向它的指针。（如果您在非静态上下文中执行此操作，请不要忘记从终结器中删除非托管内存。）

```
public class HolderOfUnmanagedStuff
{
public:
    DWORD klienty[41][2];
    int i;
    DWORD* pid;
    HANDLE* handle;

    HolderOfUnmanagedStuff()
    {
        i = 1;
    }
};

public ref class Klient
{
public:
    Klient(){}
    // zmienne
    static HolderOfUnmanagedStuff* unmanagedStuff = new HolderOfUnmanagedStuff();

    //funkcje
}; 
```

# php - php curl cookie未注册

> ID：11588262
> 
> 赞同：1
> 
> 时间：2012-07-20T23:43:42.263
> 
> 标签：php, curl

我一直在玩[这个](http://www.codercaste.com/2009/12/15/use-curl-with-php-to-handle-http-requests-and-create-useful-scripts/)curl facebook 登录脚本，只是想掌握 curl 中的一些功能，但似乎我无法注册 cookie：

**脚本**

```
 function facebookLogin(){
        $login_email = 'email';
        $login_pass = 'pass';

        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, 'http://www.facebook.com/login.php');
        curl_setopt($ch, CURLOPT_POSTFIELDS,'email='.urlencode($login_email).'&pass='.urlencode($login_pass).'&login=Login');
        curl_setopt($ch, CURLOPT_POST, 1);
        curl_setopt($ch, CURLOPT_HEADER, 0);
        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
        curl_setopt($ch, CURLOPT_COOKIEJAR, "cookies.txt");
        curl_setopt($ch, CURLOPT_COOKIEFILE, "cookies.txt");
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.3) Gecko/20070309 Firefox/2.0.0.3");
        curl_setopt($ch, CURLOPT_REFERER, "http://www.facebook.com");
        $page = curl_exec($ch);
        echo $page;
    } 
```

我有一个名为 cookies.txt 的文本文件，它与脚本位于同一目录中，但是在运行此脚本后，文件中没有写入任何内容，因此没有创建 cookie，当尝试浏览其他网页时，这是一个大问题与您必须保持登录的网站相同。

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T11:23:38.873

好的，即使 cookies.txt 文件为空，它也已注册，但您需要确保在尝试浏览网站的其他部分时调用此文件，例如

```
function facebookGoToMessages(){
    facebookLogin();

    $ch = curl_init ("http://www.facebook.com/messages");
    curl_setopt ($ch, CURLOPT_COOKIEFILE, "cookies.txt"); 
    curl_setopt ($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.3) Gecko/20070309 Firefox/2.0.0.3");
    curl_setopt($ch, CURLOPT_REFERER, "http://www.facebook.com");
    $page = curl_exec ($ch);
    echo $page; 
} 
```

# python - 如何在 Python 中构建这样一个函数式编程工具？

> ID：11588263
> 
> 赞同：7
> 
> 时间：2012-07-20T23:43:41.657
> 
> 标签：python, function, recursion, functional-programming

我想要一个名为 的函数`times()`，以便：

`times(func,2)`相当于`lambda x:func(func(x))`

`times(func,5)`相当于_`lambda x:func(func(func(func(func(x)))))`

Python中有这样的工具吗？如果我想自己写代码会是什么样子？

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-20T23:46:36.100

我建议调用 this `power()`，因为这实际上`n`是函数的力量。标准库中没有这样的东西，但是你可以很容易地自己实现它：

```
def power(f, n):
    def wrapped(x):
        for i in range(n):
            x = f(x)
        return x
    return wrapped 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-21T00:14:05.687

谢谢，斯文

我找到了一种递归方式来做到这一点，但你的看起来更像pythonic：

```
def power(func, n):
    def lazy(x, i=n):
        return func(lazy(x, i-1)) if i > 0 else x
    return lazy    

>>> power(lambda x:x*2,3)(9)
72
>>> power(lambda x:x*2,2)(9)
36
>>> power(lambda x:x*2,1)(9)
18
>>> power(lambda x:x*2,0)(9)
9 
```

还有一种用装饰器实现的方法：

```
def powerize(n):
    def wrapped(func):
        def newfunc(*args):
            return power(func,n)(*args)
        return newfunc
    return wrapped

@powerize(3)
def double_3(x):
    return x*2

>>> double_3(8)
64 
```

# php - 带有 div 定位的问题

> ID：11588266
> 
> 赞同：1
> 
> 时间：2012-07-20T23:44:02.423
> 
> 标签：php, html, css

这是我的代码

```
while($row=  mysql_fetch_array($result)) {

                $type = $row[0];
                $user_from = $row[1];
                $operation_to = $row[2];
                $time = $row[3];

                if($type=="vote") {
                    echo self::vote_activity($user_from,$operation_to);

                }
                else if($type=="upload_album") {
//                    echo self::upload_activity($user_from,$operation_to);
                }
                else if($type="create_account") {

                }
                else {

                }
        } 
```

功能投票活动是

```
function vote_activity($user_from,$operation_to) {
        ob_start();
        global $db;
        $table = "userinformation";
        $data = array("user_id"=>$user_from);
        $result = $db->select($table,$data);
        while($row = mysql_fetch_array($result)) {
            $name = $row[1]." ".$row[2];
        }

        $table = "photo_gallery";
        $data = array("photo_id"=>$operation_to);
        $result = $db->select($table,$data);
        while($row = mysql_fetch_array($result)) {
            $extension = $row[6];
            $user_id = $row[0];
        }

        $source_file_path = basedir."/storage/".$user_id."/".$operation_to.".".$extension;
        $height=200;
        $width=200;
        ?>

            <div class="vote_activity_div" >
                <p class="vote_p"><a><?php echo $name?></a> vote this photo.</p>
                <img class="vote_image" src="Create_thumbnail.php?source_file_path=<?php echo $source_file_path;?>&extension=<?php echo $extension; ?>&height=<?php echo $height; ?>&width=<?php echo $width; ?>"/>
            </div>   
        <?php
        $vote_activity = ob_get_contents();
        ob_clean();
        return $vote_activity;
    } 
```

问题是，当我多次调用此 vote_activity 类时，循环的第一个投票 div 离开了父 div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T23:47:17.413

我认为您最好的选择是确保代码输出到已清除浮动等的父 DIV，以确保没有转义。所以在你运行你的脚本之前，或者你正在这样做之前，创建一个带有类的父 div，例如`vote_activity_parent`

我希望这有帮助！

我认为值得补充的是，您可能还需要检查您的代码以确保它在正确的位置输出，否则您的脚本可能会在任何不适合控制的地方输出此 DIV。

# windows - 有没有办法锁定目录（文件在使用时被锁定的方式）？

> ID：11588270
> 
> 赞同：0
> 
> 时间：2012-02-29T09:39:00.507
> 
> 标签：windows

我正在编写一个更新程序（使用 NSIS），我想在安装目录上获得某种锁定，以确保我对该目录中的*所有*文件都有写访问权限。有没有办法做到这一点？或者至少如何检测指定目录中没有文件正在使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-02-29T20:14:20.313

做你想做的事情的正确方法是使用 Transactional NTFS 将多个文件一次大量写入目录。这样你就不需要使用锁了。

# firefox - drupal 站点上的 Firefox 缓存问题

> ID：11588277
> 
> 赞同：0
> 
> 时间：2012-07-20T23:45:22.993
> 
> 标签：firefox, drupal, caching

所以我遇到的问题是我对我的drupal网站上的一个css文件进行了更改。当我导航到我所定位的网站部分时，该更改会立即显示在 google chrome 上。当我在 Firefox 中导航到该站点的该部分时，它会显示我之前访问过的旧页面。当然，手动刷新 Firefox 可以解决此问题。

问题在于，当用户看到旧版本的页面时，他们可能不知道点击刷新按钮，并认为它已损坏。

所以基本上，有没有办法检查当前页面是否已被缓存并告诉firefox在php中清除它，或者可能是更优雅的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T01:27:30.000

不幸的是，您无法轻易辨别客户端是否缓存了来自 PHP 或任何服务器环境的页面。但是，您可以建议浏览器是否缓存以及缓存多长时间。这是通过设置 Cache-Control HTTP 标头（和朋友）来实现的。请参阅[此页面](http://palizine.plynt.com/issues/2008Jul/cache-control-attributes/)。大多数人倾向于将缓存指定为未来几个小时，因此用户将看到不超过 2 小时的陈旧数据。我建议这样做，但您也可以指示浏览器有效地完全关闭缓存。无论如何，我认为最简单的解决方案是在您的 .htaccess 文件中设置这些标头。

这是一个有 2 小时时间限制的示例：

```
# Cache CSS and JS files for up to 2 hours
<FilesMatch "\.(css|js)$">
    <IfModule mod_headers.c>
        # Set Max-age to 7200 seconds (2 hours), revalidate after 2 hours (ask the server if the file's changed)
        Header set Cache-Control "max-age=7200, must-revalidate"
    </IfModule>
    FileETag MTime Size
</FilesMatch> 
```

另一种选择是允许缓存，但强制客户端询问服务器是否对每个请求进行了任何更改。这不会有那么大的好处，尤其是在提供许多 css 和 js 文件的页面上（通常是 Drupal 的情况），因为浏览器仍然必须为每个文件向服务器发出往返请求：

```
# Only use cache if checking with the server results in a 304 (Not Modified)
<FilesMatch "\.(css|js)$">
    <IfModule mod_headers.c>
        # Instruct the client and possibly proxies in front of the client to check for new versions every 0 seconds (always)
        Header set Cache-Control "max-age=0, public, must-revalidate, proxy-revalidate"
        # For older browsers
        Header set Expires "Thu, 01 Jan 1970 00:00:00 GMT"
    </IfModule>
    FileETag MTime Size
</FilesMatch> 
```

最后，您可以要求浏览器禁用缓存。除非您确定文件会非常频繁地更改，否则我不建议这样做，因为页面加载时间会受到影响：

```
# Disable caching
<FilesMatch "\.(css|js)$">
    <IfModule mod_headers.c>
        Header set Cache-Control "no-store, no-cache, must-revalidate, proxy-revalidate, max-age=0"
        # For older browsers
        Header set Expires "Thu, 01 Jan 1970 00:00:00 GMT"
    </IfModule>
    FileETag MTime Size
</FilesMatch> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T02:54:49.380

对于更简单的（非 drupal）解决方案，您可以将样式 meta href 重命名为其他内容。例如。 **style.css?vers=1.0 ... style.css?vers=1.1 ... style.css?vers=1.1a ...等**

对于 Drupal，点击**清除所有缓存**按钮将重命名您的样式表引用，如上所示。（配置/开发/性能）

# javascript - 如何从 done() 函数中的 .ajax 请求访问返回值

> ID：11588282
> 
> 赞同：2
> 
> 时间：2012-07-20T23:46:03.493
> 
> 标签：javascript, jquery, ajax, deferred

这是我的函数，它返回一个人的名字。

```
function getName(ID){
    return $.ajax({
        url:url,
        data: ID,
        type: 'get',
        dataType: 'json'
    });
} 
```

这是我尝试使用 .done() 函数的地方。

```
getName("1").done() // How do I ref the returned var in our done function? 
```

我对如何在我的完成函数中引用我的 getName 函数的返回值感到困惑。

我知道我可以使用 success: 在 .ajax 中做到这一点，但我正试图摆脱它并使用延迟对象。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T23:48:19.490

看起来完成需要一个回调函数，该函数接受一个参数，其中包含从请求中收到的数据。 [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

```
getName("1").done(function(response) {
  alert(response);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T23:52:45.590

它就在[文档](http://api.jquery.com/jQuery.ajax/)中：

```
//Example: Save some data to the server and notify the user once it's complete.
$.ajax({
  type: "POST",
  url: "some.php",
  data: { name: "John", location: "Boston" }
}).done(function( msg ) {
  alert( "Data Saved: " + msg );
});

//Example: Retrieve the latest version of an HTML page.
$.ajax({
  url: "test.html",
  cache: false
}).done(function( html ) {
  $("#results").append(html);
}); 
```

另外，请确保您阅读[此](http://api.jquery.com/jQuery.ajax/#data-types)内容，因为根据数据类型，您实际上可能“接收”的不是简单的字符串/id，而是可能从 JSON/XML 结果解析的对象或...

# ruby-on-rails - Heroku rails 应用程序崩溃

> ID：11588284
> 
> 赞同：0
> 
> 时间：2012-07-20T23:46:29.543
> 
> 标签：ruby-on-rails, heroku, crash

# 当我将应用程序部署到 heroku 时，我的应用程序出现问题

**heroku 日志**

```
2012-07-20T22:54:29+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/railtie/configurable.rb:30:in `method_missing'
2012-07-20T22:54:29+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/engine.rb:587:in `block in <class:Engine>'
2012-07-20T22:54:29+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
2012-07-20T22:54:29+00:00 app[web.1]:   from /app/config.ru:4:in `block in <main>'
2012-07-20T22:54:29+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `block in require'
2012-07-20T22:54:29+00:00 app[web.1]:   from /app/config.ru:1:in `new'
2012-07-20T22:54:29+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
2012-07-20T22:54:29+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `require'
2012-07-20T22:54:29+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
2012-07-20T22:54:29+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/commands/server.rb:46:in `app'
2012-07-20T22:54:29+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
2012-07-20T22:54:29+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:54:in `run_initializers'
2012-07-20T22:54:29+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:236:in `load_dependency'
2012-07-20T22:54:29+00:00 app[web.1]:   from script/rails:6:in `<main>'
2012-07-20T22:54:29+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `require'
2012-07-20T22:54:29+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
2012-07-20T22:54:29+00:00 app[web.1]:   from script/rails:6:in `require'
2012-07-20T22:54:29+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
2012-07-20T22:54:29+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/commands.rb:55:in `block in <top (required)>'
2012-07-20T22:54:29+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
2012-07-20T22:54:29+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/commands.rb:50:in `<top (required)>'
2012-07-20T22:54:29+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/commands/server.rb:70:in `start'
2012-07-20T22:54:29+00:00 app[web.1]:   from /app/config.ru:1:in `<main>'
2012-07-20T22:54:29+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/commands.rb:50:in `tap'
2012-07-20T23:03:33+00:00 heroku[router]: Error H10 (App crashed) -> GET peaceful-reef-1889.herokuapp.com/ dyno= queue= wait= service= status=503 bytes=
2012-07-20T23:03:35+00:00 heroku[router]: Error H10 (App crashed) -> GET peaceful-reef-1889.herokuapp.com/favicon.ico dyno= queue= wait= service= status=503 bytes= 
```

[https://github.com/Envek/taurus](https://github.com/Envek/taurus)该应用程序本身在本地主机上运行良好。谁能帮我解决这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T00:05:47.100

查看这些错误行：

> 2012-07-20T23:39:09+00:00 app[web.1]：致命：不是 git 存储库（或任何父目录）：.git

可能您没有在本地初始化您的存储库。尝试：

```
git init
git add .
git commit -m 'First commit' 
```

之后部署到heroku。

# python - python后期绑定 - 动态地将本地人放在范围内

> ID：11588289
> 
> 赞同：4
> 
> 时间：2012-07-20T23:47:18.693
> 
> 标签：python, functional-programming, monads

我有一个函数 m_chain，它指的是两个`bind`未定义`unit`的函数。我想将此函数包装在为这些函数提供定义的某些上下文中 - 您可以将它们视为我想为其动态提供实现的接口。

```
def m_chain(*fns):
    """what this function does is not relevant to the question"""
    def m_chain_link(chain_expr, step):
        return lambda v: bind(chain_expr(v), step)
    return reduce(m_chain_link, fns, unit) 
```

在 Clojure 中，这是通过宏完成的。在 python 中有哪些优雅的方法可以做到这一点？我考虑过：

*   多态性：将 m_chain 转换为引用`self.bind`and的方法`self.unit`，其实现由子类提供
*   实现`with`接口，这样我就可以修改环境映射，然后在我完成后清理
*   更改 m_chain 的签名以接受单元并绑定作为参数
*   要求使用 m_chain 由装饰器包裹，该装饰器将做某事或其他事情 - 不确定这是否有意义

理想情况下，我根本不想修改 m_chain，我想按原样使用定义，并且上述所有选项都需要更改定义。这一点很重要，因为还有其他 m_* 函数引用了在运行时提供的附加函数。

我如何最好地构建它，以便我可以很好地传递绑定和单元的实现？尽管实现复杂，但 m_chain 的最终用法必须非常易于使用，这一点很重要。

编辑：这是另一种可行的方法，它非常丑陋，因为它需要将 m_chain 柯里化为没有参数的函数。但这是一个最小的工作示例。

```
def domonad(monad, cmf):
    bind = monad['bind']; unit = monad['unit']
    return cmf()

identity_m = {
    'bind':lambda v,f:f(v),
    'unit':lambda v:v
}

maybe_m = {
    'bind':lambda v,f:f(v) if v else None,
    'unit':lambda v:v
}

>>> domonad(identity_m, lambda: m_chain(lambda x: 2*x, lambda x:2*x)(2))
8
>>> domonad(maybe_m, lambda: m_chain(lambda x: None, lambda x:2*x)(2))
None 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-21T00:12:02.960

在 Python 中，你可以编写所有你想要的引用不存在的东西的代码；具体来说，您可以编写引用没有绑定值的名称的代码。您可以编译该代码。唯一的问题将发生在运行时，如果名称仍然没有绑定到它们的值。

这是您可以在 Python 2 和 Python 3 下运行的代码示例。

```
def my_func(a, b):
    return foo(a) + bar(b)

try:
    my_func(1, 2)
except NameError:
    print("didn't work") # name "foo" not bound

# bind name "foo" as a function
def foo(a):
    return a**2

# bind name "bar" as a function
def bar(b):
    return b * 3

print(my_func(1, 2))  # prints 7 
```

如果您不希望名称仅绑定在本地名称空间中，但您希望能够对每个函数进行微调，我认为 Python 中的最佳实践是使用命名参数。您总是可以关闭函数参数并返回一个新的函数对象，如下所示：

```
def my_func_factory(foo, bar):
    def my_func(a, b):
        return foo(a) + bar(b)
    return my_func

my_func0 = my_func_factory(lambda x: 2*x, lambda x:2*x)
print(my_func0(1, 2))  # prints 6 
```

编辑：这是您的示例，使用上述想法进行了修改。

```
def domonad(monad, *cmf):
    def m_chain(fns, bind=monad['bind'], unit=monad['unit']):
        """what this function does is not relevant to the question"""
        def m_chain_link(chain_expr, step):
            return lambda v: bind(chain_expr(v), step)
        return reduce(m_chain_link, fns, unit)

    return m_chain(cmf)

identity_m = {
    'bind':lambda v,f:f(v),
    'unit':lambda v:v
}

maybe_m = {
    'bind':lambda v,f:f(v) if v else None,
    'unit':lambda v:v
}

print(domonad(identity_m, lambda x: 2*x, lambda x:2*x)(2)) # prints 8
print(domonad(maybe_m, lambda x: None, lambda x:2*x)(2)) # prints None 
```

请让我知道这将如何为您工作。

编辑：好的，在您发表评论后再发布一个版本。您可以按照这种模式编写任意`m_`函数：它们检查`kwargs`key `"monad"`。这必须设置为命名参数；没有办法将它作为位置参数传递，因为该`*fns`参数将所有参数收集到一个列表中。我提供了默认值`bind()`，`unit()`如果它们没有在 monad 中定义，或者没有提供 monad；那些可能不会做你想要的，所以用更好的东西代替它们。

```
def m_chain(*fns, **kwargs):
    """what this function does is not relevant to the question"""
    def bind(v, f):  # default bind if not in monad
        return f(v),
    def unit(v):  # default unit if not in monad
        return v
    if "monad" in kwargs:
        monad = kwargs["monad"]
        bind = monad.get("bind", bind)
        unit = monad.get("unit", unit)

    def m_chain_link(chain_expr, step):
        return lambda v: bind(chain_expr(v), step)
    return reduce(m_chain_link, fns, unit)

def domonad(fn, *fns, **kwargs):
    return fn(*fns, **kwargs)

identity_m = {
    'bind':lambda v,f:f(v),
    'unit':lambda v:v
}

maybe_m = {
    'bind':lambda v,f:f(v) if v else None,
    'unit':lambda v:v
}

print(domonad(m_chain, lambda x: 2*x, lambda x:2*x, monad=identity_m)(2))
print(domonad(m_chain, lambda x: None, lambda x:2*x, monad=maybe_m)(2)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T08:14:23.347

好的，这是我对这个问题的最终答案。

您需要至少在某些时候能够重新绑定某些功能。您的 hack，备份`.__globals__`值并粘贴新值是丑陋的：速度慢，非线程安全，并且特定于 CPython。我已经考虑过这一点，并且没有以这种方式工作的 Pythonic 解决方案。

在 Python 中，您可以重新绑定任何函数，但您必须显式执行此操作，并且某些函数重新绑定不是一个好主意。例如，我喜欢内置的`all()`和`any()`，我认为如果你可以偷偷地重新绑定它们会很可怕，而且不会很明显。

您希望某些功能可以重新绑定，我认为您不需要它们都可以重新绑定。因此，以某种方式标记可重新绑定的功能是非常有意义的。显而易见的 Pythonic 方法是让它们成为我们可以调用的类的方法函数`Monad`。`m`您可以为 的实例使用标准变量名称`Monad`，然后当有人尝试阅读和理解他们的代码时，他们将知道名称为 like 的函数`m.unit()`可能可以通过传入的其他`Monad`实例重新绑定。

如果您遵守以下规则，它将是纯 Python 并且完全可移植：

1.  所有函数都必须绑定在 monad 中。如果你提到 `m.bind()`then`"bind"`必须出现在`.__dict__`的实例中`Monad`。
2.  函数 using`Monad`必须接受一个命名参数`m=`，或者对于将使用该`*args`功能的函数，必须接受一个`**kwargs`参数并检查它是否有一个名为 的键`"m"`。

这是我想到的一个例子。

```
class Monad(object):
    def __init__(self, *args, **kwargs):
        # init from each arg.  Try three things:
        # 0) if it has a ".__dict__" attribute, update from that.
        # 1) if it looks like a key/value tuple, insert value for key.
        # 2) else, just see if the whole thing is a dict or similar.
        # Other instances of class Monad() will be handled by (0)
        for x in args:
            if hasattr("__dict__", x):
                self.__dict__.update(x.__dict__)
            else:
                try:
                    key, value = x
                    self.__dict__[key] = value
                except TypeError:
                    self.__dict__.update(x)
        self.__dict__.update(kwargs)

def __identity(x):
    return x

def __callt(v, f):
    return f(v)

def __callt_maybe(v, f):
    if v:
        return f(v)
    else:
        return None

m_identity = Monad(bind=__callt, unit=__identity)
m_maybe = Monad(bind=__callt_maybe, unit=__identity)

def m_chain(*fns, **kwargs):
    """what this function does is not relevant to the question"""
    m = kwargs.get("m", m_identity)
    def m_chain_link(chain_expr, step):
        return lambda v: m.bind(chain_expr(v), step)
    return reduce(m_chain_link, fns, m.unit)

print(m_chain(lambda x: 2*x, lambda x:2*x, m=m_identity)(2)) # prints 8
print(m_chain(lambda x: None, lambda x:2*x, m=m_maybe)(2)) # prints None 
```

上面的代码是干净的、Pythonic 的，在 IronPython、Jython 或 PyPy 下运行应该和在 CPython 下运行一样好。在内部`m_chain()`，表达式`m = kwargs.get("m", m_identity)`尝试读出指定的 monad 参数；如果找不到，则将 monad 设置为`m_identity`.

但是，你可能想要更多。您可能希望`Monad`该类仅支持可选地覆盖函数名称；你可能愿意只使用 CPython。这是上面的一个更棘手的版本。在这个版本中，当计算表达式时`m.some_name()`，如果`Monad`实例`m`没有`some_name`在其 中绑定名称`.__dict__`，它将`some_name`在调用者的局部变量中查找，并在`globals()`.

在这种情况下，表达式`m.some_name()`表示 "`m`可以覆盖`some_name`但不必；`some_name`可能不在 中`m`，在这种情况下`some_name`将被查找，就好像它没有以`m.`" 为前缀。神奇之处在于函数`.__getattr__()`，它用于`sys._getframe()`查看调用者的本地人。 `.__getattr__()`仅在本地查找失败时调用，因此我们知道该`Monad`实例没有`name`绑定 in `.__dict__`；所以查看属于调用者的本地人，使用`sys._getframe(1).f_locals`; 如果失败，请查看`globals()`. 只需将其插入到`Monad`上面源代码中的类定义中即可。

```
def __getattr__(self, name):
    # if __getattr__() is being called, locals() were already checked
    d = sys._getframe(1).f_locals
    if name in d:
        return d[name]

    d = globals()
    if name in d:
        return d[name]

    mesg = "name '%s' not found in monad, locals, or globals" % name
    raise NameError, mesg 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T16:33:37.240

这就是我最终的做法。不知道这是否是个好主意。但它让我编写我的 m_* 函数完全独立于单元/绑定的实现，也完全独立于在 python 中完成单子的方式的任何实现细节。正确的东西就在词法范围内。

```
class monad:
    """Effectively, put the monad definition in lexical scope.
    Can't modify the execution environment `globals()` directly, because
    after globals().clear() you can't do anything.
    """
    def __init__(self, monad):
        self.monad = monad
        self.oldglobals = {}

    def __enter__(self):
        for k in self.monad:
            if k in globals(): self.oldglobals[k]=globals()[k]
            globals()[k]=self.monad[k]

    def __exit__(self, type, value, traceback):
        """careful to distinguish between None and undefined.
        remove the values we added, then restore the old value only
        if it ever existed"""
        for k in self.monad: del globals()[k]
        for k in self.oldglobals: globals()[k]=self.oldglobals[k]

def m_chain(*fns):
    """returns a function of one argument which performs the monadic
    composition of fns."""
    def m_chain_link(chain_expr, step):
        return lambda v: bind(chain_expr(v), step)
    return reduce(m_chain_link, fns, unit)

identity_m = {
    'bind':lambda v,f:f(v),
    'unit':lambda v:v
}

with monad(identity_m):
    assert m_chain(lambda x:2*x, lambda x:2*x)(2) == 8

maybe_m = {
    'bind':lambda v,f:f(v) if v else None,
    'unit':lambda v:v
}

with monad(maybe_m):
    assert m_chain(lambda x:2*x, lambda x:2*x)(2) == 8
    assert m_chain(lambda x:None, lambda x:2*x)(2) == None

error_m = {
    'bind':lambda mv, mf: mf(mv[0]) if mv[0] else mv,
    'unit':lambda v: (v, None)
}

with monad(error_m):
    success = lambda val: unit(val)
    failure = lambda err: (None, err)

    assert m_chain(lambda x:success(2*x), lambda x:success(2*x))(2) == (8, None)
    assert m_chain(lambda x:failure("error"), lambda x:success(2*x))(2) == (None, "error")
    assert m_chain(lambda x:success(2*x), lambda x:failure("error"))(2) == (None, "error")

from itertools import chain
def flatten(listOfLists):
    "Flatten one level of nesting"
    return list(chain.from_iterable(listOfLists))

list_m = {
    'unit': lambda v: [v],
    'bind': lambda mv, mf: flatten(map(mf, mv))
}

def chessboard():
    ranks = list("abcdefgh")
    files = list("12345678")

    with monad(list_m):
        return bind(ranks, lambda rank:
               bind(files, lambda file:
                       unit((rank, file))))

assert len(chessboard()) == 64
assert chessboard()[:3] == [('a', '1'), ('a', '2'), ('a', '3')] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T23:00:03.330

Python 已经很晚了。这里不需要做任何工作：

```
def m_chain(*args):
    return bind(args[0])

sourcemodulename = 'foo'
sourcemodule = __import__(sourcemodulename)
bind = sourcemodule.bind

print m_chain(3) 
```

# iphone - 在核心图形中加入两个矩形

> ID：11588290
> 
> 赞同：1
> 
> 时间：2012-07-20T23:47:41.283
> 
> 标签：iphone, ios, core-graphics

我正在尝试进入 Core Graphics。我试图从 2 个矩形中画出某个形状的那一刻。现在我想加入那些展位来使用渐变和颜色功能。我不确定是否有办法。这是一张图片： ![这是一张图片](../Images/3e65263166d1a8311254e10ca794e299.png)

这是我的代码片段：

```
-(void)drawRoundedRect:(CGRect)rect
{
    CGContextRef ctx = UIGraphicsGetCurrentContext();

    CGRect frame1 = CGRectMake(self.bounds.origin.x, self.bounds.origin.y+45, self.bounds.size.width, self.bounds.size.height-45);

    CGRect frame2 = CGRectMake(self.bounds.size.width-80, self.bounds.origin.y+25, 80, 50);

    CGPathRef roundedRectPath1 = [self newPathForRoundedRect:frame1 radius:15];
    CGPathRef roundedRectPath2 = [self newPathForRoundedRect:frame2 radius:11];
    CGContextSetRGBFillColor(ctx, 200, 200, 200, 0.5);

    CGContextAddPath(ctx, roundedRectPath1);
    CGContextFillPath(ctx);

    CGPathRelease(roundedRectPath1);
    CGContextAddPath(ctx, roundedRectPath2);
    CGContextFillPath(ctx);
    CGPathRelease(roundedRectPath2);

}

-(CGPathRef) newPathForRoundedRect:(CGRect)rect radius:(CGFloat)radius
{

    CGMutablePathRef retPath = CGPathCreateMutable();

    CGRect innerRect = CGRectInset(rect, radius, radius);

    CGFloat inside_right = innerRect.origin.x + innerRect.size.width;
    CGFloat outside_right = rect.origin.x + rect.size.width;
    CGFloat inside_bottom = innerRect.origin.y + innerRect.size.height;
    CGFloat outside_bottom = rect.origin.y + rect.size.height;

    CGFloat inside_top = innerRect.origin.y;
    CGFloat outside_top = rect.origin.y;
    CGFloat outside_left = rect.origin.x;

    CGPathMoveToPoint(retPath, NULL, innerRect.origin.x, outside_top);

    CGPathAddLineToPoint(retPath, NULL, inside_right, outside_top);
    CGPathAddArcToPoint(retPath, NULL, outside_right, outside_top, outside_right, inside_top, radius);
    CGPathAddLineToPoint(retPath, NULL, outside_right, inside_bottom);
    CGPathAddArcToPoint(retPath, NULL,  outside_right, outside_bottom, inside_right, outside_bottom, radius);

    CGPathAddLineToPoint(retPath, NULL, innerRect.origin.x, outside_bottom);
    CGPathAddArcToPoint(retPath, NULL,  outside_left, outside_bottom, outside_left, inside_bottom, radius);
    CGPathAddLineToPoint(retPath, NULL, outside_left, inside_top);
    CGPathAddArcToPoint(retPath, NULL,  outside_left, outside_top, innerRect.origin.x, outside_top, radius);

    CGPathCloseSubpath(retPath);

    return retPath;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T00:41:46.397

你在这里做的工作太多了。只需使用 UIBezierPath 的`+bezierPathWithRoundedRect:cornerRadius:`和`– appendPath:` 方法。

```
CGRect rect1, rect2;
CGFloat radius;

  // fill in the values you want for the rects and the radius
UIBezierPath *result = 
    [UIBezierPath bezierPathWithRoundedRect: rect1 cornerRadius:radius];
[result appendPath: 
    [UIBezierPath bezierPathWithRoundedRect: rect2 cornerRadius:radius];

 // result is now a path comprising both of the roundrects.  You can fill it with a gradient like any other path. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T00:37:17.037

你有一些选择：

1.  构造一条新路径，形成两条不相交的独立路径的联合。Core Graphics 不会帮助您使用这种方法，它不提供布尔路径操作。
2.  使用透明层绘制两个形状（一个接一个）。这将修复重叠区域，但不适用于渐变。
3.  创建位图上下文以创建蒙版。将两个形状都绘制到蒙版中。然后在原始上下文中剪辑到蒙版，并在形状的边界框上绘制一个矩形。

# c# - WebClient 未发送所有 cookie

> ID：11588293
> 
> 赞同：0
> 
> 时间：2012-07-20T23:47:57.563
> 
> 标签：c#, asp.net

我正在使用可识别 cookie 的 Web 客户端

```
public class CookieAwareWebClient : WebClient
{

    public CookieContainer m_container = new CookieContainer();

    protected override WebRequest GetWebRequest(Uri address)
    {
        WebRequest request = base.GetWebRequest(address);
        if (request is HttpWebRequest)
        {
            (request as HttpWebRequest).CookieContainer = m_container;
        }
        return request;
    }

    public CookieCollection Cookies(Uri domain)
    {
        return m_container.GetCookies(domain);
    }
} 
```

并向一个网站发出一些请求，该网站会像这样丢弃一组 cookie

```
webClient.Cookies(new Uri("http://<domain>.com")).Cast<Cookie>().ToArray()

{System.Net.Cookie[7]}
    [0]: {UsrLocale=en_CA}
    [1]: {Country=CA}
    [2]: {$Version=1; ca_ord="UJMupexgTADsaH1yNi9eyA=="; $Path=/; $Domain=.<domain>.com}
    [3]: {isLoggedin=false}
    [4]: {cartCount=1}
    [5]: {userPrefLanguage=en_CA} 
```

下一个请求没有按预期工作，当我查看提琴手时，我看到 cookie[2] 尚未添加到标题中。从外观上看，这一点非常重要。有谁知道为什么它不会被添加到请求中？所有其他人都可以正常弹出，并且我正在向其发出请求的域是 cookie 中列出的域的子域，即 subDomain..com

```
var domain = new Uri("http://domain.com");
                    var webClient = new CookieAwareWebClient();
                    webClient.OpenRead("http://sub.domain.com");
                    webClient.RefreshCookies(domain);
                    webClient.UploadValues("http://sub.domain.com/browse/submit.jsp", new NameValueCollection
                        {
                            {"productId","prod610181"},
                            {"skuId","3431733"},
                            {"quantity","1"},
                            {"page","MAIN"}
                        });
                    webClient.RefreshCookies(domain);
                    webClient.OpenRead("http://sub.domain.com/shopping/bag.jsp");
                    webClient.RefreshCookies(domain);
                    var order = webClient.Cookies(new Uri("http://domain.com")).Cast<Cookie>().ToArray(); 
```

# ruby - Rails，如何迁移大量数据？

> ID：11588295
> 
> 赞同：19
> 
> 时间：2012-07-20T23:48:15.340
> 
> 标签：ruby, ruby-on-rails-3, database-migration, spree

我有一个运行旧版本 Spree（开源购物车）的 Rails 3 应用程序。我正在将其更新到最新版本。这需要我在数据库上运行大量迁移以与最新版本兼容。然而，应用程序当前的数据库大约是 300mb，并且在我的本地机器（mac os x 10.7、4gb ram、2.4GHz Core 2 Duo）上运行迁移需要三天才能完成。

我能够使用 Amazon EC2 实例（高 I/O 按需实例，四倍超大）将这个时间减少到仅 16 小时。但是 16 小时仍然太长，因为我必须关闭网站才能执行此更新。

有没有人有任何其他建议来降低这个时间？或者有什么技巧可以提高迁移的性能？

仅供参考：在 Amazon 实例上使用 Ruby 1.9.2 和 Ubuntu。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T13:45:21.587

*   事先删除索引并在之后再次添加它们是一个好主意。

*   如前所述，还将 .where(...).each 替换为 .find_each 并添加事务可能会有所帮助。

*   替换.save！使用 .save(:validate => false)，因为在迁移期间您没有从用户那里获得随机输入，您应该进行已知良好的更新，并且验证占了大部分执行时间。或者使用 .update_attribute 也会跳过只更新一个字段的验证。

*   在可能的情况下，在循环中使用更少的 AR 对象。实例化和稍后的垃圾收集会占用 CPU 时间并使用更多内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T23:58:30.890

也许你已经考虑过这个：

1.  告诉数据库不要费心确保一切都在磁盘上（没有 WAL，没有 fsync 等），你现在有一个内存数据库，这应该会产生很大的不同。（由于您已使数据库脱机，因此您可以在不太可能发生断电或类似情况的情况下从备份中恢复）。完成后打开 fsync/WAL。

2.  在使数据库脱机之前，您可能可以进行一些迁移。当然，在 staging 环境中进行测试。大用户迁移很可能会实时进行。确保您不在事务中执行此操作，您可能需要对它们进行一些修改。

我不熟悉你的具体情况，但我相信你可以做更多的事情，除非这还不够。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T12:17:53.220

不幸的是，降级的解决方案是唯一的。rails 中真正慢的是 activerecord 模型。不适合这样的任务。

如果您想要快速迁移，则必须在 sql 中进行。

还有另一种方法。但是你总是需要重写大部分迁移......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T05:49:49.393

这个答案更多的是关于方法而不是特定的技术解决方案。如果您的主要标准是最短停机时间（当然还有数据完整性），那么最好的策略就是不使用 Rails！

相反，您可以预先完成所有繁重的工作，并将关键的“实时”数据迁移（我在这里使用非 Rails 意义上的“迁移”）作为切换过程中的一个步骤。

因此，您拥有当前的应用程序及其数据库架构和生产数据。您还（可能）拥有基于升级的 spree gem 的应用程序开发版本，具有新的 db 模式但没有数据。您所要做的就是找出一种在两者之间转换数据的方法。这可以通过多种方式完成，例如在必要时使用纯 SQL 和临时表或使用 SQL 和 ruby​​ 生成插入语句。这些步骤可以拆分，以便可以提前将相当“静态”的数据（参考表、产品等）加载到数据库中，并且可以将更频繁更改的数据（用户、会话、订单等）在迁移步骤中完成。

您应该能够编写此导出-转换-导入过程的脚本，使其可重复，并在完成后进行测试/检查以确保数据完整性。如果您可以在切换期间安排对新生产数据库的访问，那么对它运行脚本应该很容易。如果您受限于发布过程（例如 webistrano），那么您可能不得不将其硬塞到 Rails 迁移中，但您可以使用 execute 运行原始 SQL。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-05T22:02:37.833

看看这个宝石。 [https://github.com/zdennis/activerecord-import/](https://github.com/zdennis/activerecord-import/)

```
data = []
data << Order.new(:order_info => 'test order')
Order.import data 
```

# git - 使用 git 进行安全的主主设置？（可写的 git 镜像）

> ID：11588296
> 
> 赞同：0
> 
> 时间：2012-07-20T23:48:16.697
> 
> 标签：git, version-control, conflict, mirror

已经建立了一个主 git repo 和它的镜像。经过一些实验，我发现了一个典型的冲突解决（错误）管理：在没有警告的情况下，git 只是丢弃了冲突的提交——一个非常疯狂的默认设置。

在仔细阅读了SO之后，我尝试了

```
git config receive.denyNonFastForwards 1
git config receive.denyDeletes 1 
```

但这并不能解决丢失的提交问题。当主存储库和镜像存储库中有两个冲突的提交时，

```
git remote update
git push --mirror 
```

镜像上的会覆盖镜像上的相应提交。如果幸运的话，提交已删除提交的人将在下一次拉取时检测到这一点。

是否有任何其他配置选项可以防止强制更新/删除，或者提交整个冲突，以便下一个要拉的人能够解决它，无论他是否参与产生冲突？

那里有更好的 SCM 吗？或者更准确地说：当在分布式环境中运行时，是否有 SCM 可以更安全地处理冲突解决？示例：为什么不将两个或多个提交记录为“并行”并让下一位编辑将它们重新组合在一起？人们可以将这种行为描述为“自动分支”。然后相当于“git pull”将检测新的上游分支点并要求用户决定走哪条路......

# objective-c - seekToTime 搞砸了两个 AVPlayer 的同时播放

> ID：11588299
> 
> 赞同：1
> 
> 时间：2012-07-20T23:48:27.570
> 
> 标签：objective-c, avplayer

跟随问题。我有两个 AVPlayer，每个都用不同的 AVPlayerItem 初始化。成功加载 AVPlayerItem 后，我将 AVPlayerLayer 添加到视图层。正如您在下面的代码中看到的那样。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.playerItem = [[AVPlayerItem alloc] initWithURL:[self.video getVideoPath]];
    [self.playerItem addObserver:self forKeyPath:@"status" options:0 context:nil];
    [self.playerItem addObserver:self forKeyPath:@"playbackBufferEmpty" options:0 context:nil];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(videoEnded)
                                             name:AVPlayerItemDidPlayToEndTimeNotification
                                           object:nil];

    self.player = [[AVPlayer alloc] initWithPlayerItem:playerItem];

    self.overlayPlayerItem = [[AVPlayerItem alloc] initWithURL:[self.compareVideo getVideoPath]];

    [self.overlayPlayerItem addObserver:self forKeyPath:@"status" options:0 context:nil];
    [self.overlayPlayerItem addObserver:self forKeyPath:@"playbackBufferEmpty" options:0 context:nil];

    if (self.overlayPlayer==nil) {
        self.overlayPlayer = [[AVPlayer alloc] initWithPlayerItem:self.overlayPlayerItem];
}

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    if ([object isKindOfClass:[AVPlayerItem class]])
    {
        AVPlayerItem *item = (AVPlayerItem *)object;
        //playerItem status value changed?
    if ([keyPath isEqualToString:@"status"])
    {   //yes->check it...
        switch(item.status)
        {
            case AVPlayerItemStatusFailed:
                NSLog(@"player item status failed");
                break;
            case AVPlayerItemStatusReadyToPlay:
            {
                NSLog(@"player item status is ready to play");
                if (item == self.playerItem && !videoLayerAdded) {
                    videoLayerAdded = YES;
                    AVPlayerLayer* layer = [AVPlayerLayer playerLayerWithPlayer:player];
                    layer.frame = self.videoContainer.bounds;
                    [self.videoContainer.layer insertSublayer:layer atIndex:0];
                } else if (item == self.overlayPlayerItem && !overlayLayerAdded){
                    overlayLayerAdded = YES;
                    AVPlayerLayer* layer = [AVPlayerLayer playerLayerWithPlayer:overlayPlayer];
                    layer.frame = self.videoOverlayContainer.bounds;
                    [self.videoOverlayContainer.layer insertSublayer:layer atIndex:0];
                }
                break;
            }
            case AVPlayerItemStatusUnknown:
                NSLog(@"player item status is unknown");
                break;
        }
    }
    else if ([keyPath isEqualToString:@"playbackBufferEmpty"])
    {
        if (item.playbackBufferEmpty)
        {
            NSLog(@"player item playback buffer is empty");
        }
    }
}
} 
```

当我点击播放按钮时，视频就会播放。如果我再次击中它，它们就会停下来，到目前为止一切都很好。

```
- (IBAction)playButtonClicked:(id)sender{

    //is playing
    if(self.player.rate>0.0 || self.overlayPlayer.rate>0.0){
        [self.player pause];
        [self.overlayPlayer pause];
    } else {
        [self.player play];
        [self.overlayPlayer play];
    }
} 
```

我有两个 UISlider 可以让我来回浏览每个视频。我使用 seekToTime 跳转到视频中的某个时间。

```
- (IBAction)sliderChanged:(id)sender{
    UISlider *slider = (UISlider *)sender;

    //stop any video when using the slider
    if(self.player.rate>0.0){
            [self.player pause];
    }
    if(self.overlayPlayer.rate>0.0){
        [self.overlayPlayer pause];
    }

    if (slider.tag == 1) {
        double time = (self.playerTimeSlider.value * CMTimeGetSeconds(self.player.currentItem.asset.duration));
        [self.player seekToTime:CMTimeMakeWithSeconds(time, NSEC_PER_SEC) toleranceBefore:kCMTimeZero toleranceAfter:kCMTimeZero];
    } else if (slider.tag == 2){
        double time = (self.overlayTimeSlider.value * CMTimeGetSeconds(self.overlayPlayer.currentItem.asset.duration));
        [self.overlayPlayer seekToTime:CMTimeMakeWithSeconds(time, NSEC_PER_SEC) toleranceBefore:kCMTimeZero toleranceAfter:kCMTimeZero];
    }
} 
```

视频也可以有不同的长度。但是，如果视频结束，我将它设置回开始，同样使用 seekToTime。

我的问题是我最初可以播放两个视频。我可以毫无问题地暂停和恢复它们。但是，一旦我暂停并对任何视频使用 seekToTime 并继续播放，或者如果视频结束，我会使用 seekToTime 重置它们并再次点击播放，我的状态观察器会为两个 PlayerItems 触发 AVPlayerItemStatusFailed。

然后这些项目的持续时间变为 0。我检查过，PlayerItems 不是零。

我没有崩溃，但我不能再播放视频了。当我只使用一个播放器时，我可以使用 seekToTime 跳过它，也可以在视频结束时将其重置，没有问题。

我通读了论坛，人们说您显然最多可以使用 4 个 AVPlayer，所以我想我应该保存 2 个。我还读到其他应用程序可以用完视频渲染管道，但我确保我没有在我的 iPad 上的后台有任何其他应用程序。

非常感谢任何有关为什么这对我不起作用甚至更好的解决方法的帮助。

**更新：** 我现在实际上从 AVPlayerItem 对象记录了错误：

```
error: Error Domain=AVFoundationErrorDomain Code=-11819 "Cannot Complete Action"  
UserInfo=0x19e370 {NSLocalizedRecoverySuggestion=Try again later., 
NSLocalizedDescription=Cannot Complete Action} 
```

代码 -11819 代表 AVErrorMediaServicesWereReset。这对任何人帮助我有帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T02:12:25.337

这可能是一个很长的镜头，但请查看文档的以下页面：

[AV Foundation 编程指南 - Seeking—重新定位播放头](http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/02_Playback.html#//apple_ref/doc/uid/TP40010188-CH3-SW6)

我的提示是，通过将容差设为零（之前和之后），您可能会导致解码器从计算确切请求帧的关键帧中解脱出来。

这与同时播放两个项目一起，可能导致分配给 iOS 内部媒体服务的资源耗尽。从而导致复位。我想这取决于许多因素，其中最重要的是正在播放的视频的质量和格式。

如果您不需要在擦洗（！）中进行精确的时间控制，请尝试使用公差。我建议您尝试使用略大于最大关键帧间隔的值。

该值（最大关键帧间隔）很可能取决于电影。

如果您可以控制电影并且可以忍受疯狂的电影文件大小，请尝试使用最大关键帧间隔 1 (!) 导出它们并试一试。

# jquery - jquery mobile标题按钮未对齐

> ID：11588301
> 
> 赞同：1
> 
> 时间：2012-07-20T23:49:07.780
> 
> 标签：jquery, jquery-mobile

我有一种情况，当用户将某些东西放入购物车时，我想显示一个检查图标。我已经有一个按钮，所以这将显示两个按钮，如下所示：

![我多么想要](../Images/09d3811da0296bf0730c0dd169e9c23f.png)

我在第一页上正确显示，所有其他页面显示如下：

![它是如何出现的](../Images/541e00423e7821c445f46a0c88cccb63.png)

这是它们在每个页面的标题中的定义方式（所有页面都包含在同一个文件中）：

```
<div class="ui-btn-right">    
<a class="checkOutButton" data-role="button" id="checkOutButton" href="" data-icon="check" data-iconpos="notext"></a>   
<a class="logoffButton" data-role="button" id="logoffButton" href="#logout" data-icon="delete" data-iconpos="notext"></a> 
</div> 
```

这就是我在我的就绪代码中初始化它们的方式：

```
$('.checkOutButton').bind('click',checkOut);
$('.checkOutButton').hide(); 
```

这就是我在 addCart() 函数中显示它们的方式：

```
$('.checkOutButton').show(); 
```

所有按钮都显示，但仅在主页（第一页）上正确嵌入。如果我单击或点击按钮，它们都会识别单击。是否有一些我似乎不知道的必须设置的宽度 CSS 值？我使用了一个包装器，但它具有我不想要的容器轮廓（另外，我认为它也不能在所有页面上正确工作，但由于我不喜欢它的外观，所以没有进行调查）。

看起来这应该很容易，但我已经通过书籍和谷歌没有成功。以下是帮助页面的示例（所有页面都遵循相同的结构）：

```
<div data-role="page" id="help" data-title="Help Information">
<div data-role="header" data-position="fixed" data-theme="e">
<a href="#home" data-icon="home" data-iconpos="notext"></a>
<h1>Help Information</h1>     
<div class="ui-btn-right">
<a class="checkOutButton" data-role="button" id="checkOutButton" href="" data-icon="check" data-iconpos="notext"></a>
<a class="logoffButton" data-role="button" id="logoffButton" href="#logout" data-icon="delete" data-iconpos="notext"></a>
</div>
</div><!-- /header -->         
<div data-role="content">           
<p>God helps those who help themselves. (At least until I get some time to write actual help information.</p>                   
</div><!-- /content -->          
</div><!-- /help--> 
```

以下是根据 Marco 的请求添加的所有涉及的 javascript：

```
//
//    Add to cart code
//
function addToCart(what,uid) {
    $('.checkOutButton').show();
    $.mobile.changePage("#showCart");
}
//
//      On ready init code
//
$(document).ready(function() {
    $('.logoffButton').bind('click',logoffUser);
    $('.checkOutButton').bind('click',checkOut);
    $('.checkOutButton').hide();                 
});
//
//   Checkout screen stub
//
function checkOut() {
    alert("Imagine a checkout screen here");
} 
```

以下是当用户单击对话框中的添加到购物车按钮时调用的 javascript 链接：

```
<a href="javascript:addToCart('basicSearch',uid)" data-role="button" data-inline="true" data-theme="b">Add to Cart</a> 
```

就像我上面说的，第一个/主屏幕将正确显示，问题是第二个到 N 个屏幕不显示。我使用的顺序是从结果页面单击添加到购物车，单击更多购物按钮或单击后退按钮，然后单击帮助页面链接之类的内容。帮助页面将不正确地显示图标。

# javascript - 画布 toDataURL 没有返回完整的图像

> ID：11588304
> 
> 赞同：5
> 
> 时间：2012-07-20T23:49:37.457
> 
> 标签：javascript, jquery, html, canvas

我正在构建一个为图像加水印的 jQuery 插件（是的，我很清楚 javascript/html5 水印系统的众多缺点，但现在只是忽略它。）每个图像的基本方法是：

*   将图像粘贴到画布的背景
*   在其上添加水印图像的数据，
*   将原始图像的 src 替换为画布的 src（现在包含水印。）

现在，如果我用画布本身替换图像元素，它似乎可以正常工作。所有元素都出现在画布上。但是当我得到画布的 dataURL 时，除了最后一个绘制到它上面的图像之外的所有东西都会出现。我什至不介意，除了这个插件还需要替换图像的链接，因此用数据 url 替换 hrefs（带水印。）

这是当前代码：

```
(function($){

    $.fn.extend({

        cmark: function(options) {

            var defaults = {
                type: 'image',
                content: 'watermark.png',
                filter: 'darker',
                scale:300,
                box: {
                    top         :   0.5,
                    left        :   0.5,
                    width       :   0.75,
                    height      :   0.75,
                    bgcolor     :   '#000000',
                    bgopacity   :   0.5,
                    fgopacity   :   1
                },

                callback_unsupported: function(obj){
                    return obj;
                }

            }

            var getScale = function(w, h, scale){
                ratio = Math.min(scale/w, scale/h);
                scalew = Math.round(ratio*w);
                scaleh = Math.round(ratio*h);
                return [scalew,scaleh];
            }

            var options =  $.extend(defaults, options);

            return this.each(function() {

                obj = $(this);

                canvas = document.createElement('canvas');

                if(!window.HTMLCanvasElement){
                    return options.callback_unsupported(obj);
                }

                /*  if selecting for images, reset the images. Otherwise, 
                    we're replacing link hrefs with data urls. */

                if(obj.attr('src')){
                    target_img = obj.attr('src');
                }

                else if (obj.attr('href')){
                    target_img = obj.attr('href');
                }

                // get the filetype, make sure it's an image. If it is, get a mimetype. If not, return.

                ftype = target_img.substring(target_img.lastIndexOf(".")+1).toLowerCase();

                canvasbg = new Image();

                canvasbg.onload = function(){
                    iw = canvasbg.width;
                    ih = canvasbg.height;

                    scale = getScale(iw, ih, options.scale);

                    iw = scale[0];
                    ih = scale[1];

                    canvas.setAttribute('width', iw);
                    canvas.setAttribute('height', ih);

                    ctx = canvas.getContext('2d');

                    /* define the box as a set of dimensions relative to the size of the image (percentages) */

                    bw = Math.round(iw * options.box.width);
                    bh = Math.round(ih * options.box.height);

                    // for now the box will only ever be centered.
                    bx = Math.round((iw * options.box.top) - (bw/2));
                    by = Math.round(ih * options.box.left - (bh/2));

                    /* draw the box unless the opacity is 0 */
                    if(options.box.bgopacity > 0){
                        ctx.fillStyle = options.box.bgcolor;
                        ctx.globalAlpha = options.box.bgopacity;
                        ctx.fillRect(bx, by, bw, bh);
                    }

                    wm = new Image();

                    wm.onload = function(){
                        ww = wm.width;
                        wh = wm.height;

                        scalar = Math.max(bw, bh); // scale to within the box dimensions
                        scale = getScale(ww, wh, scalar);
                        ww = scale[0];
                        wh = scale[1];

                        ctx.globalCompositeOperation = options.filter;
                        ctx.drawImage(wm, bx, by, ww, wh);
                    }

                    wm.src = options.content;

                    ctx.drawImage(canvasbg, 0, 0, iw, ih);

                    obj.replaceWith(canvas);

                    $('body').append('<img src="'+canvas.toDataURL()+'">');

                    //obj.attr('src', canvas.toDataURL());
                }

                canvasbg.src = target_img;

            });
        }
    })
})(jQuery); 
```

我添加了一行，将带有数据 url 的图像直接转储到页面上进行测试，这就是我所看到的......左侧是画布元素，右侧是带有数据 url 的图像：

![左边是画布，右边是图像](../Images/ff2e741dfabd111a4a1119a4c3650514.png)

所以，是的，这让我难倒了几天。我可能遗漏了一些非常明显的东西，但我看不到它。

...已编辑，因为该示例不再在线。对不起。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T00:20:12.853

首先，不要为标签构建那么大的字符串缓冲区。

```
var img = new Image();
img.src = canvas.toDataURL();
$('body').append(img); 
```

或者，如果您愿意：

```
$('body').append($('<img>').attr('src', canvas.toDataURL())) 
```

其次，在绘制水印之前，您将获得画布的 dataURL。绘图发生在`wm.onload`回调函数中，当水印加载时发生。直到触发后才能`canvasbg.onload`触发，这就是您获取 dataURL 的地方。

因此，在回调结束时将图像附加到代码中`wm.onload`，你应该会很好。

# c++ - 使用 ofstream 跳过行并且不将它们留空

> ID：11588306
> 
> 赞同：0
> 
> 时间：2012-07-20T23:49:46.760
> 
> 标签：c++, visual-studio-2010

我有一个非常基本的 ofstream() 问题。我有一个应用程序可以匹配用户在文本文档中输入的数据。我可以使用 ofstream 跳过行而不修改已经存在的文本吗？如果可能，怎么做？请原谅我的英语不太好。

```
#include <fstream>
#include <iostream>
#include <string>

using namespace std;

    int main()
{
    int count = 0;
    int num;
    int numcopy;
    string clientNames[3000];
    string caseNumbers[3000];
    int userInp = 1;
    string confirm = "2";

    cout << "Do you have a file already started (y/n)?"<<endl;
    cin >> confirm;

    if(confirm == "y")
    {
        goto input;
    }
    if(confirm == "n")
    {
        goto postinput;
    }

    input:

    cout << "What is the number of the query last entered?";
    cin >> userInp;
    num = userInp;
    numcopy = userInp;

    postinput:

    for(int i = 1; i <3000; i++)
    {
        userInp ++;
        repeat:
        cout <<"Enter Client's Name:";
        cin >> clientNames[userInp];
        cout << " " <<endl;
        cout <<"Enter Case Number:";
        cin>> caseNumbers[userInp];

        cout <<"Client Name "<< i << " "<<clientNames[userInp]<<endl;
        cout << "Case Number" << i << " "<<caseNumbers[userInp]<<endl;
        cout <<"Is This Correct?"<<endl;
        confirm == " ";
        cin >> confirm;
        if(confirm == "y")
        {
            cout <<"Confirmed"<<endl;
        }

        if(confirm == "n")
        {
            goto repeat;
        }

        if(confirm == "/end")
        {
            break;
        }

    }

    ofstream file;
    file.open("caseData.txt");
    for(int w = 0; w <3000;w++)
    {
        num++;
        file <<
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T00:46:30.240

`clientName`我猜你想对用户多次输入相同或相同的情况做点什么`caseNumber`。您的问题实际上并不完全清楚这是您想要做的，但您问：

> 我有一个应用程序可以匹配用户在文本文档中输入的数据。我可以使用 ofstream 跳过行而不修改已经存在的文本吗？如果可能，怎么做？

但是，我在您的程序中没有看到任何匹配的逻辑。您只需记录多达 2999 个条目（因为您不使用`0`数组的条目），或者等到用户输入`/end`作为确认消息。

如果您有实际的匹配逻辑，您可以在输入时检测用户是否输入了 same`clientName`或 same `caseNumber`，并且您可以提示用户如何处理它（例如，保留旧的现有条目，保留新输入的条目） . 如果你有这样的逻辑，你就会知道你只会输出唯一的数据行，所以你的输出循环会相当简单。

有人对您使用`goto`. 您可以开始另一个循环，而不是`repeat:`标签：

```
//repeat:
do {
    // ...read in input, echo it back, wait for confirmation...
    cin >> confirm;
    if (confirm == "y") {
        cout << "Confirmed" << endl;
        break;
    }
} while (confirm != "/end");
if (confirm == "/end") {
    break;
} 
```

在此代码中，除 a`y`或之外的任何内容都`/end`与`n`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T00:29:46.217

“使用 ofstream 跳过行而不修改已经存在的文本”是不可能的。

但是您可以先将文件的所有行存储在程序中。并且在您处理文件时，当您想要保持该行不变时输出存储的行。

这有效地做了你想要的。

此外，您确实应该摆脱`goto`代码中的 s 。它们只应在极少数情况下使用。而对于初学者来说，我总觉得在他们对编程非常熟悉之前不应该使用它。

# jquery-load - jquery .load() 并在新内容加载后触发函数？就像 JavaScript 的 onload 事件

> ID：11588309
> 
> 赞同：3
> 
> 时间：2012-07-20T23:50:02.720
> 
> 标签：jquery-load, onload-event, ready

使用 jquery，我正在使用 jquery 的功能交换网页中的一些内容`.load()`。我想在内容实际加载后*立即触发一个事件，但**不是 before*和*after*。我准备好任何优雅的解决方案！为什么？在这种情况下，我正在使用旧的“淡出、交换内容、淡入”方法。我的问题？我想在新内容加载后立即淡出。

注意事项：

*   `$('#object').load(url, callback)`只要`.load()`函数成功执行（在实际加载内容之前） ，就使用回调函数作为触发器。在这里没用。
*   使用定时延迟淡入*不是*一个优雅的解决方案。非常“笨拙”，尤其是对于那些互联网连接速度更快的人。
*   JavaScript 的`onload`事件触发器不起作用，因为`.load()`正在更改的元素已经加载到 HTML DOM 中。
*   jquery 的`.ready()`功能也不起作用，因为实际元素已经加载。
*   我不想创建一个`onload`或`.ready()`子容器元素，因为这是我实际尝试的一种解决方法，尽管它可能同样优雅或更多。

**当（且仅当**）新内容最终加载时，我如何才能触发函数`.load()`，就像 JavaScript 的`onload`事件一样？非常感谢。

**编辑**事实证明，jquery`.load()`函数工作完美，我正在接近这个错误。

*   一旦`.load()`函数成功完成，它就会调用程序员包含的任何“[回调](http://docs.jquery.com/Tutorials%3aHow_jQuery_Works#Callback_and_Functions)”函数，就像任何其他接受回调作为其“参数”之一的 jquery 函数一样。
*   一旦出错或成功开始 HTML 替换和加载新内容，该`.load()`功能就*完成了，但就是这样！*然后，无论加载内容需要多长时间，但您的`.load`通话在此之前已经完成。因此，期望回调在内容加载*后*`.load`运行只会让您失望。;)

我希望其他人可以像我一样从中吸取教训，包括那些认为我认为是这样的人。证明：如[jquery ajax .load page](http://api.jquery.com/load/)中所述，回调在**请求**完成时执行，*而不是*在*加载*完成时执行。尤里卡。哎呀。**/编辑**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T23:56:46.543

尝试使用不同的方法，而不是`load()`，我建议使用`get()`. 像这样的东西可能对你更有用......

```
var jqxhr = jQuery.get(url,vars);

jqxhr.success(function(data){
    # This will only be called once the remote content has been loaded in
    # The data will then be stored in the data param and can be used within your site
});

jqxhr.error(function(data){
    # Something went wrong, never mind lets just handle it gracefully below...
}); 
```

我希望这是您的问题的解决方案！

有关更多信息，请参阅[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

我已经在下面快速创建了这个功能，它可能对你有帮助......它没有完善！

```
jQuery.fn.loadNewData = function() {

    var object = jQuery(this);
    var jqxhr = jQuery.get(arguments[0]);

    // check for success
    jqxhr.success(function(data) {
        // load the data in
        object.html(data);
    });

    jqxhr.error(function(){
        alert('Failed to load data');
    });
} 
```

使用它，您可以调用与调用 load() 函数的方式相似的方式。

```
jQuery('#object').loadNewData(url); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:02:55.853

我想你可能会误解你所看到的。根据您使用的浏览器，如果您在回调中弹出警报，您将不会在浏览器中看到新元素，因为它不会重新呈现 DOM，直到您将控制权交还给浏览器。这并不意味着您不能从 DOM 中获取新元素并开始淡入它们。使用以下 jsfiddle：http: [//jsfiddle.net/ttb55/8/](http://jsfiddle.net/ttb55/8/)在 Chrome 中它会在第二个 div 时显示第一个 div警报启动，然后淡入第二个 div。在 IE 中，当第二个警报出现时，它不会显示第一个 div，这是我认为您在回调期间加载后所处的状态，但是一旦您点击 ok，它仍然可以工作，因为一切都在 DOM 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T19:20:32.807

在阅读[jQuery.get()](http://api.jquery.com/jQuery.get/)和[jQuery.load()](http://api.jquery.com/load/)的 jQuery 文档页面后，回调参数引用如下：

> “请求成功时执行的回调函数。”

让我强调“请求”和“成功”这两个术语。请求可能成功，但这并不*意味着*内容已*加载*。同样的问题`.load()`- 函数不是按照我的想法构建的。

如果我想在新内容最终加载后触发一个事件，我需要采取不同的方法。

*   我可以使用 JS`onload`事件，并通过完全替换 HTML 元素来触发它（让替换的代码包含一个`onload`属性）。编辑：请注意，使用 HTML`iframe`元素非常糟糕、原始且“笨拙”。我只需要找到一种更好的方法来在加载新内容完成后立即触发功能。
*   此外，我可以使用 jQuery 来检查`.ready()`新内容的状态，但是（“AFAIK”/据我所知）**只有**在检查的内容是**新**的HTML 元素**而不是**内部内容已更改的预先存在的 HTML 元素时才有效. 无论是否正在加载新内容，任何预先存在的元素的 jQuery`.ready()`状态（AFAIK）都已经显示为“就绪”。也许我对此有误，如果是这样，我希望得到纠正。

除非另有通知，否则此答案将被标记为正确答案。最初的问题是错误的，这`.load()`就是我所需要的。干杯!

# javascript - 如何将 Javascript 触摸事件传递给 Objective-C UIWebView 本机代码？

> ID：11588316
> 
> 赞同：1
> 
> 时间：2012-07-20T23:51:26.457
> 
> 标签：javascript, objective-c, uiwebview, touchesbegan, uiwebviewdelegate

我知道 UIWebView 包含一个在链接加载之前调用的方法，即 webView:shouldStartLoadWithRequest:navigationType:。

使用它，UIWebView 委托中的本机代码可以拦截加载请求并决定如何处理它们，这为我们提供了一种在 UIWebView 和其中运行的 JavaScript 之间进行通信的方法。

但是，当尝试传递触摸事件或当前触摸位置等信息时，这似乎是一个糟糕的解决方案。我们是否应该为每个触摸事件伪造一个链接加载并以这种方式传递信息？这似乎很慢而且很hack-ish。有什么更好的方法来做到这一点？

# python - 如何制作与字典键同名的列表？

> ID：11588319
> 
> 赞同：0
> 
> 时间：2012-07-20T23:52:14.070
> 
> 标签：python, list, dictionary, key

我有一本字典，包含数百个条目，格式为：

```
>>>dict
{'1620': 'aaaaaa'} 
```

我想创建名为“1620”等的新空列表。我尝试了以下变体，但它不能将每个键识别为创建列表时要使用的变量。相反，它将列表按字面意思命名为“eachkey”，而我的密钥（在此示例中为“1620”）未连接到新列表。

```
>>>for eachkey in dict.keys():
>>>    eachkey=[]
>>>
>>>eachkey
[]
>>>'1620'
1620 
```

编辑添加：也许我可以在制作字典的同时制作列表？把它放在下面吗？str(eachfile[-4:]) 是我想要命名的列表。

```
files=open(sys.argv[1])
dict={}
for eachfile in files:
    value=open(eachfile)
    key=str(eachfile[-4:])
    dict[key]=value
eachfile.close() 
```

编辑：如果需要的话，我可以在数字旁边添加字母。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T23:54:03.630

我认为不可能更改整数文字`1620`，以便它为您提供整数 1620 以外的对象。同样，我认为您不能更改字符串文字`'1620'`来为您提供列表而不是字符串。

如果您在变量名称前加上一些字母以使其成为有效名称，则可以这样做。例如，您可以使用`my1620`而不是`1620`. 我不建议这样做，但有可能：

```
>>> d = {'1620': 'aaaaaa'}
>>> for k,v in d.items():
...     locals()['my'+k] = []
>>> my1620
'aaaaaa' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T17:32:38.137

用这样的字典：

```
d1 = {'foo':'bar', '1621':'hello'} 
```

尝试这样做：

```
d2 = dict((k,list()) for k in d1.keys()) 
```

现在 d2 是：

```
{'1621': [], 'foo': []} 
```

您可以参考您的列表列表：

```
d2['1621'].append(20)
d2['foo'].append(5)
d2['foo'].append('zig') 
```

这使得 d2：

```
{'1621': [20], 'foo': [5, 'zig']} 
```

正如加雷斯所说，你不太可能真的想做你要求做的事情。这可能更好。

# javascript - 为什么 JavaScript 对相同的行为有不同的声明？

> ID：11588323
> 
> 赞同：2
> 
> 时间：2012-07-20T23:52:39.463
> 
> 标签：javascript, html

我为什么要申报

```
var foo = {} 
```

代替

```
var foo = new Object(); 
```

如果它们相似，在 JavaScript 中？是否同样适用于

```
foo[0].bar = new Function(){ "return hello"}; 
```

就像在

```
foo[0].bar = function(){return "hello"}; 
```

? 是效率问题吗？有区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T00:00:56.733

我记得从[w3fools.com](http://w3fools.com/)阅读了以下内容：

> `personObj=new Object();`
> 
> 这是对`new`关键字的错误和不必要的使用。他们应该使用并提倡使用对象字面量语法 ( `{}`) 来创建新对象。

它没有说为什么，只是说我们应该。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T00:06:09.413

实际上

```
var foo = {} 
```

和

```
var foo = new Object(); 
```

做同样的事情（两个表达式都创建一个空`Object`的），但最好使用较短的版本（`object literal`），它需要更少的空间时间来编写，另一件事是使用`object literal`您可以创建和分配值/属性给 an`Object`如下

```
person = {
    property1 : "Hello"
}; 
```

但是使用`new Object()`您需要先创建它，然后按如下方式分配值/属性

```
person = new Object();
person.property1 = "Hello"; 
```

在您的第二个示例 ( `function vs new function`) 中存在差异，因为`new Function`您`slower`可以在[**此处查看此测试**](http://jsperf.com/function-vs-function/2)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T23:59:20.290

不，没有任何效率增加或减少，它只是像使用的简写？：如果/否则..

我总是使用简写 {}，但如果您打算让初学者阅读您的代码，您可能需要使用 new Object()。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T00:01:16.633

唯一可能重要的是，您是否编写了一个动态生成此类 javascript 的程序……或者您为大学中的某位老师写作，该老师似乎有某种标准，有时不太有意义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-21T00:17:05.877

`new Function()`构造函数实际上并不是这样工作的。

它被称为：

```
var myFunc = new Function("param1", "param2", "message", "/*function-body-as-a-string*/ console.log(message); return param1 + \"=\" + param2;"); 
```

即：非常愚蠢，容易出错，愚蠢缓慢（使用评估）和安全漏洞。不要使用它。

# cakephp - cakephp“包含”左连接不使用指定的foreignKey进行左连接

> ID：11588326
> 
> 赞同：1
> 
> 时间：2012-07-20T23:53:03.223
> 
> 标签：cakephp, join, foreign-key-relationship, contain

在 cakephp 2.1 上，我有两个表： qca 通过两个表上的字段 emp_number 属于员工。

qca model belongsTo : (请注意foreignKey)

```
public $actsAs = array('Containable');

var $belongsTo = array('Dir', 
     'Employee' => array(
     'className' => 'Employee',
     'foreignKey' => 'emp_number')
 ); 
```

员工模型：

```
public $actsAs = array('Containable'); 
```

在我的控制器的查找中，我使用“包含”来根据 qca 表中的 emp_number 检索员工信息。

```
$hoursvalues = $this->Qca->find('all', array('conditions' => $conditions, 
            'fields' => array('Qca.emp_number', 'Sum(CASE WHEN Qca.qca_tipcode = 1 THEN 1 END) AS Qca__comps', 'Sum(qca_end - qca_start) as Qca__production', 'Sum(Qca.qca_durend) as Qca__idle'),
            'contain' => array(
                'Employee' => array(
                    'fields' => array('emp_number', 'emp_ape_pat', 'emp_ape_mat', 'emp_ape_mat'))),
            'group' => array('Qca.emp_number'),
                )); 
```

但是，执行的sql语句显示：

```
LEFT JOIN `devopm`.`employees` AS `Employee` ON (`Qca`.`emp_number` = `Employee`.`id`) 
```

而 `Employee`. `id`应该是`Employee`。`emp_number`

这是完整的sql语句：

```
SELECT `Qca`.`emp_number`, Sum(CASE WHEN Qca.qca_tipcode = 1 THEN 1 END) AS Qca__comps, Sum(qca_end - qca_start) as Qca__production, Sum(`Qca`.`qca_durend`) as Qca__idle, `Employee`.`emp_number`, `Employee`.`emp_ape_pat`, `Employee`.`emp_ape_mat`, `Employee`.`id` FROM `devopm`.`qcas` AS `Qca` LEFT JOIN `devopm`.`employees` AS `Employee` ON (`Qca`.`emp_number` = `Employee`.`id`) WHERE `Qca`.`dir_id` = 63 AND FROM_UNIXTIME(`Qca`.`qca_start`, '%Y-%m-%d') >= '2012-07-18' AND FROM_UNIXTIME(`Qca`.`qca_start`, '%Y-%m-%d') <= '2012-07-18' GROUP BY `Qca`.`emp_number` 
```

这会导致为 Employee 返回 null 值：

```
array(
(int) 0 => array(
    'Qca' => array(
        'emp_number' => 'id3108',
        'comps' => '2',
        'production' => '7784',
        'idle' => '529'
    ),
    'Employee' => array(
        'emp_ape_pat' => null,
        'emp_ape_mat' => null,
        'id' => null
    )
), 
```

注意：我还有其他“包含”实例正在工作（一个默认 id = tableName.id）。我想知道 belongsTo ('foreignKey' => 'emp_number') 上的 foreignKey 是否不利于 'contain' 工作？

你能帮我吗？

太感谢了。

（我找到了一种解决方法，但大大减慢了查询速度（它复制了左连接并且永远需要）

```
$joins = array(
 array('table' => 'publication_numerations',
   'alias' => 'PublicationNumeration',
   'type' => 'LEFT',
   'conditions' => array(
      'Publication.id = PublicationNumeration.publication_id',
   )
 )
);

$this->Publication->find('all', array('joins' => $joins)); 
```

# iphone - 使用 GLKit 按需加载纹理

> ID：11588335
> 
> 赞同：1
> 
> 时间：2012-07-20T23:54:06.153
> 
> 标签：iphone, objective-c, opengl-es, opengl-es-2.0, glkit

我有一个应用程序，我需要使用 OpenGL 纹理在屏幕上绘制文本。在我的渲染循环中，我从我的 TextureController 请求纹理，它具有以下功能

```
- (GLuint)textureForImageNamed:(NSString*)fileName;
{
    // we're checking a hash.. possibly slow
    NSNumber* textureHandle = [textures objectForKey:fileName]; 

    if(!textureHandle)
        textureHandle = [self loadTexture:fileName];

    GLuint handle = (GLuint)[textureHandle unsignedIntValue];

    return handle;
} 
```

其中 loadTexture 像这样将纹理加载到内存中

```
- (NSNumber*)loadTexture:(NSString*)fileName
{
    GLuint texID = [GLKTextureLoader textureWithCGImage:
                    [[UIImage imageNamed:@"star.png"] CGImage] 
                                                options:nil 
                                                  error:nil].name;
    NSNumber* num = [NSNumber numberWithUnsignedInt:texID];
    [textures setObject:num forKey:fileName];

    return num;
} 
```

以及类似的文本功能：

```
- (GLuint)textureForTextWithString:(NSString*)text;
- (NSNumber*)loadTextureForString:(NSString*)text; 
```

当我在渲染循环之前请求图像一次时，这一切都很好，但重点是需要绘制的文本和图像事先不知道。所以我希望能够调用`textureForTextWithString:@"fooBar"`并给我纹理（如果之前加载过），或者加载它——将它添加到字典中，然后给我。但是，对于所有未预加载的纹理（即`textureForTextWithString:@"fooBar"`在我开始渲染循环之前未调用的纹理），我得到了一个黑色纹理。

渲染循环中的相关代码：

```
GLuint secondTex = [textures textureForTextWithString:@"NO"];    
glBindTexture(GL_TEXTURE_2D, secondTex);
glBindBuffer(GL_ARRAY_BUFFER, some_vertex_buffer);
glDrawArrays(GL_POINTS, 0, num); 
```

我正在寻找解决方案，或者更好的解决方案——关于如何更好地处理这个特定问题的建议。

**编辑**：有问题的两个文件可以在这里找到：

*   [https://gist.github.com/3153940](https://gist.github.com/3153940) - 主要的 OpenGL VC
*   [https://gist.github.com/3153941](https://gist.github.com/3153941) - 纹理控制器

# c# - 如何制作准确的十进制计时器？

> ID：11588337
> 
> 赞同：1
> 
> 时间：2012-07-20T23:55:00.147
> 
> 标签：c#, winforms, timer

我对这个很沮丧..

我在文本框中有一个称为计时器`timer1`和一个文本框`TimeElapsedTextBox`，一个`double`称为计时器的变量`TimeTakenToFinish` 每 1 秒（1000 毫秒）滴答一次，我希望它以这种格式显示时间：

```
Seconds.PartsOfSecond 
```

这是 Tick 事件：

```
private void timer1_Tick(object sender, EventArgs e)
{
  TimeTakenToFinish += (double)timer1.Interval / 10000;
  TimeElapsedTextBox.Text = TimeTakenToFinish;
} 
```

它实际上是以我想要的方式在文本框中显示它，但它没有正确计数..我的意思是，它的计数不到一秒..

你能告诉我如何解决这个..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-21T00:02:31.943

您的问题是对您的操作系统工作方式的误解。当然，您可以将时间间隔设置为`1000ms`，但您不能期望它实际上每秒滴答一次。您在 Windows 上运行代码，而不是硬（或软）实时操作系统。

顺便说一句，您还应该知道计时器的分辨率是有限的，并且到今天为止，仅限于系统计时器的精度，大约为 15 毫秒。

您不能期望您的代码在那种环境中确定性地执行该操作。在任何时候，操作系统都可以抢先将您从 CPU 中踢出并开始处理另一项任务。

尽管我会问，但您根本无法获得所需的准确性；它实际上是必需的吗？可能不是，但你还没有告诉我们你在这里真正想要完成什么，所以谁知道呢？

另外，这是错误的：

```
TimeTakenToFinish += (double)timer1.Interval / 10000; 
```

`Interval`是一个属性，用于告诉计时器它应该多久触发`Tick`一次事件。您实际上并没有测量任何东西，您还不如`1000.0 / 10000`每次都添加到您的计数器中。

如果您需要更高的精度，请使用`StopWatch`使用 CPU 的高性能计时器的类（如果有）。您仍然可以使用计时器根据秒表的当前经过值定期更新 UI，即

```
void timer1_Tick(...)
{
    var totalSeconds = _someStopwatch.ElapsedMilliseconds / 1000.0;
    TimeElapsedTextBox.Text = totalSeconds.ToString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T00:04:23.650

不使用计时器，而是使用 DateTime.Now 记录开始时间，然后从开始时间中减去当前时间 (DateTime.Now)。这将为您提供更准确的计时器，因为它使用不受 CPU 性能影响的系统时钟。

或者，您可以使用 System.Diagnostics.Stopwatch 为您执行此操作。

您仍然可以使用间隔小于一秒的普通计时器来刷新显示时间的标签。

# geometry - 3D 点是否位于 2 个 3D 点之间

> ID：11588341
> 
> 赞同：2
> 
> 时间：2012-07-20T23:55:42.097
> 
> 标签：geometry, line, segment

我只是想知道如何确定给定的 3D 点是否位于由 2 个点给出的线上，并且它也位于这 2 个点之间？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-21T00:06:33.713

如果 ba,ca 是平行的，则点 a,b,c 是共线的（都在一条线上），如果叉积 (ba) x (ca) 为零，则这是真的。（也就是说，它的所有三个分量都为零。您可能实际上应该允许它们为非零但非常小；这应该意味着什么取决于您的应用程序。）

鉴于点 a,b,c 共线，如果标量积 (ba).(cb) 为正，则 b 位于 a 和 c 之间。（非负数，如果 b 可以与 a 或 c 重合。）

# cocos2d-iphone - 如何为我的 CCMenu 确定触摸的优先级？

> ID：11588349
> 
> 赞同：1
> 
> 时间：2012-07-20T23:57:28.950
> 
> 标签：cocos2d-iphone

我有两个 CCMenu 实例。在游戏中的某个时刻，菜单 A 与菜单 B 重叠。但是，当我按下菜单 B 中的一个按钮时，“得到它”的是菜单 A。

如何将触摸优先权赋予 CCMenu B？

我试过这个：

```
[[CCTouchDispatcher sharedDispatcher] setPriority:-130 forDelegate:menuB]; 
```

然而，Xcode 说没有找到这个委托（menuB）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T00:43:14.123

好的，我解决了这个问题，但我仍然认为应该有更好的方法。

首先，我们要编辑 CCMenu 的界面。我们必须创建一个新的整数属性。

```
@interface CCMenu : CCLayer <CCRGBAProtocol>
{
    tCCMenuState state_;
    CCMenuItem  *selectedItem_;
    GLubyte     opacity_;
    ccColor3B   color_;

    int extraTouchPriority; // Our new integer
}

@property (readwrite) int extraTouchPriority; 
```

现在将`registerWithTouchDispatcher`方法更改为：

```
-(void) registerWithTouchDispatcher
{
    [[CCTouchDispatcher sharedDispatcher] addTargetedDelegate:self priority:kCCMenuTouchPriority - extraTouchPriority swallowsTouches:YES];
} 
```

完毕。现在，当您必须赋予 CCMenu 实例比其他实例更高的优先级时，只需`extraTouchPriority`在初始化后赋予它更高的值即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T00:03:56.587

我有同样的问题。我所做的是从 cocos2d 库中复制整个 CCMenu，将其重命名，然后修改`kCCMenuTouchPriority`为我想要的。请注意，您必须`kCCMenuTouchPriority`为自定义菜单重命名。我用过`kkCCMenuTouchPriority`。

我用这样的代码调用它：

```
CCMenuPopUp *menu =[CCMenuPopUp menuWithItems:item1,nil]; 
```

我试图对它进行子类化，但遇到了一些问题并放弃并采用了上面的解决方案。

CCTouchDispatcher 的东西不起作用，因为当你调用它时菜单还没有初始化

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-07T14:38:24.880

这是上述答案之一的另一个变体，它不会改变 cocos2D 代码库，因为这是不好的做法：[https ://gist.github.com/tudormunteanu/6174624](https://gist.github.com/tudormunteanu/6174624)

# ios - 翻转通过CVOpenGLESTexture获取的OpenGL ES纹理

> ID：11588350
> 
> 赞同：1
> 
> 时间：2012-07-20T23:57:40.910
> 
> 标签：ios, opengl-es-2.0

在我涉足 OpenGL ES 2.0 的最后一天，在尝试将两个投影纹理（一个精灵动画和一个视频文件纹理）应用到天空盒时，我开始像存根一样简单地敲击键盘，奇迹般地它一切都开始工作了。

但是，从视频文件创建的纹理是颠倒的。换句话说，(0,0) 的纹理坐标似乎映射到 (0,1)，反之亦然。

从 CVImageBufferRef 创建视频文件纹理的函数 CVOpenGLESTextureCacheCreateTextureFromImage() 包括参数“CFDictionaryRef textureAttributes”。

CVOpenGLESTextureCache.h 有助于解释：“包含用于创建 CVOpenGLESTexture 对象的属性的 CFDictionaryRef。可能为 NULL。”

我立即想到了 GLKTextureLoader，它允许您传入一个选项字典，其中一个可用选项用于翻转纹理。

所以，我在两点上有点困惑：

1.  传递属性的 CFDictionaryRef 是否可以让我轻松更改有关纹理的内容，例如旋转？或者它在某种程度上意味着着色器意义上的“属性”？（我不认为这很可能意味着着色器感觉，但我也认为将它们称为属性而不是选项很奇怪。）

2.  是否有一个键/值对列表可以告诉它做有用的事情？

在找到其他方法来翻转它之前，我想对此进行研究，因为如果可以在此处进行操作，那么如果该过程确实与 GLKTextureLoader 的选项平行，这似乎是最直接的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T00:36:29.597

再次阅读苹果的 RosyWriter 示例代码后，我意识到在使用 CVOpenGLESTextureCacheCreateTextureFromImage() 创建纹理后，他们通过修改顶点的纹理坐标来翻转纹理。

由于我在顶点着色器中投影纹理并计算纹理坐标，我认为对我来说最简单的解决方案是在将实际电影文件资源放入 xcode 之前将其翻转。所以这可能就是我将为每部电影做的事情。刚刚意识到这是一个多么简单的解决方案。这样我就不需要为需要旋转且不需要旋转的投影分叉我的顶点着色器代码。

不过，如果有人有这方面的信息，我仍然非常感谢对属性论点的澄清。

# openerp - 我可以继承 OpenERP 中的标准报表吗？

> ID：11588351
> 
> 赞同：3
> 
> 时间：2012-07-20T23:57:52.783
> 
> 标签：openerp, reportlab

我想在 OpenERP 6.1 中更改采购订单报告。我是否必须进入并更改购买模块，或者我可以创建一个新模块来继承标准报告并覆盖一些细节。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T23:57:52.783

您不能完全继承另一个报告并仅覆盖一些详细信息，但您可以替换标准报告并使其所有现有链接启动您的新报告。

我们的[zaber_purchase](http://bazaar.launchpad.net/~zaber/openobject-addons/zaber-custom/files/11/zaber_purchase/)模块包含用户想要的对采购订单报告的一些更改。这是将[标准报告替换为我们的报告的](http://bazaar.launchpad.net/~openerp/openobject-addons/trunk/view/head:/purchase/purchase_report.xml)[purchase_report.xml](http://bazaar.launchpad.net/~zaber/openobject-addons/zaber-custom/view/11/zaber_purchase/purchase_report.xml)文件。

```
<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <report 
            auto="False" 
            id="purchase.report_purchase_order" 
            model="purchase.order" 
            name="purchase.order.zaber"
            rml="zaber_purchase/report/order.rml" 
            string="Purchase Order"
            usage="default"/>
    </data>
</openerp> 
```

由于它不是继承而是替换报告，因此您必须在您的版本中复制整个报告。您的报告 ID 必须与原始报告的 ID 匹配，包括模块名称。在上面的示例中，原始报告的 id 为`report_purchase_order`，并且它是`purchase`模块的一部分，因此您的报告 id 必须`purchase.report_purchase_order`替换它。该名称必须与您版本的[解析器文件](http://bazaar.launchpad.net/~zaber/openobject-addons/zaber-custom/view/11/zaber_purchase/report/order.py#L66)中的名称相匹配，并且 rml 属性必须指向您版本的[RML 文件](http://bazaar.launchpad.net/~zaber/openobject-addons/zaber-custom/view/11/zaber_purchase/report/order.rml)。

感谢[mihai](http://www.openerp.com/forum/post84608.html#p84608)在 OpenERP 论坛中解释了大部分内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T20:40:29.230

Don Kirkby 有一个很好的答案，在将我的头撞到墙上一个小时后，我想扩展它。但是 stackoverflow 不让我评论它，因为我没有足够的代表点，所以相反，我会用一个没有答案的垃圾邮件问题。

“id 必须与原始报告的 id 匹配，包括模块名称”，Don 的意思是如果 foomodule 有`<report id="fooreport" ...>`，那么在你的模块中你需要说`<report id="foomodule.fooreport" ...>`。这是因为每个模块声明的 id 都存在于该模块范围内的命名空间中。如果您不引用另一个（您正在覆盖的那个）模块的命名空间，那么您最终只会创建一个具有相同名称的新报告，即 Bad。

需要注意的是，查看`ir_act_report_xml`包含所有报告的数据库表，以及`ir_model_data`将报告（和其他所有内容）与`id`定义事物的 XML 中的属性相关联的数据库表。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-01T08:48:55.303

RML 解析器类被全局注册为服务。例如，销售订单解析器类在 addons/sale/report/sale_order.py 中注册

```
report_sxw.report_sxw('report.sale.order', 'sale.order', 'addons/sale/report/sale_order.rml', parser=order, header="external") 
```

如果您尝试创建另一个具有相同名称的解析器，则会收到错误消息：报告“sale.order”已经存在！

替换 sale.order 解析器并使用自定义解析器类的一种简单方法是将其从全局服务注册表中删除：

```
from netsvc import Service
del Service._services['report.sale.order'] 
```

这是一个完整的示例，我们用于在没有折扣的情况下有条件地隐藏销售订单报告中的折扣列

```
from sale.report import sale_order
from report import report_sxw

# create a custom parser inherited from sale order parser:
class new_order_parser(sale_order.order):
    '''Custom parser with an additional method
    '''
    def __init__(self, cr, uid, name, context):
    super(new_order_parser, self).__init__(cr, uid, name, context=context)
    self.localcontext.update({
        'has_line_discount': self._has_line_discount,
    })

    def _has_line_discount(self, order):
        return any([l.discount for l in order.order_line])

# remove previous sale.report service :
from netsvc import Service
del Service._services['report.sale.order']

# register the new report service :
report_sxw.report_sxw(
 'report.sale.order',
 'sale.order',
 'addons/path/to/the/sale_order.rml',
 parser=new_order_parser
 ) 
```

# php - Zend Framework MultiCheckbox 和路由

> ID：11588355
> 
> 赞同：2
> 
> 时间：2012-07-20T23:58:54.500
> 
> 标签：php, forms, zend-framework, url

Zend Framework 似乎不支持其 URL 路由器中的多复选框。如果我提交一个多复选框表单，控制器中的值会以数组的形式出现，但如果我随后将它们直接传递给路由器，它就会阻塞

这是来自的多复选框数组`Controller->getRequest()->getParams()`：

```
[make] => Array
    (
        [0] => Honda
        [1] => Toyota
        [2] => Subaru
    ) 
```

如果我将该数组发送到`$this->url`控制器或视图中，则会发生这种情况：

```
Warning: urlencode() expects parameter 1 to be string, array given in Zend/Controller/Router/Route.php on line 403 
```

我真的很想避免自己重建 URL，但我不确定如何让路由器处理多维参数。

# php - PHP的联系页面错误

> ID：11588361
> 
> 赞同：0
> 
> 时间：2012-07-21T00:00:15.190
> 
> 标签：php

我有一个联系页面，我在 php 将 Name* 字段读取为 5 个字符时遇到问题，因为我通过将 Name* 放在文本区域开头来节省网页上的空间。我在谷歌上进行了研究，但找不到任何代码来帮助忽略这些字符。我拥有的 php 发布在下面。

```
if(!$name || strlen($name) < 5) {
    $error .= "Please enter your name.<br />";
} 
```

所以我遇到的问题很可能有人有一个 3 个字母的名字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T00:01:54.890

这里有一个提示：不要。使用真实的标签，不要只是在文本框中转储默认文本。此外，它如何节省空间？

```
<input type="text" name="name" value="Name*" />
Name*: <input type="text" name="name" /> 
```

没有意义。

* * *

如果必须，只需`|| $name == "Name*"`在此处添加即可。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T00:06:11.910

您可以使用：

```
<input type="text" name="name" value="" placeholder="Name*" /> 
```

除了旧版本的 IE - [http://www.w3schools.com/html5/att_input_placeholder.asp ，大多数浏览器都不支持此功能](http://www.w3schools.com/html5/att_input_placeholder.asp)

更好的参考网站 - [http://caniuse.com/input-placeholder](http://caniuse.com/input-placeholder) (thnx Celeritas)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T00:07:37.073

如果您真的想这样做以节省布局空间，您可以尝试这样的事情来清除字段中的默认值，当您聚焦该字段时。

```
<input type="text" onfocus="if(this.value == 'value') { this.value = ''; }" value="value" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T00:08:17.630

您可以使用[substr](http://php.net/manual/en/function.substr.php)跳过前 5 个字符。

假设您使用 POST 传递表单数据

```
$name = substr($POST['name'], 5) 
```

Kolink 是对的，我看不出这如何节省空间，就在文本框之外的名称*。如果您真的想将其保留在框内，则可以在单击框时使用 JavaScript 清除框。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-21T00:15:34.507

正如 Kolink 所说，您可以添加`|| $name == "Name*"`到您的`if`声明中。

否则，这更多的是客户端问题。如果您使用的是 JQuery，则可以执行以下操作：

```
$('#name').attr("is_focused",0);
$('#name').focus(function(){
    if($(this).attr("is_focused")==0){
        $(this).val("");
        $(this).attr("is_focused",1);
    }
}); 
```

然后，当用户提交表单时，请执行以下检查：

```
if($('#name').attr("is_focused")==0){
    alert('You must enter your name');
    return;
} 
```

# asp.net-mvc - 为整个控制器分配布局

> ID：11588367
> 
> 赞同：2
> 
> 时间：2012-07-21T00:01:24.373
> 
> 标签：asp.net-mvc, razor

有没有办法分配整个控制器使用某种布局？我知道您可以在 ViewStart 中分配布局，无论如何 viewStart 是否知道正在使用哪个控制器？

我的目标是有两个管理布局，一个带有额外的导航栏，当您在管理控制器中使用任何东西时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T14:38:26.653

您可以编写一个自定义操作过滤器：

```
public class LayoutAttribute : ActionFilterAttribute
{
    private readonly string _layout;
    public LayoutAttribute(string layout)
    {
        _layout = layout;
    }

    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        var result = filterContext.Result as ViewResult;
        if (result != null)
        {
            result.MasterName = _layout;
        }
    }
} 
```

然后用它装饰你的控制器，使用这个控制器的所有操作（显然返回视图结果）将使用你指定的布局：

```
[Layout("_SimpleLayout")]
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View();
    }

    public ActionResult About()
    {
        return View();
    }
} 
```

# ruby-on-rails - 使用 Select 强制 ActiveRecord 中的数据类型

> ID：11588377
> 
> 赞同：1
> 
> 时间：2012-07-21T00:03:30.993
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我正在运行一个包含连接和冲突列名的查询。IE：

```
results = TableA.joins(:table_b).select('table_a.id as table_a_id', 'table_b.id as table_b_id') 
```

在我的结果中， table_a_id 和 table_b_id 都是字符串。我该怎么做才能使它们成为整数？

我觉得可能有一种方法可以让它返回`results[0]['table_a']['id']`并且`results[0]['table_b']['id']`两者都有正确的数据类型，但我不知道该怎么做。

我主要关心的是这样做，这样我就可以在不运行第二个查询的情况下访问这两个列。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T01:16:13.577

这个对我有用。我这样做：

```
comments = Comment.joins(:project).select('comments.id as table_a_id, projects.id as table_b_id') 
```

我可以这样做：

```
comments.first.table_a_id 
```

要将列转换为整数，您可以使用 sql 函数。要转换为整数，您可以使用 sql 或 ruby​​ 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T03:40:11.423

由于 Dougui 的回答几乎涵盖了访问这两个列，我将只解决字符串到整数的转换。您有两种选择，用 SQL 或 Ruby 转换。

在 Ruby 中，您可以调用`.to_i`字符串将其转换为整数，因此：

```
> foo = '156'
=> '156'
> foo.to_i
=> 156 
```

在 SQL 中，您使用该`CAST`函数，因此：

```
SELECT CAST('156' AS INTEGER);

 int4 
------
  156
(1 row) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-20T18:00:43.410

这有点晚了，但也许它可能有用。

我遇到了同样的问题，我解决了这样的问题：

从@Dougui的答案开始，您可以强制`table_b_id`定义类型：

```
class TableA
  def [](name)
    if name.to_sym == :table_b_id
      super.to_i
    else
      super
    end
  end

  def method_missing(name, *args)
    if name.to_sym == :table_b_id && args.empty? && !block_given?
      super.to_i
    else
      super
    end
  end
end 
```

# javascript - 将 jQuery 缩放效果与杂志翻转 Javascript 集成

> ID：11588384
> 
> 赞同：5
> 
> 时间：2012-07-21T00:04:49.617
> 
> 标签：javascript, jquery

我正在尝试在 turn.js 杂志[翻转效果中添加一个 jquery 缩放](http://demo.tutorialzine.com/2012/03/instagram-magazine-php-jquery/)[插件](http://www.jacklmoore.com/zoom)。我让它们都分开工作，但无法像我想要的那样在每个杂志页面内获得缩放效果。部分代码如下。感谢所有想法，谢谢。

```
 <!-- Zoom script -->
<script src='jquery.zoom.js'></script>
<script>
 $(document).ready(function()
{
 $('#ex1').zoom();
});
</script>

        <!-- Zoom html -->
 <span class='zoom' id='ex1'>
   <img src='pages/daisy.jpg' width='555' height='320' alt='Daisy on the Ohoopee'/>
 </span>

        <!-- Magazine html -->
 <div id="magazine"> 
   <div style="background-image:url(pages/01.jpg);">
 </div>
   <div style="background-image:url(pages/02.jpg);">
 </div>
   <div style="background-image:url(pages/03.jpg);">
 </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:41:58.143

在类似的情况下，我成功使用了[anyZoomer](http://css-tricks.com/anythingzoomer-jquery-plugin/) ，它可以轻松缩放任意html元素，因为需要进行一些调整才能满足您的需求

# python - 如何从 csv 文件中提取特定列并使用 python 绘图

> ID：11588387
> 
> 赞同：2
> 
> 时间：2012-07-21T00:05:03.737
> 
> 标签：python, csv, plot

我有一个 csv 文件，其中包含以下几行数据：

```
# Vertex        X                Y                Z               K_I             K_II             K_III              J
  0       2.100000e+00      2.000000e+00     -1.000000e-04    0.000000e+00   0.000000e+00        0.000000e+00    0.000000e+00    
  1       2.100000e+00      2.000000e+00      1.699733e-01    8.727065e+00  -8.696262e-04        -1.800691e-04   3.465355e-04    
  2       2.100000e+00      2.000000e+00      3.367067e-01    8.907810e+00  -2.548819e-04        -2.789738e-04   3.610383e-04 
```

我想绘制：

顶点（第一列）与 K_I（第五列）

顶点（第一列）与 K_II（第六列）

顶点（第一列）与 K_III（第 7 列）

如何从该文件中提取特定列，然后从列中绘制折线图？任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T00:10:21.710

为了让您开始，您可以查找用于处理[CSV](http://docs.python.org/library/csv.html)（以及制表符和其他分隔文件）的[CSV](http://docs.python.org/library/csv.html)库。有几个选项可以绘制数据，但[matplotlib](http://matplotlib.sourceforge.net/)是您可能想要查看的一个很好的选项.

虽然不完全是您想要的，但我的一篇关于[使用 matplotlib 和 PyQT 从 SQL Server 绘图](http://www.mssqltips.com/sqlservertip/2664/plotting-sql-server-data-for-data-visualization/)的文章刚刚发布，其中包括一些使用 PyQT Gui 在 matplotlib 中绘图的相关示例。不过，我没有解决从 CSV 中提取数据的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T06:43:59.587

```
import pandas as pd
frame = pd.read_csv('filename.csv', index_col=0)
frame.K_I.plot() # Vertex is the x-axis 
```

“frame.plot()”也绘制所有列

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T03:58:54.167

[pandas](http://pandas.sourceforge.net/visualization.html)具有内置的可视化支持，这使得这项任务非常简单。它比 csv + matplotlib 更直接，因为 pandas 为您抽象了它。

# php - 复杂的Mysql查询来组合3个表数据？

> ID：11588388
> 
> 赞同：2
> 
> 时间：2012-07-21T00:05:10.360
> 
> 标签：php, mysql

我有一个存储关注者的表，我有另一个存储友谊的表现在我有第三个存储流数据的表。

它是一个社交网络，有很多原因，所以我不希望有一张桌子供追随者和朋友使用（意味着 Facebook 订阅/朋友）

有人可以提出一种方法，我应该如何查询流表来选择朋友和追随者的活动？

任何帮助将不胜感激，谢谢

这是简单的数据库方案，它不是真的像这样，但差不多！

好的，这里是数据库表架构，

追随者表。Row_ID User_ID Follow_User_ID

好友表 Row_ID User_ID Friend_ID

流表 Row_ID User_ID Contents_ID 时间类型

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T00:09:28.907

您要寻找的最好是作为两个不同的结果集......或两者的结合。

```
Select "friend" as src, author, post from friends f inner join streams s on s.author = f.id
union
Select "follower" as src, author, post from followers f inner join streams s on s.author = f.id 
```

这只是一些伪编码，但它应该让您了解如何进行。在不知道您的数据库架构的情况下，这是我能提供的最好的。

编辑：

这可能就是你要找的东西

```
select user_id, contents_id, time from (
    select user_id, contents_id, time
    from followers f inner join stream s on s.user_id = f.user_id and f.user_id = "username"
union
    select user_id, contents_id, time
    from friends f inner join stream s on s.user_id = f.user_id and f.user_id = "username"
) order by time desc 
```

这将按时间顺序返回数据，降序。

# vba - 如何根据前一个循环的答案为循环选择一个范围？

> ID：11588391
> 
> 赞同：1
> 
> 时间：2012-07-21T00:05:50.130
> 
> 标签：vba, excel

很抱歉标题措辞如此混乱，但很难将这个问题浓缩为几句话。

我试图找到特定方程的最小值。起初，我正在遍历等式，对于我们的目的而言，它可能类似于`y = .245x^3-.67x^2+5x+12`. 我想设计一个循环，其中通过循环的“步骤”越来越小。

例如，第一次循环时，它使用步长 1。我会得到大约 30 个值。我需要帮助的是如何使用从第一个循环中收到的三个最小值？

这是我可能从第一个循环中获得的值的示例：（我应该注意这根本不应该是实际代码。这只是对正在发生的事情的简要描述）

```
loop from x = 1 to 8 with step 1

results:

x = 1 -> y = 30
x = 2 -> y = 28
x = 3 -> y = 25
x = 4 -> y = 21
x = 5 -> y = 18
x = 6 -> y = 22
x = 7 -> y = 27
x = 8 -> y = 33 
```

我想要一些可以检测最低三个值并创建循环的东西。从这些结果中，得到 y 的最小三个结果的 x 值是`x = 4, 5, and 6`。

所以我此时的“猜测”是 x = 5。为了得到更好的“猜测”，我想要一个现在可以做的循环：

```
loop from x = 4 to x = 6 with step .5 
```

我可以继续这种模式，直到我对 x 的最小值得到一个荒谬的准确猜测。

有人知道我可以做到这一点吗？我知道我将获得的值将能够通过抛物线开放来建模，所以这种格式肯定会起作用。我在想这些值可以放在一列中。制作返回该列中 y 的最小值和相应的 x 值的东西并不难。

如果我太含糊，请告诉我，我可以回答您可能遇到的任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T00:50:08.197

好问题。这至少是我认为你应该为此做的事情的开始：

```
Sub findMin()
    Dim lowest As Integer
    Dim middle As Integer
    Dim highest As Integer
    lowest = 999
    middle = 999
    hightest = 999

    Dim i As Integer
    i = 1
    Do While i < 9
        If (retVal(i) < retVal(lowest)) Then
            highest = middle
            middle = lowest
            lowest = i
        Else
            If (retVal(i) < retVal(middle)) Then
                highest = middle
                middle = i
            Else
                If (retVal(i) < retVal(highest)) Then
                    highest = i
                End If
            End If
        End If
    i = i + 1
    Loop
End Sub

Function retVal(num As Integer) As Double
    retVal = 0.245 * Math.Sqr(num) * num - 0.67 * Math.Sqr(num) + 5 * num + 12
End Function 
```

我在这里所做的是将三个整数设置为您的三个最小值：最低、中间和最高。您循环遍历要插入公式的值（此处为 retVal 函数），并将 retVal（因此得名）的返回值与 retVal（最低）、retVal（中）和 retVal（最高）的值进行比较，根据需要更换它们。我刚刚开始使用 VBA，所以我所做的可能不是很优雅，但它至少可以识别导致函数值最低的整数。您可能需要稍微调整一下最低、中间和最高的值才能使其正常工作。我知道这并不完全是您正在寻找的东西，但它与我认为您应该做的事情差不多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T02:43:08.910

除非缩小问题域，否则没有简单的方法可以解决这个问题。

给出的示例多项式实际上没有最小值，这很容易通过观察确定`y'>0`（因此，y 总是增加 WRT x）。

鉴于广泛的解释

> [an] 方程，对于我们的目的来说，它可以是 y = .245x^3-.67x^2+5x+12

即使假设域仅限于多项式，也需要检查许多条件。

多项式阶数很重要，阶数决定了检查有多少解是可能的或是否有任何解是可能的必要条件。

如果不考虑这种复杂性，迭代方法可能会由于下溢错误或迭代步骤或边界的不幸选择而产生不正确的解决方案。

我不是在这里努力，我认为你的想法很巧妙。在实践中，它比你想象的要复杂。

# vb.net - 使用数组时 vb.net 中的 System.IndexOutOfRangeException

> ID：11588397
> 
> 赞同：1
> 
> 时间：2012-07-21T00:06:43.387
> 
> 标签：vb.net

好吧，我试图完成一个挑战，要求我从 0 到 1000 获得所有 5 或 3 的倍数，然后得到它们的总和，我是 vb.net 的新手，所以我认为这将是一个不错的选择我要解决的挑战> 我很确定我的基础知识是正确的，但我不太确定为什么会出现这个错误：/。

```
Module Module1

    Sub Main()
        Dim Counter As Integer = 1
        Dim Numbers() As Integer
        Dim NumbersCounter As Integer = 0
        Dim Total As Integer = 0

        While (Counter <= 1000)

            If (Counter Mod 3 = 0) Then
                Numbers(NumbersCounter) = Counter '<--- The error is located on Numbers.
                NumbersCounter = NumbersCounter + 1
                Counter = Counter + 1

            ElseIf (Counter Mod 5 = 0) Then
                Numbers(NumbersCounter) = Counter
                NumbersCounter = NumbersCounter + 1
                Counter = Counter + 1

            Else
                Counter = Counter + 1
            End If

        End While

        Counter = 0

        While (Counter <= Numbers.Length)
            If (Counter = 0) Then
                Total = Numbers(Counter)
                Counter = Counter + 1
            Else
                Total = Total * Numbers(Counter)
                Counter = Counter + 1
            End If

        End While

        PrintLine(Total)

    End Sub

End Module 
```

任何帮助或提示将不胜感激！提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T00:19:02.093

您需要为 Numbers 数组分配内存，并且由于最初知道大小，您可以在声明时分配：

Dim Numbers(1000) As Integer

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T05:18:26.663

在查看您的代码时，蛋头说您没有初始化您的数组是正确的。但是在这样做之后，我必须更改代码中的其他一些内容才能使其运行。

```
Module Module1

    Sub Main()
        Dim Counter As Integer = 1
        Dim Numbers(1000) As Integer          'Initialized the Array so it will be usable.
        Dim NumbersCounter As Integer = 0
        Dim Total As Integer = 0

        While (Counter <= 1000)

            If (Counter Mod 3 = 0) Then
                Numbers(NumbersCounter) = Counter 
                NumbersCounter = NumbersCounter + 1
                Counter = Counter + 1

            ElseIf (Counter Mod 5 = 0) Then
                Numbers(NumbersCounter) = Counter
                NumbersCounter = NumbersCounter + 1
                Counter = Counter + 1

            Else
                Counter = Counter + 1
            End If

        End While

        Counter = 0

        While (Counter <= Numbers.Length - 1)  ' Arrays are zero based so you need to subtract 1 from the length or else you will overflow the bounds
            If (Counter = 0) Then
                Total = Numbers(Counter)
                Counter = Counter + 1
            Else
                Total = Total + Numbers(Counter)  'You were multiplying here not adding creating a HUGE number
                Counter = Counter + 1
            End If

        End While

        Console.WriteLine(Total)  'Changed PrintLine which prints to a file to Console.WriteLine which writes to the screen
        Console.ReadLine          'Added a Console.ReadLine so the Window doesn't close until you hit a key so you can see your answer

    End Sub

End Module 
```

# mongoid - Mongoid 3 gem 依赖

> ID：11588399
> 
> 赞同：1
> 
> 时间：2012-07-21T00:06:53.663
> 
> 标签：mongoid, mongoid3

我想将我的 mongoid gem 升级到 3.0，这样我就可以升级 activeadmin-mongoid 以获得新功能。

然而，我的 mongoid-mapreduce gem 依赖于 2.0。有没有解决的办法？有没有办法查看 mongoid-mapreduce 是否仍然可以使用 mongoid 3.0？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T00:11:20.343

Mongoid 3.0与版本 2**不**向后兼容。由于依赖规范，所述 gem 不能与 mongoid v3 一起使用。即使你 fork 并更新依赖项，它仍然不太可能起作用。自 v2 以来，很多事情都发生了变化。您需要分叉该 gem 并调整代码（或要求作者这样做）。

# java - 格式化字符串解析

> ID：11588402
> 
> 赞同：0
> 
> 时间：2012-07-21T00:07:09.483
> 
> 标签：java, string, parsing

我正在调用返回以下字符串的 Web 服务：

```
anyType{x=4;y=5;z=acq} 
```

您如何获得 和的`x`值？`y``z`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T00:32:19.740

这不是最佳解决方案，但适用于调试信息。

但是，就像其他人建议的那样，最好将结果作为 XML（或 JSON）获取，因为您可以使用强大的库来解析数据。

```
final Matcher matcher =
        Pattern.compile("\\w+\\{x=(\\w+);y=(\\w+);z=(\\w+)\\}")
               .matcher("anyType{x=4;y=5;z=acq}");

while (matcher.find()) {
    final String x = matcher.group(1);
    final String y = matcher.group(2);
    final String z = matcher.group(3);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T00:45:30.737

关于网络服务，问题出在我正在使用的 KSOAP2 android 库上。我用来得到结果的代码是：

```
HttpTransportSE ht = new HttpTransportSE(URL);
ht.debug = true;
ht.call(SOAP_ACTION, envelope);
String response = envelope.getResponse().toString(); 
```

我必须使用以下行来获取 xml 的响应：

```
String responseXML = ht.responseDump; 
```

所以现在解析xml响应没有问题了。感谢大家的帮助。

# ubuntu - USB CDC 设备在 Windows 上工作，但在 Ubuntu 上不工作。我可以解决情况吗？

> ID：11588403
> 
> 赞同：2
> 
> 时间：2012-07-21T00:07:12.760
> 
> 标签：ubuntu, usb, serial-port

我有 USB CDC 设备。它在 Windows 上工作。我用腻子测试它。但它不适用于 Ubuntu。我使用内核 2.6.32-122-rtai 的 ubuntu 10.04。当我插入设备时，dmesg 中出现消息：

```
[40194.004034] usb 3-2: new full speed USB device using uhci_hcd and address 12
[40194.173219] usb 3-2: configuration #1 chosen from 1 choice 
```

但它没有关于串口文件（如/dev/ttyUSB1）的消息。

是否存在一些程序或命令使该设备在我的 Ubuntu 计算机上作为串行端口可见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:59:42.853

我使用置于 CDC 模式的 Symbol 条形码阅读器做了类似的事情。我发现它们出现在 /dev/ttyACM0 或 /dev/ttyACM1 中，而不是 /dev/ttyUSB。

Ubuntu 10.04 足够新，可以使用 udev，因此 /dev/ttyACM* 设备在插入设备之前不会显示。尝试：

```
cd /dev
ls -l ttyACM* 
```

如果您在拔下设备时什么也看不到，而在插入设备时看到什么，那么您已经找到了您的设备。

我发现 Symbol 设备没有告诉我它在哪里可以访问。我必须像上面详述的那样四处寻找。

另一个可能对您有帮助的命令是：

```
lsusb 
```

# hadoop - Hadoop 无法找到映射器

> ID：11588413
> 
> 赞同：1
> 
> 时间：2012-07-21T00:08:56.987
> 
> 标签：hadoop, mapreduce

`ClassNotFoundException`当我运行我的 Hadoop 作业（新 API - 1.0.3）时，我得到了。我有一个`Main`包含静态类`MapClass`和`ReduceClass`嵌套类的类。

我将我的工作配置如下：

```
 Job job = new Job();

    job.setJarByClass(Main.class);
    job.setJobName("My Job");

    job.setMapperClass(Main.MapClass.class);
    job.setReducerClass(Main.ReduceClass.class); 
```

主类如下：

```
public class Main {
    //Nested static Mapper
public static class MapClass extends Mapper<Text, Text, Text, Text> {

    @Override
    public void map(Text key, Text value, Context context) {
            ...
    }
}

    // Nested static Reducer
public static class ReduceClass extends Reducer<Text, Text, Text, Text> {

    @Override
    public void reduce(Text key, Iterable<Text> values, Context context) {
        ...
    }
} 
```

我没有在 Eclipse 创建`Main.class`时从项目中导出 jar`Main$MapClass.class`和项目`Main$ReduceClass.class`文件`bin`夹目录中的文件，我认为这应该是类路径的一部分。但是该作业无法找到 Mapper 类：

```
java.lang.RuntimeException: java.lang.ClassNotFoundException: MapClass
at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:867)
at org.apache.hadoop.mapreduce.JobContext.getMapperClass(JobContext.java:199)
at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:719)
at org.apache.hadoop.mapred.MapTask.run(MapTask.java:370)
at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
at java.security.AccessController.doPrivileged(Native Method)
at javax.security.auth.Subject.doAs(Subject.java:416)
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
at org.apache.hadoop.mapred.Child.main(Child.java:249) 
```

问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T07:51:20.100

尝试导出项目的 jar 文件。然后在以下命令中使用这个 jar：

```
hadoop jar "jar name" package.subpackage.DriverClass [-conf configXML] 
inputDir outputDir 
```

Driver 类是 MainClass。conf 选项是可选的，但建议使用，它指定了一个文件，您可以在其中设置特定的配置选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-31T23:59:00.663

如果您在 Eclipse 中作为 Java 应用程序运行，则 Eclipse 不会将所有需要的文件（即`Mapper`和`Reducer`Hadoop）发送到 Hadoop。使用 Eclipse Plugin for Hadoop 从 Eclipse 直接在 Hadoop 中运行应用程序。

# jquery - 使用 jQuery 滑动 3 li 项目

> ID：11588415
> 
> 赞同：4
> 
> 时间：2012-07-21T00:09:14.487
> 
> 标签：jquery, html, css

我有一个`div`带有`ul`列表的框，我想`li`在彼此下方显示 3 个项目，然后`slide`/`toggle`从我的列表中显示另外 3 个项目。

例如，在我的项目中，`ul`我将有 9`li`个项目，但我首先只显示 3 个项目，然后单击下一个按钮，我将显示接下来的三个，单击上一个按钮后，我将看到列表中的最后 3 个。

这可能吗？

我的示例代码：

```
<ul>
    <li>item 1</li>
    <li>item 2</li>
    <li>item 3</li>
    <li>item 4</li>
    <li>item 5</li>
    <li>item 6</li>
    <li>item 7</li>
    <li>item 8</li>
    <li>item 9</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T01:16:41.170

```
$('.itemsList').each(function() {

  const group = 3; // group 3 by 3
  const $items = $(this).find('li');
  const $btns = $(this).find('.prev, .next');
  const max = Math.ceil($items.length / group);
  let c = 0;

  function showItems(ev) {
    c = c<0 ? max-1 : c%max;
    $items.hide().slice(group*c, group*c+group).show();
  }

  $btns.on('click', function() {
    $(this).is('.next') ? ++c : --c;
    showItems();
  });

  showItems(); // init
});
```

```
<div class="itemsList">
  <ul id="myList">
    <li>item 1</li>
    <li>item 2</li>
    <li>item 3</li>
    <li>item 4</li>
    <li>item 5</li>
    <li>item 6</li>
    <li>item 7</li>
    <li>item 8</li>
    <li>item 9</li>
  </ul>
  <button type="button" class="prev">prev</button>
  <button type="button" class="next">next</button>
</div>

<div class="itemsList">
  <ul id="myList">
    <li>item 1 (Example with 5 items)</li>
    <li>item 2</li>
    <li>item 3</li>
    <li>item 4</li>
    <li>item 5</li>
  </ul>
  <button type="button" class="prev">prev</button>
  <button type="button" class="next">next</button>
</div>

<script src="//code.jquery.com/jquery-3.3.1.min.js"></script>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T00:41:45.693

这样的事情怎么样

*[**jsFiddle在这里**](http://jsfiddle.net/PAEms/1/)*

```
$('#next').click(function(){
    var index = $('ul li:visible').last().index() +2
    $('ul li:visible').slideUp().last().nextUntil(':nth-child('+index+'n+3)').slideDown();
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T00:31:06.717

您可以执行以下操作：

```
var showNumber = 3;
var startPos = 0;
var endPos = showNumber;
var $List = $('ul li');
$List.hide().slice(startPos ,endPos).fadeIn();

$('a').click( function() {
    startPos = startPos + showNumber;
    endPos = endPos + showNumber;
    $List.hide().slice(startPos ,endPos).fadeIn();
    return false;
}); 
```

见：http: [//jsfiddle.net/YURck/](http://jsfiddle.net/YURck/)

基本上它的作用是设置一次显示的数量（showNumber），然后确定要切片的开始和结束索引。

要扩展它，您可以检查长度，以便在您是最后一组元素时隐藏“下一个”链接。

希望能帮助到你 ：）

# embedded - 如何以编程方式读取存储在 OneTouch 血糖仪中的数据？

> ID：11588416
> 
> 赞同：0
> 
> 时间：2012-07-21T00:09:23.890
> 
> 标签：embedded

我患有 1 型糖尿病已有 11 年（从我 13 岁开始）。最近，我发现一些血糖仪将血糖存储在内存中（在我的例子中，*OneTouch Ultra 2*）。该设备有一个小而圆的输入，看起来就像任何给定的 iPod 上的那个。无论如何，我怎样才能读取存储在血糖仪内存中的数据？协议是否通用？我只问是因为每当我去看内分泌科医生时，护士都会拿走我的血糖仪并将我的血糖上传到生成图表等的数据库中。我应该问我的内分泌科医生吗？请帮我！我要改善所有1型糖尿病患者的医疗保健管理！

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-21T00:13:17.113

网络搜索是您的朋友：[http ://diabetesdata.pbworks.com/f/OneTouchUltraMiniProtocol.pdf](http://diabetesdata.pbworks.com/f/OneTouchUltraMiniProtocol.pdf)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T00:29:39.833

一些搜索显示他们有专门的[管理软件](http://www.onetouch.com/software_kit)，听起来正是您正在寻找的。

# django - 在 Django 中使用动态选择字段

> ID：11588418
> 
> 赞同：8
> 
> 时间：2012-07-21T00:09:38.220
> 
> 标签：django, dynamic, choicefield

我有一个`choiceField`为了创建一个带有一些选项的选择字段。像这样的东西：

```
forms.py
    class NewForm(forms.Form):
        title = forms.CharField(max_length=69)
        parent = forms.ChoiceField(choices = CHOICE) 
```

但我希望能够在没有预定义元组的情况下创建选项（这是 所需的`ChoiceField`）。基本上，我需要访问 request.user 以根据每个用户填写一些选项标签，但我不知道是否有任何方法可以在 forms.Form 类中使用 request。

另一种方法是预填充`NewForm`via 的实例：

```
views.py
form = NewForm(initial={'choices': my_actual_choices}) 
```

但我必须添加一个虚拟 CHOICE 来创建 NewForm 并且 my_actual_choices 似乎无论如何都不起作用。

我认为解决此问题的第三种方法是创建 ChoiceField 的子类并重新定义`save()`，但我不确定如何去做。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-21T01:19:45.760

您可以通过覆盖**init**来动态填充它们，基本上代码如下所示：

```
class NewForm(forms.Form):
    def __init__(self, choices, *args, **kwargs):
        super(NewForm, self).__init__(*args, **kwargs)
        self.fields["choices"] = forms.ChoiceField(choices=choices) 
```

`NewForm(my_actual_choices)`或`NewForm(my_actual_choices, request.POST, request.FILES)`等等。

# c - 在C中将原始二进制文件写入文件

> ID：11588421
> 
> 赞同：0
> 
> 时间：2012-07-21T00:10:30.510
> 
> 标签：c, binary

我正在尝试一次将原始二进制位写入文件。

我找到了一个使用 unsigned char 的示例-> [https://stackoverflow.com/a/2666669/1541965](https://stackoverflow.com/a/2666669/1541965)

但是最小大小是 8 位（因为 unsigned char 0 到 255）。

有没有办法以更直接的方式将位写入文件？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T00:13:36.313

你还没有说你使用的是什么操作系统。但通常您写入文件的最小单位是一个 8 位字节。如果您想写入单个位，则需要在您自己的代码中将它们组装成字节。我不知道任何操作系统的文件 IO 设施允许写入单个位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T00:16:51.103

不，没有，至少不是直接的。C 对二进制文件的 I/O 模型是它们是字节序列（通常为 8 位）。

您可以做的是，在您自己的代码中，编写一个函数，该函数采用 1 位值并将这些位收集到一个字节中，并在收到 8 位时将它们写入文件。如果尚未归档字节值，您还需要在最后进行额外的写入。

不能写入部分字节；如有必要，您可以在最后一个字节中填充零。

（C 标准要求一个字节*至少为*8 位，但它允许它更多。一个字节中的位数`CHAR_BIT`由遇到。）`<limits.h>``CHAR_BIT`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T00:19:47.997

计算机体系结构不允许您拆分字节，即 8 位。PC 在 8 位上工作。图灵的 Colossus 在 5 位上工作（因为在 Baudot 的代码中，数字 2^5 就足够了）。

微处理器没有指令来处理小于一个字节的单位（偶数位操作，如或，在 1、2、4、8 位上使用）。

# asp.net-mvc-3 - 如何在MVC c#应用程序中通过jquery将完整的模型从视图传递到控制器

> ID：11588426
> 
> 赞同：0
> 
> 时间：2012-07-21T00:11:49.250
> 
> 标签：asp.net-mvc-3

我有一个复选框和文本框的列表。我想让用户通过部分视图模式弹出窗口将项目添加到列表中。

用户将项目添加到列表后，如果原始视图中的任何项目中有值，我希望它们保留，并使用添加的项目刷新页面。

我想将完整模型从原始视图发送回控制器，然后我可以将新项目添加到该模型并将模型传递回原始页面并保留我的所有值。

我可以获取所有值并通过循环等在 javascript 中传递它们（非常乏味），但我认为完整模型将是最简单的方法。

[我在此处](https://stackoverflow.com/questions/1518417/how-to-send-a-model-in-jquery-ajax-post-request-asp-net-mvc)的帖子中看到了 Laviak 的链接...，但我无法使其正常工作。

它声明....如果您需要将完整模型发送到控制器，您首先需要该模型可用于您的 javascript 代码。

在我们的应用程序中，我们使用扩展方法执行此操作：

```
public static class JsonExtensions 
{ 
    public static string ToJson(this Object obj) 
    { 
       return new JavaScriptSerializer().Serialize(obj); 
   } 
} 
```

在视图上，我们使用它来渲染模型：

```
<script type="javascript"> 
  var model = <%= Model.ToJson() %> 
</script> 
```

然后，您可以将模型变量传递给您的 $.ajax 调用。

有没有人让这个工作？？？

谢谢比尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T00:27:20.647

你可以这样做：

```
<script type="text/javascript">
    var dataViewModel = @Html.Raw(Json.Encode(Model)); //Make sure you send the proper model to your view

    function MethodPost(param1, param2, etc...) {

    dataviewModel.Param1 = param1; //Or load a value from jQuery
    dataviewModel.Param2 = $("#param2").val();

    }

    //Pass it to a controller method
    $.post("@Url.Action(MVC.Home.PostMethodInController())", { viewModel: JSON.stringify(dataViewModel)} , function(data) {
        //Do something with the data returned.
    }
</script> 
```

[在控制器中，您可以使用nuget](http://james.newtonking.com/projects/json-net.aspx)上提供的 Json.Net获取您的类/模型。

```
 public virtual ActionResult Index()
    {
        return View(new MyModelToView());//Send at least an empty model
    }

    [HttpPost]
    public virtual JsonResult PostMethodInController(string viewModel)
    {
        var entity = JsonConvert.DeserializeObject<MyObject>(viewModel);

        //Do Something with your entity/class

        return Json(entity, JsonRequestBehavior.AllowGet);
    } 
```

希望这可以帮助。

# java - XmlPullParser 获取子节点的首选方式？

> ID：11588439
> 
> 赞同：2
> 
> 时间：2012-07-21T00:13:57.233
> 
> 标签：java, android, xml, parsing, xmlpullparser

获取 XML 字符串的子节点的首选方法是什么？在 android.xml 中似乎缺乏使用 XmlPullParser 解析的好例子。例如，如果我想解析这个：

```
<Point>
    <Id>81216</Id>
    <Name>Lund C</Name>
</Point> 
```

我想出了一种方法来完成这项工作：

```
List<Point> points = new ArrayList<Point>();
String id = null
name = null;

while (eventType != XmlPullParser.END_DOCUMENT) {
    if (eventType == XmlPullParser.START_TAG && xpp.getName().equals("Id")) {
        try {
            id = xpp.nextText();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
    else if (eventType == XmlPullParser.START_TAG && xpp.getName().equals("Name")) {
    try {
        name = xpp.nextText();
    } catch (Exception e) {
        e.printStackTrace();
    }
    else if(eventType == XmlPullParser.END_TAG && xpp.getName().equals("Point")) {
        Point point = new Point(id, name);
        points.add(point);
    }

    try {
        eventType = xpp.next();
    } catch (exception e) {
        e.printStackTrace();
    }
}

for (Point p : points) {
    tv.append(p.getId() + " | " + p.getName() + "\n");
} 
```

但它看起来真的很丑。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T01:56:31.657

在我看来，在 XML 中处理文本的更好方法如下所述：

[http://androidcookbook.com/Recipe.seam?recipeId=2217](http://androidcookbook.com/Recipe.seam?recipeId=2217)

getText() 不会生成异常，因为您位于 XmlPullParser.TEXT 区域内（因此可以确定 Text 存在）。

希望能帮助到你！

# c - 具有可变长度保留空间的固定长度结构

> ID：11588442
> 
> 赞同：4
> 
> 时间：2012-07-21T00:14:46.140
> 
> 标签：c, struct

在嵌入式世界中，我们经常拥有通过固定长度缓冲区传递的数据结构。使用这样的东西相对容易处理：

```
#define TOTAL_BUFFER_LENGTH 4096
struct overlay {
    uint16_t field1;
    uint16_t field2;
    uint8_t  array1[ARY1_LEN];
};
static_assert(sizeof(struct overlay) <= TOTAL_BUFFER_LENGTH);

struct overlay* overlay = malloc(TOTAL_BUFFER_LENGTH); 
```

也就是说，我们使用数据结构作为覆盖层，以允许轻松访问当前正在使用的缓冲区部分。

然而，我们有许多缓冲区格式，它们也使用缓冲区的*最后*几个字节来存储校验和等内容。我们目前使用这样的结构：

```
struct overlay {
    uint16_t field1;
    uint16_t field2;
    uint8_t  array1[ARY1_LEN];
    char     reserved[TOTAL_BUFFER_LENGTH -
                      sizeof(uint16_t) - sizeof(uint16_t) -
                      (sizeof(uint8_t) * ARY1_LEN) -
                      sizeof(uint32_t)];
    uint32_t crc;
}; 
```

这个简单的数据结构看起来很丑陋，但当结构增长到有几十个字段时，这绝对是一个怪物。这也是可维护性的噩梦，因为添加或删除结构字段意味着`reserved`必须同时更新大小计算。

当结构的末尾只包含一项（如校验和）时，我们有时会使用辅助函数来读取/写入值。这使数据结构保持干净和可维护，但是当缓冲区的末尾有多个字段时，它不能很好地扩展。

如果我们可以做这样的事情会很有帮助：

```
struct overlay {
    uint16_t field1;
    uint16_t field2;
    uint8_t  array1[ARY1_LEN];
    char     reserved[TOTAL_BUFFER_LENGTH -
                      offsetof(struct overlay, reserved) -
                      sizeof(uint32_t)];
    uint32_t crc;
}; 
```

不幸的是，`offsetof`仅适用于完整的对象类型，并且由于它位于 的定义的中间，因此`struct overlay`该类型还不完整。

有没有一种更清洁、更易于维护的方式来做这种事情？我基本上需要一个固定长度的结构，在开头和结尾都有字段，中间的剩余空间保留/未使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T01:29:34.020

在您的情况下，我想我可能会这样做：

```
typedef struct overlay_head
{
    uint16_t field1;
    uint16_t field2;
    uint8_t  array1[ARY1_LEN];
} overlay_head;

typedef struct overlay_tail
{
    uint32_t crc;
} overlay_tail;

enum { OVERLAY_RSVD = TOTAL_BUFFER_LENGTH - sizeof(overlay_head)
                                          - sizeof(overlay_tail) };

typedef struct overlay
{
    overlay_head h;
    uint8_t      reserved[OVERLAY_RSVD];
    overlay_tail t;
} overlay; 
```

然后，您几乎可以像以前一样工作，除了以前写的地方`p->field1` 现在写`p->h.field1`，以前写的地方`p->crc`现在写`p->t.crc`。

请注意，这可以非常有效地处理任意大的尾部结构，只要头部和尾部都适合整体大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T00:26:15.537

您可以定义一个结构，该结构仅在末尾包含带有 CRC 字段的缓冲区：

```
struct checked_buffer {
  char data[TOTAL_BUFFER_LENGTH - sizeof(uint32_t)];
  uint32_t crc;
}; 
```

然后将你的“覆盖”放在它的`data`领域。您可能已经将指针“转换”为原始缓冲区，因此当您想要访问 CRC 字段时，将其转换`char*`为to`overlay*`应该不是什么大问题。`overlay*``checked_buffer*`

但是如果你想让一个字段在一堆结构中处于一致的位置，把它放在每个结构的*开头会更容易。*这样，您可以直接在每个结构中声明它，而无需做任何奇怪的事情，并且您不需要任何指针转换来访问它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-01T10:05:29.267

那个怎么样？

```
union a256
{
    struct
    {
        int field_a;
        int field_b;
        char name[16];
        // 
        int crcshadow;
    };

    struct
    {
        char buff[256-sizeof(int)];
        int crc;
    };
} ;

static_assert(offsetof(a256, crcshadow) < offsetof(a256, crc), "data too big"); 
```

第一个结构包含数据，第二个定义此联合的固定大小。

# php - PHP：跳到 strpos() 给定的位置

> ID：11588444
> 
> 赞同：2
> 
> 时间：2012-07-21T00:14:52.847
> 
> 标签：php

如果我有一个用 导出的字符串位置，我`strpos()`将如何跳到那个位置？我正在使用一个需要从该位置或下一行开始的函数。

我该怎么做？速度是一个因素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T00:16:00.653

`substr()`让您拉出字符串的一部分。[http://php.net/manual/en/function.substr.php](http://php.net/manual/en/function.substr.php)

从手册：

```
<?php
$rest = substr("abcdef", 0, -1);  // returns "abcde"
$rest = substr("abcdef", 2, -1);  // returns "cde"
$rest = substr("abcdef", 4, -4);  // returns false
$rest = substr("abcdef", -3, -1); // returns "de"
?> 
```

因此，您可以将您的`strpos`用作第二个参数的输入。如果您想将第三个参数留空，直到字符串结束。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T00:25:57.920

您可以跳到字符串中的任何字符

```
$string[$index] 
```

但我不确定你所说的跳到位置是什么意思？

如果跳到位置意味着在该位置拆分字符串，@strap 是正确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T01:13:59.727

```
 $new_string = substr( $string, strpos($string, 'a') ); 
```

上面将从第一个'a'开始的字符串分配给变量 $new_string

# android - 在 Android 中本地读取 XML

> ID：11588446
> 
> 赞同：0
> 
> 时间：2012-07-21T00:15:06.337
> 
> 标签：android, xml, local-storage

我正在尝试编写一个从本地 xml 文件读取的应用程序，需要一些帮助。我在这里以及 google 和 youtube 上阅读了几篇文章来读/写 xml 文件，但其中大部分是用于在线文件的。我正在寻找在 Android 本地读/写 xml。到目前为止，我认为，我需要的步骤如下。

1.  读取 XML 文件。
2.  将元素转换为字符串数组。
3.  用字符串数组填充列表。

我似乎无法让前两个工作。我不是在寻找代码，也不是在寻找一种简单的方法。我真的很想弄清楚这一点，但需要你们所有大师的指导。我真的找不到读取 xml 文件的方法。根据我在这里找到的内容，我需要将 xml 文件放在 res/raw 文件夹中，然后从那里开始，我不太确定该怎么做。如何将其读入数组？一旦我启动并运行了这个东西，我会尽我所能发布代码，并希望能帮助遇到类似问题的其他人。再次感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T01:01:04.887

在你的主要课程中

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;

public class SimpleList extends Activity {  //SimpleList is the name of this class

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        final ListView lv=(ListView)findViewById(R.id.listView1);       

        //final ArrayList<String> myNewList = new ArrayList<String>();

        ArrayAdapter<CharSequence> adapter=ArrayAdapter.createFromResource(this, R.array.simple_array,android.R.layout.simple_list_item_1);
        lv.setAdapter(adapter);
        lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
                // TODO Auto-generated method stub      
                String item=lv.getItemAtPosition(arg2).toString();
                String itemordered;
                itemordered = item + " added to list";
                Toast.makeText(getApplicationContext(), itemordered, Toast.LENGTH_LONG).show();
            }
        });
    }
} 
```

在 strings.xml 中创建一个字符串数组

```
<resources>

    <string name="app_name">SimpleList</string>
    <string name="menu_settings">Settings</string>
    <string name="title_activity_main">SimpleList</string>

    <string-array name="simple_array">
        <item>Bacon Double Cheese Burger</item>
        <item>Bacon Cheeses Burger</item>
        <item>Cheese Burger</item>
        <item>Hamburger</item>
        <item>Grilled Chicken Sandwich</item>
        <item>Crispy Chicken Sandwich</item>
        <item>Chicken Strips</item>
        <item>Hot Dog</item>
        <item>Chocolate Chip Cookie Dough Polar Swirl</item>
        <item>Vanilla Shake</item>
        <item>Chocolate Shake</item>
        <item>Strawberry Shake</item>
    </string-array>

</resources> 
```

在 main.xml 中为您的 ListView 创建一个布局

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/listView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:divider="#FFCC00"
        android:dividerHeight="2dp" >
    </ListView>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T18:20:48.077

我终于让它按照我想要的方式工作，这就是我想要完成的。对于所有提供答案的人，非常感谢！我取了你的每一个图案，并根据我的需要对其进行定制。我绝不是 android/java/xml 专家，但这就是我得到的，它的工作方式是我想要的！

```
public class MainActivity extends Activity {

Spinner spinner;
List<String> ingredient = new ArrayList<String>();
List<String> effect1 = new ArrayList<String>();
List<String> effect2 = new ArrayList<String>();
List<String> effect3 = new ArrayList<String>();
List<String> effect4 = new ArrayList<String>();

XmlResourceParser myXml;
int eventType;
String nodeValue;

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    loadXml(); // Reads XML and loads it into Lists, One list for each element
    convertListToSpinner(); // Takes Lists and merges data with Spinners (Currently Unimplemented)

}

private void convertListToSpinner() {
    // TODO Auto-generated method stub

}

private void loadXml() {
    // TODO Auto-generated method stub
    myXml = getBaseContext().getResources().getXml(R.xml.xmlfilename);
    try {
        myXml.next();

    eventType = myXml.getEventType(); // Get current xml Event

    } catch (XmlPullParserException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    while(eventType != XmlPullParser.END_DOCUMENT){
        if(eventType == XmlPullParser.START_DOCUMENT){
            // checks can be placed here to make sure file is read
        }
        else if(eventType == XmlPullParser.START_TAG){
            nodeValue = myXml.getName();

            try{
            if(nodeValue.equalsIgnoreCase("Ingredient")){ //Finds Ingredient tag
            myXml.next(); //Since the ingredient tag does not hold the text, we go to next element area
            ingredient.add(myXml.getText().trim()); // Set the text of the Ingredient tag to list
            }

            //Since the effect tags are followed by ending tags, we can just do nextText() to get tag text
            if(nodeValue.equalsIgnoreCase("Effect1")){
                effect1.add(myXml.nextText().trim()); // Set the text of the Effect1 tag to list
            }
            if(nodeValue.equalsIgnoreCase("Effect2")){
                effect2.add(myXml.nextText().trim()); // ditto
            }
            if(nodeValue.equalsIgnoreCase("Effect3")){
                effect3.add(myXml.nextText().trim()); // ditto
            }
            if(nodeValue.equalsIgnoreCase("Effect4")){
                effect4.add(myXml.nextText().trim()); // ditto
            }
            }catch(Exception e){
                e.getMessage();
            }

        }
        try {
            eventType = myXml.next();
        } catch (XmlPullParserException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    for(int i = 0; ingredient.size() > i; i++){
        System.out.println(ingredient.get(i));

    }

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

XML 文件是当前格式。

```
<?xml version="1.0" encoding="UTF-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        name="item"
        type="string">
        <Ingredient>
         Intrests
            <effect1>
            Android
            </effect1>
            <effect2>
            Programming
            </effect2>
            <effect3>
            Type O Negative
            </effect3>
            <effect4>
            Sirenia
            </effect4>
        </Ingredient>
        <Ingredient>
        Virtues
            <effect1>
        Power
            </effect1>
            <effect2>
        Money
            </effect2>
            <effect3>
        Knowledge
            </effect3>
            <effect4>
        Kindness
            </effect4>
        </Ingredient>
    </item>
</resources> 
```

我希望这可以帮助其他遇到类似问题的人。再次感谢 Sobo 和 HADEV 的贡献！

我确信有更好的方法来做正在做的事情，但我很高兴我能做到这一点:)

# xml - 将选项卡式文本转换为 Perl 数据格式

> ID：11588451
> 
> 赞同：2
> 
> 时间：2012-07-21T00:16:17.827
> 
> 标签：xml, json, perl, hashtable, vlc

我有一些来自 VLM telnet 服务的数据：

```
show
    media : ( 1 broadcast - 0 vod )
        cam1
            type : broadcast
            enabled : yes
            loop : no
            inputs
                1 : rtsp://xxx:xxx@xxx.xxx.xxx.xxx:xxx/xxxx/xxx.xxx
            output : #transcode{vcodec="h264"}:standard{access=http,mux=ts,dst=xxx.xxx.xxx.xxx:6690/cam1}
            options
            instances
                instance
                    name : default
                    state : playing
                    position : 0,000000
                    time : 0
                    length : -1
                    rate : 1,000000
                    title : 0
                    chapter : 0
                    can-seek : 0
                    playlistindex : 1
    schedule 
```

这里有一种方法可以将此数据转换为 XML 或 JSON 或其他 Perl 支持的格式（哈希表等）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T13:51:13.930

这些数据非常接近 YAML，也许是故意的。你需要做的就是

*   添加一个初始行`---`来标记内容的开始

*   删除所有评论，例如`( 1 broadcast - 0 vod )`.

*   向当前不包含冒号的所有行添加尾随冒号

现有的评论会很好，只是`media`节点不能既等于评论又等于`cam1`节点的容器。

该程序编辑数据以形成正确的 YAML，将其加载到 Perl 哈希中并转储结果。

```
use strict;
use warnings;

use YAML 'Load';

open my $fh, '<', 'VLM.txt' or die $!;

my $yaml = "---\n";

while (<$fh>) {
  s/\s*\(.*//;
  s/$/ :/ unless /:/;
  $yaml .= $_;
}

my $data = Load($yaml);

use Data::Dump;
dd $data; 
```

**输出**

```
{
  show => {
    media => {
      cam1 => {
        enabled   => "yes",
        inputs    => { 1 => "rtsp://xxx:xxx\@xxx.xxx.xxx.xxx:xxx/xxxx/xxx.xxx" },
        instances => {
                       instance => {
                         "can-seek"      => 0,
                         "chapter"       => 0,
                         "length"        => -1,
                         "name"          => "default",
                         "playlistindex" => 1,
                         "position"      => "0,000000",
                         "rate"          => "1,000000",
                         "state"         => "playing",
                         "time"          => 0,
                         "title"         => 0,
                       },
                     },
        loop      => "no",
        options   => undef,
        output    => "#transcode{vcodec=\"h264\"}:standard{access=http,mux=ts,dst=xxx.xxx.xxx.xxx:6690/cam1}",
        type      => "broadcast",
      },
    },
    schedule => undef,
  },
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T02:35:39.330

您可能正在尝试已经完成的事情 - 检查这个 SF 项目：

[http://sourceforge.net/projects/p5vlc/files/latest/download?source=files](http://sourceforge.net/projects/p5vlc/files/latest/download?source=files)

# regex - 使用 RegEx 搜索 VBA 源代码

> ID：11588452
> 
> 赞同：3
> 
> 时间：2012-07-21T00:16:36.587
> 
> 标签：regex, vba, excel

`col*r`我需要在我的源代码（即）中找到所有出现的特定 RegEx 。[我意识到，如果您使用此处](https://stackoverflow.com/questions/10118061/how-to-search-through-vba-code-files)和[此处](http://msdn.microsoft.com/en-us/library/aa443952%28v=vs.60%29.aspx)`VBComponents.CodeModule.Find()`解释的方法，您可以通过编程方式搜索代码中的模式 (RegEx) 。但这不符合我的需要，因为它只告诉你是否找到了这样的表达。我还需要模块中的实际表达式（例如and ）。`colour``color`

有没有办法在 VBA 中以编程方式实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T01:25:05.470

```
Dim re, match
Set re = CreateObject("vbscript.regexp")
re.Pattern = "your regex"
re.Global = True

For Each match In re.Execute("you input")
    MsgBox match.Value
Next 
```

有关更多信息，请查看此链接：http: [//msdn.microsoft.com/en-us/library/ms974570.aspx](http://msdn.microsoft.com/en-us/library/ms974570.aspx)

# python - 如何使用 Python Requests 库处理编码

> ID：11588458
> 
> 赞同：5
> 
> 时间：2012-07-21T00:17:25.893
> 
> 标签：python, unicode, encoding, python-requests

我与编码斗争太久了，今天我想打破思维障碍。

现在，我正在使用[Requests](http://docs.python-requests.org/)抓取一堆网站，据我所知，它使用 HTTP 标头来确定页面使用的编码，当网站的标头丢失时回退到[chardet 。](http://pypi.python.org/pypi/chardet)从那里，它解码它下载的字节码，然后帮助我将`r.text`.

都好。

但我感到困惑的是，我从那里对文本做了一些工作，然后将其打印到标准输出，在我打印时提供编码：

```
 print foo.encode('utf-8') 
```

问题是当我这样做时，打印出来的东西就搞砸了。在下文中，我希望在“判断”和“标准”这两个词之间加一个破折号：

```
 Declaratory judgmentsStandard of review. 
```

相反，我得到了一个四四方方的东西，里面有四个小数字。当然，它似乎没有出现在这里，但我认为数字是 0097，这与我得到的结果相对应：

```
repr(foo)
u'Declaratory judgments\x97Standard of review.' 
```

所以这是有道理的，但我的 emdash 呢？

**该过程归结为：**

1.  请求下载页面并将文本智能解码为 un​​icode 对象
2.  我和它一起工作
3.  我将其编码为 utf-8 并打印出来。

问题出在哪里？这对我来说听起来像是[神话般的 unicode 三明治](http://nedbatchelder.com/text/unipain/unipain.html#35)，但显然我错过了一些东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T00:27:21.137

You are doing something odd. `\x97` is an emdash in the [cp1252](http://en.wikipedia.org/wiki/Cp1252) encoding. In a Unicode string, it's [U+0097 END OF GUARDED AREA](http://www.fileformat.info/info/unicode/char/97/index.htm). Somehow, you are reading cp1252 bytes as Unicode. Show more of the code that got you to this state, and we can dig deeper.

PS: the Unicode sandwich is hardly mythical, it is an ideal to strive for! :)

# javascript - 使用 --- innerHTML = "... HttpLink ..."在 javascript 函数中创建链接

> ID：11588460
> 
> 赞同：3
> 
> 时间：2012-07-21T00:18:33.233
> 
> 标签：javascript, internet-explorer, function, innerhtml

我正在学习用 html 编写，但我有一个我无法理解的问题。以下代码适用于其他浏览器，但不适用于 IE9。我知道这与此有关，`innerHTML`但我无法理解为此找到的答案。

```
<html> <head> <script type="text/javascript">
function hw_function1() {
    var img11=document.createElement("a"); 
    img11.innerHTML = "<html> <body> <a href='http://google.de'>Google</a> </body></html>";
    document.body.appendChild( img11 );
}
</script>
<body>
    <a href="#" onclick="javascript:hw_function1()";>Test</a>
</body> </html> 
```

在不改变结构的情况下我应该改变什么（如果可能，只改变innerHTMl 部分）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T00:22:10.467

由于您正在创建一个元素，您只需通过属性`a`将 href 分配给该元素。`.href`

您可以将其文本内容设置`.innerHTML`为方便，尽管它并不是真正的“纯”方法。

```
var img11=document.createElement("a");

img11.href='http://google.de';
img11.innerHTML = 'Google';

document.body.appendChild( img11 ); 
```

* * *

另一种设置文本内容的方法是这样的......

```
img11.appendChild(document.createTextNode("Google")); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T00:23:54.333

您的代码是在原始代码中创建另一个 HTML 页面。这是错误和无效的。这是因为某些浏览器可以原谅和纠正您的代码甚至可以正常工作的事情。

如果您正在创建超链接元素，您应该使用 innerHTML 在其中添加文本或图像或其他内联元素。

您应该更改其属性以设置 href`img11.href='http://xyz.com';`

# java - JTable 单元格跨度合并

> ID：11588462
> 
> 赞同：3
> 
> 时间：2012-07-21T00:19:10.677
> 
> 标签：java, swing, merge, jtable, html

嗨，我在使用 Java JTable 时遇到问题。我想合并或跨越单元格。我用这个例子做到了：

[http://www.java3z.com/cwbwebhome/article/article5/swing_example/JTableExamples4.html](http://www.java3z.com/cwbwebhome/article/article5/swing_example/JTableExamples4.html) （最后两个）

它可以工作，但标题和单元格宽度的大小不同。当有更多的 20 列时，问题变得更加严重，最后一个单元格只出现了一半。有谁知道如何解决同步单元格和标题的问题？有人有另一个 CellSpan 示例/方式吗？

如果有人尝试运行此示例将得到 StackOverFlow 错误，要解决，只需更改此行：*setColumnIdentifiers(columnNames);* 到 *columnIdentifiers = columnNames;* 在 AttributiveCellTableModel 类中。提前致谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T02:23:05.910

[此处](http://www.java2s.com/Code/Java/Swing-Components/MultiSpanCellTableExample.htm)提供了相同的示例。看来问题可能在`MultiSpanCellTable` `getCellRect()`实施中。列边距会影响单元格宽度并生成此偏移量。如果您更换，问题似乎消失了：

```
cellFrame.width = aColumn.getWidth() + columnMargin; 
```

和：

```
cellFrame.width = aColumn.getWidth(); 
```

# objective-c - 如何从 UIViewController 调用 UIView 子类方法？

> ID：11588464
> 
> 赞同：0
> 
> 时间：2012-07-21T00:19:46.353
> 
> 标签：objective-c, uiview, uiviewcontroller

在我的`HypnosisViewController.m`我有这个代码添加一个`UIView`子类，`HypnosisView`到窗口。我的目标是在控件更改其值时设置`UIColor circleColor`我的`HypnosisView`实例的属性。`UISegmented`

```
- (void) loadView 
{
    CGRect frame = [[UIScreen mainScreen] bounds];
    HypnosisView *v = [[HypnosisView alloc] initWithFrame:frame];
    CGRect segment = CGRectMake(200, 300, 75, 20);
    UISegmentedControl *colors = [[UISegmentedControl alloc]initWithFrame:segment];
    [v addSubview:colors];
    [self setView:v];
} 
```

然后我想从这里使用`IBAction`插座，但是在使用此代码时，xcode 在我的自定义类中无法识别我的 getter/setter 方法：

```
- (IBAction)setRingColor:(id)sender
{
    if ([sender selectedSegmentIndex] == 0)
    {
        [self.view setCircleColor:[UIColor redColor]]; 
    }
} 
```

我怎样才能将此传达给我的客户`UIView`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T00:25:59.077

您必须将其向下转换为其派生类型。

```
[((HypnosisView *)self.view) setCircleColor:[UIColor redColor]]; 
```

# c++ - 父注册子方法：如何避免设计反模式？

> ID：11588466
> 
> 赞同：3
> 
> 时间：2012-07-21T00:19:56.880
> 
> 标签：c++, anti-patterns

```
struct Base {
  void foo(??? fn) {
    // do something with fn
  }
};

struct A : Base {
  A() : Base() { ... }
  void aa() { ... }
  void aaa() { ... }
};

struct B : Base {
  B() : Base() { ... }
  void bb() { ... }
};

int main() {
  A a, B b;
  a.foo(a.aa); // foo works with aa()
  a.foo(a.aaa); // foo works with aaa()
  b.foo(b.bb); // foo works with bb()
  return 0;
} 
```

我想`fn`成为`Base`. 这似乎是一个糟糕的设计：父母不应该意识到他们的孩子。但是，将功能写入每个子类会导致代码重复。我想让孩子尽可能瘦。

实现所需功能的最佳设计是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T00:47:56.117

Say hello to `std::function<void()>`，它完全执行抽象任何返回 void 且没有参数的函数的任务。

编辑：为什么不简单地使用虚函数？像

```
struct Base {
private:
  virtual void fn() = 0;
public:
  void foo() {
    // do something with fn
  }
};

struct A : Base {
  A() : Base() { ... }
  void fn() { ... }
};

struct B : Base {
  B() : Base() { ... }
  void fn() { ... }
};

int main() {
  A a, B b;
  a.foo(); // foo works with aaa()
  b.foo(); // foo works with bb()
  return 0;
} 
```

但是，确实将您限制为每个派生类只有一个覆盖函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T00:55:02.500

您可以使用方法指针。

```
struct Base {
  template <typename D>
  void foo(void(D::*fn)()) {
    D *d = static_cast<D *>(this);
    (d->*(fn))();
  }
};

  A a; B b;
  a.foo(&A::aa); // foo works with aa()
  a.foo(&A::aaa); // foo works with aaa()
  b.foo(&B::bb); // foo works with bb() 
```

如果你想要更好的类型安全，你应该使用`dynamic_cast`，但你需要添加一个虚拟析构函数，以便可以进行动态类型推断：

```
struct Base {
  virtual ~Base() {}
  template <typename D>
  void foo(void(D::*fn)()) {
    D *d = dynamic_cast<D *>(this);
    if (d == 0) throw 0;
    (d->*(fn))();
  }
};

  b.foo(&B::bb); // ok
  b.foo(&A::aa); // exception thrown 
```

# ios - QuincyKit/PLCrashReporter：在崩溃之前提供描述

> ID：11588474
> 
> 赞同：2
> 
> 时间：2012-07-21T00:21:50.193
> 
> 标签：ios, crash, plcrashreporter

我正在使用在 PLCrashReporter 之上运行的 QuincyKit 来发现我的 iOS 应用程序中的生产崩溃，并获取日志。有时，如果我在崩溃点以上的几个调用堆栈级别中有一些变量，它将极大地帮助我调试。比如，如果记录处理代码嵌套了很多层，那么它在哪个记录 ID 上崩溃了。

问题是 - 有没有办法提供某种上下文字符串作为生成时的描述插入崩溃日志？我会在进入记录的调用堆栈时设置它，我会在退出时清除它。如果它是非持久性的（即在内存中）会更好——我担心一直写入非易失性存储器会对电池造成负担。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T05:48:18.717

不，但该[功能是在 2 年前提出的，](http://code.google.com/p/plcrashreporter/issues/detail?id=6)并且有一个补丁。

我实际上更喜欢允许记录环形缓冲区内容的版本（您可以有效地将消息记录到其中！），这似乎可能更有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T14:42:25.200

找到了一个有限的解决方法。我使用一个名称从包 ID 派生的[共享内存块来存储上下文字符串。](https://stackoverflow.com/questions/11589105/shmget-throws-sigsys-on-ios/11671821#11671821)该块在正确关机时被清除。然后我覆盖`-crashReportDescription`我的 Quincy 委托，以便它提供共享内存内容（如果有）作为描述。仅当最后一次关闭应用程序是崩溃时，它才是非空的。

这种方法显然存在缺陷。例如，如果他们在崩溃和下一次应用启动之间重新启动设备，共享内存信息就会丢失。

编辑：在设计的第一个版本中，我使用了一个名为 UIPasteboard 的私有而不是共享内存。事实证明，这对性能造成了很大的影响。共享内存要快几个数量级。

EDIT2：但后来他们破坏了 iOS 7 中的共享内存，所以 UIPasteboard 又回来了。真可惜。

EDIT3：找到了另一种方法，不太优雅，但它适用于 iOS 7。我将上下文字符串存储在一个普通的静态内存块中。我在 PLCrashReporter 中放置了一个自定义崩溃处理程序，带有`[[PLCrashReporter sharedReporter] setCrashCallbacks:]`. 在处理程序中，我将所述上下文（如果有）写入文件。在应用程序启动时，我读取了所述文件，并在`-crashReportDescription`. 走开，UIPasteboard。

# python - BeautifulSoup findAll 带有名称和文本

> ID：11588481
> 
> 赞同：0
> 
> 时间：2012-07-21T00:23:33.293
> 
> 标签：python, beautifulsoup

我正在尝试匹配以下 HTML (file.txt) 中的 TH 标签：

```
<TABLE WIDTH="71%" BORDER=0 CELLSPACING=0 CELLPADDING=0>
<TR VALIGN="BOTTOM">
<TH WIDTH="34%" ALIGN="LEFT"><FONT SIZE=1><B>Name<BR> </B></FONT><HR NOSHADE></TH>
<TH WIDTH="3%"><FONT SIZE=1>&nbsp;</FONT></TH>
<TH WIDTH="5%" ALIGN="CENTER"><FONT SIZE=1><B>Age</B></FONT><HR NOSHADE></TH>
<TH WIDTH="3%"><FONT SIZE=1>&nbsp;</FONT></TH>
<TH WIDTH="55%" ALIGN="CENTER"><FONT SIZE=1><B>Positions</B></FONT><HR NOSHADE></TH>
</TR>
<TR BGCOLOR="#CCEEFF" VALIGN="TOP">
<TD WIDTH="34%"><FONT SIZE=2>Stephen A. Wynn</FONT></TD>
<TD WIDTH="3%"><FONT SIZE=2>&nbsp;</FONT></TD>
<TD WIDTH="5%" ALIGN="CENTER"><FONT SIZE=2>60</FONT></TD>
<TD WIDTH="3%"><FONT SIZE=2>&nbsp;</FONT></TD>
<TD WIDTH="55%"><FONT SIZE=2>Chairman of the Board and Chief Executive Officer</FONT></TD>
</TR>
<TR BGCOLOR="White" VALIGN="TOP">
<TD WIDTH="34%"><FONT SIZE=2>Kazuo Okada</FONT></TD>
<TD WIDTH="3%"><FONT SIZE=2>&nbsp;</FONT></TD>
<TD WIDTH="5%" ALIGN="CENTER"><FONT SIZE=2>60</FONT></TD>
<TD WIDTH="3%"><FONT SIZE=2>&nbsp;</FONT></TD>
<TD WIDTH="55%"><FONT SIZE=2>Vice Chairman of the Board</FONT></TD>
</TR>
</TABLE> 
```

我尝试了以下方法，但似乎不起作用：

```
from bs4 import BeautifulSoup

infile = open("file.txt")
soup = BeautifulSoup(infile.read())
#this works
soup.findAll('th')
#this works but isn't particularly useful...
soup.findAll(text="Age")
#this is what I really want, but it returns an empty list
soup.findAll('th', text="Age") 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T00:36:17.247

据我所知，您想要获取具有文本“Age”的 th 对象。有很多方法可以剥那只猫的皮，基本上都是从找到所有的开始。从那里您可以遍历所有这些以找到包含年龄的那个。所以下面的代码应该很有用。

```
out = []
foo = soup.findAll("th")
for bar in foo:
    if bar.find(text"Age"):
        out.append(bar) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T01:03:42.983

附加`<HR>`元素干扰了 BeautifulSoup 的字符串处理。

来自 BeautifulSoup 文档：“虽然文本用于查找字符串，但您可以将其与查找标签的参数结合使用，Beautiful Soup 将查找 .string 与您的文本值匹配的所有标签。”

你会发现`soup.findAll('th')[2].string`is `nil`， while `soup.findAll('th')[2].font.string`is `u"Age"`。

要在不更改标记的情况下找到所需的标题，您必须执行 TimD 建议的操作：

```
out = []
headers = soup.findAll("th")
for header in headers:
    if header.find(text="Age"):
        out.append(header) 
```

# javascript - 如何用另一个响应替换窗口的 URL 哈希？

> ID：11588482
> 
> 赞同：74
> 
> 时间：2012-07-21T00:23:37.307
> 
> 标签：javascript, jquery, hash, replace, attr

我正在尝试使用 replace 方法更改散列 URL（document.location.hash），但它不起作用。

```
$(function(){
 var anchor = document.location.hash;
 //this returns me a string value like '#categories'

  $('span').click(function(){

     $(window).attr('url').replace(anchor,'#food');
     //try to change current url.hash '#categories'
     //with another string, I stucked here.
  });

}); 
```

我不想更改/刷新页面，我只想替换 URL 而没有任何响应。

注意：我不想用 href="#food" 解决方案来解决这个问题。

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2012-07-21T00:28:30.547

使用`location`或`window.location`代替`document.location`后者是非标准的。

```
window.location.hash = '#food'; 
```

这会将 URL 的哈希替换为您为其设置的值。

[参考](https://developer.mozilla.org/en/DOM/window.location)

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2017-04-01T13:13:55.820

您可能更喜欢[这个问题](https://stackoverflow.com/a/23924886/3137109)的答案。

不同之处在于`history.replaceState()`您不滚动到锚点，只需在导航栏中替换它。所有主要浏览器都支持它，[source](http://caniuse.com/#search=history.replaceState)。

```
history.replaceState(undefined, undefined, "#hash_value") 
```

# c# - 作业对象 - 限制写入剪贴板防止粘贴到主机进程并从主机进程复制

> ID：11588487
> 
> 赞同：0
> 
> 时间：2012-07-21T00:24:57.647
> 
> 标签：c#

好的，所以这是基于：[.net 中 CreateJobObject/SetInformationJobObject pinvoke 的工作示例？](https://stackoverflow.com/questions/6266820/working-example-of-createjobobject-setinformationjobobject-pinvoke-in-net)

我创建了一个作业对象并将其附加到 MS Word 的一个实例。作业对象具有 UI 限制 WriteClipboard。我的假设是，这应该可以防止人们从文档中复制。但是他们仍然可以粘贴进去。然而，只有这个限制，我不能同时做这两件事。

我知道作业对象已被应用，因为它在 AssignProcessToJobObject 完成后正确显示在流程资源管理器的选项卡中。

**如果我指定了 LIMIT Read &** Write 剪贴板 ui 限制，我会认为这是行为。

这是上面链接中的构造函数 - 我添加了 UIRestriction - Write Clipbard

```
 public Job(string jobName) 
    { 

        handle = CreateJobObject(IntPtr.Zero, jobName); 

        var info = new JOBOBJECT_BASIC_LIMIT_INFORMATION 
        { 
            LimitFlags = 0x2000 
        }; 

        var extendedInfo = new JOBOBJECT_EXTENDED_LIMIT_INFORMATION 
        { 
            BasicLimitInformation = info 
        };

        int length = Marshal.SizeOf(typeof(JOBOBJECT_EXTENDED_LIMIT_INFORMATION)); 
        IntPtr extendedInfoPtr = Marshal.AllocHGlobal(length); 
        Marshal.StructureToPtr(extendedInfo, extendedInfoPtr, false); 

        if (!SetInformationJobObject(handle, JobObjectInfoType.ExtendedLimitInformation, extendedInfoPtr, (uint)length)) 
            throw new Exception(string.Format("Unable to set information.  Error: {0}", Marshal.GetLastWin32Error()));

        ///UIRestrictions
        var uiRestrictions = new JOBOBJECT_BASIC_UI_RESTRICTIONS
        {
            UIRestrictionsClass = 0x00000004 //No write to clipboard
        };

        length = Marshal.SizeOf(typeof(JOBOBJECT_BASIC_UI_RESTRICTIONS)); 
        IntPtr basicUIInfoPtr = Marshal.AllocHGlobal(length); 
        Marshal.StructureToPtr(uiRestrictions, basicUIInfoPtr, false); 

        if (!SetInformationJobObject(handle, JobObjectInfoType.BasicUIRestrictions, basicUIInfoPtr, (uint)length)) 
            throw new Exception(string.Format("Unable to set information.  Error: {0}", Marshal.GetLastWin32Error())); 
    } 
```

然后在主程序中我执行以下操作：

```
 Job j = new Job("NewJob");

        j.AddProcess(ProcID); 
```

其中 ProcID 是我要添加作业的进程的 ID。在尝试添加之前，我会检查进程是否已经有工作。除此之外，我没有收到任何异常错误，正如我所说的 SysInternalstool，流程资源管理器将新工作附加到流程中。

有什么想法吗？

# php - php组合框默认选中

> ID：11588498
> 
> 赞同：1
> 
> 时间：2012-07-21T00:26:24.957
> 
> 标签：php, mysql, combobox, default

想象一下：

可以是 YES 或 NO -> 活动的字段：是 | 主动：没有

所以，我得到了一个为每个客户返回它的查询。

我想以表格形式显示结果，我应该能够对其进行编辑并再次保存在 BD 上。

我几乎可以做到，但我需要默认值已经保存在 BD 上，而我的 atm 似乎显示了最后一行或其他内容。

我希望显示当前状态或能够将其更改为（是或否）

组合框是这样的：

```
$sql = "SELECT * FROM client,sector WHERE client.idClient = '$id' AND sector.idSector=client.Sector_idSector ";
$result = mysql_query($sql);

while($row = mysql_fetch_array($result))
{

<select name="alterar_sector" id="sectorbox" >
    <?php 
    while($row = mysql_fetch_array($result))
    {
    echo '<option value="'.$row['idSector'].'">'.$row['idSector'].' - '.$row['Nomesec'].'</option>';
    }

    ?>
    </select>

} 
```

不要重视“部门”甚至查询等显示的信息的重要性。

恢复：

我希望该组合框可以将当前值显示为默认值，并列出要更改的其他可能值。

谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T00:28:23.767

我可能错过了问题的重点，但是您是在问如何使 from 字段显示为被选中？简单修改这一行：

```
echo '<option value="'.$row['idSector'].'">'.$row['idSector'].' - '.$row['Nomesec'].'</option>'; 
```

具有：

```
echo '<option selected="selected" value="'.$row['idSector'].'">'.$row['idSector'].' - '.$row['Nomesec'].'</option>'; 
```

如果这是您要选择的特定选项...

你可能有这样的事情：

```
while($row = mysql_fetch_array($result))
{
  if ($sectorActive != $row['idSector']) {
    echo '<option value="'.$row['idSector'].'">'.$row['idSector'].' - '.$row['Nomesec'].'</option>';
  }else{
    echo '<option selected="selected" value="'.$row['idSector'].'">'.$row['idSector'].' - '.$row['Nomesec'].'</option>';
  }
} 
```

* * *

好的，因此，如果您希望选择字段具有默认值，则需要将其作为元素`selected="selected"`中的参数值。`<option>`根据您的示例，如下所示：

```
<select name="gender">
  <option>Male</option>
  <option>Female</option>
  <option selected="selected">Other</option>
  <option>Not Specified</option>
</select> 
```

因此，如果您有一个查询拉记录，并且您想确保选择了正确的值。您需要有一个随每条记录而变化的变量 - 并且您需要在该 HTML 插入中安装一些逻辑，如下所示：（*此示例将输出与上述示例相同的 HTML...）*

```
<?
    $usersGender = 'Other'; // This value should be set via the loop, and from a database value.
?>
<select name="gender">
  <option <?=($usersGender=='Male')?'selected="selected"':''?>>Male</option>
  <option <?=($usersGender=='Female')?'selected="selected"':''?>>Female</option>
  <option <?=($usersGender=='Other')?'selected="selected"':''?>>Other</option>
  <option <?=($usersGender=='Not Specified')?'selected="selected"':''?>>Not Specified</option>
</select> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-05T15:03:44.420

最好的

```
while($row = mysql_fetch_array($result))
{
  if ($sectorActive != $row['idSector']) {
    echo '<option value="'.$row['idSector'].'">'.$row['idSector'].' - '.$row['Nomesec'].'</option>';
  }else{
    echo '<option selected="selected" value="'.$row['idSector'].'">'.$row['idSector'].' - '.$row['Nomesec'].'</option>';
  }
} 
```

# css - 移动设备上的 Twitter Bootstrap 导航空白

> ID：11588499
> 
> 赞同：2
> 
> 时间：2012-07-21T00:26:30.733
> 
> 标签：css, header, twitter-bootstrap

我对基于 Twitter Bootstrap 的导航标题的行为有点困惑。在基于桌面的版本中，一切似乎都很好，但是从 iPhone/iPad 浏览时，我在右侧看到一个奇怪的白点（这似乎也定义了 Tumblr 控件的位置。

我该如何调试呢？有人有任何指示吗？非常感谢。

![右上角白点](../Images/cdaca236d234f93adb9da278eaf54e2c.png)

实际代码在这里[http://thegodfounder.com/](http://thegodfounder.com/)

**编辑1：**

按照@baptme 的建议将视口更改为“width=device-width, initial-scale=1.0”实际上会将视口缩放到黑色结束的位置并隐藏右侧的所有内容。我没看到什么？

![改变视口](../Images/1a3ba3416cae5622b576e4babab287d9.png)

**编辑2：**

1) 将 float:left & min-width:100% 的建议添加到 body 会导致实际填充空白区域，但似乎仍有一些可疑之处：Tumblr 控件仍然存在于页面中间，并且在pageload 它加载到 Tumblr 控件的右侧，好像有一些断点左右，但我不知道有什么？2）当它不应该固定在顶部时，我是否没有正确使用 Bootstrap 导航栏的概念？

![奇怪地加载](../Images/79121731eadd4621af9b52681b215b20.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T10:58:21.463

代替

```
<meta name="viewport" content="width=device-width"> 
```

和

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

* * *

**编辑：**

我删除了响应行为，并`position:fixed`从 twitter 引导程序中删除`.navbar`了同样的问题

![没有响应，没有固定位置](../Images/013362900ee0c25393cc40752bf77484.png)

如果您不希望`.navbar`有一个`position:fixed`，您可以使用媒体查询来避免`.navbav`宽度比视口更宽。

* * *

**编辑2：**

来自`float: left`@MyHeadHurts的评论绝对是修复它的最佳方式。即使我不希望这两个属性一起做到这一点，它也可以。`min-width: 100%``body`

* * *

**编辑 3：**

`<meta name="viewport" content="width=device-width, initial-scale=1.0">`如果您希望页面根据视口缩放，请删除。

# php - onclick表单通过ajax发送没有页面刷新

> ID：11588507
> 
> 赞同：5
> 
> 时间：2012-07-21T00:27:38.403
> 
> 标签：php, jquery, ajax, forms

几天来，我一直在绞尽脑汁地查看示例并尝试不同的方法来尝试让我的表单在不刷新页面的情况下使用 Ajax 提交。而且它现在甚至没有发送数据..我不知道我做错了什么..有人可以通过我的ajax和表格运行吗？

Toid 是用户 id，newmsg 是用户提交的文本。这两个值被发送到 insert.php 页面。

我真的很感激帮助。我是 Ajax 的新手，我看了其中一些，但没有任何线索。如果我终于让它工作了，它可能会帮助我意识到我做错了什么。我正在查找教程并观看视频..但是对于这里的知情人士来说很简单的事情可能非常耗时。也许我对 ajax 有错误的想法，这根本没有意义，对此感到抱歉。

```
<script type="text/javascript">

$(document).ready(function(){

    $("form#myform").submit(function() {
homestatus()      
event.preventDefault();
var toid = $("#toid").attr("toid");
var content = $("#newmsg").attr("content");

    $.ajax({
        type: "POST",
        url: "insert.php",
        data: "toid="+content+"&newmsg="+ newmsg,
        success: function(){
           }
    });
    });
return false;
});
</script>

<form id="myform"  method="POST"  class="form_statusinput">
<input type="hidden"  name="toid" id="toid" value="<?php echo $user1_id ?>">
<input class="input" name="newmsg" id="newmsg" placeholder="Say something" autocomplete="off">
<div id="button_block">
<input type="submit" id="button" value="Feed" onsubmit="homestatus(); return false" >
</div>
</form> 
```

插入.PHP

```
$user1_id=$_SESSION['id'];
if(isset($_POST['toid'])){

if($_POST['toid']==""){$_POST['toid']=$_SESSION['id'];}

if(isset($_POST['newmsg'])&isset($_POST['toid'])){
if($_POST['toid']==$_SESSION['id']){
rawfeeds_user_core::create_streamitem("1",$_SESSION['id'],$_POST['newmsg'],"1",$_POST['toid']);
}else{
rawfeeds_user_core::create_streamitem("3",$_SESSION['id'],$_POST['newmsg'],"1",$_POST['toid']); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-21T00:43:45.757

尝试使用 firebug 来识别代码中的错误。它是开发 javascript 的一个非常好的伴侣。几乎所有的错误都会导致萤火虫控制台中的错误消息。

您的代码中有几个错误，这是更正后的版本：

```
$(document).ready(function(){
    $("form#myform").submit(function(event) {
        event.preventDefault();
        var toid = $("#toid").val();
        var newmsg = $("#newmsg").val();

        $.ajax({
            type: "POST",
            url: "insert.php",
            data: "toid=" + content + "&newmsg=" + newmsg,
            success: function(){alert('success');}
        });
    });
}); 
```

这里是更正的html：

```
<form id="myform"  method="POST"  class="form_statusinput">
<input type="hidden"  name="toid" id="toid" value="<?php echo $user1_id; ?>">
<input class="input" name="newmsg" id="newmsg" placeholder="Say something" autocomplete="off">
<div id="button_block">
<input type="submit" id="button" value="Feed">
</div>
</form> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T00:52:24.353

实际上`onsubmit event`必须与`form`so 一起使用而不是

```
<input type="submit" id="button" value="Feed" onsubmit="homestatus(); return false" > 
```

它可能是

```
<form id="myform"  method="POST"  class="form_statusinput" onsubmit="homestatus();"> 
```

并从函数/处理程序返回`true`or `false`，即

```
function homestatus()
{
    //...
    if(condition==true) return true;
    else return false;
} 
```

既然你正在使用`jQuery`它最好使用如下

```
$("form#myform").on('submit', function(event){
    event.preventDefault();
    var toid = $("#toid").val(); // get value
    var content = $("#newmsg").val(); // get value
    $.ajax({
        type: "POST",
        url: "insert.php",
        data: "toid=" + toid + "&newmsg=" + content,
        success: function(data){
            // do something with data
        }
    });

}); 
```

在这种情况下，您的表格应如下所示

```
<form id="myform"  method="POST"  class="form_statusinput">
    ...
</form> 
```

和`input`字段应该有一个有效的`type`和`value`属性，[**Html 表单和 Input**](http://www.w3.org/TR/html401/interact/forms.html)。

我认为你应该阅读更多关于`jQuery`.

**参考：** [**jQuery val**](http://api.jquery.com/val/)和[**jQuery Ajax**](http://api.jquery.com/jQuery.ajax/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T00:31:17.417

将表格更改为此

```
<form id="myform" ... onsubmit="homestatus(); return false"> 
```

您不需要`onsubmit`提交按钮上的属性，而是表单元素上的属性

homestatus 可能超出范围

```
function homestatus () {
    var toid = $("#toid").attr("toid");
    var content = $("#newmsg").attr("content");
    $.ajax({
        type: "POST",
        url: "insert.php",
        data: "toid="+content+"&newmsg="+ newmsg,
        success: function(){
           }
    });
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-21T00:34:43.233

这未经测试，但试试这个（我用注释注释了一些东西）

```
<script type="text/javascript">

$(document).ready(function(){    
    $("form#myform").submit(function(event) {
        // not sure what this does, so let's take it out of the equation for now, it may be causing errors
        //homestatus()      
        // needed to declare event as a param to the callback function
        event.preventDefault(); 
        // I think you want the value of these fields
        var toid = $("#toid").val(); 
        var content = $("#newmsg").val();

        $.ajax({
            type: "POST",
            url: "insert.php",
            data: "toid="+toid +"&newmsg="+ content,
            success: function(){
            }
        });
        return false;
    });

});

</script>

<form id="myform"  method="POST"  class="form_statusinput">
<input type="hidden"  name="toid" id="toid" value="<?php echo $user1_id ?>">
<input class="input" name="newmsg" id="newmsg" placeholder="Say something" autocomplete="off">
<div id="button_block">
<input type="submit" id="button" value="Feed" / >
</div>
</form> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-21T00:55:06.153

`.serialize()`让序列化表单数据的工作要容易得多。

提交处理程序也需要`event`作为形式参数，否则会抛出错误（事件将未定义）。

加上其他一些更改，这就是全部内容：

```
<script type="text/javascript">
$(document).ready(function(){
    $("form#myform").submit(function(event) {
        event.preventDefault();
        homestatus();
        var formData = $(this).serialize();
        $.ajax({
            type: "POST",
            url: "insert.php",
            data: formData,
            success: function(data) {
                //...
            }
        });
    });
});
</script>

<form id="myform" class="form_statusinput">
    <input type="hidden" name="toid" id="toid" value="<?php echo $user1_id ?>">
    <input class="input" name="newmsg" id="newmsg" placeholder="Say something" autocomplete="off">
    <div id="button_block">
        <input type="submit" id="button" value="Feed" >
    </div>
</form> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-21T00:35:50.690

除非您省略一些代码，否则问题出在这一行：

```
homestatus() 
```

您从未定义过此函数，因此提交会引发错误。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2012-07-21T00:37:56.913

您可能想看看 jQuery ( [www.jquery.com](http://www.jquery.com) ) 或其他 js 框架。这样的框架可以完成您通常必须手动完成的大部分工作。还有一堆不错的辅助函数用于发送表单数据或修改 html 元素

# selenium-rc - Selenium IDE：如何传递变量

> ID：11588508
> 
> 赞同：12
> 
> 时间：2012-07-21T00:27:50.350
> 
> 标签：selenium-rc, selenium-webdriver, selenium-ide

我在一个网站上有 3 个不同的帐户，我想每天登录并打印一份报告。

我已经完成了 Selenium IDE 记录，允许我登录并打印报告，但是，每天我必须更改变量 3 次（对于 3 个不同的用户名和密码）。

如何将变量传递给“type”命令的“value”字段？

谢谢你。

最好的，

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-21T05:06:33.937

您可以进行参数化

对于参数化，您需要创建 js 文件

例如。js文件包含

```
var username = ["parameterization1@mailinator.com", "parameterization2@mailinator.com");
var password = ["parameterization1", "parameterization2"]; 
```

您可以将此 JS 文件上传到选项 > 选项... > 常规选项卡 > Selenium IDE 扩展。

参数化示例脚本

![在此处输入图像描述](../Images/fe763bca9f657db6dfcc751dcfdd1438.png)

* * *

## 回答 #2

> 赞同：-6
> 
> 时间：2013-10-18T12:38:08.883

尝试以这种方式使用 Selenium IDE - [http://greenlanternautomationframework.blogspot.com/p/selenium-ide.html](http://greenlanternautomationframework.blogspot.com/p/selenium-ide.html)

# sql - 计算不匹配和缺失

> ID：11588510
> 
> 赞同：1
> 
> 时间：2012-07-21T00:28:27.127
> 
> 标签：sql, join, group-by, hive

下面是TestingTable1中的数据

```
BUYER_ID   |   ITEM_ID         |    CREATED_TIME
-----------+-------------------+------------------------
1345653        110909316904         2012-07-09 21:29:06
1345653        151851771618         2012-07-09 19:57:33
1345653        221065796761         2012-07-09 19:31:48
1345653        400307563710         2012-07-09 18:57:33
1345653        310411560125         2012-07-09 16:09:49
1345653        120945302103         2012-07-09 13:40:23
1345653        261060982989         2012-07-09 09:02:21 
```

下面是TestingTable2中的数据

```
USER_ID   |   PRODUCT_ID           |    LAST_TIME
-----------+-------------------+-------------------
1345653       110909316904         2012-07-09 21:30:06
1345653       152851771618         2012-07-09 19:57:33
1345653       221065796761         2012-07-09 19:31:48
1345653       400307563710         2012-07-09 18:57:33 
```

我需要`TestingTable2`比较`TestingTable1`on`BUYER_ID`和`USER_ID`。我需要`TestingTable2`在比较 from 之后找到所有（基本上是计数）丢失和不匹配的条目`TestingTable1`。我为此创建了 SQL 小提琴 -

[http://sqlfiddle.com/#!3/d87b2/1](http://sqlfiddle.com/#!3/d87b2/1)

如果你在 SQL Fiddle 中运行我的查询，你会得到输出——

```
BUYER_ID    ERROR
1345653       5 
```

这是正确的，因为从on和比较后的最后`three`一行`TestingTable1`缺失`TestingTable2`，其余行`two`不匹配。`TestingTable1``BUYER_ID``USER_ID`

现在复杂的事情开始了。

**问题陈述-**

在我当前的输出中，我得到 ERROR count as `5`。因此，如果您在两个表中看到第一行`ITEM_ID`并且`PRODUCT_ID`相同但不相同，`CREATED_TIME`并且`LAST_TIME`这两次之间的差异仅为`1 minute`. 所以目前我将其报告为不匹配，但我需要的是，如果它们之间的差异在 范围内`15 minutes range`，那么我不想报告为错误。因此，在我当前的查询中实现此功能后，我将错误计数为 4，因为第一行的差异在 15 分钟范围内。

那么如何在我当前的查询中实现这个功能呢？那是我的问题。

PS-我正在使用 Hive 并且 Hive 支持类似 sql 的语法。所以我认为任何修改都将在我当前的查询中起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T00:53:02.733

您的 SQL Server SQL Fiddle 查询可以进行如下修改并使其正常工作。但是，我不确定 Hive 是否支持 datediff

```
SELECT TT.BUYER_ID , COUNT(*) FROM
(SELECT testingtable1.buyer_id, testingtable1.item_id, testingtable1.created_time FROM
 testingtable2 RIGHT JOIN testingtable1 
 ON (testingtable1.item_id = testingtable2.product_id 
 AND testingtable1.BUYER_ID = testingtable2.USER_ID 
 AND abs(datediff(mi, testingtable1.created_time,testingtable2.last_time)) <= 15)
 where testingtable2.product_id IS NULL) TT GROUP BY TT.BUYER_ID; 
```

# c - 彼得森锁算法的测试实现？

> ID：11588514
> 
> 赞同：7
> 
> 时间：2012-07-21T00:29:16.543
> 
> 标签：c, concurrency, locking, c99

有谁知道 C 语言中[Peterson 的 Lock 算法](http://en.wikipedia.org/wiki/Peterson's_algorithm)的良好/正确实现？我似乎找不到这个。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T19:14:26.533

Peterson 的算法无法在 C99 中正确实现，正如 whoordered [memory fences on an x​​86](http://bartoszmilewski.com/2008/11/05/who-ordered-memory-fences-on-an-x86/)中所解释的那样。

彼得森算法如下：

```
LOCK:

interested[id] = 1                interested[other] = 1
turn = other                      turn = id

while turn == other               while turn == id
  and interested[other] == 1        and interested[id] == 1

UNLOCK:

interested[id] = 0                interested[other] = 0 
```

这里有一些隐藏的假设。首先，每个线程必须在放弃轮到之前注意它对获取锁的兴趣。放弃轮次必须使我们有兴趣获取锁的其他线程可见。

此外，与每个锁一样，临界区中的内存访问不能超过 lock() 调用，也不能超过 unlock()。即：lock()至少要有acquire语义，unlock()至少要有release语义。

在 C11 中，实现这一点的最简单方法是使用顺序一致的内存顺序，这使得代码运行起来就好像它是按程序顺序运行的线程的简单交错一样（**警告：完全未经测试**的代码，但它类似于示例在 Dmitriy V'jukov 的[Relacy Race Detector](http://www.1024cores.net/home/relacy-race-detector)中）：

```
lock(int id)
{
    atomic_store(&interested[id], 1);
    atomic_store(&turn, 1 - id);

    while (atomic_load(&turn) == 1 - id
           && atomic_load(&interested[1 - id]) == 1);
}

unlock(int id)
{
    atomic_store(&interested[id], 0);
} 
```

这确保编译器不会进行破坏算法的优化（通过在原子操作中提升/下沉加载/存储），并发出适当的 CPU 指令以确保 CPU 也不会破坏算法。未明确选择内存模型的 C11/C++11 原子操作的默认内存模型是顺序一致的内存模型。

C11/C++11 还支持较弱的内存模型，允许尽可能多的优化。以下是[Anthony Williams](https://stackoverflow.com/users/5597/anthony-williams)将 Dmitriy V'jukov 在他自己的 Relacy Race Detector [[petersons_lock_with_C++0x_atomics]](http://www.justsoftwaresolutions.co.uk/threading/petersons_lock_with_C++0x_atomics.html) [[the-inscrutable-c-memory -模型]](http://bartoszmilewski.com/2008/12/23/the-inscrutable-c-memory-model/)。如果这个算法不正确，那是我的错（**警告：也是未经测试的代码**，但基于 Dmitriy V'jukov 和 Anthony Williams 的优秀代码）：

```
lock(int id)
{
    atomic_store_explicit(&interested[id], 1, memory_order_relaxed);
    atomic_exchange_explicit(&turn, 1 - id, memory_order_acq_rel);

    while (atomic_load_explicit(&interested[1 - id], memory_order_acquire) == 1
           && atomic_load_explicit(&turn, memory_order_relaxed) == 1 - id);
}

unlock(int id)
{
    atomic_store_explicit(&interested[id], 0, memory_order_release);
} 
```

注意带有获取和释放语义的交换。交换是原子 RMW 操作。原子 RMW 操作始终读取在 RMW 操作中写入之前存储的最后一个值。此外，从同一原子对象的释放中读取写入的原子对象上的获取（或从执行释放的线程中对该对象的任何后续写入，或从任何原子 RMW 操作的任何后续写入）会创建一个 synchronizes-with释放和获取之间的关系。

所以，这个操作是线程之间的一个同步点，一个线程中的交换和任何线程执行的最后一个交换（或轮流的初始化，对于第一个交换）之间总是存在同步关系。

所以我们在 store to`interested[id]` 和 exchange from/to之间有一个先序关系`turn`，在两个连续交换 from/to 之间有一个 synchronizes-with 关系，`turn`在交换 from/to`turn`和 load之间有一个先序关系`interested[1 - id]`。这相当于`interested[x]`不同线程中的访问之间的先发生关系，并`turn`提供线程之间的同步。这会强制执行使算法工作所需的所有排序。

那么在 C11 之前这些事情是怎么做的呢？它涉及使用编译器和特定于 CPU 的魔法。举个例子，让我们看看强排序的 x86。IIRC，所有 x86 负载都具有获取语义，并且所有存储都具有释放语义（在 SSE 中保存非临时移动，精确用于以偶尔需要发出 CPU 栅栏以实现 CPU 之间的一致性为代价来获得更高的性能）。但这对于 Peterson 的算法来说是不够的，正如 Bartosz Milewsky 在 [who-ordered-memory-fences-on-an-x86](http://bartoszmilewski.com/2008/11/05/who-ordered-memory-fences-on-an-x86/)中解释的那样，为了让 Peterson 的算法起作用，我们需要在访问`turn`和之间建立一个排序`interested`，如果不这样做可能会导致在看到`interested[1 - id]`之前写入的负载时`interested[id]`，这是一件坏事。

因此，在 GCC/x86 中执行此操作的一种方法是（**警告：**虽然我测试了类似于以下内容的内容，但实际上是[错误实现的彼得森算法](https://stackoverflow.com/questions/9443392/wrong-implementation-of-petersons-algorithm)的代码的修改版本，但**测试远不能保证多线程的正确性代码**）：

```
lock(int id)
{
    interested[id] = 1;
    turn = 1 - id;
    __asm__ __volatile__("mfence");

    do {
        __asm__ __volatile__("":::"memory");
    } while (turn == 1 - id
           && interested[1 - id] == 1);
}

unlock(int id)
{
   interested[id] = 0;
} 
```

这`MFENCE`可以防止存储和加载到不同的内存地址被重新排序。否则，在继续加载时，写入`interested[id]`可能会在存储缓冲区中排队`interested[1 - id]`。在许多当前的微架构上，a`SFENCE`可能就足够了，因为它可以实现为存储缓冲区消耗，但 IIUC`SFENCE`不需要以这种方式实现，并且可以简单地防止存储之间的重新排序。所以`SFENCE`可能到处都不够，我们需要一个完整的`MFENCE`.

编译器屏障 ( `__asm__ __volatile__("":::"memory")`) 阻止编译器确定它已经知道 的值`turn`。我们告诉编译器我们已经破坏了内存，所以缓存在寄存器中的所有值都必须从内存中重新加载。

PS：我觉得这需要一个结束段落，但我的大脑已经筋疲力尽了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-21T03:02:32.723

我不会对实现的好坏做出任何断言，但它已经过测试（简要地）。这是维基百科上描述的算法的直接翻译。

```
struct petersonslock_t {
    volatile unsigned flag[2];
    volatile unsigned turn;
};
typedef struct petersonslock_t petersonslock_t;

petersonslock_t petersonslock () {
    petersonslock_t l = { { 0U, 0U }, ~0U };
    return l;
}

void petersonslock_lock (petersonslock_t *l, int p) {
    assert(p == 0 || p == 1);
    l->flag[p] = 1;
    l->turn = !p;
    while (l->flag[!p] && (l->turn == !p)) {}
};

void petersonslock_unlock (petersonslock_t *l, int p) {
    assert(p == 0 || p == 1);
    l->flag[p] = 0;
}; 
```

Greg 指出，在内存一致性稍微宽松的 SMP 架构（例如 x86）上，虽然加载到相同内存位置是有序的，但加载到一个处理器上不同位置的加载对于另一个处理器来说可能会出现乱序。

Jens Gustedt 和 ninjalj 建议修改原始算法以使用该`atomic_flag`类型。这意味着设置标志和转弯将使用C11`atomic_flag_test_and_set`并清除它们将使用`atomic_flag_clear`。或者，可以在对 的更新之间施加内存屏障`flag`。

**编辑：**我最初试图通过写入所有状态的相同内存位置来纠正这一点。ninjalj 指出，按位操作将状态操作变成了 RMW，而不是原始算法的加载和存储。因此，需要原子按位操作。C11 提供了这样的操作符，GCC 也提供了内置的操作符。下面的算法使用 GCC 内建函数，但封装在宏中，以便可以轻松地将其更改为其他一些实现。但是，修改上面的原始算法是首选的解决方案。

```
struct petersonslock_t {
    volatile unsigned state;
};
typedef struct petersonslock_t petersonslock_t;

#define ATOMIC_OR(x,v)   __sync_or_and_fetch(&x, v)
#define ATOMIC_AND(x,v)  __sync_and_and_fetch(&x, v)

petersonslock_t petersonslock () {
    petersonslock_t l = { 0x000000U };
    return l;
}

void petersonslock_lock (petersonslock_t *l, int p) {
    assert(p == 0 || p == 1);
    unsigned mask = (p == 0) ? 0xFF0000 : 0x00FF00;
    ATOMIC_OR(l->state, (p == 0) ? 0x000100 : 0x010000);
    (p == 0) ? ATOMIC_OR(l->state, 0x000001) : ATOMIC_AND(l->state, 0xFFFF00);
    while ((l->state & mask) && (l->state & 0x0000FF) == !p) {}
};

void petersonslock_unlock (petersonslock_t *l, int p) {
    assert(p == 0 || p == 1);
    ATOMIC_AND(l->state, (p == 0) ? 0xFF00FF : 0x00FFFF);
}; 
```

# java - android 2.2 上的 Admob 6 无法正常工作

> ID：11588515
> 
> 赞同：0
> 
> 时间：2012-07-21T00:29:21.910
> 
> 标签：java, android, admob

当我尝试让 admob 6 在 android 2.2 上运行时，我看到一个红色和黑色的框，上面写着“你必须在 AndroidManifest.xml 中使用 configChanges 声明 AdActivity”

我怎样才能解决这个问题？

我将在下面粘贴我的所有代码，以免造成混淆。在我无法让它在我的应用程序中工作之后，我创建了一个单独的项目来解决这个问题。

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.valgriz.AdMobTest"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="13" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name="com.google.ads.AdActivity"
            android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode" >
        </activity>
        <activity
            android:name=".Main"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <com.google.ads.AdView
        android:id="@+id/adView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        ads:adSize="BANNER"
        ads:adUnitId="MYADCODE"
        ads:loadAdOnCreate="true" />

</LinearLayout> 
```

Java（不重要）：

```
package com.valgriz.AdMobTest;

import android.app.Activity;
import android.os.Bundle;

public class Main extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T00:45:36.463

我有一个使用 AdMob 6 的项目，我有以下内容

```
 <uses-sdk android:minSdkVersion="7" android:targetSdkVersion="14"/> 
```

我也没有看到权限。

```
 <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

同样在您的 project.properties 文件中尝试将目标更改为 14

```
 target=android-14 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T00:48:14.133

您添加的配置更改：

```
<activity android:name="com.google.ads.AdActivity" android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/> 
```

此代码需要 SDK 版本 13 或更高版本。所以尝试将应用的目标 sdk 版本设置为 13 或更高。

# ruby-on-rails - Rails set_primary_key 在中间模型回调中破坏关联

> ID：11588520
> 
> 赞同：0
> 
> 时间：2012-07-21T00:30:03.063
> 
> 标签：ruby-on-rails, ruby, callback

我难住了。我不断收到`Called id for nil`错误假设我有以下模型：

```
class User < ActiveRecord::Base
  self.primary_key = 'name'
  attr_accessible :name

  has_many :projects, :through => :user_projects
  has_many :user_projects    
end

class UserProject < ActiveRecord::Base
  belongs_to :user
  belongs_to :project

  after_save do |r|
    puts r.user.id #<<<<<error here!
  end
end

class Project < ActiveRecord::Base
  attr_accessible :name#, :body

  has_many :user_projects
  has_many :users, :through=> :user_projects
  # attr_accessible :title, :body
end 
```

以及以下迁移：

```
class CreateUsers < ActiveRecord::Migration
  def change
    create_table :users do |t|
      t.string :name
      t.timestamps
    end
  end
end

class CreateProjects < ActiveRecord::Migration
  def change
    create_table :projects do |t|
      t.string :name
      t.timestamps
    end
  end
end

class CreateUserProjects < ActiveRecord::Migration
  def change
    create_table :user_projects do |t|
      t.references :user
      t.references :project
      t.timestamps
    end
  end
end 
```

运行类似：

```
@project = Factory.create(:project)
@user = Factory.create(:user)
@user.projects << @project 
```

我会得到这个：

```
RuntimeError: Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id 
```

为什么 after_save 回调中断，我该怎么做才能修复它？似乎我根本无法从回调中引用关联的用户对象。但是，如果我删除

```
self.primary_key = 'name' 
```

从用户模型，一切正常。我错过了一些东西，但我不知道是什么。

提前致谢！顺便说一句，我在 Rails 3.2.6 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T01:57:03.370

尝试在迁移中将 id 设置为 false ，如下所示：

```
class CreateUsers < ActiveRecord::Migration
  def change
    create_table :users, :id => false do |t|
      t.string :name
      t.timestamps
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T03:22:38.567

感谢豆鬼的启发！我想到了。`t.references :project`助手默认 foreign_key 为整数。我手动将其更改为正确的类型。所以现在它起作用了！

耶

```
class CreateUserProjects < ActiveRecord::Migration
  def change
    create_table :user_projects do |t|
      t.string :user_id #<<<<<<< STRING!!
      t.references :project
      t.timestamps
    end
  end
end 
```

# php - 自动分配drupal标签

> ID：11588523
> 
> 赞同：0
> 
> 时间：2012-07-21T00:30:12.693
> 
> 标签：php, drupal

这似乎很直观，但我似乎无法理解。

创建新文章时，如何根据作者角色自动分配标签？我尝试了各种模块，但没有一个以我需要的方式工作。

最好的方法是进入模块文件，检查作者的当前角色，然后设置标签的值？我对drupal不太熟悉，所以我不完全确定在哪里/如何做到这一点，以及这是否是最好的方法。

感谢您的任何意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T04:22:30.453

有多种选择。我最熟悉的有：

1.  [Open Calais](http://drupal.org/project/opencalais/)：由 Thomson Reuters 开发，该模块/服务可以为内容实体分配多个可配置标签，范围从主题领域和主题到人名和地点。非常全面。

2.  [规则标记](http://drupal.org/project/rules_autotag)：一种更轻量级的方法，但不如 Calais 强大。

3.  [文本挖掘 API](http://drupal.org/project/textmining_api)：这个依赖于 Ouch 项目进行自动标记。

Drupal.org 上有一篇非常[好的文章，](http://groups.drupal.org/node/38290/)对这些模块进行了比较。也许这应该是你的起点。

# sql - Ruby on Rails - 具有联接和顺序的范围

> ID：11588528
> 
> 赞同：3
> 
> 时间：2012-07-21T00:30:59.837
> 
> 标签：sql, ruby-on-rails-3, postgresql, scope

我有 2 节课：

```
class Solution
  has_many :solution_votes

class SolutionVote
  belongs_to :solution 
```

我的观点是这样的：

```
 Proposed Solution A - 2 votes up - 5 votes down
    Proposed Solution B - 1 vote up  - 0 votes down
    Proposed Solution C - 0 votes up - 0 votes down
    Proposed Solution D - 7 votes up - 2 votes down
    Proposed Solution E - 3 votes up - 1 vote down 
```

我想要的是按最多 UP 投票对其进行排序，使其看起来像这样：

```
 Proposed Solution D - 7 votes up - 2 votes down
    Proposed Solution E - 3 votes up - 1 vote down
    Proposed Solution A - 2 votes up - 5 votes down
    Proposed Solution B - 1 vote up  - 0 votes down
    Proposed Solution C - 0 votes up - 0 votes down 
```

到目前为止我有这个：

```
 scope :most_votes_up,
  select("solutions.*, count(solution_votes.id) AS votes_count").
      where(['solutions.state = ?', 'Proposed']).
      joins(:solution_votes).
      group("solutions.id").
      order("votes_count DESC") 
```

产生这个输出：

```
 Proposed Solution D - 7 votes up - 2 votes down
    Proposed Solution A - 2 votes up - 5 votes down
    Proposed Solution E - 3 votes up - 1 vote down
    Proposed Solution B - 1 vote up  - 0 votes down 
```

但是......我仍然遇到的问题是：
1.没有投票的建议解决方案丢失（上面示例中的建议解决方案C从显示的列表中丢失）
2.我如何指定仅对UP的计数投票（现在，它的排序基于哪个提议的解决方案获得了最多的投票（上下），而不仅仅是上升）？

我正在使用 PostGRESQL

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T05:07:18.983

1.  使用左连接（而不是默认的内连接）来包含具有 0 个关联的 solution_votes 的解决方案。

2.  您可以简单地在计数中仅包含赞成票。

以下是我修改范围的方法：

```
select("solutions.*, count(solution_votes.id) AS votes_count").
  joins("left join solution_votes on solution_votes.solution_id = solutions.id").
  where(['solutions.state = ? and solution_votes.direction = ?', 'Proposed', 'up']).
  group("solutions.id").
  order("votes_count DESC") 
```

这对您的列名做了一些假设，但是您应该能够根据您的实际模式对其进行调整，而不会有太多麻烦。我`joins`之前也说过`where`——这在技术上不会产生影响，但这是 SQL 需要的顺序，而且对我来说更合乎逻辑。

编辑：听起来好像您想将 votes_count 保留为所有选票的计数，但仍按赞成票数排序。我不确定为什么会这样，除非您调用`.votes_count`返回的解决方案对象，但这是可能的。为了做到这一点，您从`count`聚合切换到`sum`，然后执行一些操作，将匹配条件的记录视为 1，将不匹配的记录视为 0。两种方式呈现自己，一个`case`表达式，like `sum(case when solution_votes.direction = 'up' then 1 else 0 end)`，或者做一些将布尔值转换为整数的创造性转换，例如`sum(cast(solution_votes.direction = 'up' as integer))`. 这两种方法都可以 - 总和将是赞成票的总数，然后您可以在 order 子句中使用它。选择第一个，没有特别的原因，我们最终得到以下修改后的范围：

```
select("solutions.*, count(solution_votes.id) AS votes_count, sum(case when solution_votes.direction = 'up' then 1 else 0 end) as up_votes").
  joins("left join solution_votes on solution_votes.solution_id = solutions.id").
  where(['solutions.state = ? and solution_votes.direction = ?', 'Proposed', 'up']).
  group("solutions.id").
  order("up_votes DESC") 
```

# asp.net-mvc-3 - ASP.NET MVC 3.0 自动添加 rows 和 cols 属性

> ID：11588531
> 
> 赞同：1
> 
> 时间：2012-07-21T00:32:16.637
> 
> 标签：asp.net-mvc-3, textarea

我们有一些调用`Html.TextArea(string name, IDictionary<string, object> htmlAttributes)`扩展方法的代码。此方法是`rows="2" cols="20"`自动添加的。我在 Reflector 中看到这些是内部值（`implicitRowsAndColumns`字典的一部分）。

有没有办法强制 ASP.NET MVC 不输出这些属性？我不明白为什么他们的代码首先会这样做，因为 CSS 是确定`textarea`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T00:44:21.543

尝试`new { rows = "", cols = "" }`加入您的`TextAreaFor`电话。

这可能是因为验证器需要 rows 和 cols 属性。但仅仅因为它们是必需的，并不意味着它们需要具有价值。

[stackoverflow.com/questions/2649283/avoid-textarea-rows-cols-error](https://stackoverflow.com/questions/2649283/avoid-textarea-rows-cols-error)

# objective-c - 用于 BOOL 的 NSFormatter

> ID：11588536
> 
> 赞同：1
> 
> 时间：2012-07-21T00:33:04.757
> 
> 标签：objective-c, xcode, cocoa

我已经使用绑定到数组控制器的表设置了我的简单 Xcode 项目。如果数组控制器充满了具有字符串属性的实体，它就可以正常工作。但是，我想将属性更改为 BOOL，并让表格根据 BOOL 显示字符串“true”或“false”。

我已经从 NSFormatter 覆盖了以下两种方法：

```
-(NSString*) stringForObjectValue:(id)object {
  //what is the object?
  NSLog(@"object is: %@", object);
  if(![object isKindOfClass: [ NSString class ] ] ) {
    return nil;
  }

  //i'm tired....just output hello in the table!!
  NSString *returnStr = [[NSString alloc] initWithFormat:@"hello"];
  return returnStr;
}

-(BOOL)getObjectValue: (id*)object forString:string errorDescription:(NSString**)error {
  if( object ) {
    return YES;
  }
  return NO;
} 
```

因此，如果属性是字符串，则表格将填充“hello”，但是如果我将其切换为布尔值，则表格将填充大量空格。

我不知道这是否有帮助，但在我输出对象的那一行，如果属性是字符串，它会输出 __NSCFString，如果我将属性切换为布尔值，它会输出“Text Cell”。这是我不明白的另一件事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T00:42:05.030

好的，不是 100% 清楚您要从代码中做什么，但首先要做的事情是 - BOOL 不是对象，它基本上是 0 或 1，因此将 BOOL 值放入数组中，您可能最好使用`NSNumber`：

```
NSNumber *boolValue = [NSNumber numberWithBool:YES]; 
```

并将它们放入您的阵列中。现在你想改变你的方法：

```
-(NSString*) stringForObjectValue:(id)object {
   NSNumber *number = (NSNumber *)object;
   if ([number boolValue] == YES) 
       return @"true";
   else
       return @"false";
} 
```

这里有一些事情 - 例如，如果可以的话，您希望避免传递`id`引用（如果您知道`NSArray`are中的所有对象，则`NSNumber`不需要这样做）。

# mysql - wordpress mysql - 删除所有自定义帖子类型

> ID：11588539
> 
> 赞同：3
> 
> 时间：2012-07-21T00:33:45.823
> 
> 标签：mysql, sql, database, wordpress

我已经使用“自定义帖子类型”设置了一个 wordpress/mysql，它目前在数据库的 wp_posts 表中保存了大约 40,000 行数据。我正在尝试处理一个 SQL 查询，该查询将一次性删除某个自定义帖子类型的所有行，但它一直告诉我我遇到了语法错误。我正在使用的代码如下，如果它很简单，但 SQL 对我来说是陌生的，我很抱歉，我正在努力在论坛中找到任何东西。

```
DELETE FROM `wp_posts`
WHERE  `post_type` =  'prefix-numberplates'
LIMIT 0 , 3000 
```

wp_posts 和 post_type 周围有`，但它不会让我在这里设置它们的样式。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2017-04-05T09:08:08.120

```
global $wpdb;

// delete all posts by post type.
$sql = 'DELETE `posts`, `pm`
    FROM `' . $wpdb->prefix . 'posts` AS `posts` 
    LEFT JOIN `' . $wpdb->prefix . 'postmeta` AS `pm` ON `pm`.`post_id` = `posts`.`ID`
    WHERE `posts`.`post_type` = \'prefix-numberplates\'';
$result = $wpdb->query($sql); 
```

这将从帖子和 postmeta 表中删除。它在数据库中没有留下任何垃圾。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-23T06:21:28.850

解决了 -

```
DELETE FROM `wp_posts`
WHERE  `post_type` =  'prefix-numberplates' 
```

工作 - 把底部拿出来，很好。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-12-14T22:13:36.893

以下内容从 posts、postmeta 和 term_relationships 表中删除：

```
DELETE p,tr,pm
    FROM wp_posts p
    LEFT JOIN wp_term_relationships tr
        ON (p.ID = tr.object_id)
    LEFT JOIN wp_postmeta pm
        ON (p.ID = pm.post_id)
    WHERE p.post_type = 'post_type_name'; 
```

只需将 'post_type_name' 更改为您要删除的 cpt。还要在适当的地方更改表名前缀。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-24T16:23:32.087

这种方式可以确保你得到正确的表 - $wpdb 最清楚:)

```
// delete CPT posts ##
global $wpdb;

$posts_table = $wpdb->posts;

$query = "
  DELETE FROM {$posts_table}
  WHERE post_type = 'post_type_name' 
";

$wpdb->query($query); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-06T20:39:41.680

```
delete p,m from wp_posts p left join wp_postmeta m on p.ID = m.post_id where p.post_type = "my_custom_post_type" 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-21T16:08:39.150

尝试使用 $wpdb 类。

```
$query = "
DELETE FROM wp_posts 
WHERE post_type = 'prefix-numberplates' 
LIMIT 0, 3000
";

$wpdb->query($query); 
```

# php - 图 api stream_post 不返回 false

> ID：11588540
> 
> 赞同：0
> 
> 时间：2012-07-21T00:33:50.837
> 
> 标签：php, facebook, facebook-graph-api

```
foreach($ret_obj as $person)
{        
    $a = $person['uid'];
    echo $a.'<br />';
    $page_feed = $facebook->api(
        '/'.$a.'/feed',
        'POST',
        array(
            'message' => 'Message',
            'name' => 'Name',
            'description' => 'description',
            'link' => ''.FB_BASE_URL.'',
            'picture' => 'http://link.edu/pic.jpg',
            'access_token' => ''.$fbme[access_token].'' 
        )
    );

    //if $page_feed is defined it prints yes if not defined prints no
    if($page_feed){echo 'yes<br />';}
    elseif(!$page_feed[id]){echo 'no<br />';} 
} 
```

有些人甚至不向他们的朋友开放他们的墙。然后我想检查`$page_feed`是真还是假。我正在尝试在最后两行中执行此操作。我试过了`isset()`。无论我做什么，我都无法打印`no`。

当它发布时，`$page_feed`变量返回如下内容：`533444332_475819545445666` 我尝试了下面的代码，但它又给了我一个空白页。

```
if($page_feed){echo strstr($page_feed[id],'_').'<br />';}
elseif(strstr($page_feed[id],'_')){echo 'no<br />';} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T09:14:21.210

# php - 使用 php 获取字符串中的所有 url

> ID：11588542
> 
> 赞同：4
> 
> 时间：2012-07-21T00:34:03.513
> 
> 标签：php, regex, url

我试图找出一种从文本字符串中获取 URL 数组的方法。文本将有点像这样的格式：

> 一些随机文字在这里
> 
> [http://techcrunch.com/2012/07/20/kickstarter-flashr-wants-to-make-the-iphones-bezel-a-massive-notification-light/?grcc=88888Z0ZwdgtZ0Z0Z0Z0Z0&grcc2=835637c33f965e6cdd34c87219233711~1342828462249~fca4fa8af1286d8a77f26033fdeed202~510f37324b14c50a5e9121f955fac3fa ~1342747216490~0~0~0~0~0~0~0~0~7~3~](http://techcrunch.com/2012/07/20/kickstarter-flashr-wants-to-make-the-iphones-bezel-a-massive-notification-light/?grcc=88888Z0ZwdgtZ0Z0Z0Z0Z0&grcc2=835637c33f965e6cdd34c87219233711~1342828462249~fca4fa8af1286d8a77f26033fdeed202~510f37324b14c50a5e9121f955fac3fa~1342747216490~0~0~0~0~0~0~0~0~7~3~)
> 
> [http://techcrunch.com/2012/07/20/last-day-to-purchase-extra-early-bird-tickets-for-disrupt-sf/](http://techcrunch.com/2012/07/20/last-day-to-purchase-extra-early-bird-tickets-for-disrupt-sf/)

显然，这些链接可以是任何东西（并且可以有很多链接，这些只是我现在正在测试的链接。如果我使用像我的正则表达式这样的简单 URL 就可以了。

我在用：

```
preg_match_all('((https?|ftp|gopher|telnet|file|notes|ms-help):'.
    '((//)|(\\\\))+[\w\d:#@%/;$()~_?\+-=\\\.&]*)',
    $bodyMessage, $matches, PREG_PATTERN_ORDER); 
```

当我这样做时`print_r( $matches);`，我得到的结果是：

```
Array ( [0] => Array (
    [0] => http://techcrunch.com/2012/07/20/kickstarter-flashr-wants-to-make-the-iphon=
    [1] => http://techcrunch.com/2012/07/20/last-day-to-purchase-extra-early-bird-tick= 
    [2] => http://techcrunch.co=
    [3] => http://techcrunch.com/2012/07/20/kickstarter-flashr-wants-to-make-the-ip= 
    [4] => http://techcrunch.com/2012/07/20/last-day-to-purc=
    [5] => http://tec=
)
... 
```

该数组中的这些项目都不是来自上述链接的完整链接。

有人知道获得我需要的东西的好方法吗？我发现了一堆正则表达式的东西来获取 PHP 的链接，但没有一个有效。

谢谢！

编辑：

好的，所以我从电子邮件中提取这些链接。该脚本解析电子邮件，获取邮件正文，然后尝试从中获取链接。调查电子邮件后，似乎出于某种原因在 url 中间添加了一个空格。这是我的 PHP 脚本看到的正文消息的输出。

```
 --00248c711bb99ca36d04c54ba5c6 Content-Type: text/plain; charset=ISO-8859-1 Content-Transfer-Encoding: quoted-printable http://techcrunch.com/2012/07/20/kickstarter-flashr-wants-to-make-the-iphon= es-bezel-a-massive-notification-light/?grcc=3D88888Z0ZwdgtZ0Z0Z0Z0Z0&grcc2= =3D835637c33f965e6cdd34c87219233711~1342828462249~fca4fa8af1286d8a77f26033f= deed202~510f37324b14c50a5e9121f955fac3fa~1342747216490~0~0~0~0~0~0~0~0~7~3~ http://techcrunch.com/2012/07/20/last-day-to-purchase-extra-early-bird-tick= ets-for-disrupt-sf/ --00248c711bb99ca36d04c54ba5c6 Content-Type: text/html; charset=ISO-8859-1 Content-Transfer-Encoding: quoted-printable 
```

有关如何使其不破坏 URLS 的任何建议？

编辑 2

根据劳内特的建议，我运行了这段代码：

```
 $bodyMessage = str_replace("= ", "",$bodyMessage); 
```

但是，当我回显时，它似乎不想替换“=”

```
 --00248c711bb99ca36d04c54ba5c6 Content-Type: text/plain; charset=ISO-8859-1 Content-Transfer-Encoding: quoted-printable http://techcrunch.com/2012/07/20/kickstarter-flashr-wants-to-make-the-iphon= es-bezel-a-massive-notification-light/?grcc=3D88888Z0ZwdgtZ0Z0Z0Z0Z0&grcc2= =3D835637c33f965e6cdd34c87219233711~1342828462249~fca4fa8af1286d8a77f26033f= deed202~510f37324b14c50a5e9121f955fac3fa~1342747216490~0~0~0~0~0~0~0~0~7~3~ http://techcrunch.com/2012/07/20/last-day-to-purchase-extra-early-bird-tick= ets-for-disrupt-sf/ --00248c711bb99ca36d04c54ba5c6 Content-Type: text/html; charset=ISO-8859-1 Content-Transfer-Encoding: quoted-printable 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-21T00:48:55.603

```
 /**
     *
     * @get URLs from string (string maybe a url)
     *
     * @param string $string

     * @return array
     *
     */
    function getUrls($string) {
        $regex = '/https?\:\/\/[^\" ]+/i';
        preg_match_all($regex, $string, $matches);
        //return (array_reverse($matches[0]));
        return ($matches[0]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T15:42:22.603

请改用以下正则表达式。

```
$regex = "(?i)\b((?:https?://|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'\".,<>?«»“”‘’]))"; 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-27T07:49:02.123

使用以下代码，您将找到一个数组 urls_in_string，并且在零索引 $urls_in_string[0] 处，您将找到所有 url。

```
 $urls_in_string = [];
    $string_with_urls = "Worlds most popular socila networking website in https://www.facebook.com. We have many such othe websites like https://twitter.com/home and https://www.linkedin.com/feed/ etc.";
    $reg_exUrl = "/(http|https|ftp|ftps)\:\/\/[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,6}(\/\S*)?/im";
    preg_match_all($reg_exUrl, $string_with_urls, $urls_in_string);
    print_r($urls_in_string);

// OutPut 
/*
Array
(
    [0] => Array
        (
            [0] => https://www.facebook.com
            [1] => https://twitter.com/home
            [2] => https://www.linkedin.com/feed/
        )

    [1] => Array
        (
            [0] => https
            [1] => https
            [2] => https
        )

    [2] => Array
        (
            [0] => 
            [1] => /home
            [2] => /feed/
        )

)
*/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-27T08:59:56.633

```
you can do something like following

$url = "http://techcrunch.com/2012/07/20/kickstarter-flashr-wants-to-make-the-iphones-bezel-a-massive-notification-light/?grcc=88888Z0ZwdgtZ0Z0Z0Z0Z0&grcc2=835637c33f965e6cdd34c87219233711~1342828462249~fca4fa8af1286d8a77f26033fdeed202~510f37324b14c50a5e9121f955fac3fa~1342747216490~0~0~0~0~0~0~0~0~7~3~

http://techcrunch.com/2012/07/20/last-day-to-purchase-extra-early-bird-tickets-for-disrupt-sf/";

$dataArray = explode("http",$url);

echo "<pre>";print_r($dataArray);

this will return like following array

Array
(
 [0] => 
 [1] => ://techcrunch.com/2012/07/20/kickstarter-flashr-wants-to-make-the-iphones-bezel-a-massive-notification-light/?grcc=88888Z0ZwdgtZ0Z0Z0Z0Z0&grcc2=835637c33f965e6cdd34c87219233711~1342828462249~fca4fa8af1286d8a77f26033fdeed202~510f37324b14c50a5e9121f955fac3fa~1342747216490~0~0~0~0~0~0~0~0~7~3~

 [2] => ://techcrunch.com/2012/07/20/last-day-to-purchase-extra-early-bird-tickets-for-disrupt-sf/
)

when you extract above output please prepend http, I think this will help you 

Happy Coding 
```

# javascript - javascript：无意的反馈循环

> ID：11588551
> 
> 赞同：0
> 
> 时间：2012-07-21T00:36:18.987
> 
> 标签：javascript, html, css

我正在尝试在 javascript 中创建一个由 mouseover 事件触发的动画，然后在鼠标移出时返回到初始状态。当用户将光标移到页面上的图像上时，另一个初始高度为 0px 的 div 的高度逐渐上升到图像底部的 50px。

我面临的问题是，当他们将光标从图像移动到现在覆盖图像底部的 div 时，它会触发 mouseout（因为它是图像中的一个单独元素），然后是一个新的 mouseover 事件快速连续，因为当 div 检测到光标不再位于图像上时它会消失（这意味着 div 会一遍又一遍地快速出现和消失）。

我想知道如何打破这样的循环，以便当光标从图像上运行时 div 不会消失（即防止 onmouseout 事件触发，除非鼠标移动到不是新创建的其他元素分）。

这是一张希望能更好地说明问题的图片：

[http://i.imgur.com/qcE64.jpg](http://i.imgur.com/qcE64.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T00:39:53.377

我认为对于这种情况，您需要在图像和您正在制作动画的 div 周围使用包装器 div。将 mouseover/mouseout 事件附加到包装器上，它们将在您期望它们时触发。 [这是一个jsfiddle示例](http://jsfiddle.net/9esDe/1/)

# java - 如何从 .bat 进程获取输出以显示在 JTextPane 中？

> ID：11588556
> 
> 赞同：1
> 
> 时间：2012-07-21T00:37:16.900
> 
> 标签：java, jtextpane

我的程序要求我运行一个 .bat 文件，该文件将编译 java 源代码。这运行良好，但是我正在寻找一种解决方案，它将获取 compile.bat 的输出（和可能的错误）并将其添加到 GUI 上的文本窗格中。我有以下代码，但是当执行该过程时，不会在窗格中打印任何内容，也不会出现任何错误。

```
GenerationDebugWindow.main(null);

Process process = rut.exec(new String[] {file.getAbsolutePath() + "\\compile.bat"});
Scanner input = new Scanner(process.getInputStream());

InputStream is = process.getInputStream();
InputStreamReader isr = new InputStreamReader(is);
BufferedReader reader = new BufferedReader(isr);

String line;
int exit = -1;

while ((line = reader.readLine()) != null) {
    // Outputs your process execution
    try {
        exit = process.exitValue();
        GenerationDebugWindow.writeToPane(line);
        System.out.println(line);
        if (exit == 0)  {
            GenerationDebugWindow.writeToPane("Compilation Finished!");
            if(new File(file + "/mod_" + WindowMain.modName.getText()).exists()){
                GenerationDebugWindow.writeToPane("Compilation May Have Experienced Errors.");
            }
        }
    } catch (IllegalThreadStateException t) {

    }
} 
```

生成调试窗口

```
private static JTextPane outputPane;
public static void writeToPane(String i){
    outputPane.setText(outputPane.getText() + i + "\r\n");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T00:45:34.043

采用：

```
Runtime.getRuntime().exec( "cmd.exe /C " + file.getAbsolutePath() + "\\compile.bat" ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T00:47:09.593

参考这个问题： [Java Process with Input/Output Stream](https://stackoverflow.com/questions/3643939/java-process-with-input-output-stream)

进程的输出很可能会进入错误流。但是，ProcessBuilder 是一个比直接使用 System.getRuntime().exec() 更有用的类

在下面的示例中，我们告诉 ProcessBuilder 将错误流重定向到与输出相同的流，这简化了代码。

```
ProcessBuilder builder = new ProcessBuilder("cmd.exe /C " + file.getAbsolutePath() + "\\compile.bat");
builder.redirectErrorStream(true);
builder.directory(executionDirectory); // if you want to run from a specific directory
Process process = builder.start();
Reader reader = ...;
String line = null;
while ((line = reader.readLine ()) != null) {
    System.out.println ("Stdout: " + line);
}

int exitValue = process.exitValue(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T02:47:44.153

> 我的程序要求我运行一个 .bat 文件，该文件将编译 java 源代码。

您在 *nix 和 OS X 上的用户要求使用[`JavaCompiler`](http://docs.oracle.com/javase/7/docs/api/javax/tools/JavaCompiler.html).

[STBC](http://pscode.org/stbc/)是使用`JavaCompiler`. 它是[开源](http://pscode.org/stbc/#develop)的。它使用 a`JTextArea`而不是 a`JTextPane`来保存源和错误，但应该很容易适应。

![编译错误](../Images/01e9a21c7ecb18bf606da3b193e6f974.png) ![编译成功](../Images/e7bca5b5402b89aaf6b84a2f794f29c9.png)

# adapter - 适配器和转换器是一回事吗？

> ID：11588557
> 
> 赞同：11
> 
> 时间：2012-07-21T00:37:31.987
> 
> 标签：adapter, converter

适配器和转换器有什么区别？所有转换器都是适配器吗？

（在设计模式方面）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-21T00:52:29.760

不，我不会认为它们是同一件事。适配器通常是使一个接口适应另一个接口的东西。例如，我可能会为我的应用程序创建一个适配器接口来发送电子邮件。一个适配器将完成与 SMTP 接口相关的所有工作，另一个适配器可能会完成与 Exchange 接口相关的所有工作。使用任一适配器的代码，它们将以相同的方式使用（可能都实现相同的接口）。适配器使一个接口适应另一个接口。我的想法是我可以根据需要将它们换掉。

转换器是将一个或多个值更改为一个或多个不同值的东西。例如，我可能需要将 Unicode 文本转换为 ASCII 文本。这不是调整接口，以便其他需要不同接口的东西可以使用它，而是转换值以便可以使用需要 ASCII 文本的单个接口。

现在，适配器可能需要进行一些转换才能适配接口；但情况并非总是如此。

# excel - 循环 Matlab 数据以在不同列中表现出色

> ID：11588559
> 
> 赞同：0
> 
> 时间：2012-07-21T00:38:14.197
> 
> 标签：excel, matlab

我想知道如何将这些从 Simulink 获得的值重新排列为更合适的格式，以便轻松完成绘图。

从simulink得到的原始数据如下图所示：

val(:,:,1) =

```
1.2500
2.5000
2.5000
2.5000
2.5000
2.5000
2.5000
2.5000
2.5000
2.5000
2.5000
2.5000
2.5000
2.5000
2.5000
2.5000
2.5000
2.5000
2.5000
2.5000 
```

val(:,:,2) =

```
1.2500
7.5000
7.5000
7.5000
7.5000
7.5000
7.5000
7.5000
7.5000
7.5000
7.5000
7.5000
7.5000
7.5000
7.5000
7.5000
7.5000
7.5000
7.5000
7.5000 
```

但是，我希望采用如下所示的格式：

```
1.2500      1.2500
2.5000      7.5000
2.5000      7.5000
2.5000      7.5000
2.5000      7.5000
2.5000      7.5000
2.5000      7.5000
2.5000      7.5000
2.5000      7.5000
2.5000      7.5000
2.5000      7.5000
2.5000      7.5000
2.5000      7.5000
2.5000      7.5000 
2.5000      7.5000
2.5000      7.5000
2.5000      7.5000
2.5000      7.5000
2.5000      7.5000
2.5000      7.5000 
```

我试过循环代码如下：

索引_c = 10;

对于 c = 1:Index_c

```
y = simout.signals.values(:,:,c) %Simulink data

xlswrite('testdata.xls', y, ['A' num2str(c)]) 
```

结尾

但这是将所有内容复制到不同的工作表，我想要的只是将它们复制到不同的列。有没有人可以帮助我解决这个问题？将数据复制到 Excel 或 Matlab 中的新变量并不重要。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T00:41:41.183

我认为[挤压](http://www.mathworks.nl/help/techdoc/ref/squeeze.html)可以解决这个问题：

```
squeeze(val) 
```

它删除了单件维度；因此，如果您在帖子中拥有的那些行是 中的唯一行`val`，则结果应该是 Nx2 矩阵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T00:42:59.640

我认为这会重塑数据：

```
>> reshaped_val = reshape(val, [], 2) 
```

# objective-c - iOS - 如何检查字符串是否为数字？

> ID：11588571
> 
> 赞同：10
> 
> 时间：2012-07-21T00:41:03.577
> 
> 标签：objective-c, ios

> **可能重复：**
> [iPhone 如何检查字符串是否仅为数字](https://stackoverflow.com/questions/1320295/iphone-how-to-check-that-a-string-is-numeric-only)

我正在尝试在 Objective C 中查找一些基本功能，但似乎无法找到基本答案。

我真正需要的是检查

```
if ( some_string is numeric )
{

} 
```

我会假设会有一些内置的功能。不？

我正在查看这个 StackOverflow 问题[How to check if NSString is numeric or not](https://stackoverflow.com/questions/2020360/how-to-check-if-nsstring-is-numeric-or-not)，他们似乎正在以非常复杂的方式做事。

难道我不能用一条简单的线来做一些基本的检查吗？

谢谢！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-21T00:53:41.867

> 难道我不能用一条简单的线来做一些基本的检查吗？

不。

```
NSScanner *scanner = [NSScanner scannerWithString:testString];
BOOL isNumeric = [scanner scanInteger:NULL] && [scanner isAtEnd]; 
```

如果你想允许十进制数字交换`scanInteger:`.`scanDouble:`

# django - 以相反的顺序重新排序来自 django 评论框架的评论

> ID：11588573
> 
> 赞同：2
> 
> 时间：2012-07-21T00:41:14.950
> 
> 标签：django, django-models, django-comments

我想重新排列我的评论以首先显示最新的。我正在使用内置的 Django 评论框架。是否有内置或简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T19:53:08.567

来自 Django 文档：

```
You can loop over a list in reverse by using {% for obj in list reversed %}. 
```

所以，在我的模板中，我有：

```
{% for comment in comment_list reversed %} 
```

你的评论现在是相反的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T01:12:56.290

你可以试试[https://docs.djangoproject.com/en/dev/ref/contrib/comments/custom/](https://docs.djangoproject.com/en/dev/ref/contrib/comments/custom/)

```
class ReorderComment(Comment):
    class Meta:
        ordering = ["-submit_date"] 
```

在 settings.py

```
COMMENTS_APP = 'my_comment_app' 
```

或者您可以通过创建模板标签来重新编码它们

```
{% get_comment_list for event as comment_list %}
{% reoder_comments comment_list as reodered_comment_list %} 
```

reoder 模板标签看起来像（使用 django-classy-tags）

```
register = template.Library()
class ReoderComments(Tag):
    name = 'reoder_comments'
    options = Options(
        Argument('queryset'),
        'as',
        Argument('varname', required=False, resolve=False)
    )
    def render_tag(self, context, queryset, varname):
        context[varname] = queryset.order_by("-submit_date")
        return ''
register.tag(ReoderComments) 
```

# qt - 需要如何让 qt 在 Windows 上进行静态编译的更新版本

> ID：11588575
> 
> 赞同：3
> 
> 时间：2012-07-21T00:41:35.713
> 
> 标签：qt, build, static

我刚刚在 QT 中制作了一个程序，我想分发它，但我想要一个静态构建，而不是我需要随它一起发布所有库的构建。我一直在到处寻找有关它的指南，它们都描述了我没有的东西。如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T11:27:30.400

这是我的粗略笔记。几天前我做了这个。

下载 Mingw32 [http://sourceforge.net/projects/mingw/files/latest/download?source=files](http://sourceforge.net/projects/mingw/files/latest/download?source=files)

我也选择添加 msys 包。这是一个为您设置环境的 cmd msys.bat 文件。我将上述安装到 c:\MinGW 并双击 C:\MinGW\msys\1.0\msys.bat

下载了 QT 源码 [http://releases.qt-project.org/qt4/source/qt-everywhere-opensource-src-4.8.2.zip](http://releases.qt-project.org/qt4/source/qt-everywhere-opensource-src-4.8.2.zip)

我将上面的解压缩到 c:\qt-src-4.8.2

使用 msys 命令行，我将目录更改为上述目录并输入：

configure.exe -static -platform win32-g++ -release -exceptions

这大约需要 15 分钟

然后我输入：

mingw32-make 子源

这花了几个小时。

安装 QT Creator，下载自：安装到：C:\qtcreator-2.5.0 运行 qtcreator 工具 > 选项 QT 版本。添加 > 浏览到 c:\qt-src-4.8.2 工具链中的 qmake.exe > 添加 MinGW > 浏览到 g++.exe

修改makespecs 打开C:\qt-src-4.8.2\mkspecs\win32-g++\qmake.conf 添加QMAKE_LFLAGS = -static -static-libgcc 然后测试静态构建，打开.pro文件 CONFIG += static

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T04:24:33.713

不要费心用 Qt 做静态编译。你要花几个小时在上面，你甚至不确定会成功。使用 Qt，因为它应该被使用 - 使用单独的 DLL。

# shell - shell 的 `source` 是 POSIX 标准的吗？

> ID：11588583
> 
> 赞同：23
> 
> 时间：2012-07-21T00:42:45.403
> 
> 标签：shell, unix, posix

我花了一些时间在[POSIX 标准中搜索 shell](http://pubs.opengroup.org/onlinepubs/007904975/utilities/xcu_chap02.html)中的`source`and`.`命令，并且在这一点上确信它们不在那里。

有没有不支持的shell `.`？在当前环境中执行 shell 脚本的 POSIX 标准方式是什么（即，不产生子 shell，所以如果脚本说`export VAR=value`then`VAR`存在于调用 shell 中）？

我可能遗漏了一些明显的东西，但事实证明这`.`对谷歌来说并不容易......

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-21T00:52:16.850

它在[“点”](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#dot)下。

> **姓名**
> 
> dot - 在当前环境中执行命令
> 
> **概要**
> 
> . *文件*

[ETC。]

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-07-21T00:52:33.193

`.`是标准化的（POSIX [2004](http://pubs.opengroup.org/onlinepubs/007904975/utilities/dot.html) , [2008](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#tag_18_18_01)）。

`source`是非标准的，并且在`ash`, `dash`or中特别不受支持`pdksh`（因此可能它也不在原始 Korn Shell 中）。即，它是巴什主义。

# mysql - 执行此查询的更好方法

> ID：11588587
> 
> 赞同：1
> 
> 时间：2012-07-21T00:43:25.583
> 
> 标签：mysql, sql, oracle, sqlite

我有这个架构：

```
Story
_id 
name 
```

* * *

```
Paragraph
_id
text 
story_id 
```

* * *

```
( the chapter can start from a specific story and 
a specific paragraph and
ends with a specific story and specific paragraph). 
```

* * *

```
Chapter
_id
name 
start_story_id
start_paragraph_id( first paragraph id in the story which _id == start_story_id) 
end_story_id
end_paragraph_id ( last paragraph id in the story which  _id == end_story_id) 
```

我想知道特定段落在哪一章。我有故事 ID 和段落 ID。这是我到目前为止所尝试的，它给出了正确的结果：

```
SELECT MIN(_id) 
FROM   chapter 
WHERE  ( start_story_id = @param_story_id 
         AND start_paragraph_id >= @param_parahgraph_id ) 
        OR ( end_story_id = @param_story_id 
             AND end_paragraph_id >= @param_parahgraph_id ) 
        OR ( @param_story_id >= start_story_id 
             AND @param_story_id <= end_story_id ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T02:32:07.983

您的查询不应返回正确答案。除非你的数据是幸运的。

这是因为由于一个故事被分成几个章节，那么您的查询将始终返回故事的第一章，而不是段落的第一章。

数据示例：

```
Story: |1 1 1|2 2 2|3 3 3|
Parag: |1|2|3|4|5|6|7|8|9|
Chapt: |1 1|2 2|3|4 4|5 5| 
```

如果您要求查询 (Parag=3, Story=1)，那么它将返回 Chapt=1，而正确答案是 2。

它们是您查询中的其他错误。

仅使用开始段落和结束段落定义章节范围意味着在这些边界之间，所有段落 id 都在同一章节中。

因此，如果 Paragraph._id 实际上是一个主键（您的架构让我们猜测它），那么您的查询可以简单地是：

```
SELECT _id
FROM chapter
WHERE (start_paragraph_id<=@param_paragraph_id)
AND (@param_paragraph_id<=end_paragraph_id) 
```

但是，如果主键实际上是 {Paragraph._id + Paragraph.story_id} （正如您的章节表可能的意思），那么它也意味着 story_id 也在同一章节中排序。

因此，`story_id`和`paragraph_id`都对段落进行排序，就好像它们是排序值的整数部分和小数部分一样。查询应该是：

```
SELECT MIN(_id)
FROM chapter
WHERE
 ( (start_story_id<@param_story_id)
   OR
   ( (start_story_id=@param_story_id)
     AND
     (start_parahraph_id<@param_paragraph_id) ))
 AND
 ( (end_story_id>@param_story_id)
   OR
   ( (end_story_id=@param_story_id)
     AND
     (end_parahraph_id>@param_paragraph_id) )) 
```

恐怕查询的复杂性来自数据排列的复杂性。如果章节 ID 在段落表中会更好。

# c# - 扩展扩展方法？或者其他的东西？

> ID：11588588
> 
> 赞同：1
> 
> 时间：2012-07-21T00:43:43.850
> 
> 标签：c#, methods

对不起，我不是很清楚。很难解释我想要做什么。我想制作扩展方法，但将它们分开。所以例如...

```
bool b = true;
char c = b.bool_ext.convert_to_YorN();
int i = b.bool_ext.convert_to_1or0(); 
```

这样的事情可能吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T00:48:01.760

不，那是不可能的，这`bool_ext`将是 的扩展*属性*，`bool`并且您目前不能做扩展属性，只能做扩展方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T00:59:59.817

如果您希望它们“隔离”，那么您必须发明自己的类型：

```
public struct MyBool {
    public MyBool(bool value) : this() {
        this.Value = value;
    }

    public bool Value { get; private set; }
}

public static MyBoolExtensions {
    public static char convert_to_YorN(this MyBool value) {
        return value.Value ? 'Y' : 'N';
    }
}

public static BooleanExtensions {
    public static MyBool bool_ext(this bool value) {
        return new MyBool(value);
    }
} 
```

可以像这样使用：

```
bool b = true;
char c = b.bool_ext().convert_to_YorN(); 
```

或者只是将它们用作静态方法：

```
public class MyBoolConverters {
    public static char convert_to_YorN(bool value) {
        return value.Value ? 'Y' : 'N';
    }
} 
```

可以像这样使用：

```
bool b = true;
char c = MyBoolConverters.convert_to_YorN(b); 
```

但是你不能像你展示的那样对它们进行分类。

# php - 从带有后缀或前缀 PHP 的数组键中提取变量

> ID：11588590
> 
> 赞同：0
> 
> 时间：2012-07-21T00:43:54.700
> 
> 标签：php, arrays, foreach

我正在从数组中提取变量并且工作正常，但碰巧在同一个文件中我有来自不同类别的新闻项目，数组具有相同的键名，所以它们被混淆并加载第一组接管，我需要的是一个前缀或变量的后缀，以便我可以区分一个与另一个

```
function get_extra_fields($item){
    $item->extra_fields = K2ModelItem::getItemExtraFields($item->extra_fields);
    foreach ( $item->extra_fields as $key => $extraField ){

        $getkey  = strtolower($extraField->name);
        $getkey  = str_replace(' ', '', $getkey);
        global $$getkey;
        $$getkey = $extraField->value;
    }

} 
```

它在 foreach 中被称为 3 个不同的类别

```
foreach($get_gcat1 as $row => $item){
   get_extra_fields($item);
  echo $newstitle;
}

foreach($get_cat2 as $row => $item){
   get_extra_fields($item);
   echo $newstitle;
}

foreach($get_cat3 as $row => $item){
   get_extra_fields($item);
   echo $newstitle;
} 
```

任何帮助表示赞赏。谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T00:52:28.430

创建全局变量的奇怪方法，但这里有一些可以做你想做的事情：

```
function get_extra_fields($item, $prefix){
    $item->extra_fields = K2ModelItem::getItemExtraFields($item->extra_fields);
    foreach ( $item->extra_fields as $key => $extraField ){
        $getkey  = strtolower($extraField->name);
        $getkey  = str_replace(' ', '', $getkey);
        $GLOBALS[$prefix.$getkey] = $extraField->value;
    }
}

foreach($get_gcat1 as $row => $item){
  get_extra_fields($item, 'cat1_');
  echo $cat1_newstitle;
}

foreach($get_cat2 as $row => $item){
   get_extra_fields($item, 'cat2_');
   echo $cat2_newstitle;
}

foreach($get_cat3 as $row => $item){
   get_extra_fields($item, 'cat3_');
   echo $cat3_newstitle;
} 
```

# php - PHP网页未加载-apache访问日志中没有任何内容

> ID：11588592
> 
> 赞同：0
> 
> 时间：2012-07-21T00:44:23.857
> 
> 标签：php, apache

我间歇性地看到我的一个 PHP 页面出现了一个奇怪的问题。

我发现页面一直在加载，并尝试使用 curl 进行一些测试。

这是结果

第一次运行- % -> 0 并一直加载到 01:01（我 ctrl+c'd）

第二次运行正常响应 4 秒加载时间

第三次运行再次开始加载超过 5 秒，所以 ctrl+c'd

第 4 次运行正常响应 4 秒加载时间

![在此处输入图像描述](../Images/fc19b10aba274163fe3e9e789965d691.png)

当我请求页面时，我正在跟踪 apache 访问日志。当页面未加载（又名 0%）时，我无法在 apache 访问日志中看到任何条目。

对于 4 个请求，我只能在 apache 访问日志中看到 2 个访问条目。

```
127.0.0.1 - - [20/Jul/2012:17:33:28 -0700] "GET /lmo/auth/index.php HTTP/1.1" 200 1317 "-" "curl/7.21.7 (i386-pc-win32) libcurl/7.21.7 OpenSSL/0.9.8r zlib/1.2.5"
127.0.0.1 - - [20/Jul/2012:17:33:50 -0700] "GET /lmo/auth/index.php HTTP/1.1" 200 1317 "-" "curl/7.21.7 (i386-pc-win32) libcurl/7.21.7 OpenSSL/0.9.8r zlib/1.2.5" 
```

*   apache error.log 中也没有任何内容

**更多信息：** 1 .HTTP 与 HTTPS 的情况相同

2 .我正在使用带有 xampp 1.8.0 的 win 2003（最近更新了 xampp，甚至在我更新之前就看到加载时间变慢。）

3 .apache 2.4 , php 5.4 我正在加载的页面有最少的 php 代码，大部分代码是 HTML/JS。它是一个登录页面。

我认为apache有问题。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T00:50:16.370

PHP 脚本需要做什么才能向您发送完整的页面？也许有一些 IOWAIT 问题。或其他可能基于文件的死锁或等待情况。（例如 fopen）或被另一个阻塞的 MySQL 事务。

# css - 如何解决：CSS 选择器“:active”不起作用？

> ID：11588593
> 
> 赞同：1
> 
> 时间：2012-07-21T00:44:43.280
> 
> 标签：css, css-selectors, hover

我很困惑，因为 :hover 选择器工作正常，但 :active 不工作。

设想：

第一个：sample.com/game点击不同ID的链接框游戏（例如：ID 1-101），每个盒子都使用css

```
#selec{background-color:white;-moz-border-radius: 10px;-webkit-border-radius: 10px;border-radius: 10px;} 
```

单击其中一个框 ID 时，转到 sample.com/game?id=100

我成功悬停

```
#selec:hover{background-color:blue;} 
```

但我想用彩色背景激活，当框处于活动状态时（框 ID 100，红色背景和其他仍然白色，因为框 100 处于活动状态）

```
#selec:active{background-color:blue;} 
```

但是没有成功，为什么？？？？？？我仍然为此感到困惑。

这个 php 文件：

```
<a href="?game=<?php echo $ID;?>"><div id="selec"><div class="text"><p><?php echo $text; ?></p></div></div></a> 
```

有人帮我解决这个问题吗？感谢 *`$text`在框中给出名称，例如框 ID 100 是游戏 RPG

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-21T00:50:37.037

`:active`CSS 伪类适用于所有元素......*但是*`<a>`，如果您不在**Internet Explorer 中以标准模式**呈现，它仅适用于链接（例如元素） 。

`<div>`因此，如果您没有设置 DOCTYPE，它将不适用于您的 IE。

将此添加到 HTML 的顶部：

```
<!doctype html> 
```

每个伪类的定义顺序也很重要......（以确保它们都“覆盖”前一个）......请记住：

“ `L`ord `V`adar 的`H`andle `F`ormerly `A`nakin”

```
a:link    {color:blue;}
a:visited {color:green;}
a:hover   {color:red;}
a:focus   {color:orange;}
a:active  {color:yellow;} 
```

注意：感谢@BoltClock 在此处的 W3Schools 网站[http://www.w3schools.com/cssref/sel_active.asp](http://www.w3schools.com/cssref/sel_active.asp)上指出错误，表明它仅在链接上可用。（这在现代浏览器中不再正确（以标准模式呈现））

注意 2：W3C 表示 :active 伪类已添加到 CSS 2.1 中的所有元素中，它仅在 CSS 1.0 中的链接上：“注意。还要注意，在 CSS1 中，':active' 伪类仅适用于链接。 " [http://www.w3.org/TR/CSS2/selector.html#pseudo-class-selectors](http://www.w3.org/TR/CSS2/selector.html#pseudo-class-selectors)

# ruby-on-rails - 使用 Rubber 部署以运行 EC2 实例？

> ID：11588594
> 
> 赞同：2
> 
> 时间：2012-07-21T00:44:53.213
> 
> 标签：ruby-on-rails, amazon-ec2

我用谷歌搜索，但找不到将 Rails 应用程序部署到使用 Rubber 运行的 EC2 实例的指南。

有人可以指出指南/或提供配置文件中的一些说明/关键功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T04:17:05.467

试试 Railscasts。[它有一个关于橡胶](http://railscasts.com/episodes?utf8=%E2%9C%93&search=rubber)的插曲。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-21T06:58:59.423

[http://www.ginzametrics.com/deploy-rails-app-to-ec2-with-rubber.html](http://www.ginzametrics.com/deploy-rails-app-to-ec2-with-rubber.html)

[http://ramenlab.wordpress.com/2011/06/24/deploying-your-rails-app-to-aws-ec2-using-rubber/](http://ramenlab.wordpress.com/2011/06/24/deploying-your-rails-app-to-aws-ec2-using-rubber/)

# xna - 如何加载和卸载关卡

> ID：11588597
> 
> 赞同：1
> 
> 时间：2012-07-21T00:45:48.547
> 
> 标签：xna

我正在用 XNA 编写我的第一个游戏，我有点困惑。

该游戏是一款 2D 平台游戏，像素完美，**不**基于 Tiles。

目前，我的代码看起来像这样

```
public class Game1 : Microsoft.Xna.Framework.Game
{
//some variables
Level currentLevel, level1, level2;

protected override void Initialize()
{
base.Initialize();
}

protected override void LoadContent()
{
spriteBatch = new SpriteBatch(GraphicsDevice);

//a level contains 3 sprites (background, foreground, collisions)
//and the start position of the player
level1 = new Level(
new Sprite(Content.Load<Texture2D>("level1/intro-1er-plan"), Vector2.Zero),
new Sprite(Content.Load<Texture2D>("level1/intro-collisions"), Vector2.Zero),
new Sprite(Content.Load<Texture2D>("level1/intro-decors-fond"), Vector2.Zero),
new Vector2(280, 441));

level2 = new Level(
new Sprite(Content.Load<Texture2D>("level2/intro-1er-plan"), Vector2.Zero),
new Sprite(Content.Load<Texture2D>("level2/intro-collisions"), Vector2.Zero),
new Sprite(Content.Load<Texture2D>("level2/intro-decors-fond"), Vector2.Zero),
new Vector2(500, 250));

...//etc
}

protected override void UnloadContent() {}

protected override void Update(GameTime gameTime)
{

if(the_character_entered_zone1())
{
ChangeLevel(level2);
}
//other stuff

}

protected override void Draw(GameTime gameTime)
{
//drawing code
}

private void ChangeLevel(Level _theLevel)
{
currentLevel = _theLevel;
//other stuff
} 
```

每个精灵都是从一开始就加载的，所以这对计算机的 RAM 来说不是一个好主意。

好吧，这是我的问题：

*   我如何用他自己的精灵数量、它们的事件和对象来保存关卡？
*   我如何加载/卸载这些关卡？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-21T04:11:01.167

**给每个级别自己的`ContentManager`，并使用它来代替`Game.Content`（对于每个级别的内容）。**

（通过传递给构造函数来创建新`ContentManager`实例。）`Game.Services`

*单个* `ContentManager`将共享它加载的所有内容实例（因此，如果您两次加载“MyTexture”，您将获得两次相同的实例*）*。由于这个事实，卸载内容的唯一方法是卸载整个内容管理器（使用`.Unload()`）。

通过使用多个内容管理器，您可以获得更精细的卸载（因此您可以仅卸载单个级别的内容）。

请注意，*不同*的实例`ContentManager`彼此不了解，也不会共享内容。例如，如果您在两个不同的内容管理器上加载“MyTexture”，您将获得两个单独的实例（因此您使用了两倍的内存）。

处理此问题的最简单方法是使用 加载所有“共享”内容`Game.Content`，并使用单独的级别内容管理器加载所有每个级别的内容。

如果这仍然不能提供足够的控制，您可以从中派生一个类`ContentManager`并实现您自己的加载/卸载策略（[本博文中的示例](http://blogs.msdn.com/b/shawnhar/archive/2007/03/09/contentmanager-readasset.aspx)）。尽管这很少值得付出努力。

*请记住，这是一种优化（针对内存） - 所以在它成为实际*问题之前不要花太多时间。

我建议阅读[这个答案](https://gamedev.stackexchange.com/a/9310/288)（在 gamedev 网站上），它提供了一些提示和链接，以更深入地解释如何`ContentManager`工作的进一步答案。

# asp.net - Asp.net 4.0 URL 重写帮助

> ID：11588599
> 
> 赞同：0
> 
> 时间：2012-07-21T00:46:30.737
> 
> 标签：asp.net, url-rewriting

我在尝试使用 asp.net 4.0 重写 url 时遇到问题；这样做时我不断收到服务器错误。

当前网址： http: [//www.somesite.com/contact.aspx](http://www.somesite.com/contact.aspx)

所需网址： http: [//www.somesite.com/contact-us](http://www.somesite.com/contact-us)

提前感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T00:49:22.340

[http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/asp-net-mvc-routing-overview-cs](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/asp-net-mvc-routing-overview-cs)

# c# - 如何从使用 C# 通过 Internet 远程连接的 SQL Server 中选择所有表？

> ID：11588600
> 
> 赞同：0
> 
> 时间：2012-07-21T00:47:03.287
> 
> 标签：c#, sql

我有这样的问题！

如何从使用 C# 的另一台机器通过 Internet 远程连接 SQL Server 中的所有表？

如果可能，选择数据库表中的所有字段中的任何一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T01:26:23.990

//connectionstring 将包含您所有的 SqlServer 名称用户 ID 和密码

```
private static void ReadOrderData(string connectionString)
{
    string queryString =
        "SELECT OrderID, CustomerID FROM dbo.Orders;";

    using (SqlConnection connection =
               new SqlConnection(connectionString))
    {
        SqlCommand command =
            new SqlCommand(queryString, connection);
        connection.Open();

        SqlDataReader reader = command.ExecuteReader();

        // Call Read before accessing data.
        while (reader.Read())
        {
            Console.WriteLine(String.Format("{0}, {1}",
                reader[0], reader[1]));
        }

        // Call Close when done reading.
        reader.Close();
    }
} 
```

# php - curl_multi 的 CURLINFO_EFFECTIVE_URL

> ID：11588609
> 
> 赞同：1
> 
> 时间：2012-07-21T00:48:10.227
> 
> 标签：php, curl, curl-multi

我正在使用 PHP 的 CURL MULTI 并行下载一组资源，并且我想从*每个*资源（不仅仅是最后一个）中获取最后一个有效的 URL。

基本上，我正在寻找：

```
curl_getinfo($ch, CURLINFO_EFFECTIVE_URL); 
```

对于 CURL MULTI，类似于：

```
curl_multi_getinfo($ch[$key], CURLINFO_EFFECTIVE_URL); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T00:56:50.507

我还没有尝试过，但`curl_getinfo($ch, CURLINFO_EFFECTIVE_URL);`应该可以很好地使用 multi_* 函数。

这里的关键是*您*跟踪的`$ch`单个句柄。如果是一个 curl 句柄数组，那么这将是一个可能的实现。*`curl_getinfo($ch[$key], CURLINFO_EFFECTIVE_URL);``$ch`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-28T02:04:28.560

```
CURLINFO_EFFECTIVE_URL 
```

此参数对于引用您的原始 url 列表不可靠。它可以返回与 CURLOPT_URL 中提供的 url 不同的 url。*

# database-design - 订单/发票信息的建议数据库架构是什么？

> ID：11588611
> 
> 赞同：13
> 
> 时间：2012-07-21T00:48:17.320
> 
> 标签：database-design

我必须对电子商务系统进行一些更改以添加一些额外的信息，并希望借此机会进行一些改进并使其更加灵活。当客户下订单时，我们必须为每个订购的商品存储几项信息；例如，产品价格、运费、征收的税款、所做的任何调整。

我正在争论这些字段是否应该离散存储，例如（简化示例）：

```
ORDER_LINE_ITEM
    OrderLineItemID
    ProductID
    Qty
    Price
    Shipping
    Handling      
    SalesTax
    Adjustment 
```

例如，我可以计算客户支付的总价格：

```
SELECT Qty*(Price+Shipping+Handling+SalesTax) As TotalCollected FROM ORDER_LINE_ITEM 
```

或者，如果我应该使用更间接的结构：

```
ORDER_LINE_ITEM
    OrderLineItemID
    ProductID
    Qty

ORDER_LINE_ITEM_ENTRIES
    OrderLineItemEntryID
    OrderLineItemID
    EntryType
    Value 
```

例如：

```
1 | 1 | Price      | $10
2 | 1 | Shipping   | $5
3 | 1 | Handling   | $1
4 | 1 | SalesTax   | $1
5 | 1 | Adjustment | -$3.50 
```

这样做的好处是我可以稍后在不更改表模式的情况下存储其他信息。然而，检索信息和运行报告变得更加复杂和缓慢。

是否有将此信息存储在订单/发票数据库中的最佳做法？

提前致谢，

担

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-21T15:07:10.070

您可以在 Database Answers 中找到一些针对常见问题的相当标准的数据库设计。 [单击此处](http://www.databaseanswers.org/data_models/)查看他们的数据模型页面。

有几个与发票有关的示例模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T03:53:31.483

我会做一个混合的方法，同时拥有：

```
ORDER_LINE_ITEM
    OrderLineItemID
    ProductID
    Qty
    Price
    Shipping
    Handling      
    SalesTax
    Adjustment
    Extras

ORDER_LINE_ITEM_ENTRIES
    OrderLineItemEntryID
    OrderLineItemID
    EntryType
    Value 
```

然后做

```
SELECT Qty*(Price+Shipping+Handling+SalesTax+Extras) As TotalCollected FROM ORDER_LINE_ITEM 
```

然后您可以在大部分时间使用单个表格，但如果您需要搜索项目的详细信息（或添加影响价格的新事物），您可以这样做（使用额外字段）。

在另一个主题中，我会考虑是否所有这些字段都应该在 ORDER_LINE_ITEM 上。我不了解您的业务，但在我知道的业务中，运输、处理甚至价格是针对整个订单计算的，而不是仅针对一件商品（而且并非总是可以将其拆分为单独的商品）。拥有“管理员”用户或密码也很常见，他可以来销售他想要的任何东西，为所有内容输入任意字段，并忽略所有正常的业务规则。因此，您可能会考虑执行以下操作：

```
ORDER_LINE_ITEM
    OrderLineItemID
    OrderId
    ProductID
    Qty

ORDER
    OrderId
    ItemsTotalPrice
    Shipping
    Handling
    SalesTaxes
    Adjusment
    FinalPrince 
```

您可以创建一个详细信息表来指定如何创建订单值（税金、运费等）...

一般来说，我发现最好的方法是拥有一个具有所有订单（或操作）的最终信息的实体，然后是指定如何计算“总”值的附加子实体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T00:59:48.040

从概念上讲，第二种方法更好，因为订单信息不直接属于产品，产品可能没有“ Shipping”，“taxex”而存在，此外，这样存储的数据更少，不需要重复的产品信息。

```
ORDERITEM
    OrderItemID
    ProductID
    Qty

ORDERITEMENTRIES
    OrderItemID
    EntryType
    Value 
```

# php - 缩小 PHP/html 代码

> ID：11588616
> 
> 赞同：1
> 
> 时间：2012-07-21T00:49:04.820
> 
> 标签：php, yii

我需要使用 PHP 缩小 html 代码以提高我的网站性能

我正在使用 Yii PHP 框架/Apache。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-29T14:52:54.883

我使用了谷歌的[PageSpeed 模块](https://developers.google.com/speed/pagespeed/module)，它真的很棒

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T00:04:49.390

Yii 的扩展：

[http://www.yiiframework.com/extension/escriptboost](http://www.yiiframework.com/extension/escriptboost)

[http://www.yiiframework.com/extension/minscript](http://www.yiiframework.com/extension/minscript)

[http://www.yiiframework.com/extension/clientscriptpacker](http://www.yiiframework.com/extension/clientscriptpacker)

[http://www.yiiframework.com/extension/dynamicres/](http://www.yiiframework.com/extension/dynamicres/)

# nhibernate - 从 NH 1.2 升级到 2.1 并 type="serializable" 抛出序列化异常

> ID：11588619
> 
> 赞同：0
> 
> 时间：2012-07-21T00:50:12.500
> 
> 标签：nhibernate

我有一个旧的 NH 1.2 项目，我正在更新到 2.1，到目前为止，这很容易，直到我遇到了映射到 type="serializable" 和 sql server 2000 的属性。

我不断收到 serializationExceptions 并且内部异常抱怨它找不到 1.2 的程序集。

在这方面甚至可以更新到 2.1 吗？我看过一些帖子讨论设置列长度，但无济于事。

```
<property name="Lines"  type="Serializable"  >
  <column name="Lines" not-null="false" sql-type="varbinary(max)"/>
</property> 
```

这仅仅是一个配置问题，还是我可能会对现有数据感到厌烦？

编辑：我也尝试过输入程序集重定向，因为它可能会起作用。那里也没有爱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T05:00:49.790

回答我自己的问题，而不是为后代删除它。

如果您在尝试反序列化时遇到此 SerializationException，其中内部异常显然是在寻找旧版本的 NHibernate 程序集，这是因为您序列化的属性要么是 NHibernate 代理本身，要么在它的图中有 NHibernate 代理。

故事的寓意：要小心你在地图中设置为 type="serializable" 的内容。

# android - android listview上下文菜单

> ID：11588622
> 
> 赞同：1
> 
> 时间：2012-07-21T00:50:22.107
> 
> 标签：android, listview, contextmenu

我想在列表视图上放置一个上下文菜单。这似乎很简单，但我得到了一些有趣的行为。listview 有两个字段，一个 textview 和一个 editText。长按会打开 EditText 上的菜单，但不会在列表视图的其他地方打开。这是代码片段。

```
public class ManageClass extends ListActivity {

super.onCreate(savedInstanceState);
    setContentView(R.layout.manageclass);

      //Tons of not relevant stuff that I would be happy to provide.
                    pfdata = new PortfolioData(this);
            try {
        Cursor cursor = getClasses();
        showClasses(cursor);

    } finally {
        pfdata.close();
    }
}

  private Cursor getClasses() {

    String sql = "select c._id, c.NAME as NAME , c.percentage as PERCENTAGE "
            + "from asset_classes c;";

    SQLiteDatabase db = pfdata.getReadableDatabase();

    Cursor cursor = db.rawQuery(sql, null);
    startManagingCursor(cursor);
    return cursor;

}

private void showClasses(Cursor cursor) {

    adapter = new MySimpleCursorAdapter(this, R.layout.classrow, cursor,
            FROM, TO, t);

    // Log.d("TEST", Integer.toString(adapter.getCount()));

    setListAdapter(adapter);
    adapter.notifyDataSetChanged();
                //I've tried moving this line around but it hasn't made a difference.
    registerForContextMenu(getListView());
}

@Override
public void onCreateContextMenu(ContextMenu menu, View v,
    ContextMenuInfo menuInfo) {

      menu.add(Menu.NONE, 0, 0, "A");
      menu.add(Menu.NONE, 1, 1, "B");
      menu.add(Menu.NONE, 2, 2, "C");

} 
```

最后，我承认的布局本身过于复杂

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/editText1"
        android:layout_width="300px"
        android:layout_height="wrap_content"
        android:text="@string/TCLabel" />

    <TextView
        android:id="@+id/classtotalpercentage"
        android:layout_width="109dp"
        android:layout_height="wrap_content"
        android:textSize="50px" />
</LinearLayout>

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/AddClassLabel"
        android:layout_width="200px"
        android:layout_height="wrap_content"
        android:layout_weight="0.38"
        android:text="@string/AddClassLabel" />

    <Button
        android:id="@+id/addclass_button"
        android:layout_width="120dp"
        android:layout_height="wrap_content"
        android:text="@string/addclassbutton_label" />
</LinearLayout>

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@color/grey"
    android:orientation="horizontal"
    android:padding="10sp" >

    <TextView
        android:id="@+id/assetclassHeader"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/assetclassHeader"
        android:width="200dp" />

    <TextView
        android:id="@+id/percentageHeader"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@id/assetclassHeader"
        android:text="@string/percentageHeader"
        android:width="100dp" />
</LinearLayout>

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:fadeScrollbars="false"
        android:scrollbarAlwaysDrawVerticalTrack="true"
        android:scrollbarStyle="outsideOverlay"
        android:scrollbars="vertical" />

    <TextView
        android:id="@android:id/empty"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/no_list_data" />
</RelativeLayout>

</LinearLayout> 
```

我很感激任何建议。如果可能的话，我想要文本视图上的菜单而不是编辑文本。

更新。我发现它与 EditText 有关。如果我将其更改为 textview 或将其全部删除，那么一切都会正常运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T16:49:17.117

我有一个与复选框类似的问题，发现问题是由复选框获得焦点引起的。我将属性更改为：android:focusable="false"

现在它可以正常工作了。

# html - 重用定义在 ?

> ID：11588624
> 
> 赞同：1
> 
> 时间：2012-07-21T00:50:36.110
> 
> 标签：html, svg

我想在 svg 中写一个 logo，但令人惊讶地发现我无法重用`<defs>...</defs>`. 我在 Chrome 上试过了。

请看示例：

1.  test1.html 不起作用，没有绘制矩形。

    ```
    <!DOCTTYPE html>
    <html>
      <body>
        <svg xmlns="http://www.w3.org/2000/svg"
             xmlns:xlink="http://www.w3.org/1999/xlink"
             width="480" height="360">
          <defs>
            <rect id="helo" x="0" y="0" height="20" width="20" />
          </defs>
          <use xlink:href="#helo" />
        </svg>
      </body>
    </html> 
    ```

2.  但是 test2.svg 有效。

    ```
    <?xml version="1.0"?>
    <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
                  "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
    <svg xmlns="http://www.w3.org/2000/svg"
         xmlns:xlink="http://www.w3.org/1999/xlink"
         width="480" height="360">
      <defs>
        <rect id="helo" x="0" y="0" height="20" width="20" />
      </defs>
      <use xlink:href="#helo" />
    </svg> 
    ```

使 test1.html 工作需要什么？非常感谢：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:34:38.190

这似乎是 Webkit 中的一个错误： [Importing external SVG (with WebKit)](https://stackoverflow.com/questions/5411856/importing-external-svg-with-webkit) [https://bugs.webkit.org/show_bug.cgi?id=12499](https://bugs.webkit.org/show_bug.cgi?id=12499)

如果您要创建一个 SVG 图标，我会将其制成一个单独的 .svg 文件，然后将其添加到带有`object`标签的 HTML 中。无论如何，这会更好，因为如果您对 SVG 文件进行更改，它将更改您网站上的所有实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-30T22:31:38.840

`defs`该错误现在似乎已经修复，但是这里有一个重要的警告，当您尝试在 HTML 页面上重用 SVG 标记中的对象时，这`xmlns:xlink="http://www.w3.org/1999/xlink"`很重要并且必须添加到 SVG 标记中。没有它，href 将无法解决。

# java - 等宽摆动文本

> ID：11588626
> 
> 赞同：3
> 
> 时间：2012-07-21T00:51:01.403
> 
> 标签：java, swing, jlabel, ascii-art, monospace

我编写了一个程序，它可以拍摄一张照片并创建一个 ASCII 表示（ASCII 艺术）。起初，我将 ASCII 字符串写入控制台，但现在我有一个保存文本的 JLabel。但是，JLabel 输出是不规则的，并且不像控制台输出那样均匀。我尝试使用等宽字体（Droid Sans Mono）作为 JLabel 中的字体，因为它是我用于控制台输出的字体，但输出仍然不规则。有没有更好的方法在 Swing/JLabel 中指定等宽字体？

这是我用来创建 JLabel 的方法：

```
public JLabel formatLabel(){
    String l = "<html>";
    for(int j = 0; j < height; j+=patchSize){
    for(int k = 0; k < width; k+=patchSize){
        l+=imageArray.get(j).get(k);
    }
    l+="<br>";
    }
    l+="</html>";
    return new JLabel(l);
} 
```

我用来指定字体的行：

```
label.setFont(new Font("Droid Sans Mono", Font.PLAIN, 6)); 
```

编辑：我将 JLabel 更改为 JTextArea 并且效果更好。唯一的问题是即使是很小的字体，框架通常也在屏幕之外。但是我有一种方法可以改变要采样的像素数，这会使输出更小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T01:10:26.747

您可以使用 html 字体标签来指定文本的字体。

> 通过在标签的文本中指定 HTML 代码，您可以赋予标签多种特征，例如多行、多种字体或多种颜色。如果标签只使用一种颜色或字体，则可以改用 setForeground 或 setFont 方法来避免 HTML 处理的开销。

```
public JLabel formatLabel(){
String l = "<html><font face=\"verdana\" color=\"green\" size=\"12\">";
for(int j = 0; j < height; j+=patchSize){
for(int k = 0; k < width; k+=patchSize){
    l+=imageArray.get(j).get(k);
}
l+="<br>";
}
l+="</html>";
return new JLabel(l); 
```

}

# html - 带有主滚动条的 div 滚动

> ID：11588628
> 
> 赞同：3
> 
> 时间：2012-07-21T00:52:15.463
> 
> 标签：html, css

我目前正在处理的网页只有一个设置为固定大小的主要内容 div。我想使用浏览器窗口滚动条而不是“in div”滚动条使其可滚动。

内容 div 大小为宽度：1076px，高度：475px

基本上我所做的是我在浮动 div 中有一个边缘褪色图像实际上在我的内容 div 上，所以如果我要使用 div 内的滚动条，我将无法选择它或单击它，因为浮动分区。所以我正在寻找一些帮助来让滚动条与我的布局一起使用。

我一直在尝试让它为我的页面工作，但我不知道如何去做，尤其是我的布局。这是我的页面的测试链接：

```
http://184.66.76.75/gxwd_v2/ 
```

所以我正在寻找的是使用浏览器中的主滚动条来滚动具有固定大小的“maincontent”div。因此，当内容大于固定大小时，您可以向下滚动内容。使用我的布局，如果我要在 div 中使用 div 滚动条。你不能滚动，因为 div 不是“活动的”。不仅如此，由于我的 content_overlap div，您可以选择该 div，它浮动在内容框上。

CSS 文件：

```
body {
background-color: #000000;
background-image: url(images/background.png);
background-repeat: no-repeat;
background-position: center;
margin: 0px auto;
padding: 0px;
color: #000000;
overflow: hidden;
}

/* ~~ this fixed width container surrounds all other elements ~~ */
.container {
width: 1076px;
height: 530px;
margin: 220px auto; /* the auto value on the sides, coupled with the width, centers the layout */
}

/* ~~ This is the layout information. ~~ */
.menu {
width: 800px;
margin-left: 13%;
margin-right: 13%;
text-align: center;
}
.content {
padding: 0px 0px;
}
.content_overlap {
width: 1079px;
height: 504px;
background-image: url(images/fade.png);
background-position: top;
background-repeat: no-repeat;
position: absolute;
top: 252px;
left: 50%;
margin-left: -538px;
}
.maincontent {
position: relative;
top: 20px;
max-width: 1076px !important;
max-height: 460px !important;
overflow: auto;
padding: 0px 0px 0px 0px;
} 
```

PHP 文件：

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>GuberX Web Development &amp; Design</title>
<link rel="stylesheet" type="text/css" href="oneColFixCtr.css">
<link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="mobile.css">
<link rel="stylesheet" media="only screen and (-webkit-min-device-pixel-ratio: 2)" type="text/css" href="iphone4s.css" />
<link rel="stylesheet" media="only screen and (min-device-width: 481px)" href="desktop.css" type="text/css">
<meta name="viewport" content="initial-scale=0.5">
</head>

<body>

<div class="container">
  <div class="content">
<div class="menu"><img src="images/menu/home-1.png"><img src="images/menu/spacer.png"><img src="images/menu/portfolio-1.png"><img src="images/menu/spacer.png"><img src="images/menu/services-1.png"><img src="images/menu/spacer.png"><img src="images/menu/contact-1.png"></div>
    <div class="maincontent">
        Test Possition of Text and whatnot1<br />
        Test Possition of Text and whatnot2<br />
        Test Possition of Text and whatnot3<br />
        Test Possition of Text and whatnot4<br />
        Test Possition of Text and whatnot5<br />
        Test Possition of Text and whatnot6<br />
        Test Possition of Text and whatnot7<br />
        Test Possition of Text and whatnot8<br />
        Test Possition of Text and whatnot9<br />
        Test Possition of Text and whatnot10<br />
        Test Possition of Text and whatnot11<br />
        Test Possition of Text and whatnot12<br />
        Test Possition of Text and whatnot13<br />
        Test Possition of Text and whatnot14<br />
        Test Possition of Text and whatnot15<br />
        Test Possition of Text and whatnot16<br />
        Test Possition of Text and whatnot17<br />
        Test Possition of Text and whatnot18<br />
        Test Possition of Text and whatnot19<br />
        Test Possition of Text and whatnot20<br />
        Test Possition of Text and whatnot21<br />
        Test Possition of Text and whatnot22<br />
        Test Possition of Text and whatnot23<br />
        Test Possition of Text and whatnot24<br />
        Test Possition of Text and whatnot25<br />
        Test Possition of Text and whatnot26<br />
        Test Possition of Text and whatnot27<br />
        Test Possition of Text and whatnot28<br />
        Test Possition of Text and whatnot29<br />
        Test Possition of Text and whatnot30<br />
    </div>
</div><!-- end .content -->
<div class="content_overlap"></div>  <!-- This div has a background image that has fading edges for the content box --!>
</div><!-- end .container -->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T01:17:42.823

浏览器窗口滚动条是由浏览器“创建”的，因此我认为您无法直接控制滚动条的位置或滚动页面的哪个部分。话虽如此，我认为可以通过滚动整个页面来获得您想要的效果，但只能让它*看起来*好像 div 正在滚动。

这可以通过创建一个“窗口”来完成，如果你愿意的话，用户可以“查看`div`”。我很难解释这个想法，所以这里是代码：

**HTML**

```
<div id="screenTop" class="screen"></div>
<div id="screenLeft" class="screen"></div>
<div id="screenRight" class="screen"></div>
<div id="screenBot" class="screen"></div>

<div id="container">

    <div id="content">
        Test Possition of Text and whatnot1<br />
        Test Possition of Text and whatnot2<br />
        Test Possition of Text and whatnot3<br />
        Test Possition of Text and whatnot4<br />
        Test Possition of Text and whatnot5<br />
        Test Possition of Text and whatnot6<br />
        Test Possition of Text and whatnot7<br />
        Test Possition of Text and whatnot8<br />
        Test Possition of Text and whatnot9<br />
        Test Possition of Text and whatnot10<br />
        Test Possition of Text and whatnot11<br />
        Test Possition of Text and whatnot12<br />
        Test Possition of Text and whatnot13<br />
        Test Possition of Text and whatnot14<br />
        Test Possition of Text and whatnot15<br />
        Test Possition of Text and whatnot16<br />
        Test Possition of Text and whatnot17<br />
        Test Possition of Text and whatnot18<br />
        Test Possition of Text and whatnot19<br />
        Test Possition of Text and whatnot20<br />
        Test Possition of Text and whatnot21<br />
        Test Possition of Text and whatnot22<br />
        Test Possition of Text and whatnot23<br />
        Test Possition of Text and whatnot24<br />
        Test Possition of Text and whatnot25<br />
        Test Possition of Text and whatnot26<br />
        Test Possition of Text and whatnot27<br />
        Test Possition of Text and whatnot28<br />
        Test Possition of Text and whatnot29<br />
        Test Possition of Text and whatnot30<br />
        Test Possition of Text and whatnot31<br />
        Test Possition of Text and whatnot32<br />
        Test Possition of Text and whatnot33<br />
        Test Possition of Text and whatnot34<br />
        Test Possition of Text and whatnot35<br />
        Test Possition of Text and whatnot36<br />
        Test Possition of Text and whatnot37<br />
        Test Possition of Text and whatnot38<br />
        Test Possition of Text and whatnot39<br />
        Test Possition of Text and whatnot40<br />
    </div>

</div> 
```

**CSS**

```
.screen {
    position: fixed;
    background: black;
}
#screenTop, #screenBot {
    height: 100px;
    width: 100%;
}
#screenLeft, #screenRight {
    height: 100%;
    width: 100px;
}
#screenTop { top: 0; }
#screenLeft { left: 0; }
#screenRight { right: 0; }
#screenBot { bottom: 0; }

#content { margin: 100px; } 
```

**[jsFiddle 演示](http://jsfiddle.net/7Ujj6/2/)**

从您提供的链接来看，我认为您可以将这个想法融入您当前的布局中。这样做的缺点是它依赖于`position: fixed`获得你想要的效果。基本上，您可以使用**浏览器滚动条滚动整个页面**，也可以**使用 div 滚动条滚动 div 内容**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T16:15:25.363

此代码用于使用浏览器的主滚动条滚动 body 元素或 div 元素。您可以按切换按钮在它们之间切换。它计算元素的高度超过身体高度并保存最后的滚动位置。适用于 chrome、firefox，即歌剧和 safari。

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="jquery-1.10.2.min.js"></script>
<script type="text/javascript">
    var scOpts = { st:0, bodyst:0, contst:0, rt1:1, rt2:1, bodyhei:0, p:0 };

    $(document).ready(function() {
        $(document).on('scroll', function(e) {
            e.preventDefault();
            scOpts.st = $(document).scrollTop();
            var top = scOpts.st * scOpts.rt2;
            if(scOpts.p == 1)   $('#sc').scrollTop(top);
        });
    });

function switchContainer() {
    if(scOpts.p == 0) {
        var wnhei = $(window).height();
        var schei = $('#sc').height();
        scOpts.rt1 = document.getElementById('sc').scrollHeight / schei;
        scOpts.rt2 = schei / wnhei; 

        var bh = (wnhei * scOpts.rt1);
        scOpts.bodyhei = $('body').height();
        scOpts.bodyst = scOpts.st;

        $('#scont').css({ position:'fixed', overflow:'hidden' });
        $('body').innerHeight(bh);
        $('#scont').css('top', (scOpts.st * -1)/* + 50*/); // padding-top of body element
        window.scrollTo(0, scOpts.contst);
    } else {
        scOpts.contst = scOpts.st;

        $('#scont').css({ position:'static', overflow:'visible' });
        $('body').height(scOpts.bodyhei);
        window.scrollTo(0, scOpts.bodyst);
    }
    scOpts.p = (scOpts.p+1)%2;
}
</script>
<style>

html { margin:0; padding:0; }
body { margin:0; padding:0; overflow-y:scroll; }
#scont { height:100%; margin:0 auto; left:0px; right:0px; }

</style>
</head>
<body>

<div id="sc" style="position:fixed;left:10px; top:10px; width:300px;height:200px;overflow:hidden;border:1px solid #e1e2e3;background-color:#ffffff;">
1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7<br>
8<br>
9<br>
10<br>
11<br>
12<br>
13<br>
14<br>
15<br>
</div>
<div id="scont">
<div style="height:750px;padding-top:350px;margin-left:30px;background-color:#fff000;">abcdefg</div>
</div>
<input type="button" value="Switch" onclick="switchContainer();" style="position:fixed;top:250px;">
</body>
</html> 
```

# python - 将 hdf5 文件作为二进制 blob / 字符串传递给 h5py？

> ID：11588630
> 
> 赞同：5
> 
> 时间：2012-07-21T00:52:19.993
> 
> 标签：python, hdf5, h5py

如何绕过 h5py 中的磁盘 I/O？目前我必须做这样的事情：

```
msg = socket.recv()
fp = open("tmp.hdf5", 'wb')
fp.write(msg)
fp.close()
f = h5py.File('tmp.hdf5', 'r')

... # alter the file

fp = open("tmp.hdf5", 'rb')
msg = fp.read()
msg = f.toString()
socket.send(data) 
```

我想做这样的事情：

```
msg = socket.recv()
f = h5py.File(msg, driver='core')
... # alter the file
msg = f.toString()
socket.send(msg) 
```

我的问题是速度——磁盘 I/O 是一个太大的瓶颈。是否有一种快速简便的方法来创建 h5py 文件对象字符串，然后将文件提取为字符串？如果涉及到它，我愿意选择像 Cython 这样的东西......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-08-26T23:40:21.090

> 如何绕过 h5py 中的磁盘 I/O？

这是一个工作示例：

```
"""HDF5 in memory file reading example."""

try:
    import contextlib
    import os
    import tempfile

    import h5py

    hdf5_data = (
        b'\x89HDF\r\n\x1a\n\x00\x00\x00\x00\x00\x08\x08\x00\x04\x00\x10\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xff\xff\xff\xff\xff'
        b'\xff\xff\xff|\x05\x00\x00\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff'
        b'\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00`\x00\x00\x00\x00\x00\x00'
        b'\x00\x01\x00\x00\x00\x00\x00\x00\x00\x88\x00\x00\x00\x00\x00\x00\x00'
        b'\xa8\x02\x00\x00\x00\x00\x00\x00\x01\x00\x01\x00\x01\x00\x00\x00\x18'
        b'\x00\x00\x00\x00\x00\x00\x00\x11\x00\x10\x00\x00\x00\x00\x00\x88\x00'
        b'\x00\x00\x00\x00\x00\x00\xa8\x02\x00\x00\x00\x00\x00\x00TREE\x00\x00'
        b'\x01\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'
        b'\xff\x00\x00\x00\x00\x00\x00\x00\x000\x04\x00\x00\x00\x00\x00\x00'
        b'\x08\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00HEAP\x00\x00\x00\x00X'
        b'\x00\x00\x00\x00\x00\x00\x00\x10\x00\x00\x00\x00\x00\x00\x00\xc8\x02'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00test\x00\x00'
        b'\x00\x00\x01\x00\x00\x00\x00\x00\x00\x00H\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x01\x00\x06\x00\x01\x00\x00\x00\x00\x01\x00'
        b'\x00\x00\x00\x00\x00\x01\x00(\x00\x00\x00\x00\x00\x01\x02\x01\x00'
        b'\x00\x00\x00\x00\x01\x00\x00\x00\x00\x00\x00\x00\x01\x00\x00\x00\x00'
        b'\x00\x00\x00\x01\x00\x00\x00\x00\x00\x00\x00\x01\x00\x00\x00\x00\x00'
        b'\x00\x00\x03\x00\x10\x00\x01\x00\x00\x00\x10\x08\x00\x00\x04\x00\x00'
        b'\x00\x00\x00 \x00\x00\x00\x00\x00\x05\x00\x08\x00\x01\x00\x00\x00'
        b'\x02\x02\x02\x01\x00\x00\x00\x00\x08\x00\x18\x00\x01\x00\x00\x00\x03'
        b'\x01x\x05\x00\x00\x00\x00\x00\x00\x04\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x12\x00\x08\x00\x00\x00\x00\x00\x01\x00\x00'
        b'\x00\xed\xf3\xa1Y\x00\x00p\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00SNOD\x01\x00\x01\x00\x08\x00\x00\x00\x00\x00\x00'
        b'\x00 \x03\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        b'\x00\x00\x00\x00\x00\x00\x0090\x00\x00'
    )

    file_access_property_list = h5py.h5p.create(h5py.h5p.FILE_ACCESS)
    file_access_property_list.set_fapl_core(backing_store=False)
    file_access_property_list.set_file_image(hdf5_data)

    file_id_args = {
        'fapl': file_access_property_list,
        'flags': h5py.h5f.ACC_RDONLY,
        'name': next(tempfile._get_candidate_names()).encode(),
    }

    h5_file_args = {'backing_store': False, 'driver': 'core', 'mode': 'r'}

    with contextlib.closing(h5py.h5f.open(**file_id_args)) as file_id:
        with h5py.File(file_id, **h5_file_args) as h5_file:
            assert h5_file['test'][0] == 12345

    assert not os.path.exists(file_id_args['name'])

except:
    print('Something went wrong!')
    raise

else:
    print('It works!! You can read HDF5 in memory!') 
```

这似乎是一个 hack，但这是我在`h5py`Github 周围挖掘时发现的。

从 中可以看出`assert not os.path.exists(file_id_args['name'])`，虽然我传递了一个文件名（文件系统中不应该存在），但实际上并没有创建文件。

看：

*   [https://github.com/h5py/h5py/blob/c2ad0b91f074b5b62d5c10b3970d39ae55b8ec1f/h5py/h5p.pyx#L1171](https://github.com/h5py/h5py/blob/c2ad0b91f074b5b62d5c10b3970d39ae55b8ec1f/h5py/h5p.pyx#L1171)
*   [https://github.com/h5py/h5py/pull/680#issue-135939862](https://github.com/h5py/h5py/pull/680#issue-135939862)
*   [http://docs.h5py.org/en/latest/high/file.html#file-driver](http://docs.h5py.org/en/latest/high/file.html#file-driver)

请如果有人知道一种不那么老套的方法或知道如何简化我的代码，请编辑此回复或发表评论。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T17:18:36.160

我很确定这使用 Python 是不可能的，因为 h5py 只是 hdf5 c 库的包装器。对 HDF5 数据的每次访问迟早都会在 HDF5 c 库调用中结束。

您也许可以在操作系统级别解决这个问题。如果您有足够的空闲 RAM，您可以将数据文件保存在[RAM 驱动器上。](http://en.wikipedia.org/wiki/RAM_drive)[在 Linux 上，通常使用tmpfs](http://en.wikipedia.org/wiki/Tmpfs)创建 RAM 驱动器。

# php - 一个数组元素真的可以引用另一个数组的元素吗？

> ID：11588632
> 
> 赞同：0
> 
> 时间：2012-07-21T00:52:24.830
> 
> 标签：php, reference

喜欢：

```
$arr1['X'] = 5;
$arr2['Y'] = &$arr1['X'];
$arr1['X'] = 7;

print $arr2['Y']; // prints 7 
```

我试过这个，我没有看到任何内存使用减少（我的数组有大约 1000 个条目），所以我猜 PHP 会克隆数组或其他什么？所以从技术上讲，它并不是真正的参考，是吗？

我的数组有子数组（key=>value 对）而不是数字。我注意到，如果我让它们成为对象，内存使用量会更低（少约 2MB）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T01:57:36.203

如果您发出：

```
$arr2 = &$arr1; 
```

您引用整个数组，它应该消耗更少的内存。例如，您可以使用它来测量它`XDEBUG`，我认为这就是您正在使用的。

# android - 如何将铃声添加到 RingtoneManager？

> ID：11588633
> 
> 赞同：1
> 
> 时间：2012-07-21T00:52:26.173
> 
> 标签：android

我希望能够添加铃声文件，或者甚至是 RingtoneManager 的整个文件夹路径，这样当我调用 RINGTONE_PICKER 操作活动时，它的光标将不仅仅包含默认铃声。

这听起来像是一个简单的请求，但 RingtoneManager 文档中没有明显的方法（除非我是盲人），而且我在这里找不到明显相似的问题。

我已经尝试将铃声文件（.ogg）直接添加到模拟器中的 /system/media/ringtones/ 文件夹中（我不打算让我的物理手机生根），但模拟器中的管理器仍然没有列出它们。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T00:21:04.337

所以在挖掘了一下之后，我了解到在使用 RINGTONE_PICKER 时：

如果您将 RingtoneManager 类型设置为 TYPE_RINGTONE

```
Intent intent = new Intent( RingtoneManager.ACTION_RINGTONE_PICKER);
intent.putExtra( RingtoneManager.EXTRA_RINGTONE_TYPE,RingtoneManager.TYPE_RINGTONE);
intent.putExtra( RingtoneManager.EXTRA_RINGTONE_TITLE, "Select Tone");
startActivityForResult( intent, 0); 
```

然后铃声选择器会将位于文件系统中名为“铃声”的任何文件夹中的任何可行的音频文件（mp3、ogg 等）添加到它的可选择光标。

如果 RingtonManager 类型设置为 TYPE_NOTIFICATION

```
intent.putExtra(RingtoneManager.EXTRA_RINGTONE_TYPE,RingtoneManager.TYPE_NOTIFICATION); 
```

然后它将添加位于任何名为“通知”的文件夹中的任何可行的音频文件

最后，如果您将类型设置为 TYPE_ALL，它将显示名为“铃声”或“通知”的文件夹中的所有音频文件。

我希望这能让其他任何人都清楚！

# android - 使用意图时继续进行活动。

> ID：11588638
> 
> 赞同：0
> 
> 时间：2012-07-21T00:52:39.460
> 
> 标签：android

我制作了一个故事情节，它会自动加载第二个活动，当我按下跳过按钮时，它会跳转到正确的活动。然后，突然，它回到故事情节并继续故事情节活动直到故事结束。这是我的代码，请修改或检查。非常感谢。

```
public class pgone extends Activity {

    private long splashDelay = 4000; 

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.pgone);

        TimerTask task = new TimerTask()
        {

            public void run() {

                Intent mainIntent = new Intent().setClass(pgone.this, pgtwo.class);
                startActivity(mainIntent);
                finish();
            }

        };

        Timer timer = new Timer();
        timer.schedule(task, splashDelay);

Button skipButton = (Button)findViewById(R.id.skip);
skipButton.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
        Intent skipIntent = new Intent(pgone.this,gamelevel.class);
        startActivity(skipIntent);
        finish();

    }
});
    }
@override
public boolean onKeyDown(int keyCode, KeyEvent event) {
     if (keyCode == KeyEvent.KEYCODE_BACK)
        {
            moveTaskToBack(true);
            finish();
            return true; // return
        }

        return false;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T04:31:18.900

调用新活动后，您还没有停止计时器。TimerTask 是后台进程，所以它一直在后台运行，你必须取消它。

尝试在您的跳过按钮侦听器中使用此方法。

```
Timer timer = new Timer();
timer.schedule(task, splashDelay);

Button skipButton = (Button)findViewById(R.id.skip);
skipButton.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
        Intent skipIntent = new Intent(pgone.this,gamelevel.class);
        startActivity(skipIntent);
        finish();
        timer.cancel();
        timer.purge();
    }
}); 
```

# coronasdk - Corona SDK 中不需要的精灵旋转

> ID：11588642
> 
> 赞同：0
> 
> 时间：2012-07-21T00:53:31.690
> 
> 标签：coronasdk

我正在做一个柯比式的游戏，我的精灵在飞行过程中旋转以及掉落时遇到了问题。一旦精灵被点击，它会稍微逆时针旋转，然后上升。当它开始下落时，它的顺时针旋转比逆时针旋转更多，并且永远不会重置为其原始角度。**任何**帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T19:29:19.850

尝试设置

```
sprite_object.isFixedRotation = true 
```

# jquery - 通过 Ajax 和 Rails 添加 Twitter Bootstrap Popover

> ID：11588645
> 
> 赞同：0
> 
> 时间：2012-07-21T00:54:08.357
> 
> 标签：jquery, ajax, ruby-on-rails-3, twitter-bootstrap, popover

我正在尝试通过带有rails的ajax调用添加一个弹出窗口。我在萤火虫中看到内容加载正常，但弹出框没有加载。

所有其他弹出框都在页面上工作，如果我重新加载页面，弹出框也可以工作......但它在 ajax 调用上不起作用。我错过了什么？

更新.js

```
$("#new-pins").append("<div class='pinimage' data-original-title=''><img src='/images/<%= @changes[0] %>.png' class='pinimage' data-content='hello' data-original-title=''></a></div>") 
```

show.html 弹出框 javascript：

```
<script>
$(function () {
    $('.pinimage').popover({ html : true });
});
</script> 
```

这是 ajax 调用后加载的内容：

```
<div class="pinimage" data-original-title="">
   <img class="pinimage" data-original-title="" data-content="hello" src="/images/card.png">
</div> 
```

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T07:56:18.110

我有一个类似的[问题](https://stackoverflow.com/questions/11604829/ruby-on-rails-twitter-bootstrap-popover-not-working-correctly-after-jquery-updat)，当我意识到我在文档加载时调用 jquery 但我不得不在 .js.erb 文件中再次调用它时，我终于让它工作了。

# php - 构建 Gdata 电子表格查询

> ID：11588652
> 
> 赞同：6
> 
> 时间：2012-07-21T00:55:17.767
> 
> 标签：php, gdata, google-docs-api, gdata-api, google-sheets

我正在尝试构建 Zend_Gdata_Spreadsheets_ListQuery，但我找不到任何参考资料来解释预期的查询语法是什么以及可以执行和不可以执行的查询类型。我能找到的最接近的东西是 [Google Data APIs Client Library (1.41.1)] (https://developers.google.com/gdata/javadoc/com/google/gdata/client/spreadsheet/ ListQuery#ListQuery(java.net.URL))，其中对函数 setSpreadsheetQuery 的描述如下：

> 设置电子表格查询
> 
> public void setSpreadsheetQuery(java.lang.String query) 设置结构化电子表格查询。参数：query - 查询如“name = 'Sonja' and state = 'Georgia'”

如果您要查找列标题为“name”且包含文本“Sonja”的单元格，则此方法工作得很好——仅此而已。我正在寻找包含“Sonja”作为单元格文本一部分的单元格。例如，“name”列中值为“Sonja the Awesome”的单元格与上面的搜索不匹配。name=Sonya* 导致错误，name="Sonya*" 不返回任何结果。

那么，有人知道我在哪里可以找到“结构化电子表格查询”的预期“结构”的概要吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-22T01:09:48.450

您是否尝试过使用正则表达式？此外，请确保转义正则表达式特殊字符。像 \bSonja\b 这样的东西

# html - 为什么某些 MP4 文件不能通过 HTML5 播放？

> ID：11588654
> 
> 赞同：20
> 
> 时间：2012-07-21T00:55:34.553
> 
> 标签：html, video, html5-video

奇怪的是，有些 MP4 文件可以在 HTML5 中播放，而有些则不会。这是一个测试页面[http://psdtucss.com/test/test2.html](http://psdtucss.com/test/test2.html)，在 Chrome 19.0.1084.46 m 中打开。第一个 MP4 播放，但另一个不会。什么原因。代码非常简单：

```
<h3>the first mp4 file can play</h3> 
<p><video width="640" height="264" controls="controls"><source src="1.mp4" type="video/mp4" />Your browser does not support the video tag.</video></p> 
<h3>but the other can't play</h3> 
<p><video width="640" height="264" controls="controls"><source src="2.mp4" type="video/mp4" />Your browser does not support the video tag.</video></p> 
```

我怎样才能解决这个问题？

我尝试了 videojs，但仍然无法播放一些 MP4 文件。测试页面在这里： http: [//psdtucss.com/test/test.html](http://psdtucss.com/test/test.html)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-21T01:04:31.033

mp4 只是*容器*格式。它可能包含许多不同*编解码器*中的视频和音频。播放器（包括浏览器中的播放器）需要支持容器格式和所有使用的编解码器才能正确播放视频。

使用 VideoJS 绝对是一个好主意，它为您处理了许多特定于浏览器的解决方法。

* * *

然而，它并没有解决一个问题：所有浏览器都不支持单一的视频编解码器。（另见[维基百科：HTML5 视频：Browser_support](http://en.wikipedia.org/wiki/HTML5_video#Browser_support)）

实际的解决方案可能是**提供两个版本**：mp4 容器中的 h264 和通常称为 webm（特定 Matroska 容器中的 VP8 视频和 vorbis 音频）的版本。有了这两个，您就可以覆盖所有主要的浏览器。

* * *

对于视频转换/重新编码，有一些可用的工具和服务。我不知道您的操作系统或要求。所以就像一个疯狂的猜测：

我曾经帮助一个朋友在他的小博客上发布*一些*视频的东西是这个使用 ffmpeg进行转换的[shell 脚本。](https://gist.github.com/3154378)它仍然有很大的改进潜力（在所有视频质量、性能和编码方面），但应该足以开始使用。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-21T01:18:14.090

第一个视频使用 h264 编码，除 Firefox 和 Opera 之外的所有软件都支持该编码。第二个视频使用浏览器不支持的 MPEG-4 视频编解码器。唯一广泛支持的视频编解码器是 Theora、H.264 和 VP8。

[MPEG-4 Part 2](http://en.wikipedia.org/wiki/MPEG-4_Part_2)视频编解码器不同于[MPEG-4 Part 14](http://en.wikipedia.org/wiki/MPEG-4_Part_14)容器格式

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-03T16:12:51.607

您的视频 1.mp4 使用 h.264 编码，但视频 2.mp4 不是。获取 MediaInfo 以检查它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-21T00:58:55.000

MP4 支持多种编解码器。有些播放器不支持所有编解码器（有些代码需要许可，或者有些编解码器是在编写浏览器后发布的）。

# android - Android：相机的 startPreview 方法在 stopPreview 后不起作用

> ID：11588659
> 
> 赞同：0
> 
> 时间：2012-07-21T00:58:16.417
> 
> 标签：android, camera, surfaceview, preview

在我的应用程序中，我有一个图像按钮，基本上可以打开和关闭闪光灯 LED。代码第一次运行良好，即第一次单击它打开 LED，第二次单击它关闭它。但是然后没有发生第三次单击。我正在 Nexus S 上对此进行测试。

以下是 ImageButton Click 方法的代码。

```
public void ToggleTorch(){
    final ImageButton tt = (ImageButton)findViewById(R.id.tt);
    tt.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v){
            if (isFlashOn){
                mycam.stopPreview();
                isFlashOn = false;
            } else {
                mycam.startPreview();
                isFlashOn = true;
            }
        }
    });
} 
```

从我的想法来看，它必须对 SurfaceView 做一些事情，因为我认为它在调用 stopPreview 时没有被破坏，但我不确定..

以下是 onCreate 方法的代码。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //Check if Flash Light is Available
    Boolean has_flash = this.getPackageManager().hasSystemFeature(PackageManager.FEATURE_CAMERA_FLASH);
    if(has_flash){
        setContentView(R.layout.activity_main);
        SurfaceView preview = (SurfaceView)findViewById(R.id.pSv);
        SurfaceHolder holder = preview.getHolder();
        holder.addCallback(this);
        holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
        disableSleepMode();
        initFlashLight();
        ToggleTorch();
        screenTorchOn();
    } else {
        setContentView(R.layout.activity_main);
        disableSleepMode();
        screenTorchOn();
    }
} 
```

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:38:46.270

而不是调用停止预览释放相机并使相机实例为空。要重新启动相机，请再次初始化相机。制作两种不同的方法，一种用于初始化相机，另一种用于释放它。这将解决您的问题。

# iphone - 在视图之间切换时，View did load 或 View Finished Loading 不运行？

> ID：11588661
> 
> 赞同：0
> 
> 时间：2012-07-21T00:58:28.327
> 
> 标签：iphone, objective-c, ipad, ios5

我正在使用自定义 Switch 视图控制器，您希望在不同视图之间切换时“视图已加载”功能或“视图已完成加载”功能运行但它们没有。这是我正在使用的：

```
- (IBAction)gotoKeyboardViews:(id)sender
{

YellowViewController *yellowController =
[[YellowViewController alloc]
 initWithNibName:@"YellowViewController"
 bundle:nil];

self.yellowViewController = yellowController;
[yellowController release];
[buttonKeyboard removeFromSuperview];

buttonStart = [UIButton buttonWithType:UIButtonTypeRoundedRect];
buttonStart.frame = CGRectMake(117,413, 103, 37);

[buttonStart setTitle:@"Restart" forState:UIControlStateNormal];
[buttonStart addTarget:self action:@selector(gotoBlueView:) 
         forControlEvents:UIControlEventTouchUpInside];

[self.view addSubview:buttonStart];
[blueViewController.view removeFromSuperview];
[self.view insertSubview:yellowViewController.view atIndex:0];  
} 
```

gotoKeyboardViews 假设将视图从 BlueView 切换到 YellowView ......但我认为我对实现导航栏有点偏离。请不要告诉我使用导航栏，因为我不喜欢它们在设计上的死板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T01:55:45.930

`viewWillAppear`一旦视图再次激活，该方法就会被执行。也许这就是你正在寻找的钩子？

参考：[Apple UIViewController 类参考](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/viewWillAppear%3a)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T01:37:40.840

这些方法仅在加载 nib 文件或覆盖 loadView 时调用。除非实例化新的视图控制器，否则它们不会再次被调用。

# backbone.js - 在 Backbone 视图中选择一个时如何取消选择其他人？

> ID：11588663
> 
> 赞同：0
> 
> 时间：2012-07-21T00:59:26.347
> 
> 标签：backbone.js

这是一个简单的示例，如下所示：

头像有很多，每次只能选择一个头像。

我有一个模型“Avatar”、集合“Avatars”和模型视图“AvatarView”。还有一个名为“AvatarAppView”的视图负责呈现应用视图。

我的实现如下：

When one avatar is selected, click event is trigged in the model's view 'AvatarView', then it will be selected but cannot make other models unselected.

有什么好的解决方案吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T02:14:13.123

骨干视图[`Backbone.Events`](http://backbonejs.org/#Events)混合在一起，因此视图可以产生自己的事件，而其他视图可以监听这些事件。因此，您`AvatarView`可以在选择事件时触发事件：

```
select: function() {
    // Mark this avatar as selected...
    this.trigger('selected', this);
},
unselect: function() {
    // Undo the "mark this avatar as selected" from above.
} 
```

然后`AvatarAppView`可以监听这些事件：

```
initialize: function() {
    _.bindAll(this, 'selected');
    //...
},
render: function() {
    this.kids = [ ];
    this.collection.each(function(m) {
        var v = new AvatarView({ model: m });
        v.on('selected', this.selected);
        this.kids.push(v);
        this.$el.append(v.render().el);
    }, this);
    return this;
} 
```

然后是一个简单的`selected`事件处理程序，`AvatarAppView`用于取消选择其他`AvatarView`s：

```
selected: function(v) {
    _.chain(this.kids).reject(function(k) { return k == v }).invoke('unselect');
} 
```

演示：http: [//jsfiddle.net/ambiguous/thRHK/](http://jsfiddle.net/ambiguous/thRHK/)

# android - 如何在 Android 中发出 AsyncRunner 请求以从 Facebook 获取数据？

> ID：11588664
> 
> 赞同：1
> 
> 时间：2012-07-21T00:59:28.460
> 
> 标签：android, facebook, facebook-graph-api

我正在尝试获得用户的喜欢，这就是我所做的：

```
Facebook facebook = new Facebook(APP_ID);
AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(facebook);
mAsyncRunner.request("https://graph.facebook.com/me/likes", new RequestListener()
{
    @Override
    public void onComplete(String response, Object state) {
       try {
           JSONObject json = Util.parseJson(response);
           final String name = json.getString("data");
       } 
       catch (FacebookError e) {
           Log.w("fb", e.toString());
       } 
       catch (JSONException e) {
           Log.w("fb", e.toString());
       }
    }

    public void on<XXX>Exception( ...)
        ...
} 
```

我期待的响应类似于图形浏览器，其中您有“数据”和“分页”。但是相反，没有任何错误或异常，我得到类似 {"id":"https://graph.facebook/100000234..../likes"} 的响应和 JSONException 找不到 JSONObject["data" ]。这可能是什么原因。

# c# - 以这种方式操作 ModelState 是一种编码错误吗？

> ID：11588665
> 
> 赞同：0
> 
> 时间：2012-07-21T00:59:42.187
> 
> 标签：c#, asp.net-mvc, modelstate

我遇到了一种情况，我想`Html.ValidationSummary()`在我的视图中使用它来显示一般错误消息。也许类似`"There was a problem with the information you entered."`但没有得到每件出错的事情的列表（根据 DataAnnotations）。

*旁注*：我发现人们`if(ViewContext.ViewData.ModelState.IsValid){ ... }`在他们的观点和上述观点中都使用了参考资料`ValidationSummary`。至少可以说，我对这种方法并没有留下深刻的印象。

重要的是，`ModelStateDictionary`仍然包含每个具有验证错误的模型元素的键（以便`Html.EditorFor`等人编写正确的 css 类。）

我最终得到并且似乎有效的是：

```
public static class ModelStateHelpers
{
    public static void Empty(this ModelStateDictionary @this)
    {
        foreach (KeyValuePair<string, ModelState> state in @this)
        {
            if (state.Value.Errors.Any())
            {
                state.Value.Errors.Clear();
                state.Value.Errors.Add(String.Empty);
            }
        }
    }
} 
```

在我的课堂上紧随其后：

```
if (StuffWentWrong) {
    this.ModelState.Empty();
    this.ModelState.AddModelError("", "Something went wrong...");
} 
```

正如预期的那样，`Html.ValidationSummary`它足够聪明，可以`ModelStates`在错误消息为空白的字典中抑制 html 结构；最后我还得到了带有错误验证属性的文本字段，例如`<input class="input-validation-error text-box single-line" data-val="true" data-val-required="The User Name field is required." id="UserName" name="UserName" type="text" value="" />`

这种特殊的解决方案闻起来难闻吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T09:25:24.080

> 我发现人们 `if(ViewContext.ViewData.ModelState.IsValid){ ... }`在他们的观点中使用的参考资料和前面的 ValidationSummary 完全一致。至少可以说，我对这种方法并没有留下深刻的印象。

为什么不？我认为这是一个合理的解决方案。你说你想要一个显示验证摘要的特殊用例，这是一个**视图关注点**。您不必在控制器中操作任何东西或以其他方式*对抗框架*来完成此操作。

至于您当前的解决方案是否使用`static`辅助类+方法，我认为这比`ViewContext.ViewData.ModelState.IsValid`从剃刀检查更糟糕。我评论说您应该下载源代码`ValidationSummary` `HtmlHelper`并考虑对其进行重组以满足您的需求，这可能是您问题的最佳答案。您基本上可以将上述`if`语句封装到 custom`HtmlHelper`中，这是放置视图问题代码的合适位置。

# graph - 如何影响图形项目的布局？

> ID：11588667
> 
> 赞同：20
> 
> 时间：2012-07-21T00:59:57.117
> 
> 标签：graph, graphviz

我正在尝试使用 Graphviz 可视化一个简单的有限状态机图。Graphviz 创建的布局并不完全符合我的喜好。我期待一个更紧凑的结果，边缘更短。

到目前为止，我已经尝试过使用组并改变边的权重，但运气不佳。我不清楚为什么 Graphviz 以它的方式绘制图形，以及如何根据我的喜好调整它的算法。我可以设置任何参数来实现这一目标吗？或者我应该使用另一个命令而不是`dot`？我试过`neato`了，但结果看起来完全一团糟，我真的不明白我在做什么......

这是我迄今为止最好的结果：

![有限状态机，迄今为止最好的结果](../Images/9acbe3600b0a09bfd5546ffdfe05d958.png)

尝试可视化比这更好的布局，我认为如果红色框的对齐方式不同，图形会看起来更好，更紧凑，例如如图中的箭头所示：

![有限状态机，想象更好的结果](../Images/f207c406894b974edc09885f3b412daf.png)

我用来`dot`创建图表，他的源代码如下：

```
 1 digraph JobStateDiagram
  2 {
  3   rankdir=LR;
  4   size="8,5";
  5 
  6   node  [style="rounded,filled,bold", shape=box, fixedsize=true, width=1.3, fontname="Arial"];
  7   Created   [fillcolor=black, shape=circle, label="", width=0.25];
  8   Destroyed [fillcolor=black, shape=doublecircle, label="", width=0.3];
  9   Empty     [fillcolor="#a0ffa0"];
 10   Announced [fillcolor="#a0ffa0"];
 11   Assigned  [fillcolor="#a0ffa0"];
 12   Working   [fillcolor="#a0ffa0"];
 13   Ready     [fillcolor="#a0ffa0"];
 14   TimedOut  [fillcolor="#ffa0a0"];
 15   Failed    [fillcolor="#ffa0a0"];
 16 
 17   {
 18     rank=source; Created Destroyed;
 19   }
 20 
 21   edge  [style=bold, fontname="Arial" weight=2]
 22   Empty     -> Announced [ label="announce"   ];
 23   Announced -> Assigned  [ label="assign"     ];
 24   Assigned  -> Working   [ label="start"      ];
 25   Working   -> Ready     [ label="finish"     ];
 26   Ready     -> Empty     [ label="revoke"     ];
 27 
 28   edge  [fontname="Arial" color="#aaaaaa" weight=1]
 29   Announced -> TimedOut  [ label="timeout"    ];
 30   Assigned  -> TimedOut  [ label="timeout"    ];
 31   Working   -> TimedOut  [ label="timeout"    ];
 32   Working   -> Failed    [ label="error"      ];
 33   TimedOut  -> Announced [ label="announce"   ];
 34   TimedOut  -> Empty     [ label="revoke"     ];
 35   Failed    -> Announced [ label="announce"   ];
 36   Failed    -> Empty     [ label="revoke"     ];
 37 
 38   edge  [style=bold, fontname="Arial" weight=1]
 39   Created   -> Empty     [ label="initialize" ];
 40   Empty     -> Destroyed [ label="finalize"   ];
 41   Announced -> Empty     [ label="revoke"     ];
 42   Assigned  -> Empty     [ label="revoke"     ];
 43   Working   -> Empty     [ label="revoke"     ];
 44 } 
```

另外，如果我在上面的 Graphviz 文件中做了任何奇怪的事情，任何人都请告诉我——感谢任何反馈。

* * *

更新：

更多的实验和尝试一些建议，如用户 marapet 给出的端口，增加了我的困惑......例如，在下图中，为什么`dot`选择为 and 绘制这些奇怪的弯路，`Working->Failed`而`Failed->Announced`不是直线？

![具有奇怪长边的图](../Images/8718c13af60218286e1b0a2e22d84dd0.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-21T16:48:40.447

对我来说，你的输出看起来不错。`TimedOut`并且`Failed`当然一直向右，因为从`Working`他们那里有一条边。这就是`dot`最好的方法，虽然您可以进行一些调整来调整 graphviz 布局，但我认为如果您想创建特定的图形布局并控制一切，最好使用其他工具。

话虽如此，我确实用graphviz快速尝试了一下。我更改了一些线以创建一条带有所有绿色节点的直线，并按照您的问题中的指示对齐红色节点。我还添加了边缘集中器 - 结果对我来说看起来并不好：

```
digraph JobStateDiagram
{
  rankdir=LR;
  size="8,5";
  concentrate=true;

  node  [style="rounded,filled,bold", shape=box, fixedsize=true, width=1.3, fontname="Arial"];
  Created   [fillcolor=black, shape=circle, label="", width=0.25];
  Destroyed [fillcolor=black, shape=doublecircle, label="", width=0.3];
  Empty     [fillcolor="#a0ffa0"];
  Failed    [fillcolor="#ffa0a0"];
  Announced [fillcolor="#a0ffa0"];
  Assigned  [fillcolor="#a0ffa0"];
  Working   [fillcolor="#a0ffa0"];
  Ready     [fillcolor="#a0ffa0"];
  TimedOut  [fillcolor="#ffa0a0"];

  {
    rank=source; Created; Destroyed;
  }
  {
    rank=same;Announced;Failed;
  }
  {
    rank=same;Assigned;TimedOut;
  }

  edge  [style=bold, fontname="Arial", weight=100]
  Empty     -> Announced [ label="announce"   ];
  Announced -> Assigned  [ label="assign"     ];
  Assigned  -> Working   [ label="start"      ];
  Working   -> Ready     [ label="finish"     ];
  Ready     -> Empty     [ label="revoke", weight=1     ];

  edge  [color="#aaaaaa", weight=1]
  Announced -> TimedOut  [ label="timeout"    ];
  Assigned  -> TimedOut  [ label="timeout"    ];
  Working   -> TimedOut  [ label="timeout"    ];
  Working   -> Failed    [ label="error"      ];
  TimedOut  -> Announced [ label="announce"   ];
  TimedOut  -> Empty     [ label="revoke"     ];
  Failed    -> Announced [ label="announce"   ];
  Failed    -> Empty     [ label="revoke"     ];

  Created   -> Empty     [ label="initialize" ];
  Empty     -> Destroyed [ label="finalize"   ];
  Announced -> Empty     [ label="revoke"     ];
  Assigned  -> Empty     [ label="revoke"     ];
  Working   -> Empty     [ label="revoke"     ];
} 
```

![图形输出](../Images/bb8ae6e4c710e0c1fe7b60c55f7f675b.png)

您还可以通过使用端口来改进以控制边缘的开始和结束位置。

至于你关于点文件中奇怪事物的问题：除了**行号**（这最终让我可以很好地使用我的文本编辑器的*列模式*）和**对齐**，你的文件对我来说看起来不错。我会尽可能地以类似方式构建我的点文件（图形属性、节点列表、分组、边）。请注意，节点首次出现的顺序可能会对最终布局产生影响。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-10-29T11:07:29.053

虽然这是一个非常古老的问题，但我有类似的问题，并想分享我的结果。除了“weight”、“rank=same”的技巧，我发现这些方法可以用来调整布局结果：

*   目录=返回
*   添加更多边或节点并设置 style=invis

当涉及到问题中的这个特定图表时，实际上 rank=same 和 weight 将完成主要工作，而 style=invis 可以进行一些微调。所以通过添加这些行

```
 {
  rank=same;Announced;Failed;
 }
 {
  rank=same;Assigned;TimedOut;
 } 
```

到文件并添加`weight=1`到“准备清空”边缘，并使用一些不可见的边缘来微调我得到的空间：

[![GraphViz 布局结果](../Images/c89d84e2d093794fafdb6f00982662b9.png)](https://i.stack.imgur.com/z3bL9.png)

完整的图点源：

```
digraph JobStateDiagram
{
  rankdir=LR;
  size="8,5";

  node  [style="rounded,filled,bold", shape=box, fixedsize=true, width=1.3, fontname="Arial"];
  Created   [fillcolor=black, shape=circle, label="", width=0.25];
  Destroyed [fillcolor=black, shape=doublecircle, label="", width=0.3];
  Empty     [fillcolor="#a0ffa0"];
  Announced [fillcolor="#a0ffa0"];
  Assigned  [fillcolor="#a0ffa0"];
  Working   [fillcolor="#a0ffa0"];
  Ready     [fillcolor="#a0ffa0"];
  TimedOut  [fillcolor="#ffa0a0"];
  Failed    [fillcolor="#ffa0a0"];

  {
    rank=source; Created Destroyed;
  }
  {
    rank=same;Announced;Failed; #change here
  }
  {
    rank=same;Assigned;TimedOut; #change here
  }

  edge  [style=bold, fontname="Arial" weight=20] #change here
  Empty     -> Announced [ label="announce"   ];
  Announced -> Assigned  [ label="assign"     ];
  Assigned  -> Working   [ label="start"      ];
  Working   -> Ready     [ label="finish"     ];
  Ready     -> Empty     [ label="revoke" weight=1 ]; #change here

  edge  [fontname="Arial" color="#aaaaaa" weight=2] #change here
  Announced -> TimedOut  [ label="timeout"    ];
  Assigned  -> TimedOut  [ label="timeout" weight=1]; #change here
  Working   -> TimedOut  [ label="timeout"    ];
  Working   -> Failed    [ label="error"      ];
  TimedOut  -> Announced [ label="announce"   ];
  TimedOut  -> Empty     [ label="revoke"     ];
  Failed    -> Announced [ label="announce"   ];
  Failed    -> Empty     [ label="revoke"     ];

  edge  [style=bold, fontname="Arial" weight=1]
  Created   -> Empty     [ label="initialize" ];
  Empty     -> Destroyed [ label="finalize"   ];
  Announced -> Empty     [ label="revoke"     ];
  Assigned  -> Empty     [ label="revoke"     ];
  Working   -> Empty     [ label="revoke"     ];

  Assigned  -> Working   [ label="start"  style=invis     ]; #change here 
  Assigned  -> Working   [ label="start"  style=invis     ]; #change here 
} 
```

更新：与其将 'Failed' 和 'Announced' 放在同一等级，将 'Failed'、'Assigned' 和 'TimedOut' 放在同一等级可能会产生更好的结果，如下所示，IMO 更好地说明了 Failed 之间的相似性和差异和超时。（您必须删除 invis 边缘才能获得下图）

[![在此处输入图像描述](../Images/c6ac5b366da9a1ef5253ab5513dcb342.png)](https://i.stack.imgur.com/ctolo.png)

# jquery - jquery + 检查具有类和自定义数据属性的 div

> ID：11588670
> 
> 赞同：0
> 
> 时间：2012-07-21T01:00:36.620
> 
> 标签：jquery, html

我需要能够检查是否有一个带有 class='active' 和自定义属性 data-popup='true' 的 div - 例如：下面的第二个。

![在此处输入图像描述](../Images/a3c48079907b5e2eb51d396161b9cb70.png)

如何检查具有这两个特征的 div 是否存在？

我知道它不正确，但我一直在使用以下代码：

```
 if($('div#mainContainer div.active div[data-unique='+urlUnique+']').length > 0) { 
```

从长远来看，会有很多 DIV，所以它需要查找是否存在具有此类和数据属性的 DIV。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T01:05:15.560

这是您想要的选择器：

```
$('#mainContainer div.active[data-popup=true]'); 
```

# android - 使用 Android NDK 时出现 Eclipse 错误

> ID：11588673
> 
> 赞同：2
> 
> 时间：2012-07-21T01:01:13.867
> 
> 标签：android, android-ndk

试图为 android 创建一个新的原生项目，但遇到了奇怪的问题。我创建了一个新项目并选择了“Android 工具 > 添加本机支持”，然后当我按下 Run eclipse 创建它后抱怨一些问题，包括 jni.h。我检查了 ADT 是否正确设置了 C/C++ 路径和符号，它看起来很好：

![C/C++ 路径和符号](../Images/fed61bee0719fec1e2488f5b590586b3.png)

但是，我在 Eclipse 的 cpp 代码中出现编译器错误。但奇怪的是，当我通过终端在项目上运行 ndk-build 时，它工作正常，见下文：

![从终端运行 ndk-build](../Images/18d8f9aee0f32706b7abe72ff31c7888.png)

![从 Eclipse 运行项目](../Images/1550d7320ed6533768347c7b80e72d77.png)

这也是代码（jnitest.cpp）：

```
#include <jni.h>

JNIEXPORT jstring JNICALL Java_com_brianrojas_jnitest_MainActivity_echo
    (JNIEnv *env, jobject object, jstring input)
{
    return input;
} 
```

所以看起来库可以构建好，但 Eclipse 只是出于某种原因不喜欢它，并且不会在我的手机上安装该应用程序。任何想法我做错了什么？下面还有我的 android eclipse 插件信息，以防万一。

![Eclipse 的 Android 插件](../Images/215e882fe803c1f9b784170926a078b5.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T05:33:26.753

我知道可能出了什么问题：`Eclipse Juno`。

只需下载 Eclipse Indigo 就可以了。这是一个已知的错误。显然，如果您在 Windows 上开发，它也可能发生：

> 已知的问题
> 
> 1.  Eclipse 不会自动找到 Windows 上所有 NDK 标头的包含路径。此问题将在下一次更新 (20.0.1) 发布时修复。
> 2.  Eclipse 不会自动找到 CDT 8.1.0 (Juno) 的包含路径。此问题在错误 33788 中进行了跟踪。

[http://tools.android.com/recent/usingthendkplugin](http://tools.android.com/recent/usingthendkplugin)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T10:40:23.203

我有完全相同的问题。

（删除了混淆的建议）

编辑：我刚刚添加了新的包含目录，现在我对使其工作的方式更有信心：在修改项目属性/C/C++ 通用/路径和符号中的包含目录后，Eclipse 会显示一个对话框以提供给索引新的包含文件。接受并重新索引包含文件很重要。

# mongodb - 如何将属性用作 MongoEngine 的字段？

> ID：11588674
> 
> 赞同：1
> 
> 时间：2012-07-21T01:01:15.543
> 
> 标签：mongodb, dynamic, field, pymongo, mongoengine

本质上，我希望能够通过在我的 MongoEngine 模型上使用属性装饰器来定义动态字段。像这样的东西：

```
class Model(Document):
    foo = StringField()

    @property
    def bar(self):
        return 'baz'

m = Model(foo='abc'); m.save() 
```

然后我希望能够通过属性进行查询。像这样的东西：

```
Model.objects(bar='baz') 
```

我想也许 DynamicDocument 可能会提供这种设施。但这似乎不起作用。有什么建议么？自定义属性装饰器可以处理这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T15:50:00.617

属性不像字段一样，没有数据存储在数据库中，因此您无法查询数据库以查找匹配项。

# c# - 用于转换泛型类型的规避类型系统

> ID：11588675
> 
> 赞同：1
> 
> 时间：2012-07-21T01:01:48.350
> 
> 标签：c#, generics, casting

C# 不会让我将类型`T`转换为我可以证明的类型`T`。我怎样才能`T`转换为那种类型？

```
public static T _cast<T> (object o) {
    if (typeof(T) == typeof(string)) {
        return (T) o.ToString(); // Compiler YELLS!
    }
    throw new InvalidCastException("missing compiler generated case");
} 
```

我正在编写一个生成从 C++ 到 C# 的代码的程序。`_cast`我想用这个操作代替 C++ 的`operator T ()`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T01:09:06.713

通常我不会回答我自己的问题，但我只是想出了解决方案：在转换为`object`之前向下转换为`T`

```
public static T _cast<T> (object o) {
    if (typeof(T) == typeof(string)) {
        return (T)(object) o.ToString();
    }
    throw new InvalidCastException("missing compiler generated case");

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T02:37:02.333

我认为比你的双重演员更优雅的解决方案是使用`as`关键字。像这样：

```
return o.ToString() as T; 
```

我没有尝试过，但编译器不应该有这个问题，因为当它不能将字符串转换为 T 时它会返回 null，在你的条件下它当然不会这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T01:04:42.953

没有从 String 到其他所有类型的转换。编译器告诉您它不知道如何执行您所要求的操作。如果您提供有关您正在尝试做的事情的更多详细信息，也许有人可以提供一些建议。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T01:34:45.217

转换和解析之间存在差异。我认为您想要的是尝试解析字符串

```
int stringToNum = (int)"123";  //will not compile

int stringToNum2 = int.Parse("123"); 
```

# php - 从网络上抓取信息

> ID：11588683
> 
> 赞同：0
> 
> 时间：2012-07-21T01:04:30.150
> 
> 标签：php, web-scraping, simple-html-dom

如何从此 html 页面获取信息（http://linkWeb.com、Titles 和[http://link.pdf ）？](http://link.pdf)

```
<div class="title-download">
    <div id="01divTitle" class="title">
        <h3>
            <a id="01Title" onmousedown="" href="http://linkWeb.com">Titles</a>
            <span id="01LbCitation" class="citation">(<a id="01Citation" href="http://citation.com">Citations</a>)</span></h3>
    </div>
    <div id="01downloadDiv" class="download">
        <a id="01_downloadIcon" title="http://link.pdf" onmousedown="" target=""><img id="ctl01_icon" class="small-icon";" /></a>
    </div>
</div> 
```

我已经尝试过，但它只返回标题。我以前不知道 simple_tml_dom 。请帮我。谢谢你 ：）

```
<?php

include 'simple_html_dom.php';
set_time_limit(0);

$url  ='http://libra.msra.cn/Search?query=data%20mining&s=0';
$html = file_get_html($url) or die ('invalid url');
foreach($html->find('div[class=title-download]') as $webLink){
    echo $webLink->plaintext.'<br>';
    echo $webLink->href.'<br>';
}

foreach($html->find('div[class=download]') as $Link2){
    echo $webLink2->href.'<br>';    
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T02:04:19.570

我认为您需要在 div 中选择一个带有标题下载类的元素。至少文档说它使用像 jQuery (http://simplehtmldom.sourceforge.net/) 这样的选择器

试试这样：

```
$html = file_get_html($url) or die ('invalid url');
foreach($html->find('.title a') as $webLink){
    echo $webLink->plaintext.'<br>';
    echo $webLink->href.'<br>';
}

foreach($html->find('.download a') as $link){
    echo $link->title.'<br>';    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T14:33:18.417

使用 LibXML 解析 HTML 并使用 XPaths 指定您想要的元素或元素属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T01:20:43.560

使用以下代码废弃标题和网址：

```
foreach($html->find('span[class=citation]') as $link){
  $link = $link->prev_sibling();
  echo $link->plaintext.'<br>';
  echo $link->href.'<br>';
} 
```

并使用@zigomir 给出的答案在课堂下载中废弃 url :)

```
foreach($html->find('.download a') as $link){
   echo $link->title.'<br>';    
} 
```

# mate - 我无法再使用 Linux Mint 13 登录 MATE

> ID：11588686
> 
> 赞同：0
> 
> 时间：2012-07-21T01:04:48.257
> 
> 标签：mate, linux-mint

发行版：Linux Mint 13 MATE 32 位。安装 Cinnamon 包后，我无法再登录 MATE。（顺便说一句，Cinnamon 不起作用。）MATE 不再是登录窗口中的选项。（我可以登录到 KDE，我想使用 MATE。）我该如何解决这个问题？另外，我必须修改哪些文件才能更改“xclient 脚本”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T14:50:24.790

我解决了我的直接问题。我从 Synaptic Package Manager 安装了 mate-session-manager。我现在可以在登录之前选择 MATE。但我仍然想了解 xclient 脚本。

# linux - 如何监控访问特定文件的进程？

> ID：11588688
> 
> 赞同：7
> 
> 时间：2012-07-21T01:05:09.210
> 
> 标签：linux, shell, unix, command-line, fuser

我知道有一个 fuser 命令列出了进程的 pid，但是你如何持续监控访问文件的进程？（认为​​类似于 tail -f 文件名的行为）

假设有一个进程在某个时间间隔写入文件并释放句柄，因此使用 fuser 很难捕获该进程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T01:20:17.833

您可以观看定期执行命令。Watch 还支持差异标志，以突出显示连续运行的差异

```
watch -n 5  'fuser file_name' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T14:47:30.943

假设您在 Linux 上，您可以使用 inotifywatch。

此命令将在 60 秒内打印文件的所有访问和修改，然后打印出统计信息。

```
inotifywatch -v -e access -e modify -t 60 filename 
```

[您可以从https://github.com/rvoicilas/inotify-tools/wiki](https://github.com/rvoicilas/inotify-tools/wiki)获得 inotifywatch 的源代码

# java - 在不提示用户的情况下检查我们是否在 java 小程序中具有打印权限

> ID：11588692
> 
> 赞同：2
> 
> 时间：2012-07-21T01:06:24.870
> 
> 标签：java, printing, applet, certificate

基本上，我有一个打印东西的自签名（目前）Java 小程序。尽管我可以在不签署小程序的情况下进行打印，但我不想在用户每次访问我的网站时都提示他们。最糟糕的是，他们会在您对 PrinterJob 对象执行的每项操作时得到提示。现在，如果他们接受证书，则不会收到任何打印提示，这正是我想要的行为。不幸的是，如果他们拒绝证书，他们必须再次接受打印提示。我想要做的是，如果他们拒绝证书，就停止小程序。为此，我尝试了以下方法：

```
public void init(){ 
    doPrivileged(new PrivilegedAction<Void>() {
        @Override
        public Void run() {
            _appsm = System.getSecurityManager();
            if (!hasPrintPermissions()) return null;

            printer = new MarketplaceLabelPrinter();
            LOG.info("Initialized");
            return null;
        }
    });
}

/**
 *  Returns true if the applet has enough permissions to print
 */
public boolean hasPrintPermissions(){
    try{
        _appsm.checkPrintJobAccess();
    } catch (SecurityException e) {
        LOG.severe("Not enough priviledges to print.");
        return false;
    }
    return true;
} 
```

这确实有点工作，但它会提示用户，这是我不想要的。更糟糕的是，这个安全检查是完全没用的，因为如果他们按确定但不勾选“始终允许这个小程序访问打印机”，安全检查认为它可以访问打印机，但实际上它没有。（见：http: [//i.imgur.com/541YW.png](http://i.imgur.com/541YW.png)）

总之，如果用户拒绝证书，我希望小程序停止运行。

谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T19:04:54.507

对不受信任的小程序中不允许的内容进行尝试/捕获。伪代码例如

```
public static boolean isTrusted() {
  boolean trusted = false;
  try {
    SecurityManager sm = System.getSecurityManager();
    // not permitted in a sand-boxed app.
    System.setSecurityManager(null);
    // restore the trusted security manager.
    System.setSecurityManager(sm);
    // This code must be trusted, to reach here.
    trusted = true;
  catch(Throwable ignore) {}
  return trusted;
} 
```

# java - 在字体中使用自定义位图而不是字符字形

> ID：11588696
> 
> 赞同：0
> 
> 时间：2012-07-21T01:08:08.733
> 
> 标签：java, fonts, swt, styledtext

我有一个 StyledText，我正在尝试为制表符使用自定义位图，而不是字体中使用的字符字形。有没有办法替换其中一个字形？如果没有，那么在绘制每个字符时是否会调用一个侦听器？

# javascript - 选择框内的选择和其他

> ID：11588697
> 
> 赞同：2
> 
> 时间：2012-07-21T01:08:35.187
> 
> 标签：javascript, jquery, html

我想做以下事情：

有一个选择框，

```
<select name="some" id="some">
    <option value="xx">xx</option>
    <option value="yy">yy</option>
    <option value="ww">ww</option>
    <option value="zz">zz</option>
    <option value="uu">uu</option>
</select> 
```

当我选择选项 xx 时，打开另一个选择框

```
<select name="some_xx" id="some_xx">
    <option value="xx">xx</option>
    <option value="yy">yy</option>
    <option value="ww">ww</option>
</select> 
```

然后，如果我在 some_xx 中选择 YY 或 WW 或 XX 选项，它会加载一些 html 信息（表单）。并且在某些选择中，如果我选择其他选项（不是 xx），它还会加载一些 html 信息（表单）。

所有的表格都不一样，所以我想加载一个包含所有表格的外部文件，可以吗？如何做到这一切？

我知道它会涉及一些javascript，但我真的不知道怎么做，我已经搜索了很多，看到了一些函数，比如`load()`和创建选择，但无法弄清楚。

提前致谢

编辑：我有这个代码，但它不是动态的，它不能正常工作......

```
<script>
$(function(){ 
       function changeForm($(this)) {
            $('#form').load('$(this).html');
       }  

       function changeForm_xx($(this)) {
            $('#form2').load('$(this).html');
       } 

      $('#some').change(function() {
           changeForm($(this));
      });    
      $('#some_xx').change(function() {
           changeForm_xx($(this));
      });
});
</script> 
```

而且，我想在更改选择时删除加载内容

更新：工作：关闭

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T01:51:22.127

把它改成这样。你的脚本中有很多错误。见演示：[JsFiddle 演示](http://jsfiddle.net/ZQqdK/)

错误列表

1.  `function changeForm($(this))`// 这里你添加了额外的括号并作为 Jquery obj.
2.  $ `('#form2').load('$(this).html')`// 这是错误的。你需要打电话如下。这是`yourObj.html()`方法。

    ```
     function changeForm(obj) {
       var someVar= $(obj).html();
            $('#form').load(someVar); //here you perform load Operation. 

       }  

       function changeForm_xx(obj) {
          var someVar= $(obj).html();
            $('#form').load(someVar); //here you perform load Operation. 
       }

      $('#some').change(function() {
           changeForm($(this));
      });    
      $('#some_xx').change(function() {
           changeForm_xx($(this));
      }); 
    ```

# android - 使用 AsyncTask 和大图像时的 OutOfMemory

> ID：11588699
> 
> 赞同：0
> 
> 时间：2012-07-21T01:08:56.377
> 
> 标签：android, image, android-asynctask, out-of-memory

下面的类解析一个 rss 提要并使用 AsyncTask 在屏幕上绘制图像/文本。我正在使用美国国家航空航天局的 RSS 提要。昨晚我切换到相同的提要，但图像更大。现在，当我尝试按下刷新按钮时，它会耗尽内存。我该如何处理？我知道这只是因为图像太大（大约 6mb，而另一张图像为 36kb）而且我读到它是静态的也无济于事。我看不出它是静态的，因为当您将壁纸设置为图像时，我需要检索 final_image 作为该类的单独实例。因此，下面的所有内容都适用于较小的图像。对于大图像，它可以工作一次，但如果您尝试按下刷新按钮（仅运行 RssParseSync.execute()），则无法刷新，并且出现以下错误。

```
public class RssParseSync extends AsyncTask<String,String,Bitmap>{  

        private Activity parent;
        private ProgressDialog dialog;
        private static Bitmap final_image; //must be static because a new instance is required to access getFinalImage();

        public RssParseSync(Activity parent){this.parent =parent;}//constructor to pass parent activity, need this to call findViewById

                private XmlPullParser makeParser(){

                }

                @Override
                protected Bitmap doInBackground(String... info){

                    URL iotd;
                    int count=info.length;
                    String title="",link="",description="",date="";

                    System.out.println("Number of params is "+count);

                    try{

                        iotd = new URL("http://www.nasa.gov/rss/lg_image_of_the_day.rss");//set URl
                        BufferedReader in;//new BufferedReader
                        in = new BufferedReader(new InputStreamReader(iotd.openStream()));//get rss

                        XmlPullParserFactory factory;
                        factory = XmlPullParserFactory.newInstance();//new factory

                        factory.setNamespaceAware(true);
                        XmlPullParser xpp;
                        xpp = factory.newPullParser();
                        xpp.setInput(in);

                        //rss is now parsed, free to use XmlPullParser functions to move around and evaulate the rss

                        int eventType;
                        eventType = xpp.getEventType();//returns an int which mean different things (START_DOCUMENT,START_TAG,etc)

                    while(eventType!=XmlPullParser.END_DOCUMENT){//while the document has words

                     switch(eventType){

                        case XmlPullParser.START_DOCUMENT://beginning of xml
                            break;
                        case XmlPullParser.START_TAG://case : at beginning of new tag
                            String tagName=xpp.getName();
                            System.out.println(tagName+" "+xpp.getDepth());

                            if(tagName.equals("title")&& xpp.getDepth()==4){//depth is specific to this certain rss feed, there are multiple tags with the same names
                                info[0]=xpp.nextText();
                                title=info[0];

                            }

                            if(tagName.equals("description")&& xpp.getDepth()==4){//depth is specific to this certain rss feed, there are multiple tags with the same names
                                info[1]=xpp.nextText();
                                description=info[1];    
                                StringBuilder tabbed=new StringBuilder(description);
                                tabbed.insert(0, "\t");
                                description=tabbed.toString();
                                //info[1]=description;
                            }

                            if(tagName.equals("pubDate")){//no depth needed, only one tag is named pubDate
                                info[2]=xpp.nextText();
                                date=info[2];                           
                            }

                            if(tagName.equals("enclosure")&&xpp.getDepth()==4){//this is where our image url is. this url is an attribute of the "enclosure" tag
                                //System.out.println("Enclosure has "+xpp.getAttributeCount());
                                for(int i=0; i<=xpp.getAttributeCount()-1; i++){
                                    System.out.println("in for");
                                    if(xpp.getAttributeName(i).equals("url")){
                                        link=xpp.getAttributeValue(i);
                                        info[3]=link;
                                        //System.out.println(link);
                                    }
                                }
                            }
                            break;

                        }
                        eventType=xpp.next();
                    }//switch

                        publishProgress(title,description,date,link);

                        in.close();//close BufferedReader
                    } catch (MalformedURLException e){
                        e.printStackTrace();
                    }catch(XmlPullParserException e1){
                        e1.printStackTrace();
                    }catch(IOException e2){
                        e2.printStackTrace();
                    }         
                    Bitmap image=getBitmapFromURL(info[3]);

                    return image;
                }
                @Override
                protected void onProgressUpdate(String... progress){
                    try {
                        System.out.println("onProgressUpdate");
                        resetDisplay(progress[0],progress[1],progress[2],progress[3]);//feeding parsed rss values, title, description, date, and link
                    } catch (MalformedURLException e) {//both exceptions are thrown by resetDisplay
                        e.printStackTrace();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }

                }

                protected void onPostExecute(Bitmap image){//error when doing this in resetDisplay.... onPostExecute is invoked by the ui thread so this may be why it works here and not in resetDisplay
                    ImageView imageView=(ImageView) parent.findViewById(R.id.imageDisplay);
                    imageView.setImageBitmap(image);
                    final_image=image;
                    dialog.dismiss();

                }

                protected void onPreExecute(){
                     dialog=ProgressDialog.show(parent, "Loading", "Loading the image of the day");
                }

                private void resetDisplay(String title, String description,String date, String link) throws MalformedURLException, IOException{

                    TextView titleView=(TextView) parent.findViewById(R.id.imageTitle);
                    titleView.setText(title);

                    TextView dateView=(TextView) parent.findViewById(R.id.imageDate);
                    dateView.setText(date);

                    TextView descriptionView=(TextView) parent.findViewById(R.id.imageDescription);
                    descriptionView.setText(description);

                }

                public Bitmap getBitmapFromURL(String url) {
                    try {
                    Bitmap bitmap=null; 
                    InputStream input = new java.net.URL(url).openStream();
                    bitmap = BitmapFactory.decodeStream(input);//Decode an input stream into a bitmap. If the input stream is null, or cannot be used to decode a bitmap, the function returns null.
                    input.close();
                    return bitmap;
                    } catch (IOException ioe) { return null; }

                }

                public Bitmap getFinalImage(){
                    return final_image;
                };

    }//class 
```

刷新方法

```
public void onRefresh(){
    System.out.println("in onRefresh");
    new RssParseSync(getActivity()).execute(title,description,date,link);
} 
```

Logcat 日志

```
07-20 17:44:18.470: I/System.out(7581): onProgressUpdate
07-20 17:44:18.770: D/dalvikvm(7581): GC_FOR_ALLOC freed 190K, 3% free 26538K/27299K, paused 46ms
07-20 17:44:18.770: I/dalvikvm-heap(7581): Forcing collection of SoftReferences for 24107536-byte allocation
07-20 17:44:18.790: D/dalvikvm(7581): GC_BEFORE_OOM freed 18K, 3% free 26519K/27299K, paused 23ms
07-20 17:44:18.790: E/dalvikvm-heap(7581): Out of memory on a 24107536-byte allocation.
07-20 17:44:18.790: I/dalvikvm(7581): "AsyncTask #2" prio=5 tid=13 RUNNABLE
07-20 17:44:18.790: I/dalvikvm(7581):   | group="main" sCount=0 dsCount=0 obj=0x40d6cac8 self=0x2412840
07-20 17:44:18.790: I/dalvikvm(7581):   | sysTid=7646 nice=10 sched=0/0 cgrp=default handle=32889544
07-20 17:44:18.790: I/dalvikvm(7581):   | schedstat=( 0 0 0 ) utm=7 stm=0 core=1
07-20 17:44:18.790: I/dalvikvm(7581):   at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
07-20 17:44:18.800: I/dalvikvm(7581):   at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:719)
07-20 17:44:18.800: I/dalvikvm(7581):   at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:791)
07-20 17:44:18.800: I/dalvikvm(7581):   at com.wajumbie.nasadailyimage.RssParseSync.getBitmapFromURL(RssParseSync.java:162)
07-20 17:44:18.800: I/dalvikvm(7581):   at com.wajumbie.nasadailyimage.RssParseSync.doInBackground(RssParseSync.java:116)
07-20 17:44:18.800: I/dalvikvm(7581):   at com.wajumbie.nasadailyimage.RssParseSync.doInBackground(RssParseSync.java:1)
07-20 17:44:18.800: I/dalvikvm(7581):   at android.os.AsyncTask$2.call(AsyncTask.java:264)
07-20 17:44:18.800: I/dalvikvm(7581):   at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
07-20 17:44:18.800: I/dalvikvm(7581):   at java.util.concurrent.FutureTask.run(FutureTask.java:137)
07-20 17:44:18.800: I/dalvikvm(7581):   at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
07-20 17:44:18.800: I/dalvikvm(7581):   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
07-20 17:44:18.800: I/dalvikvm(7581):   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
07-20 17:44:18.800: I/dalvikvm(7581):   at java.lang.Thread.run(Thread.java:864)
07-20 17:44:18.800: E/dalvikvm(7581): Out of memory: Heap Size=34019KB, Allocated=26519KB, Limit=49152KB
07-20 17:44:18.800: E/dalvikvm(7581): Extra info: Footprint=27299KB, Allowed Footprint=34019KB, Trimmed=1212KB
07-20 17:44:18.800: D/skia(7581): --- decoder->decode returned false
07-20 17:44:18.800: W/dalvikvm(7581): threadid=13: thread exiting with uncaught exception (group=0x40aa3a08)
07-20 17:44:18.810: E/AndroidRuntime(7581): FATAL EXCEPTION: AsyncTask #2
07-20 17:44:18.810: E/AndroidRuntime(7581): java.lang.RuntimeException: An error occured while executing doInBackground()
07-20 17:44:18.810: E/AndroidRuntime(7581):     at android.os.AsyncTask$3.done(AsyncTask.java:278)
07-20 17:44:18.810: E/AndroidRuntime(7581):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
07-20 17:44:18.810: E/AndroidRuntime(7581):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
07-20 17:44:18.810: E/AndroidRuntime(7581):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
07-20 17:44:18.810: E/AndroidRuntime(7581):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
07-20 17:44:18.810: E/AndroidRuntime(7581):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
07-20 17:44:18.810: E/AndroidRuntime(7581):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
07-20 17:44:18.810: E/AndroidRuntime(7581):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
07-20 17:44:18.810: E/AndroidRuntime(7581):     at java.lang.Thread.run(Thread.java:864)
07-20 17:44:18.810: E/AndroidRuntime(7581): Caused by: java.lang.OutOfMemoryError: (Heap Size=34019KB, Allocated=26519KB)
07-20 17:44:18.810: E/AndroidRuntime(7581):     at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
07-20 17:44:18.810: E/AndroidRuntime(7581):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:719)
07-20 17:44:18.810: E/AndroidRuntime(7581):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:791)
07-20 17:44:18.810: E/AndroidRuntime(7581):     at com.wajumbie.nasadailyimage.RssParseSync.getBitmapFromURL(RssParseSync.java:162)
07-20 17:44:18.810: E/AndroidRuntime(7581):     at com.wajumbie.nasadailyimage.RssParseSync.doInBackground(RssParseSync.java:116)
07-20 17:44:18.810: E/AndroidRuntime(7581):     at com.wajumbie.nasadailyimage.RssParseSync.doInBackground(RssParseSync.java:1)
07-20 17:44:18.810: E/AndroidRuntime(7581):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
07-20 17:44:18.810: E/AndroidRuntime(7581):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
07-20 17:44:18.810: E/AndroidRuntime(7581):     ... 5 more
07-20 17:44:19.061: D/OpenGLRenderer(7581): Flushing caches (mode 0)
07-20 17:44:19.061: D/memalloc(7581): ion: Unmapping buffer  base:0x52738000 size:2088960
07-20 17:44:19.061: D/memalloc(7581): ion: Unmapping buffer  base:0x52f7c000 size:2088960
07-20 17:44:19.061: D/memalloc(7581): ion: Unmapping buffer  base:0x53477000 size:2088960
07-20 17:44:19.081: D/OpenGLRenderer(7581): Flushing caches (mode 0)
07-20 17:44:19.111: D/memalloc(7581): ion: Unmapping buffer  base:0x52bea000 size:524288
07-20 17:44:19.121: D/memalloc(7581): ion: Unmapping buffer  base:0x5367d000 size:524288
07-20 17:44:19.121: D/memalloc(7581): ion: Unmapping buffer  base:0x53326000 size:524288
07-20 17:44:19.141: D/OpenGLRenderer(7581): Flushing caches (mode 2)
07-20 17:44:19.181: E/WindowManager(7581): Activity com.wajumbie.nasadailyimage.NasaAppActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@40d92b30 that was originally added here
07-20 17:44:19.181: E/WindowManager(7581): android.view.WindowLeaked: Activity com.wajumbie.nasadailyimage.NasaAppActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@40d92b30 that was originally added here
07-20 17:44:19.181: E/WindowManager(7581):  at android.view.ViewRootImpl.<init>(ViewRootImpl.java:380)
07-20 17:44:19.181: E/WindowManager(7581):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:372)
07-20 17:44:19.181: E/WindowManager(7581):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:320)
07-20 17:44:19.181: E/WindowManager(7581):  at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:152)
07-20 17:44:19.181: E/WindowManager(7581):  at android.view.Window$LocalWindowManager.addView(Window.java:557)
07-20 17:44:19.181: E/WindowManager(7581):  at android.app.Dialog.show(Dialog.java:301)
07-20 17:44:19.181: E/WindowManager(7581):  at android.app.ProgressDialog.show(ProgressDialog.java:116)
07-20 17:44:19.181: E/WindowManager(7581):  at android.app.ProgressDialog.show(ProgressDialog.java:99)
07-20 17:44:19.181: E/WindowManager(7581):  at android.app.ProgressDialog.show(ProgressDialog.java:94)
07-20 17:44:19.181: E/WindowManager(7581):  at com.wajumbie.nasadailyimage.RssParseSync.onPreExecute(RssParseSync.java:142)
07-20 17:44:19.181: E/WindowManager(7581):  at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:561)
07-20 17:44:19.181: E/WindowManager(7581):  at android.os.AsyncTask.execute(AsyncTask.java:511)
07-20 17:44:19.181: E/WindowManager(7581):  at com.wajumbie.nasadailyimage.NasaDailyImage.onRefresh(NasaDailyImage.java:57)
07-20 17:44:19.181: E/WindowManager(7581):  at com.wajumbie.nasadailyimage.NasaAppActivity$1.run(NasaAppActivity.java:48)
07-20 17:44:19.181: E/WindowManager(7581):  at com.wajumbie.nasadailyimage.NasaAppActivity.onRefreshClicked(NasaAppActivity.java:51)
07-20 17:44:19.181: E/WindowManager(7581):  at java.lang.reflect.Method.invokeNative(Native Method)
07-20 17:44:19.181: E/WindowManager(7581):  at java.lang.reflect.Method.invoke(Method.java:511)
07-20 17:44:19.181: E/WindowManager(7581):  at android.view.View$1.onClick(View.java:3066)
07-20 17:44:19.181: E/WindowManager(7581):  at android.view.View.performClick(View.java:3538)
07-20 17:44:19.181: E/WindowManager(7581):  at android.view.View$PerformClick.run(View.java:14330)
07-20 17:44:19.181: E/WindowManager(7581):  at android.os.Handler.handleCallback(Handler.java:607)
07-20 17:44:19.181: E/WindowManager(7581):  at android.os.Handler.dispatchMessage(Handler.java:92)
07-20 17:44:19.181: E/WindowManager(7581):  at android.os.Looper.loop(Looper.java:156)
07-20 17:44:19.181: E/WindowManager(7581):  at android.app.ActivityThread.main(ActivityThread.java:5008)
07-20 17:44:19.181: E/WindowManager(7581):  at java.lang.reflect.Method.invokeNative(Native Method)
07-20 17:44:19.181: E/WindowManager(7581):  at java.lang.reflect.Method.invoke(Method.java:511)
07-20 17:44:19.181: E/WindowManager(7581):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-20 17:44:19.181: E/WindowManager(7581):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-20 17:44:19.181: E/WindowManager(7581):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T01:21:42.117

如果图像非常大，您需要调整图像大小。

执行以下操作：

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inJustDecodeBounds = true;
BitmapFactory.decodeStream(new URL(imageUrl).openStream(),null,options);
//use your required height and width in place of 80 (size of imageview maybe)
options.inSampleSize = calculateInSampleSize(options,80, 80); 
options.inJustDecodeBounds = false;
Bitmap bmp = BitmapFactory.decodeStream(new URL(imageUrl).openStream(),null,options);

public int calculateInSampleSize(BitmapFactory.Options options,
        int reqWidth, int reqHeight) {
    // Raw height and width of image
    final int height = options.outHeight;
    final int width = options.outWidth;
    int inSampleSize = 1;

    if (height > reqHeight || width > reqWidth) {
        if (width > height) {
            inSampleSize = Math.round((float) height / (float) reqHeight);
        } else {
            inSampleSize = Math.round((float) width / (float) reqWidth);
        }
    }
    return inSampleSize;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T02:25:06.920

我想通了，我只需要在 onPreExecute 中使用 bitmap.recycle() 方法。我确信有更好的方法可以做到这一点，但这有效。

```
protected void onPreExecute(){
    if(final_image!=null){

      final_image.recycle();

    }

     dialog=ProgressDialog.show(parent, "Loading", "Loading the image of the day");
                } 
```

# php - 为什么我的 PHP 上传脚本不能在 jquery Mobile 上运行？

> ID：11588700
> 
> 赞同：2
> 
> 时间：2012-07-21T01:09:02.593
> 
> 标签：php, jquery

我有PHP上传脚本，没问题，但是如果我使用jquery mobile，上传文件不起作用。

这是我的脚本

```
 <!DOCTYPE html> 
    <html> 
        <head> 
        <title>Security</title> 
        <meta name="viewport" content="width=device-width, initial-scale=1"> 
        <link rel="stylesheet" href="jqm/jquery.mobile-1.1.0.min.css" />
        <!--script src="jqm/jquery-1.7.1.min.js"></script>        //if I Open this line, the upload script don't work.
        <script src="jqm/jquery.mobile-1.1.0.min.js"></script-->  //if I Open this line, the upload script don't work.

        </head> 
    <body> 

    <?php

     include "koneksi.php";

     if (isset($_POST[SAVE]))
     {

          $tglkirim    = $_POST[TGLKIRIM];
          $nopol       = $_POST[NOPOL];
          $jenis       = $_POST[JENIS];
          $namasupexp  = $_POST[NAMASUPEXP];
          $bkirim      = $_POST[BKIRIM];
          $kotatujuan  = $_POST[KOTATUJUAN];
          $jamm        = $_POST[JAMM];
          $jamk        = $_POST[JAMK];
          $namasopir   = $_POST[NAMASOPIR];
          $jkendaraan  = $_POST[JKENDARAAN];
          $sj          = $_POST[SJ];       
          $stnk        = $_POST[STNK];
          $sim         = $_POST[SIM];
          $lrem        = $_POST[LREM];
          $lkota       = $_POST[LKOTA];
          $lsign       = $_POST[LSIGN];
          $spion       = $_POST[SPION];
          $sabuk       = $_POST[SABUK];

          // $ukuran_gbr = GetImageSize($direktori);
          $lokasi_file = $_FILES['fupload']['tmp_name'];  //script for upload
          $nama_file   = $_FILES['fupload']['name'];      //script for upload
          $ukuran_file = $_FILES['fupload']['size'];      //script for upload  
          $tipe_file   = $_FILES['fupload']['type'];      //script for upload
          $direktori   = "fkendaraan/$nama_file";         //script for upload

          print_r($_POST);

             move_uploaded_file($lokasi_file,"$direktori"); //script for move upload file

             echo "Nama File   :<b>$nama_file</b> sukses di Upload<br>";
             echo "Ukuran File :<b>$ukuran_file</b> bytes<br>";  

          $sql="INSERT INTO tb_secure (tgl_kirim,
                                          nopol,
                                           jenis,
                                             namasupexp,
                                               bkirim,
                                                kota_tujuan,
                                                  jam_masuk,
                                                    jam_keluar,
                                                      nama_sopir,
                                                       jenis_kendaraan,
                                                         surat_jalan,
                                                           stnk,
                                                             sim,
                                                               lrem,
                                                                 lkota,
                                                                   lsign,
                                                                     spion,
                                                                       sabuk,
                                                                         nama_file,
                                                                           ukuran_file,
                                                                              direktori)                   
    VALUES('$tglkirim',
             '$nopol',
                '$jenis',
                   '$namasupexp',
                      '$bkirim',
                        '$kotatujuan',
                           '$jamm',
                             '$jamk',
                               '$namasopir',
                                 '$jkendaraan',
                                    '$sj',
                                      '$stnk',
                                        '$sim', 
                                          '$lrem',
                                            '$lkota',
                                              '$lsign',
                                                '$spion',
                                                   '$sabuk',
                                                     '$nama_file',
                                                       '$ukuran_file', 
                                                          '$direktori')";

         $sql2="INSERT INTO temp_gudang(nopol,tgl_kirim)VALUES('$nopol','$tglkirim')";                                                    

         $input=mysql_query($sql);
         $input2=mysql_query($sql2);

          if ($input && $input2)
          {
             echo "<strong>Data berhasil dimasukkan</strong>";
             //echo "<script language='javascript'>";
             //echo " alert('Data berhasil dimasukkan');";
            //echo " alert(print_r($_POST));";
             //echo "window.location='admin/index-admin.php';";
             //echo "</script>
          }
          else
          {
             echo "<strong>Data tidak berhasil dimasukkan, check ukuran gambar, yg diperbolehkan kurang dari 1.5 Mb </strong>";
          }

     } 
<?php 
 if (isset($_SESSION['username']))
 {

 ?>

<div data-role="page" class="type-interior" data-theme="b">
<div data-role="header">
        <!--h1>PT UNIMOS GRESIK</h1-->
        <h1>CHECKLIST APPS </h1>
        <h2>Security</h2>
    </div><!-- /header -->
 Anda Login Sebagai  <?php echo $_SESSION['username'];?> 
    <div data-role="content">   
<form action="satpam.php" enctype="multipart/form-data"  method="post">
    Tanggal Pengiriman
    <input type="text" name="TGLKIRIM" id="TGLKIRIM" value="<?php echo "$today";?>" />
    Nomor Kendaraan
    <input type="text" name="NOPOL" id="NOPOL" value=""  />
    Nama
    <select name="JENIS" id="switch-a" data-role="slider">
                          <option value="Suplier">Sup</option>
                          <option value="Expedisi">Exp</option>
    </select>     

   <select name="NAMASUPEXP" id="select-choice-a" data-native-menu="false">
     <option >Ekspedisi</option>
       <?php
        $sql="SELECT * FROM tb_exp_local";
        $hasil = mysql_query($sql);

        while($data=mysql_fetch_array($hasil))
         {
           echo "<option value=$data[nama_exp] width=300>$data[nama_exp]</option>";
         }
       ?>
    </select>
    <td colspan="3">Barang Yang Dikirim</td>
    <input type="text" name="BKIRIM" id="BKIRIM" value="">
    Kota Tujuan 
    <!--input type="text" name="KOTATUJUAN" id="KOTATUJUAN" value=""  /-->
    <select name="KOTATUJUAN" id="select-choice-a" data-native-menu="false">
     <option >Kota Tujuan</option>
       <?php
        $sql="SELECT * FROM tb_exp_local";
        $hasil = mysql_query($sql);

        while($data=mysql_fetch_array($hasil))
         {
           echo "<option value=$data[kota_tujuan]>$data[kota_tujuan]</option>";
         }
       ?>
    </select>
    Jam Masuk     
    <input type="text" name="JAMM" id="JAMM" value="<?php echo "$time";?>"/>
    Jam Keluar
    <input type="text" name="JAMK" id="JAMK" value=""  />
    Nama Pengemudi
    <input type="text" name="NAMASOPIR" id="NAMASOPIR" value=""  />
    Jenis Kendaraan
           <select name="JKENDARAAN" id="select-choice-a" data-native-menu="false">
                  <option>Jenis Kendaraan</option>
                  <option value="Pick Up">Pick Up</option>
                  <option value="Colt Diesel">Colt Diesel</option>
                  <option value="Fuso">Fuso</option>
                  <option value="Truck bak Tertutup">Truck bak Tertutup</option>
                  <option value="Container">Container</option>
            </select> 
      <table>      
      <tr>
         <td colspan="2">Surat Jalan</td><td><select name="SJ" id="switch-a" data-role="slider">
                          <option value="Ada">Ada</option>
                          <option value="Tidak">Tidak</option>
             </select></td>
        </tr>    
      <tr>
         <td colspan="2">Buku KIR & STNK</td>
         <td>
            <select name="STNK" id="STNK" data-role="slider">
            <option value="Ada">Ada</option>
            <option value="Tidak">Tidak</option>
            </select>
         </td>
      </tr>
      <tr>
         <td colspan="2">SIM</td> 
         <td> <select name="SIM" id="SIM" data-role="slider">
                          <option value="Ada">Ada</option>
                          <option value="Tidak">Tidak</option>
              </select>
         </td>           
      </tr>
      <tr>
         <td colspan="2">Lampu Rem</td>
         <td><select name="LREM" id="LREM" data-role="slider">
                          <option value="Oke">Oke</option>
                          <option value="Tidak">Tidak</option>
              </select>
         </td>          
      </tr>
      <tr>
         <td colspan="2">Lampu Kota</td>
         <td><select name="LKOTA" id="LKOTA" data-role="slider">
                          <option value="Oke">Oke</option>
                          <option value="Tidak">Tidak</option>
             </select>
         </td> 
      </tr>
      <tr>
         <td colspan="2">Lampu Sign</td>   
         <td> <select name="LSIGN" id="LSIGN" data-role="slider">
                          <option value="Oke">Oke</option>
                          <option value="Tidak">Tidak</option>
              </select>
         </td>       
      </tr>
      <tr>
        <td colspan="2">Kaca Spion</td>
        <td><select name="SPION" id="SPION" data-role="slider">
                          <option value="Oke">Oke</option>
                          <option value="Tidak">Tidak</option>
            </select></td>
      </tr>
      <tr>
        <td colspan="2">Sabuk Pengaman</td>
        <td><select name="SABUK" id="SABUK" data-role="slider">
                          <option value="Ada">Ada</option>
                          <option value="Tidak">Tidak</option>
            </select></td>
      </tr>
      </div><!-- /content -->
 </div><!-- /page -->

      <tr>
        <td colspan="2">Upload</td>
        <!--td><input type="file" name="fupload" /></td-->
        <td><input type="file" accept="image/*;capture=camera" name="fupload" id="file"></td>

      </tr>
      <tr>
        <td colspan="2" align="right"><input type="submit" name="SAVE" value="SAVE"></td>
      </tr> 
      <tr>
         <td colspan="2"><a href="logout.php" data-role="button" data-icon="home" onclick='logout()'>Log Out</a></td> 
       <?php
        echo "<script language='javascript'>";
        echo "function logout()";
        echo "{window.location.assign('logout.php');}";
        echo "</script>";
        ?>
      </tr>
      </table>
       </form>

<?php 
}
?>
</body>
</html> 
```

为什么唯一上传脚本不起作用？插入数据等其他脚本工作正常。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T01:14:18.987

你确定你已经包含`enctype`在你的`<form>`声明中了吗？

`<form action="" method="post" enctype="multipart/form-data">`

# c# - 使用 EPPlus 将图像添加到 Excel

> ID：11588704
> 
> 赞同：31
> 
> 时间：2012-07-21T01:10:47.510
> 
> 标签：c#, epplus

我正在尝试使用 EPPlus 多次将相同的图像添加到 excel 文件中。我正在使用以下代码来执行此操作：

```
Image logo = Image.FromFile(path);
ExcelPackage package = new ExcelPackage(info);
var ws = package.Workbook.Worksheets.Add("Test Page");
for(int a = 0; a < 5; a++)
{
    ws.Row(a*5).Height = 39.00D;
    var picture = ws.Drawings.AddPicture(a.ToString(), logo);
    picture.SetPosition(a*5, 0, 2, 0);
} 
```

一切正常，所有图像都正确添加，但它们被向下拉伸。以下是其中一张图片的外观：

![在此处输入图像描述](../Images/9d6ba4d7dfdc9cfa7841dcb9c7e9b7e5.png)

但它在excel中看起来像这样：

![在此处输入图像描述](../Images/6e01c278c1d8144a20ad3f6b282becc0.png)

我必须调整每张图片开头的每一行的大小，但我认为这不会影响它。有没有办法添加图片/做我想做的事，还是我必须手动复制粘贴图片？（我以图片为例）

谢谢。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-09T09:35:05.110

我不确定这是否是最好的解决方案，但绝对可以解决您的问题。

这是我所做的：

```
ExcelPackage package = new ExcelPackage();
var ws = package.Workbook.Worksheets.Add("Test Page");

for (int a = 0; a < 5; a++)
{
    ws.Row(a * 5).Height = 39.00D;
}

for (int a = 0; a < 5; a++)
{
    var picture = ws.Drawings.AddPicture(a.ToString(), logo);
    picture.SetPosition(a * 5, 0, 2, 0);
} 
```

这是它的外观。

![在此处输入图像描述](../Images/432a24d25275c8679a043ba805379b58.png)

由于某种原因，当我们设置了行高时，它会干扰图片高度。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-12-10T20:52:48.973

这是您可以在 C# 中应用的一种解决方案。

```
private void AddImage(ExcelWorksheet oSheet, int rowIndex, int colIndex, string imagePath)
{
    Bitmap image = new Bitmap(imagePath);
    ExcelPicture excelImage = null;
    if (image != null)
    {
        excelImage = oSheet.Drawings.AddPicture("Debopam Pal", image);
        excelImage.From.Column = colIndex;
        excelImage.From.Row = rowIndex;
        excelImage.SetSize(100, 100);
        // 2x2 px space for better alignment
        excelImage.From.ColumnOff = Pixel2MTU(2);
        excelImage.From.RowOff = Pixel2MTU(2);
    }
}

public int Pixel2MTU(int pixels)
{
    int mtus = pixels * 9525;
    return mtus;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T23:20:47.723

试试这个

```
Image logo = Image.FromFile(path);
ExcelPackage package = new ExcelPackage(info);
var ws = package.Workbook.Worksheets.Add("Test Page");
for(int a = 0; a < 5; a++)
{
    ws.Row(a*5).Height = 39.00D;
    var picture = ws.Drawings.AddPicture(a.ToString(), logo);
    // xlMove disables the auto resizing
    picture.Placement = xlMove; //XLPlacement : xlMoveAndSize,xlMove,xlFreeFloating
    picture.SetPosition(a*5, 0, 2, 0);
} 
```

或者

```
Image logo = Image.FromFile(path);
ExcelPackage package = new ExcelPackage(info);
var ws = package.Workbook.Worksheets.Add("Test Page");
for(int a = 0; a < 5; a++)
{
    ws.Row(a*5).Height = 39.00D;
    var picture = ws.Drawings.AddPicture(a.ToString(), logo);
    picture.From.Column = 0;
    picture.From.Row = a;
    picture.SetSize(120, 150);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T21:04:59.590

在保存文档之前添加以下内容：

```
foreach (ExcelPicture drawing in ws.Drawings)
   drawing.SetSize(100); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-27T14:52:19.877

使用以下代码调整 excel 单元格中的图像：

```
 Image logo = Image.FromFile(path);
        ExcelPackage package = new ExcelPackage(info);
        var ws = package.Workbook.Worksheets.Add("Test Page");
        for(int a = 0; a < 5; a++)
        {
           ws.Row(a*5).Height = 39.00D;
           var picture = ws.Drawings.AddPicture(a.ToString(), logo);
           picture.From.Column = 0;
           picture.From.Row = a;
           picture.To.Column=0;//end cell value
           picture.To.Row=a;//end cell value
           picture.SetSize(120, 150);
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-06T10:07:00.870

当您将示例 39 作为像素传递时，它将在内部将其作为像素的插入点，因此您认为您要将行的高度设置为 39 像素，但实际上它将行的高度设置为 39 点。所以根据以下公式，您的行高将变为 52 像素。

如果要将行高设置为 39px，则意味着您必须通过 39 的 29.25 点（根据公式）。

```
points = pixels * 72 / 96 
```

试试这个。

# iphone - 索引 100 越界 0 ... 99 swipeDetected void 中的错误

> ID：11588709
> 
> 赞同：0
> 
> 时间：2012-07-21T01:11:57.587
> 
> 标签：iphone, xcode, arrays, dictionary, bounds

在这里它工作正常。如果我尝试从索引中的第一个对象向右（向后）滑动，则不会发生任何事情。

```
- (void)swipeDetectedRight:(UISwipeGestureRecognizer *)sender
{
if (detailIndex != 0)
    detailIndex--;  

Label.text = [[detailsDataSource objectAtIndex: detailIndex] valueForKey:@"Text"];
} 
```

但是当我在最后一个条目（nr 100）并向左滑动时，它崩溃了。下面是左边的代码：

```
- (void)swipeDetectedLeft:(UISwipeGestureRecognizer *)sender
{
    if (detailIndex != [detailsDataSource count])
        detailIndex++;

    Label.text = [[detailsDataSource objectAtIndex: detailIndex] valueForKey:@"Text"];
} 
```

和错误信息：

-[__NSArrayI objectAtIndex:]：索引 100 超出范围 [0 .. 99]'

如何正确设置边界，使其不会滑过最后一个对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T19:56:25.763

```
- (void)swipeDetectedLeft:(UISwipeGestureRecognizer *)sender
{

if (detailIndex != 99)
    detailIndex++;
} 
```

# mysql - 带有子查询的mysql更新查询

> ID：11588710
> 
> 赞同：72
> 
> 时间：2012-07-21T01:12:32.750
> 
> 标签：mysql, sql

任何人都可以看到以下查询有什么问题吗？

当我运行它时，我得到：

> #1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 8 行的“a where a.CompetitionID = Competition.CompetitionID”附近使用正确的语法

```
Update Competition
Set Competition.NumberOfTeams =
(
SELECT count(*) as NumberOfTeams
FROM PicksPoints
where UserCompetitionID is not NULL
group by CompetitionID
) a
where a.CompetitionID =  Competition.CompetitionID 
```

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2012-07-21T01:24:43.747

主要问题是内部查询不能与`where`外部`update`语句上的子句相关，因为 where 过滤器首先应用于正在更新的表，甚至在内部子查询执行之前。处理这种情况的典型方法是[多表更新](http://dev.mysql.com/doc/refman/4.1/en/update.html)。

```
Update
  Competition as C
  inner join (
    select CompetitionId, count(*) as NumberOfTeams
    from PicksPoints as p
    where UserCompetitionID is not NULL
    group by CompetitionID
  ) as A on C.CompetitionID = A.CompetitionID
set C.NumberOfTeams = A.NumberOfTeams 
```

演示：[http ://www.sqlfiddle.com/#!2/a74f3/1](http://www.sqlfiddle.com/#!2/a74f3/1)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-09-04T12:37:50.743

谢谢，我没有使用 INNER JOIN 进行更新的想法。

在原始查询中，错误是为子查询命名，它必须返回一个值，因此不能使用别名。

```
UPDATE Competition
SET Competition.NumberOfTeams =
(SELECT count(*) -- no column alias
  FROM PicksPoints
  WHERE UserCompetitionID is not NULL
  -- put the join condition INSIDE the subquery :
  AND CompetitionID =  Competition.CompetitionID
  group by CompetitionID
) -- no table alias 
```

应该为每项比赛记录做伎俩。

**需要注意：**

效果与 mellamokb 提出的查询并不完全相同，后者不会更新没有相应 PickPoints 的竞赛记录。

由于 `SELECT id, COUNT(*) GROUP BY id`只会计算现有的 id 值，

而 a`SELECT COUNT(*)`将始终返回一个值，如果没有选择记录，则为 0。

这可能对您来说是个问题，也可能不是。

mellamokb 查询的 0 感知版本将是：

```
Update Competition as C
LEFT join (
  select CompetitionId, count(*) as NumberOfTeams
  from PicksPoints as p
  where UserCompetitionID is not NULL
  group by CompetitionID
) as A on C.CompetitionID = A.CompetitionID
set C.NumberOfTeams = IFNULL(A.NumberOfTeams, 0) 
```

换句话说，如果没有找到对应的 PickPoints，则将 Competition.NumberOfTeams 设置为零。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-01-16T05:53:13.183

对于不耐烦的人：

```
UPDATE target AS t
INNER JOIN (
  SELECT s.id, COUNT(*) AS count
  FROM source_grouped AS s
  -- WHERE s.custom_condition IS (true)
  GROUP BY s.id
) AS aggregate ON aggregate.id = t.id
SET t.count = aggregate.count 
```

如上所述，这是[@mellamokb](https://stackoverflow.com/a/11588758/811306)的答案，已降至最大值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-08T15:59:42.660

您可以检查您的 eav_attributes 表以查找每个图像角色的相关属性 ID，例如； [![eav_attributes](../Images/6c8bdb83d52ba62d8214316310329165.png)](https://i.stack.imgur.com/A1QYp.png)

然后，您可以使用它们将任何角色设置为所有产品的任何其他角色；

```
UPDATE catalog_product_entity_varchar AS `v` INNER JOIN (SELECT `value`,`entity_id` FROM `catalog_product_entity_varchar` WHERE `attribute_id`=86) AS `j` ON `j`.`entity_id`=`v`.entity_id SET `v`.`value`=j.`value` WHERE `v`.attribute_id = 85 AND `v`.`entity_id`=`j`.`entity_id` 
```

以上会将您所有的“基本”角色设置为同一产品的“小”图像。

# php - 所有点之间的地理距离大于mysql的值

> ID：11588713
> 
> 赞同：0
> 
> 时间：2012-07-21T01:13:02.043
> 
> 标签：php, mysql, math, geospatial, computational-geometry

从具有纬度和经度的餐厅列表中，我怎样才能获得所有点之间至少有*X*公里的点？

*我的意思是，每家餐厅在X*公里半径范围内都没有其他餐厅。

我尝试了下一个查询：

```
SELECT 
    id,
    lat as x, 
    lng as y,
    concat(ceil((lat+90)/5),',',ceil((lng+180)/5)) as groupParam
FROM 
    restaurants 
GROUP BY groupParam 
```

结果是这样的：

![查询结果](../Images/119a0031bc95f46a49e7bb0040fec821.png)

在该查询中，我按四舍五入的纬度和经度进行分组（例如：“12,23”）。所以我只从 (lat >= 12 && lat <13) 和 (lng >= 23 && lng < 24) 得到一个节点。

那速度很快，但不是很准确。

谢谢，威廉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T01:31:03.340

我为我作为 web 应用程序编写的 hamradio 数据库做了一些 lon/lat 计算：http: [//dk7sl.de/iRelais](http://dk7sl.de/iRelais)

这是选择语句，其中 $x 和 $y 是我的 lon/lat 坐标。最大距离设置为 15 公里。如果您只删除查询中的“*1.609344”，则可以切换到英里。此查询选择地理数据表中最近的条目。地理数据取自[http://www.geodatasource.com/world-cities-database/free](http://www.geodatasource.com/world-cities-database/free)，在我的 mysqldb 中包含大约 240 万条记录。DB-Indexes 在纬度、经度、要素类和要素代码上（但这只是因为我按要素类和代码过滤条目）

$query = "SELECT name, (((ACOS(SIN('".$x."' * PI() / 180) * SIN(纬度 * PI() / 180) + COS(".$x." * PI() / 180) * COS(纬度 * PI() / 180) * COS(('".$y."' - 经度) * PI() / 180)) * 180 / PI()) * 60 * 1.1515))*1.609344`distance`从`geodata`WHERE `feature class`= 'P' AND ( `feature code`= 'PPLX' OR `feature code`= 'PPL') HAVING `distance`<='15' ORDER BY `distance`ASC LIMIT 1;";

也许您可以使用我的 select 语句并对其进行修改，以便从数据库中获得正确的点组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T01:34:24.130

**回答你原来的问题：**

我认为这将为您提供您正在寻找的东西：

```
SELECT DISTINCT
    a.id AS a,
    b.id AS b,
    ACOS(
        SIN(a.lat) * SIN(b.lat) + COS(a.lat) * COS(b.lat) * COS(a.lon - b.lon)
    ) * 6371.01 AS km
FROM 
    restaurants a,
    restaurants b
WHERE
    b.id > a.id AND
    ACOS(
        SIN(a.lat) * SIN(b.lat) + COS(a.lat) * COS(b.lat) * COS(a.lon - b.lon)
    ) * 6371.01 >= X
ORDER BY
    ACOS(
        SIN(a.lat) * SIN(b.lat) + COS(a.lat) * COS(b.lat) * COS(a.lon - b.lon)
    ); 
```

其中 X 是您希望它们之间的最小公里数。

不幸的是，这种类型的查询是返回[笛卡尔 Product的](http://en.wikipedia.org/wiki/Cartesian_product)[CROSS JOIN](http://en.wikipedia.org/wiki/Join_%28SQL%29#Cross_join)，因此对于 10 家餐厅，您将进行 36 次比较，100 次您将获得 4,851 次比较，1,000 次您将获得 498,501 次等。

**回答您修改后的问题：**

要查找距离任何其他餐厅至少 X 公里的所有餐厅，请使用以下命令：

```
SELECT
    a.id AS a,
    MIN(ACOS(
        SIN(a.lat) * SIN(b.lat) + COS(a.lat) * COS(b.lat) * COS(a.lon - b.lon)
    ) * 6371.01) AS km
FROM 
    restaurants a,
    restaurants b
WHERE
    b.id > a.id
GROUP BY
    a.id
HAVING
    MIN(ACOS(
        SIN(a.lat) * SIN(b.lat) + COS(a.lat) * COS(b.lat) * COS(a.lon - b.lon)
    ) * 6371.01) >= X
ORDER BY
    MIN(ACOS(
        SIN(a.lat) * SIN(b.lat) + COS(a.lat) * COS(b.lat) * COS(a.lon - b.lon)
    ) * 6371.01) 
```

其中 X 是您希望它们之间的最小公里数。

# java - 需要说明 java.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListener

> ID：11588714
> 
> 赞同：2
> 
> 时间：2012-07-21T01:13:21.747
> 
> 标签：java, spring, maven, spring-webflow

这不是一个问题。我试图找到以下行为的原因。

我正在开发涉及 Spring、Hibernate 和 Struts2 等技术的简单 Web 应用程序。

我使用 Maven 3 作为构建工具。当我开始使用 eclipse Juno 版本运行项目时，出现以下错误：

```
java.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListener 
```

但是在`pom.xml`我添加了 spring web 框架的依赖项时，当我在 eclipse 中列出 jars 时，我可以看到这个 Context loader 文件就在那里。

但是当我将以下插件配置添加到时`pom.xml`，不会引发此异常：

```
<plugin>
    <version>2.9</version>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-eclipse-plugin</artifactId>
    <configuration>
        <wtpversion>2.0</wtpversion>
    </configuration>
</plugin> 
```

我只是想找到这种行为的原因。提前感谢您提供任何线索。

我已将以下 maven 插件集成到 maven 中。

![在此处输入图像描述](../Images/6cce79e212ef614b2476b18a6e6fff7f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:43:46.967

将 Maven 依赖项添加到您的部署程序集中

# javascript - 功能检测不适用于 Internet Explorer 中的事件

> ID：11588716
> 
> 赞同：0
> 
> 时间：2012-07-21T01:14:06.350
> 
> 标签：javascript, cross-browser, dom-events, browser-feature-detection

我正在尝试编写一个跨浏览器事件添加方法，但它在 IE 中根本不起作用，这是代码：

***索引.html***

```
<!doctype html>
<html>
    <head>
    </head>

    <body>            
        <script type="text/javascript" src="helper.js"></script>
        <script type="text/javascript" src="script.js"></script>
    </body>

</html> 
```

***助手.js***

```
var eventUtil = {

    add : function(el, type, fn){
        if(typeof(addEventListener) !== "undefined"){
            el.addEventListener(type, fn, false);
        } else if (typeof(attachEvent) !== "undefined"){
            el.attachEvent("on"+type, fn);  
        } else {
            el["on"+type] = fn;
        }
    }    
} 
```

***脚本.js***

```
(function(){
    var printMsg= function(){            
        document.write("hello");
    };
    eventUtil.add(document.body, "click" , printMsg);
}()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T01:37:13.930

你需要做：

```
add : function(el, type, fn){
    if(typeof(el.addEventListener) !== "undefined"){
        el.addEventListener(type, fn, false);
    } else if (typeof(el.attachEvent) !== "undefined"){
        el.attachEvent("on"+type, fn);  
    } else {
        el["on"+type] = fn;
    } 
```

正如你所拥有的：

```
 if(typeof(addEventListener) !== "undefined"){ 
```

这将始终`undefined`不是`addEventListener`全局变量/函数，而是元素上的方法。

# jquery - 创建动态选择菜单 Rails 3.2.6 的问题

> ID：11588717
> 
> 赞同：1
> 
> 时间：2012-07-21T01:14:09.020
> 
> 标签：jquery, ruby-on-rails, jquery-plugins

数周以来，我一直在尝试找到一种解决方案，以根据所选国家/地区填充州下拉菜单。看来我将不得不使用某种类型的脚本来使其正常工作。不幸的是，我根本不懂现代脚本。我看过 jQuery，但无法告诉你它在做什么。

我有一个用户模型，其中用户属于一个国家和州。一个国家有许多用户和许多州。一个国家属于一个国家，有很多用户。

我订阅了 RailsCasts 以访问修改后的 Dynamic Select Menu #88 视频。

[http://railscasts.com/episodes/88-dynamic-select-menus-revised](http://railscasts.com/episodes/88-dynamic-select-menus-revised)

看起来修订版不适用于较新版本的 Rails。当我尝试使用 RailsCast 中的代码时，我不得不稍微修改 Rails 代码。我按原样使用脚本，但将人员更改为用户以匹配我的 Rails 应用程序。如果所选国家/地区没有州，该脚本应该在屏幕上隐藏州信息。在某一时刻，它隐藏了屏幕上的所有字段，而不仅仅是状态。否则，我只会得到按国家分组的整个州列表。经过一番激愤后，我决定删除脚本。我害怕让我的整个编辑/创建页面再次消失。我花了几个小时恢复我的应用程序的旧版本，才发现是脚本导致了我的问题。

我决定看看这个，因为 Ruby on Rails 代码看起来并不那么吓人。但是我不明白其中一些代码应该去哪里。我也不知道我是否还需要做更多的工作才能使其正常工作。类别将是我的国家，子类别将是我的州。小部件将是我的用户。至少我是这么看的。

[http://samuelmullen.com/2011/02/dynamic-dropdowns-with-rails-jquery-and-ajax/](http://samuelmullen.com/2011/02/dynamic-dropdowns-with-rails-jquery-and-ajax/)

在 jQuery 部分，我不知道第二和第三段代码是放到 application.js 还是其他地方。它的写作方式我会这么认为。在“视图”部分中，它说要在类别文件夹下创建一个视图，在我的情况下是国家文件夹。我的视图文件夹中只有一个用户文件夹。我不知道在这一点上我会把这个观点放在哪里。

我在部分中有我的 collection_select 语句，它以新的和编辑的形式呈现。我不知道这是否会引起一些混乱。从我所了解的一点点看，当我查看页面的源代码时，我在任一页面（user_country_id，user_state_id）中看到的 id、标签等都没有任何区别。

如果可能的话，我想使用添加到状态的 collection_select 语句的 where 子句来执行此操作。如果可以在 country collection_select 语句中引用选定的值，那对我来说会容易得多。我在想这样的事情：

```
<%= collection_select(:user, :state_id, State.where(:country_id => user_selected_country_id).order('name'), :id, :name) %> 
```

说我完全迷失了是一种轻描淡写的说法。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:41:02.623

我自己对 js/jQuery 不太熟悉，但这些类似的问题可能会有所帮助：[Observe_field in rails 3](https://stackoverflow.com/questions/3846089/observe-field-in-rails-3)和[Rails observe_field using jQuery](https://stackoverflow.com/questions/2127529/rails-observe-field-using-jquery)。第一个问题提到[了这个博客](http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/)，其中包含 Rails 中旧 Prototype`observe_field`辅助方法的 jQuery 等效代码，第二个问题链接到[git 上的类似内容](https://github.com/splendeo/jquery.observe_field)。

# css - 当其中一个的高度设置为自动和最大高度时，如何使具有 2 个不同背景的 2 个 div 的高度相等？

> ID：11588724
> 
> 赞同：2
> 
> 时间：2012-07-21T01:15:40.000
> 
> 标签：css, html

到目前为止，我至少已经查看了 20 个线程，如果之前已经回答过这个问题，我很抱歉，但我找不到适合我特定 css 布局的解决方案。

我想以leftcolumn等于contentcolumn的方式将2列的高度设置为彼此相等。我试过使用多个这样的javascript：`

```
$(document).ready(function() {

    // get the heights
    l = $('#contentcolumn').height();

    // get maximum heights of all columns
    h = Math.max(l);

    // apply it
    $('#leftcolumn').height(h);
    }); 
```

和：

```
document.getElementById("leftcolumn").style.maxHeight = document.getElementById("contentcolumn").style.height; 
```

和：

```
$("#contentcolumn").height($("#leftcolumn").height()) 
```

第一个代码的问题在于它会将左侧 div 降低到我什至不知道的非常长的高度。第二个和第三个代码根本没有改变。

有人可以帮助我吗？我知道这个问题可能有一个非常简单的解决方案，但我就是找不到，我只是在找到之前无法入睡！

清理后的新网页：

```
<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<link href="style.css" rel="stylesheet" type="text/css">
</head>
<body>
<div id="maincontainer">
<div id="topsection"></div>
<div id="leftcolumn"></div>
<div id="contentcolumn">
</div>
</font>
</body>
</html> 
```

清理后的新 CSS：

```
body,
html {
background: #cacaca url(img/bg.png) repeat-x;
}
#maincontainer {
width:1000px;
margin:0 auto;
background: url(img/bg5.png) repeat-x;
}
#topsection {
background: #ffffff url(img/bg4.png) repeat-y;
height: 10px;
}
#leftcolumn {
float:left;
height: 100%;
width: 145px;
background: url(img/bg2.png) repeat-y;
}
#contentcolumn {
margin-left: 145px; /*Set left margin to LeftColumnWidth*/
min-height: 800px;
height: auto;
background: #dbdbdb url(img/bg3.png) repeat-x;
padding:10px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T05:21:30.890

你可以在没有 javascript 的情况下做到这一点——甚至可以跨浏览器的方式。这利用了相对定位元素中的绝对定位元素。如果将#maincontainer div 设置为`position: relative`并将#leftcolumn div 设置为`position: absolute`，则可以同时设置#leftcolumn 上的`top`和`bottom`，因此它始终假定其父级（#maincontainer）的高度，即使#maincontiner 的高度由其子级设置（在这种情况下为#contentcolumn）。使用这个[jsfiddle 演示](http://jsfiddle.net/PsSsm/)并使用 #contentcolumn 的高度来查看 #leftcolumn 是如何响应的。

HTML：

```
<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
    </head>
    <body>
        <div id="maincontainer">
            <div id="topsection"></div>
            <div id="leftcolumn"></div>
            <div id="contentcolumn"></div>
        </div>
    </body>
</html> 
```

CSS：

```
body,
html {
    background: #cacaca;
}

#maincontainer {
    position: relative;
    width:500px;
    margin:0 auto;
    background: #000;
}

#topsection {
    background: #ffffff;
    height: 10px;
}

#leftcolumn {
    position: absolute;
    top: 10px; /* room for #topsection */
    bottom: 0;
    left: 0;
    width: 145px;
    background: red;
}

#contentcolumn {
    margin-left: 145px; /*Set left margin to LeftColumnWidth*/
    min-height: 500px;
    height: auto;
    background: #dbdbdb;
    padding:10px;
} 
```

# photoshop - 如何在 Photoshop 中创建从白色到彩色和从彩色到黑色的色板

> ID：11588725
> 
> 赞同：-1
> 
> 时间：2012-07-21T01:15:56.130
> 
> 标签：photoshop

假设我有一个值为 0xff0f0f 的 A 颜色和两种基本的黑白颜色。如何快速创建由白色和 A（较浅）之间以及 A 和黑色（较深）之间的所有中等颜色组成的样本？

先感谢您！

**编辑：**我正在练习一些像素艺术着色，我想创建一个调色板（或样本），其中包含从饱和度 = 0 到饱和度 = 1 的有限颜色。例如：

![在此处输入图像描述](../Images/7d237c0f0ed87888749cf462c0fd93ee.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T16:14:59.097

不幸的是，仅在 Photoshop 中没有简单的方法可以做到这一点。如果您愿意进入 Illustrator，您可以在那里设置您的色板，然后将它们导出为可以加载到 PS 中的 .ASE。

这是我要做的：

1.  打开 Illustrator 并选择你的主要颜色。将它们放在样本文件夹中。

2.  选择组并转到颜色指南调色板。在这里，您将看到您选择的每种颜色都变亮和变暗。在调色板下拉菜单下，您可以找到一些有用的设置，尤其是颜色指南选项，您可以在其中指定步数。

3.  将新生成的颜色拖放到您的 swathces 调色板中。一旦它们都就位，转到 Swatches 调色板下拉菜单并选择**Save Swatch Library as ASE**。将其保存在合乎逻辑的地方。:)

4.  现在转到 Photoshop 并在那里打开色板面板。选择**替换色板。**（加载色板附加它们）并导航到您的 ASE 文件。

5.  快乐的图画。

PS：我无法上传图片进行澄清，因为我没有足够的声誉。打哈欠。我会尽可能更新答案。

# php - 用户可以从我的来源获取我的数据库信息吗

> ID：11588740
> 
> 赞同：0
> 
> 时间：2012-07-21T01:20:28.063
> 
> 标签：php, mysql

我必须为我和一个朋友的项目制作一些 .php 行。我将在下面发布来源。我想知道访问我的页面的用户是否能够从我的源中获取我的数据库信息。如果是。有什么方法可以防止这种情况。

我的 admin.php [http://pastebin.com/K4hhrJK1](http://pastebin.com/K4hhrJK1)

我的 index.php [http://pastebin.com/kmiQBF94](http://pastebin.com/kmiQBF94)

抱歉，pastebin 链接。在过去的 15 分钟里，我尝试让我的 .php 代码显示在一个不起作用的代码框中，它实际上是在线程上显示部分 html。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T01:23:48.153

最好的方法是在前端代码中没有任何连接信息。创建类并让类完成数据库工作。使用所有连接信息创建一个 database.php，并将其包含在类文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T01:24:01.543

如果您的 Web 服务器配置正确，那么访问者将看不到 PHP 源代码，因此无法获取您的数据库凭据。但是有很多方法可以错误配置服务器以使其成为可能。

# django - django：将额外的参数传递给具有通用视图类的模板

> ID：11588743
> 
> 赞同：2
> 
> 时间：2012-07-21T01:21:25.377
> 
> 标签：django, django-class-based-views

我想使用相同的模板在 django 中显示来自不同模型的记录，并使用通用类查看器。通用类查看器已经接受了模板中需要的大部分参数，除了一个。

如何将上下文中的这个额外参数传递给模板？

我尝试将它作为 urlconf 中的第三个（额外）参数传递，但没有成功：

```
# in urlconf.py
url(r'^processador/(?P<pk>[\w-]+)/$',
    UpdateView.as_view(
        model=Processador,
        template_name='model_form.html',
        success_url=reverse_lazy('processador-list'),
        ),
    {'extrainfo': "Processador"},
    name='processador-detail'
),

url(r'^software/(?P<pk>[\w-]+)/$',
    UpdateView.as_view(
        model=Software,
        template_name='model_form.html',
        success_url=reverse_lazy('software-list'),
        ),
    {'extrainfo': "Software"},
    name='software-detail'
), 
```

在我的应用程序中会有几个这样的 urlconfs。

一种可能性是对视图类进行子类化并提供我自己的 get_context_data 方法实现，该方法添加所需的键值对。

但是这种解决方案过于重复，因为它会应用于视图类的每次使用。

也许可以只创建视图类的一个子类。这个新类中的 as_view 类方法将接受一个新的命名参数，该参数将进入重新定义 get_context_data 的上下文中。

我在 django 和 Python 方面没有太多经验，所以我不确定如何做到这一点，我正在接受帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T22:06:56.743

我认为你可以只用 的一个子类来做到这一点`UpdateView`，而不是我认为你认为你需要的每个模型一个。

将参数`as_view`设置为返回的对象的属性，所以我认为你可以这样做

```
class MyUpdateView(UpdateView):
    extrainfo = None

    def get_context_data(self, **kwargs):
        context = super(MyUpdateView, self).get_context_data(self, **kwargs)
        context['extrainfo'] = self.extrainfo

        return context 
```

然后在你的 urlconf 中调用它

```
url(r'^processador/(?P<pk>[\w-]+)/$',
    MyUpdateView.as_view(
        model=Processador,
        template_name='model_form.html',
        success_url=reverse_lazy('processador-list'),
        extrainfo="Processador"
        ),
    name='processador-detail'
) 
```

不过，我完全不确定您是否应该这样做——它正朝着`urls.py`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T21:27:19.717

我一直在通过子类化通用视图来做到这一点，如下所示：

在`urls.py`：

```
url(r'^processador/(?P<pk>[\w-]+)/$', ProcessadorUpdateView.as_view(), name='processador-detail'),
url(r'^software/(?P<pk>[\w-]+)/$', SoftwareUpdateView.as_view(), name='software-detail'), 
```

并在`views.py`：

```
class ProcessadorUpdateView(UpdateView):
    model=Processador
    template_name='model_form.html'
    success_url=reverse_lazy('processador-list') # I'm not sure this will work; I've used get_success_url method
    def get_context_data(self, **context):
        context[self.context_object_name] = self.object
        context["extrainfo"] = "Processador"
        return context 
```

事实上，我总是创建自己的子类，即使不需要任何额外的功能；这样我就有了更多的控制权，并且视图和 urlconfigs 清楚地分开了。

# php - 在整个页面加载过程中连续播放

> ID：11588746
> 
> 赞同：0
> 
> 时间：2012-07-21T01:22:20.620
> 
> 标签：php, javascript, ajax

我确信已经问过这个问题，但我找不到任何适合的东西。

我需要在整个页面加载过程中连续播放音频。我不想使用闪光灯或帧，我知道这是可能的，因为下一个 soundcloud 的出现。Flash 很痛苦，框架会破坏我的导航按钮等。你甚至不能看 soundclouds 标记，所以我真的不知道他们是如何做到的，但它令人印象深刻。

我想知道 soundcloud 是如何做到这一点或如何做到这一点的？老实说，我对新的 soundcloud 很感兴趣，很想看看那里的代码，但我很确定这不会发生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T01:53:22.370

Soundcloud 可能正在使用新的 HTML5 历史 API 来发挥他们的魔力。但实现这一点并不像将您的网站放入 iframe 那样容易。

这是一个非常棒的 AP​​I 介绍：http: [//diveintohtml5.info/history.html](http://diveintohtml5.info/history.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T03:23:16.203

我目前也在寻找一个音乐家网站，该网站需要在遍历网站时连续播放音频。如果您正在使用 Wordpress 进行开发，我注意到最近发布了一些 Wordpress 主题来支持这一点。

然而，我有一种感觉，其中的连续音频功能是通过 Soundcloud 提供的——直到我在接下来的几周里玩它们之前，还不能 100% 确定。

# php - 将 html 表单数组传递给 php 文件

> ID：11588750
> 
> 赞同：-1
> 
> 时间：2012-07-21T01:22:59.783
> 
> 标签：php, html, arrays, forms, http-post

我正在尝试从 html 表单中获取信息并将其作为数组传递给我的 php 文件

这是我的 html 表单的代码片段：

```
<form action ="upload.php" method="post">
    Name<input id= "n" type="text" name="info[name]" /><br />
    Address: <input id="a" type = "text" name="info[address]" /><br />
    City: <input id="c" type = "text" name="info[city]" /><br />
</form> 
```

然后在我的 php 文件中，我尝试打印内容：

```
$information = $_POST['info'];

echo $information['name']; 
```

但没有任何东西打印到页面上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T01:52:31.017

我不认为你可以`$_POST`直接用你的 HTML 来做到这一点（把它全部推到一个单独的数组中（除了 ））。您必须在开始时做一些额外的 PHP 工作。

首先，出于对所有神圣事物的热爱，让您的 HTML 输入名称更简洁：

```
<form action ="upload.php" method="post">
Name<input id= "n" type="text" name="info_name" /><br />
Address: <input id="a" type = "text" name="info_address" /><br />
City: <input id="c" type = "text" name="info_city" /><br />
</form> 
```

现在，对于 PHP：

```
//this is how I would do it, simply because I don't like a bunch of if/elseifs everywhere..
//define all the keys (html input names) into a single array:
$infoKeys[0]='name';
$infoKeys[1]='address';
$infoKeys[2]='city';
//define your end array
$information=array();
//now loop through them all and if they're set, assign them to an array. Simple:
foreach ( $infoKeys as $val ){

if(isset($_POST['info_'.$val])){

$information[$val]=$_POST['info_'.$val];

}//end of isset

else{

$information[$val]=null;

}//end of no set (isset===false)

}//end of foreach

//now, when you want to add more input names, just add them to $inputKeys. 
//If you used the if/elseif ways, your doc would be plastered in ifs and elseifs. 
//So i personally think the looping through the array thing is neater and better. 
//but, feel free to change it, as I have a feeling I'll have allot of critics because of this method.

// anyway, that should do it. The var $information should be an array of all your 'info_' html inputs.... 
```

快乐编码！

# ubuntu - Heroku 错误与 rake db:pull - ！点击加载错误：无法加载此类文件--sqlite3

> ID：11588751
> 
> 赞同：1
> 
> 时间：2012-07-21T01:23:31.827
> 
> 标签：ubuntu, heroku, sqlite, taps

我越来越

```
 !    Taps Load Error: cannot load such file -- sqlite3 
```

即使我安装了“sqlite3”我的 database.yml 设置为在所有环境中使用 Postgres

红宝石是`1.9.3p125`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T03:01:59.433

Heroku 不支持 sqlite3。

因此，您需要将 Gemfile 更改为：

```
group :development, :test do
  gem 'sqlite3'
end

group :production do
  gem 'pg'
end 
```

`bundle install`然后再跑

# ios - 将 UIButton 作为子视图添加到 UITabBar

> ID：11588752
> 
> 赞同：9
> 
> 时间：2012-07-21T01:23:34.737
> 
> 标签：ios, uiview, uibutton, uitabbarcontroller, uitabbar

我正在尝试在我的应用程序中实现一个可隐藏的 UITabBar。我已经设置了所有的动画，它们工作得很好。我只是在让我的 UIButton“拉标签”显示标签栏时遇到问题。它没有响应触摸事件 UIControlEventTouchUpInside。我将下拉选项卡添加到 UITabBarController 中的 UITabBar：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
//Add pull
    pullButton = [UIButton buttonWithType:UIButtonTypeCustom];
    UIImage *image = [UIImage imageNamed:@"TabBarPull.png"];
    pullButton.frame = CGRectMake(self.tabBar.frame.size.width - image.size.width, -image.size.height + 3, image.size.width, image.size.height);
    [pullButton setImage:image forState:UIControlStateNormal];
    [pullButton addTarget:self action:@selector(pullBarTapped:) forControlEvents:UIControlEventTouchUpInside];
    pullButton.userInteractionEnabled = YES;
    [self.tabBar addSubview:pullButton];
} 
```

这是标签栏打开和关闭的样子：

![TabBar 未隐藏](../Images/aba0af37a58a20afad0b87f9efbeaa1f.png) ![标签栏隐藏](../Images/3557d8178492e79b70c197f66c7bfc96.png)

编辑：我已经确定问题是因为按钮落在了 UITabBar 的框架之外。看起来我将不得不将按钮放在 UITabBar 之外......动画噩梦。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-21T04:44:50.093

您仍然可以将 添加`UIButton`到`UITabBarController`的主视图中，而不是在`UITabBar`...中。`[myUITabBarController.view addSubview:pullButton]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T06:37:24.403

由于您有隐藏部分在 UITabbar 中工作并且从我在这里看到的答案中，一种替代方法是将 UIButton 保留在 UITabbar 中，但在隐藏 UITabbar 时也将按钮添加到视图中（所以你将有两个按钮那个覆盖）。**当标签栏显示时，使用视图上的hidden**属性隐藏您添加到视图中的按钮。

# visual-studio - 在 Windows 8 C++/Xaml 应用程序中以编程方式创建的 UI 控件上设置数据绑定

> ID：11588756
> 
> 赞同：0
> 
> 时间：2012-07-21T01:24:07.823
> 
> 标签：visual-studio, xaml, visual-c++, windows-8, microsoft-metro

根据[此页面](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh758320.aspx)和其他一些参考资料，在 Windows 8 中使用 Xaml/C++ 创建数据绑定的方法是执行以下操作：

在 C++ 中：

*   创建一个可绑定的类，
*   将 DataContext 属性设置为该类的一个实例。

在 Xaml 中：

```
<Object AnyProperty="{Binding Path=AnotherProperty, Mode=TwoWay}" /> 
```

`Object`如果我通过 C++构建，我将如何实现该绑定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T17:31:00.250

这个页面对你有帮助吗？

[如何：在代码中创建绑定](http://msdn.microsoft.com/en-us/library/ms742863%28v=vs.110%29.aspx)

页面上的示例似乎使用文本块上的 SetBinding 实例方法将属性绑定到文本块的文本属性。也许C ++中有类似的方法？

# php - 在 K2 组件 joomla 2.5 上添加自定义字段类型

> ID：11588759
> 
> 赞同：2
> 
> 时间：2012-07-21T01:24:50.220
> 
> 标签：php, joomla, joomla-extensions, joomla-k2, joomla-component

我已经尝试在谷歌上搜索好几天了，但我找不到一些有用的文章或资源可以帮助我解决我的问题。

我想知道我是否能够为 K2 组件创建一个插件以添加将出现在“添加额外字段”表单的“类型”下拉字段中的新字段类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:17:53.803

我刚刚忘记了我的这篇文章，但实际上无法在 k2 中添加自定义字段类型，该字段类型将出现在下拉列表或其他类似内容中，但我使用了 K2 插件来添加我想要的所需字段链接我希望它可以帮助您@tato429 或其他任何与我之前有同样问题的人[http://getk2.org/extend/extensions/date/item/90-example-k2-plugin-for-developers](http://getk2.org/extend/extensions/date/item/90-example-k2-plugin-for-developers)

# ruby-on-rails-3 - BancBox REST API POST createClient

> ID：11588760
> 
> 赞同：0
> 
> 时间：2012-07-21T01:25:02.137
> 
> 标签：ruby-on-rails-3, payment-processing

我花了最后一天试图让它在我的 Rails 应用程序中工作，但不断得到响应：

```
{"code"=>"E-C-343", "message"=>"Unrecognized JSON Request."} 
```

BancBox 的[文档](http://www.bancbox.com/api/view/2)很简单，所以我在如何解决这个问题上陷入了僵局。

有没有人有一个使用 REST 在 BancBox 上成功调用 createClient 的 API 示例？

我使用 HTTParty 的 Post API 调用：

```
include HTTParty
format :json

def save_with_bancbox(params = {})

  post_params = { :authentication =>  { :apiKey => BANCBOX_KEY,
                                        :secret => BANCBOX_SECRET
                                        },
                  :subscriberId => BANCBOX_ID,
                  :firstName => params[:first_name],
                  :lastName => params[:last_name],
                  :ssn => params[:ssn],
                  :dob => params[:dob],
                  :address => { :line1 => params[:address_line_1],
                                :line2 => params[:address_line_2],
                                :city => params[:city],
                                :state => params[:state],
                                :zipcode => params[:zipcode]
                                },
                  :homePhone => params[:dob],
                  :email => params[:email]
                  }

  response = HTTParty.post( BANCBOX_REST_URL, 
                            :body => post_params)

    logger.debug "Response -- #{response}"

  save!

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T21:20:59.117

请在更改 apikey、secret 和subscribedid 后尝试以下代码

* * *

```
require "net/https"

require 'rubygems'

require 'json'

require 'httparty'

###########################bancbox.rb in config/initializers#################

BANCBOX_API_KEY = "__KEY__"

BANCBOX_API_SECRET = "__SECRET__"

BANCBOX_SUBSCRIBER_ID = "__SUB_ID__"

BANCBOX_API_URL = "https://sandbox-api.bancbox.com/BBXPortRest"

module Bancbox

        class API

                include HTTParty 
                debug_output $stdout
                base_uri "#{BANCBOX_API_URL}"

                def initialize(u=BANCBOX_API_KEY,p=BANCBOX_API_SECRET)
                        auth = {:apiKey => u, :secret => p}
                        @options = {:body => {:authentication =>auth,:subscriberId=>BANCBOX_SUBSCRIBER_ID}, :headers => { 'Content-Type' => 'application/json', 'Accept' => 'application/json' }}
                end

                #USERS
                def create_client(options={})  
                        options = options.merge(@options[:body])
                        @options.merge!({:body => options.to_json})
                        response = self.class.post("/createClient",@options)
                        #required_fields- subscriberId,firstName,lastName,ssn,dob,address,homePhone,email
                end

                def get_schedules(options={})
                        @options.merge!({:query => {:subscriberId => BANCBOX_SUBSCRIBER_ID}})
                        @options.merge!({:query => options})
                        self.class.post("/getSchedules",@options)
                end
        end
end

b = Bancbox::API .new

b.create_client({:firstName=> "Bipen",:lastName=> "Sasi",:ssn=>"334-444-4444",:dob=> Date.parse("January 1st 1988"), :address=>{:line1=> "4408 walnut st", :line2=>"apt 3r",:city=> "philly",:state=>"pa",:zipcode=>"19110"}, :homePhone=> "2672551161",:email=>"bipen@lokalty.com"}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T02:26:33.110

我认为您应该将请求发布到

```
https://sandbox-api.bancbox.com/BBXPortRest/createClient 
```

代替

```
https://sandbox-api.bancbox.com/BBXPortRest/ 
```

还要确保将内容类型设置为 application/json

通常，您将请求发布到[https://sandbox-api.bancbox.com/BBXPortRest/<method](https://sandbox-api.bancbox.com/BBXPortRest/<method) >

# vb.net - Visual Basic 2010 - 未处理无效的 CastException

> ID：11588764
> 
> 赞同：0
> 
> 时间：2012-07-21T01:25:57.157
> 
> 标签：vb.net

我对视觉基础相当陌生。我试图制作一个根据用户输入为您生成代码的程序。但是每当我单击生成时，我都会收到此错误

```
Invalid CastException was unhandled.
Conversion from string "//Generated using MAYAN.  Minecr" to type 'Double' is not valid." 
```

它说它受以下行的影响：

```
Code_Viewer.TextCodeViewer.Text = "//Generated using EASYMC.  EasyModCreator.tk" + vbNewLine 
```

这是我的源代码..

感谢任何帮助的人！:)

[http://pastebin.com/wHBbqK5K](http://pastebin.com/wHBbqK5K)

我决定把它贴在 pastebin 上，这样更容易阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:38:17.597

使用[& 运算符](http://msdn.microsoft.com/en-us/library/wfx50zyk%28v=vs.80%29.aspx)而不是[+ 运算符](http://msdn.microsoft.com/en-us/library/9c5t70w2%28v=vs.80%29.aspx)，例如：

```
Code_Viewer.TextCodeViewer.Text = "//Generated using EASYMC.  EasyModCreator.tk" & vbNewLine 
```

# r - 将 Rcpp 与特定于 Windows 的包含一起使用

> ID：11588765
> 
> 赞同：9
> 
> 时间：2012-07-21T01:26:21.437
> 
> 标签：r, rcpp

我正在尝试使用 Rcpp 编写一些 C++ 代码来访问 Windows 中的一些操作系统级别的东西。一旦我包含`windows.h`or `shlobj.h`，我就会得到一堆编译错误。当我运行这段代码时，它可以工作，所以我知道我掌握了一些基础知识。但是，当我取消注释任何与 Windows 相关的行时`#include`，它就不起作用了。

```
library(inline)

inc <- '
#include <iostream>
#include <stdio.h>
// #include <windows.h>
// #include <shlobj.h>

using namespace std;
'

src <- '
    cout << "foo\\n";
    printf("foo2\\n");

    return Rcpp::wrap(20);
'

fun <- cxxfunction(signature(),
                   includes = inc,
                   src, plugin="Rcpp")
fun() 
```

注意：当我在 RStudio 中运行它时，控制台的输出`cout`和`printf`出现在控制台中，但是当我从 Windows RGui 运行它时，输出不会出现。我认为这与 RGui 处理文本输出的方式有关。

当我取消注释这些包含行时，我得到的错误如下所示：

```
In file included from c:\rtools\gcc-4.6.3\bin\../lib/gcc/i686-w64-mingw32/4.6.3/../../../../i686-w64-mingw32/include/objbase.h:154:0,
                 from c:\rtools\gcc-4.6.3\bin\../lib/gcc/i686-w64-mingw32/4.6.3/../../../../i686-w64-mingw32/include/ole2.h:16,
                 from c:\rtools\gcc-4.6.3\bin\../lib/gcc/i686-w64-mingw32/4.6.3/../../../../i686-w64-mingw32/include/windows.h:94,
                 from file43c2f9e3518.cpp:22:
c:\rtools\gcc-4.6.3\bin\../lib/gcc/i686-w64-mingw32/4.6.3/../../../../i686-w64-mingw32/include/objidl.h:598:52: error: macro "Realloc" requires 3 arguments, but only 2 given
c:\rtools\gcc-4.6.3\bin\../lib/gcc/i686-w64-mingw32/4.6.3/../../../../i686-w64-mingw32/include/objidl.h:598:56: error: ISO C++ forbids initialization of member 'Realloc' [-fpermissive]
c:\rtools\gcc-4.6.3\bin\../lib/gcc/i686-w64-mingw32/4.6.3/../../../../i686-w64-mingw32/include/objidl.h:598:56: error: making 'Realloc' static [-fpermissive] 
```

... 等等

关于如何使这项工作的任何提示？

* * *

**更新**：我设法消除了一些错误，但仍有一些错误。

`Realloc`通过遵循[http://tolstoy.newcastle.edu.au/R/e2/devel/06/11/1242.html](http://tolstoy.newcastle.edu.au/R/e2/devel/06/11/1242.html)的一些建议，我也得到了错误

`inc`应替换为：

```
inc <- '
#include <iostream>
#include <stdio.h>

// This is taken from http://tolstoy.newcastle.edu.au/R/e2/devel/06/11/1242.html
#include <R.h>
#undef Realloc
#define R_Realloc(p,n,t) (t *) R_chk_realloc( (void *)(p), (size_t)((n) * sizeof(t)) )
#include <shlobj.h>

using namespace std;
' 
```

我还通过传递`-fpermissive`给编译器来消除其他错误，如来自这个问题：[How to set g++ compiler flags using Rcpp and inline?](https://stackoverflow.com/questions/7063265/how-to-set-g-compiler-flags-using-rcpp-and-inline)

```
settings <- getPlugin("Rcpp")
settings$env$PKG_CXXFLAGS <- paste('-fpermissive',settings$env$PKG_CXXFLAGS,sep=' ')

fun <- cxxfunction(signature(), includes = inc,
                   src, plugin = "Rcpp",
                   settings = settings)
Sys.unsetenv('PKG_CXXFLAGS') 
```

但是还是有一些错误：

```
In file included from c:\rtools\gcc-4.6.3\bin\../lib/gcc/i686-w64-mingw32/4.6.3/../../../../i686-w64-mingw32/include/objbase.h:154:0,
                 from c:\rtools\gcc-4.6.3\bin\../lib/gcc/i686-w64-mingw32/4.6.3/../../../../i686-w64-mingw32/include/ole2.h:16,
                 from c:\rtools\gcc-4.6.3\bin\../lib/gcc/i686-w64-mingw32/4.6.3/../../../../i686-w64-mingw32/include/shlobj.h:86,
                 from file43c267d3279.cpp:26:
c:\rtools\gcc-4.6.3\bin\../lib/gcc/i686-w64-mingw32/4.6.3/../../../../i686-w64-mingw32/include/objidl.h:599:25: error: expected identifier before '(' token
c:\rtools\gcc-4.6.3\bin\../lib/gcc/i686-w64-mingw32/4.6.3/../../../../i686-w64-mingw32/include/objidl.h:599:25: error: 'parameter' declared as function returning a function
c:\rtools\gcc-4.6.3\bin\../lib/gcc/i686-w64-mingw32/4.6.3/../../../../i686-w64-mingw32/include/objidl.h:599:25: error: expected ')' before ',' token 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T16:33:09.657

我发现了最后一个问题。看起来 R 和 Windows 标头都定义了`Realloc`and `Free`，但定义之间存在一些冲突。因此，在包含 Windows 标头之前，我需要`#undef`这两个宏。还有将`-fpermissive`标志传递给编译器的问题。

```
library(Rcpp)
library(inline)

inc <- '
// Taken from http://tolstoy.newcastle.edu.au/R/e2/devel/06/11/1242.html
// Undefine the Realloc macro, which is defined by both R and by Windows stuff
#undef Realloc
// Also need to undefine the Free macro
#undef Free

#include <windows.h>

#include <iostream>
#include <stdio.h>

using namespace std;
'

src <- '
    cout << "foo\\n";
    printf("foo2\\n");

    return Rcpp::wrap(20);
'

# Need this for the Windows headers to work
# Set -fpermissive, from: http://stackoverflow.com/questions/7063265/how-to-set-g-compiler-flags-using-rcpp-and-inline
settings <- getPlugin("Rcpp")
settings$env$PKG_CXXFLAGS <- paste('-fpermissive',settings$env$PKG_CXXFLAGS,sep=' ')

fun <- cxxfunction(signature(),
                   includes = inc,
                   src,
                   plugin = "Rcpp",
                   settings = settings)

fun() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T03:41:31.783

在第一个近似值上，如果您可以使用 R 本身构建，您只能使用 Rcpp 构建，因为 Rcpp 只是通过大量 C++ 胶水和模板魔法使 API 变得更好。

所以除非你让这些头文件单独用 R 构建一个程序，否则我看不出它如何用 Rcpp 构建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T03:26:59.170

我也有这些错误。599 行错误花了我很长时间才修复。我注释掉了第 599 行并修复了下面的问题。

```
c:\rtools\gcc-4.6.3\bin\../lib/gcc/i686-w64-mingw32/4.6.3/../../../../i686-w64-    mingw32/include/objidl.h:599:25: error: expected identifier before '(' token
c:\rtools\gcc-4.6.3\bin\../lib/gcc/i686-w64-mingw32/4.6.3/../../../../i686-w64-mingw32/include/objidl.h:599:25: error: 'parameter' declared as function returning a function
c:\rtools\gcc-4.6.3\bin\../lib/gcc/i686-w64-mingw32/4.6.3/../../../../i686-w64-mingw32/include/objidl.h:599:25: error: expected ')' before ',' token 
```

我不喜欢这个解决方案，但我的程序现在正在编译。这样做可能会在未来出现问题，因此我记录了我的更改。有人有更好的解决方案吗？

# python - 在使用 Pmw 笔记本创建的选项卡中重复内容

> ID：11588767
> 
> 赞同：0
> 
> 时间：2012-07-21T01:26:30.417
> 
> 标签：python, tkinter

我正在使用 Tkinter 和 Pmw 编写一个小型应用程序。使用 Pmw NoteBook 类有一个接口，允许用户创建新的选项卡进行输入。

这些选项卡中的每一个都具有完全相同的内容（单选按钮和输入字段），因此我希望仅将内容写入一个函数中。但这不起作用，我不明白为什么不这样做。我在 Traceback 中得到一个对我没有意义的 NameError，因为已经为整个类定义了“页面”，我可以在其他函数定义中使用它。

```
<type 'exceptions.NameError'>: global name 'page' is not defined 
```

我正在尝试做的最简单的工作版本是（基于 Pmw 附带的 NoteBook_2 示例）：

```
import Tkinter
import Pmw

class Demo:
    def __init__(self, parent):
        self.pageCounter = 0 
        self.mainframe = Tkinter.Frame(parent)
        self.mainframe.pack(fill = 'both', expand = 1)
        self.notebook = Pmw.NoteBook(self.mainframe)
        buttonbox = Pmw.ButtonBox(self.mainframe)
        buttonbox.pack(side = 'bottom', fill = 'x')
        buttonbox.add('Add Tab', command = self.insertpage)
        self.notebook.pack(fill = 'both', expand = 1, padx = 5, pady = 5)

    def insertpage(self):
        # Create a new Tab
        self.pageCounter = self.pageCounter + 1
        pageName = 'Tab%d' % (self.pageCounter)
        page = self.notebook.insert(pageName)
        self.showPageContent()

    def showPageContent(self):
        # This function should contain the content for all new Tabs
        tabContentExample = Tkinter.Label(page, text="This is the Tab Content I want to repeat\n")
        tabContentExample.pack() 

# Create demo in root window for testing.
if __name__ == '__main__':
    root = Tkinter.Tk()
    Pmw.initialise(root)
    widget = Demo(root)
    root.mainloop() 
```

谁能给我一个解决方案的指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T13:29:56.147

`showPageContent``page`正在使用未定义的变量。您在另一种方法中本地定义它，但该方法不知道它`showPageContent`。您要么需要使用`self.page`，要么传递`page`给`showPageContent`：

```
page = self.notebook.insert(pageName)
self.showPageContent(page) 
```

# php - 将具有特定名称的文件从站点保存到磁盘驱动器

> ID：11588775
> 
> 赞同：0
> 
> 时间：2012-07-21T01:27:37.157
> 
> 标签：php

这是我的代码，它不能完美运行。有人可以帮我找出问题吗？

```
$urls = file('list.txt', FILE_IGNORE_NEW_LINES);
foreach($urls as $url) {
    copy(trim($url),"c:/data/$url");
    echo "$url is done";
    ob_flush();
    flush();
} 
```

某些 URL 不存在。

我希望 URL 中的每个文件都以 URL 的名称保存。

URL 将如下所示：`http://site.com/index.htm`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T02:35:56.817

这是一个[PHP cURL](http://pt2.php.net/manual/en/book.curl.php)函数：

```
/* gets the data from a URL */
function get_urlData($url) {
  $ch = curl_init();
  $timeout = 5;
  curl_setopt($ch,CURLOPT_URL,$url);
  curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
  curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,$timeout);
  $data = curl_exec($ch);
  curl_close($ch);
  return $data;
} 
```

将它放在您现有的 PHP 文件中`foreach`。

**您的代码已改编：**

```
$urls = file('list.txt', FILE_IGNORE_NEW_LINES);

foreach($urls as $url) {
  $data = get_urlData($url);
  copy($data, "c:/data/$url");
  echo "$url is done";
  ob_flush();
  flush();
} 
```

未经测试，但应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T01:37:58.543

```
$urls = file('list.txt', FILE_IGNORE_NEW_LINES);
foreach($urls as $url) {

    $con=file_get_contents($url);
    if($con !== false)
    {    
        if(file_put_contents(trim($url),$con))
        {    
            echo "$url is done";

            //don't really see the point of these, but okay...
            ob_flush();

            flush();    
        }
    }
} 
```

那应该这样做。

# vb.net - 数据库和二维矩阵有什么区别？

> ID：11588776
> 
> 赞同：0
> 
> 时间：2012-07-21T01:27:47.000
> 
> 标签：vb.net, string

我正在创建一个可以处理 100k 字符串的 Visual Basic 程序。是的！“100K”。每个字符串都是一个句子。我需要确保我的程序中的搜索功能相当快。搜索函数返回内存中包含搜索关键字的所有字符串。

我是 VB 的新手。我的问题是我应该使用数据库（没有经验）还是应该使用二维字符串数组？每种方法的优点和缺点是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T01:40:18.130

如果您需要多次搜索，只需将所有遇到的单词映射到句子列表（即句子的索引在`Dictionary<string, List<int>>`哪里）。`int`

如果您太担心内存使用情况，您可以通过将句子表示表示为单词列表来压缩句子表示（可以使用 String.Intern，以避免内存中相同单词的重复副本）。

# sql-server - 当使用常量的相同查询返回 122K 时，为什么使用参数的查询不返回任何行

> ID：11588777
> 
> 赞同：0
> 
> 时间：2012-07-21T01:28:11.340
> 
> 标签：sql-server, query-optimization

我在 SQL Server 2008 中，我一直在努力让一些旧代码使用参数，而不是使用字符串连接构建查询。我还在努力通过向表中添加索引等事情来加快工作速度。

我正在使用的表有很多列（它是星型模式报告数据库的核心）并且有超过 4M 行。表的创建如下所示：

```
CREATE TABLE [dbo].[rptTransaction](
    ...
    [Date] [nvarchar](10) NULL,
...
) ON [PRIMARY] 
```

是的，日期列的名称很差，因为它与关键字冲突。他们*使用*字符串日期[记住它是一个报告数据库]。

当我在 MS SQL Server Management Studio 中执行以下代码时：

```
DECLARE @testDate NVARCHAR  = N'2012/03/01';

SELECT COUNT(*)
  FROM rptTransaction AS t 
 WHERE t.Date >= @testDate
       AND t.Date <= @testDate
OPTION (RECOMPILE);
GO 
```

结果如下：

```
(No column name)
0 
```

另一方面，当我执行以下代码时：

```
DECLARE @testDate NVARCHAR  = N'2012/03/01';

SELECT COUNT(*)
  FROM rptTransaction AS t 
 WHERE t.Date >= N'2012/03/01'
       AND t.Date <= N'2012/03/01'
OPTION (RECOMPILE);
GO 
```

结果如下：

```
(No column name)
124888 
```

（我使用的是 OPTION (RECOMPILE)，否则参数化版本会执行全表扫描，这需要很长时间。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T01:45:37.190

运行此代码：

```
declare @testDate nvarchar = N'2012/03/01';
select @testDate ; 
```

我的一个系统，输出只是`2`.

试试这个：

```
declare @testDate nvarchar(10) = N'2012/03/01';
select @testDate ; 
```

好多了：

> 2012/03/01

这是您查询的两个意想不到的部分之一。另一个是你要求你的值是*>* =***和***<=。换句话说，满足查询的唯一方法是参数是否与您存储的数据完全匹配。`2`如果该列都是有效日期，则永远不会这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T06:04:26.143

nvarchar 默认使用长度 1。在这种情况下指定长度为 10

# c# - 使用存储在数据库中的架构和数据动态创建填充的模板化 MS Office Excel 文件

> ID：11588778
> 
> 赞同：0
> 
> 时间：2012-07-21T01:28:22.790
> 
> 标签：c#, excel, ms-office, openxml

我有一个我们认为是模板文件的 Excel 文件。目前，用户下载文件，然后手动将数据逐行/逐行输入到文件中。然而，我想要做的是将此模板保存到数据库中，然后根据请求，使用此保存的模板动态创建一个 excel 工作表，然后继续使用来自其他数据库的数据填充模板化 excel 文件的列和行表。以下是我目前的一些问题——

如何从 excel 模板文件中提取模板的架构？如何使用提取的模板信息创建 excel 文件？如何确保当我开始用数据填充创建的文件时，我从正确的行和列开始？请问我该如何解决这些？有什么好的例子可以说明如何做到这一点吗？

另外，Microsoft Office SDK 下载站点在哪里？我整天都在寻找。

# python - 为什么 Haystack 返回非词干结果？

> ID：11588780
> 
> 赞同：1
> 
> 时间：2012-07-21T01:28:55.483
> 
> 标签：python, django, search, elasticsearch, django-haystack

我使用 Haystack 和 ElasticSearch 作为后端在我的 Django 应用程序中实现搜索。我不明白它如何处理词干。我的索引模型在其文本中包含“嵌入”一词。搜索“嵌入式”会产生正确的结果。搜索“嵌入”一无所获。

我正在以文档显示的最简单方式进行查询：

```
SearchQuerySet().filter(content='embed') 
```

我深入研究了代码，发现 ElasticSearch 被击中：

```
import requests
url = 'http://127.0.0.1:9200/haystack/modelresult/_search?from=0&size=20'
kwargs = {"data": '{"query": {"filtered": {"filter": {"fquery": {"query": {"query_string": {"query": "django_ct:(component_catalog.component)"}}, "_cache": true}}, "query": {"query_string": {"query": "(embed)", "default_operator": "AND", "default_field": "text", "auto_generate_phrase_queries": true, "analyze_wildcard": true}}}}}', "timeout": 10}
requests.get(url, **kwargs) 
```

问题：

为什么 Haystack 不返回词干结果？

是什么`(embed)`意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T03:54:11.027

`query_string`使用[Lucene 的查询语法](http://lucene.apache.org/core/3_6_0/queryparsersyntax.html#Escaping%20Special%20Characters)，因此`(embed)`表示围绕“嵌入”的逻辑分组。来自 Lucene 文档，这是一个示例：

```
(jakarta OR apache) AND website 
```

对于您的情况，您可以忽略它。这可能是 Haystack 自动插入的东西。

我的第一个倾向是说您的映射不正确。你是如何分析和索引你的领域的？您是否使用了 Snowball 词干分析器？

您可以使用 curl 来测试各种分析器的响应方式，当您没有得到想要的结果时，这是一个方便的技巧：

```
curl -X GET "http://localhost:9200/test/_analyze?analyzer=snowball&pretty=true" -d "embedded"
{
   "tokens" : [ {
      "token" : "embed",
      "start_offset" : 0,
      "end_offset" : 8,
      "type" : "<ALPHANUM>",
      "position" : 1
    } ]
} 
```

# objective-c - 当其中一个超级视图具有 clipsToBounds 时，如何获得识别手势的子视图

> ID：11588781
> 
> 赞同：1
> 
> 时间：2012-07-21T01:29:12.710
> 
> 标签：objective-c, ios, uikit

我有一个附加了手势的子视图。它的 1 个超级视图有 ClipsToBounds = YES 但它自己的超级视图没有。我的手势被忽略了。我该如何防止这种情况。

这是视图层次结构：

-- view (clipsToBounds = YES) frame: {0,0,240,240}
---- view (clipsToBounds = NO) frame: (0,0,480, 240}
------ view (手势添加到这个视图没有得到240x240 和 480x240 内识别的特大尺寸）

# sql-injection - 有什么方法可以绕过php登录页面？在我该死的易受攻击的 Web 应用程序 (DVWA) 上测试 SQLi

> ID：11588785
> 
> 赞同：0
> 
> 时间：2012-07-21T01:30:08.750
> 
> 标签：sql-injection

我正在使用该死的易受攻击的 Web 应用程序 (DVWA)，并且我正在关注有关如何执行 SQL 注入的指南和教程。然而，问题是我不相信任何我喜欢使用的工具会起作用，考虑到 DVWA 页面需要先登录。

如果不进行身份验证，每个页面都会将您重定向回 /login.php 以首先登录。有没有办法以某种方式修改它以使其无论登录还是注销都可以工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T02:43:09.183

您可以尝试在登录表单本身上使用 sql 注入策略并创建自己的工作登录名，或者尝试首先通过其他方式找到工作登录名并使用该登录名进入其他页面以进行 sql 注入攻击。

由于此应用程序被故意构建为易受攻击，因此登录页面本身可能易受攻击。

或者，由于该应用程序是开源的，您可以自己修改它以删除登录要求。

# wpf - 根据窗口宽度调整大小控件

> ID：11588787
> 
> 赞同：2
> 
> 时间：2012-07-21T01:30:34.943
> 
> 标签：wpf

我在堆栈面板中有 5 个边框，每个边框的宽度为 Window width/5。当我最大化窗口时，每个边框宽度都应该根据窗口宽度/5 调整大小。

我已经尝试使用转换器，但它不起作用，因为转换器将如何知道窗口已调整大小。

```
<Window x:Class="ItemPanelTemplateTest.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <StackPanel Orientation="Horizontal">
        <Border Height="20" Background="Red" Width="105" />
        <Border Height="20" Background="Green" Width="105" />
        <Border Height="20" Background="Yellow" Width="105" />
        <Border Height="20" Background="Blue" Width="105" />
        <Border Height="20" Background="Orange" Width="105" />
    </StackPanel>
</Window> 
```

我不想在代码隐藏上写任何东西，因为我正在使用 MVVM。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T01:36:41.260

使用不同于`StackPanel`. 这里最好的候选者是`Grid`and `UniformGrid`，但由于后者需要更少的输入，这里是：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <UniformGrid Height="20" Rows="1">
        <Border Background="Red" />
        <Border Background="Green" />
        <Border Background="Yellow" />
        <Border Background="Blue" />
        <Border Background="Orange" />
    </UniformGrid>
</Window> 
```

网格将随窗口自动调整大小，然后统一调整其内容的大小。

# ruby-on-rails - S3 上的 Paperclip 正在从 url 更改文件扩展名

> ID：11588789
> 
> 赞同：4
> 
> 时间：2012-07-21T01:30:42.260
> 
> 标签：ruby-on-rails, ruby-on-rails-3, amazon-s3, paperclip

我写了一个 rake 任务，从维基百科下载一张给定名人名字的图像，但由于某种原因，在 S3 上存储时，文件扩展名要么被删除，要么被更改为 .txt

否则该文件是正确的。

有任何想法吗？

来自我的名人模特：

```
has_attached_file :pic, 
  :styles => { :medium => "300x300>", :thumb => "100x100>" },
  :default_style => :medium,
  :storage => :s3,
  :s3_credentials => "#{Rails.root}/config/s3.yml",
  :path => "/:style/:img_name.:extension" 
```

从我的 rake 任务中：

```
desc "Update celeb pics from wiki"
task :update_celeb_pics => [:environment] do
  include ApplicationHelper
  Celeb.all.each do |celeb|
    if !celeb.name.start_with?("(")
      puts celeb.name
      celeb.pic = open(getImage(celeb.name))
      celeb.save
    end
  end
end 
```

getImage 方法是一个返回字符串的助手

```
 require 'open-uri'
    require 'uri'

    module ApplicationHelper
      def getInfo(name)
        Nokogiri::XML(open(URI.escape("http://en.wikipedia.org/w/api.php?action=opensearch&search=#{name}&limit=1&namespace=0&format=xml")))
      end

      def nokoPage(name)
        Nokogiri::XML(open(getURL(name)))
      end

      def getImage(name)
        "http:" + nokoPage(name).css("table img")[0].attribute("src").value if !nokoPage(name).css("table img").empty?
      end

      def getDescription(name)
        getInfo(name).css("Description").text
      end

      def getURL(name)
        getInfo(name).css("Url").text
      end

      def getBday(name)
        bday = nokoPage(name).css("span.bday")
        return Date.parse(bday[0].text) if !bday.empty?
        return Date.today
      end

      def getDday(name)
        dday = nokoPage(name).css("span.dday")
        return Date.parse(dday[0].text) if !dday.empty?
      end

    end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-21T08:38:49.390

这是因为

```
self.pic = open("http://something.com/bla/image.png") 
```

不是这里最好的解决方案。就在昨天，我有一个合并到 Paperclip 中的拉取请求，可以让你这样做

```
self.pic = URI.parse(getImage(name)) 
```

这将确保您的图片的内容类型与下载的文件匹配，图片的文件名设置为下载的文件的名称。

您获得 txt 扩展名的原因是因为 open 返回一个 StringIO 对象，该对象实际上将文件名命名为“stringio.txt”。您的文件名可能已被 s3 代码更改，但扩展名仍为“.txt”

我建议您将 Gemfile 链接到回形针的 github 存储库，运行 bundle 并重试。

干杯，阿迪亚

# java - 为什么我们可以从外部类访问内部类中的变量？

> ID：11588793
> 
> 赞同：3
> 
> 时间：2012-07-21T01:31:45.647
> 
> 标签：java

如果我在内部类中将变量声明为私有，则该变量对外部类可见。我无法理解这里的逻辑。理想情况下，它不应该只能在内部类中访问吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T04:27:21.390

我认为答案是主观的，因为问题基本上似乎是在问为什么 Sun/Oracle 的语言设计者决定允许某种行为。

也就是说，这是一个答案的尝试......

首先是一些术语，在类中声明的类是嵌套类。内部类是非静态嵌套类，它必须驻留在外部类的实例中。所以内部类是外部类的一部分，从这个意义上说，内部类的所有成员在一定程度上都是外部类的成员。

[http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)

> 与实例方法和变量一样，内部类与其封闭类的实例相关联，并且可以直接访问该对象的方法和字段。此外，由于内部类与实例相关联，它本身不能定义任何静态成员。

另一个想法是，内部类的有效用例排除了允许内部类对外部类隐藏成员的必要性。也就是说，没有外部类不会与内部类耦合的概念。

那为什么要允许`private`呢？因为私有成员仍然可以对其他可能访问内部类实例的类隐藏。

# c# - 使用按钮的鼠标单击循环 (C#)

> ID：11588796
> 
> 赞同：3
> 
> 时间：2012-07-21T01:32:28.267
> 
> 标签：c#, button, loops, mouse

我对 C# 有点陌生，所以请多多包涵！

我正在编写一个程序，通过 RS232 将代码发送到自制的望远镜底座。

我目前遇到的问题希望非常简单（但对我来说很难！）

例如说我有一个按钮，我想在按住鼠标左键时执行一个循环（这将是一个连续的 232 数据流），然后当释放鼠标左键时我需要停止循环并执行另一行代码。

我真诚地希望我提供的信息足够，并且有人足够好心来帮助我（我已经在互联网上搜索了答案，相信我！）

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T01:36:01.407

挂钩按钮上的 MouseDown 和 MouseUp 事件。MouseDown 事件应该产生一个线程，或向线程发出信号以开始执行循环。MouseUp 事件应该向线程发出信号以停止执行循环。

像这样的东西：

```
public class InterruptibleLoop
{
    private volatile bool stopLoop;
    private Thread loopThread;

    public void Start() {
        // If the thread is already running, do nothing.
        if (loopThread != null) {
            return;
        }

        // Reset the "stop loop" signal.
        stopLoop = false;

        // Create and start the new thread.
        loopThread = new Thread(LoopBody);
        loopThread.Start();
    }

    public void Stop() {
        // If the thread is not running, do nothing.
        if (loopThread == null) {
            return;
        }

        // Signal to the thread that it should stop looping.
        stopLoop = true;

        // Wait for the thread to terminate.
        loopThread.Join();

        loopThread = null;
    }

    private void LoopBody() {
        while (!stopLoop) {
            // Do your work here
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T01:38:08.250

方法一：首先创建一个定时器，其间隔设置为您希望它发送数据的频率。并在滴答事件中发送数据。为按钮的鼠标按下事件和按钮的鼠标向上事件创建一个事件。在鼠标按下事件中，启动计时器。在鼠标向上事件中，停止计时器。

方法 2：不是在鼠标按下事件上启动计时器，而是启动一个新线程，在其中执行连续循环的数据发送。在鼠标向上事件上停止线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T17:12:21.107

```
namespace Scope_Project_Ver_2
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();            
            // *** Output data timer ***
            otimer.Interval = 50;
            // otimer.Interval = isendFreq;
            otimer.Tick += new EventHandler(otimer_Tick);
            // *** Input data timer ***
            // itimer.Interval = 601;                        <- to be unchecked
            // itimer.Tick += new EventHandler(itimer_Tick); <- to be unchecked
        }

        public int b1,b2,b3,b4,b5;
        public string sb1, sb2, sb3, sb4, sb5;
        public int ivorSpeed;
        public string svorSpeed;
        public int ihorSpeed;
        public string shorSpeed;
        public int isendFreq;

        private void sendDataB_Click(object sender, MouseEventArgs e)
        {
            if (sendDataCB.Checked)
            {
                sendDataCB.Checked = false;
                if (otimer.Enabled)
                    otimer.Stop();
            }
            else
            {
                sendDataCB.Checked = true;
                if (!otimer.Enabled)
                    otimer.Start();
            }
        }

        void otimer_Tick(object sender, EventArgs e)
        {
            SerialPort port = new SerialPort(
            "COM1", 9600, Parity.None, 8, StopBits.One);
            port.Open();
            port.Write("Q"); //                         Q
            port.Write(sb1); //                         1
            port.Write(sb2); //                         2
            // Binary stuff  // Ver Speed Binary        3           
            byte[] bverbinary = new byte[1];
            byte verbinary = 0;
            verbinary = Byte.Parse(svorSpeed);
            bverbinary[0] = verbinary;
            port.Write(bverbinary, 0, bverbinary.Length);
            // End of Binary stuff for Ver Speed
            // Binary stuff // Hor Speed Binary         4
            byte[] bhorbinary = new byte[1];
            byte horbinary = 0;
            horbinary = Byte.Parse(shorSpeed);
            bhorbinary[0] = horbinary;
            port.Write(bhorbinary, 0, bhorbinary.Length);
            port.Write(sb5);  // Movement               5
            port.Close();
        }

        private void vorSpeed_ValueChanged(object sender, EventArgs e)
        {
            // MessageBox.Show((this.vorSpeed.Value).ToString());
            this.Text = "You changed the Vertical Speed to " + vorSpeed.Value;
            ivorSpeed = (int)vorSpeed.Value;
            svorSpeed = ivorSpeed.ToString(); 
        }

        private void horSpeed_ValueChanged(object sender, EventArgs e)
        {
            // MessageBox.Show((this.horSpeed.Value).ToString());
            this.Text = "You changed the Horizontal Speed to " + horSpeed.Value;
            ihorSpeed = (int)horSpeed.Value;
            shorSpeed = ihorSpeed.ToString(); 
        }

        private void scopeUp_MouseDown(object sender, MouseEventArgs e) // Scope Up On
        {
            b1 = 2;
            b2 = 0;
            b5 = 1;
            sb1 = b1.ToString();
            sb2 = b2.ToString();
            sb3 = b3.ToString();
            sb4 = b4.ToString();
            sb5 = b5.ToString();
        }

        private void scopeUp_MouseUp(object sender, MouseEventArgs e) // Scope Up Off
        {

        }

        private void scopeRight_MouseDown(object sender, MouseEventArgs e)
        {
            b1 = 1;
            b2 = 2;
            b5 = 1;
            sb1 = b1.ToString();
            sb2 = b2.ToString();
            sb3 = b3.ToString();
            sb4 = b4.ToString();
            sb5 = b5.ToString();
        }

        private void scopeRight_MouseUp(object sender, MouseEventArgs e)
        {

        }

        private void scopeDown_MouseDown(object sender, MouseEventArgs e)
        {
            b1 = 2;
            b2 = 1;
            b5 = 1;
            sb1 = b1.ToString();
            sb2 = b2.ToString();
            sb3 = b3.ToString();
            sb4 = b4.ToString();
            sb5 = b5.ToString();
        }

        private void scopeDown_MouseUp(object sender, MouseEventArgs e)
        {

        }

        private void scopeLeft_MouseDown(object sender, MouseEventArgs e)
        {
            b1 = 0;
            b2 = 2;
            b5 = 1;
            sb1 = b1.ToString();
            sb2 = b2.ToString();
            sb3 = b3.ToString();
            sb4 = b4.ToString();
            sb5 = b5.ToString();
        }

        private void scopeLeft_MouseUp(object sender, MouseEventArgs e)
        {

        }

        private void scopeStop_Click(object sender, EventArgs e)
        {
            b1 = 0;
            b2 = 0;
            b5 = 0;
            sb1 = b1.ToString();
            sb2 = b2.ToString();
            sb3 = b3.ToString();
            sb4 = b4.ToString();
            sb5 = b5.ToString();
        }

        private void sendFreq_ValueChanged(object sender, EventArgs e)
        {
            this.Text = "You changed the send Freq to " + sendFreq.Value + " m/s";
            isendFreq = (int)sendFreq.Value;
        }
    }
} 
```

# jquery - Facebook 风格的对话 div

> ID：11588802
> 
> 赞同：1
> 
> 时间：2012-07-21T01:34:48.507
> 
> 标签：jquery, html, ajax, scroll

所以我正在编写一个聊天室。我一直在寻找一个好的答案，但我还没有找到一个。我需要从底部开始滚动，当有新消息进入时，需要显示消息（出现在底部）。但通常该消息是隐藏的，您必须向下滚动到它。我发现了一个 Jquery 选项，当内容刷新时会滚动到底部，但它会阻止您向上滚动。

我尽我所能解释了这一点......有什么想法吗？谢谢！

# asp.net - 将 Facebook API 从 v 5 切换到 v 6

> ID：11588803
> 
> 赞同：0
> 
> 时间：2012-07-21T01:35:05.487
> 
> 标签：asp.net, facebook, authentication, facebook-c#-sdk

我有这段代码使用 Facebook C# API v5 并在 AJAX 调用上运行以确定用户是否经过身份验证：

```
// Make sure user is logged into Facebook and authroized this application
if (!FacebookWebContext.Current.IsAuthenticated() ||
!FacebookWebContext.Current.IsAuthorized(new[] { "email" }))
{
    result.ResultCode = BasicResultCode.NotAuthorized;
    return result;
}

var fbuid = FacebookWebContext.Current.UserId; 
```

在 v6 中，Facebook.Web 命名空间不存在，而且 FacebookWebContext 也无处可寻。我用什么代替上面的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T02:23:02.147

我不确定这是否对你有帮助，但据我了解，Facebook 从 c# sdk 中删除了这些功能，因为他们想改变一些 Facebook cookie 的结构。通过删除 FacebookWebContext，他们/您不会遇到 cookie 结构可能已更改且不再兼容的问题。

相反，我认为您应该尝试通过[Facebook Javascript SDK进行身份验证](https://developers.facebook.com/docs/reference/javascript/)

尝试使用 [FB.getLoginStatus](https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)和/或 [FB.getAuthResponse](https://developers.facebook.com/docs/reference/javascript/FB.getAuthResponse/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T10:52:55.477

FacebookWebContext 不再可用。这已在版本 5 中标记为已弃用。对解决方案执行 Rebuild All 时，检查 Visual Studio 中的警告屏幕。

现在您必须使用 Facebook 命名空间中的 FacebookClient()。

然后，您必须检查可能有多个结果的 FacebookOAuthException。[您可以在https://developers.facebook.com](https://developers.facebook.com)上找到 FacebookOAuthException 的文档

# c - Geany编译

> ID：11588806
> 
> 赞同：3
> 
> 时间：2012-07-21T01:35:33.223
> 
> 标签：c, geany

不知道把这个放在哪里......但我在 2 个系统（笔记本电脑和台式机）上运行 Geany。在我的笔记本电脑上它运行良好，但在我的桌面上运行代码时出现此错误：

'"./whatevername"' 不是内部或外部命令、可运行程序或批处理文件

我不知道 wtf 有什么问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T22:09:42.150

如果我可以提供一点帮助：您需要设置 PATH 变量。在 Windows 机器上，它位于注册表中。这是你的做法： http: [//geekswithblogs.net/renso/archive/2009/10/21/how-to-set-the-windows-path-in-windows-7.aspx](http://geekswithblogs.net/renso/archive/2009/10/21/how-to-set-the-windows-path-in-windows-7.aspx)

否则，无论您的编译器可能是什么（gcc、tcc、cpp）都将找不到。

# java - 如何从 GUI 启动 Jzy3d 图形？

> ID：11588809
> 
> 赞同：1
> 
> 时间：2012-07-21T01:36:14.327
> 
> 标签：java, swing, opengl, graphics, jzy3d

我想知道如何从 GUI 启动 Jzy3D 图形。基本上，我创建了一个简单的 GUI，如果我的用户单击“3D 图”JMenuItem，它将允许我的用户显示带有散点的 3D 图。但是，当我这样做时，会弹出一个没有任何内容的纯白色窗口，而不是一个带有图形的白色窗口！此外，如果我将 Jzy3D 的东西放在 main 方法中，它运行得非常好。我不想这样做，我希望图表仅在用户单击该 JMenuItem 时才弹出。

这是代码的相关部分。

```
public class OpenChart {

public void launch(){

    int size = 10000;
    float x;
    float y;
    float z;

    Coord3d[] points = new Coord3d[size];

    for(int i=0; i<size; i++){
        x = (float)Math.random() - 0.5f;
        y = (float)Math.random() - 0.5f;
        z = (float)Math.random() - 0.5f;
        points[i] = new Coord3d(x, y, z);
    }

    Scatter scatter = new Scatter(points);
    System.out.println("fwee: " + points.length);
    Chart chart = new Chart();
    chart.getAxeLayout().setMainColor(org.jzy3d.colors.Color.RED);
    chart.getView().setBackgroundColor(org.jzy3d.colors.Color.WHITE);
    chart.getScene().add(scatter);

    ChartLauncher.openChart(chart);
}

} 
```

GUI JMenuItem 代码：

```
testAll3D.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e)
        {   
            OpenChart open = new OpenChart();
            open.launch();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T04:21:46.387

由事件分派线程 (EDT) 分派的所有摇摆事件。

这也负责处理绘制请求。没有使用过 jzy3d，这两者可能会互相阻塞（这可以解释为什么当你独立运行它时它会起作用）。

您可以尝试在另一个线程中启动图表。

# suds - Suds 没有缓存 wsdls

> ID：11588810
> 
> 赞同：-1
> 
> 时间：2012-07-21T01:36:32.250
> 
> 标签：suds

我正在使用 Suds 通过 SOAP 进行 RPC 调用，并且客户端拒绝在调用之间进行缓存（导致等待 30 多秒等待客户端初始化）。任何人都可以看到除了以下内容之外还需要做什么才能启用缓存？

```
client = Client(WSDL_URL)
cache = client.options.cache
cache.setduration(days=10)
cache.setlocation(SUDS_CACHE_LOCATION) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-09T19:03:48.880

这可能是库本身的一个错误。缓存文件需要以二进制方式写入。这可以在 cache.py 中修复：

1) 在 FileCache.put() 中，更改这一行：

```
f = self.open(fn, 'w') 
```

到

```
f = self.open(fn, 'wb') 
```

2) 在 FileCache.getf() 中，更改这一行：

```
return self.open(fn) 
```

到

```
return self.open(fn, 'rb') 
```

有关更多详细信息，请参阅：

[Suds 没有重用缓存的 WSDL 和 XSD，尽管我希望它能够](https://stackoverflow.com/questions/6038226/suds-is-not-reusing-cached-wsdls-and-xsds-although-i-expect-it-to)

# ruby - 在carrierwave中，使用simple_fields_for，迭代符号（：图片），我如何找到图像URL的符号？

> ID：11588825
> 
> 赞同：1
> 
> 时间：2012-07-21T01:39:49.517
> 
> 标签：ruby, ruby-on-rails-3, carrierwave, symbols, simple-form

我有一个`_form`用`simple_fields_for`. 一切正常，除了我无法弄清楚包含不同 URL 的符号，我特别想要拇指 URL。

例如，`picture.image_uploader_url`- 但我没有实际的对象，只有 :pictures 正在迭代的符号。到目前为止`:image_uploader_url.to_s`没有给出任何有用的东西，我意识到这是因为它总是只给出符号名称。

超级形态：

```
<%= simple_form_for(@project) do |f| %>
[...]
    <%= f.simple_fields_for :pictures do |builder| %>
            <%= render "pictures/form", f: builder %>
[...] 
```

子表单（图片/_form）：

```
<% unless [:image_uploader_url].nil? or [:image_uploader_url].empty? %>
    <%=  image_tag(:thumb_url.to_s) %>
<% end %>
<%= f.input :name %>
<%= f.input :description %>
<%= f.input :image_uploader, as: :file %>
<%= f.hidden_field :image_uploader_cache %> 
```

我一般如何知道我可以访问哪些符号以及如何使用它们？也许我没有它们？

编辑：我没有“图片”可以使用，只有“：图片”，我正在努力寻找我能从中得到的一切（即图片有一个 image_uploader，我可以得到 image_uploader_url(:thumb) 但我不能用符号来做这个，我也不知道如何得到当前迭代的图片）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T02:42:57.213

要获取 的拇指 url `picture`，只需执行以下操作：`picture.thumb.url`。要获取原始网址，`picture.url`就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T22:43:42.753

据我所知，没有办法找到与 :pictures 符号相关的单个图片。我最终只是废弃了符号并传递了局部变量（我试图避免让控制器直接提供更多信息）。

我仍然没有一个令人满意的答案，但这是我能想到的最好的答案。

# php - 用于简单信息检索的 Facebook Graph API 身份验证

> ID：11588827
> 
> 赞同：1
> 
> 时间：2012-07-21T01:41:40.797
> 
> 标签：php, facebook, facebook-graph-api, google-calendar-api

[为了解决Stack Exchange Web Applications 上](https://webapps.stackexchange.com/q/29136/22363)的一个问题中详述的问题，我编写了一个小的 PHP 脚本，它给出了一个页面名称和一个适当的 access_token 将该页面创建的事件作为 iCal 日历文件吐出。显然，这个文件不应该被人类访问，而是通过例如谷歌日历来订阅。

我通过 Facebook Graph Explorer 创建了 access_token，后来才意识到它过期了。那么问题来了：我可以得到一个不会过期的页面 access_token 吗？如果做不到这一点，我能得到一个有效期很长的吗？

如果这是不可能的 - 有没有人知道该怎么做？每小时手动提供一次 access_token 感觉不太可行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T19:42:01.710

@CBroe 让我走上了正确的道路，@MPaulo 进一步帮助了我。下面是我如何在我创建的脚本文件的开头解释该过程，以解决我在上面的问题开头链接到的问题中描述的问题。

* * *

首先，您需要一个访问令牌。这是一件复杂的事情 - 获得一个普通的很容易，但我们想要一个永久持续的。如场景 5 所述：[https://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)，我们需要：

1.  获取常规的短期访问令牌
2.  将其交换为长期访问令牌
3.  使用我们的新访问令牌，获取永久页面访问令牌。

首先，在[https://developers.facebook.com/apps/](https://developers.facebook.com/apps/)创建一个新的 Facebook 应用程序。它可以随便命名，它不会被真正使用。填写一个域 - 哪个没关系，只需要一个显示简单 HTML 并且不执行任何重定向的域：我使用自己的静态网页[http://jobjorn.se/](http://jobjorn.se/)，但[http://example .org/](http://example.org/)也可以工作。

按照 MPaulo 在 Stack Overflow 上的指示：[https](https://stackoverflow.com/a/11238327/564628) ://stackoverflow.com/a/11238327/564628 ，使用应用程序 ID - 来自您新创建的应用程序 - 并访问此页面： [https ://www.facebook.com/dialog /oauth?client_id=MY_APP_ID&redirect_uri=MY_SITE_URL&scope=manage_pages&response_type=token](https://www.facebook.com/dialog/oauth?client_id=MY_APP_ID&redirect_uri=MY_SITE_URL&scope=manage_pages&response_type=token) 务必替换“MY_APP_ID”和“MY_SITE_URL”。

然后，通过访问此页面将您的短期访问令牌交换为长期访问令牌： [https](https://graph.facebook.com/oauth/access_token?client_id=MY_APP_ID&client_secret=MY_APP_SECRET&grant_type=fb_exchange_token&fb_exchange_token=YOUR_ACCESS_TOKEN) : //graph.facebook.com/oauth/access_token?client_id=MY_APP_ID&client_secret=MY_APP_SECRET&grant_type=fb_exchange_token&fb_exchange_token=YOUR_ACCESS_TOKEN 确保替换“MY_APP_ID "、“MY_APP_SECRET”和“YOUR_ACCESS_TOKEN”（最后一个是您从第一页收到的访问令牌）

最后，在此处获取您的页面访问令牌： [https](https://graph.facebook.com/me/accounts?access_token=YOUR_NEW_ACCESS_TOKEN) ://graph.facebook.com/me/accounts?access_token= YOUR_NEW_ACCESS_TOKEN 请务必替换“YOUR_NEW_ACCESS_TOKEN”（您从第二页收到的访问令牌）

粘贴在下面。它应该是永久性的，但由于一个错误，它可能只持续两个月 - 有关详细信息，请参阅[https://developers.facebook.com/bugs/151056591697025](https://developers.facebook.com/bugs/151056591697025)。不过好像已经修好了。你可以在这里测试它：[https ://developers.facebook.com/tools/debug/access_token](https://developers.facebook.com/tools/debug/access_token)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T02:26:35.100

创建一个应用程序并使用应用程序的凭据进行身份验证。只要您不读取用户特定数据，就不需要用户 access_token。

# php - AJAX/JS/PHP：提交选择框的值而不刷新页面或单击按钮

> ID：11588831
> 
> 赞同：3
> 
> 时间：2012-07-21T01:42:52.230
> 
> 标签：php, javascript, jquery, ajax

我目前正在使用 Ajax 提交输入字段，而无需刷新页面或单击按钮。该函数适用于文本输入字段，但不适用于发布**选择框**的值，然后 php 回显结果。我使用 firebug 工具进行检查，Ajax/js 函数没有发布任何内容。

如何提交选择框的值，以便我可以与 php 回显？ [例子](http://webprolearner2346.zxq.net/TabsNextPrev/index.php)

**JS**

```
<script>
$(document).ready(function() {
        var timer = null; 
        var dataString;   
          function submitForm(){
                         $.ajax({ type: "POST",
                         url: "index.php",
                         data: dataString,
                         success: function(result){
                         $('#item_input').text( $('#resultval', result).html()); 
                             }
                            });
                            return false;
           }
             $('#item_name').on('keyup', function() {
             clearTimeout(timer);
             timer = setTimeout(submitForm, 050);
             var name = $("#item_name").val();
             dataString = 'name='+ name;
          });
 }); 
</script> 
```

**PHP**

```
<?php
      if ($_POST)
                {
                  $item_name     = $_POST['name'];
                  echo ('<div id="item_input"><span id="resultval">'.$item_name.'</span></div>');
                }
?> 
```

**HTML**

```
<html>
<form method="post" id="form" name="form">  
<select name="item_name" value="<? $item_name ?>" size="4" id="item_name">
     <option value="">Item1</option>
     <option value="">Item2</option>
     <option value="">Item3</option>
     <option value="">Item4</option>
</select>
</form>
<div id="item_input"></div>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T02:30:51.580

select tags 不会触发`keyup`event ，您应该`change`改用，尝试以下操作：

```
 $('#item_name').on('change', function() {
     clearTimeout(timer);
     var name = $(this).val();
     dataString = 'name='+ name;
     timer = setTimeout(submitForm, 050);
 }); 
```

```
 $('#item_input').html(result); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T05:19:39.820

看来您的 js 是正确的问题在于您的 html 部分。您没有提供选择列表值。请提供值以选择列表选项。

```
$(document).ready(function() {
     var timer = null; 
     var dataString;   
     function submitForm(){
       $.ajax({ type: "POST",
                url: "index.php",
                data: dataString,
                success: function(result){

                //$('#item_input').html( $('#resultval', result).html()); 
                //$('#special').text(result); 
                //$('#item_input').html( $('#resultval').html() + '<p>' + result + '</p>'); 
                $('#item_input').html(result); 

                }

       });
       return false;
     }

    $('#item_name').on('change', function() {
     clearTimeout(timer);
     var name = $(this).val();
     dataString = 'name='+ name;
     timer = setTimeout(submitForm, 050);
    });      

}); 
```

它应该是这样或您要发布的任何值

```
<select name="item_name" value="" size="4" id="item_name">
    <option value="item1">Item1</option>
    <option value="item2">Item2</option>
    <option value="item3">Item3</option>
    <option value="item4">Item4</option>
</select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T01:48:23.393

`submitForm()`使用事件触发，`onchange`以便每次值`<select>`更改时，它都会提交。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T02:42:00.853

KeyUp 用于输入框和其他使用键盘的框。选择可以使用 onClick 或 onChange 的框，最好使用 onChange：

```
$('#item_name').change(function() {
             clearTimeout(timer);
             timer = setTimeout(submitForm, 050);
             var name = $("#item_name").val();
             dataString = 'name='+ name;
} 
```

这对你有用。

祝你好运！

# javascript - html表单验证的正确实现

> ID：11588835
> 
> 赞同：-1
> 
> 时间：2012-07-21T01:44:14.213
> 
> 标签：javascript, html, forms, validation

我编写了一段简单的 javascript 来验证复选框组。javascript 工作正常，但在 html 中正确实现它被证明是困难的。我的尝试要么导致表单被发送，尽管验证失败，或者没有提交按钮，但其他一切正常。有人能帮忙吗？谢谢

```
 <form id="form1" name="form1" method="get" action="pre_process.php">
        <input name="q" type="text" value="<?php echo $_GET['q']; ?>" size="67"/>

<input type="submit" id="search_button" onclick= "chkChecks()" />
/////this line of code submits the form even when the javascript returns false

<input class="submit" type="button" onclick="chkChecks()" />
///this code works, doesn't send the form, but also takes away my nice shiny submit button

  ///////js code/////
    function chkChecks(){
isChecked=false

for(var i=0;i<document.forms["form1"]["SearchEngines[]"].length;i++){
if(document.forms["form1"]["SearchEngines[]"][i].checked){
isChecked=true
}
}

if(isChecked){
document.forms["form1"].submit()
}
else{
alert('Please select at least one Search Engine')
return false;
}

}
</script> 
```

////也是被验证的表单部分

```
<table width="200">
              <tr>
                <td><label>
                  <input type="checkbox" name="SearchEngines[]" value="Bing" id="SearchEngines_0" checked="checked" />
                  Bing</label></td>
              </tr>
              <tr>
                <td><label>
                  <input type="checkbox" name="SearchEngines[]" value="Blekko" id="SearchEngines_1" checked="checked"  />
                  Blekko</label></td>
              </tr>
              <tr>
                <td><label>
                  <input type="checkbox" name="SearchEngines[]" value="Entireweb" id="SearchEngines_2" checked="checked" />
                Entireweb</label></td>
              </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T01:54:04.210

按钮不会提交表单 - 默认情况下它们不做任何事情。它们通常与 JavaScript 结合使用，作为 AJAX 应用程序的一部分。

按钮将在用户单击它们时提交它们所在的表单，除非您使用 JavaScript 另行指定。

检查 isChecked 变量是真还是假，如果它为假，则进行一些检查并使该变量为真。

```
if(isChecked !== true) { 
    for(var i=0;i<document.forms["form1"] ["SearchEngines[]"].length;i++){  
       if(document.forms["form1"]["SearchEngines[]"][i].checked){
          isChecked=true 
       }
    } 
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T01:56:25.957

```
<input class="submit" type="button" onclick="chkChecks()" /> 
```

您的函数`chkChecks`可能返回 false，但从属性创建的实际处理程序更像这样：

```
function(event) {
    chkChecks();
} 
```

最好使用 JavaScript 附加事件处理程序，以便识别返回值：

```
document.getElementById("submitbutton").onclick = chkChecks; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T01:56:40.140

您可以查看我在此处提交的答案：

[如果表单未自动完成，是否有办法阻止提交表单？](https://stackoverflow.com/questions/11571245/is-there-a-way-to-prevent-a-form-from-being-submitted-if-it-is-not-auto-complete/11571816#11571816)

这就是我完成表单验证的方式，还有其他工具也可以让您进行表单验证，但我想为什么不自己做，它更快更容易管理。

您可以自己在 html 上硬编码验证类，也可以在 $(document).ready 上使用 jquery 选择器

# php - 使用 php 与多个会话聊天

> ID：11588836
> 
> 赞同：0
> 
> 时间：2012-07-21T01:44:33.533
> 
> 标签：php

我正在尝试在我的网站上创建一个私人聊天模块。但我无法获得其他用户的会话。谁可以帮我这个事？

这是代码：

```
$url1 = 'onclick="window.open(\'../chat/index.php?do=chat&room_owner='.$uname.'&user='.$_SESSION['uname']['username'].'\',\'pop_up\',\'toolbar=no, top=0,location=no, directories=no, status=no, menubar=no, scrollbars=yes, resizable=yes, width=600, height=450\')"';
                    $image_path = "images/online.png";
                    $status = 'Online';

1st user(me): ?do=chat&room_owner='.$uname.' >this is working

2nd user(recipient): &user='.$_SESSION['uname']['username'].' > this is not working? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T01:52:03.307

变量的 uname 和 username 是什么？两个用户之间的通信是如何进行的？您使用的是哪个聊天模块？上述问题中究竟是什么“不起作用”？$_SESSION['uname']['username'] 应该是什么？你实际上可以打印出这个变量的值，看看它是否有任何内容：

```
echo "debug: ".$_SESSION['uname']['username']; 
```

# javascript - 阻止恶意推荐网站

> ID：11588838
> 
> 赞同：3
> 
> 时间：2012-07-21T01:45:20.177
> 
> 标签：javascript, security, .htaccess, web-traffic

我的网站从带有恶意 javascript 的网站获得了大量流量（见下文）

我不完全理解其目的，但我认为这个想法是利用我网站的高流量并操纵他们自己的流量统计数据。

我尝试使用 .htaccess 阻止推荐 URL（它们是虚假的 blogspot 站点），但这没有用。有没有其他方法可以摆脱这种垃圾流量？我的网站在专用服务器上运行，所以如果我可以做任何超出 .htaccess 的操作（如此处建议的[http://www.javascriptkit.com/howto/htaccess14.shtml](http://www.javascriptkit.com/howto/htaccess14.shtml)），请告诉我。

这是恶意代码：

```
<script type="text/javascript">
var sLocation = document.referrer.toLocaleLowerCase();
//Links to boost
var rDomains = ["http://site.com/"];
//Allowed domain referrer
var aDomains = [".com"];
var valid = 0;

//Valid referrer
for (i=0;i<aDomains.length;i++) {
//Check referrer
if (sLocation.indexOf(aDomains[i], 0) > -1) 
{
valid = 1;
break;
}
}

//Valid referrer
if (valid == 1) 
{
//Loop
for (i=0;i<rDomains.length;i++) {
//alert(rDomains[i]);
invisibleWindow("mydiv" + i,rDomains[i]);
}
}

function invisibleWindow(iframeID, url) {
divel = document.createElement("div");
divel.id = "div" + iframeID;
divel.style.width = "5px"; 
divel.style.height = "5px";
divel.style.visibility = "hidden";

//Add div
document.body.appendChild(divel);

domiframe = document.createElement("iframe");
domiframe.id = iframeID; 
domiframe.src = url;
domiframe.style.width = "5px"; 
domiframe.style.height = "5px";
domiframe.style.visibility = "hidden";

var divid = document.getElementById("div" + iframeID);
divid.appendChild(domiframe);
}

</script> 
```

这大概是代码作者写的：

[http://seotipsnewbie.blogspot.com/2011/12/script-to-get-unlimited-traffic-for.html](http://seotipsnewbie.blogspot.com/2011/12/script-to-get-unlimited-traffic-for.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:32:34.883

如果您知道这些尝试攻击的来源（您似乎是）的引荐来源网址，您可能会通过简单地引导来自该引荐来源网址的流量来阻止访问。

然而，使用 JavaScript 执行此操作并不是特别可靠，因为它们可以简单地关闭 JavaScript。或者不要在来自他们自己的网站时攻击您的网站（没有引荐来源网址）。

```
var block = ['url1', 'url2'];
for (var b = block.length; b--;) {
    if (document.referrer.match(block[b]))
        window.location = "http://google.com/";
} 
```

以服务器端语言执行此操作会更可靠，特别是因为您可以收集有问题的 ip 地址并以此为基础进行阻止，而不是引用 url，我必须说我不太相信作为解决方案。更好的是使用前面提到的防火墙并完全阻止对服务器的访问。

在 PHP 中，如果我没记错的话，您可以使用 $_SERVER['HTTP_REFERRER'] 作为引荐来源网址，并使用 $_SERVER['REMOTE_ADDR'] 作为 IP 地址。代码本身将非常相似：

```
$block = ['url1', 'url2'];
foreach ($block as $value) {
    if ($_SERVER['HTTP_REFERRER'] == $value)
        header('Location: http://google.com/');
} 
```

您可能也可以使用 == （不相信 === 因为它是来自 dom 节点的值，因为它是来自 dom 节点的值）而不是 javascript 中的 match 。这是漫长的一天，比赛来到无论出于何种原因，请首先考虑。

# android - 创建抽象异步任务

> ID：11588840
> 
> 赞同：1
> 
> 时间：2012-07-21T01:46:47.207
> 
> 标签：android, android-asynctask, abstract-class

我正在尝试创建一个 abstract `AsyncTask`，制作一个加载器，并提供一些额外的功能。

```
public abstract class AbstractLoader <Params, Progress, Result> extends AsyncTask <Params, Progress, Result> {
private boolean ready;
protected Context context;
protected Application application;

public AbstractLoader (Context context, Application application) {
    this.context = context;
    this.application = application;
}

public boolean isReady() {
    return ready; 
}

protected void setReady(boolean ready) {
    this.ready = ready;
} 
```

我从中创建了很多子类，它们部分工作，`doInBackground(params)`执行，但`onPreExecute()`不执行。唯一执行的方法是抽象类之一。

这是子类：

```
public class GPSLoader extends AbstractLoader<Void, Void, Integer> {

private Location location;
private LocationRestaurante[] locations;
private float[] distancias;
private float distanciaMinima;

private int idCentroComercial;

final String TAG = getClass().getCanonicalName(); 

public GPSLoader(Context context, Application application) {
    super(context, application);
    distanciaMinima = 100;

    LocationManager locationManager = (LocationManager) context
            .getSystemService(Context.LOCATION_SERVICE);

    QuickOrderLocationListener locationListener = new QuickOrderLocationListener(
            this);

    try {
        locationManager.requestLocationUpdates(
                LocationManager.NETWORK_PROVIDER, 0, 0, locationListener);
    } catch (Exception e) {
        Log.d(TAG, e.getMessage());
    }
    Log.d(TAG, locationManager.toString());
}

@Override
protected void onPreExecute () {
    Log.d (TAG, "onPreExecute");
}

@Override
protected Integer doInBackground(Void... params) {
    synchronized (this) {
        while (location == null) {
            try {
                wait(20);
            } catch (InterruptedException e) {
                Log.d(TAG, e.toString());
            }
        }
    }

    locations = obtenerLocationsFijas();

    for (int i = 0; i < locations.length; i++) {
        float distancia = calcularPosicion(location, locations[i])[0];
        if (distancia < 100) {
            return new Integer(locations[i].getId());
        }
    }
    Log.d(TAG, "termina el gps loader");
    return null;
}

@Override
protected void onPostExecute(Integer result) {
    setReady(true);
}

public int getIdCentroComercial() {
    return idCentroComercial;
}

private float[] calcularPosicion(Location loc, Location baseLoc) {
    float[] results = null;
    Location.distanceBetween(loc.getLatitude(), loc.getLongitude(),
            baseLoc.getLatitude(), baseLoc.getLongitude(), results);
    return results;
}

private LocationRestaurante[] obtenerLocationsFijas() {
    return null;
}

private class QuickOrderLocationListener implements LocationListener {

    private GPSLoader gpsLoader;

    public QuickOrderLocationListener(GPSLoader gpsLoader) {
        this.gpsLoader = gpsLoader;
    }

    public void onLocationChanged(Location location) {
        gpsLoader.location = location;
    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
    }

    public void onProviderEnabled(String provider) {
    }

    public void onProviderDisabled(String provider) {
    }
}

private class LocationRestaurante extends Location {
    private int id;

    public LocationRestaurante(String s) {
        super(s);
    }

    public int getId() {
        return id;
    }

}

} 
```

我在这里调用方法：

```
private synchronized int getPosition() {
    gpsLoader.doInBackground();
    while (gpsLoader.isReady() == false) {
        try {
            wait(20);
        } catch (InterruptedException e) {
            Log.d(TAG, e.toString());
        }
    }

    int idCentroComercial = gpsLoader.getIdCentroComercial();
    return idCentroComercial;
} 
```

`onPostExecute`也不执行。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T02:50:07.313

从`gpsLoader.doInBackground();`call 更改为`gpsLoader.execute(null)`as`doInBackground()`不应手动调用。

# iphone - iphone视网膜显示屏中的图像记忆问题

> ID：11588841
> 
> 赞同：0
> 
> 时间：2012-07-21T01:47:29.937
> 
> 标签：iphone, objective-c, ios, memory-management, retina-display

我正在为一家公司开发游戏。现在我们遇到了一个问题。我们的游戏是为 iphone 和 ipad 制作的。我们有常规图像和@2x 图像。我们的游戏在 iphone 3gs 和所有 ipad 版本上运行良好。但是我们的游戏在 iphone 4 和 4s 上崩溃了。是因为它的视网膜而崩溃吗？我知道所有图像都是4x。我们现在想知道它会以何种方式崩溃。

有谁可以帮我离开这里吗？

## 编辑：

我们的游戏使用`UIKit`和`cocos2d`使用`OpenGL`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T02:27:54.130

所以这样做：在 Xcode 中取消选中所有 @2x 图像 - 所以 imageNamed 只会找到普通图像。运行应用程序。它会崩溃吗？如果是这样，那么它不是图像。现在开始打开@2x 图像——一次打开几个。运行。它会崩溃吗？

如果您有大量用于视网膜 iPad 的 @2x 视网膜图像，是的，可能是个问题。你没有说你正在使用多少张图片 - 如果有数百张，不要使用 imageName。我使用少量，iPad/iPhone 没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T01:52:40.537

你如何将图像加载到图像视图中？如果你使用`[UIImage imageNamed:@"blablabla.png"]`- 那是邪恶的 -[看看这里为什么](http://www.alexcurylo.com/blog/2009/01/13/imagenamed-is-evil/)。改用这个：

```
[UIImage imageWithContentsOfFile:[NSString stringWithFormat:@"%@/name_of_image.png", [[NSBundle mainBundle] resourcePath]]]. 
```

总是。

编辑：在加载视网膜大小的图像时，调整上面的图像名称以包含@2x。

# javascript - 如何在 Javascript 中为我的进度条设置百分比？

> ID：11588846
> 
> 赞同：1
> 
> 时间：2012-07-21T01:49:53.220
> 
> 标签：javascript, progress-bar

我对 Javascript 一无所知（我复制了进度条的代码，但它不显示百分比）。我只需要在我的进度条中显示实际 % 的文本值（文本，例如：1%、2%、3%...）。

我现有的代码如下（我不关心样式，所以我删除了它以更容易阅读代码）：

```
<div id="loading">
<div id="progressbar">
<div id="progress"/>

<script>
 var loading = document.getElementById('loading');
 var progress = document.getElementById('progress');
 var progressbar = document.getElementById('progressbar');

 function updateProgress() 
 {
   if (loading.style.display !== 'none')
   {
       var width = parseInt(progress.offsetWidth + ((progressbar.offsetWidth - progress.offsetWidth) * .15));

       if (width > (progressbar.offsetWidth * .95))
        width = parseInt(progressbar.offsetWidth) * .5;

       progress.style.width = width + 'px';
       window.setTimeout("updateProgress()", 1000);
    }
  }
 document.body.style.margin = 0;
 document.body.style.padding = 0;
 loading.style.display = 'block';
 updateProgress();
 </script>
</div>
</div> 
```

您能帮我添加缺少的代码以显示已加载百分比的文本吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T03:08:26.097

[https://developer.mozilla.org/en/DOM/element.innerHTML](https://developer.mozilla.org/en/DOM/element.innerHTML) - 这是设置元素内容的元素属性。

假设您的进度百分比定义为`var percent`，您只需将内容设置为：

```
progress.innerHTML = percent.toFixed(1) + '%'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T04:40:59.703

取而代之的是，您可以尝试**[Query Loader](http://www.gayadesign.com/diy/queryloader-preload-your-website-in-style/)**。

这个预加载器拥有一切。加载栏、自定义动画和获取网页中包含的所有图像。

**[你可以在这里](http://www.gayadesign.com/scripts/queryLoader/)**看到一个演示

# c# - 以编程方式打开 TFS 工作项 UI

> ID：11588847
> 
> 赞同：2
> 
> 时间：2012-07-21T01:49:57.850
> 
> 标签：c#, tfs

我目前正在 Outlook 中制作一个插件，我想制作它以便使用指定的模板（错误/任务/等）打开一个工作项并填充一些字段。我不知道如何调用 UI。（这就像您在 excel 中并导入 TFS 并且您的项目未验证，因此它在 UI 中打开工作项）

命名空间或代码将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T02:40:31.603

我看到隐藏的“复制模板 URL”按钮的解决方案是在我使用的 URL 中：

[http://tfsportal.com/CompanyName/ProjectName/_layouts/tswa/UI/Pages/WorkItems/WorkItemEdit.aspx](http://tfsportal.com/CompanyName/ProjectName/_layouts/tswa/UI/Pages/WorkItems/WorkItemEdit.aspx) <-不显示按钮。

[http://tfs.CompanyNameURL:8080/tfs/web/wi.aspx](http://tfs.CompanyNameURL:8080/tfs/web/wi.aspx)？<- 确实显示按钮

然后，一旦您获得 URL，您就可以轻松地[在 .Net 中对进程进行外壳处理](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.start%28v=vs.71%29.aspx)。例如：

```
string URL = the TFSWorkItemURLYouGotFromThewi.aspxPageWithQueryStrings
Process.Start(URL): 
```

*仅供参考：*另一种方法是使用 Process 类的实例。这允许对进程进行更多控制，包括调度、它将在其中运行的窗口类型，以及对我来说最有用的是等待进程完成的能力。

```
Process process = new Process();
// Configure the process using the StartInfo properties.
process.StartInfo.FileName = "process.exe";
process.StartInfo.Arguments = "-n";
process.StartInfo.WindowStyle = ProcessWindowStyle.Maximized;
process.Start();
process.WaitForExit();// Waits here for the process to exit. 
```

# android - 如何仅在最小延迟后显示 ProgressBar？

> ID：11588848
> 
> 赞同：5
> 
> 时间：2012-07-21T01:50:30.960
> 
> 标签：android, android-asynctask, progress-bar, android-progressbar

我有`AsyncTask`一个不确定的`ProgressBar`，通常执行得非常快，但偶尔会很慢。当没有明显的等待时，进度条快速闪烁是不受欢迎和分散注意力的。

有没有办法在不创建另一个嵌套的情况下延迟显示进度条`AsyncTask`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T02:24:34.603

是的，有，它被称为[CountDownTimer](http://developer.android.com/reference/android/os/CountDownTimer.html)，它的使用率很低。您可以在计时器的每个滴答声或计时器用完时采取行动。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T19:43:13.373

感谢[Code Droid](https://stackoverflow.com/a/11588979/403455)，我能够编写一个抽象`AsyncTask`类，在指定的延迟后显示一个不确定的进度条。只需扩展此类而不是`AsyncTask`并确保`super()`在适当的时候调用：

```
public abstract class AsyncTaskWithDelayedIndeterminateProgress
      <Params, Progress, Result> extends AsyncTask<Params, Progress, Result> {
   private static final int MIN_DELAY = 250;
   private final ProgressDialog progressDialog;
   private final CountDownTimer countDownTimer;

   protected AsyncTaskWithDelayedIndeterminateProgress(Activity activity) {
      progressDialog = createProgressDialog(activity);
      countDownTimer = createCountDownTimer();
   }

   @Override protected void onPreExecute() {
      countDownTimer.start();
   }

   @Override protected void onPostExecute(Result children) {
      countDownTimer.cancel();
      if(progressDialog.isShowing())
         progressDialog.dismiss();
   }

   private ProgressDialog createProgressDialog(Activity activity) {
      final ProgressDialog progressDialog = new ProgressDialog(activity);
      progressDialog.setIndeterminate(true);
      return progressDialog;
   }

   private CountDownTimer createCountDownTimer() {
      return new CountDownTimer(MIN_DELAY, MIN_DELAY + 1) {
         @Override public void onTick(long millisUntilFinished) { }

         @Override public void onFinish() {
            progressDialog.show();
         }
      };
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T02:00:54.913

我假设您在 AsyncTask 完成之前至少调用了几次 onProgressUpdate。如果是这样的话，你能做的就是这个。每次调用 onProgressUpdate 之前，调用 Thread.sleep(250)。这样，您的后台线程将在与 UI 线程通信之前暂停，并呈现出运行时间更长的任务。如果做不到这一点，我可能需要查看您的代码或获取更多信息。

# ios - 你如何设置 CMAKE_C_COMPILER 和 CMAKE_CXX_COMPILER 来为 iOS 构建 Assimp？

> ID：11588855
> 
> 赞同：37
> 
> 时间：2012-07-21T01:51:41.013
> 
> 标签：ios, cmake

当我尝试通过运行来构建 Assimp 时`build_ios.sh`，它告诉我：

```
CMake Error: your C compiler: "/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/llvm-gcc" was not found.   Please set CMAKE_C_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: "/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/llvm-g++" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name. 
```

我需要的路径是：

```
/Applications/XCode.app/Contents/Developer/Platforms/... 
```

我尝试更改and `DEVROOT`，因为这似乎是从中生成 etc 的内容，但它仍然给我同样的错误。`build_ios.sh``IPHONE_xxxx_TOOLCHAIN.cmake``CMAKE_C_COMPILER`

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2014-03-24T19:44:13.353

**选项1：**

您可以像这样在命令行中设置 CMake 变量：

```
cmake -D CMAKE_C_COMPILER="/path/to/your/c/compiler/executable" -D CMAKE_CXX_COMPILER "/path/to/your/cpp/compiler/executable" /path/to/directory/containing/CMakeLists.txt 
```

请参阅[此](http://www.cmake.org/cmake/help/v2.8.12/cmake.html#opt:-Dvar:typevalue)内容以了解如何创建 CMake 缓存条目。

* * *

**选项 2：**

在您的 shell 脚本`build_ios.sh`中，您可以设置环境变量`CC`并`CXX`分别指向您的 C 和 C++ 编译器可执行文件，例如：

```
export CC=/path/to/your/c/compiler/executable
export CXX=/path/to/your/cpp/compiler/executable
cmake /path/to/directory/containing/CMakeLists.txt 
```

* * *

**选项 3：**

编辑“Assimp”的CMakeLists.txt文件：在顶部添加这些行（必须在使用`project()`或`enable_language()`命令之前添加）

```
set(CMAKE_C_COMPILER "/path/to/your/c/compiler/executable")
set(CMAKE_CXX_COMPILER "/path/to/your/cpp/compiler/executable") 
```

请参阅[此](http://www.cmake.org/cmake/help/v2.8.12/cmake.html#command:set)内容以了解如何`set`在 CMake 中使用命令。这也是了解一些常见 CMake 变量的使用的有用资源[。](http://www.cmake.org/Wiki/CMake_Useful_Variables)

* * *

**以下是官方常见问题解答中的相关条目：[https ://gitlab.kitware.com/cmake/community/wikis/FAQ#how-do-i-use-a-different-compiler](https://gitlab.kitware.com/cmake/community/wikis/FAQ#how-do-i-use-a-different-compiler)**

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-11-04T13:16:10.297

cc 和 cxx 位于`/Applications/Xcode.app`. 这应该找到正确的路径

```
export CXX=`xcrun -find c++`
export CC=`xcrun -find cc` 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-09T10:09:49.797

解决方案

1.  有时项目是在安装之前创建的`g++`。所以`g++`先安装然后重新创建你的项目。这对我有用。
2.  将以下行粘贴到 CMakeCache.txt 中： `CMAKE_CXX_COMPILER:FILEPATH=/usr/bin/c++`

请注意`g++`取决于操作系统的路径。我使用了我的 Fedora 路径`which g++`

# php - PHP：空值检查

> ID：11588857
> 
> 赞同：2
> 
> 时间：2012-07-21T01:51:51.357
> 
> 标签：php, null

在检查超全局`$_GET`或`$_POST`特定键的值是否存在时，是否有一种方法以更简洁的方式包含以下功能？

```
if (isset($_POST['foo']) && $_POST['foo'] !== '') {
    // ...
} 
```

即使值为空字符串，该`isset()`函数本身也会返回，所以我不能使用它。`TRUE``''`

使用 just`$_POST['foo'] !== ''`本身就可以正常工作，但它会发出一个`E_NOTICE`for undefined index，这是不可取的。

该`empty()`函数返回`TRUE`value `"0"`，这是一个有效值，所以我也不能使用它。

我是否遗漏了一些明显的东西，或者这真的是最好/唯一的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T01:55:05.957

可能您正在寻找[`array_key_exists()`](http://php.net/manual/en/function.array-key-exists.php)：

```
if (array_key_exists('foo', $_POST)){
    // will execute when $_POST['foo'] is set, even if to null, false, '' etc.
}; 
```

如果您不想匹配空字符串 ( `''`)，那么您的解决方案可能就足够了。上面的解决方案`false`仅在密钥不存在时为您提供。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T02:05:46.847

您可以随时将`E_NOTICE`. 在这种情况下，如果未设置变量，您希望 a`E_NOTICE`被抛出（实际上，这是这里唯一可能的错误情况），因此可以安全地被静音。

```
if(@$_POST['foo'] != '') {

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T02:15:24.160

为什么不在脚本开头使用[array_merge](http://php.net/manual/en/function.array-merge.php)一次性完成整个帖子。

IE

```
$default = array('foo' => "2", 'bar' => 'Hello World');
$postValues = array_merge($default, $POST); 
```

然后使用`$postValues`. 它`isset`在其余代码中无处不在，因为将使用默认值。

# core-animation - 更改 CPTPlotSpaceAnnotation 的图层形状？

> ID：11588862
> 
> 赞同：1
> 
> 时间：2012-07-21T01:53:42.837
> 
> 标签：core-animation, core-plot

我想在我的图表中添加一个用户可以单击和拖动的小部件。我已经设法使用 CPTPlotSpaceAnnonation （因为我也希望它也随着数据滚动）和 CPTBorderedLayer 来做到这一点。基本功能有效，现在我想改进小部件的外观。到目前为止，它只是一个绿色圆圈。

下面的代码生成下面的圆圈，注意阴影是如何被裁剪到图层的矩形的，而边框是跟随图层而不是圆圈的，

![在此处输入图像描述](../Images/8afc6512651d4a4da1109b505e367d6e.png)

我怎样才能抚摸圆圈而不是图层？我想我可以通过使图层的框架更大来避免剪裁。是否可以将 CAShapeLayer 类与 Core Plot 注释一起使用？这将是绘制小部件的一种简单方法。

```
// Add a circular annotation to graph with fill and shadow
annotation = [[CPTPlotSpaceAnnotation alloc] 
                  initWithPlotSpace:graph.defaultPlotSpace 
                    anchorPlotPoint:anchorPoint];

// Choosing line styles and fill for the widget
NSRect frame = NSMakeRect(0, 0, 50.0, 50.0);
CPTBorderedLayer *borderedLayer = [[CPTBorderedLayer alloc] initWithFrame:frame];

// Circular shape with green fill
CGPathRef outerPath = CGPathCreateWithEllipseInRect(frame, NULL);
borderedLayer.outerBorderPath = outerPath;
CPTFill *fill = [CPTFill fillWithColor:[CPTColor greenColor]];
borderedLayer.fill = fill;

// Basic shadow
CPTMutableShadow *shadow = [CPTMutableShadow shadow];
shadow.shadowOffset = CGSizeMake(0.0, 0.0);
shadow.shadowBlurRadius = 6.0;
shadow.shadowColor = [[CPTColor blackColor] colorWithAlphaComponent:1.0];
borderedLayer.shadow = shadow;

// Add to graph
annotation.contentLayer = borderedLayer;
annotation.contentLayer.opacity = 1.0;
[graph addAnnotation:annotation]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T17:20:44.657

不要设置图层的边框路径。相反，只需将 设置`cornerRadius`为框架宽度的一半。

```
borderedLayer.cornerRadius = frame.size.width * 0.5; 
```

# javascript - 如何使用 jQuery 在选择的其他 div 中计算一个类的 div 数

> ID：11588864
> 
> 赞同：2
> 
> 时间：2012-07-21T01:54:22.010
> 
> 标签：javascript, jquery, html

我需要用每个名为 event_month 的 div 内的事件类来计算 div 的数量。

我现在有这个：

```
$('#events #event_listings .event_month').each(function(i, obj) {
    var Count = $(this +'> .event').size();
    console.log(Count); 
}); 
```

这是我试图将 Javascript 应用到的 HTML：

```
<div class="header"><span>October 2012</span></div>
  <div class="event">
    <h3>Telematics Munich 2012 (29th to 30th)</h3>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer commodo ante iaculis purus placerat sed consectetur odio venenatis. Ut erat nisi, laoreet at tempor vel, sollicitudin sed dui.</p>
  </div>
</div>
<div id="september2012" class="event_month">
  <div class="header"><span>September 2012</span></div>
</div>
<div id="august2012" class="event_month">
  <div class="header"><span>August 2012</span></div>
</div> 
<div id="july2012" class="event_month">
  <div class="header"><span>July 2012</span></div>
</div> 
<div id="june2012" class="event_month">
  <div class="header"><span>June 2012</span></div>
  <div class="event">
    <h3>Telematics Detroit 2012 (6th to 7th)</h3>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer commodo ante iaculis purus placerat sed consectetur odio venenatis. Ut erat nisi, laoreet at tempor vel, sollicitudin sed dui.</p>
  </div>
</div>
<div id="may2012" class="event_month">
  <div class="header"><span>May 2012</span></div>
  <div class="event">
    <h3>Insurance Telematics Europe 2012 (9th to 10th)</h3>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer commodo ante iaculis purus placerat sed consectetur odio venenatis. Ut erat nisi, laoreet at tempor vel, sollicitudin sed dui.</p>
  </div>
</div> 
```

不用说，它不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T01:57:12.357

尝试以下操作：

```
$('#event_listings .event_month').each(function(i, obj) {
    var count = $(this).find('.event').length;
    console.log(count); 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T02:01:53.553

`this`是一个对象，所以你不能用字符串连接它。将其包装在 jQuery 中，然后过滤其子项。

```
var Count = $(this).children('.event').length; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T02:05:22.473

尝试这个

```
$(function(){
    $('div.event_month').each(function(){
        alert($(this).children('.event').length);
    });​
  }
);​ 
```

这是一个功能示例：http: [//jsfiddle.net/Ug7SF/](http://jsfiddle.net/Ug7SF/)

# javascript - 将 html/any 标签添加到选择的任一侧 - Javascript

> ID：11588877
> 
> 赞同：0
> 
> 时间：2012-07-21T01:57:27.363
> 
> 标签：javascript, html

# 将 HTML/任何标签添加到选择的任一侧 - Javascript

### 问题：

在我的 PHP/html 文件中创建一个 textarea 框后，我希望添加更多功能，并决定制作一个可以使用格式的 textarea，例如

```
<textarea>
This is text that was inserted. <b>this text was selected and applied a style
via a button<b>
</textarea> 
```

标签是什么并不重要，（由于PHP脚本在接收`$_POST`数据时会自动应用正确的标签，标签作为样式ID，所以我关心的可能是气泡。**不相关**）

### 问题/秒

*   如何使用 javascript 创建此功能？
*   有没有可能有帮助的链接？
*   如果有信息，你能解释一下吗？

**编辑**：其他接近的例子但不完全是 stackoverflow 的编辑器，请注意我不希望使用 3rd 方脚本，这对我来说是一个**学习过程**。插入文本中的标签被保存到数据库中，然后当页面被请求时，PHP 用样式 ID 替换标签。如果有不涉及第 3 方脚本的解决方法，请提出建议

而对于谷歌搜索的反研究怀疑论者来说，几乎没有发现有意义的东西，并且有 **关于 SOF 的先前研究：**
- [https://stackoverflow.com/questions/8752123/how-to-make-an-online-html -editor](https://stackoverflow.com/questions/8752123/how-to-make-an-online-html-editor)
-[为选择添加标签](https://stackoverflow.com/questions/10684368/adding-tags-to-selection)

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T02:09:20.773

除了 texarea 中的基本格式之外，您不能做任何事情。如果您想要复杂的格式，请考虑将 div 的 contentEditable 属性设置为 true。或者你可以制作一个所见即所得的编辑器，但那是一个大项目。我强烈建议在这个上使用 3rd 方代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T02:32:26.600

我建议你使用 iframe 来实现所见即所得的效果。有一个属性`iframe`叫做`designMode`

有关更多信息，请参见此处
[https://developer.mozilla.org/en/Rich-Text_Editing_in_Mozilla](https://developer.mozilla.org/en/Rich-Text_Editing_in_Mozilla)

还有一个轻量级的例子，也许你想看看：
[http ://code.google.com/p/rte-light/source/browse/trunk/jquery.rte.js](http://code.google.com/p/rte-light/source/browse/trunk/jquery.rte.js)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T02:41:08.717

`<textarea>`元素不能包含特殊标记，只能包含值。您不能在文本区域中应用任何样式。

您需要做的是伪造文本框通常会做的所有事情，包括绘制光标。正如 hackattack 所说，这是*很多工作。*

如果您抓住 jQuery 并开始四处寻找，您可以做很多事情。扔一个`<div>`带有 ID 的标签，然后开始破解。

我从来没有亲自做过，但有很多。HTML5 的 contentEditable 可能会为您提供很大的帮助：http: [//html5demos.com/contenteditable/](http://html5demos.com/contenteditable/)

如果您想将此数据传回服务器，您需要获取容器的 innerHTML 并在提交表单时将其放入隐藏的输入中。

如果您只是在胡闹，还可以查看以下其他一些内容：

*   tabindex HTML 属性，从标签中获取焦点
*   jQuery.focus() [http://api.jquery.com/focus/](http://api.jquery.com/focus/)，判断何时有人点击了你的框
*   光标：用于外观的 CSS 文本[http://wap.w3schools.com/cssref/pr_class_cursor.asp](http://wap.w3schools.com/cssref/pr_class_cursor.asp)
*   jQuery.keypress() [http://api.jquery.com/keypress/](http://api.jquery.com/keypress/)或类似的用于抓取击键

**编辑：我想我*完全*误解了**

如果您不是在寻找富文本编辑器，而只是想要一些代码帮助按钮，那么 selectionStart 和 selectionEnd 可能就是您所追求的。我不知道浏览器支持是什么，但它在 Chrome 中工作：http: [//jsfiddle.net/5yXsd/](http://jsfiddle.net/5yXsd/)

# php - 多个 Symfony 2 防火墙中的多个提供商：如何避免路由冲突？

> ID：11588879
> 
> 赞同：0
> 
> 时间：2012-07-21T01:57:35.680
> 
> 标签：php, symfony

我有一个防火墙路由冲突的小问题。我希望 Symfony 能够按顺序处理它们，但事实并非如此：

```
security:
    firewalls:
        first_area:
            pattern:    ^api/
            http_basic:
                realm: "Secured Demo Area"
                provider: in_memory
        second_area:
            pattern:    ^/
            http_basic:
                realm: "Secured Demo Area"
                provider: in_database 
```

这是矛盾的，所以我不能分开区域来拥有不同的提供者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T08:08:31.860

尝试`pattern: ^/api/`第一个防火墙（添加斜线）

# r - 如何使每个独特的观察结果成为 R 中具有二元响应的因素？

> ID：11588883
> 
> 赞同：0
> 
> 时间：2012-07-21T01:59:03.623
> 
> 标签：r, loops, refactoring

我有一个数据集，如：

```
id   region
 1     2
 1     3
 2     1
 3     4
 3     5 
```

我想创建一个数据集，如：

```
id   region1 region2 region3 region4 region5
 1     0         1      1       0      0
 2     1         0      1       0      0
 3     0         0      0       1      1 
```

我一直在使用一个手写循环，每次都会创建一个因子 regionN，但我希望有某种方法可以自动化这个过程。

我也尝试了以下失败的方法。

```
n <- 1
while(n <= nrow(region_list))  {
  paste("R",as.character(region_list$region_id[n])) <- subset(region_list, region_list$region_id == n)
  n <- n + 1
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T08:47:56.407

```
DF <- data.frame(id = c(1,1,2,3,3), region = c(2,3,1,4,5))
DM <- table(DF)
DM
#   region
#id  1 2 3 4 5
#  1 0 1 1 0 0
#  2 1 0 0 0 0
#  3 0 0 0 1 1
is.matrix(DM)
#[1] TRUE

require(reshape)
DF2 <- cast(data.frame(DM),id~region)
names(DF2)[-1] <- paste("region",names(DF2)[-1],sep="")
DF2
#  id region1 region2 region3 region4 region5
#1  1       0       1       1       0       0
#2  2       1       0       0       0       0
#3  3       0       0       0       1       1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T02:10:03.017

此解决方案使用`ddply`表单**plyr**，但任何类似的拆分应用组合工具都可以使用相同的基本部分：

```
dat <- read.table(text = "id   region
 1     2
 1     3
 2     1
 3     4
 3     5",header = TRUE,sep = "",stringsAsFactors = TRUE)

dat$region <- factor(dat$region)

foo <- function(x){
    res <- as.integer(levels(x$region) %in% x$region)
    names(res) <- paste0("region",1:5)
    res
}

ddply(dat,.(id),.fun = foo)
   id region1 region2 region3 region4 region5
1  1       0       1       1       0       0
2  2       1       0       0       0       0
3  3       0       0       0       1       1 
```

你可以绕过转换`region`为一个因子，但我认为你必须硬编码它可能在`foo`.

# php - 更简洁的三元表达式？

> ID：11588885
> 
> 赞同：6
> 
> 时间：2012-07-21T01:59:15.500
> 
> 标签：php, ternary-operator

我经常发现自己需要使用以下逻辑模式编写代码：

```
$foo = isset($bar) ? $bar : $baz; 
```

我知道`?:`语法：

```
$foo = $bar ?: $baz; 
```

...从表面上看，这似乎是我正在寻找的；但是，如果`$bar`未设置，它会引发未定义的通知索引。它还使用与 相同的逻辑`empty()`，这意味着像`FALSE`、`0`、`"0"`等“空”值不会通过。因此，它并不是真正等效的。

是否有更短的方法来编写该代码而不在`$bar`未设置时发出通知？

**编辑：**

为了更清楚地说明我*为什么要寻找快捷语法，这里有一个更好的例子：*

```
$name = isset($employee->getName())
      ? $employee->getName()
      : '<unknown>'; 
```

在这种情况下，`$employee`可能是来自第 3 方库的对象，并且`name`可能是`NULL`. 我想将变量设置`$name`为返回的名称（如果有的话），但如果没有的话，一些合理的默认值。

如果方法调用比 getter 更复杂，那么这个例子就会变得更加冗长，因为我们必须缓存结果：

```
$bar = $some->reallyExpensiveOperation();
$foo = isset($bar) ? $bar : $baz; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T02:14:30.933

当您显式预定义变量或使用带有魔法吸气剂的对象时，我只会使用速记三元语法。这是我通常会使用速记三元语法的一个非常基本的示例

```
class Foo {
    public function __get($name) {
        return isset($this->{$name}) ? $this->{$name} : '';
    }
}

$foo = new Foo();
$bar = $foo->baz ?: 'default'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T02:03:55.177

使用[错误控制运算符](http://php.net/manual/en/language.operators.errorcontrol.php)，您可以在技术上将其缩短为：

```
$foo = @$bar ?: $baz; 
```

如果`$bar`未设置，则该值的计算结果为 null，并且您不会收到错误通知，因为您抑制了错误。然而，有些人可能不赞成这种代码，因为它不好用，`@`因为它掩盖了错误并使调试更加困难。

没有那个，不，我不相信有一个更短的符号，只是使用`isset`.

编辑：正如@drrcknlsn 所指出的，如果变量是`false`, 或`0`, 甚至`null`, 这将不起作用，所以在我看来没有避免调用`isset`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T03:15:47.447

当`$bar`未定义时，实际上没有“更短”的方式来编写相同的代码。

有两个，我认为“黑客”可以做到这一点，但是，它们也可能会影响其他事情：

1.  使用 进行错误限制`@`，例如`$foo = @$bar ?: $baz;`将完全按照您的意愿执行并限制未定义时抛出的未定义错误`$bar`。如果它被定义，它也将按需要工作。但是，不利的一面是，`@`如果重复使用它会降低代码的效率。
2.  用 关闭通知 `error_reporting(E_ALL & ~E_NOTICE);`。这仍然会显示所有常规错误，但不会显示通知，这将有效地隐藏“变量未定义”错误。这样做的缺点是您不会看到任何其他通知。

现在，我的强制性个人意见，我建议继续完整地写出来。三元运算符已经是简写，有效地减少了以下内容：

```
if (isset($bar)) {
    $foo = $bar;
} else {
    $foo = $baz;
} 
```

变成更短的

```
$foo = isset($bar) ? $bar : $baz; 
```

编写完整的三元组和较短的三元组真的不需要更多的努力（当然，除非你的变量名长得离谱）。此外，在很多情况下，复合三元运算（即，多个三元合二为一）会导致超速记无法使用；所以短期储蓄在程序上/道德上并不令人满意（在我自己看来）。

**更新：**为了支持您分配`$bar`给函数的返回值然后`$foo`基于它的编辑 - 您可以将语句组合成单行，如：

```
$foo = (($bar = $some->reallyExpensiveOperation()) != null) ? $bar : $baz; 
```

这与两行代码长度几乎相同，但也可以从这里稍微缩短。例如，如果`null`不是您认为“无效”的唯一值，但`false`也很重要，您可以完全删除该`!= null`部分并允许将条件视为简单的布尔值：

```
$foo = ($bar = $some->reallExpensiveOperation()) ? $bar : $baz; 
```

在这个例子中，`$bar`在三元运算之后仍然可以访问（即 - 它不会失去作用域），所以除非你需要对变量进行预处理，否则除了可读性之外，这种方法没有很大的缺点。

# c# - C# Datagridvew 复选框值

> ID：11588898
> 
> 赞同：2
> 
> 时间：2012-07-21T02:03:21.440
> 
> 标签：c#, winforms, datagridview, checkbox

我想从datagridview（True / False）获取复选框值，但我总是得到一个值“null”，这是我获取复选框值的代码：

```
DataGridViewCheckBoxCell boolean = (DataGridViewCheckBoxCell)dgv[e.ColumnIndex, e.RowIndex];
string checkCheckboxChecked = ((bool)boolean.FormattedValue) ? "False" : "True"; 
```

即使选中了复选框，此代码也会返回一个`false` ，我也尝试了另一个：`Boolean.FormattedValue`

```
object value = dgvVisual[e.ColumnIndex, e.RowIndex].Value; 
```

这段代码返回 null 值

为什么会这样？

PS`e`是一个事件`CELL CONTENT CLICK`。

这是datagridview单元格内容点击的完整代码：

```
private void dgvVisual_CellContentClick(object sender, DataGridViewCellEventArgs e)
{
    int Number1= int.Parse(dgvVisual[0, e.RowIndex].Value.ToString());
    int Number2 = (e.ColumnIndex - 1);                
    DataGridViewCheckBoxCell boolean = (DataGridViewCheckBoxCell)dgvVisual[e.ColumnIndex, e.RowIndex];
    bool checkCheckboxChecked = (null != boolean && null != boolean.Value && true == (bool)boolean.Value);
    //string checkCheckboxChecked = "";
    if (checkCheckboxChecked)
    {
        //do something if the checkbox is checked
    }
    else
    {
        //do something if the checkbox isn't
    }
} 
```

已解决：我更改`CELL END EDIT EVENT`并将点击内容添加`datagridview.CurrentCell`到另一个单元格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T02:08:29.570

将单元格称为布尔值有点奇怪。然后使用它的`FormattedValue`属性。我`DataGridView`在表单中添加了 a，添加了两列`Text`和`Checkbox`. `CheckBox`是一个`DataGridViewCheckBoxColumn`。然后我添加了一个按钮，这应该给你的想法：

```
private void button1_Click(object sender, EventArgs e)
{
    dgv.AutoGenerateColumns = false;
    DataTable dt = new DataTable();
    dt.Columns.Add("Text");
    dt.Columns.Add("CheckBox");
    for (int i = 0; i < 3; i++)
    {
        DataRow dr = dt.NewRow();
        dr[0] = i.ToString();
        dt.Rows.Add(dr);
    }
    dgv.DataSource = dt;            
}

private void dgv_CellEndEdit(object sender, DataGridViewCellEventArgs e)
{
    foreach (DataGridViewRow row in dgv.Rows)
    {
        var oCell = row.Cells[1] as DataGridViewCheckBoxCell;
        bool bChecked = (null != oCell && null != oCell.Value && true == (bool)oCell.Value);
    }
} 
```

# java - 调试挂java.lang.UNIXProcess.forkAndExec

> ID：11588906
> 
> 赞同：3
> 
> 时间：2012-07-21T02:05:34.787
> 
> 标签：java

除了使用不同的操作系统和 Java 版本（他的答案似乎是特定于 Solaris 的修复，而我使用的是 Linux）之外，我遇到的问题与[这个 SO 问题](https://stackoverflow.com/questions/3952597/why-is-java-lang-unixprocess-forkandexecnative-method-hanging)几乎相同。在某些情况下，当我尝试从 Java 中运行进程时，它会完全挂在`java.lang.UNIXProcess.forkAndExec`.

**情况**

```
$ uname -a
Linux localhost.localdomain 2.6.33.9-rt31.75.el6rt.x86_64 #1 SMP PREEMPT RT Tue Sep 13 11:24:45 CEST 2011 x86_64 x86_64 x86_64 GNU/Linux
$ java -version
java version "1.7.0_05"
Java(TM) SE Runtime Environment (build 1.7.0_05-b06)
Java HotSpot(TM) 64-Bit Server VM (build 23.1-b03, mixed mode) 
```

（我无法使用 Sun 1.6.0_27-b07 JDK 重现这一点。）

我开始的子流程只是`ps`几个参数。我在运行它之前打印出我运行的内容，当我在 shell 挂起后尝试完全相同的命令时，`ps`运行得很好。

当它发生时，它只会偶尔发生（可能是 500 次运行中的一次）。

如果我在启动后不久启动子进程，它不会挂起。只有当我在其他一些事情（例如字符串操作、使用 ObjectInputStream/ObjectOutputStream 打开/通信/关闭套接字以及从小文件中读取）之后启动子进程时，才会发生这种情况（并且只是偶尔发生）。

由于挂起的频率很低，很难准确地缩小范围，但我绝对可以在大约 10 分钟内通过在 Bash while-true 循环中运行程序直到它挂起来重现它。

我昨天也重新启动了我的机器，所以它应该与闰秒错误无关。

**症状**

当它挂起时，堆栈跟踪如下所示：

```
Full thread dump Java HotSpot(TM) 64-Bit Server VM (23.1-b03 mixed mode):

"process reaper" daemon prio=10 tid=0x00007f42904dc000 nid=0x14bf waiting on condition [0x00007f427aa2f000]
   java.lang.Thread.State: TIMED_WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x00000007c229fbf0> (a java.util.concurrent.SynchronousQueue$TransferStack)
    at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)
    at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)
    at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)
    at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)
    at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)

"Service Thread" daemon prio=10 tid=0x00007f42900f1000 nid=0x14bc runnable [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"C2 CompilerThread1" daemon prio=10 tid=0x00007f42900ee000 nid=0x14bb waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"C2 CompilerThread0" daemon prio=10 tid=0x00007f42900eb000 nid=0x14ba waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"Signal Dispatcher" daemon prio=10 tid=0x00007f42900e8000 nid=0x14b9 waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"Finalizer" daemon prio=10 tid=0x00007f429009b800 nid=0x14b8 in Object.wait() [0x00007f427b8f6000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000007c00057f0> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:135)
    - locked <0x00000007c00057f0> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:151)
    at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:177)

"Reference Handler" daemon prio=10 tid=0x00007f4290099000 nid=0x14b7 in Object.wait() [0x00007f427b9f8000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000007c0005370> (a java.lang.ref.Reference$Lock)
    at java.lang.Object.wait(Object.java:503)
    at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:133)
    - locked <0x00000007c0005370> (a java.lang.ref.Reference$Lock)

"main" prio=10 tid=0x00007f4290009000 nid=0x14b1 runnable [0x00007f4299077000]
   java.lang.Thread.State: RUNNABLE
    at java.lang.UNIXProcess.forkAndExec(Native Method)
    at java.lang.UNIXProcess.<init>(UNIXProcess.java:135)
    at java.lang.ProcessImpl.start(ProcessImpl.java:130)
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:1021)
    at scala.sys.process.ProcessBuilderImpl$Simple.run(ProcessBuilderImpl.scala:68)
    at scala.sys.process.ProcessBuilderImpl$AbstractBuilder.run(ProcessBuilderImpl.scala:99)
    at scala.sys.process.ProcessBuilderImpl$AbstractBuilder$$anonfun$runBuffered$1.apply(ProcessBuilderImpl.scala:147)
    at scala.sys.process.ProcessBuilderImpl$AbstractBuilder$$anonfun$runBuffered$1.apply(ProcessBuilderImpl.scala:147)
    at scala.sys.process.ProcessLogger$$anon$1.buffer(ProcessLogger.scala:64)
    at scala.sys.process.ProcessBuilderImpl$AbstractBuilder.runBuffered(ProcessBuilderImpl.scala:147)
    at scala.sys.process.ProcessBuilderImpl$AbstractBuilder.$bang(ProcessBuilderImpl.scala:113)
    at mypackage.Main.main(Main.scala)

"VM Thread" prio=10 tid=0x00007f4290091800 nid=0x14b6 runnable 

"GC task thread#0 (ParallelGC)" prio=10 tid=0x00007f4290017000 nid=0x14b2 runnable 

"GC task thread#1 (ParallelGC)" prio=10 tid=0x00007f4290018800 nid=0x14b3 runnable 

"GC task thread#2 (ParallelGC)" prio=10 tid=0x00007f429001a800 nid=0x14b4 runnable 

"GC task thread#3 (ParallelGC)" prio=10 tid=0x00007f429001c800 nid=0x14b5 runnable 

"VM Periodic Task Thread" prio=10 tid=0x00007f42900f5800 nid=0x14bd waiting on condition 
```

如果我在挂起后运行`jstack -m`或在 pid 上运行，我会得到这个（与and`jstack -F`完全相同的输出）：`-m``-F`

```
$ jstack -m 3199
Attaching to process ID 3199, please wait...
Exception in thread "main" java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at sun.tools.jstack.JStack.runJStackTool(JStack.java:118)
    at sun.tools.jstack.JStack.main(JStack.java:84)
Caused by: java.lang.RuntimeException: Type "nmethodBucket*", referenced in VMStructs::localHotSpotVMStructs in the remote VM, was not present in the remote VMStructs::localHotSpotVMTypes table (should have been caught in the debug build of that VM). Can not continue.
    at sun.jvm.hotspot.HotSpotTypeDataBase.lookupOrFail(HotSpotTypeDataBase.java:362)
    at sun.jvm.hotspot.HotSpotTypeDataBase.readVMStructs(HotSpotTypeDataBase.java:253)
    at sun.jvm.hotspot.HotSpotTypeDataBase.<init>(HotSpotTypeDataBase.java:87)
    at sun.jvm.hotspot.bugspot.BugSpotAgent.setupVM(BugSpotAgent.java:568)
    at sun.jvm.hotspot.bugspot.BugSpotAgent.go(BugSpotAgent.java:494)
    at sun.jvm.hotspot.bugspot.BugSpotAgent.attach(BugSpotAgent.java:332)
    at sun.jvm.hotspot.tools.Tool.start(Tool.java:163)
    at sun.jvm.hotspot.tools.JStack.main(JStack.java:86)
    ... 6 more 
```

**概要**

我相信`java.lang.UNIXProcess.forkAndExec`永远不应该挂起。如果我自己的代码中有竞争条件，它会挂在其他地方；如果子进程本身被挂起，我的 Java 进程只会被挂起，`waitFor`而不是`java.lang.UNIXProcess.forkAndExec`. 对我来说，这似乎是一个 JVM 错误，但我只是不确定如何将其精确定位到可重现的测试用例。关于下一步做什么的任何建议？

**编辑**

当挂起发生时，我有两个相同的 java 进程出现在顶部。当我 ctrl-c 时，主要的退出，但另一个仍然存在，并且在我杀死 -9 之前不会死。两个进程都使用 0% CPU。

**编辑**

当我运行时，子进程什么也不做`kill -QUIT`。

当我`pstack`在子进程上运行时，我得到：

```
#0  0x0000003c2fa0e054 in __lll_lock_wait () from /lib64/libpthread.so.0
#1  0x0000003c2fa09388 in _L_lock_854 () from /lib64/libpthread.so.0
#2  0x0000003c2fa09257 in pthread_mutex_lock () from /lib64/libpthread.so.0
#3  0x00007fb79c4c8a30 in __oo_rwlock_unlock_write_slow () from /usr/lib64/libonload.so
#4  0x00007fb79c4990be in citp_netif_child_fork_hook () from /usr/lib64/libonload.so
#5  0x0000003c2f2abb76 in fork () from /lib64/libc.so.6
#6  0x00007fb79b0219f6 in startChild () from /usr/java/jdk1.7.0_05/jre/lib/amd64/libjava.so
#7  0x00007fb79b0220eb in Java_java_lang_UNIXProcess_forkAndExec () from /usr/java/jdk1.7.0_05/jre/lib/amd64/libjava.so
#8  0x00007fb791011f90 in ?? ()
#9  0x00007fb700000000 in ?? ()
#10 0x0000000000000000 in ?? () 
```

当我`pstack`在父进程上运行时，我得到：

```
Thread 17 (Thread 0x7fb79b544700 (LWP 8437)):
#0  0x0000003c2fa0e54d in read () from /lib64/libpthread.so.0
#1  0x00007fb79c488816 in read () from /usr/lib64/libonload.so
#2  0x00007fb79b022126 in Java_java_lang_UNIXProcess_forkAndExec () from /usr/java/jdk1.7.0_05/jre/lib/amd64/libjava.so
#3  0x00007fb791011f90 in ?? ()
#4  0x00007fb700000000 in ?? ()
#5  0x0000000000000000 in ?? ()
Thread 16 (Thread 0x7fb79ab11700 (LWP 8438)):
#0  0x0000003c2fa0b43c in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
#1  0x00007fb79bc811b3 in os::PlatformEvent::park() () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#2  0x00007fb79bc4cfbf in Monitor::IWait(Thread*, long) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#3  0x00007fb79bc4d74e in Monitor::wait(bool, long, bool) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#4  0x00007fb79bdfbb2b in GangWorker::loop() () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#5  0x00007fb79bc870a0 in java_start(Thread*) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#6  0x0000003c2fa07851 in start_thread () from /lib64/libpthread.so.0
#7  0x0000003c2f2e76dd in clone () from /lib64/libc.so.6
Thread 15 (Thread 0x7fb79aa10700 (LWP 8439)):
#0  0x0000003c2fa0b43c in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
#1  0x00007fb79bc811b3 in os::PlatformEvent::park() () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#2  0x00007fb79bc4cfbf in Monitor::IWait(Thread*, long) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#3  0x00007fb79bc4d74e in Monitor::wait(bool, long, bool) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#4  0x00007fb79bdfbb2b in GangWorker::loop() () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#5  0x00007fb79bc870a0 in java_start(Thread*) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#6  0x0000003c2fa07851 in start_thread () from /lib64/libpthread.so.0
#7  0x0000003c2f2e76dd in clone () from /lib64/libc.so.6
Thread 14 (Thread 0x7fb79a90f700 (LWP 8440)):
#0  0x0000003c2fa0b43c in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
#1  0x00007fb79bc811b3 in os::PlatformEvent::park() () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#2  0x00007fb79bc4cfbf in Monitor::IWait(Thread*, long) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#3  0x00007fb79bc4d74e in Monitor::wait(bool, long, bool) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#4  0x00007fb79bdfbb2b in GangWorker::loop() () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#5  0x00007fb79bc870a0 in java_start(Thread*) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#6  0x0000003c2fa07851 in start_thread () from /lib64/libpthread.so.0
#7  0x0000003c2f2e76dd in clone () from /lib64/libc.so.6
Thread 13 (Thread 0x7fb79a80e700 (LWP 8441)):
#0  0x0000003c2fa0b43c in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
#1  0x00007fb79bc811b3 in os::PlatformEvent::park() () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#2  0x00007fb79bc4cfbf in Monitor::IWait(Thread*, long) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#3  0x00007fb79bc4d74e in Monitor::wait(bool, long, bool) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#4  0x00007fb79bdfbb2b in GangWorker::loop() () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#5  0x00007fb79bc870a0 in java_start(Thread*) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#6  0x0000003c2fa07851 in start_thread () from /lib64/libpthread.so.0
#7  0x0000003c2f2e76dd in clone () from /lib64/libc.so.6
Thread 12 (Thread 0x7fb798100700 (LWP 8442)):
#0  0x0000003c2fa0b7bb in pthread_cond_timedwait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
#1  0x00007fb79bc85cd7 in os::PlatformEvent::park(long) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#2  0x00007fb79bc4d26e in Monitor::IWait(Thread*, long) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#3  0x00007fb79bc4d74e in Monitor::wait(bool, long, bool) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#4  0x00007fb79b93b498 in ConcurrentMarkSweepThread::run() () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#5  0x00007fb79bc870a0 in java_start(Thread*) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#6  0x0000003c2fa07851 in start_thread () from /lib64/libpthread.so.0
#7  0x0000003c2f2e76dd in clone () from /lib64/libc.so.6
Thread 11 (Thread 0x7fb78e2c9700 (LWP 8443)):
#0  0x0000003c2fa0b7bb in pthread_cond_timedwait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
#1  0x00007fb79bc85cd7 in os::PlatformEvent::park(long) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#2  0x00007fb79bc4d26e in Monitor::IWait(Thread*, long) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#3  0x00007fb79bc4d74e in Monitor::wait(bool, long, bool) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#4  0x00007fb79bded430 in VMThread::loop() () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#5  0x00007fb79bded970 in VMThread::run() () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#6  0x00007fb79bc870a0 in java_start(Thread*) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#7  0x0000003c2fa07851 in start_thread () from /lib64/libpthread.so.0
#8  0x0000003c2f2e76dd in clone () from /lib64/libc.so.6
Thread 10 (Thread 0x7fb78e1c8700 (LWP 8444)):
#0  0x0000003c2fa0b43c in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
#1  0x00007fb79bc811b3 in os::PlatformEvent::park() () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#2  0x00007fb79bc76c5c in ObjectMonitor::wait(long, bool, Thread*) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#3  0x00007fb79baebc81 in JVM_MonitorWait () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#4  0x00007fb791011f90 in ?? ()
#5  0x00000007e7802b98 in ?? ()
#6  0x00007fb794123000 in ?? ()
#7  0x00007fb78e1c7160 in ?? ()
#8  0x00007fb78e1c7108 in ?? ()
#9  0x0000000000000000 in ?? ()
Thread 9 (Thread 0x7fb78e0c7700 (LWP 8445)):
#0  0x0000003c2fa0b43c in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
#1  0x00007fb79bc811b3 in os::PlatformEvent::park() () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#2  0x00007fb79bc76c5c in ObjectMonitor::wait(long, bool, Thread*) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#3  0x00007fb79baebc81 in JVM_MonitorWait () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#4  0x00007fb791011f90 in ?? ()
#5  0x00007fb78e0c6160 in ?? ()
#6  0x00007fb7910124ea in ?? ()
#7  0x0000000000000000 in ?? ()
Thread 8 (Thread 0x7fb78dfc6700 (LWP 8446)):
#0  0x0000003c2fa0b43c in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
#1  0x00007fb79bc811b3 in os::PlatformEvent::park() () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#2  0x00007fb79bc4cfbf in Monitor::IWait(Thread*, long) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#3  0x00007fb79bc4d7c6 in Monitor::wait(bool, long, bool) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#4  0x00007fb79b910cfe in SurrogateLockerThread::loop() () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#5  0x00007fb79bda52e8 in JavaThread::thread_main_inner() () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#6  0x00007fb79bda5438 in JavaThread::run() () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#7  0x00007fb79bc870a0 in java_start(Thread*) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#8  0x0000003c2fa07851 in start_thread () from /lib64/libpthread.so.0
#9  0x0000003c2f2e76dd in clone () from /lib64/libc.so.6
Thread 7 (Thread 0x7fb78dec5700 (LWP 8447)):
#0  0x0000003c2fa0d720 in sem_wait () from /lib64/libpthread.so.0
#1  0x00007fb79bc858ca in check_pending_signals(bool) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#2  0x00007fb79bc7f9f5 in signal_thread_entry(JavaThread*, Thread*) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#3  0x00007fb79bda52e8 in JavaThread::thread_main_inner() () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#4  0x00007fb79bda5438 in JavaThread::run() () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#5  0x00007fb79bc870a0 in java_start(Thread*) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#6  0x0000003c2fa07851 in start_thread () from /lib64/libpthread.so.0
#7  0x0000003c2f2e76dd in clone () from /lib64/libc.so.6
Thread 6 (Thread 0x7fb78ddc4700 (LWP 8448)):
#0  0x0000003c2fa0b43c in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
#1  0x00007fb79bc811b3 in os::PlatformEvent::park() () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#2  0x00007fb79bc4cfbf in Monitor::IWait(Thread*, long) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#3  0x00007fb79bc4d7c6 in Monitor::wait(bool, long, bool) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#4  0x00007fb79b903458 in CompileQueue::get() () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#5  0x00007fb79b90616a in CompileBroker::compiler_thread_loop() () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#6  0x00007fb79bda52e8 in JavaThread::thread_main_inner() () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#7  0x00007fb79bda5438 in JavaThread::run() () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#8  0x00007fb79bc870a0 in java_start(Thread*) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#9  0x0000003c2fa07851 in start_thread () from /lib64/libpthread.so.0
#10 0x0000003c2f2e76dd in clone () from /lib64/libc.so.6
Thread 5 (Thread 0x7fb78dcc3700 (LWP 8449)):
#0  0x0000003c2fa0b43c in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
#1  0x00007fb79bc811b3 in os::PlatformEvent::park() () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#2  0x00007fb79bc4cfbf in Monitor::IWait(Thread*, long) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#3  0x00007fb79bc4d7c6 in Monitor::wait(bool, long, bool) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#4  0x00007fb79b903458 in CompileQueue::get() () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#5  0x00007fb79b90616a in CompileBroker::compiler_thread_loop() () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#6  0x00007fb79bda52e8 in JavaThread::thread_main_inner() () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#7  0x00007fb79bda5438 in JavaThread::run() () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#8  0x00007fb79bc870a0 in java_start(Thread*) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#9  0x0000003c2fa07851 in start_thread () from /lib64/libpthread.so.0
#10 0x0000003c2f2e76dd in clone () from /lib64/libc.so.6
Thread 4 (Thread 0x7fb78dbc2700 (LWP 8450)):
#0  0x0000003c2fa0b43c in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
#1  0x00007fb79bc811b3 in os::PlatformEvent::park() () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#2  0x00007fb79bc4cfbf in Monitor::IWait(Thread*, long) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#3  0x00007fb79bc4d74e in Monitor::wait(bool, long, bool) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#4  0x00007fb79bd0c9c8 in ServiceThread::service_thread_entry(JavaThread*, Thread*) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#5  0x00007fb79bda52e8 in JavaThread::thread_main_inner() () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#6  0x00007fb79bda5438 in JavaThread::run() () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#7  0x00007fb79bc870a0 in java_start(Thread*) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#8  0x0000003c2fa07851 in start_thread () from /lib64/libpthread.so.0
#9  0x0000003c2f2e76dd in clone () from /lib64/libc.so.6
Thread 3 (Thread 0x7fb78dac1700 (LWP 8451)):
#0  0x0000003c2fa0b7bb in pthread_cond_timedwait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
#1  0x00007fb79bc85cd7 in os::PlatformEvent::park(long) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#2  0x00007fb79bda2ae7 in WatcherThread::run() () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#3  0x00007fb79bc870a0 in java_start(Thread*) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#4  0x0000003c2fa07851 in start_thread () from /lib64/libpthread.so.0
#5  0x0000003c2f2e76dd in clone () from /lib64/libc.so.6
Thread 2 (Thread 0x7fb78c11f700 (LWP 8501)):
#0  0x0000003c2fa0e84d in accept () from /lib64/libpthread.so.0
#1  0x00007fb79c489f34 in onload_accept () from /usr/lib64/libonload.so
#2  0x00007fb79b7c5171 in LinuxAttachListener::dequeue() () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#3  0x00007fb79b7c530b in AttachListener::dequeue() () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#4  0x00007fb79b7c3d5f in attach_listener_thread_entry(JavaThread*, Thread*) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#5  0x00007fb79bda52e8 in JavaThread::thread_main_inner() () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#6  0x00007fb79bda5438 in JavaThread::run() () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#7  0x00007fb79bc870a0 in java_start(Thread*) () from /usr/java/jdk1.7.0_05/jre/lib/amd64/server/libjvm.so
#8  0x0000003c2fa07851 in start_thread () from /lib64/libpthread.so.0
#9  0x0000003c2f2e76dd in clone () from /lib64/libc.so.6
Thread 1 (Thread 0x7fb79c264da0 (LWP 8413)):
#0  0x0000003c2fa080ad in pthread_join () from /lib64/libpthread.so.0
#1  0x00007fb79c2754d5 in ContinueInNewThread0 () from /usr/java/jdk1.7.0_05/bin/../jre/lib/amd64/jli/libjli.so
#2  0x00007fb79c26a4fa in ContinueInNewThread () from /usr/java/jdk1.7.0_05/bin/../jre/lib/amd64/jli/libjli.so
#3  0x00007fb79c26d085 in JLI_Launch () from /usr/java/jdk1.7.0_05/bin/../jre/lib/amd64/jli/libjli.so
#4  0x00000000004006a6 in main () 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:11:06.160

我在 Linux 和 SunOS 的 forkandexec 上的 oracle 站点中发现了一些错误但是这些错误已经在你的 java 1.7 中修复了

看到堆栈跟踪，我觉得线程正在等待某种条件。您能否检查您的代码是否使用这些方法中的任何一种，例如

```
get() 
```

或者

```
poll() 
```

因为这些方法将使线程处于 TIMED_WAITING 状态。

我建议使用 jdk/bin 中的 Jvisualvm 工具进行更详细的监控我相信你将能够找到根本原因。

您可以使用相同的方式监视子线程和父线程。让我知道是否有任何问题启动和分析您的程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T04:27:44.923

感谢 Christopher Schultz 建议`pstack`在子进程上运行。

似乎是 libonload 导致了这个问题。在没有 onload 的情况下运行时无法重现，并且在将 onload 升级到最新版本时也无法重现（尽管更新日志中没有类似的内容）。

# android - Android - AlertDialog 动画不再起作用

> ID：11588907
> 
> 赞同：1
> 
> 时间：2012-07-21T02:05:37.283
> 
> 标签：android, animation, android-alertdialog

我让它工作，但现在它不是。logcat 中没有关于它的内容。

样式.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<resources>
    <style name="DialogSlideAnim" parent="@android:style/Theme.Dialog">
        <item name="android:windowAnimationStyle">@style/DialogAnimation</item>
    </style>
    <style name="DialogAnimation">
        <item name="android:windowEnterAnimation">@anim/push_right_in</item>
        <item name="android:windowExitAnimation">@anim/push_right_out</item>
    </style>
</resources> 
```

爪哇

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setMessage("Are you sure you want to exit??? Your progress will be saved.")
    .setCancelable(false)
    .setPositiveButton("No", new DialogInterface.OnClickListener() 
        {
            public void onClick(DialogInterface dialog, int id) 
            {

            }
        })
    .setNegativeButton("Yes", new DialogInterface.OnClickListener() 
        {
            public void onClick(DialogInterface dialog, int id) 
            {
                dialog.cancel();
                finish();
            }
        });
AlertDialog alert = builder.create();
alert.hide();
alert.getWindow().getAttributes().windowAnimations = R.style.DialogSlideAnim;
alert.show(); 
```

有人看到这段代码有什么问题吗？在我进行额外编码之前，一切都在正常工作……我的活动中有大约 12 个警报框。

# vb.net - 在 VB.NET 中将图标写入磁盘

> ID：11588910
> 
> 赞同：0
> 
> 时间：2012-07-21T02:06:19.480
> 
> 标签：vb.net, file-io, icons

我有一个图标。有没有办法将它保存在磁盘上的某个位置？

我正在处理一个函数：

```
Private Function ReturnIcon(ByVal Path As String, ByVal Index As Integer, Optional ByVal small As Boolean = False) As Icon 
```

有没有办法将它保存到[ICO](http://en.wikipedia.org/wiki/ICO_%28file_format%29)文件（文件扩展名`.ico`）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T02:10:44.263

您是否尝试过使用 Google 或 SO 进行搜索？

[`Icon.Save()`](http://msdn.microsoft.com/en-us/library/system.drawing.icon.save.aspx)

**编辑1**：忽略这一点。我注意到您希望将其保存为 ico。

**编辑 2**：如果您希望保留图标格式，那么您最终会得到低质量的输出（请参阅此[评论](https://stackoverflow.com/questions/10844344/net-save-icon-with-higher-quality#comment14123045_10844344)）。

如果您正在从可执行文件中提取图标，我建议使用类似[这样](http://www.codeproject.com/Articles/27373/File-Resource-Management-Library-NET)的方法来提取和保存图标资源。

# ruby - Balanced Payments - 获取对现有买家和商家账户的引用的文件

> ID：11588911
> 
> 赞同：4
> 
> 时间：2012-07-21T02:06:38.840
> 
> 标签：ruby, balanced-payments

我如何获得对已创建的买家和商家帐户的引用？

我只是在寻找创建买家和商家帐户的示例。我没有找到任何关于获取该信息以供重用的示例。是否有关于此的现有文档或只是 rdoc 中的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T15:12:47.660

根据对 rdoc 的引用，我假设您在这里使用的是 Ruby gem。

使用唯一标识符查找帐户的主要方法有两种`email_address`：

```
account = Balanced::Account.find_by_email(email_address) 
```

或通过`URI`：

```
account = Balanced::Account.find(account_uri) 
```

Balanced 中的所有资源主要由 URI 引用，因此您也可以执行类似`Balanced::Credit.find(credit_uri)`的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-12T08:47:29.777

这已被弃用，现在您现在使用 Balanced::Customer.find_by_email(email_address)

# css - 在一个 div 中居中三个 div

> ID：11588912
> 
> 赞同：1
> 
> 时间：2012-07-21T02:06:42.517
> 
> 标签：css, html, center

我正在尝试将三个 div 居中在另一个 div 中。我似乎无法让它工作。我的网站是响应式的，也许这与它有关？这是我到目前为止的代码和CSS，非常感谢任何帮助！

我试图让所有三个 div`.hp-highlight`居中`.home-highlights`：

```
<div id="home-highlights" class="clearfix">

    <div class="heading">
        <h2><a href="http://kompufast.com/?page_id=1909" title="What We Do"><span>What We Do</span></a></h2>
    </div>
    <!-- /heading -->

    <div class="hp-highlight  ">
        <img src="http://kompufast.com/wp-content/uploads/2012/06/kompufast_sales1.jpg" title="Sales" class="hp-highlight-img" />
        <h3><a href="http://kompufast.com/?services=safe-computing" title="Sales" target="_self">Sales</a></h3>
        <p>KompuFAST+ is the right company to help you address your need for all kind of consumer technology products.</p>
    </div>
    <!-- /hp-highlight -->

    <div class="hp-highlight  ">
        <img src="http://kompufast.com/wp-content/uploads/2012/02/kompufast_order1.jpg" title="Order" class="hp-highlight-img" />
        <h3><a href="http://kompufast.com/?services=social-media" title="Order" target="_self">Order</a></h3>
        <p>KompuFAST-Order facilitates the ordering of products, without a fee for special order.</p>
    </div>
    <!-- /hp-highlight -->

    <div class="hp-highlight highlight-third ">
        <img src="http://kompufast.com/wp-content/uploads/2012/02/kompufast_fix1.jpg" title="Fix" class="hp-highlight-img" />
        <h3><a href="http://kompufast.com/?services=shared-hosting " title="Fix" target="_self">Fix</a></h3>
        <p>KompuFAST+ has a team of dedicated repair technicians ready to diagnose your computer for all sorts of problems.</p>
    </div> 
```

这是我一直在尝试的 CSS：

```
.home-highlights {
    margin-right:auto;
    margin-left:auto;
    width: 100%;
}
.hp-highlight {
    width: 280px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T02:45:23.780

无法在 IE7 或更低版本中运行，但可以。

```
.hp-highlight {
   display: inline-block;
   width: 280px;
   vertical-align: top;
} 
```

如果您需要 IE7 和更低的支持，则必须使用 float。

```
.hp-highlight {
   width: 280px;
   float: left;
} 
```

该点之后的所有 3 个项目的居中将通过使用 text-align: center on .home-highlight 或将这 3 个项目包装在另一个 div 中并将其左/右边距设置为自动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T02:12:59.113

添加边距：自动；到你的 .hp-highlight 类

这是你的CSS应该是这样的

```
.hp-highlight {
    margin:auto;
    width: 280px;
} 
```

在这里工作：http: [//jsfiddle.net/RhMZ7/1/](http://jsfiddle.net/RhMZ7/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T14:43:55.307

这甚至可以在 IE7 中使用；不需要浮动。

```
.home-highlights {font-size: 0; text-align: center;}
.hp-highlight {
    display: inline-block;
    *display: inline; 
    vertical-align: top; 
    width: 280px;
    zoom: 1;
} 
```

# java - Java替换字符串特定位置的字符？

> ID：11588916
> 
> 赞同：43
> 
> 时间：2012-07-21T02:08:27.487
> 
> 标签：java, string, replace, char

我正在尝试替换字符串特定位置的字符。

例如：

```
String str = "hi"; 
```

将字符串位置 #2 (i) 替换为另一个字母“k”

我该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-07-21T02:10:26.783

**[Petar Ivanov](https://stackoverflow.com/users/791998/petar-ivanov)的答案以[替换字符串问题中特定索引处的字符](https://stackoverflow.com/questions/6952363/java-replace-a-character-at-a-specific-index-in-a-string/6952379#6952379)**

字符串在 Java 中是不可变的。你不能改变它们。

您需要创建一个替换字符的新字符串。

```
String myName = "domanokz";
String newName = myName.substring(0,4)+'x'+myName.substring(5); 
```

或者您可以使用 StringBuilder：

```
StringBuilder myName = new StringBuilder("domanokz");
myName.setCharAt(4, 'x');

System.out.println(myName); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-21T07:47:54.420

Kay!

First of all, when dealing with strings you have to refer to their positions in 0 base convention. This means that if you have a string like this:

```
String str = "hi";
//str length is equal 2 but the character
//'h' is in the position 0 and character 'i' is in the postion 1 
```

With that in mind, the best way to tackle this problem is creating a method to replace a character at a given position in a string like this:

**Method:**

```
public String changeCharInPosition(int position, char ch, String str){
    char[] charArray = str.toCharArray();
    charArray[position] = ch;
    return new String(charArray);
} 
```

**Then you should call the method 'changeCharInPosition' in this way:**

```
String str = "hi";
str = changeCharInPosition(1, 'k', str);
System.out.print(str); //this will return "hk" 
```

If you have any questions, don't hesitate, post something!

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-05-01T13:11:11.793

使用`StringBuilder`：

```
StringBuilder sb = new StringBuilder(str);
sb.setCharAt(i - 1, 'k');
str = sb.toString(); 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-05-01T13:04:11.433

替换指定位置的字符：

```
public static String replaceCharAt(String s, int pos, char c) {
   return s.substring(0,pos) + c + s.substring(pos+1);
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-06-16T15:01:36.013

如果您需要重用字符串，请使用*StringBuffer*：

```
String str = "hi";
StringBuffer sb = new StringBuffer(str);
while (...) {
    sb.setCharAt(1, 'k');
} 
```

**编辑：**

请注意，*StringBuffer*是线程安全的，而使用*StringBuilder*更快，但不是线程安全的。

# ssl - 使 lighttpd (lighty) 代理根据服务器名称指示转发 HTTPS 请求，而不返回 SSL 证书

> ID：11588918
> 
> 赞同：2
> 
> 时间：2012-07-21T02:08:30.490
> 
> 标签：ssl, proxy, load-balancing, reverse-proxy, sni

我目前正在使用 lighty 作为在小型 HTTP 服务器场上运行的两个不同 Web 应用程序的负载平衡反向代理：

*   轮询（URL_1）=> Server_Group_1
*   轮询（URL_2）=> Server_Group_2

我想将 HTTP 服务器转换为 HTTPS 服务器。URL_1 具有 CERT_1，URL_2 具有 CERT_2。与许多人不同，我**不想**从前端代理提供证书。我希望前端代理将 HTTPS 请求传递给二级代理：Proxy_1（服务于 CERT_1）和 Proxy_2（服务于 CERT_2）。

这应该可以通过 SNI（服务器名称指示）实现。但是我读到的关于 SNI 的所有内容都给出了前端代理服务两个证书的例子。我不想将我的两个证书都放在前端代理上。说我疯了，但我实际上想让证书更靠近应用程序。

对于两个 URL，这似乎很麻烦。这是。我的真实案例涉及几十个网址。因此，不将所有证书存储在一个地方似乎很愚蠢。但是有一些“组织考虑”使得分开管理它们是有利的。

所以基本上，我想使用 SNI 进行纯转发并将 SSL 终止推迟到下游。

谢谢阅读。我希望能从中学*到很多东西*！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T03:35:41.907

您正在尝试做的事情不依赖于 HTTP 反向代理，而是依赖于 TCP 连接级别的反向代理，具有能够识别 SSL/TLS 客户端的附加功能您好，查找服务器名称扩展名和相应地发送。

我意识到这不是您正在寻找的答案，但我不会为此查看 HTTP 服务器。

看起来[这个项目](https://github.com/manuelkasper/HTTPS-SNI-Proxy)可能能够做到这一点（我没有尝试过）。

# sql-server - J2ME 应用程序如何将数据插入到 SQL Server 2008 R2 表中？

> ID：11588922
> 
> 赞同：0
> 
> 时间：2012-07-21T02:09:54.970
> 
> 标签：sql-server, java-me

我们希望允许从功能手机向 SQL Server 表输入数据。哪里有关于如何做到这一点的文章或示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T02:31:59.230

使用 Java ME 应用程序，您不能直接向任何远程服务器插入数据条目。要实现需求，您必须使用一种称为 Web-Service 的机制。您的 Java ME 应用程序会将数据（将插入远程服务器上的数据库）传递给该 Web 服务，而 Web 服务将完成最后的工作。

看看我的答案[Java ME with Web-Service](https://stackoverflow.com/a/11553899/996493)。

也看看这个问题[How to use web service in J2ME application ？](https://stackoverflow.com/questions/4897165/how-to-use-web-service-in-j2me-application)

# python - 默认 Django 管理表单和 FormWizard

> ID：11588924
> 
> 赞同：4
> 
> 时间：2012-07-21T02:10:12.877
> 
> 标签：python, django, django-forms

所以，我想在表单向导中使用默认的 Django 管理表单，因为在这个表单的第一页和第二页上都有许多带有主对象外键的对象，我希望能够内联编辑它们。我使用[http://elo80ka.wordpress.com/2009/10/28/using-a-formwizard-in-the-django-admin/](http://elo80ka.wordpress.com/2009/10/28/using-a-formwizard-in-the-django-admin/)上的示例作为基础，但是，他指定了他自己的表单管理员使用。当然，如果您使用自己的自定义表单，则内联将无法使用。因此，我尝试执行以下操作：

```
create_syllabus = SyllabusCreationWizard([SyllabusAdmin.form, CalendarForm]) 
```

但是，如果我这样做，我会收到以下错误：

```
'ModelForm' object has no attribute '_meta'
Request Method: GET
Request URL:    http://127.0.0.1:8000/admin/Charybdis/syllabus/add/
Django Version: 1.4
Exception Type: AttributeError
Exception Value:    
'ModelForm' object has no attribute '_meta'
Exception Location: C:\Python27\lib\site-packages\django\forms\models.py in __init__, line 229
Python Executable:  C:\Python27\python.exe 
```

自动生成的管理表单似乎没有指定常规 ModelForm 所需的类元信息。

那么，我的问题是，是否有任何方法可以将默认管理表单与 FormWizard 一起使用。我是否需要以某种方式为管理表单提供 Meta，如果需要，如何？还是我需要完全做其他事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-05T18:22:04.510

我想这是如何在 ModelAdmin 中创建和使用表单的问题。如果您调用“SyllabusAdmin.form”，它将是未初始化的 ModelForm 类。

Afaik ModelAdmin 使用 get_form 来实际创建和配置表单。

在你的情况下，你将不得不做类似的事情

`form = SyllabusAdmin(SyllabusModel, admin.site).get_form(request)`

实现你想要的......希望它能回答你的问题。

# c# - 用一行设置asp ListBox中的选定值

> ID：11588930
> 
> 赞同：1
> 
> 时间：2012-07-21T02:12:19.200
> 
> 标签：c#, linq

我正在尝试`ListBox`从 a 设置 asp webcontrol中的选定值，`string[]`但出现错误

> 只有赋值、调用、递减、递增和新对象表达式可以用作语句这是我目前所拥有的......

```
string[] pageRoles = new string[] {"Admin", "Users", "Publisher"};
pageRoles.ToList().ForEach(r => rolesListBox.Items.FindByValue(r).Selected == true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T02:17:24.317

我相信问题在于您使用的是比较运算符而不是赋值。

```
string[] pageRoles = new string[] {"Admin", "Users", "Publisher"};
pageRoles.ToList().ForEach(r => rolesListBox.Items.FindByValue(r).Selected = true); 
```

# ruby-on-rails-3 - Ruby on Rails 3 嵌套路由：错误的操作路由

> ID：11588931
> 
> 赞同：0
> 
> 时间：2012-07-21T02:12:30.113
> 
> 标签：ruby-on-rails-3, nested-routes

我有两个模型：团队和项目

路线.rb

```
resources :teams do
  resource :projects
end 
```

还有两个问题！

**1-**根据[http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)，我希望得到 team/:team_id/projects/:id 路径。然而，这种情况并非如此。

耙路线

```
 team_projects POST     /teams/:team_id/projects(.:format)      projects#create
     new_team_projects GET      /teams/:team_id/projects/new(.:format)  projects#new
    edit_team_projects GET      /teams/:team_id/projects/edit(.:format) projects#edit
                       GET      /teams/:team_id/projects(.:format)      projects#show
                       PUT      /teams/:team_id/projects(.:format)      projects#update
                       DELETE   /teams/:team_id/projects(.:format)      projects#destroy 
```

所以我必须命名路线才能让它工作

```
 match 'teams/:team_id/projects/:id' => 'projects#show', :via => [:get], :as => :show_project 
```

那么如何利用 rails 辅助方法而不是命名它们呢？

* * *

**2-** 在项目显示操作视图中，调试器为我抛出这些参数：

```
action: show
controller: projects
team_id: '1' 
```

这很好。但是当我点击“new_team_projects_path”网址时，它会将我重定向到同一个视图，并且调试器会抛出这些参数：

```
controller: projects
action: show
team_id: '1'
id: new 
```

它不会将我重定向到新操作，而是将“新”作为 ID！为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T02:36:00.883

1.  你需要使用

    ```
    resources :teams do
      resources :projects
    end 
    ```

    注意复数！`resource`产生一条没有 id 的奇异路线。

2.  won't be relevant anymore with the first fix.

# python - 如何使用 python (3.2) 保存函数

> ID：11588934
> 
> 赞同：1
> 
> 时间：2012-07-21T02:13:28.313
> 
> 标签：python, function, python-3.x

刚开始学习python（3.2），有个问题。我创建了一些代码来创建一些统计数据（如健康、魔法等），并且这些数字是随机生成的。这是代码...

```
def stats ():
print ()
print ('Some text.')

done = False
while not done :
charname = input(str('What is the name of the character? '))

hp = random.randint(5,20)
mp = random.randint(4,20)
stre = random.randint(3,20)
agi = random.randint(3,20)
spd = random.randint(3,20)
wis = random.randint(3,20)
intel = random.randint(3,20)
cha = random.randint(3,20)

print (charname)
print ('HP:',hp)
print ('Mana:',mp)
print ('Strength:',stre)
print ('Agility:',agi)
print ('Speed:',spd)
print ('Wisdom:',wis)
print ('Intelligence:',intel)
print ('Charisma:',cha)
print ()

done = input('All done? yes/no ')
if( done == 'yes' ):
    done = True
elif(done == 'no'):
    done = False

while done :
print ()
print ('Now that your stats are done, you can go on your adventure!')
done = False 
```

现在这工作正常，但是如果我想再次查看统计信息并保持之前随机生成的相同统计信息，我该如何再次调用此函数？

对不起，如果问题有点不对劲。仍然是编程的新手。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T02:25:38.437

由于您是编程新手，这里有一些关于存储数据的不同方式的建议（无需实际为您编码）。

首先，定义一个`Character`类，包含 HP、mana 等属性。我不知道你是否了解类，但[这里有一个介绍](http://getpython3.com/diveintopython3/iterators.html#defining-classes)。您可以采取各种技巧来避免必须明确地写下 HP、mana 等的名称，但为了学习起见，现在最好手动完成它们。

然后`def`是一个`random_character()`创建`Character`具有随机属性的对象的函数，就像你现在所做的那样定义，但不是将它们保存在 Python 不知道彼此有任何关系的不同变量中，而是将它们放在一个`Character`.

向类添加一个`__str__`方法，`Character`以便 if `char`is a打印出属性。`Character``print(char)`

如果您希望能够跟踪字符，请使用[`pickle`](http://docs.python.org/release/3.1.5/library/pickle.html)将其存储在文件中。

如果您对此有任何疑问，请提出。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T02:26:52.793

您的函数现在使用局部变量来记录您生成的统计信息。您需要将它们捆绑到字典或对象中，以便可以将它们作为值传递。

例如：

```
def get_stats():
    stats = {}
    stats['charname'] = input(str('What is the name of the character? '))

    stats['hp'] = random.randint(5,20)
    stats['mp'] = random.randint(4,20)
    stats['stre'] = random.randint(3,20)
    stats['agi'] = random.randint(3,20)
    stats['spd'] = random.randint(3,20)
    stats['wis'] = random.randint(3,20)
    stats['intel'] = random.randint(3,20)
    stats['cha'] = random.randint(3,20)

    return stats

def print_stats(stats):
    print (stats['charname'])
    print ('HP:',stats['hp'])
    print ('Mana:',stats['mp'])
    print ('Strength:',stats['stre'])
    print ('Agility:',stats['agi'])
    print ('Speed:',stats['spd'])
    print ('Wisdom:',stats['wis'])
    print ('Intelligence:',stats['intel'])
    print ('Charisma:',stats['cha'])
    print () 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T02:19:19.170

您可以使用`def`关键字来声明函数。[定义](http://docs.python.org/release/1.5.1p1/tut/functions.html)

```
def stat(): 
```

你可以在你想要的位置调用这样的函数。 `stat()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T02:47:42.970

如果您想轻松存储在外部文件中，您可以使用该`pickle`模块以及您希望存储的值的字典。

例如：

```
import pickle
stats={}
stats['hp'] = random.randint(5,20)
stats['mp'] = random.randint(4,20)
stats['stre'] = random.randint(3,20)
stats['agi'] = random.randint(3,20)
stats['spd'] = random.randint(3,20)
stats['wis'] = random.randint(3,20)
stats['intel'] = random.randint(3,20)
stats['cha'] = random.randint(3,20)
#save the stats into the file by using:
pickle.dump(stats,yourstatfile.pkl)
#then to load it again from any program just use:
stats=pickle.load(yourstatfile.pkl) #you assign it to a variable, so if i used the variable 'lol' i would use it as lol['hp'] not stats['hp'] like it was originally used when saving.
#then you can use it just like any other dictionary:
print "your hp: "+str(stats['hp']) 
```

# html - 并非所有 POST 数组元素都被发送

> ID：11588945
> 
> 赞同：0
> 
> 时间：2012-07-21T02:15:38.390
> 
> 标签：html, post

我有一个表，它有 4 列，第一列包含一个文本输入框。整个表被包装在一个表单中，该表单将对该数据运行 PHP 脚本。截至目前，我只是打印出 POST 数组。问题是我缺少一些写入输入字段的值。因此，将值 1-10 放在前 10 个文本输入中会给我在 print_r 中的以下内容：

```
Array
(
[65710] =>
[65705] => 2
[269200318] => 
[269200586] => 4
[16830189] => 
[16829165] => 
[1051902] => 7
[65742] => 
[16830122] => 
[269339822] => 10
} 
```

此表单的 HTML 可在此处找到：http: [//jsfiddle.net/nY9MF/](http://jsfiddle.net/nY9MF/)

这是在 IIS 7 上运行的

编辑：我更新了 jsfiddle 代码以获得这些商店之一的完整表格。这是我点击提交后的 POST 数组：

```
Array(
[65710] => 
[65705] => 2
[269200318] => 
[269200586] => 4
[16830189] => 
[16829165] => 
[1051902] => 7
[65742] => 
[16830122] => 
[269339822] => 10
[65774] => 
[16821982] => 
[65740] => 
[16825517] => 
[65709] => 
[1051326] => 
[1052334] => 
[65773] => 
[4110] => 
[16837342] => 
[16825518] => 
[1051375] => 
[1051594] => 
[65743] => 
[1052108] => 
[256] => 
[4106] => 
[65711] => 
[65738] => 
[1051597] => 
[4109] => 
[65724] => 
[SaveQuantity] => Save 
```

)

# php - MySQL JOIN 一个表的多行到另一表的一行

> ID：11588947
> 
> 赞同：1
> 
> 时间：2012-07-21T02:16:01.270
> 
> 标签：php, mysql, join, rows

我有两张桌子：

```
Table 1: Articles (id, name, title, content)
Table 2: Comments (id, comment, a_id) 
```

表2包含a_id对应表1中id字段的评论，同一篇文章有​​几行

我使用了以下选择语句：

```
$result = mysql_query("SELECT * FROM articles a JOIN comments c ON a.id = c.a_id WHERE a.name='$a'");

$row = mysql_fetch_array($result);
echo $row["title"]."<br/>".$row["content"]."<hr/>".$row["comments"] 
```

抛开安全问题不谈，这会显示给定文章名称 $a 的内容，但在应该有多个评论时只给出一个评论。我必须怎么做才能显示给定文章的所有评论？$row["comments"] 不应该是一个数组吗？

我想要的最终结果是一次显示一篇文章，以及分配给给定文章的所有评论。目前我得到的只是一篇文章和一个（第一个）评论，即使表 2 中有多行具有相同的 a_id 字段值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T02:19:11.633

你必须把你的 fetch 放在一个 while 循环中：

```
$i=0;
while($row = mysql_fetch_assoc($result))
{
    if(!$i)
    {
        echo $row["title"]."<br/>".$row["content"]."<hr/>";
        $i++;
    }
    echo $row["comment"] . "<hr />";
} 
```

# jquery - jQuery - 如何在数据对象函数中获取元素

> ID：11588950
> 
> 赞同：0
> 
> 时间：2012-07-21T02:16:46.810
> 
> 标签：jquery

有没有办法在设置为元素的“数据”的对象中的函数内获取元素？如果没有，有哪些替代方法可以实现这一点？

```
var m = function(options){
     // Some initialization code here
}

m.prototype.doSomething: function() {
    // How do i get the #an_element here?
}

$("#an_element").data('myObject', m); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T04:17:26.260

我假设你在#an_element 中存储了一个类或id 即选择器。试试这个：

```
var m = function(options){
     // Some initialization code here
}

m.prototype.doSomething: function() {
    var selector = $("#an_element").data('myObject');
    var required_element = $(selector);
}

$("#an_element").data('myObject', m); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T04:18:22.853

最简单的方法是将该元素提供给构造函数，您可以在[jsfiddle](http://jsfiddle.net/fustic/3LUTX/15/)上进行检查。

```
var m = function(options){
     // Some initialization code here
    $.extend(this, options);
}

m.prototype.doSomething= function() {
    // How do i get the #an_element here?
    var _this=this;
    if(_this.el && _this.el.length){
        _this.el.css({color:"black"}); 
    }
}
$(function(){
    var $el=$("#an_element");
    $el.data('myobject', new m({el:$el}));
    $el.click(function(){
        var nn=$(this).data("myobject");
        nn.doSomething();
        return false;
    });
}); 
```

你所做的错误是你试图将函数本身放入数据中，但你必须先创建一个对象，如下所示：`$("#an_element").data('myObject', new m());`

# cocos2d-x - 在 Windows 上安装 Cocos-2dx

> ID：11588955
> 
> 赞同：4
> 
> 时间：2012-07-21T02:17:32.330
> 
> 标签：cocos2d-x

我想我和很多其他想要使用 Cocos2dx 的开发者一样。我在一台 Windows 机器上，我有 eclipse 作为我的开发环境。我不介意切换到 Visual Studio，但我不想一半在 Visual Studio 中，一半在 Eclipse 中。我认为缺乏工具支持在某种程度上破坏了这里的跨平台目标。我有哪些选择？我的意思是，如果我没有得到一些好的选择，我可能会选择用于 android 的 libgdx 和用于 iPhone 的 cocos2d。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T16:09:40.883

您可以完全转移到 Visual Studio，有一个名为 VS Android 的项目，您可以从中运行 android 并将 cocos2d-x 添加到该项目，反之亦然

第一次你会觉得很困难，但是一旦你设置了一个演示项目，你就可以在很多地方重复使用它。

首先在 Visual Studio 中设置 cocos2d-x 项目，然后将这些设置添加到 VS Android 演示项目中，您可以在以下步骤中找到它

或者你可以反之亦然

您可以使用“VS Android”使用visual studoio for android

以下是设置它的步骤 (i) 下载 SDK 和其他依赖项：

1）下载SDK [http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)

2) 下载 NDK [http://developer.android.com/tools/sdk/ndk/index.html](http://developer.android.com/tools/sdk/ndk/index.html) 3) 下载 Cygwin [http://cygwin.com/install.html](http://cygwin.com/install.html)

4）下载JDK [http://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html)

5）下载VS 2010。这个版本非常重要，因为VS Android不兼容任何其他VS版本[http://www.microsoft.com/visualstudio/en-us/products/2010-editions/express-iso](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/express-iso)

6) 下载 VS 安卓[http://code.google.com/p/vs-android/](http://code.google.com/p/vs-android/)

7) Apache Ant 下载[http://ant.apache.org/bindownload.cgi](http://ant.apache.org/bindownload.cgi)

8) 设置环境变量： [要设置环境变量，请执行：MyComputer->右键单击->属性->高级->环境变量。] a) ANDROID_NDK_ROOT = :\android-ndk-r8-windows\android-ndk-r8 b) ANT_HOME = :\apache-ant-1.8.4-bin\apache-ant-1.8.4 c) JAVA_HOME = \Java\ jdk1.7.0_05 d) _JAVA_OPTIONS = -Xms256m -Xmx512m

9) 从这里下载示例[http://code.google.com/p/vs-android/downloads/detail?name=vs-android_samples.zip](http://code.google.com/p/vs-android/downloads/detail?name=vs-android_samples.zip)

**注意**：如果您遵循正确的步骤，您不会有任何问题，但有时它会采用试错法。我会尽力帮助你，因为我是这样设置的

**优点**：在 VS 中调试非常棒我是 VS 用户我讨厌 eclipse，因为它有问题

**缺点** 设置困难但是一旦你得到它..你得到它终身..即使 cocos2d-x 版本得到更新也没关系你只需要复制粘贴你的 cocos2d--x 项目文件到新项目中

# iphone - 将菜单项连接到 xib 文件 cocos2d？

> ID：11588961
> 
> 赞同：0
> 
> 时间：2012-07-21T02:19:15.350
> 
> 标签：iphone, objective-c, xcode, ios5, cocos2d-iphone

我有这个菜单项，我想连接到我的 xib 文件并且想知道如何做到这一点？我认为这可能就像普通的 Xcode 一样，但它与我认为的方式完全不同。如果你帮助我，真的很感激。

```
 CCMenuItemImage *gamecenter = [CCMenuItemImage
                                itemFromNormalImage:@"gamecenter.png"
                                selectedImage:@"gamecenter.png"
                                target:self
                                selector:@selector(gamecenter:)];

    option1.position =ccp(50,-150);

    CCMenu *menu6 = [CCMenu menuWithItems: option2, nil];
    [menuLayer addChild: menu6];        

    - (void) option2: (id) sender
{
    [[CCDirector sharedDirector] replaceScene:[GameCenterViewController scene]];

 } 
```

我知道您可能不使用 GameCenterViewController （xib 文件）来替换场景。但只是把它放在一种展示我正在尝试做的事情上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T07:30:34.253

我假设 GameCenterViewController 是一个 Cocos2d CCLayer。如果不是，请告诉我，我将编辑答案...

```
- (id)init
{
    CCMenuItemImage *gameCenterMenuItem = [CCMenuItemImage
                                  itemFromNormalImage:@"gamecenter.png"
                                  selectedImage:@"gamecenter.png"
                                  target:self
                                  selector:@selector(gamecenter:)];

    CCMenu *menu = [CCMenu menuWithItems: gameCenterMenuItem, nil];

    [menuLayer addChild: menu];
}

- (void)gamecenter: (CCMenuItem *)menuItem 
{
    [[CCDirector sharedDirector] replaceScene:[GameCenterViewController scene]];
} 
```

# php - 使用 PHP 仅显示来自 mySQL 时间戳字段的时间

> ID：11588963
> 
> 赞同：5
> 
> 时间：2012-07-21T02:19:19.560
> 
> 标签：php, mysql

例如，当我`echo['time']`从数据库中获取

```
2012-07-21 17:00:00 
```

我的问题是我应该如何只显示我得到的每个时间戳的小时和分钟？(17:00)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-21T02:22:33.240

您可以将其选择为：

```
SELECT TIME_FORMAT(`dateColumn`, '%H:%i') FROM ... 
```

或`strtotime`如其他答案中所述使用。

如果您确实想要几秒钟的全职时间，您还可以使用：

```
SELECT TIME(`dateColumn`) FROM ... 
```

见[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-21T02:23:11.117

[您应该正确解析它并使用DateTime](http://php.net/datetime)类回显您想要的内容：

```
$time = '2012-07-21 17:00:00';
$date = DateTime::createFromFormat( 'Y-m-d H:i:s', $time, new DateTimeZone( 'America/New_York'));
echo $date->format( 'H:i'); // Will print 17:00 
```

[演示](http://viper-7.com/4NO2SZ)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-21T02:24:42.837

你可以照克里斯说的去做 `echo date('H:i', strtotime('2012-07-21 17:00:00'));`

但如果可能的话，最好从 MySQL 处理，

`select date_format(time, '%H:%i') from table;`

应该检索数据并将其格式化给您，一切顺利！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-21T02:21:53.350

`echo date('H:i', strtotime($row['time']));`

[或者您可以使用日期时间函数](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)在您的 sql 查询中格式化

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-21T02:21:32.447

```
echo date('H:i', strtotime('2012-07-21 17:00:00')); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-07T13:23:40.640

我使用我自己的代码。试试这个.. 请按照以下步骤操作：-
1\. 从数据库表中选择时间假设：- $time = $row['time'];
2\. 创建一个名为 :- "time.php" 的 php 文件
3\. 将以下代码粘贴到 time.php

```
 <?php
$ct= date('Y-m-d H:i:s');
$now = new DateTime("$ct");
$ref = new DateTime("$time");
$diff = $now->diff($ref);
$y=$diff->y;
$m=$diff->m;
$d=$diff->d;
$h=$diff->h;
$i=$diff->i;
$s=$diff->s;
if($m>12)
{
echo $y;
echo " year ago";
}
elseif($m<1 && $d<1 && $h<1 && $i<1 && $s<60)
{
echo $s;
echo " sec ago";
}
elseif($m<1 && $d<1 && $h<1 && $i<60)
{
echo $i;
echo " mins ago";
}
elseif($m<1 && $d<1 && $h<48)
{
echo $h;
echo " hrs ago";
}
elseif($m<1 && $d<30 && $h<24)
{
    if($d==1)
    {
        echo 24+$h." hrs ago";
    }
    else
    {
        echo $d;
        echo " days ago";
    }
}
elseif($m<=12)
{
    if($m > 0)
    {
        echo $m;
        echo " Month ago";
    }
    else
    {
        echo $d;
        echo " days ago";
    }       

}

?> 
 <?php include "time.php";?> //use include/require function where you want to display time ago... 
```

4.  只需将文件包含在您想要以
    1 天前/ 30 天前......秒前..小时前..一个月前等 格式显示时间的其他 php 文件中。

# iphone - iCloud 可可错误 512

> ID：11588965
> 
> 赞同：1
> 
> 时间：2012-07-21T02:20:56.777
> 
> 标签：iphone, objective-c, ios, ipad, icloud

我正在尝试将文件从我的 iCloud 容器复制到我的应用程序的缓存目录。我不断进入`The operation couldn’t be completed. (Cocoa error 512.)`我的日志，这是一个非常广泛的错误含义`NSFileWriteUnknownError`，或者写入失败并且 iOS 不知道为什么。

这是`NSMetadataQuery`完成并在 iCloud 中有文件名的代码。我将简要描述下面的代码。

```
- (void)loadData:(NSMetadataQuery *)query {

    NSArray *cache = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:[cacheDirectory stringByAppendingString:@"/issues"] error:NULL];

    for (NSMetadataItem *item in [query results]) {

        NSURL *name = [item valueForAttribute:NSMetadataItemURLKey];
        NSString *nameString = [item valueForAttribute:NSMetadataItemPathKey];

        NSError *error;

        NSURL *cacheURL = [NSURL fileURLWithPath:cacheDirectory];
        NSURL *destination = [cacheURL URLByAppendingPathComponent:[NSString stringWithFormat:@"issues/%@", [[nameString stringByDeletingLastPathComponent] lastPathComponent]] isDirectory:YES];

        [[NSFileManager defaultManager] copyItemAtURL:[name URLByDeletingLastPathComponent] toURL:destination error:&error];

        }

    }

} 
```

这个应用程序同步报纸问题。在 iCloud 文档容器中，有包含数据的文件夹（一个文件夹可以是`5.1.12`），每个文件夹内都有一个**同名**的 PDF 文件（`5.1.12.pdf`）。

知道为什么会这样吗？谢谢你的帮助。

```
iCloud: file://localhost/private/var/mobile/Library/Mobile%20Documents/AppBundleID/Documents/5.3.12/

Local: file://localhost/var/mobile/Applications/F91E115B-ECED-403E-AB61-41F7A99EF928/Library/Caches/issues/5.3.12/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:52:13.213

当 iCloud 将文件同步到 iOS 设备时，它首先会在您应用的容器中创建一个空的、无数据的文件，让您知道有可用的文件。这是你的`NSMetadataQuery`报告。

如果您查看 的其他键，`NSMetadataItem`您可能会注意到它表示您的项目尚未下载。

在能够复制该文件或打开它之前，您必须要求 iCloud 下载它。在项目的路径上进行协调读取（就像您应该围绕任何打开或复制操作所做的那样）将隐式下载文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T23:24:22.233

解决了 ！

如果文件已经存在，则 copyItemAtURL 返回错误。大多数时候，您会想要制作持久保存游戏之类的东西，并不断用新的更改覆盖文件。

使用类似这样的东西将您的文件写入 iCloud

```
 BYTE *data = NULL;//Put your file data in here
   int FileSize = 0;//replace with your file size
   NSData *myData = [[NSData alloc] initWithBytes:data length:FileSize];
   [myData writeToFile:[FileURL path] atomically:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T04:37:27.400

使用断点和/或 NSLog 单步执行代码。可能是有一个逻辑错误没有返回您想要的目录路径。

# libgdx - LibGDX vs Cocos2dx 开发安卓游戏

> ID：11588967
> 
> 赞同：4
> 
> 时间：2012-07-21T02:21:28.227
> 
> 标签：libgdx, cocos2d-x

我需要知道 LibGDX 与 Android 平台的 Cocos2dx 相比如何。是的，便携性是一个目标，但质量、易用性和帧速率也是如此。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-24T11:57:30.150

那么这显然在很大程度上取决于你所追求的。Libgdx 和 Cocos2d 有非常不同的 API。所以我实际上建议你把它们都检查出来，最后选择最适合你的。我个人不喜欢 Cocos2d API。Libgdx 更加底层，允许您将渲染逻辑与游戏逻辑完全分离。

Libgdx 是用 C++ 上的 Java 编写的。但是，性能关键部分是用本机代码编写的，以便以最佳速度执行。我亲自查看了很多框架，并没有发现任何性能与 libgdx 一样好的东西。通过热代码交换，开发也变得非常快，这将允许您在游戏中运行和更改代码，而无需重新编译。Libdgx 还允许您部署到 HTML5，而无需重写任何内容。iOS 后端是 WIP。因此，如果 iOS 是您的首要任务，您需要等到 libgdx 支持它。

到目前为止，使用 libgdx 的最大好处是驱动它的非常有帮助的社区。您将很快得到答案以及开发人员自己的帮助。

不用说，我是 libgdx 的狂热支持者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-20T17:59:06.663

首先，libGDX 只是一个游戏开发应用程序框架，它使用了许多第三方库，如 box2d 和轻量级 java 游戏库。同样对于新手来说，在 eclipse 上配置它是完全危险的。它的部署仅限于 Windows、Linux、Mac OS X、Android、iOS 和 Web 浏览器（支持 webgl）

*   它支持在 Windows、Linux、Mac OS X、Android、iOS 和 Web 浏览器中部署（支持 webgl）
*   使用第三方 IDE

* * *

而另一方面 cocos-2d 是开源的，不仅限于游戏开发，还支持应用程序和其他基于 Gui 的交互程序。它还附带了许多表亲库，如 Cocos2d-SpriteBuilder、Cocos2d-x、Cocos2d-html5 和 Cocos2d-XNA，它们对精灵表编辑、粒子编辑等非常有帮助。 cocos2d 的主要优点之一是它使用自己的 IDE CocoStudio这可以是非常有益的和节省时间。

*   它支持部署在 windows、MAC OS X、Linux、android、Windows Phone 7 & 8、Windows 7 & 8、Xbox 360。
*   它使用自己的 IDE Cocostudio
*   开源

# matplotlib - matplotlib 图表的批量调整

> ID：11588977
> 
> 赞同：0
> 
> 时间：2012-07-21T02:23:53.560
> 
> 标签：matplotlib

我有一批需要使用标准模板创建的图表。问题是 Y 轴的位数因设置而异；这导致了一个问题，因为我似乎无法让布局容纳 ylabel + 数字而不进行剪辑。

有没有关于如何为 选择正确值`subplot_adjust`或`tight_layout`牢记字幕的建议？

代码目前大致如下所示：

```
rc('text',usetex=True)
rc('font',family='serif')
mpl.rcParams.update({'font.size': 22})
fig = plt.figure(1,dpi=300,figsize=(4,4))
fig.suptitle(b.replace("_","-"))
ax = fig.add_subplot(1,1,1)
lx = 0
for i in instances:
    lx = max([lx,len(X[i])])
    plt.plot(X[i],Y[i])
plt.xlabel("X Label")
plt.ylabel("Y Label")
fig.subplots_adjust(bottom=0.1, top=0.9) # Works for some charts, not others!
plt.savefig(b+".pdf",format="pdf") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T17:44:18.927

```
majorFormattor = matplotlib.ticker.FormatStrFormatter('%0.1f')
ax.yaxis.set_major_formatter(majorFormattor) 
```

[文档](http://matplotlib.sourceforge.net/api/ticker_api.html#matplotlib.ticker.FormatStrFormatter)

# iphone - 访问 UITableView 中单元格的文本

> ID：11588981
> 
> 赞同：0
> 
> 时间：2012-07-21T02:24:58.187
> 
> 标签：iphone, objective-c, ios, xcode

有没有办法访问表格中的给定单元格？

例如，如果我只想访问表格中第四个单元格的详细信息，我该怎么做？这主要是使用标签完成的吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T02:30:41.280

```
UITableViewCell *cell = [tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:3 inSection:0]];
NSString *detail = cell.detailTextLabel.text 
```

更改`indexPathForRow`为适当的行号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T07:30:45.263

我不相信这个问题的答案！

是的，您可以通过询问单元格来获取单元格的文本。但真的吗？如果单元格不可见怎么办？如果用户正在滚动并且单元格离开屏幕怎么办？

您在表格视图的数据源中拥有所需的一切。

看看这张取自 Apple[核心竞争力的图表](http://developer.apple.com/library/ios/#documentation/general/conceptual/devpedia-cocoacore/MVC.html#//apple_ref/doc/uid/TP40008195-CH32-SW1)

![在此处输入图像描述](../Images/3f761454e5049a829b7511cbe02f8b98.png)

通过从单元格中询问文本的视图，您正在破坏 MVC。您应该询问模型（在这种情况下为数据源）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-21T07:10:35.197

试试这个：-

```
 NSIndexPath *path = [NSIndexPath indexPathForRow:3 inSection:0]; 
   UITableViewCell *cell = [tableView cellForRowAtIndexPath:path]; 
```

# .htaccess - .htaccess 指向位于 URL 中间的 php 文件

> ID：11588982
> 
> 赞同：0
> 
> 时间：2012-07-21T02:25:00.277
> 
> 标签：.htaccess

我一直在环顾四周，但可以完全找到我正在寻找的东西，即使我确信这是一项非常基本的任务。我希望 URL 可以是这样的“www.site.com/server/1”。URL 中的服务器部分将是 .php 文件，然后可以在查询等中使用 / 之后的数字。

我已经对其进行了排序，因此它不需要 .php 但不知道如何重写？回到 search.php 文件（不是每个人都确定重写是否是我正在寻找的。）

非常感谢任何可以提供帮助的人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T03:31:57.307

尝试将其放入文档根目录的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)/([0-9]+) /$1.php?number=$2 [L,QSA] 
```

您需要将查询字符串参数名称替换为`number`您需要的名称。不确定“能够在查询中使用 / 之后的数字”是什么意思。

# ruby-on-rails - 当尝试将 JSON 文件直接加载到我的 rails 数据库（Rails.root、'lib'、'file.json'）时，rails 说“访问模式无效”

> ID：11588985
> 
> 赞同：0
> 
> 时间：2012-07-21T02:25:39.650
> 
> 标签：ruby-on-rails, ruby, json, shared-libraries

这是我试图从 rails c 加载的代码示例（在 lib 文件夹内——文件 data2.json 也在 lib 目录内）

```
$LOAD_PATH.unshift(File.expand_path(".", File.dirname(__FILE__)))
$LOAD_PATH.unshift(File.expand_path("./lib", File.dirname(__FILE__)))

require 'company_gem_class'

class LoadJson

  def go
   File.open(Rails.root, 'lib', 'file.json') do |f|
      f.each_line do |line|
        this_line = JSON.parse(line)
        hash_parser = CompanyGemClass.new(line)
        c = Company.new
        c.followers = hash_parser.followers
        c.company_name = hash_parser.company_name
        c.date_joined = hash_parser.date_joined
        ...
        c.save
      end
    end
 ...
 end 
```

计划是/是通过一个（公司）类直接从 rails 控制台加载所有这些原始数据。我收到很多“json 文件不存在”（Ennooent::path/to/file.json 不存在）。

我试过把它放在 lib/assets 文件夹和 lib 文件夹中，但还没有成功。我该如何完成将这些 json-->ruby 对象批量上传到数据库的任务？

^^我已经捆绑安装了 json gem。^^json 文件是每行一个哈希，所以这就是我这样做的原因

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T03:00:41.447

1.  我敢肯定你知道（但从你的问题中并不完全明显）它`File.open`不会`LOAD_PATH`用于任何事情。因此，无论您放入什么`LOAD_PATH`，都不会影响其`File.open`工作方式。`LOAD_PATH`仅修改`require`搜索文件的方式。

2.  在 Rails 中，您的所有文件操作都应用`Rails.root`作基本路径。在使用 Rails 时，您不能依赖当前的工作目录是特定的。

    所以任何`LOAD_PATH`修改都应该像这样进行：

    ```
    $LOAD_PATH.unshift(File.join(Rails.root, 'my', 'uber', 'lib')) 
    ```

3.  由于 (1) 和 (2) - 如果您要以`File.open`最可靠的方式打开任何文件，请使用`Rails.root`：

    ```
    File.open(File.join(Rails.root, 'path', 'to', 'file.json')) 
    ```

    或者在你的情况下：

    ```
    File.open(File.join(Rails.root, 'lib', 'assets', 'file.json')) 
    ```

4.  默认情况下，在 Rails`lib`中已经存在`LOAD_PATH`。所以你不需要单独添加它。

# c++ - “运算符 /”的分母

> ID：11588993
> 
> 赞同：1
> 
> 时间：2012-07-21T02:27:52.793
> 
> 标签：c++, operator-overloading

有没有办法重载`operator/()`以使用类作为分母？

像这样： `int foo = 5 / object;`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T02:31:00.403

使用自由函数：

```
int operator/ (const int, const MyClass &); 
```

如果它需要访问您没有接口的私有成员，请在您的类中将其设为好友：

```
friend int operator/ (const int, const MyClass &); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T02:30:57.983

使用自由函数而不是成员函数`operator/`。

二元运算符通常具有相同的操作数类型。假设`foo`有一个采用 的非显式构造函数`int`，您将拥有：

```
struct foo
{
  foo(int i) {};
};

int operator/(foo const& x, foo const& y); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T02:31:32.657

免费功能是您的朋友：

```
int operator/ (int, const MyClass &); 
```

# java - 穿越推特时间线

> ID：11588996
> 
> 赞同：0
> 
> 时间：2012-07-21T02:28:33.037
> 
> 标签：java, xml, xml-parsing, twitter

使用 twitter 上的 rest api，服务器只提供有限数量的推文。我正在尝试通过循环使用 api 中建议的方法 max_id 来检索用户历史记录。但是，每次调用时，我都会得到一个新的 xml 标头，它会引发 SAX Parser 错误，因此我无法检索 max_id。我查看了 Transformer 的 java api 和 OMIT_XML_DECLARATION 但我不确定将它放在我的代码中的哪个位置，是否应该在连接、打印方法或处理文档时删除 xml 声明。我无法弄清楚 Transformer 的输出......虽然我已经深入研究过它。

```
public class DataGrabber {

File destFile;
int qcount = 0;

public void getRuserHx() throws ParserConfigurationException, IOException, InterruptedException, SAXException {
        int downNodes = 0;
        Integer statTot = 10;
        String maxId = null;

        File filename = new File(MyIds.hoopoeData + "/" + MyIds.rootUser + "Hx.xml");

        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance(); 
        DocumentBuilder builder = factory.newDocumentBuilder();
        Document doc;

            //loop and download based on the id of the last tweet
            while(downNodes < statTot){
             System.out.println("Getting user status history...");
             String filex = MyIds.rootUser + "Hx.xml";
             String https_url = "https://twitter.com/statuses/user_timeline.xml?screen_name=" + MyIds.rootUser + "&count=300";
             makeConnection(https_url, filex);

             //validate the xml before you parse
             doc = builder.parse(filename); 
             doc.getDocumentElement().normalize();

             //set up for the loop           
             downNodes = HooUtil.nodeCount(filename, "status");
             statTot = Integer.parseInt(HooUtil.nodeValue(filename, "user", "statuses_count", 0));

             Long loopMax = (Long.valueOf(HooUtil.nodeValue(filename, "status", "id", downNodes - 1)) - 1);
             maxId = loopMax.toString();
             https_url = "https://twitter.com/statuses/user_timeline.xml?screen_name=" + MyIds.rootUser + "&count=300&max_id=" + maxId;
             Thread.sleep(4000);
             qcount ++;
            }

        System.out.println("Finished downloading user status history.");

  }

    //connect with the input query
public void makeConnection(String https_url, String filex){
    URL url;
    try {     
         url = new URL(https_url);
         HttpsURLConnection con = (HttpsURLConnection)url.openConnection();          
         //dump all the content into an xml file
         print_content(con, filex);

    } 
    catch (MalformedURLException e) {
         e.printStackTrace();
    } 
    catch (IOException e) {
         e.printStackTrace();
    }

}

    //the print method for the xml file
private void print_content(HttpsURLConnection con, String filex){

    if(con!=null){

        try {           
           BufferedReader br = new BufferedReader(new InputStreamReader(con.getInputStream()));

              destFile = new File("/" + filex);
              PrintWriter out = new PrintWriter(new FileWriter(MyIds.hoopoeData + destFile, true)); 
              String input;
              while ((input = br.readLine()) != null){
              out.println(input);
        }

           out.flush();
           out.close();
           br.close();  

        } 
        catch (IOException e) {
           e.printStackTrace();
        }   

    } 
```