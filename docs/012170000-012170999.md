# StackOverflow 问答 12170000-12170999

# winapi - SetWinEventHook 在 BHO（浏览器帮助对象）中使用时会导致 IE 崩溃

> ID：12170004
> 
> 赞同：0
> 
> 时间：2012-08-29T02:09:35.507
> 
> 标签：winapi, interop, internet-explorer-9, com-interop, bho

我有一个 C# BHO，它设置了一个钩子，以便我可以跟踪 IE 何时获得焦点：

```
public class BHO : IObjectWithSite, IOleCommandTarget
{
    delegate void WinEventDelegate(IntPtr hWinEventHook,
       uint eventType, IntPtr hwnd, int idObject,
       int idChild, uint dwEventThread, uint dwmsEventTime);

    const uint WINEVENT_OUTOFCONTEXT = 0;
    const uint EVENT_SYSTEM_FOREGROUND = 3;

    [DllImport("user32.dll")]
    static extern bool UnhookWinEvent(IntPtr hWinEventHook);
    [DllImport("user32.dll")]
    static extern IntPtr SetWinEventHook(uint eventMin,
        uint eventMax, IntPtr hmodWinEventProc,
        WinEventDelegate lpfnWinEventProc, uint idProcess,
        uint idThread, uint dwFlags);

   private static IntPtr m_hhook; 

       ............

        m_hhook = SetWinEventHook(EVENT_SYSTEM_FOREGROUND,
           EVENT_SYSTEM_FOREGROUND, IntPtr.Zero,
           WinEventProc, 0, 0, WINEVENT_OUTOFCONTEXT);

       ............

   void WinEventProc(IntPtr hWinEventHook, uint eventType,
             IntPtr hwnd, int idObject, int idChild,
             uint dwEventThread, uint dwmsEventTime)
    {

    } 
```

它工作了一段时间，然后 IE 崩溃并显示“尝试读取或写入受保护的内存。这通常表明其他内存已损坏”

请注意，即使 WinEventProc 中没有任何内容，它也会崩溃（如上所示）。如果我不设置钩子，它永远不会崩溃。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T18:12:12.383

您的回调委托可能会被 GC 处理。而不是使用自动委托创建功能，而是创建一个显式的，将其传递给 SetWinEventHook，然后将其保留在实例成员中，直到您完成它。

代码可能类似于：

```
// In the class...
WinEventDelegate m_wineventprocDelegate;

// When you register the hook...
m_wineventprocDelegate = new winEventDelegate(WinEventProc);

// Pass in the delegate instead of WinEventProc
m_hhook = SetWinEventHook(EVENT_SYSTEM_FOREGROUND,
       EVENT_SYSTEM_FOREGROUND, IntPtr.Zero,
       m_wineventprocDelegate, 0, 0, WINEVENT_OUTOFCONTEXT); 
```

让成员引用代表可以防止它被收集。

# java - 出于特定原因维护 xml 文件

> ID：12170005
> 
> 赞同：0
> 
> 时间：2012-08-29T02:09:35.903
> 
> 标签：java, google-app-engine, jakarta-ee

出于特定原因，我需要维护一个*xml文件。*我知道 GAE 文件系统是只读的，但有什么办法可以做到这一点吗？

我也知道*xml*文件中的数据将一直存在，直到应用程序没有重新部署。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T02:26:51.583

与您的应用程序一起上传的文件无法修改，但有几个可通过 API 获得的非本地存储设施。其中包括[NoSQL Datastore](https://developers.google.com/appengine/docs/java/datastore/)、[Cloud SQL](http://developers.google.com/cloud-sql/)、[Cloud Storage](https://developers.google.com/appengine/docs/java/googlestorage/)和[Blobstore](https://developers.google.com/appengine/docs/java/blobstore/)。

如果您的 XML 数据不超过 1MB，则传统的 NoSQL 数据存储应该可以很好地工作，因为它提供了良好的性能和事务一致性。

无论您选择何种可修改存储，您都可以在应用程序包中包含 .xml 文件并编写一次性代码以将初始版本加载到商店中。

# mongodb - 仍然无法针对使用 Salat / Casbah 玩 FakeApp 进行多项测试

> ID：12170009
> 
> 赞同：3
> 
> 时间：2012-08-29T02:10:14.377
> 
> 标签：mongodb, playframework-2.0, casbah, specs2, salat

我以为我已经暂时解决[了这个问题](https://stackoverflow.com/questions/12028218/running-multiple-tests-within-the-same-fakeapplication-in-play-2-0-scala)，但事实证明我仍然有问题。

我正在尝试为我的模型层创建一些 specs2 测试，我想插入一些虚拟对象，然后运行一些查询以确保数据按预期输出。这是我的简单测试的样子：

```
类 ModelSpec 扩展规范 {

    覆盖 def is = args(sequential = true) ^ super.is

    对象 FakeApp 扩展了 FakeApplication()

    运行（FakeApp）{
        println("建立数据库")
        val 新用户 = 用户（
                    电子邮件=“wfbarksdale@gmail.com”，
                    用户名 = "weezybizzle",
                    密码=“坚果黄油”）
        用户保存（新用户）
    }

    运行（FakeApp）{
        “用户模型”应该 {
            {中的“由用户名创建和检索”
                println("找人")
                User.findOneByUsername("weezybizzle") 必须是Some
            }
            {中的“找不到不存在的用户”
                println("找不到人")
                User.findOneByUsername("nobody") 必须是None
            }
        }
    }
}

```

这是我从单元测试中获得的堆栈跟踪：

```
[信息] 将 1 个 Scala 源代码编译到 /www/mojulo3/target/scala-2.9.1/test-classes...
设置数据库
找人
找不到人
[信息] 模型规格
[信息]
[信息] 用户模型应该
[错误] ！由用户名创建和检索
[错误] IllegalStateException: 这个 Mongo 已经关闭 (DBTCPConnector.java:123)
[错误] com.mongodb.DBTCPConnector._checkClosed(DBTCPConnector.java:123)
[错误] com.mongodb.DBTCPConnector.call(DBTCPConnector.java:207)
[错误] com.mongodb.DBApiLayer$MyCollection.__find(DBApiLayer.java:313)
[错误] com.mongodb.DBApiLayer$MyCollection.__find(DBApiLayer.java:298)
[错误] com.mongodb.DBCollection.findOne(DBCollection.java:682)
[错误] com.mongodb.DBCollection.findOne(DBCollection.java:661)
[错误] com.mongodb.casbah.MongoCollectionBase$class.findOne(MongoCollection.scala:225)
[错误] com.mongodb.casbah.MongoCollection.findOne(MongoCollection.scala:897)
[错误] com.novus.salat.dao.SalatDAO.findOne(SalatDAO.scala:311)
[错误] models.User$.findOneByUsername(User.scala:24)
[错误] test.ModelSpec$$anonfun$3$$anonfun$apply$1$$anonfun$apply$2$$anonfun$apply$3.apply(ModelSpec.scala:29)
[错误] test.ModelSpec$$anonfun$3$$anonfun$apply$1$$anonfun$apply$2$$anonfun$apply$3.apply(ModelSpec.scala:29)
[错误] test.ModelSpec$$anonfun$3$$anonfun$apply$1$$anonfun$apply$2.apply(ModelSpec.scala:29)
[错误] test.ModelSpec$$anonfun$3$$anonfun$apply$1$$anonfun$apply$2.apply(ModelSpec.scala:27​​)
[错误] ！找不到不存在的用户
[错误] IllegalStateException: 这个 Mongo 已经关闭 (DBTCPConnector.java:123)
[错误] com.mongodb.DBTCPConnector._checkClosed(DBTCPConnector.java:123)
[错误] com.mongodb.DBTCPConnector.call(DBTCPConnector.java:207)
[错误] com.mongodb.DBApiLayer$MyCollection.__find(DBApiLayer.java:313)
[错误] com.mongodb.DBApiLayer$MyCollection.__find(DBApiLayer.java:298)
[错误] com.mongodb.DBCollection.findOne(DBCollection.java:682)
[错误] com.mongodb.DBCollection.findOne(DBCollection.java:661)
[错误] com.mongodb.casbah.MongoCollectionBase$class.findOne(MongoCollection.scala:225)
[错误] com.mongodb.casbah.MongoCollection.findOne(MongoCollection.scala:897)
[错误] com.novus.salat.dao.SalatDAO.findOne(SalatDAO.scala:311)
[错误] models.User$.findOneByUsername(User.scala:24)
[错误] test.ModelSpec$$anonfun$3$$anonfun$apply$1$$anonfun$apply$6$$anonfun$apply$7.apply(ModelSpec.scala:35)
[错误] test.ModelSpec$$anonfun$3$$anonfun$apply$1$$anonfun$apply$6$$anonfun$apply$7.apply(ModelSpec.scala:35)
[错误] test.ModelSpec$$anonfun$3$$anonfun$apply$1$$anonfun$apply$6.apply(ModelSpec.scala:35)
[错误] test.ModelSpec$$anonfun$3$$anonfun$apply$1$$anonfun$apply$6.apply(ModelSpec.scala:33)
[信息]  
[信息]  
[信息] 规范 ModelSpec 的总计
[信息] 在 20 毫秒内完成
[信息] 2 个示例，0 个失败，2 个错误
[信息]
[错误] 错误：总计 2，失败 0，错误 2，通过 0，跳过 0
[错误] 测试期间的错误：
[错误] test.ModelSpec
[错误] {file:/www/mojulo3/}mojulo3/test:test: 测试不成功
[错误] 总时间：4 秒，2012 年 8 月 28 日 10:02:33 PM 完成

```

看起来 FakeApp 以某种方式与数据库断开连接，而不是重新连接。我查看了播放源，似乎应用程序将停止并重新启动，无论它是否实际上是同一个对象。我认为这个问题可能源于salat`onStop()`方法，或者`onStart()`我不太确定。

我已经为此苦苦挣扎了一段时间，任何帮助，即使只是关于如何推理问题，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T08:55:27.563

我已经改变了 play-salat 如何关闭它的连接的实现。

通常在应用程序停止时关闭所有连接是一件好事，因为当应用程序再次启动时插件将被重新实例化。

问题是我在一个惰性 val 中创建了 mongodb 连接，该连接创建了一次，当应用程序停止时，它只需调用 .close() 就可以了。

我所做的修复是连接现在已关闭，如果您再次请求连接，它会创建一个新连接并将其传递给您。

这一切都在 play-salat 的 1.1-SNAPSHOT 版本中可用，您可以通过添加直接使用它

```
resolvers += "OSS Snapshots" at "https://oss.sonatype.org/content/repositories/snapshots/" 
```

此版本还包括 salat 1.9.1 和对 capped collections 和 gridfs 的支持 :)

试试看，如果有任何事情没有按预期工作，请大声告诉我。

如果一切看起来不错，我将很快发布最终的 1.1。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T02:39:22.460

执行 specs2 规范有 2 个阶段：首先创建规范及其所有示例。*然后*它被执行。

你应该做的是：

```
class ModelSpec extends Specification with AroundExamples {
  // note the use of sequential here which is simpler than
  // overriding the "is" method
  sequential

  object FakeApp extends FakeApplication()

  // this method, defined in the AroundExamples trait
  // makes sure that every example is executed "inside"
  // the fake app.
  def around[R <% Result](r: =>R) = running(FakeApp)(r)

  // this will be only executed after the whole spec is created
  // if anything fails here, an exception will be caught, reported
  // and the rest will not execute
  step { 
    running(FakeApp) {
      println("set up database")
      val newUser = User(
                email = "wfbarksdale@gmail.com",
                username = "weezybizzle",
                password = "nutterbutter")
      User.save(newUser) 
    }
  }

  "User Model" should {
     "be created and retrieved by username" in {
       println("finding someone")
       User.findOneByUsername("weezybizzle") must beSome
     }
     "not find non existant user" in {
       println("finding nobody")
       User.findOneByUsername("nobody") must beNone
      }
    }
  }
} 
```

我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T15:10:39.717

这是因为它在插件的 onStop 方法中关闭了 MongoDB 连接。我已经提交了一个拉取请求，以便在测试期间不会发生这种情况：

[https://github.com/leon/play-salat/pull/27](https://github.com/leon/play-salat/pull/27)

# java - SWT - GridData 和按钮

> ID：12170017
> 
> 赞同：2
> 
> 时间：2012-08-29T02:11:51.677
> 
> 标签：java, layout, swt

我有一种方法可以创建 2 个按钮。这些按钮不同于 OK、Close 按钮​​。单击时，它们将执行不同的操作。我希望 2 个按钮并排并位于我的基础复合材料的顶部。哪个正在使用 GridLayout。我希望能够并排放置按钮。

这是我要向其中添加方法的 createDialogArea。

```
 protected Control createDialogArea(Composite parent) {
  final Composite area = new Composite(parent, SWT.NONE);
  final GridLayout gridLayout = new GridLayout();
  gridLayout.marginWidth = 15;
  gridLayout.marginHeight = 10;
  area.setLayout(gridLayout);
  createTopButtons(area);
  createTableViewer(area);
  return area;
} 
```

这是按钮方法。

```
 protected void createTopButtons(Composite parent) {
   Button pdfButton = new Button(parent, SWT.PUSH);
   pdfButton.setText("Create PDF");
   pdfButton.addSelectionListener(new SelectionAdapter() {
     public void widgetSelected(SelectionEvent e) {
        close();
     }
   }); 

   Button plotButton = new Button(parent, SWT.PUSH);
   plotButton.setText("Plot");
   plotButton.addSelectionListener(new SelectionAdapter() {
     public void widgetSelected(SelectionEvent e) {
        close();
     }
   });  
 } 
```

我需要添加一个 Gridlayout 来 createTopButtons 吗？
如果是这样，我将如何将它们并排放置，而不是一个放在另一个之上。

同样在 createDialogArea 中，我可以使用 gridLayout 排列我的组件吗？

示例 - 我希望 createTopButtons 位于左上角，然后我希望 createTableViewer 居中

您是否使用您正在创建的复合材料中的布局来排列您的项目/按钮/标签，例如 createTopButtons。然后在 createDialogArea 中使用一个布局来排列方法创建的组合？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T05:29:58.290

### 问答

> 我需要添加一个 Gridlayout 来 createTopButtons 吗？

不，您需要将按钮放在另一个组合中，并且这个子组合应该有一个包含两列的网格布局。

> 同样在 createDialogArea 中，我可以使用 gridLayout 排列我的组件吗？示例 - 我希望 createTopButtons 位于左上角，然后我希望 createTableViewer 居中

当然，为什么不呢。但是您还需要一些名为`GridData`并将其设置为`area.setLayoutData(gridData);`. 为了使某些东西居中，您的 griddata 可能如下所示`gridData = new GridData(SWT.CENTER, SWT.CENTER, true, false);`

> 您是否使用您正在创建的复合材料中的布局来排列您的项目/按钮/标签，例如 createTopButtons。然后在 createDialogArea 中使用一个布局来排列方法创建的组合？

是的。虽然我没有得到下半场*`composite created by the methods`*

### 代码

```
import org.eclipse.swt.SWT;
import org.eclipse.swt.events.SelectionAdapter;
import org.eclipse.swt.events.SelectionEvent;
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Button;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Control;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.swt.widgets.Table;
import org.eclipse.swt.widgets.TableColumn;

public class SideBySide {
    public static void main(String[] args) {
        new SideBySide().start();
    }

    private Shell shell;

    public void start()
    {
        Display display = new Display();
        shell = new Shell(display);
        shell.setLayout(new GridLayout(1, true));

        GridData gridData = new GridData(SWT.FILL, SWT.FILL, true, true);
        shell.setLayoutData(gridData);

        shell.setText("Side By Side");

        createDialogArea(shell);

        shell.open();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch())
                display.sleep();
        }
        display.dispose();
    }

    protected Control createDialogArea(Composite parent) 
    {
        final Composite area = new Composite(parent, SWT.NONE);
        final GridLayout gridLayout = new GridLayout();
        gridLayout.marginWidth = 15;
        gridLayout.marginHeight = 10;
        area.setLayout(gridLayout);

        GridData gridData = new GridData(SWT.FILL, SWT.FILL, true, true);
        shell.setLayoutData(gridData);
        area.setLayoutData(gridData);

        createTopButtons(area);
        createTableViewer(area);
        return area;
    }

    private void createTableViewer(Composite area)
    {
        Table table = new Table(area, SWT.BORDER|SWT.V_SCROLL|SWT.FULL_SELECTION);
        GridData gridData = new GridData(SWT.FILL, SWT.FILL, true, true);
        table.setLayoutData(gridData);

        table.setLinesVisible(true);
        table.setHeaderVisible(true);

        TableColumn column = new TableColumn(table, SWT.LEFT);
        column.setWidth(320);
        column.setText("Column 1");

        column = new TableColumn(table, SWT.LEFT);
        column.setWidth(320);
        column.setText("Column 2");
    }

    protected void createTopButtons(Composite parent) 
    {

        Composite composite = new Composite(parent, SWT.NONE);
        GridLayout gridLayout = new GridLayout(2, false);
        gridLayout.marginWidth = 0;
        gridLayout.marginHeight = 0;
        gridLayout.verticalSpacing = 0;
        gridLayout.horizontalSpacing = 0;
        composite.setLayout(gridLayout);

        GridData gridData = new GridData(SWT.FILL, SWT.FILL, true, false);
        composite.setLayoutData(gridData);

        gridData = new GridData(SWT.DEFAULT, SWT.FILL, false, false);

        Button pdfButton = new Button(composite, SWT.PUSH);
        pdfButton.setText("Create PDF");
        pdfButton.addSelectionListener(new SelectionAdapter() {
            public void widgetSelected(SelectionEvent e) {
                shell.close();
            }
        }); 

        pdfButton.setLayoutData(gridData);

        Button plotButton = new Button(composite, SWT.PUSH);
        plotButton.setText("Plot");
        plotButton.addSelectionListener(new SelectionAdapter() {
            public void widgetSelected(SelectionEvent e) {
                shell.close();
            }
        });  
        plotButton.setLayoutData(gridData);
    }
} 
```

### 代码输出

![在此处输入图像描述](../Images/75fad667acf8db0531bb6ee588ca52ba.png)

### 延伸阅读

这是一篇了解 SWT 布局的[好文章。](http://www.eclipse.org/articles/article.php?file=Article-Understanding-Layouts/index.html)

# scroll - Why does my report recalculate totals when I scroll in Access '07?

> ID：12170020
> 
> 赞同：1
> 
> 时间：2012-08-29T02:12:25.833
> 
> 标签：scroll, report, ms-access-2007

Whenever I make a report in Access '07 and include some sort of total (whether counting or summing values), when I'm viewing the preview and scroll, the total recalculate. This is really annoying as Access takes a while (several tenths of a second) to do this, and while it does that the totals go blank. I've looked for a solution online, but I can't find this issue described anywhere.

How can I stop the totals from recalculating when I scroll? I'm hoping for a simple solution that would solve this for all reports, or perhaps a simple property tweak on each report. I don't want to have to add code for every single report!

I should describe the report layouts I'm using - they contain rows of data all on one page, and at times I group the rows. The number of rows isn't huge, maybe around 50 or so.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T15:36:39.770

It sounds as though the recordsource of your report is bound to a query, therefore this will be the default behaviour of the Access database. If this is a problem then you can always try running your query as a "Make Table" first in order to create a static table of information, and then set the reports recordsource to this.

Edit:

Alternatively, you could seek to optimise the performance of the database in an attempt to make the recalculation un-noticeable. First place to look would be the query itself (especially if it has been built with the query designer), then possibly looking at the location of the file, is it on a network server, or local? If local then significant performance increases can be achieved with use of a SSD.

# java - 如何在 onCreate 方法中调用另一个类的方法？

> ID：12170024
> 
> 赞同：0
> 
> 时间：2012-08-29T02:13:09.877
> 
> 标签：java, android

Java：在 android SDK 中如何从方法中的另一个类调用`onCreate()`方法？

日志猫：

```
08-28 22:27:24.152: W/dalvikvm(13642): threadid=1: thread exiting with uncaught exception (group=0x40015578)
08-28 22:27:24.156: E/AndroidRuntime(13642): FATAL EXCEPTION: main
08-28 22:27:24.156: E/AndroidRuntime(13642): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.valgriz.high.low/com.valgriz.high.low.Game}: java.lang.NullPointerException
08-28 22:27:24.156: E/AndroidRuntime(13642):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
08-28 22:27:24.156: E/AndroidRuntime(13642):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
08-28 22:27:24.156: E/AndroidRuntime(13642):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
08-28 22:27:24.156: E/AndroidRuntime(13642):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
08-28 22:27:24.156: E/AndroidRuntime(13642):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-28 22:27:24.156: E/AndroidRuntime(13642):    at android.os.Looper.loop(Looper.java:130)
08-28 22:27:24.156: E/AndroidRuntime(13642):    at android.app.ActivityThread.main(ActivityThread.java:3687)
08-28 22:27:24.156: E/AndroidRuntime(13642):    at java.lang.reflect.Method.invokeNative(Native Method)
08-28 22:27:24.156: E/AndroidRuntime(13642):    at java.lang.reflect.Method.invoke(Method.java:507)
08-28 22:27:24.156: E/AndroidRuntime(13642):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
08-28 22:27:24.156: E/AndroidRuntime(13642):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
08-28 22:27:24.156: E/AndroidRuntime(13642):    at dalvik.system.NativeStart.main(Native Method)
08-28 22:27:24.156: E/AndroidRuntime(13642): Caused by: java.lang.NullPointerException
08-28 22:27:24.156: E/AndroidRuntime(13642):    at android.app.Activity.findViewById(Activity.java:1647)
08-28 22:27:24.156: E/AndroidRuntime(13642):    at com.valgriz.high.low.Package.runThis(Package.java:16)
08-28 22:27:24.156: E/AndroidRuntime(13642):    at com.valgriz.high.low.Game.onCreate(Game.java:34)
08-28 22:27:24.156: E/AndroidRuntime(13642):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-28 22:27:24.156: E/AndroidRuntime(13642):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
08-28 22:27:24.156: E/AndroidRuntime(13642):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T02:17:58.653

获取该类的实例并调用该方法。

或者，如果方法是静态的，则通过类名访问它。

Android 中存在一些限制，具体取决于该方法是否对 UI 执行某些操作或访问在 onCreate() 方法之后设置的数据结构。如果你包含更多关于你想要做什么的细节，你可能会得到一些更准确的帮助。

如果你不知道我在说什么，开始谷歌搜索

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T02:28:28.630

像这样的东西：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main );

    MyClass work = new MyClass();
    work.doSomething();

}

public class MyClass{

    public void doSomething(){
        Log.d("tag", "yes sir!");
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T02:20:50.893

您需要声明和实例化类对象或根据它是否为静态来调用它。

```
private NonStaticObject dynamicObject;
private StaticObject stObject;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    //instantiate the non static object
    dynamicObject = new NonStaticObject();
    dynamicObject.method();

    //or simply call the static method.
    stObject.method();

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T03:45:41.310

从日志（下面的片段）中，您似乎正在尝试使用错误的 id 查找视图，*或者*不存在/实例化/创建/已删除的视图。

```
08-28 22:27:24.156: E/AndroidRuntime(13642): Caused by: java.lang.NullPointerException
08-28 22:27:24.156: E/AndroidRuntime(13642):    at android.app.Activity.findViewById(Activity.java:1647)
08-28 22:27:24.156: E/AndroidRuntime(13642):    at com.valgriz.high.low.Package.runThis(Package.java:16)
08-28 22:27:24.156: E/AndroidRuntime(13642):    at com.valgriz.high.low.Game.onCreate(Game.java:34) 
```

请检查您尝试查找的视图的创建是否已完成，并且您使用正确的 ID 引用它。

此外，根据[android 文档（下面的成绩单）](http://developer.android.com/reference/android/app/Activity.html#onCreate%28android.os.Bundle%29)，`onCreate(Bundle)`应该满足以下条件。请检查您是否正在使用*Game*类方法`super.onCreate(savedInstanceState);`的第一行调用父级。`onCreate(Bundle)`

 *> 派生类必须调用该方法的超类实现。如果他们不这样做，将引发异常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-22T15:17:02.120

你可以这样做：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // call method from other class
    myclass Objectc = new myclass();
    Objectc.methodA();
} 
```*

# php - 访问 GET 变量时出现“未定义索引”错误

> ID：12170027
> 
> 赞同：-3
> 
> 时间：2012-08-29T02:13:41.097
> 
> 标签：php

我将 PHP 5.4.6 与 MySQL 5.5.27 和 Apache 2.4.2 一起使用。

我的问题是我正在尝试使用获取 URL 传递变量的值，`$_GET`但总是出现错误说明：未定义索引：此行中 thispage.php 中的错误。

我环顾四周，意识到大多数开发人员通过使用该`isset()`功能解决了这个问题。但这并不能解决我的问题，因为我需要获取 URL 中发送的变量的实际值！

网址是`http://localhost/Edugate/index.php?err=1`。

这是我在`index.php`页面中的代码：

```
<?php
$error = $_GET['err'];

if($error == 1)
    print "<img src='icons/error.png' alt='error'> Icorrect usename or password...";
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T02:25:03.703

你可以使用一些简单的东西：

```
$error = isset($_GET['err']) ? (int)$_GET['err'] : null;

if ($error !== null) {
  // error
}

// or

if ($error === 1) {
} else if ($error === 2) {
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T02:19:02.463

[`isset`](http://php.net/isset)按照您的开发人员的规定使用。

```
<?php
if(isset($_GET['err']) && $_GET['err'] == 1)
    print "<img src='icons/error.png' alt='error'> Incorrect username or password...";
?> 
```

*顺便说一句，*用户名不正确。

# sql - 无法让 FOR XML PATH 工作

> ID：12170032
> 
> 赞同：1
> 
> 时间：2012-08-29T02:15:34.893
> 
> 标签：sql, sql-server

我很难弄清楚如何将 XML PATH 添加到我的代码中以连接一些信息，更不用说理解 XML PATH 的工作原理了。在过去两天的大部分时间里，我都在努力解决这个问题，希望能得到一些帮助！

这是我正在使用的代码：

```
Select Top 100 Percent Agreements.AgrmntID, Agreements.Description As
  AgrmntDesc, Agreements.Status, AgreementSchedules.SchedDate, DateName(dw,
  AgreementSchedules.SchedDate), LaborCodeTypes.Description As LaborCode,
  Customers.CustName, Customers.CompanyName, JobSites.SiteName,
  AgreementSchedules.AgrmntSchedID
From Agreements Inner Join
  AgreementTypes On Agreements.AgrmntTypeID = AgreementTypes.AgrmntTypeID
  Inner Join
  AgreementSchedules On Agreements.AgrmntID = AgreementSchedules.AgrmntID
  Inner Join
  Customers On Agreements.CustID = Customers.CustID Inner Join
  JobSites On Agreements.CustSiteID = JobSites.CustSiteID Left Outer Join
  LaborCodeTypes On AgreementSchedules.RepairID = LaborCodeTypes.RepairID
Where Agreements.Status = 2 And Month(AgreementSchedules.SchedDate) =
  Month(GetDate()) 
```

样本数据：

```
| AgreementID | LaborCodeTypes.Description   | DateName(dw, AgreementSchedules.SchedDate)|
| - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -|
| 1           | Landscaping                  | Tuesday                                   |
| 1           | Landscaping                  | Friday                                    |
| 1           | Sweeping                     | Monday                                    |
| 1           | Sweeping                     | Wednesday                                 |
| 1           | Sweeping                     | Friday                                    |
| 2           | Landscaping                  | Monday                                    | 
```

预期输出：

```
| AgreementID | LaborCode   | Days Of Week              |
| - - - - - - - - - - - - - - - - - - - - - - - - - - - |
| 1           | Landscaping | Tuesday, Friday           |
| 1           | Sweeping    | Monday, Wednesday, Friday |
| 2           | Landscaping | Monday                    | 
```

如果有人可以帮助我，我将不胜感激。

先感谢您！！

杰米小号

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T07:47:07.897

> XML PATH 的工作原理

我将尝试使用此设置来解释：

```
create table Grp
(
  GrpID int primary key,
  Name varchar(10)
)

create table Item
(
  ItemID int identity primary key,
  Name varchar(10),
  GrpID int references Grp(GrpID)
)

insert into Grp values
(1, 'G1'),
(2, 'G2')

insert into Item values
('A', 1),
('B', 1),
('C', 1),
('D', 2),
('E', 2) 
```

目标是为每个组创建一个以逗号分隔的名称列表的结果。

```
GroupName  ItemNames
---------- ----------
G1         A,B,C
G2         D,E 
```

[FOR XML](http://msdn.microsoft.com/en-us/library/ms173812.aspx)用于将查询结果转换为 XML 文档或 XML 片段。

此查询将创建一个 XML 片段。

```
select I.Name
from Item as I
for xml path(''), type 
```

结果：

```
<Name>A</Name>
<Name>B</Name>
<Name>C</Name>
<Name>D</Name>
<Name>E</Name> 
```

上面的查询可以用在相关的子查询中，像这样为每个组创建 XML 片段。

```
select G.Name as GroupName,
       (
         select I.Name
         from Item as I
         where G.GrpID = I.GrpID
         for xml path(''), type
       ) as ItemNames
from Grp as G 
```

结果：

```
GroupName  ItemNames
---------- --------------------------------------------
G1         <Name>A</Name><Name>B</Name><Name>C</Name>
G2         <Name>D</Name><Name>E</Name> 
```

然后，您可以使用[value()](http://msdn.microsoft.com/en-us/library/ms178030.aspx)函数提取 XML 中的值。

```
select Name as GroupName,
       (
         select I.Name
         from Item as I
         where G.GrpID = I.GrpID
         for xml path(''), type
       ).value('.', 'varchar(max)') as ItemNames
from Grp as G 
```

结果：

```
GroupName  ItemNames
---------- ----------
G1         ABC
G2         DE 
```

要完成此操作，您需要添加逗号作为分隔符，这可以通过在子查询中的每个项目名称中添加逗号来完成`select ','+I.Name`。它会在第一个值之前为您留下一个额外的逗号。您可以使用[STUFF](http://msdn.microsoft.com/en-us/library/ms188043.aspx)功能将其删除`STUFF(Value, 1, 1, '')`。

最终查询：

```
select Name as GroupName,
       stuff((
         select ','+I.Name
         from Item as I
         where G.GrpID = I.GrpID
         for xml path(''), type
       ).value('.', 'varchar(max)'), 1, 1, '') as ItemNames
from Grp as G 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T05:28:20.663

```
;with C as
(
  select A.AgreementID,
         LCT.Description as LaborCode,
         Ags.ShedDate
  from Agreements as A
    inner join AgreementSchedules as AgS
      on A.AgreementID = AgS.AgreementID
    inner join LaborCodeTypes as LCT
      on AgS.RepairID = LCT.RepairID
  where A.[Status] = 2 and
        AgS.ShedDate >= dateadd(month, datediff(month, 0, getdate()), 0) and
        AgS.ShedDate < dateadd(month, 1+datediff(month, 0, getdate()), 0)
)
select C1.AgreementID,
       C1.LaborCode,
       stuff((select ', '+datename(weekday, C2.ShedDate)
              from C as C2
              where C1.AgreementID = C2.AgreementID and
                    C1.LaborCode = C2.LaborCode
              order by C2.ShedDate
              for xml path(''), type).value('.', 'varchar(max)'), 1, 2, '') as [Days Of Week]
from C as C1
group by C1.AgreementID, C1.LaborCode; 
```

[SQL小提琴](http://sqlfiddle.com/#!3/ac9b8/1/0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T03:38:31.463

我相信我有不同的方式来实现你正在寻找的结果......

```
SELECT * FROM (
    SELECT DISTINCT AgreementId, UPPER(Description), 1 AS IsLabor
    FROM Table
    WHERE ...
    UNION
    SELECT AgreementId, DateName AS Description, 0 AS IsLabor
    FROM Table
    WHERE ...
) x
ORDER BY AgreementId, IsLabor DESC, Description 
```

这应该输出以下内容（UPPER 只是为了强调劳动描述）：

```
| AgreementId | Description | IsLabor |
---------------------------------------
| 1           | LANDSCAPING | 1       |
| 1           | Friday      | 0       |
| 1           | Tuesday     | 0       |
| 2           | SWEEPING    | 1       |
| 2           | Friday      | 0       |
| 2           | Monday      | 0       |
| 2           | Wednesday   | 0       | 
```

希望我理解你的问题，这会奏效。

# ruby-on-rails - heroku 应用程序无法启动

> ID：12170033
> 
> 赞同：0
> 
> 时间：2012-08-29T02:15:49.323
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, error-handling

我的应用程序已关闭，我不确定这次服务器在抱怨什么。任何人都可以提示我吗？下面的日志：

```
 2012-08-29T02:03:00+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 36518`
2012-08-29T02:03:05+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-08-29T02:03:05+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-08-29T02:03:08+00:00 app[web.1]: => Booting WEBrick
2012-08-29T02:03:08+00:00 app[web.1]: => Rails 3.2.6 application starting in production on http://0.0.0.0:36518
2012-08-29T02:03:08+00:00 app[web.1]: => Call with -d to detach
2012-08-29T02:03:08+00:00 app[web.1]: => Ctrl-C to shutdown server
2012-08-29T02:03:08+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `require': /app/app/controllers/groups_controller.rb:55: syntax error, unexpected keyword_end, expecting $end (SyntaxError)
2012-08-29T02:03:08+00:00 app[web.1]: Exiting
2012-08-29T02:03:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `block in require'
2012-08-29T02:03:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:236:in `load_dependency'
2012-08-29T02:03:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `require'
2012-08-29T02:03:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:359:in `require_or_load'
2012-08-29T02:03:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:313:in `depend_on'
2012-08-29T02:03:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:225:in `require_dependency'
2012-08-29T02:03:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/engine.rb:439:in `block (2 levels) in eager_load!'
2012-08-29T02:03:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/engine.rb:438:in `each'
2012-08-29T02:03:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:30:in `instance_exec'
2012-08-29T02:03:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/engine.rb:438:in `block in eager_load!'
2012-08-29T02:03:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/engine.rb:436:in `each'
2012-08-29T02:03:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:30:in `run'
2012-08-29T02:03:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/engine.rb:436:in `eager_load!'
2012-08-29T02:03:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/application/finisher.rb:53:in `block in <module:Finisher>'
2012-08-29T02:03:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:55:in `block in run_initializers'
2012-08-29T02:03:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:54:in `each'
2012-08-29T02:03:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:54:in `run_initializers'
2012-08-29T02:03:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/application.rb:136:in `initialize!'
2012-08-29T02:03:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/railtie/configurable.rb:30:in `method_missing'
2012-08-29T02:03:08+00:00 app[web.1]:   from /app/config.ru:4:in `require'
2012-08-29T02:03:08+00:00 app[web.1]:   from /app/config.ru:4:in `block in <main>'
2012-08-29T02:03:08+00:00 app[web.1]:   from /app/config/environment.rb:5:in `<top (required)>'
2012-08-29T02:03:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
2012-08-29T02:03:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
2012-08-29T02:03:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
2012-08-29T02:03:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
2012-08-29T02:03:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
2012-08-29T02:03:08+00:00 app[web.1]:   from /app/config.ru:1:in `new'
2012-08-29T02:03:08+00:00 app[web.1]:   from /app/config.ru:1:in `<main>'
2012-08-29T02:03:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
2012-08-29T02:03:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/commands/server.rb:46:in `app'
2012-08-29T02:03:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/commands.rb:55:in `block in <top (required)>'
2012-08-29T02:03:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
2012-08-29T02:03:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/commands/server.rb:70:in `start'
2012-08-29T02:03:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/commands.rb:50:in `tap'
2012-08-29T02:03:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/ra
ilties-3.2.6/lib/rails/commands.rb:50:in `<top (required)>'
2012-08-29T02:03:08+00:00 app[web.1]:   from script/rails:6:in `require'
2012-08-29T02:03:08+00:00 app[web.1]:   from script/rails:6:in `<main>'
2012-08-29T02:03:09+00:00 heroku[web.1]: Process exited with status 1
2012-08-29T02:03:09+00:00 heroku[web.1]: State changed from starting to crashed
2012-08-29T02:13:19+00:00 heroku[web.1]: State changed from crashed to starting
2012-08-29T02:13:21+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 41178`
2012-08-29T02:13:26+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-08-29T02:13:26+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-08-29T02:13:28+00:00 app[web.1]: => Booting WEBrick
2012-08-29T02:13:28+00:00 app[web.1]: => Rails 3.2.6 application starting in production on http://0.0.0.0:41178
2012-08-29T02:13:28+00:00 app[web.1]: => Call with -d to detach
2012-08-29T02:13:28+00:00 app[web.1]: => Ctrl-C to shutdown server
2012-08-29T02:13:28+00:00 app[web.1]: Exiting
2012-08-29T02:13:28+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `require': /app/app/controllers/groups_controller.rb:55: syntax error, unexpected keyword_end, expecting $end (SyntaxError)
2012-08-29T02:13:28+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `block in require'
2012-08-29T02:13:28+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:236:in `load_dependency'
2012-08-29T02:13:28+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `require'
2012-08-29T02:13:28+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:359:in `require_or_load'
2012-08-29T02:13:28+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:313:in `depend_on'
2012-08-29T02:13:28+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:225:in `require_dependency'
2012-08-29T02:13:28+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/engine.rb:439:in `block (2 levels) in eager_load!'
2012-08-29T02:13:28+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/engine.rb:438:in `each'
2012-08-29T02:13:28+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/engine.rb:438:in `block in eager_load!'
2012-08-29T02:13:28+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/engine.rb:436:in `each'
2012-08-29T02:13:28+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/application/finisher.rb:53:in `block in <module:Finisher>'
2012-08-29T02:13:28+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/engine.rb:436:in `eager_load!'
2012-08-29T02:13:28+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:30:in `instance_exec'
2012-08-29T02:13:28+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:30:in `run'
2012-08-29T02:13:28+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:55:in `block in run_initializers'
2012-08-29T02:13:28+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:54:in `each'
2012-08-29T02:13:28+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:54:in `run_initializers'
2012-08-29T02:13:28+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/railtie/configurable.rb:30:in `method_missing'
2012-08-29T02:13:28+00:00 app[web.1]:   from /app/config.ru:4:in `require'
2012-08-29T02:13:28+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/application.rb:136:in `initialize!'
2012-08-29T02:13:28+00:00 app[web.1]:   from /app/config/environment.rb:5:in `<top (required)>'
2012-08-29T02:13:28+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
2012-08-29T02:13:28+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
2012-08-29T02:13:28+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
2012-08-29T02:13:28+00:00 app[web.1]:   from /app/config.ru:1:in `<main>'
2012-08-29T02:13:28+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
2012-08-29T02:13:28+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
2012-08-29T02:13:28+00:00 app[web.1]:   from /app/config.ru:4:in `block in <main>'
2012-08-29T02:13:28+00:00 app[web.1]:   from /app/config.ru:1:in `new'
2012-08-29T02:13:28+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/commands/server.rb:46:in `app'
2012-08-29T02:13:28+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/commands.rb:50:in `<top (required)>'
2012-08-29T02:13:28+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
2012-08-29T02:13:28+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
2012-08-29T02:13:28+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/commands.rb:55:in `block in <top (required)>'
2012-08-29T02:13:28+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/commands/server.rb:70:in `start'
2012-08-29T02:13:28+00:00 app[web.1]:   from script/rails:6:in `require'
2012-08-29T02:13:28+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/commands.rb:50:in `tap'
2012-08-29T02:13:28+00:00 app[web.1]:   from script/rails:6:in `<main>'
2012-08-29T02:13:29+00:00 heroku[web.1]: Process exited with status 1
2012-08-29T02:13:29+00:00 heroku[web.1]: State changed from starting to crashed
2012-08-29T02:13:53+00:00 heroku[router]: Error H10 (App crashed) -> GET sleepy-sands-3221.herokuapp.com/ dyno= queue= wait= service= status=503 bytes=
2012-08-29T02:13:53+00:00 heroku[router]: Error H10 (App crashed) -> GET sleepy-sands-3221.herokuapp.com/fa

vicon.ico dyno= queue= wait= service= status=503 bytes= 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T02:21:13.227

您的代码中有错误，您可能在开发过程中没有注意到，因为您没有使用或访问过该控制器，但是 heroku 在部署之前会检查错误，如果您的代码有任何问题，整个应用程序将无法运行。检查 /app/app/controllers/groups_controller.rb 是否有语法错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T02:29:22.000

看起来您在 groups_controller.rb 的某个地方缺少“结束”。检查未结束的代码块。

# php - 排除字段值为空的结果

> ID：12170034
> 
> 赞同：1
> 
> 时间：2012-08-29T02:16:10.683
> 
> 标签：php, mysql

对于下面的查询，一些结果在数据库中没有“年龄”。如何排除这些与“年龄”无关的值？

```
$sqlStr3 = "SELECT
                 username 
                 ,loginid
                 ,age  

        FROM login
        ORDER BY age ASC
           LIMIT $offset, $rowsperpage"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T02:17:18.560

如果年龄默认为NULL（典型情况），添加一个简单的`WHERE age NOT NULL`检查：

```
SELECT
   username 
   ,loginid
   ,age  

FROM login
WHERE age NOT NULL
ORDER BY age ASC
LIMIT $offset, $rowsperpage 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T02:19:24.850

`IS NOT NULL`您可以使用 Where 子句，但将运算符添加到该字段的 SELECT 中会更容易和更快。

```
$sqlStr3 = "SELECT
                 username 
                 ,loginid
                 ,age IS NOT NULL

        FROM login
        ORDER BY age ASC
           LIMIT $offset, $rowsperpage"; 
```

[比较函数和运算符](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_is-not-null)

# c - 什么时候使用 poll C 函数的 POLLOUT 事件？

> ID：12170037
> 
> 赞同：11
> 
> 时间：2012-08-29T02:16:45.427
> 
> 标签：c, tcp, posix, polling

`socket()`我用+ **POLLIN** `poll()` ++编写了一个小型 TCP 服务器，但我不知道何时使用`recv()`POLLOUT轮询或选择对可写事件进行轮询**。**`send()`**`writefds`**

 **谁能给我一个实际使用**POLLOUT**的例子吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-29T03:51:31.913

通常的模式是使用非阻塞文件描述符，`poll()`如下所示：

*   准备的时候`poll()`，
    *   始终设置`POLLIN`，因为您总是对阅读套接字另一端发送给您的内容感兴趣。
        *   除非您有大量的传入数据积压，并且您有意让另一端在发送更多数据之前等待。
    *   `POLLOUT`仅当您有未完成的数据要发送到另一端时才设置。
*   从 中返回时`poll()`，如果它表明有数据可供读取，
    *   阅读并用它做点什么
*   从 的返回时`poll()`，如果它表明套接字是可写的，
    *   尝试发送您未完成的数据。
        *   如果您设法编写了所有内容，那么`POLLOUT`下次您将不会通过循环设置
        *   如果您只设法发送了其中的一部分（或一个都不发送），那么请保留其余部分以备后用。您将`POLLOUT`通过循环设置下一次。
*   当您有新数据要发送（响应您读取的数据或响应某些外部事件）时，您有两种选择：
    *   急切地尝试立即发送一些。您可以成功发送一个、部分或全部。就像前面的情况一样，保留下一次没有写入的数据部分，并计划`POLLOUT`只有在剩下一些数据时才通过循环设置下一次。
    *   只需保留数据并计划`POLLOUT`通过循环设置下一次。（这种选择通常更容易编程，因为您只需要在循环中的一个位置处理写入数据，但另一方面它会延迟写入数据，直到下一次循环。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-21T03:56:44.527

从 nginx 来源，我发现：

如果有一些数据要发送出去，nginx 会尝试使用系统调用（可能是 writev）发送它。但是，如果 nginx 不能一次发送总数据，它会在 pollfd 上设置 POLLOUT，如果使用 poll 事件，则等待可写事件。当得到一个可写事件时，nginx会发送剩下的数据。

当 nginx 尝试响应大的静态文件时，很容易重现这种情况

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-18T19:12:09.170

在 Raspberry PI 3、Debian 上工作，使用 c++ 98 和 gcc 。. .

在 Acceptor / Connector 模式和 Reactor / Proactor / ACT 模式的实现中，我经常按以下顺序使用 POLLOUT：

1.  使用 socket 函数打开一个套接字。
2.  使用 fcntl 将套接字文件描述符设置为非阻塞模式。
3.  调用 connect 并检查返回码。

在大多数情况下，connect 返回 -1。由于非阻塞文件描述符，这很可能。然后我检查结果代码。

如果是 EINPROGRESS，我会在反应器（使用 ppoll 或 epoll）中使用 POLLOUT 注册一个事件处理程序。当连接最终完成时，poll 返回并设置 POLLOUT。

然后我创建一个新的 TcpConnection 类并进行通信。**

# c++ - 返回 const 模板类型的模板函数

> ID：12170039
> 
> 赞同：0
> 
> 时间：2012-08-29T02:16:50.430
> 
> 标签：c++, templates, pointers, constants

为什么以下不会产生编译器错误？

```
template<typename T>
const T testFunc()
{
    return T();
}

float* ptr = testFunc<float*>(); // ptr is not const - should be a compiler error! 
```

在这个例子中， testFunc() 应该返回一个常量 float*，所以当我尝试将它分配给一个非常量 float* 时不应该出现编译器错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T02:19:19.220

您的期望是错误的，返回的*指针*将是 const，而不是指向的对象。专业化相当于：

```
float * const testFunc<float*>(); 
```

而不是：

```
float const * testFunc<float*>(); 
```

在您的示例中，调用端的代码正在从 const 指针*复制到非常量指针，这很好。*

# jquery - jQuery 下拉菜单在 Bootstrap 平板电脑或移动设备尺寸中不起作用

> ID：12170045
> 
> 赞同：2
> 
> 时间：2012-08-29T02:17:40.140
> 
> 标签：jquery, ruby-on-rails, drop-down-menu, twitter-bootstrap

我在导航栏中有一个运行良好的引导下拉菜单，除非我将浏览器缩小为平板电脑或手机大小（< 767px 宽）。导航栏的代码是：

```
<div class="navbar navbar-fixed-top">
 <div class="navbar-inner">
  <div class="container-fluid">

   <a href="<%= root_url %>" class="brand brandtag"></a>
   <a class="btn btn-navbar visible-phone" data-toggle="collapse" data-target=".nav-collapse">
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
   </a>

  <div class="pull-right"> # DROPDOWN THAT WORKS SPORADICALLY
   <div id="user-nav">
    <div class="not-logged-in">
     <a class="dropdown-toggle btn btn-inverse" href="<%= new_user_session_path %>" data-toggle="dropdown">
      Login <span class='caret'></span>
     </a>
     <div class="dropdown-menu">
      <%= render "devise/sessions/new_from_dropdown" %>
     </div>
    </div>
   </div>
  </div>

  <div class="nav-collapse">
    <ul class="nav">
      <li class="active"><a>Link 1</a></li>
      <li class="active"><a>Link 2</a></li>
      <li class="active"><a>Link 3</a></li>
      <li class="active"><a>Link 4</a></li>
    </ul>
  </div><!--/.nav-collapse -->
</div> 
```

我的javascript很简单：

```
jQuery ->
  $(".dropdown-toggle").attr("href", "#").dropdown()
  $('.dropdown-menu form label.hide').hide()
  $('.dropdown-menu input, .dropdown-menu label').on 'click', (e) ->
    e.stopPropagation() 
```

下拉菜单在较大尺寸（> 767 像素）下工作得非常好，但是一旦屏幕下降到该尺寸以下，下拉菜单就会停止显示。我可以将屏幕大小调整为更大或更小，下拉菜单会在通过 767px 宽度时分别返回或消失。

有谁知道如何解决这一问题？似乎是引导程序的 javascript 中的东西，但我不知道是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T05:01:14.973

出于某种原因，使用 class="dropdown" 将“dropdown-toggle”和“dropdown-menu”div 包装在另一个 div 中可以解决此问题。因此，上面的代码只需进行很小的更改即可：

```
<div class="pull-right"> # DROPDOWN THAT WORKS SPORADICALLY
 <div id="user-nav">
  <div class="dropdown not-logged-in"> # <-- "dropdown" class added
   <a class="dropdown-toggle btn btn-inverse" href="<%= new_user_session_path %>" data-toggle="dropdown">
    Login <span class='caret'></span>
   </a>
   <div class="dropdown-menu">
    <%= render "devise/sessions/new_from_dropdown" %>
   </div>
  </div>
 </div> 
```

我不知道为什么这只会影响手机和平板电脑的尺寸，但这就是使用他人框架的陷阱！

# php - 代码点火器中的多个 where() 调用或关联数组

> ID：12170051
> 
> 赞同：1
> 
> 时间：2012-08-29T02:18:31.187
> 
> 标签：php, database, codeigniter, activerecord

我有一个查询，其中包含以下内容：

```
$this->db->where(array(
                 'jobs.open_intentions' => 1,
                 'jobs.open'            => 1, 
                 'jobs.pending'         => 0,
                 'jobs.awarded'         => 0)); 
```

效果很好，但我不喜欢那种格式，实际上我更愿意像这样写

```
$this->db->where('jobs.open_intentions', 1) 
         ->where('jobs.open', 1) 
         ->where('jobs.pending', 0)
         ->where('jobs.awarded', 0); 
```

我知道挑剔，但无论如何，我的问题是，有什么理由我应该选择一种方法而不是另一种方法，还是只是偏好问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T02:20:12.197

从语义上讲，后者（多个`where`s）对我来说更像是多个`AND`- 从句。对于前者，意图不清楚（不查看 API 文档）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T09:12:20.237

虽然后面的方法是常用的，但为了简单和清晰的代码，你也可以这样做

```
$where  =    array(
             'jobs.open_intentions' => 1,
             'jobs.open'            => 1, 
             'jobs.pending'         => 0,
             'jobs.awarded'         => 0
             );
$this->db->where($where); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T09:51:28.790

There is one advantage i see in the later one which is you can use different where clauses e.g. or_where, where_in, or_where_in with clean code which is pretty difficult in the earlier one. But if you are using a single operator then both are same.

# json - 在 json REST Web 服务中表示外键关系的标准方法

> ID：12170053
> 
> 赞同：8
> 
> 时间：2012-08-29T02:19:08.193
> 
> 标签：json, rest, foreign-keys, entity-relationship

我有一个葡萄酒实体，它与一个国家以一对多关系相关（一个国家 - 许多葡萄酒）

我可以想到两种在 json Web 服务中表示这一点的方法：

一个只是将整个国家包含在一个json中

```
{
  id: 76,
  code: "FR",
  name: "France"
}

{
  id: 79,
  name: "Bordeaux",
  country: {
      id: 76,
      code: "FR",
      name: "France"
    },
  year: "2005"
} 
```

另一种是将每个国家/地区属性包含到同一级别，并带有前缀

```
{
  id: 79,
  name: "Bordeaux",
  countryId: 76,
  countrCode: "FR",
  countryName: "France"
  year: "2005"
} 
```

无论如何，在更新或创建新葡萄酒时，我只会保存国家/地区 id，我不会允许从葡萄酒的端点修改国家/地区

第二种方法更容易实现（我会在 db 上有一个连接视图，序列化器只会将每个字段转换为 json），但我认为第一种更优雅

只是想知道这种情况是否有任何标准，以防万一没有更常见的方法......

ps：我并不是要开始讨论解决方案的“restfullness”，只是寻找一种聪明简单的方法来处理这种关系......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T18:22:36.160

在您的情况下，国家/地区足够小，可以考虑每次都嵌套它。但是，情况并非总是如此，并且我没有找到处理此问题的标准。

我已经使用自定义引用类型完成了此操作：

```
{
    "id": 79,
    "name": "Bordeaux",
    "country": {
        "ref": {
            "id": 76,
            "uri": "/country/76"
        }
    },
    "year": "2005" } 
```

[这里](http://www.mnot.net/blog/2011/11/25/linking_in_json)也有一些有用的想法。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-09-01T19:26:12.580

JSON 没有外键。那是与 RDBMS 相关的东西。在我看来，JSon 应该显示嵌套在自身中的所有内容。

MongoDB 强化了这种观点。在 MongoDB 中，您将所有内容存储为 JSon，并且“FK”包含在同一个文档中。如果你需要 FK，那么你就不需要 mongo，我认为你也不需要 JSon。

顺便说一句，如果您总是向国家展示，那么总是提出两个请求是没有意义的

# c# - PayPal IPN 侦听器不工作

> ID：12170061
> 
> 赞同：2
> 
> 时间：2012-08-29T02:20:10.267
> 
> 标签：c#, asp.net, paypal

因此，我阅读了 IPN 文档，并且阅读了我找到的大量示例。我尝试了几种不同的解决方案，但在它们不起作用后，[我只是简单地复制并粘贴了 PayPal IPN 页面上记录的内容。](https://www.x.com/developers/PayPal/documentation-tools/code-sample/216623)因此，它仍然无法正常工作。我的 IPN 历史显示它正在继续重新发送消息。下面的代码 - 缺少什么？

```
protected void Page_Load(object sender, EventArgs e)
    {
        const string postUrl = "https://www.paypal.com/cgi-bin/webscr";
        var req = (HttpWebRequest)WebRequest.Create(postUrl);

        //Set values for the request back
        req.Method = "POST";
        req.ContentType = "application/x-www-form-urlencoded";
        var param = Request.BinaryRead(HttpContext.Current.Request.ContentLength);
        var strRequest = Encoding.ASCII.GetString(param);
        var ipnPost = strRequest;
        strRequest += "&cmd=_notify-validate";
        req.ContentLength = strRequest.Length;

        //for proxy
        //WebProxy proxy = new WebProxy(new Uri("http://url:port#"));
        //req.Proxy = proxy;

        //Send the request to PayPal and get the response
        var streamOut = new StreamWriter(req.GetRequestStream(), Encoding.ASCII);
        streamOut.Write(strRequest);
        streamOut.Close();

        // ReSharper disable AssignNullToNotNullAttribute
        var streamIn = new StreamReader(req.GetResponse().GetResponseStream());
        // ReSharper restore AssignNullToNotNullAttribute
        var strResponse = streamIn.ReadToEnd();
        streamIn.Close();

        // logging ipn messages... be sure that you give write
        // permission to process executing this code
        //

        if (strResponse == "VERIFIED")
        {
            //check the payment_status is Completed
            //check that txn_id has not been previously processed
            //check that receiver_email is your Primary PayPal email
            //check that payment_amount/payment_currency are correct
            //process payment
            var mailer = new Emailer();
            mailer.SendMail("from@domain.com", "to@domain.com", "Thank you!",
                            "Thank you for your sponsorship. Good luck on your results!<br /><br />" + ipnPost);
        }
        else if (strResponse == "INVALID")
        {
            //log for manual investigation
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:48:27.780

原来这是我的电子邮件发件人的错误。我发送的地址未在我的 AWS 账户中验证。

# iphone - iPhone顶部状态栏在页面更改后卡在右侧

> ID：12170063
> 
> 赞同：1
> 
> 时间：2012-08-29T02:20:15.947
> 
> 标签：iphone, objective-c, ios

我有 2 页。

A 页：（纵向模式） B 页：（横向模式）

从页面 A --> B，然后返回页面 A。状态栏卡在右侧（尽管手机回到纵向模式。通常它最终会在正确的位置重新绘制自己，但这可能需要几秒钟，这是不可接受的。这两个页面通过情节提要中的模态序列连接，我没有实现任何奇怪的东西......

这是页面 A 中的 shouldRotate 方法。我想我离开了这个标准。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
    } else {
        return YES;
    }
} 
```

# javascript - 按键上的Javascript功能？

> ID：12170068
> 
> 赞同：2
> 
> 时间：2012-08-29T02:21:03.560
> 
> 标签：javascript, events, keypress

我一直在搜索 SO 和剩余的互联网，但在任何地方都找不到直接的答案。在没有元素（文本框等）聚焦的情况下按下和释放`aFunction`键时，某人如何执行 javascript 函数？`m`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T02:23:13.777

使用[jQuery](http://api.jquery.com/keypress/)

```
$('body').keypress(function(e){
  if(e.which == 109)
    aFunction();
}) 
```

这是[关于 jsFiddle 的演示](http://jsfiddle.net/lechevalierd3on/J9PAW/)

编辑：小写 m 是 109

# ruby - 使用 Aruba/Cucumber 写入标准输入

> ID：12170071
> 
> 赞同：2
> 
> 时间：2012-08-29T02:21:18.887
> 
> 标签：ruby, cucumber, bdd, functional-testing, aruba

我在使用 Aruba 写入标准输入时遇到问题。我尝试了三种方法。

方法一：

```
Scenario: Write to stdin take 1
  Given a file named "infile" with:
    """
    Hello World!
    """
  When I run `cat < infile`
  Then the output should contain exactly:
    """
    Hello World!
    """ 
```

为此，我收到以下错误：

```
 expected: "Hello World!"
       got: "Hello World!cat: <: No such file or directory\n" (using ==)
  Diff:
  @@ -1,2 +1,2 @@
  -Hello World!
  +Hello World!cat: <: No such file or directory
   (RSpec::Expectations::ExpectationNotMetError)
  features/cgi.feature:17:in `Then the output should contain exactly:' 
```

Aruba 在字面上传递“<”，而 shell 会用管道做一些魔术。

方法二：

```
Scenario: Write to stdin take 2
  When I run `cat` interactively
  And I type "Hello World!"
  Then the output should contain:
    """
    Hello World!
    """ 
```

我收到以下错误：

```
 process still alive after 3 seconds (ChildProcess::TimeoutError)
  features/cgi.feature:25:in `Then the output should contain:' 
```

我不知道，但我假设 cat 没有收到 EOF 字符，因此 cat 保持打开状态，等待进一步输入，然后再写入。有什么方法可以表示输入结束？

方法3：

```
Scenario: Write to stdin take 1
  Given a file named "infile" with:
    """
    Hello World!
    """
  When I run `sh -c "cat < infile"`
  Then the output should contain exactly:
    """
    Hello World!
    """ 
```

这种方法有效，但通过 shell 进程传递输入似乎不是理想的解决方案。

我原以为这是一个相当标准的要求，但还没有成功让它工作。

有什么建议么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T04:06:10.427

编辑：我尝试使用交互模式来管道输入文件，但是在实际使用中我发现它比使用慢得多`sh -c "process < infile"`，我不太清楚为什么会这样，在 Ruby 中写入标准输入可能会产生额外的开销，`@interactive.stdin.write(input)`或者它可能关闭管道需要一点时间`@interactive.stdin.close()`。我最终使用`sh -c`来绕过减速。如果需要跨平台支持，那么我预计较慢的运行时间可能是可以接受的。

原帖：

我找到了几种方法来实现这一点。

对于采取 1：

```
Scenario: Write to stdin take 1
  Given a file named "infile" with:
    """
    Hello World!
    """
 -When I run `cat < infile`
 +When I run `cat` interactively
 +And I pipe in the file "infile"
  Then the output should contain exactly:
    """
    Hello World!
    """ 
```

对于场景 1，我删除了管道 (<) 的尝试，而是以交互方式运行该过程。在后端我写了这一步：

```
When /^I pipe in the file "(.*?)"$/ do |file|
  in_current_dir do
    File.open(file, 'r').each_line do |line|
      _write_interactive(line)
    end
  end
  @interactive.stdin.close()
end 
```

@interactive.stdin.close() 应该作为一个函数移到 aruba/api.rb ，但这个想法是可行的。对 _write_interactive 的调用也应该是对 type() 的调用，但是 type() 总是添加一个新行，这可能不是我们在文件中管道时想要的。

对于采取 2：

```
Scenario: Write to stdin take 2
  When I run `cat` interactively
  And I type "Hello World!"
 +Then I close the stdin stream
  And the output should contain:
    """
    Hello World!
    """ 
```

我使用后台步骤添加了关闭的标准输入流：

```
Then /^I close the stdin stream$/ do
  @interactive.stdin.close()
end 
```

应该再次将这一行变成 aruba/api.rb 中的一个方法，但代码有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-05T17:10:46.290

`I pipe in the file`已由 Aruba 实施，因此您现在可以执行此操作（与 Allan5 的回答有关）

```
Scenario: Write to stdin
  Given a file named "infile" with:
    """
    Hello World!
    """
  When I run `cat` interactively
  And I pipe in the file "infile"
  Then the output should contain exactly:
    """
    Hello World!
    """ 
```

# node.js - Expressjs路由参数作为主应用程序中的变量

> ID：12170073
> 
> 赞同：4
> 
> 时间：2012-08-29T02:21:34.910
> 
> 标签：node.js, express

对于我的应用程序，我设置了两条路线，

```
app.get('/', routes.index);
app.get('/:name', routes.index); 
```

我希望它是这样的，如果我不指定一个参数，说只是去 appurl.com (localhost:3000)，它会加载一个默认用户，但如果我指定一个参数(localhost:3000/user ），将其用作以下函数中的变量“用户名”（放置在我的路线之后）。

```
(function getUser(){
    var body = '',
        username = 'WillsonSM',

    options = {
    host: 'ws.audioscrobbler.com',
    port: 80,
    path: '/2.0/?method=user.gettopartists&user=' + username + '&format=json&limit=20&api_key=APIKEYGOESHERE'
    };

        require('http').request(options, function(res) {
            res.setEncoding('utf8');

            res.on('data', function(chunk) {
                body += chunk;
            });
            res.on('end', function() {

                body = JSON.parse(body);
                artists = body.topartists.artist;

            });

        }).end();

})(); 
```

除此之外，我的路线设置如下：

```
exports.index = function(req, res){
  res.render('index', { title: 'LasTube' });

  username = req.params.name;
  console.log(username);
}; 
```

`req.params.name`不幸的是，似乎无法从主应用程序功能访问那里设置用户名。

我的问题是：如何设置 expressjs/nodejs 以在可用时使用通过 /name 设置的参数，并且只使用默认值 - 在此示例中为“WillsonSM”（如果不可用）。

我尝试将“用户名”从主应用程序中取出，并将其留在函数中，但用户名变得未定义，因为它无法从路由访问，并且应用程序将无法运行。我可以通过路由 console.log 吐出“用户名”，所以分配它没有问题，但由于我是 expressjs 的新手，我不知道我应该如何去做。我已经尝试了所有我能想到的并通过浏览互联网找到的东西。

另外，如果有更好的方法，或者我做错了什么，请告诉我。如果我遗漏了任何信息，请发表评论，我会尝试解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T02:37:46.133

是否可以设置两条不同的路线 - 一条用于根目录，一条用于提供的名称？由于它路由到两个不同的函数，因此您可以控制通过默认的“/”路由设置默认值或通过传入的 url 获取 :name（:name 变为 req.params.name）。

```
app.get('/', routes.home);
app.get(':name', routes.getNamed); 
```

路线：

```
exports.home = function(req, res) {
    username = "defaultUser";
    // etc...
};

exports.getNamed = function (req, res) {
    username = req.params.name;
    // etc...
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T03:33:57.213

如果即时函数调用`getUser()`真正“在”您的路由之后，它将在启动时调用一次，在您处理任何请求之前。我猜你想这样做一次以建立一个默认设置，`artist`如果用户没有在他们的请求中提供一个名称。

如果是这样，您需要重写`getUser()`以将用户名和回调作为参数，并使用您当前分配给的值调用回调`artist`。在初始化时，使用您想用作默认用户名的任何用户名和仅设置的回调调用它`artist`。然后按照 bryanmac 建议的方式拆分您的路线，使用`artist`in`home()`并调用`getUser()`in `getNamed()`。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-29T02:43:39.713

不确定我是否理解你的问题。

```
app.get('/', function(req, res){
  res.redirect('appurl.com');
});

app.get('/:name', routes.index); 
```

# sql-server - 使用 SQL Server 2012 商业智能的 Visual Studio 2010 的正确安装顺序

> ID：12170074
> 
> 赞同：5
> 
> 时间：2012-08-29T02:21:43.747
> 
> 标签：sql-server, visual-studio-2010, installation, virtual-machine, conflict

我有一个 Windows 7 64 位（终极版）虚拟机，想安装以下内容：

```
Visual Studio 2010 (Ultimate)
SQL Server 2012 Business Intelligence (with SSIS and SSRS) 
```

但我不确定是否有正确的顺序来安装这些项目，以免发生冲突。我很担心，因为我知道 VS2010 安装了 SQL Server 2008 express。如果我先执行 SQL Server 2012，我希望它不会用 2008 版本覆盖我的 SQL Server 安装。

如果已经安装了较新的版本，VS2010 是否会跳过安装 SQL Server 2008？

## 更新：

我按照贾斯汀的指示安装了文件。
VS2010 安装程序检测到 SQL Server 2012 已安装并且安装没有任何问题。
当我运行 VS2010 时，它告诉我需要安装 VS2010 SP1，因为已经安装了较新的 SQL Server 2012 文件。
我安装了 SP1 并再次运行 VS2010，一切都加载并运行良好。
我还加载了 SQL Server Management Studio，并且仍然能够毫无问题地连接到 SQL Server 2012。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T04:17:29.207

在安装 VS 2010 期间，您可以选择跳过 SQL Server 的安装。如果您使用默认值安装 SQL Server Express，则实例名称将是 SQLEXPRESS 的默认名称。如果此实例名称已在使用中，则安装将无操作并退出。

如果您确实将 Express 作为 VS2010 的一部分安装，则始终可以从 SQL Server 2008 Express 升级（版本和版本）到 SQL Server 2012 BI 版本。

# php - 使用 MySQL 和 PHP 搜索相同的值以仅显示一个值

> ID：12170081
> 
> 赞同：-3
> 
> 时间：2012-08-29T02:22:34.210
> 
> 标签：php, arrays

我的数据如下：

```
maly chantha maly chantha 
```

我只想得到：`maly chantha`

我应该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T02:28:54.940

如果您想要数组中的唯一值，您可以使用 array_unique() [http://php.net/manual/en/function.array-unique.php 。](http://php.net/manual/en/function.array-unique.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T02:35:02.087

您正在寻找的是[`array_unique`](http://php.net/manual/en/function.array-unique.php). 它从数组中删除重复项。

例子：

```
<?php
$array = array('one', 'two', 'one', 'two');
$array = array_unique($array);
var_dump($array);
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T02:26:47.670

创建一个数组并保存唯一值。

```
$str = "maly chantha maly chantha";

$input_arr = explode(" ", $str);

$final_arr = array_unique($input_arr); 
```

# python - 在这种情况下，对于 python 来说，这是更好的做法？迭代器内部函数或外部函数

> ID：12170088
> 
> 赞同：1
> 
> 时间：2012-08-29T02:24:22.040
> 
> 标签：python, function, loops, performance

如果我提到“状态机”这个词，大多数人会选择状态机设计。因此，我想简化案例以重点关注这一点。

这里建议的是一个文本流，它很长或者经常被带到当前阶段。

每次我从序列中处理一个字符并决定下一个状态是什么。这里有两个解决方案：

```
textflow = iter(text)
endFlag = False
while True:
   process()
   if endFlag:break 
```

那么处理方法是这样的

```
def process0():
    for x in textflow:
        do something
        if condition1:
           process = process1
           break
        elif cond2:
           process = process2
           break

def process1():
    for x in textflow:
        do something
        if cond0:
           process = process0
           break
        elif cond2:
           process = process2
           break
    ... 
```

或者

```
for x in text:
   process(x) 
```

那么处理方法是这样的

```
def process0(x):
    do something
    if cond1:
      process = process1
    elif cond2:
      process = process2

def process1(x):
    do something
    if cond0:
       process = process0
    elif cond2:
       process = process2
.... 
```

在第一种解决方案中，每个流程方法都以自己的方式进行迭代并结束流程，直到状态发生变化。在第二个中，主循环进行迭代，并且每次都会调用进程。（`map()`可以使用，但由于每次都会更改进程，因此无济于事。）

状态变化将是这样的：

```
0 1 2 1 0 2 1 0 1 2 0 1 2 0 .... 
```

或像这样：

```
0 0 0 0 0 ...many 0 .. 0 1 ...many 1 ... 1 2......2 1 ..... 1 
```

更常见的情况是：

```
0 1 1 1 1 1 0 0 2 1 1 1 1 2 0 2 3 1 1 1 1 3 1 1 1 2 0 .... 
```

我需要一位顾问来告诉我哪种解决方案更有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T02:43:17.073

这主要取决于您要处理多少项目，因为函数调用很昂贵。如果您有大量项目，那么在函数中嵌入循环是更好的选择。如果它只会迭代几个项目，我通常会选择最清楚表达意图的那个。

# php - PDO / MySQL / PHP - 我的查询结果被缓存的问题

> ID：12170090
> 
> 赞同：-1
> 
> 时间：2012-08-29T02:24:28.577
> 
> 标签：php, mysql, pdo

我几乎可以肯定我的查询正在被缓存。这是一个 SELECT 语句。

这是一个示例情况。目前有 2 个挂单。我有一个脚本，在主页上显示挂单通知，以通知仓库是否有新订单下达。我下了一个订单来测试“2”是否会更新为“3”而它没有。我认为我的查询正在被缓存，因为当我从 phpMyAdmin 运行查询时它显示“3”，但是当通过 PHP 运行时它只显示“2”。任何想法如何解决此问题或禁用特定查询的缓存？

这是我的原始代码

```
<?php
if( protectThis("1, 2") ) :
$pending = $conn->query("SELECT count(*) FROM orders WHERE `status` =0");
$pending2 = $pending->fetch();
$pendingcount = count($pending2);
if ($pendingcount > 0) {
?>
<div class="orange warning">
    <p>
        <strong>Pending Order Notification</strong>
        <br />There are currently <strong><?php echo $pendingcount; ?></strong> pending orders.
        <br /><a style="color:white;margin-top:10px;" class="btn btn-inverse" href="orders_pending.php"><i>Click here to view them.</i></a>
    </p>
    <div class="shadow-out"></div>
</div>
<?php
}
endif; 
```

在阅读了尝试禁用特定查询的缓存并尝试以下操作后，我尝试更改查询

```
SELECT SQL_NO_CACHE count(*) FROM orders WHERE `status` =0 
```

显然这也不起作用。

我不知道该怎么办。:\

任何帮助深表感谢。

* * *

“编辑 1”

```
$pending = $conn->query("SELECT count(*) FROM orders WHERE `status` =0");
// $pending2 = $pending->fetch();
// $pendingcount = count($pending2);
$pendingcount = $pending->rowCount();
if ($pendingcount > 0) { 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T02:34:39.187

我认为你数错了。试试`var_dump($pending2)`。我猜你会得到这个输出：

```
array(2) {
  [0]=>
  int(3)
  ["COUNT(*)"]=>
  int(3)
} 
```

`$pending2`是一个数组，包含您的查询返回的唯一行，唯一的列由列名和 0 索引的列号索引。任何单行结果集都将如下所示，如果您`count`这样做，它将始终输出`2`.

所以代替这个：

```
$pendingcount = count($pending2); 
```

你应该使用这个：

```
$pendingcount = $pending2[0]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T02:39:06.813

如果你只想要计数值，你可以使用[PDO::fetchColumn](http://www.php.net/manual/en/pdostatement.fetchcolumn.php)方法。

```
$pendingcount = $conn->query("SELECT count(*) FROM orders WHERE `status` =0")
                     ->fetchColumn(); 
```

# java - 抓取 SWT 组件的继承背景图像（滚动复合）

> ID：12170091
> 
> 赞同：1
> 
> 时间：2012-08-29T02:24:32.827
> 
> 标签：java, eclipse, swt

我有一个带有背景图像的外壳。在这个外壳中，我有一个滚动合成。此滚动合成继承了外壳的背景图像。

我想在滚动合成的继承背景图像上执行某种 alpha 混合/渐变。

我按照[这里](http://skounis.blogspot.sg/2008/06/gradient-background-to-any-swt-control.html)的代码。

1.  `Rectangle rect = sc.getClientArea();`// 这个矩形总是返回宽度和高度为 0。
2.  `Image newImage = new Image(sc.getDisplay(), Math.max(1, rect.width), rect.height);`// 似乎没有抓取背景图像，即使我硬编码了宽度和高度。

这里有一些代码：

```
sc = new ScrolledComposite(parent, SWT.BORDER_SOLID | SWT.V_SCROLL);
sc.setExpandHorizontal(true);
sc.setExpandVertical(true);

sc.setAlwaysShowScrollBars(true);
sc.setMinWidth(0);

GridData gd = new GridData(GridData.FILL, GridData.FILL, true, true);
sc.setLayoutData(gd);
sc.setLayout(new GridLayout(1, false));

Rectangle rect = sc.getClientArea();
Image newImage = new Image(sc.getDisplay(), sc.getParent().getBackgroundImage(), SWT.IMAGE_COPY);
GC gc = new GC(newImage);

// need to do clipping on the image so that only the background underlying the scrolled composite gets the gradient

// fill background 
gc.setForeground(new Color(sc.getDisplay(), 100,200,123)); 
gc.setBackground(new Color(sc.getDisplay(), 23,23,23)); 
gc.fillGradientRectangle(rect.x, rect.y, rect.width, rect.height, true);  
gc.dispose();

sc.setBackgroundImage(newImage);
sc.setBackgroundMode(SWT.INHERIT_DEFAULT);

innerComposite = new Composite(sc, SWT.NONE);

GridLayout gl = new GridLayout();
gl.numColumns = 1;
innerComposite.setLayout(gl);
gd = new GridData(GridData.FILL_BOTH);
gd.grabExcessVerticalSpace = true;
innerComposite.setLayoutData(gd);

/**
* Creates other widgets here!
*/
sc.setContent(innerComposite);
sc.layout(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:49:24.440

我可以在这里看到的一个合乎逻辑的问题是你做所有渐变的东西太早了。即使你做了这样`sc = new ScrolledComposite(parent, SWT.BORDER_SOLID | SWT.V_SCROLL);`的事情，这并不意味着 shell 已创建并准备好或窗口/复合本身。一个非常方便的句柄是挂钩`SWT.Resize`事件。

无论如何检查以下代码：

### 输出

![在此处输入图像描述](../Images/ac9d2ce9d963066feaf6c5d3e3a18bb4.png)

### 代码 ！！

**注意**您必须提供`image.png`

```
import org.eclipse.swt.SWT;
import org.eclipse.swt.custom.ScrolledComposite;
import org.eclipse.swt.graphics.Color;
import org.eclipse.swt.graphics.GC;
import org.eclipse.swt.graphics.Image;
import org.eclipse.swt.graphics.Rectangle;
import org.eclipse.swt.layout.FillLayout;
import org.eclipse.swt.layout.FormLayout;
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Event;
import org.eclipse.swt.widgets.Label;
import org.eclipse.swt.widgets.Listener;
import org.eclipse.swt.widgets.Shell;

public class ImageGradientTest {

    private Image imageGradient;
    private Image image;

    private void createComponents(Shell parent) 
    {
        ScrolledComposite sc = new ScrolledComposite(parent, SWT.BORDER_SOLID | SWT.V_SCROLL);
        sc.setExpandHorizontal(true);
        sc.setExpandVertical(true);

        sc.setAlwaysShowScrollBars(true);
        sc.setMinWidth(0);

        GridData gd = new GridData(GridData.FILL, GridData.FILL, true, true);
        sc.setLayoutData(gd);
        sc.setLayout(new GridLayout(1, false));

        final Composite composite = new Composite(sc, SWT.NONE);
        composite.addListener(SWT.Resize, new Listener() {
            public void handleEvent(Event e) {
                changeImage(composite);
            }
        });
        composite.setLayout(new FormLayout());
        composite.setBackgroundMode(SWT.INHERIT_DEFAULT);

        Label label = new Label(composite, SWT.None);
        label.setText("Hello, World!");

        sc.setContent(composite);
        sc.layout();

    }

    private void changeImage(Composite composite) 
    {
        Image oldImage = imageGradient;

        Display display = composite.getDisplay();
        Rectangle rect = composite.getClientArea();
        imageGradient = new Image(display, image, SWT.IMAGE_COPY);

        GC gc = new GC(imageGradient);
        Color color1 = new Color(display, 200, 200, 255);
        Color color2 = new Color(display, 255, 255, 255);

        gc.setAlpha(245);           // Two have a layer effect you should set the alpha
        gc.setForeground(color1);
        gc.setBackground(color2);
        gc.fillGradientRectangle(rect.x, rect.y, rect.width, rect.height, true);

        color2.dispose();
        color1.dispose();
        gc.dispose();

        composite.setBackgroundImage(imageGradient);

        if (oldImage != null) {
            oldImage.dispose();
        }
    }

    private void openShell() 
    {
        Display display = new Display();

        Shell shell = new Shell(display);
        shell.setLayout(new FillLayout());

        image = new Image(display, "image.png");

        shell.setBackgroundImage(image);
        shell.setBackgroundMode(SWT.INHERIT_DEFAULT);

        createComponents(shell);

        shell.open();

        while (!shell.isDisposed()) {
            if (!display.readAndDispatch()) {
                display.sleep();
            }
        }

        image.dispose();
        imageGradient.dispose();        
        display.dispose();
    }

    public static void main(String[] args) {
        ImageGradientTest sweet = new ImageGradientTest();
        sweet.openShell();
    }
} 
```

### 捕获客户区域图像的代码！

```
Display display = composite.getDisplay();
Rectangle rect = composite.getClientArea();
Image i = new Image(display, composite.getClientArea().width, composite.getClientArea().height);
GC gc = new GC(i);

composite.print(gc);            // This is important

ImageLoader loader = new ImageLoader();
loader.data = new ImageData[]{i.getImageData()};
loader.save("hello.png", SWT.IMAGE_PNG);

gc.dispose();
i.dispose(); 
```

**尽管** [检查此链接](https://stackoverflow.com/questions/10886789/swt-how-to-print-contents-of-a-scrolledcomposite/10895134#10895134)，因为该方法不是跨平台的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:09:49.910

您可以使用`Control.getBackgroundImage()`获取背景图像。只需遍历小部件层次结构，直到您使用某些逻辑找到并成像 `while (myControl.getParent().getBackgroundImage == null)`

# wcf - 从 WCF 服务返回 EF 模型类

> ID：12170095
> 
> 赞同：0
> 
> 时间：2012-08-29T02:25:08.343
> 
> 标签：wcf, entity-framework, datacontract

我有一个 DB first EF 设置。我想使用 WCF 服务返回查询和视图的结果。我有 OperationContracts，EF 类都有 DataContractAttribute。我可以调用该方法，一切正常，直到它返回结果列表，然后页面转到“与本地主机的连接被中断”。

我目前通过一组映射到 EF 类的 DataContract 类来解决这个问题，它们返回得很好。

谁能告诉我如何解决这个问题或为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T02:35:35.080

如果您只是在数据库优先模式下使用实体框架的正常代码生成策略，那么这些实体不能被序列化和反序列化，因为它们依赖于上下文（调用完成后将被销毁并且永远不会存在于客户端）进行更改跟踪。

您需要切换到[自我跟踪实体](http://robbincremers.me/2012/02/01/entity-framework-using-self-tracking-entities-in-a-multi-layered-architecture/)。

# spring - spring合并mybatis时出现异常

> ID：12170097
> 
> 赞同：1
> 
> 时间：2012-08-29T02:25:33.223
> 
> 标签：spring

跑comcat的时候经常说错，找了很多日期，没找到原因。有没有人可以帮帮我？非常感谢！

```
2012-08-28 14:33:49,531 >> ERROR >> main >>  >> [org.springframework.web.context.ContextLoader] : Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sqlSessionFactory' defined in class path resource [applicationContext.xml]: Invocation of init method failed; nested exception is org.springframework.core.NestedIOException: Failed to parse mapping resource: 'class path resource [SqlMapConfig.xml]'; nested exception is java.lang.RuntimeException: Error parsing Mapper XML. Cause: java.lang.NullPointerException
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:591)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:469)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:383)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
    at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1079)
    at org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.java:1002)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:506)
    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1317)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1065)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:585)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: org.springframework.core.NestedIOException: Failed to parse mapping resource: 'class path resource [SqlMapConfig.xml]'; nested exception is java.lang.RuntimeException: Error parsing Mapper XML. Cause: java.lang.NullPointerException
    at org.mybatis.spring.SqlSessionFactoryBean.buildSqlSessionFactory(SqlSessionFactoryBean.java:412)
    at org.mybatis.spring.SqlSessionFactoryBean.afterPropertiesSet(SqlSessionFactoryBean.java:295)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    ... 36 more
Caused by: java.lang.RuntimeException: Error parsing Mapper XML. Cause: java.lang.NullPointerException
    at org.apache.ibatis.builder.xml.XMLMapperBuilder.configurationElement(XMLMapperBuilder.java:113)
    at org.apache.ibatis.builder.xml.XMLMapperBuilder.parse(XMLMapperBuilder.java:88)
    at org.mybatis.spring.SqlSessionFactoryBean.buildSqlSessionFactory(SqlSessionFactoryBean.java:410)
    ... 39 more
Caused by: java.lang.NullPointerException
    at org.apache.ibatis.builder.xml.XMLMapperBuilder.configurationElement(XMLMapperBuilder.java:104)
    ... 41 more 
```

弹簧分配

```
<bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="mapperLocations" value="classpath:SqlMapConfig.xml" />
    </bean> 
```

SqlMapConfig.xml 配置

```
<typeAliases>
       <typeAlias type=" com.qtp.UniWebApFramework.dto.RoleDTO" alias="roleDTO"/>
    </typeAliases>
    <mappers>
        <mapper resource="roleMapper.xml"/>
    </mappers> 
```

roleMapper.xml 分配

```
<mapper namespace="com.qtp.UniWebApFramework.dto.RoleDTO">
<resultMap type="roleDTO" id="roleMap">
<result property="roleID" column="F_ROLE_ID"/>
<result property="roleType" column="F_ROLE_TYPE"/>
<result property="roleName" column="F_ROLE_NAME"/>
<result property="createAreaID" column="F_CREATE_AREA_ID"/>
<result property="ifDefault" column="F_IF_DEFAULT"/>
<result property="dutyID" column="F_DUTY_ID"/>
<result property="creater" column="F_CREATER"/>
<result property="desc" column="F_DESC"/>
<result property="state" column="F_STATUS"/>
</resultMap>

    <select id="queryAll"  resultMap="roleMap">
        SELECT * FROM OM_ROLE_T
    </select>

</mapper> 
```

# java - Java 堆设置

> ID：12170100
> 
> 赞同：4
> 
> 时间：2012-08-29T02:26:11.050
> 
> 标签：java, jvm, jvm-arguments

在阅读一些关于性能调优的笔记时，我确实注意到了在设置内存大小时的建议：

Java 应用程序应将初始和最大永久代大小调整为相同的值，因为增长或收缩永久代空间需要完整的 GC。在设置堆大小时给出了类似的建议，即`-Xmx=-Xms`。

我的问题是，**那我们为什么要设置 -Xms 呢？**

此外， **如果 -Xmx 和 -Xms 的值不同，而不是 -Xmx 和 -Xms 的大小相同，为什么会经常触发 GC。**

在我的第二个问题中添加更多内容，**如果我从最小堆大小 64M 和最大 512M 开始，我相信除非我的应用程序使用的内存达到 512M，否则不会触发完整 GC。**

同样，如果我从 -Xmx 和 -Xms 的 512M 开始，当我的应用程序内存使用达到此限制时，JVM 仍然会触发完全 GC。**那么为什么建议将 max 和 min 设置为相同的值呢？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T02:51:20.283

设置标志是在 VM 进行分代增量收集之前设计的。在那种情况下，所有的收藏品都是完整的。在更现代的收藏家中，完整的收藏品很少见。这很好，因为增量收集通常是几毫秒，所以 UI 体验不会改变。大型竞技场的完整收藏可能需要几秒钟或更长时间。改变竞技场大小 - 正如文件所说 - 保证每次都会导致完整的集合。

该指南并非 100% 完美。很少有几种应用程序允许竞技场发展是合理的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T15:52:19.290

`-Xms=64m -Xmx=512m`并不意味着“以 64 到 512 MB 之间的堆启动”。它指示 JVM 在启动时请求 64MB 的已提交内存和 512MB 的保留内存。堆开始时为 64MB，当它填满时，将扩展到为其保留的空间。因此，对于 64MB 的 Xms，您会在堆填满 64MB 之前看到完整的集合。

如果您以较低的 Xms 值启动应用程序并打开 GC 日志记录 ( `-verbose:gc -Xloggc:FILENAME`)，则日志文件将显示堆和生成大小在应用程序运行时如何变化。

较小的 Xms 可能会更频繁地收集次要集合，因为新一代会更小（假设您使用比例生成大小而不是显式），因此会更快地填充。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-06T14:26:35.897

-Xms < -Xmx 的一个原因是允许 JVM 不预先分配整个 Xmx，以便其他应用程序可以使用差异（可能是一段时间）。血淋淋的细节在这里：[http ://www.ibm.com/developerworks/library/j-memusage/](http://www.ibm.com/developerworks/library/j-memusage/)

# php - 输入框值将保存到mysql数据库

> ID：12170101
> 
> 赞同：0
> 
> 时间：2012-08-29T02:26:31.383
> 
> 标签：php, javascript, jquery

```
<SCRIPT LANGUAGE="JavaScript">

var i=0,j=0;

var t1= [];

function add(){

    i++;

    var parent = document.forms[0];

    var div = document.createElement('div');

    var input = document.createElement('input');

    input.type='text';

    input.name='text'+i;

    input.value = "text"+i;

    input.size = 10;

    t1.push(input);

    div.appendChild(input);

    var removeButton = document.createElement("button");

    removeButton.innerHTML = "Remove";

    removeButton.onclick = function(e) {

        this.parentNode.parentNode.removeChild(this.parentNode);
        return(false);

    };

    div.appendChild(removeButton);

    var mybr=document.createElement("br");

    div.appendChild(mybr);

    parent.appendChild(div);

}
</SCRIPT>

<button onclick="add()">+</button>

<form action='generate.php' method='get'>

<input type='submit' name='button' value='save'>

</form> 
```

这是一个正在运行的代码......我想知道什么代码可以通过使用这个将每个文本框的值放入mysql数据库mybe：

```
$sql = "UPDATE `sampledb` SET  `text1` =  'anyvaluethatuserinputs' && `text2` =  'anyvaluethatuserinputs' && `text3` =  'anyvaluethatuserinputs'"; 
```

但是怎么...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T03:03:31.863

在您的 generate.php 中添加这一行。您将能够获取文本框的值以及字符串中文本框的 ID。

```
<?php

$sql = "UPDATE `sampledb` SET  ";

if(isset ($_GET))
{

    foreach ($_GET as $key => $value) 
        $sql .= "$key = '$value'  , ";

}

$sql= substr_replace ($sql , '', strlen($sql) -2 , 1);
echo $sql;

    //here establish the connection and pass the $sql as the query

?> 
```

# php - 如何迭代 Yii CActiveDataProvider 对象？

> ID：12170102
> 
> 赞同：13
> 
> 时间：2012-08-29T02:26:37.153
> 
> 标签：php, mysql, html, yii

如何迭代数据提供者对象？我想访问返回的每一行的“名称”字段并构建一个列表。你能帮我吗？

**表/模型的表结构`categories`**

```
CREATE TABLE IF NOT EXISTS `categories` (
  `idCategory` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(64) NOT NULL,
  PRIMARY KEY (`idCategory`) USING BTREE
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=55 ; 
```

****我的控制器类别中的功能****

```
 $names = array();
    public function returnCategoryNames()
{
    $dataProvider= new CActiveDataProvider('Categories');
    $dataProvider->setPagination(false);
    $count = $dataProvider->totalItemCount();

    for($i = 0; $i < $count; $i++){

             // this is where I am lost...
             $myname = $dataProvider->data[$i]->name;
             array_push($names, $myname);

    }   

       return $names;

} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-29T02:43:20.020

尝试这个：

```
public function returnCategoryNames()
{
  $dataProvider= new CActiveDataProvider('Categories');
  $dataProvider->setPagination(false);
  //$count = $dataProvider->totalItemCount();
  $names = array();
  foreach($dataProvider->getData() as $record) {
    $names[] = $record->name;
  }
  return array_unique($names);
} 
```

但是，您不需要使用数据提供者，而只需使用模型

```
foreach(Categories::model()->findAll() as $record) { 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-19T07:35:58.537

如果您需要大量数据收集并且担心内存使用情况，请执行以下操作：

```
$dataProvider = new CActiveDataProvider('Categories');
$iterator = new CDataProviderIterator($dataProvider);
foreach($iterator as $category) {
   print_r($category);
} 
```

CDataProviderIterator 允许对大型数据集进行迭代，而无需将整个数据集保存在内存中。

一些性能测试

```
测试时间（秒） 内存（字节）
CDbDataReader 4.9158580303192 28339952
CActiveRecord::findAll() 5.8891110420227 321388376
CDataProviderIterator 6.101970911026 31170504

```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-11-30T18:18:47.227

在 Yii2 中，这也发生了变化：

```
 $searchModel = new ModelSearch();
    $dataProvider = $searchModel->search(Yii::$app->request->queryParams);

    foreach($dataProvider->getModels() as $record) {
        echo $record->id . '<br>';
    }

    exit(); 
```

参考：[getModels()](http://www.yiiframework.com/doc-2.0/yii-data-basedataprovider.html#getModels%28%29-detail)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-07-23T13:53:11.167

使用@ben-rowe 的解决方案，您可以一次查询所有行。你可能有记忆问题。

使用以下解决方案，您将从十乘十（默认[`CPagination.pageSize`](http://www.yiiframework.com/doc/api/1.1/CPagination#getPageSize-detail)值）获取类别：

```
 $dataProvider = new CActiveDataProvider('Categories', array(
            'pagination' => array(
                'validateCurrentPage' => false
            ),
        ));
        $pagination = $dataProvider->pagination;
        while ($categories = $dataProvider->getData(true)){
            foreach ($categories as $category) {
                //...
            }
            $pagination->currentPage++;
        } 
```

# web-applications - 为什么某些网络应用程序会将您登录到不同的子域？

> ID：12170106
> 
> 赞同：2
> 
> 时间：2012-08-29T02:28:10.630
> 
> 标签：web-applications

有些网站将自己的公共部分和登录保护部分放在不同的子域下，使公共站点在“www.somesite.com”或裸露的“somesite.com”下，然后登录带你到“app.somesite”。 com”。（例如，登录 netflix，您最终会进入 movies.netflix.com）

出于安全或其他方面的考虑，这样做是否有任何实际原因？

# html - 一列具有字符串数据和extjs4.1中的复选框

> ID：12170107
> 
> 赞同：0
> 
> 时间：2012-08-29T02:28:24.653
> 
> 标签：html, checkbox, grid, extjs4.1

在我的网格中，我应该能够根据从 web 服务返回的状态来拥有复选框和字符串数据。现在我正在编写下面给出的自定义渲染器函数：函数 customcolumn1（值，元数据，记录）{

```
 var completedTime = record.get('nccompletedTime');
    var completedByLastName = record.get('nccompletedByLastName');
    var completedByFirstName = record.get('nccompletedByFirstName');
    if (value == 'Completed') {
        return completedTime + " " + completedByLastName + "," + completedByFirstName;
    } else if (value == 'Pending') {
        return "<input type='checkbox' disabled>";
    } else if (value == 'Assigned') {
        return "<input type='checkbox'>";
    }
} 
```

网格是

```
var SAFjobgrid = Ext.create('Ext.grid.Panel', {
    store: store,
    columns: [
        {
        text: "",
        width: 30,
        renderer: customSeqNumber,
        dataIndex: 'sequenceNumber'},
    {
        text: "Task",
        width: 350,
        renderer: customTask,
        dataIndex: 'label'},
    {
        text: "Complete",
        width: 160,
        renderer: customcolumn2,
        dataIndex: 'stampActionStatus'},
    {
        text: "Verified",
        width: 160,
        renderer: customcolumn,
        dataIndex: 'verifyActionStatus'},
    {
        text: "Non Compliance",
        flex: 1,
        renderer: customcolumn1,
        dataIndex: 'ncActionStatus'}

    ]
}); 
```

现在我想检查复选框并捕获这些记录的 stampIds。当我单击网格之外的更新按钮时，我应该能够使用捕获的 stampId 调用 web 服务。我尝试将 onclick 事件放在从渲染器功能返回时的复选框。但是我应该如何访问该记录的stampId。如果我选​​择多个复选框，多个stampid应该转到webservice，如果我取消选中该复选框，相应的stampid应该从stampId中删除。有人可以帮忙解决这个吗..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:46:48.610

您可以查看 CheckColumn 用户扩展[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.ux.CheckColumn](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.ux.CheckColumn)但在您的情况下，您必须像这样覆盖**渲染器**方法

```
renderer : function(value, meta, record){
    var cssPrefix = Ext.baseCSSPrefix,
        cls = [cssPrefix + 'grid-checkheader'],
        completedTime = record.get('nccompletedTime'),
        completedByLastName = record.get('nccompletedByLastName'),
        completedByFirstName = record.get('nccompletedByFirstName');

    if (value == 'Completed') {
        //render string instead of checkbox
        return Ext.String.format('{0} {1},{2}', completedTime, completedByLastName, completedByFirstName);
    }

    if (value === 'Assigned') {
        cls.push(cssPrefix + 'grid-checkheader-checked');
    }
    //render checkbox stub, 
    //it is actually a div element with special css classes to simulate checkbox
    return '<div class="' + cls.join(' ') + '">&#160;</div>';
} 
```

要收集所有选中/未选中的行，您可以使用此存储方法[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.AbstractStore-method-getUpdatedRecords](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.AbstractStore-method-getUpdatedRecords) 它返回模型数组通过选中/取消选中此列进行更新

# c# - 如何使用 C# 在一个巨大的文本文件中每 n 个字符后插入一个字符？

> ID：12170110
> 
> 赞同：-6
> 
> 时间：2012-08-29T02:28:48.070
> 
> 标签：c#, file, insert

如果代码能够创建一个新文件，那就更好了。例如：如果我的文件最初是： fsyfugiuhknklmoiuiuutyughvhjbiuhi jhiubuguygfvtdrcrsresetgfcyuhijoj

并且所需的新文件在每第三个位置后包含一个新行字符： fsy fug iuh knk ...

代码应该是什么。？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T02:39:06.593

```
void InsertACharacterNoStringAfterEveryNCharactersInAHugeTextFileUsingCSharp(
    string inputPath, string outputPath, int blockSize, string separator)
{
    using (var input = File.OpenText(inputPath))
    using (var output = File.CreateText(outputPath))
    {
        var buffer = new char[blockSize];
        int readCount;
        while ((readCount = input.ReadBlock(buffer, 0, buffer.Length)) > 0)
        {
            output.Write(buffer, 0, readCount);
            if (readCount == buffer.Length)
                output.Write(separator);
        }
    }
}

// usage:
InsertACharacterNoStringAfterEveryNCharactersInAHugeTextFileUsingCSharp(
    inputPath, outputPath, 3, Environment.NewLine); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T02:45:06.530

这可能会对您有所帮助（我提供了在每 n 个字符之后插入字符的基本逻辑......）

```
static void Main(string[] args)
        {
            var input = "fsyfugiuhknklmoiuiuutyughvhjbiuhi jhiubuguygfvtdrcrsresetgfcyuhijoj".ToCharArray();
            var elementsToConsider = 3;
            StringBuilder sb = new StringBuilder();

            for (int i = 0; i < input.Length; i++)
            {
                sb.AppendLine(input.Skip(i).Take(elementsToConsider).Aggregate("",(a, b) => a + b));
                i = i + (elementsToConsider  -1);
            }
            Console.WriteLine(sb.ToString());
            Console.ReadKey();
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T04:04:52.187

嗯……

```
public string Tweak( string s , char c , int n )
{
  StringBuilder sb = new StringBuilder( s.Length + ( s.Length % n ) + 1 ) ;
  for ( int i = 0 ; i < s.Length ; ++i )
  {
    sb.Append( s[i] ) ;
    if ( i % n == 0 ) sb.Append( c ) ;
  }
  return sb.ToString() ;
} 
```

这可能和你得到的一样好。尽管使用 char( ) 数组和使用类方法`char[]`的数组块复制操作并通过. 结果字符串的长度是源字符串的长度 L 加上 L % n，其中 n 是周期长度。如果末尾的最后一个 [也可能是短的] 段应添加尾随字符，则将输出缓冲区的长度加 1。`System.Buffer``BlockCopy``new String( outputBuffer )`

# javascript - 如何确保在此循环中维护变量范围

> ID：12170115
> 
> 赞同：0
> 
> 时间：2012-08-29T02:29:30.993
> 
> 标签：javascript, scope, dom-events

> **可能重复：**
> [循环内的 Javascript 闭包 - 简单的实际示例](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)

我有一个`image.onload`这样的调用循环：

```
for (var i = 0; i < array.length; i++){
  var item = array[i]
    , image = new Image();

  image.onload = function(){
    // do something with 'item'
  }
  image.src = url;
} 
```

因为我不知道该`onload`功能何时被触发，所以我相信它`item`会被覆盖。如何确保每个函数都由引用它在函数绑定到事件时所做的数据`onload`的变量触发？`item``onload`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T02:34:40.583

这应该有效。

```
image.onload = function(item){
    return function(){
      // do something with 'item'
    }(item);
}; 
```

您要做的是创建“范围”，以便在调用事件函数时，[闭包](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures)带来您想要的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T02:34:47.410

使用 IIFE 返回使用当前项的函数

```
 image.onload = (function(param){
    return function(){
    //do something with 'param'
    }
  })(item); 
```

# php - 无法连接到 MySQL 数据库

> ID：12170117
> 
> 赞同：0
> 
> 时间：2012-08-29T02:29:43.253
> 
> 标签：php, mysql, connection-string

我第一次尝试连接到 mysql 数据库。你能看到下面有什么不能正常工作吗？我在第 3 行收到一个错误。从 Godaddy 到我的数据库，我的服务器地址是什么样的？我在控制面板中找到了该地址。

谢谢你的帮助。以前从未使用 PHP 编程。

```
<body>
<?php
 $con = mysql_connect("MydbName.db.3924516.hostedresource.com ","Userid","password");
 if (!$con)
 {
  die('Could not connect: ' . mysql_error());
 }

mysql_select_db("my_db", $con);

$result = mysql_query("SELECT * FROM Gallerys");

echo "<table border='1'>
 <tr>
 <th>Thumb Url </th>
 <th>Gallery Url</th>
 </tr>";

while($row = mysql_fetch_array($result))
{
  echo "<tr>";
  echo "<td>" . $row['THUMBURL'] . "</td>";
  echo "<td>" . $row['GALLERYURL'] . "</td>";
  echo "</tr>";
}
echo "</table>";

mysql_close($con);
?> 

</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T02:58:38.807

尝试检查身份验证设置，您可能使用了错误的主机、用户名或密码。

```
 <?php
    $con = mysql_connect("usually it is localhost","your MYSQL username","your MYSQL password"); 

// Checking the login details. 
// Example of default xampp login details: $con = mysql_connect("localhost","root","");  
// Xampp MYSQL default does not have password. 

    if (!$con) // If the login details are wrong, it will should an error.
      {
      die('Could not connect: ' . mysql_error());
      }
    ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T20:40:01.960

如果没有确切的错误，很难确定，但在第 3 行，hostedresource.com 之后有一个额外的空间。尝试删除主机名末尾和 quatation 标记之间的空格。像这样：

```
$con = mysql_connect("MydbName.db.3924516.hostedresource.com","Userid","password"); 
```

# java - Java - RandomAccessFile() 格式问题

> ID：12170118
> 
> 赞同：1
> 
> 时间：2012-08-29T02:30:00.830
> 
> 标签：java

我的问题是当我从文本文件中获取数据时，它似乎是错误的编码或某种东西。我不知道如何解决这个问题对不起。提前致谢。这是代码。

```
private static String readLogFile(String path, File f) throws IOException {
    if (f.exists()){
    String data;
        try (RandomAccessFile raf = new RandomAccessFile(f, "rw")) {
            char ch = raf.readChar();
            raf.seek(f.length());
            String dataCh = String.valueOf(ch);
            data = dataCh.toString();
            System.out.println(data);
        }
        return data;
    }

    else{
        String data = "";
        return data;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T02:38:57.167

来自 Java 文档

> 此方法一直阻塞，直到读取了两个字节、检测到流结束或抛出异常。

注意，“读取两个字节”

因为 Java 支持 Unicode 字符，所以流自动假设从流中读取字符需要生成 Unicode 字符。

试试`char ch = (char)raf.readByte();`吧

# ruby - 使用radio_button变量对嵌套表单控制器进行计算 - Rails 3

> ID：12170120
> 
> 赞同：1
> 
> 时间：2012-08-29T02:30:04.083
> 
> 标签：ruby, ruby-on-rails-3, activerecord

我有一个编辑表单，我有一个单选按钮，我想将它传递给控制器​​操作，然后用它来进行计算。在我看来：

```
<div class="field">
<%= radio_button_tag(:rating_select, "Up") %>
<%= label_tag(:rating_select, "Good.") %>
<%= radio_button_tag(:rating_select, "Down")%>
<%= label_tag(:rating_select, "Bad.")%>
</div> 
```

在控制器中我有：

```
def rating
@post = Post.find(params[:id])
.....
end

def update 
   @post = Post.find(params[:id])
   #@rating_select = params[:rating_select]
   if @post.rating_select == "Up"
   @post.score += 5
  elsif @post.rating_select == "Down"
   @post.score -= 5
  end
......
end 
```

目前它忽略了 if 语句，因此参数设置不正确。理想情况下，我只想使用视图中的临时变量在 if 语句中使用来决定是否需要在更新中添加或减去。但如果我也需要使用它，我也会在 post 中有一个 rating_select 字段。谢谢。

更新：谢谢。这是有道理的，我把它改成了下面，但它仍然没有根据单选框增加或减少分数。所以它似乎没有得到rating_select？：

```
 def update
 @post = Post.find(params[:id])
  if params[:rating_select]=="Up"
   @post.score += 5
 elsif params[:rating_select]=="Down"
   @post.score -= 5
 end    
 respond_to do |format|
    .... 
```

UPDATE2：终于想通了，使用另一个模型Ratings来存储关联。我在 Post 模型中使用了 before_save，它允许我进行计算和保存。多么令人头疼。

```
 before_save :set_rating
 def set_rating
   if self.rating.rating_select=="Up"
    rating.score += 5
   elsif self.rating.rating_select=="Down"
    rating.score -= 5
 end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T02:39:54.323

好吧，首先，在代码中，您显示在更新操作中加载的帖子没有从您的视图中接收参数。

您的更新操作代码通常应如下所示：

```
def update
  @post = Post.find(params[:id])
  if @post.update_attributes(params[:post])
    ... do stuff ...
  else
    render :edit, :alert => 'Unable to update post.'
  end
end 
```

其次，由于您使用的是`form_tag`helper 而不是`form_for`，因此您没有为模型设置所有参数（即嵌套在 params[:post] 下）。因此，在这种情况下，您的 rating_select 选项本身就是一个值，您可以像这样对其进行测试：

```
if params[:rating_select]=="Up"
   ...
else
   ...
end 
```

从您的代码中要了解的重要一点是`@post`，即使您使用了 params[:rating_select]，也一无所知`@post.update_attributes(params[:post])`，因为`radio_button_tag`您设置它并没有构建帖子属性的哈希，它只是一个独立的字段。

我希望这是有道理的，如果您不明白，请发表评论，我会尝试解释更多。

# wordpress - 允许用户更改角色

> ID：12170121
> 
> 赞同：0
> 
> 时间：2012-08-29T02:30:04.667
> 
> 标签：wordpress

我们有一个站点，其中包含三个额外的用户角色，我们将它们添加到 WP 默认角色中。“成员”角色很像“订阅者”角色，而“后台”和“艺术家”角色反映了“贡献者”角色。我们使用的自定义角色是组织、促进群组电子邮件等。这些自定义角色与它们镜像的默认角色具有相同的功能。

我需要允许用户在更新他们的个人资料时更改角色。

我似乎无法找到存储了哪些表角色。非常感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:43:05.820

I think `wp_usermeta` table has a role field on user. To get a role from admin you can use:

```
$role = get_option('default_role');  //(fetch admin seted role) then insert like

$userdata = array('user_login' => $username,
                 'user_nicename' => $fname,
                 'user_email' => $email,
                 'display_name' => $fname,
                 'nickname' => $fname,
                 'first_name' => $fname,
                 'last_name' => $lname,
                 'description' => $aboutme,
                 'user_url' => $website,
                 'role' => $role
);

$user_id = wp_insert_user($userdata); 
```

# php - 以 http:// 开头的任何内容都由 FILTER_VALIDATE_URL 验证？

> ID：12170123
> 
> 赞同：5
> 
> 时间：2012-08-29T02:30:13.767
> 
> 标签：php, validation, uri

我用我可以想象的字符串和int进行了测试，只要它以http://开头，它将是使用FILTER_VALIDATE_URL的有效url。那么，为什么我们需要 FILTER_VALIDATE_URL？当我们想让它有效时，为什么不在输入上添加 http:// 呢？

```
var_dump(filter_var ('http://example',FILTER_VALIDATE_URL )); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-29T02:40:18.313

从技术上讲，任何以方案（如 ）开头`http://`并包含有效 URI 字符的 URI 在[RFC 3986中](https://www.rfc-editor.org/rfc/rfc3986#section-1.1.1)**都是有效**的官方 URI 规范：

> 每个 URI 都以第 3.1 节中定义的方案名称开头，它指的是在该方案中分配标识符的规范。因此，URI 语法是一个联合且可扩展的命名系统，其中每个方案的规范可以进一步限制使用该方案的标识符的语法和语义。

所以你得到的回报没有什么奇怪的——这就是应该发生的。至于为什么你应该使用`filter_var`带有`FILTER_VALIDATE_URL`标志的...它在语义上比对每个可能的 URL 方案执行类似以下的操作更合适，你不同意吗？

```
if (strpos($url, 'http://') === 0
    || strpos($url, 'ftp://') === 0
    || strpos($url, 'telnet://') === 0
) {
    // it's a valid URL!
} 
```

# r - 仅列出类 data.frame 中的对象

> ID：12170128
> 
> 赞同：1
> 
> 时间：2012-08-29T02:31:16.400
> 
> 标签：r, class, object

> **可能重复：**
> [识别给定类的所有对象以进行进一步处理](https://stackoverflow.com/questions/5158830/identify-all-objects-of-given-class-for-further-processing)

我想为我工作区中的每个数据框建立一个索引。我该如何写一些听起来像：

```
dindex <- ls(class=data.frame) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T03:26:37.327

根据评论中提供的链接@Chase，您可以只包含该类的对象`Filter`名称。`ls``inherit``data.frame`

```
#R --vanilla -q
a <- data.frame(1:3)
b <- data.frame(1:2, 4:3)
L <- list(a, b)
Filter(function(x) inherits(get(x), "data.frame"), ls())
#[1] "a" "b" 
```

# large-files - Cocos2d-x 加载非常大的图片

> ID：12170131
> 
> 赞同：0
> 
> 时间：2012-08-29T02:32:34.430
> 
> 标签：large-files, cocos2d-x, render-to-texture

我必须在我的游戏中加载一个非常大的图像（格式为png）作为背景，并且游戏是在cocos2d-x中开发的。问题是如果我将图像保存在内存中，它会占用太多的内存空间，如果我将它分成许多块并动态加载它，当它将图像数据渲染到纹理时，帧速率将下降到非常低。那么有没有办法让我同时获得“更少的记忆”和“流利的”？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:28:13.030

Texture Packer 会成为一个不错的选择吗？

# visual-studio - 创建虚拟目录失败并出现错误

> ID：12170133
> 
> 赞同：98
> 
> 时间：2012-08-29T02:33:01.163
> 
> 标签：visual-studio, iis-express

我无法解决这个问题

![在此处输入图像描述](../Images/d50c8e9435c01d6c9607ef646682acb0.png)

我建议我必须更改`c:\Windows\System32\drivers\etc\hosts`文件并在之后添加

```
# localhost name resolution is handled within DNS itself. 
```

下一行：

```
127.0.0.1       mysite.dev 
```

但这无济于事。有什么建议么？

当我尝试在 Microsoft Visual Studio 2012 中打开网站项目时出现错误。

* * *

## 回答 #1

> 赞同：190
> 
> 时间：2016-06-17T14:56:39.170

通常情况下，至少在我的情况下，当一个`*.csproj.user`文件在项目目录中并且`<UseIISExpress>true</UseIISExpress>`在其中时，就会发生这种情况。

> 或者，正如[Zachary Cutler](https://stackoverflow.com/users/3225776/zachary-cutler)所提到的，您也可以简单地：**关闭 Visual Studio，删除`*.csproj.user`文件并重新打开 Visual Studio**。这将强制 VS 重建文件。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-08-29T12:19:43.013

我已经找到了解决方案。我只需要通过将我的站点添加到节点来编辑`C:\Users\Administrator\Documents\IISExpress\config\applicationhost.config`文件。`<sites>`

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2014-07-24T19:33:43.223

您可以选择在本地安装 IIS 并在 .csproj 文件上编辑几个标签。打开您的 csproj 文件并转到部分`<VisualStudio>`然后找到标记`<UseIIS>True</UseIIS>` 它必须设置为 true，然后转到标记： `<IISUrl>`并使用将托管应用程序以进行测试的 URL 地址进行设置：

```
<VisualStudio>
      <FlavorProperties GUID="{349c5851-65df-11da-9384-00065b846f21}">
        <WebProjectProperties>
          <UseIIS>True</UseIIS>
          <AutoAssignPort>False</AutoAssignPort>
          <DevelopmentServerPort></DevelopmentServerPort>
          <DevelopmentServerVPath>/</DevelopmentServerVPath>
          **<IISUrl>http://localhost/myWebSiteAppSample</IISUrl>**
          <NTLMAuthentication>False</NTLMAuthentication>
          <UseCustomServer>False</UseCustomServer>
          <CustomServerUrl>
          </CustomServerUrl>
          <SaveServerSettingsInUserFile>False</SaveServerSettingsInUserFile>
        </WebProjectProperties>
      </FlavorProperties>
    </VisualStudio> 
```

那就是。现在你可以正常加载你的项目了。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2016-09-29T00:52:20.357

问题是您的项目设置要在本地 IIS 中执行，并且指定的 URL 不存在。

您可以采取一些措施来解决问题。

**选项 1**：（使用 IIS Express）

1.) 在 XAML 或记事本中打开您的 Web 项目 .csproj 文件。

2.) 找到这些属性并根据您的喜好进行设置。

使用IIS = false

使用IISExpress = true

就是这样。

**选项 2**：（使用本地 IIS）

遵循选项 1 的步骤，但更改以下属性。

使用IIS = true

IISUrl = [https://localhost](https://localhost)

使用IISExpress = false

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2018-04-11T18:29:42.633

可以通过删除项目目录中名为 .vs 的文件夹来解决此问题。

这解决了问题，因为在删除 .vs 文件后打开项目时，它会创建具有子文件夹 config 的相同文件夹和具有项目名称的文件夹。

配置文件夹**applicationhost**包含成功运行项目所需的必要设置。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-04-30T14:12:34.080

我只是去了错误中命名的目录并重命名了 applicationhost.config 并重新启动，VS 创建了一个新文件并运行良好。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-08-08T10:52:33.310

*   尝试了答案中提到的几种方法，但最终对我有用的`<IISUrl>`是`.csproj`用 `<CustomServerUrl>`.

编辑 ：

*   以上并没有为我解决问题的根本原因。但是，如果您最近进行了 Windows 更新，则可能是导致问题的原因。尝试执行`netsh http add iplisten 0.0.0.0`并查看它是否解决了问题。

希望这些对仍在寻找方法的人有所帮助。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-10-13T20:51:15.533

我不知道为什么，我的`applicationhost.config`文件完全从我的 `C:\Users\Administrator\Documents\IISExpress\config\`文件夹中丢失了。

复制/粘贴`C:\inetpub\history\applicationhost.config`到该文件夹​​似乎为我解决了这个问题。

[从这里](https://stackoverflow.com/a/25429425/183624)得到想法。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-04-21T03:25:24.270

1.  在控制面板中打开 Windows 功能“Internet 信息服务”。
2.  打开“.csproj”文件并找到
3.  根据您的要求修改此行。 [http://localhost:777/](http://localhost:777/)
4.  立即打开项目/解决方案
5.  如果再次加载失败，只需右键单击解决方案并选择“重新加载项目”。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-12-14T17:21:38.490

我知道这可能很少见，但我想我会把它放在这里：

我的`csproj`文件被设置为“只读”（不要问我是怎么做到的），但是在我关闭“只读”访问之后，一切都很好。(VS2017)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-02-15T23:29:14.230

不是完全相同的错误，但由于错误的前半部分匹配，我被引导到这个答案。您的 applicationhost.config 文件可能只是只读的。取下它为我解决了这个错误。但是，该错误会专门调用该文件，因此您应该能够轻松找到它。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-03-04T22:14:10.527

我不得不将上述一些答案结合起来。我的解决方案是编辑（而不是删除）文件`.vs\config\applicationhost.config`

有一个用于站点绑定的部分，只需从 localhost 更改为您希望在其下运行它的任何内容。请注意，端口号位于服务器名称的前面。

[![applicationhost.config 绑定部分](../Images/2409bedf2b1eb641ba559dbf002425be.png)](https://i.stack.imgur.com/rD2TS.png)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-10-08T15:59:11.223

我能够通过在项目的根级别编辑文件 *.csproj 来解决此问题。我从 localhost 更改为站点名称，如下所示。可能还需要将 OverrideIISAppRootUrl 设置为 True。 [![在此处输入图像描述](../Images/cbbbc22fd106233ff869ef262a33309a.png)](https://i.stack.imgur.com/nWJjL.png)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2022-02-11T03:28:54.627

只需为我修复
关闭您的 Visual Studio

o 删除 .Net
中的 .vs o 删除 Documents 中的 IISExpress

重新打开它应该一切都好

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-08-24T22:34:13.687

由于更改了网络密码，我遇到了同样的问题。我更改了 NetExtendor 登录密码，但我必须使用旧密码登录笔记本电脑。

请尝试以下步骤来解决此问题：

使用任何有效密码登录计算机 使用任何有效密码登录 vpn ctl-alt-del 锁定电脑，然后使用新密码解锁

它对我有用:-)

谢谢！

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-03-20T17:09:09.530

所以这里是修复它的步骤：

1.  转到 .csproj 文件所在的位置。这通常是解决方案 (.sln) 下的一个目录
2.  右键单击并使用文本编辑器（记事本）打开
3.  找到 IISUrl 标记并将其内容替换为[http://localhost:(YourPortNumber)](http://localhost:(YourPortNumber))
4.  保存并重新加载您的项目！

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-07-06T15:08:14.623

我的问题与 Windows 10 Defender 有关。我过去曾授予 IIS 权限，但现在似乎忽略了它。稍后会调查它，但现在我禁用了受控文件夹访问并且它有效。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-11-04T08:52:17.507

我想在 VS 2019 中打开一个现有的 Visual Studio 2017 项目并遇到同样的问题。我发现它与版本相关的问题。解决方法是：在较新的 VS 中新建一个项目，并从较旧的 VS 中复制代码。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-05-15T17:20:39.367

尝试解密 applicationhost.config 文件。这对我有用。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-09-15T21:16:46.037

> 创建虚拟目录 xxxx 失败并出现错误：对象引用未设置为对象实例的实例...

[错误截图](https://i.stack.imgur.com/0OjYx.png) 这个问题在我删除我的本地存储库并从云下载存储库后发生在我身上。

根据上述解决方案之一，我删除了 .vs 文件夹，但没有成功。为了解决这个问题，我最终在这个论坛中混合了几个解决方案。

我转到文件夹*.vs/SolutionName/config*并将*applicationHost.config*文件从文件夹*C:/inetpub/history/的最新子文件夹中粘贴*

之后，我重新启动了 VS，错误消失了。

# c++ - 在 Cassandra 中插入多列

> ID：12170134
> 
> 赞同：1
> 
> 时间：2012-08-29T02:33:09.613
> 
> 标签：c++, nosql, cassandra

如何在 C++ 中使用一个 insert() 为一行插入多个列？我正在使用节俭生成的 cpp 代码。

我注意到 Java 实现似乎有一个 batch_insert()，它在 cpp 生成的代码中不存在。这是否意味着我必须为每一列调用 insert() 还是有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:59:37.077

Thrift 接口有一个`batch_mutate()`调用，允许您传入一个突变映射——一个突变是任何插入或删除。

来自 Thrift 规范：

```
/**
Mutate many columns or super columns for many row keys. See also: Mutation.
mutation_map maps key to column family to a list of Mutation objects to take place at that scope.
  **/
void batch_mutate(1:required map<binary, map<string, list<Mutation>>> mutation_map,
                  2:required ConsistencyLevel consistency_level=ConsistencyLevel.ONE)
     throws (1:InvalidRequestException ire, 2:UnavailableException ue, 3:TimedOutException te) 
```

# python - Django Memcache 会话奇怪的行为

> ID：12170138
> 
> 赞同：3
> 
> 时间：2012-08-29T02:33:19.590
> 
> 标签：python, django, caching, memcached, wsgi

我在 django 中的缓存出现了一些*weeeeeeeird*行为。如果我刷新页面，我会一遍又一遍地得到相同的值（这是一个应该在每次视图被点击时递增的 int）。但是，如果我使用相同的用户名/密码登录另一个浏览器，我会看到一个递增的数字，但在我再次登录之前它不会递增。我也从未注销，只是打开页面并从另一个浏览器登录。

**编辑：**每次我更改 url 时它也会增加（例如添加斜杠以保持在同一视图中） 浏览器缓存应该被禁用。

**编辑2：**现在*超级*奇怪：在将装饰器添加到我的视图后，当我在另一个浏览器中打开一个新页面时，它开始在每次刷新时工作`@never_cache`，但是当我切换回 apache/wsgi 时，它再次停止工作（是的，我重新启动阿帕奇）。

**编辑3：**现在随机开始在apache下工作......但是在chrome中，如果我将url设置为尾随`/`，它会回到x刷新之前的数字。但是，如果我用尾随刷新铬`/`，它会不断增加。这是浏览器还是 apache 缓存？

查看代码：

```
from django.core.cache import cache

if cache.get('counter') != None:#0 needs to let this pass
    cache.incr('counter')
else:
    cache.set('counter', 0)
return HttpResponse(cache.get('counter')) 
```

相关设置：

```
 MIDDLEWARE_CLASSES = (
'django.middleware.cache.UpdateCacheMiddleware',          #cache middleware
'django.contrib.sessions.middleware.SessionMiddleware',
'django.middleware.csrf.CsrfViewMiddleware',
'django.contrib.auth.middleware.AuthenticationMiddleware',
'django.contrib.messages.middleware.MessageMiddleware',
'django.middleware.locale.LocaleMiddleware',
'django.middleware.common.CommonMiddleware',
'django.middleware.cache.FetchFromCacheMiddleware',)      #cache middleware

CACHE_BACKEND = 'memcached://127.0.0.1:11211/'
CACHES = {'default':{
        'BACKEND': 'django.core.cache.backends.memcached.MemcachedCache',
        'LOCATION': '127.0.0.1:11211', #this is the default port for memcache
        'TIMEOUT': '1800' #30 Minutes
        }
    } 
```

我将密切关注此问题，以获取有关我的问题的更多信息的任何请求，因此评论将很快得到答复。

![图片是我可以用来描述行为的全部。](../Images/c9f0f85dc9a3d9c97184256bea45b6cd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:51:16.697

在`MIDDLEWARE_CLASSES`你有哪些是用于页面缓存的`django.middleware.cache.UpdateCacheMiddleware`。`django.middleware.cache.FetchFromCacheMiddleware`这就是为什么您在使用`@never_cache`装饰器时看到行为消失的原因。

您可能已经看到奇怪的斜线/无斜线问题，因为这些页面仍在缓存中（我不能 100% 确定装饰器是否与从缓存部分中获取交互）。

如果您刷新缓存，甚至取出中间件进行测试，然后再试一次，我敢打赌您会看到预期的一致递增。

# c# - 实时通讯

> ID：12170141
> 
> 赞同：3
> 
> 时间：2012-08-29T02:33:58.463
> 
> 标签：c#, .net, visual-c++

我和发布这个主题的人有同样的困境，[与 WCF 的实时通信，](https://stackoverflow.com/questions/2760446/real-time-communication-with-wcf/12170119#12170119) 除了我的问题与游戏编程无关。我想知道在两个 Windows 应用程序（服务器-客户端）之间进行实时通信的最佳方法是什么。迄今为止，我正在使用 Visual c++/c#，我希望能够将服务器接收到的所有 Feed 实时显示给客户端。

我已经开始尝试使用 .NET 远程处理，但在我的持续研究中，它似乎会使用 SOAP-http，并且可能会影响通信速度。我的服务器和客户端将使用 Internet 进行通信，而 .NET 远程处理在防火墙或 Internet 之间进行通信时不允许使用 TCP 通道。

您的意见将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T09:18:30.963

我想这取决于您的场景，如果您想要“实时”并且您愿意在此过程中丢失一些包，那么您最好使用 UDP，例如，在您恢复慢包时使用视频会议工具将不得不移动并显示视频或音频中的下一帧；这是使用 UDP 的一个很好的例子。这就是 UDP 比 TCP 快得多的原因。

但是，如果您不愿意丢失任何消息，那么 TCP 就是为您创建的，因为如果您丢失了一个包，该协议将再次请求它以使您的完整消息尽可能完整。

此外，这取决于持续沟通的方式，信息是从一到多流动吗？从多到多？从一到音调？

以 NetNamedPipeBinding 为例，这将是一个更快的过程，但只部署在单个机器上，但跨进程。而 NetMsmqBinding 将帮助您构建队列，并且对于您的负载将是大量连接的场景，它将具有惊人的可靠性和可扩展性。

最后，这一切都归结为您的具体场景和您的业务目标。

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T16:27:36.277

如果您愿意自己进行消息解析，可以使用标准 TCP 套接字与 TcpClient 和 TcpListener 类。如果您的数据已经是可序列化的对象，您可以将其序列化为文本流，然后通过套接字发送，在客户端反序列化。

为了让它在互联网上工作，服务器需要在你的路由器上转发端口，客户端只需附加到服务器的公共 IP。您显然还需要在防火墙中为此端口添加一个例外。

WCF 和大数据的最大问题是设置流式传输，默认情况下 WCF 一次发送所有内容，这对于大文件不实用。

# forms - 如何自动提交表单？

> ID：12170144
> 
> 赞同：1
> 
> 时间：2012-08-29T02:34:11.513
> 
> 标签：forms, automation

我想自动将字符串列表输入和提交到[http://tweetsqueue.com/](http://tweetsqueue.com/)我的编程经验有限，只知道一点 python 和 html。

有什么简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T02:36:26.877

你可以看看 Firefox 的 selenium IDE 插件：

[http://seleniumhq.org/](http://seleniumhq.org/)

# java - KeyListener（java）的多键检测

> ID：12170145
> 
> 赞同：1
> 
> 时间：2012-08-29T02:34:19.037
> 
> 标签：java, awt, sprite, keylistener

如何实现 KeyListener 以便我可以创建一个两人使用的系统，其中一个人使用“。” 和'/'来控制一个角色，而对方可以使用方向键而不会互相干扰？我现在的方式是，当一个人按住箭头键时，他们的角色会移动，但是当您使用其他玩家的控件时，第一个人的角色就会停止。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T02:43:52.740

创建一个`HashMap<Int,Boolean>`标记当前按下/按下的键。

然后在您的游戏循环中，您可以根据该地图中的按键是否被按下来移动您的对象。

例如：

```
if (keyMap.get(VK_COLON) == Boolean.TRUE) //True indicates pressed
   playerAXPos+= 10; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T02:45:16.937

从您正在收听的`keyPressed`事件的声音。基本上，您需要维护有关当前“关闭”哪些键的状态信息，并且仅在`keyReleased`事件发生时停止适当的操作。

这将需要有两个单独的行操作处理程序，一个用于按下键时，一个用于释放键时。

您可能需要做的另一件事是维护某种活动键的缓存......当我输入时，Ethan 刚刚提到：P

# sql - HAVING 子句中的逻辑按结果获取组的多个值

> ID：12170150
> 
> 赞同：-1
> 
> 时间：2012-08-29T02:34:40.943
> 
> 标签：sql, oracle

想象一下，我有一个包含如下数据的表格：

```
ROLE_ID | USER_ID  |  CODE
---------------------------------
 14     | USER A   |   001
 15     | USER A   |   002
 11     | USER B   |   004
 13     | USER D   |   005
 13     | USER A   |   001
 15     | USER B   |   009
 15     | USER D   |   005
 12     | USER C   |   004
 15     | USER C   |   008
 13     | USER D   |   007
 15     | USER D   |   007 
```

我想获取只有 13 和 15 个角色 ID 的用户 ID 和代码。因此，根据上面的数据，我想返回以下内容

```
USER D |  005
USER D |  007 
```

我有下面的查询，但是，它只带回一个，而不是两个。

```
 SELECT a.user_id, a.code
   FROM my_table a
   WHERE a.ROLE_ID in (13,15,11,14)
   group by a.USER_ID, a.code
    having sum( case when a.role_id in (13,15) then 1 else 0 end) = 2
    and sum( case when a.role_id in (11,14) then 1 else 0 end) = 0  
   ORDER BY USER_ID 
```

上面的查询只带来

```
USER D |  005 
```

而不是

```
USER D |  005
USER D |  007 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T03:05:07.343

有时只是听你自己的英文单词翻译成最容易阅读的 SQL：

```
SELECT DISTINCT a.user_id, a.code
   FROM my_table a
   WHERE a.user_id in 
       (SELECT b.user_id
       FROM my_table b
       WHERE b.ROLE_ID = 13)
    AND a.user_id in 
       (SELECT b.user_id
       FROM my_table b
       WHERE b.ROLE_ID = 15)
   AND a.user_id NOT IN 
       (SELECT b.user_id
       FROM my_table b
       WHERE b.ROLE_ID NOT IN (13,15)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T06:13:15.810

我会：

```
SELECT a.user_id, a.code 
FROM my_table a
GROUP BY a.user_id, a.code 
HAVING sum(case when a.role_id in (13, 15) then 1 else 3 end) = 2 
```

:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-07T23:21:10.293

正如[EthanB](https://stackoverflow.com/questions/12170150/logic-in-having-clause-to-get-multiple-values-of-a-group-by-result/12170361?noredirect=1#comment16289786_12170150)所证明的那样，您的查询完全按照您的意愿工作。您的项目数据中必须有某些内容未在您的问题的捏造数据中表示。

我确实支持您在问题中执行的枢轴，但我会将其写为单个`SUM`表达式以减少对聚合数据的迭代次数。我当然不赞成[在表的每一行](https://stackoverflow.com/a/12170361/2943403)（[1](https://stackoverflow.com/q/5970338/2943403)、[2](https://stackoverflow.com/questions/6424301/using-a-select-statement-within-a-where-clause)、[3](https://stackoverflow.com/q/141278/2943403)）上使用多个子查询……无论优化器是否将子查询转换为多个 JOIN。

**您的支点条件：**

> ```
> having sum( case when a.role_id in (13,15) then 1 else 0 end) = 2
>    and sum( case when a.role_id in (11,14) then 1 else 0 end) = 0 
> ```

**我的建议：**

在迭代聚合数据时，您可以保留合格行的计数 (+1)，并在每次评估后跳转到不合格的结果 (+3)。这样，只有一次通过聚合而不是两次。

```
SELECT USER_ID, CODE
FROM my_table
WHERE ROLE_ID IN (13,15,11,14)
GROUP BY USER_ID, CODE
HAVING SUM(CASE WHEN ROLE_ID IN (13,15) THEN 1
                WHEN ROLE_ID IN (11,14) THEN 3 END) = 2 
```

表达这些 HAVING 子句的另一种方式是：

> 要求第一个 CASE 满足两次，第二个 CASE 永远不满足。

[演示链接](http://sqlfiddle.com/#!4/2b492/22)

或者，上面的 HAVING 子句可以不那么优雅地写成：

```
HAVING SUM(CASE ROLE_ID
           WHEN 13 THEN 1
           WHEN 15 THEN 1
           WHEN 11 THEN 3
           WHEN 14 THEN 3
           END) = 2 
```

**免责声明 #1：**我不会在`[oracle]`标签池中游泳，我还没有研究过如何使用`PIVOT`.

**免责声明 #2：**我的上述建议假设`ROLE_ID`s 在分组`USER_ID`+`CODE`聚合数据中是唯一的。边缘案例：（[演示](http://sqlfiddle.com/#!4/72cc5/1)）

1.  给定的组包含`ROLE_ID = 13`, `ROLE_ID = 13`,`ROLE_ID = 15`然后当然 SUM 将至少为 3 并且该组将被取消资格。
2.  给定的组仅包含`ROLE_ID = 15`，`ROLE_ID = 15`然后当然 SUM 将为 2，并且该组将无意中合格。

为了应对这样的场景，请制作三个单独的 MAX 条件。

```
HAVING MAX(CASE WHEN ROLE_ID = 13 THEN 1 END) = 1
   AND MAX(CASE WHEN ROLE_ID = 15 THEN 1 END) = 1
   AND MAX(CASE WHEN ROLE_ID IN (11,14) THEN 1 END) IS NULL 
```

[演示](http://sqlfiddle.com/#!4/72cc5/13)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-29T07:20:31.807

```
SELECT user_id, code FROM my_table
WHERE role_id = 13
INTERSECT
SELECT user_id, code FROM my_table
WHERE role_id = 15 
```

# python - 部分目录列表

> ID：12170157
> 
> 赞同：7
> 
> 时间：2012-08-29T02:35:38.907
> 
> 标签：python, linux

是否可以获得部分目录列表？

在 Python 中，我有一个进程试图获取`os.listdir`包含超过 100,000 个文件的目录，并且它需要很长时间。比方说，我希望能够快速获得前 1,000 个文件的列表。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T07:02:04.577

我找到了一个解决方案，可以让我随机排列文件:)（至少我看不到模式）

首先，我[在 python 邮件列表中找到了这篇文章](http://mail.python.org/pipermail/python-ideas/2007-November/001232.html)。您必须将 3 个附加文件复制到磁盘 ( `opendir.pyx, setup.py, test.py`)。接下来，您需要 python 包[Pyrex](http://www.cosc.canterbury.ac.nz/greg.ewing/python/Pyrex/)来编译`opendir.pyx`帖子中的文件。我在安装 Pyrex 时遇到问题，发现我必须`python-dev`通过`apt-get`. 接下来，我`opendir`从上面下载的三个文件中安装了包`python setup.py install`。该文件`test.py`包含如何使用它的示例。

接下来，我对这个解决方案比使用 os.listdir 快多少感兴趣，我使用以下小 shellscript 创建了 200000 个文件。

```
for((i=0; i<200000; i++))
do
    touch $i
done 
```

以下脚本是我在刚刚创建文件的目录中运行的基准测试：

```
from opendir import opendir
from timeit import Timer
import os

def list_first_fast(i):
    d=opendir(".")
    filenames=[]
    for _ in range(i):
        name = d.read()
        if not name:
            break
        filenames.append(name)
    return filenames

def list_first_slow(i):
    return os.listdir(".")[:i]

if __name__ == '__main__':
    t1 = Timer("list_first_fast(100)", "from __main__ import list_first_fast")
    t2 = Timer("list_first_slow(100)", "from __main__ import list_first_slow")
    print "With opendir: ", t1.repeat(5, 100)
    print "With os.list: ", t2.repeat(5, 100) 
```

我的系统上的输出是：

```
With opendir:  [0.045053958892822266, 0.04376697540283203, 0.0437769889831543, 0.04387712478637695, 0.04404592514038086]
With os.list:  [9.50291895866394, 9.567682027816772, 9.865844964981079, 13.486984968185425, 9.51977801322937] 
```

正如你所看到的，当返回一个包含 200000 个文件名中的 100 个文件名的列表时，我得到了 200 倍的加速，这非常好:)。

我希望这是你想要达到的目标。

# java - 在页面对象模式中返回新页面对象有什么好处？

> ID：12170158
> 
> 赞同：0
> 
> 时间：2012-08-29T02:35:45.457
> 
> 标签：java, testing, webdriver, pageobjects

例如，如果我要测试 Google 搜索，页面对象模型返回新的 Google 搜索页面对象有什么好处？

例如

```
public class SearchPage {
    private final WebDriver driver;

    public SearchPage(WebDriver driver) {
        this.driver = driver;
    }

    public SearchPage search(String query) {
        WebElement e = driver.findElement(By.name("q")).sendKeys(query);
        e.submit();

        return new SearchPage(driver);
    }
} 
```

对比

```
public class SearchPage {
    private final WebDriver driver;

    public SearchPage(WebDriver driver) {
        this.driver = driver;
    }

    public void search(String query) {
        WebElement e = driver.findElement(By.name("q")).sendKeys(query);
        e.submit();
    }
} 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T06:21:15.607

我想到的一件事是链接 SearchPage 类的方法。当您可以说一些负责运行测试的更高级别的类时，您可以这样使用：

```
String actualText = searchPage.search("q").openFirstResult().selectItemFromCombo().checkName().getNameText() 
```

等等等等

这使得阅读您的代码变得非常容易，看起来几乎像一个句子，并且对于其他人来说是可以理解的。

# c++ - C++：成员变量的初始化

> ID：12170160
> 
> 赞同：17
> 
> 时间：2012-08-29T02:35:59.013
> 
> 标签：c++, constructor, initialization

我对类成员变量初始化感到困惑。

假设在我的 .h 文件中是：

```
class Test {

int int_var_1;
float float_var_2;

public:
       Test();
} 
```

我的 .cpp 将是：

```
Test::Test() : int_var_1(100), float_var_2(1.5f) {} 
```

现在，当我实例化一个类时，变量被初始化为 100 和 1.5。

但如果这就是我在构造函数中所做的全部，我可以在我的 .cpp 中执行以下操作：

```
int Test::int_var_1 = 100;
float Test::float_var_2 = 1.5f; 
```

我对在构造函数中初始化变量或使用解析运算符之间的区别感到困惑。

这种使用范围解析在构造函数之外初始化变量的方法是否仅适用于静态变量，或者是否有一种方法也可以用于普通变量？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-29T02:45:31.367

你不能用一个代替另一个。如果成员变量不是静态的，则必须使用初始化列表（或构造函数主体，但初始化列表更适合）^*。如果成员变量是静态的，那么您必须在定义中使用第二个块中的语法对其进行初始化。

^* Als 正确指出，在 C++11 中，您还可以在声明中为非静态成员变量提供初始化程序：

```
class test {
   int data = 5;
}; 
```

将隐式添加到未明确提及`data(5)`的任何初始化列表中（包括隐式定义的默认构造函数）`data`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T02:43:53.607

当您初始化非静态`const`变量时（在构造函数中），您应该使用第一种方法。这是您可以修改这些类型的成员变量的唯一方法（除非您使用的是 C++11）。

静态成员变量可以通过使用适当的范围解析运算符（在类之外）来初始化。

# java - 创建地图的问题

> ID：12170161
> 
> 赞同：2
> 
> 时间：2012-08-29T02:36:01.343
> 
> 标签：java

我在下面的查询返回的 db 中有一行。要选择的列包括rec、head、amount。我想按头列对行进行排序。我尝试了 Map where string for head 和 list 其他两列。

我已经在下面发布了我的非工作代码。我如何将另一个列表附加到重复键列表中。文档说它替换了相同键的值，而我需要将它附加到列表值。我会非常感激任何帮助。

```
Query q= session.createQuery("select tally_receipt_prefix, tally_receipt_no, tally_head, tally_amount from Tally_table where tally_system_date='"+fmtd_date+"' and tally_dbcr_indicator='DB' and tally_mode='Ca' order by tally_head,tally_receipt_prefix,tally_receipt_no"); System.out.println("query "+q);

List heads=new ArrayList();

for(Iterator it=q.iterate(); it.hasNext(); )
{
    Object[] row= (Object[]) it.next();

    payincash1=new LinkedHashMap<String, List>();

    heads.add((String)row[2]);

    List tails = null;
    tails=new ArrayList();
    tails.add((String)row[0]);
    tails.add((String)row[1]);
    tails.add((String)row[3]);

    System.out.println("heads in dao from iter 1: "+heads);  
    System.out.println("tails in dao from iter1 on: "+tails);

    if(heads.contains((String)row[2]))  // for head in temp list
    {
        System.out.println("in first if");
        if(payincash1.containsKey((String)row[2]))     
        {
            System.out.println("map if repeat: "+payincash1);
            payincash1.put((String)row[2],tails);
        }

    } 
    else
    {

        System.out.println("map if not repeat: "+payincash1);
        payincash1.put((String)row[2], tails);

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T02:49:24.473

听起来更像你想要一个列表列表

就像是`Map<String, List<List>>`

然后你会得到类似的东西......

```
Map<String, List<List>> payincash1 = new LinkedHashMap<String, List<List>>();

heads.add((String) row[2]);

List tails = null;
tails = new ArrayList();
tails.add((String) row[0]);
tails.add((String) row[1]);
tails.add((String) row[3]);

System.out.println("heads in dao from iter 1: " + heads);
System.out.println("tails in dao from iter1 on: " + tails);

List master = payincash1.get((String)row[2]);
if (master == null) {

    master = new List();
    payincash1.put((String)row[2], master);

}

master.add(tails); 
```

现在，就个人而言，我将创建一个包含所有这些信息的“数据”对象。

```
public class MyData {
    private String rec, head, amount, ??; // Apparently you have another variable I don't know about
    public MyData(String rec, String head, String amount, String ??) {
        // Initalise...
    }
    // Setters and getters not inclueded
} 
```

然后你可以做这样的事情......

```
Map<String, List<MyData>> payincash1 = new LinkedHashMap<String, List<MyData>>();

MyData data = new MyData(row[0], row[1], row[2], row[3]);

List master = payincash1.get((String)row[2]);
if (master == null) {

    master = new List<MyData>();
    payincash1.put((String)row[2], master);

}

master.add(data); 
```

哪个更干净（恕我直言）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-29T03:02:56.833

据我了解，您需要[番石榴](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/index.html)库的 Multimap。

# android - 在 API 8 中为 RadioButtons 复制 android:drawableStart

> ID：12170162
> 
> 赞同：1
> 
> 时间：2012-08-29T02:36:22.183
> 
> 标签：android, android-layout

我需要一个带有自定义背景、居中文本、文本之前的图标的自定义单选按钮，但没有默认指示器。

目前，我有以下代码：

```
<RadioButton
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:button="@null"
    android:background="@drawable/bg_rbtn_custom"
    android:drawableLeft="@drawable/icon"
    android:text="Lorem ipsum…" /> 
```

问题是 中定义的图标`drawableLeft`，一直被推到左边，即

```
[icon]____Lorem ipsum…________ 
```

我需要这个：

```
____[icon]Lorem ipsum…________ 
```

当我使用`android:button="@drawable/icon`;时也会发生同样的事情 图标位于 的最左侧`View`，然后文本在剩余空间内居中（而不是相对于整个 居中`View`）。我是 Android API 8，所以我不能使用`drawableStart`，所以我需要一种方法来复制它的行为（至少我*假设*它就是这样做的）。文本是动态的，并且**会**在运行时发生变化，所以我不能对填充进行硬编码。

[我的问题与这个](https://stackoverflow.com/questions/3634191/how-to-center-icon-and-text-in-a-android-button-with-width-set-to-fill-parent)非常相似，但是那个人只需要一个`Button`，但我需要一个`RadioButton`可以在`RadioGroup`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T08:44:29.537

第一个想法是尝试

```
android:paddingLeft="#db" 
```

其中“#db”是使所有内容居中所需的像素数

* * *

在尝试了您的代码并将背景和图标替换为我拥有的本地资源后，我无法重新创建您遇到的问题。您使用的图标有可能在其右边缘有透明像素吗？

# .htaccess - 仅 mod_rewrite 字符串和整数

> ID：12170164
> 
> 赞同：1
> 
> 时间：2012-08-29T02:36:27.417
> 
> 标签：.htaccess, mod-rewrite

仅当 URL 为字符串和整数时，我才需要重写 URL

例如 ：

```
http://domain.com/abc12 
```

或者

```
http://domain.com/123 
```

我尝试使用此规则

```
RewriteRule ([A-Za-z0-9]) file.php?key=$1 [L,QSA] 
```

但这会重写 .html 和 .php ..etc 等文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T03:04:28.377

您需要为正则表达式添加边界，特别是`^`（匹配开始）和`$`（匹配结束）。

```
RewriteRule ^([A-Za-z0-9]+)$ file.php?key=$1 [L,QSA] 
```

# c# - 如何使用 RavenDb 创建私有/受保护属性的投影

> ID：12170166
> 
> 赞同：1
> 
> 时间：2012-08-29T02:36:43.340
> 
> 标签：c#, ravendb, private-members

如果我有一个只有私有属性的对象，例如

```
public class Foo
{
    private int Id { get; set; }
    private string Bar { get; set; }
    private string Baz { get; set; }
} 
```

并将其存储在 Raven 中，它将存储这些属性，并且一切都像魔术一样工作。如果我想对集合进行某种只读查询，我将如何使用索引来执行此操作？（我实际上对任何解决方案持开放态度，即使它不使用索引。）

显然，由于私有访问（并且动态不能在表达式树中使用），这样的事情不会起作用：

```
public class Foo_LineItems : AbstractIndexCreationTask<Foo, FooLineItem>
{
    public Foo_LineItems ()
    {
        Map = foos => foos.Where (x => x.Baz == null)
                          .Select (x => new { x.Id, x.Bar });
    }
} 
```

我确定我忽略了一些东西，但是一直在网上搜索，找不到任何可以回答这个特定问题的东西。显而易见的答案是使用 CQRS 分离读取和写入，而不是实际保存原始域对象。（这只是 Raven 和 CQS 的实验。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:07:07.580

我们有用于执行此操作的无类型 API：

```
public class Foo_LineItems : AbstractIndexCreationTask
{
    public override IndexDefinition CreateIndexDefinition()
    {
        return new IndexDefinition
        {
            Map = @"
                    from foo in docs.Foos
                    where foo.Baz == null
                    select new { foo.Id, foo.Bar }
"
        };
    }
} 
```

# bash - 在 bashrc 中在 BASH 提示符后面运行命令

> ID：12170167
> 
> 赞同：2
> 
> 时间：2012-08-29T02:36:56.473
> 
> 标签：bash, shell

> **可能重复：**
> [从 .bashrc 启动后台进程](https://stackoverflow.com/questions/11065954/start-background-process-from-bashrc)

我在 .bashrc 中执行一个脚本，并且在所有命令都执行之前不会出现用户提示。有没有办法在启动终端时在后台执行命令时出现提示？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T02:43:13.957

附加`&`到您的命令以使其在后台运行。

# ios - iOS 4.2 中的 UISplitView 有两个视图

> ID：12170168
> 
> 赞同：3
> 
> 时间：2012-08-29T02:37:10.213
> 
> 标签：ios, ios5, ios4

我正在尝试通过在彼此之上使用两个 UIView（iOS 4.2）来创建像 facebook iphone 中的 UISplitView。我有一个 UINavigationController，当用户单击 UINavigation 控制器中的左栏按钮时，顶视图应该滑开并离开第二个视图。它工作正常，但 UINavigationController 保持在相同的位置，我也想用 TopView 滑动它，以便在 BottomView 上没有 UINavigationController。这可能吗？我还在 stackoverflow 中提到了类似的问题，但找不到与此特定问题相关的任何内容。非常感谢您在这方面的建议。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T04:46:06.267

看看[JTRevealSidebarDemo](https://github.com/mystcolor/JTRevealSidebarDemo)。这正是你想要的。

请让我知道您是否还有其他问题。

# c# - 基于两个属性从列表中选择不同值的最快方法

> ID：12170169
> 
> 赞同：1
> 
> 时间：2012-08-29T02:37:23.147
> 
> 标签：c#, linq, list, select, distinct

我有一个这个列表：

```
List<myobject> list= new List<myobject>();

list.Add(new myobject{name="n1",recordNumber=1}); 
list.Add(new myobject{name="n2",recordNumber=2}); 
list.Add(new myobject{name="n3",recordNumber=3});
list.Add(new myobject{name="n4",recordNumber=3}); 
```

我正在寻找基于recordNumber选择不同对象的最快方法，但是如果有多个具有相同recordNumber的对象（这里recordNumber = 3），我想根据其名称选择对象。（参数提供的名称)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T02:44:35.190

看起来你真的在追求类似的东西：

```
Dictionary<int, List<myobject>> myDataStructure; 
```

这使您可以通过记录号快速检索。如果`List<myobject>`带有该字典键的 包含多个条目，则可以使用名称来选择正确的条目。

请注意，如果您的列表不是很长，则仅扫描列表以检查 recordNumber 和 name 的 O(n) 检查可能*足够快*，因为程序中发生的其他事情可能会掩盖列表查找成本。在过度优化查找时间之前考虑这种可能性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T03:18:00.603

这是执行此操作的 LINQ 方式：

```
Func<IEnumerable<myobject>, string, IEnumerable<myobject>> getDistinct =
    (ms, n) =>
        ms
            .ToLookup(x => x.recordNumber)
            .Select(xs => xs.Skip(1).Any()
                ? xs.Where(x => x.name == n).Take(1)
                : xs)
            .SelectMany(x => x)
            .ToArray(); 
```

我刚刚用 1,000,000 个随机创建的`myobject`列表对此进行了测试，它在 106 毫秒内产生了结果。对于大多数情况，这应该足够快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T03:14:52.140

你在寻找

```
class Program
    {
        static void Main(string[] args)
        {
            List<myobject> list = new List<myobject>();

            list.Add(new myobject { name = "n1", recordNumber = 1 });
            list.Add(new myobject { name = "n2", recordNumber = 2 });
            list.Add(new myobject { name = "n3", recordNumber = 3 });
            list.Add(new myobject { name = "n4", recordNumber = 3 });

            //Generates Row Number on the fly
            var withRowNumbers = list 
                    .Select((x, index) => new 
                            {
                                Name = x.name,
                                RecordNumber = x.recordNumber,
                                RowNumber = index + 1
                            }).ToList();

            //Generates Row Number with Partition by clause
            var withRowNumbersPartitionBy = withRowNumbers
                    .OrderBy(x => x.RowNumber)
                    .GroupBy(x => x.RecordNumber)
                    .Select(g => new { g, count = g.Count() })
                    .SelectMany(t => t.g.Select(b => b)
                    .Zip(Enumerable.Range(1, t.count), (j, i) => new { Rn = i, j.RecordNumber, j.Name}))
                    .Where(i=>i.Rn == 1)
                    .ToList();
            //print the result
            withRowNumbersPartitionBy.ToList().ForEach(i => Console.WriteLine("Name =  {0}   RecordNumber = {1}", i.Name, i.RecordNumber));

            Console.ReadKey();
        }
    }

    class myobject
    {
        public int recordNumber { get; set; }
        public string name { get; set; }
    } 
```

**结果：**

```
Name =  n1   RecordNumber = 1
Name =  n2   RecordNumber = 2
Name =  n3   RecordNumber = 3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T02:51:01.797

您是否正在寻找一种方法来做到这一点？

```
List<myobject> list= new List<myobject>();

list.Add(new myobject{name="n1",recordNumber=1}); 
list.Add(new myobject{name="n2",recordNumber=2}); 
list.Add(new myobject{name="n3",recordNumber=3});
list.Add(new myobject{name="n4",recordNumber=3});

public myobject Find(int recordNumber, string name)
{
    var matches = list.Where(l => l.recordNumber == recordNumber);

    if (matches.Count() == 1)
        return matches.Single();

    else return matches.Single(m => m.name == name);
} 
```

如果有多个匹配项或零个匹配项，这当然会中断。您需要编写自己的边缘案例和错误处理！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T03:55:11.237

如果保证 name 和 recordNumber 组合是唯一的，那么您始终可以使用[Hashset](http://theburningmonk.com/2011/03/hashset-vs-list-vs-dictionary/)。

[然后，您可以使用此处](https://stackoverflow.com/questions/263400/what-is-the-best-algorithm-for-an-overridden-system-object-gethashcode)描述的方法使用 RecordNumber 和 Name 生成 HashCode 。

```
class myobject 
{

     //override GetHashCode
     public override int GetHashCode()
     {
        unchecked // Overflow is fine, just wrap
        {
           int hash = 17;
           // Suitable nullity checks etc, of course :)
           hash = hash * 23 + recordNumber.GetHashCode();
           hash = hash * 23 + name.GetHashCode();
           return hash;
         }
     }
     //override Equals      
} 
```

# javascript - 在创建视图时指定模型时，是否必须引用特定模型？

> ID：12170170
> 
> 赞同：0
> 
> 时间：2012-08-29T02:37:26.987
> 
> 标签：javascript, backbone.js

例如：

假设 BackBoneModel 是我创建并扩展到 Backbone.Model 的模型

```
var specificModel = new BackBoneModel;
var view = new BackBoneView({model: SpecificModel}); 
```

或者：

```
var view = new BackBoneView({model: BackBoneModel}); 
```

我无法理解在创建视图和附加模型时是否需要附加已实例化的模型对象或实际模型本身。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T02:46:31.470

简短的回答是您应该使用特定的实例。当视图绑定到特定模型时，它包含对该模型的引用，然后您可以引用该模型的属性，并进一步绑定到它的属性，以便对它们的更改导致视图重新呈现。

并非所有视图都需要指定模型，但如果您确实想要它，那么这样做（即当您创建视图时）是事后指定它的快捷方式，而不是

```
var view = new BackBoneView();
view.model =specificModel; 
```

你只需使用

```
var view = new BackBoneView({model: BackBoneModel}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T02:44:28.557

在发布到 Stack 之前应该进行简单的测试。答案是第一个选项，其中特定的实例化模型必须在视图中说明。

# web-services - 不支持的内容类型：文本/html；charset=UTF-8 支持的有：[text/xml]

> ID：12170171
> 
> 赞同：5
> 
> 时间：2012-08-29T02:37:30.477
> 
> 标签：web-services, google-app-engine, soap

我正在尝试使用 Web 服务从服务器检索数据。我按照[http://googcloudlabs.appspot.com/codelabexercise5.html](http://googcloudlabs.appspot.com/codelabexercise5.html)中指定的教程进行操作，当然我已经修改了原始代码以满足我的需求。

现在我收到这样的错误： Unsupported Content-Type: text/html; charset=UTF-8 支持的有：[text/xml]

为了查看完整的错误，我在获取数据时编写了一个新的错误函数：

```
var errorFn = function(e){

    for(var p in e){
    alert(e[p]);
    }
}

var successFn = function(resp){

    var data='';
    if(resp){
    //getting the data from the response object
        data=resp.data;         
    }

        //Some other code here... 

}

getData("/entity",null,successFn,errorFn); 
```

浏览器警告错误对象：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"/>
<title>Error 500 Unsupported Content-Type: text/html; charset=UTF-8 Supported ones are: [text/xml]</title>
</head>
<body><h2>HTTP ERROR 500</h2>
<p>Problem accessing /vehicle. Reason:
<pre>    Unsupported Content-Type: text/html; charset=UTF-8 Supported ones are: [text/xml]</pre></p><h3>Caused by:</h3><pre>com.sun.xml.internal.ws.server.UnsupportedMediaException: Unsupported Content-Type: text/html; charset=UTF-8 Supported ones are: [text/xml]

    at com.sun.xml.internal.ws.encoding.StreamSOAPCodec.decode(Unknown Source)

    at com.sun.xml.internal.ws.encoding.StreamSOAPCodec.decode(Unknown Source)

    at com.sun.xml.internal.ws.encoding.SOAPBindingCodec.decode(Unknown Source)

    at com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.process(Unknown Source)

    at com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.processRequest(Unknown Source)

    at com.sun.xml.internal.ws.transport.DeferredTransportPipe.processRequest(Unknown Source)

    at com.sun.xml.internal.ws.api.pipe.Fiber.__doRun(Unknown Source)

    at com.sun.xml.internal.ws.api.pipe.Fiber._doRun(Unknown Source)

    at com.sun.xml.internal.ws.api.pipe.Fiber.doRun(Unknown Source)

    at com.sun.xml.internal.ws.api.pipe.Fiber.runSync(Unknown Source)

    at com.sun.xml.internal.ws.client.Stub.process(Unknown Source)

    at com.sun.xml.internal.ws.client.sei.SEIStub.doProcess(Unknown Source)

    at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(Unknown Source)

    at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(Unknown Source)

    at com.sun.xml.internal.ws.client.sei.SEIStub.invoke(Unknown Source)

    at $Proxy32.getAllVehicles(Unknown Source)

    at com.google.appengine.codelab.soap.client.VehicleServlet.doGet(VehicleServlet.java:52)

    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)

    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)

    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)

    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)

    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:35)

    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)

    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:60)

    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)

    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)

    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)

    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)

    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)

    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)

    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)

    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)

    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)

    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)

    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)

    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)

    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)

    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)

    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:370)

    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)

    at org.mortbay.jetty.Server.handle(Server.java:326)

    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)

    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)

    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)

    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)

    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)

    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)

    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)

</pre>
<hr /><i><small>Powered by Jetty://</small></i><br/>                                                
<br/>                                                
<br/>                                                
<br/>                                                
<br/>                                                
<br/>                                                
<br/>                                                
<br/>                                                
<br/>                                                
<br/>                                                
<br/>                                                
<br/>                                                
<br/>                                                
<br/>                                                
<br/>                                                
<br/>                                                
<br/>                                                
<br/>                                                
<br/>                                                
<br/>                                                

</body>
</html> 
```

有人帮我解决这个问题？？

预先感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T08:00:14.467

在类的头部添加以下代码：

```
@BindingType("http://java.sun.com/xml/ns/jaxws/2003/05/soap/bindings/HTTP/") 
```

然后重启你的服务器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-15T18:09:56.917

这个错误发生在我身上，原因是对 web 服务的调用是对一个无效的主机进行的，所以 web 服务器响应的是 http 错误消息而不是 xml soap 消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-13T11:27:16.653

我的情况，同样的错误，但不同的原因：

端口未在 wsdl 中指定，服务器将其返回给 Java 服务“生成器”。因此，Web 服务器用一个主页回答了 SOAP 调用，该主页当然不是文本/XML，而是文本/html。

将端口添加到 wsdl 解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-20T13:47:03.177

Try other clients . in my case the problem occurs in jdeveloper 11.1.2.0 (Http analyser as client) and solved by Jdeveloper 11.1.2.3 (Http analyser as client)

This problem comes from request Content-Type

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-27T03:52:20.853

我也遇到过这个问题，最后发现是服务器造成的。

该服务器基于 Node.js 构建，**同时**使用两个包`multer`来`formidable`解析“multipart/form-data”类型的表单数据。这导致了冲突：实际的表单解析器`formidable`无法获取原始表单数据，因为`multer`已经处理了该数据并获得了干净的内容。我们删除`multer`了，然后问题就解决了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-14T16:38:13.890

当编写 SOAP 请求并且提供的内容编码/格式不正确/无法访问时，也会发生此错误。这可能不是您的情况，但如果其他人在发送请求*之前*遇到相同的错误，这意味着用于撰写邮件本身或其*附件*的数据编码不正确、格式不正确或通常无法访问。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-29T06:02:31.020

很简单：您的客户端（浏览器？）正在发送数据，因为`Content-Type: text/html`它应该是`Content-Type: application/soap+xml`（对于[旧的 SOAP](http://hadleynet.org/marc/whatsnew.html#S3.7.1)也是`Content-Type: text/xml`）。

因此，如果您手动发出请求，则应将[`Content-Type`标头](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.17)添加到 HTTP 请求中。

# python - 动态字段 ModelForms Django

> ID：12170174
> 
> 赞同：1
> 
> 时间：2012-08-29T02:37:57.377
> 
> 标签：python, django, forms, dynamic

我试图弄清楚如何根据前一个字段的输入动态更改 ModelForm 字段。

例如，如果我有这些类型的模型：

```
class Phone(models.Model):
     name = models.CharField(max_length=10)

class Series(models.Model):
     name = models.CharField(max_length=10)

class Manufacturer(models.Model):
     phone = models.ForeignKey('Phone') 
     series = models.ForeignKey('Series')     

class ManufacturerForm(ModelForm):
     class Meta:
         model = Manufacturer 
```

这将生成一个表单（ManufacturerForm），其中包含数据库中电话和系列条目的下拉选项。例如，是否可以根据用户输入的不同`series`条目集`phone`？

[根据我在这篇博](http://www.rossp.org/blog/2008/dec/15/modelforms/)文中所读到的内容，我已经阅读了有关使用该`__init__`方法来完成此操作的信息，但我不确定如何根据我的情况执行此操作。或者也许有更好的方法来实现你已经采取的这一目标？感谢您的任何建议！

* * *

编辑：添加了表单的视图。

```
def make_ad(request):
    if request.method == 'POST':
        form = ManufacturerForm(request.POST, request.FILES)
        if form.is_valid():
            a = form.save()
            a.user = request.user
            a.save()
    else:
        form = ManufacturerForm()

    variables = RequestContext(request, {
        'form': form
    })
    return render_to_response('place.html', variables) 
```

@super9 提到使用 ajax 请求来更改这些元素。我需要检查`if request.is_ajax()`，但我应该在什么时候检查这个？以及如何根据 ajax 请求添加或更改查询集？

谢谢你的建议。

* * *

编辑：尝试使用 django-smart-selects

不知道如何设置我的模型以利用 django-smart-selects 来完成我正在尝试的事情。以下是我构建模型的方式：

```
from smart_selects.db_fields import ChainedForeignKey 

class Phone(models.Model):
    phone = models.CharField(max_length=10)

class Series(models.Model):
    series = models.CharField(max_length=10)
    phone = models.ForeignKey(Phone)

class SeriesModel(models.Model):
    model = models.CharField(max_length=10)
    series = models.ForeignKey(Series)

class Manufacturer(models.Model):
    phone = models.ForeignKey(Phone)
    series = ChainedForeignKey (Series, chained_field = "phone", chained_model_field = "phone")
    series_model = ChainedForeignKey (SeriesModel, chained_field = "series", chained_model_field = "series") 
```

但是当我查看我的表单（ModelForm）时，字段`series_model`没有正确链接到`series`. 我是否缺少使智能选择在第二层抽象上工作的东西？

* * *

编辑：上面的代码现在可以工作了。

# azure-web-roles - Windows Azure 无法在端点数量不同的部署之间执行 VIP 交换

> ID：12170176
> 
> 赞同：5
> 
> 时间：2012-08-29T02:38:08.920
> 
> 标签：azure-web-roles

我正在尝试通过 azure 门户执行 VIP 交换，但出现错误：

**Windows Azure 无法在端点数量不同的部署之间执行 VIP 交换。**

我仔细看了看，确实看到了端点数量的差异（生产中为 2，暂存中为 3）。

生产：

```
Input Endpoints
OUR.API:168.62.21.50:80 
OUR.API:168.62.21.50:3389 
```

分期：

```
Input Endpoints
OUR.API:168.62.22.55:80 
OUR.API:168.62.22.55:3389 
OUR.API:168.62.22.55:8172 
```

端口 80 是 Web，3389 是远程桌面。到目前为止，一切都很好。那个额外的端口 8172 来自哪里？应用程序中除了端口 80 之外没有任何东西可以监听。此外，暂存和生产区域中的应用程序几乎相同 - 所以它必须是框架。有什么缩小范围的步骤吗？

[编辑] 另外，我的角色 ServiceDefinition.csdef 只定义了一个端点：

```
 <Sites>
      <Site name="Web">
        <Bindings>
          <Binding name="Endpoint1" endpointName="Endpoint1" />
        </Bindings>
      </Site>
    </Sites>
    <Endpoints>
      <InputEndpoint name="Endpoint1" protocol="http" port="80" />
    </Endpoints> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T16:33:50.277

*“那个额外的端口 8172 是从哪里来的？”*

> 它来自发布设置中启用的 WebDeploy

长答案：

我在暂存和生产之间一一解析了整个配置，这是我发现的：

您的发布设置已保存到

`<azurerole>\Profiles\<yourprofilename>.azurePubxml`

我的生产部署有 `<AzureEnableWebDeploy>True</AzureEnableWebDeploy>`，而我的暂存部署有`<AzureEnableWebDeploy>False</AzureEnableWebDeploy>`

然后，Azure 基础结构查找并打开端口 8172 以在暂存角色上启用 WebDeploy。这就是为什么尽管 ServiceDefinition.csdef 文件中没有定义新的端点，但端点是不同的。

我不确定为什么拥有不同数量的端点会阻止 Azure 发布本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-12T04:41:26.610

对我来说，问题是我的 PROD 实例启用了 RDP，而 STAGING 没有。所以“RDP”是不同的端点。

# multithreading - 如何中止 XE2 中的 TSQLConnection 连接尝试？

> ID：12170180
> 
> 赞同：5
> 
> 时间：2012-08-29T02:39:14.130
> 
> 标签：multithreading, delphi, client-server, delphi-xe2

使用 Delphi XE2 中的 TSQLConnection 组件连接到 DataSnap 服务器。

我的问题是，如果我们在 3 秒后无法连接，我想中止连接尝试，但是设置驱动程序的 ConnectTimeout 属性似乎没有任何影响（在放弃之前它仍然等待大约 20 秒） .

我在一个线程中运行它，所以我可以向线程发布一条消息（我想，是否为线程消息队列提供服务取决于如何创建这个阻塞调用）。即使我的线程消息处理程序运行了，我也不确定我将如何中断阻塞调用以设置 TSQLConnection.Connected 属性（在线程的 Execute 方法中设置）。

我不想调用 TerminateThread，因为这似乎有点过分，并且会留下（如果我理解正确的话）分配给线程堆栈的内存。关于如何中断此连接过程或访问底层 Indy 组件并明确设置连接超时的任何想法将不胜感激。

谢谢！

```
fConnection := TSQLConnection.Create(nil);
with fConnection do
begin
  DriverName := 'DataSnap';
  Params.Values['CommunicationProtocol'] := 'tcp/ip';
  Params.Values['DatasnapContext'] := 'datasnap/';
  Params.Values['HostName'] := '127.0.0.1';
  Params.Values['Port'] := '211';
  Params.Values['ConnectTimeout'] := '3000';
  KeepConnection := true;
  LoginPrompt := true;
end;

// Where it blocks for up to 20 seconds (if host unavailable)
fConnection.Connected := True; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-25T19:02:54.190

我考虑了一下，如果 ConnectTimeout 不起作用，那么你可以用另一种方式解决这个问题

首先在连接之前尝试通过例如 Indy 组件 ping dest 主机（如果这不是 localhost ;-)）或者更好地尝试 telnet 服务端口（也通过 Indy） - 我想这是最简单的想法，你现在可以做什么而不用杀死线程

# .net - 如何覆盖右键单击 winforms WebBrowser Control 时出现的 ContextMenu？

> ID：12170182
> 
> 赞同：3
> 
> 时间：2012-08-29T02:39:24.353
> 
> 标签：.net, winforms, browser, contextmenu

当您右键单击 WebBrowser 控件时，会出现带有“返回”、“查看源代码”等选项的标准 IE 上下文菜单。

如何让我自己的 ContextMenuStrip 出现？WebBrowser.ContextMenuStrip 不适用于此控件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T02:49:26.827

该站点上的许多其他解决方案听起来似乎很难做到，因为它是一个 COM 对象……并建议添加一个新类“ExtendedWebBrowser”。对于这项任务，事实证明它非常简单。

在添加 Web 浏览器控件的代码中，添加 DocumentCompleted 事件处理程序。

```
 WebBrowser webBrowser1 = new WebBrowser();
    webBrowser1.DocumentCompleted +=new WebBrowserDocumentCompletedEventHandler(webBrowser1_DocumentCompleted); 
```

定义这些事件处理程序（更改 contextMenuStrip 以匹配您创建的名称）。

```
 void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
    {
        WebBrowser browser = (WebBrowser) sender;
        browser.Document.ContextMenuShowing += new HtmlElementEventHandler(Document_ContextMenuShowing);
    }

    void Document_ContextMenuShowing(object sender, HtmlElementEventArgs e)
    {
        // If shift is held when right clicking we show the default IE control.
        e.ReturnValue = e.ShiftKeyPressed; // Only shows ContextMenu if shift key is pressed. 

        // If shift wasn't held, we show our own ContextMenuStrip
        if (!e.ReturnValue)
        {
            // All the MousePosition events seemed returned the offset from the form.  But, was then showed relative to Screen.
            contextMenuStripHtmlRightClick.Show(this, this.Location.X + e.MousePosition.X, this.Location.Y + e.MousePosition.Y); // make it offset of form
        }
    } 
```

注意：我的覆盖执行以下操作： * 如果在您右键单击时按住 shift，它会显示 IE 返回值。* 否则显示 contextMenuStripHtmlRightClick（此示例中未显示定义）

# asp.net - Error404 和 System.Web.Routing.RouteTable.Routes

> ID：12170183
> 
> 赞同：0
> 
> 时间：2012-08-29T02:39:27.450
> 
> 标签：asp.net, vb.net, routing, custom-errors

我在 Asp.net 4.0/vb.net 中使用路由，如下例所示：

```
rotas.MapPageRoute("test", "test/{detail}/{id}", "~/test/test.aspx") 
```

在 web.config 中设置了 customErrors：

```
<customErrors defaultRedirect="ErrorPage.htm" mode="On">
    <error statusCode="404" redirect="Error404.htm"/>
</customErrors> 
```

如果在未使用路由的情况下提交了无效的 url，则会正确显示 404 错误页面。示例：site/defaul2.aspx。

但是，如果我使用 site/test2/anything/123 之类的路由输入无效的 url，则会出现标准的 asp.net 404 错误页面，而不是我的 404 自定义页面 (Error404.htm)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T03:25:16.047

如果您使用的是 IIS7，您可能还必须在那里指定您的自定义错误页面。

单击站点并选择“错误页面”（在 IIS 列表中）并更改 404 和 500 的条目。

![在此处输入图像描述](../Images/450ae030676aa9290daca2d13b36e119.png)

这不是我在 IIS6 中必须执行的步骤，但 II6 确实需要 URL 路由的通配符处理程序，因此 ASP.NET 处理对非本地文件（即 jpg、png、pdf 等）的请求。默认情况下 IIS7 会执行此操作，但根据我的经验，这些资产不会推送到 ASP.NET 错误页面 - 这就是您必须明确设置这些错误页面的原因。

# c++ - 错误：找不到 World!.map：没有这样的文件或目录。使用 Atmel studio 6 和 CEENBot API

> ID：12170184
> 
> 赞同：0
> 
> 时间：2012-08-29T02:39:45.130
> 
> 标签：c++, c, atmel

所以我正在制作我的 Hello world 程序，它是这样的：

```
#include "lib-includes/capi324v221.h" 

void CBOT_main(void)
{   
    LCD_open();

    if (!LCD_OPEN) {

        while (true); // loop forever   
    }

    else {
        LCD_printf("Hello, World!");
        while(true); // loop forever
    }   
} 
```

有人能帮忙吗？如果有点含糊，我很抱歉；这是我所知道的大部分信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T02:57:27.220

首先，那些`while`循环在那里做什么？我的第一反应是摆脱那些。

我没有编程 CEENBots\your IDE 的个人经验，但根据问题标题中的错误描述，我怀疑你的源文件中有一个`!`搞砸了构建过程的文件（它抱怨一个`World!.map`文件，最好将特殊字符排除在外）文件名）。

编辑：为了扩展 Öö Tiib 下面的说明，也去掉空格和逗号：）

# mongodb - 多边形的 MongoDB 空间查询

> ID：12170186
> 
> 赞同：1
> 
> 时间：2012-08-29T02:39:58.017
> 
> 标签：mongodb, geospatial, polygon, postgis, srid

我将建立一个基于多边形的 GIS 系统，而不仅仅是点。我想使用 MongoDB 或 PostGIS。

在 MongoDB 中如何做到这一点？

![在此处输入图像描述](../Images/d2e0dcb90d61671ccfb173228f0af6fb.png)

查询 A - 获取多边形的中心

查询 B - 两个多边形之间的距离

查询 C - 我指定的三分之一的多边形列表

查询 D - 多边形的近距

支持 SRID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:58:47.660

MongoDB 的[地理空间索引](http://www.mongodb.org/display/DOCS/Geospatial+Indexing)目前仅索引点。尽管它确实支持邻近查询和边界查询，但文档是由一个点匹配的。您可能能够利用[多位置文档](http://www.mongodb.org/display/DOCS/Geospatial+Indexing/#GeospatialIndexing-MultilocationDocuments)并沿多边形索引多个点，这可能会支持您的某些查询，但精度会降低；但是，这肯定不理想。

PostGIS 似乎更适合您的要求。

# r - R集中数据框

> ID：12170193
> 
> 赞同：1
> 
> 时间：2012-08-29T02:40:26.187
> 
> 标签：r, for-loop, dataframe, iteration

我有一个这样的数据框

```
>X_com
  Day_1 Day_2 Day_3 Day_4 Day_5 Day_6 Day_7 Day_8 Day_9 Day_10
1     0     0     0     0     0     0     0     0     0      1
2     0     0     0     0     0     0     0     0     0      0
3     0     0     0     0     0     0     0     0     0      0
4     0     0     0     0     0     0     0     0     0      0
5     0     0     0     0     0     0     0     0     0      0
6     0     0     0     0     0     0     0     0     0      0
7     0     0     0     0     0     0     0     0     0      0
8     0     0     0     0     0     0     0     0     0      0 
```

我需要将所有值集中到一列中，并用“1”添加另一列；所以我做了这个

```
> X_new=matrix(1,8,2)
> X_new[1,]=paste(X_com[1,1], X_com[1,2],X_com[1,3],X_com [1,4],X_com[1,5],X_com[1,6],X_com[1,7],X_com[1,8],X_com [1,9],X_com[1,10], sep="")
> X_new[2,]=paste(X_com[2,1], X_com[2,2],X_com[2,3],X_com [2,4],X_com[2,5],X_com[2,6],X_com[2,7],X_com[2,8],X_com [2,9],X_com[2,10], sep="")
> X_new[3,]=paste(X_com[3,1], X_com[3,2],X_com[3,3],X_com [3,4],X_com[3,5],X_com[3,6],X_com[3,7],X_com[3,8],X_com [3,9],X_com[3,10], sep="")
> X_new[4,]=paste(X_com[4,1], X_com[4,2],X_com[4,3],X_com [4,4],X_com[4,5],X_com[4,6],X_com[4,7],X_com[4,8],X_com [4,9],X_com[4,10], sep="")
> X_new[5,]=paste(X_com[5,1], X_com[5,2],X_com[5,3],X_com [5,4],X_com[5,5],X_com[5,6],X_com[5,7],X_com[5,8],X_com [5,9],X_com[5,10], sep="")
> X_new[6,]=paste(X_com[6,1], X_com[6,2],X_com[6,3],X_com [6,4],X_com[6,5],X_com[6,6],X_com[6,7],X_com[6,8],X_com [6,9],X_com[6,10], sep="")
> X_new[7,]=paste(X_com[7,1], X_com[7,2],X_com[7,3],X_com [7,4],X_com[7,5],X_com[7,6],X_com[7,7],X_com[7,8],X_com [7,9],X_com[7,10], sep="")
> X_new[8,]=paste(X_com[8,1], X_com[8,2],X_com[8,3],X_com [8,4],X_com[8,5],X_com[8,6],X_com[8,7],X_com[8,8],X_com [8,9],X_com[8,10], sep="")
> X_new[1:8,2]="1;"
> as.data.frame(X_new)
          V1 V2
1 0000000001 1;
2 0000000000 1;
3 0000000000 1;
4 0000000000 1;
5 0000000000 1;
6 0000000000 1;
7 0000000000 1;
8 0000000000 1; 
```

我相信肯定有一种更快的方法可以实现这一目标，但不知道。

另一个问题是，我有一千多个这样的数据框需要集中。我仍在学习如何循环这些重复的步骤，但进展相当缓慢。如果原始数据框的名称是唯一的，这是否意味着我别无选择，只能单独处理每个数据框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T02:48:01.580

你的问题的症结可以解决`apply(x, 1, paste0, collapse = "")`

例如：

```
x <- as.data.frame(matrix(sample(0:1, 100, TRUE), ncol = 10))
apply(x, 1, paste0, collapse = "")
####
 [1] "1010001111" "1110001101" "1100100000" "0111000110" "0111101000" "0101100100"
 [7] "1110100110" "1001100010" "1101111011" "1101001111" 
```

您可能希望将其放入一个函数中，因为听起来您有很多 data.frames`lapply`来：

```
foo <- function(data, val) {
  collapse <- apply(data, 1, paste0, collapse = "")
  out <- data.frame(collapse, val)
  return(out)
  }

> foo(x,1)
     collapse val
1  1010001111   1
2  1110001101   1
3  1100100000   1
---- 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T02:45:51.443

我对此速度不做任何保证：

```
dat <- read.table(text = " Day_1 Day_2 Day_3 Day_4 Day_5 Day_6 Day_7 Day_8 Day_9 Day_10
+ 1     0     0     0     0     0     0     0     0     0      1
+ 2     0     0     0     0     0     0     0     0     0      0
+ 3     0     0     0     0     0     0     0     0     0      0
+ 4     0     0     0     0     0     0     0     0     0      0
+ 5     0     0     0     0     0     0     0     0     0      0
+ 6     0     0     0     0     0     0     0     0     0      0
+ 7     0     0     0     0     0     0     0     0     0      0
+ 8     0     0     0     0     0     0     0     0     0      0",header = TRUE,sep = "")
> data.frame(V1 = apply(dat,1,paste0,collapse = ""),V2 = "1;")
          V1 V2
1 0000000001 1;
2 0000000000 1;
3 0000000000 1;
4 0000000000 1;
5 0000000000 1;
6 0000000000 1;
7 0000000000 1;
8 0000000000 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T03:30:34.213

我发布了原始问题，但不小心删除了该帐户。所以我不能对答案发表评论。

只想说声谢谢。

另外我猜你的部分代码应该被编辑，其中“paste0”应该被替换为“paste”？

```
collapse <- apply(data, 1, paste, collapse = "") 
```

我需要的最后一列也是“1：”，您创建的函数也可以用作：

```
> foo(x, "1;")
     collapse val
1  0010111000  1;
2  0000110001  1;
3  1100100101  1;
4  1100011100  1;
5  1111001101  1;
6  1100000111  1;
7  0001001001  1;
8  1110000011  1;
9  1011011101  1;
10 1111111000  1; 
```

太感谢了。

# java - 如果 if 语句为真，则尝试打开活动

> ID：12170195
> 
> 赞同：1
> 
> 时间：2012-08-29T02:40:48.427
> 
> 标签：java, android, eclipse, sudoku

我正在研究 Hello Android book Sudoku 示例，并希望在游戏完成后创建一个祝贺对话框。在游戏课上，我检查是否有任何空白方块，然后在`PuzzleView`课堂上我试图检查游戏是否已解决。如果游戏完成，它应该会显示消息，但在创建意图时出现错误。

构造函数`Intent(PuzzleView, Class<Congratulations>)`未定义。

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) 
{

  if (game.isSolved()== true)
  {

     Intent i = new Intent(PuzzleView.this, Congratulations.class);
     startActivity(i); 
  }
  else
  {
     Log.d(TAG, "onKeyDown: keycode=" + keyCode + ", event="
     + event);
     /*MORE CODE GOES HERE*/ 
```

有人可以帮忙吗？编辑：-我认为我遇到的主要问题是尝试在扩展 View 的类中启动活动。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T02:46:02.237

**1.**请检查`PuzzleView`和`Congratulations`类是否**扩展了 Activity**。

**2.**确保您已在文件中**定义**了这些活动。`AndroidManifest.xml`

以为你知道，但我仍然会展示 Intent 语法....

```
Intent i = new Intent(Your_Current_Activity.this, Your_Desired_Activity.class);

startActivity(i); 
```

# sql - 已过去的天数百分比

> ID：12170202
> 
> 赞同：1
> 
> 时间：2012-08-29T02:42:49.037
> 
> 标签：sql, sql-server, sql-server-2008

我们正在根据目标测量实际值。我们有一天（24 小时）的总体目标，但我们需要计算任何给定时间的目标，以衡量我们“到目前为止”的进度。

显然，我们需要将总体目标与给定时间按比例分配；因此，如果是中午，则渐进式目标是每日目标的一半，而在早上 6 点，渐进式目标将是每日目标的四分之一 - 依此类推。

在 SQL 中执行此操作的最有效方法是什么？有一个明显的解决方案，但它不是很漂亮——理想情况下，我希望能够`DATETIME`在一次操作中将 a 转换为总毫秒数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T03:15:53.460

要获得一天完成的百分比，您可以执行以下操作：

```
select datediff(MILLISECOND, CONVERT(date, getdate()), GETDATE())/864000.0 
```

你真的需要毫秒吗？

# c# - 服务器上的Access数据库，安装使用access数据库的应用程序

> ID：12170205
> 
> 赞同：1
> 
> 时间：2012-08-29T02:42:58.417
> 
> 标签：c#, sql, ms-access

1）我正在开发一个桌面应用程序，它连接到一个访问数据库来存储一些信息。此访问数据库位于服务器上。我可以使用 FTP 序列访问该服务器。服务器还具有建立连接以访问数据库的能力。现在，我的应用程序将数据库文件下载到计算机上的一个文件夹中，对其进行编辑并将其放回服务器上。我真的很想知道是否可以连接到访问数据库，无需下载即可对其进行全部更改，以便节省时间。

2）如果不可能做到我在问题 1 中要求的事情。比如说，我与我的大学分享我的申请，我希望他们能够对数据库编辑做同样的事情。在我从我的项目中制作一个 .exe 文件并将其发送给他们之后。他们是否需要在我想要运行它的每台计算机上安装 ACE.oledb.12？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:24:16.537

如果您使用的只是 Jet/ACE，Access 通常使用的数据库，那么其他用户至少必须拥有免费的[驱动程序](http://www.microsoft.com/en-ie/download/details.aspx?id=13255)，或者如果您在 Access 本身中工作，您将需要[运行时](http://www.microsoft.com/en-ie/download/search.aspx?q=access%20runtime)，也是免费的.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T08:09:10.863

由于 Access 是基于文件的系统而不是专用数据库服务器，因此“远程连接”并不完全存在，因为所有数据处理都必须在本地完成。但是，只要您能够将 VPN 设置到存储访问文件的服务器，或者甚至更好地将路径映射为网络驱动器，那么您应该能够访问它而无需先下载文件。如果您只有 FTP 访问权限，那么这是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T20:37:22.193

实际上，您使用的术语是错误的。您没有连接到 word 文件。您没有连接到电源点文件。

因此，您必须记住，您并没有真正连接到恰好位于硬盘驱动器上的某些文本文件或 mdb 文件。

因此，您只是打开一个文件。

我的意思是说我们连接到一个 word 文件，或者我们连接到一个 Power point 文件是愚蠢的。那么对于办公套件和那些驻留在磁盘驱动器上的基本简单文件来说呢？

我们正在谈论平面简窗口文件。

马是马是马。

文件是文件是文件。

因此，您无需连接到硬盘上的 jpg 文件，而是打开 jpg 文件。因此，如果您谈论您当前的设置，最好在此处使用正确的术语。您没有连接到该 Access accDB 文件，但实际上正在打开一个 PLANE JANE windows 文件。如果您仔细查看您的连接字符串，它将始终在其中包含一个完全限定的 Windows 路径名，该路径名解析为位于文件夹中的文件。

因此，如果您将该文件放在某个服务器上，例如 Web 服务器，那么您仍然需要打开该 Windows 文件。这与想要打开一个 power point 文件没有任何不同。这意味着如果您要通过 Internet 连接，那么您需要扩展 Windows 文件系统（这意味着您需要某种 VPN）。归根结底，如果您无法使用 Windows 网络浏览并打开该文件所在的文件夹，那么您将无法使用 Access（或更具体地讲，在您的情况下是 JET 数据引擎）打开该文件。

因此，例如，如果文件所在的服务器是非 windows 机器，例如 Linux，那么您需要在该机器上“添加或使用”或“安装”windows 文件和网络系统。Linux 中的一个常见选择是在该计算机上安装和运行 Samba。

请记住，在使用 SQL Server 的情况下，您将连接到在该服务器上运行的 SERVICE。在这种情况下，您不会在远程机器上打开文件，而只是使用套接字（TCP/IP）连接到某些服务。因此，在这种情况下，您不只是打开一个恰好是该系统上的 accdb 文件的愚蠢的旧 Windows 文件。

因此，当您使用 FTP 或 http 时，这些不是真正的“windows”网络系统，允许您打开 + 使用平面 Jane windows 文件。

FTP 将要求将整个文件下载到本地。

问题！如果网站或 Web 服务器打开了 accDB 文件，那么在上传和覆盖文件之前，如何让 Web 服务器关闭文件？换句话说，如果该文件是由网络服务器打开的，那么在服务器和网站关闭文件之前，您不应该制作副本甚至通过 FTP 下载副本！这意味着您在执行此操作时需要停止 Web 服务器的权限！

因此，请记住这里的概念，即您没有连接到某个文件，而只是要打开文件。您需要能够打开该文件，并且您需要使用 Windows 网络系统在 Access 的情况下执行此打开文件。我的意思是，您不必在目标计算机上安装 Access(JET)。您不必在目标计算机上安装 Power Point 即可打开 Power Point 文件。

您不必在该系统上安装 word 即可打开 word 文件。

您不必在该系统上安装 Excel 即可打开 Excel 文件。

所以你只是打开一个恰好在其他计算机上的文件。

因此，必须在您的计算机上安装 Access 数据库引擎和软件（此处不能使用 .exe）。您当然可以将您的应用程序打包为可安装的 Windows 应用程序，然后可以安装在每台计算机上。因此，可以使用 Access 运行时的免费版本，但您仍然必须在使用 Access 的计算机上安装该免费版本的 Access，即使它是免费运行时版本。然而，这些天来，我真的不知道有任何流行的开发系统只生成 .exe 文件而不需要某种运行时，无论是 .net、VB6、Java，或者在这种情况下是 Access——所以某种支持和运行时在当今使用的大多数系统中，文件是非常普遍的要求。

所以，请记住，您正在打开一个平面 Jane windows 文件。

因此，您的 http 或 FTP 路径名不是允许的 Windows 路径名，也不是 Windows 文件/网络系统。因此，路径名与 Windows 网络和打开位于硬盘上的简单文件无关。所以 HTTP 或 FTP 等不是基于 windows 网络和文件系统的。

我不认为这个基本概念太难掌握，但归根结底，你需要掌握和学习的概念是，当你打开硬盘上文件夹中的 Windows 文件时，你会需要windows文件系统来打开这些文件。在文件夹中打开文件的想法和概念对您来说可能是新的，但这是解决此问题所需的基本要求和理解。

如前所述，您可以考虑使用 VPN，但我在本文中解释了为什么这样的设置不起作用：

使用带有 ms-access 的 wan？多快，多远？

[http://www.kallal.ca/Wan/Wans.html](http://www.kallal.ca/Wan/Wans.html)

（请阅读上面的内容——因为它解释了你可以通过互联网打开这些文件，但也解释了这种连接太慢了！——记住高速互联网对于这种用途来说太慢了！）。

我想另一种可能性是考虑 Access 具有的新网络发布能力。在以下视频中，请注意我如何切换到在浏览器中 100% 运行 Access 应用程序。生成的应用程序不需要任何 ActiveX 或 Silverlight。所以网页在我的智能手机甚至我的 iPad 上运行 + 工作正常。

[http://www.youtube.com/watch?v=AU4mH0jPntI](http://www.youtube.com/watch?v=AU4mH0jPntI)

因此，您可以使用新的网络发布功能，这将允许使用 http: 来使用应用程序

# javascript - 使用 javascript 保存为字符串的两次时间之间的差异

> ID：12170209
> 
> 赞同：3
> 
> 时间：2012-08-29T02:43:17.037
> 
> 标签：javascript, jquery, asp.net, timepicker

我有两个时间选择器 jquery 控件，它们的时间格式为“上午 10 点”、“上午 11 点”、“下午 12 点”等。如何区分这两个时间选择。

例如，如果我在第一个控件中选择上午 10 点，在第二个控件中选择下午 1 点，我需要小时差为 3。我如何在 javascript 中执行此操作。

```
var FirstTime = container.find('#1time').val();
var SecondTime = container.find('#2time').val();

alert(FirstTime); // 11 AM
alert(SecondTime);// 1 PM

var diff = (SecondTime - FirstTime); // Need value of 3 here.. 
```

我可以将时间选择器控件设置为军用时间格式并对其进行解析以获取数字并获得差异。但这不是一个选择。我知道这些数字被保存为带有 AM 和 PM 的字符串.. 有没有好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T02:51:16.810

你可以这样做：

```
var time1;
var time2;
if (FirstTime.split(' ')[1] === "PM") {
    time1 = parseInt(FirstTime.split(' ')[0])+ 12;
}else{
    time1 = parseInt(FirstTime.split(' ')[0])
}

if (SecondTime.split(' ')[1] === "PM") {
    time2 = parseInt(SecondTime.split(' ')[0])+ 12
}else{
    time2 = parseInt(SecondTime.split(' ')[0])
}

diff = time2 - time1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T02:56:21.590

```
function timeDiff( first, second ) {
    var f = first.split(' '), s = second.split(' ');

    if( first == '12 AM' ) f[0] = '0';
    if( first == '12 PM' ) f[1] = 'AM';
    if( second == '12 AM' ) s[0] = '24';
    if( second == '12 PM' ) s[1] = 'AM';

    f[0] = parseInt( f[0], 10 ) + (f[1] == 'PM' ? 12 : 0);
    s[0] = parseInt( s[0], 10 ) + (s[1] == 'PM' ? 12 : 0);

    return s[0] - f[0];
}

var FirstTime = container.find('#1time').val();
var SecondTime = container.find('#2time').val();

alert(FirstTime); // 11 AM
alert(SecondTime);// 1 PM

var diff = timeDiff( FirstTime, SecondTime ); 
```

[**演示**](http://jsfiddle.net/qUW2R/1/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T03:44:39.233

由于 12h 时钟符号不区分特定一天开始时的午夜和结束时的午夜，因此如果在第一个变量中使用它，下面的函数假定这`12 AM`意味着*一天的开始，以及**结束时*如果在第二个变量中使用日期*。*这意味着`'12 AM' - '12 AM' = 24`.

```
function timeDiff( first, second ) {
  function to24h(value) {
    value = value.split(' ');
    return (value[0] % 12) + (value[1]==='PM' ? 12:0);
  }
  return (to24h(second)||24) - to24h(first);
} 
```

# c# - 无法消除 Windows 8 Metro 'ListView' 中 Tiles 之间的填充/边距

> ID：12170212
> 
> 赞同：9
> 
> 时间：2012-08-29T02:43:46.130
> 
> 标签：c#, xaml, listview, windows-8, padding

我正在尝试`ListView`在 a 中构建两个对象，`StackPanel`并让所有`ItemTemplate`Tiles “接触”彼此（意味着`ListView`s 内没有边距或填充）。似乎 Windows 8 Metro 有某种内置的填充/边距。**我的问题：**如何删除这些或将它们设置为`0`？

这是我的代码：

```
<StackPanel x:Name="teesSP" 
            HorizontalAlignment="Left" 
            Orientation="Horizontal" 
            VerticalAlignment="Top" >

    <ListView x:Name="timesLV1"            
              SelectionMode="Multiple" 
              SelectionChanged="timesLV_Click" 
              ItemTemplate="{StaticResource TimeTileTemplate}">
        <ListView.ItemContainerStyle>
            <Style TargetType="ListViewItem">
                <Setter Property="Padding" Value="0"/>
                <Setter Property="Margin" Value="0"/>
            </Style>
        </ListView.ItemContainerStyle>
    </ListView>

    <ListView x:Name="timesLV2"            
              SelectionMode="Multiple" 
              SelectionChanged="timesLV_Click" 
              ItemTemplate="{StaticResource TimeTileTemplate}">
        <ListView.ItemContainerStyle>
            <Style TargetType="ListViewItem">
                <Setter Property="Padding" Value="0"/>
                <Setter Property="Margin" Value="0"/>
            </Style>
        </ListView.ItemContainerStyle>
    </ListView>

</StackPanel> 
```

我`ItemTemplate`的是：

```
<DataTemplate x:Key="TimeTileTemplate">
    <Grid HorizontalAlignment="Center" Background="White" >
        <Border BorderBrush="Black" BorderThickness="2" >
            <StackPanel Margin="0,0,0,0" Orientation="Horizontal"
                Width="130" Height="60" VerticalAlignment="Center" >
                <TextBlock Margin="2,0,0,0" TextWrapping="Wrap"
                    Style="{StaticResource ItemSubtitleStyle}"
                    VerticalAlignment="Center"
                    HorizontalAlignment="Left"
                    Text="{Binding startTime}" Width="70" />
                <TextBlock TextWrapping="Wrap"
                    Style="{StaticResource ItemTitleStyle}"
                    VerticalAlignment="Center"
                    HorizontalAlignment="Right"
                    Text="{Binding startHole}" Width="40" />
            </StackPanel>
        </Border>
    </Grid>
</DataTemplate> 
```

...它呈现以下内容：

![带边距/填充的 ListView](../Images/0b0b4d59281c831ea10ad0527f1cfedd.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T06:51:03.090

你应该提供一个否定`Margin`：

```
<ListView.ItemContainerStyle>
   <Style TargetType="ListViewItem">
      <Setter Property="HorizontalContentAlignment" Value="Left" />
      <Setter Property="VerticalContentAlignment" Value="Center" />
      <Setter Property="Margin" Value="0,0,0,-8" />
   </Style>
</ListView.ItemContainerStyle> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-07-16T09:39:13.860

经过1小时的搜索。这是比负边距更好的解决方案：

以下代码可让您拥有所需的边距！（这里：0）

```
<Style x:Key="ListViewItemStyle1" TargetType="ListViewItem">
   <Setter Property="Template">
      <Setter.Value>
         <ControlTemplate TargetType="ListViewItem">
            <ListViewItemPresenter ContentMargin="0" />
          </ControlTemplate>
      </Setter.Value>
    </Setter>            
</Style> 
```

...

```
<ListView ItemContainerStyle="{StaticResource ListViewItemStyle1}">
 //your listView items
</ListView> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-09-22T21:37:55.910

我已经为这个问题找到了相当明确的解决方案！

```
<Style x:Key="NoSpacesListViewItemStyle" TargetType="ListViewItem">
    <Setter Property="Margin" Value="0"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ListViewItem">
                <ListViewItemPresenter ContentMargin="0" SelectionCheckMarkVisualEnabled="False" />
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<ListView     IsSwipeEnabled="False"
              ItemContainerStyle="{StaticResource NoSpacesListViewItemStyle}"
              ItemTemplate="{StaticResource SomeTemplate}"
              ItemsSource="{Binding SomeData}"
              SelectionMode="None"/> 
```

我也可以承认选择边框在这种情况下不起作用。所以这个方法不适合有选择的ListViews。

有完整的默认 ListViewItemStyle 具有相同的更改：

```
<Style x:Key="NoSpacesListViewItemStyle" TargetType="ListViewItem">
    <Setter Property="FontFamily" Value="{ThemeResource ContentControlThemeFontFamily}" />
    <Setter Property="FontSize" Value="{ThemeResource ControlContentThemeFontSize}" />
    <Setter Property="Background" Value="Transparent" />
    <Setter Property="TabNavigation" Value="Local" />
    <Setter Property="IsHoldingEnabled" Value="True" />
    <Setter Property="Margin" Value="0" />
    <Setter Property="HorizontalContentAlignment" Value="Left" />
    <Setter Property="VerticalContentAlignment" Value="Top" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ListViewItem">
                <ListViewItemPresenter HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
                                       VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
                                       CheckBrush="{ThemeResource ListViewItemCheckThemeBrush}"
                                       CheckHintBrush="{ThemeResource ListViewItemCheckHintThemeBrush}"
                                       CheckSelectingBrush="{ThemeResource ListViewItemCheckSelectingThemeBrush}"
                                       ContentMargin="0"
                                       ContentTransitions="{TemplateBinding ContentTransitions}"
                                       DisabledOpacity="{ThemeResource ListViewItemDisabledThemeOpacity}"
                                       DragBackground="{ThemeResource ListViewItemDragBackgroundThemeBrush}"
                                       DragForeground="{ThemeResource ListViewItemDragForegroundThemeBrush}"
                                       DragOpacity="{ThemeResource ListViewItemDragThemeOpacity}"
                                       FocusBorderBrush="{ThemeResource ListViewItemFocusBorderThemeBrush}"
                                       Padding="{TemplateBinding Padding}"
                                       PlaceholderBackground="{ThemeResource ListViewItemPlaceholderBackgroundThemeBrush}"
                                       PointerOverBackground="{ThemeResource ListViewItemPointerOverBackgroundThemeBrush}"
                                       PointerOverBackgroundMargin="1"
                                       ReorderHintOffset="{ThemeResource ListViewItemReorderHintThemeOffset}"
                                       SelectedBackground="{ThemeResource ListViewItemSelectedBackgroundThemeBrush}"
                                       SelectedBorderThickness="{ThemeResource ListViewItemCompactSelectedBorderThemeThickness}"
                                       SelectedForeground="{ThemeResource ListViewItemSelectedForegroundThemeBrush}"
                                       SelectedPointerOverBackground="{ThemeResource ListViewItemSelectedPointerOverBackgroundThemeBrush}"
                                       SelectedPointerOverBorderBrush="{ThemeResource ListViewItemSelectedPointerOverBorderThemeBrush}"
                                       SelectionCheckMarkVisualEnabled="False" />
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T04:35:01.530

是的，ListViewItem 控件的模板中有一个 4px 的边距（看看`ContentBorder`元素）：

```
<Border x:Name="OuterContainer">
    <!-- Visual States -->
    <Grid x:Name="ReorderHintContent" Background="Transparent">
        <Path x:Name="SelectingGlyph" Data="F1 M133.1,17.9 L137.2,13.2 L144.6,19.6 L156.4,5.8 L161.2,9.9 L145.6,28.4 z" Fill="{StaticResource ListViewItemCheckSelectingThemeBrush}" FlowDirection="LeftToRight" HorizontalAlignment="Right" Height="13" Margin="0,9.5,9.5,0" Opacity="0" Stretch="Fill" VerticalAlignment="Top" Width="15"/>
        <Border x:Name="HintGlyphBorder" HorizontalAlignment="Right" Height="40" Margin="4" Opacity="0" VerticalAlignment="Top" Width="40">
            <Path x:Name="HintGlyph" Data="F1 M133.1,17.9 L137.2,13.2 L144.6,19.6 L156.4,5.8 L161.2,9.9 L145.6,28.4 z" Fill="{StaticResource ListViewItemCheckHintThemeBrush}" FlowDirection="LeftToRight" HorizontalAlignment="Right" Height="13" Margin="0,5.5,5.5,0" Opacity="0" Stretch="Fill" VerticalAlignment="Top" Width="15"/>
        </Border>
        <Border x:Name="ContentContainer">
            <Grid x:Name="InnerDragContent">
                <Rectangle x:Name="PointerOverBorder" Fill="{StaticResource ListViewItemPointerOverBackgroundThemeBrush}" IsHitTestVisible="False" Margin="1" Opacity="0"/>
                <Rectangle x:Name="FocusVisual" IsHitTestVisible="False" Opacity="0" Stroke="{StaticResource ListViewItemFocusBorderThemeBrush}" StrokeThickness="2"/>
                <Rectangle x:Name="SelectionBackground" Fill="{StaticResource ListViewItemSelectedBackgroundThemeBrush}" Margin="4" Opacity="0"/>
                <Border x:Name="ContentBorder" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Margin="4">
                    <Grid>
                        <ContentPresenter x:Name="contentPresenter" ContentTemplate="{TemplateBinding ContentTemplate}" ContentTransitions="{TemplateBinding ContentTransitions}" Content="{TemplateBinding Content}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                        <TextBlock x:Name="PlaceholderTextBlock" Foreground="{x:Null}" IsHitTestVisible="False" Margin="{TemplateBinding Padding}" Opacity="0" Text="Xg"/>
                        <Rectangle x:Name="PlaceholderRect" Fill="{StaticResource ListViewItemPlaceholderBackgroundThemeBrush}" IsHitTestVisible="False" Visibility="Collapsed"/>
                        <Rectangle x:Name="MultiArrangeOverlayBackground" Fill="{StaticResource ListViewItemDragBackgroundThemeBrush}" IsHitTestVisible="False" Opacity="0"/>
                    </Grid>
                </Border>
                <Rectangle x:Name="SelectedBorder" IsHitTestVisible="False" Margin="4" Opacity="0" Stroke="{StaticResource ListViewItemSelectedBackgroundThemeBrush}" StrokeThickness="{StaticResource ListViewItemSelectedBorderThemeThickness}"/>
                <Border x:Name="SelectedCheckMarkOuter" HorizontalAlignment="Right" IsHitTestVisible="False" Margin="4" VerticalAlignment="Top">
                    <Grid x:Name="SelectedCheckMark" Height="40" Opacity="0" Width="40">
                        <Path x:Name="SelectedEarmark" Data="M0,0 L40,0 L40,40 z" Fill="{StaticResource ListViewItemSelectedBackgroundThemeBrush}" Stretch="Fill"/>
                        <Path Data="F1 M133.1,17.9 L137.2,13.2 L144.6,19.6 L156.4,5.8 L161.2,9.9 L145.6,28.4 z" Fill="{StaticResource ListViewItemCheckThemeBrush}" FlowDirection="LeftToRight" HorizontalAlignment="Right" Height="13" Margin="0,5.5,5.5,0" Stretch="Fill" VerticalAlignment="Top" Width="15"/>
                    </Grid>
                </Border>
                <TextBlock x:Name="MultiArrangeOverlayText" Foreground="{StaticResource ListViewItemDragForegroundThemeBrush}" FontSize="26.667" FontFamily="{StaticResource ContentControlThemeFontFamily}" IsHitTestVisible="False" Margin="18,9,0,0" Opacity="0" TextWrapping="Wrap" Text="{Binding TemplateSettings.DragItemsCount, RelativeSource={RelativeSource Mode=TemplatedParent}}" TextTrimming="WordEllipsis"/>
            </Grid>
        </Border>
    </Grid>
</Border> 
```

您可以通过此模板编辑轻松覆盖这些边距。选择一个 ListViewEditItem 并执行`Edit Style->Edit a Copy...`操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T04:23:10.253

编辑：显然它在 ListView 模板中。在 VS2012 RTM 附带的 Blend 2012 中编辑它。

转到 Blend，创建一个模板副本，然后转到 VS2012 XAML 中的 xaml 转到顶部并转到 Margin 并将它们全部设置为 0。

# sql-server-2008 - 清除 SQL Server 服务代理队列

> ID：12170222
> 
> 赞同：0
> 
> 时间：2012-08-29T02:44:45.953
> 
> 标签：sql-server-2008, service-broker

我在 SQL 2008R2 服务器上设置了服务代理队列，并且正在尝试清空队列。我正在运行[此处指定的脚本](http://social.msdn.microsoft.com/Forums/uk/sqlservicebroker/thread/633004f7-b0fa-443b-8e17-e888a9d11b15)，该脚本过去一直有效，但现在尽管运行了此队列，但队列并未被清空。

有没有更好的方法来清空队列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T08:47:53.547

清空队列的更好方法是在处理完所有消息后始终结束对话和两端（两个服务）。在这种情况下，消息将从队列中删除。

在您运行脚本时，是否有其他事务正在处理消息？

# sql-server - Delphi TADOStoredProc / D6 和 RAD Studio XE2 最近的故障

> ID：12170228
> 
> 赞同：12
> 
> 时间：2012-08-29T02:45:28.543
> 
> 标签：sql-server, delphi, delphi-xe2, delphi-6

感谢任何可以提供帮助的人...

**背景：**

我有一个应用程序在 Borland Delphi v6 中编码并且仍然受支持。最近，我遇到了 TADStoredProc 类无法执行存储过程的问题。这段代码之前已经稳定了好几年，从未被修改过。

我可以在请求上配置超时，这是受尊重的，但是存储过程调用永远不会运行，即使超时时间很长。应用程序只是挂起，或因超时异常而退出。（我知道服务器没有负担过重，并响应同一客户端发起的其他 SQL SELECT 请求。）

我知道D6很旧。我确实有一个使用 Embarcadero RAD Studio XE2 的单独环境，在那里我设法构建了相同的项目，但仍然存在相同的问题。... 只想确认一下。

**去哪儿？**

*   请查看提供的代码，看看是否有更好的方法来做事。（也许 MSSQL 界面更挑剔，最近更新后？）我当然欢迎推荐。
*   是否有另一种方法可以插入应用程序，可靠且不需要 TADStoredProc？我已经完成了挖掘，但没有找到任何好的例子。

**代码示例**

```
function TImport.OpenHeader(DriverID: Integer, …, ScanStart: DateTime, ...): integer;
var
    suid: integer;
    jid: integer;

    con : TADOConnection;
    sp : TADOStoredProc;
begin
    suid := getScanUnitID();
    jid := deriveJobID(ScanStart);

    con := TADOConnection.Create(nil);
    con.LoginPrompt := false;
    con.ConnectionString :=  'Provider=SQLOLEDB.1;Password=<testPwd>;Persist Security Info=True;User ID=<testUser>;Initial Catalog=<myDB>;Data Source=<myServer>';
    con.CommandTimeout := 10;
    con.KeepConnection := true;
    con.Connected := true;

    sp := TADOStoredProc.Create(nil);
    sp.Connection := con;
    sp.CommandTimeout := 10;
    sp.ProcedureName := 'mon4_OpenHeader;1';
    sp.Parameters.Refresh;

    sp.Parameters.ParamByName('@ScanUnitID').Value := suid;
    sp.Parameters.ParamByName('@JobID').Value := jid;
    sp.Parameters.ParamByName('@DriverID').Value := DriverID;
    //[…]

    sp.Parameters.ParamByName('@Result').Direction := pdOutput; //returned from stored proc

    sp.ExecProc;

    Result := sp.Parameters.ParamByName('@Result').Value;
    sp.Free;
    con.Free;
end; // end OpenHeader(DriverID: Integer, …, ScanStart: DateTime, …): integer 
```

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T12:38:56.800

尝试使用 SQL Server Native Client 10.0 OLE DB Provider

```
Provider=SQLNCLI10;Server=myServerAddress;Database=myDataBase;Uid=myUsername;
Pwd=myPassword; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-13T10:52:30.867

您可以尝试在`.1`之后简单地删除它，`SQLOLEDB`因为它只是指定要使用的版本号。

```
con.ConnectionString :=  'Provider=SQLOLEDB;Password=<testPwd>;Persist Security Info=True;User ID=<testUser>;Initial Catalog=<myDB>;Data Source=<myServer>'; 
```

您应该考虑切换到较新的`SQLNCLI`驱动程序。

您尚未指定 windows 服务器版本、sql server 版本或客户端 windows 版本，但是：
`SQLOLEDB`应该也存在于较新的系统中以实现向后兼容性；
`SQLNCLI`应该与 SQL Server 2005 一起提供；
`SQLNCLI10`应该与 SQL Server 2008 一起提供；
`SQLNCLI11`应与 SQL Server 2012 和 2014 一起提供；
`SQLNCLI13`应与 SQL Server 2016 一起提供；

请注意**32/64 位**版本的驱动程序，因为要与 32 位 sql server 通信，您需要 32 位驱动程序，反之亦然。

确保在您的客户端上安装了正确的驱动程序。

**Microsoft® SQL Server® 2016 Feature Pack**
Windows 8、8.1、10、Windows Server 2012、2012 R2、2016
[https://www.microsoft.com/en-us/download/details.aspx?id=52676](https://www.microsoft.com/en-us/download/details.aspx?id=52676)
你会发现两者x86/x64 版本的 sqlncli.msi

**Microsoft® SQL Server® 2012 Native Client**
Windows 7、8、8.1、10、Windows Server 2008 R2、2012、2012 R2
[https://www.microsoft.com/en-us/download/details.aspx?id=50402](https://www.microsoft.com/en-us/download/details.aspx?id=50402)
您将找到 sqlncli.msi 的 x86/x64 版本

**Microsoft® SQL Server® 2008 R2 Native Client**
Windows Vista、XP、7、Windows Server 2003、2008、2008 R2
x86 包：http: [//go.microsoft.com/fwlink/](http://go.microsoft.com/fwlink/?LinkID=188400&clcid=0x409)
?LinkID=188400&clcid=0x409 x64 包：[http： //go.microsoft.com/fwlink/?LinkID=188401&clcid=0x409](http://go.microsoft.com/fwlink/?LinkID=188401&clcid=0x409)

还要注意[OLEDB/ODBC 生命周期](https://blogs.msdn.microsoft.com/sqlreleaseservices/snac-lifecycle-explained/%20OLEDB/ODBC%20Lifecycle)，OLEDB 被宣布弃用以切换到最新的 ODBC 驱动程序，但去年 10 月它被重新声明[为 undeprecated](https://blogs.msdn.microsoft.com/sqlnativeclient/2017/10/06/announcing-the-new-release-of-ole-db-driver-for-sql-server/%20undeprecated)。

# java - 为什么我从 WebSocket 客户端获得两个连接？一是“空”

> ID：12170230
> 
> 赞同：2
> 
> 时间：2012-08-29T02:45:37.113
> 
> 标签：java, websocket, serversocket

当我从 Java 打开到我的 websocket 服务器应用程序的 websocket 连接时，服务器会看到两个连接。第一个从不发送任何数据，第二个发送所有正确的标头等。有人知道这是什么原因吗？

客户端连接是：

```
var websocket = new WebSocket( "ws://192.168.1.19:3333/websession" ); 
```

在服务器端，在一个while循环中，我调用“serverSocket.accept()”，这被调用了两次。但是其中一个从不发送任何数据（ in.read() 最终只是超时而没有返回任何内容）。

**JAVA服务器代码**

```
import java.net.*;
import java.io.*;
import java.security.*;

public class WebListener {

    public static void main(String[] args) throws Exception {
        ServerSocket serverSocket = null;
        boolean listening = true;

        try {
            serverSocket = new ServerSocket(4444);
        } catch (IOException e) {
            System.err.println("Could not listen on port: 4444.");
            System.exit(-1);
        }

        while (listening) new ServerThread(serverSocket.accept()).start();

        serverSocket.close();
    }
}

class ServerThread extends Thread {
    private Socket socket = null;

    public ServerThread(Socket socket) {
        super("ServerThread");
        this.socket = socket;
    }

    public void run() {

        try {
            OutputStream outStream = null;
            PrintWriter out = new PrintWriter( outStream = socket.getOutputStream(), true);
            BufferedReader in = new BufferedReader( new InputStreamReader( socket.getInputStream()));

            String inputLine, outputLine;

            //Handle the headers first
            doHeaders( out, in );

            // ..elided..

            out.close();
            in.close();
            socket.close();

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public void doHeaders(PrintWriter out, BufferedReader in) throws Exception {
        String inputLine = null;
        String key = null;

        //Read the headers
        while ( ( inputLine = in.readLine() ) != null ) {
            //Get the key
            if ( inputLine.startsWith( "Sec-WebSocket-Key" ) ) 
                key = inputLine.substring( "Sec-WebSocket-Key: ".length() );

            //They're done
            if ( inputLine.equals( "" ) ) break;
        }

        //We need a key to continue
        if ( key == null ) throw new Exception( "No Sec-WebSocket-Key was passed!" );

        //Send our headers
        out.println( "HTTP/1.1 101 Web Socket Protocol Handshake\r" );
        out.println( "Upgrade: websocket\r" );
        out.println( "Connection: Upgrade\r" );
        out.println( "Sec-WebSocket-Accept: " + createOK( key ) + "\r" );
        out.println( "\r" );
    }

    public String createOK(String key) throws NoSuchAlgorithmException, UnsupportedEncodingException, Exception {
        String uid = "258EAFA5-E914-47DA-95CA-C5AB0DC85B11";
        String text = key + uid;

        MessageDigest md = MessageDigest.getInstance( "SHA-1" );
        byte[] sha1hash = new byte[40];
        md.update( text.getBytes("iso-8859-1"), 0, text.length());
        sha1hash = md.digest();

        return new String( base64( sha1hash ) );
    }

    public byte[] base64(byte[] bytes) throws Exception {
        ByteArrayOutputStream out_bytes = new ByteArrayOutputStream();
        OutputStream out = new Base64.OutputStream(out_bytes); //Using http://iharder.net/base64
        out.write(bytes);
        out.close();

        return out_bytes.toByteArray();
    }

    private String convertToHex(byte[] data) { 
        StringBuffer buf = new StringBuffer();
        for (int i = 0; i < data.length; i++) { 
            int halfbyte = (data[i] >>> 4) & 0x0F;
            int two_halfs = 0;
            do { 
                if ((0 <= halfbyte) && (halfbyte <= 9)) 
                    buf.append((char) ('0' + halfbyte));
                else 
                    buf.append((char) ('a' + (halfbyte - 10)));
                halfbyte = data[i] & 0x0F;
            } while(two_halfs++ < 1);
        } 

        return buf.toString();
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:54:37.663

这看起来是 Firefox 的一个错误。在 Chrome 中它只打开一个连接，而在 Firefox 15 中的同一页面打开两个连接。

# php - 使用数组唯一的数组

> ID：12170232
> 
> 赞同：0
> 
> 时间：2012-08-29T02:45:39.180
> 
> 标签：php, arrays, multidimensional-array

我的php代码如下：

```
<?php
    $conn = mysql_connect("localhost","root","") or die(mysql_error());
    mysql_select_db("dbcsv",$conn);
    $data = array();
    $sql = "select orig,dlvSourceIp from tblcsv group by dlvSourceIp";
    $res = mysql_query($sql) or die(mysql_error());
     echo '<table border="1px">';
     echo "<tr><td>Dormain</td><td>ip of the domain</td><td>Total Mail</td><td>Mail Fail</td><td>Percentage</td></tr>";
        while($data = mysql_fetch_array($res)){
             //echo "<tr><td>".$data['orig']."</td><td>".$data['dlvSourceIp']."</td><td></td><td></td></tr>";
            $t = $data['orig'];
             $getData = array_unique($t);
             var_dump($getData);
}
?> 
```

**笔记**

因为`$data['orig']`是我从数据库中选择的数据数组，它将显示：`cat cat dog cat dog`. 我想要这样的输出：`cat dog`这就是我使用数组唯一的原因。

**问题：**

我收到错误消息`array_unique() expects parameter 1 to be array, null given in C:\wamp\www\CountLine_CSV\csv2mysql.php on line 21`如何解决？请任何人帮助我，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T03:05:41.367

您的数组作为字符串值存储到表中（所以我认为）。您需要获取条目`explode`并创建一个数组，然后使用它`array_unique`来获得您想要的效果。尝试以下方法，看看它是否有效：

```
$t = $data['orig']
$array = explode(" ", $t);
$array = array_unique($array);
print_r($array); 
```

此外，请考虑使用 MySQLi 或 PDO 进行查询。

所以总的来说，类似以下的内容就足够了：

```
<?php   
    $mysqli_connection = new mysqli("hostname", "username", "password", "database");
    if ($mysqli_connection->connect_errno) {
        echo ("Connection Failure");
        exit();
    }

    $sql = "SELECT orig, dlvSourceIp FROM tblcsv GROUP BY dlvSourceIp";
    echo '<table border="1px">';
    echo "<tr><td>Dormain</td><td>ip of the domain</td><td>Total Mail</td><td>Mail Fail</td><td>Percentage</td></tr>";
    while($data = $sql->fetch_array(MYSQLI_ASSOC)) {
        $t = $mysqli_connection->real_escape_string($data['orig']);
        $array = explode(" ", $t);
        $array = array_unique($array);
        // Do something with the array, or:
        print_r($array);
    }
    $sql->free();
    $mysqli_connection->close();
?> 
```

# java - 引用一个列表上的类新手困惑

> ID：12170238
> 
> 赞同：2
> 
> 时间：2012-08-29T02:46:22.863
> 
> 标签：java, android

我在这个[网站上](http://www.vogella.com/articles/AndroidLiveWallpaper/article.html)学习动态壁纸。但是有些东西我不明白。

本教程代码中的示例有一个名为 MyPoint 的类

```
public class MyPoint {
  String text;
  private int x;
  private int y;

  public MyPoint(String text, int x, int y) {
    this.text = text;
    this.x = x;
    this.y = y;
  }
} 
```

然后在他创建了一个 MyWallpaperService 类之后。在那个类里面有一行这样的代码

```
 private List<MyPoint> circles;
    private Paint paint = new Paint();
    private int width;
    int height;
    private boolean visible = true;
    private int maxNumber;
    private boolean touchEnabled;

public MyWallpaperEngine() {
  SharedPreferences prefs = PreferenceManager
      .getDefaultSharedPreferences(MyWallpaperService.this);
  maxNumber = Integer
      .valueOf(prefs.getString("numberOfCircles", "4"));
  touchEnabled = prefs.getBoolean("touch", false);
  circles = new ArrayList<MyPoint>();
  paint.setAntiAlias(true);
  paint.setColor(Color.WHITE);
  paint.setStyle(Paint.Style.STROKE);
  paint.setStrokeJoin(Paint.Join.ROUND);
  paint.setStrokeWidth(10f);
  handler.post(drawRunner);
} 
```

可以看到部分代码有

```
private List<MyPoint> circles; 
```

这是我不明白的部分？这里发生了什么？`List<MyPoint>`圈子里会发生什么？有谁知道这叫什么？这个列表是指一个类吗？因为我不确定我的标题。谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T02:49:10.563

```
private List<MyPoint> circles; 
```

圆形的状态是 a`List`类型`MyPoint`（即它将保存**MyPoint 类型的对象**）。

```
circles = new ArrayList<MyPoint>(); 
```

现在在上面的行中，您将 MyPoint 类型的 ArrayList 对象分配给 List 类型的对象引用变量。

这称为接口多态。

`List`是一个**接口**，其中作为实现**列表**`ArrayList`的**具体类。**

 ****例如：**

```
public class Dog{

   private String dName;
   priavet int dAge;

   public Dog(String dName, String dAge){

      this.dName = dName;
      this.dAge = dAge;

   }

   public String getDName(){

        return this.dName;

   }

   public String getDName(){

        return this.dAge;

   }

}

public class Test{

 public static void main(String[] args){

     List<Dog> dAList = new ArrayList<Dog>();

     dAList.add(new Dog("Tommy",5));
     dAList.add(new Dog("Stark",2));

     for(Dog d : dAList){   // Iterating over the List of Dog objects

           System.out.println(d.getDName());
           System.out.println(d.getDAge());

         }

     }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T02:48:47.967

它创建了一个对象列表。在您的情况下，MyPoint 类型对象 MyPoints 的列表是指圆的 (x,y) 坐标（如您所指）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T02:51:38.410

`List<MyPoint>`顾名思义，该对象是一个`MyPoint`实例列表，从代码来看，它代表了您的圈子的中心。`private`标识符只是表明它不能从定义它的类的外部访问。**

# java - 使用 jaxb 解组 xml 文档的中间部分

> ID：12170241
> 
> 赞同：3
> 
> 时间：2012-08-29T02:46:51.647
> 
> 标签：java, xml, jaxb

我正在尝试解组大型 xml 文档的中间元素。目前使用 JAXB 和 Woodstox。

我需要解组的 xml 中间元素示例：

```
<Values>
   <Person ID="ABC">
    <FirstName>Shawn</FirstName>
    <LastName>Mark</LastName>
    <Age>3</Age>
   </Person>
   <Person ID="DEF">
        <FirstName>John</FirstName>
        <LastName>Durell</LastName>
        <Age>4</Age>
    </Person>
</Values> 
```

我使用的 jaxb 类是：

```
@XmlRootElement(name = "Values")
@XmlAccessorType(XmlAccessType.FIELD)
public class Attributes
{
    @XmlElement(name = "Person")
    private ArrayList<Person> persons;

    public ArrayList<Person> getPersons()
    {
        return persons;
    }
}

@XmlAccessorType(XmlAccessType.FIELD)
public class Person
{
    @XmlAttribute
    private String ID;

    @XmlElement(name = "FirstName")
    private String firstName;

    @XmlElement(name = "LastName")
    private String lastName;

    @XmlElement(name = "Age")
    private String age;
} 
```

我能够解组除 ID 之外的所有值。它显示为空。

这是代码：

```
final XMLInputFactory xif = XMLInputFactory.newInstance();
final StreamSource xml = new StreamSource(pathToxmlFile);
XMLStreamReader xsr;
xsr = xif.createXMLStreamReader(xml);
xsr.nextTag();
while (!xsr.getLocalName().equals("Values"))
{
     xsr.nextTag();
}

final JAXBContext jc = JAXBContext.newInstance(Attributes.class);
final Unmarshaller unmarshaller = jc.createUnmarshaller();
final JAXBElement<Attributes> jb = unmarshaller.unmarshal(xsr, Attributes.class); 
```

上面的代码仅在`<Values>`从根嵌套 5-6 层时才有效。如果之前存在 15 个标签`<Values>`，则此代码不起作用。

与仅使用 JAXB 和解组所有元素相比，它也相对非常慢，但这需要我为永远不会使用的数据创建对象。

所以，我的问题是——有没有办法提高性能？为什么它嵌套在 xml 深处时不起作用？如何从 Person 属性中获取 ID 值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T08:36:52.947

以下内容应该有所帮助：

* * *

> **为什么它嵌套在 xml 深处时不起作用？**

如果不工作，您的意思是抛出异常，例如：

```
Exception in thread "main" javax.xml.stream.XMLStreamException: ParseError at [row,col]:[4,13]
Message: found: CHARACTERS, expected START_ELEMENT or END_ELEMENT
    at com.sun.org.apache.xerces.internal.impl.XMLStreamReaderImpl.nextTag(XMLStreamReaderImpl.java:1247)
    at blog.stax.middle.UnmarshalDemo.main(UnmarshalDemo.java:15) 
```

您可以将推进的代码更改`XmlStreamReader`为：

```
 while(xsr.hasNext()) {
        if(xsr.isStartElement() && xsr.getLocalName().equals("Values")) {
            break;
        }
        xsr.next();
    } 
```

* * *

> **有没有办法提高性能？**

StAX 是解析 XML 文档的一种非常快速的方法。无论如何，您的 JAXB 实现可能正在使用它。字符串比较可能很慢。由于您使用的是 Woodstox 并且它会实习元素名称（请参阅：第 6.1 节字符串实习： [http](http://woodstox.codehaus.org/FAQ) ://woodstox.codehaus.org/FAQ ）。您可以对字符串而不是 equals 方法进行身份检查。

```
 if(Boolean.TRUE.equals(xsr.getProperty("org.codehaus.stax2.internNames"))) {
        while(xsr.hasNext()) {
            if(xsr.isStartElement() && xsr.getLocalName() == "return") {
                break;
            }
            xsr.next();
        }
    } else {
        while(xsr.hasNext()) {
            if(xsr.isStartElement() && xsr.getLocalName().equals("return")) {
                break;
            }
            xsr.next();
        }
    } 
```

* * *

> **如何从 Person 属性中获取 ID 值？**

默认情况下，您的 JAXB (JSR-222) 实现的 XML 会将您的`ID`字段映射到名为`id`而不是的属性`ID`。您可以按如下方式覆盖此默认值：

```
@XmlAttribute(name="ID")
private String ID; 
```

# java - fastExcel：阅读时缺少一列

> ID：12170242
> 
> 赞同：0
> 
> 时间：2012-08-29T02:46:52.930
> 
> 标签：java, excel

fastexcel 是最新的。先创建一个xsl文件，再去读取，结果显示最后一列丢失。但是，当我再次保存XLS文件时，读取时最后一列不是最后一列。

生成代码：java代码

```
Workbook workBook;  
        workBook = FastExcel.createWriteableWorkbook(xls);  
        workBook.open();  
        int rowsLength = rows.length;  
        int sheets = rowsLength / sheetRows  
                + (rowsLength % sheetRows > 0 ? 1 : 0);  
        int sheetNumber;    
        for (int i = 0; i < sheets; i++) {  
            sheetNumber = i + 1;  
            Sheet sheet = workBook.addStreamSheet(sheetName + sheetNumber);  
//          sheet.addRow(titles);  
            for (int j = i * sheetRows; j < rowsLength; j++) {  
                sheet.addRow(rows[j]);  
                if (j >= sheetRows * sheetNumber) {  
                    break;  
                }  
            }  
        }  
        workBook.close(); 
```

通过阅读java代码编写代码

```
Workbook workBook;  
        workBook = FastExcel.createReadableWorkbook(xls);  
        workBook.setSSTType(BIFFSetting.SST_TYPE_DEFAULT);  
        workBook.open();  
        Sheet s;  
        s = workBook.getSheet(0);  

        excelContent = new String[s.getLastRow()-startRow][];  

        for (int i = startRow; i < s.getLastRow(); i++) {  
            excelContent[i-startRow] = s.getRow(i);  
        }  
        workBook.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T02:31:17.990

你可能会改变

```
if (j >= sheetRows * sheetNumber) {  
                    break;  
                } 
```

到

```
if (j >sheetRows * sheetNumber) {  
                    break;  
                } 
```

# android - 将资源 ID 保存为用户偏好对我来说是否安全

> ID：12170249
> 
> 赞同：1
> 
> 时间：2012-08-29T02:47:53.023
> 
> 标签：android

目前，我在我的应用程序中定义了几个主题

*   `R.style.Theme_MyApp_Light`
*   `R.style.Theme_MyApp_Dark`

用户可以选择保存他选择的主题。

我想知道，将这些生成的 Id 保存到偏好中对我来说是否安全？可能在我的下一个应用程序版本中，**aapt**生成不同的资源 ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T02:55:09.213

每次构建生成的资源 id 都会不同。但是您可以使用[public.xml](https://stackoverflow.com/questions/9348614/what-is-the-use-of-the-res-values-public-xml-file-on-android)生成固定的资源 ID 。然后，您可以安全地优先存储资源 ID。

# mysql - 如何在网页中显示纯文本？

> ID：12170250
> 
> 赞同：0
> 
> 时间：2012-08-29T02:47:57.950
> 
> 标签：mysql

我已经使用文本区域将我的代码插入到 mysql 数据库中。

我保存的内容在mysql中是这样的

```
This is Line 1
<a href="test">test</a>
This lis Line 3 
```

现在，我的问题是将保存的“文件”显示到我的浏览器，我希望它看起来像这样。

```
This is Line 1 
<a href="test">test</a>
This lis Line 3 
```

有没有人有这样的情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T03:01:31.473

在输出显示上使用 htmlentities。您可以在 mysql 中保存 html 或任何代码，无需特别注意。您将需要转义它，因此基于用户的输入不是恶意的。

[http://www.php.net/manual/en/function.htmlentities.php](http://www.php.net/manual/en/function.htmlentities.php)

```
htmlentities("<a href=\"http://www.somewhere.com\">URL</a>", ENT_QUOTES, 'UTF-8'); 
```

如果您在 php 中运行它，您将显示整个 html 标记。同样，您可以从 mysql 查询中输出结果，将相关内容包装在 htmlentities 中以实现您想要做的事情。

# apache - CakePHP 301 重定向附加额外的查询字符串参数

> ID：12170255
> 
> 赞同：0
> 
> 时间：2012-08-29T02:48:27.157
> 
> 标签：apache, cakephp, mod-rewrite, redirect, url-rewriting

我正在尝试重定向域名上的旧 asp 页面，以便它们链接到 CakePHP 版本上的各自页面（使用 1.3）。域名是一样的。正在添加这些重定向，因此搜索引擎中的结果会转到新的 Cake 页面。

我的 /.htaccess 文件中有一堆 Redirect 301（默认为 app/.htaccess 和 app/webroot/.htaccess）。

```
<IfModule mod_rewrite.c>
   RewriteEngine on
   RewriteRule    ^$ app/webroot/    [L]
   RewriteRule    (.*) app/webroot/$1 [L]

   Redirect 301 /contacts.asp http://domain/contacts
   Redirect 301 /users.asp http://domain/users
</IfModule> 
```

但是由于某种原因，当我转到任何 url 来测试重定向时，它会附加一个额外的查询字符串参数。例如：

前往：`http://domain/contacts.asp`结果`http://domain/contacts?url=contacts.asp`

所以重定向正在工作，但它正在附加`url`查询字符串参数。我不想完全删除所有查询字符串参数，因为一些旧的 asp 链接具有查询字符串参数，我也希望将这些参数传递给相应的 Cake 页面。

我相信“url”查询字符串参数来自`app/webroot/.htaccess`文件，如下所示：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.php?url=$1 [QSA,L]
</IfModule> 
```

请注意，当我将所有 301 重定向放入我的虚拟主机文件时，**不会**附加该`url`参数。我想将所有这些重定向保留在我的 .htaccess 文件中。如何防止附加此查询字符串参数？**`url`**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T03:38:48.430

这看起来像是 mod_rewrite 和 mod_alias 相互重叠的情况。URI 处理管道不会在`Redirect`应用指令时结束，它会继续通过管道，而 mod_rewrite 会做它的事情。不幸的是，最终结果并不总是你想要的。您可以坚持使用 mod_rewrite 并删除`Redirect`指令。

您可以删除 2 个`Redirect`指令，并将这 2个指令添加到将请求映射到的`RewriteRule`指令*之上*`app/webroot`：

```
RewriteRule ^contacts\.asp$ http://domain/contacts [L,R=301]
RewriteRule ^users\.asp$ http://domain/users [L,R=301] 
```**

# python - JavaScript setInterval - 函数只调用一次

> ID：12170258
> 
> 赞同：0
> 
> 时间：2012-08-29T02:49:17.990
> 
> 标签：python, ajax, django, dajaxice

我正在尝试使用调用 dajaxice 函数的 setInterval 定期检索 twitter 提要，但我在多次调用该函数时遇到了问题。setInterval 如果我做一些事情，比如向控制台写一行，但是当我尝试调用我的 dajaxice 函数时它只发生一次。

ajax.py：

```
@dajaxice_register
def get_home_timeline(request):
    home_timeline = oauth_req(
    'http://api.twitter.com/1/statuses/home_timeline.json?count=2',
    settings.TWITTER_TOKEN_KEY,
    settings.TWITTER_TOKEN_SECRET
    )
    return simplejson.dumps({'home_timeline': home_timeline })

def oauth_req(url, key, secret, http_method="GET", post_body=None, http_headers=None):
    consumer = oauth.Consumer(key=settings.TWITTER_CONSUMER_KEY, secret=settings.TWITTER_CONSUMER_SECRET)token = oauth.Token(key=key, secret=secret)
client = oauth.Client(consumer, token)

resp, content = client.request(
url,
    method=http_method,
    # body=post_body,
    # headers=http_headers,
    # force_auth_header=True
)
return content 
```

base.html：

```
var get_timeline = Dajaxice.modules.ticker.get_home_timeline(get_home_timeline_callback);

    function getTweets(){
        intervalId = setInterval(get_timeline, 2000);
    } 
```

谢谢你的帮助，

杰森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T02:52:54.777

```
var get_timeline = 
   Dajaxice.modules.ticker.get_home_timeline(get_home_timeline_callback); 
```

这不是调用函数的闭包，而是立即调用函数（甚至在您设置间隔之前）。

在想你想要

```
var get_timeline = function(){
   Dajaxice.modules.ticker.get_home_timeline(get_home_timeline_callback);
}; 
```

# php - 如何在保持纵横比的同时使用 CSS 自动调整 DIV 的大小？

> ID：12170261
> 
> 赞同：7
> 
> 时间：2012-08-29T02:49:39.760
> 
> 标签：php, html, css, forms, autoresize

我所拥有的是 HTML 中的标准表单，它允许用户选择“宽度”选项和“高度”选项（每个选项的值范围为 1 到 10）。当他们发送表单时，它会将其发送到 PHP/HTML 页面，其中 PHP 获取“Width”和“Height”变量并将其分配给 DIV 的宽度和高度。

但我想要做的只是使用“宽度”和“高度”变量为该 DIV 分配一个纵横比，然后让该 DIV 自动调整到它所在容器的 100%，但同时保持相同的纵横比。

**示例：** 用户选择 4 的宽度和 2 的高度，然后发送表单。在接收 PHP 页面上，该 DIV（接收宽度和高度比的那个）位于 1000 像素宽度和 600 像素高度的容器内。所以现在，该 DIV 调整为 1000px 宽和 500px 高（这将是 4 到 2 的纵横比）

任何想法、代码、脚本都会非常有帮助，非常感谢！

亚伦

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T14:52:21.313

由于`padding-*`属性的百分比值是根据生成框的包含块的宽度计算的，因此您可以：

*   `padding-top`添加一个没有内容但在垂直填充（或）中具有百分比的虚拟元素`padding-bottom`，对应于所需的纵横比。
*   使用绝对定位从元素的正常流动中移除所有内容，以防止它们增加高度。然后，让它长到装满容器。

这个想法取自[http://ansciath.tumblr.com/post/7347495869/css-aspect-ratio](http://ansciath.tumblr.com/post/7347495869/css-aspect-ratio)

```
#container {
  position: relative;
  width: 50%;
}
#dummy {
  padding-top: 75%; /* 4:3 aspect ratio */
}
#element {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  background-color: silver;
}
```

```
<div id="container">
  <div id="dummy"></div>
  <div id="element">
    some text
  </div>
</div>
```

请注意，可以使用垂直边距代替垂直填充，但是会出现边距折叠。为了防止它，添加

```
#container {
  display: inline-block;
} 
```

```
#container {
  display: inline-block;
  position: relative;
  width: 50%;
}
#dummy {
  margin-top: 75%; /* 4:3 aspect ratio */
}
#element {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  background-color: silver;
}
```

```
<div id="container">
  <div id="dummy"></div>
  <div id="element">
    some text
  </div>
</div>
```

使用`::before`伪元素，无需使用虚拟元素：

```
#container:before {
  padding-top: 75%; /* 4:3 aspect ratio */
  content: ''; /* Enable the pseudo-element */
  display: block;    
} 
```

```
#container {
  position: relative;
  width: 50%;
}
#container:before {
  padding-top: 75%; /* 4:3 aspect ratio */
  content: ''; /* Enable the pseudo-element */
  display: block;    
}
#element {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  background-color: silver;
}
```

```
<div id="container">
  <div id="element">
    some text
  </div>
</div>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T03:00:02.040

您可以利用替换元素可能具有固有纵横比的事实。根据[规范](http://www.w3.org/TR/CSS21/visudet.html#inline-replaced-height)，

> 否则，如果 'height' 的计算值为 'auto'，并且元素具有固有比率，则使用的 'height' 值为：
> 
> (使用宽度) / (内在比率)

因此，您可以

*   创建具有所需内在比率的替换元素，然后设置`width:100%`为它。
*   使用绝对定位从元素的正常流动中移除所有内容，以防止它们增加高度。然后，让它长到装满容器。

然后，容器容器将具有您想要的纵横比。

被替换的元素可以是图像。您可以在 PHP 中创建所需纵横比的图像，或使用第三方 Web 服务，如[http://placehold.it/](http://placehold.it/)

在下面的代码片段中，我使用了[2px 宽和 1px 高的图像](https://i.stack.imgur.com/Lfmr6.png) ( ![在此处输入图像描述](../Images/e493416639638c6b7728dd7809c5159a.png))：

```
.container {
  border: 3px solid blue;
  position: relative;
}
.container > img {
  width: 100%;
  display: block;
  visibility: hidden;
}
.container > .content {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  overflow: auto;
}
```

```
<div class="container">
  <img src="http://i.stack.imgur.com/Lfmr6.png" />
  <div class="content">
    <p>01</p><p>02</p><p>03</p><p>04</p><p>05</p>
    <p>06</p><p>07</p><p>08</p><p>09</p><p>10</p>
    <p>11</p><p>12</p><p>13</p><p>14</p><p>15</p>
    <p>16</p><p>17</p><p>18</p><p>19</p><p>20</p>
  </div>
</div>
```

您还可以使用`<canvas>`元素而不是图像。这样您就不需要创建图像，但它不适用于旧浏览器（如 IE 8 和更早版本）：

```
<div class="container">
  <canvas height="1" width="2"></canvas>
  <div class="content">...</div>
</div> 
```

```
.container {
  border: 3px solid blue;
  position: relative;
}
.container > canvas {
  width: 100%;
  display: block;
  visibility: hidden;
}
.container > .content {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  overflow: auto;
}
```

```
<div class="container">
  <canvas height="1" width="2"></canvas>
  <div class="content">
    <p>01</p><p>02</p><p>03</p><p>04</p><p>05</p>
    <p>06</p><p>07</p><p>08</p><p>09</p><p>10</p>
    <p>11</p><p>12</p><p>13</p><p>14</p><p>15</p>
    <p>16</p><p>17</p><p>18</p><p>19</p><p>20</p>
  </div>
</div>
```

# python - 使用嵌套循环对 csv 中的数据进行分组

> ID：12170262
> 
> 赞同：2
> 
> 时间：2012-08-29T02:49:44.450
> 
> 标签：python

我正在循环遍历 csv 行以提取和转换数据。

csv 看起来像这样：

```
alex, blue, 3
alex, blue, 4
liza, green, 2
alex, red, 4
alex, orange, 3
liza, blue, 2
liza, blue, 21
liza, yellow, 23 
```

我想要从上面得到的结果是 2 个文件：

**亚历克斯文件**

```
<blue>3, 4</blue>
<red>4</red>
<orange>3</orange> 
```

**丽莎文件**

```
<green>2</green>
<blue>2,21</blue>
<yellow>23</yellow> 
```

我不是在找你为我解决这个问题，我只是在寻找你的指导。我不需要 xml 部分的帮助，我只需要 LOGIC 部分的帮助。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T03:07:04.403

我在这里首选的数据结构（假设名称和颜色的顺序并不重要！）将是嵌套的`defaultdict`. 通常的用法是这样的：

```
>>> from collections import defaultdict
>>> d = defaultdict(list)
>>> d['blue'].append(3)
>>> d['blue'].append(4)
>>> d
defaultdict(<type 'list'>, {'blue': [3, 4]}) 
```

但我们也可以更深一层：

```
>>> d = defaultdict(lambda: defaultdict(list))
>>> d
defaultdict(<function <lambda> at 0x1004bf9b0>, {})
>>> d['alex']['blue'].append(3)
>>> d['alex']['blue'].append(4)
>>> d['liza']['green'].append(2)
>>> d
defaultdict(<function <lambda> at 0x1004bf9b0>, {'liza': defaultdict(<type 'list'>, {'green': [2]}), 'alex': defaultdict(<type 'list'>, {'blue': [3, 4]})})
>>> d.keys()
['liza', 'alex']
>>> d['alex'].keys()
['blue']
>>> d['alex']['blue']
[3, 4] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T02:59:54.803

列表字典怎么样？每次遇到字典中未找到的内容时，都会将该元素的列表添加到字典中。然后，您可以将重复元素附加到字典内的列表中。

您的示例输入的结果结构将是：

```
alex dictionary:
{
   "blue" : [3,4],
   "red": [4],
   "orange": [3]
}

liza dictionary:
{
   "green" : [2],
   "blue": [2,21],
   "yellow": [23]
} 
```

当然，您可以使用另一个字典层进一步抽象出 liza 和 alex。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T03:00:53.507

最好为 alex 文件和 liza 文件维护一系列列表（每种颜色一个），因为您不知道每种颜色有多少条目。所以本质上，您将遍历 csv，确定您是在处理 alex 还是 liza（第一条信息），确定颜色（第二条信息），并将整数值（第三条信息）附加到适当的清单。完成文件浏览后，创建两个输出文件应该不难。

编辑：当然，如果您不知道会遇到哪些颜色或会遇到大量颜色，那么使用其他答案建议的字典方法可能是最明智的。

# c# - 在 asp.net 中的 Jquery UI

> ID：12170263
> 
> 赞同：0
> 
> 时间：2012-08-29T02:49:50.300
> 
> 标签：c#, asp.net

我如何包含要在我的系统中使用的 jquery ui？我已经将代码放在我的标题中：

```
<script type="text/javascript" src="/scripts/jquery.min.js"></script> 
```

以及如何包含我已经从 jqueryUI 下载的日期选择器。这是日期选择器的代码：

```
<script>
$(function() {
$( "#datepicker" ).datepicker();
});
</script>

<div class="demo"><p>Date: <input type="text" id="datepicker"></p></div> 
```

我很困惑如何将下载的文件导出到 asp。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T02:54:19.623

您是否还包括对 JQuery 的引用？

```
<link type="text/css" href="css/themename/jquery-ui-1.8.23.custom.css" rel="Stylesheet" />  
<script type="text/javascript" src="js/jquery-1.4.4.min.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.8.23.custom.min.js"></script> 
```

请参阅：[JQuery UI 文档](http://jqueryui.com/docs/Getting_Started#Basic_overview%3a_using_jQuery_UI_on_a_web_page)

# php - 得到这个 PHP 错误，但得到正确的输出？

> ID：12170264
> 
> 赞同：-1
> 
> 时间：2012-08-29T02:50:11.100
> 
> 标签：php, drupal

所以我试图在 Drupal 内部运行一些 PHP 代码（在节点内部，启用 PHP 代码解析）。

我试图从一个字段中获取数据，在本例中是一个简单的文本字段。

我正在显示该信息，但也显示此错误：

```
Notice: Use of undefined constant value - assumed 'value' in eval() (line 8 of /hermes/waloraweb033/b418/moo.arao1989/modules/php/php.module(80) : eval()'d code).
Notice: Use of undefined constant value - assumed 'value' in eval() (line 8 of /hermes/waloraweb033/b418/moo.arao1989/modules/php/php.module(80) : eval()'d code). 
```

我的代码如下：

```
<?

if ($node = menu_get_object()) {
$test = field_get_items('node', $node, 'field_testvalue');

$supertest = $test[0];

echo $supertest[value];

} ?> 
```

啊，我有时会问一些愚蠢的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T02:52:58.490

在关联数组中引用数组键时需要字符串：

```
echo $supertest['value']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T02:57:52.603

进行此编辑，您应该会很好。 `echo $supertest['value'];`

编辑：似乎已经回答了

# javascript - 在按键时禁用 ajax 表单按钮

> ID：12170266
> 
> 赞同：2
> 
> 时间：2012-08-29T02:50:24.360
> 
> 标签：javascript, css, ajax, google-chrome

我在 Ajax 表单上有一个按钮，当按下该按钮时，它会向用户指示它正在“搜索”一种小型“颤动”，以便在查询数据库时让用户保持忙碌。

单击提交按钮时，它会转到一个函数。该功能将禁用按钮，收集表单上填写的内容，执行 Ajax 调用（非异步 - 意味着脚本在继续执行下一行代码之前等待调用完成）然后重新- 启用按钮。

像这样：

```
function CheckForm()
{
    disableButton(document.getElementById("save"));

    ....... lots of instructions in here ........
    ....... Loops through every form el .........

    //Ajax called
    CallAjax(sUrls, sParams);

    enableButton(document.getElementById("save"));

}

function disableButton(element)
{
    try
    {
        disabledEl = element.id
        disabledElOrigTxt = element.value;
        element.value = '    Loading...'

        addClass(element, "pleaseWait");
        addClass(document.myForm.reset, "resetWait");

        element.disabled = true;
        document.myForm.reset.disabled = true;

        //return true;
    }
    catch(e)
    {
        ////SHHHHHH
    }   
} 

function enableButton(element, timer)
{
    try
    {
        if(element.value == '  Loading...')
            element.value = disabledElOrigTxt;  

        removeClass(element, "pleaseWait");
        removeClass(document.myForm.reset, "resetWait");
        element.disabled = false;
        document.myForm.reset.disabled = false;
        clearTimeout(timer);
        return true;
    }
    catch(e)
    {
         ////SHHHHHH
    }
}

function hasClass(element, className)
{
    var classes = element.className.split(' ');
    var len = classes.length;
    for (var i=0; i<len; i++) 
    {
    if (classes[i] == className)
        return true;
    }
    return false;
}

function addClass(element, className)
{
    if (!hasClass(element, className))
        element.className = (element.className == '' ? className : element.className + ' ' + className);
}

function removeClass(element, className)
{
    var newValue = '';
    var classes = element.className.split(' ');
    var len = classes.length;
    for (var i=0; i<len; i++)
    {
    if (classes[i] != className)
            newValue += newValue.length ? ' ' + classes[i] : classes[i];
    }
    element.className = newValue;
} 
```

这适用于 Mozilla、IE，但不适用于 CHROME。有人知道为什么吗？

如果我修改 disableButton() 并在尝试的最后一行设置为 alert("hi") ，在 Chrome 中我可以观察到按钮的变化......但只有当我在那里发出警报以停止脚本时。显然这不是我想做的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:33:49.870

Maybe your `CallAjax()` function works asynchronously in Chrome?

Another possibility, maybe Chrome processes it so fast you don't notice the changes?

# python - Django在管理员中过滤多对多字段？

> ID：12170267
> 
> 赞同：32
> 
> 时间：2012-08-29T02:50:37.023
> 
> 标签：python, django, django-models, django-admin

我有三个对象：

```
Thing
  some fields

Bucket
  things = models.ManyToManyField(Thing)

User
  buckets = models.ManyToManyField(Bucket)
  things = models.ManyToManyField(Thing) 
```

在管理员中编辑我的“存储桶”字段时，我希望能够选择事物，但只能选择当前登录用户的“事物”列表中的那些事物。

我怎样才能做到这一点？换句话说，如何过滤 Bucket admin 中的 Things 列表？

非常感谢您提前提供的帮助。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-07-03T20:46:25.437

有一个[formfield_for_manytomany](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.formfield_for_manytomany)。用法类似于defuz给出的答案。

> ```
> ModelAdmin.formfield_for_manytomany(db_field, request, **kwargs)¶ 
> ```
> 
> 与该`formfield_for_foreignkey`方法一样，`formfield_for_manytomany`可以重写该方法以更改多对多字段的默认表单字段。例如，如果一个车主可以拥有多辆汽车并且汽车可以属于多个车主——多对多关系——您可以过滤 Car 外键字段以仅显示用户拥有的汽车：
> 
> ```
> class MyModelAdmin(admin.ModelAdmin):
>     def formfield_for_manytomany(self, db_field, request, **kwargs):
>         if db_field.name == "cars":
>             kwargs["queryset"] = Car.objects.filter(owner=request.user)
>         return super(MyModelAdmin, self).formfield_for_manytomany(db_field, request, **kwargs) 
> ```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-08-29T12:19:28.790

阅读[文档](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.formfield_for_foreignkey)：

```
class BucketAdmin(admin.ModelAdmin):
    def formfield_for_foreignkey(self, db_field, request, **kwargs):
        if db_field.name == "things":
             kwargs["queryset"] = Things.objects.filter(...)
        return super(BucketAdmin, self).formfield_for_foreignkey(db_field, request, **kwargs) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T09:56:27.590

可以使用[django-selectable](http://django-selectable.readthedocs.org/en/version-0.5.2/advanced.html#chained-selection)或[django-autocomplete-light](http://django-autocomplete-light.readthedocs.org/en/latest/dependant.html)。

# ruby-on-rails - 在 Formtastic 上的单选标签上插入 HTML

> ID：12170268
> 
> 赞同：1
> 
> 时间：2012-08-29T02:50:44.953
> 
> 标签：ruby-on-rails, ruby-on-rails-3, formtastic

我有一个表单，上面有一个单选按钮（Formtastic 1.2.4），它与我传递的 :collection 一起工作得很好。问题是我希望文本的某些部分受到某些 CSS 的影响，但是 :collection 属性不允许我放入 HTML。

这是我的代码：

```
= subscription.input :plan_type_id, :as => :radio, :label => false, :wrapper_html => {:class => "plan_type"}, :collection => { @plans[:premium_yearly][:description]+number_to_currency(@plans[:premium_yearly][:amount], :precision => 2) => @plans[:premium_yearly][:value], @plans[:premium_monthly][:description]+number_to_currency(@plans[:premium_monthly][:amount], :precision => 2) => @plans[:premium_monthly][:value] } 
```

您可能会看到，我使用 @plans 变量和 :collection 属性构建了要显示的标签。

有什么方法可以修改它呈现标签的方式，我想在标签的某些部分添加一些 CSS。

我想要这样的东西：

```
= subscription.input :plan_type_id, :as => :radio, :label => false, :wrapper_html => {:class => "plan_type"}, :collection => { @plans[:premium_yearly][:description]+'<b>'+number_to_currency(@plans[:premium_yearly][:amount], :precision => 2)+'<\\b>' => @plans[:premium_yearly][:value], @plans[:premium_monthly][:description]+'<b>'+number_to_currency(@plans[:premium_monthly][:amount], :precision => 2)+'<\\b>' => @plans[:premium_monthly][:value] } 
```

先谢谢了。

我尝试使用 :member_label 尝试按照我想要的方式打印它，但我得到的只是一个带有是或否选项的收音机。

# winforms - 在 winforms 和 web 应用程序之间共享数据层和模型层的最佳方法

> ID：12170271
> 
> 赞同：1
> 
> 时间：2012-08-29T02:51:02.363
> 
> 标签：winforms, web-applications, models, sharing

我目前正在为一家公司开发 ERP 解决方案。要求如下：

1.  他们需要一个基于 winforms 的应用程序来处理 HR、BSC、Inventory 等模块。

2.  一个基于网络的解决方案，需要所有员工访问他们的个人数据、申请休假等。这需要一个基于**互联网**的解决方案，可以从任何地方访问。

3.  将来，他们还想要一个基于 Web 的文档管理系统。

现在我们已经完成了winforms应用程序中的一些模块，因为这是迫切的需求。对于winforms，我们采用了分层架构的水平方法。即每个模块都是一个项目，在项目中有自己的数据层和业务层。现在我需要开始研究网络解决方案。我只是想知道哪种方法是在 winforms 应用程序和 Web 应用程序之间共享数据层和模型层的最佳方法。此外，Web 应用程序需要具备适当的安全性，因为它将是敏感数据。我考虑过 2 种可能无法涵盖所有​​可用可能性的方法。

我能想到的方法如下：

一个。创建一个 Web 服务来处理数据层和模型。将其托管在服务器上并通过 winforms 应用程序和 Web 应用程序访问它。为此，我需要更改我已经完成的编码。但这是可以接受的，因为它作为一个层架构需要最少的努力。这里我唯一的疑问是，对于 winforms 应用程序，它会不必要地通过 Web 服务层并使其变慢。

湾。将数据层和模型转换为 dll。在 winforms 和 web 应用程序中访问这些 dll。

另外关于网络应用程序，这将是更好的方法：

一个。我应该选择基于 MVC3 的网络应用程序吗？

湾。还是 asp.net 和 WCF？

情况是我和一位同事一起做这个项目，我们只有 2 人的团队。所以我们是对所有事情做出决定的人。

我在 winforms 方面有相当好的经验，但在基于 Web 的技术方面的经验相对较少。我将非常感谢您对此的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T03:28:51.763

如果您希望您的模型类型与您的数据库架构密切对应，您可以使用实体框架设计器和自我跟踪实体模板来创建它们。这将允许它们通过 WCF 轻松地通过更改进行序列化，并在数据库中持久化。然后，您可以选择创建自定义 WCF 服务来处理实体，也可以使用 WCF 数据服务 (OData) 将实体框架上下文直接公开为服务。

就表示层而言，您列出的两个选项并不相互排斥。您可以使用带 WCF 的 MVC、不带 WCF 的 MVC、带 WCF 的 WebForms、不带 WCF 的 WebForms……因为无论如何您都需要创建服务，而 MVC 似乎是这些天要走的路，我可能会推荐一个 MVC使用 WCF 服务访问数据的应用程序。

# mysql - Rails 字符串唯一 ID

> ID：12170272
> 
> 赞同：2
> 
> 时间：2012-08-29T02:51:02.280
> 
> 标签：mysql, ruby, ruby-on-rails-3

我想创建一个模型，该模型的属性包含基于字符串的唯一标识符。

我只希望唯一的字符串长度为 3 个字符，并由字母（仅小写）和数字组成。

我如何实现类似上面的东西？如何避免碰撞？我已经研究过 MD5，这似乎符合我想要完成的目标 - 但更短。如果这使方法具有确定性，我也愿意花时间播种。

我会喜欢关于这个主题的任何反馈或指示。谢谢！

**编辑：** 我想到的一个解决方案是创建一个充满每个排列的表，然后根据需要从表中随机选择，并在使用后删除。这是一个不好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T03:09:00.173

看看这个[SO 线程](https://stackoverflow.com/questions/1117584/guids-in-ruby)；它有很多好的建议。[尤其是Simone Carletti](https://stackoverflow.com/users/123527/simone-carletti)的最后一个答案，它指向了这篇[文章](http://blog.logeek.fr/2009/7/2/creating-small-unique-tokens-in-ruby)。

上面的帖子有很多选择。我喜欢并且可能对您有用的一个是使用[rufus-mnemo gem](http://github.com/jmettraux/rufus-mnemo/tree/master)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T06:27:20.003

[这个叫做 alphadecimal 的 gem](https://github.com/JackDanger/alphadecimal)可能可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T05:58:40.507

因此，在阅读了一些问题和答案后，我决定采用的解决方案与任何人建议的完全不同。

我创建了一个表来存储代码。我编写了一个 ruby​​ 脚本，根据我想使用的字符，用每 3 个字母组合填充这个表。然后在我的模型上，如果尚未分配代码，我有一个 before_save 方法为实例分配一个代码。

这种方法确保我在 before_save 中分配代码时永远不会发生冲突。最慢的部分是表的生成，但因为我只需要在我可以处理这个问题时执行此操作。

# jquery - 带有部分响应式网格的 jQuery 流体全角文本

> ID：12170273
> 
> 赞同：0
> 
> 时间：2012-08-29T02:51:04.540
> 
> 标签：jquery, css, resize, responsive-design, fluid-layout

我正在尝试使用[FitText](http://fittextjs.com/ "适合文本")将页面上的主 h1 调整为响应式站点上的完整窗口宽度，但仅当窗口低于某个宽度时。

我使用媒体查询将所有宽度大于 1170 像素的字体大小定义为 148 像素，宽度小于 1170 的字体大小定义为 118 像素，然后在 940 像素处，我希望 FitText 接管并调整 h1 的大小，使其变得流畅，拉伸整个宽度调整大小时的浏览器窗口。我为此使用以下 jQuery：

```
var title = $("header h1");
$(window).resize(function(){
    if ( $(window).width() < 940) {
        $(title).fitText(0.47);
    }
}); 
```

如果浏览器开始时宽度超过 940 像素，然后缩小尺寸，这将起作用。但是，效果并没有停止，如果浏览器窗口再次变宽，文本会继续随之缩放。

这是一个小提琴（可能必须跨越多个显示器并重新加载才能在缩放之前查看起始大小）：http: [//jsfiddle.net/segFE/1/](http://jsfiddle.net/segFE/1/)

理想情况下，我希望在浏览器窗口再次达到 > 940px 后停止效果并恢复到我的 CSS 中定义的标准尺寸。

我尝试添加另一个 if 条件来停止该功能，但我编写它的方式似乎不起作用：

```
var title = $("header h1");
$(window).resize(function(){
    if ( $(window).width() < 940) {
        $(title).fitText(0.47);
    }
    if ( $(window).width() > 940) {
        stop();
    }
}); 
```

任何关于我如何使这项工作的想法将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T02:58:42.023

根据 FitText 文档：

> 在您的响应式设计中使用这个插件来实现填充*父元素宽度的*可扩展标题。

我认为您可以避免一起使用 jQuery 并使用媒体查询，只需将 h1 包装在 div 或其他东西中，并为 1170+ 和 >940 尺寸设置固定*宽度*。

# security - 程序崩溃时如何重置用户登录状态

> ID：12170278
> 
> 赞同：0
> 
> 时间：2012-08-29T02:51:42.033
> 
> 标签：security, vb6

我正在根据用户登录来保护我的程序。现在我只允许一个用户登录我的程序一次（它看起来像 Windows Live MSN）。如果检测到相同的用户名已经登录，它会提示消息通知用户“您已经登录”。

使用此设置，如果程序崩溃（这意味着用户尚未注销），我会遇到问题，在这种情况下如何将 user_Status 自动重置为 0？这样，他可以在重新启动程序后登录。

否则，user_Status 为 1，可能不允许用户再次登录。

我可以解决我的问题的最佳方法是什么？

p/s: user_Status = 1 仍然是登录；user_Status = 0 仍然是注销

user_Status 存储在数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:08:57.597

我猜你有一个客户端/服务器部分。如果是这样，如果用户已经登录，则创建一个函数以在登录时从服务器 ping 用户。

场景 1：用户 1 已登录并处于活动状态。用户 2 尝试使用用户 1 凭据登录。服务器将 ping 用户 1 并获得主动响应。用户 2 收到消息“您已经登录”

场景 2：用户 1 登录然后崩溃。用户 1 重新启动并尝试再次登录。服务器向用户 1 发送 ping，但没有得到响应，然后服务器允许登录。

这样您就不需要计时器，用户也不需要等待 5 分钟才能再次登录。

# c++ - IE 如何加载 BHO。它是否以某种顺序加载 BHO

> ID：12170279
> 
> 赞同：0
> 
> 时间：2012-08-29T02:51:59.267
> 
> 标签：c++, internet-explorer, bho

如果有两个具有相似功能的 BHO，IE 如何决定先加载哪个？因为第一个加载的 BHO 会影响后面加载的 BHO。所以我想将我的 BHO 设置为第一个加载的。我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T03:06:10.383

没有记录的方法可以做到这一点。但是根据我的经验，BHO 是按照在注册表中注册它们的顺序加载的 - `HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\Browser Helper Objects`。

因此，要在其他人之前加载 BHO，您需要生成按字典顺序出现在其他人之前的 CLSID。

但是，这并不能保证其他第三方 BHO 不会在您之前加载。您可以尝试使用手动编码的 CLSID 注册 BHO。

# ruby-on-rails - require.js 和带有 rails 的预编译资产

> ID：12170282
> 
> 赞同：4
> 
> 时间：2012-08-29T02:52:40.643
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, requirejs

我正在使用[requirejs-rails gem](https://github.com/jwhitley/requirejs-rails/)以及各种 3rd 方 javascript。在开发中，这一切似乎都在工作......即使在预编译我的资产时，但是在登台/生产（heroku）中它找不到资产。

以 jQuery 为例（使用 jquery-rails gem）。如果我这样做，从heroku控制台

`Rails.application.assets.find_asset('jquery.min')`它找到资产 (/app/vendor/bundle/ruby/1.9.1/gems/jquery-rails-2.1.1/vendor/assets/javascripts/jquery.min.js")。

但是，如果我尝试浏览它，`domain.com/assets/jquery.min.js`我会得到 404。

我的 requirejs-rails 配置是：

```
shim:
  jquery:
    exports: '$'
  jquery-ujs:
    - jquery
paths:
  jquery: jquery.min
  jquery-ujs: jquery_ujs 
```

在我的 application.js.coffee 我有

```
require ['jquery', 'jquery-ujs'], ($) ->
  // ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T18:14:09.753

工作方式`requirejs-rails`（实际上是来自 requirejs 的 r.js）是将所有它知道的 javascript 文件（通过代码中的路径`requirejs.yml`或通过代码中的实际定义调用）编译成一个大文件，然后可以对其进行 uglified、压缩和cache-busted（通过在名称中包含摘要）。因此，如果您有一个在 dev 中可通过 http 访问的名为的文件`/assets/views/my_view.js`不再存在于生产环境中（因为它是您的`application.js`.

在您的情况下，如果您`application-<digest>.js`在生产中查看（您可以通过查看所服务应用程序页面的 html 来获取实际摘要），您将看到 jquery 已经包含在其中（您可以查看许可证注释）。

所以文件就在那里，它被正确地作为一部分提供`application-<digest>.js`，你不应该在生产中依赖它直接可用。由于资产管道和 requirejs-rails 插件的重点是将所有文件编译成一个缩小的压缩文件以提高页面性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:00:42.160

我没有使用过requirejs，但是你检查`Rails.application.assets.paths`过哪个有资产吗？还要确保`config.action_controller.asset_host`在当前环境中正确设置

# android - 单击微调器时显示自定义对话框

> ID：12170289
> 
> 赞同：3
> 
> 时间：2012-08-29T02:54:16.120
> 
> 标签：android

目前，我的微调器处于`dialog`模式。

```
 <Spinner
            android:spinnerMode="dialog"
            android:id="@+id/genderSpinner"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="10dp"
            android:entries="@array/gender_array"
            android:prompt="@string/gender_prompt" /> 
```

它会显示这样的东西

![在此处输入图像描述](../Images/e0aa7b976b9d9594d29c404871334868.png)

但是，有时，我希望控制要显示的对话框类型。例如，我想在单击微调器时显示一个带有日期选择器的对话框。

请注意，谷歌日历确实有这样的控件。

![在此处输入图像描述](../Images/877ca4fc96f03e3ef917e3158bcaade9.png)

我可以知道如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-28T02:04:27.600

不要使用 Spinner，而是使用 TextView，并为其安装点击侦听器。

为了让 TextView 看起来像 Spinner，这里是技术

```
 <TextView
            android:id="@+id/date"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="0.72"
            android:text="Aug 20, 2012"
            style="@android:style/Widget.Holo.Light.Spinner" /> 
```

或者

```
 <TextView
            android:id="@+id/date"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="0.72"
            android:text="Aug 20, 2012"
            style="@android:style/Widget.Holo.Spinner" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T03:11:52.480

我认为您将无法使用 Spinner 进行这项工作。Spinner 的概念是，它期望显示一个项目列表供用户选择。

我认为您应该使用弹出包含 DatePicker 的自定义对话框的按钮，而不是 Spinner。如果您愿意，您甚至可以正确连接它以将所选日期显示为按钮上的文本。

# ruby-on-rails - 自定义选择选项 html 属性

> ID：12170292
> 
> 赞同：1
> 
> 时间：2012-08-29T02:54:27.800
> 
> 标签：ruby-on-rails, ruby

我有一个“添加新产品页面”，我在数据库表“jos_stockmovement”中有一个字段，“ `start_week`”包含年份和周的数据。

在我的“添加新产品”页面中，我有一个名为“开始周”的字段下拉列表，其中包含年份和周，例如“2012/36”。

我想让它可以查看过去的几周，但只能选择当前的一周。

这是我的代码：

```
<td colspan="99">
  <%= fld.select :start_week, options_for_select(
    StockMovement.order("year DESC, week DESC").map { | val |
      [ "#{ val.year }/#{ val.week }", val.id ]
      },
      :selected => @product.start_week
    ),
    :class => "ddl_SW"
  %>
</td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T05:27:57.780

您要做的是将 disabled 属性添加到过去一周的选项中，例如

```
<select name="post[stock_movement]">
  <option value="1">Present</option>
  <option value="2" disabled="disabled">Past</option>
  <option value="3" disabled="disabled">Past</option>
</select> 
```

您可以在 Rails3 中执行此操作（我认为您不能在 Rails2 中执行此操作），方法是使用您尝试的[options_for_select 。](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-options_for_select)

**stock_movement.rb**

```
# not sure about the scope, maybe need to put in a lambda ?
scope :option_tags, order("year DESC, week DESC").map(&:option_tag)

def before_now?
  # your test to know if the thing is before today or not
end

def option_tag
  ["#{ stock_movement.year }/#{ stock_movement.week }",
   val.id,
   before_now? ? {:disabled => :disabled} : {}]
end 
```

**your_view.rb**

```
<td colspan="99">
  <%= fld.select :start_week,
                 options_for_select(StockMovement.option_tags,
                                    :selected => @product.start_week),
                 :class => "ddl_SW" -%>
</td> 
```

那个怎么样？我无法测试它，但应该没问题。

# jquery - jQuery幻灯片不重复

> ID：12170293
> 
> 赞同：1
> 
> 时间：2012-08-29T02:54:35.647
> 
> 标签：jquery, slideshow, repeat

我已经制作了我的 jQuery 幻灯片，因此文本和图像将按照它们应该的方式循环，但是，它不会重复。如果我让它循环遍历图像或文本，它将重复，但不会一起重复。

[http://jsfiddle.net/ncafV/3/](http://jsfiddle.net/ncafV/3/)

HTML：

```
<div id="slideshow">
<div id="slideContain">
    <img src="http://www.codekrewe.com/images/surf.png" height="200px" width="300px" />
    <img src="http://www.codekrewe.com/images/leafriverresources.png"  height="200px"        width="300px" />
    <img src="http://www.codekrewe.com/images/bookReviews.png"  height="200px" width="300px" /> 
    <p class="slideInfo">Surf Shack Yogurt was a fun business to work with. They gave me a shot when I had barely anything to prove my worth, and for that, I thank them. This website help me expand my knowledge about web development/design...</p>
    <p class="slideInfo">I found Leaf River Resource's website to have a unique challenge when developing/designing it. The oil/gas business does not want to disclose all of their info/tricks on a website for all of their competitors to see...</p>
    <p class="slideInfo">This book database site was requested by an english teacher at Castle View High School for his students. This website gave me much needed practice and new knowledge that I can now apply to future projects...</p>
</div>
</div>​ 
```

CSS：

```
#slideContain{
position:relative;
width:900px;
height:250px;
margin-left:auto;
margin-right:auto;
}
#slideContain img{
position:absolute;
left:5px;
top:25px;
}
#slideContain p{
width:570px;
height:200px;
position:absolute;
left: 330px;
top:25px;
}
.slideInfo{
color:#333;
text-shadow:0px -1px 1px #CCC;
}​ 
```

JavaScript：

```
$(function() {
$('#slideContain img:gt(0)').hide();
$('#slideContain p:gt(0)').hide();
setInterval(function() {
    $('#slideContain img:first').fadeOut(1000)
    .next('img').fadeIn(1000)
    .end().appendTo('#slideContain');
}, 3000);
setInterval(function() {
    $('#slideContain .slideInfo:first').fadeOut(1000)
    .next('.slideInfo').fadeIn(1000)
    .end().appendTo('#slideContain');
}, 3000);
}); 
```

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T03:10:38.447

您需要重置第一个图像和 slideInfo 以再次可见。[jsFiddle](http://jsfiddle.net/kswishaq/CxbXk/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T03:29:21.847

您可以改用此功能：

```
$(function() {
        $('#slideContain img:gt(0)').hide();
        $('#slideContain p:gt(0)').hide();
        var index=0;
        var count=$("#slideContain img").length;    
    setInterval(function() {
            $('#slideContain img:eq('+index+')').fadeOut(1000);
            $('#slideContain p:eq('+index+')').fadeOut(1000);
            index++;
            if (index>=count) index=0;
            $('#slideContain img:eq('+index+')').fadeIn(1000);
            $('#slideContain p:eq('+index+')').fadeIn(1000);
    }, 2000);
}); 
```

它适用于任何数量的幻灯片，因此您可以在不更改 javascript 的情况下添加尽可能多的幻灯片。

演示：http: [//jsfiddle.net/7Z7KC/](http://jsfiddle.net/7Z7KC/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T03:14:17.463

[**JQuery Cycle**](http://jquery.malsup.com/cycle/)是一个不错的 jquery 插件，用于具有漂亮效果的循环元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T03:25:37.350

这就是我修复它的方法：

我将图像包装在他们自己的 div 中，将文本包装在他们自己的 div 中。（这也有助于造型！）

[http://jsfiddle.net/UNYuR/](http://jsfiddle.net/UNYuR/)

HTML：

```
<div id="slideshow">
<div id="slideContain">
    <div id="picContain">
        <img class="slidePic" src="images/surf.png" height="200px" width="300px" />
        <img class="slidePic" src="images/leafriverresources.png"  height="200px" width="300px" />
        <img class="slidePic" src="images/bookReviews.png"  height="200px" width="300px" />
    </div>
    <div id="textContain">
        <p class="slideInfo">Surf Shack Yogurt was a fun business to work with. They gave me a shot when I had barely anything to prove my worth, and for that, I thank them. This website help me expand my knowledge about web development/design...</p>
        <p class="slideInfo">I found Leaf River Resource's website to have a unique challenge when developing/designing it. The oil/gas business does not want to disclose all of their info/tricks on a website for all of their competitors to see...</p>
        <p class="slideInfo">This book database site was requested by an english teacher at Castle View High School for his students. This website gave me much needed practice and new knowledge that I can now apply to future projects...</p>
    </div>
</div>
</div> 
```

并没有真正改变 CSS 只是一些样式，但这里是：

```
#slideshow{
width:100%;
min-width:900px;
background-image:url('../images/slideshow.png');
background-color:#111;
height:250px;
margin-bottom:25px;
}
#slideContain{
width:900px;
height:250px;
margin-left:auto;
margin-right:auto;
}
#textContain{
float:left;
width:570px;
height:200px;
margin-top:25px;
position:relative;
}
#picContain{
float:left;
width:300px;
height:200px;
margin-top:25px;
margin-right:25px;
margin-right:5px;
position:relative;
}
.slideInfo{
position:absolute;
top:0px;
left:0px;
color:#eaecea;
text-shadow:0px -1px 1px #000;
}
.slidePic{
width:300px;
height:200px;
position:absolute;
top:0px;
left:0px;
} 
```

JavaScript：

```
$(function() {
$('#picContain img:gt(0)').hide();
$('#textContain p:gt(0)').hide();
setInterval(function() {
    $('#picContain img:first').fadeOut(1000)
    .next('img').fadeIn(1000)
    .end().appendTo('#picContain');
}, 3000);
setInterval(function() {
    $('#textContain p:first').fadeOut(1000)
    .next('p').fadeIn(1000)
    .end().appendTo('#textContain');
}, 3000);
}); 
```

# url - 使用 PDF 打开参数搜索有时会失败

> ID：12170299
> 
> 赞同：0
> 
> 时间：2012-08-29T02:56:29.810
> 
> 标签：url, search, pdf, parameters, adobe

我通过使用 URL 中的“搜索”打开参数在嵌入式 Acrobat 中打开带有搜索突出显示的 PDF 文件。

例子：

```
http://example.org/doc.pdf#search="foo" 
```

有时这有效（打开 PDF 时突出显示结果），有时则无效（打开 PDF 时未突出显示结果）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T02:56:29.810

我发现失败的原因是文件扩展名是大写的。

例如，问题中的 URL 可以工作，但以下内容会失败：

```
http://example.org/doc.PDF#search="foo" 
```

解决方案是将文件扩展名更改为小写 .pdf，但如果有人有更好的解决方案，我很乐意接受不同的答案。

# r - 为什么我的直方图没有显示数字 9？

> ID：12170302
> 
> 赞同：-1
> 
> 时间：2012-08-29T02:56:53.720
> 
> 标签：r

我有一个`labels`使用以下值命名的变量：

```
 [1] 1 0 1 4 0 0 7 3 5 3 8 9 1 3 3 1 2 0 7 5 8 6 2 0 2 3 6 9 9 7 8 9 4 9 2 1 3
  [38] 1 1 4 9 1 4 4 2 6 3 7 7 4 7 5 1 9 0 2 2 3 9 1 1 1 5 0 6 3 4 8 1 0 3 9 6 2
  [75] 6 4 7 1 4 1 5 4 8 9 2 9 9 8 9 6 3 6 4 6 2 9 1 2 0 5 9 2 7 7 2 8 8 5 0 6 0
 [112] 0 2 9 0 4 7 7 1 5 7 9 4 6 1 5 7 6 5 0 4 8 7 6 1 8 7 3 7 3 1 0 3 4 5 4 0 5
 [149] 4 0 3 5 1 0 8 3 7 0 9 6 6 9 5 4 6 9 3 5 4 2 4 8 7 7 5 8 8 8 2 6 9 3 1 0 4
 [186] 1 5 9 0 6 2 1 3 0 6 0 0 8 3 2 0 0 6 0 0 4 7 2 7 1 9 9 3 9 8 4 6 6 5 3 8 1
 [223] 8 7 1 3 7 6 3 6 3 6 3 2 3 2 2 7 9 2 3 2 7 5 5 8 8 2 0 1 4 0 6 3 7 1 1 1 4
 [260] 7 0 2 9 2 0 5 6 0 8 9 6 2 0 0 7 2 0 4 2 0 9 1 6 9 3 0 0 2 0 6 8 4 0 7 2 1
 [297] 9 5 2 4 8 5 2 9 7 9 2 9 7 4 9 3 2 7 3 6 3 6 8 8 3 7 0 9 2 7 9 0 5 4 5 8 4
 [334] 3 3 1 7 8 9 7 6 2 1 7 0 5 6 5 2 9 5 4 6 2 2 2 9 0 7 7 2 2 6 3 4 2 0 5 9 6
 [371] 2 1 9 0 6 0 4 8 4 3 1 5 4 2 9 5 7 3 1 5 4 5 3 7 3 8 6 2 4 6 1 1 4 0 0 5 8
 [408] 6 7 4 2 8 0 2 5 4 8 3 0 6 4 8 6 4 1 8 1 5 4 9 4 3 2 0 5 0 7 9 2 9 8 9 6 5
 [445] 2 4 4 6 4 8 4 1 7 5 8 9 5 9 3 2 5 8 2 2 7 2 8 4 1 9 3 6 0 2 2 9 1 2 7 2 1
 [482] 3 4 9 1 8 0 2 2 3 4 1 3 7 4 1 4 1 5 9 6 9 0 5 7 6 8 2 0 7 3 5 8 2 8 2 4 8
 [519] 5 8 9 7 1 2 4 5 5 1 8 1 4 4 6 5 8 9 2 3 0 5 1 4 0 5 1 2 9 2 4 1 6 8 0 4 9
 [556] 0 0 5 9 2 3 5 9 4 4 3 9 2 3 5 6 5 2 7 2 4 2 4 7 2 5 3 7 6 1 0 7 5 4 5 1 6
 [593] 9 7 1 6 3 3 1 2 2 0 5 0 6 8 3 6 7 7 3 8 1 7 9 3 9 2 8 3 7 4 1 2 3 6 5 0 1
 [630] 8 6 9 2 1 6 0 2 8 0 8 8 9 1 2 2 1 4 8 1 4 4 5 1 8 7 7 9 7 0 6 9 4 5 6 2 5
 [667] 7 4 7 2 3 0 8 4 8 0 0 9 7 7 9 8 2 1 6 5 5 1 1 9 7 7 8 6 4 7 5 3 1 6 4 5 7
 [704] 4 1 8 3 5 1 7 1 1 8 6 4 3 8 3 1 2 8 9 0 9 1 2 3 3 0 3 0 2 0 3 3 8 3 5 7 0
 [741] 5 9 0 5 9 1 5 1 1 2 6 5 5 4 5 1 6 0 2 2 8 0 7 1 0 8 5 6 3 2 9 4 3 6 0 3 4
 [778] 1 5 9 3 0 5 0 6 2 7 6 6 6 9 6 7 8 2 0 6 0 8 9 5 3 6 7 4 3 9 7 2 0 4 7 2 2
 [815] 8 2 7 0 4 0 5 2 8 7 7 9 1 4 0 1 1 2 3 6 2 0 6 6 1 9 4 5 2 7 7 8 9 5 8 3 8
 [852] 5 6 2 0 9 7 1 8 2 6 9 8 4 9 4 1 3 8 4 0 7 7 3 7 6 6 8 8 2 7 0 4 3 7 7 0 8
 [889] 4 7 4 0 6 9 8 6 0 1 6 4 5 2 7 3 6 2 2 9 2 7 4 8 7 2 9 5 3 4 8 0 4 4 6 5 6
 [926] 1 2 2 8 4 5 7 8 0 6 8 9 1 7 7 2 6 3 9 9 1 0 4 2 5 4 4 9 2 6 7 2 8 3 3 2 7
 [963] 0 4 7 0 7 7 8 1 7 3 7 8 0 1 0 2 9 7 6 2 2 6 9 0 6 8 8 9 6 3 5 0 2 2 5 9 6
[1000] 4 
```

由于某种原因，当我运行`hist(labels)`它时，它会返回以下直方图，其中没有出现数字 9。

![在此处输入图像描述](../Images/19558052ab096e3a601294e1c6624cb0.png)

我在这里想念什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T03:00:08.593

最后一个栏计算了 9 的出现次数。您可以通过查看 的输出来检查`hist()`。

```
R> x <- rep(1:9, each=10)
R> hh <- hist(x, breaks=0:9)       # also creates chart
R> str(hh)
List of 7
 $ breaks     : int [1:10] 0 1 2 3 4 5 6 7 8 9
 $ counts     : int [1:9] 10 10 10 10 10 10 10 10 10
 $ intensities: num [1:9] 0.111 0.111 0.111 0.111 0.111 ...
 $ density    : num [1:9] 0.111 0.111 0.111 0.111 0.111 ...
 $ mids       : num [1:9] 0.5 1.5 2.5 3.5 4.5 5.5 6.5 7.5 8.5
 $ xname      : chr "x"
 $ equidist   : logi TRUE
 - attr(*, "class")= chr "histogram"
R> 
```

正如我们预期的那样，9 计数 10。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-29T03:06:17.793

您可以使用`axis`来定义轴。（`plot.histogram`有一些默认值）

```
labels <- sample(1:9, 1000, replace = T)
.h <- hist(labels)
# if you save the histogram, then you can refer to the components
axis(1, at = .h$breaks)) 
```

![在此处输入图像描述](../Images/94afd1acb9668319135cf7ce398ad793.png)

# java - Rhino 报告丢失：在属性 id 之后

> ID：12170305
> 
> 赞同：1
> 
> 时间：2012-08-29T02:57:33.603
> 
> 标签：java, javascript, macos, mozilla, rhino

我在带有 JDK 1.6.0_33 的 Mac OSX 上使用 Rhino 1.7 R4 和 envjs 1.2

如果我运行：

```
java -jar rhino-1.7R4.jar -opt -1 
```

进而：

```
load('env.rhino-1.2.js') 
```

然后脚本加载成功。

当我通过 RhinoTest.java 从 Java 加载相同的 JS 脚本时：

```
import org.apache.commons.io.IOUtils;
import org.mozilla.javascript.Context;
import org.mozilla.javascript.ContextAction;
import org.mozilla.javascript.Script;
import org.mozilla.javascript.Scriptable;
import org.mozilla.javascript.tools.shell.Main;
import org.mozilla.javascript.tools.shell.ShellContextFactory;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;

public class RhinoTest {
    static final Logger LOGGER = LoggerFactory.getLogger(RhinoTest.class);
    static private Scriptable SCRIPTABLE;
    static private List<Script> scripts;

    public static void main(String[] args) {
        ShellContextFactory cxFactory = Main.shellContextFactory;

        cxFactory.call(new ContextAction() {
            @Override
            public Object run(Context cx) {
                final Initiator initiator = new Initiator(cx).init();

                LOGGER.trace("Run script");
                try {
                    return initiator.execute();
                } finally {
                }
            }

            class Initiator {
                Initiator(Context context) {
                    this.cx = context;
                }

                Initiator init() {
                    if (SCRIPTABLE == null)
                        createScriptable();
                    initContext();
                    return this;
                }

                Object execute() {
                    return null;
                }

                void createScriptable() {

                    LOGGER.trace("init standard objects");
                    SCRIPTABLE = cx.initStandardObjects();

                    LOGGER.trace("set optimization level to -1");
                    cx.setOptimizationLevel(-1);// bypass the 64k limit // interpretive mode
                    attachJs("env.rhino-1.2.js");

                    LOGGER.trace("set optimization level to 9");
                    cx.setOptimizationLevel(9);

                }

                @SuppressWarnings("deprecation")
                private void attachJs(String jsFileName) {
                    InputStream in = null;
                    InputStreamReader reader = null;
                    if (LOGGER.isDebugEnabled()) LOGGER.debug("loading " + jsFileName);
                    try {
                        in = RhinoTest.class.getResourceAsStream(jsFileName);
                        if (in == null)
                            throw new RuntimeException("cannot find js file : " + jsFileName);

                        reader = new InputStreamReader(in);
                        if (scripts == null)
                            scripts = new ArrayList<Script>();
                        scripts.add(cx.compileReader(SCRIPTABLE, reader, jsFileName, 1, null));

                        if (LOGGER.isDebugEnabled()) LOGGER.debug("loaded " + jsFileName);
                    } catch (IOException e) {
                        throw new RuntimeException("cannot load js file : " + jsFileName, e);
                    } finally {
                        IOUtils.closeQuietly(in);
                        IOUtils.closeQuietly(reader);
                    }
                }

                void initContext() {
                    LOGGER.trace("set optimization level to -1");
                    cx.setOptimizationLevel(-1);// bypass the 64k limit // interpretive mode

                    for (Script s : scripts) {
                        s.exec(cx, SCRIPTABLE);
                    }

                }

                private final Context cx;
            }
        });

    }
} 
```

我得到：

```
Exception in thread "main" org.mozilla.javascript.EvaluatorException: missing : after property id (env.rhino-1.2.js#2121)
at org.mozilla.javascript.DefaultErrorReporter.runtimeError(Unknown Source)
at org.mozilla.javascript.DefaultErrorReporter.error(Unknown Source)
at org.mozilla.javascript.Parser.addError(Unknown Source)
at org.mozilla.javascript.Parser.reportError(Unknown Source)
at org.mozilla.javascript.Parser.mustMatchToken(Unknown Source)
at org.mozilla.javascript.Parser.primaryExpr(Unknown Source)
at org.mozilla.javascript.Parser.memberExpr(Unknown Source)
at org.mozilla.javascript.Parser.unaryExpr(Unknown Source)
at org.mozilla.javascript.Parser.mulExpr(Unknown Source)
at org.mozilla.javascript.Parser.addExpr(Unknown Source)
at org.mozilla.javascript.Parser.shiftExpr(Unknown Source)
at org.mozilla.javascript.Parser.relExpr(Unknown Source)
at org.mozilla.javascript.Parser.eqExpr(Unknown Source)
at org.mozilla.javascript.Parser.bitAndExpr(Unknown Source)
at org.mozilla.javascript.Parser.bitXorExpr(Unknown Source)
at org.mozilla.javascript.Parser.bitOrExpr(Unknown Source)
at org.mozilla.javascript.Parser.andExpr(Unknown Source)
at org.mozilla.javascript.Parser.orExpr(Unknown Source)
at org.mozilla.javascript.Parser.condExpr(Unknown Source)
at org.mozilla.javascript.Parser.assignExpr(Unknown Source)
at org.mozilla.javascript.Parser.argumentList(Unknown Source)
at org.mozilla.javascript.Parser.memberExprTail(Unknown Source)
at org.mozilla.javascript.Parser.memberExpr(Unknown Source)
at org.mozilla.javascript.Parser.unaryExpr(Unknown Source)
at org.mozilla.javascript.Parser.mulExpr(Unknown Source)
at org.mozilla.javascript.Parser.addExpr(Unknown Source)
at org.mozilla.javascript.Parser.shiftExpr(Unknown Source)
at org.mozilla.javascript.Parser.relExpr(Unknown Source)
at org.mozilla.javascript.Parser.eqExpr(Unknown Source)
at org.mozilla.javascript.Parser.bitAndExpr(Unknown Source)
at org.mozilla.javascript.Parser.bitXorExpr(Unknown Source)
at org.mozilla.javascript.Parser.bitOrExpr(Unknown Source)
at org.mozilla.javascript.Parser.andExpr(Unknown Source)
at org.mozilla.javascript.Parser.orExpr(Unknown Source)
at org.mozilla.javascript.Parser.condExpr(Unknown Source)
at org.mozilla.javascript.Parser.assignExpr(Unknown Source)
at org.mozilla.javascript.Parser.expr(Unknown Source)
at org.mozilla.javascript.Parser.statementHelper(Unknown Source)
at org.mozilla.javascript.Parser.statement(Unknown Source)
at org.mozilla.javascript.Parser.parseFunctionBody(Unknown Source)
at org.mozilla.javascript.Parser.function(Unknown Source)
at org.mozilla.javascript.Parser.primaryExpr(Unknown Source)
at org.mozilla.javascript.Parser.memberExpr(Unknown Source)
at org.mozilla.javascript.Parser.unaryExpr(Unknown Source)
at org.mozilla.javascript.Parser.mulExpr(Unknown Source)
at org.mozilla.javascript.Parser.addExpr(Unknown Source)
at org.mozilla.javascript.Parser.shiftExpr(Unknown Source)
at org.mozilla.javascript.Parser.relExpr(Unknown Source)
at org.mozilla.javascript.Parser.eqExpr(Unknown Source)
at org.mozilla.javascript.Parser.bitAndExpr(Unknown Source)
at org.mozilla.javascript.Parser.bitXorExpr(Unknown Source)
at org.mozilla.javascript.Parser.bitOrExpr(Unknown Source)
at org.mozilla.javascript.Parser.andExpr(Unknown Source)
at org.mozilla.javascript.Parser.orExpr(Unknown Source)
at org.mozilla.javascript.Parser.condExpr(Unknown Source)
at org.mozilla.javascript.Parser.assignExpr(Unknown Source)
at org.mozilla.javascript.Parser.expr(Unknown Source)
at org.mozilla.javascript.Parser.primaryExpr(Unknown Source)
at org.mozilla.javascript.Parser.memberExpr(Unknown Source)
at org.mozilla.javascript.Parser.unaryExpr(Unknown Source)
at org.mozilla.javascript.Parser.mulExpr(Unknown Source)
at org.mozilla.javascript.Parser.addExpr(Unknown Source)
at org.mozilla.javascript.Parser.shiftExpr(Unknown Source)
at org.mozilla.javascript.Parser.relExpr(Unknown Source)
at org.mozilla.javascript.Parser.eqExpr(Unknown Source)
at org.mozilla.javascript.Parser.bitAndExpr(Unknown Source)
at org.mozilla.javascript.Parser.bitXorExpr(Unknown Source)
at org.mozilla.javascript.Parser.bitOrExpr(Unknown Source)
at org.mozilla.javascript.Parser.andExpr(Unknown Source)
at org.mozilla.javascript.Parser.orExpr(Unknown Source)
at org.mozilla.javascript.Parser.condExpr(Unknown Source)
at org.mozilla.javascript.Parser.assignExpr(Unknown Source)
at org.mozilla.javascript.Parser.expr(Unknown Source)
at org.mozilla.javascript.Parser.statementHelper(Unknown Source)
at org.mozilla.javascript.Parser.statement(Unknown Source)
at org.mozilla.javascript.Parser.parse(Unknown Source)
at org.mozilla.javascript.Parser.parse(Unknown Source)
at org.mozilla.javascript.Context.compileImpl(Unknown Source)
at org.mozilla.javascript.Context.compileReader(Unknown Source)
at org.mozilla.javascript.Context.compileReader(Unknown Source)
at RhinoTest$1$Initiator.attachJs(RhinoTest.java:85)
at RhinoTest$1$Initiator.createScriptable(RhinoTest.java:63)
at RhinoTest$1$Initiator.init(RhinoTest.java:44)
at RhinoTest$1.run(RhinoTest.java:28)
at org.mozilla.javascript.Context.call(Unknown Source)
at org.mozilla.javascript.ContextFactory.call(Unknown Source)
at RhinoTest.main(RhinoTest.java:25)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120) 
```

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T00:00:39.393

弗拉基米尔，

你是对的，这是一个版本的事情。

事实证明，我导入的蜡染库包含另一个版本的 rhino。

通过从我的项目中为每个 batik 依赖项排除 batik-js，这个问题就消失了。

# c - 是否有可以正确重构此 C 代码的工具？

> ID：12170310
> 
> 赞同：1
> 
> 时间：2012-08-29T02:58:17.533
> 
> 标签：c, refactoring, automated-refactoring

假设我有以下代码（array* 函数是我们用于可调整大小的数组的函数，它们对空初始化的指向数组的指针进行操作）：

```
typedef struct MyStruct
{
    int i;
} MyStruct;

MyStruct* GetNewMyStruct(int i)
{
    MyStruct* s = malloc(sizeof(MyStruct));
    s->i = i;
    return s;
}

int SomeFunction(int number, MyStruct *elem)
{
    MyStruct **structs = NULL;
    int i;
    for (i = 0; i < number; i++)
        arrayPush(&structs, GetNewMyStruct(i));
    arrayPush(&structs, elem);
    return arraySize(&structs);
} 
```

我认为 SomeFunction 太大了，我想重构它。目前在我工作的地方，我们使用 VisualAssist X，它具有一些重构功能，但是当我在此使用它时，它无法正常工作。如果我尝试使用它来重构循环，这就是我得到的：

```
void MyMethod( int number, MyStruct ** structs ) 
{
    int i;
    for (i = 0; i < number; i++)
        arrayPush(&structs, GetNewMyStruct(i));
}

int SomeFunction(int number, MyStruct *elem)
{
    MyStruct **structs = NULL;
    MyMethod(number, structs);
    arrrayPush(&structs, elem);
    return arraySize(&structs);
} 
```

这是不正确的。`MyMethod`应该采取 a `MyStruct ***`，而不是 a `MyStruct **`。这是因为我正在重构的代码采用`structs`. 结果是重构后的版本总是返回 1（因为只有一个对象被推入我的数组），而不是`number+1`. 是否有其他工具可以正确地进行这种类型的重构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:25:49.577

Eclipse CDT 正确地做到了这一点（至少是当前版本的 Juno）。选择`i`和循环的声明并执行*Refactor > Extract Function*，并设置`structs`为输出参数，产生：

```
void MyMethod(int number, MyStruct*** structs) {
    int i;
    for (i = 0; i < number; i++)
        arrayPush(&*structs, GetNewMyStruct(i));
}

int SomeFunction(int number, MyStruct *elem)
{
    MyStruct **structs = NULL;
    MyMethod(number, &structs);
    arrayPush(&structs, elem);
    return arraySize(&structs);
} 
```

# ios - 为桌面 Mac 构建和编译 PJSIP

> ID：12170311
> 
> 赞同：2
> 
> 时间：2012-08-29T02:58:19.390
> 
> 标签：ios, xcode, sip, pjsip

如何为桌面 Mac 构建和编译 PJSIP？我已经完成了 iPhone/iPad。但是还有一个问题，所以现在我想尝试在桌面 Mac 版本中构建。

我关注[了这个链接](http://trac.pjsip.org/repos/wiki/Getting-Started/Autoconf)，老实说我完全不明白如何使用它。因为我在移动设备上所做的事情是不同的。

有什么线索吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T12:29:10.127

对于 iphone，您必须将 PJ_CONFIG_IPHONE 定义到您的配置中：

```
#define PJ_CONFIG_IPHONE 1 
```

这部分不再需要。然后你必须调用 ./configure-iphone for mac 你只需要调用 ./configure 其余的就像在 linux 和 unix 环境中编译和安装任何其他包一样：

```
# ./configure
# make dep
# make
# make install 
```

# jquery - 将 Json 数据动态插入到服务器生成的 HTML 表中

> ID：12170317
> 
> 赞同：1
> 
> 时间：2012-08-29T02:59:13.180
> 
> 标签：jquery, ajax, asp.net-mvc, razor

我有一个使用 MVC HTML 助手的服务器生成内容表，如下所示：

```
<table>
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.TimeLogEntries[0].Description)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.TimeLogEntries[0].StartTime)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.TimeLogEntries[0].EndTime)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.TimeLogEntries[0].Location)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.TimeLogEntries[0].IsBillable)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.TimeLogEntries[0].IsBilled)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.TimeLogEntries[0].Phase)
            </th>
            <th></th>
        </tr>

        @foreach (var item in Model.TimeLogEntries)
        {
            <tr>
                <td>
                    @Html.DisplayFor(model => item.Description)
                </td>
                <td class="no-wrap">
                    @Html.DisplayFor(model => item.StartTime)
                </td>
                <td class="no-wrap">
                    @Html.DisplayFor(model => item.EndTime)
                </td>
                <td>
                    @Html.DisplayFor(model => item.Location)
                </td>
                <td class="no-wrap">
                    @Html.DisplayFor(model => item.IsBillable)
                </td>
                <td class="no-wrap">
                    @Html.DisplayFor(model => item.IsBilled)
                </td>
                <td class="no-wrap">
                    @Html.DisplayFor(model => item.Phase)
                </td>
                <td class="no-wrap">
                    @Html.ActionLink("Edit", "Edit", "TimeLog", new { id = item.TimeLogEntryId }, null) |
            @Html.ActionLink("Delete", "Delete", "TimeLog", new { id = item.TimeLogEntryId }, null)
                </td>
            </tr>
        }
    </table> 
```

我希望能够使用 jQuery 向服务器生成的表添加、更改和删除行，但是我应该如何知道 HTML 助手生成的 HTML 内容？我已经在控制器上编写了返回 Json 的操作，但我需要知道如何在客户端对其进行格式化。在我的 JavaScript 代码中复制 HTML 模板似乎是非常糟糕的做法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:49:08.087

你可以把你的表放在一个局部视图中。定义一个返回局部视图的动作。

并且您可以在删除函数后调用通过jquery返回部分视图的操作。

```
$.ajax({
         url: '/ActionThatReturnsPartialView',
         cache: false,
         type: 'post'
         success: function (data) {
             $('#tableID').replaceWith(data);
         },
         error: function (e) {
             alert(e.responseText);                            
         }
}); 
```

# java - 使用“+”组合两个字符串

> ID：12170318
> 
> 赞同：0
> 
> 时间：2012-08-29T02:59:47.267
> 
> 标签：java, string-concatenation

我有一堂课：

```
class Employee{...} 
```

然后 ：

```
Employee aEmployee = new Employee(...);
int i = 10;
String str = aEmployee + i; 
```

编译时会产生错误，为什么？

**编辑**：我没有覆盖类`toString()`中的方法`Employee`，但如果我尝试这个：

```
Employee aEmployee = new Employee(...);
String h = "hello";
String str = aEmployee + h; 
```

这次会很好，编译和运行。

那么：为什么将变量更改为变量`int`后就`i`可以了？ `String``h`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T03:01:30.913

`Employee`不是`String`, 并且不能使用`+`运算符连接。

事实上，在 Java 中，没有运算符重载之类的东西（除了一些融入语言的东西，`String`就是一个典型的例子）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-29T03:01:46.177

`aEmployee`不是一个`String`它是一个`Object`。

在不知道您的`Employee`对象是如何设置的情况下，很难为您提供合适的解决方案，但是......

```
String str = aEmployee.toString() + i; 
```

将阻止编译器抱怨，但可能不会给你你期望的结果。

您最好尝试使用的已知属性执行此操作`Employee`

```
String str = aEmployee.aMethodThatReturnsString() + i; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T04:18:05.470

或许

```
String str = aEmployee.EName + i; 
```

其中 EName 是 Employee Class 和 string 类型的属性

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T03:06:10.283

`Employee aEmployee = new Employee(...);`

`aEmployee`是**Employee 类型的****对象引用变量**，指向堆上的**Employee 对象**。

 ****`String str = aEmployee + i;`

在上面的语句中，您试图连接一个**字符串和一个对象引用变量。**

尝试这样做......

`String str = aEmployee.toString() + i;`

如果你**没有重写**Employee 类中的`toString()`方法，那么你会得到这样的东西，`getClass().getName()@hashCode + i`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T03:10:05.320

```
Employee aEmployee = new Employee(...); 
```

aEmployee 是一个对象引用而不是一个字符串。所以你不能连接它。

要结合，您需要将对象转换为 toString() 然后可以连接。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-29T03:51:58.787

因为`aEmployee`是`Employee`类的对象所以该对象不属于String类。如果您需要与字符串连接，则必须使用`.toString()`方法。

```
String str = aEmployee.toString() + i; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-23T04:15:50.117

第一个示例无法编译的原因是`+`运算符的性质。在Java中，`+`是一个*重载*运算符，其含义取决于左右操作数子表达式的静态类型。

*   如果两个操作数都是原始数字类型（或其包装类型），则运算符是数字加法。

*   如果其中一个或两个操作数都是字符串，则运算符是字符串连接。

*   如果以上都不是，则未定义运算符 - 编译错误。

在您的第一个示例中，`Employee`既不是字符串也不是数字，`i`也不是字符串，因此`+`运算符没有意义。

在第二个示例中，您已将第二个操作数更改为字符串，因此该运算符现在被识别为字符串连接。事实上，Java 将其视为等同于：

```
 String str = aEmployee.toString() + h; 
```

作为推论，您可以通过将第一个示例更改为：

```
 String str = aEmployee.toString() + i; 
```****

# c# - 用 asp.net 和 C# 编写的下拉事件处理程序

> ID：12170322
> 
> 赞同：0
> 
> 时间：2012-08-29T03:00:13.520
> 
> 标签：c#, asp.net, vb.net

我应该在下拉菜单中启用哪些属性以及如何在 C# 中启动代码？我使用 Visual Studio 作为我的后端。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T03:06:24.857

ASPX：

设置自动回发并添加事件处理程序：

```
<asp:DropDownList runat="server" id="foo" AutoPostback="true" OnSelectedIndexChanged="foo_SelectedIndexChanged>
</asp:DropDownList> 
```

在 .CS

```
protected void foo_SelectedIndexChanged(Object sender, EventArgs e){

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T04:33:05.823

希望这适用于您的要求。1\. 从数据库中获取数据集值。2\. 投标所需的 DropDownList 3\. 为 DropDownList 选择默认值。

确保将 autopost back 属性检查为“True”

[http://www.codeproject.com/Questions/400833/How-to-bind-or-populate-data-into-a-Dropdown-List](http://www.codeproject.com/Questions/400833/How-to-bind-or-populate-data-into-a-Dropdown-List)

# backbone.js - Todo.js（Backbone.js 教程）中引用的“todo”参数是什么？

> ID：12170324
> 
> 赞同：0
> 
> 时间：2012-08-29T03:00:27.433
> 
> 标签：backbone.js

在 addOne(todo) 中，我无法理解引用的参数是什么：

在应用视图中：

```
initialize: function(){
    Todos.bind('add', this.addOne, this);  //So "this" keyword is being passed, which refers to AppView itself
    //More code here
}, 
```

然后在 addOne 函数中，

```
addOne: function(todo) {
    var view = new TodoView({model: todo});
    this.$("#todo-list").append(view.render().el);
}, 
```

请参阅此处的注释源：http: [//backbonejs.org/docs/todos.html](http://backbonejs.org/docs/todos.html)

那么 AppView 不是被传入 addOne(todo) 吗？不应该将模型传递给模型： addOne() 中的 todo 吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T03:04:12.533

`this`作为第三个参数传递给 bind 函数的that 用于将函数的 绑定`context`到 current `context`，它不作为参数传递。在引擎盖下绑定使用[underscore.js 的](http://underscorejs.org/#bind) `_bind()`。

编辑：我认为让您感到困惑的是，调用该`addOne`方法的位置并不明显。基本上，`add` `event`当将新项目添加到集合中时会触发 ，您可以绑定到此事件，并且主干会将新添加的模型传递给绑定到 this 的模型`method`（`event`因此在这种情况下，`addOne`方法绑定到此事件并且todo 是新模型）。本例中触发`add`事件的原因是通过`Todos.create({title: this.input.val()});`AppView 的`createOnEnter`方法创建了一个新的待办事项。

# google-dfp - 如何使用 googletag.pubads().refresh() 让广告刷新？

> ID：12170327
> 
> 赞同：2
> 
> 时间：2012-08-29T03:00:58.747
> 
> 标签：google-dfp

我在这样的页面中有一个广告和一个链接：

```
<!DOCTYPE html>
<head profile="http://www.w3.org/1999/xhtml/vocab">
<title>DPT - Asynchronous + Single Rest Architecture</title>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
  <script type='text/javascript'>
    var googletag = googletag || {};
    googletag.cmd = googletag.cmd || [];
    (function() {
    var gads = document.createElement('script');
    gads.async = true;
    gads.type = 'text/javascript';
    var useSSL = 'https:' == document.location.protocol;
    gads.src = (useSSL ? 'https:' : 'http:') +
    '//www.googletagservices.com/tag/js/gpt.js';
    var node = document.getElementsByTagName('script')[0];
    node.parentNode.insertBefore(gads, node);
    })();
  </script>
  <script type='text/javascript'>
    googletag.cmd.push(function() {
    googletag.pubads().enableAsyncRendering();
    googletag.defineSlot('/1001256/Home_Top_Leaderboard_728x90', [728, 90], 'div-gpt-ad-1342320102476-72').addService(googletag.pubads());
    googletag.pubads().enableSingleRequest();
    googletag.enableServices();
    });
</script>
</head>
<body>
    <div id="div-gpt-ad-1342320102476-72" style="width:728px; height:90px;">
      <script type="text/javascript">
        googletag.cmd.push(function() { googletag.display('div-gpt-ad-1342320102476-72'); });
      </script>
    </div>
    <a id="refresh" href="#">Refresh ad</a>
    <script type='text/javascript'>
    (function ($) {
        $('#refresh').click(function() {
         googletag.cmd.push(googletag.pubads().refresh());
        return false;
        });
    })(jQuery);
    </script>
</body>
</html> 
```

第一次点击链接时，广告会刷新。其他时间什么都没有发生。即使只是在 Firebug 等中调用 refresh() 方法，在第一次之后也无济于事。

以上有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-13T23:00:52.507

这是问题的根源

`googletag.pubads().enableSingleRequest();`

停止使用单请求模式，您可以毫无问题地调用 googletag.pubads().refresh()。没有设法找到任何解释这一点的文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-16T15:30:53.590

根据[https://support.google.com/dfp_premium/answer/4578089](https://support.google.com/dfp_premium/answer/4578089)，刷新函数采用 adSlots 数组的参数：

`googletag.pubads().refresh([gptAdSlots[0], gptAdSlots[1]]);`

这会改变你的行为吗？

如果做不到这一点，我建议通过将`google_console`or`googfc`参数添加到您的查询字符串来启用 Google Publisher Console（有关详细信息，请参阅[https://support.google.com/dfp_sb/answer/181070?hl=en](https://support.google.com/dfp_sb/answer/181070?hl=en)）并检查错误

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-28T08:43:32.230

试试看：

```
googletag.pubads().refresh(null, {changeCorrelator: false}); 
```

来自[https://developers.google.com/doubleclick-gpt/reference](https://developers.google.com/doubleclick-gpt/reference)：

> 获取并显示页面上特定或所有广告位的新广告。仅在异步渲染模式下工作。为了在所有浏览器中正常运行，调用 refresh 之前必须调用显示广告位。如果省略对 display 的调用，则刷新可能会出现意外行为。如果需要，可使用 disableInitialLoad 方法来阻止展示广告获取广告。

和：

> 与此刷新调用关联的配置选项。changeCorrelator 指定是否为获取广告生成新的相关器。我们的广告服务器会短暂地维护这个相关因子值（目前为 30 秒，但可能会发生变化），因此，具有相同相关因子的请求会被视为一次页面浏览。默认情况下，每次刷新都会生成一个新的相关器。

我希望它至少有一点帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-26T06:29:04.787

我现在看不到这个问题的任何答案。我在我目前正在工作的站点中遇到了同样的问题，并且幸运地通过添加 $(window).load(function(){ }); 意外地解决了这个问题；在javascript代码中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-01-04T00:37:40.853

您需要在两个部分中定义插槽：

```
<script src='https://www.googletagservices.com/tag/js/gpt.js'></script>
<script>
  var googletag = googletag || {};
  googletag.cmd = googletag.cmd || [];
</script>

    <script>
      googletag.cmd.push(function() {
        slot1 = googletag.defineSlot('/xxxx/suihgdwiuhdwiu', [728, 90], 'div-gpt-    ad-xxxxxxx-0').
    setTargeting("test", "refresh").
    addService(googletag.pubads());
        googletag.pubads().enableSingleRequest();
        googletag.enableServices();
      });
    </script> 
```

和：

```
<div id='div-gpt-ad-xxxxxxxxx-0' class="adsbygoogle">
<script>
googletag.cmd.push(function() { googletag.display('div-gpt-ad-xxxxxxxx-0'); });
setInterval(function(){googletag.pubads().refresh([slot1]);}, 60000);
</script>
</div>
</div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-29T08:13:15.547

我认为您的广告单元定义不太正确。

尝试：

```
<html>
<head>
    <title>DFP test</title>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

    <script type='text/javascript'>
        var googletag = googletag || {};
        googletag.cmd = googletag.cmd || [];
        (function() {
        var gads = document.createElement('script');
        gads.async = true;
        gads.type = 'text/javascript';
         var useSSL = 'https:' == document.location.protocol;
        gads.src = (useSSL ? 'https:' : 'http:') +
        '//www.googletagservices.com/tag/js/gpt.js';
        var node = document.getElementsByTagName('script')[0];
        node.parentNode.insertBefore(gads, node);
        })();
    </script>

    <script type="text/javascript">
        googletag.cmd.push(function() {
        googletag.pubads().enableAsyncRendering();
        googletag.defineSlot('/1234567/Home_Top_Leaderboard_728x90', [728, 90], 'div-gpt-ad-1342320102476-72').addService(googletag.pubads());
        googletag.pubads().enableSingleRequest();
        googletag.enableServices();
        });
    </script>

</head>
<body>

    <div id='div-gpt-ad-1342320102476-72' style='width:728px; height:90px;'>
        <script type='text/javascript'>
                googletag.cmd.push(function() { googletag.display('div-gpt-ad-1342320102476-72'); });
        </script>
    </div>

    <a id="refresh" href="#">Refresh ad</a>

    <script type='text/javascript'>
        (function ($) {
            $('#refresh').click(function() {
                googletag.cmd.push(googletag.pubads().refresh());
                return false;
            });
        })(jQuery);
    </script>

</body>
</html> 
```

显然，要使其正常工作，您需要将 /1234567/Home_Top_Leaderboard_728x90 更改为正确的值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-08T04:27:37.147

如果你想让广告位被刷新也许可以使用这种方法，

```
<!-- header script -->
<script async='true' src='https://securepubads.g.doubleclick.net/tag/js/gpt.js'></script>
<script>
    var googletag = googletag || {};
    googletag.cmd = googletag.cmd || [];
    var REFRESH_KEY='refresh';
    var REFRESH_VALUE='true';
</script>
<script>
    googletag.cmd.push(function() {
        var slot_bottomframe = googletag.defineSlot('/1001256/Home_Top_Leaderboard_728x90', [728,90], 'div-gpt-ad-1342320102476-72');
        slot_leaderboard.setTargeting('pos',['leaderboard']);
        slot_leaderboard.setTargeting(REFRESH_KEY,REFRESH_VALUE);
        slot_leaderboard.addService(googletag.pubads());

        var SECOND = 60;
        googletag.pubads().addEventListener('impressionViewable',function(event) {
            var slot=event.slot;
            if(slot.getTargeting(REFRESH_KEY).indexOf(REFRESH_VALUE)>-1) {
              setTimeout(function() {
                googletag.pubads().refresh([slot]);
              }, SECOND*1000);
            }
        });

        googletag.pubads().enableSingleRequest();
        googletag.pubads().collapseEmptyDivs();
        googletag.enableServices();
});
</script>
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-02-26T19:46:56.923

对我来说，解决方案是：googletag.pubads().updateCorrelator(); googletag.pubads().refresh();

# fancybox-2 - fancybox 2 & IE8 - 没有背景覆盖

> ID：12170330
> 
> 赞同：3
> 
> 时间：2012-08-29T03:01:14.100
> 
> 标签：fancybox-2

我正在使用fancybox 2，并且背景覆盖[具有透明度]存在问题。我的叠加助手看起来像：

```
overlay : {
        css : {
            'background' : 'rgba(42, 42, 42, 0.95)'
        }
    } 
```

正如我所说，红色 rgba 与 IE<-8 不兼容

- - - 解决方案 - - - - -

我找到了这个解决方案：

```
overlay : {
        css : {
    'background':'transparent',
            'filter':'progid:DXImageTransform.Microsoft.gradient
             (startColorstr=#F22a2a2a,endColorstr=#F22a2a2a)', 
            'zoom': '1',
            'background' : 'rgba(42, 42, 42, 0.95)'
        }
    } 
```

# c# - Entity Framework 4 不支持 SQLite

> ID：12170334
> 
> 赞同：3
> 
> 时间：2012-08-29T03:01:18.110
> 
> 标签：c#, .net, sqlite, entity-framework-4

我正在使用 Entity Framework 4 代码优先方法自动创建 SQLite 数据库，我收到一条错误消息，告诉我 ProviderIncompatibleException：

```
[System.Data.ProviderIncompatibleException] = {"CreateDatabase is not supported by the provider."} 
```

我以为 EF 4 支持它？

我在 app.config 中使用它：

```
<system.data>
    <DbProviderFactories>
      <remove invariant="System.Data.SQLite"/>
      <add name="SQLite Data Provider" invariant="System.Data.SQLite"           
           description=".Net Framework Data Provider for SQLite"                      
           type="System.Data.SQLite.SQLiteFactory, System.Data.SQLite, Version=1.0.81.0, Culture=neutral, PublicKeyToken=db937bc2d44ff139" />
    </DbProviderFactories>
  </system.data> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T07:30:15.610

对 Code-First（您提到的 CreateDatabase() 方法）和 Code-First Migrations（Code-First 开发的一种新方法）的支持是在某个 EF 提供程序的级别上实现的。在 System.Data.SQLite 的情况下，所有这些功能都没有在提供程序中实现。如果您需要它，您应该使用其他 EF 提供程序。例如，Devart dotConnect for SQLite 支持[Code-First](http://blogs.devart.com/dotconnect/entity-framework-code-first-support-for-oracle-mysql-postgresql-and-sqlite.html)和[Code-First Migrations](http://blogs.devart.com/dotconnect/entity-framework-code-first-migrations-support-for-oracle-mysql-postgresql-and-sqlite.html)。

德瓦特团队

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T04:30:47.517

这通常是由构建 SQLite 数据提供程序的 .NET 2 与您实际使用的 .NET 4 之间的兼容性问题引起的。

看看这个链接，它应该会给你答案： [system.data.sqlite .net 4](https://stackoverflow.com/questions/2605490/system-data-sqlite-net-4)

请注意，您必须在模型所在的 app.config 或 web.config 以及入口点项目（例如，您的 .exe 或 asp.net 项目）中应用此设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-07T19:50:55.017

@Kev Fixx: If you're using SQLite provider from [https://system.data.sqlite.org/](https://system.data.sqlite.org/)‎, then it doesn't support Migrations (such as Create Database). You can use a commercial one (like from Devart) or you write your own Migration. This article uses the concept from Android to make a simple Migration strategy [http://hintdesk.com/sqlite-with-entity-framework-code-first-and-migration/](http://hintdesk.com/sqlite-with-entity-framework-code-first-and-migration/) . Take a look if it helps you.

# makefile - 读取makefile中的输入变量并根据其名称设置变量

> ID：12170339
> 
> 赞同：37
> 
> 时间：2012-08-29T03:02:11.777
> 
> 标签：makefile, gnu-make

我有一个makefile，我想从输入中读取模块名称，然后根据它的名称制作目录。这是我的代码：

```
build:  
    @read -p "Enter Module Name:" module;  
    module_dir=./modules/$$module  
    mkdir -p $$module_dir/build; 
```

但是在设置**module_dir**之后，它只包含**./modules/**（没有连接模块名称）。
我的代码有什么问题？

谢谢你的回答

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-08-29T03:31:24.717

每个命令都在其自己的子 shell 中运行，因此变量无法从一个命令传递到下一个命令。把它们放在同一行，它们就会起作用：

```
build:  
    @read -p "Enter Module Name:" module; \  
    module_dir=./modules/$$module; \
    mkdir -p $$module_dir/build 
```

# android - WebView 中的 JavaScript

> ID：12170341
> 
> 赞同：0
> 
> 时间：2012-08-29T03:02:46.877
> 
> 标签：android

我有一个嵌入了 javascript 的 html 块：

```
<!DOCTYPE html>
<html>
<body>
<h1>Testing</h1>
<script type="text/javascript">
var paEmbedId = 461745;
var paEmbedWidth = 600;
var paEmbedOemId = 24500;
var paServer = 'http://www.ncataggies.com/';
var paIframe = true;
</script>
<script type="text/javascript" src="http://www.ncataggies.com/oemjs/0/PhotoAlbum2009Embed.js"></script>
</body>
</html> 
```

当我将代码放入文本文档并从浏览器（作为 HTML 文件）运行时，代码运行完美。

如何在 android 中使用 WebView 来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T03:05:21.997

您可以使用小部件[`loadData`](http://developer.android.com/reference/android/webkit/WebView.html)的方法`WebView`：

```
 String summary = "<html><body>You scored <b>192</b> points.</body></html>";
 webview.loadData(summary, "text/html", null);
 // ... although note that there are restrictions on what this HTML can do.
 // See the JavaDocs for loadData() and loadDataWithBaseURL() for more info. 
```

如果没有启用 JS，那么你也可以在 WebView 中启用 JS：

```
webview.getSettings().setJavaScriptEnabled(true); 
```

但在此之前，您可能想从 Android 阅读此内容：

> 默认情况下，WebView 不提供类似浏览器的小部件，不启用 JavaScript 并且忽略网页错误。如果您的目标只是将一些 HTML 显示为 UI 的一部分，这可能没问题；除了阅读网页之外，用户不需要与网页进行交互，并且网页也不需要与用户进行交互。如果您确实想要一个成熟的 Web 浏览器，那么您可能希望使用 URL Intent 调用 Browser 应用程序，而不是使用 WebView 显示它。

# wordpress - 使用 Magpie 过滤掉包含特定图像的 RSS 项目

> ID：12170342
> 
> 赞同：3
> 
> 时间：2012-08-29T03:02:49.727
> 
> 标签：wordpress, rss, magpie

在这方面与 Wordpress 合作。我正在使用 Magpie 来获取 RSS 提要，但我只希望它显示包含特定图像的项目。这是我要搜索的特定标签：

```
<media:thumbnail url="http://media.publicbroadcasting.net/wfpl/events/images/ourPick5.gif"/> 
```

这是我在这个应用程序中使用的特定代码。它是基本的，而且我对 Magpie 或 PHP 并不是非常熟练（我假设对于那些对 PHP 有更深入了解的人来说，有更优雅的方法可以做到这一点）：

```
<?php include_once(ABSPATH.WPINC.'/rss.php'); $feed = fetch_rss('http://www.publicbroadcasting.net/wfpl/.eventsfeed'); $items = array_slice($feed->items, 0, 4);?>

<?php if (!empty($items)) : ?>
<?php foreach ($items as $item) : ?>

<?php if (!preg_match('/<media:thumbnail\surl\="http:\/\/media.publicbroadcasting.net\/wfpl\/events\/images\/ourPick5.gif".+?>/i', $item['description'])) 
continue; ?>

    <li><a href="<?php echo $item['link']; ?>"><div class="item-headline"><?php echo $item['title']; ?></div>
    <div class="item-info"><?php echo $item['description']; ?>
    </div></a></li></ul>

<?php endforeach; ?>
<?php endif; ?> 
```

同样，我只想在“media:thumbnail”标签中显示具有该特定图像 url 的项目并丢弃所有其他项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T07:38:02.007

添加这部分，

```
<?php if (!preg_match('/<media:thumbnail\surl\="http:\/\/media.publicbroadcasting.net\/wfpl\/events\/images\/ourPick5.gif".+?>/i', $item['description'])) 
    continue; ?> 
```

前

```
<li><a href="<?php echo $item['link']; ?>"><div class="item-headline"><?php echo $item['title']; ?></div>
    <div class="item-info"><?php echo $item['description']; ?>
    </div></a></li> 
```

# c++ - ofstream 不会写所有东西——截断的数据

> ID：12170348
> 
> 赞同：0
> 
> 时间：2012-08-29T03:03:45.247
> 
> 标签：c++, fstream

我在代码的最后一部分遇到了我的 ofstream 变量的问题。如何避免丢失 ofstream 中的信息？该问题是由程序的最后一部分产生的。

这是我得到的：

```
Action Movies

Comedy Movies

Drama Movies

Horror Movies
There are no movies for this genre

Mystery Movies
There are no movies for this genre

Romantic Movies

Adventure Movies

Western Movies

ife 1946 D 130 30 8.6 1946 103101
The Best Years of Our Lives 1946 R 172 181 8.1 1946 17648
Lawrence of Arabia 1962 V 216 48 8.5 1962 80746
For a Few Dollars More 1965 W 132 123 8.2 1965 45515 
```

这是我应该得到的：

```
Action Movies
Braveheart 1995 A 177 88 8.3 1995 245089
Batman begins 2005 A 140 110 8.3 2005 275523

Comedy Movies
Amelie 2001 C 122 45 8.5 2001 185124
Singin' in the Rain 1952 C 103 77 8.3 1952 56368

Drama Movies
it's a Wonderful Life 1946 D 130 30 8.6 1946 103101

Horror Movies
There are no movies for this genre

Mystery Movies
There are no movies for this genre

Romantic Movies
The Best Years of Our Lives 1946 R 172 181 8.1 1946 17648

Adventure Movies
Lawrence of Arabia 1962 V 216 48 8.5 1962 80746

Western Movies
For a Few Dollars More 1965 W 132 123 8.2 1965 45515 
```

这是我的打印功能：错误必须在这里，但我不知道如何解决它

```
void movieType::printMovieInfo(char* outFileName) 
{
std::ofstream outFile;
if(!outFile.is_open()) 
    outFile.open(outFileName, std::ios::app);

outFile<<name<<" "<<year<<" "<<genre<<" "<<length<<" "<<rank;
outFile<<" "<<weight<<" "<<year<<" "<<votes<<std::endl;

} 
```

编辑为：

```
void movieType::printMovieInfo(std::ofstream& outFile) 
    {
    outFile<<name<<" "<<year<<" "<<genre<<" "<<length<<" "<<rank;
    outFile<<" "<<weight<<" "<<year<<" "<<votes<<std::endl;
    } 
```

在 main 的最后一部分：

```
ij.printMovieInfo("printList.txt"); 
```

变成

```
ij.printMovieInfo(outFile); 
```

这是我的主要功能：问题是在程序结束时生成的

```
#include "movieType.h"
#include <iostream>
#include <fstream>
#include <string>
#include "PQType.h"
#include "QueType.h"//FIFO queue 

using namespace std;

int main()
{
movieType movie[9];
ifstream inFile("movie1.txt");
ofstream outFile("printList.txt");

int i =0;
bool notDone=true;
while (notDone) 
{ 
    if (movie[i++].readMovieInfo(inFile)== false)
        notDone=false;    
}

PQType<movieType> PQqueue(8);

int j=0;
while(!PQqueue.IsFull())
{
    PQqueue.Enqueue(movie[j++]);
}

QueType<movieType> fifoQueue[8];

string Genre[8]={"Action", "Comedy", "Drama", "Horror", "Mystery", "Romantic", "Adventure","Western"};

movieType it;
while (!PQqueue.IsEmpty())
{
    PQqueue.Dequeue(it);

    if (it.getGenre() == 'A')
        fifoQueue[0].Enqueue(it);
    else if (it.getGenre() == 'C' )
        fifoQueue[1].Enqueue(it);
    else if (it.getGenre() == 'D')
        fifoQueue[2].Enqueue(it);
    else if (it.getGenre() == 'H')
        fifoQueue[3].Enqueue(it);
    else if (it.getGenre() == 'M')
        fifoQueue[4].Enqueue(it);
    else if (it.getGenre() == 'R')
        fifoQueue[5].Enqueue(it);
    else if (it.getGenre() == 'V')
        fifoQueue[6].Enqueue(it);
    else if (it.getGenre() == 'W')
        fifoQueue[7].Enqueue(it);
}

//Problem is generated here.
movieType ij;   
for (int i=0;i<8;++i)
{
    outFile<<Genre[i]<<" Movies"<<endl;

    if (fifoQueue[i].IsEmpty())
        outFile<<"There are no movies for this genre"<<endl;

    for(int j=0; fifoQueue[i].IsEmpty() != true; ++j)
    {
        fifoQueue[i].Dequeue(ij);
        ij.printMovieInfo("printList.txt");
    }

    outFile<<endl;
}
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T03:38:58.173

通过快速阅读您的代码，我注意到您正在打开文件进行两次写入。第一次是在您的 main 函数的开头，第二次是在您的 printMovieInfo 函数中。

您真的不应该打开一个文件进行两次写入，因为 2 个流可能位于不同的位置。

您可以做的是将您的主函数中的 ofstream 传递给您的 printMovieInfo 函数作为参考。希望这应该可以解决问题。

通过快速浏览您的代码，您还可以在调用 printMovieInfo 之前先刷新流。不过，我仍然会推荐第一个选项。

否则，正如 Roberto 所要求的，您可能无法从输入文件中获取所有数据。

# scala - 是否可以在 Scala "type test = Either[List[test], T]" 中表达以下内容

> ID：12170349
> 
> 赞同：2
> 
> 时间：2012-08-29T03:03:50.227
> 
> 标签：scala, types

是否可以在 Scala 中表达如下递归类型定义？

```
type test = Either[List[test], Int] 
```

**更新**

我的意图是表达如下功能：

```
def flatten[T](list: List[Either[List[T], T]]): List[T] = list flatMap {
    case Left(list)         => list
    case Right(element) => List(element)
} 
```

但它接受任意深度的类似结构

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T03:40:44.983

好吧，你可以这样做：

```
type test[T <: test[T]] = Either[List[T], Int]

scala> val x: test[Nothing] = Right(1)
x: test[Nothing] = Right(1)

scala> val y: test[test[Nothing]] = Left(List(x))
y: test[test[Nothing]] = Left(List(Right(1)))

scala> val z: test[_] = y
z: test[_] = Left(List(Right(1))) 
```

不知道你为什么想要这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T20:12:22.013

你不能有这样的递归类型别名。但是如果你创建一个单独的类，那就没问题了：

```
case class Test[+T](value: Either[List[Test[T]], T]) {
  def flatten: List[T] = value match {
    case Left(list)         => list.flatMap(_.flatten);
    case Right(element)     => List(element);
  }
} 
```

（编程中最有趣的类实际上是递归的。）

您不能拥有`type`像您这样的递归别名的原因是编译器需要扩展`type`别名以判断某物是否具有该类型。但是递归类型别名像

```
type test = Either[List[test], Int] 
```

扩展到无穷大：

```
Either[List[test], Int]
Either[List[Either[List[test], Int]], Int]
Either[List[Either[List[Either[List[test], Int]], Int]], Int]
... 
```

对于类，这不会发生，因为类将递归值“包装”成具有明确定义的类型（如`Test[T]`本例中）。类型的“扩展”只有在您引用内部的东西时才会发生（`value`在这种情况下）。

# jquery - 将一个类动态添加到 Bootstrap 的“popover”容器中

> ID：12170357
> 
> 赞同：74
> 
> 时间：2012-08-29T03:04:45.733
> 
> 标签：jquery, css, twitter-bootstrap

我已经彻底搜索过 StackOverflow 和谷歌，但结果都是空的。因此，如果已经提出并解决了这个问题，请提前道歉。

**注意：**我是 jQuery 的新手，所以我不确定如何自己编写。我确信这是一个简单的代码片段，但我无法理解它。

我要做的是使用一个`data-`元素（例如：`data-class`或类似元素）将一个新类（或 ID，我不再挑剔了！）附加到顶级 popover `<div>`。我目前拥有的代码如下：

*jQuery：*

```
$('a[rel=popover]')
    .popover({
        placement : 'bottom',
        trigger : 'hover'
    })
    .click(function(e) {
        e.preventDefault()
    }); 
```

*HTML：*

```
<a href="" rel="popover" data-class="dynamic-class" title="Title goes here" data-content="Content goes here"> 
```

理想情况下，我会吐出的那种 HTML 是这样的：

```
<div class="popover ... dynamic-class">
    <!-- remainder of the popover code as per usual -->
</div> 
```

这是我能做的吗？弹出窗口的引导站点上的文档有点稀疏，所以我花了一段时间才达到这一点，不幸的是:(

提前感谢您的所有回复！

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-09-10T11:13:43.113

您可以通过从调用者获取弹出框对象`data`并访问其`$tip`属性来执行此操作，而无需破解 Bootstrap 并且无需更改模板。

```
$('a[rel=popover]')
  .popover({ placement: 'bottom', trigger: 'hover' })
  .data('bs.popover')
  .tip()
  .addClass('my-super-popover'); 
```

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2013-02-14T04:27:15.857

在 2.3 版中还有另一种方法可以做到这一点，实际上非常简单。您覆盖默认模板以将类包含到容器中。

```
var pop = $('a', this.el).popover({
  trigger: 'click'
  , template: '<div class="popover awesome-popover-class"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'
}); 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-08-30T12:52:19.997

根据@bchhun 写的内容和很多挠头，我觉得我应该回答我自己的问题，因为我已经开始工作了。我还注意到这已被收藏和喜欢，所以我希望我能帮助像我这样的 jQuery 新手。

在当前的 Bootstrap 构建 [v2.1.0] 中，所有脚本都已合并。因此，如果您在构建中包含了所有脚本（并且没有编辑任何新行/删除了一些），那么请转到未`.js`压缩文件的第 1108 行。您将找到以下代码：

```
$tip
  .css(tp)
  .addClass(placement)
  .addClass('in') 
```

您将为此添加一个新行，即：

```
 .addClass(this.$element.attr("data-class")) 
```

因此，现在每当您添加`data-class`到 popover 调用时，它都会将属性添加到`<div class="popover">`div。

现在我看到了，它是如此明显:)

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2013-01-16T08:43:22.580

它是一个旧帖子，但我将其添加为参考。修改[Shankar Cabus](https://stackoverflow.com/users/980377/shankar-cabus)答案，而不是将动态类添加到父级，它将添加到创建的 .popover div 中。

```
$(function(){
    $('a[rel=popover]')
    .popover({
        placement : 'bottom',
        trigger : 'hover'
    })
    .on("hover", function(){
        $('.popover').addClass($(this).data("class")); //Add class .dynamic-class to <div>
    });
}); 
```

希望这可以帮助 ：）

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2013-11-09T12:14:08.497

仅将该类添加到适当的弹出框而不针对其他人如何？

```
$('#someElement').popover({placement: function(context, src) {
    $(context).addClass('my-custom-class');
    return 'top'; // - 'top' placement in my case
}); 
```

或一些变体，例如从“someElement”的数据中获取自定义类名，如下所示：

```
$('#someElement').popover({placement: function(context, src) {
    $(context).addClass($(src).data('customClassName'));
    return 'top';
}); 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2013-06-17T00:07:26.080

只需在初始化工具提示时设置隐藏的“模板”选项。我不知道为什么引导团队会保守这个秘密......

```
$(elem).popover({
    template: '<div class="popover YOURCLASS"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'
}).popover('show'); 
```

希望这可以帮助...

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2014-03-16T09:03:57.997

几年前有人问过这个问题，并且有很多答案。*但是......*我最近不得不自己解决同样的问题，而且我 - (a) 想要避免操纵源代码，并且 (b) 需要一个通用的解决方案来不断地重用（所以`template: '...'`每次初始化都使用该解决方案）。

我的解决方案很简单，与标记的答案有点相同——我认为 popover 是库*的扩展*`tooltip.js`。我的意思是-检查一下，源代码[只有一百多行](https://github.com/twbs/bootstrap/blob/master/js/popover.js)。所以我创建了一个名为 的文件`popover-extend.js`，并将整个 popover 源代码复制粘贴到其中。从那里很容易 - 简单地操作这些行：

```
Popover.DEFAULTS = $.extend({}, $.fn.tooltip.Constructor.DEFAULTS, {
    // add this:
    cls: ''
}); 
```

然后：

```
Popover.prototype.setContent = function () {
    // add this:
    if (this.options.cls) {
        $tip.addClass(this.options.cls);    
    } 
```

现在你可以这样做：

```
<a href="#" rel="popover" 
   data-cls="dynamic-class" 
   title="Title goes here" data-content="Content goes here"> 
```

如果您像我一样想要添加更多功能，这是一个非常好的方法。例如，这是我向标题添加通用关闭按钮的方式（尽管它要求弹出框具有指定的 id）：

```
// added this to the the DEFAULTS
close: ''

// added this to the setContent function
if (this.options.close) {
    var id = this.$element.attr('id'),
        btn = $("<button></button>", {
            "class": "close",
            "id": "close",
            "onclick": "$('#"+id+"').popover('hide');"
    }),

    title = $tip.find('.popover-title');

    btn.html("&times;");
    btn.appendTo(title);
} 
```

很酷的一点是，您在 DEFAULTS 中设置的所有内容都可以通过 html 进行配置，即如果您添加一个名为 的变量`foo`，您将能够自动通过`data-foo=`.

希望这可以帮助任何寻找替代操作源代码的人

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2013-05-31T14:26:07.790

我有同样的问题，我喜欢@Kate 的回答，但是源文件的更改将来会产生很多问题，当您更新引导程序的版本时，您可能会忘记这些小更改。所以我找到了另一种方法：

```
 $(element).popover({...}).data("popover").tip().addClass("your_class") 
```

作为@CorayThan 修复它`data("popover")`

popover的方法**tip()**返回 popover 元素，并在未创建时创建，因此即使您处于 popover 的初始化（这是我的情况 =D ） ，您也将**始终获得正确的 popover 元素。**

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-08-29T04:14:54.457

这里已经很晚了，我已经累了，但是如果您决定更新 bootstrap 的 js 文件，这里有一个快速的单行程序，将来将无法使用。

看看这个[gist](https://gist.github.com/3506680)第 150 行的 bootstrap-tooltip.js 文件。

这是修改后的工具提示：

![这是修改后的工具提示](../Images/95f62ac7b75fb846aee5a119eda1e8d1.png)

查看下方的检查器窗口，您会注意到*动态类*已添加到工具提示中。

明天我会发布一个更长期和适当的答案。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-10-14T15:51:39.993

这对我有用。它的灵感来自[此处](http://getbootstrap.com/javascript/#popovers-usage)的引导程序文档，即**事件**部分。

```
$("a[rel=popover]").popover().on("show.bs.popover", function(){
    $(".popover").addClass("your-custom-class");
}); 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-01-30T07:01:12.603

您也可以使用“模板”选项

```
$element.popover({                               
   html: true,
   trigger: 'click',
   template: '<div class="popover '+MY_CLASS+'" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>',
   content: function() {
    return 'hello';
   }
}); 
```

从您的数据类属性更新 MY_CLASS。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-12-02T03:07:43.790

您可以使用该`container`选项来解决此问题。

```
$('[data-toggle="popover"]').popover({
    container: '#foo'
}); 
```

或通过标签属性设置

```
<a href="#" data-toggle="popover" data-container="#foo" data-content="Content">Foo</a> 
```

并在关闭body标签之前添加它

```
<div id="foo"></div> 
```

然后你可以做类似的事情`#foo > .popover`。我知道这不是一个万能的解决方案，但它是一种方法。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-02-11T03:51:26.417

这从外部扩展您的类`bootstrap core class`，只需将属性`data-class`和选项添加`dataClass:`到您的`tooltip`函数中

```
!function($){   
    $.extend($.fn.tooltip.Constructor.DEFAULTS,{
        dataClass: false
    }); 
    var Tooltip = $.fn.tooltip.Constructor;
        _show = Tooltip.prototype.show;

    Tooltip.prototype.show = function (){
        _show.apply(this,Array.prototype.slice.apply(arguments));

        if (this.options.dataClass!=="undefined" && this.options.dataClass){
            var that = this;
            var $tip = this.tip();
            if (this.$element.attr("data-class") !== undefined)
                $tip.addClass(this.$element.attr("data-class"));
        }
    };
}(jQuery); 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-05-06T19:22:36.310

对于 bootstrap v3.3.2，您可以在 bootstrap.js 上找到这些行

```
 $tip
    .detach()
    .css({ top: 0, left: 0, display: 'block' })
    .addClass(placement)
    .data('bs.' + this.type, this) 
```

然后你添加这一行

```
 .addClass(this.$element.attr("data-class")) 
```

现在要在您的 popover 元素上添加一个类，您只需放置一个属性， `data-class="classexemple"`然后一切正常

[在www.mixpres.com](http://www.mixpres.com)上找到我们

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2017-03-10T10:32:54.303

在 Bootstrap 4 中，您可以使用以下`data-template`属性：

```
<button data-toggle="popover" data-template='<div class="popover MYSUPERCLASS" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>' data-offset="-10 0" data-html="true" data-trigger="focus" data-placement="bottom" data-content='My Popover'>Button</button> 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2018-07-27T11:48:48.747

```
$('a[rel=popover]')
  .popover({ placement: 'bottom', trigger: 'hover' })
  .data('bs.popover')
  .addAttachmentClass('my-own-popover') 
```

您将在元素中获得`bs-popover-my-own-popover`类。`.popover`

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2018-09-08T07:09:39.010

这个问题的最佳解决方案是扩展 popover 并构建您自己的 Popover 版本。下面是代码，它基于引导版本 3.3.7

```
 (function($){
            var PopoverEx = function(element, options){
                this.init('popover', element, options);
            }

                PopoverEx.prototype = $.extend({}, $.fn.popover.Constructor.prototype, {

                    constructor: PopoverEx,
                    tip: function(){
                        if(!this.$tip){
                            this.$tip = $(this.options.template);
                            if(this.options.modifier) this.$tip.addClass(this.options.modifier);
                        }
                        return this.$tip; 
                    }       
                });

            $.fn.popoverex = function(option){
               return this.each(function () {
                var $this   = $(this)
                var data    = $this.data('bs.popover')
                var options = typeof option == 'object' && option

                if (!data && /destroy|hide/.test(option)) return
                if (!data) $this.data('bs.popover', (data = new PopoverEx(this, options)))
                if (typeof option == 'string') data[option]()
              })
            }
        })(window.jQuery); 
```

用法

HTML 代码

```
 <a href="#" class="btn btn-large btn-danger" 
          rel="popover" 
          data-modifier="popover-info" 
          title="A Title" 
          data-content="And here's some amazing content.right?">Hover for popover</a> 
```

JS脚本

```
 jQuery(document).ready(function($) {
        $('[rel="popover"]').popoverex();
    }); 
```

您可以从这个 git 页面 [https://gist.github.com/vinoddC/475669d94e97f4d7b6bcfde4cef80420找到完整版本和描述](https://gist.github.com/vinoddC/475669d94e97f4d7b6bcfde4cef80420)

这是布赖恩伍德沃德作品的更新版本。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2020-06-15T08:56:17.600

我知道这个线程很旧，但是对于那些像我一样偶然发现这篇文章的人来说，这是另一种允许更多自定义的方法。我没有用 Bootstrap 4 测试过，但是用 Bootstrap 3 测试过。

您可以使用自定义数据属性通过 html 元素将 css 类“提交”到弹出窗口，而不是在函数中硬编码类。在本例中，我将该属性称为“数据类”。

由于此方法利用了弹出框“放置”选项可用的功能，因此我将其配置为保留弹出框中配置的原始放置。

```
jQuery( '[data-toggle="popover"]' ).popover({

    container: 'body',

    placement: function ( popover, trigger ){

        // Get the submitted placement for the popover
        var placement = jQuery( trigger ).attr( 'data-placement' );

        // Get the class(es) to apply to the popover
        var dataClass = jQuery( trigger ).attr( 'data-class' );

        // Apply the submitted class(es) to the popover element
        jQuery( popover).addClass( dataClass );

        // Return the original placement for the popover
        return placement;

        },

        trigger: 'hover'

}); 
```

我希望这有帮助。如果有人有更好或更清洁的方法，我很乐意学习:)

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2012-08-29T04:21:04.887

对不起，但不太明白你的问题......但你想要的是添加一个父div？放轻松......看看这是不是你想要的：

```
$(function(){
    $('a[rel=popover]')
    .popover({
        placement : 'bottom',
        trigger : 'hover'
    })
    .on("click", function(){
        $(this).closest("div").addClass($(this).data("class")); //Add class .dynamic-class to <div>
    });
}); 
```

演示：http: [//jsfiddle.net/PRQfJ/](http://jsfiddle.net/PRQfJ/)

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2014-05-21T10:01:29.720

适用于每个版本的 BS 的最佳选择是将其放入特定的类中，然后在显示该类后，找到该类，并将您的类名添加到它的 popover 父级

```
// create a template that add the message inside
var $tmp = $("<div class='popoperrormessage'>" + error + "</div>");

            $(this).popover("destroy").popover({
                trigger: "manual",
                animation: false,
                html: true,
                placement:"right",
                content: $tmp,
                container: "body"
            }).popover("show");

            // now we have to find the parent of the popoperrormessagemessage
            $(".popoperrormessage").parents(".popover").addClass("hello"); 
```

现在你的弹出窗口将有**hello**类

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2016-05-19T18:55:31.330

这是我的解决方法，可能不是最有效的，但我发现它最容易实现。

```
 $('[data-content]').each(function(){
    var options = {
        html: true //optional
    };

    if ($(this)[0].hasAttribute('data-class')) {
        options['template'] = '<div class="popover" role="tooltip ' + $(this).attr('data-class') + '"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>';
    }

    $(this).popover(options);
}); 
```

只需像其他示例一样添加`data-class="custom-class"`到元素中。

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2013-05-01T13:20:31.580

我不确定你为什么要这样做，但在我的例子中，我只是想设置自定义样式......所以在 CSS 中只是为当前弹出框编写了正确的选择器。a.rating-popover - 这是我打开 popover 的链接。-> popover 元素将生成到该元素的下一个元素。所以我们可以选择它

```
a.rating-popover + div.popover{
   background: blue;
} 
```

瞧，蓝色背景。仅适用于使用 a.rating-popover 元素打开的弹出框。

# android - ListView onItemClick 没有响应点击

> ID：12170369
> 
> 赞同：1
> 
> 时间：2012-08-29T03:06:54.133
> 
> 标签：android, listview, onitemclicklistener

我的主要活动中有 ListView（扩展活动），我正在尝试为列表视图中的项目实现 onItemClick。当用户单击列表视图条目时，将显示一个对话框，要求用户输入。使用下面的代码，当单击列表视图项目时，我没有从应用程序中得到任何响应。关于为什么会发生这种情况的任何想法？谢谢！

```
 list1 = (ListView) findViewById(R.id.lstPhotos);
            m_adapter = new PhotoAdapter(this, R.layout.listview_row, m_photos);
            list1.setAdapter(m_adapter);
        list1.setClickable(true);
        list1.setItemsCanFocus(false);
        list1.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View v,
                    int position, long id) {
                Log.v("listview", "listview item clicked");
                appErrorAlert("test", "test");
            }
        }); 
```

listview_row.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:padding="6dip">

   <ImageView
        android:id="@+id/txtPhotoLocationActual"
        android:layout_width="wrap_content" 
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:focusable="false"
android:focusableInTouchMode="false"
   />

   <TextView
        android:id="@+id/txtPhotoCaptionActual"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="3dip"
        android:textColor="#FFFFFF"
        android:layout_alignParentRight="true"
        android:layout_toRightOf="@id/txtPhotoLocationActual"
        android:gravity="center_vertical"
        android:focusable="false"
android:focusableInTouchMode="false"
   />

      <TextView
        android:id="@+id/txtLocation"
        android:layout_width="0dip"
        android:layout_height="0dip"
        android:padding="3dip"
        android:textColor="#FFFFFF"
        android:layout_alignParentRight="true"
        android:gravity="center_vertical"
        android:focusable="false"
android:focusableInTouchMode="false"
   />

      <ImageButton android:id="@+id/delete"
        android:layout_width="70dip"
        android:layout_height="70dip"
        android:src="@drawable/delete_button"
        android:background="@null"
        android:layout_alignParentRight="true"
        android:gravity="center_vertical"
        android:focusable="false"
android:focusableInTouchMode="false" />

</RelativeLayout> 
```

调用删除按钮单击的自定义适配器

```
public class PhotoAdapter extends ArrayAdapter<Photo> {

    private final ArrayList<Photo> objects;

    public PhotoAdapter(Context context, int textViewResourceId,
            ArrayList<Photo> objects) {
        super(context, textViewResourceId, objects);
        this.objects = objects;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        final Photo i = objects.get(position);
        View v = convertView;

        if (v == null) {
            LayoutInflater inflater = (LayoutInflater) getContext()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = inflater.inflate(R.layout.listview_row, null);
            v.setClickable(true);
            v.setFocusable(true);
        }

        if (i != null) {
            ImageView thumb = (ImageView) v
                    .findViewById(R.id.txtPhotoLocationActual);
            TextView mtd = (TextView) v
                    .findViewById(R.id.txtPhotoCaptionActual);

            TextView loc = (TextView) v.findViewById(R.id.txtLocation);

            ImageButton delete = (ImageButton) v.findViewById(R.id.delete);
            delete.setTag(position);

            if (thumb != null) {

                String imagePath = i.getLocation();
                loc.setText(imagePath);
                BitmapFactory.Options options = new BitmapFactory.Options();
                options.inJustDecodeBounds = true;
                Bitmap bm = BitmapFactory.decodeFile(imagePath, options);
                final int REQUIRED_SIZE = 70;
                int scale = 1;
                while (options.outWidth / scale / 2 >= REQUIRED_SIZE
                        && options.outHeight / scale / 2 >= REQUIRED_SIZE)
                    scale *= 2;
                BitmapFactory.Options options2 = new BitmapFactory.Options();
                options2.inSampleSize = scale;
                Bitmap bm2 = BitmapFactory.decodeFile(imagePath, options2);
                thumb.setImageBitmap(bm2);
                delete.setOnClickListener(new Button.OnClickListener() {
                    @Override
                    public void onClick(View v) {
                        Log.e("delete", "delete pressed");
                        objects.remove(i);
                        notifyDataSetChanged();

                    }
                });

            }

            if (mtd != null) {
                mtd.setText(i.getCaption());
            }
        }
        return v;

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T18:24:27.380

问题出在多个 textview 上，如果您检查[ArrayAdapter](http://developer.android.com/reference/android/widget/ArrayAdapter.html)的文档，则构造函数采用 resourceId，其 Id 用于包含“a”textView 的布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T03:09:03.073

**////////已编辑////////////////**

**删除**此行`list1.setClickable(true);`并

**删除**此行`list1.setItemsCanFocus(false);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T03:20:24.513

如果您有任何可点击的项目，您可能无法点击列表项目。试试这个可能有用[Android: ListView elements with multiple clickable button](https://stackoverflow.com/questions/1709166/android-listview-elements-with-multiple-clickable-buttons)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-17T19:57:41.370

将此行添加到 listview 自定义行 xml 文件**android:descendantFocusability="blocksDescendants"的父布局**

# python - 有效计算存储在数据库中的树中的叶子

> ID：12170372
> 
> 赞同：1
> 
> 时间：2012-08-29T03:07:22.570
> 
> 标签：python, sql, django, tree, graph-theory

我有一个 Django 项目，它有两个模型：Group 和 Person。组可以包含 Person 对象或其他 Group 对象。组不能形成一个循环（即，A 组包含 B 组，B 组包含 A 组），这导致了一个树结构，其中 Person 对象是叶子。

我的问题是 - 如何使用尽可能少的 SQL 查询来计算高级组（如根组）中所有包含的组对象和个人对象？

使用 O(N)（其中 N 是子组数）SQL 查询的简单方法是：

```
def Group(models.Model):
    name = models.CharField(max_length=150)
    parent_group = models.ForeignKey('self', related_name=child_groups, null=True, blank=True)

    # returns tuple (# of subgroups, # of person objects)
    def count_objects(self):
        count = (self.child_groups.count(), self.people.count())
        for child_group in self.child_groups.all():
            # this adds tuples together ( e.g: (1,2) and (1,2) make (2,4) )
            tuple(map(operator.add, count, child_group.count_objects()))

def Person(models.Model):
    user = models.ForeignKey(User)
    picture = models.ImageSpecField(...)
    group = models.ForeignKey('Group', related_name="people") 
```

有没有办法改善这一点，或者我应该只将这些值存储在 Group 对象中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T03:32:55.800

因此，这是许多其他人已经解决的现有问题。如果您使用的是 Django，请查看： [http ://django-mptt.github.com/django-mptt/index.html](http://django-mptt.github.com/django-mptt/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T03:38:17.237

*   在 Postgres 中，您可以使用[递归](http://www.postgresql.org/docs/9.1/static/queries-with.html)查询，尽管在 Django 中没有直接支持。

*   或者，您可以考虑对计数进行非规范化，可能有库可以做到这一点。一个快速的谷歌给了我： http: [//pypi.python.org/pypi/django-composition/](http://pypi.python.org/pypi/django-composition/)

*   如果您必须经常选择相同的值并且它们没有太大变化，您可以尝试缓存它们。

# python - Wine下的Python到Windows可执行文件

> ID：12170373
> 
> 赞同：2
> 
> 时间：2012-08-29T03:07:23.437
> 
> 标签：python, py2exe, wine, tryton

有没有人在Linux 机器的[Wine](http://www.winehq.org/)下使用[py2exe](http://www.py2exe.org/index.cgi/FrontPage)、[cx_Freeze](http://cx-freeze.sourceforge.net/)或[Pyinstaller](http://www.pyinstaller.org/)成功创建了 Windows 可执行文件？

我的目标是能够将代码推送到 gitolite 存储库 Ubuntu 服务器，然后 git-hook 将为 Windows 构建 exe 并发布它们以供分发。我试过使用 cx_Freeze 无济于事；pyinstaller 似乎可以工作，但需要 pywin32，它在 wine 中安装时崩溃了。

如果有人成功地这样做了，你是怎么做到的，你是否必须安装应用程序需要为 wine-python 安装“编译”的所有 Python 模块？我想要一个 Windows exe 的特定应用程序是[Tryton Client](http://www.tryton.org/index.html)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T04:05:08.043

根据[py2exe wiki](http://wiki.python.org/moin/Py2Exe)，它会产生无效的 Win32 可执行文件。

# javascript - 我是否可以防止黑客使用 Web 控制台通过 JavaScript 反复调用 upvote (AJAX) 函数？

> ID：12170375
> 
> 赞同：1
> 
> 时间：2012-08-29T03:07:49.703
> 
> 标签：javascript, jquery, ajax, security, code-injection

我最近创建了一个网站，该网站具有使用 jQuery 的 AJAX 功能的投票/投票功能。问题是：*任何人都*可以投票。我不要求访问者登录，我不跟踪他们的 IP，我什至不存储长期 cookie。通常（不要笑），当用户对某事进行投票时，我会将他们投票的项目的 ID 存储在 JavaScript 数组中。每当他们尝试投票时，脚本都会通过检查数组中的 ID 来检查他们最近是否为给定项目投票。如果他们有，它只会给他们一个警告对话框。否则，它会投票。所以不用说，用户再次投票所要做的就是刷新页面。

我决定看看如果我注入一些 JavaScript（在 URL 栏或 Web 控制台中）会发生什么，我并不感到惊讶地发现快速投票多次就像你想要的一样简单：

```
for (var i = 0; i < 100; i++) { vote(itemID); } 
```

（这很好）。我不确定为什么阵列没有停止它，但这没关系；利用这一点总是很容易的，对吧？我的意思是——你甚至可以用一些 JS 编写一个小的 HTML 文档，它可以根据需要多次调用我网站上的投票页面。

所以我想在没有太多麻烦的情况下解决这个问题。是否可以在 JavaScript 中创建不可变变量？一个常数（尽管如果有一个常数只能改变一次，那真的很有帮助）？在某种程度上解决此问题的最简单方法是保持 ID 保持数组为半常数：不能删除，但可以添加。非常感谢任何建议或解决方案或解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T03:11:57.323

不，如果用户想通过弄乱他们的客户端代码来作弊，他们可以这样做。这就像游戏的作弊补丁一样。

你现在做的事情是非常合理的，可以避免意外重复投票，如果你觉得这还不够（例如如果投票真的很重要），你需要在服务器端采取措施。跟踪 IP 或设置 cookie 也不起作用，这也依赖于客户端的合作。您必须对用户进行身份验证，并通过在数据库中存储一些内容来确保每个人只投票一次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T03:18:06.713

不知道你为什么不跟踪IP，如果你跟踪IP，那么你可以检查IP之前是否投票过相同的项目，或者IP投票是否过于频繁。

当然，您还需要考虑到人们可能会共享相同的 IP 来浏览您的网站。

# ios - PhoneGap 的 navigator.fileMgr 始终未定义

> ID：12170379
> 
> 赞同：1
> 
> 时间：2012-08-29T03:09:13.130
> 
> 标签：ios, file, api, cordova, filewriter

我正在使用 PhoneGap 构建 iOS 应用程序，需要向设备写入和读取文本文件。

我按照此处找到的步骤操作：http: [//docs.phonegap.com/en/2.0.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS](http://docs.phonegap.com/en/2.0.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS)

一切正常，除了我不能使用任何 API（我尝试了文件和通知）。我打电话给：alert(navigator.fileMgr) 但它总是未定义。

我在 deviceready 回调函数中调用它。

我想我错过了一些重要的步骤，谁能有这方面的经验给我一些链接/指南/帮助？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T00:46:00.157

我不确定你从哪里得到你的信息，但 navigator.fileMgr 不再存在并且已经很长时间没有了。我们已经实现了 W3C 文件 API：

[http://docs.phonegap.com/en/2.0.0/cordova_file_file.md.html#File](http://docs.phonegap.com/en/2.0.0/cordova_file_file.md.html#File)

要获取文件系统的根路径，您可以：

```
window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, function(fileSys) {
    console.log("File system root = " + fileSys.root.fullPath);
}, function() {
    console.log("Could not get file system");
}); 
```

文档站点上也提供了如何读取/写入文件的示例。

# emacs - org-mode 源包含行号

> ID：12170382
> 
> 赞同：4
> 
> 时间：2012-08-29T03:10:12.823
> 
> 标签：emacs, org-mode

Org-mode 有一个很棒的功能，可以包含这样的源代码：

```
#+begin_src java -n
    /**
     * @param foo
     */
    public static void doBar(Baz ba)
    {
        Collection<String> strings = ba.getStrings(true);
        return strings;
    }
#+end_src 
```

该`-n`选项显示行号。

可以`+n`选择从最后一个块继续编号。

有没有设置起始号码的选项？这对于您希望行号与完整文件相对应的源代码片段很有用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-11-22T20:21:01.117

这已在 Org Mode 9 中添加。现在可以将数字传递给`-n`和`+n`。

因此，例如，您可以使用以下标题使示例从第 12 行开始：

```
#+begin_src java -n 12
...
#+end_src 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-07-11T08:21:06.630

我同意[jco](https://stackoverflow.com/users/278903/jco)。该问题的长答案可能如下所示。但除了屏幕截图之外，它只是从手册中复制和粘贴。

如章节[*文字示例*](https://orgmode.org/manual/Literal-examples.html)中所述，您可以将行号添加到源代码块和示例代码块：

> 在示例和 src 代码段中，您都可以在行`-n`尾添加一个开关`BEGIN`，以便为示例的行编号。接受一个可选的 `-n`数字参数，指定块的起始行号。如果您使用`+n`开关，则前一个编号片段中的编号将在当前片段中继续。`+n` 也可以采用数字参数。参数的值将添加到前一个块的最后一行以确定起始行号。

您还可以参考行号：

> 在文字示例中，Org 会将字符串解释`(ref:name)`为标签，并将它们用作特殊超链接`[[(name)]]` （例如，单括号中的引用名称）的目标。在 HTML 中，将鼠标悬停在这样的链接上会远程突出显示相应的代码行，这很酷。

演示这两个功能的示例是

```
#+BEGIN_SRC emacs-lisp -n -r
(save-excursion                  (ref:sc)
   (goto-char (point-min)))      (ref:jump)
#+END_SRC

In line [[(sc)]] we remember the current position.
[[(jump)][Line (jump)]] jumps to point-min. 
```

它会产生

[![带有行号的引用代码的屏幕截图。](../Images/0b44f6e96e155e175a66ecd4b5b99245.png)](https://i.stack.imgur.com/Fh3Ph.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T03:28:13.770

**此答案已过时，请参阅其他答案**

我所知道的没有实施的选项。

我刚刚测试的一个非常 hacky 的解决方案是定义自己的计数器组织用于 +n 工作。它去：

```
#+begin_src emacs-lisp :exports results
;; we need it not be a buffer-local value
(setq-default org-export-last-code-line-counter-value 42)
#+end_src 
```

由于是一个肮脏的黑客，它只能在第一个块中工作一次，但我不确定 ±n 的行为如何。在对任何其他块进行编号之前对其进行评估（因为 :exports 结果，在我尝试时没有实际导出任何内容），因此它可以位于缓冲区中的任何位置。

我想这不会很难实现，或者真正了解 elisp 的人可以做得更好，但我希望它会有所帮助。

# mysql - MYSQL：检测多标签用户

> ID：12170383
> 
> 赞同：1
> 
> 时间：2012-08-29T03:10:32.250
> 
> 标签：mysql

假设我有这张桌子：

```
+----+------+---------------------+-------------------------+
| id | user | timestamp           | referrer                |
+----+------+---------------------+-------------------------+
| 1  | foo  | 2012-08-26 14:05:55 | http://fubar.com/online |
+----+------+---------------------+-------------------------+
| 2  | foo  | 2012-08-26 14:05:59 | http://fubar.com/chat   |
+----+------+---------------------+-------------------------+
| 3  | bar  | 2012-08-27 07:06:07 | http://fubar.com/chat   |
+----+------+---------------------+-------------------------+
| 4  | max  | 2012-08-28 14:08:12 | http://fubar.com/chat   |
+----+------+---------------------+-------------------------+
| 5  | max  | 2012-08-28 14:08:36 | http://fubar.com/online |
+----+------+---------------------+-------------------------+ 
```

我想选择所有同时拥有超过 1 个推荐人和时间戳相同的用户，精确到分钟

这意味着在 1 分钟内，他们正在查看同一站点的 2 个页面，因此可能暗示他们是多选项卡。所以在上表中， foo 和 max 符合标准。

我想知道如何在 mysql 中实现这一点。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T03:27:37.040

进行自加入并[`TIMESTAMPDIFF()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_timestampdiff)在加入规则中使用：

```
SELECT DISTINCT a.user
FROM   my_table a JOIN my_table b ON
       a.user     =  b.user
   AND a.id       <  b.id
   AND a.referrer <> b.referrer
   AND ABS(TIMESTAMPDIFF(SECOND, a.timestamp, b.timestamp)) <= 60 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/f9d5e/1/0)上查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T03:19:46.840

带有“有”子句的东西怎么样？

```
SELECT user, COUNT(user) AS tabCount FROM whatever
 GROUP BY user
HAVING tabCount > 1; 
```

# ruby-on-rails - Rails：将 content_for 与 raw 一起使用后无法逃脱

> ID：12170385
> 
> 赞同：1
> 
> 时间：2012-08-29T03:10:40.453
> 
> 标签：ruby-on-rails, escaping

在一个辅助方法中，我有这个：

```
content_for(:title, raw(page_title)) 
```

在我看来，我在调用辅助方法后得到了这个：

```
<%= h(content_for(:title)) %> 
```

但是，当我这样做时， h() 不会 HTML 转义内容吗？我也尝试过`content_for(:title).html_safe`，`html_escape(content_for(:title))`但没有成功。

我将内容保存为原始内容，因为我想在单独的视图中访问原始（未转义）内容。我在 Rails 3.0.17 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T23:46:47.513

经过一番调查，这是我的结论：这都是关于 html_safe 的。

让我用一些代码解释一下：

```
page_title.html_safe? #false
raw(page_title).html_safe? #true - that's all that raw does
content_for(:title, raw(page_title)) #associates :title with page_title, where page_title.html_safe? returns true 
```

现在，当视图调用辅助方法时，会发生以下情况：

```
content_for(:title) #no escaping. Since page_title was stored and html_safe is true, conetnt_for will not escape
h(content_for(:title)) #no escaping. Since the last line returned a string where html_safe? returns true, this will also not escape.
<%= h(content_for(:title)) %> #no escaping. Same reason as above 
```

简而言之，`raw`只需`html_safe`在字符串/SafeBuffer 上设置属性。`string.html_safe?`仅对返回的字符串执行转义`false`。由于字符串`true`在每次转义机会时都会返回，因此该字符串永远不会被转义。

**解析度：**

通过插值或连接创建一个新字符串 - 这会将 html_safe 再次设置为 false 并且字符串将被转义。

有关更多信息，请查看有关[SafeBuffers](http://yehudakatz.com/2010/02/01/safebuffers-and-rails-3-0/)的本指南并阅读[文档](http://api.rubyonrails.org/classes/ActiveSupport/SafeBuffer.html)。

# android - 从内部存储创建和共享文件

> ID：12170386
> 
> 赞同：42
> 
> 时间：2012-08-29T03:11:04.907
> 
> 标签：android, android-contentprovider, android-file

**我的目标是在内部存储**上创建一个 XML 文件，然后通过共享 Intent 发送它。

我可以使用此代码创建 XML 文件

```
FileOutputStream outputStream = context.openFileOutput(fileName, Context.MODE_WORLD_READABLE);
PrintStream printStream = new PrintStream(outputStream);
String xml = this.writeXml(); // get XML here
printStream.println(xml);
printStream.close(); 
```

我一直在尝试将 Uri 检索到输出文件以共享它。我首先尝试通过将文件转换为 Uri 来访问该文件

```
File outFile = context.getFileStreamPath(fileName);
return Uri.fromFile(outFile); 
```

这将返回*file:///data/data/com.my.package/files/myfile.xml*但我似乎无法将其附加到电子邮件、上传等。

如果我手动检查文件长度，它是正确的，并显示有一个合理的文件大小。

接下来，我创建了一个内容提供程序并尝试引用该文件，但它不是该文件的有效句柄。`ContentProvider`似乎从来没有被称为任何点。

```
Uri uri = Uri.parse("content://" + CachedFileProvider.AUTHORITY + "/" + fileName);
return uri; 
```

这将返回*content://com.my.package.provider/myfile.xml*但我检查了文件，它的长度为零。

如何正确访问文件？我需要使用内容提供商创建文件吗？如果是这样，怎么做？

**更新**

这是我用来分享的代码。如果我选择 Gmail，它会显示为附件，但是当我发送它时会出现错误**无法显示附件**并且到达的电子邮件没有附件。

```
public void onClick(View view) {
    Log.d(TAG, "onClick " + view.getId());

    switch (view.getId()) {
        case R.id.share_cancel:
            setResult(RESULT_CANCELED, getIntent());
            finish();
            break;

        case R.id.share_share:

            MyXml xml = new MyXml();
            Uri uri;
            try {
                uri = xml.writeXmlToFile(getApplicationContext(), "myfile.xml");
                //uri is  "file:///data/data/com.my.package/files/myfile.xml"
                Log.d(TAG, "Share URI: " + uri.toString() + " path: " + uri.getPath());

                File f = new File(uri.getPath());
                Log.d(TAG, "File length: " + f.length());
                // shows a valid file size

                Intent shareIntent = new Intent();
                shareIntent.setAction(Intent.ACTION_SEND);
                shareIntent.putExtra(Intent.EXTRA_STREAM, uri);
                shareIntent.setType("text/plain");
                startActivity(Intent.createChooser(shareIntent, "Share"));
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            }

            break;
    }
} 
```

我注意到*createChooser(...)*`Exception`里面有一个抛出，但我不知道为什么抛出它。

 *> E/ActivityThread(572): Activity com.android.internal.app.ChooserActivity 泄露了最初在这里注册的 IntentReceiver com.android.internal.app.ResolverActivity$1@4148d658。您是否错过了对 unregisterReceiver() 的调用？

我研究了这个错误，找不到任何明显的东西。这两个链接都表明我需要注销接收器。

*   [ChooserActivity 泄露了 IntentReceiver](https://stackoverflow.com/questions/11308260/chooser-activity-leak-android)
*   [为什么 Intent.createChooser() 需要一个 BroadcastReceiver 以及如何实现？](https://stackoverflow.com/questions/10068954/why-does-intent-createchooser-need-a-broadcastreceiver-and-how-to-implement)

我有一个接收器设置，但它`AlarmManager`是在其他地方设置的，不需要应用程序注册/取消注册。

**openFile(...) 的代码**

如果需要，这里是我创建的内容提供者。

```
public ParcelFileDescriptor openFile(Uri uri, String mode) throws FileNotFoundException {
    String fileLocation = getContext().getCacheDir() + "/" + uri.getLastPathSegment();

    ParcelFileDescriptor pfd = ParcelFileDescriptor.open(new File(fileLocation), ParcelFileDescriptor.MODE_READ_ONLY);
    return pfd;
} 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-08-30T02:13:37.607

可以通过 ContentProvider 公开存储在您的应用程序私有目录中的文件。这是我制作的一些示例代码，展示了如何创建可以执行此操作的内容提供程序。

显现

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.example.providertest"
  android:versionCode="1"
  android:versionName="1.0">

  <uses-sdk android:minSdkVersion="11" android:targetSdkVersion="15" />

  <application android:label="@string/app_name"
    android:icon="@drawable/ic_launcher"
    android:theme="@style/AppTheme">

    <activity
        android:name=".MainActivity"
        android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <provider
        android:name="MyProvider"
        android:authorities="com.example.prov"
        android:exported="true"
        />        
  </application>
</manifest> 
```

在您的 ContentProvider 覆盖 openFile 以返回 ParcelFileDescriptor

```
@Override
public ParcelFileDescriptor openFile(Uri uri, String mode) throws FileNotFoundException {       
     File cacheDir = getContext().getCacheDir();
     File privateFile = new File(cacheDir, "file.xml");

     return ParcelFileDescriptor.open(privateFile, ParcelFileDescriptor.MODE_READ_ONLY);
} 
```

确保已将 xml 文件复制到缓存目录

```
 private void copyFileToInternal() {
    try {
        InputStream is = getAssets().open("file.xml");

        File cacheDir = getCacheDir();
        File outFile = new File(cacheDir, "file.xml");

        OutputStream os = new FileOutputStream(outFile.getAbsolutePath());

        byte[] buff = new byte[1024];
        int len;
        while ((len = is.read(buff)) > 0) {
            os.write(buff, 0, len);
        }
        os.flush();
        os.close();
        is.close();

    } catch (IOException e) {
        e.printStackTrace(); // TODO: should close streams properly here
    }
} 
```

现在任何其他应用程序都应该能够通过使用内容 uri (content://com.example.prov/myfile.xml) 为您的私有文件获取 InputStream

对于一个简单的测试，从一个单独的应用程序调用内容提供程序，类似于以下内容

```
 private class MyTask extends AsyncTask<String, Integer, String> {

    @Override
    protected String doInBackground(String... params) {

        Uri uri = Uri.parse("content://com.example.prov/myfile.xml");
        InputStream is = null;          
        StringBuilder result = new StringBuilder();
        try {
            is = getApplicationContext().getContentResolver().openInputStream(uri);
            BufferedReader r = new BufferedReader(new InputStreamReader(is));
            String line;
            while ((line = r.readLine()) != null) {
                result.append(line);
            }               
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try { if (is != null) is.close(); } catch (IOException e) { }
        }

        return result.toString();
    }

    @Override
    protected void onPostExecute(String result) {
        Toast.makeText(CallerActivity.this, result, Toast.LENGTH_LONG).show();
        super.onPostExecute(result);
    }
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-11-06T14:44:16.443

所以我认为 Rob 的回答是正确的，但我做的有点不同。据我了解，在提供程序中设置：

```
android:exported="true" 
```

您正在公开访问您的所有文件？！无论如何，仅授予对某些文件的访问权限的一种方法是通过以下方式定义文件路径权限：

```
<provider
    android:authorities="com.your.app.package"
    android:name="android.support.v4.content.FileProvider"
    android:exported="false"
    android:grantUriPermissions="true">
    <meta-data
        android:name="android.support.FILE_PROVIDER_PATHS"
        android:resource="@xml/file_paths" />
</provider> 
```

然后在您的 XML 目录中定义*file_paths.xml*文件，如下所示：

```
<paths xmlns:android="http://schemas.android.com/apk/res/android">
    <files-path path="/" name="allfiles" />
    <files-path path="tmp/" name="tmp" />
</paths> 
```

*现在，“allfiles”提供了与选项android:exported="true"*相同的公共权限，但我猜你并不真正想要这样定义子目录是下一行。然后，您所要做的就是将要共享的文件存储在该目录中。

接下来你要做的是，正如 Rob 所说，为这个文件获取一个 URI。我是这样做的：

```
Uri contentUri = FileProvider.getUriForFile(context, "com.your.app.package", sharedFile); 
```

然后，当我拥有这个 URI 时，我必须为其附加权限，以便其他应用程序使用它。我正在使用或将此文件 URI 发送到相机应用程序。无论如何，这是我获取其他应用程序包信息并授予对 URI 权限的方式：

```
PackageManager packageManager = getPackageManager();
List<ResolveInfo> list = packageManager.queryIntentActivities(cameraIntent, PackageManager.MATCH_DEFAULT_ONLY);
if (list.size() < 1) {
    return;
}
String packageName = list.get(0).activityInfo.packageName;
grantUriPermission(packageName, sharedFileUri, Intent.FLAG_GRANT_WRITE_URI_PERMISSION | Intent.FLAG_GRANT_READ_URI_PERMISSION);

ClipData clipData = ClipData.newRawUri("CAMFILE", sharedFileUri);
cameraIntent.setClipData(clipData);
cameraIntent.setFlags(Intent.FLAG_GRANT_WRITE_URI_PERMISSION);
cameraIntent.setFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);
startActivityForResult(cameraIntent, GET_FROM_CAMERA); 
```

我留下了相机的代码，因为我不想举其他一些我没有研究过的例子。但是通过这种方式，您可以看到可以将权限附加到 URI 本身。

相机的事情是我可以通过 ClipData 设置它，然后另外设置权限。我想在您的情况下，您只需要 FLAG_GRANT_READ_URI_PERMISSION ，因为您将文件附加到电子邮件中。

这是关于 FileProvider 的帮助[链接](https://developer.android.com/reference/android/support/v4/content/FileProvider.html)，因为我的所有帖子都基于我在那里找到的信息。不过，在查找相机应用程序的包信息时遇到了一些麻烦。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-04-14T23:02:38.427

如果您需要允许其他应用程序查看您的应用程序的私有文件（用于共享或其他），您可能可以节省一些时间，只需使用 v4 兼容库的[FileProvider](https://developer.android.com/reference/android/support/v4/content/FileProvider.html "文件提供者")

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-07-15T22:12:46.757

以上答案都没有帮助。我的问题是传递意图附加内容，但我将引导您完成共享文件的所有步骤。

第 1 步：创建内容提供程序这将使您想要与之共享的任何应用程序都可以访问该文件。将以下内容粘贴到`<application></applicatio>`标签内的 Manifest.xml 文件中

```
 <provider
                android:name="androidx.core.content.FileProvider"
                android:authorities="{YOUR_PACKAGE_NAME}.fileprovider"
                android:exported="false"
                android:grantUriPermissions="true">
                <meta-data
                    android:name="android.support.FILE_PROVIDER_PATHS"
                    android:resource="@xml/provider_paths" />
            </provider> 
```

第 2 步：定义内容提供者可访问的路径 通过在 res/xml 下创建一个名为 provider_paths.xml（或您选择的名称）的文件来执行此操作。将以下代码放入文件中

```
 <?xml version="1.0" encoding="utf-8"?>
    <paths>
        <external-path
            name="external"
            path="." />
        <external-files-path
            name="external_files"
            path="." />
        <cache-path
            name="cache"
            path="." />
        <external-cache-path
            name="external_cache"
            path="." />
        <files-path
            name="files"
            path="." />
    </paths> 
```

第 3 步：创建 Intent 以共享文件

```
Intent intentShareFile = new Intent(Intent.ACTION_SEND);
Uri uri = FileProvider.getUriForFile(getApplicationContext(), getPackageName() + ".fileprovider", fileToShare);

intentShareFile.setDataAndType(uri, URLConnection.guessContentTypeFromName(fileToShare.getName()));
//Allow sharing apps to read the file Uri
intentShareFile.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);
//Pass the file Uri instead of the path
intentShareFile.putExtra(Intent.EXTRA_STREAM,
                    uri);
startActivity(Intent.createChooser(intentShareFile, "Share File")); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-12-09T09:53:56.110

这就是我正在使用的：

我结合了一些答案并使用了当前的AndroidX Doku： [Sharing files Android Development](https://developer.android.com/training/secure-file-sharing)

**基本流程**：您更改清单以使其他应用程序可以访问您的本地文件。允许从外部访问的文件路径位于 res/xml/filepaths.xml 中。共享时，您创建共享意图并设置一个标志，暂时允许其他应用访问您的本地文件。Android 文档声称这是共享文件的安全方式

**Step1：**将 FileProvider 添加到 Manifest

```
 <provider
        android:name="androidx.core.content.FileProvider"
        android:authorities="com.YOUR.APP.PACKAGE.fileprovider"
        android:grantUriPermissions="true"
        android:exported="false">
        <meta-data
            android:name="android.support.FILE_PROVIDER_PATHS"
            android:resource="@xml/filepaths" />
    </provider> 
```

**Step2：**将filepaths.xml添加到res/xml（如果XML文件夹不存在，自己创建）

```
<?xml version="1.0" encoding="utf-8"?>
<paths xmlns:android="http://schemas.android.com/apk/res/android">
    <files-path path="share/" name="share" />
</paths> 
```

**第三步：**使用这样的功能来启动文件共享。此函数将文件移动到预定义的共享文件夹并为其创建一个 Url。ShareDir 是指向 files/share/ 目录的 File。copy_File 函数将给定文件复制到共享目录，以便从外部访问。该功能还可以使用给定的标题和正文将文件作为电子邮件发送。如果不需要，只需将其设置为空字符串

```
public void ShareFiles(Activity activity, List<File> files, String header, String body) {

    ArrayList<Uri> uriList = new ArrayList<>();
    if(files != null) {
        for (File f : files) {
            if (f.exists()) {

                File file_in_share = copy_File(f, ShareDir);
                if(file_in_share == null)
                    continue;
                // Use the FileProvider to get a content URI

                try {
                    Uri fileUri = FileProvider.getUriForFile(
                            activity,
                            "com.YOUR.APP.PACKAGE.fileprovider",
                            file_in_share);

                    uriList.add(fileUri);
                } catch (IllegalArgumentException e) {
                    Log.e("File Selector",
                            "The selected file can't be shared: " + f.toString());
                }
            }
        }
    }
    if(uriList.size() == 0)
    {
        Log.w("StorageModule", "ShareFiles: no files to share");
        return;
    }
    Intent intent = new Intent(Intent.ACTION_SEND_MULTIPLE);
    intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);
    intent.setType("text/html");
    intent.putExtra(Intent.EXTRA_SUBJECT, header);
    intent.putExtra(Intent.EXTRA_TEXT, body);
    intent.putParcelableArrayListExtra(Intent.EXTRA_STREAM, uriList);

    activity.startActivity(Intent.createChooser(intent, "Share Files"));
} 
```*

# c# - id 的当前上下文不存在

> ID：12170388
> 
> 赞同：2
> 
> 时间：2012-08-29T03:11:29.547
> 
> 标签：c#, asp.net

如何从日期选择器中获取会话？

对于我所有的文本框，我使用：

```
 Session["location"] = DropDownList1.SelectedItem.Text;
 Session["time"] = DropDownList2.SelectedItem.Text;
 Session["day"] = DropDownList3.SelectedItem.Text;  
 Session["IsChauffeurUsed"] = DropDownList4.SelectedItem.Text; 
```

但是对于我的文本框日期选择器，当我编写代码时

```
 Session["date"] = datepicker.Text; 
```

它给了我一个错误，当前上下文不存在。日期选择器文本框是：

```
<div class="demo"><p>Date: <input type="text" id="datepicker"></p></div> 
```

希望你能帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T03:13:23.123

设置`runat=server`属性以将 html 标记转换为 Html 服务器控件。

```
<input type="text" runat="server" id="datepicker"> 
```

并使用`value`属性，因为它现在是 ASP.NET Web 服务器控件。

```
Session["date"] = datepicker.Value; 
```

编辑：这对我来说非常有效。

```
<head runat="server">
    <title></title>
    <link rel="Stylesheet" type="text/css" href="http://code.jquery.com/ui/jquery-ui-git.css" />
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>
    <script type="text/javascript">
        $(function () {
            $("#datePicker").datepicker();
            $("#<%=TextBox1.ClientID %>").datepicker();
        });
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <input type="text" id="datePicker" runat="server" />
        <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
    </div>
    </form>
</body> 
```

# cakephp - CakePHP 找到 2 个 HABTM 关系

> ID：12170393
> 
> 赞同：1
> 
> 时间：2012-08-29T03:12:06.170
> 
> 标签：cakephp, has-and-belongs-to-many

我正在开发在 CakePHP 2 框架上运行的项目。在这个应用程序中，我有：

楷模：

```
Wallnote, User, Group 
```

关系：

```
Group HABTM User
Wallnote HABTM User
Wallnote HABTM Group 
```

表：

```
wallnotes

 - id
 - user_id (owner id)
 - ...

users_wallnotes

 - user_id
 - wallnote_id

groups_wallnotes

 - group_id
 - wallnote_id

groups_users

 - group_id
 - user_id 
```

我正在使用“Wallnote HABTM 用户”和“Wallnote HABTM 组”关系作为过滤器，即 user_id/group_id(6) wallnote_id(10) 的意思是，ID 为 10 的墙注将分别对 ID 为 6 的用户可见id 为 6 的组中的用户。

我想找到所有符合这些条件的wallnotes：

1.  登录的用户是此wallnote 的所有者或
2.  wallnote 与登录用户共享 -> 在表 users_wallnotes 中记录或
3.  wallnote 已与某个组共享，并且登录的用户是该组的成员

可以使用 find() 函数来做到这一点吗？

感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T07:22:18.920

您有两个角色：组和用户。单独处理用户和组非常困难......我认为标准方法是您对每个用户和组都有独特的角色，为了处理这个你必须有这个表：

```
wallnotes
 - id
 - user_id (owner id)
 - ...

roles
 - id
 - user_id
 - group_id
(each rows in this table have group_id or user_id , no both of them)

roles_wallnotes
 - id
 - role_id
 - wallnote_id 
```

当您创建用户（或组）时，您必须为其创建角色。所以所有的组和用户，现在都有唯一的 id。

例如，您有 2 个组（具有 1,2 个 ID）和 4 个用户（具有 1,2,3,4 个 ID），然后：

```
users :
|id|name |
---|------
1  | user1
2  | user2
3  | user3
4  | user4

groups :

|id|name |
---|------
1  | group1
2  | group2

roles :
|id| user_id | group_id |
---|---------|----------|
1  |   1     |  null    | 
2  |   2     |  null    |
3  |   3     |  null    |
4  |   4     |  null    |
5  |  null   |   1      |
6  |  null   |   2      | 
```

现在你必须有这个关系：

```
Role hasOne Group
Role hasOne User
Wallnote HABTM Role 
```

有了这个解决方案，您可以轻松地使用查找功能来检索您需要的数据...

# java - 禁用 HTTPS 连接的 SSL 证书验证？

> ID：12170396
> 
> 赞同：9
> 
> 时间：2012-08-29T03:12:08.817
> 
> 标签：java, android, ssl, httpurlconnection

当我想打开 HTTPS 连接时，我得到 SSL 异常。如何以一种对此异常不敏感的方式设置 HttpURLConnection？

我的代码是：

```
private String getData() {
    String response = null;
    String connection = "https://www.kamalan.com/";

    try {
        URL url = new URL(connection);
        Log.i(TAG, "Try to open: " + connection);
        HttpURLConnection conn = (HttpURLConnection) url.openConnection();

        int responseCode = conn.getResponseCode();
        Log.i(TAG, "Response code is: " + responseCode);
        if (responseCode == HttpURLConnection.HTTP_OK) {
            BufferedReader in = new BufferedReader(new InputStreamReader(conn.getInputStream()));
            if (in != null) {
                StringBuilder strBuilder = new StringBuilder();             
                int ch = 0;
                while ((ch = in.read()) != -1)
                    strBuilder.append((char) ch);

                // get returned message and show it
                response = strBuilder.toString();
                Log.i("JSON returned by server:", response);
            }

            in.close();

        } else {
            Log.e(TAG, "Couldn't open connection in getResepiItems()");
        }
    } catch (SSLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    return response;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-05-05T08:45:54.417

按照下面的方法，它适用于我。

```
 URL url = new URL("Your URL");
        HttpsURLConnection urlConnection =(HttpsURLConnection) url.openConnection();    urlConnection.setSSLSocketFactory(SSLCertificateSocketFactory.getInsecure(0, null));
        urlConnection.setHostnameVerifier(getHostnameVerifier());
        InputStream is = urlConnection.getInputStream();
        OutputStream os = new FileOutputStream(downloadedFile);
        byte[] data = new byte[1024];
        int count;
        while ((count = is.read(data)) != -1) {
            os.write(data, 0, count);
        }
        os.flush();
        os.close();
        is.close(); 
```

以下方法用于设置主机名

```
private HostnameVerifier getHostnameVerifier() {
        HostnameVerifier hostnameVerifier = new HostnameVerifier() {
            @Override
            public boolean verify(String hostname, SSLSession session) {
                HostnameVerifier hv =
                        HttpsURLConnection.getDefaultHostnameVerifier();
                return hv.verify("com.example.com", session);
            }
        };
        return hostnameVerifier;
    } 
```

# paypal - Paypal Payflow API Java SSL 证书

> ID：12170398
> 
> 赞同：0
> 
> 时间：2012-08-29T03:12:11.697
> 
> 标签：paypal

我正在使用 Paypal Payflow API 来执行 AUTH、Capture、Void 和 Credit Transaction。我能够成功地使用 Java 执行上述事务。但是，我想如何在 Java 密钥库中为 Paypal 设置证书。这是必要的吗？请注意，我们环境中的其他系统通过 Socket 调用我的代码来执行交易，而我的代码负责访问 Paypal。配置 SSL 不涉及 Web 服务器/Web 容器。

我从其他系统收到的信用卡号是加密的，我最终会在将其发送到 PayPal 之前对其进行解密。我相信这些卡号会以明文格式从我的代码传输到 Paypal。我应该如何安全地将信用卡号发送到 Paypal？

谢谢，拉古

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:15:15.433

PayPal 的 API 端点使用 SSL(v3)，所以不，您不需要进一步加密它以进行传输。
虽然建议应用[SSL pinning](http://www.threatgeek.com/2011/11/ssl-pinning-in-the-enterprise-part-1.html)以确保您不允许任何其他 CA，除了签署 PayPal 证书的 CA。

# java - 即使未调用默认构造函数，显式构造函数仍具有默认值。

> ID：12170399
> 
> 赞同：2
> 
> 时间：2012-08-29T03:12:36.823
> 
> 标签：java

根据我的理解，默认构造函数将对象的状态初始化为默认值，所以如果我提供像这样的显式无参数公共构造函数，那么 d 和 e 的值如何仍然被初始化为零，因为在这种情况下默认值构造函数没有被调用。

```
public class B extends A{

    private int d;
    private int e;

    public B() {
        System.out.println(d);
        System.out.println(e);
    }
} 
```

编辑:: 默认构造函数唯一要做的就是调用，`super()`如果我在这里明确提到了一个构造函数，并且 A 有一个受保护的变量说 c，它在其构造函数中初始化为 17，那怎么办。由于我使用自己的构造函数，我是否应该明确调用`super()`才能看到这种变化？为什么 B 仍然通过继承获得 17 的值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T03:14:10.047

如果您没有在声明、初始化程序块或构造函数中显式初始化它们，所有类字段都会被分配默认值。对象被初始化为 null，ints 为 0，booleans 为 false，double 为 0.0，float 为 0.0f，long 为 0L，char 为 '\u0000`...

请参阅[JLS，第 4.12.5 节。变量的初始值，](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.5)因为它解释了这一切。

请注意，这些规则不适用于任何块或方法的局部变量，而是局部变量*必须*在使用前由编码器显式初始化。

**编辑**
关于您的编辑：

> 默认构造函数所做的唯一事情是调用 super() 那么如果我在这里明确提到了一个构造函数并且 A 有一个受保护的变量说 c 在其构造函数中初始化为 17 怎么办。由于我使用自己的构造函数，我不应该显式调用 super() 来看到这种变化吗？为什么 B 仍然通过继承获得 17 的值？

答：`super()`默认构造函数*是*在 B 的构造函数的最开始被调用的，无论你是否显式调用它。通过在此处显式调用超级构造函数获得的唯一额外好处是允许您调用 A 的非默认构造函数（如果存在并且如果您愿意的话）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T03:36:45.457

由于您使用了原始类型的数据成员，因此它们默认为根据[语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.5)的值，在这种情况下，您将选择值。

您可以使用构造函数来初始化您不希望按照规范默认的类的所有成员（如`null`默认情况下对象获取值）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T07:23:49.203

它很简单，变量在您没有初始化它们时获得它们的默认值。整数的默认值为 0

# php - 如何在 XAMPP 上启用 mysqli？

> ID：12170400
> 
> 赞同：5
> 
> 时间：2012-08-29T03:13:07.380
> 
> 标签：php, mysqli, xampp

通过查看整个 Internet 的建议，我尝试将所有查询转换为 mysqli。

但是 mysqli 在我的 XAMPP 中不起作用。我检查了我的 PHP 文件夹，并且有一个`php_mysqli.dll`文件...仍然无法正常工作

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T03:18:01.067

你有没有将它声明给 php.ini 来加载它？如果没有，请尝试在 php.ini 中找到它并添加 php_mysqli.dll

```
;;;;;;;;;;;;;;;;;;;;;;
; Dynamic Extensions ;
;;;;;;;;;;;;;;;;;;;;;;

; If you wish to have an extension loaded automatically, use the following
; syntax:
;
;   extension=modulename.extension
;
; For example, on Windows:
;
;   extension=msql.dll
;
; ... or under UNIX:
;
;   extension=msql.so
;
; ... or with a path:
;
;   extension=/path/to/extension/msql.so
;
; If you only provide the name of the extension, PHP will look for it in its
; default extension directory.
;
; Windows Extensions
; Note that ODBC support is built in, so no dll is needed for it.
; Note that many DLL files are located in the extensions/ (PHP 4) ext/ (PHP 5)
; extension folders as well as the separate PECL DLL download (PHP 5).
; Be sure to appropriately set the extension_dir directive.

extension= php_mysqli.dll 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-19T18:37:51.977

转到目录`phpMyAdmin`，找到一个名为`config.inc.php`的文件，打开文件并在其中找到一行：
`$cfg['Servers'][$i]['extension'] = 'mysql'`;
只需更改`mysql`为`mysqli`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-08T11:31:24.737

可能阻止 msqli dll 加载的另一件事可能是本地网络服务器上的用户权限问题，确保 \User 可以读取 ext 文件夹，这对我有用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-05T06:03:17.803

我认为你应该使用 XAMPP 1.8.3-1、XAMPP 1.8.2-2、XAMPP 1.8.1。因为这些xampp版本也默认支持Mysqli。

# asp.net-mvc-3 - 如何为两个数据库类制作单个控制器 - MVC3

> ID：12170404
> 
> 赞同：0
> 
> 时间：2012-08-29T03:13:29.600
> 
> 标签：asp.net-mvc-3

我有两个如下定义的数据库类：

```
 public class TopDate
    {
        [Key]
        public int DateId { get; set; }
        public DateTime Date { get; set; }
    }
 public class TopSong
    {
        [Key]
        public int SongId { get; set; }        
        public string Title { get; set; }
        public int DateId { get; set; }
    } 
```

其中 DateId 是 TopSong 的外键

我正在创建一个控制器，通过它我可以创建、删除或编辑这些数据库值。

当我右键单击控制器类并添加控制器时，我只能选择上面定义的两个类之一。有没有办法让 1 个控制器在一页上处理这两个表的数据库更新？

错误图片：![在此处输入图像描述](../Images/bc84da3895454e495a2e6e5b59e5b595.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T03:31:47.617

您的控制器不应直接处理域对象（即与您的数据库直接关联的那些东西）。创建一个包含您需要的属性的 ViewModel，使用您的服务层来填充 ViewModel，您的控制器将使用它作为其基础的模型。鉴于上面的描述，您的 ViewModel 的示例可能类似于以下内容：

```
public class MusicViewModel
{
    public int SongId {get;set;}
    public string Title {get;set;}
    public IEnumerable<DateTime> TopDates {get;set;}
} 
```

此视图模型将包含特定歌曲为热门歌曲的所有日期的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T05:03:53.137

您显示的对象（代码）是数据库类（所谓的域对象）。您需要做的是定义一个视图模型，一个标准的 ASP MVC 实践：您定义一个类，该类是为特定视图量身定制的，并且只包含与该特定视图相关的数据。因此，您将拥有一个视图模型，该视图将创建一首歌曲，另一个将更新它等。

实际上，您描述的情况是使用视图模型的经典情况。然而，在视图中使用域对象确实是一种非常糟糕的做法，并且容易出现比您想要处理的更多的问题。

希望这可以帮助。

# sitecore - 从 SQL 数据库中提取外部数据

> ID：12170406
> 
> 赞同：1
> 
> 时间：2012-08-29T03:13:36.907
> 
> 标签：sitecore, sitecore6, dataprovider

我正在尝试从 Sitecore 中的外部 SQL 数据库中显示数据。理想情况下，数据将表示为 Sitecore 内容树中的项目。

“集成外部数据源”的官方 Sitecore 文档适用于 Sitecore 版本 5。有谁知道我在哪里可以找到，或者分享一个简单示例，说明如何在 Sitecore 6.5 中显示外部数据。我找到的所有信息似乎都已经过时了。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T07:38:46.167

您需要实现自定义数据提供程序。这是一个很好的教程：[http ://www.techphoria414.com/Blog/2011/January/Black-Art-of-Sitecore-Data-Providers](http://www.techphoria414.com/Blog/2011/January/Black-Art-of-Sitecore-Data-Providers)

也看看这篇 sdn 文章。它有点过时，但仍然有相关点。[http://sdn.sitecore.net/Developer/Integrating%20External%20Data%20Sources.aspx](http://sdn.sitecore.net/Developer/Integrating%20External%20Data%20Sources.aspx)

查看[YouTube 数据共享源数据提供者](http://marketplace.sitecore.net/en/Modules/YouTube_Integration.aspx)。

# c++ - 关联容器按键和值排序

> ID：12170410
> 
> 赞同：0
> 
> 时间：2012-08-29T03:14:41.350
> 
> 标签：c++, algorithm, data-structures

是否有任何按键和值排序的关联容器？我想要 C++ 中的这个数据结构。在 Java 中，有方法`containsKey`和`containsValue`. 我需要这个关联数据结构的迭代器（`containsKey`和`containsValue`）在尽可能短的时间内。它必须几乎接近 log(n)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T03:24:20.547

您所描述的内容听起来很像[Boost.Bimap](http://www.boost.org/doc/libs/1_42_0/libs/bimap/doc/html/index.html)容器框架，它允许您构建双向映射，让您同样高效地查找键和值。这可能不是您正在寻找的内容，但该库已经过充分测试，可能是一个很好的起点。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T06:57:27.303

It might be that you want all the T1s for a given T2 and vice versa. That's not exactly what you said, but if that's what you want boost::bimap is the way to go.

std::set < std::pair < Tkey, Tvalue > > will do what you want in a basic kind of way. Auxiliary std::set < Tkey > and std::set < Tvalue > give you global contains_key and contains_value in O(log(n)), if that's what you want.

std::map < Tkey, std::set < Tvalue> > gives you convenient O(log(n)) access to the values for a key. Maintaining an inverted copy gives you convenient O(log(n)) access to the keys for a value.

It really all depends on what you want to do, and whether the data is an arbitrary set of key, value pairs or somehow restricted.

# clojure - 如何检查变量是否在 clojure 中实现了接口？

> ID：12170412
> 
> 赞同：7
> 
> 时间：2012-08-29T03:15:01.217
> 
> 标签：clojure

所以我定义了一个关键字：

```
(def a :hello) 
```

如何检查它是否实现了 IFn 接口？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-29T04:00:04.513

对于一般情况，您可以使用[`instance?`](http://clojure.org/java_interop#Java%20Interop-The%20Dot%20special%20form-(instance?%20Class%20expr))谓词：

```
(instance? <class-or-interface> <object>) 
```

引用文档：

> `(instance? c x)`计算 x 并测试它是否是类 c 的实例。返回真或假。

例如：

```
(instance? java.lang.String "test")
> true

(instance? java.io.Serializable "test")
> true 
```

对于问题中的代码，请执行以下操作：

```
(instance? package.of.IFn a) 
```

或者，正如评论中所指出的，对于询问是否`a`是这样的一个实例的非常具体的情况`IFn`将起作用：

```
(ifn? a) 
```

# javascript - html5拖放确定拖动项目的来源

> ID：12170415
> 
> 赞同：2
> 
> 时间：2012-08-29T03:15:20.620
> 
> 标签：javascript, html

如果我将文件拖到网页上，它会触发 dragenter 事件。如果我拖动一个元素，它也会触发相同的事件。我如何确定拖动的项目是来自 html 还是来自资源管理器等外部应用程序。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T04:12:49.107

如果您正在从 html 进行拖放，您会这样做

```
e.dataTransfer.setData() //at the source 
```

和

```
e.dataTransfer.getData() //at the destination 
```

如果您从资源管理器中获取项目，您会这样做

```
var files = e.dataTransfer.files; 
```

所以我想你会知道它来自哪里。

# coldfusion - 如何在 /WEB-INF/cfclasses/ 中不创建缓存模板的情况下进行 CFINCLUDE？

> ID：12170424
> 
> 赞同：1
> 
> 时间：2012-08-29T03:16:27.307
> 
> 标签：coldfusion, include, coldfusion-9

是否有任何解决方案或替代 ColdFusion 标记来包含静态文本文件而不在 /WEB-INF/cfclasses 下创建模板缓存？

问题是我的动态页面随着时间的推移而增长。每个页面都需要包含一个静态文件。

例如

```
<cfinclude template="mapping/static_1.txt> for page 1
<cfinclude template="mapping/static_2.txt> for page 2
<cfinclude template="mapping/static_3.txt> for page 3
....etc. 
```

由于页面数量增长到 2000 页，导致服务器停机，因为系统生成了超过服务器限制的 2000 个缓存模板。

我可以要求托管支持来扩展限制，但这不会是随着时间的推移而增长的动态页面的长期解决方案。

显然，**不需要计算，**因为要包含的文件是包含静态 HTML 标记（不涉及脚本）的静态文本 (.txt)。

**除此之外，是否有任何替代标签`<cfinclude >`**仅显示文件内容而无需二进制计算和缓存创建？

**或者有什么解决方案可以防止服务器缓存 .txt 文件？**

对不起，这个问题可能很简单，但我是 CF 的新手。您的指针将不胜感激。

干杯查农

* * *

我的托管支持不建议一起禁用缓存。

无论如何，我想出了一个简单的解决方案，使用`<cffile>`而不是`<cfinclude>`.

使用`<cffile>`服务器时不会执行每一行并创建缓存。相反，它只是抓取整个文件并将其放入变量中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T06:58:32.147

如果这些是静态 HTML 文件，为什么要使用 CFINCLUDE？例如，使用 FileRead()（或使用 FileOpen/FileReadLine/FileIsEOF 的更长版本） - 甚至使用 action="read" 的 CFFILE。

```
<cfset variables.content = FileRead("mapping/static_1.txt")>
<cfoutput>
    #variables.content#
</cfoutput> 
```

如果没有要处理的 CFML/CFScript，那么使用 CFINCLUDE 是没有意义的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T06:11:45.857

You don't *need* to cache any compiled class files at all: there's a setting in CFAdmin to switch this caching off (on the Cache page: "Save Class Files"). Those cached files are only really a benefit at server start-up time: it saves files being re-compiled when they're first accessed. This overhead is neglible, really. It used to be considerable back in the days of CFMX6 & 7, but not so much since then.

There is - as far as I know - no way to pick & choose which files have their compiled classes saved. It's all or nothing.

What one could do, I suppose, is to switch the setting on, compile all the apps "main" files so their classes are saved, then switch the setting off. One would need to repeat this process whenever one adds new files to the application though. Still: that's not such a hardship.

But I see no benefit in having these files saved at all, these days.

# map - 如何快速绘制地图

> ID：12170428
> 
> 赞同：0
> 
> 时间：2012-08-29T03:17:24.140
> 
> 标签：map, mapping, vector-graphics

我正在尝试将图层（土地、街道、街道名称）与谷歌地图、openstreetmap.org、maperitive.net（或者如果你有更好的推荐）分开导出。

最终目标是制作一张自定义标记的地图，但我需要确保土地是相同的，并且大部分道路都排成一行。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T07:24:59.783

您需要从 OpenStreetMap 获取您所在地区的原始 XML 数据。对于除了很小的区域之外的任何东西，这可能是一个巨大的文件。有一个 API，但你没有提到一种语言，但我知道 Python 和 R 有绑定。

完成此操作后，根据 OSM 数据定义提取所需的位 - 基本上，您可以使用包含在您使用的任何语言中的任何 XML 解析器通过属性标签选择 XML 元素。

然后，您将拥有一个需要渲染为地图的矢量数据集。为此，您可以使用 Mapnik，这是 OpenStreetMap 用来将标签放置在正确位置、绘制好看的线条等的工具。

这都是相当辛苦的工作。也许您可以只使用现有提供商的一些地图？听起来您想要一些简单的东西 - 您尝试过 Stamen.com 的“碳粉”地图吗？

[http://maps.stamen.com/toner/#12/37.7619/-122.3930](http://maps.stamen.com/toner/#12/37.7619/-122.3930)

# java - 如何在 Android 中打印标准输出以进行单元测试？

> ID：12170429
> 
> 赞同：4
> 
> 时间：2012-08-29T03:17:25.310
> 
> 标签：java, android, unit-testing, junit, stdout

我需要一种快速的方法来进行一些测试，并且不想查看 Dalvik 调试监视器。我只想快速创建`public static void main()`并打印一些结果以进行调试。我以为我可以使用单元测试框架在控制台标准输出上获得一些结果，但`System.out.println()`仍然会进入日志（以及`Log.d()`）。

**那么有没有办法在运行单元测试时打印标准输出？**

```
ant debug install test
test:
 [echo] Running tests ...
 [exec]
 [exec] com.MainTest:.
 [exec] Test results for InstrumentationTestRunner=. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-19T17:53:57.107

我没有找到为单元测试启用标准输出重定向的选项，但这里有一个解决方法。运行单元测试后（或在单独的 shell 窗口中）输入：

```
adb logcat|grep System.out 
```

在 Windows 上，它可能应该是`adb logcat | FINDSTR System.out`

它只会显示 System.out 语句，包括单元测试的输出。

# ruby-on-rails - RoR 教程第 2 版中解释的路线？

> ID：12170437
> 
> 赞同：1
> 
> 时间：2012-08-29T03:18:32.657
> 
> 标签：ruby-on-rails, routing

作者迈克尔·哈特尔说：

> 这里的规则：
> 
> ```
> get "static_pages/home" 
> ```
> 
> 将对 URI /static_pages/home 的请求映射到 StaticPages 控制器中的 home 操作。

如何？给出了请求的类型，给出了 url，但是控制器和动作的映射在哪里呢？不过，我的测试都通过了。

我还尝试删除 StaticPagesController 中的所有操作，如下所示：

```
class StaticPagesController < ApplicationController
  def home
  end

  def about
  end

  def help
  end

  def contact
  end
end 
```

...而且我的测试仍然通过，这令人费解。不，我删除了所有这样的操作：

```
class StaticPagesController < ApplicationController
end 
```

这本书的第二版（在线）真的很令人沮丧。具体来说，无法遵循有关更改 Guardfile 的部分。例如，如果我指示您编辑此文件：

```
blah blah blah
dog dog dog
beetle beetle beetle
jump jump jump 
```

并进行以下更改：

```
blah blah blah
.
.
.
go go go
.
.
.
jump jump jump 
```

...您知道代码中的“go go go”行应该在哪里吗？

练习 3.5-1 的提示完全错误。如果作者在每章的末尾都放置评论部分，那么 Rails 社区就可以自行编辑这本书。

测试：

```
require 'spec_helper'

describe "StaticPages" do
  let(:base_title) { "Ruby on Rails Tutorial Sample App" }

  describe "Home page" do
    it "should have the h1 'Sample App'" do
      visit '/static_pages/home'
      page.should have_selector('h1', :text => 'Sample App')
    end

    it "should have the title 'Home'" do
      visit "/static_pages/home"
      page.should have_selector(
            'title', 
            :text => "#{base_title} | Home")
    end

  end

  describe 'Help page' do
    it "should have the h1 'Help'" do
      visit "/static_pages/help"
      page.should have_selector('h1', :text => 'Help')
    end

    it "should have the title 'Help'" do
      visit '/static_pages/help'
      page.should have_selector(
            'title',
            :text => "#{base_title} | Help")
    end

  end

  describe 'About page' do
    it "should have the h1 'About'" do
      visit '/static_pages/about'
      page.should have_selector('h1', :text => 'About')
    end

    it "should have the title 'About'" do
      visit '/static_pages/about' 
      page.should have_selector(
            'title',
            :text => "#{base_title} | About")
    end
  end

  describe 'Contact page' do
    it "should have the h1 'Contact'" do
      visit '/static_pages/contact'
      page.should have_selector('h1', :text => 'Contact')
    end

    it "should have the title 'Contact'" do
      visit '/static_pages/contact'
      page.should have_selector(
            'title', 
            :text => "#{base_title} | Contact")
    end
  end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T03:32:19.843

正如你在这里看到的：

[http://guides.rubyonrails.org/routing.html#http-verb-constraints](http://guides.rubyonrails.org/routing.html#http-verb-constraints)

它只是一个简写

```
match 'static_pages/home' => 'static_pages#home', :via => :get 
```

基本上，Rails 从您的 url 推断出您`static_pages/home`指的是 StaticPagesController 的 home 动作。

此外，当您“删除”所有操作时，您留​​下了操作定义 - 这是测试检查的内容。它只是检查它是否可以转到您的静态页面控制器的主页操作。只要它存在，它是否不做任何事情都没有关系（至少我认为你的测试是这样做的——也关心发布测试吗？）

如果你删除

```
...
def home
end
... 
```

从你的控制器，我很确定你的测试会失败

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T01:50:47.547

我找到了这个难题的答案。首先，这是一个轨道“问题”而不是 rspec 问题；如果我向 routes.rb 添加路由，例如：

```
get "static_pages/dog" 
```

...然后输入网址

```
http://localhost:3000/static_pages/dog 
```

在我的浏览器中，rails 抱怨：

> 未知动作
> 
> 找不到 StaticPagesController 的动作“狗”

然后，如果我将狗动作添加到控制器，然后创建一个视图，一切正常且花花公子。

但是如果我然后删除狗动作，然后使用相同的网址，

```
http://localhost:3000/static_pages/dog 
```

在我的浏览器中，这次我得到了不同的结果——而不是视图显示的错误。

事实证明，这种不一致的行为是称为默认渲染的 rails '功能'，解释如下：

[http://guides.rubyonrails.org/layouts_and_rendering.html#rendering-by-default-convention-over-configuration-in-action](http://guides.rubyonrails.org/layouts_and_rendering.html#rendering-by-default-convention-over-configuration-in-action)

According to the docs, all that's needed to render a page is a route and a view--the action is optional.

# sql - 多个按关系排序，一个案例

> ID：12170438
> 
> 赞同：0
> 
> 时间：2012-08-29T03:18:37.343
> 
> 标签：sql

我有这样的条件查询：

*   如果列（顺序）不为 0，则按值 1 到 99999（最大值）排序
*   我需要按姓氏顺序排列所有 0。

所以如果我有一张这样的桌子

```
ID   Order     Last Name
1     0        Manner
2     1        Brock
3     0        Lester
4     0        Annual
5     0        Greatly 
```

我*期望*的结果是：

```
Brock
Annual
Greatly
Lester
Manner 
```

这是我的查询。每次发生的事情是我得到姓氏排序，而不是非顺序 0 首先出现：

```
select c.last_name
from person_reports crt 
join person c 
where c.org_id = 1000 and crt.reports_to_id = 100389 and c.id = crt.contact_id 
order by c.last_name, case preference_num when 0 then 9999999 else preference_num end 
```

我目前的工作成果：

```
Annual
Brock
Greatly
Lester
Manner 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T03:23:03.047

您可以简单地将 ORDER BY 子句反转为：

```
order by case preference_num when 0 then 9999999 else preference_num end, c.last_name 
```

如果在开头再添加一个段，则可以避免使用魔术“9999999”：

```
order by case preference_num when 0 then 1 else 0 end, preference_num, c.last_name 
```

# haskell - 为什么我的程序使用这么多内存？

> ID：12170439
> 
> 赞同：5
> 
> 时间：2012-08-29T03:18:41.643
> 
> 标签：haskell, memory-leaks

对于仅 25mb 的文件，内存使用量恒定为 792mb！我认为这与我从列表中的使用有关，但是移动向量代码的某些部分（例如，应用 fft 的数组）并没有改变正在使用的内存量！

```
{-# LANGUAGE OverloadedStrings,BangPatterns #-}
import qualified Data.Attoparsec.Char8 as Ap
import Data.Attoparsec
import Control.Monad
import Control.Applicative
--import Control.DeepSeq (force)
import System.IO 
import System.Environment
import Data.List (zipWith4,unzip4,zip4,foldl')
import Data.Bits
import Data.Complex
import Data.String (fromString)
import Data.ByteString.Internal
import qualified Data.ByteString.Char8 as B
import qualified Data.ByteString.Lazy.Char8 as Bl 
import qualified Data.Vector.Unboxed as Vu
import qualified Statistics.Transform  as St

{-
I run a test on a collection of data from a file
[(1,t),(2,t),(3,t),(4,t),(5,t)]
   -     -     - 
   |     -     -     -
   |     |     -     -     -
   |     |     |
 [y++t,  n,  y++t]
To do that, I use splitN to create a list of list
[[(1,t),(2,t),(3,t)],[(2,t),(3,t),(4,t)],[(3,t),(4,t),(5,t)]]
Map a serie of functions to determine a value for each inner collection,
and return when an event happened.

-}

data FourD b a = FourD  a a a b

instance Functor (FourD c) where  
    fmap f (FourD x y z d) = FourD  (f x) (f y) (f z) d  

mgrav_per_bit = [ 18, 36, 71, 143, 286, 571, 1142 ]
--Converting raw data to mg
aToG :: Int -> Double    
aToG a = fromIntegral . sign $  uresult 
    where   
        twocomp = if a>128
                  then 256-a
                  else a
        uresult = sum  $ zipWith (*)   mgrav_per_bit (map (fromEnum . testBit  twocomp) [0..7])
        sign = if a > 128 
               then negate 
               else id

--Data is (int,int,int,time)
--Converted to (St.CD^3,Bytestring) in place of maping afterwards.                  
parseAcc :: Parser (FourD B.ByteString St.CD)
parseAcc = do   Ap.char '('
                x <-  fmap ((:+0) . aToG) Ap.decimal  
                Ap.char ','
                y <-  fmap ((:+0) . aToG) Ap.decimal
                Ap.char ','
                z <-  fmap ((:+0) . aToG) Ap.decimal
                Ap.char ','
                time <- takeTill (== 41)
                Ap.char ')'
                return $! FourD x y z time
--applies parseAcc to many lines, fails at the end of file (Need to add a newline)
parseFile = many $ parseAcc <* (Ap.endOfInput <|> Ap.endOfLine)

readExpr input = case parse parseFile  input of
     Done b val -> val
     Partial p -> undefined
     Fail a b c -> undefined 

unType  (FourD  x y d z) = (x ,y ,d ,z)          

-- Breaks a list of FourD into smaller lists, apply f and g to those lists, then filter the result based if an even happened or not
amap  :: (Num c, Ord c) =>     ([a] -> [c]) -> ([d] -> [ByteString]) -> [FourD d a] -> [Bl.ByteString]
amap f g = (uncurry4 (zipWith4 (filterAcc))). map4 f g . unzip4 . map (unType)
    where map4 f g (a,b,c,d) = (f a,f b,f c,g d)
          uncurry4 f (a,b,c,d) = f a b c d 

-- before  i had map filterAcc,outside amap. Tried to fuse everything to eliminate intermediaries

-- An event is detected if x > 50
filterAcc  x y z t = if x > 50
                                then  (Bl.pack . B.unpack) $ "yes: " `B.append`  t  
                                else  ""
-- split [St.CD] in [(Vector St.CD)], apply fft to each, and compress to a single value. 
-- Core of the application
fftAcross :: [St.CD] -> [Int]
fftAcross = map (floor . noiseEnergy .  St.fft) . splitN 32 

-- how the value is determined (sum of all magnitudes but the first one)
noiseEnergy  :: (RealFloat a, Vu.Unbox a) => Vu.Vector (Complex a) -> a
noiseEnergy  x = (Vu.foldl' (\b a-> b+(magnitude a)) 0 (Vu.drop 1 x))/32

-- how the values are split in (Vector St.CD), if lenght > 32, takes 32, otherwhise I'm done
splitN :: Vu.Unbox a => Int -> [a] -> [Vu.Vector a]
splitN n x =  helper x 
    where
    helper x   = if     atLeast n x 
                 then   (Vu.take n (Vu.fromList x)) : (helper  (drop 1 x) )
                 else  []
-- Replacing the test by atLeast in place of a counter (that compared to length x,calculated once) reduced the behaviour that memory usage was constant.     

-- this is replicated so the behaviour of splitN happens on the time part of FourD, Can't use the same since there is no Vector Bytestring instance                
splitN2 n x =  helper x 
    where
    helper x   = if   atLeast n x 
                 then  (head   x) : (helper  (drop 1 x))
                 else  []

atLeast :: Int -> [a] -> Bool
atLeast 0 _      = True
atLeast _ []     = False
atLeast n (_:ys) = atLeast (n-1) ys

main = do    

    filename <- liftM head getArgs
    filehandle <- openFile "results.txt" WriteMode
    contents <- liftM readExpr $ B.readFile filename
    Bl.hPutStr (filehandle) .  Bl.unlines .  splitAndApplyAndFilter  $ contents where
        splitAndApplyAndFilter  = amap fftAcross (splitN2 32) 
```

编辑：经过一些重构，融合了一些地图，减少了长度，我设法用 25mb 的输入文件让它在 400~ 处工作。不过，在 100mb 上，它需要 1.5gb。

该程序旨在确定某个事件是否在某个时间点发生，因为它需要一组值（我使用 32 atm），在其中运行 fft，对这些值求和并查看是否超过阈值。如果是，则将时间打印到文件中。

[http://db.tt/fT8kXPKz](http://db.tt/fT8kXPKz)用于 25mb 测试文件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T06:36:06.967

由于reddit中关于相同问题的主题，我找到了解决方案！ [使用 Haskell 和 Attoparsec 进行解析](http://newartisans.com/2012/08/parsing-with-haskell-and-attoparsec/)

我的大部分问题是由于 attoparsec 是严格的并且 haskell 数据相当大的事实引起的（因此 100mb 的文本文件实际上可以在运行时更多）

另一半是分析使内存使用加倍，我没有考虑到这一点。

将解析器更改为惰性后，我的程序使用 120mb 代替 800mb（当输入大小为 116mb 时），所以成功了！

如果有人对此感兴趣，这里是相关的代码更改：

```
readExpr input = case parse (parseAcc<*(Ap.endOfLine<*Ap.endOfInput<|>Ap.endOfLine)) input of
     Done b val -> val : readExpr b
     Partial  e -> []
     Fail _ _ c -> error c 
```

完整代码：

```
{-# LANGUAGE OverloadedStrings,BangPatterns #-}
import qualified Data.Attoparsec.Char8 as Ap
import Data.Attoparsec
import Control.Monad
import Control.Applicative
--import Control.DeepSeq (force)
import System.IO 
import System.Environment
import Data.List (zipWith4,unzip4,zip4,foldl')
import Data.Bits
import Data.Complex
import Data.String (fromString)
import Data.ByteString.Internal
import qualified Data.ByteString.Char8 as B
import qualified Data.ByteString.Lazy.Char8 as Bl 
import qualified Data.Vector.Unboxed as Vu
import qualified Statistics.Transform  as St

{-
I run a test on a collection of data from a file
[(1,t),(2,t),(3,t),(4,t),(5,t)]
   -     -     - 
   |     -     -     -
   |     |     -     -     -
   |     |     |
 [y++t,  n,  y++t]
To do that, I use splitN to create a list of list
[[(1,t),(2,t),(3,t)],[(2,t),(3,t),(4,t)],[(3,t),(4,t),(5,t)]]
Map a serie of functions to determine a value for each inner collection,
and return when an event happened.

-}

data FourD b a = FourD  a a a b

instance Functor (FourD c) where  
    fmap f (FourD x y z d) = FourD  (f x) (f y) (f z) d  

mgrav_per_bit = [ 18, 36, 71, 143, 286, 571, 1142 ]
--Converting raw data to mg
aToG :: Int -> Double    
aToG a = fromIntegral . sign $  uresult 
    where   
        twocomp 
            | a>128     = 256-a
            | otherwise =     a
        uresult = sum  $ zipWith (*)   mgrav_per_bit (map (fromEnum . testBit  twocomp) [0..7])
        sign 
            | a > 128   = negate
            | otherwise =     id

--Data is (int,int,int,time)
--Converted to (St.CD^3,Bytestring) in place of maping afterwards.                  
parseAcc :: Parser (FourD B.ByteString St.CD)
parseAcc = do   Ap.char '('
                x <-  fmap ((:+0) . aToG) Ap.decimal  -- Parse, transform to mg, convert to complex
                Ap.char ','
                y <-  fmap ((:+0) . aToG) Ap.decimal
                Ap.char ','
                z <-  fmap ((:+0) . aToG) Ap.decimal
                Ap.char ','
                time <- takeTill (== 41)
                Ap.char ')'
                return $! FourD x y z time
--applies parseAcc to many lines, fails at the end of file (Need to add a newline)
parseFile = many $ parseAcc <* (Ap.endOfInput <|> Ap.endOfLine)

readExpr input = case parse (parseAcc<*(Ap.endOfLine<*Ap.endOfInput<|>Ap.endOfLine)) input of
     Done b val -> val : readExpr b
     Partial  e -> []
     Fail _ _ c -> error c 

unType  (FourD  x y d z) = (x ,y ,d ,z)          

-- Breaks a list of FourD into smaller lists, apply f and g to those lists, then filter the result based if an even happened or not
amap  :: (Num c, Ord c) =>     ([a] -> [c]) -> ([d] -> [ByteString]) -> [FourD d a] -> [ByteString]
amap f g = (uncurry4 (zipWith4 (filterAcc))). map4 f g . unzip4 . map (unType)
    where map4 f g (a,b,c,d) = (f a,f b,f c,g d)
          uncurry4 f (a,b,c,d) = f a b c d 

-- before  i had map filterAcc,outside amap. Tried to fuse everything to eliminate intermediaries

-- An event is detected if x > 50
filterAcc  x y z t 
              | x > 50    = t
              | otherwise = ""

-- split [St.CD] in [(Vector St.CD)], apply fft to each, and compress to a single value. 
-- Core of the application
fftAcross :: [St.CD] -> [Int]
fftAcross = map (floor . noiseEnergy .  St.fft) . splitN 32 

-- how the value is determined (sum of all magnitudes but the first one)
noiseEnergy  :: (RealFloat a, Vu.Unbox a) => Vu.Vector (Complex a) -> a
noiseEnergy  x = (Vu.foldl' (\b a-> b+(magnitude a)) 0 (Vu.drop 1 x))/32

-- how the values are split in (Vector St.CD), if lenght > 32, takes 32, otherwhise I'm done
splitN :: Vu.Unbox a => Int -> [a] -> [Vu.Vector a]
splitN n x =  helper x 
    where
    helper x   
            | atLeast n x = (Vu.take n (Vu.fromList x)) : (helper  (drop 1 x) )
            | otherwise   = []

-- Replacing the test by atLeast in place of a counter (that compared to length x,calculated once) reduced the behaviour that memory usage was constant.     

-- this is replicated so the behaviour of splitN happens on the time part of FourD, Can't use the same since there is no Vector Bytestring instance                
splitN2 n x =  helper x 
    where
    helper x   
            | atLeast n x = (head   x) : (helper  (drop 1 x))
            | otherwise   = []

atLeast :: Int -> [a] -> Bool
atLeast 0 _      = True
atLeast _ []     = False
atLeast n (_:ys) = atLeast (n-1) ys

intervalFinder :: [ByteString]->[B.ByteString]
intervalFinder x = helper x ""
    where
    helper (x:xs) "" 
        | x /= ""   = ("Start Time: " `B.append` x `B.append` "\n"):(helper xs x)
        | otherwise = helper xs ""
    helper (x:xs) y
        | x == ""   = ( "End   Time: "`B.append`  y `B.append` "\n\n" ):(helper xs "")
        | otherwise = helper xs x
    helper _ _      = []

main = do
    filename <- liftM head getArgs
    filehandle <- openFile "results.txt" WriteMode
    contents <- liftM readExpr $ B.readFile filename
    Bl.hPutStr (filehandle) .  Bl.fromChunks . intervalFinder . splitAndApplyAndFilter  $ contents 
    hClose filehandle
    where
         splitAndApplyAndFilter  = amap fftAcross (splitN2 32)  

    --contents <- liftM ((map ( readExpr )) . B.lines) $ B.readFile filename

   {-     *Main> let g = liftM ((amap fftAcross (splitN2 32)) . readExpr) $ B.readFile "te
stpattern2.txt"
-}

   -- B.hPutStrLn (filehandle)  . B.unlines . map (B.pack . show ) .  amap (map (floor .quare) .  (filter (/=[])) . map ( (drop 1) . (map (/32)) . fft ) . splitN 32) . map ( fmap(fromIntegral . aToG)) . map readExpr $ contents 
```

# php - 从 symfony2 中的控制器添加字段特定错误

> ID：12170440
> 
> 赞同：29
> 
> 时间：2012-08-29T03:19:27.420
> 
> 标签：php, symfony, symfony-forms

我的 symfony 表单正在进行一些复杂的验证，我需要能够从我的控制器将错误分配给特定字段。现在，我有这样的全局错误：

```
$error = new formerror("There is an error with the form");
$form->addError($error); 
```

但这会产生一个全局错误，而不是绑定到特定字段的错误。

有没有办法从我的控制器中对特定字段抛出错误？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-08-29T04:10:54.287

感谢 IRC 的一些帮助（感谢@fkrauthan！）我想出了一个答案。

SF2 中的每个字段实际上都是表单的一个实例。您需要做的是访问该字段的表单对象，然后在其上添加错误。值得庆幸的是，symfony 提供了一种获取嵌入式表单/字段的方法。

这是我的代码：

```
$error = new FormError("There is an error with the field");
$form->get('field')->addError($error); 
```

正如一些人所指出的，您需要在文件顶部包含 FormError 类： `use Symfony\Component\Form\FormError;`

# android - 拍照后相机活动中的对话框

> ID：12170446
> 
> 赞同：1
> 
> 时间：2012-08-29T03:20:36.443
> 
> 标签：android, android-intent, android-camera

我想使用 android 中的标准相机应用程序在我的应用程序中拍照。问题是，拍完照片后，我不想立即回到我的应用程序。相反，我希望向用户提供一个选项，询问他/她刚刚拍摄的照片是否还可以。如果不是，则不要返回应用程序，而是重新运行相机活动。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T04:08:22.510

像这样尝试：

```
 public void TakeFromCamera(View view) {

    Intent cameraIntent = new Intent(
            android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
    startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    switch(requestCode){

    case CAMERA_PIC_REQUEST:

        if (requestCode == CAMERA_PIC_REQUEST) {

                         //  Add the code for the dialogBox
        }
        break;

    }
} 
```

# php - PHP函数效率问题

> ID：12170447
> 
> 赞同：0
> 
> 时间：2012-08-29T03:20:37.730
> 
> 标签：php, performance

下面代码的目的是检查日期和时间 AM 或 PM 的 2 个参数。我的代码有效，但我正在努力提高效率并需要帮助。我有 2 个 if 语句，例如这个 if 语句 sun pm 和 sun am，然后我有 mon tues, wed, thur...... 所以这很长。有人告诉我有一种方法可以缩短它，请帮忙。

```
if ($day == 'Sun' && $AMorPM == 'pm')
{
echo"
<fieldset>
<Legend><b>CHECK-OUT</b></Legend>
Date out:<input name='DateOut' type='text' value=$dateout disabled='disabled'><br>
Time out:<input name='TimeOut' type='text' value=$timeout disabled='disabled'> 
<input type='radio' name='AM'disabled='disabled'>AM 
<input type='radio' name='PM' checked disabled='disabled'>PM<br>
Day of week: <input type='radio' name='S'checked disabled='disabled'>S 
<input type='radio' name='Mon' disabled='disabled'>M 
<input type='radio' name='Tue'disabled='disabled'>T 
<input type='radio' name='Wed'disabled='disabled'>W 
<input type='radio' name='Thu'disabled='disabled'>R 
<input type='radio' name='Fri'disabled='disabled'>F 
<input type='radio' name='Sat'disabled='disabled'>S
</fieldset>";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T04:31:02.430

您可以将其设置为函数-

```
//create array of days/short day codes
$day_array = array('Sun'=>'S', 'Mon'=>'M', 'Tue'=>'T', 'Wed'=>'W', 'Thu'=>'R', 'Fri'=>'F', 'Sat'=>'S');

//creates clock function
function clock($today, $ampm, $date, $time, $dayarray){

if ($ampm == 'am') {$punch_type =  "CHECK-IN";
                   $inout = 'in'; 
                   $inout_up = ucfirst($inout);
                   $checked_am = 'checked = "checked"';
} 
else               {$punch_type = "CHECK-OUT";
                   $inout = 'out'; 
                   $inout_up = ucfirst($inout);
                   $checked_pm = 'checked = "checked"';
}
//sets day of the week array vars, based of today
$dayof_week = $dayarray[$today];

echo"
<fieldset>
<Legend><b>$punch_type</b></Legend>
Date $inout:<input name='Date$inout_up' type='text' value=$date disabled='disabled'><br>
Time $inout:<input name='Time$inout_up' type='text' value=$time disabled='disabled'> 
<input type='radio' name='AM' $checked_am disabled='disabled'>AM <input type='radio' name='PM' $checked_pm disabled='disabled'>PM<br>
Day of week: ";

// loop through day array to create radios for every day of the week
foreach($dayarray as $key=>$value){
    // sets which day is checked
    $chkd = ($today == $key) ? ' checked = "checked"' : ''; 
    // creates each radio
    echo "<input type='radio' name='$key' $chkd disabled='disabled'>$value";}

echo"</fieldset>";
} 
```

然后你可以通过执行调用该函数 -

```
clock("Sun", "am", "8/28/12", "10:30", $day_array); 
```

这样，您就不需要每天重写脚本。如果您只是在函数中动态设置 4 个变量，它将动态构建/显示您的时钟，即。

```
clock($day, $AMorPM, $date, $time, $day_array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T03:39:35.373

无论一周中的哪一天，你对上午和下午做同样的事情吗？无论一天中的什么时间，您是否对一周中的每一天都做同样的事情？如果是这样，那您为什么不先处理 AM/PM 位，然后分别处理星期几？

```
echo "<fieldset>
    <Legend><b>CHECK-OUT</b></Legend>
    Date out:<input name='DateOut' type='text' value=$dateout disabled='disabled'><br>
    Time out:<input name='TimeOut' type='text' value=$timeout disabled='disabled'> 
    <input type='radio' name='AM'";

if ($AMorPM == "am")
   echo " checked ";

echo "disabled='disabled'>AM <input type='radio' name='PM'";

if ($AMorPM == "pm")
    echo " checked ";

echo " disabled='disabled'>PM<br>"; 
```

无论选择一周中的哪一天，该代码都会在一天中的某个时间执行您想要的操作。现在对一周中的每一天都做同样的事情。

# nsstring - 检查 NSString "000001XX" 是否是带有 intValue 的数字

> ID：12170451
> 
> 赞同：1
> 
> 时间：2012-08-29T03:21:33.497
> 
> 标签：nsstring

现在我正在尝试在我的应用程序上添加前端检查，以检测用户是否在文本字段中仅输入数字。

我用：

```
- (IBAction)checkID:(UITextField *)sender {
if ([sender.text isEqualToString:@""]) {
    sender.text = @"This information is required";
    sender.backgroundColor =[UIColor redColor];
}else if (![sender.text intValue]) {
    sender.text = [sender.text stringByAppendingString:@" is not valid number"];
    sender.backgroundColor =[UIColor redColor];
}
NSLog(@"send.text is %@, intValue is %d",sender.text,[sender.text intValue]); 
```

}

但是我发现它的文本以数字开头并以字符串结尾，它的 intValue 仍然是数字。在我的文本中，文本是“00001aa”，但 intValue 是 1。

有没有其他方法可以过滤掉这个“00001aa”文本？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T03:26:20.843

是的，您可以使用`NSRegularExpression`, 或`NSCharacterSet`（适用于正数）。

对于正则表达式，使用`^[-+]?[0-9]+$`.

```
NSRegularExpression *numEx = [NSRegularExpression
    regularExpressionWithPattern:@"^[-+]?[0-9]+$" options:0 error:nil
];
NSLog(@"%ld", [numEx numberOfMatchesInString:@"-200" options:0 range:NSMakeRange(0, 4)]);
NSLog(@"%ld", [numEx numberOfMatchesInString:@"001A" options:0 range:NSMakeRange(0, 4)]); 
```

对于字符集，使用`[NSCharacterSet decimalDigitCharacterSet]`.

```
BOOL isNum = [[NSCharacterSet decimalDigitCharacterSet]
    isSupersetOfSet:[NSCharacterSet characterSetWithCharactersInString:@"001AA"]
]; 
```

# jquery - 带有上一个和下一个按钮的 jQuery 照片查看器

> ID：12170453
> 
> 赞同：1
> 
> 时间：2012-08-29T03:22:45.730
> 
> 标签：jquery, slideshow, photo-gallery

我正在尝试使用 jQuery 中的上一个和下一个导航选项编写照片查看器。除了上一个导航按钮外，它是完全可用的。我很困惑，因为如果先按下“下一个”按钮，“上一个”按钮实际上可以工作，但是如果先按下“上一个”按钮，不仅没有任何反应，而且“下一个”按钮也会中断！想法？？？我想这可能是一个初始化问题......

这是jQuery：

```
$(function() {
$("a:has(img.gallery_photo)").click(function(event) {
    var showPath = $(this).attr("href");
    var caption = $(this).attr("title");
    var curPhoto = this;
    var nextPhoto = $(this).next();

    if(nextPhoto.length == 0){
        nextPhoto = $("#gallery a:first");
    }

    event.preventDefault();

    // Previous Button
    $("#photo_show a#back").click(function(event) {
        var placeHolder2 = curPhoto;
        event.preventDefault();
        nextPhoto = curPhoto;
        curPhoto = placeHolder2.prev(); 
        if(curPhoto.length == 0){
            curPhoto = $("#gallery a:last");
        }
        $("span#display_photo").html("<img src=\"" + curPhoto.attr("href") + "\" width=\"500\" height=\"350\"/>");
        $("p#caption").html("<p id=\"caption\"><em>" + curPhoto.attr("title") + "</em> </p>");
    });

    // Next Button
    $("#photo_show a#next").click(function(event) {
    var placeHolder = nextPhoto;
        event.preventDefault();
        curPhoto = nextPhoto;
        nextPhoto = placeHolder.next();
        if(nextPhoto.length == 0){
            nextPhoto = $("#gallery a:first");
        }           
        $("span#display_photo").html("<img src=\"" + curPhoto.attr("href") + "\" width=\"500\" height=\"350\"/>");
        $("p#caption").html("<p id=\"caption\"><em>" + curPhoto.attr("title") + "</em></p>");
    });

    $("span#display_photo").html("<img src=\"" + showPath + "\" width=\"500\" height=\"350\"/>");
    $("p#caption").html("<p id=\"caption\"><em>" + caption + "</em></p>");
    $("#photo_show").fadeIn(500);
});
}); 
```

这是HTML：

```
<body>  
<div id="photo_show">
    <table id="photo_nav">
        <tr>
            <td width="10%" align="left"><a id="back" href=""><img src="prev.png" alt="Click for Previous Photo"/></a></td>
            <td width="80%" align="center"><span id="display_photo"><img src="Sample Pictures/Koala.jpg" width="500" height="350"/></span></td>
            <td width="10%" align="right"><a id="next" href=""><img src="next.png" alt="Click for Next Photo"/></a></td>
        </tr>
    </table>
</div>  
<div id="gallery">
    <a href="Sample Pictures/Desert.jpg" title="Desert"><img class="gallery_photo" src="Sample Pictures/Desert.jpg" width="200" height="130" alt="Cannot Be Displayed"/></a>
    <a href="Sample Pictures/Jellyfish.jpg" title="Jellyfish"><img class="gallery_photo" src="Sample Pictures/Jellyfish.jpg" width="200" height="130" alt="Cannot Be Displayed"/></a>
    <a href="Sample Pictures/Koala.jpg" title="Koala"><img class="gallery_photo" src="Sample Pictures/Koala.jpg" width="200" height="130" alt="Cannot Be Displayed"/></a>
</div>      
</body> 
```

# git - 在第一次推送之前检查 git remote 是否存在

> ID：12170459
> 
> 赞同：35
> 
> 时间：2012-08-29T03:23:32.323
> 
> 标签：git, bash

我正在编写一个 bash 脚本，我需要一个测试来查看给定的远程是否存在。

假设，具体来说，我想测试遥控器是否`faraway`存在。如果我推动了一些事情`faraway`，我可以做到`if [ -d .git/refs/remotes/faraway ]; then ...`。但据我所见，`faraway`即使`.git/refs/remotes/faraway`不存在，别名仍然可以定义。

另一种选择是解析输出`git remote`并查看是否`faraway`出现在那里。但我想知道是否有一种更简单的方法来检查是否`faraway`已定义，无论是否`.git/refs/remotes/faraway/`存在。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-08-29T03:59:05.183

一个想法：您可以在`git ls-remote faraway`. 这实际上将强制与远程通信，而不是仅仅在本地寻找它的存在或不存在。

```
if git ls-remote --exit-code faraway; then
    ....
fi 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2014-11-10T11:53:22.057

检查是否`faraway`的另一种方法定义在`.git/config`：

```
if git config remote.faraway.url > /dev/null; then
  …
fi 
```

要检查是否`faraway` *未定义*，请在条件前加上`!`：

```
if ! git config remote.faraway.url > /dev/null; then
  …
fi 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-04-29T01:30:06.303

如果远程定义在 中`.git/config`，您可以避免使用 ping 远程服务器`git remote`。

```
if git remote | grep faraway > /dev/null; then
  ...
fi 
```

# gerrit - 没有收到 Gerrit 审核电子邮件

> ID：12170460
> 
> 赞同：0
> 
> 时间：2012-08-29T03:23:52.123
> 
> 标签：gerrit

我正在使用 Gerrit2.4.2。我的帐户是管理员，也在 Reviewer 和 Verifier 组中（我手动创建了这两个组）。在所有项目中，我允许审阅者组审阅 /ref/* 和验证者提交 /ref/*。请看下面我的图表： ![所有项目访问权限设置](../Images/ab74d275ddef9a319aa608f5d93573d5.png)

我们有一个名为 appengine 的项目。还有一个名为“appengine 团队”的小组。这个小组有两个成员：另一个开发人员和我。

现在另一个开发人员添加了一个测试文件并将其推送到 HEAD:refs/for/master。但是我没有收到任何电子邮件通知。在他登录 Gerrit 网站并发现他的更改问题后。并手动添加我的电子邮件，我可以看到电子邮件通知，也可以看到网站中的更改问题。 ![现在审阅者输入为空](../Images/b7ad2f9acdee6c6fc9079832632cc296.png)

我的项目设置如下所示： ![在此处输入图像描述](../Images/e8343d20c9e5dc138d81f6533f78d455.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T15:49:34.547

Gerrit 不会在上传更改时发送电子邮件通知，除非您正在观看该项目（设置->观看的项目）。如果有人将您添加为更改的审阅者，您还将收到电子邮件通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T07:56:34.430

我目前的方法是使用一个参数作为`receive-pack`命令。我添加到我的`.git/config`文件中：

```
[remote "review"]
    pushurl = ssh://username@IP:29418/myproject.git
    push = HEAD:refs/for/master

    receivepack = git receive-pack --reviewer csfreebird 
```

每次开发人员使用`git push review`，我都会收到一封电子邮件。

不完美，Gerrit服务器应该承担责任。

# java - 如何评估 Java 版本升级的风险？

> ID：12170462
> 
> 赞同：3
> 
> 时间：2012-08-29T03:24:13.173
> 
> 标签：java

我被要求评估我们是否可以在我们的一个生产部署的 web 应用程序上安全地升级 java 版本。代码库相当大，我们希望避免对所有内容进行回归测试（遗憾的是没有自动化测试），但我们在一些手动测试期间已经遇到了至少一个问题（XmlStringReader.getLocalName 现在会在它刚刚返回时抛出 IllegalStateExeption null) 和上级对升级非常紧张。

当前建议的方法是对每个版本的 JDK 源进行源比较并评估这些更改以查看哪些更改可能会产生影响，但似乎需要进行很多更改（并且如上所述，代码库有点大） . 仅查看每个版本的 java 版本更改是否安全且容易？或者有没有更简单的方法来进行这种评估？

编辑：我忘了提到正在考虑的版本升级是次要版本升级，即 1.6.10 到 1.6.33

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T03:29:29.627

**没有什么可以替代在真实系统中对其进行测试**。您可能能够在错误报告或目视检查中发现一些明显的东西，但是由于更复杂的交互而检测到更改是不可能的。甚至检测看似简单的更改，这些更改会改变 GC 如何影响您正在运行的应用程序或热点如何优化您的代码（您*也在*检查 c++ 代码，对）或某些关键算法的执行方式......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T03:47:22.200

正如@jtahlborn 所说：没有什么能代替正确地测试它。

我会更进一步并指出，如果没有自动化，那么这是成本，您将一次又一次地发生。

正确答案是

1.  定义回归
2.  运行它（验证它）
3.  尽可能自动化

一个更简单的方案是简单地运行它并在您或您的客户找到时间时捕获错误。我个人认为这是让开发人员、经理和客户失去动力的好方法。我强烈建议您不要使用这种方法。

# python - python中string.partition的好习惯

> ID：12170464
> 
> 赞同：1
> 
> 时间：2012-08-29T03:24:40.787
> 
> 标签：python, string, variable-assignment

有时我会写这样的代码：

```
a,temp,b = s.partition('-') 
```

我只需要选择第一个和第三个元素。`temp`永远不会被使用。有一个更好的方法吗？

换句话说，有没有更好的方法来选择不同的元素来创建一个新列表？

例如，我想使用`0,1,3,7`旧列表中的元素创建一个新列表。代码将是这样的：

```
newlist = [oldlist[0],oldlist[1],oldlist[3],oldlist[7]] 
```

这很丑，不是吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T03:38:55.343

小心使用

```
a, _, b = s.partition('-') 
```

有时`_`用于国际化（gettext），所以你不想不小心覆盖它。

通常我会这样做`partition`而不是创建一个我不需要的变量

```
a, b = s.partition('-')[::2] 
```

这在一般情况下

```
from operator import itemgetter
ig0137 = itemgetter(0, 1, 3, 7)
newlist = ig0137(oldlist) 
```

如果您在循环中使用 itemgetter 比列表理解更有效

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-29T03:33:20.800

首先，还有这个替代方案：

```
a, b = s.partition('-')[::2] 
```

对于后者，由于没有明确的间隔，因此无法将其做得太干净。但这可能适合您的需求：

```
newlist = [oldlist[k] for k in (0, 1, 3, 7)] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-29T03:34:47.640

您可以使用 Python 的扩展切片功能定期访问列表：

```
>>> a = range(10)
>>> # Pick every other element in a starting from a[1]
>>> b = a[1::2]
>>> print b
>>> [1, 3, 5, 7, 9] 
```

负索引按您的预期工作：

```
>>> c = a[-1::-2]
>>> print c
>>> [9, 7, 5, 3, 1] 
```

对于你的情况，

```
>>> a, b = s.partition('-')[::2] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-29T03:35:39.667

Python 中选择第一个和第三个值的常见做法是：

```
a, _, b = s.partition('-') 
```

并选择列表中的指定元素，您可以执行以下操作：

```
newlist = [oldlist[k] for k in (0, 1, 3, 7)] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-26T18:08:28.857

如果您不需要保留中间字段，则可以使用`split`（并且类似地`rsplit`）与可选的 maxsplit 参数一起将拆分限制为分隔符的第一个（或最后一个）匹配项：

```
a, b = s.split('-', 1) 
```

这避免了一次性的临时或额外的切片。

唯一需要注意的是，与`split`不同`partition`的是，如果找不到分隔符，则返回原始字符串。解包的尝试将因此失败。该`partition`方法总是返回一个 3 元组。

# c# - 为单选按钮设置焦点（边界）

> ID：12170465
> 
> 赞同：1
> 
> 时间：2012-08-29T03:24:49.390
> 
> 标签：c#, winforms

我有一个 rdbAuto 按钮，当加载表单时，将检查 rdbAuto，我想为这个单选按钮设置焦点（边界），我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T04:55:35.403

您可以使用类似这样的内容覆盖 RadioButton 控件

```
 public class SuperRadioButton : RadioButton
  {
    private bool showFocusCues = false;

    protected override void InitLayout()
    {
      this.GotFocus += (sender, args) =>
      {
        showFocusCues = true;
      };

      this.LostFocus += (sender, args) =>
      {
        showFocusCues = false;
      };
    }

    protected override bool ShowFocusCues
    {
      get
      { 
        return showFocusCues;
      }
    }

  } 
```

这将强制在单选按钮获得焦点时显示边界。

使用此控件代替标准单选按钮，然后在 Form_Shown 事件中调用 Focus 方法

```
private void Form1_Shown(object sender, EventArgs e)
{
  superRadioButton1.Focus();
} 
```

# android - Android 使用 GridView 和 OnScrollListener

> ID：12170466
> 
> 赞同：5
> 
> 时间：2012-08-29T03:24:52.003
> 
> 标签：android, gridview, android-asynctask, onscroll

我正在构建一个网格视图，其中包含很多可能大约 1000++ 图片的图像。为了减少 gridview 的加载时间，我想使用 AbsListView 实现一个 onScrollListener。我将限制每个视图 20 个图像，然后当滚动到底部时，它将加载另外 20 个图像。这将重复，直到所有图像都已加载。

我一直在谷歌搜索样本，但似乎没有找到适合我的代码的样本。谁能指导我如何完成？我目前正在为我的图像使用 imageloader Lazylist。我也在使用 AsyncTask。

MainGridView.class

```
 public class MainGridView extends SherlockActivity {

    private ProgressDialog pDialog;
    ArrayList<HashMap<String, String>> songsList;
    static final String KEY_SONG = "song"; 
    static final String KEY_ID = "id";
    static final String KEY_TITLE = "title";
    static final String KEY_ARTIST = "artist";
    static final String KEY_CAT_ARTIST = "artistcat";
    static final String KEY_DURATION = "duration";
    static final String KEY_THUMB_URL = "thumb_url";
    static final String KEY_BIG_URL = "big_url";
    static final String KEY_CAT_URL = "cat_url";
    static String IMAGE_POSITION;
    GridView grid;
    MainGridViewLazyAdapter adapter;
    String cat_url;
    String artist_url;
    private int visibleThreshold = 5;
    private int currentPage = 0;
    private int previousTotal = 0;
    private boolean loading = true;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.gridview_main);

        getSupportActionBar().setDisplayHomeAsUpEnabled(true);
        checkInternetConnection();

        grid = (GridView) findViewById(R.id.grid_view);

    grid.setOnScrollListener(new OnScrollListener() {

    @Override
    public void onScroll(AbsListView view, int firstVisibleItem,
            int visibleItemCount, int totalItemCount) {
        // TODO Auto-generated method stub
        if (loading) {
            if (visibleItemCount > totalItemCount) {
                loading = false;
                previousTotal = totalItemCount;
                currentPage++;
            }
        }
        if (!loading && (totalItemCount - visibleItemCount) <= (firstVisibleItem + visibleThreshold)) {
            // I load the next page of gigs using a background task,
            // but you can call any function here.
            new loadGridView().execute(currentPage + 1);
            loading = true;
        }
    }

    @Override
    public void onScrollStateChanged(AbsListView view, int scrollState) {
        // TODO Auto-generated method stub

    }
    });

}

    public class loadGridView extends AsyncTask<Integer, String, String> {

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(MainGridView.this);
            pDialog.setTitle("Connect to Server");
            pDialog.setMessage("This process can take a few seconds to a few minutes, depending on your Internet Connection Speed.");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }
        @Override
        protected String doInBackground(Integer... args) {
            // updating UI from Background Thread
                    Intent in = getIntent();
                    songsList = new ArrayList<HashMap<String, String>>();
                    cat_url = in.getStringExtra(KEY_CAT_URL);
                    artist_url = in.getStringExtra(KEY_CAT_ARTIST);

                    XMLParser parser = new XMLParser();
                    String xml = parser.getXmlFromUrl(cat_url); // getting XML from URL
                    Document doc = parser.getDomElement(xml); // getting DOM element

                    NodeList nl = doc.getElementsByTagName(KEY_SONG);
                    // looping through all song nodes <song>
                    for (int i = 0; i < nl.getLength(); i++) {
                        // creating new HashMap
                        HashMap<String, String> map = new HashMap<String, String>();
                        Element e = (Element) nl.item(i);
                        // adding each child node to HashMap key => value
                        map.put(KEY_ID, parser.getValue(e, KEY_ID));
                        map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
                        map.put(KEY_ARTIST, parser.getValue(e, KEY_ARTIST));
                        map.put(KEY_DURATION, parser.getValue(e, KEY_DURATION));
                        map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));
                        map.put(KEY_BIG_URL, parser.getValue(e, KEY_BIG_URL));
                        // adding HashList to ArrayList
                        songsList.add(map);

                    }
                    return null;
                }   

        @Override
        protected void onPostExecute(String args) {
            ActionBar   ab = getSupportActionBar();
                        ab.setTitle(artist_url);

            adapter=new MainGridViewLazyAdapter(MainGridView.this, songsList);   
            grid.setAdapter(adapter);
            pDialog.dismiss();
            }
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T04:25:27.643

~~我想你想从 Urls 加载图像。为此，您可以使用此解决方案：[在 ListView 中延迟加载图像](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview/3068012#3068012)~~

为了控制您的分页使用`onScrollListener`，我想您想看看[Endless 滚动示例](http://benjii.me/2010/08/endless-scrolling-listview-in-android/)。这是一个简单的示例，但您唯一需要添加的是检查您是否已到达 xml 的最后一项。

在您的内部`AsyncTask`（在每次新加载时调用），您只会解析 xml 中的一些数据（对应于您的案例中的 20 个项目）。这是基于您的代码的使用示例：

```
public class MainGridView extends SherlockActivity implements OnScrollListener {

    public static final String KEY_SONG = "song"; 
    public static final String KEY_ID = "id";
    public static final String KEY_TITLE = "title";
    public static final String KEY_ARTIST = "artist";
    public static final String KEY_CAT_ARTIST = "artistcat";
    public static final String KEY_DURATION = "duration";
    public static final String KEY_THUMB_URL = "thumb_url";
    public static final String KEY_BIG_URL = "big_url";
    public static final String KEY_CAT_URL = "cat_url";

    private final static int ITEMS_PPAGE = 20;

    private ProgressDialog mDialog;
    private ArrayList<HashMap<String, String>> mSongsList;

    private static String IMAGE_POSITION;
    private GridView mGridView;
    //MainGridViewLazyAdapter mAdapter;
    private ArrayAdapter<String> mAdapter;
    private String cat_url;
    private String artist_url;

    private int mVisibleThreshold = 5;
    private int mCurrentPage = 0;
    private int mPreviousTotal = 0;
    private boolean mLoading = true;
    private boolean mLastPage = false;

    private String mXml;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        setTheme(SherlockBarUtils.getCurrentTheme(this));
        super.onCreate(savedInstanceState);
        setContentView(R.layout.gridview_main);

        getSupportActionBar().setDisplayHomeAsUpEnabled(true);
        //checkInternetConnection();

        mGridView = (GridView) findViewById(R.id.grid_view);
        mGridView.setOnScrollListener(this);

        mAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1);
        //mAdapter=new MainGridViewLazyAdapter(MainGridView.this);  
        mGridView.setAdapter(mAdapter);

        new DownloadDataAsyncTask().execute();
    }

    @Override
    public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {

        if (mLoading) {
            if (totalItemCount > mPreviousTotal) {

                mLoading = false;
                mPreviousTotal = totalItemCount;
                mCurrentPage++;

                // Find your own condition in order to know when you 
                // have finished displaying all items
                if (mCurrentPage + 1 > 50) {
                    mLastPage = true;
                }
            }
        }
        if (!mLastPage && !mLoading && 
                (totalItemCount - visibleItemCount) <= (firstVisibleItem + mVisibleThreshold)) {
            new AddItemsAsyncTask().execute();
            mLoading = true;
        }
    }

    @Override
    public void onScrollStateChanged(AbsListView view, int scrollState) {

    }

    public class DownloadDataAsyncTask extends AsyncTask<String, String, String> {

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            mDialog = new ProgressDialog(MainGridView.this);
            mDialog.setTitle("Connect to Server");
            mDialog.setMessage("This process can take a few seconds to a few minutes, depending on your Internet Connection Speed.");
            mDialog.setIndeterminate(false);
            mDialog.setCancelable(false);
            mDialog.show();
        }
        @Override
        protected String doInBackground(String... args) {

            // Downloading XML

            /*
            Intent in = getIntent();
            mSongsList = new ArrayList<HashMap<String, String>>();
            cat_url = in.getStringExtra(KEY_CAT_URL);
            artist_url = in.getStringExtra(KEY_CAT_ARTIST);

            XMLParser parser = new XMLParser();
            mXml = parser.getXmlFromUrl(cat_url); // getting XML from URL
            */

            return null;
        }   

        @Override
        protected void onPostExecute(String args) {

            /*
            getSupportActionBar().setTitle(artist_url);
            */
            mDialog.dismiss();
            mLoading = false;
        }
    }

    public class AddItemsAsyncTask extends AsyncTask<Integer, String, String> {

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
        }
        @Override
        protected String doInBackground(Integer... args) {

            MainGridView.this.runOnUiThread(new Runnable() {

                @Override
                public void run() {

                    // Parsing 20 more items and adding them to the adapter
                    for (int i = mCurrentPage * ITEMS_PPAGE; i < (mCurrentPage + 1) * ITEMS_PPAGE; i++) {
                        MainGridView.this.mAdapter.add(String.valueOf(Math.random() * 5000));
                    }
                    MainGridView.this.mAdapter.notifyDataSetChanged();
                }
            });
            return null;
        }

        @Override
        protected void onPostExecute(String args) {

        }
    }
} 
```

为方便起见，我在`GridView`. 我专注于分页系统，所以我没有解析 XML，只是动态添加了一些随机值。

此外，您可以考虑使用相同`addItemsAsyncTask`的方式在每次加载时仅下载 xml 的一部分（20 项），而不是在创建`GridView`.

# api - CakePHP：具有多个级别的 REST API 资源

> ID：12170469
> 
> 赞同：0
> 
> 时间：2012-08-29T03:25:34.417
> 
> 标签：api, cakephp, rest

我正在尝试使用 CakePHP 制作一个 REST API，但我不确定如何处理不止一层的资源。例如，我想制作我的 API，以便当客户端向 /users/1/friends.json 发送 get 请求时，返回该用户朋友的 JSON 表示。解决此问题的首选方法是什么？我应该创建一个 Friendships 控制器并根据需要进行建模和重新路由，还是将所有内容都保留在 users 控制器中？只是想知道这样做的标准方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T07:14:59.643

如果您想公开很多功能，例如：创建/更新/删除用户、获取用户、获取所有用户等，那么您的控制器中有很多方法。

我建议使用不同的控制器：

*   a`UserController`拥有与用户相关的 CRUD 方法，以及获取所有用户的方法。这意味着该控制器中有 5 个方法；
*   a`FriendController`拥有与友谊关系相关的所有方法：获取用户的朋友，但也创建/删除两个用户之间的关系。

我不知道 CakePHP，但我写了一些关于[Symfony2 REST API 的](http://williamdurand.fr/2012/08/02/rest-apis-with-symfony2-the-right-way/)东西，我的用例是一个用户 API。您可以选择如何管理用户之间的友谊关系等想法。

# android - Android相机意图文件到imageview NPE（SGS3）

> ID：12170471
> 
> 赞同：0
> 
> 时间：2012-08-29T03:25:43.033
> 
> 标签：android, nullpointerexception, imageview, android-camera

关于同一主题有很多问题，但没有一个为我提供答案。我已经尝试了很多解决方案，但到目前为止没有一个对我有用。

我在片段中调用相机意图并将uri插入到我希望存储图片的新创建的文件中，然后在activityresult上我将uri传递给一个我想在imageview中显示它的新活动和然后继续上传。

```
Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
File mImageFile = new File(Environment.getExternalStorageDirectory().getPath()+"/DCIM/" + "Camera/" + File.separator+System.currentTimeMillis()+".jpg");
imageUri = Uri.fromFile(mImageFile);
Log.d("camera", "imageUri: " + imageUri.toString());
intent.putExtra(MediaStore.EXTRA_OUTPUT,imageUri);
startActivityForResult(intent, CAMERACODE);

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data){
super.onActivityResult(requestCode, resultCode, data);
switch(requestCode){
case CAMERACODE:{
if (resultCode == Activity.RESULT_OK) {
Intent intent = new Intent(getActivity(), SubmitActivity.class);
intent.putExtra("imageuri", imageUri.toString());
getActivity().startActivity(intent); 
```

在提交活动中：

```
Bundle extras = getIntent().getExtras();
imageUri = extras.getString("imageuri"); <-- imageUri has the correct path, and the actual file is created and the photo is there. The photo is not showing up on gallery for some reason though, only when browsing the folders. What is the reason for this?
iv = (ImageView) findViewById(R.id.selectedpicture);
iv.setImageURI(Uri.parse(imageUri)); <-- this line causes a NullPointerException. 
```

谁能解释 setImageURI 失败的原因？有什么替代方法吗？我正在使用三星 Galaxy S3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T03:30:54.560

我相信`iv`是 null 并且没有问题`imageuri`。检查你是否已经完成`setContentView`并检查布局是否有`selectedpicture`imageView。

编辑：

```
The photo is not showing up on gallery for some reason though 
```

Gallery 使用[MediaStore](http://developer.android.com/reference/android/provider/MediaStore.html)获取 sdcard 上的所有照片。但是当你拍照时，`MediaStore`数据库不会被更新。为了让图片出现在画廊中，`MediaScanning`应该运行。检查这个[帖子](https://stackoverflow.com/questions/5107823/force-scan-files-after-taking-photo)

# mongodb - 当 sort 字段不是 shard key 的一部分时，mongos 是否会对所有 mongod 返回的数据进行排序？

> ID：12170472
> 
> 赞同：2
> 
> 时间：2012-08-29T03:26:17.383
> 
> 标签：mongodb, sharding

当排序字段不是分片键的一部分时，mongos 会将查询发送到所有 mongod 实例。在所有 mongod 实例返回数据后，mongos 会将它们合并。

此合并操作是否包括排序？

我们知道 sort 字段不是 shard key 的一部分，所以返回的数据应该是无序的，mongos 必须进行排序。如果是这样，当返回的数据非常大时，mongos会占用大量内存。

我的理解正确吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T10:02:03.323

这不是分片键中需要的排序字段，而是您用来选择数据的标准。也就是说，如果 mongos 无法从您用作查询的一部分的字段中确定数据的具体位置，那么它将发送到所有分片。这与任何其他非排序查询相同。对非 shardkey 字段进行排序不会影响 mongos 正确路由查询的能力。

此处的文档中提到了这一点：

[https://docs.mongodb.org/v2.4/core/sharded-cluster-query-router/#how-mongos-handles-query-modifiers](https://docs.mongodb.org/v2.4/core/sharded-cluster-query-router/#how-mongos-handles-query-modifiers)

分片将接收来自 mongos 的查询，它们将对结果子集进行排序，并将它们发送回 mongos。然后，mongos 必须在返回结果之前对返回的结果进行合并排序。这不像完整排序那样密集，因为结果最初是按分片排序的，但仍然需要资源。消耗的内存量将与各个分片返回的结果集的大小有关。

**编辑（2016 年 5 月）：**上述内容在 2012 年最初回答时是正确的，但是（如下面的评论中指出的）行为在 2014 年随着版本 2.6 发生了变化。[结果现在被发送](https://docs.mongodb.org/v3.0/core/sharded-cluster-query-router/#how-mongos-handles-query-modifiers)到主分片，以便分片数据库成为在返回给 mongos（然后返回给用户）之前进行合并排序。这很有意义，因为`mongos`实例不太可能拥有执行大型排序的资源，但这确实意味着您应该密切注意将频繁排序的任何数据库的主要位置，因为它会看到更高的负载因此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-12T15:29:08.377

在 3.2 版本中，如果在 fetch 中没有使用主 shard（换句话说，主 shard 不包含 find 命令中的任何文档），则可以使用辅助 shard 代替。

# eclipse - Egit Eclipse最佳实践(play framework 2,.0)项目

> ID：12170475
> 
> 赞同：-1
> 
> 时间：2012-08-29T03:26:34.610
> 
> 标签：eclipse, git, playframework-2.0, egit

我对一般的 git、egit 和 github 非常陌生。

问题：

假设我在 c:/username/workspace 名称“Test”中有一个 Eclipse 项目。所以我对它进行了版本化并将其推送到 github。现在我可以在 github 的“Test”目录下看到我在 github 中的所有文件。例如 /src。“测试”目录没有版本控制。只有存储库的名称是“Test”。我的下一步是删除我的本地文件并再次获取我的项目（用于测试）。之后，我不得不在 egit 视图上再次导入我的项目（但我必须使用新项目向导）。不幸的是，还检测到了错误的 scala 版本。（是一个游戏框架项目）。所以我在项目视图上有一个大大的感叹号。

我的问题：

1.  将项目推送到 github 以便每个人都可以参与的最佳实践是什么？项目文件夹下的所有内容？显然，一些信息在这个过程中丢失了。

2.  每次有人克隆存储库时，如何防止生成新项目？

3.  在工作区中使用 git 的最佳实践怎么样？Eclipse 警告不要将项目放在工作区中。

我来自颠覆背景：/。也许是一个普遍的误解。

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T03:55:47.213

在 Eclipse 环境中从 SVN 切换到 Git 可能需要一些时间来适应。（我自己还是习惯了。）请记住 .git 文件夹和 Git 和 SVN 的 .svn 文件夹的角色之间的区别。工作副本中的每个文件夹级别都有一个 .svn 文件夹。传统的 Eclipse 工作区根目录中没有 .svn 文件夹。“源代码控制的东西”是工作区的子目录，而不是工作区本身。这通常很好，因为工作区包含通常不希望共享的桌面特定设置（大部分在 .metadata 目录中）。

使用 Git，只有一个 .git 文件夹包含所有内容。第一个冲动是做一个

```
 git init 
```

在工作区级别。这将使子文件夹（Eclipse 项目）有资格进行源代码控制。但是等等，.metadata 也是如此。当然你可以忽略它。但是您可能不得不忽略许多您不想进行源代码控制的其他文件夹（项目**）**。当然，应该包括 .gitignore。但其他人将有不同的文件要忽略。

事实证明，如果您将 .git 文件夹及其同级源代码控制文件夹（Eclipse 项目）放在工作区根目录之外的其他位置，那么在 Eclipse 中使用 Git 会更容易。您在 Eclipse 中的视图不会改变。你仍然可以看到你所有的项目，包括 Git 控制的和 SVN 控制的以及根本没有共享的项目。但是在文件系统的下面，Git 控制的文件夹将位于其他地方。这是 EGit 更喜欢的。

在我的桌面上，我`workspaces`的大部分 Eclipse 工作区都有一个目录。现在我使用 EGit，我还有一个`egit`目录，用于保存本地 EGit 存储库。使用 EGit 共享的 Eclipse 工作区引用`egit`. 从 GitHub 推送和拉取的正是这些本地 Git 存储库。

对不起，长度。我有点得意忘形了。

# ruby-on-rails-3.2 - 在保存时防止 ActiveRecord 竞争

> ID：12170478
> 
> 赞同：0
> 
> 时间：2012-08-29T03:27:04.783
> 
> 标签：ruby-on-rails-3.2, race-condition

短的：

在 Ruby on Rails 中保存 ActiveRecord 对象时如何防止出现竞争条件？或者如果检测到比赛，至少有办法得到错误？

长：

假设我们有这个模型

```
class Game < ActiveRecord::Base
  belongs_to :current_user, :class_name => "User", 
                  :foreign_key => "current_user_id"
  belongs_to :other_user, :class_name => "User", 
                  :foreign_key => "other_user_id
end 
```

在控制器中创建游戏时，我想找到：other_user_id 为 nil 的第一个游戏，将其设置为尝试创建游戏的用户，然后保存更新的游戏。如果没有找到这样的游戏，请使用询问用户创建一个新游戏作为 current_user。

我在 ActiveRecord 的文档中找不到任何内容，显示如何防止在保存更新的游戏时出现竞争，即用户 b 可以在用户 a 找到游戏之后但在他们之前找到空游戏并保存到数据库中'已保存到数据库。如果有的话，我读过的关于唯一性验证的内容似乎我需要在数据库级别解决这个问题。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T05:22:26.093

当然，我没有完全阅读 Rails 指南。这个[http://guides.rubyonrails.org/active_record_querying.html#locking-records-for-update有一个部分](http://guides.rubyonrails.org/active_record_querying.html#locking-records-for-update)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T07:14:07.567

您本质上想要乐观锁定。这可以通过在游戏中使用 lock_version 列来启用。因此，在迁移中添加以下内容：

```
 class AddLockedVersionToGames < ActiveRecord::Migration
   def changes
     add_column :games, :lock_version, :integer, :default => 0
   end
 end 
```

在游戏模型中：

```
 def self.add_user_to_game(current_user)
    game = Game.find_by_other_user(nil)
    if game
      game.other_user = current_user
    else
      game = Game.new(current_user: current_user)
    end
    game.save
  rescue ActiveRecord::StaleObjectError
    game = Game.new(current_user: current_user)
    game.save
  end 
```

# php - AJAX RSS JS responseXML 返回 null

> ID：12170485
> 
> 赞同：0
> 
> 时间：2012-08-29T03:28:17.180
> 
> 标签：php, javascript, xml, ajax, rss

```
{ 
 xmlHttp=GetXmlHttpObject();
 if (xmlHttp==null)
  {
  alert ("Browser does not support HTTP Request");
  return;
  } 
 var url="http://www.galatasaray.org/_ajax/dinamik_fikstur.php?no=6";
 xmlHttp.onreadystatechange=stateChanged;
 xmlHttp.open('GET',url,true);
 xmlHttp.setRequestHeader('Content-type', "text/xml");
 xmlHttp.send(null);
 }
function stateChanged() 
{ 
if (xmlHttp.readyState==4 || xmlHttp.readyState=="complete")
{   
 xmlDoc=xmlHttp.responseXML;
 alert(xmlHttp.responseXML);
 document.getElementById("myDiv").innerHTML=xmlHttp.responseXML;
 document.getElementById("takim2").innerHTML=
 xmlDoc.getElementsByTagName("owner")[0].childNodes[0].nodeValue;
 document.getElementById("takim1").innerHTML=
 xmlDoc.getElementsByTagName("guest")[0].childNodes[0].nodeValue;
 }
} 
function GetXmlHttpObject()
 { 
 var objXMLHttp=null;
 if (window.XMLHttpRequest)
  {
  objXMLHttp=new XMLHttpRequest();
  }
 else if (window.ActiveXObject)
  {
  objXMLHttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
 return objXMLHttp;
 } 
```

**我是 ajax 编程的新手，我有一个问题。responseXML 返回空值。我该如何解决这个问题？我尝试了 responseText 并返回空。我搜索了很多资源但我找不到解决方案**

# apache - 使 index.cgi 重定向到 Apache 网络服务器文档根目录

> ID：12170486
> 
> 赞同：0
> 
> 时间：2012-08-29T03:28:35.047
> 
> 标签：apache, mod-rewrite, cgi

我正在尝试将 CGI 文件公开为我的文档根目录和 Web 服务器。我不想暴露服务器正在运行 CGI 脚本的事实。

如何将 URL 映射`http://host/index.cgi/`回`http://host/`Apache2 中？我猜它涉及 mod-rewrite，但我还没有完成所有文档的探索。

以下配置有效，但我猜有一个更完整的解决方案：

```
RewriteEngine ON
Redirect /index.cgi/    / 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T03:46:22.637

> 但我猜有一个更完整的解决方案：

如果您想重定向对`/index.cgi/`to的请求`/`，那么真的不需要其他任何东西。请注意，这`RewriteEngine On`是 mod_rewrite 的一部分，该`Redirect`指令是 mod_alias 的一部分。您不需要重写引擎来进行重定向。另请注意，这是一个 302 重定向，它不是永久性的。您可能希望在其中包含`301`or`permanent`关键字：

```
Redirect 301 /index.cgi/ / 
```

此外，该`Redirect`指令将两个路径节点链接在一起，因此附加到源的任何其他路径都会附加到目标。因此，鉴于上述情况，如果你去：

```
http://host/index.cgi/some/more/path.txt 
```

浏览器将被重定向到：

```
http://host/some/more/path.txt 
```

如果您不想要这个，您可以将 a 更改`Redirect`为 a`RedirectMatch`并使用正则表达式：

```
RedirectMatch 301 ^/index\.cgi/$ / 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T01:29:59.977

使用 mod-rewrite 的正确解决方案。

*   更新 CGI 脚本以将 URL 重写为所需路径。这意味着 URL 像`index.cgi/path`更改为`/app1/path`或在我的情况下，只是`/path`. 对于我的脚本，有一个名为的选项`virutal-root`进行了全局更改。

*   然后使用以下指令更新 Apache。它的作用是在内部重写所有 URL 以包含 CGI 脚本，但忽略转到实际脚本的 URL。

    ```
    RewriteEngine ON
    RewriteCond %{REQUEST_URI}    !^/index.cgi
    RewriteRule ^(.*)$            /index.cgi/$1   [PT] 
    ```

*   一个关键点是，如果 CGI 脚本引用服务器上的任何静态文件，则它们需要放置在同样超出重写规则的路径中。因此，例如，在 RewriteRule 之前排除另一个路径：

    ```
    RewriteCond %{REQUST_URI}     !^/_static 
    ```

# c++ - 如何获取我的环境的当前语言环境？

> ID：12170488
> 
> 赞同：33
> 
> 时间：2012-08-29T03:29:09.897
> 
> 标签：c++, c, locale

曾在 Linux 中尝试过以下代码，但总是在不同的`LANG`设置下返回“C”。

```
#include <iostream>
#include <locale.h>
#include <locale>
using namespace std;

int main()
{
    cout<<"locale 1: "<<setlocale(LC_ALL, NULL)<<endl;
    cout<<"locale 2: "<<setlocale(LC_CTYPE, NULL)<<endl;

    locale l;
    cout<<"locale 3: "<<l.name()<<endl;
}

$ ./a.out
locale 1: C
locale 2: C
locale 3: C
$
$ export LANG=zh_CN.UTF-8
$ ./a.out
locale 1: C
locale 2: C
locale 3: C 
```

我应该怎么做才能在 Linux（如 Ubuntu）中获得当前的语言环境设置？

另一个问题是，在 Windows 中获取语言环境的方法是否相同？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-29T03:37:46.287

来自`man 3 setlocale`（新格言：“如有疑问，请阅读整个手册页。”）：

> 如果 locale 是`""`，则需要修改的 locale 的每一部分都根据环境变量进行设置。

所以，我们可以通过在程序开头调用来读取环境变量`setlocale`，如下：

```
#include <iostream>
#include <locale.h>
using namespace std;

int main()
{
    setlocale(LC_ALL, "");
    cout << "LC_ALL: " << setlocale(LC_ALL, NULL) << endl;
    cout << "LC_CTYPE: " << setlocale(LC_CTYPE, NULL) << endl;
    return 0;
} 
```

我的系统不支持`zh_CN`语言环境，如下输出所示：

```
$ ./a.out
LC_ALL：en_US.utf8
LC_CTYPE：en_US.utf8
$ 出口 LANG=zh_CN.UTF-8
$ ./a.out
LC_ALL：C
LC_CTYPE：C

```

**Windows：**我对 Windows 语言环境一无所知。我建议从[MSDN 搜索](http://social.msdn.microsoft.com/Search/en-US?query=locale&ac=8)开始，如果您仍有疑问，请打开一个*单独的 Stack Overflow 问题。*

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-08-29T06:22:42.490

刚刚想通了如何通过C++获取locale，只需使用一个空字符串“”来构造std::locale，它的作用和setlocale(LC_ALL, "")是一样的。

```
locale l("");
cout<<"Locale by C++: "<<l.name()<<endl; 
```

此[链接](http://stdcxx.apache.org/doc/stdlibug/24-3.html)描述了 C 语言环境和 C++ 语言环境之间的细节差异。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-12-17T10:25:17.370

对于 Windows，请使用以下代码：

```
LCID lcid = GetThreadLocale();
wchar_t name[LOCALE_NAME_MAX_LENGTH];
if (LCIDToLocaleName(lcid, name, LOCALE_NAME_MAX_LENGTH, 0) == 0)
    error(GetLastError());
std::wcout << L"Locale name = " << name << std::endl; 
```

这将打印类似“en-US”的内容。

要清除子语言信息，请使用以下命令：

```
wchar_t parentLocateName[LOCALE_NAME_MAX_LENGTH];
if (GetLocaleInfoEx(name, LOCALE_SPARENT, parentLocateName, LOCALE_NAME_MAX_LENGTH) == 0)
    error(GetLastError());
std::wcout << L"parentLocateName = " << parentLocateName << std::endl; 
```

这只会给你“en”。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-07-12T20:13:11.617

一个很好的替代 std::locale 的替代方法是 boost::locale，它能够返回更可靠的信息 - 请参阅[http://www.boost.org/doc/libs/1_52_0/libs/locale/doc/html/ locale_information.html](http://www.boost.org/doc/libs/1_52_0/libs/locale/doc/html/locale_information.html)

boost::locale::info 具有以下成员函数：

```
std::string name() -- the full name of the locale, for example en_US.UTF-8
std::string language() -- the ISO-639 language code of the current locale, for example "en".
std::string country() -- the ISO-3199 country code of the current locale, for example "US".
std::string variant() -- the variant of current locale, for example "euro".
std::string encoding() -- the encoding used for char based strings, for example "UTF-8"
bool utf8() -- a fast way to check whether the encoding is UTF-8. 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-21T09:09:59.807

的[默认构造函数](https://en.cppreference.com/w/cpp/locale/locale/locale)创建全局 C++ 语言环境的`std::locale`副本。

因此，要获取当前语言环境的名称：

```
std::cout << std::locale().name() << '\n'; 
```

# css - 如何让 div 的高度占据所有空间？

> ID：12170494
> 
> 赞同：3
> 
> 时间：2012-08-29T03:29:40.127
> 
> 标签：css, navigation, twitter-bootstrap, uinavigationbar

这是我的css规则和标记：

```
<div style = "height:100%;">
<div style = "width:220px; margin-left: 200px;font-size:16px; height:auto;">
    <div class='navbar-inner'>
        <div class='container'>
        <ul class="nav nav-list">
            <div>   
            <li <?php if($page == 'upload_track'){ echo "class = \"active\""; }?>><a href = "#">Upload a new Track</a></li>
            <li><a href = "#">View all blog post</a></li>
            <li><a href = "#">View all tracks uploaded</a></li>
        </div>
        </ul>
    </div>
    </div>
</div>
<div style = "width:220px; margin-left: 200px;font-size:16px; height:auto;"> 
```

到目前为止，我正在使它们成为内联样式，以便我可以轻松更改它们。因为切换文本编辑器对我来说有点麻烦。

我如何让那个 div 占据所有可用的高度？就像页面的最底部一样。截至目前，它看起来像这样 ![在此处输入图像描述](../Images/caa9ff0d8aa092b1991ee7deb4dca928.png)

我想看到的是黑色 div 占据了页面中所有可用的高度

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T03:43:58.600

是的，它可以做到。查看[此示例 JSFiddle](http://jsfiddle.net/mKPcE/)。

基本上我将您的 HTML 更改为：

```
<div id="navbar">
    <div class='navbar-inner'>
        <div class='container'>
            <ul class="nav nav-list">
                <div>   
                    <li><a href = "#">Upload a new Track</a></li>
                    <li><a href = "#">View all blog post</a></li>
                    <li><a href = "#">View all tracks uploaded</a></li>
                </div>
            </ul>
        </div>
    </div>
</div> 
```

基本上我所做的只是删除最外层的 div（上面只有 div 的`style="height: 100%"`那个）并给下一个 div 一个 id。

CSS如下：

```
html, body { height: 100%; }

#navbar { 
    /* this was moved from being an inline style in the div: */
    width:220px; margin-left: 200px;font-size:16px;
    height: 100%;
}​ 
```

基本上，为了让导航条使用 100% 的高度，您需要确保 html 和 body 实际上*占据*了可用高度的 100%。（即100% on`#navbar`是父元素高度的100%；如果父元素不是浏览器的高度，则不起作用。）​</p>

# android - 解析数据时出错 org.json.JSONException：值 一直在尝试这些代码，我想发送一封电子邮件，它将自动生成密码，然后随机密码将在我的数据库列中更新，即 encrypted_pa ssword。 我真的不知道我的代码有什么问题。我是这个 android 应 问问题 问问题 2012-08-29T03:30:14.533 9996 次 This question shows research effort; it is useful and clear 3 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 一直在尝试这些代码，我想发送一封电子邮件，它将自动生成密码，然后随机密码将在我的数据库列中更新，即 encrypted_pa ssword。 我真的不知道我的代码有什么问题。我是这个 android 应用程序的新手，也使用 php.ini。我确实看到了一些与我有关的其他问题，但是，我仍然无法解决它。谁能帮帮我吗？对于我最后一年的项目，我真的需要这方面的帮助。 另一件事也是在发送带有随机生成密码的电子邮件后，随机生成的密码无法更新到我的数据库列中。 这是我的错误： 08-29 10:44:10.976: E/JSON Parser(1594): Error parsing data org.json.JSONException: Value
{ @Override protected void onPreExecute() { super.onPreExecute(); pDialog = new ProgressDialog(ForgetPasswordActivity.this); // pDialog.setMessage("Sending Email.."); pDialog.setIndeterminate(false); pDialog.setCancelable(true); // pDialog.show(); } protected String doInBackground(String... args) { runOnUiThread(new Runnable() { public void run() { // SENDING EMAIL METHOD HERE String sendemail = textforgetEmail.getText().toString(); // Building Parameters List <namevaluepair>params = new ArrayList<namevaluepair>(); params.add(new BasicNameValuePair("email", sendemail)); // getting JSON Object // Note that forgotPassword URL accepts POST method JSONObject json = jsonParser.makeHttpRequest( url_email, "POST", params); // check log cat for response //Log.d("Sending email Response", json.toString()); // check for success tag try { int success = json.getInt(TAG_SUCCESS); if (success == 1) { // successfully email sent Intent intent = new Intent(getApplicationContext(), ForgetPasswordConfirmActivity.class); startActivity(intent); finish(); } else { // failed to send email } } catch (JSONException e) { e.printStackTrace(); } } }); return null; } protected void onPostExecute(String file_url) { // dismiss the dialog once done pDialog.dismiss(); } } } 和我的 php 文件： $i; $i++) { $str .= $seeds{mt_rand(0, $seeds_count - 1)}; } return $str; } // check for required fields if (isset($_POST['email'])) { $email = $_POST['email']; $to = $email; $subject = 'This is an email.'; $body = 'Hi,'."\n\n".'This is your new password: '."$random".'test'; $headers = 'From: noreply@pivestigator.netne.net'; if (mail($to, $subject, $body, $headers)) { // include db connect class require_once __DIR__ . '/DB_Connect.php'; // connecting to db $db = new DB_CONNECT(); // check if row inserted or not if ($result) { // successfully inserted into database $response["success"] = 1; $response["message"] = "Email successfully sent."; // echoing JSON response echo json_encode($response); } } else { // required field is missing $response["success"] = 0; $response["message"] = "Required field(s) is missing"; // echoing JSON response echo json_encode($response); } } ?> 正如错误消息所说： [..snip..] json.JSONException: Value

> ID：12170496
> 
> 赞同：3
> 
> 时间：
> 
> 标签：android, json, parsing

一直在尝试这些代码，我想发送一封电子邮件，它将自动生成密码，然后随机密码将在我的数据库列中更新，即 encrypted_pa​​ssword。

我真的不知道我的代码有什么问题。我是这个 android 应用程序的新手，也使用 php.ini。我确实看到了一些与我有关的其他问题，但是，我仍然无法解决它。谁能帮帮我吗？对于我最后一年的项目，我真的需要这方面的帮助。

另一件事也是在发送带有随机生成密码的电子邮件后，随机生成的密码无法更新到我的数据库列中。

这是我的错误：

```
08-29 10:44:10.976: E/JSON Parser(1594): Error parsing data org.json.JSONException: Value <br of type java.lang.String cannot be converted to JSONObject
08-29 10:44:10.987: W/dalvikvm(1594): threadid=10: thread exiting with uncaught exception (group=0x40014760)
08-29 10:44:11.006: E/AndroidRuntime(1594): FATAL EXCEPTION: AsyncTask #1
08-29 10:44:11.006: E/AndroidRuntime(1594): java.lang.RuntimeException: An error occured while executing doInBackground()
08-29 10:44:11.006: E/AndroidRuntime(1594):     at android.os.AsyncTask$3.done(AsyncTask.java:266)
08-29 10:44:11.006: E/AndroidRuntime(1594):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
08-29 10:44:11.006: E/AndroidRuntime(1594):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
08-29 10:44:11.006: E/AndroidRuntime(1594):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
08-29 10:44:11.006: E/AndroidRuntime(1594):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
08-29 10:44:11.006: E/AndroidRuntime(1594):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1081)
08-29 10:44:11.006: E/AndroidRuntime(1594):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:574)
08-29 10:44:11.006: E/AndroidRuntime(1594):     at java.lang.Thread.run(Thread.java:1020)
08-29 10:44:11.006: E/AndroidRuntime(1594): Caused by: java.lang.NullPointerException
08-29 10:44:11.006: E/AndroidRuntime(1594):     at com.pivestigator.login.ForgetPasswordActivity$SendEmail.doInBackground(ForgetPasswordActivity.java:93)
08-29 10:44:11.006: E/AndroidRuntime(1594):     at com.pivestigator.login.ForgetPasswordActivity$SendEmail.doInBackground(ForgetPasswordActivity.java:1)
08-29 10:44:11.006: E/AndroidRuntime(1594):     at android.os.AsyncTask$2.call(AsyncTask.java:252)
08-29 10:44:11.006: E/AndroidRuntime(1594):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305) 
```

我的安卓代码：

```
 public class ForgetPasswordActivity extends Activity {

EditText textforgetEmail;
TextView email_error;

 // Progress Dialog
private ProgressDialog pDialog;

 private static String url_email = "...";

// JSON Node names
        private static final String TAG_SUCCESS = "success";

    JSONParser jsonParser = new JSONParser();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.forget_password);

    Button buttonSubmit = (Button) findViewById(R.id.buttonSubmit);
    textforgetEmail = (EditText) findViewById(R.id.forgetEmail);
    email_error = (TextView) findViewById(R.id.email_error);

    // Link to Login Screen
    buttonSubmit.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                // creating new product in background thread
                new SendEmail().execute();
            }
    });

}

class SendEmail extends AsyncTask<String, String, String> {
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(ForgetPasswordActivity.this);
       // pDialog.setMessage("Sending Email..");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(true);
       // pDialog.show();
    }

    protected String doInBackground(String... args) {
        runOnUiThread(new Runnable() {
            public void run() {
                // SENDING EMAIL METHOD HERE
                String sendemail = textforgetEmail.getText().toString();

                // Building Parameters
                List<NameValuePair> params = new ArrayList<NameValuePair>();
                params.add(new BasicNameValuePair("email", sendemail));

                // getting JSON Object
                // Note that forgotPassword URL accepts POST method
                JSONObject json = jsonParser.makeHttpRequest(
                        url_email, "POST", params);

                // check log cat for response
                 //Log.d("Sending email Response", json.toString());

                // check for success tag
                try {
                    int success = json.getInt(TAG_SUCCESS);

                    if (success == 1) {
                        // successfully email sent
                        Intent intent = new Intent(getApplicationContext(),
                                ForgetPasswordConfirmActivity.class);
                        startActivity(intent);
                        finish();
                    } else {
                        // failed to send email
                    }
                } catch (JSONException e) {
                    e.printStackTrace();
                }
            }
        });
        return null;
    }

    protected void onPostExecute(String file_url) {
        // dismiss the dialog once done
        pDialog.dismiss();
    }
}

 } 
```

和我的 php 文件：

```
<?php

$response = array();

$random = str_rand();

 function str_rand($length = 8, $seeds = 'alphanum')
{
// Possible seeds
$seedings['alpha'] = 'abcdefghijklmnopqrstuvwqyz';
$seedings['numeric'] = '0123456789';
$seedings['alphanum'] = 'abcdefghijklmnopqrstuvwqyz0123456789';
$seedings['hexidec'] = '0123456789abcdef';

// Choose seed
if (isset($seedings[$seeds]))
{
    $seeds = $seedings[$seeds];
}

// Seed generator
list($usec, $sec) = explode(' ', microtime());
$seed = (float) $sec + ((float) $usec * 100000);
mt_srand($seed);

// Generate
$str = '';
$seeds_count = strlen($seeds);

for ($i = 0; $length > $i; $i++)
{
    $str .= $seeds{mt_rand(0, $seeds_count - 1)};
}

return $str;
}

// check for required fields
if (isset($_POST['email'])) {

$email = $_POST['email'];

$to = $email;
$subject = 'This is an email.';
$body = 'Hi,'."\n\n".'This is your new password: '."$random".'test';
$headers = 'From: noreply@pivestigator.netne.net';

if (mail($to, $subject, $body, $headers)) {
// include db connect class
require_once __DIR__ . '/DB_Connect.php';

// connecting to db
$db = new DB_CONNECT();

// check if row inserted or not
if ($result) {
    // successfully inserted into database
    $response["success"] = 1;
    $response["message"] = "Email successfully sent.";

    // echoing JSON response
    echo json_encode($response);
} 

}
else {
// required field is missing
$response["success"] = 0;
$response["message"] = "Required field(s) is missing";

// echoing JSON response
echo json_encode($response);
}
 }
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T03:43:40.940

正如错误消息所说：

```
[..snip..] json.JSONException: Value <br of type java.lang.String cannot be converted to JSONObject
                                     ^^^ 
```

您尝试解析的 JSON 字符串无效 - 看起来它有一些原始 HTML，这意味着它要么生成错误，要么 PHP 正在插入错误/警告并破坏字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-26T11:04:02.227

我遇到了完全相同的问题——字符串在我的实际 JSON 对象之前生成了一个这样的表。我将此表放入一个 HTML 文件并显示它 - 原来它是 PHP 函数的调用堆栈：![在此处输入图像描述](../Images/bd28e8c2e4d7f6276f361658a63b9a7a.png)

我通过在 php 文件中添加以下行来修复不推荐使用的警告：

```
error_reporting(E_ALL ^ E_DEPRECATED); 
```

这修复了回复字符串，我现在能够成功解析它。</namevaluepair></namevaluepair>

# ruby-on-rails - Elasticsearch：突出显示附件中的命中

> ID：12170497
> 
> 赞同：7
> 
> 时间：2012-08-29T03:30:22.977
> 
> 标签：ruby-on-rails, syntax-highlighting, elasticsearch, tire

我无法在 Rails 应用程序中使用 Elasticsearch（和轮胎）突出显示。我可以成功索引 PDF 附件并查询它们，但我无法使突出显示工作。

对 ES 不太熟悉，所以不知道在哪里寻找故障排除。将从映射和 curl 查询开始，但请随时询问更多信息。

```
class Article < ActiveRecord::Base
  include Tire::Model::Search
  include Tire::Model::Callbacks

  attr_accessible :title, :content, :published_on, :filename 

  mapping do
    indexes :id, :type =>'integer'
    indexes :title
    indexes :content
    indexes :published_on, :type => 'date'
    indexes :attachment, :type => 'attachment',
                            :fields => {
                            :name       => { :store => 'yes' },
                            :content    => { :store => 'yes' },
                            :title      => { :store => 'yes' },
                            :file       => { :term_vector => 'with_positions_offsets', :store => 'yes' },
                            :date       => { :store => 'yes' }
                          }
  end

  def to_indexed_json
    to_json(:methods => [:attachment])
  end

  def attachment
    if filename.present?
      path_to_pdf = "/Volumes/Calvin/sample_pdfs/#{filename}.pdf"
      Base64.encode64(open(path_to_pdf) { |pdf| pdf.read })
    else
      Base64.encode64("missing")
    end
  end
end 
```

映射（通过 Curl）：

```
$ curl -XGET 'http://localhost:9200/_mapping?pretty=true'
{
  "articles" : {
    "article" : {
      "properties" : {
        "attachment" : {
          "type" : "attachment",
          "path" : "full",
          "fields" : {
            "attachment" : {
              "type" : "string"
            },
            "title" : {
              "type" : "string",
              "store" : "yes"
            },
            "name" : {
              "type" : "string",
              "store" : "yes"
            },
            "date" : {
              "type" : "date",
              "ignore_malformed" : false,
              "store" : "yes",
              "format" : "dateOptionalTime"
            },
            "content_type" : {
              "type" : "string"
            }
          }
        },
        "content" : {
          "type" : "string"
        },
        "created_at" : {
          "type" : "date",
          "ignore_malformed" : false,
          "format" : "dateOptionalTime"
        },
        "filename" : {
          "type" : "string"
        },
        "id" : {
          "type" : "integer",
          "ignore_malformed" : false
        },
        "published_on" : {
          "type" : "date",
          "ignore_malformed" : false,
          "format" : "dateOptionalTime"
        },
        "title" : {
          "type" : "string"
        },
        "updated_at" : {
          "type" : "date",
          "ignore_malformed" : false,
          "format" : "dateOptionalTime"
        }
      }
    }
  }
}% 
```

在 125 页索引 PDF 中带有“命中”的查询：

```
$ curl "localhost:9200/_search?pretty=true" -d '{
quote>   "fields" : ["title"],
quote>   "query" : {
quote>     "query_string" : {
quote>       "query" : "xerox"
quote>     }
quote>   },
quote>   "highlight" : {
quote>     "fields" : {
quote>       "attachment" : {}
quote>     }
quote>   }
quote> }'

{
  "took" : 1077,
  "timed_out" : false,
  "_shards" : {
    "total" : 5,
    "successful" : 5,
    "failed" : 0
  },
  "hits" : {
    "total" : 1,
    "max_score" : 0.036417194,
    "hits" : [ {
      "_index" : "articles",
      "_type" : "article",
      "_id" : "13",
      "_score" : 0.036417194,
      "fields" : {
        "title" : "F-E12"
      }
    } ]
  }
}% 
```

我期待这样的部分：

```
"highlight" : {
        "attachment" : [ "\nLast Year <em>Xerox</em> moved their facilities" ]
  } 
```

谢谢你的帮助！

**Edit2：**调整查询（更改`attachment`为`attachment.file`）无济于事：

```
$ curl "localhost:9200/_search?pretty=true" -d '{
  "fields" : ["title","attachment"],
  "query" : {"query_string" : {"query" : "xerox"}},
  "highlight" : {"fields" : {"attachment.file" : {}}}
}'

{
  "took" : 221,
  "timed_out" : false,
  "_shards" : {
    "total" : 5,
    "successful" : 5,
    "failed" : 0
  },
  "hits" : {
    "total" : 1,
    "max_score" : 0.036417194,
    "hits" : [ {
      "_index" : "articles",
      "_type" : "article",
      "_id" : "13",
      "_score" : 0.036417194,
      "fields" : {
        "title" : "F-E12",
        "attachment" : "JVBERi0xLjYNJeLjz9MNCjk4NSAwIG9iag08PC9MaW5lYXJpemVkIDEvTCA...\n"
      }
    } ]
  }
} 
```

Edit3（删除“字段”）：

```
$ curl "localhost:9200/_search?pretty=true" -d '{
>   "query" : {"query_string" : {"query" : "xerox"}},
>   "highlight" : {"fields" : {"attachment" : {}}}
> }'

{
  "took" : 1078,
  "timed_out" : false,
  "_shards" : {
    "total" : 5,
    "successful" : 5,
    "failed" : 0
  },
  "hits" : {
    "total" : 1,
    "max_score" : 0.036417194,
    "hits" : [ {
      "_index" : "articles",
      "_type" : "article",
      "_id" : "13",
      "_score" : 0.036417194, "_source" : {"content":"Real report","created_at":"2012-08-28T22:44:08Z","filename":"F-E12","id":13,"published_on":"2007-12-28","title":"F-E12","updated_at":"2012-08-28T22:44:08Z","attachment":"JVBERi0xLjYNJeLjz9MNCjk4NSAwIG9iag08PC9MaW5lYXJpemVkID...\n"
      }
    } ]
  }
} 
```

Edit4（来自 Attachment Type in Action 教程的映射）：

```
$ curl -XGET 'http://localhost:9200/test/_mapping?pretty=true'
{
  "test" : {
    "attachment" : {
      "properties" : {
        "file" : {
          "type" : "attachment",
          "path" : "full",
          "fields" : {
            "file" : {                #<== This appears to be missing 
              "type" : "string",      #<== from my Articles mapping
              "store" : "yes",        #<==
              "term_vector" : "with_positions_offsets"  #<==
            },
            "author" : {
              "type" : "string"
            },
            "title" : {
              "type" : "string",
              "store" : "yes"
            },
            "name" : {
              "type" : "string"
            },
            "date" : {
              "type" : "date",
              "ignore_malformed" : false,
              "format" : "dateOptionalTime"
            },
            "keywords" : {
              "type" : "string"
            },
            "content_type" : {
              "type" : "string"
            }
          }
        }
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T23:43:22.497

我想到了！最后...

问题在于我在 Article 类中的映射语法。需要将“:file”重命名为“:attachment”。

```
 tire.mapping do
    indexes :id, :type =>'integer'
    indexes :title
    indexes :content
    indexes :published_on, :type => 'date'
    indexes :attachment, :type => 'attachment', #:null_value => 'missing_file',
                            :fields => {
                            :name       => { :store => 'yes' },  # exists?!?
                            :content    => { :store => 'yes' },
                            :title      => { :store => 'yes' },
  # WRONG! see next line => :file       => { :term_vector => 'with_positions_offsets', :store => 'yes' },
                            :attachment => { :term_vector => 'with_positions_offsets', :store => 'yes' },
                            :date       => { :store => 'yes' }
                          } 
```

# erlang - 如何在进程终止之前在单个进程中释放二进制文件？

> ID：12170499
> 
> 赞同：0
> 
> 时间：2012-08-29T03:30:36.163
> 
> 标签：erlang

一般情况下，当计数引用为none时，二进制会自动释放，但是如何在单个进程中释放二进制，在进程终止之前？多谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T18:47:10.997

Erlang 使用引用计数来跟踪二进制文件的使用位置。每当一个进程创建一个二进制文件时，计数就会增加，每当它被发送到另一个进程时，就会产生另一个增量。随着进程停止使用二进制文件（即不再将任何变量绑定到它），计数将减少。

二进制文件是由单个进程还是多个进程使用并不重要，因为当引用计数为零时，二进制文件会自动被垃圾收集。因此，即使您只在单个进程中使用二进制文件，Erlang VM 也会为您处理。

事实上，应用的一般“规则”是*二进制文件，就像 Erlang 中的任何其他数据类型一样，会自动进行垃圾回收*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T04:10:08.660

您不应该手动释放二进制文件。

# c# - 将事件动态添加到自定义控件（确认消息框）

> ID：12170500
> 
> 赞同：0
> 
> 时间：2012-08-29T03:30:51.703
> 
> 标签：c#, asp.net, custom-controls, messagebox, dopostback

我创建了一个自定义确认消息框控件，并创建了一个这样的事件-

```
[Category("Action")]
[Description("Raised when the user clicks the button(ok)")]
    public event EventHandler Submit;

protected virtual void OnSubmit(EventArgs e) {
     if (Submit != null)
        Submit(this, e);
} 
```

当用户单击确认框上的确定按钮时，事件 OnSubmit 发生。

```
void IPostBackEventHandler.RaisePostBackEvent(string eventArgument)
{
    OnSubmit(e);
} 
```

现在我正在像这样动态添加这个 OnSubmit 事件-
在 aspx-

```
<my:ConfirmMessageBox ID="cfmTest" runat="server" ></my:ConfirmMessageBox>
    <asp:Button ID="btnCallMsg" runat="server" onclick="btnCallMsg_Click" />
    <asp:TextBox ID="txtResult" runat="server" ></asp:TextBox> 
```

在 CS-

```
protected void btnCallMsg_Click(object sender, EventArgs e)
{
  cfmTest.Submit += cfmTest_Submit;//Dynamically Add Event
  cfmTest.ShowConfirm("Are you sure to Save Data?");  //Show Confirm Message using Custom Control Message Box
}

    protected void cfmTest_Submit(object sender, EventArgs e)
        {
          //..Some Code..
          //..
          txtResult.Text = "User Confirmed";//I set the text to "User Confrimed" but it's not displayed
          txtResult.Focus();//I focus the textbox but I got Error
        } 
```

我得到的错误是-
**System.InvalidOperationException 未被用户代码处理 Message="SetFocus 只能在 PreRender 之前和期间调用。" 来源="系统.Web"**

因此，当我动态添加并触发自定义控件的事件时，Web 控件中会出现错误。如果我像这样在 aspx 文件中添加事件，

```
<my:ConfirmMessageBox ID="cfmTest" runat="server" OnSubmit="cfmTest_Submit"></my:ConfirmMessageBox> 
```

没有错误并且工作正常。

有人可以帮我将事件动态添加到自定义控件吗？
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T03:50:18.493

问题不在于生命周期后期添加的事件的组合，以及您试图通过事件处理程序实现的目标。

正如错误明确指出的那样，问题出在这一行：

```
txtResult.Focus(); 
```

如果您希望能够将焦点设置到控件，则必须将事件处理程序添加到`Init`or上`Load`。

您可以通过使用 jquery 在客户端设置焦点来解决此问题。

```
var script = "$('#"+txtResult.ClientID+"').focus();"; 
```

您必须使用[RegisterClientScriptBlock](http://msdn.microsoft.com/en-us/library/system.web.ui.scriptmanager.registerclientscriptblock.aspx)发出它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T03:47:25.967

最简单的更改是移动 focus() 调用：

```
bool focusResults = false;

    protected void cfmTest_Sumit(object sender, EventArgs e)
    {
      txtResult.Text = "User Confirmed";
     focusResults = true;
    }

    protected override void OnPreRender(EventArgs e)
    {
       base.OnPreRender(e);

        if(focusResults)
           txtResult.Focus();
    } 
```

您确定 txtResult.Text 没有在其他地方再次设置吗？

# internet-explorer - IE 8 忽略媒体查询，但最大宽度媒体查询有效

> ID：12170505
> 
> 赞同：1
> 
> 时间：2012-08-29T03:31:41.030
> 
> 标签：internet-explorer, css, media-queries

我在一个项目中使用了 respond.js，并使用了两个媒体查询，效果好坏参半。

这个：@media only screen and (max-width: 399px) { rules...} - 效果很好。

这个：@media print { rules...} - 根本不起作用。

两个媒体查询都在同一个整体样式表中（使用样板文件）。我不明白为什么 IE 会忽略一个而不是另一个。

任何建议将不胜感激。其他浏览器（Firefox、Safari、Chrome）可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:55:28.007

我今天早上看到了这篇文章——不知道我之前搜索时是怎么错过的：

[Internet Explorer 8 不会修改打印样式表中的 HTML5 标记](https://stackoverflow.com/questions/11227518/internet-explorer-8-wont-modify-html5-tags-in-print-stylesheet)

我遇到的问题与使用 html5 标签有关，因为这些是我试图修改的元素。我在页面上使用了 Modernizr，但我们使用的版本不包括 html5shiv/printshiv 我猜所以当我们尝试打印浏览器时只是忽略了打印样式表中引用的和其他 html5 标签。

为 IE 添加 html5shiv/printshiv 库解决了我的问题。

# java - JavaMail 库的限制错误

> ID：12170513
> 
> 赞同：0
> 
> 时间：2012-08-29T03:33:12.857
> 
> 标签：java, exception, jakarta-mail

尝试使用`Session`javamail 库中的类时，出现错误：

`Description Resource Path Location Type Access restriction: The type Session is not accessible due to restriction on required library C:\Program Files\Java\jre7\lib\ext\mail.jar Mailer.java /MailerApp/src line 21 Java Problem`

我的图书馆不是在正确的地方吗？我在`jdf1.7.0_01/jre/lib/ext`目录中有文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:51:58.283

您不需要将库放入`jre/lib/ext`，只需以正常方式将其添加到应用程序的类路径中（您没有说明您正在使用什么 IDE 或构建系统，所以我无法帮助您了解“正常方式”将会）。

# jquery - 只有 IE 浏览器给出 org.springframework.web.multipart.MultipartException: 当前请求不是多部分请求

> ID：12170515
> 
> 赞同：0
> 
> 时间：2012-08-29T03:33:28.687
> 
> 标签：jquery, spring, internet-explorer, file-upload, multipart

我正在尝试使用 jquery fileupload.js，spring 上传文件。上传文件的代码**适用于 Mozilla 和 chrome 浏览器。但出现以下错误 **仅适用于 IE 浏览器****

```
org.springframework.web.multipart.MultipartException: The current request is not a multipart request.
at org.springframework.web.method.annotation.RequestParamMethodArgumentResolver.assertIsMultipartRequest(RequestParamMethodArgumentResolver.java:183)
at org.springframework.web.method.annotation.RequestParamMethodArgumentResolver.resolveName(RequestParamMethodArgumentResolver.java:149)
at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:82)
at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:74) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-04T12:04:00.283

首先，您使用的是哪个 jquery fileupload.js，将链接发布到项目中。
但是，如果您提到了[jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload/)，我遇到了同样的问题，原因是我与**jquery.iframe-transport.js**不匹配，我使用[了另一个](http://cmlenz.github.io/jquery-iframe-transport/)，而[jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload/)使用了自己的版本，所以，我下载[了这个版本](https://github.com/blueimp/jQuery-File-Upload/blob/master/js/jquery.iframe-transport.js)并替换了之前的版本，在 IE 中就没有这个问题了。

# php - PHP 和 MySQL 回显一个表

> ID：12170516
> 
> 赞同：0
> 
> 时间：2012-08-29T03:33:34.880
> 
> 标签：php, mysql, html-table

我以前做过这个，而且很有效。我试图在表中回显我的数据库中的特定行。这是我的代码：

```
<?php    
$connect = mysql_connect("localhost", "xxx", "xxx") or    
die ("Hey loser, check your server connection.");    
mysql_select_db("xxx");    
$quey1="select * from `Ad Requests`";    
$result=mysql_query($quey1) or die(mysql_error());    
?>

<table border=1 style="background-color:#F0F8FF;" >    
<caption><EM>Student Record</EM></caption>    
<tr>    
<th>Student ID</th>    
<th>Student Name</th>    
<th>Class</th>    
</tr>

<?php    
while($row=mysql_fetch_array($result)){    
echo "</td><td>";    
echo $row['id'];    
echo "</td><td>";    
echo $row['twitter'];    
echo "</td><td>";    
echo $row['why'];    
echo "</td></tr>";    
}    
echo "</table>";    
?> 
```

它没有给我任何错误，但它只显示一个没有这些行的空白表。

**我的问题：为什么这不会在表格中显示任何行，我做错了什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T03:36:30.293

`mysql_fetch_array()`返回一个数字键数组，例如`$row[1]`. 你想要`mysql_fetch_assoc()`。或使用`mysql_fetch_row()`，它获取双数组 - 数字 AND 字符串键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T03:37:53.500

```
<?php

while($row=mysql_fetch_array($result)){

echo "<tr><td>";

echo $row['id'];

echo "</td><td>";

echo $row['twitter'];

echo "</td><td>";

echo $row['why'];

echo "</td></tr>";

}

echo "</table>";

?> 
```

我认为 tr 和 td 不正确

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T03:38:47.603

您忘记为数据库的每一行打开一个新表行。

```
while($row=mysql_fetch_array($result)){

echo "<tr>"; // Your code lacks this

echo "</td><td>"; 
```

目前，您输出的 HTML 将有很多表格行关闭`</tr>`，但没有开启者，因此在您的视觉输出中缺少表格行。

# php - 适用于 Facebook 的 PHP SDK：为使用 Graph API 创建的事件上传图像

> ID：12170518
> 
> 赞同：0
> 
> 时间：2012-08-29T03:34:29.420
> 
> 标签：php, facebook, cakephp, facebook-graph-api

任何人都可以阐明我的问题吗？

```
<?php

$config = array();
$config['appId'] =  "foo";
$config['secret'] = "bar";
$config['cookie'] = true;
$config['fileUpload'] = true;

$facebook = new Facebook($config);

$eventParams = array(
    "privacy_type"  => $this->request->data['Event']['privacy'],
    "name"          => $this->request->data['Event']['event'],
    "description"   => $this->request->data['Event']['details'],
    "start_time"    => $this->request->data['Event']['when'],
    "country"       => "NZ"
);

//around 300x300 pixels
//I have set the permissions to Everyone
$imgpath = "C:\\Yes\\Windows\\Path\\Photo_for_the_event_app.jpg"; 
$eventParams["@file.jpg"] = "@".$imgpath;

$fbEvent = $facebook->api("me/events", "POST", $eventParams);

var_dump($fbEvent); //I get the event id 
```

当要求用户允许应用代表他发布时，我的“范围”中也有这个：`user_about_me,email,publish_stream,create_event,photo_upload`

这行得通。它使用我指定的所有详细信息创建事件。除了活动图片。

我去过大多数与我的问题相关的 Stackoverflow 帖子，但它们都不适合我。（例如：[https](https://stackoverflow.com/a/4245260/66767) ://stackoverflow.com/a/4245260/66767 ）

我也没有收到任何错误。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:57:25.290

是的，这个想法是 Facebook 有错误。我也有事件图片的问题。[跟踪器中的主题，](http://developers.facebook.com/bugs/138727922935504?browse=search_503c1a53b3c847434077698)这是我 在 stackOverflow 上的[帖子](https://stackoverflow.com/questions/12154830/uploading-facebook-event-picture-throws-error)

顺便说一句，您可以在创建事件后尝试此代码 ->

```
public function uploadFacebookEventPicture($fullPath, $eventId) {
    $mainImage = '@' . $fullPath;   
    $imgData = array(
        'picture' => $mainImage
    );
    try {
        $data = $this->facebook->api('/'.$eventId, 'post', $imgData);
        return $data;
    } catch (FacebookApiException $e) {
        error_log('Failed to attach picture to event. Exception: ' . $e->getMessage());
    }       
    return null;
} 
```

也许它对你有用，对我来说，自从发现 Facebook 问题后它就停止工作了。

# iphone - MPMoviePlayerController 未设置背景图像的边界

> ID：12170520
> 
> 赞同：1
> 
> 时间：2012-08-29T03:34:46.970
> 
> 标签：iphone, objective-c, mpmovieplayercontroller

我正在使用 MPMoviePlayerController 播放媒体。我想在播放器的背景设置图像。图像是相应设置的，但是当我为图像设置边界时，图像不是根据边界设置的。我试过以下代码：

```
 UIImageView *imageView=[[UIImageView alloc]initWithImage:[operationControl getCoverImage:stringId]];
    imageView.bounds=CGRectMake(0, 100, 200, 200);
    [moviePlayer.backgroundView addSubview:imageView];
    [moviePlayer.backgroundView setBackgroundColor:[UIColor purpleColor]];   
    moviePlayer.controlStyle = MPMovieControlStyleDefault;
    moviePlayer.shouldAutoplay = YES;
    [moviePlayer setScalingMode:MPMovieScalingModeAspectFit];
    [self.view addSubview:moviePlayer.view];
    [moviePlayer setFullscreen:YES animated:YES]; 
```

# git - 预提交钩子获取部分提交的文件列表

> ID：12170523
> 
> 赞同：3
> 
> 时间：2012-08-29T03:35:17.353
> 
> 标签：git, pre-commit-hook

我知道运行 git-diff 和其他工具可以识别存储库中的更改，但是当我进行部分提交时，我只需要将提交的文件（而不是被触及的整个文件集）传递给预提交钩。

比如我修改了三个文件，只提交了两个，我想让 pre-commit 钩子知道这两个文件的名字。

```
git status --porcelain

M A.c 
M B.c
M C.h 
```

然后我执行：

```
git commit -m "two files only" A.c B.c 
```

预提交挂钩如何仅获取两个文件的列表？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T09:38:15.577

预提交在提交过程开始时运行...@Vince 的链接是要查看的链接。钩子运行后，您的脚本可用于`git diff --cached --name-only`获取预提交脚本中暂存文件的名称。即使用户为提交准备了更多内容，但仅请求在命令行上提交文件的子集，该命令仍然有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T08:51:07.710

我认为您的问题更多：何时触发预提交挂钩？

而且 [我刚刚发现了钩子，看起来很酷] 显然，预提交钩子在你运行之前就被触发了`git commit`（你仍然可以尝试将“Hello World”脚本连接到它，以准确查看它何时被触发）。

但后来我能想到的是 add 命令：`git add -u A.c B.c`（u 代表更新）。运行后，commit 命令将提交这些文件（只需运行`git commit -m mymessage`）

我不确切知道如何检索添加的文件列表（可能通过索引），但希望这会对您有所帮助

参考： http: [//git-scm.com/book/en/Customizing-Git-Git-Hooks](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)

# php - php变量作为条件赋值

> ID：12170527
> 
> 赞同：1
> 
> 时间：2012-08-29T03:35:59.513
> 
> 标签：php, variables, conditional-statements

我想知道如何将条件赋值分配给 php 变量并在其他条件中使用它，如下所示：

```
$cndtnal='&& $x==4'

if($y==5 $cndtnal){
   print 'Hello World';
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T03:58:40.160

你应该尽量避免使用**eval**，但是如果你想使用它，那么你可以这样做：

```
$cndtnal='&& $x=4';
if($y==5 .eval("return '$cndtnal';")  ){
   echo 'Hello World';
}
else {
    echo "this";
} 
```

# c++ - 表达式必须具有指向对象的类型

> ID：12170532
> 
> 赞同：2
> 
> 时间：2012-08-29T03:36:38.047
> 
> 标签：c++, cuda

我在 CUDA 中有以下代码

```
__global__ void matvec(int *MAT, int *VEC, int *SOL)
{
   int bx = blockIdx.x;
   int tx = threadIdx.x;
   int i = 32*bx+tx;
   for (int j = 0; j < X; j++){
    SOL[i] = ((MAT[i][j] * VEC[j]) + SOL[i]) % 2;
   }
} 
```

我的问题是在第 6 行我有一个错误。它说我的表达式必须有一个指向对象的类型。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-29T03:50:08.653

错误的原因是您将指针视为二维数组。您定义`MAT`为`int *MAT`，但您访问它为`MAT[i][j]`。

假设您已正确分配`MAT`，我会将其更改为`MAT[i*X + j]`. 或者，再次定义`MAT`为`int **MAT`，假设您已正确分配它。

（顺便说一句，这不是 CUDA 问题，这是一个简单的 C 语法错误。）

# delphi - 如何阻止 TStack.pop 释放弹出的对象

> ID：12170535
> 
> 赞同：1
> 
> 时间：2012-08-29T03:37:29.890
> 
> 标签：delphi

我正在使用 Generics.Collections 中的 Delphi TStack（在 Delphi XE 下）实现一个堆栈，并注意到当我调用 pop 时，弹出的对象被释放，这对我来说似乎没有意义，因为我现在无法使用弹出的对象。相反，我发现我可以使用似乎有效的 Extract。我的问题是，有什么办法可以使用 pop 代替，因为它有助于代码的可读性。有没有办法阻止它释放弹出的对象？

附带说明一下，我曾想过使用 TObjectStack，因为它可以让我控制谁拥有对象，但后来我发现 TObjectStack pop 是一种实际上不返回弹出内容的方法，因此它不是很有用。

# objective-c - 在 Objective-C 中安全地检查变量是否为零

> ID：12170537
> 
> 赞同：1
> 
> 时间：2012-08-29T03:37:44.803
> 
> 标签：objective-c, multithreading, thread-safety

我有一个具有以下属性的 Objective-C 类：

```
@property (nonatomic, copy) NSString *myString; 
```

分配给 myString 的值来自远程服务器。我使用`performSelectorInBackground`. 下载数据后，我将其传递给主线程上的选择器，使用`performSelectorOnMainThread:withObject:`. 在这个选择器中，我将数据分配给 myString。

**如何安全地检查 myString 在主线程的选择器中是否为 nil？**

所以我想问一下`if (myString)`主线程上的一些选择器。但是我不确定线程​​方面的考虑。也许这是属性应该是原子的情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T03:47:00.997

如果主线程是系统中唯一访问 的线程`myString`，那么属性访问实际上是单线程的，您不需要`atomic`. 如果主线程是唯一在写的线程，但其他线程也在读`myString`，那么声明属性`atomic`是一件好事。在多线程访问的情况下，请确保使用 immutable`NSString`而不是`NSMutableString`，因为即使创建属性`atomic`也不会保护可变字符串在读取与写入同时运行时返回不正确的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T03:48:48.693

如果您在主线程上同时读取和写入该属性的值，那么就没有并发性，您不需要采取任何特殊的预防措施。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T03:50:24.263

一旦您进入由 触发的方法`performSelectorOnMainThread:`，您的线程考虑就结束了。`myString`如果您除了从主线程之外没有任何访问权限，那么没有什么可以与您竞争，显而易见的`if (myString)`将起作用。

但是，如果您使用[`NSURLConnection`](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html#//apple_ref/doc/uid/20001836-BAJEAIEE)的是 ，您可能过于复杂了。您可以在完全不涉及线程的情况下异步执行网络请求。

# mysql - 仅当 id 不同时才对列求和

> ID：12170542
> 
> 赞同：1
> 
> 时间：2012-08-29T03:38:21.790
> 
> 标签：mysql

希望每个人都做得很好。

我有以下输出...

```
+---------+-------------+--------------+--------- --+---------+----------+
| ord_num | 签收日期 | 程序名 | 产品描述 | tx_comp | 优先 |
+---------+-------------+--------------+--------- --+---------+----------+
| 1234567 | 2012-08-12 | 学习 | 运行 | 1 | 1 |
| 1234567 | 2012-08-12 | 学习 | 计划| 1 | 1 |
| 1234568 | 2012-08-12 | 其他| 运行 | 1 | 1 |
| 1234569 | 2012-08-12 | 其他| 运行 | 0 | 1 |
+---------+-------------+--------------+--------- --+---------+----------+

```

我想做的是每个唯一`SUM`的`tx_comp`“ord_num”列一次。

现在我不能使用`GROUP BY ord_num`，因为我也在`sum`任务类型上做了一个。

就像我需要知道之前`ord_num`的总和是否不同？

任何想法将不胜感激。

谢谢。

*** 编辑 ***

```
SELECT 
    signoff_date,
    SUM(IF(prod_desc = 'run', 1, 0)) AS run,
    SUM(IF(prod_desc = 'plan', 1, 0)) AS plan,
    SUM(tx_comp) AS tx_comp 
FROM
(
    SELECT 
        ord_num,
        signoff_date,
        program_name,
        prod_desc,
        tx_comp,
        priority 
    FROM
        test.orders 
        LEFT JOIN test.tx_comp USING (ord_num)
) AS grp 
```

显然不是想要的输出

```
+--------------+------+------+---------+
| 签收日期 | 运行 | 计划| tx_comp |
+--------------+------+------+---------+
| 2012-08-12 | 3 | 1 | 3 |
+--------------+------+------+---------+

```

我在追...

```
+--------------+------+------+---------+
| 签收日期 | 运行 | 计划| tx_comp |
+--------------+------+------+---------+
| 2012-08-12 | 3 | 1 | 2 |
+--------------+------+------+---------+

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T05:22:58.623

如果 tx_comp 的值始终为 1 或 0，那么我们可以利用`COUNT()`，这可能会给我们更多的选择。例如，我们可以计算 tx_comp 为 1 的不同 ord_num：

```
COUNT(distinct IF(tx_comp, ord_num, NULL)) 
```

这给了我一个最终的查询：

```
SELECT signoff_date,
  SUM(IF(prod_desc = 'run', 1, 0)) AS run,
  SUM(IF(prod_desc = 'plan', 1, 0)) AS plan,
  COUNT(distinct IF(tx_comp, ord_num, NULL)) as tx_comp
FROM 
  test.orders
  JOIN test.tx_comp USING (ord_num)
  GROUP BY signoff_date 
```

在这种情况下不需要子查询。（**编辑：**为您的加入更新）

我已经用您的样本数据对此进行了测试；唯一的依赖是 tx_comp 的语义性质。您一直在说“SUM”，这假设该值最多为 1（我理解它是一个布尔标志，并且在对另一个答案的评论中您提到 MAX(tx_comp) 返回 1，所以我认为我们'再好）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T04:29:45.223

也许只是使用`MAX`而不是`SUM`列`tx_comp`？我不确定您的数据的语义，但我猜这就是您想要的。事实上，对于`run`和也可能是一样的`plan`。

就此而言，您*真正*想要的是`BIT_OR`，因为您正在使用布尔值。

# javascript - Meteor 使用表单值插入记录

> ID：12170551
> 
> 赞同：1
> 
> 时间：2012-08-29T03:40:35.670
> 
> 标签：javascript, forms, input, meteor

首先，我是一个完整的JS新手。我正在试验`Meteor`. **我的目标是构建一个将记录插入表的简单表单**。我已经设置了变量以从每个输入中获取值，并将这些变量放入`insert method`. 当我单击按钮时，它会识别单击，但不会从输入中提取任何值。我确定我在这里遗漏了一些简单的东西，我只是无法弄清楚它是什么。

**这是JS：**

```
var Leads = new Meteor.Collection("Leads");

if (Meteor.is_client) {

  Template.Leads.LeadsArr = function(){
    return Leads.find();
  };

  Template.AddLeads.events = {

    "click input.submit" : function () {
      var name = document.getElementById('input#name').value();
      var email = document.getElementById('#email').value();
      var type = document.getElementById('#type').value();
      var date = document.getElementById('#date').value();
      var message = document.getElementById('#message').value();

      Leads.insert({leadName : name, leadEmail : email, leadType : type, leadDate : date, leadComment : message});

    }  
  };

} // end is_client 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T03:59:38.033

document.getElementById 期望的是 id，而不是选择器。此外，值是输入的属性，而不是函数。所以你的输入查询应该是这样的。

```
var name = document.getElementById('name').value;
var email = document.getElementById('email').value;
var type = document.getElementById('type').value;
var date = document.getElementById('date').value;
var message = document.getElementById('message').value; 
```

# java - 在 Android 上解析 ~1 MB JSON 非常慢

> ID：12170552
> 
> 赞同：6
> 
> 时间：2012-08-29T03:40:39.957
> 
> 标签：java, android, json, performance

我的资产文件夹中存储了一个大约 1MB 的 JSON 文件，每次运行时都需要将其加载到我的应用程序中。我发现内置的 JSON 解析器 (org.json) 解析文件的速度非常慢，但是一旦解析完成，我就可以非常快速地访问和操作数据。从我点击应用程序到启动 Activity1 的那一刻，我计算了多达 7 或 8 秒，但从 Activity1 到 Activity2 只需几毫秒，这取决于从加载的数据处理的数据活动1。

我正在将文件读入内存并使用以下方法解析它：

```
String jsonString = readFileToMemory(myFilename)
JSONArray array = new JSONArray(jsonString); 
```

其中 readFileToMemory(String) 看起来像这样：

```
private String readFileToMemory(String filename) {
    StringBuilder data = new StringBuilder();       
    BufferedReader reader = null;
    try {
        InputStream stream = myContext.getAssets().open(filename);
        reader = new BufferedReader(new InputStreamReader(stream, "UTF-8"));
        int result = 0;
        do
        {
            char[] chunk = new char[512];
            result = reader.read(chunk);
            data.append(chunk);
        }
        while(result != -1);

    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return data.toString();
} 
```

有人对我如何加快数据的初始加载和解析有任何建议吗？我应该掩盖加载屏幕背后的整个过程吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T03:50:27.140

`JSONObject`-- 来自 json.org 的那个，是用于解析 JSON 的最简单的 API。然而，它带来了成本——性能。我对 JSONObject、Gson 和 Jackson 进行了广泛的实验。似乎无论您做什么，JSONObject（以及 JSONArray）都将是最慢的。请切换到 Jackson 或 Gson。

这是两者的相对表现

（最快）**`Jackson > Gson >> JSONObject`**（最慢）

参考：
-[杰克逊](https://github.com/FasterXML/jackson)
- [Gson](http://code.google.com/p/google-gson/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T03:46:21.100

您应该创建一个 SQLite 表来存储数据，并在应用程序第一次运行时将其从 JSON 移动到 SQL。作为一个额外的好处，这使数据更易于搜索，并使您可以从应用程序内修改数据。

# php - wordpress 错误：调用插件中未定义的函数

> ID：12170554
> 
> 赞同：3
> 
> 时间：2012-08-29T03:40:45.423
> 
> 标签：php, wordpress

我一直在使用 Shortcode Exec PHP 插件编写一个函数，当我在编辑器中运行它时，该函数运行良好。

当我将其移至插件时，我开始在日志中看到如下错误：

```
PHP Fatal error: Call to undefined function wp_create_category() 
```

我意识到这是因为缺少包含等。

为插件包含内置 wordpress 功能的正确方法是什么？

我的插件使用以下 wordpress 功能

```
wp_create_category
username_exists
wp_generate_password
wp_create_user
wp_insert_post
update_post_meta
add_post_meta 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-20T06:21:33.567

使用下面的代码，工作正常，我已经测试过

```
 require_once(ABSPATH . 'wp-config.php'); 
   require_once(ABSPATH . 'wp-includes/wp-db.php'); 
   require_once(ABSPATH . 'wp-admin/includes/taxonomy.php'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T04:51:50.710

尝试将其包含在您的文件中，然后让我知道-

```
require_once(WORDPRESS_HOME. 'wp-config.php'); 
require_once(WORDPRESS_HOME. 'wp-includes/wp-db.php'); 
require_once(WORDPRESS_HOME. 'wp-admin/includes/taxonomy.php'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-29T09:46:09.227

我知道这是一个非常古老的问题，但不知何故没有人提到我想到的解决方案。

我认为这样做的正确方法是在插件中使用正确的 init 钩子。添加 require_once() 对我来说似乎是 hack。

所以有些功能只为管理区域加载，有些只为前端加载。所以取决于那些在你的插件中使用正确的钩子。

```
add_action('init', function () {} 
```

或者

```
add_action('admin_init', function () {} 
```

当然，您可以将它们都放在一个插件中。

# image - 根据图像插值函数

> ID：12170560
> 
> 赞同：3
> 
> 时间：2012-08-29T03:41:54.913
> 
> 标签：image, matlab, interpolation

![图像矩阵中的数据](../Images/9d6189b0a70324f64d2f6a8153395075.png)![矩阵中的所需函数](../Images/2c31253368b15b2e8ba50a3e5b04f5fd.png)

我在这张图片中有 3 条“线”。

我想从图片中的数据中插入 3 个函数，类似于第二张图片，

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T03:56:16.820

首先，我假设您有颜色到强度的映射。您真的想将强度用作灰度图像。

使用模糊功能来减少图像中的噪点并帮助使输出连续。

使用垂直差异来查找线。差异从正面变为负面的地方就是放置线的地方。

# c++ - 函数对象如何影响重载决议？

> ID：12170562
> 
> 赞同：12
> 
> 时间：2012-08-29T03:42:04.657
> 
> 标签：c++, c++11, overload-resolution, function-object

在重载决议期间，函数对象的处理方式是否与常规函数不同？如果是这样，怎么做？

我遇到了以下情况，用等效可调用的函数对象替换函数会改变代码的含义：

```
#include <iostream>

namespace N
{
    enum E { A, B };

    void bar(E mode) { std::cout << "N::bar\n"; }
}

template <typename... Args>
void bar(Args&&... args) { std::cout << "global bar\n"; }

int main()
{
    bar(N::A);
} 
```

这里的输出是“N::bar”。到目前为止，一切都很好：ADL 正在找到 N::bar，N::bar 和全局 bar 都是完全匹配的，并且 N::bar 是首选，因为它不是模板。

但是，如果我将全局 bar 更改为函数对象，如下所示：

```
#include <iostream>

namespace N
{
    enum E { A, B };

    void bar(E mode) { std::cout << "N::bar\n"; }
}

struct S
{
    template <typename... Args>
    void operator()(Args&&... args) { std::cout << "global bar\n"; }
};
S bar;

int main()
{
    bar(N::A);
} 
```

输出现在是“全局栏”。为什么有区别？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-29T04:01:30.100

*这里重要的一点是，只有在查找确定名称是*函数调用中的函数时，ADL 才会启动。第二种情况，`bar`被发现是*对象*而不是函数，所以表达式`bar(N::A)`不是函数调用，而是对`operator()`对象的应用`bar`。因为它不是函数调用，所以 ADL 不参与`N::bar`也不考虑。

> 3.4.1/3
> 
> 查找用作函数调用的后缀表达式的非限定名称在 3.4.2 中描述。[ 注意：为了确定（在解析期间）表达式是否是函数调用的后缀表达式，通常的名称查找规则适用。3.4.2 *[ADL]*中的规则对表达式的句法解释没有影响。

另一种看待它的方式是注意 ADL 将向*重载函数集*添加新函数，但在第二个示例中没有这样的集：查找找到一个对象并调用该对象的一个​​成员。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T21:26:44.273

见 3.4.2p3，它说

> 令 X 为由非限定查找 (3.4.1) 生成的查找集，让 Y 为由参数相关查找生成的查找集（定义如下）。如果 X 包含
> 
> *   ...
> *   既不是函数也不是函数模板的声明
> 
> 那么 Y 为空。

如果没有这样的规则，那么您是对的：ADL 会将您的其他函数添加到重载集。事实上，13.3.1.1p1 依赖于此：它有两个分支；一种用于函数调用表达式，其中操作数表示类对象，另一种用于操作数表示一个或多个函数或函数模板。

# internet-explorer - 如何以及何时从 BHO 的地址栏中获取用户的输入

> ID：12170565
> 
> 赞同：0
> 
> 时间：2012-08-29T03:42:43.953
> 
> 标签：internet-explorer, bho, dispatchevent

我正在为 IE 写一个 BHO。我想从地址栏中获取用户的输入。输入可以是 url 或搜索关键字。因为还有其他 BHO 会将用户的输入更改为符合条件的 url。我不需要更改并希望从用户那里获得原始输入。哪个调度事件将是从 BHO 中获取用户原始输入的合适时间？我怎样才能得到它？您的回答将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T07:49:34.940

在 Windows 7 上，我看到一个带有“Address Band Root”类的窗口（使用 Spy++）。这大概是浏览器中的地址栏。它有一个子窗口，它是一个编辑控件。您可以子类化或挂钩此编辑控件，以便获得`EN_CHANGE`或`EN_UPDATE`通知。然后您可以查询它以获取当前文本。这是一种非常先进的技术，但通常情况下，在 IE 中做简单的事情需要复杂的代码。

哦，我应该提一下，这大概不会在 IE 保护模式下工作。您可以实现一个单独的 COM 对象并让 BHO 对其进行实例化并让它完成繁琐的工作。通常 IE 会提示用户访问提升模式进程的权限，但您可以使用注册表来[覆盖此行为](http://support.microsoft.com/kb/918239/en-us?spid=8722&sid=global)。

就像我说的，这是先进的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T03:55:05.667

你看过 BeforeNavigate2 事件吗？[http://msdn.microsoft.com/en-us/library/aa768326(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/aa768326(v=vs.85).aspx)

# php - 如何在 symfony2 中使用带有树枝标签的树枝模板中的 if 条件

> ID：12170566
> 
> 赞同：0
> 
> 时间：2012-08-29T03:42:49.553
> 
> 标签：php, symfony

我正在尝试使用这个

```
{% if not app.request.isXmlHttpRequest %}
   {% block body %}
   <div>{{ form_widget(form) }}</div>
{% endif %} 
```

我在块标记后收到意外的 enfif 标记错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T03:53:42.033

也许尝试添加结束`{% endblock %}`标签，例如

```
{% if not app.request.isXmlHttpRequest %}
   {% block body %}
       <div>{{ form_widget(form) }}</div>
   {% endblock %}
{% endif %} 
```

# c# - 如何允许导入/导出 DPAPI 安全凭证

> ID：12170567
> 
> 赞同：0
> 
> 时间：2012-08-29T03:42:53.263
> 
> 标签：c#, encryption, import, export, dpapi

我正在编写一个 winforms 应用程序，它将用户名和密码本地存储在配置文件中，这样使用该应用程序的人就不必在每次登录到我的应用程序支持的各种服务时重新输入他们的凭据。密码能够被解密是绝对必要的，所以我选择使用 ProtectedData 以及 Protect 和 Unprotect 方法来安全地存储密码。这使得保护他们的数据的责任很容易转嫁给 Windows 和最终用户，而不用担心密钥之类的问题。

现在我想为用户提供在安装之间移动设置的能力。一个很好的例子是，如果他们希望保留许多不同帐户设置的备份，或者他们想移动到另一台计算机。

我已经解决了它是这样的：

1.  用户点击“导出账户”按钮
2.  应用程序使用 Unprotect 解密存储的设置
3.  应用程序将设置写入明文“备份”，然后将其导入新帐户并重新加密。

在第 3 步之前，所有这些听起来都很棒。第 3 步让我很困扰，因为它将密码以明文形式放置。在这种情况下是否有导入/导出凭据的最佳实践，或者被认为“可以”让用户有责任保护导出的文件？对我来说，假设用户正确保护了他们的 Windows 帐户，这似乎是可以假设的。我已经提出了不允许他们导入/导出设置文件的想法，但这似乎是一个很大的不便。同样，我也可以构建一个极其罕见的极端情况，即某人拥有如此多的存储帐户，以至于手动重新输入只需不到十年的时间。

如果有做这件事的经验的人愿意为此提供最佳实践/建议，我将不胜感激。对于必须处理存储凭据的所有复杂性，我还是很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:32:12.897

> 如果有足够的时间和空间，您的本地密钥存储可能会受到影响，我们所做的只是让这变得更加困难。

当我使用 DPAPI 在域中的多台计算机上进行类似的数据保护时，我唯一的方法就是您现在所在的位置。将敏感数据取消保护为纯文本。将它们复制到另一台计算机，然后使用 DPAPI 保护数据。这看起来不太好，所以我放弃了导出数据的选项！并提供了另一种加密方案，允许以安全的方式导出敏感数据。

***这可能不是您问题的答案，但是在导出加密数据时，使用 DPAPI 让您别无选择，只能拥有您所拥有的，这是设计使然。***

推荐的做法是使用对称算法（如 Rijndael）来加密数据。使用非对称算法加密对称算法的密钥。稍后，将非对称算法的公钥/私钥对和加密的对称算法的密钥保存在 lccly 中。将它们导出到另一台计算机。使用非对称算法的私钥解密加密的对称算法的密钥。然后使用对称密钥解密导出的数据。

把事情放在透视图中，当你导出时：

1.  使用[RijndaelManaged](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rijndaelmanaged.aspx)对原始数据进行加密。
2.  [通过使用RsaCryptoServiceProvider](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rsacryptoserviceprovider.aspx)加密来保护 RijndaelManaged 使用的密钥。
3.  当您保留 RSA 公钥/私钥对时，请确保使用[CspParameters](http://msdn.microsoft.com/en-us/library/system.security.cryptography.cspparameters.aspx)。
4.  [使用ToXmlString](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rsa.toxmlstring.aspx)将 RSA 公钥/私钥对导出到 XML 文件
5.  将步骤 2 中加密的密钥，步骤 4 中创建的 RSA 密钥对，原始加密数据复制到另一台计算机。
6.  [使用FromXmlString](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rsa.fromxmlstring.aspx)从 XML 字符串导入 RSA 公钥/私钥对。清除 Xml 文件容器公钥/私钥对。
7.  现在您的私人（和公共）密钥在您的新计算机中可用，使用它来解密 RijndaelManaged 的​​密钥。
8.  获得 RijndaelManaged 的​​密钥后，使用它来解密原始数据。

现在这应该足以满足您的情况。使用 DPAPI 进行常规凭据存储是您的权衡，当用户需要将凭据导出到另一台计算机时，您可以按照上面列出的步骤 1 到 8 进行操作。

虽然在本地存储凭据不是一个好习惯，但有时为了用户体验，我们别无选择，只能增加加密的复杂性。

使用 DPAPI 时，请务必配置用户级/机器级保护，这也是一个熵值。

# asp.net - 在 asp.net 应用程序中使用 Windows WCF 服务

> ID：12170568
> 
> 赞同：2
> 
> 时间：2012-08-29T03:43:13.327
> 
> 标签：asp.net, windows, wcf, service

我是 WCF 模型的新手，但我创建了一个服务，它似乎在 VS2010 中工作

现在我想从一个 asp.net 应用程序访问这个 windows 服务。这背后的原因是：我希望能够调用该服务以通过 SSH 连接到服务器，并保持该连接打开（就像我在 Windows 窗体应用程序中所做的那样）

关于如何去做这件事的任何想法？我尝试使用 IIS 托管服务，但每次请求完成时连接都会丢失。

至少在VS2010的测试器中，我可以调用我的connect函数，然后调用其他函数来查询数据，然后断开连接。

仅供参考，本地 Windows 服务和 IIS 在同一个盒子上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T06:46:20.783

WCF 服务默认为每个请求创建一个新实例。还有其他模型，尽管我不确定它们是否会根据需要管理尽可能长的进程。这篇文章有一些关于管理会话的好信息：http: [//msdn.microsoft.com/en-us/magazine/cc163590.aspx](http://msdn.microsoft.com/en-us/magazine/cc163590.aspx)

或者，为什么不使用工作流基础之类的技术，该技术旨在运行/持久/重新唤醒长期运行的流程？[http://msdn.microsoft.com/en-us/library/ee342461.aspx](http://msdn.microsoft.com/en-us/library/ee342461.aspx)

# java - 我可以通过 JNI 从 Java 调用的 EPoll C 实现

> ID：12170569
> 
> 赞同：2
> 
> 时间：2012-08-29T03:43:22.433
> 
> 标签：java, c, real-time, nio, epoll

是否有任何 C 大师曾经在 C 中实现过 Epoll 非阻塞选择器，我可以从 Java 中调用它，这样我就不必使用 Java 的 NIO Epoll 实现了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T06:53:36.397

您可以找到我用 C 编写的 epoll 示例程序。我希望对你有帮助你 [能推荐一些关于 Linux 上 Epoll 的指南吗](https://stackoverflow.com/questions/27247/could-you-recommend-some-guides-about-epoll-on-linux/6150841#6150841)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T07:42:08.320

如果 Java 6 中的 SelectorProvider 在内核 2.6 或更高版本的 Linux 上运行，则使用 epoll。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-02T05:02:21.483

是的，JVM源代码中的java支持`epoll`，你可以找到以下代码

```
JNIEXPORT jint JNICALL
Java_sun_nio_ch_EPoll_epollCreate(JNIEnv *env, jclass c) {
/*  
 * epoll_create expects a size as a hint to the kernel about how to
 * dimension internal structures. We can't predict the size in advance.
 */
int epfd = epoll_create(256);
if (epfd < 0) {
   JNU_ThrowIOExceptionWithLastError(env, "epoll_create failed");
}   
return epfd;
} 
```

# iphone - 使用 3.0 SDK 获取 Facebook 个人资料图片

> ID：12170570
> 
> 赞同：8
> 
> 时间：2012-08-29T03:43:30.253
> 
> 标签：iphone, ios, facebook

我无法使用新的 Facebook SDK 获取用户的个人资料图片。这里的所有答案都使用旧 SDK 中不再有效的方法。

我试过使用 Facebook 教程中推荐的 FBProfilePictureView，但是这张图片没有被缓存，我认为它不能转换成 UIImage。

任何人都可以提供一些帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-29T05:49:41.130

好的，我终于用以下方法得到了这个：

```
imageData = [[NSMutableData alloc] init]; // the image will be loaded in here
NSString *urlString = [NSString stringWithFormat:@"http://graph.facebook.com/%@/picture?type=large", user.id];
NSMutableURLRequest *urlRequest =
[NSMutableURLRequest requestWithURL:[NSURL URLWithString:urlString]
                                     cachePolicy:NSURLRequestUseProtocolCachePolicy
                                 timeoutInterval:2];

// Run request asynchronously
NSURLConnection *urlConnection = [[NSURLConnection alloc] initWithRequest:urlRequest
                                                                              delegate:self];
if (!urlConnection)
        NSLog(@"Failed to download picture"); 
```

然后我用`-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data`和`-(void)connectionDidFinishLoading:(NSURLConnection *)connection`把图像放在一起。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-04T04:46:58.033

我找到的最佳解决方案：我使用了来自 AFNetworking [https://github.com/AFNetworking/AFNetworking](https://github.com/AFNetworking/AFNetworking)的 UIImage 。它处理重定向和缓存，因此您可以为您拥有的每个用户 ID 获取个人资料图片。

```
NSString *imageUrl = [NSString stringWithFormat:@"http://graph.facebook.com/%@/picture", ((NSDictionary<FBGraphUser> *) [self.friends objectAtIndex: indexPath.row]).id];
[friendCell.imageView setImageWithURL:[NSURL URLWithString:imageUrl] placeholderImage:[UIImage imageNamed:@"profile.jpg"]]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T14:49:59.033

使用[https://github.com/rs/SDWebImage](https://github.com/rs/SDWebImage)缓存图像。请求图像的 URL 应该是

```
NSString *string = [NSString stringWithFormat:@"https://graph.facebook.com/%@?fields=picture", userid]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T03:59:36.553

使用链接：

> ```
> https://graph.facebook.com/me?fields=picture
> ```

获取当前用户的头像。

Facebook 提供了[Graph API 浏览器工具](https://developers.facebook.com/tools/explorer)，当您想尝试查询或检查返回的输出时，它可以派上用场。

这是[User API Reference](https://developers.facebook.com/docs/reference/api/user/)的链接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T07:39:37.403

如果您的问题与“self.userPofilePicture.profileID = user.id;”有关。

然后 self.userProfilePicture 返回 UIView 所以只需取 View 并在其中显示。

不要忘记在 Identity Inspector 中添加类 FBProfilePictureView 以及 [FBProfilePictureView 类] 到 AppDelegate 实现文件。

我希望这会有所帮助。

# opengl - 在我的代码中使用 NVidia FxAA：什么是许可模式？

> ID：12170575
> 
> 赞同：6
> 
> 时间：2012-08-29T03:44:24.123
> 
> 标签：opengl, graphics, opengl-es, 3d, directx

遇到了来自 NVidia 的 FxAA 实现。

> [http://developer.download.nvidia.com/assets/gamedev/files/sdk/11/FXAA_WhitePaper.pdf](http://developer.download.nvidia.com/assets/gamedev/files/sdk/11/FXAA_WhitePaper.pdf) [http://timothylottes.blogspot.in/2011/12/fxaa-40-stills-and-features.html](http://timothylottes.blogspot.in/2011/12/fxaa-40-stills-and-features.html)

这样的源代码没有许可证标头，我也找不到有关许可的任何信息。将其集成到具有商业许可证的软件中是否可以？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T04:24:30.387

它显然是公共领域：

![在此处输入图像描述](../Images/33fcc10f6bc08e561854cc9a813fa2a4.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-18T11:52:44.847

值得一提的是，FXAA 3.11 的更新/衍生产品现在也在[NVIDIA 的 GameWorks OpenGL 示例](https://developer.nvidia.com/gameworks-vulkan-and-opengl-samples)下获得许可：

*   [FXAA 3.11](https://github.com/NVIDIAGameWorks/GraphicsSamples/blob/80e8ba8f5e8935821513207033490735dd3279d8/samples/es3-kepler/FXAA/FXAA3_11.h)
*   [License](https://github.com/NVIDIAGameWorks/GraphicsSamples/blob/master/license.txt)，其要点总结如下：

    > 许可：根据本协议的条款，NVIDIA 特此授予开发者一项免版税、非排他性的许可，以拥有和使用这些材料。以下条款适用于指定类型的材料：
    > 
    > 源代码：开发者有权使用源代码修改和创建衍生作品。开发者应拥有其为源代码创建的任何衍生作品（“衍生品”），前提是开发者根据本协议的条款使用材料。开发者可以分发衍生产品，前提是正确使用所有 NVIDIA 版权声明和商标，并且衍生产品包括以下声明：“本软件包含由 NVIDIA Corporation 提供的源代码。”

这意味着它需要署名，但在商业软件使用方面仍然比许多其他软件许可证更宽松。

关于寻找代码如何获得许可的原始披露，我通过[Internet Archive](https://archive.org/web/) 和（可能是可疑的）[Archive.is](http://archive.is/)进行了一些拖网。似乎没有任何提及许可意图，即使其他人的博客文章表明它是公共领域：

*   [通过Archive.is](http://archive.is/Y7Ns)的原始发布
*   后续更新：[互联网档案](https://web.archive.org/web/20110831051424/http://timothylottes.blogspot.com/)

看起来 sigman 的答案在支持用作公共领域代码（在上面链接的 NVIDIA 许可证之外）方面几乎和它一样好。或者在与蒂莫西·洛特本人（再次）接触之外。;)

# c++ - 如何在 C++ 中捕获“任何”异常？

> ID：12170584
> 
> 赞同：5
> 
> 时间：2012-08-29T03:45:42.993
> 
> 标签：c++, exception

据我了解，c++ 中的所有异常最终都会扩展`exception`. `Exception e`在 Java 世界中，无论异常类型如何，捕获都会起作用。这是如何在 C++ 中完成的？

为什么在这个片段中没有捕获异常？

```
try{        
    int z = 34/0;
    cout << "This line should not appear" << endl;
} catch (exception e) {
    cout << "An error has occurred: " << e.what();  // Not executed
} 
```

此外，在 C++ 中，如何找出哪些操作导致了哪些异常？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T03:47:26.770

> **为什么在这个片段中没有捕获异常？**

整数除以`0`不是标准的 c++ 异常。所以在这种情况下不会抛出异常，你得到的是一个普通的***Undefined Behavior***。

一些特定的编译器可能会将此场景映射到特定的异常，您必须检查编译器文档才能找到相同的异常。但是，使用此类功能将是不可移植的，并且您的代码将仅限于您的特定编译器。

在这种情况下，您可以做的最好的事情是自己检查错误条件（除数等于 0）并显式抛出异常。

> **此外，在 C++ 中，如何找出哪些操作导致了哪些异常？**

该类为此`std::exception`提供了一个`std::exception::what()`专门的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T04:32:38.813

除以 0 会导致大多数 CPU 遵循某种升级过程，在该 CPU 制造商的行话中，这可能被称为异常、信号、中断、陷阱或其他任何内容。这些都没有——即使也使用了“异常”这个术语——与 C++ 语言异常有任何直接关系。

在 C++ 中，由于重复测试除以零的 CPU 周期和目标代码大小通常很昂贵，因此编译器为内置类型生成的代码不需要进行任何此类检查。在实践中，通常相信程序员会编写代码以避免被零除，在有用的除法子集中插入显式检查就足够了；考虑此类检查以避免冗余。

如果程序员想要一致的保证检查，他们可以创建一个用户定义类型（一个具有自定义重载运算符的类），它可以用来代替内置的数字类型，但需要花时间检查除以零（或下溢，溢出或开发人员所关心的任何其他问题）并根据程序员的喜好做出反应。我收集到像 JAVA 和 C# 这样的语言缺乏运算符重载，我想这意味着它们不能以这种方式轻松替换内置类型，需要更改侵入性代码来显式调用函数，而不是使用直观的数学运算符。

无论如何，由于 C++ 标准本身并没有为被零除的情况指定某些行为，因此实现可以自由地提供一些可能有用的行为（如果它选择的话）。可以想象，这可能包括以某种方式生成一个实际的 C++ 语言异常，但实际上它可能在 CPU 周期和代码大小方面过于昂贵，无法证明是合理的。也许 JAVA 实在是太慢太臃肿以至于像这样的一点额外检查既不存在也不存在......？;-)

假设您使用的是 x86 系列 CPU，除以 0 通知的术语是“中断”。但是，如果该机器运行的是 UNIX 或 Linux，则除法会在操作系统级别产生一个“信号”，您可以设置一个信号处理程序来获取问题通知。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T04:55:56.527

你写

> 据我了解，C++ 中的所有异常最终都会扩展`exception`

那是错误的。C++ 异常几乎可以是任何类型。对于 C++98，它必须是可复制的，但可能（并且很可能）C++11 已经取消了该限制。

> 在 Java 世界中，无论异常类型如何，捕获异常 e 都会起作用。这是如何在 C++ 中完成的？

通过一个包罗万象的条款，

    `catch( ... )`

这样做的主要问题是，如果您想要有关异常的任何信息，那么在 C++98 中您必须重新抛出，这不是一种特别有效的方法。截至 2012 年，您的工具链可能还不支持 C++11 的异常处理工具。

> 为什么在这个片段中没有捕获异常？

因为没有 C++ 异常。通常，编译器会简单地拒绝编译常量表达式`34/0`。我想不出除了 g++ 之外的任何编译器*都会*编译它：**你真的编译过那个代码吗？**.

无论如何，如果有人设法编译该代码，那么从标准 C++ 的角度来看，它只会导致**Undefined Behavior**，任何事情都不会发生。如果你很幸运，你会得到一个`signal`，但没有任何保证。但是，可以使用特定于平台的功能来捕获此类事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T03:47:45.743

在 C++ 中除以零不会引发异常。例如，请参见[此处](https://stackoverflow.com/q/6121623/478288)、[此处](https://stackoverflow.com/q/4747934/478288)和[此处](https://stackoverflow.com/q/4835022/478288)。

# concurrency - Erlang 对协同实时应用的好处

> ID：12170589
> 
> 赞同：0
> 
> 时间：2012-08-29T03:46:40.917
> 
> 标签：concurrency, erlang, fault-tolerance

我正在研究创建一个实时文档编辑和聊天应用程序。我一直想学习 Erlang，我想知道这是否是一个很好的项目来尝试一下。

具体来说，与运行在 Mongrel 或 LAMP 堆栈上的 Rails 应用程序相比，我会在什么时候开始看到 Erlang 的容错和轻量级进程的优势？会是 100 个并发用户吗？1,000？100,000？基本上，我不知道是否值得学习一门新语言，或者我目前的技能是否足够。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T18:54:39.303

这个问题有点主观，但无论如何我都会尝试回答：

作为 Erlang 的长期用户，我想说只要您拥有超过**1 个**用户，您就会看到好处。Erlang 在处理并发时使用了actor模型。它的一个好处是您可以以线性方式处理与用户的每个交互/会话/场景，就像您编写任何其他程序程序一样。

当您开始同时处理许多用户之间的交互时，这种美感变得更加明显。然后你为每个用户启动你的小“程序程序”的一个实例。因此，您不必自己处理缩放的困难部分，您只需定义演员之间的交互，Erlang VM 将平衡其余部分（一般来说）。

因此，我想说使用 Erlang 最大的好处不是性能（尽管 Erlang 中有些东西更轻量级和优化），而是模型的简化和并发编程变得多么自然。

# c - 我自己的 strcat 函数使用 C 错误

> ID：12170591
> 
> 赞同：1
> 
> 时间：2012-08-29T03:46:52.777
> 
> 标签：c, string, strcat

我基本上是在用 C 编写我自己的字符串函数。

我一直在尝试`strcat`使用指针来执行该函数，但似乎无法理解我是否应该使用`malloc`或将其留给堆来分配内存。

```
char *my_strcat(const char *s1, const char *s2)
{

    const unsigned char *p1 = (const unsigned char *)s1;
    const unsigned char *p2 = (const unsigned char *)s2;

    unsigned char *string;
        //string = malloc(strlen(s1) + strlen(s2) + 1);
    while (*p1 != '\0')
{
        *string = *p1;
        string++;
        p1++;

        if(*p1 == '\0')
        {
            while(*p2 != '\0')
            {
                *string = *p2;
                string++;
                p2++;
            }
        }
    }
    return (char *)string;  
} 
```

有关更有效地执行此任务或我做错的事情的任何提示都会很棒！

干杯

**编辑**

好的，所以我得到了一个可行的解决方案，但只是想知道在我使用 malloc 之后我应该在哪里释放（）它？

```
char *my_strcat(const char *s1, const char *s2)
{

    const unsigned char *p1 = (const unsigned char *)s1;
    const unsigned char *p2 = (const unsigned char *)s2;

    char *string = malloc(sizeof(char *));
    char *res = string;

    while (*p1 != '\0')
{
        *string = *p1;
        string++;
        p1++;
    }
    while (*p2 != '\0')
    {
        *string = *p2;
        string++;
        p2++;
}
    *string = '\0'; 

    return (char *)res; 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T03:53:14.653

首先，我假设分配被错误地注释掉了。

*   您需要保存分配的指针并返回它。否则，您将返回一个指针`string`，它指向连接结果的*末尾*
*   您没有终止结果字符串；你需要添加`*string = '\0'`
*   您应该将第二个循环移到第一个循环的外部，并删除`if`它周围的条件：如果第一个循环已经终止，您知道`*p1`指向`\0`

* * *

```
char *string = malloc(strlen(s1) + strlen(s2) + 1);
char *res = string;
for (; *p1 ; *string++ = *p1++);
for (; *p2 ; *string++ = *p2++);
*string = '\0';
return res; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T03:51:20.893

strcat 不分配任何内存，所以如果你想完成同样的事情，那么你不需要使用 malloc。

```
char* strcat(char* destination,char* source) {
 int c = 0;
 int sc;

 while(destination[c] != 0) {  c++; }

 for(sc = 0;sc < strlen(source);sc++) {
  destination[sc+c] = source[sc];
 }

 destination[sc+c] = 0;

 return destination;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-12T16:40:16.390

这对我有用。

```
char* my_strcat(char* a,char* b)
{
        int i,j;

        for(i=0;a[i];i++);
        for(j=0;b[j];j++,i++)
         a[i]=b[j];
        a[i]='\0';

} 
```

# web - 主页未显示为谷歌搜索中的第一个词

> ID：12170594
> 
> 赞同：0
> 
> 时间：2012-08-29T03:47:06.350
> 
> 标签：web

我们已经在 Google Analytics 中启用了我们的网站，并且我们还在我们的 jsp 文件中使用了元标记。

我们的网站主页未显示为 Google 中的第一个搜索词，并且显示了一些子页面。

我们怎样才能让我们的主页显示呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T03:53:49.597

使用站点地图。

您可以在此处找到更多信息：[Sitemaps.org](http://www.sitemaps.org/protocol.html)。

在站点地图中，您可以设置每个页面的优先级，因此您的主页将显示在其他页面之上。

但是请记住，您的主页上还必须有*实际的相关内容*，才能显示在其他内容之上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-02T17:23:36.280

他们可以有多种原因。正如你所说，只有主页没有显示。然后最有可能出现的问题是它没有被索引。

另一个原因可能是您的受密码保护

或者

您的网页有“无索引”标签

# seo - 用于 SEO 目的的内部链接的相对/绝对路径

> ID：12170595
> 
> 赞同：1
> 
> 时间：2012-08-29T03:47:18.940
> 
> 标签：seo, internal-link

1.  是否可以出于 SEO 目的执行以下操作：`<a href="index.php">home</a>`，还是我需要这样做：`<a href="www.yoursite/index.php">home</a>`？
2.  在我的网站的每个页面中，导航中的链接是否算作“内部链接”，为什么我无法在谷歌站长的“内部链接”中获取内部链接列表？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T11:11:29.323

绝对路径和相对路径之间没有区别，因为搜索引擎爬虫将以相同的方式处理两者。

但; 当任何人复制您作为绝对路径提供的链接时，他们可以轻松获取整个链接，并可以在他们的网站上分享确切的 URL。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T03:54:32.757

简而言之，您不需要使用绝对链接来针对搜索引擎进行优化。搜索引擎爬虫将能够找出您网站的结构。使用绝对路径实际上是有益的，因为如果您需要或想要更改您的域，您将不必寻找和检查整个站点的代码库来解决它。

虽然它不会产生很大的不同，但如果你真的担心它，你可以在你的 HTML 头中使用 canonical 标记。

```
<html>
<head>
<title>This is my site</title>
<link rel="canonical" href="http://www.mydomain.org/mysite" />
</head>
<body>
</body>
</html> 
```

*   [关于规范链接最佳做法的 Google 网站管理员博客文章](http://googlewebmastercentral.blogspot.com/2009/02/specify-your-canonical.html)
*   [规范链接标签的维基百科描述](http://en.wikipedia.org/wiki/Canonical_link_element)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T07:10:17.227

在这里，我的建议是使用“/”或“www.mysite.com”而不是附加 index.php。让一切都解析到您的根域。如果根域名和 index.php 都存在，可能会造成重复内容问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-01T00:30:52.113

就 SEO 而言，使用绝对与相对进行内部链接没有区别。但是，如果您使用绝对域名，您可能会在分析中看到您自己的域显示为引荐来源网址。

如果您想使用相对路径，`<base href="">`请在您的脑海中使用...请参阅[http://www.w3schools.com/tags/tag_base.asp](http://www.w3schools.com/tags/tag_base.asp)

`rel="canonical"`以下是有关SEO 和分析的其他一些相关建议：

**1)** Google 在索引页面时会忽略`#`URL 中的所有内容，因此请使用 # 而不是`?`... 然后，出于 SEO 目的，Google 将考虑：

`http://example.com/pagename.html` 并 `http://example.com/pagename.html#var1=FOO&var2=BAR`成为同一页。

**2）**您还可以在页面头部设置：

`<link rel="canonical" href="http://www.example.com/pagename.html" />`

见：http: [//googlewebmastercentral.blogspot.com/2009/02/specify-your-canonical.html](http://googlewebmastercentral.blogspot.com/2009/02/specify-your-canonical.html)

**3）**就报告而言，在谷歌分析中，他们支持使用`#`查询字符串分隔符，请参阅：[https ://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiCampaignTracking#_gat.GA_Tracker_._setAllowAnchor](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiCampaignTracking#_gat.GA_Tracker_._setAllowAnchor)

**4）**在您的谷歌分析配置文件中，您还可以将其设置为排除查询字符串参数。请参阅： http: [//support.google.com/analytics/bin/answer.py ?hl=zh-CN&answer=1010249](http://support.google.com/analytics/bin/answer.py?hl=en-GB&answer=1010249)

**我更喜欢方法 #1**。我所有的营销活动跟踪 URL 和所有内部链接和逻辑都用作查询字符串分隔符，因此我可以将我的链接汁最大化到我在**.htaccess**`#`中设置的规范域（我的规范中没有 www 子域）：

 **```
Options +FollowSymlinks
RewriteEngine On
RewriteCond %{HTTP_HOST} ^www.example.com$ [NC]
RewriteRule ^(.*)$ http://example.com/$1 [R=301,L] 
```**

# macos - STTY 可能已被删除？

> ID：12170602
> 
> 赞同：0
> 
> 时间：2012-08-29T03:48:48.163
> 
> 标签：macos, terminal, stty

我正在安装 ruby​​/rails/gem 和 homebrew 并感到沮丧。我想我删除了 stty 文件夹。无论如何，我能做什么？这似乎从未在互联网上发生过。

运行 stty 返回命令未找到...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T04:30:01.290

该`stty`命令不能轻易删除；您必须以管理员权限运行。它应该位于`/bin/stty`（尝试`ls /bin/stty`确保它仍然存在）。

我的猜测是您更改了 shell 的`$PATH`变量（这是一个以冒号分隔的目录列表，当您仅按名称运行命令时，shell 会搜索这些目录）。

试试这个看看你当前的路径：`echo $PATH`。

然后确保它`:/bin`出现在该值的某个地方，例如

```
export PATH=${PATH}:/bin 
```

要永久修复此问题，请确保`PATH`已在 shell 启动文件中进行设置，例如`.bashrc`在您的主目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T23:19:04.713

我从朋友的mac上复制了stty。它似乎工作正常。我已经运行了一些命令，但还没有问题。

# python - 在 Python 中进行大型矩阵计算的最佳模块？

> ID：12170604
> 
> 赞同：4
> 
> 时间：2012-08-29T03:48:53.623
> 
> 标签：python, matrix

我正在开发一个简单的推荐系统并尝试进行一些计算，如 SVD、RBM 等。

为了更有说服力，我将使用 Movielens 或 Netflix 数据集来评估系统的性能。但是，这两个数据集都拥有超过 100 万的用户和超过 1 万条商品，不可能将所有数据都放入内存中。我必须使用一些特定的模块来处理这么大的矩阵。

我知道 SciPy 中有一些工具可以处理这个问题，[python-recsys](https://github.com/ocelma/python-recsys)[使用](http://csc.media.mit.edu/docs/divisi2/)的divisi2似乎也是一个不错的选择。或者也许有一些我不知道的更好的工具？

我应该使用哪个模块？有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T03:54:04.520

我会建议[SciPy](http://www.scipy.org/)，特别是[Sparse](http://docs.scipy.org/doc/scipy/reference/sparse.html)。正如 Dougal 所指出的，[Numpy](http://numpy.scipy.org/)不适合这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T07:10:46.527

我找到了另一个名为螃蟹的解决方案，我尝试找到并比较其中一些。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-29T04:32:16.787

如果您只是将数据放入内存中，请使用 64 位 python 和 64 位 numpy。如果你没有足够的物理内存，你可以在操作系统级别增加虚拟内存。虚拟内存的大小仅受硬盘大小的限制。然而，计算速度是另一回事！

# sql - Postgres 过滤，以及“where in Array”子句的默认标记，它将“where”变成重言式

> ID：12170605
> 
> 赞同：1
> 
> 时间：2012-08-29T03:49:00.843
> 
> 标签：sql, postgresql, postgresql-9.1

我正在尝试编写一个函数，根据提供的参数有条件地删除数据。我希望能够使用默认参数，这样如果没有明确提供它们，该函数就不会进行任何过滤。两种过滤类型中的第一种是时间范围，第二种是主键数组。

对于时间范围，我可以使用默认的哨兵变量`+/- infinity`。这匹配所有数据，实质​​上禁用过滤器。这些由 postgres 提供。有什么东西（某种哨兵）可以用来禁用基于数组的过滤器吗？

具体来说，我会向函数传递一个整数数组，但我想默认禁用此过滤器（即，当我不传递数组时）。显而易见的选择是将数组设置为空数组作为默认参数。但是，`where in`空数组将不匹配任何内容（假设空数组甚至是有效的 plpgql）。所以显而易见的选择是有一个`IF`语句，或者动态 SQL。但是知道 postgres 必须有一些我可能错过的技巧或语法。

**编辑：**

我最初的计划是编写一个布尔 UDF 来模拟我想要的行为。类似的东西：

```
CREATE OR REPLACE FUNCTION filter_category(
    category_array  INTEGER[],
    current_category INTEGER
)
RETURNS 
BOOLEAN AS $$
BEGIN
    IF category_array = '{}' THEN
        RETURN TRUE;
    ELSE
        --  if in set return true, else false. 
        RETURN FALSE;
    END IF;
END;
$$ LANGUAGE plpgsql; 
```

但是，经过对此事的进一步思考，我认为查询将不得不变得更加复杂。一个`where in array`子句或上面的函数可能不会很有效。因此，要最终使用可能存在的任何索引，我必须取消嵌套主键数组并执行连接。

而且我应该只在数组不为空时才这样做。所以查询将需要至少一个 `IF ... ELSE... END IF' 语句。如果我需要进一步过滤，我可能必须实现中间本地数据集。**我仍然对任何建议感兴趣：D**

**编辑2：**

我的动态查询如下所示：

```
CREATE OR REPLACE FUNCTION get_paginated_search_results(
    forum_id_ INTEGER,
    query_    CHARACTER VARYING,
    from_date_ TIMESTAMP WITHOUT TIME ZONE DEFAULT NULL,
    to_date_ TIMESTAMP WITHOUT TIME ZONE DEFAULT NULL,
    in_categories_ INTEGER[] DEFAULT '{}')
RETURNS SETOF post_result_entry AS $$
DECLARE
    join_string CHARACTER VARYING := ' ';
    from_where_date CHARACTER VARYING := ' ';
    to_where_date CHARACTER VARYING := ' ';
    query_string_ CHARACTER VARYING := ' ';
BEGIN
    IF NOT from_date_ IS NULL THEN
        from_where_date := ' AND fp.posted_at > ''' || from_date_ || '''';
    END IF;

    IF NOT to_date_ IS NULL THEN
        to_where_date := ' AND fp.posted_at < ''' || to_date_ || '''';
    END IF;

    CREATE LOCAL TEMP TABLE un_cat(id) ON COMMIT DROP AS (select * from unnest(in_categories_)) ;

    if in_categories_ != '{}' THEN
        join_string := ' INNER JOIN forum_topics ft ON fp.topic_id = ft.id ' ||
        ' INNER JOIN un_cat uc ON uc.id = ft.category_id ' ;
    END IF;

    query_string_ := '
    SELECT index,posted_at,post_text,name,join_date,quotes
    FROM forum_posts fp
    INNER JOIN forum_user fu ON
    fu.forum_id = fp.forum_id AND fu.id = fp.user_id' ||
        join_string
    ||
    'WHERE fu.forum_id = ' || forum_id_ || ' AND
    to_tsvector(''english'',fp.post_text) @@ to_tsquery(''english'','''|| query_||''')' || 
        from_where_date || 
        to_where_date
    ||';';

    RAISE NOTICE '%', query_string_ ;

    RETURN QUERY
    EXECUTE query_string_;
END;
$$ LANGUAGE plpgsql; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T04:39:22.120

您可以使用一个空数组并将其滚动到您的 WHERE 子句中，如下所示：

```
where ...
  and ($1 = array[]::int[] or id = any ($1)) 
```

`$1`你的`int[]`参数在哪里。或者您可以使用 NULL 并以相同的方式执行此操作：

```
where ...
  and ($1 is null or id = any ($1)) 
```

不过，我会检查“介于 -infinity 和 +infinity 之间”查询的 EXPLAIN 输出，优化器可能不会将其识别为重言式（假设您没有 NULL，因此它确实是重言式）所以您可以在你手上进行毫无意义的表格扫描。动态 SQL 或一堆丑陋的 IF 可能会更好地为您服务。

# vim - 如何在 vim 函数中设置数值变量

> ID：12170606
> 
> 赞同：11
> 
> 时间：2012-08-29T03:49:07.613
> 
> 标签：vim

我正在尝试编写一个函数，该函数调用`setlocal`以将一些变量设置为我传入的参数。但我收到了错误`Number required after =: tabstop=...`

```
function! MyFunction(param)
    setlocal tabstop=param
    setlocal tabstop=a:param
endfunction 
```

两条线都会失败。我缺少某种变量插值吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-29T04:08:42.010

您需要将选项定义为`&option`变量。例如：

```
fun! MyFun(param)
   let &l:tabstop = a:param
endfun 
```

见`:help let-&`。列`&l:`在该标记下方一点，表明它相当于`setlocal`. 基本上，当您想为表达式设置选项而不是定义的值时，您需要使用`let &option=`而不是`set option=`. 使用`let &l:option=`而不是`setlocal option=`. 还`&g:option`可以全局设置选项。

# r - 从 R 中的 example() 获取函数

> ID：12170608
> 
> 赞同：1
> 
> 时间：2012-08-29T03:49:48.307
> 
> 标签：r, r-markdown, knitr

使用时，`pairs()`我喜欢使用建议的函数`panel.cor`和`panel.hist`（在示例中建议）来消除重复的上三角空间或下三角空间并提供额外信息。

我想使用类似的东西来获取这些功能

```
source(example(pairs, ask = F, echo = F)) 
```

并且没有得到任何输出（包括：）`Error in readLines(file, warn = FALSE) : 'con' is not a connection`，*并且*没有打印示例图。这可能吗？

正如我旁注的那样，我不想打印这些图的原因是我想在**R** Markdown 文件中使用它，而不必查看`example(pairs)`我的文档中的图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T04:02:17.693

您可以运行一个不包括在内的块，并且不保留数字。这些函数将在代码运行时可用，但输出不包含在文档中。

```
```{r example_pairs, include = F, fig.keep = 'none'}
example(pairs)
```

```{r test}
exists('panel.cor')
``` 
```

输出看起来像

```
存在（“panel.cor”）

```

```
## [1] TRUE 
```

`panel.cor`存在于全球环境中——你可以使用它。

## 编辑替代

您也可以使用`give.lines`参数并自己保存源代码

```
.ex <- example(pairs, give.lines = T)
# find the code in question (look for assignment / scope delimiters)
which(grepl(.ex, pattern = "(panel.hist <-)|(panel.cor <-)|[{}]"))
##[1] 18 19 26 33 34 42

cat(.ex[c(18:26, 33:42)], sep = "\n")
panel.hist <- function(x, ...)
{
    usr <- par("usr"); on.exit(par(usr))
    par(usr = c(usr[1:2], 0, 1.5) )
    h <- hist(x, plot = FALSE)
    breaks <- h$breaks; nB <- length(breaks)
    y <- h$counts; y <- y/max(y)
    rect(breaks[-nB], 0, breaks[-1], y, col="cyan", ...)
}
panel.cor <- function(x, y, digits=2, prefix="", cex.cor, ...)
{
    usr <- par("usr"); on.exit(par(usr))
    par(usr = c(0, 1, 0, 1))
    r <- abs(cor(x, y))
    txt <- format(c(r, 0.123456789), digits=digits)[1]
    txt <- paste(prefix, txt, sep="")
    if(missing(cex.cor)) cex.cor <- 0.8/strwidth(txt)
    text(0.5, 0.5, txt, cex = cex.cor * r)
} 
```

# node.js - expressjs 查看变量

> ID：12170613
> 
> 赞同：1
> 
> 时间：2012-08-29T03:50:21.683
> 
> 标签：node.js, express

我正在努力解决这个问题，我相信它并不复杂。出于某种原因，我从这段代码中得到了以下错误：

```
/*
 * GET home page.
 */

exports.index = function(req, res){
    exec('ls -l ~/Sites/branches | grep "^d"', function (error, stdout, stderr) {
        // var lines = stdout.split("\n");
        // var folder;
        // lines.forEach(function(line){
        //     folder = line.match(/([^\s]+)$/igm);
        //     if (folder!='null') {
        //         sys.puts(folder);
        //     }
        // });
        res.render('index', {
            title: 'Express',
            lines: 'hi'
        });
    });

}; 
```

我已经注释掉了我打算从中获取数据的行`lines`，并简单地设置`lines`为一个字符串。无论如何，它都会给我下面的错误。

```
Express
500 ReferenceError: /Users/luisgomez/Desktop/mashlocaldevman/views/index.ejs:10 8| <h1><%= title %></h1> 9| <p>Welcome to <%= title %></p> >> 10| <p>Lines: <%= lines.length %></p> 11| </body> 12| </html> 13| lines is not defined
<%= title %>
Welcome to <%= title %>

Lines: <%= lines.length %>

lines is not defined
at eval (eval at (/Users/luisgomez/Desktop/mashlocaldevman/node_modules/ejs/lib/ejs.js:226:12))
at exports.compile (/Users/luisgomez/Desktop/mashlocaldevman/node_modules/ejs/lib/ejs.js:228:15)
at Object.exports.render (/Users/luisgomez/Desktop/mashlocaldevman/node_modules/ejs/lib/ejs.js:266:13)
at View.exports.renderFile [as engine] (/Users/luisgomez/Desktop/mashlocaldevman/node_modules/ejs/lib/ejs.js:292:22)
at View.render (/Users/luisgomez/Desktop/mashlocaldevman/node_modules/express/lib/view.js:75:8)
at Function.app.render (/Users/luisgomez/Desktop/mashlocaldevman/node_modules/express/lib/application.js:504:10)
at ServerResponse.res.render (/Users/luisgomez/Desktop/mashlocaldevman/node_modules/express/lib/response.js:677:7)
at exports.index (/Users/luisgomez/Desktop/mashlocaldevman/routes/index.js:7:7)
at callbacks (/Users/luisgomez/Desktop/mashlocaldevman/node_modules/express/lib/router/index.js:165:11)
at param (/Users/luisgomez/Desktop/mashlocaldevman/node_modules/express/lib/router/index.js:139:11) 
```

我正在为视图和最新版本的 express 使用简单的 HTML。如果我`'lines`从渲染调用中删除变量，视图渲染得很好。

有任何想法吗？

谢谢，

路易斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T03:56:38.537

如果您注释掉行，则不会定义行，因此无法评估长度：

```
Lines: <%= lines.length %> 
```

如果您取消注释该代码但由于某种原因 stdout 为空（是否填充了 stderr？），则也无法定义行。

您是否尝试过检查 error 或 stderr !== null 并将其注销？

就像是：

```
function (error, stdout, stderr) {
    console.log('stdout: ' + stdout);
    console.log('stderr: ' + stderr);
    if (error !== null) {
      console.log('exec error: ' + error);
    }
} 
```

# java - websphere应用服务器安装文件中的jar文件namingserver.jar在哪里？

> ID：12170617
> 
> 赞同：1
> 
> 时间：2012-08-29T03:50:38.677
> 
> 标签：java, jakarta-ee, websphere, websphere-7

有谁知道jar文件namingserver.jar在哪里可以找到？我搜索了 websphere 应用程序服务器安装，但一无所获。此外，我也尝试从互联网上获得一个，但也没有运气。

WAS 版本：7.0 ND

我需要让以下代码工作。

```
Hashtable env = new Hashtable();
env.put(Context.INITIAL_CONTEXT_FACTORY, 
        "com.ibm.websphere.naming.WsnInitialContextFactory");
env.put(Context.PROVIDER_URL,"iiop://localhost:2809");
InitialContext context = new InitialContext(env); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T03:13:57.427

我想你真正想知道的是，

在哪个 JAR 中找到`com.ibm.websphere.naming.WsnInitialContextFactory`和/或`javax.naming.InitialContext`？

在服务器上，前者位于安装根目录`com.ibm.ws.runtime.jar`的子目录内。`/plugin`后者是 JDK 的一部分。

如果您打算将此代码作为瘦 EJB 客户端运行，那么您需要`com.ibm.ws.ejb.thinclient_7.0.0.jar`在`runtimes`安装根目录的子目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T20:29:48.310

要执行该代码，您将需要 EJB 瘦客户端。`runtimes`您可以在 WAS 安装目录中找到相应的 JAR 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T13:39:14.453

您是专门寻找那个类而不是那个罐子吗？你确定那个类在那个罐子里吗？试试[这个 JSP 来找出哪个 jar 提供了这个类](https://www.ibm.com/developerworks/mydeveloperworks/blogs/Dougclectica/entry/revive_finding_a_java_class_in_your_servlet_container2)。

# jquery - WordPress 和 jQuery：我就是无法让 jScrollPane 工作！（或者，我就是无法让 jQuery 工作！）

> ID：12170619
> 
> 赞同：-1
> 
> 时间：2012-08-29T03:51:07.577
> 
> 标签：jquery, wordpress, jscrollpane

我已经使用 WordPress 多年了，通过我大量的阅读，我从来没有能够让任何自定义 jQuery 脚本正常工作。

今天是 jScrollPane：http: [//jscrollpane.kelvinluck.com/](http://jscrollpane.kelvinluck.com/)。为像素完美的网页设计师制作的最好的脚本之一，他们必须让一切看起来都恰到好处。

我正在使用最新版本的 WordPress (3.4.1) 和 Whiteboard Framework（主题）。我没有要链接的站点，因为我正在使用 XAMPP 离线构建站点。

这是我所知道的：

在我的 header.php 中，在我的标签内和 wp_head() 下方，我有以下内容：

```
<script type="text/javascript" src="/js/jquery.jscrollpane.min"></script>
<script type="text/javascript" src="/js/jquery.mousewheel"></script>
<link rel="stylesheet" href="/css/jquery.jscrollpane.css" /> 
```

我在我的主题的根目录中有一个名为“css”的目录中的 jquery.jscrollpane.css，在我的主题的根目录中的一个名为“js”的目录中有 jquery.jscrollpane.min.js 和 jquery.mousewheel.js。

在我的footer.php 的正上方，我有：

```
<script type="text/javascript">
jQuery(function()
{
jQuery('#main').jScrollPane();
});
</script> 
```

目前我的functions.php 中没有任何内容。

我对 jQuery 一无所知。什么都没有，除了我读过的关于 WordPress 和 no_conflict 模式的各种花絮，注册和排队脚本，以及其他无数次重复的事情，但无论我尝试什么似乎都对我没有帮助......

无数的阅读网站——几十个。无数小时...... WordPress 应该在后端有一些东西来让 jQuery 更容易。我对这一切感到非常厌烦。自从我开始试图弄清楚这件事以来，我没有太多吃的东西或太多的休息，这无济于事......

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

**更新：**我尝试了 martinCzerwi 所说的，将该代码添加到我的 functions.php 中，并从我的 . 我在 Firebug 的 Web Developer 中收到一条错误消息：

```
"Error: TypeError: jQuery("#main").jScrollPane is not a function" 
```

这与我网站的 footer.php 有关，其中包括：

```
<script type="text/javascript">
jQuery(function()
{
    jQuery('#main').jScrollPane('refresh');
});
</script> 
```

我只知道一点PHP；不过，还不足以帮助我。

* * *

我按照martinCzerwi 所说的做了。我将它添加到我的 functions.php 并删除了我的 . 在将 URL 修复到我在 functions.php 中的文件之后，它就起作用了。我终于让 jQuery 在 WordPress 网站上工作了！

非常感谢所有人，尤其是 martinCzerwi！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:23:26.087

使用我推荐的 WordPress 给定函数，而不是使用具有相对路径的脚本标签，您将其包含在您的`functions.php`:

```
function theme_enqueue_scripts_and_styles () {
  // Enqueue scripts
  wp_enqueue_script('jquery-mwheel', get_bloginfo('template_url').'/js/jquery.mousewheel.js', array('jquery'));
  wp_enqueue_script('jquery-scrollpane', get_bloginfo('template_url').'/js/jquery.jscrollpane.min.js', array('jquery', 'jquery-mwheel'));

  // Enqueue styles
  wp_enqueue_style('jquery-scrollpane-style', get_bloginfo('template_url').'/css/jquery.jscrollpane.css');
}

add_action('wp_enqueue_scripts', 'theme_enqueue_scripts_and_styles'); 
```

注册此功能后，您可以从`<head>`. 只要您在-Tag`wp_head();`之前调用，该函数就会自动包含您的样式和脚本，甚至动态包含 jQuery `</head>`。它使用绝对路径，因为当您使用与默认设置不同的永久链接设置时，相对路径会中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:35:07.913

## 在我看来，您没有正确链接**或者**您没有包含 jQuery 本身。

* * *

如果您的网站结构是这样的，那将是合乎逻辑的：

```
root\wp-content\themes\your-theme 
```

你会在那里放置一个地图，你可以在其中放置你的 JavaScript，还可能还有一个用于附加 CSS 的单独地图，如下所示：

```
root\wp-content\themes\your-theme\js
root\wp-content\themes\your-theme\css 
```

然后，您想要链接到这些，将它（就像您所做的那样）放在 header.php 中可能听起来合乎逻辑：

```
<script type="text/javascript" src="/js/jquery.jscrollpane.min"></script>
<script type="text/javascript" src="/js/jquery.mousewheel"></script>
<link rel="stylesheet" href="/css/jquery.jscrollpane.css" /> 
```

Wordpress 具有获取样式表目录的功能。你可以用那个！要回显此目录，请使用以下命令：

```
<?php echo get_stylesheet_directory_uri(); ?> 
```

因此，上述链接将导致：

```
<script type="text/javascript" src="<?php echo get_stylesheet_directory_uri(); ?>/js/jquery.jscrollpane.min"></script>

<script type="text/javascript" src="<?php echo get_stylesheet_directory_uri(); ?>/js/jquery.mousewheel"></script>

<link rel="stylesheet" href="<?php echo get_stylesheet_directory_uri(); ?>/css/jquery.jscrollpane.css" /> 
```

如果您使用的主题不包含 jQuery 本身，请添加这行代码，但请确保它在任何其他 JavaScript 代码之前加载（只是为了确保您没有丢失任何使用 jQuery 的脚本：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script> 
```

通常建议先加载样式表，然后再加载脚本。所以一切都将导致：

```
<link rel="stylesheet" href="<?php echo get_stylesheet_directory_uri(); ?>/css/jquery.jscrollpane.css" />
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script type="text/javascript" src="<?php echo get_stylesheet_directory_uri(); ?>/js/jquery.jscrollpane.min"></script>
<script type="text/javascript" src="<?php echo get_stylesheet_directory_uri(); ?>/js/jquery.mousewheel"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T08:14:42.733

您可以将它添加`functions.php`到 dereigster 任何 jQuery 脚本并拥有自己的.. 但这不会对抗来自编码不佳的插件的任何硬编码包含。

```
function my_scripts_method() {
    wp_deregister_script( 'jquery' );
    wp_register_script( 'jquery', 'http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js');
    wp_enqueue_script( 'jquery' );
}    

add_action('wp_enqueue_scripts', 'my_scripts_method'); 
```

或者，您可以使用 jQuery 冲突模式，并像这样使用它：

```
<script type="text/javascript">
var k = jQuery.noConflict();
k(function() {
      k('#main').jScrollPane();
   });
</script> 
```

`<? wp_footer(); ?>`如果任何插件依赖于包含的库，请确保您的页脚中有。

# eclipse - emma_ant.properties 的内容应该是什么？

> ID：12170626
> 
> 赞同：0
> 
> 时间：2012-08-29T03:53:08.053
> 
> 标签：eclipse, ant, properties, emma

我一直在关注本教程[3\. Getting Started (ANT)](http://emma.sourceforge.net/userguide/ar01s03.html)，它说`<taskdef resource="emma_ant.properties" classpathref="emma.lib" />`但没有对`emma_ant.properties`. 有任何想法吗？

[3.4](http://emma.sourceforge.net/faq.html)等其他网站。[如何更改 EMMA 属性默认设置？](http://emma.sourceforge.net/faq.html)也留下一些不足之处（并且基于命令提示符而不是数字文件）。我找到了另一个网站[Using EMMA with ANT for JUnit test coverage reporting](http://wiki.metawerx.net/wiki/UsingEMMAWithANTForJUnitTestCoverageReporting)，但它再次将属性文件留给想象（甚至不提供示例文件）。

关于如何操作 emma_ant.properties 为 ANT 加载和自定义任务的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T04:07:55.277

> 但没有对 emma_ant.properties 的内容提供任何参考。有任何想法吗？

检查您在指定路径中放置的`emma.jar`&`emma_ant.jar`您会发现`emma_ant.properties`

> 关于如何操作 emma_ant.properties 为 ANT 加载和自定义任务的任何想法？

您无需操作属性文件即可使用这些任务。

要使用 emma 任务，您应该

```
<!-- directory that contains emma.jar and emma_ant.jar -->
<property name="emma.dir" value="${YOUR_BASE_DIR}/lib/emma" />

<!-- Set emma.lib to refer to the list of EMMA jar files -->
<path id="emma.lib">
    <fileset dir="${emma.dir}">
        <include name="*.jar" />
    </fileset>
</path> 
```

和

```
<!-- Load <emma> custom tasks so that they can be used in ANT -->
<taskdef resource="emma_ant.properties" classpathref="emma.lib" /> 
```

你应该能够使用 emma 任务。

以下是`emma_ant.properties`里面的内容`emma.jar`

```
# -------------------------------------------------------------

emma:       com.vladium.emma.emmaTask
emmajava:   com.vladium.emma.emmajavaTask

# -------------------------------------------------------------
# end of file 
```

如果对您有帮助，还请查看[Emma Property Summary](http://emma.sourceforge.net/reference/ch03s02.html) ...

# java - Json解码错误

> ID：12170629
> 
> 赞同：0
> 
> 时间：2012-08-29T03:53:17.730
> 
> 标签：java, json

我的代码解析字符串是：

```
JSONObject json = (JSONObject) new JSONParser().parse("{\"id\":\"3578273\",\"username\":\"thangdayhpv\"}");
id = (String) json.get("id");
username = (String) json.get("username"); 
```

此代码运行成功。

但是这个：

```
data = "{\"id\":\"3578273\",\"username\":\"thangdayhpv\"}";
JSONObject json = (JSONObject) new JSONParser().parse(data);
id = (String) json.get("id");
username = (String) json.get("username"); 
```

不起作用。错误是：

> 线程“主”java.lang.ClassCastException 中的异常：java.lang.String 无法转换为 org.json.simple.JSONObject
> 
> 在 bg.mappingmingid.userinfo.GetUserInfo$DataFormat.formatJson(GetUserInfo.java:82)
> 
> 在 bg.mappingmingid.userinfo.GetUserInfo.main(GetUserInfo.java:39)

# javascript - 使用 javascript 下拉菜单更改表格单元格的颜色

> ID：12170630
> 
> 赞同：0
> 
> 时间：2012-08-29T03:53:24.373
> 
> 标签：javascript, drop-down-menu, html-table, background-color

我需要一些帮助来创建一个更改表格一个单元格的背景颜色的下拉菜单。我在下面的代码有效，但仅适用于预定义选项列表。下面列出的现有代码：

```
<form name="bgcolorForm">Try it now: 
<select onChange="if(this.selectedIndex!=0)
document.getElementById('mycell').bgColor=this.options[this.selectedIndex].value">
<option value="choose">set background color    
<option value="FFFFCC">light yellow
<option value="CCFFFF">light blue
<option value="CCFFCC">light green
<option value="CCCCCC">gray
<option value="FFFFFF">white
 </select></form>
 <table>
     <tr>
         <td id = "mycell">Cell One</td>
         <td>Cell Two</td>
     </tr>
 </table> 
```

我想修改此代码，使其引用现有列表中包含的值列表（HTML 颜色名称）。例如，我没有列出选项值，而是：

```
<select name="bg_color" id="bg_color" onchange=...> 
```

我在编写代码的“onchange”部分时遇到了麻烦。我认为我需要创建一个变量才能做到这一点......我想我需要进入 .text 部分，因为我的下拉列表包含颜色名称，如“红色、蓝色、绿色等”。以下是我试图实现这一目标的方法。

```
<script type="text/javascript">
var e = document.getElementById("bg_color");
var newcolor = e.options[e.selectedIndex].text; 
</script> 
```

我在正确的轨道上吗？请让我知道您将如何完成此任务。

另外，我很好奇我是否想将它应用到我必须进行哪些额外更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T04:23:51.433

你忘了把#换成颜色=>#FFFFCC

试试看：

```
<option value="#FFFFCC">light yellow
<option value="#CCFFFF">light blue
<option value="#CCFFCC">light green
<option value="#CCCCCC">gray
<option value="#FFFFFF">white 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T04:29:06.953

你可以使用 jquery 来简化你的代码，它也会避免你很多其他跨浏览器的 javascript 问题。我在这里使用您的表格整理了一个样本。

[http://jsfiddle.net/M8U7D/](http://jsfiddle.net/M8U7D/)

# spring - 在具有共享服务的单个应用程序中使用 Apache cxf 和 spring mvc

> ID：12170631
> 
> 赞同：6
> 
> 时间：2012-08-29T03:53:25.063
> 
> 标签：spring, apache, hibernate, model-view-controller, cxf

我目前正在开发一个基于 Spring MVC 的项目，它只是一个使用 Spring MVC 模板的标准项目。所以我有 web.xml 和 servlet-context.xml。

我正在努力将 Apache cxf Web 服务添加到这个项目中，并遇到与现有 Spring MVC 共享服务的一些问题。

我最初的方法是尝试让 Web 服务正常工作，所以我的 web.xml 如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <!-- The definition of the Root Spring Container shared by all Servlets 
        and Filters -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/root-context.xml
        /WEB-INF/spring/jaxwsServlet/jaxwsServlet-context.xml
        </param-value>
    </context-param>

    <!-- Creates the Spring Container shared by all Servlets and Filters -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <!-- Process web service requests -->
    <servlet>
        <servlet-name>jaxws</servlet-name>
        <servlet-class>com.sun.xml.ws.transport.http.servlet.WSSpringServlet</servlet-class>
        <load-on-startup>2</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>jaxws</servlet-name>
        <url-pattern>/industryAspectWS</url-pattern>
    </servlet-mapping>

    <!-- Processes application requests -->
    <servlet>
        <servlet-name>appServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>appServlet</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

</web-app> 
```

和我的 jaxwsServlet-context.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:beans="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:ws="http://jax-ws.dev.java.net/spring/core"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:wss="http://jax-ws.dev.java.net/spring/servlet"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://jax-ws.dev.java.net/spring/core
        classpath:spring-jax-ws-core.xsd
        http://jax-ws.dev.java.net/spring/servlet
        classpath:spring-jax-ws-servlet.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.0.xsd"
>   
    <wss:binding url="/industryAspectWS">
        <wss:service>
            <ws:service bean="#industryAspectWS"/>
        </wss:service>
    </wss:binding>

    <!-- Web service methods -->
    <bean id="industryAspectWS" class="com.example.ws.IndustryAspectWS"></bean>

    <context:component-scan base-package="com.example" />

    <beans:import resource="../HibernateTransaction.xml" />

    <beans:import resource="../JaxbMarshaller.xml" />

</beans> 
```

我从 servlet-context.xml复制了***context:component-scan beans:import部分***

此配置工作正常，因为我能够启动服务器、调用 Web 服务并访问 servlet 和 jsp。**但是，我注意到，由于我在两个上下文 xml 文件中都引用了 hibernateTransaction.xml，所以有两个会话工厂。**

我想在 Apache cxf 和 Spring MVC 控制器之间共享所有服务（例如休眠），所以我尝试将设置放在 root-context.xml 中，但没有成功。我也尝试在网上搜索这个，但没有找到任何关于共享服务的完整示例。我们是否可以设置在两者之间共享服务？

=================================================

发布此消息后，我尝试了一些设置，并认为如果我将

```
<context:component-scan base-package="com.example" /> 
```

和

```
<tx:annotation-driven transaction-manager="txManagerExample" /> 
```

在 servlet-context.xml 和 jaxwsServlet-context.xml 中，它都能正常工作。所有其他设置都可以保留在共享的 root-context.xml 中

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T20:45:15.860

`WSSpringServlet`不是CXF。是地铁。我建议使用 CXF。在这种情况下，您将拥有一个`CXFServlet`，但随后您将在主 Spring 上下文中设置 CXF（由`ContextLoaderListener`.

它将按如下方式工作：您的主要上下文将包含所有共享 bean，包括 CXF。您的 Servlet 上下文将只有您的控制器。由于 servlet 上下文是主上下文的子上下文，因此您的控制器也可以访问主上下文中的所有内容。

请参阅[Embedding CXF inside of Spring 页面](http://cxf.apache.org/docs/embedding-cxf-inside-spring.html)、[CXF Servlet 传输页面](http://cxf.apache.org/docs/servlet-transport.html)，以及我对这个关于在 servlet 上下文和主上下文之间共享 bean[的问题的回答。](https://stackoverflow.com/questions/10339174/how-do-you-share-spring-beans-between-different-spring-contexts/10342499#10342499)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-19T23:41:58.540

感谢[https://stackoverflow.com/a/30758664/2615824](https://stackoverflow.com/a/30758664/2615824)：

两个调度程序（Spring MVC REST 控制器和 CXF JAX-WS）和一个 Spring 上下文，Java Config（没有 xml 的东西......）示例：

WebApplicationInitializer：

```
@Override
public void onStartup(ServletContext servletContext) throws ServletException {
    AnnotationConfigWebApplicationContext rootContext = new AnnotationConfigWebApplicationContext();
    rootContext.register(MyServiceConfig.class);
    servletContext.addListener(new ContextLoaderListener(rootContext));

    AnnotationConfigWebApplicationContext webContext = new AnnotationConfigWebApplicationContext();
    webContext.setParent(rootContext);

    ServletRegistration.Dynamic restDispatcher = servletContext.addServlet("REST dispatcher", new DispatcherServlet(webContext));
    restDispatcher.setLoadOnStartup(1);
    restDispatcher.addMapping("/api/*");

    ServletRegistration.Dynamic cxfDispatcher = servletContext.addServlet("CXF dispatcher", CXFServlet.class);
    cxfDispatcher.setLoadOnStartup(1);
    cxfDispatcher.addMapping("/services/*");
} 
```

配置：

```
@Configuration
@ComponentScan("my.root.package")
@ImportResource(value = {"classpath:META-INF/cxf/cxf.xml"})
@PropertySource("classpath:app-env.properties")
@PropertySource("classpath:app.properties")
@EnableWebMvc
public class MyServiceConfig {

    @Autowired
    private Bus cxfBus;

    @Autowired
    private CxfEndpointImpl cxfEndpoint;

    @Bean
    public Endpoint cxfService() {
        EndpointImpl endpoint = new EndpointImpl(cxfBus, cxfEndpoint);
        endpoint.setAddress("/CxfEndpointImpl");
        endpoint.setWsdlLocation("classpath:CxfService/CxfService-v1.0.wsdl");
        endpoint.publish();
        return endpoint;
    }

    @Bean
    public static PropertySourcesPlaceholderConfigurer placeHolderConfigurer() {
        return new PropertySourcesPlaceholderConfigurer();
    }
} 
```

示例 CXF 端点（首先是 WSDL）：

```
@Component
@WebService(
        endpointInterface = ".....v1_0.CxfServicePort",
        targetNamespace = "http://..../service/CxfService/v1_0",
        serviceName = "CxfService",
        portName = "CxfServicePort",
        wsdlLocation = "classpath:CxfService/CxfService-v1.0.wsdl")
@MTOM(enabled = true)
@SchemaValidation(type = SchemaValidationType.BOTH) 
@InInterceptors(classes = NoBinaryContentLoggingInInterceptor.class)
@OutInterceptors(classes = NoBinaryContentLoggingOutInterceptor.class)
@EndpointProperty(key = "ws-security.callback-handler", ref = "cxfEndpointSecurityHandler")
public class CxfEndpointImpl implements CxfServicePort {

    //...

} 
```

示例 REST 控制器：

```
@RestController
@RequestMapping(value = "/system", produces = MediaType.APPLICATION_JSON_VALUE)
public class RestController {

    //...
} 
```

CXF Endpoint部署地址：

```
ip:port/tomcat-context/services/CxfEndpointImpl?wsdl 
```

Spring REST Controller 部署地址：

```
ip:port/tomcat-context/api/system 
```

# android - Android 自定义 SimpleAdapter

> ID：12170632
> 
> 赞同：0
> 
> 时间：2012-08-29T03:53:29.607
> 
> 标签：android, android-listview, simpleadapter

我正在尝试使用此[示例](http://dustinbreese.blogspot.com/2009/12/creating-listview-with-alternating.html)为 ListView 创建一个 simpleAdapter。所以，我已经创建了所有内容，但是当我更改此行时

```
List<Movie> movies = getData2();
ListAdapter adapter = new MovieListAdapter(this, movies, android.R.layout.simple_list_item_2, new String[]{Movie.KEY_NAME, Movie.KEY_YEAR}, new int[]{android.R.id.text1, android.R.id.text2}); 
```

我收到了这个错误：

构造函数未定义

`MovieListAdapter(ImdbApiActivity, List<Movie>, int, String[], int[])`

这是相同的示例，我刚刚将 Cars 更改为 Movies。我知道这个例子是从 2009 年开始的，我的项目目标是 2.1。版本之间是否存在不兼容或有错误？

我的 simpleadapter 类如下所示：

```
public class MovieListAdapter extends SimpleAdapter {

    private List < Movie > movies;

    private int[] colors = new int[] {
        0x30ffffff, 0x30808080
    };

    @SuppressWarnings("unchecked")
    public MovieListAdapter(Context context, List <? extends Map < String, String >> movies,
        int resource,
        String[] from,
        int[] to) {
        super(context, movies, resource, from, to);
        this.movies = (List < Movie > ) movies;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = super.getView(position, convertView, parent);

        int colorPos = position % colors.length;
        view.setBackgroundColor(colors[colorPos]);
        return view;
    }
} 
```

我错过了一个错误吗？这是实现这一目标的“现代”方式？

**编辑：**更改上下文参数或列表均不适用于此示例。我的电影类扩展自 Hashmap。还有什么想法吗？谢谢！

```
import java.util.HashMap;

public class Movie extends HashMap {

    public String year;
    public String name;
    public static String KEY_YEAR = "year";
    public static String KEY_NAME = "name";

    public Movie(String name, String year) {
        this.year = year;
        this.name = name;
    }

    @Override
    public String get(Object k) {
        String key = (String) k;
        if (KEY_YEAR.equals(key))
            return year;
        else if (KEY_NAME.equals(key))
            return name;
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T04:28:42.557

您的自定义适配器类构造函数的参数似乎有问题。

您已将其定义为从活动`List<? extends Map<String, String>>`传递`List<Movies>`对象的电影。这就是它告诉您的原因，未定义此类构造函数。

尝试将构造函数的参数更改为`List<Movies> movies`，这将解决您的问题，我想！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T04:06:42.160

尝试改变

```
`ListAdapter adapter = new MovieListAdapter(this, movies, android.R.layout.simple_list_item_2, new String[]{Movie.KEY_NAME, Movie.KEY_YEAR}, new int[]{android.R.id.text1, android.R.id.text2});` 
```

至

```
`ListAdapter adapter = new MovieListAdapter(YourClass.this, movies, android.R.layout.simple_list_item_2, new String[]{Movie.KEY_NAME, Movie.KEY_YEAR}, new int[]{android.R.id.text1, android.R.id.text2});` 
```

因为`this`可能引用了不同的实例。

`YourClass.this`是对 的实例的引用`YourClass.class`。您还可以发送由返回的上下文[`getApplicationContext()`](http://developer.android.com/reference/android/content/Context.html#getApplicationContext%28%29)

# telerik - AJAX Telerik Scheduler 上下文菜单 - 自定义每个约会？

> ID：12170633
> 
> 赞同：1
> 
> 时间：2012-08-29T03:53:33.937
> 
> 标签：telerik, telerik-scheduler

谁能告诉我是否可以按预约自定义 Telerik Scheduler 上下文菜单？

例如，我有一个包含患者的调度程序控件。当患者到达时，当前显示上下文菜单并显示“到达”以启动计时器。

如果当前视图不是今天的视图，那么表明患者已经到达显然是没有意义的。

我看不到任何地方这样做。有没有人有任何经验？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T03:56:49.377

臭虫，我真的应该看得更远一点。

答案是创建另一个这样的上下文菜单：

```
<telerik:RadSchedulerContextMenu runat="server" ID="SchedulerAppointmentContextMenu">
                            <Items>
                                <telerik:RadMenuItem Text="Arrived" Value="1" ImageUrl="~/Images/add.png" ></telerik:RadMenuItem>
                                <telerik:RadMenuItem Text="Cancelled" Value="2" ImageUrl="~/Images/cancel.png"></telerik:RadMenuItem>
                                <telerik:RadMenuItem Text="Details" Value="3" ImageUrl="~/Images/telephone.png"></telerik:RadMenuItem>
                            </Items>
                        </telerik:RadSchedulerContextMenu>
                        <telerik:RadSchedulerContextMenu runat="server" ID="SchedulerAppointmentContextMenuNotToday">
                            <Items>
                                <telerik:RadMenuItem Text="Cancelled" Value="2" ImageUrl="~/Images/cancel.png"></telerik:RadMenuItem>
                                <telerik:RadMenuItem Text="Details" Value="3" ImageUrl="~/Images/telephone.png"></telerik:RadMenuItem>
                            </Items>
                        </telerik:RadSchedulerContextMenu> 
```

然后将约会绑定到您需要的任何菜单：

```
protected void scheduleDiary_AppointmentDataBound(object sender, SchedulerEventArgs e)
{
    if (e.Appointment.Start.Date != DateTime.Now.Date)
        e.Appointment.ContextMenuID = "SchedulerAppointmentContextMenuNotToday";

    e.Appointment.BackColor = System.Drawing.Color.Red;
} 
```

# python - Riak 和此传输不可用（无 protobuf）错误

> ID：12170635
> 
> 赞同：2
> 
> 时间：2012-08-29T03:53:44.397
> 
> 标签：python, riak

我在 ubuntu 上使用 riak 1.2，这是来自 git hub 的 riak python api 的最新版本和最新版本。

当我运行此代码时，出现以下错误。

```
import riak
client riak.RiakClient(host='riak.hk.myserver.com',port=8087,transport_class=riak.transports.pbc.RiakPbcTransport) 
```

我可以在服务器的 8087 端口上 telnet。那么...我该如何解决？

```
client = riak.RiakClient(host='riak.hk.myserver.com',port=8087,transport_class=riak.transports.pbc.RiakPbcTransport)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/dist-packages/riak-1.5.0-py2.7.egg/riak/client.py", line 78, in __init__
    **transport_options)
  File "/usr/local/lib/python2.7/dist-packages/riak-1.5.0-py2.7.egg/riak/transports/pbc.py", line 168, in __init__
    raise RiakError("this transport is not available (no protobuf)")
riak.RiakError 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T06:19:19.070

您需要安装`riak_pb`模块。

```
git clone https://github.com/basho/riak_pb.git
cd riak_pb
sudo python setup.py install 
```

# jquery - 在我的 jquery 代码上需要帮助：淡入淡出到新图像

> ID：12170636
> 
> 赞同：1
> 
> 时间：2012-08-29T03:53:46.430
> 
> 标签：jquery

我需要帮助淡入和淡出 3 张图像。一旦第三个图像淡出页面将重定向。

```
<img src="images/slide1.jpg" alt="Example" id="slideshow" />
<script>
$(function() {

$('#slideshow').fadeIn(3000, function() {
$(this).delay(1000).fadeOut(2000, function() { window.location = 'http://google.com/'; });
});

});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T04:22:19.047

给这 3 个图像一个共同的类别（例如：幻灯片）。

```
var images = $('.slideshow'), len = images.length;

images.each(function(i) {
  $(this).delay(i*6000).fadeIn(3000, function() {
     $(this).delay(1000).fadeOut(2000, function() {
         if (i === len - 1) window.location = 'http://google.com/';           
     });
  });
}); 
```

***[工作演示。](http://jsfiddle.net/ppLNh/)***

# javascript - 如何使用jquery对货币格式的数字求和

> ID：12170638
> 
> 赞同：4
> 
> 时间：2012-08-29T03:53:57.933
> 
> 标签：javascript, jquery, currency

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T03:58:49.057

The code in your question is invalid javascript. You can't have a `,` inside a numeric literal. You have to store it as a string, then parse it manually:

```
var number1 = '12,000.00';
var number2 = '12,000.00';

function parseCurrency( num ) {
    return parseFloat( num.replace( /,/g, '') );
}

alert( parseCurrency(number1) + parseCurrency(number2) ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T03:55:27.897

This won't work. Use [accounting.js](http://josscrowcroft.github.com/accounting.js/)'s `unformat` function to parse 12,000 as a string instead.

# php - 无法获取 php 会话变量以在 javascript 中设置 var

> ID：12170639
> 
> 赞同：-1
> 
> 时间：2012-08-29T03:53:59.180
> 
> 标签：php, javascript

我`$_SESSION['SESS_USER_TYPE']`在我的 php 文件中调用了一个会话变量，该变量设置为 2 个字符串。php 脚本重定向到一个 HTML 文件，我想在其中将 php 会话变量转换为 javascript 变量。

我在我的 javascript 中按如下方式使用它，但我在 javascript 变量中一无所获。

```
var user_type = <?php echo $_SESSION['SESS_USER_TYPE']; ?>; 
```

这不起作用。

除了从其他用户收到的输入，我尝试了以下内容：

```
var user_type = '<?php echo json_encode($_SESSION['SESS_USER_TYPE']) ?>'; 
```

Javascript 向上述内容返回语法错误。

然后我尝试了

```
user_type = "<?php echo json_encode($_SESSION['SESS_USER_TYPE']) ?>"; 
```

这不会在 Javascript 中给出错误。但是，它将以下值返回给 user_type，即：

```
<?php echo json_encode($_SESSION['SESS_USER_TYPE']) ?>

$_SESSION['SESS_USER_TYPE'] is set to the string 'WO'. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T03:56:23.297

该会话变量中的值究竟是什么？如果它是一个字符串，您将生成无效的 Javascript 并导致语法错误，例如：

```
<?php

$x = 'hello';

?>
<script type="text/javascript">
var x = <?php echo $x; ?>;
</script> 
```

会给你

```
var x = hello; 
```

并可能把事情搞砸。

将 PHP 数据转储到 Javascript 代码块时，尤其是在动态创建 javascript 值时，**始终**使用 json_encode：

```
var x = <?php echo json_encode($x) ?>; 
```

这将保证您正在生成语法上有效的 JS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T03:58:20.657

包含该 JavaScript 片段的文件必须由 PHP 解析。最简单的方法是使用`.php`扩展。PHP 变量和语句在非 PHP 文件中不起作用（除非您将网络服务器配置为这样做，但这可能超出了这个问题的范围）。要使用会话变量，您还必须运行`session_start()`.

例如

*一些文件.php*

```
<?php session_start() ?>
<!DOCTYPE html>
<html>

<!-- snip -->

<script>
    var user_type = '<?php echo $_SESSION['SESS_USER_TYPE']; ?>';
</script> 
```

正如其他人所说，还要在 JS 字符串周围加上引号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T03:59:22.840

> php 脚本重定向到一个 HTML 文件，我想在其中将 php 会话变量转换为 javascript 变量。

如何在 HTML 页面中获取会话变量的值？为此，您需要 PHP 页面。在php页面中你可以这样做

```
var user_type = "<?php echo $_SESSION['SESS_USER_TYPE']; ?>"; 
```

# java - 在 Eclipse 中的 jar 中包含一个 jar？（不使 JAR 可运行）

> ID：12170642
> 
> 赞同：0
> 
> 时间：2012-08-29T03:54:19.310
> 
> 标签：java, eclipse, jar, classpath, manifest

嗨，我发现自己引用了我不久前在我的代码中创建的 JAR 存档。但是我制作的 JAR 引用了 JSoup JAR 文件，我刚刚发现它并没有像我假设的那样自动添加（愚蠢的假设）。因此，在查看 Stack-Overflow 之后，似乎只需将一些 Class-Path 信息添加到自定义清单中，我就可以解决我的问题......但是当我尝试从另一个项目中引用我的 JAR 时，我仍然遇到 ClassDef 错误。

```
Manifest-Version: 1.0
Class-Path: "C:\Users\ethan\Documents\ACTUAL My Documents\Libraries\Java Libraries\jsoup\jsoup-                1.6.3.jar" 
```

所以我不确定我是否写错了清单。（我试过带引号和不带引号，都没有用）。我没有任何编写清单的经验，我的知识来自stackoverflow 上的这篇文章

[Eclipse：如何使用外部 jar 构建可执行 jar？](https://stackoverflow.com/questions/502960/eclipse-how-to-build-an-executable-jar-with-external-jar)

来自麦克道尔的帖子。

我看到很多帖子建议使用 Maven 或第三方应用程序。但似乎应该有一些更简单的方法可以在 Eclipse 中实现这一点，而无需安装任何新东西（因为这通常会带来新的麻烦）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T03:59:26.617

Manifest 中的 Class-Path 仅在您运行可执行 jar 时使用。它不会用于用作库的 jar 文件。你也必须告诉你的主 JAR 文件。

# c++ - 时间类构造函数

> ID：12170643
> 
> 赞同：1
> 
> 时间：2012-08-29T03:54:22.410
> 
> 标签：c++

这是我编写的一个实现，用于在 C++ 中添加 hrs、min 和 sec 有没有办法通过将所有这些转换为秒并做一个更简单的实现来实现这个？出于某种原因，它不允许我在这篇文章中添加代码:(

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T03:58:46.073

将小时、分钟和秒转换为秒是相当简单的：

```
total_seconds = hours*60*60 + minutes*60 + seconds; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T04:18:56.500

> 有没有办法通过将所有这些转换为秒并做一个更简单的实现来实现这一点？

无论您采用哪种方式，都需要经常更改秒和小时/分钟/秒之间的时间，因此使用其中一个进行存储不一定有*很大的好处。*换句话说，午夜后的秒数可能更好，但可能不值得重写。对于像`+`and之类的东西`-`，如果你不只存储秒，那么你可以轻松计算它（参见 Mark 的帖子），做你的算术然后有一个函数从秒转换回小时/分钟/秒，将结果存储到你的数据中成员：

```
hours = seconds_since_midnight / 60 / 60;
minutes = seconds_since_midnight / 60 % 60;
seconds = seconds_since_midnight % 60; 
```

假设您将 120 秒添加到 23:59:00，您将在午夜之后获得一个值，因此您可以使用“total_seconds % 24 * 60 * 60”来获得下一个午夜之后的 60 秒，相当于换行从“24:01:00”到 00:01:00。

（如果您想实际使用它，而不仅仅是为了自学，那么请考虑使用该`time()`函数和相关的转换例程，例如`localtime()`）

# javascript - 不应选择缩略图第一张图片

> ID：12170650
> 
> 赞同：0
> 
> 时间：2012-08-29T03:55:13.287
> 
> 标签：javascript, jquery

在我的代码中，我保留了要选择的第一个缩略图，但我不需要选择第一个缩略图。最初我需要显示没有任何选定项目的缩略图图像，一旦我单击任何缩略图，则应该打开更大的图像这是我尝试过的：

[http://jsfiddle.net/L7yKp/60/](http://jsfiddle.net/L7yKp/60/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T04:25:01.440

编辑代码：这不会选择第一张图像，也不会显示大图像。一旦你点击缩略图。它将打开大图像。

更新网址：

[http://jsfiddle.net/L7yKp/69/](http://jsfiddle.net/L7yKp/69/)

# python - 有关 urls.py 的信息

> ID：12170656
> 
> 赞同：-1
> 
> 时间：2012-08-29T03:55:57.867
> 
> 标签：python, django, django-urls

我是 Django 新手，我一周前才开始学习。我正在参考 Django Docs，但我不明白如何将 url 提供给应用程序。那么有人可以告诉我如何为带有描述的应用程序提供网址吗？

例如：- 如果我想制作一个登录表单，当我点击登录按钮时，它会转到主页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T04:39:59.127

Django 是一个网络框架

一个 Web 框架为您（Web 开发人员）执行常见的工作

常见的工作之一是解析 http 请求

解决方法之一是将指向 URL 的请求定向到处理此请求并生成响应的特定代码段。

我们有时将执行上述机制的东西称为 Web 框架的***URL 路由器***。Django 中的这段代码是一个函数（它生成一个 http 响应），我们称之为***视图***。

所以我们说框架的***URL 路由器***将一个 URL 映射到一个***视图***。

您可以通过在项目根目录中的单独***urls.py***中列出您的 url-view 映射来告诉***路由器***哪个 URL 映射到哪个***视图***

 *如果您不喜欢单独的***urls.py***太大，您可以将此文件拆分为多个文件，并将它们放在单独的 Apps 目录中。然后使用***包含***语法将它们聚合到单独的***urls.py****

# jquery - 基本 div 替换宽度渐变过渡

> ID：12170657
> 
> 赞同：0
> 
> 时间：2012-08-29T03:55:59.910
> 
> 标签：jquery

好的，我一直在寻找可以构建的简单东西，但是我发现的大部分 jQuery 东西对于我来说已经很复杂了。

我的想法是有一个大 div，我可以放置任何 html 内容图像/文本等，并且在该子 div 下也可以有文本和背景图像或我选择的任何内容，我希望它的运行方式是如果你悬停在 div 缩略图上，它将以漂亮的淡入淡出过渡更改大 div 中的内容，并且缩略图将能够链接。

与此类似：[http](http://www.webdesignerwall.com/demo/jquery/img-replacement.html) ://www.webdesignerwall.com/demo/jquery/img-replacement.html但有一个很好的淡入淡出过渡，不使用图像而是使用 div，所以我可以在其中做我喜欢的事情。

可能代码中的缩略图可以轻松添加或多或少，而无需添加越来越多的 jquery 行，因此以后几乎可以使用 db 动态创建它。

在我脑海里听起来很简单！也许不吧 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T04:26:27.003

试试这个[小提琴](http://jsfiddle.net/gajjuthechamp/vrqdh/2/)

它很简单您只需要使用`Html()`并`fadeIn(),fadeOut()`单击小 div。

我认为编写的代码很简单，可以理解。即使你有问题也可以问;) ​</p>

# git - 在 git 中打开二进制文件的 HEAD 和工作目录版本

> ID：12170663
> 
> 赞同：1
> 
> 时间：2012-08-29T03:56:43.450
> 
> 标签：git, binaryfiles

是否可以在 git 中打开已在工作目录中覆盖的文件的原始版本（HEAD），而无需重置更改？这对于查看二进制文件（如图像）之前和之后非常有用，其中 git 不会提供有用的输出。

理想情况下，可以同时打开两个版本（也可能是索引），以便并排查看它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T04:21:05.883

您至少可以将该二进制文件复制到其他地方，以便能够打开它：

```
 git show HEAD:yourBinaryfile > /elsewhere 
```

有关. [_](https://stackoverflow.com/questions/7856416/in-git-view-a-file-in-a-different-branch-without-changing-branches) _`git show`

# android - 获取 App 推出 Android 的时间

> ID：12170665
> 
> 赞同：0
> 
> 时间：2012-08-29T03:56:49.753
> 
> 标签：android, time

我想获取应用程序启动的时间。时间应该以毫秒为单位。有什么建议请...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T04:17:44.283

long lDateTime = new Date().getTime(); 您可以在 Oncreate 的 mainActivity 中使用此代码。当您的 MainActivity 调用此代码时，您将获得以毫秒为单位的时间

或者你可以使用 long time=System.currentTimeMillis(); 这也以毫秒为单位给出了当前时间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T04:09:18.097

启动时`Activity`，只需调用`System.currentTimeMillis()`并将其存储在变量中即可。由您决定在哪里执行此操作：在 中`onCreate()`，您`Activity`和其他内部元素被“膨胀”或实例化的地方，或者`onResume()`，当`Activity`屏幕上的表面时。

例子：

```
public void onCreate(Bundle savedInstanceState) {
    long timeOpened = System.currentTimeMillis();
} 
```

# symfony - 在数据库中存储类路径的最佳实践是什么？

> ID：12170666
> 
> 赞同：0
> 
> 时间：2012-08-29T03:57:43.590
> 
> 标签：symfony

我想知道在 Symfony2 中，在学说实体上存储类路径的最佳方式是什么？

我想存储类的完整路径，或者可能是针对实体的服务 ID。我喜欢路由对象转换为控制器的方式，是否有任何方法可以为任何类执行此操作？

例如，我有一个需要由另一个类验证的类。我可以再次存储类路径对象。这样我可以做一个`$object->getValidator()`，它可以根据存储的内容自动创建验证对象。

我能想到的 3 种存储这些信息的方法：

1.  完整路径：`/Acme/BlogBundle/Validator/ValidateClass`
2.  服务：`acme_validator_class`
3.  比如路由：`AcmeBlogBundle:Validator:ValidateClass`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T04:00:49.170

我会选择

```
/Acme/BlogBundle/Validator/ValidateClass 
```

这种情况的方法。

# java - 在 Android 上使用 Sax 解析 Xml

> ID：12170667
> 
> 赞同：0
> 
> 时间：2012-08-29T03:58:03.907
> 
> 标签：java, android, xml, parsing

我正在尝试`XML`从 url 页面解析一个。为此，我使用了[这个 IBM 示例](http://www.ibm.com/developerworks/opensource/library/x-android/)中解释的 SAX 实现`Adapter`以及我从[本文](http://www.ingeniumblog.net/2012/01/making-a-slick-rss-reader-in-android/)中获得的其他更改。我也尝试实现 an`AsyncTask`来进行解析并显示 a`ProgressDialog`但我认为这是我的应用程序开始崩溃的地方。

我真的不知道如何在`AsyncTask`我的代码中实现，而且我相信我的糟糕实现导致我的应用程序强制关闭。

主要活动：

```
public class MainActivity extends Activity {
/** Called when the activity is first created. */
ListView lv1;
ProgressDialog ShowProgress;
public static ArrayList<MangaItem> MangaItemList = new ArrayList<MangaItem>();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    lv1 = (ListView) findViewById(R.id.listView1);

    ShowProgress = ProgressDialog.show(MainActivity.this, "",
            "Loading. Please wait...", true);
    //new loadingTask().execute("http://www.mangapanda.com/alphabetical");
    new loadFeedTask().execute();

    lv1.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

            Intent intent = new Intent(Intent.ACTION_VIEW).setData(Uri
                    .parse(MangaItemList.get(position).getMangaLink()));
            startActivity(intent);

        }
    });

}

class loadFeedTask extends AsyncTask<String, Void, ArrayList<MangaItem>> {
    private String feedUrl;

    protected void onPostExecute(String s) {
        lv1.setAdapter(new EfficientAdapter(MainActivity.this, MangaItemList));
        //new MangaParserTask().execute();
        ShowProgress.dismiss();

    }

    protected ArrayList<MangaItem> doInBackground(String... params) {
        ArrayList<MangaItem> ParsedMangaItemList = new ArrayList<MangaItem>();
        feedUrl = "http://www.mangapanda.com/alphabetical"; 
        FeedParser parser = new SaxFeedParser(feedUrl);
        ParsedMangaItemList = parser.parse();
        for (MangaItem mitem : ParsedMangaItemList) {
            MangaItemList.add(mitem);
        }
        return MangaItemList;
    }

}
} 
```

如何正确使用`AsyncTask`，以便我的解析器返回一个`ArrayList`然后我可以放入`ArrayAdapter`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T04:31:44.083

使用此代码

```
try {

        items = new ArrayList<String>();

        XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
        factory.setNamespaceAware(true);
        XmlPullParser xpp = factory.newPullParser();
        xpp.setInput(new InputStreamReader(
                getUrlData(" url")));

        while (xpp.getEventType() != XmlPullParser.END_DOCUMENT) {
            Log.i(TAG, "doc started");
            if (xpp.getEventType() == XmlPullParser.START_TAG) {
                if (xpp.getName().equals("entry")) {
                    items.add(xpp.getAttributeValue(0));
                }
            }
            xpp.next();

        }
    } catch (Throwable t) {
        Toast.makeText(this, "Request failed: " + t.toString(),
                Toast.LENGTH_LONG).show();
    } 
```

获取url数据方法

```
public InputStream getUrlData(String url) throws URISyntaxException,
        ClientProtocolException, IOException {

    DefaultHttpClient client = new DefaultHttpClient();
    HttpGet method = new HttpGet(new URI(url));
    HttpResponse res = client.execute(method);
    return res.getEntity().getContent();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T05:35:44.307

`AsyncTask<Params, Progress, Result>`子类 ( )中的类型参数使用不当。重新编写`AsyncTask`子类。

```
 class loadFeedTask extends AsyncTask<String, Void, ArrayList<MangaItem>> {
    protected void onPostExecute(ArrayList<MangaItem> list) {
        lv1.setAdapter(new EfficientAdapter(MainActivity.this, list));
        ShowProgress.dismiss();
    }
    protected ArrayList<MangaItem> doInBackground(String... params) {
        ArrayList<MangaItem> list=null;
        String feedUrl = "http://www.mangapanda.com/alphabetical"; 
        FeedParser parser = new SaxFeedParser(feedUrl);
        list = parser.parse();
        MangaItemList=list;
        return list;
    }
  } 
```

# java - 如何使用 Servlet 处理 POST 响应

> ID：12170681
> 
> 赞同：1
> 
> 时间：2012-08-29T03:59:25.710
> 
> 标签：java, servlets, post

我是 Java Servlet 编程的新手，并且有一个关于如何使用 Servlet 编程处理来自其他服务器的 POST 响应（不是用户的 POST 请求）的问题。

假设我的应用程序需要咨询另一台服务器以处理用户的请求。我需要

1.  向另一台服务器发送一个异步`POST`请求（即`redirect_uri`在`POST`请求正文中指定一个）；
2.  处理`POST`来自其他服务器的响应；
3.  向用户呈现一些结果。

我认为我需要一个 Servlet 来处理用户的请求并将`POST`请求发送到另一台服务器，并且我需要另一个 Servlet（因为`POST`请求是异步的）来处理来自另一台服务器的 POST 响应。我的具体问题是：

1.  `POST`在这种情况下发送请求的最佳方式是什么？例如，使用`HttpUrlConnection`?

2.  如何处理`POST`Servlet 中的响应？这让我很困惑，因为 servlet 应该处理“请求”而不是“响应”，但在这种情况下，传入的消息确实是`POST`来自其他服务器的响应。特别是，如果您能指出我真正有用的相关 API/方法。例如，在`doPost()`？如何获取`POST`响应正文？（我假设我们可以从`HttpServletRequest`对象中获取它）。

非常感谢！
岳

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T04:25:34.957

我不理解“POST Response”这个术语。但是，如果我正确理解了您的要求，您可能正在谈论 servlet 链接方案。

> Servlet 链接意味着一个 servlet 的输出充当另一个 servlet 的输入。Servlet Aliasing 允许我们在使用公共 servlet 别名打开 URL 时依次调用多个 servlet。第一个 Servlet 的输出作为输入发送到其他 Servlet，依此类推。最后一个 Servlet 的输出被发送回浏览器。整个过程称为 Servlet Chaining。

[Servlet 链接示例](http://www.java-tips.org/java-ee-tips/java-servlet/example-of-servlet-chaining.html)

# assembly - 学习汇编语言有什么意义吗？

> ID：12170684
> 
> 赞同：-1
> 
> 时间：2012-08-29T03:59:52.997
> 
> 标签：assembly, x86

过去几个月我一直在努力学习汇编语言，在我看来，我尝试的任何事情都是不可能做到的。

我找到了 Intel x86 指令集参考（全部 4000 页），以及其他三四个教程。我已经阅读了这些，使用了示例代码并试图理解它。但是我仍然不能用汇编做太多的事情。因此，我在 Stack Overflow 上注册了一个帐户。但我觉得好像我用我的过于简单和糟糕的问题来烦扰论坛。

我的问题是，现在有人追求汇编语言有什么意义吗？这很有趣，但是即使是一个简单的窗口也很难（CreateWindowEx 函数需要 12 个废弃的参数！），这似乎毫无意义。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T04:10:39.010

绝大多数程序员永远不需要用汇编程序编程，就像绝大多数人可能永远不需要正则表达式，或者需要学习各种数据结构的内在复杂性一样。

这不会降低它们在您的工具包中的价值。

我个人不会在汇编程序中编写成熟的窗口应用程序，就像我不会在其中编写会计包，或者在 COBOL 中编写操作系统，或者在 Pascal 中编写*任何东西*一样:-)

为工作选择正确的工具（在*所有*环境中），您的生活会轻松得多。

# netbeans - " 预期”在构造方法中

> ID：12170686
> 
> 赞同：2
> 
> 时间：2012-08-29T04:00:11.723
> 
> 标签：netbeans, constructor

我刚开始使用 Netbeans，但在尝试编写新类时遇到了问题。

```
public class DeliveryList<T> extends ArrayList<T>
{
    public DeliveryList<T> // <identifier> expected
    {
    }
} 
```

Netbeans 向我抛出了这个错误，我不太确定该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T04:07:34.703

试试这个 - 阅读[Java 泛型](http://docs.oracle.com/javase/tutorial/java/generics/)教程页面。

```
class DeliveryList<T> extends ArrayList<T>
{
  public <T>DeliveryList() {}
} 
```

# azure - 混淆 DLL 和 Azure 包部署

> ID：12170688
> 
> 赞同：1
> 
> 时间：2012-08-29T04:00:36.800
> 
> 标签：azure, obfuscation

我正在使用 FxProtect .NET 程序集混淆器，我想将包中的混淆 .DLL 部署到 Azure。如何将我混淆的 DLL 放回包中？我是否解压缩部署到 Azure 的 .CSPKG 并将混淆的 DLL 复制并粘贴到提取的 .CSPKG 文件夹中，然后再次压缩以进行部署？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T04:53:30.567

如果从 Visual Studio 或 MSBUILD 打包，我建议您运行一个构建后事件来混淆生成的 .DLL

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-08T12:35:25.103

我有类似的情况，我有一组 Azure 包，其中包含对需要混淆的程序集的引用（它们是公共 SDK 的一部分）。我使用 Dotfuscator 作为混淆工具，但该过程可能也适用于其他供应商。以下是我解决此问题的方法：

就我而言，Azure 包包含对 WebRole 项目的引用。然后，该 WebRole 项目包含对需要混淆的其他几个库项目的项目引用。

构建过程需要三遍：

1.  构建包含所有库和 Web 项目的解决方案。我已使用 Visual Studio 配置管理器禁用 Azure 包项目的构建，但这不是必需的。
2.  运行混淆工具来混淆需要它的程序集。
3.  仅构建和打包 Azure 包（通过`Publish`目标）并**指示 MSBuild*不要*同时构建任何引用的项目**。

最后一部分是关键。如果您不告诉 MSBuild*不*构建引用的项目，它将全部重建它们，从而撤消混淆。`BuildProjectReferences=false`您可以通过在构建包时包含该属性来做到这一点。

要从 MSBuild 脚本构建 Azure 包，我使用以下内容：

```
<!-- This should be run after Obfuscation to ensure the SDK assemblies included in the packages are obfuscated -->
<MSBuild Projects="..\Path\My.CloudService.ccproj" Targets="Publish" Properties="BuildProjectReferences=false;PublishDir=..\artifacts\MyCloudService"  /> 
```

# php - 为什么 Internet Explorer 在某些情况下会多次加载一张图像？

> ID：12170692
> 
> 赞同：0
> 
> 时间：2012-08-29T04:01:03.733
> 
> 标签：php, image, internet-explorer, captcha, limesurvey

我有一个带有按钮的简单表单。按下按钮在 PHP 页面上调用 GET。在页面上只有一个 IMG 标签，其中 SRC 是一个 PHP 脚本，它动态返回一个 PNG 图像（`imagepng()`函数）。

为什么 Internet Explorer 9 多次加载此图像？

验证是否发生这种情况可能有点棘手。我发现这一点是因为我正在使用 PHPEd 调试一个 PHP 脚本（生成 PNG 的那个），并意识到流程在文件中输入了两次，在我的断点处停止了两次！

当我查看 IE 的网络日志并看到确实有不止一个脚本调用时，我证实了这一点。要查看网络日志，请在 IE 窗口中按 F12 并单击“网络”选项卡。

根据日志，有一个调用没有完全完成（不返回 HTTP 200 状态），但这足以搞砸一切。

有关如何解决此问题的任何建议？

我已经做了一些示例脚本来演示这个问题：

文件“teste.php”

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
  <head>
    <title>Problem</title>
  </head>
  <body>
<?php 
  $handle = fopen("teste.txt", "w");
  fclose($handle);  
?>
    <img src="verification.php" alt="captcha">
    <form action="teste.php" method="get">
      <input type="submit" value="Go!">
    </form>
  </body>
</html> 
```

文件“验证.php”

```
<?php
  $im = imagecreatetruecolor(75, 20);
  $black = ImageColorAllocate($im, 0, 0, 0);
  $red = ImageColorAllocate($im, 255, 0, 0);
  $blue = ImageColorAllocate($im, 0, 0, 255);
  $grey_shade = ImageColorAllocate($im, 204, 204, 204);

  srand((double)microtime()*1000000);

  $num1 = rand(1,5);

  $found = false;

  while (!$found) {
    $num2 = rand(1,100);

    if (preg_match('/^[0-9]+$/', $num2/5)) {
      $found = true;
      break;
    }
  }

  $font_c_rand = rand(1,3);

  if ($font_c_rand == 1) {
    $font_color = $black;
  } else if ($font_c_rand == 2) {
    $font_color = $red;
  } else if ($font_c_rand == 3) {
    $font_color = $blue;
  }

  $font = "vera.ttf";

  $line_rand = rand(1,3);

  if ($line_rand == 1) {
    $line_color = $black;
  } else if ($line_rand == 2) {
    $line_color = $red;
  } else if ($line_rand == 3) {
    $line_color = $blue;
  }

  ImageFill($im, 0, 0, $grey_shade);
  imageline($im,0,0,0,20,$line_color);
  imageline($im,74,0,74,19,$line_color);
  imageline($im,0,0,74,0,$line_color);
  imageline($im,0,19,74,19,$line_color);
  ImageTTFText($im, 10, 0, 3, 15,$font_color, $font,  $num1." + ".$num2." =" );

  imagepng($im);
  imagedestroy($im);

  $handle = fopen("teste.txt", "a");
  fwrite($handle, "\"verification.php\ executed!". The sum result is " . ($num1 + $num2) ."\n");
  fclose($handle);  
?> 
```

如您所见，您将需要一种 ttf 字体。将字体文件放在同一个文件夹中，并在上面的脚本中更改 $font 变量。您可以使用任何 True Type 字体，看看：

> $font = "arial.ttf";

唯一的要求是 ttf 文件必须在脚本的同一文件夹中，以使一切变得更简单。

要测试正确的行为：

1.  在 Internet Explorer 上打开文件“teste.php”；
2.  按几次浏览器上的刷新按钮；
3.  查看动态创建的名为“teste.txt”的文件。

结果：文件中只有一行。内容显示验证码图像上显示的正确总和值。这是正确的行为，因为在显示验证码图像时仅调用了一次 verify.php。

现在，测试问题：

1.  在 Internet Explorer 上打开文件“teste.php”；
2.  按“开始！” 表单上的按钮有时。3x就够了；
3.  查看动态创建的名为“teste.txt”的文件。

结果：文件中有不止一行。可能是 2。其中一个有验证码图像总和的正确答案。这两个创建图像的调用弄乱了验证码系统的正确答案，因此无法在 Internet Explorer 中使用它。

如何为 IE 解决这个问题？在 Firefox 中一切正常！

PS.：我正在尝试使用[Lime Survey](http://www.limesurvey.org) PHP Script 的验证码系统，但由于上述问题，它不适用于 IE。

# heroku - heroku 工具带无法在 Windows XP 上运行

> ID：12170695
> 
> 赞同：4
> 
> 时间：2012-08-29T04:01:57.707
> 
> 标签：heroku

我下载了最新的 Windows 工具带；但是，当我尝试从 DOS 启动任何 heroku 命令时，我得到：

c:/Program Files/Heroku/lib/heroku/updater.rb:126:in `fork': fork() function is unimplemented on this machine (NotImplementedError) from c:/Program Files/Heroku/lib/heroku/updater.rb:126:in`background_update!' 从 c:/Program Files/Heroku/lib/heroku/updater.rb:111:in `inject_libpath' from c:/Program Files/Heroku/bin/heroku:19:in`'

我的目的是部署一个 Play！Heroku 上的应用程序。我正在使用 Windows XP SP3。任何人都可以启发我，因为我很头疼。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T06:16:46.577

我刚刚遇到了同样的问题。我的解决方案是注释掉对`fork`.

导航到您的 Heroku 安装目录，并`updater.rb`在子目录中找到该文件`lib\heroku`。

注释掉第 126 行（应该是`pid = fork do`）、第 143 行（`end`）和第 144 行（`Process.detach.pid`）。

这应该够了吧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T19:33:11.270

在您的主目录（即`C:/Users/xxx/.heroku/autoupdate.last`）中创建一个名为“autoupdate.last”的文件。

请参阅 updater.rb：

```
File.join(Heroku::Helpers.home_directory, ".heroku", "autoupdate.last") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T21:18:21.717

我有一位使用 Windows 7 的同事遇到了这个问题。他不小心安装了 ruby​​ 1.8.7。当您将 ruby​​ 1.8.7 与当前版本的 Heroku Toolbelt（撰写本文时为 2.32.9）一起使用时，似乎会发生此错误。Heroku Toolbelt 似乎更喜欢 Ruby 1.9.x。您可以运行*gem install heroku*，错误就会消失，但您会收到有关 heroku gem 已被弃用的警告，这意味着它可能会缺少当前功能。如果可以的话，更新到 ruby​​ 1.9.x。虽然在某些情况下有效，但我认为编辑 ruby​​ 文件应该是最后的手段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-15T18:59:09.677

我不确定这些已解决的问题中的哪一个，但其中一个或两个都做到了：1.取消选择“隐藏”用户/[用户]/.heroku”文件夹。2.取消选择“只读”文件夹。

# visual-studio-2012 - 是否可以使用 VS2012 降级 IIS Express 8 -> IIS Express 7.5

> ID：12170704
> 
> 赞同：7
> 
> 时间：2012-08-29T04:03:28.063
> 
> 标签：visual-studio-2012, iis-express

我们正在寻求迁移 VS2010->VS2012。

安装时 VS2012 默认安装 IISExpress 8。似乎没有任何方法可以禁用此选项。

我们的生产环境使用 IIS7.5，因此从诊断的角度来看，最好在生产环境和开发环境之间保持版本一致性。

有没有办法从 IISExpress 8 -> IISExpress 7.5 降级，同时仍然使用 Visual Studio 2012

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-08T08:49:22.147

在 IIS 论坛中有一个答案：

参考：[这里](http://forums.iis.net/t/1194023.aspx/1?IIS+Express+7+5+with+VS+2012)

**问题：***

> 是否可以安装 Visual Studio 2012 并从安装包中排除 IIS Express 8.0？它未在 AdminDeployment.xml 文件中列为可自定义选项。

**回答：**

> 是的你可以。您可以尝试通过在控制面板中添加或删除 Windows 组件来卸载 IIS Express 8.0。请导航到控制面板中的“程序和功能”，然后卸载“IIS 8.0 Express”。

* * *

**问题：**

> 事后是否可以卸载 IIS Express 8 并重新安装 IIS Express 7.5？

**回答：**

> 在我看来，你可以重新安装它。但是，您需要确保它已安装在 IIS 7.5 Express 支持的以下 Windows 版本中。
> 
> Windows 7 Windows Server 2008 Windows Server 2008 R2 Windows Vista SP1 或更高版本 Windows XP SP3 Windows Server 2003 SP2 支持 32 位和 64 位系统，但仅存在 IIS 7.5 Express 的 32 位版本。

# mysql - 选择所有行，直到日期差异从底部开始为 4

> ID：12170706
> 
> 赞同：1
> 
> 时间：2012-08-29T04:03:30.050
> 
> 标签：mysql

我想从表中选择两行之间的日期差异为 4 或更少的所有行，并在条件不匹配时立即停止，即 diff > 4 按降序排列，即（从底部开始）

> 警告：一旦条件大于 4，它将不再匹配它只是停止

即它必须选择 5,6,7,8,9

![桌子](../Images/0e94ab3d324195868d4f364246dab2a1.png)

我尝试使用“ **HAVING** ”，但在大数据上速度很慢

提前感谢大家帮助解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T04:29:25.753

您可以使用[用户定义的变量](http://dev.mysql.com/doc/en/user-variables.html)来跟踪以前的`updated_at`值（在下面的示例中，in ） ，`@t`然后根据是否需要以前的记录（`@b`和当前的：

```
SELECT   id, amount, updated_at
FROM (
  SELECT   my_table.*,
           @b:=IF(@b, DATEDIFF(@t,updated_at)<=4, FALSE) okay,
           @t:=updated_at
  FROM     my_table, (SELECT @b:=TRUE, @t:=MAX(updated_at) FROM my_table) init
  ORDER BY updated_at DESC
) t
WHERE    okay
ORDER BY updated_at, id 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/1430b/1/0)上查看。

# android - 无法显示条形码 appinventor 个人服务器

> ID：12170711
> 
> 赞同：0
> 
> 时间：2012-08-29T04:04:28.333
> 
> 标签：android

我刚刚在我的服务器上安装了 App Inventor Personal 服务器。

我更改了一些配置，以便我可以通过互联网访问它，我在线编辑了 StartAI 文件：

```
dev_appserver.sh --port=8888 --address=localhost war 
```

是

```
dev_appserver.sh --port=8888 --address=175.103.44.182 war 
```

有了它，我可以通过互联网访问它。首先，一切正常，直到我尝试在我之前创建的应用程序上显示条形码。

我收到如下错误消息：

```
WARNING: ____Execution failure:
java.io.IOException: Cannot run program "/tmp/aapt7537967590601193994": java.io.IOException: error=2, No such file or directory
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:475)
    at java.lang.Runtime.exec(Runtime.java:610)
    at com.google.appinventor.buildserver.Execution.execute(Execution.java:103)
    at com.google.appinventor.buildserver.Compiler.runAaptPackage(Compiler.java:796)
    at com.google.appinventor.buildserver.Compiler.compile(Compiler.java:411)
    at com.google.appinventor.buildserver.ProjectBuilder.build(ProjectBuilder.java:161)
    at com.google.appinventor.buildserver.BuildServer.build(BuildServer.java:491)
    at com.google.appinventor.buildserver.BuildServer.buildAndCreateZip(BuildServer.java:442)
    at com.google.appinventor.buildserver.BuildServer.access$300(BuildServer.java:61)
    at com.google.appinventor.buildserver.BuildServer$1.run(BuildServer.java:382)
    at com.google.appinventor.buildserver.NonQueuingExecutor$1.run(NonQueuingExecutor.java:47)
    at java.lang.Thread.run(Thread.java:679)
Caused by: java.io.IOException: java.io.IOException: error=2, No such file or directory
    at java.lang.UNIXProcess.<init>(UNIXProcess.java:164)
    at java.lang.ProcessImpl.start(ProcessImpl.java:81)
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:468)
    ... 11 more
Aug 28, 2012 7:34:47 AM com.google.appinventor.buildserver.Compiler runAaptPackage
WARNING: YAIL compiler - AAPT execution failed.
Aug 28, 2012 7:34:47 AM com.google.appinventor.buildserver.ProjectBuilder build
INFO: problem on Windows ProjectBuilder deleteRecursively/tmp/1346114061354_0.191825549629683-0
Aug 28, 2012 7:34:47 AM com.google.appinventor.buildserver.BuildServer build
INFO: Build output: ________Preparing application icon<br>________Determining permissions<br>________Generating manifest file<br>________Compiling source files<br>(compiling appinventor/ai_test/Ezen/Screen1.yail to appinventor.ai_test.Ezen.Screen1)<br>(compiling /tmp/runtime4505406109072492881.scm to com.google.youngandroid.runtime)<br>Kawa compile time: 2.221 seconds<br>________Invoking DX<br>DX time: 19.628 seconds<br>________Invoking AAPT<br>YAIL compiler - AAPT execution failed.<br>
Aug 28, 2012 7:34:47 AM com.google.appinventor.buildserver.BuildServer build
INFO: Build error output: Error: Your build failed due to an error in the AAPT stage, not because of an error in your program.

Aug 28, 2012 7:34:47 AM com.google.appinventor.buildserver.BuildServer checkMemory
INFO: Build 1 current used memory: 12038224 bytes
Aug 28, 2012 7:34:47 AM com.google.appinventor.buildserver.BuildServer buildAndCreateZip
INFO: BuildServer.buildAndCreateZip test deleteOnExit
Aug 28, 2012 7:34:47 AM com.google.appinventor.buildserver.BuildServer buildAndCreateZip
SEVERE: Build 1 Failed: 1 Error: Your build failed due to an error in the AAPT stage, not because of an error in your program.

Aug 28, 2012 7:34:47 AM com.google.appinventor.buildserver.BuildServer$1 run
INFO: CallbackURL: http://localhost:8888/ode2/receivebuild/d6vwsnvx0m4qrm9oyr1pe1pcsnklpd0aicm39hkpf8tp5neuxl645orahzqcz88h1jsfdtoykdoaioxn9ky0y9b7ap8rdvqg9m4csz6qug683rfgu0ms7rdqs3x6unjckp5ywlmkph/build/Android 
```

当我尝试检查 /tmp 文件夹时，里面没有文件或文件夹 aapt7537967590601193994。

这是什么原因？我尝试向我的用户 chown /tmp 并授予权限 777，但仍然相同。

如何解决这个问题呢 ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:04:18.073

我遇到了同样的问题并使用以下两行解决了它：

-sudo apt-get install lib32z1 -sudo apt-get install lib32stdc++6

我在某个 AppInventor 论坛中找到了解决方案，但目前找不到。希望这可以帮助某人。

# c# - 将 DataGridComboBox 列绑定到值列表

> ID：12170716
> 
> 赞同：1
> 
> 时间：2012-08-29T04:04:53.460
> 
> 标签：c#, wpf, data-binding, datagridcomboboxcolumn

我将 DataGrid 绑定到 DataTable；DataGrid 有 4 列：

1.  复选框（没有问题）
2.  文本框 1（没有问题）
3.  文本框 2（没有问题）
4.  组合框（这是我面临的问题）

目前，当我将 DataGrid 绑定到 Datatable 时，我正在为 DataGridComboBox 列分配默认值。我的问题可能非常基本（WPF 新手）。但我无法获得“下拉”样式以及如何选择选项？如何将 DataGridComboBox: ItemSource 的值绑定到数组？同时将值绑定在数据表中？

这是使用的代码的一部分：

XAML：

```
<DataGridComboBoxColumn x:Name="ControlOption" Header ="ControlOption" Width="100"
        SelectedValueBinding="{Binding Operation}
        SelectedItemBinding="{Binding Path=DataGridComboxBox_Control}"
        ScrollViewer.CanContentScroll="True"
        ScrollViewer.VerticalScrollBarVisibility="Auto"
        IsReadOnly="True"
        CanUserResize="True">
        <DataGridComboBoxColumn.ElementStyle>
             <Style TargetType="ComboBox">
                 <Setter Property="IsSynchronizedWithCurrentItem" Value="False" />
                 <Setter Property="ItemsSource" Value="{Binding Choices}" />
             </Style>
        </DataGridComboBoxColumn.ElementStyle>
</DataGridComboBoxColumn> 
```

代码隐藏：

```
_ds = new DataSet();
          DataTable table = new DataTable();
          _ds.Tables.Add(table);
          DataColumn c1 = new DataColumn("IsActive", typeof(bool));
          table.Columns.Add(c1);
          DataColumn c2 = new DataColumn("DataGridTextBox1", typeof(string));
          table.Columns.Add(c2);
          DataColumn c3 = new DataColumn("DataGridTextBox_Summary", typeof(string));
          table.Columns.Add(c3);
          DataColumn c4 = new DataColumn("DataGridComboxBox_Control", typeof(string));
          table.Columns.Add(c4);

datagrid.ItemsSource = _ds.Tables[0].DefaultView; 
```

我想将 DataGridComboxBox_Control 绑定到选项列表 {"A","B","C"} 请告诉我如何去做。我尝试了一些解决方案，但对我不起作用

# forms - PayPal：获取“包含格式不正确的项目金额”的简单按钮

> ID：12170717
> 
> 赞同：0
> 
> 时间：2012-08-29T04:05:06.393
> 
> 标签：forms, api, paypal

我知道在 SO 上已经有很多这样的问题，但他们的答案都不适合我。

我正在使用简单的按钮形式：

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input name="cmd" type="hidden" value="_s-xclick" />
<input type="hidden" name="amount" value="500.00">
<input type="hidden" name="currency_code" value="AUD">
<input name="hosted_button_id" type="hidden" value="XXXXX" />
<input alt="PayPal &mdash; The safer, easier way to pay online." name="submit" src="https://www.paypalobjects.com/en_AU/i/btn/btn_paynowCC_LG.gif" type="image" />
<img src="https://www.paypalobjects.com/en_AU/i/scr/pixel.gif" border="0" alt="" width="1" height="1" />
</form> 
```

但得到错误： `The link you have used to enter the PayPal system contains an incorrectly formatted item amount.`

根据我的研究，这是因为该值需要 2 位小数且没有货币符号。但正如你所看到的，我已经尝试过了。我尝试过的其他版本是：

```
 value=500.00>
 value="$500.00">
 value="500">
 value="500.00">
 value='500.00'> 
```

有人会知道发生了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T05:03:14.540

好的，我想我已经解决了。

问题似乎是我使用的是托管的“立即购买”按钮，而不是普通的“立即购买”按钮。我能说的唯一区别是这条线

```
<input name="hosted_button_id" type="hidden" value="XXXXX" /> 
```

经过多次挣扎和 2 次无用的 PayPal 呼叫后，我找到了我打算在这里使用的按钮：

[https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_buynow_buttons#id089UG070BRO](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_buynow_buttons#id089UG070BRO)

Let me say for the record that the PayPal API documentation is a complete nightmare!

# eclipse - eclipse可以按字母顺序排列我的方法吗？

> ID：12170720
> 
> 赞同：0
> 
> 时间：2012-08-29T04:05:48.287
> 
> 标签：eclipse

让我的方法按字母顺序排列会很好，就像 java 文档一样。eclipse可以为我做吗？还是我手动做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T05:48:31.273

您可以在大纲视图中按字母顺序查看班级成员，但我认为您不能按字母顺序对他们进行排序。您只能按类型（例如初始化程序、构造函数等）和可见性（公共、私有...）对它们进行排序。

# mysql - 将正常的mysql复制到集群

> ID：12170722
> 
> 赞同：1
> 
> 时间：2012-08-29T04:06:10.637
> 
> 标签：mysql, scalability, cluster-computing, database-replication, multi-master-replication

令人惊讶的是，我在互联网上找不到任何与此相关的内容。我们目前有一个主从从 mysql 设置。出于可扩展性的原因，我们正在考虑迁移到 mysql 集群。如果我们可以让集群成为当前主节点的从节点并暂时在集群之外运行开发环境，那就太好了。如果我们可以在当前主服务器和集群之间建立主主关系，那就更好了。

我们担心的是我们的数据必须保持最新，因此无法进行这种复制将意味着停机。如果这种复制是不可能的，那么进行过渡的最平滑的方法是什么。我们目前正在运行 mariaDB。

# model-view-controller - Express.js 的路由器和控制器的使用

> ID：12170725
> 
> 赞同：0
> 
> 时间：2012-08-29T04:06:21.000
> 
> 标签：model-view-controller, controller, express, routes

过去我主要使用类似 Rails 的框架。最近，我一直在研究 Express.js。我注意到大多数示例在主 app.js 中进行路由，或者在 route.js 中进行渲染，我对此有点不舒服。

一个稍微熟悉的例子是[Express.js 的 github 页面中的 mvc 文件夹](https://github.com/visionmedia/express/tree/master/examples/mvc)，但即便如此，我发现路由的完成方式有点奇怪（另外，查看控制器内的文件夹？发生了什么？）。

我的问题是，我应该进行什么样的心态改变，或者是否有一种使用 Express.js 的标准方法可以清楚地将路由和控制器的关注点分开并使它们整齐地工作？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T22:22:49.123

经过更多的实验，我回答了我自己的问题。

Express 不适用于此类任务。[像Geddy](https://github.com/mde/geddy)或[Tower](https://github.com/viatropos/tower)这样的框架是，尽管它们都不像 Express 那样可以生产。

有一个名为[Express-resource](https://github.com/visionmedia/express-resource)的模块可以满足我的需求。尽管如此，在最坏的情况下，在 Express 中构建自己的路由/控制机制相对容易。

# silverlight - 对windows小工具感到困惑

> ID：12170726
> 
> 赞同：0
> 
> 时间：2012-08-29T04:06:29.843
> 
> 标签：silverlight, windows-8, windows-desktop-gadgets

我使用 Silverlight（MVVM 模式）和 WCF 开发了一个 Windows 桌面小工具。

我想知道它是否可以在 Windows 8 上运行，因为在 Windows 8 中没有作为侧边栏的选项。

如果可能，请告诉我应该怎么做才能使其与 Windows 7 和 Windows 8 兼容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T04:14:39.260

Win8 不支持 Windows 桌面小工具：[http ://www.techradar.com/news/software/operating-systems/microsoft-to-remove-desktop-gadgets-from-windows-8-1088122](http://www.techradar.com/news/software/operating-systems/microsoft-to-remove-desktop-gadgets-from-windows-8-1088122)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T08:16:22.513

您可以尝试重用代码的某些部分来制作带有 Live Tile 的 Windows 8“沉浸式应用程序”。Windows 8 中的 C#/XAML 堆栈与 Silverlight 非常相似（但不一样）。有关差异的指南，请参阅[http://msdn.microsoft.com/en-us/library/windows/apps/hh465136.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465136.aspx)。

# iphone - Initialiser 元素不是编译时常量

> ID：12170728
> 
> 赞同：3
> 
> 时间：2012-08-29T04:06:36.553
> 
> 标签：iphone, ios, ios5, ios4

在我的常量文件中，我包含了以下行

```
NSString * ALERT_OK = NSLocalizedString(@"Ok",@"Ok"); 
```

在此之后，当我尝试编译时，我收到以下错误

```
Initialiser element is not a compile time constant 
```

我该如何调试呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T04:10:03.387

问题是 NSLocalizedString 是一个返回不同值的函数，具体取决于语言。在系统运行之前，它不是一个常数。

相反，使用：

```
 #define ALERT_OK NSLocalizedString(@"Ok",@"Ok"); 
```

现在它会简单地用函数替换 ALERT_OK ，你会没事的。（请注意，您应该对所有全局值使用某种前缀，这样您就不会意外地创建在其他地方使用的具有相同名称的东西。）

# java - JPCap - 无法捕获 TCP 数据包

> ID：12170731
> 
> 赞同：0
> 
> 时间：2012-08-29T04:07:02.187
> 
> 标签：java, tcp, packets, jpcap, sniffer

我正在尝试使用 JPCap 库实现网络嗅探器。

问题是，它只捕获其他节点的 UDP 数据包。未捕获 TCP 数据包。（实际上我电脑的 TCP 数据包只被嗅探）

这是我正在使用的代码：

```
captor=JpcapCaptor.openDevice(interfaceList[interfaceNumber], 65535, true, 20);
captor.setFilter("ip and tcp",true);

JpcapWriter writer=JpcapWriter.openDumpFile(captor,"pass.txt");

for(int i=0;i<10;i++){
      //capture a single packet
      Packet packet=captor.getPacket();
      //save it into the opened file
      writer.writePacket(packet);

    }
writer.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T03:20:58.123

您看到的来自其他节点的 UDP 数据包是否被发送到广播 MAC 地址 (ff:ff:ff:ff:ff:ff)？如果是这样，那么问题不在于您可以捕获UDP数据包而不能捕获TCP数据包，问题是您无法捕获来自其他主机的非广播数据包（UDP数据包可以是广播数据包，但大多数不是； TCP 数据包永远不会是广播数据包）。

我猜想`openDevice`方法的第三个参数`jpcap.JpcapCaptor`指定是否要设置混杂模式；如果是这样，您正在请求它，这是捕获从其他主机发送到其他主机的非广播数据包所必需的。

如果是这样，那么问题可能在于您使用的是交换网络。请参阅[Wireshark Wiki 上的 CaptureSetup/Ethernet 页面](http://wiki.wireshark.org/CaptureSetup/Ethernet)，详细了解如何在交换的以太网上捕获“第三方”流量。

# javascript - Google Doc 如何拦截 Ctrl - S / Command - S 来保存文档而不是 html 页面

> ID：12170734
> 
> 赞同：1
> 
> 时间：2012-08-29T04:07:21.333
> 
> 标签：javascript, jquery, google-docs

我正在尝试将其引入我的项目中，我进行了一些搜索，但在这里[https://github.com/RobertWHurst/KeyboardJS/issues/19](https://github.com/RobertWHurst/KeyboardJS/issues/19)我发现拦截这些元键看起来非常困难。

所以我很好奇谷歌文档是如何做到的？它与仅使用 javascript 的方式不同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T04:12:52.087

这一点都不难。您只需绑定到文档并收听：http `keydown`: [//jsfiddle.net/zerkms/DVmDs/](http://jsfiddle.net/zerkms/DVmDs/)（假设您的文档是右下角的块并在按下之前单击一次`ctrl+s`）

```
$(document).on('keydown', function(e) {
    if (e.keyCode == 83 && e.ctrlKey) {
        alert('you have pressed ctrl+s');
    }
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T04:14:23.500

你试过什么？

这是一个使用常用方法拦截这些事件的小提琴（我在谷歌找到，花了我大约 10 秒）：http: [//jsfiddle.net/GBuBj/](http://jsfiddle.net/GBuBj/)

取自这里：[http](http://www.scottklarr.com/topic/126/how-to-create-ctrl-key-shortcuts-in-javascript/) ://www.scottklarr.com/topic/126/how-to-create-ctrl-key-shortcuts-in-javascript/ 和这里：[https ://superuser.com/questions/120672/mediawiki -assign-ctrl-s-to-save-page-edit-mode](https://superuser.com/questions/120672/mediawiki-assign-ctrl-s-to-save-page-edit-mode)

Win 键是不同的故事，但 CTRL 很好（可能除了 CTRL+ESC 和操作系统使用的几个类似的快捷方式）。

# android - 如何在 ListView 中将方法“isChecked()”状态设置为默认为 true？

> ID：12170735
> 
> 赞同：1
> 
> 时间：2012-08-29T04:07:30.130
> 
> 标签：android

我需要默认选中列表视图中的复选框，以便它为`isChecked()`.

我正在使用中提供的 sdk 提供的简单多选列表项布局`android.R.layout.simple_list_item_multiple_choice`

我已经像这样设置了 ListView 适配器：

* * *

> 适配器 = 新的 ArrayAdapter(this,android.R.layout.simple_list_item_multiple_choice, list);
> 
> setListAdapter（适配器）；

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T05:57:29.063

我已使用以下代码在我的应用程序中设置复选框默认选中

```
adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_multiple_choice, list);
setListAdapter(adapter);
l1 = getListView();
for (i = 0; i < getListAdapter().getCount(); i++) {
l1.setItemChecked(i, true);
} 
```

和输出，列表视图带有多个复选框默认选中

# android - Android 4 的人脸检测 API 是否依赖于特定的手机？

> ID：12170737
> 
> 赞同：1
> 
> 时间：2012-08-29T04:07:45.050
> 
> 标签：android, android-4.0-ice-cream-sandwich, face-detection

我正在尝试为 Android 开发人脸识别系统，我选择使用 Android 4，因为它具有内置的人脸检测 API。我正在使用三星 nexus s，尽管它是最新的，而且是一款非常新的手机，但 .getMaxNumDetectedFaces() 方法返回 0。

我做错了什么还是这款手机实际上无法检测到人脸？我认为面部检测将包含在 Android 软件中，而不是手机特定软件中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T11:09:22.763

Android 中有两种不同的人脸检测 API。[依赖于 getMaxNumDetectedFaces() 的FaceDetectorListener](http://developer.android.com/reference/android/hardware/Camera.FaceDetectionListener.html)依赖于硬件，因此即使手机运行最新版本的 Android，它也可能无法在手机上启用。另一方面，[FaceDetector在软件中运行，并且从 Android 1 开始就受支持，因此您可以尝试一下。](http://developer.android.com/reference/android/media/FaceDetector.html)另一种选择是[为 Android 安装 OpenCV](http://opencv.org/platforms/android.html)。

另请参阅此问题的答案：[Android 人脸检测 MaxNumDetectedFaces](https://stackoverflow.com/questions/9578097/android-face-detection-maxnumdetectedfaces/10552040#10552040)

# loops - 第一列的数据丢失

> ID：12170742
> 
> 赞同：3
> 
> 时间：2012-08-29T04:08:14.750
> 
> 标签：loops, select, abap, opensql

我是ABAP的新手。我正在使用 open sql 尝试这个程序，当我执行程序时，第一列的数据总是丢失。我查了一下，语法似乎是正确的。我使用的是 kna1 表，查询也很简单。如果有人注意到这个问题，请帮助我。

```
DATA: WA_TAB_KNA1 TYPE KNA1,
      IT_TAB_KNA1 TYPE TABLE OF KNA1,
      V_KUNNR TYPE KUNNR.

SELECT-OPTIONS: P_KUNNR FOR V_KUNNR.

SELECT name1 kunnr name2
       INTO TABLE IT_TAB_KNA1 FROM KNA1
       WHERE KUNNR IN P_KUNNR.

LOOP AT IT_TAB_KNA1 INTO WA_TAB_KNA1.
  WRITE:/ WA_TAB_KNA1-KUNNR,' ', WA_TAB_KNA1-NAME1.
ENDLOOP. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T06:46:27.663

这是一个经典——我想每个 ABAP 开发人员都必须至少体验一次。

您正在使用结构的内部表`KNA1`，这意味着您的目标变量具有以下结构

```
 ccckkkkkkkkkklllnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN... 
```

作为客户`ccc`端，`kkkkkkkkkk`作为字段`KUNNR`（10 个字符），`lll`字段`LAND1`（3 个字符），然后`n`是字段`NAME1`35 秒，字段 35`N`秒`NAME2`，依此类推。

在您的`SELECT`声明中，您告诉系统检索列`NAME1`，`KUNNR`并且`NAME2`-**按该顺序！**这将产生一个具有以下结构的结果集，使用上面的命名法：

```
nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnkkkkkkkkkkNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN 
```

系统不会引发某种类型的错误，而是会尝试将数据压缩到目标结构中——主要是出于历史原因。因为第一个字段都是字符字段，所以会成功。结果：`MANDT`您的内部表的字段包含 的前三个字符`NAME1`，该字段`KUNNR`包含源字段的字符 4-13`NAME1`等等。

幸运的是，解决方案很简单：使用`INTO CORRESPONDING FIELDS OF TABLE`而不是`INTO TABLE`. 这将导致系统在填充目标表时使用基于字段名的映射。正如 tomdemuyt 提到的，也可以滚动您自己的目标结构——对于大型数据集，这是一个非常好的主意，因为否则会浪费大量内存。尽管如此，有时这不是一个选项，所以你真的必须知道这个错误 - 只要你看到它就识别它并知道该怎么做。

# javascript - 在更改事件上更改元素值

> ID：12170747
> 
> 赞同：3
> 
> 时间：2012-08-29T04:08:36.857
> 
> 标签：javascript, jquery, html

我有一张这样的桌子：

```
Column 1 | Column 2
-------------------
Textbox1 | Text1
Textbox2 | Text2 
```

我想更改`Textbox1`值，当光标移出时，它将运行`change`事件以将`Text1`值替换为`Success`.

```
<html>
    <head>
        <title>Demo - Change Value</title>
        <script type="text/javascript" language="javascript" src="js/jquery.js"></script>
        <script>
            $(document).ready(function() {
                $('#example table tbody tr td input').change(function() {
                    var rowEdit = $($(this).parents('tr').html());

                    rowEdit.closest('.sub').html('Success');
<!--                    $('.sub').html('Change');-->
                })
            })
        </script>
    </head>

    <body>
        <div id="example">
            <table>
                <thead>
                    <th>Column 1</th>
                    <th>Column 2</th>
                </thead>
                <tbody>
                    <tr>
                        <td><input type="text" /></td>
                        <td class="sub">123</td>
                    </tr>
                    <tr>
                        <td><input type="text" /></td>
                        <td class="sub">456</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </body>
</html> 
```

问题是，在我调用之后值没有改变，但`rowEdit.closest('.sub').html('success');`如果我使用.`Text1``Text2``$('.sub').html('Change');`

**`input`我的目标是在更改具有同一行的第 1 列的值时更改第 2 列内的文本。我怎样才能做到这一点？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T04:29:51.090

尝试这个：

```
$(document).ready(function() {
  $('#example table tbody tr td input').change(function() {
    var rowEdit = $(this).parents('tr');
    rowEdit.children('.sub').html('Success');
  })
}) 
```

由于您获取了父 tr 元素，因此 children() 应该可以解决问题。

这是[jsFiddle](http://jsfiddle.net/RTDSh/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T04:39:26.647

不确定我完全理解你想要做什么，但看看这个

[JsFiddle 演示](http://jsfiddle.net/7u9DU/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T04:40:54.820

试试这个....**[小提琴](http://jsfiddle.net/RTDSh/1/)**

```
$('#example input').change(function() {
   $(this).closest('tr').find('td.sub').html('Success');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T04:40:11.573

添加了对 JS Fiddle 的更改：http: [//jsfiddle.net/abhisheks/ZPLdu/2](http://jsfiddle.net/abhisheks/ZPLdu/2)

请告诉我，如果有任何其他变化。

# jquery - phonegap - ui呈现事件后的jquery

> ID：12170750
> 
> 赞同：0
> 
> 时间：2012-08-29T04:08:49.627
> 
> 标签：jquery, cordova

我使用 jquery 加载带有 ajax 的 html 并将其附加到正文中。我的问题是，在诸如galaxy nexus 之类的强大设备上，新的html 会在append 命令之后立即显示。但在慢速设备上，它需要延迟。

```
Galaxy Nexus:
append > displayed

Slow device:
append > blank white page > displayed 
```

添加新的 html 后，我将做一个动画 ex：页面转换。而且我需要知道 ui 何时完全呈现以避免由于空白白页而产生的不良影响

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T04:15:06.973

我不确定这是否会对您的情况有所帮助，但是在将内容添加到容器时我通常会做什么：

```
<div id="container"></div> 
```

如果容器内没有内容，我会先隐藏它。在 CSS 中

```
#container{
display: none; 
} 
```

然后在Javascript中我会：

```
$('#container").append('<span>Hello world</span>');
$('#container").show('slow'); 
```

# javascript - WebStorm，使用 Node Supervisor（所以每次代码更改后不必重新启动）？

> ID：12170755
> 
> 赞同：11
> 
> 时间：2012-08-29T04:09:34.190
> 
> 标签：javascript, node.js, intellij-idea, webstorm, node-supervisor

我使用 WebStorm 作为我的节点 IDE，并且总体上喜欢它，但是我无法弄清楚在通过 WebStorm 运行节点时如何使用节点管理器。有没有人让这个工作？我想我只是不确定如何传递`supervisor`参数，以便在启动节点文件时使用它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-26T21:25:27.303

全局安装主管： npm install -g supervisor

非调试的 WebStorm/IntelliJ 运行配置：

```
Name: supervisor app.js
Path to node: <same>
Node Parameters: /usr/local/lib/node_modules/supervisor/lib/cli-wrapper.js --exec /usr/local/bin/node --no-restart-on exit
Working directory: <same>
Path to Node App JS File: app.js 
```

这些路径适用于 Mac OS X 10.8，因此您必须将上述路径替换为您机器上的路径。接下来，您将能够在调试模式下运行它，但它不会单步执行代码。

对于调试，您可以使用远程调试器，也可以使用不同的运行目标进行调试，而无需使用主管。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-29T11:03:07.423

很神奇，我通过简单地将节点的路径更改为主管的路径就达到了目标。所以，我认为这也对你有用。

附言。我正在使用 WebStorm 6.0.1 版。

# javascript - 如何在 iframe 中找到与页面上的元素完全相同的元素

> ID：12170766
> 
> 赞同：1
> 
> 时间：2012-08-29T04:11:03.887
> 
> 标签：javascript, jquery

所以我需要在 iframe 中找到一个与网页中的元素完全相同的元素（iframe 属于同一页面）。我需要用 jquery 弄清楚没有 id 的元素的索引是什么，这样我就可以在 iframe 中获得相同的元素。

编辑：如何找到元素的索引？

即对于这个html：

```
<div>
    <a>1</a>
    <a>2</a>
    <a>3</a>
    <a id="someA">4</a>
    <a>5</a>
    <a>6</a>
    <a>7</a>
</div> 
```

我如何`$('a')[index]`从它的 jQuery 对象中找到随机锚元素之一的索引（这样我就可以做到）？

（通过做`$('#someA').siblings()[Math.floor(Math.random()*6)].getIndex()`）

jsfiddle：http: [//jsfiddle.net/YP5hQ/2/](http://jsfiddle.net/YP5hQ/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:47:16.463

好吧，就是这样：http: [//jsfiddle.net/dan_barzilay/ZB2vE/](http://jsfiddle.net/dan_barzilay/ZB2vE/)

但是您的功能全错了..我建议您将了解：[`.get()`](http://api.jquery.com/get/)和[`.index()`](http://api.jquery.com/index/)

***请注意，我没有使用任何原生 javascript**。当您拥有出色的*jQuery*时，就没有必要了:)

**我将这一行：`$(elem).html(c);`改为：`$(elem).html(h);`因为我认为你应该这样做，如果不是简单地`h`改变`h``c`

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T16:41:51.200

你可以使用这个函数，它基本上需要一个元素并向后工作以查看它的确切路径。我没有将它用于您的计划，但我不明白为什么它不起作用。

```
function mirrorpath ( elm ) {
  /// add an indentifying segment to the path for each parent element
  var addtopath = function( elm ){
    var node = $(elm), ident = '';
    /// first off, add our nodeName to our identity
    ident += node.get(0).nodeName;
    /// if we have an id, then we are specific enough
    if ( node.attr('id') ) {
      ident += '#' + node.attr('id');
    }
    /// otherwise
    else{
      /// if we have a class, that's good :)
      if ( node.attr('class') ) {
        ident += '.' + node.attr('class').split(' ').join('.');
      }
      /// now make it more accurate with an index offset
      ident += ':eq('+node.prevAll(ident).add(node).index(node)+')';
    }
    /// add our new path segment
    path.push( ident );
  }
  /// step through the target elements parents and build our path
  var parents = $(elm).parents().get(), path = [], i = parents.length;
  while ( i-- ) { addtopath( parents[i] ); }; addtopath( elm );
  /// implode the path and return
  return path.join(' ');
} 
```

返回的路径应该评估并在主页和 iframe 上找到您的元素 - 您所要做的就是将路径反馈回 jQuery。我不得不承认你的问题是一个相当奇怪的要求；）

附言。我没有在非常复杂的深度元素中测试过这段代码，所以在某些情况下它可能会失败......它也可以通过不使用数组进行路径存储来优化（~~*并愚蠢地在每次迭代中重新加入......*~~ *我刚刚更新了代码以优化这个问题）*但是感谢 jQuery 和 Sizzle，它适用于我迄今为止所需要的一切。

## 编辑/更新

以防万一这很有用，我决定为自己修改一下代码并将其转换为 jQuery 插件。现在有一些关于实际 css 路径的生成的优化，以及当 jQuery 解析路径时的优化。

```
(function($){
  $.fn.cssPath = function () {
    var paths = [], addtopath = function( elm ){
      if ( elm && (elm.nodeName || (elm instanceof $ && elm.length)) ) {
        var node = $(elm), ident = String(node.get(0).nodeName).toLowerCase();
        /// if we have an id, then we are specific enough
        if ( node.attr('id') ) {
          ident += '#' + node.attr('id');
        }
        /// otherwise
        else{
          /// if we have a class, that's good :)
          if ( node.attr('class') ) {
            ident += '.' + node.attr('class').split(' ').join('.');
          };
          /// make sure there is a point to being more specific (leads to nicer paths)
          if ( node.siblings(ident).length > 0 ) {
            /// now make it more accurate with an index offset
            //ident += ':eq('+node.prevAll(ident).add(node).index(node)+')';
            ident += ':nth-child('+(node.index()+1)+')';
          };
        };
        /// add our new path segment
        return ident;
      };
    };
    this.each(function(){
      /// find the parents for this element, and add the current element to the list
      var parents = $(this).parents().get(), path = '', i = parents.unshift(this) && parents.length;
      /// build up the path string per parent
      while ( i-- ) { path += (path ? ' > ' : '') + addtopath( parents[i] ); };
      /// return the path to our paths list
      paths.push(path);
    });
    /// if one path, return string, if more return array
    return ( paths.length > 1 ? paths : paths[0] );
  }
})((typeof jQuery != undefined) && jQuery); 
```

用法：

```
var path = $('#my_target_element').cssPath(); 
```

示例输出：

```
html > body > div#BlogArchive1 > ul.hierarchy > li.archivedate.expanded > a 
```

# java - 在 BlackBerry 中调用 Web 服务调用时，应用程序挂起

> ID：12170768
> 
> 赞同：1
> 
> 时间：2012-08-29T04:11:48.307
> 
> 标签：java, web-services, rest, blackberry

我正在创建我的第一个尝试连接到 REST Web 服务的黑莓应用程序。我尝试了在互联网上找到的示例。请参考此链接：http: [//mobile-development.org/index.php/blackberry/how-to-call-restful-web-services-in-blackberry](http://mobile-development.org/index.php/blackberry/how-to-call-restful-web-services-in-blackberry)

我尝试在我的简单 BlackBerry 应用程序中实现它，这是在 BlackBerry Plug-in for Eclipse IDE 中创建新 BlackBerry 项目时自动创建的应用程序。我只是将代码（字面意思是复制并粘贴）放在我的按钮中，单击该按钮时将执行此类代码。但是，当我单击按钮时，应用程序挂起。

当我实现一个在输出日志中简单地输出“Hello”的代码时，应用程序工作得很好。背后的原因是什么？我需要在单独的线程中运行 Web 服务调用吗？请帮忙。先感谢您。

------------------请阅读以下内容----------

我注意到我的应用程序挂起，因为它等待来自 Web 服务调用的响应至少 2 分钟。我通读了这个：[http ://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800451/800563/What_Is_-_Different_ways_to_make_an_HTTP_or_socket_connection.html?nodeid=826935&vernum=0](http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800451/800563/What_Is_-_Different_ways_to_make_an_HTTP_or_socket_connection.html?nodeid=826935&vernum=0)-- 并在 url (http://yourwebserviceurl.com;deviceside=true") 的末尾添加了“deviceside=true”。它现在工作正常。也许正确的实现是在后台或在一个单独的线程并设置我还不知道的超时。我仍然对是否将设备端设置为真/假感到困惑。当我在运行我的应用程序时，我是否应该将设备端设置为真如果我希望模拟器在实际设备中运行，那么只需将其更改为 false？这是我现在发现的，或者你也可以帮助我解决这个问题。;-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T05:23:30.167

他们给出的代码用于 HTTP 连接，完全没问题，但是我们需要在线程中调用此代码，因为 ui 也可以在线程中工作，它被卡住了。所以你需要在这里使用线程概念。查看提供的样品

```
Eclipse helios\plugins\<sdk version>\components\samples\com\rim\samples\device\httpdemo 
```

每当您想在后台线程中更新 UI 时，请使用

```
UiApplication.getUiApplication().invokeLater(new Runnable() 
    {
        public void run()
        {
            <Update UI>
        }
    }); 
```

我希望它可以帮助你。

# sql - SQL获取最新记录

> ID：12170769
> 
> 赞同：1
> 
> 时间：2012-08-29T04:11:48.887
> 
> 标签：sql, select

很确定我的问题标题很糟糕，但无论如何我有一个名为 invoices 的表格，在该表格内每个发票都有一个 ID，每个 ID 都有一个客户 ID，因此客户将有多个发票。我正在尝试获取最新的发票余额，我写的代码不起作用，谁能告诉我我做错了什么？

```
SELECT c.clientid,
    c.clientname,
    c.billingdate,
    (SELECT remainingbalance 
     FROM invoice i 
     WHERE i.client = c.clientid) AS remaining
FROM client c
ORDER BY clientname 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T04:16:41.447

利用`INNER JOIN`

**尝试这个**

更新：我已经修改了我的答案，看看是否有效

```
 SELECT c.clientid,
 c.clientname,
 c.billingdate,
 d.remainingbalance
 FROM client c 
 INNER JOIN (
             SELECT  clientid,
             MAX(invoiceid) invoiceid
             FROM    invoice
             GROUP BY  clientid
             ) d
 ON c.clientid = d.clientid
 ORDER BY c.clientname 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T04:23:58.740

马上，尝试类似的东西

```
SELECT  c.clientid, 
        c.clientname, 
        c.billingdate, 
        (
            SELECT  TOP 1 
                    remainingbalance  
            FROM    invoice i  
            WHERE   i.client = c.clientid
            ORDER BY i.invoiceid DESC
        ) AS remaining 
FROM    client c 
ORDER BY    clientname 
```

您使用的是哪种 RDMS？

一种不同的方法如下

```
SELECT  c.clientid,  
        c.clientname,  
        c.billingdate,
        rb.remainingbalance
FROM    client c  INNER JOIN
        (
            SELECT  i.clientid,
                    i.remainingbalance 
            FROM    invoice i INNER JOIN
                    (
                        SELECT  clientid,
                                MAX(invoiceid) invoiceid
                        FROM    invoice
                        GROUP BY    clientid
                    ) m ON  i.invoiceid = m.invoiceid
                        AND i.clientid = m.clientid
        ) rb    ON  c.clientid = rb.clientid
ORDER BY clientname 
```

首先获取每个客户的“最新”发票，然后从该发票中获取所需的详细信息并与客户信息一起显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T04:17:57.750

在您的子选择中按 i.id DESC 排序

# php - 将所有cookie设置为变量？

> ID：12170770
> 
> 赞同：0
> 
> 时间：2012-08-29T04:11:54.360
> 
> 标签：php

我正在尝试将所有活动 cookie 设置为变量，其中名称将对应于 cookie 的名称，我尝试使用变量变量来完成。[http://php.net/manual/en/language.variables.variable.php](http://php.net/manual/en/language.variables.variable.php)

```
function setcookie_vars() {
    if(isset($_SERVER["HTTP_COOKIE"])) {
        $cookies = explode(";", $_SERVER["HTTP_COOKIE"]);
        foreach($cookies as $cookie) {
            $parts = explode("=", $cookie);
            $name = trim($parts[0]);
            $value = trim($parts[1]);
            $$name = $value;
            return $$name;
        }
    }
}
print_r(${$test}); // should output the value for $_COOKIE["test"]; 
```

例如，如果 cookie 的名称是“test”，那么变量的名称将是 $test，并且在 cookie 中为该名称设置了相同的值。我尝试使用预先设置的 cookie 对此进行测试，然后我得到了（并且我检查了 cookie 是否已经设置）：

```
 Notice: Undefined variable: test in...
    Notice: Undefined variable: in... 
```

我在网上找不到任何类似的问题，可能是因为它是相当定制的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T04:17:31.223

将您的整个功能替换为：

```
extract($_COOKIE, EXTR_PREFIX_ALL, 'cookie');

echo $cookie_nameOfCookie; 
```

# c++ - 关于这个智能指针类

> ID：12170772
> 
> 赞同：0
> 
> 时间：2012-08-29T04:12:27.683
> 
> 标签：c++

我在一本书中遇到了这段代码，一个简单的智能指针，对此有几个问题：

```
 template <class T>
class SmartPointer {
 public:
    SmartPointer(T * ptr) {
        ref = ptr;
        ref_count = malloc(sizeof(unsigned));
        *ref_count = 1;
    }
    SmartPointer(SmartPointer<T> & sptr) {
        ref = sptr.ref;
        ref_count = sptr.ref_count;
        ++*ref_count;
    }
    SmartPointer<T> & operator=(SmartPointer<T> & sptr) {
        if (this != &sptr) {
           ref = sptr.ref;
           ref_count = sptr.ref_count;
           ++*ref_count;
        }
        return *this;
    }
    ~SmartPointer() {
        --*ref_count;
        if (*ref_count == 0) {
           delete ref;
           free(ref_count);
           ref = ref_count = NULL;
        }
    }
    T* operator->() { return ref; }
    T& operator*() { return *ref; }
 protected:
    T * ref;
    unsigned * ref_count; 
}; 
```

以下是我的问题： 1\. 为什么使用 malloc 初始化 ref_count？为什么不能是 ref_count = new unsigned(); 2.=操作符函数，不需要清理旧值吗？此代码似乎会导致引用计数错误。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T04:55:20.397

你这本书很垃圾。你需要把它扔掉。这段代码甚至无法编译。

1.  `malloc`并不比`new unsigned(1)`. `malloc()`返回`void*`需要转换`unsigned*`为显然这里没有完成的返回。
2.  你是对的，需要注意之前指向的对象的引用计数。

为什么不尝试研究`boost::shared_ptr`or的实现`std::shared_ptr`呢？无论如何，您很可能最终会使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T04:26:41.667

> **为什么使用 ref_count 初始化`malloc`？**

它也可以使用`std::new`。`new`和之间的主要区别在于`malloc`，`new`除了分配动态内存外，它还提供了一个通过调用其构造函数来适当初始化对象的机会。对于像（如您的示例代码）这样​​的内置数据类型`unsigned int`，本质上这个重要的区别并不重要.
请注意，通常`std::new`实现也本质上调用`malloc`内存分配。

> **函数，`= operator`不需要清理旧值吗？此代码似乎导致引用计数错误**

确实有错误。
在`= operator`这个实现中检查指针是否被分配给自己，如果是，它正确地将引用计数增加`1`，因为在调用之后还有一个实体共享这个指针`=`。
如果场景不是自分配，那么实现应该减少分配给 by 的指针的引用计数`1`，检查计数是否`0`为零，如果它为零，则解除分配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T05:06:44.520

这是糟糕的代码。自赋值是非惯用的，糟糕的使用`malloc`，错误的引用计数实现，`const`在复制赋值运算符/构造函数参数上没有，并且不处理`SmartPointer`指向 NULL 的 s。把你的书扔掉，找一本有用的。

# iphone - 加载时隐藏 TableView 并在搜索栏找到结果时将其激活

> ID：12170776
> 
> 赞同：-3
> 
> 时间：2012-08-29T04:13:04.993
> 
> 标签：iphone, objective-c, ios, xcode

在 iPhone 或 iPod 中，当我们进入页面搜索时，我们只看到搜索栏，但如果我们键入以查找一个应用程序，它将显示带有表格视图的结果，所以我的问题是我们如何才能做到这一点？

![在此处输入图像描述](../Images/df392124078f02d886c06370c0f1fb57.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T04:35:04.273

最初使表隐藏并搜索任何内容，重新加载 tableview 而不是 show table 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T04:42:53.083

[UISearchDisplayController](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UISearchDisplayController_Class/Reference/Reference.html)是这个问题的答案。这个控制器是内置的`UISearchBar`。

此外，每当您在搜索栏中搜索时，此控制器本身将管理隐藏和取消隐藏（或使透明）tableview。

[这](http://developer.apple.com/library/ios/#samplecode/TableSearch/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007848)是 Apple 提供的示例代码，可以帮助您。

希望我的回答对你有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T04:25:09.380

它用于 UIsearchDisplayController 控制器，其中包含搜索栏和表格视图，当搜索栏找到记录时，它会显示在表格视图中，如果您想要示例，请查看此处的链接[http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/参考/UISearchDisplayController_Class/参考/Reference.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UISearchDisplayController_Class/Reference/Reference.html)

# iphone - MKMapview 在 iPad 中仅显示 50% 的宽度

> ID：12170777
> 
> 赞同：0
> 
> 时间：2012-08-29T04:13:20.523
> 
> 标签：iphone, objective-c, ios, mkmapview

嗨，伙计们，我已经实现了一个 MKMapView，它在 iPhone 100% 的屏幕尺寸上运行良好，但在 iPad 上它的高度为 100%，但只有最左边的 40% 宽度，我尝试了一些方法来让它全宽但没有运气。 .

寻找建议，关于如何修复此错误的建议。在我的故事板中，在 MkMapView 上，我选择了所有适当的东西，即要填充的比例，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T07:02:51.390

```
your_mapView=[MKMapVIew alloc]initWithFrame:[[UIScreen mainScreen] bounds]]; 
```

或者

```
your_mapView.frame = self.view.bounds; 
```

# php - 在提出内存问题之前，php 数组可以有多大？

> ID：12170778
> 
> 赞同：10
> 
> 时间：2012-08-29T04:13:19.917
> 
> 标签：php, mysql, caching, memory

我们的应用程序目前的工作方式如下：

```
class myClass{

    private $names = array();

    function getNames($ids = array()){
         $lookup = array();

         foreach($ids as $id)
             if (!isset($this->names[$id]))
                $lookup[] = $id;

         if(!empty($lookup)){
              $result;//query database for names where id in $lookup
                      // now contains associative array of id => name pairs
              $this->names = array_merge($this->names, $result);
         }

         $result = array();
         foreach($ids as $id)
             $result[$id] = $this->names[$id];

         return $result;
    }
} 
```

效果很好，除了它仍然可以（并且经常这样做）导致多个查询（在这种情况下为 400+）。

因此，我正在考虑简单地查询数据库并使用数据库中的`$this->names`每个名称填充数组。

但是我担心在执行此操作时我应该开始担心数据库中有多少条目？（数据库列是 varchar(100)）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T04:29:53.320

你有多少内存？在高峰访问期间，您的服务通常支持多少并发用户？这些是相关的信息。没有他们，任何答案都是无用的。一般来说，这是一个很容易通过负载测试解决的问题。然后，找到瓶颈并优化。在那之前，让它工作（在合理的范围内）。

## 但 ...

如果你真的想知道你在看什么......

如果我们假设您不存储多字节字符，那么您有 400 个名称 * 100 个字符（假设每个名称都达到了您的字符限制）......您正在查看约 40Kb 的内存。看起来太微不足道了，不是吗？

显然，您将从 PHP 中获得其他开销来保存数据结构本身。您可以使用数据结构`SplFixedArray`而不是 plain更有效地存储东西`array`吗？可能——但是你会失去高度优化的`array_*`功能，否则你必须操纵列表。

用户会使用您计划在内存中缓冲的每一个条目吗？如果您的应用程序必须使用它们，那么它们有多大并不重要，不是吗？将大量不需要的信息“仅仅因为”保留在内存中并不是一个好主意。您绝对不想做的一件事是在每次页面加载时查询数据库以获取 4000 条记录。至少您需要将这些类型的事务放入内存存储中，如 memcached 或使用 APC。

这个问题——就像计算机科学中的大多数问题一样——只是一个受约束的最大化问题。除非您知道可以使用的变量，否则无法正确解决它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T04:30:12.010

一旦您获得超过一千项左右的键控查找开始变得非常缓慢（当您访问特定键时会有延迟）。你可以用 ksort() 来解决这个问题。（我看到一个脚本从 15 分钟的运行时间缩短到 2 分钟以下，只需添加一个 ksort）

除此之外，您实际上仅受内存限制。

更好的方法是在脚本中构建一组丢失的数据，然后使用 IN 列表在一个查询中获取它们。

如果您可以提供帮助，您真的不应该浪费内存来存储用户永远不会看到的数据。

# git - 来自 github 的子目录作为 git 子模块

> ID：12170779
> 
> 赞同：4
> 
> 时间：2012-08-29T04:13:27.823
> 
> 标签：git, github, git-submodules

github 上的许多 python 存储库都使用 setuptools 的项目结构（例如[https://github.com/omab/django-social-auth](https://github.com/omab/django-social-auth)）。但是我想将带有模块核心的文件夹作为子模块添加到我的项目中。我可以将远程仓库中的子目录用作我的仓库中的子模块吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T05:07:14.737

您可以尝试`sparse checkout`与子模块一起使用。

[将 Git 子模块设置为浅克隆和稀疏结帐？](https://stackoverflow.com/questions/6238590/set-git-submodule-to-shallow-clone-sparse-checkout)

# haskell - 有没有办法让 parsec 报告“shift-reduce”冲突？

> ID：12170780
> 
> 赞同：8
> 
> 时间：2012-08-29T04:13:33.323
> 
> 标签：haskell, parsec

我正在玩 parsec 并意识到我有一个模棱两可的语法。显然这是我的错误，但我有点习惯于 yacc 样式的解析器生成器，让我知道我很愚蠢。Parsec 只是按照你给它解析器的顺序吃字符（是的，我知道`try`）。

有什么方法可以让 parsec 告诉我什么时候我的语法不是左因子？对我有用的程序很棒。

谢谢！

（我知道 shift-reduce 与另一种解析器技术有关。我只是想描述模棱两可的语法。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T07:10:02.400

我不是 Parsec 专家，所以我可能会被纠正，但我认为这是不可能的，原因很简单，Parsec 对你的语法一无所知。

或者换句话说，虽然你的语法可能是模棱两可的，但你的 Parsec 解析器不是，并且程序无法确定其他一些 parsec 组合器的排列，它为等效输入产生不同的输出，也是一个有效的表示未指定的语法。

由于您确实有语法，因此您可能更喜欢使用[happy](http://www.haskell.org/happy/)和[alex](http://www.haskell.org/alex/)，这将为您提供更像 lexx/yacc 的体验。

一个有趣的项目可能是调整[BNFC](http://hackage.haskell.org/package/BNFC)以生成 AST 的 parsec 组合子来表示语法，但我怀疑这将是一项不平凡的任务。

# visual-studio-2010 - 创建 Web 部件时如何将 SharePoint 添加为数据源？

> ID：12170781
> 
> 赞同：1
> 
> 时间：2012-08-29T04:13:50.213
> 
> 标签：visual-studio-2010, sharepoint, datasource

我使用 Web 部件模板在 VS 2010 中创建了一个 Web 部件。现在我正在尝试将我的 sharepoint 服务器添加为某些控件的数据源，但 SharePoint 未显示在数据源配置向导中。唯一出现的是 XML 脚本。

当我点击菜单栏中的“数据”时，只有“模式比较”、“数据比较”、“Transact-SQL 编辑器”和“模式视图”选项

如何让 SharePoint 显示在向导中？

# php - 如何使用 php PDO 在 sqlite3 中获取第一行数据

> ID：12170785
> 
> 赞同：4
> 
> 时间：2012-08-29T04:14:16.107
> 
> 标签：php, sqlite, pdo

如何使用 php PDO 在 sqlite3 中获取第一行数据

根据我下面的代码，第一行数据不显示，因为我使用记录集检查行是否返回。

知道如何从记录集中获取所有数据吗？

**我的代码。**

```
 try {
        $dbhandle = new PDO("sqlite:".$database);
    } catch (PDOException $e) {
        echo 'Connection failed: ' . $e->getMessage();
    }

    $result=$dbhandle->query("select * from table");

    if($result)
    {
        if($rs1==$result->fetchColumn())
        {
            while ($rs1 = $result->fetch(PDO::FETCH_ASSOC, PDO::FETCH_ORI_NEXT)) 
            {
                echo "<pre>";
                print_r($rs1);
                echo "</pre>";
            }
        }
        else
        {
            // error message
        }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T04:33:51.360

如果您只想获取第一行，则无需使用循环。

```
$result=$dbhandle->query("select * from table");
if ($result) {
  $row = $result->fetch(PDO::FETCH_ASSOC);
  echo "<pre>";
  print_r($row);
  echo "</pre>";
} 
```

***更新：*** 获取所有行。

```
$result=$dbhandle->query("select * from table");
$rows = array();
if ($result) {
  while ($row = $result->fetch(PDO::FETCH_ASSOC)) {
     $rows[] = $row;
  }
  if ($rows) {
     echo "<pre>";
     print_r($rows);
     echo "</pre>";
  } else {
     echo "No results";
  }
} 
```

# jira - JIRA 中的工作流程

> ID：12170787
> 
> 赞同：1
> 
> 时间：2012-08-29T04:14:25.340
> 
> 标签：jira

我有一个为 Android 和 iOS 开发的应用程序；两者都有自己的 JIRA 项目。

我希望能够在 Greenhopper 中创建单个用户故事并将它们分配给两个项目，而无需像今天那样进行克隆/链接。

有没有办法做到这一点，或推荐的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-22T22:15:47.620

我认为如果您更好地定义最终目标，例如“如果用户故事包含 iOS，它应该显示在 X 仪表板和 Y 过滤器中”或“用户应该能够从故事详细信息视图访问相关问题的 X 过滤器” ，你可能会得到更具体的答案。

也许您有一个来自无法看到他的个人资料图片的 Android 用户的用户故事，因此您在 Android 项目中创建它。收集反馈后，您发现他们最初从他朋友的 iPhone 上传了不受支持的文件类型。此时，您可以创建一个 iOS 问题或故事，并将其链接到原始 Android 故事（尽管您提到这不是最佳的），或者您可以将新的 iOS 信息添加到原始 Android 票证。

如果您定义了这些方法会产生的复杂性，那么为您的特定问题提供解决方法会更容易。可以使用 JQL（Jira 查询语言）在单个过滤器中返回来自多个项目的结果，并且可以报告该特定过滤器。您还可以使用标签或自定义字段来报告跨项目的问题，然后在 Greenhopper/Jira Agile 中使用这些 JQL（过滤器）查询。

[https://confluence.atlassian.com/display/AGILE/Configuring+Filters](https://confluence.atlassian.com/display/AGILE/Configuring+Filters)

# objective-c - Xcode 和 XIB 自我文档

> ID：12170788
> 
> 赞同：10
> 
> 时间：2012-08-29T04:14:28.050
> 
> 标签：objective-c, ios, xcode4, ide, documentation

是否有记录许多 Xcode 绑定、出口和`IBAction`绑定、键值绑定等的工具？我查看了[Doxygen](http://www.doxygen.nl/)和[HeaderDoc](http://developer.apple.com/library/mac/#documentation/developertools/Conceptual/HeaderDoc/intro/intro.html)上的线程，但是这些文档程序文件，用于描述类等，但似乎没有涵盖 Xcode 拖放启用的大量“隐藏”链接？

一个具体的例子，我可以使用 XIB 编辑器为`IBAction`我的窗口上的每个控件创建一个在一个或多个文件中定义的一个或多个类/实例中的方法 - 我想要所有这些的一个列表，显示控件类型和名称、源文件、类和方法——或者图形表示会更好。然后一个类似的键值路径列表链接到 arrayControllers 等。

我是新手，所以如果我遗漏了一些明显的东西，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T05:24:42.747

不，没有记录 .xib 文件的工具，除非您将文件本身视为文档的一部分。（毕竟您确实说过“自我记录”。）.xibs 存储为 XML，所以如果您真的想提取数据，它就在那里。

您在 IB 中创建的操作会出现在您的源代码中。您可以在此处添加描述发送操作的对象的注释，但这会在很大程度上忽略首先使用 .xib（和操作）的意义，即将 UI 元素与控制器分离。

如果文档的目的是让其他开发人员更容易理解您的项目，那么您可能希望在创建 .xib 文档工具遇到很多麻烦之前获得更多的 Objective-C 经验。给定一个 .xib 和相关的头文件，任何称职的 Obj-C 程序员都应该能够轻松分辨哪些控件与哪些操作相关联，或者调试该区域中的问题。人们使用 .xib 和 .nib 文件已有 20 多年了——缺乏单独的文档工具可能是一个很好的迹象，表明这样的东西可能不像最初看起来那么有用。

# shell - 用于内核开发的低成本 Linux 开发板

> ID：12170791
> 
> 赞同：-1
> 
> 时间：2012-08-29T04:14:54.140
> 
> 标签：shell, operating-system, kernel, embedded-linux

我想用 shell 构建自定义 Linux 内核。我的硬件模块很差。有没有提供定制开发的中文板？我没有找到任何低成本的 Linux 板或 android 板。如果我得到一个便宜的平板电脑，我可以用它来做我的实验吗？我的意思是我可以访问 nand of nor flash 来刻录代码或设置引导加载程序吗？我需要一些成本非常低的板，我想在其中发现内核组件。谁能建议我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T06:20:51.327

与几年前 SoC 制造商的昂贵（300-500 美元）评估板相比，现在有多种选择“合理的价格”，如果不是非常便宜的话，可以运行 Linux 的 ARM 板。

具有运行 Linux 的 MMU 的 ARM SoC 的成本最低的主板可能是[Raspberry PI](http://www.raspberrypi.org/)，其零售价约为 25 美元（或“B”版本为 35 美元），并且应该可以在全球范围内使用。该板旨在成为软件开发的教育设备，因此其 I/O 功能面向家庭或消费者。Beagle 系列等其他板更多针对硬件黑客和工业用户，并具有更好的 I/O 扩展能力。

不是裸板，而是带有遥控器的机箱中的单元，例如带有 SATA 磁盘端口的[Mele A1000或 A2000。](http://rhombus-tech.net/allwinner_a10/hacking_the_mele_a1000/)这些作为可破解的媒体播放器出售，并带有消费者就绪固件 (Android)。

**附录**

可用于运行 Linux 的 40 多种开发板和模块的比较列表在[这里](http://java.net/downloads/mobileandembedded/Assets/SBC_comparison44-1.pdf)

**附录 2**

另一个开发板和模块的比较列表（虽然不是所有的都可以支持Linux）在[这里](https://www.eewiki.net/display/Resources/Comparison+of+Embedded+System+Development+Platforms)

**附录 3**

01/2015 的四十个 SBC的[更新列表](http://linuxgizmos.com/ringing-in-2015-with-40-linux-friendly-hacker-sbcs/)，其中九个成本低于 50 美元。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T13:18:52.043

[Odroid U2](http://www.hardkernel.com/renewal_2011/products/prdt_info.php). With wifi capabilities will and 2GB ram will sell for $120-$150.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T02:38:29.757

还有49 美元的柜子，ATM [。](http://cubieboard.org/)

> 橱柜的特点：
> 
> ```
> 1G ARM cortex-A8 processor, NEON, VFPv3, 512KB L2 cache
> Mali400, OpenGL ES GPU
> 1GB DDR3 @400MHz
> HDMI 1080p Output
> 100M Ethernet
> 2 USB Host, 2 MMC slot, 1 ir
> 96 extend pin including i2c, spi, lcd, sata, sensors, ..
> Running Android, Ubuntu and other Linux distributions 
> ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T04:20:08.327

市场上很少有价格合理的ARM板。就像**BeagleBoard**（印度 8-9k）是完整的 ARM 板，而**BeagleBone**的精简版（印度大约 4k）。对于 x86 Intel 板，有一个由 pheonix 组装的，将近 12k。

所有这些硬件都可以定制。您可以刷新 NAND 芯片/BIOS。从头开始放置您的引导加载程序、内核、文件系统。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T15:53:03.187

最便宜的开发目标当然是虚拟机（如果您想保持与开发机器相同的架构）或模拟器，例如 QEMU（如果您想要不同的架构）。

虽然模拟一个完整的图形系统（如高分辨率安卓平板电脑）并实际模拟处理器甚至可以加载现代机器，但支持控制台模式或中等分辨率系统应该具有可容忍的性能。如果架构相同，可以使用虚拟化，性能应该可以满足日常使用（VM 解决方案通常用于最终用途，而不仅仅是用于开发测试......）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-31T10:08:07.973

## 感谢拉维·普哈尔

### 文档来源[链接](http://raviyp.in/index.php/embedded/122-low-cost-linux-boards-in-india)

我想从微控制器世界转移到嵌入式 linux 世界，所以开始寻找便宜的 ARM Linux 开发板。在网上闲逛时，我选择了一些基于 ARM 的板，这些板在印度很容易买到，

### AT91RM9200 板：

```
Atmel ARM9 based development board running @ 180MHz comes packed with,

16MB NOR flash,
32MB NAND flash,
32MB SDRAM,
Ethernet, USB,
UART,
CAN,
LCD,
SDCARD,
LED's,
Switches.
This board is available for order at RhydolabZ website at the price of Rs 8,999/- 
```

### 比格犬骨板：

```
This board comes with a 720 MHz Super-scaler ARM Cortex A8 processor manufatured by Texas instruments. Beagle bone comes packed with a

256MB RAM,
USB,
Ethernet support,
SD CARD.
This board is a made specifically for hardware hacking, so the manufacturer has left out most of the processor pins accessible by connectors.

Beagle bone is available for order @ element14 website at the price of Rs 6,669/- 
```

### 比格犬板：

```
This board is built to give a laptop like performance and comes with a 1 GHz Super-scaler ARM Cortex A8 processor manufatured by Texas instruments. Beagle board comes packed with a

512MB RAM,
USB,
Ethernet,
S-Video,
Camera port,
Stereo IN/OUT,
micro SD CARD slot,
LCD expansion.
Beagle board is available for buying @ NSK electronics website at the price of Rs 9,500/- 
```

### 迷你2440 | 友好 ARM 的 S3C2440 AMR9 板：

```
400 MHz Samsung S3C2440A ARM920T (max freq. 533 MHz)
64 MB SDRAM, 32 bit Bus
64 MB / 128 MB / 256 MB / 1GB NAND Flash and 2 MB NOR Flash with BIOS
256 Byte EEPROM (I2C)
SD-Card socket
DB9 connector (RS232), total: 3 serial port connectors
USB
3.5 mm stereo jack
Condenser microphone with connector
Ethernet
CR1220 Real Time Clock with battery
PWM buzzer
20 pin (2.0 mm) Camera interface
41 pin (1.0 mm) connector for FriendlyARM Displays and VGA Board
4 wire resistive touchscreen interface
6 push buttons and 1 A/D pot
4 LEDs
This board is avaialble for buying at NSK Electronics website at the price of Rs 7800/- 
```

### 树莓派：

```
The RASPBERRY PI is the cheapest ARM11  powered linux capable single board computer board you will ever find. This board runs an ARM11 processor @700MHz and comes with a 512 Mega Bytes of RAM memory. Here are the features of the board,

512MB SDRAM,
Ethernet, USB,
HDMI,
LINUX FEDORA OS,
ARM 11 processor @700MHz
BCM2835 SoC based chipset

RASPBERRY PI model B is available for purchase at element14.com website at the price of  Rs.2750/-

RASPBERRY PI kit is also available for purchase from Tenet technotronics at the price of Rs.4000/- 
```

### A13-OLINUXINO：

```
Its a development board by Olimex powered by the A13 processor from Allwinner technology from China. Here are the features of the board,

A13 Cortex A8 processor at 1GHz, 3D Mali400 GPU
512 MB RAM
6-16VDC input power supply, noise immune design
3 + 1 USB hosts, 3 available for users, 1 leads to onboard pinout
1 USB OTG which can power the board
SD-card connector for booting the Linux image
VGA video output
LCD signals available on connector so you still can use LCD if you diasble VGA/HDMI
Audio output
Microphone input
RTC PCF8536 on board for real time clock and alarms
5 Keys on board for android navigation
UEXT connector for connecting addtional UEXT modules like Zigbee, Bluetooth, Relays, etc
GPIO connector with 68/74 pins and these signals
Optional low-cost 7" LCD with touchscreen
17 for adding NAND flash;
22 for connecting LCDs;
20+4 including 8 GPIOs which can be input, output, interrupt sources;
3x I2C;
2x UARTs;
SDIO2 for connectinf SDcards and modules;
5 system pins: +5V, +3.3V, GND, RESET, NMI
This board is available for purchase from Tenet technetronics India at the price of Rs. 4652 /- 
```

### IMX233-OLINUXINO-MICRO：

```
This mini development board is based on the Freescales i.mx233 processor from freescale semiconductors.

Here are the features of the board,

iMX233 ARM926J processor at 454Mhz
64 MB RAM
SD-card connector for booting the Linux image
TV PAL/NTSC video output
1 USB High Speed Host
three Buttons
2x30 pin GPIO for connection of other hardware
PCB dimensions: 3.00'' x 1.70'' (76.2mm x 43.2mm)
Nominal dimensions: 3.40'' x 1.70'' (86.4mm x 43.2mm)
This board is available for purchase from Tenet tech website India at the price of Rs. 2481 /- 
```

### IMX233-OLINUXINO-MINI：

```
The board is the mini version of the Olinuxino board mentioned above. Here are the features of this mini linux board

iMX233 ARM926J processor at 454Mhz
64 MB RAM
SD-card connector for booting the Linux image
TV PAL/NTSC video output
3 USB High Speed Host
optional WIFI RTL8188CU module
Stereo Audio Input
Stereo Headphones Audio Output
two Buttons
UEXT connector for connection of different peripherial modules
40 pin GPIO for connection of other hardware
Board is in shape for fit inside Pactec JM42 plastic box
Power supply input 6-16VDC
PCB dimensions: 3.70'' x 2.15'' (94.0mm x 54.6mm)
Nominal dimensions: 3.70'' x 2.65'' (94.0mm x 67.3mm)
This board is available for buying @Tenet tech website at the price of Rs. 3435 /- 
```

# php - isset 内联验证语法问题

> ID：12170795
> 
> 赞同：0
> 
> 时间：2012-08-29T04:15:21.383
> 
> 标签：php

我正在构建一个表单，目前正在验证输入。

基本上我想要做的是检查他们是否输入了一些东西，如果是这样，将其转义并将其添加到变量中，否则将错误添加到稍后显示的潜在错误列表中。

我目前有：

```
$category = isset($_POST['category']) ? mysqli_real_escape_string($DBConnect, $_POST['category']) : $error[] = "Which Category is this request for?"; 
```

当我在 $category 上执行 var_dump 时（输入时）我得到 NULL，当没有输入时我得到 STRING(35)“这个请求是针对哪个类别的？” 我也尝试将行更改为：

```
isset($_POST['category']) ? $category =  mysqli_real_escape_string($DBConnect, $_POST['category']) : $error[] = "Which Category is this request for?"; 
```

但 var_dump 仍然说它是 NULL。

有人可以向我解释我做错了什么吗？

干杯，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T04:17:59.893

[`isset`](http://php.net/manual/en/function.isset.php)只会检查该变量是否设置为 NULL。

如果您还想检查空白然后请使用[`empty`](http://php.net/manual/en/function.empty.php)这将`true`在以下情况下返回您。

以下内容被认为是空的：

*   ""（一个空字符串）
*   0（0 为整数）
*   0.0（0 作为浮点数）
*   "0" (0 作为字符串)
*   空值
*   错误的
*   array() （一个空数组）
*   $var; （声明的变量，但没有值）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T04:20:19.007

mysql_real_escape_string 期望字符串是第一个参数，连接是第二个参数。尝试交换它们:)

更新：

哎呀！我读错了，杰克是对的，帖子说的是 mysqli，而不是 mysql。对不起。

# java - 在运行时将文件复制到 Android/Java 项目文件夹中

> ID：12170796
> 
> 赞同：0
> 
> 时间：2012-08-29T04:15:36.673
> 
> 标签：java, android, file

根据我的阅读，我确定不能复制文件并将其粘贴到任何 android/java 项目文件夹（例如 src、assets 等）。但是如果我在项目根目录下创建自定义文件夹可以吗？它仍然具有只读权限吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T04:43:54.510

我认为您正在谈论修改 APK 文件的内容。如果你想这样做，那么你不能。您只能从 APK 复制任何文件并将其粘贴到任何其他位置，但您需要获得访问该目录的权限

# java - Eclipse 和 GWT 设计模式

> ID：12170797
> 
> 赞同：0
> 
> 时间：2012-08-29T04:15:42.210
> 
> 标签：java, eclipse, gwt

我正在使用 GWT 和 Eclipse。我面临一个问题。eclipse的设计模式不起作用。我正在使用 eclipse 3.7 。问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T05:27:37.497

查看设计视图的一种方法是扩展视图部分。你可以试试这个。

```
public class test extends ViewPart {

    public test() {
        // TODO Auto-generated constructor stub
    }

    @Override
    public void createPartControl(Composite parent) {
        // TODO Auto-generated method stub    
    }    
    @Override
    public void setFocus() {            

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T20:35:15.673

您需要右键单击要打开的文件，然后单击打开 --> GWT Designer。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T16:55:14.200

确保您的资源排除过滤器不太严格。

如果您使用的是 Maven，请在[此处](https://stackoverflow.com/questions/5518707/gwt-designer-doesnt-work-with-maven-gwt-project)解释问题。

# c# - CDN中的jQuery ui

> ID：12170803
> 
> 赞同：-1
> 
> 时间：2012-08-29T04:17:04.120
> 
> 标签：c#, jquery, asp.net, jquery-ui

> **可能重复：**
> [从 Google 的 CDN 下载 jQuery CSS](https://stackoverflow.com/questions/820412/downloading-jquery-css-from-googles-cdn)

这里有人知道如何将内容交付网络（Google）用于css jquery datepicker吗？那可能吗？这是CSS。

```
<link type="text/css" href="css/sunny/jquery-ui-1.8.23.custom.css" rel="stylesheet" /> 
```

就像我使用的 jquery 和 jquery ui 一样：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js" type="text/javascript"></script> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T04:23:19.613

根据[JQuery UI 博客](http://blog.jqueryui.com/2012/08/jquery-ui-1-8-23/)，看起来你可以在这里获取它：

*   [http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/themes/sunny/jquery-ui.css](http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/themes/sunny/jquery-ui.css)

# android - Galaxy S 3 内存问题

> ID：12170805
> 
> 赞同：3
> 
> 时间：2012-08-29T04:17:16.087
> 
> 标签：android, memory, galaxy

我有一个游戏可以进行大量的图像缩放（每次进入关卡时一次）。缩放是通过对 Bitmap.createScaledBitmap(Bitmap) 的简单调用完成的。我意识到，在垃圾收集器出现之前，我实际上拥有这些图像的两个副本，但我已经在几个 Android 设备上对其进行了测试，直到最近才获得了 Galaxy S3。你会认为，如果一款游戏在 Xoom2、Galaxy Tab 和 Galaxy S2 上运行良好，更不用说像 Galaxy Y 和 Galaxy Ace 这样的低端机型，它会在 Galaxy S3 上运行得更好。令人尴尬的是，它没有，而且我经常会耗尽内存。我想我已经尽可能地优化了我的游戏（诚然，需要一些优化）。我想了解这个问题。有谁知道有关 S3 的任何内存管理问题？屏幕尺寸与 RAM 的比例是否比 Galaxy Tab 差？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:18:07.207

如果您正在缩放 imgs，您应该在制作 bpm 之前在 BitmapFactory.Options 中使用 .isSampleSize。

# visual-c++ - 如何解码全速率 GSM 音频文件？

> ID：12170806
> 
> 赞同：0
> 
> 时间：2012-08-29T04:17:16.443
> 
> 标签：visual-c++, ffmpeg, decoding, libav

我必须解码全速率 gsm 音频文件。全速率 GSM 音频文件使用`libgsm`. 我已将 MSVC++ 与[ffmpeg](http://ffmpeg.zeranoe.com/builds/)和[libav](http://libav.org/download.html)的 Windows 夜间版本一起使用，但无法正确解码文件。谁能告诉我原因？我尝试使用以下编解码器进行解码：

```
/* various PCM "codecs" */
AV_CODEC_ID_FIRST_AUDIO = 0x10000,
AV_CODEC_ID_PCM_S16LE = 0x10000,
AV_CODEC_ID_PCM_S16BE,
AV_CODEC_ID_PCM_U16LE,
AV_CODEC_ID_PCM_U16BE,
AV_CODEC_ID_PCM_S8,
AV_CODEC_ID_PCM_U8,
AV_CODEC_ID_PCM_MULAW,
AV_CODEC_ID_PCM_ALAW,
AV_CODEC_ID_PCM_S32LE,
AV_CODEC_ID_PCM_S32BE,
AV_CODEC_ID_PCM_U32LE,
AV_CODEC_ID_PCM_U32BE,
AV_CODEC_ID_PCM_S24LE,
AV_CODEC_ID_PCM_S24BE,
AV_CODEC_ID_PCM_U24LE,
AV_CODEC_ID_PCM_U24BE,
AV_CODEC_ID_PCM_S24DAUD,
AV_CODEC_ID_PCM_ZORK,
AV_CODEC_ID_PCM_S16LE_PLANAR,
AV_CODEC_ID_PCM_DVD,
AV_CODEC_ID_PCM_F32BE,
AV_CODEC_ID_PCM_F32LE,
AV_CODEC_ID_PCM_F64BE,
AV_CODEC_ID_PCM_F64LE,
AV_CODEC_ID_PCM_BLURAY,
AV_CODEC_ID_PCM_LXF,
AV_CODEC_ID_S302M,
AV_CODEC_ID_PCM_S8_PLANAR,

/* various ADPCM codecs */
AV_CODEC_ID_ADPCM_IMA_QT = 0x11000,
AV_CODEC_ID_ADPCM_IMA_WAV,
AV_CODEC_ID_ADPCM_IMA_DK3,
AV_CODEC_ID_ADPCM_IMA_DK4,
AV_CODEC_ID_ADPCM_IMA_WS,
AV_CODEC_ID_ADPCM_IMA_SMJPEG,
AV_CODEC_ID_ADPCM_MS,
AV_CODEC_ID_ADPCM_4XM,
AV_CODEC_ID_ADPCM_XA,
AV_CODEC_ID_ADPCM_ADX,
AV_CODEC_ID_ADPCM_EA,
AV_CODEC_ID_ADPCM_G726,
AV_CODEC_ID_ADPCM_CT,
AV_CODEC_ID_ADPCM_SWF,
AV_CODEC_ID_ADPCM_YAMAHA,
AV_CODEC_ID_ADPCM_SBPRO_4,
AV_CODEC_ID_ADPCM_SBPRO_3,
AV_CODEC_ID_ADPCM_SBPRO_2,
AV_CODEC_ID_ADPCM_THP,
AV_CODEC_ID_ADPCM_IMA_AMV,
AV_CODEC_ID_ADPCM_EA_R1,
AV_CODEC_ID_ADPCM_EA_R3,
AV_CODEC_ID_ADPCM_EA_R2,
AV_CODEC_ID_ADPCM_IMA_EA_SEAD,
AV_CODEC_ID_ADPCM_IMA_EA_EACS,
AV_CODEC_ID_ADPCM_EA_XAS,
AV_CODEC_ID_ADPCM_EA_MAXIS_XA,
AV_CODEC_ID_ADPCM_IMA_ISS,
AV_CODEC_ID_ADPCM_G722,
AV_CODEC_ID_ADPCM_IMA_APC,
AV_CODEC_ID_VIMA       = MKBETAG('V','I','M','A'),

/* AMR */
AV_CODEC_ID_AMR_NB = 0x12000,
AV_CODEC_ID_AMR_WB,

/* RealAudio codecs*/
AV_CODEC_ID_RA_144 = 0x13000,
AV_CODEC_ID_RA_288,

/* various DPCM codecs */
AV_CODEC_ID_ROQ_DPCM = 0x14000,
AV_CODEC_ID_INTERPLAY_DPCM,
AV_CODEC_ID_XAN_DPCM,
AV_CODEC_ID_SOL_DPCM,

/* audio codecs */
AV_CODEC_ID_MP2 = 0x15000,
AV_CODEC_ID_MP3, ///< preferred ID for decoding MPEG audio layer 1, 2 or 3
AV_CODEC_ID_AAC,
AV_CODEC_ID_AC3,
AV_CODEC_ID_DTS,
AV_CODEC_ID_VORBIS,
AV_CODEC_ID_DVAUDIO,
AV_CODEC_ID_WMAV1,
AV_CODEC_ID_WMAV2,
AV_CODEC_ID_MACE3,
AV_CODEC_ID_MACE6,
AV_CODEC_ID_VMDAUDIO,
AV_CODEC_ID_FLAC,
AV_CODEC_ID_MP3ADU,
AV_CODEC_ID_MP3ON4,
AV_CODEC_ID_SHORTEN,
AV_CODEC_ID_ALAC,
AV_CODEC_ID_WESTWOOD_SND1,
AV_CODEC_ID_GSM, ///< as in Berlin toast format
AV_CODEC_ID_QDM2,
AV_CODEC_ID_COOK,
AV_CODEC_ID_TRUESPEECH,
AV_CODEC_ID_TTA,
AV_CODEC_ID_SMACKAUDIO,
AV_CODEC_ID_QCELP,
AV_CODEC_ID_WAVPACK,
AV_CODEC_ID_DSICINAUDIO,
AV_CODEC_ID_IMC,
AV_CODEC_ID_MUSEPACK7,
AV_CODEC_ID_MLP,
AV_CODEC_ID_GSM_MS, /* as found in WAV */
AV_CODEC_ID_ATRAC3,
AV_CODEC_ID_VOXWARE,
AV_CODEC_ID_APE,
AV_CODEC_ID_NELLYMOSER,
AV_CODEC_ID_MUSEPACK8,
AV_CODEC_ID_SPEEX,
AV_CODEC_ID_WMAVOICE,
AV_CODEC_ID_WMAPRO,
AV_CODEC_ID_WMALOSSLESS,
AV_CODEC_ID_ATRAC3P,
AV_CODEC_ID_EAC3,
AV_CODEC_ID_SIPR,
AV_CODEC_ID_MP1,
AV_CODEC_ID_TWINVQ,
AV_CODEC_ID_TRUEHD,
AV_CODEC_ID_MP4ALS,
AV_CODEC_ID_ATRAC1,
AV_CODEC_ID_BINKAUDIO_RDFT,
AV_CODEC_ID_BINKAUDIO_DCT,
AV_CODEC_ID_AAC_LATM,
AV_CODEC_ID_QDMC,
AV_CODEC_ID_CELT,
AV_CODEC_ID_G723_1,
AV_CODEC_ID_G729,
AV_CODEC_ID_8SVX_EXP,
AV_CODEC_ID_8SVX_FIB,
AV_CODEC_ID_BMV_AUDIO,
AV_CODEC_ID_RALF,
AV_CODEC_ID_IAC,
AV_CODEC_ID_ILBC,
AV_CODEC_ID_FFWAVESYNTH = MKBETAG('F','F','W','S'),
AV_CODEC_ID_8SVX_RAW    = MKBETAG('8','S','V','X'),
AV_CODEC_ID_SONIC       = MKBETAG('S','O','N','C'),
AV_CODEC_ID_SONIC_LS    = MKBETAG('S','O','N','L'),
AV_CODEC_ID_PAF_AUDIO   = MKBETAG('P','A','F','A'),
AV_CODEC_ID_OPUS        = MKBETAG('O','P','U','S') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T05:08:40.913

这是该`libgsm`库的 MSVC 版本：

```
http://code.google.com/p/vsmm/ 
```

# android - 如何从 AsyncTask Android 完成 Activity

> ID：12170807
> 
> 赞同：3
> 
> 时间：2012-08-29T04:17:29.937
> 
> 标签：android, android-activity, android-asynctask

在我的应用程序中，我有 3 个活动：

`1\. Login`

`2\. AsyncTask`（不同等级）

`3\. Welcome`

在接收到 中的所有信息后，`Login Activity`它移动到`AsyncTask Activity`. 完成`AsyncTask`后，它移动到`Welcome Activity`。我想在完成工作后`Login Activity`立即关闭..`AsyncTask Activity`

我正在尝试在`onPostExecite()`of中使用以下代码`AsyncTask`：

`Login.this.finish();`

但我得到一个错误：`No enclosing instance of the type of Login is accessible in scope`..

`Login Activity`请告诉我完成我的`AsyncTask`..后如何关闭我的

提前致谢...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-29T04:34:14.667

由于 AsyncTaskActivity 与 LoginActivity 位于不同的文件中，因此您无法通过以下方式完成 LoginActivity：

Login.this.finish();

相反，您应该在 AsyncTaskActivity 类中将 Activity 引用作为参数传递，就像您可以定义以下构造函数一样：

```
private class AsyncTaskActivity extends AsyncTask<String, Void, String> {

Activity mActivity;
    public AsyncTaskActivity(Activity activity)
    {
         super();
         this.mActivity=activity;
    }
} 
```

以及每当您想完成活动通话时

```
this.mActivity.finish(); 
```

通过在 LoginActivity 中创建 AsyncTaskActivity 的对象

```
AsyncTaskActivity asynTask = new AsyncTaskActivity(LoginActivity.this); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T04:28:49.500

行 。在说明新活动后，您应该在 onPostExcecute 方法中调用 finish()。

**脚步：**

1) 登录活动

2）异步任务（传递应用程序上下文）

3) 调用新的Activity

4) 在 onPostExcecute(context.finish()) 中完成您的登录活动

# sql - SQL Server 2008 - SELECT 将多条记录（每个 ID）合并到一条记录中

> ID：12170815
> 
> 赞同：1
> 
> 时间：2012-08-29T04:18:18.003
> 
> 标签：sql, sql-server, sql-server-2008

我需要查询 Student( `STU`) 和 Programs( `PGM`) 表并返回一个组合记录`ID`，即使每个有多个`PGM`记录`ID`。我考虑过使用`GROUP BY STU.ID, STU.FN, STU.LN`，但后来我不确定如何在 中使用`PGM.CD`，`SELECT`因为它不是聚合函数或在 GROUP BY 子句中。

该`PGM`表可能有也可能没有记录。我下面的查询返回这些可能的结果：

1.  如果没有`PGM`记录，则仅`ID`返回一个结果 per 并且该`PGM.CD`列返回`NULL`（或`''`per `CASE`）。
2.  如果表中只有一条记录`PGM`，并且`PGM.CD = 200` ( `'DLA'`per the `CASE`)，则 per`ID`仅返回一个结果。
3.  如果表中只有一条记录`PGM`，并且`PGM.CD <> 200` ( `''`per the `CASE`)，则 per`ID`仅返回一个结果。
4.  如果表中有多个记录`PGM`(per `ID`)，即 121、200、156，则每个 都会产生多行`ID`。

我需要一个查询来仅返回一行`ID`，并结合`PGM.CD`列的结果。该`PGM.CD`列应仅返回`''`或`200`（`'DLA'`根据`CASE`）

```
SELECT STU.ID, STU.FN, STU.LN,
  CASE PGM.CD
    WHEN '200' THEN 'DLA'
    ELSE ''
  END
FROM STU
LEFT JOIN PGM
  ON STU.ID = PGM.PID 
```

这是我的查询返回的（**没有**`CASE`修改`PGM.CD`）：

```
STU.ID  STU.FN  STU.LN  PGM.CD  
1000    Bruce   Wayne   NULL  
1001    Clark   Kent    200  
1002    Barry   Allen   151  
1002    Barry   Allen   101  
1003    Hal     Jordan  126  
1003    Hal     Jordan  200  
1003    Hal     Jordan  101 
```

这是我的查询返回的内容（**带有**`CASE`修改`PGM.CD`）：

```
STU.ID  STU.FN  STU.LN  PGM.CD  
1000    Bruce   Wayne   
1001    Clark   Kent    DLA
1002    Barry   Allen   
1002    Barry   Allen   
1003    Hal     Jordan  
1003    Hal     Jordan  DLA
1003    Hal     Jordan 
```

我需要它来返回这个：

```
STU.ID  STU.FN  STU.LN  PGM.CD
1000    Bruce   Wayne   
1001    Clark   Kent    DLA
1002    Barry   Allen   
1003    Hal     Jordan  DLA 
```

我希望所有这些都是有道理的。谢谢您的帮助。

安东尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T04:33:01.893

您应该使用这样的简单查询：

```
 WITH CTE_PGM
    AS
    (
        SELECT PGM.PID, MAX(  CASE PGM.CD
        WHEN '200' THEN 'DLA'
        ELSE ''
        END) AS MaxCD
        FROM PGM
        GROUP BY PGM.PID
    )
    SELECT STU.ID, STU.FN, STU.LN, MaxCD
    FROM  STU
    INNER JOIN CTE_PGM ON STU.ID = CTE_PGM.PID 
```

尝试使用 SQL Fiddle(!) 它对快速回答有很大帮助。

我[为你做了一个例子，](http://www.sqlfiddle.com/#!3/1ed3a/1)它是如何工作的。请检查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T05:09:53.067

使用以下查询：

```
SELECT STU.ID, STU.FN, STU.LN, ISNULL(Max( Case When PGM.CD = 200 then 'DLA' Else '' End), '') as PGM_CD
FROM  STU
Left JOIN PGM ON STU.ID = PGM.PID
Group by STU.ID, STU.FN, STU.LN 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T05:14:15.590

```
SELECT STU.ID, STU.FN, STU.LN,
  max(CASE PGM.CD
    WHEN '200' THEN 'DLA'
    ELSE '')
  END
FROM STU
LEFT JOIN PGM
  ON STU.ID = PGM.PID
group by  STU.ID, STU.FN, STU.LN 
```

# php - IPB v3 版本的 ipsclass->txt_truncate()

> ID：12170816
> 
> 赞同：1
> 
> 时间：2012-08-29T04:18:23.787
> 
> 标签：php, frameworks, migration, invision-power-board

我目前正在将旧的 IPB v2.x 迁移到更新的 3.x，但是，我找不到这种旧语法的完全等价物：

```
$this->ipsclass->txt_truncate(); 
```

# php - My SQL Select Query 和 IF 语句不会返回任何结果

> ID：12170817
> 
> 赞同：0
> 
> 时间：2012-08-29T04:18:26.070
> 
> 标签：php, css, select, if-statement, mysqli

我希望有人能帮助我。

我对 PHP 完全陌生，我发现我的`SELECT`查询和/或`IF`语句没有从我的数据库中检索任何结果。

此代码的目的是从数据库中检索可应用于我网站的每个页面的 CSS 皮肤。

**这是代码：**

```
$dbc - mysqli_connect($servername, $username, $password, $databasename) or die ('Error connecting to MYSQL server');

$skin = $_POST['skin'];

$query = "SELECT skin FROM skins WHERE id = '".$_SESSION['userid']."'";

$result = mysqli_query($dbc, $query) or die ('Error quering database');

if ($result) {     
    if ($skin=='blue') {     
        echo "<link rel='stylesheet' type='text/css' href='blue.css' />";
    }    
    else if ($skin == "pink1") {                
        echo "<link rel='stylesheet' type='text/css' href='pink1.css'  />";             
    }
    else {     
        echo 'You do not have a skin preference';
    }    
} 
```

当代码运行时，它会返回 echoing `You do not have a skin preference`。

我的想法是它没有正确连接到数据库/表；所以，它没有检索任何结果。

我知道它应该`$skin=='blue'`从数据库中获取。

任何帮助或建议将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T04:22:35.697

`mysqli_query()`只会在错误的情况下返回 false，然后触发您的`or die()`子句。

不返回数据的查询**不是**错误。它仍然是一个有效的结果集，只是碰巧是空的。您需要检查[`mysqli_num_rows()`](http://php.net/mysqli_num_rows)是否返回了 0 行或非零行。

例如。

```
if (mysqli_num_rows($result) == 0) {
   ... there is no preference set
} else {
   ... there's at least one skin preference
} 
```

# java - Android从资产中读取文件并存储在数组列表中

> ID：12170820
> 
> 赞同：2
> 
> 时间：2012-08-29T04:19:39.517
> 
> 标签：java, android

我的应用程序需要从 assets 文件夹中的多个文件中读取。但我的文件有分隔符 $$$ 和 ||。文件的结构是这样的。

> 建设$$$
> 组装资源和组装新设施或改造设施所需的材料的所有工作。||
> 
> 建筑承包商$$$
> 与组织签订合同以执行建筑工作的公司或个人。||

以 $$$ 结尾的句子将存储在单独的数组列表中，以 || 结尾的句子 将存储在单独的数组列表中。我怎样才能做到这一点？任何示例或示例代码将不胜感激。请注意，这些文件非常长。

```
 BufferedReader br = null;
    try {
        br = new BufferedReader(new InputStreamReader(getAssets().open("c.txt"))); //throwing a FileNotFoundException?
        String word;
        while((word=br.readLine()) != null)
            A_Words_array.add(word); //break txt file into different words, add to wordList
    }
    catch(IOException e) {
        e.printStackTrace();
    }
    finally {
        try {
            br.close(); //stop reading
        }
        catch(IOException ex) {
            ex.printStackTrace();
        }
    }
    String[]words = new String[A_Words_array.size()];
    A_Words_array.toArray(words); //make array of wordList

    for(int i=0;i<words.length; i++)
        Log.i("Read this: ", words[i]); 
```

以上是我现在找到的如何根据结束分隔符拆分句子的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T21:58:16.123

假设每个句子都在一行中并且它们以 $$$ 或 || 结尾，您可以根据结尾将这些行存储在不同的数组中：

```
List<String> list1 = new ArrayList<>();
List<String> list2 = new ArrayList<>();
String line;
while (line = br.readLine()) != null) {
    if (line.endsWith("$$$")) {
        list1.add(line);
    } else {
        list2.add(line);
    }
}
String[] dollarlines = list1.toArray(new String[list1.size()]);
String[] verticalLines = list2.toArray(new String[list2.size()]); 
```

# jquery - TinyMCE 不见了

> ID：12170823
> 
> 赞同：0
> 
> 时间：2012-08-29T04:20:31.617
> 
> 标签：jquery, tinymce

我不知道为什么，但突然 TinyMCE 停止显示。它在一定程度上起作用。它隐藏了文本区域，但没有显示 TinyMCE 界面。**我没有收到任何 jQuery/Javascript 错误。**我不确定发生了什么或如何开始尝试弄清楚。

这只是一个标准安装。我也有 jGrowl 和 Selectbox，最近对它们进行了更改。也许是那些造成的？

听说过它们会引起问题吗？

```
<script src="js/jquery.min.js" type="text/javascript"></script>

<!-- Load TinyMCE -->
<script type="text/javascript" src="js/tiny_mce/jquery.tinymce.js"></script>
<script type="text/javascript">
$(document).ready(function() { 
$('.tinymce').tinymce({
// Location of TinyMCE script
script_url : 'js/tiny_mce/tiny_mce.js',

// General options
theme : "advanced",
plugins : "autolink,lists,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,xhtmlxtras,template,advlist",

// Theme options
theme_advanced_buttons1 : "fullscreen,code,preview,print,cleanup,|,undo,redo,cut,copy,paste,pastetext,pasteword,|,search,replace,|,link,unlink,anchor,image,media,template",
theme_advanced_buttons2 : "bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,outdent,indent,blockquote,|,fontsizeselectbullist,numlist",
theme_advanced_buttons3 : "tablecontrols,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,advhr,|,|,ltr,rtl,|,insertlayer,moveforward,movebackward,absolute",
theme_advanced_buttons4 : "styleselect,formatselect,fontselect,fontsizeselect,|,hr,|,forecolor,backcolor,|,styleprops,attribs",
theme_advanced_toolbar_location : "top",
theme_advanced_toolbar_align : "left",
theme_advanced_statusbar_location : "bottom",
theme_advanced_resizing : true
});
});
</script>
<!-- /TinyMCE --></head>
<body>
<textarea name='body_content' rows="15" cols="80"  class="tinymce" style='height: 400px; width: 75%;'> 
</textarea>
</body> 
```

# c# - 如何使用 c# .net 为 wpf 应用程序在组合框中的项目之间切换

> ID：12170824
> 
> 赞同：0
> 
> 时间：2012-08-29T04:20:31.177
> 
> 标签：c#

如何使用 c# .net for wpf application 在组合框中的项目之间切换。一旦我专注于组合框，我就可以在项目之间切换，而不是关注我想在项目之间切换的组合框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:38:27.843

所以也许这就是你想要的，我也不知道你想要什么。这可以帮助你。如果您专注于组合框，则可以通过向上键或向下键在两个项目之间切换。

```
 public partial class Window1 : Window
{
    public Window1()
    {
        InitializeComponent();
        comboBox1.Items.Add("1");
        comboBox1.Items.Add("2");
        comboBox1.SelectedIndex = 0;
        comboBox1.Focus();
    }

    private void comboBox1_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.Up)
        {
            if (comboBox1.SelectedIndex != 0)
                comboBox1.SelectedIndex--;
        }
        if (e.Key == Key.Down)
        {
            if (comboBox1.SelectedIndex != comboBox1.Items.Count-1)
                comboBox1.SelectedIndex++;
        }

    }
} 
```

**好的，那么让我们这样做。如果文本框文本发生更改，则调用第一个事件。如果我理解正确，你应该有类似的东西。第二个是你需要的。**

```
 private void textBox_TextChanged(object sender, TextChangedEventArgs e)
    {
        //deleting all items
        comboBox1.Items.Clear();
        //adding text of each textbox if not empty
        if (textBox1.Text != "")
            comboBox1.Items.Add(textBox1.Text);
        if (textBox2.Text != "")
            comboBox1.Items.Add(textBox2.Text);
        //if combobox not empty select first item
        if (comboBox1.Items.Count != 0)
            comboBox1.SelectedIndex = 0;
    } 
```

所以我做的是。when one of the textboxes is selected and the user presses up or down then it toggles the content of the combobox. 此事件必须作为 PreviewKeyDown 事件分配给每个文本框。

```
 private void textBox_KeyDown(object sender, KeyEventArgs e)
    {
        //key up or key down
        if (e.Key == Key.Up || e.Key == Key.Down)
        {
            //has 2 items
            if (comboBox1.Items.Count == 2)
            {
                if (comboBox1.SelectedIndex == 0)
                    comboBox1.SelectedIndex = 1;
                else
                    comboBox1.SelectedIndex = 0;
            }
        }
    } 
```

这里是带有绑定事件的文本框的 xaml 代码。

```
 <TextBox Height="23" Margin="12,0,0,76" Name="textBox1" VerticalAlignment="Bottom" HorizontalAlignment="Left" Width="120" TextChanged="textBox_TextChanged" PreviewKeyDown="textBox_KeyDown" />
    <TextBox Height="23" HorizontalAlignment="Right" Margin="0,0,12,76" Name="textBox2" VerticalAlignment="Bottom" Width="120" TextChanged="textBox_TextChanged" PreviewKeyDown="textBox_KeyDown" /> 
```

有件事我忘了提。它仅在其中一个文本框被聚焦时才有效。如果您还有其他可以关注的项目，那么您必须为每个项目添加此事件，以确保无论现在关注哪些项目都会调用它。另一种可能性是创建一个键盘钩子。但这很复杂。

# android - 按下后刷新应用程序

> ID：12170829
> 
> 赞同：0
> 
> 时间：2012-08-29T04:21:06.833
> 
> 标签：android, android-activity

我已允许用户更改语言。语言更改是根据自己的活动进行的。当用户按下后退按钮时，我希望所有文本都切换到所选语言。

我正在使用类似以下的东西..

```
@Override
public void onResume() {
    if (language.equals("en"))
        txTitle.setText("TITLE");
    else
        txTitle.setText("TITEL");

    super.onResume();
} 
```

按下后不会刷新页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T04:40:58.293

覆盖 onBackPressed：

```
@Override
public void onBackPressed() {
  if (language.equals("en"))
      txTitle.setText("TITLE");
   else
     txTitle.setText("TITEL");      
} 
```

但这不是一个好方法，因为您将无法进入上一个活动。为什么不将语言保存在 SharedPreferences 中并将其加载到 onCreate() 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T04:40:06.867

当您返回之前的活动时，`onRestart()`将触发事件，因此您可以`onCreate()`从内部调用方法`onRestart()`来重新创建您的活动，我相信这会改变您的应用程序的语言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T04:54:33.657

@Muz 当你按下后退按钮时，它不会调用`onCreate()`函数。因此，您应该在`onResume()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T07:01:12.430

在您的主要活动中，您可以调用：

```
Intent selectLanguage = new Intent("your_activity.this", 
                                   Your_secund_Activity.class);

startActivityForResult(selectLanguage, languageRequestCode);

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode==languageRequestCode) {
        //Your selected language number will be resultCode    
        //refresh methods
    }
}

//in the secund activity:

@Owerride
public void onBackPressed() {
    super.onBackPressed();
    setResult(selectedLanguageNumber);
}

@Owerride
public void onPause() {
    super.onPause();
    setResult(selectedLanguageNumber);
}

@Owerride
public void onDestroy() {
    super.onDestroy();
    setResult(selectedLanguageNumber);
} 
```

# matlab - 在matlab中的矩形中以规则的间隔绘制垂直线

> ID：12170835
> 
> 赞同：0
> 
> 时间：2012-08-29T04:21:50.670
> 
> 标签：matlab, plot

我需要在一个矩形框中定期绘制垂直线。这是我到目前为止使用的：

```
xmin=000;
xmax=70000;

ymin=0;
ymax=1000;

line1Val=900;
line2Val=600;
line3Val=300;
xlim([xmin xmax])
ylim([ymin ymax])
xl=get(gca,'XLim');
line(xl,[line1Val line1Val],'Color','y');
line(xl,[line2Val line2Val],'Color','y');
line(xl,[line3Val line3Val],'Color','y');
hold on ;

rectangle('Position',[120000,900,(280000-120000),37],'faceColor','k') 
```

所以矩形的宽度是 160000 个单位我想把它分成 4 ，其中垂直线是不同的颜色（比如红色），线的高度是 37 个单位。

关于如何在不绘制 4 个边缘为红色并用黑色填充的矩形的情况下绘制它的任何想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T06:00:53.593

您可以使用参数`xstart`、`ystart`和`width`来`height`绘制矩形：

```
rectangle('Position',[xstart,ystart,width,height],'faceColor','k'); 
```

之后，您可以确定循环中的线位置并简单地绘制这些线：

```
for i = 1:3
    x = xstart+i*width/4;
    line([x x],[ystart ystart+height],'Color','r');
end 
```

如果你想在矩形的开始和结束处有一条红线，让`i = 0:4`.

# android - Android 登录设计和开发 - 方法和最佳实践

> ID：12170837
> 
> 赞同：11
> 
> 时间：2012-08-29T04:22:08.193
> 
> 标签：android, login

好的。我开始为我们的企业 Web 应用程序开发一个 Android 应用程序。刚刚开始登录屏幕活动设计。

这个应用程序完全由 RESTFul API 驱动。

我想了解如何在应用程序中开发登录/注销功能。据我了解，应用程序世界中没有 Session 概念。此外，对于 API，我们需要在每个请求中发送用户名和密码（基本身份验证）。显然，我们需要将登录凭据保存在本地存储中的某个位置，以便与每个请求一起发送。

这是我从我的基本Android知识中了解到的。

当用户输入登录信息并按下按钮时，我们将启动对 API 的 HTTP 调用。如果登录凭据有效，那么我们必须将凭据存储在本地。选项是

1.  SQLite
2.  共享偏好。（我从未使用过它。但我假设，我们可以使用它）
3.  捆绑包（不确定这是否是一个选项）

还有其他选择吗？

我想确保我遵循最佳实践，同时不牺牲性能和架构的角度。

对于注销，我想我只需要清除本地存储的凭据并显示登录活动即可。

有没有不同的更好的方法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-29T05:09:15.230

我建议使用 Android[帐户](http://developer.android.com/reference/android/accounts/package-summary.html)功能。

[这个博客](http://www.finalconcept.com.au/article/view/android-account-manager-step-by-step-2)有一个关于你需要放在一起的所有位的非常好的分步指南。

一般的想法是您向[AccountManager](http://developer.android.com/reference/android/accounts/AccountManager.html)提供用户的用户名/密码，并将其留给 AccountManager 来安全地存储它们。

当你需要一个身份验证令牌时，你向 AccountManager 请求一个，它会返回一个缓存的令牌，或者回调你的代码（传递用户名/密码），然后你调用你的身份验证服务来获取一个新的令牌.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T04:36:36.083

通常，您可以通过三种方式在 Android 中持久化数据：SQLite、.`SharedPreferences`以及通过 Java I/O 读取/写入文件。SQLite 是关系数据的最佳选择，但因为您只需要存储用户的凭据，我建议您使用 SharedPreferences。在我看来，这就像一个简单的键值数据模型。

`SharedPreferences`基本上只是对直接文件 I/O 的一种封装——也就是说，底层的实现仍然是文件读写，只是针对键值对进行了简化。我对加密知之甚少，但在将密码存储在`SharedPreferences`对象中之前，您可能必须自己处理（也请考虑 JaiSoni 的建议：改用访问令牌）。不过请放心，如果您创建`SharedPreferences`并将其设置为`MODE_PRIVATE`，其他应用程序将无法访问共享的 prefs 文件。

我相信这几乎是一个标准的实现。如果您查看此页面，您可以做的只有这么多：http: [//developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

我还需要指出，直接文件 I/O 的复杂性之一是您必须决定要将文件存储在哪里——内部或外部存储器（例如，SD 卡）——并因此检查它的可用性（并非所有设备都有 SD 卡插槽，有时内部存储器被注册为设备的外部存储器）。因此，只需使用共享首选项即可。

对于注销，这可能很有用：[删除共享首选项](https://stackoverflow.com/questions/3687315/deleting-shared-preferences)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T04:58:24.247

我认为在应用程序中存储密码是个坏主意，更好的方法是在用户登录时第一次使用用户凭据发出请求，服务器返回访问令牌保存此访问令牌以`SharedPreferences`用于其他目的，例如获取用户详细信息在请求中使用令牌.
会话：创建自己的类来维护会话。[Hackbook](https://github.com/facebook/facebook-android-sdk/tree/master/examples/Hackbook)就是一个很好的例子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T05:11:28.453

为什么需要将登录凭据保存在文件或数据库中？你想在你的应用重启后自动登录吗？如果不需要持久性，您可以将凭据放入静态 java 成员中。

# python - 无法确定 python-pgsql 中参数 $1 的数据类型

> ID：12170842
> 
> 赞同：5
> 
> 时间：2012-08-29T04:22:33.727
> 
> 标签：python, postgresql

我有一个简单的表（名为 test）：

```
id     | integer                
name   | character varying(100) 
intval | integer 
```

当我尝试使用准备语句在 python 中更新这样的名称时。（我正在使用 python-pgsql [http://pypi.python.org/pypi/python-pgsql/](http://pypi.python.org/pypi/python-pgsql/)）

```
>>> for i in db.execute("select * from test"): print i
...
(1, 'FOO', None)
>>> query = "UPDATE test set name = '$1' where name = '$2'"
>>> cu.execute(query, "myname", "FOO")
Traceback (most recent call last):
  File "<input>", line 1, in <module>
  File "/usr/lib/python2.7/site-packages/pgsql.py", line 119, in execute
    ret = self._source.execute(operation, params)
ProgrammingError: ERROR:  could not determine data type of parameter $1 
```

该模块的演示文件可以在[http://sprunge.us/VgLY?python](http://sprunge.us/VgLY?python)看到。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-29T04:34:14.573

我猜它可能是你的字符串周围`$1`和`$2`内部的单引号。在 PYGresql 的主要变化中，它说：

*   支持绑定参数，减少对用户提供的数据进行广泛、昂贵和易受攻击的引用的需要

所以我假设单引号用太多引号使字符串重载，或者只是破坏了 python-pgsql 中的解析器。

# php - MySQL/PHP：在查询中使用多个子查询来选择多个结果，这是一个坏主意吗？

> ID：12170846
> 
> 赞同：2
> 
> 时间：2012-08-29T04:22:39.577
> 
> 标签：php, mysql, performance, forum, nested-query

对不起，如果标题有点......蹩脚。基本上我在写一个小论坛，使用多个子查询来选择论坛的线程数，帖子数，最后一次帖子的日期，同时抓取论坛的信息显示在主页上！

这是我的疑问，因为我不擅长解释事情：

```
SELECT `f`.*,
    (SELECT COUNT(`id`)
    FROM `forum_threads` 
    WHERE `forumId1` = `f`.`id1`
        AND `forumId2` = `f`.`id2`) AS `threadCount`,
    (SELECT COUNT(`id`)
    FROM `forum_posts` 
    WHERE `forumId1` = `f`.`id1`
        AND `forumId2` = `f`.`id2`) AS `postCount`,
    (SELECT `date`
    FROM `forum_posts` 
    WHERE `forumId1` = `f`.`id1` 
        AND `forumId2` = `f`.`id2` 
        ORDER BY `date` DESC LIMIT 1) AS `lastPostDate`
FROM `forum_forums` AS `f`
ORDER BY `f`.`position` ASC, `f`.`id1` ASC; 
```

并且正在使用一般的 foreach 循环来显示结果：

```
foreach($forums AS $forum) {
    echo $forum->name .'<br />';
    echo $forum->threadCount .'<br />';
    echo $forum->postCount .'<br />';
    echo $forum->lastPostDate .'<br />';
} 
```

（当然不完全一样，但为了解释......）

现在我想知道这是否对性能“不利”，或者是否有更好的方法？假设每个论坛中有很多帖子和主题。

我最初在论坛表本身中存储“posts”、“threads”和“lastPost”列，并且每次有人创建新线程或帖子时都会增加（posts = posts + 1）值。虽然我也有这个想法，并且想知道它是否有什么好处。:P

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T05:52:42.363

我会做一些不同的事情：

在我看来，所有这三个字段：`threadCount`和`postCount`都是`lastPostDate`您可以在单独的表中维护的字段，例如`forum_stats`仅包含 4 列：
* forum_id
* thread_count
* post_count
* last_post_date

这些列可以通过更新。在插入/更新时[*触发。*](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)
如果您在更新操作期间支付这么小的开销 - 您将获得非常快速的查询`select`（无论您拥有多少论坛/帖子/线程，它都会保持非常快）。

**另一种方法（不是我们好的 TMO）：**
创建统计表并每天（或每隔几个小时）运行一个[*批处理作业*](http://www.adminschoice.com/crontab-quick-reference)，它将更新统计信息。代价是您显示的数据永远不会是最新的，并且该作业可能需要资源，例如，您可能只想在晚上运行该作业，因为它很重并且您不希望它生效大多数网站访问者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T06:07:02.570

通常这种事情从性能的角度来看是很糟糕的，最好使用可以从单行获取的计数器列。保持这些同步可能很烦人，但是一旦它们在那里就没有检索成本。

您已经确定了要检索的数据，所以接下来您需要首先弄清楚如何将这些数据放入其中。@alfasin 的回答描述了一个示例模式，虽然将其放在单独的表中是一种想法，但通常不会有太多麻烦，只需将它们放在主表中即可。如果您担心锁定，请小批量更新。

一种方法是编写一个`TRIGGER`在从各种表中添加和删除记录时更新计数器的方法。这往往会隐藏很多复杂性，如果逻辑经常更改并且人们需要了解系统的工作方式，这可能是一件坏事。

一种简单的方法是在创建或删除会更新它们的内容后，使用附加查询来处理列。例如，如果您在创建帖子时进行调整，那么调整最后发布日期是微不足道的。

如果这些计数器有点乱，而且它们最终会出现问题，那么您需要一种方法让它们重新同步。一种简单的方法是编写一个`VIEW`产生与您现在的查询相同的结果的方法，也许重新编写以`LEFT JOIN`代替使用，然后`UPDATE`在可能的情况下反对它。如果 MySQL 无法处理更新具有自身视图的表，这可能涉及使用临时表，但这通常不是什么大问题。

# php - 为什么我得到的数值是 0 而不是 1？

> ID：12170847
> 
> 赞同：2
> 
> 时间：2012-08-29T04:22:42.937
> 
> 标签：php, mysql

我敢肯定，你们中的一些人已经厌倦了我的帖子，因为它们看起来很基础，但是我遇到了与“mysql_result()”类似的问题。我的代码不断输出此错误：

```
Warning: mysql_result() expects parameter 1 to be resource, boolean given in C:\Program Files (x86)\EasyPHP-5.3.9\www\Image Upload\func\user.func.php on line 10 
```

当我检查反引号是否在正确的位置时..我看不出我的错误可能在哪里..这是代码：

```
function login_check($email, $password){
       $email = mysql_real_escape_string($email);
       $login_query = mysql_query("SELECT COUNT (`user_id`) as `count`, `user_id` FROM `users` WHERE `email` = '$email' AND `password` = '".md5($password)."'");
       return (mysql_result($login_query, 0) == 1) ? mysql_result($login_query, 0, '$user_id') : false;
} 
```

这是第 10 行：

```
return (mysql_result($login_query, 0) == 1) ? mysql_result($login_query, 0, '$user_id') : false; 
```

感谢大家的耐心和帮助！-TechGuy24

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T04:27:28.687

语法错误：

```
$login_query = mysql_query("SELECT COUNT (`user_id`) as `count`, `user_id` FROM `users` WHERE `email` = '$email' AND `password` = '".md5($password)."'");
                                                        ^--   ^-- 
```

反引号用于转义字段/表规范中的保留字。`as`不需要转义别名，因为它显然不是字段/表名。

您还使用了聚合函数，`count()`但也选择了非聚合字段 ( `user_id`)，没有`group by`子句，因此 mysql 也会抱怨这一点。

如果您的代码结构如下：

```
$result = mysql_query($sql) or die(mysql_error());
                           ^^^^^^^^^^^^^^^^^^^^^^ 
```

您会看到语法错误消息。永远不要假设查询已经成功。始终检查错误。即使您的 SQL 语法 100% 完美，也有太多其他原因导致无法检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T04:29:23.150

正如 zerkms 所说，你不需要`COUNT`.

问题：`COUNT`不喜欢它和括号之间的空格，所以：

```
COUNT ( 
```

应该

```
COUNT( 
```

* * *

**编辑：**

这应该会更好：

**SQL：**

```
SELECT `user_id` FROM `users` WHERE `email` = '<email>' AND `password` = '<hash>' 
```

**PHP：**

```
$result = mysql_query($query);
$login = mysql_result($result);
if(mysql_num_rows($result) == 0) return false;
return $login['user_id']; 
```

顺便说一句，你有风险...

```
SQL INJECTION    *------==========[');SQL--|----]=====0 
```

您应该使用 MySQLi 或 PDO，以及准备好的语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T04:30:58.073

执行 SQL 语句时似乎出错，`mysql_query`仅在成功时返回资源。出错时，它会返回`false`（请参阅[mysql_query 上的 PHP 手册](http://php.net/manual/en/function.mysql-query.php)）。这解释了错误，因为您`mysql_result`使用值`false`作为第一个参数进行调用。

# javascript - ajax show hide 滚动到最上面的问题

> ID：12170854
> 
> 赞同：0
> 
> 时间：2012-08-29T04:24:05.573
> 
> 标签：javascript, ajax, css

我使用 ajax show hide 来显示选项卡。当我向下滚动到选项卡并单击任何选项卡时，它会滚动到页面顶部。

请参考小提琴[http://jsfiddle.net/8dDat/1/](http://jsfiddle.net/8dDat/1/)

我试过了`return false`。但没有任何效果。如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T04:40:08.203

试试这个[小提琴](http://jsfiddle.net/gajjuthechamp/8dDat/2/)

问题是当您单击选项卡时的高度隐藏下面的内容并且高度变为**0**

因此，您可以将 css for`min-height`分配给主容器，即**register_frm**

参见 CSS 的最后一行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T04:39:57.593

试试这个：

```
 // $(id).fadeIn("slow");
    $(id).css({opacity:0}).show().animate({opacity:1}, 'slow'); 
```

# cuda - For Loop in Device Function on Compute Capability 1.1 设备

> ID：12170855
> 
> 赞同：1
> 
> 时间：2012-08-29T04:24:19.797
> 
> 标签：cuda

我写了一个`__device__`使用`for`循环的函数。它适用于 GTX640 卡（计算能力 2.1），但不适用于 9500GT（计算能力 1.1）。

函数大致是这样的：

```
__device__ void myFuncD(float4 *myArray, float4 *result, uint index, uint foo, uint *here, uint *there)
{
    uint j;
    float4 myValue = myArray[index];
    uint idxHere = here[foo];
    uint idxThere = there[foo];
    float4 temp;

    for(j=idxHere;j<idxThere;j++){
        temp = myArray[j];

        //do things with myValue and temp, write result to *result
        result->x += /* some calculations with myValue.x and temp.x */
        result->y += /* some calculations with myValue.y and temp.y */
        result->z += /* some calculations with myValue.z and temp.z */
    }
}

__global__ void myKernelD(float4 *myArray, float4 *myResults, uint *here, uint *there)
{
    uint index = blockDim.x*blockIdx.x+threadIdx.x;

    float4 result = = make_float4(0.0f,0.0f,0.0f,0.0f);
    uint foo1, foo2, foo3, foo4;

    //compute foo1, foo2, foo3, foo4 based on myArray[index]

    myFuncD(myArray, &result, index, foo1, here, there);
    myFuncD(myArray, &result, index, foo2, here, there);
    myFuncD(myArray, &result, index, foo3, here, there);
    myFuncD(myArray, &result, index, foo4, here, there);

    myResults[index] = result;
} 
```

在 GTX460 上，`myResults`具有适当的值，但在 9500GT 上，其成员的每个组件都为零。

如何使用计算能力 1.1 的设备达到相同的效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T03:53:10.043

用户试图在每个块中使用太多线程来启动，并收到错误“启动请求的资源过多”。减少每个块的线程允许内核启动。

# javascript - 将视频从 Flash 流式传输到 HTML5

> ID：12170858
> 
> 赞同：0
> 
> 时间：2012-08-29T04:24:59.957
> 
> 标签：javascript, actionscript-3, flash, html, actionscript

如果我有一个视频正在流式传输到正在处理它的 Flash 中，那么是否可以将其从 Flash 中流式传输并在 HTML5 视频标签中播放？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T04:41:34.620

如果你只有一个 swf 文件，我建议你看看[google swiffy](https://www.google.com/doubleclick/studio/swiffy/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T08:57:29.620

如果 Flash 内容是非交互式的，请尝试[Flabaco - www.Flash-Banner-Converter.com](http://www.flash-banner-converter.com)。它是一个在线的 SWF 到视频转换器。

在视频上以 Flash 完成的任何工作都应出现在转换后的输出中。如果视频很长，由于资源限制（因为它是免费服务），它会被截断。

Flabaco 生成 WebM、MP4 和 OGG 格式的视频，这些格式可以使用 HTML5 标签嵌入。质量、帧速率 (fps) 和颜色都保留得很好。但是声音会丢失。

嘉约。

弗拉巴科

# ruby-on-rails - 使用 Ruby on Rails 在 Excel 中显示 © 和 & 符号

> ID：12170862
> 
> 赞同：1
> 
> 时间：2012-08-29T04:25:29.127
> 
> 标签：ruby-on-rails, spreadsheet

我正在使用电子表格 gem 和 Ruby on Rails 将我的数据导出到一个 excel 文件中。我想在我的 excel 文件中添加页眉和页脚。问题是当我这样做时，版权符号、& 符号和注册符号没有显示。它要么抛出多字节字符错误，要么根本不显示任何内容。

我经历了所有类似的问题，甚至尝试过**# encoding utf-8**和“ **# - *- coding: utf-8 -* -** ”。这是没有用的。当我尝试使用转义序列（“\u00A9” - © 的 unicode 代码）时，文件格式已损坏。这个问题的任何可能的解决方案？我错过了什么吗？请帮忙。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T04:58:23.007

这段代码对我有用：

```
def do_test
  book = Spreadsheet::Workbook.new
  sheet1 = book.create_worksheet
  sheet1[0,0] = "\u00a9"
  book.write "./sample.xls"
end 
```

您可能在某些时候将电子表格编码设置为 UTF-8 以外的其他编码。您可以查看`Spreadsheet.client_encoding`正在使用的内容。

**更新**

该`add_header/footer`代码非常特定于编码。这是使用的代码：

```
def write_header
  write_op opcode(:header), [@worksheet.header.bytesize, 0].pack("vC"), @worksheet.header
end 
```

Excel 编写器默认使用 Unicode-1200（UTF-16 little endian）。这可能意味着您需要使用任何非标准字符编码`"\u00a9".encode('UTF-16LE')`才能使其正常工作......

# android - 为什么 ImageView alpha 动画表现异常？

> ID：12170865
> 
> 赞同：1
> 
> 时间：2012-08-29T04:25:52.867
> 
> 标签：android, android-animation, fadeout

`ImageView`我正在尝试使用动画淡出。动画运行，淡出`ImageView`，但随后图像恢复到完全不透明。为什么会这样？

```
private void fadeOutImage() {
   final ImageView imageView = (ImageView) activity.findViewById(R.id.imageView);
   imageView.startAnimation(AnimationUtils.loadAnimation(activity, R.anim.fadeout));
} 
```

我尝试将 alpha 设置为零，如下所示，但图像从未出现过。为什么不？

```
private void fadeOutImage() {
   final ImageView imageView = (ImageView) activity.findViewById(R.id.imageView);
   imageView.setAlpha(0);
   imageView.startAnimation(AnimationUtils.loadAnimation(activity, R.anim.fadeout));
} 
```

为了让它工作，我必须创建一个`AnimationListener`，重载`onAnimationEnd`，并将 alpha 设置为零。为什么？

```
 final ImageView imageView = (ImageView) activity.findViewById(id);
  Animation animation = AnimationUtils.loadAnimation(activity, R.anim.fadeout);
  animation.setAnimationListener(new AnimationListener() {

     @Override public void onAnimationStart(Animation animation) { 
        imageView.setAlpha(255);
     }

     @Override public void onAnimationRepeat(Animation animation) { }

     @Override public void onAnimationEnd(Animation animation) {
        imageView.setAlpha(0);
     }
  });
  imageView.startAnimation(animation); 
```

动画 XML：

```
<alpha
    android:duration="1500"
    android:fromAlpha="1.0"
    android:interpolator="@android:anim/accelerate_interpolator"
    android:toAlpha="0.0" /> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T05:22:45.833

当您启动动画时，它实际上会采用视图当前的样子，根据您提供的动画对其进行动画处理，但***实际上不会更改视图的状态***。

This can get confusing, but in your first case, after the animation ends, the ImageView just goes back to whatever it looked like before the animation - in your case, the normal opaque.

In your second example, you are setting the alpha to zero *before* the animation starts, and so when the animation begins playing, the image is already invisible, and so it animates this invisible ImageView - which you can't see.

Therefore, the required sequence is to start the animation before changing the ImageView at all, let it play out, and then the moment the animation ends, change the state of the ImageView so that it disappears before it gets redrawn in it's original state. This is what overriding `onAnimationEnd()` does.

So, to recap, in the proper implementation, there are two things that affect how the ImageView gets drawn:

*   The animation, which affects how the ImageView looks **only while the animation is playing**.
*   The `imageView.setAlpha(0);` method call, to keep the image invisible **once the animation finishes**.

* * *

Note: to possibly increase performance, I'd suggest using

```
imageView.setVisibility(View.INVISIBLE); 
```

instead of `imageView.setAlpha(0);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:08:12.857

> I'm trying to fade out an `ImageView` using an animation. The animation runs, fading out the `ImageView`, but then the image goes back to fully opaque. Why does this happen?

The animation's effects are *temporary*. Once the animation has completed, the view returns to its state before the animation began.

> I tried setting the alpha to zero as below, but then the image never showed up period. Why not?

Though [apparently undocumented](http://developer.android.com/guide/topics/resources/animation-resource.html#alpha-element), the `fromAlpha` and `toAlpha` parameters appear to act in a *multiplicative* fashion. 100% of zero is still zero. I verified this by starting the alpha to a very low value, and I could see that the animation caused the alpha to start at the low value and fade to transparent.

> To get this to work, I had to create an AnimationListener, overload the onAnimationEnd, and set the alpha to be zero there. Why?

Since the animation's effects are temporary, you need to set the object to be transparent after the animation. You also have to make sure you reset the object to be opaque before you start the animation.

It looks like you can use an [`ObjectAnimator`](http://developer.android.com/reference/android/animation/ObjectAnimator.html) starting in API 11 to set the alpha (or any other property's) values directly using rather than multiplicatively.

# parsing - LALR 与 LL 解析器

> ID：12170869
> 
> 赞同：18
> 
> 时间：2012-08-29T04:26:31.340
> 
> 标签：parsing, antlr, yacc, lalr, ll

我一直在使用 lex/yacc，现在我正在尝试切换到 ANTLR。主要问题是 ANTLR 是一个 LL(*) 解析器，而 yacc 是 LALR。我习惯于自下而上地思考，我并不完全知道 LL 语法的优势是什么。人们说现在 LL 语法更容易理解并且更受欢迎。但似乎 LR 解析器更强大，例如 LL 解析器无法处理左递归，尽管似乎有一些解决方法。

所以问题是 LL 语法相对于 LALR 的优势是什么？如果有人能给我一些例子，我将不胜感激。指向有用文章的链接也很棒。

提前感谢您的帮助！

（我看到这是一个很好的资源：[LL 解析器比 LR 解析器有什么优势？](https://stackoverflow.com/questions/4092280/what-advantages-do-ll-parsers-have-over-lr-parsers?rq=1)，但如果有一些例子会更好。）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-29T04:41:21.653

LR 解析器严格来说比 LL 解析器更强大，此外，LALR 解析器可以像 LL 解析器一样在 O(n) 中运行。所以你不会发现 LL 比 LR 有任何功能优势。

因此，LL 的唯一优点是 LR 状态机相当复杂且难以理解，并且 LR 解析器本身并不是特别直观。另一方面，自动生成的 LL 解析器代码非常容易理解和调试。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-29T04:38:17.150

我看到 LL 解析器的最大优势是它们很容易理解和实现！您可以使用与语法非常匹配的代码手动编写[递归下降解析器。](http://en.wikipedia.org/wiki/Recursive_descent)

LR 通常被认为更强大，也更快，但我知道有一些权衡：

*   LR解析器只能使用合成属性；他们不能传递继承的属性。
*   LR 语法中的动作会导致语法不确定性，但在 LL 中不会。

但是，您会发现 LL(*) 也非常强大。

# iphone - 如何在 Objective-C 中将键值对添加到 plist 文件中

> ID：12170871
> 
> 赞同：1
> 
> 时间：2012-08-29T04:26:43.963
> 
> 标签：iphone, objective-c, ios

我正在开发一个 iPhone 应用程序，我需要使用 Objective-c 将一个新的键值对添加到现有的 plist 文件中。这是我迄今为止尝试过的：

```
NSString *myFile=[[NSBundle mainBundle] pathForResource:@"Favourites" ofType:@"plist"];

dict = [[NSMutableDictionary alloc] initWithContentsOfFile:myFile];
[dict setObject:textContent forKey:keyName];
[dict writeToFile:myFile atomically:YES]; 
```

但是，当我这样做时，它不会将其写入文件。我只看到基于更改键值或添加到另一个键的资源。还有另一种方法可以做到这一点吗？

感谢您的时间

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T04:34:11.473

您不能在捆绑包中进行任何更改。因此，您要做的就是将`.plist`文件复制到您的文档目录中并在那里进行操作。

这些方面的东西：

```
//check for plist
//Get documents directory's location
NSArray*docDir=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);
NSString*filePath=[docDir objectAtIndex:0];
NSString*plistPath=[filePath stringByAppendingPathComponent:@"Favourites.plist"];

//Check plist's existance using FileManager
NSError*err=nil;
NSFileManager*fManager=[NSFileManager defaultManager];

if(![fManager fileExistsAtPath:plistPath])
{
    //file doesn't exist, copy file from bundle to documents directory

    NSString*bundlePath=[[NSBundle mainBundle] pathForResource:@"Favourites" ofType:@"plist"];
    [fManager copyItemAtPath:bundlePath toPath:plistPath error:&err];
}

//Get the dictionary from the plist's path
NSMutableDictionary*plistDict=[[NSMutableDictionary alloc] initWithContentsOfFile:plistPath];
 //Manipulate the dictionary
 [plistDict setObject:textContent forKey:keyName];
 //Again save in doc directory.
 [plistDict writeToFile:myFile atomically:YES]; 
```

# php - 这个查询需要什么样的mysql函数？

> ID：12170874
> 
> 赞同：0
> 
> 时间：2012-08-29T04:27:05.987
> 
> 标签：php, mysql, function

我不知道这篇文章是否重复。我发现了一些由某人组成`JQuery DataTable`并由某人制作的 php 文件（我不知道开发人员在哪里）。

[客户端](http://pastebin.com/AMkh9)

[服务器端](http://pastebin.com/vphd4gEG)

该查询的功能是显示数据库中的数据，查询如下：

```
case 'average' :
                $needfieldname=false;
                $month=getVar('calcmonth');
                $sql="SELECT SQL_CALC_FOUND_ROWS ID,name,remark,avrusepmonth 
                , CONCAT('<input type=''checkbox''id=''cb' , ID ,''' name=''check[]'' value=''',ID,''' >'
                ,'<label class=''lbcb'' for=''cb', ID,'''><=update=</label>') as checkb 
                , moq, leadtime 
                FROM test_media ";
                break; 
```

我想在这里问的是这部分：

```
monthavrage(ID,".$month.") as latestavr 
```

在上面的查询中，什么样的 Mysql 函数？因为我收到了如下错误：

```
FUNCTION TestMediaControl.monthavrage does not exist 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T04:38:53.710

```
FUNCTION TestMediaControl.monthavrage does not exist 
```

如果相关的错误代码是 1305，这意味着 MySQL 正在寻找存储过程“monthavrage”，但找不到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T04:31:47.650

我找到了一个声明monthavrage函数的SQL文件。我只需要执行这个文件，所以我的问题就消失了。

```
USE testmediacontrol;

DROP FUNCTION IF EXISTS  monthavrage;

delimiter //

CREATE FUNCTION monthavrage (mediaID MEDIUMINT ,amonth DECIMAL(2)) RETURNS DECIMAL(6,2)
BEGIN
        DECLARE avguse DECIMAL(6,2);
        DECLARE howlongmonth DECIMAL(2);

        SELECT DATEDIFF(NOW(),startuse)/30.4 
            INTO howlongmonth from media_use 
            WHERE media_ID=mediaID
            ORDER BY startuse 
            LIMIT 0,1;
        IF howlongmonth < amonth THEN
            SET amonth=howlongmonth;
        END IF;
        IF amonth <= 0 THEN
            RETURN 0;
        END IF;
        SELECT count(*)/amonth 
            INTO avguse from media_use 
            WHERE media_ID=mediaID and startuse  BETWEEN SUBDATE(now(),INTERVAL 6 MONTH) and  now();
        RETURN avguse;
END 
```

# javascript - 如何创建显示我们公司位置的动态地图？

> ID：12170875
> 
> 赞同：-1
> 
> 时间：2012-08-29T04:27:09.577
> 
> 标签：javascript, jquery

我正在寻找一个 jquery 插件，它允许我创建一个动态的世界地图，并用不同的颜色标记我们在那里有分支机构的国家，或者在那个国家放置我们公司的标志。我需要访问该地图，因此当用户单击一个国家/地区时，我可以触发 jquery 事件。

我认为谷歌有这样的东西，但我不确定

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T05:11:44.163

我不太确定你的意图是什么。但认为你可能会引起你的注意。

1.  [http://www.gethifi.com/blog/jquery-vs-flash-for-interactive-map](http://www.gethifi.com/blog/jquery-vs-flash-for-interactive-map)
2.  [http://code.google.com/p/jquery-ui-map/](http://code.google.com/p/jquery-ui-map/)

    ```
    http://jquery-ui-map.googlecode.com/svn/trunk/demos/jquery-google-maps-basic-example.html 
    ```

3.  [http://jqvmap.com/](http://jqvmap.com/)
4.  [http://jquerygeo.com/test/examples/events.html](http://jquerygeo.com/test/examples/events.html)

这些是我迄今为止发现的最好的

# macos - 未保存对 Outlook 邮件的 AppleScript 更改

> ID：12170878
> 
> 赞同：0
> 
> 时间：2012-08-29T04:27:18.357
> 
> 标签：macos, outlook, applescript

我在工作中被迫使用 Outlook for Mac 连接到公司 Exchange，并且我拼凑了一个小的 AppleScript 来更改来自我们监控系统的传入电子邮件的主题行。默认情况下，它们的长度很长，人类不可读。我正在尝试解决这个问题。

该脚本可以工作，但是由于某些奇怪的原因，当我自己发送测试消息时一切都运行良好，但是当来自监控系统的真实消息进入时，所有更改都会恢复！当邮件到达我的邮箱时，主题正是我想要的，但在 3-5 秒内它又恢复到原来的主题！

我对 AppleScript 一无所知，也不知道在哪里解决这样的问题。

有人请看一下并告诉我我正在尝试做的事情是否可行？

```
on replaceText(find, replace, subject)
    set prevTIDs to text item delimiters of AppleScript
    set text item delimiters of AppleScript to find
    set subject to text items of subject

    set text item delimiters of AppleScript to replace
    set subject to "" & subject
    set text item delimiters of AppleScript to prevTIDs

    return subject
end replaceText

tell application "Microsoft Outlook"
    set theMessages to the current messages
end tell

repeat with theMsg in theMessages
    tell application "Microsoft Outlook"
        set mysubject to get the subject of theMsg
        if mysubject contains "[Subscription:Spectrum CTO] SPECTRUM - " then
            set mysubject to my replaceText("[Subscription:Spectrum CTO] SPECTRUM - ", "", mysubject)
            set mysubject to my replaceText("Alarm Title: ", "", mysubject)
            set mysubject to my replaceText("Severity: ", "", mysubject)
            set mysubject to my replaceText("Model Name:", "-", mysubject)
            set subject of theMsg to the mysubject as string
        end if
    end tell
end repeat 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T05:07:59.603

因为唯一改变消息的行是

```
set subject of theMsg to the mysubject as string 
```

看来这可能是 Exchange 的问题。您是否尝试过在另一封电子邮件到达时简单地设置其主题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T18:47:25.293

好的，问题已通过添加解决

`delay(3)`

就在之前

`set subject of theMsg to the mysubject as string`

# asp.net - 如何使用 Dotfuscator

> ID：12170881
> 
> 赞同：0
> 
> 时间：2012-08-29T04:27:50.510
> 
> 标签：asp.net, obfuscation, dotfuscator

目前我正在开发一个 ASP.NET mvc2 项目。在那我有一些dll文件。我想使用混淆器来保护它。任何人都可以给我一些帮助，以便使用 Dotfuscator 做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T04:31:47.860

您可能会看到这篇文章：[保护您的 .NET 应用程序](http://www.dotnetcurry.com/ShowArticle.aspx?ID=507)

> 本文演示了如何使用随 Visual Studio 2010 免费提供的 Dotfuscator 来保护 .NET 程序集并使逆向工程的过程变得困难。

但是请记住，您不能 100% 保护您的代码免于反编译，您只能使反编译变得困难。

# matlab - 将矩阵中的 NaN 替换为上一行中的值

> ID：12170883
> 
> 赞同：1
> 
> 时间：2012-08-29T04:28:04.710
> 
> 标签：matlab

如果每行有一个 NaN 元素，我想删除它，并用上面的元素替换

```
A = [   0    0;   
        0    0;   
        1   -1;   
      nan  nan;   
        0    0;   
        0    0; 
      nan  nan;
        0    0
    ] 
```

所需的输出是：

```
A = [   0    0;   
        0    0;   
        1   -1;   
        1   -1;   
        0    0;   
        0    0; 
        0    0; 
        0    0
    ] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T04:55:51.013

尝试

```
 i = find(isnan(A));
  A(i) = A(i-1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T06:54:58.800

首先生成一个包含 a 的逻辑向量`true`，只要该行的一个元素是 a `NaN`。然后您可以使用该向量来操作矩阵

```
mask = any(isnan(A), 2);
A(mask, :) = A([mask(2:end); false], :); 
```

另一种方法是

```
mask = any(isnan(A), 2);
idx = find(mask);
A(idx, :) = A(idx - 1, :); 
```

**注意：**如果第一行包含`NaN`. 为了安全起见，您可以使用类似的东西

```
if mask(1)
    %# First row contains a NaN.
    ... Do something ...
else
    ... Ordinary replacement ...
end 
```

# asp.net - QueryString 不接受 & - 需要

> ID：12170885
> 
> 赞同：3
> 
> 时间：2012-08-29T04:28:21.370
> 
> 标签：asp.net, .net, vb.net, request.querystring

我需要能够在我的 .Net 代码中处理 HTML 编码的 & 符号。

所以网址是

```
http://myite.com/index.aspx?language=en&amp;Refresh=true 
```

没有办法改变它，因为它是由其他东西生成的，所以这是我无法控制的。

如何读取 Refresh 参数？

我努力了

```
HttpUtility.UrlDecode(Request.QueryString("Refresh")) 
```

但我的 Request.QueryString("Refresh") 实际上是空的，所以这是没有意义的，Uri.EscapeDataString 也是如此。

这不可能是第一次发生这种情况，但我正在努力寻找解决方案，因为大多数人会说使用 UrlEncoding，但正如我所说，Url 超出了我的控制范围。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T04:33:14.273

`&`在您的查询字符串中应该是`%26`.

由于您无法更正网址。

您可以将刷新值读取为：

```
Request.QueryString("amp;Refresh"); 
```

请注意，您正在使用的服务的开发人员将来可能会更正此问题。最好已经为此做好准备。

```
var refresh = Request.QueryString("amp;Refresh");
if(String.IsNullOrEmpty(refresh))
    refresh = Request.QueryString("Refresh"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T05:08:11.990

nunespascal 答案几乎可以解决您的问题。有一些替代方法。

如果它保证您的 Refresh 参数是 QueryStringCollection 中的第二个键，那么您可以使用`Request.QueryString(1)`

`Contains`另一种方法是对QueryStringCollection做一个。

```
If Request.QueryString IsNot Nothing AndAlso Request.QueryString.AllKeys.Count() > 0 Then
    Dim refreshKey = Request.QueryString.AllKeys.FirstOrDefault(Function(nv) nv.Contains("Refresh"))
    If refreshKey IsNot Nothing Then
        Dim refreshValue = Request.QueryString(refreshKey)
    End If
End If 
```

# jquery - jQuery slideUp（）不缩小填充底部值

> ID：12170889
> 
> 赞同：7
> 
> 时间：2012-08-29T04:29:06.863
> 
> 标签：jquery, css

在[这个小提琴](http://jsfiddle.net/9wPad/1/)中，您会注意到，当您单击其中一个按钮时，容器会慢慢向上滑动。当它到达顶部时，您会发现它并没有完全向上滑动。如果您查看检查器，则`li`的底部填充不会像您预期的那样在`slideUp()`操作期间收缩。

知道为什么吗？

注意：上滑速度很慢，以便更好地显示问题。

注意 2：当我将 jQuery 库更改为 1.7.2 时，它实际上可以正常工作。有趣的。

FWIW：我用 jQuery提交了[一张票](http://bugs.jquery.com/ticket/12416)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T05:48:30.213

**编辑：**

此回归已在 jQuery 1.8.1- [fiddle](http://jsfiddle.net/ult_combo/9wPad/14/)中修复。

* * *

正如您已经注意到的，这是 v1.8.0 中的另一个错误。

这个[小提琴](http://jsfiddle.net/ult_combo/UmTds/1/)演示了在's 动画的`paddingBottom`最后被简单地减去。`slideUp`微妙的`paddingBottom`减法在你的小提琴上是不可见的，因为当你`slideDown`在回调内部调用时，它`paddingBottom`会立即添加回来（与它的减法对称）。[小提琴](http://jsfiddle.net/ult_combo/UmTds/2/)

如果您不想等到修复程序发布并且不想降级到 1.7.2，则使其行为与 1.7.2 相同的临时解决方法是将 CSS 属性映射传递给`.animate`：

```
function next() {
    var q = $(this).parents('li');
    q.data('originalDimensions', {
        borderTopWidth: q.css('borderTopWidth'),
        paddingTop: q.css('paddingTop'),
        height: q.css('height'),
        paddingBottom: q.css('paddingBottom'),
        borderBottomWidth: q.css('borderBottomWidth')
    });
    q.animate({ borderTopWidth:0, paddingTop:0, height:0, paddingBottom:0, borderBottomWidth:0 }, 5000, function(){
        $(this).animate($(this).data('originalDimensions'), 5000);
    });
} 
```

[**小提琴**](http://jsfiddle.net/ult_combo/9wPad/6/)

让我们投票支持您的票，并希望它在 1.8.1 版本中得到修复。

**编辑**：更新了解决方法以将 存储`originalDimensions`在元素中[`.data()`](http://api.jquery.com/data/)，这样它就可以在以后的时间和不同的范围内使用。要一次为多个元素设置动画，请使用`.each`迭代设置`.data()`：

```
q.each(function() {
    var $this = $(this);
    $this.data('originalDimensions', {
        borderTopWidth: $this.css('borderTopWidth'),
        //...
    });
});
q.animate({ borderTopWidth:0, /*...*/ }, 5000, function() {
    $(this).animate($(this).data('originalDimensions'), 5000);
}); 
```

[**小提琴**](http://jsfiddle.net/ult_combo/9wPad/13/)

# ajax - Drupal 模块权限

> ID：12170890
> 
> 赞同：0
> 
> 时间：2012-08-29T04:29:12.993
> 
> 标签：ajax, drupal-7, user-permissions

当我使用管理员用户运行代码时，模块会返回它应该返回的内容。但是，当我使用普通用户运行它时，会出现 403 错误。该模块从 AJAX 调用返回数据。我已经尝试添加一个**'访问回调'=>'user_access'）；**到**exoticlang_chat_logger_menu()**函数的行。我会很感激你可能有的任何指示。

谢谢您的帮助

AJAX 调用：

```
jQuery.ajax({
    type: 'POST',
    url: '/chatlog',
    success: exoticlangAjaxCompleted,
    data:'messageLog=' + privateMessageLogJson,
    dataType: 'json'
}); 
```

模块代码：

```
function exoticlang_chat_logger_init(){
drupal_add_js('misc/jquery.form.js');
drupal_add_library('system', 'drupal.ajax');
}

function exoticlang_chat_logger_permission() {
  return array(
    'Save chat data' => array(
      'title' => t('Save ExoticLang Chat Data'),
      'description' => t('Send private message on chat close')
    ),
  );
}

/**
 * Implementation of hook_menu().
 */

function exoticlang_chat_logger_menu() {
    $items = array();
    $items['chatlog'] = array(
    'type'             => MENU_CALLBACK,
    'page callback'    => 'exoticlang_chat_log_ajax',
    'access arguments' => 'Save chat data');
    //'access callback' => 'user_access');
    return $items;
}

function exoticlang_chat_logger_ajax(){
    $messageLog=stripslashes($_POST['messageLog']);

    $chatLog= 'Drupal has processed this. Message log is: '.$messageLog;
    $chatLog=str_replace('":"{[{','":[{',$chatLog);
    $chatLog=str_replace(',,',',',$chatLog);
    $chatLog=str_replace('"}"','"}',$chatLog);
    $chatLog=str_replace('"}]}"','"}]',$chatLog);

     echo json_encode(array('messageLog' => $chatLog));
//    echo $chatLog;

    echo print_r(privatemsg_new_thread(array(user_load(1)), 'The subject', 'The body text'));
    drupal_exit();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T21:37:20.513

`access arguments`需要是一个数组：

```
$items['chatlog'] = array(
  'type'             => MENU_CALLBACK,
  'page callback'    => 'exoticlang_chat_log_ajax',
  'access arguments' => array('Save chat data')
); 
```

# javascript - Knockoutjs 映射 - 无法正常工作

> ID：12170891
> 
> 赞同：0
> 
> 时间：2012-08-29T04:29:13.113
> 
> 标签：javascript, knockout.js

我很难理解映射如何与 knockoutjs 一起工作。

借口：

我有一个返回 JSON 的 API

我想将该 JSON 映射到我视图中的列表

javascript:

```
 var data = JSON.stringify([
        {
            "text": "this be some text"
        },
        {
            "text": "some more text here"
        }
    ]);

    var viewModel = ko.mapping.fromJSON(data);

    var updateData = function(){
        var newData = JSON.stringify([
            {
                "text": "this be some asdfasdfasdf"
            },
            {
                "text": "some more asdfasdfdfdf here"
            }
        ]);

        ko.mapping.fromJSON(newData, viewModel);
    }

    ko.applyBindings(viewModel); 
```

data 和 newData 的格式相同，我将从 API 调用中获取数据。（只是对象数组）

我怎样才能输出这些数据？

```
<ul data-bind="foreach: whatgoeshere?">
    <li data-bind="text: text"></li>
</ul> 
```

谢谢你向我解释这个魔法是如何工作的；）祝你有美好的一天

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T04:39:48.997

首先，您应该使用 fromJS 而不是 fromJSON，因为最后一个需要包含 json 的字符串。

另一件事是你应该像这样修改你的视图模型：

```
{ arr: [ { name:'text' }, ... ] } 
```

并在你的 foreach 绑定中输入 arr。

如果您不想修改模型，则可以将 $root 传递给指向您在 ko.applyBindings 中使用的模型的 foreach

# c# - 使用添加剂混合绘制图像

> ID：12170894
> 
> 赞同：9
> 
> 时间：2012-08-29T04:29:30.730
> 
> 标签：c#, winforms, system.drawing, color-blending

**问题得到了回答。有关更多信息，请查看本文末尾的 EDIT #4。**

我们目前正在开发一个运行良好的游戏引擎。我正在开发动画创建器，想知道是否可以使用加法混合绘制图像。

让我解释。

我们使用 C# 的 System.Drawing 库并使用 Windows 窗体。目前，用户可以通过导入带框动画图像（包含动画每一帧的图像）来创建动画，并且用户可以将这些帧拖放到任何他想要的地方。

实际的问题是我们无法弄清楚如何使用加法混合来绘制框架。

如果您不太明白，这里有一个添加剂混合的例子。我不会怪你，我很难用英语写作。 ![添加剂混合示例](../Images/0d836fe392d952e54bcec66316a76224.png)

我们使用以下方法在 Panel 上或直接在窗体上绘制。例如，这里是为地图编辑器绘制平铺地图的代码。由于 AnimationManager 代码是一团糟，用这个例子会更清楚。

```
 using (Graphics g = Graphics.FromImage(MapBuffer as Image))
        using (Brush brush = new SolidBrush(Color.White))
        using (Pen pen = new Pen(Color.FromArgb(255, 0, 0, 0), 1))
        {
            g.FillRectangle(brush, new Rectangle(new Point(0, 0), new Size(CurrentMap.MapSize.Width * TileSize, CurrentMap.MapSize.Height * TileSize)));

            Tile tile = CurrentMap.Tiles[l, x, y];
            if (tile.Background != null) g.DrawImage(tile.Background, new Point(tile.X * TileSize, tile.Y * TileSize));

            g.DrawRectangle(pen, x * TileSize, y * TileSize, TileSize, TileSize);
        } 
```

有没有一种可能的方法来绘制一个附加绘图的图像，如果是这样，如果有人能指出我如何，我将永远感激不尽。谢谢你。

**编辑＃1：**

对于绘制图像，我们使用颜色矩阵来设置色调和 alph（不透明度），如下所示：

```
ColorMatrix matrix = new ColorMatrix
(
    new Single[][]  
    { 
        new Single[] {r, 0, 0, 0, 0},
        new Single[] {0, g, 0, 0, 0},
        new Single[] {0, 0, b, 0, 0},
        new Single[] {0, 0, 0, a, 0},
        new Single[] {0, 0, 0, 0, 1}
    }
); 
```

也许颜色矩阵可以用于加法混合？

**编辑#2：**

刚刚发现了 Mahesh Chand 的[这篇](http://www.c-sharpcorner.com/UploadFile/mahesh/Transformations0512192005050129AM/Transformations05.aspx)文章。

进一步浏览后，即使颜色矩阵可以完成很多关于颜色转换的工作，它也可能无法使用。如果找到解决方案，我将回答我自己的问题。

谢谢你的帮助。

**编辑#3：**

[XNA这里](http://msdn.microsoft.com/en-us/library/bb976070.aspx)有很多关于混合的文档。我找到了用于在图像的每个像素上完成加法混合的公式。

PixelColor = (source * [1, 1, 1, 1]) + (destination * [1, 1, 1, 1])

也许有一种在当前上下文中使用这个公式的方法？我将在下一次编辑时开始 50 赏金，我们真的需要这个来工作。

再次感谢您的宝贵时间。

**编辑#4**

感谢axon，现在问题解决了。使用 XNA 及其 Spritebatch，您可以完成 Additive 混合：

首先你创建一个 GraphicsDevice 和一个 SpriteBatch

```
// In the following example, we want to draw inside a Panel called PN_Canvas. 
// If you want to draw directly on the form, simply use "this" if you
// write the following code in your form class

PresentationParameters pp = new PresentationParameters();

// Replace PN_Canvas with the control to be drawn on
pp.BackBufferHeight = PN_Canvas.Height;
pp.BackBufferWidth = PN_Canvas.Width;
pp.DeviceWindowHandle = PN_Canvas.Handle;
pp.IsFullScreen = false;

device = new GraphicsDevice(GraphicsAdapter.DefaultAdapter, GraphicsProfile.Reach, pp);
batch = new SpriteBatch(device); 
```

然后，当需要在控件或窗体上绘图时（例如使用 OnPaint 事件），您可以使用以下代码块

```
// You should always clear the GraphicsDevice first
device.Clear(Microsoft.Xna.Framework.Color.Black);

// Note the last parameter of Begin method
batch.Begin(SpriteSortMode.BackToFront, BlendState.Additive);
batch.draw( /* Things you want to draw, positions and other infos */ );
batch.End();

// The Present method will draw buffer onto control or form
device.Present(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T06:52:59.487

要么使用 1) XNA（推荐速度），要么 2) 在 C# 中使用像素操作。可能还有其他方法，但其中任何一种都有效（我将它们中的每一种用于我维护的 3D 效果和图像分析应用程序（分别））。

**C# 中的像素操作：** 使用 3 个位图；bmpA, bmpB, bmpC，你想在 bmpC 中存储 bmpA+bmpB 的地方。

```
for (int y = 0; y < bmp.Height; y++)
{
    for (int x = 0; x < bmp.Width; x++)
    {
        Color cA = bmpA.GetPixel(x,y);
        Color cB = bmpB.GetPixel(x,y);
        Color cC = Color.FromArgb(cA.A, cA.R + cB.R, cA.G + cB.G, cA.B + cB.B);
        bmpC.SetPixel(x, y, cC);
    }
} 
```

上面的代码很慢。C# 中更快的解决方案可以使用如下指针：

```
 // Assumes all bitmaps are the same size and same pixel format
    BitmapData bmpDataA = bmpA.LockBits(new Rectangle(0, 0, bmpA.Width, bmpA.Height), ImageLockMode.ReadOnly, bmpA.PixelFormat);
    BitmapData bmpDataB = bmpB.LockBits(new Rectangle(0, 0, bmpA.Width, bmpA.Height), ImageLockMode.ReadOnly, bmpA.PixelFormat);
    BitmapData bmpDataC = bmpC.LockBits(new Rectangle(0, 0, bmpA.Width, bmpA.Height), ImageLockMode.WriteOnly, bmpA.PixelFormat);
    void* pBmpA = bmpDataA.Scan0.ToPointer();
    void* pBmpB = bmpDataB.Scan0.ToPointer();
    void* pBmpC = bmpDataC.Scan0.ToPointer();
    int bytesPerPix = bmpDataA.Stride / bmpA.Width;
    for (int y = 0; y < bmp.Height; y++)
    {
        for (int x = 0; x < bmp.Width; x++, pBmpA += bytesPerPix, pBmpB += bytesPerPix, pBmpC += bytesPerPix)
        {
            *(byte*)(pBmpC) = *(byte*)(pBmpA) + *(byte*)(pBmpB); // R
            *(byte*)(pBmpC + 1) = *(byte*)(pBmpA + 1) + *(byte*)(pBmpB + 1); // G
            *(byte*)(pBmpC + 2) = *(byte*)(pBmpA + 2) + *(byte*)(pBmpB + 2); // B
        }
    }
    bmpA.UnlockBits(bmpDataA);
    bmpB.UnlockBits(bmpDataB);
    bmpC.UnlockBits(bmpDataC); 
```

上述方法需要指针，因此必须使用“不安全”指令进行编译。还假设 R、G 和 B 各有 1 个字节。更改代码以适合您的像素格式。

**使用 XNA**更快（性能），因为它是硬件加速（由 GPU）。它基本上包括以下内容： 1\. 创建绘制图像所需的几何图形（一个矩形，很可能是一个全屏四边形）。2\. 编写顶点着色器和像素着色器。顶点着色器可以简单地通过未修改的几何体。或者您可以应用正交投影（取决于您要为四边形使用的坐标）。像素着色器将具有以下行 (HLSL)：

```
float4 ps(vertexOutput IN) : COLOR 
{
    float3 a = tex2D(ColorSampler,IN.UV).rgb;
    float3 b = tex2D(ColorSampler2,IN.UV).rgb;
    return float4(a + b,1.0f);
} 
```

有不同的方法可用于访问纹理。以下也将起作用（取决于您希望 XNA 代码如何绑定到着色器参数）：

```
float4 ps(vertexOutput IN) : COLOR 
{
    float3 a = texA.Sample(samplerState, IN.UV).xyz;
    float3 b = texB.Sample(samplerState, IN.UV).xyz;
    return float4(a + b,1.0f);
} 
```

您使用上述哪个着色器将取决于您是要使用“sampler2D”还是“texture”HLSL 接口来访问纹理。

您还应该小心使用适当的采样器设置，以确保在查找颜色值时不使用采样（例如线性插值），除非这是您想要的（在这种情况下使用更高质量/更高阶的东西）。

XNA 还具有内置的 BlendStates，您可以使用它来指定重叠纹理的组合方式。即 BlendState.Additive （见更新的原始帖子）。

# ssh - 如何生成 ssh 密钥以在没有密码的情况下登录服务器

> ID：12170895
> 
> 赞同：3
> 
> 时间：2012-08-29T04:29:34.130
> 
> 标签：ssh, key, ssh-keys

我在亚马逊 AWS 上使用了服务器，它们向我发送了一个公钥 .pem 文件，当我 ssh 进入时，我所要做的就是：

```
ssh -i key.pem user@server 
```

我现在有自己的服务器，并试图弄清楚如何使用我的服务器执行此操作，以便我可以通过 ssh 自动向我的服务器发送命令。

我想我需要在我的服务器上生成这个密钥并将它复制到我的客户端机器上。如何生成此密钥？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T05:27:42.970

在您希望登录的客户端计算机上*，*运行`ssh-keygen`. 要获得快速简便的密钥，只需在所有问题上按 Enter。这将在 ~/.ssh 中创建一个密钥对。具体来说， ~/.ssh/id_rsa 是您的私钥（请妥善保管），而 ~/.ssh/id_rsa.pub 是您的公钥（可以分发）。

将您的公钥 (~/.ssh/id_rsa.pub) 复制到您希望登录的服务器*上*（例如`scp ~/.ssh/id_rsa.pub me@myserver:`。在服务器上，运行`cat id_rsa.pub >> .ssh/authorized_keys`。要确保它具有正确的权限，您可以运行`chmod 644 ~/.ssh/authorized_keys`。此外，您可以现在删除您复制的 id_rsa.pub 文件。

而已！您应该有从客户端到服务器的无密码登录。如果您想要从服务器到客户端的无密码登录，则必须在交换客户端和服务器的情况下重复该过程。

*笔记：*

1.  如果 ~/.ssh 目录在您的服务器上不存在，创建它的最佳方法是从服务器 ssh 到其他机器（例如客户端）。这将确保它具有正确的权限。
2.  如果您对某人访问客户端感到偏执，您可以密码保护密钥（运行时的提示之一`ssh-keygen`），但是每次登录时您都必须输入该密码。解决此问题的方法是使用ssh 代理。

# flash - 使用 swfutils 作为 flex 的一部分的非整数 Flash 帧速率错误——那里有更好的 swf 解析器吗？

> ID：12170899
> 
> 赞同：0
> 
> 时间：2012-08-29T04:29:42.807
> 
> 标签：flash

我正在使用 swfutils 4.6 来获取有关在我们的应用程序中上传的 Flash 文件的信息。

问题是用户试图上传一个非整数帧速率的 Flash 文件，在本例中为 12.5，而 SWFParser 无法正确处理它并决定帧速率为 32760！

这似乎发生在所有非整数帧速率上。

有没有解决的办法？

有谁知道更好的 SWF 解析器？

swfutils 是由 Adob​​e 发布的，所以我认为除了这个错误之外它还算不错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T23:08:50.620

Flagstone 的 Transform 似乎效果更好，至少在处理非整数帧速率方面要好得多。

这里有更多信息：[http ://www.flagstonesoftware.com/transform/index.html](http://www.flagstonesoftware.com/transform/index.html)

# objective-c - Objective-C 使用 IF 语句停止计数器

> ID：12170905
> 
> 赞同：-2
> 
> 时间：2012-08-29T04:30:04.177
> 
> 标签：objective-c, cocoa-touch, cocos2d-iphone

我有一个使用 if 语句的分数计数器

```
 if (CGRectIntersectsRect(aliens.boundingBox, heroe.boundingBox)) {
        heroe.visible = NO;
        //HOW DO I STOP THE SCORE++ HERE?
  } 
  else {
        score++;
        [scoreLabel setString: [NSString stringWithFormat:@"%i", score]];

  } 
```

我找不到停止得分的方法++

有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T04:36:34.837

试试这个

```
if (CGRectIntersectsRect(aliens.boundingBox, heroe.boundingBox)) {

heroe.visible = NO;

}
else{
if(heroe.visible == yes)
score++;

[scoreLabel setString: [NSString stringWithFormat:@"%i", score]]; 
```

}

# ruby-on-rails - 如何在rails 3中生成excel报告并将其发送到电子邮件

> ID：12170910
> 
> 赞同：2
> 
> 时间：2012-08-29T04:30:23.423
> 
> 标签：ruby-on-rails, ruby, export-to-excel

我想从数据库模型中的数据生成 excel 表

*   我想要自定义标题的功能

*   我想从浏览器下载

*   我想发送到邮箱

是否有任何宝石可以满足此要求

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T04:37:35.460

您可以使用 axlsx gem 生成 xls 文档

这些是几个链接

[https://github.com/randym/axlsx](https://github.com/randym/axlsx)

[http://axlsx.blog.randym.net/](http://axlsx.blog.randym.net/)

[http://rubygems.org/gems/axlsx](http://rubygems.org/gems/axlsx)

愿这对你有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T04:35:00.747

尝试[axlsx](https://github.com/randym/axlsx)。这是一个非常好的电子表格生成器。
下载和电子邮件可以通过 Rails 完成。不需要其他宝石。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T20:59:47.760

我在 Expected Behavior 工作，我们创建了一个名为 DocRaptor 的 Web 应用程序，可以将 HTML 转换为 Excel。DocRaptor 是基于订阅的产品，但我们提供免费计划，允许用户每月创建多达 5 个文档。

既然你提到想要自定义标题，我认为它可能很合适。

这是 Code 博客上关于使用 DocRaptor 生成 Excel 文件的 Switch 的链接：

[http://www.switchonthecode.com/tutorials/using-doc-raptor-to-create-excel-spreadsheets](http://www.switchonthecode.com/tutorials/using-doc-raptor-to-create-excel-spreadsheets)

以及 DocRaptor 主页的链接：

[http://doraptor.com/](http://docraptor.com/)

# sql-server-2008 - 我可以使用分区关系表吗？

> ID：12170915
> 
> 赞同：0
> 
> 时间：2012-08-29T04:30:53.307
> 
> 标签：sql-server-2008, database-partitioning

目前，我有一个主键为“KeyID”的表 A（父）。该表有 2 个子表 B 和 C。在表 B 中，它具有外键“KeyID”。表 C 相同。下面是 3 个表的架构：

*   tblA (KeyID, POName, DateReceiver, Desc)
*   tblB (subkeyID, KeyID, ItemName, Desc)
*   tblC (subkey2ID, KeyID, ShipName, Desc)

关系是一对多的

因此，这些表之间的关系：

1.  **我们可以为这 3 个表**使用 MS SQL Server 2008 中的“分区表”功能吗？
2.  如果我为 Column DateReceiver 分区 tblA，如何为 2 个表 tblB 和 tblC 分区？将使用 tblB 和 tblC 的哪一列？

请指教。

非常感谢。

# java - 在 java 1.6 中跟踪文件

> ID：12170918
> 
> 赞同：2
> 
> 时间：2012-08-29T04:31:21.393
> 
> 标签：java, file

我想跟踪 unix 框中某个位置的多个文件，如果长时间没有人使用它们，则将其删除。我正在尝试搜索引用计数，但在谷歌上没有得到太多帮助。我还在 java 7 中看到了 FileTime，它可以给我最后一次访问的时间，但我必须使用 java 6 完成上述工作。如果有人对引用计数有任何想法或好的参考以及我如何使用它，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T04:46:47.940

您可以使用[apache common IO](http://commons.apache.org/io/)。在你的目录上设置观察者，它检查目录并通知监听器创建、更改或删除事件监听。通过这种方式，可以跟踪用户在哪个目录上工作，而其他人不在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T05:22:25.440

在 JDK 1.6 之前没有文件监视模块。您可以做的是，您可以通过查看

> java.io.File 类的 lastModified() 方法。

它以长值的形式返回您最后修改的时间，并且您会定期监视此文件。如果总时差

> （现在时间 - 上次修改时间）

超过您的时间标准，您可以删除该文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T04:36:29.190

好的，所以我们想要最后一次访问时间。

您可以阅读[获取文件的最后访问时间以获取](https://stackoverflow.com/questions/920259/getting-the-last-access-time-for-a-file-in-java)更多信息。

您可以尝试查看[http://jdevel.wordpress.com/2011/04/08/file-last-access-time-in-java-on-linux/](http://jdevel.wordpress.com/2011/04/08/file-last-access-time-in-java-on-linux/)以获得可能的灵魂，但这是 Linux，不是 Unix。

最后，您可以借用相同的想法并使用[JNA](http://en.wikipedia.org/wiki/Java_Native_Access)或[JNI](http://en.wikipedia.org/wiki/Java_Native_Interface)

# c# - 比较来自两个数据表的数据表单元格

> ID：12170920
> 
> 赞同：0
> 
> 时间：2012-08-29T04:31:44.550
> 
> 标签：c#, datagridview, datatable, compare, cell

我一直在研究一个将使用 NLP 来定义 DataTable 值的项目。我已经搞定了这个功能。但是，我在使用 DataTables 时遇到了一些问题。

我将有两个不同的数据表，两种不同的格式

例如：

**表格1**

|第 1 栏|

**表2**

|第 1 栏|第 2 栏|

在 DataTable2 中，第 2 列是第 1 列的对应值。我打算比较两个 DataTables 的第 1 列的单元格内容，并通过我的 NLP 运行它。如果它们有一定的匹配百分比，我会将它们写入另一个 DataTable。如果他们不匹配，我就把它留空。例如：

**如果 >75% 匹配**

**表3**

|DT1 第 1 列| DT2 第 1 列 | DT2 列 2|

**如果 <75% 匹配**

**表3**

|DT1 第 1 列| " " | " "

我打算以编程方式做的事情是可能的吗？如果它有助于更​​好地解释它，我会记住伪代码。

```
foreach(DataRow in Table1)
   foreach(DataRow in Table2)
      if(comparison score >=75.00)
            Write to table3
      else
            Write to table3 with blanks 
```

我将不胜感激有关此问题的任何帮助。不过，我仍然会做自己的研究，如果我有任何突破，我会回帖。

编辑：我刚刚意识到两个数据表中的行可能不一定对应，所以我必须对所有单元格进行比较。那可能吗？

不过，它不一定必须与 DataTables 一起使用，我愿意接受建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:41:29.470

所以由于时间限制（和绝望），我想出了一个不优雅的解决方案。

我使用了嵌套的*foreach* - *for*循环来遍历两个数据表。下面的代码：

```
 foreach (DataRow dRow in dt1.Rows)
            {
                a = dRow[0].ToString();
                for (int i = 0; i < dt2.Rows.Count; i++)
                {
                    b = dt2.Rows[i][0].ToString();
                    if (hcontroller.GetScore(a, b) >= 90.00)
                    {
                        c = dt2.Rows[i][1].ToString();
                        match = true;
                        break;
                    }
                    else
                    {
                        match = false;
                        continue;
                    }

                }
                if (match)
                {
                    dt.Rows.Add(a, b, c);
                }
                else
                {
                    dt.Rows.Add(a, "No close matches found!", "");
                }
            } 
```

但是，我非常确定当 DataTables 达到一定大小时，该操作将非常消耗内存。此外，*if*语句消除了找到更好匹配的可能性。

如果有其他建议，我愿意接受。但我希望这可以帮助任何遇到我面临的同样问题的人。干杯!

# c# - 用户控制的显示/显示事件

> ID：12170921
> 
> 赞同：2
> 
> 时间：2012-08-29T04:31:45.997
> 
> 标签：c#, winforms, events, user-controls, devexpress

我想在显示/显示我的用户控件时弹出/显示一个对话框。但我找不到任何这样的事件。我有什么选择，我必须自己做些什么来实现它？

我正在使用 DevExpress XtraUserControl。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T04:37:41.410

注册到`Activated`主窗体的事件。

```
public Form1()
{
    InitializeComponent();
    this.Activated +=new EventHandler(Form1_GotFocus);
}

public void Form1_GotFocus(object sender, EventArgs e)
{
    //your payload here
} 
```

请注意，如果您关闭对话框并返回到表单，则会再次触发该事件。

# php - 相同内容的文件大小不同

> ID：12170922
> 
> 赞同：0
> 
> 时间：2012-08-29T04:31:46.317
> 
> 标签：php

这是协议：

1) 我使用 PHP 在线生成一个包含字母数字字符的文本文件。然后我下载它并记下它的大小（从属性菜单）。

2）我用记事本++打开文本文件并将所有内容剪切到一个新的文本文件中，然后保存新文件（同名）。

3）令我惊讶的是，即使两个文件的文本内容完全相同，它们的大小也不一样！

--**测试 1** --

下载文件：**1529 Ko**

新副本文件：**1594 Ko**

--**测试 2** --

下载文件：**52 Ko**

新副本文件：**54 Ko**

* * *

所以呢？为什么我在这里发这个？因为我的用户可以在我的网站上下载有问题的文件，他们可以用它来替换游戏保存中的文件。但是，游戏通过拒绝新文件来对新文件做出反应，而复制的文件（使用上述协议）可以正常工作。

我看到两个文件之间的唯一区别是它们的大小（如上所示略有不同） - 但内容和名称是相同的。知道为什么会有这种大小差异吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T05:54:19.803

这很可能是在 unix（1 字节）和 windows（2 字节）之间转换的换行符。

正如评论中提到的，它也可以是编码，但 NotePad++ 非常擅长编码。它也不太可能解释这种差异。

您需要将 "\r\n" 转换为 "\n" 以获得更小的文件大小。这是我刚刚找到的带有几个选项的页面：http: [//darklaunch.com/2009/05/06/php-normalize-newlines-line-endings-crlf-cr-lf-unix-windows-mac](http://darklaunch.com/2009/05/06/php-normalize-newlines-line-endings-crlf-cr-lf-unix-windows-mac)

另一件要注意的是尾随的“换行符”，它不是很明显。同样，在进行比较之前将其剥离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T05:58:29.280

你的客户端和服务器是不同的平台吗？说linux和windows？在这种情况下，新行字符的存储方式会有所不同。这可能会导致尺寸差异。另一个原因可能是使用了字符编码，但可能性不大。

# objective-c - iOS 中的 __gm_weak 是什么意思

> ID：12170935
> 
> 赞同：1
> 
> 时间：2012-08-29T04:33:10.717
> 
> 标签：objective-c, ios, ipad

```
@interface Demo2ViewController () <GMGridViewDataSource, GMGridViewSortingDelegate, GMGridViewTransformationDelegate>
{
    __gm_weak GMGridView *_gmGridView1;
    __gm_weak GMGridView *_gmGridView2;

    __gm_weak UIButton *_buttonOptionsGrid1;
    __gm_weak UIButton *_buttonOptionsGrid2;

    UIPopoverController *_popOverController;
    UIViewController *_optionsController1;
    UIViewController *_optionsController2;
} 
```

试用 GMGridview，看到了这个 __gm_weak GMGridView *_gmGridView1;。有人知道__gm_weak 是什么意思，什么时候使用__？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T04:55:15.107

这些声明并不常见，它们是在 GMGridView 源代码中定义的：

```
//
// ARC on iOS 4 and 5
//

#if __IPHONE_OS_VERSION_MIN_REQUIRED >= __IPHONE_5_0 && !defined (GM_DONT_USE_ARC_WEAK_FEATURE)
#define __gm_weak __weak
#else
#define __gm_weak __unsafe_unretained
#endif 
```

至于双下划线的用法，我建议不要这样做。只考虑它为实现（例如工具链）保留并使用普通标识符。

# ios - 如何在 MailCore 中为撰写的邮件设置 UID

> ID：12170941
> 
> 赞同：0
> 
> 时间：2012-08-29T04:33:40.113
> 
> 标签：ios, cocoa, imap, mailcore

我正在使用 MailCore 框架准备 Mail iOS 应用程序。在撰写新邮件时，我如何为我的邮件设置 UID，因为邮件正在发送，但它不会移动或复制到已发送的邮箱或草稿文件夹。当我复制或移动消息时，它会在线崩溃..

```
NSString *uid = [msg uid]; 
```

在 CTCoreFolder 类中，在这些方法中..

```
- (void)copyMessage: (NSString *)path forMessage:(CTCoreMessage *)msg
- (void)moveMessage: (NSString *)path forMessage:(CTCoreMessage *)msg 
```

当我通过这种方式创建和发送消息时......

```
CTCoreMessage *msg = [[CTCoreMessage alloc] init];
 CTCoreAddress *fromAddress = [[CTCoreAddress alloc] initWithName:@"name" email:@"name@mailserver.com"];
  CTCoreAddress *address3 = [[CTCoreAddress alloc] initWithName:@"person" email:@"person@rcscentralmail.com"];

 [msg setFrom:[NSSet setWithObject:fromAddress]];
    [msg setTo:[NSSet setWithObject:address3]];
[msg setSubject:@"Test simple appfdgfghbfghb"];

[CTSMTPConnection sendMessage:msg server:@"mail.mailserver.com" username:@"abc@mailserver.com"
                         password:@"abcdef" port:587 useTLS:NO useAuth:YES]; 
```

调用连接到服务器后，我调用移动或复制方法，如 ::

```
[folder moveMessage:@"INBOX.Sent" forMessage:message]; 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T03:58:20.263

感谢 James 的支持...我得到了解决方案，您无法设置 UID，UID 仅由服务器分配。您需要将消息附加到已发送或草稿邮箱，这可以使用 CTCoreFolder 上的 -(BOOL)append:(CTCoreMessage*) 来完成。但是，此方法仅在最新版本的 MailCore 中。变更集可以在这里看到：

```
https://github.com/mronge/MailCore/commit/1f64ed5b56fc995613f8fc2dd33d3ff45fe140d0 
```

感谢马特·荣格。

# php - 我应该如何构建我的 RSS 提要拉站点以使站点快速加载？

> ID：12170942
> 
> 赞同：3
> 
> 时间：2012-08-29T04:33:40.863
> 
> 标签：php, mysql, performance, codeigniter, rss

我的网站 daisy.camorada.com 运行速度很慢。它运行缓慢的原因是我正在提取多个 RSS 提要来创建页面上显示的每个砌体。

我对你们的问题基本上是，我应该如何构建我的网站以使其快速、高效和可扩展？

我曾考虑使用 Code Igniter 将 RSS 提要放入数据库，然后在页面刷新时从该数据库中提取。我该怎么做？

这是我正在考虑的结构的图片：

![我正在考虑的结构](../Images/47b99c0406b6597e082e1a1f0b01c5a6.png)

这是当前提取提要的 PHP 代码（我知道它非常混乱，抱歉）： [https ://gist.github.com/3506863](https://gist.github.com/3506863)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T04:42:16.133

*使用 CodeIgniter 的道具，我讨厌看到人们在没有框架的情况下从头开始构建来减轻样板代码。*

查看设置**CRONJOB**或**windows 任务调度程序**，并有一个控制器来处理获取您的 RSS 提要（以及某种形式的缓存）。

您可以使用内置的**CI 缓存简单地缓存它们，或者通过将****文本存储在 DB 中**来按照您的描述进行操作。

如何通过 CLI 运行 cronjob：[http://codeigniter.com/user_guide/general/cli.html](http://codeigniter.com/user_guide/general/cli.html)

或者你可以寻找一个现有的 CI 库来为你做缓存/获取： http: [//codeigniter.com/forums/viewthread/160394/](http://codeigniter.com/forums/viewthread/160394/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T04:55:17.100

根据我在运行 RSS 大型聚合器方面的经验。

我强烈建议您使用[SimplePie](http://www.simplepie.org/)。它使您的工作变得更加轻松。它内置了缓存机制，因此您可以在将所需内容存储在数据库中的同时为主页提供缓存。

SimplePie 还内置了[类似 wordpress 的函数，](http://www.simplepie.org/wiki/reference/start#feed-level_data_basic)可以获取标题、内容、时间戳等。它还允许您将多个 RSS 提要混合为一个。

抱歉，答案最终是关于 simplepie，但这是我在运行这些网站时做出的最佳选择之一。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-29T05:22:20.200

这是您如何将提要缓存到文件系统的方法，无需数据库，并从那里拉出一段时间，这将大大加快您的应用程序的速度。也许它有一些兴趣。

```
<?php 
//Have a list of feeds
$feeds = array(
'http://rss.cnn.com/rss/cnn_topstories.rss',
'http://api.twitter.com/1/statuses/user_timeline.rss?screen_name=breakingnews',
'http://www.nytimes.com/services/xml/rss/nyt/pop_top.xml',
'http://news.yahoo.com/rss',
);

$cache_for = 3600; //in seconds
$feed_results = array();

/**
 * Loop through each feed and check if its age is older then $cache_for
 * Grab the feed and store in ./feeds_data
 * On next refresh feed is pulled from cache until $cache_for expires
 */
foreach($feeds as $feed){
    if(cache(sha1($feed), 'check', null, './feeds_data', $cache_for) == false){
        $result = curl_get($feed);
        $feed_result[$feed] = cache(sha1($feed), 'put', $result, './feeds_data', $cache_for);
    }else{
        $feed_result[$feed] = cache(sha1($feed), 'get', null, './feeds_data', $cache_for);
    }
}

//Loop through each feed result and render
foreach($feed_result as $result){
    render_feed_newz_caption($result);
}

//The curl function, curl is considerably faster then fopen that simplexml_load_file uses
function curl_get($url){
    if (!function_exists('curl_init')){
        die('Sorry cURL is not installed!');
    }
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_USERAGENT,'Mozilla/5.0 (Windows NT 5.1; rv:5.0) Gecko/20100101 Firefox/5.0 Firefox/5.0');
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_TIMEOUT, 10);
    curl_setopt($ch, CURLOPT_ENCODING,'gzip,deflate');
    curl_setopt($ch, CURLOPT_AUTOREFERER,true);
    $output = curl_exec($ch);
    curl_close($ch);

    return $output;
}

function cache($key, $do, $result=null, $storepath, $cacheTime=86400){
    switch($do){
        case "check":
            if(file_exists($storepath.'/'.sha1($key).'.php')){
                if((time() - $cacheTime < filemtime($storepath.'/'.sha1($key).'.php'))){
                    return true;
                }
                return false;
            }else{
                return false;
            }
            break;
        case "put":
            //Compress
            $compressed = gzdeflate($result,  9);
            $compressed = gzdeflate($compressed, 9);
            file_put_contents($storepath.'/'.sha1($key).'.php', base64_encode($compressed));
            return $result;
            break;
        case "get":
            $cache = base64_decode(file_get_contents($storepath.'/'.sha1($key).".php"));
            //De-compress
            $compressed = gzinflate($cache);
            $compressed = gzinflate($compressed);
            return $compressed;
            break;
        default:
            return false;
            break;
    }
}

//Function to wrap your parse
function render_feed_newz_caption($feed){
    //load XML string!
    $xml = simplexml_load_string($feed);
    libxml_use_internal_errors(true);

    if(isset($xml->channel->item))
    foreach($xml->channel->item as $YODEL){
        $title = $YODEL->title;
        $description = $YODEL->description;
        $link = $YODEL->link;
        $pubDate = $YODEL->pubDate;     //should be able to use Rutgers pubDate to sort newest.... get a better Drudge feed to do the same
        $image = $YODEL->image;
        //echo"<div class ='masonry_item' style='background: #FFFFFF;'><a href='". $link ."'>" . "RUT: " . $pubDate . "<br />" . $title . "</a> <!--" . $description . "--></div> <br>";

        echo "
    <div class='box'>
        <div class ='newz_caption' style='background: #FFFFFF;'> 
            <h3>"  . $title . "</h3>
            <h5>CNN: "  . $pubDate . "</h5>
            <p>     " . $description .  "   </p>
            <p>
                <a class='btn btn-primary' href='" . $link . "'>    Source  </a>
                    <a class='btn' href='#'>Thumbs Up </a>
            </p>
        </div> 
    </div>
    <br>";
    }
}

?> 
```

# c# - How can you programmatically detect if javascript is enabled/disabled in a Windows Desktop Application? (WebBrowser Control)

> ID：12170944
> 
> 赞同：9
> 
> 时间：2012-08-29T04:34:06.667
> 
> 标签：c#, .net, windows, winforms, webbrowser-control

I have an application which writes HTML to a WebBrowser control in a .NET winforms application.

I want to detect somehow programatically if the Internet Settings have Javascript (or Active Scripting rather) disabled.

I'm guessing you need to use something like WMI to query the IE Security Settings.

**编辑#1：**重要的是我知道在显示 HTML 之前是否启用了 javascript，因此修改 DOM 以显示警告或使用标签的解决方案不适用于我的特定情况。在我的情况下，如果 javascript 不可用，我将在本机 RichTextBox 中显示内容，并且我还想向服务器应用程序报告是否启用了 JS，这样我就可以告诉发送警报的管理员 5% 或 75%的用户是否启用了 JS。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T04:52:39.467

感谢@Kickaha 的建议。这是一个检查注册表以查看它是否已设置的简单方法。可能在某些情况下这可能会引发异常，因此请务必处理它们。

```
 const string DWORD_FOR_ACTIVE_SCRIPTING = "1400";
    const string VALUE_FOR_DISABLED = "3";
    const string VALUE_FOR_ENABLED = "0";

    public static bool IsJavascriptEnabled( )
    {
        bool retVal = true;
        //get the registry key for Zone 3(Internet Zone)
        Microsoft.Win32.RegistryKey key = Registry.CurrentUser.OpenSubKey(@"Software\Microsoft\Windows\CurrentVersion\Internet Settings\Zones\3", true);

        if (key != null)
        {
            Object value = key.GetValue(DWORD_FOR_ACTIVE_SCRIPTING, VALUE_FOR_ENABLED);
            if( value.ToString().Equals(VALUE_FOR_DISABLED) )
            {
                retVal = false;
            }
        }
        return retVal;
    } 
```

注意：为了保持此代码示例简短（并且因为我只关心 Internet 区域） - 此方法仅检查 Internet 区域。您可以修改 OpenSubKey 行末尾的 3 以更改区域。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T10:44:13.627

如果您在弹出弹出窗口时遇到问题，我已经为您提供了一个解决方案，并且如果您想在客户端机器上禁用/启用 javascript（或者甚至只是读取/查询它是否已启用/禁用），我已包含该答案对你来说，我们开始吧：

您要禁用哪个弹出消息？如果是警报消息，试试这个，显然解决窗口或框架对象以满足您的特定需求，我只是假设顶级文档，但如果您需要 iframe，您可以使用 window.frames(0) 访问它。对于第一帧等等...（关于 JavaScript 部分）...这里有一些代码，假设 WB 是您的网络浏览器控件...

WB.Document.parentWindow.execScript "window.alert = function () { };", "JScript"

您必须在整个页面加载完成后才运行上述代码，我知道这很难做到（并且尚未发布完整证明版本）但是我已经这样做了一段时间（完整证明）现在，如果您阅读我之前标记为“webbrowser”和“webbrowser-control”的一些答案，您可以收集有关如何准确执行此操作的提示，但如果您想取消 .confirm JavaScript，请回到手头的问题消息，只需将 window.alert 替换为 window.confirm （当然，使用正确的对象限定您的 window.object 以到达您正在使用的文档层次结构）。您还可以使用上述技术禁用 .print 方法以及新的 IE9 .prompt 方法。

如果要完全禁用 JavaScript，可以使用注册表来执行此操作，并且必须在 webbrowser 控件加载到内存之前更改注册表，并且每次更改它（打开和关闭）都必须重新加载 webbrowser 控件并进入内存（或只是重新启动您的应用程序）。

注册表项是`\HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings\Zones\`-键名是`1400`，禁用它的值为 3，启用它的值为 0。

当然，因为 Zones 键下有 5 个区域，所以您需要为活动区域或所有区域更改它以确保。但是，如果您只想抑制 js 对话框弹出消息，那么您真的不需要这样做。

让我知道你的情况，如果我能提供进一步的帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T04:45:55.660

这是一个建议 - 默认将警告编码到您的网页中。创建一个在页面加载时运行的 javascript，它会删除该元素。警告将在不允许运行 javascript 时出现。

自从我编写客户端 HTML javascript 以与 DOM 交互以来已经有很长一段时间了，所以我可能有点过时了。即您将需要修复细节，但我希望我能理解总体思路。

```
<script>
document.getElemntByID("noJavascriptWarning").innerHTML="";
</script> 
```

并在您的 HTML 正文中

```
<DIV id="noJavascriptWarning" name="noJavaScriptWarning">Please enable Javascript</DIV> 
```

# matlab - matlab支持float16吗？

> ID：12170950
> 
> 赞同：4
> 
> 时间：2012-08-29T04:34:23.450
> 
> 标签：matlab, floating-point, ieee-754

MATLAB 是否支持 float16 运算？如果是这样，如何将双矩阵转换为float16？我正在对一个大型矩阵进行算术运算，其中 16 位浮点表示足以满足我的表示。用 double 数据类型表示需要 4 倍的内存。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T05:23:32.953

你的矩阵满了吗？否则，如果有很多零值元素，请尝试`sparse`-- 节省大量内存。

AFAIK，`float16`不支持。你可以进入的最低数据类型`float`是 with `single`，它是一个 32 位数据类型：

```
A = single( rand(50) ); 
```

您可以乘以一个常数并转换为`int16`，但您会失去精度。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-29T07:06:23.213

Matlab 开箱即用支持的数值类如下：

```
int8
int16
int32
int64
uint8
uint16
uint32
uint64
single (32-bit float)
double (64-bit float) 
```

加上复杂的数据类型。所以不幸的是，没有 16 位浮点数。

在 Mathworks 文件交换中，似乎有一个[半精度浮点库](http://www.mathworks.com/matlabcentral/fileexchange/23173-ieee-754r-half-precision-floating-point-converter)。但是，它需要 MEX。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-06-18T17:39:12.027

这可能是一个老问题，但我发现它是在寻找一个类似的问题（matlab 中的半精度）。

事情似乎及时发生了变化： [https ://www.mathworks.com/help/fixedpoint/ref/half.html](https://www.mathworks.com/help/fixedpoint/ref/half.html)

matlab 现在似乎支持半精度。

# java - 在哪里可以找到 SolarFlare OpenOnLoad Kernel Bypass 的一些示例 Java 代码？

> ID：12170952
> 
> 赞同：5
> 
> 时间：2012-08-29T04:34:33.327
> 
> 标签：java, networking, real-time, low-latency, openonload

让任何人开始的简单问题：

1.  我知道我需要一个特殊的网络接口卡 (nic) 来执行此操作。我假设它必须是[SolarFlare](http://www.solarflare.com/)制造的。我能得到的最便宜的可以让我实现和测试内核绕过的工具是什么？

2.  看起来他们使用[OpenOnLoad](http://www.openonload.org/)作为网络堆栈。在哪里可以找到有关如何使我的网络应用程序使用 OpenOnLoad 的示例代码和示例？我很想知道我的程序使用这项技术有多容易或多复杂。

从这里的另一个问题产生的问题：[使用 Java 中的内核绕过网络](https://stackoverflow.com/questions/12123388/networking-with-kernel-bypass-in-java)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T07:18:48.360

要使用 OpenOnLoad，您需要更改您的环境，特别是您的 LD_LIBRARY_PATH 以便它加载它们的库而不是内置的系统库。当您执行此操作时，“正常”网络 IO 调用将根据需要重定向以使用内核绕过。

这个库的重点是您可以在不更改代码的情况下使用它，因此没有代码示例。

过去使用过它，我发现它要么工作得很好，要么你会遇到一些问题，例如你以他们不满足的方式使用网络，它会失败。在不太可能出现的情况下，您必须更改代码，以便它以不同的方式使用网络。（或等待修复）

要真正测试内核绕过，您将需要两个网络适配器和一个低延迟开关（或者您可以跳过该开关）这是因为如果您只有一个低延迟网卡，您将很难确定它有什么不同.

# liferay - 将网页内容添加到 Liferay 门户中的页面

> ID：12170953
> 
> 赞同：0
> 
> 时间：2012-08-29T04:34:45.400
> 
> 标签：liferay, portal

我是 Liferay 的新手，如何将特定的 Web 内容添加到单个页面。例如，我有 2 个页面，如金融服务和产品。我有这两个页面的相关 Web 内容。如果我将这些 Web 内容添加到页面，两者内容显示在两个页面中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T04:43:30.560

在您的门户网站上添加一个页面 [http://www.liferay.com/documentation/liferay-portal/6.0/administration/-/ai/page-creation-and-manageme-2](http://www.liferay.com/documentation/liferay-portal/6.0/administration/-/ai/page-creation-and-manageme-2)

然后，您可以添加两个指向这两个页面**的 Web 内容 portlet 。**

# c# - 使用 XSD 创建 XML 并发布到 URL 的步骤

> ID：12170960
> 
> 赞同：3
> 
> 时间：2012-08-29T04:35:13.810
> 
> 标签：c#, asp.net, .net, xml, xsd

我得到了一个 XSD 文件和示例 XML 文件，并要求我将 XML 文件发布到一个 URL。

示例 XML 文件

```
<?xml version="1.0"?>
<pingRequest>
   <elt></elt>
   ...
</pingRequest> 
```

我熟悉 SOAP 和 REST，但我从来没有直接发布过纯 XML 文件。这是我到目前为止得到的。

1) 从 XSD 文件生成 C# 类

```
 xsd.exe Test.xsd /c 
```

2) 使用 XmlSerializer 从 C# 类序列化为 XML

```
public string SerializeObject(object obj, Type type)
{
    string xml;
    var xs = new XmlSerializer(type);
    using (var ms = new MemoryStream())
    {
        xs.Serialize(ms, obj, null);
        ms.Position = 0;
        using (var sr = new StreamReader(memoryStream))
        {
            xml = sr.ReadToEnd();
        }
    }
    return xml;
} 
```

或者我应该使用[LINQ to XML](http://msdn.microsoft.com/en-us/library/bb387061.aspx)生成 XML 文件吗？

3) 使用 WebClient 将 XML 发布到 URL

```
var client = new WebClient();
var uri = new Uri("http://www.site.com/");
string responseXML = client.UploadString(uri, requestXML); 
```

我在正确的轨道上吗？如果没有，请您指出正确的方向吗？提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-24T17:22:13.823

这是我的部分代码，以便其他人可以使用它。

首先，使用（用于请求和响应）基于 XML 标记创建两个类`xsd.exe Test.xsd /c`，这样我就不必手动处理 XML 文件。

```
public pingResponse Send()
{
  var pingRequest = new pingRequest
  {
    myelement = "test"
  };

  // Serialize pingRequest class to xml
  var serializer = new Serializer();
  string requestXml = serializer.SerializeObject(pingRequest, typeof(pingRequest));

  // Post xml
  var client = new WebClient(); 
  var uri = new Uri("http://www.site.com/"); 
  string responseXML = client.UploadString(uri, requestXML); 

  return (pingResponse)serializer.DeserializeObject(xml, typeof(Response));
}

public class Serializer
{
  public string SerializeObject(object obj, Type type)
  {
    var setting = new XmlWriterSettings() {OmitXmlDeclaration = true, Indent = true};
    var xml = new StringBuilder();
    using (var writer = XmlWriter.Create(xml, setting))
    {
      var nsSerializer = new XmlSerializerNamespaces();
      nsSerializer.Add(string.Empty, string.Empty);

      var xmlSerializer = new XmlSerializer(type);
      xmlSerializer.Serialize(writer, obj, nsSerializer);
    }   
    return xml.ToString();
  }

  public object DeserializeObject(string xml, Type type)
  {
    var xs = new XmlSerializer(type);
    var stringReader = new StringReader(xml);
    var obj = xs.Deserialize(stringReader);
    stringReader.Close();
    return obj;
  }
} 
```

注意：我不包括 PingRequest 和 PingResponse 类，因为我的成员变量与您的不同。

# python - 每日导入 Heroku 托管的 Postgres 数据库

> ID：12170962
> 
> 赞同：0
> 
> 时间：2012-08-29T04:36:01.607
> 
> 标签：python, django, postgresql, heroku

我正在将 MySQL 数据库移植到 Heroku 托管的专用 PostgreSQL 实例。我了解如何将初始数据传递给 Heroku。但是，每天都有来自外部公司的数据“馈送”，需要每天导入。它被推送到 FTP 服务器，它是一个包含多个不同 CSV 文件的 zip 文件。通常，我可以/只会将其 scp 到 Postgres 框，然后有一个 cron 作业执行“从路径/到/file.csv 复制表名”来导入数据。然而，使用 Heroku 让我对最好的方法感到困惑。注意：我已经查看并查看了有关导入数据的 heroku 开发[文章。](https://devcenter.heroku.com/articles/import-data-heroku-postgres)但是，这更像是一个转储文件。我只是在处理每天从 CSV 文件导入。

有人在 Heroku 上做类似的事情吗？如果是这样，您能否就最佳方法提供任何建议。

更多信息：我的应用程序是 Cedar 堆栈上的 Python/Django 1.3.3。而且我的文件可能有点大。其中一些可以超过 50K 记录。因此，遍历它们并使用 Django ORM 可能会有点慢（但是，仍然可能是最好/唯一的解决方案）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:44:07.133

两种选择：

1.  启动一个非 Heroku EC2 实例，从 FTP 获取，解压缩并从那里启动副本。通过使用`COPY` `STDIN`选项（http://www.postgresql.org/docs/9.1/static/sql-copy.html），您可以指示数据来自客户端连接，而不是来自您无权访问的服务器文件系统。

2.  文件有多大？它可能适合 dyno 的临时文件系统，因此一个进程或一项临时工作可以从 FTP 服务器下载文件并在 dyno 内完成整个过程。一旦进程退出，文件系统数据就会消失。

# html - 仅 CSS 纹理和“缝合”功能区

> ID：12170964
> 
> 赞同：2
> 
> 时间：2012-08-29T04:36:10.033
> 
> 标签：html, css, css-shapes

这让我发疯，我以前见过它，但无法复制或找到它或任何资源。我正在做的是一条带有皮革纹理和“缝合图案”的垂直丝带。缝合的工作方式很简单，带有虚线边框的内部 div，甚至丝带形状也很容易使用伪`:after`类，但是将两者结合起来只是不打算计划。

这就是我目前正在使用的 css 所拥有的（这一切都是用 css 减去皮革纹理完成的）：

```
.wrapleather {
        width:100px;
        height:120px;
	    float: right;
	    margin-right:20px;
        background-image : url("leather.png");
        border-radius: 5px;
        -webkit-box-shadow: 0px 1px 10px rgba(0,0,0,0.5);
        -moz-box-shadow: 0px 1px 10px rgba(0,0,0,0.5);
        box-shadow: 0px 1px 10px rgba(0,0,0,0.5);
	    position:relative;
    }
    .wrapleather:after {
    	content: '';
        display: block;
        width: 0;
        height: 105px;
        position: absolute;
        top: 0;
        left: 0;
        border-width: 0 50px 15px 50px;
        border-style: solid;
        border-color: transparent transparent #cdc0a8;
	    position:absolute;
    	top:0;
    	left:0;
    }
    .wrapleather .outside {
    	width:90px;
    	height:110px;
        margin: 4px;
        border-radius: 5px;
        border: 1px dashed #aaa;
        box-shadow: 0 0 0 1px #f5f5f5;
    	}
    .wrapleather .inside {
        width:90px;
        height:110px;
        border-radius: 5px;
     }
```

```
<div class="wrapleather">
     <div class="outside">
       <div class="inside">
        <p class="font">Leather</p>
       </div>
     </div>    
  </div>
```

此外，阴影仍保持“方形”格式，而不是全部形状。为了澄清我不是要求任何人进行调试或类似的事情，我只是要求共享可以达到预期结果的替代或进一步方法，css仍然是我正在学习的东西，所以任何建议或任何东西您可以给予的那种性质将不胜感激，如果您需要任何其他信息，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T05:36:24.557

有一种方法可以只用 CSS 做你想做的事，但它不适用于所有浏览器。如果您想要最好的浏览器支持，您可能应该使用图像。

这是一个演示（你可能已经注意到我只使用了一个元素，因为你不应该仅仅为了样式引入额外的标记）：http: [//jsfiddle.net/joshnh/eUje5/](http://jsfiddle.net/joshnh/eUje5/)

```
HTML

<div class="ribbon"></div> 
```

​</p>

```
CSS

.ribbon {
    background: #eee;
    border-left: 1px dashed #aaa;
    border-right: 1px dashed #aaa;
    border-radius: 5px 5px 0 0;
    box-shadow: 5px 0 0 #eee,
                -5px 0 0 #eee;
    height: 120px;
    margin: 0 5px;
    position: relative;
    width: 90px;
    -webkit-filter: drop-shadow(0 2px 5px hsla(0,0%,0%,.5));
}
.ribbon:after,
.ribbon:before {
    border-top: 15px solid #eee;
    content: '';
    height: 0;
    position: absolute;
    top: 100%;
    width: 0;
}
.ribbon:after {
    border-left: 50px solid transparent;
    right: -6px;
}
.ribbon:before {
    border-right: 50px solid transparent;
    left: -6px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-05T16:11:37.567

所以，我想确保我没有失去理智，并且这种功能区效果实际上在现代浏览器上是可能的，而不依赖于 webkit 特定的过滤器。所以这里是为所有后来遇到这个的人准备的。

您只需要更加努力地为您的`box-shadows`.

请注意，当增加宽度时，您需要随后减小旋转和倾斜元素的`:before`角度`:after`。

例子：

```
.ribbon {
    background: #eee;
    border-left: 1px dashed #aaa;
    border-right: 1px dashed #aaa;
    border-top: 1px dashed #aaa;
    box-shadow: 5px 0 0 #eee,
                -5px 0 0 #eee,
                0 -5px 0 #eee,
                5px -5px 0 #eee,
                -5px -5px 0 #eee,
                5px 1px 5px 5px #888;
    height: 120px;
    margin: 10px 5px 0 5px;
    position: relative;
    width: 90px;
    z-index: 3;
}
.ribbon:after,
.ribbon:before {
    content: '';
    position: absolute;
    top: calc(100% - 1px);
    width: calc(50% + 1px);
    border-bottom: 1px dashed #aaa;
}
.ribbon:after {
    transform: rotateZ(20deg) skewX(20deg) translateY(-2px);
    transform-origin: top right;
    right: -1px;
    height: 40px;
    background-color: #eee;
    border-right: 1px dashed #aaa;
    box-shadow: 5px 0 0 #eee,
                0 5px 0 #eee,
                5px 5px 0 #eee,
                15px 15px 5px -5px #888,
                0 15px 5px -5px #888,
                15px 0 5px -5px #888;
}
.ribbon:before {
    transform: rotateZ(-20deg) skewX(-20deg);
    transform-origin: top left;
    left: -1px;
    height: 40px;
    background-color: #eee;
    border-left: 1px dashed #aaa;
    box-shadow: -5px 0 0 #eee,
                0 5px 0 #eee,
                5px 5px 0 #eee,
                15px 15px 5px -5px #888,
                0 15px 5px -5px #888;
}
```

```
<div class="ribbon"></div>
```

# eclipse - Eclipse 中的 Scala/JOGL 错误：加载 X 时缺少依赖项（GLCanvas 等）

> ID：12170965
> 
> 赞同：3
> 
> 时间：2012-08-29T04:36:16.397
> 
> 标签：eclipse, scala, jogl

我正在尝试在 Eclipse 中将 JOGL 与 Scala 一起使用，但作为 JOGL/Scala 新手，我遇到了一些我无法做出正面或反面的依赖错误。谷歌搜索并没有返回任何有用的东西。

我已经按照 [Setting_up_a_JogAmp_project_in_your_favorite_IDE](http://jogamp.org/wiki/index.php/Setting_up_a_JogAmp_project_in_your_favorite_IDE#Eclipse_IDE_project)建立了一个 Java JOGL 项目。

在依赖于上述项目的Java项目中编译如下Java类

```
import javax.media.opengl.GLProfile;
import javax.media.opengl.GLCapabilities;
import javax.media.opengl.awt.GLCanvas;

public class Game {

    public static void main(String[] args) {
        GLProfile glp = GLProfile.getDefault();
        GLCapabilities caps = new GLCapabilities(glp);
        GLCanvas canvas = new GLCanvas(caps);

        System.out.println("Hello World");
    }
} 
```

工作，并按`Hello World`预期输出。

但是，制作一个Scala项目并尝试使用JOGL项目如下

```
import javax.media.opengl.GLProfile;
import javax.media.opengl.GLCapabilities;
import javax.media.opengl.awt.GLCanvas;

object Game {
    def main (args: Array[String]): Unit = {
        val glp = GLProfile.getDefault();
        val caps = new GLCapabilities(glp);
        val canvas : GLCanvas = new GLCanvas(caps);

        System.out.println("Hello World"); 
    }
} 
```

甚至不会编译，因为 Eclipse 通知我以下错误：

> 加载 CapabilitiesImmutable 时出错，缺少 G:\Eclipse\workspace\JOGL\jogl-all.jar (javax/media/nativewindow/CapabilitiesImmutable.class) Scala JOGL 所需的依赖项 'class com.jogamp.common.type.WriteCloneable'斯卡拉问题
> 
> 加载 GLCanvas 时出错，缺少依赖项 'class com.jogamp.common.util.locks.RecursiveLock'，G:\Eclipse\workspace\JOGL\jogl-all.jar 需要（javax/media/opengl/awt/GLCanvas.class ) Scala JOGL 未知的 Scala 问题
> 
> 加载 GLContext 时出错，缺少 G:\Eclipse\workspace\JOGL\jogl-all.jar(javax/media/opengl/GLContext.class) 要求的依赖项 'class com.jogamp.common.util.locks.RecursiveLock' JOGL 未知的 Scala 问题

删除与`GLCapabilities`and相关的行`GLCanvas`，给出

```
object Game {
    def main (args: Array[String]): Unit = {
        val glp = GLProfile.getDefault();

        System.out.println("Hello World"); 
    }
} 
```

编译和打印`Hello World`。

我的问题是 - 为什么 Scala 代码不起作用，我能做些什么来解决它？我是否在做一些我不应该做的混合 JOGL 和 Scala 代码的疯狂巫术？我忘了添加一些依赖项吗？

**版本信息**

Eclipse：（版本：**Juno Release Build id：20120614-1722**）

用于 Eclipse 的 Scala IDE：（版本： **2.1.0.nightly-2_09-201208290312-cc63a95**）（提供者： **scala-ide.org**）

JOGL 作为 JOGAMP**版本 2.0-rc10 的一部分**

编辑：好的，将gluegen-rt.jar 和jogl.jar 库添加到Scala 项目本身的构建路径中解决了这个问题（我不敢相信我没有想到首先这样做......）。我仍然不确定我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T07:59:58.703

仅供参考，在我的一个 JOGL SBT 项目中，我需要添加：

*   胶水-rt.jar
*   胶水-rt-natives-.jar
*   jogl-all-2.0-rc9.jar
*   jogl-all-2.0-rc9-natives-.jar

到依赖项列表以使其正常工作。我的猜测是你必须在 Eclipse 的构建路径中包含这些。

这些可以从这个存储库中获得：http: [//jogamp.org/deployment/maven](http://jogamp.org/deployment/maven)

# python - 在列表上一次使用多个函数

> ID：12170967
> 
> 赞同：0
> 
> 时间：2012-08-29T04:36:24.277
> 
> 标签：python

基本上，我有一个列表，我想一次对其执行多个功能。例如，

```
List = [1,2,3,4,5]
List.extend([1,2,3,4,5]).sort().reverse() 
```

我希望结果是`[5,5,4,4,3,3,2,2,1,1]`.

我有一段时间没有使用 Python，但我知道我以前做过类似的事情。我错过了什么简单的东西还是什么？

顺便说一句，它必须都在一条线上。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T04:43:33.993

大多数就地改变容器的 Python 方法都[返回 None](https://stackoverflow.com/a/1682601/174728)

但是，您的示例可以很容易地在一行中处理

```
L = [1,2,3,4,5]
L = sorted(L+[1,2,3,4,5], reverse=True) 
```

本着挑战的精神，连锁经营并不难（因为他们总是返回`None`）

```
>>> L = [1, 2, 3, 4, 5]
>>> L.extend([1,2,3,4,5]) or L.sort() or L.reverse() or L
[5, 5, 4, 4, 3, 3, 2, 2, 1, 1] 
```

这是另一种方式

```
>>> L = [1, 2, 3, 4, 5]
>>> (L.extend([1,2,3,4,5]), L.sort(), L.reverse()) and L
[5, 5, 4, 4, 3, 3, 2, 2, 1, 1] 
```

你可以尽情发挥你的想象力

```
>>> L = [1, 2, 3, 4, 5]
>>> max(L.extend([1,2,3,4,5]), L.sort(), L.reverse(), L) # Python2.x only
[5, 5, 4, 4, 3, 3, 2, 2, 1, 1] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-29T04:39:30.573

您不能链接上述操作，因为它们是就地执行的。作为替代方案，使用`sorted()`和`reversed()`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-29T04:43:27.937

怎么样：

```
>>> l = [1,2,3,4,5]*2
>>> l.sort(reverse=True)
>>> l
[5, 5, 4, 4, 3, 3, 2, 2, 1, 1] 
```

甚至更短：

```
>>> sorted([1,2,3,4,5]*2,reverse=True)
[5, 5, 4, 4, 3, 3, 2, 2, 1, 1] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T04:40:43.933

这些函数中的每一个都在原地作用于列表，返回`None`而不是修改后的列表。你必须做类似的事情

```
l = [1,2,3,4,5]
l = reversed(sorted(l + [1,2,3,4,5])) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-29T07:13:54.800

不完美但有趣..

```
class chain():
    def __init__(self, my_object):
        self.o = my_object

    def __getattr__(self, attr):
        x = getattr(self.o, attr)
        if hasattr(x, '__call__'):
            method = x
            return lambda *args: self if method(*args) is None else method(*args)
        else:
            prop = x
            return prop

list_ = chain([1, 2, 3, 0])
print list_.extend([9,5]).sort().reverse() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-29T04:43:05.550

函数`extend`,`sort`并`reverse`不会返回列表，而是更改调用它们的列表。链接依赖于一个事实，即先前的函数返回一些值并对其进行处理。

例如，`s="abc"`您可以返回一个大写的新字符串（与 相同）。`s.upper().lower()``.upper()``.lower()`

# sockets - 基本的客户端-服务器同步

> ID：12170972
> 
> 赞同：0
> 
> 时间：2012-08-29T04:36:55.310
> 
> 标签：sockets, client, client-server, socketserver

让我们做简单的事情，我们有一个客户端绘制的云，以及发送命令以移动云的服务器。假设客户端 1 以 60 fps 运行，客户端 2 以 30 fps 运行，我们希望云过渡平稳。

第一个问题 - 服务器与客户端有不同的 fps，如果每次发送移动命令，它将更快地开始发送垃圾邮件命令，然后客户端将绘制。

**可能的解决方案 1** - 客户端在完成帧后发送“我想要更新”命令。

**可能的解决方案 2** - 服务器每 x ms 发送一次移动云命令，但云不会顺利移动。可与解决方案 3 结合使用。

**可能的解决方案 3** - 服务器发送 - “以速度 x 开始移动云”和“改变“云方向”而不是“将云移动到 x”。但问题再次是在屏幕边缘检查更改云目录的内容，然后触发速度更快云实际上是在客户端绘制的。

客户端 2 的绘制速度也比客户端 1 慢 2 倍，如何补偿呢？

如何以基本方式将服务器逻辑与客户端绘制同步？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T04:49:54.670

如果可以的话，解决方案 3 听起来是迄今为止最好的解决方案。您的所有其他解决方案都过于冗长：它们需要客户端和服务器之间非常频繁的通信，除非服务器和客户端之间具有非常好的网络连接，否则过于频繁。

如果您的云移动都足够简单，可以将它们作为矢量发送给客户端，以便客户端可以在接收新指令（新的起始位置和矢量）之前沿着一个矢量移动云很长一段时间（许多帧） ) 从服务器，那么你绝对应该这样做。如果您的云移动不像简单的向量那么容易表示，那么您可以选择更复杂的模型（例如添加指令以随时间变换向量）并将模型的参数发送给客户端。

如果云是更大世界的一部分，并且客户端跟踪世界上的时间，那么来自服务器的每组指令都应该包含一个时间戳，表示模型中的初始条件有效的时间。

至于您关于如何补偿客户端 2 的绘图速度比客户端 1 慢两倍的问题，您需要让您的世界时钟在两个客户端上以一致的速率滴答作响。此速率无需与任一客户端上的屏幕刷新率有任何关系。

# apache - .htaccess 文件似乎不起作用

> ID：12170973
> 
> 赞同：0
> 
> 时间：2012-08-29T04:37:01.840
> 
> 标签：apache, .htaccess, httpd.conf

我正在运行 WAMP 服务器 2.1 我决定硬着头皮玩 .htaccess 文件。我在根目录 c:\wamp\www 中创建了一个，因此是：

```
ErrorDocument 400 http://localhost:8070/Test/error-page.php
ErrorDocument 403 http://localhost:8070/Test/error-page.php
ErrorDocument 404 http://localhost:8070/Test/error-page.php
ErrorDocument 405 http://localhost:8070/Test/error-page.php
ErrorDocument 408 http://localhost:8070/Test/error-page.php
ErrorDocument 500 http://localhost:8070/Test/error-page.php
ErrorDocument 502 http://localhost:8070/Test/error-page.php
ErrorDocument 504 http://localhost:8070/Test/error-page.php 
```

我想设置一个默认的错误文档并使用一些 php 来重定向。

因为80端口冲突，我用的是8080，所以

```
http://localhost/ becomes http://localhost:8080/ 
```

导航到

```
http://localhost:8080 
```

有效，并且导航到虚拟目录会产生熟悉的 404 错误，并且不会重定向到 error-page.php

我已经设定

```
AllowOverride All 
```

除了

```
<Directory "cgi-bin">
...
</Directory> 
```

.htaccess 文件是在记事本中创建的，是一个 ansi 文件，不，它被称为 .htaccess 而不是 .htaccess.txt 或其他变体。

我已经设定

```
AccessFileName .htaccess 
```

请帮助，为什么它不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T00:12:19.073

修复了问题，发生了什么，httpd.conf 试图加载一个不存在的模块，因此，conf 文件没有被加载，我之前确实查看了日志，但没有注意到这一点。感谢您的帮助 ！！

# iphone - 完成输入第一个uitextfield后如何自动计算第二个uitextfield

> ID：12170978
> 
> 赞同：0
> 
> 时间：2012-08-29T04:37:58.813
> 
> 标签：iphone, ios, uitextfield, uitextfielddelegate

我有 2 个`uitextfields`（dollarPayTextField 和 rielPayTexField）。输入完成后`dollarPayTextField`，我想`rielPayTextField`自动计算。

例如，total: 10 $，当我在 DollarPayTextField 中输入 9 $ 时，我希望 rielPayTextField 显示 4000。那么，我该怎么做呢？这是我计算剩余的代码：

```
-(void)updateChangeRemainInriel{
    double dollarPay = [self.dollarPayTextField.text doubleValue];
    double dollarRemain = [self.abill getTotalPrice] - dollarPay;
    NSLog(@"%.2f",[self.dollarPayTextField.text doubleValue]);
    self.rielPayTextField.text =  [NSString stringWithFormat:@"%.2f",dollarRemain * self.anExchangeRate.rielBuyPerDollar];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T04:41:01.243

```
 - (void)textFieldDidBeginEditing:(UITextField *)textField;
        {
               self.txtRiel.text=textField.text*100;// your calculation over here
        } 
```

另请参阅委托方法

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string;
- (void)textFieldDidBeginEditing:(UITextField *)textField;
- (void)textFieldDidEndEditing:(UITextField *)textField; 
```

请参阅[此处的 Apple 文档](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T04:52:58.030

希望您在 .h 文件中添加**UITextFieldDelegate和****your_textField.delegate=self;** 在您的 .m 文件中。如果使用它，它会在每次输入更改时计算

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{

   [textField addTarget:self action:@selector(yourTextFieldChanged:) forControlEvents:UIControlEventEditingChanged];  

    return YES;
}

- (void)yourTextFieldChanged:(UITextField *)textField
{
   double dollarPay = [self.dollarPayTextField.text doubleValue];
   double dollarRemain = [self.abill getTotalPrice] - dollarPay;
   NSLog(@"%.2f",[self.dollarPayTextField.text doubleValue]);
   self.rielPayTextField.text =  [NSString stringWithFormat:@"%.2f",dollarRemain *    self.anExchangeRate.rielBuyPerDollar];
} 
```

如果你使用它，它会在你输入完值后计算

```
-(void)textFieldDidEndEditing:(UITextField *)textField{
   double dollarPay = [self.dollarPayTextField.text doubleValue];
   double dollarRemain = [self.abill getTotalPrice] - dollarPay;
   NSLog(@"%.2f",[self.dollarPayTextField.text doubleValue]);
   self.rielPayTextField.text =  [NSString stringWithFormat:@"%.2f",dollarRemain *    self.anExchangeRate.rielBuyPerDollar];
} 
```

# jpa - Playframework 如何将 query.ResultList 转换为 VO

> ID：12170986
> 
> 赞同：2
> 
> 时间：2012-08-29T04:38:58.663
> 
> 标签：jpa, playframework, transform

Playframework的版本是1.2.x，我想把query.ResultList转换成VO。

我创建了一个 Part 实体 bean，如下所示：

```
@Entity
@Table(name="evaluation_part")
public class Part extends Model {

    public String name;  

    public String collegeName;

    public int peopleNum;
} 
```

数据：

```
id     name     collegeName      peopleNum

1      Jsj1     JJJJ              32
2      Jsj2     JJJJ              23
3      Jsj3     JJJJ              32
4      Tjb1     TTTT              11
5      Tjb2     TTTT              14
6      Tjb3     TTTT              16 
```

我的价值对象类：

```
public class PartVO {

    public String collegeName;

    public int peopleNum;

} 
```

我想使用本机查询来获得结果：

```
String sql="select collegeName,SUM(peopleNum) as peopleNum from evaluation_part group by collegeName"; 
```

查询结果为：

```
 collegeName      peopleNum

        TTTT              41
        JJJJ              87 
```

我试过了：</p>

```
String sql="select collegeName,SUM(peopleNum) as peopleNum from evaluation_part group by collegeName";

Query query =JPA.em().createNativeQuery(sql);

List<PartVO> partVOs = query.getResultList();
for(int i=0;i<partVOs.size();i++) {      
    System.out.println(partVOs.get(i).collegeName);
} 
```

以下错误是我得到的

```
ClassCastException occured : [Ljava.lang.Object; cannot be cast to valueobject.PartVO 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T06:33:06.000

您不必使用原始 sql 来执行此操作。使用 hql，您可以使用 new 运算符创建您的 VO（请参阅[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html#queryhql-select](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html#queryhql-select)）

你必须在你的 partVO 类中定义一个两个 arg 构造函数，然后你可以做

```
select new package.PartVO(collegeName, SUM(peopleNum)) from Part group by collegeName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T06:39:59.207

您可以使用 createNativeQuery(...) 方法的版本，该方法也接受结果实例的 Class 作为参数：

[http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#createNativeQuery(java.lang.String](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#createNativeQuery(java.lang.String) , java.lang.Class)。

但是请确保这确实有效，因为 Play Framework 并未在其 API 实现中实现 JPA 的所有功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T11:31:24.957

解决方案1：仅在HQL中使用'select new Part()'（在Part类中定义的构造函数），您可以将对象转换为Part。Hibernate使用反射自动注入您需要的所有字段。

解决方案2：这里返回的结果类型必须是Object[]，这样就可以通过数组的索引获取从数据库中取出的记录的每一个字段；

解决方案1和解决方案2的区别：前者在查询中使用构造函数，后者将记录转换为Object[]。

在您的情况下，忽略实体之间的复杂关系，上述解决方案将起作用。

此处引用代码：

```
package controllers;

import play.*;
import play.db.jpa.JPA;
import play.mvc.*;
import java.util.*;

import models.*;

/**
* This demo is intended for fetching data from MYSQL.
* @author dhl@oopsplay.org
*/

public class Application extends Controller {

public static void index() {
    render();
}

/**
 * Prepare some data to test.
 */
public static void addPart() {

    //Add a part record to database.
    Part newPart=new Part("software","zjut",8).save();
    if(newPart.isPersistent()){
        renderText("Add successfully,there are %s records in the \'evaluation_part\' table.For convenience,please click the back button in the browser to go back previous page.",Part.count());
    }
}

/**
 * Fetch part entities from database;
 */
public static void fetchPart() {

    //-------------------Solution 1-------------------
    //[Pay attention]:Only use 'select new Part()'(constructor defined in the Part class) in the query that u can  convert object to Part.
    //Hibernate use reflection to automatically inject all the fields u need.
    List<Part> parts1=JPA.em().createQuery("select new Part(name,collegeName,peopleNum) from Part").getResultList();

    //For convenience, i output the detail in the console, focus on the change there.
    Logger.info("The name of first record is :%s", parts1.get(0).name);

    //-------------------Solution 2-------------------
    //[Pay attention]:Here the returned type of result must be Object[],so that u can got every field of the record fetched from database;
    List<Object[]> parts2=JPA.em().createNativeQuery("select name,collegeName,peopleNum from evaluation_part").getResultList();
    Logger.info("The name of first record is :%s", parts2.get(0)[0]);

    for(int i=0;i<parts2.size();i++){

        //The difference between solution1 and solution2:the previous use constructor in the query and the later transform a record into Object[].
        Logger.info("Name from parts1 is: %s", parts1.get(i).name);
        Logger.info("Name from parts2 is: %s", parts2.get(i)[0]);
    }

    renderText("There are %s record in the \'evaluation_part\' table",parts2.size());
} 
```

}

# c - 令人困惑的 C 语法

> ID：12170987
> 
> 赞同：2
> 
> 时间：2012-08-29T04:39:00.840
> 
> 标签：c

我正在查看一些 C 代码，但很难理解 Callback 到底是什么。有谁知道这意味着什么？我猜它正在定义“回调和 x 都是 void *?

```
typedef void (*Callback)(bool x); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T04:40:14.163

它创建了一个新的类型名称`Callback`。Every`Callback`将是一个指向接受 a`bool`并返回的函数的指针`void`。实际上`Callback`将是该真实类型的别名。所以当你说：

```
Callback ptr = some_fun; 
```

您正在制作一个指向`some_fun`. 函数指针通常作为参数传递给其他函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T04:40:29.813

它通过名称声明了一个函数指针类型，该名称`Callback`指向一个函数，该函数接受`bool`输入参数并返回一个`void`.
指定语句后，您可以将`Callback`其用作类型来保存具有指定类型的函数的地址。

如有疑问，请参阅***[顺时针螺旋规则。](http://c-faq.com/decl/spiral.anderson.html)***

# python - Flask 和 WTForms - 如何让 wtforms 刷新选择数据

> ID：12170995
> 
> 赞同：9
> 
> 时间：2012-08-29T04:39:47.587
> 
> 标签：python, flask, wtforms

我正在使用最新版本的烧瓶、wtforms 和 Flask-WTForms。

我有一个显示表单的页面，其中一个是带有名为“A”的选项的选择框。

当应用程序启动时，一切都很好。在另一种形式中，我添加了一条名为“B”的记录。

现在，我想要的表单应该有带有选项 A 和 B 机器人的选择框，只有选项 A 可用。我必须杀死 uWSGI 并重新启动以获取 wtforms 以刷新数据。

那么，我错过了什么？如何让 wtforms 刷新数据？

以下是我创建表单的方法，其中 getAgencyList 返回要添加到选择框中的选项列表。在另一个对话中，我添加了一个机构，并且应该更新机构列表，而无需重新启动应用程序：

```
class createUser(Form):
    """
    Users are given a default password
    """
    first_name   = TextField()
    last_name    = TextField()
    email = TextField('Email', [validators.Length(min=6, max=120), validators.Email()])
    user_role = SelectField(u'User Role', choices=[('1', 'User'), ('2', 'Admin')])
    org_role = SelectField(u'User Role', choices=[('1', 'Agency'), ('2', 'Advertiser'),('3', 'Admin')])
    agency = SelectField(u'Agency', choices=getAgencyList()) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-29T08:07:44.627

问题是`getAgencyList()`在定义类时调用。所以那个函数在那个时候返回的都是它的数据。为了更新列表信息，您必须`getAgencyList`在实例化期间以某种方式运行。为了做到这一点，您可以使用关于 wtforms 的一个不太明显的事实，它允许您向特定字段添加选项。此处的[文档](http://wtforms.simplecodes.com/docs/1.0.2/fields.html#wtforms.fields.SelectField)只需查找标题为“选择具有动态选择值的字段”的小节。这是一个应该可以工作的代码示例。

```
class CreateUserForm(Form):
    first_name = TextField()
    last_name = TextField()
    email = TextField('Email', 
            [validators.Length(min=6, max=120), validators.Email()])
    user_role = SelectField(u'User Role', 
            choices=[('1', 'User'), ('2', 'Admin')])
    org_role = SelectField(u'User Role', 
            choices=[('1', 'Agency'), ('2', 'Advertiser'),('3', 'Admin')])
    agency = SelectField(u'Agency')

    @classmethod
    def new(cls):
        # Instantiate the form
        form = cls()

        # Update the choices for the agency field
        form.agency.choices = getAgencyList()
        return form

# So in order to use you do this ...
@app.route('/someendpoint')
def some_flask_endpoint():
    # ... some code ...
    form = CreateUserForm.new()
    # That should give you a working CreateUserForm with updated values.
    # ... some more code to validate form probably... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-26T00:04:38.763

一个简单的解决方案是从数据库中获取要显示的选项，然后用这些选项覆盖表单类：

例如：

```
def get_agencies():
    agency_list = []
    # get the Agencies from the database - syntax here would be SQLAlchemy
    agencies = Agency.query.all()
    for a in agencies:
        # generate a new list of tuples
        agency_list.append((a.id,a.name))
    return agency_list

@app.route('/somewhere',methods=['POST'])
def somewhere():
    form = createUser()
    # overwrite the choices of the Form Class
    form.agency.choices = get_agencies()
    # here goes the rest of code - like form.validate_on_submit()
    ...
    return render_template('create_user.html', form=form) 
```