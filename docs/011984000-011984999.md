# StackOverflow 问答 11984000-11984999

# javascript - 如何避免声音管理器 2 中的声音延迟

> ID：11984002
> 
> 赞同：1
> 
> 时间：2012-08-16T09:12:27.683
> 
> 标签：javascript, audio, soundmanager2

我正在使用声音管理器 2 为我的网站提供声音。

我的js代码是：

```
function makesound(val) {
            soundManager.useHighPerformance = true;
            soundManager.useFastPolling = true;

            soundManager.setup({

                url: 'folder/sound',
                onclick: function() {
                    var mySound = soundManager.createSound({
                        id: 'aSound',
                        url: 'folder/sound/'+val
                    });
                    mySound.play();
                },
            });
        } 
```

它发出声音。但问题是声音有延迟..

如何避免这个问题？

有人能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-01T15:23:33.237

您可以在 soundManager onload 事件触发时创建一个或多个声音对象，并确保在声音对象上将 autoLoad 设置为 true。

```
soundManager.onload(function(){
    var sounds = [];
    var sound1 = soundManager.createSound({
        id: 'aSound',
        url: 'folder/sound/audio.mp3',
        autoLoad: true,
    });
    sounds.push(sound1);

    document.getElementById("playButton").addEventListener('click', function(e){
        e.preventDefault();
        sounds[0].play();
    }, false);

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T09:52:31.077

尝试在页面加载时调用 createSound 函数，而不是在单击处理程序中。这将使声音文件能够在需要之前加载一次。目前，您在每次点击时（或至少在第一次点击时）重新加载声音文件，并且在播放之前需要时间下载。

# xml-parsing - 在 jibx 映射中跳过不必要的 xml 节点

> ID：11984009
> 
> 赞同：0
> 
> 时间：2012-08-16T09:12:47.600
> 
> 标签：xml-parsing, jibx

我有一个第三方 xml，它有很多我的应用程序不需要关心的 xml 节点。与 jibx 绑定时如何跳过此类 xml 部分。

问候， 普拉文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:28:22.993

Praveen，为模式定义的子集创建 JiBX 绑定的最简单方法是将模式定义修改为所需的模式。这可以通过在原始模式上运行 xml 转换来创建新的更简单的模式来轻松干净地完成。看看这个在运行 JiBX 之前修改模式的 maven 项目示例： [https](https://github.com/jibx/schema-library/blob/master/net.webservicex/net.webservicex.currencyconvertor/pom.xml) ://github.com/jibx/schema-library/blob/master/net.webservicex/net.webservicex.currencyconvertor/pom.xml 我希望这可以帮助。大学教师

# python - 用于从 1000 多个页面中过滤样式的 Python 代码

> ID：11984013
> 
> 赞同：0
> 
> 时间：2012-08-16T09:12:54.000
> 
> 标签：python, regex

我已经将 word 文件转换为 html 文件，但是有一个问题，MS-word 会自动为页面添加一些样式。

例如

```
<div align="center"></div>
<p style=""></p>
<table cellpadding="0">

<tr><img src="...."></img></tr>

</table> 
```

我想输出为

```
 <div></div>
<p></p>
<table>

<tr><img src="...."></img></tr>

</table> 
```

我不希望删除 img 内联样式。

提前致谢

```
update:  if it is very hard to keep img style in the file. please give me the code excluding that part. it is very urgent for me and i cant edit 1000 pages manually 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:28:19.240

我建议你使用[elementtree](http://docs.python.org/library/xml.etree.elementtree.html)。解析文件删除所有不需要的样式属性并写入文件。

使用 elementtree 这应该是 5 班轮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T09:35:49.227

如果您想删除已知标签列表的样式，我认为没有必要使用全权重 HTML 解析器。就像是

```
expr = r'((?<=<div)|(?<=<p))[ ]+.*?>'
html_text = re.sub(expr,'>',html_text) 
```

工作得很好。当然，您将使用要替换的标签数组来生成 (?<=

如果您有要删除的样式标签列表，那就更容易了。只需生成一个表达式

```
expr = r' (style|align|myStyleTag)=".*?"' 
```

与 re.sub。

如果您需要动态组合，请使用解析器。

针对 OP 的评论进行编辑：

不幸的是，lookbehind 需要固定大小的表达式，所以 <.* 或类似的将不起作用。如果您没有固定的标签列表，最好使用预先存在的框架。

一个丑陋的方法是这样的：

```
expr = "("
for i in range(1,8): ## or whatever the max/min tag lengths are
    expr += "(?<=<[a-zA-Z]{" + str(i) + "})|"
expr = expr[:-1] + ")[ ]+.*?>" 
```

但那是相当糟糕的风格。

# opengl - 过剩游戏无法被 fraps 或 dxtory 捕获

> ID：11984014
> 
> 赞同：1
> 
> 时间：2012-08-16T09:13:02.863
> 
> 标签：opengl, glut, record, freeglut

我想录制我的游戏，它使用由 freeglut 创建的 OpenGL 窗口。对于像 fraps、taksi 或 dxtory 这样的录制应用程序，该窗口或其 gl-context 似乎是找不到的。我怎样才能解决这个问题？

# entity-framework-4 - EF 4.0 提供给 Include() 的路径参数应该是什么？

> ID：11984020
> 
> 赞同：0
> 
> 时间：2012-08-16T09:13:31.420
> 
> 标签：entity-framework-4, linq-to-objects

在我的模型中使用[`Include()`](http://msdn.microsoft.com/en-us/library/bb738708%28v=vs.100%29.aspx)LINQ 时，我提供的路径参数应该是相关对象的名称还是导航属性的名称？

我问是因为同一张桌子与另一张桌子有不止一种关系。我在设计器中注意到相关表格的导航属性采用以下形式：

```
RelatedTable
RelatedTable1
...
RelatedTablen 
```

延迟加载已关闭，因此我需要显式加载相关对象。我只想要通过导航属性相关的对象：“RelatedTable1”我尝试提供导航属性名称（即“RelatedTable1”）以包含，即：

```
from row in Table.Include("RelatedTable1")
select row 
```

它有效！这表明路径参数应该是导航属性的名称。但是我也尝试了相关实体的名称，即：

```
from row in Table.Include("RelatedTable")
select row 
```

它也有效！我只是想了解发生了什么..

（LazyLoading 已关闭，如果我不使用 Include()，则不会获取相关信息）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T23:28:40.090

您可以使用导航属性的名称，也可以[像这样](https://stackoverflow.com/questions/614809/entity-framework-include-navigation-of-another-navigation-property)链接它们：

```
db.Tables.Include("RelatedTable.RelatedTable2"); 
```

或者，如果您更喜欢强类型，您可以 [包含一个 lambda](http://romiller.com/2010/07/14/ef-ctp4-tips-tricks-include-with-lambda/)：

```
db.Tables.Include(x => x.RelatedTable); 
```

# node.js - Node.js 应用程序的多端口托管解决方案

> ID：11984021
> 
> 赞同：0
> 
> 时间：2012-08-16T09:13:41.933
> 
> 标签：node.js, tcp, azure, amazon-web-services, nodejitsu

我开发了一个 Node.js 应用程序，它从 TCP 接收数据，同时使数据可用于 Socket.io 端口。

该应用程序的原理是收集传感器数据并使其在浏览器上可用。此应用程序需要 2 个端口（1 个用于 TCP（网络），1 个用于 socket.io）。

我已经为 Node.js 尝试了各种云托管解决方案，包括 Nodejitsu、AppFog (AWS)、Azure，但所有这些都通过环境变量 process.env.port 提供了一个端口。

除了专用托管之外，还有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:51:36.040

Windows Azure 应该能够在云服务中处理这个问题（但不是在网站中）。命令行工具不能很好地帮助您……您必须查看`ServiceDefinition.csdef`并在那里添加适当的端点。您需要使用辅助角色，而不是 Web 角色。

我希望这能让你开始。

# php - shuffle() 函数是否使查询更快？

> ID：11984022
> 
> 赞同：0
> 
> 时间：2012-08-16T09:13:45.450
> 
> 标签：php

我有两个超过 150000 行数字的表，我有这个代码：

```
$q=$_GET["q"];
$negative = strlen($q);
$reverse = strrev($q);
while ($a = mysql_fetch_array($sql)) {
if (strlen($q) > 0)
  {
  $hint="";
  for($i=0; $i<count($a); $i++)
    {
    if ($reverse==substr($a[$i],-$negative,strlen($q)))
      {
      if ($hint=="")
        {
        $hint=$a[$i];
        }
      }
    }
  }
echo $hint . "\t";
} 
```

此查询需要 27 秒才能返回结果，我想随机播放所有结果，但是当我添加这样的 shuffle() 函数时：

```
while ($a = mysql_fetch_array($sql)) {
shuffle($a); 
```

性能变化惊人，现在只需要两秒钟就可以返回结果，我试了很多次都是一样的。它变得更快吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T09:33:34.717

`mysql_fetch_array`返回一个包含数字键和字符串键的数组，因此它是一个关联数组，需要对所有查找进行哈希处理。`shuffle`丢弃所有键，将其转换为索引数组，可以更有效地访问。

请注意，执行此操作时，已洗牌的行对于返回的每一列都有两个元素，一个来自数字键，另一个来自命名键。您应该使用`mysql_fetch_row`or`mysql_fetch_array($sql, MYSQL_NUM)`来防止这个问题。如果你这样做，没有洗牌的代码也会很快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T09:17:23.000

绝对不是。您的 SQL 服务器很可能缓存了结果，因此第二次速度更快。

# php - PDO 是否要求所有 SELECT WHERE 查询中的参数？

> ID：11984023
> 
> 赞同：0
> 
> 时间：2012-08-16T09:13:45.623
> 
> 标签：php, mysql, pdo

我正在做最基本的查询......

```
SELECT `id` FROM `members` WHERE `group` = 'admin'; 
```

运行上述查询会生成`Error: Invalid parameter number: number of bound variables does not match number of tokens`.

不需要准备好的语句，因为没有变量，因此没有注入的可能性。

这只是 PDO 的本质，**任何**包含的查询都`WHERE` **必须**绑定吗？

这是我的实际查询：

```
$sql = "SELECT `id` FROM `members` WHERE `group` = 'admin';"
foreach ($conn->query($sql) as $row) { ... } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T09:15:58.353

当您传递一个要执行的数组，该数组的元素数量与查询中的问号数量不同时，会生成此错误。零参数是可能的，但您还必须传递一个空数组。

# sd-card - 使用 SPI 接口的 MSP430F5438 SD 卡

> ID：11984024
> 
> 赞同：1
> 
> 时间：2012-08-16T09:13:50.390
> 
> 标签：sd-card, spi, msp430, adc

我想使用[MSP430F5438](http://www.ti.com/product/msp430f5438)的 SPI 接口连接 SD 卡。硬件部分在我的设计中是正确的，但是我无法将任何数据发送到 SD 卡。我使用的源代码来自*[MSP430 的安全数字卡接口](http://alumni.cs.ucr.edu/~amitra/sdcard/Additional/sdcard_appnote_foust.pdf)*。

为了调试，我如何将数据发送到 SD 卡？数据应从 ADC12MEM 寄存器接收，只需写入 SD 卡。从上面的源代码来看，没有进程，当我调试时，我无法将任何用户输入发送到 SD 卡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:48:08.123

链接 PDF 中的代码仅适用于 <= 2 GB 的 SD 卡，不适用于 SDHC 卡（4 GB 及更大）。如果你找不到像全尺寸 SD 这样的小卡，只需使用带有适配器的 microSD - 它们在电气上是相同的。

# java - 不支持的 SignatureMethod 算法，但该算法被 BC-Provider 列为可用服务

> ID：11984025
> 
> 赞同：2
> 
> 时间：2012-08-16T09:13:50.953
> 
> 标签：java, bouncycastle, xml-signature

为了简短起见，我的问题如下：

我在函数的开头添加了 BC-Provider：

```
Security.addProvider(new BouncyCastleProvider()); 
```

当我列出所有服务时

```
BouncyCastleProvider().getServices(); 
```

该列表包含“RIPEMD160WITHECDSA”

在此代码段的最后一行：

```
XMLSignatureFactory factory = XMLSignatureFactory.getInstance("DOM");
DOMValidateContext valContext = new DOMValidateContext(pubkeys[i], sigElement);
valContext.setURIDereferencer(new FileDereferencer(
                              factory.getURIDereferencer(), new File("D:\\eclipseworkspace\\pathtoxml.xml")));
javax.xml.crypto.dsig.XMLSignature xmlSignature = factory.unmarshalXMLSignature(valContext); 
```

我收到一条消息异常：

不支持的 SignatureMethod 算法：[http ://www.w3.org/2007/05/xmldsig-more#ecdsa-ripemd160](http://www.w3.org/2007/05/xmldsig-more#ecdsa-ripemd160)

这意味着什么？RIPEMD160WITHECDSA 与此 URL 指定的算法有什么区别？或者 url 只是没有映射到这个算法名？

这是堆栈跟踪：

```
javax.xml.crypto.MarshalException: unsupported SignatureMethod algorithm: http://www.w3.org/2007/05/xmldsig-more#ecdsa-ripemd160
    at org.jcp.xml.dsig.internal.dom.DOMSignatureMethod.unmarshal(Unknown Source)
    at org.jcp.xml.dsig.internal.dom.DOMSignedInfo.<init>(Unknown Source)
    at org.jcp.xml.dsig.internal.dom.DOMXMLSignature.<init>(Unknown Source)
    at org.jcp.xml.dsig.internal.dom.DOMXMLSignatureFactory.unmarshal(Unknown Source)
    at org.jcp.xml.dsig.internal.dom.DOMXMLSignatureFactory.unmarshalXMLSignature(Unknown Source)
    at com.mobile.xmlsignature.XMLSigChecker.verify(XMLSigChecker.java:122)
    at com.mobile.xmlsignature.mainclass.main(mainclass.java:13) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T01:36:37.157

看起来[ecdsa-ripemd160](http://www.w3.org/2007/05/xmldsig-more#ecdsa-ripemd160)不是使用[DOMSignatureMethod](http://www.docjar.com/html/api/org/jcp/xml/dsig/internal/dom/DOMSignatureMethod.java.html)注册的默认签名方法之一。

根据[XMLSignatureFactory.newSignatureMethod()](http://docs.oracle.com/javase/7/docs/api/javax/xml/crypto/dsig/XMLSignatureFactory.html#newSignatureMethod%28java.lang.String,%20javax.xml.crypto.dsig.spec.SignatureMethodParameterSpec%29)您可能可以使用以下方式注册**ecdsa-ripemd160**：

```
xmlFact.newSignatureMethod(
    "http://www.w3.org/2007/05/xmldsig-more#ecdsa-ripemd160", 
     MyECDSARipemd160Provider()); 
```

您将不得不滚动您自己的**MyECDSARipemd160Provider()**类来实现[SignatureMethodParameterSpec](http://docs.oracle.com/javase/7/docs/api/javax/xml/crypto/dsig/spec/SignatureMethodParameterSpec.html)，并且它需要识别您的算法。我还没有尝试过，我怀疑它可能需要一些试验和错误。我不知道是否有一个BC班可以为你做这件事。我假设对此类的[getAlgorithm()调用应返回“RIPEMD160WITHECDSA”。](http://docs.oracle.com/javase/7/docs/api/java/security/AlgorithmParameters.html#getAlgorithm%28%29)

# java - 和之间的区别

> ID：11984029
> 
> 赞同：22
> 
> 时间：2012-08-16T09:13:56.403
> 
> 标签：java, html, string, jsp, ascii

任何人都可以解释我之间的区别`&#32; and &nbsp;`吗？

我有 html 数据以二进制形式存储在数据库中，并且空间可以是`&nbsp;`或`&#32;`有时是`&#160;`.

还有一个问题是当我使用它将这个 HTML 转换为纯文本**`JSoup lib`**时，它会正确转换，但是如果我使用 java 的 String.contains(my string) 方法。看起来拥有的 HTML 数据与拥有`&nbsp;`的不同`&#32;`。反之亦然找不到字符串。

例子：

HTML1：`This&#32;is&#32;my&#32;test&#32;string`

HTML2：`This&nbsp;is&nbsp;my&nbsp;test&nbsp;string`

如果我使用 JSoup 将其转换为纯文本。它返回

HTML 1：这是我的测试字符串

HTML 2：这是我的测试字符串

但是两个字符串仍然不相同。为什么会这样？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-16T09:22:26.273

`&#32;`是经典空间，当您按下空格键时，您会得到一个，由他的 HTML 实体等价物表示。

`&nbsp;`并`&#160;`表示[不间断空格](http://en.wikipedia.org/wiki/Non-breaking_space)，通常用于防止浏览器将多个空格折叠在一起：

`"&#32;&#32;&#32;&#32;"`=> " " (只折叠成一个空格)

`"&nbsp;&nbsp;&nbsp;&nbsp;"`=> " " (未折叠)

如果您正在解析一个同时包含经典空格和不间断空格的字符串，则可以安全地替换一个。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-16T09:17:12.643

`&#32;`, 只是一个空格字符而已。此字符的常规出现将在最后折叠为***一个空格***字符。

其中 as`&#160`和`&nbsp;`都代表不破空字符，如果连续出现一个接一个，就会被折叠或断成一个空格字符。

只是，它们之间的区别在于`&#160`HTML*编号*和*HTML 名称*。`&nbsp;`

 *基本上所有这些都是 HTML 实体。您可以通过以下链接了解和了解它们。

1.  [链接 1](http://www.ascii.cl/htmlcodes.htm)
2.  [链接 2](http://webdesign.about.com/library/bl_htmlcodes.htm)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-16T09:17:08.367

是空格键的字符。

  和   都是非中断空格的字符。

如果您的数据来自不同的来源，则空格符号的编码可能不同。

在直接比较中，它们可能会显示为不同。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-08-04T07:09:17.540

Java 8 及以后的版本应该可以工作：

`string.replace("\\h", " ");` 或者 `string.replaceAll("\\h", " ");`

[其中 \h 是此处](https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html)描述的水平空白字符

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-24T08:50:03.607

要完成其他答案...

除了不间断的行和多个空格的折叠之外，即使大多数答案都说相反，HTML渲染实际上也不会完全相同，这通常是正确的。

让我们举个例子：

```
<span>&#32;test</span> <br/>
<span>&#160;test</span> 
```

第一个`span`将在字符串的开头不包含空格，而第二个跨度将。这肯定是崩溃行为的一部分：[https](https://en.wikipedia.org/wiki/Non-breaking_space) ://en.wikipedia.org/wiki/Non-breaking_space 。

所以在这种情况下，如果你需要这个第一个空间，区别很重要。*

# php - 成功 Ajax 调用后显示 div 并用新跨度替换跨度

> ID：11984037
> 
> 赞同：0
> 
> 时间：2012-08-16T09:14:28.323
> 
> 标签：php, jquery, fadein

我有一个通过 ajax 提交的表单：

```
 $(function() {
 $(".submit").click(function() {
var listid = $("#listid").val();
var itemid = "<?=$id?>";
var userid = "<?=$_SESSION['user_id']?>"; 

 var dataString = 'listid=' + listid + '&userid=' + userid + '&itemid=' + itemid;

 $.ajax({
 type: "POST",
 url: "join.php",
 data: dataString,
 success: function(){
 $('#content_error').fadeIn(200).show();
 }
 });

 return false;
 });
 }); 
```

这完美地工作。ajax函数调用join.php：

```
 <? session_start();

require_once("include/database.php");
$Db = new Database();

 if($_POST['listid'] && $_POST['itemid'] && $_POST['userid']) {

            $list_id = $_POST['listid'];
            $user_id = $_POST['userid'];
            $item_id = $_POST['itemid'];

            $sql = "SELECT *
                    FROM items_list
                    WHERE list_id = '".$list_id."'
                    AND user_id = '".$user_id."'
                    AND item_id = '".$item_id."'
                    ORDER BY item_id DESC LIMIT 1";
            $result = $Db->sQuery($sql);
            $row = mysql_fetch_array($result);

            if(mysql_num_rows($result) > 0){

                $error = "You've already saved this";   

            }else{

            $sql = "INSERT INTO items_list (list_id, user_id, item_id) 
                    VALUES('$list_id', '$user_id', '$item_id')";
            $Db->uidQuery($sql);

            $sql = "SELECT count(item_id) as itemm
                    FROM items_list 
                    WHERE item_id = '".$item_id."'
                    GROUP BY item_id";          
            $result = $Db->sQuery($sql);
            $Db->closeConnection();
            $tel2 = mysql_fetch_array($result);

            ?>
                <span class="bubble_itemm"><?=$tel2['itemm']?></span>

            <?
                $success = "Sucessfully";

            }
        } 
```

?>

成功后，我使用类bubble_itemm 调用span。这个跨度也存在于主页中。我希望“新”跨度用淡入淡出替换主页中的“旧”跨度。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:58:17.763

```
$(function() {
 $(".submit").click(function() {
var listid = $("#listid").val();
var itemid = "<?=$id?>";
var userid = "<?=$_SESSION['user_id']?>"; 

 var dataString = 'listid=' + listid + '&userid=' + userid + '&itemid=' + itemid;

 $.ajax({
 type: "POST",
 url: "join.php",
 data: dataString,
 success: function(data){
 $('#content_error').fadeIn(200).show();
 $('.bubble_itemm').text(data);
 }
 });

 return false;
 });
 }); 
```

$('.bubble_itemm').text(data); 添加此代码并从 join.php 中删除 span 标签，这只是在您的 span 中回显您想要的文本。

```
<? session_start();

require_once("include/database.php");
$Db = new Database();

 if($_POST['listid'] && $_POST['itemid'] && $_POST['userid']) {

            $list_id = $_POST['listid'];
            $user_id = $_POST['userid'];
            $item_id = $_POST['itemid'];

            $sql = "SELECT *
                    FROM items_list
                    WHERE list_id = '".$list_id."'
                    AND user_id = '".$user_id."'
                    AND item_id = '".$item_id."'
                    ORDER BY item_id DESC LIMIT 1";
            $result = $Db->sQuery($sql);
            $row = mysql_fetch_array($result);

            if(mysql_num_rows($result) > 0){

                $error = "You've already saved this";   

            }else{

            $sql = "INSERT INTO items_list (list_id, user_id, item_id) 
                    VALUES('$list_id', '$user_id', '$item_id')";
            $Db->uidQuery($sql);

            $sql = "SELECT count(item_id) as itemm
                    FROM items_list 
                    WHERE item_id = '".$item_id."'
                    GROUP BY item_id";          
            $result = $Db->sQuery($sql);
            $Db->closeConnection();
            $tel2 = mysql_fetch_array($result);

            ?>
                <? echo $tel2['itemm'];?>

            <?
                $success = "Sucessfully";

            }
        } 
```

如果你想淡入效果使用这个代码

```
$('.bubble_itemm').fadeOut(1000,function(){ $(this).text(data).fadeIn(1000); }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T09:44:41.157

表格页面：

```
<script type="text/javascript">
$(function() {
    $(".submit").click(function() {
        var listid = $("#listid").val();
        var itemid = "<?=$id?>";
        var userid = "<?=$_SESSION['user_id']?>"; 

        var dataString = 'listid=' + listid + '&userid=' + userid + '&itemid=' + itemid;

        $.ajax({
            type: "POST",
            url: "join.php",
            data: dataString,
        }).done(function( result ) {
            myresult(result);
        });

        return false;
    });
});

function myresult(result) {
    var result_lines = result.split("<splitter>");    
    if (result_lines[0] == '1') { 
        $('.bubble_itemm').html('<span class="error">' + result_lines[1] + '</span>').fadeIn(500);
    } else if (result_lines[0] == '2') { 
        $('.bubble_itemm').html('<span class="success">' + result_lines[1] + '</span>').fadeIn(500);
    }
    return true;   
}

</script> 
```

join.php 脚本：

```
<?php 

require_once("include/database.php");
$Db = new Database();

if($_POST['listid'] && $_POST['itemid'] && $_POST['userid']) {

    $list_id = $_POST['listid'];
    $user_id = $_POST['userid'];
    $item_id = $_POST['itemid'];

    $sql = "SELECT *
            FROM items_list
            WHERE list_id = '".$list_id."'
            AND user_id = '".$user_id."'
            AND item_id = '".$item_id."'
            ORDER BY item_id DESC LIMIT 1";
    $result = $Db->sQuery($sql);
    $row = mysql_fetch_array($result);

    if(mysql_num_rows($result) > 0){
        echo "1<splitter>"; // here to identify message status
        echo "You've already saved this"; // return message

    }else{

        $sql = "INSERT INTO items_list (list_id, user_id, item_id) 
                VALUES('$list_id', '$user_id', '$item_id')";
        $Db->uidQuery($sql);

        $sql = "SELECT count(item_id) as itemm
                FROM items_list 
                WHERE item_id = '".$item_id."'
                GROUP BY item_id";          
        $result = $Db->sQuery($sql);
        $Db->closeConnection();
        $tel2 = mysql_fetch_array($result);

        echo "2<splitter>"; // here to identify message status
        echo $tel2['itemm']; // return message
        echo "Sucessfully"; // return message

    }
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T09:49:26.933

如果您在主页中为目标跨度分配了一个 id，那肯定会有所帮助。对一类跨度做某事会影响该类的所有跨度。也许这是所希望的。

您可以将任意数量的函数添加到 AJAX 请求的成功部分。您应该研究的函数是[fadeOut](http://api.jquery.com/fadeOut/)、[remove](http://api.jquery.com/remove/)和[fadeIn](http://api.jquery.com/fadeIn/)。这些应该使用回调按顺序调用。例如

```
$('#old_span_id').fadeOut('slow', function() {
    $(this).remove();
    $(new_span).insertAfter('#where_want_it_to_go');
    $(new_span).fadeIn();
}); 
```

无论如何，我需要看更多的 HTML 才能给你一个更完整的答案。

# css - 仅使用纯 css 模糊边缘的阴影

> ID：11984040
> 
> 赞同：0
> 
> 时间：2012-08-16T09:14:41.410
> 
> 标签：css

有没有可能只用纯css制作这样的阴影？

![在此处输入图像描述](../Images/97c064b5c57fb7af3b1b35190e8b967e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:17:40.647

由于阴影不均匀，我会尝试这样的事情：[http](http://www.sitepoint.com/pure-css3-paper-curl/) ://www.sitepoint.com/pure-css3-paper-curl/ 。我知道这不完全是你想要的效果，但你会有一个开始的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T21:07:17.067

**盒子阴影**绝对是纯 CSS 锥形阴影的最佳选择。但是由于框阴影遵循它们所应用的元素的轮廓，因此最好使用一个`:before`或`:after`伪元素（以保持 html 整洁）。

```
.roundShadow:after {
  content:'';
  display:block;
  position:absolute;
  bottom:0;
  width:90%;
  height:100%;
  z-index:-1;
  margin:0 5%;
  -webkit-box-shadow:0 5px 5px rgba(0,0,0,.4);
  -webkit-border-radius:50% 4%;
  -moz-box-shadow:0 5px 5px rgba(0,0,0,.4);
  -moz-border-radius:50% 4%;
  box-shadow:0 5px 5px rgba(0,0,0,.4);
  border-radius:50% 4%;
} 
```

这将在模拟父元素形状的部分后面创建一个块级伪元素，但具有圆形底部和所需的框阴影。

只需添加`class="roundShadow"`到您想要的部分。您可能必须修改**边距**的第二个数字以保持阴影居中，但否则阴影应符合您粘贴的任何元素。哦，并确保*父元素*是`position:relative;`or`position:absolute;`或者它不起作用！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T09:16:36.557

您可以尝试使用 box-shadow 来实现：

```
.shadow {
  -moz-box-shadow:    3px 3px 5px 6px #ccc;
  -webkit-box-shadow: 3px 3px 5px 6px #ccc;
  box-shadow:         3px 3px 5px 6px #ccc;
} 
```

*   [http://css-tricks.com/snippets/css/css-box-shadow/](http://css-tricks.com/snippets/css/css-box-shadow/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T11:58:23.923

您可以实现这样的效果，尽管它不会像您在图像中得到的那样精确。

使用 CSS3 盒子阴影你可以做这样的事情：

```
.bottom-shadow {
    -webkit-box-shadow: 0 4px 6px -6px #000000;
    -moz-box-shadow: 0 4px 6px -6px #000000;
    box-shadow: 0 4px 6px -6px #000000;
} 
```

[JSFiddle](http://jsfiddle.net/HP9zQ/2/)

如果您不确定，参数的顺序为`box-shadow`：

```
box-shadow: [horizontal-offset] [vertical-offset] [blur] [spread] [colour] 
```

# c++ - debian box 中 C++ 应用程序的性能不一致

> ID：11984042
> 
> 赞同：3
> 
> 时间：2012-08-16T09:14:45.933
> 
> 标签：c++, performance, ssh, debian

我构建了一个多线程 C++ 应用程序，该应用程序的核心是一个时间敏感的操作，通常需要大约 50 毫秒，我最近看到了一个非常奇怪的行为，也许你们中的一个可以帮我弄清楚。

我在 root 帐户下运行应用程序，当我从 debian box 本地运行它时，时间敏感的主要功能大约需要 300-400 毫秒。例如，如果我使用另一台机器，SSH 进入原始 debian 机器并从 ssh 终端远程运行应用程序，同样的时间敏感操作大约需要 50 毫秒。

基本上我在同一台机器上运行相同的应用程序。唯一的区别是第一个是在本地运行，第二个是远程运行，但相同的进程仍然在同一用户帐户下的同一台机器上运行，这就是为什么我不明白我是如何看到这种巨大的性能差异的。

如果有人对可能发生的事情有任何想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T06:42:05.987

我正在打印大量输出，因为评论建议我将其重定向到 /dev/null 并且问题解决了。

# c# - 投射时避免 NullReferenceException 的首选做法？

> ID：11984043
> 
> 赞同：2
> 
> 时间：2012-08-16T09:14:50.140
> 
> 标签：c#, casting, nullreferenceexception

我们希望避免出现`NullReferenceException`. 目前我们有：

```
ISomeInterface interface = this.GetISomeInterfaceInstance();
(interface as ClassImplmentsISomeInterface).Method(); 
```

这工作正常，但有风险`NullReferenceException`。一种解决方案是：

```
ISomeInterface interface = this.GetISomeInterfaceInstance();
ClassImplmentsISomeInterface instance = interface as ClassImplmentsISomeInterface;
if (instance != null)
    instance.Method(); 
```

但这会产生很多额外的代码来进行简单的检查（根据 resharper 的说法，有 100 种可能的 NRE。）第二种解决方法是：

```
ISomeInterface interface = this.GetISomeInterfaceInstance();
if (interface is ClassImplmentsISomeInterface)
    (interface as ClassImplmentsISomeInterface).Method(); 
```

但我收集到它`is`实际上`as`在后台使用，因此做了两次演员表，我想避免这种情况。这有关系吗？例如，C# 编译器是否足够聪明以优化此性能问题？

我在这里还缺少其他一些技术吗？还是上述方法之一更可取？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T09:35:43.953

I could think of a nice method that will make your code shorter:

```
public static void InvokeIfIsT<T>(object o, Action<T> action)
{
    if (o is T)
       action((T)o);
} 
```

Use it like that:

```
ISomeInterface interface = this.GetISomeInterfaceInstance();
InvokeIfIsT<ClassImplmentsISomeInterface>(interface, i => i.Method()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T09:42:41.423

You are correct in that `is` uses `as` and returns a boolean `true` if the result is not `null` (and vice versa)

However I would suggest you take the resharper rule as a hint or guideline rather than a rule to be followed (I would actually turn it off), and I say that because there is nothing wrong with a NullReferenceException being thrown

consider your code

```
ISomeInterface interface = this.GetISomeInterfaceInstance();
(interface as ClassImplmentsISomeInterface).Method();
 //error thrown above as null reference 
```

now you go ahead and refactor it to

```
ISomeInterface interface = this.GetISomeInterfaceInstance();
if (interface is ClassImplmentsISomeInterface)
{
    (interface as ClassImplmentsISomeInterface).Method();
}
else
{
    //else?? else what? how do you recover?
} 
```

There is nothing wrong with an exception if an exception is just that, an exception

Now you might say "handling the else scenario is less costly than an exception" but this is only the case if you can recover, for example, if you could write something like this

```
ISomeInterface interface = this.GetISomeInterfaceInstance();

try
{
    (interface as ClassImplmentsISomeInterface).Method();
}
catch (NullReferenceException)
{
    interface = this.GetIOtherInterface().Method();
} 
```

then it would be worth refactoring into a null check as you are actually doing something useful. If your method can't recover gracefully then somewhere your method needs to throw an exception to it's caller to say "hey, something went wrong"

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T09:39:08.063

I personally just use a `!= null` test if I think something might be null. But if it is because you're casting an Interface object to a concrete object then I think you have to take a step back an re-evaluate your design. I deem myself to have failed if I have to cast an Interface object to a concrete object in order to use it.

Using a factory to get an object that implements an interface, but then having to cast it to a concrete object in order to use it is taboo IMHO. If the interface specifies a method then you should not care what sort of object implements the interface. If you care about what the method does, then you should create a different interface and have your concrete class implement that.

Remember that classes can implement as many interfaces as you like.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T09:18:01.423

我通常会去

```
ISomeInterface variable = this.GetISomeInterfaceInstance();
var myInterface = variable as ClassImplmentsISomeInterface;

if(myInterface != null)
 myInterface.Method(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T09:18:08.510

If you want to cast speculatively then your first option (`as` and `null` check) is recommended. However, you should also consider refactoring the code such that the cast is no longer required.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-16T09:20:52.937

In some cases pattern NullObject can deal with it. You can encapsulate casting mechanisms and return NullObject. But again, use it only if it fits your scenario

[Null Object pattern wiki page](http://en.wikipedia.org/wiki/Null_Object_pattern)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-16T09:23:25.010

You can use the proxy pattern to simulate a `NullObject` in this way:

```
class ClassImplmentsISomeInterfaceProxy:ClassImplmentsISomeInterface
{
      ClassImplmentsISomeInterface target;
      ClassImplmentsISomeInterfaceProxy(ISomeInterface actual)
      {
          target=actual as ClassImplmentsISomeInterface;
      }
      //method implementations, with check for null
} 
```

But ensure you really need such design: to amny type checks usually means there is something to refactor.

# c# - 获取设置属性始终返回 null

> ID：11984050
> 
> 赞同：0
> 
> 时间：2012-08-16T09:15:29.600
> 
> 标签：c#, asp.net

我正在声明一个属性 - 当我在我的开发环境中工作时，它工作正常，但是当我访问暂存环境时，它总是返回 null。为什么会这样？代码在两种环境中都不会改变。这是代码。

```
private ProductCollection _productCollection;    

public ProductCollection ProdCollection
{
    get
    {
        _productCollection = MWProductReviewHelper.GetDistinctProductFromTill(StoreId, TDPId, ReceiptId);
        if (_productCollection.Count > 0)
            return _productCollection;
        else
            return null;
    }
}

private ProductCollection _guaranteedProductCollection = new ProductCollection();

public ProductCollection GuaranteedProductCollections
{
    get
    {
        if (_guaranteedProductCollection.Count > 0)
        {
            return _guaranteedProductCollection;
        }
        else
        {
            return _guaranteedProductCollection = MWProductGuaranteedHelper.CheckGuaranteedProductsFromList(ProdCollection);  // the problem appears to be here... 
        }
    }
} 
```

我的访问是这样的。

```
if (GuaranteedProductCollections.Count > 0)
{
    ProductCollection _prodCollection = GuaranteedProductCollections; // return null
} 
```

它里面总是有一个产品 - 当我输入断点时我可以看到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T09:21:29.637

您是否尝试过将那组设置在两条线上？看起来它可能会在设置完成之前返回。

```
public ProductCollection GuaranteedProductCollections
      {
        get
          {
            if (_guaranteedProductCollection.Count > 0)
              {
                 return _guaranteedProductCollection;
              }
            else
              {
                _guaranteedProductCollection = MWProductGuaranteedHelper.CheckGuaranteedProductsFromList(ProdCollection);  // the problem appears to be here... 
                return _guaranteedProductCollection;
              }
           }
      } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T09:44:17.530

如果您的`GuaranteedProductCollections`属性返回 null 那么它一定是因为：

*   `MWProductGuaranteedHelper.CheckGuaranteedProductsFromList(ProdCollection)`正在返回 null。
*   其他东西设置`_guaranteedProductCollection`为空（这不太可能，因为`_guaranteedProductCollection`在测试其计数时不为空，因为这会引发异常）

顺便说一句，通常在以这种方式初始化集合时，最好使用它`null`来表示未初始化的集合，以允许您的集合已初始化但为空的情况。我会像这样实现你的财产：

```
public ProductCollection GuaranteedProductCollections
{
    get
    {
        if (_guaranteedProductCollection == null)
        {
            _guaranteedProductCollection = WProductGuaranteedHelper.CheckGuaranteedProductsFromList(ProdCollection);
        }
        return _guaranteedProductCollection;
    }
} 
```

这可以使用[空合并 (??) 运算符简化为 1 行](http://msdn.microsoft.com/en-us/library/ms173224.aspx)

```
public ProductCollection GuaranteedProductCollections
{
    get
    {
        return _guaranteedProductCollection
            ?? _guaranteedProductCollection = WProductGuaranteedHelper.CheckGuaranteedProductsFromList(ProdCollection);
    }
} 
```

# xcode - 如何告诉 LLDB 调试器不要处理 SIGBUS？

> ID：11984051
> 
> 赞同：17
> 
> 时间：2012-08-16T09:15:29.880
> 
> 标签：xcode, xamarin.ios, lldb

我将 MonoTouch 嵌入到 Xcode 项目中，并希望阻止 LLDB 调试器处理 SIGBUS 信号，因为它们被单声道运行时使用。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-29T01:42:45.837

您可以使用“进程句柄”命令控制 lldb 如何拦截/传递信号。对于你的情况，你想做

```
(lldb) pro hand -p true -s false SIGBUS
NAME        PASS   STOP   NOTIFY
==========  =====  =====  ======
SIGBUS      true   false  true 
```

现在信号将被传递给您的进程，而 lldb 不会妨碍您。“NOTIFY”字段指示 lldb 是否应该打印已收到信号 - 默认情况下它将在调试器控制台中打印，但现在似乎没有发生。但是信号是正确传递的，这是重要的一点。

# c++ - 定时器中断内的上下文切换，意外的编译错误

> ID：11984056
> 
> 赞同：1
> 
> 时间：2012-08-16T09:15:51.020
> 
> 标签：c++, timer, compiler-errors, interrupt, context-switch

我正在测试一个在`dispatch()`函数中实现的上下文切换。据我了解，当我在中断计时器内调用调度时会出现问题。如果我这样做，它甚至不会编译！奇怪的是，如果我实现调度只是为了调用定时器中断和定时器来进行上下文切换，它可以完美地工作。我试图让调度宏或内联函数，但问题是一样的 - 当我尝试构建它时，发生了一些意外的异常？

这足以让你告诉我有什么问题吗？

```
class PCB{ // this class represents a thread
  public:
unsigned sp;
unsigned ss;
Status status;
Time kvant; // time slice
static PCB* running;

void createProcess(void (*body)());
};

PCB* PCB::running = 0;

void PCB::createProcess(void (*body)()){

unsigned* stek = new unsigned[1024];

st1[1023] =0x200; // PSW register with I flag setted to be 1
st1[1022] = FP_SEG(body);
st1[1021] = FP_OFF(body);

this->sp = FP_OFF(st1+1012); // space for registers ax,bx,cx,d,si,es,ds,di,bp
this->ss = FP_SEG(st1+1012);

this->status = NEW;
}

void interrupt timer(){
timer_counter--; 
if (timer_counter == 0) dispatch(); 

 else asm int 60h; // invoking the old routine
}

void interrupt dispatch(){
asm cli;
    asm {
        // store sp
        mov tsp, sp
        mov tss, ss
    }

    PCB::running->sp = tsp;
    PCB::running->ss = tss;

    cout<<"Context change!"<<endl;

    if(PCB::running->status !=END){
     PCB::running->status = READY;
     Scheduler::put(PCB::running);
    }
    PCB::running=Scheduler::get();
    PCB::running->status = RUNNING;

    tsp = PCB::running->sp;
    tss = PCB::running->ss; 

    timer_counter = PCB::running->kvant;

    asm {
        mov sp, tsp   // restore sp
        mov ss, tss
    } 

    asm sti;
} 
```

# ruby-on-rails - 如何确保新实例与上一个实例不匹配

> ID：11984057
> 
> 赞同：0
> 
> 时间：2012-08-16T09:15:51.950
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我对 ruby​​ on rails 还很陌生。我正在使用 ruby​​ 1.9.3 和 rails 3.2.6。我的模型包含有很多签到的飞行员。我正在尝试向我的模型添加一些验证，以便飞行员可能不会添加与飞行员上次签到相匹配的新签到。

```
class Checkin < ActiveRecord::Base
    belongs_to :pilot 
```

...

```
 validate :must_not_match_last_checkin

  def ==(comparison_checkin)
    self_compare_id = checkin_compare_id self
    comparison_compare_id = checkin_compare_id comparison_checkin

    if self_compare_id != comparison_compare_id
      return true
    else
      return false;
    end

  end

  private

  def must_not_match_last_checkin
    if self == self.pilot.checkins.last
      errors.add(:base, "Checkin is only valid if it differs from your previous checkin")
    end
  end 

  def checkin_compare_id checkin
    diff = ""

    if !checkin.nil?
      diff = checkin.location + checkin.description
    end

    return diff
  end
end 
```

我已经在其他情况下测试了自定义相等方法，它似乎工作正常。但是，当我使用上述模型时，即使描述/位置不同，模型错误也总是会发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:54:53.953

在您的比较运算符中：

```
if self_compare_id != comparison_compare_id 
```

真的应该

```
if self_compare_id == comparison_compare_id 
```

# python - 在 django admin 中删除对象时修改警告消息？

> ID：11984059
> 
> 赞同：3
> 
> 时间：2012-08-16T09:15:56.707
> 
> 标签：python, django

我想在 django admin 的确认消息中添加一些内容？那个出现并说“嘿，如果你删除那个，你就会删除那个那个和那个......”

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:50:25.950

django admin 使用默认消息框架[https://docs.djangoproject.com/en/dev/ref/contrib/messages/](https://docs.djangoproject.com/en/dev/ref/contrib/messages/)

操纵现有消息：

```
storage = messages.get_messages(request)
for message in storage:
    do_something_with(message) 
```

添加新消息：

```
messages.add_message(request, messages.INFO, 'An info.')
messages.add_message(request, messages.SUCCESS, 'An success.') 
```

要使用此代码，您必须覆盖 django 管理视图或创建一个处理这些消息的中间件。看到这个覆盖管理视图： [https ://docs.djangoproject.com/en/1.4/ref/contrib/admin/#django.contrib.admin.ModelAdmin.change_view](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#django.contrib.admin.ModelAdmin.change_view)

# wpf - 在 XAML 中声明类型列表

> ID：11984062
> 
> 赞同：4
> 
> 时间：2012-08-16T09:16:02.513
> 
> 标签：wpf, xaml, ivalueconverter

我正在使用需要获取类型列表的值转换器，这是转换器的属性。如果我要使用双值列表，我可以使用以下语法（按预期工作）：

**代码**

```
public class MyConverter : IValueConverter
{
    public List<double> MyList { get; set; }

    // ...
} 
```

**XAML**

```
<Converter:MyConverter x:Key="MyConverter">
    <Converter:MyConverter.MyList>
        <System.Double>1</System.Double>
        <System.Double>2</System.Double>
    </Converter:MyConverter.MyList>
</Converter:MyConverter> 
```

但是，如果我尝试将此方法与类型列表一起使用，则会引发异常：

```
Object of type 'System.RuntimeType' cannot be converted to type 'System.Collections.Generic.List`1[System.Type]' 
```

这是我的转换器及其用法：

**代码**

```
public class MyConverter : IValueConverter
{
    public List<Type> MyList { get; set; }

    // ...
} 
```

**XAML**

```
<Converter:MyConverter x:Key="MyConverter">
    <Converter:MyConverter.MyList>
        <x:Type TypeName="MyType1" />
        <x:Type TypeName="MyType2" />
    </Converter:MyConverter.MyList>
</Converter:MyConverter> 
```

我猜 XAML 语法是错误的，但我找不到正确的语法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T10:05:59.270

似乎是 XAML 设计器中的错误。给定的波纹管代码对我有用。我可以构建和运行应用程序。但在设计器中，R# 用**System:Type**突出显示两行，设计器崩溃，每行出现以下两个错误：

> *错误 1*​​类型“类型”不能用作对象元素，因为它不是公共的或未定义公共无参数构造函数或类型转换器。
> *错误 2*类型“类型”不支持直接内容。因此，当我之前（在给出之前的解决方案之前）尝试过该解决方案时，我认为我做错了。但是编译器在构建时仍然没有给出任何错误。无论如何，它看起来如何：

```
<Window.Resources>
    <local:Holder x:Key="one">
        <local:Holder.Types>
            <System:Type>System:Int32</System:Type>
            <System:Type>System:Double</System:Type>
        </local:Holder.Types>
    </local:Holder>
</Window.Resources>
<Grid >
    <ListBox DataContext="{StaticResource one}" ItemsSource="{Binding Path=Types, Converter={StaticResource one}}" />
</Grid> 
```

如您所见，区别在于声明。您必须使用 System.Type 而不是 x:Type。

以及作为示例的代码

```
using System;
using System.Collections.Generic;
using System.Globalization;
using System.Windows.Data;
using System.Linq;

namespace stackProjects
{
    public class Holder : IValueConverter
    {
        public List<Type> Types { get; set; }

        public Holder()
        {
            Types=new List<Type>();
        }

        public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            return Types.Select(x => x.Name).ToList();
        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    }
} 
```

正如我所说，发生这种情况是因为*Type*类是*abstract*。希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T09:30:08.050

好的，下面的示例编译并运行....我看到转换器被调用并且列表中填充了 2 个 Type 对象。可能有更好的方法来做到这一点。

* * *

这是我使用的完整代码：

```
namespace WpfApplication4
{
    public class MyConverter : IValueConverter
    {
        public IList<Type> MyList { get; set; }

        public MyConverter()
        {
            MyList = new List<Type>();
        }

        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            return null;
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    }

    public class MyType
    {
        public string Name { get; set; }

        public MyType()
        {

        }
    }
}

<Window x:Class="WpfApplication4.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication4"
        xmlns:runtime="clr-namespace:System.Runtime.InteropServices;assembly=mscorlib"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <sys:String x:Key="testdata">TestData</sys:String>
        <x:Array x:Key="listoftypes" Type="{x:Type sys:Type}">
            <x:Type Type="local:MyType"/>
            <x:Type Type="local:MyType"/>
        </x:Array>
        <local:MyConverter x:Key="myconv" MyList="{StaticResource listoftypes}"/>
    </Window.Resources>
    <Grid>
        <TextBlock Text="{Binding Source={StaticResource testdata}, Converter={StaticResource myconv}}"/> 
    </Grid>
</Window> 
```

# javascript - 为什么多次运行 CoffeeScript 编译器会产生不同的输出？

> ID：11984066
> 
> 赞同：2
> 
> 时间：2012-08-16T09:16:06.713
> 
> 标签：javascript, node.js, coffeescript

我正在尝试编译非常简单的咖啡脚本：

```
n = 4; 
```

使用代码

```
require('coffee-script').compile(str); 
```

我在我的解决方案中多次执行此操作，而不缓存结果。我第一次这样做时，我得到：

```
(function() {
    var n;
    n = 4;
}).call(this); 
```

但如果我再次调用它，我会得到：

```
n = 4; 
```

为什么我不第二次获得包装函数，我怎样才能让它每次都给出相同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T01:15:17.210

无法重现，我每次都得到相同的（包装的）代码。

用于`coffee.compile(str, { bare: false })`强制执行闭包包装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T11:17:10.847

由于范围问题，我相信它可能会发生（即不同的输出）。

通常你只需要一个`var`变量声明。似乎在第一次调用期间创建了所有需要的声明，第二次调用只是重用它们。

我相信这可能是因为使用了相同的`require('coffee-script')`实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T13:48:49.517

由于某种原因，第二次编译无法正常工作。CoffeeScript 代码总是包装在一个函数中。

# javascript - 删除 .clickable 类后仍会触发 jQuery click()

> ID：11984067
> 
> 赞同：23
> 
> 时间：2012-08-16T09:16:06.600
> 
> 标签：javascript, jquery

我有一个点击事件分配给一个特定类的 div。当点击发生时，该类从 div 中删除。但是，您仍然可以单击 div 并`click()`触发事件（即使该类已被删除）。这是一个例子：

**HTML：**

```
<div class="clickable">
  <p>Click me</p>
</div> 
```

**JavaScript/jQuery：**

```
$('.clickable').click(function() {
  $(this).removeClass('clickable');
  $(this).addClass('not-clickable');
  alert('Clicked!');
}); 
```

我可以看到类被删除和添加（因为文本的颜色根据我的 CSS 更改）。但是，您仍然可以多次单击 div 并且`alert()`仍然会出现。

这似乎也反过来发生。因此，如果我将`clickable`类添加到 div，则其中的代码 `$('.clickable').click(function() {...});`不会运行（但在视觉上，div 会根据新样式发生变化）。

即使在 jQuery 添加/删除类之后，如何使点击事件与类匹配`clickable`？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-16T09:20:47.400

当您将事件处理程序附加到 DOM 元素时，它保持不变。该类只是引用元素的一种方式，更改类不会取消绑定事件处理程序，因为您必须手动取消绑定处理程序，如果使用 jQuery 1.7+`on()`并且`off()`是要走的路：

```
$('.clickable').on('click', function() {
  $(this).removeClass('clickable').addClass('not-clickable').off('click');
}); 
```

这将使元素只能单击一次，您可以只使用内置`one()`函数，因为这将在第一次单击后自动取消绑定处理程序：

```
$('.clickable').one('click', function() {
  $(this).removeClass('clickable').addClass('not-clickable');
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-16T09:26:57.507

你可以用这个

```
$(document.body).delegate('.clickable', 'click', function(e){
    $(this).removeClass('clickable');
    alert('Clicked!');
}); 
```

从 jQuery 版本 1.7 开始`delegate()`，`on()`

```
$(document.body).on('click', '.clickable', function(e){
    $(this).removeClass('clickable');
    alert('Clicked!');
}); 
```

或者

```
$('.clickable').on('click', function(e){
    $(this).removeClass('clickable').off('click');
    alert('Clicked!');
}); 
```

您也可以使用方法`one()`- 它等于绑定，但发生一次

```
$('.clickable').one('click', function(e){
    alert('Clicked!');
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-16T09:20:11.360

```
$(document).on('click', '.clickable', function() {
  $(this).removeClass('clickable');
  $(this).addClass('not-clickable');
  alert('Clicked!');
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-16T09:23:00.907

```
$('.clickable').live('click',function() {
  $(this).removeClass('clickable');//remove the class
  $(this).unbind('click');//to remove the click event
  $(this).addClass('not-clickable');
  alert('Clicked!');
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T09:18:56.293

取消绑定点击事件 - 比如`$(this).unbind('click');'` 试试这个

```
$('.clickable').click(function() {
  $(this).removeClass('clickable');
  $(this).addClass('not-clickable');
  $(this).unbind('click');'
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-16T09:23:06.280

您对偶数分配的理解有点错误。请阅读您的代码

```
$('.clickable').click(function() 
```

1.  查找具有“.clickable”类的**元素**
2.  将 onclick 处理程序分配给**元素**

看，它是获取处理程序的元素，而不是类名。您需要删除处理程序。为此，您可以尝试：

```
$('.clickable').click(function() {
    $(this).removeClass('clickable');
    $(this).addClass('not-clickable');
    alert('Clicked!');
    $(this).unbind('click');
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-16T09:29:52.610

如果您只想调用一次单击事件，使用 jQuery`one`函数绑定事件，它将自行销毁。

```
$('.clickable').one('click',function() {
   $(this).removeClass('clickable');//remove the class
   $(this).addClass('not-clickable');
   alert('Clicked!');
}); 
```

# objective-c - 在 UIImagePickerController 的 cameraOverlayView 属性内的 AVPlayerLayer 中播放电影

> ID：11984069
> 
> 赞同：2
> 
> 时间：2012-08-16T09:16:10.360
> 
> 标签：objective-c, ios

我想在 AVPlayerLayer 中播放透明电影。但我希望这一层位于 UIImagePickerController 的 cameraOverlayView 属性中。问题是当电影播放时，相机会关闭。我应该如何正确地做到这一点？

# c# - 返回重复成员的最长子数组 C#

> ID：11984073
> 
> 赞同：2
> 
> 时间：2012-08-16T09:16:23.463
> 
> 标签：c#, arrays

我正在学习 C# 并试图解决以下问题： **返回最长的重复成员子**数组，例如如果数组是 {1,2,2,3,4,4,4} 我应该返回 {4,4,4} . 我试图这样做，但它返回第一个子数组而不是最长的子数组。到目前为止，我对 C# 的了解：

*   循环
*   条件句
*   数组

有任何想法吗 ？

编辑：到目前为止我的代码编辑：是的，我确实了解多维数组

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Sequence
{
class Sequence
{
    static void Main(string[] args)
    { 
        Console.Write("Enter size:");
        int size1 = int.Parse(Console.ReadLine());
        int[] array1 = new int[size1];
        for (int i = 0; i <= size1-1; i++)
        {
            Console.Write ("Ënter Number:");
            array1[i]=Int32.Parse(Console.ReadLine());
        }
        int bestLenght = 0;
        int bestStart = 0;
        int lenght = 0;
        int start=0;
        for (int i = 0; i < size1 - 2; i++)
        {
            if (i == 0 && array1[i] == array1[i + 1])
            {
                start = 0;
                lenght = 2;
                if (bestLenght < lenght)
                {
                    bestLenght = lenght;
                    bestStart = 0;
                }
            }
            else if (i != 0 && lenght != 0 && array1[i] == array1[i - 1] && array1[i + 1]   ==              array1[i])
            {
                lenght++;
                if (bestLenght < lenght)
                {
                    bestLenght = lenght;
                    bestStart = start;
                }
            }
            else if (i != 0 && array1[i - 1] != array1[i] && array1[i] == array1[i + 1])
            {
                start = i;
                lenght = 2;
                if (bestLenght < lenght)
                {
                    bestLenght = lenght;
                    bestStart = start;
                }

            }
            else 
            {
                lenght = 0;
            }

        }
        Console.WriteLine(bestLenght);

    }
} 
```

}

Cureently 我正在尝试返回最长数组的长度

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T09:32:38.930

一个非常迭代的方法：

*   循环遍历数组中的每个项目。
*   如果当前项与前一项相同，则加`currentSeriesLength`1。
*   如果不是，则对照`longestSeriesLength`. 如果它更大，则存储`current index`in`longestSeriesEnd`和`current index - currentSeriesLength`in `longestSeriesStart`。
*   `currentSeriesLength`将值保存在`longestSeriesLength`.
*   将你的`currentSeriesLength`背部设置为 1。
*   您最长的系列将是 和 之间的`longestSeriesStart`系列`longestSeriesEnd`。

将其转换为代码将是一个很好的练习。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T09:24:06.327

你基本上必须做的是检查以前的数字是否与当前的数字相同并相应地增加一个计数器。

准确地说“循环遍历数组，将值复制到新数组”并且只有当计数器值更高时它才会循环复制“

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T09:42:20.473

编辑：您的代码的问题是当最长列表是最后一个子列表时，它不处理边缘情况

改变

```
Console.WriteLine(bestLenght); 
```

读书

```
if (lenght > bestLenght) {
  bestLenght=lenght;
  bestStart=start;
}
Console.WriteLine(bestLenght); 
```

或者

您可以使用 linq Agregate 执行此操作

```
var x= new[] {1,2,2,3,4,4,4};
var y=x.Aggregate(Tuple.Create(new List<int>(),new List<int>()),
(a,b) =>{
   if (a.Item2.Count()>0 && a.Item2[0] != b) {
     if (a.Item2.Count>a.Item1.Count()) {
       a=Tuple.Create(a.Item2,new List<int>());
     }
     a.Item2.Clear();
   }
   a.Item2.Add(b);
   return a;
},a=>(a.Item2.Count() > a.Item1.Count()) ? a.Item2 : a.Item1); 
```

这本质上是使用元组遍历集合以存储 2 个列表，`Item1`代表最长的先前序列，`Item2`代表当前序列。

对于每个项目，如果当前序列不为空并且第一项不同，那么我们在一个新的子列表中，因此检查最后一个序列的长度，如果比之前的最大值更长，我们替换之前的最大值，否则只需清除列表。

agregate 的最后一部分检查两个列表中的哪个更长（好像最长的子集合是最后一个 Item1 长度检查不会发生。

该代码可以转换为通用函数来处理任何类型，如下所示。

```
IEnumerable<T> LongestSublist<T>(IEnumerable<T> source) {
return source.Aggregate(Tuple.Create(new List<T>(),new List<T>()),
    (a,b) =>{
       if (a.Item2.Count()>0 && a.Item2[0] != b) {
         if (a.Item2.Count>a.Item1.Count()) {
           a=Tuple.Create(a.Item2,new List<T>());
         }
         a.Item2.Clear();
       }
       a.Item2.Add(b);
       return a;
    },a=>(a.Item2.Count() > a.Item1.Count()) ? a.Item2 : a.Item1); 
```

甚至作为扩展功能

```
public static IEnumerable<T> LongestSublist<T>(this IEnumerable<T> source) {
return source.Aggregate(Tuple.Create(new List<T>(),new List<T>()),
    (a,b) =>{
       if (a.Item2.Count()>0 && a.Item2[0] != b) {
         if (a.Item2.Count>a.Item1.Count()) {
           a=Tuple.Create(a.Item2,new List<T>());
         }
         a.Item2.Clear();
       }
       a.Item2.Add(b);
       return a;
    },a=>(a.Item2.Count() > a.Item1.Count()) ? a.Item2 : a.Item1); 
```

让你做

var long= new[] {1,2,2,3,4,4,4}.LongestSubList();

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T09:30:40.207

您可以执行以下几个选项：

1.  最简单的方法是

    *   查找列表中每个整数的所有出现
    *   选择出现次数最多的那个。
2.  使用 a `Linq`，像这样：

    ```
    var list = new List<int>{1,2,2,3,4,4,4} ;   
    var result = list.GroupBy(r => r).OrderByDescending(grp => grp.Count()).First(); 
    ```

    a）按数字分组（您将在一组中获得 al `1`，在另一组中获得 s `2`，......等等

    b）按每个元素中的元素数量*降序排列***组**，因此在我们的例子中将是第一个，因为该组有 3 个元素（比其他任何元素都多）*`4``4`*

     *c) 获取第一个元素（列表）*

# ios - clang 失败，退出代码 254 仅适用于 iOS 设备目标

> ID：11984074
> 
> 赞同：0
> 
> 时间：2012-08-16T09:16:26.957
> 
> 标签：ios, compiler-errors, llvm-4.0

我有一个 ios xcode 项目，可以为模拟器编译和运行，但无法为设备目标编译。

我正在尝试将 QT 项目移植到 iOS 并且我的项目设置非常复杂。桌面版运行良好，除了删除所有与 UI 相关的代码外，我没有更改任何代码。

我已经向苹果提交了一个错误报告（问题 ID：12103227），但我只是想知道以前有人见过类似的问题吗？

我正在使用 Xcode 4.4.1(4F1003) 和 Apple LLVM 编译器 4.0

```
0  clang             0x00000001010536f2 main + 17107682
1  clang             0x0000000101053b79 main + 17108841
2  libsystem_c.dylib 0x00007fff8f08592a _sigtramp + 26
3  libsystem_c.dylib 000000000000000000 _sigtramp + 18446603338116474608
4  clang             0x0000000100e9e31f main + 15316751
5  clang             0x00000001002d9be3 main + 2977747
6  clang             0x000000010028061d main + 2611725
7  clang             0x0000000100280237 main + 2610727
8  clang             0x0000000100280168 main + 2610520
9  clang             0x00000001001e5bdf main + 1978319
10 clang             0x00000001001df8e4 main + 1952980
11 clang             0x00000001001df55e main + 1952078
12 clang             0x00000001001b8dff main + 1794543
13 clang             0x00000001001cf06b main + 1885275
14 clang             0x00000001001ca32d main + 1865501
15 clang             0x00000001001ca1f5 main + 1865189
16 clang             0x00000001001ca0dd main + 1864909
17 clang             0x0000000100197dfc main + 1659372
18 clang             0x000000010018a31d main + 1603341
19 clang             0x0000000100047606 main + 281078
20 clang             0x0000000100045bbe main + 274350
21 clang             0x0000000100044c01 main + 270321
22 clang             0x0000000100019ae2 main + 93906
23 clang             0x0000000100018748 main + 88888
24 clang             0x0000000100006438 main + 14376
25 clang             0x0000000100002e97 main + 647
26 clang             0x0000000100002c04
27 clang             0x00000000000000a3
Stack dump:
0\.  Program arguments: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -cc1 -triple thumbv7-apple-ios5.1.0 -emit-obj -mrelax-all -disable-free -disable-llvm-verifier -main-file-name clientplayer.cpp -pic-level 1 -mdisable-fp-elim -relaxed-aliasing -masm-verbose -target-abi apcs-gnu -target-cpu cortex-a8 -mfloat-abi soft -target-feature +soft-float-abi -target-linker-version 133.3 -g -coverage-file /Users/xiliangchen/Library/Developer/Xcode/DerivedData/QSanguosha-bpsvweybikzifuarrculsvqhjwqj/Build/Intermediates/QSanguosha-ios.build/Debug-iphoneos/QSanguosha-ios.build/Objects-normal/armv7/clientplayer.o -resource-dir /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/clang/4.0 -dependency-file /Users/xiliangchen/Library/Developer/Xcode/DerivedData/QSanguosha-bpsvweybikzifuarrculsvqhjwqj/Build/Intermediates/QSanguosha-ios.build/Debug-iphoneos/QSanguosha-ios.build/Objects-normal/armv7/clientplayer.d -MT dependencies -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk -iquote /Users/xiliangchen/Library/Developer/Xcode/DerivedData/QSanguosha-bpsvweybikzifuarrculsvqhjwqj/Build/Intermediates/QSanguosha-ios.build/Debug-iphoneos/QSanguosha-ios.build/QSanguosha-ios-generated-files.hmap -iquote /Users/xiliangchen/Library/Developer/Xcode/DerivedData/QSanguosha-bpsvweybikzifuarrculsvqhjwqj/Build/Intermediates/QSanguosha-ios.build/Debug-iphoneos/QSanguosha-ios.build/QSanguosha-ios-project-headers.hmap -D DEBUG=1 -D QT_GUI_LIB -D QT_NETWORK_LIB -D QT_CORE_LIB -D QT_SHARED -D Q_WS_IOS -I /Users/xiliangchen/Library/Developer/Xcode/DerivedData/QSanguosha-bpsvweybikzifuarrculsvqhjwqj/Build/Intermediates/QSanguosha-ios.build/Debug-iphoneos/QSanguosha-ios.build/QSanguosha-ios-own-target-headers.hmap -I /Users/xiliangchen/Library/Developer/Xcode/DerivedData/QSanguosha-bpsvweybikzifuarrculsvqhjwqj/Build/Intermediates/QSanguosha-ios.build/Debug-iphoneos/QSanguosha-ios.build/QSanguosha-ios-all-target-headers.hmap -I /Users/xiliangchen/Library/Developer/Xcode/DerivedData/QSanguosha-bpsvweybikzifuarrculsvqhjwqj/Build/Products/Debug-iphoneos/include -I ../../../QtSDK/Desktop/Qt/4.8.1/gcc/lib/QtCore.framework/Versions/4/Headers -I ../../../QtSDK/Desktop/Qt/4.8.1/gcc/include/QtCore -I ../../../QtSDK/Desktop/Qt/4.8.1/gcc/lib/QtNetwork.framework/Versions/4/Headers -I ../../../QtSDK/Desktop/Qt/4.8.1/gcc/include/QtNetwork -I ../../../QtSDK/Desktop/Qt/4.8.1/gcc/include -I include -I src/client -I src/core -I src/dialog -I src/package -I src/scenario -I src/server -I src/ui -I src/util -I src/lua -I src/jsoncpp/include -I include/freetype -I . -I /usr/local/include -I /System/Library/Frameworks/CarbonCore.framework/Headers -I ../../../QtSDK/Desktop/Qt/4.8.1/gcc/mkspecs/macx-xcode -I /Users/xiliangchen/Library/Developer/Xcode/DerivedData/QSanguosha-bpsvweybikzifuarrculsvqhjwqj/Build/Intermediates/QSanguosha-ios.build/Debug-iphoneos/QSanguosha-ios.build/DerivedSources/armv7 -I /Users/xiliangchen/Library/Developer/Xcode/DerivedData/QSanguosha-bpsvweybikzifuarrculsvqhjwqj/Build/Intermediates/QSanguosha-ios.build/Debug-iphoneos/QSanguosha-ios.build/DerivedSources -F/Users/xiliangchen/Library/Developer/Xcode/DerivedData/QSanguosha-bpsvweybikzifuarrculsvqhjwqj/Build/Products/Debug-iphoneos -F/Users/xiliangchen/QtSDK/Desktop/Qt/4.8.1/gcc/lib -F/Users/xiliangchen/QtSDK/Desktop/Qt/4.8.1/gcc/lib -F/tmp/qt-stuff-85167/source/qt-everywhere-opensource-src-4.8.1/Desktop/Qt/4.8.1/gcc/lib -fmodule-cache-path /var/folders/9s/3z214w8n5vxdv_ycqss9t6jc0000gn/T/clang-module-cache -O0 -Wno-trigraphs -Wno-missing-field-initializers -Wno-missing-prototypes -Wreturn-type -Wno-non-virtual-dtor -Wno-overloaded-virtual -Wno-exit-time-destructors -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wuninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wno-sign-compare -Wno-shorten-64-to-32 -Wno-newline-eof -Wc++11-extensions -Wdeprecated-declarations -Winvalid-offsetof -Wno-sign-conversion -std=gnu++11 -fdeprecated-macro -ferror-limit 19 -fmessage-length 0 -mstackrealign -fblocks -fobjc-runtime-has-arc -fobjc-runtime-has-weak -fobjc-runtime-has-terminate -fobjc-default-synthesize-properties -fcxx-exceptions -fexceptions -fsjlj-exceptions -fpascal-strings -fdiagnostics-show-option -serialize-diagnostic-file /Users/xiliangchen/Library/Developer/Xcode/DerivedData/QSanguosha-bpsvweybikzifuarrculsvqhjwqj/Build/Intermediates/QSanguosha-ios.build/Debug-iphoneos/QSanguosha-ios.build/Objects-normal/armv7/clientplayer.dia -o /Users/xiliangchen/Library/Developer/Xcode/DerivedData/QSanguosha-bpsvweybikzifuarrculsvqhjwqj/Build/Intermediates/QSanguosha-ios.build/Debug-iphoneos/QSanguosha-ios.build/Objects-normal/armv7/clientplayer.o -x c++ /Users/xiliangchen/Documents/project/QSanguosha/src/client/clientplayer.cpp 
1\.  <eof> parser at end of file
2\.  Code generation
3\.  Running pass 'Function Pass Manager' on module '/Users/xiliangchen/Documents/project/QSanguosha/src/client/clientplayer.cpp'.
4\.  Running pass 'ARM Instruction Selection' on function '@_ZN15QBasicAtomicInt5derefEv'
clang: error: unable to execute command: Segmentation fault: 11
clang: error: clang frontend command failed due to signal (use -v to see invocation)
clang: note: diagnostic msg: Please submit a bug report to http://developer.apple.com/bugreporter/ and include command line arguments and all diagnostic information.
clang: note: diagnostic msg: Preprocessed source(s) and associated run script(s) are located at:
clang: note: diagnostic msg: /var/folders/9s/3z214w8n5vxdv_ycqss9t6jc0000gn/T/clientplayer-diYdeq.ii
clang: note: diagnostic msg: /var/folders/9s/3z214w8n5vxdv_ycqss9t6jc0000gn/T/clientplayer-diYdeq.sh
Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 254 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:42:14.583

我有“clang 失败，退出代码 254 仅适用于 iOS 设备目标”。这是一个奇怪的目标，因为我有 2 个目标（免费和付费的应用程序版本）。一个目标出现了错误，为了解决这个问题，我不得不将构建设置架构更改为 armv7。另一个目标器在 armv6 上存档没有问题。也许与 Admob lib 有关，因为这是两个目标之间的唯一区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:51:46.280

事实证明，Qt 用于原子变量的头文件链接到 ppc 头而不是 armv7。ppc 标头包含一些内联汇编代码并导致交叉编译器崩溃。

# file-io - NetBIOS 是否进行任何缓存？

> ID：11984078
> 
> 赞同：5
> 
> 时间：2012-08-16T09:16:38.410
> 
> 标签：file-io, samba, unc, shared-directory, netbios

如果我从 UNC 网络共享读取文件，Windows 会缓存该文件的部分内容吗？

例如：如果我逐字节读取整个文件，每次读取调用会导致网络请求，还是 Windows 会在内部读取更大的块，并从内存中提供后续请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T20:15:27.777

如果我理解正确，文件的内容可能会被缓存。

为了确保所有读取都将针对实际文件而不是从任何系统缓冲区或磁盘缓存中完成，可以`FILE_FLAG_NO_BUFFERING`在调用[CreateFile](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx)时使用。

您还可以使用禁用共享资源的缓存`net share <sharename> /cache:none`

# debugging - 使用 Flash Builder 调试 OpenLaszlo SWF 运行时应用程序和 Laszlo 基础类 (LFC)

> ID：11984083
> 
> 赞同：2
> 
> 时间：2012-08-16T09:16:51.437
> 
> 标签：debugging, flash, openlaszlo, lzx

我刚刚学习了如何[使用 Flash Builder 分析 OpenLaszlo 应用程序](https://stackoverflow.com/questions/11956784/)。该讨论中提到的方法意味着 OpenLaszlo 应用程序被编译成一个 SWF 文件，并为 Flex 编译器启用了调试选项。然后可以使用 Flash Builder 分析生成的 SWF 文件。

如果我们可以使用 Flash Builder 调试器的全部功能来调试 OpenLaszlo SWF11 运行时应用程序，那将会更加强大。我正在专门寻找一种方法

1.  能够在我的应用程序生成的 ActionScript 3 代码（交叉编译的 LZX 代码）中设置断点，并逐步执行代码。
2.  能够单步执行 Laszlo 基础类的方法，尤其是[SWF 运行时内核](http://svn.openlaszlo.org/openlaszlo/trunk/WEB-INF/lps/lfc/kernel/swf9/)。

由于 OpenLaszlo 编译器提供的错误消息并不总是那么有用，因此对于具有 ActionScript 3 知识的开发人员来说，能够直接单步执行 ActionScript 代码、检查 Flash Builder 中的对象和变量会更有效。

为了实现这些目标，有必要

1.  有一种方法可以从我的应用程序 LZX 代码中生成 ActionScript 3 代码。
2.  可以访问生成的 ActionScript 3 代码，该代码用于编译 LFC SWC 库文件 $LPS_HOME/lps/includes/lfc/LFC11.swc。ActionScript 代码必须作为[OpenLaszlo Subversion 构建过程](http://wiki.openlaszlo.org/SubversionBuildInstructions)的一部分生成。不幸的是，我不太了解构建过程，无法了解 LFC 的源代码是在哪里以及如何生成的。

有没有人能够调试和单步调试应用程序的 ActionScript3 代码和 LFC 类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:27:11.370

两者都可以。检索生成的 OpenLaszlo 应用程序的 ActionScript3 源代码相对容易。当 OpenLaszlo 编译器编译 LZX 代码时，生成的应用程序 ActionScript 3 代码将写入 Java 临时文件夹。

将 SWF 运行时 LFC 类编译成 SWC 文件时也是如此。OpenLaszlo 源代码（在进行[Subversion 构建](http://wiki.openlaszlo.org/SubversionBuildInstructions)时）包含一个用于编译 SWC 文件的 shell 脚本。如果您已签出代码，则可以在以下位置找到构建脚本

```
$LPS_HOME/WEB-INF/lps/lfc/ 
```

对于flex4.6分支，如果执行命令

```
cd $LPS_HOME/WEB-INF/lps/lfc/; ./buildlfc --runtime=swf11 
```

您将在 Java 或系统临时文件夹中找到生成的 ActionScript 类，例如

```
/tmp/lzswf9/lzgen6382925936717905460/ 
```

在我的 Linux 系统上。如果在运行 shell 脚本之前清空 /tmp/lzswf9 文件夹，您应该只会看到一个子文件夹，该文件夹中以字母 lzgen* 开头，其中包含编译到 SWC 文件中的所有 ActionScript 类。

整个操作相对复杂，我很久以前创建了一个 JIRA，并建议应该为 LFC/内核 SWC 库文件的 ActionScript3 源代码提供 OpenLaszlo 服务器：http: [//jira.openlaszlo.org/jira/浏览/LPP-9424](http://jira.openlaszlo.org/jira/browse/LPP-9424)

不幸的是，这从未实施过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T15:03:48.127

我[在 Github 上创建了一个项目，](https://github.com/raju-bitter/openlaszlo-flashbuilder-project)其中包含一个 Ant 构建脚本以及在 Windows 或 Mac 上使用 Flash Builder 4.6 分析和调试 OpenLaszlo 应用程序所需的文件。

下面是在分析器中运行的 OpenLaszlo 应用程序的屏幕截图：

![在 Flash Builder 分析器中运行的 OpenLaszlo 应用程序](../Images/e87c9179048a415dfd8d97d6e3899196.png)

项目文件包含一个带有详细教程的 PDF，该教程展示了如何调试和分析 OpenLaszlo SWF11 运行时应用程序，包括 SWF11 LFC 类。[这是标题为“使用 Flash Builder 分析 OpenLaszlo 应用程序”](https://github.com/raju-bitter/openlaszlo-flashbuilder-project)的文档的链接。

# javascript - Window.Print() 在 Internet Explorer 中抛出权限被拒绝的 JavaScript 运行时异常

> ID：11984086
> 
> 赞同：1
> 
> 时间：2012-08-16T09:17:03.763
> 
> 标签：javascript, c#-4.0, internet-explorer-8, internet-explorer-7, modernizr

我遇到了一个奇怪的问题，在使用 window.print() 打印页面时，我第一次获得了打印预览。但是当我第二次单击时，我获得了权限被拒绝的 JavaScript 运行时异常（它从modernizr.js 文件触发）

有谁知道为什么会出现这个问题。我只在ie（7和8）中遇到这个问题。任何帮助都感激不尽。

谢谢索拉吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:16:32.183

我能够通过用最新版本替换modernizr来解决这个问题。他们已经修复了与 Internet Explorer 相关的问题。希望这可以帮助面临这个问题的人。

# jquery - jQuery Json 和 Each

> ID：11984094
> 
> 赞同：1
> 
> 时间：2012-08-16T09:17:27.617
> 
> 标签：jquery, json, each

有我的代码：

```
$.ajax({
    url: "?module=gestionApplication&action=importScenario&fichierconf="+$fichierconf,
    dataType: "json",
    success: function( data ) {

        $( "#dialog-scenario input#fichierxml" ).val( data.FICHIERXML );
        $( "#dialog-scenario input#fichierproxy" ).val( data.FICHIERPROXY );
        $( "#dialog-scenario select#portail" ).val( data.PORTAIL );
        $( "#dialog-scenario select#typemaj" ).val( data.MONITORING );
        $( "#dialog-scenario input#periodemaintenance" ).val( data.MAINT );
        $( "#dialog-scenario input#nomdns" ).val( data.DNSATESTER ); 
```

它工作得很好，但是我得到了 40 行相同类型的行，是否可以在不知道数据后的字符串的情况下执行相同的操作。?

我会做类似的事情

```
data.each( function(dataName) {
   $( "#dialog-scenario inputORselect#"+dataName ).val( data.dataname );
}); 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:21:25.243

```
$.each(data, function(key, value) {
    // do your processing here
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T09:21:38.697

您快到了，请记住，id 始终是唯一的，不需要有关其父级的信息。

```
$.each(data, function(name, value) {
   $("#"+name.toLowerCase()).val(value);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T09:35:45.003

在元素名称和数据属性之间创建一个映射：

```
var map,
    prop;

map = {
    "typemaj" : "MONITORING",
    "periodemaintenance" : "MAINT"
} 
```

然后，您可以遍历属性来设置它们的值。

```
for( prop in map ) {
    $( "#dialog-scenario inputORselect#" + prop ).val( data[ map[prop] ] );
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T09:21:29.270

```
success: function( data ) {
    $.each(data, function(i, dataName) {
       $( "#dialog-scenario inputORselect#"+dataName ).val( data.dataname );
    });
} 
```

# ruby-on-rails - 红宝石-redirect_to(url, :myparam => 'abc')

> ID：11984095
> 
> 赞同：4
> 
> 时间：2012-08-16T09:17:30.300
> 
> 标签：ruby-on-rails, param, redirecttoaction

我无法解决这个问题。

```
url = "www.mysite.com/?param1=abc"

redirect_to(url, :param2 => 'xyz')

### Should this go to - www.mysite.com/?param1=abc&param2=xyz 
```

还是我错过了什么？它似乎不起作用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-16T09:23:39.770

从[文档](http://api.rubyonrails.org/classes/ActionController/Redirecting.html#method-i-redirect_to)中：

> **重定向到（选项 = {}，响应状态 = {}）**
> 
> 将浏览器重定向到选项中指定的目标。此参数可以采用以下三种形式之一：
> 
> 哈希 - 将通过使用选项调用 url_for 来生成 URL。
> 
> 记录 - 将通过使用选项调用 url_for 生成 URL，该选项将引用该记录的命名 URL。
> 
> 以 protocol://（如 http://）或协议相对引用（如 //）开头的字符串 - 作为重定向目标直接传递。

您将 String 作为第一个参数传递，因此它使用第三个选项。您的第二个参数被解释为参数的值`response_status`。

因此，如果您的重定向是内部重定向（指向同一个应用程序），则无需指定方案和主机名。只需使用

```
redirect_to root_url(param1 => 'abc', param2 => 'xyz') 
```

如果是外部 URL，请在重定向之前构建*完整的 URL：*

```
url = "www.mysite.com/?param1=abc&params2=xyz"
redirect_to url 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-13T09:26:19.673

`redirect_to`不是 Ruby 函数，但在 Ruby on Rails 中常用。[您可以在此处](http://apidock.com/rails/ActionController/Redirecting/redirect_to)找到包含大量工作示例的文档。

如果你想在纯 Ruby 中打开一个网站，请使用 'open-uri' 类。[你可以在这里](http://ruby-doc.org/stdlib-2.2.0/libdoc/open-uri/rdoc/OpenURI.html)找到它的文档。

我希望这有助于理解为什么`redirect_to`在纯 Ruby 中不起作用，并且可能有助于在有或没有 Rails 的情况下使用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T11:29:01.540

除非您将它们合并并发送，否则它不会知道旧参数。

```
url = "www.mysite.com/?param1=abc"
p = params.merge({:param2 => 'xyz'})
redirect_to(url, p) 
```

# javascript - 将多行字符串从 DB 传递到 javascript 变量

> ID：11984099
> 
> 赞同：1
> 
> 时间：2012-08-16T09:17:42.060
> 
> 标签：javascript, mysql, jsp, servlets

首先，我必须为糟糕的英语道歉，这不是我的主要语言。

我正在使用 MySQL 数据库。所以，我在数据库中有一个多行字符串。我在 servlet 中阅读它并在 jsp 中传递。在jsp中我使用这样的东西：

```
<script>
var foo = {
... 
title: "<c:out value="${myMultilineString}"/>",
... 
}
</script> 
```

但它不起作用。

我试图像这样更改源字符串：

1）“线1

line2" 在页面上看起来像这样：

标题：“第 1 行

第 2 行”这是一个错误

2)"line1\nline2" 没有错误，但字符串不是多行的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:03:00.890

换行的html标签是**<br/>**。

因此，尝试用**< br />**替换数据库中的**\n**，然后将其分配给**标题**

# jquery - jQuery $.get 在 Internet Explorer 中什么都不做？

> ID：11984109
> 
> 赞同：2
> 
> 时间：2012-08-16T09:18:17.557
> 
> 标签：jquery, internet-explorer, get

这个问题以前好像有人问过，但我找不到一个确定的答案。

我正在使用`$.get()`准备触发 Facebook 事件查询的文档。

在除 IE 之外的所有浏览器中都可以正常工作（我使用的是 IE9.0，无论是正常模式还是兼容模式）

```
$(document).ready(function (){
    $.get("https://graph.facebook.com/oauth/access_token?client_id=" + k + "&client_secret=" + sc + "&grant_type=client_credentials", function (result) {
         // DO STUFF //
    });
}); 
```

在您对我在代码中使用 FB 客户端密码大喊大叫之前，它不是生产应用程序，我只是在尝试构建一种快速获取访问令牌的方法。

无论如何......在 Firefox、Chrome 和 Safari 中，这正是它应该做的。但是，在 IE 中它什么也不做，该函数不会被触发。这不是缓存问题，也不是请求页面标题的问题（如其他帖子中所述），因为它是触发功能的问题。

* * *

编辑，澄清一下，因为我最初有一个错字。这是我尝试运行的实际代码（采纳了建议使用`&amp;`而不是`&`

```
$(document).ready(function (){
    $.get("https://graph.facebook.com/oauth/access_token?client_id=" + k + "&amp;client_secret=" + sc + "&amp;grant_type=client_credentials", function (result) {
        alert("got token") 
    });
}); 
```

警报没有被触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-28T22:23:42.790

下面的代码有效。获取访问令牌并使用它来获取提要：

```
$.get("https://graph.facebook.com/oauth/access_token?type=client_cred&client_id=CLIENT_ID_HERE&client_secret=CLIENT_SECRET_HERE", function (a, b, c) {
    $.get("https://graph.facebook.com/barackobama/feed?" + a, function (a, b, c) {
        $.each(a.data, function (i, item) {
            $("#facebook").append('</br>' + (item.story == null ? item.message : item.story));
        });
    });
}); 
```

client_id 和 client_secret 是 App 的 App ID 和 App Secret。

您可以从 Facebook 开发人员的应用程序中获取这些信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T09:21:51.000

我没有IE，但有一个大括号错字：

```
$(document).ready(function (){
    $.get("https://graph.facebook.com/oauth/access_token?client_id=" + k + "&client_secret=" + sc + "&grant_type=client_credentials", function (result) {
            // DO STUFF //
    });
}); 
```

您也可以考虑替换`&`为`&amp;`

# objective-c - NSDictionary 的哈希值

> ID：11984112
> 
> 赞同：13
> 
> 时间：2012-08-16T09:18:38.330
> 
> 标签：objective-c, cocoa, nsdictionary

我遇到了一个问题，我为不同的字典得到了相同的哈希值。也许我在做一些明显的错误，但我认为，具有不同内容的对象（也就是不相等的对象）应该有不同的哈希值。

```
NSDictionary *dictA = @{ @"foo" : @YES };
NSDictionary *dictB = @{ @"foo" : @NO };

BOOL equal = [dictA hash] == [dictB hash];

NSAssert(!equal, @"Assuming, that different dictionaries have different hash values."); 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-16T09:49:42.657

不能保证两个不同的对象会有不同的哈希值。

在最新[的 CoreFoundation 开源版本中](http://opensource.apple.com/source/CF/CF-635.21/CFDictionary.c)，CFDictionary（相当于 NSDictionary）的哈希定义为：

```
static CFHashCode __CFDictionaryHash(CFTypeRef cf) {
    return __CFBasicHashHash((CFBasicHashRef)cf);
} 
```

[并`__CFBasicHashHash`定义为](http://opensource.apple.com/source/CF/CF-635.21/CFBasicHash.m)：

```
__private_extern__ CFHashCode __CFBasicHashHash(CFTypeRef cf) {
    CFBasicHashRef ht = (CFBasicHashRef)cf;
    return CFBasicHashGetCount(ht);
} 
```

这只是存储在集合中的条目数。换句话说，`[dictA hash]`和`[dictB hash]`的哈希值都是**1**，即字典中的条目数。

虽然它是一个非常糟糕的哈希算法，但 CF 在这里没有做错任何事情。如果您需要更准确的哈希值，您可以在 Obj-C 类别中自己提供一个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-07T05:35:09.643

使用只有整数、字符串等的字典。我将`dict.description.hash`用作快速代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-20T13:35:45.913

基于[igor-kulagin](https://stackoverflow.com/users/1050261/igor-kulagin)的答案的解决方案不依赖于顺序：

```
@implementation NSDictionary (Extensions)

- (NSUInteger) hash
{
    NSUInteger prime = 31;
    NSUInteger result = 1;
    for (NSObject *key in [[self allKeys] sortedArrayUsingSelector:@selector(compare:)]) {
        result = prime * result + [key hash];
        result = prime * result + [self[key] hash];
    }
    return result;
}
@end 
```

但是，如果字典包含其他字典作为值，则仍有可能发生冲突。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-08T21:08:33.043

函数“散列”不是真正的散列函数。它为字符串（所有可预测的）提供不同的值，但对于集合（数组和字典），它只返回计数。如果您想要一个唯一的哈希，您可以使用素数或函数 srandom() 和 random() 自己计算它，或者探索 CommonCrypto/CommonDigest.h 中可用的真正的哈希函数，如 SHA1

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-09-19T17:24:15.460

我根据这个答案创建了**NSDictionary**类别和覆盖的**哈希方法：**[覆盖 isEqual 的最佳实践：和哈希](https://stackoverflow.com/questions/254281/best-practices-for-overriding-isequal-and-hash "覆盖 isEqual: 和 hash 的最佳实践")

```
@implementation NSDictionary (Extensions)

- (NSUInteger) hash {
    NSUInteger prime = 31;
    NSUInteger result = 1;

    NSArray *sortedKeys = [self.allKeys sortedArrayUsingSelector: @selector(compare:)];
    for (NSObject *key in sortedKeys) {
        result = prime * result + key.hash;
        id value = self[key];
        if ([value conformsToProtocol: @protocol(NSObject)] == YES) {
            result = prime * result + [value hash];
        }
    }

    return result;
}

@end 
```

和 Swift 实现。

```
extension Dictionary where Key: Comparable, Value: Hashable {
    public var hashValue: Int {
        let prime = 31
        var result = 1

        let sortedKeys = self.keys.sorted()
        for (key) in sortedKeys {
            let value = self[key]!
            result = Int.addWithOverflow(Int.multiplyWithOverflow(prime, result).0, key.hashValue).0
            result = Int.addWithOverflow(Int.multiplyWithOverflow(prime, result).0, value.hashValue).0
        }

        return result
    }
} 
```

完美地，这还需要实现`Equatable`协议，`Dictionary`因此您还可以添加`Hashable`协议一致性。

# c# - 在 C# 中检查输入是否是正确的数据类型

> ID：11984117
> 
> 赞同：0
> 
> 时间：2012-08-16T09:19:00.590
> 
> 标签：c#

我想要的是基本上让用户输入一个浮点数，然后系统检查输入是否确实是一个浮点数，如果是，那么它将继续执行代码，如果不是，那么用户将拥有重新输入正确的数据类型。对不起初学者的问题，代码示例是：

```
 Console.Write("Response Value > ");
            Response = float.Parse(Console.ReadLine())

            Ask_Count = Ask_Count + 1;
            if (Response > 0 && Response < 6)
            {
                Valid_Count = Valid_Count + 1;
            } 
```

我将如何进行程序检查以查看 Response 是否为浮点数？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T09:20:15.820

`float.TryParse`为之使用。

```
Console.Write("Response Value > ");
if(float.TryParse(Console.ReadLine(), out Response)
{
    Ask_Count = Ask_Count + 1;
    if (Response > 0 && Response < 6)
        Valid_Count = Valid_Count + 1;
}
else
    Console.WriteLine("Number entered is not a float"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T09:22:23.693

另一个是使用`is float`.

```
bool result = varName is float; 
```

或者

```
float x = 0;
bool result = float.tryParse(varname, out x); 
```

# javascript - jQuery中用于身份证号码格式的RegEx模式不起作用

> ID：11984118
> 
> 赞同：0
> 
> 时间：2012-08-16T09:19:09.123
> 
> 标签：javascript, jquery, ajax, regex

我正在尝试在我的应用程序中验证国民身份证号码。但它不起作用。它会为所有值引发错误。即使我输入正确的格式。我的格式应该是 123456789v 或 123456789x。我在这里添加了我的 jQuery 验证。谁能帮帮我吗？如果您需要更多详细信息，请发表评论。

```
$('.btn-submit').click(function(e) {

  required = ["employeeName","gender","employeeId","nic","firstName","lastName","departmentId","designation","address"];
  // Declare the function variables:
  // Parent form, form URL, email regex and the error HTML
  var $formId = $(this).parents('form');
  var formAction = $formId.attr('action');
  var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
  var nicReg=/^[0-9]{9}[vVxX]$/;
  var $error = $('<span class="error"></span>');

  // Prepare the form for validation - remove previous errors
  $('li',$formId).removeClass('error');

  $('span.error').remove();

  // Validate all inputs with the class "required"
  $('.required',$formId).each(function(){
    for (i=0;i<required.length;i++){
      var inputVal = $('#'+required[i]).val();
      var $parentTag = $('#'+required[i]).parent();
      if(inputVal == ''){
        $parentTag.addClass('error').append($error.clone().text('Required Field'));
      }

    }

    // Run the email validation using the regex for those input items also having class "email"
    if($(this).hasClass('nic') == true){
      var $parentTag2=$('#nic').parent();
      if(!nicReg.test(inputVal)){
        $parentTag2.addClass('error').append($error.clone().text('Enter valid NIC'));
      }
    }

    // Check passwords match for inputs with class "password"
    if($(this).hasClass('password') == true){
      var password1 = $('#password-1').val();
      var password2 = $('#password-2').val();
      if(password1 != password2){
        $parentTag.addClass('error').append($error.clone().text('Passwords must match'));
      }
    }

  });

  // All validation complete - Check if any errors exist
  // If has errors

  if ($('span.error').length > 0) {

    $('span.error').each(function(){

      // Set the distance for the error animation
      var distance = 5;

      // Get the error dimensions
      var width = $(this).outerWidth();

      // Calculate starting position
      var start = width + distance;

      // Set the initial CSS
      $(this).show().css({
        display: 'block',
        opacity: 0,
        right: -start+'px'
      })
      // Animate the error message
      .animate({
        right: -width+'px',
        opacity: 1
      }, 'slow');

    });
  } else {
    this.form.action = "DepartmentServlet?method=add";
    $formId.submit();

  }
  // Prevent form submission
  e.preventDefault();

});

// Fade out error message when input field gains focus
$('.required').focus(function(){
  var $parent = $(this).parent();
  $parent.removeClass('error');
  $('span.error',$parent).fadeOut();
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:27:42.933

正如我第一眼看到的那样——“inputVal”只设置在“for”循环中。在 nicReg.test() 中仅测试最后一个值

# c# - 字典或哈希表作为类中的参数化构造函数

> ID：11984119
> 
> 赞同：0
> 
> 时间：2012-08-16T09:19:13.700
> 
> 标签：c#, wpf, dictionary, constructor, hashtable

我正在开发 wpf 应用程序，我必须将一些全局对象从一个类传递到另一个类，因此我为该类声明了一个参数化构造函数，我担心哪个作为参数、字典或哈希表的性能更好。
我读了这篇文章[Dictionary and Hashtable之间的区别](https://stackoverflow.com/questions/876656/difference-between-dictionary-and-hashtable)

下面的代码是使用hashtable

```
 public partial class Sample: Window
        {
      Hashtable session = new Hashtable();

 string Path= string.Empty;
 string PathID= string.Empty;

           public Sample(Hashtable hashtable)
            {
                if (session != null)
                {
                    this.session = hashtable;
                    Path= session["Path"].ToString()
                    PathID= session["MainID"].ToString();
                }
                InitializeComponent();
            }
     private void Window_Loaded(object sender, RoutedEventArgs e)
            {
            }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T09:27:30.690

不会，

```
public Sample(string path, string mainId)
{
    this.Path = path;
    this.PathID = mainId;

    InitializeComponent();
} 
```

更简单，更快，更容易阅读，给编译时带来错误等？

* * *

如果要传递的值太多，

```
class NumerousSettings
{
    public string Path {get; set;};
    public string MainId  {get; set;};
    ...
}

public Sample(NumerousSettings settings)
{
    if (settings == null)
    {
        throw new CallTheDefaultContructorException();
    }

    this.Path = settings.Path;
    this.PathID = settings.MainId;
    ...

    InitializeComponent();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T09:28:24.430

> 我读了这篇文章[Dictionary 和 Hashtable 之间的区别](https://stackoverflow.com/questions/876656/difference-between-dictionary-and-hashtable)

好的，马克的回答似乎很清楚......

"*如果您是 .NET 2.0 或更高版本，您应该更喜欢 Dictionary（和其他通用集合）*

*一个微妙但重要的区别是 Hashtable 支持单个写入线程的多个读取线程，而 Dictionary 不提供线程安全。如果您需要通用字典的线程安全，则必须实现自己的同步或（在 .NET 4.0 中）使用 ConcurrentDictionary。*"

如果您不需要线程安全，那么 Dictionary 是类型安全和性能的首选方法。

# php - 在 jquery div show() 中提交表单 $_SERVER['PHP_SELF']

> ID：11984121
> 
> 赞同：1
> 
> 时间：2012-08-16T09:19:15.027
> 
> 标签：php, jquery, forms

我有一系列 div style="display:none;" 我为每个 div 使用 jquery show hide。

其中一个 div 是一个选择菜单，我想将表单提交给它自己 $_SERVER['PHP_SELF']。我如何提交表单但仍留在正确的当前 div 中。

提前致谢。

```
 <div style="display:none;">
    <form action='<?php echo $_SERVER['PHP_SELF']; ?>' method='post' name='form_filter' >
        <select id="employee_user" name="employee_user" onchange="this.form.submit();">
        <option value="">Select Staff</option>

    <?php  // $Id: emails.php, 27/06/2011 mbrennand
    $users_in_department = mysql_query('SELECT DISTINCT(employee) FROM holiday_entitlement_academic WHERE line_manager = \'' . $username. '\'');
    $users_in_department2 = mysql_query('SELECT DISTINCT(employee) FROM holiday_entitlement_business WHERE line_manager = \''.$username.'\'');

    while($user_in_dept = mysql_fetch_array($users_in_department)) {
    echo '<option value="'.$user_in_dept['employee'].'">'.$user_in_dept['employee'].'</option>';
    }
    while($user_in_dept2 = mysql_fetch_array($users_in_department2)) {
    echo '<option value="'.$user_in_dept2['employee'].'">'.$user_in_dept2['employee'].'</option>';
    }
    ?>    
    </select>
    </form>
    </div>

    <div style="display:none;">
    </div>

    <div style="display:none;">
    </div>

    <div style="display:none;">
    </div> 
```

**编辑....代码已修改**

```
<script type="text/javascript">
$('#employee_user').on('change', function(){
    $.post('SELF', $('form input,form select').serializeArray(), function(data){
         // Form has submitted
    });
});
</script>

<div style="float:right;">
<form action='' method='post' name='form_filter' >
    <select id="employee_user" name="employee_user">
    <option value="">Select Staff</option>

<?php  // $Id: emails.php, 27/06/2011 mbrennand
$users_in_department = mysql_query('SELECT DISTINCT(employee) FROM holiday_entitlement_academic WHERE line_manager = \'' . $username. '\'');
$users_in_department2 = mysql_query('SELECT DISTINCT(employee) FROM holiday_entitlement_business WHERE line_manager = \''.$username.'\'');

while($user_in_dept = mysql_fetch_array($users_in_department)) {
echo '<option value="'.$user_in_dept['employee'].'">'.$user_in_dept['employee'].'</option>';
}
while($user_in_dept2 = mysql_fetch_array($users_in_department2)) {
echo '<option value="'.$user_in_dept2['employee'].'">'.$user_in_dept2['employee'].'</option>';
}
?>    
</select>
</form>
</div>
<h2>STAFF HOLIDAY LEAVE</h2>
<br/>

<?php
$username_indept = $_POST["employee_user"];

$is_academic_result = mysql_query('SELECT * FROM holiday_entitlement_academic WHERE employee = \'' . $username_indept . '\'');
$is_business_result = mysql_query('SELECT * FROM holiday_entitlement_business WHERE employee = \'' . $username_indept . '\'');

if($is_academic = mysql_fetch_array($is_academic_result)) {
    switch($is_academic['units']) {
        case 'days':
            include_once('admin_academic_days.php');
            break;
        case 'hours':
            include_once('admin_academic_hours.php');
            break;
        default:
            break;
}
} else if ($is_business = mysql_fetch_array($is_business_result)) {
    switch($is_business['units']) {
        case 'days':
            include_once('admin_business_days.php');
            break;
        case 'hours':
            include_once('admin_business_hours.php');
            break;
        default:
            break;
    }
} 
else {
         include_once('no_record.php');
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T09:27:27.010

有三种方法可以解决这个问题：

*   使用 AJAX，在这种情况下页面不会更改并保持静态，在这种情况下您将留在正确的 div 中。
*   使用与 AJAX 相同的 iframe 目标
*   使用表单元素来了解已填写了多少表单并隐藏/显示依赖于此的页面部分。

另外作为提示，不要在表单提交中使用 PHP_SELF。这是不安全的。

AJAX 提交示例：

```
$('#employee_user').on('change', function(){
    $.post('SELF', $('form input,form select').serializeArray(), function(data){
         // Form has submitted
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T09:25:47.943

两种选择：

1.  通过ajax提交表单

2.  在您的请求中提供一些信息，这些信息将确定在页面重新加载时最初应该显示哪个 div。

    这可以通过隐藏输入、动作查询参数`action="?active_div=3"`或类似的东西来完成。

顺便说一句，如果提交到当前 URL，您可以将`action`属性留空。

# java - 用于获取特定时间段的使用数据和连接速度的库

> ID：11984122
> 
> 赞同：1
> 
> 时间：2012-08-16T09:19:25.213
> 
> 标签：java, c++, python, desktop-application, bandwidth

我要做一个由跨平台（windows、linux、mac）本机桌面应用程序组成的项目，该应用程序测量用户的数据使用情况（以 KB、MB、GB 为单位）和链接连接速度（以 kbps 或 mbps 为单位） wi-fi、以太网或 3G 调制解调器连接选项。

按此顺序使用 java、python、C++ 很舒服。做了一些谷歌搜索，但我不满意。因此，我正在寻找任何关于这些语言的库和框架的建议，以使我能够完成上述任务。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:20:25.310

The task can be split into two parts:

1.  Gathering the data and storing them somewhere.
2.  Presenting them to the user.

Often [RRDtool](https://en.wikipedia.org/wiki/RRDtool) (RRD = round-robin database) is used for both parts. It depends on your requirements, you could for example use RRDtool to gather the data you need and them use some Python or Java RRD library for displaying the results.

See also:

*   [Java RRD library](https://stackoverflow.com/questions/4561876/java-rrd-library)
*   [rrd4j](https://code.google.com/p/rrd4j/)
*   [PyRRD](http://pypi.python.org/pypi/PyRRD)

# c# - 如何检查是否安装了 Oracle 客户端作为组件安装的先决条件

> ID：11984124
> 
> 赞同：2
> 
> 时间：2012-08-16T09:19:27.790
> 
> 标签：c#, windows, oracle, installation

我正在为我们的组件创建安装包。先决条件之一是目标机器上应安装最低版本 8i 的 oracle 客户端。我怎样才能做到这一点？

我在下面提到了帖子

> [确定我正在运行的 Oracle 客户端版本的最佳方法是什么？](https://stackoverflow.com/questions/1171643/whats-the-best-way-to-determine-which-version-of-oracle-client-im-running)

有了这个，我写了下面的动作。我尝试使用 tnsping 实用程序进行检查。

```
string result = string.Empty;
                System.Diagnostics.ProcessStartInfo proces = new System.Diagnostics.ProcessStartInfo("tnsping.exe");
                proces.RedirectStandardOutput = true;
                proces.CreateNoWindow = true;
                proces.UseShellExecute = false;
                System.Diagnostics.Process bufor;
                bufor = System.Diagnostics.Process.Start(proces);
                System.IO.StreamReader Output = bufor.StandardOutput;
                bufor.WaitForExit(2000);
                if (bufor.HasExited)
                {
                    result = Output.ReadToEnd();
                    result = result.ToLower();
                    if (result.Contains("64-bit"))
                    {
                        is64BitOracleClient = true;
                    }

                    int verINT = result.IndexOf("version", 0, result.Length);
                    if (verINT != null)
                    {
                        version = result.Substring(verINT + "version".Length + 1, 8);
                        Version installedVersion = new Version(version);
                        Version expectedVersion = new Version("8.1.7.0");
                        if (installedVersion >= expectedVersion)
                        {
                            isVersionMatched = true;
                        }
                    }
                } 
```

在这里我正在执行工具 tnsping。如果我收到异常

```
bufor = System.Diagnostics.Process.Start(proces); 
```

我的结论是没有安装Oracle Client。

如果此工具可用，我将得到以下结果

```
TNS Ping Utility for 64-bit Windows: Version 11.2.0.1.0 - Production on 16-AUG-2
012 06:27:58 
```

根据这个结果，我正在解析版本并验证它。

这是正确的方法吗？还有其他更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T15:41:15.500

我没有更好的答案给你，但我在我的应用程序中使用了你的解决方案，它按预期工作。

# java - 捕获先前的值以验证模拟对象

> ID：11984128
> 
> 赞同：4
> 
> 时间：2012-08-16T09:19:39.897
> 
> 标签：java, junit, mocking, mockito

在 mockito 中，是否可以捕获先前设置为传递给模拟对象方法的对象字段的值，例如被测方法执行此操作

```
 public void methodUnderTest(){
    Person person = new Person();
    person.setAge(5);
    someObject.setPerson(person);

     ...

    person.setAge(6); 
    someObject.setPerson(person);
    } 
```

我想知道的是，如果我模拟 someObject，我是否能够验证 someObject 对单个对象“人”执行了两次 setPerson，但是当 setPerson 发生时该对象的年龄值不同？我尝试使用 ArgumentCaptor，但由于我传递了同一个对象，所以我只能得到最后一个年龄。

```
 ArgumentCaptor<Integer> arg = ArgumentCaptor.forClass(Integer.class);
    verify(mockObject).setPerson(arg.capture());
    List<Integer> captureList = arg.getAllValues();
    captureList.get(0).getAge(); // returns 6
    captureList.get(1).getAge(); // returns 6 
```

我也试过做

```
 InOrder in = inOrder(mockObject);
    in.verify(mockObject).setPerson(arg.capture());
    assertEquals(5, arg.getValue().getAge()); //fails 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T09:50:36.697

不幸的是，你不能用`ArgumentCaptor`. 捕获者仅存储对参数的引用；在这种情况下，它存储了两次对同一对象*person*的引用。

您应该尝试使用`Answer`, 在每次`setPerson`调用该方法时执行正确的检查。

这个[mockito 问题](http://code.google.com/p/mockito/issues/detail?id=126)与您正在尝试做的事情有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T09:42:36.827

你不能就这样吗

```
verify(mockedList, times(1)).setPerson(eq(5));
verify(mockedList, times(2)).setPerson(eq(6)); 
```

自从我使用 mockito 以来已经有一段时间了，所以我认为这是正确的语法。

或者您是否需要出于断言以外的其他原因来捕获该值？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T10:01:37.663

我认为使用 Mockito 是不可能的。您可以重写您的代码以使其“可单元测试”或更好，方法是先编写测试，然后以 TDD 方法编写代码。

但是，如果由于某些原因您无法修改代码，则可以使用[PowerMock 功能](http://code.google.com/p/powermock/wiki/MockitoUsage13)。例如`PowerMockito.whenNew`将允许您提供一个模拟的`A`. 但不推荐这种方法。

# django - 我不能使用 django-gearman-commands 让工人一直工作

> ID：11984129
> 
> 赞同：1
> 
> 时间：2012-08-16T09:19:48.397
> 
> 标签：django, worker, python-gearman

我使用 django-gearman-commands 来做一些像这个文档（[http://pypi.python.org/pypi/django-gearman-commands/0.1](http://pypi.python.org/pypi/django-gearman-commands/0.1)）说的工作。当我第一次运行工人时，它工作得很好，但是当我提交另一份工作时，就像从数据库中进行选择查询一样，它无法工作，直到我重新启动这个工作人员，我发现工作人员一次可以正常工作。当工人不能很好地工作时，它仍然可以获得我提交的价值，但不能继续工作。我希望有一个人可以帮助我 。这是我的代码：

```
@property
def task_name(self):
    return 'sync'

def do_job(self, id):
    post = Post.objects.get(pk = id)
    if post.photo is None and post.video is None:
        try:
            self.sync_text_to_facebook(post)
        except :
            print 'sync text error'
    else:
        try:
            self.sync_photo_to_facebook(post)
        except :
            print 'sync photo error' 
```

当我第一次提交工作时，它运行良好，然后我提交另一个工作，它说找不到任何帖子。

# javascript - 防止 javascript 在移动设备上运行

> ID：11984130
> 
> 赞同：0
> 
> 时间：2012-08-16T09:20:02.760
> 
> 标签：javascript, jquery, css, media-queries

我有一个小库（[smartTab](http://techlaboratory.net/labs/SmartTab/index.htm) - 一个 jQuery 插件），它为我的网站做了一些漂亮的效果。但是，它并不适合我的移动版网站（使用媒体查询）。如何防止 smartTab 加载，或者至少可以正常工作，以便我可以按照自己喜欢的方式设置选项卡内的内容并与之交互，而 smartTab 不会影响它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T09:25:26.773

您可以使用[`window.matchMedia()`](https://developer.mozilla.org/en-US/docs/DOM/window.matchMedia)JavaScript 执行媒体查询。然后你需要做的就是将你的 JavaScript 代码包装在一个`if(...)`语句中，这样它只会（或永远不会）在媒体查询匹配时执行。

# windows-phone-7 - 在列表框中加载更多项目

> ID：11984134
> 
> 赞同：0
> 
> 时间：2012-08-16T09:20:12.377
> 
> 标签：windows-phone-7, listbox

我以前读过一些主题/问题/谷歌结果，但仍然不知道如何解决我的问题。

在我的情况下，我使用 json 并且我所做的是将 JSON 反序列化为对象。然后使用 ListboxName.ItemsSource 我将它们绑定到列表框。

问题是我的服务器只给了我 20 个顶级结果，但我也收到了指向下 20 个的链接。

从理论上讲，我想将此链接绑定到我将放在列表末尾的 LoadMore 按钮。然后呢？将新结果合并到现有的 ObservableCollection？（我假设我必须使用 ObservableCollection）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:30:45.853

创建一个

```
ObservableCollection<Items> Items {get;set;} 
```

然后在 XAML 中绑定到它并将项目添加到此集合中。它会通知一个列表框来更新一个视图。

XAML

```
<ListBox x:Name="ListboxName" ItemsSource="{Binding Items}"/> 
```

在 .cs 文件中：

```
//After you have parsed json
private void OnNewDataDownloaded(List<Items> parsedItems)
{
   foreach(var item in parsedItems)
    {
       Items.Add(item);
    }

} 
```

[在这里](https://stackoverflow.com/questions/7063268/listbox-with-load-more-option)你可以找到一种优雅的方式来添加 LoadMore 按钮

# android - 如何在加载数据之前使用进度条添加“请稍候”？

> ID：11984138
> 
> 赞同：-1
> 
> 时间：2012-08-16T09:20:21.173
> 
> 标签：android

我的整个应用程序是基于 php 连接和 mysql 数据处理。由于加载数据需要一些时间，目前用户看不到正在发生的事情，他们去点击按钮，认为没有发生任何事情，而无需等待数据加载。

作为解决方案，我想用进度条添加“请等到数据加载”。

我该如何对以下代码执行此操作。

我尝试了异步任务和教程，但无法掌握它。

谢谢你，

```
 public class Activity_YourFriendsWith_Class extends Activity {

public String PREFS_NAME = "MyPrefsFile";
public String PREFS_USERID = "prefsUserId";

private static final String TAG_Name = "fname";
private static final String TAG_LName = "lname";

String result = "";

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_yourfriendswith);

    SharedPreferences pref = getSharedPreferences(PREFS_NAME, MODE_PRIVATE);

    String userId = pref.getString(PREFS_USERID, "");

    Button back = (Button) findViewById(R.id.addback);
    back.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent intent = new Intent();
            intent.setClass(getApplication(), Activity_MyProfile_Class.class);
            startActivity(intent);
            finish();
        }
    });

    Button addfrnds = (Button) findViewById(R.id.addfrnds);
    addfrnds.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            Intent inti = new Intent();
            inti.setClass(Activity_YourFriendsWith_Class.this,
                    Activity_AddFreinds_Class.class);
            startActivity(inti);
        }
    });

    InputStream is = null;

    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("user_id", userId));
    try {
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(
                "http://hopscriber.com/friendshopscriber.php");
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();

    } catch (Exception e) {
        Log.e("log_tag", "Error in http connection " + e.toString());
    }
    // convert response to string
    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        result = sb.toString();
    } catch (Exception e) {
        Log.e("log_tag", "Error converting result " + e.toString());
    }

    ProgressTask task = new ProgressTask();
    task.execute();

}
private class ProgressTask extends AsyncTask<String, Void, Boolean> {

           private ProgressDialog pd;
        private Activity activity;

        public void LoadDataTask(Activity activity){

            this.activity = activity;
        }

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
        pd = ProgressDialog.show(activity,
                    "Please wait", "Loading datas", true);
    }

    @Override
    protected Boolean doInBackground(String... arg0) {
        // TODO Auto-generated method stub
        // parse json data
        try {

            ArrayList<HashMap<String, String>> placelist = new ArrayList<HashMap<String, String>>();
            JSONArray jArray = new JSONArray(result);
            if (jArray != null) {
                for (int i = 0; i < jArray.length(); i++) {
                    JSONObject json_data = jArray.getJSONObject(i);
                    HashMap<String, String> map = new HashMap<String, String>();

                    map.put(TAG_Name, json_data.getString("fname"));
                    map.put(TAG_LName, json_data.getString("lname"));

                    placelist.add(map);
                }
            }
            ListView list = (ListView) findViewById(R.id.frndslist);

            ListAdapter adapter = new SimpleAdapter(activity, placelist,
                    R.layout.listrow_yourfriendswith, new String[] { TAG_Name,
                            TAG_LName }, new int[] {
                            R.id.fname, R.id.lname });
            list.setAdapter(adapter);

        } catch (JSONException e1) {
            ListView list = (ListView) findViewById(R.id.frndslist);
            list.setEmptyView(findViewById(R.id.fempty));
        }
        return null;
    }

    }

} 
```

日志猫

```
08-16 16:26:52.748: E/AndroidRuntime(905): java.lang.RuntimeException: Unable to start activity ComponentInfo{hopscriber.com/hopscriber.com.Activity_YourFriendsWith_Class}: java.lang.NullPointerException
08-16 16:26:52.748: E/AndroidRuntime(905):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
08-16 16:26:52.748: E/AndroidRuntime(905):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
08-16 16:26:52.748: E/AndroidRuntime(905):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
08-16 16:26:52.748: E/AndroidRuntime(905):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
08-16 16:26:52.748: E/AndroidRuntime(905):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-16 16:26:52.748: E/AndroidRuntime(905):  at android.os.Looper.loop(Looper.java:130)
08-16 16:26:52.748: E/AndroidRuntime(905):  at android.app.ActivityThread.main(ActivityThread.java:3683)
08-16 16:26:52.748: E/AndroidRuntime(905):  at java.lang.reflect.Method.invokeNative(Native Method)
08-16 16:26:52.748: E/AndroidRuntime(905):  at java.lang.reflect.Method.invoke(Method.java:507)
08-16 16:26:52.748: E/AndroidRuntime(905):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-16 16:26:52.748: E/AndroidRuntime(905):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-16 16:26:52.748: E/AndroidRuntime(905):  at dalvik.system.NativeStart.main(Native Method)
08-16 16:26:52.748: E/AndroidRuntime(905): Caused by: java.lang.NullPointerException
08-16 16:26:52.748: E/AndroidRuntime(905):  at android.app.Dialog.<init>(Dialog.java:141)
08-16 16:26:52.748: E/AndroidRuntime(905):  at android.app.AlertDialog.<init>(AlertDialog.java:63)
08-16 16:26:52.748: E/AndroidRuntime(905):  at android.app.ProgressDialog.<init>(ProgressDialog.java:80)
08-16 16:26:52.748: E/AndroidRuntime(905):  at android.app.ProgressDialog.<init>(ProgressDialog.java:76)
08-16 16:26:52.748: E/AndroidRuntime(905):  at android.app.ProgressDialog.show(ProgressDialog.java:101)
08-16 16:26:52.748: E/AndroidRuntime(905):  at android.app.ProgressDialog.show(ProgressDialog.java:90)
08-16 16:26:52.748: E/AndroidRuntime(905):  at hopscriber.com.Activity_YourFriendsWith_Class$ProgressTask.onPreExecute(Activity_YourFriendsWith_Class.java:132)
08-16 16:26:52.748: E/AndroidRuntime(905):  at android.os.AsyncTask.execute(AsyncTask.java:391)
08-16 16:26:52.748: E/AndroidRuntime(905):  at hopscriber.com.Activity_YourFriendsWith_Class.onCreate(Activity_YourFriendsWith_Class.java:81)
08-16 16:26:52.748: E/AndroidRuntime(905):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-16 16:26:52.748: E/AndroidRuntime(905):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:24:22.420

使用带有进度对话框的 Asynctask。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T09:55:25.290

以全局对象为例，

```
public ProgressDialog progress;
     protected void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_yourfriendswith);
            progress = new ProgressDialog(this);
            ........................ 
```

代替，

```
public ProgressDialog progress = new ProgressDialog(this); 
```

它会起作用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T23:52:39.797

您的代码有几个问题：

1.  我猜你的代码失败了 - 你请求对话框显示但没有 OnCreateDialog 返回对话框显示，所以你得到：

08-16 16:26:52.748: E/AndroidRuntime(905): 引起: java.lang.NullPointerException 08-16 16:26:52.748: E/AndroidRuntime(905): 在 android.app.Dialog.(Dialog.爪哇：141））。

您需要在 Activity 类中覆盖 onCreateDialog()

```
@Override
protected Dialog onCreateDialog(int id) {

ProgressDialog progress; 
progress = new ProgressDialog(this);
progress.setMessage("Loading data, please wait");
return progress;
} 
```

2.  要开始显示对话框，请在 ProgressTask.preExecute() 中使用此代码：

    { int taskId=1; //只是例子

    显示对话框（任务 ID）；}

3.  关闭对话框 - 在 ProgressTask.postExecute() 中使用 dismissDialog(taskId);

4.  主流中的 HTTP 连接会导致异常。您必须使用 ProgressTask.doInBackground() 来执行 http 连接。

5.  您不应修改 .doInBackground 中的 UI 元素。在 AsyncTask 的 .preExecute() 和/或 .postExecute() 中修改 Activity 的 listAdapter 和其他 UI 元素。它包含在 Google 的 AsyncTask 使用教程中。

完整的代码示例涵盖了我在此处提供的所有提到的问题：[Android，synctask not shown the list after progressDialog](https://stackoverflow.com/questions/4081317/android-synctask-not-showing-the-list-after-progressdialog/13862657#13862657)

# c++ - 如何在没有getline的c ++中获取文件中的空格字符

> ID：11984141
> 
> 赞同：1
> 
> 时间：2012-08-16T09:20:33.700
> 
> 标签：c++, file

我正在使用 c++ 并逐个字符地读取文件。我使用 >> 运算符做到了这一点。但是当空间出现时，它会显示错误，因为在这种情况下它不会接受该输入。那么，如何在不使用 getline 的情况下获得空格字符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T09:27:16.513

您可以使用[std::istreambuf_iterator](http://en.cppreference.com/w/cpp/iterator/istreambuf_iterator)：

```
#include <fstream>
#include <iterator>
#include <iostream>

int main()
{
    std::ifstream file("file.txt");

    std::istreambuf_iterator<char> it(file), end;

    for (; it != end; ++it) {
        std::cout << *it;
    }
} 
```

如果您以二进制模式打开文件，在缓冲区中一次完整地读取它，然后处理它，您将获得更好的性能：

```
 #include <vector>
 #include <fstream>

 int main()
 {
      std::ifstream file("file.txt", std::ios::binary);
      file.seekg(0, std::ios::end);  // seek to the end
      std::streamsize size = file.tellg();  // get the position (file size)
      file.seekg(0, std::ios::beg);  // seek back to the beginning

      std::vector<char> buffer(size);
      file.read(&buffer[0], size);

      // do the work on vector
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T09:27:41.347

你试过使用`istream& get ( char& c );`吗？一次读取一个字符。以下示例显示了如何：

```
char c;
while ( cin.get(c) )
{
    cout << "> " << c << endl;
} 
```

运行它给出：

```
echo "hello world" | ./sing_in 
> h
> e
> l
> l
> o
>  
> w
> o
> r
> l
> d
> 
```

如果没有关于你在做什么的进一步线索，我真的不能说它是否会对你有帮助，我不理解你对使用的缄默`getline`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T09:27:03.950

如果要按字符读取文件，请不要使用`>>`.

```
ifstream File ("file.txt");
char Buffer[ARBITRARY_SIZE];
File.read(Buffer, ARBITRARY_SIZE); 
```

然后，您可以只解析缓冲区。它要快得多。它也会比`.get()`. 您可以在 Buffer 上运行所有正常的字符串操作（例如，将其转换为字符串流）。然后，所有操作都将在内存中完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T09:30:17.223

*   你可以使用`istream.get(char&)`，`istream.get()`：[http ://www.cplusplus.com/reference/iostream/istream/get/](http://www.cplusplus.com/reference/iostream/istream/get/)

或者

*   从`<iomanip>`标题 - `noskipws`：参见[http://www.cplusplus.com/reference/iostream/manipulators/noskipws/的示例](http://www.cplusplus.com/reference/iostream/manipulators/noskipws/)

# drupal - Drupal 7 上的 Drupal 商务？

> ID：11984142
> 
> 赞同：4
> 
> 时间：2012-08-16T09:20:42.123
> 
> 标签：drupal, drupal-7, drupal-commerce

Drupal Commerce 是否仅在 Drupal 7 核心上运行，

并且不支持像 Drupal 6 这样的向后核心版本？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-16T09:28:28.580

简短的回答：它不会被向后移植到 D6。

Drupal Commerce 基于（强烈依赖）drupal 7 实体系统。不可能将它反向移植到 Drupal 6。它也不在商业目标中。

顺便说一句：有一个[专门针对 drupal 问题的问答网站](https://drupal.stackexchange.com/)。考虑在此处发布与 Drupal 相关的问题。

干杯。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T16:00:41.773

[http://www.drupalcommerce.org](http://www.drupalcommerce.org)是一个很棒的网站，可用于任何 Drupal 商务。它还有一个 QA 部分。

# jquery - jQuery - 在默认事件之前执行函数

> ID：11984143
> 
> 赞同：2
> 
> 时间：2012-08-16T09:20:43.263
> 
> 标签：jquery, jqtouch

我在我的移动应用程序中使用`jQTouch`(with `jQuery`and )。`Phonegap`

我想要求用户通过输入正确的`passcode`. 现在，当我`click`在`anchor tags`...

但是当我提示输入时`passcode`，a`div`对用户可见，他应该在`passcode`那里输入他的。

现在的问题是，

当他进入时`passcode`，我想验证是否`passcode`正确。如果不是，我将显示一条错误消息（工作正常），但是如何首先验证密码然后使用`popped up box` `dissolve`or `fade`？（我不想要幻灯片动画）

我试过的是，

我已经编写了一个函数，并且在该函数中，如果密码正确，它将使用重定向到适当的 div

`window.location.href = "#mydiv";`

但它适用于滑动动画，我想要淡入淡出或溶解动画。

怎么办？

或者

有什么方法可以`function`在实际`href`更改发生之前执行？

更多代码

```
function iconClick(e,that){
    if(localAppConfig.pinRequirement.wallet==1){
        $(that).addClass('dissolve');
        $(that).attr("href",'#p2p_login');
        $("#p2p_login a").attr("href","#content_nav");
    } else {
        $(that).removeClass('pop');
        window.location.href = "#content_nav";
    }
} 
```

这是我为下一个动画设置目标的函数。

`#p2p_login`是弹出的 div，我想在其中接受密码。 中有一个按钮`#p2p_login`，单击该按钮将调用以下函数。

```
function verifyPasscode(){
    var correctCode = localAppSecurity.passcode;
    var target = $("#p2p_login a").attr('href');
    var code = $("#p2p_login .txtfldPin").val();
    if(code==correctCode){
        $("#p2p_login a").addClass('fade');
        $("#p2p_login a").attr("href",target);
        $("#p2p_login .txtfldPin").css('border','3px solid #B9D973');
        window.location.href = target; // This triggers slide animation.. How to change it?

    } else {
        $("#p2p_login .txtfldPin").css('border','3px solid red');
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:32:16.480

```
$('.something').fadeOut(500, function(){
    //function to execute after animation completes
    window.location.href = "http://google.com";
}); 
```

# extjs - sencha touch 2 应用程序的电池使用情况

> ID：11984148
> 
> 赞同：0
> 
> 时间：2012-08-16T09:21:02.127
> 
> 标签：extjs, sencha-touch-2

//嗨，我在 phonegap build 的帮助下在 sencha touch 2 框架中开发了一个应用程序。问题是我需要测试我的应用程序，以便了解我的应用程序的电池使用情况。您能否提供一些详细信息如何做到这一点以及普通应用程序的最小电池消耗是多少。我的应用程序大小在 phonegap 构建后是 2mb。因为我不希望我的应用程序耗尽手机电池。

//嘿，还有一件事是有什么方法可以检查手机的电池电量，以便我可以提醒用户电池电量不足并关闭应用程序或为手机充电。设备本身显示的电池电量低于我需要检查的电量。请在这方面为我提供适当的指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:08:21.157

To warn a user of a low battery:

```
window.addEventListener("batterylow", onBatteryLow, false);

function onBatteryLow(info)
{
    alert("Battery low! Current level " + info.level + "%"); 
} 
```

In terms of using "minimal battery consumption" it really depends on how efficient your coding is, how efficiently you manage resources, etc.

A good thing to remember though is always use a custom build of Sencha Touch to ensure only the the classes your project uses are being loaded. See:

[http://docs.sencha.com/touch/2-0/#!/guide/building](http://docs.sencha.com/touch/2-0/#!/guide/building)

# tridion - SDL Tridion 2011 UI - 加载时出现服务器错误

> ID：11984149
> 
> 赞同：2
> 
> 时间：2012-08-16T09:21:02.047
> 
> 标签：tridion, tridion-2011

加载新的 Tridion UI 页面时，消息中心会出现以下错误。

/WebUI/Models/SiteEdit/Services/Services.svc/GetSiteEditItemConfiguration 无法执行。

/WebUI/Models/TCM54/Services/General.svc/GetTridionWebSchema 无法执行。

/WebUI/Models/TCM54/Services/Blueprinting.svc/LoadBlueprintInfo 执行失败。

这些是完整的错误。

客户拥有由“Siteminder”提供的“单点登录”系统。我们需要登录才能显示弹出窗口并加载 bootstrap.apsx。这可能导致上述错误。如果是这样，我如何将 Tridion UI 与单点登录集成？

内容管理器服务器详细信息：Tridion 2011 SP1 Hotfix Rollup 1 操作系统：Microsoft Windows Server 2008 R2 SP1 Web 和应用程序服务器：Microsoft IIS 7.5 .NET Framework Microsoft：.NET Framework 4.0 Java：Java SE 6.0

内容交付服务器详细信息：Linux Tomcat

谢谢马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:31:09.187

Check out the documentation: [http://sdllivecontent.sdl.com/LiveContent/content/en-US/UIU4SDLT2011SP1/concept_59979CAA10334D61979C34C85FA7703A](http://sdllivecontent.sdl.com/LiveContent/content/en-US/UIU4SDLT2011SP1/concept_59979CAA10334D61979C34C85FA7703A)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T10:38:01.433

首先让我们检查其他一切是否正常。你能检查你是否可以访问CoreService吗？浏览器导航到

```
/webservices/CoreService.svc 
```

如果您能够访问 CoreService 页面，则很可能是 CME 本身有问题。检查它是否具有匿名身份验证并遍历`web.config`Tridion\Web 下文件夹中的所有 s，并检查您是否遵循了评论中给出的所有指示。

# oracle - oracle 顶点按钮

> ID：11984151
> 
> 赞同：3
> 
> 时间：2012-08-16T09:21:15.587
> 
> 标签：oracle, button, oracle-apex, region

是否可以在 Oracle APEX 中使用 4 个按钮设计页面（或区域），如 APEX 主页上的按钮（登录后）？

我试过了，但我不知道该怎么做。
我尝试使用自定义 HTML，使用表格和 HTML 按钮，但没有显示 HTML 按钮。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T14:11:24.407

绝对有可能，因为APEX接口本身就是内置在APEX中的！

这是带有 4 个按钮的页面的页面源代码的一部分：

```
<div class="apex-list-horizontal">
 <div class="noncurrent">
  <div class="image">
    <a href="f?p=4000:1500:1830284778179490:::::" title="Application Builder"><img src="/i/apex/builder/menu-appbuilder-128.gif" width="128" height="128" title="Application Builder" alt="Application Builder" alt="" /></a>
  </div>
  <div class="label">
    <a href="f?p=4000:1500:1830284778179490:::::" title="Application Builder">Application Builder</a>
  </div>
 </div>
 <div class="noncurrent">
  <div class="image">
    <a href="f?p=4500:3002:1830284778179490::NO:::" title="SQL Workshop"><img src="/i/apex/builder/menu-sqlws-128.gif" width="128" height="128" title="SQL Workshop" alt="SQL Workshop" alt="" /></a>
  </div>
  <div class="label">
    <a href="f?p=4500:3002:1830284778179490::NO:::" title="SQL Workshop">SQL Workshop</a>
  </div>
 </div>
 <div class="noncurrent">
  <div class="image">
    <a href="f?p=4800:4000:1830284778179490:::::" title="Team Development"><img src="/i/apex/builder/menu-teamdev-128.gif" width="128" height="128" title="Team Development" alt="Team Development" alt="" /></a>
  </div>
  <div class="label">
    <a href="f?p=4800:4000:1830284778179490:::::" title="Team Development">Team Development</a>
  </div>
 </div>
 <div class="noncurrent">
  <div class="image">
    <a href="f?p=4350:1:1830284778179490:::::" title="Administration"><img src="/i/apex/builder/menu-admin-128.gif" width="128" height="128" title="Administration" alt="Administration" alt="" /></a>
  </div>
  <div class="label">
    <a href="f?p=4350:1:1830284778179490:::::" title="Administration">Administration</a>
  </div>
 </div>
</div> 
```

每个按钮都像这样的片段：

```
 <div class="noncurrent">
  <div class="image">
    <a href="f?p=4000:1500:1830284778179490:::::" title="Application Builder"><img src="/i/apex/builder/menu-appbuilder-128.gif" width="128" height="128" title="Application Builder" alt="Application Builder" alt="" /></a>
  </div>
  <div class="label">
    <a href="f?p=4000:1500:1830284778179490:::::" title="Application Builder">Application Builder</a>
  </div>
 </div> 
```

因此，您可以创建一个类似于以下内容的按钮模板：

```
 <div class="noncurrent">
  <div class="image">
    <a href="#LINK#" title="Application Builder"><img src="/myImages/#BUTTON_ATTRIBUTES#" width="128" height="128" title="#LABEL#" alt="#LABEL#" alt="" /></a>
  </div>
  <div class="label">
    <a href="#LINK#" title="#LABEL#">#LABEL#</a>
  </div>
 </div> 
```

在每个按钮中，您将定义标签、链接 URL，我假设您可以使用“按钮属性”来保存图像名称。

实现此目的的另一种方法是将按钮定义（标签、URL、图像位置）保存在表格中并创建如下报告：

```
select label, url, image_loc
from mybuttons
where ...; 
```

现在您可以构建一个报告模板（“行模板”样式），其中每一行都有模板：

```
 <div class="noncurrent">
  <div class="image">
    <a href="#URL#" title="Application Builder"><img src="#IMAGE_LOC#" width="128" height="128" title="#LABEL#" alt="#LABEL#" alt="" /></a>
  </div>
  <div class="label">
    <a href="#URL#" title="#LABEL#">#LABEL#</a>
  </div>
 </div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T22:53:00.103

您可以创建一个列表（共享组件），并使用“带标签的水平图像”模板。将您的图像上传到#WORKSPACE_IMAGES#，并为每个列表条目，在“图像”字段中选择适当的图像。

如果您创建 Page 0 并在其中添加此列表区域，它将出现在应用程序的每个页面上。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T15:02:56.677

此菜单是使用**共享组件->导航->列表**功能构建的。

查看此文档：[http ://docs.oracle.com/cd/E17556_01/doc/user.40/e15517/nav.htm#CHDEEFAB](http://docs.oracle.com/cd/E17556_01/doc/user.40/e15517/nav.htm#CHDEEFAB)

或 APEX 3.2 的此文档：http: [//docs.oracle.com/cd/E14373_01/appdev.32/e13363/issue_track_ui.htm#BGBIICHF](http://docs.oracle.com/cd/E14373_01/appdev.32/e13363/issue_track_ui.htm#BGBIICHF)

# mysql - 如果记录不在 MySQL 的第二个表中，如何查询两个表并返回 NULL？

> ID：11984158
> 
> 赞同：3
> 
> 时间：2012-08-16T09:21:26.747
> 
> 标签：mysql, select, left-join, multiple-tables

我正在运行`MySQL 5.0.88`，需要从两个名为`articles`和的表中选择数据`media`。

将图像上传到我的服务器时，我需要查询用户的所有文章，并查看媒体表（字段）中是否已经指定了路径，`type="img"`以避免运行不必要的覆盖。

我曾希望只`m.type`在我的查询中包含，但我无法让它工作。

我的查询如下所示：

```
SELECT DISTINCT a.style, a.filename, a.path, m.type
    FROM articles AS a
    LEFT JOIN mnedia AS m
       ON a.iln = m.iln
    WHERE
       a.iln = id_12345
       AND m.type = "img"
       AND m.type IS NOT NULL 
```

这给了我用户 id_12345 的所有文章（正确），但该`type`字段始终是`img`尽管媒体表只有一条记录 article `abc`。

**问题**：
我需要如何查询，所以它返回一个用户（工作）显示`type=NULL`的所有文章，这些文章没有在表格中列出`media`，`type="img"`对于在表格中列出的文章`media`（例如`abc`）？

感谢帮助！

**编辑**：表`articles`可能包括记录：

```
abc 
d
e
f
g 
```

表`media`可能包括

```
abc type=img 
```

查询应返回：

```
abc type=img
d type=NULL
e type=NULL
f type=NULL
g type=NULL 
```

**编辑**：
我也不介意获取所有`articles`不在其中的记录`media`，例如在[这张](http://www.theprogrammersguide.com/wp-content/uploads/2012/04/mysql-join-qery-subquery.jpg)图片上，第二次加入左侧（“b.Key IS NULL）

**解决方案：** 好的。加入两个表时，我需要检查除 user_id 之外的另一个字段。这是它的工作原理：

```
SELECT DISTINCT a.style, a.filename, a.path, m.type
    FROM articles AS a
    LEFT JOIN mnedia AS m
       ON a.iln = m.iln
       AND a.style= m.style
    WHERE
       a.iln = id_12345
       AND ( m.type = "img" OR m.type IS NULL ) 
```

谢谢大家的建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T09:25:29.160

你应该把`m.type = "img"`条件放在`LEFT JOIN`而不是把它放在`WHERE`子句中：

```
SELECT DISTINCT a.style, a.filename, a.path, m.type
FROM articles AS a
     LEFT JOIN mnedia AS m
         ON a.iln = m.iln
            AND m.type = "img"
WHERE a.iln = id_12345; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T09:25:07.210

我认为只需稍微调整您的 where 子句就足够了：

```
WHERE
       a.iln = id_12345
       AND (
              m.type = "img"
              OR m.type IS NULL
           ) 
```

由于 "img" 和 NULL 是您要查找的两个值

# java - Java architecture issue for extending instances (need for a pattern recommendation)

> ID：11984165
> 
> 赞同：0
> 
> 时间：2012-08-16T09:21:41.033
> 
> 标签：java, design-patterns, inheritance, dynamic, extend

A service from external API which I am not allowed to modify returns me

```
 MyClass instance = ServiceUtil.getThing(); 
```

I would like to extend this returned class and Add/Override a method but leave intacts the others, say 150 methods.

```
 private class MyWrapperClass extends MyClass(){
      public MyWrapperClass(){super();}
      @Override public String toString(){ return "Blocked toString"; }
  } 
```

Is there any way to force this "casting" from the returned MyClass instance to my newly particular subtype??

NOTE: Please, not suggest the approach of making a constructor, passing the original object and having to copy and implement the 150 methods to call the wrapped object

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T09:30:44.713

If MyClass is an interface look at [java.lang.reflect.Proxy](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/reflect/Proxy.html) and [java.lang.reflect.InvocationHandler](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/reflect/InvocationHandler.html).

You can implement a *dynamic* proxy that always does the same. It is, always pass control to your original implementation... except when method X is invoked.

Something like:

```
class MyHandler implements InvocationHandler {
  Object invoke(Object proxy, Method method, Object[] args) {
    if (method is the one you want to change) {
       do whatever
    else
       return method.invoke(originalObject, args);
  }
} 
```

**Note:** you must create this proxy implementation anyway:

```
MyClass original = ServiceUtil.getThing();
MyClass proxy = (MyClass) Proxy.newProxyInstance(
                                          MyClass.class.getClassLoader(), // classloader to use
                                          new Class[] { MyClass.class }, // interfaces to implement
                                          new MyHandler()); // who does the dirty work when methods are invoked 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T09:44:47.573

I hope I get you right: you have a

```
MyClass instance = ServiceUtil.getThing(); 
```

but want something like

```
MyWrapperClass instance = (MyWrapperClass) ServiceUtil.getThing(); 
```

(which obviously doesn't work, even though `MyWrapperClass` extends `MyClass`).

The solution is to create a new instance of `MyWrapperClass` based on the `MyClass` and, sorry to say that, using the constructor is a good approach (`public MyWrapperClass(MyClass myClass)`).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T09:26:05.700

> Please, not suggest the approach of making a constructor, passing the original object and having to copy and implement the 150 methods to call the wrapped object

You mean to say that "decoration" is not an option you would like to look at right?

But decoration will be a problem to you if MyClass is an interface type where you have to define those 150 odd methods, delegating the 149 method calls onto the decorated and overriding that one method.

If MyClass is a class type, then you don't need to write those 149 methods, right? or Did I get you completely wrong?

# java - 自执行 jar 和外部属性文件

> ID：11984167
> 
> 赞同：0
> 
> 时间：2012-08-16T09:21:46.187
> 
> 标签：java, jar

假设我有一个可执行 jar 文件的 MANIFEST.MF 的以下摘录：

```
Manifest-Version: 1.0
Main-Class: com.intersportleitner.skischule.gui.window.SkischulApplicationWindow
Class-Path: .
... 
```

不应该有这样的目录结构：

```
Appdir
  |- bla.jar (self-executable)
  |- x.properties
  |- y.properties 
```

因为如果我尝试使用以下代码片段加载属性，我会得到一个 IOException: Stream closed in properties.load(stream)：

```
Properties properties = new Properties();
InputStream istream=SkischulApplicationWindow.class.getClassLoader().getResourceAsStream("y.properties");
BufferedInputStream stream = new BufferedInputStream(istream);
properties.load(stream);
stream.close(); 
```

该异常有点误导，因为实际上 istream 为空（指出当我尝试调用 istream 的方法以进行测试时......），所以找不到属性文件，我不知道为什么它会失败，因为根据到[Executable jar 将找不到](https://stackoverflow.com/questions/4126030/executable-jar-wont-find-the-properties-files)它应该以这种方式工作的属性文件......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T09:36:24.490

`getResource`并且`getResourceAsStream`依赖于类加载器实现和类路径。

我倾向于只在寻找嵌入式资源时使用这种方法，但这只是我

你“可以”尝试

```
InputStream istream=SkischulApplicationWindow.class.getClassLoader().getResourceAsStream("/y.properties"); 
```

反而

# iphone - 带有 View iOS 的动画

> ID：11984171
> 
> 赞同：-2
> 
> 时间：2012-08-16T09:22:15.900
> 
> 标签：iphone, objective-c, ios, animation

我是 iOS 开发的新手。有人可以帮助我吗？我有观点：

.h 文件：

```
 UIView *secondView; 
```

.m 文件：

```
- (void)viewDidLoad
{
 [super viewDidLoad];

 [secondView setFrame: CGRectMake(100,60,30,30)];
 [self.view addSubview:secondView];

} 
```

如何通过按下按钮 secondView 来实现全屏动画？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:31:04.647

点击时，您可以使用缩小动画动态更改按钮框架。:)
您可以通过以下代码了解：

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{

    [UIView animateWithDuration:1 animations:^{
        zoomerView.transform = CGAffineTransformScale(zoomerView.transform, 1.2, 1.2);
    }];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T11:54:22.440

我找到了我的问题的答案：在 viewDidLoad 方法中需要添加为带有框架的子视图第二个视图

```
[secondView setFrame: CGRectMake(10,20,90,90)]; 
```

并且在 touchesBegan 方法中需要添加：

```
 [UIView beginAnimations:nil context:nil];
 [UIView setAnimationDuration:1];     

 [secondView setFrame: CGRectMake(0,0,320,480)];

 [UIView setAnimationBeginsFromCurrentState:YES];
 [UIView commitAnimations]; 
```

That's all. Thanks all for help!

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-16T09:32:50.577

首先从我能理解的，有一个`UIScrollView`拿着各种图像的。当您单击图像时，它会放大。实际上，这可以通过动画或不使用动画来完成。对于动画，使用缩小方法。没有它，只需显示`UIImageView`放大的相同图像，使用它然后保存它......说起来容易做起来难。

# sitecore - Sitecore 限制对网页的访问

> ID：11984172
> 
> 赞同：2
> 
> 时间：2012-08-16T09:22:16.557
> 
> 标签：sitecore, sitecore6

我正在开发一个使用 Sitecore CMS 的网站。已创建具有受限访问权限的 Intranet Webpart。

在这个 Intranet 中，我创建了一个只对 1 个角色可见的新页面。我创建了新角色。我试图在内容编辑器（安全->分配）中弄乱页面的安全性。我发布了更改。但无论我做什么，它似乎都没有任何效果。

任何指导将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T09:44:18.117

打开 sitecore 桌面 ( `http://yoururl/sitecore/shell`)，单击“sitecore”按钮，然后单击“安全工具”和“安全编辑器”。

在功能区中选择“匿名用户”帐户，单击树中所选页面，然后单击“读取”附近的“x”。

然后单击功能区中的“选择”并选择适当的角色。再次选择所选节点并允许角色的“读取”权限。

完成后，您可以使用“访问查看器”应用程序（同样是桌面上的站点核心按钮和安全工具）检查权限是否设置正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T09:38:04.847

诀窍可能是拒绝`extranet\Anonymous`用户访问，然后授予角色访问权限。我喜欢为此使用访问查看器或安全编辑器，而不是内容编辑器，因为它可以为您提供更好的概览。

确保充分利用继承，这样您就不必单独为每个项目设置安全性，而是在站点的根目录（如果可能）。

我建议您查看 Sitecore 安全管理员手册：http: [//sdn.sitecore.net/upload/sitecore6/securityadministratorscookbook-usletter.pdf](http://sdn.sitecore.net/upload/sitecore6/securityadministratorscookbook-usletter.pdf)

# c# - 在循环外添加一个 Console.WriteLine() 会改变循环的时间 - 为什么？

> ID：11984176
> 
> 赞同：14
> 
> 时间：2012-08-16T09:22:25.743
> 
> 标签：c#

考虑以下代码：

```
using System;
using System.Diagnostics;

namespace Demo
{
    class Program
    {
        static void Main(string[] args)
        {
            Stopwatch sw = new Stopwatch();

            for (int trial = 0; trial < 4; ++trial)
            {
                sw.Restart();
                loop1();
                Console.WriteLine("loop1() took " + sw.Elapsed);

                sw.Restart();
                loop2();
                Console.WriteLine("loop2() took " + sw.Elapsed);

                sw.Restart();
                loop3();
                Console.WriteLine("loop3() took " + sw.Elapsed);

                // Console.WriteLine(); // <-- Uncomment this and the timings change a LOT!
            }
        }

        static void loop1()
        {
            bool done = false;

            for (int i = 0; i < 100000 && !done; ++i)
            {
                for (int j = 0; j < 100000 && !done; ++j)
                {
                    for (int k = 0; k < 2; ++k)
                    {
                        if (i == 9900)
                        {
                            done = true;
                            break;
                        }
                    }
                }
            }
        }

        static void loop2()
        {
            for (int i = 0; i < 100000; ++i)
            {
                for (int j = 0; j < 100000; ++j)
                {
                    for (int k = 0; k < 2; ++k)
                    {
                        if (i == 9900)
                        {
                            goto exit;
                        }
                    }
                }
            }

        exit: return;
        }

        static void loop3()
        {
            for (int i = 0; i < 100000; ++i)
            {
                for (int j = 0; j < 100000; ++j)
                {
                    for (int k = 0; k < 2; ++k)
                    {
                        if (i == 9900)
                        {
                            k = 2;
                            j = 100000;
                            i = 100000;
                        }
                    }
                }
            }
        }
    }
} 
```

当我使用 Visual Studio 2010 在 Windows 7 x64 上编译并运行此版本的 RELEASE x86 版本时，我得到以下时序（在 Intel Core i7 上运行）

```
loop1() took 00:00:01.7935267
loop2() took 00:00:01.4747297
loop3() took 00:00:05.6677592
loop1() took 00:00:01.7654008
loop2() took 00:00:01.4818888
loop3() took 00:00:05.7656440
loop1() took 00:00:01.7990239
loop2() took 00:00:01.5019258
loop3() took 00:00:05.7979425
loop1() took 00:00:01.8356245
loop2() took 00:00:01.5688070
loop3() took 00:00:05.7238753 
```

这本身就很奇怪 - 为什么 loop3() 会比其他循环慢得多？无论如何，然后我取消注释指示的行（Console.WriteLine()），我的时间变成：

```
loop1() took 00:00:01.8229538
loop2() took 00:00:07.8174210
loop3() took 00:00:01.4879274

loop1() took 00:00:01.7691919
loop2() took 00:00:07.4781999
loop3() took 00:00:01.4810248

loop1() took 00:00:01.7749845
loop2() took 00:00:07.5304738
loop3() took 00:00:01.4634904

loop1() took 00:00:01.7521282
loop2() took 00:00:07.6325186
loop3() took 00:00:01.4663219 
```

现在 loop2() 慢得多，而 loop3() 快得多。我觉得这个最好奇...

所以我有两个问题：

1.  其他人可以复制这个吗，和
2.  如果是这样，任何人都可以解释一下吗？

[编辑] 我应该补充一点，我可以用秒表验证这些时间，并且我正在从命令行运行测试程序（因此我们可以排除 Visual Studio 干扰它）。

附录：

我对程序进行了如下修改，以排除 JITTER 正在优化循环的可能性：

```
using System;
using System.Diagnostics;
using System.Text;

namespace Demo
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine(test());
        }

        static string test()
        {
            Stopwatch sw = new Stopwatch();
            int total = 0;
            StringBuilder builder = new StringBuilder();

            for (int trial = 0; trial < 2; ++trial)
            {
                sw.Restart();
                total += loop1();
                builder.AppendLine("loop1() took " + sw.Elapsed);

                sw.Restart();
                total += loop2();
                builder.AppendLine("loop2() took " + sw.Elapsed);

                sw.Restart();
                total += loop3();
                builder.AppendLine("loop3() took " + sw.Elapsed);
                //builder.AppendLine(); // Uncommenting this line makes a big difference!
            }

            builder.AppendLine(total.ToString());

            return builder.ToString();
        }

        static int loop1()
        {
            bool done = false;
            int total = 0;

            for (int i = 0; i < 100000 && !done; ++i)
            {
                for (int j = 0; j < 100000 && !done; ++j)
                {
                    for (int k = 0; k < 2; ++k)
                    {
                        if (i == 9900)
                        {
                            done = true;
                            break;
                        }

                        ++total;
                    }
                }
            }

            return total;
        }

        static int loop2()
        {
            int total = 0;

            for (int i = 0; i < 100000; ++i)
            {
                for (int j = 0; j < 100000; ++j)
                {
                    for (int k = 0; k < 2; ++k)
                    {
                        if (i == 9900)
                        {
                            goto exit;
                        }

                        ++total;
                    }
                }
            }

        exit: return total;
        }

        static int loop3()
        {
            int total = 0;

            for (int i = 0; i < 100000; ++i)
            {
                for (int j = 0; j < 100000; ++j)
                {
                    for (int k = 0; k < 2; ++k)
                    {
                        if (i == 9900)
                        {
                            k = 2;
                            j = 100000;
                            i = 100000;
                        }
                        else
                        {
                            ++total;
                        }
                    }
                }
            }

            return total;
        }
    }
} 
```

现在我的结果如下：

builder.AppendLine() 注释掉：

```
loop1() took 00:00:06.6509471
loop2() took 00:00:06.7322771
loop3() took 00:00:01.5361389
loop1() took 00:00:06.5746730
loop2() took 00:00:06.7051531
loop3() took 00:00:01.5027345
-1004901888 
```

builder.AppendLine() 未注释掉：

```
loop1() took 00:00:06.9444200
loop2() took 00:00:02.8960563
loop3() took 00:00:01.4759535

loop1() took 00:00:06.9036553
loop2() took 00:00:03.1514154
loop3() took 00:00:01.4764172

-1004901888 
```

当我这样做时，请注意 loop2() 时间的差异。不计算！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T11:21:04.857

我可以准确地复制它。另外，我可以像这样使方差消失：

```
 private static void Main(string[] args)
    {
        Stopwatch sw = new Stopwatch();

        for (int trial = 0; trial < 4; ++trial)
        {
            sw.Restart();
            Interlocked.MemoryBarrier();
            loop1();
            Interlocked.MemoryBarrier();
            Console.WriteLine("loop1() took " + sw.Elapsed);

            sw.Restart();
            Interlocked.MemoryBarrier();
            loop2();
            Interlocked.MemoryBarrier();
            Console.WriteLine("loop2() took " + sw.Elapsed);

            sw.Restart();
            Interlocked.MemoryBarrier();
            loop3();
            Interlocked.MemoryBarrier();
            Console.WriteLine("loop3() took " + sw.Elapsed);

            // Console.WriteLine(); // <-- Uncomment this and the timings don't change now.
        }
    } 
```

当我使用 MemoryBarriers 运行时，无论以哪种方式运行测试，我都会得到第二种模式：

```
loop1() took ~1 sec
loop2() took ~7 secs
loop3() took ~1 sec 
```

MemoryBarrier 定义：

> 同步内存访问如下：执行当前线程的处理器不能以这样的方式重新排序指令，即调用 MemoryBarrier 之前的内存访问在调用 MemoryBarrier 之后的内存访问之后执行。

Since the IL for the loops is identical between the 2 versions, and MemoryBarrier makes the variance disappear, I think we can conclude the variance is definitely the result of an optimization on the first pattern... maybe by the JITer... maybe by the CPU... not sure there.

My environment is the same, except I am using VS2012 & .NET 4.5 RTM.

# android - listview 的项目被重复

> ID：11984178
> 
> 赞同：0
> 
> 时间：2012-08-16T09:22:39.253
> 
> 标签：android, listview

1.运行这个app，listview显示包名和ico，但是不正常。该项目是重复的。任何人都可以帮我指出我的代码有什么问题吗？

```
/**show the packageinfo.*/
public class MainForm extends Activity {
    PackageManager pm; 
    ListView applist; 
    List<PackageInfo> appInfo; 
    ImageView itemImage; 
    TextView appName;  

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        applist = (ListView) findViewById(R.id.applist);
        pm = getPackageManager();
        appInfo = (List<PackageInfo>) pm.getInstalledPackages(0);
        applist.setAdapter(new MyAdapter());
    }

    private class MyAdapter extends BaseAdapter {
        private LayoutInflater mInflater;       
        public MyAdapter() {
            // TODO Auto-generated constructor stub
            this.mInflater=LayoutInflater.from(MainForm.this);
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {

            View v = null;
            if (convertView == null) {
                LayoutInflater li =mInflater;
                v = li.inflate(R.layout.layout_applist, null);

                itemImage = (ImageView) v.findViewById(R.id.item_icon);//get the imageview
                appName = (TextView)v.findViewById(R.id.packname);//get the textview
            } else {
                v = convertView;
            }

            itemImage.setBackgroundDrawable(((PackageInfo)getItem      (position)).applicationInfo.loadIcon(pm)); 
            appName.setText(((PackageInfo)getItem(position)).applicationInfo.loadLabel(pm).toString()); 

            return v;
        }

        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return appInfo.size();
        }
        @Override
        public Object getItem(int position) {
            // TODO Auto-generated method stub
            return appInfo.get(position);
        }
        @Override
        public long getItemId(int position) {
            // TODO Auto-generated method stub
            return position;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:33:20.293

从我的脑海中，看起来你已经定义了 v 两次然后它返回 v 因此重复的列表。

# php - 如何在问题表中获得未回答的问题？

> ID：11984180
> 
> 赞同：1
> 
> 时间：2012-08-16T08:05:40.640
> 
> 标签：php, mysql, sql, mysql5

我有两张桌子

```
question
------------------------------
qid  |  qname  |  description
------------------------------
1      ssc?       blabla

2      BIE        blabla

3      msc        blabla

answer
----------------------------
aid  | uid  | qid | answered_on
-------------------------------
1      1      1     ssc means

2      2      1     ssc
------------------------------- 
```

现在我想得到未回答的问题如何编写查询？你能告诉任何人吗？

```
i get the result like 

qid | qname
-----------
2     BIE
3     msc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:15:28.930

```
SELECT qid, qname FROM question 
WHERE qid NOT IN (SELECT DISTINCT qid FROM answer) 
```

虽然不是真正的服务器故障问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T08:18:05.650

```
select * from  users as ru left join answers as ra on ru.uid=ra.uid 
left join questions as rq on rq.uid=ru.uid 
where   rq.qid not in(select qid from answers) group by rq.qid order by rq.qid desc 
```

如果您有用户表，这可能很有用

# c# - 用正则表达式替换文本

> ID：11984183
> 
> 赞同：-2
> 
> 时间：2012-08-16T09:22:40.500
> 
> 标签：c#, asp.net, .net, regex, .net-4.0

我有以下字符串：

```
 This is my testasdasd  [Test(XYZ="P")] abc sdfsdf
    This is my testasdasd  [Test(ABC="P")] sdfsdf
    This is my testdfsdfsdf  [Test(DEF="P")] sdfsdfs
    This is my testsdfsdfsdf  [Test(GHI="P")] asdfasdasd 
```

我想要在上述字符串的“）”后添加“，Hello”文本。我的输出应该是这样的：

```
This is my testasdasd [Test(XYZ="P"), Hello] abc sdfsdf
This is my testasdasd [Test(ABC="P"), Hello] sdfsdf
This is my testdfsdfsdf [Test(DEF="P"), Hello] sdfsdfs
This is my testsdfsdfsdf  [Test(GHI="P"), Hello] asdfasdasd 
```

你能帮我制作正则表达式吗？

编辑：我不能通过查找和替换“]”来完成上述操作，我的字符串中也有其他括号。我需要找到 [Test(..)] 并且输出应该是 [Test(...) , Hello]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:46:57.383

试试这个正则表达式：

```
(\[Test\([^\)]*\))\] 
```

用。。。来代替

```
$1, Hello] 
```

你的代码可以是这样的：

```
var result = Regex.Replace(inputString, @"(\[Test\([^\)]*\))\]", "$1, Hello]"); 
```

或者这个简单的替换：

```
var result = inputString.replace( "]", ", Hello]" ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T09:45:53.567

```
function insert(string, word) {
    return string.replace(/\[Test\(.+\)\]/g, function(a, b) {
        return a.replace("]", ", " + word + "]");
    });
}

insert('This is my testasdasd  [Test(XYZ="P")] abc sdfsdf', "Hello"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T09:27:36.900

`(?<=\[Test\(\w+?="P"\))\]`用字符串替换正则表达式`, Hello]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T09:32:35.147

如果您不想使用正则表达式，请尝试以下操作：

```
String newString = yourString.replace( "]", ", Hello]" ); 
```

如果您的字符串中只有一个“]”，这只会正常工作..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T09:32:56.213

您可以尝试使用查找表达式：

```
@"(\[\s*Test\s*\(.*?\)\s*)\]" 
```

这个替换表达式：

```
"$1,Hello]" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-16T09:36:09.607

如果内容是静态的。试试`string.replace`就行了。我的观点 ：）

# html - 导航栏中的项目不会随着最小化浏览器而移动

> ID：11984185
> 
> 赞同：1
> 
> 时间：2012-08-16T09:22:42.003
> 
> 标签：html, css, twitter-bootstrap, twitter-bootstrap-rails

我正在使用 twitter 引导导航栏，当我将浏览器最小化到某个小尺寸并滚动到最终列表项时，列表项会显示在导航栏中。这是如下所示。

**浏览器最大化时的导航栏：**

> ![在此处输入图像描述](../Images/0f01d6b7ceab587f8fd44d1804ad6f14.png)

**浏览器最小化时的导航栏：**

> ![在此处输入图像描述](../Images/b3d6b9e985bff221e8b5a9c6c86aeeaa.png)

即使浏览器最小化，我也希望将项目固定在导航栏上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:28:00.407

[http://davidwalsh.name/demo/css-fixed-position.php](http://davidwalsh.name/demo/css-fixed-position.php)

像这样的东西？（黄色方框写着“无论你去哪里，我都会找到你！”）

如果是，则将位置更改为固定导航。

```
position:fixed; 
```

（CSS）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T09:56:11.547

**将min-width**定义为您的`Navbar`. 例如这样写：

```
.Navbar{
 min-width:1000px;
} 
```

# vim - 如何在 Vim 上使用 C-] 和 taglist

> ID：11984186
> 
> 赞同：1
> 
> 时间：2012-08-16T09:22:45.127
> 
> 标签：vim, ctags, taglist

我在 Windows 上有带有 taglist 和 ctags 5.8 的 gVim 7.3。Taglist 运行良好（无需自己生成标签文件），我可以在标签窗口中看到当前缓冲区的标签并转到其中任何一个等。

但是我知道我应该也可以`C-]`在编辑器中使用光标下的声明，这不起作用，它一直说

```
E433: No tags file
E426: tag not found: myMethod     **strong text** 
```

我应该怎么做才能使用`C-]`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T10:00:54.293

`<C-]>`TagList 是一个完全独立于 Vim和相关命令的第三方插件。因为它不生成`tags`文件，甚至不使用`tags`文件，所以它在自己的气泡中运行。

`<C-]>`是一个本机 Vim 命令，它使用`tags`您需要使用类似命令生成的文件，`:!ctags -R .`并且您必须确保 Vim 知道该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T09:39:02.023

你的错误信息意味着你需要告诉 VIM 你的标签文件在哪里。尝试

```
set tags="your file name" 
```

您可以指定多个文件名，使用逗号作为分隔符

顺便说一句，C-] 的另一种选择是 g-]。它不会立即跳转，而是显示不同匹配项的列表。

# vim - 删除文件夹时启动时的 gvim chdir

> ID：11984188
> 
> 赞同：0
> 
> 时间：2012-08-16T09:22:50.383
> 
> 标签：vim, vim-plugin

我可以打开一个 gvim 会话并拖放一个文件夹，同时按住`shift`键以更改`pwd`为已删除的文件夹。这工作正常，但我想知道是否可以在不先打开 gvim 的情况下做同样的事情（我可以​​在桌面上的 gvim 图标上放置一个文件夹以启动与给定文件夹的 gvim 会话，但它甚至不会更改工作目录当我按住 shift 键时）。

如果相关，我使用的是`ubuntu`带有`unity`桌面的系统，还有`NERDTree plugin`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T09:29:06.120

将此添加到您的`.vimrc`：

```
au VimEnter * if isdirectory(expand('%')) | cd % | endif 
```

# actionscript-3 - 在我的 3D 旋转菜单 (as3) 中反转 y 轴

> ID：11984191
> 
> 赞同：3
> 
> 时间：2012-08-16T09:23:19.323
> 
> 标签：actionscript-3, flash, 3d

我在制作这个 3D 旋转菜单时遇到了问题。我的代码看起来像这样。

```
import flash.events.Event;

addEventListener(Event.ENTER_FRAME, onEnterFrame);

function onEnterFrame(event:Event):void
{
    anim.rotationX += ((stage.mouseY - stage.stageHeight/2)-anim.rotationX*20) * 0.009;
    anim.rotationY += ((stage.mouseX - stage.stageWidth/4)-anim.rotationY*20)  * 0.009;
} 
```

但我不知道如何使 y 轴倒置，所以影片剪辑在 y 轴上反向移动

谁能帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:05:08.893

更改此行：

```
anim.rotationY += ((stage.mouseX - stage.stageWidth/4)-anim.rotationY*20)  * 0.009; 
```

至：

```
anim.rotationY -= ((stage.mouseX - stage.stageWidth/4)-anim.rotationY*20)  * 0.009; 
```

# excel - 使用powershell脚本删除excel（.xls）中的重复行

> ID：11984194
> 
> 赞同：1
> 
> 时间：2012-08-16T09:23:25.587
> 
> 标签：excel, powershell, duplicate-removal

我遇到了脚本问题。我需要删除我的 XLS 文件中的所有重复行。这是我的脚本：

```
sdsfsdf
$out_fcalias = "D:\scripts\SAN\Out_fcAlias.txt"
$out_flogi = "D:\scripts\SAN\Out_flogi.txt" 
$out_zone = "D:\scripts\SAN\Out_zone.txt"
$out_zoneact = "D:\scripts\SAN\Out_zoneactive.txt"
$Final_Report= "D:\Scripts\SAN\Report_test.xls"

# Params
$i = "" 
$tmp_splitArray = ""
$tmp_SwitchName = ""
$tmp_FabricName = ""
$tmp_ZoneName = ""
$tmp_Fcid = ""
$tmp_WWNName = ""
$tmp_Output = ""

# create xls
$XLS = new-object -comobject excel.application 
$XLS.Visible = $True 
$XLS_File = $XLS.Workbooks.Add() 
$XLS_Sheet = $XLS_File.Worksheets.Item(1) 
$XLS_Sheet.Name = "Report"
$XLS_Sheet.Cells.Item(1,1) = "Fabric" 
$XLS_Sheet.Cells.Item(1,2) = "Zone" 
$XLS_Sheet.Cells.Item(1,3) = "Fcid" 
$XLS_Sheet.Cells.Item(1,4) = "WWN" 
$XLS_Sheet.Cells.Item(1,5) = "Switch"
$XLS_Sheet.Cells.Item(1,6) = "FCID"
$XLS_Sheet.Cells.Item(1,7) = "Port Name"
$XLS_Sheet.Cells.Item(1,8) = "Node Name"
$XLS_Sheet.Cells.Item(1,9) = "Alias"
$XLS_LineCounter = 2 

$a = get-content $out_zoneact

foreach ( $i in $a)
    { 
    if ($i -match "Fabric") { $tmp_FabricName = $i}
    if ($i -match "zone name") 
        { 
        $tmp_splitArray = [regex]::split($i, " ") 
        $tmp_ZoneName = $tmp_splitArray[2]
        }
    if ($i -match " fcid ") 
        { 
        $tmp_splitArray = [regex]::split($i, " ")
        $tmp_Fcid = $tmp_splitArray[2]
    }
if ($i -match "pwwn")
    {
    $tmp_splitArray = [regex]::split($i, " ")
    $tmp_WWNName = $tmp_splitArray[4]
    $XLS_Sheet.cells.item($XLS_LineCounter,1) = $tmp_FabricName
    $XLS_Sheet.cells.item($XLS_LineCounter,2) = $tmp_ZoneName
    $XLS_Sheet.cells.item($XLS_LineCounter,3) = $tmp_Fcid
    $XLS_Sheet.cells.item($XLS_LineCounter,4) = $tmp_WWNName.Substring(0,$tmp_WWNName.Length-1)
    $XLS_LineCounter = $XLS_LineCounter + 1
    }
}
#autofit
$objRange = $XLS_Sheet.UsedRange 
[void] $objRange.EntireColumn.Autofit() 

$XLS_File.SaveAs($Final_Report) 
$XLS_File.Close()
$XLS.Quit() 
```

所以我有很多重复的行，我需要以编程方式摆脱它们，所以我可以把它放在我的脚本中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T22:43:50.500

之后`# autofit`，插入

```
$XLS_Sheet.UsedRange.RemoveDuplicates() 
```

应该可以工作，如[MSDN中所提供](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.excel.namedrange.removeduplicates.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-11T11:48:20.417

很抱歉更新了一个旧线程，但我花了一段时间才弄清楚为什么这不起作用。关于 Mat M 的解决方案，我发现您需要将数组中的列索引指定为参数。

```
$cols = 1,2,3,4,5,6,7,8,9    
$XLS_Sheet.UsedRange.RemoveDuplicates($cols) 
```

# php - 如果 ID 存在于其他表中，则显示 null

> ID：11984195
> 
> 赞同：1
> 
> 时间：2012-08-16T09:23:26.017
> 
> 标签：php, mysql, sql, phpmyadmin

我制作了一个对话系统，其中显示了您进行过的对话的列表。您可以删除（隐藏）一条消息。

问题是，当所有消息都被隐藏时，它会显示（显然？）随机消息。它不应显示名称或任何内容。

这是 SQL 查询：

```
SELECT * FROM
(SELECT * FROM post ORDER BY datotid DESC) as inv
WHERE fk_bruger_til = '$brugerid'
GROUP BY fk_bruger_fra
ORDER BY datotid DESC 
```

以及数据库结构：

留言表：

```
message_id | fk_user_to | fk_user_from | message | datetime | read 
```

隐藏消息表：

```
deleted_id | fk_message_id | fk_user_id 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T09:32:49.093

与其为消息/隐藏消息设置两个单独的表，为什么不在消息表中添加一个字段来表示它是否被 1 / 0 隐藏。

这应该使您的 sql 查询更易于编写。

如果您可以解释表格字段的含义，也可能会更容易。我能认出的只有一个是枣子。

# asp.net - 选择未使用 Entity Framework 4 安装的应用程序

> ID：11984196
> 
> 赞同：0
> 
> 时间：2012-08-16T09:23:27.413
> 
> 标签：asp.net, entity-framework, ado.net, repeater, ado.net-entity-data-model

我正在使用带有 ASP.NET 4.0 的实体框架。这是一个简单的问题，我必须为我的用户已经安装的所有小工具隐藏一个安装按钮。我正在使用**转发器**进行数据绑定和 UI 生成。

数据库架构如下

```
 Apps
----------
AppId
Appname
Description 
```

为用户安装的应用程序将添加到下表中

```
InstalledApps
------------
Rid
UserId
AppId 
```

所以实体最终是这样的

```
Users
Apps
InstalledApps 
```

我想要相当于以下 SQL 的实体框架

`SELECT AppId,AppName,Description FROM Apps WHERE Apps.AppId NOT IN (SELECT AppId FROM InstalledApps WHERE UserId = 1)`

**注意：**如果有更简单的查询会产生相同的结果，我很想知道。这只是从我的脑海中蹦出来的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T09:29:43.100

我假设你的表是相互连接的，你应该从 InstalledApps 查询

```
 var f = from c in dbContext.InstalledApps
    where c.UserId != 1
    select new
    {
    c.AppId,
    c.App.AppName,
    c.App.Description
    }; 
```

这不会生成相同的 SQL，但会带来您要求的结果。

# java - 如何将 Json 日期转换为 Java 日期

> ID：11984199
> 
> 赞同：0
> 
> 时间：2012-08-16T09:23:30.820
> 
> 标签：java, android, json, date

我正在尝试将 Json 日期字符串转换为 java 日期格式。但是，当涉及到“return df.parse(tarih)”行时，它会出错。

JSON：

```
{"DateFrom":"\/Date(1323087840000+0200)\/"} 
```

Java代码：

```
private Date JSONTarihConvert(String tarih) throws ParseException
{

    SimpleDateFormat df = new SimpleDateFormat( "yyyy-MM-dd'T'HH:mm:ssz" );

    if ( tarih.endsWith( "Z" ) ) {
        tarih = tarih.substring( 0, tarih.length() - 1) + "GMT-00:00";
    } else {
        int inset = 6;

        String s0 = tarih.substring( 6, tarih.length()-1 - inset );
        String s1 = tarih.substring( tarih.length()- inset,tarih.length()-2 );

        tarih = s0 + "GMT" + s1;
    }

        return df.parse( tarih );

} 
```

当我调用这个方法时，tarih 参数是：/Date(1323087840000+0200)/

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T09:31:37.883

当您对一个`Date`对象感兴趣时，我认为 JSON 是一个 unix 时间戳。
因此，我建议您使用[Date(long milliseconds)](http://developer.android.com/reference/java/util/Date.html#Date%28long%29)构造函数:)

```
private Date JSONTarihConvert(String tarih) throws ParseException{
    long timestamp = getTimeStampFromTarih(tarih);
    return new Date(timestamp);
} 
```

其中`getTimeStampFromTarih`提取“+”出现之前的毫秒数

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-29T09:14:18.573

这肯定会奏效

```
String date = "/Date(1376841597000)/";
Calendar calendar = Calendar.getInstance();
String datereip = date.replace("/Date(", "").replace(")/", "");
Long timeInMillis = Long.valueOf(datereip);
calendar.setTimeInMillis(timeInMillis);
System.out.println(calendar.getTime().toString("dd-MMM-yyyy h:mm tt"));//It Will Be in format 29-OCT-2014 2:26 PM 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-06-02T09:15:11.170

首先像这样替换字符串：

`String str= ConvertMilliSecondsToFormattedDate(strDate.replace("/Date(","").replace(")/", ""));`

然后像这样转换它：

```
public static String ConvertMilliSecondsToFormattedDate(String milliSeconds){
    Calendar calendar = Calendar.getInstance();
    calendar.setTimeInMillis(Long.parseLong(milliSeconds));
    return simpleDateFormat.format(calendar.getTime());
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-04-21T07:03:10.653

您将需要输入演员日期：

```
String rawdate = "/Date(1995769286000)/";
Calendar calendarins = Calendar.getInstance();
String datereip = rawdate.replace("/Date(", "").replace(")/", "");
Long timeInMillis = Long.valueOf(datereip);
calendar.setTimeInMillis(timeInMillis);
System.out.println(calendar.getTime().toString("dd-MMM-yyyy h:mm tt")); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-16T09:27:59.070

除非您有理由不这样做，否则您应该使用解析器来序列化和反序列化对象。就像[杰克逊](http://jackson.codehaus.org/)解析器一样。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-08T11:35:18.130

## java.time

这是现代答案（自 2014 年以来）。

首先，我想确保我拥有的时间戳确实符合我期望的格式。我想确保有一天它没有，我不只是假装用户会得到不正确的结果而不知道它们是不正确的。因此，为了解析时间戳字符串，由于我没有找到可以接受自纪元以来毫秒数的日期时间格式，所以我使用了正则表达式：

```
 String time = "/Date(1479974400000-0800)/";
    Pattern pat = Pattern.compile("/Date\\((\\d+)([+-]\\d{4})\\)/");
    Matcher m = pat.matcher(time);
    if (m.matches()) {
        Instant i = Instant.ofEpochMilli(Long.parseLong(m.group(1)));
        System.out.println(i);
    } 
```

这打印：

> 2016-11-24T08:00:00Z

我不清楚您是否需要使用区域偏移量以及用于什么目的。但是既然我们已经得到它，为什么不从匹配器中检索它并使用它来形成一个`OffsetDateTime`, 一个带有 UTC 偏移量的日期和时间。就是这样：

```
 ZoneOffset zo = ZoneOffset.of(m.group(2));
        OffsetDateTime odt = OffsetDateTime.ofInstant(i, zo);
        System.out.println(odt); 
```

> 2011-12-05T14:24+02:00

如果您需要`java.util.Date`一些老式 API：

```
 System.out.println(Date.from(i)); 
```

或者，如果使用以下链接中提到的反向端口：

```
 System.out.println(DateTimeUtils.toDate(i)); 
```

在我的电脑上打印

> 2011 年 12 月 5 日星期一 13:24:00 CET

确切的输出将取决于您的时区。

## 链接

*   [Oracle 教程：日期时间](https://docs.oracle.com/javase/tutorial/datetime/)解释如何使用 java.time。
*   [Java 规范请求 (JSR) 310](https://jcp.org/en/jsr/detail?id=310)，`java.time`第一次描述的地方。
*   [ThreeTen Backport 项目](http://www.threeten.org/threetenbp/)，`java.time`Java 6 和 7 的反向移植（ThreeTen for JSR-310）。
*   [ThreeTenABP](https://github.com/JakeWharton/ThreeTenABP) , ThreeTen Backport 的 Android 版
*   [问题：如何在Android项目中使用ThreeTenABP](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project)，有非常详尽的解释。

# javascript - Safari 无法显示动态创建页面的窗口标题

> ID：11984200
> 
> 赞同：1
> 
> 时间：2012-08-16T09:23:36.340
> 
> 标签：javascript, html, safari

我创建了一个空的弹出窗口，我在其中编写了 html 代码，包括一个标题标签。这以前在所有浏览器上都有效，但 Safari 5 或 6 不起作用。

代码（最小化的示例代码）：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
        "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Main Window Title</title>
</head>
<body>
<p>The main page opens a second window:</p>
<SCRIPT language="JavaScript" type="text/javascript">
    myWindow = window.open();
    myWindow.focus();
    myWindow.document.write("<html><head><title>The Other Window Title<\/title><\/head><body><p>Some text<\/p><\/body><\/html>");
    myWindow.document.close();
</SCRIPT>
</body>
</html> 
```

在 Firefox 中，这会产生一个标题为“主窗口标题”的主页和一个标题为“其他窗口标题”的第二个窗口。

但在 Safari 中，第二个窗口的标题仍然是通用的“无标题”。

对我来说，Safari 的行为似乎是一个错误，但我想知道是否有办法让它工作？

（如果我向 url 提供一个 url 参数`window.open`，其中 url 是一个带有标题标签的网页，那么它会正确显示，但我当然不希望这样，因为我希望它是动态创建的。我也尝试过插入`myWindow.document.title = "A new title";`但它在 Safari 中没有任何效果，（但在 Firefox 中有）。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T20:21:55.690

制作网址`about:blank`

例子：

```
var myWindow = window.open("about:blank") 
```

# php - 公共页面上的 ID 哈希与加密

> ID：11984210
> 
> 赞同：3
> 
> 时间：2012-08-16T09:24:17.653
> 
> 标签：php, security, encryption, hash

*我已经阅读了许多关于这个主题的 SO 帖子，但他们似乎不以为然，认为它并不重要，所以如果我给你一个现实世界的例子，这可能会影响答案。*

一个管理联系人列表和发送电子邮件的系统，但允许收件人使用唯一的 url**取消订阅。**

由于这是一个公共页面，因此某人只需增加 id 并取消订阅其他用户将是微不足道的。

我不想为用户/联系人/列表的每个组合添加一个必须存储在数据库中的唯一哈希。

最好的方法是什么？以下其中一项是否可以接受？

a）加密所有ID并解密服务器端

b) 根据 3 个 ID 和盐在 url 中包含一个哈希，然后在服务器端确认它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T10:08:34.260

据我了解您的问题和评论，您的要求是

*   允许用户通过单击链接取消订阅 1
*   不要在数据库中存储任何单独的令牌

您将在服务器上执行由 http GET 请求触发的操作，例如

```
http://youremailsystem.tl/unsubscribe&user=12&contact=34&list=56 
```

虽然您的建议 1）加密增加了隐私的额外好处（URL 不会泄露执行哪些参数的操作），但数字 2）是更简单的方法。

您[应该使用 MAC 函数来签署您的 URL 参数](http://blog.jcoglan.com/2012/06/09/why-you-should-never-use-hash-functions-for-message-authentication/)。输入将是您要签名的参数以及永远不会离开您的服务器的密钥。

```
$signature = hash_hmac('sha256', $url, $mysecretkey);
$url = $url . '&signature=' . $signature; 
```

这使得签名成为您电子邮件中取消订阅 URL 的一部分。

```
http://youremailsystem.tl/unsubscribe&user=12&contact=34&list=56&signature=b1812e463a7 
```

每当收到 GET 请求时，您都可以验证参数是否未更改。

粗略的代码：

```
// extract sent signature from url:
$sent_signature = //substr($sent_url ...

// strip signature from URL:
$sent_url = //substr($sent_url ...

// repeat hashing:
$correct_signature = $signature = hash_hmac('sha256', $sent_url, $mysecretkey);

if( $sent_signature == $correct_signature ) {
    // do the unsubscribe
} 
```

请注意，任何 URL 都可以重复调用，因此请确保您永远不会重复使用您的任何 ID，否则您将允许前用户在很久以后取消订阅现在拥有其 ID 的新用户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T09:47:31.597

我作为一个花了几年时间编写时事通讯软件 (SAAS) 的人的观点。

为每个用户\加入者\成员创建一个散列，并将其与其他详细信息一起存储。在取消订阅的链接中使用它。

我的链接中总是有 2 个哈希值，一个是发送哈希值的时事通讯，然后您可以跟踪他们取消订阅的哈希值，以及每个个人的哈希值。

如果您确实希望按照 Thilo 的建议在一定时间后使取消订阅链接到期，您可以使用由时事通讯发送哈希确定的时事通讯发送日期，但您需要给他们另一种方法，如果链接被认为是旧的。如另一封电子邮件

强制性的一段代码。

```
$hash = md5(uniqid(true)); 
```

存储在具有唯一索引的 db 字段中。如果您愿意，您可以将电子邮件地址添加到其中，但 uniqid() 被设计为独一无二的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T09:30:06.400

为什么不愿意为每个用户创建一个唯一的令牌？您不必为您描述的每个组合（用户/联系人/列表）创建它，而只需为您与电子邮件地址关联的用户创建它。

然后为每个操作使用该单个标记。并在使用后进行更改。刚刚生成了 20 个随机数的东西。它既简单又安全。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T09:28:04.780

我使用过的所有邮件列表都向我发送了一封确认邮件，用于取消订阅，其中可能包含一个随机且唯一的令牌，该令牌将在几个小时后过期。

> 我不想为用户/联系人/列表的每个组合添加一个必须存储在数据库中的唯一哈希。

您不必提前创建它们或无限期地存储它们。您可以在收到取消订阅请求时创建随机令牌，并在完成或过期时将其删除。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T09:31:24.747

在每个用户的哈希中使用电子邮件地址和用户 ID（对于列表中可能的重复地址）。将哈希与地址一起存储在数据库中。

这样，如果您不知道其他用户的电子邮件，就很难重现散列。

# osgi - 如何从服务中取消注册 OSGI/蓝图服务？

> ID：11984218
> 
> 赞同：1
> 
> 时间：2012-08-16T09:24:54.220
> 
> 标签：osgi, blueprint-osgi

在我的应用程序中，我有一个 Service ChatProtocolClient。实现是一个 tcp 客户端，它在蓝图“init-method”中连接到远程服务器，并在“destroy-method”中断开连接。

我还有另一个包，它使用这个 ChatProtocolClient 的连接来读取和发布来自频道 ChatChannel 的消息。目前，我有一个 xml 文件，它创建了 ChatProtocolClient 的 bean，并创建了一个 bean ChatChannel，其中注入了对创建的 ChatProtocolClient 服务的引用。

但是如何处理与服务器的断开连接？我想告诉蓝图框架我的 ChatProtocolClient 实例现在无法使用，它应该取消注册该实例。

然后，Blueprint 最好自动调用所有依赖 bean（Blueprint 在其中注入此服务引用的 bean）上的销毁方法，并初始化一个新的 ChatProtocolClient bean 和所有因依赖失败而被销毁的 bean。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:44:32.817

我找到了实现这一点的方法。在此解决方案中，重新创建所有相关服务实例的不是蓝图。它是这样的：

1.  连接“看门狗”bean。

我没有创建“ChatProtocolClient”bean，而是从 xml 创建了 ConnectionWatchDog bean。在这些 bean 中注入 BundleContext 并从 .xml 文件设置连接属性。ConnectionWatchDog 然后尝试创建/连接 ChatProtocolClient 实例。如果连接成功，它会在 BundleContext 中注册一个服务（使用 bundleContext.registerService(..)）。ServiceRegistration 保存在看门狗中。看门狗以设定的时间间隔测试连接（它运行自己的线程）。如果连接似乎失败；看门狗调用 serviceRegistration.unregister() 并清理客户端连接实例的剩余部分，并开始创建、连接和注册新 ChatProtocolClient 实例的整个过程。

1.  聊天频道

ChatChannel 现在在蓝图中配置为 . xml 看起来像这样：

```
<blueprint xmlns=...>
    <reference-list id="chat-connection" member-type="service-object" interface="com.example.ChatProtocolClientInterface">
      <reference-listener bind-method="onBind" unbind-method="onUnbind" ref="Channel1"/>
    </reference-list>
    <bean id="Channel1" class="ChatChannel" init-method="startUp">
       <property name="chatProtocolClient" ref="chat-connection">
       ... some other properties ...
    </bean>
</blueprint> 
```

member-type 设置为 service-object，表示当服务注册或注销时，将通过“onBind”和“onUnbind”方法通知 ChatChannel。作为参数，他们将获得一个 ChatProtocolClientInterface 实例。

我不确定这是否是唯一或最好的解决方案，但它对我有用。请注意，对于此示例 xml，您还需要一个用于“chatProtocolClient”的设置器；目前我不使用蓝图设置的列表，我只使用 onBind 和 onUnbind 方法。

# c# - 如何将图像从存储在数据库中的二进制数据转换回来？

> ID：11984222
> 
> 赞同：0
> 
> 时间：2012-08-16T09:25:10.477
> 
> 标签：c#, .net, database, blob, handler

我这里有个小问题。

在我的页面上，我使用 asp:repeater 从我的数据库中读出所有“项目”。现在每个项目还包含两个图像（二进制数据），我想将它们转换回处理程序中的图像并将处理程序文件用作图像参考。

我在网上找到了这段代码，我也知道它是如何工作的，但我不知道如何在处理程序中使用：

```
public Byte[] Ret_image(Int32 id)
{
    SqlCommand cmd = new SqlCommand();
    cmd.CommandText = "SELECT * FROM Project where Id=@id";
    cmd.Connection = con;
    cmd.Parameters.Add("@id", SqlDbType.Int).Value = id;
    SqlDataReader dr = cmd.ExecuteReader();
    dr.Read();
    Byte[] ar = (Byte[])(dr[1]);
    dr.Close();
    cmd.Dispose();
    return ar;
} 
```

我认为这可能会起作用，我认为我需要做的就是提供每个项目的 ID，但我不太清楚如何实现，我什至不知道上面的代码是否正确。

谁能帮我？

提前致谢！

**[编辑]**

如何为处理程序提供所需的 ID？

```
<asp:Image ID="img" ImageUrl="Image.ashx" runat="server" Height="80" Width="75%" /> 
```

或者如何从处理程序中获取正确的 ID？

**[编辑 2]**

我究竟做错了什么？图像没有出现，但它并没有说它没有找到它们：

```
<asp:img class="icon-img icon-img_shadow" src="Image.ashx?ID=<%# DataBinder.Eval(Container, "DataItem.id") %>" alt="Icon" width="152" height="140" /> 
```

处理程序中的代码：

```
public void ProcessRequest (HttpContext context) {
    int id = Convert.ToInt32(context.Request.QueryString["ID"]);

    context.Response.ContentType = "image/png";
    MemoryStream strm = new MemoryStream(Ret_image(id));
    byte[] buffer = new byte[4096];
    int byteSeq = strm.Read(buffer, 0, 4096);
    while (byteSeq > 0)
    {
        context.Response.OutputStream.Write(buffer, 0, byteSeq);
        byteSeq = strm.Read(buffer, 0, 4096);
    }
}

public Byte[] Ret_image(Int32 id)
{
    SqlConnection sqlCn = new SqlConnection("Data Source=server;Initial Catalog=db;User ID=user;Password=pw");

    string qry = "SELECT * FROM Project WHERE imageid=@id";
    SqlCommand cmd = new SqlCommand(qry, sqlCn);
    cmd.Parameters.Add("@id", SqlDbType.Int).Value = id;
    SqlDataReader dr = cmd.ExecuteReader();
    sqlCn.Open();
    dr.Read();
    Byte[] ar = (Byte[])(dr[1]);
    dr.Close();
    cmd.Dispose();
    sqlCn.Close();
    return ar;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T09:34:46.737

您需要创建一个 ashx 页面，将其定位为图像 URL

然后，您需要在该处理程序内的 ProcessRequest 方法中将字节数组作为响应流写入......类似于：

```
context.Response.ContentType = "image/jpeg";
strm = new MemoryStream(ar);   // ar here is your variable from Byte[] ar = (Byte[])(dr[1])
byte[] buffer = new byte[4096];
int byteSeq = strm.Read(buffer, 0, 4096);
while (byteSeq > 0)
{
    context.Response.OutputStream.Write(buffer, 0, byteSeq);
    byteSeq = strm.Read(buffer, 0, 4096);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T09:30:38.927

只需使用`MemoryStream`类并将字节数组作为构造函数参数传递：

```
 MemoryStream ms = new MemoryStream(byteArrayIn);
 Image returnImage = Image.FromStream(ms);
 return returnImage; 
```

# javascript - 使用花括号的 Internet Explorer 上的 AngularJS 数据绑定问题

> ID：11984223
> 
> 赞同：9
> 
> 时间：2012-08-16T09:25:18.383
> 
> 标签：javascript, html, internet-explorer, angularjs

我在这里做错了什么？我已经阅读了[IE 兼容性指南](http://docs.angularjs.org/guide/ie)，但没有提到使用 {{}} 标签进行数据绑定。这在其他浏览器上运行良好，但在 IE（包括 IE9）中失败。

[http://jsfiddle.net/yMgQ8/1/](http://jsfiddle.net/yMgQ8/1/)

HTML：

```
<html ng-app class="ng-app">

    <head></head>

    <body>
        <div ng-controller="Controller">
            <p>{{test}}</p>
        </div>
    </body>

</html> 
```

JavaScript：

```
function Controller($scope) {
    $scope.test = "Hello world";
} 
```

我已经尝试添加兼容性指南中提到的步骤，但这似乎并没有解决它，除非我遗漏了一些明显的东西！

它应该输出“Hello world”，但在 IE 上它输出 {{test}}。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T19:07:57.943

问题似乎不是角度而是jsfiddle

[http://plunker.no.de/BL97Av/](http://plunker.no.de/BL97Av/)这适用于 IE9

另外，IE7 或 IE8 的兼容性你自己。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-14T14:04:02.360

For future reference; adding an *id* attribute to the html element solved my problem. In your case this would mean changing the code to:

```
<html ng-app id="ng-app" class="ng-app"> 
```

# definition - XML 位置平面文件的定义

> ID：11984224
> 
> 赞同：2
> 
> 时间：2012-08-16T09:25:20.383
> 
> 标签：definition

我正在阅读一个引用平面位置 XML 文件的文档。

一般来说，什么是位置平面文件？这对 XML 意味着什么？

问候。

# java - Java Socket 编程中的未知主机名

> ID：11984226
> 
> 赞同：1
> 
> 时间：2012-08-16T09:25:21.210
> 
> 标签：java, android, sockets, serversocket

我有五个域服务器，我想在我的 android 应用程序中使用 java 套接字编程连接到该服务器。

这里我的服务器 "ANY1.g%%%%%%%%.dk" "ANY2.g%%%%%%%.dk" "ANY3.g%%%%%%%.dk" "ANY4 .g%%%%%%%%.dk" "ANY5.g%%%%%%%%.dk"

因此，当我在运行提示符下通过 ping 命令 ping 到任何服务器时，它工作正常并得到响应。

但是当我尝试使用此服务器创建套接字时，它给了我“未知主机”错误。

这是我的代码：

```
try
{
    hostname = "ANY SERVER DOMAIN NAME";
    port = ANY;
    socket = new Socket(hostname, port);
    socket.setReceiveBufferSize(2048);
    socket.setKeepAlive(true);
    Log.e("SOCKET",socket.isConnected());
}
catch(Exception e)
{
    Log.e("ERROR",e.getMessage());
} 
```

代码是否有任何问题或任何建议都会被接受？

清单文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.siliconithub.android.greencall"
    android:versionCode="1"
    android:versionName="1.0" >

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.WRITE_CONTACTS" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.CALL_PHONE" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.SEND_SMS" />

<supports-screens
    android:anyDensity="true"
    android:largeScreens="true"
    android:normalScreens="true"
    android:resizeable="true"
    android:smallScreens="true" />

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_app_icon"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".GreenCall"
        android:label="@string/title_activity_green_call"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".RecentCallActivity"
        android:label="@string/title_activity_recentcall"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar" >
    </activity>
    <activity
        android:name=".RecentCallDetailActivity"
        android:label="@string/title_activity_recentcall_detail"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar" >
    </activity>
    <activity
        android:name=".FavouritesActivity"
        android:label="@string/title_activity_fovourites"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar" >
    </activity>
    <activity
        android:name=".ContactsActivity"
        android:label="@string/title_activity_contacts"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar" >
    </activity>
    <activity
        android:name=".ContactDetailsActivity"
        android:label="@string/title_activity_contactdetails"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar" >
    </activity>
    <activity
        android:name=".TelnetServerActivity"
        android:label="@string/title_activity_telnetserver"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar" >
    </activity>
    <activity
        android:name=".SettingActivity"
        android:label="@string/title_activity_setting"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.Black" >
    </activity>
    <activity
        android:name=".SearchContactsActivity"
        android:label="@string/title_activity_search_contacts"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar" >
    </activity>

    <service
        android:name=".UpdateStatusService"
        android:label="@string/title_service_update_status"
        android:icon="@drawable/ic_app_icon"
        android:enabled="true" />

    <receiver android:name=".PhoneStateBroadcastReceiver" >
        <intent-filter>
            <action android:name="android.intent.action.PHONE_STATE" />
        </intent-filter>
    </receiver>
</application>
</manifest> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T09:34:22.367

```
import java.net.Socket;
public class Main {
    public static void main(String[] args) {
        try {
            Socket socket = new Socket("%%%%.%%%%%.dk", PORT NUMBER);
            socket.setReceiveBufferSize(2048);
            socket.setKeepAlive(true);
            System.out.println("socket " + socket.isConnected());
        } catch (Exception e) {
            System.out.println("error " + e.getMessage());
        }
    }
} 
```

这返回

```
socket true 
```

在 Java 中（没有 Android）。它也适用于 Android（sherpya 已经对其进行了测试 - 请参阅下面的评论）。我猜你的权限有问题。你能告诉我们你的清单吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T09:43:39.617

最好的方法是使用`InetAddress`+`SocketAddress`来解析主机，然后使用套接字连接到它。尝试：

```
InetAddress addr = InetAddress.getByName("ANY1.g%%%%%%%.dk");
SocketAddress sockaddr = new InetSocketAddress(addr, 443);
socket = new Socket();
socket.connect(sockaddr, timeoutint) 
```

# android - 使用应用程序徽标标记联系人

> ID：11984230
> 
> 赞同：0
> 
> 时间：2012-08-16T09:25:33.387
> 
> 标签：android, android-contacts, graphical-logo

我的应用程序中基本上有一个联系人列表，如果他们在我的数据库中注册，我想用我的应用程序的徽标标记列表中的某些联系人。我已经整理了服务器集成，但不知道如何将我的徽标添加到联系人列表中。

执行类似操作的应用示例：Viber 和 Rebtel。

编辑：它的周期是这样的：

1.  我在我的应用程序中查询所有用户名
2.  我将这些发布到服务器
3.  服务器返回一个字符串，如：“server says:1=johndoe”作为通用用户名
4.  我将如何获取该字符串并将“johndoe”标记为注册用户？

我的 getView 是：

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {
    View view = convertView;

        if (view == null) {
            view = mInflater.inflate(R.layout.screen_contact_item, null);}

    final Contact contact = (Contact)getItem(position);

        if(contact != null){
            final TextView DisplayName = (TextView)
            view.findViewById(R.id.screen_contacts_item_textView);
    DisplayName.setText(contact.getDisplayName());} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:44:41.697

我通过以下方式解决了它：

```
for (Contact contact : list) {
        List<PhoneNumber> ListAllNumbers = contact.getPhoneNumbers();

        for (PhoneNumber aNum : ListAllNumbers) {

            for (String anAppNum : compareServer) {
                if (aNum.getNumber().contentEquals(anAppNum)) {
                    contact.setAppContact(true);
                    Log.i(TAG, contact.getDisplayName() + " is registered");
                } 
```

然后在 getView 中，我添加了一条 if 语句，如果它是 AppContact，则为联系人设置可绘制对象，如果不是，则将可绘制对象设置为隐藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:06:25.837

你应该使用`getView`回调在那里插入你的逻辑代码

您需要使用图标为联系人行充气布局，并询问用户是否注册显示该图像否则该图像消失

这是一个[例子](http://android.amberfog.com/?p=296)

# javascript - 我无法理解的主干库代码模式

> ID：11984231
> 
> 赞同：6
> 
> 时间：2012-08-16T09:25:33.783
> 
> 标签：javascript, backbone.js

我是中级 javascript 开发人员，试图了解 javascript 开发人员如何编写他们的代码，我决定开始研究 Backbone 库作为起点。

这是骨干网中初始设置的一些代码片段，请帮助我理解它。

**代码1** -

```
(function(){
   var root = this;
}).call(this); 
```

是否有任何特定原因使用调用方法而不是简单地使用（），或者它只是一种编码偏好，如果我必须编写相同的代码，我会做这样的事情。

```
(function(root){

})(this); 
```

**代码2** -

```
 var Backbone;
  if (typeof exports !== 'undefined') {
    Backbone = exports;
  } else {
    Backbone = root.Backbone = {};
  } 
```

现在在全局范围内没有导出的定义，也没有在本地范围内的任何地方定义，那么如果我正在编写相同的代码，那么如果块在这里做什么，我会写

```
 var Backbone = root.Backbone = {}; 
```

**代码 3**

```
var _ = root._;
if (!_ && (typeof require !== 'undefined')) _ = require('underscore')._; 
```

再次，我在本地或全局范围内的任何地方都找不到 require 的定义

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T09:55:33.460

### 代码块 1

这取决于开发人员的偏好，你可以用任何一种方式编写代码，事实上，许多库确实更喜欢你建议的风格。

### 代码块 2

这个块是[AMD Boiler Plate](http://www.sitepen.com/blog/2010/09/30/run-anywhere-javascript-modules-boilerplate-code/)的一部分。[AMD 库提供了将 JavaScript 代码拆分为模块](http://addyosmani.com/writing-modular-js/)所需的挂钩。在代码块的情况下，`exports`对象是[CommonJS 模块标准](http://dailyjs.com/2010/10/18/modules/)使用的全局对象。如果`exports`全局不存在，则`root`直接将 Backbone 添加到对象中。

一个有趣的旁注是 Backbone 不支持导出到流行的[RequireJS](http://requirejs.org) AMD 库。

### 代码块 3

`require`是 AMD 库引入的另一个全局变量，见上文。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T09:44:40.210

在**code1** `call(this)`中，将当前的引用传递`this`给函数。如果在全局范围内执行此操作，`this`则为`window`. 我认为这只是偏好，在这种情况下并没有什么不同。

`require`并且`exports`由 NodeJS（或 CommonJS 兼容库）提供，它们是 CommonJS 规范的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T09:42:54.237

我认为代码 2 是为了保护框架，以防其他人在全局范围内定义导出。所以他们检查它是否不是未定义的意思是其他人做了然后他们只是将它重置为一个空对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T05:52:46.210

@JonnyReeves 几乎回答了你所有的问题。不确定您以前是否看过backbone.js 的注释源代码，这对您很有用。

[http://documentcloud.github.com/backbone/docs/backbone.html](http://documentcloud.github.com/backbone/docs/backbone.html)

# android - Android webview 地理定位数据库无法打开

> ID：11984237
> 
> 赞同：12
> 
> 时间：2012-08-16T09:25:51.780
> 
> 标签：android, sqlite, webview, geolocation

我有使用 javascript geolocation api 的网站，并希望它在 web 视图中打开。我在清单文件中设置了这些权限：

```
<uses-permission android:name="android.permission.ACCESS_GPS" />
<uses-permission android:name="android.permission.ACCESS_ASSISTED_GPS" />
<uses-permission android:name="android.permission.ACCESS_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/> 
```

在我的活动中，我还设置了 webview 设置：

```
webview.getSettings().setDatabaseEnabled(true);
webview.getSettings().setDomStorageEnabled(true);
webview.getSettings().setGeolocationDatabasePath("/data/data/com.my.app/databases");
webview.getSettings().setGeolocationEnabled(true); 
```

我还处理了 javascript 地理定位对话框：

```
webview.setWebChromeClient(new WebChromeClient(){
    @Override
    public void onGeolocationPermissionsShowPrompt(String origin, GeolocationPermissions.Callback callback) {
        callback.invoke(origin, true, false);
    }
}); 
```

地理位置本身正在工作，但我无法将地理位置缓存到数据库中。它应该在 CachedGeoposition.db 中自行完成，但是当我启动 webview 时，我得到了这个奇怪的 SQLite 错误：

```
E/SQLiteLog(22653): (14) cannot open file at line 30174 of [00bb9c9ce4]
E/SQLiteLog(22653): (14) os_unix.c:30174: (2) open(/CachedGeoposition.db) -
D/WebKit  (22653): ERROR:
D/WebKit  (22653): SQLite database failed to load from /CachedGeoposition.db
D/WebKit  (22653): Cause - unable to open database file
D/WebKit  (22653):
D/WebKit  (22653): external/webkit/Source/WebCore/platform/sql/SQLiteDatabase.cp
p(71) : bool WebCore::SQLiteDatabase::open(const WTF::String&, bool) 
```

当我在文件资源管理器中检查 CachedGeoposition.db 文件是否存在时，它始终存在，并且数据库的权限设置为 -rw-------。

我是否在设置中遗漏了一些可能导致数据库无法正确打开的内容？我是 Android 新手，现在正在尝试寻找 2 天的解决方案。任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-26T13:45:51.780

我将发布一个对我有用的解决方案，希望它可以提供一些关于错误可能在哪里的想法。如果您可以提供有关您正在测试的设备（模拟器）/操作系统的详细信息，这也会有所帮助。

我测试过（没有错误）：

*   (模拟器) Galaxy Nexus (2.3.3) (data/data/package.name/files/CachedGeoposition.db 文件创建)
*   (模拟器) Galaxy Nexus (3.0) (data/data/package.name/files/CachedGeoposition.db 文件创建)
*   HTC One S (4.1.1) (data/data/package.name/files/CachedGeoposition.db 文件创建)
*   Galaxy S3 (4.3)（看不到文件，因为我的手机没有植根，并且 4.3 上存在一些“运行方式”错误）
*   Nexus 7 (4.4.4) - KIT KAT 上面的 webview 发生了一些变化，文件不再存在，但没有显示错误（即使提供了错误的“数据库”文件夹路径）
*   （模拟器）Galaxy S4（5.0）（与 4.4.4 相同）

AndroidManifest 权限（几乎相同）：

```
<uses-permission android:name="android.permission.ACCESS_GPS" />
<uses-permission android:name="android.permission.ACCESS_ASSISTED_GPS" />
<uses-permission android:name="android.permission.ACCESS_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/> 
```

网页视图设置：

```
WebSettings webSettings = webview.getSettings();
webSettings.setJavaScriptEnabled(true);
webSettings.setDatabaseEnabled(true);
webSettings.setDomStorageEnabled(true);
webSettings.setGeolocationDatabasePath(getFilesDir().getPath());
webSettings.setGeolocationEnabled(true); 
```

Web chrome客户端（同）：

```
webview.setWebChromeClient(new WebChromeClient(){
    @Override
    public void onGeolocationPermissionsShowPrompt(String origin, GeolocationPermissions.Callback callback) {
        callback.invoke(origin, true, false);
    }
}); 
```

测试用于获取地理位置的 html 文件：

```
<!DOCTYPE html>
<html>
<head>
<script>
var x = document.getElementById("demo");

function getLocation() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition, showError);
    } else {
        x.innerHTML = "Geolocation is not supported by this browser.";
    }
}

function showPosition(position) {
    var latlon = position.coords.latitude + "," + position.coords.longitude;
    document.getElementById("locationHolder").innerHTML = latlon;
}

function showError(error) {
    switch(error.code) {
        case error.PERMISSION_DENIED:
            x.innerHTML = "User denied the request for Geolocation.";
            break;
        case error.POSITION_UNAVAILABLE:
            x.innerHTML = "Location information is unavailable";
            break;
        case error.TIMEOUT:
            x.innerHTML = "The request to get user location timed out.";
            break;
        case error.UNKNOWN_ERROR:
            x.innerHTML = "An unknown error occurred.";
            break;
    }
}
</script>
</head>

<body>

<p id="demo">Click the button to get your position.</p>

<div id="locationHolder">No location</div>
<button onclick="getLocation()">Get position</button>

</body>
</html> 
```

此外，对于本地测试，您可以在“/assets/www/index.html”下创建一个包含 html 的文件，并使用以下代码将其加载到 webview 中：

```
try {
    String html = readAssetFile("www/index.html");
    webview.loadDataWithBaseURL(null, html, "text/html", "UTF-8", null);
} catch (IOException e) {
} 
```

读取资产文件方法：

```
private String readAssetFile(String filePath) throws IOException {
    StringBuilder buffer = new StringBuilder();
    InputStream fileInputStream = getAssets().open(filePath);
    BufferedReader bufferReader = new BufferedReader(new InputStreamReader(fileInputStream, "UTF-8"));
    String str;

    while ((str=bufferReader.readLine()) != null) {
        buffer.append(str);
    }
    fileInputStream.close();

    return buffer.toString();
} 
```

如果不提供“数据库”文件夹的错误硬编码路径，我将无法重现您的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:15:49.497

线

D/WebKit (22653)：SQLite 数据库无法从 /CachedGeoposition.db 加载

很有趣

尝试在 WebSettings.setDatabasePath 中设置适当的数据库路径，这可能是用作地理数据库路径的根

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-22T09:21:15.153

我知道这是一个老问题，但任何有这个问题的人可能会发现关注这个功能很有趣：

```
mWebView.getSettings().setGeolocationDatabasePath(getFilesDir().getPath()); 
```

地理位置使用数据库在会话之间保留缓存的位置和权限。此调用设置数据库的位置。

与其将固定路径设置为参数，不如动态调用它：

```
getFilesDir().getPath() 
```

# c# - 检测回车键 C#

> ID：11984238
> 
> 赞同：10
> 
> 时间：2012-08-16T09:25:53.247
> 
> 标签：c#, keydown, textchanged

我有以下代码在按下输入/返回时不显示消息框。

对于任何其他键（即字母/数字），MessageBox 显示为 False。

```
private void cbServer_TextChanged(object sender, EventArgs e)
{
    if (enterPressed)
    {
        MessageBox.Show("Enter pressed");
    }
    else
        MessageBox.Show("False");
}

private void cbServer_Keydown(object sender, KeyEventArgs e)
{
    if (e.KeyCode == Keys.Enter || e.KeyCode == Keys.Return)
    {
        enterPressed = true;
        MessageBox.Show("Enter presssed: " + enterPressed);

    }
    else
        enterPressed = false;
} 
```

有任何想法吗？

编辑：上面的代码，我认为问题出在 _Keydown 上，所以我只发布了它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T09:29:33.137

在您的表单设计器类（formname.designer.cs）中添加：

```
this.KeyPress += new System.Windows.Forms.KeyPressEventHandler(this.Login_KeyPress); 
```

并将此代码添加到主干代码（formname.cs）：

```
void Login_KeyPress(object sender, KeyPressEventArgs e)
    {
        if (e.KeyChar == (char)13)
            MessageBox.Show("ENTER has been pressed!");
        else if (e.KeyChar == (char)27)
            this.Close();
    } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-16T09:54:26.993

这是因为当您按下`Enter` `TextChanged`事件时不会触发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-07T04:37:50.680

```
private void textBox_PreviewKeyDown(object sender, KeyEventArgs e)
 {
            if (e.Key == Key.Enter)
            {
                MessageBox.Show("Enter key pressed");
            }
            else if (e.Key == Key.Space)
            {
                MessageBox.Show("Space key pressed");
            }
} 
```

在文本框或输入中显示之前使用 PreviewKeyDown 事件检测任何键

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-07T00:18:31.080

```
void cbServer_PreviewKeyDown(object sender, System.Windows.Forms.PreviewKeyDownEventArgs e)
    {

        // Check if User Presses Enter
        if (e.KeyCode == System.Windows.Forms.Keys.Return)
        {
            // Here: user pressed ENTER key

        }
        else
        {
            // Here: user did not press ENTER key
        }
    } 
```

# msbuild - Installshiled msbuild 任务可以用来构建生成 msp 作为输出的 ism 吗？

> ID：11984249
> 
> 赞同：0
> 
> 时间：2012-08-16T09:26:19.067
> 
> 标签：msbuild, installshield, msbuild-task

我正在使用 Msbuild installshield 任务来构建生成 msi 作为输出的 ism。参考[Msbuild installshield 任务链接](http://kb.flexerasoftware.com/doc/Helpnet/installshield14helplib/MSBuild.htm)

现在必须构建 Msp，我通过打开 installshield 和 [构建补丁] 来构建它。

是否有任何命令行 [所以我可以在 msbuild 或批处理文件中使用它] 或 msbuild installshield 任务可用于构建 ism [产生 msp]？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T11:36:09.350

这取决于您使用的 InstallShield 版本；您参考了 InstallShield 2008 帮助文章，该版本没有此功能。`PatchConfiguration`根据IS2009 版本的[InstallShield MSBuild 任务](http://kb.flexerasoftware.com/doc/Helpnet/installshield15helplib/MSBuild.htm)帮助文章中记录的参数，在 InstallShield 2009 中添加了该功能。另请参见IS2009 中添加的[命令行构建参数](http://kb.flexerasoftware.com/doc/Helpnet/installshield15helplib/ISCmdBldParam.htm)。`-patch_config`

# google-maps - 更改 Google 地图以重复使用单个信息窗口，而不是创建多个

> ID：11984258
> 
> 赞同：3
> 
> 时间：2012-08-16T09:27:00.897
> 
> 标签：google-maps, google-maps-api-3

我有一个越来越复杂的谷歌地图，它绘制了数千个点并将它们聚集在一起。当用户单击其中一个地图标记时，我打开了一个信息窗口，这一切都很好。但是，我想做的一项改进是在打开新信息窗口时强制所有其他信息窗口关闭，以便一次只能打开 1 个信息窗口。

我已经尝试`if (infowindow) infowindow.close();`在侦听器函数中添加一些代码（一个新的。因此，通过阅读这一点，似乎只有一个可以重用的信息窗口而不是多个信息窗口是一个更好的主意。

麻烦的是，代码处于我能真正理解的边缘，到目前为止我做这件事的实验已经破坏了一切。

我目前拥有的代码如下：

```
var _iconCenter = new google.maps.MarkerImage('/css/img/map-marker.png',
  new google.maps.Size(38, 48),
  new google.maps.Point(0,0),
  new google.maps.Point(19, 44));

var shadow = new google.maps.MarkerImage('/css/img/map-marker-shadow.png',
  new google.maps.Size(57, 49),
  new google.maps.Point(0,0),
  new google.maps.Point(7, 44));

var _icon = '/css/img/map-marker-purple.png';
var infowindow;
var markersArray = [];
var map;
var currentPosition = 0;
var currentmarker;
var firstload = true;
var maploaded = false;
var interval = 5000;
var geocoder;

var stylez = [];

function initialize(items,loop,zoom) {
  geocoder = new google.maps.Geocoder();
  if (items.length > 0) {
    var latlng = new google.maps.LatLng(items[0].Lat, items[0].Lng);
    var myOptions = {
      zoom: zoom,
      center: latlng,
      //mapTypeControl: false,
      streetViewControl: false,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    map = new google.maps.Map(document.getElementById("map"), myOptions);
    map.setOptions({styles: stylez});

    for (var i = 0; i < items.length; i++) {
      var marker = new google.maps.Marker({
        position: new google.maps.LatLng(items[i].Lat, items[i].Lng),
        title: items[i].Title,
        icon: _icon,
        shadow: shadow,
        infocontent: items[i].Description
      });
      marker.setMap(map);
      attachListener(marker,'marker:'+i);
      markersArray.push(marker);
    }

    //set style options for marker clusters (these are the default styles)
    mcOptions = {
      gridSize: 44
    }

    var markerCluster = new MarkerClusterer(map, markersArray, mcOptions);
    google.maps.event.addListener(map, "tilesloaded", function () {
      if(loop == true){
        SetLoop();
      }
    });

    function attachListener(marker,content){
      google.maps.event.addListener(marker, "click", function () {
        var infowindow = new google.maps.InfoWindow();
        map.setCenter(new google.maps.LatLng(marker.getPosition().lat(), marker.getPosition().lng()));
        infowindow.setContent(content);
        infowindow.open(map,this);
      });
    }    

  }
}

function SetLoop() {
//This will fire everytime map loads or recenteres
  maploaded = true;
  if (firstload) {
    firstload = false;
    Recenter();
  }
}

function Recenter() {
  //If previous iteration is not loaded completely, wait to avoid errors
  //It could happen for slow internet connection
  if (maploaded) {
    maploaded = false;
  } else {
    //keep adding 1 second to interval for slow connection till page loads
    interval = interval + 1;
    setTimeout("Recenter()", interval);
    return;
  }

  if (infowindow != null && currentmarker != null) {
    //currentmarker.icon = _icon;
    currentmarker.icon = _iconCenter;
    currentmarker.setMap(map);
    infowindow.close(map, currentmarker);
  }

  markersArray[currentPosition].icon = _iconCenter;
  markersArray[currentPosition].setMap(map);
  map.setCenter(new google.maps.LatLng(markersArray[currentPosition].getPosition().lat(), markersArray[currentPosition].getPosition().lng()));

  infowindow = new google.maps.InfoWindow({
    content: markersArray[currentPosition].infocontent,
    size: new google.maps.Size(50, 50)
  });
  infowindow.open(map, markersArray[currentPosition]);
  currentmarker = markersArray[currentPosition];
  if (currentPosition >= markersArray.length - 1) {
    currentPosition = 0;
  } else {
    currentPosition++;
  }
  if (markersArray.length > 1) {
    setTimeout("Recenter()", interval);
  }
} 
```

是重新使用信息窗口的最佳方式还是可以以另一种方式执行此操作？任何帮助我在这里指出正确的方向将不胜感激，谢谢大家！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T09:58:51.560

从函数 attachListener() 中删除“var infowindow”声明。如果在函数内部声明它，它将成为函数的本地实例，并且每次执行函数时都会创建一个新实例。所以：

```
function attachListener(marker,content){
      google.maps.event.addListener(marker, "click", function () {

      // marker.getPosition() already returns a google.maps.LatLng() object
      map.setCenter(marker.getPosition());
      infowindow.close();
      infowindow.setContent(content);
      infowindow.open(map,this);
      });
    } 
```

而是将其声明为全局变量：

```
var _icon = '/css/img/map-marker-purple.png';
var infowindow = new google.maps.InfoWindow();
//...etc 
```

这样您在整个应用程序中只有一个 infowindow 对象

# java - 如何在 jaxb 中发生名称冲突时收到警告

> ID：11984263
> 
> 赞同：2
> 
> 时间：2012-08-16T09:27:12.377
> 
> 标签：java, jaxb, unmarshalling

我有以下xml：

```
<parameters>
    <parameter >value1</param>
    <parameter >value2</param>
</parameters> 
```

有以下课程：

```
@XmlRootElement
public class Parameters {
    @XmlElement public String parameter;
} 
```

将 xml 解组为对象时，如何获得重复值的警告（异常？）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T09:32:23.713

您应该有一个架构来进行架构验证。如果您的架构允许重复，那么也许您应该切换`String`到一种`Collection`类型。

如果您没有架构，您可以使用[schemagen](http://docs.oracle.com/javase/6/docs/technotes/tools/share/schemagen.html)工具从您的 java 类中生成它。您甚至可以在[运行时](http://wiki.eclipse.org/EclipseLink/Examples/MOXy/JAXB/GenerateSchema)生成模式，也许将其与 缓存在一起，`JaxbContext`然后将其用于验证。

# c++ - 通过保持其子小部件不透明度正常使 QDialog 在 Qt 中透明

> ID：11984264
> 
> 赞同：1
> 
> 时间：2012-08-16T09:27:15.230
> 
> 标签：c++, qt, transparency, opacity, qdialog

我需要使其`QDialog`子小部件（包含在 QDialog 中的小部件）的透明度为`QDialog`1

我使用以下方法设置对话框的不透明度

```
QGraphicsOpacityEffect* opacityEffect = new QGraphicsOpacityEffect;
myDialog->setGraphicsEffect(opacityEffect);
opacityEffect->setOpacity(0.45); // I need to set it to this particular value 
```

但这也将 myDialog 的子 wdigets 的不透明度设置为 0.45，这意味着使它们过于透明。有什么办法可以限制`Opacityeffect`到`myDialog`吗？从而使其子小部件看起来很正常。

# actionscript-3 - ActionScript3 不支持汉字

> ID：11984267
> 
> 赞同：0
> 
> 时间：2012-08-16T09:27:25.497
> 
> 标签：actionscript-3, utf-8

实际上，我尝试使用 CGI webservice 脚本将中文数据从 ActionScript3 插入到 sqlite3。对于插入英文数据，它工作正常。但是当我尝试插入中文数据时，URL 是这样的 `/cgi-bin/reg.cgi?username=%E5%A5%A0%E5%9F%BA%E6%95%88%E6%9E%9C%E5%9B%BE` ，python 脚本显示`update Error`. 我只是用谷歌搜索并有了一个使用的想法`encodeURIComponent("奠基效果图");`。当我使用`encodeURIComponenet`它时，它会像这样将数据插入我的数据库`%E5%A5%A0%E5%9F%BA%E6%95%88%E6%9E%9C%E5%9B%BE`。而且我也试过了`byteArray.writeUTF("奠基效果图");`，但是当使用`writeUTF()`我的`URL`价值时`Null`。我想我需要使用`encode UTF-8`. 但我不知道如何在动作脚本上使用它。请有人提出一些解决这个问题的想法。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T02:51:29.357

不要考虑存储在数据库中的格式，当您使用`encodeURIComponenet(str)`编码数据时，您只是`decodeURIComponent(rstr)`用于从数据库中检索。`decoded`它可以使用fromat检索数据。我认为这个有帮助。

# javascript - JavaScript 中的虚拟键盘

> ID：11984270
> 
> 赞同：0
> 
> 时间：2012-08-16T09:27:32.107
> 
> 标签：javascript, html

我正在为我想要放入我的网站的需求创建虚拟键盘。我已将所有具有不同语言字符码的键码存储在特定数组中。我的问题是，当我按下键盘按钮时，我想忽略键盘输入的当前语言到 TextArea 但我想处理并放置字母，或者我们可以根据用户选择的语言从我的数组中说出 keychars . 谢谢，等待您的答复

我有一个带有键码和字符码的对象：

```
var layout = {
    192 : "0x0451",
    49 : "0x0031",
    50 : "0x0032",
    51 : "0x0033",
    52 : "0x0034",
    53 : "0x0035",
    54 : "0x0036",
    55 : "0x0037",
    56 : "0x0038",
    57 : "0x0039",
    48 : "0x0030",
    189 : "0x0493",
    187 : "0x04EF",
    8 : "BS",
    9 : "Tab",
    81 : "0x0439",
    87 : "0x049B",
    69 : "0x0443",
    82 : "0x043A",
    84 : "0x0435",
    89 : "0x043D",
    85 : "0x0433",
    73 : "0x0448",
    79 : "0x04B3",
    80 : "0x0437",
    219 : "0x0445",
    221 : "0x044A",
    220 : "0x005C",
    20 : "",
    65 : "0x0444",
    83 : "0x04B7",
    68 : "0x0432",
    70 : "0x0430",
    71 : "0x043F",
    72 : "0x0440",
    74 : "0x043E",
    75 : "0x043B",
    76 : "0x0434",
    186 : "0x0436",
    222 : "0x044D",
    13 : "",
    16 : "",
    90 : "0x044F",
    88 : "0x0447",
    67 : "0x0441",
    86 : "0x043C",
    66 : "0x0438",
    78 : "0x0442",
    77 : "0x04E3",
    188 : "0x0431",
    190 : "0x044E",
    191 : "0x002E",
    16 : "",
    17 : "",
    46 : "",
    18 : "",
    32 : "",
    18 : "",
    46 : "",
    17 : ""

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:43:53.563

我对你想要做什么感到有点困惑。这将侦听元素`keyDown`上的事件并根据按下的键`TextArea`从数组中选择一个字符。`layout`

我不确定你打算在这之后做什么，但希望这是一个好的开始。

```
$("#TextArea").keyDown(function(event) {
  event.preventDefault();
  // Convert or insert etc the matching key.
  var newKey = layout[event.which];
  $(this).text(newKey);
}); 
```

# vba - 在 win sec-update 后 MS-access 未捕获树视图事件

> ID：11984274
> 
> 赞同：4
> 
> 时间：2012-08-16T09:27:41.877
> 
> 标签：vba, ms-access, activex

使用 TreeView (MSComctlLib.TreeCtrl.2) 访问 2010 应用程序按预期显示和填充，但在 Windows 安全补丁不会触发事件返回 VBA 之后突然出现。

尝试在 /syswow64 中回滚 MSCOMCTL.OCX，但没有运气。

请 ping 任何类似的行为或提示以解决问题。

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T11:50:08.570

问题似乎是 mscomctl.ocx 的注册表项在安全更新后被破坏。可以在此[知识库文章](http://support.microsoft.com/kb/2687441)中找到一种解决方案。它建议以管理员身份运行此批处理文件：

```
reg delete hkcr\typelib\{831FDD16-0C5C-11D2-A9FC-0000F8754DA1}\2.0 /f
if exist %systemroot%\SysWOW64\cscript.exe goto 64 
%systemroot%\system32\regsvr32 /u mscomctl.ocx
%systemroot%\system32\regsvr32 mscomctl.ocx
exit
:64 
%systemroot%\sysWOW64\regsvr32 /u mscomctl.ocx
%systemroot%\sysWOW64\regsvr32 mscomctl.ocx
exit 
```

我已经验证这在我们的环境中有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-15T00:10:29.810

我打开了一个在 Windows 7 32 位上运行的 32 位 Access 2013 上开发的 Access 文件，在 Windows 8 64 位上运行的 64 位 Access 2013 上打开它时遇到了这个问题。

**我的解决方案：**

使用 Access 表单上的设计视图删除控件并重新添加它。

因为树视图的属性大部分是通过编程设置的，所以除了重新定位和重命名它之外应该没什么可做的。

# php - 防止用户编写的 include() 崩溃

> ID：11984277
> 
> 赞同：1
> 
> 时间：2012-08-16T09:27:53.483
> 
> 标签：php, robustness

考虑以下代码：

```
try {
    include_once "malformedFile.php";
} catch(Exception $e) {
    return null;
} 
```

我无法确保文件 malformedFile.php 是有效的 PHP 代码，不会崩溃或不会调用 die()。即使 malformedFile.php 死亡或崩溃，我怎样才能继续捕获？我的兴趣是使应用程序尽可能健壮，同时仍然允许用户通过包含实现自己的插件。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T09:30:27.617

不幸的是，你不能。如果包含的代码导致致命错误（例如语法错误），你就死定了。

您*可以*尝试手动加载文件，然后调用`eval`：

```
$code = file_get_contents("malformedFile.php");
eval($code); 
```

当然，这是您在做之前应该三思而后行的事情，因为众所周知，这`eval`是邪恶的等等。

最强大的选择是生成另一个`include`为您执行此操作的进程（因此，如果它意外死亡也没什么大不了的），但是父进程和子进程之间的通信将比仅拥有一个进程要困难得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T09:32:10.093

`Include`将包括来源，无法绕过它。

也许您可以将此文件称为外部进程并仅使用结果。这可以像 CLI 脚本或单独的 CURL 调用一样完成。

# javascript - TinyMCE 向粗体和斜体按钮添加另一个事件？

> ID：11984282
> 
> 赞同：2
> 
> 时间：2012-08-16T09:28:05.450
> 
> 标签：javascript, tinymce

您知道如何添加另一个自定义事件以在按下粗体和斜体按钮时触发。按下每个按钮后，我想通过调用函数来获取更新的 html 文本 `boldItalicPressed()`

```
 tinyMCE.init({
      mode : "textareas",
      theme : "advanced",
      theme_advanced_buttons1 : "bold,italic,underline,strikethrough,
      onchange_callback : "myCustomOnChangeHandler"

   });

   function myCustomOnChangeHandler(inst) {
        alert("Some one modified something");
        alert("The HTML is now:" + inst.getBody().innerHTML);
   }

   function boldItalicPressed(){
        alert(tinyMCE.get('mytextarea').getContent());
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:13:10.307

[这个 SO question](https://stackoverflow.com/questions/11473576/catch-pressing-button-in-plugin-for-tinymce)可能对你有帮助。这里的问题是按下粗体按钮时没有触发可捕获的事件。解决方案是注册一个自定义 tinymce 命令，并将在粗体按钮单击时执行的命令替换为该命令。新命令将执行常规粗体命令以及您要执行的其他内容。

# iphone - 如何在 iphone sdk 中更改日期格式

> ID：11984285
> 
> 赞同：1
> 
> 时间：2012-08-16T09:28:17.603
> 
> 标签：iphone, ios

我收到来自 Web 服务日期的响应，例如“2012-08-17T00:00:00”。我只想显示日期，例如 17-08-2012。如何更改日期格式并删除该时间...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T09:37:55.263

```
NSDate *today = [NSDate date];
NSLog(@"Date today: %@", today);

NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init] ;
dateFormat.dateFormat =  @"dd-MM-yyyy";
NSString *dateString = [dateFormat stringFromDate:today];
NSLog(@"Date: %@", dateString); 
```

另请参阅以下日期和时间格式样式

> ```
> NSDateFormatterNoStyle
> NSDateFormatterShortStyle
> NSDateFormatterMediumStyle
> NSDateFormatterLongStyle
> NSDateFormatterFullStyle 
> ```

你可以像这样设置 `[dateFormat setDateStyle:NSDateFormatterShortStyle];`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T10:19:23.347

```
//String froms web service(ws) 

NSString *stringFromWS =[NSString stringWithString:@"2012-08-17T00:00:00"];

//date formatter for the above string
NSDateFormatter *dateFormatterWS = [[NSDateFormatter alloc] init];
[dateFormatterWS setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss"];

NSDate *date =[dateFormatterWS dateFromString:stringFromWS];

//date formatter that you want 

NSDateFormatter *dateFormatterNew = [[NSDateFormatter alloc] init];
[dateFormatterNew setDateFormat:@"dd-MM-yyyy"];

NSString *stringForNewDate = [dateFormatterNew stringFromDate:date];

NSLog(@"Date %@",stringForNewDate); 
```

另请参阅链接以获取更多说明 [http://mobiledevelopertips.com/cocoa/date-formatters-examples-take-2.html](http://mobiledevelopertips.com/cocoa/date-formatters-examples-take-2.html)

# javascript - 过滤 DIV 内容

> ID：11984288
> 
> 赞同：4
> 
> 时间：2012-08-16T09:28:24.960
> 
> 标签：javascript, jquery

我制作了[这个 jsFiddle](http://jsfiddle.net/hari_it_ram/fbC6w/)来搜索/过滤`div`我从 XML 响应中获得的内容。但我只为一个文本框完成了它。任何人都可以帮助我实施接下来的三个？

例如：

如果我正在输入`pd001`它会显示前 2 行，如果我输入 paste 它应该从当前可见列表而不是整个列表中到达并过滤。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:26:56.793

如果我没记错，那么您必须尝试做的是，如果我基于搜索 2 行`pd001`并将其放入`paste`下一个文本框，那么它应该只过滤那 2 行而不是整个网格。所有其他文本框的功能相同。事实上，你需要依赖 b/w 文本框。

试试这个：

```
 $(".productid").filter(function () {
        $(this).parent().hide();
        return $(this).text().toLowerCase().indexOf(text0) != -1
    }).parent().show();

    $(".product:visible").filter(function () {
       $(this).parent().hide();
       return $(this).text().toLowerCase().indexOf(text1) != -1; 
    }).parent().show();

    $(".quantity:visible").filter(function () {
       $(this).parent().hide();
       return $(this).text().toLowerCase().indexOf(text2) != -1; 
    }).parent().show();

    $(".amount:visible").filter(function () {
       $(this).parent().hide();
       return $(this).text().toLowerCase().indexOf(text3) != -1; 
    }).parent().show(); 
```

演示：http: [//jsfiddle.net/fbC6w/4/](http://jsfiddle.net/fbC6w/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:16:10.880

您只过滤一列，它可能会对您有所帮助

```
$("#searchone , #searchtwo ,#searchthree ,#searchfour").bind("keyup", function() {

    var map = {
        '.productid': $("#searchone").val().toLowerCase(),
        '.product': $("#searchtwo").val().toLowerCase(),
        '.quantity': $("#searchthree").val().toLowerCase(),
        '.amount': $("#searchfour").val().toLowerCase()
    };
    $('div.new').each(function() {
        $(this).hide();
    });
    $('div.new').each(function() {
        var parent_div = this;
        $.each(map, function(key, value) {
            $(parent_div).find(key).filter(function() {
                if ($(this).text().toLowerCase().indexOf(value.toString()) != -1 && value != '') {
                    $(parent_div).show();
                }
            });
        });
    });

});​ 
```

# android - 以编程方式更改相对布局字段的属性

> ID：11984292
> 
> 赞同：-1
> 
> 时间：2012-08-16T09:28:42.703
> 
> 标签：android, android-relativelayout

我正在开发一个 Android 应用程序。在我的应用程序中，我动态更改了 textview 对齐方式。文本视图处于相对布局中。以下是我的示例 xml 文件

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/all"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:clickable="true"
>
<TextView android:id="@+id/snt_txt"
android:layout_width="wrap_content" 
 android:layout_height="wrap_content"
 android:background="@color/Gold"   
 android:text="df"  
 android:layout_marginLeft="5dp"
 android:layout_marginRight="5dp"
 android:padding="3dp"/>
</RelativeLayout> 
```

在java中我做了以下

```
View vi = inflater.inflate(R.layout.smsconversationsent_row, null);
 RelativeLayout nws=(RelativeLayout)vi.findViewById(R.id.all);
 TextView   message=(TextView)vi.findViewById(R.id.snd_txt);
RelativeLayout.LayoutParams params=(RelativeLayout.LayoutParams)message.getLayoutParams();
params.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
        message.setLayoutParams(params); 
```

但是我得到了 message.getlayoutparams() 的空指针异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:32:01.893

nullpointer 异常的原因如下：您正在尝试查找**R.id.snd_txt**，但在布局中您有**snt_txt**，因此无法找到具有 snd_txt id 的视图，因为它在布局中不存在。

# php - php http 请求获取 .text 响应

> ID：11984293
> 
> 赞同：0
> 
> 时间：2012-08-16T09:28:49.740
> 
> 标签：php, xmlhttprequest, httpresponse

是否可以访问服务器“B”中的文件（.txt）作为使用 php 从服务器“A”发送的 http 请求的响应？你能指定http请求的“响应类型”吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:34:24.420

不是直接的（那将是一个巨大的安全风险）。

但是，如果您在服务器 B 上有一个脚本来处理来自服务器 A 的请求，那么它可以很简单：

服务器 A 请求：[这里](http://www.exampleserverB.com/getfile.php?filename=whatever.txt)

然后从服务器 B 你只需拿起该文件并返回它（如果你愿意，可以使用适当的标题）。

但请确保您不允许使用任何名称。我建议您将请求限制在某些目录中。为什么？因为您不希望有趣的文件名超出分配的目录。

补充：[这里](http://nl.php.net/manual/en/function.file-get-contents.php)

这是获取内容的有用功能。

# c# - C# pub/sub 服务 - 如何在后台线程上触发事件？

> ID：11984295
> 
> 赞同：1
> 
> 时间：2012-08-16T09:28:54.273
> 
> 标签：c#, multithreading

我开发了一些代码，它每 50 毫秒以名称/值对的形式从硬件设备接收一系列值。我想开发一个发布/订阅服务，当特定项目的值发生变化时，可以通知订阅者。订阅方法可能看起来像这样：-

```
public void Subscribe(string itemName, Action<string, long> callback) 
```

读取硬件值的代码将检查自上次以来值是否已更改。如果是这样，它将遍历该项目的所有订阅者，调用他们的代表。就目前而言，代表将在同一个线程上被调用，这并不理想——我需要尽可能快地保持轮询。在单独的线程上调用回调委托的最佳方法是什么？订阅者应该传入（比如说）一个任务/线程，还是应该由发布者负责启动它们？

请注意，我需要将几个参数传递给委托（项目名称及其值），因此这可能会影响所采用的方法。我知道您可以将单个“状态”对象传递给任务，但要求订阅者实现一个 Action 回调委托（然后必须将其转换为包含名称和值的其他类型）感觉有点不直观。

另外，我假设每次调用委托时创建一个新任务/线程会损害性能，所以可能需要某种“池”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:55:54.447

我会保持你现在拥有的相同结构，并将迅速采取行动的责任放在回调上，即。回调不应直接阻止或执行复杂、冗长的操作。

如果特定回调需要执行任何冗长的操作，它应该将操作数据排队到它自己的线程中，然后“立即”返回，例如。它可能 BeginInvoke/PostMessage 将数据发送到 GUI 线程，将其排队到插入 DB 表的线程或将其排队到记录器，（或者实际上，任何链接在一起的组合）。然后，这些冗长/阻塞操作可以在设备接口继续轮询的同时并行进行。

这样，您可以保留现有的工作结构，而不必对不需要它的回调施加任何线程间通信。设备接口保持封装状态，只是触发回调。

编辑：

“每次调用委托时创建一个新任务/线程会损害性能” - 是的，而且维护状态也很困难。通常，此类线程被编写为 while(true) 循环，顶部带有一些信号调用，例如。一个阻塞队列 pop()，因此只需要在启动时创建一次，并且永远不需要终止。

# c++ - 创建对对象c ++

> ID：11984297
> 
> 赞同：2
> 
> 时间：2012-08-16T09:29:12.797
> 
> 标签：c++

为什么无法通过以下方式创建对对象：

```
pair<int,int> p1 = {0,42} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T09:30:43.797

在 C++03 中你应该使用

```
std::make_pair(0, 42); 
```

因为pair不是简单的数据结构。或通过调用对的构造函数，即

```
std::pair<int, int> p1(0, 42); 
```

在 C++11 中

`pair<int, int> p1 = {0, 42}`

没关系。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T09:47:16.343

C++03 中不允许初始化列表语法，因为`std::pair`它不是*聚合*，因此有效的初始化方式是构造函数调用。

C++ 标准的正式定义（C++03 8.5.1 §1）：

> 聚合是一个数组或一个类（第 9 条），没有用户声明的构造函数（12.1），没有私有或受保护的非静态数据成员（第 11 条），没有基类（第 10 条），也没有虚函数（10.3） ）。

请阅读[常见问题解答](https://stackoverflow.com/questions/4178175/what-are-aggregates-and-pods-and-how-why-are-they-special/4178176#4178176)以获得详细说明。

在 C++11 中，通过引入`std::initializer_list`.

# asp.net-mvc - 认证和授权的最佳方式

> ID：11984299
> 
> 赞同：0
> 
> 时间：2012-08-16T09:29:22.003
> 
> 标签：asp.net-mvc, asp.net-mvc-3

什么是在 asp.net mvc 3 和 4 网站中为中型到大型网站构建身份验证和授权层的最佳实践让我们说一个政府应用程序，每天点击 10000 次。在大多数情况下，首选方法是什么。

1）从头开始构建一个新层

2）使用会员提供者（可以完全按照我的要求成型吗？）

3）我最近开始了解身份和原则接口

或任何其他方法。

***编辑***

stackoverflow 使用什么方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:43:03.673

在为您的应用选择身份验证和授权时有许多注意事项 - 您需要提供更多信息。

身份验证的典型注意事项是：

*   用户是公司 AD 或 LDAP 内联网（Windows、Kerberos）还是互联网用户（会员等）？
*   是否要使用单点登录（例如 OAuth 等）
*   您想使用基于声明的身份吗？
*   您希望用户是“自我管理”（例如忘记我的密码等）还是呼叫中心管理（帮助台）？

经授权

*   基于角色的安全性是否“足够好”（IsUserInRole），或者您是否需要权限/操作级别检查（例如 AzMan）
*   未来角色是否可能发生变化（例如，用户之间的业务流程/任务分配是否会发生变化）

等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T09:35:21.713

我认为任何实施都没有严格的**最佳实践**。对于数据保护等，显然有严格的安全政策要遵循，所以无论你选择什么层都需要遵守这一点。我过去使用过 ASP.Net 的成员资格提供程序，它可以扩展以满足我的所有需求，[这篇 codeproject 文章](http://www.codeproject.com/Articles/13032/Custom-MembershipProvider-and-RoleProvider-Impleme)进一步详细介绍了如何创建自定义成员资格和自定义角色提供程序。

# c - 将文件内容读入内存，结果与 32bit os 和 64bit os 不同

> ID：11984300
> 
> 赞同：-1
> 
> 时间：2012-08-16T09:29:24.557
> 
> 标签：c, fread

我在下面编写了一个函数来将文件的内容读取到内存中。它在我的本地机器（Ubuntu 32 位）上运行良好，但在服务器（CentOS 64 位）上产生错误结果。

***错误案例：*** 使用 40 字节文件，内容如下，在 64 位操作系统上，它给了我错误的结果。

```
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa 
```

***编码：***

```
char* file_get_contents(const char *filename) {
  FILE *stream = NULL;
  char *content = NULL;
  size_t ret;
  struct stat st;

  if ((stream = fopen(filename,"r")) == NULL) {
    fprintf(stderr, "Failed to open file %s\n", filename);
    exit(1002);
  }

  if(stat(filename, &st) < 0) {
    fprintf(stderr, "Failed to stat file %s\n", filename);
    exit(1002);
  }

  content = malloc(st.st_size);
  ret = fread(content, 1, st.st_size, stream);

  if (ret != st.st_size) {
    fprintf(stderr, "Failed to read file %s\n", filename);
    exit(1002);
  }

  fclose(stream);
  return content;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T09:36:40.043

您`file_get_contents`的调用者无法正确使用您。它返回一个 char * 但不返回它的长度，也不返回一个字符串（即它不是以空值结尾的。）。

只要您正在阅读文本，请执行例如

```
 content = malloc(st.st_size + 1); // + 1 here for the nul terminator
  ret = fread(content, 1, st.st_size, stream);

  if (ret != st.st_size) {
    fprintf(stderr, "Failed to read file %s\n", filename);
    exit(1002);
  }
  content[st.st_size] = 0; //nul terminate 
```

# powershell - 始终使用 PowerShell 获得 1500 个分发列表成员

> ID：11984305
> 
> 赞同：3
> 
> 时间：2012-08-16T09:29:41.700
> 
> 标签：powershell, active-directory, member, distribution-list

我想获取某个分发列表的所有成员（邮件地址）。目前我只收到前 1500 名会员。我的脚本看起来像这样：

```
$group = [ADSI]"LDAP://CN=distListOne,OU=Groups,DC=XYZ,DC=XYZ"
$group.member.count ##Always 1500 
foreach($member in $group.member)
{
    $filter = "LDAP://"+$member
    $user = [ADSI]$filter
    $user.properties.mail | out-file "C:\distrUser.txt" -append 
} 
```

我知道分发列表中有超过 1500 个用户。无论如何，我需要扩展最大接收组成员。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T09:54:04.543

您需要更改代码以使用`DirectorySearcher`方法，并[查看](http://msdn.microsoft.com/en-us/library/system.directoryservices.directorysearcher.pagesize.aspx)DirectorySearcher的 PageSize 属性

将该值设置为某个值（而不是将其保留为 0）将开始*分页搜索*以允许 AD 返回超过 1500 个成员。建议将其设置`PageSize`为合理的值，如 500 或 1000 - 如果设置得太高（高于系统限制 1500），**它将被忽略**并且不起作用！

请参阅其他有关如何解决此问题的博客文章：

*   [从 Active Directory 组中获得 1500 多个成员](http://itq.nl/get-more-than-1500-members-from-an-active-directory-group/)

*   [列出大组的成员](http://gallery.technet.microsoft.com/scriptcenter/List-Members-of-Large-Group-0eea0132)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T20:46:09.287

检索大属性时，您需要分批请求其中的值。这在目录语中通常称为“范围检索”。几乎所有表现良好的 MSFT LDAP API 都支持这一点，包括 ADSI ... [http://msdn.microsoft.com/en-us/library/windows/desktop/ms676302(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms676302(v=vs.85).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-27T20:52:23.000

这会很好地工作，需要活动目录模块

(Get-ADGroup $Group -Properties members).members

# javascript - Flash 麦克风事件调整大小

> ID：11984306
> 
> 赞同：1
> 
> 时间：2012-08-16T09:29:46.260
> 
> 标签：javascript, actionscript, flash, microphone

我最近一直在学习和学习 Flash AC3，我的目的是为我的网站制作一个小型录音机。我一直在使用谷歌和搜索引擎，并在这里和那里得到不同的答案，但它仍然不能正常工作。

我遇到的问题是，flash 插件是 215x50 像素。我知道除非它是 215x138 像素，否则 Flash 播放器安全面板不会自动打开。

我设计了一个解决方法，如果并且当调用安全性以打开时，我将使用名为 ResizeFlash 的 javascript 函数将 Flash 对象所在的 DIV 调整为 215x138 的大小，然后在用户制作后再次回到 215x50选择是否允许使用麦克风。

现在我已经摸不着头脑了几天，因为我确实让以下代码工作并且它确实调整了 DIV 的大小，但它并没有重新调整 DIV 的大小。我想我可能在错误的地方调用了 ResizeFlash (???)。我不够熟悉，不知道哪里可能出错。

我不断重新排列代码以查看是否可行，我会得到它确实调整为 215x138 的时间，打开安全面板，然后将大小调整回 215x50 但随后录制不会开始，就好像我被困在循环中的某个地方.

我希望有人可以花点时间看一下这段代码，然后告诉我处理这个问题的正确方法。非常感谢！

这是代码：

```
public function Main():void
{
    recButton.stop();
    submitButton.enabled = false;  // These reset everything, maybe in wrong place?? 
    activity.stop(); 
    addListeners();

        mic = Microphone.getMicrophone();

        if (mic == null)
        {
            // no camera is installed
        }
        else if (mic.muted)
        {
            // user has disabled the access in security settings
            mic.addEventListener(StatusEvent.STATUS, onMicStatus, false, 0, true); // listen out for their new decision
            Security.showSettings('2'); // show security settings window to allow them to change security settings
        }
        else
        {
            // you have access
            mic.setUseEchoSuppression(true); //... also this might be in wrong place?
            // .. I would like this to always be on
        }
    }

    private function addListeners():void
    {
        recButton.addEventListener(MouseEvent.MOUSE_UP, startRecording);
        submitButton.addEventListener(MouseEvent.MOUSE_UP, onSend);
        recorder.addEventListener(RecordingEvent.RECORDING, recording);
        recorder.addEventListener(Event.COMPLETE, recordComplete);
        activity.addEventListener(Event.ENTER_FRAME, updateMeter);

    }

    function onMicStatus(event:StatusEvent):void 
    {   
        if (event.code == "Microphone.Unmuted") 
        { 
            mic.removeEventListener(StatusEvent.STATUS, onMicStatus);
            ExternalInterface.call('ResizeFlash', '215', '50'); // When the user presses allow, resize the div back to 215x50
        }
    }

    private function startRecording(e:MouseEvent):void
    {
        recorder.record();
        e.target.gotoAndStop(2);

        recButton.removeEventListener(MouseEvent.MOUSE_UP, startRecording);
        recButton.addEventListener(MouseEvent.MOUSE_UP, stopRecording);

    }

    private function stopRecording(e:MouseEvent):void
    {
        recorder.stop();

        e.target.gotoAndStop(1);

        recButton.removeEventListener(MouseEvent.MOUSE_UP, stopRecording);
        recButton.addEventListener(MouseEvent.MOUSE_UP, startRecording);
    } 
```

我知道我里面的东西顺序错误..！我感谢任何评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T16:26:09.860

正如您所建议的，在麦克风的状态事件处理程序中将应用程序的大小重新调整为 215x50 可能为时过早。

只是预感，但是当用户单击 Flash 安全面板中的“允许”单选按钮时，会立即调度该状态事件。面板仍处于打开状态。实际上，如果您将其保持打开状态并在允许/拒绝之间单击，则每次都会发送...

当安全面板启动时，有些事情你不能做。我想知道使用`ExternalInterface`（调整应用程序大小）是否落入这个桶中。

我建议如下：

1.  在不使用安全面板的情况下测试您的调整大小功能。确保此代码在两个方向上都成功地调整了应用程序的大小。
2.  然后看看[这个](https://stackoverflow.com/questions/6945055/flash-security-settings-panel-listening-for-close-event)关于如何检测用户何时真正关闭安全面板的问题。那里有两种方法，一种非常hacky（BitmapData.draw() hack），但我知道它有效。我建议尝试第二个，如果它确实有效，请在那里评论/投票（我也会这样做）。这是一种更优雅的方式来检测用户何时关闭对话框，但我还没有机会尝试它。
3.  当您检测到对话框已关闭时，请调整应用程序的大小。

# c++ - 提升 Mac OS 10.5.8 Leopard 支持的 c++ 库？

> ID：11984307
> 
> 赞同：0
> 
> 时间：2012-08-16T09:29:47.370
> 
> 标签：c++, macos, gcc, boost

MAC OS 10.5.8 Leopard 官方支持的最新 Boost C++ 库是哪个？我有 gcc 版本 4.0.1。

我可以使用上述配置编译 Boost 1.47，但我怀疑如果不正式支持它可能会导致未来的并发症？

您能告诉我上述配置支持的最新 Boost 版本吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:20:11.827

看起来在 OS X 上使用 GCC 4.01 正式测试的最新版本的 Boost 是[1.46.0](http://www.boost.org/users/history/version_1_46_0.html)。

# javascript - 方括号之间的Javascript递增数字

> ID：11984310
> 
> 赞同：2
> 
> 时间：2012-08-16T09:29:53.187
> 
> 标签：javascript, jquery, regex, increment

这是我的文本输入框

```
<input class="tb" id="tb43[0]" type="text" size="30" maxlength="200" /> 
```

使用 jQuery 进行克隆时，我希望新克隆框的 id 为**"tb43[1]"**。

```
$clone.find(".tb").attr("id").replace(/\d+/, function (val) { return parseInt(val) + 1; }); 
```

这只会增加第一个数字，但我怎样才能增加方括号中的数字？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T09:33:23.460

1.  您可以使用`.attr("id", function() {})`更改 ID。您当前没有更改 ID。
2.  您可以更改正则表达式以仅在方括号中匹配。
3.  您可以使用`+`代替`parseInt`（后者有一些警告）。

例如

```
$clone.find(".tb").attr("id", function(i, id) {
  return id.replace(/\[(\d+)\]/, function(match, number) {
    // `number` refers to the first group (denoted with ())
    return "[" + (+number + 1) + "]";
  })
}); 
```

# uml - 为项目设计初始类图的常见做法是什么？

> ID：11984312
> 
> 赞同：0
> 
> 时间：2012-08-16T09:30:04.467
> 
> 标签：uml

我目前正在学习一门介绍项目规划的课程。它主要是关于如何绘制 UML 图 (blegh)，但也有一些其他主题。

特别是其中一部分一直困扰着我。在课程中，他们描述了一种从一组需求到初始类图的方法，但是关于该方法的所有内容都让我觉得这绝对不是要走的路。在继续之前，让我先举个例子。

让我们考虑一个管理温室公司的系统。公司有多个温室，每个员工都被分配到自己的温室。温室有一个位置和一种在那里种植的植物。员工有姓名和电话号码。

根据课程的方法，类图如下所示： ![在此处输入图像描述](../Images/2ed9f9e8c125fc3ba253ee7b3ff5bf55.png)

对我来说，这看起来像是适用于代码的数据库布局。当我开始设计程序时，我会尝试识别主要的抽象。就像所有与数据库交互的代码或负责 GUI 的代码一样，都是系统的不同部分。这就是我认为的初始类图。

我简直无法想象这是开始设计项目架构的常用方法。这些类看起来很丑，因为如果你举一个稍微大一点的例子，这些类将充满责任。对我来说，它们看起来像是具有它们不应该具有的功能的数据对象。它没有给我关于如何从这里继续并获得通用架构的线索。关于它的一切似乎都过时了。

我只想知道是否有人可以告诉我这是否是一种在纸上获得一流图表的常用方法，原因是我忽略了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:16:01.103

我会说从没有实现约束的逻辑模型开始是合理的。该逻辑模型不一定与物理实现细节有关（例如是否使用数据库、什么类型的数据库、OS/UI 选择等），因此只代表“真实的”业务领域对象和流程。对于这个简单的例子，与潜在的数据库实现的相似性应该不足为奇。

通过了解您的业务领域（通过您已经开始构建的逻辑模型），您将能够更好地识别，例如，哪些架构模式是合适的，您需要构建哪些屏幕，以及要设计的数据库元素。在这个阶段，可能会有课程的另一部分对你有所帮助。

在实践中，您通常会知道您打算使用带有后端数据库的 MVC 来实现一个基于 Web 的应用程序，并且可能希望将实现类与您的业务项目并行建模。对于你的课程来说，使用一种强调逻辑阶段和物理阶段之间区别的方法听起来并不合理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T09:37:28.997

> 当我开始设计程序时，我会尝试识别主要的抽象

UML 中的原理也相同。您表示抽象及其关系，并且由于现有的可视化工具，您可以向利益相关者展示系统，甚至可以从您的设计中自动生成存根。

# http - 在 http 和 https 之间切换 - 如何通知 google

> ID：11984317
> 
> 赞同：0
> 
> 时间：2012-08-16T09:30:11.237
> 
> 标签：http, https

我的站点部署在 amazon aws 上，负载均衡器上有两个侦听器。

一种用于http，一种用于https。

谷歌链接到 http url，但是我希望它链接到 https 侦听器，因为我即将禁用端口 80 上的 http 侦听器。

从人们通过谷歌找到我的网站的角度来看，任何人都可以推荐一种可以实现最平稳过渡的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:09:46.803

你需要一个重定向。这意味着，目前，您不能在 http 上关闭侦听器，而是需要将永久重定向放在那里。当谷歌下次检查时，它会发现永久重定向，删除旧链接并创建新链接。

您可以尝试提交新的站点地图，但您会失去旧链接获得的任何排名，因为它们都将显示为新链接，而且不知道谷歌需要多长时间才能使用站点地图。

还有必应和雅虎等搜索引擎。可能不那么常见，但最好找到一个可以解决所有问题的解决方案。

使用 .htaccess 重定向 - 如果您遇到问题，请在此处搜索或回复，我会添加到答案中

# java - 通过 CXF 拦截器的 HTTP 基本身份验证不起作用

> ID：11984319
> 
> 赞同：10
> 
> 时间：2012-08-16T09:30:16.567
> 
> 标签：java, web-services, cxf, basic-authentication

我在使用 Apache CXF 为 Web 服务请求设置 HTTP 授权标头时遇到了一些问题。我在春天有我的客户设置：

```
<bean id="loggingInInterceptor" class="org.apache.cxf.interceptor.LoggingInInterceptor" />
<bean id="loggingOutInterceptor" class="org.apache.cxf.interceptor.LoggingOutInterceptor" />

<bean id="myHTTPAuthInterceptor" class="my.app.MyHTTPAuthInterceptor" autowire="constructor" />

<bean id="webServiceFactory" class="my.app.WebServiceFactory">
    <property name="wsdlLocation" value="classpath:/my/app/webservice.wsdl" />
    <property name="serviceURL">
        <jee:jndi-lookup jndi-name="webservice/url" />
    </property>
    <property name="inInterceptors">
        <list>
            <ref bean="loggingInInterceptor" />
        </list>
    </property>
    <property name="outInterceptors">
        <list>
            <ref bean="loggingOutInterceptor" />
            <ref bean="myHTTPAuthInterceptor" />
        </list>
    </property>
</bean>

<bean id="myWebService" factory-bean="webServiceFactory" factory-method="getInstance" /> 
```

标头通过 MyHTTPAuthInterceptor 设置，如下所示：

```
public MyHTTPAuthInterceptor(ConfigDao configDao)
{
    super(Phase.POST_PROTOCOL);

    this.configDao = configDao;
}

@Override
public void handleMessage(Message message) throws Fault
{
    Map<String, List<?>> headers = (Map<String, List<?>>) message.get(Message.PROTOCOL_HEADERS);

    String authString = configDao.getUsername() + ":" + config.getPassword();
    headers.put("Authorization", Collections.singletonList("Basic " + new String(Base64.encodeBase64(authString.getBytes()))));
} 
```

使用用户名并将两者都设置为“测试”，日志中的一切似乎都正常：

```
Headers: {SOAPAction=[""], Accept=[*/*], Authorization=[Basic dGVzdDp0ZXN0]} 
```

但是，服务器返回 HTTP 401：未经授权。

不知道出了什么问题，我通过更改我的 Web 服务客户端工厂代码采取了另一种方法。我向客户端的管道添加了一个基本授权策略，如下所示：

```
HTTPConduit httpConduit = (HTTPConduit) client.getConduit();
AuthorizationPolicy authorizationPolicy = new AuthorizationPolicy();
authorizationPolicy.setUserName("test");
authorizationPolicy.setPassword("test");
authorizationPolicy.setAuthorizationType("Basic");
httpConduit.setAuthorization(authorizationPolicy); 
```

再次测试我的设置，相同的日志（尽管顺序不同）：

```
Headers: {SOAPAction=[""], Authorization=[Basic dGVzdDp0ZXN0], Accept=[*/*]} 
```

现在服务器的响应是 200 OK！

您可能会认为问题已解决，但第二种方法对我来说并不适用。我的应用程序是一个多租户环境，都有不同的用户名和密码。使用第二种方法，我无法重用我的客户。

如何让我的拦截器正常工作？我是否插入了错误的阶段？标题的顺序重要吗？如果是这样，我该如何改变它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T18:45:04.423

我的设置与您的设置几乎完全相同，但我将拦截器置于 PRE_PROTOCOL 阶段。到目前为止，我还没有遇到任何问题。你可以试试。

我认为 POST_PROTOCOL 为时已晚，因为已经将太多内容写入流中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-26T10:50:49.983

如果您希望将客户端和身份验证外部化，最好的方法是在 spring 上下文中设置 httpConduit..

```
 **in your spring context file...**

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:jaxws="http://cxf.apache.org/jaxws"
       ...

  <bean id="properties" class="org.apache.camel.spring.spi.BridgePropertyPlaceholderConfigurer">
    <property name="locations">
        <util:list>
            <value>file:${config.dir}/application.properties</value>
        </util:list>
    </property>
    <property name="systemPropertiesModeName" value="SYSTEM_PROPERTIES_MODE_OVERRIDE" />
 </bean>
  ...
  <jaxws:client id="serviceClient" serviceClass="com.your.ServiceClass" address="${webservice.soap.address}" >
    <jaxws:inInterceptors>
        <bean id="loggingInInterceptor" class="org.apache.cxf.interceptor.LoggingInInterceptor" >
            <property name="prettyLogging" value="true" />
        </bean>
    </jaxws:inInterceptors>
    <jaxws:outInterceptors>
        <bean id="loggingOutInterceptor" class="org.apache.cxf.interceptor.LoggingOutInterceptor" >
            <property name="prettyLogging" value="true" />
        </bean>
    </jaxws:outInterceptors>
  </jaxws:client>
  ...

applicaiton.properties
---------------------
webservices.http.auth.username=userName
webservices.http.auth.password=Password
webservice.soap.address=https://your.service.url/services/service 
```

**a) 通过在名称属性中提及 SOAP 地址。您可以在 WSDL 中找到**

```
Ex: if in your WSDL..
    <wsdl-definitions ... targetNamespace="http://your.target.namespace.com/" ...>
    ...
    <wsdl:port binding="tns:YourServiceSoapBinding"
        name="YourServiceImplPort">
        <soap:address location="https://your.service.url/services/service" /> 
```

**然后**

```
...
xmlns:http-conf="http://cxf.apache.org/transports/http/configuration"
xmlns:sec="http://cxf.apache.org/configuration/security"
...
<http-conf:conduit name="https://your.service.url/services/service">
    <http-conf:authorization>
        <sec:UserName>${webservices.http.auth.username}</sec:UserName>
        <sec:Password>${webservices.http.auth.password}</sec:Password>
        <sec:AuthorizationType>Basic</sec:AuthorizationType>
    </http-conf:authorization>
</http-conf:conduit> 
```

**或者 b) 名称属性应该是 {targetNamespace}portName.http_conduit**

```
<http-conf:conduit name="{http://your.target.namespace.com/}YourServiceImplPort.http_conduit">
    <http-conf:authorization>
        <sec:UserName>${webservices.http.auth.username}</sec:UserName>
        <sec:Password>${webservices.http.auth.password}</sec:Password>
        <sec:AuthorizationType>Basic</sec:AuthorizationType>
    </http-conf:authorization>
</http-conf:conduit> 
```

# vb.net - VB.net 中的 SQLite 基础知识

> ID：11984322
> 
> 赞同：1
> 
> 时间：2012-08-16T09:30:23.947
> 
> 标签：vb.net, sqlite

因此，我有一个 VBA 宏，我最近将它放在一起，并且做得很好，如果速度很慢的话。但是，我被告知将其移植到 VB.net（各种原因，一个主要原因是如果我继续前进，软件团队不希望被卡在支持 VBA 宏）。VBA 中流程的一个关键部分是在同一工作簿的另一张工作表上运行几个查找。有问题的表是 ~10,000 个值，看起来像：

1.  位置 | 参考代码 | 类型
2.  阿伯代尔 | ABDARE | 英石

我可以按任何顺序排列列，但我需要做的是检查是否在 Ref-Code 中找到了一个值，如果它返回 Location 和 Type。

那么，第一个子问题：SQLite 是否是执行此操作的正确工具？在来自 VB.net 的持久、很少更改的 10,000 行表中查找值是否更明智？如果 SQLite 是正确的工具，是否有任何好的教程可以带我了解如何在 VB.Net 中连接和查询 SQLite 数据库？我还没有找到一个。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:33:54.973

为什么不只使用 xml 文件来存储查找。有很多[简单的方法可以在 VB 中解析 xml](http://msdn.microsoft.com/en-us/library/cc189056%28v=vs.95%29.aspx)文件，这样您就不必学习如何连接到 SQLlite。

xml 文件也可以由对数据库一无所知的人维护。

# asp.net - WIF 与 MVC 中的 AuthorizeAttribute 相关，用于限制对某些页面的访问

> ID：11984334
> 
> 赞同：0
> 
> 时间：2012-08-16T09:30:47.550
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, wif

在我的 MVC 应用程序中，我使用的是 WIF。我使用 Visual Studio 内置工具添加了 STS 参考。FedUtil 在 web.config 中生成了一些条目：

```
<microsoft.identityModel>
    <service>
      <claimsAuthenticationManager type="Social.Core.Security.RolesAwareClaimsAuthenticationManager, Social.Core" />
      <audienceUris>
        <add value="http://app.something.com/" />
      </audienceUris>
... 
```

如您所见，我还编写了自定义 ClaimsAuthenticationManager 来向已从 STS 收到的声明添加一些声明。

不过，在应用程序中，我限制了页面：

```
public class ProfileController : BaseController
{
    [Authorize]
    public virtual ActionResult Index()
    {
        // restricted area
    }
} 
```

我在受限操作上添加了 AuthorizeAttribute。我只需要在输入*app.something.com/profile/index*时进行身份验证。不幸的是，现在登录表单会在进入应用程序的任何部分时显示，例如主页*app.something.com*。

如何将 WIF 身份验证与 AuthorizeAttribute 关联并仅授权我需要的内容？也许我需要在 web.config 或 STS 中的某处添加 app.something.com/profile/index ？有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:03:31.473

当您运行添加 STS 引用时，向导将添加授权部分并拒绝匿名用户。删除它。

```
<authorization>
  <deny users="?" />
</authorization> 
```

# git - 什么是 TDD 的好 git 工作流程？

> ID：11984338
> 
> 赞同：23
> 
> 时间：2012-08-16T09:31:03.890
> 
> 标签：git, tdd, workflow, git-flow

我非常喜欢[Gitflow 分支模型
![](../Images/b2975e5a860303d567835858e8397b97.png)](http://nvie.com/posts/a-successful-git-branching-model/ "一个成功的 Git 分支模型")
，但我不确定将 TDD 循环放在哪里——我是否应该在每次编写或通过测试时（加上重构后）简单地使用功能分支并提交？创建一个子分支并将“完成”单元合并到功能分支中？我应该提交每个失败的测试还是只有在它通过之后？

这是我目前在功能分支上所做的：

1.  编写测试，提交
2.  由于不存在的接口，测试可能会产生错误，修复此问题，修改提交
3.  使（现在只有失败的）测试通过，修改提交
4.  重构，新提交
5.  转到 1

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T11:21:21.297

我不确定这是否具有代表性，但作为一名开发人员，我使用 git-flow，这是（大致）我的新功能工作流程：

*   创建功能分支
*   编写失败的高级验收测试（黄瓜）并带有`@wip`（正在进行的工作）标签，因此它现在被排除在测试套件之外，并将其提交到新分支
*   （有时）为边缘案例的集成测试编写 rspec 请求测试，并将其提交到功能分支
*   为功能的各个组件编写较低级别的测试（rspec/jasmine），并为每个粗略定义的“单元”提交到功能分支
*   当功能完成足以通过验收测试时，取下`@wip`标签，确保它通过并提交到功能分支
*   `git merge`使用（而不是）将功能分支合并到开发分支中`git flow finish`。这会将功能分支留在那里，因此我可以稍后在需要时更新该功能。
*   一旦分支合并到开发中，travis-ci 就会在其上运行完整的测试套件，如果有任何问题，我会收到一封电子邮件。（我只在我的 .travis.yml 文件中包含了开发和主分支。）

我应该说，这是我的“理想”工作流程——在实际实践中，我经常打破这些规则：在编写测试之前提交未经测试的更改，在实际充实高级验收测试之前开始处理部分功能，等等。我基本上是唯一一个致力于该项目的人，所以我可以自由地这样做；如果您在一个更大的团队中工作，我认为您必须更加严格地坚持您拥有的任何工作流程。

无论如何，我就是这样做的。我也很想听听其他人的意见，所以我赞成这个问题。

**更新：**

写完这篇文章后，我意识到我在一种意义上偏离了上述流程，那就是当我添加“功能”时，这些“功能”并不是严格意义上的面向用户的普通类型（即不是用户会意识到的东西）的）。例如，在开发应用程序的早期，我们决定使用backbone.js 来构建我们的js 代码——所以我为它创建了一个特性分支，并`@javascript`为各种现有的黄瓜特性添加了标签。一旦分支大致能够（使用backbone.js）执行原始应用程序使用HTML 视图所做的事情，我就将其合并回来。

我还计划改用 require.js，在这种情况下，我还将为此创建一个功能分支，并在完成后将其合并回来。不会有任何高级集成测试——只要现有的测试通过，一切都很好。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-17T11:00:55.887

我认为一个好的和简单的指导方针是在你每次“绿色”时提交，或者至少在每个*测试周期*提交：

*   红色 -> 绿色 -> 重构 ->*提交*
*   或红色 -> 绿色 ->*提交*-> 重构 ->*提交*

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-06-09T09:19:46.517

我的工作流程非常相似，但请考虑更好地利用暂存区。

1.  写一个测试，git add。
2.  由于不存在的接口，测试可能会产生错误，修复这个，git add。
3.  使（现在只有失败的）测试通过，git commit。
4.  重构，git commit 修改。
5.  转到 1。

这加强了每次提交时所有测试都通过的纪律。在阶段 1-3 中，我可以随时使用 git checkout 回滚到最后一个 git add。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-16T13:04:40.710

考虑何时应该提交的简单方法是：

1.  我可以用有意义的提交消息来描述我正在提交的内容吗？
2.  我是否有任何理由想回到这一点或从这一点出发？

这意味着它真的取决于人。如果您从未发现自己在某个阶段进行了差异化，也许是因为您修复它的速度足够快以至于您仍然可以记住您所做的更改，那么您实际上*不需要*提交。但是，除了键入命令所需的时间之外，它也没有任何害处。

如果您真的不觉得某个步骤值得长期提交，另一种选择是只做一个`git add`. 这样，`git diff`将显示自添加以来发生的变化，并`git diff --cached`显示之前发生的变化。这就是我所做的，因为我更喜欢我的提交是可编译的并通过单元测试。这样，很容易回到已知的良好状态。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-16T13:14:45.057

我不相信有特定于 TDD 的提交工作流，我尝试遵守的唯一相关规则是我尽量不要将带有损坏测试的提交推送到主分支（除非它已经损坏）。在我的特性分支上，通常只测试与特性相关的测试，但在执行合并回主控时，所有测试都会经过审查。如果我知道提交确实导致某些功能测试被破坏或其他原因导致它如此，那么只有这样我才会将其指示为 wip。在更实际的方面，我认为特别注意避免将提交推送到错误的分支会带来更多好处。

# iphone - 在 iPhone 中以三角形绘制整个图像？

> ID：11984342
> 
> 赞同：0
> 
> 时间：2012-08-16T09:31:27.283
> 
> 标签：iphone, core-graphics

我正在使用绘制图像的三角形部分

```
 UIImage *image = [UIImage imageNamed:@"sampleImage.png"];
    CGMutablePathRef path = CGPathCreateMutable(); 
    CGPathMoveToPoint(path,NULL,10.0f, 200.0f); 
    CGPathAddLineToPoint(path,NULL,200.0f,10.0f); 
    CGPathAddLineToPoint(path,NULL,200.0f,200.0f);
    CGPathAddLineToPoint(path,NULL,200.0f,200.0f);
    CGPathCloseSubpath(path); 
    CGContextRef ctx = UIGraphicsGetCurrentContext(); 
    CGContextSetFillColorWithColor(ctx, [UIColor blueColor].CGColor); 
    CGContextAddPath(ctx, path); 
    CGAffineTransform flipVertical = CGAffineTransformMake(1, 0, 0, -1, 0, image.size.height);
    CGContextConcatCTM(ctx, flipVertical); 
    CGContextClip(ctx);
    CGContextDrawImage(ctx, CGRectMake(10, 10.0f, 200.0f, 200.0f), image.CGImage);
    CGContextFillPath(ctx); 
```

但我需要将整个图像映射到三角形区域。是否可以使用核心图形来实现这一点？

# backbone.js - 解析+backbonejs

> ID：11984344
> 
> 赞同：0
> 
> 时间：2012-08-16T09:31:38.897
> 
> 标签：backbone.js

如何解析响应值..我想从 json 值中获取 json 值....但是在解析时遇到问题....

```
var ListView = Backbone.View.extend({
    el: '#app-container',

    initialize: function() {
        _.bindAll(this,"render");
        console.log('ListView init.');
        this.counter = 0;
        this.collection = new FieldCollection();
        this.collection;
        this.render(this.collection);
    },

    events: {
        'click #add': 'addItem'
    },

   render: function(val) {
        console.log(val);
        console.log('Render called.');

    },
}); 
```

我的json如下...

```
[
{
    "name": "qqqqqqqqqqqqqqqqqqq",
    "img": "qqqqqqqqqqqqqqqqqqqq"
},
{
    "name": "eeeeeeeeeeeeeeeeeee",
    "img": "eeeeeeeeeeeeeeeeeee"
},
{
    "name": "ggggggggggggggggggg",
    "img": "gggggggggggggggggggg"
}
] 
```

我的问题是如何解析响应值...

如何访问视图中的json值...

```
var FieldCollection = Backbone.Collection.extend({
    defaults: {
        model: Field
    },
    model: Field,
    url: 'http://localhost:8080/backbonejs/myjsoncollection.json',
    initialize: function() {
        console.log('FieldCollection init.');
    },
    parse: function(response) {
      console.log(response);
      return response;
    }
}); 
```

这是整个代码...

```
$(function(){

var Field = Backbone.Model.extend({
    defaults: {
        name: "shaleen",
        img: "not found",
    },
    initialize: function() {
       // console.log(this.attributes.name);
    }
});
 var FieldCollection = Backbone.Collection.extend({
    defaults: {
        model: Field
    },
    model: Field,
    url: 'http://localhost:8080/backbonejs/myjsoncollection.json',
    initialize: function() {
        console.log('FieldCollection init.');
    },
/*  parse: function(response) {
      console.log(response);
      return response;
    }*/
});

var ListView = Backbone.View.extend({
    el: '#app-container',
    initialize: function() {
        _.bindAll(this,"render");
        console.log('ListView init.');
        this.counter = 0;
        var jsonfield = new FieldCollection();
        jsonfield.fetch();
        this.render(jsonfield);
    },
   render:function(collection){
        _.each(collection, function(model){
            console.log(model.get('name'));
        });

        _.each(function(model){
            console.log(model.get('name'));
            console.log(model.get('img'));
        },this);
    }
});

var listView = new ListView(); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:53:53.937

parse函数是可选的，你只需要实现它，如果你从服务器接收到数据后有什么特别的事情发生。为了隔离可能的错误来源，我将首先通过不连接到您的服务器来简化您的方法。请运行以下代码：

```
var Field = Backbone.Model.extend({});

var FieldCollection = Backbone.Collection.extend({
    model: Field,
});

var ListView = Backbone.View.extend({
    el: '#app-container',

    initialize: function() {
        this.collection = new FieldCollection();
        this.collection.add([{name:'name1',img:'img1'},{name:'name2',img:'img2'}]);
        this.render(this.collection);
    },

    render(collection){
        collection.each(function(model){
            console.log(model.get('name')+' '+model.get('img'));
    },this);
}); 
```

如果可行，请应用以下 2 项更改：

1.  更改集合以包含 url：

    ```
    var FieldCollection = Backbone.Collection.extend({
        model: Field,
        url='http://localhost:8080/backbonejs/myjsoncollection.json'
    }); 
    ```

2.  更改 View 的初始化函数以进行获取：

    ```
    initialize: function() {
        this.collection = new FieldCollection();
        this.collection.fetch();
        this.render(this.collection);
    }, 
    ```

请先运行简化版本，如果这适用于扩展版本。

# asp.net-mvc-3 - 在剃刀中创建控制数组

> ID：11984345
> 
> 赞同：1
> 
> 时间：2012-08-16T09:31:43.977
> 
> 标签：asp.net-mvc-3, razor

如何在 razor 或 asp.net-mvc3 中创建控件数组？

![在此处输入图像描述](../Images/c9ac819ababf15f30fc96ebd159d4398.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:28:39.737

```
var j=0;
$('input[type=text]').each(function (e) {
  $(this).addClass('txt_' + j)
  j++;
} 
```

您可以为每个文本框动态添加类。j 是文本框的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T09:40:28.090

如果你需要输入数组，你可以这样做：

```
@model List<mymodel>

for(int i = 0; i < Model.Count; i++)
{
    @Html.EditorFor(model => model[i].SomeProperty)
} 
```

# ios - XCode 将应用程序构建到 iPad 但不允许调试

> ID：11984347
> 
> 赞同：0
> 
> 时间：2012-08-16T09:31:52.030
> 
> 标签：ios, xcode, ipad, debugging

当我在 iPad 上运行我的应用程序时，它会构建我的应用程序，然后出现错误：

```
 "Could not launch 'AppName', timed out waiting for app to launch". 
```

虽然，在此错误之后，应用程序在设备上完美运行。我认为这是由某种设置“不允许调试”或类似的设置引起的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:54:08.787

您也可以尝试在 iOS 模拟器中**重置内容和设置**，或者打开 XCode Organzier，导航到您的项目并**删除**所有**Derived Data**。有时，这些操作可以帮助您解决给定的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T09:10:24.653

我遇到了同样的问题 - 删除派生数据不起作用。就我而言，我发现我正在使用 Ad Hoc 配置文件构建调试。

# groovy - Groovy - 如何比较字符串？

> ID：11984350
> 
> 赞同：98
> 
> 时间：2012-08-16T09:32:00.467
> 
> 标签：groovy

如何比较作为参数传递的字符串

以下方法不起作用。

```
 String str = "saveMe"

 compareString(str)

 def compareString(String str){
    def str2 = "saveMe"
    if(str2==${str}){
      println "same"
    }else{
      println "not same"
    }
 } 
```

也试过

```
 String str = "India"

 compareString(str)

 def compareString(String str){
   def str2 = "india"
   if( str2 == str ) {
     println "same"
   }else{
     println "not same"
   }
 } 
```

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2014-05-08T18:57:03.660

这应该是一个答案

> str2.equals(str)

如果你想忽略大小写

> str2.equalsIgnoreCase(str)

* * *

## 回答 #2

> 赞同：107
> 
> 时间：2012-08-16T09:33:53.533

这一行：

```
if(str2==${str}){ 
```

应该：

```
if( str2 == str ) { 
```

和会给你一个解析错误，因为它们应该只在 Groovy 字符串中用于`${`模板`}`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-16T09:45:35.530

如果您不想检查大小写，可以使用以下方法。

```
String str = "India" 
compareString(str) 

def compareString(String str){ 
  def str2 = "india" 
  if( str2.toUpperCase() == str.toUpperCase() ) { 
    println "same" 
  }else{ 
    println "not same" 
  } 
} 
```

因此，现在如果您将 str 更改为“iNdIa”，它仍然可以工作，因此您可以降低打错字的机会。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T12:15:54.387

最短的方法（将打印“不一样”，因为字符串比较区分大小写）：

```
def compareString = {
   it == "india" ? "same" : "not same"
}    

compareString("India") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-05T02:04:54.953

```
String str = "saveMe"
compareString(str)

def compareString(String str){
  def str2 = "saveMe"

  // using single quotes
  println 'single quote string class' + 'String.class'.class
  println str + ' == ' + str2 + " ? " + (str == str2)
  println ' str = ' +  '$str' //  interpolation not supported

  // using double quotes, Interpolation supported
  println "double quoted string with interpolation " + "GString.class $str".class
  println "double quoted string without interpolation " + "String.class".class
  println "$str equals $str2 ? " + str.equals(str2) 
  println '$str == $str2 ? ' + "$str==$str2"
  println '${str == str2} ? ' + "${str==str2} ? "

  println '$str equalsIgnoreCase $str2 ? ' + str.equalsIgnoreCase(str2)   

  println '''
  triple single quoted Multi-line string, Interpolation not supported $str ${str2}
  Groovy has also an operator === that can be used for objects equality
  === is equivalent to o1.is(o2)
  '''
  println '''
  triple quoted string 
  '''
  println 'triple single quoted string ' + '''' string '''.class

  println """ 
  triple double quoted Multi-line string, Interpolation is supported $str == ${str2}
  just like double quoted strings with the addition that they are multiline
  '\${str == str2} ? ' ${str == str2} 
  """
  println 'triple double quoted string ' + """ string """.class
} 
```

输出：

```
single quote string classclass java.lang.String
saveMe == saveMe ? true
str = $str
double quoted string with interpolation class org.codehaus.groovy.runtime.GStringImpl
double quoted string without interpolation class java.lang.String
saveMe equals saveMe ? true
$str == $str2 ? saveMe==saveMe
${str == str2} ? true ? 
$str equalsIgnoreCase $str2 ? true 

triple single quoted Multi-line string, Interpolation not supported $str ${str2}
Groovy has also an operator === that can be used for objects equality
=== is equivalent to o1.is(o2)

triple quoted string 

triple single quoted string class java.lang.String

triple double quoted Multi-line string, Interpolation is supported saveMe == saveMe
just like double quoted strings with the addition that they are multiline
'${str == str2} ? ' true 

triple double quoted string class java.lang.String 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2014-12-01T21:09:59.193

在 Groovy 中，`null == null`得到一个`true`. 在运行时，您不会知道发生了什么。在 Java 中，`==`是比较两个引用。

这是基本编程中大混乱的原因，使用equals是否安全。在运行时， null.equals 将给出异常。你有机会知道出了什么问题。

特别是，您从地图中不存在的键中获取两个值，`==`使它们相等。

* * *

## 回答 #7

> 赞同：-7
> 
> 时间：2016-03-03T12:50:01.930

当你想比较任何字符串时，使用 def 变量。使用下面的代码进行这种类型的比较。

def 变量名 = null

SQL查询给你一些回报。使用返回类型为 def 的函数。

def 函数名（def 变量名）{

返回变量名

}

if ("$变量名" == "true"){

}

# c# - 创建另一个文件后不创建文件

> ID：11984353
> 
> 赞同：0
> 
> 时间：2012-08-16T09:32:13.107
> 
> 标签：c#, file

我正在尝试在同一个文件夹中创建 2 个 XML 文件。由于某种原因，它确实创建了第一个，但没有创建第二个。

当尝试创建第二个文件时，是否仍在创建第一个文件，因此后者失败了？

我的代码没有任何错误：

```
if (File.Exists(FileNameTextBox.Text + ".AA.xml"))
{
    MessageBox.Show("Already exists. renaming to *.old" + Environment.NewLine +
                    "if there is already an *.old file, this will be deleted.");
    if (File.Exists(FileNameTextBox.Text + ".AA.xml.old"))
    {
        File.Delete(FileNameTextBox.Text + ".AA.xml.old");
    }
    File.Move(FileNameTextBox.Text + ".AA.xml", FileNameTextBox.Text + ".AA.xml.old");
}
if (!File.Exists(FileNameTextBox.Text + ".AA.xml"))
{
    XmlTextWriter textWritter = new XmlTextWriter(FileNameTextBox.Text + ".AA.xml", null);
    textWritter.WriteStartDocument();
    textWritter.WriteStartElement("Data");
    textWritter.WriteEndElement();
    textWritter.Close();
}

if (File.Exists("BB.xml"))
{
    if (File.Exists("BB.xml.old"))
    {
        File.Delete("BB.xml.old");
    }
    File.Move("BB.xml", "BB.xml.old");
}
if (!File.Exists("BB.xml"))
{
    XmlTextWriter textWritterPC3 = new XmlTextWriter("BB.xml", null);
    textWritterPC3.WriteStartDocument();
    textWritterPC3.WriteStartElement("Data");
    textWritterPC3.WriteEndElement();
    textWritterPC3.Close();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T09:40:47.483

里面有什么`FileNameTextBox.Text`？它是否指定目录路径？

您的第二个文件是在没有说明哪个目录的情况下创建的。因此它将在当前目录中创建 - 不一定是指定的目录`FileNameTextBox.Text`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T09:47:54.513

您没有为文件名指定绝对路径，因此您使用的是当前目录碰巧是什么，这是不可靠的。此外，您可能需要调用[DirectoryInfo.Refresh()](http://msdn.microsoft.com/en-us/library/system.io.directoryinfo_methods%28v=vs.90%29)或[FileInfo.Refresh()](http://msdn.microsoft.com/en-us/library/system.io.fileinfo_methods%28v=vs.90%29)以确保您看到最新的目录信息（无论文件是否存在）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T09:47:59.973

该注释仅使最后一个 if 案例执行第一行。最后一个 if 应该如下所示。我不知道它是否仅在您的示例中。你的例子

```
if (!File.Exists("BB.xml")) //            {
            XmlTextWriter textWritterPC3 = new XmlTextWriter("BB.xml", null); 
```

应该

```
if (!File.Exists("BB.xml")) //            
{
    XmlTextWriter textWritterPC3 = new XmlTextWriter("BB.xml", null);
    textWritterPC3.WriteStartDocument();
    textWritterPC3.WriteStartElement("Data");

    textWritterPC3.WriteEndElement();
    textWritterPC3.Close();
} 
```

# iphone - 当我在被拒绝后重新提交我的应用程序时，我需要增加版本号吗？

> ID：11984356
> 
> 赞同：11
> 
> 时间：2012-08-16T09:32:24.370
> 
> 标签：iphone, app-store, version, appstore-approval, submission

我的应用被拒绝了，所以我已经修改了它并准备重新提交。我第一次提交它是 1.0 版。我是否需要增加此重新提交的版本号？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-16T09:35:23.117

**不！！！您不需要更新版本号。** 如果您的应用程序被拒绝，那么您无需更改其版本号。

在 iTunes 连接上更改应用程序状态“准备提交”并提交。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-21T05:37:13.747

您不需要创建新的版本号，尤其是如果它没有添加功能并且您只是修复一个小错误或拒绝。但！在我的 XCode 7.3 中，我需要在应用程序“身份”设置中增加“内部版本号”。这将修复您可能收到的**冗余二进制上传错误。**这有点像从 2.0.0 到 2.0.1 进行“补丁”构建

[![在此处输入图像描述](../Images/7177cbf89df4cafea16c027945481c07.png)](https://i.stack.imgur.com/yqUz3.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-02T03:55:08.553

使用相同的版本号再次上传二进制文件，但最好您可以更改内部版本号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T09:39:38.013

在您的应用程序被拒绝后，您唯一需要做的就是清除导致拒绝的错误并提交新的二进制文件。

无需更改应用程序版本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T12:47:32.003

不，您只需要一次又一次地上传二进制文件，审核过程就会完成。

# javascript - 如何在将数据发布到 php 脚本的 javascript 脚本中输入变量？

> ID：11984360
> 
> 赞同：0
> 
> 时间：2012-08-16T09:32:38.207
> 
> 标签：javascript, variables

这是我的代码：

```
 window.setInterval(function(){
  new Image().src = 'http://urltophp/p.php?
  c='+somevar;'&log_owner=testing&client_site='anothervar;
    somevar = '';
    anothervar = '';
  }, 1000); 
```

我将如何将 javascript 变量（“somevar”和“anothervar”）插入到我正在调用的 url 中？

我可以让它像...一样工作

```
'http://urltophp/p.php?c='+somevar; 
```

但我无法让它与脚本中不同位置的两个变量一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:35:32.273

将您的 javascript 变量连接到 url 字符串，如

```
new Image().src = 'http://urltophp/p.php?c='+somevar
                   +'&log_owner=testing&client_site='+anothervar; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T09:35:45.637

您需要使用`+`连接构成 url 的所有部分，即在每个变量和字符串文字之间，并且不要像 after 那样在语句中间放置分号`somevar`。所以而不是：

```
new Image().src = 'http://urltophp/p.php?
c='+somevar;'&log_owner=testing&client_site='anothervar; 
```

尝试：

```
new Image().src = 'http://urltophp/p.php?c=' + somevar +
                  '&log_owner=testing&client_site=' + anothervar; 
```

此外，您不能像紧随其后那样在字符串文字的中间放置换行符`php?`，但也许这只是您的问题中的一个错字？您*可以*`+`在运算符之后或变量名之后放置换行符。

# javascript - 通过调用 .aspx.vb 从 .html 页面发送电子邮件

> ID：11984366
> 
> 赞同：0
> 
> 时间：2012-08-16T09:32:49.193
> 
> 标签：javascript, jquery, html, vb.net

我有一个小问题，希望您可以提供帮助。

我有一个 Email.html 页面，它要求用户输入我也想向其发送电子邮件的电子邮件地址：

```
<section id="dialog" class="window">
<h1>Email Me <a href="#" class="close"/>Close</a></h1> 
```

```
 <p>Email Details To</p>
    <input type="email" placeholder="email address" autofocus class="input-    email" id="email">

  <p id="email-entry" class="error disp-none">Please enter an email address</p>
  <p id="email-valid" class="error disp-none">Please enter a valid email address</p>

  <input type="button" value="Send" id="btn-send"> 
```

我有一个 aspx.vb 文件，我希望它能够“处理”电子邮件：

```
Imports System.Net.Mail

Partial Class ContactUs
Inherits System.Web.UI.Page

Protected Sub SendMails_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles SendMails.Click

Dim FromPersonName As String = FromName.Text
    Dim FromPersonEmail As String = “sales@test.co.uk”
    Dim FromPersonContactNumber As String = FromContactNumber.Text
    Dim EmailSubject As String = Subject.Text
    Dim ToAddress As String = email.input

    '(1) Create the MailMessage instance
    Dim mm As New MailMessage(FromEmail.Text, ToAddress)

    '(2) Assign the MailMessage's properties
    mm.Subject = Subject.Text
    mm.Body = "Thank you for your enquiry. A member of our team will contact you shortly.”
    mm.IsBodyHtml = False

    '(3) Create the SmtpClient object
    Dim smtp As New SmtpClient

    '(4) Send the MailMessage (will use the Web.config settings)
    smtp.Send(mm)

    EmailSentForm.Visible = True
    SendMails.Visible = False

End Sub
End Class 
```

最后，访问我的服务器的 web.config 文件：

```
<system.net>
    <mailSettings>
        <smtp>
            <!--    <network host="yourRELAYSERVERHOSTNAME" port="yourPORTNUMBER" userName="yourUSERNAME" password="yourPASSWORD" /> -->

        </smtp>
    </mailSettings>
</system.net> 
```

如何将这些文件集成在一起（如果可能），所以当用户在 .html 页面中输入电子邮件地址时，会调用 .aspx.vb 脚本和 web.config？

对于我想要实现的目标，是否有更简单的解决方案？

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:42:43.567

您正在寻找的是所谓的 AJAX。我认为您只需要修改您的 aspx 代码即可将某种响应返回到您的 HTML 页面/AJAX 请求。

`success`如果邮件已发送，假设您的 aspx 页面以文本形式返回，只需编写：

```
$.get('aspx.vb', {email: $('#email').val()}, function (data) {
   if (data === 'success') {
       alert('Email has been sent successfully');
   } else {
       alert('Oops, There was some problem.');
   }
}); 
```

演示：http: [//jsfiddle.net/DDaJQ/](http://jsfiddle.net/DDaJQ/)

希望这可以帮助！

# cassandra - Cassandra 1.1 复合键/列和分层查询

> ID：11984367
> 
> 赞同：3
> 
> 时间：2012-08-16T09:32:50.013
> 
> 标签：cassandra, composite-key, database-indexes

到目前为止，这是我对当前 Cassandra 架构的理解：

1.  由于性能问题，不再需要超级列。
2.  复合列（实际上是键）是索引分层键的好选择。
3.  复合列按排序顺序存储嵌套组件。没有实际的索引。

我有一些疑问：

1.  我所说的一切都正确吗？
2.  复合列能否有效地处理每个组件的范围查询（假设逻辑使用）？
3.  复合列是否适合大量行，同时仍能产生快速查询结果（考虑到它们本身不是索引）？
4.  是否可以针对复合列创建二级索引。如果是，是否可以有效地执行范围查询？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T13:22:21.893

1.  是的
2.  是的
3.  是的，因为它们像任何其他列一样在写入时排序
4.  是的，从 1.2 开始，可以针对复合材料创建辅助文件。查看这张[JIRA 票](https://issues.apache.org/jira/browse/CASSANDRA-3680)

# java - 如何在 Java 中访问 JSP 隐式对象，如（请求、响应）

> ID：11984371
> 
> 赞同：1
> 
> 时间：2012-08-16T09:32:58.613
> 
> 标签：java, jsp, servlets, javabeans, el

如何在 Java 中传递 JSP 隐式对象，如（请求、响应）。我想在 Java 代码中访问 JSP 隐式对象。请建议如何实现这一目标？

**我的Java代码是：**

```
package test.here;
import java.sql.*;
import java.util.*;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import com.ibm.commerce.server.WcsApp;
import com.ibm.commerce.server.JSPHelper;

public class SomeBean {
  String punchOutRes = null;
  HttpServletResponse response;
  HttpServletRequest request; 

  public String getPunchOutRes() {         
    response.setContentType("text/xml");
    return "testing";      
  } 
} 
```

在这里，当我尝试在请求和响应中设置或获取任何内容时，我得到`NUllPointerException`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:40:18.410

`<jsp:setProperty`您可以使用EL 表达式将对象传递给 bean 。您必须为 getter 和 setter 方法修改 bean。

```
public class SomeBean {
  String punchOutRes = null;
  HttpServletResponse response;
  HttpServletRequest request;

  public HttpServletResponse getResponse() {
    return response;
  }

  public void setResponse(HttpServletResponse response) {
    this.response = response;
    try {
      response.getWriter().println("Some Output");
    } catch (IOException e) {
      e.printStackTrace();  
    }
  }

  public HttpServletRequest getRequest() {
    return request;
  }

  public void setRequest(HttpServletRequest request) {
    this.request = request;
  }

  public String getPunchOutRes() {
    response.setContentType("text/xml");
    return "testing";
  }
} 
```

然后在JSP中使用

```
<jsp:useBean id="someBean" class="beans.SomeBean" scope="request"/>
<jsp:setProperty name="someBean" property="request" value="${pageContext.request}"/>
<jsp:setProperty name="someBean" property="response" value="${pageContext.response}"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:44:05.800

您将能够使用一些 servlet 类。例如 ：

```
public class ActionServlet extends HttpServlet
{

public ActionServlet()
{ 
  super();
}

protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException,IOException
{
    request.setCharacterEncoding("UTF-8");      
    String action = request.getParameter("action");        

    //do smth. with "action" you are able to use your class "SomeBean"

    response.setContentType("text/plain");
    response.setCharacterEncoding("UTF-8");
    response.sendRedirect(someUrl);                

}
} 
```

您必须在 web.xml 中添加以下内容：

```
 <servlet>
    <description></description>
    <display-name>ActionServlet</display-name>
    <servlet-name>ActionServlet</servlet-name>
    <servlet-class>com.your_package.servlet.ActionServlet</servlet-class>
 </servlet>
 <servlet-mapping>
    <servlet-name>ActionServlet</servlet-name>
    <url-pattern>/Action</url-pattern>
 </servlet-mapping> 
```

“/Action”是您的网址。

我举了一个简单的例子，我没有考虑那里的 GET 或 POST 方法。我也建议使用 JSTL。在“视图”中使用一些脚本是不好的编码风格:)

但是，最好使用 MVC 模式（Spring/Struts）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T09:39:49.503

IMO我认为不可能将隐式对象直接传递给java类，但你可以做的一件事是通过某种方法或java类的构造函数将会话和请求对象从servlet传递给java类。

也看到[**这个问题**](https://stackoverflow.com/questions/5866728/get-httpsessionrequest-from-simple-java-class-not-servlet-class)

# c# - 在 Windows 8 中动态更改标题文本

> ID：11984375
> 
> 赞同：1
> 
> 时间：2012-08-16T09:33:15.697
> 
> 标签：c#, xaml, listbox, windows-8, scrollviewer

在 Windows 8 发布预览中的 Bing Weather 应用程序预览中，标题文本会在“视图”更改时（即滚动时）自动更改。

我的应用程序目前在一个 Grid 项目内有两个 ListBox 项目，用 ScrollViewer 元素包装。我希望根据当前正在查看的 ListBoxes 更改标题。

也欢迎提出不同的 UI 元素或布局的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:31:44.973

如果您尝试使用ListBoxes 和 ScrollViewer 的**Height属性会怎样？**

我的意思是你知道 ScrollViewer 的高度。因此，在滚动后，您需要检查 ScrollViewer 的偏移量（例如**VerticalOffset**）是否大于第一个 ListBox 的**高度**（或者可能是**ActualHeight**，这取决于您的标记）。

这样，您将知道第一个 ListBox 是否不可见，因此第二个 ListBox 在范围内，您可以更改标题。

我希望我的观点对你来说很清楚。

# android - 可绘制图像的路径

> ID：11984377
> 
> 赞同：2
> 
> 时间：2012-08-16T09:33:20.293
> 
> 标签：android, itextpdf

我正在使用库 iTextPDF.jar，以下是我程序中的一行代码

```
Image imageHeader = Image.getInstance(path); 
```

如何指定存储在可绘制对象中的图像的路径？

提前谢谢你，Sreekanth

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:26:25.307

您可以通过运行时获取图像 ID，但我没有找到任何解决方案来获取您可以使用的路径

```
int id = getResources().getIdentifier("name_of_resource", "id", getPackageName()); 
```

这给出了可以在任何地方使用的图像的 id，例如[http://www.anddev.org/viewtopic.php?p=17846](http://www.anddev.org/viewtopic.php?p=17846)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T07:09:12.107

首先，您可以将图像转换为字节数组

```
Drawable d;
Bitmap bitmap = ((BitmapDrawable)d).getBitmap();
ByteArrayOutputStream stream = new ByteArrayOutputStream();
bitmap.compress(Bitmap.CompressFormat.JPEG, 100, stream);
byte[] bitmapdata = stream.toByteArray(); 
```

然后你可以把这个 byte[] 传递给 get

```
Image imageHeader = Image.getInstance(bitmapdata); 
```

getInstance 方法还接受 byte [] 而不是 drawable 中的图像路径。

希望这可以帮助！！！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-16T09:36:43.937

如果您在我们使用的可绘制文件夹中有图像

```
R.drawable.imagefile 
```

参考它

# javascript - Fullcalendar - 在事件上拖放图标？

> ID：11984380
> 
> 赞同：4
> 
> 时间：2012-08-16T09:33:36.253
> 
> 标签：javascript, jquery, fullcalendar, jquery-ui-draggable, jquery-ui-droppable

我正在使用完整的日历插件。该插件具有允许将外部事件拖放到单元格上的功能（特定日期）。但是，我正在寻找一种使用拖放功能将外部图标（图像）与单元格中的事件相关联的方法。这是我创建的[jsFiddle的](http://jsfiddle.net/veer712/KrZJr/)[链接。](http://jsfiddle.net/veer712/KrZJr/)更具体地说，我正在尝试将文档与用户相关联。管理员应该能够将文档拖放到日历上显示的用户身上。尽管我已经设法显示带有事件的图标，但不知道如何将图标拖放到事件上。如果有人帮助实现这一目标，那将是非常可观的。先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T10:17:26.307

这是我为我的问题[jsFiddle](http://jsfiddle.net/veer712/KrZJr/9/)找到的解决方案希望这肯定会帮助有需要的人。如果您发现此解决方案有帮助，请给我投票:)

# python - 展开和展平不规则的嵌套列表

> ID：11984386
> 
> 赞同：4
> 
> 时间：2012-08-16T09:33:57.000
> 
> 标签：python, nested-lists

我知道扁平化嵌套列表的主题之前已经详细介绍过，但是我认为我的任务有点不同，我找不到任何信息。

我正在写一个刮板，作为输出，我得到一个嵌套列表。顶级列表元素应该成为电子表格形式的数据行。但是，由于嵌套列表通常具有不同的长度，因此我需要在展平列表之前扩展它们。

这是一个例子。我有

```
 [ [ "id1", [["x", "y", "z"], [1, 2]],    ["a", "b", "c"]],
     [ "id2", [["x", "y", "z"], [1, 2, 3]], ["a", "b"]],
     [ "id3", [["x", "y"],      [1, 2, 3]], ["a", "b", "c", ""]] ] 
```

我最终想要的输出是

```
 [[ "id1", "x", "y",  z, 1, 2, "", "a", "b", "c", ""],
    [ "id2", "x", "y",  z, 1, 2,  3, "a", "b",  "", ""],
    [ "id3", "x", "y", "", 1, 2,  3, "a", "b", "c", ""]] 
```

但是，像这样的中间列表

```
 [ [ "id1", [["x", "y", "z"], [1, 2, ""]], ["a", "b", "c", ""]],
     [ "id2", [["x", "y", "z"], [1, 2,  3]], ["a", "b",  "", ""]],
     [ "id3", [["x", "y",  ""], [1, 2,  3]], ["a", "b", "c", ""]] ] 
```

然后我可以简单地展平也可以。

顶级列表元素（行）在每次迭代中构建，并附加到完整列表中。我想最后转换完整列表更容易吗？

嵌套元素的结构应该是相同的，但是我现在不能确定。我想我有一个问题，如果结构看起来像这样。

```
 [ [ "id1", [[x, y, z], [1, 2]],             ["a", "b", "c"]],
     [ "id2", [[x, y, z], [1, 2, 3]], ["bla"], ["a", "b"]],
     [ "id3", [[x, y],    [1, 2, 3]],          ["a", "b", "c", ""]] ] 
```

这应该成为

```
 [[ "id1", x, y,  z, 1, 2, "",    "", "a", "b", "c", ""],
    [ "id2", x, y,  z, 1, 2,  3, "bla", "a", "b",  "", ""],
    [ "id3", x, y, "", 1, 2,  3,    "", "a", "b", "c", ""]] 
```

感谢您的任何评论，如果这是微不足道的，请原谅，我对 Python 相当陌生。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T16:28:40.587

对于“相同结构”的情况，我有一个简单的解决方案，使用递归生成器`izip_longest`和`itertools`. 此代码适用于 Python 2，但经过一些调整（在注释中注明），它可以在 Python 3 上运行：

```
from itertools import izip_longest # in py3, this is renamed zip_longest

def flatten(nested_list):
    return zip(*_flattengen(nested_list)) # in py3, wrap this in list()

def _flattengen(iterable):
    for element in izip_longest(*iterable, fillvalue=""):
        if isinstance(element[0], list):
            for e in _flattengen(element):
                yield e
        else:
            yield element 
```

在 Python 3.3 中它会变得更加简单，这要归功于[PEP 380](http://www.python.org/dev/peps/pep-0380/)，它允许递归步骤 ,`for e in _flatengen(element): yield e`变成`yield from _flattengen(element)`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T15:39:27.350

实际上对于结构不同的通用情况没有解决方案。例如，普通算法将匹配`["bla"]`，`["a", "b", "c"]`结果将是

```
 [  [ "id1", x, y,  z, 1, 2, "",   "a", "b", "c", "",  "",  ""],
    [ "id2", x, y,  z, 1, 2,  3, "bla",  "",  "", "", "a", "b"],
    [ "id3", x, y, "", 1, 2,  3,   "a", "b", "c", "",  "",  ""]] 
```

但是如果你知道你会有很多行，每行都以一个 ID 开头，然后是一个嵌套列表结构，那么下面的算法应该可以工作：

```
import itertools

def normalize(l):
    # just hack the first item to have only lists of lists or lists of items
    for sublist in l:
        sublist[0] = [sublist[0]]

    # break the nesting
    def flatten(l):
        for item in l:
            if not isinstance(item, list) or 0 == len([x for x in item if isinstance(x, list)]):
                yield item
            else:
                for subitem in flatten(item):
                    yield subitem

    l = [list(flatten(i)) for i in l]

    # extend all lists to greatest length
    list_lengths = { }
    for i in range(0, len(l[0])):
        for item in l:
            list_lengths[i] = max(len(item[i]), list_lengths.get(i, 0))

    for i in range(0, len(l[0])):
        for item in l:
            item[i] += [''] * (list_lengths[i] - len(item[i]))

    # flatten each row
    return [list(itertools.chain(*sublist)) for sublist in l]

l = [ [ "id1", [["x", "y", "z"], [1, 2]],    ["a", "b", "c"]],
      [ "id2", [["x", "y", "z"], [1, 2, 3]], ["a", "b"]],
      [ "id3", [["x", "y"],      [1, 2, 3]], ["a", "b", "c", ""]] ]
l = normalize(l)
print l 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T10:38:33.323

```
def recursive_pad(l, spacer=""):
    # Make the function never modify it's arguments.
    l = list(l)

    is_list = lambda x: isinstance(x, list)
    are_subelements_lists = map(is_list, l)
    if not any(are_subelements_lists):
        return l

    # Would catch [[], [], "42"]
    if not all(are_subelements_lists) and any(are_subelements_lists):
        raise Exception("Cannot mix lists and non-lists!")

    lengths = map(len, l)
    if max(lengths) == min(lengths):
        #We're already done
        return l
    # Pad it out
    map(lambda x: list_pad(x, spacer, max(lengths)), l)
    return l

def list_pad(l, spacer, pad_to):
    for i in range(len(l), pad_to):
        l.append(spacer)

if __name__ == "__main__":
    print(recursive_pad([[[[["x", "y", "z"], [1, 2]], ["a", "b", "c"]], [[[x, y, z], [1, 2, 3]], ["a", "b"]], [[["x", "y"], [1, 2, 3]], ["a", "b", "c", ""]] ])) 
```

编辑：实际上，我误读了您的问题。这段代码解决了一个稍微不同的问题

# facebook - Facebook 评论插件在 iPad 上显示移动宽度

> ID：11984389
> 
> 赞同：2
> 
> 时间：2012-08-16T09:34:17.457
> 
> 标签：facebook, width, facebook-comments

正如标题所说。如果您有 iPad，这是 URL - 如何删除 iPad 评论插件的响应宽度？（页面底部）[http://dev.assessmentday.co.uk/aptitudetests_numerical.htm](http://dev.assessmentday.co.uk/aptitudetests_numerical.htm)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T01:27:58.597

我也遇到了这个。如果我检测到这是在 iPad 上，我已经通过手动添加`data-mobile`属性集来解决它：`false`

```
<script>
    if (navigator.userAgent.match(/\biPad\b/)) {
        document.querySelector('div.fb-comments')
            .setAttribute('data-mobile', 'false');
    }
</script> 
```

这也可以改进以处理其他平板电脑，但最好的方法取决于 Facebook 如何自动检测“移动”，我不确定。可能基于显示宽度，可能基于触摸事件处理程序的存在，或者可能实际上是服务器端的用户代理。

# mongodb - mongodb 索引数组的键（不是值）

> ID：11984390
> 
> 赞同：0
> 
> 时间：2012-08-16T09:34:20.017
> 
> 标签：mongodb, indexing

在 MongoDB 中，我有以下文档

```
{
  "_id": { "$oid" : "4FFD813FE4B0931BDAAB4F01" },
  "concepts": {
    "blabla": 20,
    "blibli": 100,
    "blublu": 250,
    ... (many more here)
  }
} 
```

而且我想索引它以便能够查询“概念”数组的“键”（我知道它不是真正的 mongoDB 数组......）：

```
db.things.find({concepts:blabla}); 
```

上面的架构可以吗？或者我应该将我的文件重构为类似

```
{
  "_id": { "$oid" : "4FFD813FE4B0931BDAAB4F01" },
  "concepts": ["blabla","blibli","blublu", ... (many more here)]
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:17:45.837

您可以使用特定查询查询字段存在：

```
db.your_collection.find({"concept.yourfield": { $exists: true }}) 
```

（注意**$exists**）

它将返回您的所有文档，其中子文档`yourfield`的字段`concept`

编辑：此解决方案仅与查询有关。索引包含值而不是字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T13:20:25.440

我会回答你的实际问题。不，您不能在给定当前架构的字段名称上编制索引。$exists 使用索引，但这只是存在检查。

像您正在使用的架构存在很多问题，我建议重构：

```
{
  "_id": { "$oid" : "4FFD813FE4B0931BDAAB4F01" },
  "concepts": [
    {name:"blabla", value: 20},
    {name:"blibli", value: 100},
    {name:"blublu", value: 250},
    ... (many more here)
  ]
} 
```

然后索引`{'concepts.name:1'}`，您实际上可以查询概念名称，而不仅仅是检查是否存在。

TL;DR：不，你不能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T10:07:05.350

MongoDB 索引数组的每个值，因此您可以查询单个项目。您可以在[此处](http://www.mongodb.org/display/DOCS/Multikeys)找到。

但是在嵌套数组中，您需要告诉索引 mongodb 来索引您的子字段。

```
 db.col1.ensureIndex({'concepts.blabla':1})
  db.col1.ensureIndex({'concepts.blublu':1})
    db.col1.find({'concepts.blabla': 20}).explain()
    {
        "cursor" : "BtreeCursor concepts.blabla_1",
        "nscanned" : 1,
        "nscannedObjects" : 1,
        "n" : 1,
        "millis" : 0,
        "nYields" : 0,
        "nChunkSkips" : 0,
        "isMultiKey" : false,
        "indexOnly" : false,
        "indexBounds" : {
            "concepts.blabla" : [
                [
                    20,
                    20
                ]
            ]
        }
    } 
```

创建索引后，游标类型从 BasicCursor 更改为 BtreeCursor。

如果您按照问题末尾所述创建文档

```
{
  "_id": { "$oid" : "4FFD813FE4B0931BDAAB4F01" },
  "concepts": ["blabla","blibli","blublu", ... (many more here)]
  }
} 
```

只需索引就足够了，如下所示：

```
db.col1.ensureIndex({'concepts':1}) 
```

# java - 在此特定情况下在 Android ListAdapter 中显示文本

> ID：11984391
> 
> 赞同：-1
> 
> 时间：2012-08-16T09:34:20.390
> 
> 标签：java, android, arraylist, hashmap, listadapter

我正在尝试为 Android 构建一个简单的电视指南。为此，我正在使用来自一个站点的 RSS。我解析 XML，现在我想展示它。这个想法是一个列表，显示电台、当前节目和日期，当我按下列表中的某个项目时，它会给我一个新的活动，显示某个电视台的完整时间表。我已经设法将整个电视节目的各个部分分开在单独的字符串中（例如：06:00 新闻；07:15 电影）。我什至设法将它分开，以便填充 String[][]（如：|06|、|00|、|News|；|07|、|15|、|Movie|）。我的想法是检查哪个最接近实时并显示它。

好吧，目前我的应用程序显示电视台、整个节目（时间表）和日期。我希望它只显示当前显示的内容。有人可以帮我解决这个问题吗？

这是我想做的类：（我还有 Parser 类和 Main 类，只有按钮和 XML 的 URL）

```
public class Pomocna extends ListActivity {

// All static variables
static String url =null;

// XML node keys
static final String KEY_ITEM = "item"; // parent node
static final String KEY_TITLE = "title";
static final String KEY_DATE = "pubDate";
static final String KEY_DESC = "encoded";

Calendar calendar = new GregorianCalendar();
int DSQ=calendar.get(Calendar.HOUR_OF_DAY);
int DMQ=calendar.get(Calendar.MINUTE);

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Intent in = getIntent();

    // Get XML values from previous intent
    url = in.getStringExtra("A");

    ArrayList<HashMap<String,String>> menuItems = new ArrayList<HashMap<String,String>>();
    //ArrayList<String[][]> nekaj = new ArrayList<String[][]>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(url); //get XML
    Document doc = parser.getDomElement(xml); // get DOM elem.
    //doc.getDocumentElement().normalize();

    NodeList nl = doc.getElementsByTagName(KEY_ITEM);

    //loop
    for (int i=0; i< nl.getLength(); i++){
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);

        //add to map
        map.put(KEY_TITLE, Vracanje1(parser.getValue(e, KEY_TITLE)));
        map.put(KEY_DATE, Vracanje2(parser.getValue(e, KEY_DATE)));
        map.put(KEY_DESC, parser.getValue3(e,KEY_DESC));

        //NEKO FRCERANJE -=- POCETAK

        String pvp = parser.getValue3(e,KEY_DESC);
        char[] rast = pvp.toCharArray();
        int brojac = 0;
        for(int q=0; q<pvp.length(); q++){
            if(rast[q]=='*') brojac++;
        }

        String[][] niz= new String[brojac][3];

        int bf1=0;
        int bf3=0;

        int oo=0;
        for(int q=0; q<pvp.length(); q++){
            if(rast[q]=='*'){
                bf3=bf1;
                bf1=q;

                String lol = pvp.substring(bf3, bf1);

                // SEPARATE STRING: LOL
                // IT MUST HAVE 3 PARTS: HOUR, MINUTE, AND DESCRIPTION

                if(oo==0){
                    String ps=lol.substring(0,2);
                    String ds=lol.substring(3,5);
                    String ts=lol.substring(6,lol.length());

                    niz[oo][0]=ps;
                    niz[oo][1]=ds;
                    niz[oo][2]=ts;  
                }
                if(oo>0){
                    String ps=lol.substring(1,3);
                    String ds=lol.substring(4,6);
                    String ts=lol.substring(7,lol.length());

                    niz[oo][0]=ps;
                    niz[oo][1]=ds;
                    niz[oo][2]=ts;
                }
                oo++;
            }
        }

        //NEKO FRCERANJE -=- KRAJ

        menuItems.add(map);
        //nekaj.add(niz);
    }

    //DISPLAY WHAT's CURRENTLY ON PROGRAM
    //USE TIME TO COMPARE AND SHOW

    ListAdapter adapter = new SimpleAdapter(this, menuItems, R.layout.list_item,
            new String[]{KEY_TITLE, KEY_DESC, KEY_DATE}, new int[]{
            R.id.title, R.id.description, R.id.date
    });
    setListAdapter(adapter);

    //singleView
    ListView lv = getListView();

}

public String Vracanje1(String bq){
    int p1=bq.length();
    int p2=p1-10;
    StringBuilder sbp= new StringBuilder(bq);
    sbp.delete(p2, p1);
    String ses=sbp.toString();

    return ses;
}
public String Vracanje2(String bq){
    int p1=bq.length();
    int p2=p1-14;
    StringBuilder sbp=new StringBuilder(bq);
    sbp.delete(p2, p1);
    String ses = sbp.toString();

    return ses;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:53:51.640

根据我的理解，任何电视节目应用程序都不能接受您的做法，因为通常程序有很多频道和很多节目，并且在 UI 线程中解析和分析数据（迟早）会导致 ANR。我建议您考虑使用单独的服务和内容提供者，让 UI 线程只做与 UI 相关的事情，并将数据处理留给相应的组件。通过提供程序中的 sqlite 查找/处理数据会更快、更容易。

关于查找最接近数据的问题 - 您可以对数组进行排序以及何时找到最接近的数据（例如，只是从头开始迭代）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T11:37:27.380

我同意@sandstar，但我不确定您要问的是如何过滤数据或如何**显示数据**？在这种情况下，更新`ListAdapter`. 这意味着，当您只想显示最近的节目时，您需要向适配器提供一个地图列表，其中*仅*包含带有最新节目数据的地图。这意味着您应该*在将适配器应用到* `ListView`. 如果您想对适配器有更多的控制权，您可以考虑扩展`ArrayAdapter`它还允许您*添加/清除*现有适配器的数据。

# cuda - CUDA shuffle 的竞争条件？

> ID：11984392
> 
> 赞同：1
> 
> 时间：2012-08-16T09:34:21.927
> 
> 标签：cuda

使用 shuffle 命令，当两个不同的线程同时尝试更新相同的寄存器值时，是否存在竞争条件/丢失更新？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-05T21:31:42.997

这是此处提供的较晚答案，用于从未回答列表中删除此问题。

来自 CUDA C 编程指南

> 内在函数允许在`__shfl()`不使用共享内存的情况下在 warp 内的线程之间交换变量

这个想法是线程可以读取但不能更改分配给线程`i`的寄存器的值。因此，正如上面评论中所指出的，没有竞争条件。`r``j`

CUDA C 编程指南还提供了以下示例，以通过 warp 广播单个值

```
global__ void bcast(int arg) {

    int laneId = threadIdx.x & 0x1f;
    int value;

    if (laneId == 0)          // Note unused variable for
    value = arg;              // all threads except lane 0
    value = __shfl(value, 0); // Get "value" from lane 0
    if (value != arg) printf("Thread %d failed.\n", threadIdx.x); }

void main() {
    bcast<<< 1, 32 >>>(1234);
    cudaDeviceSynchronize();
} 
```

在这个例子中，`value`分配给warp中线程的寄存器的值`0`被广播到warp中的所有其他线程并分配给本地`value`寄存器。所有其他线程**都没有尝试**（**但也不能**）**更改**`value`分配给线程的寄存器的值`0`。

# c# - 获取多对多关系的第一个元素

> ID：11984397
> 
> 赞同：3
> 
> 时间：2012-08-16T09:34:36.050
> 
> 标签：c#, nhibernate, fluent-nhibernate

我在 nhibernate 中映射我的一个属性时遇到了一些问题。我有一个映射到集合的多对多关系。但是，我还想将一个属性映射到多对多集合的第一个元素。这是我的代码：我正在映射的类：

```
public class Project {
    public Project() {
        this.Addresses = new List<Address>();
    }

    public virtual int ID { get; set; }
    public virtual IList<Address> Addresses { get; set; }
    public virtual Address CurrentAddress { get; set; }
} 
```

类图：

```
public class ProjectMap : ClassMap<Project> {
    public ProjectMap() {
        Table("Project");
        Id(x => x.ID).GeneratedBy.Identity();

        HasManyToMany(x => x.Addresses)
            .Table("ProjectAddress")
            .ParentKeyColumn("ProjectID")
            .ChildKeyColumn("AddressID").Cascade.All();
    } 
```

但我需要 CurrentAddress 指向 Addresses 属性的第一个元素。因此，我尝试使用返回第一个元素的 getter 来解决这个问题，如下所示：

```
 public virtual Address CurrentAddress {
        get {
            if (!Addresses.Any()) {
                Address newAddress = new Address();
                this.Addresses.Add(newAddress);
                return newAddress;
            }
            else {
                return this.Addresses.First();
            }
        }
    } 
```

但是，当我尝试查询 Project 类 currentaddress 时，我得到一个 QueryException：无法解析属性：CurrentAddress。

这显然是因为 CurrentAddress 属性未在 Nhibernate 中映射，但我该如何解决呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:44:04.157

正如您正确指出的那样，您不能查询非映射属性，因为 NHibernate 无法生成适当的 SQL - 属性的 getter 可以任意复杂。

没有办法解决这个问题，虽然你可能有一些运气探索这样的解决方案：http: [//fabiomaulo.blogspot.cz/2010/07/nhibernate-linq-provider-extension.html](http://fabiomaulo.blogspot.cz/2010/07/nhibernate-linq-provider-extension.html)

但是，我建议查询内存中的非映射属性。

# android - 着色器编译中的“顶点着色器中的统一变量不适合 512 个向量”错误

> ID：11984403
> 
> 赞同：4
> 
> 时间：2012-08-16T09:35:17.640
> 
> 标签：android, opengl-es-2.0

在我的顶点着色器代码中，我有一组 mat3x4 结构。
该数组是统一的，即使它的总向量数只有 60，
我收到着色器编译错误：

“顶点着色器中的统一变量不适合 512 个向量。”

这是我的着色器代码：

[VertexShader]

```
struct mat3x4{
    highp vec4 v[3];
};

attribute highp vec4 vPosition;
uniform mat3x4 camSkin[20];

void main() {
    // test code
    gl_Position.x = vPosition.x + camSkin[0].v[0].x + camSkin[19].v[2].x;
    gl_Position.y = vPosition.y + camSkin[0].v[0].y + camSkin[19].v[2].y;
    gl_Position.z = vPosition.z + camSkin[0].v[0].z + camSkin[19].v[2].z;
    gl_Position.w = vPosition.w + camSkin[0].v[0].w + camSkin[19].v[2].w;
}; 
```

[片段着色器]

```
void main() {
    gl_FragColor = vec4(0.0, 0.0, 1.0, 0.5);
}; 
```

我正在开发 adreno220 GPU Android 智能手机，
并使用 Android OS 2.3。

我如何解决它？
谢谢。

# excel - 使用 Excel 查找功能不断收到错误 91

> ID：11984404
> 
> 赞同：0
> 
> 时间：2012-08-16T09:35:18.940
> 
> 标签：excel, excel-2007, runtime-error, vba

我已经尝试了这个网站上的建议，但似乎没有一个有效。

在单元格 C6:Z6 中，我的日期为 2011 年 1 月 1 日至 2012 年 1 月 12 日（英国日期格式）。我运行以下宏：

```
Sub FindDate()

    Range("C6:Z6").Select

    Selection.Find(What:="01/08/2012", After:=ActiveCell, LookIn:=xlFormulas _
    LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
    MatchCase:=False, SearchFormat:=False).Activate

End Sub 
```

并且似乎总是出现运行时错误 91。我尝试使用“设置”来设置范围，但也没有这样做。

对于上下文，我正在尝试获取预设日期的列号（使用 ActiveCell.Column）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:49:21.633

当您简单地搜索“01/08/2012”时，您实际上是在搜索一个字符串。您必须使用 将其转换为日期`CDate`。

此外，最好检查是否找到任何东西`If Not aCell Is Nothing Then`以避免任何错误。[请参阅此链接](https://stackoverflow.com/questions/11972850/item-not-found-in-find-vba/11972933#11972933)中的我的帖子。

试试这个

```
Sub FindDate()
    Dim aCell As Range

    Set aCell = Range("C6:Z6").Find(What:=CDate("01/08/2012"), After:=ActiveCell, _
    LookIn:=xlFormulas, LookAt:=xlPart, SearchOrder:=xlByRows, _
    SearchDirection:=xlNext, MatchCase:=False, SearchFormat:=False)

    If Not aCell Is Nothing Then
        MsgBox aCell.Column
    Else
        MsgBox "Not Found"
    End If
End Sub 
```

# ruby-on-rails - Ruby on Rails 最佳实践 - 大控制器与小控制器

> ID：11984405
> 
> 赞同：3
> 
> 时间：2012-08-16T09:35:20.567
> 
> 标签：ruby-on-rails, ruby, model-view-controller, ruby-on-rails-3.2

我需要一些关于Ruby on Rails**最佳实践**的信息，尤其是**对于必须做很多事情的 Controller**，因此，一个简单的“显示”操作现在已经完成了。我知道，这不是很好，而且我有特定的代码。

**这是一个示例代码：**

```
def show
    sound = Sound.find(params[:id])
    @xml_path = File.dirname(sound.file.path)
    s3 = AWS::S3.new(
        :access_key_id => 'XXX',
        :secret_access_key => 'XXX')
    @url = s3.buckets['dev'].objects[sound.file.path[1..-1]].url_for(:read, :expires => 10*60)

    if sound.id_job != 0 && sound.transcript_progress != 100
      @response = Savon.client("http://srap.php?wsdl").request(:avance) do
        soap.body = { 
         :Jeton => "abcdef",
         :ID_job => sound.id_job,
        }
      end
      @response = @response.to_hash
      @progress = @response[:avance][:avancement].to_s.split("#")[1]# ID_job received is formed like "OK#123", we keep "123"
      if @progress == "Termine"
         sound.transcript_progress = 100
      elsif @progress == "ERROR"
        flash.now[:alert] = "Oups, il semblerait que le fichier soit illisible, ou qu'il n'y ait rien a ecouter !"
      elsif @progress != "Queued"
        sound.transcript_progress  = @response[:avance_response][:avancement].to_s.split("#")[2].split("%")[0].to_i
      end
      sound.save
    end

    if sound.transcript_progress == 100 # If transcription finished
      # Get XML File URL on the FTP
      @xml_path = Savon.client("http://srap.php?wsdl").request(:donneResultat) do
      soap.body = { 
       :Jeton => "XXX",
       :FichierSon => sound.id_job
      }
      end

      # Parse XML Path URL on Kimsufi
      @xml_path = @xml_path.to_hash[:donne_resultat_transposition_response][:chemin_fichier].to_s.split("#")[2].to_s.split("/")[5]

      # Create local directory (/tmp/sounds) for XML Temp Save
      if ! File.directory?(Rails.root.to_s + '/tmp/sounds')
        Dir.mkdir(Rails.root.to_s + '/tmp/sounds')
      end
      # Get XML from FTP
      ftp=Net::FTP.new                                     
      ftp.connect("ftp.com", 21)                                                         
      ftp.login("XXX", "XXX")                
      if ftp.closed?
        flash.now[:alert] = "Oups, il semblerait qu'il y ait eu un problème ! Merci d'actualiser la page"
      else  
        ftp.passive = true
        ftp.chdir('results')
        ftp.getbinaryfile(@xml_path, Rails.root.to_s + '/tmp/sounds/' + @xml_path)
        ftp.close
      end

      # Send XML on S3
      s3 = AWS::S3.new(
        :access_key_id => 'XXX',
        :secret_access_key => 'XXX')
      @xml_new = (File.dirname(@sound.file.path) + '/' + File.basename(@xml_path))[1..-1]
      s3.buckets['dev'].objects[@xml_new].write(Pathname.new(Rails.root.to_s + '/tmp/sounds/' + @xml_path))
      @file = s3.buckets['dev'].objects[@xml_new].read()
    end

    # A lot of logic again, i've not did it yet

  end 
```

如您所见，我这里有很多逻辑，我必须检查转录是否结束，如果没有，请更新progress_bar（@sound.transcript_progress），如果是，我首先必须连接到soap动作才能获取XML 路径，然后通过 FTP 获取 XML，然后将其存储到 Amazon S3（Shitty SOAP，我必须重新解析所有响应......）。

> 在我所有的动作控制器中，我必须在 S3 / SOAP / FTP 上连接，而不是按照相同的顺序。所以我想为每个类做一个类，就像在 C++ 中一样，一个抽象。我想要完成这些事情，我不在乎（很多）它是如何完成的。但是 MVC 的最佳实践是什么？我必须创建一个新文件夹“Class？” 新控制器？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T09:52:37.847

> [这更像是一个**长篇评论**，因为它解释了你的困境的根源，但没有提供任何解决方案。]

这个问题实际上是由于对 RoR 推广的 MVC 的误解造成的。

这是导致控制器内爆的两个因素的组合：

*   一方面，您有[贫血模型](http://martinfowler.com/bliki/AnemicDomainModel.html)，因为 RoR 使用 ORM 实例集合而不是真实模型层。其原因是 Rails 最初被创建为用于快速原型设计（生成一次性代码）的框架。原型设计正是 Active Record 最擅长的。使用脚手架，您可以轻松地从现有数据库生成活动记录结构。

    但这会导致某些域业务逻辑在您的控制器中泄漏。

*   另一方面，你有不存在的观点。由于目标是原型设计，Rails 倾向于通过将视图合并到控制器中来摆脱实际上可以包含表示逻辑的视图。现在缺少的视图被替换为简单的模板，这些模板被称为“视图”。

    这迫使控制器包含表示逻辑。

这两个因素将是我想要断言 RoR 甚至不是 MVC 框架的原因。生成的模式实际上更接近[Model-View-Presenter](http://www.wildcrest.com/Potel/Portfolio/mvp.pdf)。尽管它已被简化到开始破坏[Separation of Concerns 的程度](http://en.wikipedia.org/wiki/Separation_of_concerns)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T09:46:57.053

您的大部分逻辑不属于控制器。控制器的职责是将输入（HTTP 请求及其参数）与输出（您的视图）联系起来。其他一切都是应该在模型中实现的业务逻辑 -`Sound`在您的情况下，它看起来像。例如，您的每个`if`块都可以作为`Sound`类的实例方法来实现。如果您发现自己在各种模型中重用代码（如 AWS 存储位），请在[模块](http://www.rubyfleebie.com/an-introduction-to-modules-part-1/)（在 下`lib`）中实现它们，并将该模块包含在这些模型中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T12:17:05.270

看起来所有这些都应该重构为模型（或库模块）并分解为更小的函数。这样做的最佳原因是因为您可以设置单元测试来单独测试较小的部分。控制器只需要实例化模型并将数据返回给浏览器。

# sharepoint-list - 复制 ListItems sharepoint 2010

> ID：11984408
> 
> 赞同：1
> 
> 时间：2012-08-16T09:35:24.280
> 
> 标签：sharepoint-list

我有两个列表列表 A 和列表 BI 需要将所有列表项从列表 A 复制到列表 B 列表 A 和列表 B 在两个不同的子站点中，但在同一服务器中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T08:29:43.983

有不同的方式来传输数据。

从 PowerShell：

```
Add-PSSnapin Microsoft.SharePoint.PowerShell -EA SilentlyContinue

$Site1URL = "http://webApp1:11111/site1/" 
$Site2URL = "http://webApp2:22222/site2/" 
$SourceList = "List A"
$DestinationList = "List B"

$Web1 = Get-SPWeb $Site1URL
$Web2 = Get-SPWeb $Site2URL
$ListA = $Web1.Lists.TryGetList($SourceList)
$ListB = $Web2.Lists.TryGetList($DestinationList)

$ListA.Items | foreach {
    $newItem = $ListB.Items.Add()
    $newItem["Col1"] = $_["Col1"]
    $newItem["Col2"] = $_["Col2"]
    $newItem.Update()
} 
```

# c# - 应用程序通过 Visual Studio 性能分析运行得更快

> ID：11984411
> 
> 赞同：20
> 
> 时间：2012-08-16T09:35:30.920
> 
> 标签：c#, .net, performance, parallel-processing, profiling

我正在调查完成特定操作需要多少时间。操作如下：

```
Parallel.ForEach(items, item => SaveScheme(item)); 
```

该`SaveScheme`方法适用于数据库：执行一些查询并使用信息。集合中的元素数量`items`可能足够大。

当我运行此操作时，大约需要 20-40 秒才能完成。但是当我在打开分析的情况下运行它时，只需要 3 秒！

我没有找到有关此问题的任何信息。我唯一的猜测是，使用 profiling`Parallel.ForEach`会比没有它创建更多的线程，但我不确定，即使它是真的，我也不知道该怎么处理它。

那么，为什么会发生这种情况？当我在没有分析的情况下运行应用程序时，我如何才能获得这种性能呢？

* * *

UPD。`Parallel`与此无关：我用simple`foreach`代替测试，操作仍然在3秒内完成！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-17T10:01:36.510

我找到了答案：

> 原因是当您在 Visual Studio 中运行应用程序时，调试器会附加到它。当您使用分析器运行它时，调试器未附加。
> 
> 如果您尝试单独运行 .exe，或通过 IDE 使用“调试 > 不调试启动”（或仅按 Ctrl+F5）运行程序，应用程序的运行速度应该与使用探查器时一样快。

[https://stackoverflow.com/a/6629040/1563172](https://stackoverflow.com/a/6629040/1563172)

之前没有找到，因为我以为是并发的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-02T04:58:58.173

由于您在程序中使用线程，Windows 计时器分辨率也可能是一个原因。

> 默认 Windows 计时器分辨率为 15.6 毫秒

当您使用分析器运行应用程序时，这将减少到 1 毫秒，从而使您的应用程序运行得更快。签出这个[答案](https://stackoverflow.com/a/38404066/4353760)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T09:53:16.337

我怀疑您实际上正在分析的只是您的应用程序的“不平行”部分。

我建议看看这里：http: [//msdn.microsoft.com/en-us/library/gg663532.aspx](http://msdn.microsoft.com/en-us/library/gg663532.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T19:03:00.527

是不是在分析时，您已经减慢了实际数据库工作生成的速度（并降低了并发性），从而有效地限制了瓶颈本身 - 是的数据库（或....）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T09:58:22.767

这个结果表明您的应用程序可能试图*过于*并发：您的线程实际上正在互相干扰，或者创建线程的开销大于任何性能增益。您的非并发版本运行速度更快的事实证明了这一点！

profiler 的使用会影响你的应用程序的性能；也许它会减慢您的代码速度，以至于您*确实*看到了多线程带来的一些好处。

如果没有更多方法背后的代码细节，这似乎是最有可能的答案。

# java - 如何使用 Log4j 创建基于进程的日志文件？

> ID：11984414
> 
> 赞同：1
> 
> 时间：2012-08-16T09:35:31.863
> 
> 标签：java, log4j

以下是我的课程详情。ClassA 和 ClassD 是可运行的类。从 ClassA 我打电话给 ClassB 和 ClassC。

```
package comp1 -> Contains ClassA, ClassB, ClassC
package comp2 -> Contains ClassD, ClassE

Log for comp1 -> comp1.log
Log for comp2 -> comp2.log 
```

我正在使用 Log4j 进行日志记录。我有两个基于包名称的记录器。我正在打电话`ClassE`，`ClassB`来自`ClassD`。现在，`comp1.log`包含来自的日志消息`ClassB`并`comp2.log`包含来自`ClassD`和的日志`ClassE`。

如何制作基于流程的日志？如果我运行`ClassD`应该只有一个日志文件`ClassD`，`ClassE`和`ClassB`。这可以使用 Log4j 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:45:06.310

一种解决方案是使用系统变量。您可以在 log4j.xml 中编写类似的内容

```
<appender name="ProductionLog" class="org.apache.log4j.RollingFileAppender">
    <param name="File" value="c:/logs/myLog-${myProcId}.log"/>
    <param name="Append" value="true"/>
    <param name="MaxFileSize" value="10000KB"/>
    <param name="MaxBackupIndex" value="10"/>
    <layout class="org.apache.log4j.EnhancedPatternLayout">
        <param name="ConversionPattern" value="[%d] [%-5p] {%c|%t}: %m%n"/>
    </layout>
</appender> 
```

重要的是系统变量**${myProcId}**
的使用 您可以在初始化 Log4j 之前提供系统变量，例如

```
System.setProperty("myProcId", procId);
DOMConfigurator.configure(log4jFilePath); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:03:06.980

有很多方法可以做到这一点，我个人会用额外的信息来检测日志，然后使用日志处理将它们再次拆分出来。如果您是基于 Linux 的，那么这应该很容易，并将额外的处理转移到读取时间而不是写入时间。

添加额外信息的方法是：-

*   每个进程的命名线程池然后将其包含在您的模式中
*   [NDC](http://logging.apache.org/log4j/1.2/apidocs/index.html)添加上下文特定信息（这是我使用的）

另一种方法是使用由具有特定名称（ProcessA，ProcessB）的构造函数初始化的单独记录器。当您实例化您的依赖项时，您可以传入备用记录器名称以在构造函数中使用或通过属性注入。如果您使用的是 Spring，这将很容易，如果不是，那么我希望工厂模式是您的朋友。

希望这可以帮助。

# android - 应用程序按模块划分？

> ID：11984415
> 
> 赞同：1
> 
> 时间：2012-08-16T09:35:39.607
> 
> 标签：android, mobile, google-play

我正在尝试创建一个按模块划分的应用程序，它有一个主菜单，其中有几个选项可供选择，其中一些是付费的，另一些是免费的。我想知道是否可以从市场上下载这些模块并安装模块相同的应用程序。

我在互联网上找不到任何示例，但是市场上有许多实现此系统的应用程序。

**提前致谢。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:43:00.820

如果所有模块都由您开发，请确保所有模块至少有一个入口点（活动）。这些入口点必须响应某些自定义意图。

从市场下载模块后，使用包管理器查找响应您的自定义意图的所有活动。

只需使用[PackageManager APIs](http://developer.android.com/reference/android/content/pm/PackageManager.html#queryIntentActivities%28android.content.Intent,%20int%29)，你就会到达那里。

# css - 无法更改打印样式表中的背景颜色

> ID：11984420
> 
> 赞同：0
> 
> 时间：2012-08-16T09:35:51.450
> 
> 标签：css, drupal-7

我正在尝试制作一个打印样式表，它将更改 drupal 页面上 div 的背景颜色。但是当我打印时，它不会改变背景颜色（是的，我的浏览器会打印背景颜色）。我的 CSS 的相关部分如下所示：

```
@media print {
 #footer-wrapper {background: #fff;}
} 
```

我已经尝试过使用和不使用`@media print`块，我都尝试过`background`，`background-color`但是在打印时这些都没有改变颜色。我还尝试隐藏 div（因为我只是不希望它显示在打印中）。当我更改常规页面的 css 时，它会在那里消失，但仍会出现在打印中。

我想这样做的原因是当我尝试打印时，页脚将尝试占据打印页面的 100%。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:38:37.857

尝试“打印页面的某些部分”

[http://www.bennadel.com/blog/1591-Ask-Ben-Print-Part-Of-A-Web-Page-With-jQuery.htm](http://www.bennadel.com/blog/1591-Ask-Ben-Print-Part-Of-A-Web-Page-With-jQuery.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:25:18.803

显然我看不到您的页面，但是您的“@media pint”语句是否可能在另一个设置为 media="screen" 的样式表中？

如果是这样，那就把它拿出来，然后简单地创建另一个样式表，设置为 media="print" 并在那里激怒你。然后，您甚至不需要“@media print”位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T11:55:59.830

显然，设置颜色的 css 文件以某种方式受到保护。这将使这个 css 文件始终具有优先权。我在 Drupal UI 中将颜色更改为白色，效果很好。

# iphone - iOS - 活动监视器显示泄漏，即使在对象被释放后

> ID：11984421
> 
> 赞同：0
> 
> 时间：2012-08-16T09:35:53.710
> 
> 标签：iphone, ios, xcode, ipad, memory-leaks

请参阅所附图片。如果它在这里不可见是代码

```
- (void)startParsingData:(NSString *)xmlDataString
{
    NSLog(@"parser started");
    // allocate NSXMLParser
    NSLog(@"XML DATA equals %@", xmlDataString);
    NSData* xmlData=[xmlDataString dataUsingEncoding:NSUTF8StringEncoding];
    dataParser = [[NSXMLParser alloc] initWithData:xmlData];
    // assign delegate to parser
    dataParser.delegate = self;
    // parse data
    [dataParser parse];
    // release parser
    [dataParser release];
    // release data
    //[xmlData release];
} 
```

活动监视器显示以下行中存在泄漏 -

```
[dataParser parse]; 
```

我不明白。为什么？因为我已经释放了那个对象。

编辑 ：

我将方法更改为-

```
- (void)startParsingData:(NSString *)xmlDataString
{
    NSLog(@"parser started");
    // allocate NSXMLParser
    NSLog(@"XML DATA equals %@", xmlDataString);
    NSData* xmlData=[xmlDataString dataUsingEncoding:NSUTF8StringEncoding];
    [[NSURLCache sharedURLCache] setMemoryCapacity:0];
    [[NSURLCache sharedURLCache] setDiskCapacity:0];
    dataParser = [[NSXMLParser alloc] initWithData:xmlData];
    // assign delegate to parser
    dataParser.delegate = self;
    // parse data
    [dataParser parse];
    // release parser
    [dataParser release];
    // release data
    //[xmlData release];
} 
```

泄漏仍然存在。

![在此处输入图像描述](../Images/b3e3ef3665e728c82bd99cf8ff99bcb3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:41:56.560

尝试使用：

```
[[NSURLCache sharedURLCache] setMemoryCapacity:0];
[[NSURLCache sharedURLCache] setDiskCapacity:0];
dataParser = [[NSXMLParser alloc] initWithContentsOfURL:URL]; 
```

它似乎阻止了人们在这些问题上的泄密：

[当我使用与 SeismicXML 示例相同的 NSXMLParser 时出现内存泄漏问题](https://stackoverflow.com/questions/555623/got-memory-leak-problem-when-i-used-nsxmlparser-same-as-seismicxml-example)

[在这个 Objective-C NSXMLParser 代码中找不到漏洞？](https://stackoverflow.com/questions/2298463/cant-find-the-leak-in-this-objective-c-nsxmlparser-code)

# c# - System.IO.DirectoryNotFoundException：找不到路径 ext4 的一部分

> ID：11984431
> 
> 赞同：2
> 
> 时间：2012-08-16T09:36:36.467
> 
> 标签：c#, filesystems, ext4

我浏览了类似的问题，但找不到我的答案。

我面临的问题是我在 windows 2008 服务器上运行了一个 web 服务。该服务尝试访问 NAS 上的文件。运行服务的用户拥有对网络共享 (NAS) 的读取权限。我仍然收到异常 System.IO.DirectoryNotFoundException: 找不到路径的一部分，即使请求的文件实际上存在于那里。

我从来没有遇到过类似的问题，即使设置总是相同的（在 Windows 服务器上运行的 Web 服务试图访问 NAS 上的文件）。会不会是NAS上的文件系统现在是ext4，一直都是ext3？这是我知道的唯一一个区别。关于文件系统，我需要注意什么特别的事情吗？

编辑：

我试图访问的路径如下所示：

```
 \\NAS\master\finished\20120809AB14001530\data\structure.xml 
```

是的，我可以从 RUN 命令访问它

我尝试以简化的方式访问文件的方式如下所示：

```
 try
   {
         var lXmlDoc = new XmlDocument();
         lXmlDoc.Load(XmlFilePath);
   }
   catch(Exception ex)
   {
      //Some error handling here
   } 
```

在这种情况下，XmlFilePath 所在的位置：“\NAS\master\finished\20120809AB14001530\data\structure.xml” 只是为了更清楚：这一直都是这样，并且有效。在当前设置（我知道）中，唯一的区别是它是 NAS 上的 ext4 而不是一直存在的 ext3。

# php - 函数名必须是字符串 PHP

> ID：11984435
> 
> 赞同：-2
> 
> 时间：2012-08-16T09:36:49.857
> 
> 标签：php

当我尝试调用函数 func_connect_mssql 时出现此错误。

这是我的代码：

```
 $func_connect   = 'func_connect_mssql';
    $session = $func_connect($serv, $user, $pass, $base) 
or die("<p class='Perror'>&middot;Failed - err Connect: ".$func_error()."</p>"); 
```

如您所见，func_connect 是我用来调用函数的变量，这就是我使用“$func_connect”的原因，我尝试更改它并直接输入函数的名称，但仍然在第二行返回相同的错误.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:49:51.517

您对自己的代码有些误导：

```
$func_connect   = 'func_connect_mssql';
$session = $func_connect($serv, $user, $pass, $base) or die("<p class='Perror'>&middot;Failed - err Connect: ".$func_error()."</p>"); 
```

相反，您至少应该将其包装在多行中：

```
$func_connect   = 'func_connect_mssql';
$session = $func_connect($serv, $user, $pass, $base)
    or die("<p class='Perror'>&middot;Failed - err Connect: ".$func_error()."</p>")
    ; 
```

然后错误消息将告诉您错误发生在哪一行。您会惊讶地发现它与您当前认为的位置不同。

由于您的代码看起来有点脆弱，您可能还需要不时添加一些安全网：

```
$func_connect   = 'func_connect_mssql';

is_callable($func_connect)) or die('Connection Function is not callable!');
is_callable($func_error)) or die('Error function is not callable!');

$session = $func_connect($serv, $user, $pass, $base)
    or die("<p class='Perror'>&middot;Failed - err Connect: ".$func_error()."</p>")
    ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T09:39:43.990

尝试这个 ：[`call_user_func()`](http://php.net/manual/en/function.call-user-func.php)

```
$func_connect   = 'func_connect_mssql';
$session = call_user_func($func_connect,$serv, $user, $pass, $base) or die("<p class='Perror'>&middot;Failed - err Connect: ".$func_error()."</p>"); 
```

# android - Android：使用 Min3d 库加载 Wavefront .obj 文件，由于 OutOfMemoryError，第二次启动崩溃

> ID：11984437
> 
> 赞同：1
> 
> 时间：2012-08-16T09:36:57.967
> 
> 标签：android, out-of-memory, wavefront

我正在使用 Android Min3d 库从 Wavefront .obj 文件加载和绘制 3D 模型。

该库工作正常（从 .obj 文件加载和绘图），但问题是当我关闭应用程序，然后我第二次再次启动它时，应用程序崩溃并在尝试创建位图时显示 java.lang.OutOfMemoryError网格纹理。我为 3D 模型（大小为 2048 x 2048）使用单个大纹理。

它在第二次启动时崩溃的事实是否表明 Min3d 框架中存在内存泄漏？

有没有人使用这个库遇到过这个问题？你如何解决这个问题？

我尝试阅读源代码，发现在 Min3D 将纹理发送到 GPU 后，纹理的位图总是被回收。所以我还没有发现任何泄漏。

你能告诉我在这种情况下可能出现什么问题吗？提前谢谢。

注意：如果我将纹理调整为 1024x1024，第二次启动不会崩溃，但应用程序会在第 4 次/第 5 次启动时崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:06:55.600

在开始时清除您的游戏模型。列表、数组...如果您使用异步任务，请查看它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:54:47.360

尝试使用较小的纹理（小于 1024x1024）

# image - 从 Flash CS5 迁移到 Flash Builder

> ID：11984438
> 
> 赞同：1
> 
> 时间：2012-08-16T09:36:57.960
> 
> 标签：image, actionscript-3, flash, flash-builder, flash-cs5

我现在将我的一些项目从 Flash CS5 转移到 FB。我有一个问题：

在 CS5 中，当我想添加一些图像时，我只是将它们导入到库中，将它们放入一些影片剪辑中，将其分配给某个类`Image`（你知道 - 这个选项`export for actionscript`），然后使用如下代码

```
image:Image = new Image();

this.addChild(image); 
```

当我没有库时，如何在 FB 中处理图像？我的意思是我不想从*某个地方*加载它们，但我想将它们包含到我的 swf 文件中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T09:59:49.453

您必须导出 SWC 文件。

参考以下流程。

* * *

1.**为 ActionScript 导出。**

![在此处输入图像描述](../Images/040be2b41cfde08cf270c4cc38b5c37d.png)

* * *

2.**在库中鼠标右键单击`Export SWC File`并命名设置“图像”**

![在此处输入图像描述](../Images/e7434b06f04327d3f3ef21284182426c.png)

* * *

3.**在你的 flash builder 项目中创建一个`asset`文件夹。和您的 SWC 文件拖放或复制。**

![在此处输入图像描述](../Images/2f59651f8fc972211846980dbdf53bd0.png)

* * *

4.**在您​​的项目中鼠标右键单击并单击属性。**

![在此处输入图像描述](../Images/e63f4d705683c9b81f5194a50420f4fa.png)

* * *

5\. **Actionscript Build Path - Library Path -`Add SWC Folder`点击输入a`asset`**

![在此处输入图像描述](../Images/84d205728ece047c113504c538dc85fb.png)

![在此处输入图像描述](../Images/cc39b684b5bb4114be990a1ec60c5a44.png)

* * *

6.**你应该按照代码加载一个类。**

```
package
{
    import flash.display.Sprite;

    public class TestProject extends Sprite
    {
        public function TestProject()
        {
            var image:Image = new Image();
            addChild(image);
        }
    }
} 
```

![在此处输入图像描述](../Images/5c2ade06b86665a5f3af5a5e4d229d77.png)

* * *

# asp.net-mvc - 将构造函数参数传递给 OutputCacheProvider

> ID：11984439
> 
> 赞同：2
> 
> 时间：2012-08-16T09:37:04.857
> 
> 标签：asp.net-mvc, web-config, ninject

我已经实现了一个自定义 OutputCacheProvider

`public class MongoDBCacheProvider : OutputCacheProvider, IDisposable { ... }`

cacheprovider 的注册方式如下：

```
<outputCache defaultProvider="MongoDBCacheProvider" enableOutputCache="true"  >
  <providers>
    <add name="MongoDBCacheProvider" type="Mynamespace.Core.Caching.MongoDBCacheProvider, Mynamespace.Core" />
  </providers>
</outputCache> 
```

我需要将一些参数传递给构造函数。我想使用 Ninject 来绑定我的缓存提供程序。

```
this.Bind<System.Web.Caching.OutputCacheProvider>()
    .To<Core.Caching.MongoDBCacheProvider>()
    .WithConstructorArgument("databaseName", dbName); 
```

必须传递更多参数，但这只是一个示例。我确信存在简单的解决方案来以某种方式获取该字符串，但我更喜欢使用 Ninject，就像我用于所有其他类一样。

失败并显示以下消息：“没有为此对象定义无参数构造函数。” 以下绑定也不起作用。

```
this.Bind<Core.Caching.MongoDBCacheProvider>().ToSelf()
    .InSingletonScope()
    .WithConstructorArgument("databaseName", dbName); 
```

我已经验证绑定在错误发生之前运行。ASP .NET 以某种方式绕过了 ninject 绑定。似乎也没有任何方法可以为它插入工厂。

有人知道我如何将构造函数参数传递给派生的 OutputCacheProvider 吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T14:47:56.550

通过在应用程序启动期间注入对象，您应该能够`Inject`在 Web 应用程序生命周期的早期进入该对象。

注意，您必须优先使用[属性设置器注入](https://github.com/ninject/ninject/wiki/Injection-Patterns)而不是构造器注入，因为可能无法让缓存提供程序提供程序让您控制实例创建。

请参阅[@Remo Gloor 的这篇博文](http://www.planetgeek.ch/2012/02/08/asp-net-provider-injection-with-ninject-3-0-0/)

# google-maps - Google map api：在城市内随机放置标记

> ID：11984445
> 
> 赞同：1
> 
> 时间：2012-08-16T09:37:28.937
> 
> 标签：google-maps, google-maps-api-3

我对一个问题进行了一些研究，但没有找到任何答案。现在，我想知道这是否可行。

更多细节：我想创建一个函数，输入一个城市并在城市内随机返回一个位置（纬度+经度）。问题是我对城市边界一无所知。我正在研究 api v3 javascript

你知道我该怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:39:17.687

[**只需使用文档中**](https://developers.google.com/maps/documentation/javascript/reference#Geocoder)[**此示例**](https://google-developers.appspot.com/maps/documentation/javascript/examples/geocoding-simple)中所示的地理编码服务[](https://developers.google.com/maps/documentation/javascript/reference#Geocoder)

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T09:54:09.487

我认为您需要获取多边形中每个点的经纬度，以便城市干净地做到这一点。

您是否可以不只是通过查找随机地址来回避问题，也许可以抓取本地邮局列表并随机选择一个，然后使用 Google Maps API 对其邮政编码进行地理定位？

在某种程度上，这取决于您所说的随机性。**

# asp.net - 在 IIS 5.1 中托管网站

> ID：11984446
> 
> 赞同：0
> 
> 时间：2012-08-16T09:37:35.097
> 
> 标签：asp.net, iis

我创建了一个示例网站。我使用 Linq 作为模型。我正在尝试在 IIS 5.1 中托管我的网站。但是当我尝试登录（通过 IIS 5.1 访问页面）时，出现以下错误：

```
Cannot open database "WCF" requested by the login. The login failed.Login failed for user . 
```

WCF 是数据库的名称。我的身份验证部分 web.config 是

```
 <authentication mode="Forms">
        <forms loginUrl="Default2.aspx" timeout="2880" />
    </authentication> 
```

我在 IIS 中的安全和身份验证设置是 ![在此处输入图像描述](../Images/7508843353e755425848e9c9b1141320.png)

我的连接字符串是

```
 <connectionStrings>
    <add name="WCFConnectionString" connectionString="Data Source=localhost;Initial Catalog=WCF;Integrated Security=True" providerName="System.Data.SqlClient"/>
</connectionStrings> 
```

知道为什么会这样吗？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:09:41.700

您是否`IUSR_ExXP`拥有数据库的登录权限？当您使用集成安全性时，它将使用 IIS 进程正在运行的任何帐户 - 在这种情况下似乎是`IUSR_ExXP`.

# android - 在没有应用商店和市场的情况下安装 ios 和 android 应用程序的最佳方法是什么？

> ID：11984447
> 
> 赞同：0
> 
> 时间：2012-08-16T09:37:39.653
> 
> 标签：android, ios

我想允许一些展览的参观者安装和测试我的应用程序，这些应用程序目前没有在应用商店和安卓市场中列出。当然，我不知道任何访客设备的 ID。有可能吗？这是最简单的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:50:27.680

目前仅适用于 iOS，但请查看[TestFlight](http://testflightapp.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T09:46:26.617

检查 hockeyApp [http://www.hockeyapp.net/](http://www.hockeyapp.net/)

您在其上上传您的应用程序，并注册“测试人员”，

他们会收到一封带有下载应用程序链接的邮件（对于 iPhone，您需要配置手机）。

安装后，它会发回包含设备类型和操作系统版本的崩溃报告。我认为它是满足您需求的绝佳工具。

它有一个免费版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T09:40:51.990

通过蓝牙将 .apk 文件（适用于 android）传输到用户的手机，以便人们可以安装您的应用

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T10:39:44.607

对于 Android，您可以将您的应用程序放在您的 Dropbox 文件夹中。然后使用像 ZXing 条码扫描器这样的应用程序将该链接作为 QR 码在电子邮件中分享给自己。从电子邮件中提取 .png 图像（可能放大）并再次打印出来。将二维码附在展览的欢迎海报上，并邀请参观者用他们的 Android 手机扫描它（假设他们的手机上有条码扫描器应用程序 - 如果没有，建议他们从 Google Play 下载免费的应用程序）。然后他们可以轻松安装该应用程序，因为扫描代码将下载它。

# sql - 将两列合并为一列，其余部分显示与两个不同的表不同

> ID：11984449
> 
> 赞同：0
> 
> 时间：2012-08-16T09:37:45.653
> 
> 标签：sql

我有两张桌子 A 和 B。

表 A 有`x`和`y`列，B 有`x`和`z`列。

表 A

```
X       y
---------
aa      1
bb      2
cc      3
dd      4 
```

表 B

```
x    z
------
aa   5
ee   6
dd   7
ff   8 
```

我想要的结果是这样的：

结果

```
x      y       z
----------------
aa     1       5
bb     2       
cc     3    
dd     4       7
ee             6
ff             8 
```

你能帮忙解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T09:39:35.500

如果您使用的是 SQL Server，请尝试以下操作：

```
Select COALESCE(A.x,B.x),Y,Z 
FROM TableA A FULL OUTER JOIN TableB B
ON A.X = B.X 
```

### [看到这个 SQLFiddle](http://www.sqlfiddle.com/#!3/a291d/4)

如果您使用的是 MySQL，请尝试以下操作：

```
Select COALESCE(A.X,B.X),Y,Z from TableA A 
Left join TableB B on A.X = B.X
UNION
Select COALESCE(A.X,B.X),Y,Z from TableA A 
RIGHT join TableB B on A.X = B.X 
```

### [看到这个 SQLFiddle](http://sqlfiddle.com/#!2/3a6d2/4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T09:39:47.967

尝试这个：

```
select COALESCE(A.x,B.x),y,z
 from TableA A full outer join tableB B
on A.X=B.X 
```

[**SQL Fiddle 演示**](http://www.sqlfiddle.com/#!3/a291d/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T09:41:16.827

您可能需要在键 X 上连接表 A 和 B。

```
Select A.X, A.Y, B.Z From A full outer join B on A.X = B.X 
```

阅读更多关于 SQL 连接的信息：[http](http://en.wikipedia.org/wiki/Join_%28SQL%29) ://en.wikipedia.org/wiki/Join_%28SQL%29 。

# java - 为什么我的 RadioButtons 和 JLabel 没有显示？

> ID：11984457
> 
> 赞同：1
> 
> 时间：2012-08-16T09:38:16.753
> 
> 标签：java, swing, jpanel, jscrollpane

我创建了一个扩展 JDialog 的组件。它在 JScrollPane 中创建了一个 JPanel（大尺寸）。然后我将 RadioButtons 和 JLabels 添加到 JPanel

两个问题： 1 - RadioButtons 和 JLabels 不显示。2 - JScrollPane 的滚动条不显示

这是我的代码：

```
public class xuggleJOptionPane1 extends JDialog{  

    Container pane;  
    JPanel paneMain;  
    JLabel ms1;  
    xuggleJOptionPane1 myFrame;  
    JPanel panel;  
    JScrollPane paneScroll;  
    JPanel paneScrollpanel;  

    public xuggleJOptionPane1(JFrame parent, String str, int nf)  
    {  
        super(parent, str);  

        myFrame = this;  
        myFrame.setPreferredSize(new Dimension(400, 160));  
        myFrame.setSize(new Dimension(400, 160));  

        panel = new JPanel();  
        panel.setSize(400, 160);  

        ms1 = new JLabel();  

        paneScroll = new JScrollPane();  

        paneScroll.setPreferredSize(new Dimension(380,100));  

        paneScrollpanel = new JPanel();  

        paneScrollpanel.setPreferredSize(new Dimension(1600, 1600));  
        //if i add this line the whole paneScrollpanel disappears  
        //paneScrollpanel.setSize(1600, 1600);  

        String pl ="";  
        if (nf != 1) pl = "es";  
        String s1 = "We found " + nf + " flux"+pl+". Which one do you wanna choose ?";  

        ms1.setText(s1);  

        ArrayList<JRadioButton> Buttons = new ArrayList<JRadioButton>();  
        ArrayList<JLabel> Labels = new ArrayList<JLabel>();  

        ButtonGroup group = new ButtonGroup();  
        for (int i = 0; i < nf; i++)  
        {  
            Buttons.add(new JRadioButton());  
            Labels.add(new JLabel("test"));  
            paneScrollpanel.add(Buttons.get(i));  
            paneScrollpanel.add(Labels.get(i));  
            group.add(Buttons.get(i));  
        }  
        Buttons.get(0).setSelected(true);  

        paneScroll.add(paneScrollpanel);  
        panel.add(ms1);  
        panel.add(paneScroll);  
        myFrame.add(panel);  

        myFrame.setVisible(true);  
        myFrame.setResizable(false);  
    }  

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T09:46:42.750

改变

```
paneScroll.add(paneScrollpanel); 
```

至

```
paneScroll.setViewportView(paneScrollpanel); 
```

当我在这里...

这有点毫无意义（恕我直言）

```
myFrame = this;  
myFrame.setPreferredSize(new Dimension(400, 160));  
myFrame.setSize(new Dimension(400, 160)); 
```

你可以使用

```
this.setSize(new Dimension(400, 160)); 
```

或者

```
setSize(new Dimension(400, 160)); 
```

这有点没有意义

```
panel.setSize(400, 160); 
```

由于布局管理器将自行决定制作面板的大小

您可能还想研究`pack`

就个人而言，我真的非常不喜欢不可调整大小的框架：P

# javascript - 如何在不进行初始刷新的情况下从服务器准备好 Angular.js 应用程序

> ID：11984464
> 
> 赞同：2
> 
> 时间：2012-08-16T09:39:01.790
> 
> 标签：javascript, angularjs

我正在编写 Angular.js 应用程序。我希望它非常快，因此我在最初加载时为它提供完全生成的服务器端。之后，每个更改都应由 Angular 在客户端处理，并与服务器进行异步通信。

我`ng-view`对 central 有属性`<div>`。但是现在 Angular`<div>`甚至在第一次加载时，在点击任何链接之前都会重新生成它的内容。我不想要这种行为，因为那样服务器端的页面生成是无用的。

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T23:15:51.707

尽管 Gloopy 的建议在某些情况下会起作用，但在其他情况下（即`ng-repeat`）会失败。AngularJS 目前不具备在服务器上呈现的能力，但这是（据我所知）其他 JavaScript 框架也没有。我也知道服务器端渲染是 AngularJS 开发人员正在研究的东西，所以你可能会在不远的将来看到它。:)

当您说您希望应用程序“非常快”时，您应该考虑您希望这个速度的确切位置。有很多地方需要考虑速度，例如引导应用程序所需的时间、响应所需的时间、资源密集度等（您似乎专注于引导时间）。通常必须进行不同的权衡以平衡应用程序的性能。我建议阅读对另一个关于 AngularJS 性能问题的回复，以了解更多关于该主题的信息：[Angular.js Backbone.js or which has better performance](https://stackoverflow.com/questions/11458436/angular-js-backbone-js-or-which-has-better-performance/11498872#11498872)

您是否真的遇到了性能问题，或者这只是您预测的问题？如果是后者，我建议构建一个代表您的应用程序类型的原型，看看它是否真的是一个问题。如果是前者，并且您的应用程序在客户端引导上花费的时间太长，那么您可以进行一些优化（例如，内联一些模型数据以避免额外的往返，或使用 Gloopy 的建议）。您还可以使用 Chrome 中的分析工具以及[AngularJS Batarang](https://chrome.google.com/webstore/detail/ighdmehidhipcmcojjgiloacoafjmpfk)来查找应用程序中的慢速区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:57:42.123

btford：你说得对，这听起来像是过早的优化——对我来说也是这样:)。另一个原因是，应用程序应该以非常简单的方式在没有 JS 的情况下工作，所以这个基本布局（并且 Angular 对我来说所有其他页面都是如此），所以总是会在服务器上呈现。

我发现了一个非常丑陋的解决方案——我在第一次点击任何内部链接后启动应用程序。单击它后，我取消绑定此初始回调，更新 URL`History.pushState`并引导应用程序 - 它获取新 URL 并且重新生成绝对可以。好吧，我会继续研究不久的将来:)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T06:44:41.747

我能够想出一个解决方案来做到这一点。它不能完美地工作，也不能适用于所有事情，但至少就路由和我使用 ng-repeat 所做的指令而言，它是可以的。

[https://github.com/ithkuil/angular-on-server/wiki/Running-AngularJS-on-the-server-with-Node.js-and-jsdom](https://github.com/ithkuil/angular-on-server/wiki/Running-AngularJS-on-the-server-with-Node.js-and-jsdom)

# c# - 数据集类内部

> ID：11984467
> 
> 赞同：0
> 
> 时间：2012-08-16T09:39:19.847
> 
> 标签：c#, reflection, dataset

我正在使用反射来调用我的软件中的表单。我有一个包含普通类、表单类和数据集类的库。我只想让表单可以从图书馆外面访问和使用。制作表格和内部的普通类很容易。但是在内部制作数据集比我想象的要难。甚至有可能使它们内部化吗？如果是这样怎么办？

我有一个名为 GendersDataSet 的数据集。当我通过反射调用库并打印出其中的所有类时，我得到了以下信息：

*   性别数据集
*   GendersRowChangeEventHandler
*   性别数据表
*   性别行
*   GendersRowChangeEvent

如何使它们不可见，或者至少对库外的任何类都不可访问？

编辑：编辑了一些拼写错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:53:23.663

我假设您已经使用 VS 提供的默认模板（DataSet.xsd 文件）创建了一个数据集。如果您查看您的解决方案，您将看到一个 [DataSetName].Designer.cs 文件。将该文件中的类设为内部类。高温高压

这将需要创建的所有其他支持类。尽管正如 Marc 建议的那样，这些值可能会被覆盖。

# afnetworking - AFNetworking HTTPClient.networkReachabilityStatusBlock 没有找到？

> ID：11984468
> 
> 赞同：3
> 
> 时间：2012-08-16T09:39:27.047
> 
> 标签：afnetworking

我刚刚从 github 下载了最新版本的 AFNetworking。

我将文件夹拖到我的 xCode iOS 项目中，为 AFNetworking 文件禁用 ARC 并编译 . 编译器提示错误，声称第702行`AFHTTPClient.m`有错误：

```
HTTPClient.networkReachabilityStatusBlock = self.networkReachabilityStatusBlock; 
```

有什么建议吗？我错过了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-16T10:05:06.533

我发现[AFNetworking 的入门指南](https://github.com/AFNetworking/AFNetworking/wiki/Getting-Started-with-AFNetworking)错过了一个关键步骤：

1.  添加`SystemConfiguration.framework`到项目
2.  `#import <SystemConfiguration/SystemConfiguration.h>`在行后添加一行`#import <Foundation/Foundation.h>`in`Prefix.pch`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-31T22:03:03.150

只是为了补充 Shivan 的观点，我认为您还需要添加 1）将 MobileCoreServices/MobileCoreServices 添加到您的项目 2）将 #import 行添加到您的 x.pch 文件

否则 AFNetworking 会抛出警告。

# titanium - 在 Titanium 移动设备中发送自动电子邮件

> ID：11984470
> 
> 赞同：1
> 
> 时间：2012-08-16T09:39:33.147
> 
> 标签：titanium, appcelerator, titanium-mobile, appcelerator-mobile

我正在做一个项目，我需要发送带有一些预定义消息的电子邮件。Titanium Mobile 提供通过 Titanium.UI.EmailDilog 发送电子邮件。但这不符合我的要求。我需要发送电子邮件而不向用户显示对话框。如果有人对此有解决方案，请告诉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T21:12:40.443

您无法在使用 Titanium Mobile 的设备上执行此操作，但您可以尝试使用 Appcelerator 云服务 (ACS) 发送它。见[Cloud.Email](http://docs.appcelerator.com/titanium/2.1/index.html#!/api/Titanium.Cloud.Emails)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:18:15.530

您的具体要求是什么？*它是向*用户的收件箱发送预定义的（交易性的？）电子邮件还是*代表*用户向第三方发送？对于一个简单的解决方案（用于验证用户电子邮件、密码重置等），我会说 Parse。Parse 中发送密码重置电子邮件的示例：

> 您可以为拥有与其帐户关联的电子邮件的用户启动密码重置。为此，请向 /1/requestPasswordReset 端点发送一个 POST 请求，请求正文中包含电子邮件：

```
curl -X POST \
  -H "X-Parse-Application-Id: ${APPLICATION_ID}" \
  -H "X-Parse-REST-API-Key: ${REST_API_KEY}" \
  -H "Content-Type: application/json" \
  -d '{"email":"coolguy@iloveapps.com"}' \
  https://api.parse.com/1/requestPasswordReset 
```

来源：[解析文档](https://www.parse.com/docs/rest#users-password-reset)

对于更多自定义交易电子邮件，有[Mandrill](http://mandrill.com/)（由 Mailchimp 提供支持）

这些都符合要求吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T14:56:24.553

未经用户同意（在 iOS 或 Android 上），您不能使用本机 API 发送电子邮件。唯一的方法是使用本机对话框。我很确定这已经到位，因为 Apple 不希望您代表用户发送垃圾邮件。对于android，答案是一样的，至少对于Titanium。

如果您真的想这样做，我认为您有两个选择，编写一个代表您发送电子邮件的网络服务，然后让移动应用程序调用它。或者为 iOS 包装一个库，例如[SKPMTPMessage，](http://code.google.com/p/skpsmtpmessage/)以编程方式发送消息。

# javascript - 使用 JQuery 更改 Html 中特定分区的样式/css 参考文件

> ID：11984476
> 
> 赞同：0
> 
> 时间：2012-08-16T09:39:51.380
> 
> 标签：javascript, jquery, css, jqgrid, styles

> **可能重复：**
> [JQgrid 更改添加表单的 css](https://stackoverflow.com/questions/11928974/jqgrid-change-css-of-the-add-form)

我想使用. `style/css`_ 例如，在这里我有一个类在不同的 css 文件中有不同的样式。现在我想只在页面中更改该特定 div 的引用，这将被引用到另一个 css 参考文件，我该怎么做这个运行时？`div``HTML``JQuery``C1`

# c# - 如何使用 Entity Framework + Mysql（在控制台应用程序中）

> ID：11984477
> 
> 赞同：0
> 
> 时间：2012-08-16T09:39:52.413
> 
> 标签：c#, .net, mysql, linq, entity-framework-5

我正在创建一个广泛使用数据库的应用程序。现在我们使用 Mysql 连接器，简单的 sql 语法来满足我们的需求。现在我们正在尝试使用 LINQ 进行数据库查询。所以我正在尝试实施`DBcontext`. 但它没有正确连接。问题出在连接字符串中。

这是我现在使用的方法，

```
class My_DB_Context: DB_Context
{
     public My_DB_Context(string connection_String):base(connection_String){}
     void make_Some_Transaction(){}
}

public void Main()
{
     string conn_Str = "SERVER=localhost;DATABASE=my_DB;UID=temp_User;PASSWORD=password;";

     My_DB_Context temp = new My_DB_Context();
     temp.make_Some_Transaction();
} 
```

任何人都可以说如何实现这一目标？有很多关于如何在 ASP.Net 中实现这一点的帖子。但是，我找不到类似控制台的应用程序。本文[承诺](https://stackoverflow.com/questions/10452840/generate-ado-net-entity-framework-using-sql-server-2008-r2-and-connect-to-mysql)这是可能的。

注意：我使用的是 C#/.Net 4.0。Visual Studio 2010，实体框架 5.0.0

**EDIT-1：** 我忘了提到我对 ASP.Net 一无所知。所以，我无法理解他们在[那篇文章](https://stackoverflow.com/questions/10452840/generate-ado-net-entity-framework-using-sql-server-2008-r2-and-connect-to-mysql)中更改的参数。这些是我收到的异常消息

```
An error occurred while getting provider information from the database. This can be 
caused by Entity Framework using an incorrect connection string. Check the inner 
exceptions for details and ensure that the connection string is correct. 
```

下面是内部异常

```
A network-related or instance-specific error occurred while establishing a connection 
to SQL Server. The server was not found or was not accessible. Verify that the 
instance name is correct and that SQL Server is configured to allow remote connections" 
```

**EDIT-2：** 在 Ingo 发表评论后，现在只有我注意到他们仅在昨天发布了它。但是，这个问题非常基础。他们不会轻易改变这些事情。因此，旧 Entity FrameWorks 的答案也受到了兼容性的欢迎。

**EDIT-3：** 我看到了一个叫做 entity_Connection_String 的东西。我认为这是我必须挖掘的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:17:18.903

实体框架确实适用于 MySQL。您将需要执行以下操作：

1.  包括 app.config 中提供的 MySql
2.  改变你的 Main 函数看起来更像这样

代码：

```
public void Main()
{
   string conn_Str = "name=MyDbContextConnectionStringNameFromAppConfigFile";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:45:19.473

你告诉我们你已经[为 .net 安装了官方的 mysql 连接器](http://www.mysql.com/downloads/connector/net/)，所以这是一件好事

现在您的连接字符串有一个错误：

你的：

```
SERVER=localhost;DATABASE=my_DB;UID=temp_User;PASSWORD=password 
```

应该：

```
Server=localhost;Database=my_DB;Uid=temp_User;Pwd=password; 
```

来源： http: [//www.connectionstrings.com/mysql#p28](http://www.connectionstrings.com/mysql#p28)

# knockout.js - 通过 Knockout.js 在新页面上编辑记录

> ID：11984479
> 
> 赞同：0
> 
> 时间：2012-08-16T09:40:01.883
> 
> 标签：knockout.js, asp.net-mvc-4, knockout-mapping-plugin

我想通过 knockout.js 在新页面上加载记录。谁能指导我如何做到这一点。

我在 url 中有 id**`http://localhost:2313/company/addedit/23`**

现在我想根据这个 id 加载数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T22:03:44.570

您可以将 id 分配给 View 中的某个 js 变量：

查看代码：

```
 <script type="text/javascript">    
       var companyId = @ViewBag.Id;
   <script> 
```

在 javascript 中，您可以使用该变量，例如：

```
$.get(url + "/" + companyId, function(data) {
// process data
}); 
```

或者您可以通过 html 标签的数据属性传递 id，例如：

```
<span id="categoryId" data-category="@ViewBag.Id"></span> 
```

在js中：

```
$.get(url + "/" + $('#categoryId').data('category'), function(data) {
// process data
}); 
```

# vim - Readline：当使用 vi 键盘映射时，在插入模式下向后大写一个单词

> ID：11984483
> 
> 赞同：1
> 
> 时间：2012-08-16T09:40:31.210
> 
> 标签：vim, vi, readline

输入大写单词时，我总是忘记打开 CapsLock。我更喜欢键入一个单词，然后使用 Vim 或面向 readline 的程序中的绑定将其大写。它在 Vim 中很容易完成，但在 readline 中却不是。

我使用 vi 键盘映射并进入了我的下一行`.inputrc`

```
set keymap vi-insert
"\C-a":upcase-word
"\C-z":vi-bword
"\C-l":"\C-z\C-a" 
```

所以`Ctrl-L`在插入模式下大写一个单词。但是，当有 undescores 时它会中断。例如`lc_time`变成`LC_time`. 我可以`Ctrl-A`在下划线后按大写单词的下一部分，但这很乏味。

那么有没有办法让它通过 undescores 呢？我找不到解决此问题的 readline 命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T20:10:48.350

`C-a`并且`C-z`已经非常有用了，我不认为很多人会想要重新映射它们。`"\eu"`已经映射到相当无用的（单独）`upcase-word`，它希望您键入一个单词，将光标移回其开头，然后键入`M-u`. `upcase-word`但是，确实需要一个参数，如果您需要大写几个单词，这可能会很好。尝试这个：

```
# upper case word (default after cursor). alt-(number) for N words
"\eU": upcase-word
# upper case word before cursor.
"\eu": "\e-1\eU" 
```

这使得`M-u`一个单词向后大写，同时当人们真正记住存在时，仍然可以选择使用 alt-shift-u 给出参数。好消息是它几乎不会改变默认映射并且不会踩到任何其他映射。

例如`do not do that again` `M--` `5` `M-U`将产生`DO NOT DO THAT AGAIN`

# html - 通过 Twitter Bootstrap 将按钮附加到输入字段

> ID：11984485
> 
> 赞同：2
> 
> 时间：2012-08-16T09:40:48.310
> 
> 标签：html, css, twitter-bootstrap

我目前正在使用[Twitter Bootstrap](http://twitter.github.com/bootstrap/)，并且对元素的大小有疑问。我想创建一个带有附加按钮的输入字段。这就是我使用带有“input-append”的 div 的原因，它围绕输入和按钮标签。现在我的问题是：我希望一切都大一点。所以我给按钮标签属性“btn-large”。不幸的是，输入字段似乎没有类似的属性。如何使输入字段适合附加的按钮？

```
<div class="input-append">
    <input class="span3" id="appendedInputButton" size="16" type="text"><button class="btn btn-large" type="button"><i class="icon-search"></i></button>
</div> 
```

这是我的问题的印象：

![在此处输入图像描述](../Images/030fde0ee3e68cdafb0a9f32f0d878d1.png)

问候，克里斯托夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T10:00:25.867

为**您**的`input field`. 像这样写：

```
input, button{
 box-sizing:border-box;
 -moz-box-sizing:border-box;
 -webkit-box-sizing:border-box;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T11:16:41.353

您可以使用以下样式，如果您想要更大，则增加填充。

```
input, button{ 
    padding: 7px;    
} 
```

# c#-4.0 - C# 4.0 编译时图灵是否完整？

> ID：11984490
> 
> 赞同：8
> 
> 时间：2012-08-16T09:41:06.640
> 
> 标签：c#-4.0, computation-theory, turing-complete

众所周知，[C++ 模板是图灵完备的](https://stackoverflow.com/questions/189172/c-templates-turing-complete)，[CSS 是图灵完备的](https://stackoverflow.com/a/5239256/123371)（！），并且[C# 重载解决方案是 NP-hard](http://blogs.msdn.com/b/ericlippert/archive/2007/03/28/lambda-expressions-vs-anonymous-methods-part-five.aspx)（即使没有泛型）。

但是 C# 4.0（具有协/逆变、泛型等）**编译时图灵是否完整**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T21:38:13.580

与 C++ 中的模板不同，C#（和其他 .net 语言）中的泛型是运行时生成的功能。编译器会进行一些检查以验证所使用的类型，但实际替换发生在运行时。如果我没记错~~的话，Co 和逆变也是如此，甚至[预处理器指令](http://msdn.microsoft.com/en-us/library/aa691094%28v=vs.71%29.aspx)~~也是如此。很多 CLR 魔法。

> （在实现级别，主要区别在于 C# 泛型类型替换是在运行时执行的，因此为实例化对象保留了泛型类型信息）

见 MSDN

[http://msdn.microsoft.com/en-us/library/c6cyy67b(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/c6cyy67b%28v=vs.110%29.aspx)

**更新：** CLR 通过存储在与已编译程序集关联的元数据中的信息进行预执行类型检查（[Vis-à-vis Jit Compliation](http://en.wikipedia.org/wiki/Just-in-time_compilation)），它作为其众多服务之一执行此操作，（[ShuggyCoUk 对此问题的回答详细解释了它](https://stackoverflow.com/questions/601974/clr-vs-jit)） （其他包括内存管理和异常处理）。因此，我会推断编译器将状态理解为进程，并将状态理解为机器内部状态（[TC](http://en.wikipedia.org/wiki/Turing_completeness)，部分意味着能够参考先前的数据（符号）来查看数据（符号），有条件地和评估）（我犹豫要说明[TC](http://en.wikipedia.org/wiki/Turing_completeness)的确切定义因为我自己不确定我是否完全掌握了它，所以请随时填写空白并在适用时纠正我）所以我会有点恐惧地说，是的，是的。

# asp.net-mvc-3 - 来自不同模型的级联下拉菜单

> ID：11984492
> 
> 赞同：0
> 
> 时间：2012-08-16T09:41:16.700
> 
> 标签：asp.net-mvc-3

在我的 MVC3 应用程序中，我的视图中有两个下拉菜单“类别”和“子类别”，它们来自两个不同的模型。视图本身属于第三种模型。我正在为 ORM 使用 NHibernate。

我的问题是如何级联这两个下拉菜单。子类别下拉列表应根据类别下拉列表中选择的值显示值。“类别”下拉列表从“类别”模型中检索值，“子类别”下拉列表从“子类别”模型中检索值。这两个下拉列表显示在属于另一个模型“费用”的视图中。

请查看此代码片段以获取更多信息。费用视图具有以下下拉菜单：

```
@using (Html.BeginForm()) {
<div class="editor-field">
            @Html.DropDownListFor(model => model.CategoryId.CategoryName, new SelectList(new MyExpense.Persistence.Repositories.CategoriesRepository().GetCategoryName()))
            @Html.ValidationMessageFor(model => model.CategoryId.CategoryName)
</div>
<div class="editor-field">
        @Html.DropDownListFor(model => model.SubCategoryId.SubCategoryName, new SelectList(new MyExpense.Persistence.Repositories.SubCategoriesRepository().GetSubCategoryName()))
        @Html.ValidationMessageFor(model => model.SubCategoryId.SubCategoryName)
</div>
} 
```

CategoriesRepository 和 SubCategoriesRepository 是包含从数据库中检索类别和 SuCategories 的方法的类。

非常感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:10:11.347

就我个人而言，我只会填充第一个下拉列表，然后在选择更改时执行 AJAX 请求 - 请求所选类别 ID 的子类别选项。从您返回的结果中，您可以重建子类别列表。看看[这个帖子](https://stackoverflow.com/questions/5497524/easiest-way-to-create-a-cascade-dropdown-in-asp-net-mvc-3-with-c-sharp)

# jms - HornetQ：超时持久订阅，其中客户端未连接 X 时间

> ID：11984496
> 
> 赞同：1
> 
> 时间：2012-08-16T09:41:57.823
> 
> 标签：jms, hornetq

我们最近开始在一个项目中使用 hornetq，并且我们使用持久订阅主题。但是，我们无法控制订阅者。如果客户端在过去 24 小时内没有连接，我们想要做的是使持久订阅超时。想要这样做有几个原因。主要原因是客户端 ID 可能会更改，或者连接的客户端可能会消失。

有没有人有任何想法？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T17:20:24.237

这似乎是一个不错的功能。您应该打开一个功能请求。

同时，您可以使用管理 API 来发现您拥有的队列以及队列上的消费者数量。在这一点上，你必须在 hornetq 之外控制这样的事情。

如果有人实现了这个功能，我们会接受贡献，我们可以在这个过程中进行合作。

# c - 管道输入/输出到进程

> ID：11984497
> 
> 赞同：0
> 
> 时间：2012-08-16T09:41:59.667
> 
> 标签：c, windows, pipe, stdout, stdin

我的管道工作有些困难。我有以下代码：

```
/* Set security attributes */
sa.nLength = sizeof(SECURITY_ATTRIBUTES);
sa.bInheritHandle = TRUE; 
sa.lpSecurityDescriptor = NULL; 

if (CreatePipe(&Rread, &Rwrite, &sa, 0) == 0 || SetHandleInformation(Rread, HANDLE_FLAG_INHERIT, 0) == 0 || CreatePipe(&Wread, &Wwrite, &sa, 0) == 0 || SetHandleInformation(Wwrite, HANDLE_FLAG_INHERIT, 0) == 0)
{
    /* Error */
}

/* Set process information */
si.dwFlags = STARTF_USESTDHANDLES;
si.hStdOutput = Rwrite;
si.hStdError = Rwrite;

if (CreateProcess(NULL, argsCasted->cmd, NULL, NULL, TRUE, CREATE_NO_WINDOW, NULL, NULL, &si, &pi) == 0)
{
    /* Error */
}

for (;;)
{
    PeekNamedPipe(Rread, NULL, 0, &a, NULL, NULL);

    if (a > 0)
    {
        /* Write output somewhere... */
    }

    if (a == 0 && GetExitCodeProcess(pi.hProcess, &c) != 0 && c != STILL_ACTIVE) break;

    Sleep(50);
}

    /* CloseHandles... */

    /* Free stuff... */ 
```

现在，当我添加`si.hStdInput = Wread;`（以便我可以向进程发送输入）时，`PeekNamedPipe()`阻塞。

我简化了很多代码，因为它是大型多线程应用程序的一部分，太大了，无法在此处发布。如果有人需要我提供更多详细信息来解决此问题，请在此处发布，我将添加所需的详细信息。

提前感谢乔里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:03:19.517

`PeekNamedPipe`如果管道中没有要读取的数据，将阻塞。您将不得不使用异步/非阻塞 I/O。

参考：[异步IO](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365683%28v=vs.85%29.aspx)

# json - 如何格式化json的数据时间

> ID：11984514
> 
> 赞同：0
> 
> 时间：2012-08-16T09:43:12.333
> 
> 标签：json, entity-framework

我正在使用 EF 使用匿名类型查询数据库。

这里是我用于 EF 的代码

```
 public JsonResult OverdueEventsCustom()
    {
        var eventCustomOverdue = _eventCustomRepository.FindOverdueEventsCustom();
        return Json(eventCustomOverdue, JsonRequestBehavior.AllowGet);
    }

    public IQueryable<dynamic> FindOverdueEventsCustom()
    {
        DateTime dateTimeNow = DateTime.UtcNow;
        DateTime dateTomorrow = dateTimeNow.Date.AddDays(1);
        return db.EventCustoms.Where(x => x.DateTimeStart < dateTomorrow)
                    .Select(y => new { y.EventId, y.EventTitle, y.DateTimeStart});
    } 
```

使用调试器检查我看到属性是这种格式

```
Date = {16/08/2012 00:00:00} 
```

JSON的结果是

```
[{
    "EventId": 1,
    "EventTitle": "Homework Math",
    "DateTimeStart": "\/Date(1345108269310)\/"
}, {
    "EventId": 4,
    "EventTitle": "Homework help with Annie",
    "DateTimeStart": "\/Date(1345108269310)\/"
}, {
    "EventId": 6,
    "EventTitle": "Physic laboratory",
    "DateTimeStart": "\/Date(1345108269310)\/"
}] 
```

我需要这种格式的json

```
"DateTimeStart": "(16/08/2012)" 
```

知道我在这里做错了什么吗？感谢您的帮助

相关文章

[http://www.hanselman.com/blog/OnTheNightmareThatIsJSONDatesPlusJSONNETAndASPNETWebAPI.aspx](http://www.hanselman.com/blog/OnTheNightmareThatIsJSONDatesPlusJSONNETAndASPNETWebAPI.aspx)

[如何格式化 Microsoft JSON 日期？](https://stackoverflow.com/questions/206384/how-to-format-a-json-date)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:56:46.470

`"\/Date(1345108269310)\/"`是将日期传递给 javascript 的正确方法。在我看来，你有两个选择：

如果您不明确需要将该值作为日期，则可以将一个字符串传递给 JSON 变量，其中包含打印精美的日期。类似于以下内容：

```
DateTimeStart: String.Format("{0: dd-MM-yyyy}", myDate) 
```

如果您仍然需要在 javascript 中使用变量 aa 日期（例如用于计算），最简洁和易读的方法是创建一个 javascript 函数，将所述日期转换为您想要的漂亮打印字符串（我不知道这样的功能是否已经存在。虽然创建起来并不难：

```
function prettyDate(date) {

    return date.getDate() + "-" + date.getMonth() + "-" + date.getFullYear();

} 
```

我建议将它作为字符串从您的代码中传递出去，因为它更具可读性。但这仅在您不需要使用除显示之外的日期时才有效。

# php - 从页面中完全删除 Facebook 应用程序

> ID：11984518
> 
> 赞同：0
> 
> 时间：2012-08-16T09:43:22.863
> 
> 标签：php, facebook-graph-api

我使用以下 PHP 从 facebook 页面成功删除了一个标签：

```
$facebook->api('/'.$p_PageId.'/tabs/app_'.$p_AppId, 
               'DELETE', 
                array("access_token" => $p_PageAccessToken)); 
```

但是，该应用程序仍位于页面管理员的“添加的应用程序”部分，并且可以更改其设置，以便将其再次添加到页面中。这很混乱，我不希望用户认为他们删除了一个应用程序，却发现它位于添加应用程序列表的底部。

有谁知道一旦将应用程序作为页面选项卡删除后如何完全删除/卸载该应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:11:44.297

它不应该只是'/pageid/tabs/app_id'而不是app_appid吗？还要检查 is_permanent 字段，因为这些不能被删除，详见此处

[https://developers.facebook.com/docs/reference/api/page/#tabs](https://developers.facebook.com/docs/reference/api/page/#tabs)

尽管文档确实说它只是“删除已安装的配置文件选项卡”而不是完全删除应用程序，这就是为什么这可能会导致歧义，就像您一样，我希望能够完全删除应用程序。看起来可能是用户必须明确单击以表示他们想要删除应用程序而不是卸载选项卡。这可能是一种阻止人们删除彼此页面应用程序的安全措施，因为这可能会导致这些应用程序中的数据被删除。

# mysql - 如何将创建表上的数据类型指定为mysql中的选择？

> ID：11984519
> 
> 赞同：2
> 
> 时间：2012-08-16T09:43:22.597
> 
> 标签：mysql, database

当我运行附加示例时，它会创建具有列 ID 和数据类型 bigint(295) 的表，我想将其定义为 int(11)。在更复杂的查询中（我有来自组 concat 的 id）我有文本而不是 int。

如何将创建表上的数据类型指定为mysql中的选择？

```
DROP TABLE IF EXISTS some_table;
CREATE TABLE IF NOT EXISTS some_table AS (
SELECT
CONVERT("123,456,789,987,654,321,741,852,963,147,258,369,123,456,789,987,654,321,741,852,963,147,258,369
  ,2123,456,789,987,654,321,741,852,963,147,258,369,123,456,789,987,654,321,741,852,963,147,258,369
  ,3123,456,789,987,654,321,741,852,963,147,258,369,123,456,789,987,654,321,741,852,963,147,258,369"
, SIGNED INTEGER) AS id); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T11:46:46.970

我找不到直接的方法来做到这一点。通过alter table解决它，对我有用，也许有更好的解决方案。

```
DROP TABLE IF EXISTS some_table;
CREATE TABLE IF NOT EXISTS some_table AS (
SELECT
CONVERT("123,456,789,987,654,321,741,852,963,147,258,369,123,456,789,987,654,321,741,852,963,147,258,369
  ,2123,456,789,987,654,321,741,852,963,147,258,369,123,456,789,987,654,321,741,852,963,147,258,369
  ,3123,456,789,987,654,321,741,852,963,147,258,369,123,456,789,987,654,321,741,852,963,147,258,369"
, SIGNED INTEGER) AS id);

ALTER TABLE some_table CHANGE id id INT( 11 ) NULL DEFAULT NULL ; 
```

# vim - vim 缩进：对齐函数参数

> ID：11984520
> 
> 赞同：13
> 
> 时间：2012-08-16T09:43:28.777
> 
> 标签：vim, vim-plugin

vim 中的默认对齐方式（使用“=”）将我的代码对齐为：

```
void my_loooong_function (int arg1,
        int arg2,
        int arg3
        ) 
```

但是，我希望与从同一行开始的所有参数保持一致，例如：

```
void my_loooong_function (int arg1,
                          int arg2,
                          int arg3
                         ) 
```

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-16T11:22:27.480

要按`==`您的意愿工作，您需要`cinoptions`适当地设置：

```
:set cino+=(0 
```

可以通过 找到可能值的完整文档，`:help cinoptions-values`特别`:help cino-(`是控制未闭合括号内的缩进。

该设置还将影响自动缩进行为（例如，当您在打开括号后输入回车时）。

当然，这可以添加到您的 vimrc 或 ftplugin 以自动为某些文件类型设置此值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-16T09:46:49.010

试试 vim 插件[`Tabular`](https://github.com/godlygeek/tabular)：

```
:Tabularize /\v[( )](int|$) 
```

* * *

教程：http: [//vimcasts.org/episodes/aligning-text-with-tabular-vim/](http://vimcasts.org/episodes/aligning-text-with-tabular-vim/)

# objective-c - 如何为 UITableViewController 中不同部分的每一行指定高度？

> ID：11984525
> 
> 赞同：0
> 
> 时间：2012-08-16T09:43:54.200
> 
> 标签：objective-c, ios, xcode, uitabbarcontroller

我有一个 UITableViewController 具有不同的部分和行，我以编程方式创建它们，我希望每个部分都有特定的高度

请让我知道如何为每行部分设置特定的高度？

提前致谢！

正如你所看到的，因为我使用了 heightForRowAtIndexPath：我的部分中的每一行都有相同的高度，但我希望每个部分都有特定的高度

![在此处输入图像描述][2]

我知道我们有**heightForHeaderInSection**和**heightForFooterInSection**但我如何将几个部分的特定高度放在一张表中

这是代码：

**编辑：**

如果我使用此代码，那么我的部分之间有很大的空间，但我希望在不同部分的每一行都有特定的高度

```
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section {
switch (section) {
    case 0:
        return 40;
        break;
    case 1:
        return 40;
        break;
    case 2:
        return 80;
        break;
    default:
        return 40;
        break;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T09:45:18.197

根据截面为不同的情况返回不同的高度

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
    switch (indexPath.section) {
        case 0:
            return your_req_height;
            break;            
        default:
            break;
    }
} 
```

`NSIndexPath`提供行和部分，因此您可以为部分中的每一行返回不同的高度。

应该补充的是，这种方法看起来很脆弱，因为您要将特定的部分/行对绑定到固定高度。您应该使用标记来设置表格项，该标记指示每个部分/行对中的内容类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T12:33:38.727

您需要添加此代码。这将为您的 CheckBoxCompensationViewCell 类型单元格返回自定义高度。只需将 your_required_height 替换为 CheckBoxCompensationViewCell 的高度。我试过60。

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {

switch (indexPath.section) {

//Since you have custom cells i-e CheckBoxCompensationViewCell type cells in this section, you need to return custom cell height in tableview
case 2:
    return 60; //i am supposing your_required_height is 60
    //return your_required_height; //height of CheckBoxCompensationViewCell
    break;

default:
    return 44; //default_height of tableview cell
    break;
    }
} 
```

# mysql - Mysql按其他表调用结果排序

> ID：11984526
> 
> 赞同：-2
> 
> 时间：2012-08-16T09:43:57.540
> 
> 标签：mysql

请允许我再次提出一个愚蠢的问题。我真的很难从两个表中调用查询 mysql。

post_table

```
 PostID | UID_frm

    10     | 1
    10     | 2
    10     | 3
    10     | 4
    10     | 5 
```

用户表

```
 Name   | FID

    tom    | 2
    tom    | 3
    henry  | 4 
```

我想在下面得到这个结果。

```
UID_frm
2
3
1
4
5 
```

它是 UID_frm 列的结果，但优先级按 user_table.FID 排序。请告知我想这样打电话：（但不起作用）

```
select UID_frm 
from post_table 
where PostID='10'  
order by (select FID 
            from user_table 
           where Name='tom') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:51:33.873

我认为这就是你要找的：

```
SELECT UID_frm
FROM post_table a
     LEFT JOIN user_table b
        ON a.UID_frm = b.FID
WHERE PostID = '10'
ORDER BY (IF(b.Name = 'tom', b.FID, NULL)) ASC, a.UID_frm ASC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T09:54:07.383

试试这个

```
select PT.UID_frm 
    from post_table as PT,user_table as UT
    where UT.FID=PT.UID_frm and PT.PostID='10'
    order by UT.name ASC/DESC 
```

# jquery - 带有音频幻灯片的 Jquery html

> ID：11984528
> 
> 赞同：1
> 
> 时间：2012-08-16T09:44:02.723
> 
> 标签：jquery, audio, slideshow

我需要一个 jquery html 幻灯片，其中每个 html 内容都有一个音频内容。

每张幻灯片都有一个音频文件。在显示该幻灯片时播放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:51:55.153

如果不是一个确切的解决方案，我相信您至少可以通过这个**[Google 搜索](http://www.google.com/webhp?hl=en#hl=en&sugexp=les;&gs_nf=1&cp=17&gs_id=1u&xhr=t&q=jquery%20audio%20slideshow&pf=p&sclient=psy-ab&oq=jquery%20audio%20slid&gs_l=&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&fp=ad95e93aa7df556d&biw=1024&bih=679)**找到一些有用的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T21:20:38.560

如果您想使用 audacity 之类的工具将所有音频剪辑组合成一个音频文件，您可以使用 Soundslides 拥有的 HTML 5 播放器。

[http://soundslides.com](http://soundslides.com)

# sql - SQL 用单词 else 替换空的 SQL SELECT 将结果发布到 Oracle

> ID：11984551
> 
> 赞同：1
> 
> 时间：2012-08-16T09:45:04.190
> 
> 标签：sql, oracle, if-statement, case

我正在尝试解决以下问题：

我想做一个选择，当结果为空时，它应该被替换为“空”，否则结果的所有行都应该在那里。喜欢：

```
if (select has no result)
{
 One Line as result with 'no result'
}
else
{
 post every line of the select result
} 
```

那是我的尝试：

```
select case when count(*) = 0
   then 'no Entry'
   else Members --all Members should be here
END as Member
from tableMember where Membergroup = 'testgroup'; 
```

感谢所有可以帮助我的人！

**请向我展示在Oracle**中使用查询所需的完整代码

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:48:10.620

*甲骨文*

```
DECLARE C INTEGER;
SELECT COUNT(*) INTO C FROM tableMember WHERE Membergroup = 'testgroup';

IF C > 0
THEN
    SELECT * FROM tableMember;
ELSE
    SELECT 'No results!' FROM tableMember;
END IF; 
```

*仅限 MS-SQL*

```
IF EXISTS(SELECT * FROM tableMember WHERE Membergroup = 'testgroup')
BEGIN
    SELECT * FROM tableMember
END
ELSE
BEGIN
    SELECT 'No results!'
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T09:52:17.847

尝试这个：

```
DECLARE @counter int

SET  @counter = (select count(*) from tableMember where Membergroup = 'testgroup');

IF (@counter > 0)
BEGIN
     SELECT * FROM Members
END
ELSE
BEGIN
     SELECT 'No results!'
END 
```

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T09:55:49.497

我宁愿在应用程序代码而不是存储过程中这样做。您在这里尝试做的是与用户体验相关的工作，恕我直言，数据库不应该关心这些工作。**

# jquery - ruby on rails jquery ajax post返回404未找到

> ID：11984553
> 
> 赞同：0
> 
> 时间：2012-08-16T09:45:07.247
> 
> 标签：jquery, ruby-on-rails, ajax, post

jquery ajax 帖子返回**404 Not Found** in **Firebug** ...我有什么遗漏吗？

编辑：这是以前工作的，突然停止工作 **routes.rb**

```
 #invites
  match '/invites/request' => 'invites#request_invite' 
```

**邀请控制器.rb**

```
class InvitesController < ApplicationController

    def request_invite

        if !request.xhr?
            render_404
            return
        end

        email_exists = Invite.where(:email => params[:invite][:email]).exists?

        if email_exists
            @return = { :error => false, :response => "<div class=\"success\">Thank you!</div>" }
        else
            @invitation = Invite.new(params[:invite])

            if @invitation.save
                @return = { :error => false, :response => "<div class=\"success\">Thank you!</div>" }
            else
                error_message = '<div class="error_message">' + @invitation.errors.full_messages.map {|error| "<p>#{error}</p>"}.join + "</div>"
                @return = { :error => true, :response => error_message } 
            end
        end

        render :json => ActiveSupport::JSON.encode( @return )

    end

end 
```

**邀请.rb**

```
class Invite < ActiveRecord::Base

    validates :email, :presence => true, :uniqueness => true

    validates_format_of :email, :with => /^([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})$/i

end 
```

**javascript:**

```
//post ajax
jQuery.fn.postAjax = function(success_callback) {
  this.submit(function() {
    $.post(this.action, $(this).serialize(), success_callback);
    return false;
  })
  return this;
};
$(document).ready(function() {

  $("#invites_form").postAjax(function(data){
    if(data.error == true){
      popup.init({
        title : "Please fix the following errors:",
        body : data.response
      });
    }
  });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:25:56.760

我已将访问用户页面的方式从 /users/show/:id 更改为 /:id ，这导致了问题

所以我将我的**routes.rb**文件更改为

```
 match '/:username/' => 'users#show'
  #invites
  match '/invites/request' => 'invites#request_invite'
  #get user profile pages
  match '/:username/:page' => 'users#show' 
```

现在它工作正常

# objective-c - 在地图上给定点之间绘制折线

> ID：11984554
> 
> 赞同：2
> 
> 时间：2012-08-16T09:45:08.943
> 
> 标签：objective-c, ios, mapkit, mkoverlay

我正在实现一个 iOS 应用程序，我想在地图上的几个给定坐标之间绘制一条折线。

我编写了代码并得到了从我的点绘制的多段线到达一个无限点。换句话说，线的起点从我给定的纬度和经度点开始，但线的终点是无限的，而不是另一点。

这是我的代码...

`NSMutableArray`我在一个被调用的坐标中填充了坐标`routeLatitudes`。数组单元格被填充一个用于纬度，一个用于填充经度。

```
MKMapPoint* pointArr = malloc(sizeof(CLLocationCoordinate2D) * [routeLatitudes count]); 

for(int idx = 0; idx < [routeLatitudes count]; idx=idx+2)
{
    CLLocationCoordinate2D workingCoordinate;       
    workingCoordinate.latitude=[[routeLatitudes objectAtIndex:idx] doubleValue];
    workingCoordinate.longitude=[[routeLatitudes objectAtIndex:idx+1] doubleValue];  
    MKMapPoint point = MKMapPointForCoordinate(workingCoordinate);
    pointArr[idx] = point;      
}   

// create the polyline based on the array of points. 
routeLine = [MKPolyline polylineWithPoints:pointArr count:[routeLatitudes count]];
[mapView addOverlay:self.routeLine];
free(pointArr); 
```

和覆盖委托

```
- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay
{
   MKOverlayView* overlayView = nil;

  if(overlay == routeLine)
  {
    self.routeLineView = [[[MKPolylineView alloc] initWithPolyline:self.routeLine]        autorelease];
    self.routeLineView.fillColor = [UIColor colorWithRed:51 green:51 blue:255  alpha:1];
    self.routeLineView.strokeColor = [UIColor colorWithRed:204 green:0 blue:0 alpha:1];
    self.routeLineView.lineWidth = 3;

    overlayView = routeLineView;
  }
return overlayView;
} 
```

所以我需要在地图上的点之间画线。行的开头是第一个掉线的引脚，结尾是最后一个掉线的引脚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T11:29:30.557

根据代码，`routeLatitudes`数组中的对象如下所示：

> 索引 0：点 1 的纬度
> 索引 1：点 1 的经度
> 索引 2：点 2 的纬度
> 索引 3：点 2 的经度
> 索引 4：点 3 的纬度
> 索引 5：点 3 的经度
> ...

所以如果`routeLatitudes.count`是 6，它实际上只有 3 个点。

这意味着`malloc`分配了错误的点数，并且`polylineWithPoints`调用还为覆盖指定了错误的点数。

另一个问题是，由于`pointArr`将只包含一半的对象，`routeLatitudes`因此您不能对两个数组使用相同的索引值。

`for`循环索引计数器在`idx`每次迭代时递增 2，因为这就是`routeLatitudes`点的布局方式，但随后使用相同的`idx`值来设置`pointArr`.

所以 for `idx=0`,`pointArr[0]`被设置，然后 for `idx=2`,`pointArr[2]`被设置（而不是`pointArr[1]`），等等。这意味着所有其他位置`pointArr`都未初始化，导致行“走向无穷大”。

因此更正后的代码可能如下所示：

```
int pointCount = [routeLatitudes count] / 2;
MKMapPoint* pointArr = malloc(sizeof(MKMapPoint) * pointCount);

int pointArrIndex = 0;  //it's simpler to keep a separate index for pointArr
for (int idx = 0; idx < [routeLatitudes count]; idx=idx+2)
{
    CLLocationCoordinate2D workingCoordinate;       
    workingCoordinate.latitude=[[routeLatitudes objectAtIndex:idx] doubleValue];
    workingCoordinate.longitude=[[routeLatitudes objectAtIndex:idx+1] doubleValue];  
    MKMapPoint point = MKMapPointForCoordinate(workingCoordinate);
    pointArr[pointArrIndex] = point;
    pointArrIndex++;
}   

// create the polyline based on the array of points. 
routeLine = [MKPolyline polylineWithPoints:pointArr count:pointCount];
[mapView addOverlay:routeLine];
free(pointArr); 
```

另请注意`malloc`，我更正`sizeof(CLLocationCoordinate2D)`为 `sizeof(MKMapPoint)`. 这在技术上并没有引起问题，因为这两个结构恰好是相同的长度，但使用它是正确的，`sizeof(MKMapPoint)`因为这就是数组将包含的内容。

# php - Google Analytics API 让我完全迷失了

> ID：11984555
> 
> 赞同：1
> 
> 时间：2012-08-16T09:45:12.377
> 
> 标签：php, google-analytics

直到最近，我们一直在使用旧的 gapi php 类从我们管理的各种站点中提取 Google Analytics 数据。

简而言之，网站会在晚上下载分析数据并将其存储在本地。直到最近它运行良好，但突然间我们开始收到各种奇怪的错误，比如 CaptchaRequired。

无论如何，我已经阅读了一些内容并得到的印象是我们是时候迁移到新的 Google API 平台了，虽然我尝试按照 HelloAnalyticsAPI 教程进行操作，但我们最初遇到了 403 错误，但现在在我尝试离开它一段时间后并运行我被重定向到谷歌登录的应用程序。

我只是似乎无法理解它。我们需要完全自动化这个过程，所以重定向到谷歌网站登录不会削减它。

任何人都可以帮忙吗？有人见过这些问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:58:53.600

使用 google api 客户端进行 php，很简单
[http://code.google.com/p/google-api-php-client/](http://code.google.com/p/google-api-php-client/)

分析开发指南（V3）：
[https ://developers.google.com/analytics/devguides/config/mgmt/v3/](https://developers.google.com/analytics/devguides/config/mgmt/v3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:09:54.290

如果不确定请求的真实性，Google 会发送验证码响应。这可能是由于来自同一 IP 的多个不同帐户的多次请求、使用 ClientLogin 身份验证机制，甚至是您正在登录的帐户上的弱密码。

为了防止它们，我建议使用 OAuth 2.0 进行身份验证 - 使用它还有其他安全优势。

# ssl-certificate - 更新 pfx 文件证书

> ID：11984559
> 
> 赞同：1
> 
> 时间：2012-08-16T09:45:25.920
> 
> 标签：ssl-certificate, pfx

我已经在用户的应用程序中捆绑了一个 pfx 证书，但是现在看来该证书已过期。

无论如何，我是否可以在不将更新的证书分发给用户的情况下更新我这边（服务器）的证书？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:05:39.707

不，它会严重破坏信任证书的整个想法，因为它应该保持安全。

如果您使用 openssl 验证检查您的证书，请务必添加[-verbose 和 -issuer_check](http://www.openssl.org/docs/apps/verify.html)

请记住，要使证书有效，链中的所有证书（直到根 CA）都必须有效并且在受信任的 CA 存储中，而不是在撤销列表中。

# php - REDIS php扩展连接错误

> ID：11984560
> 
> 赞同：5
> 
> 时间：2012-08-16T09:45:26.437
> 
> 标签：php, redis

当我使用redis PHP扩展时，我得到错误，主机是127.0.0.1，端口是6379。

> Redis::connect(): php_network_getaddresses: getaddrinfo failed: 名称或服务未知。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T15:35:47.340

我在我的本地服务器上偶尔发生了同样的问题，并且尝试了许多修复都没有得到解决。[这篇文章](http://albertech.net/2011/05/fix-php_network_getaddresses-getaddrinfo-failed-name-or-service-not-known/)给了我一个想法，似乎终于解决了这个问题。

基本上，我在本地机器（运行 Ubuntu）上设置了许多虚拟主机，这允许我使用域名访问本地运行的站点，而不是通常的“本地主机/站点名称”方法。结果，我没有分配给“localhost”名称的 IP。

对于您而言，这可能不是问题的根本原因，但这是我解决问题的方法：

1.  查看 redis 配置文件中“redis-host”的值是什么（对我来说，它设置为“localhost”）。
2.  在您的 /etc/hosts 文件中检查是否有分配给该主机名的 IP。（在您的情况下，redis-host 是 127.0.0.1，请检查是否没有分配给该 IP 的其他主机名，例如 phpmyadmin。）

当然，作为健全性检查，请确保您的 redis-server 已启动并正在运行，尝试重新启动 Apache 以防您进行任何配置更改等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-19T09:14:50.727

对于 mac 用户：

打开终端并尝试以下命令：

1.  sudo vi /etc/hosts
    （sudo 以 root 用户身份执行命令，您已为此输入密码）

2.  按'i'进入VI编辑器的输入模式

3.  **在127.0.0.1 redis**末尾添加这一行
***   按 esc 进入命令模式
    *   输入 :wq （保存并退出 vi
    编辑器）**

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-22T06:48:49.403

就我而言，问题很简单。主机名输入错误。

要找出确切的问题，我必须在控制台中执行以下操作：

```
ping <host-name> 
```

或者如果你安装了 redis-cli，你可以从控制台调用它：

```
redis-cli -h <host-name> -p <port-number> -a <auth-pass> 
```

[资源](http://albertech.net/2011/05/fix-php_network_getaddresses-getaddrinfo-failed-name-or-service-not-known/)**

# asp.net-mvc-3 - 如何附加字符串以在 mvc3 中查看？

> ID：11984562
> 
> 赞同：1
> 
> 时间：2012-08-16T09:45:37.233
> 
> 标签：asp.net-mvc-3, stringbuilder

大家好，我有一些值......使用它们我正在我的控制器中构建一个字符串，我想在我的视图页面中显示字符串......

这是我的控制器代码

```
[ChildActionOnly]
public ActionResult History()
{
    //if(Session["DetailsID"]!=null)
    //{
    int id = Convert.ToInt16(Session["BugID"]);
       var History = GetBugHistory(id);
      return PartialView(History);
    //}
    //int id1 = Convert.ToInt16(Session["BugID"]);
    //var History1 = GetBugHistory(id1);
    //return PartialView(History1);

}
/// <summary>
///To the List of Resolutions and Employeenames Based on BugID
/// </summary>
/// <param>Bug Id</param>
/// <returns>BugHistory</returns>       
public List<BugModel> GetBugHistory(int id)
{

    var modelList = new List<BugModel>();
    using (SqlConnection conn = new SqlConnection(ConnectionString))
    {
        conn.Open();
        SqlCommand dCmd = new SqlCommand("History", conn);
        dCmd.CommandType = CommandType.StoredProcedure;
        dCmd.Parameters.Add(new SqlParameter("@BugID", id));
        SqlDataAdapter da = new SqlDataAdapter(dCmd);
        DataSet ds = new DataSet();
        da.Fill(ds);
        StringBuilder sb = new StringBuilder();
        conn.Close();
        for (int i = 0; i <= ds.Tables[0].Rows.Count - 1; i++)
        {
            var model = new BugModel();
            model.FixedBy = ds.Tables[0].Rows[i]["FixedByEmployee"].ToString();
            model.Resolution = ds.Tables[0].Rows[i]["Resolution"].ToString();
            model.AssignedTo = ds.Tables[0].Rows[i]["AssignedEmployee"].ToString();
            model.Status = ds.Tables[0].Rows[i]["Status"].ToString();
            model.ToStatus= ds.Tables[0].Rows[i]["ToStatus"].ToString();                  
            modelList.Add(model);
            sb.Append("'" + model.FixedBy + "'" + "has updated the status from" + "'" + model.ToStatus + "'" + "to" + "'" + model.Status + "'" + "and Assigned to" + "'" + model.AssignedTo + "'");
        }
        return modelList;
    }           
} 
```

我应该如何使用 foreach 循环在我的部分视图页面中显示此字符串

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:59:18.213

阿尼尔，

我建议创建一个部分视图 (_BugModelList.cshtml)，它纯粹处理`BugModel`. 这可能看起来像这样：

```
@model IList<BugModel>

<table>
    <thead>
        <tr>
            <th>Fixed by</th>
            <th>From Status</th>
            <th>To Status</th>
            <th>Assigned to</th>
        </tr>
    </thead>       
    @{
        foreach (var item in Model)
        {
            <tr>
                <td>@item.FixedBy</td>
                <td>@item.ToStatus</td>
                <td>@item.Status</td>
                <td>@item.AssignedTo</td>
            </tr>
        }
    }
</table> 
```

或者，如果您想要根据控制器的单个字符串（显然未经测试）：

```
@model IList<BugModel>

@{
    foreach (var item in Model)
    {
        <p>
            @{ "'"  + item.FixedBy + "'"
                    + " has updated the status from "
                    + "'"  + item.ToStatus + "'"
                    + " to " + "'" + item.Status + "'"
                    + " and Assigned to " + "'" + item.AssignedTo + "'"; }
        </p>
    }
} 
```

然后将根据您当前的操作从您的主视图中调用它。显然，我已将其格式化为，`table`但您可以对其进行重构以适应，逻辑保持不变。

**[编辑]** - 重新阅读您的问题，您可能希望将列表显示为表格，而不是无序列表。见上面的编辑

# php - Node.js 中的通知

> ID：11984564
> 
> 赞同：0
> 
> 时间：2012-08-16T09:45:43.513
> 
> 标签：php, javascript, mysql, node.js

我正在尝试使用 NodeJS 实现通知系统。一切正常：连接服务器、连接数据库、查询数据库。因为我只有几个小时在 NodeJS 上工作，所以我不清楚通知是如何具体发生的。谷歌搜索这个问题实际上并没有带来什么好东西。
当有人发表评论时，评论被插入到数据库中，这应该触发一个事件来通知他的朋友（在朋友表中）他发表了评论吗？任何类型的帮助将不胜感激。
我正在使用带有“mysql”节点模块的 PHP 和 MySQL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:49:34.417

谷歌搜索“node.js 通知”我得到了这个[http://www.gianlucaguarini.com/blog/?p=272](http://www.gianlucaguarini.com/blog/?p=272)或这个[http://gonzalo123.wordpress.com/2011/03/14/real-time-notifications-与-php/](http://gonzalo123.wordpress.com/2011/03/14/real-time-notifications-with-php/)。正如 Amberlamps 建议的那样，它使用 socket.io。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:08:06.470

最后，您将希望您的所有用户（他们的网络浏览器）运行一些 javascript，以打开一个 websocket（或者，检查 Socket.IO）到您的 node.js 服务器。只要它们留在页面上，该连接就会保持打开状态。一旦您想向他们发送通知，node.js 服务器就会通过此连接执行此操作。您的 PHP 脚本可以通过各种方式触发 node.js 服务器，但对 localhost 的 http 请求可能是最简单和最实时的。

# sitecore - 将按钮/下拉列表添加到 sitecore webedit 编辑器？

> ID：11984568
> 
> 赞同：1
> 
> 时间：2012-08-16T09:46:02.737
> 
> 标签：sitecore, page-editor

当您在 sitecore 的页面编辑器中查看页面时，是否可以向 webedit 编辑器添加更多按钮或下拉列表？

如果您查看下图，我想在工具栏中添加一个“H2”按钮。

![在此处输入图像描述](../Images/5a5b20383df509d1409ad02caba87e79.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T14:09:16.050

您需要将其添加到`/sitecore/system/Settings/Html Editor Profiles/Rich Text Default/WebEdit Buttons/`.

并且，要创建一个 h2 按钮，在新项目的 Click 字段中输入以下内容：

```
chrome:field:execute({command:"FormatBlock", userInterface:true, value:'h2'}) 
```

（'h2' 是你想要的[块格式）](http://www.quirksmode.org/dom/execCommand.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:44:34.333

是的，这是可能的。您需要为此修改位于`Core`数据库中的 Html Editor Profile`/sitecore/system/Settings/Html Editor Profiles`

如果您查看`Full`配置文件，您可以在某处找到 H2（和其他标题）的命令。这可以很容易地复制到您当前使用的配置文件中（我猜它是`Minimal`配置文件）。如果您有权访问 web.config，您可能希望在编辑之前创建 Minimal 配置文件的副本并将其配置为`HtmlEditor.DefaultProfile`

# android - 如何在 AOSP 构建中将应用安装到 data/app 文件夹而不是 system/app 文件夹？

> ID：11984572
> 
> 赞同：8
> 
> 时间：2012-08-16T09:46:15.813
> 
> 标签：android, makefile, android-source

我把我的应用程序文件夹放在

```
packages/apps  // inside AOSP source code 
```

现在我的应用程序`Android.mk`在同一个文件夹中有以下内容：

```
LOCAL_PATH:= $(call my-dir)
include $(CLEAR_VARS)

LOCAL_MODULE_TAGS := optional

LOCAL_SRC_FILES := $(call all-java-files-under, src)

LOCAL_PACKAGE_NAME := package_name
LOCAL_CERTIFICATE := platform

include $(BUILD_PACKAGE)

# Use the folloing include to make our test app
include $(call all-makefiles-under,$(LOCAL_PATH)) 
```

现在，当我构建我的 AOSP 项目时，它还会编译我的应用程序并将 APK 文件放入其中：

**出/目标/产品/$MY_PLATFORM/system/app**

但我想把它放进去：

**出/目标/产品/$MY_PLATFORM/数据/应用**

我该怎么做呢？我要更改什么文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T07:58:51.000

我通过改变这个东西得到了解决方案`Android.mk`

```
LOCAL_MODULE_TAGS := tests 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T23:01:10.520

基本上，android AOSP 构建系统不会在 /data 中构建任何内容。/data 分区的想法是它是用户数据，并且它将在出厂时为空（并在设备重置时完全删除）。如果你想在 /data 中安装一些东西，你可以在安装后使用“adb install”或任何其他机制进行安装。

你到底想完成什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-25T03:08:11.857

您可以借助其他一些系统应用程序。复制需要安装的目标应用`/data`程序`/system/usr/share`

```
 device/<your platform> /extras/usr/share/<target app>:system/usr/share/<target app name> \ 
```

在现在使用其他一些系统级应用程序中写入上述规则， `device/platform/<platform specific mk >` 您可以检查您的应用程序是否已安装。如果未安装，请通过提供上述路径的包管理器安装它 `system/usr/share/<target app name>`

# struts2 - struts2 外延

> ID：11984578
> 
> 赞同：0
> 
> 时间：2012-08-16T09:46:29.887
> 
> 标签：struts2

我在我的jsp中使用struts2。

我需要将 jsp 中的标签外部化到属性文件中。

谁能告诉我如何在 struts2.xml 的属性文件中外部化标签名称。

任何例子都会有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:29:45.620

来自官方初学者教程的这个页面解释了如何做到这一点并有例子：

[http://struts.apache.org/2.x/docs/message-resource-files.html](http://struts.apache.org/2.x/docs/message-resource-files.html)

请务必完成本教程的其余部分。这是学习 Struts2 的最佳起点。

# vaadin - 即使禁用，上传组件仍会在单击时打开对话框

> ID：11984579
> 
> 赞同：0
> 
> 时间：2012-08-16T09:46:29.590
> 
> 标签：vaadin

我正在使用 Vaadin 框架开发一个 Web 应用程序。

我正在使用 Vaadin Upload 组件。为方便起见，我们决定在文件已上传到服务器时禁用上传按钮。

问题是该按钮看起来已禁用，但单击时仍会打开文件浏览器对话框，让用户指定无法正确处理的其他文件。

在调试期间，我已经在 Upload progressListener 内部停止，并看到 Upload 对象的*Enabled*参数设置为*false*，即使我尝试单击 GUI 中的禁用按钮，对话框也会打开。

我试过搜索这是否是一个公认的错误，但找不到任何东西。

一些相关代码：

```
 //The first listener triggered when starting an upload, here the 
   // Upload component is set to disabled
    upload.addListener(new Upload.StartedListener() {
                public void uploadStarted(StartedEvent event) {
                    // this method gets called immediately after upload is started

                    upload.setEnabled(false);
    }

    // Listener being triggered a number of times during the upload. 
    // Here is where I debugged, saw that the Upload component was 
    // disabled but found that I still could open the dialogue. 
            upload.addListener(new Upload.ProgressListener() {
                public void updateProgress(long readBytes, long contentLength) {

    }

    // The last listener triggered, here the Upload component is 
    // set to enabled. The button now looks clickable but it behaves 
    // the same way as it does when the Upload component is disabled.
    upload.addListener(new Upload.FinishedListener() {
                public void uploadFinished(FinishedEvent event) {
                    if(uploadOk){
                        fileListItem.getProgressIndicator().stopPolling();
                        fileListItem.removeProgressIndicator();
                        fileListItem.removeAbortButton();
                        submitFilesBt.setEnabled(true);
                        removeFilesBt.setEnabled(true);
                        fileListItem.setFile(counter.getFile());
                        upload.setEnabled(true);                }
                }
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:24:17.013

我从来没有设法解决该组件的问题，但我通过将 Upload 组件放在专用容器中解决了这个问题。当我开始上传时，我从容器中删除了组件，而是插入了一个看起来相同但被禁用的虚拟替换按钮。上传完成后，我删除了虚拟按钮并再次添加了上传按钮。

使用这种方法可以避免这个问题，但如果有人认为这是一个相当粗略的解决方案，我会同意......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T08:26:56.503

这听起来显然是上传组件中的一个错误，您应该考虑在[http://dev.vaadin.com/](http://dev.vaadin.com/)上报告它。

同时，AndroidHustle 建议的解决方法可能是最简单的一种。此外，我建议将此解决方案打包到 CustomComponent 并继续编写应用程序的其余部分，并在修复可用时将实现切换回 Upload。

# c++ - 为什么必须重新编译可执行文件

> ID：11984583
> 
> 赞同：1
> 
> 时间：2012-08-16T09:46:43.110
> 
> 标签：c++, linux, executable

我想知道为什么必须从每台 linux 机器上的源代码重新编译可执行文件（用 c++ 编写），即使机器的软件和硬件相同？

我有一个用 c++ 编写的搜索引擎，每次我想将它移动到新的 linux 机器上以使其工作时，我都必须重新编译它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T09:50:49.667

如果您问为什么在 Linux-X 上编译的可执行文件不能在 Linux-Y 上运行，那么原因可能是动态库 (.so) 丢失或找不到。

编辑：哦，对不起，看起来我没有很好地阅读你的问题。去掉了讽刺。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T09:53:00.377

通常不需要重新编译。许多应用程序都是作为可执行文件分发的，它们运行良好。

当您只是复制可执行文件并在另一台机器上运行它时，您会遇到什么错误？

也许问题出在您复制可执行文件的方式上，它可能会损坏它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T09:50:36.840

重新编译可确保您在计算机上获得最佳性能，因为每次运行配置脚本时都会查找依赖项和设置。这也确保了软件的开放性，因为它的源始终可用并且可以由适当的代理（即我们）修改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T09:58:36.757

情况不一定如此。例如，考虑如何安装 Ubuntu 软件包 - [https://askubuntu.com/questions/162477/how-are-packages-actually-installed-via-apt-get-install](https://askubuntu.com/questions/162477/how-are-packages-actually-installed-via-apt-get-install)

显然，这些不是从目标机器上的源代码编译的，而是作为预构建的二进制文件安装的。话虽如此，在将运行它们的机器上从源代码构建二进制文件通常是一个好主意，因为您将避免潜在的问题，例如在 Linux X 上构建和运行时可能发生的共享库（例如 libc）不兼容在 Linux Y 上。

# asp.net-mvc-3 - 实体框架 4.1 异常

> ID：11984597
> 
> 赞同：0
> 
> 时间：2012-08-16T09:47:35.717
> 
> 标签：asp.net-mvc-3, entity-framework-4.1

这是我的代码：

```
 public void  DeleteFolder(Entities.DocumentFolder folder)
    {
         DeleteFilesFromServer(folder.Id);
        _dbContext.Entry(folder).State = EntityState.Deleted;
        _dbContext.SaveChanges();          
    }

   public void  DeleteFilesFromServer(int id)
   {
       var allDocuments = _dbContext.Document.Where(x => x.FolderId == id).ToList();
       foreach (var filePath in allDocuments.Select(document => HttpContext.Current.Server.MapPath("~/Documents/") + document.DocumentFileName).Where(System.IO.File.Exists))
       {
           System.IO.File.Delete(filePath);
       }
   }

 public class DocumentFolder
    {
      public DocumentFolder()
      {
          Documents=new List<Document>();
      }
      public int Id { get; set; }
      public string FolderName { get; set; }
      public int ParentFolderId { get; set; }
      public List<Document> Documents { get; set; }
    }
  public class Document
  {
      public int Id { get; set; }
      public string DocumentName { get; set; }
      public string DocumentFileName { get; set; }
      public int FolderId { get; set; }
      public virtual DocumentFolder Folder { get; set; }
  } 
```

通过执行删除操作，我得到了以下异常：

> System.InvalidOperationException：操作失败：无法更改关系，因为一个或多个外键属性不可为空。当对关系进行更改时，相关的外键属性将设置为空值。如果外键不支持空值，则必须定义新的关系，必须为外键属性分配另一个非空值，或者必须删除不相关的对象。

如果我删除`DeleteFilesFromServer(int id)`该删除工作的方法。有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:23:10.503

If you want to delete the DocumentFolder, you need to delete the Document objects related to the DocumentFolder because in your model the field Folder is not nullable. This happens only if the dbContext knows that the the Document objects exist, i.e. if you load the documents with the Select method.

# actionscript-3 - 如何动态引用类链接？

> ID：11984598
> 
> 赞同：1
> 
> 时间：2012-08-16T09:47:48.927
> 
> 标签：actionscript-3

我在链接属性中设置了 15 个名为“Sound1”、“Sound2”等的声音。我想在循环中动态引用它们。例如，而不是

```
currentMusic = new Sound2(); 
```

我该怎么做

```
currentMusic = new ("Sound" + i)(); 
```

或者有什么更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:18:18.693

使用与在运行时加载影片剪辑或字体相同的过程。

假设您的库中有声音导出为“sound_0”、“sound_1”、...、“sound_9”等：

```
for(var i:uint = 0; i < 10; i++)
{
    var soundClass:Class = getDefinitionByName("sound_" + i.toString()) as Class;
    var sound:Sound = new soundClass();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T10:20:06.010

将生成的类名存储到变量中，从应用程序域中检索类并实例化新对象。**小心例外！**

```
var soundClassName:String = "Sound" + i;
var soundClass:Class;
var sound:Sound;

try {
    soundClass = getDefinitionByName(soundClassName) as Class;
    sound = new soundClass();
} catch (re:ReferenceError) {
    trace("Class '" + soundClassName + "' not found");
} catch (te:TypeError) {
    trace("Unable to instantiate the sound object");
} 
```

# extjs4.1 - 在 extjs4.1.0 中并排渲染一些项目

> ID：11984602
> 
> 赞同：0
> 
> 时间：2012-08-16T09:48:04.473
> 
> 标签：extjs4.1

我正在使用 extjs4.1.0

我想在表单面板中并排放置一些项目。

我已经尝试过将我的必要项目放在具有列布局的组件中。

有没有其他方法可以并排呈现表单面板中的某些项目

使用组件或容器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:09:05.507

不，Ext.form.Panel 默认使用表单布局。当您指定不同的布局时，您将无法正确显示 fieldLabels。您必须使用容器来使布局仍然具有使用表单布局的 fieldLabels。在这里做你想做的事情是不可能的。

# xslt - 多文档 xslt，带有行为不端的附加值

> ID：11984606
> 
> 赞同：1
> 
> 时间：2012-08-16T09:48:19.167
> 
> 标签：xslt

我正在尝试为另一个人写一些东西，但我被困在样式表的最后一部分。

我们有两个 XML 文档：

测试XML.xml：

```
<rootNode>
  <header>
    <title agg="sum">1</title>
    <records agg="sum">10</records>
    <number agg="min">5</number>
    </header>
</rootNode> 
```

和 TestXMLTwo.xml：

```
<rootNode>
  <header>
    <title agg="sum">2</title>
    <records agg="sum">20</records>
    <number agg="min">15</number>
    </header>
</rootNode> 
```

如果节点的`agg`属性等于“sum”，我们将两个文档节点的值组合起来。我正在使用：

```
<xsl:param name="InputFileOne">[EditedOut]\TestXML.xml</xsl:param>
<xsl:param name="InputFileTwo">[EditedOut]\TestXMLTwo.xml</xsl:param>

<xsl:template match="node()|@*">
  <xsl:call-template name="ConcatFiles"/>
</xsl:template>

<xsl:template name="ConcatFiles">
  <xsl:variable name="tempStoreDocOne" select ="document($InputFileOne)/rootNode/header" />
  <xsl:variable name="tempStoreDocTwo" select ="document($InputFileTwo)/rootNode/header" />

<xsl:element name="rootNode">
  <xsl:element name="header">

    <xsl:for-each select="$tempStoreDocOne/node()">
      <xsl:choose>

        <xsl:when test="./@agg = 'sum'">
          <xsl:variable name="tempElementDocTwo" select ="$tempStoreDocTwo/."/>
          <xsl:element name="{name(.)}">
            <xsl:value-of select=". + $tempElementDocTwo"/>
          </xsl:element>
        </xsl:when>

        <xsl:otherwise>
          <xsl:element name="{name(.)}">
            <xsl:value-of select="."/>
          </xsl:element>
        </xsl:otherwise>

      </xsl:choose>
    </xsl:for-each>

  </xsl:element>
</xsl:element>
</xsl:template> 
```

然而，在这条线上`<xsl:value-of select=". + $tempElementDocTwo"/>`，我只得到 '22016' 的值`<title>`和 22025 的`<records>`. 有人可以告诉我我哪里出错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T10:23:43.467

更改`<xsl:for-each select="$tempStoreDocOne/node()">`为`<xsl:for-each select="$tempStoreDocOne/*">`，然后添加一个存储位置的变量，即

```
<xsl:variable name="pos" select="position()"/> 
```

在里面`for-each`，然后改变

```
 <xsl:variable name="tempElementDocTwo" select ="$tempStoreDocTwo/."/> 
```

到

```
 <xsl:variable name="tempElementDocTwo" select ="$tempStoreDocTwo/*[$pos]"/> 
```

当前，您正在访问第二个文档中完整元素的字符串值，`header`这是其后代节点的串联，而您希望访问与第一个文档中位置相同的子元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T12:36:28.053

**这是一个更简单和更短的解决方案**（没有明确的条件）：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:param name="pDoc2">
    <rootNode>
        <header>
            <title agg="sum">2</title>
            <records agg="sum">20</records>
            <number agg="min">15</number>
        </header>
    </rootNode>
 </xsl:param>

 <xsl:variable name="vDoc2" select="document('')/*/xsl:param"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="header/*[@agg='sum']">
  <title>
   <xsl:value-of select=
    ". + $vDoc2/*/header/*[name()=name(current()) and @agg='sum']"/>
  </title>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于第一个 XML 文档时**（第二个内联在转换中只是为了方便）：

```
<rootNode>
    <header>
        <title agg="sum">1</title>
        <records agg="sum">10</records>
        <number agg="min">5</number>
    </header>
</rootNode> 
```

**产生了想要的正确结果**：

```
<rootNode>
   <header>
      <title>3</title>
      <title>30</title>
      <number agg="min">5</number>
   </header>
</rootNode> 
```

# java - 使用 Bouncycastle 生成数字证书

> ID：11984610
> 
> 赞同：1
> 
> 时间：2012-08-16T09:48:30.923
> 
> 标签：java, cryptography, ssl-certificate, x509certificate, bouncycastle

经过一些研究，我确定为了在 java 中以编程方式生成和签署证书，我需要 bouncycastle 库。

不幸的是，图书馆似乎在最近的某个时候经历了一次大修。他们的很多类现在都被弃用了，我能找到的所有简单易懂的教程和代码示例都被弃用了。

我对密码学相当陌生。仅凭基本知识和对我实际要完成的工作的模糊概念，我摸索过过时的教程和假定知识的 Bouncycastle 文档，这是一次艰苦的经历。

是否有任何易于理解的最新 Bouncycastle 教程或我应该查看的替代库？还是我应该咬紧牙关，忽略弃用警告并希望最好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T23:27:44.647

有点难找，但是[bouncycastle wiki](http://www.bouncycastle.org/wiki/dashboard.action)有一些简短但甜蜜的文档。特别是[此页面上](http://www.bouncycastle.org/wiki/display/JA1/BC+Version+2+APIs)的第一个示例，标题为**A Simple Operator Example**应该可以帮助您入门。

另一个完美的选择是只使用库的 1.46 版本，这是使用旧 api 的最后一个版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:18:55.640

您真的需要直接使用 Bouncycastle 还是不能将其用作加密服务提供者？所以你不需要使用 BCs API。请参阅[JCA 参考指南](http://docs.oracle.com/javase/6/docs/technotes/guides/security/crypto/CryptoSpec.html)。我使用这些行进行一些加密：

```
static {
  Security.addProvider(new BouncyCastleProvider());
}

public void someMethod() {
  KeyFactory fact = KeyFactory.getInstance("RSA", "BC");
  Key key = fact.generatePublic(PUB_KEY_SPEC);
  // do stuff
} 
```

您可能会仔细查看[`CertificateFactory`](http://docs.oracle.com/javase/7/docs/api/java/security/cert/CertificateFactory.html).

# linux - Bash，按值引用数组？

> ID：11984612
> 
> 赞同：3
> 
> 时间：2012-08-16T09:48:46.963
> 
> 标签：linux, bash, shell, unix

有什么方法可以通过值引用变量来访问它吗？

```
BAR=("hello", "world")

function foo() {

    DO SOME MAGIC WITH $1

    // Output the value of the array $BAR
}

foo "BAR" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T10:04:14.337

也许您正在寻找的是间接扩展。来自`man bash`：

> 如果参数的第一个字符是感叹号（！），则引入了变量间接级别。Bash 使用由其余参数形成的变量的值作为变量的名称；然后扩展此变量，并将该值用于替换的其余部分，而不是参数本身的值。这称为间接扩展。例外情况是下面描述的 ${!prefix*} 和 ${!name[@]} 的扩展。为了引入间接性，感叹号必须紧跟在左大括号后面。

相关文档：[Shell 参数扩展（Bash 手册）](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)和 [评估间接/引用变量（BashFAQ）](http://mywiki.wooledge.org/BashFAQ/006#Evaluating_indirect.2BAC8-reference_variables)。

这是一个例子。

```
$ MYVAR="hello world"
$ VARNAME="MYVAR"
$ echo ${!VARNAME}
hello world 
```

请注意，数组的间接扩展有点麻烦（因为`${!name[@]}`意味着其他东西。请参阅上面的链接文档）：

```
$ BAR=("hello" "world")
$ v="BAR[@]"
$ echo ${!v}
hello world

$ v="BAR[0]"
$ echo ${!v}
hello
$ v="BAR[1]"
$ echo ${!v}
world 
```

把这个放在你的问题的背景下：

```
BAR=("hello" "world")

function foo() {
    ARR="${1}[@]"
    echo ${!ARR}
}

foo "BAR"  # prints out "hello world" 
```

### 注意事项：

1.  数组语法的间接扩展在旧版本的 bash（pre v3）中不起作用。请参阅[BashFAQ 文章](http://mywiki.wooledge.org/BashFAQ/006#Evaluating_indirect.2BAC8-reference_variables)。

2.  看来您不能使用它来检索数组大小。`ARR="#${1}[@]"`不管用。但是，如果数组不是太大，您可以通过制作数组的副本来解决此问题。例如：

    ```
    function foo() {
        ORI_ARRNAME="${1}[@]"
        local -a ARR=(${!ORI_ARRNAME})  # make a local copy of the array

        # you can now use $ARR as the array
        echo ${#ARR[@]}  # get size
        echo ${ARR[1]}   # print 2nd element
    } 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T10:10:37.847

```
BAR=("hello", "world")

function foo() {
  eval echo "\${$1[@]}"
}
foo "BAR" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T10:00:16.397

您可以将数组放入与其名称匹配的字典中。然后你可以查找这个字典来找到你的数组并显示它的内容。

# json - 想设计一个 REST API 但我有太多参数要发送，可以用一个 JSON 替换它们吗？

> ID：11984614
> 
> 赞同：0
> 
> 时间：2012-08-16T09:49:02.100
> 
> 标签：json, api, rest

我正在设计一个 REST API 我的资源之一就是要从用户端获取一些基本数据。

这里有两点我需要提到：

1.  所有用户的信息都需要通过一个 http 请求发送到服务器端
2.  用户的信息大约有 30 个不同的字段。

所以我认为在服务器端有一个长长的参数列表并不是那么好，我想用一个接受 JSON 的参数替换这部分。

你认为这样做是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:13:58.957

是的。您需要将方法更改为 POST 而不是 GET，并在请求正文中发送 JSON 格式的数据。

使用 C# 语法的示例：

假设您有一个返回名为 ObjectList 的对象的方法，并且为了生成列表，您的构造函数需要一个 ObjectListRequest 对象 -

```
public ObjectList GetObjectList(ObjectListRequest request)
{
    return new ObjectList(request)
} 
```

您的 ObjectListRequest 类可能包含请求将使用的各种不同参数 -

```
public class ObjectListRequest
{
    public string SearchText { get; set; }
    public string CreatedBy { get; set; }
    public int SequenceStartRange { get; set; }
    public int SequenceEndRange { get; set; }
    public bool HasMetaData { get; set; }
} 
```

现在要在正文中使用带有 JSON 的 POST 调用此方法，您将发送以下内容

```
Method:   POST
Url:      http://your.service.com/GetObjectList
Headers:  
   Content-Type: application/json

Body:
   {
      "request":{
          "SearchText":"test text",
          "CreatedBy":"myusername",
          "SequenceStartRange":0,
          "SequenceEndRange":15,
          "HasMetaData":"true"
      }
   } 
```

这是一个特定示例，假设您使用的是 C# 并内置了来自 microsoft 的序列化库，但如果没有，您仍然可以使用相同的基本思想来做您想做的事情。

# backbone.js - 如何将集合显示到模板？

> ID：11984616
> 
> 赞同：0
> 
> 时间：2012-08-16T09:49:14.217
> 
> 标签：backbone.js

我一直在尝试将我收集的数据显示到模板中。在我的休息控制台上，我可以看到集合已填充；但我无法在我的应用程序中做到这一点。代码如下： 在视图中，渲染是这样的：

```
 render : function() {
                var template = _.template(tpl,{
                       CollectionForTemplate: this.Collection.toJSON(),
                this.el.html(template);

                }, 
```

看来，调用fetch的函数如下：

```
 loadTariffGrids: function(){
                       //fetch done here
                          if (Collection.length > 0) {
                                _.each(Collection, function(Model) {
                                       JSON.stringify(Model);
                           alert(JSON.stringify(Model));
                                }, this);
                          };
                          this.render;
                       }});

             }, 
```

最后，模板是：

```
 <span>
                       <%  _.each(CollectionForTemplate, function(model) { %>
                       </span>      
                       <td><%= model.cost %></td>

                        <%     }); %> 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:29:51.130

在您的渲染中，只需使用：

```
CollectionForTemplate: this.Collection; 
```

修改视图如下：

```
var self = this;
//fetch done here
if (Collection.length > 0) {
                            _.each(Collection, function(Model) {
                                   JSON.stringify(Model);
                            }, this);
};
self.Collection = Collection;
self.render; 
```

我认为您传递给模板的集合没有被实例化。所以我在控制传递给 fetch 函数之前使用 self 来存储引用。我知道我的解释不好；我希望有经验的人为您提供更好的解释。希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:39:40.703

好的@Amateur让我们尝试正确解决您的需求。

**注意**：所有代码都写得*很好*，不要指望它开箱即用，以它为灵感。

首先，在模板中使用*编程逻辑*不是一个好主意，这只是一个设计决定，我不想在这里看起来很学术，但我认为如果你对此过于灵活，你可以完成一个非常困难的到维护代码。

所以，这个想法是制造数据，这样模板就不必做出任何决定/计算。如果你需要一个*循环*进入你的模板，让我们使用子模板。

我从您的代码示例中了解到，您有一个这样的集合：

```
[
  {
    "id": "1",
    "cost": 100,
    "name": "Amateur"
  },

  {
    "id": "2",
    "cost": 200,
    "name": "Other name"
  },

  {
    "id": "3",
    "cost": 300,
    "name": "Other name again"
  },
] 
```

你想渲染这样的东西：

```
<table>
  <tr>
    <td>Name</td>
    <td>Cost</td>
  </tr>

  <tr>
    <td>Amateur</td>
    <td>100</td>
  </tr>

  <tr>
    <td>Other name</td>
    <td>200</td>
  </tr>

  <tr>
    <td>Other name again</td>
    <td>300</td>
  </tr>
</table> 
```

正如我在您发送的另一个（重复的）问题中所读到的，您还希望只呈现`cost`，`name == "Amateur"`如下所示：

```
<table>
  <tr>
    <td>Name</td>
    <td>Cost</td>
  </tr>

  <tr>
    <td>Amateur</td>
    <td>100</td>
  </tr>

  <tr>
    <td>Other name</td>
    <td>--</td>
  </tr>

  <tr>
    <td>Other name again</td>
    <td>--</td>
  </tr>
</table> 
```

### 迭代

对于迭代，我们将使用子模板来解决它。

主模板：

```
<script type="text/template" id="template-elements">
  <table>
    <tr>
      <td>Name</td>
      <td>Cost</td>
    </tr>
  </table>
</script> 
```

子模板

```
<script type="text/template" id="template-element">
  <tr>
    <td><%= name %></td>
    <td><%= cost %></td>
  </tr>
</script> 
```

为了使它更*优雅*，我们也使用 a `View`for the`Collection`和 a `SubView`for each `Model`。

```
var MyModel = Backbone.Model.extend();
var MyCollection = Backbone.Collection.extend({
  model: MyModel
});

var MyModelView = Backbone.View.extend({
  template: _.template( $("#template-element").html() ),

  render: function(){
    this.$el.html( this.template( this.model.toJSON() ) );

    return this;
  }
});

var MyCollectionView = Backbone.View.extend({
  template: _.template( $("#template-elements").html() ),

  render: function(){
    this.$el.html( this.template() );

    this.collection.each( function( model ){
      var view = new MyModelView({ model: model });
      this.$el.find( "table" ).append( view.render().el );
    });

    return this;
  }
}); 
```

### 装饰器

我们已经解决了迭代问题，现在我们将实现隐藏`Model.cost`when的逻辑`Model.name != "Amateur"`。

`Model`让我们实现一个方法，该方法返回已经为模板准备好的属性：

```
var MyModel = Backbone.Model.extend({
  toJSONCooked: function(){
    var json = this.toJSON();

    if( this.get( "name" ) != "Amateur" ) {
      json.cost = "--";
    }

    return json;
  }
}); 
```

我们可以使用这种方法来提供*模板*：

```
var MyModelView = Backbone.View.extend({
  template: _.template( $("#template-element").html() ),

  render: function(){
    this.$el.html( this.template( this.model.toJSONCooked() ) );

    return this;
  }
}); 
```

# python - 为什么 Python 返回负时区值？

> ID：11984618
> 
> 赞同：7
> 
> 时间：2012-08-16T09:49:18.753
> 
> 标签：python, time, timezone

对于[time.timezone](http://docs.python.org/py3k/library/time.html?highlight=time.timezone#time.timezone)，Python 文档说：

> 本地（非 DST）时区的偏移量，以 UTC 以西的秒数为单位（在西欧大部分地区为负，在美国为正，在英国为零）。

有人知道为什么它对西欧大部分地区返回负值吗？这些国家处于正抵消，而不是负抵消。

示例：布鲁塞尔位于 UTC+1 时区...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T09:58:27.147

这是一个 Unix 人工制品。尽管时区的标准数字描述是以 UTC 以东的小时和分钟为单位（布鲁塞尔为 UTC+1，纽约为 UTC-5 等），但 Unix以 UTC*以西*`timezone`的秒数为单位。

 *来自[http://pubs.opengroup.org/onlinepubs/7908799/xsh/tzset.html](http://pubs.opengroup.org/onlinepubs/7908799/xsh/tzset.html)：

> 外部变量`timezone`设置为协调世界时 (UTC) 和当地标准时间之间的差异（以秒为单位），例如：

```
TZ  timezone
EST 5*60*60
GMT 0*60*60
JST -9*60*60
MET -1*60*60
MST 7*60*60
PST 8*60*60 
```

至于为什么 Unix 会倒退，我猜这是一个历史性的意外，可能是因为 Unix 最初是在美国开发的。*

# .net - 请帮助我 [“Windows 找不到“C:\Users\ ...”]

> ID：11984621
> 
> 赞同：-2
> 
> 时间：2012-08-16T09:49:28.757
> 
> 标签：.net, cmd

我在 VB.NET 中开发了一个应用程序...

```
 Dim DIAGTOOL_loc As String = Environment.CurrentDirectory & "\folder\file.exe"
 Dim shellexec As New System.Text.StringBuilder
 shellexec.AppendLine("@echo off")
 shellexec.AppendLine("cls()")
 shellexec.AppendLine(": begin()")
 shellexec.AppendLine("cls()")  
 shellexec.AppendLine("START " & DIAGTOOL_loc.ToString)
 shellexec.AppendLine("pause")
 IO.File.WriteAllText("tester.bat", shellexec.ToString())

 System.Diagnostics.Process.Start("tester.bat") 
```

现在，当命令提示符打开时，它应该执行 file.exe (DIAGTOOL_loc)，但是当 CMD 加载时，它说“Windows 找不到“C:\Users\ ...”

但为什么？怎么了？当我键入 Process.start(DIAGTOOL_loc) 时，在 DIAGTOOL_loc 变量中注册的路径有效，因此，该文件存在......为什么 cmd 找不到它？

这个命令：

```
shellexec.AppendLine("START " & DIAGTOOL_loc.ToString) 
```

应该打开file.exe ...但它不起作用...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:54:09.830

尝试这个：

```
shellexec.AppendLine(String.Format("START """{0}""" , DIAGTOOL_loc)) 
```

还修复您的批处理命令：

```
 shellexec.AppendLine("cls")   
 shellexec.AppendLine(":begin")   
 shellexec.AppendLine("cls") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T09:54:31.513

在您生成的文件`tester.bat`中，您将看到如下所示的一行：

```
START c:\users\some folders\folder\file.exe 
```

正如你所看到的，路径没有被引用，所以如果路径包含空格（我怀疑你的），这将失败。

请注意，您的代码也可以更好地编写 - 使用[System.IO.Path.Combine](http://msdn.microsoft.com/en-us/library/system.io.path.combine.aspx)组合路径的各个部分：

```
 Dim DIAGTOOL_loc As String = _
     """ + Path.Combine(Environment.CurrentDirectory, "\folder\file.exe") + """ 
```

# javascript - 如果元素 hasClass 然后更改背景文件

> ID：11984626
> 
> 赞同：0
> 
> 时间：2012-08-16T09:49:49.037
> 
> 标签：javascript, jquery

嗨，我需要编写 if 语句来检查 span 是否具有类“nie”，如果是，它应该更改背景文件，但我的语句设置每个位置的第一个 bg 文件“bg-nie.png”，有什么问题？

jQuery代码

```
if ($(".rzuty span.mieszkanie").hasClass("nie")) {
        $(".rzuty span.mieszkanie").css("background", "url(img/rzuty/mieszkania/bg-nie.png) repeat");
    } else {
        $(".rzuty span.mieszkanie").css("background", "url(img/rzuty/mieszkania/bg-tak.png) repeat");
    } 
```

HTML

```
<div id="rzuty07p" class="rzuty">
    <span id="c_07_226" class="mieszkanie" title=""></span>
    <span id="c_07_228" class="mieszkanie" title=""></span>
    <span id="c_07_227a" class="mieszkanie" title=""></span>
    <span id="c_07_227b" class="mieszkanie" title=""></span>
    <span id="c_07_229" class="mieszkanie nie" title=""></span>
    <span id="c_07_005" class="mieszkanie" title=""></span>
    <span id="c_07_006" class="mieszkanie" title=""></span>
    <span id="c_07_008" class="mieszkanie" title=""></span>
    <span id="c_07_007a" class="mieszkanie nie" title=""></span>
    <span id="c_07_007b" class="mieszkanie nie" title=""></span>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T09:51:44.357

这可以简化为不需要 if 语句。只需进一步过滤您的选择：

```
var $rzutyspan = $(".rzuty span.mieszkanie");
$rzutyspan.filter(".nie").css("background", "url(img/rzuty/mieszkania/bg-nie.png) repeat");
$rzutyspan.not(".nie").css("background", "url(img/rzuty/mieszkania/bg-tak.png) repeat"); 
```

见演示：http: [//jsfiddle.net/4A4W7/](http://jsfiddle.net/4A4W7/)

* * *

或者，这可以使用纯 CSS 来实现：

```
.rzuty span.mieszkanie
{
   background: url(img/rzuty/mieszkania/bg-tak.png) repeat;
}
.rzuty span.mieszkanie.nie
{
   background: url(img/rzuty/mieszkania/bg-nie.png) repeat;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T09:52:47.603

好吧，您正在使用一个通用类`.mieszkanie`来检查和操作所有匹配的集合。分别检查和操作：

```
$(".rzuty span.mieszkanie").each(function(k,v) {
    if ($(this).hasClass("nie")) {
        $(this).css("background", "url(img/rzuty/mieszkania/bg-nie.png) repeat");
    } else {
        $(this).css("background", "url(img/rzuty/mieszkania/bg-tak.png) repeat");
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T09:56:32.607

这是一种方法：http: [//jsfiddle.net/xoreznik/kC5L2/](http://jsfiddle.net/xoreznik/kC5L2/)

您在选择器上使用 if 语句，在这种情况下将返回多个对象。在随附的小提琴中，您可以看到如何定位任何具有/不具有目标类的元素并将 css 应用于它。

# android - 安卓轮播视图

> ID：11984628
> 
> 赞同：0
> 
> 时间：2012-08-16T09:49:51.723
> 
> 标签：android, android-layout

我只是导出一个包以在 xml 文件中为我的项目制作轮播：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ListView 
        android:id="@+android:id/list1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"></ListView>

   <LinearLayout
        android:layout_weight="1"
        android:padding="5dip"
        android:gravity="top"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        >
        <com.me.controls.Carousel
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" 
                android:id="@+id/carousel"  
                pj:UseReflection="true"
                pj:Items="@array/entries" 
                pj:SelectedItem="0"
                android:animationDuration="200"
            />  
</LinearLayout>             
</LinearLayout> 
```

运行时给出错误：错误解析 XML：未绑定前缀。但我不知道原因请任何人帮忙？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T09:59:59.907

//你为listview创建的id是错误的

```
android:id="@+android:id/list1" 
```

试试下面这个

```
android:id="@android:id/list" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T10:01:09.703

您需要在此处定义名称空间以使用自定义视图的属性。

看看这个[问题](https://stackoverflow.com/questions/1453291/android-custom-widget-styles-how-to-put-them-into-a-namespace)。

# iphone - 如何在 iphone 中删除 uipangesture 识别器

> ID：11984629
> 
> 赞同：2
> 
> 时间：2012-08-16T09:49:55.107
> 
> 标签：iphone, ios, ipad

我是 iOS 开发的新手。我不知道如何在 iPhone 中删除 uipangesture 识别器。如果有人知道请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:54:22.290

该类`UIView`有一个名为 的实例方法`-removeGestureRecognizer:`，它接受一个`UIGestureRecognizer`作为参数。因此，例如，如果您有一个`UIImageView`(`imgView`变量) 和一个`UIPanGestureRecognizer`( `panRecognizer`)，您可以：

```
[imgView removeGestureRecognizer:panRecognizer]; 
```

# php - 是否可以使用 FPDF 创建垂直柱形图

> ID：11984630
> 
> 赞同：2
> 
> 时间：2012-08-16T09:50:16.260
> 
> 标签：php, pdf, fpdf

我想知道是否可以在 FPDF 中创建垂直柱形图，如下图所示：

![在此处输入图像描述](../Images/bfa3144e3d9c88256b00f9b96ad99a45.png)

事实上，我想显示一个单独的垂直条，分成子部分来代表不同类别的不同百分比。

是否可以使用 FPDF，如果可能的话，请给我一些提示，如何在使用 FPDF 创建的 pdf 文件中绘制它。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T02:50:40.650

作为图像插入

```
// Insert a chart in the top-left corner at 300 dpi
$pdf->Image('my-vertical-column-chart.php',10,10,-300);
// Insert a chart as dynamic image from a URL
$pdf->Image('http://www.myhost.com/mysite/my-vertical-column-chart.php?chartparam=value',60,30,90,0,'PNG'); 
```

文件`my-vertical-column-chart.php`可能是任何类型的条形图图像生成器，例如：

*   [https://docs.google.com/spreadsheet/oimg?key=0AlYEM-11PerqdDltWXllSGJ4QzVra2ZTeGdTeXFHWEE&oid=3&zx=3y0dpvwbqv97](https://docs.google.com/spreadsheet/oimg?key=0AlYEM-11PerqdDltWXllSGJ4QzVra2ZTeGdTeXFHWEE&oid=3&zx=3y0dpvwbqv97) ![](../Images/96af7e68c67dceab8c81ed61333d08e9.png)

我在 Google Drive 中完成并作为图像共享。这是完成工作的最快方式；

*   [http://graphpite.sourceforge.net/docs/](http://graphpite.sourceforge.net/docs/)
*   [http://www.fusioncharts.com/products/suite/?gclid=COanmpfQ7bECFQReTAod8yUA-w](http://www.fusioncharts.com/products/suite/?gclid=COanmpfQ7bECFQReTAod8yUA-w)
*   [http://phpchart.net/](http://phpchart.net/)
*   [http://pchart.sourceforge.net/](http://pchart.sourceforge.net/)
*   [https://developers.google.com/chart/](https://developers.google.com/chart/)
*   等等，甚至是你个人的 php GD 数据表示，如果你有足够的平面设计天赋；）

# java - 如何重复使用或确保一次只存在一个 JasperViewer？

> ID：11984631
> 
> 赞同：2
> 
> 时间：2012-08-16T09:50:17.320
> 
> 标签：java, jasper-reports

我正在创建一个 java 桌面应用程序。在应用程序中，我使用[动态报告](http://sourceforge.net/projects/dynamicreport/)生成报告，并根据报告将生成的某些参数。用户生成第一个报告，然后将其显示在 jasper 查看器中。用户最小化 jasper 查看器并生成下一个报告。然后在新的 jasper 查看器中查看。

因此，每次用户生成报告时，都会创建一个新的 jasper 查看器。如何重复使用或确保一次只存在一个 JasperViewer？

```
JasperPrint print=report.toJasperPrint();
JasperViewer.viewReport(print, false); 
```

之后，我为 jasperviewer 创建了对象。

```
JasperViewer jv;
 JasperPrint print;
public void action()
{
  button.addActionListener(new ActionListener()
                {
                       @Override
                       public void actionPerformed(ActionEvent e) {
                          try
                          {
                             report.addColumn(...);
                               ...
                               ...
                              print=report.toJasperPrint();
                           jv=new JasperViewer(print,false);
                           jv.setVisible(true);
                          }
                        });
                 }
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:22:22.483

刚开始，您的示例代码不会编译。正确格式化后，您会看到右括号和分号很快就会出现。它应该看起来像：

```
JasperViewer jv;
JasperPrint print;
public void action() {
  button.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
      try {
        report.addColumn(...);
        ...
        ...
        print=report.toJasperPrint();
        jv=new JasperViewer(print,false);
        jv.setVisible(true);
      }
    }
  });
} 
```

现在的问题。`JasperViewer`扩展`JFrame`，因此任何以编程方式关闭它的技巧也应该适用于`JasperViewer`. 由于您正在存储对 的引用，因此`JasperViewer`您可以检查它是否已经初始化。如果它向它发送一个窗口事件以关闭它。

```
if (jv != null && jv.isVisible()) {
    WindowEvent wev = new WindowEvent(jv, WindowEvent.WINDOW_CLOSING);
    Toolkit.getDefaultToolkit().getSystemEventQueue().postEvent(wev);
} 
```

# javascript - jquery帮助选择

> ID：11984634
> 
> 赞同：0
> 
> 时间：2012-08-16T09:50:26.587
> 
> 标签：javascript, jquery, html, web

我有这段无法修改的代码，我想添加一个选择器来选择（单击时）它下面的所有元素，直到下一次出现主元素。问题是它们没有嵌套，只是一个在另一个之下。

```
<div class="project name">..</div>
<div data-project-id="1987" class="sidebar_project">...</div>
<div data-project-id="3087" class="sidebar_project">...</div>
<div data-project-id="8903" class="sidebar_project">...</div>
<div data-project-id="223570" class="sidebar_project">...</div> 
<div class="project name">..</div>
<div data-project-id="1846" class="sidebar_project">...</div>
<div data-project-id="0935" class="sidebar_project">...</div>
<div data-project-id="84735" class="sidebar_project">...</div> 
<div class="project name">..</div>
<div data-project-id="11135" class="sidebar_project">...</div> 
```

我可以轻松选择所有 sidebar_projects 并隐藏它们，但我希望它能够制作一个按钮，单击时隐藏/显示从它的项目名称 div 到下一个项目名称 div 的所有 sidebar_projects。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T09:58:22.073

试试这个：

```
$('.project.name').on('click', function(e){
    $(this).nextUntil('.project.name', '.sidebar_project').toggle();
}); 
```

我没有对此进行测试，但我认为这对您来说会很好。

更多关于`nextUntil()`看[这里](http://api.jquery.com/nextUntil/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:00:39.410

也许有点像这样：

```
$('div:not(.sidebar_project)').click(function() {
    $(this).nextUntil(':not(.sidebar_project)').toggle();
}); 
```

演示：http: [//jsfiddle.net/nnnnnn/6gMnr/2/](http://jsfiddle.net/nnnnnn/6gMnr/2/)

这假设我上面的评论是正确的，即标题元素没有“项目”和“名称”类，但实际上它们具有不同项目的名称的不同类，因此有必要在他们*没有*“sidebar_project”类的基础。

显然，这个问题是您可能在页面上有其他 div，所以我希望您的问题中显示的 div 位于某个包含对象中，以便您可以这样做：

```
var $container = $("selector for container here");
$container.find('div:not(.sidebar_project)').click(function() {
    $(this).nextUntil(':not(.sidebar_project)').toggle();
}); 
```

# sql - 如何决定何时在表列上使用索引

> ID：11984636
> 
> 赞同：25
> 
> 时间：2012-08-16T09:50:26.593
> 
> 标签：sql, sql-server-2008, sql-server-2005, indexing, firebird2.5

我什么时候应该在表上使用索引？

1.  从多少行索引才有意义？
2.  如果我有具有恒定行的表，只是编辑了列（不在“where”子句中），即使表只有大约 15 行，索引也有意义？编辑：在这种情况下，非索引选择/读取是否比索引读取更有效？

编辑：现在我正在使用 firebird 2.5，但大多数时候我使用的是 SQL Server 2005/2008。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-08-16T10:39:49.933

一般来说，我的索引策略是这样的（我现在只使用 SQL Server - 根据需要适应您自己的数据库系统）：

*   选择一个**好的**集群键 - 不是 GUID，不是 a`VARCHAR(250)`或其他东西 - 一个**好的**集群键是*窄的、唯一的、稳定的、不断增加的*- 像 a 这样的东西`INT IDENTITY`是完美的。使它成为您的聚集主键-> 为您提供表上的第一个索引

*   对于用作另一个表的外键的任何列 - 添加索引。它可以是单列索引 - 也可以是复合索引 - 最适合您的情况。重要的是外键列是该索引中的**第一**列（如果您使用的是复合索引） - 否则，`JOIN`您的系统将无法使用 's 或检查引用完整性的好处

现在就是这样。

然后：运行您的系统 - 观察和测量 - 建立基线。应用程序是否足够快？如果是 -> 你已经完成了 - 回家享受你的业余时间。

如果不是：然后开始收集数据和指示，说明应用程序速度不够快的原因。查看诸如 SQL Server 中的 DMV 之类的东西，它们告诉您性能最差的查询，或者*缺少索引 DMV*。分析那些。看看你可以改进什么。一次又一次地添加**一个索引：观察、测量、与您的基线进行比较。**

如果您有改进 -> 保留该索引，并且此测量是您的新基准。冲洗并重复，直到您（和您的用户）对应用程序的性能感到满意（*然后*回家享受您的休息时间）。

SQL Server 中的过度索引可能比没有任何索引**更糟糕。**不要从太多的索引开始！仅建立**良好的**聚集 PK 和外键非聚集索引 - 仅此而已 - 然后观察、测量、优化和重复该循环。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-16T10:02:08.080

这是一个非常复杂的讨论，您必须牢记几件事。主要是您不应该根据表上的行数来考虑索引，而是根据您对其运行的查询来考虑。索引只会帮助选择查询，同时它会稍微降低插入、删除和更新的性能，因为除了更改表上的行之外，您还必须更改索引。

您似乎对这件事很陌生，所以我建议您查看您的执行计划并尝试消除所有“扫描”操作，因为它们几乎读取所有表甚至所有索引。你应该总是有寻找，但你应该平衡它与你表上的索引数量。

如果您使用的是 SQL Server，则可以使用 SQL Server profiler 运行跟踪以帮助您

编辑：

> 在这种情况下，非索引选择/读取是否比索引读取更有效？

是的，但是如果发生这种情况，引擎将足够聪明，不会使用索引

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T11:12:50.257

索引适用于从表中选择一小部分行。按主键值查询是对索引的最佳利用。最糟糕的情况是通过索引访问表中的所有行，因为它必须读取索引页**和**引用的数据页。另一个例子是结果集的内存排序可能比通过排序列上的索引对结果集进行排序更快。永远不要忘记，虽然索引可以提高查询性能，但索引会降低写入性能。

有些人提到了建立基线，使用某种跟踪实用程序来衡量性能等。如果您对既定的性能感到满意，请继续。如果没有，分析执行计划，物理数据模型（可用索引），重新计算统计数据，看看是否有助于优化器选择更好的执行计划。确保 DBMS 可以（被允许）利用可用的 RAM。尽量减少磁盘 I/O 等等。

对于 Firebird 2.5，新添加的 Firebird Trace API 是天赐之物。现在，您终于可以通过性能计数器（执行计划、执行时间、I/O 统计...）获得对数据库执行的近乎实时的跟踪。[Upscene Productions](http://www.upscene.com)的第三方产品[FB TraceManager](http://www.upscene.com/go/?go=fbtm)使 Trace API 的使用变得愉快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T12:14:49.693

关于您问题的第二部分，如果一个表只有 15 行，那么无论您有多少索引，很可能总是会扫描该表，因为它太小了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-02T19:22:18.120

我使用此查询来了解哪些表需要索引：

```
-- Missing Indexes for current database by Index Advantage  (Query 57) (Missing Indexes)
SELECT DISTINCT CONVERT(decimal(18,2), user_seeks * avg_total_user_cost * (avg_user_impact * 0.01)) AS [index_advantage], 
migs.last_user_seek, mid.[statement] AS [Database.Schema.Table],
mid.equality_columns, mid.inequality_columns, mid.included_columns,
migs.unique_compiles, migs.user_seeks, migs.avg_total_user_cost, migs.avg_user_impact,
OBJECT_NAME(mid.[object_id]) AS [Table Name], p.rows AS [Table Rows]
FROM sys.dm_db_missing_index_group_stats AS migs WITH (NOLOCK)
INNER JOIN sys.dm_db_missing_index_groups AS mig WITH (NOLOCK)
ON migs.group_handle = mig.index_group_handle
INNER JOIN sys.dm_db_missing_index_details AS mid WITH (NOLOCK)
ON mig.index_handle = mid.index_handle
INNER JOIN sys.partitions AS p WITH (NOLOCK)
ON p.[object_id] = mid.[object_id]
WHERE mid.database_id = DB_ID() 
ORDER BY index_advantage DESC OPTION (RECOMPILE); 
```

请注意，这只会给您一个北方，您仍然需要考虑上面已经回答的内容。

# c# - 一旦我们通过开始按钮控件启动新线程并在线程挂起时挂起弹出窗口窗体，如何清除datagridview

> ID：11984638
> 
> 赞同：-2
> 
> 时间：2012-08-16T09:50:30.583
> 
> 标签：c#, winforms

1.  单击取消按钮后，如何清除数据网格视图。它将从启动开始该过程，但在启动新线程之前，我需要每次清除数据网格视图。

2.  `th.Suspend(),th.Resume(),th.Abort() // this is obsolete.` 这已被弃用。我收到了这些警告。但我使用的代码对我来说仍然可以正常工作。我以前从未在线程上工作过。

当我使用`Reset(),set()`方法时它不起作用。可能我不知道以正确的方式使用它们。有什么建议可以正确使用吗？

```
ManualResetEvent run=new ManualResetEvent(true); 
ManualResetEvent shut=new ManualResetEvent(false);     
public delegate void GridTestResults(int Sno,string Name,double MinValue,double MaxValue,double Value,string Result,string Time);

public void ValuesToGrid(int Sno,string Name,double MinValue,double MaxValue,double Value,string Result,string Time)
{
    DataRow row=table.NewRow();
    if(this.InvokeRequired)
    {
        GridTestResults grid = new GridTestResults(this.ValuesToGrid);
        this.Invoke(grid,new object[]{Sno,Name,MinValue,MaxValue,Value,Result,Time});
    }
    else
    {
        row["Sno"] = Sno;
        row["Name"] = Name;
        row["MinValue"] = MinValue;
        row["MaxValue"] = MaxValue;
        row["Value"] = Value;
        row["Result"] = Result;
        row["Time"] = Time;
        table.Rows.Add(row);

        dataGridView1.Refresh();

        //How can i clear all the rows of gridview once the
        // its clicks the start button after cancel button
    }
}

 private void Startbutton_Click(object sender, EventArgs e)
{ 
    stopwatch.Start();
    timer1.Start();
    ts=new ThreadStart(ProcessStarted);
    th=new Thread(ts);                 
    th.Start();            
}

private void Pausebutton_Click(object sender, EventArgs e)
{                  
    if (th.ThreadState == System.Threading.ThreadState.Suspended)
    {
        timer1.Enabled = true;
        label5.Enabled = true;
        Pausebutton.Enabled = true;
        th.Resume();  //run.Set(); // this is obsolete.This has been deprecated.
        label3.Text = "The Current thread has resumed again";
    }
    else
    {
        label5.Enabled = false;
        timer1.Enabled = false;
        th.Suspend();  
        //th.Suspend(); // this is obsolete.This has been deprecated.
        label3.Text = "The current thread suspended";
    }
}

private void Cancelbutton_Click(object sender, EventArgs e)
{
    timer1.Stop();
    stopwatch.Stop();

    if (th.ThreadState==System.Threading.ThreadState.Suspended)
    {
         try
        {
             th.Abort();
        }
        catch (Exception)
        {
             th.Resume();
        }

    }
    try
    {
        th.Abort();
        //th.Join();
    }
    catch (Exception)
    {
        th.Resume();
    }
    label3.Text = "The Testprocess stopped completely";

    //dataGridView1.Rows.Clear();
    //dataGridView1.DataSource = null;  
    //i cannot use any of these two way to clear the gridview....
    //gives error like cannot clear the list
    stopwatch.Reset();    
}

private void ProcessStarted()
{
    //all the methods to be shown in datagridview 

void oneMethod()
{
    Application.Run(new OneForm()); 
    //here the form appears as popup window.once
    // we click ok button it will closes automatically.
    //now the problem is when ever i clcik pause button the OneForm will 
    // hangs and when i clcik resume it will work normally.
    // am not sure is it the correct way of doing r not while 
    // working with the threads?
}

    //dataGridView1.Rows.Clear(); 
    //Here also it does not work..gives same exception like 
    //cannot clear the list.
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T09:42:39.637

用于`Datatable clear()`清除 Datatable 的行。

# java - 什么是 java 类中的 Imports Order 以及如何解决它

> ID：11984647
> 
> 赞同：2
> 
> 时间：2012-08-16T09:51:01.347
> 
> 标签：java, sonarqube

在我的 java 类中有多个导入，如下所示。

```
import java.util.ArrayList;
import java.util.Date;
import java.util.Iterator;
import java.util.List;
import java.util.Map; 
```

**我的问题是声纳报告在Import Order**类别下讲述轻微违规行为。

**'java.util.ArrayList' 导入的顺序错误。**

它究竟意味着什么以及如何解决这种声纳违规行为。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:07:03.513

孤立并没有错`import java.util.ArrayList`——它只是碰巧是第一个违反规则的。您的问题的完整答案将需要显示您的所有导入。最可能的原因是导入组排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-01T23:49:22.587

我知道我在这里聚会迟到了，但这可以帮助其他人。

```
import java.util.ArrayList;
import java.util.Date;
import java.util.Iterator;
import java.util.List;
import java.util.Map; 
```

上面没有违反规则，因为它按字母顺序排序，你会得到“'java.util.'的错误顺序。进口。” 当这些导入中的任何一个位于其他导入之间而没有正确的排序顺序时。例如：

```
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import java.util.ArrayList;
import java.util.Date;
import java.util.Iterator;
import java.util.List;
import java.util.Map; 
```

由于进口没有很好地排序，上述规则违反了规则。要解决这个问题，只需将“java.util”导入移到“org.slf4j”导入上方。有一些像：

```
import java.util.ArrayList;
import java.util.Date;
import java.util.Iterator;
import java.util.List;
import java.util.Map;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory; 
```

此外，除了字母排序之外，似乎还有一个关于如何安排导入的顺序。

1.  静态导入
2.  从同一项目中的其他包导入
3.  从 java 导入
4.  从框架导入
5.  所有其他进口

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-24T16:23:23.917

根据我的经验，一个包中的类必须按字母顺序排序。因此，查看位于 ArrayList 之前的类并参考 java.util 包（如果有的话）。在我的情况下，它应该如下：

```
import java.util.ArrayList;
import java.util.Collection;
import java.util.Collections;
import java.util.Date;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;
import java.util.Map; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T09:57:52.357

如果您使用的是 eclipse，请尝试`Ctrl+Shift+O`修复导入。

另请参阅**[此问题](https://stackoverflow.com/questions/7735671/order-of-import-statements-in-java)**。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T10:15:09.463

import 语句的顺序与编译器或 JVM 无关。这只是一种编码风格偏好。`import some.package.*`就个人而言，如果我对特定包使用超过 3 个类，我喜欢使用它。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-08-16T09:54:18.143

将 ArrayList 导入放在 List 导入之后。

# php - 如何从 Android 的不同表中读取 MYSQL 数据库？

> ID：11984649
> 
> 赞同：0
> 
> 时间：2012-08-16T09:51:10.830
> 
> 标签：php, android, mysql

我将我的 android 连接到 MySQL 数据库，它工作正常。我使用 php 文件来连接数据库并进行查询。现在我想显示来自同一个数据库的不同表的数据。我想我必须调用函数 read 但我不知道如何删除数据。也许使用 Web 服务更容易或更好？这是我在另一篇文章中使用的代码

```
package com.example.onlinetestactivity;

import java.io.IOException;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.widget.TextView;

public class MainActivity extends Activity {
    /** Called when the activity is first created. */
    TextView resultView;
    HttpClient client;
    JSONObject json;
    String Dat;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        resultView = (TextView) findViewById(R.id.tvjson);
        client = new DefaultHttpClient();
        try {
            json = RedData();
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

      Dat = json.toString();

        new Read().onPostExecute(Dat);
    }
    public JSONObject RedData() throws ClientProtocolException, IOException, JSONException {

        HttpPost httppost = new HttpPost("http://file.php");     
        HttpResponse r = client.execute(httppost);

        HttpEntity e = r.getEntity();
        String data = EntityUtils.toString(e);
        JSONArray jArray = new JSONArray(data);
        JSONObject last = jArray.getJSONObject(0);
        return last;

    }

    public class Read extends AsyncTask<String, Integer, String> {

        @Override
        protected String doInBackground(String... arg0) {
            // TODO Auto-generated method stub
            try {
                json = RedData();
                //Toast.makeText(OnlineTestActivity.this, json.getString(arg0[0]), Toast.LENGTH_LONG);
                return json.getString(arg0[0]);

            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return null;
        }

        @Override
        protected void onPostExecute(String data) {
            // TODO Auto-generated method stub
            resultView.setText(data);
        }
    }
} 
```

这是php文件

```
<?php
header('Content-type: application/json');

$server = "XXXXXXXX";
$username = "XXXXXXX";
$password = "XXXXXXXX";
$database = "XXXXXXX";

$con = mysql_connect($server, $username, $password) or die ("No se puede conectar: " . mysql_error());

$db_selected = mysql_select_db($database, $con);
if (!$db_selected)
{
  die ("Error al seleccionar la Base de datos: " . mysql_error());
}

$sql = "select XXXXXXXXXXX)";
$result = mysql_query($sql) or die ("Query error: " . mysql_error());

$records = array();

while($row = mysql_fetch_assoc($result)) {
    $records[] = $row;
}

mysql_close($con);

print(json_encode($records));
?> 
```

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:10:19.407

查看[链接](http://www.helloandroid.com/tutorials/connecting-mysql-database)。AsyncTask 可以忽略，如示例中所示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:58:46.960

问题出在 PHP 文件中：

```
print(json_encode($records)); 
```

必须先去：

```
mysql_close($con); 
```

JSON 无法理解，它失败了，但更改顺序可以正常工作

# sql - SQL Server：如何编写和执行准备好的语句？

> ID：11984650
> 
> 赞同：5
> 
> 时间：2012-08-16T09:51:11.970
> 
> 标签：sql, sql-server, tsql, prepared-statement, dynamic-sql

在 MySQL 中，我们可以使用`PreparedStatement`.

我想在 SQL 脚本中实现相同的功能。如何创建准备好的语句以及如何执行它？请为此提供一个例子。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-16T12:44:40.490

我建议对大多数动态 SQL 使用[`sp_executesql`](http://msdn.microsoft.com/en-us/library/ms188001.aspx)over [`exec`](http://msdn.microsoft.com/en-us/library/ms188332.aspx)。 `sp_executesql`与 MySQL 的相似之处[`EXECUTE...USING`](http://dev.mysql.com/doc/refman/5.6/en/sql-syntax-prepared-statements.html)在于它可以接受参数，而不仅仅是串联的字符串，因此可以很好地防御 SQL 注入。`sp_executesql`还允许 SQL Server 重用查询计划以实现更高效的查询。这是一个例子：

```
exec sp_executesql
    @statement = N'select * from sys.databases where name = @dbname or database_id = @dbid',
    @parameters = N'@dbname sysname, @dbid int',
    @dbname = N'master',
    @dbid = 1 
```

可以在[此处](http://msdn.microsoft.com/en-us/library/ms175170.aspx)找到更多信息和示例。

# python-sphinx - ReStructuredText 中的粗斜体

> ID：11984652
> 
> 赞同：55
> 
> 时间：2012-08-16T09:51:17.510
> 
> 标签：python-sphinx, restructuredtext

我正在使用 ReStructuredText (ReST) 格式编写一些文档，以便稍后使用 Sphinx 生成网页，但我找不到编写一些“粗斜体”文本的方法。

所谓的“强调”（*斜体*）和“强调”（**粗体**）文本都有标记。它们分别是`*italic text*`和`**bold text**`。我还在一些关于这种格式的文档中读到，这些格式标记不能简单地“嵌套”。即`***text***`(or `** *text* **`) 不会产生***粗斜体***文本。

仍然可能应该有某种方法来生成用粗体和斜体标记强调的文本，因为以这种方式标记文本片段是一种普遍的做法。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-16T10:02:04.023

> 尽管 Markdown 支持嵌套粗体和斜体，但 reStructuredText 不支持（这是 Markdown 更强大的罕见情况之一，因为无法在 reStructuredText 中表示粗斜体）。

[https://gist.github.com/1855764](https://gist.github.com/1855764)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-04-05T19:42:59.027

HTML 输出的配方。

`my.rst`：

```
.. role:: red
  :class: red

.. role:: bolditalic
  :class: bolditalic

:red:`WARNING` :bolditalic:`Don't be stupid!` 
```

`my.css`：

```
.red { color: red; }
.bolditalic {
  font-weight: bold;
  font-style: italic;
} 
```

建造者：

```
rst2html --strip-comments --halt warning --stylesheet=my.css my.rst my.html 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-10-10T08:44:05.980

在 sphinx 中，这可以通过自定义角色实现：您在 css 中创建一个样式，并创建一个指向该样式的角色。这是下划线文本的完整工作示例：[sphinx-dev thread](https://groups.google.com/forum/?fromgroups=#!topic/sphinx-dev/QY36_An3tK4)。

**编辑**：

这是一个很好的例子：[ReST 删除线](https://stackoverflow.com/questions/6518788/rest-strikethrough)

**编辑 2**：

该 sphinx-dev 链接不再可用，所以这是要点，它与上面的删除线链接非常相​​似：

CSS：

```
span.underlined {
  text-decoration: underline;
} 
```

在 RST 中注册角色：

```
.. role:: underlined
   :class: underlined 
```

以后用它作为

```
:underlined:`test` 
```

所有这些都可以在一个 RST 文档中：

```
.. raw:: html

   <style type="text/css">
     span.underlined {
       text-decoration: underline;
     }
   </style>

.. role:: underlined
   :class: underlined

:underlined:`test` 
```

用:: 测试它

```
rst2html5.py test01.rst test01.html 
```

# sencha-touch-2 - 在 Sencha Touch 2 中使用 XMLStore 作为列表的 RSS Feed

> ID：11984654
> 
> 赞同：0
> 
> 时间：2012-08-16T09:51:20.800
> 
> 标签：sencha-touch-2

我正在尝试将提要显示为列表。当我尝试使用读取器类型为 json 执行此操作时，它工作正常。但是，类型为 xml 时，它不起作用。我得到一个例外：

**资源解释为脚本，但使用 MIME 类型 text/xml 传输：“http://feeds.feedburner.com/TechCrunch/?_dc=1345109660600&page=1&start=0&limit=25&callback=Ext.data.JsonP.callback1”。* *未捕获的 SyntaxError : 意外的令牌 <**

```
Ext.define('TestViews.view.RSSFeedView', {
    requires:[
        'TestViews.view.CommonTitleBar',
        'TestViews.view.CommonContainer',
        'TestViews.locale.MsgResource'
    ],
    extend: 'Ext.Panel',
    xtype: 'Test-rssfeedview',
    id:'rssFeedView',
    config: {
        fullscreen: true,
        layout: {
            type: 'vbox'
        },
        autoDestroy: true,
        items: [
            {
                xtype: 'Test-commontitlebar',
                title: 'RSS Feed Component'
            },
            {
                xtype: 'list',
                id: 'rssFeedList',
                title : 'RSS Feed View',

                                    itemId:"testList",
                                    onItemDisclosure: true,
                                    itemTpl: '{title}',
                flex: 1,
               store:{
                   model: "TestViews.model.RSSFeedViewModel",
                   autoLoad: true,
                   implicitIncludes: true,
                   proxy: {
                       type: 'jsonp',
                        url: 'http://feeds.feedburner.com/TechCrunch/',                          
                       reader: {
                           type: 'xml',
                           root: 'channel',
                            record: 'channel'
                           }
                       }
               },
                width: '100%',                    
                autoDestroy: true,
            }
        ]
    }
}) 
```

模型：

```
enter Ext.define('TestViews.model.RSSFeedViewModel', {
extend: 'Ext.data.Model',

config: {
    fields: [
        'title','description'
    ]
}}); 
```

你能告诉我我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:14:12.487

我认为您不能将 XML 读取为 JSONP。看看 JSONP 是如何工作的：

同源策略可防止任何浏览器从不同的 URL 加载数据。要解决此问题，您可以使用 src 向 DOM 添加 -Tag 属性包含您要加载的数据的 URL。

但在那之后，您在这个新脚本标记的开始和结束之间拥有数据（在您的情况下为 RSS 提要数据）。浏览器开始将其解释为 JavaScript 并且 - 砰！*Unexpected token <* ... 这是正确的，因为它不是 JavaScript，而是 RSS。

总结：**JSONP 只能用于从另一个 URL 加载 JavaScript！**

解决方案：您可以将 RSS 数据包装为 JSON 中的字符串。Google API 在这里可以帮助您：

```
http://ajax.googleapis.com/ajax/services/feed/load?q=URL&v=1.0&num=10&output=json-in-script 
```

这为您提供了一个 JSON 对象，其中包含转换后的提要数据。在 API Docs 中搜索参数，真正帮助你。

学分：[http ://www.alaafu.com/rssreader-sencha/#favorites/first](http://www.alaafu.com/rssreader-sencha/#favorites/first)

# php - 无法将 mysql 中的 id 检索到隐藏的输入元素中

> ID：11984655
> 
> 赞同：0
> 
> 时间：2012-08-16T09:51:25.217
> 
> 标签：php, mysql

我有这样的情况，想从mysql中检索行ID来输入隐藏元素。让我们看一下脚本

php =>

```
<?php
$con = new mysqli("host","user","pswd","db");

if (isset($_POST['some'])){
    echo $_POST['some'];
}

echo "<form name='a' method='post' action='index.php'";

if (!$con->connect_error){
    if ($con->set_charset("utf8")){
        if ($r = $con->query("SELECT * FROM tb")){
            while ($row = $r->fetch_assoc()){
                echo "<input type='hidden' name='some' value='" . $row['id'] . "'><a href='javascript: void(0)' id='j'>" . $row['file_title'] . "</a><br>";
            }
            $r->free();
        }
    }
}

echo "</form>";
?> 
```

和 javascript

```
<script type="text/javascript">
document.getElementById("j").addEventListener("click",function(){
    document.a.submit();
});
</script> 
```

从这个脚本中，我希望当我点击`$row['file_title']`它时必须`echo clicked row id`但它只从第一个元素获取 id，并且这个 id 属于数据库中的最后一行。这里有什么问题，我该如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:07:50.483

这里的while循环每次都会覆盖隐藏元素和链接ID。

```
while ($row = $r->fetch_assoc()){
                echo "<input type='hidden' name='some' value='" . $row['id'] . "'><a href='javascript: void(0)' id='j'>" . $row['file_title'] . "</a><br>";
            } 
```

看，这里每个链接都有 id 'j'。每个输入元素都有名称“一些”。更好的是在此链接上分配一个类并在隐藏元素名称中附加 $row['id'] 以使元素像这样独一无二：

```
while ($row = $r->fetch_assoc()){
                    echo "<input type='hidden' name='some_".$row['id']."' value='" . $row['id'] . "'><a href='javascript: void(0)' class="alink" id='j_".$row['id']."'>" . $row['file_title'] . "</a><br>";
                } 
```

Javascript 将是这样的：

```
<script type="text/javascript">

document.getElementsByClassName("alink").addEventListener("click",function(){
    document.a.submit();
});

</script> 
```

其中“alink”是分配给链接的类。

希望，它会帮助你..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T09:57:19.917

脚本如何知道点击了哪个链接？所有链接都提交*相同的表单*，并且表单中的所有`<input>`s 都具有*相同的名称*！您可以将每个`<input>`和关联`<a>`放在单独的表单中，也可以给每个单独`<input>`的名称。当然，您还必须调整您的 JavaScript，因为`document.getElementById('j')`只会获取第一个链接。

# android - 如何使用 CursorAdapter 和 LoaderCallbacks 在片段中实现 ContentObserver？

> ID：11984656
> 
> 赞同：5
> 
> 时间：2012-08-16T09:51:30.253
> 
> 标签：android, android-contentprovider, android-cursoradapter, android-cursorloader, contentobserver

我正在使用 a`CursorAdapter`来`ListFragment`加载和显示评论列表。

```
public class CommentsFragment extends ListFragment implements LoaderCallbacks<Cursor> {

    protected Activity mActivity;
    protected CursorAdapter mAdapter;

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        mActivity = getActivity();
        mAdapter = new CommentsCursorAdapter(mActivity, null, 0);
        setListAdapter(mAdapter);
        mActivity.getContentResolver().registerContentObserver(CustomContract.Comments.CONTENT_URI, false, new CommentsObserver());
        getLoaderManager().initLoader(0, null, this);
    }

    @Override
    public Loader<Cursor> onCreateLoader(int id, Bundle extras) {
        Uri uri = CustomContract.Comments.CONTENT_URI;
        return new CursorLoader(mActivity, uri, null, null, null, null);
    }

    @Override
    public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {
        mAdapter.swapCursor(cursor);
    }

    @Override
    public void onLoaderReset(Loader<Cursor> loader) {
        mAdapter.swapCursor(null);
    }

    protected class CommentsObserver extends ContentObserver {

        public CommentsObserver() {
            super(new Handler());
        }

        @Override
        public void onChange(boolean selfChange) {
            super.onChange(selfChange);
            // TODO Trigger a reload.
        }

    }
} 
```

`notifyChange()`在我为*插入*操作添加的关联 ContentProvider中。

```
@Override
public Uri insert(Uri uri, ContentValues values) {
    final SQLiteDatabase db = mOpenHelper.getWritableDatabase();
    int match = sUriMatcher.match(uri);
    switch (match) {
        case COMMENTS: {
            long id = db.insert(DatabaseProperties.TABLE_NAME_COMMENTS, null, values);
            Uri itemUri = ContentUris.withAppendedId(uri, id);
            // FIXME Which one is right?
            getContext().getContentResolver().notifyChange(itemUri, null);
            getContext().getContentResolver().notifyChange(uri, null);
            return itemUri;
        }
        default: {
            throw new UnsupportedOperationException("Unknown URI: " + uri);
        }
    }
} 
```

**问题：**

1.  `null`可以`notifyChange()`作为观察者参数传递吗？如果不是，我应该在这里通过什么对象？
2.  我应该通过`uri`还是`itemUri`通过`notifyChange()`？为什么？
3.  我必须调用什么方法`CommentsObserver#onChange()`来更新评论列表？
4.  有没有我可以用的`ListFragment`而不是内部类实例实现的接口`ContentObserver`？
5.  我只是`new Handler()`在 的构造函数中实例化 a `CommentsObserver`。这对我来说似乎不正确 - 请解释一下。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-16T11:29:44.393

`SqlCursor`已经有内部`ContentObserver`的，因为您正在使用这个`Cursor`实现，所以不需要自己的`ContentObserver`实现。

为了方便使用，您可以添加：

```
class MyContentProvider extends ContentProvider{
  //rest implementation goes here
  @Override
  public Cursor query(Uri uri, String[] projection, String selection,
            String[] selectionArgs, String sortOrder) {
    Cursor cursor = null;
    //check uri, select table name based on uri, etc ...
    cursor = db.query(/*.....*/);
    //add this line:
    cursor.setNotificationUri(getContext().getContentResolver(), uri);
    //before you return cursor
    return cursor;
  }
  @Override
  public Uri insert(Uri uri, ContentValues values) {
     /* ... */
       //you can notify only "dir" uri and is should be enough
       getContext().getContentResolver().notifyChange(uri, null);
       return itemUri;
     /* ... */
  }
  //rest of implementation goes here
} 
```

在此之后，`CursorLoader`内部实现将负责重新加载/刷新数据......

# java - 如何为我的 Android 应用程序实现以下结构？

> ID：11984659
> 
> 赞同：0
> 
> 时间：2012-08-16T09:51:32.943
> 
> 标签：java, android, arraylist, hashmap

我希望实现以下结构：

*   `ArrayList`
    *   `HashMap`
        *   `ArrayList`
            *   `HashMap`
            *   `HashMap`
    *   `HashMap`
        *   `ArrayList`
            *   `HashMap`
            *   `HashMap`
            *   `HashMap`

如何将一个添加`ArrayList`到一个`HashMap`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:54:14.507

这个结构有什么用？简化它。

存储它的最佳位置是 sqlite db 中的一堆表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T09:58:39.330

干得好

```
 ArrayList<HashMap<String, ArrayList<HashMap<String, MyObject>>>> wierdDataStructure; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T10:18:45.623

为了简化这个庞大的结构，您可以创建一个自定义类：

```
public class WeirdObject<D> extends ArrayList<HashMap<String, D>> {
    // Your custom methods here for easy construction and interaction with this class
} 
```

并添加对象：

```
WeirdObject<WeirdObject<Double>> weirdObject = new WeirdObject<WeirdObject<Double>>();
HashMap<String, WeirdObject<MyObject>> hashMap = new HashMap<String, WeirdObject<MyObject>>();
// add your WeirdObjects (AKA ArrayList<Hashmap<String, MyObject>)
weirdObject.add(hashMap); 
```

# android - 由于 ImageView 绘制，Android ListView 滚动延迟

> ID：11984662
> 
> 赞同：3
> 
> 时间：2012-08-16T09:51:48.007
> 
> 标签：android, android-listview, android-imageview

我有一个 ListView 显示从 SD 加载的图像（以前用相机拍摄的 JPG）。我使用`imageView.setImageBitmap()`是因为图像太大而无法在列表中显示并且消耗太多[（本机）内存](https://stackoverflow.com/a/3184850/933261)，所以我使用`inSampleSize`.

我的问题是在显示新行之前滚动延迟。根据设备的不同，延迟或多或少。一旦你到达列表的末尾，滚动就会变得流畅。

最初我在 ListAdapter getView() 中执行了位图解码：

```
BitmapFactory.Options bitmapOptions = new BitmapFactory.Options();
bitmapOptions.inSampleSize = 2; //Subsample the original image
bitmapOptions.inPurgeable = true; //The system can free the ¿native? memory allocated by the bitmap if needed
bitmapOptions.inInputShareable = true; //Works in conjuction with inPurgeable
bitmap = BitmapFactory.decodeFile(path, bitmapOptions);
imageView.setImageBitmap(bitmap); 
```

然后我尝试在 UI 线程之外执行解码。我执行了`AsyncTask`解码所有位图并将其缓存在内存中。所以在 getView() 我只做了`imageView.setImageBitmap()`. 但是我在滚动时看到了同样的延迟。使用DDMS中的方法分析工具，我看到该方法`Canvas.native_drawBitmap()`导致延迟，所以问题不是位图解码，而是ImageView绘图。

¿ 有什么想法可以解决这个问题吗？¿ 为什么第一次显示一行后显示该行时没有延迟？也许有一个 ImageView 显示缓存。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T10:08:34.573

当您滚动列表时，它会在**主线程**中动态加载。那时您正在尝试执行**setImageBitmap()**，而这又尝试在**主线程**中执行。所以整个任务都变慢了。

所以解决方案就是在**runOnUiThread(runnable)**或**Handler中的****setImageBitmap()**。我遇到了这个问题。这就是解决方案。

 ******编辑 ：**

做这个，

```
Handler handler = new Handler() {
   @Override    
   public void handleMessage(Message message) { 
        // do setImageBitmap(bitmap)    
   }    
};

new Thread() {  
   @Override    
   public void run() {  
        //get your bitmap   
        Message message = handler.obtainMessage(0, bitmap); 
        handler.sendMessage(message);   
   }
}.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:20:28.677

当您滚动视图时，将调用列表适配器的 getView() 方法。这意味着，您为此方法加载的工作越多，延迟就越多。****

# extjs - 如何过滤具有完全匹配的 extjs 商店

> ID：11984663
> 
> 赞同：4
> 
> 时间：2012-08-16T09:51:50.110
> 
> 标签：extjs, filter, store, extjs4.1

我正在为商店使用过滤器。问题是我想返回一个完全匹配的。

**例如：**

如果我`aa-1`在网格中过滤它会显示`aa-1`，`aa-1***`但如果我只想看到所有内容`aa-1`。

我用它来过滤：

```
listeners: {
    itemclick: function() {
        var data = grid.getSelectionModel().selected.items[0].data;
        store.clearFilter();
        store.filter('productsCat', data.productsCat);
    }
} 
```

我该怎么做才能进行精确匹配？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-06T13:20:21.687

对于 ExtJS 4，您可以简单地使用 exactMatch 和 caseSensitive 配置选项：

```
store.filter({
  property: fieldName,
  value: fieldValue,
  exactMatch: true,
  caseSensitive: true
}) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T09:58:36.007

您可以在过滤器中使用正则表达式来确保比较值是短语的结尾。

要么，要么使用 filterBy() 方法来定义比较函数，例如：

```
store.filterBy(this, function(rec, id) {
    if(rec.get('thefieldtocompare') === "what you want to compare against") {
        return true;
    }
    else {
        return false;
    }
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-16T10:02:08.893

您没有提到您使用的是哪个版本的 ExtJS，但这里有两种通用方法：

1.  提供具有精确数学模式的正则表达式：

    ```
    store.filter('productsCat', new RegExp('^' + Ext.escapeRe(data.productsCat) + '$')); 
    ```

    或者

2.  [为filterBy](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.Store-method-filterBy)提供自己的匹配函数

    ```
    store.filterBy(function(rec) {
        return rec.get('productsCat') === data.productsCat;
    }); 
    ```

# macos - 不同 HTTP 端口上的多个 Jenkins 守护进程 (Mac OS X)

> ID：11984664
> 
> 赞同：2
> 
> 时间：2012-08-16T09:51:50.983
> 
> 标签：macos, continuous-integration, jenkins

如何在 Mac OS X 系统上在不同的 HTTP 端口（即 7070 和 7071）上运行 Jenkins 的两个守护进程。

1）我为每个 dameon 创建了两个帐户，包含 Jenkins 主目录：jeankins1、jenkins2

2) 我复制了默认的 dameon 配置文件

```
sudo cp /Library/LaunchDaemons/org.jenkins-ci.plist /Library/LaunchDaemons/jenkins-dameon-1.plist
sudo cp /Library/LaunchDaemons/org.jenkins-ci.plist /Library/LaunchDaemons/jenkins-dameon-2.plist 
```

3）我修改了dameon配置文件

```
sudo vi /Library/LaunchDaemons/jenkins-dameon-1.plist 
```

jenkins-dameon-1.plist 文件的内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
        <key>EnvironmentVariables</key>
        <dict>
                <key>JENKINS_HOME</key>
                <string>/Users/jenkins1/Jenkins/Home</string>
        </dict>
        <key>GroupName</key>
        <string>wheel</string>
        <key>KeepAlive</key>
        <true/>
        <key>Label</key>
        <string>org.jenkins-ci</string>
        <key>ProgramArguments</key>
        <array>
                <string>/bin/bash</string>
                <string>/Library/Application Support/Jenkins/jenkins-runner.sh</string>
                <string>--httpPort=7070</string>
        </array>
        <key>RunAtLoad</key>
        <true/>
        <key>UserName</key>
        <string>jenkins1</string>
        <key>SessionCreate</key>
        <true />
</dict>

sudo vi /Library/LaunchDaemons/jenkins-dameon-2.plist 
```

jenkins-dameon-2.plist 文件的内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
        <key>EnvironmentVariables</key>
        <dict>
                <key>JENKINS_HOME</key>
                <string>/Users/jenkins2/Jenkins/Home</string>
        </dict>
        <key>GroupName</key>
        <string>wheel</string>
        <key>KeepAlive</key>
        <true/>
        <key>Label</key>
        <string>org.jenkins-ci</string>
        <key>ProgramArguments</key>
        <array>
                <string>/bin/bash</string>
                <string>/Library/Application Support/Jenkins/jenkins-runner.sh</string>
                <string>--httpPort=7071</string>
        </array>
        <key>RunAtLoad</key>
        <true/>
        <key>UserName</key>
        <string>jenkins2</string>
        <key>SessionCreate</key>
        <true />
</dict> 
```

4) 我启动了两个 Jenkins 守护进程

```
sudo launchctl load /Library/LaunchDaemons/jenkins-dameon-1.plist
sudo launchctl load /Library/LaunchDaemons/jenkins-dameon-2.plist 
```

**我传递 httpPort 参数的方式似乎不正确，怎么办？**

此解决方案仅适用于一个实例：[Configure Jenkins Mac OS X native package to run in a different port](https://stackoverflow.com/questions/7474835/configure-jenkins-mac-os-x-native-package-to-run-in-a-different-port)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:47:07.243

在我的 PLIST 文件中，我不再使用 jenkins-runner.sh 脚本，而是使用 java 可执行文件。

jenkins-dameon-1.plist 文件的内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>EnvironmentVariables</key>
    <dict>
        <key>JENKINS_HOME</key>
        <string>/Users/jenkins1/Jenkins/Home</string>
    </dict>
    <key>GroupName</key>
    <string>daemon</string>
    <key>KeepAlive</key>
    <true/>
    <key>Label</key>
    <string>jenkins1</string>
    <key>ProgramArguments</key>
    <array>
                <string>/usr/bin/java</string>
                <string>-jar</string>
                <string>/Applications/Jenkins/jenkins.war</string>
                <string>--httpPort=7070</string>
                <string>--ajp13Port=-1</string>
    </array>
    <key>RunAtLoad</key>
    <false/>
    <key>UserName</key>
    <string>jenkins1</string>
        <key>SessionCreate</key>
    <true />
</dict>
</plist> 
```

jenkins-dameon-2.plist 文件的内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>EnvironmentVariables</key>
    <dict>
        <key>JENKINS_HOME</key>
        <string>/Users/jenkins2/Jenkins/Home</string>
    </dict>
    <key>GroupName</key>
    <string>daemon</string>
    <key>KeepAlive</key>
    <true/>
    <key>Label</key>
    <string>jenkins2</string>
    <key>ProgramArguments</key>
    <array>
                <string>/usr/bin/java</string>
                <string>-jar</string>
                <string>/Applications/Jenkins/jenkins.war</string>
                <string>--httpPort=7071</string>
                <string>--ajp13Port=-1</string>
    </array>
    <key>RunAtLoad</key>
    <false/>
    <key>UserName</key>
    <string>jenkins2</string>
        <key>SessionCreate</key>
    <true />
</dict>
</plist> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-09T23:00:33.080

作为 OSX 安装的一部分，创建了 3 个文件用于启动：

1.  /Library/Preferences/org.jenkins-ci.plist
2.  /Library/Application\ Support/Jenkins/jenkins-runner.sh
3.  /图书馆/LaunchDaemons/org.jenkins-ci.plist

要正确执行此操作，您需要复制所有 3 个文件并对其进行编辑。

文件 1 是您可以设置端口的地方。为此，您需要使用此处所述的默认命令（将文件名更改为您的副本）：[https ://wiki.jenkins-ci.org/display/JENKINS/Thanks+for+using+OSX+Installer](https://wiki.jenkins-ci.org/display/JENKINS/Thanks+for+using+OSX+Installer)

文件 2 是启动 Jenkins 并读取默认值的 shell 脚本。编辑您的文件副本以指向您在 defaults= 行中的文件 1 的副本（减去 .plist 扩展名）。

文件 1 控制守护程序的启动。您可以将其编辑为：

*   指向文件 2 的副本，而不是原始的 shell 脚本
*   如果需要，指向不同的日志目录以进行标准输出
*   如果需要，为标准错误指向不同的日志目录
*   指向不同的 JENKINS_HOME 目录
*   更改标签以反映您的新文件名
*   如果需要，指定不同的用户

然后，您应该拥有在不同端口上启动 2 个不同守护程序所需的一切。

# php - 将天数添加到数组中的特定日期

> ID：11984665
> 
> 赞同：1
> 
> 时间：2012-08-16T09:51:53.647
> 
> 标签：php

我有一张桌子`events`

```
`id` int(10) unsigned NOT NULL AUTO_INCREMENT,
`data` date DEFAULT NULL,
`days` int(2) DEFAULT NULL,
PRIMARY KEY (`id`) 
```

与许多记录。

我生成一个包含所有不可用日期的数组

```
$sql = "SELECT * FROM events WHERE `data` LIKE '".$cYear."-".$cMonth."-%'";
$sql_result = mysql_query ($sql, $connection ) or die ('request "Could not execute SQL query" '.$sql);
while ($row = mysql_fetch_assoc($sql_result)) {
$unavailable[] = $row["data"];
$days[] = $row["days"];
} 
```

数组 $unavailable 是这样的： (2012-08-10, 2012-08-25) 数组 $days 是这样的： (3, 2)

我需要这样的数组： (2012-08-10, 2012-08-11, 2012-08-12, 2012-08-25, 2012-08-26)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:05:27.663

这是一些生成您想要的代码的代码。

```
<?php

$unavailable = array('2012-08-10', '2012-08-25');
$days = array(3, 2);

$dates = array();
for ($i = 0; $i < count($days); $i++)
{
    $tm = strtotime($unavailable[$i]);
    for ($d = 0; $d < $days[$i]; $d++)
    {
        $dates[] = date('Y-m-d', $tm + $d * 24 * 60 * 60);
    }
}
print_r($dates);
?> 
```

您可以将此代码移动到代码的 while 循环中，以防止创建 $unavailable 和 $days 数组

# c# - 客户端访问 WCF 服务时出错

> ID：11984668
> 
> 赞同：1
> 
> 时间：2012-08-16T09:51:56.937
> 
> 标签：c#, wcf

错误：

> *在 ServiceModel 客户端配置部分中找不到引用合同“ICalculatorDuplex”的默认端点元素。这可能是因为没有为您的应用程序找到配置文件，或者因为在客户端元素中找不到与此合同匹配的端点元素。*

参考链接：http: [//msdn.microsoft.com/en-us/library/ms735103.aspx](http://msdn.microsoft.com/en-us/library/ms735103.aspx)

```
 using System;
    using System.ServiceModel;

    namespace Microsoft.ServiceModel.Samples
    {
        // The service contract is defined in generatedClient.cs, generated from the service by the svcutil tool.

        // Define class which implements callback interface of duplex contract

        public class CallbackHandler : ICalculatorDuplexCallback
        {

            public void Equals(double result)
            {
                Console.WriteLine("Equals({0})", result);
            }

            public void Equation(string eqn)
            {
                Console.WriteLine("Equation({0})", eqn);
            }

        }

        class Client
        {
            static void Main()
            {
                // Construct InstanceContext to handle messages on callback interface
                InstanceContext instanceContext = new InstanceContext(new CallbackHandler());

                // Create a client with given client endpoint configuration
                CalculatorDuplexClient client = new CalculatorDuplexClient(instanceContext);

             //   Console.WriteLine("Press to terminate client once the output is displayed.");
              //  Console.WriteLine();

                // Call the AddTo service operation.
                double value = 100.00D;
                client.AddTo(value);

                // Call the SubtractFrom service operation.
                value = 50.00D;
                client.SubtractFrom(value);

                // Call the MultiplyBy service operation.
                value = 17.65D;
                client.MultiplyBy(value);

                // Call the DivideBy service operation.
                value = 2.00D;
                client.DivideBy(value);

                // Complete equation
                client.Clear();

                Console.ReadLine();

                //Closing the client gracefully closes the connection and cleans up resources
                client.Close();
            }

        }
    } 
```

客户端配置：

```
<system.serviceModel>
      <client>
        <endpoint address="http://196.9.200.26:8000/ServiceModelSamples/service"
            binding="wsDualHttpBinding" bindingConfiguration="WSDualHttpBinding_ICalculatorDuplex"
            contract="ServiceReference1.ICalculatorDuplex" name="WSDualHttpBinding_ICalculatorDuplex">
          <identity>
            <servicePrincipalName value="host/ln-pun-026.imgpoint.com" />
          </identity>
        </endpoint>
      </client>
        <bindings>
            <wsDualHttpBinding>
                <binding name="WSDualHttpBinding_ICalculatorDuplex" useDefaultWebProxy="true" bypassProxyOnLocal="false" clientBaseAddress="http://196.9.200.26:8000/myClient/" >
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <reliableSession ordered="true" inactivityTimeout="00:10:00" />
                  <security mode="None"/>                  
                </binding>
            </wsDualHttpBinding>
        </bindings>

    </system.serviceModel> 
```

# c++ - 无信号时 IMediaControl::stop 挂起

> ID：11984671
> 
> 赞同：1
> 
> 时间：2012-08-16T09:52:10.363
> 
> 标签：c++, directshow

我有一个在 Google 中似乎很常见的问题，但对我没有帮助。当我的应用程序试图关闭所有内容时，释放对象之前调用的最后一个函数是 IMediaControl::stop。有信号时一切正常。但是当我在没有信号的情况下启动应用程序（或在应用程序工作时终止它）程序永远不会从 stop() 返回。更重要的是，如果我在信号已经挂起时提供信号，一切都会恢复正常，程序会取消挂起并正确退出。

这是我的主要代码的一部分：

```
hr = connectFilters(pGraph, pCaptureDevice, AUDIO_INPUT_DEVICE_PIN_NAME,
pAnalyzerFilter, SPDIF_ANAL_FILTER_PIN_NAME);
if(SUCCEEDED(hr))
{
    // run the graph
    hr = pControl->Run();
    if(SUCCEEDED(hr))
    {        
        // wait for UI thread to finish
        pFilterObject->WaitForThread();

        // stop the graph and exit
        pControl->Stop();
    }
}

releaseObjects();
return 0; 
```

谷歌建议死锁（确实是这样）是由一些线程相互等待引起的。UI线程似乎不是问题，因为我在没有Window的情况下基于这个应用程序做了一个DLL，问题是一样的。

非常感谢提前，

蚀

**编辑**：

我只有两个过滤器：源和转换。问题肯定在变换过滤器中，因为没有它程序运行良好。可能是某处未释放缓冲区或样本的问题吗？我不知道 DirectShow 是如何工作的，但是如果没有信号，可能需要做一些额外的事情？

**编辑 2**：

我在 Google 中发现有人通过在停止图表之前停止源过滤器解决了这个问题。我做了同样的事情，它也挂起......我用它来获取源过滤器：

```
hr = pFG2->AddSourceFilterForMoniker(pMoniker, pContext, wszName, &pSource);
*ppF = pSource;
(*ppF)->AddRef(); 
```

当我附加 VS 调试器时，它说它无法显示代码，所以我认为它在 MS 代码中的某个地方。即使我评论我的函数处理 IMediaSamples 它仍然挂起。现在我已经没有什么想法了。我还尝试以不同的方式从图表中停止和删除过滤器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-22T16:07:51.623

尝试将传入图像从后台线程发送到 WPF 窗口时，我遇到了同样的问题。一切都很好，直到我试图停止媒体控制或释放任何东西。

问题在于调度程序调用操作以将其发送到 UI 线程。我暂时注释掉了这个电话，这使视频完全没有出现在屏幕上，但我可以随时在采样器中中断，看到它实际上仍在运行。

需要在线程之间手动分离图像。泛型函数中的某些东西保持引用，所以 com 对象

为了解决这个问题，我在窗口中创建了一个 dispatchertimer，将其间隔设置为 1ms，将其回调到执行 UI 更新的函数，然后在抓取器中，让 buffercb 事件将帧保存到独立变量并启用计时器.

以下是我最终得到的简要介绍：

```
 InteropBitmap newbmp;
    DispatcherTimer refreshTimer;
    refreshTimer = new DispatcherTimer(TimeSpan.FromMilliseconds(1), DispatcherPriority.Render, ontimer, this.Dispatcher);
    videoSampleCB.newframearrived += capGrabber_NewFrameArrived;

    void capGrabber_NewFrameArrived(object sender, EventArgs e)
    {
        newbmp = videoSampleCB.newimage;
        refreshTimer.IsEnabled = true;
    }
    void ontimerobject sender, EventArgs e)
    {
        this.BitmapSource = newbmp;
        refreshTimer.IsEnabled = false;
    }
class VideoSampleGrabberCallBack : ISampleGrabberCB  
{
        event eventhandler newframearrived;

        public InteropImage newimage;
        public int BufferCB(double sampleTime, IntPtr buffer, int bufferLen)
        {
             newimage = ...
             newframearrived(this, eventargs.empty);
        }
} 
```

# php - 在 googlemap api 问题中显示折线

> ID：11984672
> 
> 赞同：-1
> 
> 时间：2012-08-16T09:52:17.243
> 
> 标签：php, google-maps, polyline

在下面的代码中，我需要在地图中显示折线

我对下面提到的以下代码有疑问。在这里，我使用 googlemap 显示了两个出租车图标，它们以 3 秒的时间间隔在地图中移动。我想沿着出租车移动的路径画一条线..帮助。

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <title>Taxi Tracker App</title>
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>

   <script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?sensor=false">
    </script>

    <script type="text/javascript">
    var myCarsLatVal =new Array(); 
           // for car 1..............................................

                myCarsLatVal[0]="28.611335";  
                myCarsLatVal[1]="28.611278";  
                myCarsLatVal[2]="28.611258";  
                myCarsLatVal[3]="28.611203";  
                myCarsLatVal[4]="28.611168";  
                myCarsLatVal[5]="28.611141";  
                myCarsLatVal[6]="28.611128";  
                myCarsLatVal[7]="28.611069";  
                myCarsLatVal[8]="28.611048";  
                myCarsLatVal[9]="28.611019";  
                myCarsLatVal[10]="28.610993";  
                myCarsLatVal[11]="28.610979";  
                myCarsLatVal[12]="28.610951";  
                myCarsLatVal[13]="28.610937";  
                myCarsLatVal[14]="28.610918";  
                myCarsLatVal[15]="28.610895";  
                myCarsLatVal[16]="28.610878";  
                myCarsLatVal[17]="28.610857";
                myCarsLatVal[18]="28.610829";  
                myCarsLatVal[19]="28.610791"; 
                myCarsLatVal[20]="28.610767"; 
                myCarsLatVal[21]="28.610746"; 
                myCarsLatVal[22]="28.610720"; 
                myCarsLatVal[23]="28.610685"; 
                myCarsLatVal[24]="28.610661"; 
                myCarsLatVal[25]="28.610638"; 
                myCarsLatVal[26]="28.610603"; 
                myCarsLatVal[27]="28.610570"; 
                //myCarsLatVal[40]="28.610603";

                var myCarsLangVal = new Array(); 

                myCarsLangVal[0] =  "77.234467";
                myCarsLangVal[1] =  "77.234508";
                myCarsLangVal[2] =  "77.234515";
                myCarsLangVal[3] =  "77.234551";
                myCarsLangVal[4] =  "77.234571";
                myCarsLangVal[5] =  "77.234589";
                myCarsLangVal[6] =  "77.234596";
                myCarsLangVal[7] =  "77.234634";
                myCarsLangVal[8] =  "77.234636";
                myCarsLangVal[9] =  "77.234658";
                myCarsLangVal[10] =  "77.234674";
                myCarsLangVal[11] =  "77.234698";
                myCarsLangVal[12] =  "77.234717";
                myCarsLangVal[13] =  "77.234736";
                myCarsLangVal[14] =  "77.234762";    
                myCarsLangVal[15] =  "77.234781";    
                myCarsLangVal[16] =  "77.234811";
                myCarsLangVal[17] =  "77.234843"; 
                myCarsLangVal[18] =  "77.234907"; 
                myCarsLangVal[19] =  "77.234974"; 
                myCarsLangVal[20] =  "77.235015"; 
                myCarsLangVal[21] =  "77.235060"; 
                myCarsLangVal[22] =  "77.235100"; 
                myCarsLangVal[23] =  "77.235157"; 
                myCarsLangVal[24] =  "77.235200"; 
                myCarsLangVal[25] =  "77.235251"; 
                myCarsLangVal[26] =  "77.235310"; 
                myCarsLangVal[27] =  "77.235361"; 
               // myCarsLangVal[40] =  "77.235310"; 

          // for car 2................................

            var myCarsLatValr =new Array(); 
                myCarsLatValr[0]="28.611194";  
                myCarsLatValr[1]="28.611137";  
                myCarsLatValr[2]="28.611097";  
                myCarsLatValr[3]="28.611041";  
                myCarsLatValr[4]="28.610977";  
                myCarsLatValr[5]="28.610946";  
                myCarsLatValr[6]="28.610918";  
                myCarsLatValr[7]="28.610895";  
                myCarsLatValr[8]="28.610859";
                myCarsLatValr[9]="28.610859";  
                myCarsLatValr[10]="28.610812";  
                myCarsLatValr[11]="28.610765";  
                myCarsLatValr[12]="28.610711";  
                myCarsLatValr[13]="28.610685";  
                myCarsLatValr[14]="28.610659";  
                myCarsLatValr[15]="28.610633";  
                myCarsLatValr[16]="28.610593";  
                myCarsLatValr[17]="28.610546";  
                myCarsLatValr[18]="28.610511";  
                myCarsLatValr[19]="28.610478";  
                myCarsLatValr[20]="28.610450";  
                myCarsLatValr[21]="28.610407";  
                myCarsLatValr[22]="28.610358"; 
                myCarsLatValr[23]="28.610311"; 
                myCarsLatValr[24]="28.610271"; 
                myCarsLatValr[25]="28.610221"; 
                myCarsLatValr[26]="28.610172"; 
                myCarsLatValr[27]="28.610132"; 

                var myCarsLangValr = new Array(); 

                myCarsLangValr[0] =  "77.234416";
                myCarsLangValr[1] =  "77.234392";
                myCarsLangValr[2] =  "77.234371";
                myCarsLangValr[3] =  "77.234347";
                myCarsLangValr[4] =  "77.234320";
                myCarsLangValr[5] =  "77.234298";
                myCarsLangValr[6] =  "77.234274";
                myCarsLangValr[7] =  "77.234253";
                myCarsLangValr[8] =  "77.234218"; 
                myCarsLangValr[9] =  "77.234218";  
                myCarsLangValr[10] =  "77.234172";
                myCarsLangValr[11] =  "77.234127";
                myCarsLangValr[12] =  "77.234084";
                myCarsLangValr[13] =  "77.234011";
                myCarsLangValr[14] =  "77.233931";   
                myCarsLangValr[15] =  "77.233842";   
                myCarsLangValr[16] =  "77.233738";
                myCarsLangValr[17] =  "77.233639";
                myCarsLangValr[18] =  "77.233572"; 
                myCarsLangValr[19] =  "77.233483"; 
                myCarsLangValr[20] =  "77.233405"; 
                myCarsLangValr[21] =  "77.233327"; 
                myCarsLangValr[22] =  "77.233199";  
                myCarsLangValr[23] =  "77.233086"; 
                myCarsLangValr[24] =  "77.232987"; 
                myCarsLangValr[25] =  "77.232885"; 
                myCarsLangValr[26] =  "77.232775"; 
                myCarsLangValr[27] =  "77.232681"; 

               var count=-1;  var count1=-1;
               var markersArray = []; var markersArray1 = [];

               for(gg in markersArray)  
               {
                  markersArray[gg].setMap(null);
               }
               markersArray.length = 0; 

               for(ggg in markersArray1)    
               {
                  markersArray1[ggg].setMap(null);
               }
               markersArray1.length = 0; 

      function initialize() 
      {
            var poly;
            var myLatlng = new google.maps.LatLng(myCarsLatVal[0],myCarsLangVal[0]);    
            var mapOptions = {
                    zoom: 20,
                    center: myLatlng,
                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                }
             var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

             // .... set polyline properties...
              var polyOptions = {
                strokeColor: '#000000',
                strokeOpacity: 1.0,
                strokeWeight: 3
              }

              poly = new google.maps.Polyline(polyOptions);
              poly.setMap(map);

                //setInterval(function(){count++; markersArray[count] = new google.maps.Marker({position: new google.maps.LatLng(myCarsLatVal[count],myCarsLangVal[count]),Icon :"<?php echo base_url();?>/images/taxi.png",map : map}); google.maps.event.addListener(markersArray[count], 'click', function() {infowindow.open(map,markersArray[count]);});},2000)
      // .......................
          setInterval(function(){DisplayTaxiMarker()}, 3000);
          function DisplayTaxiMarker()
          {
                  //................car1................
                  count++; 
                  markersArray[count] = 
                        new google.maps.Marker({position : new google.maps.LatLng(myCarsLatVal[count],myCarsLangVal[count]),
                                                Icon     :"<?php echo base_url();?>/images/taxi.png",                                       
                                                map      : map}); 

                /*                              
                  // poligon get...
                   var path = poly.getPath();

                  // Because path is an MVCArray, we can simply append a new coordinate
                  // and it will automatically appear
                    path.push(myCarsLatVal[count],myCarsLangVal[count]);

                 // Add a new marker at the new plotted point on the polyline.
                    var markersArray[count] = new google.maps.Marker({
                    position: (myCarsLatVal[count],myCarsLangVal[count]),
                    title: '#' + path.getLength(),
                    map: map
                  });                                               

                */                              

                  if(count >= 1)
                  {

                      markersArray[count-1].setMap(null); 
                  }
                  if(count == 28)
                  {
                        count = 0;  markersArray[28].setMap(null);
                  } 

                  google.maps.event.addListener(markersArray[count], 'click', function() {infowindow.open(map,markersArray[count]);});        
                  var infowindow = new google.maps.InfoWindow({
                     content: 'Vehicle No : DL 1R Y-1295  <br />'+ 'Latitude : ' +myCarsLatVal[count] + '<br /> Longitude : ' +myCarsLangVal[count] +'<br /> Driver Name : Ram Kumar <br /> Hemisphere : NE  <br /> Driver Mobile :<a href="tel:+8447264179">call 8447264179</a>' 
                   });

           // .......................car2..................  
              count1++; 
                  markersArray1[count1] = 
                        new google.maps.Marker({position : new google.maps.LatLng(myCarsLatValr[count1],myCarsLangValr[count1]),
                                                Icon     :"<?php echo base_url();?>/images/taxi1.png",                                      
                                                map      : map}); 
                  if(count1 >= 1)
                  {
                      markersArray1[count1-1].setMap(null); 
                  }
                  if(count1 == 28)
                  {
                        count1 = 0;  markersArray1[28].setMap(null);
                  } 

                 google.maps.event.addListener(markersArray1[count1], 'click', function() {infowindow1.open(map,markersArray1[count1]);});        
                  var infowindow1 = new google.maps.InfoWindow({
                     content: 'Vehicle No : DL 9P H-5205 <br />'+ 'Latitude : ' +myCarsLatValr[count1] + '<br /> Longitude : ' +myCarsLangValr[count1] +'<br /> Driver Name : Mahesh Kumar<br /> Hemisphere : SW  <br /> Driver Mobile : <a href="tel:+9304466524">call 9304466524 </a>'
                   });

        }
                //marker.setMap(map);
    }
    </script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas" style="width:100%; height:100%"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:09:57.387

[下面是一个示例](http://www.geocodezip.com/v3_animate_marker_directions.html)，它沿路线服务的折线对标记进行动画处理（因此它跟随道路）。

[这是您的页面的一个版本](http://www.geocodezip.com/v3_rahul_kumar_polyline.html)，它在标记移动时绘制折线。它最终会在 IE(8) 中发生堆栈溢出，但应该可以帮助您入门。

# python - 如何将 django 应用程序记录到数据库

> ID：11984679
> 
> 赞同：0
> 
> 时间：2012-08-16T09:52:37.173
> 
> 标签：python, database, django, logging

我只想问如何在 django 中记录我的应用程序发生的所有事情。我没有使用 django 管理员。相反，我创建了一个用于登录的应用程序和一个用于我的博客、评论、喜欢/不喜欢的应用程序。我如何记录所有这些，例如该用户在我的网站上登录的次数以及他/她停留的时间。她/他评论或喜欢多少次。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T05:15:25.670

你在这里问了几个不同的问题。

**用户登录多少次**

最简单的方法是在模型中有一个字段：

`login_count = models.PositiveIntegerField(default=0, editable=False)`

然后捕获[登录信号](https://docs.djangoproject.com/en/dev/topics/auth/#login-and-logout-signals)并增加该字段。

**他/她待了多少小时**

这很难做到。您可以捕捉到[注销信号](https://docs.djangoproject.com/en/dev/topics/auth/#login-and-logout-signals)，但这不是您知道人们离开的唯一方式。也许你可以使用一些花哨的 javascript 来测试它。

您还可以监控每个用户的每次点击并使用它。如果你真的想衡量这个，我会使用 Google Analytics 或其他现有的基于 javascript 的分析引擎。

**他们评论/喜欢多少次**

这很简单：

```
class Post(models.Model):
    # ...
    liked_by = models.ManyToManyField(User)

number_of_posts_liked_by_user = Post.objects.filter(liked_by__id=user_id).count() 
```

# vim - MacVim - 如何正确设置 vimdiff 以使用 SourceTree？

> ID：11984681
> 
> 赞同：3
> 
> 时间：2012-08-16T09:52:42.903
> 
> 标签：vim, version-control, macvim, vimdiff

我使用 MacVim 作为我的编辑器，使用 Atlassian SourceTree (v1.5.3) 作为我的 VCS 前端。我安装了 MacVim 的命令行帮助脚本`mvim`并`mvimdiff`正确符号链接。

我想`mvimdiff`在 SourceTree 中用作不同类型的 VCS 存储库（Git、Hg、SVN）的外部差异工具。

当通过 SourceTree “外部差异”处理文件/合并冲突时，两个差异窗口都是空的。

手动区分文件通过`mvimdiff file1 file2`正常工作。

这些是我在 SourceTree 中的设置：http: [//i.stack.imgur.com/2eQZD.png](http://i.stack.imgur.com/2eQZD.png)

如何设置 MacVim/gVim 以使用 SourceTree？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T21:31:14.267

您在 diff 配置中的设置几乎是正确的，您只需要进行一些调整以确保（例如）git 可以找到二进制文件。在 git docs 中，它声明二进制文件（在你的情况下`mvimdiff`）必须在你的路径中，或者给出它的完整路径。

这给你留下了两个选择，要么确保它`mvimdiff`存在于`/usr/local/bin`or （或 Mac 的*默认*`/usr/bin`路径上的某个其他位置），要么执行我刚刚完成和测试的操作：将脚本放在目录中的已知位置并参考它与（git支持的唯一扩展）一起存在。*`mvim``$HOME``~`*

 *所以，我在我的主文件夹中创建了一个名为`.bin`（用一个前导点将其从 Finder 中隐藏）的文件夹，然后将 mvim 脚本放在那里。然后在 SourceTree 中，我将“Diff 命令”设置为

```
~/.bin/mvim -d 
```

并且我设置了与您所拥有的类似的“参数”，但我将它们放在引号中以处理其中包含空格和其他特殊字符的文件，所以

```
"$LOCAL" "$REMOTE" 
```

注意：我没有使用`hg`or subversion 对此进行测试，但由于`svn`通过 支持`git-svn`，它也应该适用于该配置中的 subversion。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-29T23:45:17.587

您必须通过选项 -f 告诉 MacVim 不要分叉一个新进程，但似乎 SourceTree 没有正确传递参数。

因此，要使用 mvimdiff，只需将 mvim 复制为 mvimdiff（而不是符号链接）并将 mvimdiff 的最后但 3 行从

```
exec "$binary" -g $opts ${1:+"$@"} 
```

至

```
exec "$binary" -g -f $opts ${1:+"$@"} 
```*

# java - 如何为复杂情况自定义 JAXBContext Unmarshaller

> ID：11984683
> 
> 赞同：1
> 
> 时间：2012-08-16T09:52:49.833
> 
> 标签：java, xml, jaxb

我有关于将 XML 转换为 Java 对象的问题，在这里我使用 JAXB。
就我而言：

XML 数据：

```
<persons>
  <person>
     <name>Aris Tonar</name>
     <age />
     <nickname />
     <saldo />
  </person>
</persons> 
```

XML 数据的 JAVA 类：

```
public class Person{
   private String name;
   private Integer age;
   private String nickName;
   private Integer id;
   private Double saldo;

   /**
   *Setter and Getter
   */

} 
```

当我使用标准 JAXBContext Unmarshaller 代码将其解析为 Java 对象时。带代码：

```
JAXBContext context = JAXBContext.newInstance(Person.class.getPackage().getName());
Unmarshaller unmarshaller = context.createUnmarshaller();
JAXBElement element = (JAXBElement) unmarshaller.unmarshal(new StreamSource(new StringReader(stringOfXmlData.toString())));
Person obj = (Person) element.getValue(); 
```

它将给出结果：人名=“Aris Tonar”
人年龄=空
人昵称=“”
人ID=空
人萨尔多=空

但不是我想要的结果，我希望 JAXB 会给出结果：

人名 = "Aris Tonar"
人年龄 = 0
人昵称 = ""
人 id = null
人萨尔多 = 0

1.  我希望在 XML DATA 中声明的每个元素都将：如果它的值指定 jaxb 会将其解释为正常值（如 name 元素）但如果它的值未指定 jaxb 将其解释为默认值（如年龄、昵称、saldo 元素）
2.  如果元素未在 XML 数据中声明，则 jaxb 会将其解释为 null。（如 id 元素）

我是否可以这样做？可能与自定义 JAXBContext 代码有关？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T10:55:00.087

这有点麻烦，但您应该能够使用类型适配器实现您想要的：

```
public class Person{
   private String name;
   @XmlJavaTypeAdapter(IntegerZeroDefaultAdapter.class)
   @XmlSchemaType(name = "integer")
   private Integer age;
   private String nickName;
   private Integer id;
   @XmlJavaTypeAdapter(DoubleZeroDefaultAdapter.class)
   @XmlSchemaType(name = "double")
   private Double saldo;
   // ...    
}

public class IntegerZeroDefaultAdapter extends XmlAdapter<String, Integer> {
  public String marshal(Integer n) {
    return String.valueOf(n);
  }

  public Integer unmarshal(String val) {
    if(val == null) return null;
    else if("".equals(val)) return 0;
    else return Integer.valueOf(val);
  }
}

// likewise for DoubleZeroDefaultAdapter 
```

您不需要名称或昵称的适配器，除非您要使用的默认值不是空字符串 - 字符串值的默认值是缺少元素表示`null`，指定但为空的元素表示空字符串，请记住，在 XML`<nickname />`中完全等同于`<nickname></nickname>`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T11:12:30.883

```
@XmlType(name = "person", propOrder = {"name", "age", "nickName" , "saldo"})
public class Person {

private String name;
private Integer age;
private String nickName;
private Integer id;
private Double saldo;

public Person(String name, Integer age, String nickName, Integer id, Double saldo) {
  this.name = name;
  this.age = age;
  this.nickName = nickName;
  this.id = id;
  this.saldo = saldo;
}

public Person() {
  //jaxb constructor
}

@XmlElement(defaultValue="0")
public Integer getAge() {
  return age;
}

@XmlTransient
public Integer getId() {
  return id;
}

@XmlElement(defaultValue="")
public String getName() {
  return name;
}

@XmlElement(name="nickname" , defaultValue="")
public String getNickName() {
 return nickName;
}

@XmlElement(defaultValue="0")
public Double getSaldo() {
  return saldo;
}

public void setAge(Integer age) {
  this.age = age;
}

public void setId(Integer id) {
  this.id = id;
}

public void setName(String name) {
  this.name = name;
}

public void setNickName(String nickName) {
  this.nickName = nickName;
}

public void setSaldo(Double saldo) {
  this.saldo = saldo;
}

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T10:00:18.267

如果在声明成员时使用默认值实例化成员，则应该解决第一个问题。

尝试：

```
public class Person{
 private String name = "";
 private Integer age = 0;
 private String nickName; = ""
 private Integer id = 0;
 private Double saldo =0.0; 
```

hth，
麦克莱克斯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T10:08:21.087

我你使用 cxf-codegen-plugin，你可以（从 XSD/WSDL 开始）

1.  在数据模型的 XSD 中设置默认值（每种类型的“默认”关键字）
2.  使用插件的 cxf-xjc-dv 扩展来处理生成类的 getter 中的默认值。

例如，这将为您的字段年龄创建一个吸气剂，如下所示：

```
public Integer getAge() {
   if (age == null)
      return new Interger(0);
   return age;
} 
```

# python - 只显示一个记录行，删除以前的记录

> ID：11984684
> 
> 赞同：8
> 
> 时间：2012-08-16T09:52:52.523
> 
> 标签：python, logging, formatter

我有一个使用`logging`模块和`print`语句的程序。日志记录是为了通知用户程序在做什么，例如

```
logging.info("downloading HTML")
time.sleep(1)
logging.info("parsing HTML")
time.sleep(1)
print "the result" 
```

最后屏幕上的输出（混合标准输出和标准错误）将是：

```
INFO:downloading HTML
INFO:parsing HTML
the result 
```

我想在显示下一个日志输出或调用 print 时隐藏最后一个日志输出。比如启动程序，你会看到：

```
INFO:download HTML 
```

等待一秒钟，下一个信息`"parsing HTML"`将替换上一个`"downloading HTML"`，所以在屏幕上你只会看到：

```
INFO:parsing HTML 
```

之前没有别的，然后等待一秒钟，我只想在屏幕上看到：

```
"the result" 
```

我仅在登录 stderr 时才需要此功能，而不是在登录到文件时，例如，我想查看所有`logging`输出。

是否可以？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-16T11:45:09.623

在类 unix 终端上，您可以尝试在文本前添加[ANSI 转义序列；](http://www.paulschou.com/tools/ansi/escape.html)

```
import time
import sys

print 'this is a text',
sys.stdout.flush()

time.sleep(1)
print '\x1b[80D'+'\x1b[K'+'Second text',
sys.stdout.flush() 
```

字符 '\x1b' 是转义字符。第一个序列将光标向左移动最多 80 个位置。第二个清除线路。

您需要在 print 语句的末尾加上逗号，以防止它进入第二行。然后你需要刷新`stdout`流，否则文本不会出现。

**编辑：**为了将其与日志记录结合起来，将其包装在一个简单的函数中：

```
def mylog(text):
    logging.info(text)
    print '\x1b[80D' + '\x1b[K'+ text,
    sys.stdout.flush() 
```

**编辑 2：**将此集成到标准日志记录中；

```
import logging
# create console handler
ch = logging.StreamHandler()
# create formatter
formatter = logging.Formatter('\x1b[80D\x1b[1A\x1b[K%(message)s')
# add formatter to console handler
ch.setFormatter(formatter)
# add console handler to logger
logger.addHandler(ch) 
```

由于日志记录模块本身似乎添加了换行符，因此我添加了一个 ANSI 序列 (\x1b[1A) 来增加一行。

另请参阅[日志记录](http://docs.python.org/howto/logging.html)方法以获取更多信息。

# wcf - 从具有多个接收器的事务队列接收到 WCF MSMQ 重复消息

> ID：11984688
> 
> 赞同：2
> 
> 时间：2012-08-16T09:53:06.957
> 
> 标签：wcf, workflow-foundation-4, msmq, msdtc, distributed-transactions

我遇到了一个问题，即在极少数情况下，来自事务性 MSMQ 队列的消息被接收两次。

这是我的设置（3 个 Windows 2008 R2 x64 服务器）：

*   托管专用队列的 MSMQ 服务器。它们被配置为事务性的。
*   2 托管工作流 (WF4) 的服务器通过 WCF 从 MSMQ 服务器上的远程专用队列接收消息。
    *   每个队列有 2 个接收器，每个服务器 1 个接收器。我希望当一台服务器从队列中拉出一条消息时，该消息无法再次处理。
    *   以事务方式接收消息（TransactionScopeRequired = true）
    *   接收者的 netMsmqBinding 有`exactlyOnce="true"`
    *   每条收到的消息都会触发工作流实例的创建。我正在使用自定义 WorkflowHostingEndpoint，因此我可以根据消息的内容设置工作流 ID。

有时重复消息仅出现在其中一个服务器上，有时重复消息出现在两台服务器中的每一个上。这只发生在有大量消息要处理，并且总是在很短的时间范围内（通常 < 200 毫秒）内收到重复的消息时。

我可以检测到一条消息被接收了两次，因为每条消息都包含一个唯一的 GUID，它用作插入数据库的主键。当收到两次消息时，我在日志文件中看到主键违规错误。

我打开了 WCF 服务模型和消息跟踪，看到使用两个不同的分布式事务接收了两次消息。在这种情况下，这发生在同一台服务器上。

```
2012-08-16T08:31:18.4874394Z: Thread 210: Message Log Trace (message contains unique GUID 43df02cc-79c7-48ca-995f-175c22fb9e59)
2012-08-16T08:31:18.4874394Z: Thread 210: The transaction '69acc04f-4853-4680-bc13-3855f5b844d4:3782' was received for operation 'CreateWorkflow' from a transacted transport, such as MSMQ.
2012-08-16T08:31:18.6434444Z: Thread 207: Message Log Trace (message contains unique GUID 43df02cc-79c7-48ca-995f-175c22fb9e59)
2012-08-16T08:31:18.6434444Z: Thread 207: The transaction '69acc04f-4853-4680-bc13-3855f5b844d4:3789' was received for operation 'CreateWorkflow' from a transacted transport, such as MSMQ. 
```

什么会导致这种情况发生，我该如何防止这种情况发生？

**更新：**这是我用于发送消息的相关代码。我如何发送消息不应该影响接收消息的方式，对吧？是不是在发送方打开 TransactionScope 会在发送方和接收方之间创建分布式事务？这真的不是本意。

```
private static readonly ChannelFactory<IWorkflowCreation> _channelFactory = 
    new ChannelFactory<IWorkflowCreation>(new NetMsmqBinding(NetMsmqSecurityMode.None));

private void StartWorkflow(EndpointAddress address, WorkflowData data)
{
    using (var scope = new TransactionScope())
    {
        var client = _channelFactory.CreateChannel(address);
        using ((IClientChannel)client)
        {
            client.CreateWorkflow(data);
        }

        scope.Complete();
    }
 } 
```

# javascript - 如何在不刷新mvc3页面的情况下返回视图

> ID：11984694
> 
> 赞同：2
> 
> 时间：2012-08-16T09:53:48.193
> 
> 标签：javascript, ajax, asp.net-mvc

```
@using (Html.BeginForm("Index", "HRBankInfo", FormMethod.Get))
{
    <div align="center" class="display-label">
    @ViewBag.message
    <br /><input type="submit" value="Ok" />
    </div>

} 
```

这是我在操作成功时出现的部分视图之一。它刷新页面并加载索引页面我想更新页面而不重新加载整个页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:37:35.710

试试这个：

```
<script type="text/javascript">
$('#buttonId').live('click', function (e) {
    e.preventDefault();
    $(this).closest('#divid').dialog('close');
});
</script> 
```

# java - 带有 JodaTime 的 TimeString 的 FormatterPattern

> ID：11984703
> 
> 赞同：0
> 
> 时间：2012-08-16T09:54:07.313
> 
> 标签：java, jodatime

我正在尝试为给定的包含时间的字符串找到正确的模式。

这是我的字符串和我最近尝试的模式：

```
String time = "Sun Jul 01 2012 11:25:57 GMT+0200 (CEST)";
DateTimeFormatter formatter = DateTimeFormat.forPattern("EEE MMM dd yyyy HH:mm:ss 'GMT'ZZ '(CEST)'");
DateTime date = formatter.parseDateTime(time); 
```

我阅读了有关使用哪些字符的文档，但我仍然不完全清楚如何匹配给定的时间字符串。

如果你们中的一个人能帮我解决这个问题，那就太棒了！

这是我得到的例外：

```
Exception in thread "main" java.lang.IllegalArgumentException: Invalid format: "Sun Jul 01 2012 11:25:57 GMT+020..."
    at org.joda.time.format.DateTimeFormatter.parseDateTime(DateTimeFormatter.java:866)
    at Main.main(Main.java:10) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:13:26.287

AFAIK jodatime 无法解析时区名称，因为它们不明确。您可以使用以下模式解析您的字符串：

```
"EE MMM dd yyyy HH:mm:ss 'GMT'ZZ '(CEST)'" 
```

这会跳过时区名称，这应该没问题，因为您也有时区偏移量（+0200）。

# c# - c#中的随机数生成器

> ID：11984709
> 
> 赞同：-4
> 
> 时间：2012-08-16T09:54:11.167
> 
> 标签：c#

我需要两个函数。一个会生成随机偶数，第二个会生成随机奇数。c# 中有内置函数吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T09:58:54.380

如果您对分布没有任何特殊要求，可以使用常规的随机 C# 函数：

```
Random rnd = new Random();
            rnd.Next(int.MaxValue/2)*2; // an even integer
            rnd.Next(int.MaxValue/2)*2+1; // an odd integer 
```

**注意** 您可能会相应地调整最小/最大范围以避免溢出并保持在您的范围内。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T09:59:01.950

你可以这样做：

```
private static int RandomNumberEven(int min, int max)
        {
            Random random = new Random();
            int ans = random.Next(min, max);
            if (ans % 2 == 0) return ans;
            else
            {
                if (ans + 1 <= max)
                    return ans + 1;
                else if (ans - 1 >= min)
                    return ans - 1;
                else return 0;
            }
        }

private static int RandomNumberOdd(int min, int max)
        {
            Random random = new Random();
            int ans = random.Next(min, max);
            if (ans % 2 == 1) return ans;
            else
            {
                if (ans + 1 <= max)
                    return ans + 1;
                else if (ans - 1 >= min)
                    return ans - 1;
                else return 0;
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T10:10:03.713

用这个

（我假设你需要 10 个奇数和 10 个偶数）

```
Random r = new Random();

List<int> even = new List<int>();
List<int> odd = new List<int>();

while(even.Count < 10 || odd.Count < 10)
{
    int i = r.Next();
    if(i % 2 == 0)
    {
        if(!even.Contains(i) && even.Count < 10)
            even.Add(i);
    }
    else
    {
        if(!odd.Contains(i) && odd.Count < 10)
            odd.Add(i);
    }
} 
```

# php - 从PHP中的函数中的foreach检索多个值（不是固定数量的值）

> ID：11984710
> 
> 赞同：0
> 
> 时间：2012-08-16T09:54:11.243
> 
> 标签：php, mysql, html

```
//this is my code from class.php
class Functions
{    
function getUsers($sex)
{
    $stmt = $pdo->prepare('SELECT lname,fname from users WHERE gender = :gender');
    $stmt->execute(array(':gender'=>$sex));

    foreach($stmt as $row)
    {
        echo $row['lname'].'-'.$row['fname'];
        //this is what i think but i don't need to echo because the echo must be in index.php.What is the right way?
    }
}
$function = new Functions();
}

//this is for my index.php
include 'class.php'
$function->getUsers($gender);

//this is what i think but it is probably wrong or incomplete.
foreach(what should i put here?)
{
   echo '<li>' names should be here? '</li>'
}
//the output should get all the user based on the gender :( 
```

问题：我如何从我的函数中检索值，因为它的值来自 foreach 并且值的数量不固定？提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T10:00:54.273

您应该从 getUsers 返回用户，然后循环它们以显示在 index.php

```
 //this is my code from class.php
class Functions
{    
function getUsers($sex)
{
    $stmt = $pdo->prepare('SELECT lname,fname from users WHERE gender = :gender');
    $stmt->execute(array(':gender'=>$sex));
  if(is_array($stmt)){
    return $stmt;
  }else{
    return false; 
  }
}

}

//this is for my index.php
include 'class.php'
$function = new Functions();
$gender = "male"
$users =  $function->getUsers($gender);
if($users){
foreach($users as $row)
{
      echo '<li>' . $row['lname'].'-'.$row['fname'] . '</li>'  
}         

}else{
     echo "no users!";
   }
    //the output should get all the user based on the gender :( 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T10:10:30.827

```
//this is my code from class.php
class Functions {
    function getUsers($sex) {
        $stmt = $pdo - > prepare('SELECT lname,fname from users WHERE gender = :gender');
        $stmt - > execute(array(':gender' = > $sex));

        foreach($stmt as $row) {
            $names[] = $row['lname'].'-'.$row['fname'];
            //this is what i think but i don't need to echo because the echo must be in index.php.What is the right way?
        }
        return $names;
    } 
}

//this is for my index.php
include 'class.php'
$function = new Functions();
$names = $function->getUsers($gender);

//this is what i think but it is probably wrong or incomplete.
foreach($names as $name) {
    echo '<li>'.$name.'</li>'
}
//the output should get all the user based on the gender :(

//y u discriminate? just kidding.. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T10:08:33.853

您可以将所有值保存在一个数组中并返回该数组

```
class Functions
    {    
    function getUsers($sex)
    {
        $stmt = $pdo->prepare('SELECT lname,fname from users WHERE gender = :gender');
        $stmt->execute(array(':gender'=>$sex));

        foreach($stmt as $row)
        {
            $userdetails[] = $row['lname'].'-'.$row['fname'];
            //this is what i think but i don't need to echo because the echo must be in index.php.What is the right way?
        }
    return $userdetails;
    }

    } 
```

我在你的代码中发现的另一个错误是，如果你想创建一个类的实例，它应该在类之外声明

```
$function = new Functions(); 
```

# iphone - 如何使用 Bit.ly 缩短自定义 url？

> ID：11984715
> 
> 赞同：0
> 
> 时间：2012-08-16T09:54:19.987
> 
> 标签：iphone, ios

我知道如何使用 Bit.ly 缩短网址。我搜索了如何使用 Bit.ly 缩短自定义网址（如 tel://8004664411），但我没有找到方法。谁能给我一些有关此的信息.

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:59:32.630

您可以从[bitly API Documentation](http://dev.bitly.com/get_started.html)开始。有关于他们服务的请求/响应格式的文档。您需要发出 JSON 请求并获得带有结果的响应。如果你不知道怎么做，你可以从[NSURLConnection Class Reference](http://developer.apple.com/library/ios/#documentation/cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html)开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:41:17.623

//。H

```
#import <Foundation/Foundation.h>

@protocol BitlyShortUrlDelegate <NSObject>

- (void)BitlyShortUrlSucceededWithShortUrl:(NSString *)shortUrl;
- (void)BitlyShortUrlFailedWithError:(NSError *)error;

@end

@interface BitlyShortUrl : NSObject

@property (nonatomic, strong) NSURLConnection *connection;
@property (nonatomic, strong) NSMutableData *data;
@property (unsafe_unretained) id<BitlyShortUrlDelegate> delegate;

- (id)initWithDelegate:(id)del;
- (void)bitlyUrl:(NSString *)longUrl;

@end 
```

//.m

```
#import "BitlyShortUrl.h"

#define BITLY_LOGIN     @"YOUR_USERNAME"
#define BITLY_APIKEY    @"YOUR_APIKEY"
#define BITLY_URL       @"http://api.bit.ly/v3/shorten?format=txt&longurl=%@&apikey=%@&login=%@"

@interface BitlyShortUrl ()

- (NSString *)encodeURL:(NSString *)url;

@end

@implementation BitlyShortUrl

@synthesize connection = _connection;
@synthesize data = _data;
@synthesize delegate;

- (id)initWithDelegate:(id)del {
    if((self = [super init])) {
        NSMutableData *mData = [NSMutableData new];
        [self setData:mData];
        [mData release];
        [self setDelegate:del];
    }

    return self;
}

- (void)bitlyUrl:(NSString *)longUrl {
    if (nil == [self connection]) {
        NSString *encodedUrl = [self encodeURL:longUrl];
        NSString *endPoint = [NSString stringWithFormat:BITLY_URL, encodedUrl, BITLY_APIKEY, BITLY_LOGIN];
        NSMutableURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:endPoint]];

        [NSURLConnection connectionWithRequest:request delegate:self];
    }
}

- (NSString *)encodeURL:(NSString *)url {
    NSString * encoded = (NSString *)CFURLCreateStringByAddingPercentEscapes(
                                                                             NULL,
                                                                             (CFStringRef)url,
                                                                             NULL,
                                                                             (CFStringRef)@"!*'();:@&=+$,/?%#[]",
                                                                             kCFStringEncodingUTF8);
    return [encoded autorelease];
}

- (void)dealloc {
    [self setConnection:nil];
    [self setData:nil];
    [self setDelegate:nil];

    [super dealloc];
}

#pragma mark - NSURLConnectionDelegate

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    [[self data] appendData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    if([self delegate] != nil && [[self delegate] respondsToSelector:@selector(BitlyShortUrlSucceededWithShortUrl:)]) {
        NSString *shortUrl = [[NSString alloc] initWithData:[self data] encoding:NSUTF8StringEncoding];
        [[self delegate] BitlyShortUrlSucceededWithShortUrl:[shortUrl autorelease]];
    }

    [self setConnection:nil];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    if([self delegate] != nil && [[self delegate] respondsToSelector:@selector(BitlyShortUrlFailedWithError:)]) {
        [[self delegate] BitlyShortUrlFailedWithError:error];
    }

    [self setConnection:nil];
}

#pragma mark -

@end 
```

// 示例（在您的 .h 文件中实现委托）

```
BitlyShortUrl *yourUrl = [[BitlyShortUrl alloc] initWithDelegate:self];
[yourUrl bitlyUrl:@"http://www.google.com"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T12:57:06.890

此代码转换任何方案

```
+ (NSString *)getTinyURL:(NSString *)url {
    NSString * encodedUrl = (NSString *)CFURLCreateStringByAddingPercentEscapes(
                                                                             NULL,
                                                                             (CFStringRef)url,
                                                                             NULL,
                                                                             (CFStringRef)@"!*'();:@&=+$,/?%#[]",
                                                                             kCFStringEncodingUTF8);

    NSURL *tinyUrl = [NSURL URLWithString: [NSString stringWithFormat:@"http://tinyurl.com/api-create.php?url=%@", encodedUrl]];
    NSString *link = [NSString stringWithContentsOfURL:tinyUrl encoding:NSASCIIStringEncoding error:nil];
    return link;
} 
```

# python - Python Amazon Product API Constant socket.timeout errors

> ID：11984724
> 
> 赞同：0
> 
> 时间：2012-08-16T09:54:51.103
> 
> 标签：python, networking, amazon-product-api

I'm using the Amazon product API for Python, and I'm constantly getting errors like:

```
File "/usr/local/lib/python2.7/dist-packages/amazonproduct/paginators.py", line 47, in __iter__
    yield self.page(self.current + 1) 
  File "/usr/local/lib/python2.7/dist-packages/amazonproduct/paginators.py", line 54, in page
    root = self.fun(*self.args, **self.kwargs)
  File "/usr/local/lib/python2.7/dist-packages/amazonproduct/paginators.py", line 75, in <lambda>
    method = lambda *a, **b: fnc(api, *a, **b)
  File "/usr/local/lib/python2.7/dist-packages/amazonproduct/api.py", line 360, in item_search
    SearchIndex=search_index, **params)
  File "/usr/local/lib/python2.7/dist-packages/amazonproduct/api.py", line 281, in call
    fp = self._fetch(url)
  File "/usr/local/lib/python2.7/dist-packages/amazonproduct/contrib/retry.py", line 38, in _fetch
    return API._fetch(self, url)
  File "/usr/local/lib/python2.7/dist-packages/amazonproduct/api.py", line 208, in _fetch
    response = opener.open(request)
  File "/usr/lib/python2.7/urllib2.py", line 400, in open
    response = self._open(req, data)
  File "/usr/lib/python2.7/urllib2.py", line 418, in _open
    '_open', req)
  File "/usr/lib/python2.7/urllib2.py", line 378, in _call_chain
    result = func(*args)
  File "/usr/lib/python2.7/urllib2.py", line 1207, in http_open
    return self.do_open(httplib.HTTPConnection, req)
  File "/usr/lib/python2.7/urllib2.py", line 1180, in do_open
    r = h.getresponse(buffering=True)
  File "/usr/lib/python2.7/httplib.py", line 1030, in getresponse
    response.begin()
  File "/usr/lib/python2.7/httplib.py", line 407, in begin
    version, status, reason = self._read_status()
  File "/usr/lib/python2.7/httplib.py", line 365, in _read_status
    line = self.fp.readline()
  File "/usr/lib/python2.7/socket.py", line 447, in readline
    data = self._sock.recv(self._rbufsize)
socket.timeout: timed out 
```

What does this mean and how can I fix it? Does it just mean Amazon is temporarily blocking me? (my script performs constant API calls) If I restart the script it runs for a bit, but then it stops again.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:06:56.670

Check out paragraph 4p of the API term of services: [https://affiliate-program.amazon.com/gp/advertising/api/detail/agreement.html](https://affiliate-program.amazon.com/gp/advertising/api/detail/agreement.html)

You are not allowed to make more than 1 request per second. As you are doing "constant API calls" you might indeed be blocked.

Cheers

# perl - perl 脚本错误：无法执行“模块”：./prog 第 2 行没有这样的文件或目录

> ID：11984725
> 
> 赞同：-3
> 
> 时间：2012-08-16T09:54:54.537
> 
> 标签：perl

我需要在环境中添加一个 openssl。这在命令行中是通过命令 "module add openssl" 完成的。但是这个命令在 perl 中给出了一个错误

我的程序：

```
#!perl -w

system ('module add openssl'); 
```

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2012-08-16T10:03:11.343

来自[系统的 Perl 文档](http://perldoc.perl.org/functions/system.html)：

> 如果参数中没有 shell 元字符，则将其拆分为单词并直接传递给 execvp。

因此，您的命令作为三个单独的命令传入。尝试在它周围加上引号作为开始。IE

`system ('"module add openssl"');`

如果这不能解决它，它仍然可能与在 shell 中运行某些东西和直接使用`exec`.

将来，最好分享有关您遇到的确切错误的信息。

# iphone - 如何在 iphone 中维护多个日志记录级别？

> ID：11984728
> 
> 赞同：1
> 
> 时间：2012-08-16T09:55:12.467
> 
> 标签：iphone, ios, ios5, logging

一个日志库，用于从应用程序捕获日志并将它们推送到 Some Network 中托管的服务。该代码既可以用作库，也可以作为另一个类合并到应用程序中。在任何时候，整个应用程序中都应该只有一个该记录器的实例可用。这个 api 应该让用户指定日志记录级别。有多个日志记录级别——“PROD”、“DEBUG”和“INFO”。如果没有指定日志级别，则应假定为“INFO”级别。每个日志字符串应具有以下格式：

[日志级别][空格][时间戳][空格][发送日志的类的名称][空格][日志语句的行号][空格][任何消息][空格][空格分隔的参数列表]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:46:32.810

如果仅用于开发，我想知道您为什么要将其发送到某个服务器？您可以登录并查看控制台（XCode Organzier、设备、设备日志）。即使稍后您没有将 iPhone/iPad 连接到 Mac，您使用 NSLog 编写的日志仍然可用。

有用于objective-c的日志库。你可以谷歌他们。但我怀疑是否有一个将日志发送到服务器。你必须自己做。虽然这不是很困难。NSURLConnections 可以做到。但是，如果这是一个通过应用商店销售的应用，我想你必须关闭所有日志记录，只在开发过程中使用它，因为我不希望我的应用通过无线和互联网将所有类型的数据发送到某个服务器.

# java - 多个会话工厂/事务管理器/事务模板的问题 - Spring/Hibernate

> ID：11984729
> 
> 赞同：0
> 
> 时间：2012-08-16T09:55:20.363
> 
> 标签：java, spring, hibernate

我们有一个案例，我们需要为同一个数据源定义 2 个会话工厂。在其中一个会话工厂中，我配置了 jdbc 批处理，而另一个没有。这是 spring.xml 的样子，如下所示。我想保持会话工厂不同，因为在某些情况下我们想要休眠批处理，而在其他情况下我们不需要。

```
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
  ..datasource props here...       
</bean>

<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource"/>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">${hibernate.dialect}</prop>
            <prop key="show_sql">${show_sql}</prop>
        </props>
    </property>
    <property name="packagesToScan">
        <list>
            ..packages here....
        </list>
    </property>
</bean>

<bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory"/>
</bean>

<bean id="transactionTemplate" class="org.springframework.transaction.support.TransactionTemplate">
    <property name="transactionManager" ref="transactionManager"/>
</bean>

<bean id="alwaysNewTransactionTemplate" class="org.springframework.transaction.support.TransactionTemplate">
    <property name="transactionManager" ref="transactionManager"/>
    <property name="propagationBehaviorName" value="PROPAGATION_REQUIRES_NEW"/>
</bean>

<tx:annotation-driven/>

<bean id="sessionFactoryForBatching" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource"/>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">${hibernate.dialect}</prop>
            <prop key="show_sql">${show_sql}</prop>
            <prop key="hibernate.jdbc.batch_size">${jdbc.batchSize}</prop>
            <prop key="hibernate.order_inserts">true</prop>
            <prop key="hibernate.order_updates">true</prop>
        </props>
    </property>
    <property name="packagesToScan">
        <list>
            ..same packages here..
        </list>
    </property>
</bean>

<bean id="transactionManagerForBatching" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactoryForBatching"/>
    <qualifier value="txManagerBatch"/>
</bean>

<bean id="transactionTemplateForBatching" class="org.springframework.transaction.support.TransactionTemplate">
    <property name="transactionManager" ref="transactionManagerForBatching"/>
</bean>

<bean id="alwaysNewTransactionTemplateForBatching" class="org.springframework.transaction.support.TransactionTemplate">
    <property name="transactionManager" ref="transactionManagerForBatching"/>
    <property name="propagationBehaviorName" value="PROPAGATION_REQUIRES_NEW"/>
    <qualifier value="txnTemplateWithBatching"/>
</bean> 
```

在代码中，我将方法标记为

```
@Transactional("txManagerBatch")
public void method(){

    // stuff happens here where we got to the database to get stuff

    txnTemplate..execute(new TransactionCallback<Integer>() {
        @Override
        public Integer doInTransaction(TransactionStatus transactionStatus) {
            //stuff here that happens in the inner transaction
        }
    });

    //stuff happens here where we update the database    
} 
```

在这个配置中，当方法执行时，我们得到一个 session not found 异常。有谁知道为什么？我们使用 spring 3.1.1 和 hibernate 4.0.1

# .htaccess - 禁止访问除 2 个目录和 index.php 中的文件之外的所有文件

> ID：11984734
> 
> 赞同：0
> 
> 时间：2012-08-16T09:55:29.890
> 
> 标签：.htaccess

目前我有这个：

```
<Files *.php>
  Order Deny,Allow
  Deny from all 
</Files>

<Files index.php>
  Order Allow,Deny
  Allow from all
</Files> 
```

除了 index.php，我怎样才能允许每个人访问其他两个目录中的文件？

文件结构是这样的：

```
<dir1>
<dir2>
<dir3>
index.php 
```

只有 index.php, `<dir1>`, `<dir2`（其中的所有文件）应该对所有访问者可见

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:41:53.803

您可以使用 mod_rewrite（[请参阅此处的文档](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)），将这些行添加到您的 .htaccess 文件中：

```
RewriteEngine on
RewriteCond %{REQUEST_URI} !^(dir1|dir2)/ [OR]
RewriteCond %{REQUEST_URI} !^index.php$
RewriteRule .* - [F] 
```

如果有人试图访问不在 dir1 或 dir2 或 index.php 文件中的文件，这将引发 403 禁止错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T17:57:37.000

在其中创建一个 htaccess 文件`<dir3>`并将其放入其中：

```
Order Deny,Allow
Deny from all 
```

# android - 如何从编辑文本中强制失去焦点？

> ID：11984743
> 
> 赞同：2
> 
> 时间：2012-08-16T09:56:10.410
> 
> 标签：android, focus, android-edittext

嗨，我的屏幕上有两个编辑文本框。我仅在编辑文本获得焦点时启用横向支持。并在用户按下软键盘上的完成按钮时禁用相同的功能。用户在第一个编辑文本中输入值并按下一步按钮。然后在第二个编辑文本中输入值并按“完成”按钮。我想做的一件事是需要强制失去第二个edittext的焦点。我尝试了clearFocus（）和button.requestFocus（）但没有帮助。下面是我的代码片段。

```
@Override
public boolean onEditorAction(TextView view, int actionId, KeyEvent event) {
    if (actionId == EditorInfo.IME_ACTION_SEND
            || actionId == EditorInfo.IME_ACTION_DONE
            || actionId == EditorInfo.IME_ACTION_GO
            || event.getKeyCode() == KeyEvent.KEYCODE_ENTER) {

    ((Activity) context).setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
     InputMethodManager imm = (InputMethodManager) context
               .getSystemService(Context.INPUT_METHOD_SERVICE);
     if (imm != null) 
     imm.hideSoftInputFromWindow(view.getWindowToken(), 0);

     return true;
    }
    return false;
}
@Override
public void onFocusChange(View v, boolean hasFocus) {
    if(hasFocus)
    ((Activity) context).setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR);
} 
```

如果用户单击第二个编辑文本，则单击“完成”按钮后，控件不会进入 onFocusChange 事件。请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:35:01.823

按照[这个](https://stackoverflow.com/questions/1555109/stop-edittext-from-gaining-focus-at-activity-startup)问题的公认答案。当您在 OnEditorAction 方法中完成处理时，只需将焦点设置到该虚拟布局

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:37:58.723

如果我理解正确，您想在按下“完成”按钮时关闭键盘吗？如果是这样，请尝试将此行添加到其`onClickListener`：

```
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

# lisp - LISP - 小数点后的数字

> ID：11984746
> 
> 赞同：7
> 
> 时间：2012-08-16T09:56:12.593
> 
> 标签：lisp, common-lisp, number-formatting

有谁知道如何在 Lisp 中为浮点数指定小数点后的位数？

假设我在 REPL 上打印此命令：

```
CL-USER 3 > (format t "~,15f" (float (/ 1 7))) 
```

我得到：

```
0.142857150000000 
```

但是数字在小数点后第8位四舍五入，我需要查看小数点后的很多数字才能查看数字是否循环并计算周期。（实际上我开始尝试解决 Project Euler 的问题 26）。

我需要得到这样的东西：

```
CL-USER 3 > (format t "~,15f" (float (/ 1 7)))
0.142857142857142857142857142857142857.... 
```

谢谢，

卢卡

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-16T10:21:55.683

Common Lisp 在其标准中没有任意精确的浮点数。

Common Lisp 在标准中定义了四种浮点类型：`SHORT-FLOAT`, `SINGLE-FLOAT`, `DOUBLE-FLOAT`, `LONG-FLOAT`。

您可以使用该函数将比率强制为浮点数`COERCE`（LispWorks 中的示例）：

```
CL-USER 1 > (coerce (/ 1 7) 'double-float)
0.14285714285714285D0 
```

或作为`LONG-FLOAT`CLISP 中的

```
[1]> (coerce (/ 1 7) 'long-float)
0.14285714285714285714L0 
```

要使用更长的浮点数进行计算，您需要对 Common Lisp 进行扩展。[GNU CLISP](https://www.gnu.org/software/clisp/)有一个不可移植的扩展，可以设置（二进制）位数：

[`(SETF (EXT:LONG-FLOAT-DIGITS) n)`](http://www.clisp.org/impnotes/num-concepts.html#lfd)

例子：

```
[3]> (SETF (EXT:LONG-FLOAT-DIGITS) 1000)    
1000
[4]> (coerce (/ 1 7) 'long-float)
0.142857142857142857142857142857142857142857142857142857
142857142857142857142857142857142857142857142857142857
142857142857142857142857142857142857142857142857142857
142857142857142857142857142857142857142857142857142857
142857142857142857142857142857142857142857142857142857
142857142857142857142857142857142857143L0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T17:19:55.070

除了 Rainer 的出色回答之外，我认为您还想查看函数[RATIONALIZE](http://www.lispworks.com/documentation/HyperSpec/Body/f_ration.htm)：

```
(rationalize (float 1/7))
1/7 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-18T08:44:38.320

您也可以手动进行除法，在这种情况下您仍然需要比 long long long 更长的值（已知对于某些编译器来说太长了；）像这样：

```
(defun divide (a b &key (precision 8))
  (let ((fractional 0))
    (multiple-value-bind (whole reminder)
        (floor a b)
      (unless (zerop reminder)
        (dotimes (i precision)
          (setf reminder (* reminder 10))
          (multiple-value-bind (quot rem)
              (floor reminder b)
            (setf fractional (+ (* fractional 10) quot))
            (when (zerop rem) (return))
            (setf reminder rem))))
      (values whole fractional))))

(multiple-value-call #'format t "~d.~d~&" (divide 1 7))
(multiple-value-call #'format t "~d.~d~&" (divide 1 7 :precision 54))

;; 0.14285714
;; 0.142857142857142857142857142857142857142857142857142857 
```

可能有更有效的方法来计算小数部分，但它们太复杂了（对我来说，对于这个例子来说也是如此）。

# c# - ListView 和 Messagebox 奇怪的错误？

> ID：11984749
> 
> 赞同：2
> 
> 时间：2012-08-16T09:56:26.017
> 
> 标签：c#, winforms, listview, messagebox

我有一个使用 ListView 的项目。用户可以从列表视图中选择一些东西（它在详细信息模式下设置） - 并且在某些情况下会出现一个消息框，要求确认是/否。确认代码不会以任何方式修改 ListView 或选择。该代码位于 SelectedIndexChanged 事件处理程序中。

问题是这样的——当我做出一个创建弹出窗口的选择时——程序最初按预期工作。当我将鼠标移回列表视图时，它会导致选择更改为鼠标下方的符号（无需单击） - 就好像“HoverSelect”已打开（当它未打开时）。这只发生在我做出涉及弹出消息框的选择之后。

考虑到我弄坏了一些东西，我决定写一个简单的测试。我创建了一个带有硬编码值的列表视图并输入了以下代码：

```
 private void listView1_SelectedIndexChanged(object sender, EventArgs e)
      {

            listView1.Enabled = false;
            MessageBox.Show("Test");
            listView1.Enabled = true;

      } 
```

当我做出选择时 - 事件被触发两次。我不确定它是否与我原来的问题有关，或者只是另一个巧合。

补充：在我上面的测试示例中 - 发生以下情况：

第一次选择 - “测试” 第二次选择 - “测试” “测试” 第三... N - “测试” “测试”

所以我认为这是我主要问题的另一个方面。删除代码以禁用/启用列表视图并没有什么不同。

如何让 MessageBox 和 ListView 互相“玩得很好”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:04:27.320

快速开始并立即复制它，这是一个棘手的问题。我可以向您展示一个解决方案，它不是很好，但它有效。您需要在 MessageBox 上使用第二种形式，然后返回禁用/启用列表视图。

```
private void listView1_SelectedIndexChanged(object sender, EventArgs e)
{
    if (listView1.Enabled)
    {
        listView1.Enabled = false;
        Form2 confirm = new Form2();
        confirm.FormClosed += new FormClosedEventHandler(confirm_FormClosed);
        confirm.Show();
    }
}

void confirm_FormClosed(object sender, FormClosedEventArgs e)
{
    listView1.Enabled = true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T11:55:56.187

SelectedIndexChanged 事件触发两次，因为它的行为是设计使然。

> 当用户选择一个项目而不按 CTRL 来执行多选时，控件首先清除先前的选择。在这种情况下，该事件对先前选择的每个项目发生一次，对新选择的项目发生一次。

有关更多信息，请查看[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.selectedindexchanged%28v=vs.110%29.aspx)。

我无法重现您的悬停问题，但您可以尝试仅显示一次消息框（仅在您不使用多选时有效）

```
private void listView1_SelectedIndexChanged(object sender, EventArgs e)
{
    if (listView1.SelectedItems.Count > 0)
    {
        MessageBox.Show("Test");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T10:06:36.523

设置[`ListView.HideSelection`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.hideselection.aspx)为`false`。

> **`ListView.HideSelection`**: 获取或设置一个值，该值指示当控件失去焦点时控件中的选定项是否保持突出显示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T10:09:38.723

前几天我遇到了类似的问题，在执行将焦点从`ListView`. 在我的情况下，单击`ListViewItem`更新的 UI 的另一部分，这使得`ListView`失去焦点并且不快乐。

我的解决方案是执行以下操作 - 添加以下方法：

```
private bool AllowToLoseFocus = true;

private void MyListView_Leave(object sender, EventArgs e)
{
   if(!AllowToLoseFocus)
        MyListView.Focus();
}

private void MyListView_ItemSelectionChanged(object sender, ListViewItemSelectionChangedEventArgs e)
{
    AllowToLoseFocus = false;
    //do stuff here
    AllowToLoseFocus = true;
} 
```

也许不是最整洁的解决方案，也可能不适用于您的情况……但值得一试！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T10:36:20.727

我想我解决了你的问题：

```
private void listView1_ItemSelectionChanged(object sender, ListViewItemSelectionChangedEventArgs e)
    {
        if (e.IsSelected)
        {
            if (!e.Item.Selected)
            {
                e.Item.Selected = false;
            }
            MessageBox.Show("test");
        }
    } 
```

# regex - 正则表达式替换：混淆电话号码

> ID：11984751
> 
> 赞同：1
> 
> 时间：2012-08-16T09:56:40.807
> 
> 标签：regex, validation

我一直在尝试创建一个混淆电话号码的正则表达式，但遇到了一些麻烦。

假设我有电话号码

```
123-1231234
123 1231234
123-123 12 12
01555555 
```

我不想在第一个 - 或空格之后用 X 替换数字，所以结果是

```
123-XXXXXXX
123 XXXXXX
123-XXX XX XX
015XXXXXXX (if there's no whitespace or - then everything after 3rd digit). 
```

但是在正则表达式方面很差并且经过了很大的努力，我想出了这个表达式 (-(\d+))|(\s(\d+)) 但它只给了我像 123X 这样的结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:31:02.093

```
/([0-9]{3})([0-9 -.]{3,})/g 
```

我会匹配 2 件（前 3 个字符，然后是其余的数字），然后用您使用的任何语言将后者替换为 x。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:58:17.647

这是一种在 perl 中执行此操作的方法：

```
use strict;
use warnings;

while(<DATA>) {
    chomp;
    my ($begin, $end) = $_ =~ /^(\d{3}-?)(.*)$/;
    $end =~ s/\d/X/g;
    print $begin . $end, "\n";
}

__DATA__
123-1231234
123 1231234
123-123 12 12
0155555555 
```

**输出：**

```
123-XXXXXXX
123 XXXXXXX
123-XXX XX XX
015XXXXXXX 
```

# java - java - 如何在Java observable（MVC）中观察同一类的多个数据？

> ID：11984753
> 
> 赞同：2
> 
> 时间：2012-08-16T09:56:43.870
> 
> 标签：java, model-view-controller, observable

这是我想到的2个选项。

1.  有多个模型，每个模型代表一个类。如果我有 2 个 int 对象，我需要创建 2 个 observable 并查看哪些 observable 已更改。

2.  在单个 observable（模型）中，将同一类的多个对象分组到 Array 中。在视图中，我将不得不迭代数组并更改包含数组中所有数据的所有字段。

我开始学习如何使用java observable 和observer 来实现MVC 模式。我发现我提到的两种方法不是最好的解决方案。希望能在这方面得到一些帮助。

**编辑：** 例如，我在 observable 类中有以下方法，有人可以告诉我如何在观察者中编写 update() 来获取 int b 的值吗？

```
public void setIntA(int a){
     this.intA = a;
     setChanged();
     notifyObservers(a);
}
public void setIntB(int b){
     this.intB = b;
     setChanged();
     notifyObservers(b);
}
setIntA(5);
setIntB(3); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:22:20.223

我不确定您在这里要做什么，但是如果您有一个扩展 Observable 的类，那么它可以出于多种原因触发更改事件。如果您只想在任何值更改时通知观察者，那么您只需要在 setter 中调用 setChanged() 和 notifyObservers() 即可。就像 Thilo 所说，您可以将更改的内容作为 notifyObservers() 的参数传递；

```
public void setIntA(int a){
     this.intA = a;
     setChanged();
     notifyObservers(a);
} 
```

我建议您确保彻底阅读[Javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Observable.html)，以便更好地理解 Observer 和 Observable。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-26T08:09:48.363

在 Observer 类上创建两个对 a 和 be 的引用，您可以像这样使用更新命令。

```
public void update(Observable o, Object arg)
{
  if (o == a)
  {
     //do what you want with arg
  }
} 
```

# android - 检查android中的网络连接

> ID：11984758
> 
> 赞同：3
> 
> 时间：2012-08-16T09:57:22.227
> 
> 标签：android

如何在android手机中检查网络是否连接..（网络意味着没有互联网连接，其简单的移动网络如IDEA，AIRTEL等......）请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:00:48.317

好的，所以您只想检查网络连接？这个方法似乎很适合它！ [http://smartandroidians.blogspot.co.uk/2010/03/checking-network-connection-in-android.html](http://smartandroidians.blogspot.co.uk/2010/03/checking-network-connection-in-android.html) 试一试，希望它会排序:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:05:14.060

您可以使用以下方式检索 SIM 卡和网络运营商`TelephonyManager`：

```
TelephonyManager telephonyManager =((TelephonyManager) 
Context.getSystemService(Context.TELEPHONY_SERVICE));

// Network operator IDEA,AIRTEL...
String networkOperatorName = telephonyManager.getNetworkOperatorName();

// sim operator IDEA,AIRTEL,BSNL,MTNL...
String simOperatorName = telephonyManager.getSimOperatorName(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T10:05:19.473

检查[TelephonyManager](http://developer.android.com/reference/android/telephony/TelephonyManager.html)类。这可能会在很多方面帮助您。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-08T09:45:52.857

```
/**
 * Checking whether net connection is available or not.
 * 
 * @param nContext
 * @return true if net connection is avaible otherwise false
 */
public static boolean isNetworkAvailable(Context nContext) {
    boolean isNetAvailable = false;
    if (nContext != null) {
        ConnectivityManager mConnectivityManager = (ConnectivityManager) nContext
                .getSystemService(Context.CONNECTIVITY_SERVICE);
        if (mConnectivityManager != null) {
            boolean mobileNetwork = false;
            boolean wifiNetwork = false;
            boolean mobileNetworkConnecetd = false;
            boolean wifiNetworkConnecetd = false;
            NetworkInfo mobileInfo = mConnectivityManager
                    .getNetworkInfo(ConnectivityManager.TYPE_MOBILE);
            NetworkInfo wifiInfo = mConnectivityManager
                    .getNetworkInfo(ConnectivityManager.TYPE_WIFI);
            if (mobileInfo != null)
                mobileNetwork = mobileInfo.isAvailable();
            if (wifiInfo != null)
                wifiNetwork = wifiInfo.isAvailable();
            if (wifiNetwork == true || mobileNetwork == true) {
                if (mobileInfo != null)
                    mobileNetworkConnecetd = mobileInfo
                            .isConnectedOrConnecting();
                wifiNetworkConnecetd = wifiInfo.isConnectedOrConnecting();
            }
            isNetAvailable = (mobileNetworkConnecetd || wifiNetworkConnecetd);
        }
    }
    return isNetAvailable;

} 
```

还要在清单权限中添加以下标签：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

# html - 模糊效果 CSS3 Firefox(linux)

> ID：11984759
> 
> 赞同：1
> 
> 时间：2012-08-16T09:57:33.507
> 
> 标签：html, firefox, css, filter, effect

如果用户未注册，我试图在我的相册上获得模糊效果。我明白了，但仅适用于 chrome。在我的 Firefox 14.0.1 (linux) 中，我无法让它工作

我的html模板（我在django下开发）

```
<h2> Gallerie</h2>
<ul class="galeria" id="imagenes">
{% for image in gallery %}
    {% if user.is_authenticated %}
        <a rel="prettyPhoto[gallery]" href="{{image.url}}">
            <img width="120px" height="120px" alt="{{image.comment}}" src="{{image.url}}"/>
        </a>        
    {% else %}
        <img class="blur" alt="{{image.comment}}" src="{{image.url}}"/>
    {% endif %}
{% endfor %}
</ul> 
```

我的网站.css

```
img.blur{
    -webkit-filter: grayscale(0.5) blur(10px);
    filter: grayscale(0.5) blur(10px);
    width:120px;
    height:120px;
} 
```

任何帮助，将不胜感激。谢谢 ：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T10:02:22.287

Gecko 不支持该`filter`属性。它仅适用于 IE ( `filter`) 和 WebKit ( `-webkit-filter`)。要在基于 Gecko 的浏览器（如 Firefox）中应用模糊效果，您可以使用 SVG 过滤器。[这是一个很好的解释](http://css-plus.com/2010/05/how-to-add-a-gaussian-blur-effect-to-elements-within-firefox/)如何使用 SVG 过滤器进行高斯模糊。这些 SVG 过滤器仅适用于 Gecko，因此您仍然需要旧代码用于 WebKit 和 IE。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T21:29:56.253

这个解释对我来说效果更好。

[http://css-plus.com/2012/03/gaussian-blur/](http://css-plus.com/2012/03/gaussian-blur/)

# sql-server - 将制表符分隔的记录插入到 sql server

> ID：11984761
> 
> 赞同：-1
> 
> 时间：2012-08-16T09:57:51.183
> 
> 标签：sql-server, ssms, bulkinsert

是否有任何工具可以读取文本文件并将文件中由制表符分隔的记录插入到 sql server 表中。
我可以通过开发一个小的 c# 应用程序来做到这一点，但我想知道是否已经有一个工具可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:00:27.130

SQL Server 批量插入？[http://msdn.microsoft.com/en-us/library/ms188365.aspx](http://msdn.microsoft.com/en-us/library/ms188365.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:01:59.553

您可以使用批量插入：

看看这个 SO 帖子：[Import .txt file to SQL Server 2008](https://stackoverflow.com/questions/5791710/import-txt-file-to-sql-server-2008)

和

[SQL SERVER – 使用批量插入将 CSV 文件导入 SQL Server – 将逗号分隔文件加载到 SQL Server](http://blog.sqlauthority.com/2008/02/06/sql-server-import-csv-file-into-sql-server-using-bulk-insert-load-comma-delimited-file-into-sql-server/)

最好的祝福

# css - 如何在第一列中应用文本左对齐并在其他列中应用文本右对齐

> ID：11984767
> 
> 赞同：31
> 
> 时间：2012-08-16T09:58:07.017
> 
> 标签：css, css-tables

我有一个要设置样式的表格，我如何`text-align:left;`只为第一列和`text-align:right;`其他列应用？

这是我的表格示例：

[http://jsfiddle.net/gianlucaguarini/hAv7P/](http://jsfiddle.net/gianlucaguarini/hAv7P/)

目前，所有列都保留了文本对齐。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-16T10:13:10.993

您可能想查看`:first-child`伪类（[W3C 定义](http://www.w3.org/TR/CSS2/selector.html#first-child)）——这正是它的设计目的。你可以像这样使用它：

```
.table td {
    text-align: right;
}

.table td:first-child {
    text-align: left;
}​ 
```

`:first-child`伪类意味着选择器只匹配`<td>`each中的第一个`<tr>`。

这里的例子：http: [//jsfiddle.net/xv5Cn/1/](http://jsfiddle.net/xv5Cn/1/)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-08-16T10:03:48.803

您需要指定以下 CSS：

```
.table td,
.table th
{
    text-align:left;
}

#right,
.table td + td,
.table th + th
{
    text-align:right;
} 
```

这里的例子：http: [//jsfiddle.net/mWeYM/](http://jsfiddle.net/mWeYM/)

您可以在此处阅读有关相邻兄弟 CSS 选择器的更多信息：http: [//www.w3.org/TR/CSS2/selector.html#adjacent-selectors](http://www.w3.org/TR/CSS2/selector.html#adjacent-selectors)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T10:12:06.470

嘿，曼娜，我已经更新了你的小提琴，只需点击以下链接：

[http://jsfiddle.net/hAv7P/9/](http://jsfiddle.net/hAv7P/9/)

您需要做的就是向您想要对齐的类添加一个类，然后像小提琴中一样添加css

# c++ - 何时使用 `static_assert` 而不是 SFINAE？

> ID：11984768
> 
> 赞同：27
> 
> 时间：2012-08-16T09:58:09.547
> 
> 标签：c++, templates, c++11, sfinae, static-assert

我一直在使用（并且看到使用）`static_assert`来标记模板参数值的不需要的值。但是，对于我遇到的所有情况，通过 SFINAE 禁用那些不需要的值似乎更好、更优雅。

例如：

```
template<typename T,
         class = std::enable_if<std::is_floating_point<T>::value>::type>
struct Foo { ... }; 
```

代替：

```
template<typename T>
struct Foo
{
    static_assert(std::is_floating_point<T>::value,
                  "Foo<T>: T must be floating point :-(");
    ...
}; 
```

所以我的问题是：我应该什么时候使用`static_assert`而不是 SFINAE，为什么？

**编辑：**

我认为到目前为止我学到的内容如下：

**1.** SFINAE 是一种通用且功能强大但可能非常复杂的工具，可用于许多任务，包括函数重载解析（有些人似乎认为这是它的唯一目的）。

**2.** SFINAE 可以在任何可能的地方以相对简单的方式使用`static_assert`，除了它出现在（类或函数的）*声明中而不是它的**定义*中（或者可以在`static_assert`类前向声明​​中插入一个？） . 这使得更逐字，因此更清晰的代码。然而，由于 SFINAE 很复杂，它往往比简单的`static_assert`.

**3.**另一方面`static_assert`，编译器错误消息更清晰，有些人似乎认为这是两者的主要目的。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-16T10:07:38.817

如果你想使用另一个重载，并且`static_assert`它们都不适合这样的参数，你可以使用 SFINAE。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-16T10:02:33.393

`static_assert`使编译失败。SFINAE 允许您消除一种可能的过载。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-16T10:43:16.093

`static_assert`如果您想强制`T`使用浮点类型，我认为这是正确的选择。这种方法比 SFINAE 解决方案更清楚地说明了您的意图。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-16T10:09:37.990

一方面，使用 SFINAE 可能会导致选择另一个重载，该重载原本是更差的匹配并且不会被考虑。

在存在其他重载但都不可行的情况下，您会得到一些像这样的好东西：

```
#include <type_traits>

void f(int){}
void f(bool){}
void f(char){}
void f(float){}
void f(long){}
void f(double){}
void f(short){}
void f(unsigned){}
void f(void*){}
void f(void (*)()){}

template<class C, class T = int>
using EnableIf = typename std::enable_if<C::value, T>::type;

template<class T>
struct sfinae_false : std::false_type{};

template<class T> 
void f(T&&, EnableIf<sfinae_false<T>> = 0){}

int main(){ struct X{}; f(X()); } 
```

输出：

```
source.cpp: In function 'int main()':
source.cpp:23:30: error: no matching function for call to 'f(main()::X)'
source.cpp:23:30: note: candidates are:
source.cpp:3:6: note: void f(int)
source.cpp:3:6: note:   no known conversion for argument 1 from 'main()::X' to 'int'
source.cpp:4:6: note: void f(bool)
source.cpp:4:6: note:   no known conversion for argument 1 from 'main()::X' to 'bool'
source.cpp:5:6: note: void f(char)
source.cpp:5:6: note:   no known conversion for argument 1 from 'main()::X' to 'char'
source.cpp:6:6: note: void f(float)
source.cpp:6:6: note:   no known conversion for argument 1 from 'main()::X' to 'float'
source.cpp:7:6: note: void f(long int)
source.cpp:7:6: note:   no known conversion for argument 1 from 'main()::X' to 'long int'
source.cpp:8:6: note: void f(double)
source.cpp:8:6: note:   no known conversion for argument 1 from 'main()::X' to 'double'
source.cpp:9:6: note: void f(short int)
source.cpp:9:6: note:   no known conversion for argument 1 from 'main()::X' to 'short int'
source.cpp:10:6: note: void f(unsigned int)
source.cpp:10:6: note:   no known conversion for argument 1 from 'main()::X' to 'unsigned int'
source.cpp:11:6: note: void f(void*)
source.cpp:11:6: note:   no known conversion for argument 1 from 'main()::X' to 'void*'
source.cpp:12:6: note: void f(void (*)())
source.cpp:12:6: note:   no known conversion for argument 1 from 'main()::X' to 'void (*)()'
source.cpp:21:6: note: template<class T> void f(T&&, EnableIf<sfinae_false<T> >)
source.cpp:21:6: note:   template argument deduction/substitution failed: 
```

# operating-system - 如何决定多级页表

> ID：11984769
> 
> 赞同：0
> 
> 时间：2012-08-16T09:58:12.680
> 
> 标签：operating-system, virtual-memory

如果我们有 32 位逻辑地址空间并且页面大小为 4KB，我对如何决定在虚拟地址空间中应该采用多少级页表有一些疑问？？（有时在问题中他们只采用单级有时是二级页表，所以很混乱）

问题：

我们有 36 位物理地址和 32 位虚拟地址，页框大小为 4KB，每个表条目为 4 字节，一个三级页表用于虚拟到物理地址的转换，其中在虚拟地址中，使用位 30-31索引第一级，第 21-29 位寻址第二级，第 12-20 位寻址第三级，第 0-11 位作为页面中的偏移量，所以应该是什么。在第一，第二和第三级页表的页表条目中寻址下一级页表* *（或页框） *所需的位？*

请帮助提前谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:36:20.660

所述问题/问题缺乏需要明确回答的必要信息。

答案可能是 24、24 和 24 位，然后每个页表都会浪费存储它的页面的一半。

或者答案可能是 25、25、24，但是每个页表占用的页面大小都会小于页面大小。

或者它可能是一个更奢侈的答案，如 24、25、24 或 25、24、24。

无论哪种方式，这将是一个非常奇怪的安排，不合逻辑地被选为答案。

[在这里](https://www.gatementor.com/viewtopic.php?f=267&t=5070)查看讨论。

# blackberry - 带有 orderby 日期的自定义列表

> ID：11984777
> 
> 赞同：0
> 
> 时间：2012-08-16T09:58:37.647
> 
> 标签：blackberry

我正在开发一个应用程序，我需要在其中按日期显示产品列表。所以在列表中应该首先出现日期，然后是产品项目。现在我的问题是布局，我很困惑如何制作这个布局？这是页面..

![在此处输入图像描述](../Images/35fe85e5e5377d93b02763beefc3f07b.png)

根据此屏幕，那里有日期和产品详细信息，因此我需要在代码中更改哪些更改..

这是我的代码

```
import net.rim.device.api.system.Bitmap;
import net.rim.device.api.system.Display;
import net.rim.device.api.ui.Color;
import net.rim.device.api.ui.DrawStyle;
import net.rim.device.api.ui.Field;
import net.rim.device.api.ui.FieldChangeListener;
import net.rim.device.api.ui.Font;
import net.rim.device.api.ui.Graphics;
import net.rim.device.api.ui.TouchEvent;
import net.rim.device.api.ui.Touchscreen;
import net.rim.device.api.ui.UiApplication;
import net.rim.device.api.ui.component.BitmapField;
import net.rim.device.api.ui.component.Dialog;
import net.rim.device.api.ui.component.LabelField;
import net.rim.device.api.ui.component.NullField;
import net.rim.device.api.ui.component.SeparatorField;
import net.rim.device.api.ui.container.HorizontalFieldManager;
import net.rim.device.api.ui.container.MainScreen;
import net.rim.device.api.ui.container.VerticalFieldManager;

class UiMainscreen extends MainScreen implements FieldChangeListener
{
    private CustomListField cu_field[];
    private Bitmap image=null;
    int size=8;
    public UiMainscreen() {
        VerticalFieldManager vmanager=new VerticalFieldManager(VERTICAL_SCROLL|VERTICAL_SCROLLBAR){
            protected void sublayout(int maxWidth, int maxHeight) {

                super.sublayout(Display.getWidth(),Display.getHeight());
                setExtent(Display.getWidth(),Display.getHeight());
            }
        };
        cu_field=new CustomListField[size]; 
        for(int i=0;i<size;i++){
            image=Bitmap.getBitmapResource("sample_"+i+".jpg");
            cu_field[i]=new CustomListField("BlackBerry models that had a built-in mobile phone, were the first models that natively ran Java, and transmitted data over the normal 2G cellular network. RIM began to advertise these devices as email-capable mobile phones rather than as 2-way pagers.", image, "jan2011", 100, 100,Color.LIGHTGREEN);
            cu_field[i].setChangeListener(this);
            vmanager.add(new SeparatorField());
            vmanager.add(cu_field[i]);
        }
        add(vmanager);
    }

    public void fieldChanged(Field field, int context) {
        // TODO Auto-generated method stub
        for(int i=0;i<size;i++){
            if(field==cu_field[i]){
                final int k=i;
                UiApplication.getUiApplication().invokeLater(new Runnable() {
                    public void run() {
                        Dialog.alert("You click on Item No "+k);
                    }
                });
            }
        }
    }
}

class CustomListField extends HorizontalFieldManager{

    private Bitmap scale_image;
    private int width=0;
    private int height=0;
    private int background_color=0;
    private BitmapField bitmap_field;
    private boolean flag=false;
    public CustomListField(String title, Bitmap image, String date,int image_width,int image_height,int background_color){
        super(NO_HORIZONTAL_SCROLL|USE_ALL_WIDTH);
        this.background_color=background_color;
        width=image_width;
        height=image_width;
        if(image!=null){
            scale_image=new Bitmap(image_width, image_height);
            image.scaleInto(scale_image, Bitmap.FILTER_LANCZOS);
            bitmap_field=new BitmapField(scale_image);
            flag=false;
            bitmap_field.setMargin(5, 5, 5, 5);
            add(bitmap_field);
        }

        VerticalFieldManager vmanager=new VerticalFieldManager(USE_ALL_WIDTH|Field.FIELD_VCENTER){
            protected void sublayout(int maxWidth, int maxHeight) {
                super.sublayout(Display.getWidth()-width, height);
                setExtent(Display.getWidth()-width, height);
            }
        };
        //HorizontalFieldManager HFMTOPlist  =new HorizontalFieldManager(Field.FIELD_HCENTER|Field.FIELD_TOP);
        Bitmap TopStrip = Bitmap.getBitmapResource("logo36X36.png");
        BitmapField bitmapStrip = new BitmapField(TopStrip);
       // HFMTOPlist.add(bitmapStrip);

       // vmanager.add(HFMTOPlist);

        LabelField title_lbl=new LabelField("Title: "+title,Field.NON_FOCUSABLE|DrawStyle.ELLIPSIS);
        vmanager.add(title_lbl);

        LabelField date_lbl=new LabelField("Date: "+date,Field.NON_FOCUSABLE);
        vmanager.add(date_lbl);
        vmanager.add(bitmapStrip);
        Font fon=title_lbl.getFont();
        int title_height=fon.getHeight();

        Font font=date_lbl.getFont();
        int date_height=font.getHeight();
        int pad=title_height+date_height;
        title_lbl.setPadding((height-pad)/2, 0, 0, 0);
        add(vmanager);
        add(new NullField(FOCUSABLE));
    }

    protected void sublayout(int maxWidth, int maxHeight) {
        super.sublayout(Display.getWidth(), height);
        setExtent(Display.getWidth(), height);
    }
    protected void paint(Graphics graphics) {
        if(flag)
        graphics.setBackgroundColor(background_color);
        graphics.clear();
        super.paint(graphics);
    }
    protected void onFocus(int direction) {
        super.onFocus(direction);
        flag=true;
        invalidate();
    }
    protected void onUnfocus() {
        invalidate();
        flag=false;
    }
    protected boolean navigationClick(int status, int time) {

        if(Touchscreen.isSupported()){
            return false;
        }else{
            fieldChangeNotify(1);
            return true;
        }

    }
    protected boolean touchEvent(TouchEvent message) 
    {
        if (TouchEvent.CLICK == message.getEvent()) 
        {

            FieldChangeListener listener = getChangeListener();
            if (null != listener)
                this.setFocus();
                listener.fieldChanged(this, 1);
        }
        return super.touchEvent(message);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:08:19.110

布局是 ( `LabelField`+ `ListField`) 对的组合。实现一个列表列表作为您的数据模型，并实现一个`Comparator`实例以根据您的规则对列表列表中的数据进行排序。

然后根据您的数据模型通过添加`LabelField`和实例组成一个屏幕，并在您的数据模型更改时更新这些字段。`ListField`

请注意，在此处发布较长的源代码表无助于解决问题。通常，当有人在代码方面寻求帮助时，他会自己进行调查并发布一小段代码（约 10 行）并寻求特定的帮助。

# git - Git pull 失败：无法更新本地参考

> ID：11984783
> 
> 赞同：3
> 
> 时间：2012-08-16T09:58:53.623
> 
> 标签：git, push, pull, git-extensions

我完全搞乱了我的 git 存储库。我无法推/拉远程分支..它从 git 扩展中消失了......

我使用 Git Extensions 2.33 ， msysgit Git-1.7.11-preview20120710.exe

```
C:\Program Files (x86)\Git\bin\git.exe pull --progress "biometric" +refs/heads/try_merge:refs/remotes/biometric/try_merge
error: unable to resolve reference refs/remotes/biometric/try_merge: No such file or directory
From biometric.bmstu.ru:test
 ! [new branch]      try_merge  -> biometric/try_merge  (unable to update local ref)
Done

$git fsck output

error: bad ref for refs/remotes/biometric/try_merge 
```

当我尝试将某些内容推送到远程 git 时，我认为它是远程存储库的全新分支。我怎样才能恢复它？

抱歉英语不好。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-10-11T09:50:32.453

我遇到了这个问题并通过简单地删除 .git/refs/remotes/origin/ 中的麻烦分支然后再次执行 git fetch 来解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:28:40.540

您已经反转了匹配的 ref 语法，看起来像。它应该是`<remote_ref>:<local_ref>`，但否则看起来你只是想把`biometric/try_merge`它拉到你当地的`try_merge`. 试试这个：

```
git checkout try_merge
git pull --force biometric try_merge 
```

否则，如果您想保留匹配的 ref 语法，我认为这将起作用：

```
git pull biometric +try_merge:try_merge 
```

如果这些仍然会引发您的错误，请在评论中告诉我，但两者都应该有效。

# xcode - Interface Builder 中具有动态布局的灵活高度

> ID：11984787
> 
> 赞同：1
> 
> 时间：2012-08-16T09:59:11.403
> 
> 标签：xcode, cocoa, layout, interface-builder, osx-lion

我对使用 Lion 10.7 的 Cocoa 应用程序中引入的动态布局概念不熟悉。

我一直在玩一些例子，几乎所有的作品都符合我的预期。但是，我无法得到一件事：某些元素中的灵活高度。

我有一个 NSTextField 元素，可以在其中正确设置以下约束：

*   导致尾随 -> 使其保持“靠近”左右边框调整其宽度。
*   垂直空间 -> 保持它“靠近”前一个垂直元素。

我还设置：

*   垂直空间 -> 使其保持“靠近”底部边框。
*   高度 >= x -> 与前一个一样，使其高度“灵活”并且在调整大小时可调整到视图的高度。

当我测试它时，它在“水平轴”（位置和大小）上工作，但它不允许我调整窗口的高度（它是固定的）。

如果我删除将 NSInputText 附加到视图底部的“垂直空间”约束，我可以调整窗口大小，但 NSInpuntText 的高度保持不变。

另一个烦人的事情是 NSInputText 的“默认”高度约束（“粉红色”颜色）不能被删除或修改。每当我这样做时，都会创建一个新的。

有任何想法吗？

谢谢。

# 更新

如果我使用“文本视图”（内部带有 NSTextField 的 NSScrollView）而不是“普通”的 NSTextField，我可以创建我想要的任何问题的行为。

# stanford-nlp - stanford nlp 分类器的输出

> ID：11984789
> 
> 赞同：1
> 
> 时间：2012-08-16T09:59:14.697
> 
> 标签：stanford-nlp, classification

我们正在学习 stanford-nlp 分类器的用法。正如其 wiki 页面所说，它可用于构建对 Iris 等数值数据进行分类的模型： [http ://www-nlp.stanford.edu/wiki/Software/Classifier#Iris_data_set](http://www-nlp.stanford.edu/wiki/Software/Classifier#Iris_data_set)

但是在解释输出时，我们对其中一些有困难：输入属性有 4 列（1-Value、2-Value、3-Value、4-Value），输出标签有 1 列（Iris-setosa、Iris-杂色，Iris-virginica）。但是这里的 CLASS 是什么？它是整体的输出列吗？

构建了这个分类器：具有以下权重的线性分类器

```
        Iris-setosa Iris-versicolor Iris-virginica
3 值 -2.27 0.03 2.26          
等级 0.34 0.65 -1.01          
4 值 -1.07 -0.91 1.99          
2 值 1.60 -0.13 -1.43          
1 值 0.69 0.42 -1.23          
总计：-0.72 0.05 0.57          
概率：0.15 0.32 0.54   

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T21:45:58.360

CLASS 就像简单线性回归中的截距项——它代表不同类别的相对频率。这是每个实例的一个特征。

# menu - 将鼠标悬停在 div 上并保持 div 可见

> ID：11984791
> 
> 赞同：0
> 
> 时间：2012-08-16T09:59:24.963
> 
> 标签：menu, hover

我有一个简单的问题（我猜）。我试图用 jquery 做一个简单的菜单悬停。悬停时，菜单应显示包含子菜单的 div。如果我将鼠标悬停在 div 上，则 div 应该保持可见以选择子菜单。否则 div 应该隐藏。我拥有的代码是：

```
$("#sub_menu_modelismo").hide();    

$("#menu_modelismo").hover(
  function () {
    $("#sub_menu_modelismo").show('fast');
  }, 
  function () {
    $("#sub_menu_modelismo").hide('fast');
  }
); 
```

当鼠标在其中时，div“#sub_menu_modelismo”应该保持可见。

Tnx 的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:08:08.630

您还没有准确描述现在的行为是什么，这是错误的！

从您显示的代码中，发生的第一件事就是隐藏了“modelismo”div。在我看来，它似乎永远不会显示！

# jquery - JQuery 元素没有丢弃

> ID：11984794
> 
> 赞同：0
> 
> 时间：2012-08-16T09:59:35.260
> 
> 标签：jquery

我有这个页面正在[https://schedule.nookal.com/](https://schedule.nookal.com/)上工作，如您所见，“事件”可以相互拖动和放置。我想做一些类似“重叠事件”的东西（一次 2 个事件）。而且您也可以注意到，事件是可调整大小的（您可以通过调整底部的大小来添加持续时间），问题是 jQuery 没有检测到 div 的新调整大小的部分（它只检测到它的中间）我想要元素每当两个持续时间之间发生冲突时重叠，不仅是中间......另外，宽容：“触摸”似乎不起作用......我在考虑CSS中的一个问题......请帮助

```
$(".DivBG[data-occupied=1]").droppable({
accept: $(".DivBG[data-occupied=1]"),
hoverClass: "touch",
greedy: true,
over: function(event, ui) {
    $(ui.draggable).css("width", "125px");
    $(ui.draggable).css("margin-left", "125px");
    $(this).css("width", "125px");
},
out: function(event, ui) {
    $(ui.draggable).css("width", "250px");
    $(ui.draggable).css("margin-left", "0px");
    $(this).css("width", "250px");
    $(ui.draggable).removeClass("overlapdraggable");
} 
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T10:05:48.080

当您使用 Jquery 计算宽度和高度时

```
var width = $(element).css('width'); 
```

将始终采用不包括边距、填充或边框的 CSS 宽度。本质上它没有考虑盒子模型。

相反，您可以保证始终通过以下方式获得[innerWidth](http://api.jquery.com/innerWidth/)：

```
var width = $(element).innerWidth(); 
```

或[.outerWidth](http://api.jquery.com/outerWidth/)与

```
var width = $(element).outerWidth(); 
```

如果您传递`true`给 outerWidth() 它还包括边距（即整个盒子模型）

```
var width = $(element).outerWidth(true); 
```

当您使用 Jquery 设置宽度和高度时。宽度、边距、填充和边框必须明确说明。

在上面的代码中，您在 Jquery 中设置了必要的尺寸，但是您缺少任何宽度/高度检查来限制您的 div 以适合`outerWidth`每个元素所需的尺寸。

# javascript - 使用 javascript 查找未标记的元素

> ID：11984804
> 
> 赞同：4
> 
> 时间：2012-08-16T10:00:02.233
> 
> 标签：javascript, html, dom

假设我有一些带有未标记内容的 HTML，例如：

```
<html>
<body>
<p>text in a tag</p>
other text outside any tag
</body>
</html> 
```

我怎样才能到达未标记的元素？甚至 document.getElementsByTagName('*') 也不包含未标记的元素。

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T10:08:48.520

就您而言，您可以简单地做

```
document.getElementById('body').lastChild 
```

但是，在更一般的情况下，您需要遍历孩子并检查

```
a = document.getElementById('body').lastChild

console.log(a.nodeType) // 3
console.log(a.nodeName) // #text 
```

这是关于[jsfiddle的示例](http://jsfiddle.net/CqXyK/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T10:13:58.503

我建议使用该`.nodeType`属性，该属性将根据返回的节点类型返回一个整数值。文本节点返回值 3。元素节点返回值 1 被警告，但是您内部的文本`<p>`算作其自己的节点，nodeType 为 3。

考虑到这一点，如果您正在寻找属于您的 body 元素的子元素的 textNodes，那么以下几行的内容应该可以工作。

```
var nodes = document.getElementByTagName('body').childNodes
for (i=0; i < nodes.length; i++)
{
 if(nodes.childNode[i].nodeType == 3)
 {
 //THIS NODE IS A TEXT NODE OF THE BODY ELEMENT
 //DO WHAT YOU NEED WITH IT
 }
} 
```

[MDN 节点类型文档](https://developer.mozilla.org/en-US/docs/DOM/Node.nodeType?redirectlocale=en-US&redirectslug=DOM/element.nodeType)

# php - 在wordpress中有帖子ID时如何删除iframe？

> ID：11984807
> 
> 赞同：1
> 
> 时间：2012-08-16T10:00:15.040
> 
> 标签：php, wordpress

我有一个简单的代码：

```
function filter_widgets($content) {
   global $post;
   if($post->ID = 1210) {
       $content = preg_replace('/<p>\s*(<iframe .*>*.<\/iframe>)\s*<\/p>/iU', '', $content);
   }
   return $content; 
}
add_filter('the_content', 'filter_widgets'); 
```

但是当运行 postId=1210 是结果不能 iframe 时，如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:07:34.913

尝试这个

```
$content = preg_replace("/(<iframe[^<]+<\/iframe>)/", '', $content); 
```

# javascript - 跨域文件

> ID：11984812
> 
> 赞同：1
> 
> 时间：2012-08-16T10:00:23.197
> 
> 标签：javascript, jquery

我正在使用 magento 去开发网上商店。它不允许我们使用任何类型的服务器端脚本语言，如 PHP。但是我需要在成功结账后存储订单数据并将信息提供给我的运输公司。

数据处理可以在我的网络服务器中完成，但我无法将数据传递到我的服务器。

例如，我需要将数据从 abc.com 传递到 xyz.com/processdata.php

我可以使用 javascript 或 jquery 来执行此操作。

我会感谢你的帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:47:55.513

您可以使用参数将脚本标记中的 js 返回 php 文件附加到您的头部

```
 var head= document.getElementsByTagName('head')[0];
   var script= document.createElement('script');
   script.type= 'text/javascript';
   script.src= 'http://remote.url/savemyinfo.php?parameter=yes';
   head.appendChild(script); 
```

如果php文件返回js，可以使用反馈

savemyinfo.php：

```
echo("alert('saved')"); 
```

# c++ - 变量未在回调中更新

> ID：11984816
> 
> 赞同：0
> 
> 时间：2012-08-16T10:00:33.683
> 
> 标签：c++, callback, publish-subscribe, stage, ros

我有代码来定义在 stageros 的世界文件中设置的位置模型的行为。我想跟踪它在变量中的当前位置，`px` `py`并`ptheta`通过订阅`odom`stageros 发送的 Odometry 消息的主题。像这样：

```
ros::Subscriber RobotOdometry_sub = n.subscribe<nav_msgs::Odometry>("robot_0/odom",1000,&Robot::ReceiveOdometry,this); 
```

它放在 Robot 对象的构造函数中。然后回调如下：

```
void Robot::ReceiveOdometry(nav_msgs::Odometry msg)
{
    //This is the call back function to process odometry messages coming from Stage.
    px = initialX + msg.pose.pose.position.x;
    py = initialY + msg.pose.pose.position.y;
    ptheta = angles::normalize_angle_positive(asin(msg.pose.pose.orientation.z) * 2);
    ROS_INFO("x odom %f y odom %f theta %f", px, py, ptheta);
} 
```

这个回调似乎被调用没问题。回调打印的 px、py 和 ptheta 值也都是正确的，并且与它们在世界中的当前位置相对应。问题出现在其他函数中：

```
void Robot::OtherFunction() {
    while (ros::ok())
    {
        ros::spinOnce();
        ROS_INFO("x %f y %f theta %f", px, py, ptheta);
    }
} 
```

这只是一个示例，但由于某种原因，从另一个函数打印的 px、py 和 ptheta 值似乎总是停留在初始 px、py 和 ptheta 值上。即使 ReceiveOdometry 回调也在不断地打印正确的值。px、py、ptheta 值是不同的，就好像每个变量有两个不同的值一样。

来自 ReceiveOdometry 的 ROS_INFO 正确打印当前位置。

来自 OtherFunction 的 ROS_INFO 打印初始位置，并且即使在 ReceiveOdometry 中连续设置 px、py 和 ptheta 也不会改变。

有谁知道是什么导致 ReceiveOdometry 回调中对 px、py 和 ptheta 的更改没有延续到 OtherFunction？希望这个问题是有道理的。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T10:44:25.457

*在这*两个函数中打印并检查它。您将使用两个不同的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T19:46:41.823

也许正在进行一些优化，变量不是从内存中读取而是保存在缓存中，因为它们没有在`while`循环内被修改。如果是这种情况，声明它们`volatile`会有所帮助。

[关于`volatile`关键字](http://www.drdobbs.com/cpp/volatile-the-multithreaded-programmers-b/184403766)

# c - 获取枚举类型的信息

> ID：11984822
> 
> 赞同：3
> 
> 时间：2012-08-16T10:00:58.173
> 
> 标签：c, enums

我有 2 种枚举类型：

```
typedef enum {a=0, a1=3, a2=5} NX;
typedef enum {c=-1, c1=4, c2=7} NY; 
```

我想写一个表达式，给定枚举类型/实例的名称将返回它的第一个元素的值。一种可能的解决方案是始终添加固定名称元素，例如

```
typedef enum {a=0, first=a, a1, a2, last=a2} 
```

但是，也许有更优雅的方式。

有没有办法在运行时获取枚举中的元素数量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:04:12.383

不，`sizeof()`不适用于枚举。在运行时无法获取元素的数量。
有一种流行的方法可以检查枚举的最后一个元素值以确定给定枚举中元素的数量，即：

```
enum Type {A = 0, B, C, LAST};
printf("'Type' enum has %d number of elements", LAST); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:06:56.990

如果枚举中的数字是连续的（在前两个示例中它们是连续的），您始终可以使用

```
typedef enum {first = -18, b, c, d, last } BlahBlah;
(...)
int nptElements = last - first + 1; 
```

获取元素的数量。当然，这需要了解第一个和最后一个...

# ruby-on-rails - Rails 引擎分离路线

> ID：11984823
> 
> 赞同：0
> 
> 时间：2012-08-16T10:01:03.080
> 
> 标签：ruby-on-rails, routes, rails-engines

我创建了一个带有新闻模块的简单应用程序，并将新闻定义为一个单独的可安装引擎（它也将用于其他项目）。我需要能够将引擎的管理员和用户部分作为单独的路由安装在父应用程序上。现在我可以将整个引擎安装为

```
Rails.application.routes.draw do
     mount Jnews::Engine => "/news"
end 
```

但我想将父应用程序上的管理员和用户路由分开，就像`/news`用户和`/admin/news`管理员一样。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T21:53:51.240

我认为这取决于你为什么要这样做：

1.  如果您想将用户和管理员作为单独的代码保留在新闻 gem 中 - 那么您可能想要隔离 2 个命名空间，然后安装每个命名空间 - 这可能涉及将它们本身作为单独的引擎。

2.  如果您想要的是（这就是我认为您的意思？）是在新闻引擎中共享代码，但根据用户是普通用户还是管理员在主应用程序中的 2 个不同的 url 上访问？在这种情况下我会做的是这样的：

*在主应用程序中*

```
Rails.application.routes.draw do
   mount Jnews::Engine => "/app"
end 
```

*在引擎路线中*

```
Jnews::Engine.routes.draw do
    match "/news", :to => "some_controller#some_action"
    match "/admin/news", :to => "some_controller#some_action"
end 
```

然后在主应用程序中，根据用户是什么（用户或管理员），您可以重定向到`app/news`或`app/admin/news`

我希望这会有所帮助，我不太确定是否进行条件路由。

但是，这里有一个非常好的路由指南：http: [//guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

您也许可以尝试安装具有动态路由的引擎？

```
mount Jnews::Engine => ":user_id/news" 
```

您最终将 Jnew::Engine 路由到哪里`user/news`和`admin/news`？我从来没有真正这样做过，所以我不知道这是否可能，但是......也许？

让我知道这是否有帮助:) 干杯

# android - android中按钮的重叠

> ID：11984825
> 
> 赞同：-2
> 
> 时间：2012-08-16T10:01:08.593
> 
> 标签：android, xml

我的 XML 文件中有两个按钮

```
<Button
    android:id="@+id/button1"
    android:layout_width="60dp"
    android:layout_height="65dp"
    android:layout_alignBottom="@+id/img"
    android:layout_alignParentRight="true"
    android:background="@android:color/transparent" />

<Button
    android:id="@+id/button2"
    android:layout_width="match_parent"
    android:layout_height="65dp"
    android:layout_alignBottom="@+id/img"
    android:layout_alignParentRight="true"
    android:background="@android:color/transparent" /> 
```

现在在我的 java 代码中，我想根据某些逻辑启用第一个按钮并禁用第二个按钮，有时反之亦然。我努力了 -

```
button1.setenabled(true);
button2.setenabled(false); 
```

但是在这种情况下，两个按钮都被禁用，因为 button1 与父级匹配，一旦禁用，它下面的按钮也会被禁用。请帮助如何处理这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:08:36.160

禁用顶视图不会让触摸事件传递到它下面的视图。你将不得不尝试一些别的东西来得到这个。

你能解释一下你到底想在这里实现什么吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:15:20.720

非常感谢你们的时间。我找到了解决方案。我根据某些条件禁用了一个按钮并启用了另一个，但是它们重叠并且当我禁用视图顶部的按钮时，视图下方的按钮也被禁用，即使下方的按钮已启用。我用了-

```
button1.bringToFront(); 
```

它现在工作正常。

谢谢Chitranshu Asthana ..你的回答暗示了我

# python - 如何通过按下按钮绘制椭圆

> ID：11984831
> 
> 赞同：0
> 
> 时间：2012-08-16T10:01:49.703
> 
> 标签：python, qt, pyqt4

我想使用单击按钮绘制一个椭圆。但我无法将点击按钮连接到paintEvent。例如，如果按下按钮，椭圆应该是绿色的，否则它应该是红色的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:15:44.147

将按钮的`clicked()`信号连接到绘制椭圆的小部件上的自定义插槽。然后在您的自定义插槽中，设置新颜色并调用- 这将在事件队列收到请求时`update()`触发调用。`paintEvent(..)`

# jquery - jQuery中的覆盖选择

> ID：11984838
> 
> 赞同：1
> 
> 时间：2012-08-16T10:02:10.517
> 
> 标签：jquery, jquery-selectors

我有一个 div，当单击时会在叠加图像中淡出。

它工作得很好，除了第一次在 Firefox 中调用它时，图像是预先选择的，上面有一个蓝色的不透明层。谁能帮我摆脱这个，好吗？

```
$('.graphic-3').bind('click', function() {
        if ($('#popup-3').html() == "0") {
            $('.graphic-3-hidden').fadeTo(1000, 1);
            $('#popup-3').html("1");
        } else {
            $('.graphic-3-hidden').fadeTo(1000, 0);
            $('#popup-3').html("0");
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:20:12.277

很高兴看到您的 HTML 和 CSS 代码，我发现了两个可能的错误来源：

*   我认为这可能是您何时使用课程的问题`.graphic-3-hidden`。

    您需要在开始时将不透明度设置为 0，否则只有当您的条件返回 false 时它才会变为 0。

*   否则可能是您的元素 #popup-3 不包含值。

无论如何，如果没有您的 html 和 css，就很难提供帮助。一个jsfiddle将是最好的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T10:39:49.820

这是我在嵌套中添加动画层时无意中解决的

# c# - 使用 linq 为 props 加载一些数据

> ID：11984842
> 
> 赞同：0
> 
> 时间：2012-08-16T10:02:19.420
> 
> 标签：c#, .net, linq, linq-to-sql

> **可能重复：**
> [不允许在查询中显式构造实体类型 [MyClass]](https://stackoverflow.com/questions/2952856/explicit-construction-of-entity-type-myclass-in-query-is-not-allowed)

我正在使用 linq to sql - 我正在尝试获取以下 2 个道具的计数（打开和关闭任务）但是我收到一个异常，说我无法在查询中加载实体，我该如何实现？

我的代码：

```
var milestones = ReadOnlySession.All<Milestone>()
    .Where(x => x.InstructionID == instructionid)
    .OrderBy(x => x.Name)
    .Select(x => new Milestone
    {
        Name = x.Name,
        InstructionID = x.InstructionID,
        Body = x.Body,
        Deadline = x.Deadline,
        MilestoneID = x.MilestoneID,
        TotalClosedTasks = 
            ReadOnlySession.All<InstructionTask>()
            .Count(c => c.Milestone == x.MilestoneID && !c.IsOpen),
        TotalOpenTasks = 
            ReadOnlySession.All<InstructionTask>()
            .Count(c => c.Milestone == x.MilestoneID && c.IsOpen)
    })
    .ToList(); 
```

错误：

消息：不允许在查询中显式构造实体类型“Surventrix.Domain.Model.Entities.Milestone”。

来源：System.Data.Linq

注意： **ReadOnlySession** - 对数据上下文的抽象，为我提供了 All、Single（基本上获取 T 的所有实体）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:12:29.310

尝试在 order 子句后添加 AsEnumerable，如果您没有性能问题，这应该可以解决问题。

```
var milestones = ReadOnlySession.All<Milestone>()
.Where(x => x.InstructionID == instructionid)
.OrderBy(x => x.Name).AsEnumerable()
.Select(x => new Milestone
{ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:14:44.720

我认为您必须将 Milestone 对象的创建（您还设置额外的总关闭/打开任务属性）与查询分开。在下面的查询中，来自数据库的匿名对象，然后*新的 Milestone 对象被创建。这样，它仍然是单个查询，假设 ReadOnlySession 仍然返回 IQueryable。

```
var milestones = ReadOnlySession.All<Milestone>()
    .Where(x => x.InstructionID == instructionid)
    .OrderBy(x => x.Name)
    .Select(x => new { 
        Milestone = x,
        TotalClosedTasks = ReadOnlySession.All<InstructionTask>()
                                .Count(c => c.Milestone == x.MilestoneID && !c.IsOpen)
        TotalOpenTasks = ReadOnlySession.All<InstructionTask>()
                                .Count(c => c.Milestone == x.MilestoneID && c.IsOpen)
    })
    .AsEnumerable()
    .Select(x => new Milestone {
        Name = x.Milestone.Name,
        InstructionID = x.Milestone.InstructionID,
        Body = x.Milestone.Body,
        Deadline = x.Milestone.Deadline,
        MilestoneID = x.Milestone.MilestoneID,
        TotalClosedTasks = x.TotalClosedTasks,
        TotalOpenTasks = x.TotalOpenTask
    })
    .ToList(); 
```

# c# - 从 json 格式对象中获取值

> ID：11984845
> 
> 赞同：0
> 
> 时间：2012-08-16T10:02:24.293
> 
> 标签：c#, javascript

在我的 asp.Net 应用程序（MVC 3）中，我正在使用一些 jquery 控件。我有 json

```
 {  
        "text":"Books",  
        "state":"open",  
        "attributes":{  
            "url":"/demo/book/abc",  
            "price":100  
        } 
```

如何获得属性值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:09:06.923

我想你需要

```
var json =  {   
    "text":"Books",   
    "state":"open",   
    "attributes":{   
        "url":"/demo/book/abc",   
        "price":100   
    } 
```

json.attributes.url

例如。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T10:09:16.750

如果你拿

```
var data = {  
        "text":"Books",  
        "state":"open",  
        "attributes":{  
            "url":"/demo/book/abc",  
            "price":100  
        } 
```

如果属性的属性不要改变，你可以`data.attributes.url`像@furqan 所说的那样使用。
但是，如果您的属性可以更改，您可以遍历属性，例如

```
 for(x in data.attrubutes)
    {
    //do some specific code for x which will be the NAME of the attribute.
//by calling data.attributes[x] for the value.
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T10:03:54.170

你做`objectName[attributename]` 或`objectName.attributename`

例如

```
var test =  {  
        "text":"Books",  
        "state":"open",  
        "attributes":{  
            "url":"/demo/book/abc",  
            "price":100  
        }  

test.text 
```

将返回值

# asp.net-mvc - ASP.Net MVC 3/4 托管在 IIS 7.5 默认处理程序映射上

> ID：11984846
> 
> 赞同：9
> 
> 时间：2012-08-16T10:02:29.813
> 
> 标签：asp.net-mvc, asp.net-mvc-3, wcf, web-config, iis-7.5

在 Windows 7 (PRO) 上托管在 IIS 7.5 .Net Framework 4.0 上的 ASP.Net、ASP.Net MVC 和 WCF 服务的正确默认处理程序映射是什么？

在安装 ASP.Net MVC 3/4 的 8 名开发人员团队中，只有 1 名开发人员可以在 IIS 7.5 的默认网站下运行基本的 ASP.Net MVC 3 Internet 应用程序，而无需更改处理程序映射，团队中没有人可以获得具有相同站点的第二个网站，以使用位于根网站子目录中的站点目录。***inetpub/wwwroot/站点***

下面是 IIS 7.5 中设置的三个处理程序映射，它们都是不同的，并且没有被开发人员更改。

将所需设置定义为默认值并确保所有工作站应用相同配置而不在网站***Web.Config***文件中设置它们的最佳方法是什么？

![在此处输入图像描述](../Images/e8ffb6ea18418b56260ecb3feda3ce8b.png)

![在此处输入图像描述](../Images/55c1531bc078fd9655f0f671c7e5f883.png)

![在此处输入图像描述](../Images/fc0b2fe027115a9b8919b687943f5d04.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-21T15:33:37.337

我成功地将 MVC 4 部署到我的本地 IIS 7.5（Windows 7）。这解决了我的问题（如此[处](https://stackoverflow.com/questions/6846544/how-to-fix-handler-pagehandlerfactory-integrated-has-a-bad-module-managedpip)所述）

（对于 x64 系统）

```
%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_regiis.exe -i 
```

（或者如果你在 32 位系统中）

```
%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_regiis.exe -i 
```

此外，我将 DefaultAppPool 更改为使用 v4-Integrated（从 v2-Classic），将网站转换为应用程序，并让应用程序使用 DefaultAppPool。

这是我完整的 Web.config。它包括处理程序。

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<compilation targetFramework="4.0" />

<pages>
  <namespaces>
    <add namespace="System.Web.Helpers" />
    <add namespace="System.Web.Mvc" />
    <add namespace="System.Web.Mvc.Ajax" />
    <add namespace="System.Web.Mvc.Html" />
    <add namespace="System.Web.Routing" />
    <add namespace="System.Web.WebPages" />
  </namespaces>
</pages> 
```

```
<modules runAllManagedModulesForAllRequests="true" />

<handlers>
  <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
  <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
  <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
  <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
  <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
  <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
</handlers> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-15T21:13:19.373

Assuming that your default website has been configured as an application in IIS, the most likely cause of this issue is having the application pool running the Classic pipeline as opposed to the Integrated pipeline. In all of the MVC applications that we have deployed to Azure, local IIS servers and development machines, we have not had to touch the handler mappings unless having to *trick* IIS 6 into hosting an MVC site.

To check for the application pool pipeline:

1.  Open the IIS manager

2.  Right click on the Default Web Site, and choose Advanced Settings. This will open up a window ![enter image description here](../Images/5ca5c052b9f223b1e97f7516ca1cc521.png)

3.  Note the name of the Application Pool. Now, close this window and click on Application Pools on the left hand menu in IIS manager ![enter image description here](../Images/2b67f59a63bff073794b42166bf29d89.png)

4.  If the Managed Pipeline Mode is not set to Integrated (eg is reading classic), then right click the Application Pool and select basic settings. From here, you can change the Pipeline type. Choose integrated.

![enter image description here](../Images/37f0f3dd25299e9cb4566599c6b594f1.png)

5.The application pool should immediately restart, but you can choose to restart it or IIS manually to ensure that your changes have taken affect.

**Note** - If you are running IIS 6, [here is a link](http://blog.stevensanderson.com/2008/07/04/options-for-deploying-aspnet-mvc-to-iis-6/) that describes how to adjust the handler mappings so that IIS 6 can run an MVC site.

**Addendum** - If you have been mucking with the handler mappings, depending on what has been changed, you may want to try this on a clean IIS install. It is not clear what handlers have been misconfigured as your team attempted to make an MVC deployment work.

# iphone - 从同一视图中删除视图。这是好习惯吗？

> ID：11984862
> 
> 赞同：0
> 
> 时间：2012-08-16T10:03:29.520
> 
> 标签：iphone, objective-c, ios, xcode

我在视图中添加了以下代码。

```
- (IBAction)accept_clicked:(id)sender {
    [self.view removeFromSuperview];
    self.view = nil;
} 
```

单击接受后，我已经像这样删除了自己的视图。它工作得很好，无论如何都可以这样做还是应该从另一个视图（父）中删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:34:59.573

不要这样做（使用`self.view`） - 它看起来不太好，您可能会遇到难以发现的问题。`self.view`是与 关联的主视图`UIViewController`。所以这个视图要在屏幕上可见，你必须以某种方式显示它：要么将其推送到 a`UINavigationController`或以`-presentViewController:animated:completion:`(IOS5+) 或`- presentModalViewController:animated:`. 通过实例化视图控制器并将其视图添加到当前视图控制器的视图来显示视图也不是一个好习惯：

```
//Not good
MyViewController *mvc = [[MyViewController alloc] init];
[self.view addSubView:mvc.view]; 
```

在您的特定情况下，我想您正在展示一些条款和条件（或类似的东西）并且有一个接受和拒绝按钮，您最好的解决方案是从某个地方展示您的视图控制器，实现一个委托方法，以便展示视图控制器可以得到结果，然后在您的`-accept_clicked:`方法中使用`[self dismissModalViewControllerAnimated:YES]`或`[self dismissViewControllerAnimated:completion:]`（IOS5+），

# java - Android：如何创建 ksoap2 请求？

> ID：11984868
> 
> 赞同：0
> 
> 时间：2012-08-16T10:04:04.570
> 
> 标签：java, android, soap, ksoap2, ksoap

我试图了解如何在 Android 上使用 ksoap。我已经执行了这个 ksoap 请求：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
xmlns:urn="urn:namespace">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:"method name">
        <urn:mode>"value"</urn:mode>
      </urn:method name>
   </soapenv:Body>
</soapenv:Envelope> 
```

通过 AndroidHttpClient 在 HttpPost 的实体部分中。我尝试用 ksoap 做类似的事情：

```
 SoapObject root = new SoapObject(NAMESPACE, "method name");
    PropertyInfo pr = new PropertyInfo();
    mode.setName("mode");
    mode.setValue("value");
    root.addProperty(pr);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.setOutputSoapObject(root/*request*/);

    Log.d(TAG, envelope.toString());

    HttpTransportSE transport = new HttpTransportSE(url);
    try {
        transport.call(NAMESPACE.concat("/").concat("method name"), envelope);
        Object obj = (Entity) envelope.getResponse(); 
```

，但我有一个例外

```
SoapFault - faultcode: 'SOAP-ENV:Server' faultstring: 'Processing Failure' faultactor: 'null' detail: org.kxml2.kdom.Node@44f7cab0 
```

你能给我一个这个简单请求的例子来了解它是如何工作的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T09:47:07.087

**解决方案：**

```
 SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.implicitTypes = true;

    SoapObject root = new SoapObject(NAMESPACE, "method name");
    PropertyInfo mode = new PropertyInfo();
    mode.setNamespace(NAMESPACE);
    mode.setName("mode");
    mode.setValue("value");
    mode.setType(String.class);
    root.addProperty (mode);
   //root.addProperty("mode", "value");
    envelope.setOutputSoapObject(root/*request*/);

    Log.d(TAG, envelope.toString());

    HttpTransportSE transport = new HttpTransportSE(url);
    transport.debug = true;
    try {
        transport.call(NAMESPACE.concat("/").concat("Method of server"), envelope);
        Log.d(Qube.TAG, transport.requestDump);
        Log.d(Qube.TAG, transport.responseDump); 
```

*如果您想避免 xml 中的类型，订单很重要

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T18:38:17.443

您还可以尝试在线生成器工具，该工具可以生成连接到您的 WS 所需的所有类。我最近使用了[http://easywsdl.com](http://easywsdl.com)，我的工作就像一个魅力。

# jira - 将安全级别从 Rally 同步到 JIRA

> ID：11984870
> 
> 赞同：0
> 
> 时间：2012-08-16T10:04:11.293
> 
> 标签：jira, rally, jira-plugin

我正在尝试将 Rally 中的缺陷同步到 JIRA 中的错误（将新错误从 JIRA 同步到 Rally 中的缺陷工作正常），但由于 JIRA 中的安全级别是必填字段，我收到以下错误：

```
[2012-08-16 08:24:52 Z] ERROR : JiraConnection.rescue in attempt_create - Trying to create issue: 'Testing Security Level' resulted in exception SOAP::FaultError
[2012-08-16 08:24:52 Z]  WARN : JiraConnection.initialize - com.atlassian.jira.rpc.exception.RemoteValidationException: {security=Security Level is required.} : [] 
```

我在 Rally 中创建了一个具有以下属性的自定义字段：

*   名称：安全等级
*   显示名称：安全级别
*   类型：下拉列表
*   下拉列表值：无、报告者和公司、供应商和公司、仅限公司
*   隐藏：未选中
*   出现次数：1
*   必需：未选中

并将以下内容添加到我的 XML 配置中：

```
<FieldMapping>
    ...
    <Field><Rally>Security Level</Rally><Other>Security Level</Other></Field>
    ...
</FieldMapping>
<OtherFieldHandlers>
    ...
    <OtherEnumFieldHandler>
        <FieldName>Security Level</FieldName>
        <Mappings>
            <Field><Rally>None</Rally><Other>-1</Other></Field>
            <Field><Rally>Reporter and Company</Rally><Other>10050</Other></Field>
            <Field><Rally>Vendor and Company</Rally><Other>10052</Other></Field>
            <Field><Rally>Company Only</Rally><Other>10031</Other></Field>
        </Mappings>
    </OtherEnumFieldHandler>
    ...
</OtherFieldHandlers> 
```

但现在它失败了：

```
[2012-08-16 09:45:32 Z] ERROR : Connector.block in validate - FieldMapping: Rally field "Security Level" not found
[2012-08-16 09:45:32 Z] ERROR : ConnectorRunner.rescue in run_services - Unexpected exception occurred
[2012-08-16 09:45:32 Z] ERROR : ConnectorRunner.exception - Message Invalid Configuration 
```

我为 Rally 中的字段名称尝试了“安全级别”、“安全级别”等的不同组合，并在尝试不同组合时相应地更新了 XML 文件，但我总是得到相同的“未找到”错误。

我在这里遗漏了一些明显的东西吗？是否有更标准的映射安全级别的方法？

干杯，

安德鲁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:11:58.540

目前，Rally JIRA 连接器无法从需要 JIRA 安全级别的 Rally 同步问题，因为连接器仅使用 createIssue 调用而不是 createIssueWithSecurityLevel 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T20:40:29.053

对于 Rally 中的字段名称，wsapi 会去除空格和下划线 - 仅在字段映射和字段处理程序中尝试 SecurityLevel。希望有帮助

# mysql - 以选择为条件的mysql更新查询

> ID：11984874
> 
> 赞同：1
> 
> 时间：2012-08-16T10:04:17.957
> 
> 标签：mysql, sql-update, sql

```
UPDATE reservation SET flag = "1" WHERE ipAddress = (SELECT ipAddress FROM reservation WHERE endDate < CURRENT_TIMESTAMP); 
```

我试图使用此查询来更改保留表中日期已过期的那些条目的标志列。flag 列默认为 0。所以我试图将 expired once 更改为 1 以供我识别。

我收到以下错误。

```
ERROR 1093 (HY000): You can't specify target table 'reservation' for updatein FROM clause 
```

有人可以提出解决这个问题的方法吗..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T10:07:05.787

如果您在子选择中使用同一个表，您可以完全省略子选择。你为什么不改用以下

```
UPDATE reservation 
SET flag = "1" 
WHERE endDate < CURRENT_TIMESTAMP 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T10:07:16.837

你不需要内在的`SELECT`。您只需要`flag`根据`endDate`

```
UPDATE reservation 
SET flag = "1" 
WHERE endDate < CURRENT_TIMESTAMP 
```

# iphone - 根据 webviews 内容使用 WebViews 调整 UITableViewCell 的大小

> ID：11984875
> 
> 赞同：1
> 
> 时间：2012-08-16T10:04:35.773
> 
> 标签：iphone, objective-c, ios, uitableview

我正在尝试根据 webview 的高度在单元格上设置自定义高度。

现在我尝试将 webview 的 frame.size.height 添加到 NSMutableArray 中，这当然会在 insertObject 上崩溃（我在这里尝试过的解决方案非常草率）。

我该如何做到这一点？

```
int indexPathIntValue;

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *MyIdentifer = @"PictureCell";

    InspirationFeedCell *cell;
    cell = (InspirationFeedCell *)[tableView dequeueReusableCellWithIdentifier:MyIdentifer];
    NSBundle *mainBundle = [NSBundle mainBundle];
    if (cell == nil) {
        [mainBundle loadNibNamed:@"PictureCell" owner:self options:nil];
        cell = self.feedCell;
        self.feedCell = nil;
    }

    indexPathIntValue = indexPath.row;

    //Here I deleted some code that fetches descriptionWebString

    [cell.feedWebView setDelegate:self];
    [cell.feedWebView loadHTMLString:descriptionWebString baseURL:nil];

    return cell;

}

-(void) webViewDidFinishLoad:(UIWebView *)webView {

    CGRect frame = webView.frame;
    frame.size.height = 1;
    webView.frame = frame;
    CGSize fittingSize = [webView sizeThatFits:CGSizeZero];
    frame.size = fittingSize;
    webView.frame = frame;

    int heightOfWebViewInt = frame.size.height;
    [sizeOfWebViewCell insertObject:[NSNumber numberWithInt:heightOfWebViewInt] atIndex:indexPathIntTest];
    DLog(@"numberSizeInValue: %d", heightOfWebViewInt);

    if (!alreadyUpdated) {
        alreadyUpdated = YES;
        [inspirationFeedTable reloadData];
    }
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    if (indexPath.row < [sizeOfWebViewCell count] && [sizeOfWebViewCell count] != 0) {

        NSNumber *numberValueOfHeight = [sizeOfWebViewCell objectAtIndex:indexPath.row];

        int rowAtHeight = numberValueOfHeight.integerValue;

        return rowAtHeight;

    }
    return 360;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T11:24:00.157

请设置 cell.feedWebView.tag = indexPath.row;

而不是 indexPathIntValue = indexPath.row;

在 webViewDidFinishLoading 方法中请使用下面的行

[sizeOfWebViewCell insertObject:[NSNumber numberWithInt:heightOfWebViewInt] atIndex: webView.tag];

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T10:16:06.600

嗨，你为什么说：

> 这当然会在 insertObject 上崩溃

实际上它不应该崩溃。确保它`sizeOfWebViewCell`是 a `NSMutableArray`，使用该方法`addObject`并检查您的实例是否已正确分配和初始化。

# html - 动态容器

> ID：11984876
> 
> 赞同：0
> 
> 时间：2012-08-16T10:04:36.253
> 
> 标签：html, css

我有一个容器`<div>`：

```
.containerBig{
   width:940px; 
} 
```

里面有很多小容器。

```
.containerSmall{
   width:auto;
   height:100%;
   float:left;
} 
```

看起来像这样：`[[][][]]`

小容器中装满了数据库中的项目。我希望小容器使用全高，但只使用它们真正需要的宽度

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:19:42.830

大容器总是占据小容器中具有最大高度的小容器的高度。

如果它没有占用小容器的最大高度，则某处存在浮动问题，这可以通过给出以下命令来消除：

```
<div style="clear:both"></div> 
```

在大容器内或大容器之前

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:21:08.057

看到这个

[小提琴](http://jsfiddle.net/u5Exx/1/)。

用您的数据替换“abcdefghijkl”。并且分割会自动拉伸到 100% 高度的数据宽度。

# html - 如何在 html5 中创建多个必需的选择选项？

> ID：11984879
> 
> 赞同：4
> 
> 时间：2012-08-16T10:04:58.127
> 
> 标签：html

如何在 html5 中创建多个必需的选择选项？用户必须至少选择 2 个选项。

```
<select name='type' required multiple='multiple'>
    <option>...</option>
    ...
</select> 
```

我试过了，但它不起作用，并且不检查是否有多个选择。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-16T10:21:05.507

```
<select id="choice" multiple="multiple">
  <option value="1">One</option>
  <option value="2">two</option>
  <option value="3">three</option>
</select>
<script type="text/javascript">

var optionsToSelect = ['One','two', 'three'];
var select = document.getElementById( 'choice' );

for ( var i = 0, l = select.options.length, o; i < l; i++ )
{
  o = select.options[i];
  if ( optionsToSelect.indexOf( o.text ) <= 1 )
  {
    alert('Plz select at least 2 options')

  }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-08-12T16:20:18.720

有点晚了，但对于其他长时间互联网搜索的用户来说。您可以使用 HTML5 执行此操作，但请确保您没有禁用默认行为。

```
$("#mybtnId").click(function() {

  var isValid = $("#MyForm")[0].checkValidity();
  if(false === isValid){
    //allow the browser's default submit event behavior 
    return true;
  }
  event.preventDefault();  <-- disable default behavior after check validation

  //...
}); 
```

# c# - 如何使用稳定排序对 DataGrid 进行排序？

> ID：11984880
> 
> 赞同：9
> 
> 时间：2012-08-16T10:04:59.110
> 
> 标签：c#, wpf, sorting, datagrid

我有一个 WPF DataGrid，我有它，以便您可以通过单击列标题对其进行排序。它有效，但不稳定。如何让它进行稳定的排序？

我的意思是，如果我有这张桌子：

```
Class    | Student    | Grade
-----------------------------
Art      | James      |  A
Art      | Amy        |  B
Art      | Charlie    |  A
Science  | James      |  D
Science  | Amy        |  A
Science  | Charlie    |  C
History  | James      |  B
History  | Amy        |  A
History  | Charlie    |  C 
```

如果我按学生排序，它会像您期望的那样工作：

```
Class    | Student    | Grade
-----------------------------
Art      | Amy        |  B
Science  | Amy        |  A
History  | Amy        |  A
Art      | Charlie    |  A
Science  | Charlie    |  C
History  | Charlie    |  C
Art      | James      |  A
Science  | James      |  D
History  | James      |  B 
```

但是，如果我现在按班级排序：

```
Class    | Student    | Grade
-----------------------------
Art      | James      |  A
Art      | Amy        |  B
Art      | Charlie    |  A
History  | James      |  B
History  | Amy        |  A
History  | Charlie    |  C
Science  | James      |  D
Science  | Amy        |  A
Science  | Charlie    |  C 
```

它破坏了学生的排序顺序（排序不稳定）。我想要的是稳定的排序，它保留了顺序：

```
Class    | Student    | Grade
-----------------------------
Art      | Amy        |  B
Art      | Charlie    |  A
Art      | James      |  A
History  | Amy        |  A
History  | Charlie    |  C
History  | James      |  B
Science  | Amy        |  A
Science  | Charlie    |  C
Science  | James      |  D 
```

似乎默认情况下它应该像这样工作，或者至少是一个切换。有没有人有什么建议？@Eirik 的 shift-clicking 想法有效，这表明行为存在。但是，我真正想要的是在没有任何修饰符的情况下那样工作。这不应该是“按此排序，然后按此排序，然后按此排序”的原因，而应该将算法换成不同的算法。

看到这个：[http ://en.wikipedia.org/wiki/Sorting_algorithm#Stability](http://en.wikipedia.org/wiki/Sorting_algorithm#Stability)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T10:21:54.420

您应该能够通过在单击列时按住 shift 来按多列排序。尝试单击班级列，然后按住 shift 并单击学生列。

这是在后面的代码中添加排序的解决方案：

```
private void myDataGridPreviewMouseDown(object sender, MouseButtonEventArgs e)
{
    DependencyObject dep = (DependencyObject)e.OriginalSource;

    while ((dep != null) && !(dep is DataGridColumnHeader))
    {
        dep = VisualTreeHelper.GetParent(dep);
    }

    if (dep == null)
        return;

    if (dep is DataGridColumnHeader)
    {
        DataGridColumnHeader columnHeader = dep as DataGridColumnHeader;

        ICollectionView view = CollectionViewSource.GetDefaultView((sender as DataGrid).ItemsSource);

        if (columnHeader.Content.Equals("Class") || columnHeader.Content.Equals("Student"))
        {
            view.SortDescriptions.Clear();
            view.SortDescriptions.Add(new SortDescription("Class", ListSortDirection.Ascending));
            view.SortDescriptions.Add(new SortDescription("Student", ListSortDirection.Ascending));
        }
    }
} 
```

为此，您必须禁用标准排序。一种方法是停止 Sorting 事件，如下所示：

```
private void myDataGridSorting(object sender, DataGridSortingEventArgs e)
{
    e.Handled = true;
} 
```

**编辑**：阅读 hbarck 的评论后，我再次阅读了您的问题，似乎我错过了一些部分。如果您更改此代码：

```
if (columnHeader.Content.Equals("Class") || columnHeader.Content.Equals("Student"))
{
    view.SortDescriptions.Clear();
    view.SortDescriptions.Add(new SortDescription("Class", ListSortDirection.Ascending));
    view.SortDescriptions.Add(new SortDescription("Student", ListSortDirection.Ascending));
} 
```

对此：

```
if (Keyboard.IsKeyDown(Key.LeftCtrl) || Keyboard.IsKeyDown(Key.RightCtrl))
{
    view.SortDescriptions.Clear();
}

view.SortDescriptions.Insert(0, new SortDescription(columnHeader.Content.ToString(), ListSortDirection.Ascending)); 
```

你会有稳定的排序。单击学生按学生排序，然后单击班级按班级、学生排序。如果在单击时按住 ctrl，则在按单击的列排序之前清除先前的排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-29T14:20:31.240

我已经设法使用自定义比较器进行了稳定的排序，但这有点像一个大黑客......

我使用 ListCollectionView 的 CustomSort 属性来设置我的自定义比较器，这需要我在实例化它时将集合传递给它。

```
private void Sorting(IEnumerable collection)
{
    var view = CollectionViewSource.GetDefaultView(collection) as ListCollectionView;

    if (view != null)
    {
        view.CustomSort = new StableComparer(collection);
    }
} 
```

在我的自定义比较器中，我在比较方法期间使用集合只是为了在常规比较返回零（它们相同或具有相同值）时回退到项目索引。

```
public class StableComparer : IComparer
{
    public IEnumerable Collection { get; set; }

    public StableComparer(IEnumerable collection)
    {
        Collection = collection;
    }

    public int Compare(object x, object y)
    {
        IComparable x_Comparable = x as IComparable;
        IComparable y_Comparable = y as IComparable;

        if (x_Comparable != null && y_Comparable != null)
        {
            var comparison = x_Comparable.CompareTo(y_Comparable);

            // A zero value means x and y are equivalent for sorting, and they could
            //  be rearranged by an unstable sorting algorithm
            if (comparison == 0 && Collection != null)
            {
                // IndexOf is an extension method for IEnumerable (not included)
                var x_Index = Collection.IndexOf(x);
                var y_Index = Collection.IndexOf(y);

                // By comparing their indexes in the original collection, we get to
                //  preserve their relative order
                if (x_Index != -1 && y_Index != -1)
                    comparison = x_Index.CompareTo(y_Index);
            }

            return comparison;
        }

        return 0;
    }
} 
```

我仍在测试这个，所以我不能保证它会一直工作......例如，一个问题是保持比较器中的 Collection 属性更新。或者支持两个排序方向（现在工作，应该不难）。或者在性能方面检查它是如何工作的。

但我认为这个想法很明确；虽然 hacky，就像我说的那样。

# sed - 在字符对之间插入空格 - sed

> ID：11984884
> 
> 赞同：2
> 
> 时间：2012-08-16T10:05:12.323
> 
> 标签：sed, awk

另一个sed问题！我有成对的核苷酸数据

```
1 Affx-14150122 0 75891 00 CT TT CT TT CT 
```

按空格分隔，我需要在每一对中放置一个空格，例如

```
1 Affx-14150122 0 75891 0 0 C T T T C T T T C T 
```

我试过`sed 's/[A-Z][A-Z]/ &/g'`了`sed 's/[A-Z][A-Z]/& /g'`

并且两者都`A-Z`替换为`..`并且它永远不会像我想要的那样拆分这对（它在之前或之后放置空格或拆分每隔一对或类似的！）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T10:14:32.437

我认为这对你有用，但它并不完美！

```
echo "1 Affx-14150122 0 75891 00 CT TT CT TT CT" | \
  sed 's/\(\s[A-Z]\)\([A-Z]\)/\1 \2/g' 
```

给

```
1 Affx-14150122 0 75891 00 C T T T C T T T C T 
```

`sed 's/\(\s[A-Z]\)\([A-Z]\)/\1 \2/g'`匹配空格 ( `\s`) 大写字符 ( `[A-Z]`)，将其放入组 ( `\(...\)`)，然后匹配大写字符并将其存储在第二组中。然后这个匹配被第一组 ( `\1`) 空间第二组 ( `\2`) 替换。

**注意：**
当您有超过 2 个字符的序列时，这会失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:41:03.257

一种`awk`仅修改字符对并且可能更健壮的解决方案，具体取决于您的输入数据：

```
echo "1 Affx-14150122 0 75891 00 CT TT CT TT CT" | \
  awk '
    {
      for(i=1;i<=NF;i++) {
        if($i ~ /^[A-Z][A-Z]$/){ 
          $i=substr($i,1,1)" "substr($i,2,1)
        }
       }
     }
     1' 
```

给

```
1 Affx-14150122 0 75891 00 C T T T C T T T C T1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T11:41:54.943

这可能对您有用（GNU sed）：

```
echo '1 Affx-14150122 0 75891 00 CT TT CT TT CT' | 
sed ':a;s/\(\s\S\)\(\S\(\s\|$\)\)/\1 \2/g;ta'
1 Affx-14150122 0 75891 0 0 C T T T C T T T C T 
```

第二种方法有效，但可能会提供误报：

```
echo '1 Affx-14150122 0 75891 00 CT TT CT TT CT' | sed 's/\<\(.\)\(.\)\>/\1 \2/g'
1 Affx-14150122 0 75891 0 0 C T T T C T T T C T 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-17T05:02:37.480

这在 python 中实际上比在 awk 中更容易：

```
echo caca | python -c 'import sys;\
for line in sys.stdin: print (" ".join(line))' 
```

卡卡

# php - 在 php 中设置扩展配置

> ID：11984888
> 
> 赞同：0
> 
> 时间：2012-08-16T10:05:26.630
> 
> 标签：php, typo3

嗨，我做了一个像博客一样工作的扩展，这样用户就可以发布很多东西。

并且用户可以创建此插件的多个唯一实例。这可以通过每个“post”获取扩展实例的 id，如下所示：

```
$this->cObj->data['uid'] 
```

这很好用，但我希望能够复制一个实例，并且新实例的 id 与旧实例相同。
我已经做到了，以便我可以在扩展配置中设置自定义 id。
但是我希望能够在用户复制扩展时自动设置该 id，以便自定义 id 字段的默认值是扩展实例的 id。

是否可以在 php 中设置扩展配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:09:54.383

将选择器添加到您的插件配置中，您可以在其中选择“tt_content”类型的记录并将该字段设置为必需。

如果您创建新的内容元素，则选择记录本身。如果您复制该记录，则值将相同。

为此，您需要为您的插件配置一个 flexform 配置。看看：[http ://wiki.typo3.org/Extension_Development,_using_Flexforms](http://wiki.typo3.org/Extension_Development,_using_Flexforms)

# java - 使用命令提示符的可运行 jar 的附加调试选项

> ID：11984892
> 
> 赞同：0
> 
> 时间：2012-08-16T10:05:47.657
> 
> 标签：java, debugging, jar

我知道`java -jar filename.jar`用于使用命令提示符执行 jar 文件，但任何人都可以解释以下命令：

```
java -jar filename.jar -debug 
```

`-debug`上述命令中的确切用途是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:43:16.660

这不是 Java 解释器的标志（因为它们应该在实际的类/jar**之前传递）。**

如果您执行上面发布的命令行，这将启动您的`filename.jar`-files 主类并将`main(String[] args)`-method 的`-debug`-parameter 作为 -array 中的第二个参数`args`。

* * *

但是，旧 Java 版本中也有（或曾经）`-debug`标志，它已被[`-Xdebug`标志](http://www.manpagez.com/man/1/java/)取代。（肯定是旧的）[联机帮助页](http://amath.colorado.edu/computing/software/man/java.html)指出：

> **-debug** 允许 Java 调试器 - jdb(1) - 将自己附加到这个 java 会话。在命令行上指定 -debug 时，java 会显示启动调试会话时必须使用的密码。

如果使用调试标志启动 Java 应用程序，远程调试器可以附加到正在运行的应用程序，您可以（例如）使用[JConsole监视它](http://docs.oracle.com/javase/1.5.0/docs/guide/management/jconsole.html)

# mysql - rails 3中列名“type”的问题

> ID：11984893
> 
> 赞同：3
> 
> 时间：2012-08-16T10:05:51.250
> 
> 标签：mysql, ruby-on-rails-3

我的一张表中有一个名为“type”的列。当我尝试像 group.type 一样访问它时，出现以下错误：

```
super: no superclass method `type' for #<Group:0x000000035eaf30> 
```

但是，当我尝试使用迁移重命名列时，出现以下错误

```
No such column: groups.type (migration failed) 
```

我尝试使用查询直接在 mysql 数据库中重命名该列，但这也不起作用。

```
mysql> alter table groups change type group_type int(11);
ERROR 1054 (42S22): Unknown column 'type' in 'groups' 
```

请帮忙。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-12-03T17:19:39.603

The error comes from the single table inheritance feature that comes with ActiveRecord. Just tell it to use a different column than `type`:

```
class Group < ActiveRecord::Base

  self.inheritance_column = nil

  #...
end 
```

With that, you don't have to rename the column.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:07:33.383

我认为`type`是[Ruby on Rails 中的 ReservedWords](http://oldwiki.rubyonrails.org/rails/pages/ReservedWords)。
所以尝试像这样访问：

```
groups.[type] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T10:13:20.653

我想你会发现你必须用反引号（**`**）包围单词类型。我认为“类型”是一个保留字，这就是导致您的错误的原因。

我现在正在使用手机，因此无法粘贴您需要的字符，但它位于大多数标准键盘的左上角。

# android - 如何在 android 日历中插入 eventTimeZone？

> ID：11984895
> 
> 赞同：0
> 
> 时间：2012-08-16T10:05:51.667
> 
> 标签：android

我正在尝试将事件与“eventTimezine”选项一起保存，但我不知道哪种类型的字符串适合“eventTimezine”。

前任：

```
` ContentValues event = new ContentValues();
  event.put("eventTimezone", "?");` 
```

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:26:28.143

我试过这个

```
event.put("eventTimezone", "Europe/London"); 
```

它奏效了。您可以在日历中输入一个内容并制作一个小型测试程序来查看它使用的 timeZone。你可以这样：

```
String[] projection = new String[] { "_id", "name" };
            Uri calendars = Uri.parse("content://com.android.calendar/calendars");

            String calName; 
            String calId=""; 
            Cursor managedCursor = managedQuery(calendars, projection,null, null, null);
            if (managedCursor.moveToFirst()) {

                int nameColumn = managedCursor.getColumnIndex("name"); 
                int idColumn = managedCursor.getColumnIndex("_id");
                do {
                    calName = managedCursor.getString(nameColumn);
                    calId = managedCursor.getString(idColumn);
                } while (managedCursor.moveToNext());
            }
                  if (managedCursor != null && managedCursor.moveToFirst()) {
                      int tzone = managedCursor.getColumnIndex("eventTimezone");
                      String timezone = managedCursor.getString(tzone);
                  } 
```

# android - 安卓日食

> ID：11984899
> 
> 赞同：0
> 
> 时间：2012-08-16T10:05:58.830
> 
> 标签：android

我正在尝试在运行时创建按钮，我做到了。问题是它们都相互重叠。我想改变位置，但没有任何效果！

这是我的代码：

```
for (int i = 1; i < 5; i++) {
    RelativeLayout.LayoutParams p= new RelativeLayout.LayoutParams( RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
    Button b = new Button(this);
    b.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

        }
    });
    b.setText(""+ i);      
    b.setId(100+i);
    b.setWidth(50);
    b.setHeight(40);

    p1.this.addContentView(b, p);              
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:45:38.967

使用 LinearLayout 和[LayoutParams](http://developer.android.com/reference/android/widget/LinearLayout.LayoutParams.html) 。设置参数的值并像`linearLayout.addView(button, params)`这样添加它。

# jenkins - jenkins 构建流程插件可以触发手动作业吗？

> ID：11984900
> 
> 赞同：0
> 
> 时间：2012-08-16T10:06:09.983
> 
> 标签：jenkins, jenkins-plugins

我目前正在尝试创建一个构建管道。buildflow 插件看起来很有趣，但我找不到任何有关手动步骤是否可行的信息。

有谁知道这是否可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:39:48.820

这似乎还不可能，但您可以查看支持手动步骤的[构建管道插件。](https://wiki.jenkins-ci.org/display/JENKINS/Build+Pipeline+Plugin)这是一个用于实现构建管道的替代插件，它还包括漂亮的可视化。

# android - Android intent.extras 返回 null

> ID：11984901
> 
> 赞同：1
> 
> 时间：2012-08-16T10:06:11.560
> 
> 标签：android, android-intent, android-activity, extras

我正在尝试将 3 个字符串传递给一个新活动。通过调试，我发现我的变量在我将它们放入附加项时不为空，但当我尝试获取它们时它们为空

```
calendarView.setOnDateChangeListener(new OnDateChangeListener() {

            @Override
            public void onSelectedDayChange(CalendarView view, int year, int month,
                    int dayOfMonth) 
            {

                 //Toast.makeText(getApplicationContext(), ""+dayOfMonth, 0).show();

                Intent myIntent = new Intent(CalendarActivity.this, DateDayActivity.class);
                myIntent.putExtra("year", year);
                myIntent.putExtra("month", month);
                myIntent.putExtra("dayOfMonth", dayOfMonth);
                CalendarActivity.this.startActivity(myIntent);                          
            }
        }); 
```

这是变量为空的被调用活动：

```
 super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_date_day);

    Bundle extras=getIntent().getExtras();

    String year=extras.getString("year");
    String month=extras.getString("month");
    String dayOfMonth=extras.getString("dayOfMonth");

    String date=dayOfMonth+"/"+month+"/"+year;

    TextView tv=(TextView)findViewById(R.id.textView1);
    tv.setText(date);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T10:09:03.900

年、月等是整数而不是字符串，因此请使用

```
int year = extras.getInt( "year" ); 
```

[编辑]

或者

```
String year = Integer.toString( extras.getInt( "year" ) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:10:48.770

```
String year=String.valueOf(extras.getInt("year"));
String month=String.valueOf(extras.getInt("month"));
String dayOfMonth=String.valueOf(extras.getInt("dayOfMonth")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T10:11:19.030

您正在传递整数值，

```
int year=extras.getInt("year");
        int month=extras.getInt("month");
        int dayOfMonth=extras.getInt("dayOfMonth"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T10:29:48.017

> 当您编写此代码时

```
 Bundle extras=getIntent().getExtras();
     if(extras!=null)
    {
    String year=extras.getString("year");
    String month=extras.getString("month");
    String dayOfMonth=extras.getString("dayOfMonth");
    String date=dayOfMonth+"/"+month+"/"+year;

    TextView tv=(TextView)findViewById(R.id.textView1);
    tv.setText(date);

    } 
```

# java - XML 解析错误

> ID：11984902
> 
> 赞同：0
> 
> 时间：2012-08-16T10:06:14.713
> 
> 标签：java, xml, xml-parsing

我正在使用 xml 标记中的这个值来加密起诉 PKCS-7 的数据，当我解析这个 xml 时，它给了我

> [致命错误]：1:108：在文档的元素内容中发现了无效的 XML 字符（Unicode：0x6）。错误：org.xml.sax.SAXParseException：在文档的元素内容中发现了无效的 XML 字符（Unicode：0x6）。

请帮我解决这个问题
**非常感谢**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:11:35.953

XML 中不允许使用 ACK 字符。在解析之前，您可能会在 XML 中编码您的 PKCS-7 字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T10:14:04.307

PKCS7 文本似乎有一个无效字符，即“ACK”

您可以阅读有关它的其他答案：

[发现无效的 XML 字符 (Unicode: 0xc)](https://stackoverflow.com/questions/5742543/an-invalid-xml-character-unicode-0xc-was-found)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T19:54:09.410

在 XML 文档中包含二进制数据的一种方法是对值进行 base-64 编码。否则（正如您所发现的）数据很容易包含在 XML 数据流中不合法的字符。XML 确实允许一些控制字符，但只允许 U+0009（制表符）、U+000A（LF）和 U+000D（CR）。

当然，使用 base64 确实需要 (a) 无论您用来生成 XML 的系统是否具有执行 base64 编码的功能（如果您有一个加密库来生成 PKCS7，我猜您有一个 base64 编码功能)，并且 (b) 使用您正在生成的 XML 的所有系统都知道期望该值是 base64 编码的。如果您使用 XSD 模式来定义数据源和数据接收器之间的契约，则可以很容易地使模式表明所讨论元素的值必须是 base-64 编码的。否则，您只需记录事实即可。

# php - PDO - 准备好的语句

> ID：11984909
> 
> 赞同：0
> 
> 时间：2012-08-16T10:06:43.150
> 
> 标签：php, mysql, pdo, prepared-statement

我有两个递归函数：

1)

```
function getCategories($id)
{
    global $con;
    $select = $con->prepare('SELECT * FROM categories WHERE parent_category_id = :parent_category_id OR (parent_category_id IS NULL AND :parent_category_id IS NULL)');
    $select->bindValue(':parent_category_id', $id, PDO::PARAM_NULL || PDO::PARAM_INT);
    $select->execute();
    // fetching.........
    for() ... getCategories(.......);
} 
```

2)

```
$select = $con->prepare('SELECT * FROM categories WHERE parent_category_id = :parent_category_id OR (parent_category_id IS NULL AND :parent_category_id IS NULL)');

function getCategories($id)
{
    global $select;
    $select->bindValue(':parent_category_id', $id, PDO::PARAM_NULL || PDO::PARAM_INT);
    $select->execute();
    // fetching.........
    for() ... getCategories(.......);
} 
```

哪个更好/更快？只准备一次声明会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:10:21.967

第二个应该更快，因为您不调用不需要的语句。准备好的语句的想法是你必须准备一次。但最好的找出方法是分析。

这是简单的方法：

```
$start = microtime(true);

for ($i = 0; $i < 1000000; $i++){
     //your code here
}

echo microtime(true) - $start; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:11:46.053

您的第二个函数肯定要快得多，尤其是当它经常执行时。因为这是发明预准备语句的主要原因：您的 SQL 服务器只需解析和优化一次查询。但是在您的第一个解决方案中，您甚至不需要准备好的语句。因此，在我看来，只需要进行性能分析测试来确定第二个测试*的速度有多快*，而不是找出它是否更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T10:13:56.617

第二种变体更快，因为您准备“模板”（使用`prepare()`方法），然后将值发送到模板并在每次迭代中执行查询。

# java - 我可以根据带注释的 @WebService 类/接口自动发现 beans.xml 的 jaxws:endpoints 吗？

> ID：11984912
> 
> 赞同：2
> 
> 时间：2012-08-16T10:06:54.900
> 
> 标签：java, spring, maven, annotations, cxf

我创建了一个 cxf/spring 项目：

mvn archetype:create -DarchetypeGroupId=org.apache.cxf.archetype -DarchetypeArtifactId=cxf-jaxws-javafirst

生成的项目有一个用 @WebService 注释的 HelloWorld.java 接口和一个用 endpointInterface=mypackage.HelloWorld 注释的 HelloWorldImpl.java。

有一个 beans.xml 文件包含：

```
<jaxws:endpoint
   id="helloWorld"
   implementor="mypackage.HelloWorldImpl"
   address="/HelloWorld" /> 
```

如果我想添加更多服务，看起来我应该继续在 beans.xml 中添加新端点。由于这些类已经被注释为@WebService，为什么它不能在某些包/搜索路径中自动发现任何新服务？有什么方法可以配置这个项目来做到这一点？

基本上，我只是想避免重复自己。信息已经在注释中，所以我不想每次添加服务时都编辑其他文件。

如果我删除 beans.xml 中的 jaxws:endpoint 标记，然后`mvn install tomcat:run`localhost:8080/myArtifactId 只会显示一个页面，说明没有定义服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:01:25.587

当您使用 CXF 时，您应该知道您添加的所有端点都由使用 Spring 上下文查找它们的 CXFServlet 管理。`beans.xml`是 Spring 上下文的配置文件。因此，如果您`<jaxws:endpoint/>`从该文件中删除该节点，则您的 Spring 上下文和因此 CXFServlet 将无法找到您的服务端点。

# javascript - Google Maps Javascript v3 自定义控件继承标准控件

> ID：11984914
> 
> 赞同：0
> 
> 时间：2012-08-16T10:06:56.580
> 
> 标签：javascript, google-maps, google-maps-api-3

是否可以在 Javascript API v3 中对现有的 google 控件进行子类化？

我希望我的自定义控件具有相同的样式和下拉行为。而且，当屏幕尺寸改变时改变。

根据[https://developers.google.com/maps/documentation/javascript/controls](https://developers.google.com/maps/documentation/javascript/controls)，控件会发生变化，例如，在 android 设备上查看时。

任何的想法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:50:22.777

控制对象不作为 API 的一部分公开。您所需要处理的只是可以在没有警告的情况下更改的 DOM 节点。所以不，你不能扩展现有的控件。您需要重新创建它们。

# java - 有效的字符串拆分

> ID：11984915
> 
> 赞同：0
> 
> 时间：2012-08-16T10:07:00.440
> 
> 标签：java, string, performance, split

我有一个“文本”文件，我必须从中逐行读取数据。文件包含大约 1330 行。我需要读取每一行（这是一个字符串），然后将其拆分为子字符串，这些子字符串将作为数据插入到数据库中。

*   我能够逐行读取文件中的数据。
*   我也可以将数据插入数据库。

我必须拆分的字符串长度大约有 2750 个字符。拆分此字符串的 1 个选项将使用 'substring(start, end)' 方法。但是，由于该行有 2750 个字符，因此拆分字符串的数量将在 200 - 225 左右（我有映射表明某些字符长度将具有 Xml 中的字符串）。

有人可以建议任何其他拆分这些字符串的技术吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T10:11:19.343

我怀疑给定您的数字，您的初始方法将完全符合任何标准 JVM 内存限制。

与以往一样，*过早的优化是万恶之源*。我会尝试一个简单的拆分，如果您有问题，请考虑对其进行改进。我怀疑一行 2700 个字符的 200 个字符串不会有问题。

请注意，该`String`对象实现了[享元模式](http://en.wikipedia.org/wiki/Flyweight_pattern)。也就是说，`substring()`不复制字符串，而只是在窗口上报告原始`String`数据（char 数组）。因此，使用的实现`substring()`将使用很少的额外内存（对于它的价值）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:09:49.643

您可以使用类的`split()`方法`String`来拆分字符串，但是要拆分该字符串，它必须具有一些分隔符，例如逗号，破折号或其他内容，并且使用该分隔符可以拆分字符串。

```
String str = "one-two-three";
String[] temp;

/* delimiter */
String delimiter = "-";
/* given string will be split by the argument delimiter provided. */
temp = str.split(delimiter); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T10:17:32.247

由于您已经定义了开始/结束并且似乎甚至不需要解析字符串，因此子字符串调用可能是最快的方法。子字符串中的查找将命中数组索引，内存中的地址，因此查找可能是 O(1) ......然后也许 Java 会复制出所需的特定字符串，但这无论如何都必须发生，而且只会是如果没有重叠，即使对于所有子字符串也是 O(n)。

substring 实际上并没有改变底层字符串，它只是在每次调用时复制出你正在寻找的相关部分（如果它甚至这样做，理论上它有可能返回一种封装了原始字符串）。除非您确定了实际的性能问题，否则最简单的解决方案就是最好的解决方案。

例如，如果您必须拆分逗号，我会使用 CSVReader 库。

# php - 通过 php system() 传递多行 html 作为参数

> ID：11984917
> 
> 赞同：3
> 
> 时间：2012-08-16T10:07:03.180
> 
> 标签：php, python, shell, exec

由于与实际问题无关的原因，我需要通过 PHP 调用并使用外部脚本对完整的 html 文档执行字符串替换。替换字符串和源代码需要通过 php exec() 传递给这个脚本。对于这个例子，我使用了一个简单的 python 脚本来接管替换。

PHP 脚本如下所示：

```
$source = file_get_contents("somehtmlfile.html");
$replaceString = "Some text in the HTML doc";
$replaceTo = "Some other text";
$parsedString = system("python replace.py $replaceString $replaceTo $source", $retval);
print ("Done:" .$mystring); 
```

然后 Python 脚本将执行以下操作：

```
import sys
import string
dataFrom = sys.argv[1];
dataTo = sys.argv[2];
dataSourceCode = sys.argv[3];
rep = dataSourceCode.replace(dataFrom, dataTo);
print rep; 
```

问题是我不能将完整的 html 源代码作为参数传递给 shell，至少不能以上面显示的方式。据我了解，当 html 代码传递给 shell 时，它会将某些部分解释为命令（我想多行可能是一个问题）。

我从脚本收到的输出：

sh: 无法打开 !DOCTYPE: 没有这个文件 sh: 无法打开 html: 没有那个文件 sh: 无法打开 head: 没有那个文件 sh: 无法打开 title: 没有那个文件

...（继续）

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:17:52.527

它不起作用，因为您作为参数传递的 html 文本中有空格和引号，因此它被视为多个参数。要解决这个问题，您必须在参数周围加上引号。
正确的代码是`$parsedString = system("python replace.py '$replaceString' '$replaceTo' '$source'", $retval);`

# android - 在kindle fire设备中启动应用程序时如何停止再次调用onCreate？

> ID：11984926
> 
> 赞同：0
> 
> 时间：2012-08-16T10:07:28.687
> 
> 标签：android, android-intent, amazon, kindle-fire

我开发了一个有两个屏幕的 android 应用程序。该应用程序可以很好地与 android 设备配合使用。但我在**亚马逊 Kindle Fire**平板电脑上安装了应用程序，启动应用程序启动良好。我从第一个屏幕导航到第二个屏幕并按下主页按钮。我再次从应用程序菜单启动应用程序。应用程序显示第一个屏幕而不是第二个屏幕。android的常见行为是应该显示第二个屏幕。

我所知道的是，当按下主页按钮时，应用程序将进入 onPause() 状态并启动应用程序表单启动器图标，它将出现在 onResume 之前并显示它之前的屏幕。但是应用程序每次从启动器图标启动时都会调用 onCreate。这仅发生在**亚马逊 kinlde fire**平板电脑中。

我正在使用 startActivity(intent) 从第一个活动开始第二个活动；方法 我可能需要为 Kindle Fire 平板电脑使用任何标志。

请尽快建议我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:39:34.227

Android 不保证一旦您`back`从活动中按下，它将保持在该`onPause`状态。这取决于内存杀手有多激进，或者设备内存有多低。这意味着，不要指望您的应用程序`onPause`永远处于状态。

您可以做的是，将活动状态保存在共享首选项中，并让`Application`对象启动相应的活动，如果需要，恢复 UI 状态。

# regex - 用于检查邮政地址字段值的正则表达式

> ID：11984931
> 
> 赞同：0
> 
> 时间：2012-08-16T10:07:39.840
> 
> 标签：正则表达式，最小长度为 10，还包含数字和字符：, lotus, xpages, regex, field, textfield, xpages, lotus

我正在寻找一个可用于检查邮政地址字段值的[正则表达式，最小长度为 10，还包含数字和字符：](/questions/tagged/regular-expression "显示标记为“正则表达式”的问题")

目前我使用这个表达式：

```
`\\[a-zA-Z]|\d|.|\s{10,}` 
```

环境是：

[lotus](/questions/tagged/lotus "显示标记为“莲花”的问题") [xpages](/questions/tagged/xpages "显示标记为“xpages”的问题")，正则表达式存储在应用程序设计中的属性文件中。

```
<xp:inputText id="address" dojoType="dijit.form.ValidationTextBox" value="#{complaintDocument.address}">
    <xp:this.dojoAttributes>
    <xp:dojoAttribute name="promptMessage">
            <xp:this.value><![CDATA[${javascript:clientData['address']}]]></xp:this.value>
        </xp:dojoAttribute>                     
        <xp:dojoAttribute name="placeHolder">
            <xp:this.value><![CDATA[${javascript:common['textValueMinimumTenCharacters']}]]></xp:this.value>
        </xp:dojoAttribute>                                         
        <xp:dojoAttribute name="trim" value="true">
        </xp:dojoAttribute>
        <xp:dojoAttribute name="regExp">
            <xp:this.value><![CDATA[#{javascript:regExp['minimumTenCharacters']}]]></xp:this.value>
        </xp:dojoAttribute>
    </xp:this.dojoAttributes>
</xp:inputText> 
```

是否有任何方法可以使为此目的的正则表达式更简单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:25:16.400

I dont thinkt that your regex can be any simpler. Maybe you could use

> .{10} > any character, max 10 length

* * *

If you want to check if a zipcode is valid you can make a java class that is used to check if the zipcode that was filled in is correct. This class can be a stored in the application scope

```
 <faces-config>
    <managed-bean-name>
    yourzipcodeclass</managed-bean-name>
    <managed-bean-scope>
    application</managed-bean-scope>
<managed-bean-class>yourclass</managed-bean-class>
</faces-config>

    </faces-config> 
```

Anyways When you want to check if a value is a valid zipcode you should add a method to this class isValidZipCode(String code, String country)

in this method you check depending on the country you have given if the zipcode is correct. How you check it is up to you. You can use a regex for every country or you can use a webservice, or a lookup in a database etc.

You can use this method in a custom validator.

# c - 按需阅读，如何在不下载的情况下从在线大文件中读取前256字节？

> ID：11984932
> 
> 赞同：7
> 
> 时间：2012-08-16T10:07:46.457
> 
> 标签：c, winapi, file-io, webdav

我只需要从映射的 WebDAV 驱动器中读取大文件中的前 256 B。

我打开文件

```
h_second = CreateFileA(second_server, GENERIC_READ, FILE_SHARE_READ, NULL, OPEN_EXISTING, FILE_FLAG_SEQUENTIAL_SCAN, NULL); 
```

但它首先下载整个文件，然后我可以阅读它。我想要一些东西，它只下载一小部分文件，我读了它。

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:46:55.233

WebDAV 是 HTTP 的扩展，HTTP 已经有了[范围请求。](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35.2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-09T19:39:52.970

WebDAV 是 HTTP 的扩展，HTTP 已经有了范围请求。我认为解决这个问题并不重要。

# 包括 abc.def.c

# c# - 替换第一次出现在字符串 VB.NET 中的字符组合

> ID：11984934
> 
> 赞同：0
> 
> 时间：2012-08-16T10:07:49.980
> 
> 标签：c#, .net, vb.net, string, replace

当用户输入号码时，我正在尝试替换可能来自电话号码的“00”。当然，我只想将第一个 00 替换为 + 号。在Java中有这样的方法：

```
result.replaceFirst("00", "+"); 
```

.NET 中有类似的东西吗？或者在 vb.NET 中有什么聪明的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:26:44.997

尝试这个：

```
var clean = text.StartsWith("00") ? "+" + text.Substring(2) : text; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T12:31:39.637

Enigmativity 是一款很酷的 1 班轮。你也可以试试这个。。

```
 if(result.StartsWith("00"))
       result= result.Replace(result.Substring(0, 2), "+"); 
```

# php - ajax上传图片并发送数据

> ID：11984938
> 
> 赞同：-1
> 
> 时间：2012-08-16T10:08:04.007
> 
> 标签：php, html, jquery, image-processing

我有很多文本框的 html 表单，以及三个可选的图像上传。

我怎样才能制作ajax：

1) 将图片保存在服务器文件夹中[例如：./MyImages]

2) 保存图片时，它们的 URL 和所有其他文本框数据都会保存到 mysql。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:41:49.853

您可以使用[Ajax 表单](http://jquery.malsup.com/form/)使用 ajax 发布数据和文件。

然后在您的 php 文件中，您可以将图像保存到一个目录中，请参阅：[移动上传的文件](http://php.net/manual/en/function.move-uploaded-file.php)，然后将文件名保存到您的数据库。

因此，您可以使用您的网站 url、目录名和文件名来访问该 url。

# c#-4.0 - 是否可以限制用户在 C# 中拍摄屏幕快照

> ID：11984940
> 
> 赞同：0
> 
> 时间：2012-08-16T10:08:07.193
> 
> 标签：c#-4.0, screenshot

我有一个用 C# 开发的应用程序。我需要一种机制来限制用户在应用程序窗口位于顶部时进行屏幕截图。是否可以限制用户截屏？

我已经听过 PrtScr 按钮来限制窗口的内置机制来截屏。

但是如果用户使用一些捕获应用程序来捕获皮肤.. 我认为可能有一些 windows 事件或类似的东西，当截屏时触发。我需要知道它。任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T10:13:02.713

已在 SO 上讨论/回答：[如何防止打印屏幕](https://stackoverflow.com/questions/448106/how-do-i-prevent-print-screen)

在询问之前尝试搜索一下！;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-30T04:34:21.693

在 windows 窗体应用程序中，在窗体 keyup 事件中使用此代码，

```
if (e.KeyCode == Keys.PrintScreen)
            {
                Clipboard.Clear();
            } 
```

表单 keypreview 应该是真的。

# c# - 在没有基础字典结构的 PowerShell 中使用 C# ExpandoObjects (Dynamic)

> ID：11984946
> 
> 赞同：5
> 
> 时间：2012-08-16T10:08:19.033
> 
> 标签：c#, powershell, types, dictionary, expandoobject

我在 C# 中有一个**ExpandoObject**，它已经用大量字段/属性进行了初始化，我想在 PowerShell 环境中使用这个对象。当我在 PowerShell 中检索这样的对象时，它不会按应有的方式显示所有字段/属性，而是将它们（基于 ExpandoObjects 中的底层字典结构）显示为**键/值**对。

就我的实现而言，这是非常有问题的，我找不到任何方法将此键/值对转换为字段/属性，就像这样的对象应该表现的那样。将 ExpandoObject 转换为 Object 也不起作用。我错过了什么吗？

*在我的自定义 DLL (DataCollect.dll) 中合并函数*

```
public static dynamic merge(dynamic obj)
{
    // FIRST  : Get the objects out of the table layout.
    dynamic Data = retrieveObject(obj);

    // SECOND : Check if we're dealing with an array or with a single object.
    bool isCollect = isCollection(Data);

    // THIRD  : Merge objects differently depending on (bool)isCollect.
    // The functions below are merge functions that make use of the ExpandoObject's 
    // underlying Dictionary structure to display it's internal fields/properties.
    if (isCollect)
        return (Object)mergeObjectCollection(Data);
    else
        return (Object)mergeObject(Data);
} 
```

*下面是我用来加载 C# dll 并调用合并函数的 PowerShell 脚本。*

```
#Loads in the custom DLL created for this specific project.
[Reflection.Assembly]::LoadFrom("blablbabla/DataCollect.dll")

# Creates a new Client object that handles all communication between the PowerShell module and the
# sncdb-worker at server side.
$client = new-object blablbabla.Sender;
[blablbabla.Config]::Configure("blablbabla/blablbabla.ini")
$client.Connect();

# This functions returns a Host Machine (Virtual or Physical) in object notation to for easy post-processing
# in PowerShell. 
Function SNC-GetHost($hostz = "blablbabla")
{
    $obj = $client.sendMessage([blablbabla.Parser]::getHostIp($hostz)); 
    return ([blablbabla.Merger]::merge($obj)).Value;    
} 
```

*我的 PS 命令的结果是：* [![图片链接](../Images/127610125c9cbe9da9f82bb5d8e75669.png)](https://i.stack.imgur.com/4RnSY.png)

* * *

**更新**

我还没有找到如何正确地从 C# 到 PowerShell 的转换，但我确实发现了一个从 HashTables 在 PowerShell 中构建对象的小技巧。关键在于使用 Add-Member cmdlet，它允许您在基础对象（例如 System.Object）之上动态构建对象。

因此，我构建了一个模块，该模块从 HashTables 递归地构建对象（我使用递归方法，因为属性也可以是 HashTables（或 ExpandoObjects））。

```
#############################################################################
#       PowerShell Module that supplements the DataCollector Library.       #       
#         Generated on: 8/7/2012        Last update: 8/17/2012              #
#############################################################################

function HashToObject($hash)
{
    # Create a placeholder object
    $object = New-Object System.Object;
    # Dynamically add Properties to our Placeholder object from the HashTable
    $hash | foreach { 
        $object | Add-Member NoteProperty $_.Key $_.Value 
    }
    # Search for collections and recursively expand these collections to 
    # objects again.
    $object | Get-Member | 
    foreach { 
        if($_.Definition.StartsWith("System.Dynamic.ExpandoObject")) 
        { 
            Write-Host "Recursively continued on object: " -foregroundcolor DarkGreen -nonewline
            Write-Host $_.Name -foregroundcolor Yellow
            $object.($_.Name) = HashToObject($object.($_.Name))
        }
    }
    return $object;
} 
```

这确实有效，但有一些**缺点**。首先，它不保留我的**类型**信息。一切（除了集合）现在都是一个**字符串**，而不是 int、bool、float 等。第二个问题可能不是最好和最干净的解决方案。我更喜欢处理 C# DLL 中的所有内容，以便为 PowerShell 用户保持尽可能抽象的低级功能。

这个解决方案可能有效，但我仍然需要更好的实现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T04:08:52.627

到目前为止，我发现的最佳选择是在编写 cmdlet 时使用 PSObject。在 PSObject 上，您可以添加任意 PSVariable 对象来完成基本相同的操作。例如：

```
while (reader.Read())
{
    var record = new PSObject();
    for (var i = 0; i < reader.FieldCount; i++)
    {
        record.Properties.Add(new PSVariableProperty(
            new PSVariable(reader.GetName(i), reader.GetValue(i))
            ));
    }

    WriteObject(record);
} 
```

您可以直接使用 PSObject，也可以编写一个简短的代码片段来转换 ExpandoObject。鉴于您描述的场景似乎有更深的对象嵌套，转换片段可能是更好的方法。

# android - Android自定义布局动画

> ID：11984949
> 
> 赞同：0
> 
> 时间：2012-08-16T10:08:32.543
> 
> 标签：android, android-layout, layout, android-intent, android-animation

我在我的 Android 应用程序中有一个标签栏，比如图片

![在此处输入图像描述](../Images/936acccff638ce0eb856fdf1e8e78446.png)

现在我想在我的标签栏后面添加一个布局，比如图片

![在此处输入图像描述](../Images/62f232e6f6732ead6bf6625b984772ce.png)

当我单击按下按钮时，布局会出现一个翻转动画到顶部，如图片

![在此处输入图像描述](../Images/b7c01c3c21cbfd3560917142df2d98b2.png)

帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:25:47.527

您可以在具有底部重力的选项卡中使用框架布局。并单击即可调整其大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T04:04:00.857

您应该必须创建一个布局，比如说包含该 Press Button 的 pressLayout。

最初该布局是不可见的。现在，当您按下 Tab 或任何其他按钮时，该布局将显示从底部到顶部的平移（或滚动）动画。

现在，当您单击“按下按钮”时。在要影响的布局/视图上设置另一个动画。

希望你明白了。对于翻译动画，你可以看到这个：[翻译动画](http://blog.creatiosoft.com/?p=1042)

享受编码...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T11:38:51.483

您可以使用已经包含 android sdk 的[SlidingDrawer 。](http://developer.android.com/reference/android/widget/SlidingDrawer.html)

这是简单的教程：[链接。](http://www.coderzheaven.com/2011/12/01/slidingdrawer-in-android-a-simple-example/)

# php - jquery ajax返回数据不起作用

> ID：11984958
> 
> 赞同：0
> 
> 时间：2012-08-16T10:08:55.973
> 
> 标签：php, ajax, jquery

我有一个带有两个文本框和两个按钮（一个提交按钮，一个按钮）的表单。当我调用单击按钮时，它必须使用数据“CheckRegistration”进行 ajax 调用。最后，它会调用 ViewRegisteredStudents() 函数。我期望将“resultVal”搅拌返回给ajax调用，但它正在返回“resultVal”字符串和表单（两个文本框，两个按钮）。

```
 $(document).ready(function(){

             $(':button').click(function(){
                  $.ajax({
                      Url:"SkiiTripDB.php",
                      type:"POST",
                      data:{call:'CheckRegistration'},
                      dataType:"html",
                      success:function(data){
                             $('div#registeredStudents').html(data);
                      }
                  });
              });

          }); 
```

* * *

```
 if(isset($_POST['call']))
        {
                $call=$_POST['call'];

                  $connection=IsDatabaseConnected($strServer,$strUsername,$strPassword,$strDatabaseName);
                 switch($call)
                 {
                      case 'CheckRegistration':ViewRegisteredStudents();
                                                break;
                 }
                 closeDatabaseConnection($connection);   
         }

function ViewRegisteredStudents()
        {
           $resultVal="";
           $resultVal.="<table  border='2'>";
           $resultVal.="<tr>";
           $resultVal.="    <th>Student Name</th>";
           $resultVal.="     <th>Student Class</th>";
           $resultVal.=" </tr>";

           // Query database
           $strSqlQuery="SELECT sSName, sClass FROM tripregistration";

           $result=mysql_query($strSqlQuery);

           while($row=mysql_fetch_array($result))
           {
               $resultVal.="<tr>";
                $resultVal.="<td>".$row['sSName']."</td>";
                $resultVal.="<td>".$row['sClass']."</td>";
               $resultVal.="</tr>";
           }
                $resultVal.="</table>";

              echo $resultVal;

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:50:08.233

在您的 AJAX 调用中，请参阅*Url* U中 的参数
***Url:"SkiiTripDB.php"***将其转换为小写。

# java - JMeter 中的哪个类从 lib/ext 文件夹中的插件中读取类？

> ID：11984959
> 
> 赞同：2
> 
> 时间：2012-08-16T10:09:00.120
> 
> 标签：java, plugins, jmeter

谁能回答，哪个 *.class 负责从 ./lib/ext 读取 Jmeter 插件列表？或者 Jmeter 源元素树在哪里构建？

我的问题是我已经从源（maven 项目）构建了自己的 JMeter 监听器，但它没有显示在“监听器”中

我能够在运行时调试代码，但我不知道究竟是哪个类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:39:10.407

找到其他人的类是： - [http://jmeter.apache.org/api/org/apache/jorphan/reflect/ClassFinder.html](http://jmeter.apache.org/api/org/apache/jorphan/reflect/ClassFinder.html)

它有许多在不同上下文中使用的方法来查找某些接口的实现

关于树问题，我不确定是否理解，但如果是关于树模型，它是：

*   [http://jmeter.apache.org/api/org/apache/jmeter/gui/tree/JMeterTreeModel.html](http://jmeter.apache.org/api/org/apache/jmeter/gui/tree/JMeterTreeModel.html)

问候

菲利普·M。

[http://www.ubik-ingenierie.com/-Solutions-](http://www.ubik-ingenierie.com/-Solutions-)

# javascript - 如何区分文件夹和文件

> ID：11984964
> 
> 赞同：0
> 
> 时间：2012-08-16T10:09:16.347
> 
> 标签：javascript

我被困在 Javascript 中的文件夹和文件之间的区别。在这个问题中：

1.  如果我试图拖动任何文件夹，那么应该显示任何警告消息和
2.  如果我正在拖动任何文件（如 zip 文件、rar 文件、doc 文件、txt 文件等）（如果文件名是这样的：-aparna.verma 那么它也应该仅将其视为文件而不是文件夹或文件名是aparna-verma，那么它也应该只将其视为文件而不是文件夹。）然后显示警告消息。
3.  我使用了这行代码：

> ```
> if (new_file.type !== '') 
> {
>     new_list.push(new_file);
> } 
> ```

# java - 在检票口中选择时如何更改行的颜色

> ID：11984965
> 
> 赞同：0
> 
> 时间：2012-08-16T10:09:17.970
> 
> 标签：java, wicket

我遵循[这个例子](http://www.wicket-library.com/wicket-examples/repeater/wicket/bookmarkable/org.apache.wicket.examples.source.SourcesPage?SourcesPage_class=org.apache.wicket.examples.repeater.OIRPage&source=OIRPage.java)，但我想改变它。当您单击某行上的任何位置时，我想选择行，而不仅仅是某个值，所以我添加了`AjaxEventBehavior`. 问题是选择了播放器，但行的颜色仍然相同。怎么了 ？

```
listItem.add(new AjaxEventBehavior("onclick") {

    private static final long serialVersionUID = 1L;

    @Override
    protected void onEvent(final AjaxRequestTarget target) {
        selectedPlayer = player;
        HighlitableDataItem<Player> hitem = (HighlitableDataItem<Player>) listItem;
        hitem.toggleHighlite();
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T08:59:33.817

正如@jordeu 在他的评论中已经指出的那样，您必须`hitem`添加`AjaxRequestTarget`：

```
target.addComponent(hitem); 
```

将组件添加到`AjaxRequestTarget`将向 XML 响应发送回组件的标记，以及您可能在服务器端对其进行的所有更改，以及更新的模型（这对动态模型很有用）。请记住调用`setOutputMarkupId(true)`要添加到请求目标的组件。Wicket 需要标记 id（HTML`id`属性）来了解 DOM 中的哪个位置来替换 XML 响应中发送的标记。或者，用[javadoc](http://wicket.apache.org/apidocs/1.4/org/apache/wicket/ajax/AjaxRequestTarget.html)的话来说：

> 应通过 AjaxRequestTarget#addComponent(Component) 方法将需要更新标记的组件添加到此目标。当处理目标时，它的主体将被渲染并添加到信封中，并在收到 ajax 响应时在客户端刷新。
> 
> 重要的是，需要更新其标记的组件在生成的标记中包含一个 id 属性，该属性等于从 Component#getMarkupId() 检索到的值。这可以通过在 html 模板中设置 id 属性或使用属性修饰符来完成，该修饰符将带有值 Component#getMarkupId() 的属性添加到标签（例如 MarkupIdSetter ）

另外，考虑到使用 Ajax 来设置元素的样式可能有点矫枉过正。如果不需要服务器交互，您可以考虑使用 Javascript/jQuery（如果可用）为元素客户端设置样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-15T09:41:31.363

最有效的方法是将 JavaScript 渲染到您的表中。这样做**可以避免到服务器的往返**，这在这个简单的仅用于样式的情况下将是多余的。

您可以通过覆盖 DataTable#newRowItem 并将 AttributeAppender 添加到 RowItem 来实现它：

```
//override this method of the DataTable class
@Override
protected Item<T> newRowItem(String id, int index, final IModel<T> model) {

    Item<T> rowItem = new Item<T>(id, index, model);
    item.add(new AttributeAppender("onclick", "$(this).addClass('selected').siblings().removeClass('selected')",
            " "));

    return rowItem;

} 
```

在 CSS 样式表中的“选定”选择器下定义您的选择样式。

# javascript - jquery如何将多个字符串放入一个字符串中

> ID：11984966
> 
> 赞同：-2
> 
> 时间：2012-08-16T10:09:19.050
> 
> 标签：javascript, jquery

```
<span class='st_twitter_large' displayText='Tweet'></span>
<span class='st_linkedin_large' displayText='LinkedIn'></span>
<span class='st_facebook_large' displayText='Facebook'></span> 
```

当我复制并粘贴上面的代码时，我需要通过验证来删除它们之间的空格，即（它们之间的'/n'标签）............它应该看起来像这样

```
<span class='st_twitter_large' displayText='Tweet'></span><span class='st_linkedin_large' displayText='LinkedIn'</span><span class='st_facebook_large' displayText='Facebook'></span> 
```

我怎样才能得到它.....任何帮助将不胜感激

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:14:08.530

你不需要为此使用jQuery，你可以通过本机`replace`方法来实现：

```
var myStr = "..."; //whatever string you have
myStr = myStr.replace(/\r?\n/g, ""); 
```

* * *

但我不确定这是否真的解决了你的问题，看起来你试图做一些不同的事情，无论如何上面的代码将从字符串中删除所有“回车”和“换行”字符

# c# - DataGridView 中的只读列和行

> ID：11984970
> 
> 赞同：1
> 
> 时间：2012-08-16T10:09:40.390
> 
> 标签：c#, datagridview

我在 WinForms 应用程序中有一个 datagridview，我希望所有列栏都被锁定以进行编辑。我可以使用以下代码实现这一点：

```
foreach (DataGridViewColumn col in myGrid.Columns)
{
    if (col.Name == "LockedColumn")
    {
        col.ReadOnly = false;
    }
    else
    {
        col.ReadOnly = true;
    }
} 
```

但是，我还需要对该列进行条件锁定，具体取决于每行中其他位置的值。我尝试了以下代码：

```
foreach (DataGridViewRow row in myGrid.Rows)
{
    if ((bool)row.Cells["ConditionalColumn"].Value == false)
    {
        row.ReadOnly = false;
    }
    else
    {
        row.ReadOnly = true;
    }
} 
```

但是，这会锁定整个网格，这不是我想要的。通过表格示例，我所追求的可能会更清楚。

ColA ColB ColC

第 1 行真值 1

第 2 行假值 2

第 3 行真值 3

我希望 A 列和 B 列全部锁定（只读），并且 Col C 的默认值允许编辑，除非 B 列中的值为 false。因此，在上面的示例中，只有 value1 和 value3 是可编辑的。

但是我似乎无法实现这一点，因为如上所述，如果我循环遍历具有将 readonly 设置为 false 的条件的行，则所有内容都被锁定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T10:56:56.760

您显示的代码不应该编译，也没有正确检查`DataGridView`.

如果您将代码更改为查看行类似于下面的代码，那么您应该能够根据列将各个行设置为只读：

```
foreach (DataGridViewRow row in myGrid.Rows)
{
    if (row.Cells["ConditionalColumn"].Value == null || (bool)row.Cells["ConditionalColumn"].Value == false)
    {
        row.ReadOnly = false;
    }
    else
    {
        row.ReadOnly = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T03:28:13.347

问题在于以下行

```
row.ReadOnly = false; 
```

当改为

```
row.Cells["colName"].ReadOnly = false; 
```

它按预期工作

# java - vaadin - 无法加载应用程序类

> ID：11984972
> 
> 赞同：1
> 
> 时间：2012-08-16T10:09:43.323
> 
> 标签：java, tomcat, vaadin

当我尝试在本地 Tomcat 7 应用程序服务器上运行它时，我收到 javax.servlet.ServletException: Failed to load application class: com.example.App。

这是堆栈跟踪：（完整）

```
javax.servlet.ServletException: Failed to load application class: com.example.App
    com.vaadin.terminal.gwt.server.ApplicationServlet.init(ApplicationServlet.java:71)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    java.lang.Thread.run(Thread.java:722) 
```

这是我的 web.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <web-app  xmlns="http://java.sun.com/xml/ns/j2ee"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee
        http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"
        version="2.4">
    <servlet>
        <servlet-name>ApplicationServlet</servlet-name>
        <servlet-class>com.vaadin.terminal.gwt.server.ApplicationServlet</servlet-class>
        <init-param>
            <param-name>application</param-name>
            <param-value>com.example.App</param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>ApplicationServlet</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>

</web-app> 
```

App.class 位于 WEB-INF/classes/com/example/ 中：

```
package com.example;

import com.vaadin.Application;
import com.vaadin.ui.Label;
import com.vaadin.ui.Window;

public class App extends Application {

    @Override
    public void init() {
        Window main = new Window("Hello");
        setMainWindow(main);
        main.addComponent(new Label("Hello, world!"));

    }
} 
```

我做错了什么？

你能给我任何逐步部署的手册吗？

PS更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:41:04.787

vaadin-xx.yy.zz.jar 在 WEB-INF/lib 中吗？它需要。

# vba - 用于列出名称的 VBA 宏代码

> ID：11984979
> 
> 赞同：0
> 
> 时间：2012-08-16T10:10:18.613
> 
> 标签：vba, excel, for-loop

我有一个 Excel 工作表，其中名称为一列，其工作时间为下一列中的值。

我想将值大于 40 的名称复制到新工作表中，并且列中没有任何空格。新的工作表应该有名字和工作时间；值列中的任何文本都应被忽略。

```
Sub CopyCells()
    Dim sh1 As Worksheet, sh2 As Worksheet 
    Dim j As Long, i As Long, lastrow1 As Long 

    Set sh1 = Worksheets("Sheet1") 
    Set sh2 = Worksheets("Sheet2") 
    lastrow1 = sh1.Cells(Rows.Count, "F").End(xlUp).Row 

    For i = 1 To lastrow1 
        If sh1.Cells(i, "F").Value > 20 Then 
            sh2.Range("A" & i).Value = sh1.Cells(i, "F").Value 
        End If 
    Next i 
End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T10:26:23.970

I would recommend using `AutoFilter` to copy and paste as it is faster than looping. See the example below.

**My Assumptions**

1.  Original Data is in Sheet 1 as shown the snapshot below
2.  You want the output in Sheet 2 as shown the snapshot below

**CODE**

I have commented the code so that you will not have a problem understanding it.

```
Option Explicit

Sub Sample()
    Dim wsI As Worksheet, wsO As Worksheet
    Dim lRow As Long

    '~~> Set the input sheet
    Set wsI = Sheets("Sheet1"): Set wsO = Sheets("Sheet2")

    '~~> Clear Sheet 2 for output
    wsO.Cells.ClearContents

    With wsI
        '~~> Remove any existing filter
        .AutoFilterMode = False

        '~~> Find last row in Sheet1
        lRow = .Range("A" & .Rows.Count).End(xlUp).Row

        '~~> Filter Col B for values > 40
        With .Range("A1:B" & lRow)
            .AutoFilter Field:=2, Criteria1:=">40"
            '~~> Copy the filtered range to Sheet2
            .SpecialCells(xlCellTypeVisible).Copy wsO.Range("A1")
        End With

        '~~> Remove any existing filter
        .AutoFilterMode = False
    End With

    '~~> Inform user
    MsgBox "Done"
End Sub 
```

**SNAPSHOT**

![enter image description here](../Images/14ffa8f120cd2a65c54e111a9eb0c4c9.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T10:24:49.843

Try rhis

```
Sub CopyCells()
    Dim sh1 As Worksheet, sh2 As Worksheet
    Dim j As Long, i As Long, lastrow1 As Long
    Set sh1 = Worksheets("Sheet1")
    Set sh2 = Worksheets("Sheet2")
    lastrow1 = sh1.Cells(Rows.Count, "F").End(xlUp).Row
    j = 1
    For i = 1 To lastrow1
        If Val(sh1.Cells(i, "F").Value) > 20 Then
            sh2.Range("A" & j).Value = sh1.Cells(i, "F").Value
            j = j + 1
        End If
    Next i
End Sub 
```

# javascript - 有什么方法可以清除客户端上的 XHR 缓存数据吗？

> ID：11984986
> 
> 赞同：0
> 
> 时间：2012-08-16T10:10:30.447
> 
> 标签：javascript, jquery, ajax, xmlhttprequest, jqxhr

使用 javascript 或其库有什么方法可以清除客户端上缓存的 XHR 数据？

我想在几个本地主机上测试我的应用程序，想在客户端而不是服务器上清除 XML HTTP 请求，有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:12:19.387

简单的解决方案简单在最后添加了一些额外的参数，例如：原始

```
http://yoursite.com/index.html 
```

并避免缓存

```
http://yoursite.com/index.html?rnd=123456 
```

# zend-framework - 从单个模块的 URL 中隐藏索引控制器

> ID：11984988
> 
> 赞同：0
> 
> 时间：2012-08-16T10:10:45.910
> 
> 标签：zend-framework, zend-route, zend-config

为单个模块创建模块化结构后会阻止 url 出现控制器的名称。

一切正常

```
site.con/foo/index/action/ 
```

我希望我能写成

```
site.com/foo/action/ 
```

IndexController 是该模块的唯一控制器。

我已经测试了几种解决方案，但都不起作用。作为 ZF 的第一个应用程序，我不太清楚要采取的步骤。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T10:57:28.260

你需要[Zend Routes](http://framework.zend.com/manual/en/zend.controller.router.html)。

定义你的路线

> 引导程序.php

打开您的 bootstrap.php 并输入以下内容：

```
function _initRoutes() {
        $front_controller = Zend_Controller_Front::getInstance();
        $router = $front_controller->getRouter();
        $router->addRoute('foo-action', new Zend_Controller_Router_Route(
            '<foo module name>/<action name>', array('module' => 'foo', 'controller' => 'index', 'action' => '<action-name>')
        ));
} 
```

PS：工作/没工作？在评论中提及，如果不起作用，请给出模块、控制器和操作的正确名称。

编辑：

如何在 application.ini 中设置默认控制器/模块

```
routes.index.type = "Zend_Controller_Router_Route"
routes.index.route = "/"
routes.index.defaults.module = "<module name>"
routes.index.defaults.controller = "index"
routes.index.defaults.action = "index" 
```

解决了吗？

# c# - 为什么 HttpContext.Current.Session["value"].ToString() 在 App_Code 类文件中给出空值，对象引用未设置为对象的实例

> ID：11984992
> 
> 赞同：1
> 
> 时间：2012-08-16T10:10:50.510
> 
> 标签：c#, asp.net, session

这里的场景是 HttpContext.Current.Session["value"].ToString() 给出空值，甚至在用户登录时已经设置了会话值。

**我的网络配置**

```
<sessionState timeout="40" mode="InProc"/> 
```

**我的全球.asax**

```
 void Session_Start(object sender, EventArgs e) 
    {
       // Code that runs when a new session is started
       Session["EmployeeId"] = "";
       this.Session["DomainName"] = "";
    } 
```

**在我的 Defaultpage.asppx.cs**

`Emp_grade empgrd = new Emp_grade();`给出未设置为对象实例的对象引用

```
using System.Data;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.Configuration;

public partial class EmpGrade : System.Web.UI.Page
{

   //here am getting error(The type initializer for 'Emp_grade' threw an exception)
   // stack error message  Object reference not set to an instance of an object.
   Emp_grade empgrd = new Emp_grade(); 

   protected void Page_Load(object sender, EventArgs e)
    {
      logic code...
      Datatable dt= empgrd.EmpRecord();
    }
} 
```

在我的`App_Code folder`我有类文件`Emp_grade.cs`

```
using System;
using System.Data;
using System.Configuration;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Data.SqlClient;
using System.Web.Configuration;
using System.Web.SessionState;

public class Emp_grade  
{       
    public Emp_grade()
    {
        //TODO: Add constructor logic here
    }

    static string getConnection = HttpContext.Current.Session["DomainName"].ToString();
    SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings[getConnection].ConnectionString);

     public DataTable EmpRecord()
    {
       logic code
    }
 } 
```

**我的登录页面：**

```
 protected void Page_Load(object sender, EventArgs e)
    { 
    //set some value
     Session["DomainName"] = domainname;
    } 
```

**截图（调试）** ![在此处输入图像描述](../Images/8c46797b27018ed815979fbae6cb27b4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T10:47:08.393

您可能应该重构一下。这：

```
static string getConnection = HttpContext.Current.Session["DomainName"].ToString(); 
```

是一个带有初始化器的静态字段。它将运行**一次**，并保留它获得的任何值，直到应用程序重新启动。并且它会在没有很好定义的时间运行，只是保证它会在第一次访问之前的某个时间运行。

这意味着它很可能在不`HttpContext`存在的时候运行（如**Dan Puzey**所写），这将导致抛出异常。任何后续访问它的尝试都会（据我所知）导致抛出相同的异常。

但请记住，它只获取一次，因此即使初始化程序成功并找到了一个值，该值也将用于`getConnection`. 不会为每个不同的用户重新获取它。

为了解决这个问题，你可以将它包装在一个实例方法中：

```
private string GetDomainName()
{
    return HttpContext.Current.Session["DomainName"].ToString();
}
SqlConnection conn = null; 
```

然后`conn`在构造函数中初始化：

```
public Emp_grade()         
{         
    conn = new SqlConnection(ConfigurationManager.ConnectionStrings[GetDomainName()].ConnectionString);
} 
```

另请注意，由于此类正在初始化和存储 a `SqlConnection`（即`IDisposable`），因此您的类还应实现该`IDisposable`接口。有关实施的背景信息`IDisposable`，请参见例如[此答案](https://stackoverflow.com/questions/538060/proper-use-of-the-idisposable-interface/538238#538238)。

**编辑**：屏幕截图显示`HttpContext.Current.Session`返回 null。

原因是这一行：

```
Emp_grade empgrd = new Emp_grade(); 
```

这是在 Page 类中声明一个带有初始化程序的实例成员。初始化程序在请求管道中很早就运行，因此在它运行时 Session 还没有出现在上下文中。

改成：

```
Emp_grade empgrd = null;

protected void Page_Load(object sender, EventArgs e) 
{ 
  empgrd = new Emp_grade();
  Datatable dt = empgrd.EmpRecord(); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T10:16:15.830

您`.Session["DomainName"]`在构造函数中引用静态字段。这可能会在您的任何其他代码之前运行。它很可能会在任何外部运行`HttpContext`，因为它很可能会在应用程序初始化时运行，在第一个请求被处理之前。

我怀疑制作`getConnection`非静态会解决问题。

# c++ - 如何在多维数组中输入值？

> ID：11984994
> 
> 赞同：0
> 
> 时间：2012-08-16T10:11:08.377
> 
> 标签：c++, multidimensional-array

我有

```
main(){...
float **tree;   
//How to set some values here for e.g. If I want tree to be a 15x2 array of some values?
reprVectorsTree *r1 = new reprVectorsTree(tree,8,2);
...}

reprVectorsTree(float **tree, int noOfReprVectors, int dimensions)
{..... 
```

如何在这里使用 malloc 以便我可以在树数组中设置一些数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:16:20.877

要为 分配内存`tree`，请尝试以下操作：

```
float** tree;
tree = (float**)malloc(15 * sizeof(float*));
for(i = 0; i < 15; i++) 
    tree[i] = (float*)malloc(2 * sizeof(float)); 
```

现在您可以设置值：

```
for(i = 0; i < 15; i++)
    for(j = 0; j < 2; j++)
        tree[i][j] = 2; 
```

以后别忘了`free`，虽然我不明白你们为什么要结合`new`在一起`malloc`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:19:25.233

我想这是`tree`您要分配的变量。

你可以这样做：

```
float **tree;

// Allocate 15 "arrays"
tree = new float*[15];

for (int i = 0; i < 15; i++)
{
    // Allocate a new "array" of two floats
    tree[i] = new float[2];

    // Fill the newly allocated floats with "random" data
    tree[i][0] = 1.0;
    tree[i][1] = 2.0;
} 
```

但是，如果可能的话，我建议您将`reprVectorsTree`对象更改为接受`std::vector< std::vector< float > >`。

# internet-explorer - 为 IE8/9 创建附加组件

> ID：11984997
> 
> 赞同：0
> 
> 时间：2012-08-16T10:11:12.460
> 
> 标签：internet-explorer, internet-explorer-8, ieaddon

我的任务是将 Chrome 浏览器扩展“移植”到 Intrenet Explorer 插件。但是，即使在开始时我也遇到了很多麻烦。特别是很难细化任何类型的一般指南，为此启动资源。在 SO 上在这里找到的许多链接都已失效，或者现在已经过时，或者提供了一些关于某个主题的非常通用的信息（例如 BHO 的模板）。

现在是否有某种*资源*用于 IE 插件开发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:31:08.063

我写了一篇关于这个的文章，但只用捷克语。但你可以下载我的演示[工具栏按钮](http://events.dajbych.net/demos/ie.addon.main.zip)或[浏览器帮助对象](http://events.dajbych.net/demos/ie.addon.dom.zip)。您必须创建一个*ATL 项目*并检查*IObjectWithSite*。[我文章](http://dajbych.net/jak-vytvaret-doplnky-pro-internet-explorer-dil-1)中的图像逐步显示了这一点。它们来自英语 Visual Studio。希望能帮助到你。