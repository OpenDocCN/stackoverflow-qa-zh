# StackOverflow 问答 11311000-11311999

# gtk - Gtk.Application 关键加速器不工作

> ID：11311000
> 
> 赞同：0
> 
> 时间：2012-07-03T12:33:26.570
> 
> 标签：gtk, vala

这是我的问题：

我正在尝试使用 (string,VoidFunc) 的字典向我的应用程序添加键盘控制

我首先创建一个名为“app”的操作。+ key_name（例如“h”）并做

action.activate.connect( () => f() ) 其中 f 是函数（VoidFunc 实例）。

然后我将该操作添加到我的应用程序中。

然后我使用 Gtk.accelerator_name 创建一个加速器并将其添加到我的应用程序中。

我正在继承 Gtk.Application。

这是完成这项工作的两个主要功能。

```
private void install_keyboard_support()
{
    Gee.HashMap<string,VoidFunc> actions = new Gee.HashMap<string,VoidFunc>();
    fill_actions(ref actions);
    int i = 0;int sz = actions.size;
    while(i < sz)
    {
        string k = actions.keys.to_array()[i];
        var f = actions[k];
        var action_name = "app." + k;

        var action = new SimpleAction(action_name,null);
        action.activate.connect(() => f());
        this.add_action(action);

        var accel_name = Gtk.accelerator_name(k.data[0],Gdk.ModifierType.CONTROL_MASK);
        this.add_accelerator(accel_name,action_name,null);

        _puts(@"Added accelerator with name = $accel_name and which trigers $action_name action!");

        i++;
    }

    _puts("Installed keyboard support!");
}

private void fill_actions(ref Gee.HashMap<string,VoidFunc> actions)
{
    actions["h"] = () => Process.spawn_command_line_async("xdg-open /usr/share/doc/ewns-viewer/help.html");
} 
```

如您所见，一切都应该正常工作:)。

有效的一件事是做

```
this.add_accelerator("<Primary>h","app.help",null) 
```

app.help 是一个简单的动作，定义为

```
var help_action = new SimpleAction("help",null);
    help_action.activate.connect(() => Process.spawn_command_line_async("xdg-open /usr/share/doc/ewns-viewer/help.html"));
    this.add_action(help_action); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:27:41.760

问题是我用“app”创建了动作。+ k 而应用程序。不需要前缀。

# asp.net - 网站登录的“记住我”选项是否有标准？

> ID：11311001
> 
> 赞同：0
> 
> 时间：2012-07-03T12:33:29.943
> 
> 标签：asp.net, authentication

我的公司已将一些 Web 开发分包出去，他们创建的 ASP.NET 站点有一些我认为有问题的功能。该网站的一部分是登录和“记住我”功能。他们可以在登录网站时选择“记住我”。登录后，退出的唯一方法是清除本地缓存并删除站点创建的所有 cookie。（他们有一个注销链接，但它没有做任何事情）。所以基本上，一旦你登录，你就终生登录。

我告诉他们这是错误的，用户明确的“注销”应该始终终止用户会话并删除任何类型的缓存登录信息。

所以我的问题是：登录“记住我”功能是否有标准？

**编辑：** 所以，重申我的问题细节。我不是在问您如何注销用户。对我来说，注销时会终止用户会话和任何 cookie，这完全有道理。

我的问题是有任何情况，而当用户单击“注销”按钮时，它什么也不做。换句话说，如果用户登录并选中“记住我”按钮，用户是否应该永远登录，除了清除用户缓存之外没有其他方法可以注销？这对我来说似乎很奇怪，但我们聘请的承包商似乎就像早上升起的太阳一样正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:07:27.947

好吧，我在 OpenId 和 MVC 上遇到了类似的问题，所以我找到了这个片段：

```
 public ActionResult LogOff()
        {
            FormsAuthentication.SignOut();
            Session.Abandon();

            HttpCookie cookie1 = new HttpCookie(FormsAuthentication.FormsCookieName, "");
            cookie1.Expires = DateTime.Now.AddYears(-1);
            Response.Cookies.Add(cookie1);

            HttpCookie cookie2 = new HttpCookie("ASP.NET_SessionId", "");
            cookie2.Expires = DateTime.Now.AddYears(-1);
            Response.Cookies.Add(cookie2);

            return RedirectToAction("Index", "Home");
        } 
```

这将清除会话和 cookie，即使它们被 FormsAuthentication 标记为持久性，我认为这在选中“记住”时会发生，希望它有所帮助！

**更新：**

**记住我**的功能只是为了让您不会得到会话超时并在一段时间后自动退出。注销应该真正注销用户。

# ios - 我怎么知道我是否在使用私有框架？

> ID：11311003
> 
> 赞同：4
> 
> 时间：2012-07-03T12:33:30.977
> 
> 标签：ios, xcode, app-store, appstore-approval

我正在为 App Store 开发一个应用程序。然而，它还处于早期阶段，还没有准备好提交给 iTunes Connect（需要截图、应用程序图标、支持 URL 等）。显然，在 iTunes Connect 上列出应用程序是使用 Xcode 的验证选项所必需的。我已注册 Apple Developer Program。

如果您知道另一种在没有 iTunes Connect 的情况下使用 Xcode 的验证的方法，那就太棒了。

是否有第三方测试套件，某个地方的公共与私有（允许/不允许）框架列表，或者我可以用来“验证”我的应用程序的其他东西？

以下是我遇到但不确定的一些示例：

```
#import <sys/sysctl.h>
#import <mach/mach.h>
#import <mach/mach_host.h>
#import <Carbon/Carbon.h>
#import <SystemConfiguration/SystemConfiguration.h>
#import <IOKit/IOKit.h>
#include <sys/ioctl.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <netdb.h>
#include <arpa/inet.h>
#include <sys/sockio.h>
#include <net/if.h>
#include <errno.h>
#include <net/if_dl.h>
#include <net/ethernet.h> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T12:36:36.770

您可以使用 appscanner [https://github.com/ChimpStudios/App-Scanner](https://github.com/ChimpStudios/App-Scanner)

来自开发者描述

> App Scanner 是适用于 iOS 开发人员的预检提交检查列表。它搜索私有 API 使用的代码。它并不完美。

此处列出了其他方式[Apple 如何知道您正在使用私有 API？](https://stackoverflow.com/questions/2842357/how-does-apple-know-you-are-using-private-api)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-16T16:52:24.910

```
#import <IOKit/IOKit.h> 
```

会遭到拒绝。检查[https://github.com/ChimpStudios/App-Scanner](https://github.com/ChimpStudios/App-Scanner)

# asp.net-mvc - DevExpress 网格视图分组？

> ID：11311009
> 
> 赞同：0
> 
> 时间：2012-07-03T12:33:46.967
> 
> 标签：asp.net-mvc, gridview, devexpress

我使用 DevExpress v10.2.3 将 gridview 与 asp.net mvc 4 分组。我可以从数据库中获取数据并显示它们。但我不能改变蚂蚁约束，例如：按列排序。当我点击排序时，我会弹出以下页面。当我每次点击触发脚本时，此页面都会打开。对此有任何想法吗？可能这是一个简单的错误，但我看不到它。

谢谢。

![在此处输入图像描述](../Images/6d820394e3769b98049cd7f562a73ee1.png)

部分视图

```
@Html.DevExpress().GridView(
settings =>
{
    settings.Name = "gvGrouping";
    settings.CallbackRouteValues = new { Controller = "Customer", Action = "PartialCustomers" };
    settings.Width = System.Web.UI.WebControls.Unit.Percentage(100);

    settings.Columns.Add("sno");
    settings.Columns.Add("Name");
    settings.Columns.Add("City");
    settings.Columns.Add("Ilce");
    settings.Columns.Add("Sokak").GroupIndex = 0;

    settings.Settings.ShowGroupPanel = true;

    settings.CustomCallback = (sender, e) =>
    {
        int layoutIndex = Int32.Parse(e.Parameters);
        DevExpress.Web.Mvc.MVCxGridView grid = (DevExpress.Web.Mvc.MVCxGridView)sender;

        grid.BeginUpdate();
        try
        {
            grid.ClearSort();
            switch (layoutIndex)
            {
                case 0:
                    grid.GroupBy(grid.Columns["Sokak"]);
                    break;
                case 1:
                    grid.GroupBy(grid.Columns["Sokak"]);
                    grid.GroupBy(grid.Columns["City"]);
                    break;
                case 2:
                    grid.GroupBy(grid.Columns["Name"]);
                    break;
            }
        }
        finally
        {
            grid.EndUpdate();
        }
        grid.ExpandAll();
    };
}).Bind(Model).GetHtml() 
```

看法

```
@model IEnumerable<mvc4devex.Models.Customers>
@{
    ViewBag.Title = "Customers";
}

<label for="GroupBy">GroupBy:</label>
<select id="GroupBy" onchange="gvGrouping.PerformCallback(this.value);">
    <option value="0">Sokak</option>
    <option value="1">Sokak, City</option>
    <option value="2">Name</option>
</select>
&nbsp;
<input type="button" value="Collapse All Rows" onclick="gvGrouping.CollapseAll();" />
&nbsp;
<input type="button" value="Expand All Rows" onclick="gvGrouping.ExpandAll();" />
<br /><br />
@Html.Partial("_PartialCustomers", Model) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:26:37.597

此问题是由以下任一原因引起的：

*   在单独的 PartialView 中定义的 GridView Extension 包含额外的标签；

*   CallbackRouteValues.Action 属性中指定的 Action 实现不正确（应该返回带有 GridView 的 PartialView）。

# c++ - 从三个布尔值创建一个整数作为 C++ 中的位

> ID：11311017
> 
> 赞同：12
> 
> 时间：2012-07-03T12:34:06.247
> 
> 标签：c++, c, boolean

我有`bool`三个代表位的值。我想有一个整数形式

```
true true true = 7
false true false = 2 
```

我有

```
int val = 4*boolVal1 + 2*boolVal2 + boolVal3; 
```

还有另一种方法，也许更简单？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-03T12:36:52.363

您可能会发现使用按位运算符而不是乘法和加法更清楚：

```
int val = (boolVal1 << 2) | (boolVal2 << 1) | boolVal3; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T12:53:12.527

或者你可以使用霍纳的方法：

`int val = (((boolVal1 << 1) | boolVal2) << 1) | boolVal3.`

这也使得在语句中间添加或删除变量更容易，而无需更改所有其他系数。

然而，这对读者来说可能不太明显。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-03T12:45:17.037

除了乘法和位移之外，您还可以使用枚举来记录关系。通常不值得努力，但只是为了完整性......

```
enum Encoding
{ 
    Flag3 = 1,      NotFlag3 = 0,
    Flag2 = 1 << 1, NotFlag2 = 0,
    Flag1 = 1 << 2, NotFlag1 = 0
};

int val = (boolVal1 ? Flag1 : NotFlag1) |
          (boolVal2 ? Flag2 : NotFlag2) |
          (boolVal3 ? Flag3 : NotFlag3); 
```

你到底为什么要为此烦恼？它只是更通用一点，因此您可以稍后更改 Encoding 值，而不必使用实际值触及潜在的分布式代码（例如，如果您意识到与某些文件或网络的格式相比，您会遗漏一点您需要解析的数据，您可以将其添加到一个地方并重新编译）。当然，最好还是只提供一个编码/解码功能，如果您要添加新标志，您仍然需要它。

虽然拥有 Flag1 和 NotFlag1 可能看起来毫无意义，但通常情况下，您具有相互排斥的值，例如 Sticky 和 ​​Floating，或 Male 和 Female，并且没有特别的理由强迫客户检查说 Floating 为 !Sticky 或 Female如 !Male 等。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-03T13:49:49.433

如果您知道字节序，您还可以使用实现定义的行为和位集，小字节序版本：

```
union foo {
        unsigned int the_int;
        struct {
                unsigned int bit3:1
                unsigned int bit2:1
                unsigned int bit1:1
        };
}; 
```

然后设置它们：

```
foo.bit1 = true;
foo.bit2 = false;
foo.bit3 = true; 
```

并阅读：

```
foo.the_int; 
```

`unsigned int`big-endian 版本的位颠倒了，前面有很多填充（如果是 32 位宽，则为 29 位）。

# wordpress - 修改 Wordpress 管理员

> ID：11311023
> 
> 赞同：0
> 
> 时间：2012-07-03T12:34:19.910
> 
> 标签：wordpress

当您在 Wordpress 后端并将鼠标悬停在“设置”上，然后单击“常规”时，会出现一个页面，其中当然包含该站点的常规设置。每个输入字段的标签如下：站点标题、标语、Wordpress 地址 (URL)、站点地址 (URL) 等。

我希望在我的functions.php 中添加一个函数，以获取一个允许我更改这些标签的主题。

这甚至可能吗？还是我只需要硬编码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:24:56.877

你可以创建一个自定义的[翻译](http://codex.wordpress.org/Translating_WordPress)，或者只是挂钩到 Wordpress 的翻译功能（使用[`gettext`](http://codex.wordpress.org/Plugin_API/Filter_Reference/gettext)过滤器）并提供你自己的翻译：

```
add_filter('gettext', 'my_gettext', 10, 3);

function my_gettext($translation, $text, $domain) {
  if ($text == 'Site Title') {
    $translation = 'Foo Bar';
  }
  return $translation;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T04:26:54.293

如果要更改标签的*值*，可以编写一个函数，直接更新 wp_options 表中的设置。如果您想更改标签，Richard M 发布的解决方案将起作用。

# c# - Directory.Exist - 查明是否有超时或目录不存在

> ID：11311031
> 
> 赞同：2
> 
> 时间：2012-07-03T12:35:08.313
> 
> 标签：c#, .net, networking, file-io

假设我在闪亮的服务器上有一个共享：

```
\\server1\MyShare 
```

如果我运行这个：

```
Directory.Exists("\\server1\MyShare") //Returns True 
```

现在我将电缆从服务器中拔出并再次运行代码：

```
Directory.Exists("\\server1\MyShare") //Returns False 
```

我想知道它是否返回false，因为......：

*   服务器无法访问
*   服务器有响应，但目录不存在

实现这一目标的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T12:39:51.550

检查是否可以 ping 服务器

[网平](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.ping.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T12:40:27.690

ping 服务器：http: [//msdn.microsoft.com/en-us/library/system.net.networkinformation.ping.aspx](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.ping.aspx)

一个阻塞的例子：

```
Ping ping = new Ping();
PingResponse response = ping.PingHost(@"\\server1", 4); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T13:13:23.793

我有一个类似的问题，但由于我所追求的目录是一个额外的层（`\\Server\Share\Directory`）我能够用一个简单的作弊；

```
if( Directory.Exists("\\Server\Share") && !Directory.Exists("\\Server\Share\Directory") )
//Server is up, directory doesn't exist
..etc.. 
```

有一个潜在的时间/竞争条件，但它还没有给我带来任何问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T13:20:44.657

这些答案将帮助您解决问题的 a) 部分 - 我如何检查远程服务器是否响应：[C# Check Remote Server](https://stackoverflow.com/questions/1043342/c-sharp-check-remote-server)

至于 b 部分），您的`Directory.Exists`方法是最好的方法 - 但是您可能想考虑使用 WMI 来检查文件夹，但这比使用您已有的方法要慢得多且麻烦。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-03T13:21:34.387

Ping 有点笨拙，根据您的网络设置方式，可能不允许 Ping，或者其他设备可能会响应 Ping。

此代码将根据您尝试访问的文件夹的状态将三个消息之一写入控制台：

```
 try
        {
            DirectoryInfo diNoServer = new DirectoryInfo(@"\\non.existant.server\share");
            diNoServer.Attributes = diNoServer.Attributes;
            if (!diNoServer.Exists)
            {
                Console.WriteLine("The server was responsive, but the directory did not exist");
            }
            else
            {
                Console.WriteLine("all good");
            }
        }
        catch (IOException exception)
        {
            Console.WriteLine("The server was unreachable");
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-28T13:24:10.060

通常，如果无法访问共享，则说明出现问题并且应该停止处理。

如果由于某种原因（网络故障、服务器故障、禁止访问等）无法访问共享，我使用以下扩展程序抛出异常

```
public static class DirectoryExtension
{
    public static bool IsShareAccessible(String unc)
    {
        if (Path.IsPathRooted(unc))
        {
            var share = Path.GetPathRoot(unc);
            return Directory.Exists(share);
        }
        return true; //true is is not unc or full local path
    }
} 
```

如何使用它：

```
if (!Directory.IsShareAccessible(@"\\server\share\folder"))
   Throw new ApplicationException("can't access share");

if (!Directory.Exists(@"\\server\share\folder")  {
... 
```

# javascript - 获取一个值

> ID：11311033
> 
> 赞同：5
> 
> 时间：2012-07-03T12:35:09.110
> 
> 标签：javascript, html, html-heading

我正在尝试为具有`<h2>`标签的页面上的每个元素生成一个 MD5 校验和，然后将这些值显示为弹出窗口。

我已经拥有的代码应该获取每个`<h2>`元素，我只需要获取每个元素的实际值。

```
var ghead = document.getElementsByTagName('h2');

for (i=0; i<ghead.length; i++) {
    var gh = ghead[i];
    var ts = gh.toString();
    var ms = b64_md5(ts);
    alert(ts);
    alert(ms);
} 
```

的用法`b64_md5(ts)`基本上是将`ts`变量转换为 MD5 值。但是，`ts`变量是元素类型的 ID 或名称，而不是元素的值本身。

另外，如果我想创建一个 cookie，其中存储了两个值，一个名称和一个校验和，我可以`gh.innerText;`用来设置唯一名称，因为到目前为止我在使用这种方法时遇到了问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-03T12:36:51.560

您可以使用该[`innerHTML`](https://developer.mozilla.org/en/DOM/element.innerHTML)属性来获取元素的 HTML 内容：

```
var ts = gh.innerHTML; 
```

请注意，`h2`元素（和大多数其他元素）没有“值”。只有充当表单控件的元素才有`value`属性（例如`input`元素）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T13:07:40.203

要获取 h2 标记元素 gh 的文本内容：

```
var text = gh.childNodes.item(0).data; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T12:49:22.213

如果你想访问一个元素的类型，你可以要求这个：

```
gh.nodeName // contains the name of the node in uppercase e.g. "H2"
gh.nodeType // contains the numerical Type of the node e.g. "1"
gh.id       // contains the value of the node's id attribute
gh.name     // contains the value of the name attribute (typically for form elements) 
```

如下所述，访问实际的节点内容是另一回事：

```
gh.innerHTML   // contains the full html source within the node
gh.innerText   // (IE only) contains the visible textual content stripped of any html markup
gh.textContent // W3C compliant equivalent of innerText 
```

对于跨浏览器访问文本内容，请使用以下内容：

```
var text = gh.innerText || gh.textContent; 
```

# haskell - 使用 tls-extra 进行简单的 smtp

> ID：11311036
> 
> 赞同：9
> 
> 时间：2012-07-03T12:35:22.607
> 
> 标签：haskell, smtp, starttls

我正在尝试编写一个简单的脚本来通过我的 gmail 帐户发送邮件。但我是初学者，所以没那么简单。我尝试了谷歌，但除了hackage，根本没有帮助或示例。

问题是我没有找到使用 tls-extra（或 tls）来启动 STARTTLS 交换的方法。

好的，代码如下：

```
import Network
import Network.TLS.Extra
import System.IO
import Text.Printf

server = "smtp.gmail.com"
port   = 25 --that has to chage, I think

forever a = a >> forever a

main = test1

write :: Handle -> String -> IO ()
write h s  = do
    hPrintf h "%s\r\n" s
    printf    "> %s\n" s

listen :: Handle -> IO () 
listen h = forever $ hGetLine h >>= putStrLn

test1 = do h <- connectTo server (PortNumber (fromIntegral port))
           hSetBuffering h NoBuffering
           write h "EHLO"
           write h "STARTTLS"
           listen h 
```

另一件事是我使用监听功能来了解发生了什么。但我不知道如何将它与 write 一起使用。也就是说，我希望能够在发送一些数据时看到服务器端发生了什么。

我发现了两个可以解决我的问题的功能：

```
connectionClient :: CryptoRandomGen g => String -> String -> TLSParams -> g -> IO (TLSCtx Handle)
forkIO :: IO () -> IO ThreadId 
```

第一个用于 tls，第二个用于同时发送和接收。但似乎无法让它们工作。

我希望我不会在这里弄乱，任何帮助将不胜感激。

PS：英语不是我的母语。

编辑：所以，我取得了一些进展。

```
import Network
import Network.TLS
import Network.TLS.Extra
import System.IO
import Text.Printf
import Control.Monad (forever)
import Control.Concurrent (threadDelay)
import qualified Data.ByteString.Char8 as B
import Crypto.Random

serv :: String
serv = "smtp.gmail.com"
port :: Int
port   = 25 --that has to chage, I think

main :: IO ()
main = test1

write :: Handle -> String -> IO ()
write h s  = do
    hPrintf h "%s\r\n" s
    printf    "> %s\n" s

listen :: Handle -> IO ()
listen h = forever $ hGetLine h >>= putStrLn

printSock :: Handle -> String -> IO ()
printSock h s = do write h s
                   hGetLine h >>= putStrLn
                   threadDelay 25

params :: TLSParams
params=defaultParams {pConnectVersion=TLS12
                     ,pAllowedVersions=[TLS10, TLS11, TLS12]
                     ,pCiphers=ciphersuite_all}

test1 = do h <- connectTo serv (PortNumber (fromIntegral port))
           hSetBuffering h NoBuffering
           printSock h "EHLO"
           printSock h "STARTTLS"
           --google waits for tls handshake
           --the problem is from here
           g <- newGenIO :: IO SystemRandom
           tlsH <- client params g h
           handshake tlsH --the handshake is failling 
```

不过，我不知道如何协商 tls 握手。

我不得不说，我对没有答案感到非常惊讶。其他几次我遇到了问题，社区很快就提供了帮助。但这似乎并不感兴趣（只是一种说法）。在 SO 或什至在#haskell 或developpez.com。

无论如何，一些关于谷歌和 tls 的指针将受到欢迎。我查看了 msmtp 客户端代码，但坦率地说，我没有所需的级别。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-06T06:15:55.997

您可以使用连接包来简化客户端连接并为此提供所有必要的位。以下代码可用于连接到 smtp.gmail.com：

```
{-# LANGUAGE OverloadedStrings #-}
import qualified Data.ByteString as B
import Data.ByteString.Char8 ()
import Network.Connection
import Data.Default

readHeader con = do
    l <- connectionGetLine 1024 con
    putStrLn $ show l
    if B.isPrefixOf "250 " l
        then return ()
        else readHeader con

main = do
    ctx <- initConnectionContext
    con <- connectTo ctx $ ConnectionParams
                            { connectionHostname  = "smtp.gmail.com"
                            , connectionPort      = 25
                            , connectionUseSecure = Nothing
                            , connectionUseSocks  = Nothing
                            }

    -- read the server banner
    connectionGetLine 1024 con >>= putStrLn . show
    -- say ehlo to the smtp server
    connectionPut con "EHLO\n"
    -- wait for a reply and print
    readHeader con
    -- Tell the server to start a TLS context.
    connectionPut con "STARTTLS\n"
    -- wait for a reply and print
    connectionGetLine 1024 con >>= putStrLn . show

    -- negociate the TLS context
    connectionSetSecure ctx con def

    ------- connection is secure now
    -- send credential, passwords, ask question, etc.

    -- then quit politely.
    connectionPut con "QUIT\n"
    connectionClose con 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T15:05:12.627

我不知道究竟是什么导致了您遇到的问题（我的 SMTP 有点生锈），但我相信部分问题是您连接到错误的端口。我认为这些是在 Google 中使用 SMTP 的正确参数。

```
Gmail SMTP server address: smtp.gmail.com
Gmail SMTP user name: Your full Gmail address (e.g. example@gmail.com)
Gmail SMTP password: Your Gmail password
Gmail SMTP port: 465
Gmail SMTP TLS/SSL required: yes 
```

编辑：我快速搜索了 Hackage，看看是否有一个 SMTP 包可以让你使用 TLS/SSL 使用用户名和密码登录，但我什么也没看到。（不过，我可能忽略了一些事情！）我找到的最接近的是 simplesmtpclient。我认为它不支持 SSL，但也许您可以扩展它，或者将其用作编写自己的指南。

# java - Javadoc doclet：获取“@Nullable”注释 (javax)。如何在 doclet 中获取该注释？

> ID：11311041
> 
> 赞同：2
> 
> 时间：2012-07-03T12:35:33.917
> 
> 标签：java, javadoc, doclet

我正在创建自己的 doclet，并且我需要显示方法中的参数何时可以为空。为此，我想使用 javax.annotation 中的 @Nullable 注释。就像谷歌的人在[这里](http://code.google.com/p/google-guice/wiki/UseNullable)所说的那样：

```
public Object myMethod(String firstName, String lastName, @Nullable Phone phone) { 
//code
} 
```

我的 Doclet 中是否有任何方法可以获取该 Phone 参数的“可为空”注释？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T11:23:38.353

找到了！

Parameter 接口已经有一个漂亮的 annotations() 方法，我们可以从与该参数相关的所有注释中获取 AnnotationDesc 数组。因此，我们只需要从 MethodDoc (MethodDoc.parameters()) 中获取所需的参数，然后从该参数中获取 annotations() 方法的注释 (AnnotationDesc[] annotations = pParam.annotations();)。从那里，很容易得到与该参数相关的注释是否“可为空”（：

```
for(AnnotationDesc annotation : annotations) {
      if(annotation.toString().equals("@javax.annotation.Nullable")) { ... 
```

例如。

# android - android中的sql查询

> ID：11311051
> 
> 赞同：0
> 
> 时间：2012-07-03T12:36:14.123
> 
> 标签：android, sqlite, android-contentresolver

我正在尝试从具有 data1 字段 euqal 的数据库中获取来自字符串数组的值的行。这就是我想要做的......但它给出了一个sqliteexception。

```
String[] Projection = { ContactsContract.Data.DATA1, ContactsContract.Data.DATA6, ContactsContract.Data.DATA8 };
String Selection = ContactsContract.Data.DATA1 + "= ? ";
c = mContext.getContentResolver().query(CONTENT_URI, Projection, Selection, id, null); 
```

c 是光标。id 是字符串数组，其中包含应与数据库的 DATA1 字段中的字符串匹配的字符串。还有其他方法吗？也许使用'IN'？logcat 异常是：

07-03 17:42:49.118 391 391 E DatabaseUtils：android.database.sqlite.SQLiteException：绑定或列索引超出范围：句柄 0x584c30

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:38:40.933

确保`id`只包含一个字符串。

并确保`c.moveToFirst()`在尝试从 中提取值之前调用`Cursor`，因为它可能为空。

# user-interface - 从背景颜色确定字体颜色

> ID：11311052
> 
> 赞同：1
> 
> 时间：2012-07-03T12:36:14.970
> 
> 标签：user-interface, vb6, colors, color-scheme

我被要求修改我们软件的一部分，以便用户可以自己设置按钮的颜色。不幸的是，由于我们所有的按钮都有黑色字体，这使得大约一半的可能颜色难以辨认，或者至少不是它们应该是的颜色。因此，我的问题是，是否可以分析标准的 HTML HEX 颜色 000000 - FFFFFF 或 VB 用来确定在给定背景的情况下用作前景的最合适的颜色。（它只需要在黑色和白色之间进行选择）。我正在考虑尝试使用 getpixel 并尝试将颜色转换为灰度并确定差异，任何其他建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T14:01:43.100

如果你用谷歌搜索“rgb contrasting colours”，你可能会得到很多好主意。这里有一些尝试：

[如何以编程方式选择对比度好的 RGB 颜色？](https://stackoverflow.com/questions/7260989/how-to-pick-good-contrast-rgb-colors-programmatically)

[http://devblog.famundo.com/articles/2006/06/14/finding-good-color-contrast](http://devblog.famundo.com/articles/2006/06/14/finding-good-color-contrast)

[http://www.ehow.com/how_6577466_calculate-color-contrast.html](http://www.ehow.com/how_6577466_calculate-color-contrast.html)

# apache - RewriteRule 删除查询字符串中的 %2f

> ID：11311053
> 
> 赞同：0
> 
> 时间：2012-07-03T12:36:19.430
> 
> 标签：apache, .htaccess, rewrite

我有一堆未生成的 URL，我想将它们重定向到正确的 URL。

这是一个很好的例子：

```
http://example.com/search/?q=searchterm%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F&scope=45%2F%2F%2F%2F%2F/ 
```

我已经可以使用以下规则重定向它们中的大多数：

```
    重写条件 %{QUERY_STRING} ^(.*)%2F
    重写规则 ^search/$ /search/?%1 [NE,R=301,L]

```

据我了解，这仅有效，因为删除了尾随的“%2F”，然后规则再次命中。Google 只接受有限数量的重定向。

所以我尝试调整规则以处理 1 次或多次出现的“%2f”

这是我走了多远：

```
    RewriteCond %{QUERY_STRING} ^(.*)((%2F)*)
    重写规则 ^search/$ /search/?%1 [NE,R=301,L]

```

结果是：/search/?q=searchtermFFFFFFFFFFFFFFFF&scope=45FFFFF/

我错过了什么？

最好的问候，亚历山大

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:56:22.073

如果您只有两个查询参数，这可能会起作用（当然，如果您有更多或更少，它可以调整）：

```
# %1 Matches everything until the first group of %2F
# %2 Matches everything after the first group %2F until the second group
RewriteCond %{QUERY_STRING} ([^%2F]*)[%2F]*([^%2F]*)[%2F]*
RewriteRule ^search/$ /search/?%1%2 [NE,NC,R=301,L] 
```

希望有帮助。

# php - Apache PHP 检查文件是否存在 - is_file 在服务器上真正做了什么

> ID：11311055
> 
> 赞同：1
> 
> 时间：2012-07-03T12:36:36.403
> 
> 标签：php, apache

在我的 apache 日志中，我看到了很多：

尝试服务目录：somedir/ 出现此错误是因为我不允许目录浏览。

现在我知道当有人进入数据库认为它有图片的页面时它们会出现，然后当我这样做时返回一个空字段：

背景图像： url("somedir/{$value[self::PICTURE]}");

并且没有图片它会查看目录 insted somedir/

为了避免这种情况，我做了 if(is_file("somedir/{$value[self::PICTURE]}")) 但我仍然看到错误。现在我的问题是，如果文件不存在，那么在不获取 apache 错误日志条目的情况下检查文件是否存在的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:50:13.550

您需要确保设置了要检查的变量。喜欢 ：

```
if ( isset ( $file ) && file_exists ( $file )) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:43:47.477

如果你想在字符串中使用 PHP 变量，你应该使用双引号而不是单引号。这可能是您的脚本失败的原因。

```
$path = 'somedir/' . $value[self::PICTURE];
if (is_file($path) || is_dir($path)) {
    // Your logic here
} 
```

# iphone - 当应用程序处于后台状态时，没有警报的 APNS 无法读取有效负载

> ID：11311062
> 
> 赞同：0
> 
> 时间：2012-07-03T12:36:47.293
> 
> 标签：iphone, background, push-notification, alert, apple-push-notifications

任何人都可以帮助我使用 APNS。问题是当没有给出警报时，我只能在运行状态而不是在**后台状态**接收有效负载。当应用程序处于后台和运行状态时，我能够收到通知和有效负载。

```
- (void)applicationDidBecomeActive:(UIApplication *)application  
    {  
NSLog(@"entered the condition applicationDidBecomeActive");    
if ( application.applicationIconBadgeNumber == 0 ){  
    NSLog(@"app was already in the foreground");  
}  
else{  
    NSDictionary *userInfo;  
    NSDictionary *apsDic = [userInfo valueForKey:@"aps"];  
    NSString *alertStr = [apsDic valueForKey:@"alert"];  
    NSLog(@"alertstring =%@",alertStr);  
    NSString *msgStr = [userInfo valueForKey:@"m"];  
    NSLog(@"messtring= %@",msgStr);  
    NSNumber *badgeNum = [apsDic valueForKey:@"badge"];  
    NSLog(@"Badge Number = %@",badgeNum);  
    NSLog(@"app was already in the background");  
}  
} 
```

**问题是每次它说“应用程序已经在前台”时，它都无法读取徽章编号**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:44:23.823

尝试这个：-

```
 - (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo 
    {
         NSLog(@"remote notification: %@",[userInfo description]);

        if (userInfo) 
        {
            NSLog(@"%@",userInfo);

            if ([[userInfo allKeys] containsObject:@"aps"]) 
            { 
                if([[[userInfo objectForKey:@"aps"] allKeys] containsObject:@"alert"]) 
                {
                        NSDictionary *apsDic = [userInfo valueForKey:@"aps"];  
                        NSString *alertStr = [apsDic valueForKey:@"alert"];  
                       NSLog(@"alertstring =%@",alertStr);  
                        NSString *msgStr = [userInfo valueForKey:@"m"];  
                       NSLog(@"messtring= %@",msgStr);  
                       NSNumber *badgeNum = [apsDic valueForKey:@"badge"];  
                       NSLog(@"Badge Number = %@",badgeNum); 

                    if(!isBackGroundMode)
                    {

                        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:[NSString stringWithFormat:@"HEY!"] message:[pushDic objectForKey:@"alert"] delegate:self cancelButtonTitle:@"Luk" otherButtonTitles:@"Læs..",nil];
                        [alert show];
                        [alert setTag:1];
                        [alert release];

                    }

                    else 
                    {
                        [self performSelectorOnMainThread:@selector(directGoToDetalPage) withObject:nil waitUntilDone:NO];
                    }

                }

            }

        } 
    }
- (void)applicationDidEnterBackground:(UIApplication *)application {

    isBackGroundMode = TRUE;
}

- (void)applicationWillEnterForeground:(UIApplication *)application {

    isBackGroundMode = FALSE;

}
#pragma mark 
#pragma mark(alertView delegte) Method

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if(alertView.tag==1)
    {
        if(buttonIndex == 1)
        {
            [self performSelectorOnMainThread:@selector(directGoToDetalPage) withObject:nil waitUntilDone:NO];

        }
    }
}

#pragma mark 
#pragma mark(when PushNotification Come) Method

-(void) directGoToDetalPage
{
    // where you want to go page............

} 
```

`isBackGroundMode`在哪里`global variable`。谢谢

# objective-c - 使用 Core Data 作为从远程 Web 服务检索的数据的本地缓存

> ID：11311065
> 
> 赞同：5
> 
> 时间：2012-07-03T12:36:52.987
> 
> 标签：objective-c, ios, core-data, ios5

我的项目需要缓存从远程 Web 服务检索到的 iOS 设备数据。这个想法是视图控制器将向缓存请求它拥有的所有文档对象，例如，在后台将请求来自 Web 服务的刷新，将它收到的任何新文档对象返回给视图控制器。我想知道视图控制器是否有可能使用 NSFetchedResultsController 来检索与它可以在数据库中本地找到的条件匹配的任何对象，并且还可以在后台异步请求来自 Web 服务的数据刷新。这样做时，NSFetchedResultsController 会更新数据库，当然还会触发 FetchedResultsController 委托的 didChangeObject 方法，以便视图可以相应地更新。这听起来合理吗？你对实施这样的事情有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T04:02:06.127

对于我们的项目，我们最终能够大大简化问题。然而，在发现的过程中，我们遇到了 NSIncrementalStore，这正是问题中提出的问题的门票。它本质上使您可以控制 CD 保存数据的方式和位置。这是[一篇关于它的非常好的帖子](http://sealedabstract.com/code/nsincrementalstore-the-future-of-web-services-in-ios-mac-os-x/)，以及[一个易于理解的示例](http://chris.eidhof.nl/post/17826914256/accessing-an-api-using-coredatas-nsincrementalstore)。诚然，关于它的 doco 并不多，但这些帖子确实帮助了我前进。

# objective-c - iPhone : 内存警告会破坏坚固的物体？

> ID：11311066
> 
> 赞同：0
> 
> 时间：2012-07-03T12:36:53.150
> 
> 标签：objective-c, ios5, viewdidload, didreceivememorywarning

我正在开发一个可以拍照的应用程序。

我最近遇到了一个非常奇怪的行为，这是我的代码。

```
@interface ViewControllerPhotos : UIViewController 
@property (strong) NSString* _albumID;
@end

@implementation ViewControllerPhotos
@synthesize _albumID;

- (void)didReceiveMemoryWarning
{
   return;
   // commented or not : give the same issue
   //    [super didReceiveMemoryWarning];
   // Release any cached data, images, etc that aren't in use.
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.navigationItem setHidesBackButton:YES];

    self._albumID = [Tools generateUUID];

    NSLog(@"new photoset : local UUID \"%@\"", self._photoSetLocalID);
}

@end 
```

我的问题是：如果有内存警告，存储在其中的 UID`_albumID`会被遗忘并重新生成，因此我的相册被分成两半。为什么 ？关键字不`strong`应该能够保持当前值吗？

还是因为`viewDidload`再次调用了？如果是这种情况，那么如何确保我们第一次加载视图以获得正确的 init ？这些方法听起来是为它设计的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T12:43:10.810

好吧，你可以用调试器和手册来解决这个问题，但是......

`viewDidLoad`在视图加载时调用。在视图控制器不可见时内存不足的情况下，视图可能会被卸载。iOS3+ 中有一个`viewDidUnload`方法。然后，当您按下后退按钮并且视图再次可见时，`viewDidLoad`将再次调用您所怀疑的。

解决此问题的方法是存储 UUID，以便在重新加载时不会重新*生成*它。

或者，您可以将分配放在`init`方法中。这样它只会被调用一次。

# java - 对“List”类型的列表进行排序 >`

> ID：11311068
> 
> 赞同：1
> 
> 时间：2012-07-03T12:37:05.017
> 
> 标签：java, collections, interface, comparable, iterable

我有一个类型列表，`List<Iterable<Object>>`在某些情况下，集合内的对象也是`Comparable`.

这意味着在某些情况下，它是一个列表，其中包含许多不是 A 类型的对象`Comparable`，在某些其他情况下，它包含许多 B 类型的对象`Comparable`。当我有一个 B 类型的对象列表时，我希望能够对它们进行排序。

当列表中的所有对象都是`Comparable`我需要对它们进行排序时，使用`Collections.sort()`或类似的东西。Java 不允许我转换整个列表，也不能转换单个元素，因为它们可能没有实现`Comparable`接口。有解决办法吗？

如果有用，这是我的代码：

```
 Iterable<Object> iterable;

    List<Iterable<Object>> valori = new ArrayList<Iterable<Object>>();

    Integer valoriLetti = 0;

    iterable = new ArrayList<Object>();
    while (iterable != null && valoriLetti < numero) {
        // Object object = beanReader.read();
        try {
            iterable = (Iterable<Object>) beanReader.read();
        } catch (InvalidRecordException ex) {

            log.error(this.toString());
            log.error(ex);
            log.error(ex.getStackTrace());
        }

        if (iterable != null) {
            ((IEntityAmount) iterable).moltiplicaImporti();
            ((IEntityAmount) iterable).troncaImporti();
            valori.add(iterable);
            valoriLetti += 1;

            // if (iterable.iterator().hasNext()) {
            // valori.add(leggiValori(iterable));
            // valoriLetti += 1;
            // }
        } else {
            break;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:44:57.937

此答案解释了如何将 a`Collection<A>`转换为`Collection<B>`：[https ://stackoverflow.com/a/1651086/1428461](https://stackoverflow.com/a/1651086/1428461)

# c# - 从焦点组合框项目中删除虚线边框

> ID：11311071
> 
> 赞同：4
> 
> 时间：2012-07-03T12:37:26.473
> 
> 标签：c#, wpf, xaml, combobox

我有一个自定义的 WPF 下拉框。每件事都按预期工作，但是当组合框有焦点时，组合框项目周围有一个虚线边框。我怎样才能摆脱这个边界？

![虚线边框](../Images/61697e458d4d42f3e7b1ca9ff2cc730e.png)

我试图覆盖“FocusVisualStyle”

```
<Style TargetType="{x:Type ComboBox}">

    ....snip

        <Setter Property="ItemContainerStyle">
        <Setter.Value>
            <Style TargetType="{x:Type ComboBoxItem}">
                <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            </Style>
        </Setter.Value>
    </Setter>
</Style> 
```

我不确定这个边界来自哪里以及如何摆脱它。

感谢您的想法和提示

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T13:10:54.617

正如 Meleak 指出的那样，您需要将其设置在`ComboBox`. 如果您仍想使用样式，可以这样做：

```
<Window.Resources>
  <Style x:Key="cmbStyle" TargetType="{x:Type ComboBox}">
    <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
   </Style>
</Window.Resources>
<Grid>

    <ComboBox  Style="{StaticResource cmbStyle}">
        <ComboBoxItem FocusVisualStyle="{x:Null}">33</ComboBoxItem>
        <ComboBoxItem>34</ComboBoxItem>
        <ComboBoxItem>334</ComboBoxItem>
    </ComboBox>
 </Grid>` 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T13:05:48.123

设置`FocusVisualStyle`为`ComboBox`null

```
<ComboBox FocusVisualStyle="{x:Null}" ... 
```

# spring - 没有活跃的交易，获取是无效的

> ID：11311075
> 
> 赞同：0
> 
> 时间：2012-07-03T12:37:35.240
> 
> 标签：spring, hibernate, spring-transactions

我无法打开 Hibernate 事务。

这是配置：

```
 <context:annotation-config />
    <context:component-scan base-package="com.cinebot" />
    <mvc:annotation-driven />
    <bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="packagesToScan">
            <list>
                <value>com.cinebot.db.entity</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.HSQLDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
            </props>
        </property>
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

<tx:annotation-driven /> 
```

这是错误的代码：

```
@Transactional
public static <T> T get(Class<T> classe, Serializable id) throws Exception {
    if(id==null) return null;
    T obj = (T) HibernateUtil.getSessionFactory().getCurrentSession().get(classe, id);
    return obj;
} 
```

这是一个例外：

```
org.hibernate.HibernateException: get is not valid without active transaction 
```

这是一个示例实体：

```
package com.cinebot.db.entity;

// Generated 3-lug-2012 10.31.04 by Hibernate Tools 3.4.0.CR1

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.Table;

/**
 * Dettagli generated by hbm2java
 */
@Entity
@Table(name = "dettagli", catalog = "cinebot")
public class Dettagli implements java.io.Serializable {

    private static final long serialVersionUID = 1L;
    private String nome;
    private String valore;

    public Dettagli() {
    }

    public Dettagli(String nome) {
        this.nome = nome;
    }

    public Dettagli(String nome, String valore) {
        this.nome = nome;
        this.valore = valore;
    }

    @Id
    @Column(name = "nome", unique = true, nullable = false, length = 32)
    public String getNome() {
        return this.nome;
    }

    public void setNome(String nome) {
        this.nome = nome;
    }

    @Column(name = "valore", length = 65535)
    public String getValore() {
        return this.valore;
    }

    public void setValore(String valore) {
        this.valore = valore;
    }

} 
```

我不明白为什么 @Transactional 注释不足以自动打开事务。我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:37:35.313

刚刚看过这段代码，它显然不适用于 Spring 事务注释。

您正在使用静态方法并从静态持有者获取 SessionFactory。

您需要从 Spring 获取与 SessionFactory 的 Spring 实例连接的 DAO 实例。这将允许 Spring 代理 DAO 并提供事务行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T14:14:41.240

根据评论您可以重新检查以下几点（尽管我不建议使用相同的）

*   您需要将弹簧 DAO 注入/自动装配到您的控制器中。使用 @Repository 注释 DAO
*   确保你的 spring 扫描并为你的 DAO 类创建 bean，这是由 context:component-scan 完成的。在这里，您的 dao 类应该在给定的包/子包中。

我建议在控制器和 DAO 之间使用服务层。将服务方法注释为@transactional，它调用DAO中的方法。请记住，您不应该创建任何 bean 的新实例来调用其中的方法，而是注入/自动装配 Service->Controller 和 DAO->Service。

# postgresql - 30 个只有几行的表 - 截断清空它们并重置附加序列的最快方法？

> ID：11311079
> 
> 赞同：1
> 
> 时间：2012-07-03T12:37:48.080
> 
> 标签：postgresql, performance, truncation

我想知道，在 PostgreSQL 中完成此类任务的最快方法是什么。我对最快的解决方案感兴趣。

我发现自己有这样一种 MySQL 解决方案，它的执行速度比一张一张地截断表要快得多。但无论如何，我也对最快的 MySQL 解决方案感兴趣。在这里查看我的结果，当然它仅适用于 MySQL：[https ://github.com/bmabey/database_cleaner/issues/126](https://github.com/bmabey/database_cleaner/issues/126)

我有以下假设：

*   我有 30-100 张桌子。让他们30岁。
*   一半的桌子是空的。
*   例如，每个非空表的行数不超过 100 行。我的意思是，桌子并不大。
*   我需要一个可选的可能性来从这个过程中排除 2 个或 5 个或 N 个表。

*   我不能！使用事务。

对于在 PostgreSQL 8 和 9 上工作的这种情况，我需要最快的清理策略。

我看到以下方法：

1.  截断每个表。我认为这太慢了，尤其是对于空桌子。

2.  用更快的方法检查每个表是否为空，如果为空，则将其唯一标识符列（类似于 MySQL 中的 AUTO_INCREMENT）重置为初始状态（1），即将其 last_value 从序列恢复为 1，否则运行 truncate在上面。

我使用 Ruby 代码遍历所有表，在每个表上调用下面的代码，我尝试设置针对每个表运行的 SQL 代码，例如：

```
DO $$DECLARE r record;
BEGIN
  somehow_captured = SELECT last_value from #{table}_id_seq
  IF (somehow_captured == 1) THEN
    == restore initial unique identifier column value here ==
  END

  IF (somehow_captured > 1) THEN
    TRUNCATE TABLE #{table};
  END IF;
END$$; 
```

在各个方面操作这段代码，我无法让它工作，因为我不熟悉 PostgreSQL 函数和块（和变量）。

另外我的猜测是 EXISTS(SELECT something FROM TABLE) 可以以某种方式用作“检查程序”单元之一，清洁程序应该包括但还没有完成。

我将不胜感激有关如何以 PostgreSQL 本机方式完成此过程的任何提示。

更新：

我需要所有这些来为 Ruby 或 Ruby on Rails 项目运行单元和集成测试。每个测试在运行之前都应该有一个干净的数据库，或者在其自身之后进行清理（所谓的拆卸）。事务非常好，但是在针对特定 web 驱动程序运行测试时它们变得不可用，在我的情况下，需要切换到截断策略。一旦我参考 RoR 进行了更新，请不要在此处发布有关“显然，您需要 DatabaseCleaner for PG”等的答案。

更新 2：

最近这里描述的策略被合并到 DatabaseCleaner，[https](https://github.com/bmabey/database_cleaner) ://github.com/bmabey/database_cleaner 作为 :pre_count 选项（参见那里的自述文件）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T12:50:13.163

PostgreSQL 可以在一条`TRUNCATE TABLE`语句中截断许多表。不要打扰迭代，只需做

```
TRUNCATE TABLE table1,table2,table3,...,table30; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T09:22:01.100

也可以看看：

[Postgresql 截断速度](https://stackoverflow.com/questions/11419536/postgresql-truncation-speed/11423886#11423886)

讨论*为什么*在 Pg 上截断会变慢，以及为什么 DELETE 不是一回事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T13:28:17.483

> 按照评论中的要求
> （虽然我觉得这不是正确的答案 - 但评论太长了）

截断空表或截断大表之间没有（明显的）性能差异。

如手册中所述（http://www.postgresql.org/docs/current/static/sql-truncate.html）“*它实际上并不扫描表*”

因此，如果您首先检查表中是否有任何行，您*将*扫描该表。如果您只是发布`truncate`而不考虑是否

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T11:21:16.363

[我不知道ROR]

一个从零开始的好方法是创建和使用临时 SCHEMA：

```
DROP SCHEMA fuzz CASCADE;
CREATE SCHEMA fuzz;
SET search_path='fuzz'; 
```

（这是我用来测试 sql 片段的方法）。但这会创建一个*空*架构，并且您无法复制架构，IFAIK。

另一种方法是创建您的数据库（包括空表）并将其用作构建测试台的*模板：*

```
DROP DATABASE testdb;
CREATE DATABASE testdb TEMPLATE my_spcial_template; 
```

这样做的问题是，如果仍然存在与数据库的连接（例如删除进程本身），则无法删除数据库因此，您的前端应首先断开连接，而不是暂时连接到其他数据库（例如`my_spcial_template`），比 dropdb+createdb，比连接 testdb。我不知道性能，但至少它是一个*强大*的方案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-13T08:02:43.903

如果有人对当前策略感兴趣，我会使用此策略，请参阅此基于 Ruby 的存储库[https://github.com/stanislaw/truncate-vs-count](https://github.com/stanislaw/truncate-vs-count)，适用于 MySQL 和 PostgreSQL。

我的结果：

MySQL：清理数据库的最快策略是截断并进行以下修改：

```
if table is not empty
  truncate. 
else 
  if AUTO_INCREMENT is not 0
    truncate.
  end
end 
```

*   对于 MySQL，截断比删除要快得多。DELETE 胜过 TRUNCATE 的唯一情况是在空表上执行此操作。
*   对于 MySQL 的空检查截断比多次截断要快得多。
*   对于 MySQL 而言，使用空检查进行删除比仅在每个表上进行 DELETE 快得多。

PostgreSQL：清理数据库的最快策略是使用与 MySQL 相同的空检查进行删除，但依赖于 currval：

```
if table is not empty
  delete table
else 
  if currval is not 0
    delete table
  end
end 
```

*   对于 PostgreSQL，仅删除比仅 TRUNCATION（甚至多个）快得多。
*   对于 PostgreSQL，之前执行空检查的多个 TRUNCATE 比仅多个 TRUNCATE 稍快
*   对于带有空检查的 PostgreSQL 删除比仅删除 PostgreSQL 稍快。

这是从它开始的地方：[https ://github.com/bmabey/database_cleaner/issues/126](https://github.com/bmabey/database_cleaner/issues/126)

这是结果代码和长时间的讨论：[https ://github.com/bmabey/database_cleaner/pull/127](https://github.com/bmabey/database_cleaner/pull/127)

这是关于 pgsql-performance 邮件列表的讨论：http: [//archives.postgresql.org/pgsql-performance/2012-07/msg00047.php](http://archives.postgresql.org/pgsql-performance/2012-07/msg00047.php)

我们开始收集用户反馈，证明我的想法是先检查空表是正确的。

# php - PHP 正则表达式

> ID：11311081
> 
> 赞同：0
> 
> 时间：2012-07-03T12:37:50.203
> 
> 标签：php, regex

我在 chrome 中有一个 RegExp Tester 扩展。针对搜索文本运行模式 [-,]

"james,bayo -is a good boy" 返回 2 场比赛

但是在 php 中运行如下 preg_match 会返回 false

```
<?php
 preg_match("[,-]", "james,bayo -is a good boy");
?> 
```

期望它像 regExp 测试器一样返回 2，我确定我遗漏了一些东西

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T12:38:58.803

您需要正则表达式分隔符，如下所示：

```
preg_match("/[,-]/", "james,bayo -is a good boy", $matches);
var_dump( $matches); 
```

这将匹配两个字符之一 - 逗号或破折号。此外，为了检索匹配项，您需要将第三个参数指定为`preg_match()`，因为它将存储您的匹配项。

请注意，由于您使用的是`preg_match()`，因此您只会获得第一个匹配项。因此，这将输出：

```
array(1) {
  [0]=>
  string(1) ","
} 
```

如果您想要所有匹配项，则需要使用[`preg_match_all()`](http://php.net/preg_match_all)，如下所示：

```
preg_match_all("/[,-]/", "james,bayo -is a good boy", $matches);
var_dump( $matches); 
```

这输出：

```
array(1) {
  [0]=>
  array(2) {
    [0]=>
    string(1) ","
    [1]=>
    string(1) "-"
  }
} 
```

# android - 在 ListView 中带有选取框的 Android 的 TextView 在第一次显示时不会动画

> ID：11311085
> 
> 赞同：3
> 
> 时间：2012-07-03T12:38:00.020
> 
> 标签：android, listview, marquee

我有一个带有自定义适配器的 ListView。其中的每个项目都包含一个 TextView。

```
<TextView
    android:id="@+id/chat_name"
    android:layout_height="48dp"
    android:layout_width="match_parent"
    android:textColor="#FFFFFF"
    android:gravity="center_vertical"
    android:ellipsize="marquee"
    android:marqueeRepeatLimit="marquee_forever"
    android:singleLine="true"
    android:focusable="false"
    android:focusableInTouchMode="false"/> 
```

我需要这个 TextView 不可聚焦，因为我依赖于该`onListItemClick()`方法。据我所知，`onListItemClick()`如果你设置就不会开火`focusable="true"`。

在我设置的适配器中：

```
TextView chatName = (TextView) v.findViewById(R.id.chat_name);
chatName.setText(chat.getChatName());
chatName.setSelected(true); 
```

它每次都有效，但第一次有效。当一个项目被添加到适配器时，它会显示在列表视图中，但它没有被选中。单击项目时，将显示另一个活动。用户返回 ListView 后，item 突然被选中。我希望它一直被标记。

我已经尝试使用覆盖`isFocused()`以始终返回 true 的方法对 TextView 进行子类化，但这并没有帮助。行为保持不变。我还尝试了各种值`focusable`和`focusableInTouchMode`属性，但没有成功。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T07:10:32.607

请使用 requestFocus() 函数如下。

```
chatName.setSelected(true);
chatName.requestFocus(); 
```

我会工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-29T15:36:07.130

在您的自定义适配器中，将其添加到 getView 中：

```
chatName.addOnLayoutChangeListener(new OnLayoutChangeListener() 
{
    @Override
    public void onLayoutChange(View v, ....) 
    {
        chatName.setSelected(true);
    }
}); 
```

# java - 如果未启用则隐藏 Flash，如果启用了 Flash，则隐藏 jquery？

> ID：11311086
> 
> 赞同：0
> 
> 时间：2012-07-03T12:38:00.590
> 
> 标签：java, javascript, jquery, flash, slideshow

我正在建立一个在主页上使用 Flash 的网站。我也有一个 jquery 幻灯片。如果启用了闪光灯，我想隐藏幻灯片并隐藏闪光灯未启用，因此取决于谁查看它只有 1 可见。我接受它，它会做它的js？任何想法将不胜感激：]谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:40:34.803

`<object>`只需在元素内嵌入（嵌套）幻灯片

如果启用了 flash，则不会看到幻灯片，因为对象已由 flash 插件正确初始化，否则对象标签内的标记将用作后备

从[这篇文章](http://latrine.dgx.cz/how-to-correctly-insert-a-flash-into-xhtml)开始，您可以用这种方式编写标记

```
<!--[if !IE]> -->
<object type="application/x-shockwave-flash"
  data="movie.swf" width="300" height="135">
<!-- <![endif]-->

<!--[if IE]>
<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"
  codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0"
  width="300" height="135">
  <param name="movie" value="movie.swf" />
<!--><!--dgx-->
  <param name="loop" value="true" />
  <param name="menu" value="false" />

  <!-- fallback here -->
  <div id="slideshow">Here goes your slideshow</div>

</object>
<!-- <![endif]--> 
```

这种技术的主要好处是您不需要添加额外的逻辑来检查 Flash 插件是否可用。

# sql-server - 来自 bcp 的 ISO-8859-1

> ID：11311087
> 
> 赞同：2
> 
> 时间：2012-07-03T12:38:02.017
> 
> 标签：sql-server, sql-server-2008, bcp, iso-8859-1

我在 SQL Server 2008 R2 的表中有数据，我试图将其输出到 CSV 文件。然后我必须将此 CSV 文件导入第三方专有系统，该系统需要将此文件编码为 ISO-8859-1。特别是，我们有一些带有“Š”字符的值，在 Windows-1252 中是代码点 8A，但在 ISO-8859-1 中没有出现。我想消除/修复这些字符（以及[未出现在 ISO 标准中的](http://en.wikipedia.org/wiki/Windows-1252#Codepage_layout)所有其他 8_ 和 9_ 代码点），而无需手动修改文件。完全在 SQL 中或使用 BCP 参数来做这将是理想的。

因此，我能够与 BCP 获得的最接近的是使用 Windows-1252：

```
bcp tableName out outputFile.csv -c -C 1252 -t, -S server -T 
```

有没有我可以给 BCP 输出 ISO-8859-1 的代码页？或者我可以应用于表格的排序规则？现在它们与 进行`SQL_Latin1_General_CP1_CI_AS`比较，但我认为这只是我们的默认设置或被任意应用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T13:21:34.503

你试过 -C 28591 吗？Windows 28591 等于 ISO-8859-1

# drupal - 向现有内容类型添加新的自定义字段

> ID：11311088
> 
> 赞同：2
> 
> 时间：2012-07-03T12:38:03.237
> 
> 标签：drupal, drupal-7, drupal-field-api

我在创建某些页面时使用了一个模块，但我想在管理员可以修改的每个页面上添加一个额外的字段

我有点迷路了，不知道怎么办

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-09T19:58:24.867

听起来您需要使用内容类型-

首先在 Drupal 菜单中创建内容类型，然后将您的字段添加到内容类型

希望这可以帮助 ...

# ruby-on-rails - 如何从 ruby on rails 中的某些页面中删除页眉和页脚

> ID：11311090
> 
> 赞同：4
> 
> 时间：2012-07-03T12:38:10.410
> 
> 标签：ruby-on-rails, ruby

我在 Rails 项目中工作。我创建了页眉和页脚并添加到 layouts/application.html.erb 文件中的所有页面。现在我想从某些页面中删除它。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T20:43:16.707

控制器支持`:only`和布局选项，请参阅[本指南](http://guides.rubyonrails.org/layouts_and_rendering.html)`:except`中的条件布局部分。

因此，您可以在控制器中执行以下操作：

```
class SomeController < ApplicationController
  layout 'application', :except => [:some_action, :some_other_action]
  ... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T12:41:19.453

创建不同的布局，并将其应用于您不想呈现页眉和页脚的页面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-02T23:35:36.940

```
class SomeController < ApplicationController
  def method_without_layout
    render layout: false
  end
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-23T01:31:35.640

您可以转到 application.html.erb，然后执行以下操作：

```
<% unless action_name == "show" %>
   <%= render 'shared/header' %>
<% end %>

<%= yield %>

<% unless action_name == "show" %>
   <%= render 'shared/footer' %>
<% end %> 
```

'show.html.erb' 将是没有页眉和页脚的页面。实施此解决方案时要小心，因为您命名为“show.html.erb”的任何页面都没有页眉和页脚。

# android - 如何在 BaseAdapter 中使用 Dialog？

> ID：11311091
> 
> 赞同：5
> 
> 时间：2012-07-03T12:38:11.513
> 
> 标签：android, listview, dialog, baseadapter

我正在开发具有水平列表视图的产品应用程序目录，当您单击产品时，我无法打开自定义对话框。

我的代码的某些部分：

**主要活动**

```
public class Produtos extends Activity {
    public static String ListadeProdutos;
    private ProdutosAdapter dbHelper;
    private ProgressDialog progressDialog;
    private TiposAdapter tipDB;
    private CategoriasAdapter catDB;
    private AutoCompleteTextView AutBusca;
    public static String cateId, tipoId, filtroAz, busca;
    Cursor AllProdutos;

    //LazyAdapter adapter;

    public static String theProdNome, theProdDesc, theProdFoto;
    public static int ProdutoAtual;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        overridePendingTransition(R.anim.fadein, R.anim.fadeout);
        setContentView(R.layout.produtos);

        cateId = getIntent().getStringExtra("cat");
        tipoId = getIntent().getStringExtra("tipo");
        filtroAz = getIntent().getStringExtra("filtroAz");
        busca = getIntent().getStringExtra("busca");

        theProdNome = getIntent().getStringExtra("prodNome");
        theProdDesc = getIntent().getStringExtra("prodDesc");
        theProdFoto = getIntent().getStringExtra("prodFoto"); 
```

**显示对话框的功能**

```
public void showProdutoDialog(){
  final Dialog dialog = new Dialog(this,R.style.CustomDialogTheme);

  dialog.setContentView(R.layout.produto);//carregando o layout do dialog do xml

  if ( theProdNome != "" ){
    //carrega os dados
    TextView titulo = (TextView) dialog.findViewById(R.id.NomeProduto);
    WebView desc = (WebView) dialog.findViewById(R.id.DescricaoProduto);
    ImageView img = (ImageView) dialog.findViewById(R.id.FotoProduto);

    titulo.setText(theProdNome);

    String html; 
    html = "<strong>Características do Produto</strong><br>"+ theProdDesc;

    String mime = "text/html";
    String encoding = "utf-8";

    desc.getSettings().setJavaScriptEnabled(false);
    desc.loadDataWithBaseURL(null, html, mime, encoding, null);
    desc.setBackgroundColor(Color.TRANSPARENT);
    desc.scrollTo(0, 0);

        final Button fechar = (Button) dialog.findViewById(R.id.bt_fechar);
    fechar.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            //ação do botão cancelar
            dialog.dismiss();//encerra o dialog
        }
    });

       dialog.show();//mostra o dialog

   }else{
       Toast.makeText(this, "Nenhum impresso encontrado", Toast.LENGTH_SHORT).show(); 
   }

  } 
```

**BaseAdapter 活动**

```
public class ProdutoAdapter extends BaseAdapter {
    ImageDownloader downloader;
    private List<Produto> MyProdutos;
    private LayoutInflater mInflater;
    private ViewHolder holder;

    static class ViewHolder{
        private TextView titulo;
        private ImageView img;
    }

    public ProdutoAdapter(Context context, List<Produto> MyProdutos) {
        mInflater = LayoutInflater.from(context);
        this.MyProdutos = MyProdutos;
        downloader = new ImageDownloader();
    }

    @Override
    public int getCount() {
        return MyProdutos.size();
    }

    @Override
    public Object getItem(int position) {
        return null;
    }

    @Override
    public long getItemId(int position) {
        return 0;
    }

    @Override
    public View getView(final int posicao, View convertView, ViewGroup arg2) {
        final Produto p = MyProdutos.get(posicao);

            convertView = mInflater.inflate(R.layout.row_produtos, null);
            holder = new ViewHolder();

            holder.titulo = (TextView) convertView.findViewById(R.id.NomeProduto);
            holder.img = (ImageView) convertView.findViewById(R.id.FotoProduto);
            holder.img.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {
                    Produtos firstClass = new Produtos();

                    firstClass.theProdNome = p.getNome();
                    firstClass.theProdDesc = p.getProdDesc();
                    firstClass.theProdFoto = p.getimgNome();

                    firstClass.showProdutoDialog();
                }

            });

        convertView.setTag(holder);

        holder.titulo.setText(p.getNome());
        downloader.download(p.getimgNome(), holder.img);

        return convertView;
    }

} 
```

**错误**

```
07-03 09:30:07.639: W/dalvikvm(455): threadid=1: thread exiting with uncaught exception (group=0x40014760)
07-03 09:30:07.659: E/AndroidRuntime(455): FATAL EXCEPTION: main
07-03 09:30:07.659: E/AndroidRuntime(455): java.lang.IllegalStateException: System services not available to Activities before onCreate()
07-03 09:30:07.659: E/AndroidRuntime(455):  at android.app.Activity.getSystemService(Activity.java:3922)
07-03 09:30:07.659: E/AndroidRuntime(455):  at android.app.Dialog.<init>(Dialog.java:150)
07-03 09:30:07.659: E/AndroidRuntime(455):  at android.app.Dialog.<init>(Dialog.java:138)
07-03 09:30:07.659: E/AndroidRuntime(455):  at com.primeiroestilo.Produtos.showProdutoDialog(Produtos.java:570)
07-03 09:30:07.659: E/AndroidRuntime(455):  at com.primeiroestilo.ProdutoAdapter$1.onClick(ProdutoAdapter.java:83)
07-03 09:30:07.659: E/AndroidRuntime(455):  at android.view.View.performClick(View.java:3110)
07-03 09:30:07.659: E/AndroidRuntime(455):  at android.view.View$PerformClick.run(View.java:11934)
07-03 09:30:07.659: E/AndroidRuntime(455):  at android.os.Handler.handleCallback(Handler.java:587)
07-03 09:30:07.659: E/AndroidRuntime(455):  at android.os.Handler.dispatchMessage(Handler.java:92)
07-03 09:30:07.659: E/AndroidRuntime(455):  at android.os.Looper.loop(Looper.java:132)
07-03 09:30:07.659: E/AndroidRuntime(455):  at android.app.ActivityThread.main(ActivityThread.java:4123)
07-03 09:30:07.659: E/AndroidRuntime(455):  at java.lang.reflect.Method.invokeNative(Native Method)
07-03 09:30:07.659: E/AndroidRuntime(455):  at java.lang.reflect.Method.invoke(Method.java:491)
07-03 09:30:07.659: E/AndroidRuntime(455):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
07-03 09:30:07.659: E/AndroidRuntime(455):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
07-03 09:30:07.659: E/AndroidRuntime(455):  at dalvik.system.NativeStart.main(Native Method) 
```

**印刷**

产品列表 - [http://cl.ly/2l0W0u421U1s0t3p2v15](http://cl.ly/2l0W0u421U1s0t3p2v15)

产品打开 - [http://cl.ly/0R2s0g2a1C0J171b0n3z](http://cl.ly/0R2s0g2a1C0J171b0n3z)

# 我可以解决我的问题！！！是的！！！\o/ #

在**主要活动**上我改变：

```
 ProdutoAdapter adapter = new ProdutoAdapter(getApplicationContext(), produtos); 
```

至

```
 ProdutoAdapter adapter = new ProdutoAdapter(Produtos.this, produtos); 
```

在**BaseAdapter Activity**我改变：

```
 public ProdutoAdapter(Context context, List<Produto> MyProdutos) {  
         mInflater = LayoutInflater.from(context);  
         this.MyProdutos = MyProdutos;  
         downloader = new ImageDownloader();  
    } 
```

至

```
 public ProdutoAdapter(Produtos context, List<Produto> MyProdutos) {  
        mInflater = LayoutInflater.from(context);  
        this.MyProdutos = MyProdutos;  
        downloader = new ImageDownloader();  
        mContext = context;  
    } 
```

并**添加**：

```
 private Produtos mContext; 
```

并**改变**：

```
 firstClass.showProdutoDialog(); 
```

至

```
 mContext.showProdutoDialog(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:42:03.880

什么是头等舱？它是一个活动吗？尝试像这样创建对话框：

```
Context mContext = getApplicationContext();
Dialog dialog = new Dialog(mContext); 
```

如果使用 getApplicationContext() 无法获取上下文，请将 ProdutoAdapter 接收到的上下文保存在构造函数中。而不是将此上下文传递给：

```
 Context mContext;
 public ProdutoAdapter(Context context, List<Produto> MyProdutos) {
    mInflater = LayoutInflater.from(context);
    this.MyProdutos = MyProdutos;
    downloader = new ImageDownloader();
    mContext = context;
} 
```

当您调用 showProdutoDialog 时，请执行以下操作：

```
firstClass.showProdutoDialog(mContext); 
```

比，做：

```
 public void showProdutoDialog(Context context){
      final Dialog dialog = new Dialog(context,R.style.CustomDialogTheme);
      //continue from here 
```

# vhdl - vhdl 中的 conv_integer

> ID：11311097
> 
> 赞同：0
> 
> 时间：2012-07-03T12:38:36.327
> 
> 标签：vhdl

这看起来对吗？

`Lookup_table(conv_integer(128 - Position));`--位置是`std_logic_vector(7 downto 0)`

该函数的参考页面`conv_integer`没有说明是否可以在上述括号之间操作两个参数。但是，如果参数是整数，它会返回一个整数。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T12:58:06.887

你正在寻找`to_integer`方法。

您可以通过使用以下代码行之一将其转换为整数来对您的位置进行 int 数学运算：

`to_integer(unsigned(Position))`或`to_integer(signed(Position))`取决于它是有符号还是无符号 8 位向量。

然后你就可以做到了`Lookup_table(128 - to_integer(unsigned(Position)))`。

在从低阶（较少位）逻辑向量转换为整数之前，您应该始终执行特定的`signed`/强制转换。`unsigned`此外，如果您正在做`int`数学，那么在进行算术之前转换为整数是一个好习惯。

否则，VHDL 就像任何常规编程语言一样，它会在将方法的参数放入方法之前对其进行评估，因此在参数内部执行操作非常好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T03:09:37.447

对于 VHDL，我通常使用 1 of 2 方法在 std_logic_vector 和整数之间进行转换。

1.  使用 std_logic_unsigned/std_logic_signed 库：对于这种方法，模拟器/综合工具会自动推断您的 std_logic_vector 为有符号或无符号。
2.  使用 numeric_std 库：对于这个，我使用 unsigned/signed 将 std_logic_vector 转换为有符号或无符号。它允许更多的权力在 1 个模块内混合有符号和无符号操作。（尽管据我所知，如果您关心补偿位，则已签名和未签名几乎与操作没有区别）。

据我所知，我们有用于此转换的算术 (std_logic_arith) 库，但有人说它不是标准的并且与 numeric_std 冲突。您应该使用（例如，bit_length 位转换）切换到 numeric_std：

```
result<=std_logic_vector(to_unsigned(128-x,bit_length); -- For unsigned          
result<=std_logic_vector(to_signed(128-x,bit_length); -- For signed 
```

# selenium - 硒点击链接

> ID：11311100
> 
> 赞同：6
> 
> 时间：2012-07-03T12:38:48.453
> 
> 标签：selenium, selenium-ide

我在 FireFox 中使用 Selenium 的 IDE 进行一些测试，我希望 Selenium 单击第二个链接（Text2）。知道我该怎么做吗？不幸的是，我无权访问 HTML，也无法修改它。记录功能似乎没有注册点击。

代码附在下面。提前致谢！

```
<div class="class1">
    <div class="class2">
        <span class="class3"><a href="#" onclick="fn1();">Text1</a></span>
    </div>
</div>

<div class="class1">
    <div class="class2">
        <span class="class3"><a href="#" onclick="fn2();">Text2</a></span>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T13:49:01.513

Selenium supports the `link=Link Text` locator as well. If you know the exact link text, you can use this locator, but not otherwise. So for your examples above: `link=text2` or `link=View Previous Statements`. (See [this site](http://marakana.com/bookshelf/selenium_tutorial/locators.html) and [this site](http://www.lawrencesong.com/blog/selenium-element-locators) for other locators.)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T12:56:41.650

你可以试试

```
//a[contains(text(),'text2')]     OR  //span/a[contains(text(),'text2')] 
```

寻找相同或其他任何东西？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-28T18:35:49.757

请无视此帖。Selenium 忽略了“值”字段，只选择了第一次出现的 span.class3。为此表示歉意。我应该在发布之前进行更多测试。

原帖： *我有一个类似的网页，我能够使用以下 Selenium IDE 命令： 命令：clickAndWait 目标：css=span.class3 值：Text1*

# macos - 为什么我的 dataOfType: 保存时没有调用？

> ID：11311101
> 
> 赞同：0
> 
> 时间：2012-07-03T12:38:54.250
> 
> 标签：macos, cocoa, save, nsdocument

我有一个`NSDocument`包含方法的`dataOfType`方法，但是当我进行保存时它不会被调用。

```
- (NSData *)dataOfType:(NSString *)typeName 
                 error:(NSError *__autoreleasing *)outError
{
    NSLog(@"db: %@", db);
    return [NSKeyedArchiver archivedDataWithRootObject:db];
} 
```

为什么不叫这个？具体来说，我当前的文档不应该是菜单项“保存”指向的第一响应者有什么原因吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-11T01:34:58.613

您是否在创建新项目窗口中未选中“使用核心数据”复选框？

# iphone - WebView 没有打开“http://itunes.apple.com”

> ID：11311113
> 
> 赞同：1
> 
> 时间：2012-07-03T12:39:55.210
> 
> 标签：iphone, uiwebview

我正在使用此代码打开网页网址`UIWebView.`

如果部分 URL 已正确打开，`UIWebView`但“http://itunes.apple.com....” URL 未在其中打开`UIWebView.`

```
-(void)viewDidLoad
{
    NSURL *url;
    if (int_btnTag == 0)
    {
        url = [NSURL URLWithString: @"http://www.elsner.com/"];
    }
    else if (int_btnTag == 1)
    {
        url = [NSURL URLWithString: @"http://itunes.apple.com/us/app/emicalculator-1.0/id528922578?ls=1&mt=8"];
    }

    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];

    [webView loadRequest:requestObj];

    [super viewDidLoad];
} 
```

有没有其他方法可以打开这个苹果链接`UIWebView..`。？

如果有那么请建议我。

提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T12:51:46.160

试试这个：

```
-(void)viewDidLoad
{
    NSURL *url;
    if (int_btnTag == 0)
    {
        url = [NSURL URLWithString: @"http://www.elsner.com/"];
    }
    else if (int_btnTag == 1)
    {
        url = [NSURL URLWithString: @"http://itunes.apple.com/us/app/emicalculator-1.0/id528922578?ls=1&mt=8"];
    }

    [[UIApplication sharedApplication] openURL:url];

    [super viewDidLoad];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T12:43:26.447

我认为没有，该页面在 iPhone 中配置为启动应用商店。

# android - Android模拟器未在Eclipse中加载

> ID：11311116
> 
> 赞同：0
> 
> 时间：2012-07-03T12:40:20.450
> 
> 标签：android, eclipse, avd

我在加载我的模拟器时遇到问题。使用我的 AVD 管理器，我创建了一个名为 Nexus 的 AVD，其位置`C:\Windows\System32\config\systemprofile\.android\avd`默认为

但是，当我尝试启动我的应用程序时，我在控制台中收到此消息

```
[2012-07-03 17:57:48 - Emulator] PANIC: Could not open: C:\Users\ritika\.android/avd/Nexus.ini 
```

我的问题是如何使应用程序指向 avd 文件夹实际所在的正确位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:23:28.633

你用的是最新版本的eclipse吗？你是否通过eclipse安装了android插件？也许您可以尝试更新它或创建不同类型的 avd？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T16:33:13.680

在 Windows 7（64 位）上：

似乎Android虚拟设备管理器[愚蠢地]在其中创建了虚拟设备[相关文件]，`D:\userdata\<user-name>\.android`但是在启动它时，它会在其中查找设备`C:\Users\<user-name>\.android`

无论如何，我不太了解 Android [试图运行 Hello Wolrd :-)]，但我刚刚发现 NTFS 现在支持链接，所以我只是创建了一个链接。就我而言：

```
C:\Users\UserName> mklink /d .android D:\userdata\UserName\.android
symbolic link created for .android <<===>> D:\userdata\UserName\.android

C:\Users\UserName> 
```

您可能必须以`cmd`管理员身份运行，因为我也是 Windows 的傻瓜，我只是去了`C:\Windows\System32`，右键单击 cmd.exe 并选择“以管理员身份运行”。我敢肯定在Windows上会有一些`su`等价物。

如果你没有找到你的`D:\userdata\UserName\.android`，那么我建议你只搜索你的硬盘驱动器`.android`并使用该路径而不是`D:\userdata\UserName\.android`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T22:00:17.183

在您当前用户的文档目录（我的位于 D:\Documents）中，您会找到一个`.android`文件夹。里面是一个`avd`文件夹。它包含所有的 AVD。将其复制到`C:\Users\<user>\.android\`. 这是一个快速修复，每次更改任何 AVD 时都必须完成。

上述问题的目标文件夹将是`C:\Users\ritika\.android\avd`

# scala - 如何将类型参数传递给我的 scala 应用程序？工厂是最好的解决方案吗？

> ID：11311127
> 
> 赞同：1
> 
> 时间：2012-07-03T12:41:00.033
> 
> 标签：scala, factory-pattern

我正在构建一个应用程序，它应该采用一个参数来指定要使用的给定数据结构的实现。比如说，参数的超类型是Super，我提供了很多SubX的实现。我的应用程序的用户可能还提供了在编译时未知的 SubY。

在应用程序中，参数将被传递，并将用于创建 Sub_ 的实例，调用 Super 中定义的方法，并用作参数化类型中的参数。

如果它只是用于参数化类型，我也可以让我的类参数化，这样就可以了。但是，我需要创建此类对象的实例，所以我想知道配置我的应用程序的最佳方式是什么。

我应该将类型和工厂作为参数传递吗？我发现工厂模式很难看，并想避免这种方法。此外，传递的参数太多（我的应用程序实际上需要几个这样的参数）。

我应该创建一个对象并将此配置粘贴在那里吗？是否可以在运行时解析对象对象，从而在编译时不知道配置？

编辑：理想情况下，我想要类似下面的代码。您能否提供一个基于此的最小工作示例？

```
class Test[Type <: Super] { 
   def main {
       val testVal: Type = new Type()
       testVal.methodDefinedInSuper()
    }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T16:00:52.633

使用工厂。如果它们太多并且您不想创建工厂工厂来统一它们，那么使用依赖注入框架来做到这一点。依赖注入框架甚至支持 XML 配置，这似乎符合你想要做的。

如果您不知道任何依赖注入框架，请首先检查您正在使用的任何框架是否尚未提供它，如果没有，请查看[Google Guice](http://code.google.com/p/google-guice/)。

以工厂为例：

```
trait Factory[T] {
  def newInstance(): T
}

class Test[Type <: Super](typeFactory: Factory[Type]) { 
  def main {
     val testVal: Type = typeFactory.newInstance()
     testVal.methodDefinedInSuper()
  }
} 
```

谷歌 GUICE 示例：

```
class Test[Type <: Super] { 
  @Inject val testVal: Type = _
  def main {
     testVal.methodDefinedInSuper()
  }
} 
```

请注意，Google Guice 上的这种注入方式是最不推荐的。我使用它是因为它也是最简洁的，可以提供一个总体视图。

但是请注意，`Type <: Super`在这两种情况下都没有理由使用。该界限并没有为您带来任何好处，因此您可以像这样重写它们：

```
class Test(typeFactory: Factory[Super]) { 
  def main {
     val testVal: Super = typeFactory.newInstance()
     testVal.methodDefinedInSuper()
  }
}

class Test { 
  @Inject val testVal: Super = _
  def main {
     testVal.methodDefinedInSuper()
  }
} 
```

无论如何，在第一种情况下，您将工厂作为构造函数参数传递，而在第二种情况下，您使用一个 Guice 绑定来告诉 Guice 它应该使用什么来初始化`testVal`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T15:35:49.323

传递带有类型参数的对象并期望基于类型参数以不同方式工作的对象是行不通的，因为由于类型擦除，这些参数仅在编译时存在。

（好的，好的，你可以使用即将被弃用的清单，或者可能是 2.10 中的新类型标签，但是对于日常应用程序代码应该避免这种巫术。）

# cakephp-2.1 - CakePHP 2.1.3 中的事务使用

> ID：11311129
> 
> 赞同：0
> 
> 时间：2012-07-03T12:41:02.413
> 
> 标签：cakephp-2.1

我正在使用基于 innoDB 的数据库。我如何使用事务来保存数据。

我有一组用户。但只保存数据库中的最后一条记录。我不能使用 saveAll，因为我必须将数据保存在多个表中，而且它们都是相互关联的。

我什至无法定义模型关联船，因为我的数据库中有大量条目。所以每次加入都会执行。

请建议我如何使用交易概念？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T07:25:45.137

所有事务都在当前 DataSource 对象上执行。

首先你需要得到它（在模型中）：

```
$dataSrc = $this->getDataSource(); 
```

[此方法](http://api20.cakephp.org/class/model#method-ModelgetDataSource)返回当前绑定到模型的 DataSource 对象。

然后您可以使用[DataSource 对象的方法](http://api20.cakephp.org/class/data-source)来开始、提交或回滚[事务](http://book.cakephp.org/2.0/en/models/transactions.html#transactions)：

```
$dataSrc->begin();
//Do something 

if (/*Everything is nice?*/) {
    $dataSrc->commit();
} else {
    //Bad things have happened
    $dataSrc->rollback();
} 
```

当然，您必须实现自己的逻辑。从[Cake 2.2 开始，您还可以进行真正的嵌套事务](http://bakery.cakephp.org/articles/lorenzo/2012/07/01/cakephp_2_2_and_2_1_4_released)。根据[维基百科](http://en.wikipedia.org/wiki/Nested_transaction)，“嵌套交易”是：

> 当一个新事务由已经在现有事务中的指令启动时，就会发生嵌套事务。新事务被称为嵌套在现有事务中，因此该术语。嵌套事务在不同数据库中的实现方式不同。但是，它们的共同点是在最外层事务提交之前，任何不相关的事务都不会看到更改。这意味着内部事务中的提交不需要持久更新数据库。

当然，这一切都取决于您使用的数据库。[MySQL InnoDB**事务**存储引擎](http://www.innodb.com/)确实支持事务。

针对此评论的另一项澄清：

> 是的，我在控制器中使用 $this->Model->saveAll($this->request->data, array('deep' => true)。这是在 foreach 循环下编写的。只有最后一条 foreach 记录将被保存到数据库中。- Arun Jain

`$this->Model->saveAll();`不需要循环运行！它将“自动”为您管理事情。把它从循环中取出。此外，您的问题是关于事务，而不是使用 saveAll() 保存数据。[Model::saveAll()](http://api20.cakephp.org/class/model#method-ModelsaveAll)只是[saveMany()](http://api20.cakephp.org/class/model#method-ModelsaveMany)和[saveAssociated()](http://api20.cakephp.org/class/model#method-ModelsaveAssociated)的包装器- 它会根据模型关联的类型选择使用哪种方法。

阅读[蛋糕书](http://book.cakephp.org/2.0/en/index.html)，那里有很好的解释......

# asp.net - DataList 中的分页符

> ID：11311132
> 
> 赞同：0
> 
> 时间：2012-07-03T12:41:04.623
> 
> 标签：asp.net

显示四个项目后如何在数据列表中实现分页符。下面是我将 DataList 与 DataTable 绑定的代码。

```
<asp:DataList ID="DataList1" runat="server"  BackColor="White" 
            BorderColor="#E7E7FF" BorderStyle="None" BorderWidth="1px" CellPadding="3" 
            GridLines="Horizontal" Width="90%">
            <AlternatingItemStyle BackColor="#F7F7F7" />
            <FooterStyle BackColor="#B5C7DE" ForeColor="#4A3C8C" />

            <HeaderStyle BackColor="#4A3C8C" Font-Bold="True" ForeColor="#F7F7F7" />

            <ItemStyle BackColor="#E7E7FF" ForeColor="#4A3C8C" />
            <ItemTemplate>
                <table width="100%" height="240px">
                    <tr>
                        <td>
                            <asp:Label ID="lblTestID" runat="server" Text='<%# Eval("Name") %>' Font-Size="32"></asp:Label>
                        </td>
                        <td align="right">
                          <asp:Image ID="Image1" runat="server" src= '<%# Eval("PhotoPath") %>' Height="180" Width="150"  />
                        </td>  
                    </tr>
                </table>

            </ItemTemplate>
            <SelectedItemStyle BackColor="#738A9C" Font-Bold="True" ForeColor="#F7F7F7" />
        </asp:DataList> 
```

我的实际问题是我必须进行批量打印。目前，当我这样做时，我在一页中获得一半数据，在另一页中获得一半。我想如果分页符是我的问题的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:46:42.617

通过CSS，你可以设置`page-break-after: always`

# c# - VS2010 中的重构（重命名）搞砸了 WinForms 项目

> ID：11311139
> 
> 赞同：0
> 
> 时间：2012-07-03T12:41:37.073
> 
> 标签：c#, visual-studio-2010, refactoring

我将变量重命名为特定函数的本地变量，甚至是类的本地变量，但内置的重命名重构会修复项目范围内的所有内容。我将一个名为“d”的变量重命名为“deposits”，它改变了项目中每次出现的“d”，我注意到它的唯一方法是因为日期格式在我什至没有接触过的表单上搞砸了。除了获取 Resharper 或其他重构工具之外，有没有办法修复 VS 的重构？我没有重构工具在 Silverlight 项目上给我带来麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:48:54.840

这不是标准的 Visual Studio 功能，请确保您没有可能导致此问题的扩展。也尝试重新安装VS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T13:17:24.520

确保在使用此工具时取消选中“在评论中搜索”复选框。有时重命名命令更新评论有点过分热心。

从您的描述中不清楚，您的重命名命令是否错误地重命名了其他类中具有相同名称的不相关变量？

# java - java vs c++中的一元运算符

> ID：11311140
> 
> 赞同：1
> 
> 时间：2012-07-03T12:41:39.767
> 
> 标签：java, c++, unary-operator

> **可能重复：**
> [谁能解释这些未定义的行为（i = i++ + ++i，i = i++ 等……）](https://stackoverflow.com/questions/949433/could-anyone-explain-these-undefined-behaviors-i-i-i-i-i-etc)
> [Java 和 C++ 运算符之间有什么区别吗？](https://stackoverflow.com/questions/6623888/is-there-any-difference-between-the-java-and-c-operators)

为什么一元运算符在 c++ 和 java 中给出不同的结果？

看一下这个：

```
int i = 1;
i = i++ + ++i;
print i  (with cout or println) 
```

在**java**中：打印**4**

在**c++**中：打印**5**

为什么 ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T12:43:22.907

在 C++ 中，诸如语句之类的语句的行为`i = i++ + ++i;`实际上是**未定义**的，因此行为不同的事实并不令人惊讶。

事实上，如果**两个不同的 C++ 编译器**对 C++ 语句产生不同的行为，这不足为奇`i = i++ + ++i;`。

相关问题：

*   [为什么这些构造（使用 ++）是未定义的行为？](https://stackoverflow.com/questions/949433/could-anyone-explain-these-undefined-behaviors-i-i-i-i-i-etc)
*   [后缀增量运算符究竟何时在复杂表达式中求值？](https://stackoverflow.com/questions/1222418/when-exactly-is-the-postfix-increment-operator-evaluated-in-a-complex-expression)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T12:46:21.327

用这段代码更好地解释：

```
int i = 1;
int j =0;
j = i++ + ++i;
print j  (with cout or println) 
```

在 java 中 i++ 和 ++i 有相同的结果 i 增加 1 所以你这样做： 2 + 3 = 5 i 之后将是 5。j 之后将是 5

在 c++ 中，i++ 和 ++i 的行为不同，i++ 就地递增，而 ++i 之后递增。

所以它读为 2+ 2。j 将是 4，i 将是 5。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T12:47:03.573

C++ 和 Java 是不同的语言，所以有不同的效果。请参阅运营商优先级。

在 Java`++`中（后缀和前缀）在同一行，而在 C++ 中它们具有不同的优先级。

*   [Java中的运算符优先级](http://bmanolov.free.fr/javaoperators.php)
*   [C++ 中的运算符优先级](http://en.cppreference.com/w/cpp/language/operator_precedence)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T12:49:31.760

在 Java 中，后置自增`++`运算符在某种程度上是“原子的”（与线程无关），因为值被评估为表达式并且增量发生时不受其他运算符的干扰。

[来自 Wikipedia 的 Java运算符优先级表](http://en.wikipedia.org/wiki/Java_syntax#Operators)。

```
i = i++ + ++i
i = ((i++) + (++i))
i = (1 + (++i)) // i = 2
i = (1 + 3) // i = 3
i = 4 
```

对于 C，行为未按标准定义。

来自 Wikipedia 的 C 的[运算符优先级。](http://en.wikipedia.org/wiki/Operators_in_C_and_C++#Operator_precedence)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T12:44:58.557

```
i = i++ + ++i; 
```

导致未指定的行为，这意味着您可以使用不同的编译器或不同的编译器设置获得不同的结果。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-03T12:54:09.290

```
int i = 1;
i = i++ + ++i;
System.out.println(i);

int i = 1;
int j = i++ + ++i;
System.out.println(j); 
```

总是给出**4**，因为在 Java 中从左到右 (LALR)[解析表达式。](http://en.wikipedia.org/wiki/LALR_parser)

# c# - 为什么 ModalPopUp 中选择的值没有反映和显示在 GridView 中？

> ID：11311144
> 
> 赞同：0
> 
> 时间：2012-07-03T12:41:51.777
> 
> 标签：c#, asp.net

我是一名新的 ASP.NET 开发人员，我正在为我的公司开发一个基于 Web 的建议框程序，员工可以在其中提交他们有的任何安全建议。现在，我正在研究这个系统的管理部分。

管理员将能够查看 GridView 控件中列出的所有建议。在 GridView 的最后一列中，将在此处列出状态。当管理员单击其中一个建议的状态时，将出现一个新的弹出窗口 (asp.net ajax ModalPopUpExtender)，其中列出所有可能的状态，例如：已执行、已批准...等。当管理员选择其中一种状态，建议的状态将在数据库中更新。***我写了代码，但它仍然没有更新建议的状态，***

**所以你能帮我修改它吗？**

仅供参考，我有以下数据库设计：

```
Employee Table: Username, Name...
SafetySuggestionsLog: ID, Title, Description, Username, StatusID
SafetySuggestionsStatus: ID, Status 
```

**ASP.NET 代码：**

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
            <ContentTemplate>
        <asp:GridView ID="GridView1" runat="server" AllowPaging="True" 
                        AllowSorting="True" AutoGenerateColumns="False" DataKeyNames="ID" 
                        width="900px" CssClass="mGrid" 
                        DataSourceID="SqlDataSource1" 
                        OnRowDataBound="GridView1_RowDataBound">
            <AlternatingRowStyle BackColor="White" ForeColor="#284775" CssClass="alt" />
            <HeaderStyle Font-Bold = "True" ForeColor="Black" Height="20px"/> 
            <Columns>
                <asp:BoundField DataField="ID" HeaderText="ID" InsertVisible="False" 
                    ReadOnly="True" SortExpression="ID" />
                <asp:BoundField DataField="Title" HeaderText="Title" SortExpression="Title" />
                <asp:BoundField DataField="Description" HeaderText="Description" 
                    SortExpression="Description" />
                <asp:BoundField DataField="Name" HeaderText="Name" SortExpression="Name" />
                <asp:BoundField DataField="Username" HeaderText="Username" 
                    SortExpression="Username" />
                <asp:BoundField DataField="DivisionShortcut" HeaderText="DivisionShortcut" 
                    SortExpression="DivisionShortcut" />
                <asp:BoundField DataField="Type" HeaderText="Type" SortExpression="Type" />

                <%-- This to make status be opened and edited through the Ajax ModalPopUp Window --%>
                <asp:TemplateField HeaderText="Status">
                    <ItemTemplate>
                        <asp:LinkButton runat="server" ID="lnkSuggestionStatus" Text='<%#Eval("Status")%>'
                                        OnClick="lnkSuggestionStatus_Click">
                        </asp:LinkButton>
                    </ItemTemplate>
                </asp:TemplateField>

                <%--<asp:HyperLinkField HeaderText="Status" 
                    SortExpression="Status" />--%>
            </Columns>
            <RowStyle HorizontalAlign="Center" />
        </asp:GridView>

        <asp:Button runat="server" ID="btnModalPopUp" style="display:none" />

        <AjaxToolkit:ModalPopUpExtender ID="modalPopUpExtender1"
                                        runat="server" 
                                        TargetControlID="btnModalPopUp" 
                                        PopupControlID="pnlPopUp" 
                                        BackgroundCssClass="popUpStyle"
                                        PopupDragHandleControlID="panelDragHandle" 
                                        OkControlID="OKButton">
        </AjaxToolkit:ModalPopUpExtender>

        <asp:Panel runat="server" ID="pnlPopUp">

                    <asp:RadioButtonList ID="StatusList" runat="server" RepeatColumns="1" RepeatDirection="Vertical"
                                            RepeatLayout="Table" TextAlign="Left" DataSourceID="SuggestionStatusDataSource"
                                            DataTextField="Status" DataValueField="ID">
                        <asp:ListItem id="option1" runat="server" Value="ACTIONED" />
                        <asp:ListItem id="option2" runat="server" Value="APPROVED" />
                        <asp:ListItem id="option3" runat="server" Value="PENDING" />
                        <asp:ListItem id="option4" runat="server" Value="TRANSFERRED" />
                    </asp:RadioButtonList>
                    <asp:SqlDataSource ID="SuggestionStatusDataSource" runat="server"
                                        ConnectionString="<%$ ConnectionStrings:testConnectionString %>"
                                        SelectCommand="SELECT * FROM [SafetySuggestionsStatus]"></asp:SqlDataSource>

                    <asp:Button ID="confirmButton" runat="server" Text="Confirm" 
                                OnClientClick="javascript:return confirm('Are you sure you want to send an email notification about the safety suggestion to the owner?')" 
                                OnClick="btnSendStatus_Click" />

            <asp:Button ID="OKButton" runat="server" Text="Close" />
        </asp:Panel>
        </ContentTemplate>
        </asp:UpdatePanel> 
```

**代码隐藏：**

```
protected void lnkSuggestionStatus_Click(object sender, EventArgs e)
    {
        LinkButton lnkSuggestionStatus = sender as LinkButton;

        //var safetySuggestionsId = 

        //get reference to the row selected 
        GridViewRow gvrow = (GridViewRow)lnkSuggestionStatus.NamingContainer;

        //set the selected index to the selected row so that the selected row will be highlighted
        GridView1.SelectedIndex = gvrow.RowIndex;

        //This HiddenField used to store the value of the ID
        HiddenField1.Value = gvrow.RowIndex.ToString();

        //show the modalPopUp
        modalPopUpExtender1.Show();
    }

    public void btnSendStatus_Click(object sender, EventArgs e) {

        var statusID = StatusList.SelectedValue;

        string connString = "Data Source=localhost\\sqlexpress;Initial Catalog=psspdbTest;Integrated Security=True";
        //For updating the status of the safety suggestion
        string updateCommand = "UPDATE SafetySuggestionsLog SET StatusID= @statusID where ID=@SafetySuggestionsID";
        using (SqlConnection conn = new SqlConnection(connString))
        {
            conn.Open();
            using (SqlCommand cmd = new SqlCommand(updateCommand, conn))
            {
                cmd.Parameters.AddWithValue("@statusID", Convert.ToInt32(statusID));
                cmd.Parameters.AddWithValue("@SafetySuggestionsID", Convert.ToInt32(HiddenField1.Value));
                cmd.ExecuteNonQuery();
            }
            //reset the value of hiddenfield
            HiddenField1.Value = "-1";
        }

        GridView1.DataBind();

        //SendSuggestionStatusToUser(statusID);
    } 
```

**我没有收到任何错误，但 ModalPopUp 窗口中的选定状态不会反映回 GridView。为什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:47:21.227

在您的 btnSendStatus_Click 中，您更新了您的数据库，但没有更新您的 gridview。看来你需要把

```
 gridview.databind() 
```

在该功能的末尾。

也许在更新面板中添加触发器会有所帮助

```
 </ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="OKButton" EventName="click" />
        </Triggers>
</asp:UpdatePanel> 
```

希望有帮助

# linux - 根据时间启动和终止进程

> ID：11311146
> 
> 赞同：2
> 
> 时间：2012-07-03T12:42:06.207
> 
> 标签：linux, shell, scripting

我有一堆不同的进程（主要是 shell 脚本）需要在特定时间启动，然后需要在几个小时后被杀死。现在我通过 cron 启动它们，然后使用另一个 cron 作业来获取进程 ID 并杀死它们。不是最干净的方法，尤其是在运行同一脚本的多个副本时。

我想知道是否有某种可用的包装器可以启动一个进程（在 subshel​​l 中？还是 fork？），然后在给定的时间杀死它。谷歌搜索并没有带来多少收获，所以我想在深入编写自己的内容之前咨询无所不知的 stackoverflow 社区。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:48:18.097

您已经拥有的是正确的解决方案。通过 cron 开始，通过 cron 结束。关于同一脚本的多个实例的问题，这是您的需要。您的要求要求运行同一脚本的多个实例？

**获取进程 ID 并杀死它们**。当你说你的意思是脚本将它们的 pid 记录在你用来阻止它们的文件中时？或者你使用**ps/pidof**？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:49:14.327

[Monit](http://mmonit.com/monit/)是一个出色的工具，可用作控制/监视进程的包装器。

您的情况将属于服务测试功能，您将根据[流程正常运行时间](http://mmonit.com/monit/documentation/monit.html#uptime_testing)采取行动。

```
 check process myapp with pidfile /var/run/myapp.pid
    start program = "/etc/init.d/myapp start"
    stop program = "/etc/init.d/myapp stop"
    if uptime == 3 hours then stop 
```

# jquery - 使用jquery在iframe中查找元素的高度

> ID：11311147
> 
> 赞同：1
> 
> 时间：2012-07-03T12:42:07.620
> 
> 标签：jquery, html, css, iframe, xhtml

我刚刚尝试了一个选择器，像这样

```
$('#message_type_popup').contents().find('#bb-main-content').height(); 
```

结果是

`Error: Permission denied for <file://> to get property HTMLDocument.ownerDocument from <http://www.sample.com>.`

我只是在本地尝试过。如果我从同一个域加载 iframe，它会起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:43:43.927

[如果 iframe 不是来自同一个域，由于浏览器同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，您将无法使用 javascript 访问其内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:44:34.723

这是为了防止跨站点脚本攻击 (XSS)。iframe 的内容应该来自同一个域，以便您能够通过 JavaScript 对其进行操作

关于该主题的一些有趣的阅读：http: [//pipwerks.com/2008/11/30/iframes-and-cross-domain-security-part-2/](http://pipwerks.com/2008/11/30/iframes-and-cross-domain-security-part-2/)

# c# - 在 listView 中创建列并添加项目

> ID：11311153
> 
> 赞同：19
> 
> 时间：2012-07-03T12:42:27.483
> 
> 标签：c#, visual-studio-2010, listview

我正在学习如何使用`listView`in a`windowsForm`并且我有一些希望在这里解决的问题。第一件事是当***我***使用以下代码创建列时：

```
private void initListView()
    {
        // Add columns
        lvRegAnimals.Columns.Add("Id", -3,HorizontalAlignment.Left);
        lvRegAnimals.Columns.Add("Name", -3, HorizontalAlignment.Left);
        lvRegAnimals.Columns.Add("Age", -3, HorizontalAlignment.Left);
    } 
```

**当我运行程序时，列的名称是不可见的，它们都在左角，我必须“拖动”它们才能阅读文本。我做错了什么？**

最后我想知道如何将项目添加到列中。我是否首先创建一个对象

```
ListViewItem item1 = new ListViewItem(???);
item1.SubItems.Add("text"); 
```

每个 listViewItem 对象是一列还是一行？如何添加信息行？一些帮助！谢谢！

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-07-03T13:02:50.010

您的第一个问题是您将 -3 传递给 Columns.Add 的第二个参数。它需要为 -2 才能自动调整列的大小。来源： http: [//msdn.microsoft.com/en-us/library/system.windows.forms.listview.columns.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.columns.aspx)（看底部代码示例的注释）

```
private void initListView()
{
    // Add columns
    lvRegAnimals.Columns.Add("Id", -2,HorizontalAlignment.Left);
    lvRegAnimals.Columns.Add("Name", -2, HorizontalAlignment.Left);
    lvRegAnimals.Columns.Add("Age", -2, HorizontalAlignment.Left);
} 
```

您还可以使用另一个重载 Add(string)。例如：

```
lvRegAnimals.Columns.Add("Id");
lvRegAnimals.Columns.Add("Name");
lvRegAnimals.Columns.Add("Age"); 
```

更多重载参考：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.listview.columnheadercollection.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.columnheadercollection.aspx)

其次，要将项目添加到 ListView，您需要创建 ListViewItem 的实例并将它们添加到 listView 的 Items 集合中。您将需要使用 string[] 构造函数。

```
var item1 = new ListViewItem(new[] {"id123", "Tom", "24"});
var item2 = new ListViewItem(new[] {person.Id, person.Name, person.Age});
lvRegAnimals.Items.Add(item1);
lvRegAnimals.Items.Add(item2); 
```

您还可以将对象存储在项目的 Tag 属性中。

```
item2.Tag = person; 
```

然后你可以提取它

```
var person = item2.Tag as Person; 
```

如果您有任何问题，请告诉我，希望对您有所帮助！

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2014-12-10T22:25:42.903

我没有看到有人正确回答这个问题。所以我把它贴在这里。为了让列显示，您需要指定以下行。

```
lvRegAnimals.View = View.Details; 
```

然后在那之后添加你的列。

```
lvRegAnimals.Columns.Add("Id", -2, HorizontalAlignment.Left);
lvRegAnimals.Columns.Add("Name", -2, HorizontalAlignment.Left);
lvRegAnimals.Columns.Add("Age", -2, HorizontalAlignment.Left); 
```

希望这可以帮助其他任何人在未来寻找这个答案。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-03-15T11:53:03.587

您需要为控件设置属性：

```
listView1.View = View.Details; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-29T22:16:56.563

```
 listView1.View = View.Details;
        listView1.Columns.Add("Target No.", 83, HorizontalAlignment.Center);
        listView1.Columns.Add("   Range   ", 100, HorizontalAlignment.Center);
        listView1.Columns.Add(" Azimuth ", 100, HorizontalAlignment.Center); 
```

我也有同样的问题..我将列拖到左边..但现在好了..所以假设我有 283*196 大小的列表视图 .....我们在列宽 -2 中声明自动宽度.. 适合在列表视图中，我们可以将列表视图宽度分为 3 部分（83,100,100）...

# javascript - jQuery UI 更改按钮基于哪个 DIV 可见

> ID：11311157
> 
> 赞同：1
> 
> 时间：2012-07-03T12:42:28.613
> 
> 标签：javascript, jquery

我有一个带有按钮参数的 jquery 对话框。

在我的对话框中，我有一个宽度是隐藏溢出的两倍的 div。按钮是：“取消”或“下一步”。如果他们点击取消，它就会消失。如果他们单击下一步，两倍宽度的 div 会滑过，显示下一个阶段。这很好用，但是我需要更改按钮及其操作，例如说“返回”会滑回，“提交”会提交表单。到目前为止，我有这个：

```
 the_form.dialog({
    autoOpen: false,
    resizable: false,
    modal: true,
    width: 700,
    height: 500,
    'open': function(){
        $('#new_membership_form_content').load('/ajax', {'index': the_form.attr('data-index'), 'race_index': the_form.attr('data-index')});
    },
    'close': function(){
        $('#new_membership_form_content').html('<img src="/wait.gif"/>');
    },
    buttons: {
        'Cancel': function(){
            the_form.dialog('close');
        },
        'Next': function(){
            $("#join_form_container").animate({
                left: '-672px',
            }, 1500, "easeOutExpo");
        }
    }
}); 
```

任何帮助都会很棒！:D 在此先感谢。

编辑：这是我想要实现的伪代码。但是，它不起作用……（忽略函数的内容，它们只是被粘贴了）。

```
 buttons: {
        if($("#join_form_container").css("left") == "0px"){
            'No, thanks'     : function(){the_form.dialog('close')},
            'Add to basket'  : function(){$("#join_form_container").animate({left: '-672px'}, 1500, "easeOutExpo")},
        }else{
            'Go back'        : function(){$("#jasdainer").animate({left: '-672px'}, 1500, "easeOutExpo")},
            'Submit'         : function(){$("#jasdainer").animate({left: '-672px'}, 1500, "easeOutExpo")}
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:22:37.610

因此，我会有某种标志来表示您何时想要更改按钮功能，或者您可以调用一个函数来处理按钮的重新绑定。

当您的 css 更改时，请调用 rebindCancel() 如下所示

```
function rebindCancel() {
    $('#cancelButton').unbind('click');
    $('#cancelButton').bind('click', function(event) {
        //Add the code for what you want the Cancel button to rebind to
}); 
```

然后，您可以使用另一种相反的方法将其重新绑定回其初始状态。

或者，你可以有一个标志。

```
var cssChanged = false;
function rebindCancel() {
    $('#cancelButton').bind('click', function(event) {
        if (cssChanged == false) {
             //Bind the initial code here
        } else {
            //Bind the alternate code here when the css left == 0px
        }
}); 
```

# c# - 无法让模型绑定在 MVC2 中工作

> ID：11311158
> 
> 赞同：0
> 
> 时间：2012-07-03T12:42:31.307
> 
> 标签：c#, asp.net-mvc-2

```
<% using (Html.BeginForm("Create", "User", FormMethod.Post, new { id = "frmCreateUser", name = "frmCreateUser" })){%> 
```

我正在尝试将表单数据发送到控制器，其中`Create`方法名称是方法名称，`user`方法是控制器名称。方法的语法

```
 [AcceptVerbs(HttpVerbs.Post)]
 public ActionResult Create(User UserToCreate)
 {
  //Controller action
 } 
```

文本框的语法

```
 <%: Html.TextBoxFor(model => model.UserName, new {id="UserName", size="30" })%> 
```

创建时调用正常，但用户对象给出 null 为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T12:51:14.853

helper 方法为输入框分配一个唯一的`TextBoxFor`id，以便 MVC 可以在您将其发布到服务器时映射属性。您覆盖 id 因此您的映射将失败，请将您的文本框代码更改为：

```
<% Html.TextBoxFor(model => model.UserName, new { size = 30 }) %> 
```

澄清一下，MVC 使用`name`输入字段的属性映射属性。但是，我怀疑覆盖该`id`属性会影响这一点。您可以检查 HTML 输出以澄清这一点，名称应类似于`user.username`.

**编辑**

将您的代码沙箱化到一个小型 MVC3 项目中，它对我来说效果很好（即使设置了 id！）。查看您使用的标签会显示您使用 MVC2 而不是 3？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T12:56:08.347

您不需要评估 id 属性。确保您的视图是强类型的（由用户），例如：

```
@model User 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T12:52:20.423

可能是在黑暗中刺伤，但删除 id="UserName" 部分。

如果你的控制器，被映射到一个特定的类。这样的事情应该没问题。

```
@model  SomeSite.ViewModels.VM_User    

@Html.TextBoxFor(model => model.UserName, new { Class = "ui-corner-all FormElement ui-widget-content" }) 
```

# iphone - Tableviewcell 的图像有时会在滚动时显示其他行的图像

> ID：11311160
> 
> 赞同：0
> 
> 时间：2012-07-03T12:42:44.993
> 
> 标签：iphone, objective-c, uitableview, grand-central-dispatch

我有一个 ImageDownloader 类，它具有使用 GCD 下载图像的功能：

```
- (void) downloadImageFromURL:(NSURL *) url completionBlock:(void (^)(UIImage *image, NSError *error)) block {

dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul), ^{
    NSData *imageData = [NSData dataWithContentsOfURL:url];
    UIImage *picture=[UIImage imageWithData:imageData];
    if(picture) {
        block(picture, nil);
    } 
    else {
        NSError *error = [NSError errorWithDomain:@"image_download_error" code:1 
                                         userInfo:[NSDictionary dictionaryWithObject:@"Can't fetch data" forKey:NSLocalizedDescriptionKey]];
        block(nil, error);
    }

  });
} 
```

我的 tableviewcell（在它自己的 nib 文件中定义）为每一行调用这个函数，如下所示：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

//custom cell in nib file
static NSString *MyIdentifier = @"contactsCell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];
if (cell == nil) {
    [[NSBundle mainBundle] loadNibNamed:@"contactsCell" owner:self options:nil]; //feedCell je ime nib fajla
    cell = contactsCell;
    self.contactsCell = nil;
}  

if (indexPath.section == 0) {
    UIImageView *avatar=(UIImageView *) [cell viewWithTag:1];
    avatar.image=[UIImage imageNamed:@"petek.jpg"];
    UILabel *nameLabel= (UILabel *) [cell viewWithTag:2];
    nameLabel.text=@"Some guy";
    UIButton *askBtn=(UIButton *) [cell viewWithTag:3];
    [askBtn setTitle:@"Ask" forState:UIControlStateNormal];
    [askBtn addTarget:self action:@selector(checkButtonTapped:event:)  forControlEvents:UIControlEventTouchUpInside];

}
else {
    UIImageView *avatar=(UIImageView *) [cell viewWithTag:1];
    ImageDownloader *idl=[[ImageDownloader alloc] init];
    NSURL *imageUrl=[NSURL URLWithString:@"http://someImageUrl"];
    [idl downloadImageFromURL:imageUrl completionBlock:^(UIImage *image, NSError *error)
     {
         if(!error) {
             dispatch_sync(dispatch_get_main_queue(), ^(void) {
                 avatar.image=image;
             });
         } else {
             NSLog(@"error %@", error);
         }

     }];
    UILabel *nameLabel= (UILabel *) [cell viewWithTag:2];
    nameLabel.text=@"John Stockton";
    UIButton *followBtn=(UIButton *) [cell viewWithTag:3];
    [followBtn setTitle:@"Follow" forState:UIControlStateNormal];
    [followBtn addTarget:self action:@selector(checkButtonTapped:event:)  forControlEvents:UIControlEventTouchUpInside];

}

    return cell;    

} 
```

第 1 部分的图像正确加载，但在滚动时，有时第 1 部分的一行中的图像仅在片刻之内有第 0 部分的图像。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:47:33.280

如果您`avatar.image = nil`在开始下载之前这样做，您将不会遇到此问题。发生这种情况是因为单元格出现在屏幕上与单元格的图像完成下载之间存在延迟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T12:51:20.187

当您重用名为 的行的唯一标识符时`MyIdentifier`，它可能会使旧行的图像出队，然后重新加载数据。

如果静态标识符如：

```
NSString *MyIdentifier = [NSString stringWithFormat:@"contactsCell-%d-%d",indexPath.section,indexPath.row]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T12:52:40.373

`UIImageView *avatar=(UIImageView *) [cell viewWithTag:1];` 永远不要在细胞中携带任何信息。它们是可重复使用的。

# linux - 使用文本文件作为输入源

> ID：11311161
> 
> 赞同：1
> 
> 时间：2012-07-03T12:42:52.297
> 
> 标签：linux, shell, unix

好的，基本上我希望能够使用这种格式的文本文件：

```
www.website.com 443 123.456.789.098
www.website2.com 443 765.432.101.234
.... 
```

作为输入源，脚本将获取网站地址并将其保存在变量中，并且与端口和 IP 地址相同。所以它看起来像这样：

```
website=www.website.com
port=443
ip=123.456.789.098 
```

到目前为止，我已经尝试过这个：

```
for line in [ cat $file_name ]; do
    website=`echo $line | cut -d" " -f1`
    port=`echo $line | cut -d" " -f2`
    ip=`echo $line | cut -d" " -f1` 
```

但是当我回显变量时，我得到的只是：

```
[
[
[ 
```

我似乎无法弄清楚如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T12:45:37.700

请改用此模式：

```
while read line ; do
    ... loop body ...
done < "$file_name" 
```

解释：`for var in word-list`将列表中的单词按顺序分配给变量。所以对于第一个循环，`$line`将扩展为`[`（列表中的第一个单词）。下一个词是`cat`，然后是 的值`file_name`。

要从文件中读取，您需要使用[I/O 重定向](https://www.gnu.org/software/bash/manual/bashref.html#Redirections)。

`while`另一方面，将执行您作为参数 ( `read line`) 传递的命令。`read`将从中读取一行`stdin`并将值放入您作为参数传递的变量中。

奇数`done < $file_name`设置`stdin`为读取。为了让您的生活更加简单，您可以使用`read`为您拆分输入：

```
while read website port id ; do
    ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T12:50:55.633

```
while read WEBSITE PORT IP
do 
    echo $WEBSITE $IP $PORT ; 
done < file 
```

但循环结束后，您将无法使用此变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T13:03:17.723

`for`默认情况下不逐行读取，而是读取由 $IFS 分隔的标记。默认情况下，IFS 通常包含空格、制表符和换行符。如果你想强制 bash 逐行读取（而不是空格分隔的标记），你可以这样做：

```
IFS=`echo -ne '"\n"'`; for line in `cat $file`; do echo $line; done 
```

请注意周围的反引号`cat $file`将执行`cat`“内联”。

使用`read`是另一种选择。[当然比更改IFS](http://www.gnu.org/software/bash/manual/bashref.html#index-IFS-154)（内部场分离器）更容易阅读和理解

# three.js - Three.js 与触摸和/或滑动事件示例

> ID：11311163
> 
> 赞同：7
> 
> 时间：2012-07-03T12:42:53.927
> 
> 标签：three.js

已经看到这个帖子了

[Iphone - Javascript 事件...for three.js](https://stackoverflow.com/questions/8307135/iphone-javascript-events-for-three-js)

但是谁能给我指出一个使用触摸和滑动事件的实际工作的three.js示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T12:54:44.517

根据这篇博文，WebGL[可以在 Iphone 或 Android 上运行，](http://learningthreejs.com/blog/2011/12/28/let-s-make-a-3d-game-supporting-mobile/)但它并不是真正设计用于...

好吧，下一个手机浏览器可能会支持它，但是，就目前而言，WebGL 还太年轻。获得全面支持的唯一解决方案似乎是 CSS3d ......

注意：也许 iphone 上的 Chrome 可以改变这一点，你应该检查一下 :)

# excel - MS Excel - 格式问题

> ID：11311164
> 
> 赞同：0
> 
> 时间：2012-07-03T12:42:55.750
> 
> 标签：excel

在 MS Excel 2007 和 2010 中，我有一个我的站点位置的数据库，其中不同的位置是不同的，例如 AUG2345、AUG2346、AUG2347 等。当我在 excel 中输入 AUG2345 时，它会立即将其转换为日期。当我尝试格式化单元格时，它会将其转换为数字，但是我想将数据保留为 AUG2345、AUG2346 等。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T13:34:13.707

一种方法是在数据前使用撇号，例如输入**'AUG2345**。' 不显示在单元格本身中，它只是告诉 excel 将数据视为文本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T13:20:47.187

在粘贴之前，将单元格格式化为`Text`. 然后粘贴。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-23T09:34:02.827

选择自定义格式并以这种方式告诉 Excel 你想要它，你也可以从那里将其更改为文本或任何其他格式...

# git - 在 mac osx lion 上安装另一个版本的 Git

> ID：11311165
> 
> 赞同：0
> 
> 时间：2012-07-03T12:42:59.770
> 
> 标签：git

在我的 Mac 上，首先我安装了已经安装了 git 的 xcode，但是 git 是旧版本。当我运行 which git 时，结果是：“/usr/bin/git”。

我想安装最新版本的 git，并将其用作默认 git。我在这个网站上尝试了这种方式：http: [//git-scm.com/book/en/Getting-Started-Installing-Git](http://git-scm.com/book/en/Getting-Started-Installing-Git)

首先，我更新到 git 的 xcode 版本，它不起作用。

然后，我尝试下载新版本的 git 并将其安装在 usr/local/git 目录中，当我运行命令“make prefix=/usr/local all”时，我遇到了一些问题：

```
ld: library not found for -lintl
collect2: ld returned 1 exit status
make: *** [git-credential-store] Error 1 
```

有人知道如何解决这个问题吗？

另外，我尝试下载dmg文件并安装成功，但是当我运行命令git --version时，它仍然是旧版本。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T12:44:28.920

编辑 ~/.profile 使新 git 目录的路径在旧 git 目录的路径之前，因此它总是首先找到它（和相关文件）。没有这个，你会发现新的 git 会使用系统路径寻找支持文件，并会为旧的 git 获取支持文件，从而导致问题。

将此行添加到 .profile

```
export PATH=/path/to/new/git:$PATH 
```

然后关闭并重新打开终端以重新加载它并执行 echo $PATH 进行检查。

# asp.net - 在负载均衡器环境中部署 wcf 服务时出现问题

> ID：11311167
> 
> 赞同：1
> 
> 时间：2012-07-03T12:43:09.887
> 
> 标签：asp.net, windows, wcf

我在两台 windows server 2003 机器上为端口 80 配置了负载平衡器服务。我在 IIS 上部署了相同的 wcf 服务，并将虚拟 IP 共享给客户端以使用该服务。

如果两个服务器都启动并运行，则客户端能够使用该服务但任何服务器都关闭它会引发以下异常：-

> 在服务器端口上没有可以接受消息的端点侦听。这通常是由不正确的地址或 SOAP 操作引起的。有关更多详细信息，请参阅 InnerException（如果存在）。

任何想法 ？

# javascript - 将选项视为选择下拉列表上的单击事件

> ID：11311175
> 
> 赞同：0
> 
> 时间：2012-07-03T12:43:43.373
> 
> 标签：javascript, jquery, html, highcharts, highstock

这可能是一个非常简单的答案，但是我对 jQuery/JavaScript 很陌生，所以请多多包涵。

目前，我有一个包含 4 个选项的下拉菜单，然后`<button>`旁边有一个根据用户选择的内容更改图表的选项。基本上，我想要实现的只是消除对按钮的需求，并在用户单击其中一个选项时刷新图表。

以下是我基于它的jsfiddle。

[http://jsfiddle.net/jlbriggs/EmMxH/92/](http://jsfiddle.net/jlbriggs/EmMxH/92/)

任何帮助都会很棒，谢谢

亨利

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T12:45:35.783

您想要选择列表上的“更改”事件，而不是点击事件。（基于你的小提琴代码）

```
<select id="list">
  <option value="A">Data Set A</option>
  <option value="B">Data Set B</option>
  <option value="C">Data Set C</option>
  <option value="D">Data Set D</option>    
</select>

$("#list").change(function(){
  //... do stuff
  var selVal = $(this).val();
  if(selVal == "A" || selVal == ''){
    options.series = [{name: 'A', data: [1,2,3,2,1]}]
  } else if(selVal == "B"){
    options.series = [{name: 'B', data: [3,2,1,2,3]}]
  } else if(selVal == "C"){
    options.series = [{name: 'C', data: [5,4,8,7,6]}]
  } else {
    options.series = [{name: 'D', data: [4,7,9,6,2]}]
  }
  var chart = new Highcharts.Chart(options);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T12:46:57.140

**工作演示** [http://jsfiddle.net/WDcL4/](http://jsfiddle.net/WDcL4/) **或** [http://jsfiddle.net/gUnax/3/](http://jsfiddle.net/gUnax/3/)使用`$(this)`

使用的 API： http: [//api.jquery.com/change/](http://api.jquery.com/change/)

请注意 Jquery 1.4.4 使用`$("#list").change(function(){...});` [http://jsfiddle.net/gUnax/2/](http://jsfiddle.net/gUnax/2/)

Jquery 1.7 ...可以使用`$("#list").on('change', function(){...});`

希望这可以帮助！

**代码**

```
$("#list").on('change', function(){
    //alert('f')
    var selVal = $("#list").val();
    if(selVal == "A" || selVal == '')
    {
        options.series = [{name: 'A', data: [1,2,3,2,1]}]
    }
    else if(selVal == "B")
    {
        options.series = [{name: 'B', data: [3,2,1,2,3]}]
    }
    else if(selVal == "C")
    {
        options.series = [{name: 'C', data: [5,4,8,7,6]}]
    } 
    else
    {
        options.series = [{name: 'D', data: [4,7,9,6,2]}]
    }  
    var chart = new Highcharts.Chart(options);    
});
​ 
```

# json - ElasticSearch，特定字段未返回

> ID：11311177
> 
> 赞同：1
> 
> 时间：2012-07-03T12:43:45.487
> 
> 标签：json, elasticsearch

我遇到了一点弹性搜索问题。我是弹性搜索的新手，不知道为什么这不起作用。

```
curl -XPOST 'http://myhost.nl:9200/my_index/test/_search?pretty=true' -d '{ "fields": ["message"] }' 
```

我没有拿回任何领域。“消息”字段确实存在，并且看起来像弹性搜索网站上的示例。[http://www.elasticsearch.org/guide/reference/api/search/fields.html](http://www.elasticsearch.org/guide/reference/api/search/fields.html)

谁能看到我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:42:17.230

如果存储了此字段，您的查询将有效。但是由于它没有被存储并且仅作为源的一部分可用，因此您需要指定它的完整路径。尝试：

```
curl -XPOST 'http://myhost.nl:9200/my_index/test/_search?pretty=true' -d '{ "fields": ["tweet.message"] }' 
```

# jquery - jQuery：计算元素并将元素编号用作 CSS 类

> ID：11311180
> 
> 赞同：1
> 
> 时间：2012-07-03T12:43:53.527
> 
> 标签：jquery, css, count, caption

我有一个 jquery 脚本来为图像生成标题。但是现在我想计算带有标题的元素，并将适当的数字作为一个类添加到图像类中。我知道如何计算（.length），但是如何从每个元素中使用适当的数字？

[http://jsbin.com/ugemih/6/edit#javascript,html,live](http://jsbin.com/ugemih/6/edit#javascript,html,live)

BR

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T12:46:01.513

将变量传递给传递给的函数`each()`，它将保存当前元素的编号：

```
$('.foo').each(function (i) {
    $(this).addClass('foo-' + i);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:48:56.523

通过这种方式可以实现动态修改类名。

```
$('.test').each(function (e) { 
    $(this).addClass('test_' + e); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T12:53:36.870

如果您只想设置元素的类，无论有没有 jQuery，这都非常*简单*！快速使用 jQuery [.attr()](http://api.jquery.com/attr/)函数将允许您更改任何类，即类。

```
$("[div to change]").attr("class", "[class_name]" + [number]); 
```

在这里，我将 设置`class`为`[class_name][1,2,3...]`。因此，如果`[class_name]`was`hello`和`[number]`were `5`，它将设置`class`为`hello5`。

或者，如果您想`class`在对象中添加一个（保持任何适当的样式），您可以使用 jQuery 的[.addClass()](http://api.jquery.com/addClass/)函数：

```
$("[div to change]").addClass("[class_name]" + [number]); 
```

这将为您的对象添加一个类似命名`class`的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T12:56:37.010

你有什么不能使用css的原因吗？有一个伪选择器，nth-child。

```
a:nth-child(1){color: #123;}
a:nth-child(2){color: #456;}
a:nth-child(3){color: #789;} 
```

等等。

使用[Selectivizr](http://selectivizr.com/)将使这项工作在 IE6 到 8 中工作。之后，支持 nth-child。这意味着您现在可以开始编写更智能、基于标准的 css，并且该脚本将使其在 IE 中工作。

You can do everything in javascript if you want, but you should use css for applying styles, and if you can do that instead of adding classes using javascript, your site will be more efficient, and easier to maintain.

# java - 在 Java 中从包含 8 位（灰度）或 1 位（二进制）数据的字节数组创建图像（bmp 左右）

> ID：11311182
> 
> 赞同：1
> 
> 时间：2012-07-03T12:43:56.693
> 
> 标签：java, image, binary, bufferedimage, grayscale

我有一个字节数组，其中包含每像素 8 位的灰度数据或包含每像素 1 位的二进制数据。

我试过了，但它不起作用，我认为它每像素占用 4 个字节（32 位）：

```
BufferedImage image = ImageIO.read(new ByteArrayInputStream(byteArray));
ImageIO.write(image, "BMP", new File("filename.bmp")); 
```

我可以在 BufferedImage 中将数据类型更改为 1 位或 8 位吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:16:51.980

在稍微类似的情况下，我使用`Raster`了`BufferedImage`. 请参阅这个带有 8 位灰度的简单示例：

```
public static void main(String[] args) {
    JFrame f = new JFrame();
    f.setSize(600, 400);
    f.getContentPane().setLayout(new BorderLayout());
    BufferedImage bi = new BufferedImage(200, 100, BufferedImage.TYPE_BYTE_GRAY);
    WritableRaster wr = bi.getRaster();
    for (int col=0; col<bi.getWidth(); col++) {
        for (int row=0; row<bi.getHeight(); row++) {
            wr.setPixel(col, row, new int[] {(col+row)&0xff});
        }
    }
    JLabel l = new JLabel(new ImageIcon(bi));
    f.getContentPane().add(l, BorderLayout.CENTER);
    f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
    f.setVisible(true);
} 
```

我不记得，是否`BufferedImage`支持每像素 1 位。您可能想查看`setPixels`一次设置许多像素的变体。

# batch-file - 尝试创建使用“sqlcmd”导出到 CSV 的批处理文件

> ID：11311184
> 
> 赞同：0
> 
> 时间：2012-07-03T12:44:07.910
> 
> 标签：batch-file, sqlcmd

> **可能重复：**
> [如何使用 sqlcmd 从 SQL Server 将数据导出为 CSV 格式？](https://stackoverflow.com/questions/425379/how-to-export-data-as-csv-format-from-sql-server-using-sqlcmd)

我正在尝试创建一个 .bat 文件以使用 .bat 从数据库中查询`sqlcmd`。到目前为止，这是我使用在线资源得到的：

```
sqlcmd -S servername\sqlexpress -d DNAME -U username -P password
-Q "SELECT 1,2,3,4,5
    FROM table1
    SELECT 6,7,8,9,10
    FROM table2
    BACKUP DATABASE [DNAME] TO DISK = 'C:\test.csv'" 
```

如果我以当前状态运行它，则不会创建 CSV 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:48:16.897

批处理文件没有空闲空格，因此您不能只在需要的位置插入换行符。而是将所有代码放在一行中。

# iphone - 在表格视图中滚动时应用程序冻结

> ID：11311191
> 
> 赞同：0
> 
> 时间：2012-07-03T12:44:24.300
> 
> 标签：iphone

在表格视图中滚动时，我的应用程序冻结。它加载数据，但是当我尝试滚动时，应用程序立即冻结。问题是什么？我的 cellforrowatindexpath 方法是：

```
if (cell == nil) { 

    cell = [[[NSBundle mainBundle] loadNibNamed:@"MyCellView" owner:self options:nil]objectAtIndex:0];
}

getDats *gDatas=[[[getDats alloc]init]autorelease];

gDatas=[self.bookmarks objectAtIndex:indexPath.row];

const char *prior = "High"; 

const char *prior1 =[gDatas.Priority UTF8String]; 

if (strcmp(prior1 , prior) == 0)
 {
    NSString *imagePath = [[NSBundle mainBundle]pathForResource:@"highPriority" ofType:@"png"]; 

cell.imageView.image = [UIImage imageWithContentsOfFile:imagePath];   
}

[cell.MOwner setText:gDatas.WhatId];

[cell.DueDate setText:gDatas.EndDateTime];

[cell.theTextLabel setText:gDatas.Subject];

[cell.Descri setText:gDatas.Desc];

[cell.TaskId setText:[NSString stringWithFormat:@"%d" , gDatas.rowId]];  

cell.backgroundView.backgroundColor = [UIColor scrollViewTexturedBackgroundColor];

return cell; 
```

调试器显示：

> -[__NSCFString Priority]：无法识别的选择器发送到实例 0x7341790 2012-07-09 10:23:46.761 MeetingMaker[716:207] *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：'-[__NSCFString Priority]：无法识别的选择器sent to instance 0x7341790' *** First throw call stack: (0x1cbf052 0x2152d0a 0x1cc0ced 0x1c25f00 0x1c25ce2 0xf449 0x4e7e0f 0x4e8589 0x4d3dfd 0x4e2851 0x48d301 0x1cc0e72 0x29492d 0x29e827 0x224fa7 0x226ea6 0x2c037a 0x2c01af 0x1c93966 0x1c93407 0x1bf67c0 0x1bf5db4 0x1bf5ccb 0x2656879 0x265693e 0x44ea9b 0xe0c2 0x1e15) terminate called throwing an exception(gdb) .

该应用程序在线显示错误：

```
const char *prior1 =[gDatas.Priority UTF8String]; 
```

并显示

> 线程：程序收到信号 SIGABRT 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:50:01.293

您需要重用您的单元格，当您向下滚动 UITableView 时，不再在视图中的单元格会被重用，因为您需要为单元格设置一个 resuseIdentifier。

来自[UITableViewCell 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewCell_Class/Reference/Reference.html)

```
reuseIdentifier
A string used to identify a cell that is reusable. (read-only)

@property(nonatomic, readonly, copy) NSString *reuseIdentifier
Discussion
The reuse identifier is associated with a UITableViewCell object that the table-view’s delegate creates with the intent to reuse it as the basis (for performance reasons) for multiple rows of a table view. It is assigned to the cell object in initWithFrame:reuseIdentifier: and cannot be changed thereafter. A UITableView object maintains a queue (or list) of the currently reusable cells, each with its own reuse identifier, and makes them available to the delegate in the dequeueReusableCellWithIdentifier: method. 
```

因此，您应该从以下内容开始您的方法：

```
static NSString *CellIdentifier = @"Cell";  
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
 if (cell == nil) {      
cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease]; 
```

}

# ruby-on-rails - 在 rails 3.2 应用程序中使用现有表及其关系？

> ID：11311194
> 
> 赞同：0
> 
> 时间：2012-07-03T12:44:35.993
> 
> 标签：ruby-on-rails

我有一个包含大量数据和大约 20 个表的现有应用程序，如何直接使用它们。我的 database.yml 文件指向 MySQL 数据库。类似于魔术模型生成器的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:49:03.930

您可以执行以下操作

```
connection = ActiveRecord::Base.connection()
results = connection.execute("#{your_sql_query_here}")
results.each do |row|
  puts row[0]
end 
```

但是，我建议您以更连贯的方式将它们关联起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:39:44.820

您将为它们中的每一个创建一个模型，当您只有大约 20 个时，这并不多。在模型中，您可以使用

```
set_table_name :name_of_your_table 
```

请记住，模型名称只需与表足够相关，因为显式 set_table_name 方法它们不必遵循严格的约定。

要设置关系，您可以像这样使用 class_name

```
has_many :fruits, :class_name => "CrazyFruit" 
```

这听起来可能很乏味，但它是正确的方式

# php - PHP - 将多个文本框值的文本值添加到数据库

> ID：11311201
> 
> 赞同：0
> 
> 时间：2012-07-03T12:44:58.730
> 
> 标签：php

基本上我想将以下信息添加到单个数据库字段中，（txt-via-hn 文本框是门牌号，txt-via 是地址详细信息）

```
$vias =         $_POST['txt-via-hn2'].' '.$_POST['txt-via2'] 
        .' -> '.$_POST['txt-via-hn3'].' '.$_POST['txt-via3']
        .' -> '.$_POST['txt-via-hn4'].' '.$_POST['txt-via4']
        .' -> '.$_POST['txt-via-hn5'].' '.$_POST['txt-via5']
        .' -> '.$_POST['txt-via-hn6'].' '.$_POST['txt-via6']
        .' -> '.$_POST['txt-via-hn7'].' '.$_POST['txt-via7']
        .' -> '.$_POST['txt-via-hn8'].' '.$_POST['txt-via8']
        .' -> '.$_POST['txt-via-hn9'].' '.$_POST['txt-via9']
        .' -> '.$_POST['txt-via-hn10'].' '.$_POST['txt-via10']; 
```

目前，例如，如果我要输入两个过孔，则会将以下内容添加到数据库字段中：

`HOUSENUMBER ADDRESS -> HOUSENUMBER ADDRESS -> -> -> -> -> -> ->`

我想要发生的是，如果文本框值为空，则不包括末尾的空格。因此，如果我只输入两个过孔，则只会添加以下内容：

`HOUSENUMBER ADDRESS -> HOUSENUMBER ADDRESS`

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T12:48:26.177

将它们全部添加到一个数组中，运行[`array_map()`](http://php.net/array_map)它们[`array_filter()`](http://php.net/array_filter)以摆脱空元素，然后[`implode()`](http://php.net/implode)是它们，如下所示：

```
$array = array();
foreach( range( 2, 10) as $i) {
    $array[] = $_POST['txt-via-hn' . $i] . ' ' . $_POST['txt-via' . $i];
}
$vias = implode( ' -> ', array_filter( array_map( 'trim', $array))); 
```

您甚至可以检查循环中的空值，并省略对 的调用`array_filter()`，如下所示：

```
$array = array();
foreach( range( 2, 10) as $i) {
    if( !empty( $_POST['txt-via-hn' . $i]) && !empty( $_POST['txt-via' . $i])) 
        $array[] = $_POST['txt-via-hn' . $i] . ' ' . $_POST['txt-via' . $i];
}
$vias = implode( ' -> ', $array); 
```

请注意，如果您尝试访问`$_POST`未定义的索引，这两种方法都会产生通知。要纠正此问题，请`isset()`在尝试读取之前致电`$_POST`以确保已设置密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:49:52.640

```
for($i = 2; $i <= 10; $i++)
{
    if(strlen($_POST['txt-via2']))
        $array[] = $_POST['txt-via-hn'.$i] . ' ' .  $_POST['txt-via'.$i];
}

$vias = join("->", $array); 
```

# asp.net - ASP.NET Silverlight 新选项卡会话为空（缺少键）

> ID：11311216
> 
> 赞同：1
> 
> 时间：2012-07-03T12:45:40.937
> 
> 标签：asp.net, silverlight, session, tabs

场景：我的通用门户使用 ASP.NET 和登录页面托管在 IIS 中。通过 WCF 服务成功登录后，会话令牌存储`HTTPContext.Current.Session`在`mytoken`.

门户页面在 iframe 中托管 Silverlight 应用程序。SL 应用程序使用`System.Windows.Browser.HtmlPage.Window.Navigate()`.

该选项卡应该提供一个文件供下载。调用的页面是一个aspx 页面。它访问`HTTPContext.Current.Session["mytoken"]`以获取当前会话令牌。

这对我所有的客户都很好，除了一个。

问题：在这个客户中，下载选项卡`null`来自`HTTPContext.Current.Sessions["mytoken"]`. 我添加了一条痕迹来确认这一点。它不适用于 IE 或 Firefox。

直接在 Web 服务器上调用时，下载页面可以正常工作。每个客户都有一个非常相似的设置，它可以在任何地方工作，但在一个站点上。

有人知道要寻找什么吗？除了一个站点之外，如何在所有站点共享会话？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:02:15.953

我们找到了问题的原因。它与在 URL 中使用 IP 地址和/或机器名称有关。

如果门户使用`http://machine1/portal/main.aspx`并且新选项卡使用`http://123.345.789.123/portal/download.aspx`. 或者反过来。在这种情况下似乎没有共享会话，即使 IP 地址是属于机器名称的地址。

我在 SL 应用程序的配置中硬编码了下载链接的基本 URL。所以它没有根据自己的根 URL 动态构建下载 aspx 的 URL。

我现在正在使用`Application.Current.Host.Source`它的属性`Source`，`Scheme`并`Port`在 Silverlight 客户端中动态构建基本 URL。

现在一切都像魅力一样。

# vba - 我无法结合解锁 vbaproject 并在 ThisWorkbook 中写入

> ID：11311219
> 
> 赞同：1
> 
> 时间：2012-07-03T12:45:51.133
> 
> 标签：vba, excel

```
Set wb = Workbooks(Filename)
Set codeModule = wb.VBProject.VBComponents("ThisWorkbook").codeModule
codeModule.InsertLines 3, "Hej jag kan spara detta"
wb.Save 
```

下面是我的功能。我想解锁 vbaproject 并在 ThisWorkbook 中写入。出于某种原因，当我合并上述 4 行（在 ** 处）时，工作簿未解锁，并且“Hej jag kan spara detta”行未应用于 ThisWorkbook。但是，如果没有这 4 行，工作簿将被解锁。如果工作簿在运行代码之前解锁，同样的 4 行也可以工作。怎么了？

```
Sub merniplusplus()
    Dim path As String
    Dim Filename As Variant
    Dim wb As Workbook
    Dim CodeModule As Variant

    path = "C:\Merni\"

    Filename = Dir(path & "*.xls")
    Do While Filename <> ""
        If Filename <> "merni.xlsm" Then
            UnprotectPassword Workbooks(Filename), "2lbypo"

            Set wb = ActiveWorkbook
            Set CodeModule = wb.VBProject.VBComponents("ThisWorkbook").CodeModule
            CodeModule.InsertLines 3, "Hej jag kan spara detta"
            wb.Save
        End If
        Filename = Dir()
    Loop
End Sub

Sub UnprotectPassword(wb As Workbook, ByVal projectPassword As String)
    Dim currentActiveWb As Workbook

    If wb.VBProject.Protection <> 1 Then
        Exit Sub
    End If

    wb.Unprotect "poWorkbook"

    Set currentActiveWb = ActiveWorkbook
    wb.Activate

    SendKeys "%{F11}"
    SendKeys "^r" ' Set focus to Explorer
    SendKeys "{TAB}" ' Tab to locked project
    SendKeys "~" ' Enter
    SendKeys projectPassword
    SendKeys "~" ' Enter

    If (wb.VBProject.Protection = vbext_pp_locked) Then
        MsgBox ("failed to unlock")
    End If

    currentActiveWb.Activate
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:58:46.143

两件事情

1.  `Filename = Dir()`应该在循环之前，而不是在这 4 行之前。否则你会得到不一样的`Filename`。

2.  4行也应该在你的`If Filename <> "merni.xlsm" Then` 条件内

此外，您可能希望在打开新工作簿之前关闭工作簿。否则你会打开很多工作簿:)

**跟进**

您没有打开工作簿，而是每次都将其设置为当前工作簿，因此它不起作用。我已经测试了下面的代码，它工作得很好。

```
Sub merniplusplus()
    Dim path As String, Filename As String
    Dim wb As Workbook
    Dim CodeModule As Variant

    path = "C:\Merni\"

    Filename = Dir(path & "*.xls")

    Do While Filename <> ""
        If Filename <> "merni.xlsm" Then
            Set wb = Workbooks.Open(path & Filename)

            UnprotectPassword wb, "2lbypo"

            Set CodeModule = wb.VBProject.VBComponents("ThisWorkbook").CodeModule
            CodeModule.InsertLines 3, "Hej jag kan spara detta"
            wb.Close SaveChanges:=True
        End If
        Filename = Dir
    Loop
End Sub 
```

# perl - Perl 测试 (.t) 脚本的第一行应该是什么？

> ID：11311220
> 
> 赞同：6
> 
> 时间：2012-07-03T12:45:55.923
> 
> 标签：perl, testing

我正在查看我的 CPAN 发行版，并意识到我的 .t 脚本顶部有各种不一致的东西，这取决于我从哪里下载它们。这当然得罪了我。

那么，Perl 测试 (.t) 脚本的“最佳”第一行是什么？对我的 .cpanm 资源的一项非科学调查显示：

```
3429 use strict;
3211 #!/usr/bin/perl
1344 #!/usr/bin/env perl
 937 #!perl
 909 #!/usr/bin/perl -w
 801 #!perl -w
 596 
 539 #!perl -T 
```

与我应该为 Perl 脚本的 shebang 行使用什么相关[？](https://stackoverflow.com/questions/2791954/what-should-i-use-for-a-perl-scripts-shebang-line)，但在这里我想知道shebang是否有必要/有用，如果总是期望从证明中调用测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-17T05:48:48.997

`use strict;`应该在每个 Perl 程序中（以及`use warnings;`可能还有一些其他程序（取决于您与谁交谈）。它不必是第一行。

您提供的其余内容只是[shebang](https://en.wikipedia.org/wiki/Shebang_%28Unix%29)的多个版本。在 Unix 和基于 Unix 的系统上，*shebang*用于告诉解释器使用。如果*shebang*不存在，则将使用当前 shell。（也就是说，如果你的 shell 支持*shebang* ^(1。)）。

如果您在 Windows 系统上，则该*shebang*行是无用的。Windows 使用文件的后缀来确定如何执行文件。

问题是您是否真的需要在通过测试工具运行的脚本中添加一个*shebang行。*我通常不会单独执行这些测试脚本，因此可能根本不需要 shebang。在极少数情况下您确实想要执行这些脚本之一，您始终可以将它们作为`perl`命令本身的参数运行。Perl 模块也是如此。

那么，为什么是shebang？主要是习惯。我也在我的测试脚本和模块上放了一个。如果没有别的，它可以很容易地独立运行模块和测试脚本以进行测试。另外，*shebang*让人们知道这是一个 Perl 脚本，而不是 shell 脚本或 Python 脚本。

不过，shebang 有一个小问题，这与便携性有关。如果我放在`#! /usr/bin/perl`第一行，并且 Perl 解释器在 中`#! /usr/local/bin/perl`，我会得到一个错误。因此，许多*shebang*反映了该开发人员的 Perl 解释器的位置。

还有另一个问题：我使用[Perlbrew](http://perlbrew.pl)，它允许我安装多个版本的 Perl。我目前在我的 shell 中拥有的 Perl 版本是`/Users/David/perl5/perlbrew/perls/perl-5.18.0/bin/perl`. 如果我将该程序传递给另一个系统上的另一个用户，那就不好了。或者，如果我决定要在 5.10 下测试我的 Perl 脚本。

该`#! perl`变体试图解决这个问题。在 SunOS（我相信）上，这将执行您的 Perl `$PATH`（因为它可能是`/usr/local/bin/perl`或`/usr/share/bin/perl`取决于`/usr/bin/perl`系统）。但是，这不适用于大多数 Unix 机器。例如，在我的 Mac 上，我会收到一个错误的解释器错误。

我用`#! /usr/bin/env perl`. 该`env`程序接受参数`perl`，查看`perl`my 上的位置`$PATH`，然后执行 Perl 恰好在我的 $PATH 上的任何位置的完整路径。这是最通用的*shebang*方式，也是我推荐的方式。它允许用户毫无问题地使用 Perlbrew。

注意，我说的*是几乎*普遍，而不是*普遍*。在几乎所有系统上，`env`都位于 中`/usr/bin`，但显然有些系统位于`env`上`/bin`、位于其他位置或根本不在系统上。

执行`-w`Perl 时打开警告。在 Perl 5.6 之前，您使用它来打开警告。在 Perl 5.6 之后，您可以使用更灵活`use warnings;`且`-w`现在被认为已弃用的²。程序可能会使用它，因为它们最初是在 5.6 之前编写的，从未修改过，或者开发人员只是出于习惯这样做。

与[污染模式](http://perldoc.perl.org/perlsec.html#Taint-mode)`-T`有关。污点模式通常用于 CGI 脚本。基本上，在污染模式下，来自程序外部的数据被认为是*污染的，并且在未**污染*之前不能使用。污点模式也会影响和。**`@INC``PERLLIB`**

 **真正的答案是没有固定的答案。出于习惯，我会将`#! /usr/bin/env perl`第一行作为我的第一行——即使我从未期望从 Unix 命令行执行该文件。对于几乎总是作为安装的一部分而不是直接从命令行执行的这些类型的脚本，实际上不需要它。您所看到的实际上是 30 年 Perl 习惯和杂乱无章的结果。

* * *

^(1.)你的 shell 支持*shebang*，除非你使用的是 30 年前的 Bourne shell 版本或非常旧的 C shell 版本。

^(2.)我其实不知道`-w`有没有被官方弃用，但没有理由使用它。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-03T12:54:35.040

`.t`文件仍然是常规的 Perl 脚本。在第一行使用此特定脚本所需的任何内容。**

# c++ - C++ 中带有混入的奇怪循环继承

> ID：11311222
> 
> 赞同：6
> 
> 时间：2012-07-03T12:46:02.227
> 
> 标签：c++, templates, circular-dependency, mixins, crtp

在这里解读循环继承的好方法是什么？

```
class Node {
   // ...
public:
   list<Node*> neighbors() { /* ... */ }
   void update() { }
}

template<class NodeType>
class HasImportance : public virtual NodeType {
   double m_importance = 0.0;
public:
   void receive_importance(double imp) { /* ... */ }
   void give_importance() {
      for (auto neighbor : this->neighbors())
         neighbor->receive_importance(m_importance /* ... */);
   }
};

class TrafficLight : public HasImportance<TrafficLight>, virtual Node {
public:
   list<TrafficLight*> neighbors() { ... }
   void update() { give_importance(); /* ... */ }
}; 
```

它失败（gcc 4.7.0），因为在尝试从它继承`TrafficLight`时是不完整的类型。`HasImportance`

真正的问题是 HasImportance 需要知道 `neighbors()`. 如果`HasImportance`继承自 `Node`，则它认为`neighbors()`返回 的列表 `Node*`，而不是`TrafficLight*`，因此不知道它可以调用`receive_importance()`这些项目。`HasImportance`如果根本不继承类似的问题。

顺便说一句，我想做的是做一些混合来帮助轻松定义各种不同类型的图形，并分别对每个混合进行单元测试。例如，我应该能够通过编写类似`class TrafficLight : public HasImportance, HasState<3>, virtual Node { }`.

我想出了三种方法来解决这个问题，但看起来都很丑。(1) `static_cast<NodeType*>`。(2)`TrafficLight`将其传递 `this`给`HasImportance`它的构造函数。这样， `HasImportance`根本不需要继承；它只存储一个指向 (ahem) 本身的指针，模板参数提供指针的类型。(3) 制作`Node`一个类模板，如下所示：

```
template<class NodeType>
class Node {
public:
   list<NodeType*> neighbors() { /* ... */ }
}

class TrafficLight : public HasImportance<Node<TrafficLight>> { /* ... */ } 
```

编译后并没有引入 的无偿副本`this`，但似乎……有点太好奇了。

这里有代码气味吗？我应该以完全不同的方式处理这些图表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:32:54.383

(3) 但有点不同。

```
template <class NodeType>
class Node { ... };

template<class NodeType>
class HasImportance : public virtual Node<NodeType> { ... };

class TrafficLight : public HasImportance<TrafficLight> { ... }; 
```

对我来说看起来很简单，并不比 CRTP 本身更好奇。

# c++ - 查看分步执行

> ID：11311225
> 
> 赞同：0
> 
> 时间：2012-07-03T12:46:21.193
> 
> 标签：c++, backtracking

我有一个 c++ 代码，我不太了解它。我是 C++ 初学者，我想知道它是否存在诸如程序或调试器之类的东西，我不知道它会读取代码并解释它。IE：

```
for (i=0; i<n; i++) (let's assume n = 3) the program start and replace
i=0; i<3; i++
i=1; i<3; i++
etc. 
```

基本上，它会向我展示程序中逐步发生的事情以及它是如何使用变量的。谢谢（我需要这个才能理解回溯）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T12:49:26.647

我认为[GDB](https://en.wikipedia.org/wiki/Gdb)可以做这样的事情。
应该有很多关于如何使用它的教程。

或者您可以使用像 Netbeans 或 Eclipse 这样的 IDE，它们都有 C++ 的逐步调试器

# java - 如何让 JDBC 工作？

> ID：11311227
> 
> 赞同：1
> 
> 时间：2012-07-03T12:46:25.923
> 
> 标签：java, mysql, jdbc

由于我根本没有发现我的具体问题，我想这是一个简单的问题，但我仍然无法弄清楚。我通过 j/connector 为 java 和 mysql 之间的连接准备了一切，就像[教程](http://docs.oracle.com/javase/tutorial/jdbc/basics/gettingstarted.html)中所述，但是

```
ant create-mysql-database 
```

失败了

```
BUILD FAILED 
/home/zynic/Documents/java/JDBCTutorial/build.xml:73: Class Not Found: JDBC driver 
com.mysql.jdbc.Driver could not be loaded 
```

我不知道为什么。我按照教程的建议设置了所有变量，如下所示，但仍然无法按预期工作。

*我缺少什么（简单？）点？*

编辑：
总结第一条评论，我正在使用 Sabayon/Gentoo 在我自己的机器上工作，并且 build.xml 也被正确编辑。

mysql 样本属性：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
<entry key="dbms">mysql</entry>
<entry key="jar_file">/home/zynic/Documents/java//JDBCTutorial.jar</entry>
<entry key="driver">com.mysql.jdbc.Driver</entry> 
<entry key="database_name">testdb</entry> 
<entry key="user_name">root</entry> 
<entry key="password">root</entry> 
<entry key="server_name">localhost</entry> 
<entry key="port_number">3306</entry>
</properties> 
```

mysql 构建属性：

```
<?xml version="1.0" encoding="UTF-8" ?>
<project name="MySQL Properties" default="all" basedir=".">

<property name="JAVAC" value="/var/db/pkg/oracle-jdk-1.7.0.3/bin/javac"/>
<property name="JAVA" value="/var/db/pkg/oracle-jdk-1.7.0.3/bin/java"/>

<property name="PROPERTIESFILE" value="properties/mysql-sample-properties.xml"/>
<property name="MYSQLDRIVER" value="/var/db/pkg/jdbc-mysql-5.1.18/mysql-connector-java-5.1.15-bin.jar"/>

<path id="CLASSPATH">
<pathelement location="classes"/>
<pathelement location="${MYSQLDRIVER}"/>
<pathelement location="lib/JDBCTutorial.jar"/>
</path>

<property name="XALAN" value="/usr/share/xalan/lib/xalan.jar"/>

<property name="DB.VENDOR" value="mysql"/>
<property name="DB.DRIVER" value="com.mysql.jdbc.Driver"/>
<property name="DB.HOST" value="localhost"/>
<property name="DB.PORT" value="3306"/>
<property name="DB.SID" value="testdb"/>
<property name="DB.URL.NEWDATABASE" value="jdbc:mysql://${DB.HOST}:${DB.PORT}/?allowMultiQueries=true"/>
<property name="DB.URL" value="jdbc:mysql://${DB.HOST}:${DB.PORT}/${DB.SID}?allowMultiQueries=true"/>
<property name="DB.USER" value="root"/>
<property name="DB.PASSWORD" value="root"/>
<property name="DB.DELIMITER" value=";"/>

</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:04:36.887

你确定你下载了本教程的 mysql 连接器/j 驱动程序吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T19:51:40.337

我猜测：

```
<property name="MYSQLDRIVER" value="/var/db/pkg/jdbc-mysql-5.1.18/mysql-connector-java-5.1.15-bin.jar"/> 
```

注 5.1。**18**在目录名称和 5.1\. **15**在罐子名称中。

# objective-c - 移动到另一个视图时标签栏控制器消失（iOS SDK，使用情节提要）

> ID：11311228
> 
> 赞同：9
> 
> 时间：2012-07-03T12:46:28.533
> 
> 标签：objective-c, ios, uitabbarcontroller, storyboard, uitabbar

我正在使用情节提要构建 iPhone 应用程序，但标签栏控制器有问题。在从选项卡栏控制器 (view1) 链接的其中一个视图上，有一个按钮可以通向另一个视图 (view2)。在 View2 上，有一个返回 View1 的按钮。非常直截了当。但是当我从view1转到view2时，标签栏消失了，更糟糕的是，当我回到View1时，标签栏仍然消失了......我该如何解决这个问题？（我还没有在应用程序中添加任何代码，只有故事板和苹果提供的 AppDelegate 类（我想还有一个主文件，但我不打算触摸它）。

任何回复都非常感谢！

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-03T14:10:12.123

如果您从作为选项卡栏视图的视图执行模态转场，它将摆脱您正在呈现的模态视图的选项卡栏。

其次，当你 segue 时，你正在创建视图控制器的一个新实例。所以我猜你是从 view1 到 view2 并丢失了标签栏，然后你又回到 view1。此时，您已经创建了 view1、view2 和没有标签栏的 view1 的第二个副本。

我会建议两件事之一。

1.) 如果您想在从 view1 切换到 view2 时将选项卡保留在底部，请单击 view1，在屏幕顶部选择编辑器/嵌入/导航控制器。这会将您的 view1 嵌入到导航控制器中。然后，如果您将 segue 从 Modal 更改为 Push，它将使您的标签栏保持在底部。顶部的导航栏还可以轻松地以正确的方式（通过弹出视图）从视图 2 返回到视图 1，而不是创建新的转场。如果您不喜欢导航栏，则可以在检查器中将“Top Bar”属性更改为“None”。然后，您将需要在 view2 中创建一些其他方式以返回 view1。（通过弹出控制器，而不是通过SEGUEING）

2）如果您不想设置导航控制器，则将标签栏的内容保持在 view2 控制器的底部会有点困难。实际上，我不确定您是否可以使用模态转场来做到这一点，您可能必须编写某种类型的自定义转场。无论哪种方式，如果您想转换回 view1 并获得正确的控制器（不是没有选项卡的新版本），那么您需要将一个操作附加到您正在使用的任何按钮上，并使用以下代码（我还附加了导航控制器推送序列的代码，以防您创建导航控制器并摆脱导航栏。）

对于模态搜索：

```
[self dismissModalViewControllerAnimated:YES]; 
```

对于 Push segue：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

您最好的选择是使用导航控制器方法，因为您可以确保密切关注。然后，您可以使用导航栏返回（简单的方法，不需要代码），或者您可以摆脱它并使用按钮和上面的代码。

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-24T22:40:55.123

我有同样的问题，我知道这是一个老问题，但`[self dismissModalViewControllerAnimated:YES];`在 iOS 6 中已弃用。

我用的是：

`[self dismissViewControllerAnimated:YES completion:nil];`

# javascript - CSS3 过渡淡出显示属性

> ID：11311231
> 
> 赞同：1
> 
> 时间：2012-07-03T12:46:41.477
> 
> 标签：javascript, css, css-transitions

我试图用 css3 进行淡出转换，但发现显示不适用于转换。

我有一个`<div id=groupID>`带有`<h2>`标题的组对象，`<div class='group'>`并且我有绑定到该对象的 onclick 事件`<h2>`应该使组类消失。我试图用这个来克服显示问题，因为它与BUT`{opacity: 0; height: 0; overflow: hidden;}`具有相同的效果，所以效果很好`{display:none}`

CSS

```
transition: all 2s ;
-webkit-transition: height 2s ease-out;
transition: opacity 2s ease-out ;
display: block;
-webkit-transition: opacity 2s ease-out; 
```

JS

```
//collapse function
block.setStyle({opacity: 0});
block.setStyle({height: 0});

//expand function
block.setStyle({opacity: 1});
block.setStyle({height: 'auto'}); 
```

它在关闭时不会做任何动画，但在重新出现时会淡入淡出。它只是瞬间消失。

是的，我在 CSS3 中需要它。不，我不能使用 jQuery

任何想法？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T13:18:39.230

不要尝试[和从`auto`](https://stackoverflow.com/a/3512194/8655). 它行不通。

您可以使用 JavaScript 计算元素的高度（以像素为单位）并在`block.setStyle()`调用中使用它。

# java - Java编译器不会自动优化字符串连接？

> ID：11311234
> 
> 赞同：3
> 
> 时间：2012-07-03T12:46:45.267
> 
> 标签：java, performance, optimization, jsoup, stringbuilder

以下[Jsoup](http://jsoup.org/apidocs/org/jsoup/nodes/Element.html#text%28%29)代码连接容器中所有元素的文本`els`：

```
for (Element el : els)
  entireText += el.text(); 
```

在具有约 64 个元素的容器上，每个元素包含约 1KB（整个文本总计约 64KB），这个简单的循环在典型的低端 Android 手机上大约需要**8 秒。**

这种缓慢的性能让我感到惊讶，因为我的印象是 Java 编译器会替换诸如`A + B + C`with之类的表达式`new StringBuilder(A).append(B).append(C).toString()`。

不是这样吗？

我错过了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-03T12:49:54.683

> 这种缓慢的性能让我感到惊讶，因为我的印象是 Java 编译器用 new StringBuilder(A).append(B).append(C).toString() 替换了像 A + B + C 这样的表达式。

所以编译器创建了代码：

```
for (Element el : els)
  entireText = new StringBuilder(entireText).append(el.text()).toString(); 
```

您将需要在循环外创建 StringBuilder 并手动附加到它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T12:52:49.190

这里的问题是您的第一次迭代创建了一个 1k 字符串，第二次创建了一个 2k 字符串，第三次创建了一个 3k 字符串，...

每个字符串都需要创建前一个字符串的副本。所以你的第一次迭代复制 1k 文本，第二次复制 2k，第三次复制 3k，...

所以每次迭代都比前一次慢，最后一次迭代分配一个 64k 缓冲区并复制 64k。

使用 a `StringBuilder`（如@mlk 所示）意味着您几乎只分配一次 64k（不完全，但足够接近）并且总共只复制 64k 数据（而不是 64k+63k+62k+61k+60k+...）。

# mysql - blob 列上的慢查询分组

> ID：11311235
> 
> 赞同：1
> 
> 时间：2012-07-03T12:46:52.810
> 
> 标签：mysql, sql, indexing, query-optimization, explain

我正在使用以下查询从`mediumblob`列中提取频繁的短值：

```
select bytes, count(*) as n
from pr_value
where bytes is not null && length(bytes)<11 and variable_id=5783
group by bytes order by n desc limit 10; 
```

我遇到的问题是这个查询花费了太多时间（大约 10 秒，少于 100 万条记录）：

```
mysql> select bytes, count(*) as n from pr_value where bytes is not null && length(bytes)<11 and variable_id=5783 group by bytes order by n desc limit 10;
+-------+----+
| bytes | n  |
+-------+----+
| 32    | 21 |
| 27    | 20 |
| 52    | 20 |
| 23    | 19 |
| 25    | 19 |
| 26    | 19 |
| 28    | 19 |
| 29    | 19 |
| 30    | 19 |
| 31    | 19 |
+-------+----+ 
```

该表如下（未显示不相关的列）：

```
mysql> describe pr_value;
+-------------+---------------+------+-----+---------+-------+
| Field       | Type          | Null | Key | Default | Extra |
+-------------+---------------+------+-----+---------+-------+
| product_id  | int(11)       | NO   | PRI | NULL    |       |
| variable_id | int(11)       | NO   | PRI | NULL    |       |
| author_id   | int(11)       | NO   | PRI | NULL    |       |
| bytes       | mediumblob    | YES  | MUL | NULL    |       |
+-------------+---------------+------+-----+---------+-------+ 
```

类型是 mediumblob，因为大多数值都很大。少于 10% 的内容与我在此特定查询中查找的内容一样短。

我有以下索引：

```
mysql> show index from pr_value;
+----------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
| Table    | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment | Index_comment |
+----------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
| pr_value |          0 | PRIMARY  |            1 | product_id  | A         |        8961 |     NULL | NULL   |      | BTREE      |         |               |
| pr_value |          0 | PRIMARY  |            2 | variable_id | A         |      842402 |     NULL | NULL   |      | BTREE      |         |               |
| pr_value |          0 | PRIMARY  |            3 | author_id   | A         |      842402 |     NULL | NULL   |      | BTREE      |         |               |
| pr_value |          1 | bytes    |            1 | bytes       | A         |      842402 |       10 | NULL   | YES  | BTREE      |         |               |
| pr_value |          1 | bytes    |            2 | variable_id | A         |      842402 |     NULL | NULL   |      | BTREE      |         |               |
+----------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+ 
```

MySQL这样解释我的查询：

```
mysql> explain select bytes, count(*) as n from pr_value where bytes is not null && length(bytes)<11 and variable_id=5783 group by bytes order by n desc limit 10; 
+----+-------------+----------+-------+---------------+-------+---------+------+--------+----------------------------------------------+
| id | select_type | table    | type  | possible_keys | key   | key_len | ref  | rows   | Extra                                        |
+----+-------------+----------+-------+---------------+-------+---------+------+--------+----------------------------------------------+
|  1 | SIMPLE      | pr_value | range | bytes         | bytes | 13      | NULL | 421201 | Using where; Using temporary; Using filesort |
+----+-------------+----------+-------+---------------+-------+---------+------+--------+----------------------------------------------+ 
```

请注意，可以在不更改持续时间的情况下删除有关字节列长度的条件。

我该怎么做才能使这个查询快速？

当然，我宁愿不必添加列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:17:46.017

您对 (bytes, variable_id) 的索引不是很聪明。如果您的查询中总是有一个 variable_id 子句，您应该首先添加带有 variable_id 的索引：

`(variable_id, bytes)`

这取决于 variable_id 的判别性。但这很有帮助。

另一个提示是添加一个新的索引列，其结果为 "length(bytes)<11" ：

```
update pr_value set small = length(bytes)<11; 
```

添加一个带有 (small,variable_id) 的新索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T13:10:54.343

为什么要对 blob 列进行 GROUP BY？我想这是瓶颈，因为查询实际上会与所有 blob 列进行比较。是因为您想要 BLOB 的唯一值吗？我认为 DISTINCT 关键字可能比 GROUP BY 执行得更好。

# javascript - 从javascript中提取文本

> ID：11311237
> 
> 赞同：0
> 
> 时间：2012-07-03T12:47:01.593
> 
> 标签：javascript, iphone, objective-c, ios

当我使用 NSURLconnection 发送请求时返回的数据包含这样的脚本

```
<script>
var baseURL = "main.aspx?";
var lang = 1;
lg(0,8375,"AFC U-22 Championship Qualifirs","http://images.goalzz.com/i.aspx?i=competitions%2fafc_small_icon.gif");
mc(0,752017,1,"","11:45®<br><nobr>&nbsp;<font color=yellow>playing",1298,"","Malaysia","","",2163,"","Myanmar","","<font color=#427384>Week: 5<br>","",0);
mc(0,752021,2,"","12:00®<br><nobr>&nbsp;<font color=yellow>playing",7849,"","Laos","","",2158,"","Cambodia","","<font color=#427384>Week: 5<br>","",0);
mc(0,752022,3,"","12:00®<br><nobr>&nbsp;<font color=yellow>playing",479,"","Bahrain","","",1574,"","Iran","","<font color=#427384>Week: 5<br>","",0);
lg(6,8048,"Wimbledon - Men","http://images.goalzz.com/i.aspx?i=tennis%2ftennis_small.gif");
mc(6,754074,4,"","10:30®<br><nobr><font color=yellow>2nd Set",274,"","Brian Baker  - <font size=-1 color=black>United States</font>","","<font color=blue>1&nbsp;:&nbsp;1</font>",110,"","<font size=-1 color=orange>(27) </font>Philipp Kohlschreiber  - <font size=-1 color=black>Germany</font>","","<font color=red>Round 4<br>","",0);
mc(6,754076,5,"","10:30®<br><nobr><font color=yellow>2nd Set",342,"","<font size=-1 color=orange>(5) </font>Jo-Wilfried Tsonga  - <font size=-1 color=black>France</font>","","<font color=blue>0&nbsp;:&nbsp;1</font>",282,"","<font size=-1 color=orange>(10) </font>Mardy Fish  - <font size=-1 color=black>United States</font>","","<font color=red>Round 4<br>","",0);
mc(6,753844,6,"","10:30®<br><nobr><font color=yellow>3rd Set",5,"","<font size=-1 color=orange>(18) </font>Richard Gasquet  - <font size=-1 color=black>France</font>","","<font color=blue>1&nbsp;:&nbsp;2</font>",86,"","<font size=-1 color=orange>(31) </font>Florian Mayer  - <font size=-1 color=black>Germany</font>","","<font color=red>Round 4<br>","",0);
mc(6,754075,7,"","11:00®<br><nobr><font color=yellow>2nd Set",107,"","<font size=-1 color=orange>(7) </font>David Ferrer  - <font size=-1 color=black>Spain</font>","","<font color=blue>1&nbsp;:&nbsp;1</font>",669,"","<font size=-1 color=orange>(9) </font>Juan Martin Del Potro  - <font size=-1 color=black>Argentina</font>","","<font color=red>Round 4<br>","",0);
mc(6,754092,8,"","11:00®<br><nobr><font color=yellow>3rd Set",675,"","<font size=-1 color=orange>(16) </font>Marin Cilic  - <font size=-1 color=black>Croatia</font>","","<font color=blue>0&nbsp;:&nbsp;2</font>",16,"","<font size=-1 color=orange>(4) </font>Andy Murray  - <font size=-1 color=black>United Kingdom</font>","","<font color=red>Round 4<br>","",0);
</script> 
```

我想在 lg 节点中提取 (AFC U-22 Championship Qualifirs) 文本，在 mc 节点中提取 (Malaysia,Myanmar) 文本。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:51:46.747

您将不得不进行一些字符串操作和搜索

例如，您可以搜索 Champion (Championship Qualifirs",") 和第一次出现的 ") 之间的字符串；

对于马来西亚和缅甸使用类似的搜索方法，没有可以解析这种字符串的内置函数

如果您可以控制此请求，请考虑使用 JSON 或 XML 作为远程数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:15:04.480

您需要在此进行字符串搜索。此[链接](http://www.techotopia.com/index.php/Working_with_String_Objects_in_Objective-C)将帮助您实现此目的。您可以按照以下步骤操作。

1.  在您从连接收到的文本数据中搜索“lg(”。
2.  然后搜索逗号“，”的第二次出现并从下一个位置提取所有字符，直到它没有得到双引号“””。
3.  然后移动您的索引并在文本中搜索“mc(”。
4.  现在搜索逗号“，”的第 7 次出现并从下一个位置提取所有字符，直到它没有得到双引号“””。

现在你可以得到两个字符串。

祝你好运

# iphone - 应用程序在后台时的点击计数

> ID：11311239
> 
> 赞同：-1
> 
> 时间：2012-07-03T12:47:03.980
> 
> 标签：iphone, ios, gesture, taps

当应用程序处于后台模式时，是否可以计算 Taps 的数量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T12:51:15.557

不，这是不可能的，因为水龙头是由`UIResponder`班级处理的。它是 的超类`UIApplication`及其`UIView`子类（包括`UIWindow`），因此无法“全局”计算点击次数 - 您只能为您的应用程序执行此操作，当它处于活动状态时..

# excel - 如何显示客户在特定时间段内的订单频率。

> ID：11311241
> 
> 赞同：0
> 
> 时间：2012-07-03T12:47:12.287
> 
> 标签：excel, tsql, excel-formula

我有一个电子邮件地址和订购日期的列表。我试图弄清楚如何显示每周、每月两次、每月一次、每 2 个月一次、每 3 个月一次、每 4 个月一次以及每 5 个月或更长时间一次订购的客户数量。

实现这一目标的最佳方法是什么？我有 40 万条记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:17:32.550

我建议使用按电子地址计算日期的数据透视表。假设 12 个月的数据 Count of date = 6 是每 2 个月一次（平均！）=12 是每月一次。这不涉及在一年的最后一个月订购 4 次的电子地址，但我不确定这是您的要求，因为如果在一年的最后一天订购，频率可能是您的任何选择。

# javascript - 可以根据父 div 的类对渲染图像进行排序吗？

> ID：11311242
> 
> 赞同：1
> 
> 时间：2012-07-03T12:47:13.277
> 
> 标签：javascript, jquery

我有一些包装在这样的容器中的图像：

```
<div id="swatchcontainer">
    <div class="swatchimgouter">
        <div class="swatchimginner">
            <img src="whatever1.jpg" alt="some text" title="some text too"/>
        </div>
    </div>

    <div class="swatchimgouter">
        <div class="swatchimginner swatchdisabled">
            <img src="whatever2.jpg" alt="some text" title="some text too"/>
        </div>
    </div>

    <div class="swatchimgouter">
        <div class="swatchimginner">
            <img src="whatever3.jpg" alt="some text" title="some text too"/>
        </div>
    </div>

    etc., etc.

</div> 
```

这不是关键任务，但我开始认为使用 JQuery 可能很容易对这些图像进行排序。我想将所有包装在“swatchdisabled”类中的图像放在最后。

可能有几十个这样的图像。它们都带有样式，`float:left`因此它们水平显示在行中。即使有几十个，也只有 2 行。这些图像中的每一个都是 30 像素 x 30 像素。

这只是一个 UI 考虑因素。通过将所有禁用的图像放在最后，可以更轻松地跟踪哪些项目被禁用以及哪些项目被启用。

如果这样做相当简单，我还需要保留他们的内部 div 类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T12:52:54.633

试试这样：

```
$('.swatchdisabled').each(function(){
     $(this).parent().parent().append( $(this).parent() );
}); 
```

这会将所有在 div`.swatchimgouter`上具有`.swatchdisabled`类的`.swatchimginner`div 移动到其父级的末尾。

演示在[**这里**](http://jsfiddle.net/5TLpR/1/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T13:14:12.970

一个不依赖于您在评论中提到的容器 div 的版本，它只适用于您问题中的给定 div：

```
$(".swatchimgouter").last().after("<div id='wall'></div>")
$(".swatchdisabled").each(function(){
    $("#wall").after($(this).parent());
});
$("#wall").remove(); 
```

你可以挤出更多的果汁，但你明白了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T12:51:06.717

```
$('.swatchdisabled').each(function() {
     $(this).closest('.swatchimgouter').appendTo($('#parentdiv'));
}); 
```

或者

```
$('.swatchdisabled').each(function() {
     $(this).parent().appendTo($('#parentdiv'));
}); 
```

`#parentid`所有包装 div 的共同父级在哪里

# java - 如何调用抽象类方法？

> ID：11311244
> 
> 赞同：0
> 
> 时间：2012-07-03T02:31:43.423
> 
> 标签：java, r, rjava

我正在尝试创建一个利用我的 JAVA 代码的 R 函数。

我有一个抽象类，比方说`StudentGroup`，它有抽象方法，一个方法`getAppropriateStudentGroup()`返回（基于配置）一个扩展类`StudentGroup`。这允许调用类的行为相同，而不管哪个`StudentGroups`实际上是合适的。

1.  如何使用 rJava 调用`getAppropriateStudentGroup()`？
2.  如何调用返回类的方法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:38:58.077

除非您首先拥有一个实例，否则 Java 不会让您调用实例方法。自然，您不能实例化抽象类，因此，据我所知，您必须声明`getAppropriateStudentGroup()`static 并像这样调用它：`StudentGroup.getAppropriateStudentGroup()`.

我假设您实际上传递了一些参数，`getAppropriateStudentGroup()`否则您将始终得到相同的结果。

选项 B，我误解了你，而且你确实*有*一些扩展抽象类 StudentGroup 的实例，在这种情况下，你应该能够毫无问题地在对象上调用该方法。

我认为您的问题或我的回答有些混乱，请回信；）

# c# - 将 Java Triple DES 结果与 C# one 匹配

> ID：11311247
> 
> 赞同：2
> 
> 时间：2012-07-03T12:47:22.510
> 
> 标签：c#, java, encryption, groovy, 3des

我有以下三重 DES 的 C# 实现

```
byte[] bKey = HexToBytes("C67DDB0CE47D27FAF6F32ECA5C99E8AF");
byte[] bMsg = HexToBytes("ff00");
byte[] iv = { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };
DESCryptoServiceProvider des = new DESCryptoServiceProvider();
des.Padding = PaddingMode.Zeros;
des.Mode = CipherMode.CBC;
byte[] bK1 = new byte[8];
for (int i = 0; i < 8; i++) bK1[i] = bKey[i];
byte[] bK2 = new byte[8];
for (int i = 0; i < 8; i++) bK2[i] = bKey[i + 8];
ICryptoTransform ict1 = des.CreateEncryptor(bK1, iv);
byte[] bFt = ict1.TransformFinalBlock(bMsg, 0, bMsg.Length);
byte[] bLCb = new byte[8];
for (int i = 0; i < 8; i++) bLCb[i] = bFt[i + bFt.Length - 8];
des.Mode = CipherMode.ECB;
ICryptoTransform ict1_5 = des.CreateDecryptor(bK2, iv);
bLCb = ict1_5.TransformFinalBlock(bLCb, 0, bLCb.Length);
ICryptoTransform ict2 = des.CreateEncryptor(bK1, iv);
byte[] bMac = ict2.TransformFinalBlock(bLCb, 0, bLCb.Length);

ToHex(bMac); // outputs: 4BC0479D7889CF8E 
```

我需要在 Java/Groovy 中产生相同的结果，我显然陷入了困境。我现在的代码如下：

```
byte[] bKey = Hex.decode("C67DDB0CE47D27FAF6F32ECA5C99E8AF")
byte[] bMsg = Hex.decode("ff00")

byte[] keyBytes = Arrays.copyOf(sKey.bytes, 24)
int j = 0, k = 16
while (j < 8) {
    keyBytes[k++] = keyBytes[j++]
}

SecretKey key3 = new SecretKeySpec(keyBytes, "DESede")
IvParameterSpec iv3 = new IvParameterSpec(new byte[8])
Cipher cipher3 = Cipher.getInstance("DESede/CBC/PKCS5Padding")
cipher3.init(Cipher.ENCRYPT_MODE, key3, iv3)

byte[] bMac = cipher3.doFinal(bMsg)
println new String(Hex.encode(bMac)) 
```

这一个输出：`ef2c57c3fa18d0a5`

`Hex.decode()`这是充气城堡

我还尝试通过在最后一轮使用 DES/CBC 和 EBC 在 Java 中重现相同的 C# 代码，这给了我什至不同的结果：`48f63c809c38e1eb`

如果有人能给我暗示我可能做错了什么，那就太好了

**更新：**

感谢大家的帮助！无需太多调整即可按需工作的最终代码：

```
Security.addProvider(new BouncyCastleProvider())
byte[] bKey = Hex.decode("C67DDB0CE47D27FAF6F32ECA5C99E8AF")
byte[] bMsg = Hex.decode("ff00")

byte[] keyBytes = Arrays.copyOf(sKey.bytes, 24)
int j = 0, k = 16
while (j < 8) {
    keyBytes[k++] = keyBytes[j++]
}

SecretKey key3 = new SecretKeySpec(keyBytes, "DESede")
IvParameterSpec iv3 = new IvParameterSpec(new byte[8])
Cipher cipher3 = Cipher.getInstance("DESede/CBC/ZeroBytePadding")
cipher3.init(Cipher.ENCRYPT_MODE, key3, iv3)

byte[] bMac = cipher3.doFinal(bMsg)
println new String(Hex.encode(bMac)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T16:19:45.003

您正在使用一些非标准的填充和块链接。你将无法使用`DESede`. 请尝试`DES`：

```
import javax.crypto.*
import javax.crypto.spec.*

def key1 = new SecretKeySpec("C67DDB0CE47D27FA".decodeHex(), "DES")
def key2 = new SecretKeySpec("F6F32ECA5C99E8AF".decodeHex(), "DES")
def plaintext = ("ff00" + "000000000000").decodeHex() // manually zero pad

def c1 = Cipher.getInstance("DES/CBC/NoPadding")
c1.init(Cipher.ENCRYPT_MODE, key1, new IvParameterSpec(new byte[8]))
def cipherText1 = c1.doFinal(plaintext) 

def c2 = Cipher.getInstance("DES/CBC/NoPadding")
c2.init(Cipher.DECRYPT_MODE, key2, new IvParameterSpec(new byte[8]))
def cipherText2 = c2.doFinal(cipherText1)

def c3 = Cipher.getInstance("DES/ECB/NoPadding")
c3.init(Cipher.ENCRYPT_MODE, key1)
def cipherText3 = c3.doFinal(cipherText2)

assert cipherText3.encodeHex().toString() == "4bc0479d7889cf8e" 
```

# java - 如何处理一个 API 的两个版本

> ID：11311252
> 
> 赞同：3
> 
> 时间：2012-07-03T12:47:45.257
> 
> 标签：java, api

**我的问题：**处理两个不同版本的 API 的好方法是什么？（*子问题：*如果包含两个具有相同类名的库，有什么方法可以避免类路径引用问题？）

**问题描述：**我有一个使用 API 的项目。在过去的几个月里，我一直在为旧版本进行开发，并且即将为新版本添加功能。据我所知，只有一个关键区别。但是，我还没有 API（等待有人给我拿罐子），所以我不能确定是否还有更多差异。

**子问题描述：**我担心这两个 API 之间可能存在类引用不一致（就像我说的，我还没有确定的 jar）。

我知道您可能希望查看一些代码，但这是一个*设计*问题，而不是*编码问题。*我希望从中获得一些*最佳实践*。谢谢！

**不是重复的：**我[查看](https://stackoverflow.com/questions/286826/how-to-reference-two-versions-of-an-api)了[一些](https://stackoverflow.com/questions/225810/how-to-deal-with-multiple-versions-of-dependencies)可能看起来重复的问题，但它们并没有真正解决我的问题:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T12:53:22.623

避免，或遮荫。

如果您可以完全控制类路径，则可以使用排序：这是脆弱且不直观的。

如果你不这样做，你就会受到任何东西的摆布，因此会出现阴影，以及与之相关的头痛。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T13:00:07.593

您还可以使用类加载器隔离策略。例如，如果您处于容器环境（Java EE、OSGi）中，您可以将不同版本的库放在不同的类加载器上下文（即不同的 EJB jar 或不同的 Web 应用程序）中，它们不会相互干扰其他。

OSGi 可以做同样的事情。将库 A.1 和 A.2 部署到您的 OSGi 容器中，并将 project.uno（使用 A.1）和 project.dos（使用 A.2）部署到同一个 JVM 中，OSGi 容器处理类路径。

# sql - 'in' 子句在 oracle 中如何工作

> ID：11311266
> 
> 赞同：8
> 
> 时间：2012-07-03T12:48:22.043
> 
> 标签：sql, sql-server, oracle, oracle10g

```
select 'true' from dual where 1 not in (null,1); 
```

当我们执行这将不会产生任何结果

我的问题是：

上面的查询在逻辑上是否等价于

```
select 'true' from dual where 1 != null and 1 != 1; 
```

这不会像上面的语句一样产生任何结果

请澄清？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-03T13:00:21.103

正确（但请注意，这`IN`是一个运算符，而不是一个子句，它通常在 SQL 中像这样工作，不仅适用于 Oracle）。

```
where 1 not in (null,1) 
```

相当于：

```
where 1 != null and 1 != 1 
```

这实际上应该写成：

```
WHERE 1 NOT IN (NULL, 1) 
```

和

```
WHERE 1 <> NULL AND 1 <> 1 
```

这与以下内容相同：

```
WHERE (1 <> NULL) AND (1 <> 1) 
```

评估为：

```
WHERE UNKNOWN AND FALSE 
```

并进一步作为：

```
WHERE FALSE 
```

因此，它正确地不返回任何行。

* * *

请注意，如果您有`WHERE 1 NOT IN (NULL, 2)`，它将评估为`WHERE UNKNOWN`（作为练习留下）并且也不会返回任何行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T12:56:11.403

您的脚本与 NULL 值比较的问题。你应该使用

```
column is null and column = 1 
```

实际上 NULL 是一个未定义的值。任何与 NULL 的比较都不会给出 True 或 False，而是给出 NULL。甚至*NULL = NULL*

这就是为什么你的*1 not in (null,1)*不起作用的原因。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T12:51:44.103

是的，他们是。

```
select something from table where column not in (1,2,3); 
```

相当于

```
select something from table where column != 1 and column != 2 and column != 3; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T12:52:48.707

IN 语句是 OR 语句的集合，而 NOT IN 是 AND 语句的集合 - 但它也不等于。

所以 NOT IN 等价于：

```
1 <> NULL
AND 1 <> 1
AND ... 
```

而 IN 相当于：

```
1 = NULL
OR 1 = 1
OR ... 
```

请注意，由于 NULL 的古怪性质，在集合中包含 NULL 将不起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T12:53:11.490

是的。它是正确的。NULL 值也应该与 IS NULL 进行比较

# python - 如何使用动态数量的数据条目初始化表单集

> ID：11311267
> 
> 赞同：1
> 
> 时间：2012-07-03T12:48:22.207
> 
> 标签：python, django, dynamic, view, formset

**仅当我在运行我的代码之前知道数组中的元素数（此代码为 12）时，我才能够用**数组的元素填充我的表单集，该数组是实际数据，但是当我从数组中填充表单集时在运行我的代码之前不知道数组中的元素数量，它来自变量**count**。

我的看法是

```
def show_actuals(request):

Account_Number_in = request.session['account_number']
Year_in = request.session['year']
count = request.session['count']
actuals_data = request.session['actuals_to_show']
months = request.session['months']
show_actuals_formset = formset_factory(FetchActualsBox, extra=0)

formset = show_actuals_formset(initial=[{'Value': actuals_data[0]},
                    {'Value': actuals_data[1]},
                    {'Value': actuals_data[2]},
                    {'Value': actuals_data[3]},
                    {'Value': actuals_data[4]},
                    {'Value': actuals_data[5]},
                    {'Value': actuals_data[6]},
                    {'Value': actuals_data[7]},
                    {'Value': actuals_data[8]},
                    {'Value': actuals_data[9]},
                    {'Value': actuals_data[10]},
                    {'Value': actuals_data[11]},
                    ])

return render_to_response('ShowActualsData.html', {'formset' : formset , 'count' : count, 'actuals_data' : actuals_data , 'months' : months , 'Account_Number' : Account_Number_in , 'Year' : Year_in }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:06:12.090

您可以使用给定数量的项目迭代和创建列表。

示例代码：

```
def show_actuals(request):

    Account_Number_in = request.session['account_number']
    Year_in = request.session['year']
    count = request.session['count']
    actuals_data = request.session['actuals_to_show']
    months = request.session['months']
    show_actuals_formset = formset_factory(FetchActualsBox, extra=0)
    initial_list = []
    for data in actuals_data:
       initial_list.append({'value': data})
    formset = show_actuals_formset(initial=initial_list) 
```

# c# - 如何处理链接相同 2 个表的关联表

> ID：11311272
> 
> 赞同：2
> 
> 时间：2012-07-03T12:48:30.910
> 
> 标签：c#, entity-framework, entity-framework-4, ado.net, entity-framework-4.1

我正在使用`Entity Framework 4.3 code first`一个已经存在的数据库。

有一个`Users table`具有以下列：

```
- UserID (int)
- FirstName (string)
- Surname (string) 
```

我有一个名为`Impersonations`. Impersonations 表是一个用户表和同一个用户表之间的关联表。一个用户可以有一个用户列表。这是`Impersonations table`结构：

```
- ImpersonateID (int primary key)
- UserID (int FK to Users table's UserID column)
- ImpersonatedUserID (int FK to Users table's UserID column) 
```

我有一个带有我想映射到这些列的属性的 User 类：

```
public class User : IEntity
{
     public int Id { get; set; }
     public string FirstName { get; set; }
     public string LastName { get; set; }
     public string EmployeeNumber { get; set; }
     public virtual ICollection<User> ImpersonatedUsers { get; set; }
     public virtual ICollection<User> Users { get; set; }
} 
```

在我的数据库上下文类中，我有以下内容：

```
public DbSet<User> Users { get; set; }

protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
     modelBuilder.Configurations.Add(new UserConfiguration());
} 
```

用户配置：

```
class UserConfiguration : EntityTypeConfiguration<User>
{
     internal UserConfiguration()
     {
          this.Property(x => x.Id).HasColumnName("UserID");
          this.Property(x => x.LastName).HasColumnName("Surname");
          this.Property(x => x.EmployeeNumber).HasColumnName("StaffNumber");

          this.HasMany(i => i.Users)
               .WithMany(c => c.ImpersonatedUsers)
               .Map(mc =>
               {
                    mc.MapLeftKey("UserID");
                    mc.MapRightKey("ImpersonatedUserID");
                    mc.ToTable("Impersonations");
               });
     }
} 
```

我是否使用实体框架正确链接了它？如果我通过用户 ID，则需要返回标记为模拟用户的用户列表。我该怎么做？我有这个，但 User 和 ImpersonatedUsers 都是空的：

```
return DbContext.Users
     .Include("ImpersonatedUsers")
     .SingleOrDefault(x => x.Id == userId); 
```

假设我的用户表中有以下数据（id、名字、姓氏、员工编号）：

```
7 Craig Matthews 123456
8 Susan Renshaw 234567
9 Michelle du Toit 34567 
```

以及我的 Impersonations 表中的以下数据（模拟 id、用户 id、模拟用户 id）：

```
1 7 8
2 7 9 
```

因此，如果我传入 7 的用户 ID，那么它需要返回用户 Susan Renshaw 和 Michelle du Toit 的记录。

**如果您仍然感到困惑，只是为了清楚起见...**

我也有类似的情况。我有一个产品表和一个规格表。这 2 个由名为 ProductSpecifications 的关联表链接起来。我试图在这里实现相同的目标，但 2 个表将是用户表，关联表是模拟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:52:35.773

试着看看[这个](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application)关于继承的页面。你的解释不是很好，但我认为这就是你想要达到的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:41:31.817

您必须为 Impersonation 创建一个类并将其作为 DBSet 添加到 dbcontext。EF 可能会让您将 [Key] 属性与 [Column(Order = 0 or 1)] 一起放在外键字段上。

然后你可以延迟加载属性：

```
 public virtual List<Impersonation> UserImpersonations
    {
        get
        {
            if(_userImpersonations == null)
            {
            // Set _userImpersonations = 
            // lazy load using a linq to sql query where 
            // UserImpersonations.UserId = this.UserId
            }

            return __userImpersonations;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T13:07:52.760

如果我很好理解，我想我的想法是一样的：用户也是一个组，因此可以有成员。

这是我的代码的摘录：

```
public partial class User : AuthorizableBaseObject, IHasUID {
    public User() {
        Members = new List<User>();
    }

    public Guid UID { get; set; }
    public DateTime EmailValidationDate { get; set; }

    public String EMail { get; set; }

    //public Int64 Id { get; set; }
    public String Login { get; set; }
    public String Password { get; set; }
    public String Description { get; set; }
    public DateTime LastConnectionDate { get; set; }

    public Boolean CanConnect { get; set; }
    public Boolean IsDisabled { get; set; }

    public virtual List<User> Members { get; set; }
} 
```

具有以下配置：

```
public class UserConfiguration : EntityTypeConfiguration<VDE.User> {
    public UserConfiguration()
        : base() {
        ToTable("Users", "dbo");

        Property(u => u.EMail).IsRequired().HasColumnType("nvarchar").HasMaxLength(100);
        Property(u => u.Login).IsRequired().HasColumnType("nvarchar").HasMaxLength(20);
        Property(u => u.Password).IsRequired().HasColumnType("nvarchar").HasMaxLength(50);
        Property(u => u.Description).HasColumnType("nvarchar").HasMaxLength(200);
        Property(u => u.LastConnectionDate).HasColumnType("datetime2");

        HasMany(u => u.Members).WithMany().Map(m => m.MapLeftKey("UserId").MapRightKey("MemberId").ToTable("UserMembers"));
    }
} 
```

从这里获取组的成员很容易查询：

```
context.Users.Where(u => u.Id == someId).Select(u => u.Members).FirstOrDefault() 
```

这将给出一个 IEnumerable

# c# - 使用 Windows.Forms.WebBrowser 控件打印时页面被剪切

> ID：11311285
> 
> 赞同：1
> 
> 时间：2012-07-03T12:49:26.033
> 
> 标签：c#

WebBrowser 控件的打印功能有问题。

首先我加载我的页面，它呈现正确。然后我设置页眉/页脚/边距和正确的打印机： [webbrowser printing](https://stackoverflow.com/questions/1321265/webbrowser-printing)； [如何使用 WebBrowser 控件以编程方式更改打印机设置？](https://stackoverflow.com/questions/714507/how-do-i-programatically-change-printer-settings-with-the-webbrowser-control)

到目前为止有效。然后我用`myBrowser.Print();`

但是我的网站打印不正确。只打印左上角，几厘米，然后有滚动条。

我用 IE9 打印了我的网站，一切都很好。还尝试了不同的浏览器模式和文档模式。没问题。而且我认为控件和IE在技术上是相同的......

有没有我忘记的参数？

我要打印的网站很旧，没有文档类型。但由于控件显示正确，我希望它也能正确打印。

**编辑：**

发现它与网站上的 javascript 有关，它不能用于打印。有没有办法从被操纵的 DOM 中获取 HTML？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:45:00.070

对于打印功能，不处理外部文档。网站的所有文件都必须合并到一个可打印的网站中。要获取其他文档，您必须将 myBrowser.Document.DomDocument 转换为 IHTMLDocument2。从该 IHTMLDocument2 中，您可以提取 CSS 或 JS 以将其放入 html 中。

例如：

```
 void myBrowser_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
    {
        myBrowser.DocumentCompleted -= new WebBrowserDocumentCompletedEventHandler(myBrowser_DocumentCompleted);
        myBrowser.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(myBrowser_DocumentPrintable);
        String mySource = myBrowser.DocumentText;

        // Get the CSS
        IHTMLDocument2 doc = (myBrowser.Document.DomDocument) as IHTMLDocument2;
        myCSS = doc.styleSheets.item(0).cssText;
        mySource = mySource.Replace("<link rel=\"stylesheet\" type=\"text/css\" href=\"/css/style.css\">", "<style type=\"text/css\">"+myCSS+"</style>");

        // Reload
        myBrowser.DocumentText = mySource;
    }

    void myBrowser_DocumentPrintable(object sender, WebBrowserDocumentCompletedEventArgs e)
    {
        myBrowser.DocumentCompleted -= new WebBrowserDocumentCompletedEventHandler(myBrowser_DocumentPrintable);
        myBrowser.Print();
    } 
```

# scala - Scala "a" + _.toString 不像 "a".+(_.toString)

> ID：11311290
> 
> 赞同：4
> 
> 时间：2012-07-03T12:49:43.353
> 
> 标签：scala

据我所知，Scala 中的中缀运算符的使用应该等同于方法的调用。所以：

```
scala> "a" + 3.toString
res0: java.lang.String = a3 
```

是相同的：

```
scala> "a".+(3.toString) 
res1: java.lang.String = a3 
```

当有一个占位符时，我遇到了一个没有发生这种情况的场合。我正在做一些更复杂的事情，但可以提炼为：

```
scala> def x(f:(Int)=>String) = f(3)
x: (f: Int => String)String
scala> x("a" + _.toString)
res3: String = a3 
```

到现在为止还挺好。但...

```
scala> x("a".+(_.toString))
<console>:9: error: missing parameter type for expanded function ((x$1) => x$1.toString)
          x("a".+(_.toString)) 
```

这里有什么区别？我错过了什么？

霍尔迪

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-03T12:56:44.850

`_`占位符只能出现`Expr`在其功能的最顶部。这意味着

```
(_.toString) 
```

本身就是一个函数，`"a" + some function of unknown type`对编译器没有多大意义。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-03T15:15:37.350

您对中缀符号的评估是正确的，但您对占位符参数的理解是有缺陷的。

当您使用下划线作为占位符参数时，您正在创建一个函数。问题是该功能的*边界*是什么：它从哪里开始，在哪里结束？例如，考虑这个表达式：

```
_ + _ + _ 
```

应该怎么翻译？以下是一些替代方案：

```
(x, y, z) => { x + y + z }
(x, y) => { (z) => { x + y } + z }
(x) => { x + { (y, z) => y + z } } 
```

好吧，Scala 的规则是作用域是最里面的括号分隔的表达式，否则就是整个表达式。所以，在实践中，你写了两个不同的东西：

```
x("a" + _.toString) // is the same thing as
x((y) => "a" + y.toString)

x("a".+(_.toString)) // is the same thing as
x("a".+((y) => y.toString)) 
```

# javascript - 代码成倍增加，所有实例都在运行

> ID：11311293
> 
> 赞同：-3
> 
> 时间：2012-07-03T12:49:51.303
> 
> 标签：javascript, jquery

我的网站以某种方式工作，因此单击的任何链接都不会加载新页面，而是会触发 .load() 事件到名为“内容”的 div 中。

一切都很好，花花公子，但现在我遇到了一个小问题。

在其中一个内容页面上，我有以下代码：

```
 $('.count').each(function () {
        $this = $(this);
        countdown = setInterval(function(){
            countnow = parseInt($('.remain', $this).html());
            $('.remain', $this).html(countnow-1);
        }, 1000);
        return false;
    }); 
```

代码工作......它工作得很好。但是当我再次加载同一个页面时，代码似乎运行了两次，因为秒数一次减少了 2。然后当我再次加载它时，它一次下降 3 秒。另一个负载，它一次下降 4 秒。我又加载了几次，它下降得更快，然后我就可以阅读了。

我尝试给 .count div 赋予它们自己的唯一 id（.remain div 嵌套在 .count div 中），即使随后加载页面，id 仍然完全不同，这并没有解决我的问题。我还尝试将 clearInterval(countdown) 放在函数之前，但这只是让它完全停止工作。有什么建议么？

是的，我知道倒计时在达到 0 时不会停止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:55:08.540

试试这个：

```
var countdown;
$('.count').each(function () {
    $this = $(this);
    if (!countdown) 
        countdown = setInterval(function(){
            countnow = parseInt($('.remain', $this).html());
            $('.remain', $this).html(countnow-1);
        }, 1000);
    return false;
}); 
```

# c# - 在 Multiband Infragistics UltrawinGrid 中安排列时需要帮助

> ID：11311298
> 
> 赞同：1
> 
> 时间：2012-07-03T12:49:55.230
> 
> 标签：c#, infragistics, ultrawingrid

我有一个有 4 个波段的网格，并且 band[3] 中的列没有按照其父波段中的顺序排列。我的主要要求是安排 Band[3] 列。这是“导出到 Excel”代码的一部分。表格中已经显示了网格。我尝试了以下方法 -

```
 private UltraGrid rearrangeCol(UltraGrid grid)
    {
        int bandCount = grid.DisplayLayout.Bands.Count;
        int band = 0;
        List<String> colPos = new List<string>();
        for (int i = grid.DisplayLayout.Bands[band].Columns["EndurEndInv"].Index; i < grid.DisplayLayout.Bands[band].Columns.Count; i++)
        {
            colPos.Add(grid.DisplayLayout.Bands[band].Columns[i].Key);
        }
        band++;
        while (band < bandCount)
        {
            int initialColPos = grid.DisplayLayout.Bands[band].Columns["EndurEndInv"].Index;
            for (int i = initialColPos, j = 0; i < grid.DisplayLayout.Bands[band].Columns.Count && j < colPos.Count; i++, j++)
            {
                if(!grid.DisplayLayout.Bands[band].Columns[i].Key.Equals(colPos[j], StringComparison.InvariantCulture))
                {
                    grid.DisplayLayout.Bands[band].Override.AllowColSwapping = Infragistics.Win.UltraWinGrid.AllowColSwapping.WithinBand;
                    int xcngPos = grid.DisplayLayout.Bands[band].Columns[colPos[j]].Index;
                    grid.DisplayLayout.Bands[band].Columns.Insert(i, "Temp");
                    grid.DisplayLayout.Bands[band].Columns[xcngPos + 1].Swap(grid.DisplayLayout.Bands[band].Columns[i]);
                    grid.DisplayLayout.Bands[band].Columns.Remove("Temp");
                    grid.DisplayLayout.Bands[band].Override.AllowColSwapping = Infragistics.Win.UltraWinGrid.AllowColSwapping.Default;

                }
                else
                    continue;
            }
            band++;

        };
        return grid;
    } 
```

实际上，当我使用 SWAP 时，没有任何反应，键、索引保持不变。有没有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:26:32.930

是的，要重新排列到您需要处理的列的位置

```
grid.DisplayLayout.Bands[index].Columns[colName].Header.VisiblePosition = newPos; 
```

无需交换列位置，只需重新排列标题位置。

下面这段代码没有经过测试，我写作为例子

```
 private UltraGrid rearrangeCol(UltraGrid grid)
    {
        int bandCount = grid.DisplayLayout.Bands.Count;
        int band = 1;

        UltraGridBand b0 = grid.DisplayLayout.Bands[0];
        while (band < bandCount)
        {
            UltraGridBand b = grid.DisplayLayout.Bands[band]
            for (int i = b0.Columns["EndurEndInv"].Index; i < b0.Columns.Count; i++)
            {
                string colKey = b0.Columns[i].Key;
                if(b.Columns.Exists(colKey))
                    b.Columns[colKey].Header.VisiblePosition = 
                                   b0.Columns[colKey].Header.VisiblePosition;
            }
            band++;
        }
        return grid;
    } 
```

# php - 在 Qunit 测试中使用 Zend 局部视图助手

> ID：11311303
> 
> 赞同：2
> 
> 时间：2012-07-03T12:50:04.757
> 
> 标签：php, javascript, jquery, zend-framework, qunit

我对 Zend 和 QUnit 都很陌生，在设置我的 QUnit 测试来测试我的 JavaScript 时我有点卡住了。

我正在尝试测试一些 DOM 操作，并且我知道我必须将我正在测试的 html 放在我的 Qunit 测试文件中的 #qunit-fixture div 中。但是，我在我的 Zend 主应用程序中使用了一个局部视图助手（在我的视图脚本中工作正常），我只想回显它而不是重写助手本身中使用的 html（以避免重复）。我试图测试的 JavaScript 用于部分视图帮助程序，因此想要使用它。

这是我的应用程序的文件夹结构，仅包含重要文件和其他一些文件：

```
├── application
│   ├── Bootstrap.php
│   ├── configs
│   ├── controllers
│   ├── layouts
│   │   └── scripts
│   ├── models
│   ├── plugins
│   └── views
│       ├── helpers
│       └── scripts
│           ├── error
│           ├── index
│           └── partials
│               └── partialViewHelperIWantToUse.phtml
├── docs
├── features
├── Gemfile
├── Gemfile.lock
├── js-tests
│   ├── qunitTestFile.html
│   └── vendor
│       └── qunit
│           ├── qunit.css
│           └── qunit.js
├── library
│   ├── Custom
├── public
│   ├── css
│   ├── img
│   ├── index.php
│   └── js
│       ├── jquery
│       │   └── jquery-1.7.2.min.js
│       └── javaScriptIWantToTest.js
├── Rakefile
├── tasks
└── tests
    ├── application
    │   ├── controllers
    │   └── models
    ├── bootstrap.php
    ├── library
    │   └── Custom
    └── phpunit.xml 
```

我想在我的 qunitTestFile.html 中做这样的事情（在 js-tests 中找到）

```
<div id="qunit-fixture">
    <?php echo $view->partial('partialViewHelperIWantToUse.phtml') ?>
</div> 
```

但它目前不起作用。将 qunitTestFile 重命名为具有 .phtml 扩展名不会导致任何内容回显，但错误“调用非对象上的成员函数 partial()”出现在 apache 错误日志中（我预计会这样，但尝试起来很简单！）。我有一种预感，我可能需要创建另一个引导文件或其他东西，但是 Zend 和 Qunit 对我来说都是新的，所以我有点迷茫。=)

我希望这很清楚，并且我已经提供了足够的信息，但如果不是，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:12:32.490

由于我不完全知道您使用的是哪个 Zend 版本，因此我不确定这是否对您有帮助：

partial()-Function 是您视图的助手。由于在 Zend_View-Context 中调用了 View .phtml 文件（如果您使用 Controller-Action 来显示视图），您应该使用

```
$this->partial('...'); 
```

您可以为自己设置 Zend_View，但根据您的目录结构，我假设您使用 MVC 模式。

# c# - 使用 IEnumerables 序列化类 - 与 Enyim Memcached 一起使用

> ID：11311309
> 
> 赞同：4
> 
> 时间：2012-07-03T12:50:15.483
> 
> 标签：c#, serialization, memcached, enyim

我有一个看起来像的模型：

```
[Serializable]
public class TemplatePageModel
{
    public PageModel Page { get; set; }
    public SidebarModel Sidebar { get; set; }
}

[Serializable]
public class PageModel
{
    public IEnumerable<SectionModel> Section { get; set; }
}

[Serializable]
public class SidebarModel
{
    public IEnumerable<ControlModel> Control { get; set; }
}

[Serializable]
public class SectionModel
{
    public string Order { get; set; }

    public string Editable { get; set; }

    public string Column { get; set; }

    public string Text { get; set; }
} 
```

然后我尝试使用 EnyimMemcached 将其缓存在 memcached 中。

不会引发异常，但不会存储该项目。
我已经将此归结为我的 TemplatePageModel 类不可序列化的事实。

我用这个小片段测试了这个：

```
MemoryStream mem = new MemoryStream();
BinaryFormatter b = new BinaryFormatter();
try
{
    b.Serialize(mem, result);
}
catch (Exception ex)
{
    //EXCEPTION HERE
} 
```

它抱怨我的 IEnumerable 属性。

实际的错误信息是：

> 键入'System.Linq.Enumerable+WhereSelectEnumerableIterator`2[[System.Xml.Linq.XElement, System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089],[Desktop.Service.Model.ControlModel , Dekstop.Service, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]' 在程序集 'System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' 未标记为可序列化。

我怎样才能绕过这个？

我希望不必先序列化为 json，并在可能的情况下反序列化....

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T12:54:34.123

`BinaryFormatter`是一个字段级序列化器。它不会关心是否有东西`IEnumerable`等等。它只关心：“这里的***实际***对象是什么？我可以序列化它吗？”。例如，数组或列表通常是可序列化的。某些自定义延迟序列（可能是过滤的 LINQ 表达式）可能*无法*序列化。

也许是一个更简单的选择：不要尝试序列化复杂的表达式。所以而不是：

```
obj.Controls = someQuery.Where(x => whatever).OrderBy(x => x.Foo); 
```

做：

```
obj.Controls = someQuery.Where(x => whatever).OrderBy(x => x.Foo).ToArray(); 
```

数组（或列表）是简单且可序列化的。

# php - 忽略 Content-Type：CURL 中的应用程序/强制下载

> ID：11311310
> 
> 赞同：1
> 
> 时间：2012-07-03T12:50:16.437
> 
> 标签：php, file, curl, download

我需要读取文件的大小，但服务器强迫我先下载它。我注意到响应标头之一是 Content-Type: application/force-download ，这似乎绕过了我的 curl 输入...

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HEADER, 1);
curl_setopt($ch, CURLOPT_NOBODY, 1);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $post);
curl_setopt($ch,CURLOPT_TIMEOUT,1000);
curl_exec($ch);
$bytes = curl_getinfo($ch, CURLINFO_CONTENT_LENGTH_DOWNLOAD);
curl_close($ch); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:08:26.407

```
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $post); 
```

这两行重置`CURLOPT_NOBODY`。

`CURLOPT_NOBODY`将方法更改为 HEAD 并将`CURLOPT_POST`其更改为 POST。

来源： http: [//php.net/manual/en/function.curl-setopt.php](http://php.net/manual/en/function.curl-setopt.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:16:32.977

curl 符合 force-download 标头，但 file_get_contents 可用于将文件下载下载限制为仅 1 个字节。这解决了问题！

```
$postdata = http_build_query(
    array(
        'username' => "",
        'password' => ""
    )
);
$params = array(
    'http' => array
    (
      'method' => 'POST',
      'header'=>"Content-type: application/x-www-form-urlencoded\r\n",
      'content' => $postdata
    )
);
$ctx = stream_context_create($params);
file_get_contents($url,false,$ctx,0,1);
$size = str_replace("Content-Length: ","",$http_response_header[4]); 
```

# asterisk - 如何在星号中播放不同的保持音乐？

> ID：11311313
> 
> 赞同：2
> 
> 时间：2012-07-03T12:50:19.443
> 
> 标签：asterisk

我有两个 Asterisk 服务器 'A' 和 'B' 。在服务器“A”中，五个不同的 ivr（服务）正在播放，呼叫正在转发到服务器“B”。服务器“B”基本上用于代理登录（扩展）。我想根据服务器“A”中运行的相应服务播放不同的保持音乐（服务器“B”）。

单个座席从不同的不同服务接听电话，但默认情况下会播放保留音乐。

有什么方法可以在服务器 A 中运行的服务上播放不同的保持音乐基础。

我对 musiconhold.conf（服务器 B）进行了一些更改，但问题没有解决。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T09:47:48.687

`Set(CHANNEL(musicclass)=some_class_here)`在播放保留的音乐之前使用

# ftp - iptables nat FTP

> ID：11311316
> 
> 赞同：-2
> 
> 时间：2012-07-03T12:50:31.200
> 
> 标签：ftp, iptables, nat

我有电脑（ubuntu 服务器）。服务器有互联网并为本地网络共享互联网。本地网络中有一台计算机有 FTP。如何从 Internet 访问本地 FTP？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:02:13.567

一个值得一看的好网站：[使用 iptables 的 Linux 防火墙](http://www.linuxhomenetworking.com/wiki/index.php/Quick_HOWTO_%3a_Ch14_%3a_Linux_Firewalls_Using_iptables)

```
iptables -A PREROUTING -p tcp -i ppp0 --dport 21 -j DNAT --to 192.168.1.1:21
```

ppp0 = 接口万维网

192.168.1.1 = 在您的局域网中提供 FTP 的服务器

# sql-server - 我可以从子查询中获取逗号分隔值吗？如果没有，如何完成这项工作？

> ID：11311319
> 
> 赞同：4
> 
> 时间：2012-07-03T12:50:37.227
> 
> 标签：sql-server, tsql, correlated-subquery

我有一张桌子

```
Create table Country_State_Mapping
(
    Country nvarchar(max),
    State nvarchar(max)
) 
```

有 5 条记录。

```
Insert into Country_State_Mapping values('INDIA', 'Maharastra')
Insert into Country_State_Mapping values('INDIA', 'Bengal')
Insert into Country_State_Mapping values('INDIA', 'Karnatak')
Insert into Country_State_Mapping values('USA', 'Alaska')
Insert into Country_State_Mapping values('USA', 'California') 
```

我需要编写一个 SQL 查询，它将给我 2 条记录/2 列，如下所示。

第一列**Contry**和第二列**AllStates**

1 条记录（2 列）将是

印度和马哈拉施特拉邦、孟加拉邦、卡纳塔克邦

第二

美国和阿拉斯加，加利福尼亚

我试过我喜欢这个

```
select distinct
    OutTable.Country,
    (select State
     from Country_State_Mapping InnerTable
     where InnerTable.Country = OutTable.Country)
from Country_State_Mapping AS OutTable 
```

但没有工作...

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-03T13:01:21.057

```
SELECT Country, AllStates = 
    STUFF((SELECT ', ' + State
           FROM Country_State_Mapping b 
           WHERE b.Country = a.Country
           FOR XML PATH('')), 1, 2, '')
FROM Country_State_Mapping a
GROUP BY Country 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T13:21:31.967

如果 Country_State_Mapping 表中的记录数量很大，这会有点讨厌并且可能会很慢，但它确实可以完成工作。它使用 SQL 2005 中引入的公用表表达式的递归特性。

```
;WITH Base
AS
(
    SELECT 
        ROW_NUMBER() OVER (PARTITION BY Country ORDER BY Country, [State] DESC) AS CountryRowId,
        ROW_NUMBER() OVER (ORDER BY Country, [State]) AS RowId,
        Country,
        [State]
    FROM Country_State_Mapping
),
Recur
AS
(
    SELECT
        CountryRowId,
        RowId,
        Country,
        [State]
    FROM Base
    WHERE RowId = 1

    UNION ALL

    SELECT
        B.CountryRowId,
        B.RowId,
        B.Country,
        CASE WHEN R.Country <> B.Country THEN B.[State] ELSE R.[State] + ',' + B.[State] END
    FROM Recur R
    INNER JOIN Base B
        ON R.RowId + 1 = B.RowId
)

SELECT *
FROM Recur
WHERE CountryRowId = 1
OPTION (MAXRECURSION 0)--Dangerous 
```

# gdi - ActiveSkin GDI 泄漏

> ID：11311322
> 
> 赞同：1
> 
> 时间：2012-07-03T12:50:48.177
> 
> 标签：gdi, memory-leaks, skin

[ActiveSkin](http://www.softshape.com/)用于我们应用程序的所有形式，最初是在 VB6 中开发的，后来迁移到 VB.NET 中。这个非托管代码包装到 Interop 中，并在我们的 SkinForm 类中声明，它被我们应用程序中的所有表单继承。

现在我们在类的 OnFormClosing 方法中有以下代码：

```
MyBase.OnFormClosing(e)
If Not ActiveSkin Is Nothing AndAlso Me.Controls.Contains(ActiveSkin) Then
    Me.Controls.Remove(ActiveSkin)
End If
ActiveSkin = Nothing 
```

其中 ActiveSkin - 它是 ActiveSkin 库中 SkinForm 类的包装器。

GDI 泄漏发生在每个窗体关闭后。

如果我们添加以下代码：

```
ActiveSkin.Dispose() 
```

从控件集合中删除后。泄漏消失。但是在任何形式的第一次关闭时，我们都会收到以下消息（在应用程序执行期间只有一次）：

“<em>警告！此应用程序是使用 ActiveSkin 控件的试用版创建的。您可以在此处注册 ActiveSkin：http: [//www.softshape.com/activeskin](http://www.softshape.com/activeskin) ”。

当然，我们有图书馆的许可证。

你有什么想法吗？

谢谢。

# java - WSDL 中忽略的 JAX-B 全局绑定

> ID：11311323
> 
> 赞同：3
> 
> 时间：2012-07-03T12:50:48.697
> 
> 标签：java, xml, web-services, jaxb

我有一个 WSDL，我从中在 NetBeans 中生成类。未更改的副本具有日期，这些日期生成为 XMLGregorianCalendar。我试图覆盖该行为并插入一个全局绑定标记，以便它生成一个 Java 日期。但是，无论我将绑定标签（如下所示）放在哪里，它都会被忽略，并且使用 XMLGregorianCalendar 作为日期类型。

有人可以告诉我我是否在正确的轨道上，以及在哪里放置覆盖？下面也是 WSDL 的整体布局。

```
<annotation>
    <appinfo>
        <jaxb:globalBindings>
            <javaType name="java.util.Date" xmlType="xs:date"
                      parseMethod="javax.xml.bind.DatatypeConverter.parseDate"
                      printMethod="javax.xml.bind.DatatypeConverter.printDate"
        </jaxb:globalBindings>
    </appinfo>
</annotation> 
```

编辑后的 ​​WSDL，显示了我认为的相关部分：

```
<types>
    <s:schema xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:sap="http://xyz/sap" elementFormDefault="qualified" targetNamespace="http://xyz/sap">
        <s:element name="createOrder">
            <s:complexType>
                <s:sequence>
                    <s:element ref="sap:sap-order-request" />
                </s:sequence>
            </s:complexType>
        </s:element>
    </s:schema>

    <xs:schema xmlns:sap="http://xyz/sap" xmlns:xs="http://www.w3.org/2001/XMLSchema" targetNamespace="http://xyz/sap" elementFormDefault="unqualified">
        <xs:element name="sap-order-request">
            <xs:complexType>
                <xs:sequence minOccurs="1" maxOccurs="unbounded">
                    <xs:element name="publication-date" type="xs:date" />
                </xs:sequence>
            </xs:complexType>
        </xs:element>
    </xs:schema>
</types>

 <binding name="SapSalesOrderSoap" type="s0:SapSalesOrderSoap">
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
    <operation name="createOrder">
        <soap:operation soapAction="http://xyz/sap/createOrder" style="document"/>
        <input>
            <soap:body use="literal"/>
        </input>
        <output>
            <soap:body use="literal"/>
        </output>
    </operation>
</binding> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:56:09.890

我认为您缺少`<javaType>`元素上的名称空间前缀 - 它需要位于 JAXB 名称空间中，而不是 XML Schema 或 WSDL 名称空间中。

# c# - 与佳能/尼康相机通话的商业组件？

> ID：11311332
> 
> 赞同：2
> 
> 时间：2012-07-03T12:51:17.940
> 
> 标签：c#, winforms, visual-studio

我目前正在研究从 .NET WinForms 应用程序中使用佳能或尼康品牌的单反相机捕捉图像。

我知道佳能和尼康都有 SDK，但在网上阅读了几个小时后，我得出的结论是，集成他们的 SDK 将是一个漫长而痛苦的过程。

我的问题：有谁知道任何用于与佳能或尼康相机通信的商业（或免费）.NET 组件？我意识到任何组件都将成为各自 SDK 的包装器，但我们没有时间和资源来摆弄 C++ 包装器以及随之而来的一切。

对此的任何建议表示赞赏！

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T10:07:30.150

您可以[尝试](http://blogs.msdn.com/b/dimeby8/archive/2006/12/11/wpd-property-retrieval-in-c.aspx)[Microsoft](http://blogs.msdn.com/b/wpdblog/archive/2007/04/01/downloading-wpd-for-development.aspx)的[WPD](http://blogs.msdn.com/b/dimeby8/archive/2006/12/05/c-and-the-wpd-api.aspx) api 。这是[WPD 团队博客](http://blogs.msdn.com/b/wpdblog/)了解更多信息。

还有一个[Canon EOS 框架](https://github.com/esskar/Canon.Eos.Framework)，它声称提供了一种更好、更方便的方式来将[Canon EOS SDK](http://www.didp.canon-europa.com/)集成到 .NET 应用程序中[从未尝试过，您可能想试一试]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-10T17:49:03.183

既然您问了[NikonCsWrapper](https://sourceforge.net/projects/nikoncswrapper/)项目可用的问题，它只是 Nikon SDK 的 C# 包装器，但它与 .NET 集成得很好。

它与它使用的 Nikon SDK 一样好和可靠。

# android - 如何使用windows在eclipse中编译和修改android 4.0.3源代码

> ID：11311335
> 
> 赞同：0
> 
> 时间：2012-07-03T12:51:29.457
> 
> 标签：android, android-source, android-ndk

我已经下载了android源代码4.0.3，用make和gcc安装了cygwin，下载了ndk和sdk，集成了eclipse和cdt和adt。使用 Windows 7 64 位。

你们能告诉我如何在 Eclipse 中构建此源代码以自定义本机设置菜单。

提前致谢。

仅供参考：我已经通过谷歌，stackoverflow，但找不到任何有效的线索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:27:19.570

我认为这将*非常*困难。根据我的经验，即使在受支持的平台上，也很难调整构建环境。不支持 Windows，所以我认为这在那儿几乎是不可能的。

也许在您的情况下值得安装虚拟机？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:37:10.587

请参阅开发者文档中的这些页面：[初始化构建环境](http://source.android.com/source/initializing.html)。此页面似乎表明 Mac 和 Linux 是唯一受支持的构建环境操作系统。我建议使用其中之一而不是 Windows 7。

设置好环境后，另请参阅：[构建和运行](http://source.android.com/source/building.html)

# java - 在 ImageView 中选择内容 - Android

> ID：11311337
> 
> 赞同：0
> 
> 时间：2012-07-03T12:51:37.660
> 
> 标签：java, android, android-imageview

我有一个`Activity`包含一个`ImageView`，我想允许用户使用触摸（或鼠标单击）功能选择它的部分内容。

我想编写一个能够实现两件事的程序：

1.  在图像的选定部分上绘制一个突出显示的窗口
2.  返回一个包含选定（突出显示）像素坐标的对象。

为了更好地理解，您可以查看我创建的小模型：

![在此处输入图像描述](../Images/72d8bf972a7378bd2e1f248204f61472.png)

用户应该在图像的某些部分上触摸屏幕，它应该被突出显示。当按下后退按钮时，我想通过 Java 获得突出显示的像素的坐标。

你能帮我理解怎么做吗？

我特别想了解以下内容：

1.  我应该访问图像的像素级信息吗？
2.  实现此功能需要哪些类？
3.  一些伪代码的想法？

感谢您提供任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:12:29.653

我将子类`ImageView`化，然后您可以通过覆盖来捕获触摸事件`onTouchEvent(...)`

当您使用该`onDraw(...)`方法时，您可以调用 super 正常绘制图像，然后添加您自己的代码以在顶部绘制突出显示。

**编辑**

`ImageView`好吧，您可以扩展它并编写自己的类，而不是使用它，所有这个类所要做的就是覆盖`onTouchEvent(...)`，以便您知道何时触摸视图并可以保存触摸事件在屏幕上的位置。接下来编辑绘图方法：

```
@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas); // So the image you want is drawn as normal

    myMethodForDrawingAFancyHighlight(Canvas canvas); // add your special effects on top of the image
} 
```

# java - 如果抛出异常，Java 将继续执行循环

> ID：11311338
> 
> 赞同：2
> 
> 时间：2012-07-03T12:51:37.707
> 
> 标签：java, file, exception, try-catch

示例：假设我想打开一个文件。如果我得到一个`FileNotFoundException`，我需要等待一段时间再试一次。我怎样才能优雅地做到这一点？还是我需要使用嵌套`try/catch`块？

例子 ：

```
public void openFile() {
    File file = null; 
    try {
        file = new <....>
    } catch(FileNotFoundException e) {
    }
    return file;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T12:53:27.317

您可以使用`do { ... } while (file == null)`构造。

```
File file = null; 

do {
    try {
        file = new <....>
    } catch(FileNotFoundException e) {
        // Wait for some time.
    }
} while (file == null);

return file; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T12:54:16.270

```
public File openFile() {
  File file = null; 
  while (file == null) {
    try {
      file = new <....>
    } catch(FileNotFoundException e) {
      // Thread.sleep(waitingTime) or what you want to do
    }
  }
  return file;
} 
```

请注意，这是一种有些危险的方法，因为除非文件最终出现，否则无法破解。您可以添加一个计数器并在尝试一定次数后放弃，例如：

```
while (file == null) {
  ...
  if (tries++ > MAX_TRIES) {
    break;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T12:53:39.890

```
public File openFile() {
    File file = null; 
    while(true){
      try {
          file = new <....>
      } catch(FileNotFoundException e) {
            //wait for sometime
      }
      if(file!=null){
               break;  
      }
    }
    return file;
 } 
```

# php - 在 SQLite 数据库中输入特殊（CR 和单引号）字符

> ID：11311342
> 
> 赞同：0
> 
> 时间：2012-07-03T12:51:45.463
> 
> 标签：php, sqlite

我正在尝试向我的 sqlite 数据库添加几行以“初始化”它。我需要添加一个带有单引号和回车的列。CR 需要在第一个单引号之前。下面的代码在一行中输入数据并带有双引号。

```
$commonName = sqlite_escape_string("Blanket Flower 'Fanfare'");

try{
    $query = "INSERT INTO plant(id,
                            common_Name, 
                            latin_Name) 
              VALUES (1,:commonname,'Gaillardia')";
    $statement = $db->prepare($query);

    $statement->bindParam(':commonname', $commonName);
    $statement->execute(); 
```

感谢您的时间，托德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:53:40.857

既然你在用`bindParam`，就不用用了`sqlite_escape_string`。

```
$commonName = "Blanket Flower\n'Fanfare'"; 
```

# java - 如何避免无状态会话 Bean 中的并发？

> ID：11311345
> 
> 赞同：0
> 
> 时间：2012-07-03T12:51:49.857
> 
> 标签：java, ejb, ejb-3.0, stateless-session-bean

我有一个 SLSB，它增加实体中的数字。如果两个线程同时到达 SLSB，我会在两个请求中得到相同的数字。

**SLSB 提取物**

```
@Stateless(mappedName = "ejb/CustomerManager")
public class CustomerManagerBean implements CustomerManager {
...
    public String recoverName(int id) {
        Customer customer = (Customer) em.createQuery("from Customer where id = :id").setParameter("id", id).getSingleResult();     
        int oldValue = customer.getValue();
        int newValue = oldValue + 1;
        customer.setValue(newValue);        
     [BP]   return customer.getName() + " value=" + customer.getValue();
    }
...
} 
```

**实体提取**

```
@Entity
public class Customer implements Serializable {
    @Id
    private int id;
    private int value;
} 
```

为了测试这个问题，我`[BP]`在 SLSB recoverName 方法中用 标记的行设置了一个断点。然后从两个分开的浏览器页面进行两次调用。在断点处，两个调用的值**相同**。

**当第二个调用尝试使用 setter 修改值时，不应该抛出某种异常吗？**

我使用 JBoss 5 作为 AS，使用 MySql 或 Oracle 作为 DB（两者都试过）

谢谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T12:57:24.727

如果您在实体中添加了 @Version 注释字段，您将在刷新时遇到异常，JPA 将使用该字段进行乐观锁定。

每次 JPA 更新实体时，都会将内存中的版本与数据库中的版本进行比较，如果不匹配则会抛出异常。如果它们匹配，则版本将增加。

只需将以下内容添加到您的实体中：

```
@Column(name = "version")
@Version
private long version; 
```

（当然也要把对应的列添加到数据库中）

# python - 显示搜索 API 的结果

> ID：11311347
> 
> 赞同：0
> 
> 时间：2012-07-03T12:52:00.820
> 
> 标签：python, forms, web2py, blekko

我正在尝试掌握 web2py/python。我想让用户填写一个搜索表单，他们搜索的词被发送到我的 python 脚本，该脚本应该将查询发送到 blekko API 并在新的 HTML 页面中将结果输出给他们。我已经实现了以下代码，但是我没有出现正常的索引页面，而是直接从 blekko 获取 html 响应，其中 '%(query)' /html 出现在它的搜索栏中。真的需要一些帮助！

默认/index.html 页面上的 HTML 表单

```
<body>

<div id="MainArea">
  <p align="center">MY SEARCH ENGINE</p>
  <form name="form1" method="get" action="">
    <label for="SearchBar"></label>
    <div align="center">
      <input name="SearchBar" type="text" id="SearchBar" value="" size = "100px"><br />
      <input name="submit" type="submit" value="Search">
    </div>
  </form>
  <p align="center">&nbsp;</p> 
```

default.py 控制器上的 Python 代码

```
import urllib2

def index():
    import urllib2

    address = "http://www.blekko.com/?q='%(query)'+/html&auth=<mykey>"
    query = request.vars.query

    response = urllib2.urlopen(address)

    html=response.read()
    return html 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:09:48.423

I think you are misunderstanding how [string formatting](http://docs.python.org/library/stdtypes.html#string-formatting) works. You need to put the address and query together still:

```
address = "http://www.blekko.com/?q='%(query)s'+/html&auth=<mykey>" % dict(query=request.vars.query) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T21:13:36.970

在表单中添加一个隐藏字段，将其称为“已提交”。然后重新格式化您的控制器功能：

```
import urllib2

def index():
    if request.vars.submitted:
        address = "http://www.blekko.com/?q='%(query)'+/html&auth=<mykey>"
        query = request.vars.query
        response = urllib2.urlopen(address)
        html=response.read()
        return html
    else:
        return dict() 
```

这将显示您的索引页面，除非表单已提交并且页面接收到“提交”表单变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T04:48:50.340

/html 不做任何事情。很高兴你的问题得到了回答。这里有 blekko 搜索 api 的 python 客户端代码：[https ://github.com/sampsyo/python-blekko](https://github.com/sampsyo/python-blekko)

# sql-server - 空间查询 - 性能差，不使用索引

> ID：11311349
> 
> 赞同：0
> 
> 时间：2012-07-03T12:52:16.957
> 
> 标签：sql-server, sql-server-2008, spatial

我试图找到距给定坐标一定距离内的位置。在具有大约 32k 条记录的表上查询大约需要 2 秒 - 这太慢了，imo。

它正在执行聚集索引扫描，这是合乎逻辑的 - 它必须计算每个位置的距离。但是，我仍然认为这应该比这么小的数据集更快。我确实定义了空间索引，但是它没有被使用，如果我强制它查询会失败。

大部分时间（~86%）都花在计算距离的过滤器上——所以我正在寻找一种优化它的方法，我需要一些帮助。

我正在使用的查询是这样的：

```
SELECT Name
FROM Venue
WHERE (Coordinates.STDistance(geography::STPointFromText('POINT(-113.512245 51.498212)', 4326)) / 1000) <= 100 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:03:26.210

One old approach is to use a BOX firxt.

From your point, make two points on opposite ends of the box. +R/+R and -R/-R from the center.

Then you can filter - a point has to be in this box AND in the circle you describe.

The box check can run on the index and kills most elements.

Simple school geometry. You draw a rectangular box around the circle you describe.

Your current approach can not use the index because the index does not contain the fields.

ALTERNATIVELY: DRAW A CIRCLE - do not use a distance calculation. Draw a circle. With points.

Or read [https://stackoverflow.com/questions/11311363/my-application-is-about-asp-net-using-linq-and-remote-mssql-my-connection-is-be](https://stackoverflow.com/questions/11311363/my-application-is-about-asp-net-using-linq-and-remote-mssql-my-connection-is-be) which is the same issue you ask.

# perl - 如何在 ExtJS 网格之间共享数据

> ID：11311353
> 
> 赞同：0
> 
> 时间：2012-07-03T12:52:29.017
> 
> 标签：perl, extjs

我正在使用 PERL Miner::Base 和 JavaScript 平台（.pm 和 .js）。我的 JavaScript 包含 3 个 ExtJS GridPanel。

现在，这是我的问题：

**我有一个函数需要大约 1 分钟才能运行并返回一个列表，其中包含对所有**3 个网格所需数据的引用。我们称这个函数为“foo”。

目前，为了加载我的每个网格存储，我调用了一个调用“foo”的函数，并仅返回“foo”返回的列表中的相关引用。

我需要**一种只调用一次“foo”**并在我的 3 个商店之间共享它返回的数据的方法。

有没有这样的方法？

谢谢。

这是我的代码的基本结构：

```
my_code.js:
gridA with storeA (calls my_code.pm::get_A_data)
gridB with storeB (calls my_code.pm::get_B_data)
gridC with storeC (calls my_code.pm::get_C_data)

my_code.pm:
get_A_data (calls foo and returns the first reference returned from foo)
get_B_data (calls foo and returns the second reference returned from foo)
get_C_data (calls foo and returns the third reference returned from foo) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:06:23.750

如果你有三个网格，你实际上需要有三个商店。但是，您可以执行一个请求，获取一个存储对象，然后将其克隆到其他两个本地副本中。搜索`cloning ExtJs store`

# actionscript-3 - AS3 数组中的哪一项具有较低的值？

> ID：11311358
> 
> 赞同：0
> 
> 时间：2012-07-03T12:52:41.480
> 
> 标签：actionscript-3

我正在尝试在 AS3 中制作类似塔防的游戏，目前无法找到解决方案来检查数组中哪个项目的敌人与炮塔之间的距离值较低，以便选择首先攻击哪个敌人。

我真的被这个问题困住了，并寻求你的帮助。

这是一个简短的代码：

```
var enemyArray:Array = new Array();
var turretArray:Array = new Array();

addEventListener(Event.EnterFrame, loop);

// adding enemies
for(var i:int=0; i<3; i++){
    var enemy:Enemy = new Enemy();
    ...
    ...
    enemyArray.push(enemy);
    addChild(enemy);
}

// adding turret
for(var t:int=0; t<2; t++){
    var turret:Turret = new Turret();
    ...
    ...
    turret.destinationX = 0;
    turret.destinationY = 0;
    turret.distance = 0;
    turretArray.push(turret);
    addChild(turret);
}

// loop
function loop(event:Event):void{
    for(var j:int=enemyArray.length-1; j>=0; j--){
        for(var k:int=turretArray.length-1; k>=0; k--){

            // getting destination
            turretArray[k].destinationX = turretArray[k].x - enemyArray[j].x;
            turretArray[k].destinationY = turretArray[k].y - enemyArray[j].y;

            // getting distance between turret and enemy
            turretArray[k].distance =   Math.sqrt(turretArray[k].destinationX*turretArray[k].destinationX+turretArray[k].destinationY*turretArray[k].destinationY);

            // here i need to get min value from all turrets distance
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:13:29.467

看起来你只需要跟踪你发现的最低值，而不是每次都覆盖它（如果我正确理解了你的代码）。

```
// loop
function loop(event:Event):void{
    for(var k:int=turretArray.length-1; k>=0; k--)
    {
        turretArray[k].distance = -1;

        for(var j:int=enemyArray.length-1; j>=0; j--)
        {
            var dx = turretArray[k].x - enemyArray[j].x;
            var dy = turretArray[k].y - enemyArray[j].y;
            var dist = Math.sqrt(dx * dx + dy * dy);

            if(dist < turretArray[k].distance || turretArray[k].distance < 0)
            {
                turretArray[k].distance = dist;
                turretArray[k].destinationX = dx;
                turretArray[k].destinationY = dy;
            }
        }
    }
} 
```

在这里，我们存储在 中找到的初始距离值`turretArray[k].distance`，并且仅在找到较低的距离值时才覆盖它。我们将其设置为`-1`每次，以便我们可以判断它是否已设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:15:37.837

这是你想要的等式：

[http://www.mathopenref.com/coorddist.html](http://www.mathopenref.com/coorddist.html)

sqrt( (turret1X - turret2x)^2 + (turret1Y - turret2Y)^2 )

# javascript - 循环遍历 JS 数组 onclick 并将值写入 DOM

> ID：11311359
> 
> 赞同：0
> 
> 时间：2012-07-03T12:52:43.853
> 
> 标签：javascript, jquery

所以我得到了这个包含 50 个 YouTube 视频 ID 的 JavaScript 数组和一个将前两个视频写入 DOM 的 while 循环。如果您想知道反斜杠，则使用 PHP 打印此代码。

```
<script type="text/javascript">
var videoArr=["id1", "id2", etc.];
var i = 0;
while (i<2) {
document.write(\'<iframe width="400" height="225" src="http://www.youtube.com/embed/  \'+videoArr[i]+\'?rel=0&amp;autohide=1&amp;showinfo=0" frameborder="0" allowfullscreen></iframe>\');
i++;
}
</script> 
```

所以基本上我需要一个“上一个”和“下一个”按钮来循环遍历这个数组并将下一个或前两个视频写入 DOM。最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:59:55.033

您已经`var i`在全局范围内声明，现在您只需要增加或减少函数`i`并将其附加到 DOM。而不是`document.write()`在 DOM 已经加载时，您应该将它们附加到`<body>`.

```
// i is at global scope
var i = 0;
function previousVideo() {
   // Only if you're not already at the beginning of the array
   if (i > 0) {
     i--;
     // You tagged this jQuery, so here's the simpler jQuery solution
     appendVideo(i);
    }
}
function nextVideo() {
  // Only if you're not already at the end of the array
  if (i < videoArr.length - 1) {
     i++;
     appendVideo(i);
  }
}
// Appends a new iframe to the <body>
function appendVideo(i) {
   $("body").append('<iframe width="400" height="225" src="http://www.youtube.com/embed/' + videoArr[i] + '?rel=0&amp;autohide=1&amp;showinfo=0" frameborder="0" allowfullscreen></iframe>');
} 
```

创建一些新按钮并将功能绑定`previousVideo()`到`nextVideo()`它们。

**编辑**：我只是注意到你想每次附加两个视频。在这种情况下，每次单击按钮只需调用上一个和下一个函数*两次。*如果你读到数组的末尾，只会添加一个。

```
$('#yourbutton').click(function() {
  // Get rid of the old ones
  $('body').remove('iframe');
  // And write two new ones.
  previousVideo();
  previousVideo();
}); 
```

# php - 数据库更改不会反映到 joomla 网站

> ID：11311364
> 
> 赞同：1
> 
> 时间：2012-07-03T12:52:51.427
> 
> 标签：php, caching, joomla, webserver

我正在使用 joomla 2.5 开发的网站数据库进行更改，但这些更改并未反映在网站上。
我转储数据库并在本地网站的同一版本上运行它，并且更改后工作得很好，我的网络服务器上只有一个数据库，所以毫无疑问，当我更改数据库密码时，我正在更改其他数据库该网站出现故障
我正在将我的 joomla Web 应用程序安装在 Godaddy 网络服务器上，并且我还清除了缓存以确保它不是问题。
更改在模块和文章上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:29:46.050

只是出于好奇，您是否正在编辑正确的数据库？我之所以这么说，是因为我有一个类似的问题，我在我的网站上注册测试帐户并且看不到添加到数据库中的行，因为我查看的是 Wamp 服务器，而不是在线服务器。

如果像您所说的那样注意到正在发生的事情，请尝试更改数据库表前缀但不要更新，`config.php`并查看在您尝试预览站点时是否会引发错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:11:28.030

我认为您所做的数据库更改是特定于模块的，并且它们会在通过模块的 init 函数访问模块时**重新初始化。**您也可以在那里更改值

# iphone - 如何制作 HTML 文件

> ID：11311366
> 
> 赞同：-10
> 
> 时间：2012-07-03T12:52:57.207
> 
> 标签：iphone

我正在开发一个应用程序。在那个应用程序中，我从`NSXMLParser`. 我需要将该 html 数据发送到`UIWebView`. 所以请告诉我如何将该 html 数据作为输入`UIWebview`或如何使用该数据创建新的 html 文件以及如何运行该 html 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:55:47.500

来自[UIWebView 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)

这是加载 html 所需的方法：

```
- (void)loadHTMLString:(NSString *)string baseURL:(NSURL *)baseURL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:59:52.477

试试这个：

```
[mWebView loadHTMLString:htmlString baseURL:nil]; 
```

# css - 更改任何标签的 css 类

> ID：11311369
> 
> 赞同：0
> 
> 时间：2012-07-03T12:53:05.803
> 
> 标签：css, asp.net-mvc-3

如何更改在模型类中具有属性的任何标签或复选框的 css 类，当我创建局部视图时，我只想更改 mVC3 中该特定标签的 css 类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:47:15.043

你可以做这样的事情。

```
<label class="textlabel">@Html.LabelFor(model => model.Property) :</label> 
```

为该类定义 css。

```
.textlabel
{
    font-weight: bold;
    color: #f8971d;
    float: right;
} 
```

# java - 使用 POJO 和 JAXB 注释绑定 XML

> ID：11311374
> 
> 赞同：3
> 
> 时间：2012-07-03T12:53:23.803
> 
> 标签：java, jaxb, pojo

我有以下 xml 格式，我想通过 POJO 并使用 JAXB 注释来绑定它。XML 格式如下：

```
 <datas>
   <data>apple<data>
   <data>banana<data>
   <data>orange<data>
 <datas> 
```

我正在尝试通过以下 POJO 绑定数据：

```
@XmlRootElement()
@XmlAccessorType(XmlAccessType.FIELD)
public class Datas {

  @XmlElement
  private List<String> data;

  //get/set methods

} 
```

我也尝试了这个 POJO：

```
@XmlRootElement()
@XmlAccessorType(XmlAccessType.FIELD)
public class Datas {

  @XmlElement
  private List<Data> datas;

  //get/set methods

} 
```

//

```
@XmlRootElement()
@XmlAccessorType(XmlAccessType.FIELD)
public class Data{

  @XmlElement
  private String data;

  //get/set methods

} 
```

在第一种情况下，它只检索第一个数据：apple. 在第二种情况下不检索任何东西。有人可以帮我提供适当的 POJO 和注释以绑定所有数据吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T13:19:12.420

您可以执行以下选项之一：

**选项1**

**数据**

```
package forum11311374;

import java.util.List;
import javax.xml.bind.annotation.*;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Datas {

  private List<String> data;

  //get/set methods

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/09/jaxb-collection-properties.html](http://blog.bdoughan.com/2010/09/jaxb-collection-properties.html)

* * *

**选项 #2**

**数据**

```
package forum11311374;

import java.util.List;
import javax.xml.bind.annotation.*;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Datas {

  @XmlElement(name="data")
  private List<Data> datas;

  //get/set methods

} 
```

**数据**

```
package forum11311374;

import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
public class Data{

  @XmlValue
  private String data;

  //get/set methods

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/06/jaxb-and-complex-types-with-simple.html](http://blog.bdoughan.com/2011/06/jaxb-and-complex-types-with-simple.html)

* * *

以下可以与这两个选项一起使用：

**输入.xml/输出**

我已更新 XML 文档以包含必要的结束标记。 `<data>apple</data>`而不是`<data>apple<data>`.

```
<datas>
   <data>apple</data>
   <data>banana</data>
   <data>orange</data>
 </datas> 
```

**演示**

```
package forum11311374;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Datas.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum11311374/input.xml");
        Datas datas = (Datas) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(datas, System.out);
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T13:47:11.393

第一个选项对我有用......不知道你为什么会遇到问题......试试这个注释......

```
@XmlElements(@XmlElement(name="data", type=String.class))
private List<String> datas; //ignore the variable name 
```

# php - 在使用 __call() 的重载函数中使用引用

> ID：11311379
> 
> 赞同：4
> 
> 时间：2012-07-03T12:53:38.520
> 
> 标签：php, reference, overloading

```
class a
{
    public function f(&$ref1, &$ref2)
    {
        $ref1 = 'foo';
        $ref2 = 'bar';
    }
}

class b
{
    public function __call($methodName, $arguments)
    {
        $a = new a();
        call_user_func_array(array(
            $a, $methodName
        ), $arguments);
    }
}

$ref1 = 'X';
$ref2 = 'Y';
$b = new b();
$b->f($ref1, $ref2);
var_dump($ref1, $ref2); 
```

这导致：

```
PHP Warning:  Parameter 1 to a::f() expected to be a reference, value given in /home/jon/sync_workspace/bugsync/tests/test.php on line 18
PHP Stack trace:
PHP   1\. {main}() /test.php:0
PHP   2\. b->f() /test.php:23
PHP   3\. b->__call() /test.php:23
PHP   4\. call_user_func_array() /test.php:17
string(1) "X"
string(1) "Y" 
```

如何在 PHP 5.4 中完成上述操作（通过使用引用来操作 ref1 和 ref2）？

在 PHP 5.3 中，我使用了 & 语法`$b->f(&$ref1, &$ref2);`（即使它已被弃用），但在 PHP5.4 中，这会引发致命错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T13:28:15.430

我设法找到了一个解决方案，虽然它是一个黑客。

您仍然可以将引用存储在数组中，并将数组作为参数传递，这将通过 __call()

```
class b
{
    public function __call($methodName, $arguments)
    {
        $a = new a();
        call_user_func_array(array(
            $a, $methodName
        ), reset($arguments));
    }
}
$ref1 = 'X';
$ref2 = 'Y';
$b = new b();
$b->f(array(&$ref1, &$ref2)); 
```

PHP 手册指出：*仅函数定义就足以通过引用正确传递参数。*（http://php.net/manual/en/language.references.pass.php）这显然不是 __call() 引用函数的情况！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:28:52.617

我收回它，这**实际上**是可能的，使用引用数组。这是我使用的完整代码：

```
class b
{
    public function __call($methodName, $arguments)
    {
        $a = new a();
        call_user_func_array(array(
            $a, $methodName
        ), $arguments[0]);
    }
}
$ref1 = 'X';
$ref2 = 'Y';
$b = new b();
$b->f( array( &$ref1, &$ref2));
var_dump($ref1, $ref2); 
```

这[输出](http://viper-7.com/pvvUc5)：

```
string(3) "foo"
string(3) "bar" 
```

正如预期的那样，没有警告或通知。

# winforms - Visual Studio 中图像资源的类库

> ID：11311383
> 
> 赞同：0
> 
> 时间：2012-07-03T12:54:13.677
> 
> 标签：winforms, visual-studio, class-library

在过去的一年里，我们一直在为一个客户开发几个 WinForms 项目，并注意到这些项目开始使用一组通用的图像资源（大约 20 个）来进行工具条按钮、图片框等控件。将这些图像嵌入到他们自己的类库中并在每个 WinForms 项目中提供参考，而不是继续将它们直接嵌入到每个 WinForms 项目中，是否被认为是好的、可接受的或不好的做法？每个 WinForms 项目都会使用大部分图像，但不一定是全部。对图像使用单独的 DLL 会不会有任何类型的性能损失？对此的任何想法将不胜感激。非常感谢，保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:02:26.547

资源仅按请求加载到内存中，这意味着您将按磁盘空间而不是内存消耗或性能为它们付费。

有一些与程序集本身相关的开销（您可以通过使用来避免[`LOAD_LIBRARY_AS_DATAFILE`](http://khason.net/blog/how-to-load-unmanaged-native-resources-from-managed-c-code/)，这会使此任务相当复杂），但如果程序集不提供任何代码，则无需担心此开销。

更改对您的开发过程的影响大于最终产品，这是典型的重用。如果你可以说它是由同一个团队共同管理所有应用程序，我只看到这种特殊做法的好的一面。您只需要在版本控制方面更加小心，以便为一个应用程序所做的更改不会破坏另一个应用程序。

# azure - 新 Azure IaaS 云上的 AWS Route53 和 Elastic Load Balancer 等效

> ID：11311384
> 
> 赞同：1
> 
> 时间：2012-07-03T12:54:16.227
> 
> 标签：azure, amazon-web-services, load-balancing, high-availability

我们正在选择一个云提供商来运行我们的虚拟机，我们希望更好地了解 AWS 和新 Azure 之间的区别。

有谁知道 Azure Cloud (IaaS) 是否有 AWS Route53 和 Elastic Load Balancer 的等价物？如果有，它是如何工作的？他们是否在全球范围内也有几个不同的区域能够提供高可用性而对延迟的影响最小？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:08:19.017

Microsoft 没有像 Route53 这样的 DNS 服务。但确实支持常见的 DNS 操作，例如 c-name 路由/转发到各种 Windows Azure 服务。至于区域，目前微软提供了 8 个位置来托管 Windows Azure，欧洲 2 个，亚洲 2 个，美国 4 个，Fujistsu 在日本提供一些 Windows Azure 服务的托管。除了富士通可能的例外（我不知道他们的 SLA 细节），所有 Windows Azure 服务都至少达到 99.9%（“高可用”的定义是主观的）。此外，Microsoft 的内容交付网络在全球拥有超过 24 个节点，以帮助加快交付速度并减少内容交付到几乎任何地区的延迟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T13:10:21.027

在大多数情况下，是的，存在等价性。Windows Azure 始终在任何外部端点（通过 VIP 公开）上都有一个负载平衡器。在这一点上，它还不是一个超级可编程的防火墙（你不能做的只是简单地将自己从轮换中移除），但它非常适用于网络农场场景。

Cloud Traffic Manager 非常适合在 Windows Azure 中定位您的服务。只需在多个数据中心部署您的服务，在流量管理器中配置一些设置，即可完成。大多数人将其用于“最佳性能”（即最接近客户的 DC），但您也可以将其用于“故障转移”。

在 DNS 方面，目前没有用于处理外部 DNS 名称的等效服务。您今天使用自己的服务器处理 DNS。这是 AWS 领先的一点。

# android - 我想反过来改变edittext值

> ID：11311386
> 
> 赞同：-2
> 
> 时间：2012-07-03T12:54:20.823
> 
> 标签：android

当我单击第一个文本框然后第二个 textchange 侦听器无法工作时，我想反过来更改 edittext 值，当我单击第二个文本框时，第一个 textchange 侦听器无法工作。

```
editTextPer.setOnClickListener(new OnClickListener() 
            {

                @Override
                public void onClick(View v) 
                {
                    etTextper=new EditTextPerWatcher();
                    editTextHb.removeTextChangedListener(etTexthb);
                    editTextPer.addTextChangedListener(etTextper);
                }
            });

            editTextHb.setOnClickListener(new OnClickListener() 
            {

                @Override
                public void onClick(View v) 
                {
                    etTextper=new EditTextPerWatcher();
                    editTextPer.removeTextChangedListener(etTextper);
                    editTextHb.addTextChangedListener(etTexthb);
                }
            });editTextPer.setOnClickListener(new OnClickListener() 
            {

                @Override
                public void onClick(View v) 
                {
                    etTextper=new EditTextPerWatcher();
                    editTextHb.removeTextChangedListener(etTexthb);
                    editTextPer.addTextChangedListener(etTextper);
                }
            });

            editTextHb.setOnClickListener(new OnClickListener() 
            {

                @Override
                public void onClick(View v) 
                {
                    etTextper=new EditTextPerWatcher();
                    editTextPer.removeTextChangedListener(etTextper);
                    editTextHb.addTextChangedListener(etTexthb);
                }
            });

> BlockquoteeditTextPer.setOnClickListener(new OnClickListener() 
            {

                @Override
                public void onClick(View v) 
                {
                    etTextper=new EditTextPerWatcher();
                    editTextHb.removeTextChangedListener(etTexthb);
                    editTextPer.addTextChangedListener(etTextper);
                }
            });

            editTextHb.setOnClickListener(new OnClickListener() 
            {

                @Override
                public void onClick(View v) 
                {
                    etTextper=new EditTextPerWatcher();
                    editTextPer.removeTextChangedListener(etTextper);
                    editTextHb.addTextChangedListener(etTexthb);
                }
            });

editTextPer.setOnClickListener(new OnClickListener() 
            {

                @Override
                public void onClick(View v) 
                {
                    etTextper=new EditTextPerWatcher();
                    editTextHb.removeTextChangedListener(etTexthb);
                    editTextPer.addTextChangedListener(etTextper);
                }
            });

            editTextHb.setOnClickListener(new OnClickListener() 
            {

                @Override
                public void onClick(View v) 
                {
                    etTextper=new EditTextPerWatcher();
                    editTextPer.removeTextChangedListener(etTextper);
                    editTextHb.addTextChangedListener(etTexthb);
                }
            });

editTextPer.setOnClickListener(new OnClickListener() 
            {

                @Override
                public void onClick(View v) 
                {
                    etTextper=new EditTextPerWatcher();
                    editTextHb.removeTextChangedListener(etTexthb);
                    editTextPer.addTextChangedListener(etTextper);
                }
            });

            editTextHb.setOnClickListener(new OnClickListener() 
            {

                @Override
                public void onClick(View v) 
                {
                    etTextper=new EditTextPerWatcher();
                    editTextPer.removeTextChangedListener(etTextper);
                    editTextHb.addTextChangedListener(etTexthb);
                }
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:57:41.840

我对你的理解正确吗？你想反转一个字符串？

如果是，这真的很简单，但我只是为您描述算法（您可以自己编写代码）：

1.  获取输入字符串 + 创建空结果字符串
2.  在从最后一个元素开始并以第一个元素结束的输入中执行 for 循环
3.  在循环中，您将字符串/字符/元素的每个部分添加到结果字符串中
4.  现在你应该有你的反向字符串

# joomla2.5 - Joomla 2.5 - 是否可以在 jdoc 内容中加载系统消息？

> ID：11311388
> 
> 赞同：0
> 
> 时间：2012-07-03T12:54:31.273
> 
> 标签：joomla2.5, joomla-template

我有以下代码：

```
<div id="content">
    <?php if(count($app->getMessageQueue())) { ?>
        <jdoc:include type="message" />
    <?php } ?>
    <jdoc:include type="component" />
</div><!--#content--> 
```

当出现错误或系统生成消息时，一切正常。当它们出现时，输出如下所示：

```
<div id="content">
    Some error messages
    <h1>Some page title</h1>
    <p>Some content</p>
</div><!--#content--> 
```

我希望他们看起来像：

```
<div id="content">
    <h1>Some page title</h1>
    Some error messages
    <p>Some content</p>
</div><!--#content--> 
```

所以错误信息应该在 h1 标签之下和 p 标签之前。如何在不破解核心文件的情况下实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:57:05.637

如果没有错，只需交换两行（第一行`component`和第二行`message`）。

```
<div id="content">
    <jdoc:include type="component" />
    <?php if(count($app->getMessageQueue())) { ?>
        <jdoc:include type="message" />
    <?php } ?>
</div><!--#content--> 
```

# git - Git 编辑器错误

> ID：11311392
> 
> 赞同：1
> 
> 时间：2012-07-03T12:54:51.143
> 
> 标签：git, editor, git-config

当我尝试运行`git rebase -i`以压缩我的提交时，我收到以下错误消息：

```
/usr/libexec/git-core/git-sh-setup: line 112: mate: command not found 
```

git如何寻找编辑器？从`git-sh-setup`文件中，我只能看到这个方法：

```
git_editor() {                                                                       
    if test -z "${GIT_EDITOR:+set}" 
    then                                                                             
        GIT_EDITOR="$(git var GIT_EDITOR)" || return $?                              
    fi                                                                               
    eval "$GIT_EDITOR" '"$@"'                                                                                                                                                    
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T12:57:42.440

有*`~/.gitconfig`*这样的设置：

```
[core]
    editor = mate 
```

如果您已`textmate`添加到您，`PATH`那么您可以将其更改为：`editor = mate`. 只要确保它被添加到那里。

`echo $PATH`检查 textmate 是否存在。

* * *

您还可以通过 更改配置选项`git config`。chage 的选项是`core.editor`. 例如：

```
$ git config core.editor        # the current set editor
mate
$ git config core.editor vim    # change editor to vim
$ git config core.editor
vim 
```

要使设置在所有存储库中可用，请添加`--global`标志`git config`

```
$ git config --global core.editor <editor-of-choice> 
```

从`git help config`手册页：

> **core.editor**
> 诸如 commit 和 tag 之类的命令可以让您通过启动编辑器来编辑消息，在设置此变量时使用该变量的值，并且未设置环境变量 GIT_EDITOR。请参阅 git-var(1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:57:50.403

正如您在该脚本中看到的那样，它使用`git var`，根据`git help var`它：

> `GIT_EDITOR`
> 
> 供`git`命令使用的文本编辑器。该值意味着在使用时由 shell 解释。例子：`~/bin/vi`, `$SOME_ENVIRONMENT_VARIABLE`, `"C:\Program Files\Vim\gvim.exe" --nofork`.
> 
> 优先顺序是`$GIT_EDITOR`环境变量，然后是`core.editor`配置，然后是`$VISUAL`，然后`$EDITOR`是，最后是`vi`。

# mongodb - 确保索引时添加_id？

> ID：11311398
> 
> 赞同：3
> 
> 时间：2012-07-03T12:55:14.797
> 
> 标签：mongodb

我正在使用 Codeigniter (PHP) 和 MongoDB 构建一个 webapp。我正在创建索引并且有一个问题。

如果我要查询三个字段（_id、状态、类型）并想创建一个索引，我是否需要在确保这样的索引时包含 _id：

```
db.comments.ensureIndex({_id: 1, status : 1, type : 1}); 
```

或者这会到期吗？

```
db.comments.ensureIndex({status : 1, type : 1}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T13:56:38.840

如果要将其包含在复合索引中，则需要明确包含`_id`在您的调用中。`ensureIndex`但是因为过滤`_id`已经提供了单个文档的选择性，这很少是正确的事情。我认为只有当您的文档非常大并且您尝试使用[覆盖索引](http://www.mongodb.org/display/DOCS/Retrieving+a+Subset+of+Fields#RetrievingaSubsetofFields-CoveredIndexes)时才有意义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T13:23:29.813

MongoDB 目前每个查询只使用[一个索引，](http://www.mongodb.org/display/DOCS/Indexing+Advice+and+FAQ#IndexingAdviceandFAQ-Oneindexperquery.)但查询除外`$or`。如果您的常见查询总是在这三个字段（_id、状态、类型）上进行搜索，那么复合索引会很有帮助。

在 DB shell 中，您可以在查询中使用[explain()](http://www.mongodb.org/display/DOCS/Explain)命令来获取有关所使用索引的信息。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-07-03T13:21:24.503

您不需要在 _id 字段上隐式创建索引，它会自动完成。请参阅[mongo 文档](http://www.mongodb.org/display/DOCS/Indexes)：

> _id 索引
> 
> 对于除上限集合之外的所有集合，会自动为 _id 字段创建索引。这个索引是特殊的，不能被删除。_id 索引强制其键的唯一性（除了一些分片的情况）。

# javascript - JavaScript：设置变量

> ID：11311402
> 
> 赞同：0
> 
> 时间：2012-07-03T12:55:31.077
> 
> 标签：javascript

我正在使用[http://fakeapp.com](http://fakeapp.com)运行一些浏览器自动化任务，并且在将变量解析为 URL 字符串时遇到了一些障碍。这个问题更多地是关于 JavaScript 循环而不是 FakeApp（但这个问题有一些上下文）。这是我到目前为止所拥有的：

```
var idx = fake.loop.index;
fake.set('idx', idx);
console.log('idx: ' + idx) 
```

我需要做的只是将起始变量设置为`500`. 现在可重复操作（这部分在 FakeApp 中完成）从 0 开始——我需要从特定数字开始索引并递增一。谢谢！

# php - 更新mysql时间戳

> ID：11311408
> 
> 赞同：3
> 
> 时间：2012-07-03T12:55:57.343
> 
> 标签：php, mysql, timestamp

我有一个带有字段的表：

> 'last_modified - 时间戳不为空'

*   我将默认值设置为当前时间戳。但是，这只适用于从 phpMyAdmin 而不是我的脚本更新或插入时。

我试过了

```
$sql = sprintf("UPDATE %s SET timestamp=now(), %s WHERE id='%s'", $table, $implodeArray, $_POST['id']); 
```

它似乎仍然不起作用。当我从脚本更新或按表插入时，如何进行时间戳更新？

还有一个脚本输出示例：

> UPDATE about SET timestamp=now(), page_header = 'Page header goes here', sub_header = 'Sub header goes here', content_short = '这是关于页面的简短描述', content = '这是完整的内容描述去'WHERE id='1'

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T13:19:22.210

可能是我看错了，但是您的列名是**last_modified**（键入*timestamp*），所以查询应该是：

```
UPDATE about SET last_modified=now(), 
page_header = 'Page header goes here', 
sub_header = 'Sub header goes here', 
content_short = 'This is where a short description of the about page goes', 
content = 'This is where the full content description goes' 
WHERE id='1' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T13:02:42.847

如果您使用[保留字](http://dev.mysql.com/doc/refman/5.6/en/reserved-words.html)作为表或列名，那么您需要引用它

```
$sql = sprintf("UPDATE %s SET `timestamp`=now(), %s WHERE id='%s'", $table, $implodeArray, $_POST['id']); 
```

在这种情况下，您使用时间戳作为列名，因此您需要引用它

要自动更新时间戳，如果您只有 1 个时间戳列，您可以依赖 mysql 本身，或者您可以`ON UPDATE CURRENT_TIMESTAMP`在定义时间戳列时添加，有关更多信息，请参阅[TIMESTAMP 初始化](http://dev.mysql.com/doc/refman/5.6/en/timestamp-initialization.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T13:32:35.080

如果您想在每次记录发生某些事情时更新时间戳（即最后修改的日期/时间），那么最好将其保留在数据库中。您不能依赖字段定义中的默认值，因为它仅适用于 INSERT（创建记录/字段时），使用 SET last_modified=GETDATE() [或 GETUTCDATE()] 实际功能可能会因您的实际 SQL 而异服务器。

并且“Ivan Buttinoni”是绝对正确的，包括我在内的任何人都没有注意到它 - 你的字段名称是错误的，但上述评论仍然适用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-27T12:56:20.790

如果您有类似框架的东西不允许“现在（）”这个字段 - 只需将字段设置为 NOT NULL 并在保存之前将 PHP 变量（模型->字段）设置为 null ..

# internet-explorer - selenium webdriver：InternetExplorerDriver 服务器未启动

> ID：11311409
> 
> 赞同：1
> 
> 时间：2012-07-03T12:55:58.327
> 
> 标签：internet-explorer, selenium, webdriver

我在 Eclipse 中使用 selenium web 驱动程序和 junit。这是我测试的开始：

```
import org.junit.Test;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.ie.InternetExplorerDriver;

public class WebTest {
private WebDriver driver;

@Test
public void testUnit() throws Exception {

System.setProperty("webdriver.ie.driver", "IEDriverServer.exe");
 driver = new InternetExplorerDriver(); 
```

运行测试后，我收到消息：

```
Started InternetExplorerDriver server (32-bit)
2.24.2.0
Listening on port 39133
Jul 03, 2012 3:46:24 PM org.apache.http.impl.client.DefaultRequestDirector tryExecute
INFO: I/O exception (java.net.SocketException) caught when processing request: Software caused connection abort: recv failed
Jul 03, 2012 3:46:24 PM org.apache.http.impl.client.DefaultRequestDirector tryExecute
INFO: Retrying request 
```

我附加 IEDriverServer，将其设置到此目录`E:\eclipse\WebDriver`并添加到路径。

为什么会出现此消息，我该如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:05:10.350

IEDriverServer.exe 使用 HTTP 服务器与语言绑定进行通信。当语言绑定启动服务器时，这个 HTTP 服务器需要一点时间来初始化并准备好接收来自语言绑定的通信。语言绑定会轮询，直到它从 IEDriverServer.exe 的 HTTP 服务器组件接收到有效响应。您看到的消息表明服务器尚未完成初始化，只是提供信息；可以放心地忽略它。

# javascript - 日历事件的可视化。以最大宽度布局事件的算法

> ID：11311410
> 
> 赞同：63
> 
> 时间：2012-07-03T12:56:01.153
> 
> 标签：javascript, algorithm, calendar, visualization

我需要您对算法的帮助（它将在客户端使用 javascript 开发，但没关系，我最感兴趣的是算法本身）布置日历事件，以便每个事件框具有最大宽度。请看下图：

![日历活动布局](../Images/cbc912b228b0cc0f1556b954ce0651b0.png)

Y轴是时间。因此，如果“测试事件”在中午开始（例如）并且没有更多的相交，它会占用整个 100% 的宽度。《每周回顾》与《翻滚的基督教青年会》和《安娜/阿米莉亚》有交集，但后两者没有交集，所以都占满了 50%。Test3、Test4 和 Test5 都相交，因此每个的最大宽度为 33.3%。但是 Test7 是 66%，因为 Test3 是 33% 固定的（见上文），所以它占用了所有可用空间，即 66%。

我需要一个算法来解决这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-07-04T06:57:09.513

1.  想象一个只有左边缘的无限网格。
2.  每个事件都是一个单元格宽，高度和垂直位置根据开始和结束时间固定。
3.  尝试将每个事件放在尽可能靠左的列中，不要与该列中的任何较早事件相交。
4.  然后，当放置每个连接的事件组时，它们的实际宽度将是该组使用的最大列数的 1/n。
5.  您还可以展开最左侧和最右侧的事件以使用任何剩余空间。

```
/// Pick the left and right positions of each event, such that there are no overlap.
/// Step 3 in the algorithm.
void LayoutEvents(IEnumerable<Event> events)
{
    var columns = new List<List<Event>>();
    DateTime? lastEventEnding = null;
    foreach (var ev in events.OrderBy(ev => ev.Start).ThenBy(ev => ev.End))
    {
        if (ev.Start >= lastEventEnding)
        {
            PackEvents(columns);
            columns.Clear();
            lastEventEnding = null;
        }
        bool placed = false;
        foreach (var col in columns)
        {
            if (!col.Last().CollidesWith(ev))
            {
                col.Add(ev);
                placed = true;
                break;
            }
        }
        if (!placed)
        {
            columns.Add(new List<Event> { ev });
        }
        if (lastEventEnding == null || ev.End > lastEventEnding.Value)
        {
            lastEventEnding = ev.End;
        }
    }
    if (columns.Count > 0)
    {
        PackEvents(columns);
    }
}

/// Set the left and right positions for each event in the connected group.
/// Step 4 in the algorithm.
void PackEvents(List<List<Event>> columns)
{
    float numColumns = columns.Count;
    int iColumn = 0;
    foreach (var col in columns)
    {
        foreach (var ev in col)
        {
            int colSpan = ExpandEvent(ev, iColumn, columns);
            ev.Left = iColumn / numColumns;
            ev.Right = (iColumn + colSpan) / numColumns;
        }
        iColumn++;
    }
}

/// Checks how many columns the event can expand into, without colliding with
/// other events.
/// Step 5 in the algorithm.
int ExpandEvent(Event ev, int iColumn, List<List<Event>> columns)
{
    int colSpan = 1;
    foreach (var col in columns.Skip(iColumn + 1))
    {
        foreach (var ev1 in col)
        {
            if (ev1.CollidesWith(ev))
            {
                return colSpan;
            }
        }
        colSpan++;
    }
    return colSpan;
} 
```

**编辑：**现在对事件进行排序，而不是假设它们已排序。

**Edit2：**如果有足够的空间，现在将事件向右扩展。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-01-30T08:01:57.567

接受的答案描述了一个包含 5 个步骤的算法。已接受答案的评论中链接的示例实现仅实现步骤 1 到 4。步骤 5 是关于确保最右边的事件使用所有可用空间。请参阅 OP 提供的图像中的事件 7。

我通过添加所描述算法的第 5 步来扩展给定的实现：

```
$( document ).ready( function( ) {
  var column_index = 0;
  $( '#timesheet-events .daysheet-container' ).each( function() {

    var block_width = $(this).width();
    var columns = [];
    var lastEventEnding = null;

    // Create an array of all events
    var events = $('.bubble_selector', this).map(function(index, o) {
      o = $(o);
      var top = o.offset().top;
      return {
        'obj': o,
        'top': top,
        'bottom': top + o.height()
      };
    }).get();

    // Sort it by starting time, and then by ending time.
    events = events.sort(function(e1,e2) {
      if (e1.top < e2.top) return -1;
      if (e1.top > e2.top) return 1;
      if (e1.bottom < e2.bottom) return -1;
      if (e1.bottom > e2.bottom) return 1;
      return 0;
    });

    // Iterate over the sorted array
    $(events).each(function(index, e) {

      // Check if a new event group needs to be started
      if (lastEventEnding !== null && e.top >= lastEventEnding) {
        // The latest event is later than any of the event in the 
        // current group. There is no overlap. Output the current 
        // event group and start a new event group.
        PackEvents( columns, block_width );
        columns = [];  // This starts new event group.
        lastEventEnding = null;
      }

      // Try to place the event inside the existing columns
      var placed = false;
      for (var i = 0; i < columns.length; i++) {                   
        var col = columns[ i ];
        if (!collidesWith( col[col.length-1], e ) ) {
          col.push(e);
          placed = true;
          break;
        }
      }

      // It was not possible to place the event. Add a new column 
      // for the current event group.
      if (!placed) {
        columns.push([e]);
      }

      // Remember the latest event end time of the current group. 
      // This is later used to determine if a new groups starts.
      if (lastEventEnding === null || e.bottom > lastEventEnding) {
        lastEventEnding = e.bottom;
      }
    });

    if (columns.length > 0) {
      PackEvents( columns, block_width );
    }
  });
});

// Function does the layout for a group of events.
function PackEvents( columns, block_width )
{
  var n = columns.length;
  for (var i = 0; i < n; i++) {
    var col = columns[ i ];
    for (var j = 0; j < col.length; j++)
    {
      var bubble = col[j];
      var colSpan = ExpandEvent(bubble, i, columns);
      bubble.obj.css( 'left', (i / n)*100 + '%' );
      bubble.obj.css( 'width', block_width * colSpan / n - 1 );
    }
  }
}

// Check if two events collide.
function collidesWith( a, b )
{
  return a.bottom > b.top && a.top < b.bottom;
}

// Expand events at the far right to use up any remaining space. 
// Checks how many columns the event can expand into, without 
// colliding with other events. Step 5 in the algorithm.
function ExpandEvent(ev, iColumn, columns)
{
    var colSpan = 1;

    // To see the output without event expansion, uncomment 
    // the line below. Watch column 3 in the output.
    //return colSpan;

    for (var i = iColumn + 1; i < columns.length; i++) 
    {
      var col = columns[i];
      for (var j = 0; j < col.length; j++)
      {
        var ev1 = col[j];
        if (collidesWith(ev, ev1))
        {
           return colSpan;
        }
      }
      colSpan++;
    }
    return colSpan;
} 
```

[http://jsbin.com/detefuveta/edit?html,js,output](http://jsbin.com/detefuveta/edit?html,js,output)上提供了一个工作演示。 有关扩展最右侧事件的示例，请参阅输出的第 3 列。

PS：这确实应该是对已接受答案的评论。不幸的是，我没有发表评论的特权。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-18T01:22:25.613

这是使用 Typescript 为 React 实现的相同算法。你必须调整它以适应你的需求（当然），但它应该对任何使用 React 的人有用：

```
// Place concurrent meetings side-by-side (like GCal).
// @see {@link https://share.clickup.com/t/h/hpxh7u/WQO1OW4DQN0SIZD}
// @see {@link https://stackoverflow.com/a/11323909/10023158}
// @see {@link https://jsbin.com/detefuveta/edit}

// Check if two events collide (i.e. overlap).
function collides(a: Timeslot, b: Timeslot): boolean {
  return a.to > b.from && a.from < b.to;
}

// Expands events at the far right to use up any remaining
// space. Returns the number of columns the event can
// expand into, without colliding with other events.
function expand(
  e: Meeting,
  colIdx: number,
  cols: Meeting[][]
): number {
  let colSpan = 1;
  cols.slice(colIdx + 1).some((col) => {
    if (col.some((evt) => collides(e.time, evt.time)))
      return true;
    colSpan += 1;
    return false;
  });
  return colSpan;
}

// Each group contains columns of events that overlap.
const groups: Meeting[][][] = [];
// Each column contains events that do not overlap.
let columns: Meeting[][] = [];
let lastEventEnding: Date | undefined;
// Place each event into a column within an event group.
meetings
  .filter((m) => m.time.from.getDay() === day)
  .sort(({ time: e1 }, { time: e2 }) => {
    if (e1.from < e2.from) return -1;
    if (e1.from > e2.from) return 1;
    if (e1.to < e2.to) return -1;
    if (e1.to > e2.to) return 1;
    return 0;
  })
  .forEach((e) => {
    // Check if a new event group needs to be started.
    if (
      lastEventEnding &&
      e.time.from >= lastEventEnding
    ) {
      // The event is later than any of the events in the
      // current group. There is no overlap. Output the
      // current event group and start a new one.
      groups.push(columns);
      columns = [];
      lastEventEnding = undefined;
    }

    // Try to place the event inside an existing column.
    let placed = false;
    columns.some((col) => {
      if (!collides(col[col.length - 1].time, e.time)) {
        col.push(e);
        placed = true;
      }
      return placed;
    });

    // It was not possible to place the event (it overlaps
    // with events in each existing column). Add a new column
    // to the current event group with the event in it.
    if (!placed) columns.push([e]);

    // Remember the last event end time of the current group.
    if (!lastEventEnding || e.time.to > lastEventEnding)
      lastEventEnding = e.time.to;
  });
groups.push(columns);

// Show current time indicator if today is current date.
const date = getDateWithDay(day, startingDate);
const today =
  now.getFullYear() === date.getFullYear() &&
  now.getMonth() === date.getMonth() &&
  now.getDate() === date.getDate();
const { y: top } = getPosition(now);

return (
  <div
    key={nanoid()}
    className={styles.cell}
    ref={cellRef}
  >
    {today && (
      <div style={{ top }} className={styles.indicator}>
        <div className={styles.dot} />
        <div className={styles.line} />
      </div>
    )}
    {groups.map((cols: Meeting[][]) =>
      cols.map((col: Meeting[], colIdx) =>
        col.map((e: Meeting) => (
          <MeetingItem
            now={now}
            meeting={e}
            viewing={viewing}
            setViewing={setViewing}
            editing={editing}
            setEditing={setEditing}
            setEditRndVisible={setEditRndVisible}
            widthPercent={
              expand(e, colIdx, cols) / cols.length
            }
            leftPercent={colIdx / cols.length}
            key={e.id}
          />
        ))
      )
    )}
  </div>
); 
```

[您可以在此处](https://github.com/tutorbookapp/tutorbook/blob/d227c5db22c9554d91197bc24d77758ae705c20b/components/calendar/index.tsx#L219)查看完整的源代码。我承认这是一个自以为是的实现，但它会帮助我，所以我会在这里发布它，看看它是否对其他人有帮助！

# forms - 表单构建器中实体小部件的默认值

> ID：11311418
> 
> 赞同：0
> 
> 时间：2012-07-03T12:56:32.080
> 
> 标签：forms, symfony, widget, entity, default-value

我已经看到很多关于如何在 Symfony2 中的表单上设置默认数据的主题，但是我没有找到任何关于如何使用查询构建器在实体小部件中设置默认数据的信息。我解释我的问题：

我有两个实体，通信和状态，具有多对一的关系。这是我的沟通课：

```
class Communication{

/**
 * @ORM\Id
 * @ORM\Column(name="Comm_CommunicationId")
 * @ORM\Column(type="integer")
 * @ORM\GeneratedValue(strategy="IDENTITY")
 */
protected $id;

    /**
 * @ORM\ManyToOne(targetEntity="Test\DatabaseBundle\Entity\Statut", inversedBy="communication")
 * @ORM\JoinColumn(name="Comm_Status", referencedColumnName="Capt_Code")
 */
private $statut;} 
```

这是我的状态类：

```
class Statut{

/**
 * @ORM\Id
 * @ORM\Column(name="Capt_CaptionId")
 * @ORM\Column(type="integer")
 * @ORM\GeneratedValue(strategy="IDENTITY")
 */
protected $id;
/**
 * @ORM\Column(name="Capt_Code", type="string")
 */
private $code;

/**
 * @ORM\Column(name="Capt_FR", type="string")
 */
private $codefr;} 
```

我已经构建了一个 CommunicationType 表单来允许我修改一个通信实体：

```
 public function buildForm(FormBuilder $builder, array $options)
{
    $builder      -> add('caseid','text')
                  -> add('statut','entity', array('class' => 'Test\DatabaseBundle\Entity\Statut',
                                                  'query_builder' => function(\Test\DatabaseBundle\Entity\StatutRepository $sr){
                                                        $res = $sr->getCodeOnly();                                                          
                                                        return $res; },
                                                  'property' => 'CodeFr',
                                                  'preferred_choices' => array(1),
                                                  ));} 
```

这是我的控制器：

```
public function ModifierAction($commid){
    $comm = $this -> getDoctrine()
                  -> getEntityManager()
                  -> getRepository('Test\DatabaseBundle\Entity\Communication')
                  -> find($commid);
    $form = $this -> createForm(new CommunicationType($em), $comm);
    ....
} 
```

我给你我的实体的设置者和获取者：通信：

```
/**
 * Set id
 *
 * @param integer $Id
 */
public function setId($Id)
{
    $this -> id = $Id;
}

/**
 * Get id
 *
 * @return integer 
 */
public function getId()
{
    return $this->id;
} 
```

状态实体：

```
/**
 * Set id
 *
 * @param integer $id
 */
public function setId($id)
{
    $this->id = $id;
}

/**
 * Get id
 *
 * @return integer
 */
public function getId()
{
    return $this->id;
}       /**
 * Set code
 *
 * @param string $code
 */
public function setCode($code)
{
    $this->code = $code;
}

/**
 * Get code
 *
 * @return string
 */
public function getCode()
{
    return $this->code;
}       /**
 * Add communication
 *
 * @param Acme\StoreBundle\Entity\Communication $communication
 */
public function addCommunication(\Test\DatabaseBundle\Entity\Communication $communication)
{
    $this->communication[] = $communication;
}

/**
 * Get communication
 *
 * @return Doctrine\Common\Collections\Collection 
 */
public function getCommunication()
{
    return $this->ccommunication;
}       public function __construct()
{
    $this->communication = new ArrayCollection();
} 
```

你说学说自动检查对象。您是否通常会在数据库中执行查询和搜索对象的当前值并将其作为默认选择传递？

有了这个我可以修改我的实体，但我不知道如何将我当前的实体状态值作为小部件“实体”的默认值。方法“getCodeOnly”在数据库中搜索状态码的值（Complete、Cancelled、InProgress、Deleted），并始终将 Complete 作为默认值传递。例如，如果一个实体作为 Cancelled 的值，当我使用此表单修改我的实体时，我想将 Canceled 作为默认值。

我不能使用 getData 和 preferred_choice 来访问状态值，因为 preferred_choice 需要一个数组作为参数而不是实体。

我还尝试使用不同的状态值构建一个数组并将其传递给我的表单，但是由于我的数据库有几个问题，它失败了。

如果有人有任何信息可以解决这个问题，我会很高兴看到它。

# android - phonegap 文件传输，文件名中有空格

> ID：11311423
> 
> 赞同：0
> 
> 时间：2012-07-03T12:56:46.597
> 
> 标签：android, cordova

我将 Cordova 1.9.0 用于 Android 应用程序。同样的代码，在 IOS 上运行良好。在 Android 上，我发现文件从远程位置传输到本地存在问题。问题出在文件名上：有人有空间。我试着做

```
.replace(" ","%20") 
```

但不起作用。它给了我以下错误

07-03 12:06:32.503: E/FileTransfer(337): java.io.FileNotFoundException: [http://www.mydomain.com/sa02](http://www.mydomain.com/sa02) -.jpg

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:04:12.677

FileTransfer 上传中存在一个错误，已为 1.9.0 签入修复。

[https://issues.apache.org/jira/browse/CB-978](https://issues.apache.org/jira/browse/CB-978)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T06:57:58.317

PhoneGap 1.9.0 和 2.0.0 会中断`fileTransfer.download()`带有空格的名称。在 PhoneGap 2.1.0 发布之前，目前的解决方法是

```
var source = encodeURI(file path here);
source = source.replace(/%/g,"%25"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T04:59:16.020

```
url = url.replace(/ /g,"%20"); 
```

# php - windows和linux之间的编码问题

> ID：11311425
> 
> 赞同：1
> 
> 时间：2012-07-03T12:56:50.357
> 
> 标签：php

这是我的代码

```
$data['rate_change_with'] = iconv('UTF-8', 'ISO-8859-15//TRANSLIT', $data['rate_change_with']);
$rate_change_with_index_array = preg_split('/\s+/', $data['rate_change_with']); 
```

在 Windows 机器上它工作得很好。但是在 ubuntu 12.04 上它会中断。preg_split 没有效果。$data['rate_change_with'] 类似于

```
 3.3 (spaces/tabs)  4.5 (spaces/tabs) 6.5 
```

请帮忙！

谢谢

编辑：空格和制表符是“不同”类型的空格/换行符混合，我不确定是什么。Edit2：不确定是否有帮助，但这是调试器中目标的屏幕截图：http: [//i.imgur.com/Mwria.jpg](http://i.imgur.com/Mwria.jpg)

Edit3：实际样本：[http](http://dl.dropbox.com/u/7998366/de.html) ://dl.dropbox.com/u/7998366/de.html 。最右边的列是问题

Edit4：更改`&nbsp;`为空格没有帮助！我究竟做错了什么 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T16:53:02.637

解决方案：

```
$data['rate_change_with'] = ereg_replace("[^A-Za-z0-9\-\./]", " ", $data['rate_change_with']) ;
$rate_change_with_index_array = preg_split('/\s+/', $data['rate_change_with']); 
```

基本上我无法弄清楚导致问题的存在的字符，所以上面只是删除了除白名单之外的所有字符，从而消除了那里存在的任何奇怪字符。

# regex - 如何在 vimscript 中转义搜索模式或正则表达式？

> ID：11311431
> 
> 赞同：5
> 
> 时间：2012-07-03T12:57:06.847
> 
> 标签：regex, search, escaping, vim

我正在 vimscript 中编写一个 vim 插件，我需要使用以下命令在另一个文件中搜索当前光标下的单词：

```
exec 'vimgrep /' . expand('<cword>') . '/g filename' 
```

我需要确保搜索模式中没有正则表达式或斜杠。

我怎样才能逃脱那些字符？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T13:13:03.580

正则表达式以 开头`\V`，它变成了“非常游手好闲”的模式；即只有以反斜杠开头的原子是特殊的。正是这个反斜杠然后通过`escape()`. 而且，由于此正则表达式由 分隔`/.../`，因此也必须转义正斜杠。

```
exec 'vimgrep /\V' . escape(expand('<cword>'), '/\') . '/g filename' 
```

如果您想让搜索区分大小写而不考虑`'ignorecase'`设置，请添加`\C`原子：`/\V\C...`

PS：如果`filename`可以包含特殊字符（如`%`），你也应该`fnameescape()`它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-30T06:54:03.650

`\V`当你可以使用它时是理想的。但在某些情况下，您可能希望转义字符串，然后将其包含在使用魔术字符的正则表达式中。

在这种情况下（[1](https://github.com/joeytwiddle/dotfiles/blob/master/.vim/plugin/replace.vim)），我一直在使用这样的函数：

```
function! EscapeForVimRegexp(str)
  return escape(a:str, '^$.*?/\[]')
endfunction 
```

我不确定这是否已经逃脱了它需要的一切，所以如果你发现任何失败的例子，请告诉我！

请注意，如果您的正则表达式将被 GNU grep 使用，而不是作为 Vim 正则表达式，那么您可能需要转义一些不同的东西：

```
function! EscapeForGNURegexp(str)
  return escape(a:str, '^$.*?/\[]()' . '"' . "'")
endfunction

" Example usage
command! FndFunc exec 'grep "\<' . EscapeForGNURegexp(expand('<cword>')) . '(" . -r' | cope 
```

# android - 我对 Android 应用资产中文件的读写有什么问题？

> ID：11311436
> 
> 赞同：0
> 
> 时间：2012-07-03T12:57:41.917
> 
> 标签：android, inputstream, bufferedreader, fileoutputstream, android-assets

先上代码：

```
AssetManager mgr = DeviceListActivity.this.getApplicationContext().getAssets();

try {
    Log.e("Glenn:", address);
    FileOutputStream fout = mgr.openFd("device/device_address.txt").createOutputStream();
    PrintWriter _fout = new PrintWriter(fout);
    _fout.println(address);
    Log.e("Glenn", address);

    _fout.close();
    fout.close();

    InputStream fin =  mgr.open("device/device_address.txt");
    BufferedReader br = new BufferedReader(new InputStreamReader(fin));
    address = br.readLine(); 

    try {
        Log.e("Glenn:", address);
    } catch (NullPointerException e) {
        e.printStackTrace();
    }
} catch (IOException e) {
    e.printStackTrace();
    Log.e("Glenn", "error with OutputStream");
} 
```

前两次调用打印的地址值`Log.e()`是正确的值，实际上是一个设备MAC地址。但是，当我试图测试从刚刚写入的文件中读取的地址值时，`NullPointerException`已在`Log.e()`调用中捕获。这意味着从文件中读取的值为`NULL`. 谁能指出代码有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T13:12:34.967

您不能写入应用的资产文件。您只有读权限，没有写权限。[AssetManager](http://developer.android.com/reference/android/content/res/AssetManager.html)仅提供从应用程序的资产文件夹中读取文件的方法。

# php - 使用 s3cmd 进行棘手的 stderr 重定向

> ID：11311444
> 
> 赞同：1
> 
> 时间：2012-07-03T12:58:11.690
> 
> 标签：php, bash, shell, s3cmd

我有一些奇怪的行为从 s3cmd 重定向标准输出和标准错误。例如：

```
$ touch test

$ s3cmd put test s3://non_existent_bucket
test -> s3://non_existent_bucket/test  [1 of 1]
 4 of 4   100% in    0s    88.17 B/s  done
ERROR: S3 error: 404 (NoSuchBucket): The specified bucket does not exist 
```

这个输出是（如果我没有弄错的话）部分标准输出和部分标准错误。如下所示：

```
$ s3cmd put test s3://non_existent_bucket 2> log
test -> s3://non_existent_bucket/test  [1 of 1]
 4 of 4   100% in    0s   120.11 B/s  done

$ cat log
ERROR: S3 error: 404 (NoSuchBucket): The specified bucket does not exist 
```

实际上，stderr 被重定向，但我们需要 stdout 和 stderr。让我们先试试标准输出：

```
$ s3cmd put test s3://non_existent_bucket > log
ERROR: S3 error: 404 (NoSuchBucket): The specified bucket does not exist

$ cat log 
```

它不是在命令之后写的，所以我理解 stdout 实际上是重定向（或其他东西），但它不会被日志文件捕获。我猜它以某种方式检测它是否连接到 tty，并且只在第一种情况下输出这种数据。

同样，如果我尝试重定向两个流，我会得到 stderr 但不会得到我需要的 stdout 输出：

```
$ s3cmd put test s3://non_existent_bucket >& log

$ cat log
ERROR: S3 error: 404 (NoSuchBucket): The specified bucket does not exist 
```

事实上，我需要做的是从 PHP 调用它并获得完整的输出。我只找到了执行命令和检索标准输出的方法，所以我这样做如下：

```
exec('s3cmd put test s3://non_existent_bucket 2>&1', $output); 
```

在这里，我没有从任何一个流中得到任何输出。我想我丢失了标准输出，因为 s3cmd 检测到它没有连接到 tty，但是标准错误我仍然不明白为什么它没有被捕获。

尝试使用 popen() 和 exec() 我得到了相同的结果。

我需要整个输出，或者至少是标准输出（尽管我猜进度信息会以某种方式被抓取）。任何想法？

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:20:32.740

s3cmd的[手册页](http://linux.die.net/man/1/s3cmd)详细说明了`--progress`/`--no-progress`标志，描述如下：

> 显示或不显示进度表。在 TTY（例如控制台或 xterm）上运行时，默认显示进度表。如果不在 TTY 上（例如输出重定向到某处或从 cron 运行），则默认不显示进度表。

所以看起来 s3cmd 会做一些事情，比如`isatty(0)`确定是否将进度详细信息写入 STDOUT，但如果你明确指定`--[no-]progress`它将强制一种行为或另一种行为。

尝试：

```
exec('s3cmd --progress put test s3://non_existent_bucket 2>&1', $output); 
```

# javascript - 当我试图隐藏 div 时，Jquery .next() 不起作用

> ID：11311447
> 
> 赞同：0
> 
> 时间：2012-07-03T12:58:32.447
> 
> 标签：javascript, jquery

如果在下拉列表中选择了某个值，我试图隐藏一个 div。我正在使用 `$(this).next('.selectNos').hide();`，但由于某种原因它无法完成这项工作。请有人指出我做错了什么？

```
$(document).ready(function() {
  $('#addCondition').on('change','.conOperatorC', function(e){       
    if ($('option:selected',this).text() == "In" || $('option:selected',this).text() == " Not In")  {
    alert($('option:selected',this).text());
    $(this).next('.selectNos').hide();
    }
    else {
    $(this).next(':select').hide(); 
    }
});
$('.conOperatorC').trigger('change');
});

<div id="addCondition">
<select id="conOperator0" name="conOperator0" class="standard_select conOperatorC" style="width:147px;">
      <option>blah</option><option>
      <option>Contains</option>
      <option>In</option>
      <option>Not In</option>
</select>

<input type="text" id="conValue0" name="conValue0" class="short_input" value="" style="width:147px;">

<div class="selectNos">
    <select id="conValuedd0" multiple="multiple" size="5" style="display: none; ">
       <option value="option1">blah</option>
       <option value="option2">blah</option>
    </select>
    <button type="button" class="ui-multiselect ui-widget ui-state-default ui-corner-all" aria-haspopup="true" tabindex="0" style="width: 225px; "><span class="ui-icon ui-icon-triangle-2-n-s"></span><span>Please Select</span></button>
</div>

</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T13:00:35.453

Method `next` selects exactly the **next** element. You'd better use [`siblings`](http://api.jquery.com/siblings/):

```
$(this).siblings('.selectNos').hide(); 
```

BTW, in order to get the selected value in your case you can use `this.value` instead of `$('option:selected', this).text()`.

# java - 解析具有单行和多行数据的文件

> ID：11311452
> 
> 赞同：0
> 
> 时间：2012-07-03T12:58:40.513
> 
> 标签：java, parsing, file-io

我有一个文本文件转储，需要将其转换为分隔文件。该文件包含一系列格式如下的“记录”（因为没有更好的词）：

```
User: abc123 
Date: 7/3/12
Subject: the foo is bar
Project: 123456
Problem: foo bar in multiple lines of text
Resolution: foo un-barred in multiple lines of text

User: abc123 
Date: 7/3/12
Subject: the foo is bar
Project: 234567
Problem: foo bar in multiple lines of text
          which may include <newline> and 
          extend to multiple lines of text
Resolution: foo un-barred in multiple lines of text

... 
```

现在，使用 Java，我使用 StringBuffer 逐行读取此文件，根据一系列`if(inputLine.toLowerCase().startsWith("user:"))`逻辑将行解析为单个字段，以将最终分隔行输出到文本文件。

但是，字段`Problem`和`Resolution`是自由格式的，并且*可能*是多行的。我正在尝试做一些会创建两个字符串的事情：附加所有行之后`Problem:`并结束于，`Resolution:`并附加所有行之后开始`Resolution:`和结束于`Form:`。

我已经查看[了这个链接](https://stackoverflow.com/questions/2509170/is-there-an-easy-way-to-concatenate-several-lines-of-text-into-a-string-without)和[这个链接](https://stackoverflow.com/questions/878573/java-multiline-string)，这表明这`StringBuilder`可能是一种合适的方式来做到这一点......但是，我不太确定如何构建逻辑。

**编辑：** 因为我正在逐行阅读，所以我很难理解如何编码

```
<pseudocode>
If the line starts with "Problem" extract the charactes after "Problem" else
if the PRIOR line starts with "problem" and the current line doesnt start with "resolution" then append characters in line to prior line
etc.
</pseudocode> 
```

但是，如果有第三行“问题......？我只是无法想象如何让它工作。

有什么想法或替代方法可以实现我想要的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:15:41.823

嗨，如果我正确理解了您的问题，那么这些方面的东西应该可以工作：

```
 StringBuilder problemDesc = new String....;
    if(inputLine.toLowerCase().startsWith("problem:")){
       problemDesc.append(inputLine);
       while(!inputLine.toLowerCase().startsWith("resolution:"){
           //read next line into inputline;
           problemDesc.append(inputline);
       }
       //deal with problem description here and inputLine now has the line with
       //Resolution in it Repeat same logic for retrieving the resolution value
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T13:17:13.903

```
StringBuilder problem;
StringBuilder resolution;

//...

// If the current line starts with "Problem: "
if(inputLine.toLowerCase().startsWith("Problem: ")) {
   // Continue appending to the string builder until the delimiting line is reached
   while(!inputLine.toLowerCase().startsWith("Resolution") {
      problem.append(inputLine);
   }
}

// Something similar for resolution 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T13:20:53.557

我将在这里大胆一点，并建议使用真正的解析器生成器，例如[JavaCC](http://javacc.java.net/)。

您在问题中提到只有两个字段是自由格式的，但也许将来可能会添加其他字段作为自由格式？当添加第三、第四或第 n 个特殊情况时，硬编码两个字段以不同方式处理可能会产生很多副作用。

JavaCC 将在运行时为您生成一个真正的解析器，而不需要任何额外的 jar，甚至更好的是，它允许您考虑您的解析规则，以便将来的特殊情况不会给您带来任何痛苦。

# ruby - 使用 Ruby minitest 创建测试套件

> ID：11311454
> 
> 赞同：6
> 
> 时间：2012-07-03T12:58:49.193
> 
> 标签：ruby, unit-testing, minitest

我正在将我的测试移动到新的 ruby​​ minitest 库，并且我正在寻找与旧的 Test::Unit::TestSuite 类对应的类。我在网上找到的所有示例都显示了单个测试用例，但我有：

```
require 'minitest/unit/testsuite'
require 'minitest/unit/ui/console/testrunner'

require 'tests/fs_session_test'
require 'tests/resource_test'
require 'tests/rest_session_test'
require 'tests/server_test'

class AllTests
  def self.suite
    suite = Test::Unit::TestSuite.new
    suite << FSSessionTest.suite
    suite << ResourceTest.suite
    suite << RESTSessionTest.suite
    suite << ServerTest.suite
  end
end

Test::Unit::UI::Console::TestRunner.run(AllTests) 
```

我不断收到测试套件要求的 LoadError 。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-03T14:41:11.337

minitest中没有`Test::Unit::TestSuite`。假设您的测试如下所示，您有多种选择：

```
require 'minitest/unit'
require 'minitest/autorun'

class FSSessionTest < MiniTest::Unit::TestCase
  def test_the_truth
    assert true
  end
end 
```

这里的重要部分是在封闭脚本退出之前运行它可以找到的所有测试`require 'minitest/autorun'`。`at_exit`我发现这是运行我的测试套件的最简单方法。

## 使用 Rake 运行测试

例如，您可以创建一个运行目录中所有测试的`Rakefile`using ：[`Rake::TestTask`](http://rake.rubyforge.org/classes/Rake/TestTask.html)`test/`

```
require 'rake'
require 'rake/testtask'

Rake::TestTask.new do |t|
  t.pattern = 'tests/**/*_test.rb'
end 
```

运行测试

```
$ rake test 
```

## 需要在 Ruby 文件中进行测试

如果你经常只需要某些测试，你也可以写一个测试脚本，比如

```
require './tests/fs_session_test'
require './tests/resource_test'
require './tests/rest_session_test'
require './tests/server_test' 
```

您还可以`require 'minitest/autorun'`在此文件的顶部包含以确保运行测试，但无论如何我都会在每个测试文件的顶部执行此操作。运行套件

```
$ ruby test.rb 
```

## 结果

两种方法都为您提供相同的输出，例如

```
Run options: --seed 5559

# Running tests:

....

Finished tests in 0.001909s, 2095.3379 tests/s, 2095.3379 assertions/s.

4 tests, 4 assertions, 0 failures, 0 errors, 0 skips 
```

因为 mintiest 使用`at_exit`，所以在运行测试之前确实不需要对测试进行分组。你永远不会只得到一个测试的输出。当然，除非您自己运行测试，例如使用

```
$ ruby tests/fs_session_test.rb 
Run options: --seed 43007

# Running tests:

.

Finished tests in 0.000672s, 1488.0952 tests/s, 1488.0952 assertions/s.

1 tests, 1 assertions, 0 failures, 0 errors, 0 skips 
```

# ruby-on-rails - 如何从视图中移动带有 args 的 instance_method？

> ID：11311457
> 
> 赞同：0
> 
> 时间：2012-07-03T12:58:56.173
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model-view-controller, methods

在我看来，我有以下行代码：

```
<td> Model.some_instance_method(args) </td> 
```

我想澄清这一点。下面我粘贴整个代码。

[https://gist.github.com/3039144](https://gist.github.com/3039144)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:10:45.797

你没有说清楚你的目标是什么。假设您只是希望它是更惯用的 Rails 代码，这样的事情会更干净：

```
class PinnedContent < ActiveRecord::Base

  def reports
    PinnedContentReport.where("pinned_content_id = ?", self.id).count
  end

end 
```

在您看来：

```
<% @reported_pinned_contents.each do |reported_pinned_content| %>
    <tr>
        <td><%= reported_pinned_content.id %></td>
        <td><%= reported_pinned_content.reports %></td>
        <td></td>
    </tr>
<% end %> 
```

# python - 如何查询 GAE 数据存储以呈现模板（新手级别）

> ID：11311461
> 
> 赞同：0
> 
> 时间：2012-07-03T12:59:15.693
> 
> 标签：python, database, google-app-engine, google-cloud-datastore

我是编程新手，我正在尝试掌握 GAE 数据存储的概念。我正在尝试构建一个应用程序来轻松编写合同（[http://contractpy.appspot.com](http://contractpy.appspot.com/)）。目前，我正在通过这种方式传递从 URL 呈现合同模板所需的所有值：

```
self.redirect('/your_contract?person=%s&nacionality=%s&profession=%s&maritalStatus=%s&SSN=%s&driverLicense=%s&email=%s&witness=%s&owner=%s&contractType=%s&address=%s' % (person_name, user_nacionality, user_profession, user_maritalStatus, user_SSN, user_driverLicense, user_email,
#witness, owner, contractType, address)) 
```

但是这样做，它仍然仅限于一个人（而且，在未来，我需要在同一个合同中呈现几个人的数据）。

而不是这样做，我想使用 GAE 数据存储查询来填充模板“your_contract.html”的变量值。

我知道这是一个简单的问题，但 GAE 数据存储区对我来说完全是晦涩难懂的（我还没有掌握“数据存储区的禅宗”，但我了解一点 SQL）而且我现在正在学习 OOProgramming。我阅读[了这篇文章](https://developers.google.com/appengine/articles/modeling)，并尝试遵循[此示例](https://developers.google.com/appengine/docs/python/gettingstarted/usingdatastore)（Google guess_booK 示例），但对于这个大脑来说，它们还不够。那么，执行此查询的最佳方法是什么，在一个模板中呈现多个人员数据？（类人在下面的代码中）

我是这样想的：通过 URL 传递一个列表，其中包含每个人的一个数据（例如：驾驶执照号码）：

```
self.redirect('/your_contract?driverLicense=%s' % (driverLicenseList)) 
```

并且，在处理程序“your_contract”中，使用“diverLicenseList”的值（在与列表交互之后）查询 GAE 数据存储，如下所示：

```
x = self.request.get('SSN')
contractingParty = db.GqlQuery("SELECT FROM Person WHERE SSN IS x") 
```

这是正确的道路吗？提前感谢您的帮助！

我的原始代码（在进行 GAE 查询之前）在这里：

```
# -*- coding: utf-8 -*-
# -*- coding: utf-8 -*-
#!/usr/bin/env python
#
# Copyright 2007 Google Inc.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

import os

import webapp2

import jinja2

jinja_environment = jinja2.Environment(autoescape=True,
    loader=jinja2.FileSystemLoader(os.path.join(os.path.dirname(__file__), 'templates')))

import re

from google.appengine.ext import db

USER_RE = re.compile(r"^[a-zA-Z0-9_ -]{3,20}$")
def valid_person(person):
    return USER_RE.match(person)

PASS_RE = re.compile(r"^.{3,20}$")
def valid_SSN(SSN):
    return PASS_RE.match(SSN)

EMAIL_RE = re.compile(r"^[\S]+@[\S]+\.[\S]+$")
def valid_email(email):
    return EMAIL_RE.match(email)

import time

import datetime

def dateToday():
    today = datetime.datetime.today()
    todayDay = str(today.day)
    todayMonth = str(today.month)
    monthExt = {'1':' January ', '2':'February', '3':' March ', '4':'April', '5':'May', '6':'June', '7':' July ', '8':'August', '9':'September', '10':'October', '11':'November ', '12':'December'}
    todayYear = str(today.year)
    return(todayDay + ' of  ' + monthExt[todayMonth] + ' of ' + todayYear)

class MainHandler(webapp2.RequestHandler):
    def get(self):
        template_values = {"person": "",
                                       "SSN": "",
                                       "driverLicense": "",
                                       "email":"",
                                       "person_error": "",
                                       "SSN_error": "",
                                       "driverLicense_error": "",
                                       "address": "",
                                       "email_error": ""}
        template = jinja_environment.get_template('index.html')
        self.response.out.write(template.render(template_values))

    def post(self):
        person_name = self.request.get("person")
        user_nacionality = self.request.get('nacionality')
        user_profession = self.request.get('profession')
        user_maritalStatus = self.request.get('maritalStatus')
        user_SSN = self.request.get('SSN')
        user_email = self.request.get('email')
        user_driverLicense = self.request.get('driverLicense')
        person_error = ""
        SSN_error = ""
        driverLicense_error = ""
        geted_email_error = ""
        address = self.request.get('address')
        contractType = self.request.get("contractType")
        owner = self.request.get("owner")
        witness = self.request.get("witness")

        if (person_name and valid_person(person_name)) and (user_SSN and valid_SSN(user_SSN)) and ((not user_email) or (user_email and valid_email(user_email))):
            a = People(firstName = person_name,
                                   nacionality = user_nacionality,
                                   maritalStatus = user_maritalStatus,
                                   profession = user_profession,
                                   SSN = int(user_SSN),
                                   driverLicense = int(user_driverLicense)
                                   #address = user_address
                                   )
            a.put()
            self.redirect('/your_contract?person=%s&nacionality=%s&profession=%s&maritalStatus=%s&SSN=%s&driverLicense=%s&email=%s&witness=%s&owner=%s&contractType=%s&address=%s' % (person_name, user_nacionality, user_profession, user_maritalStatus, user_SSN, user_driverLicense, user_email,
witness, owner, contractType, address))

        else:
            if not person_name or not valid_person(person_name):
                person_error = "Oh no!!! this person name isn't valid!"
            if not user_SSN or not valid_SSN(user_SSN):
                SSN_error = "Oh no!!! SSN isn't valid!"
            if user_email and not valid_email(user_email):
                geted_email_error = "Oh no!!! e-mail isn't valid!"
            template_values = {"person": person_name,
                                "nacionality": user_nacionality,
                                "maritalStatus": user_maritalStatus,
                                "profession": user_profession,
                                "SSN": user_SSN,
                                "driverLicense": user_driverLicense,
                                "email": user_email,
                                "person_error": person_error,
                                "SSN_error": SSN_error,
                                "driverLicense_error": user_driverLicense,
                                "address": address,
                                "email_error": geted_email_error}
            template = jinja_environment.get_template('index.html')
            self.response.out.write(template.render(template_values))

class your_contractHandler(webapp2.RequestHandler):
    def get(self):
        geted_person_name = self.request.get('person')
        geted_user_nacionality = self.request.get("nacionality")
        geted_user_profession = self.request.get("profession")
        geted_user_maritalStatus = self.request.get("maritalStatus")
        geted_user_SSN = self.request.get('SSN')
        geted_user_email = self.request.get('email')
        geted_user_driverLicense = self.request.get('driverLicense')
        geted_person_error = ""
        geted_SSN_error = ""
        geted_driverLicense_error = ""
        geted_address = self.request.get('address')
        geted_owner = self.request.get("owner")
        geted_witness = self.request.get("witness")
        geted_contractType = self.request.get("contractType")
        geted_dateToday = dateToday()
        your_contract = jinja_environment.get_template('your_contract.html')
        your_contract_values = {"person":geted_person_name,
                                "nacionality":geted_user_nacionality,
                                "maritalStatus": geted_user_maritalStatus,
                                "profession": geted_user_profession,
                                "SSN":geted_user_SSN,
                                "driverLicense":geted_user_driverLicense,
                                "address":geted_address,
                                "email":geted_user_email,
                                "contractType":geted_contractType,
                                "dateContract":geted_dateToday,
                                }
        template = jinja_environment.get_template('index.html')
        self.response.out.write(your_contract.render(your_contract_values))

class People(db.Model):
    name = db.StringProperty(required = True)
    nacionality = db.StringProperty(required = True)
    maritalStatus = db.StringProperty(required = True)
    profession = db.StringProperty(required = True)
    SSN = db.IntegerProperty(required = True)
    driverLicense = db.IntegerProperty(required = True)
#    address = db.PostalAdressProperty(required = True)
#    condition = db.StringProperty(required = False, choices=set(["buyer", "seller", "renter", "owner", "witness"]))

##class Acts(db.Model):
##    firstPart = db.StringProperty(required = True)
##    secondPart = db.StringProperty(required = True)
##    contractNumber = db.IntegerProperty(required = False)
##    contractDate = db.DateProperty(auto_now_add=True)
##    contractDraft = db.TextProperty(required = True)

app = webapp2.WSGIApplication([('/', MainHandler), ('/your_contract', your_contractHandler)],
                              debug=True) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T05:29:07.763

从设计开始，您的代码中有几个问题。

您应该有两个类存储在数据存储中（合同和人员）（如果您使用 NDB，您可以与人员的结构化属性签订合同，但我们会保持简单。）

合同可以包含合同所需的任何东西，然后有一个 people = ListProperty(db.Key)

在你 put() 一个模型实例之后， db.key() 将被填充密钥。这就是您应该传递给代码的其他部分并存储在上面的 ListProperty 中的内容。

例如，在 POST 之后的重定向中，您将拥有类似 self.redirect('/your_contract?person=%s' % a.key()')

要加载存储的人员，您将执行以下操作： person = db.get(self.request.get('person'))

如果您要传递多个人键，则必须仔细检查 webob 文档，了解如何在查询字符串中使用相同键读取多个值，但我知道它会以列表形式返回。

希望这可以帮助

# android - setRetainInstance 不适用于所有 UI 元素？

> ID：11311463
> 
> 赞同：3
> 
> 时间：2012-07-03T12:59:22.307
> 
> 标签：android, android-asynctask, fragment

我正在使用 Sherlock ActionBar 库，并为我的应用程序的主要布局使用选项卡和片段。其中一个片段启动了一个 AsyncTask，现在当设备的方向发生变化时，我希望任务继续运行。所以我开始在片段上使用 setRetainInstance(true) 方法。一切正常，当我切换方向时，任务会继续按预期运行并正确更新 ListView。

但是我的布局也有一些按钮，我在运行任务时禁用和启用它们。问题是，当设备切换方向时，我的布局中的 ListView 和 EditText 正在保存，但我的按钮没有！而且因为我使用了 setRetainInstance(true)，所以我不能使用 Bundle savedInstanceState 方法，它总是返回 null。

那么iIsave如何保存完整的fragment UI和Task呢？为什么 setRetainInstace 不保存按钮？

# iis - 配置 IIS 以全局访问已部署的网站（通过 WAN）[注意：我有静态 IP]

> ID：11311464
> 
> 赞同：2
> 
> 时间：2012-07-03T12:59:22.443
> 
> 标签：iis, windows-7, iis-7, lan, wan

我对 IIS 完全陌生。

我对如何配置 IIS 有非常基本的了解。

今天，我需要通过已部署在本地 IIS 中的WAN（通过**来自世界各地的任何 PC 的互联网）访问****全球网站。**

 **网站=>`SilverLightBusinessApplicationWeb`

您可以在下面的屏幕截图中看到它可以很好地在**LAN中打开。**

所以我只寻找如何在**WAN**中打开它？

所以任何人都请建议我一个简单的步骤或说明。

您可以看到 Internet 信息服务 (IIS) 管理器的两个屏幕截图。

**注意： 1\. 我也有静态 IP 2\. 我在 Windows-7 中使用 IIS7.0**

太感谢了…..

**1\. 屏幕截图1**

![在此处输入图像描述](../Images/3511ef12aca2a9123f6f89f5741a7fb0.png)

**2\. 屏幕截图2**

![在此处输入图像描述](../Images/65c73283c8bcc71c7b19d92d36e15e86.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T13:06:28.940

这个问题在 ServerFault 上可能会更好。但是，如果您在计算机上设置了所有内容，则只需打开端口 80 并将其转发到主机并设置域或通过外部 IP 直接访问站点，前提是您的绑定设置正确。

**编辑**从安全的角度来看，最好的做法是按照[Germann 的说法](https://stackoverflow.com/questions/11311464/configure-iis-to-access-deployed-website-globally-through-wan-note-i-have-st/11311577#comment14908822_11311577 "德国人说")，将面向公众的 Web 服务器放在自己的 DMZ 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:22:29.443

终于我明白了…………我遵循的步骤是……

1.  在路由器上定义端口转发，我在路由器的转发页面中输入了以下值。

    --我的电脑的IP地址

    --打开的端口号（你可以看到屏幕截图**Brouse*:80(http)**显示端口 80
    对我的 IIS 上的网站开放。

2.  最后我在我的 IIS 上打开了网站：。**http://mystaticip:port/xyzfolder/xyz.html**。**

# android - 不是正方形的 9 路径可绘制

> ID：11311465
> 
> 赞同：0
> 
> 时间：2012-07-03T12:59:27.577
> 
> 标签：android, drawable, nine-patch

我需要为 MapView 创建非方形图钉。我需要在图钉内放一张图片。当我使用方形引脚时，我只需在 9 路径编辑器中制作 9 路径可绘制并设置必须放置图片的区域。

但是我必须怎么做才能在非方形drawable中设置内容区域？

[http://s7.postimage.org/5hs3h772f/polygon_9path_example.png](http://s7.postimage.org/5hs3h772f/polygon_9path_example.png)

# ms-access - 使用 VBA 将 MS Access 报告打印到 .xps 文件

> ID：11311466
> 
> 赞同：3
> 
> 时间：2012-07-03T12:59:28.170
> 
> 标签：ms-access, ms-access-2003, xps-generation

我正在使用 MS Access 2003 并且每天早上必须分发七个不同的报告，我目前通过将每个报告打印到 XPS 文件来手动执行此操作。每个报告的默认打印机已设置为 XPS 文件，我尝试了以下代码：

```
DoCmd.OpenReport ("rptDaily_1of7")
DoCmd.PrintOut acPrintAll,1,,acHigh,1 
```

当我使用它时，它会打开一个另存为框，但 .tif 是“另存为类型”字段中的唯一选项。即使不是这样，理想情况下我想将文件路径和名称作为参数发送并让它处理整个过程（这样我就可以使用循环来生成所有七个文件，只需按一下按钮）。我希望有另一个命令可以用来执行此操作，或者可能是另一种方法。请注意，这不是我的机器，我没有管理员权限来安装其他任何东西（如 pdf 生成器等）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T21:08:36.690

您可以使用[Stephen Lebans 的 ReportToPDF](http://www.lebans.com/reporttopdf.htm)将报告创建为 PDF 文件。

这可以很容易地自动化（下载中有一个带有示例代码的 MDB），您不必安装任何东西。
它带有两个 DLL，您需要将它们放入与 MDB/MDE 相同的文件夹中，仅此而已。无需安装/DLL 注册，只需将这两个 DLL 与您的 MDB/MDE 一起分发。

我们在工作中使用它每天从 Access 2003 打印数千份报告。

# objective-c - 像 Java 中的简单 int 到 NSString 转换？

> ID：11311467
> 
> 赞同：0
> 
> 时间：2012-07-03T12:59:29.677
> 
> 标签：objective-c, nsstring, int

有没有什么简单的方法可以在 Objective-C 中用 int 初始化 String，例如在 Java 中：

```
String myStr = 42 + ""; 
```

或者我必须做

```
[NSString stringWithFormat:@"%d", 42]; 
```

每次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:06:20.010

你也可以使用这个`NSNumber`类：

```
NSNumber *number = [[NSNumber alloc] initWithInteger: val];
NSString *string = [number stringValue]; 
```

也许不会更短，但最终可能会更快。
您也可以像所说的那样创建一个辅助方法，而不是使用比该`stringWithFormat:`方法更多的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:01:31.907

Yes you have to do

```
[NSString stringWithFormat:@"%d", 42]; 
```

for Integer to string conversion.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T14:23:49.637

使用一个常量，例如您的示例中的 42，您可以编写

```
NSString *myString = @"42"; 
```

使用变量或表达式，您可以编写

```
[NSString stringWithFormat:@"%d", myValue]; 
```

# sql - Trac - SQL lite 查询中的 WHERE 语句对于所有元组都是“假”的，尽管它不应该是

> ID：11311470
> 
> 赞同：0
> 
> 时间：2012-07-03T12:59:48.283
> 
> 标签：sql, sqlite, trac

Trac 中的以下 SQL Lite 语句

```
 SELECT 
  id,
  changetime / 1000000 as 'MODIFIED',
  strftime('%s',"now") as 'NOW',
  ((strftime('%s',"now")) - (changetime / 1000000)) as 'DIFF'
  FROM ticket
  WHERE (CAST(((strftime('%s',"now")) - (changetime / 1000000)) AS NUMERIC) < 86400.0) 
```

结果如下输出：

![在此处输入图像描述](../Images/931773c50b3fc54129088e5799e6b858.png)

“changetime”是来自 Trac 的一个字段（类型：int64）。我想要实现的是所有更改时间在一周内的票都被选中。我遇到了严重的问题，因为 changetime 是 int64 并且 strftime 返回了不同的东西。这就是为什么我要除以 1000000。

现在我有一个问题，即 WHERE 语句始终是错误的，正如您在屏幕截图中看到的那样，我有它适用的票证（暂时删除 WHERE 子句后制作的屏幕截图）。

有人知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:29:51.477

```
SELECT
  id,
  changetime as modified,
  strftime('%s',"now") as date,
  (strftime('%s',"now") - changetime / 1000000) as 'DIFF'
FROM ticket
WHERE (CAST(strftime('%s',"now") AS NUMERIC) - changetime / 1000000) < 86400.0 
```

有效（在 Trac 0.11 上使用分隔符 1 而不是 1.000.000 进行测试），因为您必须在继续计算之前进行类型转换 - 无法`strftime`立即使用日期字符串进行计算。

请注意，一些特殊的列名（'created'、'modified'、'date'、'time'）会触发自动格式化为日期和/或时间。TicketQuery 在这方面工作得更好，因为您可以更自然地指定时间限制`changetime=1w..now`，但您隐含地要求 TracReports 域中的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T17:02:07.667

我在 Trac 中有一份报告，其中包含在过去 7 天内更改的票证，我正在使用以下 SQL 处理 where 子句。

```
from ticket_change tc 
where tc.Time > strftime('%s',CURRENT_DATE-7) +0
and tc.Time < strftime('%s',CURRENT_DATE) +0 
```

# html - 不支持图像映射的地方？

> ID：11311471
> 
> 赞同：0
> 
> 时间：2012-07-03T12:58:50.137
> 
> 标签：html, image, compatibility

我想知道是否我创建了一个带有图像映射的 html 电子邮件，它无法正确显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:07:59.903

CampaignMonitor has a [handy chart showing email client compatibility](http://www.campaignmonitor.com/blog/post/3475/image-maps-in-html-email/) for image maps. In short, they work with a large number of email services but their use is discouraged for other reasons.

# java - 如何让我的应用程序等待 mvp4g 视图中的特定时间？

> ID：11311474
> 
> 赞同：0
> 
> 时间：2012-07-03T12:59:57.913
> 
> 标签：java, gwt, sleep, wait, mvp4g

我正在使用 GWT + MVP4G，在我的应用程序中，我想让我的应用程序等待来自 mvp4g 视图的特定时间量。我试过定时器，但它不起作用。如果有人知道，请建议我一些解决方案......在此先感谢......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:29:12.747

您也可以尝试 GWT 中的调度程序，但 GWT 计时器似乎更合适。

```
Scheduler.get().scheduleFixedDelay(yourCommand, msToWait); 
```

# android - 如何删除位置更新

> ID：11311475
> 
> 赞同：6
> 
> 时间：2012-07-03T13:00:00.187
> 
> 标签：android

由于更新之间的最短时间，它会在 1 秒后一次又一次地显示位置更新，一旦我得到位置更新，我怎么能停止这个

```
private static final long MINIMUM_DISTANCE_CHANGE_FOR_UPDATES = 1000; // in Meters
private static final long MINIMUM_TIME_BETWEEN_UPDATES = 1*1000*60; // in Milliseconds
protected LocationManager locationManager;

LocationManager locationManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
locationListener = new MyLocationListener();

locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,MINIMUM_TIME_BETWEEN_UPDATES,MINIMUM_DISTANCE_CHANGE_FOR_UPDATES, locationListener);

private class MyLocationListener implements LocationListener
     {

         public void onLocationChanged(Location location) 
         {
             String message = String.format(
                     "New Location \n Longitude: %1$s \n Latitude: %2$s",
                     location.getLongitude(), location.getLatitude(),location.getTime()
             );
             Toast.makeText(MyService.this, message, Toast.LENGTH_LONG).show();
         }

         public void onStatusChanged(String s, int i, Bundle b) {}

         public void onProviderDisabled(String s) {}

         public void onProviderEnabled(String s) {}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T13:04:14.470

```
locationManager.removeUpdates(locationListener); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T13:05:19.397

要删除更新，您必须致电

```
locationManager.removeUpdates(<yourLocationListener>); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T13:09:06.100

Try this :

```
 locationManager.removeUpdates(locationListener);
 locationManager= null; 
```

# python - 在定义的轴上使用最大值索引

> ID：11311477
> 
> 赞同：3
> 
> 时间：2012-07-03T13:00:06.093
> 
> 标签：python, numpy

我想在矩阵“A”的每一行的最大值的相同索引处提取数组“B”的值。为了找到索引，我使用了 numpy 函数“numpy.argmax”，如下所示：

```
>>> A=numpy.asarray([[0,1,6],[3,2,4]]);A
array([[0, 1, 6],
       [3, 2, 4]])
>>> argA=numpy.argmax(A,axis=1);argA
array([2, 2]) 
```

问题是我不知道如何使用“argA”来提取数组“B”中的值

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T14:32:03.983

中的每个条目`argA`对应于相应行内最大值的索引位置。这些行不是显式的（由于使用`axis=1`），而是对应于每个条目的索引。因此，您需要添加它们以获取您所追求的元素。

```
>>> A[[0,1], argA]
array([6, 4]) 
```

所以：

```
>>> B
array([[ 9,  8,  2],
       [ 3,  4,  5]])
>>> B[[0,1], argA] = 84,89
>>> B
array([[ 9,  8, 84],
       [ 3,  4, 89]]) 
```

概括使用：

```
>>> B[np.arange(A.shape[0]),argA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:07:15.250

您可以直接使用数组作为索引 - 这实际上很简单：

```
B[:, arga] 
```

例如：

```
>>> A[:,argA]
array([[6, 6],
       [4, 4]]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T13:17:23.257

这可能看起来有点低效，但您可以使用：

```
A.take(argA, axis=1).diagonal() 
```

而不是`A.take`你可以使用`A[:, argA]`但`take`更明确的轴。

您可以使用`ravel_multi_index`转换为平面索引：

```
A.take(np.ravel_multi_index((np.arange(len(argA)), argA), A.shape)) 
```

# jquery - 为什么我的 jQuery 选择器不工作？

> ID：11311479
> 
> 赞同：1
> 
> 时间：2012-07-03T13:00:09.160
> 
> 标签：jquery, css, selector

我正在编写一个替换两个图像的简单脚本。第一个可以正常交换，但第二个由于某种原因不会触发。我想念的东西一定很简单。也许是“div.singleTint img”选择器？有人可以看一下并仔细检查我的工作吗？

这是我的 HTML：

```
 <div id="beerGlassOverlay">
    <img src="<?php bloginfo('template_directory'); ?>/images/beerOverlay.png" class="glassreplace">
</div>

<li class="image-rollover">
    <a href="http://brasco.co/Mims/meet-the-breweries/miller-beers/" target="_blank">
        <img width="177" height="186" src="http://brasco.co/Mims/wp-content/uploads/2012/05/miller1.png" class="attachment-full wp-post-image" alt="miller" title="miller" />
    </a>
    <div class="singleTint">
        <img width="279" height="524" src="http://brasco.co/Mims/wp-content/uploads/shrekBeer.png" class="attachment-full" alt="shrekBeer" title="shrekBeer" />  
    </div><!-- End singleTint-->
</li> 
```

这是我的 jQuery：

```
$('li.image-rollover').mouseover(function() {   
$('img.glassreplace').attr({//Change the src and size info on hover         
    src: ('div.singleTint img', this).src,
    width: '100%',
    height: '100%'
    });
});` 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T13:02:44.957

change this:

```
src: ('div.singleTint img', this).src, 
```

to:

```
src: $('div.singleTint img', this).attr('src'), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:03:16.687

`src: ('div.singleTint img', this).src,` should become `src: $('div.singleTint > img', this).attr("src"),`

(I've added child selector - `>`)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T13:04:15.363

您是否缺少代码第三行（$）上的 jQuery 对象引用？

```
 $('li.image-rollover').mouseover(function() {   
 $('img.glassreplace').attr({//Change the src and size info on hover         
    src: $('div.singleTint img', this).src, //Added the jQuery object in front of the parenthesis.
    width: '100%',
    height: '100%'
    });
 }); 
```

# android - 小部件中的 ListView + GridView

> ID：11311480
> 
> 赞同：4
> 
> 时间：2012-07-03T13:00:09.590
> 
> 标签：android, android-listview, android-appwidget, android-gridview

我需要创建一个包含 2 部分的小部件（用于主屏幕）：首先 - 顶部的 ListView，它必须填充 50% 的小部件，第二部分是 GridView，它必须低于第一部分，并且必须占据 50% 的位置。

我试图找到一些教程，但不能，所以如果有人这样做，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:06:39.813

你说的是简单的布局吗？Android 中的“小部件”一词有多种含义。如果您的意思是布局，您可以使用`LinearLayout`'`android:layout_weight`属性为每个分配 50% 的空间。

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:orientation="vertical" />

    <ListView
        android:id="@+id/my_listview"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1" />

    <GridView
        android:id="@+id/my_gridview"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1" />

</LinearLayout> 
```

# php - 如何制作缩放工具来缩放图像，如谷歌地图？

> ID：11311484
> 
> 赞同：1
> 
> 时间：2012-07-03T13:00:19.340
> 
> 标签：php, html, css, image

我想问一下我的项目。所以，我有一个显示图像的网页。但是我希望人们可以通过单击图像来查看有关图像的更多详细信息，例如 Google 地图中的缩放工具。有人可以告诉我它可以完成的方式吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:04:43.387

如果您有非常大或小的图像，您需要非常不同的解决方案：

*   对于小图像（几个 Mo），您可以将图像发送到浏览器并使用一个小脚本来处理鼠标和滚轮并在画布上绘制图像的可见部分。

*   如果您有非常大的图像，则需要类似于 Google 地图的解决方案。关于谷歌地图缩放的有趣之处在于，您的浏览器永远不会获得整个高清地图，而只会获得“图块”，即屏幕分辨率的一小部分。您需要一个服务器端库来剪切大图像并构建图块。许多可用（我用 Java 制作了一个），这取决于您选择的服务器端语言（例如，谷歌“平铺缩放库 your_language”）。而且您需要一个（有些复杂的）脚本浏览器端来获取、管理和显示图块。

# vba - 字符串格式丢失

> ID：11311486
> 
> 赞同：3
> 
> 时间：2012-07-03T13:00:25.930
> 
> 标签：vba, excel, string-formatting

我编写了这段代码来从分支号码创建一个电子邮件地址列表。所有地址均采用以下格式： `lp0000@xxx.co.uk`

问题是一些分支号码是 3 位数，所以在这些前面插入一个零，例如 681 变为 0681。我使用自定义数字格式来做到这一点，`0000`但由于每个分支的实际值仍然`000`是创建电子邮件地址时从零开始丢失。

我可以编写更多代码来复制数字格式还是我需要写一些东西来首先找到所有三位数字并在它们之前插入一个 0。

```
Option Explicit
Sub Pop_Emails()
    Dim brno As String
    Dim i As Integer
    Dim wks As Worksheet

    Set wks = Sheets("1A")
    i = 2
    Do While i <> 191
        With wks
            brno = .Cells(i, 1).Value
            .Cells(i, 3) = "lp" & brno & "@xxxx.co.uk"
        End With
    i = i + 1
    Debug.Print brno
    Loop
End Sub 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T13:04:12.380

如果`(i, 1)`是`"0001"`自定义格式：

```
 brno = .Cells(i, 1).Value 
```

将是`1`，简单地获取格式化值：

```
 brno = .Cells(i, 1).Text 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T13:03:06.547

您可以在 VBA 代码中应用数字格式：

```
.Cells(i, 3) = "lp" & Format(brno, "0000") & "@xxxx.co.uk" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-03T13:04:01.433

Excel 可能会将其视为一个数字，因此它会自动为您转换它。哎呀，谢谢女士。

Anywho...没什么大不了的，只是`PadLeft()`用来纠正它。

```
brno = .Cells(i, 1).Value.PadLeft(4, "0") 
```

# facebook - How to get a Facebook access token that has enough rights to get the posts in which you're tagged in?

> ID：11311488
> 
> 赞同：6
> 
> 时间：2012-07-03T13:00:33.093
> 
> 标签：facebook, facebook-graph-api, oauth-2.0, facebook-wall, facebook-access-token

The Facebook posts in which you're tagged in - using `@Name` - appear in your wall feed.

* * *

A friend of mine posted a link and tagged me in it:

![The startup Guide](../Images/aee62ef08abc96adb1495757cb281c09.png)

* * *

On the [Graph API documentation](https://developers.facebook.com/docs/reference/api/), when I click on my wall feed link (`Ctrl` + `F`: `Profile feed`), I'm able to see this post:

```
 ...
  {
     "id": "XXX",
     "from": {
        "name": "XXX",
        "id": "XXX"
     },
     "to": {
        "data": [
           {
              "name": "XXX",
              "id": "XXX"
           },
           {
              "name": "Christophe Maillard",
              "id": "XXX"
           }
        ]
     },
     "message": "The startup Guide (cc XXX, Christophe Maillard)",
     "link": "http://mashable.com/2012/06/27/startup-guide-1000-users/",
     "name": "How to Get to Your First 1,000 Users",
     "caption": "mashable.com",
     "description": "With the help of some smart marketers and entrepreneurs, we're created a clear outline for attracting your startup's first 1,000 users.",
     ...
  }
  ... 
```

The URL of this feed is `https://graph.facebook.com/me/feed?access_token=XXX`.

* * *

When copy/pasting the given access token - the one replaced by `XXX` in the URL above - within the [debugger](https://developers.facebook.com/tools/debug), I get something like this:

![Access Token Debugger](../Images/d68b1f1cdc3d5f2dfd0773e6003559d4.png)

As we can see, the access token is generated by the app `Test_console` which used *quite a lot* of scopes.

* * *

Then, I go to the [Graph API Explorer](https://developers.facebook.com/tools/explorer), I generate an access token using the `Get Access Token` button, and I specify all the scopes the debugger gave me, i.e. the ones the `Test_console` app used to generate its *working* access token. Finally, I access the URL `me/feed` by submitting the GET request. The problem: **I can't see the post in question in which I'm tagged in** with the explorer.

I also have my own app, and it reacts exactly like the [Graph API Explorer](https://developers.facebook.com/tools/explorer): I can't find that post in my wall feed using the Graph API as well.

Obviously, it's possible to get the posts in which you're tagged in using the Graph API, because the `Test_console` app is able to generate an appropriate access token. But **how can I get such an access token for my own app?**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T10:51:45.477

您需要为您的应用授予适当的权限。在图形 api explorer [https://developers.facebook.com/tools/explorer?method=GET&path=me](https://developers.facebook.com/tools/explorer?method=GET&path=me)在应用程序字段（右上角）中切换到您的应用程序以查看当前授予您的应用程序的权限（通过单击“再次获取访问令牌”按钮）。然后确保你添加了正确的（我认为它是你所追求的 read_stream ）[https://developers.facebook.com/docs/authentication/permissions/](https://developers.facebook.com/docs/authentication/permissions/)

# qt - How to hide shortcuts in Qt menu

> ID：11311489
> 
> 赞同：1
> 
> 时间：2012-07-03T13:00:33.677
> 
> 标签：qt, user-interface, menuitem

I am using Qt (Embedded Linux) and I want to hide the shortcuts displayed right next to the menu items. I still want to use the shortcuts though.

ie;

```
Quit    Ctrl+Q 
```

I want to get rid of the "Ctrl+Q" part of it.

```
Quit 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:05:53.237

据我所知，这是不可能的。

但是，您可以做的是不为菜单项设置任何快捷方式，而是使用[QShortcut](http://doc.qt.nokia.com/4.7-snapshot/qshortcut.html#details)单独创建快捷方式。然后它们不会出现在任何菜单项旁边，因为它们不会与任何菜单项相关联。

# powershell - 是否可以在 powershell 中创建自定义（结构化）数据类型？

> ID：11311503
> 
> 赞同：1
> 
> 时间：2012-07-03T13:01:49.910
> 
> 标签：powershell, powershell-2.0

是否可以在 powershell 中使用自定义数据类型？

我想要一个（结构化）变量，如下所示。跟随的东西在语法上不正确。我只想跟随三个变量。

```
Variable Databasedetails {
   string  DatabaseName
   string  TableName
   string[] columnNames 
} 
```

如果 Powershell 可以做到这一点，那么我可以拥有单个变量数组，它可以帮助我轻松编写查询。

```
$Databasedetails = { "DataBaseName=DB-someX","TableName=TableX"," (ColumnNames={"Col1","col2"}" 
                    "DataBaseName=DB-someY","TableName=TableY"," (ColumnNames={"Col2","colN"}"
                  }

Foreach ($DBdetails in $DataBaseDetails)
  {
      $query= "SELECT [$DBdetails.$columnName] FROM [$DBdetails$DatabaseName].[dbo].[$DBdetails.$TableName]"
      invoke-sqlcmd -query $query -ServerInstance $srvInstance"
  } 
```

有什么方法可以创建结构化变量，我可以创建该变量的数组并进行处理吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T15:50:45.757

最简单的方法是使用哈希表并将它们转换为自定义对象：

```
$result = @()
for (... my loop ... ) {
    ... retrieve data ...
    $props = @{ Databasename = $dbname; Tablename = $tname; Cols = $colarray }
    $result += (new-object pscustomobject -prop $props)
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T13:17:40.877

您将需要查看[Add-Member](http://technet.microsoft.com/en-us/library/hh849879.aspx)或[Add-Type](http://technet.microsoft.com/en-us/library/hh849914.aspx)，后者仅在 Powershell 2.0 中。

```
$details = New-Object PsObject
             | Add-Member NoteProperty DatabaseName '' -pass 
             | Add-Member NoteProperty TableName '' -pass
             | Add-Member NoteProperty ColumnNames @() -pass 
```

或添加类型

```
Add-Type 'public class DatabaseDetails { public string DatabaseName; public string TableName; public string[] ColumnNames; }' -Language CSharp

$details = New-Object DatabaseDetails 
```

# php - logical operator that returns operands in PHP

> ID：11311504
> 
> 赞同：2
> 
> 时间：2012-07-03T13:01:51.750
> 
> 标签：php, design-patterns, logical-operators, idioms

In any "sane" programming language, from C to Javascript, an expression such as `a || b` (or `a or b`) evaluates to `a` if `a` is true and to `b` otherwise, making possible things like `a = params.a || default_a` and similar for the `and` operator, but PHP begs to differ.

**Is there any way to get this in PHP? Or is there any "coding idiom/pattern" that PHP programmers use instead of something like the code below?**

```
$a = $my_a || $default_a; // nope, $a gets a boolean 
```

Because writing `if ($my_a) $a = $my_a; else $a = $default_a;` or `$a = $my_a ? $my_a : $default_a;` seems very ugly to me and violates basic "DRY-ness" of code by making me repeat something like `$my_a`, which can also be a very long and complicated expression.

It's a minor thing, I know, and not that singular in the land of the [double clawed hammer](http://www.flickr.com/photos/raindrift/7095238893/in/set-72157629492908038/) but it really annoys the hell outta me!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:04:05.767

值得一提的是：C 和 Javascript 有所不同，因为“在“理智”语言中”(;)) 布尔运算的返回值是布尔值，而不是其操作数之一。

然而

```
$a = $my_a ?: $default_a; 
```

# jquery - Display processing message in jQuery DataTables

> ID：11311505
> 
> 赞同：12
> 
> 时间：2012-07-03T13:01:52.333
> 
> 标签：jquery, datatables

**EDIT :**
I want to use the default processing message feature provided by datatables but looks like it works only with server side processing. I am not using server side processing.

* * *

**Original Question :**
I want to display processing message in [DataTables](http://datatables.net/) whenever I am adding / deleting records from DataTables. I am not using server side processing, depending on few events I delete / add records to DataTables.

I tried using `bProcessing` as `true` and `sProcessing` to give custom progress message **but looks like it works only with server side processing**. How can I achieve same with without server side processing? How can I explicitly call a function which displays processing message?

Here is a similar [example](http://datatables.net/release-datatables/examples/server_side/jsonp.html) but it uses server side processing.

Thanks.

* * *

**Solution :**
[**DEMO**](http://jsfiddle.net/Ajinkya_Parakh/TNe37/5/embedded/result/) Thanks @Robodude.

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-03T18:05:30.150

所以我启动了这个例子，页面上有一个隐藏的 div，其中包含“正在处理...”文本，我想象它的显示方式是在发送服务器处理的 ajax 之前，它显示它和完成后，它会隐藏它。我会在启用 bProcessing 时检查您的表上是否有默认的隐藏 div，并在满足其出现条件时控制其可见性。

隐藏 div 的 id 应该是 ID.OF.YOUR.TABLE_processing

因此，现在我将为您需要考虑的不同条件创建处理程序，就像这里看到的示例一样：

[http://datatables.net/release-datatables/examples/advanced_init/events_live.html](http://datatables.net/release-datatables/examples/advanced_init/events_live.html)

# java - IE8 asks to Open/Save twice on .xls file

> ID：11311507
> 
> 赞同：0
> 
> 时间：2012-07-03T13:01:54.860
> 
> 标签：java, jsp, servlets, internet-explorer-8

I'm generating an Excel document via Servlet. When I send the response back to the client (IE8), the "Open/Save" dialog pops up but requires users to click a choice twice before taking action. This doesn't happen in Firefox. I have no idea why this is occurring. Below is the relevant code that creates the appropriate streams.

`result` contains the Excel XML.

```
response.setContentType("application/vnd.ms-excel");
response.setHeader("Content-Disposition", "attachment;filename=TestFile.xls");

InputStream in = new ByteArrayInputStream(result.toString().getBytes("UTF-8"));
ServletOutputStream out = response.getOutputStream();

try
{
    byte[] outputByte = new byte[4096];

    while(in.read(outputByte, 0, 4096) != -1)
        out.write(outputByte, 0, 4096);
}
finally
{
    in.close();
    out.flush();
    out.close();
} 
```

**EDIT** I have noticed that waiting 5+ seconds before clicking an option works just fine. It seems to only ask twice when immediately clicking an option.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:43:58.113

此代码适用于我的应用程序中的每种类型的文件

```
 InputStream in = blob.getBinaryStream();
  // Output the blob to the HttpServletResponse

  String codedfilename = "";
  //this code resolves the issue with the encoding of the downloaded filename
  String agent = request.getHeader("USER-AGENT");
  if (null != agent && -1 != agent.indexOf("MSIE"))
  {
    codedfilename = URLEncoder.encode(/*here goes the filename*/, "UTF8");
    response.setContentType("application/x-download");
    response.setHeader("Content-Disposition","attachment;filename=" + codedfilename);
  }
  else if (null != agent && -1 != agent.indexOf("Mozilla"))
  {
    response.setCharacterEncoding("UTF-8");
    //It does not seem to make a difference whether Q or B is chosen
    codedfilename = MimeUtility.encodeText(rset.getString("FILE_NAME"), "UTF8", "B");
    response.setContentType("application/force-download");
    response.addHeader("Content-Disposition", "attachment; filename=\"" + codedfilename + "\"");
  }

  BufferedOutputStream out =
      new BufferedOutputStream(response.getOutputStream());
  byte by[] = new byte[32768];
  int index = in.read(by, 0, 32768);
  while (index != -1) {
      out.write(by, 0, index);
      index = in.read(by, 0, 32768);
  }
  out.flush(); 
```

试试看，让我们知道

# javascript - IDE with C and embedded Javascript support

> ID：11311510
> 
> 赞同：5
> 
> 时间：2012-07-03T13:02:24.370
> 
> 标签：javascript, c, windows, ide, editor

I have a 100k line C project with about 30k lines worth of embedded Mozilla Spidermonkey Javascript used for scripting GUI.

What is the best way to edit C and Javascript together or at least have a reasonable editor for the Javascript?

On Linux, I used to use two different instances of Eclipse one configured for C, one for Javascript. IT was not a particularly convenient solution.

Now that I am working on a Windows build, Visual Studio 2008 is doing fine with C support but Javascript support seems a bit ...lacking.

**All I really want is to jump quickly between functions in the Javascript code and inspect variables.** There are about 30 .js files. I can live without code completion and other niceties.

Ideally, I would see when calls to C code are made and jump to the C code but that is probably asking too much.

Otherwise it seems I am back to Notepad++ and grep.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T09:29:27.373

我使用[Zeus 编辑器](http://www.zeusedit.com)，它有一个适用于 C 语言的自动 ctags 功能，可以让你在函数和结构等内容之间跳转。

我没有使用 JavaScript 编辑器，但[ctags 网页](http://ctags.sourceforge.net/languages.html)将 JavaScript 列为支持语言之一，因此它可能会起作用。

# java - Jikes RVM的优势是什么

> ID：11311514
> 
> 赞同：6
> 
> 时间：2012-07-03T13:02:39.160
> 
> 标签：java, jikes

我最近听说了 Jikes RVM，我试图了解它提供的其他虚拟机不提供的功能以及它的可扩展性。

因此，在浏览网站上的功能列表时，我发现了一个有趣的点

> 高性能。Jikes RVM 是一款高性能编译器，非常适合用于大型项目

问题

1.  上面的陈述有多真实，因为我过去 5 年一直在使用 Java，之前从未听说过 Jikes RVM。大部分开发都是在 Hot Spot VM（由 Sun 提供）上完成的。我知道，还有其他 VM，但从未听说过 Jikes RVM。可能的原因之一可能是我对 Jikes RVM 缺乏了解，但后来很难消化这么多人不知道如此高性能的 VM。

2.  应该提示您使用 Jikes RVM 的场景到底是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T13:07:59.997

您在这里谈论的是两种不同的产品，尽管它们是相关的，因为它们最初都来自 IBM 的同一组。

1.  [Jikes Java 编译](http://jikes.sourceforge.net/)器。不像 Sun 的`javac`，它是用 Java 编写的，它是用`jikes`C++ 编写的。很久以前，这意味着它比 快得多`javac`，并且得到了广泛的使用。如今，用本机代码编写根本不是性能优势，事实上，据我所知，编译器是一个死项目，多年来没有更新。

2.  [Jikes “Research VM” (RVM)](http://jikesrvm.org/)是一个创建 Java 虚拟机的项目，该虚拟机本身主要是用 Java 编写的。这使得通过编写 Java 代码而不是本机代码来试验新的垃圾收集算法之类的东西成为可能。与其他 JVM 相比，RVM 速度较慢，并且从未打算用于实际生产用途，只是（顾名思义）用于研究。与编译器不同，Jikes RVM 仍然拥有活跃的学术研究社区。

# iphone - Image downlading with ASIhttprequest and display image from locally saved file

> ID：11311515
> 
> 赞同：0
> 
> 时间：2012-07-03T13:02:41.900
> 
> 标签：iphone, ios, ios4, asihttprequest

when the purchase is completed in my app, i am downloading the images from server to the application.

I am able to download a image from online and i write inside iPhone using asihttprequest.

i have checked inside the iphone's simulator documents directory , the downloaded file is exist.

how i am doing is , i have placed a uibutton inside the tableview when clicking the button, it starts downloading and displays it inside the uitableviewcell.

up-to this it is fine.when going back and coming to the same uitableview, the image is not displayed.it simply empty.when again i tap uibutton it starts downloading from online.

i am not sure how to display the locally saved image? and how to display image which is downloaded and written into the app and if image is not availabale inside the app , then need to start downloading from the server.

Please guide me

Please is my code

```
// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:
(NSIndexPath *)indexPath 
//-------------------------------------------------------------------------------
{
    int tablePadding = 40;
    int tableWidth = [self.tblPoemTypes frame].size.width;
    if (tableWidth > 480) { 
        tablePadding = 110;
    }

    static NSString *CellIdentifier = @"PoemTypeCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) 
    {
        cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero]autorelease];

        cell.selectionStyle = UITableViewCellSelectionStyleNone;

            // Only load cached images; defer new downloads until scrolling ends
           /* if (!psTypeTags.image)
            {
                cellImageView.image = [UIImage imageNamed:@"no-image-available.jpg"]; 
                [cell.contentView addSubview:cellImageView];

                [self startIconDownload:psTypeTags forIndexPath:indexPath];
            }
            else
            {
                NSLog(@"YES Image *****************");
                cellImageView.image = psTypeTags.image;
                [cell.contentView addSubview:cellImageView];
            }*/

            //----added by re

            if([indexPath row]==0)
            {

                goButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
                [goButton setTitle:@"Go" forState:UIControlStateNormal];
                [goButton sizeToFit];
                [goButton setFrame:CGRectMake(220,30,50,30)];

                [goButton addTarget:self action:@selector(fetchThreeImages1:) forControlEvents:UIControlEventTouchUpInside];
                [cell addSubview:goButton];

                imageView1 = [[[UIImageView alloc] initWithFrame:CGRectZero] autorelease];
                [imageView1 setBackgroundColor:[UIColor grayColor]];

                [imageView1 setImage:[array objectAtIndex:0]];
                [cell addSubview:imageView1];

                imageProgressIndicator1 = [[[UIProgressView alloc] initWithFrame:CGRectZero] autorelease];
                [cell addSubview:imageProgressIndicator1];  

            }

        NSUInteger imageWidth = (tableWidth-tablePadding-20)/3;
        NSUInteger imageHeight = 35;

        [imageView1 setFrame:CGRectMake(tablePadding/2,20,imageWidth,imageHeight)];

        [imageProgressIndicator1 setFrame:CGRectMake(120,40,imageWidth,20)];

            //-----------------

              }

    return cell;
}
- (void)fetchThreeImages1:(id)sender
{
    [imageView1 setImage:nil];

    if (!networkQueue) {
        networkQueue = [[ASINetworkQueue alloc] init];  
    }
    failed = NO;
    [networkQueue reset];
    [networkQueue setRequestDidFinishSelector:@selector(requestForDownloadOfFileFinished:)];
    [networkQueue setRequestDidFailSelector:@selector(requestForDownloadOfFileFailed:)];

    [networkQueue setShowAccurateProgress:YES];
    [networkQueue setDelegate:self];
    self.request=nil;

    NSURL *url;

    NSString *urlString=@"http://cdn.visual-blast.com/wp-content/uploads/2012/03/1700-royalty-free-stock-images-48x48.jpg";
    url = [NSURL URLWithString:urlString];
    request = [ASIHTTPRequest requestWithURL:url];

    [request setDownloadProgressDelegate:imageProgressIndicator1];
    [request setUserInfo:[NSDictionary dictionaryWithObject:@"request1" forKey:@"name"]];
    [request setDownloadDestinationPath:[[NSHomeDirectory() stringByAppendingPathComponent:@"Documents"] stringByAppendingPathComponent:@"1.png"]];
    [request setShouldContinueWhenAppEntersBackground:YES];
    [request setDelegate:self];
    [request setDidReceiveDataSelector:@selector(request:didReceiveBytes:)]; 
    [request setShowAccurateProgress:YES];

    [networkQueue addOperation:request];

    [networkQueue go];

}
- (void)requestForDownloadOfFileFinished:(ASIHTTPRequest *)request1
{

    NSLog(@"req finish.........");
    NSLog(@"Content will be %llu bytes in size",[request1 contentLength]); 

    goButton.hidden=YES;
    [imageProgressIndicator1 removeFromSuperview];
    UIImage *img = [UIImage imageWithContentsOfFile:[request1 downloadDestinationPath]];
    array=[[[NSMutableArray alloc]init]autorelease];
    [array addObject:img];
    image = [[UIImage alloc ]initWithData:[request1 responseData]];

    NSString *receivedString = [request1 responseString];
    NSLog(@"received string %@",receivedString);
    NSData *responseData = [request1 responseData];

    NSString *response = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];

    NSLog(@"Server response:%@", response);

    NSLog(@"response data %@",[request1 responseData]);
    NSLog(@"download destination path %@",[request downloadDestinationPath]);
    NSLog(@"download destination path1 %@",[request1 downloadDestinationPath]);
    NSLog(@"image %@",img);
    NSLog(@"image1 %@",image);
    if (img) {
        [imageView1 setImage:img];
    }
    UIAlertView *alertView = [[[UIAlertView alloc] initWithTitle:@"Download" message:@"Download Completed" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil] autorelease];
    [alertView show];
    //completed=true;
    NSLog(@"mutablearray count %@",[array objectAtIndex:0]);

    //[self.tblPoemTypes reloadData];

}

- (void)requestForDownloadOfFileFailed:(ASIHTTPRequest *)request1
{
    if (!failed) {
        if ([[request1 error] domain] != NetworkRequestErrorDomain || [[request1 error] code] != ASIRequestCancelledErrorType) {
            UIAlertView *alertView = [[[UIAlertView alloc] initWithTitle:@"Download failed" message:@"Failed to download images" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil] autorelease];
            [alertView show];
        }
        failed = YES;

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:08:05.330

After the image is downloaded you have to save the image say in document directory.So when you launch the tableview first check whether that image is present in the document, if it is present directly display the image as:

Edit:

```
 - (NSString *)applicationDocumentsDirectory {
    return [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
}

-(void)loadimage{
    NSString *workSpacePath=[[self applicationDocumentsDirectory] stringByAppendingPathComponent:@"your image-name"];
    UIImageView *myimage=[UIImageView alloc] initWithFrame:CGRectMake(0,0,20,20)];
    myimage.image=[UIImage imageWithData:[NSData dataWithContentsOfFile:workSpacePath]];    
    [self.view addSubView:myimage];
    [myimage release];
} 
```

If it not present then download it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:09:04.133

have a look at this project: [https://github.com/rs/SDWebImage/](https://github.com/rs/SDWebImage/)

# android - Android PagerTitleStrip 不显示

> ID：11311518
> 
> 赞同：0
> 
> 时间：2012-07-03T13:02:47.517
> 
> 标签：android, android-viewpager

我有基本的xml设置......

```
 <LinearLayout
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:orientation="vertical"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent">

    <android.support.v4.view.ViewPager
     android:id="@+id/viewpager"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_gravity="center" >

    <android.support.v4.view.PagerTitleStrip
     android:id="@+id/pagertitlestrip"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_gravity="top" />
    </android.support.v4.view.ViewPager>

    </LinearLayout> 
```

我在适配器中覆盖 getPageTitle。我收到一个膨胀的 pagertitlestrip 错误。我在这里错过了什么吗？

如果我删除 pagertitlestrip xml，则页面查看器可以很好地处理多个片段。

日志猫：

```
 07-03 09:46:13.050: W/dalvikvm(23349): threadid=1: thread exiting with uncaught            exception (group=0x40018560)
    07-03 09:46:13.060: E/AndroidRuntime(23349): FATAL EXCEPTION: main
    07-03 09:46:13.060: E/AndroidRuntime(23349): java.lang.RuntimeException: Unable to  start activity ComponentInfo{org.example.walk/org.example.walk.AchieveViewPager}:  android.view.InflateException: Binary XML file line #12: Error inflating class  android.support.v4.view.PagerTitleStrip
    07-03 09:46:13.060: E/AndroidRuntime(23349):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1696)
    07-03 09:46:13.060: E/AndroidRuntime(23349):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1716)
    07-03 09:46:13.060: E/AndroidRuntime(23349):    at android.app.ActivityThread.access$1500(ActivityThread.java:124)
    07-03 09:46:13.060: E/AndroidRuntime(23349):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:968)
    07-03 09:46:13.060: E/AndroidRuntime(23349):    at android.os.Handler.dispatchMessage(Handler.java:99)
    07-03 09:46:13.060: E/AndroidRuntime(23349):    at android.os.Looper.loop(Looper.java:130)
    07-03 09:46:13.060: E/AndroidRuntime(23349):    at android.app.ActivityThread.main(ActivityThread.java:3806)
    07-03 09:46:13.060: E/AndroidRuntime(23349):    at java.lang.reflect.Method.invokeNative(Native Method)
    07-03 09:46:13.060: E/AndroidRuntime(23349):    at java.lang.reflect.Method.invoke(Method.java:507)
    07-03 09:46:13.060: E/AndroidRuntime(23349):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
    07-03 09:46:13.060: E/AndroidRuntime(23349):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
    07-03 09:46:13.060: E/AndroidRuntime(23349):    at dalvik.system.NativeStart.main(Native Method)
    07-03 09:46:13.060: E/AndroidRuntime(23349): Caused by: android.view.InflateException: Binary XML file line #12: Error inflating class android.support.v4.view.PagerTitleStrip
    07-03 09:46:13.060: E/AndroidRuntime(23349):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:581)
    07-03 09:46:13.060: E/AndroidRuntime(23349):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
    07-03 09:46:13.060: E/AndroidRuntime(23349):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
    07-03 09:46:13.060: E/AndroidRuntime(23349):    at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
    07-03 09:46:13.060: E/AndroidRuntime(23349):    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
    07-03 09:46:13.060: E/AndroidRuntime(23349):    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
    07-03 09:46:13.060: E/AndroidRuntime(23349):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:260)
    07-03 09:46:13.060: E/AndroidRuntime(23349):    at android.app.Activity.setContentView(Activity.java:1716)
    07-03 09:46:13.060: E/AndroidRuntime(23349):    at org.example.walk.AchieveViewPager.onCreate(AchieveViewPager.java:22)
    07-03 09:46:13.060: E/AndroidRuntime(23349):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    07-03 09:46:13.060: E/AndroidRuntime(23349):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1660)
    07-03 09:46:13.060: E/AndroidRuntime(23349):    ... 11 more
    07-03 09:46:13.060: E/AndroidRuntime(23349): Caused by: java.lang.ClassNotFoundException: android.support.v4.view.PagerTitleStrip in loader dalvik.system.PathClassLoader[/system/framework/com.google.android.maps.jar:/data/app/org.example.walk-1.apk]
    07-03 09:46:13.060: E/AndroidRuntime(23349):    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
    07-03 09:46:13.060: E/AndroidRuntime(23349):    at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
    07-03 09:46:13.060: E/AndroidRuntime(23349):    at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
    07-03 09:46:13.060: E/AndroidRuntime(23349):    at android.view.LayoutInflater.createView(LayoutInflater.java:471)
    07-03 09:46:13.060: E/AndroidRuntime(23349):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570)
    07-03 09:46:13.060: E/AndroidRuntime(23349):    ... 21 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:19:20.140

听起来您正在包含旧版本的兼容库。尝试使用 v9。

# android - 侦听媒体存储更新的服务

> ID：11311524
> 
> 赞同：2
> 
> 时间：2012-07-03T13:03:12.473
> 
> 标签：android, service, listener, mediastore

在 Android 中（从 API 8 开始）有没有办法创建一个服务来监听 MediaStore 更新，等等，它会通知应用程序对新内容做一些事情。

我知道如何提供服务。但是我一直在寻找具有此类侦听器的示例，但仅找到了 sendBroadcast() 的解决方案。但我不想每次都更新（显式）MediaStore，只是一个可以等待更新通知的侦听器。

有这种可能吗？（或者，可能是，我的问题不太正确）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:06:15.257

您可以使用 AlarmManager 来触发一个服务，该服务将定期检查更新。每次您的活动开始时运行类似的东西。

```
AlarmManager mgr=(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
Intent i=new Intent(context, MyCheckForUpdates.class);
PendingIntent pi=PendingIntent.getBroadcast(context, 0, i, 0);

mgr.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP, SystemClock.elapsedRealtime(), PERIOD, pi); 
```

# xcode - 我应该使用 SQL 还是 Core Data？

> ID：11311529
> 
> 赞同：-1
> 
> 时间：2012-07-03T13:03:44.417
> 
> 标签：xcode, core-data, ios5

我正在创建一个 iPhone 应用程序，该应用程序将使用 Lat/Long 预加载一组位置，目前是 sqlite DB。我将计算这些位置与用户当前位置的距离，并将其显示在按距离排序的 TableView 中。

我应该只使用 sqlite DB 还是应该使用 Core Data？

如果我使用 Core Data，我如何加载我的初始数据库？

是否有任何好的 Core Data 教程展示了如何从应用程序预加载数据库与所有用户条目，因为我的应用程序将没有用户条目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:25:59.433

这是哲学。

如果你从数据库的角度考虑，并且从面向数据的角度进行设计，那么直接使用 sqlite 可能是你的最佳选择。Core Data 有额外的复杂性，但它的最大好处是它可以容纳那些从对象角度考虑程序并希望其中一些对象在代码运行之间保留的人。

# c++ - 如何使用一个进程写入向量并使用另一个进程读取它而不会造成性能损失

> ID：11311531
> 
> 赞同：0
> 
> 时间：2012-07-03T13:03:49.777
> 
> 标签：c++, multithreading, ipc

我有一个向量，它通过我为收集信息而编写的过程不断更新（大约每秒 5-20 次）新信息。我想编写一个能够检测向量变化的循环，然后读取信息并进行我为该事件编写的适当分析。但是，我知道像这样的多线程会产生很多问题，所以我很好奇做这样的事情的最佳方法是什么。

该向量存储在公共类中，并通过我们从金融公司获得的提要进行更新（正在更新的信息是期货指数）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T13:11:45.887

我看不到在 C++ 中执行此操作的方法。如果您使用共享内存，您可以将其存储`vector`在其中，但它的组件仍将指向本地的非共享内存块，从而阻止它被共享（您*可能*可以使用分配器技巧，但我不是确定它会起作用）。

`boost`具有一些共享内存功能，但正如我从一个问题中回忆的那样，我找不到它有一些缺点。您很可能必须设计自己的共享内存数据结构并提供一种机制来在其中存储条件变量，以便客户端可以等待它来确定何时有新数据可用。

编辑：我发现了这个问题`boost::interprocess`：

[boost::interprocess 准备好迎接黄金时段了吗？](https://stackoverflow.com/questions/3196395/is-boostinterprocess-ready-for-prime-time)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-03T13:12:48.563

抱歉，在这种情况下，我建议更改设计：将向量设为私有，添加一个 Setter 函数（包装 push_back() 或其他），供您的数据馈送使用，然后您就完成了。还是我错过了什么？

# html - I'm working on a newsletter design (which means no use of the CSS background-image property), and I need to use a stretched asset on the left and right side of a table. So 问问题 问问题 2012-07-03T13:04:01.780 644 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I'm working on a newsletter design (which means no use of the CSS background-image property), and I need to use a stretched asset on the left and right side of a table. So I have this table with 3 cells : one on the left and one on the right for my image that needs to take the whole height of the table, and one on the center with some text. Issue is that the isn't taking the entire height of the cell in IE (and Outlook). I've added a red background color to the cell to make sure it's taking the whole height available. My code is a bit too big to be shown here, but you can see it live here And here is a JSFiddle : http://jsfiddle.net/jXtNE/ Worth to mention: It's C and Javascript, that makes the difference, because "in a 'sane' language" (;)) the return value of a boolean operation is a boolean and not one of its operands. However $a = $my_a ?: $default_a; htmlcssinternet-explorer 4 1 回答 1 This answer is useful 0 设置内边距、边距为0px；如果它不起作用，只需给出负值即可将边距移动到页面末尾。例如-10px。可能这不是一个完美的解决方案。但它暂时解决了你的问题。 于 2012-07-03T13:26:54.263 回答 Related 1 actionscript-3 - as3函数声明两种方式的区别 3 serialization - protobuf 文本格式是什么样的？ 2 c - Android 上的 settimeofday() 导致 errno - 只读文件系统 3 pointers - 将 va_list 转换为指针，然后将其递增 1 linux - 新命令行工具：唯一名称 2 java - Jar 文件夹成为 Eclipse 中“引用库”下的类文件夹 4 java - 在哪里可以找到 Java 8 版的 JVM 规范？ 2 c# - LINQ to Entities 无法识别该方法 2 mysql - Redmine 和 SVN - 安装 pam_mysql 的问题 2 c# - 锁定/冻结 ListView 中的表头 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11311534
> 
> 赞同：0
> 
> 时间：
> 
> 标签：html, css, internet-explorer

I'm working on a newsletter design (which means no use of the CSS background-image property), and I need to use a stretched asset on the left and right side of a table.

So I have this table with 3 cells : one on the left and one on the right for my image that needs to take the whole height of the table, and one on the center with some text.

Issue is that the isn't taking the entire height of the cell in IE (and Outlook). I've added a red background color to the cell to make sure it's taking the whole height available.

My code is a bit too big to be shown here, but you can see it [live here](http://www.tauziet.fr/temp/parse/newsletter.html)

And here is a JSFiddle : [http://jsfiddle.net/jXtNE/](http://jsfiddle.net/jXtNE/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:26:54.263

设置内边距、边距为0px；如果它不起作用，只需给出负值即可将边距移动到页面末尾。例如-10px。可能这不是一个完美的解决方案。但它暂时解决了你的问题。

# android - 如何实现像 Google Play 那样的可折叠视图？

> ID：11311541
> 
> 赞同：19
> 
> 时间：2012-07-03T13:04:22.257
> 
> 标签：android, android-layout

我想实现一个可折叠的视图，就像来自 Google Play 市场的一样。它显示内容中的许多行和一个箭头，点击箭头会显示整个内容。这是用 ExpandableListView 实现的还是有其他解决方案？

附有突出显示我正在寻找的内容的屏幕截图。谢谢。![在此处输入图像描述](../Images/918a2af991bbfdc22a6011275737434b.png)

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-03T15:04:57.690

有一个更简单的方法：

```
 final TextView descriptionText = (TextView) view.findViewById(R.id.detail_description_content);
        final TextView showAll = (TextView) view.findViewById(R.id.detail_read_all);
        showAll.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                showAll.setVisibility(View.INVISIBLE);

                descriptionText.setMaxLines(Integer.MAX_VALUE);
            }
        }); 
```

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <LinearLayout
        android:id="@+id/detail_description_container"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        >

        <TextView
            android:id="@+id/detail_description_content"
            android:maxLines="5"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"/>
        <TextView
            android:id="@+id/detail_read_all"
            android:clickable="true"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>
    </LinearLayout>
</ScrollView> 
```

重要的部分是maxlines 和scrollview。这不会给出一个缓慢的动画（这将是一个更复杂的出价），而是一个即时的打开效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-24T19:29:58.583

原谅我糟糕的英语。

基于 Warpzip 响应

```
res/values/strings.xml
 ...
 ...
 <string name="str_more"><![CDATA[<p><b>This is the header</b><u>( see more ..)</u>]]></string>
 <string name="str_less"><![CDATA[<p><b>This is the header</b><u>(less ..)</u>]]></string>
 <string name="str_details"><![CDATA[<p>A long string of text that do not want to show all the time.A long string of text that do not want to show all the time.A long string of text that do not want to show all the time.A long string of text that do not want to show all the time.A long string of text that do not want to show all the time.</p>]]></string>
 ...
 ... 
```

在我们的布局中，我们可以在我们的布局中包含一个带有垂直 LinearLayout 的滚动视图（或者稍加工作的一个 RelativeLayout）。在这些：

```
<TextView
             android:id="@+id/txtvw_header"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_alignParentLeft="true"
             android:layout_alignParentTop="true"
             android:text="@string/str_more"
             android:textAppearance="?android:attr/textAppearanceMedium" />

         <TextView
             android:id="@+id/txtvw_detail"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_alignParentLeft="true"
             android:layout_below="@+id/txtvw_tituloEntreTodos"
             android:text="@string/str_details"
             android:textAppearance="?android:attr/textAppearanceMedium" /> 
```

最后我们的活动

```
 view = inflater.inflate(R.layout.f_entretodos, container, false);
         info = (TextView) view.findViewById(R.id.txtvw_header);
         fullinfo = (TextView) view.findViewById(R.id.txtvw_detail);
         info.setText(Html.fromHtml(getString(R.string.str_more)));
         fullinfo.setText(Html.fromHtml(getString(R.string.str_detail)));
         fullinfo.setVisibility(View.GONE);
         info.setOnClickListener(new OnClickListener(){

             @Override
             public void onClick(View v) {
                 // TODO Auto-generated method stub
                 if (fullinfo.isShown()){
                     fullinfo.setVisibility(View.GONE);
                     info.setText(Html.fromHtml(getString(R.string.str_more)));
                 }else{
                     fullinfo.setVisibility(View.VISIBLE);
                     info.setText(Html.fromHtml(getString(R.string.str_less)));
                 }
             }

         }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-08T11:33:22.743

Warpzits 的解决方案升级（扩展任何容器内容）：

布局 XML：

```
<LinearLayout
    android:layout_width = "match_parent"
    android:layout_height = "wrap_content"
    android:clickable = "true"
    android:focusable = "true"
    android:orientation = "vertical"
    android:gravity="end">

    <ImageButton
      android:id = "@+id/expandImageButton"
      android:layout_width = "wrap_content"
      android:layout_height = "wrap_content"
      android:layout_margin = "12dp"
      android:background = "#00ffffff"
      android:src = "@drawable/dropdown_white"
      android:onClick="onClickExpandImageButton"/>

    <TextInputLayout
      android:id = "@+id/container"
      android:layout_width = "match_parent"
      android:layout_height = "match_parent"
      android:visibility="gone">

      <EditText
        android:layout_width = "match_parent"
        android:layout_height = "wrap_content"/>

    </TextInputLayout>

  </LinearLayout> 
```

一个 onClick 处理程序：

```
public void onClickExpandImageButton(
  View expandImageButton) {

  expandImageButton
    .setRotation(
      container.getVisibility() == View.GONE ?
      180 :
      0);

  container.setVisibility(
    container.getVisibility() == View.GONE ?
    View.VISIBLE :
    View.GONE);
} 
```

图片来自 /res/drawable/：

```
<?xml version="1.0" encoding="utf-8"?>
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="24"
    android:viewportHeight="24">

<path
  android:fillColor="#f5f5f5"
  android:pathData="M7,10 L12,15 L17,10 Z" />
<path
  android:pathData="M0,0 L24,0 L24,24 L0,24 Z" />
</vector> 
```

# javascript - 嵌套函数中的 javascript 实例共享

> ID：11311542
> 
> 赞同：0
> 
> 时间：2012-07-03T13:04:28.993
> 
> 标签：javascript

在下面指定的js代码中-

```
var tclass = function(){
   this.func2=function(){console.log('func2')};
   this.b={
      func1: function(){console.log('func1')}
   }
} 
```

我如何在同一个实例的 func1 中调用 func2？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T13:06:25.047

您必须`this`在闭包中保留对两者和该函数的引用。

```
var tclass = function(){
   var obj = this;
   function func2(){console.log('func2')};
   this.func2 = func2;
   this.b={
      func1: function(){ obj.func2(); }
   }
} 
```

此外，使用实际的函数声明语句来声明函数更有用：

```
function tclass() {
  // ...
} 
```

# sql - SQL 将数据从行移动到列

> ID：11311549
> 
> 赞同：2
> 
> 时间：2012-07-03T13:05:07.293
> 
> 标签：sql, self-join

抱歉标题不好-我根本不知道该怎么称呼我想做的事情。

它是这样的：

在 MS SQL Server 2008 中

我有一个使用 WITH 语句创建的包含 4000 多行的临时表，如下所示：

ID (varchar) 日期 (int)

AB1135000097 | 20151221
AB1135000097 | 20160119
AB1135000097 | 20160219
AB1135001989 | 20120223
AB1135001989 | 20120323
AB1135001989 | 20120423
。
.
.

我想根据 DATE 对日期范围内的数据进行配对。

AB1135000097 | 20151221 | 20160119
AB1135000097 | 20160119 | 20160219
AB1135001989 | 20120223 | 20120323
AB1135001989 | 20120323 | 20120423

这个动作有名字吗？（当我知道我在问什么时，我会在帖子中添加标签）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T13:16:39.107

### 假定架构

我假设你的桌子是这样的：

```
CREATE TABLE "TABLE"
(
    tag     CHAR(1) NOT NULL,
    value   INTEGER NOT NULL,
    PRIMARY KEY(tag, value)
); 
```

不过，我真的不必猜测架构。

### 可能的答案

从表面上看，您可能会追求：

```
SELECT t1.tag, t1.value, t2.value
  FROM "TABLE" AS t1
  JOIN "TABLE" AS t2
    ON t1.tag = t2.tag AND t2.value = t1.value + 1
 ORDER BY t1.tag, t1.value; 
```

这会将表与自身连接起来，组合`tag`列值（`A`、`B`、 ...）相同的行，并且其中`value`一行中的列比另一行中的列多一`value`。

另一方面，如果您`('A', 5)`向表中添加一行并期望它作为一行的一部分出现在输出中`('A', 3, 5)`，那么如果不使用 OLAP 功能，查询将更难编写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T13:19:11.163

如果您使用的是 Oracle 数据库，那么您可以参考以下查询来解决这个问题 -

```
with t as
(
SELECT 'A' Col1, 1 Col2
  FROM Dual
UNION ALL
SELECT 'A' Col1, 2 Col2
  FROM Dual
UNION ALL
SELECT 'A' Col1, 3 Col2
  FROM Dual
UNION ALL
SELECT 'B' Col1, 4 Col2
  FROM Dual
UNION ALL
SELECT 'B' Col1, 5 Col2
  FROM Dual
UNION ALL
SELECT 'B' Col1, 6 Col2 FROM Dual
)
SELECT *
  FROM (SELECT Col1,
               Col2,
               Lead(Col1) Over(ORDER BY Col1, Col2) Col3,
               Lead(Col2) Over(ORDER BY Col1, Col2) Col4
          FROM t  --(your table name)
         ORDER BY Col1, Col2)
 WHERE Col1 = Col3 
```

因为我没有您的表名和表结构，所以我在 Query 本身中创建了一个临时表。

您需要更改 `From t`为`From`您的表名。..请相应地更改 col1 和 col2 列名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T12:44:24.363

我找到了解决我的问题的方法。灵感来自 Jonathan Leffler 的解决方案。非常感谢！

它基于将行号添加到按 ID 和 DATE 排序的表中，然后与 ROW+1 自连接以获得下一个日期作为第二个日期列。

```
with 
SCHEDULE as
( -- remove duplicates and NULL entries

    select DISTINCT ID, DATE from TABLE1
    where DATE IS NOT NULL
),

SCHEDULE_WITH_ROW as
(
select * from (
    select DISTINCT ROW_NUMBER()
        OVER (ORDER BY ID, DATE) AS
        ROW, ID, DATE 
    from SCHEDULE) AS SCHED
)

select 
    S1.ID
    , S1.DATE
    , S2.DATE
from SCHEDULE_WITH_ROW S1
    join SCHEDULE_WITH_ROW S2 on S2.ID = S1.ID and S1.ROW + 1 = S2.ROW 
```

# android - su访问安卓

> ID：11311564
> 
> 赞同：-1
> 
> 时间：2012-07-03T13:06:00.273
> 
> 标签：android, root, su

我正在尝试制作一个文件浏览器（特别是我开始更改此内容：[http](http://android-er.blogspot.com.es/2010/01/implement-simple-file-explorer-in.html) ://android-er.blogspot.com.es/2010/01/implement-simple-file-explorer-in.html ）。

我的问题是：如何访问并查看目录“/”中的文件？我发现那里正在寻找著名的：`Runtime.getRuntime().exec("su");`但我只做那个超级用户授予管理员权限并停止工作。

我按照这里的步骤来root模拟器：[如何在Android模拟器上获得root访问权限？](https://stackoverflow.com/questions/5095234/how-to-get-root-access-on-android-emulator). 反正我的手机已经root了，不能用。

这是代码。该应用程序在超级用户的列表中，但总是无法读取消息文件夹！

```
public class AndroidExplorer extends ListActivity {

private List<String> item = null;
private List<String> path = null;
private String root="/";
private TextView myPath;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main); 

    List<String> cmds = new ArrayList<String>();
    cmds.add("mount -o rw,remount /system");
    try {
        doCmds(cmds);
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    myPath = (TextView)findViewById(R.id.path);
    getDir(root);
}

public void doCmds(List<String> cmds) throws Exception {
    Process process = Runtime.getRuntime().exec("su");
    DataOutputStream os = new DataOutputStream(process.getOutputStream());

    for (String tmpCmd : cmds) {
            os.writeBytes(tmpCmd+"\n");
    }

    os.writeBytes("exit\n");
    os.flush();
    os.close();

    process.waitFor();
} 

private void getDir(String dirPath)
{
 myPath.setText("Location: " + dirPath);
 item = new ArrayList<String>();
 path = new ArrayList<String>();
 File f = new File(dirPath);
 File[] files = f.listFiles();

 if(!dirPath.equals(root))
 {
  item.add(root);
  path.add(root);
  item.add("../");
  path.add(f.getParent());
 }
 for(int i=0; i < files.length; i++)
 {
   File file = files[i];
   path.add(file.getPath());
   if(file.isDirectory())
    item.add(file.getName() + "/");
   else
    item.add(file.getName());
 }
 ArrayAdapter<String> fileList =
  new ArrayAdapter<String>(this, R.layout.row, item);
 setListAdapter(fileList);
}

 @Override
 protected void onListItemClick(ListView l, View v, int position, long id) {
  File file = new File(path.get(position));
  if (file.isDirectory())
  {
   if(file.canRead())
    getDir(path.get(position));
   else
   {
    new AlertDialog.Builder(this)
    .setIcon(R.drawable.ic_launcher)
    .setTitle("[" + file.getName() + "] folder can't be read!")
    .setPositiveButton("OK", 
      new DialogInterface.OnClickListener() {
       @Override
       public void onClick(DialogInterface dialog, int which) {
        // TODO Auto-generated method stub
       }
      }).show();
   }
  }
  else
  {
   new AlertDialog.Builder(this)
    .setIcon(R.drawable.ic_launcher)
    .setTitle("[" + file.getName() + "]")
    .setPositiveButton("OK", 
      new DialogInterface.OnClickListener() {
       @Override
       public void onClick(DialogInterface dialog, int which) {
        // TODO Auto-generated method stub
       }
      }).show();
  }
 } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:26:16.183

> 反正我的手机已经root了，不能用。

首先，您需要一部有效的根电话。生根方法取决于您的手机型号，因此您需要谷歌并弄清楚。

成功植根手机后，您将拥有超级用户权限，并且可以执行`su`命令。

您可以像这样检查您的手机是否正确植根（在 Windows 命令提示符下）：

```
> adb shell
$ su 
```

您应该能够看到根文件夹中的文件，例如：

```
$ cd /
$ ls -al 
```

**编辑**

代替：

```
Runtime r = Runtime.getRuntime();
process = r.exec("su"); 
```

具有以下内容：

```
List<String> cmds = new List<String>();
cmds.add("mount -o rw,remount /system");
doCmds(cmds); 
```

并添加以下功能：

```
public void doCmds(List<String> cmds) throws Exception {
    Process process = Runtime.getRuntime().exec("su");
    DataOutputStream os = new DataOutputStream(process.getOutputStream());

    for (String tmpCmd : cmds) {
            os.writeBytes(tmpCmd+"\n");
    }

    os.writeBytes("exit\n");
    os.flush();
    os.close();

    process.waitFor();
} 
```

# javascript - 未注释掉 IF 语句时，nodeName 返回为“#text”

> ID：11311565
> 
> 赞同：1
> 
> 时间：2012-07-03T13:06:00.700
> 
> 标签：javascript

这里有点奇怪的故障。

当 IF 语句被注释掉时， a 的标签名称`childNode`被正确记录，但是一旦你取消 IF 语句的注释，那么`childNode`s 标签名称就会被记录为“ `#TEXT`”。

```
<body>
    <div id="page_Wrapper">
        <h1>h1</h1>
        <br />
        <br />
        <br />
        <b>b</b>
        <br />
        <i>i</i>
        <br />
        <u>u</u>
        <div>div</div>
        <span>span</span>
    </div>

    <script>
        window.onLoad = removeTags();

        function removeTags(){
            var allTags = document.getElementById("page_Wrapper").childNodes;
            console.log("allTags length: " + allTags.length);

            for (var i = 0; i < allTags.length; i++){
                var tag = allTags[i].nodeName.toLowerCase();
                console.log(tag);
            /*
                if (tag != "b" || tag != "br" || tag != "i"){
                    allTags[i].parentNode.removeChild(allTags[i]);
                }
            */
            }
        }
    </script>
</body> 
```

[http://jsfiddle.net/MythOfEchelon/VpNWA/3/](http://jsfiddle.net/MythOfEchelon/VpNWA/3/)

**完成，工作代码：**

```
<body>
    <div id="page_Wrapper">
        <h1>h1</h1>
        <br />
        <br />
        <br />
        <b>b</b>
        <br />
        <i>i</i>
        <br />
        <u>u</u>
        <div>div</div>
        <span>span</span>
    </div>

    <script>
        window.onload = removeTags;

        function removeTags(){
            var allTags = document.getElementById("page_Wrapper").childNodes;
            var i = allTags.length;

            while (i--){
                var tag = allTags[i].nodeName.toLowerCase();
                console.log(tag);

                if (tag != "b" && tag != "br" && tag != "i"){
                    allTags[i].parentNode.removeChild(allTags[i]);
                }
            }
        }
    </script>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:43:20.030

请参阅条件`(tag != "b" || tag != "br" || tag != "i")`选择*任何*节点（它可能应该是`(tag != "b" && tag != "br" && tag != "i") instead).`因此在每个循环上调用 removeChild 函数。

如果`allTags[i].parentNode.removeChild(allTags[i]);`被替换为

```
var x = allTags[i];
x.parentNode.removeChild(x); 
```

行为不同。另请参阅：[removechild loop exits before finish](https://stackoverflow.com/questions/11148066/removechild-loop-exits-before-finish)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:15:21.883

您可以添加此行以检查它是否是文本节点

```
for (...) {
    if (allTags[i].nodeType == 3) continue; //nodeType = 3 means it is a text node
    ...
} 
```

# macos - 我可以使用 Cocoa 的 NSPrintInfo 和 NSPrintOperation 设置 _every_ 自定义打印选项吗？

> ID：11311566
> 
> 赞同：0
> 
> 时间：2012-07-03T13:06:10.617
> 
> 标签：macos, cocoa, printing, nsprintoperation

我试图找出是否可以在不显示系统打印面板的情况下在 Mac OS X 上打印，并且仍然以编程方式设置每个打印选项，甚至是第三方打印机驱动程序的打印选项。

我想使用[NSPrintInfo](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSPrintInfo_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSPrintInfo)。

这可能吗？是否所有 Mac 打印机驱动程序都必须“通过”打印系统，这意味着每个 Mac 打印机驱动程序都必须通过 NSPrintInfo 以编程方式访问它们在驱动程序 UI 中显示的每个选项？

或者第三方打印机驱动程序供应商是否有无法通过 NSPrintInfo 设置的设置？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T01:08:14.070

这应该是可能的，每个设置都存储在 PMPrintSettings 对象中，您可以将其作为 NSMutableDictionary 使用：

[https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSPrintInfo_Class/Reference/Reference.html#//apple_ref/occ/instm/NSPrintInfo/printSettings](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSPrintInfo_Class/Reference/Reference.html#//apple_ref/occ/instm/NSPrintInfo/printSettings)

您可以检查任何 NSPrintInfo 并查看键和值。当然，对于第三方驱动程序，这些几乎从未记录在案，但所有设置都在那里供您处理。

# c# - Decimal.TryParse 不解析我的十进制值

> ID：11311570
> 
> 赞同：22
> 
> 时间：2012-07-03T13:06:14.523
> 
> 标签：c#, decimal, tryparse

当我尝试转换 0.1 之类的内容（来自文本框中的用户）时，我的值 b 始终为 false。

```
bool b = Decimal.TryParse("0.1", out value); 
```

怎么会在这里工作？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-03T13:10:47.487

指定解析的文化。您当前的文化使用一些不同的数字格式，可能是`0,1`.

这将成功解析字符串：

```
bool b = Decimal.TryParse("0.1", NumberStyles.Any, CultureInfo.InvariantCulture, out value); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-03T13:12:45.800

参加聚会为时已晚，但我打算建议强制文化进入美国，但不变的是更好的 sln

```
decimal value;
bool b = Decimal.TryParse("0.1", NumberStyles.Any, new CultureInfo("en-US"), out value); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-07-03T13:09:23.590

Use `Culture` in overload method

# xcode - 获取iOS 6 Beta 依然开发iOS5

> ID：11311575
> 
> 赞同：0
> 
> 时间：2012-07-03T13:06:24.633
> 
> 标签：xcode, iphone-developer-program

如果我将 ios 6 beta 安装在我的 iphone 上，我还能在 ios 5 上为我的应用程序开发和提交更新吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:09:11.463

您在手机上安装的 iOS 版本无关紧要。重要的是，您只能使用非测试版 XCode（Mac App Store 上的那个）提交应用程序。您无法使用开发人员门户上提供的 XCode 测试版（您需要开发 iOS 6 应用程序）与 iOS 6 一起向 App Store 提交应用程序。

# java - Mule 3.3.0 JBoss 事务管理器 java.lang.NoSuchMethodError 异常

> ID：11311582
> 
> 赞同：3
> 
> 时间：2012-07-03T13:06:47.977
> 
> 标签：java, jboss, transactions, esb, mule

我正在从 Mule 版本 3.1.0 迁移到 3.3.0。

使用 JBoss 事务管理器运行我的代码时：

```
<jbossts:transaction-manager>
  <property key="test" value="TEST"/>
</jbossts:transaction-manager> 
```

我得到以下异常：

```
2012-07-03 15:04:40,501 SEVERE [org.mule.exception.DefaultSystemExceptionStrategy] -     Caught exception in Exception Strategy: errorCode: 0; Caused by: errorCode: 0 
at org.mule.work.WorkerContext.run(WorkerContext.java:335) 
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source) 
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) 
at java.lang.Thread.run(Unknown Source) 
Caused by: java.lang.NoSuchMethodError: com.arjuna.ats.arjuna.common.arjPropertyManager.getObjectStoreEnvironmentBean()Lcom/arjuna/ats/arjuna/common/ObjectStoreEnvironmentBean; 
```

我的类路径包含：“mule-module-jbossts-3.3.0.jar”。如果我使用“mule-module-jbossts-3.1.0.jar”它工作正常。

这是骡子的问题吗？

验证我使用的是最新的 jboss tx 管理器（4.16.4）后，我收到以下异常：

```
2012-07-08 18:43:56,772  SEVERE [org.mule.exception.DefaultSystemExceptionStrategy] - Caught exception in Exception Strategy: errorCode: 0; Caused by: errorCode: 0
    at org.mule.work.WorkerContext.run(WorkerContext.java:335)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.NoClassDefFoundError: Could not initialize class com.arjuna.ats.internal.jts.OTSImpleManager
    at com.arjuna.ats.jts.OTSManager.get_current(OTSManager.java:71)
    at com.arjuna.ats.internal.jta.transaction.jts.BaseTransaction.checkTransactionState(BaseTransaction.java:265)
    at com.arjuna.ats.internal.jta.transaction.jts.BaseTransaction.begin(BaseTransaction.java:72)
    at org.mule.transaction.XaTransaction.doBegin(XaTransaction.java:63)
    at org.mule.transaction.AbstractTransaction.begin(AbstractTransaction.java:66)
    at org.mule.transaction.XaTransactionFactory.beginTransaction(XaTransactionFactory.java:32)
    at org.mule.execution.BeginAndResolveTransactionInterceptor.execute(BeginAndResolveTransactionInterceptor.java:51)
    at org.mule.execution.ResolvePreviousTransactionInterceptor.execute(ResolvePreviousTransactionInterceptor.java:48)
    at org.mule.execution.SuspendXaTransactionInterceptor.execute(SuspendXaTransactionInterceptor.java:54)
    at org.mule.execution.ValidateTransactionalStateInterceptor.execute(ValidateTransactionalStateInterceptor.java:44)
    at org.mule.execution.IsolateCurrentTransactionInterceptor.execute(IsolateCurrentTransactionInterceptor.java:44)
    at org.mule.execution.ExternalTransactionInterceptor.execute(ExternalTransactionInterceptor.java:52)
    at org.mule.execution.RethrowExceptionInterceptor.execute(RethrowExceptionInterceptor.java:32)
    at org.mule.execution.RethrowExceptionInterceptor.execute(RethrowExceptionInterceptor.java:17)
    at org.mule.execution.TransactionalErrorHandlingExecutionTemplate.execute(TransactionalErrorHandlingExecutionTemplate.java:113)
    at org.mule.execution.TransactionalErrorHandlingExecutionTemplate.execute(TransactionalErrorHandlingExecutionTemplate.java:34)
    at org.mule.transport.TransactedPollingMessageReceiver.poll(TransactedPollingMessageReceiver.java:145)
    at org.mule.transport.AbstractPollingMessageReceiver.performPoll(AbstractPollingMessageReceiver.java:219)
    at org.mule.transport.PollingReceiverWorker.poll(PollingReceiverWorker.java:84)
    at org.mule.transport.PollingReceiverWorker.run(PollingReceiverWorker.java:53) 
```

怎么了？（我的类路径中有 jbossts.jar）

# wcf - 如何从 WCF 自定义 MessageEncoder 中引发异常并将其返回给客户端？

> ID：11311583
> 
> 赞同：1
> 
> 时间：2012-07-03T13:06:48.923
> 
> 标签：wcf, exception-handling

在我的 WCF 服务中，我实现了一个自定义编码器，它继承自`System.ServiceModel.Channels.MessageEncoder`.

在那个编码器中，我获取原始消息并在我的`ReadMessage()`方法覆盖中操作接收到的标头。

在此操作期间，有时我可能会在标头中检测到使消息无效的内容，并且我想向客户端返回一个有用的异常。

我试过了：

```
throw new Exception("Some useful message"); 
```

和：

```
throw new FaultException("Some useful message"); 
```

它们都向客户端返回 HTTP 400，但没有响应正文。

我可以很高兴地从我的实际 Web 服务方法中抛出一个`FaultException`，它会正确返回给客户端，但是在处理的后期阶段，我不再可以访问 SOAP 标头（除非有人可以告诉我其他情况）。

如何根据 SOAP 标头中的信息向客户端返回带有友好消息的响应 500？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:13:31.653

您可以致电：

```
OperationContext.Current.IncomingMessageHeaders 
```

如果您愿意，可以在您的服务方法中检查那里的标题。在我看来，自定义 MessageEncoder 是用来做你描述的事情的错误野兽。

# iphone - 在 TableView 中将动态 UIWebView 设置为标题

> ID：11311584
> 
> 赞同：2
> 
> 时间：2012-07-03T13:06:49.833
> 
> 标签：iphone, objective-c, ipad, uitableview, uiwebview

我将 UIwebview 设置为`UITableview`. `UIWebview`高度和宽度是动态的。它用于本地 html 文件。

`UIWebview`并`UITableview`在一卷之下。

它适用于 iphone。我为 ipad 编写的相同方法效果很好。但存在一个问题。在 ipad 标题视图和表格视图中对齐不正确。

这是代码。

Rootview控制器是`UITableviewControllor`

根视图控制器.m

```
 - (void)viewDidLoad {
[super viewDidLoad];
self.title = @"Webview in UITableView";
webview = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 320, 10)]; // Don't use CGRectZero here, won't work
webview.delegate = self;
webview.hidden = YES;

[webview loadRequest:[[NSURLRequest alloc] 
                      initWithURL: [NSURL URLWithString:@"http://www.google.com/"]]];

[self.tableView setTableHeaderView:webview]; // Leave this, else you'll have rows to fill the rest of the screen 
```

}

```
- (void) webViewDidFinishLoad:(UIWebView *)webView {
float newSize = [[webView stringByEvaluatingJavaScriptFromString:@"document.documentElement.scrollHeight"] floatValue];
NSLog(@"Resizing webview from %.2f to %.2f", webView.frame.size.height, newSize);
webView.frame = CGRectMake(webView.frame.origin.x, webView.frame.origin.y, webView.frame.size.width, newSize);
webView.hidden = NO;

// We need to reset this, else the new frame is not used.
[self.tableView setTableHeaderView:webview]; 
```

}

对于相同的代码 iphone 输出

![在此处输入图像描述](../Images/c448638a010e39cd9f7e39403b5ff46f.png)

和 iPad 输出`UITableview`开始滑块提前`UIWebview.`

![在此处输入图像描述](../Images/0ea28e8a67f30079dbefda4546a6ba68.png)

我尝试设置标题框架，但它不起作用，它让 webview 和 table view 都有它自己的不需要的滚动视图。

什么是解决方案？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:13:17.420

它是一个分组表视图，这就是为什么它的对齐不正确，因为分组表视图总是从 x-origin 和 y-origin 获取一些默认大小......您可以使用普通表或设置分组表的 x 或增加 web 的 x-origin看法..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:14:36.487

你有没有在你的“ `webviewdidfinishedload`”委托注释中尝试过这个，“”`MyWebView"`是触发委托的 webview 也是“ `webViewHeight`”是 int 值，在它之后你应该添加你的自定义控件并将它声明为公共这是从我的工作代码中获取的。 uitableview 在 webview 之后添加评论。

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    CGSize size = [MyWebView sizeThatFits: CGSizeMake(1.0f, 1.0f)]; // Pass any size here
    CGRect frame = MyWebView.frame;
    frame.size.height = size.height;
    MyWebView.frame = frame;
    webViewHeight = size.height + 200;
} 
```

# opengl-es-lighting - 前照灯或对灯光工作方式的理解

> ID：11311585
> 
> 赞同：0
> 
> 时间：2012-07-03T13:06:52.070
> 
> 标签：opengl-es-lighting

我正在使用 OpenGL 开发一个 3D 迷宫项目。尽管我对编程知之甚少，但我还是设法构建了它，添加了纹理并使用鼠标和键盘进行了操控（不过大部分都是从网上偷来的）。现在我被灯光困住了。

我的想法（类似于著名的游戏 SCP-087）是制作一个射程短的前照灯。我已经阅读了很多关于 OpenGL 和法线中的光照的内容，但是光照仍然表现得很奇怪而且有点随机。

我有这些功能，可以在相机周围移动（翻译）我的世界。我知道，如果我将 light0 放在代码的开头，在 Render() 函数中的翻译之前，该灯应该与相机“仍然放置”，并且世界将围绕它们移动 - 这听起来很简单。但这似乎不起作用。当我侧身站立时，大部分墙壁都亮着（当我转向另一侧时完全黑暗）。

我的另一个问题是正常的。我很确定，我的法线没有很好地指定，但不知道它们应该是什么样子。我正在为墙壁使用三角形条（理论上是为了提高效率，但实际上这只是我的任性），我无法找到解决方案如何为由三角形条制成的直墙指定法线（如何为面附加法线，当我实际上只有两个顶点定义一个面）。制作一堵简单的四边形墙并为一个面附加四个垂直的、一个单位向量的长度也没有任何改进。

我既不能正确处理 OpenGL 状态机的参数，尤其是衰减 - 代码中的任何更改似乎都不会影响最终照明。

我目前不知道在哪里搜索以及阅读关于 OpenGL 中光照的内容。我想让它变得超级简单，没有额外的库（glu.h 除外）。你能帮我解决这个问题或向我推荐任何有用的知识来源（需要简单的例子......）吗？

# facebook - Facebook 时间线在 1970-01-01 之前没有帖子

> ID：11311586
> 
> 赞同：3
> 
> 时间：2012-07-03T13:06:57.517
> 
> 标签：facebook, unix-timestamp

我正在管理公司的 FB 频道，目前我正在尝试上传品牌历史的图片。但是，当我在 1970 年 1 月 1 日之前添加图像或发布时，上传功能会冻结。我想这是数据库的问题，与 UNIX 时间戳有关。有人对我有提示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T13:10:02.633

他们可能正在使用不能包含之前的日期的[纪元时间戳](http://en.wikipedia.org/wiki/Epoch)`1/1/1970`。无论如何......这是一个错误，应该在他们的[错误系统上报告给 Facebook](https://developers.facebook.com/bugs/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T16:23:55.900

我可以确认里程碑可以放在 1970 年之前。谢谢。我已经向 FB 发送了大量关于照片问题的错误报告，但没有结果。我猜没有超过 42 岁的人在 Facebook 工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T17:08:01.360

值得一提的是，文本帖子和里程碑仍然可以追溯到 Unix 时代之前，只是不能回溯照片或视频。

我也有同样的问题快两个月了。（三个错误报告没有改变任何东西！）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T23:51:40.877

Facebook 似乎只使用纪元时间戳来确定他们现在是否要保存日期。

在我可以将日期设置为 UNIX 时间戳之前，它们仍然正确显示。但是，如果您想更改日期，您只能选择 1970 年 1 月 1 日或更晚的日期。

令我惊讶的是，这个错误仍然没有得到修复。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T14:10:52.130

是的，谢谢！在 1970 年 1 月 1 日之前发布里程碑确实有效，包括照片。我添加了一个里程碑，并尝试在发布里程碑的同时添加照片（来自现有照片库），并在发布里程碑后编辑里程碑以添加照片。尚未尝试视频（因为我在 1970 年之前没有任何动态图像！）。见 FB 的 Swords Aviation。当然，您确实需要在要发布的日期之前设置时间线的开始日期。

# cordova - 使用 phonegap 进行群聊

> ID：11311591
> 
> 赞同：-1
> 
> 时间：2012-07-03T13:07:11.230
> 
> 标签：cordova

我对 phonegap 很陌生，我只想知道，是否可以在 phonegap 中创建群聊移动应用程序？如果是，请提供一些有用的材料..

谢谢你，罗纳克沙阿

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:17:51.550

[这是开始寻找的好地方](http://docs.phonegap.com/en/1.9.0/index.html)。在请其他人进行研究之前，最好先自己尝试并提出具体问题。

# c# - 递归的stackoverflow

> ID：11311596
> 
> 赞同：5
> 
> 时间：2012-07-03T13:07:20.473
> 
> 标签：c#, exception, recursion, stack-overflow

> **可能重复：**
> [运行时异常，递归太深](https://stackoverflow.com/questions/4106708/runtime-exception-recursion-too-deep)

我在开发 ac#.net 程序时遇到问题，我已将其简化为一个简单的问题，我需要了解如果我这样调用函数，为什么这段代码会引发 stackoverflow 异常：

```
CheckFunc(16000); 
```

但如果我这样称呼它，效果很好

```
CheckFunc(1000); 
```

这是功能：

```
private void CheckFunc(Int32 i)
{
    if (i == 0)
        MessageBox.Show("good");
    else
        CheckFunc(i - 1);
} 
```

试图使代码尽可能简单......

我知道有一个堆栈溢出但是哪个堆栈？我怎样才能解决这个问题 ？

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-03T13:12:52.537

问题确实是*堆栈溢出*。

## 为什么会发生：

堆栈是一个特殊的内存区域，其中存储了一些东西：

*   函数的局部变量
*   功能参数
*   （最重要的）函数返回地址。当你从一个函数返回时，处理器就是这样知道从哪里返回的。

问题是这个内存区域是有限的。递归调用将在此堆栈上添加大量数据，并快速填充它。

## 如何修复它：

有几种方法：

*   减少变量的数量，如果你在递归函数中有一个局部数组，你就是在找麻烦。
*   减少函数的参数数量（这里显然不是这样）
*   减少递归调用的次数。

如果这还不够，唯一的解决方案是找到一个迭代解决方案。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-03T13:10:47.860

这是因为您根本没有足够的堆栈空间来递归 16000 次。

递归应该几乎总是比这低得多！否则，重写为循环。你不能以任何其他方式解决这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T13:19:12.600

您需要了解堆栈，以及它在程序执行中的使用方式。简而言之，您的函数失败是因为它递归调用自身太多次。栈和堆一样，具有有限的大小，但与堆不同的是，它通常要小得多。每次您的函数调用自身时，堆栈中的一些内存用于保存有关函数调用和函数本地变量的信息（在您的示例中对变量 i 的引用）。这称为堆栈帧。当由于递归太深而创建了太多堆栈帧时，就会出现堆栈溢出。

您应该删除 CheckFunc 中的递归，而是从循环中调用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T13:10:53.630

C#中有[调用堆栈](http://en.wikipedia.org/wiki/Call_stack)的限制。在第一种情况下，你超过了这个数字，所以你得到*Stack Overflow Exception*。

没有办法解决这个问题，但你自然可以通过减少递归深度来逃避它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T13:12:32.707

我宁愿做它迭代。如果你有 16000 个递归步骤，它会非常慢（我认为）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-03T13:31:20.067

这基本上是因为您对递归的使用是错误的。

溢出的栈是进程的调用栈。堆栈用于发送给方法的参数、调用的返回地址以及方法中的局部变量。

对于每次调用，都会将其添加到堆栈中：

```
+---------------------+
|                     |
         ...
|                     |
+---------------------+  <-- stack pointer before call
| parameter: int      |
+---------------------+
| return address      |
+---------------------+
| stack frame for     |
|   local variables   |
+---------------------+  <-- stack pointer in the call 
```

每次递归调用都会向堆栈添加另一个块，并且由于堆栈空间有限（至 2 MB IIRC），如果您执行的递归深度达到数千级，您将填满堆栈。

当以一种好的方式使用递归时，您宁愿尝试将要处理的数据分成两半，而不是剃掉一块。基本上：

```
private void CheckFunc(int i) {
  if (i == 0) {
    MessageBox.Show("good");
  } else {
    CheckFunc(i / 2);
  }
} 
```

对于任何整数值，此递归永远不会超过 31 级。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-03T13:19:23.973

调用堆栈溢出。

每当您调用一个函数（或任何编程语言所称的“子例程”、“方法”等）时，CPU 都会存储函数完成后它必须返回的位置的地址。此外，“本地”变量或参数通常也存储在堆栈中。

该堆栈有一个固定的大小，通常可以通过一些魔法来增加——当你创建一个线程时，你通常可以提供一个堆栈大小，当你链接一个程序时，可能还有一个链接器选项来设置堆栈大小。

基本上，您的代码在堆栈上创建了 16000 个“i”副本，以及 16000 个返回指针，以及编译器在函数调用时可能存储在堆栈中的任何内容。在您的另一次尝试中，您只制作了 1000 个这些东西的副本。

当然，您正在做一些称为“尾递归”的事情，它应该被优化掉；不要问我为什么你的编译器不这样做。

# jsf - 为 xpages 开发库控件

> ID：11311597
> 
> 赞同：0
> 
> 时间：2012-07-03T13:07:27.387
> 
> 标签：jsf, xpages, xpages-extlib

我正在为 Xpages 开发一个库控件，在创建时需要一些帮助。

我将创建一个控件，它读取配置文件并在表格中创建控件，如编辑框、复选框组等控件。

所以现在我的问题：

我可以从 Exlib 启动控件还是必须自己实现它们？

如果我可以从 Exlib 中使用它们，谁能解释我怎么做？

我希望它清楚我的意思，如果不是，请向我询问更多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T20:44:41.117

在创建自己的组件时，如果您要密切复制扩展库组件中已有的某些行为，我强烈建议您扩展该组件并添加所需的内容以适应您的不同功能。这使事情变得更加容易，并且您不必围绕可能放置组件的每个小场景进行编码。

但是，如果您正在开发一个与任何扩展库或核心组件完全不同的组件，那么只需确保您的组件扩展了 UIComponent 或 UIComponentBase。如果走这条路，您还需要创建自己的渲染器来扩展渲染器。这将构建组件的屏幕表示。同样，如果核心组件或扩展库组件中已经有一些东西可以密切模仿您的需求，那么让您的渲染器扩展该渲染器。另外，不要忘记在 faces-config 文件中包含渲染器定义，在 xsp-config 文件中包含组件定义，否则您的组件将无法工作。

至于从 extlib 启动控件......我假设你的意思是你可以在运行时将它们注入页面。如果是这样，答案是肯定的。将输入文本字段添加到存在 ID 为“someContainer”的容器（即面板、div、span 等）的页面

```
XspInputText input = new XspInputText();
input.setValue("someValue");
input.setId("someID");
UIComponent container =  FacesContext.getCurrentInstance().getViewRoot().findComponent("someContainer");
container.getChildren().add(input); 
```

要查看所有核心和扩展库组件的 api，请查看[XPages 控件文档](http://www.openntf.org/xspext/xpages%20extension%20library%20documentation.nsf/xpages-doc/Controls.html)。有关创建自己的组件的更完整教程，请查看我的博客，以在 nsf 中创建自定义组件，将它们放入库的步骤几乎相同： [第 1](http://xprentice.gbs.com/A55BAC/keithstric.nsf/default.xsp?documentId=E54655CC596DF550852579840054E294)部分， [第 2 部分](http://xprentice.gbs.com/A55BAC/keithstric.nsf/default.xsp?documentId=82770C11FA7B9B21852579C100581766)，还有一个示例数据库在第 2 部分的帖子中。

# java - android 复制 StringBuffer

> ID：11311599
> 
> 赞同：0
> 
> 时间：2012-07-03T13:07:28.897
> 
> 标签：java, android

我已经声明了两个字符串缓冲区，例如，

```
private StringBuffer buf = new StringBuffer(1024);
private StringBuffer bufRetro = new StringBuffer(1024); 
```

在以下代码中，在 bufRetro = buf 之前，buf 具有适当的填充值。但是，复制后，两者都没有内容。如何从另一个设置一个stringBuffer？谢谢你。

```
if(this.v_Id){

    buf.append(ch, start, length);

    if (bufType.equals(bufOld)){

        buf = bufRetro.append(buf);

    }

    myParsedXMLDataSet.setId(buf.toString());

    bufOld = bufType;

    bufRetro.delete(0, bufRetro.length());
    bufRetro = buf;

    Log.d("id", buf.toString());

    buf.delete(0, buf.length()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:13:20.380

> ***如何从另一个设置一个stringBuffer？***

怎么样

```
bufRetro.setLength(0);   // copy content from buf to bufRetro
bufRetro.append(buf);

buf.setLength(0);        // if you want to clear the original one. 
```

# css - 如何设置子两个div 50%, 50% 与父div

> ID：11311604
> 
> 赞同：11
> 
> 时间：2012-07-03T13:07:56.903
> 
> 标签：css

我有以下一种模式。如何将第一个和第二个 childDiv 类的 css 更改应用到父 div 的 50%

如何为子 div 设置 50%、50%？

```
<div class="parentDiv">
    <div class="childDiv">   // 50% width
   </div>
   <div class="childDiv">   // 50% width
   </div>
</div> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-03T13:10:49.333

```
.childDiv{
   display:inline-block;
   width:50%;
} 
```

**[例子](http://jsfiddle.net/poikl/YEmT8/1/)**

重要笔记：

1.  不要在 div 之间留下空格
2.  您不妨使用浮点数而不是`display:inline-block;`
3.  如果示例中的元素不对齐，则您的浏览器不支持`box-sizing`，则只需省略边框即可（仅用于说明目的）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-03T13:22:33.097

这里有一个技巧，你需要注意。如果您在第一个 div 的关闭和第二个 div 的打开之间放置任何空格，则由于浏览器中显示的空间，您的 50% 将不起作用。

有几种方法可以做到这一点。如果您只针对现代浏览器（IE9+、FF、Chrome、Safari），您可以使用`inline-block`：

```
<style>
    .childDiv {
        display: inline-block;
        width: 50%;
    }
</style>

<div class="parentDiv">
    <div class="childDiv">   // 50% width
    </div><div class="childDiv">   // 50% width
    </div>
</div> 
```

但是，IE7 不支持`inline-block`，因此您可以使用“老式”方法，使用浮点数：

```
<style>
    .childDiv {
        float: left;
        width: 50%;
    }
</style>

<div class="parentDiv">
    <div class="childDiv">   // 50% width
    </div><div class="childDiv">   // 50% width
    </div>
    <div style="clear: both"></div>
</div> 
```

如果您想确保两列的宽度完全相同并且它们之间仍然有一个小的间隙，请使用不同样式的浮动。请注意，此方法不需要您消除 div 之间标记中的空格，只要您使用的宽度小于 50%：

```
<style>
    .childDiv {
        width: 49.5%;
    }
    .left { float: left; }
    .right{ float: right; }
</style>

<div class="parentDiv">
    <div class="childDiv left">   // 49.5% width
    </div>
    <div class="childDiv right">   // 49.5% width
    </div>
    <div style="clear: both"></div>
</div> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-03T13:19:56.307

首先将父宽度设置为某个值。

```
.parentDiv
{
width: //insert width of the parentDIV
} 
```

然后设置 childDiv 宽度。

# php - PHP 5.3.10 connection with Sybase 12.5.4 using Zend Framework 1.11

> ID：11311613
> 
> 赞同：0
> 
> 时间：2012-07-03T13:08:19.297
> 
> 标签：php, zend-framework, sybase

I must connect my Zend Framework 1.11 application with sybase 12.5.4.

I need to know how to do that from Windows 7 AND from debian 6.

I had installed sybase client on my Windows and enabled the php_sybase_ct extension (sybase_ct appears on my phpinfo), but I even could connect with sybase_connect.

The following code:

```
$cnn = sybase_connect('server.com.br,port', 'user', 'psw', "iso_1", 'app');
sybase_select_db('db', $cnn); 
```

returns an error:

```
sybase_connect() [function.sybase-connect]: Sybase: Unable to connect in C:\wamp\www\testesybase.php on line 3 
```

Someone can, please, help me?

I've been looking for it for a looong time!

Thank you!

**Update:**

Since I got sybase_connect() connect working, now my issue is: How to make Zend Framework 1.11 connect on Sybase 12.5.4?

I read that PHP uses pdo_dblib - *PDO(sybase: ...)* - to do that, but PHP5.3.10 on Windows doesn't have this driver anymore!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:19:27.020

```
    $cnn = sybase_connect('server.com.br ,port ', 'user', 'psw', "iso_1", 'app');

```

改变这个

```
    $cnn = sybase_connect('server.com.br', 'user', 'psw', "iso_1", 'app');

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:44:48.983

[我通过使用 PDO Driver for FreeTDS](http://www.freetds.org/)让它与 Zend Framework 一起工作！

**FreeTDS 安装**

您需要安装*php5-sybase*（Sybase 连接器提供连接到 MSSQL Server 和 Sybase 所需的库）和*freeTDS*软件和*unixODBC*。

要安装和配置 FreeTDS，请参阅[此链接](https://coderwall.com/p/21uxeq/connecting-to-a-mssql-server-database-with-php-on-ubuntu-debian)。

此外，[此链接](http://www.chandlerfamily.org.uk/2012/12/freetds-sql-server-from-debian-apache-php/)提供了有关 FreeTDS 安装的良好信息。

**配置连接字符串并与 Zend Framework 1.11 连接**

在 上配置您的连接`/etc/freetds/freetds.conf`，如下所示：

```
[MyServer]
host = <<ip>>
port = <<port>>
# use 8.0 for newer versions of SQLSERVER
    tds version = 8.0
    # text size don't need to be such a high value, its just an example
    text size = 4294967295
    client charset = UTF-8 
```

然后，在 Zend Framework 1.11 上，像这样配置您的连接：

```
;; BANCO DE DADOS LINUX
database.adapter                = PDO_MSSQL
database.params.pdoType         = dblib

database.params.host            = MyServer
database.params.dbname          = <<dbname>>
database.params.username        = <<username>>
database.params.password        = <<passwd>>
database.params.driver_options.charset = UTF-8

database.isDefaultTableAdapter  = true 
```

# c++ - Compile error with the Contours example of OpenCV 2 cookbook

> ID：11311614
> 
> 赞同：1
> 
> 时间：2012-07-03T13:08:25.230
> 
> 标签：c++, opencv

I tried the example code in this book to draw the contours in the original picture. However, the following code won't compile successfully under Qt with Mingw 4.4\.

```
 // Eliminate too short or too long contours
   int cmin= 100;  // minimum contour length
   int cmax= 1000; // maximum contour length
   std::vector<std::vector<cv::Point> >::
              const_iterator itc= contours.begin();
   while (itc!=contours.end()) {
      if (itc->size() < cmin || itc->size() > cmax)
         itc= contours.erase(itc);
      else 
         ++itc;
   } 
```

Warning:comparison between signed and unsigned integer expressions Warning:comparison between signed and unsigned integer expressions Error:no matching function for call to 'std::vector, std::allocator > >, std::allocator, std::allocator > > > >::erase(__gnu_cxx::__normal_iterator, std::allocator > >*, std::vector, std::allocator > >, std::allocator, std::allocator > > > > >&)'

It says that the itc doesn't have the method size(). However, the book really writes like that. Did I miss something?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:26:22.097

那是因为[std::vector::erase](http://en.cppreference.com/w/cpp/container/vector/erase)返回 an `iterator`，并且您分配给 a `const_iterator`。这编译：

```
...
std::vector<std::vector<cv::Point> >::iterator itc= contours.begin();
                                       // ^
while (itc!=contours.end()) {
   if (itc->size() < cmin || itc->size() > cmax)
       itc= contours.erase(itc);
   else 
       ++itc;
} 
```

# xml - Autoincremental auxiliar index var for XQuery nested loops (w. dynamical count)

> ID：11311618
> 
> 赞同：0
> 
> 时间：2012-07-03T13:08:58.167
> 
> 标签：xml, loops, iteration, xquery, counter

I want a solution for udnerstanding how to hold a real loop counter as Java in xQuery, not a workaround for my particular simplified demo. I know in xQuery 3.0 there is a count reserved word for FLOWR structures but its useless pre-Saxon 9.something. Here my example.

```
 for $elem at $x in /Data/* return element Elem {       
            attribute Name   {concat('_',$x,'.',name($elem))},      
            (: ...10 lines of code... :)        
            for $subelem at $y in $elem/*       
            (: ...5 lets... :)      
            return element SubElemen {
               attribute Name {concat('_',$x,'.',$y,'_',name($subelement))},
               (...20 lines of other attrs and elements ...)
           for $subsubelem at $z in $subElem/SubSubElement
               let $absIterIndex := 'THIS IS WHAT IM LOOKING'
               let $subSubElemName := concat('_',$absIterIndex,'_',name($subElem))
            return
                                 element SubSubElem {
                 attribute Name {$subsubelem}, 
                   (..100 lines more playing with $x, $y, $absIterIndex, all lets for that iteration, attributes depending on them...) 
```

The output is something like this (real data hidden and simplified)

```
 <Elem Name="_1.Name">
      <SubElem Name="_1.1_Name">
           <SubSubElem Name="_1.First"/>
           <SubSubElem Name="_2.Second"/>
           <SubSubElem Name="_3.Third"/>
      </SubElem Name="_1.1_Name">
      <SubElem Name="_1.2_Name">
           <SubSubElem Name="_4.Fourth"/>
           <SubSubElem Name="_5.Fifth"/>
           <SubSubElem Name="_6.Sixth"/>
           <SubSubElem Name="_7.Seventh"/>
      </SubElem Name="_1.1_Name">
  <Elem Name="_2.Name">
      <SubElem Name="_2.1_Name">
           <SubSubElem Name="_8.Eighth"/>
           <SubSubElem Name="_9.Ninth"/>
           <SubSubElem Name="_10.Tenth"/>
           <SubSubElem Name="_11.Eleventh"/>
      </SubElem Name="_2.1_Name">
      <SubElem Name="_2.2_Name"/>
  </Elem Name="_2.Name">
  <Elem Name="_3.Name">
      <SubElem Name="_3.1_Name">
           <SubSubElem Name="_12.Twelven"/>
      </SubElem Name="_3.1_Name">
      <SubElem Name="_3.2_Name"/>
  </Elem Name="_3.Name"> 
```

This is a extension of a previous question [Autoincremental auxiliar index var for XQuery nested loops](https://stackoverflow.com/questions/11135635/autoincremental-auxiliar-index-var-for-xquery-nested-loops), which I accepted the solution for the xQuery 3.0 counter, and then propose an alternative for manually doing it. But know i think the perspective is different and more concrete, and with a new example. If you think it should be deleted just tell it to me.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:27:51.063

您可以做的是在嵌套迭代的结果序列上添加额外的传递，即

```
declare variable $script := 'abc defg h ijklm nop 
                                 qrs tu vw
                                 xy z';
for $letter at $lettersTotal in
(
  for $line at $numLine in tokenize($script, '(\r\n?|\n\r?)')
  for $word at $numWord in tokenize(normalize-space($line),' ')
  for $codepoint at $numLetter in string-to-codepoints($word)
  return codepoints-to-string($codepoint)
)
return ($lettersTotal, $letter) 
```

这返回

```
1 a 2 b 3 c 4 d 5 e 6 f 7 g 8 h 9 i 10 j 11 k 12 l 13 m 14 n 15 o 16 p 17 q 18 r 19 s 20 t 21 u 22 v 23 w 24 x 25 y 26 z 
```

如果幸运的话，您的 XQuery 处理器可以流式传输结果而无需具体化序列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:26:43.260

新问题 - 新答案。

但原理是一样的：先产生一个未编号的结果，然后再应用编号。这可能需要重写结果。

插入您的代码而不是下面的 XML 注释。

```
declare function local:renumber($number, $string)
{
  replace($string, 'THIS IS WHAT IM LOOKING', string($number))
};

declare function local:renumber($subSubElems, $number, $nodes)
{
  for $node in $nodes
  return
    typeswitch ($node)
    case attribute()              return attribute {node-name($node)} {local:renumber($number, $node)}
    case processing-instruction() return processing-instruction {name($node)} {local:renumber($number, $node)}
    case comment()                return comment {local:renumber($number, $node)}
    case text()                   return text {local:renumber($number, $node)}
    default (: element() :) return
      element {node-name($node)}
      {
        local:renumber
        (
          $subSubElems, 
          if ($subSubElems[. is $node]) then count($subSubElems[. << $node]) + 1 else $number, 
          ($node/@*, $node/node())
        )
      }
};

let $result := <result>{<!-- your code here -->}</result>
return local:renumber($result//SubSubElem, 0, $result/node()) 
```

# mysql - Ruby on Rails - Devise login is case sensitive in production

> ID：11311619
> 
> 赞同：0
> 
> 时间：2012-07-03T13:09:02.530
> 
> 标签：mysql, ruby-on-rails, devise

I have a rails app that is using Devise perfectly in development. I have altered it, following the official Devise documentation to use a username instead of an email address. I am also using MySQL, instead of SQLite.

When logging in, in development, I can type in "admin" to login as the user "Admin". But in production, "admin" does not work and requires me to type in the case sensitive "Admin".

I'm assuming it's a different setting in my MySQL database?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T15:03:55.540

我在这里假设您有一个用于登录的属性，称为`login`. 如果是`username`，请使用它而不是`login`下面。在您的设计初始化程序中，有一个设置：

```
config.case_insensitive_keys = [ :email ] 
```

改成

```
config.case_insensitive_keys = [ :email, :login ] 
```

这将：

> 在创建或修改用户以及用于验证或查找用户时，这些密钥将被小写。默认为：电子邮件。

因此，您可能需要更新一次 Admin 的登录信息，但是如果您输入 Admin 或 admin，它将找到并进行身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:12:01.023

一般来说，为了设计我们会按照以下方式做一些事情。您能否检查一下您的 AdminUser 模型中是否存在这种情况

```
validates :email,:presence => true,
    :format => {:with=>email_regex,:message => "not a valid email"},
    :uniqueness => {:case_sensitive => false} 
```

# objective-c - Change NSView subviews order

> ID：11311628
> 
> 赞同：7
> 
> 时间：2012-07-03T13:09:24.583
> 
> 标签：objective-c, cocoa, nsview, subviews

I'm working at a custom control that presents different handles. I want to be sure that the selected handle has a Z-index grater then the others handles.

Is there a way to swap view order? I found this function `sortSubviewsUsingFunction:context:` but i can't understand whether this is the right solution.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-08-09T07:21:05.807

Cocoa 在 macOS 10.0 中引入了一个新的 API。
它类似于iOS，你可以传递另一个视图显示在下方或上方。

```
[self.view addSubview:myView positioned:NSWindowBelow relativeTo:myViewInBackground]; 
```

查看[文档](https://developer.apple.com/documentation/appkit/nsview/1483640-addsubview)；根据我的经验`NSWindowBelow`，`NSWindowAbove`但似乎颠倒了。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-03T13:20:10.780

这很简单，您可以使用比较 2 个子视图的函数来重新排序它们。这是一个基于视图标签的简单解决方案：

```
[mainView sortSubviewsUsingFunction:(NSComparisonResult (*)(id, id, void*))compareViews context:nil];

...

NSComparisonResult compareViews(id firstView, id secondView, void *context) { 
    int firstTag = [firstView tag];
    int secondTag = [secondView tag];

    if (firstTag == secondTag) {
        return NSOrderedSame;
    } else {
        if (firstTag < secondTag) {
            return NSOrderedAscending;
        } else { 
            return NSOrderedDescending;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-07-03T13:19:21.467

是的，`sortSubviewsUsingFunction:context:`可以做你想做的事，但是如果你只想让一个特定的视图位于（无序的）其他视图之上，那可能就有点过头了。在这种情况下，您应该`bringSubviewToFront:`研究`UIView`. 这样，您可以在 IBAction 中执行类似的操作来调出句柄：

```
[self.view bringSubviewToFront: handle]; 
```

假设句柄是一个/继承自 UIView 的对象。如果这不是您要查找的内容，那么请务必使用`sortSubviewsUsingFunction:context:`，在这种情况下，您需要更改每个子视图的各个标签属性，并进行相应的排序。

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2012-07-03T13:18:56.593

正如我从您的问题中了解到的那样，您可以循环查看所有视图并将它们添加到数组中，然后您可以选择使用索引将它们添加到视图中......并且您具有以下功能。

```
[self.view insertSubview:view1 atIndex:2]
[self.view insertSubview:view1 aboveSubview:0]
[self.view insertSubview:view1 belowSubview:1] 
```

然后你可以根据需要交换它的顺序..

# android - Issue with FLAG_ACTIVITY_NEW_TASK ,FLAG_ACTIVITY_CLEAR_TOP- Android

> ID：11311629
> 
> 赞同：0
> 
> 时间：2012-07-03T13:09:31.683
> 
> 标签：android, android-layout, android-intent

I have an application installed in my device. I am trying to launch this application A from the buttonclick of another application B using the following code:

```
Button buttonStart = (Button)findViewById(R.id.buttonStart);
    buttonStart.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            Intent intent = new Intent();
            intent.setClassName("co.abc.android.test",
                    "co.abc.android.test.Abc");
                    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                startActivity(intent);

        }
    }); 
```

Following is my issue:

*   I launch application A

*   I press home button

*   From application B's button onclick, I launch app A again

*   Press return button to exit application A, which was now launched from app B
*   Eventhough I exit the application A on pressing return button, I am again taken to the main activity of app A, which I had launched initially.

On referring for this issue, I have read in many places that using **Intent.FLAG_ACTIVITY_CLEAR_TOP** would resolve this. But since I call app A's intent from a place in which I have no access to its context, it gives me the following error.

```
01-01 00:09:54.694: ERROR/AndroidRuntime(283): *** FATAL EXCEPTION IN SYSTEM PROCESS: WindowManagerPolicy
    android.util.AndroidRuntimeException: Calling startActivity() from outside of an Activity  context requires the FLAG_ACTIVITY_NEW_TASK flag. Is this really what you want?
    at android.app.ContextImpl.startActivity(ContextImpl.java:884)
    at com.android.internal.policy.impl.LockScreen$DialerMethods.onTrigger(LockScreen.java:218)
    at com.android.internal.widget.multiwaveview.Dialer$2.run(Dialer.java:366)
    at android.os.Handler.handleCallback(Handler.java:605)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:137)
    at com.android.server.wm.WindowManagerService$PolicyThread.run(WindowManagerService.java:752) 
```

How can I resolve this issue, such that when I press the return button, I do not see the same activity(if launched before) again?

Any help is much appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:17:16.453

尝试添加内部`onClick`方法：

```
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T17:01:20.947

启动另一个应用程序的最佳方式是这样的：

```
Intent intent = new Intent();
intent.setClassName("co.abc.android.test", "co.abc.android.test.Abc");
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
intent.setAction(Intent.ACTION_MAIN);
intent.addCategory(Intent.CATEGORY_LAUNCHER);
startActivity(intent); 
```

这模拟了当用户从可用应用程序列表中选择应用程序时 Android 所做的事情。

假设“co.abc.android.test.Abc”是该应用程序的根活动（即：带有 intent-filter 的活动`ACTION_MAIN/CATEGORY_LAUNCHER`），这将启动应用程序（如果它尚未运行）或只是带来应用程序从后台到前台（如果它已经在运行）。

# itext - Does iText honors color transparency?

> ID：11311630
> 
> 赞同：7
> 
> 时间：2012-07-03T13:09:33.267
> 
> 标签：itext

I'm using iText 5.2.1 and I tried to use the BaseColor constructor with alpha channel, that is

```
public BaseColor(final int red, final int green, final int blue, final int alpha) 
```

but when I actually draw text or shapes it seems that the alpha channel isn't taken into account. For example if I try this

```
 Font f = ....;
  f.setColor(new BaseColor(130, 130, 130, 50);
  PdfContentByte cb = writer.getDirectContent();
  ColumnText.showTextAligned(cb, Element.ALIGN_LEFT, new Phrase("my text", f),
      refPointX, refPointY, 0); 
```

the text it's written with the color specified but without the alpha information, that is with the color with 100% opacity. The same thing happens if I try to draw some shape and I specify a fill color with transparency.

In the book *iText in Action second edition* there's nothing about transparency in colors.

Am I wrong?

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-04T07:37:53.130

我在 itext 邮件列表中找到了一些东西，我尝试过并且......有效！这是一个未记录的功能。无论如何，以下代码可以满足我的需要：

```
PdfContentByte cb = writer.getDirectContent();
PdfGState gState = new PdfGState();
gState.setFillOpacity(0.1f);
cb.setGState(gState); 
```

如果绘制文本或形状，它们有 10% 的不透明度。我`gState.setStrokeOpacity`还可以设置笔画的不透明度。

# c# - disabling clientidmode

> ID：11311631
> 
> 赞同：1
> 
> 时间：2012-07-03T13:09:34.493
> 
> 标签：c#, asp.net, html, radio-button

I have a `Repeater` like this

```
 <asp:Repeater runat="server" DataSourceID="HeaderFooterSqlDataSource">
        <HeaderTemplate>
            <table border="0" width="100%">
        </HeaderTemplate>
        <ItemTemplate>
            <tr>
                <td>
            <input runat="server" id="SelectRadio" type="radio" 
 name="HeaderFooter" onclick='SelectAndSetHeaderFooter(this);" %>' />
                </td>
            </tr>
        </ItemTemplate>
        <FooterTemplate>
            </table>
        </FooterTemplate>
    </asp:Repeater> 
```

Now here when this `Repeater` is rendered the `name` attribute of my `input radio "SelectRadio"` gets auto generated but name attribute for all the radiobuttons in my repeater should be same so that they can work like a group & get checked / unchecked automatically according to other elements in that group, So how can I overcome this situation ??

**Edit**

I got the solution my self, Actually I have defined my input radio control as `runat="server"` because I thought otherwise `Eval()` binding wouldn't work but I was wrong `Eval()` binding does work without `runat="server"` , So when I remove that attribute name doesn't generated automatically and everything is fine now, But thanx to all for sparing time for my question.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:53:35.400

您想查看`asp:RadioButton`控件 (http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.radiobutton.aspx)。

特别是`GroupName`该控件上的属性可用于“指定一组单选按钮以创建一组互斥的控件”

所以粗略地说：

```
<asp:RadioButton runat="server" id="SelectRadio"
 GroupName="HeaderFooter" %>' /> 
```

**编辑：**似乎在这种特殊情况下 GroupName 没有做它的设计。[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.radiobutton.groupname.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.radiobutton.groupname.aspx)最后在社区内容中讨论了它，但归结为它使用当前的NamingContainer 仍然作为其名称的一部分，而不仅仅是使用您给它的组名。感谢神秘的 user1429080 在评论中引起我的注意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T13:32:04.553

您应该使用内置的[RaidoButtonList](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.radiobuttonlist.aspx)控件，而不是破解它。

```
<asp:RadioButtonList id="RadioButtonList1" runat="server">
    <asp:ListItem>Item 1</asp:ListItem>
    <asp:ListItem>Item 2</asp:ListItem>
    <asp:ListItem>Item 3</asp:ListItem>
    <asp:ListItem>Item 4</asp:ListItem>
    <asp:ListItem>Item 5</asp:ListItem>
    <asp:ListItem>Item 6</asp:ListItem>
</asp:RadioButtonList> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T13:44:34.187

您的单选按钮不作为一个组的原因是因为您有 runat="server" 这将导致 name 和 id 属性以父母的 id 为前缀。以下将导致单选按钮表现为一个有凝聚力的组（注意缺少 runat="server"）：

ascx代码：

```
<asp:Repeater ID="uxRadioSelections" runat="server">
        <HeaderTemplate>
          <table border="0" width="300px">
        </HeaderTemplate>
        <ItemTemplate>
            <tr>
              <td>
                <input type="radio" value='<%# Eval("Name") %>' name="HeaderFooter" onclick="alert(this.value);"><%# Eval("Name") %></input>
              </td>
            </tr>
        </ItemTemplate>
        <FooterTemplate>
          </table>
        </FooterTemplate>
    </asp:Repeater> 
```

后面的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
   string[] names = new string[] {"Alvin", "Simon", "Theodore"};
   uxRadioSelections.DataSource = names.Select(x => new { Name = x });
   uxRadioSelections.DataBind();
} 
```

但是，以下内容不会作为一个有凝聚力的组执行：

```
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    Test
    <asp:Repeater ID="uxRadioSelections" runat="server">
        <HeaderTemplate>
          <table border="0" width="300px">
        </HeaderTemplate>
        <ItemTemplate>
            <tr>
              <td>
                  <asp:RadioButton Text='<%#Eval("Name") %>' runat="server" />
              </td>
            </tr>
        </ItemTemplate>
        <FooterTemplate>
          </table>
        </FooterTemplate>
    </asp:Repeater>
</asp:Content> 
```

由于您提到的命名约定，这些单独的单选按钮将找不到彼此。ASP.NET 使用 RadioButtonLists 来克服这个问题：

ascx代码：

```
<asp:RadioButtonList ID="uxRadioButtons" runat="server">
</asp:RadioButtonList> 
```

后面的代码：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        string[] names = new string[] {"Alvin", "Simon", "Theodore"};
        uxRadioButtons.DataTextField = "Name";
        uxRadioButtons.DataValueField = "Name";
        uxRadioButtons.DataSource = names.Select(x => new { Name = x });
        uxRadioButtons.DataBind();
    } 
```

这不会为您提供精细控制，但会提供对选择的轻松服务器端访问。如果您只需要与 javascript 相关的功能和增加格式的灵活性，那么第一种格式（与您提供的几乎相同）可能是您最好的选择。祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-12T12:33:24.560

另一个选项是将 ClientIDMode 设置为“静态”，这会将其值设置为指定 ID 的值。由于它是一个转发器控件，因此生成的所有项目都将具有相同的生成 ID。所以你只需设置：

```
<asp:RadioButton runat="server" id="SelectRadio" GroupName="HeaderFooter" ClientIDMode="static">' /> 
```

这意味着所有生成的控件都将具有指定的相同 ID，即“SelectRadio”。这可能有问题，也可能没有问题，您应该小心，这正是您想要的。

请注意，ClientIDMode 是 ASP.Net 4.0 的一个特性。更多信息在这里：[ASP.NET 4.0 中的 ClientIDMode](https://weblog.west-wind.com/posts/2009/Nov/07/ClientIDMode-in-ASPNET-40)和这里​​：[MSDN](https://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode(v=vs.110).aspx)。我希望这有帮助。

[更新 1：您可以从之前在 StackOverflow 上提出的这个](https://stackoverflow.com/questions/6057490/is-there-any-drawback-to-set-clientidmode-static-on-every-object-set-on-main)问题中获得更多见解。（虽然它是 jQuery）。

# javascript - 使用 jquery 鼠标滚轮

> ID：11311637
> 
> 赞同：-1
> 
> 时间：2012-07-03T13:10:00.990
> 
> 标签：javascript, jquery, jquery-plugins, mousewheel

我下载了 jquery 插件“jquery.mousewheel.min.js”，但我不知道如何使用这个插件。例如如何制作：如果正在运行滚轮，在控制台中写入：“UP”，否则在控制台中写入：“DOWN”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:12:14.447

你在找这个吗？

```
$(window).mousewheel( function(e, delta){
     console.log( delta > 0 ? "UP":"DOWN");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:08:55.857

请不要发布另一个问题作为答案。

```
var repeat = true;
$(window).mousewheel( function(e, delta){
  if (repeat) {
    console.log( delta > 0 ? "UP":"DOWN");
    repeat = false;
  }
}); 
```

只是您进一步问题的一个简单示例。

如果您需要更多帮助，请按预期使用该网站/如果您不知道，请阅读常见问题解答等。

# matlab - MatLab - 具有许多边向量的 histc

> ID：11311639
> 
> 赞同：2
> 
> 时间：2012-07-03T13:10:03.733
> 
> 标签：matlab, vectorization, binning

考虑一下：

```
a = [1 ; 7 ; 13];
edges = [1, 3, 6, 9, 12, 15];

[~, bins] = histc(a, edges)

bins =

     1
     3
     5 
```

现在我想有相同的输出，但每个`a`值有一个不同的“边”向量，即一个矩阵而不是一个边向量。例子：

```
 a = [1 ; 7 ; 13];
    edges = [ 1, 3, 6 ; 1, 4, 15 ; 1, 20, 30];

edges =

     1     3     6
     1     4    15
     1    20    30

    indexes = theFunctionINeed(a, edges);

    indexes = 
            1   % 1 inside [1, 3, 6]
            2   % 7 indide [1, 4, 15]
            1   %13 inside [1, 20, 30] 
```

我可以`histc`在一个`for`循环内做到这一点，我试图避免循环。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T13:36:21.690

如果您将数组转换为元胞数组，您可以尝试

```
a = {1 ; 7 ; 13};
edges = {[ 1, 3, 6 ];[ 1, 4, 15] ; [1, 20, 30]};

[~, indexes] = cellfun(@histc, a, edges,'uniformoutput', false) 
```

这导致

```
indexes = 

    [1]
    [2]
    [1] 
```

**~编辑~**

要将矩阵转换为元胞数组，您可以使用`num2cell`：

```
a  = num2cell(a); 
edges = num2cell(edges, 2); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T15:16:37.820

你也可以这样做：

```
a = [1; 7; 13];
edges = [1 3 6; 1 4 15; 1 20 30];

bins = sum(bsxfun(@ge, a, edges), 2) 
```

结果：

```
>> bins
bins =
     1
     2
     1 
```

# mono - monotouch 对话框单元格大小和部分标题颜色

> ID：11311642
> 
> 赞同：0
> 
> 时间：2012-07-03T13:10:09.373
> 
> 标签：mono, xamarin.ios, monotouch.dialog

我正在使用单点触控对话框来生成视图。我设法通过继承 DialogViewController 来更改背景颜色，但是与部分标题的对比使文本难以阅读。如何更改部分标题颜色？

我还在同一视图中使用 StyledStringElement 作为按钮。我似乎无法弄清楚如何缩小这个元素，使它看起来更像一个按钮。请提供例子。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T03:55:51.480

为了解决这个问题，我使用了一个带有 HandleTapped 处理程序的 glassbutton，如下所示。

```
 var butt = new GlassButton(new RectangleF(80,150,150,50))
        {
            Font = UIFont.BoldSystemFontOfSize(22),
            NormalColor = UIColor.Red,     
        };

    void HandleTapped (GlassButton obj)
    {

    } 
```

至于颜色，我[在这里](https://stackoverflow.com/questions/5590161/monotouch-dialog-section-font)使用了 miguel 的解决方案。希望这对未来的人有所帮助。

# iphone - 识别多个 UITextField 和行索引

> ID：11311643
> 
> 赞同：2
> 
> 时间：2012-07-03T13:10:15.797
> 
> 标签：iphone, xcode, uitableview, uitextfield

这是我的问题：

我有一个模型类数组（比方说，'addressModel' 具有地址、街道和城市字段。）。现在我有一个自定义单元格，其中包含模型类中三个字段的三个 UITextField。一旦用户结束编辑，我想（验证＆）将特定文本字段中的数据添加到相应的模型对象。（例如：用户结束编辑 addressTextField，然后 addressModel.address = addressTextField.text）。

我们如何识别用户选择的文本字段和 indexPath.row？就我而言，我需要两者都知道？有什么帮助吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:16:17.213

如果你的视图控制器实现了`UITextFieldDelegate`协议，你就可以接收到`textFieldDidEndEditing`方法调用。在那里，您可以获得用户刚刚编辑的字段的标签。创建单元格时，您可以指定某种整数标记方案，以便您可以对用户当时实际编辑的部分、行和特定字段进行逆向工程。您可以执行以下操作：

```
textField.tag = (indexPath.section * 10000) + (indexPath.row * 100) + (textFieldIndex); 
```

假设您每行的文本字段不超过 100 个，或者每节不超过 100 行，那么这个特定的方案应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:16:07.663

您可以在用户完成编辑时验证数据我的意思是您可以在 UITextField 委托方法中验证数据：

```
- (void)textFieldDidEndEditing:(UITextField *)textField; 
```

在这里无需找出编辑了哪个文本字段，因为您将获得该文本字段。如果您想确定哪一行，那么您可以将除了行之外的标签分配给文本字段，在此基础上您将知道哪一行文本字段被编辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T13:29:31.633

设置每个文本字段的单独标签..并在 didEndEditing: 方法上使用以下代码....

```
 if(textField.teg == FIRST_TAG){
      // do your code
  }
  else if(textField.teg == SECOND_TAG){
         // do your code
 }...

 and soo on.... 
```

这可能会帮助你...

# java - 如何在java中创建聊天客户端

> ID：11311648
> 
> 赞同：0
> 
> 时间：2012-07-03T13:10:28.890
> 
> 标签：java, multithreading, sockets, network-programming, communication

我有一个人们可以登录的Java应用程序（并使用数据库做各种事情，但这并不重要）。我可以使用 .getInetAddress() 来获取登录服务器的人员的 IP 地址，但是我不确定线程​​之间的通信方式。我正在尝试向这个预先存在的程序添加聊天服务。

我的程序使用标准的多线程服务器，clinet 是单线程 AWT Action Listener 程序。做这个的最好方式是什么？我的代码包含一个包含 main 的类，该类创建一个新的“客户端处理程序”类并创建一个新线程来处理它。目前没有线程间通信，线程在它自己的套接字端口上产生并在服务器上独立运行。我之前的想法包括：

使用 ObjectInputStream 将客户端置于阻塞状态并等待客户端接收消息（而不是忙于等待按下按钮），条件是当客户端执行某个操作（编辑字段）时，它将释放阻塞 I/O 并执行该方法，然后返回程序的阻塞 I/O“等待”阶段。

我不确定的事情：

1.  如果我调用阻塞 I/O，AWT ActionListener 会解除阻塞 I/O 并跳转到事件处理程序吗？

2.  如果客户端在代码中（而不是在阻塞的 InputStream 上）并且发送了一条消息，那么服务器是否会知道在发送消息之前等待程序回到 inputStream 上，还是发送消息并创建一个队列，或更糟糕的现金，问题。

3.  服务器是多线程的，如果 John 在 192.168.1.100 而 Larry 在 192.168.1.152 并且 John 想向 Larry 发送消息，我如何从线程处理 *.100 到线程处理 *.152 获取消息所以它可以在正确的套接字上输出到正确的客户端。

我的另一个想法（也许更容易）是让客户端多线程，连接到不同端口上的服务器，并使用一组完全不同的套接字连接来处理事件。在这种情况下，我可以只使用阻塞 I/O 等待，当我收到消息时，输出它，然后返回阻塞 I/O。生产代码和聊天代码之间的错过通信不会有任何问题，从这个角度来看会更好，但这意味着我需要为每个连接的客户端在不同的端口上有 2 个打开的连接。该程序最终将有成千上万的用户同时连接到它，我不想用一个应用程序占用所有服务器端口。

他们是否有其他方法可以做到这一点而不会淹没端口或冒着通信错误的风险？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:55:56.787

您的客户端应该使用 3 个线程。所有 gui 交互都应从 EDT 完成。然后，您应该有一个用于套接字 InputStream 的线程和一个用于套接字 OutputStream 的线程（这两个块都可能阻塞）。当您想发送消息时，您的 gui 线程应该使用某种线程安全队列将消息传递给 OutputStream 线程。InputStream 线程接收到的任何消息都应该使用类似于`SwingUtilities.invokeLater`将消息推送到 gui 的东西。

我不确定你在说什么关于套接字和端口。 *每个*连接到服务器的客户端都需要一个单独的套接字连接（这将涉及一个单独的端口）

# android - Android GCM 检索 RegistrationID

> ID：11311660
> 
> 赞同：1
> 
> 时间：2012-07-03T13:11:01.730
> 
> 标签：android

我正在尝试从我的 android 模拟器中检索我的 GCM 注册 ID，但是当我调试程序崩溃时。这是我的 MainActivity 代码：

```
 try {
       GCMRegistrar.checkDevice(this);       //  <-- Crashes here
       GCMRegistrar.checkManifest(this);
       final String regId = GCMRegistrar.getRegistrationId(this);
       if (regId.equals("")) 
       {
         GCMRegistrar.register(this,Sender_ID);
       }
       else
       {
         Log.v("Registrationnnnnn", "Already registered");
       }
   }
   catch(Exception e)
   {
       Log.e("ErrorHAi",e.getMessage());
   } 
```

我读过这行检查设备是否支持 GCM。但我已经从 SDK Manager 附加功能安装了 Google Cloud Messaging。我也安装了

Android SDK 工具：第 20
版 Android SDK 平台工具：第 12
版 Android 4.1 Api 16

当我提到

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="16" /> 
```

这在我的清单文件中运行，但正如我在上面的代码中提到的那样崩溃。但是如果我将 targetSdkVersion 更改为 xx，如此处所述[，](http://developer.android.com/guide/google/gcm/gs.html#android-app)它会显示 Install_Failed_OLDER_SDK。

我目前在 Android 4.1 API 级别 16 上运行此应用程序。

**更新：**

我的日志猫：

```
07-03 20:34:25.878: E/Trace(906): error opening trace file: No such file or directory (2)
07-03 22:30:57.748: E/Trace(1016): error opening trace file: No such file or directory (2)
07-03 22:31:01.998: E/AndroidRuntime(1016): FATAL EXCEPTION: main
07-03 22:31:01.998: E/AndroidRuntime(1016): java.lang.RuntimeException: Unable to instantiate receiver com.pack.gcm.MyBroadcastReceiver: java.lang.ClassNotFoundException: com.pack.gcm.MyBroadcastReceiver
07-03 22:31:01.998: E/AndroidRuntime(1016):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:2210)
07-03 22:31:01.998: E/AndroidRuntime(1016):     at android.app.ActivityThread.access$1500(ActivityThread.java:130)
07-03 22:31:01.998: E/AndroidRuntime(1016):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1271)
07-03 22:31:01.998: E/AndroidRuntime(1016):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-03 22:31:01.998: E/AndroidRuntime(1016):     at android.os.Looper.loop(Looper.java:137)
07-03 22:31:01.998: E/AndroidRuntime(1016):     at android.app.ActivityThread.main(ActivityThread.java:4745)
07-03 22:31:01.998: E/AndroidRuntime(1016):     at java.lang.reflect.Method.invokeNative(Native Method)
07-03 22:31:01.998: E/AndroidRuntime(1016):     at java.lang.reflect.Method.invoke(Method.java:511)
07-03 22:31:01.998: E/AndroidRuntime(1016):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
07-03 22:31:01.998: E/AndroidRuntime(1016):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
07-03 22:31:01.998: E/AndroidRuntime(1016):     at dalvik.system.NativeStart.main(Native Method)
07-03 22:31:01.998: E/AndroidRuntime(1016): Caused by: java.lang.ClassNotFoundException: com.pack.gcm.MyBroadcastReceiver
07-03 22:31:01.998: E/AndroidRuntime(1016):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
07-03 22:31:01.998: E/AndroidRuntime(1016):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
07-03 22:31:01.998: E/AndroidRuntime(1016):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
07-03 22:31:01.998: E/AndroidRuntime(1016):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:2205)
07-03 22:31:01.998: E/AndroidRuntime(1016):     ... 10 more 
```

现在我不知道为什么它会给出这样的错误，尽管我已经安装了所有的先决条件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:32:34.197

大多数Android G2DM不支持Android模拟器，因为它基本上取决于设备有一个google帐户，而android模拟器没有这样的帐户，所以当它尝试注册设备时，它没有找到所需的google帐户要完成注册，请查看[c2dm-only-registered-google-account-receives-messages-from-server](https://stackoverflow.com/questions/7271653/c2dm-only-registered-google-account-receives-messages-from-server)

# eclipse - eclipse 编辑器，在使用特定视角时如何使用文本编辑器（主题）？

> ID：11311663
> 
> 赞同：0
> 
> 时间：2012-07-03T13:11:23.220
> 
> 标签：eclipse, eclipse-plugin, editor, themes, perspective

选择使用特定视图/透视图时，是否可以更改编辑器中的“外观颜色”（或主题）？

更具体地说，我开始使用 python，我希望有一个不同的主题，但是当切换到 Java 时，我想使用默认编辑器。

可行吗？

![在此处输入图像描述](../Images/e1047135a37dd2d2e70b75b664129044.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:06:02.007

我相信，没有什么可以让主题取决于视角。

直接的解决方案是安装一个 Python 插件，然后它有自己的编辑器（和自己的语法突出显示设置）。但是，您必须对每种文件类型都这样做。

除此之外，您最好的选择可能是[Eclipse Colorer](http://colorer.sourceforge.net/eclipsecolorer/index.html)插件，它可以根据文件类型进行语法着色。

（免责声明：我自己从未使用过任何这些）。

# java - Java：需要传递引用的列表侦听器？

> ID：11311667
> 
> 赞同：0
> 
> 时间：2012-07-03T13:11:29.380
> 
> 标签：java

我想基本上传递一个动态列表的引用。在 Class2 中，即使原始列表发生更改，getTheList 方法也应该继续获取新列表。我应该添加一个侦听器还是必须以更好的方式更改我的设计才能做到这一点？

```
class1{
    public class1(){
       List orginalList=getOrginalList();
       Class2 c2=new Class2(orginalList);
    }

    public List getOrginalList(){ 
          //here read and return the updated orginal
         //List from a web service
    }           
}

class2{
    List myList;
    public class2(List realList){
        myList=realList;
    }
    private int getTheList(){
        //when I call this method I want to get the updated list
        return  myList.size();
    }    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:14:36.707

从你的评论...

```
//something here later changes the orginal list but In class2 
//I still keep getting the old list! 
```

...看起来您希望有两个列表对象。没有。只有一个列表，您有两个参考。如果您想制作列表的副本，则需要明确地执行此操作。赋值运算符*从不*创建对象的副本。它只是将一个表达式的值复制到一个变量中。该表达式的值*始终*是引用或原始值——*绝不*是对象。

# objective-c - Objective C 获取 html 页面的链接

> ID：11311670
> 
> 赞同：0
> 
> 时间：2012-07-03T13:11:47.543
> 
> 标签：objective-c, web-services, networking, web

我是 Objective C 编程的新手，我正在尝试制作一个返回 HTML 页面中所有链接地址的应用程序。在那种情况下，我不应该只解析 HTML，而是让这些链接从页面的网络请求中拦截它们。

是否可以拦截应用程序的网络请求之类的？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:30:11.620

巧合的是，Ray Wenderlich 相当棒的 iOS 教程网站在最后一个小时[发布了这篇文章](http://feedproxy.google.com/%7Er/RayWenderlich/%7E3/ACvPzelpOFc/how-to-parse-html-on-ios)。由于您是 iOS/ObjC 的新手，我强烈建议您通读一遍。

> 假设您想在网页中查找一些信息并在您的应用程序中以自定义方式显示它。
> 
> 这种技术称为“刮擦”。我们还假设您已经考虑过从应用程序内部抓取网页的替代方案，并且非常确定这就是您想要做的。
> 
> 那么问题来了——您如何以最可靠的方式以编程方式挖掘 HTML 并找到您正在寻找的部分？信不信由你，正则表达式[不会削减它！](http://www.codinghorror.com/blog/2009/11/parsing-html-the-cthulhu-way.html)

在你认为正则表达式可能真的是一个答案之前，[请阅读这个](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)。

# javascript - 使用 Node.js 构建网站的最佳实践

> ID：11311672
> 
> 赞同：79
> 
> 时间：2012-07-03T13:11:50.700
> 
> 标签：javascript, node.js, model-view-controller

我想知道如何使用 Node.js 从头开始​​开发网站。我明白我怎么*可能*做到这一点，但我对*最佳*设计实践感兴趣。

我需要这个理论网站：

1.  做很多AJAX
2.  直截了当
3.  相对较小
4.  连接到...假设是 MySQL 服务器

在 PHP 中，构建一个非常小的网站非常简单——我在 Apache 和 MySQL 服务器上设置了 PHP，然后执行以下操作：

*   `includes/db/`其中有 connect.php 用于连接到数据库，具有常用数据库相关功能的文件等
*   `includes/layout/`其中有footer.php、header.php和其他布局相关的东西
*   `includes/users/`处理用户相关的操作

然后 PHP 只是让您构建页面并将这些文件包含在一起以形成一个网站 - 我可以这样做：

```
<?php
   require_once('inclues/users/user_session.php');
   require_once('inclues/db/connect.php');
   require_once('inclues/design/header.php')
?>

// Other php or html or related content relating to the page

<?php
   require_once('inclues/.../footer.php');
?> 
```

我想知道 Node.js 中可能有什么相似之处——我正在寻找一种尽可能**简单**、**快速**和**直接**的方法来实现这一点。

如果答案不简单，我会喜欢一本书推荐，我不介意阅读。

我喜欢基于事件的编程，我真的很喜欢 JavaScript 的能力，而且我对 Node.js 感到非常兴奋。我想从一开始就学习如何以正确的方式开发这种东西。

* * *

## 回答 #1

> 赞同：184
> 
> 时间：2012-07-03T13:50:21.890

先从坏消息说起：由于[Node.js](http://en.wikipedia.org/wiki/Node.js)是一项相当年轻的技术，我想您会发现创建一个完整的网站并维护/操作它的过程将与您目前习惯的完全不同。

[Josh3736](https://stackoverflow.com/users/201952/josh3736)补充说：*一旦你弄清楚 Node.js 及其各种包（Connect、Express）是如何工作的，我发现你可以非常快速地开发新网站。*

Node.js 目前存在的粗糙边缘，再加上其快速的开发速度和所涉及的所有模块，可能会使事情变得复杂，并使事情变得不像你想要的那样简单、快速和直接。

把它排除在外，这是个好消息：

[Node Package Manager，NPM](http://npmjs.org/)有很多很好的工具和框架来扩展 Node.js 的基本功能，使其适合创建 web 服务器。

最值得注意的是[Express 框架](http://expressjs.com/guide.html#creating-a%20server)，它包含运行网络服务器所需的几乎所有内容（包括 cookie、会话和路径路由）。此外，Express 支持 partials，它会处理您的页眉和页脚包括在内。

[Express 建立在Sencha 的 Connect](http://www.senchalabs.org/connect/)之上。Cookie 和会话实际上由 Connect 提供支持。Express 可以简化您的路由并处理视图/部分。因此，如果您不需要 Express 附带的所有花里胡哨，您可以选择 Connect。

如果您喜欢为这些部分使用模板，[Jade 模板引擎](http://jade-lang.com/)可以为您加快速度。尽管[Josh3736](https://stackoverflow.com/users/201952/josh3736)指出 Jade 速度慢且对空格很重要。可以在[此处](https://github.com/joyent/node/wiki/Modules#wiki-templating)找到更完整的概述，其中包括他最喜欢的[doT](https://github.com/olado/doT)。（我个人仅将 Node.js 用于[`socket.io`](http://socket.io/)基于应用程序，因此在模板方面他是比我更好的来源）。

您*可以使用*[db-mysql](http://nodejsdb.org/db-mysql/)模块从 Node.js 连接到 MySQL ，但如果您不需要它，因为您正在访问连接到已经存在的系统的数据，我建议使用更多...'modern ' 方法，即使用[NoSQL](http://en.wikipedia.org/wiki/NoSQL)数据库，就像大多数 Node.js 项目似乎做的那样。通过[Mongoose的](http://mongoosejs.com/)[MongoDB](http://www.mongodb.org/)是流行的方式。

或者，如果它只是存储您感兴趣的对象，则只需使用[Redis](https://github.com/mranney/node_redis)（无论如何您可能会在某个时候需要它）。

网站完成后，您必须部署它并确保它继续运行。有很多方法可以做到这一点，比如使用内置集群支持或使用功能更友好的[`forever`](https://github.com/nodejitsu/forever/)npm 模块。[有关更多信息，请参阅我的这个 SO 问题。](https://stackoverflow.com/q/11084279/813718)

**结论**：

我想要得到的是：

询问在 Node.js 中构建网站的最佳实践是什么，与询问在 PHP 中构建网站的最佳方法是什么大致相同：100 个开发人员会给你 100 个不同的答案。

NPM 拥有各种出色的框架，这些框架极大地简化了所涉及的许多任务，但这一切都取决于偏好哪一个才是真正要走的路。

正如我所说，Node.js 仍然是一项相当年轻的技术，因此还没有任何框架或附加工具成为“事实上的标准”。对于您尝试做的大多数事情，可能有各种替代方案，并且希望您的代码在更新期间使用它们中的大部分时会中断，因为 Node.js 本身和大多数模块的开发节奏很快。你必须跟上。

**把它们放在一起**：

正如我所说，我对 Node.js 的主要生产用途是能够使用[`socket.io`](http://socket.io/)，所以我没有任何好的生产示例（而且我即将离开一个当之无愧的假期，我没有'也没有时间把一个放在一起）。不过也有一些很好的例子：

*   [使用 Express 和 Jade 进行设置*和部署*](http://shapeshed.com/creating-a-basic-site-with-node-and-express/)
*   [一个使用 Express、Jade 和 MongoDB 的非常完整的博客示例](http://howtonode.org/express-mongodb)
*   [结合 Restify（Express 的扩展）、Backbone.js 和 Mongoose](http://backbonetutorials.com/nodejs-restify-mongodb-mongoose/)

同样，要走的路（以及随后的示例）很大程度上取决于您的最终目标和所选择的技术，但幸运的是，有大量资源可用于所有可用的选择。大多数模块使用有据可查的 GitHub 存储库，并包含与最流行模块组合的示例（请参阅`/examples/`似乎存在于大多数存储库中的目录）。

祝你好运！（感谢[Josh3736](https://stackoverflow.com/users/201952/josh3736)纠正我的错误。）

# performance - 将 Delphi 7 应用程序移植到 Delphi 2007 后性能下降

> ID：11311677
> 
> 赞同：0
> 
> 时间：2012-07-03T13:12:02.037
> 
> 标签：performance, delphi, delphi-7, delphi-2007

我最近将旧版 Delphi 7 应用程序移植到 Delphi 2007。我的用户一直在抱怨应用程序的某些部分在新版本中明显变慢。我确实在端口中升级到了较新版本的 Developer Express 组件，但从那以后我又恢复了原状，并且速度仍然下降，所以我相信我已经消除了 DevExpress 的原因。除此之外，代码可能至少有 98% 相同。什么可能导致 D2007 中的性能下降？多年来我一直在使用 2007 年，没有任何此类问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:45:39.023

使用性能[分析器](https://stackoverflow.com/questions/368938/delphi-profiling-tools)。SmartBear 有一个功能强大的[免费](http://smartbear.com/products/free-tools/aqtime-standard)软件。还有其他几个免费和商业分析器。

找到瓶颈后，如果不明显是什么原因造成的，请将代码粘贴到您的问题中，我们可以尝试对其进行故障排除。

# scorm - SCORM 2004 第 3 版中 mapInfo 元素中的 writeSatisfiedStatus

> ID：11311679
> 
> 赞同：1
> 
> 时间：2012-07-03T13:12:05.660
> 
> 标签：scorm, scorm2004

如果某个目标的 writeSatisfiedStatus 为真，在这种情况下，跟踪模型的哪些部分会从本地目标复制到共享的全局目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:13:54.410

编辑：答案：`satisfied status`和`Objective Progress Status`。满足状态由 LMS 根据`success status`SCO 设置的值确定。如果成功状态设置为“未知”，则满意状态设置为空。如果成功状态设置为“通过”，则满意状态设置为真。如果成功状态设置为“失败”，则满意状态设置为假。

# r - 在 corresp() 中声明丢失的行和列

> ID：11311681
> 
> 赞同：0
> 
> 时间：2012-07-03T13:12:19.897
> 
> 标签：r

所以我是 R 新手 - 如果我因无知而犯了明显的错误，请原谅我。

我正在尝试进行对应分析。我已经使用`read.csv()`. 然后我正在使用`corresp()`从 MASS 包中使用。一切正常。

然后我返回 CSV 文件（从 Excel 导出）并删除行（我想从分析中排除的样本），然后重复`read.csv()`和`corresp()`步骤，但现在我收到以下错误：

```
Error in corresp.matrix(as.matrix(x), ...) : empty row or column in table
In addition: Warning message:
In corresp.matrix(as.matrix(x), ...) :
  negative or non-integer entries in table 
```

“附加”错误不是问题，并且总是在执行时弹出`corresp()`“附加”错误不是问题，并且在处理非整数第一行是问题的根源，声称行/列是空的。

我逐行检查了 CSV，绝对没有空单元格（A1 除外 - 就像第一个成功的 CSV 一样）。事实上，新的 CSV（删除了一些行）与正常工作的文件几乎相同`corresp()`。

如果有人有解释或可以提出一种继续进行的方法，那将是一个巨大的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:42:41.823

为了从原始 .csv 文件中删除一些行（或样本），您可以在 R 中轻松完成，并且由于您已经阅读了该文件，因此您应该不会收到任何错误。

第一步是读取您的原​​始 .csv 文件：

```
# set the header TRUE if you have any header in your .csv file.
data = read.csv(file = "", header = TRUE) 
```

现在假设您要删除第 3、5、10 和 20 行：

```
data1 = data[-(c(3, 5, 10, 20)),] 
```

然后，您可以轻松地将 data.new 数据框用作新数据集。

您应该注意，为了使用 corresp()，您的数据集中应该有整数列和非负列。与上面的代码类似，您还可以选择数据集的某些列。例如，为了仅选择数据集的第 3、4 和 6 列（假设这些列是唯一的非负整数），您可以说：

```
data2 = data[,c(3, 4, 5)] 
```

希望能帮助到你。

# regex - perl 用制表符替换空格

> ID：11311684
> 
> 赞同：5
> 
> 时间：2012-07-03T13:12:22.767
> 
> 标签：regex, perl

我想用制表符替换每行开头的每两个空格。我尝试了以下方法：

```
s/^(\s{2})+/\t/gm; 
```

它没有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T17:05:27.983

如果您正在逐行读取文件：

```
$line =~ s/\G[ ]{2}/\t/g; 
```

如果您已吞下整个文件：

```
$file =~ s/(?:\G|^)[ ]{2}/\t/mg; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T13:15:27.293

[这个](http://codepad.org/2HM1ua1r)怎么样？

```
my $test_string = "  some test stuff\ndivided to\n  provide the challenge";
$test_string =~ s/^[ ]{2}/\t/gm;
print $test_string; 
```

解释：`\s`实际上不是一个单一的符号别名，而是一个字符“空白”类：它包括两者`\n\`，`\t`例如。如果您只想替换空格，请在正则表达式中使用空格；设置一个字符类（而不只是`/^ {2}/...`对我来说更具可读性（并且不会与`/x` [修饰符](http://perldoc.perl.org/perlre.html#Modifiers)中断）。

此外，如果您只想替换*两个*空格符号，则不需要使用`+`量词。

更新：如果您需要替换*每*两个空格，我想我会改用这个：

```
$test_string =~ s#^((?:[ ]{2})+)#"\t" x (length($1)/2)#gme; 
```

...或者只是 ikegami 的答案中的 \G 锚。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T13:44:51.687

请记住，`+`量词的意思是“一个或多个”，它应用于`\s{2}`表示“正好两个空白字符”。举个简单的例子，考虑一个创建零到十个空格的字符串并尝试将它们与类似模式匹配的程序。

```
#! /usr/bin/env perl

use strict;
use warnings;

for (0 .. 10) {
  $_ = " " x $_;
  printf "%-13s %s\n", "[$_]:", /^(\s{2})+$/ ? "match!" : "no match.";
} 
```

输出：

```
[]：不匹配。
[ ]：不匹配。
[ ]： 匹配！
[ ]：不匹配。
[ ]： 匹配！
[ ]：不匹配。
[ ]： 匹配！
[ ]：不匹配。
[ ]： 匹配！
[ ]：不匹配。
[ ]： 匹配！
```

如所写，您的模式将单个 TAB 字符替换为逻辑行首的任何*正偶数个空白字符。*

您没有提供更广泛的代码上下文。从`/m`和`/g`开关的使用来看，我假设您有一些文本，可能是文件的全部内容，您希望将其作为一个整体进行操作。下面的程序使用 here-document 模拟了这种假设情况，并仅将每行的前两个空格替换为 TAB。

```
#! /usr/bin/env perl

use strict;
use warnings;

$_ = <<EOText;
   Three
  Two
    Four
     Five
Zero
 One
EOText

s/^  /\t/mg;

# for display purposes only
s/\t/\\t/g;

print; 
```

输出：

```
\t 三
\t两个
\t 四
\t 五
零
 一
```

请注意，额外注释`s///`不会保留在您的代码中。它可以在空格和 TAB 字符之间添加对比。

如果这是你的程序的唯一目的，它就变成了一个简单的单行。要使用修改后的内容创建新文件，请使用

```
$ perl -pe 's/^ /\t/' 输入文件>输出文件
```

就地编辑看起来像

```
$ perl -i.bak -pe 's/^ /\t/' 输入文件
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T13:15:15.433

作为替代解决方案，`/m`您可以在没有修饰符的情况下使用正向后视。这种方法对于需要检查其他内容的情况很有用，而不仅仅是行首，所以当`\m`修饰符无济于事>>

```
$_ = "  123\n  456\n  789";
s/(?:(?<=^)|(?<=\n))\s{2}/\t/g;
print $_; 
```

在上面的示例代码中，字符串开头或换行符后面的每个`/g`双空格都被替换为 tab 。`\s{2}``(?<=^)``(?: .. | .. )``(?<=\n)``\t`

# python - 在 Powershell 中需要帮助以进行 Python 编程

> ID：11311685
> 
> 赞同：3
> 
> 时间：2012-07-03T13:12:24.773
> 
> 标签：python, powershell, windows-7, windows-xp, wxpython

所以，我买了这本书叫“Learn Python the Hard Way”，在学习过程中，因为它是我的第一门编程语言。

我现在面临的问题是我无法在 Powershell for Windows 7 中创建目录。我完全按照书中所说的“ `mkdir mystuff`”进行操作，但出现以下错误。

我想要的只是让目录变成这样

```
C:\Documents and Settings\User\mystuff 
```

我该如何解决这个问题？非常感谢您的帮助。

在 Windows XP 中一切正常，但在 Windows 7 中却不行。

```
 PS C:\Windows\System32\WindowsPowerShell\v1.0> mkdir mystuff
    New-Item : Access to the path 'mystuff' is denied.
   At line:38 char:24
    +         $scriptCmd = {& <<<<  $wrappedCmd -Type Directory @PSBoundParameters
    }
         + CategoryInfo          : PermissionDenied: (C:\Windows\Syst...ll\v1.0\mys
      tuff:String) [New-Item], UnauthorizedAccessException
     + FullyQualifiedErrorId : CreateDirectoryUnauthorizedAccessError,Microsoft
   .PowerShell.Commands.NewItemCommand 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T13:15:53.367

Windows 阻止您将目录添加到 System32 文件夹。默认情况下，您无权这样做，因为实际上您不应该这样做。

而是尝试将目录更改为更合理的位置并在那里创建目录。%UserProfile% 是[您的主目录的别名](http://en.wikipedia.org/wiki/Home_directory#Default_Home_Directory_per_Operating_System)。

```
cd %UserProfile%
mkdir mystuff 
```

顺便说一句，这在 XP 中起作用的原因是 XP 对安全性或权限不是很严格。这是错误的。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T13:16:23.320

根据提示，您正在尝试在 PowerShell 目录路径中创建一个文件夹，但您没有相应的权限来执行此操作。试试这个：

```
mkdir $env:USERPROFILE\mystuff 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T13:35:45.127

如果您想创建目录`C:\Documents and Settings\User\mystuff`，请尝试明确说明：

```
cd "C:\Documents and Settings\User\"
mkdir mystuff 
```

玩得开心学习 Python。:-)

# oracle - 尝试使用 SSIS 连接到 ORACLE

> ID：11311687
> 
> 赞同：1
> 
> 时间：2012-07-03T13:12:31.213
> 
> 标签：oracle, ssis

我正在尝试使用“Microsoft Connector for Oracle by Attunity”从我的开发服务器（WIN 2008 R2）上的 SSIS 中连接到 ORACLE。我输入了所有信息，但出现以下 ORA-12154 错误：

![在此处输入图像描述](../Images/cc7cf7c4b997a015a4f30b394b485247.png)

**更新**以下是与上述错误相关的日志信息。

致命的 NI 连接错误 12170。

```
VERSION INFORMATION:
    TNS for 32-bit Windows: Version 11.2.0.1.0 - Production
    Windows NT TCP/IP NT Protocol Adapter for 32-bit Windows: Version 11.2.0.1.0 - Production
  Time: 03-JUL-2012 09:32:34
  Tracing not turned on.
  Tns error struct:
    ns main err code: 12535

TNS-12535: TNS:operation timed out
    ns secondary err code: 12560
    nt main err code: 505

TNS-00505: Operation timed out
    nt secondary err code: 60
    nt OS err code: 0
  Client address: <unknown> 
```

**问题** 打开跟踪的过程是什么？

**更新** 当我从开发服务器执行 TNS Ping 时，我收到 TNS-12535 错误：

![在此处输入图像描述](../Images/10ace5ebc64f9035f24577ce946cfe35.png)

但是，当我使用 Oracle SQL Developer 使用看似相同的信息进行连接时，它可以毫无问题地连接。

当我从本地计算机（WIN 7）执行 TNS Ping 时，它成功解决。

**问题**

有人对我如何让它在我的开发服务器上的 SSIS 中工作有任何建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T18:45:05.127

我知道这是 9 个月大，但也许我的建议可能会帮助未来的搜索者。您遇到的错误可能是由几个因素引起的：

1.  您的 /app//product//client_1/admin/network 目录中没有 tnsnames.ora 或 sqlnet.ora 文件。如果您使用开发工具安装客户端并运行 net config 程序，则可以轻松生成一个。这两个文件中的任何一个中的任何错误都会导致您的连接立即失败。这可能是一个巨大的头痛！

2.  您可能需要为文件位置添加一个名为 TNS_ADMIN 的环境变量和上面的值。

3.  您可能需要将 Oracle 客户端的文件位置添加到 PATH 变量中。

4.  您可能需要一个名为 TNS_ADMIN 的字符串值注册表条目，位于名为 TNS_ADMIN 的 HKEY_Local_Machine\Software\Oracle 文件夹的根目录中，其值与 tnsnames.ora 和 sqlnet.ora 的文件位置相同。

我会首先从第一名（最重要的）开始，然后向下移动。节省自己的时间，而不是简单地从 Oracle 网站下载完整的安装程序并以 b/c 方式安装即时客户端，它会将所有正确的条目放在注册表中并执行您的 PATH 位置。安装客户端后总是重启！我希望这有帮助。

# c# - C# 显式类型转换枚举

> ID：11311689
> 
> 赞同：2
> 
> 时间：2012-07-03T13:12:35.007
> 
> 标签：c#, typecast-operator

我需要创建一个传递给下面函数的任何枚举类型的对象列表。我不知道它将是什么类型，但它可以是我项目中许多可能的枚举中的任何一种。

```
public static List<object> CreateEnumList(Enum enumeration)
{ 
    List<object> returnList = new List<object>();
    for (int enumIndex = 0; enumIndex < Enum.GetNames(enumeration.GetType()).Length; enumIndex++)
        returnList.Add((enumeration.GetType())enumIndex);
    return returnList;
} 
```

如何让类型转换正常工作？返回值必须是对象列表。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T13:17:19.723

这就够了

```
public static List<object> CreateEnumList(Enum enumeration)
{ 
    return Enum.GetValues(enumeration.GetType()).Cast<object>().ToList();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T13:18:31.657

**解决方案 1**

[通用枚举到列表转换器 (C#) 一个用于实用程序库...](http://devlicio.us/blogs/joe_niland/archive/2006/10/10/Generic-Enum-to-List_3C00_T_3E00_-converter.aspx)

它采用枚举类型并返回一个用每个枚举项填充的通用列表。

```
public static List<T> EnumToList<T>()
{
    Type enumType = typeof (T);

    // Can't use type constraints on value types, so have to do check like this
    if (enumType.BaseType != typeof(Enum))
        throw new ArgumentException("T must be of type System.Enum");

    Array enumValArray = Enum.GetValues(enumType);

    List<T> enumValList = new List<T>(enumValArray.Length);

    foreach (int val in enumValArray) {
        enumValList.Add((T)Enum.Parse(enumType, val.ToString()));
    }

    return enumValList;
} 
```

* * *

**解决方案 2**

这将返回`IEnumerable<SomeEnum>`一个枚举的所有值。

```
Enum.GetValues(typeof(SomeEnum)).Cast<SomeEnum>(); 
```

如果你想让它成为一个`List<SomeEnum>`，只需`.ToList()`在`.Cast<SomeEnum>()`.

```
public static List<T> CreateEnumList<T>(Enum enumeration)  
{
    return Enum.GetValues(typeof(T)).Cast<T>().ToList();
} 
```

**在此处查看：[如何将枚举转换为 C# 中的列表？](https://stackoverflow.com/questions/1167361/how-do-i-convert-an-enum-to-a-list-in-c)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T13:18:17.163

[`Enum.Parse`](http://msdn.microsoft.com/en-us/library/essfb559.aspx)将完全满足您的需要：

```
returnList.Add(Enum.Parse(enumeration.GetType(), enumIndex.ToString())); 
```

例如，这打印`b`：

```
enum myEnum { a, b, c }
static void Main(string[] args)
{
    var e = Enum.Parse(typeof(myEnum), "1");
    Console.WriteLine(e);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T13:29:53.807

怎么样

```
public IList<object> GetBoxedEnumValues<TEnum>()
{
    Type enumType = typeOf(TEnum);

    if (!enumType.IsEnum)
    {
        throw new NotSupportedException(
            string.Format("\"{0}\" is not an Enum", enumType.Name));
    }

    return Enum.GetValues(enumType).Cast<object>().ToList();      
} 
```

# java - 员工商店的编辑方法。（使用哈希图）

> ID：11311691
> 
> 赞同：0
> 
> 时间：2012-07-03T13:12:43.593
> 
> 标签：java, methods, hashmap, edit

嘿，谁能帮我了解如何为我的公司应用程序做一个编辑方法。我之前曾就搜索方法寻求帮助。而且我认为编辑方法可能涉及搜索方法。

这是我的代码：

```
EmployeeStore.

//Imports.
import java.util.HashMap;
//********************************************************************
public class EmployeeStore
{
    HashMap<String, Employee> map;

//Constructor.  
    public EmployeeStore()
    {
        map = new HashMap<String,Employee>();
    }
//********************************************************************
//Hashmap Methods.
//Add to the Hashmap : Employee.
    public void add(Employee employee)
    {

        map.put(employee.getEmployeeName(), employee);
    }
//********************************************************************
//Remove from the Hashmap : Employee.
    public void remove(String key)
    {
      //Remove the Employee by name.
        map.remove(key);
    }
//********************************************************************
//Clear the Hashmap : Employee.
    public void clear()
    {
        map.clear();
    }
    //********************************************************************
//Print the Hashmap : Employee. 
    public void print()
    {
        System.out.println("\n********Employee's in the Company.********");
        for (Employee employee : map.values())
        {
            //System.out.println(employee); to print the toString of Employee class
            //or:
            System.out.println("Employee Name:\t" + employee.getEmployeeName());
            System.out.println("Employee Id:\t" + employee.getEmployeeId());
            System.out.println("E-mail:\t"+ employee.getEmployeeEmail());
        }

    }
    public Employee get(String name){
        return map.get(name);
    }
    /*public void searchByName ()
    {
        //(for(Employee e : map.values()) {...}) 
        //and check for each employee if his/her email matches the searched value
        for(Employee e : map.values())
        {
            System.out.println(e);
            map.equals(getClass());

        }
    }*/
//********************************************************************
    public Employee searchByName(String name) 
    {
        Employee employee = map.get(name);    
        System.out.println(employee);
        return employee;
    }
//********************************************************************

    public Employee searchByEmail(String email) 
    {
        for (Employee employee : map.values())
        {
            if (email.equals(employee.getEmployeeEmail()))
            {
                System.out.println(employee);
                return employee;
            }
        }
        return null;
    }
//********************************************************************

//********************************************************************  
//********************************************************************

} 
```

员工类。

```
//Imports:

//********************************************************************
//Employee Class.
public class Employee
{
//Variables.
    private String employeeName;
    private int employeeId;
    private String employeeEmail;
//********************************************************************  
//Constructor.
    public Employee(String employeeName, int employeeId, String employeeEmail) 
    {
        this.employeeName = employeeName;
        this.employeeId = employeeId;
        this.employeeEmail = employeeEmail;
    }
//********************************************************************
//Getters.
    public String getEmployeeEmail() {
        return employeeEmail;
    }
    public void setEmployeeEmail(String employeeEmail) {
        this.employeeEmail = employeeEmail;
    }
    public String getEmployeeName() {
        return employeeName;
    }
    public int getEmployeeId() {
        return employeeId;
    }
//********************************************************************
//toString method.
    public String toString() {
        return "\t\t\tEmployee\n" +
                "********************************************************************\n"+
                "Employee Name: "+ employeeName +"\n"+ 
                "Employee Id: " + employeeId +"\n"+  
                "Employee Email: " + employeeEmail;
    }
//********************************************************************

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:23:58.357

您也可以为此使用 java 的 HashMap 的 put 方法。[来自 HashMap 的 put 方法的 API：](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/HashMap.html#put%28java.lang.Object,%20java.lang.Object%29)

> 如果映射先前包含此键的映射，则替换旧值。

所以，像：

```
public void edit(Employee employee)
{
    map.put(employee.getEmployeeName(), employee);
} 
```

然后在另一个代码中：

```
Employee employee = getEmployeeByName("Someniceemployeename");
if (employee != null)
{
    employee.setEmployeeEmail("awesomeness@stackoverflow.com");
    edit(employee);
} 
```

至于编辑员工的 ID，您需要采取一些额外的预防措施。首先，您要确保地图包含您要编辑的 ID（像往常一样）。其次，在“编辑” ID 时，您需要首先从地图中删除旧员工实例（使用旧 ID），然后使用 put 添加新员工。

# opengl - 着色器细分与算法细分

> ID：11311698
> 
> 赞同：2
> 
> 时间：2012-07-03T13:12:55.733
> 
> 标签：opengl

在 OpenGL 4.0 中，添加了着色器细分支持。就性能而言，每个原始细分和 vao 顶点预加载有什么区别？通过 vao 顶点预加载，我的意思是在 vao 中加载所有顶点数据并渲染它，同时将细分曲面保留在 RAM 中，而不是通过着色器管道动态创建细分曲面。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T03:58:46.990

答案是非常肯定的“视情况而定”。

好的，你有一堆网格控制点（Bezier、NURB、Catmull-Clark，...）。在经典的 OpenGL 中，您将在 CPU 上细分控制点并将三角形存储在顶点缓冲区对象的 VAO 集合中。使用 OpenGL 4，您可以在 VAO 中传递控制点，渲染为 GL_PATCHES，并让控制和评估着色器生成三角形。

如果控制点的网格是静态的并且很少更改，那么 CPU 解决方案会更好，因为您只需进行一次细分并存储结果，而不是每帧重新计算完全相同的细分。

如果网格发生变化，那么 GPU 解决方案会更好。将新的控制点从 CPU 复制到 GPU 会更快，因为数据更少，而且 GPU 可以并行细分，因此速度会更快。GPU 端细分现在可以通过距离（或其他）在网格中的各个四边形处更改细节级别，因此您可以使用着色器实现 ROAM 类型的算法。

除非你的 GPU 已经负载很重，比如复杂的光照和阴影算法，而 CPU 负载很轻。在这种情况下，在 CPU 上进行曲面细分可以提供更好的整体系统性能，即使曲面细分本身需要更长的时间。

你是哪个？试试看！

（也请注意，这可能根本不重要。现代 3D 系统速度非常快。）

# c++ - 更改 libmysqlclient 和 libxml2 的链接顺序会导致 libxml2 出错

> ID：11311700
> 
> 赞同：0
> 
> 时间：2012-07-03T13:13:01.380
> 
> 标签：c++, mysql, c, linux, libxml2

我正在 linux 平台上用 C 语言构建一个应用程序。在我的程序中，我使用 API xmlReadFile() 使用 libxml2 读取 XML 文档。

我将程序链接如下（来自makefile的行）：

```
 $(CC) -m32 -g -o app.out -Wl,-Bstatic $(other_libs) -lmysqlclient -lxml2 -Wl,-Bdynamic -lpthread -lm -lrt -lz -lbz2 $(extra_ldflags) 
```

有了这些设置，一切工作文件。对 xmlReadFile() 的 API 调用工作正常。

如果我在 -lxml2 之后移动 -lmysqlclient，程序会在 xmlReadFile() 中生成以下错误。

```
File.xml:1: parser error : Document is empty

^
File.xml:1: parser error : Start tag expected, '<' not found

^ 
```

我实际上想动态链接到 mysql 客户端（因为我有 libmysqlclient_r.so 但没有 libmysqlclient_r.a 并且我想使用 libmysqlclient_r.so 因为我的应用程序是多线程的）。即使我保持链接顺序相同并如下指定mysql客户端库的动态链接，我也会收到上述错误。

```
 $(CC) -m32 -g -o app.out -Wl,-Bstatic $(other_libs) -Wl,-Bdynamic -lmysqlclient -Wl,-Bstatic -lxml2 -Wl,-Bdynamic -lpthread -lm -lrt -lz -lbz2 $(extra_ldflags) 
```

如何解决上述错误？

我提前感谢您的帮助。

# javascript - 绑定到 ItemView 更改事件

> ID：11311702
> 
> 赞同：3
> 
> 时间：2012-07-03T13:13:07.593
> 
> 标签：javascript, backbone.js, marionette

`Marionette.ItemView`
当相应的模型发生`ItemView`变化时，我想重新渲染使用的列表。

关于激活此任务的最佳方法的任何想法？

```
// Collection passed to Marionette.CompositeView
myCollection.attributes = [
    {
        id: 1,
        name: 'bar'
        closed: false
    },
    ….
]; 
```

* * *

```
// Marionette.ItemView
myModel.set({
    closed: true
}); // when this model change I would like to re-render the copositeView 
    // or remove the Marionette.ItemView 
```

* * *

PS：
如果我在中尝试以下代码（1）`Marionette.ItemView`，
当我保存模型时，我会收到以下错误（2）。

(1)

```
// Marionette.ItemView
initialize: function () {
    this.model.on('change', this.render);
} 
```

(2)

```
Uncaught TypeError: Object [object Object] has no method 'serializeData' 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-25T10:28:35.100

Marionette 提供了一个`modelEvents`属性，负责正确绑定到模型事件。

在您的*ItemView*中，只需添加以下内容即可在模型更改时普遍更新 ItemView：

```
'modelEvents': {
    'change': 'render'
}, 
```

享受！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-03T17:57:46.100

要让事件绑定和解除绑定在 Marionette 中自动工作，您应该使用视图的`bindTo`方法。例如：

```
initialize: function() {
  this.bindTo(this.model, 'change', this.render);
} 
```

还`bindTo`可以正确设置上下文，因此您不需要`_.bindAll()`它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T14:28:32.920

您可以在 ItemView 更改其原型时默认启用此行为：

```
Backbone.Marionette.ItemView.prototype["modelEvents"] = { "change" : "render"}; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-13T02:25:59.393

也许这就像你试图做的那样？

```
MyItemView = Marionette.ItemView.extend({
    modelEvents: {
        "change:closed": "render"
    }
});

MyCompositeView = Marionette.CompositeView.extend({
    itemView: MyItemView
});

MyApp.addRegions({main_region: "#main"});

MyApp.main_region.show(new MyCompositeView({collection: new MyCollection()}); 
```

默认情况下，Marionette.ItemView 有一个 serializeData 函数，它只返回在 this.model 上调用 toJSON 的结果。当然，您可以通过在 ItemView 扩展上定义自己的 serializeData 来覆盖此函数，就像扩展任何其他 javascript 对象时一样。高温高压

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T13:33:17.943

在您的初始化方法中使用 _.bindAll 是一个好习惯。可能是您的问题与范围有关。

```
initialize: function () {
    _.bindAll(this);
    this.model.on('change', this.render);
} 
```

如果 bindAll 不能解决您的问题，请粘贴您的模型和视图。

# jquery - 使用 jQuery 添加元素

> ID：11311706
> 
> 赞同：0
> 
> 时间：2012-07-03T13:13:20.473
> 
> 标签：jquery, dom, append, jquery-append

使用 jQuery 将此元素及其子元素添加到 DOM 的最佳方法是什么？假设我需要附加的 div 有一个 id 包装器。

```
<div id="menu">
<a href="#" id="link1" data-speed="600" data-easing="easeOutBack">About</a>
<a href="#" id="link2" data-speed="600" data-easing="easeOutBack">Updates</a>
<a href="#" id="link3" data-speed="600" data-easing="easeOutBack">Producer</a>
<a href="#" id="link4" data-speed="1000" data-easing="easeInExpo">Performer</a>
<a href="#" id="link5" data-speed="600" data-easing="easeOutBack">Speaker</a>
<a href="#" id="link6" data-speed="1000" data-easing="easeInExpo">Endorser</a>
<a href="#" id="link7" data-speed="1000" data-easing="easeInExpo">Mentor</a>
<a href="#" id="link9" data-speed="600" data-easing="easeOutBack">Press</a>
<a href="#" id="link10" data-speed="600" data-easing="easeOutBack">Contact</a>
</div> 
```

有人愿意帮忙吗？

谢谢，

米尔科

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:15:41.080

```
$('<div id="menu">...</div>').appendTo('#wrapper'); 
```

请确保第一部分中的 HTML 没有换行符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T13:16:39.620

```
$('<div id="menu">
<a href="#" id="link1" data-speed="600" data-easing="easeOutBack">About</a>
<a href="#" id="link2" data-speed="600" data-easing="easeOutBack">Updates</a>
<a href="#" id="link3" data-speed="600" data-easing="easeOutBack">Producer</a>
<a href="#" id="link4" data-speed="1000" data-easing="easeInExpo">Performer</a>
<a href="#" id="link5" data-speed="600" data-easing="easeOutBack">Speaker</a>
<a href="#" id="link6" data-speed="1000" data-easing="easeInExpo">Endorser</a>
<a href="#" id="link7" data-speed="1000" data-easing="easeInExpo">Mentor</a>
<a href="#" id="link9" data-speed="600" data-easing="easeOutBack">Press</a>
<a href="#" id="link10" data-speed="600" data-easing="easeOutBack">Contact</a>
</div>').appendTo('#wrapper'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T13:17:51.873

好吧，你可以使用 soem 方法做 append，但这取决于你想在哪里添加这些元素，看这个：

`.append()`: [http://api.jquery.com/append/](http://api.jquery.com/append/) 插入到元素末尾

`.prepend()`: [http://api.jquery.com/prepend/](http://api.jquery.com/prepend/) 插入到元素的开头

我希望它有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T13:14:59.567

试试这样

```
$('#menu').append('#yourIdToInclude') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T13:15:34.240

```
$('#menu').appendTo('#elementinwhichtoappend') 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-03T13:17:00.247

假设目标 div 有一个 id`target`并且你有一个名为的字符串中的 html`html`

`$("#target").append(html)`

# 3d - XNA 中网格的偏移

> ID：11311711
> 
> 赞同：0
> 
> 时间：2012-07-03T13:13:42.267
> 
> 标签：3d, xna, offset, mesh

我有一个平台模型，上面装有炮塔。炮塔有两个枪管，我正试图从枪管中发射子弹。

炮塔本身是模型中包含的网格。我可以通过操纵 ModelBone.Transform 矩阵来旋转炮塔，如下所示：

```
turretBone.Transform = Matrix.CreateRotationX(3.14f /2f) * turretMatrix * Matrix.CreateTranslation(turretBone.Transform.Translation);
theModel.CopyAbsoluteBoneTransformsTo(transforms); 
```

其中**theModel**代表整个模型（平台 + 炮塔），**turretBone**是代表炮塔的 ModelBone，**turretMatrix**代表一个 4x4 XNA 矩阵，描述炮塔面向玩家的旋转。

这部分工作完美。

现在，我想从炮塔的枪管尖端发射一颗子弹。由于某种原因，我无法确定枪管尖端的位置，因此我将其用作子弹的起始位置。

火的方向没问题，因为我使用 turretBone.Transform.Down 作为方向。（我知道向上/向下/等是相对的，但将向下想象为在顶视图射击游戏中，枪管朝玩家向下射击，即在 XNA 2D 中增加 Y）。

我知道 turretBone.Transform 是相对于它的父级的，对吗？那么，如果我想向右移动 100 个单位，向下移动 400 个单位，我该怎么办？

我试图做这样的事情：

```
Position + turretBone.Translation + turretBone.Transform.Right * 900f + turretBone.Transform.Down * 400f 
```

将炮塔向右移动 900 个单位，向下移动 400 个单位（其中**Position**是整个模型的位置）。

但这不起作用；它在桶的尖端正确开始，但随着它的旋转，它并没有完全跟随它）。

我想到了另一种解决方案，在枪管顶端添加两个小球体，并以某种方式获取它们在世界空间中的坐标，从而将子弹的起始位置放置在那里。知道该怎么做吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:51:59.407

我已经使用第二种方法（将球体放置在桶的尖端）解决了这个问题。

```
Matrix world = transforms[sphereBone.Index] * any_other_transformation_applied 
```

打电话后

```
theModel.CopyAbsoluteBoneTransformsTo(transforms); 
```

成功了。

谢谢。

# java - 来自 Web 服务的响应 XML 中的 XML 数据注入

> ID：11311717
> 
> 赞同：0
> 
> 时间：2012-07-03T13:14:13.880
> 
> 标签：java, xml, owasp, esapi

我需要为 XML 数据注入修复下面的代码。

```
DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
DocumentBuilder db = factory.newDocumentBuilder();
InputSource inStream = new InputSource();
inStream.setCharacterStream(new StringReader(xmlFromWebService));
Document doc = db.parse(inStream);   // reported at this line by a code audit tool
doc.getDocumentElement().normalize(); 
```

如何解决？有没有人有什么建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T04:48:06.033

我猜这与针对给定 XSD 验证您的 XML 以防止 XML 数据注入有关。我建议像这样修改您的代码：

```
try {
  DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
  factory.setNamespaceAware( true);
  factory.setValidating( true);

  factory.setProperty( "http://java.sun.com/xml/jaxp/properties/schemaLanguage", 
                       "http://www.w3.org/2001/XMLSchema");
  factory.setProperty( "http://java.sun.com/xml/jaxp/properties/schemaSource", 
                       "file:<your_xsd_file>");

  DocumentBuilder builder = factory.newDocumentBuilder();
  InputSource inStream = new InputSource();
  inStream.setCharacterStream(new StringReader(xmlFromWebService));
  Document document = builder.parse(inStream);

} catch ( ParserConfigurationException e) {
  e.printStackTrace();
} catch ( SAXException e) {
  e.printStackTrace();
} catch ( IOException e) {
  e.printStackTrace();
} 
```

我希望你得到提示！

# iphone - iPhone iOS 如何发送带有 CSS 样式的 HTML 电子邮件？

> ID：11311720
> 
> 赞同：3
> 
> 时间：2012-07-03T13:14:20.247
> 
> 标签：iphone, html, objective-c, css, ios

我需要发送包含来自应用程序的图像的 HTML 报告。报告被布置并且图像被嵌入到报告中。**当我在网络视图中预览报告时，它看起来是正确的，当我通过 GMail 收到它时，样式和图像丢失了。**

标题中嵌入了一个 CSS 样式表。

我正在发送这样的报告：

```
NSString* htmlReportString = [ReportManager createReportWithEvent:event];
[mailController addAttachmentData:[htmlReportString dataUsingEncoding:NSUTF8StringEncoding] mimeType:@"text/html" fileName:@"report.html"];
[mailController setMessageBody:htmlReportString isHTML:YES]; 
```

这是我从 .plist 中得到的并作为报告标题附加的内容

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>template1</key>
    <string>
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;
&lt;head&gt;
&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;
&lt;title&gt;Report&lt;/title&gt;
&lt;style type=&quot;text/css&quot;&gt;
.statHead {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 30px;
    font-weight: bold;
    color: #FFF;
}
.statSub {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 14px;
    font-weight: normal;
    color: #FFF;
}
.repHead {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 12px;
    font-weight: bold;
    color: #000;
}
.repSub {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 14px;
    font-weight: normal;
    color: #000;
}
.repLinks {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 14px;
    color: #000;
}
.repSubBullet {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 14px;
    font-weight: normal;
    color: #000;
    list-style-type: circle;
}
.repSubBold {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 14px;
    font-weight: bold;
    color: #000;
}
.topName {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 34px;
    font-weight: bold;
    color: #000;
}
.topDate {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 24px;
    font-weight: bold;
    color: #000;
}
.topSub {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 14px;
    font-weight: normal;
    color: #000;
}
&lt;/style&gt;
&lt;/head&gt;

&lt;body&gt;</string>
</dict>
</plist> 
```

当我**在 iPhone 的网络视图中预览报告时，它看起来是正确的**——所有样式都存在，图像也存在。但是**当我在 GMail 中收到报告时，图像丢失并且没有任何样式显示**。如果我保存报告并在我的 Mac 的预览应用程序上查看它，报告将再次正确显示。

**是什么导致了这个问题？是编码/反斜杠问题还是 Gmail 对待 HTML 的方式与 Apple 的网络浏览器不同？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:17:09.270

您已经在您的 HTMl 代码中转义了 HTML特殊字符`&lt;`等，应该将其替换为它们的官方 HTML 等价物，否则您的 HTML 将无法工作。它在 iOS 浏览器中运行对我来说听起来有点奇怪。

当然，这也可能是另一个问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:21:07.113

将您的 CSS 与 HTML 页面合并，并生成完整的数据字符串。然后添加以下代码。

```
MFMailComposeViewController *picker=[[MFMailComposeViewController alloc] init];
    picker.mailComposeDelegate=self;
    [picker setSubject:@"Your Title"];
    [picker setMessageBody:HTMLSTRING isHTML:YES];
    [self presentModalViewController:picker animated:YES];
    [picker release]; 
```

在您的邮件编辑器中查看此内容。是否正确显示？

# css - 类不使用多个元素

> ID：11311726
> 
> 赞同：1
> 
> 时间：2012-07-03T13:14:49.250
> 
> 标签：css, class, html, hover, lightbox

我正在创建一个灯箱。当您将鼠标悬停在图像上时，随附的文本和相关图像也应该亮起。但是，随附的文本不是。

它们都在同一个类中，但文本是页面下方的 ap 内标记。

这是网站：[www.rosiehardwick.co.uk](http://rosiehardwick.co.uk)

```
.nationaltrust {
background-color:red;
-webkit-transition: opacity 0.5s linear; 
opacity: 0.05;
}

.nationaltrust:hover {
-webkit-transition: opacity 0.5s linear; 
opacity: 1;
} 
```

和html：

```
 </div>
<div id="image-wrap">
<div class="nationaltrust">
<img src="/images/ss.gif"/>
<img src="/images/aw.gif"/>
</div>

</div>

<div id="para-wrap">
<div class="nationaltrust"><p>
blahblah</p></div></div> 
```

感谢您的帮助，我对此很陌生，

汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:33:37.493

随附文本未亮起的原因是它位于不同的元素中。

该`.nationaltrust:hover`规则只会影响`.nationaltrust`鼠标指针悬停的实际元素，并且由于文本位于不同的元素中，因此它不会被点亮。但是，如果您将鼠标指针悬停在文本元素上，则该元素应该会亮起，但图像不会亮起。

解决此问题的一种方法是将图像和随附的文本包装在同一个 div 元素中，并将悬停规则指向该元素。

解决它的另一种方法是添加一些 javascript 来点亮两个 div。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T13:45:43.857

我想你可能会误解类/悬停的东西应该如何工作。当你写：

```
.someClass:hover {color: red} 
```

您是在告诉浏览器*“当任何具有类 'someClass' 的元素悬停时，使其颜色变为红色”*。这并不意味着*“使每个带有类 'someClass' 的元素都变成红色*”。

如果我理解正确，您希望悬停一个元素来更改单独元素的样式。有两种方法可以做到这一点 - 1）将图像和文本都放在一个包含元素中，然后将 :hover 样式应用于它们，或者 2）使用一些 javascript 在两者之间建立连接并根据需要调整样式。

对于＃1：

**HTML：**

```
<div class="nationalTrust">
    <img src="/images/ss.gif"/>
    <p class="caption">Blah blah</p>
</div> 
```

**CSS：**

```
.nationalTrust:hover img {
    opacity: 1;
    background-color: red;
}

/* Just to show that you can have different styles for the text and image*/
.nationalTrust:hover .caption {
    opacity: 0.85; 
} 
```

对于您想要做的事情，这可能不起作用：在一个元素中包含图像和文本可能过于严格。在这种情况下，一些javascript是要走的路。这个例子使用 jQuery 来简化事情：

**HTML：**

```
<img class="nationaltrust" src="/images/ss.gif"/>

<p class="nationaltrust-caption">Blah-blah</p> 
```

**Javascript：**

```
$(function(){
    $('img.nationaltrust').hover(
        function(){
            $('p.nationaltrust-caption').addClass('active'); //When the image is hovered, add the 'active' class to the caption
        },
        function(){
            $('p.nationaltrust-caption').removeClass('active'); //Remove the class when un-hovered.
        }
    )
}); 
```

现在，那个 javascript 非常快速和肮脏，但它应该做你想做的事。问题是您需要为页面上的每个图像/标题编写单独的代码（假设它们都有不同的类）。编写 HTML 和 JS 很容易，因此它们可以处理任意数量的不同图像 - 如果您也想查看该示例，请告诉我们。

# c# - C# .NET：使用带有 SignedXML 的 PEM 文件来验证 Xml 签名

> ID：11311727
> 
> 赞同：3
> 
> 时间：2012-07-03T13:14:53.500
> 
> 标签：c#, .net, digital-signature, pem, xml-signature

我正在尝试验证一个`SignedXml`已使用公钥签名的对象。公钥存储在一个`.pem`文件中。如何使用 pem 文件和 .NET 验证 XML 签名？

我可以轻松使用`.pem`文件还是使用文件更好`.pfx`。如果是这样，我将如何将 a 转换`.pem`为 a`.pfx`？

相反，有没有办法将文件的内容加载`.pem`到`X509Certificate2`?

# c++ - 类内默认值初始化顺序

> ID：11311732
> 
> 赞同：-1
> 
> 时间：2012-07-03T13:15:19.383
> 
> 标签：c++, constructor, c++11, initialization

c++11 中的类成员什么时候获得默认值？下面的代码合法吗？

```
class C {
    void* buffer;
    uint16_t& crc = *reinterpret_cast <uint16_t*> (buffer);
public:
    explicit C (void* p) : buffer (p) {}
}; 
```

我希望 crc 的默认值只是语法糖，因此在缓冲区之后初始化 crc。我对么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T13:48:37.557

非静态数据成员的初始化顺序在 12.6.2 Initializing bases and members [class.base.init] 的第 10 段中指定（强调我的）：

> 在非委托构造函数中，初始化按以下顺序进行：
> 
> [...关于基地的事情]
> 
> **— 然后，非静态数据成员按照它们在类定义中声明的顺序进行初始化（同样不管 mem-initializers 的顺序）。**
> 
> — 最后，执行构造函数主体的复合语句。

如您所见，成员是使用所谓的*mem-initializer*（即在构造函数内部，在其主体之前）还是使用*大括号或相等初始化器*（即在类定义中）进行初始化，或者根本没有与初始化顺序有关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T13:47:20.523

顺序在 C++11 §12.6.2[class.base.init]/10 中指定。它仅取决于您声明数据成员的顺序。既然`buffer`出现之前`crc`就好了。

> 然后，非静态数据成员按照它们在类定义中声明的顺序进行初始化（同样不管*mem-initializers*的顺序）。

# css - 带有外部 CSS 的 HTML5 内联 SVG

> ID：11311734
> 
> 赞同：2
> 
> 时间：2012-07-03T13:15:22.327
> 
> 标签：css, xml, html, svg

HTML5 文档中的外部 CSS 和内联 SVG 真的让我很难受。

我目前正在使用最新版本的 Chrome for Mac 进行开发，并希望获得我的 SVG，它使用外部样式表进行样式设置，适用于 Firefox。

对于 Chrome，在我的网页样式表中包含我的 SVG-CSS 可以正常工作。我只是设计了所有的 html 元素，然后是 SVG 的东西。我的样式表看起来像这样：

```
body {
  //blalba
}

<![CDATA[

line {
 //blabla
}

circle {
  //blabla
}

]]> 
```

（在铬下工作正常）

现在，如果我走这条路，我在 Firefox 中的所有 SVG 元素都有黑色填充，所以这似乎不起作用。Inline-CSS 在 SVG 内工作正常，但**我无法让外部样式表在 SVG 内工作**。

这是我正在摆弄的代码：

```
<?xml version="1.0"?>
<?xml-stylesheet type="text/css" href="styles/style.css" ?>
<svg width="827" height="185" viewBox="0 0 827 185" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <rect class="background" x="0" y="10" width="825" height="125" />
</svg> 
```

我认为这是正确的方法，但它在 Chrome 和 Firefox 中都不起作用。我的样式表看起来像这样：

```
<![CDATA[ // <- if tried leaving this out, no change

line {
 //blabla
}

circle {
  //blabla
}

]]> // <- if tried leaving this out, no change 
```

我还仔细检查了我的样式表的路径。我究竟做错了什么？

感谢您的帮助！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T13:25:14.793

如果 SVG 在 HTML 中是内联的，为什么不像`link`其他样式表那样使用该元素呢？

```
<link rel="stylesheet" href="styles/style.css"> 
```

[这是一个例子](http://www.boogdesign.com/examples/svg/svg-css.html)。

# cakephp - Cakephp 2.x REST

> ID：11311736
> 
> 赞同：1
> 
> 时间：2012-07-03T13:15:31.113
> 
> 标签：cakephp, cakephp-2.0

我会用 cakephp 2.0 开发一个安静的服务，但我不能。

遵循官方文档后，我收到此消息

错误信息：

```
Warning (2): SimpleXMLElement::__construct() [simplexmlelement.--construct]: Entity: line 3: parser error : Extra content at the end of the document [CORE\Cake\Utility\Xml.php, line 177]
Warning (2): SimpleXMLElement::__construct() [simplexmlelement.--construct]: <response><Hotel><id>1041114</id><hotelFileName>Argana_Hotel</hotelFileName><hot [CORE\Cake\Utility\Xml.php, line 177]
Warning (2): SimpleXMLElement::__construct() [simplexmlelement.--construct]: ^ [CORE\Cake\Utility\Xml.php, line 177]

CakePHP: the rapid development php framework 
```

字符串不能解析为XML

```
Error: An Internal Error Has Occurred. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T23:27:57.590

尝试从 github 实现 RestKit 时遇到了同样的问题。

当我将多个变量传递给 _serialize 参数时，似乎会出现问题。

认为这是因为 xml 应该包装在主容器中。

将我的内容嵌套在包装器中似乎为我解决了这个错误。

```
Broken Example:
<items>
  <item>data</item>
  <item>data</item>
<items>
<categories>
 <category>data</category>
</categories>

Working Example:
<response>
  <items>
    <item>data</item>
    <item>data</item>
  <items>
  <categories>
   <category>data</category>
  </categories>
</response> 
```

刚改：

```
$this->set('data', $this->viewVars);
$this->set('_serialize', array('data')); 
```

至：

```
$this->set('data', array('data'=>$this->viewVars));
$this->set('_serialize', array('data')); 
```

# java - 标准，如何访问子类属性

> ID：11311737
> 
> 赞同：4
> 
> 时间：2012-07-03T13:15:31.463
> 
> 标签：java, hibernate, criteria, criteria-api

奇怪的是我找不到简单的东西，我有 2 个实体，一个在另一个里面，我的问题是如何从子实体访问属性？

实体 1

```
@Getter
@Setter
@Entity
public class ObjectA{
    String name;
    String surname;
    ObjectB B;
} 
```

实体 2

```
@Setter
@Getter
@Entity
ObjectB{
    String family;
    String range;
} 
```

我想要的是通过条件搜索访问家庭和范围，所以我做了这个：

```
public List<ObjectA> search(String name, String surname, String family, String range) {
    Criteria c = HibernateUtil.getSessionFactory().getCurrentSession().createCriteria(ObjectA.class, "a");

if (!name.equals("")) {
    c.add(Restrictions.eq("a.name", name));
}
if (!surname.equals("")) {
    c.add(Restrictions.eq("a.surname", surname));
}
if (!family.equals("")) {
    c.add(Restrictions.eq("a.B.family", family));
}
if (!range.equals("")) {
    c.add(Restrictions.eq("a.B.range", range));
}
return c.list(); 
```

}

可以访问姓名和姓氏，但不能访问家庭和范围。“无法解决财产”我该怎么办？

谢谢=D

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T13:20:08.317

您必须为子类属性创建一个别名才能访问它。

[查看以下手册http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html)的第 15.4 节

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T13:34:09.643

在您的情况下，我不确定您是否需要别名。要在子实体上请求，您需要在子实体上创建标准，然后在其上添加参数：

```
public List<ObjectA> search(String name, String surname, String family, String range) {
    Criteria aCriteria = HibernateUtil.getSessionFactory().getCurrentSession().createCriteria(ObjectA.class);

if (!name.equals("")) {
    aCriteria.add(Restrictions.eq("name", name));
}
if (!surname.equals("")) {
    aCriteria.add(Restrictions.eq("surname", surname));
}

Criteria bCriteria = aCriteria.createCriteria("B");

if (!family.equals("")) {
    bCriteria.add(Restrictions.eq("family", family));
}
if (!range.equals("")) {
    bCriteria.add(Restrictions.eq("range", range));
}
return aCriteria.list(); 
```

注意：这`aCriteria.createCriteria("B")`将使只有`ObjectA`具有非 B 的对象才会返回，因此您可能希望仅在且不为空`null`时创建子标准。`family``range`

# flash - 使用 SWF 多文件上传的多文件选择的打开文件窗口按钮

> ID：11311738
> 
> 赞同：0
> 
> 时间：2012-07-03T13:15:31.603
> 
> 标签：flash, swfupload

我正在使用 SWFUpload 一次上传多个文件。

但我注意到在 FireFox 和 Opera 上，“打开文件窗口”按钮是“保存”而不是“打开”。 ![在此处输入图像描述](../Images/8f9d99aed20b3247572923b8f27a1455.png)

IE 和 Chrome 有“打开”。

有没有办法将按钮从“保存”更改为“打开”？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:51:49.700

使用`actionscript`，您可以在`Open/Save`对话框中自定义的唯一内容是`file-type filters`和`default filename`（保存时）。所以没有办法改变按钮上的标签。

# php - 为什么 symfony DOMCrawler 对象没有在依赖的 phpunit 测试之间正确传递？

> ID：11311744
> 
> 赞同：2
> 
> 时间：2012-07-03T13:15:40.060
> 
> 标签：php, symfony1, phpunit

我的 symfony 应用程序有一个 phpunit 测试套件。在那个测试文件中，我在不同的测试之间有一些依赖关系，并在依赖关系之间传递一个 DOMCrawler 对象，这样我就不必每次都导航到它。

但是，在采用我所做的方法时，您似乎无法使用这些传递的对象提交表单，但您可以单击它们上的链接。是否有一个原因？我的设计很差吗？如果是，我应该如何改变它？欢迎任何反馈。我在下面附上了一些代码。

```
<?php

namespace someBundle\Tests\Controller;

use Symfony\Bundle\FrameworkBundle\Test\WebTestCase;

/**
 * blah Controller Test
 * 
 */
class BlahControllerTest extends WebTestCase
{

    private $adminUrl;

    /**
     * Constructs basic information for a audit report controller test suite
     *
     */
    public function __construct()
    {
        $this->adminUrl = '/admin/';
    }

    /**
     * Starts a test suite 
     *
     * @return Crawler
     */
    public function testAdd()
    {
        // Create a new client to browse the application
        $client = static::createClient();

        // Go to site specific admin url
        $crawler = $client->request('GET', $this->adminUrl);
        $this->assertTrue(200 === $client->getResponse()->getStatusCode());

        // do stuff here

        // goes to edit page
        $crawler = $client->request('GET', $editPage);

        return $crawler;
    }

    /**
     * Tests the edit functionality
     *
     * @param Crawler $crawler Crawler for the show view
     *
     * @depends testAdd
     */
    public function testEdit($crawler)
    {
        // Create a new client to browse the application
        $client = static::createClient();

        //Line below is included if the crawler points to the show view
        //$crawler = $client->click($crawler->selectLink('Edit')->link());

        // Fill in the form and submit it
        $form = $crawler->selectButton('Edit')->form(array(
            $foo => $bar,
        ));

        // The following line doesn't work properly if testEdit is passed the
        // edit page. However, if it is passed the show page, and the 
        // edit link above is clicked, then the form will submit fine.
        $client->submit($form);
        $crawler = $client->followRedirect();

        // more code here...
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T13:30:30.853

原因是，正如您在`WebTestCase`扩展的类中看到的那样，实现了拆卸：

```
protected function tearDown()
{
    if (null !== static::$kernel) {
        static::$kernel->shutdown();
    }
} 
```

内核的这种关闭有很多影响。一种影响是你正在经历什么。我试图追踪到底发生了什么，但我什么也没找到，只是在心里记下，一旦调用关闭，客户端和爬虫就毫无用处了。

我会推荐和 Louis 一样的东西：让你的测试独立。除了它不与客户端一起工作之外，请考虑一下您的创建页面上出现问题的时间。实际上，您的编辑页面测试也会中断，尽管页面本身可能没问题。

Depends 通常用于进一步验证对象，例如您是否想更深入地测试响应。您将使用依赖测试并返回第一个测试的响应。在这种情况下，两个测试都中断也没关系，因为如果您创建的页面中断，那么您的响应内容当然看起来不应该。

# r - 使用 tcltk 在 R 脚本中添加弹出文本框

> ID：11311747
> 
> 赞同：5
> 
> 时间：2012-07-03T13:15:50.423
> 
> 标签：r, tk

我有一个很长的脚本来做一些数据分析，它必须连接到几个数据库。其中一个数据库往往比我喜欢的更频繁地更新我的密码，所以我想添加一个弹出框让我输入我当前的密码。我找到了这个例子，但对 tcltk 的理解不够，无法在对话框关闭时看到 hwo 返回我的值。我曾想过将其定义为`<<-`OnOK 函数中的全局变量 ( )，但这似乎很混乱

```
require(tcltk)
tt<-tktoplevel()
Name <- tclVar("Password")
entry.Name <-tkentry(tt,width="20",textvariable=Name)
tkgrid(tklabel(tt,text="Enter Password"))
tkgrid(entry.Name)
OnOK <- function()
{
    NameVal <- tclvalue(Name)
    tkdestroy(tt)
}
OK.but <-tkbutton(tt,text="   OK   ",command=OnOK)
tkbind(entry.Name, "<Return>",OnOK)
tkgrid(OK.but)
tkfocus(tt) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T13:27:36.213

您回答了您自己的问题：实际上您确实需要`<<-`这些 tcltk 示例 --- 请参阅 Peter 多年来的各种帖子，或其他浮动示例，其他 CRAN 包使用，甚至包本身。尝试

```
 library(tcltk)
  demo("tkcanvas") 
```

看看它是如何处理的，例如`lastX`, `lastY`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T13:15:13.277

您可能会发现总结 Greg Snow 为您建议的`ginput`功能：`gWidgets`

```
require(gWidgets)
options(guiToolkit="tcltk") 
NameVal <- ginput("Enter your passsword:") 
```

`NameVal`将包含输入的字符串，或者`NA`如果您取消。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T17:22:40.957

您可以使用`tkwait.window`或`tkwait.variable`功能。使用上面的代码弹出窗口，然后使用其中一个等待函数（`tkwait.window`将停止脚本继续执行，直到窗口被销毁，基本上是当您单击“确定”时）。然后，当脚本继续执行时，您将在脚本/函数中的变量中获得您的值，并且可以在那里使用它而无需分配全局变量。

# ios - iphone应用程序的SQLite中的字符串连接

> ID：11311751
> 
> 赞同：0
> 
> 时间：2012-07-03T13:16:00.300
> 
> 标签：ios, html, sqlite, cordova, concatenation

基本上我试图加入两个表以便只访问某些结果，但是查询返回表中没有行，我知道这是错误的吗？

谁能建议一种更好的方法来加入表格/连接字符串？

这是当前代码：

```
function queryDBcolours(tx) {
    var carid = document.finalfrm.CarID.value;
    var myquery = 'SELECT DC.CarImg ,C.ColourImg,C.Colour, C.ColourID FROM CarColours DC,Colours C WHERE DC.ColourID = C.ColourID AND C.Type =\"Car\" AND DC.CarID = '+varcarid;
    tx.executeSql(myquery, [], querySuccesscolours, errorCB);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:43:27.743

如果您注销您的 sql 语句并尝试在 sqlite 中手动执行它，它有效吗？似乎您需要在那里“加入”。

# asp.net-mvc - Plupload Asp.Net MVC 如何将不同的参数传递给 ActionResult 方法

> ID：11311755
> 
> 赞同：3
> 
> 时间：2012-07-03T13:16:14.660
> 
> 标签：asp.net-mvc, plupload

我`Plupload`用于 Asp.Net MVC

我需要将任何值或视图模型传递给 ActionResult 方法

**例如表单的第一行代码**

```
@using (Html.BeginForm("UploadImage", "Home",
            FormMethod.Post, new { enctype = "multipart/form-data" })) 
```

**ActionResult 方法签名**

```
[HttpPost]
public ActionResult UploadImage(int? chunk, string name, **I NEED PASS PARAMETER HERE !!!**) 
```

我不能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T22:53:18.273

如果您需要为上传的每个文件传递不同的参数，值得看看[在 plupload 中为每个文件传递动态参数](https://stackoverflow.com/questions/9015944/plupload-send-another-request-parameter-with-uploaded-file) 它正在与我的 MVC4 项目一起使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T21:43:58.217

首先，快速浏览一下[官方文档](http://www.plupload.com/documentation.php)。

我很快找到了以下 api 属性：

> 多部分参数
> 
> 带有参数的对象名称/值集合与多部分文件一起发布。

那么让我们看一些示例代码：

```
var uploader = new plupload.Uploader({
    runtimes : 'html5,html4',
    browse_button : 'pickfiles',
    max_file_size : '10mb',
    resize : {width : 320, height : 240, quality : 90},
    url : 'upload.php',
    filters : [
        {title : "Image files", extensions : "jpg,gif,png"},
        {title : "Zip files", extensions : "zip"}
    ],
        multipart_params: { param1: 'value1', something: $('#foo').val() }
}); 
```

和你的行动方法......

```
[HttpPost]
public ActionResult UploadImage(int? chunk, int chunks, string name, string param1, string something)
{ ... } 
```

试试看..（这是未经测试的..但足以让你开始）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T08:40:06.830

@Pure.Krome 的解决方案适用于用户在页面中输入数据时不会更改的静态值。我使用该解决方案，直到遇到元素内容可能已更改的问题。因此，我需要一个仅在上传开始之前修改 multipart_params 的解决方案。

如果将 multipart_params 传递给 Uploader() 的构造函数，则 using`$('#foo').val()`使用当时具有 id 'foo' 的元素的值。如果元素 'foo' 是一个表单元素，那么这可能不是您想要的。

因此，这里有一个替代方案。对于构造函数，您可能需要传递以下参数：

```
var uploader = new plupload.Uploader({
   // other params
   multipart: true
}); 
```

然后在开始上传之前，您需要设置 multipart_params。例如，您可能在页面的某处有一个按钮。对于该按钮，您有一个开始上传的 JavaScript 处理程序。生成的处理程序包括设置 multipart_params 可能如下所示：

```
$('#uploadfiles').click(function (e) {
   uploader.settings.multipart_params = { param1: document.getElementById("id1").value, param2: document.getElementById("id2").value };
   uploader.start();
   e.preventDefault();
}); 
```

请注意，您可以将名称“param1”更改为更有意义的名称，例如“Title”。对于输入元素，您可能还会有一个比“id”更有意义的 id。在控制器端（我使用的是 MVC 4），实现可能类似于：

```
public ActionResult Upload(string name = "", int chunk = 0, int chunks = 0, string param1 = "", string param2 = "") {
   // ... your code here ...
} 
```

继续示例：如果您将参数名称从“param1”更改为“title”，那么当然操作的参数名称也需要相应地从“param1”更改为“title”。生成的代码，还显示了您从何处获取文件流的外观，如下所示：

```
public ActionResult Upload(string name = "", int chunk = 0, int chunks = 0, string title = "", string param2 = "") {
   // ... your code here ...
   System.Web.HttpPostedFileBase fileUpload = Request.Files[0];
   // ... and more of your code here ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T13:26:21.880

据我了解，我认为您需要`HttpPostedFile`作为第三个参数传递

# javascript - 嵌入下拉列表的 JQuery 模态对话框

> ID：11311758
> 
> 赞同：0
> 
> 时间：2012-07-03T13:16:21.923
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-dialog

我对 JavaScript 有点陌生，但我有一个要求，我需要一个模式对话框出现在屏幕中间，并且里面还有一个下拉列表。有没有一种简单的方法可以做到这一点？我无法在线或在 SO 上找到任何示例。

这是我所拥有的：

```
function showExportDialog() {
    console.log("In requestPanel.js ==> showExportDialog()");

    //initialize and open the dialog
    var $dialog = $('<div></div>').dialog({
        title:   'Export Dialog',
        modal: true,   //dims screen to bring dialog to the front
        buttons: {
            'Export As CSV': function() {
                exportAsCSV();
            },
            'Export As Tab Delimited': function() {
                exportAsTabDelimited();
            },
            'Export As Plain Text': function() {
                exportAsPlainText();
            }
        }
    });
} 
```

调用此函数时，会出现一个模式对话框，其中包含三个按钮，如下所示：

![图片](../Images/b30edf54e208a0bdb32e40f4582fcf58.png)

我希望这样的事情：

![在此处输入图像描述](../Images/bfc83634c8ad291d7a751f0ed45f4a3e.png)

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:38:11.383

这绝对是可能的。只需将元素标记放在“”中，如下所示：

```
var $dialog = $('<div><select><option value="item1">item1</option></select></div>').dialog({ 
```

但我建议在页面中的某个地方构建对话框内容，将它们隐藏起来（'display:none' 的 css），然后在其他地方调用 .dialog 方法。

# php - 如何将新的 div 附加到具有相同类名的最后一个 div？

> ID：11311762
> 
> 赞同：0
> 
> 时间：2012-07-03T13:16:26.883
> 
> 标签：php, jquery

我所有的 div 块都使用相同的类名，我需要在文件上传完成后附加一个新的 div 块。我现在的做法是在每个现有块上附加一个新块。这是我的测试代码：

HTML：

```
<div class="img_container" id="img1">EXISTING BLOCK</div>'
<div class="img_container" id="img2">EXISTING BLOCK</div>' 
```

查询：

```
$('#fileupload').bind('fileuploadcompleted', function (e, data) {
    e.preventDefault();
    var $newdiv = $('<div class="img_container" id="img3">NEW BLOCK</div>');

    $('.img_container').append($newdiv);
}) 
```

我也尝试过附加到 body 标签，但新的 div 从未出现。知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T13:18:24.433

```
$('.img_container:last').after($newdiv) // should do the trick 
```

# java - How to set full Screen Mode of My App which is made in netbeans platform?

> ID：11311764
> 
> 赞同：2
> 
> 时间：2012-07-03T13:16:30.003
> 
> 标签：java, netbeans, platform

I m made Desktop App in netbeans platform in java.now wwhen i run my app it will open by default size of netbeans platform configuration.but i want full screen mode when i run or startup my app. so where and how to do that in my app?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-04-08T05:38:03.713

如果要在 swing 中打开默认最大化的 JFrame，可以使用`JFrame. setExtendedState()`，如下图所示：

```
public class MyFrame extends JFrame{ 
   public MyFrame() {

       // Other codes 

       // Set the JFrame to maximize by default on opening
       setExtendedState(JFrame.MAXIMIZED_BOTH);        

       // Rest of the program
    }
} 
```

还要记住，你不应该在同一个方法中使用 or （这里是构造函数`JFrame.pack()`）`JFrame.setMaximimumSize()`。`JFrame.setSize()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-05T12:42:10.833

在构造函数上使用此代码。

```
setExtendedState(MAXIMIZED_BOTH); 
```

使用这个我设计的任何框架，组件没有固定在中心或意味着不平衡使用netbeans拖放设计的所有内容

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T18:39:37.673

如果您希望您的应用程序是全屏的..使用**工具包**...

```
Toolkit t = Toolkit.getDefaultToolkit();

Dimension d = t.getScreenSize();

int ScreenWidth = d.width;

int ScreenHeight = d.height;

myframe.setSize(ScreenWidth, ScreenHeight);

myframe.setLocationByPlatform(true); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-27T09:55:49.600

在构造函数中使用此代码

```
setExtendedState(MAXIMIZED_BOTH); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T18:30:43.470

我猜你正在为你的应用程序使用 JFrames。

```
// to start with
JPanel myUI = createUIPanel();
JFrame frame = new JFrame();
frame.add(myUI);

// .. and later ...

JFrame newFrame = new JFrame();
newFrame.setUndecorated();
newFrame.add(myUI); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-28T10:41:04.257

如果您使用的是**Netbeans**，那么在`initcomponent()`方法之后您可以使用此代码，它将帮助您：

```
setExtendedState(MAXIMIZED_BOTH) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-07T06:10:30.023

```
Toolkit tk = Toolkit.getDefaultToolkit();
    int xsize = (int) tk.getScreenSize().getWidth();
    int ysize = (int) tk.getScreenSize().getHeight();
    this.setSize(xsize, ysize); 
```

# java - LDAP: How to return more than 1000 results (java)

> ID：11311765
> 
> 赞同：18
> 
> 时间：2012-07-03T13:16:30.940
> 
> 标签：java, ldap, unboundid-ldap-sdk

I am using the LDAP SDK from this site: [https://www.unboundid.com/products/ldap-sdk/](https://www.unboundid.com/products/ldap-sdk/) . I would like to make a search operation which returns a lot of entries.

According to the FAQ's site, ( [https://www.unboundid.com/products/ldap-sdk/docs/ldapsdk-faq.php#search](https://www.unboundid.com/products/ldap-sdk/docs/ldapsdk-faq.php#search) ) I have to use a SearchResultListener implementation.

So here is what I did:

```
 public class UpdateThread extends Thread implements SearchResultListener {
 ...
 // create request
 final SearchRequest request = new SearchRequest(this, instance.getBaseDN(),SearchScope.SUB, filter);
 // Setting size limit of results.
 request.setSizeLimit(2000);

 ...

 // Get every result one by one.
 @Override
public void searchEntryReturned(SearchResultEntry arg0) {
    System.out.println("entry "+arg0.getDN());

} 
```

The problem is that "searchEntryReturned" returns a maximum of 1000 results. Even if I set the size limit to "2000".

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-07-31T16:10:25.600

使用标准 java 实现分页 LDAP 查询非常简单，方法是使用将 a 添加`PagedResultsControl`到 中`LdapContext`，而不使用上面 Neil 的回答的第三方 API。

```
Hashtable<String, Object> env = new Hashtable<String, Object>(11);
env
    .put(Context.INITIAL_CONTEXT_FACTORY,
        "com.sun.jndi.ldap.LdapCtxFactory");

/* Specify host and port to use for directory service */
env.put(Context.PROVIDER_URL,
    "ldap://localhost:389/ou=People,o=JNDITutorial");

try {
  LdapContext ctx = new InitialLdapContext(env, null);

  // Activate paged results
  int pageSize = 5;
  byte[] cookie = null;
  ctx.setRequestControls(new Control[] { new PagedResultsControl(pageSize,
      Control.NONCRITICAL) });
  int total;

  do {
    /* perform the search */
    NamingEnumeration results = ctx.search("", "(objectclass=*)",
        new SearchControls());

    /* for each entry print out name + all attrs and values */
    while (results != null && results.hasMore()) {
      SearchResult entry = (SearchResult) results.next();
      System.out.println(entry.getName());
    }

    // Examine the paged results control response
    Control[] controls = ctx.getResponseControls();
    if (controls != null) {
      for (int i = 0; i < controls.length; i++) {
        if (controls[i] instanceof PagedResultsResponseControl) {
          PagedResultsResponseControl prrc = (PagedResultsResponseControl) controls[i];
          total = prrc.getResultSize();
          if (total != 0) {
            System.out.println("***************** END-OF-PAGE "
                + "(total : " + total + ") *****************\n");
          } else {
            System.out.println("***************** END-OF-PAGE "
                + "(total: unknown) ***************\n");
          }
          cookie = prrc.getCookie();
        }
      }
    } else {
      System.out.println("No controls were sent from the server");
    }
    // Re-activate paged results
    ctx.setRequestControls(new Control[] { new PagedResultsControl(
        pageSize, cookie, Control.CRITICAL) });

  } while (cookie != null);

  ctx.close(); 
```

[从这里](http://www.java2s.com/Code/Java/JNDI-LDAP/howapagedsearchcanbeperformedusingthePagedResultsControlAPI.htm)复制的示例。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-03T17:00:01.330

尽管几乎可以肯定服务器强制执行 1000 个条目的大小限制，但有可能通过分多个部分发出请求来解决这个问题。

如果服务器支持使用简单的分页结果控件（如 RFC 2696 中定义并在 LDAP SDK 中支持，根据[https://docs.ldap.com/ldap-sdk/docs/javadoc/com/unboundid/ldap/ sdk/controls/SimplePagedResultsControl.html](https://docs.ldap.com/ldap-sdk/docs/javadoc/com/unboundid/ldap/sdk/controls/SimplePagedResultsControl.html)），然后您可以使用它来遍历包含指定数量条目的“页面”中的结果。

或者，虚拟列表视图 (VLV) 请求控制 ( [https://www.unboundid.com/products/ldap-sdk/docs/javadoc/index.html?com/unboundid/ldap/sdk/controls/VirtualListViewRequestControl.html](https://www.unboundid.com/products/ldap-sdk/docs/javadoc/index.html?com/unboundid/ldap/sdk/controls/VirtualListViewRequestControl.html) )可以使用，但我可能只建议如果服务器不支持简单的分页结果控件，因为 VLV 请求控件还要求对结果进行排序，这可能需要在服务器中进行特殊配置或一些非常昂贵的处理以便能够为请求提供服务。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-01-08T19:19:54.153

我像@PeterK 一样解决了，但做了一些修改

```
 public List<MyUser> listUsers() {
    LOG.info("listUsers() inicio");
    List<MyUser> users = new ArrayList<MyUser>();

    Hashtable env = new Hashtable();
    env.put(Context.INITIAL_CONTEXT_FACTORY, INITIAL_CTX);
    env.put(Context.PROVIDER_URL, 'ldap://192.168.10.10:389');
    env.put(Context.SECURITY_AUTHENTICATION, CONNECTION_TYPE);
    env.put(Context.SECURITY_PRINCIPAL, USER_ADMIN_PASSWORD);
    env.put(Context.SECURITY_CREDENTIALS, USER_ADMIN);

    try {
        LdapContext ctx = new InitialLdapContext(env, null);

        // Activate paged results
        int pageSize = 1000;
        byte[] cookie = null;
        ctx.setRequestControls(new Control[] { new PagedResultsControl(pageSize, Control.NONCRITICAL) });
        int total;

        do {
            /* perform the search */
            SearchControls sc = new SearchControls();
            sc.setSearchScope(SearchControls.SUBTREE_SCOPE);
            String filtro = "(&(sAMAccountName=*)&(objectClass=user))";
            NamingEnumeration results = ctx.search(getBaseDn(ctx), filtro, sc);

            /* for each entry */
            while (results.hasMoreElements()) {
                SearchResult result = (SearchResult) results.nextElement();
                Attributes attributes = result.getAttributes();
                //convert to MyUser class
                MyUser user = toUser(attributes);
                users.add(user);
            }

            // Examine the paged results control response
            Control[] controls = ctx.getResponseControls();
            if (controls != null) {
                for (int i = 0; i < controls.length; i++) {
                    if (controls[i] instanceof PagedResultsResponseControl) {
                        PagedResultsResponseControl prrc = (PagedResultsResponseControl) controls[i];
                        total = prrc.getResultSize();
                        if (total != 0) {
                            System.out.println("***************** END-OF-PAGE " + "(total : " + total + ") *****************\n");
                        } else {
                            System.out.println("***************** END-OF-PAGE " + "(total: unknown) ***************\n");
                        }
                        cookie = prrc.getCookie();
                    }
                }
            } else {
                System.out.println("No controls were sent from the server");
            }
            // Re-activate paged results
            ctx.setRequestControls(new Control[] { new PagedResultsControl(pageSize, cookie, Control.CRITICAL) });

        } while (cookie != null);

        ctx.close();

    } catch (NamingException e) {
        System.err.println("PagedSearch failed.");
        e.printStackTrace();
    } catch (IOException ie) {
        System.err.println("PagedSearch failed.");
        ie.printStackTrace();
    } catch (Exception ie) {
        System.err.println("PagedSearch failed.");
        ie.printStackTrace();
    }

    LOG.info("listUsers() size = " + (users.size()));
    LOG.info("listUsers() fim");

    return users;
}

private MyUser toUser(Attributes attributes) throws NamingException {
    if (attributes != null) {
        String fullName = attributes.get("distinguishedName") != null ? attributes.get("distinguishedName").get().toString() : null;
        String mail = attributes.get("mail") != null ? attributes.get("mail").get().toString() : null;
        String userName = attributes.get("cn") != null ? attributes.get("cn").get().toString() : null;
        String userPrincipalName = attributes.get("userPrincipalName") != null ? attributes.get("userPrincipalName").get().toString() : null;

        if (userPrincipalName != null) {
            String[] user = userPrincipalName.split("@");
            if (user != null && user.length > 0) {
                userName = user[0];
            }
        }

        MyUser user = new MyUser();
        user.setFullName(fullName);
        user.setEmail(mail);
        user.setName(userName);
        user.setUserPrincipalName(userPrincipalName);
        user.setRoles(getRolesUser(attributes));

        return user;
    }

    return null;
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-03T15:19:09.190

LDAP 客户端将“客户端请求”的大小限制设置为 2000。此客户端请求的限制不能覆盖服务器配置中设置的限制。无论客户端请求的大小限制是什么，服务器的大小限制都会覆盖它。请与您的目录服务器管理员联系并要求增加大小限制。

# actionscript-3 - 使用闪光灯交替播放左右扬声器的声音

> ID：11311768
> 
> 赞同：0
> 
> 时间：2012-07-03T13:16:36.610
> 
> 标签：actionscript-3, flash

我在一个数组中有一组声音，当我单击“开始”按钮时，它将开始随机播放。现在我想知道如何在左右扬声器中交替播放声音。例如。如果第一个声音在我耳机的左扬声器中播放，则第二个声音应该在右扬声器中播放，依此类推。有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:29:38.090

您可以使用 SoundTransform 类来完成此操作。查看此帮助文章以获取示例[http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7d1f.html](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7d1f.html)

这是一个摘录，以防链接失效：

> 一个单独的 SoundChannel 对象控制声音的左右立体声通道。如果 mp3 声音是单声道声音，SoundChannel 对象的左右立体声通道将包含相同的波形。
> 
> 您可以使用 SoundChannel 对象的 leftPeak 和 rightPeak 属性找出正在播放的声音的每个立体声通道的幅度。这些属性显示了声音波形本身的峰值幅度。它们不代表实际的播放音量。实际播放音量是声波幅度和 SoundChannel 对象和 SoundMixer 类中设置的音量值的函数。
> 
> SoundChannel 对象的 pan 属性可用于在播放期间为每个左右声道指定不同的音量级别。pan 属性的值范围为 -1 到 1，其中 -1 表示左声道以最高音量播放而右声道静音，1 表示右声道以最高音量播放而左声道静音。介于 -1 和 1 之间的数值设置左右声道值的比例值，值 0 表示两个声道都以平衡的中等音量播放。
> 
> 下面的代码示例创建一个 SoundTransform 对象，其音量值为 0.6，平移值为 -1（左上声道音量且无右声道音量）。它将 SoundTransform 对象作为参数传递给 play() 方法，该方法将该 SoundTransform 对象应用于为控制播放而创建的新 SoundChannel 对象。

```
var snd:Sound = new Sound(new URLRequest("bigSound.mp3"));
var trans:SoundTransform = new SoundTransform(0.6, -1);
var channel:SoundChannel = snd.play(0, 1, trans); 
```

> 通过设置 SoundTransform 对象的平移或音量属性，然后将该对象应用为 SoundChannel 对象的 soundTransform 属性，您可以在播放声音时更改音量和平移。

您需要添加的只是一个布尔标志，以指示哪一侧不应该有音量，然后适当地修改声音变换。

# ruby-on-rails-3 - 视图被调用但未渲染

> ID：11311773
> 
> 赞同：0
> 
> 时间：2012-07-03T13:16:53.147
> 
> 标签：ruby-on-rails-3

我正在开发一个具有问答格式的项目，其中包含问题、答案和问题评论，但我对这种结构有疑问。我的路线图是这样的：

经验简介 --> 讨论

因此，在这个项目中，我有一个包含一些信息的体验资料和一个链接，用于汇总所有问答结构的讨论。我的问题是，当我尝试通过 link_to 访问讨论结构（Q&A）时，没有呈现任何内容。我正在使用 Rails 3.2.0 和 Ruby 1.9.3 版本。我需要你的帮助！

**经验简介（link_to）：**

```
<%= link_to "New topic", experience_discussions_path(@experience), :remote => true %></p> 
```

**讨论控制器：**

```
respond_to :html, :json
def index
    @experience = Experience.find(params[:experience_id])
    @question = Question.new
    @questions = Question.where(:experience_id => @experience.id).order('updated_at desc')

respond_with(@experience, @questions) do |format|
    format.html { render :layout => !request.xhr? }
end
end

def create
    @experience  = Experience.find(params[:experience_id])
    @question = @experience.questions.new(params[:question])
    @question.user = current_user
if @question.save
    flash[:notice] = 'Pergunta criada com sucesso'
else
    respond_with(@experience, @question) do |format|
    format.html { redirect_to experience_path(@experience)+'#discussion' }
    end
end 
```

**讨论视图（索引）：**

```
<div id="questions">
<%= form_for(@question, :url => experience_discussions_path, :method => 'post') do |f| %><br />
<fieldset class ="new_question">
<div class="field">
    <%= f.label "Ask question" %>
    <%= f.text_field :title %>
</div>
<div class="field">
    <%= f.submit "Create", :class => 'button' %>
</div>
</fieldset>
<% end %>

<% @questions.each do |q| %>
<h3 id="q_title">
    <%= (:question) %>: <%= q.title %><br />
    <small> <%= (:question_from) %> <%= q.user %></small>
</h3>

<%= form_for(Answer.new(:question => q),:url => experience_discussion_answers_path(@experience, q),:method => 'post') do |f| %>
<fieldset class="new_answer">
<div class="field">
    <%= f.label "Resposta" %>
    <%= f.text_area :body %>
</div>
<div class="field">
    <%= f.submit "Create", :class => 'button' %>
</div>
</fieldset>
<% end if current_user == @experience.user && q.answers.empty? %>

<% q.answers.each do |answer|%> 
    <p><%= answer.body %></p> 
<% end %>

<% q.comments.each do |comment|%>
    <p <%= 'class=owner' if comment.user == @experience.user%> >
    <small><%= user_link comment.user %></small>
    <br>
    <%= comment.body %>
    </p>
<% end unless q.answers.empty? %>  
<%= link_to("Add comment"), experience_discussion_comments_path(@experience, q)) %>
<%= render(:partial => 'question_comment') %>
<% end %>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:52:06.713

删除所有那些respond_to和respond_with代码，让rails显示一些错误，你会看到那里缺少什么，我想你需要在你的方法上使用respond_to format.js并拥有.js.erb视图

检查日志并查看到达服务器的请求格式

# php - 使用名称值对列表开发灵活的 SOAP 服务器/客户端？

> ID：11311774
> 
> 赞同：0
> 
> 时间：2012-07-03T13:16:55.433
> 
> 标签：php, mysql, soap, nusoap, complextype

问题：我试图找到一种更好的方法来管理对多个网站（域/ips）共享的多个 SOAP 客户端/服务器的更改。幸运的是，我可以控制所有 SOAP 服务器/客户端，但是我偶尔需要为某些复杂类型添加一两个新字段。

添加字段会导致相关站点之间发生依赖性问题。SOAP 服务器中没有新字段会导致发生错误。部署到这些站点的开发、演示、生产版本会导致依赖噩梦的发生。

我已经看到 SugarCRM 设置其复杂类型的方式，并注意到它们具有名称/值对列表。我正在考虑采用类似的方法，但想从 Stackoverflow 上的人们那里获得一些反馈。我主要使用 PHP/MySQL。

这种方法有问题吗？我认为这将允许我定义任意数量的名称/值对。我认为它可能会导致 SOAPClient 类映射存在问题？

```
<xsd:complexType name="name_value">
    <xsd:all>
        <xsd:element name="name" type="xsd:string"/>
        <xsd:element name="value" type="xsd:string"/>
    </xsd:all>
</xsd:complexType>

<xsd:complexType name="name_value_list">
    <xsd:complexContent>
        <xsd:restriction base="SOAP-ENC:Array">
        <xsd:attribute ref="SOAP-ENC:arrayType" wsdl:arrayType="tns:name_value[]"/>
        </xsd:restriction>
    </xsd:complexContent>
</xsd:complexType>

<xsd:complexType name="name_value_lists">
    <xsd:complexContent>
        <xsd:restriction base="SOAP-ENC:Array">
        <xsd:attribute ref="SOAP-ENC:arrayType" wsdl:arrayType="tns:name_value_list[]"/>
        </xsd:restriction>
    </xsd:complexContent>
</xsd:complexType> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T01:16:49.510

当您进行向后不兼容的更改时，您应该将端点移动到新的 URL 或提供某种其他类型的标记；在某些地方，声明所需版本的 XML 属性附加到 band 中的第一个元素。在其他情况下，它是 HTTP POST 请求中包含的标头（或者更罕见的是查询字符串）。然后，您必须考虑跨多个位置的 API 的多个版本。

作为旁注（不是想在这里挑起战争）：这是 REST 架构真正闪耀的地方：所有版本控制都由 MIME 类型处理。如果资源不支持给定的 MIME 类型，它可以向请求者发送信号，并协商一个更兼容的版本。

# sqlite - 如何使用 Phonegap 在手机上保存数据

> ID：11311776
> 
> 赞同：1
> 
> 时间：2012-07-03T13:17:05.950
> 
> 标签：sqlite, cordova

我正在使用电话间隙为移动设备制作待办事项列表。我使用sqlite保存数据，但是当我关闭模拟器并重新打开它时，数据丢失了，所以我想知道当我把它放在真正的手机上时它是否不会丢失，&有没有办法从手机本身检查手机数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:21:44.417

是的，当您关闭模拟器时，您的数据库将被删除（当您从一开始运行模拟器时，它将假定应用程序是新的）。如果您想在应用程序关闭时检查您的数据是否保留在手机中。按下主页按钮并再次返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T21:25:24.343

澄清一下 - 这实际上取决于您正在开发的平台；以及 SDK 是否提供“*模拟器*”或*“模拟器”*。

示例： [Android**模拟器**](http://en.wikipedia.org/wiki/Android_emulator#Software_development_tools)- 这是一个模拟器，这意味着它将设备模拟为真实设备；就像虚拟计算机一样，它能够保存它的数据和状态。Android 模拟器是基于 QEMU 构建的 - 一个类似于 VMWare 的简化版本的模拟包。这就是为什么启动 Android Emulator 类似于启动 Android 设备需要多长时间的原因之一：Android 加载、初始化等实际上需要一段时间。

与[iPhone **Simulator**](http://en.wikipedia.org/wiki/IOS_SDK)相比——这只是设备功能的模拟器；它实际上并不运行 iOS，它只是模拟在这样的环境中运行的应用程序。因此它无法保存数据，即使它与 Android 模拟器相比非常快。

这似乎不是一个大问题 - 但在生产环境中确实可以。如果您正在跨多个平台测试应用程序，那么这些差异可能看起来好像一个平台的实现无法保存数据；这最终会导致数小时的调试和阅读，只是为了发现它与 SDK 工具有关 - 而不是您的代码！

# html - div 不适合 ul 和 li

> ID：11311783
> 
> 赞同：-1
> 
> 时间：2012-07-03T13:17:24.200
> 
> 标签：html, css

> **可能重复：**
> [为什么溢出隐藏会阻止浮动元素逃离其容器？](https://stackoverflow.com/questions/9193214/why-does-overflow-hidden-stop-floating-elements-escaping-their-container)

为什么我的 div 元素没有显示在我的 ul 和 li 中？如果我设置它是块，为什么我的 li 充当内联元素？看看这段代码：http: [//jsfiddle.net/jNkZP/](http://jsfiddle.net/jNkZP/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T13:34:03.913

您`div`的 s 漂浮在`li`s 内。当一个元素只包含浮动对象时，它就会折叠。更雄辩地说：

> 当浮动包含在具有可见边框或背景的容器框中时，该浮动不会自动强制容器的底部边缘向下，因为浮动变得更高。相反，浮动会被容器忽略，并且会像旗帜一样从容器底部垂下。那些只熟悉 Windows 资源管理器的人可能会摸不着头脑说“这不对！” 诚然，IE/Win 确实会“自动”在容器中包含一个浮点数，但前提是容器元素恰好具有称为 hasLayout 的 MS-only 质量。
> 
> [http://www.positioniseverything.net/easyclearing.html](http://www.positioniseverything.net/easyclearing.html)

解决方案：查看[clearfix](http://css-tricks.com/snippets/css/clear-fix/)或其任何[替代方案](http://thinkvitamin.com/design/everything-you-know-about-clearfix-is-wrong/)。

例如，我曾经`overflow: hidden;`证明我的观点：http: [//jsfiddle.net/jNkZP/23/](http://jsfiddle.net/jNkZP/23/)

```
#QuadroEvento ul.ListaDadosEvento li{
    display: block;
    position: relative;
    background-color: #722827;
    outline: blue solid 1px;
    overflow: hidden;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:22:05.233

li不能包含div等块元素，改为span

```
<div class="QuadroPrincipal">
<div id="QuadroEvento">

    <ul class="ListaDadosEvento">
        <li>

                <span class="label">Descrição:</span>
                <span class="dados">@ev</span>

        </li>
        <li>
                <span class="label">Local:</span >
                <span class="dados">@ev</span >

        </li>
    </ul>
    </div>
</div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T13:34:19.540

替换为跨度

```
<div class="QuadroPrincipal">
<div id="QuadroEvento">

    <ul class="ListaDadosEvento">
        <li>

                <span class="label">Descrição:</span>
                <span class="dados">@ev</span>

        </li>
        <li>
                 <span class="label">Descrição:</span>
                <span class="dados">@ev</span>

        </li>
    </ul>
    </div>
</div>
</div> 
```

从css中删除左边的浮动

```
 #QuadroEvento ul.ListaDadosEvento div.label{
        text-align: right;
        font-weight: bold;
        min-width: 100px;outline: black solid 1px;
    }
    #QuadroEvento ul.ListaDadosEvento div.dados{
        padding-left: 5px;
        text-align: justify;
        outline: black solid 1px;
    }​ 
```

# fortran - 在fortran中读取csv文件中的日期、时间和数据

> ID：11311787
> 
> 赞同：1
> 
> 时间：2012-07-03T13:17:37.970
> 
> 标签：fortran

我正在尝试读取一个看起来像这样的数据集

```
DATE,TIME,val
1/1/2001,1:00:00,0 
```

与程序

```
program main
implicit none

real :: val
character(len=8) :: date
character(len=7) :: time
open(1,file='data.csv',status='old')
read(1,*) ! header
read(1,fmt=100)date,time,val
100 FORMAT (A,1x,A,1x,F3.1)
end program 
```

如果日期和时间总是有 8 个或 7 个字符但它们没有，这一切都很好

```
 4/21/2001,19:00:00,0 
```

我应该如何声明 fortran 的格式以读取示例中的日期、时间、val 行？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T13:42:35.053

您可以将所有整`data, time, value`行读入一个字符串，然后对其进行处理以提取各个元素，类似于

```
program main
implicit none

real :: val
character(len=10) :: date
character(len=8) :: time

character(len=100) :: line
integer :: n1, n2, end

open(1, file='data.csv', status='old')

! Read entire second line into `line`, ignoring the header
read(1,*) ! header
read(1,'(A100)') line

! Determine locations of the first and last comma in `line` and the
! end of the line:
n1  = index(line, ',')
n2  = index(line, ',', back=.True.)
end = len_trim(data)

! Split line up according to position of commas and assign to 
! appropriate variables
date = data(1:n1-1)
time = data(n1+1:n2-1)
read(data(n2+1:end), *) val ! Internal read, for converting from string to float

end program main 
```

请注意，这对问题中的示例数据高度专业化，但概括此代码应该不会太难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T22:43:08.567

您尚未定义您正在使用的“数据”变量。该解决方案的另一个问题是，现在您将所有变量都作为字符卡住了，这可能对分析没有用处。

# android - 在果冻豆模拟器上按下 Enter 键后不调用 onEditorAction()

> ID：11311790
> 
> 赞同：23
> 
> 时间：2012-07-03T13:17:44.340
> 
> 标签：android, android-edittext, avd, android-4.2-jelly-bean

我对最新的 Jelly Bean 模拟器的行为有疑问。我的应用程序中有几个`EditTexts`。`OnEditorActionListener`当用户按下键盘上的 ENTER 键时，An提供特殊处理。`onEditorAction()`这在 ICS 之前一直有效，但现在在 Jelly Bean 上不再调用侦听器回调方法。只有一个新行插入到`EditText`.

可以这样复制：

```
EditText testEditText = new EditText(context);
testEditText.setOnEditorActionListener(new OnEditorActionListener() {

    public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
        Log.d(TAG, "onEditorAction() called");
        return false;
    }
});
addView(testEditText); 
```

这是果冻豆中的错误吗？还是在模拟器中？还是故意改变了行为？

奇怪的是，其他人写道，在运行 Jelly Bean 的 Nexus 7 上调用了该方法，但带有意外参数：[null keyevent 和 actionid = 0 in onEditorAction() (Jelly Bean / Nexus 7)](https://stackoverflow.com/questions/11301061/null-keyevent-and-actionid-0-in-oneditoraction-jelly-bean-nexus-7)

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-18T13:01:03.040

如果其他人发现这个问题：

我已经对此进行了多次测试，并且在 Jelly Bean 模拟器上，当在虚拟键盘上按下 Enter 键时，监听器回调方法 onEditorAction() 确实不再被调用。

正如我上面提到的，一种可能的解决方案或解决方法是将 Enter 键替换为可用的操作键之一。那些仍然触发 onEditorAction()。我还必须指定输入类型。

```
editText.setRawInputType(InputType.TYPE_CLASS_TEXT);
editText.setImeOptions(EditorInfo.IME_ACTION_GO);
```

```
<EditText
...
android:imeOptions="actionGo"
android:inputType="text" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-02T10:49:18.533

这是我所做的，它应该涵盖所有类型的 Enter 被按下：

```
override fun onEditorAction(v: TextView?, actionId: Int, event: KeyEvent?): Boolean {
    if (actionId == EditorInfo.IME_ACTION_DONE || actionId == EditorInfo.IME_NULL)
        ... // Enter pressed 
```

在 XML 我只添加了`android:imeOptions="actionGo"`

根据文档，原因是：

[https://developer.android.com/reference/android/widget/TextView.OnEditorActionListener.html#onEditorAction(android.widget.TextView,%20int,%20android.view.KeyEvent)](https://developer.android.com/reference/android/widget/TextView.OnEditorActionListener.html#onEditorAction(android.widget.TextView,%20int,%20android.view.KeyEvent))

> actionId int：动作的标识符。这将是您提供的标识符，或者 EditorInfo#IME_NULL 如果由于按下回车键而被调用。

# ruby - 如何调用动态生成的实例？

> ID：11311792
> 
> 赞同：0
> 
> 时间：2012-07-03T13:17:49.713
> 
> 标签：ruby

我希望生成一个动态变量，如下所示：

```
varnum = rand(100000)
value = 5
instance_variable_set("@v" + varnum.to_s, value) 
```

现在，在 IRB 中，如果 varnum 返回 345 - 您可以推断生成的变量是 @v345

但是，在脚本中运行代码 - 你将如何调用它？有没有办法用 @v + varnum.to_s 之类的东西修补变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T13:24:54.507

在没有将变量分配给任何东西的情况下，不幸的是，没有确切的方法可以获取它。如果是这种情况，您可以简单地使用`instance_variable_get`

如果你只使用这种技术一次，你也许可以通过一些间接的方式获得它。即给它一个特殊的名字...... v 是例子

```
ree-1.8.7-2011.03 :015 > instance_variables
 => ["@v48563", "@prompt"] 
```

您可以使用正则表达式为此添加 grep。

```
ree-1.8.7-2011.03 :016 > instance_variables.grep(/@v/)
 => ["@v48563"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T13:24:02.280

```
instance_variable_get("@v" + varnum.to_s) 
```

这会调用定义的实例变量

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T13:25:27.107

好吧，如果您想再次访问该变量，则必须执行以下两项操作之一：

*   保留您动态生成的所有实例变量的数组
*   用于`Object#instance_variables`获取实例变量列表，仅取出以 . 开头的变量`v`。

要在您仍然拥有变量值后访问变量，请使用以下命令：

```
instance_variable_get("@v#{varnum.to_s}") 
```

不过这里有一个更深层次的问题。你永远不应该*，*永远*，*永远**动态**生成实例变量。如果您需要通过作为对象一部分的随机数访问数据，请使用一个实例变量，例如`@vs`，它是将随机数映射到您的值的哈希值。

# ruby - 将捕获替换为值，然后返回整个匹配的模式

> ID：11311794
> 
> 赞同：0
> 
> 时间：2012-07-03T13:17:51.503
> 
> 标签：ruby, regex

我有一些包含 JavaScript 变量定义的文本（页面的 HTML）：

```
var FOREGROUND_COLOR = '#ffffff';    
var BACKGROUND_COLOR = '#aaaaaa';
var BORDER_COLOR = '#000000'; 
```

我想使用 ruby​​ 正则表达式模式匹配字符串内容`/var BACKGROUND_COLOR = '(#.*?)';/`，并用替换值 ( `#bbbbbb`) 替换捕获，然后返回**整个原始模式**并替换值，这样新的内容将是

```
var FOREGROUND_COLOR = '#ffffff';    
var BACKGROUND_COLOR = '#bbbbbb';
var BORDER_COLOR = '#000000'; 
```

主要约束是模式是在外部文件中定义的，替换值来自数据库，并且内容（带有 javascript 和我想要更改的其他值的 HTML 页面）在运行时不受我的控制。所以当模式被定义时，我不知道替换，而当替换被定义时，我不知道模式。因此，我需要假设模式和价值都已给出。

简单的 ruby​​ gsub 不起作用：

```
contents.gsub(pattern, replacement)
=> 
var FOREGROUND_COLOR = '#ffffff';    
#bbbbbb                               // this is the problem with simple gsub
var BORDER_COLOR = '#000000'; 
```

但看起来我可以使用反向引用（`\1`）来使用块语法。但我宁愿不必更改我的模式，因为它们已经很复杂（这是一个简化的情况，正则表达式是处理模式变化所必需的）。我可以破解并使其工作，但这似乎并不明智。

如何在 Ruby 中有效地做到这一点？

附加说明（为什么尚未接受答案）我事先知道模式，但它并不总是以形式`var SOMETHING = '#COLOR_VALUE';`——它可能是 CSS 规则、URL 或其他任意模式。如果我有一个值`X, Y and Z`、一个模式`/The letters of the day are (.*?), Cookie Monster/`和包含的内容

```
<p>Welcome to Sesame Street!</p>
<p>The letters of the day are Q, J and L, Cookie Monster.  Do you like them?</p> 
```

我的操作后内容应该是

```
<p>Welcome to Sesame Street!</p>
<p>The letters of the day are X, Y and Z, Cookie Monster.  Do you like them?</p> 
```

我不认为 7 月 11 日之前的答案提供了一个通用的解决方案，尽管他们可能会回答我提出的问题。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:46:50.270

***脚本：***

```
contents = 'var FOREGROUND_COLOR = \'#ffffff\';     
var BACKGROUND_COLOR = \'#aaaaaa\'; 
var BORDER_COLOR = \'#000000\';'

pattern = '(?<=(var BACKGROUND_COLOR = \'))(#[a-zA-Z\d]+)(?=(\';))'

replacement = '#bbbbbb'

contents = contents.sub(/#{pattern}/m, replacement)
puts contents;
puts "\n"
puts $1+$2+$3; 
```

***输出：***

```
var FOREGROUND_COLOR = '#ffffff';     
var BACKGROUND_COLOR = '#bbbbbb'; 
var BORDER_COLOR = '#000000';

var BACKGROUND_COLOR = '#aaaaaa'; 
```

*[在这里](http://ideone.com/Ux1iA)测试代码。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T15:00:40.010

这是一个允许您为每个正则表达式存储多个替换值的解决方案：

```
JS = %Q{
  var FOREGROUND_COLOR = '#ffffff';    
  var BACKGROUND_COLOR = '#aaaaaa';
  var BORDER_COLOR = '#000000';
}

# String regexes from DB mapped to array of replacement values
# First array entry [0] matched the first regex capture \1
FIND_REPLACE = {
  "var BACKGROUND_COLOR = '(#.*?)';" => ['#bbbbbb']
}

def replace_all( str, find_replace )
  str.dup.tap do |result|
    find_replace.each do |re,replacements|
      result.gsub! Regexp.new(re) do
        matches = $~
        matches[0].tap do |result|
          replacements.each.with_index do |replacement,i|
            found = matches[i+1]
            puts "Replacing #{found} with #{replacement}"
            result[found] = replacement
          end
        end
      end
    end
  end
end

puts replace_all( JS, FIND_REPLACE )

#=> Replacing #aaaaaa with #bbbbbb
#=> 
#=>   var FOREGROUND_COLOR = '#ffffff';    
#=>   var BACKGROUND_COLOR = '#bbbbbb';
#=>   var BORDER_COLOR = '#000000'; 
```

这不是一个理想的答案，因为`result[found] = replacement`如果此通道上先前替换的结果创建的内容与稍后匹配的文本相同，则该行可能会做错事。例如：

```
# Should output "dogs = emus"
puts replace_all "cats = dogs", "(\\w+) = (\\w+)" => ["dogs","emus"]
#=> Replacing cats with dogs
#=> Replacing dogs with emus
#=> emus = dogs

# Should output "foo = bar"
puts replace_all "foo = foo", "foo = (\\w+)" => ["bar"]
#=> Replacing foo with bar
#=> bar = foo 
```

# html - 带有边框半径和背景渐变的 HTML 进度条

> ID：11311810
> 
> 赞同：0
> 
> 时间：2012-07-03T13:18:26.047
> 
> 标签：html, css, linear-gradients

我需要像这样制作一个进度条：

[http://kashqool.com/files/progress-bar.png](http://kashqool.com/files/progress-bar.png)

它必须在（IE6+、Chrome 3+、Firefox 5+、Opera 9+）中工作。因此，对于 IE 中的边界半径，我添加了 ie-css3.htc，但问题是 - 在 IE 中，当我添加边界半径和线性渐变背景时，不会显示边界半径。- 是否有可能当 DIV 宽度为 43% 时不会显示黑边。什么时候会显示 100%。就像图片一样。

这是代码：

```
<!DOCTYPE HTML>
<html>

<head><title>Level 1</title>

<style type="text/css">

html,

body{
margin:0;
paddding:0; 

}

h3{
padding:0;
`margin`:0;
}

.progress_bar1{
behavior:url(ie-css3.htc);
background-color:white;
position:relative;
width:700px;
height:30px;
border:1px solid black; 
border-radius:8px;
-moz-border-radius: 8px;
-webkit-border-radius: 8px;
float:left;
padding:4px;

}

.first_bar{
behavior:url(ie-css3.htc);
background-color:white;
width:100%;
height:28px;
float:left; 
z-index:1;f

}

.div_100{
background-color:red;
width:100%;
filter: progid:DXImageTransform.Microsoft.gradient(gradientType=1, startColorstr=#FF8A2BE2, endColorstr=#FF000000);
background-image: -webkit-gradient(
    linear,
    left top, right top,
    from(blueviolet),
    to(black)
);
background-image: -webkit-linear-gradient(
    left,
    blueviolet,
    black
);
background-image: -moz-linear-gradient(
    left,
    blueviolet,
    black
);
background-image: -o-linear-gradient(
    left,
    blueviolet,
    black
);
background-image: linear-gradient(
    left,
    blueviolet,
    black
);

border-radius:8px;
-moz-border-radius: 8px;
-webkit-border-radius: 8px;
height:28px;
float:left;     
}

</style>

</head>

<body>
<h3> Level 1 </h3>
<div class="progress_bar1">
    <div class="first_bar">     
        <div class="div_100"></div>     
    </div>
</div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T13:23:37.050

我只是在这里猜测，但我认为结合背景渐变*和*圆角黑客可能会导致一些奇怪的行为。

**我只是简单地省略了 IE6-8 的圆角。**它被称为“渐进式增强”。更好的浏览器可以获得更好的体验。IE6-8 的进度条仍然可以“工作”，它们只是有方角而不是圆角。对象的要点 - 正在取得的进展量 - 仍然对用户有用。您的用户不会从 IE6 转到 Chrome 并比较进度条。放手吧。

请参阅：[http ://dowebsitesneedtolookexactlythesameineverybrowser.com/](http://dowebsitesneedtolookexactlythesameineverybrowser.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:29:38.083

Internet Explorer 6 相当老旧，不支持 css3。任何一个

*   按照 ajm 的建议使用 CSS3Pie（我很惊讶它甚至可以工作），
*   使用 javascript，
*   使用圆角*图像*，
*   或者只是接受它太旧并且用户应该更新他们的浏览器。

# javascript - jQuery popeye 不想工作

> ID：11311812
> 
> 赞同：0
> 
> 时间：2012-07-03T13:18:27.780
> 
> 标签：javascript, jquery

大家好，我无法提供代码，但您可以在网上看到。 [链接在这里](http://bestinvest.ge/en/?transaction=3&minrooms=1&maxrooms=100&minprice=&maxprice=)

所有脚本在网络上都能正常工作，但我无法配置 popeye 并找到问题... 任何人都可以检查一下吗？

当我检查谷歌错误时，它会在 jquery 1.7.2 中标记以下代码。

```
return makeArray( context.querySelectorAll( "[id='" + nid + "'] " + query ), extra ) 
```

大力水手的网站[在这里](http://dev.herr-schuessler.de/jquery/popeye/demo.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:00:03.290

我不知道这是否有帮助，但这是我使用 chrome 控制台时遇到的错误，一些资源没有加载，并且我相信有未定义的对象传递给 popeye

```
Resource interpreted as Script but transferred with MIME type text/html: "http://bestinvest.ge/js/script.js". header.js:2

(anonymous function) header.js:2

GET http://bestinvest.ge/en/upload/sresize.php?src=building/uploads/41/&w=160&h=110 400 (Bad Request) /en/?transaction=3&minrooms=1&maxrooms=100&minprice=&maxprice=:739

GET http://bestinvest.ge/en/upload/sresize.php?src=building/uploads/41/&w=280&h=180 400 (Bad Request) /en/?transaction=3&minrooms=1&maxrooms=100&minprice=&maxprice=:746
3

Uncaught TypeError: Cannot call method 'show' of undefined jquery.js:8480
jQuery.fn.extend.fadeTo jquery.js:8480
showImage jquery.popeye-2.1.js:288
$.fn.popeye.each.$self.mouseenter.ismouseover jquery.popeye-2.1.js:642
jQuery.event.dispatch jquery.js:3332
jQuery.event.add.elemData.handle.eventHandle jquery.js:2941 
```

希望对您有所帮助，祝您好运

# jquery - 使用 jQuery 通过选择选项更改文本的 css - 如何组合多个功能

> ID：11311817
> 
> 赞同：1
> 
> 时间：2012-07-03T13:18:39.910
> 
> 标签：jquery

这是我第一次使用 jQuery，我很高兴我的第一次尝试工作。[在这篇文章](https://stackoverflow.com/questions/9024516/div-css-change-when-select-option-is-selected-with-jquery)的帮助下，我设法实现了我想做的事情，但我不禁觉得有一种更简洁的方法可以做到这一点，但无法弄清楚如何做。

基本上我有一个页面，其中包含根据所需服务级别更改价格的下拉菜单。When the select options are changed the color of the price also changes. 这些价格来自一个数据库，所以我在这里放了一个基本版本，价格不会改变，但文本颜色会改变。

每个下拉列表的 id 像这样递增 - optn0x0、optn1x0 等

以及价格增量的 div id，例如 pricediv0、pricediv1 等

我想做的是将 jQuery 代码合并到一个函数中，因为有 13 个下拉菜单，所以按照我的方式，这将是很多代码。

这是代码

```
<style>
.saver{color:red;}
.express{color:black;}
.expressplus{color:blue;}
</style>

<html>

<select class="prodoption" name="optn0" id="optn0x0"><option value="68">Saver</option>
<option value="69" selected="selected">Express</option>
<option value="70">ExpressPlus</option>
</select>

<td class="cobll cpdll"><div class="prod3price"><span class="price" id="pricediv0">74.00</span></div></td>

<select class="prodoption" name="optn0" id="optn1x0"><option value="68">Saver</option>
<option value="69" selected="selected">Express</option>
<option value="70">ExpressPlus</option>
</select>

<td class="cobll cpdll"><div class="prod3price"><span class="price" id="pricediv1">74.00</span></div></td>
</html> 
```

这是jQuery

```
$('select[id^=optn0x0]').change(function(){

$('#pricediv0').removeClass('saver express expressplus').addClass(
    $(this).find('option:selected').text().toLowerCase()
);
})
.change();

$('select[id^=optn1x0]').change(function(){

$('#pricediv1').removeClass('saver express expressplus').addClass(
    $(this).find('option:selected').text().toLowerCase()
);
})
.change(); 
```

任何建议将不胜感激。

* * *

你好，

谢谢大家对此的回答

我现在有两个可行的解决方案：

```
$('select[id^="optn"]').change(function(){
var ind = $(this).attr('id').replace('optn', '')
var cls = $(this).find('option:selected').text().toLowerCase();
$('#pricediv' + parseInt(ind) ).removeAttr('class').addClass(cls)
})
.change(); 
```

和

```
$('select[id^="optn"]').change(function(){
var ind = $(this).attr('id').replace('optn', '')
$('#pricediv' + parseInt(ind) ).removeClass('saver express expressplus').addClass(
   $(this).find('option:selected').text().toLowerCase()
)
})
.change(); 
```

任何人都可以提供任何指导，说明哪一个是最好的，因此我应该使用哪一个，因为我是 jQuery 新手，我试图了解什么是做什么的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:26:20.153

试试这个：

```
$('select[id^="optn"]').change(function(){
    var ind = $(this).attr('id').replace('optn', '')
    var cls = $(this).find('option:selected').text().toLowerCase();
    $('#pricediv' + parseInt(ind) ).removeAttr('class').addClass(cls)
}) 
```

[http://jsfiddle.net/63MQu/10/](http://jsfiddle.net/63MQu/10/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:46:34.597

你可以试试：

```
$('select[id^="optn"]').change(function(){
    var $this = $(this);
    var n = $this.attr('id').charAt($this.attr('id').length-3);
    var p = $('#pricediv' + n);
    p.removeClass('saver express expressplus').addClass(
       $this.find('option:selected').text().toLowerCase()
    )
})​ 
```

[演示](http://jsfiddle.net/9qkQ8/4/)

缺点是您仅限于单个字符。我建议让价格标签与相应的选择标签共享一个属性。例如，就像名称一样（开头应该是唯一的）。

`td`'s 也不应该在表格之外使用。只需使用`div`或`span`

# svg - 使用 Raphael 创建具有不同颜色的动画圆形对象

> ID：11311820
> 
> 赞同：1
> 
> 时间：2012-07-03T13:19:05.820
> 
> 标签：svg, raphael

我的代码：

```
$(document).ready(function () {           

            // Creates canvas 800 × 800 at 30, 50
            var paper = Raphael(30, 50, 800, 800);
            $(document).click(function () {
                create(paper);
            });

            function create(paper) {

                // Creates circle at x = 250, y = 100, with radius 50
                var circle = paper.circle(250, 100, 50);
                // Sets the fill attribute of the circle to red (#f00)
                circle.attr("fill", "#f00");

                // Sets the stroke attribute of the circle to white
                circle.attr("stroke", "#EEE");
                circle.animate({ transform: "r" + 180 }, 1000);
           }
        }); 
```

单击文档时，我可以创建一个圆圈。请让我知道根据我使用 Raphael.js 在动态位置在页面上点击飞行动画创建具有不同颜色的圆形对象的代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:57:52.083

也许你可以从中调整一些东西？

```
var canvas = Raphael( 0, 0, 320, 240 );

var backboard = canvas.rect( 0, 0, 320, 240 ).attr( { fill: 'white', stroke: 'none' } );

backboard.click( function( event, x, y )
    {
        var bbox = backboard.getBBox();
        var x_ratio = x / bbox.width;
        var y_ratio = y / bbox.height;

        var color = 'rgb(' + Math.floor( x_ratio * 255 ) + ',0,' + Math.floor( y_ratio * 255 ) + ")";

        var transient_circle = canvas.circle( x, y, 25 ).attr( { fill: color, stroke: 'black', 'stroke-width': 1 } );
        transient_circle.animate( { cx: bbox.width / 2, cy: bbox.width / 3, 'fill-opacity': 0.25 }, 3000, ">", function()
            {
                transient_circle.animate( { 'stroke-opacity': 0, 'fill-opacity': 0 }, 2500, function() 
                { 
                    transient_circle.remove(); 
                } );
            } );
    } ); 
```

小提琴就[在这里](http://jsfiddle.net/kevindivdbyzero/QZW3Q/)。

一般的想法是您捕获点击的位置，使用位置的一些变量来确定您的圆圈的属性，然后将圆圈从点击位置动画到中心，然后它会淡出并被移除。我让动画保持足够慢，以便可以看到许多不同颜色的透明圆圈重叠，只是因为它闪闪发光。

# c++ - 在 openssl 中使用 PKCS7_decrypt() 解密 char*

> ID：11311831
> 
> 赞同：2
> 
> 时间：2012-07-03T13:19:36.197
> 
> 标签：c++, openssl, pkcs#7, openca

我想在openSSL中使用`PKCS7_encrypt()`和`PKCS7_decrypt()`函数进行加密和解密。我在 openSSL Demo 中使用了这个例子。我想要做的是加密格式的消息`char*`并使用它解密`char*`。我不想读写文件。这是要加密的代码，它可以完美运行并且没有问题：

```
in = BIO_new_file("encr.txt", "r");
if (!in)
    return 0;

/* encrypt content */
p7 = PKCS7_encrypt(recips, in, EVP_des_ede3_cbc(), flags);
if (!p7)
    return 0;

char* chEnc = new char[1000];

BIO* memorybio = BIO_new(BIO_s_mem());
BIO* base64bio = BIO_new(BIO_f_base64());
BIO* outbio = BIO_push(base64bio, memorybio);

/* Copy PKCS#7 */
long ll = i2d_PKCS7_bio(outbio, p7);
BIO_flush(outbio);
BIO_set_flags(memorybio, BIO_FLAGS_MEM_RDONLY);
BIO_get_mem_data(memorybio, &chEnc);
cout << chEnc << "\n"; 
```

现在，当我想做相反的事情并解密`char*`chEnc 时，我做了如下：

```
BIO *in = NULL, *out = NULL, *tbio = NULL;
X509 *rcert = NULL;
EVP_PKEY *rkey = NULL;
PKCS7 *p7 = NULL;
int ret = 1;

OpenSSL_add_all_algorithms();
ERR_load_crypto_strings();

/* Read in recipient certificate and private key */
tbio = BIO_new_file("signer.pem", "r");

if (!tbio)
    return 0;

rcert = PEM_read_bio_X509(tbio, NULL, 0, NULL);
BIO_reset(tbio);
rkey = PEM_read_bio_PrivateKey(tbio, NULL, 0, NULL);
if (!rcert || !rkey)
    return 0;

BIO* memorybio = BIO_new(BIO_s_mem());
int iLength = BIO_puts(memorybio, chEnc);

BIO* base64bio = BIO_new(BIO_f_base64());
BIO* inbio = BIO_push(base64bio, memorybio);

/* Copy PKCS#7 */
BIO_flush(inbio);
BIO_set_flags(inbio, BIO_FLAGS_MEM_RDONLY);
p7 = d2i_PKCS7_bio(inbio, &p7);
if (!PKCS7_decrypt(p7, rkey, rcert, out, 0))
    return 0;

ret = 0;

if (ret) {
    fprintf(stderr, "Error Signing Data\n");
    ERR_print_errors_fp(stderr);
}

if (p7)
    PKCS7_free(p7);
if (rcert)
    X509_free(rcert);
if (rkey)
    EVP_PKEY_free(rkey);

if (in)
    BIO_free(in);
if (out)
    BIO_free(out);
if (tbio)
    BIO_free(tbio);

return ret; 
```

问题是它`PKCS7_decrypt`不起作用并且它不会解密为`out`变量。在 line 之后`if (!PKCS7_decrypt(p7, rkey, rcert, out, 0)) return 0;`，它从函数返回。解密程序是否正确？我应该使用openSSL的其他API来转换还是什么？

期待您的建议和意见。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-25T19:49:07.147

`PKCS7_decrypt(p7, rkey, rcert, out, 0)`失败是因为您传递给例程的 BIO“输出”是一个空指针。

如果您不想将输出写入文件，请尝试传递内存 BIO：

```
BIO *out = BIO_new(BIO_s_mem()); 
```

然后你可以直接从外面访问解密的数据，一旦你完成了它就可以销毁它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:56:26.833

你在收件人名单上吗？因为您需要成为收件人才能解密邮件。确保使用正确的密钥和证书。

# erlang - 如何更改 Yaws appmods 文件？

> ID：11311832
> 
> 赞同：7
> 
> 时间：2012-07-03T13:19:38.427
> 
> 标签：erlang, yaws

我正在尝试管理 Yast appmod。所以：
yaws.conf：

```
<server localhost>
   port = 8005
   listen = 127.0.0.1
   docroot = /home/ziel/www/CatsScript/src/
   appmods = </, myappmod>
</server> 
```

来自[http://yaws.hyber.org/appmods.yaws](http://yaws.hyber.org/appmods.yaws) myappmod.erl：

```
-module(myappmod2).
-author('klacke@bluetail.com').

-include("/home/ziel/erlang/yaws/include/yaws_api.hrl").
-compile(export_all).

box(Str) ->
    {'div',[{class,"box"}],
    {pre,[],Str}}.

out(A) ->
     {ehtml,
     [{p,[],
     box(io_lib:format("A#arg.appmoddata = ~p~n"
                       "A#arg.appmod_prepath = ~p~n"
                       "A#arg.querydata = ~p~n",
                       [A#arg.appmoddata,
                        A#arg.appmod_prepath,
                        A#arg.querydata]))}]}. 
```

当我第一次使用它时它就起作用了。但是后来当我在 myappmod.erl 中更改某些内容时，服务器的响应没有任何变化。比我删除了 myappmod.erl，但它仍然有效。我应该怎么做才能做出一些改变？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-04T13:39:11.770

当您启动 Yaws 时，它最终会引用您的`myappmod2`模块，从而导致 Erlang 运行时加载通过编译模块生成的梁文件。一旦它被加载，它就会一直加载，直到你强制重新加载它，例如通过交互式 Erlang shell，或者通过停止和重新启动 Yaws 和 Erlang 运行时。简单地从外部重新编译模块不会重新加载它。

如果你通过 交互式运行 Yaws `yaws -i`，你可以在它启动后点击“enter”来获得一个交互式 Erlang shell。如果您更改 appmod 模块并重新编译它，请确保将新的 beam 文件复制到旧的文件上，然后只需`l(myappmod2).`在交互式 shell 中键入，然后按回车键重新加载`myappmod2`模块（不要忘记右括号后的句点）。那个小写字母`l`是[Erlang shell 的 load command](http://www.erlang.org/documentation/doc-5.3/doc/getting_started/getting_started.html)。您还可以使用命令直接在 shell 中编译模块，该`c(myappmod2).`命令将编译并加载它（假设没有编译错误）。

如果 Yaws 以非交互方式运行，例如作为常规后台守护进程，则可以通过运行以下命令将模块重新加载到其中：

```
yaws --load myappmod2 
```

`--load`如果你想一次加载它们，你可以在选项后面加上多个模块名称。如果您的 Yaws 实例有一个特定的 id，请确保您还使用适当的`--id`选项来识别它。

如果您对自动重新加载重新编译的模块感兴趣，您可能会查看类似[reloader.erl](http://mochiweb.googlecode.com/svn/trunk/src/reloader.erl)模块，它监视重新编译的模块并自动加载它们。我不建议将它用于生产，但它对开发很方便。

# nasm - 如何将引导加载程序放在 CD 上

> ID：11311837
> 
> 赞同：2
> 
> 时间：2012-07-03T13:19:58.263
> 
> 标签：nasm, bootloader, bios

我在 nasm 中编写了一个简单的引导加载程序。它只会在屏幕上写 Hello world。但我不知道如何将它放在 CD/DVD 上。我有一个 .bin 文件。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:26:13.073

'El Torito' CD 规格允许您在 CD 上刻录软盘映像。

详见此处：[http](http://en.wikipedia.org/wiki/El_Torito_(CD-ROM_standard) ://en.wikipedia.org/wiki/El_Torito_(CD-ROM_standard )

如果您已经可以将引导加载程序放在 FAT 格式的软盘上，那么使用标准将该映像刻录到 CD 应该不会有太大的麻烦。

有关创建下降 .iso 文件的方法，请参阅此链接[http://www.linuxdoc.org/HOWTO/CD-Writing-HOWTO-4.html#ss4.11 。](http://www.linuxdoc.org/HOWTO/CD-Writing-HOWTO-4.html#ss4.11)

带有 -b 和 -c 选项的“mkisofs”命令会从您的软盘映像中生成这样的 .iso。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T04:49:50.163

您可以制作一个 iso 并将您的软盘映像存储为 iso 文件系统的引导加载程序。这对于 mkisofs 来说相当简单。如果您有一个名为 cdcontents 的文件夹，其中包含您的 .img 文件 (boot.img)，您可以这样做：

```
mkisofs -R -b boot.img -no-emul-boot -boot-load-size 4 -boot-info-table -o bootable.iso cdcontents 
```

然后，您可能可以使用大多数带有 .iso 文件的 cd 刻录程序将其刻录到光盘上。您尝试的程序可能不是用来将可启动软盘转换为可启动 iso 的，并且很可能是试图从软盘传输不存在的文件。有关更多信息，请查看[http://wiki.osdev.org/Bootable_CD](http://wiki.osdev.org/Bootable_CD)。

# html - 使用类中的纯 css 调整背景图像的大小：悬停

> ID：11311840
> 
> 赞同：0
> 
> 时间：2012-07-03T13:20:01.230
> 
> 标签：html, css, hover, scale

我有一个图像，我希望它在鼠标经过时更改为另一个图像。这对我来说似乎是正确的，但它总是看起来很大，在它的正常尺寸（128px x 128px）中，并且在另一个图像的后面。（另一个在 z-index:1 的 div 内），鼠标悬停 img 的那个有 z-index:999

这是我的CSS

```
.class1{
    max-width:64px;
    max-height:64px;
}
.class1:hover{
    background-image:url(http://img195.imageshack.us/MOUSEOVER_IMAGE.png);
    width:64px;
    height:64px;
    z-index:999;
    background-position:top center; 
```

这是我的形象

```
<a href="http://mylink"><img class=class1 src="http://imageshack.us/NORMAL_IMAGE.png" alt="some text here" /></a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:25:09.153

您正在更改图像的背景。除非您将其不透明度更改为 0，否则您将看不到背景。

我建议删除图像并为您的班级提供 a-tag。另外将 image-src 指定为普通背景。

```
.class1{
display:block;
background-image:url(...);
...}
.class:hover{...} 
```

和你的链接`<a href="http://mylink" class="class1">&nbsp;</a>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T13:35:21.383

这里有几个问题。就像 Tobas 提到的那样，您在链接上使用了背景图像，但您仍然有一个图像子元素。z-index 不会将父元素的背景置于子元素之上。

所以你有几个选择：

1：悬停时将img不透明度更改为0：

```
img.class1:hover { opacity: 0 } 
```

并在背景图片上使用 background-size ：

```
a:hover {
  background: url(...);
  background-size: 64px 64px;
 } 
```

2：完全删除子图像，并将图像换出作为链接的背景。如果图像没有语义价值，这是有道理的。

```
a { background: url(image1.png); }

 a:hover { background: url(image2.png); } 
```

3：用 javascript/jquery交换*图像本身：*

```
 $('img.class1').hover(function(){
    $(this).attr('src','image2.png');
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-06T19:04:16.347

不要忘记添加下面的属性（到包含该`background-image`属性的类/标签/div）。否则，在某些情况下会重复：

```
{
  background-size: contain;
  background-repeat: no-repeat
} 
```

# android - 如何获取按钮的背景ID

> ID：11311846
> 
> 赞同：1
> 
> 时间：2012-07-03T13:20:24.600
> 
> 标签：android, button

我想获取按钮背景图像的生成 ID。该星形图像来自drawable；我想获取其生成的 ID。

我知道`.getId`会得到按钮的特定 ID，但是后台资源的 ID 是我想要得到的。没有这样的事情`button.getBackground().getId()`

```
<Button
    android:id="@+id/btnhgfavorite"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/star" 
    android:focusable="false"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:28:29.107

似乎您将可绘制对象本身存储在 Resources 文件夹中。只需从那里获取 id：

```
int id = R.drawable.star; 
```

就是这样！

如果您希望该背景图像作为系统格式化它，您将无法这样做，因为重新缩放时不会保存图像，因为这是“在旅途中”完成的。

对于 Button 的任何复杂特性和功能，请尝试扩展 Button 并创建自己的，或者干脆使用不同的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T19:00:48.993

我也有这个问题。但我有想法。你可以自定义一个按钮。并在其中创建一个变量。然后您可以使用get()、set()方法来操作图像的id。

```
class MyButton extend button{
    int id = R.id.imageId;
    public int getID(){
      returen id;
    }
    public void setID(int id){
      this.id = id;    
    }
} 
```

但我认为这不是一个好方法。如果你有解决它的好方法。请告诉我。

# algorithm - 遗传算法的实际应用

> ID：11311847
> 
> 赞同：4
> 
> 时间：2012-07-03T13:20:26.617
> 
> 标签：algorithm, genetic-algorithm

我正在做一个关于**非主导排序**或多**向量排序**算法的项目工作，该算法用于**遗传算法的****选择**部分。我在网上搜索过，但我仍然不知道**遗传算法**的实际应用。我只知道它用于**测试**，但我不知道它是如何工作的。你能推荐一些**遗传算法**的实际应用吗？

 ******* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T13:27:49.023

遗传算法非常适合机器学习算法使用的[特征选择。](http://en.wikipedia.org/wiki/Feature_selection)

很多时候，数据集中的特征太多了，这使得它太嘈杂，所以我们有时通过减少问题的维度来处理这个问题，只选择特征的一个子集。为此 - 遗传算法似乎在许多情况下（经验上）都很好用，并且它在研究和具有非常高维度的现实世界应用中的用途都很广泛。

例如：文本分析，带有[词袋模型](http://en.wikipedia.org/wiki/Bag_of_words_model)：有时我们只想使用单词的一个子集，而不是全部，因此我们使用了特征选择算法，而 GA 就是其中之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T14:31:51.653

GA 是一种很好的方法，可以很好地解决搜索空间巨大且很难找到精确最优解决方案的问题。它们擅长爬山，可用于从解空间的不同区域生成候选集，然后可以通过擅长局部优化的算法进一步优化。在某些情况下，他们提出了人类很难预先想象的解决方案。

这是一个有趣的[GA 应用程序](http://en.wikipedia.org/wiki/List_of_genetic_algorithm_applications)列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T16:54:32.823

您可以使用 GA 进行社区检测 [http://www.springerlink.com/content/u570144q73322970/](http://www.springerlink.com/content/u570144q73322970/)

以现实生活中的网络为例，您可以使用自己的 facebook 朋友网络，其中节点是朋友，朋友之间的边表示友谊链接。当您运行社区检测算法时，您会注意到该算法生成的集群将您朋友中的不同组分开，例如高中组、大学组、工作组、家庭组等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T06:52:58.273

我不知道这有多实用，但我用它来[生成数独](http://anthony-tresontani.github.com/Python/2012/12/31/sudoku-generator-with-genetic/)******

# php - 如何让第一个会话等于 1？

> ID：11311848
> 
> 赞同：0
> 
> 时间：2012-07-03T13:20:28.313
> 
> 标签：php

下面我有一行代码，它说明了用户当前在总会话数中的哪个会话。

```
<h1>CREATING QUESTIONS AND ANSWERS: SESSION (AAA) <?php echo $sessionMinus ?> OF <?php echo $_SESSION['initial_count'] ?></h1> 
```

因此，例如，该行可以读取：

```
CREATING QUESTIONS AND ANSWERS: SESSION (AAA) 3 OF 3 
```

现在我遇到的问题是，假设我想要 3 个会话，它应该是这样的：

第一次用户打开页面：`CREATING QUESTIONS AND ANSWERS: SESSION (AAA) 1 OF 3`

但相反，它是这样读的：`CREATING QUESTIONS AND ANSWERS: SESSION (AAA) 3 OF 3`

如果假设我想要 7 个会话，则相同，对于第一个会话，它应该是：`CREATING QUESTIONS AND ANSWERS: SESSION (AAA) 1 OF 7`但它的读取方式是这样的：`CREATING QUESTIONS AND ANSWERS: SESSION (AAA) 7 OF 7.`

所以我的问题是，我怎样才能让第一个会话等于 1...

以下是当前代码：

```
if(isset($_POST['sessionNum'])){
            //Declare my counter for the first time

            $_SESSION['initial_count'] = $_POST['sessionNum'];
            $_SESSION['sessionNum'] = $_POST['sessionNum'];

    }

if (!isset($_SESSION['sessionCount'])) {
    $_SESSION['sessionCount'] = 1;
}
else if ($_SESSION['sessionCount'] < $_SESSION['sessionNum']) {
    ++$_SESSION['sessionCount'];
}

$sessionMinus =  $_SESSION['sessionCount']; 
```

更新：

以下是之前的尝试，但它一直说 2 OF 4 或 2 OF 5 或 2 OF 2 等，但没有奏效：

```
if(isset($_POST['sessionNum'])){
            //Declare my counter for the first time

            $_SESSION['initial_count'] = $_POST['sessionNum'];
            $_SESSION['sessionNum'] = $_POST['sessionNum'];
            $_SESSION['sessionCount'] = 0;

    }

else if ($_SESSION['sessionCount'] < $_SESSION['sessionNum']) {
    $_SESSION['sessionCount']++;
}

$sessionMinus =  $_SESSION['sessionCount']; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:02:52.860

替换这一行

```
++$_SESSION['sessionCount']; 
```

有了这个

```
$_SESSION['sessionCount']++; 
```

* * *

```
if(isset($_POST['sessionNum'])){
    //Declare my counter for the first time
    $_SESSION['sessionCount'] = 0;
    $_SESSION['sessionNum'] = $_POST['sessionNum'];
}

if ($_SESSION['sessionCount'] < $_SESSION['sessionNum']) {
    $_SESSION['sessionCount']++;
} 
```

# .net - 如果它们共享相同的连接字符串，为什么一个应用程序可以正常连接到 SQL 后端，而另一个应用程序会失败？

> ID：11311850
> 
> 赞同：0
> 
> 时间：2012-07-03T13:20:32.660
> 
> 标签：.net, sqlconnection, sqlclient

试图找出我们应用程序中的 SQL 连接错误 26。

我们有两个密切相关的应用程序 Foo 和 FooAddIn。Foo 是一个在 VS2010 中构建的 Winforms 应用程序，运行良好，可以很好地连接到我们的 SQLExpress 后端。

FooAddIn 是一个 Outlook 插件，它引用 Foo.exe 并连接到同一个 SQL Express 实例。或者更确切地说，它没有连接，而是报告：

> ```
> A network-related or instance-specific error occurred while establishing a connection
> to SQL Server. The server was not found or was not accessible. Verify that the 
> instance name is correct and that SQL Server is configured to allow remote 
> connections. (provider: SQL Network Interfaces, error: 26 - Error Locating 
> Server/Instance Specified) 
> ```

现在，两个应用程序共享相同的连接字符串，我们已经验证它们确实共享相同的连接字符串。

在这个阶段，我们只是在同一台开发人员机器上进行测试，所以应用程序在同一台机器上，通过同一个 VS2010 IDE 运行。

所以很多关于这个错误的在线建议并不适用，因为 Foo 连接到 SQL Express 的事实告诉我们数据库在那里并且可用并且可以访问。

还有什么要检查的？一件事是 Foo 和 FooAddIn 运行不同的运行时版本`System.Data`（v2.0.50727 和 v4.0.30319）。这可能是一个因素吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:12:25.577

## **已解决：毕竟这只是一个防火墙问题**

* * *

一位同事指出，我们的**FooAddIn Outlook Addin 将在与****Foo** Winforms 应用程序不同的安全上下文中运行。

我们检查了防火墙，果然列出了一大堆来自 Outlook.exe 的被阻止连接。

因此，即使它们在同一台机器上，并且它们的连接字符串相同并且它们都是 VS2010 应用程序，防火墙也将它们视为完全不同的东西。

# php - 添加换行符时出现 SQL 错误 1064

> ID：11311860
> 
> 赞同：-1
> 
> 时间：2012-07-03T13:21:02.560
> 
> 标签：php, mysql

我有一个要处理的查询，因此我将其格式化为更易于阅读的方式。但是，当我刷新页面时，我收到错误 1064。我唯一做的就是添加换行符。即使我只添加 1 个换行符，我也会收到此错误。

这是原始查询：

```
$listing_sql = "select " . $select_column_list . " p.products_id, p.products_model, p.manufacturers_id, p.products_price, p.products_tax_class_id, IF(s.status, s.specials_new_products_price, NULL) as specials_new_products_price, IF(s.status, s.specials_new_products_price, p.products_price) as final_price from " . TABLE_PRODUCTS_DESCRIPTION . " pd, " . TABLE_PRODUCTS . " p left join " . TABLE_MANUFACTURERS . " m on p.manufacturers_id = m.manufacturers_id left join " . TABLE_SPECIALS . " s on p.products_id = s.products_id, " . TABLE_PRODUCTS_TO_CATEGORIES . " p2c where p.products_status = '1' and p.products_id = p2c.products_id and pd.products_id = p2c.products_id and pd.language_id = '" . (int)$languages_id . "' and p2c.categories_id = '" . (int)$current_category_id . "'"; 
```

只需在 FROM 之前添加 1 或 2 个换行符，如下所示：

```
$listing_sql = "select " . $select_column_list . " p.products_id, p.products_model, p.manufacturers_id, p.products_price, p.products_tax_class_id, IF(s.status, s.specials_new_products_price, NULL) as specials_new_products_price, IF(s.status, s.specials_new_products_price, p.products_price) as final_price 

from " . TABLE_PRODUCTS_DESCRIPTION . " pd, " . TABLE_PRODUCTS . " p left join " . TABLE_MANUFACTURERS . " m on p.manufacturers_id = m.manufacturers_id left join " . TABLE_SPECIALS . " s on p.products_id = s.products_id, " . TABLE_PRODUCTS_TO_CATEGORIES . " p2c where p.products_status = '1' and p.products_id = p2c.products_id and pd.products_id = p2c.products_id and pd.language_id = '" . (int)$languages_id . "' and p2c.categories_id = '" . (int)$current_category_id . "'"; 
```

导致出现错误我正在使用带有 mysql 版本 5.5.16 和 php 版本 5.2.2 appache 2.0.63 的 wamp 服务器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:32:51.220

这是因为您实际上是`\n`在查询中添加了一个或一个很大的间隙。

如果您在 处停止引号`as final_price`，然后添加换行符，然后继续字符串`. 'from ' . TABLE...`，您应该会发现错误不会发生。

在查询后直接键入此代码，您应该会看到错误。

```
echo $listing_sql;
exit(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T13:36:03.100

您将换行符放在字符串的中间，mysql 服务器不喜欢这样。将查询分成多行的明智方法是：

```
$listing_sql = "select " . $select_column_list . 
" p.products_id, p.products_model, p.manufacturers_id, p.products_price, " .
"p.products_tax_class_id, IF(s.status, s.specials_new_products_price, NULL) as " .
"specials_new_products_price, IF(s.status, s.specials_new_products_price, " .
"p.products_price) as final_price from " . 
TABLE_PRODUCTS_DESCRIPTION . " pd, " . TABLE_PRODUCTS . " p left join " . 
TABLE_MANUFACTURERS . " m on p.manufacturers_id = m.manufacturers_id left join " . 
TABLE_SPECIALS . " s on p.products_id = s.products_id, " . 
TABLE_PRODUCTS_TO_CATEGORIES . " p2c where p.products_status = '1' and " .
"p.products_id = p2c.products_id and pd.products_id = p2c.products_id and " .
"pd.language_id = '" . (int)$languages_id . "' and p2c.categories_id = '" . 
(int)$current_category_id . "'"; 
```

# ios - UIViewControllers IOS之间的导航

> ID：11311863
> 
> 赞同：0
> 
> 时间：2012-07-03T13:21:17.170
> 
> 标签：ios, uiviewcontroller, uinavigationcontroller

我遇到了一个问题并寻求您的帮助。它是关于 UINavigationController 堆栈中的导航。

例如，我的 IOS 应用程序可以具有这种类型的层次结构

[1]-->[2]-->[3]

表示第一个控制器推动第二个，后者推动第三个。如何在第三个按钮中创建一个按钮，让我像这样直接回到第一个控制器

[3]-->[1]

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:25:56.940

使用`UINavigationController`' 方法`popToRootViewControllerAnimated:`，例如在您的 UIViewController 中：

```
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T13:26:10.870

[`UINavigationController`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)有以下方法：

```
- (NSArray *)popToRootViewControllerAnimated:(BOOL)animated 
```

您只需要创建一个调用该方法的按钮。

# java - Spring：如何将值从属性文件传递给构造函数

> ID：11311865
> 
> 赞同：7
> 
> 时间：2012-07-03T13:21:20.557
> 
> 标签：java, spring

我有一`MongoService`堂课

```
public class MongoService {

    private final Mongo mongo;
    private final String database;
    private static final Logger LOGGER = LoggerFactory.getLogger(MongoService.class);

    public MongoService(@Nonnull final String host, final int port, @Nonnull final String db) throws UnknownHostException {
        mongo = new Mongo(host, port);
        database = db;
    }

    public void putDocument(@Nonnull final DBObject document) {
        LOGGER.info("inserting document - " + document.toString());
        mongo.getDB(database).getCollection(getCollectionName(document)).insert(document, WriteConcern.SAFE);
    }

    public void putDocuments(@Nonnull final List<DBObject> documents) {
        for (final DBObject document : documents) {
            putDocument(document);
        }
    }

} 
```

我想将 的值从外部属性文件**/storage/local.properties**`host, port, db`注入**构造函数**

 **```
### === MongoDB interaction === ###
host=127.0.0.1
port=27017
database=contract 
```

我的 Spring wireup 文件如下所示
**wireup.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-2.0.xsd">

    <util:properties id="mongoProperties" location="file:///storage//local.properties" />

    <bean id="mongoService" class="com.business.persist.MongoService">
        // TODO
    </bean>
</beans> 
```

**问题**

如何传递`host, port, db`来自`local.properties`文件的值并将其传递给以下构造函数？

```
public MongoService(@Nonnull final String host, final int port, @Nonnull final String db) throws UnknownHostException {
        mongo = new Mongo(host, port);
        database = db;
    } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-03T13:37:52.913

您不想使用 util:properties 标记导入属性文件，而是希望使用 context:property-placeholder 导入它。util 版本只是将文件作为 Properties 对象导入，而不是将属性值暴露给您的配置。因此，您的设置将类似于：

```
<context:property-placeholder location="file:///storage//local.properties"/> 
```

然后，当您连接 MongoService 时，您可以在构造函数配置中使用属性名称，例如

```
<bean id="mongoService" class="com.business.persist.MongoService">
    <constructor-arg value="${host}"/>
    <constructor-arg value="${port}"/>
    <constructor-arg value="${database}"/>
</bean> 
```

有关更多详细信息，请参阅[spring 文档](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/beans.html#beans-factory-placeholderconfigurer)。在旁注中，我会考虑为每个属性提供一个更具描述性的名称，以避免与您的应用程序中可能定义的其他属性发生冲突。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-10-28T17:22:23.797

*迈克*和*肖恩*给出了完全充分的答案。**这里有一个补充**：一旦你`PropertyPlaceHolderConfigurer`的设置正确，考虑一下现在广泛使用`@Value`的将这些属性注入构造函数的注解：

```
public class MongoService {

  ..

  @Autowired
  public MongoService(@Value("${host}") final String host, @Value("${port}") final int port, @Value("${db}") @Nonnull final String db) throws UnknownHostException {
      mongo = new Mongo(host, port);
      database = db;
  }

..
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-03T13:37:30.720

定义一个属性占位符：

```
<context:property-placeholder location="classpath:path/to/your.properties"/> 
```

现在使用属性：

```
<bean id="mongoService" class="com.business.persist.MongoService">
    <constructor-arg value="${property.foo}" />
    <constructor-arg value="${property.bar}" />
</bean> 
```

请参阅：[4.8.2.1 示例：PropertyPlaceholderConfigurer](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/beans.html#beans-factory-placeholderconfigurer)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-07-25T09:31:23.937

要在构造函数中读取 Spring `application.properties`，可以使用以下示例：

```
// File: sample/Message.groovy

package sample
import org.springframework.beans.factory.annotation.*
import org.springframework.stereotype.*

@Component
class Message {

    final String text

    // Use @Autowired to get @Value to work.
    @Autowired
    Message(
        // Refer to configuration property
        // app.text to set value for
        // constructor argument text.
        @Value('${app.text}') final String text) {
        this.text = text
    }
} 
```

资料来源：[DZone](https://dzone.com/articles/spring-sweets-using-value#:%7E:text=In%20Spring%20we%20can%20use,on%20the%20constructor%20as%20well.)**

# c# - 在负载下插入内容时找不到 com.sun.org.apache.xerces.internal.jaxp.SAXParserFactoryImpl

> ID：11311868
> 
> 赞同：0
> 
> 时间：2012-07-03T13:21:30.063
> 
> 标签：c#, .net, marklogic, ikvm

我们正在使用 Marklogic XCC .Net 库将文档插入 Marklogic。但是在负载下（45 个并发用户），我们开始收到异常消息 Provider **com.sun.org.apache.xerces.internal.jaxp.SAXParserFactoryImpl not found** 有人知道吗？

代码是

```
using (var session = ContentSourceFactory.NewContentSource(new Uri(_connectionUriString)).NewSession())
        {

                var contentCreateOptions = new ContentCreateOptions
                                               {
                                                   Format = DocumentFormat.Format.XML,
                                                   Collections =
                                                       new[]
                                                           {
                                                            "Docs"
                                                           }
                                               };
                var options = contentCreateOptions;
                var fileName = string.Format("/doc/{0}.xml", doc.Id);
                session.InsertContent(ContentFactory.NewContent(fileName, doc.Serialize(), options));
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:29:05.823

我怀疑问题不是由您的代码本身引起的。服务器更有可能内存不足，导致它无法加载必要的类/对象来运行代码。减少允许的并行请求数，或增加内存。

！

# c# - 在 C# 中不允许其他人使用 DLL 文件

> ID：11311875
> 
> 赞同：-1
> 
> 时间：2012-07-03T13:21:44.680
> 
> 标签：c#, visual-studio-2008, dll, .net-3.5, class-library

我有一个由大约 10 个重要的 DLL 文件组成的解决方案，这些文件是在同一个解决方案中开发的，当我发布这个解决方案时，所有的 DLL 文件（内部的公共类和函数）都是开放的并且可供所有其他人使用。如何使 dll 文件中的类和函数只能通过相同的解决方案可见和可用？！

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:23:48.750

根据您的问题，我了解到您事先（即在编译时）知道哪些程序集将一起发送。

因此，有两种解决方案：

*   或者，您将类型标记为`internal`并将所有代码部署在一个程序集中。由于您似乎将所有组件一起运送，因此在运送前不将所有组件合并到一个组件中并不是不可避免的原因*（许可问题除外）*。
    如果你能做到这一点，你仍然可以将所有内容开发为单独的项目，并使用一些构建工具来创建一个包含所有代码的总括项目文件。

*   或者，您创建类型`internal`并将解决方案中的其他程序集声明为朋友。在解决方案中的另一个程序集应该可以看到其内部类型的程序集上
    声明。[`InternalsVisibleToAttribute`](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx)

*请注意，我在编译器“可见”的意义上解释了“可见”，因此引用您的程序集的人可以针对您的 API 进行编码。如果您想阻止您的代码以任何方式真正可见，则必须按照[CodeCaster](https://stackoverflow.com/users/266143/codecaster)的评论中的建议使用混淆，即使这也可能不是牢不可破的。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:26:48.423

您可以[对所有程序集进行强命名](http://msdn.microsoft.com/en-us/library/wd40t7ad.aspx)。然后，当调用公共方法或实例化类时，您可以通过获取调用程序集[`Assembly.GetCallingAssembly()`](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getcallingassembly%28v=vs.100%29.aspx)并检查强名称，如果不匹配则抛出异常（虽然不确定所有这些东西的性能）。这就是我目前所能想到的，除了将所有东西都放在一个组件中并使其内部化。

# python - 使用 SWIG 从包装的 cpp 文件创建 DLL

> ID：11311877
> 
> 赞同：7
> 
> 时间：2012-07-03T13:21:47.847
> 
> 标签：python, dll, swig

我正在学习如何在 Windows 上使用 SWIG。

以下是我的 C++ 代码：

```
 /* File : example.cxx */

 #include "example.h"
 #define M_PI 3.14159265358979323846

/* Move the shape to a new location */
void Shape::move(double dx, double dy) {
    x += dx;
    y += dy;
 }

int Shape::nshapes = 0;

double Circle::area(void) {
   return M_PI*radius*radius;
}

double Circle::perimeter(void) {
  return 2*M_PI*radius;
}

double Square::area(void) {
  return width*width;
}

 double Square::perimeter(void) {
   return 4*width;
 } 
```

这是我的头文件：

```
/* File : example.h */

   class Shape {
   public:
     Shape() {
     nshapes++;
   }
  virtual ~Shape() {
   nshapes--;
 };
  double  x, y;   
  void    move(double dx, double dy);
  virtual double area(void) = 0;
  virtual double perimeter(void) = 0;
  static  int nshapes;
  };

 class Circle : public Shape {
 private:
   double radius;
 public:
   Circle(double r) : radius(r) { };
   virtual double area(void);
   virtual double perimeter(void);
 };

 class Square : public Shape {
 private:
   double width;
 public:
   Square(double w) : width(w) { };
   virtual double area(void);
   virtual double perimeter(void);
 }; 
```

这是我的接口文件：

```
 /* File : example.i */
 %module example

 %{
 #include "example.h"
 %}

 %include "example.h" 
```

我已经设法使用 SWIG 在 Cygwin 中使用以下命令包装我的 c++ 代码：

```
 $swig -c++ -python -o example_wrap.cpp example.i 
```

我的问题是，如何使用生成的代码（example_wrap.cpp）从现在开始创建一个 DLL？有任何想法吗？

我尝试使用 Visual Studio C++ 2010 创建 DLL，但出现构建错误：

```
LINK : fatal error LNK1104: cannot open file 'python27_d.lib 
```

我对使用 SWIG 还很陌生，因此将不胜感激任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-17T05:01:53.240

在 Configuration Properties->C/C++->Preprocessor->Preprocessor Definitions 中添加 MS_NO_COREDLL 定义；或在包含 python.h 之前添加 #define MS_NO_COREDLL 行。

```
#define MS_NO_COREDLL
#include <Python.h> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T14:24:48.520

如果您查看 Python 安装的 libs 目录，我怀疑您会找到 python27.lib 而不是 python27_d.lib。我相信 _d.lib 是 Python 库的调试版本，而您的 Python 安装没有包含它。在其他地方，我看到它建议解决此问题的最简单方法是下载 Python 源代码并自己构建发布和调试版本，但我从未尝试过。或者，更改您的构建以使用 Python .lib 的发布版本。您应该能够调试自己的代码，但不能调试 Python 代码。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-05T18:21:42.457

问题似乎是，由于未知原因，文件 pyconfig.h 强制使用特定命名的 .lib 文件。哎哟！坦率地说，这对我来说看起来像是一个错误 - 让程序员指定要使用的 .lib 文件！不要强求！

在下面的代码中，您可以简单地 #ifdef 0 整个事情，或者将“python27_d”重命名为“python”。

无论如何，这是来自 pyconfig.h 的攻击性代码：

```
/* For an MSVC DLL, we can nominate the .lib files used by extensions
*/
#ifdef MS_COREDLL
#   ifndef Py_BUILD_CORE /* not building the core - must be an ext */
#       if defined(_MSC_VER)            /* So MSVC users need not specify the .lib file in          their Makefile (other compilers are generally           taken care of by distutils.) */
#           ifdef _DEBUG
#               pragma comment(lib,"python27_d.lib")
#           else
#               pragma comment(lib,"python27.lib")
#           endif /* _DEBUG */
#       endif /* _MSC_VER */
#   endif /* Py_BUILD_CORE */
#endif /* MS_COREDLL */ 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-09-17T13:19:18.747

SWIG（至少在 v3.0 上）在包装器中生成 python.h 包含，如下所示：

```
#if defined(_DEBUG) && defined(SWIG_PYTHON_INTERPRETER_NO_DEBUG)
/* Use debug wrappers with the Python release dll */
# undef _DEBUG
# include <Python.h>
# define _DEBUG
#else
# include <Python.h>
#endif 
```

因此，在 Windows 平台上编译包装器的调试版本时，我们只需定义`SWIG_PYTHON_INTERPRETER_NO_DEBUG`标志即可避免`pyconfig.h`Ken 的回答中提到的文件问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-07-31T15:57:42.673

在 Release 模式下构建项目也会删除 python27_d.lib 依赖项；至少它为我自己的项目做了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-16T17:45:49.483

我发现添加 Python 符号可以解决这个问题。这样[做](http://pytools.codeplex.com/wikipage?title=Symbols%20for%20Python%20mixed-mode%20debugging)

我还将 python27.lib 复制到一个名为 python27_d.lib 的文件中

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-05T11:31:52.127

您可以尝试将“python27_d.lib”（不带引号）添加到被忽略的库中：

配置属性 -> 链接器 -> 输入 -> 忽略特定库

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-05-03T16:22:43.633

我通过执行以下操作解决了丢失的 python27_d.lib：

*   将 python27.lib 复制到 python27_d.lib
*   在 pyconfig.h 中注释掉`define Py_DEBUG`

# c++ - 如何引用连续的组件（button1、button2 等）？

> ID：11311880
> 
> 赞同：3
> 
> 时间：2012-07-03T13:21:53.700
> 
> 标签：c++, variables, c++builder, member

我需要在按钮后获取数字以在 for 循环中递增。例如，button1 变成了 button2，等等。我尝试附加一个递增的变量，但 C++ Builder 给出了一个错误，提示“Button 不是 TMain 的成员”。有没有办法实现最终目标或解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:38:51.483

您不能在运行时从其他人​​那里构造新的标识符。编译器是正确的，它`Button`确实不是您的`TMain`类的成员。

相反，构建所需组件的*字符串名称*，然后调用表单的[`FindComponent`](http://docwiki.embarcadero.com/Libraries/en/System.Classes.TComponent.FindComponent)方法以获取具有该名称的组件。

```
for (int i = 1; i <= 2; ++i) {
  std::string name = "Button" + IntToStr(i);
  TButton* button = dynamic_cast<TButton*>(this->FindComponent(name));
} 
```

这需要相应`Name`地设置按钮的属性。

另一种解决方案是放弃组件名称并将对象放入适当的容器中，例如`vector`. 例如，您可以覆盖该`Loaded`方法（您可以确保所有表单的组件都已创建）并在那里填充一个向量：

```
void TMain::Loaded() {
  TForm::Loaded();
  this->m_buttons.push_back(Button1);
  this->m_buttons.push_back(Button2);
} 
```

现在，当您想遍历按钮时，只需遍历向量即可：

```
for (std::vector<TButton*>::const_iterator it = m_buttons.begin();
     it != m_buttons.end();
     ++it) {
  // ...
} 
```

# c# - 如何在没有 IF 的情况下从字符串结果更改方法

> ID：11311883
> 
> 赞同：1
> 
> 时间：2012-07-03T13:22:18.043
> 
> 标签：c#, ranorex

我在 Ranorex 软件中使用 C# 进行测试自动化。我从 XML 文件中获取要单击的按钮的名称和方法：

`string deviceName = device.SelectSingleNode("./ButtonInTTS").InnerText.Replace(" ", "");`

我得到一个字符串，其名称告诉我在我的应用程序中单击哪个按钮，然后有这个方法：repo.TiTouchScreenApp.ToolbarListBox。**按钮**.DoubleClick();

事实上，在 Ranorex 中，您拥有所有按钮的库，我需要将 Button 的名称更改为 deviceName 的结果。例如，如果 deviceName == "Automation"，它将执行 repo.TiTouchScreenApp.ToolbarListBox。**自动化**.DoubleClick();

deviceName == "温度"

repo.TiTouchScreenApp.ToolbarListBox。**温度**.DoubleClick();

但我想在没有 IF 的情况下做到这一点。因为我有很多按钮而且我不想要：

```
if(deviceName == "Automation"){     
    repo.TiTouchScreenApp.ToolbarListBox.Automation.DoubleClick();
} else if(deviceName == "Temperature") {
    repo.TiTouchScreenApp.ToolbarListBox.Temperature.DoubleClick();
} etc etc... 
```

你看到解决方案了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:37:54.297

如果 repo.TiTouchScreenApp.ToolbarListBox 返回控件列表，例如按钮，则执行以下操作：

```
var button = repo.TiTouchScreenApp.ToolbarListBox.Buttons.Where(b => b.Name == deviceName).FirstOrDefault();

if(button != null)
{
  button.DoubleClick();
} 
```

# ruby-on-rails - MAC OSX、变量路径、RVM和GIT的顺序

> ID：11311886
> 
> 赞同：0
> 
> 时间：2012-07-03T13:22:33.090
> 
> 标签：ruby-on-rails, macos, git, command-line, path

我之前问一个问题是：[Install another version of Git on mac osx lion](https://stackoverflow.com/questions/11311165/install-another-version-of-git-on-mac-osx-lion)

我有一些大致的想法，即在路径的 .profile 文件中将新版本的 git 放在旧版本之前。

但是，问题是我之前在mac上安装了ruby on rails，并且rvm已经设置了路径，这意味着我无法在.profile文件中编辑它。

当我运行 echo $PATH 时，“/usr/bin/bin”（带有 xcode 的 git）总是在“/usr/local/bin”（git 的最新版本）之前，这不是我想要的。但是在 .profile 文件中，路径中只有 /usr/local/bin 。

我不知道如何更改路径的顺序。

有人知道吗？谢谢

# c# - 在没有安装程序或 ClickOnce 的情况下部署 C#/.NET 应用程序

> ID：11311889
> 
> 赞同：6
> 
> 时间：2012-07-03T13:22:40.583
> 
> 标签：c#, .net, visual-studio-2010, deployment, installation

我正在寻找解决方案：

1.  我没有在客户端计算机上安装应用程序的授权。这就是为什么我需要在没有安装程序的情况下部署应用程序。就像便携式应用程序或独立应用程序一样 - 类似的东西。

2.  客户端计算机的 Internet 连接也有限制，因此 ClickOnce 也无法工作。

3.  我正在使用 Visual Studio Express 2010。我看到[WiX](http://en.wikipedia.org/wiki/WiX)可以解决我在设置应用程序时的限制。但是，我仍然无法安装该应用程序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T13:33:26.783

在您的解决方案中，将所有项目的[CopyLocal 设置为 true](http://msdn.microsoft.com/en-us/library/t1zz5y8c%28v=vs.100%29.aspx)。这将确保该`..\Bin`文件夹包含您的程序所需的所有程序集。然后只需压缩`..\Bin`文件夹，将其放到客户端计算机上，然后解压缩。

# c# - MD5 哈希值在大文件上会不一致吗？

> ID：11311890
> 
> 赞同：3
> 
> 时间：2012-07-03T13:22:42.160
> 
> 标签：c#, md5

我知道 MD5 哈希不再可用于安全性，但我一直将它们用作校验和，以确保下载/传输后文件没有损坏，我认为这仍然可以。尽管在对大于千兆字节的文件使用此方法后，我发现存储和生成的哈希值不匹配。这是在我通过 USB 记忆棒将其从一台计算机传输到另一台计算机之后。我在网上搜索过，发现一些对大文件的引用可能会产生不一致的哈希值，但我没有看到任何结论。

我使用`ComputeHash(Stream inputStream)`来`MD5CryptoServiceProvider`在传输之前和之后创建哈希，因此不应该是字节格式在不同语言或其他东西之间混乱的情况。我还尝试再次从文件中构建哈希，第二次它似乎可以很好地创建匹配的哈希。我是不是很不走运，实际上在将文件复制到 U 盘上和从 U 盘上复制下来之后最终损坏了文件？或者这是 MD5 的一个已知问题，我应该完全放弃它？如果是这样，理想情况下也可以作为 C# 标准提供的最佳替代品是什么，SHA1 是下一个最佳选择吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T13:24:52.410

不，为此目的，MD5 没有任何问题。**哈希值总是相同的**。文件中必须有一些差异。您可以使用二进制差异工具，例如在某些十六进制编辑器中找到的工具，以自己验证是否有所不同。

[`md5sum`](http://linux.die.net/man/1/md5sum)您可以使用另一个 MD5 工具（例如HashTab [）](http://www.implbits.com/HashTab.aspx)来验证您的计算是否正确。

* * *

不再推荐 MD5 的原因不是它不起作用，或者类似的东西。这是因为冲突的概率（为两个不同的输入生成相同的哈希）足够高，以至于攻击者可以*故意*生成冲突以绕过安全功能。

这正是[Flame 恶意软件](http://trailofbits.files.wordpress.com/2012/06/flame-md5.pdf)用来欺骗 Microsoft 签名的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T13:26:40.160

某些数据的 MD5 散列将与*完全相同*数据的第二个 MD5 散列*完全相同*，无论该数据的大小如何。对大文件使用 MD5 的唯一问题是，在某些情况下，您可能会为两个不同的文件获得相同的哈希值。不过，这不太可能。

不过，同样的事情也适用于 SHA1 和任何其他散列算法，因为您将大数据空间转换为小散列空间。

在传输过程中，无论是在 USB 总线上还是在闪存设备本身上，这听起来更有可能发生损坏。

# http - cookie 的名称是否区分大小写？

> ID：11311893
> 
> 赞同：45
> 
> 时间：2012-07-03T13:22:56.170
> 
> 标签：http, cookies, cross-browser, standards

HTTP Cookie 由一个名称-值对组成，并且可以由服务器使用以下响应设置：

```
HTTP/1.0 200 OK
Content-type: text/html
Set-Cookie: name=value
Set-Cookie: name2=value2; Expires=Wed, 09 Jun 2021 10:18:14 GMT 
```

来自客户端的未来请求将如下所示：

```
GET /spec.html HTTP/1.1
Host: www.example.org
Cookie: name=value; name2=value2 
```

cookie 的名称是否区分大小写？

例如，如果我的服务器这样发送响应：

```
HTTP/1.0 200 OK
Content-type: text/html
Set-Cookie: Aaaa=Bbbb
Set-Cookie: aAaa=bBbb
Set-Cookie: aaAa=bbBb
Set-Cookie: aaaA=bbbB 
```

期望客户端（Chrome、FireFox、Safari、IExplorer、Opera 等）发送带有标头的未来请求是否合理`Cookie: Aaaa=Bbbb; aAaa=bBbb; aaAa=bbBb; aaaA=bbbB;`？

[注意：问题既不是 JSP 特定的、PHP 特定的，也不是 ASP 特定的。]

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-07-03T13:42:49.930

Cookie 名称*区分大小写*。RFC 没有明确说明，但是每个*不区分大小写*的比较都明确说明，并且没有关于 cookie 名称的明确说明。Chrome 和 Firefox 都将 cookie 视为*区分大小写*，并将所有大小写变体保留为不同的 cookie。

测试用例（PHP）：

```
print_r($_COOKIE);

setcookie('foo', '123');
setcookie('Foo', '456'); 
```

加载脚本两次，在第二次运行时观察`$_COOKIE`转储。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-25T14:16:49.750

底部是一个在浏览器和 .Net 框架上演示 Cookie 区分大小写的脚本。每次运行时，都会插入一个名为 xxxxxxxxxx 的 cookie，大小写随机。按 F5 刷新几次以插入一些 cookie。

我已经在 Chrome 和 Firefox 上对其进行了测试，并且都表现出类似的行为，如下所示：

```
Request.Cookies["xxxxxxxxxx"].Name returns: xxxxXxXXXX
All XXXXXXXXXX Cookies:

    xxxxXxXXXX
    xXxxXxXXXx
    XxxxxXxXXx
    XXXxXxXXxX 
```

表明：

*   Cookie 在 Chrome 和 Firefox 上区分大小写
*   .Net Framework 可以处理区分大小写的 cookie（这就是它可以遍历所有这些 cookie 的原因）
*   Request.Cookies["xxxxxxxxxx"] 不区分大小写（这就是为什么它返回第一个不区分大小写匹配名称的 cookie）

正如其他答案中提到的，新的 RFC 表明 cookie 区分大小写，Chrome 和 Firefox 似乎都以这种方式处理它。.Net Framework 可以处理区分大小写的 cookie，但它确实希望不区分大小写地处理 cookie，并且它的许多函数确实以这种方式处理 cookie（Cookies[]、Cookies.Set() 等）。这种不一致会导致许多难以跟踪的错误。

测试Cookie.aspx：

```
<%@ Page language="c#" AutoEventWireup="false" validateRequest=false %>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title id="title">Test Cookie Sensitivity</title>
</head>
<body>
<p>Request.Cookies["xxxxxxxxxx"].Name returns:
<%
    HttpCookie cookie2 = Request.Cookies["xxxxxxxxxx"];
    if (cookie2 == null) Response.Write("No cookie found");
    else Response.Write(cookie2.Name);
%>
</p>
<h3>All XXXXXXXXXX Cookies:</h3>
<ul>
<%
    foreach (string key in Request.Cookies.Keys)
        if (key.ToLower() == "xxxxxxxxxx") Response.Write("<li>" + key + "</li>");
    Random rand = new Random();
    StringBuilder name = new StringBuilder();
    for (int i = 0; i < 10; i++) {
        if (rand.Next(2) == 0) name.Append('x');
        else name.Append('X');
    }
    HttpCookie cookie = new HttpCookie(name.ToString());
    cookie.HttpOnly = true;
    cookie.Expires = DateTime.Now.AddMonths(1);
    Response.Cookies.Add(cookie);
%>
</ul>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-11T20:37:27.260

似乎 cookie 实际上是区分大小写的。对此有些困惑。有趣的是，MSDN 另有说明：

> Cookie 名称不区分大小写

来源： http: [//msdn.microsoft.com/en-us/library/ms970178.aspx](http://msdn.microsoft.com/en-us/library/ms970178.aspx)文章底部`©2002`说它可能已经过时了。

此外，asp.net 论坛中也有人问过这个问题：[http](http://forums.asp.net/t/1170326.aspx?Are+cookie+names+case+sensitive+) ://forums.asp.net/t/1170326.aspx?Are+cookie+names +case+sensitive+ 似乎答案是区分大小写的.

这是怎么回事？MSDN 说不，其他技术说是。可以肯定的是，我使用 ASP Classic 对此进行了测试。

## 代码

```
hashUCASE = Request.Cookies("data")("Hash")
hashLCASE = Request.Cookies("data")("hash")

Response.Write "<p> hashUCASE = " & hashUCASE
Response.Write "<br> hashLCASE = " & hashLCASE

cookieNameUCASE = Request.Cookies("Data")
cookieNameLCASE = Request.Cookies("data")

Response.Write "<p> cookieNameUCASE = " & cookieNameUCASE
Response.Write "<br> cookieNameLCASE = " & cookieNameLCASE

Response.End 
```

## 结果

```
hashUCASE: EE3305C0DAADAAAA221BD5ACF6996AAA
hashLCASE: EE3305C0DAADAAAA221BD5ACF6996AAA

cookieNameUCASE: name=1&Hash=EE3305C0DAADAAAA221BD5ACF6996AAA
cookieNameLCASE: name=1&Hash=EE3305C0DAADAAAA221BD5ACF6996AAA 
```

正如您在结果中看到的那样，值“Hash”是用大写字母创建的，即使您使用小写字母发出请求，它也会返回相同的值，这使得它不区分大小写。在这种 MS 技术下，它不是。

## 结论

因此，在 ASP 经典中使用 Request.Cookies()，它**不**区分大小写，就像微软所说的那样。但是等等，它不是又区分大小写了吗？这可能意味着是否敏感取决于向浏览器发出请求的服务器端技术，这可能会规范化 cookie 名称以发出请求，从而使其不区分大小写。但这是我们必须测试以验证的其他内容。

我的建议是使用您使用的任何技术进行测试，并在您的代码库中建立标准，与您的团队达成协议。即，如果您要使用 cookie，请决定在您要在代码中使用它的任何时候，它是否总是以小写或大写形式编写。这样就不会有任何区分大小写的问题，因为在您的代码中，它将始终以相同的大小写声明。

## tl;博士

**只要您保持 cookie 名称的约定，您就不会有区分大小写的问题。**

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-04T19:42:49.843

根据[RFC 2109 - HTTP State Management Mechanism](http://www.ietf.org/rfc/rfc2109.txt) cookie 名称又名属性名称**不区分大小写**：

> 4.1 语法：通用
> 
> 两个状态管理标头 Set-Cookie 和 Cookie 具有涉及属性值对的共同句法属性。以下语法使用 HTTP/1.1 规范 [RFC 2068] 中的符号、标记 DIGIT（十进制数字）和标记（非正式地，非特殊、非空白字符的序列）来描述它们的语法。

```
av-pairs        =       av-pair *(";" av-pair)
av-pair         =       attr ["=" value]        ; optional value
attr            =       token
value           =       word
word            =       token | quoted-string 
```

> **属性（名称）（attr）不区分大小写。** 令牌之间允许有空格。请注意，虽然上面的语法描述显示 value 是可选的，但大多数 attrs 都需要它们。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-03T13:26:53.820

根据[MSDN](http://msdn.microsoft.com/en-us/library/ms970178.aspx)，cookie 名称不区分大小写。但是，我不确定这是否只是 ASPX/IIS 特定的实现。我相信这也取决于网络服务器和语言。

如果您发送一个名为“UserID”的 cookie，浏览器将确保将其作为“UserID”发送回，而不是“userid”。

# java - 在素数数组中查找特定数字

> ID：11311895
> 
> 赞同：2
> 
> 时间：2012-07-03T13:23:00.560
> 
> 标签：java, arrays, primes

我正在尝试在 Java 中查找具有特定条件的素数。

挑战是显示所有包含“3”的素数（100.000 以下）四次。我已经有一个代码，它显示了 100.000 以下的所有质数，但我似乎无法弄清楚如何计算包含数字“3”的那些四次。然而，我可以数出所有的素数。

有人可以帮我弄这个吗？

这是我的代码，我将在哪里将数字放入字符串中？

```
 package Proeftentamen;

import java.util.regex.*;

/**
 *
 * @author Stefan
 */
public class Vraag_6 {

    /// priemgetallen waar 4x een 3 in voor komt???? wtf...
    public static void main(String[] args) {
        boolean[] lijst = new boolean[1000000]; // hoeveelheid getallen
        vularray(lijst);
        lijst = zeef(lijst);
        drukaf(lijst);
    }

    public static void vularray(boolean[] lijst) {
        for (int i = 2; i < lijst.length; i++) {
            lijst[i] = true;
        }
    }

    public static boolean[] zeef(boolean[] lijst) {
        for (int i = 2; i < lijst.length / 2; i++) {
            if (lijst[i]) {
                for (int j = 2 * i; j < lijst.length; j += i) {
                    lijst[j] = false;
                }
            }
        }
        return lijst;
    }

    public static void drukaf(boolean[] lijst) {
        int count = 0;
        for (int i = 2; i < lijst.length; i++) {
            if (lijst[i] == true) {
                System.out.println(i + " " + lijst[i]);
                count++;
            }
        }
        System.out.println("Aantal priemgetallen: " + count);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T13:32:22.690

这个问题听起来真的像一个家庭作业，所以你应该写下你想出的东西和到目前为止你尝试过的东西。

数数的方法有很多。只是给你一个线索，你可以使用提醒操作（在Java - `%`）：

```
56 % 10 = 6
25 % 5  = 0 
```

So, when you divide by 10 and use a reminder operation you can get the last digit of your number. Now use a loop and counter and you'll be fine.

Another option (very ugly, so don't really use it :) ) - to turn your number into a `String` and iterate (loop) over its characters.

Hope this helps and good luck!

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T14:20:21.650

This code generate 50 permutation of numbers that has four '3' in it's digits so check each number that is prime or not

```
public void generateNumbers() {
    StringBuilder s = new StringBuilder();
    s.append("3333");
    for (int i = 0; i < 5; i++) {
        for (int j = 0; j <= 9; j++) {
            if (j%3==0) continue;
            s.insert(i,String.valueOf(j));
            int number=Integer.parseInt(s.toString());
            System.out.println(number);
            s.delete(i,i+1);
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T13:35:01.517

1.  Iterate across each prime number.
2.  For each prime number, convert it to a string using the Integer.toString(int) static method.
3.  With this string, iterate over every character (use a for loop and the non-static method String.charAt(int index)) and count the number of times that method returns '3'. (The character '3', not the String "3").

Unless you have some other purpose for an array of prime-number Strings, don't bother to store them anywhere outside the loop.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T14:10:22.067

Please refer below code to validate all such `prime numbers`.

```
void getPrimes(int num ,int frequency,char digit) {

    int count = 0;
    String number=Integer.toString(num);

    for (int i = 0; i < number.length(); i++) {
        if (count < frequency) {
            if (number.charAt(i) == digit)
                count++;
        }
        if (count == frequency)
        {
            System.out.println(number);
            return ;
        }

    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T16:19:11.580

Using the `primes` function from an exercise on the [Sieve of Eratosthenes](http://programmingpraxis.com/2009/02/19/sieve-of-eratosthenes), as well as the [`digits`](http://programmingpraxis.com/standard-prelude/#digits) and [`filter`](http://programmingpraxis.com/standard-prelude/#filter) functions from the [Standard Prelude](http://programmingpraxis.com/standard-prelude), this Scheme expression finds the seven solutions:

```
(filter
  (lambda (n)
    (= (length
         (filter
           (lambda (d) (= d 3))
           (digits n)))
       4))
  (primes 100000)) 
```

The outer filter runs over all the primes less than 100000 and applies the test of the outer lambda to each. The inner filter computes the digits of each prime number and keeps only the 3s, then the length function counts them and the equality predicate keeps only those that have 4 3s. You can run the program and see the solution at [http://codepad.org/e98fow2u](http://codepad.org/e98fow2u).

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-04T06:21:43.577

you only have at most five digits, four of which must be 3\. So *what can you say about the remaining digit*?

It's not hard to just write out the resulting numbers by hand, and then test each one for primality. Since there are no more than 50 numbers to test, even the simplest trial division by odds will do.

But if you want to generate the numbers programmatically, just do it with 5 loops: add `10,000` to `03333` 9 times; add `1,000` to `30333` 9 times; add `100` to `33033` 9 times; etc. In C++:

```
int results[50];
int n_res = 0;
int a[5] = {13333, 31333, 33133, 33313, 33331};
for( int i=0, d=10000; i<5; ++i, d/=10)
  for( int j=1; j<9; ++j, a[i]+=d )
    if( is_prime(a[i]) )
      results[n_res++] = a[i]; 
```

# drupal - 不在自定义内容类型上的文件附件 (Drupal 6)

> ID：11311896
> 
> 赞同：0
> 
> 时间：2012-07-03T13:23:03.787
> 
> 标签：drupal

试图弄清楚为什么文件附件没有显示在自定义内容类型上。我将如何确保将其放在那里？我可以找到如何添加自定义字段，但任何默认字段似乎都没有办法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:28:10.993

在编辑内容类型下找到一个标题为“附件启用/禁用”的部分。

# php - 在 PHP 中，是否可以在非静态类中拥有一个函数，但也不是实例函数？

> ID：11311901
> 
> 赞同：0
> 
> 时间：2012-07-03T13:23:15.597
> 
> 标签：php, oop, class, instantiation, class-method

在 PHP 中，是否可以在非静态类中拥有一个函数，但也不是实例函数？

例如，如果我有以下内容：

```
class A
{
   public $i;

   function setValue($val) {
      $this->i = $val;
   }
}  

$a1 = new A;
$a1->setValue(5);
echo $a1->i; // result: 5

$a2 = new A;
$a2->setValue(2);
echo $a2->i; // result: 2 
```

我可以向该类添加一个函数，该函数可以对自身的所有实例具有“可见性”，以便我可以执行类似的操作（我知道这不起作用，但可以传达我的想法）：

```
class A
{
   public $i;

   function setValue($val) {
      $this->i = $val;
   }

   function getTotal() {
      return sum($this->i); // I know sum() isn't a built-in function, but it helps explain what I want. I'm not sure if $this makes sense here too.
   }
}  

$a1 = new A;
$a1->setValue(5);
echo $a1->i; // result: 5

$a2 = new A;
$a2->setValue(2);
echo $a2->i; // result: 2

echo A::getTotal(); // returns: 7 
```

我猜`A::getTotal()`手段`getTotal()`需要是静态的，但如果它是静态的，那么它将无法“看到”每个类实例。

这种事情可能吗，我应该使用什么正确的术语？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T13:25:48.720

不，没有内置的实例枚举，您需要自己保留对每个实例化对象的引用。您可以在类的静态属性中保留一个实例数组，并将其填充到您的`__construct()`. 然后，您可以对该数组进行静态方法循环并处理所有实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T13:48:52.140

I think you would like something like this:

```
 class A
{
   public $i;

   function setValue($val) {
      $this->i = $val;
   }
}  

$a1 = new A;
$a1->setValue(5);
echo $a1->i; // result: 5

$a2 = new A;
$a2->setValue(2);
echo $a2->i; // result: 2

$total = 0;
foreach( get_defined_vars() as $name => $obj ) {
  if ( $obj instanceof A ) {
    $total += $obj->i;
  }
}
echo $total; // returns: 7 
```

The function you need here is "get_defined_vars". But it only gets the variables within the current scope!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T13:31:47.250

只需将 sum 的类*成员*设为静态即可。如果您这样做，那么您将需要确保它在每个类中得到正确维护（即`setValue`需要适当地更新该总和）。

不过，这可能不是做事的好方法。我认为它会变得相当混乱。在什么情况下您需要您无法访问所有实例的总和？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T14:53:17.417

您是否正在寻找`protected function foo($s){...}`类可以使用但不能从外部访问的类？（仅限 PHP5）

# javascript - Youtube api - 检索频道中的所有标签

> ID：11311910
> 
> 赞同：0
> 
> 时间：2012-07-03T13:23:51.707
> 
> 标签：javascript, json, youtube-api

有没有办法检索 Youtube 频道中使用的所有标签的 json？

我正在尝试在网站上显示一个频道的所有视频，我想做一个下拉菜单或类似的东西来按标签过滤视频。

如果不能直接，我如何解析通道 json 以获得所有标签的列表？

谢谢

**编辑**

好的，没有办法直接检索它:(

我知道我可以使用网址[http://gdata.youtube.com/feeds/api/users/google/uploads?&v=2&alt=jsonc](http://gdata.youtube.com/feeds/api/users/google/uploads?&v=2&alt=jsonc)（这是 Google 频道的示例）和每个项目获取频道的 json有它的标签。

获取另一个json（或数组）中所有标签列表的最佳方法是删除重复项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:33:24.250

恐怕没有直接的方法可以获取这些信息。您首先需要将[所有视频上传到一个频道](https://developers.google.com/youtube/2.0/developers_guide_protocol_video_feeds#User_Uploaded_Videos)，然后遍历[每个视频以获取标签](https://developers.google.com/youtube/2.0/developers_guide_protocol_video_entries)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:34:05.883

你在这里看过 API[吗？](https://developers.google.com/youtube/2.0/developers_guide_protocol_channel_search) 要获取 json 数据，您可以将 &alt=json-in-script 添加到请求的末尾。例如。

```
https://gdata.youtube.com/feeds/api/channels?q=soccer&v=2&alt=json-in-script 
```

# c++ - 带有 cpp 的 ndk 中的 Std - 向量问题

> ID：11311911
> 
> 赞同：2
> 
> 时间：2012-07-03T13:23:53.757
> 
> 标签：c++, stl, vector, android-ndk

我正在尝试为 ndk 编译一个大型 c++ 代码。

我得到一堆错误。其中很多与向量有关：

*   `vector<int> myvector`--> ' `<`' 给出错误
*   `::iterator`不能声明

关于如何获得完整的 STL 支持的任何想法？我使用了很多库，比如向量、算法、iostream 等

这是我的 Android.mk 文件

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := native
LOCAL_SRC_FILES := vns.cpp note.cpp cscore.cpp hscorecf.cpp hscorecp.cpp scoreinfo.cpp cscore.cpp score.cpp randMusic.cpp input.cpp main.cpp

APP_STL := stlport_shared
#but I have tried system, stlport_static, stlport_shared, or gnustl_static.
LOCAL_LDLIBS := -llog

include $(BUILD_SHARED_LIBRARY) 
```

知道了。

我需要将 APP_STL := stlport_shared 放在单独的 Application.mk 文件中！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T07:52:01.020

知道了。我需要将 APP_STL := stlport_shared 放在单独的 Application.mk 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:33:13.320

好像你忘了`#include <vector>`标题或`using namespace std;`

# android - 应用程序在 TCP 连接后立即停止

> ID：11311916
> 
> 赞同：0
> 
> 时间：2012-07-03T13:24:03.160
> 
> 标签：android, tcp, android-ndk

我是一名 Android 初学者，我尝试通过 TCP/IP 无线局域网将我的 ARCHOS 101 G9 连接到另一台设备。在我的项目活动中，我有一个名为 connectTCP 的库的功能。所以我正在做的是：`connectTCP("175.145.1.105", 10003);`。10003 是主机的端口号。从 ARCHOS 到具有该 IP 地址的主机有一个连接，因为我可以从 ARCHOS ping 主机。但是在我项目的主要活动中，当调用该函数并且可能建立连接时，整个应用程序立即停止。这意味着即使应用程序窗口也关闭了。此外，LogCat 显示“Zygote 进程 5377 被信号 (11) 终止”。但是没有抛出异常。我在 AndroidManifest.xml 中修改的唯一内容是包含`<uses-permission android:name="android.permission.INTERNET" />`. 那么可能是什么问题呢？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:29:57.603

这可能是因为您没有在单独的`Thread`. 在此处阅读有关此内容的更多信息：

## [为什么冰淇淋三明治会使您的应用程序崩溃](http://www.androiddesignpatterns.com/2012/06/app-force-close-honeycomb-ics.html)

# sql - 在sql中比较时间（或日期）的最佳方法？

> ID：11311919
> 
> 赞同：2
> 
> 时间：2012-07-03T13:24:16.223
> 
> 标签：sql, sql-server, sqldatatypes

我需要在我的 Sql 服务器中进行两次比较，一次在日期之间进行，一次在时间之间进行。我正在使用 C# 和 Sql Server 以及 Linq-to-sql。我想存储两个时间字段（进入时间，退出时间）。现在我想得到差异（例如 12:30 ， 18:15 差异是 5:45）。我应该使用什么数据类型？我对日期有同样的问题，我想得到两个日期的差异，但是“日期时间”数据类型存储了关于时间的冗余数据，我只需要日期。我想要最简单的方法和最少的代码。我目前正在保存这样的“1045”，当我获取它时，我在中间添加了一个“：”，它变成了“10:45”，这样会有很多问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T13:27:08.213

如果需要存储日期，可以使用`date`数据类型。同样对于时间，您可以使用`time`数据类型。

要计算差异，您可以使用`DATEDIFF()`返回两个日期之间差异的 sql 函数：http: [//msdn.microsoft.com/en-us/library/ms189794.aspx](http://msdn.microsoft.com/en-us/library/ms189794.aspx)

我建议不要将您的数据存储为`string`等`int`。按预期使用数据类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T13:27:54.010

对于存储数据，您可以使用日期类型或时间类型。完成此操作后，可以（在您的应用程序中）使用[TimeSpan结构来测量时间/日期的差异。](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)如果您从另一个日期中减去一个日期，那么您将收到一个 TimeSpan 对象。

```
var difference = Date1.Subtract(Date2); 
```

# wpf - 仅在所选项目附近带有按钮的 WPF 树视图

> ID：11311920
> 
> 赞同：3
> 
> 时间：2012-07-03T13:24:21.270
> 
> 标签：wpf, templates, treeview, wpf-controls

我搜索了几个小时来解决我的问题，但没有接近解决方案。

我想要类似数据网格的详细视图，但在 TreeView 中。因此，如果我选择 TreeView 的一个项目，我想在当前所选项目附近显示三个按钮。

*   0级

    *   1级

        *   所选项目 [button1] [button2] [button3]

            *   4级

            *   4级

我尝试了多种方法：

*   特殊的分层数据模板
*   视觉状态
*   ... 4个小时

但没有什么能解决它。XAML 中有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:49:42.117

感谢这个链接

> 杰贝格

在关注您的链接时，我找到了两种符合我要求的解决方案：

[列表框解决方案](https://stackoverflow.com/questions/146269/change-wpf-datatemplate-for-listbox-item-if-selected/146423#146423)

[树视图解决方案](https://stackoverflow.com/questions/9123608/change-treeviewitem-template-when-isselected-and-two-types-using-in-treeview)

# javafx-2 - 当其父阶段为fullScreenMode时，如何将阶段制作为Aplication_Modal阶段？

> ID：11311923
> 
> 赞同：0
> 
> 时间：2012-07-03T13:24:27.970
> 
> 标签：javafx-2

我正在尝试使用舞台。当其父阶段处于全屏模式时，作为模态对话框的阶段无法正常工作。用我糟糕的英语解释这个问题真的很奇怪，当你尝试这样做时，你会明白我的意思。对话阶段打开时，主阶段隐藏。我真的很困惑。我希望有人能帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:07:58.003

主阶段没有隐藏，它以窗口级联列表顺序被推回最末端。您可以在最小化/关闭其他非 JavaFX 应用程序窗口后看到主要阶段。在窗口顺序列表中仅推动主阶段一步的解决方法可能是设置模态阶段的所有者，如下所示：

```
myDialog.initOwner(primaryStage); 
```

试试看。

# jax-ws - 无法在 WAS 6.1 中部署 JAX-WS Web 服务

> ID：11311926
> 
> 赞同：0
> 
> 时间：2012-07-03T13:24:40.857
> 
> 标签：jax-ws

我使用 JAX-WS 创建了一个 hello world 网络服务。使用 wsimport 工具从 WSDL 创建了服务器端 sceletons 类。我尝试在 Webservice Application Server 6.0.0.3 中部署应用程序。但无法在浏览器上获取 WSDL。它抛出 404 错误。你能帮我解决一下吗没有向服务器添加任何修订包的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:42:32.367

WAS 6.1 不支持 JAX-WS，除非您安装了 webservices 功能包。您将不得不改用 JAX-RPC。

WAS 7 是第一个支持 JAX-WS 的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T19:25:31.147

延伸阅读：

[http://www-01.ibm.com/support/docview.wss?uid=swg21264563](http://www-01.ibm.com/support/docview.wss?uid=swg21264563)

您需要的功能**在 WAS 6.1 中没有现成的可用**功能：

*WebSphere Application Server V6.1 Feature Pack for Web Services 提供了什么？*

-Web 服务可靠消息传递 (WS-RM) -Web 服务寻址 (WS-Addressing) -SOAP 消息传输优化机制 (MTOM) -Web 服务安全对话 (WS-SC) -基于新标准的编程模型支持：-Java API适用于 XML Web 服务 (JAX-WS 2.0) - 适用于 XML 绑定的 Java 架构 (JAXB 2.0) - 适用于 Java 的带有附件 API 的 SOAP (SAAJ 1.3) - 适用于 XML 的流式 API (StAX 1.0)

# sqlite - 使用 SQlite JDBC 库在 Java / Scala 中打开具有排他锁的 Sqlite 连接

> ID：11311927
> 
> 赞同：5
> 
> 时间：2012-07-03T13:24:42.407
> 
> 标签：sqlite, connection, locking

我希望sqlite有只读和写连接，当我打开一个写连接时，我希望它有一个排他锁。这看起来应该工作

```
val config = new SQLiteConfig();
config.setLockingMode(org.sqlite.SQLiteConfig.LockingMode.EXCLUSIVE)

val connection = DriverManager.getConnection("jdbc:sqlite:" + this.getPath() +"\\" + this.dbName, config.toProperties) 
```

但不幸的是我得到了一个例外

```
Exception in thread "main" java.sql.BatchUpdateException: batch entry 0: query returns results 
```

我也尝试过直接设置属性，而不是使用 Sqlite jdbc SQLiteConfig 类

```
val prop = new Properties();
prop.setProperty("locking_mode", "EXCLUSIVE"); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T22:39:13.450

我能够亲自使其工作的唯一方法是在数据库本身上执行如下查询：

```
conn.createStatement().execute("PRAGMA locking_mode = EXCLUSIVE"); 
```

# android - Android ViewPager invalidate（）不起作用

> ID：11311928
> 
> 赞同：2
> 
> 时间：2012-07-03T13:24:43.610
> 
> 标签：android, android-viewpager

我刚刚开始使用 android 开发并且使 ViewPager 无效真的困扰着我：/

有人可以告诉我如何在更改方向时使 ViewPager 无效。

这是我迄今为止尝试过的 -

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
super.onConfigurationChanged(newConfig);

     myPager = (ViewPager) findViewById(R.id.my_pager);
     myPager.setAdapter(adapter);
     myPager.setCurrentScreen(currentPosition, false);
     invalidate();
} 
```

附加调试时，上面的代码工作正常。但它不适用于运行时（没有调试模式）。我也尝试过睡眠，但视图没有变化。

有人可以详细解释这里发生了什么吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:49:56.417

听起来像是某种竞争条件:) 尝试在处理程序内调用 invalidate 并在配置更改结束时调用处理程序：

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);

    Handler handler = new Handler() 
    { 
          public void handleMessage(Message msg) 
          {
             invalidate();
          }
    }
    handler.sendEmptyMessage(0); 
```

# sql - dataSet.xsd 查询选择在哪里

> ID：11311930
> 
> 赞同：0
> 
> 时间：2012-07-03T13:24:50.320
> 
> 标签：sql, select, dataset

在 SQL 中它工作正常

```
SELECT NOID, NO_DOSSOIN, NO_ORDO, POSOLOG FROM dbo.ESPMEDS_ORDO_SORTIR
WHERE NO_DOSSOIN = @NO_DOSSOIN AND NOID IN (@NOIDIN) 
```

例子

```
SELECT NOID, NO_DOSSOIN, NO_ORDO, POSOLOG FROM dbo.ESPMEDS_ORDO_SORTIR
WHERE NO_DOSSOIN = 10 AND NOID IN (16,17) 
```

但是当我将它放在 dataset.xsd 查询中时，我没有得到相同的输出，我不能将多个 id 放入 NOIDIN 参数，因为 NOID 类型是整数

所以我的文件 DataSet.xsd 只能像这样工作： ![数据集.xsd 文件](../Images/419b9d5043a5571dce0749154760c306.png) SELECT NOID, NO_DOSSOIN, NO_ORDO, POSOLOG FROM dbo.ESPMEDS_ORDO_SORTIR WHERE NO_DOSSOIN = 10 AND NOID IN (16)

错误说我无法将数据从字符串转换为 int

![结构](../Images/1c230265c0e8eced4f08a00458f2ed15.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:43:09.247

你应该把`NOIDIN`. 不要期望能够传递一个`Int32`看起来`16,17`总是被此向导视为字符串并且如果您从代码中执行它根本不会编译的东西。

![在此处输入图像描述](../Images/8ad4acb612c8ae1ba024194fb9d65df1.png)

对您来说最简单的选择是将范围传递为两个值，如下所示：

`SELECT NOID, NO_DOSSOIN, NO_ORDO, POSOLOG FROM dbo.ESPMEDS_ORDO_SORTIR WHERE NO_DOSSOIN = @NO_DOSSOIN AND NOID IN (@NOIDSTART, @NOIDEND)`

然后分配：

`@NOIDSTART = 16`

`@NOIDEND = 17`

如果你的参数是动态的，你应该阅读[这篇文章](https://stackoverflow.com/questions/977021/can-a-stored-procedure-have-dynamic-parameters-to-be-used-in-an-in-clause)，它几乎涵盖了这个主题。

# .htaccess - .htaccess - 将 www 和非 www 子文件夹重定向到同一位置

> ID：11311938
> 
> 赞同：1
> 
> 时间：2012-07-03T13:25:07.457
> 
> 标签：.htaccess, redirect, subdomain

我正在尝试将子文件夹中的所有内容转发到我的根服务器上的相应 root.com/文件夹。

我已经成功使用下面的代码将 country.root.com 转发到 root.com/文件夹，但是当我在网络浏览器中键入 www.country.root.com 时 - 它不会重定向（我尝试过它工作但没有任何反应 - 这是我回到的代码）。

```
Options +FollowSymLinks 
RewriteEngine on 
RewriteCond %{HTTP_HOST} ^uk\.domain\.com 
RewriteRule ^(.*)$ http://www.domain.com/uk$1 [R=permanent,L] 
```

一直在搞这个。有人可以帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:31:12.323

```
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{HTTP_HOST} ^(.*)uk.domain.com
RewriteRule ^(.*)$ http://www.domain.com/uk$1 [R=permanent,L] 
```

这应该对你有帮助，对我有用。

# android - 在设计安卓应用程序时我应该考虑哪种屏幕分辨率？

> ID：11311943
> 
> 赞同：6
> 
> 时间：2012-07-03T13:25:28.283
> 
> 标签：android, screen-resolution

我已经搜索了一段时间，想知道在开始设计 Android 应用程序之前应该考虑哪种屏幕分辨率。

我发现了这些东西：

超大屏幕至少为 960dp x 720dp

大屏幕至少为 640dp x 480dp

普通屏幕至少为 470dp x 320dp

小屏幕至少为 426dp x 320dp

[开发 Android 应用程序时应牢记哪些设备分辨率？](https://stackoverflow.com/questions/7092744/which-device-resolutions-should-be-kept-in-mind-when-developing-android-apps)

但实际上这些不是我想要的。

我想知道的是我应该为这些分辨率中的每一个设计我的应用程序还是单独考虑最常用的分辨率

或者

如果我没有对宽度、高度和边距等使用任何硬编码值，我永远不需要担心屏幕分辨率

或者

这有多好 - 使用显示指标找到设备的宽度和高度，并根据这些值*动态*创建所有视图？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T13:38:49.470

> 我应该为这些分辨率中的每一个设计我的应用程序，还是只考虑最常用的分辨率。

您应该确保您的应用程序在*所有*屏幕上都能正常工作，而不仅仅是最流行的屏幕。我会从下往上开始……首先确保它在小/普通屏幕上正常工作（这样做，你确保它在所有屏幕上都能正常工作）。然后，您可以通过使用多窗格布局等来优化平板电脑的布局。

> 如果我没有对宽度、高度和边距等使用任何硬编码值，我永远不需要担心屏幕分辨率。

不确定您要在这里说什么，但您应该*始终*警惕不同的屏幕分辨率，使用`dp`(密度独立像素) 而不是`px`.

> 使用显示指标查找设备宽度和高度并根据这些值动态创建所有视图？

这应该是最后的手段。大多数时候，你的布局不会那么复杂，也没有必要。很多时候你会使用`wrap_content`并`match_parent`设置宽度/高度，并且经常会使用`RelativeLayout`s 来将视图相对于彼此隔开。如果您发现绝对必要，您只需要测量视图的宽度/高度。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T13:37:21.703

恕我直言，您应该始终对您的应用程序进行编码，以便支持每个设备。从此处详细介绍的启动器图标（不同屏幕尺寸的不同分辨率）：http: [//developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html](http://developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html)到您的应用程序布局，应设计为一切正常相对于屏幕大小放置（通过使用 match_parent 和 wrap_content 等属性）。

您可以尝试对其进行编码，以便在发现屏幕尺寸后动态创建视图，但我认为实现您的第一个想法更容易且同样有效！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-03T13:41:19.537

Best option is to get the screen width and height dynamically using simple height and width getting parameters.

```
DisplayMetrics displaymetrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
        int height = displaymetrics.heightPixels;
        int wwidth = displaymetrics.widthPixels; 
```

other option is to do create it for device with highest screen width and height and then handle it mathematically for respective screen size.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-03T13:39:04.040

好吧，建议为所有尺寸设计。但我知道这是很多开销。

因此，您可以做的是为您所瞄准的最大设备进行设计，并让设备根据它们的大小调整图像。不要使用硬编码值。使用`wrap_content`或`fill_parent`。

And yes, dynamically adjusting the images is a good idea, even though it requires more coding on your side. This is the technique I use.

# php - 如何使用 PHP 或 javascript 检测 Flash 版本？

> ID：11311944
> 
> 赞同：4
> 
> 时间：2012-07-03T13:25:48.267
> 
> 标签：php, javascript, flash, version, detect

我想将网站用户的 flashversion 存储在数据库中，因此当他们报告网站问题时，我可以轻松查看他们使用的 flash 版本。有没有办法用 PHP 或 javascript 检测它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:40:31.377

AS3 用 flash.system.Capabilities 类替换了 AS2`getVersion`的[补丁](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/Capabilities.html)。在那里你会找到一个名为 version 的属性，它会给你你想要的东西。它不是*用*Javascript 或 PHP 编写的，但是一个小的（并且可能是不可见的）SWF 可以轻松地向服务器页面发送一个获取请求，以将信息发布到您的数据库中。

如果您*需要*在 Javascript 中完成请求，出于某种原因，可以（尽管不流畅）让 AS3 和 Javascript 进行通信。

# android - 如何在 Android 4.X 中使用 Broadcom BLE SDK (SMART 4.0)

> ID：11311947
> 
> 赞同：7
> 
> 时间：2012-07-03T13:25:51.697
> 
> 标签：android, bluetooth, bluetooth-lowenergy

我正在尝试为 Android 开发一个 BLE 蓝牙 (SMART) 应用程序。

我设法下载了[Broadcom BLE SDK](http://code.google.com/p/broadcom-ble/)，按照网站上的说明通过 Android SDK Manager 安装并下载了[项目示例](http://code.google.com/p/broadcom-ble/source/browse/#git/Samples)。

当我尝试将其中一个示例推送到我的测试手机（HTC One S、HTC One X 都具有蓝牙 BLE 功能）时，我面临以下问题：

```
INSTALL_FAILED_MISSING_SHARED_LIBRARY 
```

是否有可能包含 AndroidManifest.xml 文件中描述的 Broadcom 库？ `<uses-library android:name="com.broadcom.bt.le" android:required="true"/>`

有人设法测试了 Broadcom 项目示例吗？在哪部手机上？

根据这篇[文章](https://stackoverflow.com/questions/11104708/bluetooth-4-0-smart-low-energy-on-samsung-galaxy-s3)，在三星 Galaxy S3 上发现了一个错误，但我没有找到任何有关 HTC 产品的信息。

* * *

**更新：真是个好消息！！！**

上一个 Android 版本 4.3 (Jelly Bean) 现在支持低能耗蓝牙智能配件。

[http://www.android.com/about/jelly-bean/](http://www.android.com/about/jelly-bean/)

[https://developer.bluetooth.org/Pages/Bluetooth-Android-Developers.aspx](https://developer.bluetooth.org/Pages/Bluetooth-Android-Developers.aspx)

不确定每部手机都会有更新（例如最后一款 HTC One M7），但下一款手机肯定会嵌入这个主要版本。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-09T19:49:06.547

问题是，如果您的手机没有安装 .so 文件，这将无济于事。

如果 Broadcom 为设备提供祝福，您的设备（在撰写本文时）将只有 .so 文件。

例如，相当新的三星 Galaxy Nexus 的最新官方版本 (4.0.4) 没有。

对于那些不知道的人，有两个不同的（不兼容的）低能耗蓝牙 API（BtLE，现在显然称为 BT Smart）。一个来自博通，另一个来自摩托罗拉。不出所料，每个都只能在装有该供应商芯片的手机上运行。

这是一个可怕的、可怕的情况，谷歌真的需要采取解决方案，否则 Android 将在一个名为 HEALTHCARE 的小行业变得完全无关紧要！！！！！！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-22T13:54:26.953

HTC One X 和 One S 使用的是高通蓝牙芯片，而不是博通。因此，Broadcom SDK 将无法正常工作。有一个与 HTC One X+、Droid DNA 和 HTC One 一起使用的 HTC BLE SDK，您可以在此处注册 HTC BLE SDK：http:
[//www.htcdev.com/devcenter/opensense-sdk/partner- api/蓝牙低功耗/](http://www.htcdev.com/devcenter/opensense-sdk/partner-apis/bluetooth-low-energy/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-28T17:28:38.327

确认 BroadCom BLE 堆栈适用于**HTC 1X+**并与标准**TI KeyFob Demo**配合使用。

似乎我在发一个愚蠢的帖子，但我认为有人可能会受到鼓励继续前进，至少是一个小小的成功的明确声明。

**BleFindMeClient**确实可以在**HTC 1X+**上与 TI 发行版中的 TI CC2540-mini Keyfob aka **KeyFobDemo**一起使用。

我从未编写过 Andoid 应用程序或 TI 密钥卡的代码，因此我花了很长时间才弄清楚所有工具的工作原理以及如何配置它们，但并没有真正的魔力。对我来说，如果没有一些代码调整，其他一些 Android 演示就无法编译出大门，但这可能只是我的经验不足。

[http://youtu.be/cqWpjU7gJ2Q](http://youtu.be/cqWpjU7gJ2Q)

关于**getDeviceType** () 的另一个问题，这里有一个代码片段，每次在 HTC 1x+ 上都能完美运行。希望这也有帮助。

```
BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
if ( BleAdapter.getDeviceType(device) == BleAdapter.DEVICE_TYPE_BLE ) {
    ...
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-05T06:40:19.657

有人在[这里](http://code.google.com/p/broadcom-ble/issues/detail?id=1)找到解决方案。

要做的三个步骤是：

1.  不要包含在清单文件中。

2.  在项目`Properties`→ `Java Build Path`→ `Libraries`→`Add external jar`中，添加 Broadcom ble jar。

3.  在项目`Properties`→ `Java Build Path`→`Order and Export`中，检查步骤 2 中包含的 jar。

`.getDeviceType()`最后，Broadcom 示例项目运行，但由于未在 HTC ( , ...)上实现的未知虚拟方法，几秒钟后崩溃！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-03T15:15:47.323

似乎 HTC 手机上也可能缺少某些东西。此错误意味着 BLE 硬件和 API 之间可能存在一层软件缺失（或故障）。至于今天，我只看到 BLE 在摩托罗拉 Razr 上工作，但它似乎仅限于心率配置文件（并且它不使用 Broadcom API）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-27T12:33:58.687

如果有任何人根据这个 SDK 编写应用程序，我想告诉你一行

在 DeviceDiscovery 中，他们调用了一个 getDeviceType 方法，该方法在整个 Android JB 代码库中的任何地方都没有定义，因此它只在那里崩溃。因此，如果正在努力消除崩溃，请记住，如果它在设备发现事件中崩溃，您将无法做到这一点。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-28T08:05:16.290

澄清一下，只有从这些当前可用的 HTC 设备开始，您才会发现 BLE 支持：HTC One X+、HTC Droid DNA，当然还有 HTC One 和即将推出的旗舰设备。请注意，从 4.3 开始，您应该迁移到使用标准的官方 Android BLE API，以支持 4.3 之前的设备，您可以使用 HTC BLE API。有关支持这两种 API 的更多信息和示例代码，请参阅[https://www.htcdev.com/devcenter/opensense-sdk/bluetooth-smart](https://www.htcdev.com/devcenter/opensense-sdk/bluetooth-smart)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-08-04T07:16:00.333

**真是个好消息！！！**

上一个 Android 版本 4.3 (Jelly Bean) 现在支持低能耗蓝牙智能配件。

[http://www.android.com/about/jelly-bean/](http://www.android.com/about/jelly-bean/)

[https://developer.bluetooth.org/Pages/Bluetooth-Android-Developers.aspx](https://developer.bluetooth.org/Pages/Bluetooth-Android-Developers.aspx)

不确定每部手机都会有更新（例如最后一款 HTC One M7），但下一款手机肯定会嵌入这个主要版本。

# java - 月数组抛出 ArrayIndexOutOfBoundException java

> ID：11311948
> 
> 赞同：0
> 
> 时间：2012-07-03T13:25:54.817
> 
> 标签：java, android, calendar, indexoutofboundsexception

在我的回历日历应用程序中，如果我单击下个月按钮并到达年底（即最后一个月），或者如果我单击上一个月份按钮直到我到达年初（即第一个月） ，应用程序崩溃并抛出`java.lang.ArrayIndexOutOfBoundsException`

```
 private ImageView calendarToJournalButton;
    private Button selectedDayMonthYearButton;
    private final String[] hmonths = {"Muharram", "Safar", "Rabi al-Awwal", "Rabi al-Akhir", "Jamadi al-Awwal", "Jamadi al-Akhir", "Rajab", "Shabaan", "Ramadhan", "Shawwal", "Zilqad", "Zilhajj"};
    private Button currentMonth;
    private ImageView prevMonth;
    private ImageView nextMonth;
    private GridView calendarView;
    private GridCellAdapter adapter;
    private Calendar _calendar;
    private int month, year, hmonth, hyear;
    private final DateFormat dateFormatter = new DateFormat();
    private static final String dateTemplate = "MMMM yyyy";
    private String hmonthname;
    private HijriCalendar hijri;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
        {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.simple_calendar_view);

            _calendar = Calendar.getInstance(Locale.getDefault());
            hijri = new HijriCalendar(_calendar.get(Calendar.YEAR),_calendar.get(Calendar.MONTH),_calendar.get(Calendar.DAY_OF_MONTH));

            month = _calendar.get(Calendar.MONTH) + 1;
            year = _calendar.get(Calendar.YEAR);

            hmonth = hijri.getHijriMonth();
            hmonthname = hijri.getHijriMonthName();
            hyear = hijri.getHijriYear();

            Log.d(tag, "Calendar Instance:= " + "Month: " + month + " " + "Year: " + year);
            Log.d(tag, "Islamic Calendar Instance:= " + "Month: " + hmonth + " " + "Year: " + hyear);

            selectedDayMonthYearButton = (Button) this.findViewById(R.id.selectedDayMonthYear);
            selectedDayMonthYearButton.setText("Selected: ");

            prevMonth = (ImageView) this.findViewById(R.id.prevMonth);
            prevMonth.setOnClickListener(this);

            currentMonth = (Button) this.findViewById(R.id.currentMonth);
            currentMonth.setText(DateFormat.format(dateTemplate, _calendar.getTime()) + " | " + hmonthname + " " + hyear);

            nextMonth = (ImageView) this.findViewById(R.id.nextMonth);
            nextMonth.setOnClickListener(this);

            calendarView = (GridView) this.findViewById(R.id.calendar);

            // Initialised
            adapter = new GridCellAdapter(getApplicationContext(), R.id.calendar_day_gridcell, month, year, hmonth, hyear);
            adapter.notifyDataSetChanged();
            calendarView.setAdapter(adapter);
        }

    /**
     * 
     * @param month
     * @param year
     */
    private void setGridCellAdapterToDate(int month, int year, int hmonth, int hyear)
        {
            adapter = new GridCellAdapter(getApplicationContext(), R.id.calendar_day_gridcell, month, year, hmonth, hyear);
            _calendar.set(year, month - 1, _calendar.get(Calendar.DAY_OF_MONTH));
            currentMonth.setText(dateFormatter.format(dateTemplate, _calendar.getTime())  + " | " + getHMonthAsString(hmonth) + " " + hyear);
            adapter.notifyDataSetChanged();
            calendarView.setAdapter(adapter);
        }

    //Hijri Month
    private String getHMonthAsString(int i)
        {
            return hmonths[i];
        }

    @Override
    public void onClick(View v)
        {
            if (v == prevMonth)
                {
                    if (month <= 1)
                        {
                            month = 12;
                            year--;
                        }
                    else
                        {
                            month--;
                        }
                    if (hmonth <= 1)
                    {
                        hmonth = 12;
                        hyear--;
                    }
                    else
                    {
                        hmonth--;
                    }
                    Log.d(tag, "Setting Prev Month in GridCellAdapter: " + "Month: " + month + " Year: " + year);
                    Log.d(tag, "Setting Prev Islamic Month in GridCellAdapter: " + "Month: " + hmonth + " Year: " + hyear);
                    setGridCellAdapterToDate(month, year, hmonth, hyear);
                }
            if (v == nextMonth)
                {
                    if (month > 11)
                        {
                            month = 1;
                            year++;
                        }
                    else
                        {
                            month++;
                        }
                    if (hmonth > 11)
                    {

                        hmonth = 1;
                        hyear++;
                    }
                    else
                    {
                        hmonth++;
                    }
                    Log.d(tag, "Setting Next Month in GridCellAdapter: " + "Month: " + month + " Year: " + year);
                    Log.d(tag, "Setting Next Islamic Month in GridCellAdapter: " + "Month: " + hmonth + " Year: " + hyear);
                    setGridCellAdapterToDate(month, year, hmonth, hyear);

                }

        } 
```

logcat 在这一行显示错误：

```
currentMonth.setText(dateFormatter.format(dateTemplate, _calendar.getTime())  + " | " + getHMonthAsString(hmonth) + " " + hyear); 
```

在方法`getHMonthAsString(hmonth)`中。`setGridCellAdapterToDate`

如果我替换`getHMonthAsString(hmonth)`为`hmonth`，日历会正确循环年份和月份，并且可以正常工作而不会出现任何错误，但是它不会显示月份名称，只显示数字。

我哪里错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T13:28:46.757

数组是从 0 开始的。如果月份是 12，当您在 中设置时`onClick`，您已经过了数组的末尾。

```
public void onClick(View v) {
    if (v == prevMonth) {
        if (month <= 1) {
            month = 12; // Ouch. 
```

* * *

此外，虽然我意识到源格式在很大程度上是一个宗教问题，特别是在发布 IMO 时，最好减少垂直和水平空白。单个块的两级缩进似乎过多。代码倒转并不能说明它有多棒；）

* * *

编辑：请注意您添加和删除的信息。

# mysql - SELECT ... FOR UPDATE 是否应该始终包含 ORDER BY？

> ID：11311951
> 
> 赞同：15
> 
> 时间：2012-07-03T13:26:08.733
> 
> 标签：mysql, oracle, locking, deadlock

假设我们执行...

```
SELECT * FROM MY_TABLE FOR UPDATE 
```

...而且 MY_TABLE 中不止一行。

从理论上讲，如果两个**并发**事务执行此语句，但它恰好以不同的顺序遍历（并因此锁定）行，则可能会发生死锁。例如：

*   事务 1：锁定 A 行。
*   事务 2：锁定 B 行。
*   事务 1：尝试锁定 B 行和块。
*   事务 2：尝试锁定 A 行并出现死锁。

解决这个问题的方法是使用 ORDER BY 来确保行总是以相同的顺序锁定。

所以，我的问题是：这种理论上的僵局会在实践中发生吗？我知道有办法[人为诱导它](https://stackoverflow.com/q/9216150/533120)，但它会在正常操作中发生吗？我们应该总是使用 ORDER BY，还是忽略它实际上是安全的？

我主要对 Oracle 和 MySQL/InnoDB 的行为感兴趣，但对其他 DBMS 的评论也会有所帮助。

### - - 编辑 - -

以下是在锁定顺序不同时如何在 Oracle 下重现死锁：

创建测试表并用一些测试数据填充它......

```
CREATE TABLE DEADLOCK_TEST (
    ID INT PRIMARY KEY,
    A INT 
);

INSERT INTO DEADLOCK_TEST SELECT LEVEL, 1 FROM DUAL CONNECT BY LEVEL <= 10000;

COMMIT; 
```

...从一个客户端会话（我使用 SQL Developer），运行以下块：

```
DECLARE
    CURSOR CUR IS 
        SELECT * FROM DEADLOCK_TEST
        WHERE ID BETWEEN 1000 AND 2000 
        ORDER BY ID 
        FOR UPDATE;
BEGIN
    WHILE TRUE LOOP
        FOR LOCKED_ROW IN CUR LOOP
            UPDATE DEADLOCK_TEST 
            SET A = -99999999999999999999 
            WHERE CURRENT OF CUR;
        END LOOP;
        ROLLBACK;
    END LOOP;
END;
/ 
```

从**不同**的客户端会话（我只是启动了另一个 SQL Developer 实例），运行相同的块，但`DESC`在`ORDER BY`. 几秒钟后，您将获得：

```
ORA-00060: deadlock detected while waiting for resource 
```

顺便说一句，您可能会通过完全删除`ORDER BY`（因此两个块相同）并添加...来获得相同的结果。

```
ALTER SESSION SET OPTIMIZER_INDEX_COST_ADJ = 1; 
```

...在一个街区前，但是...

```
ALTER SESSION SET OPTIMIZER_INDEX_COST_ADJ = 10000; 
```

...在另一个之前（因此 Oracle 选择不同的执行计划并可能以不同的顺序获取行）。

这说明锁定确实是在从游标中获取行时完成的（而不是在打开游标时立即针对整个结果集）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T13:39:08.823

您在问题中的示例表明锁定顺序取决于访问方法。这个访问路径不是由查询的 ORDER BY 子句直接决定的，影响这个访问路径的因素有很多。因此，您不能仅通过添加 ORDER BY 来防止死锁，因为您仍然可以有两个不同的访问路径。事实上，通过使用 order by 运行您的测试用例并更改会话参数，我能够使两个会话运行到具有相同查询的 ORA-60 中。

如果所涉及的会话没有其他挂起的锁，则在所有会话**中以相同的顺序**锁定行将防止死锁，但是如何可靠地强制执行此顺序？请注意，这只会防止这种非常特殊的死锁情况。在每个会话或不同的计划中，您仍然可能会遇到多个查询的死锁。

实际上，这种情况非常特殊，无论如何都不应该经常发生：如果您担心死锁，我仍然认为有更简单的方法可以防止它们。

防止死锁的最简单方法是使用`FOR UPDATE NOWAIT`or `FOR UPDATE WAIT X`（尽管 WAIT X 仍然可以触发具有优于死锁检测机制的 X 值的死锁，我相信目前为 11g 的 3 秒——感谢[@APC](https://stackoverflow.com/users/146325/apc)的更正）。

换句话说，两个事务都应该问：给我这些行并锁定它们，但是如果另一个用户已经有一个锁，则返回一个错误，而不是无限期地等待。导致死锁的是无限期的等待。

在实践中，我会说大多数具有真人用户的应用程序宁愿立即收到错误，也不愿让事务无限期地等待另一个事务完成。我只考虑`FOR UPDATE`非`NOWAIT`关键批处理作业。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T14:37:01.550

我认为您误解了 FOR UPDATE 的工作原理。*它在游标被激活*时获取锁；也就是说，当发出 SELECT 时。

因此，运行您的查询，事务 1 将锁定整个表（因为您没有指定 WHERE 子句）。无论事务 1 是否针对选定的记录集发布了任何 DML，事务 2 都将挂起或失败（取决于您在 WAIT 子句中指定的内容）。事实上，事务 1 甚至不需要获取任何记录；一旦事务 1 打开 FOR UPDATE 游标，事务 2 将抛出 ORA-00054。

您描述的死锁场景是使用乐观锁定的应用程序的经典结果（即假设它能够在需要时获取锁）。FOR UPDATE 的全部意义在于它是一种悲观的锁定策略：抓住*现在*可能需要的所有锁，以保证将来成功处理。

* * *

不可估量的 Kyte 先生[在他的博客中提供了至关重要的见解](http://tkyte.blogspot.co.uk/2010/04/what-will-happen-if.html)：

> “死锁检测胜过等待期”

在我的代码中，我在第二个会话中使用的游标的 FOR UPDATE 子句中使用了 NOWAIT：

```
cursor c10000 is
     select * from order_lines
     where header_id = 1234
     for update;

cursor c1 is
     select * from order_lines
     where header_id = 1234
     and line_id = 9999
     for update nowait; 
```

因此会话 2 立即失败并抛出 ORA-00054。

但是 OP 没有指定任何内容，在这种情况下，第二个会话将无限期地等待该行被释放。除了它没有，因为过了一会儿死锁检测启动并终止带有极端偏见的命令，即 ORA-00060。如果他们指定了一个较短的等待期——比如 WAIT 1——他们就会看到`ORA-30006: resource busy`。

请注意，无论我们是否使用详细语法，都会发生这种情况......

```
open c10000;
loop
    fetch c10000 into r; 
```

或者更时髦的......

```
for r in c10000 loop 
```

当会话 2 开始时，会话 1 是否已获取感兴趣的行并不重要。

**tl;博士**

所以关键是，ORDER BY 不能解决任何问题。发出 FOR UPDATE 的第一个会话获取结果集中的所有记录。*任何*尝试更新这些记录的后续会话都将失败并出现 ORA-00054、ORA-30006 或 ORA-00060，具体取决于它们是否指定了NOWAIT、WAIT *n*或什么都不...。除非第一个会话在WAIT 周期超时或死锁检测启动。

* * *

这是一个工作示例。我正在使用自动事务来模拟第二个会话。效果是一样的，但输出更容易阅读。

```
declare
    cursor c1 is
        select * from emp
        where deptno = 10
        for update;
    procedure s2 
    is
        cursor c2 is
            select * from emp
            where empno = 7934 -- one of the employees in dept 10
            for update
            -- for update nowait
            -- for update wait 1
            ;
        x_deadlock exception;
        pragma exception_init( x_deadlock, -60);
        x_row_is_locked exception;
        pragma exception_init( x_row_is_locked, -54);
        x_wait_timeout exception;
        pragma exception_init( x_wait_timeout, -30006);
        pragma autonomous_transaction;
    begin
        dbms_output.put_line('session 2 start');
        for r2 in c2 loop
            dbms_output.put_line('session 2 got '||r2.empno);
            update emp
            set sal = sal * 1.1
            where current of c2;
            dbms_output.put_line('session 2 update='||sql%rowcount);
        end loop;    
        rollback;
     exception
        when x_deadlock then
            dbms_output.put_line('session 2: deadlock exception');
        when x_row_is_locked then
           dbms_output.put_line('session 2: nowait exception');
        when x_wait_timeout then
            dbms_output.put_line('session 2: wait timeout exception');       
    end s2;
begin
    for r1 in c1 loop
        dbms_output.put_line('session 1 got '||r1.empno);
        s2;
    end loop;
end;
/ 
```

在这个版本中，我`for update`在第二个会话中指定了一个顺子。这是 OP 使用的配置，从输出中可以看出，因为检测到死锁：

```
session 1 got 7782                                                              
session 2 start                                                                 
session 2: deadlock exception                                                   
session 1 got 7839                                                              
session 2 start                                                                 
session 2: deadlock exception                                                   
session 1 got 7934                                                              
session 2 start                                                                 
session 2: deadlock exception                                                   

PL/SQL procedure successfully completed. 
```

这清楚地表明了

1.  第一个会话已从 go-get 锁定整个结果集，因为第二个会话永远不会锁定该行，即使第一个会话尚未检索它也是如此。
2.  即使第二`Deadlock detected`个会话无法更新任何内容，也会引发异常。1.`Deadlock detected`即使第一个会话没有更新任何获取的 wow，也会抛出异常。

该代码很容易修改以演示 FOR UPDATE 变体的不同行为。

# jsf-2 - Primefaces p：自动完成组件在对话框下不起作用

> ID：11311960
> 
> 赞同：0
> 
> 时间：2012-07-03T13:26:28.120
> 
> 标签：jsf-2, autocomplete, primefaces

我正在使用 primefaces p:autocomplete 组件（primefaces 3.0 版），它工作正常，但我遇到了 2 个问题。

首先是当我在对话框中输入 p:autocomplete 组件时，如果用户在输入一些关键字后得到建议，它就会卡住，我们既不能再输入也不能使用退格键。

其次是p：自动完成组件建议区分大小写。但用户应该始终得到建议，无论他是否使用大写字母。

例如：如果名称以大写字母“John”存储在数据库中，但如果用户键入小写字母“jo”，他应该得到建议为“John”。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:59:34.570

对于你的第一部分，我没有具体的答案。可能是PF错误。它只是坚持的自动完成吗？整个浏览器是否挂起？您可以使用页面上的其他控件吗？

至于区分大小写，您可以在支持 bean 的自动完成方法中控制它。如果您想忽略大小写，请在比较中使用 .toLowerCase()、.toUpperCase()、.equalsIgnoreCase()。

# php - SQLITE3 查询不返回我想要的 PHP

> ID：11311961
> 
> 赞同：0
> 
> 时间：2012-07-03T13:26:30.020
> 
> 标签：php, sql, database, sqlite

我很好地打开了我的 sq3d，但是当我尝试在我的一张表上执行 SELECT 时，它似乎没有返回我期望的结果。这是php代码：

```
$buildingArray = array();

class MyDB extends SQLite3
{
function __construct()
{
    $this->open('Database.s3db');
}
}

$db = new MyDB();

$query1 = "SELECT * FROM tbl_uploadData";
$result1 = $db->query($query1);
$u = $result1->fetchArray();
echo "<br/>Size of u: ".sizeOf($u)."<br/>";

for($i=0; $i<sizeOf($u); $i++){
echo "<br/>Items: ".$u[$i]."<br/>";
} 
```

这是我的数据库中的内容：

tbl_uploadData : b_id - 1,2,3,4 ：其中 1,2,3,4 是字段中的项目，b_id 是字段名称，tbl_uploadData 是表。

我希望在 fetchArray() 中返回 1、2、3 和 4

我得到的回报是：

```
Size of u: 2
Items: 1
Notice: Undefined offset: 1 in C:\xampp\htdocs\PHPexcel\Tests\StrategicExcel.php on line 72
Items: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:39:10.943

这是解决方案，正如间隔猴子提到的那样， fetchArray() 一次只返回一个结果。因此，通过添加一个 while 循环和几个对我的 b_id 的引用，它应该可以工作。我已将代码修改为：

```
$databaseName = "Database.s3db";

$db2 = new SQLite3($databaseName); 
    $sql = "SELECT b_id FROM tbl_uploadData"; 
    $result = $db2->query($sql);//->fetchArray(SQLITE3_ASSOC); 
    $row = array(); 

    $i = 0; 
     while($res = $result->fetchArray(SQLITE3_ASSOC)){ 
         if(!isset($res['b_id'])) continue; 
            $row[$i]['b_id'] = $res['b_id']; 
            $i++; 
      } 
      print_r($row); 
```

如果将来有人遇到这个问题，希望这会有所帮助，TY

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:33:13.133

fetchArray() 一次只能获取 1 行，您需要为每一行调用它。[http://uk3.php.net/manual/en/function.sqlite-fetch-array.php](http://uk3.php.net/manual/en/function.sqlite-fetch-array.php)

你应该能够：

```
while ( $u = $result1->fetchArray() ) {
    echo "<br/>Items: ".$u['b_id']."<br/>";
} 
```

我不知道为什么 sizeof($u) 返回 2。

# eclipse - 如何在 Maven 中将 HSQLDB 库添加到 SpringMVC？

> ID：11311966
> 
> 赞同：2
> 
> 时间：2012-07-03T13:26:52.883
> 
> 标签：eclipse, maven, spring-mvc, hsqldb

请问如何`hsqldb.jar`在Maven中添加HSQLDB库？我在 Eclipse 中创建了 SpringSource Tool Suite 中的 Spring Template Project 项目。据我所知，它使用 Maven。我希望我的项目能够使用和使用 HSQL 数据库。而此时我希望我的 Tomcat 服务器使用 HSQLDB 库文件。所以如果我在 Maven 中添加这个库文件，我的项目将与 HQL 数据库一起正常工作。这是我的假设。我找到了这个例子[http://slu.livejournal.com/5965.html](http://slu.livejournal.com/5965.html)但是将 jar 文件添加到类路径不是很好的编程实践，是吗？我是 Maven 和 Spring Framework 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:35:25.877

最新版本：

```
<dependency>
    <groupId>org.hsqldb</groupId>
    <artifactId>hsqldb</artifactId>
    <version>2.2.8</version>
    <scope>runtime</scope>
</dependency> 
```

请记住`runtime`此类工件中的范围（大多数人忘记了它），因为您使用一些通用 API/SPI（可能是 ORM 或 JDBC）进行数据库访问，而 HSQLDB 只是此类 API/SPI 的运行时实现的某种供应商。

# java - 用Tomcat6实现彗星模式

> ID：11311967
> 
> 赞同：1
> 
> 时间：2012-07-03T13:26:53.620
> 
> 标签：java, tomcat, servlets, comet, long-polling

我刚刚了解了彗星模式（长轮询），并且非常想用 Tomcat6 作为容器来实现一个简单的示例。我在这里要做的是 - 我将调用一个 servlet，它生成一个介于 1 到 20 之间的随机数，并根据该随机数它应该在响应客户端之前等待该秒数。

例如：如果生成的随机数是 10 ，那么 servlet 在发送响应之前应该等待 10 秒。

这是我实现的servlet`CometProcessor`

```
public class RandomNumberGenerator extends HttpServlet implements CometProcessor { 
```

doPost 方法：

```
 PrintWriter out =response.getWriter();
        Random r = new Random();
        int randomInt = r.nextInt(20) + 1;
        out.print(randomInt);
        out.flush();
        out.close(); 
```

现在，当我实现时，`CometProcessor`我有一个事件方法：

```
@Override
    public void event(CometEvent event) throws IOException, ServletException {

    } 
```

我想不通的是，我用这种`event`方法做什么来做我想做的事。

我在这里知道的是，它们将是我可以在此方法中处理的一些事件，例如：`BRGIN,READ,END,ERROR`

我应该使用这样的事件吗？

```
if (event.getEventType() == CometEvent.EventType.BEGIN) {
    event.setTimeout(numberOfSecondToWait);
} 
```

我完全感到困惑，因为[本](http://www.ibm.com/developerworks/web/library/wa-cometjava/)教程对我来说似乎有点复杂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:32:57.060

我最近写了一篇关于[WebSockets 和 Comet](http://www.leggetter.co.uk/2012/04/22/websockets-realise-comet-theyre-not-an-alternative.html)的博文，并请 'Comet' 的发明者提供他的意见。

总之，Alex 说[WebSockets 取代了 Comet](http://www.leggetter.co.uk/2012/04/22/websockets-realise-comet-theyre-not-an-alternative.html#comment-518850026)。

因此，尽管人们仍在使用 Comet，但它最终将被 WebSockets 取代，因为它们是专门为解决 Comet 解决方案所解决的问题而创建的。

我建议您将注意力转移到 WebSockets 上。

# ruby - 带有@param标签的院子里的警告

> ID：11311973
> 
> 赞同：6
> 
> 时间：2012-07-03T13:27:01.463
> 
> 标签：ruby, documentation, yard

我试图记录一些 Ruby 代码`yard`，即使我正在做的正是[这里](http://rubydoc.info/docs/yard/file/docs/Tags.md#param)或[这里所描述的](http://rubydoc.info/docs/yard/file/docs/GettingStarted.md#Reference_Tags)

```
# @param [Integer] the number of trials (>= 0)
# @param [Float] success probability in each trial
def initialize(n, p)
  # initialize...
end 
```

我仍然收到这个奇怪的错误

```
@param tag has unknown parameter name: the
@param tag has unknown parameter name: success 
```

然后生成的 html 看起来很奇怪。我这样称呼`yard`：

```
$ yard doc -m markdown 
```

我可能做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-03T13:34:01.137

doc说@param标签有格式

```
@param [Type] name description 
```

并且您的行不包括参数名称（分别为 n 和 p）

# nginx - 与内容类型相关的 nginx 过期标头

> ID：11311976
> 
> 赞同：2
> 
> 时间：2012-07-03T13:27:09.350
> 
> 标签：nginx, expires-header

是否可以在 nginx 中设置依赖于内容类型的过期标头？我对 nginx 很陌生，并尝试了以下方法：

```
 location ~ /files\.php$ {
    ...
            if ($content_type = "text/css") {
                    add_header X-TEST1 123;
                    expires 7d;
            }
            if ($content_type = "image/png") {
                    add_header X-TEST2 123;
                    expires 30d;
            }
            if ($content_type = "application/javascript") {
                    add_header X-TEST3 123;
                    expires 1d;
            }
            #testing
            if ($content_type != "text/css") {
                    add_header X-TEST4 abc;
            }
            #testing
            if ($content_type = text/css) {
                    add_header X-TEST5 123;
            }
    } 
```

但添加的唯一标头是所有请求的“X-TEST4”。我知道使用文件扩展名的其他解决方案：

```
location ~* \.(ico|css|js|gif|jp?g|png)\?[0-9]+$ 
```

但它不适用于我的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:13:44.137

你有没有尝试过

```
$content_type ~= application/javascript 
```

另外，请务必阅读： [http ://wiki.nginx.org/IfIsEvil](http://wiki.nginx.org/IfIsEvil)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:38:50.337

我认为代码应该在`location / { }`而不是`location ~ /files\.php$ { }`...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-21T20:21:46.190

**If you have the lua module installed you could do something similar like this:**

```
server {

    location / {...}

    header_filter_by_lua_block {

            local cct = {}  -- # cached content types

            cct["text/css"] = true
            cct["application/javascript"] = true
            cct["application/x-javascript"] = true
            cct["text/javascript"] = true
            cct["image/jpeg"] = true
            cct["image/png"] = true
            cct["application/vnd.ms-fontobject"] = true
            cct["application/font-woff"] = true
            cct["application/x-font-truetype"] = true
            cct["image/svg+xml"] = true
            cct["application/x-font-opentype"] = true

            if cct[ngx.header.content_type] ~= nil and ngx.header["expires"] == nil then
                    local now = os.time()
                    local expires = os.date("%a, %d-%b-%Y %H:%I:%S GMT", now+604800) -- # one week in seconds

                    ngx.header["expires"] = expires
            end
    }
} 
```

Responses with the specified content-type will now get an expires-header. When the response already has an expires-header the lua block will not touch the header.

# sql - SQL Server 2012 临时表 OBJECT_ID 问题

> ID：11311979
> 
> 赞同：2
> 
> 时间：2012-07-03T13:27:16.630
> 
> 标签：sql, sql-server, sql-server-2012, temp-tables

我们在升级到 SQL Server 2012 时遇到问题。我正在使用以下脚本创建临时表，这些临时表过去在 SQL Server 2008 R2 上运行良好，但现在它在 2012 中生成错误：

```
if (OBJECT_ID( 'tempdb..#idstable') > 0)
    truncate table #idstable
else
    create table #idstable (id int not null) 
```

抛出的错误是

> 数据库中已经有一个名为“#idstable”的对象。

这显然不是我第一次使用脚本时抛出的（在同一个事务中）。

任何的想法？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T13:33:21.930

在 SQL Server 2012 中，#temp 表是用负号创建的`object_id`，因此您的脚本不会按原样工作。最安全的方法是：

```
IF OBJECT_ID( 'tempdb..#idstable') IS NOT NULL 
```

（[我在这里写了一篇博客，并且知道它会抓住某人](https://sqlblog.org/2010/11/09/sql-server-v-next-denali-breaking-change-to-temp-tables)。）

尽管您的脚本无论如何都会失败，但如果它是单个批次的一部分。解析器不会让您尝试创建相同的 #temp 表两次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:33:05.177

试试这个：

```
IF OBJECT_ID (N'tempdb..#idstable', N'U') IS NOT NULL
    truncate table #idstable
else
    create table #idstable (id int not null) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T20:35:37.013

亲爱的，

此问题是由于 truncate 语句造成的。截断用于删除保留表的所有记录。使用 drop table 而不是 truncate table，这样可以正常工作；-)

# javascript - NicEdit 新上传 IE 问题

> ID：11311980
> 
> 赞同：0
> 
> 时间：2012-07-03T13:27:17.173
> 
> 标签：javascript, editor, wysiwyg, image-uploading, nicedit

最近 NicEdit 更新为上传到 imgur.com 而不是 imageshark.us

如您所见，“上传图片”功能在除 IE [http://www.nicedit.com/demos.php之外的所有浏览器上都能正常工作](http://www.nicedit.com/demos.php)

在 IE 上，您会收到警告错误“此浏览器不支持图像上传，请改用 Chrome、Firefox 或 Safari。”

有没有办法让上传再次像这次更新之前那样工作？

期待您的帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T04:48:57.833

IE10 可能会支持 html5 上传。在那之前，鼓励用户切换到真正的浏览器:)

# c# - ASP.NET 2.0 C# Admin 页面可以决定要显示哪些产品？

> ID：11311984
> 
> 赞同：0
> 
> 时间：2012-07-03T13:27:40.420
> 
> 标签：c#, asp.net-2.0

我的网站销售一页的产品称为 dvd.aspx，它使用 sproc 显示我的数据库中的所有 dvd，并带有“type=dvd”。我在管理文件夹中有一些管理页面，我可以在其中添加新产品，编辑现有产品，但我需要让管理员决定要显示哪些项目，有人对如何解决这个问题有任何建议吗，我需要创建一个admin 文件夹中的页面，或者编辑 dvd.aspx 页面后面的代码？欢迎任何建议，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:29:37.003

产品上的标志，指示是否应显示。然后管理员可以调整标志以确定它是否应该由您的存储过程选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:39:18.540

在您的表中创建名为 somehing like 的新列`"ToShow"`并使其成为位类型，编辑您的`dvd.aspx`以显示带有`type=dvd`和的项目`ToShow=true`。

创建管理页面，添加带有更改 ToShow 属性的选项的 GridView。这样管理员可以选择要显示的项目。

只是一个友好的建议，转移到 .net 4.0，你可以使用一些[对象关系映射器](http://en.wikipedia.org/wiki/Object-relational_mapping)，如 Linq to Sql、NHibernate 或实体框架，它会让你的生活更轻松！

# java - exec() 和我的愚蠢

> ID：11311985
> 
> 赞同：-4
> 
> 时间：2012-07-03T13:27:40.437
> 
> 标签：java, linux

我只是想分享一下我的愚蠢以及我是如何用几行代码耗尽所有磁盘空间的，大约 90 GB。

我想做的只是列出包含一组字符串的目录（包括子目录）中的所有文件，并将信息保存在文件中。我认为 find 会有所帮助，我也对其进行了测试....

```
find . -exec grep -i "TEXT_TO_FIND" '{}' \; -print >TEXT_TO_FIND.txt 
```

但是，我需要获取字符串以动态搜索并动态构建命令字符串，在找出构建命令字符串的正确方法之后，我运行了我的程序。我认为 exec() 会等待来自操作系统的任务完成的信号。我认为没有。即使这样做了，我的程序也永远不会完成，因为它还会搜索我通过重定向创建的文件，因此 grep 会无限期地运行，直到所有磁盘空间都被利用完。

我只是想确认`Runtime.getRuntime().exec(cmd);`不等待来自操作系统的任何信号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:33:02.853

`Runtime.getRuntime().exec(cmd)`不等待来自操作系统的任何信号。如果你想暂停你的程序直到从属程序完成，试试这个：

```
Process p = Runtime.getRuntime().exec(cmd);
p.waitfor(); 
```

# indexing - 如何清理二级索引？

> ID：11311986
> 
> 赞同：0
> 
> 时间：2012-07-03T13:27:41.103
> 
> 标签：indexing, cassandra

在我的流量中，Cassandra中数据的生命周期很短，一般一天，然后就会被删除。

所以在半夜，维护任务会flush和compact所有key空间，目的是为了释放磁盘使用。

但我发现二级索引 sstable 没有被删除或压缩。

那么我需要特定的命令来发布这些索引数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T23:20:45.563

您必须分别压缩包含 2I 信息的（私有）CF。不确定是否可以从 nodetool 执行此操作，但您绝对可以从 JMX (org.apache.cassandra.db.IndexColumnFamilies) 执行此操作。

# apache2 - mod_proxy：重定向到动态端口

> ID：11311987
> 
> 赞同：1
> 
> 时间：2012-07-03T13:27:41.667
> 
> 标签：apache2, mod-proxy

我运行 apache2 作为其他 apache2 服务器的代理，这些服务器监听随机创建的端口。所以我需要正确重定向。我制作了接下来的 2 个重定向模型。

```
ProxyPassMatch ^(/.*)$ http://`127.0.0.1`127.0.0.1:$1
#it always give syntax error 
```

和

```
RewriteEngine On

RewriteRule /(.*) https://`127.0.0.1`:$1 [R] 
#this nothing do 
```

有谁知道，我怎样才能正确重定向到端口？或第一种方法的正确语法。

谢谢你。

# sql-server - 内联查询和SP的执行计划差异

> ID：11311989
> 
> 赞同：0
> 
> 时间：2012-07-03T13:27:47.720
> 
> 标签：sql-server, tsql

几天前有人问我一个问题，如果一个相同的简单查询以三种不同的方式从任何应用程序执行：1.通过内联语句 2.通过调用具有相同查询的 SP 3.通过调用具有相同查询的 SP，但使用 EXEC 语句。

我需要它们的性能差异以及执行计划的差异。先生，当尝试同时执行三个不同的查询并检查执行计划时，我没有任何区别，我真的很困惑，请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:22:16.630

如果查询完全相同，则执行计划不会有任何差异。因为执行计划是查询的，不依赖于它的调用方式

# iphone - 无法在 iOS 4.x 设备上调试

> ID：11311999
> 
> 赞同：-1
> 
> 时间：2012-07-03T13:28:18.960
> 
> 标签：iphone, ios, xcode, debugging

每当我尝试在装有 iOS 4.x（iPhone 4 和 3GS）的设备上进行调试时，都会出现以下错误：

```
error: failed to launch '/XXX/Library/Developer/Xcode/DerivedData/XXX-fytptbaixvmoweacfsniqxtvjkst/Build/Products/Debug-iphoneos/XXX.app/XXX' 
  -- Bad CPU type in executable 
```

在装有 iOS 5.x 的设备上它可以工作。

我正在使用 xCode 4.3.3，我的配置是：

*   架构：标准（armv7）（也尝试过 armv6、armv7 无济于事）
*   基础 SDK：最新 iOS (iOS 5.1)
*   有效架构：armv6、armv7
*   部署目标：iOS 4.0

你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:32:41.290

在您的 Xcode 首选项中，转到下载选项卡并安装“iOS 4.0 - 4.1 设备调试支持”。

> 此包包含 Xcode 在运行 iOS 4.2 之前的 iOS 版本的 iOS 设备上调试您的应用程序所需的信息和符号。如果你打算在运行这些 iOS 版本之一的设备上调试你的应用程序，你应该安装这个包。